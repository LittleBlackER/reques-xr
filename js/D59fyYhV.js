const _0x255997=(function(){let _0x308bb0=!![];return function(_0x3957b6,_0x5043ca){const _0x1f82d8=_0x308bb0?function(){if(_0x5043ca){const _0x279a0a=_0x5043ca['apply'](_0x3957b6,arguments);return _0x5043ca=null,_0x279a0a;}}:function(){};return _0x308bb0=![],_0x1f82d8;};}()),_0x4c5455=_0x255997(this,function(){return _0x4c5455['toString']()['search']('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](_0x4c5455)['search']('(((.+)+)+)'+'+$');});_0x4c5455();const _0xe2cb70=(function(){let _0x1613f8=!![];return function(_0x4942ec,_0x4be8b1){const _0x207ba3=_0x1613f8?function(){if(_0x4be8b1){const _0x1ee563=_0x4be8b1['apply'](_0x4942ec,arguments);return _0x4be8b1=null,_0x1ee563;}}:function(){};return _0x1613f8=![],_0x207ba3;};}());(function(){_0xe2cb70(this,function(){const _0x411c21=new RegExp('function\x20*'+'\x5c(\x20*\x5c)'),_0x240140=new RegExp('\x5c+\x5c+\x20*(?:['+'a-zA-Z_$]['+'0-9a-zA-Z_'+'$]*)','i'),_0x54e01e=_0x4c1f20('init');!_0x411c21['test'](_0x54e01e+'chain')||!_0x240140['test'](_0x54e01e+'input')?_0x54e01e('0'):_0x4c1f20();})();}());const _0x23eb2e=(function(){let _0x1ec842=!![];return function(_0xfd066f,_0x50c7c1){const _0x122c61=_0x1ec842?function(){if(_0x50c7c1){const _0x4eb89b=_0x50c7c1['apply'](_0xfd066f,arguments);return _0x50c7c1=null,_0x4eb89b;}}:function(){};return _0x1ec842=![],_0x122c61;};}()),_0x4aed18=_0x23eb2e(this,function(){let _0x3597e0;try{const _0x4fda73=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');');_0x3597e0=_0x4fda73();}catch(_0x4f8e7c){_0x3597e0=window;}const _0x115589=_0x3597e0['console']=_0x3597e0['console']||{},_0x301e23=['log','warn','info','error','exception','table','trace'];for(let _0x162c89=0x1f61+0xc07*0x1+-0x2b68;_0x162c89<_0x301e23['length'];_0x162c89++){const _0x1ae759=_0x23eb2e['constructo'+'r']['prototype']['bind'](_0x23eb2e),_0xcfcf72=_0x301e23[_0x162c89],_0x3cac13=_0x115589[_0xcfcf72]||_0x1ae759;_0x1ae759['__proto__']=_0x23eb2e['bind'](_0x23eb2e),_0x1ae759['toString']=_0x3cac13['toString']['bind'](_0x3cac13),_0x115589[_0xcfcf72]=_0x1ae759;}});_0x4aed18();var t0=Object['defineProp'+'erty'],s0=(_0x1b45d8,_0x29ccd3,_0x3b7612)=>_0x29ccd3 in _0x1b45d8?t0(_0x1b45d8,_0x29ccd3,{'enumerable':!(0x1169*-0x1+-0xc97+-0x280*-0xc),'configurable':!(-0x1*0x106e+-0x1ce9+-0x1*-0x2d57),'writable':!(0x3ec*0x9+0x1*-0x4e3+-0x1e69),'value':_0x3b7612}):_0x1b45d8[_0x29ccd3]=_0x3b7612,h=(_0x111122,_0x1636fe,_0x421ead)=>s0(_0x111122,typeof _0x1636fe!='symbol'?_0x1636fe+'':_0x1636fe,_0x421ead),i0=(_0x5db286=>(_0x5db286['HIGH']='high',_0x5db286['MEDIUM']='medium',_0x5db286['LOW']='low',_0x5db286['LOW_VR']='lowVR',_0x5db286))(i0||{});const r0=()=>!oS()&&!lS()&&!nS()&&!a0(),nS=()=>{const _0x5956fc=navigator['userAgent']['includes']('Macintosh'),_0x1e87cb=navigator['maxTouchPo'+'ints']===0x167*-0x1+0x2501*0x1+-0x2395,_0x475094=/^((?!chrome|android).)*safari/i['test'](navigator['userAgent']);return _0x5956fc&&_0x1e87cb&&_0x475094;},oS=()=>navigator['userAgent']['includes']('Quest'),a0=()=>{const _0x3a529d=navigator['userAgent']['toLowerCas'+'e']();return _0x3a529d['includes']('pico')||_0x3a529d['includes']('picolrowse'+'r');},lS=()=>['iOS','Android']['includes'](n0()),Jk=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),eU=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),n0=()=>{const _0x5bd35f=window['navigator']['userAgent']['toLowerCas'+'e'](),_0x396e82=window['navigator']['platform']['toLowerCas'+'e']();return/iphone|ipad|ipod/['test'](_0x5bd35f)?'iOS':/android/['test'](_0x5bd35f)?'Android':/mac/['test'](_0x396e82)?'macOS':/win/['test'](_0x396e82)?'Windows':/linux/['test'](_0x396e82)?'Linux':'Unknown';};class tU{constructor(){this['HIGH_FPS_T'+'HRESHOLD']=-0x1092+0x3*-0x412+-0x1*-0x1cf5,this['MEDIUM_FPS'+'_THRESHOLD']=0x1032+-0x152*-0x3+0x87*-0x26,this['HIGH_MEMOR'+'Y_THRESHOL'+'D']=(-0x1*-0x4d5+0x188e+-0x1d5f)*(0x23d9+0x20a0+-0x4079)*(0xba*-0xb+-0x35*-0x7a+-0x46c*0x3)*(0x1c2e+0x2d2+0x30*-0x90),this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']=(-0x2628+-0x1*-0x2165+0x4c5)*(-0x1229*-0x1+-0xf64+0x13b)*(0x1f10+0x2683+-0x4193)*(0x21a7+-0x269+-0x16*0x13d),this['SCORE_THRE'+'SHOLDS']={'HIGH':0x46,'MEDIUM':0x32,'LOW':0x1e},this['VENDOR_WEI'+'GHTS']={'nvidia':0x1,'amd':0.9,'apple':0.8,'intel':0.6,'qualcomm':0.5,'arm':0.4},this['HIGH_END_P'+'ATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*[3-4]|titan\s*(?:rtx|xp|v))|quadro\s+(?:rtx|a[0-9]+)/i,/a[1-9][0-9]+/i],'amd':[/radeon\s+(?:rx\s*[6-9]|rx\s*7[0-9]+|pro\s*w[5-9])|instinct\s+mi[2-9]/i],'apple':[/m[1-3]\s+(?:pro|max|ultra)?/i]},this['MEDIUM_END'+'_PATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*2|gtx\s*1[6-9])|quadro\s+(?:p[2-9]|t[1-9])/i],'amd':[/radeon\s+(?:rx\s*[4-5]|vega\s*[5-9])|pro\s*w[2-4]/i],'apple':[/a[1-9][0-9]+\s+(?:x|z)?/i]},this['LOW_END_PA'+'TTERNS']={'intel':[/(?:hd|uhd|iris|xe)\s*graphics\s*(?:[6-9][0-9]+|[1-9][0-9]+g)/i],'qualcomm':[/adreno\s*[6-9][0-9]+/i],'arm':[/mali\s*-?(?:g[7-9][0-9]|t[8-9][0-9])/i]};}['getVendorS'+'core'](_0x12d550){const _0x173ce5=_0x12d550['toLowerCas'+'e']();for(const [_0x14a833,_0x4ea6c6]of Object['entries'](this['VENDOR_WEI'+'GHTS']))if(_0x173ce5['includes'](_0x14a833))return _0x4ea6c6*(-0x92*0x10+-0xb9*-0xa+-0x2*-0x125);return-0x1fd*-0xe+-0x4f7*-0x7+-0x1*0x3e65;}['getModelSc'+'ore'](_0x1d4304,_0x5a8bbd){const _0xed3dab=_0x1d4304['toLowerCas'+'e'](),_0x5a6669=_0x5a8bbd['toLowerCas'+'e']();for(const [_0xf779e1,_0x4acb05]of Object['entries'](this['HIGH_END_P'+'ATTERNS']))if(_0xed3dab['includes'](_0xf779e1)&&_0x4acb05['some'](_0x13cdd5=>_0x13cdd5['test'](_0x5a6669)))return 0x2*-0x832+0x9ec*-0x3+-0x2e82*-0x1;for(const [_0x2764f8,_0x1c9a36]of Object['entries'](this['MEDIUM_END'+'_PATTERNS']))if(_0xed3dab['includes'](_0x2764f8)&&_0x1c9a36['some'](_0x45d44f=>_0x45d44f['test'](_0x5a6669)))return-0x1b19*-0x1+-0xbd*-0x9+-0x54*0x66;for(const [_0x5913c9,_0x2150b8]of Object['entries'](this['LOW_END_PA'+'TTERNS']))if(_0xed3dab['includes'](_0x5913c9)&&_0x2150b8['some'](_0x105234=>_0x105234['test'](_0x5a6669)))return-0x3cb*-0x1+0x1fbd+0x2356*-0x1;return 0xda2+-0x1e6b*-0x1+-0x2bd1*0x1;}['getMemoryS'+'core'](_0x45c681){return _0x45c681?_0x45c681>=0x2d25+0x214b+-0x1f90?0x576+-0x1fa8+-0x52*-0x53:_0x45c681>=-0x1*-0x1417+0x2970+-0x1e47?-0x1231*0x1+-0x20b7+0x3342:_0x45c681>=-0x3e*-0x71+0x2cb5+-0x30a3*0x1?0x21d2+0x1*-0x2581+0x3ff:_0x45c681>=-0x142*0x17+0xdcd*-0x1+-0x1*-0x3a5b?0x1*0xf5c+-0x1f*-0x113+-0x3063:_0x45c681>=0x5*0x2c3+0xb30+0x35*-0x53?0x9*0x2a3+0x3ff+0x22*-0xcf:-0x108+-0x2476+0x24*0x10c:0x1*-0xd41+-0x53*-0x3a+-0x55b*0x1;}['getDriverS'+'core'](_0x913721){if(!_0x913721)return 0x1ebd+-0xab*-0x22+-0x3541;const _0xa765cf=_0x913721['match'](/20[2-9][0-9]/);if(_0xa765cf){const _0x196e2f=parseInt(_0xa765cf[0x3ad*0x4+0x2559*-0x1+0x16a5]);if(_0x196e2f>=0x150e+-0x1*-0x1507+-0x222e)return 0x1*-0xe9f+0x229a+-0x1397;if(_0x196e2f>=0xb6a+0x1986+-0x1d0a)return 0x19*-0xb+0xb*-0x221+0x18ce;if(_0x196e2f>=-0x980+-0x1*-0xf09+0x25c)return 0x1c96+0x2334+-0x3f8e;}return 0x2*-0xac2+-0x2fe*0x4+-0x59d*-0x6;}['evaluateGP'+'U'](_0x5be393){const _0x23d28b=this['getVendorS'+'core'](_0x5be393['vendor']),_0x164391=this['getModelSc'+'ore'](_0x5be393['vendor'],_0x5be393['renderer']),_0x56ae5e=this['getMemoryS'+'core'](_0x5be393['memory']),_0x5c0094=this['getDriverS'+'core'](_0x5be393['driverVers'+'ion']);return console['log']('GPU:',_0x5be393['vendor']),console['log']('GPU:',_0x5be393['renderer']),console['log']('GPU:',_0x5be393['driverVers'+'ion']),console['table'](_0x5be393),_0x23d28b*(0x199*-0x17+0xdf*0x11+0x15f0+0.3)+_0x164391*(0x49*-0x8+-0x14fb+0x3*0x7c1+0.4)+_0x56ae5e*(-0x18b6+-0x360+0x1c16+0.2)+_0x5c0094*(0x13+0x32*0xa7+-0x20b1+0.1);}['evaluateCP'+'U'](){const _0x2f34db=navigator['hardwareCo'+'ncurrency'];return _0x2f34db>=0x1a3*-0x6+0x1ed*-0x1+-0x3ed*-0x3?0x159a+-0x225*0x7+0x1*-0x694:_0x2f34db>=-0x1f*0x131+-0x1fa+0x7c9*0x5?-0x125e+-0x2600+-0x58*-0xa4:0x569+0x1c5+-0x72d;}['evaluateMe'+'mory'](_0x53d91e){return typeof _0x53d91e=='string'?0x2501+0x7dd+-0x2cde:_0x53d91e['totalJSHea'+'pSize'];}['evaluatePe'+'rformance'](_0xbf629b){const _0x44daf1=lS(),_0x4313b6=nS(),_0x134602=oS();if(_0x4313b6)return'medium';if(_0x134602)return'lowVR';if(_0x44daf1)return'low';const _0x4a9416=_0xbf629b['fps']>=this['HIGH_FPS_T'+'HRESHOLD']?-0x1c57+0x12e1+0x979:_0xbf629b['fps']>=this['MEDIUM_FPS'+'_THRESHOLD']?-0x1*0xe6f+-0x115*-0x1b+-0xec6:-0x18e*-0x1+0x13ba+-0x1547;let _0x54c85f=0x1a19+0x3*-0xae5+-0x1*-0x697;typeof _0xbf629b['gpuInfo']!='string'&&(_0x54c85f=this['evaluateGP'+'U'](_0xbf629b['gpuInfo']));const _0x2862cf=this['evaluateCP'+'U'](),_0x22639f=this['evaluateMe'+'mory'](_0xbf629b['memoryInfo'])>=this['HIGH_MEMOR'+'Y_THRESHOL'+'D']?0xc56*0x1+0x8ac+-0x7d*0x2b:this['evaluateMe'+'mory'](_0xbf629b['memoryInfo'])>=this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']?-0x56d*0x3+-0x1ecd+0x2*0x178b:0x449*0x2+0x115e+-0x8a5*0x3,_0x3827ea=_0x4a9416+_0x54c85f+_0x2862cf+_0x22639f;return console['log']('GPU:',_0x4a9416,_0x54c85f,_0x2862cf,_0x22639f),_0x3827ea>=this['SCORE_THRE'+'SHOLDS']['HIGH']?'high':_0x3827ea>=this['SCORE_THRE'+'SHOLDS']['MEDIUM']?'medium':'low';}['getModelQu'+'alitySetti'+'ngs'](_0x18934c){return{'high':{'textureQuality':'high'},'medium':{'textureQuality':'medium'},'low':{'textureQuality':'low'},'lowVR':{'textureQuality':'lowVR'}}[_0x18934c];}}const o0=()=>{globalThis['requestIdl'+'eCallback']=globalThis['requestIdl'+'eCallback']||function(_0x1d787b){var _0x2d2f91=Date['now']();return setTimeout(function(){_0x1d787b({'didTimeout':!(-0x2a3+-0x21b*-0x3+-0x3ad),'timeRemaining':function(){return Math['max'](0x173a+-0x91c+-0xe1e,0xec*-0x22+0x447+0x1b43-(Date['now']()-_0x2d2f91));}});},-0x14c*0x5+-0x1148+-0x5*-0x4c1);},globalThis['cancelIdle'+'Callback']=globalThis['cancelIdle'+'Callback']||function(_0x27760c){clearTimeout(_0x27760c);};},l0='RenderFram'+'e',hd='RenderFram'+'eTime',em='RenderPass',tn='RenderPass'+'Detail',Pl='RenderActi'+'on',tm='RenderTarg'+'etAlloc',sm='TextureAll'+'oc',im='ShaderAllo'+'c',c0='ShaderComp'+'ile',h0='VRAM.Textu'+'re',d0='VRAM.Vb',f0='VRAM.Ib',u0='BindGroupA'+'lloc',p0='BindGroupF'+'ormatAlloc',zs='Element',m0='Textures',Ml='GpuTimings',sn='$_CURRENT_'+'SDK_VERSIO'+'N',cS='$_CURRENT_'+'SDK_REVISI'+'ON';function kc(_0x2211bd,_0x9332c6){for(const _0x2778a3 in _0x9332c6){const _0x3d5dc5=_0x9332c6[_0x2778a3];Array['isArray'](_0x3d5dc5)?_0x2211bd[_0x2778a3]=kc([],_0x3d5dc5):_0x3d5dc5&&typeof _0x3d5dc5=='object'?_0x2211bd[_0x2778a3]=kc({},_0x3d5dc5):_0x2211bd[_0x2778a3]=_0x3d5dc5;}return _0x2211bd;}const _0={'create'(){return('xxxxxxxx-x'+'xxx-4xxx-y'+'xxx-xxxxxx'+'xxxxxx')['replace'](/[xy]/g,_0x30bf79=>{const _0x11f2af=Math['random']()*(-0x1201+0xd*-0xce+-0x1c87*-0x1)|0x3b*-0x5+-0x1491+-0x4*-0x56e;return(_0x30bf79==='x'?_0x11f2af:_0x11f2af&-0x37a+0x2261*0x1+-0x1ee4|-0x1c*-0x71+0x3e*-0x95+0x17c2)['toString'](-0x22a+0x2*0x1db+-0x4c*0x5);});}},xe={'delimiter':'/','join'(..._0x4ef3c3){let _0x1ffac0=_0x4ef3c3[-0x18bc+0x2208+0x44*-0x23];for(let _0x32272b=-0x2b*-0x31+-0x5ea+-0x1*0x251;_0x32272b<_0x4ef3c3['length']-(0x12e3+-0x11ae+-0x134);_0x32272b++){const _0x1c0fde=_0x4ef3c3[_0x32272b],_0xbc063a=_0x4ef3c3[_0x32272b+(-0x21bb+0x1d*0x2b+0x1cdd)];if(_0xbc063a[-0x1d4a+-0x1*0x29e+0x1fe8]===xe['delimiter']){_0x1ffac0=_0xbc063a;continue;}_0x1c0fde&&_0xbc063a&&_0x1c0fde[_0x1c0fde['length']-(0x2*-0x8f6+0x2*0xc92+-0x737)]!==xe['delimiter']&&_0xbc063a[0x36c+0x1bdc+-0x1f48]!==xe['delimiter']?_0x1ffac0+=xe['delimiter']+_0xbc063a:_0x1ffac0+=_0xbc063a;}return _0x1ffac0;},'normalize'(_0x617ca){const _0x259962=_0x617ca['startsWith'](xe['delimiter']),_0x756817=_0x617ca['endsWith'](xe['delimiter']),_0x63dbc8=_0x617ca['split']('/');let _0x319e80='',_0x2f865b=[];for(let _0x1b6fd4=0x9f+-0x916+-0x877*-0x1;_0x1b6fd4<_0x63dbc8['length'];_0x1b6fd4++)if(_0x63dbc8[_0x1b6fd4]!==''&&_0x63dbc8[_0x1b6fd4]!=='.'){if(_0x63dbc8[_0x1b6fd4]==='..'&&_0x2f865b['length']>-0x20ff+0xf9*0xb+-0x1*-0x164c){_0x2f865b=_0x2f865b['slice'](-0xb7b*-0x2+0x22a1+-0x3997,_0x2f865b['length']-(-0x1a2*0x6+-0x3f1+0x495*0x3));continue;}_0x1b6fd4>-0x1*0x525+0x1*0x1256+-0xd31&&_0x2f865b['push'](xe['delimiter']),_0x2f865b['push'](_0x63dbc8[_0x1b6fd4]);}return _0x319e80=_0x2f865b['join'](''),!_0x259962&&_0x319e80[0x1c76*0x1+0x21ca+0x8*-0x7c8]===xe['delimiter']&&(_0x319e80=_0x319e80['slice'](-0x7fd*-0x2+-0x197*0x13+0xe3c)),_0x756817&&_0x319e80[_0x319e80['length']-(0x394+-0x14cd+0x113a)]!==xe['delimiter']&&(_0x319e80+=xe['delimiter']),_0x319e80;},'split'(_0x2f9fd4){const _0x309039=_0x2f9fd4['lastIndexO'+'f'](xe['delimiter']);return _0x309039!==-(-0x1fbd+0x1d51+0x1b*0x17)?[_0x2f9fd4['substring'](-0xa*-0x355+-0x3d*0x95+0x1*0x22f,_0x309039),_0x2f9fd4['substring'](_0x309039+(-0x562+-0xf18*-0x1+-0x9b5))]:['',_0x2f9fd4];},'getBasename'(_0x147964){return xe['split'](_0x147964)[0x1*0x1e17+0x3*0xb62+-0x403c];},'getDirectory'(_0x7b5c64){return xe['split'](_0x7b5c64)[0x77*-0x7+-0x1e8b+0x2a*0xce];},'getExtension'(_0x274797){const _0x1e75a4=_0x274797['split']('?')[-0xc*-0x130+0x1*-0x1479+0x1b*0x3b]['split']('.')['pop']();return _0x1e75a4!==_0x274797?'.'+_0x1e75a4:'';},'isRelativePath'(_0x58305c){return _0x58305c['charAt'](-0x1*-0x73d+-0x1*0x110a+0x9cd)!=='/'&&_0x58305c['match'](/:\/\//)===null;},'extractPath'(_0x430bc2){let _0x42cba5='';const _0x429315=_0x430bc2['split']('/');let _0x26bd51=0x2f*-0x1a+-0x1e7*0x5+-0x1*-0xe49;if(_0x429315['length']>0xca3+0x2*0xbf1+0x52*-0x72){if(xe['isRelative'+'Path'](_0x430bc2)){if(_0x429315[-0x1aa*-0xc+-0x1*-0x14cf+-0x8f*0x49]==='.'){for(_0x26bd51=0x8b3+-0x16*0x197+0x1f*0xd9;_0x26bd51<_0x429315['length']-(0x1a5c+0x1b84+-0x1*0x35df);++_0x26bd51)_0x42cba5+=_0x26bd51===-0x6b3+0x15*0xa7+-0x7*0x100?_0x429315[_0x26bd51]:'/'+_0x429315[_0x26bd51];}else{if(_0x429315[0x78f+0x211*0x8+0x371*-0x7]==='..'){for(_0x26bd51=0x1*0x18eb+0x2302*0x1+-0x3bed;_0x26bd51<_0x429315['length']-(0xec0+0xc*0xd5+-0x18bb);++_0x26bd51)_0x42cba5+=_0x26bd51===0x1279+-0x1991+0x718?_0x429315[_0x26bd51]:'/'+_0x429315[_0x26bd51];}else{for(_0x42cba5='.',_0x26bd51=-0x82f*-0x4+0x27*0x2b+0x71*-0x59;_0x26bd51<_0x429315['length']-(0x8*-0x49d+0x4ee+0x1ffb);++_0x26bd51)_0x42cba5+='/'+_0x429315[_0x26bd51];}}}else{for(_0x26bd51=-0x9e9+0x61*-0x4f+0x27d8*0x1;_0x26bd51<_0x429315['length']-(-0x1*-0x12b9+0xbb3+-0x1e6b);++_0x26bd51)_0x42cba5+=_0x26bd51===-0x1b31+-0x1363+0x2c*0x10f?_0x429315[_0x26bd51]:'/'+_0x429315[_0x26bd51];}}return _0x42cba5;}},g0=()=>{let _0x1d1799=!(-0x2e*0x37+-0x3d*0x9d+0x2f4c*0x1);try{const _0x3294bb=Object['defineProp'+'erty']({},'passive',{'get':function(){return _0x1d1799=!(-0x21e+0x9*0x26+0xc8),!(0x6fb*0x4+0x11f4+-0x2ddf);}});window['addEventLi'+'stener']('testpassiv'+'e',null,_0x3294bb),window['removeEven'+'tListener']('testpassiv'+'e',null,_0x3294bb);}catch{}return _0x1d1799;},Ui=typeof navigator<'u'?navigator['userAgent']:'',Uc=typeof window<'u'?'browser':typeof global<'u'?'node':'worker',rm=/android/i['test'](Ui)?'android':/ip(?:[ao]d|hone)/i['test'](Ui)?'ios':/windows/i['test'](Ui)?'windows':/mac os/i['test'](Ui)?'osx':/linux/i['test'](Ui)?'linux':/cros/i['test'](Ui)?'cros':null,S0=Uc!=='browser'?null:/Chrome\/|Chromium\/|Edg.*\//['test'](Ui)?'chrome':/Safari\//['test'](Ui)?'safari':/Firefox\//['test'](Ui)?'firefox':'other',y0=Uc==='browser'&&('ontouchsta'+'rt'in window||'maxTouchPo'+'ints'in navigator&&navigator['maxTouchPo'+'ints']>-0x2669+-0x132*-0x18+0x9b9),v0=g0(),Me={'name':rm,'browser':Uc==='browser','worker':Uc==='worker','android':rm==='android','touch':y0,'passiveEvents':v0,'browserName':S0},hS='abcdefghij'+'klmnopqrst'+'uvwxyz',dS='ABCDEFGHIJ'+'KLMNOPQRST'+'UVWXYZ',x0=hS+dS,uf=-0x288c*-0x1+-0x1*-0x6ba1+0x43d3,fS=0x2a86+-0xe163+0x1*0x192dc,am=0x9*-0x19b3+0x1596b+0x69e0,T0=-0xeb7f*-0x1+-0xc4b4+-0x36*-0x36e,w0=-0x3a75+0x11ac+0x48d6,nm=0x20c*-0xfb+-0x108f6+0x4*0x13f28,om=0x9c58*-0x6+0x31929+0x282e6,E0=-0x1ac23+-0x38fe7+0x73005,b0=0x7*0x8c03+-0x1*0x55a2+0x9*-0x2bd4,A0=-0x92d+-0x4d3*0xa+0x1*0x5a3b,C0=-0x1e2*-0x2+-0x2efc+0x4c37,pf=-0x2*0x837a+0x1047a+-0x6*-0x2abf,mf=0x3d0+0x45*-0x34+0x1*0x10843;function _f(_0x26f780,_0x154576=0x21d6*0x1+0x1*0xc4d+-0x7f*0x5d){const _0x44669f=_0x26f780['length'];if(_0x154576<0x3*-0x4e1+0xed6+-0x3*0x11||_0x154576>=_0x44669f)return null;const _0x7d24f5=_0x26f780['charCodeAt'](_0x154576);if(_0x44669f>0x9a8+-0xf65+0x5be&&_0x7d24f5>=uf&&_0x7d24f5<=fS){const _0x5ed2ca=_0x26f780['charCodeAt'](_0x154576+(-0x50*0x55+0xfa5*-0x1+0x2*0x151b));if(_0x5ed2ca>=am&&_0x5ed2ca<=T0)return{'code':(_0x7d24f5-uf)*(0xd6*-0x2c+0x1758+0x1170)+_0x5ed2ca-am+(-0x512+-0xc5f2+0x1cb04),'long':!(-0x4*0x557+-0xcee*-0x3+0x1*-0x116e)};}return{'code':_0x7d24f5,'long':!(0x1d54*-0x1+0x1643+-0x5*-0x16a)};}function lr(_0x43cf75,_0x2a57da,_0x1378c6){if(!_0x43cf75)return!(0xc*0xb6+0x1371*0x2+-0x2f69);const _0x2e43f2=_f(_0x43cf75);if(_0x2e43f2){const _0x1a4eac=_0x2e43f2['code'];return _0x1a4eac>=_0x2a57da&&_0x1a4eac<=_0x1378c6;}return!(-0x2*-0x2b8+0x54b*0x1+-0xaba);}function P0(_0x2a8fe9,_0xcc3f84){if(_0xcc3f84===_0x2a8fe9['length']-(0x2*-0xceb+0x189c+-0x69*-0x3))return-0x250f*-0x1+-0x17f9+0xd15*-0x1;if(lr(_0x2a8fe9[_0xcc3f84],uf,fS)){const _0x6ee95f=_0x2a8fe9['substring'](_0xcc3f84,_0xcc3f84+(0x2*-0xbf5+0x25a3+-0xdb7)),_0x3502af=_0x2a8fe9['substring'](_0xcc3f84+(0x4*0x341+-0x1989+0xc87),_0xcc3f84+(0x181e+-0x6*-0x3d3+-0x2f0c));return lr(_0x3502af,E0,b0)||lr(_0x6ee95f,nm,om)&&lr(_0x3502af,nm,om)?-0x1ba9+-0x11f5+0x2da2:lr(_0x3502af,pf,mf)?0x738+-0x1a3e*-0x1+-0x1*0x2173:-0x1a*-0x128+-0xd59+0x1*-0x10b5;}return lr(_0x2a8fe9[_0xcc3f84+(-0x33d*0x7+-0x2*-0x4c+0x24*0x9d)],pf,mf)?0x25e6+0x1*-0x53e+-0x20a6:0xc*-0x8a+-0xc88+0x1301;}const Tc={'ASCII_LOWERCASE':hS,'ASCII_UPPERCASE':dS,'ASCII_LETTERS':x0,'format'(_0x44e8d2,..._0xd6175){for(let _0x3fa4d9=0x1a07+0x224e+-0x3c55;_0x3fa4d9<_0xd6175['length'];_0x3fa4d9++)_0x44e8d2=_0x44e8d2['replace']('{'+_0x3fa4d9+'}',_0xd6175[_0x3fa4d9]);return _0x44e8d2;},'getCodePoint'(_0x42165e,_0x175fdb){const _0x74ab16=_f(_0x42165e,_0x175fdb);return _0x74ab16&&_0x74ab16['code'];},'getCodePoints'(_0x37d11a){if(typeof _0x37d11a!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x55ad74=-0x2f4+-0x13c3+0x1*0x16b7;const _0x583e91=[];let _0x46c549;for(;_0x46c549=_f(_0x37d11a,_0x55ad74);)_0x583e91['push'](_0x46c549['code']),_0x55ad74+=_0x46c549['long']?-0x1db3*0x1+-0x5*0x619+-0x1e19*-0x2:-0x6a3+0x9e1+-0x33d;return _0x583e91;},'getSymbols'(_0x47311f){if(typeof _0x47311f!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0xa3e7c6=-0x118+0x1*0x20a2+-0x16f*0x16;const _0x18e708=_0x47311f['length'],_0x1927be=[];let _0x520010=-0x2*0x21e+-0x2505*0x1+0x2941,_0x4edab9;for(;_0xa3e7c6<_0x18e708;){if(_0x520010+=P0(_0x47311f,_0xa3e7c6+_0x520010),_0x4edab9=_0x47311f[_0xa3e7c6+_0x520010],lr(_0x4edab9,A0,C0)&&(_0x4edab9=_0x47311f[_0xa3e7c6+_0x520010++]),lr(_0x4edab9,pf,mf)&&(_0x4edab9=_0x47311f[_0xa3e7c6+_0x520010++]),_0x4edab9&&_0x4edab9['charCodeAt'](-0x1602*0x1+0xe54+0x7ae)===w0){_0x4edab9=_0x47311f[_0xa3e7c6+_0x520010++];continue;}const _0x16e6cc=_0x47311f['substring'](_0xa3e7c6,_0xa3e7c6+_0x520010);_0x1927be['push'](_0x16e6cc),_0xa3e7c6+=_0x520010,_0x520010=0x13a8+-0x1*-0x1f91+0x2f*-0x117;}return _0x1927be;},'fromCodePoint'(..._0x375b07){return _0x375b07['map'](_0x4e07ea=>_0x4e07ea>0x2*-0xdcf9+-0x8a4+0x2c295?(_0x4e07ea-=0xeb*0xb5+0x1d1bd+0x4*-0x5df9,String['fromCharCo'+'de']((_0x4e07ea>>0x68f*0x2+-0x1a79+-0xd65*-0x1)+(0x16e7e*-0x1+-0x4*0x686b+-0x3e82a*-0x1),_0x4e07ea%(0x96d+0x369*0x5+-0x167a)+(-0x2723+0x1796a+-0x7647))):String['fromCharCo'+'de'](_0x4e07ea))['join']('');}},qr=class qr{static['set'](_0x19c358,_0x1442cb=!(-0x140b+-0x17*0xd1+0x26d2)){_0x1442cb?qr['_traceChan'+'nels']['add'](_0x19c358):qr['_traceChan'+'nels']['delete'](_0x19c358);}static['get'](_0x46d4a1){return qr['_traceChan'+'nels']['has'](_0x46d4a1);}};h(qr,'_traceChan'+'nels',new Set()),h(qr,'stack',!(-0x19a4+-0x80e*-0x1+0x1197));let mi=qr;const Vt=class Vt{static['deprecated'](_0x544f49){Vt['_loggedMes'+'sages']['has'](_0x544f49)||(Vt['_loggedMes'+'sages']['add'](_0x544f49),console['warn']('DEPRECATED'+':\x20'+_0x544f49));}static['removed'](_0xe45a1f){Vt['_loggedMes'+'sages']['has'](_0xe45a1f)||(Vt['_loggedMes'+'sages']['add'](_0xe45a1f),console['error']('REMOVED:\x20'+_0xe45a1f));}static['assertDepr'+'ecated'](_0x7e9357,_0x17aacd){_0x7e9357||Vt['deprecated'](_0x17aacd);}static['assert'](_0x41a56b,..._0x5167b6){_0x41a56b||console['error']('ASSERT\x20FAI'+'LED:\x20',..._0x5167b6);}static['assertDest'+'royed'](_0x55aae9){var _0x52eb38;if(_0x55aae9!=null&&_0x55aae9['__alreadyD'+'estroyed']){const _0x56fcf2='['+((_0x52eb38=_0x55aae9['constructo'+'r'])==null?void(0x15*-0x107+0x1*0xe53+0x740):_0x52eb38['name'])+(']\x20with\x20nam'+'e\x20[')+_0x55aae9['name']+(']\x20has\x20alre'+'ady\x20been\x20d'+'estroyed,\x20'+'and\x20cannot'+'\x20be\x20used.');Vt['_loggedMes'+'sages']['has'](_0x56fcf2)||(Vt['_loggedMes'+'sages']['add'](_0x56fcf2),console['error']('ASSERT\x20FAI'+'LED:\x20',_0x56fcf2,_0x55aae9));}}static['call'](_0x55633e){_0x55633e();}static['log'](..._0x30aefe){console['log'](..._0x30aefe);}static['logOnce'](_0x8f2228,..._0x18bd27){Vt['_loggedMes'+'sages']['has'](_0x8f2228)||(Vt['_loggedMes'+'sages']['add'](_0x8f2228),console['log'](_0x8f2228,..._0x18bd27));}static['warn'](..._0x5cacd2){console['warn'](..._0x5cacd2);}static['warnOnce'](_0x1c3105,..._0x204928){Vt['_loggedMes'+'sages']['has'](_0x1c3105)||(Vt['_loggedMes'+'sages']['add'](_0x1c3105),console['warn'](_0x1c3105,..._0x204928));}static['error'](..._0x566fcd){console['error'](..._0x566fcd);}static['errorOnce'](_0xd32b5e,..._0x349371){Vt['_loggedMes'+'sages']['has'](_0xd32b5e)||(Vt['_loggedMes'+'sages']['add'](_0xd32b5e),console['error'](_0xd32b5e,..._0x349371));}static['trace'](_0x33aba8,..._0x353cd4){mi['get'](_0x33aba8)&&(console['groupColla'+'psed'](_0x33aba8['padEnd'](-0x4*-0x97+0x1*0x6f5+-0x5*0x1d9,'\x20')+'|',..._0x353cd4),console['groupEnd']());}};h(Vt,'_loggedMes'+'sages',new Set());let w=Vt;class ya{static['setName'](_0x511618,_0x3fadf6){_0x511618&&(_0x511618['name']=_0x3fadf6);}static['setLabel'](_0x158eb2,_0x361da7){_0x158eb2&&(_0x158eb2['label']=_0x361da7);}static['setDestroy'+'ed'](_0x29f42b){_0x29f42b&&(_0x29f42b['__alreadyD'+'estroyed']=!(-0x170d+0x1a0b+-0x2*0x17f));}}class M0{constructor(_0x5c364a,_0x18d756,_0x274e07,_0x4a09f6,_0x546843=!(0xd*-0x81+0x5ba+0xd4)){h(this,'handler'),h(this,'name'),h(this,'callback'),h(this,'scope'),h(this,'_once'),h(this,'_removed',!(-0x9*-0x427+0x1dd*0x1+0x79*-0x53)),(this['handler']=_0x5c364a,this['name']=_0x18d756,this['callback']=_0x274e07,this['scope']=_0x4a09f6,this['_once']=_0x546843);}['off'](){this['_removed']||this['handler']['offByHandl'+'e'](this);}['on'](_0x44d0d7,_0x56df9b,_0x4b034f=this){return w['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.on\x20is\x20d'+'eprecated,'+'\x20subscribe'+'\x20to\x20an\x20eve'+'nt\x20from\x20Ev'+'entHandler'+'\x20directly\x20'+'instead.'),this['handler']['_addCallba'+'ck'](_0x44d0d7,_0x56df9b,_0x4b034f,!(0x3*-0x703+-0x1934+0xf6a*0x3));}['once'](_0x33d7fd,_0x58b91e,_0x459e02=this){return w['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.once\x20is'+'\x20deprecate'+'d,\x20subscri'+'be\x20to\x20an\x20e'+'vent\x20from\x20'+'EventHandl'+'er\x20directl'+'y\x20instead.'),this['handler']['_addCallba'+'ck'](_0x33d7fd,_0x58b91e,_0x459e02,!(-0x1fcb+0x20af+-0xe4));}set['removed'](_0x3313c6){_0x3313c6&&(this['_removed']=!(-0x20b*0x4+-0x20ec+0x2918));}get['removed'](){return this['_removed'];}['toJSON'](_0x5ede6d){}}class me{constructor(){h(this,'_callbacks',new Map()),h(this,'_callbackA'+'ctive',new Map());}['initEventH'+'andler'](){this['_callbacks']=new Map(),this['_callbackA'+'ctive']=new Map();}['_addCallba'+'ck'](_0x3a3087,_0x5ea8e6,_0x12d6c0,_0x1ceb4a){if((!_0x3a3087||typeof _0x3a3087!='string'||!_0x5ea8e6)&&console['warn']('EventHandl'+'er:\x20subscr'+'ibing\x20to\x20a'+'n\x20event\x20('+_0x3a3087+(')\x20with\x20mis'+'sing\x20argum'+'ents'),_0x5ea8e6),this['_callbacks']['has'](_0x3a3087)||this['_callbacks']['set'](_0x3a3087,[]),this['_callbackA'+'ctive']['has'](_0x3a3087)){const _0x5af28c=this['_callbackA'+'ctive']['get'](_0x3a3087);_0x5af28c&&_0x5af28c===this['_callbacks']['get'](_0x3a3087)&&this['_callbackA'+'ctive']['set'](_0x3a3087,_0x5af28c['slice']());}const _0x406997=new M0(this,_0x3a3087,_0x5ea8e6,_0x12d6c0,_0x1ceb4a);return this['_callbacks']['get'](_0x3a3087)['push'](_0x406997),_0x406997;}['on'](_0x11e55d,_0x56ae1f,_0x1dff67=this){return this['_addCallba'+'ck'](_0x11e55d,_0x56ae1f,_0x1dff67,!(-0x1*0x1c6+-0x721+-0x18*-0x5f));}['once'](_0x276f7f,_0x1cea8b,_0xa7ddd4=this){return this['_addCallba'+'ck'](_0x276f7f,_0x1cea8b,_0xa7ddd4,!(-0x6*0x9d+-0x11*-0x7f+-0x4c1));}['off'](_0x199ba2,_0x31a83e,_0x2aa4e8){if(_0x199ba2)this['_callbackA'+'ctive']['has'](_0x199ba2)&&this['_callbackA'+'ctive']['get'](_0x199ba2)===this['_callbacks']['get'](_0x199ba2)&&this['_callbackA'+'ctive']['set'](_0x199ba2,this['_callbackA'+'ctive']['get'](_0x199ba2)['slice']());else{for(const [_0x117fa7,_0x5076d8]of this['_callbackA'+'ctive'])this['_callbacks']['has'](_0x117fa7)&&this['_callbacks']['get'](_0x117fa7)===_0x5076d8&&this['_callbackA'+'ctive']['set'](_0x117fa7,_0x5076d8['slice']());}if(_0x199ba2){if(_0x31a83e){const _0x20134b=this['_callbacks']['get'](_0x199ba2);if(!_0x20134b)return this;for(let _0x3dd5b9=0xca7+0x9eb*0x1+0x1692*-0x1;_0x3dd5b9<_0x20134b['length'];_0x3dd5b9++)_0x20134b[_0x3dd5b9]['callback']===_0x31a83e&&(_0x2aa4e8&&_0x20134b[_0x3dd5b9]['scope']!==_0x2aa4e8||(_0x20134b[_0x3dd5b9]['removed']=!(-0x605+0x60b+0x2*-0x3),_0x20134b['splice'](_0x3dd5b9,0xe0d*-0x2+-0x192c+0x3547),_0x3dd5b9--));_0x20134b['length']===-0xda0+0x23b*0xe+0x5de*-0x3&&this['_callbacks']['delete'](_0x199ba2);}else{const _0x2836ff=this['_callbacks']['get'](_0x199ba2);if(_0x2836ff){for(let _0x15eec0=0x3*-0xb4b+-0x34*0xa9+0x397*0x13;_0x15eec0<_0x2836ff['length'];_0x15eec0++)_0x2836ff[_0x15eec0]['removed']=!(-0x1872+-0x13f8+0x2c6a);this['_callbacks']['delete'](_0x199ba2);}}}else{for(const _0x1672f3 of this['_callbacks']['values']())for(let _0x2016ff=0x44c+-0x611*0x3+0xde7;_0x2016ff<_0x1672f3['length'];_0x2016ff++)_0x1672f3[_0x2016ff]['removed']=!(0x1*-0x2c3+-0x2*-0xf4c+-0x1bd5);this['_callbacks']['clear']();}return this;}['offByHandl'+'e'](_0x2c617a){const _0x4e68e4=_0x2c617a['name'];_0x2c617a['removed']=!(-0x19f6+0x2e*0x52+0x6*0x1df),this['_callbackA'+'ctive']['has'](_0x4e68e4)&&this['_callbackA'+'ctive']['get'](_0x4e68e4)===this['_callbacks']['get'](_0x4e68e4)&&this['_callbackA'+'ctive']['set'](_0x4e68e4,this['_callbackA'+'ctive']['get'](_0x4e68e4)['slice']());const _0x24e06b=this['_callbacks']['get'](_0x4e68e4);if(!_0x24e06b)return this;const _0x287c6b=_0x24e06b['indexOf'](_0x2c617a);return _0x287c6b!==-(0x1afa+0xe70+-0x2969)&&(_0x24e06b['splice'](_0x287c6b,0x18e8+0x188e+-0x3175),_0x24e06b['length']===-0x50*-0x23+0xd*-0x9+0x1*-0xa7b&&this['_callbacks']['delete'](_0x4e68e4)),this;}['fire'](_0x3982ec,_0x17dbbe,_0xd206b6,_0x5d56fb,_0x360458,_0x34c8e6,_0x35d6ee,_0x4afe25,_0x12a6eb){if(!_0x3982ec)return this;const _0x21083f=this['_callbacks']['get'](_0x3982ec);if(!_0x21083f)return this;let _0x5eb190;this['_callbackA'+'ctive']['has'](_0x3982ec)?this['_callbackA'+'ctive']['get'](_0x3982ec)!==_0x21083f&&(_0x5eb190=_0x21083f['slice']()):this['_callbackA'+'ctive']['set'](_0x3982ec,_0x21083f);for(let _0x43d334=0xbbd*0x3+0x4ca*-0x6+0x15*-0x4f;(_0x5eb190||this['_callbackA'+'ctive']['get'](_0x3982ec))&&_0x43d334<(_0x5eb190||this['_callbackA'+'ctive']['get'](_0x3982ec))['length'];_0x43d334++){const _0x46e6ed=(_0x5eb190||this['_callbackA'+'ctive']['get'](_0x3982ec))[_0x43d334];if(_0x46e6ed['callback']&&(_0x46e6ed['callback']['call'](_0x46e6ed['scope'],_0x17dbbe,_0xd206b6,_0x5d56fb,_0x360458,_0x34c8e6,_0x35d6ee,_0x4afe25,_0x12a6eb),_0x46e6ed['_once'])){const _0x2857b4=this['_callbacks']['get'](_0x3982ec),_0x3353a2=_0x2857b4?_0x2857b4['indexOf'](_0x46e6ed):-(-0x1d4b+-0x233d+0x4089);if(_0x3353a2!==-(0x1f*0xb1+-0x740+-0x14a*0xb)){this['_callbackA'+'ctive']['get'](_0x3982ec)===_0x2857b4&&this['_callbackA'+'ctive']['set'](_0x3982ec,this['_callbackA'+'ctive']['get'](_0x3982ec)['slice']());const _0x159adc=this['_callbacks']['get'](_0x3982ec);if(!_0x159adc)continue;_0x159adc[_0x3353a2]['removed']=!(-0x2*-0x10f3+-0xf*0x26e+0xa3*0x4),_0x159adc['splice'](_0x3353a2,-0x35f*-0xa+0x2273+0x4428*-0x1),_0x159adc['length']===0x1*-0x14fd+0xd9d+0x760&&this['_callbacks']['delete'](_0x3982ec);}}}return _0x5eb190||this['_callbackA'+'ctive']['delete'](_0x3982ec),this;}['hasEvent'](_0x2a32dd){var _0x256b57;return!!((_0x256b57=this['_callbacks']['get'](_0x2a32dd))!=null&&_0x256b57['length']);}}class D0{constructor(){h(this,'_list',[]),h(this,'_index',{});}['push'](_0x53fe98,_0xa4d1b3){if(this['_index'][_0x53fe98])throw Error('Key\x20alread'+'y\x20in\x20index'+'\x20'+_0x53fe98);const _0x423b7b=this['_list']['push'](_0xa4d1b3)-(-0x151c+-0x1*0x2d7+0x2*0xbfa);this['_index'][_0x53fe98]=_0x423b7b;}['has'](_0x227973){return this['_index'][_0x227973]!==void(-0x1*-0x11d9+0xa50+-0x1b*0x10b);}['get'](_0x156ded){const _0x378e6a=this['_index'][_0x156ded];return _0x378e6a!==void(0x1585+-0x15e7+0x62)?this['_list'][_0x378e6a]:null;}['remove'](_0x27e2a4){const _0x28dae2=this['_index'][_0x27e2a4];if(_0x28dae2!==void(0x24d4+-0xad5+-0x19ff)){this['_list']['splice'](_0x28dae2,0x24f5+-0x6be+-0x1e36),delete this['_index'][_0x27e2a4];for(_0x27e2a4 in this['_index']){const _0x1eb36f=this['_index'][_0x27e2a4];_0x1eb36f>_0x28dae2&&(this['_index'][_0x27e2a4]=_0x1eb36f-(0x1fd1+-0x1*0x129c+-0xd34));}return!(-0x1*0x22b1+-0x6d*0x23+-0x17*-0x228);}return!(0x2*0x1027+0x1a25+-0x3a72);}['list'](){return this['_list'];}['clear'](){this['_list']['length']=-0x4c6+-0x1209*0x1+0x16cf;for(const _0x450f0f in this['_index'])delete this['_index'][_0x450f0f];}}const I0=_0x233c6f=>{const _0x37b774={};let _0x13418f=_0x37b774;return()=>(_0x13418f===_0x37b774&&(_0x13418f=_0x233c6f()),_0x13418f);},ii=class ii{static['loadScript'](_0x3ff2d2,_0x54649e){const _0x47acbc=document['createElem'+'ent']('script');_0x47acbc['setAttribu'+'te']('src',_0x3ff2d2),_0x47acbc['onload']=()=>{_0x54649e(null);},_0x47acbc['onerror']=()=>{_0x54649e('Failed\x20to\x20'+'load\x20scrip'+'t=\x27'+_0x3ff2d2+'\x27');},document['body']['appendChil'+'d'](_0x47acbc);}static['loadWasm'](_0x2d0633,_0x536b66,_0x4d454a){const _0xde0d66=ii['wasmSuppor'+'ted']()&&_0x536b66['glueUrl']&&_0x536b66['wasmUrl']?_0x536b66['glueUrl']:_0x536b66['fallbackUr'+'l'];_0xde0d66?ii['loadScript'](_0xde0d66,_0x203bde=>{if(_0x203bde)_0x4d454a(_0x203bde,null);else{const _0x2eeac1=window[_0x2d0633];window[_0x2d0633]=void(-0xc*-0xf1+-0x9*-0x8d+-0x1041),_0x2eeac1({'locateFile':()=>_0x536b66['wasmUrl'],'onAbort':()=>{_0x4d454a('wasm\x20modul'+'e\x20aborted.');}})['then'](_0x3705fa=>{_0x4d454a(null,_0x3705fa);});}}):_0x4d454a('No\x20support'+'ed\x20wasm\x20mo'+'dules\x20foun'+'d.',null);}static['getModule'](_0x234555){return ii['modules']['hasOwnProp'+'erty'](_0x234555)||(ii['modules'][_0x234555]={'config':null,'initializing':!(-0x187*-0x17+-0x2a1*0xd+-0xf3),'instance':null,'callbacks':[]}),ii['modules'][_0x234555];}static['initialize'](_0x53fdc9,_0x38924d){if(_0x38924d['initializi'+'ng'])return;const _0x448ed0=_0x38924d['config'];(_0x448ed0['glueUrl']||_0x448ed0['wasmUrl']||_0x448ed0['fallbackUr'+'l'])&&(_0x38924d['initializi'+'ng']=!(0x201d*-0x1+0x27c+0x1da1),ii['loadWasm'](_0x53fdc9,_0x448ed0,(_0x17b810,_0x5bb135)=>{_0x17b810?_0x448ed0['errorHandl'+'er']?_0x448ed0['errorHandl'+'er'](_0x17b810):console['error']('failed\x20to\x20'+'initialize'+'\x20module='+_0x53fdc9+'\x20error='+_0x17b810):(_0x38924d['instance']=_0x5bb135,_0x38924d['callbacks']['forEach'](_0x421f08=>{_0x421f08(_0x5bb135);}));}));}};h(ii,'modules',{}),h(ii,'wasmSuppor'+'ted',I0(()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x1b794f=new WebAssembly['Module'](Uint8Array['of'](0x1e79*0x1+0x17f9+0x1226*-0x3,0x19d8+0x1*-0x1e99+0x522,0x3ec+0x1546+0x4f3*-0x5,-0x536+0x258+-0x1*-0x34b,0x6*0x105+0x1e66+0xd*-0x2cf,0xb*0x1e5+0xed9+-0x23b*0x10,-0x1*0x1e53+-0x10f1*0x1+0x2f44,-0x5f3+-0xda9*0x1+-0x1*-0x139c));if(_0x1b794f instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x1b794f)instanceof WebAssembly['Instance'];}}catch{}return!(-0x1*0x2325+-0xb55+0x2e7b);}));let $r=ii;class uS{static['setConfig'](_0x2744b4,_0x5a835e){const _0x414f71=$r['getModule'](_0x2744b4);_0x414f71['config']=_0x5a835e,_0x414f71['callbacks']['length']>-0x9*0x3d7+-0x24*0x36+-0x21*-0x147&&$r['initialize'](_0x2744b4,_0x414f71);}static['getConfig'](_0x450cca){var _0x468a9b,_0x116631;return(_0x116631=(_0x468a9b=$r['modules'])==null?void(-0x4*0x81b+0x4f*0x4+0x1f30):_0x468a9b[_0x450cca])==null?void(-0x11*0x47+0x1484+0x1*-0xfcd):_0x116631['config'];}static['getInstanc'+'e'](_0x11b977,_0x2e4cda){const _0x56583a=$r['getModule'](_0x11b977);_0x56583a['instance']?_0x2e4cda(_0x56583a['instance']):(_0x56583a['callbacks']['push'](_0x2e4cda),_0x56583a['config']&&$r['initialize'](_0x11b977,_0x56583a));}}class pS{constructor(_0x2a64b6){h(this,'arraybuffe'+'r'),h(this,'dataView'),h(this,'offset',0x2*0x823+0xfa5+-0x1feb),(this['arraybuffe'+'r']=_0x2a64b6,this['dataView']=new DataView(_0x2a64b6));}get['remainingB'+'ytes'](){return this['dataView']['byteLength']-this['offset'];}['reset'](_0x514738=-0x1*-0xe99+-0x2673+0x2*0xbed){this['offset']=_0x514738;}['skip'](_0x56fa31){this['offset']+=_0x56fa31;}['align'](_0xd05de7){this['offset']=this['offset']+_0xd05de7-(0x150+-0x1788+0x1639)&~(_0xd05de7-(-0x13ea*-0x1+-0x66*0x2c+-0x3*0xcb));}['_inc'](_0x7c2ad3){return this['offset']+=_0x7c2ad3,this['offset']-_0x7c2ad3;}['readChar'](){return String['fromCharCo'+'de'](this['dataView']['getUint8'](this['offset']++));}['readChars'](_0x3ca5d7){let _0x16ce7a='';for(let _0x3e7398=-0x4c*-0x1+-0xb7+0x6b;_0x3e7398<_0x3ca5d7;++_0x3e7398)_0x16ce7a+=this['readChar']();return _0x16ce7a;}['readU8'](){return this['dataView']['getUint8'](this['offset']++);}['readU16'](){return this['dataView']['getUint16'](this['_inc'](0x5*-0x149+-0x6b9*0x2+0x13e1),!(-0x91*0x2f+-0xbb7*0x2+0x320d));}['readU32'](){return this['dataView']['getUint32'](this['_inc'](-0x4e9+-0x1*0xf43+-0x11*-0x130),!(-0x1845+-0x29*0xd1+0x39be));}['readU64'](){return this['readU32']()+(0x1287+0x1a4d+-0x1669*0x2)**(-0x58*-0x59+-0x18e6*-0x1+-0x375e)*this['readU32']();}['readU32be'](){return this['dataView']['getUint32'](this['_inc'](-0xb7a+0xf*-0xa+0xc14),!(0x8ea+-0x187f+-0x5f*-0x2a));}['readArray'](_0x488cd1){for(let _0x232a3d=0x293*0x8+-0x1d67*0x1+0xb*0xcd;_0x232a3d<_0x488cd1['length'];++_0x232a3d)_0x488cd1[_0x232a3d]=this['readU8']();}['readLine'](){const _0x2ffa7f=this['dataView'];let _0x4204fc='';for(;!(this['offset']>=_0x2ffa7f['byteLength']);){const _0x2946e1=String['fromCharCo'+'de'](this['readU8']());if(_0x2946e1==='\x0a')break;_0x4204fc+=_0x2946e1;}return _0x4204fc;}}class Bc{constructor(_0x2c52f3){h(this,'items',[]),h(this,'length',0x1*-0x12df+0x7*-0x4fd+0x55*0xa2),h(this,'loopIndex',-(-0x1bf0+0x1d6d+-0x2*0xbe)),h(this,'_sortBy'),h(this,'_sortHandl'+'er'),(this['_sortBy']=_0x2c52f3['sortBy'],this['_sortHandl'+'er']=this['_doSort']['bind'](this));}['_binarySea'+'rch'](_0x1c29f9){let _0x4eb412=-0x422*-0x2+-0x99+-0x97*0xd,_0x3536cb=this['items']['length']-(-0x1372*-0x2+0x23cc+-0x3*0x18e5);const _0x2baf05=_0x1c29f9[this['_sortBy']];let _0x445244,_0x31a96c;for(;_0x4eb412<=_0x3536cb;)_0x445244=Math['floor']((_0x4eb412+_0x3536cb)/(0x7df+0xbe1+-0x13be)),_0x31a96c=this['items'][_0x445244][this['_sortBy']],_0x31a96c<=_0x2baf05?_0x4eb412=_0x445244+(-0xe*-0x93+-0xb*-0x1ac+-0x1a6d):_0x31a96c>_0x2baf05&&(_0x3536cb=_0x445244-(0x1*-0xab3+0x1*0x1bbe+-0x110a));return _0x4eb412;}['_doSort'](_0x41ea6f,_0x1a90ef){const _0x25f5d5=this['_sortBy'];return _0x41ea6f[_0x25f5d5]-_0x1a90ef[_0x25f5d5];}['insert'](_0x343138){const _0x46efb1=this['_binarySea'+'rch'](_0x343138);this['items']['splice'](_0x46efb1,0x1db0+0xd4*-0x19+-0x47e*0x2,_0x343138),this['length']++,this['loopIndex']>=_0x46efb1&&this['loopIndex']++;}['append'](_0x337ef9){this['items']['push'](_0x337ef9),this['length']++;}['remove'](_0x31a078){const _0x2b7def=this['items']['indexOf'](_0x31a078);_0x2b7def<-0x26c5+0xd3d*0x1+0x1988||(this['items']['splice'](_0x2b7def,0x2*0x409+-0x8c*-0x4+-0x20d*0x5),this['length']--,this['loopIndex']>=_0x2b7def&&this['loopIndex']--);}['sort'](){const _0xed541c=this['loopIndex']>=-0x5*-0x24a+-0x11b*0x3+-0x821?this['items'][this['loopIndex']]:null;this['items']['sort'](this['_sortHandl'+'er']),_0xed541c!==null&&(this['loopIndex']=this['items']['indexOf'](_0xed541c));}}class To extends me{constructor(_0x29e385){super(),h(this,'_index',{}),h(this,'_list',[]),this['_parent']=_0x29e385;}['add'](..._0x85a695){let _0x30937e=!(-0x1b46+-0x1*0xd19+0x2860);const _0x59e4e5=this['_processAr'+'guments'](_0x85a695,!(0xa78+0x1*0xb19+-0x1591));if(!_0x59e4e5['length'])return _0x30937e;for(let _0x15cfdc=0x11*0x2f+0x1e2*-0x1+-0x13d;_0x15cfdc<_0x59e4e5['length'];_0x15cfdc++)this['_index'][_0x59e4e5[_0x15cfdc]]||(_0x30937e=!(-0x56c+0xcae+-0x742),this['_index'][_0x59e4e5[_0x15cfdc]]=!(-0x1776+0x1*0x166f+-0x107*-0x1),this['_list']['push'](_0x59e4e5[_0x15cfdc]),this['fire']('add',_0x59e4e5[_0x15cfdc],this['_parent']));return _0x30937e&&this['fire']('change',this['_parent']),_0x30937e;}['remove'](..._0x13d286){let _0x7e4535=!(-0x270a+-0x1e4a+0x1*0x4555);if(!this['_list']['length'])return _0x7e4535;const _0x1cf2cd=this['_processAr'+'guments'](_0x13d286,!(0x3*-0x85a+-0x1706+0x2d4*0x11));if(!_0x1cf2cd['length'])return _0x7e4535;for(let _0x236a2b=0x61*-0x5c+-0x215b+0x16bd*0x3;_0x236a2b<_0x1cf2cd['length'];_0x236a2b++)this['_index'][_0x1cf2cd[_0x236a2b]]&&(_0x7e4535=!(0x1845*0x1+0x23e9*0x1+-0x3c2e),delete this['_index'][_0x1cf2cd[_0x236a2b]],this['_list']['splice'](this['_list']['indexOf'](_0x1cf2cd[_0x236a2b]),0xf37+0x3c4*-0x2+0x2*-0x3d7),this['fire']('remove',_0x1cf2cd[_0x236a2b],this['_parent']));return _0x7e4535&&this['fire']('change',this['_parent']),_0x7e4535;}['clear'](){if(!this['_list']['length'])return;const _0x1cf48b=this['_list']['slice'](0x2de+-0x1e2f+0x1b*0x103);this['_list']=[],this['_index']={};for(let _0x2ab8bb=0xfa2+-0x1f*-0x91+-0x2131;_0x2ab8bb<_0x1cf48b['length'];_0x2ab8bb++)this['fire']('remove',_0x1cf48b[_0x2ab8bb],this['_parent']);this['fire']('change',this['_parent']);}['has'](..._0x234cf8){return this['_list']['length']?this['_has'](this['_processAr'+'guments'](_0x234cf8)):!(-0x1870+0x153d+0x29*0x14);}['_has'](_0x4b84eb){if(!this['_list']['length']||!_0x4b84eb['length'])return!(0x5d*0x57+0x73a*0x4+0x1*-0x3c82);for(let _0x26bddd=-0x18*-0x2+0x14d3*-0x1+0x9*0x24b;_0x26bddd<_0x4b84eb['length'];_0x26bddd++)if(_0x4b84eb[_0x26bddd]['length']===-0x2183+0x8d8+-0x4*-0x62b){if(this['_index'][_0x4b84eb[_0x26bddd][-0x2*0x123e+0x7e5+0x1c97]])return!(-0x191b+0x3*0x98f+0x1c9*-0x2);}else{let _0x2d18f5=!(-0x69f*0x1+0x1241+0x5d1*-0x2);for(let _0x3d3781=-0x3f5+0x1ec1*0x1+0x5*-0x55c;_0x3d3781<_0x4b84eb[_0x26bddd]['length'];_0x3d3781++)if(!this['_index'][_0x4b84eb[_0x26bddd][_0x3d3781]]){_0x2d18f5=!(0x2502+0x1b0*0x2+-0x2861*0x1);break;}if(_0x2d18f5)return!(-0x255f+-0x470+-0x5f9*-0x7);}return!(0xd93+-0x4*0x26+0xb*-0x12e);}['list'](){return this['_list']['slice'](0x33b+-0x1*-0x14e7+0xc11*-0x2);}['_processAr'+'guments'](_0x2ecc92,_0x180afe){const _0x6a4526=[];let _0x3fa41b=[];if(!_0x2ecc92||!_0x2ecc92['length'])return _0x6a4526;for(let _0x3d7dbb=0x225f*-0x1+0x83*0x1d+0x1388;_0x3d7dbb<_0x2ecc92['length'];_0x3d7dbb++)if(_0x2ecc92[_0x3d7dbb]instanceof Array){_0x180afe||(_0x3fa41b=[]);for(let _0xb91907=-0x94*0x1a+-0x226c*-0x1+-0x44*0x49;_0xb91907<_0x2ecc92[_0x3d7dbb]['length'];_0xb91907++)typeof _0x2ecc92[_0x3d7dbb][_0xb91907]=='string'&&(_0x180afe?_0x6a4526['push'](_0x2ecc92[_0x3d7dbb][_0xb91907]):_0x3fa41b['push'](_0x2ecc92[_0x3d7dbb][_0xb91907]));!_0x180afe&&_0x3fa41b['length']&&_0x6a4526['push'](_0x3fa41b);}else typeof _0x2ecc92[_0x3d7dbb]=='string'&&(_0x180afe?_0x6a4526['push'](_0x2ecc92[_0x3d7dbb]):_0x6a4526['push']([_0x2ecc92[_0x3d7dbb]]));return _0x6a4526;}get['size'](){return this['_list']['length'];}}h(To,'EVENT_ADD','add'),h(To,'EVENT_REMO'+'VE','remove'),h(To,'EVENT_CHAN'+'GE','change');const de=typeof window<'u'&&window['performanc'+'e']&&window['performanc'+'e']['now']?performance['now']['bind'](performance):Date['now'],L0=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class dd{constructor(_0x19e582){h(this,'scheme'),h(this,'authority'),h(this,'path'),h(this,'query'),h(this,'fragment');const _0x534d76=_0x19e582['match'](L0);this['scheme']=_0x534d76[0x1*-0x197c+-0x2383+0x3d01],this['authority']=_0x534d76[0x1af2+0x1*0x2278+-0x3d66*0x1],this['path']=_0x534d76[-0x1b44+-0x2*-0x11+0x1b27],this['query']=_0x534d76[0x1*0x1cae+0x4f2*-0x6+0x1*0x105],this['fragment']=_0x534d76[0x8b*0x44+-0x1fe3+-0x140*0x4];}['toString'](){let _0x69afb3='';return this['scheme']&&(_0x69afb3+=this['scheme']+':'),this['authority']&&(_0x69afb3+='//'+this['authority']),_0x69afb3+=this['path'],this['query']&&(_0x69afb3+='?'+this['query']),this['fragment']&&(_0x69afb3+='#'+this['fragment']),_0x69afb3;}['getQuery'](){const _0x4e00d1={};if(this['query']){const _0x9162be=decodeURIComponent(this['query'])['split']('&');for(const _0xa5ecdf of _0x9162be){const _0x38ae94=_0xa5ecdf['split']('=');_0x4e00d1[_0x38ae94[-0xf4+-0x2176*0x1+0x1135*0x2]]=_0x38ae94[-0x12b5+-0x5f7*0x1+0x1*0x18ad];}}return _0x4e00d1;}['setQuery'](_0x482130){let _0x30121d='';for(const _0x1d0741 in _0x482130)_0x482130['hasOwnProp'+'erty'](_0x1d0741)&&(_0x30121d!==''&&(_0x30121d+='&'),_0x30121d+=encodeURIComponent(_0x1d0741)+'='+encodeURIComponent(_0x482130[_0x1d0741]));this['query']=_0x30121d;}}const R0=0x2651+-0x26d0+0x7f,Pu=-0x3*-0x19b+0x1*0x66e+-0xb3e,lm=0x8da+-0xafe+0x228,O0=-0x122b+0x10d*-0x1+0x133d,Y={'DEG_TO_RAD':Math['PI']/(-0x157*0x4+0x1c00+-0x15f0),'RAD_TO_DEG':(-0x164a+-0x27*-0xe5+-0xbe5)/Math['PI'],'clamp'(_0x236ce6,_0x5b2d64,_0x505d11){return _0x236ce6>=_0x505d11?_0x505d11:_0x236ce6<=_0x5b2d64?_0x5b2d64:_0x236ce6;},'intToBytes24'(_0x1453d2){const _0x579a3d=_0x1453d2>>0x17f6+-0x1c4a+-0x119*-0x4&0x2da+0x1614+-0x17ef,_0x2db2d4=_0x1453d2>>0x1c0*-0xa+-0xa39*0x2+0x25fa*0x1&0x19a9+-0x25*-0x95+-0x2e33*0x1,_0x4cd270=_0x1453d2&-0x401+0x4be+0x42;return[_0x579a3d,_0x2db2d4,_0x4cd270];},'intToBytes32'(_0x5db5ca){const _0x4278f6=_0x5db5ca>>-0x13c3+0x88a+-0xb51*-0x1&0x17e5*-0x1+-0x1621+-0x1*-0x2f05,_0x36fcda=_0x5db5ca>>-0x4*-0x615+0x1553+-0x2d97&-0x1216+-0x86*-0x3d+-0xcd9,_0x370a29=_0x5db5ca>>-0x4*0x18b+0xff+0x535&-0x85a+-0x1*-0x1d4d+-0x4*0x4fd,_0x189c3a=_0x5db5ca&-0x4e6+0x174+0x471;return[_0x4278f6,_0x36fcda,_0x370a29,_0x189c3a];},'bytesToInt24'(_0x1d5b43,_0x4548f2,_0x1436fe){return _0x1d5b43['length']&&(_0x1436fe=_0x1d5b43[-0x13*-0x13f+0x1*0x3c7+-0x1b72],_0x4548f2=_0x1d5b43[0xcb6+-0x19*-0x15d+-0x2eca],_0x1d5b43=_0x1d5b43[0x2*-0xcdf+-0xaab*0x1+0x2469]),_0x1d5b43<<-0x5d6+-0xd55*-0x2+-0x6*0x376|_0x4548f2<<-0x52+-0x76f*0x3+0x1*0x16a7|_0x1436fe;},'bytesToInt32'(_0x43dee2,_0x1a2118,_0x30fa24,_0x436086){return _0x43dee2['length']&&(_0x436086=_0x43dee2[-0xd9*-0x23+0x1*-0x883+0x1*-0x1525],_0x30fa24=_0x43dee2[-0x3c5*0x9+-0x1*-0x1a5d+0x792],_0x1a2118=_0x43dee2[0x7*-0x4d5+0x183f+-0xdf*-0xb],_0x43dee2=_0x43dee2[0x15ab+-0x3d*-0x3b+-0x23ba]),(_0x43dee2<<-0x19c2+0x166e+0x36c|_0x1a2118<<-0x145*-0x10+-0xdc1+-0x67f|_0x30fa24<<-0xaf3+-0x1aa8+0x29*0xeb|_0x436086)>>>0xa5e*0x1+-0x214b+0x16ed;},'lerp'(_0x2b98a7,_0x3e3cde,_0x28e2f1){return _0x2b98a7+(_0x3e3cde-_0x2b98a7)*Y['clamp'](_0x28e2f1,0xb*-0x289+0x4c3+0x4*0x5c8,-0xb*0x363+-0x37*-0x3b+-0x383*-0x7);},'lerpAngle'(_0x204e0e,_0x1d1f4a,_0x451d48){return _0x1d1f4a-_0x204e0e>0x6*-0x8c+-0x82*0x33+0x1de2&&(_0x1d1f4a-=0x2514+-0x86c+-0x6d0*0x4),_0x1d1f4a-_0x204e0e<-(-0x231d+-0xc*0x149+0x333d)&&(_0x1d1f4a+=0x56*0x42+-0x888+-0xae*0x12),Y['lerp'](_0x204e0e,_0x1d1f4a,Y['clamp'](_0x451d48,-0xba*0x1f+-0x20ed*0x1+-0x11*-0x343,0xe50+0x202b*0x1+-0x2e7a));},'powerOfTwo'(_0x37540c){return _0x37540c!==-0x21d4+-0x14e1*-0x1+0xcf3&&!(_0x37540c&_0x37540c-(0x4b2*-0x2+-0x31a*-0xb+-0x1*0x18b9));},'nextPowerOfTwo'(_0x175f7f){return _0x175f7f--,_0x175f7f|=_0x175f7f>>-0x17ca+0x1a23+-0x258,_0x175f7f|=_0x175f7f>>-0x1*-0x22c5+0x1*-0xd58+-0x156b,_0x175f7f|=_0x175f7f>>0x9*0x9c+0xd5*-0x1f+0x1d9*0xb,_0x175f7f|=_0x175f7f>>-0x1c0e+0x233+-0x8a1*-0x3,_0x175f7f|=_0x175f7f>>0x1335+0x2426+-0x374b*0x1,_0x175f7f++,_0x175f7f;},'nearestPowerOfTwo'(_0x3fa112){return Math['pow'](-0x546+0x1202*0x1+-0xcba,Math['round'](Math['log2'](_0x3fa112)));},'random'(_0x2ccaa9,_0xa4f42e){const _0x3cbcee=_0xa4f42e-_0x2ccaa9;return Math['random']()*_0x3cbcee+_0x2ccaa9;},'smoothstep'(_0x49ed4e,_0xe67af1,_0x42bc39){return _0x42bc39<=_0x49ed4e?-0x1bcc+0x37d+0x184f:_0x42bc39>=_0xe67af1?0x4ae+-0x686+0x1d9:(_0x42bc39=(_0x42bc39-_0x49ed4e)/(_0xe67af1-_0x49ed4e),_0x42bc39*_0x42bc39*(-0x1*-0xc46+-0x1bea+0x1*0xfa7-(0xd*-0x298+-0x1add+0x3c97)*_0x42bc39));},'smootherstep'(_0x4231d4,_0x55bb26,_0x57dd5b){return _0x57dd5b<=_0x4231d4?0x14d5*-0x1+-0x1291+-0x52*-0x7b:_0x57dd5b>=_0x55bb26?0x1756+0x4e*-0xa+-0x1449:(_0x57dd5b=(_0x57dd5b-_0x4231d4)/(_0x55bb26-_0x4231d4),_0x57dd5b*_0x57dd5b*_0x57dd5b*(_0x57dd5b*(_0x57dd5b*(0x22c*-0x8+-0x5a3+0x1*0x1709)-(-0x1e*0x27+0x1a7*0xd+-0x10da))+(-0x2*-0x157+0x2*0x123f+-0x2722)));},'roundUp'(_0x5e4634,_0x56683d){return _0x56683d===-0x2*-0xc90+0x14e9+-0x2e09?_0x5e4634:Math['ceil'](_0x5e4634/_0x56683d)*_0x56683d;},'between'(_0x53e306,_0x5043ce,_0x45df3a,_0x1b44bc){const _0x30496a=Math['min'](_0x5043ce,_0x45df3a),_0x218422=Math['max'](_0x5043ce,_0x45df3a);return _0x1b44bc?_0x53e306>=_0x30496a&&_0x53e306<=_0x218422:_0x53e306>_0x30496a&&_0x53e306<_0x218422;}},Tt=class Tt{constructor(_0x21c32c=0x1beb+-0x249b+0x8b0,_0x132a10=-0x6e8+0xa37*-0x2+-0x1b56*-0x1,_0x38efc3=0xb08+-0xbbf+0x1*0xb7,_0x51ef04=0x10*0x176+-0x1bac+0x1*0x44d){h(this,'r'),h(this,'g'),h(this,'b'),h(this,'a');const _0x53788b=_0x21c32c['length'];_0x53788b===0xa*0x179+-0x1635+0x77e||_0x53788b===-0x436*0x7+-0x16a0+-0x2*-0x1a0f?(this['r']=_0x21c32c[-0x1bf1+-0xa9b+0x1346*0x2],this['g']=_0x21c32c[-0x283+0x1a3d+-0x17b9],this['b']=_0x21c32c[-0xcdc+-0xf*0x1b1+0x263d],this['a']=_0x21c32c[0x1cb4+-0x2b4*0xa+0x1*-0x1a9]??-0x1bf+-0x1*0x19b8+0x1b78):(this['r']=_0x21c32c,this['g']=_0x132a10,this['b']=_0x38efc3,this['a']=_0x51ef04);}['clone'](){const _0x3762c2=this['constructo'+'r'];return new _0x3762c2(this['r'],this['g'],this['b'],this['a']);}['copy'](_0x422067){return this['r']=_0x422067['r'],this['g']=_0x422067['g'],this['b']=_0x422067['b'],this['a']=_0x422067['a'],this;}['equals'](_0x14883f){return this['r']===_0x14883f['r']&&this['g']===_0x14883f['g']&&this['b']===_0x14883f['b']&&this['a']===_0x14883f['a'];}['set'](_0x2d23b2,_0x41fa57,_0x31c80b,_0x586be3=0x5*0x285+-0x1*-0xfcb+-0x1c63){return this['r']=_0x2d23b2,this['g']=_0x41fa57,this['b']=_0x31c80b,this['a']=_0x586be3,this;}['lerp'](_0x493cb5,_0x2883ad,_0xe08960){return this['r']=_0x493cb5['r']+_0xe08960*(_0x2883ad['r']-_0x493cb5['r']),this['g']=_0x493cb5['g']+_0xe08960*(_0x2883ad['g']-_0x493cb5['g']),this['b']=_0x493cb5['b']+_0xe08960*(_0x2883ad['b']-_0x493cb5['b']),this['a']=_0x493cb5['a']+_0xe08960*(_0x2883ad['a']-_0x493cb5['a']),this;}['linear'](_0x3db8c3=this){return this['r']=Math['pow'](_0x3db8c3['r'],0x1372+0x22c3+0x25*-0x177+0.20000000000000018),this['g']=Math['pow'](_0x3db8c3['g'],-0x1f21+0x1de7+0x13c*0x1+0.20000000000000018),this['b']=Math['pow'](_0x3db8c3['b'],-0x2261+-0x1b0c+-0x1*-0x3d6f+0.20000000000000018),this['a']=_0x3db8c3['a'],this;}['gamma'](_0x2895c1=this){return this['r']=Math['pow'](_0x2895c1['r'],(0x8c5+0x22bb+-0x2b7f)/(-0x24d+-0x18dd+0x1b2c+0.20000000000000018)),this['g']=Math['pow'](_0x2895c1['g'],(0x8c2+-0x27*-0x25+-0xe64)/(-0x18*0xec+-0x18de+-0x2f00*-0x1+0.20000000000000018)),this['b']=Math['pow'](_0x2895c1['b'],(-0x2*-0xade+-0x1b82+0x1*0x5c7)/(-0x16b3+-0x597*0x1+-0x4*-0x713+0.20000000000000018)),this['a']=_0x2895c1['a'],this;}['mulScalar'](_0x5440a9){return this['r']*=_0x5440a9,this['g']*=_0x5440a9,this['b']*=_0x5440a9,this;}['fromString'](_0x6f1141){const _0x4c0a17=parseInt(_0x6f1141['replace']('#','0x'),0xcc6+-0x9*-0x26e+0x8a5*-0x4);let _0x3060d1;return _0x6f1141['length']>0x107b*0x1+0x3*-0xa1b+0xddd?_0x3060d1=Y['intToBytes'+'32'](_0x4c0a17):(_0x3060d1=Y['intToBytes'+'24'](_0x4c0a17),_0x3060d1[-0x1303+0x1628+0x322*-0x1]=-0x1f57*0x1+-0xd*0xd1+0x2af3),this['set'](_0x3060d1[0x71*-0x2a+-0x67e+0x4*0x642]/(-0x59f*0x1+-0x25*0x7+0xd9*0x9),_0x3060d1[-0x1805+0x1960+-0x15a*0x1]/(0x2*0x132f+0x54*0x5c+-0x438f),_0x3060d1[-0x26b2+-0x19e0+-0x1025*-0x4]/(0x1*-0x1b47+-0x22aa+0x3ef0),_0x3060d1[-0xad3*-0x2+0x156d*-0x1+0x6*-0x9]/(0xf97+0x31c*0x9+-0x2a94)),this;}['fromArray'](_0x4dfb24,_0x3cd699=-0x20c*-0x8+0x2*-0xe3+-0xe9a){return this['r']=_0x4dfb24[_0x3cd699]??this['r'],this['g']=_0x4dfb24[_0x3cd699+(-0x2*0x14e+-0x143b+0x16d8)]??this['g'],this['b']=_0x4dfb24[_0x3cd699+(-0x29*0xad+-0x1*0xa75+0x2*0x1316)]??this['b'],this['a']=_0x4dfb24[_0x3cd699+(0x265b+0x8a5+-0x17*0x20b)]??this['a'],this;}['toString'](_0x32e9aa,_0x11e686){const {r:_0x31fcd5,g:_0x3ebd43,b:_0x435327,a:_0x3d2c5}=this;if(_0x11e686||_0x31fcd5>-0x102*0x24+-0x26f0+-0x1913*-0x3||_0x3ebd43>-0xce9*-0x3+-0x35d*-0x4+-0x342e||_0x435327>0x2*0x1115+0x1*-0x1903+0x493*-0x2)return _0x31fcd5['toFixed'](-0x5bf+-0x1*0x179d+0x1*0x1d5f)+',\x20'+_0x3ebd43['toFixed'](0xdf*0x17+0x5*0x5b3+0x1*-0x3085)+',\x20'+_0x435327['toFixed'](0xc58+0xfd*-0x11+0x478)+',\x20'+_0x3d2c5['toFixed'](0x2b2+0x1*0x1963+0x2*-0xe09);let _0x1ff77e='#'+((-0x345*-0x9+-0x1f62+0x1f6<<0x853*-0x3+-0x1545+-0x2e56*-0x1)+(Math['round'](_0x31fcd5*(-0x2584+-0x2030+0x46b3))<<-0x1328+-0x42*0x14+0x1860)+(Math['round'](_0x3ebd43*(-0x1a51+-0x42d+0x1f7d))<<-0x225*-0x4+0x26cb+-0x1*0x2f57)+Math['round'](_0x435327*(-0x1f*0xd3+-0x6b*-0x5b+0xb7d*-0x1)))['toString'](-0xc56+-0x1*0x13d0+0x2036)['slice'](0x6d5+-0x33+0x6a1*-0x1);if(_0x32e9aa===!(-0x19*-0x2d+-0x1b46+0x16e1*0x1)){const _0x27f855=Math['round'](_0x3d2c5*(-0x95f*-0x3+-0x14d8+-0x2*0x323))['toString'](-0x951*-0x3+0x10e3*-0x1+0x40*-0x2c);this['a']<(0x728+-0xb63+0x44b)/(0x1*0x19d+-0xd6*-0x1d+-0x25*0xac)?_0x1ff77e+='0'+_0x27f855:_0x1ff77e+=_0x27f855;}return _0x1ff77e;}['toArray'](_0x52b2c4=[],_0x45e228=-0x1*-0x1ca+0xb1+-0x27b,_0x2df809=!(0x1e90+0x7*0x25f+-0x2f29*0x1)){return _0x52b2c4[_0x45e228]=this['r'],_0x52b2c4[_0x45e228+(0x1*-0xc83+0x701*-0x2+0x1a86*0x1)]=this['g'],_0x52b2c4[_0x45e228+(0x97*-0x1d+0x2*-0x43+0x285*0x7)]=this['b'],_0x2df809&&(_0x52b2c4[_0x45e228+(-0x2539*0x1+0x3*-0x7cd+0x3ca3)]=this['a']),_0x52b2c4;}};h(Tt,'BLACK',Object['freeze'](new Tt(0x5*-0x28d+0x1ef+0xad2,-0x89e*-0x1+-0x38*0x80+0x1362,0x1de5+-0xd*0x7b+-0x17a6,0x175c+-0x10a*-0x22+0xb5*-0x53))),h(Tt,'BLUE',Object['freeze'](new Tt(-0x3*0x1b1+-0x5d*0x47+0xf6f*0x2,-0x144+0x191f*0x1+-0xc5*0x1f,0x145+0x47c+-0x5c0,0x1*-0x493+0x2*-0xc6e+0x1d70))),h(Tt,'CYAN',Object['freeze'](new Tt(-0x2b*0x61+0x16d3+-0x688,-0x4d1*0x3+0x6fd*0x5+-0x147d,-0x15*-0x75+0x128*-0x20+-0xdb4*-0x2,-0x7*-0x1af+0x2650+-0x3218))),h(Tt,'GRAY',Object['freeze'](new Tt(-0x532+0xd23+0x13*-0x6b+0.5,0x21d*0x11+-0x20bb+-0x332+0.5,-0x13*-0x1fd+0x1aab+0x2*-0x2039+0.5,-0x22aa+0x5*-0x34c+0x3327))),h(Tt,'GREEN',Object['freeze'](new Tt(0x1eef+-0xa5f+-0x1490,0x1825*0x1+0x1e92+-0x36b6*0x1,-0x1c2d+0x1bf6*0x1+0x5*0xb,0x1*-0x4f+-0x1f00+0x1f50))),h(Tt,'MAGENTA',Object['freeze'](new Tt(-0x1*0x20f6+0x12f5*-0x1+0x2*0x19f6,-0xd79*-0x1+-0xc9c+-0xdd,-0x4c8+0x724+-0x25b,0x1*0xfbb+-0x2*0x135d+-0x1700*-0x1))),h(Tt,'RED',Object['freeze'](new Tt(-0x220f+0x15ff+0x1*0xc11,0x24d2+-0x1e95+-0x63d*0x1,0x1*-0x1241+-0x1*0x17e9+0x303*0xe,0x151+0x1*-0x30+0x9*-0x20))),h(Tt,'WHITE',Object['freeze'](new Tt(0x3*0x183+0x1266+-0x16ee,0x66*0x3d+-0x97*-0x16+-0x1*0x2547,0x1765+0x40d*0x9+-0x13f3*0x3,-0x2318+-0x2395+0x46ae))),h(Tt,'YELLOW',Object['freeze'](new Tt(0x8c1*0x3+-0x48*0x59+-0x13a,-0x1f46*0x1+-0x24e5+-0x1*-0x442c,0x21f9+0x6da+-0x28d3,0x1*0x262d+-0x1*-0x838+-0x1732*0x2)));let ie=Tt;class mS{constructor(_0x439a19,_0x5ed8b0=0x854+-0x2398+0x1b44){h(this,'_curve'),h(this,'_left',-(-0x37*0xb5+-0x11a6+0x388a*0x1)/(0x1919+0xbf7*0x2+-0x3107)),h(this,'_right',(0x13c*-0x1a+-0x1d81+0x3d9a)/(0x37d+0x6*-0x617+0x210d)),h(this,'_recip',-0x1*-0x993+0xf*-0x199+0xe64),h(this,'_p0',-0x1*0xb46+-0x1631+-0x293*-0xd),h(this,'_p1',-0x1336*0x1+-0x18f9*0x1+0x2c2f),h(this,'_m0',0x1c41+-0x1c7a*-0x1+-0x38bb),h(this,'_m1',0x43b*-0x2+0x1d*0xc2+-0xd84),(this['_curve']=_0x439a19,this['_reset'](_0x5ed8b0));}['evaluate'](_0x4f5f97,_0x6b8295=!(0x2245*0x1+-0x2*-0x829+-0x15e*0x25)){(_0x6b8295||_0x4f5f97<this['_left']||_0x4f5f97>=this['_right'])&&this['_reset'](_0x4f5f97);let _0x7cbe46;const _0x2e654b=this['_curve']['type'];if(_0x2e654b===O0)_0x7cbe46=this['_p0'];else{const _0x3b7e57=this['_recip']===-0x1e63+-0x198b+-0x1*-0x37ee?0x28*0x38+0x1*-0x18a3+-0x245*-0x7:(_0x4f5f97-this['_left'])*this['_recip'];_0x2e654b===R0?_0x7cbe46=Y['lerp'](this['_p0'],this['_p1'],_0x3b7e57):_0x2e654b===Pu?_0x7cbe46=Y['lerp'](this['_p0'],this['_p1'],_0x3b7e57*_0x3b7e57*(-0xaba*0x3+0x127b+0xdb6-(-0x20b*0x9+-0x1*0x527+0x178c)*_0x3b7e57)):_0x7cbe46=this['_evaluateH'+'ermite'](this['_p0'],this['_p1'],this['_m0'],this['_m1'],_0x3b7e57);}return _0x7cbe46;}['_reset'](_0x3b443e){const _0x43e57c=this['_curve']['keys'],_0x4c84ce=_0x43e57c['length'];if(!_0x4c84ce)this['_left']=-(-0x4*0x19+0xa2a+-0x9c5)/(0x1922*0x1+0x1d5c+-0x117*0x32),this['_right']=(-0x20e2+-0x1a7c+0x3b5f)/(-0x1fa0+0x1c25+-0x21*-0x1b),this['_recip']=-0x11c7+-0xb*-0x337+-0x8cb*0x2,this['_p0']=this['_p1']=this['_m0']=this['_m1']=0x1d0a+-0x151*0x1b+0x9*0xb9;else{if(_0x3b443e<_0x43e57c[-0x1c9b+-0x12e0+0x2f7b][-0x161*-0x17+0x198e*-0x1+-0x629])this['_left']=-(-0x107f*-0x1+-0x10af*0x2+0xa*0x1b0)/(-0x123a+-0x1598+-0x2*-0x13e9),this['_right']=_0x43e57c[0x1a7e+-0xbe*-0x11+-0x271c][-0x1*-0x254f+-0x2396+0x3f*-0x7],this['_recip']=0x17*-0x50+-0x1a2+0x469*0x2,this['_p0']=this['_p1']=_0x43e57c[0x2446+-0x4cd*0x1+-0x1f79][-0x1cd7+-0x3e*-0x63+0x4de],this['_m0']=this['_m1']=-0x18a0+0x6ee+0x6*0x2f3;else{if(_0x3b443e>=_0x43e57c[_0x4c84ce-(-0x17e5+-0x156d+0x2d53)][-0x1*-0x23cf+0x1329+-0x36f8])this['_left']=_0x43e57c[_0x4c84ce-(0x11d+-0x670+0x2aa*0x2)][-0x701+0xfce+0x3*-0x2ef],this['_right']=(-0x4*0x7d2+-0x11c1+0x310a)/(-0xc*0xfa+-0x561+0x1119),this['_recip']=0xf*-0x38+0x601*0x2+-0x8ba,this['_p0']=this['_p1']=_0x43e57c[_0x4c84ce-(0x980+0x482*-0x6+0x118d*0x1)][0x7*-0x1c+-0x821*0x3+-0x142*-0x14],this['_m0']=this['_m1']=-0xe4+-0x1017+-0x26d*-0x7;else{let _0x2b3501=0xb55+-0x7f3+0x362*-0x1;for(;_0x3b443e>=_0x43e57c[_0x2b3501+(-0x11e9+0x57c*0x1+0xc6e)][-0x1*0x92f+-0x1bba+0x24e9];)_0x2b3501++;this['_left']=_0x43e57c[_0x2b3501][-0x23b3*-0x1+0x25d3+0x24c3*-0x2],this['_right']=_0x43e57c[_0x2b3501+(-0x24e*-0x7+-0xed2+-0x14f)][-0x5f9+-0x4*-0x5ea+0x11af*-0x1];const _0x27be71=(0x3*-0xb5a+0x836*-0x2+0x327b)/(this['_right']-this['_left']);this['_recip']=isFinite(_0x27be71)?_0x27be71:-0x1fbc+-0x517+-0x24d3*-0x1,this['_p0']=_0x43e57c[_0x2b3501][-0x2*0xfb0+-0x522*0x6+0x3e2d],this['_p1']=_0x43e57c[_0x2b3501+(0x11b*-0x1e+0x9e+0x208d)][-0xc7d+-0x501*0x1+0x117f],this['_curve']['type']===lm&&this['_calcTange'+'nts'](_0x43e57c,_0x2b3501);}}}}['_calcTange'+'nts'](_0x5f2c02,_0x2ddb3c){let _0x5515ba;const _0x20917a=_0x5f2c02[_0x2ddb3c],_0x3e48ca=_0x5f2c02[_0x2ddb3c+(-0x20*0x8b+0x16f6+-0x595)];let _0x3f932b;if(_0x2ddb3c===-0x90a+-0x55*0x2c+0x17a6?_0x5515ba=[_0x5f2c02[0x1*0x2069+0x105f+-0x619*0x8][-0x9a6+0x3*0x6f1+-0x1*0xb2d]+(_0x5f2c02[0xed2+0x43f*0x7+-0x2c8b][0x1c8b+0x2*0x584+-0x2793]-_0x5f2c02[0x2*0xb5d+-0x1*0x909+-0xdb0][0x1*-0x17dd+-0x3c*0x35+0x52f*0x7]),_0x5f2c02[0x1d29+0x1a47+0xddc*-0x4][-0x64d+-0x471*0x3+-0x3*-0x68b]+(_0x5f2c02[-0xa67+-0xcd+0xb34][0x186c+-0x9eb*-0x1+-0x2256]-_0x5f2c02[-0x7c3*0x1+0x2060+-0x4*0x627][-0x17f9+-0x975+0x216f])]:_0x5515ba=_0x5f2c02[_0x2ddb3c-(-0x157e+-0x1*0x1fe1+0x3560)],_0x2ddb3c===_0x5f2c02['length']-(-0x1*0x2336+-0x1e51+-0x1*-0x4189)?_0x3f932b=[_0x5f2c02[_0x2ddb3c+(0x26*-0x4a+0xa54*0x2+-0x9ab)][0xc5c+0x1805+-0x2461]+(_0x5f2c02[_0x2ddb3c+(0x2259+-0x5ab+-0x1cad)][-0x705+-0x92*-0x37+0x1*-0x1859]-_0x5f2c02[_0x2ddb3c][-0x168e+0x110*0xa+0x3*0x3fa]),_0x5f2c02[_0x2ddb3c+(-0xe*-0x10f+-0x1d36+0xe65)][0x59*0x24+-0x2*-0xbf9+-0x2475]+(_0x5f2c02[_0x2ddb3c+(-0x1fb1+-0xab1*-0x1+0x1501)][-0xd*-0x279+0x45*0x2b+0x1*-0x2bbb]-_0x5f2c02[_0x2ddb3c][0x4b6+0x129e*0x2+-0x29f1])]:_0x3f932b=_0x5f2c02[_0x2ddb3c+(-0x1472*0x1+-0x259c+0x3a10)],this['_curve']['type']===lm){const _0x4aaa18=(-0xd3e+-0x2ba*0x7+0x2056)*(_0x3e48ca[-0x1e80+-0x5c*0x58+0x3e20]-_0x20917a[-0x11c3+-0x1544+-0x1*-0x2707])/(_0x3e48ca[0x6c7+-0x153b*0x1+0xe74]-_0x5515ba[0x17ef+-0x1555+-0x29a*0x1]),_0x536082=(-0x918*-0x2+0x1*-0x1505+0x2d7)*(_0x3e48ca[0x1*0xd37+0x971*-0x3+-0x78e*-0x2]-_0x20917a[0xd*-0x2a9+-0x2446+-0x11*-0x42b])/(_0x3f932b[0x544*0x7+-0x17bf+-0xd1d]-_0x20917a[-0x6b4+0x95c+-0x2a8]);this['_m0']=this['_curve']['tension']*(isFinite(_0x4aaa18)?_0x4aaa18:0x66*0x4f+0x3af+0x1*-0x2329)*(_0x3e48ca[0x1d8a+-0x1fb8+0x22f]-_0x5515ba[0x12fa+-0x1*0x246b+-0x1172*-0x1]),this['_m1']=this['_curve']['tension']*(isFinite(_0x536082)?_0x536082:0x175*-0x1+0x1*0x2243+-0x20ce*0x1)*(_0x3f932b[0x11e4+-0x1949+0x2*0x3b3]-_0x20917a[0xe1+0xde7+-0xec7]);}else{const _0x17e672=(_0x3e48ca[0x8a1+0x225c+-0x2afd]-_0x20917a[-0x1bf+0x1*-0x26f7+0x28b6])/(_0x20917a[0x3ea+-0x1b5c+0x1772]-_0x5515ba[0x2243*0x1+0x153e+-0x3781]),_0x5e1e9b=(_0x3e48ca[0x106*-0xb+0x8*-0x29a+0x2012]-_0x20917a[-0x2*-0xac1+-0x1b50+0x5ce])/(_0x3f932b[0x1*0x2bb+0x27*-0x71+-0x135*-0xc]-_0x3e48ca[-0x265*0x7+-0x15b7+-0xc5*-0x32]),_0x2ae0ab=_0x20917a[-0x26df+-0x8f7+0x1*0x2fd7]+(_0x5515ba[0x101f+-0x44*-0x8+0x91f*-0x2]-_0x20917a[0x680+-0x10c*-0x25+-0x2d3b])*(isFinite(_0x17e672)?_0x17e672:0x7*-0x35f+-0x2*0x62+0x3*0x81f),_0x4684fd=_0x3e48ca[0x9fd+0xaa*0x3+-0xbfa]+(_0x3f932b[0x1*-0x24f3+0x3c7+0x212d]-_0x3e48ca[-0x1213+-0x1cd8+0x2eec])*(isFinite(_0x5e1e9b)?_0x5e1e9b:-0x3d3+-0x218e+0x7*0x557),_0x476e38=this['_curve']['tension'];this['_m0']=_0x476e38*(_0x3e48ca[-0x65*0x41+-0x2f*-0x99+-0x271]-_0x2ae0ab),this['_m1']=_0x476e38*(_0x4684fd-_0x20917a[-0x1717+-0x1eaa+0x35c2]);}}['_evaluateH'+'ermite'](_0x5ecb70,_0x1a22dd,_0x57c7e3,_0xca5037,_0x5a108c){const _0x236547=_0x5a108c*_0x5a108c,_0x452191=_0x5a108c+_0x5a108c,_0x5d1336=-0x3*0x3a+-0x4*-0x502+0xd*-0x17d-_0x5a108c,_0x5b4ec7=_0x5d1336*_0x5d1336;return _0x5ecb70*((-0x1554+-0x1c16+0x316b+_0x452191)*_0x5b4ec7)+_0x57c7e3*(_0x5a108c*_0x5b4ec7)+_0x1a22dd*(_0x236547*(-0x182+0x380+-0x1fb-_0x452191))+_0xca5037*(_0x236547*(_0x5a108c-(0xc5b+0x19d6+-0x2f*0xd0)));}}class Xs{constructor(_0x26288a){h(this,'keys',[]),h(this,'type',Pu),h(this,'tension',-0x419*0x7+0x1386+0x23*0x43+0.5),h(this,'_eval',new mS(this));if(_0x26288a){for(let _0x5f1794=-0x2*-0x35b+0x66*0x5+-0x8b4;_0x5f1794<_0x26288a['length']-(-0x1*-0x737+0xe41+-0x1577);_0x5f1794+=-0x4b6+0x1e27+-0x196f*0x1)this['keys']['push']([_0x26288a[_0x5f1794],_0x26288a[_0x5f1794+(-0x2*0xb5+-0x13db+-0x2*-0xaa3)]]);}this['sort']();}get['length'](){return this['keys']['length'];}['add'](_0x401153,_0x2eb7d7){const _0x483370=this['keys'],_0xdeb245=_0x483370['length'];let _0x31cdd0=-0x15e*-0x16+-0x15e3+-0x3*0x2bb;for(;_0x31cdd0<_0xdeb245&&!(_0x483370[_0x31cdd0][-0x1e6c+0x2*0x503+0x1466]>_0x401153);_0x31cdd0++);const _0x536c0a=[_0x401153,_0x2eb7d7];return this['keys']['splice'](_0x31cdd0,0x17f*0x2+0x4d1*-0x3+0xb75,_0x536c0a),_0x536c0a;}['get'](_0x305543){return this['keys'][_0x305543];}['sort'](){this['keys']['sort']((_0x4b27f9,_0x31cd04)=>_0x4b27f9[-0x45*0x1+0x2008+-0x1fc3]-_0x31cd04[-0xdca+-0x1*0x2446+-0x642*-0x8]);}['value'](_0x7f2b25){return this['_eval']['evaluate'](_0x7f2b25,!(0xff+-0x1134+-0x9*-0x1cd));}['closest'](_0x508684){const _0x4128e1=this['keys'],_0x13e0a0=_0x4128e1['length'];let _0x2599c5=-0x3*-0xa1d+0x2451+0x2153*-0x2,_0x5c91b8=null;for(let _0xed6b36=-0x1663+0x384+0x12df;_0xed6b36<_0x13e0a0;_0xed6b36++){const _0x372799=Math['abs'](_0x508684-_0x4128e1[_0xed6b36][0x1d*0x3d+-0x1dfb+0x1712]);if(_0x2599c5>=_0x372799)_0x2599c5=_0x372799,_0x5c91b8=_0x4128e1[_0xed6b36];else break;}return _0x5c91b8;}['clone'](){const _0x587944=new this['constructo'+'r']();return _0x587944['keys']=this['keys']['map'](_0x4484b2=>[..._0x4484b2]),_0x587944['type']=this['type'],_0x587944['tension']=this['tension'],_0x587944;}['quantize'](_0x21ab61){_0x21ab61=Math['max'](_0x21ab61,-0xa78+0x9*-0x3e3+0x50d*0x9);const _0x12699f=new Float32Array(_0x21ab61),_0xd017bb=(0x13*-0x4f+0x23a0+-0x1dc2)/(_0x21ab61-(0x1cd5+0xef0+0x4*-0xaf1));_0x12699f[0x122a+-0x2*-0xf49+-0xc2f*0x4]=this['_eval']['evaluate'](0x109*-0x25+0x1*-0x58+0x26a5,!(0x62d+0x19*-0x10+0x49d*-0x1));for(let _0x997d68=0x52*0x10+-0x1*-0xfa3+-0x14c2;_0x997d68<_0x21ab61;_0x997d68++)_0x12699f[_0x997d68]=this['_eval']['evaluate'](_0xd017bb*_0x997d68);return _0x12699f;}['quantizeCl'+'amped'](_0x85d399,_0x40c51d,_0x232a00){const _0x454a3a=this['quantize'](_0x85d399);for(let _0x5cfa41=0xd2e*-0x1+-0x13e9+0x2117;_0x5cfa41<_0x454a3a['length'];++_0x5cfa41)_0x454a3a[_0x5cfa41]=Math['min'](_0x232a00,Math['max'](_0x40c51d,_0x454a3a[_0x5cfa41]));return _0x454a3a;}}class ta{constructor(..._0x375dc6){h(this,'curves',[]),h(this,'_type',Pu);if(_0x375dc6['length']>0x7*0x295+0xe9b*-0x1+-0x377){for(let _0xd1965c=-0x817*-0x2+-0x1*0x9c5+-0x669;_0xd1965c<_0x375dc6['length'];_0xd1965c++)this['curves']['push'](new Xs(_0x375dc6[_0xd1965c]));}else{if(_0x375dc6['length']===-0x3dc+-0x38a*0x2+-0xa*-0x118)this['curves']['push'](new Xs());else{const _0x5b5e98=_0x375dc6[0xa83+-0x141+0x4a1*-0x2];if(typeof _0x5b5e98=='number'){for(let _0x4dd959=0x48b+0x2*0x1101+0x268d*-0x1;_0x4dd959<_0x5b5e98;_0x4dd959++)this['curves']['push'](new Xs());}else{for(let _0x44c667=-0x9f0+0x1a9b+-0x11*0xfb;_0x44c667<_0x5b5e98['length'];_0x44c667++)this['curves']['push'](new Xs(_0x5b5e98[_0x44c667]));}}}}get['length'](){return this['curves']['length'];}set['type'](_0xd8ad9b){this['_type']=_0xd8ad9b;for(let _0x5a6fb6=-0x1*0xe66+-0x77a*0x3+0x24d4;_0x5a6fb6<this['curves']['length'];_0x5a6fb6++)this['curves'][_0x5a6fb6]['type']=_0xd8ad9b;}get['type'](){return this['_type'];}['get'](_0x196533){return this['curves'][_0x196533];}['value'](_0x3cb91e,_0x3b2517=[]){const _0x317c3c=this['curves']['length'];_0x3b2517['length']=_0x317c3c;for(let _0x59388a=-0x487*-0x1+-0x2*0x1057+-0x1c27*-0x1;_0x59388a<_0x317c3c;_0x59388a++)_0x3b2517[_0x59388a]=this['curves'][_0x59388a]['value'](_0x3cb91e);return _0x3b2517;}['clone'](){const _0x4c65ac=new this['constructo'+'r']();_0x4c65ac['curves']=[];for(let _0x2e37e2=0x419+0x6a6+-0xabf;_0x2e37e2<this['curves']['length'];_0x2e37e2++)_0x4c65ac['curves']['push'](this['curves'][_0x2e37e2]['clone']());return _0x4c65ac['_type']=this['_type'],_0x4c65ac;}['quantize'](_0x17b7c5){_0x17b7c5=Math['max'](_0x17b7c5,-0x2110+-0xfdc*0x1+0x30ee);const _0x10d93f=this['curves']['length'],_0x2a4dcf=new Float32Array(_0x17b7c5*_0x10d93f),_0x107bd4=(-0xb7b+-0x118e+0x6*0x4d7)/(_0x17b7c5-(-0x1bce+0x4*0xe8+0x182f));for(let _0x579728=-0x1e4f*0x1+0xa06*0x1+0x9*0x241;_0x579728<_0x10d93f;_0x579728++){const _0x5ad19b=new mS(this['curves'][_0x579728]);for(let _0x2c8fe5=0x260f+-0x1ddf*-0x1+-0x43ee;_0x2c8fe5<_0x17b7c5;_0x2c8fe5++)_0x2a4dcf[_0x2c8fe5*_0x10d93f+_0x579728]=_0x5ad19b['evaluate'](_0x107bd4*_0x2c8fe5);}return _0x2a4dcf;}['quantizeCl'+'amped'](_0x1a6e3f,_0x28505b,_0x1e6a8a){const _0x12ec66=this['quantize'](_0x1a6e3f);for(let _0x46953b=-0x12b2*0x1+-0xfff+0x53*0x6b;_0x46953b<_0x12ec66['length'];++_0x46953b)_0x12ec66[_0x46953b]=Math['min'](_0x1e6a8a,Math['max'](_0x28505b,_0x12ec66[_0x46953b]));return _0x12ec66;}}const gf=new Float32Array(-0x108e+0x1b4*-0xc+-0x24ff*-0x1),cm=new Int32Array(gf['buffer']);class Tn{static['float2Half'](_0x137a84){gf[0x2504+-0x2593+0x8f]=_0x137a84;const _0x1727a5=cm[-0x13b5+0x1*0x18b2+-0x4fd*0x1];let _0x4696bc=_0x1727a5>>0xffd*0x1+0x4*0x7a9+-0x2e91&-0x67*0x179+-0xf0ee+-0x1*-0x2089d,_0x88322b=_0x1727a5>>0x1b7c+0x1*-0x15eb+-0x585&-0xc3c+0x2*0x1169+0xf*-0xf9;const _0x5a94e9=_0x1727a5>>0x5*-0x637+-0x1411*0x1+-0x5*-0xa3f&0x3d*-0x8f+-0x77c+0x2a8e;return _0x5a94e9<-0x75e+0x180b+0x1*-0x1046?_0x4696bc:_0x5a94e9>0x1535+-0x13ff*-0x1+-0x28a6?(_0x4696bc|=0x5dd9+0x1*-0x3ba7+-0x2ce7*-0x2,_0x4696bc|=(_0x5a94e9===0x24ad+-0x888+0x32*-0x8b?-0x47*-0x6d+0x2b7+-0x20f2*0x1:-0x7a2*-0x5+0xa2d+-0x3056)&&_0x1727a5&0x3be1*-0x379+-0xd0d48+0x15cfda0,_0x4696bc):_0x5a94e9<0x34f+0x209c+0x2*-0x11bd?(_0x88322b|=0x2*0x8e9+0x5*-0x69b+0x1c9*0xd,_0x4696bc|=(_0x88322b>>0xff+0x1*0xb2+-0x13f-_0x5a94e9)+(_0x88322b>>0x343*0x1+0xd5d+-0x102f-_0x5a94e9&-0x21*-0xf9+0x1bfb+-0x3c13),_0x4696bc):(_0x4696bc|=_0x5a94e9-(-0x2666+-0xd95+0x346b)<<0x281*0x1+0x1*-0x5b2+0x1*0x33b|_0x88322b>>0x1748+0x43a+0x1b81*-0x1,_0x4696bc+=_0x88322b&0x2*-0xeb9+-0xc6c+0xdf5*0x3,_0x4696bc);}static['float2RGBA'+'8'](_0x175736,_0x17f60d){gf[0xa*0x1ab+-0x20b0+0x801*0x2]=_0x175736;const _0xd02cc1=cm[0xefd+0x994+-0x1891];_0x17f60d['r']=(_0xd02cc1>>-0x361+-0x24c4+0x283d&-0x10c+-0x1113+0x131e)/(-0x427*0x3+-0x21be+0x35f*0xe),_0x17f60d['g']=(_0xd02cc1>>0x29*-0x75+-0x1*0xc6f+0x1f3c&-0x1b97*-0x1+0x1d75*0x1+-0x380d)/(-0xeea*0x1+0x2*-0x123e+0x1177*0x3),_0x17f60d['b']=(_0xd02cc1>>0x11*0x1c3+0x1*0xbc3+-0x29ae&-0x20fc+0x73*0x1a+-0x21*-0xad)/(0xde*0x16+0x3*-0x303+-0x90c),_0x17f60d['a']=(_0xd02cc1&-0xef+0x34*0x1+0x1ba)/(0x7*-0x20b+-0x835+0x1781*0x1);}}const wt=class wt{constructor(_0x29e135=0x12*0x10b+-0xfaf*0x1+0x7*-0x71,_0x4c16c4=-0x8f*0xd+0x15dc+0xe99*-0x1,_0x7361f1=0x15dd+-0xec6*-0x1+0x53*-0x71){h(this,'x'),h(this,'y'),h(this,'z'),_0x29e135['length']===0x122f+-0x11bc+-0x70*0x1?(this['x']=_0x29e135[-0x1da8+0x1261*0x1+0x1*0xb47],this['y']=_0x29e135[-0x1b*-0x2e+0x164e+0x1b27*-0x1],this['z']=_0x29e135[-0x4*-0x250+0x748+-0x1086]):(this['x']=_0x29e135,this['y']=_0x4c16c4,this['z']=_0x7361f1);}['add'](_0x2777c){return this['x']+=_0x2777c['x'],this['y']+=_0x2777c['y'],this['z']+=_0x2777c['z'],this;}['add2'](_0x1316bc,_0x3bf677){return this['x']=_0x1316bc['x']+_0x3bf677['x'],this['y']=_0x1316bc['y']+_0x3bf677['y'],this['z']=_0x1316bc['z']+_0x3bf677['z'],this;}['addScalar'](_0x163484){return this['x']+=_0x163484,this['y']+=_0x163484,this['z']+=_0x163484,this;}['addScaled'](_0x4a6ed8,_0x39c84b){return this['x']+=_0x4a6ed8['x']*_0x39c84b,this['y']+=_0x4a6ed8['y']*_0x39c84b,this['z']+=_0x4a6ed8['z']*_0x39c84b,this;}['clone'](){const _0x206b61=this['constructo'+'r'];return new _0x206b61(this['x'],this['y'],this['z']);}['copy'](_0xf7450d){return this['x']=_0xf7450d['x'],this['y']=_0xf7450d['y'],this['z']=_0xf7450d['z'],this;}['cross'](_0x458904,_0x51689e){const _0x447060=_0x458904['x'],_0x5ecf75=_0x458904['y'],_0x411f37=_0x458904['z'],_0x2fc1ed=_0x51689e['x'],_0x72a7cf=_0x51689e['y'],_0x319f52=_0x51689e['z'];return this['x']=_0x5ecf75*_0x319f52-_0x72a7cf*_0x411f37,this['y']=_0x411f37*_0x2fc1ed-_0x319f52*_0x447060,this['z']=_0x447060*_0x72a7cf-_0x2fc1ed*_0x5ecf75,this;}['distance'](_0x4bd5d4){const _0x13aa08=this['x']-_0x4bd5d4['x'],_0x3b8eaf=this['y']-_0x4bd5d4['y'],_0x506eb0=this['z']-_0x4bd5d4['z'];return Math['sqrt'](_0x13aa08*_0x13aa08+_0x3b8eaf*_0x3b8eaf+_0x506eb0*_0x506eb0);}['div'](_0x52de76){return this['x']/=_0x52de76['x'],this['y']/=_0x52de76['y'],this['z']/=_0x52de76['z'],this;}['div2'](_0x32c233,_0x3333ae){return this['x']=_0x32c233['x']/_0x3333ae['x'],this['y']=_0x32c233['y']/_0x3333ae['y'],this['z']=_0x32c233['z']/_0x3333ae['z'],this;}['divScalar'](_0x46ca97){return this['x']/=_0x46ca97,this['y']/=_0x46ca97,this['z']/=_0x46ca97,this;}['dot'](_0x2b1d55){return this['x']*_0x2b1d55['x']+this['y']*_0x2b1d55['y']+this['z']*_0x2b1d55['z'];}['equals'](_0xb98f22){return this['x']===_0xb98f22['x']&&this['y']===_0xb98f22['y']&&this['z']===_0xb98f22['z'];}['equalsAppr'+'ox'](_0x39c45f,_0x12cda5=0x5c*-0xf+0x2*0x20b+0x14e+0.000001){return Math['abs'](this['x']-_0x39c45f['x'])<_0x12cda5&&Math['abs'](this['y']-_0x39c45f['y'])<_0x12cda5&&Math['abs'](this['z']-_0x39c45f['z'])<_0x12cda5;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z'];}['lerp'](_0x3b3f9e,_0x326c8d,_0x1ed840){return this['x']=_0x3b3f9e['x']+_0x1ed840*(_0x326c8d['x']-_0x3b3f9e['x']),this['y']=_0x3b3f9e['y']+_0x1ed840*(_0x326c8d['y']-_0x3b3f9e['y']),this['z']=_0x3b3f9e['z']+_0x1ed840*(_0x326c8d['z']-_0x3b3f9e['z']),this;}['mul'](_0x1bb27e){return this['x']*=_0x1bb27e['x'],this['y']*=_0x1bb27e['y'],this['z']*=_0x1bb27e['z'],this;}['mul2'](_0x594e15,_0x137233){return this['x']=_0x594e15['x']*_0x137233['x'],this['y']=_0x594e15['y']*_0x137233['y'],this['z']=_0x594e15['z']*_0x137233['z'],this;}['mulScalar'](_0x185c3d){return this['x']*=_0x185c3d,this['y']*=_0x185c3d,this['z']*=_0x185c3d,this;}['normalize'](_0x51caee=this){const _0x5e9048=_0x51caee['x']*_0x51caee['x']+_0x51caee['y']*_0x51caee['y']+_0x51caee['z']*_0x51caee['z'];if(_0x5e9048>-0x1*0x217f+0xae5+0x169a){const _0x154155=(0x1*0x21ee+-0x1b1*0x12+-0x3*0x129)/Math['sqrt'](_0x5e9048);this['x']=_0x51caee['x']*_0x154155,this['y']=_0x51caee['y']*_0x154155,this['z']=_0x51caee['z']*_0x154155;}return this;}['floor'](_0x86aea5=this){return this['x']=Math['floor'](_0x86aea5['x']),this['y']=Math['floor'](_0x86aea5['y']),this['z']=Math['floor'](_0x86aea5['z']),this;}['ceil'](_0x251fd=this){return this['x']=Math['ceil'](_0x251fd['x']),this['y']=Math['ceil'](_0x251fd['y']),this['z']=Math['ceil'](_0x251fd['z']),this;}['round'](_0x52f3da=this){return this['x']=Math['round'](_0x52f3da['x']),this['y']=Math['round'](_0x52f3da['y']),this['z']=Math['round'](_0x52f3da['z']),this;}['min'](_0x33ea74){return _0x33ea74['x']<this['x']&&(this['x']=_0x33ea74['x']),_0x33ea74['y']<this['y']&&(this['y']=_0x33ea74['y']),_0x33ea74['z']<this['z']&&(this['z']=_0x33ea74['z']),this;}['max'](_0x182981){return _0x182981['x']>this['x']&&(this['x']=_0x182981['x']),_0x182981['y']>this['y']&&(this['y']=_0x182981['y']),_0x182981['z']>this['z']&&(this['z']=_0x182981['z']),this;}['project'](_0x473b9e){const _0x5e5ac4=this['x']*_0x473b9e['x']+this['y']*_0x473b9e['y']+this['z']*_0x473b9e['z'],_0x3bb274=_0x473b9e['x']*_0x473b9e['x']+_0x473b9e['y']*_0x473b9e['y']+_0x473b9e['z']*_0x473b9e['z'],_0x33d63f=_0x5e5ac4/_0x3bb274;return this['x']=_0x473b9e['x']*_0x33d63f,this['y']=_0x473b9e['y']*_0x33d63f,this['z']=_0x473b9e['z']*_0x33d63f,this;}['set'](_0x323637,_0x263a08,_0x2141c6){return this['x']=_0x323637,this['y']=_0x263a08,this['z']=_0x2141c6,this;}['sub'](_0x25cd43){return this['x']-=_0x25cd43['x'],this['y']-=_0x25cd43['y'],this['z']-=_0x25cd43['z'],this;}['sub2'](_0xa90be9,_0x530d92){return this['x']=_0xa90be9['x']-_0x530d92['x'],this['y']=_0xa90be9['y']-_0x530d92['y'],this['z']=_0xa90be9['z']-_0x530d92['z'],this;}['subScalar'](_0x58a384){return this['x']-=_0x58a384,this['y']-=_0x58a384,this['z']-=_0x58a384,this;}['fromArray'](_0xad0459,_0x2f6341=-0x1278+-0x1*-0x201f+-0xda7){return this['x']=_0xad0459[_0x2f6341]??this['x'],this['y']=_0xad0459[_0x2f6341+(0xc41*-0x2+0x18e5*0x1+-0x62)]??this['y'],this['z']=_0xad0459[_0x2f6341+(-0xfd6+0x1c66+0x2*-0x647)]??this['z'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+']';}['toArray'](_0x15e491=[],_0x6b4f26=0x2455+-0x517+-0x1f3e){return _0x15e491[_0x6b4f26]=this['x'],_0x15e491[_0x6b4f26+(-0x67*-0x5f+0x484+0x446*-0xa)]=this['y'],_0x15e491[_0x6b4f26+(-0x152f+0x17e8+0x2b7*-0x1)]=this['z'],_0x15e491;}};h(wt,'ZERO',Object['freeze'](new wt(-0xe9e*0x1+0x1ed5*0x1+0x1*-0x1037,0x56*0x62+0x22e3+-0x43cf*0x1,-0x1*0xbd+0x1337*-0x1+-0x9fa*-0x2))),h(wt,'HALF',Object['freeze'](new wt(-0x177*0x17+0xb1*0xb+-0x2a*-0x9f+0.5,-0x1ad3+0x256f+-0x54e*0x2+0.5,-0x2675+0x37*0x9b+0x528+0.5))),h(wt,'ONE',Object['freeze'](new wt(0x17fb*0x1+-0xe*-0x223+-0x4*0xd79,0x2f1*-0x4+-0x27*0xd9+0x2cd4,-0x2618+-0x10*0x21a+0x47b9))),h(wt,'UP',Object['freeze'](new wt(0xe6e+0x1*-0x278+-0xbf6,-0x93c+0x2*-0x273+0xb*0x149,-0x1842+0x172d+0x115))),h(wt,'DOWN',Object['freeze'](new wt(-0x5*-0x794+-0x943+-0x15d*0x15,-(-0x13c+-0xbf5*-0x2+-0x16ad),-0x1*0x1466+-0x6b*0x5+0x167d))),h(wt,'RIGHT',Object['freeze'](new wt(-0x1112+-0x21b7+-0x6*-0x877,-0x187f+0x2af*-0xb+0x3604,-0xb3*-0x29+-0x1a59+-0x3*0xc6))),h(wt,'LEFT',Object['freeze'](new wt(-(0x2a4+-0x4*0x96a+0xb*0x32f),0x1703+0x4*0x381+-0x2507,0x2e*0x3c+-0x3da+0x6ee*-0x1))),h(wt,'FORWARD',Object['freeze'](new wt(0x1e5a*0x1+0x6*0x2c5+-0x2ef8,0x1fc6+-0xf02+-0x10c4,-(-0x1*0xc5f+-0x17a4*-0x1+-0x5a2*0x2)))),h(wt,'BACK',Object['freeze'](new wt(0x13a0+0x1406+-0x27a6,-0x11*0xdd+-0x14e8+0x2395*0x1,-0x25cc+-0x601*0x3+0x37d0)));let D=wt;const hn=class hn{constructor(){h(this,'data',new Float32Array(-0x1a4c+0x1976+-0x1*-0xdf)),this['data'][-0x1784+-0xb2a+-0x1*-0x22ae]=this['data'][0x35f*-0x3+-0x4*0xcb+0xd4d]=this['data'][0x4*-0x892+0x5f2+0x1c5e]=0x56f*-0x5+-0x649+0x2175;}['clone'](){const _0x398e8f=this['constructo'+'r'];return new _0x398e8f()['copy'](this);}['copy'](_0x124ca4){const _0x1329c0=_0x124ca4['data'],_0x2f4f34=this['data'];return _0x2f4f34[-0x22e4+-0x2648+0x492c]=_0x1329c0[-0x29*0x61+-0xb3c*-0x1+0x44d],_0x2f4f34[-0xd3*-0x1+-0xdd2+-0x100*-0xd]=_0x1329c0[0xd5*-0x27+0x12*-0xe7+-0x21e*-0x17],_0x2f4f34[-0xd95*-0x2+-0x222b+0x1*0x703]=_0x1329c0[0x1*0x1be5+0x2*0x4bb+-0x2559],_0x2f4f34[-0xa0*-0x20+-0x1328+-0xd5]=_0x1329c0[0x74*0x2b+0x97*0x39+-0x3518],_0x2f4f34[-0x106*-0x9+-0x1c59+0x1327]=_0x1329c0[-0x2*-0x397+-0x116*-0xa+-0x1206],_0x2f4f34[0x9e3+0xd01+-0x16df]=_0x1329c0[0x63b+-0x6*0x577+0x1a94],_0x2f4f34[-0x2ef*0xd+-0x1494+0x3abd]=_0x1329c0[0x127*-0x18+0x160a+0x169*0x4],_0x2f4f34[0x2263*0x1+0x217f+0x257*-0x1d]=_0x1329c0[0x9be+0x1323*-0x1+-0x24*-0x43],_0x2f4f34[0x2*0x3e5+-0x5*-0x687+-0x2865]=_0x1329c0[0x1cc0+-0x4e6+-0x17d2],this;}['set'](_0x424bf5){const _0x27ead4=this['data'];return _0x27ead4[-0x1f8d+-0x10c0+0x304d]=_0x424bf5[-0xd1c+0x1fe7+0x12cb*-0x1],_0x27ead4[0x1b32+-0x19ab+-0x186]=_0x424bf5[-0x8c3*0x2+-0x8bf+0x1a46],_0x27ead4[0x1067*0x1+0x767+0x4*-0x5f3]=_0x424bf5[0x1*-0x1c64+0x1f3a+-0x2d4],_0x27ead4[-0x912+-0x3d1*0x1+0xce6]=_0x424bf5[-0x1bcc+-0x1bd+0x1d8c],_0x27ead4[0x6*0x540+-0x124*0x6+-0x18a4]=_0x424bf5[-0x4f0+-0x3*-0x78+0x38c],_0x27ead4[0x755*0x5+-0x2233+-0x271]=_0x424bf5[0x2210+0x552+-0x275d],_0x27ead4[-0x1*0x18d1+-0x701+-0x1fd8*-0x1]=_0x424bf5[0x305*-0x6+0x197+0xdf*0x13],_0x27ead4[0x85+0x2473+-0x547*0x7]=_0x424bf5[-0x2642+0x56+0x25f3],_0x27ead4[0x1*-0x806+-0x47*0x3+0x8e3]=_0x424bf5[0x1af3+0x28*0x56+-0x1*0x285b],this;}['getX'](_0x112ed7=new D()){return _0x112ed7['set'](this['data'][-0xdba*-0x1+0x7*-0x379+-0x15*-0x81],this['data'][0x3c0+0xbc8+-0xf87],this['data'][-0x18cd+0x23d9+-0xb0a]);}['getY'](_0x3ecb89=new D()){return _0x3ecb89['set'](this['data'][0xca1*-0x1+-0xa*0x4b+0x2*0x7c9],this['data'][-0x20d9+-0xd0c*-0x1+0x13d1],this['data'][0x13d0+0x1c23+-0x2fee]);}['getZ'](_0x371814=new D()){return _0x371814['set'](this['data'][0x5fb+-0x3e*-0x3+-0x6af],this['data'][0x62c+-0x1*0x186d+0x1248],this['data'][-0x1*0x1ff5+-0x1*-0x171+0x1e8c]);}['equals'](_0x1eeb80){const _0x12bad1=this['data'],_0x37c4af=_0x1eeb80['data'];return _0x12bad1[-0x1*0x2275+0x1965+0x244*0x4]===_0x37c4af[-0x1d1f+0xfd5+-0xbd*-0x12]&&_0x12bad1[0x1302+0xf24+-0x2225]===_0x37c4af[-0x5a*0x6d+-0x95d+-0x17d8*-0x2]&&_0x12bad1[0x4*-0x85f+0xb*-0x2c8+0x4016]===_0x37c4af[-0xbd0+-0x2e8+0xeba]&&_0x12bad1[-0x1*-0x46f+-0x2*0xaed+0x116e]===_0x37c4af[-0x1b77*0x1+0x31*-0x65+-0x209*-0x17]&&_0x12bad1[-0x10cc+0x1d14+-0xc44]===_0x37c4af[-0x184f+0x5*-0x5bf+0x2*0x1a87]&&_0x12bad1[0x1b5c+-0x85f*0x1+-0x2*0x97c]===_0x37c4af[-0x1763*-0x1+0x62*0x38+0x1f*-0x172]&&_0x12bad1[-0x233+0x31*-0x18+0x1*0x6d1]===_0x37c4af[-0xca1*-0x3+0xe02*0x1+-0x33df]&&_0x12bad1[-0x4*0x484+0xaa6+0x1*0x771]===_0x37c4af[-0x87e+0xaf4+-0x59*0x7]&&_0x12bad1[0x707+0x1bff+-0x22fe*0x1]===_0x37c4af[-0x7*0x8e+0x2b*-0x19+0x81d];}['isIdentity'](){const _0x2301a2=this['data'];return _0x2301a2[-0x10e2+-0xe7*-0x25+-0x1081]===0x4bf+-0x1e7+-0x2d7&&_0x2301a2[-0x6b2*0x2+-0x1024*0x1+0x1d89*0x1]===0x1957+0x35e*-0x2+-0xb*0x1b1&&_0x2301a2[0x1d14+-0x1327+-0x9eb]===0x5*0x33+0x4d*0x17+-0x7ea&&_0x2301a2[0x1fe7*-0x1+0x248b*0x1+-0x4a1]===0x6a*0x37+-0x167*-0x17+-0x3707&&_0x2301a2[-0x295*0x2+-0x1*-0x2452+-0x1f24]===-0x19*0x7d+0x86a+0x3cc&&_0x2301a2[0x255d+0x859+-0x2db1]===-0x1594+-0x1eac+0x3440&&_0x2301a2[0x11d8*0x1+0x1*-0x1eaa+-0xcd8*-0x1]===0x1*0xac7+0x22dc+-0x2da3&&_0x2301a2[0x2*0x355+-0x1a4+0x4ff*-0x1]===-0x1d7b*-0x1+0x1d66+0x3ae1*-0x1&&_0x2301a2[-0x8e9*0x3+-0xd76+0x2839]===-0x456*0x5+-0x5*-0x532+-0x9d*0x7;}['setIdentit'+'y'](){const _0x582854=this['data'];return _0x582854[-0x2*-0x213+-0x1b87+-0x39*-0x69]=-0x1*-0x10b1+-0xe*-0x149+-0x22ae,_0x582854[-0x9e+-0x1a7b+0x1b1a]=-0x3*0x125+0x1d56+-0x19e7,_0x582854[-0x1107+0xbe1*-0x3+0x34ac]=-0xb7c+0x389*-0x4+-0x5*-0x520,_0x582854[-0x130c+-0x925*-0x1+0x6*0x1a7]=-0x1eeb*0x1+0x2*0xac7+0x95d,_0x582854[-0xb9*0x2c+0x1591+0xa3f]=-0xae9+-0x5*-0x755+-0x1fb*0xd,_0x582854[0xfd*0x1+0x1d51+0x1*-0x1e49]=0x1d77+-0x1*0x2453+0x36e*0x2,_0x582854[0x1274*-0x2+-0x2b8+0x27a6]=0xd+0xcfb*-0x3+0x26e4,_0x582854[-0x179f+-0x685+0x1*0x1e2b]=0x1c7c+-0x3b*0x3c+-0xea8,_0x582854[0x1*-0xbff+-0x1*0x1dff+-0x146*-0x21]=-0x2229+0xc66+0xe*0x18e,this;}['toString'](){return'['+this['data']['join'](',\x20')+']';}['transpose'](_0x5077c8=this){const _0x1a1ddf=_0x5077c8['data'],_0x2c60b1=this['data'];if(_0x1a1ddf===_0x2c60b1){let _0x24f601;_0x24f601=_0x1a1ddf[0x1e8d+-0x6f0+0x4*-0x5e7],_0x2c60b1[0x8f1+0x1*0xffd+-0x18ed]=_0x1a1ddf[-0x1*-0x10d2+-0xb92+-0x1bf*0x3],_0x2c60b1[0x17a3+0x1b*0xf0+0x570*-0x9]=_0x24f601,_0x24f601=_0x1a1ddf[0x1b0b+-0xa2c+-0x10dd],_0x2c60b1[-0x4*-0x369+-0x3*0xb03+0x1367]=_0x1a1ddf[-0x161a+-0x6c0+0x1ce0],_0x2c60b1[-0x9b+0x17f*-0x9+-0xb*-0x148]=_0x24f601,_0x24f601=_0x1a1ddf[-0x135e+-0x2f2+0x1655],_0x2c60b1[0x1a91*-0x1+-0x2*-0x77e+0xb9a]=_0x1a1ddf[-0x241f+0xf56+-0x534*-0x4],_0x2c60b1[0x588+0x6*0xad+0x1*-0x98f]=_0x24f601;}else _0x2c60b1[-0x102a+0x1826+-0x7fc*0x1]=_0x1a1ddf[0xd*0x2f6+-0xa58*-0x1+-0x2f*0x10a],_0x2c60b1[0x1617+-0x4*-0x8fe+0x3a0e*-0x1]=_0x1a1ddf[0x194*-0x9+-0x22fc*-0x1+-0x14c5],_0x2c60b1[-0xc4a+-0x1c23*0x1+0x286f]=_0x1a1ddf[0x1caf*0x1+0x1*0x16d1+-0x337a*0x1],_0x2c60b1[-0x1d*0x12a+-0x17*-0xba+0x110f]=_0x1a1ddf[-0xd6e*0x1+-0x2*-0x35+0xd05],_0x2c60b1[-0x16bb+0x1*0x2393+-0x1*0xcd4]=_0x1a1ddf[-0x1a87*-0x1+0x12b2+-0x2d35],_0x2c60b1[-0x6d*0x46+-0x9fe+0x27d1]=_0x1a1ddf[0x3*-0xcde+0x32*-0x29+0x2ea3],_0x2c60b1[-0x5f9+-0x47+0x646*0x1]=_0x1a1ddf[0x29*0x17+-0x238c+0x1fdf],_0x2c60b1[-0x277*-0x4+-0x158d*-0x1+-0x1f62]=_0x1a1ddf[-0x1441*0x1+-0x7*-0x17f+-0x9cd*-0x1],_0x2c60b1[-0x944+-0x1c90+-0x1*-0x25dc]=_0x1a1ddf[0x27b*0xb+-0x908*-0x4+-0x3f61];return this;}['setFromMat'+'4'](_0x465658){const _0x21010f=_0x465658['data'],_0x3a2e70=this['data'];return _0x3a2e70[-0x133e+0x1e82+-0xb44]=_0x21010f[-0x119*0x3+-0x1dcf+0x211a],_0x3a2e70[0x49*0x2d+-0x1d*-0xdd+-0x25dd]=_0x21010f[-0x1*0x2531+0x196b+-0xc9*-0xf],_0x3a2e70[0x23c8+-0x3b3*0x2+-0x1c60]=_0x21010f[0x2b*0x89+-0x26d9+0xfd8],_0x3a2e70[0x1e61+-0x1159+0xb*-0x12f]=_0x21010f[-0x15bc+-0x1048+0x2608],_0x3a2e70[0x16*-0xfb+0xd70+-0x7*-0x12a]=_0x21010f[-0xb9d+0x1*0x6b+0xb37],_0x3a2e70[-0x130*0xb+0x40*-0x34+0x1a15]=_0x21010f[0x1f06+0x101*0x1+-0x2001],_0x3a2e70[0x198d+0xe95*-0x2+0x3a3]=_0x21010f[0x12f9+-0x217d+-0x3a3*-0x4],_0x3a2e70[-0x1b1*0x15+-0x21da+-0x2f*-0x17a]=_0x21010f[-0xf2c*-0x2+-0x255e+0x8b*0xd],_0x3a2e70[0x2472+0x1647+-0xbbd*0x5]=_0x21010f[0x19*-0x17b+-0x1f3d+-0x1*-0x444a],this;}['setFromQua'+'t'](_0x366ae5){const _0x20e25c=_0x366ae5['x'],_0x159950=_0x366ae5['y'],_0xa5f23c=_0x366ae5['z'],_0x443b94=_0x366ae5['w'],_0x4ab24b=_0x20e25c+_0x20e25c,_0x24f26e=_0x159950+_0x159950,_0x23c2ff=_0xa5f23c+_0xa5f23c,_0x20657a=_0x20e25c*_0x4ab24b,_0x568711=_0x20e25c*_0x24f26e,_0x4b37b3=_0x20e25c*_0x23c2ff,_0x17175a=_0x159950*_0x24f26e,_0x4c00b0=_0x159950*_0x23c2ff,_0x341f45=_0xa5f23c*_0x23c2ff,_0xa0e461=_0x443b94*_0x4ab24b,_0x2438ee=_0x443b94*_0x24f26e,_0x1f4f2c=_0x443b94*_0x23c2ff,_0x2e2bcb=this['data'];return _0x2e2bcb[-0x26cb+-0x1ee*0xc+-0x1*-0x3df3]=0x3eb+-0xb5*0x21+-0x679*-0x3-(_0x17175a+_0x341f45),_0x2e2bcb[-0x25f8+0x1ab7+-0x106*-0xb]=_0x568711+_0x1f4f2c,_0x2e2bcb[0x7*-0x103+-0x953*-0x1+0x23c*-0x1]=_0x4b37b3-_0x2438ee,_0x2e2bcb[-0x2639+-0x1ccc+0x18*0x2cb]=_0x568711-_0x1f4f2c,_0x2e2bcb[0x5a*-0x5a+-0x2*0xbc1+0x133*0x2e]=-0xc8e*0x3+0x1f31+-0x33d*-0x2-(_0x20657a+_0x341f45),_0x2e2bcb[-0x2de+-0x6d2+0x9b5]=_0x4c00b0+_0xa0e461,_0x2e2bcb[-0x22ed+-0x1705+0x39f8]=_0x4b37b3+_0x2438ee,_0x2e2bcb[0x1*0x665+-0x207*-0x7+-0x148f]=_0x4c00b0-_0xa0e461,_0x2e2bcb[0x1e09+-0x20*0xce+-0x441]=-0x509+-0x17*-0x1+0x4f3-(_0x20657a+_0x17175a),this;}['invertMat4'](_0x3c77a7){const _0x40c38f=_0x3c77a7['data'],_0x3c96ee=_0x40c38f[0x1f27+-0x2b*-0xe3+-0x4548],_0x4b7949=_0x40c38f[-0x5*-0x1f+0xa14+-0xaae],_0x190ec9=_0x40c38f[0x3*0x529+0x2457+-0x4*0xcf4],_0x2b74f3=_0x40c38f[-0x1390+0x1b20*0x1+-0x54*0x17],_0x2c0d2d=_0x40c38f[0x1b1*-0x2+0x43*-0xb+0xc*0x86],_0x1d47b3=_0x40c38f[0x553+-0xa39*0x2+0xf25],_0x315d4f=_0x40c38f[-0x26ef+0x2241+0x192*0x3],_0x1a753a=_0x40c38f[0x2185+-0x2d*0x4e+0x9e3*-0x2],_0x4e5e10=_0x40c38f[0x299+0x1381+-0x2c2*0x8],_0x182c29=_0x4e5e10*_0x2c0d2d-_0x1d47b3*_0x1a753a,_0x5a213e=-_0x4e5e10*_0x4b7949+_0x190ec9*_0x1a753a,_0x37b8a3=_0x1d47b3*_0x4b7949-_0x190ec9*_0x2c0d2d,_0x161fd2=-_0x4e5e10*_0x2b74f3+_0x1d47b3*_0x315d4f,_0x4bda0a=_0x4e5e10*_0x3c96ee-_0x190ec9*_0x315d4f,_0x4e8fbe=-_0x1d47b3*_0x3c96ee+_0x190ec9*_0x2b74f3,_0x1bbedc=_0x1a753a*_0x2b74f3-_0x2c0d2d*_0x315d4f,_0x24ce5e=-_0x1a753a*_0x3c96ee+_0x4b7949*_0x315d4f,_0x376a56=_0x2c0d2d*_0x3c96ee-_0x4b7949*_0x2b74f3,_0x1b728d=_0x3c96ee*_0x182c29+_0x4b7949*_0x161fd2+_0x190ec9*_0x1bbedc;if(_0x1b728d===-0x4a0*-0x4+0x2*0x117d+-0x1*0x357a)this['setIdentit'+'y']();else{const _0xbf908d=(0x1852+0x14*-0x16d+0x1*0x433)/_0x1b728d,_0x13c0e5=this['data'];_0x13c0e5[0x1161+-0xc*0x1c9+0x3*0x159]=_0x182c29*_0xbf908d,_0x13c0e5[-0xc*0x2d9+-0x832+0x2a5f]=_0x5a213e*_0xbf908d,_0x13c0e5[-0x232*0x5+-0xc64+-0x58*-0x44]=_0x37b8a3*_0xbf908d,_0x13c0e5[0xd0+-0x62*0x11+-0x3*-0x1e7]=_0x161fd2*_0xbf908d,_0x13c0e5[0x1*0x64d+0x30d*-0x1+-0x33c]=_0x4bda0a*_0xbf908d,_0x13c0e5[0x1a3*0x1+-0xa9e+0x900]=_0x4e8fbe*_0xbf908d,_0x13c0e5[0x1244*0x1+-0x11*0x47+0x1*-0xd87]=_0x1bbedc*_0xbf908d,_0x13c0e5[0x121a+0x1a*0xb3+0x1*-0x2441]=_0x24ce5e*_0xbf908d,_0x13c0e5[-0x16+-0x341*0x2+0x10*0x6a]=_0x376a56*_0xbf908d;}return this;}['transformV'+'ector'](_0x13f3ea,_0x356db3=new D()){const _0x173884=this['data'],{x:_0x1aa454,y:_0x63a3b1,z:_0x4509ae}=_0x13f3ea;return _0x356db3['x']=_0x1aa454*_0x173884[0x1c82+0x1f07+0x1*-0x3b89]+_0x63a3b1*_0x173884[0x4cf+0x6c*-0x51+0x2f0*0xa]+_0x4509ae*_0x173884[0x225e+-0x4c2*0x5+0x547*-0x2],_0x356db3['y']=_0x1aa454*_0x173884[0x6*-0x2cd+-0x33a*-0x1+0xd95]+_0x63a3b1*_0x173884[0x1b42+-0xa8b+0x10b3*-0x1]+_0x4509ae*_0x173884[-0x13*-0x3b+0x1*0xea+-0x2a2*0x2],_0x356db3['z']=_0x1aa454*_0x173884[0x374+-0x1625+-0x12b3*-0x1]+_0x63a3b1*_0x173884[-0x550+-0x1*-0x1ad5+-0x1580]+_0x4509ae*_0x173884[0x12dc+-0x263a+0x1366],_0x356db3;}};h(hn,'IDENTITY',Object['freeze'](new hn())),h(hn,'ZERO',Object['freeze'](new hn()['set']([-0xb81+-0x142b*-0x1+0x8aa*-0x1,0x135c+-0x1475*-0x1+-0x27d1*0x1,-0x23fc+-0x2*0xbaa+-0x2*-0x1da8,-0x1*-0x875+-0x51*-0x49+-0x1f8e,0x607+-0x5e+-0x9*0xa1,-0x1c5f+0x1*-0x6a2+0xbab*0x3,-0x3e+0x1596+0x1558*-0x1,0x20ad+-0x1*-0x437+-0x24e4,-0x1*-0x770+-0x21*0x92+0xb62])));let _i=hn;const Gt=class Gt{constructor(_0x506ff9=-0x8c3+0xe7d*0x1+-0x5ba,_0x16dea4=-0x1465+0x1*0x705+0xd60){h(this,'x'),h(this,'y'),_0x506ff9['length']===-0xa2*0xf+0x185e*0x1+0x76f*-0x2?(this['x']=_0x506ff9[-0x2296+0x1*0x72f+-0x131*-0x17],this['y']=_0x506ff9[-0x12c1+0x1d7e+-0x6*0x1ca]):(this['x']=_0x506ff9,this['y']=_0x16dea4);}['add'](_0x4410b8){return this['x']+=_0x4410b8['x'],this['y']+=_0x4410b8['y'],this;}['add2'](_0x4c1e92,_0x1034f4){return this['x']=_0x4c1e92['x']+_0x1034f4['x'],this['y']=_0x4c1e92['y']+_0x1034f4['y'],this;}['addScalar'](_0x2f6b99){return this['x']+=_0x2f6b99,this['y']+=_0x2f6b99,this;}['addScaled'](_0x455d43,_0x12dfe3){return this['x']+=_0x455d43['x']*_0x12dfe3,this['y']+=_0x455d43['y']*_0x12dfe3,this;}['clone'](){const _0x15babe=this['constructo'+'r'];return new _0x15babe(this['x'],this['y']);}['copy'](_0x3aaa15){return this['x']=_0x3aaa15['x'],this['y']=_0x3aaa15['y'],this;}['cross'](_0x33ff56){return this['x']*_0x33ff56['y']-this['y']*_0x33ff56['x'];}['distance'](_0x34bde4){const _0xe1d585=this['x']-_0x34bde4['x'],_0x472f25=this['y']-_0x34bde4['y'];return Math['sqrt'](_0xe1d585*_0xe1d585+_0x472f25*_0x472f25);}['div'](_0x50853e){return this['x']/=_0x50853e['x'],this['y']/=_0x50853e['y'],this;}['div2'](_0x24e3ec,_0x167d02){return this['x']=_0x24e3ec['x']/_0x167d02['x'],this['y']=_0x24e3ec['y']/_0x167d02['y'],this;}['divScalar'](_0x4cbfba){return this['x']/=_0x4cbfba,this['y']/=_0x4cbfba,this;}['dot'](_0x52a165){return this['x']*_0x52a165['x']+this['y']*_0x52a165['y'];}['equals'](_0x5b109b){return this['x']===_0x5b109b['x']&&this['y']===_0x5b109b['y'];}['equalsAppr'+'ox'](_0x363cab,_0x73e134=-0x122e+-0x419*0x5+0x26ab+0.000001){return Math['abs'](this['x']-_0x363cab['x'])<_0x73e134&&Math['abs'](this['y']-_0x363cab['y'])<_0x73e134;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y'];}['lerp'](_0x3d36fb,_0x41204f,_0x820f57){return this['x']=_0x3d36fb['x']+_0x820f57*(_0x41204f['x']-_0x3d36fb['x']),this['y']=_0x3d36fb['y']+_0x820f57*(_0x41204f['y']-_0x3d36fb['y']),this;}['mul'](_0x352ebb){return this['x']*=_0x352ebb['x'],this['y']*=_0x352ebb['y'],this;}['mul2'](_0x3fd9c7,_0x2f37b6){return this['x']=_0x3fd9c7['x']*_0x2f37b6['x'],this['y']=_0x3fd9c7['y']*_0x2f37b6['y'],this;}['mulScalar'](_0x5ed4f8){return this['x']*=_0x5ed4f8,this['y']*=_0x5ed4f8,this;}['normalize'](_0x23e55c=this){const _0x58fc0f=_0x23e55c['x']*_0x23e55c['x']+_0x23e55c['y']*_0x23e55c['y'];if(_0x58fc0f>0xda*0x20+0x177a+-0x97*0x56){const _0x21f01a=(-0xef2+0x24f3+-0xb*0x200)/Math['sqrt'](_0x58fc0f);this['x']=_0x23e55c['x']*_0x21f01a,this['y']=_0x23e55c['y']*_0x21f01a;}return this;}['rotate'](_0x548542){const _0x1acc14=Math['atan2'](this['x'],this['y'])+_0x548542*Y['DEG_TO_RAD'],_0x410d02=Math['sqrt'](this['x']*this['x']+this['y']*this['y']);return this['x']=Math['sin'](_0x1acc14)*_0x410d02,this['y']=Math['cos'](_0x1acc14)*_0x410d02,this;}['angle'](){return Math['atan2'](this['x'],this['y'])*Y['RAD_TO_DEG'];}['angleTo'](_0x515b07){return Math['atan2'](this['x']*_0x515b07['y']+this['y']*_0x515b07['x'],this['x']*_0x515b07['x']+this['y']*_0x515b07['y'])*Y['RAD_TO_DEG'];}['floor'](_0xbacf92=this){return this['x']=Math['floor'](_0xbacf92['x']),this['y']=Math['floor'](_0xbacf92['y']),this;}['ceil'](_0x169b08=this){return this['x']=Math['ceil'](_0x169b08['x']),this['y']=Math['ceil'](_0x169b08['y']),this;}['round'](_0x1a67c6=this){return this['x']=Math['round'](_0x1a67c6['x']),this['y']=Math['round'](_0x1a67c6['y']),this;}['min'](_0x55e7fc){return _0x55e7fc['x']<this['x']&&(this['x']=_0x55e7fc['x']),_0x55e7fc['y']<this['y']&&(this['y']=_0x55e7fc['y']),this;}['max'](_0x41ba6c){return _0x41ba6c['x']>this['x']&&(this['x']=_0x41ba6c['x']),_0x41ba6c['y']>this['y']&&(this['y']=_0x41ba6c['y']),this;}['set'](_0x5193d4,_0x2c11f3){return this['x']=_0x5193d4,this['y']=_0x2c11f3,this;}['sub'](_0x3e1ff6){return this['x']-=_0x3e1ff6['x'],this['y']-=_0x3e1ff6['y'],this;}['sub2'](_0x26aa81,_0x8ee6f1){return this['x']=_0x26aa81['x']-_0x8ee6f1['x'],this['y']=_0x26aa81['y']-_0x8ee6f1['y'],this;}['subScalar'](_0x4bd8bb){return this['x']-=_0x4bd8bb,this['y']-=_0x4bd8bb,this;}['fromArray'](_0x6dafeb,_0x5350d8=-0x445*-0x1+-0xaf*-0x29+-0x1*0x204c){return this['x']=_0x6dafeb[_0x5350d8]??this['x'],this['y']=_0x6dafeb[_0x5350d8+(0x31*0x1+-0x1185+-0x11*-0x105)]??this['y'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+']';}['toArray'](_0x5c6fca=[],_0x5dcd63=0x1*-0x85f+0x256b+-0x1d0c){return _0x5c6fca[_0x5dcd63]=this['x'],_0x5c6fca[_0x5dcd63+(0x1*0x1763+-0x80e+-0xf54)]=this['y'],_0x5c6fca;}static['angleRad'](_0x29b761,_0x296d5e){return Math['atan2'](_0x29b761['x']*_0x296d5e['y']-_0x29b761['y']*_0x296d5e['x'],_0x29b761['x']*_0x296d5e['x']+_0x29b761['y']*_0x296d5e['y']);}};h(Gt,'ZERO',Object['freeze'](new Gt(-0x2076+0x12f6+0xd80,-0x38*-0x49+-0x8*-0x26b+-0x2350))),h(Gt,'HALF',Object['freeze'](new Gt(-0x1b55*0x1+-0x1*-0x355+0x1800+0.5,-0x8e1+0x617+0x2ca+0.5))),h(Gt,'ONE',Object['freeze'](new Gt(0x1bae+-0x1627+-0x2*0x2c3,-0x4*-0x8f0+-0x1b33+-0x88c))),h(Gt,'UP',Object['freeze'](new Gt(-0x3*0x93+0x1*0x89e+0x1*-0x6e5,0xef5*-0x1+0x73*-0xd+0x14cd))),h(Gt,'DOWN',Object['freeze'](new Gt(0x12ed+0x6d*-0x1d+0x1*-0x694,-(-0x1f0e+-0x1*0x90a+0x2819)))),h(Gt,'RIGHT',Object['freeze'](new Gt(0x11*-0x8f+0x26b4+-0x1d34,-0xb*-0x287+-0x70d+-0xa60*0x2))),h(Gt,'LEFT',Object['freeze'](new Gt(-(0x32*-0x8+0x169*-0x6+0x97*0x11),-0x167*0x17+0x2*-0xc59+0x38f3)));let J=Gt;const hr=class hr{constructor(_0xcd900e=-0x16fc+0xe2+0x7b*0x2e,_0x35dfdc=-0x1d7b+0x2047*-0x1+0x3dc2,_0x373bd2=0x1*0x2367+-0x199a*-0x1+-0x3d01,_0x323e5a=-0x1da*0x4+0x1*0x200a+0x6*-0x41b){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0xcd900e['length']===0x2255+0x1d*-0x12b+0x39*-0x2?(this['x']=_0xcd900e[-0x20a4+0x15f4+-0x90*-0x13],this['y']=_0xcd900e[-0x2*0xb23+-0x1574*-0x1+0xd3*0x1],this['z']=_0xcd900e[-0x4f*-0x46+0x2*0x9e8+-0x28*0x109],this['w']=_0xcd900e[-0x24fa+0xd*0xda+-0x19eb*-0x1]):(this['x']=_0xcd900e,this['y']=_0x35dfdc,this['z']=_0x373bd2,this['w']=_0x323e5a);}['add'](_0x3b20a9){return this['x']+=_0x3b20a9['x'],this['y']+=_0x3b20a9['y'],this['z']+=_0x3b20a9['z'],this['w']+=_0x3b20a9['w'],this;}['add2'](_0x245f55,_0x58e4db){return this['x']=_0x245f55['x']+_0x58e4db['x'],this['y']=_0x245f55['y']+_0x58e4db['y'],this['z']=_0x245f55['z']+_0x58e4db['z'],this['w']=_0x245f55['w']+_0x58e4db['w'],this;}['addScalar'](_0x151648){return this['x']+=_0x151648,this['y']+=_0x151648,this['z']+=_0x151648,this['w']+=_0x151648,this;}['addScaled'](_0x175210,_0x128f84){return this['x']+=_0x175210['x']*_0x128f84,this['y']+=_0x175210['y']*_0x128f84,this['z']+=_0x175210['z']*_0x128f84,this['w']+=_0x175210['w']*_0x128f84,this;}['clone'](){const _0x435f7d=this['constructo'+'r'];return new _0x435f7d(this['x'],this['y'],this['z'],this['w']);}['copy'](_0x49abaa){return this['x']=_0x49abaa['x'],this['y']=_0x49abaa['y'],this['z']=_0x49abaa['z'],this['w']=_0x49abaa['w'],this;}['div'](_0x488d12){return this['x']/=_0x488d12['x'],this['y']/=_0x488d12['y'],this['z']/=_0x488d12['z'],this['w']/=_0x488d12['w'],this;}['div2'](_0x20b0df,_0x3ffdb2){return this['x']=_0x20b0df['x']/_0x3ffdb2['x'],this['y']=_0x20b0df['y']/_0x3ffdb2['y'],this['z']=_0x20b0df['z']/_0x3ffdb2['z'],this['w']=_0x20b0df['w']/_0x3ffdb2['w'],this;}['divScalar'](_0xd48c54){return this['x']/=_0xd48c54,this['y']/=_0xd48c54,this['z']/=_0xd48c54,this['w']/=_0xd48c54,this;}['dot'](_0x312419){return this['x']*_0x312419['x']+this['y']*_0x312419['y']+this['z']*_0x312419['z']+this['w']*_0x312419['w'];}['equals'](_0x3f0155){return this['x']===_0x3f0155['x']&&this['y']===_0x3f0155['y']&&this['z']===_0x3f0155['z']&&this['w']===_0x3f0155['w'];}['equalsAppr'+'ox'](_0x2afd4b,_0x461b51=0x34b*-0x1+0xb87*-0x1+0x7*0x21e+0.000001){return Math['abs'](this['x']-_0x2afd4b['x'])<_0x461b51&&Math['abs'](this['y']-_0x2afd4b['y'])<_0x461b51&&Math['abs'](this['z']-_0x2afd4b['z'])<_0x461b51&&Math['abs'](this['w']-_0x2afd4b['w'])<_0x461b51;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x47a6ab,_0x346845,_0x187638){return this['x']=_0x47a6ab['x']+_0x187638*(_0x346845['x']-_0x47a6ab['x']),this['y']=_0x47a6ab['y']+_0x187638*(_0x346845['y']-_0x47a6ab['y']),this['z']=_0x47a6ab['z']+_0x187638*(_0x346845['z']-_0x47a6ab['z']),this['w']=_0x47a6ab['w']+_0x187638*(_0x346845['w']-_0x47a6ab['w']),this;}['mul'](_0x3127c3){return this['x']*=_0x3127c3['x'],this['y']*=_0x3127c3['y'],this['z']*=_0x3127c3['z'],this['w']*=_0x3127c3['w'],this;}['mul2'](_0x38947c,_0x3e4bf9){return this['x']=_0x38947c['x']*_0x3e4bf9['x'],this['y']=_0x38947c['y']*_0x3e4bf9['y'],this['z']=_0x38947c['z']*_0x3e4bf9['z'],this['w']=_0x38947c['w']*_0x3e4bf9['w'],this;}['mulScalar'](_0x4ce1a6){return this['x']*=_0x4ce1a6,this['y']*=_0x4ce1a6,this['z']*=_0x4ce1a6,this['w']*=_0x4ce1a6,this;}['normalize'](_0x1acd3a=this){const _0x538275=_0x1acd3a['x']*_0x1acd3a['x']+_0x1acd3a['y']*_0x1acd3a['y']+_0x1acd3a['z']*_0x1acd3a['z']+_0x1acd3a['w']*_0x1acd3a['w'];if(_0x538275>0x1*-0x2291+0x2270+0x21){const _0x525d9d=(-0x3fa+-0x366+0x761)/Math['sqrt'](_0x538275);this['x']=_0x1acd3a['x']*_0x525d9d,this['y']=_0x1acd3a['y']*_0x525d9d,this['z']=_0x1acd3a['z']*_0x525d9d,this['w']=_0x1acd3a['w']*_0x525d9d;}return this;}['floor'](_0xdb2f25=this){return this['x']=Math['floor'](_0xdb2f25['x']),this['y']=Math['floor'](_0xdb2f25['y']),this['z']=Math['floor'](_0xdb2f25['z']),this['w']=Math['floor'](_0xdb2f25['w']),this;}['ceil'](_0x391db5=this){return this['x']=Math['ceil'](_0x391db5['x']),this['y']=Math['ceil'](_0x391db5['y']),this['z']=Math['ceil'](_0x391db5['z']),this['w']=Math['ceil'](_0x391db5['w']),this;}['round'](_0x5804f4=this){return this['x']=Math['round'](_0x5804f4['x']),this['y']=Math['round'](_0x5804f4['y']),this['z']=Math['round'](_0x5804f4['z']),this['w']=Math['round'](_0x5804f4['w']),this;}['min'](_0x142cab){return _0x142cab['x']<this['x']&&(this['x']=_0x142cab['x']),_0x142cab['y']<this['y']&&(this['y']=_0x142cab['y']),_0x142cab['z']<this['z']&&(this['z']=_0x142cab['z']),_0x142cab['w']<this['w']&&(this['w']=_0x142cab['w']),this;}['max'](_0x2b4072){return _0x2b4072['x']>this['x']&&(this['x']=_0x2b4072['x']),_0x2b4072['y']>this['y']&&(this['y']=_0x2b4072['y']),_0x2b4072['z']>this['z']&&(this['z']=_0x2b4072['z']),_0x2b4072['w']>this['w']&&(this['w']=_0x2b4072['w']),this;}['set'](_0x5d90cb,_0x5e5a9e,_0x2dd5d1,_0x564614){return this['x']=_0x5d90cb,this['y']=_0x5e5a9e,this['z']=_0x2dd5d1,this['w']=_0x564614,this;}['sub'](_0x269670){return this['x']-=_0x269670['x'],this['y']-=_0x269670['y'],this['z']-=_0x269670['z'],this['w']-=_0x269670['w'],this;}['sub2'](_0x2827fd,_0x1578c2){return this['x']=_0x2827fd['x']-_0x1578c2['x'],this['y']=_0x2827fd['y']-_0x1578c2['y'],this['z']=_0x2827fd['z']-_0x1578c2['z'],this['w']=_0x2827fd['w']-_0x1578c2['w'],this;}['subScalar'](_0x9ad3b){return this['x']-=_0x9ad3b,this['y']-=_0x9ad3b,this['z']-=_0x9ad3b,this['w']-=_0x9ad3b,this;}['fromArray'](_0x32170e,_0x2c5bc2=-0x18+-0x159*-0x7+-0x957){return this['x']=_0x32170e[_0x2c5bc2]??this['x'],this['y']=_0x32170e[_0x2c5bc2+(0x33*0x3+0xabc+-0xb54)]??this['y'],this['z']=_0x32170e[_0x2c5bc2+(-0x960+-0x98c*0x4+0x2f92)]??this['z'],this['w']=_0x32170e[_0x2c5bc2+(-0x1*-0x10fa+-0x17ef*0x1+0x1*0x6f8)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x587554=[],_0x1b47fb=0x9d*-0x9+0x22bc+-0x1d37){return _0x587554[_0x1b47fb]=this['x'],_0x587554[_0x1b47fb+(-0x1*-0x2a+0x149+0xb9*-0x2)]=this['y'],_0x587554[_0x1b47fb+(0x1*-0x110b+0xf58+0x1b5)]=this['z'],_0x587554[_0x1b47fb+(0x1*0xa5f+-0x5d3+-0x1*0x489)]=this['w'],_0x587554;}};h(hr,'ZERO',Object['freeze'](new hr(-0x164e+0x3ad*-0x3+0xa1*0x35,0x38d+0xf43+-0x1*0x12d0,-0x1592+0x1684+-0xf2,-0x1*-0x169f+-0x2448+0xda9))),h(hr,'HALF',Object['freeze'](new hr(-0x1390+0xb*0x2db+-0x3f3*0x3+0.5,-0xe00*-0x2+0x1*-0x162d+-0x5d3+0.5,0x1c78+-0x1*0x2399+-0x16d*-0x5+0.5,-0x21c0+-0x2*0x1255+-0x1*-0x466a+0.5))),h(hr,'ONE',Object['freeze'](new hr(0x174a+-0x1*0xb2f+-0xc1a,0x1*0xa7f+0xe*0xdd+-0x1694,-0xe47+0x1*0x1517+-0x245*0x3,-0x10f8+-0x85a+0x1953)));let re=hr;const jn=new J(),Rs=new D(),Js=new D(),ei=new D(),Dl=new D(),jr=class jr{constructor(){h(this,'data',new Float32Array(-0x2*-0x129b+0x35*0x16+0x29b4*-0x1)),this['data'][0x1*-0x1645+0x1bb*0x1+0x148a]=this['data'][-0xb*-0x2fb+-0x1*-0x1b14+0x5fc*-0xa]=this['data'][0x1c5a+0x6*-0x71+-0x19aa]=this['data'][-0x5d3+0x1*-0x1b74+0x2156]=-0x11*-0x16f+0x3*-0x25e+-0x1144;}static['_getPerspe'+'ctiveHalfS'+'ize'](_0x1c7f9c,_0x117c16,_0x78b512,_0x2a1cf6,_0x3cfba1){_0x3cfba1?(_0x1c7f9c['x']=_0x2a1cf6*Math['tan'](_0x117c16*Math['PI']/(0x5*-0x63d+-0x9ce+0x87b*0x5)),_0x1c7f9c['y']=_0x1c7f9c['x']/_0x78b512):(_0x1c7f9c['y']=_0x2a1cf6*Math['tan'](_0x117c16*Math['PI']/(0x490+0x1f7*0x1+-0x51f)),_0x1c7f9c['x']=_0x1c7f9c['y']*_0x78b512);}['add2'](_0x4a96ea,_0x573de3){const _0x273b9b=_0x4a96ea['data'],_0x2b47b9=_0x573de3['data'],_0x5c3844=this['data'];return _0x5c3844[0x851*0x1+0x132b+0x4*-0x6df]=_0x273b9b[0x6c4*-0x5+0xbb*0x20+0xa74]+_0x2b47b9[-0x1362+-0x725+-0x1*-0x1a87],_0x5c3844[0x1a5*0x6+-0x361+-0x67c]=_0x273b9b[-0xf4f*-0x1+-0x15a+-0xdf4]+_0x2b47b9[0x25e6+0x1cc4+-0x42a9],_0x5c3844[-0x37a+0x2544+0x5c*-0x5e]=_0x273b9b[0x138b+0x1bd1*-0x1+0x848]+_0x2b47b9[0x705*0x3+0xb*0x5f+-0x1*0x1922],_0x5c3844[-0x17fb+0x59*0x70+-0x2*0x779]=_0x273b9b[0x1*-0x10d9+0x2b*0x57+-0x5*-0x73]+_0x2b47b9[-0x1632*0x1+0x1*-0x2053+-0x2ba*-0x14],_0x5c3844[0x1*0x19c1+0x3*0xa45+-0x388c]=_0x273b9b[-0x5e2+0x3b8+-0xba*-0x3]+_0x2b47b9[0x1*0x1c0f+0x1ff2+-0x3*0x13ff],_0x5c3844[-0x15c9+0x2*0xaf6+0x5*-0x6]=_0x273b9b[-0x11*0x239+-0x1306+0x38d4]+_0x2b47b9[-0x2523+-0x239b*-0x1+-0x1*-0x18d],_0x5c3844[0xe*0x10d+-0x1fc8+0x1118]=_0x273b9b[-0x861*0x3+0x323+0x1*0x1606]+_0x2b47b9[0x428+-0x1b20*0x1+0x6*0x3d5],_0x5c3844[0xd1+0x1*-0x1d3c+-0x2*-0xe39]=_0x273b9b[0x2248+-0x179*-0x7+-0x2c90]+_0x2b47b9[0x1*-0x1931+-0x2345*-0x1+-0xa0d],_0x5c3844[0xb3*-0x1e+0x1805+0x303*-0x1]=_0x273b9b[-0xe1a+-0x1b5*0xd+0x223*0x11]+_0x2b47b9[-0x1fa+0x8e3+0x6e1*-0x1],_0x5c3844[-0xe3*-0x17+0x7b7+0x1c13*-0x1]=_0x273b9b[0xe77+0x2*0xd01+-0x2870]+_0x2b47b9[-0x2*-0x129e+0xe7*0x2a+-0x4b19*0x1],_0x5c3844[0xba1+-0x2a4+0x8f3*-0x1]=_0x273b9b[-0x851+0x12c6+-0xa6b]+_0x2b47b9[0x1dcb+0x2123+-0x3ee4],_0x5c3844[-0x1*0x1871+-0xb*0x1eb+-0x683*-0x7]=_0x273b9b[-0x12d2+0x20b*0x6+0x69b]+_0x2b47b9[-0xcd2+0x1*0x647+0x696],_0x5c3844[-0x198+-0x1a8c+0x2c*0xa4]=_0x273b9b[-0x146f*-0x1+-0x3*0x5e5+-0x1*0x2b4]+_0x2b47b9[0x7*0x1f2+0x1c8b*0x1+0x2a1d*-0x1],_0x5c3844[0x257e+0x1ee3+-0x4*0x1115]=_0x273b9b[-0x188*0x18+-0xe28+0x32f5]+_0x2b47b9[0x1e1b+-0xa42+-0x13cc],_0x5c3844[-0x143*-0x15+0x2637+-0x8*0x815]=_0x273b9b[-0x13a6+-0x15c7+-0x11f*-0x25]+_0x2b47b9[0x722+0xab7+0x11cb*-0x1],_0x5c3844[0xe09+0xd71+0x1b6b*-0x1]=_0x273b9b[-0xa46+0xe9*-0x9+0x943*0x2]+_0x2b47b9[-0x187d*0x1+0xf34*-0x2+0x1*0x36f4],this;}['add'](_0x18d744){return this['add2'](this,_0x18d744);}['clone'](){const _0x2c1157=this['constructo'+'r'];return new _0x2c1157()['copy'](this);}['copy'](_0x239224){const _0x1ada1f=_0x239224['data'],_0x9ee84=this['data'];return _0x9ee84[0x1*-0xa16+0x925+-0x1*-0xf1]=_0x1ada1f[0x2*-0xc13+-0xc9a+-0x93*-0x40],_0x9ee84[-0xe36+0x398+0xa9f*0x1]=_0x1ada1f[-0x4d6*-0x1+-0x1213*-0x1+-0x16e8],_0x9ee84[-0x3*0x58+-0x26*0xfd+0x13*0x208]=_0x1ada1f[0xa5*0x1+0x3d*-0x74+0x1b01],_0x9ee84[-0x2*-0x9c7+-0x2442+0x10b7]=_0x1ada1f[-0xbb9*-0x2+-0x1*0xc9a+-0x1*0xad5],_0x9ee84[0xaa8+0x1ce*-0xd+-0xcd2*-0x1]=_0x1ada1f[0x1225+0x245d+-0x2*0x1b3f],_0x9ee84[0xa7d+-0xc1*-0x17+-0x945*0x3]=_0x1ada1f[0x1*-0x11a7+0x3d9*0x1+0xdd3],_0x9ee84[-0x782*0x2+-0xe2f+0x1d39]=_0x1ada1f[0x32b*0x6+0x1544+-0x2840],_0x9ee84[0x592+-0x220d*0x1+-0x1*-0x1c82]=_0x1ada1f[0x62e+0x316*-0x1+-0x311],_0x9ee84[-0x17db*-0x1+-0x1*-0x937+0x210a*-0x1]=_0x1ada1f[-0x9bd+0x78*0x45+-0x1693],_0x9ee84[-0x8d5*0x2+-0x1257+0x1205*0x2]=_0x1ada1f[-0x4e9+0x1*0x788+-0x2*0x14b],_0x9ee84[-0x1*0x201d+-0x64c+0x2673]=_0x1ada1f[0x1260+-0x8fe+-0x958],_0x9ee84[0x1*-0x177b+0x58*-0x9+-0x1*-0x1a9e]=_0x1ada1f[0x1e49+-0x8f9*-0x4+0x69d*-0xa],_0x9ee84[-0x1043+-0x1a1e+0x2a6d]=_0x1ada1f[-0x167*-0xb+0x139a+-0x22fb],_0x9ee84[-0xd*0x102+0x1*0x70f+0x9c*0xa]=_0x1ada1f[-0x38*0x16+-0x137+0x614],_0x9ee84[0x8e*-0x2a+-0x22da+0x3a34]=_0x1ada1f[0x1f60*0x1+0x1d*-0x10f+-0x1*0x9f],_0x9ee84[-0x1+-0x155a+0xab5*0x2]=_0x1ada1f[-0x13be+-0x8*-0x1bb+0x5f5],this;}['equals'](_0x3896cd){const _0x1ff81b=this['data'],_0x3733e8=_0x3896cd['data'];return _0x1ff81b[0x105b+0x190+-0x1*0x11eb]===_0x3733e8[-0x8*-0x17d+-0xa*0xbf+0x472*-0x1]&&_0x1ff81b[-0x15d2+-0x67*-0x20+0x8f3]===_0x3733e8[0xe6d*-0x2+0x1*0x412+0x18c9]&&_0x1ff81b[-0xa13*-0x1+-0xe7*-0x13+0xd9b*-0x2]===_0x3733e8[0xb74+0x632+-0x11a4]&&_0x1ff81b[-0x11bf+0x98*-0xf+-0xd55*-0x2]===_0x3733e8[0x638*-0x1+0x2*-0x293+-0xb61*-0x1]&&_0x1ff81b[-0xf9d+0x23ac*0x1+-0x140b]===_0x3733e8[-0x1294+-0x2169+-0x3401*-0x1]&&_0x1ff81b[-0xf6a*0x1+0x2f*0x31+-0x1*-0x670]===_0x3733e8[-0x1b89+0x19fd+-0x1*-0x191]&&_0x1ff81b[-0xe7*0x29+-0xbd6*0x3+0x3*0x182d]===_0x3733e8[0x26*-0x60+-0xa5d*-0x1+0x3e9]&&_0x1ff81b[0x1454+0x1c11+0x305e*-0x1]===_0x3733e8[-0xb*-0x23b+-0x8bc+-0x7e3*0x2]&&_0x1ff81b[0x1*-0x1b73+0x1765*-0x1+-0xcb8*-0x4]===_0x3733e8[-0x5f9*0x1+-0x15*0x1ce+0x2be7]&&_0x1ff81b[0x15d1+-0x1914+0x34c]===_0x3733e8[-0x79*0x4+0x378+-0x4f*0x5]&&_0x1ff81b[-0x14d0+0x6ab*0x4+-0x5d2]===_0x3733e8[0x19e*-0x8+-0x1dc1+-0x1*-0x2abb]&&_0x1ff81b[0x96d*-0x3+-0x4*0x5d1+0x3396]===_0x3733e8[-0x1dbb*-0x1+-0x9ee+-0x13c2]&&_0x1ff81b[0x1b6e+-0xb*0x141+0x7*-0x1f1]===_0x3733e8[0x11a5+-0x14b3+0x1*0x31a]&&_0x1ff81b[0x43c+-0x1018*0x1+-0x1*-0xbe9]===_0x3733e8[-0x79*-0x1+-0x1e63+0x1df7*0x1]&&_0x1ff81b[-0x1b+-0x18be+0x18e7]===_0x3733e8[0x1282+-0xc8*-0x1d+0xc*-0x36d]&&_0x1ff81b[-0x10bb*0x1+0xf69*-0x1+-0x2033*-0x1]===_0x3733e8[0xe13*0x1+0x53*0x9+-0x10ef];}['isIdentity'](){const _0x31cb1d=this['data'];return _0x31cb1d[0x1d4c+0xf26+-0x2c72*0x1]===-0x1*-0x66+-0x2252+0x21ed&&_0x31cb1d[0x16fb+0x1d3*-0xa+-0x4bc*0x1]===0x7*-0x10d+0x199d+-0x2*0x921&&_0x31cb1d[0xd9a+0x1023+-0x1dbb]===0x3b9+-0x5*-0x71f+-0x6*0x68e&&_0x31cb1d[0x49*0x47+0x1*-0x76a+0x223*-0x6]===-0x346+-0xe6f+0x1*0x11b5&&_0x31cb1d[0x2*0xd13+0x5*0x61+-0x1c07]===0x4*0x232+0x376+-0x1*0xc3e&&_0x31cb1d[-0xf3*-0x1+0x872+0xf*-0xa0]===-0x6bd*-0x4+0x9*-0x61+-0x178a&&_0x31cb1d[0x97b+0x1933+0x2*-0x1154]===0xc4a+-0x24cc+0x2*0xc41&&_0x31cb1d[-0x163e*-0x1+-0x5e8+0x19*-0xa7]===-0x16ff+0x1*0xf3b+0x7c4&&_0x31cb1d[0x1*-0xfad+0x19d3+0x46*-0x25]===-0x146+0x1ddb+-0x1c95&&_0x31cb1d[0xc5b*0x1+0x162f+0xb*-0x323]===0xda1+-0x2119+0xe*0x164&&_0x31cb1d[0x8c5+-0x371+-0x54a]===-0x11*0x19+-0x1*-0x22cd+-0x2123&&_0x31cb1d[-0x119c+0x1e*-0x22+-0x15a3*-0x1]===-0x1*0x115c+-0x7*0x18b+0x1c29&&_0x31cb1d[0x21+0x6*0x17f+-0x90f]===-0xa71+0x145c+0x9eb*-0x1&&_0x31cb1d[0xc*0x162+0x642*0x5+0x2fd5*-0x1]===0x12dd*0x1+-0x23a3+-0x71*-0x26&&_0x31cb1d[-0x3*-0x677+0x1247+-0x2d*0xd6]===0x152*0x11+0x224f*-0x1+0xbdd&&_0x31cb1d[-0xacb+0x4f*0x7+0x19*0x59]===-0x260c+0x2*-0x321+-0x39*-0xc7;}['mul2'](_0x5808ba,_0x12a7a7){const _0x3fc40e=_0x5808ba['data'],_0x16afda=_0x12a7a7['data'],_0x3b991a=this['data'],_0x4e1be5=_0x3fc40e[0x159f+-0x599+0x24a*-0x7],_0x5cbeec=_0x3fc40e[-0x1c95+-0x1afe+0x3794],_0x5b4961=_0x3fc40e[-0x111*0x3+-0x14e*0x4+0x1*0x86d],_0x536215=_0x3fc40e[-0x1*-0x269b+-0x109+-0x258f],_0x41b537=_0x3fc40e[-0x15b0+0x26b6+-0x2*0x881],_0x272220=_0x3fc40e[0x1242+-0x14b0+0x273],_0x162402=_0x3fc40e[0xc*0x273+-0x30*-0x85+-0x364e],_0x348f71=_0x3fc40e[-0xc6f+0x596+0x6e0],_0x2f1edc=_0x3fc40e[-0x239*0x1+0x5*0x6b3+-0xf9f*0x2],_0x685af3=_0x3fc40e[-0xb7*0x4+-0x3*-0x67a+-0x1089],_0x1775c5=_0x3fc40e[0x8*0x215+-0xbe1*-0x2+-0x220*0x13],_0x33b7dc=_0x3fc40e[0x2*-0xda0+0x4*-0x875+0x3d1f*0x1],_0x373043=_0x3fc40e[0x2*-0xb9d+-0xb3*-0x12+-0x4c*-0x24],_0x5557c4=_0x3fc40e[-0xf56+0x26f5*0x1+-0x1792],_0x49c6ad=_0x3fc40e[-0xc*-0x1da+0x2579*0x1+-0x3ba3],_0x5cc315=_0x3fc40e[0x24a3+-0x47*-0x4+-0xc90*0x3];let _0x4bfcd6,_0x72dd52,_0x5c5d93,_0x53fb20;return _0x4bfcd6=_0x16afda[0x11b0+-0x13c9+0x219],_0x72dd52=_0x16afda[-0x3e1*0xa+0xc65+0x1a66],_0x5c5d93=_0x16afda[-0x211d+-0x1*-0x1683+0xa9c],_0x53fb20=_0x16afda[-0x1831+0x1637+-0x1fd*-0x1],_0x3b991a[-0x5f6*0x5+0x11fe+0x1*0xbd0]=_0x4e1be5*_0x4bfcd6+_0x41b537*_0x72dd52+_0x2f1edc*_0x5c5d93+_0x373043*_0x53fb20,_0x3b991a[-0x1456+0x17b5+-0x1*0x35e]=_0x5cbeec*_0x4bfcd6+_0x272220*_0x72dd52+_0x685af3*_0x5c5d93+_0x5557c4*_0x53fb20,_0x3b991a[-0x1*-0xdef+-0x1c73+0xe86]=_0x5b4961*_0x4bfcd6+_0x162402*_0x72dd52+_0x1775c5*_0x5c5d93+_0x49c6ad*_0x53fb20,_0x3b991a[-0x1ac9+0x955+0x1177*0x1]=_0x536215*_0x4bfcd6+_0x348f71*_0x72dd52+_0x33b7dc*_0x5c5d93+_0x5cc315*_0x53fb20,_0x4bfcd6=_0x16afda[-0x1702+0x5ea*-0x2+0x22da],_0x72dd52=_0x16afda[-0x14*-0xce+-0x3*0x639+-0x4*-0xa6],_0x5c5d93=_0x16afda[0x1e44+0x1aec+-0x392a],_0x53fb20=_0x16afda[0x1*0x75c+-0x1cf9+0x22a*0xa],_0x3b991a[0x2210+-0x9c1+-0x9*0x2b3]=_0x4e1be5*_0x4bfcd6+_0x41b537*_0x72dd52+_0x2f1edc*_0x5c5d93+_0x373043*_0x53fb20,_0x3b991a[0x7bf+-0xf6e+0x1ed*0x4]=_0x5cbeec*_0x4bfcd6+_0x272220*_0x72dd52+_0x685af3*_0x5c5d93+_0x5557c4*_0x53fb20,_0x3b991a[0x216c+0x11f*0x21+-0x4665]=_0x5b4961*_0x4bfcd6+_0x162402*_0x72dd52+_0x1775c5*_0x5c5d93+_0x49c6ad*_0x53fb20,_0x3b991a[-0x79f+-0xd34*0x1+0x14da]=_0x536215*_0x4bfcd6+_0x348f71*_0x72dd52+_0x33b7dc*_0x5c5d93+_0x5cc315*_0x53fb20,_0x4bfcd6=_0x16afda[-0xbf*0x25+0x22a0*-0x1+-0x2f7*-0x15],_0x72dd52=_0x16afda[0x4eb+0xd*0x2a5+0x1b5*-0x17],_0x5c5d93=_0x16afda[-0xf0f+0xb42+0x3d7],_0x53fb20=_0x16afda[-0x13da+-0x1ef7+0x32dc],_0x3b991a[-0x1dab+-0xdf5+0x2ba8]=_0x4e1be5*_0x4bfcd6+_0x41b537*_0x72dd52+_0x2f1edc*_0x5c5d93+_0x373043*_0x53fb20,_0x3b991a[-0x636+-0x1ea3+0x24e2*0x1]=_0x5cbeec*_0x4bfcd6+_0x272220*_0x72dd52+_0x685af3*_0x5c5d93+_0x5557c4*_0x53fb20,_0x3b991a[-0x43*-0x26+-0x21cd+0x17e5]=_0x5b4961*_0x4bfcd6+_0x162402*_0x72dd52+_0x1775c5*_0x5c5d93+_0x49c6ad*_0x53fb20,_0x3b991a[-0x229*0x2+0x402+0x5b]=_0x536215*_0x4bfcd6+_0x348f71*_0x72dd52+_0x33b7dc*_0x5c5d93+_0x5cc315*_0x53fb20,_0x4bfcd6=_0x16afda[-0x10+0x92*0x15+-0xbde],_0x72dd52=_0x16afda[0xcaf+0x2*-0x7f1+0x340],_0x5c5d93=_0x16afda[-0xd81+-0x20a7*0x1+-0x7*-0x69a],_0x53fb20=_0x16afda[-0x1aa4+-0xd13*-0x1+-0x6d*-0x20],_0x3b991a[-0x1344+0x1*-0x476+0x17c6]=_0x4e1be5*_0x4bfcd6+_0x41b537*_0x72dd52+_0x2f1edc*_0x5c5d93+_0x373043*_0x53fb20,_0x3b991a[0x2*0x25+0x1*0x272+0x2af*-0x1]=_0x5cbeec*_0x4bfcd6+_0x272220*_0x72dd52+_0x685af3*_0x5c5d93+_0x5557c4*_0x53fb20,_0x3b991a[0x2*-0x240+0x1783+-0x12f5*0x1]=_0x5b4961*_0x4bfcd6+_0x162402*_0x72dd52+_0x1775c5*_0x5c5d93+_0x49c6ad*_0x53fb20,_0x3b991a[0x25*-0x13+0x1*0x1fd3+-0x143*0x17]=_0x536215*_0x4bfcd6+_0x348f71*_0x72dd52+_0x33b7dc*_0x5c5d93+_0x5cc315*_0x53fb20,this;}['mulAffine2'](_0x219d40,_0x5352f4){const _0x3c2405=_0x219d40['data'],_0x50eba8=_0x5352f4['data'],_0xe67be8=this['data'],_0x32f332=_0x3c2405[-0x5*0x295+-0x1d86+0x2a6f],_0x2a5998=_0x3c2405[-0x1c10+0x14fb*-0x1+0x310c],_0x1b0ba7=_0x3c2405[-0xbc1*0x1+0x3*-0x1ed+0x1c1*0xa],_0x3484d6=_0x3c2405[0xdf5+0x1*-0x58f+-0x862],_0x4fa75a=_0x3c2405[0x2*-0xd0e+-0xa8f+0x2*0x1258],_0x1ec3e7=_0x3c2405[-0xd5e+-0x1272+0x1fd6],_0x5f1895=_0x3c2405[0x2654+-0x7*-0x523+-0x1*0x4a41],_0x38eb27=_0x3c2405[-0x30*-0x15+-0x2*-0x81f+-0x1425],_0x3dd449=_0x3c2405[0x20bb+-0x1a03+-0xab*0xa],_0x57c574=_0x3c2405[0xdb*0x1+-0x138*0x2+0x1a1],_0x4a853c=_0x3c2405[0x1*0x6fd+0x120b+-0x18fb*0x1],_0x1acc7c=_0x3c2405[-0xefe+-0x1b85+0x2a91];let _0x24f7c1,_0x9d30c1,_0x56ec3e;return _0x24f7c1=_0x50eba8[-0x1556+0x26cf*-0x1+0x3c25],_0x9d30c1=_0x50eba8[-0x1*-0x169+0x7c2+-0x92a],_0x56ec3e=_0x50eba8[0xdd5+-0x1701+-0xa*-0xeb],_0xe67be8[-0x1fa4+0xed*-0x1d+0x3a7d]=_0x32f332*_0x24f7c1+_0x3484d6*_0x9d30c1+_0x5f1895*_0x56ec3e,_0xe67be8[-0x3*0xb59+-0x4*0x4af+0x233*0x18]=_0x2a5998*_0x24f7c1+_0x4fa75a*_0x9d30c1+_0x38eb27*_0x56ec3e,_0xe67be8[-0x1434+-0x3*-0x31c+0xae2]=_0x1b0ba7*_0x24f7c1+_0x1ec3e7*_0x9d30c1+_0x3dd449*_0x56ec3e,_0xe67be8[-0x24c2*-0x1+0x1fc*0x3+-0x2ab3]=-0x2a*-0x25+0x2*-0xf90+0x190e,_0x24f7c1=_0x50eba8[0x1*-0x1887+0xf50+0x93b],_0x9d30c1=_0x50eba8[-0x914+-0x25c5+0x2ede],_0x56ec3e=_0x50eba8[0x470+-0x9c*-0x2+0xce*-0x7],_0xe67be8[0x32d*-0xb+-0x2ad*-0x2+0x1d99]=_0x32f332*_0x24f7c1+_0x3484d6*_0x9d30c1+_0x5f1895*_0x56ec3e,_0xe67be8[-0x67*-0x3b+-0x6e6+-0x10d2]=_0x2a5998*_0x24f7c1+_0x4fa75a*_0x9d30c1+_0x38eb27*_0x56ec3e,_0xe67be8[0x2129+0x70*-0x18+-0x16a3]=_0x1b0ba7*_0x24f7c1+_0x1ec3e7*_0x9d30c1+_0x3dd449*_0x56ec3e,_0xe67be8[-0x863+-0x12c+-0x996*-0x1]=0x1df7*0x1+0xc69*0x3+-0x1*0x4332,_0x24f7c1=_0x50eba8[-0x1f85*0x1+-0xe*0x235+0x3e73],_0x9d30c1=_0x50eba8[-0x10f+0x8a6+-0x2*0x3c7],_0x56ec3e=_0x50eba8[0x1*0x22ff+-0x8d*-0x3e+-0x451b],_0xe67be8[0x4*-0x8f9+0x198c+0xa60*0x1]=_0x32f332*_0x24f7c1+_0x3484d6*_0x9d30c1+_0x5f1895*_0x56ec3e,_0xe67be8[0x6d*0x2+0x12bf*-0x1+0x11ee]=_0x2a5998*_0x24f7c1+_0x4fa75a*_0x9d30c1+_0x38eb27*_0x56ec3e,_0xe67be8[0xf2*0x26+-0x2*0xbfd+-0x2fa*0x4]=_0x1b0ba7*_0x24f7c1+_0x1ec3e7*_0x9d30c1+_0x3dd449*_0x56ec3e,_0xe67be8[-0xae7*0x1+0x1*-0x15cb+0x20bd]=0x764+-0x8*0x3ce+-0x2*-0xb86,_0x24f7c1=_0x50eba8[0x2e6+0x1*0x1253+0x70f*-0x3],_0x9d30c1=_0x50eba8[-0x1*0x1610+-0xb66+-0x175*-0x17],_0x56ec3e=_0x50eba8[0x136*0x1d+-0x250a+0x1*0x1fa],_0xe67be8[0x1236+0x1756+-0x2980]=_0x32f332*_0x24f7c1+_0x3484d6*_0x9d30c1+_0x5f1895*_0x56ec3e+_0x57c574,_0xe67be8[-0x11b*-0xf+-0x1*-0x22f3+-0x17*0x23d]=_0x2a5998*_0x24f7c1+_0x4fa75a*_0x9d30c1+_0x38eb27*_0x56ec3e+_0x4a853c,_0xe67be8[0x18eb+0x208*-0x3+-0x12c5]=_0x1b0ba7*_0x24f7c1+_0x1ec3e7*_0x9d30c1+_0x3dd449*_0x56ec3e+_0x1acc7c,_0xe67be8[-0xff*-0x3+-0x2*-0xeed+-0x20c8]=0x164f*-0x1+0x1a06+-0x3b6,this;}['mul'](_0x1e4769){return this['mul2'](this,_0x1e4769);}['transformP'+'oint'](_0x4842c2,_0x3323e4=new D()){const _0x9783b=this['data'],{x:_0x5cc7fe,y:_0x1853ea,z:_0x3a29b6}=_0x4842c2;return _0x3323e4['x']=_0x5cc7fe*_0x9783b[-0x1d12+0x1ed0+-0x1be]+_0x1853ea*_0x9783b[-0x1*-0x5db+-0x22a1+-0x5*-0x5c2]+_0x3a29b6*_0x9783b[0x1121+-0xb75+-0x5a4]+_0x9783b[0x45c+0xdc3+0x295*-0x7],_0x3323e4['y']=_0x5cc7fe*_0x9783b[0x1beb*0x1+0xf91+-0x1*0x2b7b]+_0x1853ea*_0x9783b[0x5d*-0x17+-0x1272+0x2*0xd69]+_0x3a29b6*_0x9783b[-0x1c1*-0x3+0x623*0x1+-0xb5d*0x1]+_0x9783b[0x147a*0x1+0x23a3*-0x1+-0xb1*-0x16],_0x3323e4['z']=_0x5cc7fe*_0x9783b[-0x110e+-0x7b*-0x1b+0x417]+_0x1853ea*_0x9783b[-0x1*0xe9+-0xea8+0xf97]+_0x3a29b6*_0x9783b[0x206d*0x1+0x98*0xb+0x1*-0x26eb]+_0x9783b[-0x2537+0x35e*0x4+-0x3*-0x7ef],_0x3323e4;}['transformV'+'ector'](_0x39fc41,_0x189e3b=new D()){const _0x48aeef=this['data'],{x:_0x26a171,y:_0x166d31,z:_0x44d73a}=_0x39fc41;return _0x189e3b['x']=_0x26a171*_0x48aeef[0x1a4d+0x21e+-0x1e5*0xf]+_0x166d31*_0x48aeef[0x1*-0x148d+-0x647*0x4+-0xb*-0x427]+_0x44d73a*_0x48aeef[-0x1d8e+-0x1*0x17cb+-0x1*-0x3561],_0x189e3b['y']=_0x26a171*_0x48aeef[-0x3c5*-0x3+-0x124+-0xa2a]+_0x166d31*_0x48aeef[-0x79d*-0x5+-0x1*-0xdd7+-0x33e3]+_0x44d73a*_0x48aeef[-0x2504+-0xb5c+0x3069],_0x189e3b['z']=_0x26a171*_0x48aeef[0x266*-0x3+-0x1*0x24d9+0x2c0d]+_0x166d31*_0x48aeef[0x1320+-0x238+0x871*-0x2]+_0x44d73a*_0x48aeef[0x5*0x1a9+-0x638+-0x20b],_0x189e3b;}['transformV'+'ec4'](_0x2f9df1,_0x16a37b=new re()){const _0x2dab9e=this['data'],{x:_0x5c6758,y:_0x1ad9ba,z:_0x391047,w:_0x51c658}=_0x2f9df1;return _0x16a37b['x']=_0x5c6758*_0x2dab9e[-0x5*-0x716+-0x9a8+-0x19c6]+_0x1ad9ba*_0x2dab9e[0x14f3+-0x1ffb+0xb0c]+_0x391047*_0x2dab9e[0x54*-0x12+0x1ccc+-0x1c*0xd1]+_0x51c658*_0x2dab9e[0x1b28*0x1+-0xa59*-0x3+0x1*-0x3a27],_0x16a37b['y']=_0x5c6758*_0x2dab9e[0x13*-0x18d+-0x1a*-0x17f+-0x47*0x22]+_0x1ad9ba*_0x2dab9e[0xea8+0x2*-0x10f1+0x133f]+_0x391047*_0x2dab9e[-0x13cf+-0x219e+0x3576]+_0x51c658*_0x2dab9e[-0x2*-0x1e7+0x2*0x665+-0x108b],_0x16a37b['z']=_0x5c6758*_0x2dab9e[0x27+-0xd22+0xcfd]+_0x1ad9ba*_0x2dab9e[0x6*-0x101+-0x1*0x181e+0xea*0x21]+_0x391047*_0x2dab9e[0x3*-0x8cd+-0x1dd2+0x3843]+_0x51c658*_0x2dab9e[0x7ca+-0x13*-0x13d+-0x1f43],_0x16a37b['w']=_0x5c6758*_0x2dab9e[-0x1db9+-0x1094+0x68*0x72]+_0x1ad9ba*_0x2dab9e[-0x20e+-0xe5*-0x17+-0x127e]+_0x391047*_0x2dab9e[0x3c7*-0x7+0x2487+-0xa0b]+_0x51c658*_0x2dab9e[0x1394+0x1a25+-0x2daa],_0x16a37b;}['setLookAt'](_0x224736,_0x56e836,_0x2ca8ba){ei['sub2'](_0x224736,_0x56e836)['normalize'](),Js['copy'](_0x2ca8ba)['normalize'](),Rs['cross'](Js,ei)['normalize'](),Js['cross'](ei,Rs);const _0x24f687=this['data'];return _0x24f687[0x25*-0xbf+-0x1105*-0x2+-0x66f]=Rs['x'],_0x24f687[-0x1643+0x472+0x2*0x8e9]=Rs['y'],_0x24f687[-0x259+0x1e*-0x113+0x2295]=Rs['z'],_0x24f687[-0x1*-0x2653+-0x158c+0x10c4*-0x1]=0x1ce1+0x60f*-0x4+0x4a5*-0x1,_0x24f687[0x100+-0x13c9+-0x1*-0x12cd]=Js['x'],_0x24f687[-0x2580+0x20f*0x5+0x1b3a]=Js['y'],_0x24f687[-0x342+0x1d7*0x10+-0x345*0x8]=Js['z'],_0x24f687[-0xa4*0x18+-0x1*0x20f2+0x3059]=0x58a+-0x3*0x3fa+-0x2*-0x332,_0x24f687[0x6c8+-0x1612+-0x4a*-0x35]=ei['x'],_0x24f687[0x41*0x5+0x2078*-0x1+0x1f3c]=ei['y'],_0x24f687[0x1*0xb02+0x3a*0x5d+-0x200a]=ei['z'],_0x24f687[0x1*-0x7c8+-0x2*-0xc03+0xb*-0x179]=-0x9f2*-0x2+-0x36+-0x13ae*0x1,_0x24f687[-0x1dd+-0x1aa2+0x1c8b*0x1]=_0x224736['x'],_0x24f687[0x1*0x19fd+-0x258f+-0x11*-0xaf]=_0x224736['y'],_0x24f687[-0x73*0x54+0x1217+0x13b3]=_0x224736['z'],_0x24f687[0x87d+0xe0a+-0x2*0xb3c]=0xccb*-0x3+0xb20+0x1b42,this;}['setFrustum'](_0x566f06,_0x305386,_0x4b4b63,_0x5b42dd,_0x175bfd,_0x3cc256){const _0x8d97bb=(-0x1*0xf19+0x19c7+-0xaac)*_0x175bfd,_0x4385c9=_0x305386-_0x566f06,_0x4bcb40=_0x5b42dd-_0x4b4b63,_0xbff808=_0x3cc256-_0x175bfd,_0x18d3d0=this['data'];return _0x18d3d0[0x9*-0x2c2+0x5*-0x3d9+0x2c0f]=_0x8d97bb/_0x4385c9,_0x18d3d0[-0x94f*0x1+-0xb+0x1df*0x5]=-0x7*0x1e0+-0x9*0x31d+-0x3*-0xdb7,_0x18d3d0[-0x1*0x1c66+-0x1f5f+0x1*0x3bc7]=-0x11*0xbb+0x16a8+-0xa3d*0x1,_0x18d3d0[0xed6+0x19b1+0x2884*-0x1]=-0xd*0xb5+0x2150*0x1+-0x181f,_0x18d3d0[-0x1814+-0x355*-0xa+0x49d*-0x2]=-0x14*-0x1bf+-0x16be+-0x2*0x617,_0x18d3d0[-0x2f9+0x1d2*0x11+-0x1bf4]=_0x8d97bb/_0x4bcb40,_0x18d3d0[0x72a+-0x23*-0x107+-0x3eb*0xb]=0xcd8+-0x14*0x1b6+0x1560,_0x18d3d0[-0x7ed*-0x1+-0x1*0x387+-0x1*0x45f]=-0x1aa+-0x4ba+-0x664*-0x1,_0x18d3d0[-0x13a2+0x8*-0x4df+0x3aa2]=(_0x305386+_0x566f06)/_0x4385c9,_0x18d3d0[0x53*-0x1d+0x64b*0x4+-0x1*0xfbc]=(_0x5b42dd+_0x4b4b63)/_0x4bcb40,_0x18d3d0[0x29*0x13+-0x120b+0xf0a]=(-_0x3cc256-_0x175bfd)/_0xbff808,_0x18d3d0[-0xe0a+-0x2*0x1e1+0x11d7]=-(0xad5*0x1+-0xe18+0x344),_0x18d3d0[-0x241a+-0x265f+0x4a85]=0x1844+0x17cc+-0x3010,_0x18d3d0[0x1*-0x1525+-0x23e3+0x3915*0x1]=-0xe*0x243+0x1*0x1f63+-0x47*-0x1,_0x18d3d0[0x17fb+-0x497*0x7+0x834]=-_0x8d97bb*_0x3cc256/_0xbff808,_0x18d3d0[-0x24b1+-0x2561+0x4a21]=-0x26e2*-0x1+-0x369*0x4+0x167*-0x12,this;}['setPerspec'+'tive'](_0x75878b,_0x5e4927,_0x54b733,_0x11807e,_0x17a6ba){return jr['_getPerspe'+'ctiveHalfS'+'ize'](jn,_0x75878b,_0x5e4927,_0x54b733,_0x17a6ba),this['setFrustum'](-jn['x'],jn['x'],-jn['y'],jn['y'],_0x54b733,_0x11807e);}['setOrtho'](_0x10e84f,_0x35438c,_0x59c972,_0x42e73f,_0x2ca76a,_0x2caf86){const _0x1c50d0=this['data'];return _0x1c50d0[-0x1*-0x1d5f+-0x227*0x11+-0x15*-0x58]=(0xc2a+-0x829*0x2+0x42a)/(_0x35438c-_0x10e84f),_0x1c50d0[0x19aa+0x1d35*-0x1+0x38c]=-0x2379+0xe57+-0xa*-0x21d,_0x1c50d0[0x243a+-0x36a+-0x20ce]=0x1f6+0x2602+-0x27f8,_0x1c50d0[0x884+-0x1e2d+0x15ac]=-0x1d80+-0x12b6*-0x1+-0x1*-0xaca,_0x1c50d0[0x153d+-0x1*-0x311+-0x184a]=0x9ba+-0x44f*0x3+0x333,_0x1c50d0[0x7f1+-0x1*0x10cb+-0x1*-0x8df]=(-0x1a*0x2+-0x2207+-0x6d9*-0x5)/(_0x42e73f-_0x59c972),_0x1c50d0[-0x6a2+-0x3*-0x827+-0x3*0x5ef]=0xa20+-0x1*0x1dcf+-0x13af*-0x1,_0x1c50d0[0x4*-0x3bf+-0x1a2*0x17+0x3491]=-0x9b*-0x1a+0x1*-0x2302+0x1344,_0x1c50d0[0x255e+0x11c6+-0x371c]=0x1164+-0x4*-0x4bb+0x7*-0x530,_0x1c50d0[-0x1e4*-0x10+0x2*-0xae3+-0x871]=0x2004+-0xba1+0x11*-0x133,_0x1c50d0[0xe99+0x2*0x1306+-0x1189*0x3]=-(-0x19*0x6+-0x1*-0x153e+0x3*-0x6e2)/(_0x2caf86-_0x2ca76a),_0x1c50d0[-0x1a22+-0x297*-0x5+0xd3a]=-0x1*-0x1d75+-0x2ba*-0xb+0x3b73*-0x1,_0x1c50d0[-0x1baa+-0x89*-0x27+0x11*0x67]=-(_0x35438c+_0x10e84f)/(_0x35438c-_0x10e84f),_0x1c50d0[0x1925+-0xa75+-0xea3]=-(_0x42e73f+_0x59c972)/(_0x42e73f-_0x59c972),_0x1c50d0[0x2438+-0x1a63+-0x1*0x9c7]=-(_0x2caf86+_0x2ca76a)/(_0x2caf86-_0x2ca76a),_0x1c50d0[0xe9*0x23+-0xdbe+-0x120e]=0x1*0x1767+-0x121e+0xa9*-0x8,this;}['setFromAxi'+'sAngle'](_0x230695,_0x25abeb){_0x25abeb*=Y['DEG_TO_RAD'];const {x:_0x1337f3,y:_0x35d971,z:_0x145209}=_0x230695,_0x319453=Math['cos'](_0x25abeb),_0xd70c1d=Math['sin'](_0x25abeb),_0x1c3a86=0x5*0x22d+-0x278*0x1+-0x434*0x2-_0x319453,_0x2397aa=_0x1c3a86*_0x1337f3,_0x5af30d=_0x1c3a86*_0x35d971,_0x1b0d18=this['data'];return _0x1b0d18[-0xb79+0x917+0x262]=_0x2397aa*_0x1337f3+_0x319453,_0x1b0d18[0x17e*-0x10+-0x31b+0x1afc]=_0x2397aa*_0x35d971+_0xd70c1d*_0x145209,_0x1b0d18[-0xd23*-0x2+-0x1f60+0x51c]=_0x2397aa*_0x145209-_0xd70c1d*_0x35d971,_0x1b0d18[0x2c1+-0x1709+0x144b]=-0x6df*0x1+0x12d*-0x1d+0x28f8,_0x1b0d18[0x57a+-0x24ff+-0x27*-0xcf]=_0x2397aa*_0x35d971-_0xd70c1d*_0x145209,_0x1b0d18[0x1c3b+0x26c8+0x1*-0x42fe]=_0x5af30d*_0x35d971+_0x319453,_0x1b0d18[-0xa40+-0x1783*0x1+-0xb43*-0x3]=_0x5af30d*_0x145209+_0xd70c1d*_0x1337f3,_0x1b0d18[-0xd23*-0x2+-0xdc9+-0xc76]=-0xf73*0x2+-0x2c*0x7a+0x33de,_0x1b0d18[0x1d79+0x2*-0x61f+-0x103*0x11]=_0x2397aa*_0x145209+_0xd70c1d*_0x35d971,_0x1b0d18[-0x2670+-0x1*-0x1b56+0xb23]=_0x5af30d*_0x145209-_0x1337f3*_0xd70c1d,_0x1b0d18[0x1*-0x1f7+0x1583+-0x1382]=_0x1c3a86*_0x145209*_0x145209+_0x319453,_0x1b0d18[0x85*-0x3b+-0x22f3+0x5*0xd21]=-0x11c3+-0x741*-0x1+0xa82,_0x1b0d18[-0x1*0x54d+0x1adc+-0x1583*0x1]=-0x3d4+0x3*-0x937+0x1f79,_0x1b0d18[0x17c7+-0xa01+-0xdb9]=-0x172e+-0x13a9+0x2ad7*0x1,_0x1b0d18[0x1860+0x1e0b+-0x365d]=-0x261e+0xd7f+-0xbf*-0x21,_0x1b0d18[-0xe1c*-0x1+-0x1*-0x364+0x1171*-0x1]=0xf*-0x1cf+0x24cb+-0x9a9,this;}['setTransla'+'te'](_0x547cb7,_0x4c931c,_0x4f3ca0){const _0x5a4c60=this['data'];return _0x5a4c60[0x1*-0x17a3+0x1575+0x22e]=-0xc1f+0x1266+-0x646,_0x5a4c60[-0x3e*0x98+0xf6+-0x89*-0x43]=-0x133*0xa+0x1*-0x2275+0x2f*0xfd,_0x5a4c60[0x1*-0x151+0x913+-0x7c0]=0xc5+-0x1*0x14b3+0x13ee,_0x5a4c60[-0x1cff+-0x2b*0xb3+0x13b1*0x3]=0xc7*-0x2b+-0x8a3+-0x1508*-0x2,_0x5a4c60[0x7*-0x411+0x1e9d+-0x222]=0x2e6*0x1+0xf3+0x3d9*-0x1,_0x5a4c60[0x12c*-0x16+-0x212b+0x3af8]=-0x370+-0x222e+-0x1*-0x259f,_0x5a4c60[0x26a6+-0x2342+-0x35e]=0xc01+-0x3*-0x989+-0x289c,_0x5a4c60[-0x146e+0x1900+0x1*-0x48b]=0x2*0xa97+0x1*-0x1fa5+-0xa77*-0x1,_0x5a4c60[-0x1014*0x1+0x9d8+0x644]=0x2630*-0x1+0x1fca+-0x3*-0x222,_0x5a4c60[-0xbd8+0x146*-0x17+-0x3*-0xdb9]=-0x2*-0x1115+0xf14+-0x21*0x17e,_0x5a4c60[-0xb3*-0x19+0x1*-0x281+-0x1*0xef0]=-0x165e+0xb*-0x3b+-0x31d*-0x8,_0x5a4c60[0x44+-0x1*-0xdf+-0x28*0x7]=0xab1+-0x47f+-0x632,_0x5a4c60[0x101c+-0x3*-0x95+-0x11cf]=_0x547cb7,_0x5a4c60[0x4df*0x2+-0x1fae+0x15fd*0x1]=_0x4c931c,_0x5a4c60[-0x1df8+0x978+0x148e]=_0x4f3ca0,_0x5a4c60[-0x22d+0x1f8*0x10+-0x1d44]=-0x679*-0x3+0x1f3e+0x655*-0x8,this;}['setScale'](_0x46106e,_0x5f2910,_0x26f9e2){const _0x2d2a4c=this['data'];return _0x2d2a4c[0x5c7*-0x6+0x8cf+0x1*0x19db]=_0x46106e,_0x2d2a4c[-0x31*0x2c+0x1*0x1a65+0xa*-0x1cc]=0x52+0x7bd+0x80f*-0x1,_0x2d2a4c[-0x288*0xc+0x21f2+-0x390]=0x5*-0x209+-0x1b21+0x254e*0x1,_0x2d2a4c[0x886*-0x1+-0x1*0x26ce+0x1*0x2f57]=-0x11*0x11b+-0x931+-0xc*-0x255,_0x2d2a4c[0x150c+0x2196+-0x1*0x369e]=0x4f4*-0x1+-0xd51+0x1245,_0x2d2a4c[0x985*-0x1+-0x17*0x51+0x10d1]=_0x5f2910,_0x2d2a4c[-0xc22*0x1+-0x1bc7*0x1+0x27ef]=0x1*-0x301+0x2*-0x15e+0x71*0xd,_0x2d2a4c[0x269*0xd+0x1*-0x212d+0x1df]=0x2e*0x89+-0x1144+-0x75a,_0x2d2a4c[-0x18b1*0x1+-0xe*0x10c+0x2761]=0xcd4+0x1250+-0x1f24,_0x2d2a4c[0x1*0x1e2e+0x8f*0x17+-0x2afe]=-0x3a0*0x1+-0xf00+-0x20*-0x95,_0x2d2a4c[-0xa03+0x5*0x205+-0xc]=_0x26f9e2,_0x2d2a4c[0x4*0x4b2+-0x18*-0xfd+-0x2a75]=0x248e*-0x1+-0xa4+-0x9*-0x422,_0x2d2a4c[-0xa4d*0x1+0x23d6+-0x19*0x105]=0x1385*-0x2+-0x201a+0x4724,_0x2d2a4c[-0x28+0x81*0x23+-0x116e]=-0x357+-0x66e*0x6+0x1*0x29eb,_0x2d2a4c[0x147e+-0x1*-0x1ca5+-0x3115]=0x69*0x51+-0xd4+-0x2065,_0x2d2a4c[0x16*-0xb9+-0x256*0xd+0x2e53]=-0x1e8*0x4+0x2487*-0x1+0x2c28,this;}['setViewpor'+'t'](_0x273875,_0x4ad1d1,_0x3e9458,_0x42c1eb){const _0x566072=this['data'];return _0x566072[0x1*-0x1007+-0x146e+0x2475]=_0x3e9458*(-0x11*-0x20b+-0x2a5*-0x6+0x3299*-0x1+0.5),_0x566072[0x2*0xd49+-0xe37+-0xc5a]=0x189b+-0x13a8+0xb5*-0x7,_0x566072[0xe+-0xc96+0xc8a]=0x18fd+0xfc9*0x1+-0x28c6,_0x566072[0x17b7+-0xaae+-0xd06]=0x25f3+0x1d39+-0x432c,_0x566072[0x2f8+-0x5*-0x35b+-0x13bb]=-0x165e+-0x2328+-0x18e*-0x25,_0x566072[-0xd0f*0x2+0x15c0+0x463]=_0x42c1eb*(-0x41b*0x6+-0x2033*0x1+0x38d5+0.5),_0x566072[0x3*-0x295+0x1c09*0x1+-0x1444]=-0x122+0x1e2d+-0x5*0x5cf,_0x566072[0xf3f*-0x2+-0x2508+0x438d]=-0xae8+-0xc0*-0x30+-0x1918,_0x566072[-0xb55+0x1*0x16de+-0xb81]=-0x20b*0xa+0x5fd*-0x3+0x2665,_0x566072[-0xfd1*0x1+-0x3*0x1e5+0x1589]=-0x1b1*-0x17+-0xfe0+0x2d*-0x83,_0x566072[0x8*0x449+-0x26a0+0x462]=0x484+0x1365+-0x17e9+0.5,_0x566072[0x120a+-0x1c7d+0x53f*0x2]=-0x103b+-0xb3f+-0x1*-0x1b7a,_0x566072[0x16eb+0x5*-0x7a5+0x2*0x7ad]=_0x273875+_0x3e9458*(0x7*0x50b+-0x26ae*-0x1+0x49fb*-0x1+0.5),_0x566072[0x193a+0x9d7*0x1+-0x2304]=_0x4ad1d1+_0x42c1eb*(-0xa9*-0x29+0x9b0+-0x24c1+0.5),_0x566072[-0x1b51+0x1d7b+0x1*-0x21c]=0x1*0xbfe+0xe86*0x2+-0x26a*0x11+0.5,_0x566072[-0x1079*-0x2+0xd*-0x2ef+0x540]=-0x1*-0x20d6+0xe5f+-0x2f34,this;}['setReflect'+'ion'](_0x1f2c22,_0x845cd5){const _0x3ec82d=_0x1f2c22['x'],_0x3b03a0=_0x1f2c22['y'],_0x4a9012=_0x1f2c22['z'],_0xe2da41=this['data'];return _0xe2da41[0x335+-0x5*-0x22c+0xe11*-0x1]=-0x43*0x8d+0x1026+0x14c2-(-0x1afa+0x1d4e+-0x2*0x129)*_0x3ec82d*_0x3ec82d,_0xe2da41[0x1180+-0x4*-0x89e+-0x33f7]=-(0x8*0x30+-0xaa9+0x92b)*_0x3ec82d*_0x3b03a0,_0xe2da41[0x69*0x3e+-0xa07+-0xf65]=-(0xd88+-0x1f98+-0x1212*-0x1)*_0x3ec82d*_0x4a9012,_0xe2da41[-0x192f+0x9f6+0x3c*0x41]=0x77*-0x37+-0x7*0x2b7+0x2c92,_0xe2da41[-0xec*0x29+0x1*-0x1e15+0x43e5]=-(-0x8df+0x25a4+-0x1*0x1cc3)*_0x3ec82d*_0x3b03a0,_0xe2da41[-0x7f7+-0x1*-0x103+0xff*0x7]=0x1*-0x10a3+-0x1364+-0x4*-0x902-(-0x1756+-0xd7e+0x24d6)*_0x3b03a0*_0x3b03a0,_0xe2da41[0x1*-0xa70+-0x1319*0x1+0x1d8f]=-(-0x2a8+0x1503+-0x1*0x1259)*_0x3b03a0*_0x4a9012,_0xe2da41[-0x148d+-0x13cf+-0x7*-0x5c5]=-0x4ae*0x1+-0x409+-0x8b7*-0x1,_0xe2da41[-0x2*-0xbe8+-0x24c7+0x1*0xcff]=-(-0x1*-0x127d+-0x6*0x16b+-0x25*0x45)*_0x3ec82d*_0x4a9012,_0xe2da41[-0x10c*-0x24+-0x29b*0x2+-0x5*0x67d]=-(-0x75*-0x10+-0x119*0x21+0x1ceb)*_0x3b03a0*_0x4a9012,_0xe2da41[-0x1cef+-0x2209*0x1+0xc9a*0x5]=-0x2*-0x1160+0x465+-0x2724-(-0x676*0x4+0x67b+0x135f)*_0x4a9012*_0x4a9012,_0xe2da41[0x3*-0x920+0x710*0x1+-0xc1*-0x1b]=-0x2*-0x719+0x8*-0x4b1+0x3a*0x67,_0xe2da41[-0x4ff*-0x1+0x23e*-0x3+0x1c7]=-(-0xe95+0x21c6+0x665*-0x3)*_0x3ec82d*_0x845cd5,_0xe2da41[0xcaf+0x1*-0x6da+-0x5c8]=-(0x1bdd+-0xff8+-0x1*0xbe3)*_0x3b03a0*_0x845cd5,_0xe2da41[-0x1814+0x4e*0x5b+-0x398]=-(-0x6*0xb+-0x1*0xa61+0xaa5)*_0x4a9012*_0x845cd5,_0xe2da41[-0x6fc*-0x4+0x442+-0x2023]=0x14f+0x990+-0xade,this;}['invert'](_0x26bf1b=this){const _0x4e8434=_0x26bf1b['data'],_0x5475a6=_0x4e8434[0x1a24+-0x1e72+0x44e],_0x4115d4=_0x4e8434[0x98e*0x1+0x13d*-0x14+-0x30b*-0x5],_0x51e3a1=_0x4e8434[-0x20d4+-0x578+0x264e],_0x3bf777=_0x4e8434[0x66*0x1d+0x772*0x3+-0x21e1],_0x1b8ecb=_0x4e8434[0x1a48+0x1b49+-0x1*0x358d],_0x1ec1b0=_0x4e8434[0x1086+0x1b72+-0x2bf3],_0x2fe43=_0x4e8434[-0x136b+-0x10ce+0x1*0x243f],_0x3d2a59=_0x4e8434[-0x49*0x52+-0x1d1b*0x1+0x3484],_0x518127=_0x4e8434[-0x814+0x133*-0x3+0xbb5],_0x5a4189=_0x4e8434[0x334+-0x1286+0xf5b],_0x46fa1c=_0x4e8434[-0x1330+-0x1*-0x1237+0x25*0x7],_0x18ef0d=_0x4e8434[0x1345*0x1+-0x25db*0x1+0x12a1],_0x5a051e=_0x4e8434[-0x44d*-0x7+-0xa60*0x2+-0x94f*0x1],_0x15d179=_0x4e8434[-0x17bf+0x2b*-0x97+0x3129],_0x58d2eb=_0x4e8434[0x2*0x79d+0x1c1b+-0x2b47],_0x53b0e9=_0x4e8434[0x2572*0x1+0x1*0xe17+-0x337a],_0x1ed50e=_0x5475a6*_0x1ec1b0-_0x4115d4*_0x1b8ecb,_0x57a311=_0x5475a6*_0x2fe43-_0x51e3a1*_0x1b8ecb,_0x5b5c04=_0x5475a6*_0x3d2a59-_0x3bf777*_0x1b8ecb,_0x572cc8=_0x4115d4*_0x2fe43-_0x51e3a1*_0x1ec1b0,_0x56c645=_0x4115d4*_0x3d2a59-_0x3bf777*_0x1ec1b0,_0x4b2da7=_0x51e3a1*_0x3d2a59-_0x3bf777*_0x2fe43,_0x3a3d6b=_0x518127*_0x15d179-_0x5a4189*_0x5a051e,_0x3e6992=_0x518127*_0x58d2eb-_0x46fa1c*_0x5a051e,_0x8f9247=_0x518127*_0x53b0e9-_0x18ef0d*_0x5a051e,_0x5f03e4=_0x5a4189*_0x58d2eb-_0x46fa1c*_0x15d179,_0x261874=_0x5a4189*_0x53b0e9-_0x18ef0d*_0x15d179,_0x54a1d5=_0x46fa1c*_0x53b0e9-_0x18ef0d*_0x58d2eb,_0x3d3cbb=_0x1ed50e*_0x54a1d5-_0x57a311*_0x261874+_0x5b5c04*_0x5f03e4+_0x572cc8*_0x8f9247-_0x56c645*_0x3e6992+_0x4b2da7*_0x3a3d6b;if(_0x3d3cbb===0x19c5+0x5*-0x66e+0x661)this['setIdentit'+'y']();else{const _0xe6608d=(-0x13c9+-0x3aa+0x1774)/_0x3d3cbb,_0x362745=this['data'];_0x362745[0xf*-0x167+-0x26c3*-0x1+0x11ba*-0x1]=(_0x1ec1b0*_0x54a1d5-_0x2fe43*_0x261874+_0x3d2a59*_0x5f03e4)*_0xe6608d,_0x362745[-0x1f2a+0x2*0xa1f+0x1*0xaed]=(-_0x4115d4*_0x54a1d5+_0x51e3a1*_0x261874-_0x3bf777*_0x5f03e4)*_0xe6608d,_0x362745[-0x159b+0x4f0*-0x1+0x1a8d]=(_0x15d179*_0x4b2da7-_0x58d2eb*_0x56c645+_0x53b0e9*_0x572cc8)*_0xe6608d,_0x362745[-0x2*0xaa8+-0x941+-0xf4a*-0x2]=(-_0x5a4189*_0x4b2da7+_0x46fa1c*_0x56c645-_0x18ef0d*_0x572cc8)*_0xe6608d,_0x362745[-0x9e2+-0x67*-0x4b+0x1447*-0x1]=(-_0x1b8ecb*_0x54a1d5+_0x2fe43*_0x8f9247-_0x3d2a59*_0x3e6992)*_0xe6608d,_0x362745[0x39*0x81+-0x2214*0x1+0x560]=(_0x5475a6*_0x54a1d5-_0x51e3a1*_0x8f9247+_0x3bf777*_0x3e6992)*_0xe6608d,_0x362745[0x9a2+0x8*-0x48c+0x1ac4]=(-_0x5a051e*_0x4b2da7+_0x58d2eb*_0x5b5c04-_0x53b0e9*_0x57a311)*_0xe6608d,_0x362745[-0x1*-0x1df7+0x6*0x43f+0xad*-0x52]=(_0x518127*_0x4b2da7-_0x46fa1c*_0x5b5c04+_0x18ef0d*_0x57a311)*_0xe6608d,_0x362745[-0x11de*-0x1+0x2068+-0x323e]=(_0x1b8ecb*_0x261874-_0x1ec1b0*_0x8f9247+_0x3d2a59*_0x3a3d6b)*_0xe6608d,_0x362745[0x1a21+0x653*-0x1+-0x697*0x3]=(-_0x5475a6*_0x261874+_0x4115d4*_0x8f9247-_0x3bf777*_0x3a3d6b)*_0xe6608d,_0x362745[0x1621+0x7a5+-0x1dbc*0x1]=(_0x5a051e*_0x56c645-_0x15d179*_0x5b5c04+_0x53b0e9*_0x1ed50e)*_0xe6608d,_0x362745[-0x139f+0x216d+-0xdc3]=(-_0x518127*_0x56c645+_0x5a4189*_0x5b5c04-_0x18ef0d*_0x1ed50e)*_0xe6608d,_0x362745[0x5ac+0x150*0x1a+-0x27c0]=(-_0x1b8ecb*_0x5f03e4+_0x1ec1b0*_0x3e6992-_0x2fe43*_0x3a3d6b)*_0xe6608d,_0x362745[0x148f+0x25*-0x8e+-0x2*-0x2]=(_0x5475a6*_0x5f03e4-_0x4115d4*_0x3e6992+_0x51e3a1*_0x3a3d6b)*_0xe6608d,_0x362745[0x3*-0x26+-0x961+-0x9e1*-0x1]=(-_0x5a051e*_0x572cc8+_0x15d179*_0x57a311-_0x58d2eb*_0x1ed50e)*_0xe6608d,_0x362745[-0x12ee*0x2+0xec9+-0x3f*-0x5e]=(_0x518127*_0x572cc8-_0x5a4189*_0x57a311+_0x46fa1c*_0x1ed50e)*_0xe6608d;}return this;}['set'](_0x2ca17c){const _0x29cea6=this['data'];return _0x29cea6[0x30c+0x2b8*-0x1+-0x54]=_0x2ca17c[-0x305+0xd*-0x47+-0x8*-0xd4],_0x29cea6[-0x2283+0x4af*-0x1+0x45b*0x9]=_0x2ca17c[-0x47f*-0x1+-0x120d+0xd8f],_0x29cea6[0x16ae+-0x33*0x5+-0x15ad]=_0x2ca17c[-0x97*-0x37+0x151*0x12+-0x3821],_0x29cea6[-0x287*0xd+0x6e5+0x6d*0x3d]=_0x2ca17c[0x1130+0x8*0x1c0+-0x1f2d],_0x29cea6[-0x559*-0x6+-0x1*-0x1778+-0x378a]=_0x2ca17c[-0x4*-0x4d8+0xe08+-0x2164],_0x29cea6[0x15ce+0x20ef*0x1+-0x36b8]=_0x2ca17c[0xab6+-0x1143+0x692],_0x29cea6[-0x21b8+0x1*-0xbf3+0x2db1]=_0x2ca17c[-0x4d*-0x1+-0x53*0x3f+0x1426],_0x29cea6[0x1*-0x186e+0x2638+0xdc3*-0x1]=_0x2ca17c[-0x1562+0x727+-0x32*-0x49],_0x29cea6[-0xb12+-0x9d*0x2b+0x2579*0x1]=_0x2ca17c[-0x1a4b+0x26*-0x5+0x1b11],_0x29cea6[-0x1131+-0xd2b+0x1*0x1e65]=_0x2ca17c[-0xa40+0xd*0x113+0x2*-0x1d7],_0x29cea6[0x1a16+-0x2*0x291+0x2*-0xa75]=_0x2ca17c[0x2*0x6da+-0xdca+0x20],_0x29cea6[-0x2488+-0x457*0x9+0x4ba2]=_0x2ca17c[-0x26*0x16+0x1*-0x1d17+0x179*0x16],_0x29cea6[0x26+0x1*-0x1024+0x100a*0x1]=_0x2ca17c[-0x253e+0x24a6+0xa4],_0x29cea6[0x1ee5+0x9ac+-0x1*0x2884]=_0x2ca17c[-0x2170+-0x949*0x3+0x12e*0x34],_0x29cea6[-0xd56+-0x2ad+0x1011]=_0x2ca17c[0x1*-0x139+0x101e+-0xed7],_0x29cea6[-0x1*0xb5a+-0x23dd+0x2f46]=_0x2ca17c[0xed6+0x1*0x2479+-0x3340],this;}['setIdentit'+'y'](){const _0x113de9=this['data'];return _0x113de9[0x708+-0xd0*-0x1+-0x7d8]=0xc5d+-0xb30+-0x14*0xf,_0x113de9[-0x612+0x196c+-0x1359]=-0x20*0x74+0x14c6+-0x646,_0x113de9[-0x18ef*-0x1+-0x1c8f+-0x3e*-0xf]=-0x9cf+-0x1*0x30a+0xcd9,_0x113de9[0x20b2+0x2f2+-0x7*0x517]=-0x711*-0x2+0x61f+0x1*-0x1441,_0x113de9[-0x280+0x265c+-0x23d8]=-0xb8e+-0x233d+0x9*0x533,_0x113de9[-0x1728+-0x1*0x1f+0x8e*0x2a]=0x11b0+-0x18de+0x72f*0x1,_0x113de9[-0x49*-0x29+-0x17c6+0xc1b]=0x25b4+0x1d5+0x1d*-0x15d,_0x113de9[0x1bc3+-0x45*-0x7f+0x1d*-0x223]=-0x3b9*-0x4+-0x1*-0x1597+-0x11b*0x21,_0x113de9[0x2*0xef7+-0x253d+0x757]=-0x4*0xc9+0xe*0x29b+-0x2156,_0x113de9[-0x767+-0x1c91+0x2401*0x1]=0xc*-0x178+-0x93*-0x7+0xd9b,_0x113de9[-0x8af+-0x2119+0xca*0x35]=-0x21*0x117+0x2038*0x1+-0x60*-0xa,_0x113de9[0x414+-0x2273*0x1+-0xe5*-0x22]=-0x3*0x4fe+-0x2dd*0x7+0x32f*0xb,_0x113de9[-0x1*0x1a81+0x63d*0x1+0x1450]=0x1320+0x1d3*0xf+-0x2e7d,_0x113de9[-0x3*0x56a+0x9b*-0x29+-0x13*-0x22a]=0x297+0x72+-0x309,_0x113de9[0x1324+0x2d1*0x5+-0x212b]=0xd47+-0x2128+0x13e1*0x1,_0x113de9[-0x18c+-0x228b+0x2426]=-0x75*0x4c+-0x1*-0x13a+0x17*0x175,this;}['setTRS'](_0x255b33,_0x2490bc,_0x179a5c){const _0x31ba1a=_0x2490bc['x'],_0xc90165=_0x2490bc['y'],_0x408f6c=_0x2490bc['z'],_0xb4d8a1=_0x2490bc['w'],_0x40c679=_0x179a5c['x'],_0x155eda=_0x179a5c['y'],_0x54dc29=_0x179a5c['z'],_0x164fe8=_0x31ba1a+_0x31ba1a,_0x28e0a6=_0xc90165+_0xc90165,_0x5421dd=_0x408f6c+_0x408f6c,_0x173ac0=_0x31ba1a*_0x164fe8,_0x2bb0c5=_0x31ba1a*_0x28e0a6,_0x15c52a=_0x31ba1a*_0x5421dd,_0x8fb764=_0xc90165*_0x28e0a6,_0x93a7b9=_0xc90165*_0x5421dd,_0x4d6d7e=_0x408f6c*_0x5421dd,_0x35f593=_0xb4d8a1*_0x164fe8,_0x87223f=_0xb4d8a1*_0x28e0a6,_0x34d305=_0xb4d8a1*_0x5421dd,_0x3f3801=this['data'];return _0x3f3801[0x2094+0x581*-0x2+0xb*-0x1f6]=(-0x1204+0x13f3+-0x13*0x1a-(_0x8fb764+_0x4d6d7e))*_0x40c679,_0x3f3801[-0x2343+0x1455*-0x1+0x3799]=(_0x2bb0c5+_0x34d305)*_0x40c679,_0x3f3801[0xd0c+-0x1f9a+0x1290]=(_0x15c52a-_0x87223f)*_0x40c679,_0x3f3801[0x1d91+0xf3a+-0x1*0x2cc8]=-0xdda+-0xfa7+0x1*0x1d81,_0x3f3801[-0x2*-0x72b+-0x1*-0x359+0x1*-0x11ab]=(_0x2bb0c5-_0x34d305)*_0x155eda,_0x3f3801[-0xe9*0x18+-0x15da*0x1+-0x24d*-0x13]=(-0x880+0x1b99+-0x1318-(_0x173ac0+_0x4d6d7e))*_0x155eda,_0x3f3801[-0x343+0x679+-0x330]=(_0x93a7b9+_0x35f593)*_0x155eda,_0x3f3801[-0xc0b+0x10d*-0x16+0x2330]=-0x10f7*-0x2+0x2420+-0x460e,_0x3f3801[-0x8b+0x3*0xbab+-0x4e*0x71]=(_0x15c52a+_0x87223f)*_0x54dc29,_0x3f3801[-0x32f*0x3+-0x2020+0x29b6]=(_0x93a7b9-_0x35f593)*_0x54dc29,_0x3f3801[-0x1*-0xc1d+0x1954+0x5*-0x77b]=(0x1522+0x1543*0x1+0x2a64*-0x1-(_0x173ac0+_0x8fb764))*_0x54dc29,_0x3f3801[-0x1860+-0x3*0x13f+0x1c28]=0x13ce+0xbb9*-0x1+-0x815,_0x3f3801[-0x1*0x1685+0x2*-0xb5d+0x2d4b]=_0x255b33['x'],_0x3f3801[-0x2681+0x2*0x12bf+-0x4*-0x44]=_0x255b33['y'],_0x3f3801[0x1*0x20e3+-0x6d*-0x43+0x51d*-0xc]=_0x255b33['z'],_0x3f3801[0x4*0x4b+-0x8*0xb5+0x48b]=-0x157d+-0x7*-0x377+0x1*-0x2c3,this;}['transpose'](_0xf4558c=this){const _0x18ec10=_0xf4558c['data'],_0x387d62=this['data'];if(_0x18ec10===_0x387d62){let _0x49e578;_0x49e578=_0x18ec10[0x1809+0x1022+0x1*-0x282a],_0x387d62[0x3b*0x1d+0x262c+0x2cda*-0x1]=_0x18ec10[-0xa99+0x1b60+-0x10c3*0x1],_0x387d62[-0x8*-0x27b+0x1*-0x21ea+0x6*0x259]=_0x49e578,_0x49e578=_0x18ec10[-0xb3b+0x3*-0x2ae+0x66d*0x3],_0x387d62[0x19e*0x7+-0x1*-0x2565+0x151*-0x25]=_0x18ec10[-0x1*0x79d+0x12a7+-0xb02],_0x387d62[-0x55c*-0x2+-0xec*0x15+0x8ac]=_0x49e578,_0x49e578=_0x18ec10[-0x139*0x6+-0x1183*-0x1+-0x2*0x515],_0x387d62[0x2*-0x12b3+0x1*0xa11+0x1b58]=_0x18ec10[-0x1ab4+-0x2135+0x3bf5*0x1],_0x387d62[-0x254+-0x1d*-0xc+0x104]=_0x49e578,_0x49e578=_0x18ec10[0x1*-0x3a0+0x38c*0x7+-0x152e],_0x387d62[-0x3*-0x449+0x11*-0x1e1+0x131c]=_0x18ec10[-0x7*-0x2d1+0x530+-0x84a*0x3],_0x387d62[-0xe7e+-0xc2d+-0x1*-0x1ab4]=_0x49e578,_0x49e578=_0x18ec10[-0x217a+0xfc6+-0x11bb*-0x1],_0x387d62[-0xa4*-0x3a+-0x2362+-0x1bf]=_0x18ec10[0x45d*0x4+-0x1ab9+0x952],_0x387d62[0x1944+0x5fe*-0x6+0xabd]=_0x49e578,_0x49e578=_0x18ec10[-0x2230+-0x1091*-0x1+0x11aa],_0x387d62[0x3b7+0x2514+-0x28c0]=_0x18ec10[0x161d+0x23e*0x2+-0x1a8b],_0x387d62[-0x1*0x9d+-0xa42+0xaed]=_0x49e578;}else _0x387d62[0x1*-0x5aa+0x87b*-0x3+0x1f1b]=_0x18ec10[0xd23*0x1+0x1c92*-0x1+0xf6f*0x1],_0x387d62[-0xce3*0x3+0x1506+0x11a4]=_0x18ec10[0x1a7c*-0x1+-0x11e6+0x2c66],_0x387d62[0x939+0x29*0x2b+-0x101a]=_0x18ec10[0x7*0x44f+-0x27*0x11+-0xf*0x1d6],_0x387d62[0x17+0x1a20+-0x1a34]=_0x18ec10[-0x1*0x9b+0x3f3*-0x5+0x7*0x2ea],_0x387d62[-0xb*-0x201+-0x1c50+0x649]=_0x18ec10[-0xab3+-0x1c1*0x13+0x2c07],_0x387d62[-0x1d87*0x1+-0x1*0x2047+0x3dd3]=_0x18ec10[0x265a+-0x8*-0x112+-0x157*0x23],_0x387d62[0xf2*-0x25+0x54+0x22ac]=_0x18ec10[-0x2317+0x52a+0x1df6],_0x387d62[0x139a+0x25e9+0x11b*-0x34]=_0x18ec10[-0xcaf+-0x2487*-0x1+-0x17cb],_0x387d62[-0x9*-0x35e+-0x2133+0x7*0x6b]=_0x18ec10[-0x1*-0x222b+-0x12*0xe1+-0x1257],_0x387d62[0x421*-0x2+0x1*0x2172+-0x1927]=_0x18ec10[-0x226a*0x1+-0x4*0x2d1+0x1a*0x1c2],_0x387d62[0x4d9+-0x789+0x2ba*0x1]=_0x18ec10[-0x5*-0x265+0x118d*-0x1+-0x59e*-0x1],_0x387d62[0x1933+0x9c4+0x2*-0x1176]=_0x18ec10[-0x1153+0x1a1f+0x45f*-0x2],_0x387d62[-0x14*0x16e+-0x57b*0x1+-0x1*-0x221f]=_0x18ec10[-0x377+-0x1fa0+-0x2*-0x118d],_0x387d62[-0x23ee+0x18df*-0x1+0x3cda*0x1]=_0x18ec10[0x194a+0x97*-0x13+-0xe0e],_0x387d62[-0x23a7+-0x1e6+-0x259b*-0x1]=_0x18ec10[-0x1*-0xe1e+0xc92*-0x1+-0x181],_0x387d62[0x1ca2+-0x215d+0x4ca*0x1]=_0x18ec10[-0x1fb6+-0x1*-0x18bd+-0x12c*-0x6];return this;}['getTransla'+'tion'](_0x2a7d6e=new D()){return _0x2a7d6e['set'](this['data'][-0x783+0x24b9+-0x1d2a],this['data'][-0xbf9*0x1+0x9*-0x24+-0x2*-0x6a5],this['data'][-0x16c6+-0x145a+0x2b2e]);}['getX'](_0x4f91a5=new D()){return _0x4f91a5['set'](this['data'][-0x243f*0x1+-0x7*0x221+0x1993*0x2],this['data'][0x6c8+0x1*0x2f9+-0x9c0],this['data'][0x7*-0x551+0xa8a+0x1aaf]);}['getY'](_0x567ffc=new D()){return _0x567ffc['set'](this['data'][0x8a8+-0x249e+0x1bfa],this['data'][-0x5*0x591+0x160f+0x1*0x5cb],this['data'][-0x23e3+0x2421+-0x38]);}['getZ'](_0x3bbd05=new D()){return _0x3bbd05['set'](this['data'][0x2213+0xb1*0x35+0x18*-0x2f2],this['data'][0x3b1+-0x30*-0x82+-0x1c08],this['data'][0x1508+0xce4+-0x10f1*0x2]);}['getScale'](_0x45b609=new D()){return this['getX'](Rs),this['getY'](Js),this['getZ'](ei),_0x45b609['set'](Rs['length'](),Js['length'](),ei['length']()),_0x45b609;}get['scaleSign'](){return this['getX'](Rs),this['getY'](Js),this['getZ'](ei),Rs['cross'](Rs,Js),Rs['dot'](ei)<0x1*-0x26dd+0x4d3+0x220a?-(-0x5e+0x25*0x3d+0x2f*-0x2e):0xa98+-0x3d*-0x61+0x59e*-0x6;}['setFromEul'+'erAngles'](_0xd02e18,_0x11cf33,_0x12a66e){_0xd02e18*=Y['DEG_TO_RAD'],_0x11cf33*=Y['DEG_TO_RAD'],_0x12a66e*=Y['DEG_TO_RAD'];const _0x396d73=Math['sin'](-_0xd02e18),_0x2aa224=Math['cos'](-_0xd02e18),_0x1ff0b8=Math['sin'](-_0x11cf33),_0x37e054=Math['cos'](-_0x11cf33),_0x3c180c=Math['sin'](-_0x12a66e),_0x2d9db3=Math['cos'](-_0x12a66e),_0x574541=this['data'];return _0x574541[0x118*0x2+0x1*0x1ea9+-0x20d9]=_0x37e054*_0x2d9db3,_0x574541[0x1d5*-0x3+-0x1935+0x1eb5]=-_0x37e054*_0x3c180c,_0x574541[-0x1348+-0x63*-0x16+0xac8]=_0x1ff0b8,_0x574541[0x1871+0xf5+-0x1963]=-0x21*-0x11b+0xbae+-0x1*0x3029,_0x574541[0x5b5*0x1+-0x1af9+0x1548]=_0x2aa224*_0x3c180c+_0x2d9db3*_0x396d73*_0x1ff0b8,_0x574541[0xc0c+-0x1a7a+0xe73]=_0x2aa224*_0x2d9db3-_0x396d73*_0x1ff0b8*_0x3c180c,_0x574541[-0x1*-0x1826+0x2*0x7b9+-0x2792]=-_0x37e054*_0x396d73,_0x574541[-0x61*-0x1d+0x25c3*-0x1+-0x3*-0x8ef]=0x1ac3+0x1*0x1aa7+-0x356a,_0x574541[0x2c*0x6f+-0x1b10+-0x804*-0x1]=_0x396d73*_0x3c180c-_0x2aa224*_0x2d9db3*_0x1ff0b8,_0x574541[0x144f+0x29*0x3d+0x1*-0x1e0b]=_0x2d9db3*_0x396d73+_0x2aa224*_0x1ff0b8*_0x3c180c,_0x574541[-0x1*-0xa6f+0x10ee+-0x577*0x5]=_0x2aa224*_0x37e054,_0x574541[0x13f*-0x5+-0x839+0xe7f]=-0xf8c+0x2141*0x1+-0x11b5,_0x574541[-0xf9*-0x13+-0x22f3+-0xe*-0x12e]=0x30*-0x99+-0x1*0xe95+0x2b45,_0x574541[0x2f*-0x67+-0x1ca3*-0x1+0x1*-0x9ad]=0x14b3*-0x1+-0x1fc*-0xe+-0x715,_0x574541[-0x1a0+0xb8*0x2+0x3e]=-0xa26+0x53b+0x1*0x4eb,_0x574541[0x8*0x3b9+0x3*-0x3ff+-0x11bc]=-0x1b5*-0x5+0x2*-0x2e8+-0x2b8,this;}['getEulerAn'+'gles'](_0x54e0a2=new D()){this['getScale'](Dl);const _0x258f18=Dl['x'],_0x1164f0=Dl['y'],_0x1eb7d4=Dl['z'];if(_0x258f18===-0x2e*0x7+0x21ff+-0x1d*0x121||_0x1164f0===0xc20+0x1*-0x89f+0x12b*-0x3||_0x1eb7d4===-0x21e4+0x472+0x1d72)return _0x54e0a2['set'](-0x2361+0x44e+0x1f13,-0x1*-0x1b4e+-0xaac+-0x10a2,0xb3e*-0x3+-0x1ffb+0x41b5);const _0x5951cd=this['data'],_0x3da51d=Math['asin'](-_0x5951cd[-0x1da5+0x6*-0x58c+0x3eef]/_0x258f18),_0x2861c1=Math['PI']*(-0x233*-0x1+0x1fe6+-0x2219+0.5);let _0x4140a7,_0x45d44b;return _0x3da51d<_0x2861c1?_0x3da51d>-_0x2861c1?(_0x4140a7=Math['atan2'](_0x5951cd[0x2531+-0x1836+-0xcf5]/_0x1164f0,_0x5951cd[-0x6b*-0x31+-0x1f61+-0x50*-0x23]/_0x1eb7d4),_0x45d44b=Math['atan2'](_0x5951cd[0xfca+-0x2d3+0x1*-0xcf6]/_0x258f18,_0x5951cd[0x1933+-0x1423+0x30*-0x1b]/_0x258f18)):(_0x45d44b=0x22b1+0x36*-0x88+-0x601,_0x4140a7=-Math['atan2'](_0x5951cd[-0xb9d+0xc6a+-0xc9]/_0x1164f0,_0x5951cd[0x15*-0xdf+-0x11*0x6d+0x1*0x198d]/_0x1164f0)):(_0x45d44b=-0x2*0xa85+-0xfb1+0x24bb,_0x4140a7=Math['atan2'](_0x5951cd[0x2264+0x16c*-0x3+-0x1e1c]/_0x1164f0,_0x5951cd[-0x671+-0x2225+0x13b*0x21]/_0x1164f0)),_0x54e0a2['set'](_0x4140a7,_0x3da51d,_0x45d44b)['mulScalar'](Y['RAD_TO_DEG']);}['toString'](){return'['+this['data']['join'](',\x20')+']';}};h(jr,'IDENTITY',Object['freeze'](new jr())),h(jr,'ZERO',Object['freeze'](new jr()['set']([-0xc0e+0x157*0x10+-0x4b1*0x2,0x5*0x346+0x1acd+-0x101*0x2b,0x1ad8+-0x15*-0x1+-0x1aed,-0x2009*-0x1+-0x22d6+0x2cd,-0x151*-0x1d+-0x2db*0x3+0x767*-0x4,-0x256c+-0x2f3+0x285f,0x2331+-0x1f72*0x1+-0x3bf,-0x879+0x1*0x1f5+0x684,0x3fa*0x5+-0x656*0x1+-0xd8c,0x18e0+0xbc9+-0x755*0x5,0x59*0x47+0x17ad+-0x305c,-0x8*0x439+-0x51b*-0x5+0x841,-0x7*-0x455+0x127c+-0x30cf,-0x15*0x7f+0xd*-0xe3+0xaf9*0x2,-0x262c+-0x12d2*-0x1+0x135a,-0x1*0x5e1+0x802*-0x4+0x3*0xca3])));let te=jr;const dn=class dn{constructor(_0x47fbf4=-0x1*0x1b1f+0x78*0x53+-0xbc9,_0x4ed5d6=0x1f55+0x849+0x2*-0x13cf,_0x7d73f8=0x4*0x4be+0x4d+-0x1345,_0x28ca97=0x1*-0x1775+0x1e0e+-0x698){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x47fbf4['length']===0x167+0x1*-0x1899+0x2*0xb9b?(this['x']=_0x47fbf4[0x5d*0x21+0x1*0xb29+0x1*-0x1726],this['y']=_0x47fbf4[0x1108+-0xee4+-0x1*0x223],this['z']=_0x47fbf4[-0xd5b+0x989+0x3d4],this['w']=_0x47fbf4[0x214f*0x1+0x70+-0x22*0xfe]):(this['x']=_0x47fbf4,this['y']=_0x4ed5d6,this['z']=_0x7d73f8,this['w']=_0x28ca97);}['clone'](){const _0x4e6239=this['constructo'+'r'];return new _0x4e6239(this['x'],this['y'],this['z'],this['w']);}['conjugate'](_0x4223ed=this){return this['x']=_0x4223ed['x']*-(0x7c4+0x1baf*0x1+0x2ba*-0xd),this['y']=_0x4223ed['y']*-(0x1eb6+-0x606+-0x47*0x59),this['z']=_0x4223ed['z']*-(0x2c2*0x3+0x18b5+-0x20fa),this['w']=_0x4223ed['w'],this;}['copy'](_0x14c95e){return this['x']=_0x14c95e['x'],this['y']=_0x14c95e['y'],this['z']=_0x14c95e['z'],this['w']=_0x14c95e['w'],this;}['dot'](_0x36ff7e){return this['x']*_0x36ff7e['x']+this['y']*_0x36ff7e['y']+this['z']*_0x36ff7e['z']+this['w']*_0x36ff7e['w'];}['equals'](_0x5c4ec5){return this['x']===_0x5c4ec5['x']&&this['y']===_0x5c4ec5['y']&&this['z']===_0x5c4ec5['z']&&this['w']===_0x5c4ec5['w'];}['equalsAppr'+'ox'](_0x3ec330,_0xa6a86c=-0xc5f+-0xd6*0x10+0x19bf+0.000001){return Math['abs'](this['x']-_0x3ec330['x'])<_0xa6a86c&&Math['abs'](this['y']-_0x3ec330['y'])<_0xa6a86c&&Math['abs'](this['z']-_0x3ec330['z'])<_0xa6a86c&&Math['abs'](this['w']-_0x3ec330['w'])<_0xa6a86c;}['getAxisAng'+'le'](_0x15ea81){let _0x4cbec1=Math['acos'](this['w'])*(0x107*-0x3+0x3db+-0x31*0x4);const _0x336fa8=Math['sin'](_0x4cbec1/(0x17c0+-0x2004+-0x1*-0x846));return _0x336fa8!==-0x2*0x740+-0x4c7+0x15*0xeb?(_0x15ea81['x']=this['x']/_0x336fa8,_0x15ea81['y']=this['y']/_0x336fa8,_0x15ea81['z']=this['z']/_0x336fa8,(_0x15ea81['x']<-0x1*-0x1af0+0x1a5*-0x1+0x5*-0x50f||_0x15ea81['y']<0x2674+0x27*-0x1d+-0x2209||_0x15ea81['z']<-0x413*0x9+0x1768+0xd43)&&(_0x15ea81['x']*=-(0x17*0x166+0x24e1+-0x450a),_0x15ea81['y']*=-(-0xd7f*0x1+0x71*0x45+-0x10f5),_0x15ea81['z']*=-(-0x3*0xb6d+-0x1fe8+0x108c*0x4),_0x4cbec1*=-(-0x1*-0x1b6f+-0x1b75+0x7))):(_0x15ea81['x']=-0x112f+0x1a*-0x7d+-0xe1*-0x22,_0x15ea81['y']=0x1421+0x12fc+-0x20f*0x13,_0x15ea81['z']=-0x1ec8+-0x15b*0x13+0x161*0x29),_0x4cbec1*Y['RAD_TO_DEG'];}['getEulerAn'+'gles'](_0x4503e1=new D()){let _0x58d845,_0x13d592,_0x48d3b6;const _0x4ecd7a=this['x'],_0x594517=this['y'],_0x360b63=this['z'],_0x82cbcd=this['w'],_0x4a7e61=(-0x16b*-0xb+-0x10c5+0x12e)*(_0x82cbcd*_0x594517-_0x4ecd7a*_0x360b63);return _0x4a7e61<=-(0x8*-0x2e+0x1713*0x1+-0x15a3+0.99999)?(_0x58d845=(0x1985+-0x18e*-0x16+-0x3bb7*0x1)*Math['atan2'](_0x4ecd7a,_0x82cbcd),_0x13d592=-Math['PI']/(-0x730+-0xb*-0x321+-0x1b39),_0x48d3b6=-0x135f*0x1+-0x78f+0x1aee):_0x4a7e61>=0x998*-0x1+0x369+0x62f+0.99999?(_0x58d845=(0x2*0x5ec+0x419+0x1*-0xfef)*Math['atan2'](_0x4ecd7a,_0x82cbcd),_0x13d592=Math['PI']/(-0x49*-0x7f+-0x20a+-0x222b),_0x48d3b6=0x148+0x44*-0x15+-0x113*-0x4):(_0x58d845=Math['atan2']((0x16a9*0x1+-0x1d2f+0x688)*(_0x82cbcd*_0x4ecd7a+_0x594517*_0x360b63),-0xb4*-0x22+-0x6f7+-0x10f0-(0x3*-0x491+-0x511+0x12c6)*(_0x4ecd7a*_0x4ecd7a+_0x594517*_0x594517)),_0x13d592=Math['asin'](_0x4a7e61),_0x48d3b6=Math['atan2']((0x795*-0x4+-0x93+-0x1ee9*-0x1)*(_0x82cbcd*_0x360b63+_0x4ecd7a*_0x594517),-0xb*-0xae+-0x104d+-0x2*-0x46a-(-0x874+-0x22d0+-0xbf*-0x3a)*(_0x594517*_0x594517+_0x360b63*_0x360b63))),_0x4503e1['set'](_0x58d845,_0x13d592,_0x48d3b6)['mulScalar'](Y['RAD_TO_DEG']);}['invert'](_0x3143a9=this){return this['conjugate'](_0x3143a9)['normalize']();}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x5fc5ec,_0x4d2cb3,_0x8d4e1f){const _0x5bed5d=(-0x4a*0x1f+-0x2525+0xd*0x38c-_0x8d4e1f)*(_0x5fc5ec['dot'](_0x4d2cb3)<-0x5a2*0x5+0xa37+0x11f3?-(0x2c8+-0x1ea*0xe+-0x1805*-0x1):0x1*0x103+0xe6b+0xb*-0x167);return this['x']=_0x5fc5ec['x']*_0x5bed5d+_0x4d2cb3['x']*_0x8d4e1f,this['y']=_0x5fc5ec['y']*_0x5bed5d+_0x4d2cb3['y']*_0x8d4e1f,this['z']=_0x5fc5ec['z']*_0x5bed5d+_0x4d2cb3['z']*_0x8d4e1f,this['w']=_0x5fc5ec['w']*_0x5bed5d+_0x4d2cb3['w']*_0x8d4e1f,this['normalize']();}['mul'](_0x34e7b2){const _0x24034f=this['x'],_0x3f0d6a=this['y'],_0x2bd253=this['z'],_0x41cbc9=this['w'],_0x359e5=_0x34e7b2['x'],_0x27cabb=_0x34e7b2['y'],_0x4fbc06=_0x34e7b2['z'],_0x38dcb8=_0x34e7b2['w'];return this['x']=_0x41cbc9*_0x359e5+_0x24034f*_0x38dcb8+_0x3f0d6a*_0x4fbc06-_0x2bd253*_0x27cabb,this['y']=_0x41cbc9*_0x27cabb+_0x3f0d6a*_0x38dcb8+_0x2bd253*_0x359e5-_0x24034f*_0x4fbc06,this['z']=_0x41cbc9*_0x4fbc06+_0x2bd253*_0x38dcb8+_0x24034f*_0x27cabb-_0x3f0d6a*_0x359e5,this['w']=_0x41cbc9*_0x38dcb8-_0x24034f*_0x359e5-_0x3f0d6a*_0x27cabb-_0x2bd253*_0x4fbc06,this;}['mulScalar'](_0x2d582b,_0xa1a766=this){return this['x']=_0xa1a766['x']*_0x2d582b,this['y']=_0xa1a766['y']*_0x2d582b,this['z']=_0xa1a766['z']*_0x2d582b,this['w']=_0xa1a766['w']*_0x2d582b,this;}['mul2'](_0x1f6920,_0x25d7bc){const _0x122ef5=_0x1f6920['x'],_0x1c6157=_0x1f6920['y'],_0x3a6473=_0x1f6920['z'],_0x3346a1=_0x1f6920['w'],_0x4cd467=_0x25d7bc['x'],_0x8f9840=_0x25d7bc['y'],_0x44b535=_0x25d7bc['z'],_0x401a19=_0x25d7bc['w'];return this['x']=_0x3346a1*_0x4cd467+_0x122ef5*_0x401a19+_0x1c6157*_0x44b535-_0x3a6473*_0x8f9840,this['y']=_0x3346a1*_0x8f9840+_0x1c6157*_0x401a19+_0x3a6473*_0x4cd467-_0x122ef5*_0x44b535,this['z']=_0x3346a1*_0x44b535+_0x3a6473*_0x401a19+_0x122ef5*_0x8f9840-_0x1c6157*_0x4cd467,this['w']=_0x3346a1*_0x401a19-_0x122ef5*_0x4cd467-_0x1c6157*_0x8f9840-_0x3a6473*_0x44b535,this;}['normalize'](_0x1c5cd2=this){let _0x4c345f=_0x1c5cd2['length']();return _0x4c345f===0x20f8+0x4ef+0x1*-0x25e7?(this['x']=this['y']=this['z']=0xb9e+-0x12cf*0x1+0x731,this['w']=-0x2*0x6d9+0x11*-0x12d+0x21b0):(_0x4c345f=(-0x103b+0x1214+-0x76*0x4)/_0x4c345f,this['x']=_0x1c5cd2['x']*_0x4c345f,this['y']=_0x1c5cd2['y']*_0x4c345f,this['z']=_0x1c5cd2['z']*_0x4c345f,this['w']=_0x1c5cd2['w']*_0x4c345f),this;}['set'](_0x44a8f2,_0x3faa90,_0x527253,_0x44e725){return this['x']=_0x44a8f2,this['y']=_0x3faa90,this['z']=_0x527253,this['w']=_0x44e725,this;}['setFromAxi'+'sAngle'](_0x195b48,_0x141f8d){_0x141f8d*=(0x1a89*0x1+-0x1*0x19ab+-0xde+0.5)*Y['DEG_TO_RAD'];const _0x241818=Math['sin'](_0x141f8d),_0x1554c1=Math['cos'](_0x141f8d);return this['x']=_0x241818*_0x195b48['x'],this['y']=_0x241818*_0x195b48['y'],this['z']=_0x241818*_0x195b48['z'],this['w']=_0x1554c1,this;}['setFromEul'+'erAngles'](_0x30c644,_0xdbd999,_0xd29683){if(_0x30c644 instanceof D){const _0x19f92e=_0x30c644;_0x30c644=_0x19f92e['x'],_0xdbd999=_0x19f92e['y'],_0xd29683=_0x19f92e['z'];}const _0xddb4a8=(0x1206+0x1*0x2ce+-0x14d4+0.5)*Y['DEG_TO_RAD'];_0x30c644*=_0xddb4a8,_0xdbd999*=_0xddb4a8,_0xd29683*=_0xddb4a8;const _0x3a0036=Math['sin'](_0x30c644),_0x2ebaa1=Math['cos'](_0x30c644),_0x520e69=Math['sin'](_0xdbd999),_0x3c70f9=Math['cos'](_0xdbd999),_0x446673=Math['sin'](_0xd29683),_0x41a6ad=Math['cos'](_0xd29683);return this['x']=_0x3a0036*_0x3c70f9*_0x41a6ad-_0x2ebaa1*_0x520e69*_0x446673,this['y']=_0x2ebaa1*_0x520e69*_0x41a6ad+_0x3a0036*_0x3c70f9*_0x446673,this['z']=_0x2ebaa1*_0x3c70f9*_0x446673-_0x3a0036*_0x520e69*_0x41a6ad,this['w']=_0x2ebaa1*_0x3c70f9*_0x41a6ad+_0x3a0036*_0x520e69*_0x446673,this;}['setFromMat'+'4'](_0x3c92c7){const _0x12ccc3=_0x3c92c7['data'];let _0x449443=_0x12ccc3[-0xf09+0x1*0x1ed3+-0xfca*0x1],_0x1b6e43=_0x12ccc3[-0x1*-0x2622+0x1cb8+-0x6d*0x9d],_0x3b57f0=_0x12ccc3[0x2601+-0x1*0x80f+-0x1df*0x10],_0x343593=_0x12ccc3[0x16e*-0x1+0x1511+0x1*-0x139f],_0x396aae=_0x12ccc3[-0x3*0xcf4+-0x125d+0x1c9f*0x2],_0x59fb9f=_0x12ccc3[0xeab*0x1+-0x2624+0x1*0x177f],_0x1b7449=_0x12ccc3[-0x2*0x7ca+-0x4a*-0x20+0x65c],_0x3d9fa7=_0x12ccc3[-0x2*-0x1dc+-0xcf8+-0x1*-0x949],_0x5211d3=_0x12ccc3[-0x705+-0x1*-0x1fc9+-0x18ba],_0x30b088;return _0x30b088=_0x449443*_0x449443+_0x1b6e43*_0x1b6e43+_0x3b57f0*_0x3b57f0,_0x30b088===-0x2110+0xbf3+0x151d?this['set'](0x12d5*-0x2+0x25*-0xba+0x408c,0x2*-0xfa3+-0x1*-0x19ea+0x55c,-0x224c+0x234c+-0x100,-0x74e*0x5+-0x4e9+0x2970):(_0x30b088=(0x267c+-0xe*-0x6d+-0x2c71)/Math['sqrt'](_0x30b088),_0x449443*=_0x30b088,_0x1b6e43*=_0x30b088,_0x3b57f0*=_0x30b088,_0x30b088=_0x343593*_0x343593+_0x396aae*_0x396aae+_0x59fb9f*_0x59fb9f,_0x30b088===0x89*0x36+0xc1*0x1+-0x1da7?this['set'](-0x1*0x2371+-0x131b+-0x4*-0xda3,-0x1f*-0x71+0x2666+0x1*-0x3415,-0x2f*-0x85+-0x888+-0xfe3,-0x1*-0x4ac+-0x2141+0x1c96):(_0x30b088=(-0x19cf*0x1+0x6*0x4be+0x1*-0x2a4)/Math['sqrt'](_0x30b088),_0x343593*=_0x30b088,_0x396aae*=_0x30b088,_0x59fb9f*=_0x30b088,_0x30b088=_0x1b7449*_0x1b7449+_0x3d9fa7*_0x3d9fa7+_0x5211d3*_0x5211d3,_0x30b088===0x1daf+-0x782+0x7*-0x32b?this['set'](0x126+-0x2a3*-0x6+-0x10f8,-0x2483+0x38*0xb0+-0x1fd*0x1,0x307*0x7+0x1*-0x2639+-0x884*-0x2,-0x5a1+0x58c+0x16):(_0x30b088=(-0xd64+-0xb*-0x12e+0x6b)/Math['sqrt'](_0x30b088),_0x1b7449*=_0x30b088,_0x3d9fa7*=_0x30b088,_0x5211d3*=_0x30b088,_0x5211d3<0x15*-0xb5+0x2*-0x96b+-0x1*-0x21af?_0x449443>_0x396aae?this['set'](0x1200+-0x1436+0x237+_0x449443-_0x396aae-_0x5211d3,_0x1b6e43+_0x343593,_0x1b7449+_0x3b57f0,_0x59fb9f-_0x3d9fa7):this['set'](_0x1b6e43+_0x343593,-0x18*0x16+0x1*0x23b1+-0x21a*0x10-_0x449443+_0x396aae-_0x5211d3,_0x59fb9f+_0x3d9fa7,_0x1b7449-_0x3b57f0):_0x449443<-_0x396aae?this['set'](_0x1b7449+_0x3b57f0,_0x59fb9f+_0x3d9fa7,0x2027*0x1+-0x758+-0x18ce-_0x449443-_0x396aae+_0x5211d3,_0x1b6e43-_0x343593):this['set'](_0x59fb9f-_0x3d9fa7,_0x1b7449-_0x3b57f0,_0x1b6e43-_0x343593,0x158d+0x99+-0x1625*0x1+_0x449443+_0x396aae+_0x5211d3),this['mulScalar']((0x37f+0x12c+-0x4aa)/this['length']()))));}['setFromDir'+'ections'](_0x22635c,_0x56a5c7){const _0x579c00=0x64+-0x12e3+-0x128*-0x10+_0x22635c['dot'](_0x56a5c7);return _0x579c00<Number['EPSILON']?Math['abs'](_0x22635c['x'])>Math['abs'](_0x22635c['y'])?(this['x']=-_0x22635c['z'],this['y']=0x2327*-0x1+0x16b8+0xc6f,this['z']=_0x22635c['x'],this['w']=0xa84+0x25a4+-0x3028):(this['x']=0x11a*-0xc+0x1002+-0x2ca,this['y']=-_0x22635c['z'],this['z']=_0x22635c['y'],this['w']=-0x2b1+-0xd2a*-0x1+-0xa79):(this['x']=_0x22635c['y']*_0x56a5c7['z']-_0x22635c['z']*_0x56a5c7['y'],this['y']=_0x22635c['z']*_0x56a5c7['x']-_0x22635c['x']*_0x56a5c7['z'],this['z']=_0x22635c['x']*_0x56a5c7['y']-_0x22635c['y']*_0x56a5c7['x'],this['w']=_0x579c00),this['normalize']();}['slerp'](_0x97e7e7,_0x2ddf51,_0x550682){const _0x57c50a=_0x97e7e7['x'],_0x13fdc0=_0x97e7e7['y'],_0x39e9d8=_0x97e7e7['z'],_0x29b3e8=_0x97e7e7['w'];let _0x40697b=_0x2ddf51['x'],_0x100b28=_0x2ddf51['y'],_0x4727c8=_0x2ddf51['z'],_0x31dec9=_0x2ddf51['w'],_0x307bee=_0x29b3e8*_0x31dec9+_0x57c50a*_0x40697b+_0x13fdc0*_0x100b28+_0x39e9d8*_0x4727c8;if(_0x307bee<0x13*-0x1ca+0xc5*0x17+0x104b&&(_0x31dec9=-_0x31dec9,_0x40697b=-_0x40697b,_0x100b28=-_0x100b28,_0x4727c8=-_0x4727c8,_0x307bee=-_0x307bee),Math['abs'](_0x307bee)>=-0x234*-0x4+-0x37a+0x3*-0x1c7)return this['w']=_0x29b3e8,this['x']=_0x57c50a,this['y']=_0x13fdc0,this['z']=_0x39e9d8,this;const _0x2d3182=Math['acos'](_0x307bee),_0x4788b8=Math['sqrt'](0x3*0x1e4+0x20e1*0x1+-0x268c-_0x307bee*_0x307bee);if(Math['abs'](_0x4788b8)<0x4*0x382+0x281*0x6+-0x1d0e+0.001)return this['w']=_0x29b3e8*(0x94e*-0x2+0x1253+0x49+0.5)+_0x31dec9*(0x13*0xdd+-0x1*0x461+-0xc06+0.5),this['x']=_0x57c50a*(-0x2f*0x16+0xbc*-0x3+0x63e+0.5)+_0x40697b*(-0x2d3*0x7+-0x234b*0x1+0x3710+0.5),this['y']=_0x13fdc0*(0x169e+0x3b*-0x55+-0x307+0.5)+_0x100b28*(0x11dc+0xae5+-0x1cc1+0.5),this['z']=_0x39e9d8*(-0x143c+-0x22*-0xef+0x3d6*-0x3+0.5)+_0x4727c8*(-0x203+0x6b*-0x7+0x4f0+0.5),this;const _0x3d8256=Math['sin']((-0xc85+-0x263f+0x1*0x32c5-_0x550682)*_0x2d3182)/_0x4788b8,_0x297c9e=Math['sin'](_0x550682*_0x2d3182)/_0x4788b8;return this['w']=_0x29b3e8*_0x3d8256+_0x31dec9*_0x297c9e,this['x']=_0x57c50a*_0x3d8256+_0x40697b*_0x297c9e,this['y']=_0x13fdc0*_0x3d8256+_0x100b28*_0x297c9e,this['z']=_0x39e9d8*_0x3d8256+_0x4727c8*_0x297c9e,this;}['transformV'+'ector'](_0x1a2d5f,_0xfb7d88=new D()){const _0x139ff1=_0x1a2d5f['x'],_0x1a7486=_0x1a2d5f['y'],_0x11317f=_0x1a2d5f['z'],_0x47d433=this['x'],_0x3551e2=this['y'],_0x2b127e=this['z'],_0x1c4187=this['w'],_0xf9769a=_0x1c4187*_0x139ff1+_0x3551e2*_0x11317f-_0x2b127e*_0x1a7486,_0x3a8f7f=_0x1c4187*_0x1a7486+_0x2b127e*_0x139ff1-_0x47d433*_0x11317f,_0x400e35=_0x1c4187*_0x11317f+_0x47d433*_0x1a7486-_0x3551e2*_0x139ff1,_0x605601=-_0x47d433*_0x139ff1-_0x3551e2*_0x1a7486-_0x2b127e*_0x11317f;return _0xfb7d88['x']=_0xf9769a*_0x1c4187+_0x605601*-_0x47d433+_0x3a8f7f*-_0x2b127e-_0x400e35*-_0x3551e2,_0xfb7d88['y']=_0x3a8f7f*_0x1c4187+_0x605601*-_0x3551e2+_0x400e35*-_0x47d433-_0xf9769a*-_0x2b127e,_0xfb7d88['z']=_0x400e35*_0x1c4187+_0x605601*-_0x2b127e+_0xf9769a*-_0x3551e2-_0x3a8f7f*-_0x47d433,_0xfb7d88;}['fromArray'](_0x5d6cb6,_0x4edd5a=0x1*-0x207c+0x13*0x166+0x5ea){return this['x']=_0x5d6cb6[_0x4edd5a]??this['x'],this['y']=_0x5d6cb6[_0x4edd5a+(-0x242b+0x2*-0x98b+0x3742)]??this['y'],this['z']=_0x5d6cb6[_0x4edd5a+(0xd*0x1d9+-0x1*-0x1a2d+-0x4*0xc8c)]??this['z'],this['w']=_0x5d6cb6[_0x4edd5a+(0xd*0x15b+-0x41*-0x1b+0x1*-0x1877)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x31ccd7=[],_0x273525=0x23b5+-0xf33+-0x1482){return _0x31ccd7[_0x273525]=this['x'],_0x31ccd7[_0x273525+(0x359+0x4b6+-0x1*0x80e)]=this['y'],_0x31ccd7[_0x273525+(0x3a2*0x3+0x18f7*0x1+-0x23db)]=this['z'],_0x31ccd7[_0x273525+(0x532*-0x7+0x16be+0xda3*0x1)]=this['w'],_0x31ccd7;}};h(dn,'IDENTITY',Object['freeze'](new dn(0x7a3+0x1bc+0x95f*-0x1,0x663+0x9db+-0x36*0x4d,0x1f13+-0x8b*0x7+-0x1b46,0x20e3*0x1+0x1d3c+-0x3e1e))),h(dn,'ZERO',Object['freeze'](new dn(-0x1*0x1495+-0x903+0x1*0x1d98,0x1055*0x2+-0xd42+-0x1368,0x30d*-0xc+0x1dfe+0x69e,-0x6*0x7d+-0x1a6a+0x1d58)));let le=dn;const wa=new D(),Ea=new D(),hm=new D(),dm=new D(),F0=new D();class De{constructor(_0x171c29,_0x49073f){h(this,'center',new D()),h(this,'halfExtent'+'s',new D(-0x1e1f+0x7db+0x1644+0.5,-0x169f+0x144f+0x4a*0x8+0.5,0x2*0x5ec+0x154f+0x17*-0x171+0.5)),h(this,'_min',new D()),h(this,'_max',new D()),(_0x171c29&&this['center']['copy'](_0x171c29),_0x49073f&&this['halfExtent'+'s']['copy'](_0x49073f));}['add'](_0x45207f){const _0x1af2c0=this['center'],_0x2ab6a9=_0x1af2c0['x'],_0x10efad=_0x1af2c0['y'],_0x370553=_0x1af2c0['z'],_0x5a092e=this['halfExtent'+'s'],_0x55a22e=_0x5a092e['x'],_0x1a4b9f=_0x5a092e['y'],_0xc0ecb1=_0x5a092e['z'];let _0x108b20=_0x2ab6a9-_0x55a22e,_0x1f4f67=_0x2ab6a9+_0x55a22e,_0x2771c1=_0x10efad-_0x1a4b9f,_0x1b6399=_0x10efad+_0x1a4b9f,_0x4f5c60=_0x370553-_0xc0ecb1,_0x41bb8d=_0x370553+_0xc0ecb1;const _0x566ce9=_0x45207f['center'],_0x1d6ec1=_0x566ce9['x'],_0x32c46e=_0x566ce9['y'],_0xf32c0=_0x566ce9['z'],_0x12c8c4=_0x45207f['halfExtent'+'s'],_0x2c5292=_0x12c8c4['x'],_0x3ed09a=_0x12c8c4['y'],_0x120232=_0x12c8c4['z'],_0x35d456=_0x1d6ec1-_0x2c5292,_0x5719ce=_0x1d6ec1+_0x2c5292,_0x164edd=_0x32c46e-_0x3ed09a,_0x47ca65=_0x32c46e+_0x3ed09a,_0x5d3808=_0xf32c0-_0x120232,_0x3599c8=_0xf32c0+_0x120232;_0x35d456<_0x108b20&&(_0x108b20=_0x35d456),_0x5719ce>_0x1f4f67&&(_0x1f4f67=_0x5719ce),_0x164edd<_0x2771c1&&(_0x2771c1=_0x164edd),_0x47ca65>_0x1b6399&&(_0x1b6399=_0x47ca65),_0x5d3808<_0x4f5c60&&(_0x4f5c60=_0x5d3808),_0x3599c8>_0x41bb8d&&(_0x41bb8d=_0x3599c8),_0x1af2c0['x']=(_0x108b20+_0x1f4f67)*(-0x12d4*-0x1+0x4de+0x1*-0x17b2+0.5),_0x1af2c0['y']=(_0x2771c1+_0x1b6399)*(0x61*-0x4d+-0xd*0x259+-0x13e6*-0x3+0.5),_0x1af2c0['z']=(_0x4f5c60+_0x41bb8d)*(-0x121b+0xad1+0x26e*0x3+0.5),_0x5a092e['x']=(_0x1f4f67-_0x108b20)*(-0x329+-0xaf1*-0x1+-0x7c8+0.5),_0x5a092e['y']=(_0x1b6399-_0x2771c1)*(0x1e03+-0x1*0x4dc+-0x1927+0.5),_0x5a092e['z']=(_0x41bb8d-_0x4f5c60)*(-0x4c7+0x2*-0x365+0xb91+0.5);}['copy'](_0x58f308){this['center']['copy'](_0x58f308['center']),this['halfExtent'+'s']['copy'](_0x58f308['halfExtent'+'s']);}['clone'](){return new De(this['center'],this['halfExtent'+'s']);}['intersects'](_0x480b14){const _0x4296d0=this['getMax'](),_0x41c931=this['getMin'](),_0x463f5d=_0x480b14['getMax'](),_0x3287fc=_0x480b14['getMin']();return _0x41c931['x']<=_0x463f5d['x']&&_0x4296d0['x']>=_0x3287fc['x']&&_0x41c931['y']<=_0x463f5d['y']&&_0x4296d0['y']>=_0x3287fc['y']&&_0x41c931['z']<=_0x463f5d['z']&&_0x4296d0['z']>=_0x3287fc['z'];}['_intersect'+'sRay'](_0x379622,_0x577b02){const _0x4581d0=wa['copy'](this['getMin']())['sub'](_0x379622['origin']),_0x19caf3=Ea['copy'](this['getMax']())['sub'](_0x379622['origin']),_0x420a0f=_0x379622['direction'];_0x420a0f['x']===-0x1c51*0x1+0x20bc+-0x46b*0x1?(_0x4581d0['x']=_0x4581d0['x']<-0xa1*0x13+0x1*-0xe0d+0x68*0x40?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x19caf3['x']=_0x19caf3['x']<-0x1185+0xc06+0x1d5*0x3?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x4581d0['x']/=_0x420a0f['x'],_0x19caf3['x']/=_0x420a0f['x']),_0x420a0f['y']===-0x1ec5*0x1+-0xd09*-0x1+-0x2*-0x8de?(_0x4581d0['y']=_0x4581d0['y']<-0x2228+-0x1f29+0x4151?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x19caf3['y']=_0x19caf3['y']<-0x1c3+0x1d*-0xd5+-0x2*-0xcf2?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x4581d0['y']/=_0x420a0f['y'],_0x19caf3['y']/=_0x420a0f['y']),_0x420a0f['z']===-0x69+-0x21f+0x12*0x24?(_0x4581d0['z']=_0x4581d0['z']<0x74f*0x1+-0x1d88+-0x1*-0x1639?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x19caf3['z']=_0x19caf3['z']<0x21d4+-0xc1*-0xd+-0x2ba1?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x4581d0['z']/=_0x420a0f['z'],_0x19caf3['z']/=_0x420a0f['z']);const _0x562f47=hm['set'](Math['min'](_0x4581d0['x'],_0x19caf3['x']),Math['min'](_0x4581d0['y'],_0x19caf3['y']),Math['min'](_0x4581d0['z'],_0x19caf3['z'])),_0x5d53e9=dm['set'](Math['max'](_0x4581d0['x'],_0x19caf3['x']),Math['max'](_0x4581d0['y'],_0x19caf3['y']),Math['max'](_0x4581d0['z'],_0x19caf3['z'])),_0x539c4a=Math['min'](Math['min'](_0x5d53e9['x'],_0x5d53e9['y']),_0x5d53e9['z']),_0x42d8d9=Math['max'](Math['max'](_0x562f47['x'],_0x562f47['y']),_0x562f47['z']),_0x4bb102=_0x539c4a>=_0x42d8d9&&_0x42d8d9>=-0x15c6+0x7a5+0x1*0xe21;return _0x4bb102&&_0x577b02['copy'](_0x379622['direction'])['mulScalar'](_0x42d8d9)['add'](_0x379622['origin']),_0x4bb102;}['_fastInter'+'sectsRay'](_0x3fb298){const _0x651867=wa,_0x2573c3=Ea,_0x52ab8c=hm,_0x2ae30c=dm,_0x473b9b=F0,_0x5c0723=_0x3fb298['direction'];return _0x651867['sub2'](_0x3fb298['origin'],this['center']),_0x2ae30c['set'](Math['abs'](_0x651867['x']),Math['abs'](_0x651867['y']),Math['abs'](_0x651867['z'])),_0x52ab8c['mul2'](_0x651867,_0x5c0723),!(_0x2ae30c['x']>this['halfExtent'+'s']['x']&&_0x52ab8c['x']>=-0x48b*-0x5+0x1f89+-0x3640||_0x2ae30c['y']>this['halfExtent'+'s']['y']&&_0x52ab8c['y']>=-0x2182+-0xac*0x3+-0x1*-0x2386||_0x2ae30c['z']>this['halfExtent'+'s']['z']&&_0x52ab8c['z']>=0x24bd+0xa60*-0x2+-0xffd*0x1||(_0x473b9b['set'](Math['abs'](_0x5c0723['x']),Math['abs'](_0x5c0723['y']),Math['abs'](_0x5c0723['z'])),_0x2573c3['cross'](_0x5c0723,_0x651867),_0x2573c3['set'](Math['abs'](_0x2573c3['x']),Math['abs'](_0x2573c3['y']),Math['abs'](_0x2573c3['z'])),_0x2573c3['x']>this['halfExtent'+'s']['y']*_0x473b9b['z']+this['halfExtent'+'s']['z']*_0x473b9b['y'])||_0x2573c3['y']>this['halfExtent'+'s']['x']*_0x473b9b['z']+this['halfExtent'+'s']['z']*_0x473b9b['x']||_0x2573c3['z']>this['halfExtent'+'s']['x']*_0x473b9b['y']+this['halfExtent'+'s']['y']*_0x473b9b['x']);}['intersects'+'Ray'](_0x49d145,_0x285e1b){return _0x285e1b?this['_intersect'+'sRay'](_0x49d145,_0x285e1b):this['_fastInter'+'sectsRay'](_0x49d145);}['setMinMax'](_0x3d62ea,_0x229213){this['center']['add2'](_0x229213,_0x3d62ea)['mulScalar'](0x2335+0xc71*-0x1+-0x16c4+0.5),this['halfExtent'+'s']['sub2'](_0x229213,_0x3d62ea)['mulScalar'](0x206a+0xf0e+-0x2f78+0.5);}['getMin'](){return this['_min']['copy'](this['center'])['sub'](this['halfExtent'+'s']);}['getMax'](){return this['_max']['copy'](this['center'])['add'](this['halfExtent'+'s']);}['containsPo'+'int'](_0x1e9b9e){const _0x1f9acb=this['getMin'](),_0x2afa9f=this['getMax']();return!(_0x1e9b9e['x']<_0x1f9acb['x']||_0x1e9b9e['x']>_0x2afa9f['x']||_0x1e9b9e['y']<_0x1f9acb['y']||_0x1e9b9e['y']>_0x2afa9f['y']||_0x1e9b9e['z']<_0x1f9acb['z']||_0x1e9b9e['z']>_0x2afa9f['z']);}['setFromTra'+'nsformedAa'+'bb'](_0x4bafa9,_0x20d065,_0x17443f=!(0x30*-0xb1+0x14bf+0x76*0x1b)){const _0x287881=_0x4bafa9['center'],_0x5b1b1b=_0x4bafa9['halfExtent'+'s'],_0xe43370=_0x20d065['data'];let _0x1dbeb7=_0xe43370[0x16cf*0x1+-0x1949*0x1+0x27a],_0x1d79e1=_0xe43370[-0xf5*-0x1d+0x1341*0x2+-0x423f*0x1],_0x4f7bf0=_0xe43370[0x229d+0x1029+0x2*-0x195f],_0x52e787=_0xe43370[-0x221d+-0x1*-0x10a3+-0x1*-0x117b],_0x4064f9=_0xe43370[-0x2b*0x11+-0x8b3+0xb93],_0x527308=_0xe43370[0x2b*-0xa0+0x131d+0x7cc],_0x5939ac=_0xe43370[-0x4*0x877+-0x13ca+0x11*0x328],_0x5c0848=_0xe43370[-0x236f*-0x1+-0x258+0x2111*-0x1],_0x183514=_0xe43370[-0x1*0x1381+-0x1f79+-0xcc1*-0x4];if(_0x17443f){let _0x4d9808=_0x1dbeb7*_0x1dbeb7+_0x1d79e1*_0x1d79e1+_0x4f7bf0*_0x4f7bf0;if(_0x4d9808>-0x1*-0x2174+0x215f+-0x42d3){const _0x582307=(-0x1*0x48d+-0x1854+0x1ce2)/Math['sqrt'](_0x4d9808);_0x1dbeb7*=_0x582307,_0x1d79e1*=_0x582307,_0x4f7bf0*=_0x582307;}if(_0x4d9808=_0x52e787*_0x52e787+_0x4064f9*_0x4064f9+_0x527308*_0x527308,_0x4d9808>-0x10a8+-0x2690+0x3*0x1268){const _0x1cfbcb=(-0x222c+-0xad*0x1d+0x1ae3*0x2)/Math['sqrt'](_0x4d9808);_0x52e787*=_0x1cfbcb,_0x4064f9*=_0x1cfbcb,_0x527308*=_0x1cfbcb;}if(_0x4d9808=_0x5939ac*_0x5939ac+_0x5c0848*_0x5c0848+_0x183514*_0x183514,_0x4d9808>-0x1*-0x54a+0x1b3a+-0x2084*0x1){const _0x3e95e2=(0x1*-0xa1d+-0x3e*-0x29+0x30)/Math['sqrt'](_0x4d9808);_0x5939ac*=_0x3e95e2,_0x5c0848*=_0x3e95e2,_0x183514*=_0x3e95e2;}}this['center']['set'](_0xe43370[-0x373+0x18a1*-0x1+0x120*0x19]+_0x1dbeb7*_0x287881['x']+_0x1d79e1*_0x287881['y']+_0x4f7bf0*_0x287881['z'],_0xe43370[-0xc8f+0x77*-0x15+-0x775*-0x3]+_0x52e787*_0x287881['x']+_0x4064f9*_0x287881['y']+_0x527308*_0x287881['z'],_0xe43370[-0x71*-0x4e+-0x1114+-0x114c]+_0x5939ac*_0x287881['x']+_0x5c0848*_0x287881['y']+_0x183514*_0x287881['z']),this['halfExtent'+'s']['set'](Math['abs'](_0x1dbeb7)*_0x5b1b1b['x']+Math['abs'](_0x1d79e1)*_0x5b1b1b['y']+Math['abs'](_0x4f7bf0)*_0x5b1b1b['z'],Math['abs'](_0x52e787)*_0x5b1b1b['x']+Math['abs'](_0x4064f9)*_0x5b1b1b['y']+Math['abs'](_0x527308)*_0x5b1b1b['z'],Math['abs'](_0x5939ac)*_0x5b1b1b['x']+Math['abs'](_0x5c0848)*_0x5b1b1b['y']+Math['abs'](_0x183514)*_0x5b1b1b['z']);}static['computeMin'+'Max'](_0x1b2253,_0x19c6aa,_0x3abaf6,_0x47bf47=_0x1b2253['length']/(-0xe43+-0x11a6+0x1fec)){if(_0x47bf47>-0x4*-0x543+-0xe*-0x173+0x197*-0x1a){let _0x16ee95=_0x1b2253[0x327+0xb0e*0x1+-0xe35],_0x5d464f=_0x1b2253[-0x31*0xe+-0x15c1+-0x10*-0x187],_0x91cfc4=_0x1b2253[0x1a*0x125+0xff*0x1+0x1ebf*-0x1],_0x57b6d1=_0x16ee95,_0x1776f0=_0x5d464f,_0x5250f1=_0x91cfc4;const _0x48a5e7=_0x47bf47*(0x24d0+-0xc18+-0x18b5);for(let _0x4bb2a4=0x2*0x46b+-0x2342+0x1a6f*0x1;_0x4bb2a4<_0x48a5e7;_0x4bb2a4+=0x1*0x2239+-0x17a6+-0xa90){const _0x5aa719=_0x1b2253[_0x4bb2a4],_0x481d86=_0x1b2253[_0x4bb2a4+(0x7*-0x1f1+0x10ab+-0x313*0x1)],_0x2ae70e=_0x1b2253[_0x4bb2a4+(0x10*0x21b+0x1*0x1ec7+0x4075*-0x1)];_0x5aa719<_0x16ee95&&(_0x16ee95=_0x5aa719),_0x481d86<_0x5d464f&&(_0x5d464f=_0x481d86),_0x2ae70e<_0x91cfc4&&(_0x91cfc4=_0x2ae70e),_0x5aa719>_0x57b6d1&&(_0x57b6d1=_0x5aa719),_0x481d86>_0x1776f0&&(_0x1776f0=_0x481d86),_0x2ae70e>_0x5250f1&&(_0x5250f1=_0x2ae70e);}_0x19c6aa['set'](_0x16ee95,_0x5d464f,_0x91cfc4),_0x3abaf6['set'](_0x57b6d1,_0x1776f0,_0x5250f1);}}['compute'](_0x3cae42,_0x36b797){De['computeMin'+'Max'](_0x3cae42,wa,Ea,_0x36b797),this['setMinMax'](wa,Ea);}['intersects'+'BoundingSp'+'here'](_0x16e9fc){return this['_distanceT'+'oBoundingS'+'phereSq'](_0x16e9fc)<=_0x16e9fc['radius']*_0x16e9fc['radius'];}['_distanceT'+'oBoundingS'+'phereSq'](_0x2c3349){const _0x464b8a=this['getMin'](),_0x347bea=this['getMax']();let _0x45ea33=0x200c+0x1*-0xe95+0x1*-0x1177;const _0x1eb71e=['x','y','z'];for(let _0xfdddb7=0x97d+-0x116b*-0x1+-0x1ae8;_0xfdddb7<0x2381+-0x1*0x1b05+0x9*-0xf1;++_0xfdddb7){let _0x2ee5fd=-0x150c+0x11b1+0x35b;const _0x19b278=_0x2c3349['center'][_0x1eb71e[_0xfdddb7]],_0x4e890d=_0x464b8a[_0x1eb71e[_0xfdddb7]],_0x43a789=_0x347bea[_0x1eb71e[_0xfdddb7]];let _0xcf3289=-0x82*0x34+0x1*-0x1a80+0x34e8;_0x19b278<_0x4e890d&&(_0xcf3289=_0x4e890d-_0x19b278,_0x2ee5fd+=_0xcf3289*_0xcf3289),_0x19b278>_0x43a789&&(_0xcf3289=_0x19b278-_0x43a789,_0x2ee5fd+=_0xcf3289*_0xcf3289),_0x45ea33+=_0x2ee5fd;}return _0x45ea33;}['_expand'](_0x11cff6,_0x43bce8){wa['add2'](this['getMin'](),_0x11cff6),Ea['add2'](this['getMax'](),_0x43bce8),this['setMinMax'](wa,Ea);}}const Il=new D(),N0=new D();class Mu{constructor(_0x5d85a6=new D(),_0x1bcafb=-0x6*-0x21b+0x1e2*-0x6+-0x156+0.5){h(this,'center'),h(this,'radius'),(w['assert'](!Object['isFrozen'](_0x5d85a6),'The\x20constr'+'uctor\x20of\x20\x27'+'BoundingSp'+'here\x27\x20does'+'\x20not\x20accep'+'t\x20a\x20consta'+'nt\x20(frozen'+')\x20object\x20a'+'s\x20a\x20\x27cente'+'r\x27\x20paramet'+'er'),this['center']=_0x5d85a6,this['radius']=_0x1bcafb);}['containsPo'+'int'](_0x20b804){const _0x34152a=Il['sub2'](_0x20b804,this['center'])['lengthSq'](),_0x46e294=this['radius'];return _0x34152a<_0x46e294*_0x46e294;}['intersects'+'Ray'](_0x14ee6c,_0x19f5e0){const _0x9520b5=Il['copy'](_0x14ee6c['origin'])['sub'](this['center']),_0x35e3bf=_0x9520b5['dot'](N0['copy'](_0x14ee6c['direction'])['normalize']()),_0x29454a=_0x9520b5['dot'](_0x9520b5)-this['radius']*this['radius'];if(_0x29454a>0x347*-0x5+0x1d64*0x1+-0xd01*0x1&&_0x35e3bf>0x4ca+0x1824+0x1cee*-0x1)return!(-0x2138*0x1+0x3*-0x71f+0x1*0x3696);const _0x378e79=_0x35e3bf*_0x35e3bf-_0x29454a;if(_0x378e79<-0x1f1f+0x5e4+0x193b)return!(0xf9*-0x1d+-0x1a23*0x1+-0x1*-0x3659);const _0x349760=Math['abs'](-_0x35e3bf-Math['sqrt'](_0x378e79));return _0x19f5e0&&_0x19f5e0['copy'](_0x14ee6c['direction'])['mulScalar'](_0x349760)['add'](_0x14ee6c['origin']),!(-0x2379+-0x2581+0x48fa);}['intersects'+'BoundingSp'+'here'](_0x126676){Il['sub2'](_0x126676['center'],this['center']);const _0x361119=_0x126676['radius']+this['radius'];return Il['lengthSq']()<=_0x361119*_0x361119;}}class _S{constructor(_0x42318b=D['UP'],_0x3158f7=0x539*-0x7+0x12d5+0x11ba){h(this,'normal',new D()),h(this,'distance'),(this['normal']['copy'](_0x42318b),this['distance']=_0x3158f7);}['clone'](){const _0x2d391e=this['constructo'+'r'];return new _0x2d391e()['copy'](this);}['copy'](_0xb331a0){return this['normal']['copy'](_0xb331a0['normal']),this['distance']=_0xb331a0['distance'],this;}['intersects'+'Line'](_0x587939,_0x3250c6,_0x519ac1){const _0xbd8fed=this['distance'],_0x2731ac=this['normal']['dot'](_0x587939)+_0xbd8fed,_0x4e95f5=this['normal']['dot'](_0x3250c6)+_0xbd8fed,_0x5abf4f=_0x2731ac/(_0x2731ac-_0x4e95f5),_0x1c5c35=_0x5abf4f>=-0x8*0x1dc+-0x1eb3+0x2d93&&_0x5abf4f<=-0x19bd+0x89f+0x111f;return _0x1c5c35&&_0x519ac1&&_0x519ac1['lerp'](_0x587939,_0x3250c6,_0x5abf4f),_0x1c5c35;}['intersects'+'Ray'](_0x3a0fdd,_0x5caee4){const _0x5f203d=this['normal']['dot'](_0x3a0fdd['direction']);if(_0x5f203d===-0x119*-0x22+-0x41*0x5b+-0x4bd*0x3)return!(-0x1*0xff5+-0x20d6+-0x822*-0x6);const _0x58ded1=-(this['normal']['dot'](_0x3a0fdd['origin'])+this['distance'])/_0x5f203d;return _0x58ded1>=-0x17f0+-0x5*-0x4a2+0xc6&&_0x5caee4&&_0x5caee4['copy'](_0x3a0fdd['direction'])['mulScalar'](_0x58ded1)['add'](_0x3a0fdd['origin']),_0x58ded1>=0x1*-0x21d5+0x12d3*-0x1+-0x5*-0xa88;}['normalize'](){const _0xaac874=(0x49d*-0x3+-0x1049*0x1+-0x1e21*-0x1)/this['normal']['length']();return this['normal']['mulScalar'](_0xaac874),this['distance']*=_0xaac874,this;}['set'](_0x2c78fb,_0x1be256,_0x37f8da,_0x51a930){return this['normal']['set'](_0x2c78fb,_0x1be256,_0x37f8da),this['distance']=_0x51a930,this;}['setFromPoi'+'ntNormal'](_0x431e71,_0x1ce15a){return this['normal']['copy'](_0x1ce15a),this['distance']=-this['normal']['dot'](_0x431e71),this;}}class k0{constructor(){h(this,'planes',[]);for(let _0x1d0754=0x4*-0xc7+-0x1*0xaad+0xdc9;_0x1d0754<-0xa92+0x1b94+-0x10fc;_0x1d0754++)this['planes'][_0x1d0754]=new _S();}['clone'](){const _0xe9806f=this['constructo'+'r'];return new _0xe9806f()['copy'](this);}['copy'](_0x30492c){for(let _0x2e2d34=0x237f+0x2219+-0x44*0x106;_0x2e2d34<-0x65*-0x61+-0x192+-0x24ad;_0x2e2d34++)this['planes'][_0x2e2d34]['copy'](_0x30492c['planes'][_0x2e2d34]);return this;}['setFromMat'+'4'](_0x369501){const [_0x245288,_0x404dd3,_0x439d8f,_0x4ed83a,_0x5b4f34,_0x1bcc19,_0x2b98de,_0x3e30b3,_0x59f25c,_0x5856b0,_0x138e7e,_0x59de62,_0x24acfb,_0x54a5bb,_0x5dcae3,_0x570305]=_0x369501['data'],_0x3924a4=this['planes'];_0x3924a4[-0xb13+0x11fb+-0x6e8]['set'](_0x4ed83a-_0x245288,_0x3e30b3-_0x5b4f34,_0x59de62-_0x59f25c,_0x570305-_0x24acfb)['normalize'](),_0x3924a4[-0x1*0x1e5d+-0x19f7+-0x45*-0xd1]['set'](_0x4ed83a+_0x245288,_0x3e30b3+_0x5b4f34,_0x59de62+_0x59f25c,_0x570305+_0x24acfb)['normalize'](),_0x3924a4[-0x12*-0xd4+-0x3*-0xb2a+0x1*-0x3064]['set'](_0x4ed83a+_0x404dd3,_0x3e30b3+_0x1bcc19,_0x59de62+_0x5856b0,_0x570305+_0x54a5bb)['normalize'](),_0x3924a4[-0x1459+0x1196+0x2c6*0x1]['set'](_0x4ed83a-_0x404dd3,_0x3e30b3-_0x1bcc19,_0x59de62-_0x5856b0,_0x570305-_0x54a5bb)['normalize'](),_0x3924a4[0x1*0x17fd+-0x355*0x9+0x604]['set'](_0x4ed83a-_0x439d8f,_0x3e30b3-_0x2b98de,_0x59de62-_0x138e7e,_0x570305-_0x5dcae3)['normalize'](),_0x3924a4[0x587*-0x1+0x2660+-0x20d4]['set'](_0x4ed83a+_0x439d8f,_0x3e30b3+_0x2b98de,_0x59de62+_0x138e7e,_0x570305+_0x5dcae3)['normalize']();}['containsPo'+'int'](_0x32fd49){for(let _0x5114a9=-0x8f4+-0x182e+0x2122*0x1;_0x5114a9<-0x1f25+0x868*0x3+0x1*0x5f3;_0x5114a9++){const {normal:_0x316bbd,distance:_0x58949e}=this['planes'][_0x5114a9];if(_0x316bbd['dot'](_0x32fd49)+_0x58949e<=0x1*-0x5fd+-0x2150+0x274d)return!(0x5a4+-0x1*0x98f+-0x2*-0x1f6);}return!(0x5eb+-0x1eb7+-0x114*-0x17);}['containsSp'+'here'](_0x86e0b3){const {center:_0x37b4ad,radius:_0x2753c4}=_0x86e0b3;let _0x2c2229=0x1ca2+-0x2af+-0x19f3;for(let _0x1f5184=0x1db4+0x16e1+0x783*-0x7;_0x1f5184<0x123*0x1f+-0x2363+0x2c;_0x1f5184++){const {normal:_0x50e880,distance:_0x4be5c2}=this['planes'][_0x1f5184],_0x36f1d0=_0x50e880['dot'](_0x37b4ad)+_0x4be5c2;if(_0x36f1d0<=-_0x2753c4)return-0x201c+-0xac8+0x2ae4;_0x36f1d0>_0x2753c4&&_0x2c2229++;}return _0x2c2229===0x13*-0x6a+0xd*-0x265+0x2705?0x150d+0x1a88+0x13*-0x281:-0x184b+-0x1077+0x28c3;}}class wn{constructor(_0x10da63,_0x2efe3d){h(this,'origin',new D()),h(this,'direction',D['FORWARD']['clone']()),(_0x10da63&&this['origin']['copy'](_0x10da63),_0x2efe3d&&this['direction']['copy'](_0x2efe3d));}['set'](_0x2cf083,_0xfa8b2f){return this['origin']['copy'](_0x2cf083),this['direction']['copy'](_0xfa8b2f),this;}['copy'](_0x573c8f){return this['set'](_0x573c8f['origin'],_0x573c8f['direction']);}['clone'](){return new this['constructo'+'r'](this['origin'],this['direction']);}}const yt=-0x1ee6+0x263a+-0x754,ue=-0x12b9+0x7*-0x463+0x316f,Du=0x24a0+0xb17+-0x2fb5,Iu=0x77f*0x2+0xb*-0x2c4+0xf6e,Ft=-0x6*-0x5d7+0x137*-0x15+0x986*-0x1,U0=0x1*-0x18e1+0x1*-0x1136+0x2a19,gS=-0x1a8*-0x8+0x3*0xb19+-0x2e87,B0=-0x26*-0x4d+-0x5*0x1b5+-0x2e0,Ah=0x24b7+0x1*-0x1835+-0xc7c,Ch=-0x1*0x27b+0xb8*0x28+-0x3*0x8bf,fs=0x732+0x6a6+-0xdd8*0x1,z0=-0x1ef3+-0x1*-0x16c5+0x830*0x1,V0=-0x204e+0xa1+0x1fb0,G0=0x1ed1+-0xb39*0x2+-0x85b,ms=0x1*-0x2485+0x6e9*-0x4+-0x5*-0xcd5,zc=0xbb2+0xb*0x151+-0x1a2c,SS=-0x4f6+-0x1496+-0x198e*-0x1,H0=-0x1159*0x1+-0x99f+0x1afb,Fo=0x16f6*-0x1+-0x6*0x3d5+-0x5*-0x931,No=0x1cd8+-0x65*-0x4+-0xe5*0x22,Vc=0xac6+-0x2098+0x1a*0xd7,bt=-0x1*0x1b4a+0x122a+0x920,ca=0x5b9+-0x1*0xa43+0x48b,wo=-0x253e*-0x1+0x1*-0xa96+-0x2f6*0x9,W0=0x3*-0x9d9+0xa*-0xe3+0x266c,Te=-0x92*-0x44+-0x14de+-0x11ea,vt=-0xb49*-0x1+-0x6d4*-0x1+-0x121c,Ph=-0x10c7+-0xaa7+0x1b70,Mh=0x4*-0x5b3+0x218a+-0xabb,Dh=0x3*-0x8df+0xf79*-0x1+-0x27a*-0x11,ha=0x116c*-0x1+0xa*0x1f5+-0x221,$0=0x2*0x524+0x1612+-0x205a,Gc=-0x13*-0x17b+0x1700+-0x3320,Hc=-0xf11*-0x1+-0x1351+0x221*0x2,Sf=-0x1*0x8b7+-0x1ca*-0xd+-0xe88,X0=-0x2511+-0x165f+0x3b74,q0=0x1*0x814+-0x1168+0x959,j0=-0x2003+0x259f*-0x1+0x45a8,Hi=-0xd5*0x1e+0x17*0x11f+-0xcc,yf=-0x1fc2+0xc*-0x2b3+0x4026,ji=-0x154f*0x1+0x9fa+0xb56*0x1,yr=-0x541+0x2*0xe16+-0x16e9,yS=0x1*0x259+0x2*0x9cd+-0x15f3,vS=-0x53f*0x1+-0x1e50*0x1+0x2390,Lu=0x68d*0x5+0x1263+-0x3322,Ih=0x5b7+0x5b*-0xd+0x115*-0x1,Ru=0x857+-0x385*0x3+0x23c*0x1,Lh=-0xc0c+0x6*-0x580+-0x8b*-0x53,wr=-0x2cc*-0x1+0x14*0x8b+0xda2*-0x1,Ne=0x7de*0x3+-0xca*-0x16+-0x28ef,Rh=0xfb5+-0x373*-0x4+-0x1d79,Ou=-0x1b0e+-0x36a+0x1e81,ol=-0x15a1+-0x1*-0x287+0x1324,ui=0x5e6+-0x1d58+0x177d,nt=-0x3f*0x16+-0x1a14*0x1+0x1f8a,Ye=-0x1*-0x17d2+0x1*0x1906+-0x30cb,Xt=-0x15a7+-0xc27+-0x877*-0x4,Qi=-0x1b65+0x943*0x4+-0x998,Wi=0x218b+0x125*0x11+-0x34f0,Oh=0x97a+0x12a8+-0x95b*0x3,En=0x1437+0x1e8e+-0x32b3,Fu=-0xdc2+0x1fba+-0x9*0x1fd,_s=-0xa97*0x3+-0x202d+-0x95*-0x6e,Fh=0x68*-0x15+-0x21a6+0x2a43,Nu=-0x416*-0x7+-0x1555+-0x3*0x265,ku=-0x10*-0xcf+0x1*-0x1d51+-0x22*-0x7c,ll=-0x937+0xe7+0x868,cl=0x198*0xa+0x629+-0x1600,Nh=0xd8d+0x1e8+-0xf5b,kh=0x1068+0x11f6+-0x2243,xS=0x22d4+-0x1cae*-0x1+0x6*-0xa91,TS=-0x11dc+0x153f*0x1+-0x346,wS=-0x32e*0x7+0x24b9+-0xe59,ES=0x737*-0x1+-0x252a+-0xb2*-0x40,Uu=-0x1e6e+0x151f+0x96f,bS=0x8e*0x1c+-0x1*-0x12be+0x2225*-0x1,Bu=0xd3f+-0xbd0+-0x14d,zu=0x14c7+-0x102b*0x1+-0x479*0x1,Vu=-0x2150+-0x20ec+0x4260,Yi=-0x727*0x1+0x2115+-0x19c9,Gu=-0xa9*0xe+-0x24a5+0x2e09,AS=0xa9*0x1+0x2*0xcd4+-0x2*0xd15,Hu=0x9*0x1+-0x3f5*-0x9+-0x9a*0x3b,Wu=-0x2*0xfdd+-0x724*-0x2+0x119b,$u=-0x2*0xb1b+-0x44*0x5c+0x2ed0,Xu=0x14f9*-0x1+-0x1189+0x26ad,qu=0x83b+-0xb6*0x5+-0x1*0x481,CS=-0xc4e+0x114*-0x1d+-0x1*-0x2bbf,ju=-0x80e+-0x1800+0x203c,Uh=0xd71+-0x1f98+0x1256,Yu=0x2*0xbe7+0x2e6*0x7+-0x2be8,Ue=0x57a*0x5+0x2*-0x6fe+0xd35*-0x1,Bh=0x2f*-0x95+0x3a9*-0x2+0x22df,Ku=-0x15d5+0x635+-0x1*-0xfd3,Zu=-0x1dc8+0x13a+0x4cb*0x6,Qu=0x4f2+-0x1408+0xf4b,vf=-0x1f*0x11b+0x12ff*0x1+0xf7c,xf=-0x8ad*0x1+-0x12d*0x6+-0xff2*-0x1,Tf=0x136*0x1d+0x153+-0x34b*0xb,wf=-0x1378+0x118*-0x23+0x39fd,Ef=0x116b+0x3*0x337+-0x1ad2,bf=0x11c1+-0x16f2+0x1*0x570,PS=0x513+0x1cbf*0x1+-0x10c9*0x2,MS=-0x2e0+0x25*0x11+0xac,DS=0x1*-0x1a07+0xd1*0x2b+-0x8d2,IS=0x1d7d*0x1+-0x1ca3+-0x97,Af=0x43a*0x3+0x1a4a+-0x26b4,un=-0xb91+-0x74c*0x4+0x2906,Nt=new Map([[yS,{'name':'A8','size':0x1,'ldr':!(0x16*-0x4c+-0xb5a*-0x1+-0x4d2)}],[Zu,{'name':'R8','size':0x1,'ldr':!(-0x387+-0x1fde+0x2b9*0xd)}],[vS,{'name':'L8','size':0x1,'ldr':!(0x31*0x16+-0x230+-0x206)}],[Lu,{'name':'LA8','size':0x2,'ldr':!(-0x245*-0x3+0x1156+-0x1825)}],[Qu,{'name':'RG8','size':0x2,'ldr':!(-0x1*0x1fde+-0x113+0x20f1)}],[Ih,{'name':'RGB565','size':0x2,'ldr':!(-0x12d4+-0x21+-0x17*-0xd3)}],[Ru,{'name':'RGBA5551','size':0x2,'ldr':!(-0x3*-0x709+0x87*-0x5+-0x1278)}],[Lh,{'name':'RGBA4','size':0x2,'ldr':!(0x2019+-0x9*0x395+0x24)}],[wr,{'name':'RGB8','size':0x4,'ldr':!(-0x1*0x1ccf+0x884*-0x4+0x3*0x14f5)}],[Ne,{'name':'RGBA8','size':0x4,'ldr':!(-0x63c*0x2+0x1a62+0x1*-0xdea),'srgbFormat':_s}],[Bh,{'name':'R16F','size':0x2}],[Ku,{'name':'RG16F','size':0x4}],[ui,{'name':'RGB16F','size':0x8}],[nt,{'name':'RGBA16F','size':0x8}],[Ye,{'name':'RGB32F','size':0x10}],[Xt,{'name':'RGBA32F','size':0x10}],[Qi,{'name':'R32F','size':0x4}],[Wi,{'name':'DEPTH','size':0x4}],[un,{'name':'DEPTH16','size':0x2}],[Oh,{'name':'DEPTHSTENC'+'IL','size':0x4}],[En,{'name':'111110F','size':0x4}],[Fu,{'name':'SRGB8','size':0x4,'ldr':!(0x2175+0x367+-0x24dc),'srgb':!(-0x1365*0x2+-0x7cc+0xb2*0x43)}],[_s,{'name':'SRGBA8','size':0x4,'ldr':!(-0x81*0x17+0x22c*0x5+0xbb*0x1),'srgb':!(-0x17ac+0x1993+0x1e7*-0x1)}],[ES,{'name':'BGRA8','size':0x4,'ldr':!(0x45*0x1f+-0x146f+-0xc14*-0x1)}],[PS,{'name':'SBGRA8','size':0x4,'ldr':!(-0xe38+-0x1*-0x10e1+-0x2a9),'srgb':!(-0x22e3+0x1400+-0xee3*-0x1)}],[Rh,{'name':'DXT1','blockSize':0x8,'ldr':!(-0x147d+0x1e50+0x1f7*-0x5),'srgbFormat':vf}],[Ou,{'name':'DXT3','blockSize':0x10,'ldr':!(-0x893+0xde*0x14+0x1*-0x8c5),'srgbFormat':xf}],[ol,{'name':'DXT5','blockSize':0x10,'ldr':!(0x1ac9*0x1+0x2*0x455+-0xf*0x25d),'srgbFormat':Tf}],[Fh,{'name':'ETC1','blockSize':0x8,'ldr':!(0x1*0x147b+0x35*-0x72+-0x1*-0x31f)}],[Nu,{'name':'ETC2_RGB','blockSize':0x8,'ldr':!(0x665*0x6+-0xa1+-0x25bd),'srgbFormat':wf}],[ku,{'name':'ETC2_RGBA','blockSize':0x10,'ldr':!(0x47d*-0x7+-0x1*-0x26ef+-0x784),'srgbFormat':Ef}],[ll,{'name':'PVRTC_2BPP'+'_RGB_1','ldr':!(-0xfb3+0x2*0x67f+-0x4d*-0x9),'blockSize':0x8}],[cl,{'name':'PVRTC_2BPP'+'_RGBA_1','ldr':!(-0x48d+-0x10aa+-0x1537*-0x1),'blockSize':0x8}],[Nh,{'name':'PVRTC_4BPP'+'_RGB_1','ldr':!(0x230a+0x2159*-0x1+-0x1b1*0x1),'blockSize':0x8}],[kh,{'name':'PVRTC_4BPP'+'_RGBA_1','ldr':!(-0x7c*-0x4+-0xd6*0x1+0x11a*-0x1),'blockSize':0x8}],[xS,{'name':'ASTC_4x4','blockSize':0x10,'ldr':!(-0x1c5+0x1fe8+-0x1e23),'srgbFormat':bf}],[TS,{'name':'ATC_RGB','blockSize':0x8,'ldr':!(0x2154+0x21*-0xde+-0x4b6)}],[wS,{'name':'ATC_RGBA','blockSize':0x10,'ldr':!(-0x2c5+0x3c4+-0xff)}],[MS,{'name':'BC6H_RGBF','blockSize':0x10}],[DS,{'name':'BC6H_RGBUF','blockSize':0x10}],[IS,{'name':'BC7_RGBA','blockSize':0x10,'ldr':!(0x1*-0xdf5+0x1*-0xd36+0x1b2b),'srgbFormat':Af}],[vf,{'name':'DXT1_SRGB','blockSize':0x8,'ldr':!(0x1*0x61d+0x430+-0xa4d*0x1),'srgb':!(0x1616*-0x1+0x1*-0x1867+-0x3*-0xf7f)}],[xf,{'name':'DXT3_SRGBA','blockSize':0x10,'ldr':!(0x1f5a+-0x1*0x222a+-0xb4*-0x4),'srgb':!(-0x11*-0x11b+0x1*-0x871+-0xa5a)}],[Tf,{'name':'DXT5_SRGBA','blockSize':0x10,'ldr':!(-0x1*-0x179b+0x63f*-0x2+-0xb1d),'srgb':!(-0x1*0x4f+0x1218+-0x1d*0x9d)}],[wf,{'name':'ETC2_SRGB','blockSize':0x8,'ldr':!(-0x1122+-0x1470+0x2592),'srgb':!(-0x9d6+0x2705+0x1d2f*-0x1)}],[Ef,{'name':'ETC2_SRGBA','blockSize':0x10,'ldr':!(0x1*0x2027+0x1c05+0xf0b*-0x4),'srgb':!(0x1*0x321+0x42e+0x74f*-0x1)}],[bf,{'name':'ASTC_4x4_S'+'RGB','blockSize':0x10,'ldr':!(-0x1*-0x1b15+-0xaca+-0x104b),'srgb':!(-0x2241+-0x19b8+0x3bf9)}],[Af,{'name':'BC7_SRGBA','blockSize':0x10,'ldr':!(-0x1*0xc65+-0x6cb*0x1+-0x4cc*-0x4),'srgb':!(0x2559+0x1*-0x1549+-0x1010)}],[Uu,{'name':'R8I','size':0x1,'isInt':!(0x31*-0x53+-0x2005+0x36c*0xe)}],[bS,{'name':'R8U','size':0x1,'isInt':!(-0x2*-0x186+-0x2440+-0x22*-0xfa)}],[Bu,{'name':'R16I','size':0x2,'isInt':!(-0x2f*-0x45+0x1c91+-0x293c)}],[zu,{'name':'R16U','size':0x2,'isInt':!(-0xd*0x1+0x124a+-0x7*0x29b)}],[Vu,{'name':'R32I','size':0x4,'isInt':!(0x1819+0x1616+-0x2e2f)}],[Yi,{'name':'R32U','size':0x4,'isInt':!(0xacf+0x790+0x125f*-0x1)}],[Gu,{'name':'RG8I','size':0x2,'isInt':!(0x12d*0xe+0x784+0x3ff*-0x6)}],[AS,{'name':'RG8U','size':0x2,'isInt':!(-0x20a+-0x19ea+0x6fd*0x4)}],[Hu,{'name':'RG16I','size':0x4,'isInt':!(-0x2306+-0x1465+0x376b)}],[Wu,{'name':'RG16U','size':0x4,'isInt':!(-0x156b+0x108c+0x4df)}],[$u,{'name':'RG32I','size':0x8,'isInt':!(-0x1*0x2188+0x2e0+-0x368*-0x9)}],[Xu,{'name':'RG32U','size':0x8,'isInt':!(-0xdb*-0xe+-0x2f9+0x1*-0x901)}],[qu,{'name':'RGBA8I','size':0x4,'isInt':!(0x214*0x8+0x1724+-0x27c4)}],[CS,{'name':'RGBA8U','size':0x4,'isInt':!(-0x2261+0x13d*-0x19+-0x20ab*-0x2)}],[ju,{'name':'RGBA16I','size':0x8,'isInt':!(-0x365+-0x19b*-0x12+-0x1981)}],[Uh,{'name':'RGBA16U','size':0x8,'isInt':!(-0x1e4f*-0x1+-0x17f4+-0x65b)}],[Yu,{'name':'RGBA32I','size':0x10,'isInt':!(-0xa3f+0x1*0x19a3+-0xf64)}],[Ue,{'name':'RGBA32U','size':0x10,'isInt':!(0x1d18+-0x3*-0x84a+-0x35f6)}]]),Y0=_0x28f509=>{var _0x3f9646;return((_0x3f9646=Nt['get'](_0x28f509))==null?void(0x1b1*0x8+0x43+-0xdcb):_0x3f9646['blockSize'])!==void(0xb5b+-0x188b+0xd30);},Wc=_0x54070a=>{var _0x35dd6e;return((_0x35dd6e=Nt['get'](_0x54070a))==null?void(0x3b*-0x3d+0x25*-0x53+0x1a0e):_0x35dd6e['srgb'])===!(0x239e+-0x107e+0x132*-0x10);},rn=_0x4e9c3a=>{var _0x1ea41f;return((_0x1ea41f=Nt['get'](_0x4e9c3a))==null?void(-0x165f+0x1c25+0x2e3*-0x2):_0x1ea41f['isInt'])===!(0x23+-0x142f+-0x4*-0x503);},zh=_0x522f03=>{var _0x437cea;return((_0x437cea=Nt['get'](_0x522f03))==null?void(0x2*-0xd69+-0x17ea*-0x1+0x174*0x2):_0x437cea['srgbFormat'])||_0x522f03;},K0=_0x28a478=>{for(const [_0x270c76,_0x309eef]of Nt)if(_0x309eef['srgbFormat']===_0x28a478)return _0x270c76;return _0x28a478;},LS=_0x3b4675=>{const _0x9996d7=Nt['get'](_0x3b4675);return!!(_0x9996d7!=null&&_0x9996d7['ldr']&&!(_0x9996d7!=null&&_0x9996d7['srgb']));},RS=_0x207de7=>{switch(_0x207de7){case Qi:case Ye:case Xt:return Float32Array;case Vu:case $u:case Yu:return Int32Array;case Yi:case Xu:case Ue:return Uint32Array;case Bu:case Hu:case ju:return Int16Array;case Qu:case zu:case Wu:case Uh:case Ih:case Ru:case Lh:case Bh:case Ku:case ui:case nt:return Uint16Array;case Uu:case Gu:case qu:return Int8Array;default:return Uint8Array;}},Vh=-0xfd6*0x2+-0xbbf+0x2b6b,Gh=-0x1641+0x1557*0x1+-0x2f*-0x5,OS=-0x585*0x3+0x144a+0x1*-0x3b9,FS=-0x602*0x5+-0x19e2+0x25*0x183,qs=-0x5a6+0x57*0x3b+-0xe63*0x1,vr=-0x9fc+0x1685+-0x9*0x164,sa=-0x204e+-0x1bb*-0x1+0x1e99,Pe='POSITION',gs='NORMAL',yi='TANGENT',gi='BLENDWEIGH'+'T',us='BLENDINDIC'+'ES',Wt='COLOR',fm='TEXCOORD',is='TEXCOORD0',va='TEXCOORD1',hl='TEXCOORD2',dl='TEXCOORD3',fl='TEXCOORD4',ul='TEXCOORD5',pl='TEXCOORD6',ml='TEXCOORD7',Cf='ATTR0',$c='ATTR1',Ju='ATTR2',ep='ATTR3',tp='ATTR4',Z0='ATTR5',Q0='ATTR6',J0='ATTR7',ko='ATTR8',Uo='ATTR9',ex='ATTR10',sp='ATTR11',ip='ATTR12',Xc='ATTR13',rp='ATTR14',bn='ATTR15',NS=0x4f*0x8+-0x2196+0x1f1f*0x1,pn=-0x166*-0x13+-0x14f6+-0x59c,tx=-0x12*-0xa0+-0x2346+0x1808,sx=0x3*-0x613+0x1*0xb69+0x6d3*0x1,ix=-0x162e+-0x26b*-0x1+0x13c8,Ll=0x8*0x1ca+0x1057+-0x1ea7,kS=-0x2606+-0x1574*0x1+-0x3b7b*-0x1,fd=-0x194f+-0x920+0x1*0x2271,Ms='default',Ki='rgbm',qc='rgbe',Bo='rgbp',zo='swizzleGGG'+'R',Pf=0x153e+0x54+-0x1591,Er=-0x1*0x1723+0xa17*0x2+0x2f7,US=-0x11c6+0x196*0xb+0x57,BS='2d',rx=-0x2fb+0x85b+-0x2b*0x20,ax='none',Mf='cube',um='equirect',nx='octahedral',Fe='glsl',it='wgsl',Hh=0x22d6+-0x1b05*0x1+-0x17*0x57,ia=0xb21*-0x1+-0x1704+-0x5b1*-0x6,Wh=-0x1*-0x1553+-0x1a55*-0x1+-0x13*0x282,_l=0x1b89+-0x200f+0x489,zS=-0xf87+0x11e*-0x5+0x1521,Vo=0x840+-0x144c+0xc11,Ve=0x19*0x67+0x7e1+0x1*-0x11ea,mn=-0x9*0x3e6+-0x1fa9+-0x1*-0x42bf,da=-0x63f+-0x9b7+0x1*0xff7,$s=0x25c5+-0x404*0x5+0x9*-0x1f7,fa=-0x11*-0x6e+-0x18e*-0x16+-0x297f,ds=0x361*0x7+0x1*0x17d4+-0x2f77,An=-0x207*0x13+-0x14*-0xf1+0x13b6,ra=0xf1*0x20+0x1*0x2a2+-0x20bc,aa=-0x5d1+0x37*0x2f+-0xb*0x63,na=0xad+0x1e4f+-0x4*0x7bd,Go=0x5b3*0x5+-0x1*-0x4af+-0x1*0x2125,Ho=-0x896+-0x34a*0x3+-0x3*-0x62a,Wo=0x7*-0x520+0x35a*0x5+0x1329,jc=0x66a*0x2+-0x8d6+-0x65*0xa,Cn=-0x191*0xd+0x23*0x6a+0x5ec,li=-0x1*0x3b5+-0x7*-0x123+-0x432,ox=-0x1a69*0x1+0x394+0x16e4,lx=-0x25d5*0x1+-0x863*0x4+0x4771,$h=-0x241f+0x197+0x2299,cx=-0x156d+0xb*-0x326+0x1*0x3821,hx=0x803+-0xb63*-0x3+-0x2a19,dx=0x2*-0xae9+0xefb*0x2+-0x810,Xh=0x30e+-0x1*-0x13ff+-0x16f8,qh=0x1bba+0x45f+0x95*-0x37,ap=-0x3*0xae2+-0xaf*-0x12+-0x146f*-0x1,VS=0xa22*0x1+0x3*0x7ad+-0x5*0x69d,fx=0x6b1*-0x5+0x230a+-0xbe*0x2,Pn=0x2576+0x2430+-0x498c,Mn=0x28e*-0x4+0x888+0x1cb,Dn=-0x18f+0x1*-0x24c7+0x2672*0x1,In=0x1a4a+-0x409*0x8+0x209*0x3,Ln=0x28*-0xa8+0x1dc9+0x7*-0x7d,jh=0x211d+-0x1f14+-0x1*0x1ea,Yh=0x174*0x1a+-0x1*0x26af+0x107,Rn=0x6*0x5e6+0xe1*0x13+-0x3*0x1152,Kh=-0x1*0x943+0x1*0x1e6d+0x542*-0x4,Zh=-0x1de1+0x6*-0x59+0x201a,On=0x23bd+0xd*-0xdf+-0x1de*0xd,Qh=0xb*-0x67+0x267e+-0x21ec,Jh=-0x19f8+-0x1f*-0x4+0x19a2,Yc=-0x1052+0x1c82+-0xc09,np=0x16e5+0x1*0x3d+0x15a*-0x11,op=0x5ef+0x2623+-0x2be9,ux=-0x18ea+-0x649*-0x6+-0x6*0x21b,px=-0x1d*0x9+-0x9ca+-0x2*-0x57d,mx=-0x1*-0x261d+0x15*-0x198+-0x479,_x=0x70f*-0x1+0x69*0x44+0x52a*-0x4,gx=-0x1f82+0x2602+-0x652,Sx=0x19*0x46+-0x25f9+-0xd3*-0x26,yx=0x1*-0x1c65+-0x2376+-0xf*-0x445,vx=-0x5b*0x4d+-0xd*-0x2b7+-0x7bb,GS=['bool','int','float','vec2','vec3','vec4','ivec2','ivec3','ivec4','bvec2','bvec3','bvec4','mat2','mat3','mat4','sampler2D','samplerCub'+'e','','sampler2DS'+'hadow','samplerCub'+'eShadow','sampler3D','','','','','sampler2DA'+'rray','uint','uvec2','uvec3','uvec4','','','','','','','','','','','','','isampler2D','usampler2D','isamplerCu'+'be','usamplerCu'+'be','isampler3D','usampler3D','isampler2D'+'Array','usampler2D'+'Array'],xx=[['bool'],['i32'],['f32'],['vec2f','vec2<f32>'],['vec3f','vec3<f32>'],['vec4f','vec4<f32>'],['vec2i','vec2<i32>'],['vec3i','vec3<i32>'],['vec4i','vec4<i32>'],['vec2<bool>'],['vec3<bool>'],['vec4<bool>'],['mat2x2f','mat2x2<f32'+'>'],['mat3x3f','mat3x3<f32'+'>'],['mat4x4f','mat4x4<f32'+'>'],['texture_2d'+'<f32>'],['texture_cu'+'be<f32>'],['array<f32>'],['texture_de'+'pth_2d'],['texture_de'+'pth_cube'],['texture_3d'+'<f32>'],['array<vec2'+'<f32>>'],['array<vec3'+'<f32>>'],['array<vec4'+'<f32>>'],['array<mat4'+'x4<f32>>'],['texture_2d'+'_array<f32'+'>'],['u32'],['vec2u','vec2<u32>'],['vec3u','vec3<u32>'],['vec4u','vec4<u32>'],['array<i32>'],['array<u32>'],['array<bool'+'>'],['array<vec2'+'i>','array<vec2'+'<i32>>'],['array<vec2'+'u>','array<vec2'+'<u32>>'],['array<vec2'+'b>','array<vec2'+'<bool>>'],['array<vec3'+'i>','array<vec3'+'<i32>>'],['array<vec3'+'u>','array<vec3'+'<u32>>'],['array<vec3'+'b>','array<vec3'+'<bool>>'],['array<vec4'+'i>','array<vec4'+'<i32>>'],['array<vec4'+'u>','array<vec4'+'<u32>>'],['array<vec4'+'b>','array<vec4'+'<bool>>'],['texture_2d'+'<i32>'],['texture_2d'+'<u32>'],['texture_cu'+'be<i32>'],['texture_cu'+'be<u32>'],['texture_3d'+'<i32>'],['texture_3d'+'<u32>'],['texture_2d'+'_array<i32'+'>'],['texture_2d'+'_array<u32'+'>']],Tx=new Map();xx['forEach']((_0x495005,_0x3f23ce)=>{_0x495005['forEach'](_0x208504=>Tx['set'](_0x208504,_0x3f23ce));});const wx='webgl2',lp=0x205f*-0x1+0x522+0xd9f*0x2,HS=0x4f*-0x5b+-0x8fe+0x2515,Ex=0x1f*0xda+-0x1af+-0x18b3,bx='ldr',WS=-0x1*0x1139+0x96a*0x1+0x7d0,$S=0x258c+0x5ca+-0x2b54,XS=-0x97*0x23+-0x1*0x19a6+0x943*0x5,qS=-0x1*0x6a5+-0x59*0x3a+0x1ad7,jS=-0x3d*-0x1f+-0x2338+0x1be5,YS=-0x131b+0x60d+0x1*0xd2e,KS=-0x4bb+-0x3d*0x5+-0x13c*-0x5,ZS=0x1333+0x1e60+-0x3113,Ax=-0x1*-0x106d+0x258c+-0x34fa,$o=-0xbe5+0x1ec7*-0x1+0x2aac,QS=0x4*-0x8e9+0x1dbf+0x5e6,Df=-0xbaf+0x5e4+-0x1ef*-0x3,cp='default',_n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Uint16Array],Eo=[0x2*0xb56+0x186b+-0x7*0x6ba,-0x1*0xe5+0x1a0d+-0x2f*0x89,-0x75*0x3a+-0x6*-0x321+0x7be,-0x608+-0x26ca+0x2cd4,0x2462+-0x8*-0x281+-0x3866,-0x832+-0x2239+0x2a6f,0xae8*0x1+0x79f*0x1+-0x1*0x1283,-0x5f+-0x16b9+0x1*0x171a],Cx=['INT8','UINT8','INT16','UINT16','INT32','UINT32','FLOAT32','FLOAT16'],Kc=[Uint8Array,Uint16Array,Uint32Array],Px=[0x24c1*0x1+-0x153d+-0xd1*0x13,0x161a+-0x1*0x1e5+-0x1*0x1433,-0x6be*-0x1+0xf6a*0x1+-0x1624],JS=new Map([['float','f32'],['vec2','vec2f'],['vec3','vec3f'],['vec4','vec4f'],['int','i32'],['ivec2','vec2i'],['ivec3','vec3i'],['ivec4','vec4i'],['uint','u32'],['uvec2','vec2u'],['uvec3','vec3u'],['uvec4','vec4u']]),Le={};Le[Pe]=-0x5*-0x733+-0xaa0+-0x195f,Le[gs]=0x1e29+0x1ed*0x1+-0x2015,Le[gi]=0x62*0x25+-0xce1+-0x147,Le[us]=0x264f+0xcc4+-0x3310,Le[Wt]=-0x24bc*-0x1+0x22d*0x1+-0x26e5,Le[is]=-0xb74+0xab*0x11+0x1e,Le[va]=0x2f2*0x1+-0x9*0x96+-0x2*-0x12d,Le[hl]=-0x1a58+-0xa*-0x3ce+-0xbad,Le[dl]=-0x24fb*0x1+-0x74c+-0x255*-0x13,Le[fl]=-0x144d+0x143a+0x1c,Le[ul]=0xa6a+-0x94*-0xe+-0x1278,Le[pl]=0x1*-0x2f+-0xd13+0xf*0xe3,Le[ml]=0xe2*-0x1e+-0x3*-0x101+0x1785,Le[yi]=0xb22*-0x1+-0x313+0x2*0x721,Le[Cf]=0x8*0x10f+-0x2576*0x1+0x2*0xe7f,Le[$c]=0x353*0x2+0x143a+0x3*-0x8f5,Le[Ju]=-0x944+0xe8d+-0x547,Le[ep]=0xfb*-0xb+0x1ec9*0x1+0x1*-0x13fd,Le[tp]=0x45f+-0x126f+0xe14,Le[Z0]=0x57*-0x13+-0xf2*-0x7+-0x24,Le[Q0]=0x6f*-0x11+-0x1*-0x17a8+0x1*-0x1043,Le[J0]=0x13*-0x8e+-0x3*-0xc07+-0x1*0x1984,Le[ko]=0x59*-0x65+0x25b5+-0x290*0x1,Le[Uo]=-0x13ea+0x1fe4+0x1*-0xbf1,Le[ex]=-0x77*0x27+0x115f+0xcc,Le[sp]=-0x268f+-0x1a68+0x4102,Le[ip]=-0x3a4+-0x1*0xd84+0x1134,Le[Xc]=0x26*0xb2+-0x18e*-0x13+-0x37e9,Le[rp]=0x2528+0x1*-0x9f7+-0x1*0x1b23,Le[bn]=-0x5e7*0x5+-0x2*0x7e1+-0x6*-0x78e;const dr=class dr{static['clearGpuMa'+'rkers'](){dr['markers']['length']=0x20*-0xce+-0x1688+-0x3048*-0x1;}static['pushGpuMar'+'ker'](_0x14150f,_0x19c555){dr['markers']['push'](_0x19c555),_0x14150f['pushMarker'](_0x19c555);}static['popGpuMark'+'er'](_0x3a66ba){dr['markers']['length']&&dr['markers']['pop'](),_0x3a66ba['popMarker']();}static['toString'](){return dr['markers']['join']('\x20|\x20');}};h(dr,'markers',[]);let Q=dr,Mx=-0x213e+-0x2323+0x4461;class ed{constructor(_0x57ae64,_0x10bb4c){h(this,'slot',-(-0x2e6+-0x1*0x1a05+0x4*0x73b)),h(this,'scopeId',null),(this['name']=_0x57ae64,this['visibility']=_0x10bb4c);}}class hp extends ed{}class Dx extends ed{constructor(_0x21839,_0x2e45d2,_0x25b5a7=!(0xe*-0x20b+0x1a64*-0x1+-0x1255*-0x3)){super(_0x21839,_0x2e45d2),h(this,'format',''),(this['readOnly']=_0x25b5a7,w['assert'](_0x25b5a7||!(_0x2e45d2&lp),'Storage\x20bu'+'ffer\x20can\x20o'+'nly\x20be\x20use'+'d\x20in\x20read-'+'only\x20mode\x20'+'in\x20SHADERS'+'TAGE_VERTE'+'X.'));}}class pm extends ed{constructor(_0x7ab648,_0xd0ceab,_0x182a11=BS,_0x1e4904=rx,_0x5260a7=!(-0x1904+-0x1398+-0x2c9c*-0x1),_0x2275f0=null){super(_0x7ab648,_0xd0ceab),this['textureDim'+'ension']=_0x182a11,this['sampleType']=_0x1e4904,this['hasSampler']=_0x5260a7,this['samplerNam'+'e']=_0x2275f0??_0x7ab648+'_sampler';}}class Ix extends ed{constructor(_0x54c8ad,_0x5e2893=Ne,_0x47dc2c=BS,_0x198cbc=!(-0x1025+-0x1*0xc73+-0x7a*-0x3c),_0x4e2318=!(-0x835+0x25*-0x2d+0xeb7)){super(_0x54c8ad,Ex),this['format']=_0x5e2893,this['textureDim'+'ension']=_0x47dc2c,this['write']=_0x198cbc,this['read']=_0x4e2318;}}class ey{constructor(_0x1863db,_0x9438e){h(this,'uniformBuf'+'ferFormats',[]),h(this,'textureFor'+'mats',[]),h(this,'storageTex'+'tureFormat'+'s',[]),h(this,'storageBuf'+'ferFormats',[]),(this['id']=Mx++,ya['setName'](this,'BindGroupF'+'ormat_'+this['id']),w['assert'](_0x9438e));let _0xd6878b=0xfb*-0xf+-0x5*0x2de+0x1d0b;_0x9438e['forEach'](_0x44c505=>{_0x44c505['slot']=_0xd6878b++,_0x44c505 instanceof pm&&_0x44c505['hasSampler']&&_0xd6878b++,_0x44c505 instanceof hp?this['uniformBuf'+'ferFormats']['push'](_0x44c505):_0x44c505 instanceof pm?this['textureFor'+'mats']['push'](_0x44c505):_0x44c505 instanceof Ix?this['storageTex'+'tureFormat'+'s']['push'](_0x44c505):_0x44c505 instanceof Dx?this['storageBuf'+'ferFormats']['push'](_0x44c505):w['assert']('Invalid\x20bi'+'nd\x20format',_0x44c505);}),this['device']=_0x1863db;const _0x1005db=_0x1863db['scope'];this['bufferForm'+'atsMap']=new Map(),this['uniformBuf'+'ferFormats']['forEach']((_0x1f816b,_0x1be8a5)=>this['bufferForm'+'atsMap']['set'](_0x1f816b['name'],_0x1be8a5)),this['textureFor'+'matsMap']=new Map(),this['textureFor'+'mats']['forEach']((_0x7adf7e,_0x390819)=>{this['textureFor'+'matsMap']['set'](_0x7adf7e['name'],_0x390819),_0x7adf7e['scopeId']=_0x1005db['resolve'](_0x7adf7e['name']);}),this['storageTex'+'tureFormat'+'sMap']=new Map(),this['storageTex'+'tureFormat'+'s']['forEach']((_0x596756,_0x50be2e)=>{this['storageTex'+'tureFormat'+'sMap']['set'](_0x596756['name'],_0x50be2e),_0x596756['scopeId']=_0x1005db['resolve'](_0x596756['name']);}),this['storageBuf'+'ferFormats'+'Map']=new Map(),this['storageBuf'+'ferFormats']['forEach']((_0x5f4a00,_0x3f10a4)=>{this['storageBuf'+'ferFormats'+'Map']['set'](_0x5f4a00['name'],_0x3f10a4),_0x5f4a00['scopeId']=_0x1005db['resolve'](_0x5f4a00['name']);}),this['impl']=_0x1863db['createBind'+'GroupForma'+'tImpl'](this),w['trace'](p0,'Alloc:\x20Id\x20'+this['id']+(',\x20while\x20re'+'ndering\x20[')+Q['toString']()+']',this);}['destroy'](){this['impl']['destroy']();}['getTexture'](_0xbfc031){const _0x4ba6b0=this['textureFor'+'matsMap']['get'](_0xbfc031);return _0x4ba6b0!==void(0x758+-0x3*-0x191+-0xc0b)?this['textureFor'+'mats'][_0x4ba6b0]:null;}['getStorage'+'Texture'](_0x37dd72){const _0x2d60bd=this['storageTex'+'tureFormat'+'sMap']['get'](_0x37dd72);return _0x2d60bd!==void(0x3ee*-0x8+0x1*-0x1c3+0x2133)?this['storageTex'+'tureFormat'+'s'][_0x2d60bd]:null;}['loseContex'+'t'](){}}class Kt{constructor(){h(this,'_cache',new Map());}['get'](_0x3296bc,_0x47468e){return this['_cache']['has'](_0x3296bc)||(this['_cache']['set'](_0x3296bc,_0x47468e()),_0x3296bc['on']('destroy',()=>{this['remove'](_0x3296bc);}),_0x3296bc['on']('devicelost',()=>{var _0x20bd26,_0x142c3f;(_0x142c3f=(_0x20bd26=this['_cache']['get'](_0x3296bc))==null?void(-0x6b2*0x5+0x6e*-0x4f+0x436c):_0x20bd26['loseContex'+'t'])==null||_0x142c3f['call'](_0x20bd26,_0x3296bc);})),this['_cache']['get'](_0x3296bc);}['remove'](_0x558d97){var _0x30379f,_0x2093d0;(_0x2093d0=(_0x30379f=this['_cache']['get'](_0x558d97))==null?void(-0x121d+-0x33+-0x8*-0x24a):_0x30379f['destroy'])==null||_0x2093d0['call'](_0x30379f,_0x558d97),this['_cache']['delete'](_0x558d97);}}class $i{static['calcLevelD'+'imension'](_0xfd1800,_0x44b902){return Math['max'](_0xfd1800>>_0x44b902,0x304*0x4+-0x1307+0x6f8);}static['calcMipLev'+'elsCount'](_0x5cdee4,_0xb68cbd,_0x27600c=-0x1ed2+0x1*-0x12dd+-0x3c*-0xd4){return 0x11f4+0x48b*0x3+-0x1f94+Math['floor'](Math['log2'](Math['max'](_0x5cdee4,_0xb68cbd,_0x27600c)));}static['calcLevelG'+'puSize'](_0x420aa1,_0x57373d,_0x2f03d2,_0xbeff80){var _0x4bc03d;const _0xa14b31=Nt['get'](_0xbeff80);w['assert'](_0xa14b31!==void(0x1ede*-0x1+-0x9b*0x31+0x3c89),'Invalid\x20pi'+'xel\x20format'+'\x20'+_0xbeff80);const _0xccf539=((_0x4bc03d=Nt['get'](_0xbeff80))==null?void(0x1*-0x1ebb+-0x1d70+-0x3c2b*-0x1):_0x4bc03d['size'])??0x57*0x33+0x9*-0xab+-0x7*0x19e;if(_0xccf539>0x1*0x6df+-0x1*-0x1f91+-0x2670)return _0x420aa1*_0x57373d*_0x2f03d2*_0xccf539;const _0x55c441=_0xa14b31['blockSize']??0x341*-0x3+-0x2ef*0xa+-0x1*-0x2719;let _0x3f1cb7=Math['floor']((_0x420aa1+(0x1d51+-0x6a0*0x3+-0x96e*0x1))/(-0x199e+-0x17b*-0x4+0x13b6));const _0x38d343=Math['floor']((_0x57373d+(0x2e3*0xa+-0xe11+-0xeca))/(0x1e90+-0x1552+-0x93a)),_0x14c62c=Math['floor']((_0x2f03d2+(0x1ca*0xe+-0x8c1+-0x8*0x209))/(0x25*0x81+0x1*0x1e6b+-0x310c));return(_0xbeff80===ll||_0xbeff80===cl)&&(_0x3f1cb7=Math['max'](Math['floor'](_0x3f1cb7/(-0x1*-0x250c+0xc*0x4c+-0x289a)),-0x1efb+-0x3*-0x3fa+0x12*0x10f)),_0x3f1cb7*_0x38d343*_0x14c62c*_0x55c441;}static['calcGpuSiz'+'e'](_0x246d31,_0x504b43,_0x5d6b8a,_0x19b068,_0x329dc6,_0x4ec25a){let _0x2fae5e=-0x1318+-0x1e26+0x106a*0x3;for(;_0x2fae5e+=$i['calcLevelG'+'puSize'](_0x246d31,_0x504b43,_0x5d6b8a,_0x19b068),!(!_0x329dc6||_0x246d31===-0xf16*0x2+0x1*0xc3d+0x11f0&&_0x504b43===-0x1035+-0x1b4b+0x103*0x2b&&_0x5d6b8a===-0xd0b+0x1*-0x22db+-0x1*-0x2fe7);)_0x246d31=Math['max'](_0x246d31>>-0x20fb*0x1+0x1eef+0x20d,0x46f*-0x2+-0xee8+0x3*0x7ed),_0x504b43=Math['max'](_0x504b43>>-0x42a+-0x53d+0x25a*0x4,-0x1c*-0x8f+-0xf6a*0x2+0xf31),_0x5d6b8a=Math['max'](_0x5d6b8a>>0x13*0x6b+0xd2f+0x1*-0x151f,0x3c9*0xa+0x417*0x5+-0x34*0x11f);return _0x2fae5e*(_0x4ec25a?0x2619+0x22*0x31+-0x2c95:-0x17*0x2f+0x6db+-0x2a1);}}let Lx=-0x687*0x1+0x1162+-0xadb;class _e{constructor(_0x1299c0,_0xa398d4={}){h(this,'name'),h(this,'_gpuSize',-0x135*0x9+-0x139*-0x8+0x115),h(this,'id',Lx++),h(this,'_invalid',!(-0x1*0x19ab+0x18ba+0xf2)),h(this,'_lockedLev'+'el',-(0x1244+0x1d07+-0x2f4a)),h(this,'_lockedMod'+'e',Ll),h(this,'renderVers'+'ionDirty',0x162a+0x218e+-0x37b8),h(this,'_storage',!(0x1*0x2329+0xcb9+-0x7*0x6d7)),h(this,'_numLevels',-0xfbf*-0x2+-0x2045+0xc7),h(this,'_numLevels'+'Requested');var _0x26308b;this['device']=_0x1299c0,w['assert'](this['device'],'Texture\x20co'+'nstructor\x20'+'requires\x20a'+'\x20graphicsD'+'evice\x20to\x20b'+'e\x20valid'),w['assert'](!_0xa398d4['width']||Number['isInteger'](_0xa398d4['width']),'Texture\x20wi'+'dth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0xa398d4),w['assert'](!_0xa398d4['height']||Number['isInteger'](_0xa398d4['height']),'Texture\x20he'+'ight\x20must\x20'+'be\x20an\x20inte'+'ger\x20number'+',\x20got',_0xa398d4),w['assert'](!_0xa398d4['depth']||Number['isInteger'](_0xa398d4['depth']),'Texture\x20de'+'pth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0xa398d4),this['name']=_0xa398d4['name']??'',this['_width']=Math['floor'](_0xa398d4['width']??-0x935*0x1+-0x2*0x48e+-0xd*-0x169),this['_height']=Math['floor'](_0xa398d4['height']??-0x6de+0x23df+0xb5*-0x29),this['_format']=_0xa398d4['format']??Ne,this['_compresse'+'d']=Y0(this['_format']),this['_integerFo'+'rmat']=rn(this['_format']),this['_integerFo'+'rmat']&&(_0xa398d4['minFilter']=Te,_0xa398d4['magFilter']=Te),this['_volume']=_0xa398d4['volume']??!(0x148c+0x346*0x9+-0x3201),this['_depth']=Math['floor'](_0xa398d4['depth']??0x2450+-0x240c+-0x1*0x43),this['_arrayLeng'+'th']=Math['floor'](_0xa398d4['arrayLengt'+'h']??-0x5*0x75d+-0x349*0x1+0x3*0xd5e),this['_storage']=_0xa398d4['storage']??!(0x14c6+-0x1*0x3a2+0x1123*-0x1),this['_cubemap']=_0xa398d4['cubemap']??!(0x22ec+-0xb*-0x139+0x182f*-0x2),this['_flipY']=_0xa398d4['flipY']??!(-0x165*0x17+0x2249*-0x1+0x425d),this['_premultip'+'lyAlpha']=_0xa398d4['premultipl'+'yAlpha']??!(0x2*-0xfea+-0x9*-0x265+0x149*0x8),this['_mipmaps']=_0xa398d4['mipmaps']??!(0x230+-0x3da*0x8+0x1ca0),this['_numLevels'+'Requested']=_0xa398d4['numLevels'],_0xa398d4['numLevels']!==void(-0x453*-0x7+0x14de+-0x3323)&&(this['_numLevels']=_0xa398d4['numLevels']),this['_updateNum'+'Level'](),this['_minFilter']=_0xa398d4['minFilter']??ha,this['_magFilter']=_0xa398d4['magFilter']??vt,this['_anisotrop'+'y']=_0xa398d4['anisotropy']??0x3*-0xbab+0x152*0x10+0xde2,this['_addressU']=_0xa398d4['addressU']??yt,this['_addressV']=_0xa398d4['addressV']??yt,this['_addressW']=_0xa398d4['addressW']??yt,this['_compareOn'+'Read']=_0xa398d4['compareOnR'+'ead']??!(-0x69d*0x1+0xc2b+-0x58d),this['_compareFu'+'nc']=_0xa398d4['compareFun'+'c']??Gc,this['_type']=_0xa398d4['type']??Ms,w['assert'](!_0xa398d4['hasOwnProp'+'erty']('rgbm'),'Use\x20option'+'s.type.'),w['assert'](!_0xa398d4['hasOwnProp'+'erty']('swizzleGGG'+'R'),'Use\x20option'+'s.type.'),this['projection']=ax,this['_cubemap']?this['projection']=Mf:_0xa398d4['projection']&&_0xa398d4['projection']!==Mf&&(this['projection']=_0xa398d4['projection']),this['profilerHi'+'nt']=_0xa398d4['profilerHi'+'nt']??0x1*-0x9fd+0x1a89+-0x846*0x2,this['_levels']=_0xa398d4['levels'];const _0x5a72db=!!_0xa398d4['levels'];this['_levels']||this['_clearLeve'+'ls'](),this['recreateIm'+'pl'](_0x5a72db),_0x1299c0['textures']['push'](this),w['trace'](sm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+'\x20['+((_0x26308b=Nt['get'](this['format']))==null?void(-0x1377*0x2+0x1527+0x5ed*0x3):_0x26308b['name'])+']'+(this['cubemap']?'[Cubemap]':'')+(this['volume']?'[Volume]':'')+(this['array']?'[Array]':'')+('[MipLevels'+':')+this['numLevels']+']',this);}['destroy'](){w['trace'](sm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x5af980=this['device'];if(_0x5af980){const _0x165245=_0x5af980['textures']['indexOf'](this);_0x165245!==-(-0x30e*-0x6+-0x667*-0x1+-0x2*0xc5d)&&_0x5af980['textures']['splice'](_0x165245,-0x1e63+-0x1b28+-0x1fc*-0x1d),_0x5af980['scope']['removeValu'+'e'](this),this['impl']['destroy'](_0x5af980),this['adjustVram'+'SizeTracki'+'ng'](_0x5af980['_vram'],-this['_gpuSize']),this['_levels']=null,this['device']=null;}}['recreateIm'+'pl'](_0x1f18fc=!(-0x1*0x697+-0xe03+0x149a)){var _0xc5b731;const {device:_0x41ecbb}=this;(_0xc5b731=this['impl'])==null||_0xc5b731['destroy'](_0x41ecbb),this['impl']=null,this['impl']=_0x41ecbb['createText'+'ureImpl'](this),this['dirtyAll'](),_0x1f18fc&&this['upload']();}['_clearLeve'+'ls'](){this['_levels']=this['_cubemap']?[[null,null,null,null,null,null]]:[null];}['resize'](_0x4656eb,_0x2e7e52,_0xe6d770=-0x5*-0x229+-0x18ad*0x1+0xde1){const _0x4755fb=this['device'];this['adjustVram'+'SizeTracki'+'ng'](_0x4755fb['_vram'],-this['_gpuSize']),this['impl']['destroy'](_0x4755fb),this['_clearLeve'+'ls'](),this['_width']=Math['floor'](_0x4656eb),this['_height']=Math['floor'](_0x2e7e52),this['_depth']=Math['floor'](_0xe6d770),this['_updateNum'+'Level'](),this['impl']=_0x4755fb['createText'+'ureImpl'](this),this['dirtyAll']();}['loseContex'+'t'](){this['impl']['loseContex'+'t'](),this['dirtyAll']();}['adjustVram'+'SizeTracki'+'ng'](_0x1a5613,_0x2e8caf){w['trace'](h0,this['id']+'\x20'+this['name']+'\x20size:\x20'+_0x2e8caf+('\x20vram.text'+'ure:\x20')+_0x1a5613['tex']+'\x20=>\x20'+(_0x1a5613['tex']+_0x2e8caf)),_0x1a5613['tex']+=_0x2e8caf,this['profilerHi'+'nt']===Pf?_0x1a5613['texShadow']+=_0x2e8caf:this['profilerHi'+'nt']===Er?_0x1a5613['texAsset']+=_0x2e8caf:this['profilerHi'+'nt']===US&&(_0x1a5613['texLightma'+'p']+=_0x2e8caf);}['propertyCh'+'anged'](_0x11d5ec){this['impl']['propertyCh'+'anged'](_0x11d5ec),this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion'];}['_updateNum'+'Level'](){const _0x3f8c05=this['mipmaps']?$i['calcMipLev'+'elsCount'](this['width'],this['height']):0xfb0+0x1a53+-0x2a02*0x1,_0x13d5fc=this['_numLevels'+'Requested'];_0x13d5fc!==void(-0xb3c+-0x1824+0x2360)&&_0x13d5fc>_0x3f8c05&&w['warn']('Texture#nu'+'mLevels:\x20r'+'equested\x20m'+'ip\x20level\x20c'+'ount\x20is\x20gr'+'eater\x20than'+'\x20the\x20maxim'+'um\x20possibl'+'e,\x20will\x20be'+'\x20clamped\x20t'+'o',_0x3f8c05,this),this['_numLevels']=Math['min'](_0x13d5fc??_0x3f8c05,_0x3f8c05),this['_mipmaps']=this['_numLevels']>0x5*-0x74f+-0x14f1*-0x1+0xf9b;}get['lockedMode'](){return this['_lockedMod'+'e'];}set['minFilter'](_0x259c60){this['_minFilter']!==_0x259c60&&(rn(this['_format'])?w['warn']('Texture#mi'+'nFilter:\x20m'+'inFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_minFilter']=_0x259c60,this['propertyCh'+'anged'](WS)));}get['minFilter'](){return this['_minFilter'];}set['magFilter'](_0x3f17d0){this['_magFilter']!==_0x3f17d0&&(rn(this['_format'])?w['warn']('Texture#ma'+'gFilter:\x20m'+'agFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_magFilter']=_0x3f17d0,this['propertyCh'+'anged']($S)));}get['magFilter'](){return this['_magFilter'];}set['addressU'](_0x379e4c){this['_addressU']!==_0x379e4c&&(this['_addressU']=_0x379e4c,this['propertyCh'+'anged'](XS));}get['addressU'](){return this['_addressU'];}set['addressV'](_0x434829){this['_addressV']!==_0x434829&&(this['_addressV']=_0x434829,this['propertyCh'+'anged'](qS));}get['addressV'](){return this['_addressV'];}set['addressW'](_0x2dcf71){if(!this['_volume']){w['warn']('pc.Texture'+'#addressW:'+'\x20Can\x27t\x20set'+'\x20W\x20address'+'ing\x20mode\x20f'+'or\x20a\x20non-3'+'D\x20texture.');return;}_0x2dcf71!==this['_addressW']&&(this['_addressW']=_0x2dcf71,this['propertyCh'+'anged'](jS));}get['addressW'](){return this['_addressW'];}set['compareOnR'+'ead'](_0x536d5e){this['_compareOn'+'Read']!==_0x536d5e&&(this['_compareOn'+'Read']=_0x536d5e,this['propertyCh'+'anged'](YS));}get['compareOnR'+'ead'](){return this['_compareOn'+'Read'];}set['compareFun'+'c'](_0x30327b){this['_compareFu'+'nc']!==_0x30327b&&(this['_compareFu'+'nc']=_0x30327b,this['propertyCh'+'anged'](KS));}get['compareFun'+'c'](){return this['_compareFu'+'nc'];}set['anisotropy'](_0x39fbd9){this['_anisotrop'+'y']!==_0x39fbd9&&(this['_anisotrop'+'y']=_0x39fbd9,this['propertyCh'+'anged'](ZS));}get['anisotropy'](){return this['_anisotrop'+'y'];}set['mipmaps'](_0x10cb7d){this['_mipmaps']!==_0x10cb7d&&(this['device']['isWebGPU']?w['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20is\x20curr'+'ently\x20not\x20'+'allowed\x20to'+'\x20be\x20change'+'d\x20on\x20WebGP'+'U,\x20create\x20'+'the\x20textur'+'e\x20appropri'+'ately.',this):rn(this['_format'])?w['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20cannot\x20'+'be\x20changed'+'\x20on\x20an\x20int'+'eger\x20textu'+'re,\x20will\x20r'+'emain\x20fals'+'e',this):this['_mipmaps']=_0x10cb7d,_0x10cb7d&&(this['_needsMipm'+'apsUpload']=!(0x1*-0x2588+0x1d46+-0x2*-0x421)));}get['mipmaps'](){return this['_mipmaps'];}get['numLevels'](){return this['_numLevels'];}get['storage'](){return this['_storage'];}get['width'](){return this['_width'];}get['height'](){return this['_height'];}get['depth'](){return this['_depth'];}get['format'](){return this['_format'];}get['cubemap'](){return this['_cubemap'];}get['gpuSize'](){const _0x400662=this['pot']&&this['_mipmaps']&&!(this['_compresse'+'d']&&this['_levels']['length']===-0x1f*-0x79+-0x4*-0x855+-0x2ffa);return $i['calcGpuSiz'+'e'](this['_width'],this['_height'],this['_depth'],this['_format'],_0x400662,this['_cubemap']);}get['array'](){return this['_arrayLeng'+'th']>0x22*0xde+-0x913+-0x415*0x5;}get['arrayLengt'+'h'](){return this['_arrayLeng'+'th'];}get['volume'](){return this['_volume'];}set['type'](_0x19150d){this['_type']!==_0x19150d&&(this['_type']=_0x19150d,this['device']['_shadersDi'+'rty']=!(0x47*0x43+0x163d+0x82a*-0x5));}get['type'](){return this['_type'];}set['srgb'](_0x3c813f){var _0x4c795d,_0x3725d4,_0x4ca499,_0xd81d54;const _0x26c33e=Wc(this['format']);if(_0x3c813f!==_0x26c33e){if(_0x3c813f){const _0x17a59f=zh(this['format']);this['_format']!==_0x17a59f&&(w['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20sRGB\x20'+'equivalent'+':\x20')+((_0x4c795d=Nt['get'](this['format']))==null?void(0x1e3e+-0x125e+-0xbe0):_0x4c795d['name'])+'\x20->\x20'+((_0x3725d4=Nt['get'](_0x17a59f))==null?void(0x3*-0x472+0x11*0x61+-0x5*-0x161):_0x3725d4['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x17a59f,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(0x2a0*0x3+0xb52+-0x1332));}else{const _0x2e7212=K0(this['format']);this['_format']!==_0x2e7212&&(w['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20linea'+'r\x20equivale'+'nt:\x20')+((_0x4ca499=Nt['get'](this['format']))==null?void(0xd*-0x163+0x2030+0x7d*-0x1d):_0x4ca499['name'])+'\x20->\x20'+((_0xd81d54=Nt['get'](_0x2e7212))==null?void(-0x1fd6+-0x1*-0x9c9+0x160d):_0xd81d54['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x2e7212,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(-0xb*0x57+0x122b+-0xe6e));}}}get['srgb'](){return Wc(this['format']);}set['flipY'](_0x29a57f){this['_flipY']!==_0x29a57f&&(this['_flipY']=_0x29a57f,this['_needsUplo'+'ad']=!(0x12d9+-0x19d1+0xdf*0x8));}get['flipY'](){return this['_flipY'];}set['premultipl'+'yAlpha'](_0x5b5aef){this['_premultip'+'lyAlpha']!==_0x5b5aef&&(this['_premultip'+'lyAlpha']=_0x5b5aef,this['_needsUplo'+'ad']=!(-0x13*-0xdf+-0x11e4+0x157));}get['premultipl'+'yAlpha'](){return this['_premultip'+'lyAlpha'];}get['pot'](){return Y['powerOfTwo'](this['_width'])&&Y['powerOfTwo'](this['_height']);}get['encoding'](){switch(this['type']){case Ki:return'rgbm';case qc:return'rgbe';case Bo:return'rgbp';}return LS(this['format'])?'srgb':'linear';}['dirtyAll'](){this['_levelsUpd'+'ated']=this['_cubemap']?[[!(0x1*0x23d0+0xd36+-0x3106),!(-0x23f*-0x10+0xf5b*0x2+0x26*-0x1c1),!(-0x19ef+0x240c*-0x1+0x81*0x7b),!(0x14a1+-0x25d+-0x1244),!(-0x1*-0xbf5+0x1c65+-0x142d*0x2),!(-0xdb3+-0x87e+0x13*0x12b)]]:[!(0x8*-0x451+-0x1162+-0x3*-0x114e)],this['_needsUplo'+'ad']=!(-0x1226+-0xc7a*0x3+0x3794),this['_needsMipm'+'apsUpload']=this['_mipmaps'],this['_mipmapsUp'+'loaded']=!(-0x175+0x138c+-0x1216),this['propertyCh'+'anged'](Ax);}['lock'](_0x4f642b={}){_0x4f642b['level']??(_0x4f642b['level']=0x1*-0x26f4+0x11d4+0x1a*0xd0),_0x4f642b['face']??(_0x4f642b['face']=0x4*-0x748+0x12ac+0xa74),_0x4f642b['mode']??(_0x4f642b['mode']=fd),w['assert'](this['_lockedMod'+'e']===Ll,'The\x20textur'+'e\x20is\x20alrea'+'dy\x20locked.'+'\x20Call\x20`tex'+'ture.unloc'+'k()`\x20befor'+'e\x20attempti'+'ng\x20to\x20lock'+'\x20again.',this),w['assert'](_0x4f642b['mode']===kS||_0x4f642b['mode']===fd,'Cannot\x20loc'+'k\x20a\x20textur'+'e\x20with\x20TEX'+'TURELOCK_N'+'ONE.\x20To\x20un'+'lock\x20a\x20tex'+'ture,\x20call'+'\x20`texture.'+'unlock()`.',this),this['_lockedMod'+'e']=_0x4f642b['mode'],this['_lockedLev'+'el']=_0x4f642b['level'];const _0x5790af=this['cubemap']?this['_levels'][_0x4f642b['face']]:this['_levels'];if((_0x5790af==null?void(-0x1dc4+-0x5*0x194+0x25a8):_0x5790af[_0x4f642b['level']])===null){const _0x413404=Math['max'](-0x162d+0x7f7+-0xe37*-0x1,this['_width']>>_0x4f642b['level']),_0x26507d=Math['max'](-0x3d9*0x8+-0x860+0x2729,this['_height']>>_0x4f642b['level']),_0x384fcb=Math['max'](0x1*-0x683+-0xa9*0x1e+-0x1a52*-0x1,this['_depth']>>_0x4f642b['level']),_0x4b6ddb=new ArrayBuffer($i['calcLevelG'+'puSize'](_0x413404,_0x26507d,_0x384fcb,this['_format']));_0x5790af[_0x4f642b['level']]=new(RS(this['_format']))(_0x4b6ddb);}return _0x5790af==null?void(0x51a*0x6+0x1f24+-0x10*0x3dc):_0x5790af[_0x4f642b['level']];}['setSource'](_0x1aa98b,_0x85906d=-0x3*-0xb34+0x120*-0xe+-0x11dc){let _0x1c3fb2=!(0x61*-0x11+-0x1f09+0x257b),_0x239bd1,_0x46c2d7;if(this['_cubemap']){if(_0x1aa98b[0x17f*0xb+-0x1a9e+0xa29]){_0x239bd1=_0x1aa98b[0x102d*-0x1+-0x1*0x4d2+0x14ff]['width']||-0x196f+-0x9*0x36+-0x1*-0x1b55,_0x46c2d7=_0x1aa98b[0x9c9*-0x1+0x16b8+-0xcef]['height']||0x1*0x1cbb+-0x15bc+0x3*-0x255;for(let _0x581f09=-0x106e+-0x13bf+0x1b*0x157;_0x581f09<0xdc3+-0x4ec+0x3d*-0x25;_0x581f09++){const _0x4b6058=_0x1aa98b[_0x581f09];if(!_0x4b6058||_0x4b6058['width']!==_0x239bd1||_0x4b6058['height']!==_0x46c2d7||!this['device']['_isBrowser'+'Interface'](_0x4b6058)){_0x1c3fb2=!(-0x62*0x3d+-0x6f3+0x1e4d);break;}}}else _0x1c3fb2=!(-0x259a+0x1c90+0x90a);if(!_0x1c3fb2){for(let _0x59f2b4=0x20d*0x9+0x2*-0xd17+0x1*0x7b9;_0x59f2b4<0x1a0d+-0x12fd+0x35*-0x22;_0x59f2b4++)this['_levels'][_0x85906d][_0x59f2b4]!==_0x1aa98b[_0x59f2b4]&&(this['_levelsUpd'+'ated'][_0x85906d][_0x59f2b4]=!(-0x1b70+-0x6*-0xe9+0x15fa));}}else this['device']['_isBrowser'+'Interface'](_0x1aa98b)||(_0x1c3fb2=!(0x5de*-0x5+0x1*-0x1091+0x2de7)),_0x1c3fb2||(_0x1aa98b!==this['_levels'][_0x85906d]&&(this['_levelsUpd'+'ated'][_0x85906d]=!(0xf*-0x1f2+-0x3*-0x976+0xcc)),_0x1aa98b instanceof HTMLVideoElement?(_0x239bd1=_0x1aa98b['videoWidth'],_0x46c2d7=_0x1aa98b['videoHeigh'+'t']):(_0x239bd1=_0x1aa98b['width'],_0x46c2d7=_0x1aa98b['height']));if(_0x1c3fb2){if(this['_width']=-0x3b9*0x3+-0x230a+0x1*0x2e39,this['_height']=0x11*0x49+0x2644+-0x3eb*0xb,this['_cubemap']){for(let _0x202271=0xe2b+-0x20e3+0x12b8;_0x202271<-0xee7+-0xf39+-0x1c6*-0x11;_0x202271++)this['_levels'][_0x85906d][_0x202271]=null,this['_levelsUpd'+'ated'][_0x85906d][_0x202271]=!(-0x1*0x1764+-0x5*-0x23b+0x1*0xc3d);}else this['_levels'][_0x85906d]=null,this['_levelsUpd'+'ated'][_0x85906d]=!(0x1*0x102d+0xe*-0x76+-0x9b9);}else _0x85906d===0x369*0x3+-0x9d*0x2b+0x1024&&(this['_width']=_0x239bd1,this['_height']=_0x46c2d7),this['_levels'][_0x85906d]=_0x1aa98b;(this['_invalid']!==_0x1c3fb2||!_0x1c3fb2)&&(this['_invalid']=_0x1c3fb2,this['upload']());}['getSource'](_0x2d658e=-0x1ac8+-0x1*0x2413+0x3edb){return this['_levels'][_0x2d658e];}['unlock'](){this['_lockedMod'+'e']===Ll&&w['warn']('pc.Texture'+'#unlock:\x20A'+'ttempting\x20'+'to\x20unlock\x20'+'a\x20texture\x20'+'that\x20is\x20no'+'t\x20locked.',this),this['_lockedMod'+'e']===fd&&this['upload'](),this['_lockedLev'+'el']=-(0x646+-0x667+0x22),this['_lockedMod'+'e']=Ll;}['upload'](){var _0x544269,_0x16e36e;this['_needsUplo'+'ad']=!(-0x1e*0x133+0xf88+0x2*0xa39),this['_needsMipm'+'apsUpload']=this['_mipmaps'],(_0x16e36e=(_0x544269=this['impl'])['uploadImme'+'diate'])==null||_0x16e36e['call'](_0x544269,this['device'],this);}['read'](_0x570dc8,_0xd9d64b,_0x563d67,_0x577c17,_0x170913={}){var _0x2e9b5a,_0x66cd20;return(_0x66cd20=(_0x2e9b5a=this['impl'])['read'])==null?void(0x126c+-0x8*0xd3+-0xbd4):_0x66cd20['call'](_0x2e9b5a,_0x570dc8,_0xd9d64b,_0x563d67,_0x577c17,_0x170913);}['write'](_0x3e982c,_0x3bf78b,_0x186f51,_0x4fd13e,_0x55758d){var _0x3c1d65,_0x2afbe9;return(_0x2afbe9=(_0x3c1d65=this['impl'])['write'])==null?void(0x1ec4+-0x8ad+0x41*-0x57):_0x2afbe9['call'](_0x3c1d65,_0x3e982c,_0x3bf78b,_0x186f51,_0x4fd13e,_0x55758d);}}const Rx={'white':[0xce9*0x1+0x566*-0x4+-0x7*-0x162,0x133b*-0x1+0x16d*0x7+0xa3f,-0x103c+0x146b*0x1+-0x22*0x18,0x2*-0xdd7+-0x5db+0x2288],'gray':[0x164c+0x18da+-0x2ea6,-0x124d+0x6b6+-0x1*-0xc17,-0x1ea7+-0x13*0xcd+0x5*0x946,-0x1*0x1d11+-0x8b*0x3f+0x1*0x4045],'black':[0x23c8+-0x49*0x13+-0x1e5d,-0x2*-0x15b+0xcc5+-0xf7b,0x488+0x916+-0x1*0xd9e,-0x1*-0x3ad+-0x1*0x2270+0x1fc2],'normal':[-0xb3*-0x8+0xe2e+-0x1346,0x200b+-0x4c*-0x6d+-0x39*0x11f,0x24b*-0xc+-0x3*0x85d+0x8ef*0x6,0x13*0x3d+-0x10*-0x1aa+-0x1e28],'pink':[-0x81e+0x2707+-0xef5*0x2,-0x1092+0x1e67+0xd55*-0x1,-0x1974+0xe6b*0x1+0xc08,-0x1fff+0x2*-0x443+-0x4*-0xa61]};class Ox{constructor(){h(this,'map',new Map());}['destroy'](){this['map']['forEach'](_0x25f351=>{_0x25f351['destroy']();});}}const Fx=new Kt(),oa=(_0x31e2e4,_0x4cabd1)=>{const _0x28cf71=Fx['get'](_0x31e2e4,()=>new Ox());if(!_0x28cf71['map']['has'](_0x4cabd1)){const _0x59aa69=new _e(_0x31e2e4,{'name':'built-in-t'+'exture-'+_0x4cabd1,'width':0x1,'height':0x1,'format':Ne}),_0x30713d=_0x59aa69['lock'](),_0xd355ab=Rx[_0x4cabd1];w['assert'](_0xd355ab,'Data\x20for\x20b'+'uilt-in\x20te'+'xture\x20\x27'+_0x4cabd1+('\x27\x20not\x20foun'+'d')),_0x30713d['set'](_0xd355ab),_0x59aa69['unlock'](),_0x28cf71['map']['set'](_0x4cabd1,_0x59aa69);}return _0x28cf71['map']['get'](_0x4cabd1);};let Nx=-0x9*0x1df+-0x1b4a+0xd*0x365;class ty{constructor(){h(this,'bindGroup'),h(this,'offsets',[]);}}class dp{constructor(_0x4f9d7b,_0x2763ba,_0x434dc6){h(this,'renderVers'+'ionUpdated',-(-0x6*-0x5de+0x84c+-0x2b7f)),h(this,'uniformBuf'+'fers'),h(this,'uniformBuf'+'ferOffsets',[]),(this['id']=Nx++,this['device']=_0x4f9d7b,this['format']=_0x2763ba,this['dirty']=!(0x1f8a+0x83*0xd+0x3*-0xcbb),this['impl']=_0x4f9d7b['createBind'+'GroupImpl'](this),this['textures']=[],this['storageTex'+'tures']=[],this['storageBuf'+'fers']=[],this['uniformBuf'+'fers']=[],this['defaultUni'+'formBuffer']=_0x434dc6,_0x434dc6&&this['setUniform'+'Buffer'](cp,_0x434dc6),w['trace'](u0,'Alloc:\x20Id\x20'+this['id'],this,_0x2763ba));}['destroy'](){this['impl']['destroy'](),this['impl']=null,this['format']=null,this['defaultUni'+'formBuffer']=null;}['setUniform'+'Buffer'](_0x2d679a,_0x15afce){const _0x18b088=this['format']['bufferForm'+'atsMap']['get'](_0x2d679a);w['assert'](_0x18b088!==void(0x51d+-0x6cc+0x1af),'Setting\x20a\x20'+'uniform\x20['+_0x2d679a+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['uniformBuf'+'fers'][_0x18b088]!==_0x15afce&&(this['uniformBuf'+'fers'][_0x18b088]=_0x15afce,this['dirty']=!(-0xb2*-0x3+-0x1e67+0x1c51));}['setStorage'+'Buffer'](_0x22c18a,_0x4a1a7d){const _0x1397e4=this['format']['storageBuf'+'ferFormats'+'Map']['get'](_0x22c18a);w['assert'](_0x1397e4!==void(0x1337*0x1+-0x50a+-0xe2d),'Setting\x20a\x20'+'storage\x20bu'+'ffer\x20['+_0x22c18a+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageBuf'+'fers'][_0x1397e4]!==_0x4a1a7d&&(this['storageBuf'+'fers'][_0x1397e4]=_0x4a1a7d,this['dirty']=!(0x1d8*-0x1+-0x2140+0x2318));}['setTexture'](_0x205a13,_0x2c23ab){const _0x410ec3=this['format']['textureFor'+'matsMap']['get'](_0x205a13);w['assert'](_0x410ec3!==void(0x1*-0x1475+0x21ad+-0x178*0x9),'Setting\x20a\x20'+'texture\x20['+_0x205a13+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['textures'][_0x410ec3]!==_0x2c23ab?(this['textures'][_0x410ec3]=_0x2c23ab,this['dirty']=!(0x19d9+0x188f+-0xc9a*0x4)):this['renderVers'+'ionUpdated']<_0x2c23ab['renderVers'+'ionDirty']&&(this['dirty']=!(0x188*0x12+0x84*-0x13+0x8e2*-0x2));}['setStorage'+'Texture'](_0x314648,_0x3dd6e9){const _0x192f1b=this['format']['storageTex'+'tureFormat'+'sMap']['get'](_0x314648);w['assert'](_0x192f1b!==void(0x3*0x791+-0x4ef+0x3*-0x5ec),'Setting\x20a\x20'+'storage\x20te'+'xture\x20['+_0x314648+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageTex'+'tures'][_0x192f1b]!==_0x3dd6e9?(this['storageTex'+'tures'][_0x192f1b]=_0x3dd6e9,this['dirty']=!(-0x1d08+-0xb3a+0x2842)):this['renderVers'+'ionUpdated']<_0x3dd6e9['renderVers'+'ionDirty']&&(this['dirty']=!(0xe81*-0x1+0x21d9+-0x1358));}['updateUnif'+'ormBuffers'](){for(let _0x3bd440=0x112+0x3*0x6f0+-0x15e2;_0x3bd440<this['uniformBuf'+'fers']['length'];_0x3bd440++)this['uniformBuf'+'fers'][_0x3bd440]['update']();}['update'](){const {textureFormats:_0x33cca8,storageTextureFormats:_0x5a29f1,storageBufferFormats:_0x3dd74c}=this['format'];for(let _0x35b72f=0x1*-0x52+-0x9d6*0x1+0xa28;_0x35b72f<_0x33cca8['length'];_0x35b72f++){const _0x39724d=_0x33cca8[_0x35b72f];let _0x215d7c=_0x39724d['scopeId']['value'];_0x215d7c||(_0x39724d['name']==='uSceneDept'+'hMap'&&(w['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x215d7c=oa(this['device'],'white')),_0x39724d['name']==='uSceneColo'+'rMap'&&(w['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x215d7c=oa(this['device'],'pink')),_0x215d7c||(w['errorOnce']('Texture\x20'+_0x39724d['name']+('\x20is\x20requir'+'ed\x20for\x20ren'+'dering\x20but'+'\x20was\x20not\x20s'+'et.\x20Render'+'ing\x20[')+Q['toString']()+']'),_0x215d7c=oa(this['device'],'pink'))),this['setTexture'](_0x39724d['name'],_0x215d7c);}for(let _0x56aa47=0x22a7*-0x1+0x2282+-0x25*-0x1;_0x56aa47<_0x5a29f1['length'];_0x56aa47++){const _0x5d610d=_0x5a29f1[_0x56aa47],_0x2ea1d5=_0x5d610d['scopeId']['value'];w['assert'](_0x2ea1d5,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20texture\x20s'+'lot\x20['+_0x5d610d['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Texture'](_0x5d610d['name'],_0x2ea1d5);}for(let _0x590d41=-0x22fb+-0x8be*-0x1+0x1a3d;_0x590d41<_0x3dd74c['length'];_0x590d41++){const _0xc54bb8=_0x3dd74c[_0x590d41],_0x2fc168=_0xc54bb8['scopeId']['value'];w['assert'](_0x2fc168,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20buffer\x20sl'+'ot\x20['+_0xc54bb8['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Buffer'](_0xc54bb8['name'],_0x2fc168);}this['uniformBuf'+'ferOffsets']['length']=this['uniformBuf'+'fers']['length'];for(let _0x4e74ea=-0x2514+0x16b5+0x1*0xe5f;_0x4e74ea<this['uniformBuf'+'fers']['length'];_0x4e74ea++){const _0xd76d9f=this['uniformBuf'+'fers'][_0x4e74ea];this['uniformBuf'+'ferOffsets'][_0x4e74ea]=_0xd76d9f['offset'],this['renderVers'+'ionUpdated']<_0xd76d9f['renderVers'+'ionDirty']&&(this['dirty']=!(-0x4a+0xcbc+-0xc72));}this['dirty']&&(this['dirty']=!(0x1*-0x2679+-0x1dd*0x4+0x2dee),this['renderVers'+'ionUpdated']=this['device']['renderVers'+'ion'],this['impl']['update'](this));}}const qe={'set'(_0x5c6bf9,_0x21c942,_0x59cff9,_0x4a18c8=-0x483+0x1*0x1a8b+0x1*-0x1607){return _0x5c6bf9&~(_0x4a18c8<<_0x59cff9)|_0x21c942<<_0x59cff9;},'get'(_0x327ea3,_0x36325d,_0x2bcce5=-0x161e+0x43a*-0x6+0x2f7b){return _0x327ea3>>_0x36325d&_0x2bcce5;},'all'(_0x157481,_0x36d38d,_0x2cbec0=0xdb+-0xf41+0xe67){const _0x3a017a=_0x2cbec0<<_0x36d38d;return(_0x157481&_0x3a017a)===_0x3a017a;},'any'(_0x3eca1d,_0x1aaf81,_0x396002=-0xb08*0x2+-0x179*0x17+0x166*0x28){return(_0x3eca1d&_0x396002<<_0x1aaf81)!==0x1*0x2659+0x1*-0x1625+-0x7a*0x22;}},Rl=0x1a5*-0x14+0x9*-0x411+0x4584,sr=-0x4*0x86b+-0xa3*0x16+0x2fbd,mm=-0x1*-0x31c+0x25*-0xe9+0x19*0x139,_m=-0x3eb+-0x117c+0xab5*0x2,gm=-0x253f+-0x63d*0x1+-0x1*-0x2b83,Sm=-0x2*0x879+0x1e*0x8d+-0x11*-0x7,ym=0x1eaf+-0x100*0x20+0x15f,vm=-0x1*0x92b+0x5b7*0x2+-0x231,If=-0x133*0x13+0x61b+0x2*0x862,xm=0x12b4+-0x205f+-0xdc2*-0x1,Tm=0xdc9*-0x1+0xc1*0x7+0x89a,wm=0x1c0f+-0x62*-0x13+0x14*-0x1c3,Em=0x17*0xe5+0x6e1+0x2*-0xdad,kx=0x1597+0x2369*0x1+-0x38f1,Ux=If,ri=class ri{constructor(_0x497085=!(-0x1*0x12b+0x1*0xee9+-0xdbd),_0x1a8ef0=fs,_0x1118bd=Ft,_0x39f201=Iu,_0x1629c4,_0x1c3352,_0x1f1254,_0x4cc764=!(0x3*-0xad7+-0x80d*-0x3+0x85e),_0x23a8bc=!(0x98f+-0xece+0x53f),_0x28cdb9=!(0x615*0x6+-0x1c84*-0x1+-0x4102),_0x34fbc8=!(-0xd09*-0x1+0x212d+-0x2e36)){h(this,'target0',-0x1709+-0x1fb9+0x56*0xa3),(this['setColorBl'+'end'](_0x1a8ef0,_0x1118bd,_0x39f201),this['setAlphaBl'+'end'](_0x1629c4??_0x1a8ef0,_0x1c3352??_0x1118bd,_0x1f1254??_0x39f201),this['setColorWr'+'ite'](_0x4cc764,_0x23a8bc,_0x28cdb9,_0x34fbc8),this['blend']=_0x497085);}set['blend'](_0x314278){this['target0']=qe['set'](this['target0'],_0x314278?-0x46e+0x2418+-0x1fa9:-0x1e8f+-0x2524*0x1+0x43b3,Em);}get['blend'](){return qe['all'](this['target0'],Em);}['setColorBl'+'end'](_0x5a4ace,_0x38fcbe,_0x13cc9c){this['target0']=qe['set'](this['target0'],_0x5a4ace,mm,Rl),this['target0']=qe['set'](this['target0'],_0x38fcbe,_m,sr),this['target0']=qe['set'](this['target0'],_0x13cc9c,gm,sr);}['setAlphaBl'+'end'](_0x2cfadd,_0x206de4,_0x2be677){this['target0']=qe['set'](this['target0'],_0x2cfadd,Sm,Rl),this['target0']=qe['set'](this['target0'],_0x206de4,ym,sr),this['target0']=qe['set'](this['target0'],_0x2be677,vm,sr);}['setColorWr'+'ite'](_0x31de36,_0x2fcf31,_0x583335,_0x26dff6){this['redWrite']=_0x31de36,this['greenWrite']=_0x2fcf31,this['blueWrite']=_0x583335,this['alphaWrite']=_0x26dff6;}get['colorOp'](){return qe['get'](this['target0'],mm,Rl);}get['colorSrcFa'+'ctor'](){return qe['get'](this['target0'],_m,sr);}get['colorDstFa'+'ctor'](){return qe['get'](this['target0'],gm,sr);}get['alphaOp'](){return qe['get'](this['target0'],Sm,Rl);}get['alphaSrcFa'+'ctor'](){return qe['get'](this['target0'],ym,sr);}get['alphaDstFa'+'ctor'](){return qe['get'](this['target0'],vm,sr);}set['redWrite'](_0x1fa3ab){this['target0']=qe['set'](this['target0'],_0x1fa3ab?-0x149+0x14*-0x146+0x1ac2:-0x6c4+0x15f8+-0xf34,If);}get['redWrite'](){return qe['all'](this['target0'],If);}set['greenWrite'](_0x5cb3b0){this['target0']=qe['set'](this['target0'],_0x5cb3b0?0x1*-0xb9b+-0x8*0x14+-0x12*-0xae:-0xa*0x1f3+0x1b30+-0x7b2,xm);}get['greenWrite'](){return qe['all'](this['target0'],xm);}set['blueWrite'](_0x2dbd15){this['target0']=qe['set'](this['target0'],_0x2dbd15?0x1*0x1917+-0x111+-0x1805:0x13*-0x1cf+-0xd15+0x2f72,Tm);}get['blueWrite'](){return qe['all'](this['target0'],Tm);}set['alphaWrite'](_0x4577aa){this['target0']=qe['set'](this['target0'],_0x4577aa?0xa59+-0x1*-0x5da+-0x2b3*0x6:-0x3*0xc2+0x173b+-0x14f5,wm);}get['alphaWrite'](){return qe['all'](this['target0'],wm);}get['allWrite'](){return qe['get'](this['target0'],Ux,kx);}['copy'](_0x1aa162){return this['target0']=_0x1aa162['target0'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}get['key'](){return this['target0'];}['equals'](_0x34f881){return this['target0']===_0x34f881['target0'];}};h(ri,'NOBLEND',Object['freeze'](new ri())),h(ri,'NOWRITE',Object['freeze'](new ri(void(0x976*-0x3+0x155*0x12+0x11a*0x4),void(0x196*0xb+0x2170+-0x32e2),void(-0x250c*0x1+0x82c+0x1ce0),void(0x9f9+0x3a*0x99+-0x2ca3),void(-0x15bf+-0x1581+0x2b40),void(-0x18d6+0x19ed+-0x5d*0x3),void(0x18d3*0x1+0xbe3*0x2+0x13f*-0x27),!(-0x1599+-0x2544+0x3ade),!(0x33*-0x9d+0x178c+0x7bc),!(-0x2*-0x3c1+-0x2*0x191+-0x45f),!(-0x3df+0x5c5+0x1*-0x1e5)))),h(ri,'ALPHABLEND',Object['freeze'](new ri(!(-0x84a*-0x2+0x1262+-0x22f6*0x1),fs,Ah,Ch))),h(ri,'ADDBLEND',Object['freeze'](new ri(!(-0x1273+0x203e+-0x499*0x3),fs,Ft,Ft)));let pt=ri;class fp{constructor(){h(this,'map',new Map()),h(this,'id',0x134+0xf65+-0x1099);}['get'](_0x2d112a){let _0x2ad6b5=this['map']['get'](_0x2d112a);return _0x2ad6b5===void(-0xd*-0x1b1+-0x1073*0x1+0x2*-0x2c5)&&(_0x2ad6b5=this['id']++,this['map']['set'](_0x2d112a,_0x2ad6b5)),_0x2ad6b5;}}const Bx=new fp(),bm=0x1*-0x346+0x16*0xd5+-0xf01,Am=0x43+0x45*0x1+0x8*-0x11,Cm=0x25*0x6e+-0x1*-0x693+-0x1676,fr=class fr{constructor(_0x559d1f=Sf,_0x5428ee=!(-0x20f*-0x1+-0x736+0x1*0x527)){h(this,'data',-0x13cf+0x1*0x23eb+0x2*-0x80e),h(this,'_depthBias',0x1*0x239+-0xcd9+0xaa0),h(this,'_depthBias'+'Slope',0xa*-0x397+-0xa08+0x16f7*0x2),h(this,'key',-0x24e+0x39a*-0x7+0x24b*0xc),(this['func']=_0x559d1f,this['write']=_0x5428ee);}set['test'](_0x158b07){this['func']=_0x158b07?Sf:Hi,this['updateKey']();}get['test'](){return this['func']!==Hi;}set['write'](_0x45c3c7){this['data']=qe['set'](this['data'],_0x45c3c7?-0xbbe+0x104*0xc+-0x71:0x4a8*0x6+0x259a+-0x418a,Cm),this['updateKey']();}get['write'](){return qe['all'](this['data'],Cm);}set['func'](_0x43a574){this['data']=qe['set'](this['data'],_0x43a574,Am,bm),this['updateKey']();}get['func'](){return qe['get'](this['data'],Am,bm);}set['depthBias'](_0x34cde5){this['_depthBias']=_0x34cde5,this['updateKey']();}get['depthBias'](){return this['_depthBias'];}set['depthBiasS'+'lope'](_0x3b9c91){this['_depthBias'+'Slope']=_0x3b9c91,this['updateKey']();}get['depthBiasS'+'lope'](){return this['_depthBias'+'Slope'];}['copy'](_0x15a28d){return this['data']=_0x15a28d['data'],this['_depthBias']=_0x15a28d['_depthBias'],this['_depthBias'+'Slope']=_0x15a28d['_depthBias'+'Slope'],this['key']=_0x15a28d['key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['updateKey'](){const {data:_0x21edc5,_depthBias:_0x22b969,_depthBiasSlope:_0x43b064}=this,_0x261d62=_0x21edc5+'-'+_0x22b969+'-'+_0x43b064;this['key']=Bx['get'](_0x261d62);}['equals'](_0x215744){return this['key']===_0x215744['key'];}};h(fr,'DEFAULT',Object['freeze'](new fr())),h(fr,'NODEPTH',Object['freeze'](new fr(Hi,!(0x23d1+0x169*-0x5+-0x1cc3*0x1)))),h(fr,'WRITEDEPTH',Object['freeze'](new fr(Hi,!(0x5f*-0x5+-0x1a97+0x1*0x1c72))));let Yt=fr;class sy{constructor(){h(this,'globalId',-0x202*-0x4+0xa3*-0x26+0x815*0x2),h(this,'revision',-0x1*0xe50+-0x7*-0x2db+-0x5ad);}['equals'](_0x3fe1f0){return this['globalId']===_0x3fe1f0['globalId']&&this['revision']===_0x3fe1f0['revision'];}['copy'](_0x2a48fa){this['globalId']=_0x2a48fa['globalId'],this['revision']=_0x2a48fa['revision'];}['reset'](){this['globalId']=-0x47*-0x7+-0x24d9*0x1+0x22e8,this['revision']=0x19e1+0x19c*0x18+-0x4081;}}let Pm=-0x1*-0x102b+-0xcf*0x1+-0x2*0x7ae;class zx{constructor(){Pm++,this['version']=new sy(),this['version']['globalId']=Pm;}['increment'](){this['version']['revision']++;}}class Vx{constructor(_0x519fb3){this['name']=_0x519fb3,this['value']=null,this['versionObj'+'ect']=new zx();}['toJSON'](_0x31aa6a){}['setValue'](_0xecd0ea){this['value']=_0xecd0ea,this['versionObj'+'ect']['increment']();}['getValue'](){return this['value'];}}class Gx{constructor(_0x42a49f){this['name']=_0x42a49f,this['variables']=new Map();}['resolve'](_0x35f501){return this['variables']['has'](_0x35f501)||this['variables']['set'](_0x35f501,new Vx(_0x35f501)),this['variables']['get'](_0x35f501);}['removeValu'+'e'](_0x5a2c5d){for(const _0x32a1aa in this['variables']){const _0x15f6f1=this['variables'][_0x32a1aa];_0x15f6f1['value']===_0x5a2c5d&&(_0x15f6f1['value']=null);}}}let Hx=0x153b*0x1+-0x23ca+0xe8f;class Ds{constructor(_0x2ef357,_0x3f98d6,_0x49fac0,_0x5f380a){h(this,'usage',ms),(w['assert'](arguments['length']<=0x11c3*-0x2+-0x2c*-0x62+-0x959*-0x2&&(!_0x5f380a||typeof _0x5f380a=='object'),'incorrect\x20'+'arguments'),this['usage']=(_0x5f380a==null?void(0x3*0x5ab+0xdf*0x17+-0x250a):_0x5f380a['usage'])??ms,this['device']=_0x2ef357,this['format']=_0x3f98d6,this['numVertice'+'s']=_0x49fac0,this['id']=Hx++,this['impl']=_0x2ef357['createVert'+'exBufferIm'+'pl'](this,_0x3f98d6,_0x5f380a),this['numBytes']=_0x3f98d6['verticesBy'+'teSize']?_0x3f98d6['verticesBy'+'teSize']:_0x3f98d6['size']*_0x49fac0,this['adjustVram'+'SizeTracki'+'ng'](_0x2ef357['_vram'],this['numBytes']));const _0x387522=_0x5f380a==null?void(0x1*-0xfb5+-0x1*0xc1+0x1076):_0x5f380a['data'];_0x387522?this['setData'](_0x387522):this['storage']=new ArrayBuffer(this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x44ac04=this['device'],_0x3ca37c=_0x44ac04['buffers']['indexOf'](this);_0x3ca37c!==-(-0x2072+0x982+0x16f1)&&_0x44ac04['buffers']['splice'](_0x3ca37c,-0x926*0x4+0x1925+0xb74),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x44ac04),this['adjustVram'+'SizeTracki'+'ng'](_0x44ac04['_vram'],-this['storage']['byteLength'])),this['storage']=null;}['adjustVram'+'SizeTracki'+'ng'](_0x3fbdfa,_0x2b6db5){w['trace'](d0,this['id']+'\x20size:\x20'+_0x2b6db5+'\x20vram.vb:\x20'+_0x3fbdfa['vb']+'\x20=>\x20'+(_0x3fbdfa['vb']+_0x2b6db5)),_0x3fbdfa['vb']+=_0x2b6db5;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getUsage'](){return this['usage'];}['getNumVert'+'ices'](){return this['numVertice'+'s'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x529e69){return _0x529e69['byteLength']!==this['numBytes']?(w['error']('VertexBuff'+'er:\x20wrong\x20'+'initial\x20da'+'ta\x20size:\x20e'+'xpected\x20'+this['numBytes']+',\x20got\x20'+_0x529e69['byteLength']),!(-0x1*0x239+0x14db+0xfb*-0x13)):(this['storage']=_0x529e69,this['unlock'](),!(0xd*0x1b0+-0x1924+0x334));}}function hi(_0x18e64b){if(_0x18e64b==null)return-0x125*-0xf+0x3*0x62b+-0x23ac;let _0x51d4e4=0x1*0x9e7+0x1a73+-0x245a;for(let _0x1ef38a=0xced+0xd91*0x1+-0x1a7e,_0x397ea7=_0x18e64b['length'];_0x1ef38a<_0x397ea7;_0x1ef38a++)_0x51d4e4=(_0x51d4e4<<-0x1*0x1065+0x1*0x1258+-0x13*0x1a)-_0x51d4e4+_0x18e64b['charCodeAt'](_0x1ef38a),_0x51d4e4|=-0x18d1+0x15f7*-0x1+0x2ec8;return _0x51d4e4;}function iy(_0x40dce9){let _0x1d2d92=0x1*0x3d5b542f+0x4842d0b5+-0x481871f;for(let _0x28e841=0x16c5+-0x1c7d+0x5b8;_0x28e841<_0x40dce9['length'];_0x28e841++)_0x1d2d92^=_0x40dce9[_0x28e841],_0x1d2d92*=-0x1e8515d+0x37fd9b*0x4+0x3f*0x8427c;return _0x1d2d92>>>-0x2*-0xdd5+0x26e7+0x4291*-0x1;}const Wx=new fp(),$x=[0x472*-0x3+0x64c+0x70c,0x6e8+0xa6a*-0x1+0x386,-0x13cd+-0x3*-0x6d2+0x1*-0xa1,-0x11a7*-0x1+0xbc+-0x61d*0x3,0x1f2d+0x1ffc+-0x3f19*0x1],Xx=new Kt();class kt{constructor(_0x14d340,_0x4c4be0,_0x3b95bc){this['device']=_0x14d340,this['_elements']=[],this['hasUv0']=!(-0x1*-0x153a+-0x1376+0x1*-0x1c3),this['hasUv1']=!(0x137*-0x1b+0x2507*-0x1+0x45d5),this['hasColor']=!(0x1*-0x1989+0xce9+-0x1*-0xca1),this['hasTangent'+'s']=!(0x250f*0x1+-0xbe4+-0x192a),this['verticesBy'+'teSize']=-0x1616+-0x893*0x1+-0x1ea9*-0x1,this['vertexCoun'+'t']=_0x3b95bc,this['interleave'+'d']=_0x3b95bc===void(-0x2*0x806+-0x13*-0x151+-0x8f7),this['instancing']=!(0x537*0x1+-0x35*-0x1a+-0x1c4*0x6),this['size']=_0x4c4be0['reduce']((_0x2159b7,_0x4d39e0)=>_0x2159b7+Math['ceil'](_0x4d39e0['components']*Eo[_0x4d39e0['type']]/(-0x1095+-0xd32*0x1+-0x1*-0x1dcb))*(0x16*0x8f+0x241e+-0x3064),0x20b0+0x44c+-0x127e*0x2);let _0x3f9adb=0x1d4a+-0xa95+-0x12b5,_0x4008ff;for(let _0x389a62=-0x29*-0xf0+-0x1ed7+-0x799,_0x2e638f=_0x4c4be0['length'];_0x389a62<_0x2e638f;_0x389a62++){const _0x32e0b8=_0x4c4be0[_0x389a62];_0x4008ff=_0x32e0b8['components']*Eo[_0x32e0b8['type']],w['assert'](kt['isElementV'+'alid'](_0x14d340,_0x32e0b8),'WebGPU\x20doe'+'s\x20not\x20supp'+'ort\x20the\x20fo'+'rmat\x20of\x20ve'+'rtex\x20eleme'+'nt\x20'+_0x32e0b8['semantic']+'\x20:\x20'+Cx[_0x32e0b8['type']]+'\x20x\x20'+_0x32e0b8['components']),_0x3b95bc&&(_0x3f9adb=Y['roundUp'](_0x3f9adb,_0x4008ff),w['assert'](_0x4008ff%(-0x240c+0x1af3*0x1+0x1*0x91d)===-0x66e*-0x5+0x434*-0x8+-0x36*-0x7,'Non-interl'+'eaved\x20vert'+'ex\x20format\x20'+'with\x20eleme'+'nt\x20size\x20no'+'t\x20multiple'+'\x20of\x204\x20can\x20'+'have\x20perfo'+'rmance\x20imp'+'act\x20on\x20som'+'e\x20platform'+'s.\x20Element'+'\x20size:\x20'+_0x4008ff));const _0x3b0d5b=_0x32e0b8['asInt']??!(-0x1*-0x65+0x1*0xa59+0xabd*-0x1),_0x2f21e5=_0x3b0d5b?!(0x1d3f+-0x38*-0x20+0x243e*-0x1):_0x32e0b8['normalize']??!(0x1*-0x16f0+-0xf3c+0x262d),_0x48cb02={'name':_0x32e0b8['semantic'],'offset':_0x3b95bc?_0x3f9adb:_0x32e0b8['hasOwnProp'+'erty']('offset')?_0x32e0b8['offset']:_0x3f9adb,'stride':_0x3b95bc?_0x4008ff:_0x32e0b8['hasOwnProp'+'erty']('stride')?_0x32e0b8['stride']:this['size'],'dataType':_0x32e0b8['type'],'numComponents':_0x32e0b8['components'],'normalize':_0x2f21e5,'size':_0x4008ff,'asInt':_0x3b0d5b};this['_elements']['push'](_0x48cb02),_0x3b95bc?_0x3f9adb+=_0x4008ff*_0x3b95bc:_0x3f9adb+=Math['ceil'](_0x4008ff/(0x1*0xf6f+0x1982+-0x1*0x28ed))*(-0x3*0x359+0x42a+0x5e5),_0x32e0b8['semantic']===is?this['hasUv0']=!(0x1eed+-0x1*0x1b5b+-0x2*0x1c9):_0x32e0b8['semantic']===va?this['hasUv1']=!(-0x1c91+-0x1fb*0x13+0x1*0x4232):_0x32e0b8['semantic']===Wt?this['hasColor']=!(-0x165b+-0x259*0xd+0x34e0):_0x32e0b8['semantic']===yi&&(this['hasTangent'+'s']=!(-0x197d+0x16d7+-0x2a6*-0x1));}_0x3b95bc&&(this['verticesBy'+'teSize']=_0x3f9adb),this['_evaluateH'+'ash']();}get['elements'](){return this['_elements'];}static['getDefault'+'Instancing'+'Format'](_0x5eb69){return Xx['get'](_0x5eb69,()=>new kt(_0x5eb69,[{'semantic':sp,'components':0x4,'type':Ve},{'semantic':ip,'components':0x4,'type':Ve},{'semantic':rp,'components':0x4,'type':Ve},{'semantic':bn,'components':0x4,'type':Ve}]));}static['isElementV'+'alid'](_0x4c05a6,_0x3429ce){const _0x180d44=_0x3429ce['components']*Eo[_0x3429ce['type']];return!(_0x4c05a6['isWebGPU']&&!$x['includes'](_0x180d44));}['update'](){w['assert'](!this['device']['isWebGPU'],'VertexForm'+'at#update\x20'+'is\x20not\x20sup'+'ported\x20on\x20'+'WebGPU\x20and'+'\x20VertexFor'+'mat\x20cannot'+'\x20be\x20modifi'+'ed.'),this['_evaluateH'+'ash']();}['_evaluateH'+'ash'](){const _0x5db2e2=[],_0x3bf8e1=[],_0x1f8f67=this['_elements']['length'];for(let _0x57ab12=0x1d7*0x11+0xa5d+0xa4*-0x41;_0x57ab12<_0x1f8f67;_0x57ab12++){const {name:_0x2d33ca,dataType:_0x54b32a,numComponents:_0x279cd6,normalize:_0x5bacbc,offset:_0x2b62e8,stride:_0xde1ff,size:_0xa9ab38,asInt:_0x51669b}=this['_elements'][_0x57ab12],_0x405837=_0x2d33ca+_0x54b32a+_0x279cd6+_0x5bacbc+_0x51669b;_0x5db2e2['push'](_0x405837);const _0x4f7df3=_0x405837+_0x2b62e8+_0xde1ff+_0xa9ab38;_0x3bf8e1['push'](_0x4f7df3);}_0x5db2e2['sort']();const _0x5d28ea=_0x5db2e2['join']();this['batchingHa'+'sh']=hi(_0x5d28ea),this['shaderProc'+'essingHash'+'String']=_0x5d28ea,this['renderingH'+'ashString']=_0x3bf8e1['join']('_'),this['renderingH'+'ash']=Wx['get'](this['renderingH'+'ashString']);}}const qx=new fp(),Sh=class Sh{constructor(_0x1a1e4e={}){h(this,'_func'),h(this,'_ref'),h(this,'_fail'),h(this,'_zfail'),h(this,'_zpass'),h(this,'_readMask'),h(this,'_writeMask'),h(this,'_dirty',!(0x11*0x11b+-0x1188+-0x13*0x11)),h(this,'_key'),(this['_func']=_0x1a1e4e['func']??Hi,this['_ref']=_0x1a1e4e['ref']??-0x2469+-0x1c76+-0x40df*-0x1,this['_readMask']=_0x1a1e4e['readMask']??0x2be+-0x212e+0x1f6f*0x1,this['_writeMask']=_0x1a1e4e['writeMask']??0x703*-0x1+0x17f*0x15+-0x1769,this['_fail']=_0x1a1e4e['fail']??pn,this['_zfail']=_0x1a1e4e['zfail']??pn,this['_zpass']=_0x1a1e4e['zpass']??pn,this['_evalKey']());}set['func'](_0x3c8844){this['_func']=_0x3c8844,this['_dirty']=!(-0x1b2f+-0x1159*0x2+-0x7*-0x8d7);}get['func'](){return this['_func'];}set['ref'](_0x300090){this['_ref']=_0x300090,this['_dirty']=!(-0x26e4+-0x4*0xff+0x2ae0);}get['ref'](){return this['_ref'];}set['fail'](_0x39dff5){this['_fail']=_0x39dff5,this['_dirty']=!(0x1*0x24a9+0x315*-0xc+0x53);}get['fail'](){return this['_fail'];}set['zfail'](_0x5e64bb){this['_zfail']=_0x5e64bb,this['_dirty']=!(-0x25be+0x607+0x1fb7);}get['zfail'](){return this['_zfail'];}set['zpass'](_0x575b54){this['_zpass']=_0x575b54,this['_dirty']=!(-0x1f85+-0x1*0xf01+-0x7c1*-0x6);}get['zpass'](){return this['_zpass'];}set['readMask'](_0x32d1f0){this['_readMask']=_0x32d1f0,this['_dirty']=!(0x1*-0x25c3+0x191a+0xca9*0x1);}get['readMask'](){return this['_readMask'];}set['writeMask'](_0x27ef43){this['_writeMask']=_0x27ef43,this['_dirty']=!(0x8cc+-0xc45*-0x2+0x1*-0x2156);}get['writeMask'](){return this['_writeMask'];}['_evalKey'](){const {_func:_0x1e94e8,_ref:_0x57da12,_fail:_0x33bf8c,_zfail:_0x545d84,_zpass:_0x1390da,_readMask:_0xbdae26,_writeMask:_0xa71609}=this,_0x68eb98=_0x1e94e8+','+_0x57da12+','+_0x33bf8c+','+_0x545d84+','+_0x1390da+','+_0xbdae26+','+_0xa71609;this['_key']=qx['get'](_0x68eb98),this['_dirty']=!(-0x2*0x8b5+-0x11d9+-0x2344*-0x1);}get['key'](){return this['_dirty']&&this['_evalKey'](),this['_key'];}['copy'](_0x1dc28d){return this['_func']=_0x1dc28d['_func'],this['_ref']=_0x1dc28d['_ref'],this['_readMask']=_0x1dc28d['_readMask'],this['_writeMask']=_0x1dc28d['_writeMask'],this['_fail']=_0x1dc28d['_fail'],this['_zfail']=_0x1dc28d['_zfail'],this['_zpass']=_0x1dc28d['_zpass'],this['_dirty']=_0x1dc28d['_dirty'],this['_key']=_0x1dc28d['_key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}};h(Sh,'DEFAULT',Object['freeze'](new Sh()));let pi=Sh;const Ol=new Set(),yh=class yh extends me{constructor(_0x5cb86f,_0x140fbf){var _0x2ff821,_0x3130fd,_0x27940b,_0x12bffe,_0x3ac7b0,_0x54fb9b;super(),h(this,'canvas'),h(this,'backBuffer',null),h(this,'backBuffer'+'Size',new J()),h(this,'backBuffer'+'Format'),h(this,'backBuffer'+'Antialias',!(-0x270e+0x17f2+0xf1d*0x1)),h(this,'isWebGPU',!(-0x4b6+-0x3fa+0x59*0x19)),h(this,'isWebGL2',!(0x99a*-0x4+-0x2423+0x1a*0x2de)),h(this,'isHdr',!(0x2663*-0x1+0x2*-0x77f+0x1*0x3562)),h(this,'scope'),h(this,'maxIndirec'+'tDrawCount',0x50b*0x7+0x23f8+-0x4345),h(this,'maxAnisotr'+'opy'),h(this,'maxCubeMap'+'Size'),h(this,'maxTexture'+'Size'),h(this,'maxVolumeS'+'ize'),h(this,'maxColorAt'+'tachments',-0x4*0x1cd+0xd*-0x1c1+0x1e02),h(this,'precision'),h(this,'samples'),h(this,'maxSamples',-0x23e+-0x265*0x3+0x96e),h(this,'supportsSt'+'encil'),h(this,'supportsCo'+'mpute',!(-0x1*0x6f9+-0x115a+0x615*0x4)),h(this,'supportsSt'+'orageTextu'+'reRead',!(-0x2212+0x1277+0x3*0x534)),h(this,'renderTarg'+'et',null),h(this,'shaders',[]),h(this,'textures',[]),h(this,'targets',new Set()),h(this,'renderVers'+'ion',0x1b5b+0x1*-0x21f3+-0x1*-0x698),h(this,'renderPass'+'Index'),h(this,'insideRend'+'erPass',!(0x52*-0x76+0x1fbf+-0x9b*-0xa)),h(this,'supportsUn'+'iformBuffe'+'rs',!(0x46*0x89+-0xb*-0x12a+0x3243*-0x1)),h(this,'supportsCl'+'ipDistance'+'s',!(-0x93c+0x66b+0x2d2)),h(this,'textureFlo'+'atRenderab'+'le'),h(this,'textureHal'+'fFloatRend'+'erable'),h(this,'textureRG1'+'1B10Render'+'able',!(0x917*0x3+-0x1*-0x1b83+-0x36c7)),h(this,'textureFlo'+'atFilterab'+'le',!(-0x1eb4+0x2*-0x1f7+-0x22a3*-0x1)),h(this,'quadVertex'+'Buffer'),h(this,'blendState',new pt()),h(this,'depthState',new Yt()),h(this,'stencilEna'+'bled',!(-0x1*0xc43+0x10a1+-0x45d)),h(this,'stencilFro'+'nt',new pi()),h(this,'stencilBac'+'k',new pi()),h(this,'dynamicBuf'+'fers'),h(this,'gpuProfile'+'r'),h(this,'defaultCle'+'arOptions',{'color':[0x2216+0xe09*-0x2+-0x14*0x4d,-0x12a+-0x1951+-0x1a7b*-0x1,-0x25af+0x14c*-0x8+0x300f,0x194*0xe+0x1*-0x1731+0x11a*0x1],'depth':0x1,'stencil':0x0,'flags':Fo|No}),h(this,'clientRect',{'width':0x0,'height':0x0}),h(this,'_shadersDi'+'rty',!(-0xdee+-0x96+0xe85)),h(this,'capsDefine'+'s',new Map()),h(this,'mapsToClea'+'r',new Set()),(this['canvas']=_0x5cb86f,'setAttribu'+'te'in _0x5cb86f&&_0x5cb86f['setAttribu'+'te']('data-engin'+'e','PlayCanvas'+'\x20'+sn),this['initOption'+'s']={..._0x140fbf},(_0x2ff821=this['initOption'+'s'])['alpha']??(_0x2ff821['alpha']=!(-0x646+-0x2*0x32d+0x8*0x194)),(_0x3130fd=this['initOption'+'s'])['depth']??(_0x3130fd['depth']=!(-0xad*-0x13+-0x1e02+0x112b)),(_0x27940b=this['initOption'+'s'])['stencil']??(_0x27940b['stencil']=!(0xfbf+-0x1628*0x1+0x3*0x223)),(_0x12bffe=this['initOption'+'s'])['antialias']??(_0x12bffe['antialias']=!(0x12da+-0x15fa+0x320)),(_0x3ac7b0=this['initOption'+'s'])['powerPrefe'+'rence']??(_0x3ac7b0['powerPrefe'+'rence']='high-perfo'+'rmance'),(_0x54fb9b=this['initOption'+'s'])['displayFor'+'mat']??(_0x54fb9b['displayFor'+'mat']=bx),this['_maxPixelR'+'atio']=Me['browser']?Math['min'](0x1*-0x196a+0x2*-0x4a3+0x22b1*0x1,window['devicePixe'+'lRatio']):0x441*-0x9+-0x1954*0x1+0x3f9e,this['buffers']=[],this['_vram']={'texShadow':0x0,'texAsset':0x0,'texLightmap':0x0,'tex':0x0,'vb':0x0,'ib':0x0,'ub':0x0,'sb':0x0},this['_shaderSta'+'ts']={'vsCompiled':0x0,'fsCompiled':0x0,'linked':0x0,'materialShaders':0x0,'compileTime':0x0},this['initialize'+'ContextCac'+'hes'](),this['_drawCalls'+'PerFrame']=-0x26d6+-0x175e+0x3e34,this['_shaderSwi'+'tchesPerFr'+'ame']=0x611*-0x4+0x6b*-0x49+0x36c7,this['_primsPerF'+'rame']=[]);for(let _0x4939f9=Vh;_0x4939f9<=sa;_0x4939f9++)this['_primsPerF'+'rame'][_0x4939f9]=-0x2*-0x4be+0xa5e*0x1+0x7*-0x2d6;this['_renderTar'+'getCreatio'+'nTime']=0xaca+0xd3*0x2f+0x199*-0x1f,this['scope']=new Gx('Device'),this['textureBia'+'s']=this['scope']['resolve']('textureBia'+'s'),this['textureBia'+'s']['setValue'](-0x179b+-0xd59+0x24f4);}['postInit'](){const _0x35b0fc=new kt(this,[{'semantic':Pe,'components':0x2,'type':Ve}]),_0xc07aba=new Float32Array([-(-0x1530+0x19ca*-0x1+0xd3*0x39),-(-0x65*0x8+-0x1*-0x2315+0x3*-0xaa4),0x4*0x294+0x79*-0x43+0x155c,-(0x15*-0xbf+-0x55+-0x1*-0x1001),-(0x9d3+0x43f+-0xe11),-0x209c+0x9bb+0x16e2,-0x2256+0x1dc9+0x48e,0xc56+-0x22+-0x15b*0x9]);this['quadVertex'+'Buffer']=new Ds(this,_0x35b0fc,0x32b*-0x1+0x1*-0xbeb+0xf1a,{'data':_0xc07aba});}['initCapsDe'+'fines'](){const {capsDefines:_0x26c58c}=this;_0x26c58c['clear'](),this['textureFlo'+'atFilterab'+'le']&&_0x26c58c['set']('CAPS_TEXTU'+'RE_FLOAT_F'+'ILTERABLE',''),this['textureFlo'+'atRenderab'+'le']&&_0x26c58c['set']('CAPS_TEXTU'+'RE_FLOAT_R'+'ENDERABLE','');}['destroy'](){var _0x52d03a,_0x2091fe,_0x57c17c;this['fire']('destroy'),(_0x52d03a=this['quadVertex'+'Buffer'])==null||_0x52d03a['destroy'](),this['quadVertex'+'Buffer']=null,(_0x2091fe=this['dynamicBuf'+'fers'])==null||_0x2091fe['destroy'](),this['dynamicBuf'+'fers']=null,(_0x57c17c=this['gpuProfile'+'r'])==null||_0x57c17c['destroy'](),this['gpuProfile'+'r']=null;}['onDestroyS'+'hader'](_0x4dac77){this['fire']('destroy:sh'+'ader',_0x4dac77);const _0x522f86=this['shaders']['indexOf'](_0x4dac77);_0x522f86!==-(0x1852+-0x3*0x883+0x34*0x6)&&this['shaders']['splice'](_0x522f86,0x153a*0x1+-0x1851+0xb*0x48);}['postDestro'+'y'](){this['scope']=null,this['canvas']=null;}['loseContex'+'t'](){var _0xe6e5c0;this['contextLos'+'t']=!(-0xa9b+0x1*-0xd2b+-0x22*-0xb3),this['backBuffer'+'Size']['set'](-(0x18d*-0x16+-0x43+0x2262),-(-0x1b4e+0x1aaf+0x14*0x8));for(const _0x3ae41e of this['textures'])_0x3ae41e['loseContex'+'t']();for(const _0x132153 of this['buffers'])_0x132153['loseContex'+'t']();for(const _0x241ed3 of this['targets'])_0x241ed3['loseContex'+'t']();(_0xe6e5c0=this['gpuProfile'+'r'])==null||_0xe6e5c0['loseContex'+'t']();}['restoreCon'+'text'](){var _0xacf723,_0x4cae48;this['contextLos'+'t']=!(0x11c3+0xd3a+-0xa54*0x3),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes']();for(const _0x4a9649 of this['buffers'])_0x4a9649['unlock']();(_0x4cae48=(_0xacf723=this['gpuProfile'+'r'])==null?void(-0x1*-0xff3+-0x1c87+0xc94):_0xacf723['restoreCon'+'text'])==null||_0x4cae48['call'](_0xacf723);}['toJSON'](_0x4d3053){}['initialize'+'ContextCac'+'hes'](){this['vertexBuff'+'ers']=[],this['shader']=null,this['shaderVali'+'d']=void(0x5*0x7b1+-0x209e+-0xd*0x73),this['shaderAsyn'+'cCompile']=!(0x1*-0x16e3+0xfd2+0x389*0x2),this['renderTarg'+'et']=null;}['initialize'+'RenderStat'+'e'](){this['blendState']=new pt(),this['depthState']=new Yt(),this['cullMode']=ca,this['vx']=this['vy']=this['vw']=this['vh']=-0x1*-0x1557+0x9*0x57+-0x1866,this['sx']=this['sy']=this['sw']=this['sh']=-0x19a8+-0xb*0x3c+0x1c3c*0x1,this['blendColor']=new ie(0x76d*-0x1+0x137*-0x1f+0x2d16,0xcd8+-0x1f2*0xe+0xe64,-0x8a7*0x1+0x5a5+0x302,-0xdbe+-0xbe*-0x8+0x2*0x3e7);}['setStencil'+'State'](_0x3940fe,_0x3ed3b5){w['assert'](!(0x1*0x214a+-0x118d+-0xfbc));}['setBlendSt'+'ate'](_0x5baf22){w['assert'](!(-0x1428+0x86*0x1+0x13a3));}['setBlendCo'+'lor'](_0x181dcf,_0x20815b,_0x173d52,_0xbfd1e8){w['assert'](!(0x1*0xc23+0x1db0+-0x6a*0x65));}['setDepthSt'+'ate'](_0x503ba3){w['assert'](!(0x26a+-0x1688+0x65*0x33));}['setCullMod'+'e'](_0x17e80b){w['assert'](!(-0x141a+0x12c9+0x152));}['setRenderT'+'arget'](_0x415ad0){this['renderTarg'+'et']=_0x415ad0;}['setVertexB'+'uffer'](_0xdd03f6){_0xdd03f6&&this['vertexBuff'+'ers']['push'](_0xdd03f6);}['clearVerte'+'xBuffer'](){this['vertexBuff'+'ers']['length']=-0xc9+0xfc4+-0xefb;}['getIndirec'+'tDrawSlot'](){return-0x21aa+0x43*-0x7c+0x421e;}get['indirectDr'+'awBuffer'](){return null;}['getRenderT'+'arget'](){return this['renderTarg'+'et'];}['initRender'+'Target'](_0x5b8059){if(_0x5b8059['initialize'+'d'])return;const _0x318c08=de();this['fire']('fbo:create',{'timestamp':_0x318c08,'target':this}),_0x5b8059['init'](),this['targets']['add'](_0x5b8059),this['_renderTar'+'getCreatio'+'nTime']+=de()-_0x318c08;}['draw'](_0x2b81a8,_0x474b95,_0x504697,_0x516c08,_0x5d8d8e=!(0x6*0x15+-0x6cc+0x64e),_0x2840ac=!(-0x2*-0x114b+-0x21*-0xae+-0x4*0xe41)){w['assert'](!(0x1b36+-0x1*-0xdc4+-0x28f9));}['_isBrowser'+'Interface'](_0x2ba7c6){return this['_isImageBr'+'owserInter'+'face'](_0x2ba7c6)||this['_isImageCa'+'nvasInterf'+'ace'](_0x2ba7c6)||this['_isImageVi'+'deoInterfa'+'ce'](_0x2ba7c6);}['_isImageBr'+'owserInter'+'face'](_0x505359){return typeof ImageBitmap<'u'&&_0x505359 instanceof ImageBitmap||typeof HTMLImageElement<'u'&&_0x505359 instanceof HTMLImageElement;}['_isImageCa'+'nvasInterf'+'ace'](_0x39998f){return typeof HTMLCanvasElement<'u'&&_0x39998f instanceof HTMLCanvasElement;}['_isImageVi'+'deoInterfa'+'ce'](_0x350014){return typeof HTMLVideoElement<'u'&&_0x350014 instanceof HTMLVideoElement;}['resizeCanv'+'as'](_0x4106f6,_0x2cdfec){const _0x10a836=Math['min'](this['_maxPixelR'+'atio'],Me['browser']?window['devicePixe'+'lRatio']:-0x999+0x15*0x146+-0x1*0x1124),_0x525911=Math['floor'](_0x4106f6*_0x10a836),_0x5f115e=Math['floor'](_0x2cdfec*_0x10a836);(_0x525911!==this['canvas']['width']||_0x5f115e!==this['canvas']['height'])&&this['setResolut'+'ion'](_0x525911,_0x5f115e);}['setResolut'+'ion'](_0x1c243b,_0xb43cee){this['canvas']['width']=_0x1c243b,this['canvas']['height']=_0xb43cee,this['fire'](yh['EVENT_RESI'+'ZE'],_0x1c243b,_0xb43cee);}['update'](){this['updateClie'+'ntRect']();}['updateClie'+'ntRect'](){if(Me['worker'])this['clientRect']['width']=this['canvas']['width'],this['clientRect']['height']=this['canvas']['height'];else{const _0x40e470=this['canvas']['getBoundin'+'gClientRec'+'t']();this['clientRect']['width']=_0x40e470['width'],this['clientRect']['height']=_0x40e470['height'];}}get['width'](){return this['canvas']['width'];}get['height'](){return this['canvas']['height'];}set['fullscreen'](_0x4b6036){w['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.');}get['fullscreen'](){return w['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.'),!(-0x1a7f*-0x1+0xc*0x1bc+-0x2f4e);}set['maxPixelRa'+'tio'](_0x508713){this['_maxPixelR'+'atio']=_0x508713;}get['maxPixelRa'+'tio'](){return this['_maxPixelR'+'atio'];}get['deviceType'](){return this['_deviceTyp'+'e'];}['startRende'+'rPass'](_0x13b9e7){}['endRenderP'+'ass'](_0x2f9269){}['startCompu'+'tePass'](_0x1a6411){}['endCompute'+'Pass'](){}['frameStart'](){this['renderPass'+'Index']=-0xd*0x236+-0x1d8*-0x1+0x1ae6,this['renderVers'+'ion']++,w['call'](()=>{if(mi['get'](m0)){const _0x22a7aa=this['textures']['slice']();_0x22a7aa['sort']((_0x1222a6,_0x5d890e)=>_0x5d890e['gpuSize']-_0x1222a6['gpuSize']),w['log']('Textures:\x20'+_0x22a7aa['length']);let _0x129df9=0x1438+-0x2*-0x44b+-0x1cce;_0x22a7aa['forEach']((_0x19e362,_0x103081)=>{const _0x15eb84=_0x19e362['gpuSize'];_0x129df9+=_0x15eb84,w['log'](_0x103081+'.\x20'+_0x19e362['name']+'\x20'+_0x19e362['width']+'x'+_0x19e362['height']+'\x20VRAM:\x20'+(_0x15eb84/(0x13f1+-0x1092+0xa1)/(0x1448+-0x2315+0x12cd*0x1))['toFixed'](-0x24af+-0x1453+0x3904*0x1)+'\x20MB');}),w['log']('Total:\x20'+(_0x129df9/(-0x15db+-0x1c2e*0x1+0x3609)/(0x11ea+-0x29*-0x9f+-0x2761))['toFixed'](-0x285+-0x1db8+-0x27b*-0xd)+'MB');}});}['frameEnd'](){this['mapsToClea'+'r']['forEach'](_0x14cc66=>_0x14cc66['clear']()),this['mapsToClea'+'r']['clear']();}['computeDis'+'patch'](_0x54bef5,_0x2e0a92='Unnamed'){}['getRendera'+'bleHdrForm'+'at'](_0x2e0906=[En,nt,Xt],_0x4a6929=!(0x23f5+0x16e4+-0x3ad9),_0x520596=-0xa5e+0x1dad*0x1+-0x161*0xe){for(let _0x53ee97=0x14f+-0x1*-0x1d71+-0x6*0x520;_0x53ee97<_0x2e0906['length'];_0x53ee97++){const _0x419065=_0x2e0906[_0x53ee97];switch(_0x419065){case En:{if(this['textureRG1'+'1B10Render'+'able'])return _0x419065;break;}case nt:if(this['textureHal'+'fFloatRend'+'erable'])return _0x419065;break;case Xt:if(this['isWebGPU']&&_0x520596>-0x197+-0x3*0x659+0x24b*0x9)continue;if(this['textureFlo'+'atRenderab'+'le']&&(!_0x4a6929||this['textureFlo'+'atFilterab'+'le']))return _0x419065;break;}}}['validateAt'+'tributes'](_0x41eed2,_0x181c89,_0x204a54){w['call'](()=>{Ol['clear'](),_0x181c89==null||_0x181c89['elements']['forEach'](_0x58ac66=>Ol['add'](Le[_0x58ac66['name']])),_0x204a54==null||_0x204a54['elements']['forEach'](_0xcdd71e=>Ol['add'](Le[_0xcdd71e['name']]));for(const [_0x5a7583,_0x4e5fc4]of _0x41eed2['attributes'])Ol['has'](_0x5a7583)||w['errorOnce']('Vertex\x20att'+'ribute\x20['+_0x4e5fc4+(']\x20at\x20locat'+'ion\x20')+_0x5a7583+('\x20required\x20'+'by\x20the\x20sha'+'der\x20is\x20not'+'\x20present\x20i'+'n\x20the\x20curr'+'ently\x20assi'+'gned\x20verte'+'x\x20buffers,'+'\x20while\x20ren'+'dering\x20[')+Q['toString']()+']',{'shader':_0x41eed2,'vb0Format':_0x181c89,'vb1Format':_0x204a54});});}};h(yh,'EVENT_RESI'+'ZE','resizecanv'+'as');let $e=yh,jx=0x1*0x9d6+0x164f*-0x1+0xc79;class gt{constructor(_0x4f1ed9={}){h(this,'name'),h(this,'_device'),h(this,'_colorBuff'+'er'),h(this,'_colorBuff'+'ers'),h(this,'_depthBuff'+'er'),h(this,'_depth'),h(this,'_stencil'),h(this,'_samples'),h(this,'autoResolv'+'e'),h(this,'_face'),h(this,'_mipLevel'),h(this,'_mipmaps'),h(this,'flipY');var _0x23dce2,_0xad38b,_0x551192,_0x1dbe4b,_0xffa02,_0x3af5d1;w['assert'](!(_0x4f1ed9 instanceof $e),'pc.RenderT'+'arget\x20cons'+'tructor\x20no'+'\x20longer\x20ac'+'cepts\x20Grap'+'hicsDevice'+'\x20parameter'+'.'),this['id']=jx++;const _0x19080c=((_0x23dce2=_0x4f1ed9['colorBuffe'+'r'])==null?void(-0x772+0x1343*0x1+-0xbd1):_0x23dce2['device'])??((_0xad38b=_0x4f1ed9['colorBuffe'+'rs'])==null?void(-0x257+0x11f7+-0xfa0):_0xad38b[0xa48+0x1168+-0x1*0x1bb0]['device'])??((_0x551192=_0x4f1ed9['depthBuffe'+'r'])==null?void(0x1*-0x23ad+0x4df*0x4+-0x1*-0x1031):_0x551192['device'])??_0x4f1ed9['graphicsDe'+'vice'];w['assert'](_0x19080c,'Failed\x20to\x20'+'obtain\x20the'+'\x20device,\x20c'+'olorBuffer'+'\x20nor\x20depth'+'Buffer\x20sto'+'re\x20it.'),this['_device']=_0x19080c;const {maxSamples:_0x5b23ca}=this['_device'];if(this['_samples']=Math['min'](_0x4f1ed9['samples']??0xc36+-0x2*-0xae3+0x21fb*-0x1,_0x5b23ca),_0x19080c['isWebGPU']&&(this['_samples']=this['_samples']>0x5e1+-0x1*-0x1384+0xd*-0x1f4?_0x5b23ca:-0x4d*0x28+-0x20d7+-0x2ce0*-0x1),this['_colorBuff'+'er']=_0x4f1ed9['colorBuffe'+'r'],_0x4f1ed9['colorBuffe'+'r']&&(this['_colorBuff'+'ers']=[_0x4f1ed9['colorBuffe'+'r']]),this['_depthBuff'+'er']=_0x4f1ed9['depthBuffe'+'r'],this['_face']=_0x4f1ed9['face']??0x1*-0x1051+0x1864+0x9f*-0xd,this['_depthBuff'+'er']){const _0x44a19f=this['_depthBuff'+'er']['_format'];_0x44a19f===Wi||_0x44a19f===un?(this['_depth']=!(-0xaf6+-0x164d+0x41*0x83),this['_stencil']=!(0x6c*0x1d+-0xcd1*0x1+0x96)):_0x44a19f===Oh?(this['_depth']=!(-0x48a+0x3*0xa75+-0x1ad5),this['_stencil']=!(0x1347+-0x184c+0x505)):_0x44a19f===Qi&&this['_depthBuff'+'er']['device']['isWebGPU']&&this['_samples']>-0x1331+0x4b2*0x3+0x51c?(this['_depth']=!(0x7cc*0x5+0x2e*0x29+-0x2e5a*0x1),this['_stencil']=!(-0x304*-0x9+-0x77b+-0x4a*0x44)):(w['warn']('Incorrect\x20'+'depthBuffe'+'r\x20format.\x20'+'Must\x20be\x20pc'+'.PIXELFORM'+'AT_DEPTH\x20o'+'r\x20pc.PIXEL'+'FORMAT_DEP'+'THSTENCIL'),this['_depth']=!(-0x1d0f+-0x3c*-0x94+-0x5a0),this['_stencil']=!(-0x1388+0x25dc+-0x1253));}else this['_depth']=_0x4f1ed9['depth']??!(0x226a+0x7*0x4f9+-0x7b1*0x9),this['_stencil']=_0x4f1ed9['stencil']??!(-0x157f+0x2089+0xb09*-0x1);_0x4f1ed9['colorBuffe'+'rs']&&(w['assert'](!this['_colorBuff'+'ers'],'When\x20const'+'ructing\x20Re'+'nderTarget'+'\x20and\x20optio'+'ns.colorBu'+'ffers\x20is\x20u'+'sed,\x20optio'+'ns.colorBu'+'ffer\x20must\x20'+'not\x20be\x20use'+'d.'),this['_colorBuff'+'ers']||(this['_colorBuff'+'ers']=[..._0x4f1ed9['colorBuffe'+'rs']],this['_colorBuff'+'er']=_0x4f1ed9['colorBuffe'+'rs'][0x1e97+-0x2323+0x48c])),this['autoResolv'+'e']=_0x4f1ed9['autoResolv'+'e']??!(-0xa*0x19b+-0x1d*0x105+0x2af*0x11),this['name']=_0x4f1ed9['name'],this['name']||(this['name']=(_0x1dbe4b=this['_colorBuff'+'er'])==null?void(0x6*-0x346+0x1d*0x8e+-0x23*-0x1a):_0x1dbe4b['name']),this['name']||(this['name']=(_0xffa02=this['_depthBuff'+'er'])==null?void(0x2*0x409+0x671+-0xe83):_0xffa02['name']),this['name']||(this['name']='Untitled'),this['flipY']=_0x4f1ed9['flipY']??!(-0x1a83+-0x9c5+0x2449*0x1),this['_mipLevel']=_0x4f1ed9['mipLevel']??0x2709+-0xaf2+-0x1c17,this['_mipLevel']>0x535+-0xa9*-0x11+-0x106e&&this['_depth']&&(w['error']('Rendering\x20'+'to\x20a\x20mipLe'+'vel\x20is\x20not'+'\x20supported'+'\x20when\x20rend'+'er\x20target\x20'+'uses\x20a\x20dep'+'th\x20buffer.'+'\x20Ignoring\x20'+'mipLevel\x20'+this['_mipLevel']+('\x20for\x20rende'+'r\x20target\x20')+this['name'],{'renderTarget':this,'options':_0x4f1ed9}),this['_mipLevel']=0x13*-0x5+-0x1b4*0xf+-0x5*-0x52f),this['_mipmaps']=_0x4f1ed9['mipLevel']===void(0xf5*0x17+-0x21a3+0x8*0x174),this['validateMr'+'t'](),this['impl']=_0x19080c['createRend'+'erTargetIm'+'pl'](this),w['trace'](tm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+('\x20[samples:'+'\x20')+this['samples']+']'+((_0x3af5d1=this['_colorBuff'+'ers'])!=null&&_0x3af5d1['length']?'[MRT:\x20'+this['_colorBuff'+'ers']['length']+']':'')+(this['colorBuffe'+'r']?'[Color]':'')+(this['depth']?'[Depth]':'')+(this['stencil']?'[Stencil]':'')+'[Face:'+this['face']+']');}['destroy'](){w['trace'](tm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x13ea13=this['_device'];_0x13ea13&&(_0x13ea13['targets']['delete'](this),_0x13ea13['renderTarg'+'et']===this&&_0x13ea13['setRenderT'+'arget'](null),this['destroyFra'+'meBuffers']());}['destroyFra'+'meBuffers'](){const _0x3262d0=this['_device'];_0x3262d0&&this['impl']['destroy'](_0x3262d0);}['destroyTex'+'tureBuffer'+'s'](){var _0x452cf3,_0x563e28;(_0x452cf3=this['_depthBuff'+'er'])==null||_0x452cf3['destroy'](),this['_depthBuff'+'er']=null,(_0x563e28=this['_colorBuff'+'ers'])==null||_0x563e28['forEach'](_0xcc0586=>{_0xcc0586['destroy']();}),this['_colorBuff'+'ers']=null,this['_colorBuff'+'er']=null;}['resize'](_0x490a56,_0x53e42f){var _0x1c5f42,_0x40b35a;if(this['width']!==_0x490a56||this['height']!==_0x53e42f){if(this['mipLevel']>-0xd89+0x42a+-0x95f*-0x1){w['warn']('Only\x20a\x20ren'+'der\x20target'+'\x20rendering'+'\x20to\x20mipLev'+'el\x200\x20can\x20b'+'e\x20resized,'+'\x20ignoring.',this);return;}const _0x21fed6=this['_device'];this['destroyFra'+'meBuffers'](),_0x21fed6['renderTarg'+'et']===this&&_0x21fed6['setRenderT'+'arget'](null),(_0x1c5f42=this['_depthBuff'+'er'])==null||_0x1c5f42['resize'](_0x490a56,_0x53e42f),(_0x40b35a=this['_colorBuff'+'ers'])==null||_0x40b35a['forEach'](_0x22a2c5=>{_0x22a2c5['resize'](_0x490a56,_0x53e42f);}),this['validateMr'+'t'](),this['impl']=_0x21fed6['createRend'+'erTargetIm'+'pl'](this);}}['validateMr'+'t'](){w['call'](()=>{if(this['_colorBuff'+'ers']){const {width:_0x460259,height:_0x4ef751,cubemap:_0x433e39,volume:_0x28123e}=this['_colorBuff'+'ers'][0x2b*0x3a+0xa*0x163+0x5e7*-0x4];for(let _0x2c7ee9=-0x1e5b+0x25fc+-0xf4*0x8;_0x2c7ee9<this['_colorBuff'+'ers']['length'];_0x2c7ee9++){const _0x1df7d7=this['_colorBuff'+'ers'][_0x2c7ee9];w['assert'](_0x1df7d7['width']===_0x460259,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20width',this),w['assert'](_0x1df7d7['height']===_0x4ef751,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20height',this),w['assert'](_0x1df7d7['cubemap']===_0x433e39,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20cubemap\x20s'+'etting',this),w['assert'](_0x1df7d7['volume']===_0x28123e,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20volume\x20se'+'tting',this);}}});}['init'](){this['impl']['init'](this['_device'],this);}get['initialize'+'d'](){return this['impl']['initialize'+'d'];}get['device'](){return this['_device'];}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['resolve'](_0x4a77dd=!(0x260d+-0x1050+-0x15bd),_0x4ed32a=!!this['_depthBuff'+'er']){this['_device']&&this['_samples']>-0x2*-0xe89+0x338*-0x7+-0x689&&(Q['pushGpuMar'+'ker'](this['_device'],'RESOLVE-RT'+':'+this['name']+':'+(_0x4a77dd?'[color]':'')+':'+(_0x4ed32a?'[depth]':'')),this['impl']['resolve'](this['_device'],this,_0x4a77dd,_0x4ed32a),Q['popGpuMark'+'er'](this['_device']));}['copy'](_0x34577a,_0x1012c3,_0x548c51){if(!this['_device']){if(_0x34577a['_device'])this['_device']=_0x34577a['_device'];else return w['error']('Render\x20tar'+'gets\x20are\x20n'+'ot\x20initial'+'ized'),!(-0x202f+0x23d5+-0x1*0x3a5);}Q['pushGpuMar'+'ker'](this['_device'],'COPY-RT:'+_0x34577a['name']+'->'+this['name']);const _0x3ea39e=this['_device']['copyRender'+'Target'](_0x34577a,this,_0x1012c3,_0x548c51);return Q['popGpuMark'+'er'](this['_device']),_0x3ea39e;}get['samples'](){return this['_samples'];}get['depth'](){return this['_depth'];}get['stencil'](){return this['_stencil'];}get['colorBuffe'+'r'](){return this['_colorBuff'+'er'];}['getColorBu'+'ffer'](_0x3464b9){var _0xf70b23;return(_0xf70b23=this['_colorBuff'+'ers'])==null?void(-0x1e04+0x3*-0x643+0x30cd):_0xf70b23[_0x3464b9];}get['depthBuffe'+'r'](){return this['_depthBuff'+'er'];}get['face'](){return this['_face'];}get['mipLevel'](){return this['_mipLevel'];}get['mipmaps'](){return this['_mipmaps'];}get['width'](){var _0xe00dee,_0xa04c5b;let _0xb7c6c5=((_0xe00dee=this['_colorBuff'+'er'])==null?void(-0x2*-0xdfd+0x2*-0xf85+0x62*0x8):_0xe00dee['width'])||((_0xa04c5b=this['_depthBuff'+'er'])==null?void(0x2*0x24d+-0x23f1+0x1f57):_0xa04c5b['width'])||this['_device']['width'];return this['_mipLevel']>0x1b*0xe1+-0x12dd+-0x4de&&(_0xb7c6c5=$i['calcLevelD'+'imension'](_0xb7c6c5,this['_mipLevel'])),_0xb7c6c5;}get['height'](){var _0x5a3699,_0x3350f2;let _0x238424=((_0x5a3699=this['_colorBuff'+'er'])==null?void(0x2c+0xe1a+-0xe46):_0x5a3699['height'])||((_0x3350f2=this['_depthBuff'+'er'])==null?void(0x349+-0x1efa+0x3*0x93b):_0x3350f2['height'])||this['_device']['height'];return this['_mipLevel']>-0x1024*0x2+-0xc27*-0x3+-0x42d&&(_0x238424=$i['calcLevelD'+'imension'](_0x238424,this['_mipLevel'])),_0x238424;}['isColorBuf'+'ferSrgb'](_0x43da7a=0x2201+0x5e*-0x49+-0x733){if(this['device']['backBuffer']===this)return Wc(this['device']['backBuffer'+'Format']);const _0x1bdd2a=this['getColorBu'+'ffer'](_0x43da7a);return _0x1bdd2a?Wc(_0x1bdd2a['format']):!(-0x2702+-0x11b*-0x1a+0xa45);}}const Yx={'equals'(_0x485b56,_0x518dba){if(_0x485b56['length']!==_0x518dba['length'])return!(0x143*0x3+0x1747+-0x3*0x905);for(let _0x273ee7=0x4*-0x7ac+-0x22e0+0x4190;_0x273ee7<_0x485b56['length'];_0x273ee7++)if(_0x485b56[_0x273ee7]!==_0x518dba[_0x273ee7])return!(-0x9f*0x3b+-0x3*0x911+0x3fd9);return!(0x1f66+0x24ef+-0x4455*0x1);}};class td{constructor(){h(this,'_refCount',-0x6f*-0x31+-0x1e62+0x923);}['incRefCoun'+'t'](){this['_refCount']++;}['decRefCoun'+'t'](){this['_refCount']--;}get['refCount'](){return this['_refCount'];}}class Kx extends td{constructor(_0x564afd){super(),h(this,'object'),(this['object']=_0x564afd,this['incRefCoun'+'t']());}}class Zx{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach'](_0x202f13=>{var _0x4b57af;(_0x4b57af=_0x202f13['object'])==null||_0x4b57af['destroy']();}),this['cache']['clear']();}['clear'](){this['cache']['clear']();}['get'](_0x684cd6){const _0x137751=this['cache']['get'](_0x684cd6);return _0x137751?(_0x137751['incRefCoun'+'t'](),_0x137751['object']):null;}['set'](_0x22f0af,_0x487cdd){w['assert'](!this['cache']['has'](_0x22f0af),'RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'put\x20object'+'\x20with\x20key\x20'+'that\x20alrea'+'dy\x20exists\x20'+'in\x20the\x20cac'+'he',{'key':_0x22f0af,'object':_0x487cdd}),this['cache']['set'](_0x22f0af,new Kx(_0x487cdd));}['release'](_0x5d7e4a){var _0x2e1e4d;const _0x15e36d=this['cache']['get'](_0x5d7e4a);_0x15e36d?(_0x15e36d['decRefCoun'+'t'](),_0x15e36d['refCount']===0xd*0xa3+0x17*-0x13d+-0x6*-0x35e&&(this['cache']['delete'](_0x5d7e4a),(_0x2e1e4d=_0x15e36d['object'])==null||_0x2e1e4d['destroy']())):w['warn']('RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'release\x20ob'+'ject\x20that\x20'+'is\x20not\x20in\x20'+'the\x20cache',{'key':_0x5d7e4a});}}class Qx extends Zx{['loseContex'+'t'](_0x285cb3){this['clear']();}}const Jx=new Kt(),ud=_0x13e280=>Jx['get'](_0x13e280,()=>new Qx()),At=[];At[$s]=-0x1066*0x1+-0xe+0x1075,At[fa]=-0xae5+-0xfd6*0x2+0x2a93,At[ds]=-0x1*-0x1e65+-0x1213*0x2+-0x12*-0x52,At[An]=-0x40a+-0x7*0x1f3+0x11b3,At[da]=0x9fd+0x1fb*-0xb+-0x3ef*-0x3,At[ra]=0x2353+0x13d9*-0x1+-0x16*0xb4,At[aa]=-0x1*-0x7a+-0x188a+-0x1813*-0x1,At[na]=-0x1b*-0x163+0x22a+-0x2797,At[mn]=0x4c9+-0x1ec*0xf+0x180c,At[Go]=0x9e5*0x1+0x359*0x8+0x3f*-0x95,At[Ho]=-0x13b1+0x1ee7+-0xb33,At[Wo]=-0xf9*-0x25+0x1*0x171a+-0x3b13,At[jc]=-0x91*0xb+0x4*0x5b8+0x1*-0x109d,At[Cn]=-0xd1*-0xa+0x11c1+-0x19df,At[li]=-0x26cc+0x11f3+-0x35*-0x65,At[Pn]=0x76*-0x44+-0xf37+0x2e90,At[Mn]=0xd*-0x1e8+-0xea7+0x2771,At[Dn]=0x11b6+0x1f59*-0x1+0x2*0x6d3,At[In]=-0x199d+0x7*-0xc1+0x7ba*0x4;class dt{constructor(_0x2c2562,_0x32872c,_0x5058b4=0x14c4+0x2696*0x1+-0x3b5a){h(this,'name'),h(this,'type'),h(this,'byteSize'),h(this,'offset'),h(this,'scopeId'),h(this,'count'),h(this,'numCompone'+'nts');if(this['shortName']=_0x2c2562,this['name']=_0x5058b4?_0x2c2562+'[0]':_0x2c2562,this['type']=_0x32872c,this['numCompone'+'nts']=At[_0x32872c],w['assert'](this['numCompone'+'nts'],'Unhandled\x20'+'uniform\x20fo'+'rmat\x20'+_0x32872c+'\x20used\x20for\x20'+_0x2c2562),this['updateType']=_0x32872c,_0x5058b4>-0x1e5b+0x1*-0xb72+0x29cd)switch(_0x32872c){case $s:this['updateType']=$h;break;case da:this['updateType']=Ln;break;case Pn:this['updateType']=jh;break;case mn:this['updateType']=Yh;break;case fa:this['updateType']=Xh;break;case ra:this['updateType']=Rn;break;case Mn:this['updateType']=Kh;break;case Go:this['updateType']=Zh;break;case ds:this['updateType']=qh;break;case aa:this['updateType']=On;break;case Dn:this['updateType']=Qh;break;case Ho:this['updateType']=Jh;break;case An:this['updateType']=ap;break;case na:this['updateType']=Yc;break;case In:this['updateType']=np;break;case Wo:this['updateType']=op;break;case li:this['updateType']=VS;break;default:w['error']('Uniform\x20ar'+'ray\x20of\x20typ'+'e\x20'+GS[_0x32872c]+('\x20is\x20not\x20su'+'pported\x20wh'+'en\x20process'+'ing\x20unifor'+'m\x20\x27')+_0x2c2562+'\x27.'),w['call'](()=>{this['invalid']=!(0x102c+-0x175d*0x1+0x1*0x731);});break;}this['count']=_0x5058b4,w['assert'](!isNaN(_0x5058b4),'Unsupporte'+'d\x20uniform:'+'\x20'+_0x2c2562+'['+_0x5058b4+']'),w['call'](()=>{isNaN(_0x5058b4)&&(this['invalid']=!(0xd9e+0x31*0x76+-0x121a*0x2));});let _0xcb77c0=this['numCompone'+'nts'];_0x5058b4&&(_0xcb77c0=Y['roundUp'](_0xcb77c0,0x541*-0x5+0x1*0xab7+0xf92)),this['byteSize']=_0xcb77c0*(0x104e*0x1+0x1c4d+0x8eb*-0x5),_0x5058b4&&(this['byteSize']*=_0x5058b4),w['assert'](this['byteSize'],'Unknown\x20by'+'te\x20size\x20fo'+'r\x20uniform\x20'+'format\x20'+_0x32872c+'\x20used\x20for\x20'+_0x2c2562);}get['isArrayTyp'+'e'](){return this['count']>0x93b*-0x1+0x659+0x1*0x2e2;}['calculateO'+'ffset'](_0x180fe0){let _0x8d54cc=this['byteSize']<=-0x14*-0x148+-0x19b3+0x9*0x3?this['byteSize']:0x5*-0x282+-0xd2*0x17+0x1f78;this['count']&&(_0x8d54cc=0x5*0x45d+-0x1ca+-0x13f7),_0x180fe0=Y['roundUp'](_0x180fe0,_0x8d54cc),this['offset']=_0x180fe0/(0x7b7*-0x2+0x17e*-0x11+-0x28d*-0x10);}}class ry{constructor(_0x36c898,_0x3414a8){h(this,'byteSize',0x8b0*0x1+-0x1*-0x1f+0xb*-0xcd),h(this,'map',new Map()),(this['scope']=_0x36c898['scope'],this['uniforms']=_0x3414a8);let _0x37d239=0xc5b*0x1+0x13e2+-0x203d;for(let _0x50b945=-0x31d*0x8+-0x1134*0x1+0x2a1c;_0x50b945<_0x3414a8['length'];_0x50b945++){const _0x27960e=_0x3414a8[_0x50b945];_0x27960e['calculateO'+'ffset'](_0x37d239),_0x37d239=_0x27960e['offset']*(-0xd*0x133+-0x2f0*0xa+-0x31*-0xeb)+_0x27960e['byteSize'],_0x27960e['scopeId']=this['scope']['resolve'](_0x27960e['name']),this['map']['set'](_0x27960e['name'],_0x27960e);}this['byteSize']=Y['roundUp'](_0x37d239,-0x1*-0x2249+0x23d+-0x167*0x1a);}['get'](_0x46b7c8){return this['map']['get'](_0x46b7c8);}}const Pr='Preprocess'+'or',Os=/[ \t]*#(ifn?def|if|endif|else|elif|define|undef|extension|include)/g,pd=/define[ \t]+([^\n]+)\r?(?:\n|$)/g,Mm=/extension[ \t]+([\w-]+)[ \t]*:[ \t]*(enable|require)/g,md=/undef[ \t]+([^\n]+)\r?(?:\n|$)/g,_d=/(ifdef|ifndef|if)[ \t]*([^\r\n]+)\r?\n/g,gd=/(endif|else|elif)(?:[ \t]+([^\r\n]*))?\r?\n?/g,Dm=/\{?[\w-]+\}?/,eT=/(!|\s)?defined\(([\w-]+)\)/,tT=/!?defined\s*\([^)]*\)/g,sT=/!?defined\s*$/,iT=/([a-z_]\w*)\s*(==|!=|<|<=|>|>=)\s*([\w"']+)/i,rT=/[+\-]/g,Sd=/include[ \t]+"([\w-]+)(?:\s*,\s*([\w-]+))?"/g,aT=/\{i\}/g,Im=/(pcFragColor[1-8])\b/g,Lt=class Lt{static['run'](_0x36794f,_0x38cb22=new Map(),_0x48ffbc={}){Lt['sourceName']=_0x48ffbc['sourceName'],_0x36794f=this['stripComme'+'nts'](_0x36794f),_0x36794f=_0x36794f['split'](/\r?\n/)['map'](_0x5d25b0=>_0x5d25b0['trimEnd']())['join']('\x0a');const _0x452ae9=new Map(),_0x2470e4=new Map();if(_0x36794f=this['_preproces'+'s'](_0x36794f,_0x452ae9,_0x2470e4,_0x38cb22,_0x48ffbc['stripDefin'+'es']),_0x36794f===null)return null;const _0x2d3293=new Map();return _0x452ae9['forEach']((_0x2f5d9e,_0x248223)=>{Number['isInteger'](parseFloat(_0x2f5d9e))&&!_0x2f5d9e['includes']('.')&&_0x2d3293['set'](_0x248223,_0x2f5d9e);}),_0x36794f=this['stripComme'+'nts'](_0x36794f),_0x36794f=this['stripUnuse'+'dColorAtta'+'chments'](_0x36794f,_0x48ffbc),_0x36794f=this['RemoveEmpt'+'yLines'](_0x36794f),_0x36794f=this['processArr'+'aySize'](_0x36794f,_0x2d3293),_0x36794f=this['injectDefi'+'nes'](_0x36794f,_0x2470e4),_0x36794f;}static['stripUnuse'+'dColorAtta'+'chments'](_0x5abec0,_0x35e7fd){if(_0x35e7fd['stripUnuse'+'dColorAtta'+'chments']){const _0x5b6b43=new Map(),_0x239385=_0x5abec0['match'](Im);if(_0x239385==null||_0x239385['forEach'](_0x264a28=>{const _0x4eb497=parseInt(_0x264a28['charAt'](_0x264a28['length']-(-0x12*0x22a+0x25*-0xe9+0x48a2)),-0x2*-0x4e7+0x1f9c+-0x14b0*0x2);_0x5b6b43['set'](_0x4eb497,(_0x5b6b43['get'](_0x4eb497)??0x125a+-0xf52+-0x308)+(0x1141*0x1+0x1f9*0x13+-0x36bb));}),Array['from'](_0x5b6b43['values']())['some'](_0x2a8d93=>_0x2a8d93===0x6e5+0x35a*-0x1+0x1*-0x38a)){const _0x415df7=_0x5abec0['split']('\x0a'),_0x59f54d=[];for(let _0x2855c6=0x6*-0x5cc+0x1*-0x18a+0x2452;_0x2855c6<_0x415df7['length'];_0x2855c6++){const _0x43b0d9=_0x415df7[_0x2855c6]['match'](Im);if(_0x43b0d9){const _0x25a1b3=parseInt(_0x43b0d9[-0x6d*-0x31+-0x1d*-0x29+-0x1982]['charAt'](_0x43b0d9[0x500*0x3+0xba4+0x1*-0x1aa4]['length']-(0x17ec+-0x466*-0x1+-0x1c51)),0x14f8+0x1eda+-0x33c8);if(_0x25a1b3>-0xc36+0xea4+-0x26e*0x1&&_0x5b6b43['get'](_0x25a1b3)===-0xaab*-0x3+-0x17e0+-0x820*0x1)continue;}_0x59f54d['push'](_0x415df7[_0x2855c6]);}_0x5abec0=_0x59f54d['join']('\x0a');}}return _0x5abec0;}static['stripComme'+'nts'](_0x375cc5){return _0x375cc5['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1');}static['processArr'+'aySize'](_0x167d77,_0x107dd1){return _0x167d77!==null&&_0x107dd1['forEach']((_0x3e6d92,_0x232f8c)=>{_0x167d77=_0x167d77['replace'](new RegExp('\x5c['+_0x232f8c+'\x5c]','g'),'['+_0x3e6d92+']');}),_0x167d77;}static['injectDefi'+'nes'](_0x11a75b,_0xb9ed3f){if(_0x11a75b!==null&&_0xb9ed3f['size']>-0x1424+-0x2e6+0x170a){const _0x463b0e=_0x11a75b['split']('\x0a');_0xb9ed3f['forEach']((_0x4c8fb7,_0x561bbb)=>{const _0x2c59e1=new RegExp(_0x561bbb,'g');for(let _0x27c86e=-0x1*0x6f+-0x1*0x246b+0x24da;_0x27c86e<_0x463b0e['length'];_0x27c86e++)_0x463b0e[_0x27c86e]['includes']('#')||(_0x463b0e[_0x27c86e]=_0x463b0e[_0x27c86e]['replace'](_0x2c59e1,_0x4c8fb7));}),_0x11a75b=_0x463b0e['join']('\x0a');}return _0x11a75b;}static['RemoveEmpt'+'yLines'](_0x26d650){return _0x26d650!==null&&(_0x26d650=_0x26d650['split'](/\r?\n/)['map'](_0x36ab7f=>_0x36ab7f['trim']()===''?'':_0x36ab7f)['join']('\x0a'),_0x26d650=_0x26d650['replace'](/(\n\n){3,}/g,'\x0a\x0a')),_0x26d650;}static['_preproces'+'s'](_0x6e74e5,_0x116fef=new Map(),_0x72bc9e,_0x1c4471,_0x4c6c8a){var _0x18f85b;const _0x43313e=_0x6e74e5,_0x312d17=[];let _0x201ec9=!(-0x8ef*-0x2+0x7*0x458+-0x3045),_0x4e301e;for(;(_0x4e301e=Os['exec'](_0x6e74e5))!==null&&!_0x201ec9;){const _0x295846=_0x4e301e[-0x133b+-0x25b1+0x38ed];switch(_0x295846){case'define':{pd['lastIndex']=_0x4e301e['index'];const _0x685b95=pd['exec'](_0x6e74e5);w['assert'](_0x685b95,'Invalid\x20['+_0x295846+']:\x20'+_0x6e74e5['substring'](_0x4e301e['index'],_0x4e301e['index']+(-0x135*0x2+-0x3*0x295+0xa8d))+'...'),_0x201ec9||(_0x201ec9=_0x685b95===null);const _0x159d17=_0x685b95[0xf06+-0x255f+0x165a];Dm['lastIndex']=_0x685b95['index'];const _0x4f9466=Dm['exec'](_0x159d17)[-0x1ea0+-0x8e*-0x3+0x2*0xe7b];let _0x429712=_0x159d17['substring'](_0x4f9466['length'])['trim']();_0x429712===''&&(_0x429712='true');const _0x51bdcf=Lt['_keep'](_0x312d17);let _0x57f958=_0x4c6c8a;if(_0x51bdcf){const _0x12a917=_0x4f9466['startsWith']('{')&&_0x4f9466['endsWith']('}');_0x12a917&&(_0x57f958=!(-0x9*-0x22+-0x33*0x84+0x33*0x7e)),_0x12a917?_0x72bc9e['set'](_0x4f9466,_0x429712):_0x116fef['set'](_0x4f9466,_0x429712),_0x57f958&&(_0x6e74e5=_0x6e74e5['substring'](0xe8e+0x26db+-0x3569,_0x685b95['index']-(-0x5de+0xba6+0x1d*-0x33))+_0x6e74e5['substring'](pd['lastIndex']),Os['lastIndex']=_0x685b95['index']-(0x19*-0x6d+0x6*0x47+0x8fc));}w['trace'](Pr,_0x295846+':\x20['+_0x4f9466+']\x20'+_0x429712+'\x20'+(_0x51bdcf?'':'IGNORED')),_0x57f958||(Os['lastIndex']=_0x685b95['index']+_0x685b95[-0x1f07+0x374+0x1b93]['length']);break;}case'undef':{md['lastIndex']=_0x4e301e['index'];const _0x16b3ad=md['exec'](_0x6e74e5),_0x29dcd5=_0x16b3ad[-0x1*0x191b+-0x1f27+-0x12c1*-0x3]['trim'](),_0xa86173=Lt['_keep'](_0x312d17);_0xa86173&&(_0x116fef['delete'](_0x29dcd5),_0x4c6c8a&&(_0x6e74e5=_0x6e74e5['substring'](0xc73+-0x1ba9+0xf36,_0x16b3ad['index']-(0x202*0x2+-0x20d3+0x1cd0))+_0x6e74e5['substring'](md['lastIndex']),Os['lastIndex']=_0x16b3ad['index']-(0xb82+0x2*-0x80+-0xa81))),w['trace'](Pr,_0x295846+':\x20['+_0x29dcd5+']\x20'+(_0xa86173?'':'IGNORED')),_0x4c6c8a||(Os['lastIndex']=_0x16b3ad['index']+_0x16b3ad[-0x3b*-0x74+0x10fb+-0x13*0x24d]['length']);break;}case'extension':{Mm['lastIndex']=_0x4e301e['index'];const _0x4b758e=Mm['exec'](_0x6e74e5);if(w['assert'](_0x4b758e,'Invalid\x20['+_0x295846+']:\x20'+_0x6e74e5['substring'](_0x4e301e['index'],_0x4e301e['index']+(-0x1d6b+-0x2d2+0x20a1))+'...'),_0x201ec9||(_0x201ec9=_0x4b758e===null),_0x4b758e){const _0x331af1=_0x4b758e[0xa45+0xa21*-0x1+0x23*-0x1],_0x40fab5=Lt['_keep'](_0x312d17);_0x40fab5&&_0x116fef['set'](_0x331af1,'true'),w['trace'](Pr,_0x295846+':\x20['+_0x331af1+']\x20'+(_0x40fab5?'':'IGNORED'));}Os['lastIndex']=_0x4b758e['index']+_0x4b758e[0x1*-0x1c62+-0x1*0x2231+0x3e93]['length'];break;}case'ifdef':case'ifndef':case'if':{_d['lastIndex']=_0x4e301e['index'];const _0x5dd49a=_d['exec'](_0x6e74e5),_0x1c08b7=_0x5dd49a[-0x76d*0x3+-0x4*-0x9af+-0x1073],_0x2ae3d4=Lt['evaluate'](_0x1c08b7,_0x116fef);_0x201ec9||(_0x201ec9=_0x2ae3d4['error']);let _0x1a93ba=_0x2ae3d4['result'];_0x295846==='ifndef'&&(_0x1a93ba=!_0x1a93ba),_0x312d17['push']({'anyKeep':_0x1a93ba,'keep':_0x1a93ba,'start':_0x4e301e['index'],'end':_d['lastIndex']}),w['trace'](Pr,_0x295846+':\x20['+_0x1c08b7+']\x20=>\x20'+_0x1a93ba),Os['lastIndex']=_0x5dd49a['index']+_0x5dd49a[0x207b*0x1+-0x58c+-0x5*0x563]['length'];break;}case'endif':case'else':case'elif':{gd['lastIndex']=_0x4e301e['index'];const _0x45c88a=gd['exec'](_0x6e74e5),_0xecda98=_0x312d17['pop']();if(!_0xecda98){console['error']('Shader\x20pre'+'processing'+'\x20encounter'+'ed\x20\x22#'+_0x45c88a[0x6a1+0x1*-0xb6+0x1*-0x5ea]+('\x22\x20without\x20'+'a\x20precedin'+'g\x20#if\x20#ifd'+'ef\x20#ifndef'+'\x20while\x20pre'+'processing'+'\x20')+Lt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x6e74e5['substring'](_0x4e301e['index'],_0x4e301e['index']+(0x1*0xce5+0xdf1+0x2a5*-0xa))+'...',{'source':_0x43313e}),_0x201ec9=!(0x2612+-0x175b+-0xeb7);continue;}const _0x125f6c=_0xecda98['keep']?_0x6e74e5['substring'](_0xecda98['end'],_0x4e301e['index']):'';w['trace'](Pr,_0x295846+(':\x20[previou'+'s\x20block]\x20='+'>\x20')+(_0x125f6c!=='')),_0x6e74e5=_0x6e74e5['substring'](0x11cb+0x3b*0x7d+-0x2e9a,_0xecda98['start'])+_0x125f6c+_0x6e74e5['substring'](gd['lastIndex']),Os['lastIndex']=_0xecda98['start']+_0x125f6c['length'];const _0x2fafbc=_0x45c88a[0x978+0x2*0x8e3+0x1b3d*-0x1];if(_0x2fafbc==='else'||_0x2fafbc==='elif'){let _0x5f39d6=!(0x1c33+0x1*0x1f97+-0xbf5*0x5);if(!_0xecda98['anyKeep']){if(_0x2fafbc==='else')_0x5f39d6=!_0xecda98['keep'];else{const _0x4cca1e=Lt['evaluate'](_0x45c88a[0x5*0x4b+0x49*0x2b+-0xdb8],_0x116fef);_0x5f39d6=_0x4cca1e['result'],_0x201ec9||(_0x201ec9=_0x4cca1e['error']);}}_0x312d17['push']({'anyKeep':_0xecda98['anyKeep']||_0x5f39d6,'keep':_0x5f39d6,'start':Os['lastIndex'],'end':Os['lastIndex']}),w['trace'](Pr,_0x295846+':\x20['+_0x45c88a[-0x1888+-0x3*0xa57+0x378f]+']\x20=>\x20'+_0x5f39d6);}break;}case'include':{Sd['lastIndex']=_0x4e301e['index'];const _0x294e1a=Sd['exec'](_0x6e74e5);if(_0x201ec9||(_0x201ec9=_0x294e1a===null),!_0x294e1a){w['assert'](_0x294e1a,'Invalid\x20['+_0x295846+(']\x20while\x20pr'+'eprocessin'+'g\x20')+Lt['sourceName']+':\x0a'+_0x6e74e5['substring'](_0x4e301e['index'],_0x4e301e['index']+(-0x2*-0x617+0x32*0x3a+-0x171e))+'...'),_0x201ec9=!(-0x2a7*0x2+-0x1*-0x134f+-0xe01);continue;}const _0x3c763e=_0x294e1a[0x817+-0x1cd0+0x14ba]['trim'](),_0x391a4a=(_0x18f85b=_0x294e1a[0x234a+-0x549*-0x7+-0x4847])==null?void(0x5*-0x76b+-0xe*0xb1+0x133*0x27):_0x18f85b['trim'](),_0x37bad8=Lt['_keep'](_0x312d17);if(_0x37bad8){let _0x5c7d5e=_0x1c4471==null?void(-0x1*0xaa9+-0x232*0x7+0x1a07*0x1):_0x1c4471['get'](_0x3c763e);if(_0x5c7d5e!==void(0x19b*0x5+0x8c9+-0x10d*0x10)){if(_0x5c7d5e=this['stripComme'+'nts'](_0x5c7d5e),_0x391a4a){const _0x2c3869=_0x116fef['get'](_0x391a4a),_0x750207=parseFloat(_0x2c3869);if(Number['isInteger'](_0x750207)){let _0x5b3ee4='';for(let _0x1d210d=-0x163d+0x1ab9+-0x47c;_0x1d210d<_0x750207;_0x1d210d++)_0x5b3ee4+=_0x5c7d5e['replace'](aT,String(_0x1d210d));_0x5c7d5e=_0x5b3ee4;}else console['error']('Include\x20Co'+'unt\x20identi'+'fier\x20\x22'+_0x391a4a+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Lt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x6e74e5['substring'](_0x4e301e['index'],_0x4e301e['index']+(0x61*-0x1d+-0x8*-0x2a1+0x7*-0x161))+'...',{'originalSource':_0x43313e,'source':_0x6e74e5}),_0x201ec9=!(0xa49+-0x194d+0x1f*0x7c);}_0x6e74e5=_0x6e74e5['substring'](-0x25c4+-0xd41+-0x161*-0x25,_0x294e1a['index']-(-0x8*-0x301+-0x51c+-0x12eb))+_0x5c7d5e+_0x6e74e5['substring'](Sd['lastIndex']),Os['lastIndex']=_0x294e1a['index']-(-0x2441+-0x616+0x43c*0xa);}else{console['error']('Include\x20\x22'+_0x3c763e+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Lt['sourceName'],{'originalSource':_0x43313e,'source':_0x6e74e5}),_0x201ec9=!(-0x19ed*0x1+-0x1235+0x10d*0x2a);continue;}}w['trace'](Pr,_0x295846+':\x20['+_0x3c763e+']\x20'+(_0x37bad8?'':'IGNORED'));break;}}}return _0x312d17['length']>-0xca5+-0x1*0x3f8+0x109d&&(console['error']('Shader\x20pre'+'processing'+'\x20reached\x20t'+'he\x20end\x20of\x20'+'the\x20file\x20w'+'ithout\x20enc'+'ountering\x20'+'the\x20necess'+'ary\x20#endif'+'\x20to\x20close\x20'+'a\x20precedin'+'g\x20#if,\x20#if'+'def,\x20or\x20#i'+'fndef\x20bloc'+'k.\x20'+Lt['sourceName']),_0x201ec9=!(-0x154d+-0x869*0x1+0x2*0xedb)),_0x201ec9?(console['error']('Failed\x20to\x20'+'preprocess'+'\x20shader:\x20',{'source':_0x43313e}),null):_0x6e74e5;}static['_keep'](_0x57c26f){for(let _0x4a94ae=-0x3*-0x725+0x93f+-0x1eae;_0x4a94ae<_0x57c26f['length'];_0x4a94ae++)if(!_0x57c26f[_0x4a94ae]['keep'])return!(-0x8b*0xd+-0x1ea9+0x25*0x105);return!(-0xa52+-0x2651+-0x1*-0x30a3);}static['evaluateAt'+'omicExpres'+'sion'](_0x2b9c58,_0x21c180){let _0x214920=!(0x6d*-0x4+0xce5*-0x1+0xe9a);_0x2b9c58=_0x2b9c58['trim']();let _0x22767b=!(0x9a9*-0x2+0x3ce*0x4+0x41b);if(_0x2b9c58==='true')return{'result':!(0x1*-0xdc7+0xe6a+-0xa3),'error':_0x214920};if(_0x2b9c58==='false')return{'result':!(-0x1*0x4e1+0x1*0x1acf+-0x15ed),'error':_0x214920};const _0x4824ff=eT['exec'](_0x2b9c58);if(_0x4824ff){_0x22767b=_0x4824ff[-0x45*-0xf+-0x1*0x23db+0x1fd1]==='!',_0x2b9c58=_0x4824ff[0xf04+-0x15f*0x17+0x1*0x1087]['trim']();const _0x2e4829=_0x21c180['has'](_0x2b9c58);return{'result':_0x22767b?!_0x2e4829:_0x2e4829,'error':_0x214920};}const _0x67ee11=iT['exec'](_0x2b9c58);if(_0x67ee11){const _0x475ff8=_0x21c180['get'](_0x67ee11[0x1522+0x24f3+0x3f*-0xec]['trim']())??_0x67ee11[-0x15a*0x1+-0x3ad*-0x2+-0x5ff]['trim'](),_0x2de5e8=_0x21c180['get'](_0x67ee11[-0x3f*-0x30+-0x6fa+-0x4d3]['trim']())??_0x67ee11[-0xe84+-0x2*-0x68e+-0x21*-0xb]['trim'](),_0x2216d2=_0x67ee11[-0x26d+-0x1*0x24ad+0x2*0x138e]['trim']();let _0x298ecb=!(0x1*-0x48a+-0x1aaa+0x1f35);switch(_0x2216d2){case'==':_0x298ecb=_0x475ff8===_0x2de5e8;break;case'!=':_0x298ecb=_0x475ff8!==_0x2de5e8;break;case'<':_0x298ecb=_0x475ff8<_0x2de5e8;break;case'<=':_0x298ecb=_0x475ff8<=_0x2de5e8;break;case'>':_0x298ecb=_0x475ff8>_0x2de5e8;break;case'>=':_0x298ecb=_0x475ff8>=_0x2de5e8;break;default:_0x214920=!(0xcb9*-0x3+-0x1493+0x3abe);}return{'result':_0x298ecb,'error':_0x214920};}return{'result':_0x21c180['has'](_0x2b9c58),'error':_0x214920};}static['processPar'+'entheses'](_0x13f2eb,_0x3fb00c){let _0x214b44=!(0x239c+0x1*0x18bd+0x1*-0x3c58),_0x31abe7=_0x13f2eb['trim']();for(;_0x31abe7['startsWith']('(')&&_0x31abe7['endsWith'](')');){let _0x82f90=-0x2*-0xa6f+0x2fe*0xd+-0x3bc4,_0xcfa976=!(0xa4e*-0x1+0x1421+-0x9d3);for(let _0x22ecc6=-0x125a+0x22c0+-0x1066;_0x22ecc6<_0x31abe7['length']-(0x1*-0x15a5+-0xbe6*0x1+0x10c6*0x2);_0x22ecc6++)if(_0x31abe7[_0x22ecc6]==='(')_0x82f90++;else{if(_0x31abe7[_0x22ecc6]===')'&&(_0x82f90--,_0x82f90===-0xe70+-0x1355+0x21c5)){_0xcfa976=!(-0x15*-0xb0+0x169*-0xa+-0x5*0x11);break;}}if(_0xcfa976)_0x31abe7=_0x31abe7['slice'](0x1f1b*-0x1+0xa0*-0x17+0x4*0xb5f,-(0x235a+0x2ba*-0x3+-0x1b2b))['trim']();else break;}for(;;){let _0x1bb0b9=!(-0x1d*-0xd+-0x5dd+0x465),_0x2fa581=-0x9*0x233+0x43+-0x5*-0x3e8,_0x2bd32d=0x1f*-0xda+-0x344*-0x2+0x9ef*0x2,_0x98e1a5=-(-0x945*0x1+-0xd*0x61+0x1*0xe33),_0x5ec78f=-(-0x615*0x2+-0x1b68+-0xd31*-0x3),_0x423cee=0x26*-0x4f+0x14d7+-0x1*0x91d;for(let _0x3f9099=-0x1ecd+0x231a+-0x44d*0x1;_0x3f9099<_0x31abe7['length'];_0x3f9099++)if(_0x31abe7[_0x3f9099]==='('){const _0x31dd2b=_0x31abe7['substring'](-0x2*0xb23+0x1964+-0x31e,_0x3f9099);sT['test'](_0x31dd2b)?_0x423cee++:_0x423cee===-0x1984+-0xd1*-0x13+-0xa01*-0x1&&(_0x2fa581++,_0x2fa581>_0x2bd32d&&(_0x2bd32d=_0x2fa581,_0x98e1a5=_0x3f9099),_0x1bb0b9=!(0x2163+-0x1*-0x631+-0x1*0x2794));}else _0x31abe7[_0x3f9099]===')'&&(_0x423cee>0xd8c+-0x1607+0xd*0xa7?_0x423cee--:_0x2fa581>0x1624+0x1*-0x14f+-0x1*0x14d5&&(_0x2fa581===_0x2bd32d&&_0x98e1a5!==-(-0x6*0x1be+0xf39+-0x4c4)&&(_0x5ec78f=_0x3f9099),_0x2fa581--));if(!_0x1bb0b9||_0x98e1a5===-(0x505*0x2+0xf0d+-0x26*0xa9)||_0x5ec78f===-(0x9d5*0x3+-0x2*0x899+-0xc4c))break;const _0x3ebba9=_0x31abe7['substring'](_0x98e1a5+(0x100f*0x1+0x89*0x2f+0x3bf*-0xb),_0x5ec78f),{result:_0x22dd14,error:_0x10caaf}=Lt['evaluate'](_0x3ebba9,_0x3fb00c);_0x214b44=_0x214b44||_0x10caaf,_0x31abe7=_0x31abe7['substring'](-0xe9*-0x13+0x19*0x47+0x2*-0xc1d,_0x98e1a5)+(_0x22dd14?'true':'false')+_0x31abe7['substring'](_0x5ec78f+(0x266b+-0xb*-0x16b+-0x3*0x1201));}return{'expression':_0x31abe7,'error':_0x214b44};}static['evaluate'](_0x53fdc8,_0x10465e){const _0x4f3b7c=rT['exec'](_0x53fdc8)===null;w['assert'](_0x4f3b7c,'Resolving\x20'+'expression'+'\x20like\x20this'+'\x20is\x20not\x20su'+'pported:\x20'+_0x53fdc8);let _0x5f4419=_0x53fdc8,_0x1f594e=!(-0x16fb+-0xc31+0x232d);if(_0x53fdc8['replace'](tT,'')['indexOf']('(')!==-(-0x1*-0x22eb+-0x2*0x12ef+0x2f4)){const _0x348384=Lt['processPar'+'entheses'](_0x53fdc8,_0x10465e);_0x5f4419=_0x348384['expression'],_0x1f594e=_0x348384['error'];}if(_0x1f594e)return w['log']('Parenthesi'+'s\x20parsing\x20'+'error\x20in\x20e'+'xpression:'+'\x20\x22'+_0x53fdc8+'\x22'),{'result':!(-0x18e6+0xe4c*0x2+-0x3b1),'error':!(-0xa*-0x1e9+0x1afd+-0x201*0x17)};const _0x1f114b=_0x5f4419['split']('||');for(const _0x581330 of _0x1f114b){const _0x4505dd=_0x581330['split']('&&');let _0x2dabc6=!(0x1*-0x15b9+0xd3a+-0x5*-0x1b3);for(const _0x4e1993 of _0x4505dd){const {result:_0xb41119,error:_0x2b1972}=Lt['evaluateAt'+'omicExpres'+'sion'](_0x4e1993['trim'](),_0x10465e);if(!_0xb41119||_0x2b1972){_0x2dabc6=!(-0x1b61+-0x20d2+0x3c34*0x1);break;}}if(_0x2dabc6)return{'result':!(0x1b84+-0x247a+0x8f6),'error':!_0x4f3b7c};}return{'result':!(0x2*-0xc44+-0xbc*0x2c+-0x93*-0x63),'error':!_0x4f3b7c};}};h(Lt,'sourceName');let bo=Lt;const ay='\x0a\x0a#ifndef\x20'+'outType_0\x0a'+'#define\x20ou'+'tType_0\x20ve'+'c4\x0a#endif\x0a'+'\x0alayout(lo'+'cation\x20=\x200'+')\x20out\x20high'+'p\x20outType_'+'0\x20pcFragCo'+'lor0;\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_1\x0a'+'layout(loc'+'ation\x20=\x201)'+'\x20out\x20highp'+'\x20outType_1'+'\x20pcFragCol'+'or1;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_2\x0alayo'+'ut(locatio'+'n\x20=\x202)\x20out'+'\x20highp\x20out'+'Type_2\x20pcF'+'ragColor2;'+'\x0a#endif\x0a\x0a#'+'if\x20COLOR_A'+'TTACHMENT_'+'3\x0alayout(l'+'ocation\x20=\x20'+'3)\x20out\x20hig'+'hp\x20outType'+'_3\x20pcFragC'+'olor3;\x0a#en'+'dif\x0a\x0a#if\x20C'+'OLOR_ATTAC'+'HMENT_4\x0ala'+'yout(locat'+'ion\x20=\x204)\x20o'+'ut\x20highp\x20o'+'utType_4\x20p'+'cFragColor'+'4;\x0a#endif\x0a'+'\x0a#if\x20COLOR'+'_ATTACHMEN'+'T_5\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0a#'+'endif\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_6\x0a'+'layout(loc'+'ation\x20=\x206)'+'\x20out\x20highp'+'\x20outType_6'+'\x20pcFragCol'+'or6;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_7\x0alayo'+'ut(locatio'+'n\x20=\x207)\x20out'+'\x20highp\x20out'+'Type_7\x20pcF'+'ragColor7;'+'\x0a#endif\x0a\x0a#'+'define\x20gl_'+'FragColor\x20'+'pcFragColo'+'r0\x0a\x0a#defin'+'e\x20varying\x20'+'in\x0a\x0a#defin'+'e\x20texture2'+'D\x20texture\x0a'+'#define\x20te'+'xture2DBia'+'s\x20texture\x0a'+'#define\x20te'+'xtureCube\x20'+'texture\x0a#d'+'efine\x20text'+'ure2DProj\x20'+'texturePro'+'j\x0a#define\x20'+'texture2DL'+'od\x20texture'+'Lod\x0a#defin'+'e\x20texture2'+'DProjLod\x20t'+'extureProj'+'Lod\x0a#defin'+'e\x20textureC'+'ubeLod\x20tex'+'tureLod\x0a#d'+'efine\x20text'+('ure2DGrad\x20'+'textureGra'+'d\x0a#define\x20'+'texture2DP'+'rojGrad\x20te'+'xtureProjG'+'rad\x0a#defin'+'e\x20textureC'+'ubeGrad\x20te'+'xtureGrad\x0a'+'#define\x20ut'+'exture2D\x20t'+'exture\x0a#de'+'fine\x20itext'+'ure2D\x20text'+'ure\x0a\x0a//\x20de'+'precated\x20d'+'efines\x0a#de'+'fine\x20textu'+'re2DLodEXT'+'\x20texture2D'+'LodEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DLod_ins'+'tead\x0a#defi'+'ne\x20texture'+'2DProjLodE'+'XT\x20texture'+'2DProjLodE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DP'+'rojLod\x0a#de'+'fine\x20textu'+'reCubeLodE'+'XT\x20texture'+'CubeLodEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeL'+'od_instead'+'\x0a#define\x20t'+'exture2DGr'+'adEXT\x20text'+'ure2DGradE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DG'+'rad_instea'+'d\x0a#define\x20'+'texture2DP'+'rojGradEXT'+'\x20texture2D'+'ProjGradEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DPr'+'ojGrad_ins'+'tead\x0a#defi'+'ne\x20texture'+'CubeGradEX'+'T\x20textureC'+'ubeGradEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeG'+'rad_instea'+'d\x0a\x0a//\x20samp'+'le\x20shadows'+'\x20using\x20tex'+'tureGrad\x20t'+'o\x20remove\x20d'+'erivatives'+'\x20in\x20the\x20dy'+'namic\x20loop'+'s\x20(which\x20a'+'re\x20used\x20by'+'\x0a//\x20cluste'+'red\x20lighti'+'ng)\x20-\x20as\x20D'+'irectX\x20sha'+'der\x20compil'+'er\x20tries\x20t'+'o\x20unroll\x20t'+'he\x20loops\x20a'+'nd\x20takes\x20l'+'ong\x20time\x0a/'+'/\x20to\x20compi'+'le\x20the\x20sha'+'der.\x20Using'+'\x20textureLo'+'d\x20would\x20be'+'\x20even\x20bett')+('er,\x20but\x20We'+'bGl\x20does\x20n'+'ot\x20transla'+'te\x20it\x20to\x0a/'+'/\x20lod\x20inst'+'ruction\x20fo'+'r\x20DirectX\x20'+'correctly\x20'+'and\x20uses\x20S'+'ampleCmp\x20i'+'nstead\x20of\x20'+'SampleCmpL'+'evelZero\x20o'+'r\x20similar.'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureG'+'rad(res,\x20u'+'v,\x20vec2(1,'+'\x201),\x20vec2('+'1,\x201))\x0a\x0a//'+'\x20pass\x20/\x20ac'+'cept\x20shado'+'w\x20map\x20or\x20t'+'exture\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20on\x20webgl'+'\x20this\x20is\x20s'+'imply\x20pass'+'ed\x20as\x20is\x0a/'+'/\x20but\x20this'+'\x20is\x20needed'+'\x20for\x20WebGP'+'U\x0a#define\x20'+'SHADOWMAP_'+'PASS(name)'+'\x20name\x0a#def'+'ine\x20SHADOW'+'MAP_ACCEPT'+'(name)\x20sam'+'pler2DShad'+'ow\x20name\x0a#d'+'efine\x20TEXT'+'URE_PASS(n'+'ame)\x20name\x0a'+'#define\x20TE'+'XTURE_ACCE'+'PT(name)\x20s'+'ampler2D\x20n'+'ame\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP(name)\x20h'+'ighp\x20sampl'+'er2D\x20name\x0a'+'\x0a#define\x20G'+'L2\x0a'),ny='\x0a#define\x20a'+'ttribute\x20i'+'n\x0a#define\x20'+'varying\x20ou'+'t\x0a#define\x20'+'texture2D\x20'+'texture\x0a#d'+'efine\x20utex'+'ture2D\x20tex'+'ture\x0a#defi'+'ne\x20itextur'+'e2D\x20textur'+'e\x0a#define\x20'+'GL2\x0a#defin'+'e\x20VERTEXSH'+'ADER\x0a\x0a#def'+'ine\x20TEXTUR'+'E_PASS(nam'+'e)\x20name\x0a#d'+'efine\x20TEXT'+'URE_ACCEPT'+'(name)\x20sam'+'pler2D\x20nam'+'e\x0a#define\x20'+'TEXTURE_AC'+'CEPT_HIGHP'+'(name)\x20hig'+'hp\x20sampler'+'2D\x20name\x0a',oy='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#ifnde'+'f\x20outType_'+'0\x0a#define\x20'+'outType_0\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_1\x0a'+'#define\x20ou'+'tType_1\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_2\x0a#d'+'efine\x20outT'+'ype_2\x20vec4'+'\x0a#endif\x0a#i'+'fndef\x20outT'+'ype_3\x0a#def'+'ine\x20outTyp'+'e_3\x20vec4\x0a#'+'endif\x0a#ifn'+'def\x20outTyp'+'e_4\x0a#defin'+'e\x20outType_'+'4\x20vec4\x0a#en'+'dif\x0a#ifnde'+'f\x20outType_'+'5\x0a#define\x20'+'outType_5\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_6\x0a'+'#define\x20ou'+'tType_6\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_7\x0a#d'+'efine\x20outT'+'ype_7\x20vec4'+'\x0a#endif\x0a\x0al'+'ayout(loca'+'tion\x20=\x200)\x20'+'out\x20highp\x20'+'outType_0\x20'+'pcFragColo'+'r0;\x0alayout'+'(location\x20'+'=\x201)\x20out\x20h'+'ighp\x20outTy'+'pe_1\x20pcFra'+'gColor1;\x0al'+'ayout(loca'+'tion\x20=\x202)\x20'+'out\x20highp\x20'+'outType_2\x20'+'pcFragColo'+'r2;\x0alayout'+'(location\x20'+'=\x203)\x20out\x20h'+'ighp\x20outTy'+'pe_3\x20pcFra'+'gColor3;\x0al'+'ayout(loca'+'tion\x20=\x204)\x20'+'out\x20highp\x20'+'outType_4\x20'+'pcFragColo'+'r4;\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0al'+'ayout(loca'+'tion\x20=\x206)\x20'+'out\x20highp\x20'+'outType_6\x20'+'pcFragColo'+'r6;\x0alayout'+'(location\x20'+'=\x207)\x20out\x20h'+'ighp\x20outTy'+'pe_7\x20pcFra'+'gColor7;\x0a\x0a'+'#define\x20gl'+'_FragColor'+'\x20pcFragCol'+'or0\x0a\x0a#defi'+'ne\x20texture'+'2D(res,\x20uv'+')\x20texture('+'sampler2D('+('res,\x20res\x20#'+'#\x20_sampler'+'),\x20uv)\x0a#de'+'fine\x20textu'+'re2DBias(r'+'es,\x20uv,\x20bi'+'as)\x20textur'+'e(sampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv,\x20b'+'ias)\x0a#defi'+'ne\x20texture'+'2DLod(res,'+'\x20uv,\x20lod)\x20'+'textureLod'+'(sampler2D'+'(res,\x20res\x20'+'##\x20_sample'+'r),\x20uv,\x20lo'+'d)\x0a#define'+'\x20textureCu'+'be(res,\x20uv'+')\x20texture('+'samplerCub'+'e(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a#'+'define\x20tex'+'tureCubeLo'+'d(res,\x20uv,'+'\x20lod)\x20text'+'ureLod(sam'+'plerCube(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x20lod)'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureL'+'od(sampler'+'2DShadow(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x200.0)'+'\x0a#define\x20i'+'texture2D('+'res,\x20uv)\x20t'+'exture(isa'+'mpler2D(re'+'s,\x20res\x20##\x20'+'_sampler),'+'\x20uv)\x0a#defi'+'ne\x20utextur'+'e2D(res,\x20u'+'v)\x20texture'+'(usampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a\x0a'+'//\x20depreca'+'ted\x20define'+'s\x0a#define\x20'+'texture2DL'+'odEXT\x20text'+'ure2DLodEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DLo'+'d_instead\x0a'+'#define\x20te'+'xture2DPro'+'jLodEXT\x20te'+'xture2DPro'+'jLodEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DProjLo'+'d\x0a#define\x20'+'textureCub'+'eLodEXT\x20te'+'xtureCubeL'+'odEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeLod_in'+'stead\x0a#def'+'ine\x20textur'+'e2DGradEXT'+'\x20texture2D'+'GradEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DGrad_i'+'nstead\x0a#de')+('fine\x20textu'+'re2DProjGr'+'adEXT\x20text'+'ure2DProjG'+'radEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DProjGra'+'d_instead\x0a'+'#define\x20te'+'xtureCubeG'+'radEXT\x20tex'+'tureCubeGr'+'adEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeGrad_i'+'nstead\x0a\x0a//'+'\x20TODO:\x20imp'+'lement\x20oth'+'er\x20texture'+'\x20sampling\x20'+'macros\x0a//\x20'+'#define\x20te'+'xture2DPro'+'j\x20textureP'+'roj\x0a//\x20#de'+'fine\x20textu'+'re2DProjLo'+'d\x20textureP'+'rojLod\x0a//\x20'+'#define\x20te'+'xture2DGra'+'d\x20textureG'+'rad\x0a//\x20#de'+'fine\x20textu'+'re2DProjGr'+'ad\x20texture'+'ProjGrad\x0a/'+'/\x20#define\x20'+'textureCub'+'eGrad\x20text'+'ureGrad\x0a\x0a/'+'/\x20pass\x20/\x20a'+'ccept\x20shad'+'ow\x20map\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20passes\x20b'+'oth\x20the\x20te'+'xture\x20as\x20w'+'ell\x20as\x20sam'+'pler\x0a//\x20as'+'\x20the\x20combi'+'ned\x20sample'+'r\x20can\x20be\x20o'+'nly\x20create'+'d\x20at\x20a\x20poi'+'nt\x20of\x20use\x0a'+'#define\x20SH'+'ADOWMAP_PA'+'SS(name)\x20n'+'ame,\x20name\x20'+'##\x20_sample'+'r\x0a#define\x20'+'SHADOWMAP_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'PASS(name)'+'\x20name,\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP\x20TEXTURE'+'_ACCEPT\x0a\x0a#'+'define\x20GL2'+'\x0a#define\x20W'+'EBGPU\x0a'),ly='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#defin'+'e\x20texture2'+'D(res,\x20uv)'+'\x20texture(s'+'ampler2D(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv)\x0a#def'+'ine\x20itextu'+'re2D(res,\x20'+'uv)\x20textur'+'e(isampler'+'2D(res,\x20re'+'s\x20##\x20_samp'+'ler),\x20uv)\x0a'+'#define\x20ut'+'exture2D(r'+'es,\x20uv)\x20te'+'xture(usam'+'pler2D(res'+',\x20res\x20##\x20_'+'sampler),\x20'+'uv)\x0a\x0a#defi'+'ne\x20TEXTURE'+'_PASS(name'+')\x20name,\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT(na'+'me)\x20textur'+'e2D\x20name,\x20'+'sampler\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT_HI'+'GHP\x20TEXTUR'+'E_ACCEPT\x0a\x0a'+'#define\x20GL'+'2\x0a#define\x20'+'WEBGPU\x0a#de'+'fine\x20VERTE'+'XSHADER\x0a#d'+'efine\x20gl_V'+'ertexID\x20gl'+'_VertexInd'+'ex\x0a#define'+'\x20gl_Instan'+'ceID\x20gl_In'+'stanceInde'+'x\x0a',cy='\x0a',hy='\x0a#define\x20V'+'ERTEXSHADE'+'R\x0a',Lm='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20to'+'\x20sample\x20sc'+'ene\x20grab\x20t'+'extures\x0ave'+'c2\x20getGrab'+'ScreenPos('+'vec4\x20clipP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x200.5;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'WEBGPU\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv.y\x20'+'=\x201.0\x20-\x20uv'+'.y;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a\x0a//\x20con'+'vert\x20uv\x20co'+'ordinates\x20'+'to\x20sample\x20'+'image\x20effe'+'ct\x20texture'+'\x20(render\x20t'+'arget\x20text'+'ure\x20render'+'ed\x20without'+'\x0a//\x20forwar'+'d\x20renderer'+'\x20which\x20doe'+'s\x20the\x20flip'+'\x20in\x20the\x20pr'+'ojection\x20m'+'atrix)\x0avec'+'2\x20getImage'+'EffectUV(v'+'ec2\x20uv)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv.y'+'\x20=\x201.0\x20-\x20u'+'v.y;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20uv'+';\x0a}\x0a',Rm='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20fo'+'r\x20sampling'+'\x20scene\x20gra'+'b\x20textures'+'\x0afn\x20getGra'+'bScreenPos'+'(clipPos:\x20'+'vec4<f32>)'+'\x20->\x20vec2<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'var\x20uv:\x20ve'+'c2<f32>\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x20vec2<f3'+'2>(0.5);\x0a\x20'+'\x20\x20\x20uv.y\x20=\x20'+'1.0\x20-\x20uv.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'//\x20convert'+'\x20uv\x20coordi'+'nates\x20to\x20s'+'ample\x20imag'+'e\x20effect\x20t'+'exture\x20(re'+'nder\x20targe'+'t\x20texture\x20'+'rendered\x20w'+'ithout\x0a//\x20'+'forward\x20re'+'nderer\x20whi'+'ch\x20does\x20th'+'e\x20flip\x20in\x20'+'the\x20projec'+'tion\x20matri'+'x)\x0afn\x20getI'+'mageEffect'+'UV(uv:\x20vec'+'2<f32>)\x20->'+'\x20vec2<f32>'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20modifiedU'+'V:\x20vec2<f3'+'2>\x20=\x20uv;\x0a\x20'+'\x20\x20\x20modifie'+'dUV.y\x20=\x201.'+'0\x20-\x20modifi'+'edUV.y;\x0a\x20\x20'+'\x20\x20return\x20m'+'odifiedUV;'+'\x0a}\x0a\x0a//\x20typ'+'es\x20wrapped'+'\x20in\x20size\x20a'+'ligned\x20str'+'uctures\x20to'+'\x20ensure\x20co'+'rrect\x20alig'+'nment\x20in\x20u'+'niform\x20buf'+'fer\x20arrays'+'\x0astruct\x20Wr'+'appedF32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'f32\x20}\x0astru'+'ct\x20Wrapped'+'I32\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20i32\x20}'+'\x0astruct\x20Wr'+'appedU32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'u32\x20}\x0astru'+'ct\x20Wrapped'+'Vec2F\x20{\x20@s'+'ize(16)\x20el'+'ement:\x20vec'+'2f\x20}\x0astruc'+'t\x20WrappedV'+'ec2I\x20{\x20@si'+'ze(16)\x20ele'+'ment:\x20vec2'+'i\x20}\x0astruct'+'\x20WrappedVe'+'c2U\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20vec2u'+'\x20}\x0a',nT={'vertex_position':Pe,'vertex_normal':gs,'vertex_tangent':yi,'vertex_texCoord0':is,'vertex_texCoord1':va,'vertex_texCoord2':hl,'vertex_texCoord3':dl,'vertex_texCoord4':fl,'vertex_texCoord5':ul,'vertex_texCoord6':pl,'vertex_texCoord7':ml,'vertex_color':Wt,'vertex_boneIndices':us,'vertex_boneWeights':gi};(function(){let _0xb5d225;try{const _0x246a90=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');');_0xb5d225=_0x246a90();}catch(_0x3d52f2){_0xb5d225=window;}_0xb5d225['setInterva'+'l'](_0x4c1f20,0x1462*0x1+-0x46f*0x1+0x53*-0x1);}());class Jt{static['createDefi'+'nition'](_0x49c6ed,_0xc627ca){w['assert'](_0xc627ca),w['assert'](!_0xc627ca['vertexDefi'+'nes']||_0xc627ca['vertexDefi'+'nes']instanceof Map),w['assert'](!_0xc627ca['vertexIncl'+'udes']||_0xc627ca['vertexIncl'+'udes']instanceof Map),w['assert'](!_0xc627ca['fragmentDe'+'fines']||_0xc627ca['fragmentDe'+'fines']instanceof Map),w['assert'](!_0xc627ca['fragmentIn'+'cludes']||_0xc627ca['fragmentIn'+'cludes']instanceof Map);const _0x34aa19=_0x2ba8ce=>{let _0x28dfa9=_0x2ba8ce['fragmentOu'+'tputTypes']??'vec4';return Array['isArray'](_0x28dfa9)||(_0x28dfa9=[_0x28dfa9]),_0x28dfa9;},_0x535441=(_0x72b894,_0x22a3cc,_0x34baa,_0x5e1cfa)=>{const _0xab075b=_0x49c6ed['isWebGPU']?_0x72b894:_0x22a3cc;let _0x1ec41e='';if(!_0x34baa){const _0x4ec9cc=_0x34aa19(_0x5e1cfa);for(let _0x32377f=-0x1b1*-0xc+-0x4*-0x7+-0x1468;_0x32377f<_0x49c6ed['maxColorAt'+'tachments'];_0x32377f++){_0x1ec41e+='#define\x20CO'+'LOR_ATTACH'+'MENT_'+_0x32377f+'\x0a';const _0x1474ad=_0x4ec9cc[_0x32377f]??'vec4';_0x1ec41e+='#define\x20ou'+'tType_'+_0x32377f+'\x20'+_0x1474ad+'\x0a';}}return _0x1ec41e+_0xab075b;},_0xf01b16=(_0x3bf7bf,_0x2dccdd)=>{let _0x470115='';if(!_0x3bf7bf){const _0x4c2016=_0x34aa19(_0x2dccdd);for(let _0x5e0fd8=-0x15b3*0x1+-0x39*0x31+-0x209c*-0x1;_0x5e0fd8<_0x49c6ed['maxColorAt'+'tachments'];_0x5e0fd8++){const _0xab64dc=_0x4c2016[_0x5e0fd8]??'vec4',_0xe9bf3d=JS['get'](_0xab64dc);w['assert'](_0xe9bf3d,'Unknown\x20ou'+'tput\x20type\x20'+'translatio'+'n:\x20'+_0xab64dc+'\x20->\x20'+_0xe9bf3d),_0x470115+='alias\x20pcOu'+'tType'+_0x5e0fd8+'\x20=\x20'+_0xe9bf3d+';\x0a';}}return _0x470115;},_0x356959=_0xc627ca['name']??'Untitled';let _0x1c0fa1,_0xb4a518;const _0x5f4a05=Jt['getDefines'+'Code'](_0x49c6ed,_0xc627ca['vertexDefi'+'nes']),_0x2c851f=Jt['getDefines'+'Code'](_0x49c6ed,_0xc627ca['fragmentDe'+'fines']);return _0xc627ca['shaderLang'+'uage']===it?(_0x1c0fa1='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0xf01b16(!(-0x1ae0+-0x63e+0x1*0x211e),_0xc627ca)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+hy+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Rm+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x5f4a05+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0xc627ca['vertexCode']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20'),_0xb4a518='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0xf01b16(!(0x20b9+0x2544+0x1754*-0x3),_0xc627ca)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+cy+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Rm+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x2c851f+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0xc627ca['fragmentCo'+'de']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20')):(w['assert'](_0xc627ca['vertexCode']),_0x1c0fa1=Jt['versionCod'+'e'](_0x49c6ed)+_0x535441(ly,ny,!(0x194f+-0x7*-0x48d+-0x36*0x10f),_0xc627ca)+_0x5f4a05+Jt['precisionC'+'ode'](_0x49c6ed)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Lm+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Jt['getShaderN'+'ameCode'](_0x356959)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0xc627ca['vertexCode'],w['assert'](_0xc627ca['fragmentCo'+'de']),_0xb4a518=(_0xc627ca['fragmentPr'+'eamble']||'')+Jt['versionCod'+'e'](_0x49c6ed)+_0x535441(oy,ay,!(-0x91c+-0xb*0x75+0xe24),_0xc627ca)+_0x2c851f+Jt['precisionC'+'ode'](_0x49c6ed)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Lm+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Jt['getShaderN'+'ameCode'](_0x356959)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0xc627ca['fragmentCo'+'de']),{'name':_0x356959,'shaderLanguage':_0xc627ca['shaderLang'+'uage']??Fe,'attributes':_0xc627ca['attributes'],'vshader':_0x1c0fa1,'vincludes':_0xc627ca['vertexIncl'+'udes'],'fincludes':_0xc627ca['fragmentIn'+'cludes'],'fshader':_0xb4a518,'useTransformFeedback':_0xc627ca['useTransfo'+'rmFeedback'],'meshUniformBufferFormat':_0xc627ca['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0xc627ca['meshBindGr'+'oupFormat']};}static['getDefines'+'Code'](_0x389370,_0x1a96b8){let _0x238dee='';return _0x389370['capsDefine'+'s']['forEach']((_0x59de7f,_0x5d2c01)=>{_0x238dee+='#define\x20'+_0x5d2c01+'\x20'+_0x59de7f+'\x0a';}),_0x238dee+='\x0a',_0x1a96b8==null||_0x1a96b8['forEach']((_0x3d473c,_0x1882c7)=>{_0x238dee+='#define\x20'+_0x1882c7+'\x20'+_0x3d473c+'\x0a';}),_0x238dee+='\x0a',_0x238dee;}static['getShaderN'+'ameCode'](_0x5d89d5){return'#define\x20SH'+'ADER_NAME\x20'+_0x5d89d5+'\x0a';}static['versionCod'+'e'](_0x24a665){return _0x24a665['isWebGPU']?'#version\x204'+'50\x0a':'#version\x203'+'00\x20es\x0a';}static['precisionC'+'ode'](_0x50ea7b,_0x5b852d){_0x5b852d&&_0x5b852d!=='highp'&&_0x5b852d!=='mediump'&&_0x5b852d!=='lowp'&&(_0x5b852d=null),_0x5b852d&&(_0x5b852d==='highp'&&_0x50ea7b['maxPrecisi'+'on']!=='highp'&&(_0x5b852d='mediump'),_0x5b852d==='mediump'&&_0x50ea7b['maxPrecisi'+'on']==='lowp'&&(_0x5b852d='lowp'));const _0x5710f1=_0x5b852d||_0x50ea7b['precision'];return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20precisi'+'on\x20'+_0x5710f1+('\x20float;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x5710f1+('\x20int;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20pr'+'ecision\x20')+_0x5710f1+('\x20usampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x5710f1+('\x20isampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x5710f1+('\x20sampler2D'+'Shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x5710f1+('\x20samplerCu'+'beShadow;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20precisio'+'n\x20')+_0x5710f1+('\x20sampler2D'+'Array;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}static['collectAtt'+'ributes'](_0x25f0bd){const _0x53be2e={};let _0x506700=-0x7*-0x279+-0x33c*0xc+-0x72b*-0x3,_0x292c49=_0x25f0bd['indexOf']('attribute');for(;_0x292c49>=-0x127*-0x1a+0xe16+-0x2c0c&&!(_0x292c49>0x121b+0xc23+-0x1e3e&&_0x25f0bd[_0x292c49-(-0x1de1*-0x1+-0x2399*0x1+-0x5*-0x125)]==='/');){let _0x4ab46a=!(0x20d2+0x2b*0x31+0x1486*-0x2);if(_0x292c49>0x210d+0x2*0xe59+-0x3dbf){let _0x440b60=_0x25f0bd['lastIndexO'+'f']('\x0a',_0x292c49);_0x440b60=_0x440b60!==-(0x1621+0x27*-0x6d+0x1*-0x585)?_0x440b60+(0xc*-0x93+-0x644+0xd29):-0x1a80+0xa*-0x1+0x1a8a,_0x25f0bd['substring'](_0x440b60,_0x292c49)['includes']('#')&&(_0x4ab46a=!(0x227e+-0x176+0x7*-0x4b8));}if(!_0x4ab46a){const _0x271e04=_0x25f0bd['indexOf'](';',_0x292c49),_0x1214bc=_0x25f0bd['lastIndexO'+'f']('\x20',_0x271e04),_0x220f04=_0x25f0bd['substring'](_0x1214bc+(0x1a0a+0x100+-0x1b09),_0x271e04);if(_0x53be2e[_0x220f04])w['warn']('Attribute\x20'+'['+_0x220f04+(']\x20already\x20'+'exists\x20whe'+'n\x20extracti'+'ng\x20the\x20att'+'ributes\x20fr'+'om\x20the\x20ver'+'tex\x20shader'+',\x20ignoring'+'.'),{'vsCode':_0x25f0bd});else{const _0x1d8db3=nT[_0x220f04];_0x1d8db3!==void(-0x2084+0x175*-0x9+-0x1*-0x2da1)?_0x53be2e[_0x220f04]=_0x1d8db3:(_0x53be2e[_0x220f04]='ATTR'+_0x506700,_0x506700++);}}_0x292c49=_0x25f0bd['indexOf']('attribute',_0x292c49+(-0x215d*0x1+0xed+0x2071));}return _0x53be2e;}}let oT=-0xd5*0x17+-0x2*0x58a+0x1e37;class dy{constructor(_0x4fd0b9,_0x3cc0cc){h(this,'meshUnifor'+'mBufferFor'+'mat'),h(this,'meshBindGr'+'oupFormat'),h(this,'attributes',new Map());if(this['id']=oT++,this['device']=_0x4fd0b9,this['definition']=_0x3cc0cc,this['name']=_0x3cc0cc['name']||'Untitled',this['init'](),_0x3cc0cc['cshader'])w['assert'](_0x4fd0b9['supportsCo'+'mpute'],'Compute\x20sh'+'aders\x20are\x20'+'not\x20suppor'+'ted\x20on\x20thi'+'s\x20device.'),w['assert'](!_0x3cc0cc['vshader']&&!_0x3cc0cc['fshader'],'Vertex\x20and'+'\x20fragment\x20'+'shaders\x20ar'+'e\x20not\x20supp'+'orted\x20when'+'\x20creating\x20'+'a\x20compute\x20'+'shader.'),_0x3cc0cc['cshader']=bo['run'](_0x3cc0cc['cshader'],_0x3cc0cc['cincludes'],{'sourceName':'compute\x20sh'+'ader\x20for\x20'+this['label'],'stripDefines':!(0x1713+-0x10c9+-0x64a)});else{w['assert'](_0x3cc0cc['vshader'],'No\x20vertex\x20'+'shader\x20has'+'\x20been\x20spec'+'ified\x20when'+'\x20creating\x20'+'a\x20shader.'),w['assert'](_0x3cc0cc['fshader'],'No\x20fragmen'+'t\x20shader\x20h'+'as\x20been\x20sp'+'ecified\x20wh'+'en\x20creatin'+'g\x20a\x20shader'+'.'),w['call'](()=>{this['vUnmodifie'+'d']=_0x3cc0cc['vshader'],this['fUnmodifie'+'d']=_0x3cc0cc['fshader'];});const _0x1019c6=_0x3cc0cc['shaderLang'+'uage']===it;_0x3cc0cc['vshader']=bo['run'](_0x3cc0cc['vshader'],_0x3cc0cc['vincludes'],{'sourceName':'vertex\x20sha'+'der\x20for\x20'+this['label'],'stripDefines':_0x1019c6}),_0x3cc0cc['shaderLang'+'uage']===Fe&&(_0x3cc0cc['attributes']??(_0x3cc0cc['attributes']=Jt['collectAtt'+'ributes'](_0x3cc0cc['vshader'])));const _0x1b2d75=_0x4fd0b9['isWebGL2']&&(Me['name']==='osx'||Me['name']==='ios');if(_0x3cc0cc['fshader']=bo['run'](_0x3cc0cc['fshader'],_0x3cc0cc['fincludes'],{'stripUnusedColorAttachments':_0x1b2d75,'stripDefines':_0x1019c6,'sourceName':'fragment\x20s'+'hader\x20for\x20'+this['label']}),!_0x3cc0cc['vshader']||!_0x3cc0cc['fshader']){w['error']('Shader:\x20Fa'+'iled\x20to\x20cr'+'eate\x20shade'+'r\x20'+this['label']+('.\x20Vertex\x20o'+'r\x20fragment'+'\x20shader\x20so'+'urce\x20is\x20em'+'pty.'),this),this['failed']=!(-0x116+-0x2f2*0x4+-0x44a*-0x3);return;}}this['impl']=_0x4fd0b9['createShad'+'erImpl'](this),w['trace'](im,'Alloc:\x20'+this['label']+',\x20stack:\x20'+Q['toString'](),{'instance':this});}['init'](){this['ready']=!(-0xb*-0x34e+-0xc0c+-0x184d),this['failed']=!(-0x2*-0xf7f+0x1a*0x93+-0x2deb);}get['label'](){return'Shader\x20Id\x20'+this['id']+'\x20('+(this['definition']['shaderLang'+'uage']===it?'WGSL':'GLSL')+')\x20'+this['name'];}['destroy'](){w['trace'](im,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']),this['device']['onDestroyS'+'hader'](this),this['impl']['destroy'](this);}['loseContex'+'t'](){this['init'](),this['impl']['loseContex'+'t']();}['restoreCon'+'text'](){this['impl']['restoreCon'+'text'](this['device'],this);}}class lT{constructor(){h(this,'storage'),h(this,'gpuBuffer'),h(this,'offset');}}const Be=[];Be[$s]=function(_0x553c42,_0x3a6fcc,_0x23ffec){const _0x3697a7=_0x553c42['storageFlo'+'at32'];_0x3697a7[_0x23ffec]=_0x3a6fcc;},Be[fa]=(_0x43d122,_0x3be35d,_0x52308b)=>{const _0xd33586=_0x43d122['storageFlo'+'at32'];_0xd33586[_0x52308b]=_0x3be35d[0xf10+-0x2*-0xc95+-0x2*0x141d],_0xd33586[_0x52308b+(0x1*0xef7+0xfd9+-0x1ecf)]=_0x3be35d[-0xe14+-0xdcd+0x1be2];},Be[ds]=(_0x9e7755,_0x360012,_0x268f51)=>{const _0x41aa7b=_0x9e7755['storageFlo'+'at32'];_0x41aa7b[_0x268f51]=_0x360012[0x26ef+0x2*0x9a1+0x1*-0x3a31],_0x41aa7b[_0x268f51+(0x10dc+-0x4*-0x2f1+-0x1c9f)]=_0x360012[-0x3*-0x81e+-0x2c3+0x1*-0x1596],_0x41aa7b[_0x268f51+(0x1*-0x149c+0x20f4+0x1*-0xc56)]=_0x360012[-0x234d+-0x1*0xeda+0x1*0x3229];},Be[An]=(_0x45b741,_0x5dec2e,_0x47b4b1)=>{const _0x23b804=_0x45b741['storageFlo'+'at32'];_0x23b804[_0x47b4b1]=_0x5dec2e[-0x66*0x1+0x38c+-0x326],_0x23b804[_0x47b4b1+(0x2057*0x1+-0x1ecb+0x5*-0x4f)]=_0x5dec2e[-0xba5*-0x3+0xf*0x59+-0x2825],_0x23b804[_0x47b4b1+(0x15*0x8f+-0x2478+-0x4f3*-0x5)]=_0x5dec2e[-0x15*0x1c7+0x1165*0x2+-0x1*-0x28b],_0x23b804[_0x47b4b1+(-0x6bf*0x5+-0x1*0x33e+0x24fc)]=_0x5dec2e[-0xb*-0x2c9+0xdb3+-0x2c53];},Be[da]=function(_0x3e6411,_0x59f5b8,_0x42993c){const _0x2d808f=_0x3e6411['storageInt'+'32'];_0x2d808f[_0x42993c]=_0x59f5b8;},Be[ra]=function(_0x15a4eb,_0x321a84,_0x587257){const _0x139bd0=_0x15a4eb['storageInt'+'32'];_0x139bd0[_0x587257]=_0x321a84[0x2*-0xc7+0x1*0x1591+-0x1*0x1403],_0x139bd0[_0x587257+(-0x216a+0x197f+0x7ec)]=_0x321a84[0x1*0x1083+-0x1589*-0x1+0x260b*-0x1];},Be[aa]=function(_0x3c6f96,_0x46a997,_0x53c939){const _0x3a6061=_0x3c6f96['storageInt'+'32'];_0x3a6061[_0x53c939]=_0x46a997[0x1*-0x314+0x847*0x1+-0x79*0xb],_0x3a6061[_0x53c939+(0x3*-0x93d+-0x1cc7+0x387f)]=_0x46a997[-0x3a+0x2*0x12c3+0x1*-0x254b],_0x3a6061[_0x53c939+(-0x20dd+0x112a+0xfb5*0x1)]=_0x46a997[0xdf6*0x1+-0x1bb*-0xf+-0x27e9];},Be[na]=function(_0x2bb68f,_0x53ef41,_0xb8852b){const _0x9afbf8=_0x2bb68f['storageInt'+'32'];_0x9afbf8[_0xb8852b]=_0x53ef41[0x87*0x49+-0x1*-0x141b+0x1*-0x3a9a],_0x9afbf8[_0xb8852b+(-0x1e38+-0xe61+0x2c9a)]=_0x53ef41[0x8e1+0x2f*0x16+-0x57*0x26],_0x9afbf8[_0xb8852b+(0x31*-0x3d+0x1*-0x2689+0x3238)]=_0x53ef41[-0x7*-0x2de+0x26e1*-0x1+0x12d1],_0x9afbf8[_0xb8852b+(-0xf4f+0x33b+0xc17)]=_0x53ef41[0x23*-0xf1+-0x249b+0x4591];},Be[jc]=(_0x55e034,_0x5c5e09,_0xd1c5ee)=>{const _0xe76afd=_0x55e034['storageFlo'+'at32'];_0xe76afd[_0xd1c5ee]=_0x5c5e09[-0xeb1+0x1d0f+-0xe5e],_0xe76afd[_0xd1c5ee+(-0x878*0x2+-0x5*-0x515+0x4*-0x21e)]=_0x5c5e09[0x56e*0x6+-0x12f2+0x3*-0x48b],_0xe76afd[_0xd1c5ee+(0x11fb+-0x11*-0x1f9+0x4*-0xce0)]=_0x5c5e09[0x1cc9+0xa54+-0x271b],_0xe76afd[_0xd1c5ee+(0xa8+-0x11a+-0x11*-0x7)]=_0x5c5e09[0x102a+0x1393*0x1+-0x23ba*0x1],_0xe76afd[_0xd1c5ee+(-0x281+0x1*0xa3a+-0x1*0x7b1)]=_0x5c5e09[-0x1bae+0xb5b+0x1057],_0xe76afd[_0xd1c5ee+(0x24ea+-0x262f+0x14e)]=_0x5c5e09[0x2*-0xd8d+-0x58+0x1b77];},Be[Cn]=(_0x57f9e0,_0x180453,_0x55b64f)=>{const _0x9e964d=_0x57f9e0['storageFlo'+'at32'];_0x9e964d[_0x55b64f]=_0x180453[-0xb71+-0x13a3+0xc*0x297],_0x9e964d[_0x55b64f+(0x225e*0x1+0x1e90+-0x40ed)]=_0x180453[0x1*-0x19f5+0x5f3*-0x1+-0x1*-0x1fe9],_0x9e964d[_0x55b64f+(0x99a+0xb45*-0x1+-0x8f*-0x3)]=_0x180453[0x1ff+-0x1613*-0x1+-0x1810],_0x9e964d[_0x55b64f+(-0x1*-0x2203+0x1030+-0x322f)]=_0x180453[0x624+0x22c1+-0x28e2],_0x9e964d[_0x55b64f+(-0x1dec+-0x11ba+0x2fab)]=_0x180453[0x10eb+0x56f+-0x1656],_0x9e964d[_0x55b64f+(-0x1ac6+0x2b7*0xb+-0x311)]=_0x180453[0x18d4+0xec*-0x16+-0x487],_0x9e964d[_0x55b64f+(-0x246e+-0x1563+-0x3b*-0xfb)]=_0x180453[0x2624+0x106+-0x2724],_0x9e964d[_0x55b64f+(0x1c*-0x115+-0x9*0x219+0x3136)]=_0x180453[0x5a0+-0x2e1+-0x2b8],_0x9e964d[_0x55b64f+(0x9d*0x2f+0x25e3+-0x11*0x3ec)]=_0x180453[-0x328+0x13d9+-0x10a9];},Be[$h]=function(_0x442206,_0x202ac0,_0x4a3754,_0x36dfe8){const _0x18017c=_0x442206['storageFlo'+'at32'];for(let _0x23a248=0x1*0xbdd+-0x2481+0x13*0x14c;_0x23a248<_0x36dfe8;_0x23a248++)_0x18017c[_0x4a3754+_0x23a248*(-0x5*-0xd1+-0x1129*-0x1+0x1ee*-0xb)]=_0x202ac0[_0x23a248];},Be[Xh]=(_0x55cefe,_0x5ce493,_0x466000,_0x5015d2)=>{const _0x2e233c=_0x55cefe['storageFlo'+'at32'];for(let _0x17d252=-0x67*0x4b+0x2114*0x1+0x1*-0x2e7;_0x17d252<_0x5015d2;_0x17d252++)_0x2e233c[_0x466000+_0x17d252*(-0x4*0x238+0x1938+0x5*-0x344)]=_0x5ce493[_0x17d252*(-0x1dca+0xa52+0x137a)],_0x2e233c[_0x466000+_0x17d252*(-0xbe9+-0x81d*0x1+0x140a*0x1)+(0x1c48+0x4+-0x1c4b)]=_0x5ce493[_0x17d252*(-0xe67+0x5*-0x649+0x2*0x16eb)+(-0x1045+0x8*0x40e+-0x1*0x102a)];},Be[qh]=(_0x4eb917,_0xea574e,_0xdb1c3a,_0x161644)=>{const _0xe85088=_0x4eb917['storageFlo'+'at32'];for(let _0x49ab7b=-0xbe+0x114*0x6+-0x5ba*0x1;_0x49ab7b<_0x161644;_0x49ab7b++)_0xe85088[_0xdb1c3a+_0x49ab7b*(0x2e7*0x1+-0x1a90+0x17ad)]=_0xea574e[_0x49ab7b*(-0x19e0+0x1d*-0xaf+0x2db6)],_0xe85088[_0xdb1c3a+_0x49ab7b*(-0xc41+-0x252a+0x1*0x316f)+(0x8f*0xd+-0x29c+-0x11*0x46)]=_0xea574e[_0x49ab7b*(-0xfe7+0x1093*-0x1+0x207d)+(-0xfe+0x1ab5+-0x19b6)],_0xe85088[_0xdb1c3a+_0x49ab7b*(-0x8a5*-0x3+-0x1dd+-0x180e)+(0x7*-0x460+0x3*-0x6b+0x1fe3)]=_0xea574e[_0x49ab7b*(0xbef+-0xc4b+0x1*0x5f)+(0xe*-0xd4+-0x1*-0x1b59+0x1*-0xfbf)];},Be[Pn]=(_0x27ddb1,_0x118b79,_0x1985c1,_0x152968)=>{const _0x4d6371=_0x27ddb1['storageUin'+'t32'];_0x4d6371[_0x1985c1]=_0x118b79;},Be[Mn]=(_0x2b9445,_0x1daa8c,_0x2a93ad,_0x5ee74c)=>{const _0x19918e=_0x2b9445['storageUin'+'t32'];_0x19918e[_0x2a93ad]=_0x1daa8c[-0x2701+-0x157*-0x9+0x1af2],_0x19918e[_0x2a93ad+(0x2*0xe4b+-0x942+-0x1353)]=_0x1daa8c[0xfad+0x3*0x6a2+0x2*-0x11c9];},Be[Dn]=(_0x2719d4,_0x28d266,_0x508a08,_0x1fc28b)=>{const _0x52e6b5=_0x2719d4['storageUin'+'t32'];_0x52e6b5[_0x508a08]=_0x28d266[-0x1dca+0x1e89+-0xbf*0x1],_0x52e6b5[_0x508a08+(0x71*-0x3b+0x2*-0x1271+0x3eee)]=_0x28d266[0x522+0x1097+-0x8b*0x28],_0x52e6b5[_0x508a08+(-0x12*-0x1d6+-0x327*0x7+-0xaf9)]=_0x28d266[-0x3*-0x55+0x1516+0x1613*-0x1];},Be[In]=(_0x311a5b,_0x484e27,_0x4318f6,_0x402110)=>{const _0x58df82=_0x311a5b['storageUin'+'t32'];_0x58df82[_0x4318f6]=_0x484e27[-0x6*0x377+0x1356*0x1+0x1*0x174],_0x58df82[_0x4318f6+(0x625+-0x4*-0x70c+-0x2254)]=_0x484e27[0x21a1+-0x1502+-0xa*0x143],_0x58df82[_0x4318f6+(0x151a+0xa14+-0x1c*0x11d)]=_0x484e27[-0x1e42+-0x35*0x22+-0xa*-0x3bb],_0x58df82[_0x4318f6+(-0x6a4+-0x1a8d+0x2134)]=_0x484e27[0x892*-0x4+0xf3c+0x77*0x29];},Be[Ln]=function(_0x3d91da,_0x2017f8,_0xf0844a,_0xc03366){const _0x14695e=_0x3d91da['storageInt'+'32'];for(let _0x67e70d=-0x2655+0xc56+0x533*0x5;_0x67e70d<_0xc03366;_0x67e70d++)_0x14695e[_0xf0844a+_0x67e70d*(0x1*-0xb29+-0x19*0xe+0xc8b)]=_0x2017f8[_0x67e70d];},Be[Yh]=Be[Ln],Be[jh]=function(_0x2e7045,_0x923378,_0x471ae1,_0x3d4828){const _0x381031=_0x2e7045['storageUin'+'t32'];for(let _0x1a9122=0x1*0x1f09+-0xe04+-0x1105;_0x1a9122<_0x3d4828;_0x1a9122++)_0x381031[_0x471ae1+_0x1a9122*(-0xc6d+0xd6b+-0xfa)]=_0x923378[_0x1a9122];},Be[Rn]=(_0x414ef8,_0x291bd2,_0x56249f,_0x37e4b0)=>{const _0x1ffd93=_0x414ef8['storageInt'+'32'];for(let _0x19dbc9=0x553+0x1268+0x4bf*-0x5;_0x19dbc9<_0x37e4b0;_0x19dbc9++)_0x1ffd93[_0x56249f+_0x19dbc9*(0x48e+-0x1*-0xbc8+-0x1052)]=_0x291bd2[_0x19dbc9*(-0xe43+0x1313+-0xf*0x52)],_0x1ffd93[_0x56249f+_0x19dbc9*(0x7b5*-0x5+0x36*-0xab+0xaa9*0x7)+(-0xac*-0x39+0x1516+-0x3b61)]=_0x291bd2[_0x19dbc9*(0x18cd+-0x1220+-0x6ab)+(0x1130+-0x4*0x4eb+0x27d)];},Be[Zh]=Be[Rn],Be[Kh]=(_0x6eb912,_0x3a29dd,_0x1b5b28,_0x236093)=>{const _0x3e6e86=_0x6eb912['storageUin'+'t32'];for(let _0x58fb62=-0x1d5e+0x186e+0x2*0x278;_0x58fb62<_0x236093;_0x58fb62++)_0x3e6e86[_0x1b5b28+_0x58fb62*(-0x1*0x146b+-0x11b7*0x1+0x2626)]=_0x3a29dd[_0x58fb62*(-0x1*0x1b56+0x668+0x14f0)],_0x3e6e86[_0x1b5b28+_0x58fb62*(-0x652+-0x3a0+-0x55*-0x1e)+(0x20b2+-0x1*-0x1b01+-0x3bb2)]=_0x3a29dd[_0x58fb62*(-0x501+-0x1*0x1d89+-0x5c2*-0x6)+(-0xf25*-0x2+-0x6a*0x20+-0x59*0x31)];},Be[On]=(_0x545c75,_0x5b27b4,_0x114ff0,_0x701c5c)=>{const _0x264281=_0x545c75['storageInt'+'32'];for(let _0x2fa095=-0x24d5+0xa32*0x3+0x63f;_0x2fa095<_0x701c5c;_0x2fa095++)_0x264281[_0x114ff0+_0x2fa095*(0x1671+-0x286+-0x13e7)]=_0x5b27b4[_0x2fa095*(-0xbed+0x1d3*-0x4+0x4cf*0x4)],_0x264281[_0x114ff0+_0x2fa095*(0x1c2*0x2+0x1*0x12ba+-0x1*0x163a)+(0x757*-0x1+0xa15*0x3+-0x16e7)]=_0x5b27b4[_0x2fa095*(0xcf8+-0x1495+0x1*0x7a0)+(0xb24+-0x9*0x159+0xfe)],_0x264281[_0x114ff0+_0x2fa095*(0x96*0x5+0xc*0x21f+-0x1c5e)+(-0x151*-0x13+-0x239c+0xa9b)]=_0x5b27b4[_0x2fa095*(0x4ac*0x1+-0x4af*-0x5+-0x3*0x95c)+(0x2575+-0x1f34+-0x63f*0x1)];},Be[Jh]=Be[On],Be[Qh]=(_0xd6eacd,_0x59ba7b,_0x4ddbc6,_0x4c2ff0)=>{const _0xd59047=_0xd6eacd['storageUin'+'t32'];for(let _0x20ff71=-0xefe+0x527*0x1+0x9d7;_0x20ff71<_0x4c2ff0;_0x20ff71++)_0xd59047[_0x4ddbc6+_0x20ff71*(0xe3*-0x15+-0x1*-0x1a89+-0x7e6)]=_0x59ba7b[_0x20ff71*(-0x2b*-0x67+0xaf7*-0x1+-0x653)],_0xd59047[_0x4ddbc6+_0x20ff71*(0x4c1*-0x5+0x1b8d+-0x3c4)+(-0x15dc+0x1*-0x1f97+0x3574)]=_0x59ba7b[_0x20ff71*(-0x11*0x180+-0x8b*0x34+-0x1*-0x35bf)+(-0x45e+0xbd0+-0x771)],_0xd59047[_0x4ddbc6+_0x20ff71*(-0x29*-0x71+0x1*0x1619+0x1417*-0x2)+(-0x1e22+0x19ff+0x425)]=_0x59ba7b[_0x20ff71*(-0x1c*-0x38+0x29*0x3e+-0x100b)+(-0x9*0x14d+0xa9*-0x31+0x2c10)];};class up{constructor(_0x902c0,_0x1b84ed,_0x4dcaf0=!(0x85a+-0x19*-0x14+0xa4e*-0x1)){h(this,'device'),h(this,'persistent'),h(this,'allocation'),h(this,'storageFlo'+'at32'),h(this,'storageInt'+'32'),h(this,'storageUin'+'t32'),h(this,'renderVers'+'ionDirty',0x425+-0x2214+0x1*0x1def);if(this['device']=_0x902c0,this['format']=_0x1b84ed,this['persistent']=_0x4dcaf0,w['assert'](_0x1b84ed),_0x4dcaf0){this['impl']=_0x902c0['createUnif'+'ormBufferI'+'mpl'](this);const _0x3d6596=new ArrayBuffer(_0x1b84ed['byteSize']);this['assignStor'+'age'](new Int32Array(_0x3d6596)),_0x902c0['_vram']['ub']+=this['format']['byteSize'];}else this['allocation']=new lT();}['destroy'](){if(this['persistent']){const _0xfa560c=this['device'];this['impl']['destroy'](_0xfa560c),_0xfa560c['_vram']['ub']-=this['format']['byteSize'];}}get['offset'](){return this['persistent']?-0x1*0x7f+-0x3*0x461+0x2*0x6d1:this['allocation']['offset'];}['assignStor'+'age'](_0x2d90ab){this['storageInt'+'32']=_0x2d90ab,this['storageUin'+'t32']=new Uint32Array(_0x2d90ab['buffer'],_0x2d90ab['byteOffset'],_0x2d90ab['byteLength']/(-0x84*-0x4b+0xf92*-0x1+-0x3d9*0x6)),this['storageFlo'+'at32']=new Float32Array(_0x2d90ab['buffer'],_0x2d90ab['byteOffset'],_0x2d90ab['byteLength']/(0x20b9*-0x1+-0xf6*0x2+-0x22a9*-0x1));}['loseContex'+'t'](){var _0x3344c9;(_0x3344c9=this['impl'])==null||_0x3344c9['loseContex'+'t']();}['setUniform'](_0xddc705,_0x3172a6){w['assert'](_0xddc705);const _0x7bb075=_0xddc705['offset'];if(_0x3172a6!=null){const _0x2ff8c8=Be[_0xddc705['updateType']];_0x2ff8c8?_0x2ff8c8(this,_0x3172a6,_0x7bb075,_0xddc705['count']):this['storageFlo'+'at32']['set'](_0x3172a6,_0x7bb075);}else w['warnOnce']('Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20to\x20unif'+'orm\x20['+_0xddc705['name']+('],\x20expecte'+'d\x20type\x20')+GS[_0xddc705['type']]+('\x20while\x20ren'+'dering\x20')+Q['toString']());}['set'](_0x547f1b,_0x310d1e){const _0x50cad8=this['format']['map']['get'](_0x547f1b);w['assert'](_0x50cad8,'Uniform\x20na'+'me\x20['+_0x547f1b+(']\x20is\x20not\x20p'+'art\x20of\x20the'+'\x20Uniform\x20b'+'uffer.')),_0x50cad8&&this['setUniform'](_0x50cad8,_0x310d1e);}['startUpdat'+'e'](_0x5dd8f6){if(!this['persistent']){const _0xb4b699=this['allocation'],_0x126c79=_0xb4b699['gpuBuffer'];this['device']['dynamicBuf'+'fers']['alloc'](_0xb4b699,this['format']['byteSize']),this['assignStor'+'age'](_0xb4b699['storage']),_0x5dd8f6&&(_0x5dd8f6['bindGroup']=_0xb4b699['gpuBuffer']['getBindGro'+'up'](this),_0x5dd8f6['offsets'][-0x24a*0xa+-0x724+0x1e08]=_0xb4b699['offset']),_0x126c79!==_0xb4b699['gpuBuffer']&&(this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion']);}}['endUpdate'](){this['persistent']?this['impl']['unlock'](this):(this['storageFlo'+'at32']=null,this['storageInt'+'32']=null);}['update'](_0x1ddc24){this['startUpdat'+'e'](_0x1ddc24);const _0x126229=this['format']['uniforms'];for(let _0x3affb3=0x4*-0x1af+-0xc14+0x12d0;_0x3affb3<_0x126229['length'];_0x3affb3++){const _0x1879e5=_0x126229[_0x3affb3]['scopeId']['value'];this['setUniform'](_0x126229[_0x3affb3],_0x1879e5);}this['endUpdate']();}}class cT{constructor(){h(this,'frameAlloc'+'ations',[]),h(this,'pastFrameA'+'llocations',new Map()),h(this,'_enabled',!(-0x2*0xb8d+0x125f*0x2+-0xda3)),h(this,'_enableReq'+'uest',!(-0xdf2+0x7*-0x18e+0xa3*0x27)),h(this,'_frameTime',0x105*0x3+0x6e*0x2e+0x16d3*-0x1);}['loseContex'+'t'](){this['pastFrameA'+'llocations']['clear']();}set['enabled'](_0x2b5b2c){this['_enableReq'+'uest']=_0x2b5b2c;}get['enabled'](){return this['_enableReq'+'uest'];}['processEna'+'bleRequest'](){this['_enableReq'+'uest']!==this['_enabled']&&(this['_enabled']=this['_enableReq'+'uest'],this['_enabled']||(this['_frameTime']=-0x18*-0x1+0x4df*0x2+-0x9d6));}['request'](_0x30d8af){this['pastFrameA'+'llocations']['set'](_0x30d8af,this['frameAlloc'+'ations']),this['frameAlloc'+'ations']=[];}['report'](_0x5ac26,_0x40f386){if(_0x40f386){const _0x3c863b=this['pastFrameA'+'llocations']['get'](_0x5ac26);if(w['assert'](_0x3c863b['length']===_0x40f386['length']),_0x40f386['length']>-0x205f*0x1+0x63c*-0x4+0x394f&&(this['_frameTime']=_0x40f386['reduce']((_0x27a851,_0x5924b9)=>_0x27a851+_0x5924b9,-0x22d3+0x17b*-0x7+0x2d30)),mi['get'](Ml)){w['trace'](Ml,'--\x20GPU\x20tim'+'ings\x20for\x20f'+'rame\x20'+_0x5ac26+'\x20--');let _0x4aa14c=0x2*-0x11c1+-0x1986+0x3d08;for(let _0x5cad88=0x13*0x12a+0x1a9e+-0xc2f*0x4;_0x5cad88<_0x3c863b['length'];++_0x5cad88){const _0x21c506=_0x3c863b[_0x5cad88];_0x4aa14c+=_0x40f386[_0x5cad88],w['trace'](Ml,_0x40f386[_0x5cad88]['toFixed'](-0xba1+-0x14e2+0x2085)+'\x20ms\x20'+_0x21c506);}w['trace'](Ml,_0x4aa14c['toFixed'](0x43*-0x7a+0x1*-0x23ce+0x12b*0x3a)+'\x20ms\x20TOTAL');}}this['pastFrameA'+'llocations']['delete'](_0x5ac26);}['getSlot'](_0x1ef4fe){const _0xd85093=this['frameAlloc'+'ations']['length'];return this['frameAlloc'+'ations']['push'](_0x1ef4fe),_0xd85093;}get['slotCount'](){return this['frameAlloc'+'ations']['length'];}}class fy{constructor(){h(this,'bufferId',null);}['destroy'](_0x847dbe){this['bufferId']&&(_0x847dbe['gl']['deleteBuff'+'er'](this['bufferId']),this['bufferId']=null);}get['initialize'+'d'](){return!!this['bufferId'];}['loseContex'+'t'](){this['bufferId']=null;}['unlock'](_0x494e71,_0x5c905f,_0x4bbe35,_0x15e4f7){const _0x2352e5=_0x494e71['gl'];if(this['bufferId'])_0x2352e5['bindBuffer'](_0x4bbe35,this['bufferId']),_0x2352e5['bufferSubD'+'ata'](_0x4bbe35,0x27*0x7c+-0x1*0xde9+0x4b*-0x11,_0x15e4f7);else{let _0x79bd68;switch(_0x5c905f){case ms:_0x79bd68=_0x2352e5['STATIC_DRA'+'W'];break;case zc:_0x79bd68=_0x2352e5['DYNAMIC_DR'+'AW'];break;case SS:_0x79bd68=_0x2352e5['STREAM_DRA'+'W'];break;case H0:_0x79bd68=_0x2352e5['DYNAMIC_CO'+'PY'];break;}this['bufferId']=_0x2352e5['createBuff'+'er'](),_0x2352e5['bindBuffer'](_0x4bbe35,this['bufferId']),_0x2352e5['bufferData'](_0x4bbe35,_0x15e4f7,_0x79bd68);}}}class hT extends fy{constructor(){super(...arguments),h(this,'vao',null);}['destroy'](_0x118b15){super['destroy'](_0x118b15),_0x118b15['unbindVert'+'exArray']();}['loseContex'+'t'](){super['loseContex'+'t'](),this['vao']=null;}['unlock'](_0x46bb4a){const _0x38a2bf=_0x46bb4a['device'];super['unlock'](_0x38a2bf,_0x46bb4a['usage'],_0x38a2bf['gl']['ARRAY_BUFF'+'ER'],_0x46bb4a['storage']);}}class dT extends fy{constructor(_0x3d6bd1){super();const _0x2f0de2=_0x3d6bd1['device']['gl'],_0x539002=_0x3d6bd1['format'];_0x539002===yf?this['glFormat']=_0x2f0de2['UNSIGNED_B'+'YTE']:_0x539002===ji?this['glFormat']=_0x2f0de2['UNSIGNED_S'+'HORT']:_0x539002===yr&&(this['glFormat']=_0x2f0de2['UNSIGNED_I'+'NT']);}['unlock'](_0x47918f){const _0x3d2915=_0x47918f['device'];super['unlock'](_0x3d2915,_0x47918f['usage'],_0x3d2915['gl']['ELEMENT_AR'+'RAY_BUFFER'],_0x47918f['storage']);}}class fT{constructor(_0x24e43e,_0x5cd881,_0x3caea4,_0x215a0c){if(this['locationId']=_0x215a0c,this['scopeId']=_0x24e43e['scope']['resolve'](_0x5cd881),this['version']=new sy(),_0x5cd881['substring'](_0x5cd881['length']-(-0x1*-0x1651+0xe5+-0x1*0x1733))==='[0]')switch(_0x3caea4){case $s:_0x3caea4=$h;break;case da:_0x3caea4=Ln;break;case Pn:_0x3caea4=jh;break;case mn:_0x3caea4=Yh;break;case fa:_0x3caea4=Xh;break;case ra:_0x3caea4=Rn;break;case Mn:_0x3caea4=Kh;break;case Go:_0x3caea4=Zh;break;case ds:_0x3caea4=qh;break;case aa:_0x3caea4=On;break;case Dn:_0x3caea4=Qh;break;case Ho:_0x3caea4=Jh;break;case An:_0x3caea4=ap;break;case na:_0x3caea4=Yc;break;case In:_0x3caea4=np;break;case Wo:_0x3caea4=op;break;}this['dataType']=_0x3caea4,this['value']=[null,null,null,null],this['array']=[];}}let Om=-0x12d9+-0x5cf*-0x1+0xd0a;const uT=new Set(['gl_VertexI'+'D','gl_Instanc'+'eID','gl_DrawID','gl_BaseVer'+'tex','gl_BaseIns'+'tance']);class pT{constructor(){h(this,'map',new Map());}['destroy'](_0x23edf6){this['map']['forEach'](_0x4eb08f=>{_0x23edf6['gl']['deleteShad'+'er'](_0x4eb08f);});}['loseContex'+'t'](_0x24f34b){this['map']['clear']();}}const mT=new Kt(),_T=new Kt();class gT{constructor(_0xd8627d){h(this,'compileDur'+'ation',-0x1967+-0x218f*-0x1+0x105*-0x8),(this['init'](),this['compile'](_0xd8627d['device'],_0xd8627d),this['link'](_0xd8627d['device'],_0xd8627d),_0xd8627d['device']['shaders']['push'](_0xd8627d));}['destroy'](_0x4e0251){this['glProgram']&&(_0x4e0251['device']['gl']['deleteProg'+'ram'](this['glProgram']),this['glProgram']=null);}['init'](){this['uniforms']=[],this['samplers']=[],this['attributes']=[],this['glProgram']=null,this['glVertexSh'+'ader']=null,this['glFragment'+'Shader']=null;}['loseContex'+'t'](){this['init']();}['restoreCon'+'text'](_0x5d34ea,_0x43e3c6){this['compile'](_0x5d34ea,_0x43e3c6),this['link'](_0x5d34ea,_0x43e3c6);}['compile'](_0x3b84ba,_0x5f3b7a){const _0x5330fb=_0x5f3b7a['definition'];this['glVertexSh'+'ader']=this['_compileSh'+'aderSource'](_0x3b84ba,_0x5330fb['vshader'],!(-0xa*-0x28d+0x7da*-0x2+-0xfb*0xa)),this['glFragment'+'Shader']=this['_compileSh'+'aderSource'](_0x3b84ba,_0x5330fb['fshader'],!(0x1d83*0x1+0x231d+-0x409f));}['link'](_0x498d61,_0x2670a3){if(this['glProgram'])return;const _0x36b1d5=_0x498d61['gl'];if(_0x36b1d5['isContextL'+'ost']())return;let _0x30c34e=0x3*-0x1bb+0xa31+0x5*-0x100;w['call'](()=>{this['compileDur'+'ation']=0x1cd4+-0x14e2+0x2a6*-0x3,_0x30c34e=de();});const _0x313ae6=_0x36b1d5['createProg'+'ram']();this['glProgram']=_0x313ae6,_0x36b1d5['attachShad'+'er'](_0x313ae6,this['glVertexSh'+'ader']),_0x36b1d5['attachShad'+'er'](_0x313ae6,this['glFragment'+'Shader']);const _0x5c0e5e=_0x2670a3['definition'],_0x442331=_0x5c0e5e['attributes'];if(_0x5c0e5e['useTransfo'+'rmFeedback']){const _0x2e6215=[];for(const _0x13e69d in _0x442331)_0x442331['hasOwnProp'+'erty'](_0x13e69d)&&_0x2e6215['push']('out_'+_0x13e69d);_0x36b1d5['transformF'+'eedbackVar'+'yings'](_0x313ae6,_0x2e6215,_0x36b1d5['INTERLEAVE'+'D_ATTRIBS']);}const _0xefe331={};for(const _0x19ffce in _0x442331)if(_0x442331['hasOwnProp'+'erty'](_0x19ffce)){const _0x7fa498=_0x442331[_0x19ffce],_0x241fed=Le[_0x7fa498];w['assert'](!_0xefe331['hasOwnProp'+'erty'](_0x241fed),'WARNING:\x20T'+'wo\x20attribu'+'tes\x20are\x20ma'+'pped\x20to\x20th'+'e\x20same\x20loc'+'ation\x20in\x20a'+'\x20shader:\x20'+_0xefe331[_0x241fed]+'\x20and\x20'+_0x19ffce),_0xefe331[_0x241fed]=_0x19ffce,_0x36b1d5['bindAttrib'+'Location'](_0x313ae6,_0x241fed,_0x19ffce);}_0x36b1d5['linkProgra'+'m'](_0x313ae6),w['call'](()=>{this['compileDur'+'ation']=de()-_0x30c34e;}),_0x498d61['_shaderSta'+'ts']['linked']++,_0x5c0e5e['tag']===NS&&_0x498d61['_shaderSta'+'ts']['materialSh'+'aders']++;}['_compileSh'+'aderSource'](_0x38c65c,_0x51b2e4,_0x2acfaa){const _0x2388d1=_0x38c65c['gl'];if(_0x2388d1['isContextL'+'ost']())return null;const _0x413673=(_0x2acfaa?mT:_T)['get'](_0x38c65c,()=>new pT());let _0x4064c6=_0x413673['map']['get'](_0x51b2e4);if(!_0x4064c6){const _0x21b9f0=de();_0x38c65c['fire']('shader:com'+'pile:start',{'timestamp':_0x21b9f0,'target':_0x38c65c}),_0x4064c6=_0x2388d1['createShad'+'er'](_0x2acfaa?_0x2388d1['VERTEX_SHA'+'DER']:_0x2388d1['FRAGMENT_S'+'HADER']),_0x2388d1['shaderSour'+'ce'](_0x4064c6,_0x51b2e4),_0x2388d1['compileSha'+'der'](_0x4064c6),_0x413673['map']['set'](_0x51b2e4,_0x4064c6);const _0x5ed927=de();_0x38c65c['fire']('shader:com'+'pile:end',{'timestamp':_0x5ed927,'target':_0x38c65c}),_0x38c65c['_shaderSta'+'ts']['compileTim'+'e']+=_0x5ed927-_0x21b9f0,_0x2acfaa?_0x38c65c['_shaderSta'+'ts']['vsCompiled']++:_0x38c65c['_shaderSta'+'ts']['fsCompiled']++;}return _0x4064c6;}['finalize'](_0x4eb1fd,_0x4508d8){var _0xb25115,_0x48450a;const _0x18eded=_0x4eb1fd['gl'];if(_0x18eded['isContextL'+'ost']())return!(-0x11*0x6a+0x26f5+-0x1feb*0x1);const _0x5b49fc=this['glProgram'],_0x5e62a1=_0x4508d8['definition'],_0x541e02=de();_0x4eb1fd['fire']('shader:lin'+'k:start',{'timestamp':_0x541e02,'target':_0x4eb1fd});let _0xb2bfdd=-0x1*0x21eb+-0xf*-0x59+0x1cb4;if(w['call'](()=>{_0xb2bfdd=de();}),!_0x18eded['getProgram'+'Parameter'](_0x5b49fc,_0x18eded['LINK_STATU'+'S'])){if(!this['_isCompile'+'d'](_0x4eb1fd,_0x4508d8,this['glVertexSh'+'ader'],_0x5e62a1['vshader'],'vertex')||!this['_isCompile'+'d'](_0x4eb1fd,_0x4508d8,this['glFragment'+'Shader'],_0x5e62a1['fshader'],'fragment'))return!(-0x10a6+-0x189f+0x2946);const _0x1711be='Failed\x20to\x20'+'link\x20shade'+'r\x20program.'+'\x20Error:\x20'+_0x18eded['getProgram'+'InfoLog'](_0x5b49fc);return _0x5e62a1['translated'+'Frag']=(_0xb25115=_0x18eded['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(-0x26e9+0x5*0x237+-0x2*-0xdeb):_0xb25115['getTransla'+'tedShaderS'+'ource'](this['glFragment'+'Shader']),_0x5e62a1['translated'+'Vert']=(_0x48450a=_0x18eded['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(0x166c+0x1142+0xd3a*-0x3):_0x48450a['getTransla'+'tedShaderS'+'ource'](this['glVertexSh'+'ader']),console['error'](_0x1711be,_0x5e62a1),console['error'](_0x1711be),!(-0xaf*0x28+-0x71d*-0x3+0x2*0x301);}const _0x59ec4f=_0x18eded['getProgram'+'Parameter'](_0x5b49fc,_0x18eded['ACTIVE_ATT'+'RIBUTES']);_0x4508d8['attributes']['clear']();for(let _0xf7b664=-0x2218*0x1+-0xa3b+0x2c53;_0xf7b664<_0x59ec4f;_0xf7b664++){const _0x5a90eb=_0x18eded['getActiveA'+'ttrib'](_0x5b49fc,_0xf7b664),_0x13a3c9=_0x18eded['getAttribL'+'ocation'](_0x5b49fc,_0x5a90eb['name']);uT['has'](_0x5a90eb['name'])||(_0x5e62a1['attributes'][_0x5a90eb['name']]===void(-0x22d1+0x22a6+0x2b)?(console['error']('Vertex\x20sha'+'der\x20attrib'+'ute\x20\x22'+_0x5a90eb['name']+('\x22\x20is\x20not\x20m'+'apped\x20to\x20a'+'\x20semantic\x20'+'in\x20shader\x20'+'definition'+',\x20shader\x20[')+_0x4508d8['label']+']',_0x4508d8),_0x4508d8['failed']=!(-0x14b5+-0xb45*-0x1+0x970)):_0x4508d8['attributes']['set'](_0x13a3c9,_0x5a90eb['name']));}const _0x58959a=_0x4eb1fd['_samplerTy'+'pes'],_0x34ba1d=_0x18eded['getProgram'+'Parameter'](_0x5b49fc,_0x18eded['ACTIVE_UNI'+'FORMS']);for(let _0x963d39=-0x1dec+0x4*0x993+-0x8*0x10c;_0x963d39<_0x34ba1d;_0x963d39++){const _0x4e45ff=_0x18eded['getActiveU'+'niform'](_0x5b49fc,_0x963d39),_0x3276dd=_0x18eded['getUniform'+'Location'](_0x5b49fc,_0x4e45ff['name']),_0x5a5bf7=new fT(_0x4eb1fd,_0x4e45ff['name'],_0x4eb1fd['pcUniformT'+'ype'][_0x4e45ff['type']],_0x3276dd);_0x58959a['has'](_0x4e45ff['type'])?this['samplers']['push'](_0x5a5bf7):this['uniforms']['push'](_0x5a5bf7);}_0x4508d8['ready']=!(-0x8f*-0x35+0x577+-0x2312);const _0x5d2548=de();return _0x4eb1fd['fire']('shader:lin'+'k:end',{'timestamp':_0x5d2548,'target':_0x4eb1fd}),_0x4eb1fd['_shaderSta'+'ts']['compileTim'+'e']+=_0x5d2548-_0x541e02,w['call'](()=>{const _0xc633bd=de()-_0xb2bfdd;this['compileDur'+'ation']+=_0xc633bd,Om+=this['compileDur'+'ation'],w['trace'](c0,'[id:\x20'+_0x4508d8['id']+']\x20'+_0x4508d8['name']+':\x20'+this['compileDur'+'ation']['toFixed'](0x1*-0xc10+0x1*-0x4d6+0x10e7)+('ms,\x20TOTAL:'+'\x20')+Om['toFixed'](0xf*0x27d+0x12d8+-0x382a)+'ms');}),!(-0x2*-0x1354+0x53*-0x21+-0x1bf5*0x1);}['_isCompile'+'d'](_0xf9ad60,_0x20a119,_0x2f76db,_0x2a77ec,_0x87b9b4){const _0x49511e=_0xf9ad60['gl'];if(!_0x49511e['getShaderP'+'arameter'](_0x2f76db,_0x49511e['COMPILE_ST'+'ATUS'])){const _0x35287f=_0x49511e['getShaderI'+'nfoLog'](_0x2f76db),[_0x4fdfa3,_0x4f5a96]=this['_processEr'+'ror'](_0x2a77ec,_0x35287f),_0x39b92f='Failed\x20to\x20'+'compile\x20'+_0x87b9b4+'\x20shader:\x0a\x0a'+_0x35287f+'\x0a'+_0x4fdfa3+('\x20while\x20ren'+'dering\x20')+Q['toString']();return _0x4f5a96['shader']=_0x20a119,console['error'](_0x39b92f,_0x4f5a96),console['error'](_0x39b92f),!(-0x135+-0x4*0xdd+-0xc7*-0x6);}return!(-0x14e2+-0x17e+0x1660);}['isLinked'](_0x183dfb){const {extParallelShaderCompile:_0x1cc7b8}=_0x183dfb;return _0x1cc7b8?_0x183dfb['gl']['getProgram'+'Parameter'](this['glProgram'],_0x1cc7b8['COMPLETION'+'_STATUS_KH'+'R']):!(0x1ed4+0x9a8+-0x2*0x143e);}['_processEr'+'ror'](_0x2dbf5e,_0x9a6f7){const _0xe20763={};let _0x471022='';if(_0x2dbf5e){const _0x13fcf5=_0x2dbf5e['split']('\x0a');let _0x5816a4=-0x140+0x27*0xd6+-0x1*0x1f5a,_0x58a2e8=_0x13fcf5['length'];if(_0x9a6f7&&_0x9a6f7['startsWith']('ERROR:')){const _0xcd52c3=_0x9a6f7['match'](/^ERROR:\s(\d+):(\d+):\s*(.+)/);_0xcd52c3&&(_0xe20763['message']=_0xcd52c3[0x5ad+-0x8b3+-0x15*-0x25],_0xe20763['line']=parseInt(_0xcd52c3[0x293*0x8+-0x2163+0xccd],0x3cb+-0x1b4f+0x6*0x3ed),_0x5816a4=Math['max'](-0xb37+-0x7b8+-0x25*-0x83,_0xe20763['line']-(-0x117b+-0x5f6+0x1777)),_0x58a2e8=Math['min'](_0x13fcf5['length'],_0xe20763['line']+(0x1f*0xce+0x35*0x89+-0x13*0x2ce)));}for(let _0x315f55=_0x5816a4;_0x315f55<_0x58a2e8;_0x315f55++){const _0x2dccda=_0x315f55+(-0x2280+-0x218e+0x440f)===_0xe20763['line']?'>\x20':'\x20\x20';_0x471022+=''+_0x2dccda+(_0x315f55+(-0xa*0x329+0x21+0x66*0x4f))+':\x09'+_0x13fcf5[_0x315f55]+'\x0a';}_0xe20763['source']=_0x2dbf5e;}return[_0x471022,_0xe20763];}}function Fm(_0x323c1e,_0xe2ef84){const _0x23213a=_0x323c1e['width'],_0x1e5a2b=_0x323c1e['height'];if(_0x23213a>_0xe2ef84||_0x1e5a2b>_0xe2ef84){const _0x107e2b=_0xe2ef84/Math['max'](_0x23213a,_0x1e5a2b),_0x2df876=Math['floor'](_0x23213a*_0x107e2b),_0x10e3a8=Math['floor'](_0x1e5a2b*_0x107e2b);w['warn']('Image\x20dime'+'nsions\x20lar'+'ger\x20than\x20m'+'ax\x20support'+'ed\x20texture'+'\x20size\x20of\x20'+_0xe2ef84+('.\x20Resizing'+'\x20from\x20')+_0x23213a+',\x20'+_0x1e5a2b+'\x20to\x20'+_0x2df876+',\x20'+_0x10e3a8+'.');const _0x417e4c=document['createElem'+'ent']('canvas');return _0x417e4c['width']=_0x2df876,_0x417e4c['height']=_0x10e3a8,_0x417e4c['getContext']('2d')['drawImage'](_0x323c1e,-0x109*-0x2+0xda8+-0xfba,0x23e9+0xde2*0x1+-0x31cb,_0x23213a,_0x1e5a2b,-0x2c*0x35+-0x2*-0xf47+-0x1572,0xb*0x293+0x105e*-0x2+-0x1*-0x46b,_0x2df876,_0x10e3a8),_0x417e4c;}return _0x323c1e;}class ST{constructor(_0x272909){h(this,'_glTexture',null),h(this,'_glTarget'),h(this,'_glFormat'),h(this,'_glInterna'+'lFormat'),h(this,'_glPixelTy'+'pe'),h(this,'_glCreated'),h(this,'dirtyParam'+'eterFlags',0x2*0x32b+0x266e+-0x2fc*0xf),this['texture']=_0x272909;}['destroy'](_0xd10cbf){if(this['_glTexture']){for(let _0x5e329a=0x1e49+0x9f4*-0x3+0x1*-0x6d;_0x5e329a<_0xd10cbf['textureUni'+'ts']['length'];_0x5e329a++){const _0x3cc925=_0xd10cbf['textureUni'+'ts'][_0x5e329a];for(let _0x43e5aa=0x156b+-0x10d*0x3+-0x922*0x2;_0x43e5aa<_0x3cc925['length'];_0x43e5aa++)_0x3cc925[_0x43e5aa]===this['_glTexture']&&(_0x3cc925[_0x43e5aa]=null);}_0xd10cbf['gl']['deleteText'+'ure'](this['_glTexture']),this['_glTexture']=null;}}['loseContex'+'t'](){this['_glTexture']=null;}['propertyCh'+'anged'](_0x4ea41d){this['dirtyParam'+'eterFlags']|=_0x4ea41d;}['initialize'](_0x124ceb,_0xd1972){const _0x28ca80=_0x124ceb['gl'];switch(this['_glTexture']=_0x28ca80['createText'+'ure'](),this['_glTarget']=_0xd1972['_cubemap']?_0x28ca80['TEXTURE_CU'+'BE_MAP']:_0xd1972['_volume']?_0x28ca80['TEXTURE_3D']:_0xd1972['array']?_0x28ca80['TEXTURE_2D'+'_ARRAY']:_0x28ca80['TEXTURE_2D'],_0xd1972['_format']){case yS:this['_glFormat']=_0x28ca80['ALPHA'],this['_glInterna'+'lFormat']=_0x28ca80['ALPHA'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_B'+'YTE'];break;case vS:this['_glFormat']=_0x28ca80['LUMINANCE'],this['_glInterna'+'lFormat']=_0x28ca80['LUMINANCE'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_B'+'YTE'];break;case Lu:this['_glFormat']=_0x28ca80['LUMINANCE_'+'ALPHA'],this['_glInterna'+'lFormat']=_0x28ca80['LUMINANCE_'+'ALPHA'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_B'+'YTE'];break;case Zu:this['_glFormat']=_0x28ca80['RED'],this['_glInterna'+'lFormat']=_0x28ca80['R8'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_B'+'YTE'];break;case Qu:this['_glFormat']=_0x28ca80['RG'],this['_glInterna'+'lFormat']=_0x28ca80['RG8'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_B'+'YTE'];break;case Ih:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x28ca80['RGB565'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_S'+'HORT_5_6_5'];break;case Ru:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x28ca80['RGB5_A1'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_S'+'HORT_5_5_5'+'_1'];break;case Lh:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x28ca80['RGBA4'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_S'+'HORT_4_4_4'+'_4'];break;case wr:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x28ca80['RGB8'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_B'+'YTE'];break;case Ne:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x28ca80['RGBA8'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_B'+'YTE'];break;case ES:case PS:w['error']('BGRA8\x20and\x20'+'SBGRA8\x20tex'+'ture\x20forma'+'ts\x20are\x20not'+'\x20supported'+'\x20by\x20WebGL.');break;case Rh:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGB_S3TC_'+'DXT1_EXT'];break;case Ou:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT3_EXT'];break;case ol:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT5_EXT'];break;case Fh:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'ETC1']['COMPRESSED'+'_RGB_ETC1_'+'WEBGL'];break;case ll:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_2BPPV1_IM'+'G'];break;case cl:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_2BPPV1_I'+'MG'];break;case Nh:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_4BPPV1_IM'+'G'];break;case kh:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_4BPPV1_I'+'MG'];break;case Nu:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGB8_ETC2'];break;case ku:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGBA8_ETC'+'2_EAC'];break;case xS:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_RGBA_ASTC'+'_4x4_KHR'];break;case TS:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGB_ATC_W'+'EBGL'];break;case wS:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGBA_ATC_'+'INTERPOLAT'+'ED_ALPHA_W'+'EBGL'];break;case MS:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x124ceb['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'SIGNED_FLO'+'AT_EXT'];break;case DS:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x124ceb['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'UNSIGNED_F'+'LOAT_EXT'];break;case IS:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x124ceb['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGBA_BPTC'+'_UNORM_EXT'];break;case vf:this['_glFormat']=_0x28ca80['SRGB'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_S3TC'+'_DXT1_EXT'];break;case xf:this['_glFormat']=_0x28ca80['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'3_EXT'];break;case Tf:this['_glFormat']=_0x28ca80['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'5_EXT'];break;case wf:this['_glFormat']=_0x28ca80['SRGB'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ETC'+'2'];break;case Ef:this['_glFormat']=_0x28ca80['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ETC2_E'+'AC'];break;case bf:this['_glFormat']=_0x28ca80['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x124ceb['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ASTC_4'+'x4_KHR'];break;case Af:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x124ceb['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_SRGB_ALPH'+'A_BPTC_UNO'+'RM_EXT'];break;case Bh:this['_glFormat']=_0x28ca80['RED'],this['_glInterna'+'lFormat']=_0x28ca80['R16F'],this['_glPixelTy'+'pe']=_0x28ca80['HALF_FLOAT'];break;case Ku:this['_glFormat']=_0x28ca80['RG'],this['_glInterna'+'lFormat']=_0x28ca80['RG16F'],this['_glPixelTy'+'pe']=_0x28ca80['HALF_FLOAT'];break;case ui:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x28ca80['RGB16F'],this['_glPixelTy'+'pe']=_0x28ca80['HALF_FLOAT'];break;case nt:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x28ca80['RGBA16F'],this['_glPixelTy'+'pe']=_0x28ca80['HALF_FLOAT'];break;case Ye:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x28ca80['RGB32F'],this['_glPixelTy'+'pe']=_0x28ca80['FLOAT'];break;case Xt:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x28ca80['RGBA32F'],this['_glPixelTy'+'pe']=_0x28ca80['FLOAT'];break;case Qi:this['_glFormat']=_0x28ca80['RED'],this['_glInterna'+'lFormat']=_0x28ca80['R32F'],this['_glPixelTy'+'pe']=_0x28ca80['FLOAT'];break;case Wi:this['_glFormat']=_0x28ca80['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0x28ca80['DEPTH_COMP'+'ONENT32F'],this['_glPixelTy'+'pe']=_0x28ca80['FLOAT'];break;case un:this['_glFormat']=_0x28ca80['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0x28ca80['DEPTH_COMP'+'ONENT16'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_S'+'HORT'];break;case Oh:this['_glFormat']=_0x28ca80['DEPTH_STEN'+'CIL'],this['_glInterna'+'lFormat']=_0x28ca80['DEPTH24_ST'+'ENCIL8'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_I'+'NT_24_8'];break;case En:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x28ca80['R11F_G11F_'+'B10F'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_I'+'NT_10F_11F'+'_11F_REV'];break;case Fu:this['_glFormat']=_0x28ca80['RGB'],this['_glInterna'+'lFormat']=_0x28ca80['SRGB8'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_B'+'YTE'];break;case _s:this['_glFormat']=_0x28ca80['RGBA'],this['_glInterna'+'lFormat']=_0x28ca80['SRGB8_ALPH'+'A8'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_B'+'YTE'];break;case Uu:this['_glFormat']=_0x28ca80['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x28ca80['R8I'],this['_glPixelTy'+'pe']=_0x28ca80['BYTE'];break;case bS:this['_glFormat']=_0x28ca80['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x28ca80['R8UI'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_B'+'YTE'];break;case Bu:this['_glFormat']=_0x28ca80['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x28ca80['R16I'],this['_glPixelTy'+'pe']=_0x28ca80['SHORT'];break;case zu:this['_glFormat']=_0x28ca80['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x28ca80['R16UI'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_S'+'HORT'];break;case Vu:this['_glFormat']=_0x28ca80['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x28ca80['R32I'],this['_glPixelTy'+'pe']=_0x28ca80['INT'];break;case Yi:this['_glFormat']=_0x28ca80['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x28ca80['R32UI'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_I'+'NT'];break;case Gu:this['_glFormat']=_0x28ca80['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x28ca80['RG8I'],this['_glPixelTy'+'pe']=_0x28ca80['BYTE'];break;case AS:this['_glFormat']=_0x28ca80['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x28ca80['RG8UI'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_B'+'YTE'];break;case Hu:this['_glFormat']=_0x28ca80['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x28ca80['RG16I'],this['_glPixelTy'+'pe']=_0x28ca80['SHORT'];break;case Wu:this['_glFormat']=_0x28ca80['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x28ca80['RG16UI'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_S'+'HORT'];break;case $u:this['_glFormat']=_0x28ca80['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x28ca80['RG32I'],this['_glPixelTy'+'pe']=_0x28ca80['INT'];break;case Xu:this['_glFormat']=_0x28ca80['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x28ca80['RG32UI'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_I'+'NT'];break;case qu:this['_glFormat']=_0x28ca80['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x28ca80['RGBA8I'],this['_glPixelTy'+'pe']=_0x28ca80['BYTE'];break;case CS:this['_glFormat']=_0x28ca80['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x28ca80['RGBA8UI'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_B'+'YTE'];break;case ju:this['_glFormat']=_0x28ca80['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x28ca80['RGBA16I'],this['_glPixelTy'+'pe']=_0x28ca80['SHORT'];break;case Uh:this['_glFormat']=_0x28ca80['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x28ca80['RGBA16UI'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_S'+'HORT'];break;case Yu:this['_glFormat']=_0x28ca80['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x28ca80['RGBA32I'],this['_glPixelTy'+'pe']=_0x28ca80['INT'];break;case Ue:this['_glFormat']=_0x28ca80['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x28ca80['RGBA32UI'],this['_glPixelTy'+'pe']=_0x28ca80['UNSIGNED_I'+'NT'];break;}this['_glCreated']=!(0x20a4+0x1*-0x3+-0x20a0);}['upload'](_0x36413f,_0x4020be){w['assert'](_0x4020be['device'],'Attempting'+'\x20to\x20use\x20a\x20'+'texture\x20th'+'at\x20has\x20bee'+'n\x20destroye'+'d.',_0x4020be);const _0x14d80d=_0x36413f['gl'];if(!_0x4020be['_needsUplo'+'ad']&&(_0x4020be['_needsMipm'+'apsUpload']&&_0x4020be['_mipmapsUp'+'loaded']||!_0x4020be['pot']))return;let _0x4155e4=-0x1f31+-0x186d+-0x3f*-0xe2,_0x1ac66f,_0x5bedea;const _0x487acb=_0x4020be['numLevels'];for(_0x4020be['array']&&_0x14d80d['texStorage'+'3D'](_0x14d80d['TEXTURE_2D'+'_ARRAY'],_0x487acb,this['_glInterna'+'lFormat'],_0x4020be['_width'],_0x4020be['_height'],_0x4020be['_arrayLeng'+'th']);_0x4020be['_levels'][_0x4155e4]||_0x4155e4===-0xf07+0x21f*-0x11+0x3316;){if(!_0x4020be['_needsUplo'+'ad']&&_0x4155e4===-0x1279*-0x1+0x3b8+-0x1631){_0x4155e4++;continue;}else{if(_0x4155e4&&(!_0x4020be['_needsMipm'+'apsUpload']||!_0x4020be['_mipmaps']))break;}if(_0x1ac66f=_0x4020be['_levels'][_0x4155e4],_0x5bedea=(0x118e+-0x16db+0x54e)/Math['pow'](0x1556+-0x154e+-0x6,_0x4155e4),_0x4155e4===-0x1*-0x1358+-0x97a*-0x3+-0x2fc5&&!_0x4020be['_compresse'+'d']&&!_0x4020be['_integerFo'+'rmat']&&_0x4020be['_levels']['length']<_0x487acb&&(_0x14d80d['generateMi'+'pmap'](this['_glTarget']),_0x4020be['_mipmapsUp'+'loaded']=!(0x5aa*-0x5+0x1*0x211f+-0x4cd)),_0x4020be['_cubemap']){let _0x258fda;if(_0x36413f['_isBrowser'+'Interface'](_0x1ac66f[0x1*0xcd8+-0x1617+0x93f]))for(_0x258fda=0xa*0x95+-0x1362*-0x1+-0x1934;_0x258fda<0x1*0x209b+0x14bf+-0x1aaa*0x2;_0x258fda++){if(!_0x4020be['_levelsUpd'+'ated'][0x1769+0x18*-0x131+-0x52f*-0x1][_0x258fda])continue;let _0x493557=_0x1ac66f[_0x258fda];_0x36413f['_isImageBr'+'owserInter'+'face'](_0x493557)&&(_0x493557['width']>_0x36413f['maxCubeMap'+'Size']||_0x493557['height']>_0x36413f['maxCubeMap'+'Size'])&&(_0x493557=Fm(_0x493557,_0x36413f['maxCubeMap'+'Size']),_0x4155e4===-0xd5b+0x1*0x11ce+-0x473&&(_0x4020be['_width']=_0x493557['width'],_0x4020be['_height']=_0x493557['height'])),_0x36413f['setUnpackF'+'lipY'](!(0xd1e+0xd4d+0x17*-0x126)),_0x36413f['setUnpackP'+'remultiply'+'Alpha'](_0x4020be['_premultip'+'lyAlpha']),this['_glCreated']?_0x14d80d['texSubImag'+'e2D'](_0x14d80d['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x258fda,_0x4155e4,-0x2057*0x1+-0x1*-0x1+0x2056,-0x6aa+-0x824*0x3+0x1f16,this['_glFormat'],this['_glPixelTy'+'pe'],_0x493557):_0x14d80d['texImage2D'](_0x14d80d['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x258fda,_0x4155e4,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x493557);}else for(_0x5bedea=(-0x9e*-0x35+0x2ef*0x1+-0x1*0x23a4)/Math['pow'](-0x206f+0x228a+-0x219*0x1,_0x4155e4),_0x258fda=-0x4*0x4bd+-0x1*-0x20d7+0x2d*-0x4f;_0x258fda<-0x812*-0x2+0x748+0x4ae*-0x5;_0x258fda++){if(!_0x4020be['_levelsUpd'+'ated'][0x24a1+-0x1f89+-0x1*0x518][_0x258fda])continue;const _0xd57bd1=_0x1ac66f[_0x258fda];_0x4020be['_compresse'+'d']?this['_glCreated']&&_0xd57bd1?_0x14d80d['compressed'+'TexSubImag'+'e2D'](_0x14d80d['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x258fda,_0x4155e4,0x114a+-0x1*0x22df+-0x283*-0x7,0x927+-0x697+0xa4*-0x4,Math['max'](_0x4020be['_width']*_0x5bedea,-0x5e9+0x1612+0x1*-0x1028),Math['max'](_0x4020be['_height']*_0x5bedea,-0xb1b*0x1+0x1f72+-0x1456),this['_glInterna'+'lFormat'],_0xd57bd1):_0x14d80d['compressed'+'TexImage2D'](_0x14d80d['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x258fda,_0x4155e4,this['_glInterna'+'lFormat'],Math['max'](_0x4020be['_width']*_0x5bedea,-0x1c54+0x144+0x29*0xa9),Math['max'](_0x4020be['_height']*_0x5bedea,-0x1*0x44+-0x3b6*0x8+0x1df5),0x1b67+0x17ae+-0x3315,_0xd57bd1):(_0x36413f['setUnpackF'+'lipY'](!(0x48c+0x18b7+-0x1d42)),_0x36413f['setUnpackP'+'remultiply'+'Alpha'](_0x4020be['_premultip'+'lyAlpha']),this['_glCreated']&&_0xd57bd1?_0x14d80d['texSubImag'+'e2D'](_0x14d80d['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x258fda,_0x4155e4,0x52*0x2+0x65*-0x11+0x611,0x162f+0x90e+-0x1f3d,Math['max'](_0x4020be['_width']*_0x5bedea,0x9a5+-0x1863*0x1+0x19*0x97),Math['max'](_0x4020be['_height']*_0x5bedea,0x1cfa+-0x18ba+-0x43f*0x1),this['_glFormat'],this['_glPixelTy'+'pe'],_0xd57bd1):_0x14d80d['texImage2D'](_0x14d80d['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x258fda,_0x4155e4,this['_glInterna'+'lFormat'],Math['max'](_0x4020be['_width']*_0x5bedea,0x2dc+0x5ea+-0x1*0x8c5),Math['max'](_0x4020be['_height']*_0x5bedea,0x1f47+0x256e+-0x44b4),-0x1892+-0x632+-0x1ec4*-0x1,this['_glFormat'],this['_glPixelTy'+'pe'],_0xd57bd1));}}else{if(_0x4020be['_volume'])_0x4020be['_compresse'+'d']?_0x14d80d['compressed'+'TexImage3D'](_0x14d80d['TEXTURE_3D'],_0x4155e4,this['_glInterna'+'lFormat'],Math['max'](_0x4020be['_width']*_0x5bedea,0xd8e*-0x1+0x22da+-0x154b),Math['max'](_0x4020be['_height']*_0x5bedea,-0x124f+0x920+0x8*0x126),Math['max'](_0x4020be['_depth']*_0x5bedea,0x1bab+0xe7d*0x1+-0x2a27),-0x2ec*0x3+-0xc*0xc2+0x11dc,_0x1ac66f):(_0x36413f['setUnpackF'+'lipY'](!(-0xcf1+0x2*-0xf39+-0x4*-0xad9)),_0x36413f['setUnpackP'+'remultiply'+'Alpha'](_0x4020be['_premultip'+'lyAlpha']),_0x14d80d['texImage3D'](_0x14d80d['TEXTURE_3D'],_0x4155e4,this['_glInterna'+'lFormat'],Math['max'](_0x4020be['_width']*_0x5bedea,0x5c*-0x5e+-0xcad+0x272*0x13),Math['max'](_0x4020be['_height']*_0x5bedea,0x1ad*-0x7+0x154c+-0x990),Math['max'](_0x4020be['_depth']*_0x5bedea,0x2*0xc8e+0x98+-0x19b3),0xb46+-0x1*-0x96d+-0x14b3,this['_glFormat'],this['_glPixelTy'+'pe'],_0x1ac66f));else{if(_0x4020be['array']&&typeof _0x1ac66f=='object'){if(_0x4020be['_arrayLeng'+'th']===_0x1ac66f['length']){if(_0x4020be['_compresse'+'d']){for(let _0xdd0197=-0xd21*0x1+0xd32*-0x2+0x2785;_0xdd0197<_0x4020be['_arrayLeng'+'th'];_0xdd0197++)_0x14d80d['compressed'+'TexSubImag'+'e3D'](_0x14d80d['TEXTURE_2D'+'_ARRAY'],_0x4155e4,-0x17d*0x15+-0x2586+0x44c7,0x260d+0x830+-0x2e3d,_0xdd0197,Math['max'](Math['floor'](_0x4020be['_width']*_0x5bedea),0x6*0x5ae+0x166c+-0x387f),Math['max'](Math['floor'](_0x4020be['_height']*_0x5bedea),-0x10c3*0x2+0x355*0x3+0x1788),0x5a3+-0x23e*-0xd+-0x38*0x9f,this['_glInterna'+'lFormat'],_0x1ac66f[_0xdd0197]);}else{for(let _0x50f700=-0x147a+0x1*0x806+0xc74;_0x50f700<_0x4020be['_arrayLeng'+'th'];_0x50f700++)_0x14d80d['texSubImag'+'e3D'](_0x14d80d['TEXTURE_2D'+'_ARRAY'],_0x4155e4,-0x17af*-0x1+-0x7d*0x1+-0x1732,0xcf2+-0xae4+0x20e*-0x1,_0x50f700,Math['max'](Math['floor'](_0x4020be['_width']*_0x5bedea),0x1b15+0x1aa3+-0x35b7*0x1),Math['max'](Math['floor'](_0x4020be['_height']*_0x5bedea),-0x1*-0x1a19+0x106d+0x5*-0x881),-0x3*0x326+0x17*-0x4e+-0x1*-0x1075,this['_glFormat'],this['_glPixelTy'+'pe'],_0x1ac66f[_0x50f700]);}}}else{if(_0x36413f['_isBrowser'+'Interface'](_0x1ac66f)){_0x36413f['_isImageBr'+'owserInter'+'face'](_0x1ac66f)&&(_0x1ac66f['width']>_0x36413f['maxTexture'+'Size']||_0x1ac66f['height']>_0x36413f['maxTexture'+'Size'])&&(_0x1ac66f=Fm(_0x1ac66f,_0x36413f['maxTexture'+'Size']),_0x4155e4===-0x17bb+-0x12af+-0x59*-0x7a&&(_0x4020be['_width']=_0x1ac66f['width'],_0x4020be['_height']=_0x1ac66f['height']));const _0x58908f=_0x1ac66f['width']||_0x1ac66f['videoWidth'],_0x3890af=_0x1ac66f['height']||_0x1ac66f['videoHeigh'+'t'];_0x36413f['setUnpackF'+'lipY'](_0x4020be['_flipY']),_0x36413f['setUnpackP'+'remultiply'+'Alpha'](_0x4020be['_premultip'+'lyAlpha']),this['_glCreated']&&_0x4020be['_width']===_0x58908f&&_0x4020be['_height']===_0x3890af&&!_0x36413f['_isImageVi'+'deoInterfa'+'ce'](_0x1ac66f)?_0x14d80d['texSubImag'+'e2D'](_0x14d80d['TEXTURE_2D'],_0x4155e4,-0x16e7+0x1e0b*0x1+-0x724*0x1,-0x12*0x95+-0x5f1+0x9*0x1d3,this['_glFormat'],this['_glPixelTy'+'pe'],_0x1ac66f):(_0x14d80d['texImage2D'](_0x14d80d['TEXTURE_2D'],_0x4155e4,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x1ac66f),_0x4155e4===-0x1f65+-0x267*0x3+0x269a&&(_0x4020be['_width']=_0x58908f,_0x4020be['_height']=_0x3890af));}else _0x5bedea=(0x12d7*0x1+-0x12d9*0x1+0x3*0x1)/Math['pow'](0xc*0x23b+-0x15e8+-0x4da,_0x4155e4),_0x4020be['_compresse'+'d']?this['_glCreated']&&_0x1ac66f?_0x14d80d['compressed'+'TexSubImag'+'e2D'](_0x14d80d['TEXTURE_2D'],_0x4155e4,-0x3*-0x5f3+0x1fa0+-0x3179,-0x3*0x57b+-0x103+0x1174,Math['max'](Math['floor'](_0x4020be['_width']*_0x5bedea),-0x3d6*-0x3+0x1d8*-0x7+-0x1*-0x167),Math['max'](Math['floor'](_0x4020be['_height']*_0x5bedea),0x1*-0x1f97+0x110*-0xc+-0x3b2*-0xc),this['_glInterna'+'lFormat'],_0x1ac66f):_0x14d80d['compressed'+'TexImage2D'](_0x14d80d['TEXTURE_2D'],_0x4155e4,this['_glInterna'+'lFormat'],Math['max'](Math['floor'](_0x4020be['_width']*_0x5bedea),0x12d1+-0x10bd+-0x213),Math['max'](Math['floor'](_0x4020be['_height']*_0x5bedea),-0xb*0x357+-0x1488+0x3946),0x256f+-0x1805+-0xd6a,_0x1ac66f):(_0x36413f['setUnpackF'+'lipY'](!(-0x397+0x3*-0xa1f+0x21f5)),_0x36413f['setUnpackP'+'remultiply'+'Alpha'](_0x4020be['_premultip'+'lyAlpha']),this['_glCreated']&&_0x1ac66f?_0x14d80d['texSubImag'+'e2D'](_0x14d80d['TEXTURE_2D'],_0x4155e4,-0xfa4+0xca+-0xeda*-0x1,0x165*0x7+0x9*-0x2f3+-0x2cc*-0x6,Math['max'](_0x4020be['_width']*_0x5bedea,-0x195b+-0x2198+-0x2*-0x1d7a),Math['max'](_0x4020be['_height']*_0x5bedea,0x10c3*-0x1+0x1dde+0x56*-0x27),this['_glFormat'],this['_glPixelTy'+'pe'],_0x1ac66f):_0x14d80d['texImage2D'](_0x14d80d['TEXTURE_2D'],_0x4155e4,this['_glInterna'+'lFormat'],Math['max'](_0x4020be['_width']*_0x5bedea,-0x11*0xc3+0x1*-0x7a2+-0xa4b*-0x2),Math['max'](_0x4020be['_height']*_0x5bedea,-0x1e6+-0x164*-0x8+0x939*-0x1),-0xdea+-0x1955+0x273f,this['_glFormat'],this['_glPixelTy'+'pe'],_0x1ac66f));_0x4155e4===-0x1e60+-0x1335+-0x3195*-0x1?_0x4020be['_mipmapsUp'+'loaded']=!(0x151*0xe+-0x15bb*-0x1+-0x2828):_0x4020be['_mipmapsUp'+'loaded']=!(0x1219+0x1ef7*0x1+-0x3110);}}}_0x4155e4++;}if(_0x4020be['_needsUplo'+'ad']){if(_0x4020be['_cubemap']){for(let _0x44dfcb=-0x1ac*0x13+-0x4*0x34f+-0x6*-0x780;_0x44dfcb<-0x1c*-0x145+-0x2b*0xd+-0x2157;_0x44dfcb++)_0x4020be['_levelsUpd'+'ated'][0x6f7*0x4+0x1ba4+-0x3780][_0x44dfcb]=!(0x4*-0x350+-0xef4+0x1c35);}else _0x4020be['_levelsUpd'+'ated'][-0x1aa0+-0x42e+0x1ece]=!(-0x1ee6+0x1c0a+0x2dd);}!_0x4020be['_compresse'+'d']&&!_0x4020be['_integerFo'+'rmat']&&_0x4020be['_mipmaps']&&_0x4020be['_needsMipm'+'apsUpload']&&_0x4020be['_levels']['length']===-0x1595+-0x1bbe+0x3154&&(_0x14d80d['generateMi'+'pmap'](this['_glTarget']),_0x4020be['_mipmapsUp'+'loaded']=!(-0x1c1d+-0x124c+-0x6d*-0x6d)),_0x4020be['_gpuSize']&&_0x4020be['adjustVram'+'SizeTracki'+'ng'](_0x36413f['_vram'],-_0x4020be['_gpuSize']),_0x4020be['_gpuSize']=_0x4020be['gpuSize'],_0x4020be['adjustVram'+'SizeTracki'+'ng'](_0x36413f['_vram'],_0x4020be['_gpuSize']),this['_glCreated']=!(0x8b+-0x9a3*-0x1+-0x2*0x517);}['read'](_0x3b6fc6,_0x1d445b,_0xd3301,_0xedaf9c,_0x57816f){const _0x219242=this['texture'];return _0x219242['device']['readTextur'+'eAsync'](_0x219242,_0x3b6fc6,_0x1d445b,_0xd3301,_0xedaf9c,_0x57816f);}['write'](_0x37192b,_0xc904b2,_0x21085a,_0x38bf03,_0x5e99e9){const {texture:_0x4b3d45}=this,{device:_0x1d7ff8}=_0x4b3d45;return _0x1d7ff8['setTexture'](_0x4b3d45,0x5e3*-0x5+0x25*0xe1+0x1*-0x316),_0x1d7ff8['writeTextu'+'reAsync'](_0x4b3d45,_0x37192b,_0xc904b2,_0x21085a,_0x38bf03,_0x5e99e9);}}class yT{constructor(_0x5100e6,_0x59145e){h(this,'msaaFB'),h(this,'resolveFB'),(this['msaaFB']=_0x5100e6,this['resolveFB']=_0x59145e);}['destroy'](_0x5430cc){this['msaaFB']&&(_0x5430cc['deleteRend'+'erbuffer'](this['msaaFB']),this['msaaFB']=null),this['resolveFB']&&(_0x5430cc['deleteRend'+'erbuffer'](this['resolveFB']),this['resolveFB']=null);}}class vT{constructor(){h(this,'_glFrameBu'+'ffer',null),h(this,'_glDepthBu'+'ffer',null),h(this,'_glResolve'+'FrameBuffe'+'r',null),h(this,'colorMrtFr'+'amebuffers',null),h(this,'_glMsaaCol'+'orBuffers',[]),h(this,'_glMsaaDep'+'thBuffer',null),h(this,'msaaDepthB'+'ufferKey'),h(this,'suppliedCo'+'lorFramebu'+'ffer'),h(this,'_isInitial'+'ized',!(-0x1*-0x7e3+-0x5e*0x29+0x9*0xcc));}['destroy'](_0x343c2d){var _0x28de94;const _0x14ac9f=_0x343c2d['gl'];this['_isInitial'+'ized']=!(-0x1*0x1075+-0x1*0x11bf+0x2235),this['_glFrameBu'+'ffer']&&(this['_glFrameBu'+'ffer']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x14ac9f['deleteFram'+'ebuffer'](this['_glFrameBu'+'ffer']),this['_glFrameBu'+'ffer']=null),this['_glDepthBu'+'ffer']&&(_0x14ac9f['deleteRend'+'erbuffer'](this['_glDepthBu'+'ffer']),this['_glDepthBu'+'ffer']=null),this['_glResolve'+'FrameBuffe'+'r']&&(this['_glResolve'+'FrameBuffe'+'r']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x14ac9f['deleteFram'+'ebuffer'](this['_glResolve'+'FrameBuffe'+'r']),this['_glResolve'+'FrameBuffe'+'r']=null),this['_glMsaaCol'+'orBuffers']['forEach'](_0x46015d=>{_0x14ac9f['deleteRend'+'erbuffer'](_0x46015d);}),this['_glMsaaCol'+'orBuffers']['length']=0x61+0x1*0x20ed+-0x214e,(_0x28de94=this['colorMrtFr'+'amebuffers'])==null||_0x28de94['forEach'](_0x34edda=>{_0x34edda['destroy'](_0x14ac9f);}),this['colorMrtFr'+'amebuffers']=null,this['_glMsaaDep'+'thBuffer']&&(this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']&&ud(_0x343c2d)['release'](this['msaaDepthB'+'ufferKey'])),this['suppliedCo'+'lorFramebu'+'ffer']=void(-0x1387*-0x1+-0x251f+0x1198);}get['initialize'+'d'](){return this['_isInitial'+'ized'];}['init'](_0x1f42b2,_0x7fb5ae){var _0x544cee,_0x26c6c9;const _0x482c35=_0x1f42b2['gl'];w['assert'](!this['_isInitial'+'ized'],'Render\x20tar'+'get\x20alread'+'y\x20initiali'+'zed.'),this['_isInitial'+'ized']=!(-0x507+-0x3*-0x6e3+-0xfa2);const _0x22375d=[];if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(-0x197*-0x15+-0x1*0x1ca0+-0x4c3))this['_glFrameBu'+'ffer']=this['suppliedCo'+'lorFramebu'+'ffer'];else{w['call'](()=>{(_0x7fb5ae['width']<=-0x95*-0x42+0x12*-0xd7+-0x174c||_0x7fb5ae['height']<=-0xac0+0x189b+-0xddb)&&w['warnOnce']('Invalid\x20re'+'nder\x20targe'+'t\x20size:\x20'+_0x7fb5ae['width']+'\x20x\x20'+_0x7fb5ae['height'],_0x7fb5ae);}),this['_glFrameBu'+'ffer']=_0x482c35['createFram'+'ebuffer'](),_0x1f42b2['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x4be677=((_0x544cee=_0x7fb5ae['_colorBuff'+'ers'])==null?void(0x1*-0x2429+-0x3*0x208+0x1*0x2a41):_0x544cee['length'])??-0x2596+0x18fa+-0x10d*-0xc,_0x3ccfb9=_0x482c35['COLOR_ATTA'+'CHMENT0'];for(let _0x181178=-0x17a8+0xfef*0x1+0x7b9;_0x181178<_0x4be677;++_0x181178){const _0x1230fb=_0x7fb5ae['getColorBu'+'ffer'](_0x181178);_0x1230fb&&(_0x1230fb['impl']['_glTexture']||(_0x1230fb['_width']=Math['min'](_0x1230fb['width'],_0x1f42b2['maxRenderB'+'ufferSize']),_0x1230fb['_height']=Math['min'](_0x1230fb['height'],_0x1f42b2['maxRenderB'+'ufferSize']),_0x1f42b2['setTexture'](_0x1230fb,0x4*0x64f+-0x2372+0xa36)),_0x482c35['framebuffe'+'rTexture2D'](_0x482c35['FRAMEBUFFE'+'R'],_0x3ccfb9+_0x181178,_0x1230fb['_cubemap']?_0x482c35['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x7fb5ae['_face']:_0x482c35['TEXTURE_2D'],_0x1230fb['impl']['_glTexture'],_0x7fb5ae['mipLevel']),_0x22375d['push'](_0x3ccfb9+_0x181178));}_0x482c35['drawBuffer'+'s'](_0x22375d);const _0x2ee931=_0x7fb5ae['_depthBuff'+'er'];if(_0x2ee931||_0x7fb5ae['_depth']){const _0x1d1947=_0x7fb5ae['_stencil']?_0x482c35['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x482c35['DEPTH_ATTA'+'CHMENT'];if(_0x2ee931)_0x2ee931['impl']['_glTexture']||(_0x2ee931['_width']=Math['min'](_0x2ee931['width'],_0x1f42b2['maxRenderB'+'ufferSize']),_0x2ee931['_height']=Math['min'](_0x2ee931['height'],_0x1f42b2['maxRenderB'+'ufferSize']),_0x1f42b2['setTexture'](_0x2ee931,-0xda9+-0x1ca9+0x2a52)),_0x482c35['framebuffe'+'rTexture2D'](_0x482c35['FRAMEBUFFE'+'R'],_0x1d1947,_0x2ee931['_cubemap']?_0x482c35['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x7fb5ae['_face']:_0x482c35['TEXTURE_2D'],_0x7fb5ae['_depthBuff'+'er']['impl']['_glTexture'],_0x7fb5ae['mipLevel']);else{if(!(_0x7fb5ae['_samples']>-0x317*-0x5+-0x1*0xd91+-0x1e1)){this['_glDepthBu'+'ffer']||(this['_glDepthBu'+'ffer']=_0x482c35['createRend'+'erbuffer']());const _0x57d7ad=_0x7fb5ae['_stencil']?_0x482c35['DEPTH24_ST'+'ENCIL8']:_0x482c35['DEPTH_COMP'+'ONENT32F'];_0x482c35['bindRender'+'buffer'](_0x482c35['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x482c35['renderbuff'+'erStorage'](_0x482c35['RENDERBUFF'+'ER'],_0x57d7ad,_0x7fb5ae['width'],_0x7fb5ae['height']),_0x482c35['framebuffe'+'rRenderbuf'+'fer'](_0x482c35['FRAMEBUFFE'+'R'],_0x1d1947,_0x482c35['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x482c35['bindRender'+'buffer'](_0x482c35['RENDERBUFF'+'ER'],null);}}}w['call'](()=>this['_checkFbo'](_0x1f42b2,_0x7fb5ae));}if(_0x7fb5ae['_samples']>0xd8e+-0x128f*0x1+0x502){this['_glResolve'+'FrameBuffe'+'r']=this['_glFrameBu'+'ffer'],this['_glFrameBu'+'ffer']=_0x482c35['createFram'+'ebuffer'](),_0x1f42b2['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x5c259b=((_0x26c6c9=_0x7fb5ae['_colorBuff'+'ers'])==null?void(-0x2096+0x605+0x1a91):_0x26c6c9['length'])??0x6*-0x11b+0x262*0xe+0x137*-0x16;if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(-0x1b72+0x16a*-0x16+0x3a8e)){const _0x348661=_0x482c35['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0x348661);const _0x1b0852=_0x1f42b2['backBuffer'+'Format']===Ne?_0x482c35['RGBA8']:_0x482c35['RGB8'];_0x482c35['bindRender'+'buffer'](_0x482c35['RENDERBUFF'+'ER'],_0x348661),_0x482c35['renderbuff'+'erStorageM'+'ultisample'](_0x482c35['RENDERBUFF'+'ER'],_0x7fb5ae['_samples'],_0x1b0852,_0x7fb5ae['width'],_0x7fb5ae['height']),_0x482c35['framebuffe'+'rRenderbuf'+'fer'](_0x482c35['FRAMEBUFFE'+'R'],_0x482c35['COLOR_ATTA'+'CHMENT0'],_0x482c35['RENDERBUFF'+'ER'],_0x348661);}else for(let _0x120c26=-0x3*0xc56+0x65*0x2b+0x140b;_0x120c26<_0x5c259b;++_0x120c26){const _0x49fe8b=_0x7fb5ae['getColorBu'+'ffer'](_0x120c26);if(_0x49fe8b){const _0xcd0e8d=_0x482c35['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0xcd0e8d),_0x482c35['bindRender'+'buffer'](_0x482c35['RENDERBUFF'+'ER'],_0xcd0e8d),_0x482c35['renderbuff'+'erStorageM'+'ultisample'](_0x482c35['RENDERBUFF'+'ER'],_0x7fb5ae['_samples'],_0x49fe8b['impl']['_glInterna'+'lFormat'],_0x7fb5ae['width'],_0x7fb5ae['height']),_0x482c35['framebuffe'+'rRenderbuf'+'fer'](_0x482c35['FRAMEBUFFE'+'R'],_0x482c35['COLOR_ATTA'+'CHMENT0']+_0x120c26,_0x482c35['RENDERBUFF'+'ER'],_0xcd0e8d);}}if(_0x7fb5ae['_depth']){w['assert'](!this['_glMsaaDep'+'thBuffer']);const _0x4df871=_0x7fb5ae['_stencil']?_0x482c35['DEPTH24_ST'+'ENCIL8']:_0x482c35['DEPTH_COMP'+'ONENT32F'],_0x141812=_0x7fb5ae['_stencil']?_0x482c35['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x482c35['DEPTH_ATTA'+'CHMENT'];let _0x52d08d;const _0x5bc23a=_0x7fb5ae['_depthBuff'+'er'];_0x5bc23a&&(_0x52d08d=_0x5bc23a['id']+':'+_0x7fb5ae['width']+':'+_0x7fb5ae['height']+':'+_0x7fb5ae['_samples']+':'+_0x4df871+':'+_0x141812,this['_glMsaaDep'+'thBuffer']=ud(_0x1f42b2)['get'](_0x52d08d)),this['_glMsaaDep'+'thBuffer']||(this['_glMsaaDep'+'thBuffer']=_0x482c35['createRend'+'erbuffer'](),_0x482c35['bindRender'+'buffer'](_0x482c35['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']),_0x482c35['renderbuff'+'erStorageM'+'ultisample'](_0x482c35['RENDERBUFF'+'ER'],_0x7fb5ae['_samples'],_0x4df871,_0x7fb5ae['width'],_0x7fb5ae['height']),this['_glMsaaDep'+'thBuffer']['destroy']=function(){_0x482c35['deleteRend'+'erbuffer'](this);},_0x5bc23a&&ud(_0x1f42b2)['set'](_0x52d08d,this['_glMsaaDep'+'thBuffer'])),this['msaaDepthB'+'ufferKey']=_0x52d08d,_0x482c35['framebuffe'+'rRenderbuf'+'fer'](_0x482c35['FRAMEBUFFE'+'R'],_0x141812,_0x482c35['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']);}w['call'](()=>this['_checkFbo'](_0x1f42b2,_0x7fb5ae,'MSAA')),_0x5c259b>0x1*0x130d+0x12d5+-0x25e1&&(this['_createMsa'+'aMrtFrameb'+'uffers'](_0x1f42b2,_0x7fb5ae,_0x5c259b),_0x1f42b2['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']),_0x482c35['drawBuffer'+'s'](_0x22375d));}}['_createMsa'+'aMrtFrameb'+'uffers'](_0x1a4676,_0x1ad1a3,_0x29160f){const _0x34f302=_0x1a4676['gl'];this['colorMrtFr'+'amebuffers']=[];for(let _0x3098d1=-0x1d9+0x1*-0x2709+0x28e2;_0x3098d1<_0x29160f;++_0x3098d1){const _0x2e56a0=_0x1ad1a3['getColorBu'+'ffer'](_0x3098d1),_0x8f2c67=_0x34f302['createFram'+'ebuffer']();_0x1a4676['setFramebu'+'ffer'](_0x8f2c67);const _0x4e426f=this['_glMsaaCol'+'orBuffers'][_0x3098d1];_0x34f302['bindRender'+'buffer'](_0x34f302['RENDERBUFF'+'ER'],_0x4e426f),_0x34f302['renderbuff'+'erStorageM'+'ultisample'](_0x34f302['RENDERBUFF'+'ER'],_0x1ad1a3['_samples'],_0x2e56a0['impl']['_glInterna'+'lFormat'],_0x1ad1a3['width'],_0x1ad1a3['height']),_0x34f302['framebuffe'+'rRenderbuf'+'fer'](_0x34f302['FRAMEBUFFE'+'R'],_0x34f302['COLOR_ATTA'+'CHMENT0'],_0x34f302['RENDERBUFF'+'ER'],_0x4e426f),_0x34f302['drawBuffer'+'s']([_0x34f302['COLOR_ATTA'+'CHMENT0']]),w['call'](()=>this['_checkFbo'](_0x1a4676,_0x1ad1a3,'MSAA-MRT-s'+'rc'+_0x3098d1));const _0x48e1e4=_0x34f302['createFram'+'ebuffer']();_0x1a4676['setFramebu'+'ffer'](_0x48e1e4),_0x34f302['framebuffe'+'rTexture2D'](_0x34f302['FRAMEBUFFE'+'R'],_0x34f302['COLOR_ATTA'+'CHMENT0'],_0x2e56a0['_cubemap']?_0x34f302['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x1ad1a3['_face']:_0x34f302['TEXTURE_2D'],_0x2e56a0['impl']['_glTexture'],-0x1ca1*-0x1+-0x235f+-0x1*-0x6be),this['colorMrtFr'+'amebuffers'][_0x3098d1]=new yT(_0x8f2c67,_0x48e1e4),w['call'](()=>this['_checkFbo'](_0x1a4676,_0x1ad1a3,'MSAA-MRT-d'+'st'+_0x3098d1));}}['_checkFbo'](_0x2ced9e,_0x2d78ea,_0x490321=''){const _0x1e6801=_0x2ced9e['gl'],_0x2e0a15=_0x1e6801['checkFrame'+'bufferStat'+'us'](_0x1e6801['FRAMEBUFFE'+'R']);let _0x90dbac;switch(_0x2e0a15){case _0x1e6801['FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT']:_0x90dbac='FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT';break;case _0x1e6801['FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T']:_0x90dbac='FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T';break;case _0x1e6801['FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS']:_0x90dbac='FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS';break;case _0x1e6801['FRAMEBUFFE'+'R_UNSUPPOR'+'TED']:_0x90dbac='FRAMEBUFFE'+'R_UNSUPPOR'+'TED';break;}w['assert'](!_0x90dbac,'Framebuffe'+'r\x20creation'+'\x20failed\x20wi'+'th\x20error\x20c'+'ode\x20'+_0x90dbac+(',\x20render\x20t'+'arget:\x20')+_0x2d78ea['name']+'\x20'+_0x490321,_0x2d78ea);}['loseContex'+'t'](){this['_glFrameBu'+'ffer']=null,this['_glDepthBu'+'ffer']=null,this['_glResolve'+'FrameBuffe'+'r']=null,this['_glMsaaCol'+'orBuffers']['length']=0x1885+0xac8+0x234d*-0x1,this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']=void(0x2*-0xad0+0x15dd*-0x1+0x2b7d),this['colorMrtFr'+'amebuffers']=null,this['suppliedCo'+'lorFramebu'+'ffer']=void(-0x2*0xb8d+0x983+0x31*0x47),this['_isInitial'+'ized']=!(-0x916*-0x1+0x74b*0x1+-0x1060);}['internalRe'+'solve'](_0x3eadf1,_0x2ea41f,_0x3a53ea,_0x1fbd8a,_0x1c691c){w['assert'](_0x2ea41f!==_0x3a53ea,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0x3eadf1['setScissor'](-0x6e4+-0x1397+0x1a7b,-0x8*-0x141+-0x10e8+0x6e0,_0x1fbd8a['width'],_0x1fbd8a['height']);const _0x115add=_0x3eadf1['gl'];_0x115add['bindFrameb'+'uffer'](_0x115add['READ_FRAME'+'BUFFER'],_0x2ea41f),_0x115add['bindFrameb'+'uffer'](_0x115add['DRAW_FRAME'+'BUFFER'],_0x3a53ea),_0x115add['blitFrameb'+'uffer'](0x1d39+0x7a9+-0x24e2,-0x2*-0xc68+0x1*-0x99b+-0xe5*0x11,_0x1fbd8a['width'],_0x1fbd8a['height'],-0x6c0+0xcd*-0x1f+0x1*0x1f93,0x2158+0x212d+-0x4285,_0x1fbd8a['width'],_0x1fbd8a['height'],_0x1c691c,_0x115add['NEAREST']);}['resolve'](_0x1eba03,_0x49d0b9,_0x183e93,_0x465f17){const _0x195968=_0x1eba03['gl'];if(this['colorMrtFr'+'amebuffers']){if(_0x183e93)for(let _0x192085=-0xb8+0xf3a+-0x26b*0x6;_0x192085<this['colorMrtFr'+'amebuffers']['length'];_0x192085++){const _0x39a2a0=this['colorMrtFr'+'amebuffers'][_0x192085];Q['pushGpuMar'+'ker'](_0x1eba03,'RESOLVE-MR'+'T'+_0x192085),this['internalRe'+'solve'](_0x1eba03,_0x39a2a0['msaaFB'],_0x39a2a0['resolveFB'],_0x49d0b9,_0x195968['COLOR_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x1eba03);}_0x465f17&&(Q['pushGpuMar'+'ker'](_0x1eba03,'RESOLVE-MR'+'T-DEPTH'),this['internalRe'+'solve'](_0x1eba03,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x49d0b9,_0x195968['DEPTH_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x1eba03));}else Q['pushGpuMar'+'ker'](_0x1eba03,'RESOLVE'),this['internalRe'+'solve'](_0x1eba03,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x49d0b9,(_0x183e93?_0x195968['COLOR_BUFF'+'ER_BIT']:0x24e1*-0x1+0x8e9*-0x1+0x2dca)|(_0x465f17?_0x195968['DEPTH_BUFF'+'ER_BIT']:0x3*-0x940+-0x844*-0x1+0xac*0x1d)),Q['popGpuMark'+'er'](_0x1eba03);_0x195968['bindFrameb'+'uffer'](_0x195968['FRAMEBUFFE'+'R'],this['_glFrameBu'+'ffer']);}}class xT{constructor(){h(this,'renderVers'+'ion'),h(this,'queries',[]);}['destroy'](_0x5b1fa3){this['queries']['forEach'](_0x1b1916=>_0x5b1fa3['deleteQuer'+'y'](_0x1b1916)),this['queries']=null;}}class TT extends cT{constructor(_0x31e3d0){super(),h(this,'device'),h(this,'freeQuerie'+'s',[]),h(this,'frameQueri'+'es',[]),h(this,'previousFr'+'ameQueries',[]),h(this,'timings',[]),(this['device']=_0x31e3d0,this['ext']=_0x31e3d0['extDisjoin'+'tTimerQuer'+'y']);}['destroy'](){this['freeQuerie'+'s']['forEach'](_0xe9e0f1=>this['device']['gl']['deleteQuer'+'y'](_0xe9e0f1)),this['frameQueri'+'es']['forEach'](_0x21e43a=>this['device']['gl']['deleteQuer'+'y'](_0x21e43a)),this['previousFr'+'ameQueries']['forEach'](_0x2f172f=>_0x2f172f['destroy'](this['device']['gl'])),this['freeQuerie'+'s']=null,this['frameQueri'+'es']=null,this['previousFr'+'ameQueries']=null;}['loseContex'+'t'](){super['loseContex'+'t'](),this['freeQuerie'+'s']=[],this['frameQueri'+'es']=[],this['previousFr'+'ameQueries']=[];}['restoreCon'+'text'](){this['ext']=this['device']['extDisjoin'+'tTimerQuer'+'y'];}['getQuery'](){return this['freeQuerie'+'s']['pop']()??this['device']['gl']['createQuer'+'y']();}['start'](_0x1b4f58){if(this['ext']){const _0x909078=this['getSlot'](_0x1b4f58),_0x2a804f=this['getQuery']();return this['frameQueri'+'es'][_0x909078]=_0x2a804f,this['device']['gl']['beginQuery'](this['ext']['TIME_ELAPS'+'ED_EXT'],_0x2a804f),_0x909078;}}['end'](_0x17247e){_0x17247e!==void(-0x997+-0x313*0x4+0x15e3)&&this['device']['gl']['endQuery'](this['ext']['TIME_ELAPS'+'ED_EXT']);}['frameStart'](){this['processEna'+'bleRequest'](),this['_enabled']&&(this['frameGPUMa'+'rkerSlot']=this['start']('GpuFrame'));}['frameEnd'](){this['_enabled']&&this['end'](this['frameGPUMa'+'rkerSlot']);}['request'](){if(this['_enabled']){const _0x231f0e=this['ext'],_0x4c49fc=this['device']['gl'],_0x175948=this['device']['renderVers'+'ion'],_0x230ede=this['frameQueri'+'es'];if(_0x230ede['length']>-0x19cb*-0x1+0x75*-0x54+0xc99){this['frameQueri'+'es']=[];const _0x47af32=new xT();_0x47af32['queries']=_0x230ede,_0x47af32['renderVers'+'ion']=_0x175948,this['previousFr'+'ameQueries']['push'](_0x47af32);}if(this['previousFr'+'ameQueries']['length']>0x1354+-0x3f+-0x1315){const _0x50e1e1=this['previousFr'+'ameQueries'][0xe*-0xe1+-0x1*0x1d4f+0x9f*0x43],_0x43290d=_0x50e1e1['queries'],_0x55de5c=_0x43290d[_0x43290d['length']-(0x34*0x2+-0x222c+0x5f*0x5b)],_0x22d64f=_0x4c49fc['getQueryPa'+'rameter'](_0x55de5c,_0x4c49fc['QUERY_RESU'+'LT_AVAILAB'+'LE']),_0x2f3df4=_0x4c49fc['getParamet'+'er'](_0x231f0e['GPU_DISJOI'+'NT_EXT']);if(_0x22d64f&&!_0x2f3df4){this['previousFr'+'ameQueries']['shift']();const _0x50880b=this['timings'];_0x50880b['length']=0x4*-0x793+-0x7fd+0x9*0x441;for(let _0x3780b5=0x2e4*-0xb+0x1cf+0x1dfd;_0x3780b5<_0x43290d['length'];_0x3780b5++){const _0x58c84e=_0x43290d[_0x3780b5],_0x5f0334=_0x4c49fc['getQueryPa'+'rameter'](_0x58c84e,_0x4c49fc['QUERY_RESU'+'LT']);_0x50880b[_0x3780b5]=_0x5f0334*(-0x1*-0x14a1+0x317*0x7+-0x9*0x4b2+0.000001),this['freeQuerie'+'s']['push'](_0x58c84e);}this['report'](_0x50e1e1['renderVers'+'ion'],_0x50880b);}_0x2f3df4&&(this['previousFr'+'ameQueries']['forEach'](_0x2b172b=>{this['report'](_0x2b172b['renderVers'+'ion'],null),_0x2b172b['destroy'](_0x4c49fc);}),this['previousFr'+'ameQueries']['length']=-0x229c+-0x20e1+0x437d);}super['request'](_0x175948);}}}const ba=[];class wT extends $e{constructor(_0x3fe805,_0x5ac694={}){super(_0x3fe805,_0x5ac694),h(this,'gl'),h(this,'_defaultFr'+'amebuffer',null),h(this,'_defaultFr'+'amebufferC'+'hanged',!(0x59*-0xa+-0x9*-0x1f2+-0xe07)),(_0x5ac694=this['initOption'+'s'],this['updateClie'+'ntRect'](),this['initTextur'+'eUnits'](),this['contextLos'+'t']=!(-0x1106*-0x2+0x1*0xaf9+0x1*-0x2d04),this['_contextLo'+'stHandler']=_0x4fb458=>{_0x4fb458['preventDef'+'ault'](),this['loseContex'+'t'](),w['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20lost.'),this['fire']('devicelost');},this['_contextRe'+'storedHand'+'ler']=()=>{w['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20restore'+'d.'),this['restoreCon'+'text'](),this['fire']('devicerest'+'ored');});const _0x5a3937=typeof navigator<'u'&&navigator['userAgent'];if(this['forceDisab'+'leMultisam'+'pling']=_0x5a3937&&_0x5a3937['includes']('AppleWebKi'+'t')&&(_0x5a3937['includes']('15.4')||_0x5a3937['includes']('15_4')),this['forceDisab'+'leMultisam'+'pling']&&(_0x5ac694['antialias']=!(-0x1*-0x17cb+-0x22de+0xb14),w['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'AppleWebKi'+'t\x2015.4')),Me['browserNam'+'e']==='firefox'){const _0x1f0dcb=(typeof navigator<'u'?navigator['userAgent']:'')['match'](/Firefox\/(\d+(\.\d+)*)/),_0x56655a=_0x1f0dcb?_0x1f0dcb[0x24a*-0x9+-0x176b+0x2c06]:null;if(_0x56655a){const _0x370fe1=parseFloat(_0x56655a);(Me['name']==='windows'&&(_0x370fe1>=-0x279*-0x5+0x19c7+0x12d6*-0x2||_0x370fe1===0x162b+-0xb16*-0x3+-0x36fa)||Me['name']==='android'&&_0x370fe1>=-0xaad+0xb14+-0x1d*-0x1)&&(_0x5ac694['antialias']=!(0x14fa+0x1*-0x25bf+0x10c6),w['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'Firefox\x20'+Me['name']+('\x20platform\x20'+'version\x20')+_0x56655a));}}this['backBuffer'+'Antialias']=_0x5ac694['antialias']??!(-0x15b*0x4+-0x1*-0xe27+0x2*-0x45d),_0x5ac694['antialias']=!(0xc66*0x1+0x2*-0x1294+0x18c3);const _0x1ebd4a=_0x5ac694['gl']??_0x3fe805['getContext']('webgl2',_0x5ac694);if(!_0x1ebd4a)throw new Error('WebGL\x20not\x20'+'supported');this['gl']=_0x1ebd4a,this['isWebGL2']=!(-0x44e*-0x1+-0x8*0x202+0xbc2),this['_deviceTyp'+'e']=wx,this['updateBack'+'bufferForm'+'at'](null);const _0x376bc1=Me['browserNam'+'e']==='chrome',_0x1f423c=Me['browserNam'+'e']==='safari',_0x3dffdc=Me['browser']&&navigator['appVersion']['indexOf']('Mac')!==-(0x1f6a+-0x1bba+-0x29*0x17);this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']=_0x1f423c,this['_tempMacCh'+'romeBlitFr'+'amebufferW'+'orkaround']=_0x3dffdc&&_0x376bc1&&!_0x5ac694['alpha'],_0x3fe805['addEventLi'+'stener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(0x25a4*0x1+0x1684+-0x3c27)),_0x3fe805['addEventLi'+'stener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(0x36d*-0x3+-0x1*-0x1521+0xad9*-0x1)),this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes'](),this['createBack'+'buffer'](null),this['supportsIm'+'ageBitmap']=!_0x1f423c&&typeof ImageBitmap<'u',this['_samplerTy'+'pes']=new Set([_0x1ebd4a['SAMPLER_2D'],_0x1ebd4a['SAMPLER_CU'+'BE'],_0x1ebd4a['UNSIGNED_I'+'NT_SAMPLER'+'_2D'],_0x1ebd4a['INT_SAMPLE'+'R_2D'],_0x1ebd4a['SAMPLER_2D'+'_SHADOW'],_0x1ebd4a['SAMPLER_CU'+'BE_SHADOW'],_0x1ebd4a['SAMPLER_3D'],_0x1ebd4a['INT_SAMPLE'+'R_3D'],_0x1ebd4a['UNSIGNED_I'+'NT_SAMPLER'+'_3D'],_0x1ebd4a['SAMPLER_2D'+'_ARRAY'],_0x1ebd4a['INT_SAMPLE'+'R_2D_ARRAY'],_0x1ebd4a['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]),this['glAddress']=[_0x1ebd4a['REPEAT'],_0x1ebd4a['CLAMP_TO_E'+'DGE'],_0x1ebd4a['MIRRORED_R'+'EPEAT']],this['glBlendEqu'+'ation']=[_0x1ebd4a['FUNC_ADD'],_0x1ebd4a['FUNC_SUBTR'+'ACT'],_0x1ebd4a['FUNC_REVER'+'SE_SUBTRAC'+'T'],_0x1ebd4a['MIN'],_0x1ebd4a['MAX']],this['glBlendFun'+'ctionColor']=[_0x1ebd4a['ZERO'],_0x1ebd4a['ONE'],_0x1ebd4a['SRC_COLOR'],_0x1ebd4a['ONE_MINUS_'+'SRC_COLOR'],_0x1ebd4a['DST_COLOR'],_0x1ebd4a['ONE_MINUS_'+'DST_COLOR'],_0x1ebd4a['SRC_ALPHA'],_0x1ebd4a['SRC_ALPHA_'+'SATURATE'],_0x1ebd4a['ONE_MINUS_'+'SRC_ALPHA'],_0x1ebd4a['DST_ALPHA'],_0x1ebd4a['ONE_MINUS_'+'DST_ALPHA'],_0x1ebd4a['CONSTANT_C'+'OLOR'],_0x1ebd4a['ONE_MINUS_'+'CONSTANT_C'+'OLOR']],this['glBlendFun'+'ctionAlpha']=[_0x1ebd4a['ZERO'],_0x1ebd4a['ONE'],_0x1ebd4a['SRC_COLOR'],_0x1ebd4a['ONE_MINUS_'+'SRC_COLOR'],_0x1ebd4a['DST_COLOR'],_0x1ebd4a['ONE_MINUS_'+'DST_COLOR'],_0x1ebd4a['SRC_ALPHA'],_0x1ebd4a['SRC_ALPHA_'+'SATURATE'],_0x1ebd4a['ONE_MINUS_'+'SRC_ALPHA'],_0x1ebd4a['DST_ALPHA'],_0x1ebd4a['ONE_MINUS_'+'DST_ALPHA'],_0x1ebd4a['CONSTANT_A'+'LPHA'],_0x1ebd4a['ONE_MINUS_'+'CONSTANT_A'+'LPHA']],this['glComparis'+'on']=[_0x1ebd4a['NEVER'],_0x1ebd4a['LESS'],_0x1ebd4a['EQUAL'],_0x1ebd4a['LEQUAL'],_0x1ebd4a['GREATER'],_0x1ebd4a['NOTEQUAL'],_0x1ebd4a['GEQUAL'],_0x1ebd4a['ALWAYS']],this['glStencilO'+'p']=[_0x1ebd4a['KEEP'],_0x1ebd4a['ZERO'],_0x1ebd4a['REPLACE'],_0x1ebd4a['INCR'],_0x1ebd4a['INCR_WRAP'],_0x1ebd4a['DECR'],_0x1ebd4a['DECR_WRAP'],_0x1ebd4a['INVERT']],this['glClearFla'+'g']=[-0x25b5+0x2f4+-0x29*-0xd9,_0x1ebd4a['COLOR_BUFF'+'ER_BIT'],_0x1ebd4a['DEPTH_BUFF'+'ER_BIT'],_0x1ebd4a['COLOR_BUFF'+'ER_BIT']|_0x1ebd4a['DEPTH_BUFF'+'ER_BIT'],_0x1ebd4a['STENCIL_BU'+'FFER_BIT'],_0x1ebd4a['STENCIL_BU'+'FFER_BIT']|_0x1ebd4a['COLOR_BUFF'+'ER_BIT'],_0x1ebd4a['STENCIL_BU'+'FFER_BIT']|_0x1ebd4a['DEPTH_BUFF'+'ER_BIT'],_0x1ebd4a['STENCIL_BU'+'FFER_BIT']|_0x1ebd4a['COLOR_BUFF'+'ER_BIT']|_0x1ebd4a['DEPTH_BUFF'+'ER_BIT']],this['glCull']=[-0x31*-0x15+0xb*-0x209+0x1*0x125e,_0x1ebd4a['BACK'],_0x1ebd4a['FRONT'],_0x1ebd4a['FRONT_AND_'+'BACK']],this['glFilter']=[_0x1ebd4a['NEAREST'],_0x1ebd4a['LINEAR'],_0x1ebd4a['NEAREST_MI'+'PMAP_NEARE'+'ST'],_0x1ebd4a['NEAREST_MI'+'PMAP_LINEA'+'R'],_0x1ebd4a['LINEAR_MIP'+'MAP_NEARES'+'T'],_0x1ebd4a['LINEAR_MIP'+'MAP_LINEAR']],this['glPrimitiv'+'e']=[_0x1ebd4a['POINTS'],_0x1ebd4a['LINES'],_0x1ebd4a['LINE_LOOP'],_0x1ebd4a['LINE_STRIP'],_0x1ebd4a['TRIANGLES'],_0x1ebd4a['TRIANGLE_S'+'TRIP'],_0x1ebd4a['TRIANGLE_F'+'AN']],this['glType']=[_0x1ebd4a['BYTE'],_0x1ebd4a['UNSIGNED_B'+'YTE'],_0x1ebd4a['SHORT'],_0x1ebd4a['UNSIGNED_S'+'HORT'],_0x1ebd4a['INT'],_0x1ebd4a['UNSIGNED_I'+'NT'],_0x1ebd4a['FLOAT'],_0x1ebd4a['HALF_FLOAT']],this['pcUniformT'+'ype']={},this['pcUniformT'+'ype'][_0x1ebd4a['BOOL']]=mn,this['pcUniformT'+'ype'][_0x1ebd4a['INT']]=da,this['pcUniformT'+'ype'][_0x1ebd4a['FLOAT']]=$s,this['pcUniformT'+'ype'][_0x1ebd4a['FLOAT_VEC2']]=fa,this['pcUniformT'+'ype'][_0x1ebd4a['FLOAT_VEC3']]=ds,this['pcUniformT'+'ype'][_0x1ebd4a['FLOAT_VEC4']]=An,this['pcUniformT'+'ype'][_0x1ebd4a['INT_VEC2']]=ra,this['pcUniformT'+'ype'][_0x1ebd4a['INT_VEC3']]=aa,this['pcUniformT'+'ype'][_0x1ebd4a['INT_VEC4']]=na,this['pcUniformT'+'ype'][_0x1ebd4a['BOOL_VEC2']]=Go,this['pcUniformT'+'ype'][_0x1ebd4a['BOOL_VEC3']]=Ho,this['pcUniformT'+'ype'][_0x1ebd4a['BOOL_VEC4']]=Wo,this['pcUniformT'+'ype'][_0x1ebd4a['FLOAT_MAT2']]=jc,this['pcUniformT'+'ype'][_0x1ebd4a['FLOAT_MAT3']]=Cn,this['pcUniformT'+'ype'][_0x1ebd4a['FLOAT_MAT4']]=li,this['pcUniformT'+'ype'][_0x1ebd4a['SAMPLER_2D']]=ox,this['pcUniformT'+'ype'][_0x1ebd4a['SAMPLER_CU'+'BE']]=lx,this['pcUniformT'+'ype'][_0x1ebd4a['UNSIGNED_I'+'NT']]=Pn,this['pcUniformT'+'ype'][_0x1ebd4a['UNSIGNED_I'+'NT_VEC2']]=Mn,this['pcUniformT'+'ype'][_0x1ebd4a['UNSIGNED_I'+'NT_VEC3']]=Dn,this['pcUniformT'+'ype'][_0x1ebd4a['UNSIGNED_I'+'NT_VEC4']]=In,this['pcUniformT'+'ype'][_0x1ebd4a['SAMPLER_2D'+'_SHADOW']]=cx,this['pcUniformT'+'ype'][_0x1ebd4a['SAMPLER_CU'+'BE_SHADOW']]=hx,this['pcUniformT'+'ype'][_0x1ebd4a['SAMPLER_2D'+'_ARRAY']]=fx,this['pcUniformT'+'ype'][_0x1ebd4a['SAMPLER_3D']]=dx,this['pcUniformT'+'ype'][_0x1ebd4a['INT_SAMPLE'+'R_2D']]=ux,this['pcUniformT'+'ype'][_0x1ebd4a['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=px,this['pcUniformT'+'ype'][_0x1ebd4a['INT_SAMPLE'+'R_CUBE']]=mx,this['pcUniformT'+'ype'][_0x1ebd4a['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=_x,this['pcUniformT'+'ype'][_0x1ebd4a['INT_SAMPLE'+'R_3D']]=gx,this['pcUniformT'+'ype'][_0x1ebd4a['UNSIGNED_I'+'NT_SAMPLER'+'_3D']]=Sx,this['pcUniformT'+'ype'][_0x1ebd4a['INT_SAMPLE'+'R_2D_ARRAY']]=yx,this['pcUniformT'+'ype'][_0x1ebd4a['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]=vx,this['targetToSl'+'ot']={},this['targetToSl'+'ot'][_0x1ebd4a['TEXTURE_2D']]=0x70*0x47+0x266c+-0x457c,this['targetToSl'+'ot'][_0x1ebd4a['TEXTURE_CU'+'BE_MAP']]=0x1*-0x24e1+-0x5fe+0x2ae0,this['targetToSl'+'ot'][_0x1ebd4a['TEXTURE_3D']]=-0xc6d*0x1+-0x40c*0x1+0x107b;let _0x16cec0,_0x43439a,_0x4523f4,_0x4822c9,_0x154cb5;this['commitFunc'+'tion']=[],this['commitFunc'+'tion'][mn]=function(_0x304dad,_0x2720e8){_0x304dad['value']!==_0x2720e8&&(_0x1ebd4a['uniform1i'](_0x304dad['locationId'],_0x2720e8),_0x304dad['value']=_0x2720e8);},this['commitFunc'+'tion'][da]=this['commitFunc'+'tion'][mn],this['commitFunc'+'tion'][$s]=function(_0x295485,_0x537353){_0x295485['value']!==_0x537353&&(_0x1ebd4a['uniform1f'](_0x295485['locationId'],_0x537353),_0x295485['value']=_0x537353);},this['commitFunc'+'tion'][fa]=function(_0x1abac7,_0x44ef34){_0x154cb5=_0x1abac7['value'],_0x16cec0=_0x44ef34[-0x12e*0xf+-0x135b+0x250d*0x1],_0x43439a=_0x44ef34[-0x1dc5+-0x1247+-0x300d*-0x1],(_0x154cb5[-0x1c90+0x702+-0x3e*-0x59]!==_0x16cec0||_0x154cb5[0x1f50+-0x64*0xb+-0x567*0x5]!==_0x43439a)&&(_0x1ebd4a['uniform2fv'](_0x1abac7['locationId'],_0x44ef34),_0x154cb5[0xecb+0x1*0x763+0x14e*-0x11]=_0x16cec0,_0x154cb5[-0x18*-0xe7+0x31*0x63+0x289a*-0x1]=_0x43439a);},this['commitFunc'+'tion'][ds]=function(_0x417bfe,_0x3ac5e8){_0x154cb5=_0x417bfe['value'],_0x16cec0=_0x3ac5e8[-0x4*-0x6+-0xf6c+0xf54],_0x43439a=_0x3ac5e8[-0x871*-0x2+-0x19fb+0x91a],_0x4523f4=_0x3ac5e8[-0x1748+-0x1b52+0x329c],(_0x154cb5[-0x49*0x1+-0xb36*-0x2+0x1623*-0x1]!==_0x16cec0||_0x154cb5[-0x2401+0x1b2f*0x1+0x8d3]!==_0x43439a||_0x154cb5[-0xf33+0x446*-0x8+-0x3165*-0x1]!==_0x4523f4)&&(_0x1ebd4a['uniform3fv'](_0x417bfe['locationId'],_0x3ac5e8),_0x154cb5[0x24e4+-0x11a4+-0x1340]=_0x16cec0,_0x154cb5[0x206b+0x384+-0x23ee]=_0x43439a,_0x154cb5[-0x1ea1+0xc4f+-0x2e*-0x66]=_0x4523f4);},this['commitFunc'+'tion'][An]=function(_0x19a066,_0x25cdcb){_0x154cb5=_0x19a066['value'],_0x16cec0=_0x25cdcb[0x224e+-0x1180+0xef*-0x12],_0x43439a=_0x25cdcb[-0x667+-0x160f+0x1c77],_0x4523f4=_0x25cdcb[-0x1*0x2413+0x4c*0x1d+0x1*0x1b79],_0x4822c9=_0x25cdcb[0x61+-0x22dc+-0xa*-0x373],(_0x154cb5[0xec0+-0x169d+0x3*0x29f]!==_0x16cec0||_0x154cb5[0x1193*0x1+-0x2*-0x3cb+0x398*-0x7]!==_0x43439a||_0x154cb5[-0x62a+0x1072+0xa46*-0x1]!==_0x4523f4||_0x154cb5[0xee2+0x56f*-0x4+0x6dd*0x1]!==_0x4822c9)&&(_0x1ebd4a['uniform4fv'](_0x19a066['locationId'],_0x25cdcb),_0x154cb5[0x1*-0x6c5+0x14e6*0x1+-0xe21]=_0x16cec0,_0x154cb5[-0x5a4*-0x1+-0x18c3+-0x220*-0x9]=_0x43439a,_0x154cb5[0x10cb+-0x116*-0x1d+-0x1*0x3047]=_0x4523f4,_0x154cb5[0x7*0x2b+-0x65d*-0x3+-0x1441]=_0x4822c9);},this['commitFunc'+'tion'][ra]=function(_0x57fa2d,_0x47cb32){_0x154cb5=_0x57fa2d['value'],_0x16cec0=_0x47cb32[-0xd2c+0x14b*-0xe+0x1f46],_0x43439a=_0x47cb32[0xe3*0x3+-0x128a*0x2+0x226c],(_0x154cb5[-0x54b*0x1+0xe35+0x7*-0x146]!==_0x16cec0||_0x154cb5[-0x1982*0x1+0x4*-0x19e+0x1ffb]!==_0x43439a)&&(_0x1ebd4a['uniform2iv'](_0x57fa2d['locationId'],_0x47cb32),_0x154cb5[-0x20d7+-0x4*0x728+-0x147d*-0x3]=_0x16cec0,_0x154cb5[-0x2b9+0x7f*-0x25+0x1515]=_0x43439a);},this['commitFunc'+'tion'][Go]=this['commitFunc'+'tion'][ra],this['commitFunc'+'tion'][aa]=function(_0x6222ac,_0x26d760){_0x154cb5=_0x6222ac['value'],_0x16cec0=_0x26d760[0x1*-0x1911+-0x6*-0x59e+-0x1*0x8a3],_0x43439a=_0x26d760[0x17c2*0x1+-0x124a+-0x577*0x1],_0x4523f4=_0x26d760[-0x2669+0x86d+0x1dfe],(_0x154cb5[-0x21f*-0x9+0x94b+-0x1c62*0x1]!==_0x16cec0||_0x154cb5[0x3*-0x7d7+0x1*-0xeb4+0x263a]!==_0x43439a||_0x154cb5[-0x1*-0x1e25+-0x7*0xbd+0x8*-0x31f]!==_0x4523f4)&&(_0x1ebd4a['uniform3iv'](_0x6222ac['locationId'],_0x26d760),_0x154cb5[0x24bb*-0x1+0x406*-0x1+0x28c1]=_0x16cec0,_0x154cb5[-0x5*-0x2cb+0x19f*0x1+0xf95*-0x1]=_0x43439a,_0x154cb5[-0x1533+-0x1*0x1731+-0x1633*-0x2]=_0x4523f4);},this['commitFunc'+'tion'][Ho]=this['commitFunc'+'tion'][aa],this['commitFunc'+'tion'][na]=function(_0x449384,_0x13086a){_0x154cb5=_0x449384['value'],_0x16cec0=_0x13086a[0x1c3*-0x5+0x155d+-0x1*0xc8e],_0x43439a=_0x13086a[-0x27*0x3b+-0x39b+0xc99],_0x4523f4=_0x13086a[-0xac5+0x4*0x397+0x395*-0x1],_0x4822c9=_0x13086a[-0x12c1*-0x2+-0x2*-0x4cf+-0x2f1d],(_0x154cb5[-0x176e+0x2*-0x46+0x17fa]!==_0x16cec0||_0x154cb5[-0x1185+0x1f07*0x1+-0xd81*0x1]!==_0x43439a||_0x154cb5[0xed*0x19+0x124b+0x1*-0x296e]!==_0x4523f4||_0x154cb5[-0x116*0x1f+0xef2+0x12bb]!==_0x4822c9)&&(_0x1ebd4a['uniform4iv'](_0x449384['locationId'],_0x13086a),_0x154cb5[-0x9ca+0x1397+0x1*-0x9cd]=_0x16cec0,_0x154cb5[0xd*0x2bd+0x1*-0x10c1+0x7*-0x2b1]=_0x43439a,_0x154cb5[0x2652+-0x1*-0x26c3+-0x4d13*0x1]=_0x4523f4,_0x154cb5[0x2164+0x80*-0x3a+-0x3b*0x13]=_0x4822c9);},this['commitFunc'+'tion'][Wo]=this['commitFunc'+'tion'][na],this['commitFunc'+'tion'][jc]=function(_0x24744d,_0x24346f){_0x1ebd4a['uniformMat'+'rix2fv'](_0x24744d['locationId'],!(-0x2cd+0x14ea+-0x121c),_0x24346f);},this['commitFunc'+'tion'][Cn]=function(_0x524bcc,_0x2ebaae){_0x1ebd4a['uniformMat'+'rix3fv'](_0x524bcc['locationId'],!(0xf32+-0xf43+0x2*0x9),_0x2ebaae);},this['commitFunc'+'tion'][li]=function(_0x306d97,_0x19b9b9){_0x1ebd4a['uniformMat'+'rix4fv'](_0x306d97['locationId'],!(0xb25*0x3+-0x2525+-0x1*-0x3b7),_0x19b9b9);},this['commitFunc'+'tion'][$h]=function(_0x52f720,_0x13f8a4){_0x1ebd4a['uniform1fv'](_0x52f720['locationId'],_0x13f8a4);},this['commitFunc'+'tion'][Xh]=function(_0x145aef,_0x4c7b57){_0x1ebd4a['uniform2fv'](_0x145aef['locationId'],_0x4c7b57);},this['commitFunc'+'tion'][qh]=function(_0x23955b,_0x1ec5a3){_0x1ebd4a['uniform3fv'](_0x23955b['locationId'],_0x1ec5a3);},this['commitFunc'+'tion'][ap]=function(_0x2adf55,_0x3848cc){_0x1ebd4a['uniform4fv'](_0x2adf55['locationId'],_0x3848cc);},this['commitFunc'+'tion'][Pn]=function(_0x1d7717,_0x45dc68){_0x1d7717['value']!==_0x45dc68&&(_0x1ebd4a['uniform1ui'](_0x1d7717['locationId'],_0x45dc68),_0x1d7717['value']=_0x45dc68);},this['commitFunc'+'tion'][Mn]=function(_0x652eaa,_0x56899e){_0x154cb5=_0x652eaa['value'],_0x16cec0=_0x56899e[0x1526*0x1+0xbe9+-0x210f],_0x43439a=_0x56899e[-0x1557+-0x2*-0x5b5+0x29*0x3e],(_0x154cb5[-0x2666*0x1+-0x1ef9+0x455f]!==_0x16cec0||_0x154cb5[0x425+-0x9cd+0x5a9*0x1]!==_0x43439a)&&(_0x1ebd4a['uniform2ui'+'v'](_0x652eaa['locationId'],_0x56899e),_0x154cb5[0xdf4+0x735+-0x1529]=_0x16cec0,_0x154cb5[-0xc13+-0x2b3*0xa+-0x3*-0xd06]=_0x43439a);},this['commitFunc'+'tion'][Dn]=function(_0x4d71a4,_0x47102a){_0x154cb5=_0x4d71a4['value'],_0x16cec0=_0x47102a[-0x1670+-0x15a9+0x2c19],_0x43439a=_0x47102a[-0x5*0x293+-0xf5b+0x1c3b],_0x4523f4=_0x47102a[-0x16dd+-0x4eb*-0x3+-0x40f*-0x2],(_0x154cb5[-0x24b5+-0x1d*-0x128+0x32d]!==_0x16cec0||_0x154cb5[0xd*-0xf4+0x2*0x556+0x1b9]!==_0x43439a||_0x154cb5[-0x5c*-0x13+0x13e3+-0x1ab5]!==_0x4523f4)&&(_0x1ebd4a['uniform3ui'+'v'](_0x4d71a4['locationId'],_0x47102a),_0x154cb5[-0x3*0x52b+-0x1*-0x18d+0xdf4]=_0x16cec0,_0x154cb5[-0x8c9+0x17e2+-0xf18]=_0x43439a,_0x154cb5[-0x2*-0xc2+0x5c4+-0x746]=_0x4523f4);},this['commitFunc'+'tion'][In]=function(_0x2ece0d,_0x145350){_0x154cb5=_0x2ece0d['value'],_0x16cec0=_0x145350[-0x1e6e+-0x14*-0xb9+0xffa],_0x43439a=_0x145350[-0x1f2a+-0x1*0x1f0a+0x3e35],_0x4523f4=_0x145350[0x1*-0x1cd+-0x23b4+0x2583],_0x4822c9=_0x145350[-0xcec*-0x1+0x16f4+0x23dd*-0x1],(_0x154cb5[-0x262e+0x1f24+-0x35*-0x22]!==_0x16cec0||_0x154cb5[-0x44*0x83+0x2*-0x10a6+0x4419]!==_0x43439a||_0x154cb5[-0x1952+0x3*-0x42d+0x371*0xb]!==_0x4523f4||_0x154cb5[-0x14c3+0x2006*-0x1+-0x1*-0x34cc]!==_0x4822c9)&&(_0x1ebd4a['uniform4ui'+'v'](_0x2ece0d['locationId'],_0x145350),_0x154cb5[0x971*0x1+-0x1*-0x121d+0xdc7*-0x2]=_0x16cec0,_0x154cb5[0xe08+-0x2e*0x8+0xc97*-0x1]=_0x43439a,_0x154cb5[-0x51d+0x11c+0xd*0x4f]=_0x4523f4,_0x154cb5[-0x1e60+0x12d2+0xb91]=_0x4822c9);},this['commitFunc'+'tion'][Ln]=function(_0x474183,_0x40b246){_0x1ebd4a['uniform1iv'](_0x474183['locationId'],_0x40b246);},this['commitFunc'+'tion'][jh]=function(_0x350faa,_0x2f38b5){_0x1ebd4a['uniform1ui'+'v'](_0x350faa['locationId'],_0x2f38b5);},this['commitFunc'+'tion'][Yh]=this['commitFunc'+'tion'][Ln],this['commitFunc'+'tion'][Rn]=function(_0x52400c,_0x4c980c){_0x1ebd4a['uniform2iv'](_0x52400c['locationId'],_0x4c980c);},this['commitFunc'+'tion'][Kh]=function(_0x532a9c,_0x337a43){_0x1ebd4a['uniform2ui'+'v'](_0x532a9c['locationId'],_0x337a43);},this['commitFunc'+'tion'][Zh]=this['commitFunc'+'tion'][Rn],this['commitFunc'+'tion'][On]=function(_0x37a572,_0x514efb){_0x1ebd4a['uniform3iv'](_0x37a572['locationId'],_0x514efb);},this['commitFunc'+'tion'][Qh]=function(_0x119037,_0x2b72d1){_0x1ebd4a['uniform3ui'+'v'](_0x119037['locationId'],_0x2b72d1);},this['commitFunc'+'tion'][Jh]=this['commitFunc'+'tion'][On],this['commitFunc'+'tion'][Yc]=function(_0x15f6ba,_0x3a476e){_0x1ebd4a['uniform4iv'](_0x15f6ba['locationId'],_0x3a476e);},this['commitFunc'+'tion'][np]=function(_0x534490,_0x308867){_0x1ebd4a['uniform4ui'+'v'](_0x534490['locationId'],_0x308867);},this['commitFunc'+'tion'][op]=this['commitFunc'+'tion'][Yc],this['commitFunc'+'tion'][VS]=function(_0x3bea61,_0x53672e){_0x1ebd4a['uniformMat'+'rix4fv'](_0x3bea61['locationId'],!(-0x74c+-0x20dd+0x282a),_0x53672e);},this['constantTe'+'xSource']=this['scope']['resolve']('source'),this['postInit']();}['postInit'](){super['postInit'](),this['gpuProfile'+'r']=new TT(this);}['destroy'](){super['destroy']();const _0x53023e=this['gl'];this['feedback']&&_0x53023e['deleteTran'+'sformFeedb'+'ack'](this['feedback']),this['clearVerte'+'xArrayObje'+'ctCache'](),this['canvas']['removeEven'+'tListener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(-0xf*0x23b+0x1*0x3d+0x2139)),this['canvas']['removeEven'+'tListener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(0x11*-0x207+-0x19fd+-0x8a3*-0x7)),this['_contextLo'+'stHandler']=null,this['_contextRe'+'storedHand'+'ler']=null,this['gl']=null,super['postDestro'+'y']();}['createBack'+'buffer'](_0x42587b){this['supportsSt'+'encil']=this['initOption'+'s']['stencil'],this['backBuffer']=new gt({'name':'WebglFrame'+'buffer','graphicsDevice':this,'depth':this['initOption'+'s']['depth'],'stencil':this['supportsSt'+'encil'],'samples':this['samples']}),this['backBuffer']['impl']['suppliedCo'+'lorFramebu'+'ffer']=_0x42587b;}['updateBack'+'bufferForm'+'at'](_0x461e81){const _0x47346e=this['gl'];_0x47346e['bindFrameb'+'uffer'](_0x47346e['FRAMEBUFFE'+'R'],_0x461e81);const _0x4b6e85=this['gl']['getParamet'+'er'](this['gl']['ALPHA_BITS']);this['backBuffer'+'Format']=_0x4b6e85?Ne:wr;}['updateBack'+'buffer'](){const _0xabc225=this['canvas']['width']!==this['backBuffer'+'Size']['x']||this['canvas']['height']!==this['backBuffer'+'Size']['y'];(this['_defaultFr'+'amebufferC'+'hanged']||_0xabc225)&&(this['_defaultFr'+'amebufferC'+'hanged']&&this['updateBack'+'bufferForm'+'at'](this['_defaultFr'+'amebuffer']),this['_defaultFr'+'amebufferC'+'hanged']=!(0x1324*-0x1+0x8*-0x112+0x1bb5),this['backBuffer'+'Size']['set'](this['canvas']['width'],this['canvas']['height']),this['backBuffer']['destroy'](),this['createBack'+'buffer'](this['_defaultFr'+'amebuffer']));}['createVert'+'exBufferIm'+'pl'](_0x257786,_0x5e4a16){return new hT();}['createInde'+'xBufferImp'+'l'](_0x1130a9){return new dT(_0x1130a9);}['createShad'+'erImpl'](_0x62f55f){return new gT(_0x62f55f);}['createText'+'ureImpl'](_0x441199){return new ST(_0x441199);}['createRend'+'erTargetIm'+'pl'](_0x46fbb1){return new vT();}['pushMarker'](_0x32d109){if(Me['browser']&&window['spector']){const _0xa9868d=Q['toString']();window['spector']['setMarker'](_0xa9868d+'\x20#');}}['popMarker'](){if(Me['browser']&&window['spector']){const _0x55c040=Q['toString']();_0x55c040['length']?window['spector']['setMarker'](_0x55c040+'\x20#'):window['spector']['clearMarke'+'r']();}}['getPrecisi'+'on'](){const _0x1a6203=this['gl'];let _0x8f49db='highp';if(_0x1a6203['getShaderP'+'recisionFo'+'rmat']){const _0x3be159=_0x1a6203['getShaderP'+'recisionFo'+'rmat'](_0x1a6203['VERTEX_SHA'+'DER'],_0x1a6203['HIGH_FLOAT']),_0x128a84=_0x1a6203['getShaderP'+'recisionFo'+'rmat'](_0x1a6203['VERTEX_SHA'+'DER'],_0x1a6203['MEDIUM_FLO'+'AT']),_0x643964=_0x1a6203['getShaderP'+'recisionFo'+'rmat'](_0x1a6203['FRAGMENT_S'+'HADER'],_0x1a6203['HIGH_FLOAT']),_0x9c6dd9=_0x1a6203['getShaderP'+'recisionFo'+'rmat'](_0x1a6203['FRAGMENT_S'+'HADER'],_0x1a6203['MEDIUM_FLO'+'AT']);if(_0x3be159&&_0x128a84&&_0x643964&&_0x9c6dd9){const _0x2be3e9=_0x3be159['precision']>0x48a*0x1+0x8a6*-0x1+-0x20e*-0x2&&_0x643964['precision']>0x765*-0x1+0x2635*0x1+0x1d*-0x110,_0x264f8d=_0x128a84['precision']>-0x1d41*-0x1+0x1de7+-0x6*0x9dc&&_0x9c6dd9['precision']>0x1b30+0x2*0x29f+-0x251*0xe;_0x2be3e9||(_0x264f8d?(_0x8f49db='mediump',w['warn']('WARNING:\x20h'+'ighp\x20not\x20s'+'upported,\x20'+'using\x20medi'+'ump')):(_0x8f49db='lowp',w['warn']('WARNING:\x20h'+'ighp\x20and\x20m'+'ediump\x20not'+'\x20supported'+',\x20using\x20lo'+'wp')));}}return _0x8f49db;}['getExtensi'+'on'](){for(let _0x1e4ba3=-0x1f61*-0x1+0xe8c+-0x2ded;_0x1e4ba3<arguments['length'];_0x1e4ba3++)if(this['supportedE'+'xtensions']['indexOf'](arguments[_0x1e4ba3])!==-(0x4ab*-0x1+0x4*-0x401+-0x1*-0x14b0))return this['gl']['getExtensi'+'on'](arguments[_0x1e4ba3]);return null;}get['extDisjoin'+'tTimerQuer'+'y'](){return this['_extDisjoi'+'ntTimerQue'+'ry']||(this['_extDisjoi'+'ntTimerQue'+'ry']=this['getExtensi'+'on']('EXT_disjoi'+'nt_timer_q'+'uery_webgl'+'2','EXT_disjoi'+'nt_timer_q'+'uery')),this['_extDisjoi'+'ntTimerQue'+'ry'];}['initialize'+'Extensions'](){const _0x2e920d=this['gl'];this['supportedE'+'xtensions']=_0x2e920d['getSupport'+'edExtensio'+'ns']()??[],this['_extDisjoi'+'ntTimerQue'+'ry']=null,this['textureRG1'+'1B10Render'+'able']=!(0xa8*0x2+0x1df*-0x10+-0x728*-0x4),this['extColorBu'+'fferFloat']=this['getExtensi'+'on']('EXT_color_'+'buffer_flo'+'at'),this['textureFlo'+'atRenderab'+'le']=!!this['extColorBu'+'fferFloat'],this['extColorBu'+'fferHalfFl'+'oat']=this['getExtensi'+'on']('EXT_color_'+'buffer_hal'+'f_float'),this['textureHal'+'fFloatRend'+'erable']=!!this['extColorBu'+'fferHalfFl'+'oat']||!!this['extColorBu'+'fferFloat'],this['extDebugRe'+'ndererInfo']=this['getExtensi'+'on']('WEBGL_debu'+'g_renderer'+'_info'),this['extTexture'+'FloatLinea'+'r']=this['getExtensi'+'on']('OES_textur'+'e_float_li'+'near'),this['textureFlo'+'atFilterab'+'le']=!!this['extTexture'+'FloatLinea'+'r'],this['extFloatBl'+'end']=this['getExtensi'+'on']('EXT_float_'+'blend'),this['extTexture'+'FilterAnis'+'otropic']=this['getExtensi'+'on']('EXT_textur'+'e_filter_a'+'nisotropic','WEBKIT_EXT'+'_texture_f'+'ilter_anis'+'otropic'),this['extParalle'+'lShaderCom'+'pile']=this['getExtensi'+'on']('KHR_parall'+'el_shader_'+'compile'),this['extCompres'+'sedTexture'+'ETC1']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc1'),this['extCompres'+'sedTexture'+'ETC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc'),this['extCompres'+'sedTexture'+'PVRTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_pvrtc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_pvrtc'),this['extCompres'+'sedTexture'+'S3TC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_s3tc'),this['extCompres'+'sedTexture'+'S3TC_SRGB']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc_'+'srgb'),this['extCompres'+'sedTexture'+'ATC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_atc'),this['extCompres'+'sedTexture'+'ASTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_astc'),this['extTexture'+'Compressio'+'nBPTC']=this['getExtensi'+'on']('EXT_textur'+'e_compress'+'ion_bptc');}['initialize'+'Capabiliti'+'es'](){const _0x429e19=this['gl'];let _0x3ee6be;const _0x556d5c=typeof navigator<'u'?navigator['userAgent']:'';this['maxPrecisi'+'on']=this['precision']=this['getPrecisi'+'on']();const _0x2621f5=_0x429e19['getContext'+'Attributes']();this['supportsMs'+'aa']=(_0x2621f5==null?void(-0x357*-0x9+-0x3fb*-0x3+0x3*-0xe00):_0x2621f5['antialias'])??!(-0x1478+-0xeaf+0x2328),this['supportsSt'+'encil']=(_0x2621f5==null?void(0x22ce+-0x2258+-0x76*0x1):_0x2621f5['stencil'])??!(0x957*-0x1+-0xf16+-0x3b*-0x6a),this['maxTexture'+'Size']=_0x429e19['getParamet'+'er'](_0x429e19['MAX_TEXTUR'+'E_SIZE']),this['maxCubeMap'+'Size']=_0x429e19['getParamet'+'er'](_0x429e19['MAX_CUBE_M'+'AP_TEXTURE'+'_SIZE']),this['maxRenderB'+'ufferSize']=_0x429e19['getParamet'+'er'](_0x429e19['MAX_RENDER'+'BUFFER_SIZ'+'E']),this['maxTexture'+'s']=_0x429e19['getParamet'+'er'](_0x429e19['MAX_TEXTUR'+'E_IMAGE_UN'+'ITS']),this['maxCombine'+'dTextures']=_0x429e19['getParamet'+'er'](_0x429e19['MAX_COMBIN'+'ED_TEXTURE'+'_IMAGE_UNI'+'TS']),this['maxVertexT'+'extures']=_0x429e19['getParamet'+'er'](_0x429e19['MAX_VERTEX'+'_TEXTURE_I'+'MAGE_UNITS']),this['vertexUnif'+'ormsCount']=_0x429e19['getParamet'+'er'](_0x429e19['MAX_VERTEX'+'_UNIFORM_V'+'ECTORS']),this['fragmentUn'+'iformsCoun'+'t']=_0x429e19['getParamet'+'er'](_0x429e19['MAX_FRAGME'+'NT_UNIFORM'+'_VECTORS']),this['maxColorAt'+'tachments']=_0x429e19['getParamet'+'er'](_0x429e19['MAX_COLOR_'+'ATTACHMENT'+'S']),this['maxVolumeS'+'ize']=_0x429e19['getParamet'+'er'](_0x429e19['MAX_3D_TEX'+'TURE_SIZE']),_0x3ee6be=this['extDebugRe'+'ndererInfo'],this['unmaskedRe'+'nderer']=_0x3ee6be?_0x429e19['getParamet'+'er'](_0x3ee6be['UNMASKED_R'+'ENDERER_WE'+'BGL']):'',this['unmaskedVe'+'ndor']=_0x3ee6be?_0x429e19['getParamet'+'er'](_0x3ee6be['UNMASKED_V'+'ENDOR_WEBG'+'L']):'';const _0x46e935=/\bMali-G52+/,_0x47eb05=/SM-[a-zA-Z0-9]+/;this['supportsGp'+'uParticles']=!(this['unmaskedVe'+'ndor']==='ARM'&&_0x556d5c['match'](_0x47eb05))&&!this['unmaskedRe'+'nderer']['match'](_0x46e935),_0x3ee6be=this['extTexture'+'FilterAnis'+'otropic'],this['maxAnisotr'+'opy']=_0x3ee6be?_0x429e19['getParamet'+'er'](_0x3ee6be['MAX_TEXTUR'+'E_MAX_ANIS'+'OTROPY_EXT']):-0x13f5+-0x5*-0x571+-0x73f*0x1;const _0x3f056f=!this['forceDisab'+'leMultisam'+'pling'];this['maxSamples']=_0x3f056f?_0x429e19['getParamet'+'er'](_0x429e19['MAX_SAMPLE'+'S']):-0x1*-0x1bc1+0x1*-0x16e5+0xb*-0x71,this['maxSamples']=Math['min'](this['maxSamples'],-0x1545+-0x1564+-0x1*-0x2aad),this['samples']=_0x3f056f&&this['backBuffer'+'Antialias']?this['maxSamples']:-0x1*-0x1ba9+-0x1977+0x3*-0xbb,this['supportsAr'+'eaLights']=!Me['android'],this['maxTexture'+'s']<=-0x827*0x4+-0x14da+0x357e&&(this['supportsAr'+'eaLights']=!(-0xbb*-0x7+0x19e*-0x4+0x4*0x57)),this['initCapsDe'+'fines']();}['initialize'+'RenderStat'+'e'](){super['initialize'+'RenderStat'+'e']();const _0x57afc7=this['gl'];_0x57afc7['disable'](_0x57afc7['BLEND']),_0x57afc7['blendFunc'](_0x57afc7['ONE'],_0x57afc7['ZERO']),_0x57afc7['blendEquat'+'ion'](_0x57afc7['FUNC_ADD']),_0x57afc7['colorMask'](!(0xd*0x169+0x13ca+-0x261f),!(0x1*-0x689+0x1b5f+0x379*-0x6),!(-0x17db+0x1691+0x1*0x14a),!(0xb10+-0x66a*0x5+0x1502)),_0x57afc7['blendColor'](-0x1*0x5b1+0x11*-0x46+0xa57,-0x1329+-0x33*0x9d+0x3270,0x39*-0x6+-0x47*-0x55+-0x1*0x163d,-0xbc*-0x20+-0x1be6+0x233*0x2),_0x57afc7['enable'](_0x57afc7['CULL_FACE']),this['cullFace']=_0x57afc7['BACK'],_0x57afc7['cullFace'](_0x57afc7['BACK']),_0x57afc7['enable'](_0x57afc7['DEPTH_TEST']),_0x57afc7['depthFunc'](_0x57afc7['LEQUAL']),_0x57afc7['depthMask'](!(-0x3ce+-0x15a0+0x196e)),this['stencil']=!(0x1f6e+-0x78b*-0x3+-0x360e),_0x57afc7['disable'](_0x57afc7['STENCIL_TE'+'ST']),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=Hi,this['stencilRef'+'Front']=this['stencilRef'+'Back']=0x1850+0x671*0x4+-0x3214,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=-0x1e2e*-0x1+0x2*0xe61+0x39f1*-0x1,_0x57afc7['stencilFun'+'c'](_0x57afc7['ALWAYS'],0x3d9+0x2f*-0x62+0xe25,-0x3*-0x39b+-0xa3*-0x31+-0x2905),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=pn,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=pn,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=pn,this['stencilWri'+'teMaskFron'+'t']=0x16b7+-0x1058+-0x56*0x10,this['stencilWri'+'teMaskBack']=0x17ba+0x18e4+-0x2f9f*0x1,_0x57afc7['stencilOp'](_0x57afc7['KEEP'],_0x57afc7['KEEP'],_0x57afc7['KEEP']),_0x57afc7['stencilMas'+'k'](0x9e4+-0x2a*-0x36+0x65*-0x2d),this['alphaToCov'+'erage']=!(0x5*0x191+0x469*-0x2+0x7f*0x2),this['raster']=!(0x89*0x25+0x55*0x74+0x3a51*-0x1),_0x57afc7['disable'](_0x57afc7['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']),_0x57afc7['disable'](_0x57afc7['RASTERIZER'+'_DISCARD']),this['depthBiasE'+'nabled']=!(0x1de1*0x1+-0x293+-0x1*0x1b4d),_0x57afc7['disable'](_0x57afc7['POLYGON_OF'+'FSET_FILL']),this['clearDepth']=0xcdd*0x1+0x7b7*-0x5+0x19b7,_0x57afc7['clearDepth'](-0x22c4+-0x259a+0x1*0x485f),this['clearColor']=new ie(-0x1*-0x254e+0x140f+0xb*-0x537,0xc2e*-0x2+-0x3e*0x49+0x2a0a,0x231d+0x171d+-0x3a3a,0x126b*-0x1+0x1b1b+-0x22c*0x4),_0x57afc7['clearColor'](-0xba5+-0xc*-0xa3+0x401,-0x8*0xbc+-0xf80+-0x390*-0x6,-0xf46+-0xd*0x2cf+0x33c9,-0x4c4+0xccd+-0x809),this['clearStenc'+'il']=0xd48+0x1770+-0x3ac*0xa,_0x57afc7['clearStenc'+'il'](0x3*0x8f9+-0x8e8+-0x1203),_0x57afc7['hint'](_0x57afc7['FRAGMENT_S'+'HADER_DERI'+'VATIVE_HIN'+'T'],_0x57afc7['NICEST']),_0x57afc7['enable'](_0x57afc7['SCISSOR_TE'+'ST']),_0x57afc7['pixelStore'+'i'](_0x57afc7['UNPACK_COL'+'ORSPACE_CO'+'NVERSION_W'+'EBGL'],_0x57afc7['NONE']),this['unpackFlip'+'Y']=!(-0x2*-0x271+-0x17ca+0x12e9),_0x57afc7['pixelStore'+'i'](_0x57afc7['UNPACK_FLI'+'P_Y_WEBGL'],!(0x1*-0x2169+0x441*-0x8+0x4372)),this['unpackPrem'+'ultiplyAlp'+'ha']=!(0x1f38+0x1*0x8bf+-0x27f6),_0x57afc7['pixelStore'+'i'](_0x57afc7['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],!(-0x2700+0x7e0+0x1f21)),_0x57afc7['pixelStore'+'i'](_0x57afc7['UNPACK_ALI'+'GNMENT'],0x2113+-0x117e+-0xf94);}['initTextur'+'eUnits'](_0x9a0e=0x2663*0x1+-0x218e+-0x4c5*0x1){this['textureUni'+'ts']=[];for(let _0x1c59d7=-0x50e*0x1+-0x11ff+0x15*0x119;_0x1c59d7<_0x9a0e;_0x1c59d7++)this['textureUni'+'ts']['push']([null,null,null]);}['initialize'+'ContextCac'+'hes'](){super['initialize'+'ContextCac'+'hes'](),this['_vaoMap']=new Map(),this['boundVao']=null,this['activeFram'+'ebuffer']=null,this['feedback']=null,this['transformF'+'eedbackBuf'+'fer']=null,this['textureUni'+'t']=-0xc7f+-0x146c+0x20eb,this['initTextur'+'eUnits'](this['maxCombine'+'dTextures']);}['loseContex'+'t'](){super['loseContex'+'t']();for(const _0x4a6d2b of this['shaders'])_0x4a6d2b['loseContex'+'t']();}['restoreCon'+'text'](){this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),super['restoreCon'+'text']();for(const _0x403be6 of this['shaders'])_0x403be6['restoreCon'+'text']();}['setViewpor'+'t'](_0x454d73,_0x356d8a,_0x48fc7e,_0x191df1){(this['vx']!==_0x454d73||this['vy']!==_0x356d8a||this['vw']!==_0x48fc7e||this['vh']!==_0x191df1)&&(this['gl']['viewport'](_0x454d73,_0x356d8a,_0x48fc7e,_0x191df1),this['vx']=_0x454d73,this['vy']=_0x356d8a,this['vw']=_0x48fc7e,this['vh']=_0x191df1);}['setScissor'](_0x227693,_0x59ba5e,_0x30f537,_0x160aca){(this['sx']!==_0x227693||this['sy']!==_0x59ba5e||this['sw']!==_0x30f537||this['sh']!==_0x160aca)&&(this['gl']['scissor'](_0x227693,_0x59ba5e,_0x30f537,_0x160aca),this['sx']=_0x227693,this['sy']=_0x59ba5e,this['sw']=_0x30f537,this['sh']=_0x160aca);}['setFramebu'+'ffer'](_0x21c37b){if(this['activeFram'+'ebuffer']!==_0x21c37b){const _0x379625=this['gl'];_0x379625['bindFrameb'+'uffer'](_0x379625['FRAMEBUFFE'+'R'],_0x21c37b),this['activeFram'+'ebuffer']=_0x21c37b;}}['copyRender'+'Target'](_0x2d058b,_0x50102d,_0x3ec05a,_0x2180e3){var _0x127546,_0x191501;const _0xbe00fa=this['gl'];if(_0x2d058b===this['backBuffer']&&(_0x2d058b=null),_0x3ec05a){if(_0x50102d){if(_0x2d058b){if(!_0x2d058b['_colorBuff'+'er']||!_0x50102d['_colorBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20color\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(0x3f5+0x16ed+-0x3d7*0x7);if(_0x2d058b['_colorBuff'+'er']['_format']!==_0x50102d['_colorBuff'+'er']['_format'])return w['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20c'+'olor\x20forma'+'ts'),!(0xbf4+-0x2f*0x3e+0x91*-0x1);}}else{if(!_0x2d058b['_colorBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20empty\x20col'+'or\x20buffer\x20'+'to\x20backbuf'+'fer'),!(0x27b+0x1*-0x1bb2+0x1938);}}if(_0x2180e3&&_0x2d058b&&!_0x2d058b['_depth']){if(!_0x2d058b['_depthBuff'+'er']||!_0x50102d['_depthBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20depth\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(-0x3b*0x9f+-0x21c8+0x466e);if(_0x2d058b['_depthBuff'+'er']['_format']!==_0x50102d['_depthBuff'+'er']['_format'])return w['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20d'+'epth\x20forma'+'ts'),!(0x259*-0x3+-0x1bf+0x8cb);}Q['pushGpuMar'+'ker'](this,'COPY-RT');const _0x4646b9=this['renderTarg'+'et'];this['renderTarg'+'et']=_0x50102d,this['updateBegi'+'n']();const _0xec1932=_0x2d058b?_0x2d058b['impl']['_glFrameBu'+'ffer']:(_0x127546=this['backBuffer'])==null?void(0x2*0xf47+0x143*-0x17+-0x189):_0x127546['impl']['_glFrameBu'+'ffer'],_0x5cc5fd=_0x50102d?_0x50102d['impl']['_glFrameBu'+'ffer']:(_0x191501=this['backBuffer'])==null?void(0x10e+-0x4d*-0x1f+0xa61*-0x1):_0x191501['impl']['_glFrameBu'+'ffer'];w['assert'](_0xec1932!==_0x5cc5fd,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0xbe00fa['bindFrameb'+'uffer'](_0xbe00fa['READ_FRAME'+'BUFFER'],_0xec1932),_0xbe00fa['bindFrameb'+'uffer'](_0xbe00fa['DRAW_FRAME'+'BUFFER'],_0x5cc5fd);const _0x24818a=_0x2d058b?_0x2d058b['width']:_0x50102d?_0x50102d['width']:this['width'],_0x26a1d7=_0x2d058b?_0x2d058b['height']:_0x50102d?_0x50102d['height']:this['height'];return _0xbe00fa['blitFrameb'+'uffer'](-0x1c2d*0x1+-0x5*0x4e5+-0x2e*-0x125,-0x83*-0x24+0x1*-0x1260+0x2*-0x6,_0x24818a,_0x26a1d7,-0x1ed8+-0x33*0xad+0x414f,-0x9a*-0x1+-0x1147+0x10ad,_0x24818a,_0x26a1d7,(_0x3ec05a?_0xbe00fa['COLOR_BUFF'+'ER_BIT']:0xa94+-0x3*0xad1+0x15df*0x1)|(_0x2180e3?_0xbe00fa['DEPTH_BUFF'+'ER_BIT']:-0x470*0x2+-0xe7b+0x175b),_0xbe00fa['NEAREST']),this['renderTarg'+'et']=_0x4646b9,_0xbe00fa['bindFrameb'+'uffer'](_0xbe00fa['FRAMEBUFFE'+'R'],_0x4646b9?_0x4646b9['impl']['_glFrameBu'+'ffer']:null),Q['popGpuMark'+'er'](this),!(-0x1*-0x1934+0x16c1+-0x2ff5);}['frameStart'](){super['frameStart'](),this['updateBack'+'buffer'](),this['gpuProfile'+'r']['frameStart']();}['frameEnd'](){super['frameEnd'](),this['gpuProfile'+'r']['frameEnd'](),this['gpuProfile'+'r']['request']();}['startRende'+'rPass'](_0x2f21b7){const _0x13ab08=_0x2f21b7['renderTarg'+'et']??this['backBuffer'];this['renderTarg'+'et']=_0x13ab08,w['assert'](_0x13ab08),Q['pushGpuMar'+'ker'](this,'Pass:'+_0x2f21b7['name']+'\x20RT:'+_0x13ab08['name']),Q['pushGpuMar'+'ker'](this,'START-PASS'),this['updateBegi'+'n']();const {width:_0x1d2e33,height:_0x40a5a5}=_0x13ab08;this['setViewpor'+'t'](-0x2*0xf5d+-0x2584+0x443e,0x1*-0x10cd+0x49d+-0x1*-0xc30,_0x1d2e33,_0x40a5a5),this['setScissor'](-0xdf4+0x1*-0x50b+0x1*0x12ff,0x1a85+-0xd87*-0x1+0x4*-0xa03,_0x1d2e33,_0x40a5a5);const _0x3b850b=_0x2f21b7['colorOps'],_0x453323=_0x2f21b7['depthStenc'+'ilOps'];if(_0x3b850b!=null&&_0x3b850b['clear']||_0x453323['clearDepth']||_0x453323['clearStenc'+'il']){let _0x2a096f=0x21e5+0x1*0x101e+0x19d*-0x1f;const _0x5c49a4={};_0x3b850b!=null&&_0x3b850b['clear']&&(_0x2a096f|=Fo,_0x5c49a4['color']=[_0x3b850b['clearValue']['r'],_0x3b850b['clearValue']['g'],_0x3b850b['clearValue']['b'],_0x3b850b['clearValue']['a']]),_0x453323['clearDepth']&&(_0x2a096f|=No,_0x5c49a4['depth']=_0x453323['clearDepth'+'Value']),_0x453323['clearStenc'+'il']&&(_0x2a096f|=Vc,_0x5c49a4['stencil']=_0x453323['clearStenc'+'ilValue']),_0x5c49a4['flags']=_0x2a096f,this['clear'](_0x5c49a4);}w['call'](()=>{this['insideRend'+'erPass']&&w['errorOnce']('RenderPass'+'\x20cannot\x20be'+'\x20started\x20w'+'hile\x20insid'+'e\x20another\x20'+'render\x20pas'+'s.');}),this['insideRend'+'erPass']=!(0xa39+-0x21b4+0x177b),Q['popGpuMark'+'er'](this);}['endRenderP'+'ass'](_0x5c3b90){var _0x2ed803;Q['pushGpuMar'+'ker'](this,'END-PASS'),this['unbindVert'+'exArray']();const _0x3e032b=this['renderTarg'+'et'],_0x3b9766=_0x5c3b90['colorArray'+'Ops']['length'];if(_0x3e032b){ba['length']=0xf1*0x1d+0x146a+0x1*-0x2fb7;const _0x1fcf41=this['gl'];for(let _0x4b514f=-0x36f*0x8+-0xb73+0x26eb;_0x4b514f<_0x3b9766;_0x4b514f++){const _0x27374a=_0x5c3b90['colorArray'+'Ops'][_0x4b514f];_0x27374a['store']||_0x27374a['resolve']||ba['push'](_0x1fcf41['COLOR_ATTA'+'CHMENT0']+_0x4b514f);}_0x3e032b!==this['backBuffer']&&(_0x5c3b90['depthStenc'+'ilOps']['storeDepth']||ba['push'](_0x1fcf41['DEPTH_ATTA'+'CHMENT']),_0x5c3b90['depthStenc'+'ilOps']['storeStenc'+'il']||ba['push'](_0x1fcf41['STENCIL_AT'+'TACHMENT'])),ba['length']>-0x5*0x3a4+-0x102*-0xd+0x28d*0x2&&_0x5c3b90['fullSizeCl'+'earRect']&&_0x1fcf41['invalidate'+'Framebuffe'+'r'](_0x1fcf41['DRAW_FRAME'+'BUFFER'],ba),_0x3b9766&&((_0x2ed803=_0x5c3b90['colorOps'])!=null&&_0x2ed803['resolve'])&&_0x5c3b90['samples']>-0x1*0x232e+-0x5*-0x5e5+-0x2db*-0x2&&_0x3e032b['autoResolv'+'e']&&_0x3e032b['resolve'](!(0x1772+-0xca2+-0xad0),!(0xf02+-0xe40*-0x2+-0x103*0x2b)),_0x3e032b['depthBuffe'+'r']&&_0x5c3b90['depthStenc'+'ilOps']['resolveDep'+'th']&&_0x5c3b90['samples']>-0x932+0x3e7*-0x8+0x286b&&_0x3e032b['autoResolv'+'e']&&_0x3e032b['resolve'](!(-0x1*0x2042+0x347*-0x1+0x238a*0x1),!(0x13a9+-0x1*0x91c+-0x49*0x25));for(let _0x56291f=-0xf07+0x24*-0xc7+-0x2b03*-0x1;_0x56291f<_0x3b9766;_0x56291f++)if(_0x5c3b90['colorArray'+'Ops'][_0x56291f]['genMipmaps']){const _0x2f5142=_0x3e032b['_colorBuff'+'ers'][_0x56291f];_0x2f5142&&_0x2f5142['impl']['_glTexture']&&_0x2f5142['mipmaps']&&(Q['pushGpuMar'+'ker'](this,'MIPS'+_0x56291f),this['activeText'+'ure'](this['maxCombine'+'dTextures']-(0x47*0x2c+-0xe5*-0x2b+-0x32aa)),this['bindTextur'+'e'](_0x2f5142),this['gl']['generateMi'+'pmap'](_0x2f5142['impl']['_glTarget']),Q['popGpuMark'+'er'](this));}}this['insideRend'+'erPass']=!(0x2*-0xa8+0x90e+-0x7bd*0x1),Q['popGpuMark'+'er'](this),Q['popGpuMark'+'er'](this);}set['defaultFra'+'mebuffer'](_0x80b3e8){this['_defaultFr'+'amebuffer']!==_0x80b3e8&&(this['_defaultFr'+'amebuffer']=_0x80b3e8,this['_defaultFr'+'amebufferC'+'hanged']=!(-0x20d6+-0x21ef*-0x1+-0x119));}get['defaultFra'+'mebuffer'](){return this['_defaultFr'+'amebuffer'];}['updateBegi'+'n'](){if(Q['pushGpuMar'+'ker'](this,'UPDATE-BEG'+'IN'),this['boundVao']=null,this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']){for(let _0x1b04d8=-0xdce+0x21cd+-0x13ff*0x1;_0x1b04d8<this['textureUni'+'ts']['length'];++_0x1b04d8)for(let _0x225a5b=-0x105*-0x14+-0x14b0+0x4c;_0x225a5b<-0x1a*0x119+-0x1557+0x19c*0x1f;++_0x225a5b)this['textureUni'+'ts'][_0x1b04d8][_0x225a5b]=null;}const _0x2406c2=this['renderTarg'+'et']??this['backBuffer'];w['assert'](_0x2406c2);const _0x1f0dd6=_0x2406c2['impl'];_0x1f0dd6['initialize'+'d']||this['initRender'+'Target'](_0x2406c2),this['setFramebu'+'ffer'](_0x1f0dd6['_glFrameBu'+'ffer']),Q['popGpuMark'+'er'](this);}['updateEnd'](){Q['pushGpuMar'+'ker'](this,'UPDATE-END'),this['unbindVert'+'exArray']();const _0x1c3ea8=this['renderTarg'+'et'];if(_0x1c3ea8&&_0x1c3ea8!==this['backBuffer']){_0x1c3ea8['_samples']>-0x49*0x45+-0x5*0x1e1+0x1d13&&_0x1c3ea8['autoResolv'+'e']&&_0x1c3ea8['resolve']();const _0x47950d=_0x1c3ea8['_colorBuff'+'er'];_0x47950d&&_0x47950d['impl']['_glTexture']&&_0x47950d['mipmaps']&&(this['activeText'+'ure'](this['maxCombine'+'dTextures']-(0x1*-0x186c+-0x48a*0x7+0x3833)),this['bindTextur'+'e'](_0x47950d),this['gl']['generateMi'+'pmap'](_0x47950d['impl']['_glTarget']));}Q['popGpuMark'+'er'](this);}['setUnpackF'+'lipY'](_0x2f3037){if(this['unpackFlip'+'Y']!==_0x2f3037){this['unpackFlip'+'Y']=_0x2f3037;const _0x17a803=this['gl'];_0x17a803['pixelStore'+'i'](_0x17a803['UNPACK_FLI'+'P_Y_WEBGL'],_0x2f3037);}}['setUnpackP'+'remultiply'+'Alpha'](_0x4b9cd2){if(this['unpackPrem'+'ultiplyAlp'+'ha']!==_0x4b9cd2){this['unpackPrem'+'ultiplyAlp'+'ha']=_0x4b9cd2;const _0x5daf33=this['gl'];_0x5daf33['pixelStore'+'i'](_0x5daf33['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],_0x4b9cd2);}}['activeText'+'ure'](_0x40e043){this['textureUni'+'t']!==_0x40e043&&(this['gl']['activeText'+'ure'](this['gl']['TEXTURE0']+_0x40e043),this['textureUni'+'t']=_0x40e043);}['bindTextur'+'e'](_0x39687e){const _0x5879af=_0x39687e['impl'],_0x351d74=_0x5879af['_glTarget'],_0xdea23=_0x5879af['_glTexture'],_0x5743ea=this['textureUni'+'t'],_0x275470=this['targetToSl'+'ot'][_0x351d74];this['textureUni'+'ts'][_0x5743ea][_0x275470]!==_0xdea23&&(this['gl']['bindTextur'+'e'](_0x351d74,_0xdea23),this['textureUni'+'ts'][_0x5743ea][_0x275470]=_0xdea23);}['bindTextur'+'eOnUnit'](_0x40154d,_0x1755ac){const _0x251589=_0x40154d['impl'],_0xbb3c9d=_0x251589['_glTarget'],_0x3760b3=_0x251589['_glTexture'],_0x1481f7=this['targetToSl'+'ot'][_0xbb3c9d];this['textureUni'+'ts'][_0x1755ac][_0x1481f7]!==_0x3760b3&&(this['activeText'+'ure'](_0x1755ac),this['gl']['bindTextur'+'e'](_0xbb3c9d,_0x3760b3),this['textureUni'+'ts'][_0x1755ac][_0x1481f7]=_0x3760b3);}['setTexture'+'Parameters'](_0x1b0f11){const _0x183724=this['gl'],_0x5e8cef=_0x1b0f11['impl']['dirtyParam'+'eterFlags'],_0x47349b=_0x1b0f11['impl']['_glTarget'];if(_0x5e8cef&WS){let _0x10a6f2=_0x1b0f11['_minFilter'];(!_0x1b0f11['_mipmaps']||_0x1b0f11['_compresse'+'d']&&_0x1b0f11['_levels']['length']===0xcb0+0x59b+-0x925*0x2)&&(_0x10a6f2===Ph||_0x10a6f2===Mh?_0x10a6f2=Te:(_0x10a6f2===Dh||_0x10a6f2===ha)&&(_0x10a6f2=vt)),_0x183724['texParamet'+'eri'](_0x47349b,_0x183724['TEXTURE_MI'+'N_FILTER'],this['glFilter'][_0x10a6f2]);}if(_0x5e8cef&$S&&_0x183724['texParamet'+'eri'](_0x47349b,_0x183724['TEXTURE_MA'+'G_FILTER'],this['glFilter'][_0x1b0f11['_magFilter']]),_0x5e8cef&XS&&_0x183724['texParamet'+'eri'](_0x47349b,_0x183724['TEXTURE_WR'+'AP_S'],this['glAddress'][_0x1b0f11['_addressU']]),_0x5e8cef&qS&&_0x183724['texParamet'+'eri'](_0x47349b,_0x183724['TEXTURE_WR'+'AP_T'],this['glAddress'][_0x1b0f11['_addressV']]),_0x5e8cef&jS&&_0x183724['texParamet'+'eri'](_0x47349b,_0x183724['TEXTURE_WR'+'AP_R'],this['glAddress'][_0x1b0f11['_addressW']]),_0x5e8cef&YS&&_0x183724['texParamet'+'eri'](_0x47349b,_0x183724['TEXTURE_CO'+'MPARE_MODE'],_0x1b0f11['_compareOn'+'Read']?_0x183724['COMPARE_RE'+'F_TO_TEXTU'+'RE']:_0x183724['NONE']),_0x5e8cef&KS&&_0x183724['texParamet'+'eri'](_0x47349b,_0x183724['TEXTURE_CO'+'MPARE_FUNC'],this['glComparis'+'on'][_0x1b0f11['_compareFu'+'nc']]),_0x5e8cef&ZS){const _0x44ac81=this['extTexture'+'FilterAnis'+'otropic'];_0x44ac81&&_0x183724['texParamet'+'erf'](_0x47349b,_0x44ac81['TEXTURE_MA'+'X_ANISOTRO'+'PY_EXT'],Y['clamp'](Math['round'](_0x1b0f11['_anisotrop'+'y']),0x28c+0x17*0x10b+-0x1a88,this['maxAnisotr'+'opy']));}}['setTexture'](_0x516a76,_0x16fb38){const _0x48d615=_0x516a76['impl'];_0x48d615['_glTexture']||_0x48d615['initialize'](this,_0x516a76),_0x48d615['dirtyParam'+'eterFlags']>-0x239f+-0xe4d+-0x9*-0x58c||_0x516a76['_needsUplo'+'ad']||_0x516a76['_needsMipm'+'apsUpload']?(this['activeText'+'ure'](_0x16fb38),this['bindTextur'+'e'](_0x516a76),_0x48d615['dirtyParam'+'eterFlags']&&(this['setTexture'+'Parameters'](_0x516a76),_0x48d615['dirtyParam'+'eterFlags']=0x1b76+-0xcf5*-0x3+-0x4255*0x1),(_0x516a76['_needsUplo'+'ad']||_0x516a76['_needsMipm'+'apsUpload'])&&(_0x48d615['upload'](this,_0x516a76),_0x516a76['_needsUplo'+'ad']=!(-0x19e1+-0x1*-0x1d97+-0x3b5),_0x516a76['_needsMipm'+'apsUpload']=!(-0xf7*-0x4+-0x2618*-0x1+-0x29f3))):this['bindTextur'+'eOnUnit'](_0x516a76,_0x16fb38);}['createVert'+'exArray'](_0x5da459){let _0x4e4b38,_0x3d0500;const _0x301f95=_0x5da459['length']>0xe87+-0xb*-0x8+-0xede;if(_0x301f95){_0x4e4b38='';for(let _0xa1b2a0=-0x8*-0x235+-0x2622+-0x2*-0xa3d;_0xa1b2a0<_0x5da459['length'];_0xa1b2a0++){const _0x4c1dcc=_0x5da459[_0xa1b2a0];_0x4e4b38+=_0x4c1dcc['id']+_0x4c1dcc['format']['renderingH'+'ash'];}_0x3d0500=this['_vaoMap']['get'](_0x4e4b38);}if(!_0x3d0500){const _0x2affad=this['gl'];_0x3d0500=_0x2affad['createVert'+'exArray'](),_0x2affad['bindVertex'+'Array'](_0x3d0500),_0x2affad['bindBuffer'](_0x2affad['ELEMENT_AR'+'RAY_BUFFER'],null);let _0x479018=!(0xf7b+-0x109f+0x1*0x125);for(let _0x2ff957=0xc2c+-0x232c*0x1+0x80*0x2e;_0x2ff957<_0x5da459['length'];_0x2ff957++){const _0x506fd0=_0x5da459[_0x2ff957];_0x2affad['bindBuffer'](_0x2affad['ARRAY_BUFF'+'ER'],_0x506fd0['impl']['bufferId']);const _0x2ba459=_0x506fd0['format']['elements'];for(let _0x3c64ab=0x14e*-0x11+-0x1379+0x29a7;_0x3c64ab<_0x2ba459['length'];_0x3c64ab++){const _0x28671e=_0x2ba459[_0x3c64ab],_0x3be692=Le[_0x28671e['name']];_0x3be692===-0x178c+0x22f2+0x2*-0x5b3&&(_0x479018=!(0x25f2+0x1db6*0x1+-0x43a8)),_0x28671e['asInt']?_0x2affad['vertexAttr'+'ibIPointer'](_0x3be692,_0x28671e['numCompone'+'nts'],this['glType'][_0x28671e['dataType']],_0x28671e['stride'],_0x28671e['offset']):_0x2affad['vertexAttr'+'ibPointer'](_0x3be692,_0x28671e['numCompone'+'nts'],this['glType'][_0x28671e['dataType']],_0x28671e['normalize'],_0x28671e['stride'],_0x28671e['offset']),_0x2affad['enableVert'+'exAttribAr'+'ray'](_0x3be692),_0x506fd0['format']['instancing']&&_0x2affad['vertexAttr'+'ibDivisor'](_0x3be692,-0xb*0x77+-0x1*0xbe1+0x1*0x10ff);}}_0x2affad['bindVertex'+'Array'](null),_0x2affad['bindBuffer'](_0x2affad['ARRAY_BUFF'+'ER'],null),_0x301f95&&this['_vaoMap']['set'](_0x4e4b38,_0x3d0500),_0x479018||w['warn']('No\x20vertex\x20'+'attribute\x20'+'is\x20mapped\x20'+'to\x20locatio'+'n\x200,\x20which'+'\x20might\x20cau'+'se\x20compati'+'bility\x20iss'+'ues\x20on\x20Saf'+'ari\x20on\x20Mac'+'OS\x20-\x20pleas'+'e\x20use\x20attr'+'ibute\x20SEMA'+'NTIC_POSIT'+'ION\x20or\x20SEM'+'ANTIC_ATTR'+'15');}return _0x3d0500;}['unbindVert'+'exArray'](){this['boundVao']&&(this['boundVao']=null,this['gl']['bindVertex'+'Array'](null));}['setBuffers'](_0x241948){const _0x5c63ae=this['gl'];let _0x137223;if(this['vertexBuff'+'ers']['length']===-0x16*-0x1c3+0x3*-0xa63+-0x798){const _0x141da8=this['vertexBuff'+'ers'][-0xf29*-0x2+0x90a+-0x275c];w['assert'](_0x141da8['device']===this,'The\x20Vertex'+'Buffer\x20was'+'\x20not\x20creat'+'ed\x20using\x20c'+'urrent\x20Gra'+'phicsDevic'+'e'),_0x141da8['impl']['vao']||(_0x141da8['impl']['vao']=this['createVert'+'exArray'](this['vertexBuff'+'ers'])),_0x137223=_0x141da8['impl']['vao'];}else _0x137223=this['createVert'+'exArray'](this['vertexBuff'+'ers']);this['boundVao']!==_0x137223&&(this['boundVao']=_0x137223,_0x5c63ae['bindVertex'+'Array'](_0x137223));const _0x58d62b=_0x241948?_0x241948['impl']['bufferId']:null;_0x5c63ae['bindBuffer'](_0x5c63ae['ELEMENT_AR'+'RAY_BUFFER'],_0x58d62b);}['draw'](_0x545ac3,_0x454074,_0x5a9fb5,_0x46914a,_0x13fd62=!(-0x8c2+0x23d3*0x1+0xa9*-0x29),_0x37a045=!(-0x1211*0x1+0x7a3+0x1*0xa6e)){const _0x1ae021=this['shader'];if(_0x1ae021&&(this['activateSh'+'ader'](),this['shaderVali'+'d'])){const _0x96e5b5=this['gl'];_0x13fd62&&(w['call'](()=>{var _0x28792e,_0x186092;return this['validateAt'+'tributes'](this['shader'],(_0x28792e=this['vertexBuff'+'ers'][0x110b+-0x3b*-0x75+-0x2c02])==null?void(0x235*-0x7+-0x39*0xd+-0x92c*-0x2):_0x28792e['format'],(_0x186092=this['vertexBuff'+'ers'][-0x3d5*-0x1+0xe61+-0x4f*0x3b])==null?void(0x4e0*0x7+-0x12ac+-0xf74):_0x186092['format']);}),this['setBuffers'](_0x454074));let _0x352e2b=-0x1*-0x7ea+-0x1dc6+-0x15dc*-0x1;const _0x37e468=_0x1ae021['impl']['samplers'];for(let _0x2d2205=-0x2708+0x1*-0xe8f+-0x3*-0x11dd,_0x48323d=_0x37e468['length'];_0x2d2205<_0x48323d;_0x2d2205++){const _0x45b7fa=_0x37e468[_0x2d2205];let _0x358326=_0x45b7fa['scopeId']['value'];if(!_0x358326){const _0x43d4db=_0x45b7fa['scopeId']['name'];w['assert'](_0x43d4db!=='texture_gr'+'abPass','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27texture'+'_grabPass\x27'+'\x20is\x20not\x20lo'+'nger\x20suppo'+'rted,\x20use\x20'+'\x27uSceneCol'+'orMap\x27\x20ins'+'tead'),w['assert'](_0x43d4db!=='uDepthMap','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27uDepthM'+'ap\x27\x20is\x20not'+'\x20longer\x20su'+'pported,\x20u'+'se\x20\x27uScene'+'DepthMap\x27\x20'+'instead'),_0x43d4db==='uSceneDept'+'hMap'&&(w['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x358326=oa(this,'white')),_0x43d4db==='uSceneColo'+'rMap'&&(w['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x358326=oa(this,'pink')),_0x358326||(w['errorOnce']('Shader\x20'+_0x1ae021['name']+'\x20requires\x20'+_0x43d4db+('\x20texture\x20w'+'hich\x20was\x20n'+'ot\x20set.\x20Re'+'ndering\x20[')+Q['toString']()+']',_0x1ae021),_0x358326=oa(this,'pink'));}if(_0x358326 instanceof _e){const _0x5f4c5a=_0x358326;this['setTexture'](_0x5f4c5a,_0x352e2b),this['renderTarg'+'et']&&this['renderTarg'+'et']['_samples']<0x1*0xda1+0x4b1*-0x2+-0x5*0xd9&&(this['renderTarg'+'et']['colorBuffe'+'r']&&this['renderTarg'+'et']['colorBuffe'+'r']===_0x5f4c5a?w['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20color\x20b'+'uffer\x20as\x20a'+'\x20texture',{'renderTarget':this['renderTarg'+'et'],'texture':_0x5f4c5a}):this['renderTarg'+'et']['depthBuffe'+'r']&&this['renderTarg'+'et']['depthBuffe'+'r']===_0x5f4c5a&&w['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20depth\x20b'+'uffer\x20as\x20a'+'\x20texture',{'texture':_0x5f4c5a})),_0x45b7fa['slot']!==_0x352e2b&&(_0x96e5b5['uniform1i'](_0x45b7fa['locationId'],_0x352e2b),_0x45b7fa['slot']=_0x352e2b),_0x352e2b++;}else{_0x45b7fa['array']['length']=-0x1*0xb1e+-0x3*0x9e5+-0x28cd*-0x1;const _0x12a00a=_0x358326['length'];for(let _0x2781f3=-0x99*0xe+-0x215+0xa73;_0x2781f3<_0x12a00a;_0x2781f3++){const _0x551e1a=_0x358326[_0x2781f3];this['setTexture'](_0x551e1a,_0x352e2b),_0x45b7fa['array'][_0x2781f3]=_0x352e2b,_0x352e2b++;}_0x96e5b5['uniform1iv'](_0x45b7fa['locationId'],_0x45b7fa['array']);}}const _0x53e0b9=_0x1ae021['impl']['uniforms'];for(let _0xa2628e=0x22be+0x101*-0x11+0x5*-0x389,_0x540b90=_0x53e0b9['length'];_0xa2628e<_0x540b90;_0xa2628e++){const _0x1ea9d9=_0x53e0b9[_0xa2628e],_0x4bc354=_0x1ea9d9['scopeId'],_0x2f5c10=_0x1ea9d9['version'],_0x45fc64=_0x4bc354['versionObj'+'ect']['version'];if(_0x2f5c10['globalId']!==_0x45fc64['globalId']||_0x2f5c10['revision']!==_0x45fc64['revision']){_0x2f5c10['globalId']=_0x45fc64['globalId'],_0x2f5c10['revision']=_0x45fc64['revision'];const _0x9a1264=_0x4bc354['value'];_0x9a1264!=null?this['commitFunc'+'tion'][_0x1ea9d9['dataType']](_0x1ea9d9,_0x9a1264):w['warnOnce']('Shader\x20['+_0x1ae021['label']+(']\x20requires'+'\x20uniform\x20[')+_0x1ea9d9['scopeId']['name']+(']\x20which\x20ha'+'s\x20not\x20been'+'\x20set,\x20whil'+'e\x20renderin'+'g\x20[')+Q['toString']()+']');}}this['transformF'+'eedbackBuf'+'fer']&&(_0x96e5b5['bindBuffer'+'Base'](_0x96e5b5['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],-0x1811+-0x42b+-0xd*-0x22c,this['transformF'+'eedbackBuf'+'fer']['impl']['bufferId']),_0x96e5b5['beginTrans'+'formFeedba'+'ck'](_0x96e5b5['POINTS']));const _0x5c92a4=this['glPrimitiv'+'e'][_0x545ac3['type']],_0x46e465=_0x545ac3['count'];if(_0x545ac3['indexed']){w['assert'](_0x454074['device']===this,'The\x20IndexB'+'uffer\x20was\x20'+'not\x20create'+'d\x20using\x20cu'+'rrent\x20Grap'+'hicsDevice');const _0x341cbe=_0x454074['impl']['glFormat'],_0xdf3f71=_0x545ac3['base']*_0x454074['bytesPerIn'+'dex'];_0x5a9fb5>-0x1ed+-0x532*-0x1+-0x345?_0x96e5b5['drawElemen'+'tsInstance'+'d'](_0x5c92a4,_0x46e465,_0x341cbe,_0xdf3f71,_0x5a9fb5):_0x96e5b5['drawElemen'+'ts'](_0x5c92a4,_0x46e465,_0x341cbe,_0xdf3f71);}else{const _0x169fa8=_0x545ac3['base'];_0x5a9fb5>-0xe*0x115+-0x192f+0x2855?_0x96e5b5['drawArrays'+'Instanced'](_0x5c92a4,_0x169fa8,_0x46e465,_0x5a9fb5):_0x96e5b5['drawArrays'](_0x5c92a4,_0x169fa8,_0x46e465);}this['transformF'+'eedbackBuf'+'fer']&&(_0x96e5b5['endTransfo'+'rmFeedback'](),_0x96e5b5['bindBuffer'+'Base'](_0x96e5b5['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],0x72f*0x5+0x12c6+0x36b1*-0x1,null)),this['_drawCalls'+'PerFrame']++,this['_primsPerF'+'rame'][_0x545ac3['type']]+=_0x545ac3['count']*(_0x5a9fb5>0x16fd+0x1*0x147+-0x1843?_0x5a9fb5:0x22*0xf7+0x15fd+-0x36ca);}_0x37a045&&this['clearVerte'+'xBuffer']();}['clear'](_0x47f369){const _0x1ed870=this['defaultCle'+'arOptions'];_0x47f369=_0x47f369||_0x1ed870;const _0x4fde34=_0x47f369['flags']??_0x1ed870['flags'];if(_0x4fde34!==-0xc9d+0xe60+0x29*-0xb){const _0xe18f9e=this['gl'];if(_0x4fde34&Fo){const _0x54d90d=_0x47f369['color']??_0x1ed870['color'],_0x354497=_0x54d90d[0x2*-0x42d+0x1*-0xb2+-0x182*-0x6],_0x304288=_0x54d90d[0x22*-0x50+-0x9ef*0x1+0x1490],_0x12ea2c=_0x54d90d[0x1df5+0x2*-0x2ab+-0x189d],_0x555776=_0x54d90d[0x1d91+-0x1*0x19dd+-0x3b1],_0x45d0ce=this['clearColor'];(_0x354497!==_0x45d0ce['r']||_0x304288!==_0x45d0ce['g']||_0x12ea2c!==_0x45d0ce['b']||_0x555776!==_0x45d0ce['a'])&&(this['gl']['clearColor'](_0x354497,_0x304288,_0x12ea2c,_0x555776),this['clearColor']['set'](_0x354497,_0x304288,_0x12ea2c,_0x555776)),this['setBlendSt'+'ate'](pt['NOBLEND']);}if(_0x4fde34&No){const _0x4196f1=_0x47f369['depth']??_0x1ed870['depth'];_0x4196f1!==this['clearDepth']&&(this['gl']['clearDepth'](_0x4196f1),this['clearDepth']=_0x4196f1),this['setDepthSt'+'ate'](Yt['WRITEDEPTH']);}if(_0x4fde34&Vc){const _0x5e8dc4=_0x47f369['stencil']??_0x1ed870['stencil'];_0x5e8dc4!==this['clearStenc'+'il']&&(this['gl']['clearStenc'+'il'](_0x5e8dc4),this['clearStenc'+'il']=_0x5e8dc4),_0xe18f9e['stencilMas'+'k'](0x221d+-0xb20+-0x15fe),this['stencilWri'+'teMaskFron'+'t']=0x235*0x2+-0x1fea+-0x1c7f*-0x1,this['stencilWri'+'teMaskBack']=0x11*-0x6d+0x4d*0x37+-0x84f;}_0xe18f9e['clear'](this['glClearFla'+'g'][_0x4fde34]);}}['submit'](){this['gl']['flush']();}['readPixels'](_0x2045b4,_0x49c67b,_0x41446f,_0x52619f,_0x224540){const _0x1ec29b=this['gl'];_0x1ec29b['readPixels'](_0x2045b4,_0x49c67b,_0x41446f,_0x52619f,_0x1ec29b['RGBA'],_0x1ec29b['UNSIGNED_B'+'YTE'],_0x224540);}['clientWait'+'Async'](_0x4aa684,_0x3bdc98){const _0x1303cc=this['gl'],_0xf7367c=_0x1303cc['fenceSync'](_0x1303cc['SYNC_GPU_C'+'OMMANDS_CO'+'MPLETE'],-0x22dd+0x184*-0x4+0x28ed);return this['submit'](),new Promise((_0x499c3e,_0x1ed3fc)=>{function _0x371bec(){const _0x38aabd=_0x1303cc['clientWait'+'Sync'](_0xf7367c,_0x4aa684,0x430+-0x75a*-0x2+0x27*-0x7c);_0x38aabd===_0x1303cc['TIMEOUT_EX'+'PIRED']?setTimeout(_0x371bec,_0x3bdc98):(_0x1303cc['deleteSync'](_0xf7367c),_0x38aabd===_0x1303cc['WAIT_FAILE'+'D']?_0x1ed3fc(new Error('webgl\x20clie'+'ntWaitSync'+'\x20sync\x20fail'+'ed')):_0x499c3e());}_0x371bec();});}async['readPixels'+'Async'](_0x744403,_0x13c622,_0x49a025,_0x3bad2f,_0x5e3fc4){var _0xd9089c;const _0x2ac2e2=this['gl'],_0x1c16ba=(_0xd9089c=this['renderTarg'+'et']['colorBuffe'+'r'])==null?void(-0x14b*-0x15+0x2421+-0x3f48):_0xd9089c['impl'],_0x336b38=(_0x1c16ba==null?void(0x8b+-0x24c1+0x2436):_0x1c16ba['_glFormat'])??_0x2ac2e2['RGBA'],_0x472b02=(_0x1c16ba==null?void(-0x1a7+-0x1124*-0x2+-0x20a1*0x1):_0x1c16ba['_glPixelTy'+'pe'])??_0x2ac2e2['UNSIGNED_B'+'YTE'],_0xfaf736=_0x2ac2e2['createBuff'+'er']();return _0x2ac2e2['bindBuffer'](_0x2ac2e2['PIXEL_PACK'+'_BUFFER'],_0xfaf736),_0x2ac2e2['bufferData'](_0x2ac2e2['PIXEL_PACK'+'_BUFFER'],_0x5e3fc4['byteLength'],_0x2ac2e2['STREAM_REA'+'D']),_0x2ac2e2['readPixels'](_0x744403,_0x13c622,_0x49a025,_0x3bad2f,_0x336b38,_0x472b02,0x17d0+0x1324+-0x2af4),_0x2ac2e2['bindBuffer'](_0x2ac2e2['PIXEL_PACK'+'_BUFFER'],null),await this['clientWait'+'Async'](-0x7e1*0x3+-0x3*-0x67+0x166e,-0xdad+-0x46*0x33+0x1baf),_0x2ac2e2['bindBuffer'](_0x2ac2e2['PIXEL_PACK'+'_BUFFER'],_0xfaf736),_0x2ac2e2['getBufferS'+'ubData'](_0x2ac2e2['PIXEL_PACK'+'_BUFFER'],-0x169c+0x1*-0xe42+0x24de,_0x5e3fc4),_0x2ac2e2['bindBuffer'](_0x2ac2e2['PIXEL_PACK'+'_BUFFER'],null),_0x2ac2e2['deleteBuff'+'er'](_0xfaf736),_0x5e3fc4;}['readTextur'+'eAsync'](_0x2eccec,_0x141954,_0x49e5ce,_0x5766bd,_0x32d986,_0x2dc9b3){const _0x15a69f=_0x2dc9b3['face']??-0x1*0x1ad8+-0x25c1+0x17*0x2cf,_0x3eb99b=_0x2dc9b3['renderTarg'+'et']??new gt({'colorBuffer':_0x2eccec,'depth':!(0x16a7*-0x1+-0x1913+0x2fbb),'face':_0x15a69f});w['assert'](_0x3eb99b['colorBuffe'+'r']===_0x2eccec);const _0x3f63d3=new ArrayBuffer($i['calcLevelG'+'puSize'](_0x5766bd,_0x32d986,0x133*-0x1a+-0x3c*-0x16+0x1a07*0x1,_0x2eccec['_format'])),_0x3a34a=_0x2dc9b3['data']??new(RS(_0x2eccec['_format']))(_0x3f63d3);return this['setRenderT'+'arget'](_0x3eb99b),this['initRender'+'Target'](_0x3eb99b),new Promise((_0x26d746,_0x3c5e43)=>{this['readPixels'+'Async'](_0x141954,_0x49e5ce,_0x5766bd,_0x32d986,_0x3a34a)['then'](_0x2a98f5=>{_0x2dc9b3['renderTarg'+'et']||_0x3eb99b['destroy'](),_0x26d746(_0x2a98f5);})['catch'](_0x3c5e43);});}async['writeTextu'+'reAsync'](_0x2c71b4,_0x10723c,_0x1631a9,_0x2cfd3b,_0x242201,_0x16ac9d){const _0x46707d=this['gl'],_0x317afc=_0x2c71b4['impl'],_0x1848d8=(_0x317afc==null?void(-0x4f9*0x7+0x7fd*0x4+0x2db):_0x317afc['_glFormat'])??_0x46707d['RGBA'],_0x194e8c=(_0x317afc==null?void(-0x3af*0x2+0x5de*-0x2+-0x3d2*-0x5):_0x317afc['_glPixelTy'+'pe'])??_0x46707d['UNSIGNED_B'+'YTE'],_0x487011=_0x46707d['createBuff'+'er']();_0x46707d['bindBuffer'](_0x46707d['PIXEL_UNPA'+'CK_BUFFER'],_0x487011),_0x46707d['bufferData'](_0x46707d['PIXEL_UNPA'+'CK_BUFFER'],_0x16ac9d,_0x46707d['STREAM_DRA'+'W']),_0x46707d['bindTextur'+'e'](_0x46707d['TEXTURE_2D'],_0x317afc['_glTexture']),_0x46707d['texSubImag'+'e2D'](_0x46707d['TEXTURE_2D'],-0x1f*-0x11+-0xf99+0xd8a,_0x10723c,_0x1631a9,_0x2cfd3b,_0x242201,_0x1848d8,_0x194e8c,-0x2133+-0x1*-0xd88+0x13*0x109),_0x46707d['bindBuffer'](_0x46707d['PIXEL_UNPA'+'CK_BUFFER'],null),_0x2c71b4['_needsUplo'+'ad']=!(0x11f6+-0x3ee+0x39*-0x3f),_0x2c71b4['_mipmapsUp'+'loaded']=!(0xc+0x181b+-0x1826),await this['clientWait'+'Async'](0x2*0xd81+0x1*-0x128c+-0x876,-0x2f*-0x4+-0x1*-0x239f+-0x244b);}['setAlphaTo'+'Coverage'](_0x46ab5e){this['alphaToCov'+'erage']!==_0x46ab5e&&(this['alphaToCov'+'erage']=_0x46ab5e,_0x46ab5e?this['gl']['enable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']):this['gl']['disable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']));}['setTransfo'+'rmFeedback'+'Buffer'](_0x43ba1c){if(this['transformF'+'eedbackBuf'+'fer']!==_0x43ba1c){this['transformF'+'eedbackBuf'+'fer']=_0x43ba1c;const _0x33037f=this['gl'];_0x43ba1c?(this['feedback']||(this['feedback']=_0x33037f['createTran'+'sformFeedb'+'ack']()),_0x33037f['bindTransf'+'ormFeedbac'+'k'](_0x33037f['TRANSFORM_'+'FEEDBACK'],this['feedback'])):_0x33037f['bindTransf'+'ormFeedbac'+'k'](_0x33037f['TRANSFORM_'+'FEEDBACK'],null);}}['setRaster'](_0xd6c9a7){this['raster']!==_0xd6c9a7&&(this['raster']=_0xd6c9a7,_0xd6c9a7?this['gl']['disable'](this['gl']['RASTERIZER'+'_DISCARD']):this['gl']['enable'](this['gl']['RASTERIZER'+'_DISCARD']));}['setStencil'+'Test'](_0x1c3ae7){if(this['stencil']!==_0x1c3ae7){const _0x57bde8=this['gl'];_0x1c3ae7?_0x57bde8['enable'](_0x57bde8['STENCIL_TE'+'ST']):_0x57bde8['disable'](_0x57bde8['STENCIL_TE'+'ST']),this['stencil']=_0x1c3ae7;}}['setStencil'+'Func'](_0x22434f,_0x29b4ce,_0x48e1a3){(this['stencilFun'+'cFront']!==_0x22434f||this['stencilRef'+'Front']!==_0x29b4ce||this['stencilMas'+'kFront']!==_0x48e1a3||this['stencilFun'+'cBack']!==_0x22434f||this['stencilRef'+'Back']!==_0x29b4ce||this['stencilMas'+'kBack']!==_0x48e1a3)&&(this['gl']['stencilFun'+'c'](this['glComparis'+'on'][_0x22434f],_0x29b4ce,_0x48e1a3),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=_0x22434f,this['stencilRef'+'Front']=this['stencilRef'+'Back']=_0x29b4ce,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=_0x48e1a3);}['setStencil'+'FuncFront'](_0x191699,_0x55c944,_0x3e1f0a){if(this['stencilFun'+'cFront']!==_0x191699||this['stencilRef'+'Front']!==_0x55c944||this['stencilMas'+'kFront']!==_0x3e1f0a){const _0xe4faf4=this['gl'];_0xe4faf4['stencilFun'+'cSeparate'](_0xe4faf4['FRONT'],this['glComparis'+'on'][_0x191699],_0x55c944,_0x3e1f0a),this['stencilFun'+'cFront']=_0x191699,this['stencilRef'+'Front']=_0x55c944,this['stencilMas'+'kFront']=_0x3e1f0a;}}['setStencil'+'FuncBack'](_0x36ef80,_0x315902,_0x4be80a){if(this['stencilFun'+'cBack']!==_0x36ef80||this['stencilRef'+'Back']!==_0x315902||this['stencilMas'+'kBack']!==_0x4be80a){const _0x52f2a8=this['gl'];_0x52f2a8['stencilFun'+'cSeparate'](_0x52f2a8['BACK'],this['glComparis'+'on'][_0x36ef80],_0x315902,_0x4be80a),this['stencilFun'+'cBack']=_0x36ef80,this['stencilRef'+'Back']=_0x315902,this['stencilMas'+'kBack']=_0x4be80a;}}['setStencil'+'Operation'](_0x1d6d2a,_0x2059c3,_0x40cabb,_0x5728dd){(this['stencilFai'+'lFront']!==_0x1d6d2a||this['stencilZfa'+'ilFront']!==_0x2059c3||this['stencilZpa'+'ssFront']!==_0x40cabb||this['stencilFai'+'lBack']!==_0x1d6d2a||this['stencilZfa'+'ilBack']!==_0x2059c3||this['stencilZpa'+'ssBack']!==_0x40cabb)&&(this['gl']['stencilOp'](this['glStencilO'+'p'][_0x1d6d2a],this['glStencilO'+'p'][_0x2059c3],this['glStencilO'+'p'][_0x40cabb]),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=_0x1d6d2a,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=_0x2059c3,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=_0x40cabb),(this['stencilWri'+'teMaskFron'+'t']!==_0x5728dd||this['stencilWri'+'teMaskBack']!==_0x5728dd)&&(this['gl']['stencilMas'+'k'](_0x5728dd),this['stencilWri'+'teMaskFron'+'t']=_0x5728dd,this['stencilWri'+'teMaskBack']=_0x5728dd);}['setStencil'+'OperationF'+'ront'](_0xcab682,_0x2b91c1,_0x4224cd,_0x1050d4){(this['stencilFai'+'lFront']!==_0xcab682||this['stencilZfa'+'ilFront']!==_0x2b91c1||this['stencilZpa'+'ssFront']!==_0x4224cd)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['FRONT'],this['glStencilO'+'p'][_0xcab682],this['glStencilO'+'p'][_0x2b91c1],this['glStencilO'+'p'][_0x4224cd]),this['stencilFai'+'lFront']=_0xcab682,this['stencilZfa'+'ilFront']=_0x2b91c1,this['stencilZpa'+'ssFront']=_0x4224cd),this['stencilWri'+'teMaskFron'+'t']!==_0x1050d4&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['FRONT'],_0x1050d4),this['stencilWri'+'teMaskFron'+'t']=_0x1050d4);}['setStencil'+'OperationB'+'ack'](_0x1b8ba5,_0x197de4,_0x4684e1,_0x56f7f7){(this['stencilFai'+'lBack']!==_0x1b8ba5||this['stencilZfa'+'ilBack']!==_0x197de4||this['stencilZpa'+'ssBack']!==_0x4684e1)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['BACK'],this['glStencilO'+'p'][_0x1b8ba5],this['glStencilO'+'p'][_0x197de4],this['glStencilO'+'p'][_0x4684e1]),this['stencilFai'+'lBack']=_0x1b8ba5,this['stencilZfa'+'ilBack']=_0x197de4,this['stencilZpa'+'ssBack']=_0x4684e1),this['stencilWri'+'teMaskBack']!==_0x56f7f7&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['BACK'],_0x56f7f7),this['stencilWri'+'teMaskBack']=_0x56f7f7);}['setBlendSt'+'ate'](_0x4c372a){const _0x2905d9=this['blendState'];if(!_0x2905d9['equals'](_0x4c372a)){const _0x169df8=this['gl'],{blend:_0x45683a,colorOp:_0x328414,alphaOp:_0x194db1,colorSrcFactor:_0x5bbfe8,colorDstFactor:_0x487715,alphaSrcFactor:_0x25f293,alphaDstFactor:_0x1d6a9}=_0x4c372a;if(_0x2905d9['blend']!==_0x45683a&&(_0x45683a?_0x169df8['enable'](_0x169df8['BLEND']):_0x169df8['disable'](_0x169df8['BLEND'])),_0x2905d9['colorOp']!==_0x328414||_0x2905d9['alphaOp']!==_0x194db1){const _0x5b93d2=this['glBlendEqu'+'ation'];_0x169df8['blendEquat'+'ionSeparat'+'e'](_0x5b93d2[_0x328414],_0x5b93d2[_0x194db1]);}(_0x2905d9['colorSrcFa'+'ctor']!==_0x5bbfe8||_0x2905d9['colorDstFa'+'ctor']!==_0x487715||_0x2905d9['alphaSrcFa'+'ctor']!==_0x25f293||_0x2905d9['alphaDstFa'+'ctor']!==_0x1d6a9)&&_0x169df8['blendFuncS'+'eparate'](this['glBlendFun'+'ctionColor'][_0x5bbfe8],this['glBlendFun'+'ctionColor'][_0x487715],this['glBlendFun'+'ctionAlpha'][_0x25f293],this['glBlendFun'+'ctionAlpha'][_0x1d6a9]),_0x2905d9['allWrite']!==_0x4c372a['allWrite']&&this['gl']['colorMask'](_0x4c372a['redWrite'],_0x4c372a['greenWrite'],_0x4c372a['blueWrite'],_0x4c372a['alphaWrite']),_0x2905d9['copy'](_0x4c372a);}}['setBlendCo'+'lor'](_0x8d12c0,_0x102b69,_0x302aaa,_0x4e90d9){const _0x392098=this['blendColor'];(_0x8d12c0!==_0x392098['r']||_0x102b69!==_0x392098['g']||_0x302aaa!==_0x392098['b']||_0x4e90d9!==_0x392098['a'])&&(this['gl']['blendColor'](_0x8d12c0,_0x102b69,_0x302aaa,_0x4e90d9),_0x392098['set'](_0x8d12c0,_0x102b69,_0x302aaa,_0x4e90d9));}['setStencil'+'State'](_0x127098,_0x4afa98){_0x127098||_0x4afa98?(this['setStencil'+'Test'](!(-0x1a8+0x1bf*0xb+-0x118d)),_0x127098===_0x4afa98?(this['setStencil'+'Func'](_0x127098['func'],_0x127098['ref'],_0x127098['readMask']),this['setStencil'+'Operation'](_0x127098['fail'],_0x127098['zfail'],_0x127098['zpass'],_0x127098['writeMask'])):(_0x127098??(_0x127098=pi['DEFAULT']),this['setStencil'+'FuncFront'](_0x127098['func'],_0x127098['ref'],_0x127098['readMask']),this['setStencil'+'OperationF'+'ront'](_0x127098['fail'],_0x127098['zfail'],_0x127098['zpass'],_0x127098['writeMask']),_0x4afa98??(_0x4afa98=pi['DEFAULT']),this['setStencil'+'FuncBack'](_0x4afa98['func'],_0x4afa98['ref'],_0x4afa98['readMask']),this['setStencil'+'OperationB'+'ack'](_0x4afa98['fail'],_0x4afa98['zfail'],_0x4afa98['zpass'],_0x4afa98['writeMask']))):this['setStencil'+'Test'](!(-0x6fd*-0x1+0x1593+-0x1c8f));}['setDepthSt'+'ate'](_0x312286){const _0x328136=this['depthState'];if(!_0x328136['equals'](_0x312286)){const _0x339201=this['gl'],_0x3f0c7e=_0x312286['write'];_0x328136['write']!==_0x3f0c7e&&_0x339201['depthMask'](_0x3f0c7e);let {func:_0x5a99e3,test:_0x573461}=_0x312286;!_0x573461&&_0x3f0c7e&&(_0x573461=!(-0x5c4+0x9d9+-0xd1*0x5),_0x5a99e3=Hi),_0x328136['func']!==_0x5a99e3&&_0x339201['depthFunc'](this['glComparis'+'on'][_0x5a99e3]),_0x328136['test']!==_0x573461&&(_0x573461?_0x339201['enable'](_0x339201['DEPTH_TEST']):_0x339201['disable'](_0x339201['DEPTH_TEST']));const {depthBias:_0x2295dc,depthBiasSlope:_0x4afca4}=_0x312286;_0x2295dc||_0x4afca4?(this['depthBiasE'+'nabled']||(this['depthBiasE'+'nabled']=!(0xbfb*0x3+-0xfef+-0x1402),this['gl']['enable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0x339201['polygonOff'+'set'](_0x4afca4,_0x2295dc)):this['depthBiasE'+'nabled']&&(this['depthBiasE'+'nabled']=!(-0x1*0x7cf+0xc26+-0x456),this['gl']['disable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0x328136['copy'](_0x312286);}}['setCullMod'+'e'](_0x16c590){if(this['cullMode']!==_0x16c590){if(_0x16c590===bt)this['gl']['disable'](this['gl']['CULL_FACE']);else{this['cullMode']===bt&&this['gl']['enable'](this['gl']['CULL_FACE']);const _0x539804=this['glCull'][_0x16c590];this['cullFace']!==_0x539804&&(this['gl']['cullFace'](_0x539804),this['cullFace']=_0x539804);}this['cullMode']=_0x16c590;}}['setShader'](_0x3fff87,_0xdc52ee=!(0x202a*0x1+0x6*0x590+-0x4189)){_0x3fff87!==this['shader']&&(this['shader']=_0x3fff87,this['shaderAsyn'+'cCompile']=_0xdc52ee,this['shaderVali'+'d']=void(-0x147+0x1d51+-0x1c0a),this['_shaderSwi'+'tchesPerFr'+'ame']++);}['activateSh'+'ader'](){const {shader:_0x216348}=this,{impl:_0x3539e9}=_0x216348;this['shaderVali'+'d']===void(-0xd14+-0x1*-0x445+0x8cf)&&(_0x216348['failed']?this['shaderVali'+'d']=!(0x614+0x2*-0xc99+0x131f):_0x216348['ready']||(this['shaderAsyn'+'cCompile']?_0x3539e9['isLinked'](this)?_0x3539e9['finalize'](this,_0x216348)||(_0x216348['failed']=!(-0x2015*0x1+-0x8ef+-0x32*-0xd2),this['shaderVali'+'d']=!(0x2b*-0x7b+0xa58+0xa52*0x1)):this['shaderVali'+'d']=!(-0x4*-0x186+-0x16*-0x17+-0x5*0x19d):_0x3539e9['finalize'](this,_0x216348)||(_0x216348['failed']=!(-0x3*-0x905+0x1d*0x109+-0x3914),this['shaderVali'+'d']=!(-0xc8e+0xb11+-0xbf*-0x2)))),this['shaderVali'+'d']===void(-0x2104+0x1c36+0x4ce)&&(this['gl']['useProgram'](_0x3539e9['glProgram']),this['shaderVali'+'d']=!(0x720+0x132c+-0x176*0x12));}['clearVerte'+'xArrayObje'+'ctCache'](){const _0x5cdff1=this['gl'];this['_vaoMap']['forEach']((_0x191c0f,_0xd90ea,_0xc1efa7)=>{_0x5cdff1['deleteVert'+'exArray'](_0x191c0f);}),this['_vaoMap']['clear']();}set['fullscreen'](_0xcdf79f){_0xcdf79f?this['gl']['canvas']['requestFul'+'lscreen']():document['exitFullsc'+'reen']();}get['fullscreen'](){return!!document['fullscreen'+'Element'];}['debugLoseC'+'ontext'](_0x5ec962=0xe36*-0x1+0x1*0xbd7+0x2c3){const _0xa97767=this['gl']['getExtensi'+'on']('WEBGL_lose'+'_context');_0xa97767['loseContex'+'t'](),setTimeout(()=>_0xa97767['restoreCon'+'text'](),_0x5ec962);}}let ET=0x20be+0x4*0x52c+-0x356e;class xr{constructor(_0xb3d317,_0x4db968,_0x2904a6,_0x46f7c4=ms,_0x2af73d,_0x411abb){this['device']=_0xb3d317,this['format']=_0x4db968,this['numIndices']=_0x2904a6,this['usage']=_0x46f7c4,this['id']=ET++,this['impl']=_0xb3d317['createInde'+'xBufferImp'+'l'](this,_0x411abb);const _0x2e0f22=Px[_0x4db968];this['bytesPerIn'+'dex']=_0x2e0f22,this['numBytes']=this['numIndices']*_0x2e0f22,_0x2af73d?this['setData'](_0x2af73d):this['storage']=new ArrayBuffer(this['numBytes']),this['adjustVram'+'SizeTracki'+'ng'](_0xb3d317['_vram'],this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0xcec0de=this['device'],_0x3bc76a=_0xcec0de['buffers']['indexOf'](this);_0x3bc76a!==-(-0x50+0x3*0x167+0x4*-0xf9)&&_0xcec0de['buffers']['splice'](_0x3bc76a,0x454+-0x15*-0x177+-0x6*0x5d9),this['device']['indexBuffe'+'r']===this&&(this['device']['indexBuffe'+'r']=null),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0xcec0de),this['adjustVram'+'SizeTracki'+'ng'](_0xcec0de['_vram'],-this['storage']['byteLength']));}['adjustVram'+'SizeTracki'+'ng'](_0x5380e4,_0xc6ef42){w['trace'](f0,this['id']+'\x20size:\x20'+_0xc6ef42+'\x20vram.ib:\x20'+_0x5380e4['ib']+'\x20=>\x20'+(_0x5380e4['ib']+_0xc6ef42)),_0x5380e4['ib']+=_0xc6ef42;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getNumIndi'+'ces'](){return this['numIndices'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x5585aa){return _0x5585aa['byteLength']!==this['numBytes']?(w['error']('IndexBuffe'+'r:\x20wrong\x20i'+'nitial\x20dat'+'a\x20size:\x20ex'+'pected\x20'+this['numBytes']+',\x20got\x20'+_0x5585aa['byteLength']),!(-0x18e2+0xcb4*0x1+0x1*0xc2f)):(this['storage']=_0x5585aa,this['unlock'](),!(-0xfd3+0x629+0x4d5*0x2));}['_lockTyped'+'Array'](){const _0x33006d=this['lock']();return this['format']===yr?new Uint32Array(_0x33006d):this['format']===ji?new Uint16Array(_0x33006d):new Uint8Array(_0x33006d);}['writeData'](_0xee89ce,_0x53e4b5){const _0x3bf56c=this['_lockTyped'+'Array']();if(_0xee89ce['length']>_0x53e4b5){if(ArrayBuffer['isView'](_0xee89ce))_0xee89ce=_0xee89ce['subarray'](0x19c*-0x2+-0x1c49+0x1f81,_0x53e4b5),_0x3bf56c['set'](_0xee89ce);else{for(let _0x24e5f6=-0x1ff7+-0xa9e+0x2a95;_0x24e5f6<_0x53e4b5;_0x24e5f6++)_0x3bf56c[_0x24e5f6]=_0xee89ce[_0x24e5f6];}}else _0x3bf56c['set'](_0xee89ce);this['unlock']();}['readData'](_0x4fe842){const _0x5c8326=this['_lockTyped'+'Array'](),_0x13f7f2=this['numIndices'];if(ArrayBuffer['isView'](_0x4fe842))_0x4fe842['set'](_0x5c8326);else{_0x4fe842['length']=-0x2033*0x1+0x632+0x1a01;for(let _0x1a986b=0x7e1+0x6d*-0x31+0x115*0xc;_0x1a986b<_0x13f7f2;_0x1a986b++)_0x4fe842[_0x1a986b]=_0x5c8326[_0x1a986b];}return _0x13f7f2;}}class bT{constructor(){h(this,'clearValue',new ie(-0xba*0x28+-0x5cf*-0x5+0x5,0x2a5*-0xd+0x24*0xd2+0x4d9,-0x7*0x9d+-0xe2c+0x1277,-0xfa0+-0x60d*0x1+0x15ae)),h(this,'clearValue'+'Linear',new ie(0x1b9a*0x1+-0xfd9*-0x2+-0x3b4c,-0x1*-0x11b3+-0xbf9+0x5ba*-0x1,0x3*-0x62b+-0x10b+0x9*0x22c,0xba2+-0x151*0x1+-0xa50)),h(this,'clear',!(-0x1b00+0x23c*0x5+0xfd5)),h(this,'store',!(0x42f+-0xa63*0x3+-0x1*-0x1afb)),h(this,'resolve',!(0x31*0x90+0x2*-0x12de+0x4*0x28b)),h(this,'genMipmaps',!(-0xa*0xda+-0x5*-0x757+-0x1c2e));}}class AT{constructor(){h(this,'clearDepth'+'Value',-0x5f*-0x29+0x1f7*-0x2+0x8*-0x169),h(this,'clearStenc'+'ilValue',0x25*0x55+0xa20+0x1669*-0x1),h(this,'clearDepth',!(-0x2*0xbb7+-0x12cc*0x1+0x2a3b)),h(this,'clearStenc'+'il',!(-0x2*0x839+-0xa2d*-0x2+-0x3e7)),h(this,'storeDepth',!(-0x2c9+-0x220f+-0x1*-0x24d9)),h(this,'resolveDep'+'th',!(-0x10eb+-0x2*0x1f5+0x1*0x14d6)),h(this,'storeStenc'+'il',!(0x551+-0x5e2+-0x2*-0x49));}}class ys{constructor(_0x4c6f28){h(this,'_name'),h(this,'device'),h(this,'_enabled',!(-0x11*0x17+-0xb9*0x11+-0x11*-0xd0)),h(this,'_skipStart',!(0x88+-0x12e*0x2+0x7*0x43)),h(this,'_skipEnd',!(-0x1700+-0x17*-0x2b+0x1324)),h(this,'executeEna'+'bled',!(-0xe65*0x2+0x16f5+0x5d5*0x1)),h(this,'renderTarg'+'et'),h(this,'_options'),h(this,'samples',-0xb60+0x3*-0x79b+0x2231),h(this,'colorArray'+'Ops',[]),h(this,'depthStenc'+'ilOps'),h(this,'requiresCu'+'bemaps',!(-0x1ec3+-0x97d+0x2840)),h(this,'fullSizeCl'+'earRect',!(-0x2fb*-0x1+-0x1619+0x131e)),h(this,'beforePass'+'es',[]),h(this,'afterPasse'+'s',[]),(w['assert'](_0x4c6f28),this['device']=_0x4c6f28);}get['colorOps'](){return this['colorArray'+'Ops'][0x1bf*-0x9+-0x1e0a+0x2dc1];}set['name'](_0x199462){this['_name']=_0x199462;}get['name'](){return this['_name']||(this['_name']=this['constructo'+'r']['name']),this['_name'];}set['scaleX'](_0x5a820a){w['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleX']=_0x5a820a;}get['scaleX'](){return this['_options']['scaleX'];}set['scaleY'](_0x2dc951){w['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleY']=_0x2dc951;}get['scaleY'](){return this['_options']['scaleY'];}set['options'](_0x23e115){this['_options']=_0x23e115,_0x23e115&&(this['scaleX']=this['scaleX']??0x9be+-0x104b*-0x1+-0x1a08,this['scaleY']=this['scaleY']??0xcd2+0x151*0xb+0x2*-0xda6);}get['options'](){return this['_options'];}['init'](_0x529053=null,_0xbc790a){this['options']=_0xbc790a,this['renderTarg'+'et']=_0x529053,this['samples']=Math['max'](this['renderTarg'+'et']?this['renderTarg'+'et']['samples']:this['device']['samples'],0x1e5c+-0x175c+-0x6ff),this['allocateAt'+'tachments'](),this['postInit']();}['allocateAt'+'tachments'](){var _0x11dff4,_0x1f5665,_0x1f3ea0,_0x13b113;const _0x3e1b5c=this['renderTarg'+'et'];this['depthStenc'+'ilOps']=new AT(),_0x3e1b5c!=null&&_0x3e1b5c['depthBuffe'+'r']&&(this['depthStenc'+'ilOps']['storeDepth']=!(0x212e+-0x1*-0x1fcb+0x40f9*-0x1));const _0x1e4f3d=_0x3e1b5c?((_0x11dff4=_0x3e1b5c['_colorBuff'+'ers'])==null?void(-0x99c+-0x1eab+0x7*0x5c1):_0x11dff4['length'])??0x1411+0x11*-0xb5+0x203*-0x4:0x643*-0x1+0x9*0x57+0x335*0x1;this['colorArray'+'Ops']['length']=0x2*0x1153+-0x12fb+0x7*-0x23d;for(let _0x176db6=-0x1*-0xbf9+0x2c2+-0x3*0x4e9;_0x176db6<_0x1e4f3d;_0x176db6++){const _0x17a0b9=new bT();this['colorArray'+'Ops'][_0x176db6]=_0x17a0b9,this['samples']===-0x1a25+0x3*-0x1f3+0x1*0x1fff&&(_0x17a0b9['store']=!(-0x526*0x2+-0x1*-0x5a7+-0x1*-0x4a5),_0x17a0b9['resolve']=!(0x9*0x2ab+0x7fc*0x3+-0x2ff6));const _0x3f13db=(_0x1f3ea0=(_0x1f5665=this['renderTarg'+'et'])==null?void(0xbf9+-0xd4*-0xd+0x16bd*-0x1):_0x1f5665['_colorBuff'+'ers'])==null?void(0x6*0x67d+-0x231a*0x1+0x4*-0xf5):_0x1f3ea0[_0x176db6];if((_0x13b113=this['renderTarg'+'et'])!=null&&_0x13b113['mipmaps']&&(_0x3f13db!=null&&_0x3f13db['mipmaps'])){const _0x523763=rn(_0x3f13db['_format']);_0x17a0b9['genMipmaps']=!_0x523763;}}}['destroy'](){}['postInit'](){}['frameUpdat'+'e'](){if(this['_options']&&this['renderTarg'+'et']){const _0x4201de=this['_options']['resizeSour'+'ce']??this['device']['backBuffer'],_0x15e5dc=Math['floor'](_0x4201de['width']*this['scaleX']),_0xa7a6c3=Math['floor'](_0x4201de['height']*this['scaleY']);this['renderTarg'+'et']['resize'](_0x15e5dc,_0xa7a6c3);}}['before'](){}['execute'](){}['after'](){}['onEnable'](){}['onDisable'](){}set['enabled'](_0x3f666c){this['_enabled']!==_0x3f666c&&(this['_enabled']=_0x3f666c,_0x3f666c?this['onEnable']():this['onDisable']());}get['enabled'](){return this['_enabled'];}['setClearCo'+'lor'](_0x3a1c29){const _0x4bce1a=this['colorArray'+'Ops']['length'];for(let _0xf143f9=0x2*-0x2b+0xfce+-0xf78;_0xf143f9<_0x4bce1a;_0xf143f9++){const _0x25027f=this['colorArray'+'Ops'][_0xf143f9];_0x3a1c29&&(_0x25027f['clearValue']['copy'](_0x3a1c29),_0x25027f['clearValue'+'Linear']['linear'](_0x3a1c29)),_0x25027f['clear']=!!_0x3a1c29;}}['setClearDe'+'pth'](_0x38dc65){_0x38dc65&&(this['depthStenc'+'ilOps']['clearDepth'+'Value']=_0x38dc65),this['depthStenc'+'ilOps']['clearDepth']=_0x38dc65!==void(-0x1860+-0x21e2+-0x1*-0x3a42);}['setClearSt'+'encil'](_0x227c62){_0x227c62&&(this['depthStenc'+'ilOps']['clearStenc'+'ilValue']=_0x227c62),this['depthStenc'+'ilOps']['clearStenc'+'il']=_0x227c62!==void(0x24e8+-0xa*0x83+-0x1fca*0x1);}['render'](){if(this['enabled']){const _0x3ab70d=this['device'],_0x321772=this['renderTarg'+'et']!==void(-0x955*0x3+-0x1*0x162a+0x3229*0x1);w['call'](()=>{this['log'](_0x3ab70d,_0x3ab70d['renderPass'+'Index']);}),this['before'](),this['executeEna'+'bled']&&(_0x321772&&!this['_skipStart']&&_0x3ab70d['startRende'+'rPass'](this),this['execute'](),_0x321772&&!this['_skipEnd']&&_0x3ab70d['endRenderP'+'ass'](this)),this['after'](),_0x3ab70d['renderPass'+'Index']++;}}['log'](_0x10fc7d,_0x478980=0x20cd+0x1*0x1d03+-0x3dd0){var _0x189ee5,_0x329f34,_0x4ac9f9;if(mi['get'](em)||mi['get'](tn)){const _0x30f01f=this['renderTarg'+'et']??(this['renderTarg'+'et']===null?_0x10fc7d['backBuffer']:null),_0x23c935=!!(_0x30f01f!=null&&_0x30f01f['impl']['assignedCo'+'lorTexture'])||(_0x30f01f==null?void(-0x185*0x1+0x1be8+-0x1a63):_0x30f01f['impl']['suppliedCo'+'lorFramebu'+'ffer'])!==void(0x1*-0x245b+-0x1359+0x37b4),_0x1bea76=((_0x189ee5=_0x30f01f==null?void(0x5c4+0x128c+-0x1850):_0x30f01f['_colorBuff'+'ers'])==null?void(-0x205+0xbf*-0x7+0x73e):_0x189ee5['length'])??(_0x23c935?-0x1f38+-0x260b+0x4544:0x1*0x65a+-0xa*-0x1e9+-0x1974),_0x503202=_0x30f01f==null?void(-0x65*0xb+-0x1757+0x1bae):_0x30f01f['depth'],_0x2750e1=_0x30f01f==null?void(-0x3*0xa84+0x1*0x1245+0xd47*0x1):_0x30f01f['stencil'],_0x304177=_0x30f01f==null?void(0x1d61+-0x39*0x53+-0xae6*0x1):_0x30f01f['mipLevel'],_0x367271=_0x30f01f?'\x20RT:\x20'+(_0x30f01f?_0x30f01f['name']:'NULL')+'\x20'+(_0x1bea76>0x5*0x56e+0x1564+-0x26*0x147?'[Color'+(_0x1bea76>-0x17a7+0x178b+0x1d*0x1?'\x20x\x20'+_0x1bea76:'')+']':'')+(_0x503202?'[Depth]':'')+(_0x2750e1?'[Stencil]':'')+'\x20'+_0x30f01f['width']+'\x20x\x20'+_0x30f01f['height']+(this['samples']>-0x32d*0x6+0x7*0x47b+-0xc4f*0x1?'\x20samples:\x20'+this['samples']:'')+(_0x304177>-0x1e8b+-0x1179*-0x2+-0x467?'\x20mipLevel:'+'\x20'+_0x304177:''):'',_0x42c3e8=this['_skipStart']?'++':_0x478980['toString']()['padEnd'](0x2*0x4+-0x1cc2+0x1cbc,'\x20');w['trace'](em,_0x42c3e8+':\x20'+this['name']['padEnd'](-0x235e+-0x2605*-0x1+-0x293,'\x20')+(this['executeEna'+'bled']?'':'\x20DISABLED\x20')+_0x367271['padEnd'](-0x15a2+-0x1f36+0x34f6));for(let _0x4be451=0x1*-0x4d+0x937+-0x8ea;_0x4be451<_0x1bea76;_0x4be451++){const _0x5d7077=this['colorArray'+'Ops'][_0x4be451],_0x50d676=(_0x329f34=Nt['get'](_0x23c935?_0x10fc7d['backBuffer'+'Format']:_0x30f01f['getColorBu'+'ffer'](_0x4be451)['format']))==null?void(-0x15f7+-0x4*0x28d+0x202b):_0x329f34['name'];w['trace'](tn,'\x20\x20\x20\x20color['+_0x4be451+']:\x20'+(_0x5d7077['clear']?'clear':'load')+'->'+(_0x5d7077['store']?'store':'discard')+'\x20'+(_0x5d7077['resolve']?'resolve\x20':'')+(_0x5d7077['genMipmaps']?'mipmaps\x20':'')+'\x20[format:\x20'+_0x50d676+']\x20'+(_0x5d7077['clear']?'[clear:\x20'+_0x5d7077['clearValue']['toString'](!(-0x7b0+-0x6ca*-0x1+0xe6),!(0x1b61+0x1a*-0x129+0x2c9))+']':''));}if(this['depthStenc'+'ilOps']){const _0x49fc38=''+(_0x30f01f['depthBuffe'+'r']?'\x20[format:\x20'+((_0x4ac9f9=Nt['get'](_0x30f01f['depthBuffe'+'r']['format']))==null?void(0x7a2*0x4+0x13f8+-0x3280):_0x4ac9f9['name'])+']':'');_0x503202&&w['trace'](tn,'\x20\x20\x20\x20depthO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearDepth']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeDepth']?'store':'discard')+(this['depthStenc'+'ilOps']['resolveDep'+'th']?'\x20resolve':'')+_0x49fc38+(this['depthStenc'+'ilOps']['clearDepth']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearDepth'+'Value']+']':'')),_0x2750e1&&w['trace'](tn,'\x20\x20\x20\x20stencO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeStenc'+'il']?'store':'discard')+_0x49fc38+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearStenc'+'ilValue']+']':''));}}}}function CT(_0x1fe98c){this['array'][this['index']]=_0x1fe98c;}function PT(_0x5c1206,_0x5ede0e){this['array'][this['index']]=_0x5c1206,this['array'][this['index']+(0x395+0x71+-0x31*0x15)]=_0x5ede0e;}function MT(_0x44a06b,_0x2ff020,_0x4e7e86){this['array'][this['index']]=_0x44a06b,this['array'][this['index']+(0x1*-0x1a35+-0x70*0x52+-0x2*-0x1f0b)]=_0x2ff020,this['array'][this['index']+(-0x18a*0xd+0x1993*-0x1+0x2d97)]=_0x4e7e86;}function DT(_0x2023cc,_0x3c008d,_0x2b20b4,_0x2054ed){this['array'][this['index']]=_0x2023cc,this['array'][this['index']+(0x683*0x1+-0xdc5+0x743)]=_0x3c008d,this['array'][this['index']+(-0x2*-0x35f+-0x1*-0x11fb+-0x3*0x83d)]=_0x2b20b4,this['array'][this['index']+(-0xd65+-0x1c2b*-0x1+-0xec3*0x1)]=_0x2054ed;}function IT(_0x19eae3,_0x14a243,_0x47c035){this['array'][_0x19eae3]=_0x14a243[_0x47c035];}function LT(_0x2bef06,_0x3539aa,_0x1b9991){this['array'][_0x2bef06]=_0x3539aa[_0x1b9991],this['array'][_0x2bef06+(0x22df+0x13*-0x1ed+0x1b9)]=_0x3539aa[_0x1b9991+(0x1a65+-0x185f+-0x1*0x205)];}function RT(_0x471703,_0x290f13,_0x49b9ee){this['array'][_0x471703]=_0x290f13[_0x49b9ee],this['array'][_0x471703+(0x1082+0x1016+0x1*-0x2097)]=_0x290f13[_0x49b9ee+(-0x4f9*-0x2+-0x2398*-0x1+-0x2d89)],this['array'][_0x471703+(0x5*-0x799+-0x31d*-0x9+0x9fa*0x1)]=_0x290f13[_0x49b9ee+(0x19fe+-0x243b+0xa3f*0x1)];}function OT(_0x2b5318,_0x229857,_0x9881d5){this['array'][_0x2b5318]=_0x229857[_0x9881d5],this['array'][_0x2b5318+(-0x12*-0x22a+0x11a9+0x389c*-0x1)]=_0x229857[_0x9881d5+(0x84e+-0x36a+0x8b*-0x9)],this['array'][_0x2b5318+(0x1f*-0x130+0x1*-0x1831+0x1*0x3d03)]=_0x229857[_0x9881d5+(0xe46*0x2+0x1dd8+-0x3a62)],this['array'][_0x2b5318+(-0x3ab*-0x7+-0x2*-0x4c6+0x2*-0x119b)]=_0x229857[_0x9881d5+(0x22e1+0xe*0x142+-0x347a)];}function FT(_0x205a3f,_0x17e03c,_0x1d1902){_0x17e03c[_0x1d1902]=this['array'][_0x205a3f];}function NT(_0x1fb3fd,_0x4f33ae,_0x4d7c00){_0x4f33ae[_0x4d7c00]=this['array'][_0x1fb3fd],_0x4f33ae[_0x4d7c00+(0x8*-0x4ca+-0x50c+0x2b5d)]=this['array'][_0x1fb3fd+(-0x1*-0x250d+0x1930+-0x3e3c)];}function kT(_0x26752a,_0x4a114b,_0xdfe570){_0x4a114b[_0xdfe570]=this['array'][_0x26752a],_0x4a114b[_0xdfe570+(0x24b0*-0x1+-0x154d+0x39fe)]=this['array'][_0x26752a+(-0x1bf*-0x6+0xa2*0x29+-0x246b)],_0x4a114b[_0xdfe570+(-0xe*0x274+0x25*0xdb+0x2b3*0x1)]=this['array'][_0x26752a+(0x23eb+0x1fa6+0x481*-0xf)];}function UT(_0x26e640,_0x4cefe6,_0x5f5ddc){_0x4cefe6[_0x5f5ddc]=this['array'][_0x26e640],_0x4cefe6[_0x5f5ddc+(0x18bb+0x202a+-0x38e4)]=this['array'][_0x26e640+(0x1e80+-0x185e+-0x621*0x1)],_0x4cefe6[_0x5f5ddc+(0x1*-0x23a5+-0x1*0x1f97+0x433e)]=this['array'][_0x26e640+(-0xa*0x331+0x306+0x1ce6)],_0x4cefe6[_0x5f5ddc+(-0x2*0x1b7+-0x40*0x29+0xdb1)]=this['array'][_0x26e640+(-0x2686*-0x1+0x18df+-0x3f62)];}class BT{constructor(_0x499ea2,_0x147781,_0x3753b5){switch(this['index']=0x2*-0x6df+0x1*-0x9c7+0x1785,this['numCompone'+'nts']=_0x147781['numCompone'+'nts'],_0x3753b5['interleave'+'d']?this['array']=new _n[_0x147781['dataType']](_0x499ea2,_0x147781['offset']):this['array']=new _n[_0x147781['dataType']](_0x499ea2,_0x147781['offset'],_0x3753b5['vertexCoun'+'t']*_0x147781['numCompone'+'nts']),this['stride']=_0x147781['stride']/this['array']['constructo'+'r']['BYTES_PER_'+'ELEMENT'],_0x147781['numCompone'+'nts']){case 0xff4+-0x224*-0x1+0x1217*-0x1:this['set']=CT,this['getToArray']=FT,this['setFromArr'+'ay']=IT;break;case-0x1*0xe13+0xe7c+0x67*-0x1:this['set']=PT,this['getToArray']=NT,this['setFromArr'+'ay']=LT;break;case-0xb4+0x119d+0x26a*-0x7:this['set']=MT,this['getToArray']=kT,this['setFromArr'+'ay']=RT;break;case 0x1*0x1fdf+-0x751+0x188a*-0x1:this['set']=DT,this['getToArray']=UT,this['setFromArr'+'ay']=OT;break;}}['get'](_0x51d749){return this['array'][this['index']+_0x51d749];}['set'](_0x56a24a,_0x411a88,_0x5a3879,_0x459513){}['getToArray'](_0x3fe3c2,_0x19218a,_0xc4b88a){}['setFromArr'+'ay'](_0xf520f4,_0x26d182,_0x151644){}}class Ao{constructor(_0x2c005c){this['vertexBuff'+'er']=_0x2c005c,this['vertexForm'+'atSize']=_0x2c005c['getFormat']()['size'],this['buffer']=this['vertexBuff'+'er']['lock'](),this['accessors']=[],this['element']={};const _0x1f435b=this['vertexBuff'+'er']['getFormat']();for(let _0x15a4f4=-0x1af5*0x1+0x1581+-0x574*-0x1;_0x15a4f4<_0x1f435b['elements']['length'];_0x15a4f4++){const _0x1a3121=_0x1f435b['elements'][_0x15a4f4];this['accessors'][_0x15a4f4]=new BT(this['buffer'],_0x1a3121,_0x1f435b),this['element'][_0x1a3121['name']]=this['accessors'][_0x15a4f4];}}['next'](_0x5ca4ab=0x3bc+0x1c2+0x5*-0x119){let _0x156fb8=0xd*-0x11b+-0xb6e+0x529*0x5;const _0x57549a=this['accessors'],_0x51882f=this['accessors']['length'];for(;_0x156fb8<_0x51882f;){const _0x54408b=_0x57549a[_0x156fb8++];_0x54408b['index']+=_0x5ca4ab*_0x54408b['stride'];}}['end'](){this['vertexBuff'+'er']['unlock']();}['writeData'](_0x400fdc,_0x2afa85,_0x25e871){const _0x25128a=this['element'][_0x400fdc];if(_0x25128a){_0x25e871>this['vertexBuff'+'er']['numVertice'+'s']&&(w['error']('NumVertice'+'s\x20provided'+'\x20to\x20setDat'+'a:\x20'+_0x25e871+('\x20is\x20larger'+'\x20than\x20spac'+'e\x20in\x20Verte'+'xBuffer:\x20')+this['vertexBuff'+'er']['numVertice'+'s']),_0x25e871=this['vertexBuff'+'er']['numVertice'+'s']);const _0x3ab77c=_0x25128a['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){let _0x4185dc=0xb98+-0xac5*-0x3+-0x2be7;for(let _0x2e2831=0x2662+-0x2361+-0x301;_0x2e2831<_0x25e871;_0x2e2831++)_0x25128a['setFromArr'+'ay'](_0x4185dc,_0x2afa85,_0x2e2831*_0x3ab77c),_0x4185dc+=_0x25128a['stride'];}else{if(_0x2afa85['length']>_0x25e871*_0x3ab77c){const _0x34e5b0=_0x25e871*_0x3ab77c;if(ArrayBuffer['isView'](_0x2afa85))_0x2afa85=_0x2afa85['subarray'](-0x5*0x49+0x1e13+0x26*-0xc1,_0x34e5b0),_0x25128a['array']['set'](_0x2afa85);else{for(let _0x18a75d=0x129f+-0x13e*-0x1f+-0xf*0x3cf;_0x18a75d<_0x34e5b0;_0x18a75d++)_0x25128a['array'][_0x18a75d]=_0x2afa85[_0x18a75d];}}else _0x25128a['array']['set'](_0x2afa85);}}}['readData'](_0x183589,_0x423ffd){const _0x2c655e=this['element'][_0x183589];let _0x4ef172=-0x1*0x85f+-0xf1+0x950;if(_0x2c655e){_0x4ef172=this['vertexBuff'+'er']['numVertice'+'s'];let _0x5a1086;const _0x1a2cab=_0x2c655e['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){Array['isArray'](_0x423ffd)&&(_0x423ffd['length']=0xcd9+-0x53*-0x13+0x1*-0x1302),_0x2c655e['index']=-0x741*0x3+0x25d4+-0x1011;let _0x5b37e4=0x2190+-0x1763+-0x5*0x209;for(_0x5a1086=-0x50b*-0x7+0x197e+-0x3ccb*0x1;_0x5a1086<_0x4ef172;_0x5a1086++)_0x2c655e['getToArray'](_0x5b37e4,_0x423ffd,_0x5a1086*_0x1a2cab),_0x5b37e4+=_0x2c655e['stride'];}else{if(ArrayBuffer['isView'](_0x423ffd))_0x423ffd['set'](_0x2c655e['array']);else{_0x423ffd['length']=-0x769*-0x2+0x5*0x2e+-0x2*0x7dc;const _0x2a1ef0=_0x4ef172*_0x1a2cab;for(_0x5a1086=-0x14ea+0x3b*-0x51+0x2795;_0x5a1086<_0x2a1ef0;_0x5a1086++)_0x423ffd[_0x5a1086]=_0x2c655e['array'][_0x5a1086];}}}return _0x4ef172;}}const zT=-(-0x91a+-0x15d1+-0x1eec*-0x1);class VT{constructor(_0x132cea,_0x51510e){h(this,'key',null),h(this,'element',null),h(this,'event',null),_0x51510e&&(this['key']=_0x51510e['keyCode'],this['element']=_0x51510e['target'],this['event']=_0x51510e);}}const Fl=new VT();function yd(_0x5c6d66){return Fl['key']=_0x5c6d66['keyCode'],Fl['element']=_0x5c6d66['target'],Fl['event']=_0x5c6d66,Fl;}function Nl(_0x9bc749){return typeof _0x9bc749=='string'?_0x9bc749['toUpperCas'+'e']()['charCodeAt'](-0x3b2+0x2087*0x1+-0x1*0x1cd5):_0x9bc749;}const GT={0x9:'Tab',0xd:'Enter',0x10:'Shift',0x11:'Control',0x12:'Alt',0x1b:'Escape',0x25:'Left',0x26:'Up',0x27:'Right',0x28:'Down',0x2e:'Delete',0x5b:'Win'};class Nm extends me{constructor(_0x1012c0,_0x4c9d99={}){super(),h(this,'_element',null),h(this,'_keymap',{}),h(this,'_lastmap',{}),(this['_keyDownHa'+'ndler']=this['_handleKey'+'Down']['bind'](this),this['_keyUpHand'+'ler']=this['_handleKey'+'Up']['bind'](this),this['_keyPressH'+'andler']=this['_handleKey'+'Press']['bind'](this),this['_visibilit'+'yChangeHan'+'dler']=this['_handleVis'+'ibilityCha'+'nge']['bind'](this),this['_windowBlu'+'rHandler']=this['_handleWin'+'dowBlur']['bind'](this),_0x1012c0&&this['attach'](_0x1012c0),this['preventDef'+'ault']=_0x4c9d99['preventDef'+'ault']||!(0x23a*-0xc+-0x19de+0x3497),this['stopPropag'+'ation']=_0x4c9d99['stopPropag'+'ation']||!(0x43+-0x527+0x4e5));}['attach'](_0x211ddd){this['_element']&&this['detach'](),this['_element']=_0x211ddd,this['_element']['addEventLi'+'stener']('keydown',this['_keyDownHa'+'ndler'],!(0x1386+0x36d*0x2+-0x9d*0x2b)),this['_element']['addEventLi'+'stener']('keypress',this['_keyPressH'+'andler'],!(0x2489+-0x1*-0xb52+0xa*-0x4c9)),this['_element']['addEventLi'+'stener']('keyup',this['_keyUpHand'+'ler'],!(-0x1*-0x615+-0x1*-0x917+-0x161*0xb)),document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x30*0xf+-0x6*-0x3d7+-0x1439)),window['addEventLi'+'stener']('blur',this['_windowBlu'+'rHandler'],!(-0x1345*-0x1+-0x23ac+0x1068));}['detach'](){if(!this['_element']){w['warn']('Unable\x20to\x20'+'detach\x20key'+'board.\x20It\x20'+'is\x20not\x20att'+'ached\x20to\x20a'+'n\x20element.');return;}this['_element']['removeEven'+'tListener']('keydown',this['_keyDownHa'+'ndler']),this['_element']['removeEven'+'tListener']('keypress',this['_keyPressH'+'andler']),this['_element']['removeEven'+'tListener']('keyup',this['_keyUpHand'+'ler']),this['_element']=null,document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(0x16c3+-0xcea+-0x3*0x348)),window['removeEven'+'tListener']('blur',this['_windowBlu'+'rHandler'],!(-0x1*0x964+-0x1*0x1eb9+0x1a*0x18b));}['toKeyIdent'+'ifier'](_0xcc6211){_0xcc6211=Nl(_0xcc6211);const _0x26f727=GT[_0xcc6211['toString']()];if(_0x26f727)return _0x26f727;let _0x2ea3cb=_0xcc6211['toString'](0x24ed+-0x690+-0x1e4d)['toUpperCas'+'e']();const _0xdce62c=_0x2ea3cb['length'];for(let _0xc89e26=0x1*0x2247+0x24c7*-0x1+0x20*0x14;_0xc89e26<-0x1*0x3cd+-0x97*-0x7+-0x50-_0xdce62c;_0xc89e26++)_0x2ea3cb='0'+_0x2ea3cb;return'U+'+_0x2ea3cb;}['_handleKey'+'Down'](_0x32d756){const _0x3566c4=_0x32d756['keyCode']||_0x32d756['charCode'];if(_0x3566c4===void(0x1af1*0x1+-0x1b63+0x6*0x13))return;const _0x5e61e5=this['toKeyIdent'+'ifier'](_0x3566c4);this['_keymap'][_0x5e61e5]=!(-0xf19+0x182*-0x4+0x1521),this['fire']('keydown',yd(_0x32d756)),this['preventDef'+'ault']&&_0x32d756['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x32d756['stopPropag'+'ation']();}['_handleKey'+'Up'](_0x5dd3fa){const _0x584d21=_0x5dd3fa['keyCode']||_0x5dd3fa['charCode'];if(_0x584d21===void(0x448+0x1*-0x220f+0x1dc7))return;const _0x335b89=this['toKeyIdent'+'ifier'](_0x584d21);delete this['_keymap'][_0x335b89],this['fire']('keyup',yd(_0x5dd3fa)),this['preventDef'+'ault']&&_0x5dd3fa['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x5dd3fa['stopPropag'+'ation']();}['_handleKey'+'Press'](_0x3cc171){this['fire']('keypress',yd(_0x3cc171)),this['preventDef'+'ault']&&_0x3cc171['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x3cc171['stopPropag'+'ation']();}['_handleVis'+'ibilityCha'+'nge'](){document['visibility'+'State']==='hidden'&&this['_handleWin'+'dowBlur']();}['_handleWin'+'dowBlur'](){this['_keymap']={},this['_lastmap']={};}['update'](){for(const _0x2ef933 in this['_lastmap'])delete this['_lastmap'][_0x2ef933];for(const _0x59df53 in this['_keymap'])this['_keymap']['hasOwnProp'+'erty'](_0x59df53)&&(this['_lastmap'][_0x59df53]=this['_keymap'][_0x59df53]);}['isPressed'](_0x5461aa){const _0x1e0d45=Nl(_0x5461aa),_0x24f6de=this['toKeyIdent'+'ifier'](_0x1e0d45);return!!this['_keymap'][_0x24f6de];}['wasPressed'](_0x4f8464){const _0x4a592c=Nl(_0x4f8464),_0x3fc96d=this['toKeyIdent'+'ifier'](_0x4a592c);return!!this['_keymap'][_0x3fc96d]&&!this['_lastmap'][_0x3fc96d];}['wasRelease'+'d'](_0x38da75){const _0x5e4b02=Nl(_0x38da75),_0x55b059=this['toKeyIdent'+'ifier'](_0x5e4b02);return!this['_keymap'][_0x55b059]&&!!this['_lastmap'][_0x55b059];}}h(Nm,'EVENT_KEYD'+'OWN','keydown'),h(Nm,'EVENT_KEYU'+'P','keyup');function Lf(){return!!(document['pointerLoc'+'kElement']||document['mozPointer'+'LockElemen'+'t']||document['webkitPoin'+'terLockEle'+'ment']);}class Zr{constructor(_0x1e8d55,_0x13994f){h(this,'x',-0x2*-0x9ac+-0x13*0x15d+0x68f),h(this,'y',0x1*0xbf+-0x11*-0x5f+0x387*-0x2),h(this,'dx',-0x781*0x4+-0x20c7+-0x3ecb*-0x1),h(this,'dy',-0x1c00+0x6eb+-0x1*-0x1515),h(this,'button',zT),h(this,'wheelDelta',-0x1aad+-0x6f8+0x21a5),h(this,'element'),h(this,'ctrlKey',!(-0x135+0xfc7*-0x1+0x10fd*0x1)),h(this,'altKey',!(-0x3f*-0x76+-0x4*0x91f+0x1*0x773)),h(this,'shiftKey',!(0x2*0x7a2+-0x1517*0x1+0x5d4)),h(this,'metaKey',!(0x1ed5+-0x2450+0x34*0x1b)),h(this,'event');let _0x110a06={'x':0x0,'y':0x0};if(_0x13994f){if(_0x13994f instanceof Zr)throw Error('Expected\x20M'+'ouseEvent');_0x110a06=_0x1e8d55['_getTarget'+'Coords'](_0x13994f);}else _0x13994f={};if(_0x110a06)this['x']=_0x110a06['x'],this['y']=_0x110a06['y'];else{if(Lf())this['x']=0x165+0x1408*0x1+-0x5*0x449,this['y']=-0xb83*-0x2+0x1717+-0x5*0x939;else return;}_0x13994f['type']==='wheel'&&(_0x13994f['deltaY']>0x225*0x2+0x92*0x28+0x1b1a*-0x1?this['wheelDelta']=0x1f26+-0x6*-0x9b+-0x22c7:_0x13994f['deltaY']<0x26d9+0x2339+-0x4a12&&(this['wheelDelta']=-(-0x1*-0x137+-0xeff+-0xdc9*-0x1))),Lf()?(this['dx']=_0x13994f['movementX']||_0x13994f['webkitMove'+'mentX']||_0x13994f['mozMovemen'+'tX']||0x24fc+-0x7ed*0x3+-0xd35,this['dy']=_0x13994f['movementY']||_0x13994f['webkitMove'+'mentY']||_0x13994f['mozMovemen'+'tY']||-0x3*0x86a+0x2298+-0x18f*0x6):(this['dx']=this['x']-_0x1e8d55['_lastX'],this['dy']=this['y']-_0x1e8d55['_lastY']),(_0x13994f['type']==='mousedown'||_0x13994f['type']==='mouseup')&&(this['button']=_0x13994f['button']),this['buttons']=_0x1e8d55['_buttons']['slice'](-0x1f*0x73+0x1232+-0x445),this['element']=_0x13994f['target'],this['ctrlKey']=_0x13994f['ctrlKey']??!(-0x1*-0x885+-0x1f9+-0x68b*0x1),this['altKey']=_0x13994f['altKey']??!(0x174a*0x1+-0xc4b+-0xe*0xc9),this['shiftKey']=_0x13994f['shiftKey']??!(-0x1f97+-0x1b6+0x7*0x4c2),this['metaKey']=_0x13994f['metaKey']??!(0x11a3+0x22f5+-0x3497),this['event']=_0x13994f;}}class kl extends me{constructor(_0x299925){super(),h(this,'_lastX',-0x1bf+0x7*-0x222+-0x1*-0x10ad),h(this,'_lastY',0x1c42+0xa*-0x122+-0x10ee),h(this,'_buttons',[!(-0x3e*-0x13+-0x2*0xe35+0x1d5*0xd),!(0x1*0x6da+-0x3*0x3db+0x2*0x25c),!(-0xffb+0x4e5*-0x3+0x1eab)]),h(this,'_lastbutto'+'ns',[!(-0x4*-0x805+0x196a+-0x397d),!(-0x342+-0x772+0xab5),!(0x21c0+0x3*0x641+-0x263*0x16)]),h(this,'_target',null),h(this,'_attached',!(-0x18c7+-0x1126+0x29ee)),(this['_upHandler']=this['_handleUp']['bind'](this),this['_downHandl'+'er']=this['_handleDow'+'n']['bind'](this),this['_moveHandl'+'er']=this['_handleMov'+'e']['bind'](this),this['_wheelHand'+'ler']=this['_handleWhe'+'el']['bind'](this),this['_contextMe'+'nuHandler']=_0x59647f=>{_0x59647f['preventDef'+'ault']();},this['attach'](_0x299925));}static['isPointerL'+'ocked'](){return Lf();}['attach'](_0x2170cd){if(this['_target']=_0x2170cd,this['_attached'])return;this['_attached']=!(-0x220f+-0x1977+0x3b86);const _0x259a06={'passive':!(0x2569+-0x1d*-0x14e+0x259f*-0x2)},_0x50aecc=Me['passiveEve'+'nts']?_0x259a06:!(0x79e+0x2*-0xd2a+0x12b7*0x1);window['addEventLi'+'stener']('mouseup',this['_upHandler'],_0x50aecc),window['addEventLi'+'stener']('mousedown',this['_downHandl'+'er'],_0x50aecc),window['addEventLi'+'stener']('mousemove',this['_moveHandl'+'er'],_0x50aecc),window['addEventLi'+'stener']('wheel',this['_wheelHand'+'ler'],_0x50aecc);}['detach'](){if(!this['_attached'])return;this['_attached']=!(0x74*-0x26+0x218c+-0xc7*0x15),this['_target']=null;const _0x355860={'passive':!(-0x3*-0xce7+0x1b21+-0x41d5)},_0x43cc6f=Me['passiveEve'+'nts']?_0x355860:!(0x1df*-0x3+0x8bd*0x1+0x2f*-0x11);window['removeEven'+'tListener']('mouseup',this['_upHandler'],_0x43cc6f),window['removeEven'+'tListener']('mousedown',this['_downHandl'+'er'],_0x43cc6f),window['removeEven'+'tListener']('mousemove',this['_moveHandl'+'er'],_0x43cc6f),window['removeEven'+'tListener']('wheel',this['_wheelHand'+'ler'],_0x43cc6f);}['disableCon'+'textMenu'](){this['_target']&&this['_target']['addEventLi'+'stener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enableCont'+'extMenu'](){this['_target']&&this['_target']['removeEven'+'tListener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enablePoin'+'terLock'](_0x5d32e7,_0xb832ed){if(!document['body']['requestPoi'+'nterLock']){_0xb832ed&&_0xb832ed();return;}const _0x12b369=()=>{_0x5d32e7(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x12b369);},_0x23b5a4=()=>{_0xb832ed(),document['removeEven'+'tListener']('pointerloc'+'kerror',_0x23b5a4);};_0x5d32e7&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x12b369,!(0x146*-0x2+-0x4de+-0x76b*-0x1)),_0xb832ed&&document['addEventLi'+'stener']('pointerloc'+'kerror',_0x23b5a4,!(0x2302+-0x142e+-0xed3)),document['body']['requestPoi'+'nterLock']();}['disablePoi'+'nterLock'](_0x55245f){if(!document['exitPointe'+'rLock'])return;const _0x19837d=()=>{_0x55245f(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x19837d);};_0x55245f&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x19837d,!(0xa7*-0x3a+-0xa5b+0x3032)),document['exitPointe'+'rLock']();}['update'](){this['_lastbutto'+'ns'][0x151b+0x25b5+0x1*-0x3ad0]=this['_buttons'][-0x20b6+0x2*-0x78a+0x2fca],this['_lastbutto'+'ns'][0x34b*-0x1+0xba*0x10+0x854*-0x1]=this['_buttons'][-0x8cd+-0x253f+-0x1*-0x2e0d],this['_lastbutto'+'ns'][0x1ba4+-0x3*-0x1c+0x3*-0x952]=this['_buttons'][-0x178f+0x22*-0x3e+-0x7*-0x48b];}['isPressed'](_0x77a0ae){return this['_buttons'][_0x77a0ae];}['wasPressed'](_0x1959bb){return this['_buttons'][_0x1959bb]&&!this['_lastbutto'+'ns'][_0x1959bb];}['wasRelease'+'d'](_0x3f0b6e){return!this['_buttons'][_0x3f0b6e]&&this['_lastbutto'+'ns'][_0x3f0b6e];}['_handleUp'](_0x289677){this['_buttons'][_0x289677['button']]=!(-0x1661+-0x590+0x49*0x62);const _0x5ad309=new Zr(this,_0x289677);_0x5ad309['event']&&this['fire']('mouseup',_0x5ad309);}['_handleDow'+'n'](_0x31abcb){this['_buttons'][_0x31abcb['button']]=!(-0x1249*0x2+-0x210a*0x1+0x42*0x10e);const _0x338d12=new Zr(this,_0x31abcb);_0x338d12['event']&&this['fire']('mousedown',_0x338d12);}['_handleMov'+'e'](_0x52c538){const _0x57ad65=new Zr(this,_0x52c538);_0x57ad65['event']&&(this['fire']('mousemove',_0x57ad65),this['_lastX']=_0x57ad65['x'],this['_lastY']=_0x57ad65['y']);}['_handleWhe'+'el'](_0x5d248e){const _0x242555=new Zr(this,_0x5d248e);_0x242555['event']&&this['fire']('mousewheel',_0x242555);}['_getTarget'+'Coords'](_0x383bd8){const _0x2039a9=this['_target']['getBoundin'+'gClientRec'+'t'](),_0x4cbc90=Math['floor'](_0x2039a9['left']),_0x1c0914=Math['floor'](_0x2039a9['top']);return _0x383bd8['clientX']<_0x4cbc90||_0x383bd8['clientX']>=_0x4cbc90+this['_target']['clientWidt'+'h']||_0x383bd8['clientY']<_0x1c0914||_0x383bd8['clientY']>=_0x1c0914+this['_target']['clientHeig'+'ht']?null:{'x':_0x383bd8['clientX']-_0x4cbc90,'y':_0x383bd8['clientY']-_0x1c0914};}}h(kl,'EVENT_MOUS'+'EMOVE','mousemove'),h(kl,'EVENT_MOUS'+'EDOWN','mousedown'),h(kl,'EVENT_MOUS'+'EUP','mouseup'),h(kl,'EVENT_MOUS'+'EWHEEL','mousewheel');const Oe=class Oe{['get'](_0x2b2e4d,_0x562834,_0x46a172){typeof _0x562834=='function'&&(_0x46a172=_0x562834,_0x562834={});const _0x4a1cc6=this['request']('GET',_0x2b2e4d,_0x562834,_0x46a172),{progress:_0x34bda6}=_0x562834;if(_0x34bda6){const _0x39a1cb=_0x24ea72=>{_0x24ea72['lengthComp'+'utable']&&_0x34bda6['fire']('progress',_0x24ea72['loaded'],_0x24ea72['total']);},_0x3193fd=_0x58f7a9=>{_0x39a1cb(_0x58f7a9),_0x4a1cc6['removeEven'+'tListener']('loadstart',_0x39a1cb),_0x4a1cc6['removeEven'+'tListener']('progress',_0x39a1cb),_0x4a1cc6['removeEven'+'tListener']('loadend',_0x3193fd);};_0x4a1cc6['addEventLi'+'stener']('loadstart',_0x39a1cb),_0x4a1cc6['addEventLi'+'stener']('progress',_0x39a1cb),_0x4a1cc6['addEventLi'+'stener']('loadend',_0x3193fd);}return _0x4a1cc6;}['post'](_0x54689b,_0x109682,_0x124e74,_0x15c0b5){return typeof _0x124e74=='function'&&(_0x15c0b5=_0x124e74,_0x124e74={}),_0x124e74['postdata']=_0x109682,this['request']('POST',_0x54689b,_0x124e74,_0x15c0b5);}['put'](_0x4ee190,_0x4c104f,_0x1c3c81,_0x230f6f){return typeof _0x1c3c81=='function'&&(_0x230f6f=_0x1c3c81,_0x1c3c81={}),_0x1c3c81['postdata']=_0x4c104f,this['request']('PUT',_0x4ee190,_0x1c3c81,_0x230f6f);}['del'](_0x574db6,_0x3b4756,_0x2cabff){return typeof _0x3b4756=='function'&&(_0x2cabff=_0x3b4756,_0x3b4756={}),this['request']('DELETE',_0x574db6,_0x3b4756,_0x2cabff);}['request'](_0x441fe9,_0x37c76c,_0x1a8507,_0x2877ce){let _0x3c285e,_0x2d1cce,_0x16c0be,_0x473f99=!(0x1687*0x1+-0x2ba*-0x3+-0x1eb4);if(typeof _0x1a8507=='function'&&(_0x2877ce=_0x1a8507,_0x1a8507={}),_0x1a8507['retry']&&(_0x1a8507=Object['assign']({'retries':0x0,'maxRetries':0x5},_0x1a8507)),_0x1a8507['callback']=_0x2877ce,_0x1a8507['async']==null&&(_0x1a8507['async']=!(0x15a*-0x5+-0x26ca+0x2d8c)),_0x1a8507['headers']==null&&(_0x1a8507['headers']={}),_0x1a8507['postdata']!=null){if(_0x1a8507['postdata']instanceof Document)_0x16c0be=_0x1a8507['postdata'];else{if(_0x1a8507['postdata']instanceof FormData)_0x16c0be=_0x1a8507['postdata'];else{if(_0x1a8507['postdata']instanceof Object){let _0x3d3798=_0x1a8507['headers']['Content-Ty'+'pe'];switch(_0x3d3798===void(-0x862+-0x2125*-0x1+-0x3*0x841)&&(_0x1a8507['headers']['Content-Ty'+'pe']=Oe['ContentTyp'+'e']['FORM_URLEN'+'CODED'],_0x3d3798=_0x1a8507['headers']['Content-Ty'+'pe']),_0x3d3798){case Oe['ContentTyp'+'e']['FORM_URLEN'+'CODED']:{_0x16c0be='';let _0x31e04d=!(0x4ea*0x3+-0x1b51+0x431*0x3);for(const _0x1dbc4b in _0x1a8507['postdata'])if(_0x1a8507['postdata']['hasOwnProp'+'erty'](_0x1dbc4b)){_0x31e04d?_0x31e04d=!(0x107f+-0xbd7+0x18d*-0x3):_0x16c0be+='&';const _0x5da6dd=encodeURIComponent(_0x1dbc4b),_0x5b6a0b=encodeURIComponent(_0x1a8507['postdata'][_0x1dbc4b]);_0x16c0be+=_0x5da6dd+'='+_0x5b6a0b;}break;}default:case Oe['ContentTyp'+'e']['JSON']:_0x3d3798==null&&(_0x1a8507['headers']['Content-Ty'+'pe']=Oe['ContentTyp'+'e']['JSON']),_0x16c0be=JSON['stringify'](_0x1a8507['postdata']);break;}}else _0x16c0be=_0x1a8507['postdata'];}}}if(_0x1a8507['cache']===!(0x892*-0x2+0x2*0x5bc+-0x5ad*-0x1)){const _0x2e8f20=de();_0x3c285e=new dd(_0x37c76c),_0x3c285e['query']?_0x3c285e['query']=_0x3c285e['query']+'&ts='+_0x2e8f20:_0x3c285e['query']='ts='+_0x2e8f20,_0x37c76c=_0x3c285e['toString']();}_0x1a8507['query']&&(_0x3c285e=new dd(_0x37c76c),_0x2d1cce=kc(_0x3c285e['getQuery'](),_0x1a8507['query']),_0x3c285e['setQuery'](_0x2d1cce),_0x37c76c=_0x3c285e['toString']());const _0x558d9c=new XMLHttpRequest();_0x558d9c['open'](_0x441fe9,_0x37c76c,_0x1a8507['async']),_0x558d9c['withCreden'+'tials']=_0x1a8507['withCreden'+'tials']!==void(0x1dfa+0x377*-0xb+-0x823*-0x1)?_0x1a8507['withCreden'+'tials']:!(-0xe+0x9d*-0xf+0x3*0x316),_0x558d9c['responseTy'+'pe']=_0x1a8507['responseTy'+'pe']||this['_guessResp'+'onseType'](_0x37c76c);for(const _0x4f4e9a in _0x1a8507['headers'])_0x1a8507['headers']['hasOwnProp'+'erty'](_0x4f4e9a)&&_0x558d9c['setRequest'+'Header'](_0x4f4e9a,_0x1a8507['headers'][_0x4f4e9a]);_0x558d9c['onreadysta'+'techange']=()=>{this['_onReadySt'+'ateChange'](_0x441fe9,_0x37c76c,_0x1a8507,_0x558d9c);},_0x558d9c['onerror']=()=>{this['_onError'](_0x441fe9,_0x37c76c,_0x1a8507,_0x558d9c),_0x473f99=!(-0x1*0xd03+0x2280+0x157d*-0x1);};try{_0x558d9c['send'](_0x16c0be);}catch(_0x2cbae0){_0x473f99||_0x1a8507['error'](_0x558d9c['status'],_0x558d9c,_0x2cbae0);}return _0x558d9c;}['_guessResp'+'onseType'](_0x41350){const _0x266e70=new dd(_0x41350),_0x93fa35=xe['getExtensi'+'on'](_0x266e70['path'])['toLowerCas'+'e']();return Oe['binaryExte'+'nsions']['indexOf'](_0x93fa35)>=-0x566*0x7+0x655*0x6+-0x34?Oe['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x93fa35==='.json'?Oe['ResponseTy'+'pe']['JSON']:_0x93fa35==='.xml'?Oe['ResponseTy'+'pe']['DOCUMENT']:Oe['ResponseTy'+'pe']['TEXT'];}['_isBinaryC'+'ontentType'](_0x481ddd){return[Oe['ContentTyp'+'e']['BASIS'],Oe['ContentTyp'+'e']['BIN'],Oe['ContentTyp'+'e']['DDS'],Oe['ContentTyp'+'e']['GLB'],Oe['ContentTyp'+'e']['MP3'],Oe['ContentTyp'+'e']['MP4'],Oe['ContentTyp'+'e']['OGG'],Oe['ContentTyp'+'e']['OPUS'],Oe['ContentTyp'+'e']['WAV']]['indexOf'](_0x481ddd)>=-0x1*0x8a3+0x3*0x8d7+-0x11e2;}['_isBinaryR'+'esponseTyp'+'e'](_0x1832d3){return _0x1832d3===Oe['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']||_0x1832d3===Oe['ResponseTy'+'pe']['BLOB']||_0x1832d3===Oe['ResponseTy'+'pe']['JSON'];}['_onReadySt'+'ateChange'](_0x42ec14,_0xa019da,_0xcf3e4c,_0xed9c3a){if(_0xed9c3a['readyState']===0x815+-0x1fd5*-0x1+-0x27e6)switch(_0xed9c3a['status']){case 0x28d*-0x2+-0x39*0x35+0x1*0x10e7:{_0xed9c3a['responseUR'+'L']&&_0xed9c3a['responseUR'+'L']['startsWith']('file:///')?this['_onSuccess'](_0x42ec14,_0xa019da,_0xcf3e4c,_0xed9c3a):this['_onError'](_0x42ec14,_0xa019da,_0xcf3e4c,_0xed9c3a);break;}case 0x26c3+0x9f5*0x1+-0x2ff0:case-0x35*-0x59+0x1db2+-0x2*0x17ab:case 0x1fad+-0x31f*0x5+-0xf44:case-0x11*-0xf0+0x9e4*-0x2+0x508:{this['_onSuccess'](_0x42ec14,_0xa019da,_0xcf3e4c,_0xed9c3a);break;}default:{this['_onError'](_0x42ec14,_0xa019da,_0xcf3e4c,_0xed9c3a);break;}}}['_onSuccess'](_0x467dad,_0x475971,_0x3fbf30,_0x51c5e8){let _0x4b6285,_0x5f2dfd;const _0x521734=_0x51c5e8['getRespons'+'eHeader']('Content-Ty'+'pe');_0x521734&&(_0x5f2dfd=_0x521734['split'](';')[0x1*0x178d+0x1*0x10c7+-0x142a*0x2]['trim']());try{this['_isBinaryC'+'ontentType'](_0x5f2dfd)||this['_isBinaryR'+'esponseTyp'+'e'](_0x51c5e8['responseTy'+'pe'])?_0x4b6285=_0x51c5e8['response']:_0x5f2dfd===Oe['ContentTyp'+'e']['JSON']||_0x475971['split']('?')[0x2696+0x1*-0x1bd7+0x15*-0x83]['endsWith']('.json')?_0x4b6285=JSON['parse'](_0x51c5e8['responseTe'+'xt']):_0x51c5e8['responseTy'+'pe']===Oe['ResponseTy'+'pe']['DOCUMENT']||_0x5f2dfd===Oe['ContentTyp'+'e']['XML']?_0x4b6285=_0x51c5e8['responseXM'+'L']:_0x4b6285=_0x51c5e8['responseTe'+'xt'],_0x3fbf30['callback'](null,_0x4b6285);}catch(_0x388621){_0x3fbf30['callback'](_0x388621);}}['_onError'](_0x42fe5b,_0x3704fb,_0x7495db,_0x513cf3){if(!_0x7495db['retrying']){if(_0x7495db['retry']&&_0x7495db['retries']<_0x7495db['maxRetries']){_0x7495db['retries']++,_0x7495db['retrying']=!(0x167e*-0x1+0x2*0xa8b+0xa*0x24);const _0x3b99d6=Y['clamp'](Math['pow'](-0xd71+0x8dc+0x497,_0x7495db['retries'])*Oe['retryDelay'],-0x4f1+-0x189*0x9+0x12c2,_0x7495db['maxRetryDe'+'lay']||0x168f+0x11eb*0x1+-0x14f2);console['log'](_0x42fe5b+':\x20'+_0x3704fb+'\x20-\x20Error\x20'+_0x513cf3['status']+('.\x20Retrying'+'\x20in\x20')+_0x3b99d6+'\x20ms'),setTimeout(()=>{_0x7495db['retrying']=!(-0x1ac*-0x8+0xbcb*-0x3+0x1602),this['request'](_0x42fe5b,_0x3704fb,_0x7495db,_0x7495db['callback']);},_0x3b99d6);}else _0x7495db['callback'](_0x513cf3['status']===-0x1*-0x26ea+0xd5*0x12+-0x2*0x1af2?'Network\x20er'+'ror':_0x513cf3['status'],null);}}};h(Oe,'ContentTyp'+'e',{'AAC':'audio/aac','BASIS':'image/basi'+'s','BIN':'applicatio'+'n/octet-st'+'ream','DDS':'image/dds','FORM_URLENCODED':'applicatio'+'n/x-www-fo'+'rm-urlenco'+'ded','GIF':'image/gif','GLB':'model/gltf'+'-binary','JPEG':'image/jpeg','JSON':'applicatio'+'n/json','MP3':'audio/mpeg','MP4':'audio/mp4','OGG':'audio/ogg','OPUS':'audio/ogg;'+'\x20codecs=\x22o'+'pus\x22','PNG':'image/png','TEXT':'text/plain','WAV':'audio/x-wa'+'v','XML':'applicatio'+'n/xml'}),h(Oe,'ResponseTy'+'pe',{'TEXT':'text','ARRAY_BUFFER':'arraybuffe'+'r','BLOB':'blob','DOCUMENT':'document','JSON':'json'}),h(Oe,'binaryExte'+'nsions',['.model','.wav','.ogg','.mp3','.mp4','.m4a','.aac','.dds','.basis','.glb','.opus']),h(Oe,'retryDelay',-0x17*-0x8d+0x14d9+-0x2120);let Is=Oe;const ot=new Is(),pp='linear',HT='inverse',WT='exponentia'+'l';class $T{constructor(_0x4b149a){h(this,'_manager'),h(this,'position',new D()),h(this,'orientatio'+'n',new te()),this['_manager']=_0x4b149a;}['getPositio'+'n'](){return this['position'];}['setPositio'+'n'](_0x24b0ea){this['position']['copy'](_0x24b0ea);const _0x1bd870=this['listener'];_0x1bd870&&('positionX'in _0x1bd870?(_0x1bd870['positionX']['value']=_0x24b0ea['x'],_0x1bd870['positionY']['value']=_0x24b0ea['y'],_0x1bd870['positionZ']['value']=_0x24b0ea['z']):_0x1bd870['setPositio'+'n']&&_0x1bd870['setPositio'+'n'](_0x24b0ea['x'],_0x24b0ea['y'],_0x24b0ea['z']));}['setOrienta'+'tion'](_0x496af1){this['orientatio'+'n']['copy'](_0x496af1);const _0x234d0f=this['listener'];if(_0x234d0f){const _0x5b0671=_0x496af1['data'];'forwardX'in _0x234d0f?(_0x234d0f['forwardX']['value']=-_0x5b0671[0x94f*-0x1+0x9a3+-0x4c],_0x234d0f['forwardY']['value']=-_0x5b0671[0x18d+0x1c6d+-0x1df1],_0x234d0f['forwardZ']['value']=-_0x5b0671[0x11b4+-0x26e7+0x153d],_0x234d0f['upX']['value']=_0x5b0671[-0x1738+0x140f+-0x3*-0x10f],_0x234d0f['upY']['value']=_0x5b0671[0x23d6+0xdaf+0x3*-0x1080],_0x234d0f['upZ']['value']=_0x5b0671[0x1*-0xc95+0x1*0x12fa+-0x65f]):_0x234d0f['setOrienta'+'tion']&&_0x234d0f['setOrienta'+'tion'](-_0x5b0671[0x1*0x20e+0xdea*-0x1+0x2*0x5f2],-_0x5b0671[-0x268d+0x14d7+0xb*0x19d],-_0x5b0671[0x1c46+-0x1*0x1b37+-0x105],_0x5b0671[0x71b*0x3+-0x1052+-0x4fb],_0x5b0671[-0x21d7*0x1+0x41f+0x1dbd*0x1],_0x5b0671[-0x24aa+0x1*0x701+-0x1bf*-0x11]);}}['getOrienta'+'tion'](){return this['orientatio'+'n'];}get['listener'](){const _0x3ffb04=this['_manager']['context'];return _0x3ffb04?_0x3ffb04['listener']:null;}}const Ul='running',km=['click','touchstart','mousedown'];class XT extends me{constructor(){super(),this['_context']=null,this['AudioConte'+'xt']=typeof AudioContext<'u'&&AudioContext||typeof webkitAudioContext<'u'&&webkitAudioContext,this['AudioConte'+'xt']||w['warn']('No\x20support'+'\x20for\x203D\x20au'+'dio\x20found'),this['_unlockHan'+'dlerFunc']=this['_unlockHan'+'dler']['bind'](this),this['_userSuspe'+'nded']=!(0x2*-0xb67+-0xf42+0x2611),this['listener']=new $T(this),this['_volume']=-0x8d*0x2+0xb2f+-0xa14;}set['volume'](_0x58fa2b){_0x58fa2b=Y['clamp'](_0x58fa2b,0x2710+0x3f4*0x2+-0x3*0xfa8,-0x1*0x5ef+-0x9ac+0xf9c),this['_volume']=_0x58fa2b,this['fire']('volumechan'+'ge',_0x58fa2b);}get['volume'](){return this['_volume'];}get['suspended'](){return this['_userSuspe'+'nded'];}get['context'](){return!this['_context']&&this['AudioConte'+'xt']&&(this['_context']=new this['AudioConte'+'xt'](),this['_context']['state']!==Ul&&this['_registerU'+'nlockListe'+'ners']()),this['_context'];}['suspend'](){this['_userSuspe'+'nded']||(this['_userSuspe'+'nded']=!(0x1cbb+0x1fd8+0x1*-0x3c93),this['_context']&&this['_context']['state']===Ul&&this['_suspend']());}['resume'](){this['_userSuspe'+'nded']&&(this['_userSuspe'+'nded']=!(0x1be9+0x1eab+0x3a93*-0x1),this['_context']&&this['_context']['state']!==Ul&&this['_resume']());}['destroy'](){var _0x1b2916;this['fire']('destroy'),this['_context']&&(this['_removeUnl'+'ockListene'+'rs'](),(_0x1b2916=this['_context'])==null||_0x1b2916['close'](),this['_context']=null);}['_resume'](){this['_context']['resume']()['then'](()=>{const _0x50fd55=this['_context']['createBuff'+'erSource']();_0x50fd55['buffer']=this['_context']['createBuff'+'er'](0x1*0x5de+0x914+0xff*-0xf,0x258b+-0x111c+-0x416*0x5,this['_context']['sampleRate']),_0x50fd55['connect'](this['_context']['destinatio'+'n']),_0x50fd55['start'](0xa03+0x8ce+-0x1*0x12d1),_0x50fd55['onended']=_0x5cd82d=>{_0x50fd55['disconnect'](-0x1d71+0x10b2*0x2+0x1*-0x3f3),this['fire']('resume');};},_0x2c9cb4=>{w['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20it\x20'+'was\x20reject'+'ed\x20'+_0x2c9cb4);})['catch'](_0x472d46=>{w['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20thr'+'ew\x20an\x20exce'+'ption\x20'+_0x472d46);});}['_suspend'](){this['_context']['suspend']()['then'](()=>{this['fire']('suspend');},_0x2f0a6=>{w['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20i'+'t\x20was\x20reje'+'cted\x20'+_0x2f0a6);})['catch'](_0x7b4224=>{w['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20t'+'hrew\x20an\x20ex'+'ception\x20'+_0x7b4224);});}['_unlockHan'+'dler'](){this['_removeUnl'+'ockListene'+'rs'](),!this['_userSuspe'+'nded']&&this['_context']['state']!==Ul&&this['_resume']();}['_registerU'+'nlockListe'+'ners'](){km['forEach'](_0x3eecae=>{window['addEventLi'+'stener'](_0x3eecae,this['_unlockHan'+'dlerFunc'],!(-0x3*-0xab+-0x1a5f*-0x1+0x9*-0x327));});}['_removeUnl'+'ockListene'+'rs'](){km['forEach'](_0x3ea7d0=>{window['removeEven'+'tListener'](_0x3ea7d0,this['_unlockHan'+'dlerFunc'],!(-0x16fb+0x42*-0x5f+0x2f7a));});}}class qT{constructor(_0x4d1509){h(this,'audio'),h(this,'buffer'),_0x4d1509 instanceof Audio?this['audio']=_0x4d1509:this['buffer']=_0x4d1509;}get['duration'](){let _0x576066=-0x1a0*0xb+0x1*-0xc77+0x35f*0x9;return this['buffer']?_0x576066=this['buffer']['duration']:this['audio']&&(_0x576066=this['audio']['duration']),_0x576066||0x254+0xc4*-0x1c+0x131c;}}function gl(){return typeof AudioContext<'u'||typeof webkitAudioContext<'u';}const Zt=-0x3*-0x189+-0xa37+0x1*0x59c,an=-0x230b*0x1+0x78d+0x1b7f,Gs=0x3e5*-0x8+0x9*-0x3bd+0x40cf;function es(_0x508ff6,_0x433f50){return _0x508ff6%_0x433f50||0xab2+0x25b2+0x3064*-0x1;}class As extends me{constructor(_0x2111dd,_0x217321,_0x456d14){super(),h(this,'source',null),(this['_manager']=_0x2111dd,this['_volume']=_0x456d14['volume']!==void(-0x1c2d*-0x1+0x8*0xe2+0x1*-0x233d)?Y['clamp'](Number(_0x456d14['volume'])||-0xfa7*-0x1+0x32d*0x5+0x8*-0x3f1,0xd3d+0x105*-0x5+-0x824,-0x8*-0xe8+-0xc07*0x1+-0x4c8*-0x1):-0x2627+0xc68+0xce0*0x2,this['_pitch']=_0x456d14['pitch']!==void(0x17a9+-0x1cd*0x2+-0x140f)?Math['max'](-0x20f1+-0xa4a+0x2b3b+0.01,Number(_0x456d14['pitch'])||-0x3f5*-0x3+-0x1*-0x1d06+-0x169*0x1d):0x1307+-0xe74+-0x4e*0xf,this['_loop']=!!(_0x456d14['loop']!==void(0x1*-0x775+-0x4*0x3b+0x21*0x41)&&_0x456d14['loop']),this['_sound']=_0x217321,this['_state']=Gs,this['_suspended']=!(0x2*-0xac6+0x585+-0x26*-0x6c),this['_suspendEn'+'dEvent']=0x1cdf+0x167*-0x3+-0x18aa,this['_suspendIn'+'stanceEven'+'ts']=!(0x1*-0x1f0f+0xad3*-0x3+-0xcb5*-0x5),this['_playWhenL'+'oaded']=!(0x1*-0x2dd+0x1079*0x1+-0x2*0x6ce),this['_startTime']=Math['max'](-0x7*-0x3d1+0xa3+-0x9*0x30a,Number(_0x456d14['startTime'])||0x29*-0x31+-0xe*-0x5d+0x2c3),this['_duration']=Math['max'](-0x1f*-0x2f+0x1*0x1511+-0x2ad*0xa,Number(_0x456d14['duration'])||-0x1*0xaf+0xabf+-0xb8*0xe),this['_startOffs'+'et']=null,this['_onPlayCal'+'lback']=_0x456d14['onPlay'],this['_onPauseCa'+'llback']=_0x456d14['onPause'],this['_onResumeC'+'allback']=_0x456d14['onResume'],this['_onStopCal'+'lback']=_0x456d14['onStop'],this['_onEndCall'+'back']=_0x456d14['onEnd'],gl()?(this['_startedAt']=0x1e46+0x1*0x97a+-0x27c0,this['_currentTi'+'me']=-0x10e6+0x1268+-0x182,this['_currentOf'+'fset']=0x1948*-0x1+-0x1*-0x27+-0x1*-0x1921,this['_inputNode']=null,this['_connector'+'Node']=null,this['_firstNode']=null,this['_lastNode']=null,this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0xf3b+-0x4cd+0x1409),this['_initializ'+'eNodes'](),this['_endedHand'+'ler']=this['_onEnded']['bind'](this)):(this['_isReady']=!(0x2*-0x542+0x3*0x503+0x242*-0x2),this['_loadedMet'+'adataHandl'+'er']=this['_onLoadedM'+'etadata']['bind'](this),this['_timeUpdat'+'eHandler']=this['_onTimeUpd'+'ate']['bind'](this),this['_endedHand'+'ler']=this['_onEnded']['bind'](this),this['_createSou'+'rce']()));}set['currentTim'+'e'](_0x1c03bc){if(!(_0x1c03bc<-0x23a5+0x13*-0xa0+0x2f85)){if(this['_state']===Zt){const _0x526911=this['_suspendIn'+'stanceEven'+'ts'];this['_suspendIn'+'stanceEven'+'ts']=!(-0x1806+-0x805+0x200b),this['stop'](),this['_startOffs'+'et']=_0x1c03bc,this['play'](),this['_suspendIn'+'stanceEven'+'ts']=_0x526911;}else this['_startOffs'+'et']=_0x1c03bc,this['_currentTi'+'me']=_0x1c03bc;}}get['currentTim'+'e'](){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===an?this['_currentTi'+'me']:this['_state']===Gs||!this['source']?0x3*0x28d+0xe2b+-0x15d2:(this['_updateCur'+'rentTime'](),this['_currentTi'+'me']);}set['duration'](_0x6f4e16){this['_duration']=Math['max'](0x132a+-0xbe8+0x2*-0x3a1,Number(_0x6f4e16)||-0x1ff0+-0x1e85+0x3e75);const _0x5ac043=this['_state']===Zt;this['stop'](),_0x5ac043&&this['play']();}get['duration'](){return this['_sound']?this['_duration']?es(this['_duration'],this['_sound']['duration']):this['_sound']['duration']:-0x1f70+0x1940+0x630;}get['isPaused'](){return this['_state']===an;}get['isPlaying'](){return this['_state']===Zt;}get['isStopped'](){return this['_state']===Gs;}get['isSuspende'+'d'](){return this['_suspended'];}set['loop'](_0x10142e){this['_loop']=!!_0x10142e,this['source']&&(this['source']['loop']=this['_loop']);}get['loop'](){return this['_loop'];}set['pitch'](_0x602d33){this['_currentOf'+'fset']=this['currentTim'+'e'],this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_pitch']=Math['max'](Number(_0x602d33)||0xa25*-0x1+0xe5*0x19+-0xc38,-0x128*0x19+-0x1e38+0x2b0*0x16+0.01),this['source']&&(this['source']['playbackRa'+'te']['value']=this['_pitch']);}get['pitch'](){return this['_pitch'];}set['sound'](_0x56352c){this['_sound']=_0x56352c,this['_state']!==Gs?this['stop']():this['_createSou'+'rce']();}get['sound'](){return this['_sound'];}set['startTime'](_0x56cdae){this['_startTime']=Math['max'](0x2*-0x1bf+-0x1011+0x138f,Number(_0x56cdae)||0x1231+0x16d*0x2+-0x150b);const _0x173a8c=this['_state']===Zt;this['stop'](),_0x173a8c&&this['play']();}get['startTime'](){return this['_startTime'];}set['volume'](_0x158c5a){_0x158c5a=Y['clamp'](_0x158c5a,-0x70c+0x856+0x1e*-0xb,-0x151*0x3+-0x1e23+0x2217),this['_volume']=_0x158c5a,this['gain']&&(this['gain']['gain']['value']=_0x158c5a*this['_manager']['volume']);}get['volume'](){return this['_volume'];}['_onPlay'](){this['fire']('play'),this['_onPlayCal'+'lback']&&this['_onPlayCal'+'lback'](this);}['_onPause'](){this['fire']('pause'),this['_onPauseCa'+'llback']&&this['_onPauseCa'+'llback'](this);}['_onResume'](){this['fire']('resume'),this['_onResumeC'+'allback']&&this['_onResumeC'+'allback'](this);}['_onStop'](){this['fire']('stop'),this['_onStopCal'+'lback']&&this['_onStopCal'+'lback'](this);}['_onEnded'](){if(this['_suspendEn'+'dEvent']>0x253*0x9+-0x168d+0x1a2){this['_suspendEn'+'dEvent']--;return;}this['fire']('end'),this['_onEndCall'+'back']&&this['_onEndCall'+'back'](this),this['stop']();}['_onManager'+'VolumeChan'+'ge'](){this['volume']=this['_volume'];}['_onManager'+'Suspend'](){this['_state']===Zt&&!this['_suspended']&&(this['_suspended']=!(-0x222b*-0x1+0x1051+0x10d4*-0x3),this['pause']());}['_onManager'+'Resume'](){this['_suspended']&&(this['_suspended']=!(-0xe9*-0x28+-0xa43*0x2+-0xfe1),this['resume']());}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['_inputNode']=this['gain'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}['play'](){return this['_state']!==Gs&&this['stop'](),this['_state']=Zt,this['_playWhenL'+'oaded']=!(-0x686+-0x1*-0x16a1+-0x101a),this['_waitingCo'+'ntextSuspe'+'nsion']?!(0x24da+-0x2396+-0x13*0x11):this['_manager']['suspended']?(this['_manager']['once']('resume',this['_playAudio'+'Immediate'],this),this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0x6cb+-0x3*-0x1a7+0xa*0x2f),!(0x3c1*0x5+-0xc49+-0xed*0x7)):(this['_playAudio'+'Immediate'](),!(-0x1a9+-0xac1*-0x1+-0xc*0xc2));}['_playAudio'+'Immediate'](){if(this['_waitingCo'+'ntextSuspe'+'nsion']=!(0x188f*0x1+-0x1c66+0x6*0xa4),this['_state']!==Zt)return;this['source']||this['_createSou'+'rce']();let _0x16d8ef=es(this['_startOffs'+'et'],this['duration']);_0x16d8ef=es(this['_startTime']+_0x16d8ef,this['_sound']['duration']),this['_startOffs'+'et']=null,this['_duration']?this['source']['start'](0x1*-0x487+0x1748+0x12c1*-0x1,_0x16d8ef,this['_duration']):this['source']['start'](-0x22d1*0x1+0x1244+0x108d,_0x16d8ef),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentTi'+'me']=0x11d5+0x7e4+-0x19b9,this['_currentOf'+'fset']=_0x16d8ef,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay']();}['pause'](){return this['_playWhenL'+'oaded']=!(-0x3c3+-0x1*0xd74+-0x8*-0x227),this['_state']!==Zt?!(0xef6+0x6f1*0x2+-0x45*0x6b):(this['_state']=an,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_updateCur'+'rentTime'](),this['_suspendEn'+'dEvent']++,this['source']['stop'](-0x35*-0x7a+0x8*0x313+0x18ed*-0x2),this['source']=null,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause']()),!(0x33*-0x37+-0x13*-0x5d+0x40e));}['resume'](){if(this['_state']!==an)return!(-0x2*-0x590+-0x2175+0x3*0x772);let _0x4ce55b=this['currentTim'+'e'];return this['_state']=Zt,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['source']||this['_createSou'+'rce'](),this['_startOffs'+'et']!==null&&(_0x4ce55b=es(this['_startOffs'+'et'],this['duration']),_0x4ce55b=es(this['_startTime']+_0x4ce55b,this['_sound']['duration']),this['_startOffs'+'et']=null),this['_duration']?this['source']['start'](0x1*-0xae5+0x1d0f+-0x122a,_0x4ce55b,this['_duration']):this['source']['start'](-0x1*0x6df+0x1e23+-0x1744,_0x4ce55b),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentOf'+'fset']=_0x4ce55b,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_playWhenL'+'oaded']=!(-0x77+0x97f+-0x907),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(-0x138f+-0x14fa+0x2889);}['stop'](){if(this['_playWhenL'+'oaded']=!(0x1*-0x215b+0x14fe+0xc5e),this['_state']===Gs)return!(0x1*0x7d3+0xd91+-0x1563);const _0x4f9cf1=this['_state']===Zt;return this['_state']=Gs,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_startedAt']=-0x5*-0x414+0x183+-0x10b*0x15,this['_currentTi'+'me']=0x1*0x5fb+0x1456+-0x1a51,this['_currentOf'+'fset']=-0x6b*0x45+-0x2482+0x4159,this['_startOffs'+'et']=null,this['_suspendEn'+'dEvent']++,_0x4f9cf1&&this['source']&&this['source']['stop'](0xa14+-0x61*0x3+-0x8f1),this['source']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop']()),!(0x1*-0xf5f+-0x1457+0x23b6);}['setExterna'+'lNodes'](_0x1ae832,_0x385851){if(!_0x1ae832){console['error']('The\x20firstN'+'ode\x20must\x20b'+'e\x20a\x20valid\x20'+'Audio\x20Node');return;}_0x385851||(_0x385851=_0x1ae832);const _0x42a8ba=this['_manager']['context']['destinatio'+'n'];this['_firstNode']!==_0x1ae832&&(this['_firstNode']?this['_connector'+'Node']['disconnect'](this['_firstNode']):this['_connector'+'Node']['disconnect'](_0x42a8ba),this['_firstNode']=_0x1ae832,this['_connector'+'Node']['connect'](_0x1ae832)),this['_lastNode']!==_0x385851&&(this['_lastNode']&&this['_lastNode']['disconnect'](_0x42a8ba),this['_lastNode']=_0x385851,this['_lastNode']['connect'](_0x42a8ba));}['clearExter'+'nalNodes'](){const _0x41a8fa=this['_manager']['context']['destinatio'+'n'];this['_firstNode']&&(this['_connector'+'Node']['disconnect'](this['_firstNode']),this['_firstNode']=null),this['_lastNode']&&(this['_lastNode']['disconnect'](_0x41a8fa),this['_lastNode']=null),this['_connector'+'Node']['connect'](_0x41a8fa);}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_createSou'+'rce'](){if(!this['_sound'])return null;const _0x142a4b=this['_manager']['context'];return this['_sound']['buffer']&&(this['source']=_0x142a4b['createBuff'+'erSource'](),this['source']['buffer']=this['_sound']['buffer'],this['source']['connect'](this['_inputNode']),this['source']['onended']=this['_endedHand'+'ler'],this['source']['loopStart']=es(this['_startTime'],this['source']['buffer']['duration']),this['_duration']&&(this['source']['loopEnd']=Math['max'](this['source']['loopStart'],es(this['_startTime']+this['_duration'],this['source']['buffer']['duration'])))),this['source'];}['_updateCur'+'rentTime'](){this['_currentTi'+'me']=es((this['_manager']['context']['currentTim'+'e']-this['_startedAt'])*this['_pitch']+this['_currentOf'+'fset'],this['duration']);}['_onManager'+'Destroy'](){this['source']&&this['_state']===Zt&&(this['source']['stop'](0x177*0x13+0x1*-0x2003+0x42e),this['source']=null);}}h(As,'EVENT_PLAY','play'),h(As,'EVENT_PAUS'+'E','pause'),h(As,'EVENT_RESU'+'ME','resume'),h(As,'EVENT_STOP','stop'),h(As,'EVENT_END','end'),gl()||(Object['assign'](As['prototype'],{'play':function(){return this['_state']!==Gs&&this['stop'](),!this['source']&&!this['_createSou'+'rce']()?!(-0x2*-0x128d+-0x19cf+-0xb4a):(this['volume']=this['_volume'],this['pitch']=this['_pitch'],this['loop']=this['_loop'],this['source']['play'](),this['_state']=Zt,this['_playWhenL'+'oaded']=!(-0x880*0x4+0xd3b+0x14c6),this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_manager']['suspended']&&this['_onManager'+'Suspend'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay'](),!(-0x1900+0x24cf*-0x1+0x3dcf));},'pause':function(){return!this['source']||this['_state']!==Zt?!(-0x5f1+-0x18*-0x15c+-0xd57*0x2):(this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(0xde2*-0x1+0x2*0x12d1+-0x17bf),this['_state']=an,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause'](),!(-0x17aa+0xa9*0x16+0x924));},'resume':function(){return!this['source']||this['_state']!==an?!(-0x6f6+-0x3*-0xab7+-0x192e):(this['_state']=Zt,this['_playWhenL'+'oaded']=!(0x1*-0x163+-0x140b*-0x1+-0x12a7),this['source']['paused']&&(this['source']['play'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(-0x1cdd+0x5*0x263+0x10ee));},'stop':function(){return!this['source']||this['_state']===Gs?!(-0x1fbe+-0xe*-0xe2+0x1363):(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(0x1537*0x1+0xc6f*-0x3+0x1017),this['_state']=Gs,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop'](),!(0x1b97+0x47*0x11+-0x204e));},'setExternalNodes':function(){},'clearExternalNodes':function(){},'getExternalNodes':function(){return[null,null];},'_onLoadedMetadata':function(){this['source']['removeEven'+'tListener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['_isReady']=!(-0x2202+-0x488+0x268a);let _0x51c8f5=es(this['_startOffs'+'et'],this['duration']);_0x51c8f5=es(this['_startTime']+_0x51c8f5,this['_sound']['duration']),this['_startOffs'+'et']=null,this['source']['currentTim'+'e']=_0x51c8f5;},'_createSource':function(){return this['_sound']&&this['_sound']['audio']&&(this['_isReady']=!(0x16b6+-0x26df+0x102a),this['source']=this['_sound']['audio']['cloneNode'](!(0x1d59+-0x1*0x19+-0x1d40)),this['source']['addEventLi'+'stener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['source']['addEventLi'+'stener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['onended']=this['_endedHand'+'ler']),this['source'];},'_onTimeUpdate':function(){this['_duration']&&this['source']['currentTim'+'e']>es(this['_startTime']+this['_duration'],this['source']['duration'])&&(this['loop']?this['source']['currentTim'+'e']=es(this['_startTime'],this['source']['duration']):(this['source']['removeEven'+'tListener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['pause'](),this['_onEnded']()));},'_onManagerDestroy':function(){this['source']&&this['source']['pause']();}}),Object['defineProp'+'erty'](As['prototype'],'volume',{'get':function(){return this['_volume'];},'set':function(_0x12105b){_0x12105b=Y['clamp'](_0x12105b,0x7db*0x2+0x7*-0x1ab+-0x409*0x1,0x1912*0x1+0x1953*-0x1+0x42),this['_volume']=_0x12105b,this['source']&&(this['source']['volume']=_0x12105b*this['_manager']['volume']);}}),Object['defineProp'+'erty'](As['prototype'],'pitch',{'get':function(){return this['_pitch'];},'set':function(_0x2b0e4f){this['_pitch']=Math['max'](Number(_0x2b0e4f)||-0x1ce*0x5+0x5d0+0x336,-0x269c+-0x3d*-0x3a+0x18ca+0.01),this['source']&&(this['source']['playbackRa'+'te']=this['_pitch']);}}),Object['defineProp'+'erty'](As['prototype'],'sound',{'get':function(){return this['_sound'];},'set':function(_0x6d6405){this['stop'](),this['_sound']=_0x6d6405;}}),Object['defineProp'+'erty'](As['prototype'],'currentTim'+'e',{'get':function(){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===Gs||!this['source']?-0x266a*-0x1+0x411*0x2+-0x52c*0x9:this['source']['currentTim'+'e']-this['_startTime'];},'set':function(_0x256942){_0x256942<-0x1e80+-0x1da4*-0x1+0xdc||(this['_startOffs'+'et']=_0x256942,this['source']&&this['_isReady']&&(this['source']['currentTim'+'e']=es(this['_startTime']+es(_0x256942,this['duration']),this['_sound']['duration']),this['_startOffs'+'et']=null));}}));const jT=-0x17be*-0x2+-0x1c53+0x13e7;class Ya extends As{constructor(_0x1eadc7,_0x3968c7,_0x54da5f={}){super(_0x1eadc7,_0x3968c7,_0x54da5f),h(this,'_position',new D()),h(this,'_velocity',new D()),(_0x54da5f['position']&&(this['position']=_0x54da5f['position']),this['maxDistanc'+'e']=_0x54da5f['maxDistanc'+'e']!==void(-0x1*-0x14c5+0xb29*-0x3+0xcb6)?Number(_0x54da5f['maxDistanc'+'e']):jT,this['refDistanc'+'e']=_0x54da5f['refDistanc'+'e']!==void(0x2d*-0xab+-0x570+0x237f)?Number(_0x54da5f['refDistanc'+'e']):-0x1*0x1a68+-0x2ee*-0x1+0x177b,this['rollOffFac'+'tor']=_0x54da5f['rollOffFac'+'tor']!==void(-0x7*-0x305+-0x1*0x6f8+-0x9*0x193)?Number(_0x54da5f['rollOffFac'+'tor']):0x1bd3*-0x1+-0x3*-0x909+0xb9,this['distanceMo'+'del']=_0x54da5f['distanceMo'+'del']!==void(0x164+-0x7*-0x4b8+-0x226c)?_0x54da5f['distanceMo'+'del']:pp);}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['panner']=this['_manager']['context']['createPann'+'er'](),this['panner']['connect'](this['gain']),this['_inputNode']=this['panner'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}set['position'](_0x23eb1a){this['_position']['copy'](_0x23eb1a);const _0x7f43af=this['panner'];'positionX'in _0x7f43af?(_0x7f43af['positionX']['value']=_0x23eb1a['x'],_0x7f43af['positionY']['value']=_0x23eb1a['y'],_0x7f43af['positionZ']['value']=_0x23eb1a['z']):_0x7f43af['setPositio'+'n']&&_0x7f43af['setPositio'+'n'](_0x23eb1a['x'],_0x23eb1a['y'],_0x23eb1a['z']);}get['position'](){return this['_position'];}set['velocity'](_0x4b1e5f){w['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity']['copy'](_0x4b1e5f);}get['velocity'](){return w['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity'];}set['maxDistanc'+'e'](_0x5bd90b){this['panner']['maxDistanc'+'e']=_0x5bd90b;}get['maxDistanc'+'e'](){return this['panner']['maxDistanc'+'e'];}set['refDistanc'+'e'](_0x34e737){this['panner']['refDistanc'+'e']=_0x34e737;}get['refDistanc'+'e'](){return this['panner']['refDistanc'+'e'];}set['rollOffFac'+'tor'](_0x1191f7){this['panner']['rolloffFac'+'tor']=_0x1191f7;}get['rollOffFac'+'tor'](){return this['panner']['rolloffFac'+'tor'];}set['distanceMo'+'del'](_0x49ed6e){this['panner']['distanceMo'+'del']=_0x49ed6e;}get['distanceMo'+'del'](){return this['panner']['distanceMo'+'del'];}}if(!gl()){let l=new D();const t=function(_0x33e282,_0xb92361,_0x931b34,_0x3e3e6f,_0x5e6bf4,_0x571ae9){l=l['sub2'](_0x33e282,_0xb92361);const _0x20c369=l['length']();if(_0x20c369<_0x931b34)return-0x4*-0x396+0xe74+-0x1ccb;if(_0x20c369>_0x3e3e6f)return-0x2026+0x1517*0x1+0xb0f*0x1;let _0x16329=-0x2d*-0x53+-0x2e7*0x4+0x6d*-0x7;return _0x571ae9===pp?_0x16329=0x34*-0x67+0x202+-0x12eb*-0x1-_0x5e6bf4*(_0x20c369-_0x931b34)/(_0x3e3e6f-_0x931b34):_0x571ae9===HT?_0x16329=_0x931b34/(_0x931b34+_0x5e6bf4*(_0x20c369-_0x931b34)):_0x571ae9===WT&&(_0x16329=Math['pow'](_0x20c369/_0x931b34,-_0x5e6bf4)),Y['clamp'](_0x16329,-0x1b25+0x1f5*-0x6+0x26e3,0x5*-0x653+0x1687+0x11*0x89);};Object['defineProp'+'erty'](Ya['prototype'],'position',{'get':function(){return this['_position'];},'set':function(_0x4b397a){if(this['_position']['copy'](_0x4b397a),this['source']){const _0x4e22ea=this['_manager']['listener']['getPositio'+'n'](),_0x17a067=t(_0x4e22ea,this['_position'],this['refDistanc'+'e'],this['maxDistanc'+'e'],this['rollOffFac'+'tor'],this['distanceMo'+'del']),_0x151721=this['volume'];this['source']['volume']=_0x151721*_0x17a067*this['_manager']['volume'];}}}),Object['defineProp'+'erty'](Ya['prototype'],'maxDistanc'+'e',{'get':function(){return this['_maxDistan'+'ce'];},'set':function(_0x21e6d3){this['_maxDistan'+'ce']=_0x21e6d3;}}),Object['defineProp'+'erty'](Ya['prototype'],'refDistanc'+'e',{'get':function(){return this['_refDistan'+'ce'];},'set':function(_0x10346d){this['_refDistan'+'ce']=_0x10346d;}}),Object['defineProp'+'erty'](Ya['prototype'],'rollOffFac'+'tor',{'get':function(){return this['_rollOffFa'+'ctor'];},'set':function(_0x48dfd0){this['_rollOffFa'+'ctor']=_0x48dfd0;}}),Object['defineProp'+'erty'](Ya['prototype'],'distanceMo'+'del',{'get':function(){return this['_distanceM'+'odel'];},'set':function(_0x31caee){this['_distanceM'+'odel']=_0x31caee;}});}const mp=-0x73a+-0xb45*0x1+0x127f,_p=-0x2681*-0x1+-0x4f*-0x6d+-0x3b*0x139,Zs=-0xbc+-0x148b+0x1549,Cs=-0x1*0xcd4+-0x471*-0x2+0x3f5,Fn=-0x14b6+-0x1*0x2363+0x381d,gp=-0x29*0xdf+-0x130+0x4*0x93b,sd=-0x293+-0x19*-0x26+-0x11d,Sp=-0x1f23+0x16*-0x85+0x2a98,yp=0xa5+0x2b2*0x4+0xb65*-0x1,vp=-0x363+0x1581+-0x1215,xp=0x43c*0x1+-0x1941+0x150f,uy={[mp]:'SUBTRACTIV'+'E',[_p]:'ADDITIVE',[Zs]:'NORMAL',[Cs]:'NONE',[Fn]:'PREMULTIPL'+'IED',[gp]:'MULTIPLICA'+'TIVE',[sd]:'ADDITIVEAL'+'PHA',[Sp]:'MULTIPLICA'+'TIVE2X',[yp]:'SCREEN',[vp]:'MIN',[xp]:'MAX'},Hn='none',YT='linear',KT=-0x1e0c+-0x2031+0x3e3d,Tp=0x2f9*0x5+-0x494+0x36d*-0x3,ZT={[KT]:'NONE',[Tp]:'SCHLICK'},QT=-0x10e3+0x26b9+0x45e*-0x5,py=-0x3c2+0x9*0x3b2+-0x1*0x1d71,Ji=0x119*0xc+0xf6*-0x3+-0xa4a,ps=-0xbf5*-0x1+-0x96*0x29+0xc12,wp=0x7*0x515+0x1f9a+-0xd6f*0x5,Ep=0x449*0x8+0x68c+-0x9*0x489,Sl=-0x528+0xe32+-0x9a*0xf,ve=0x8*-0x458+0xfe4+0x12dc,Ke=-0x1*0x1eb5+-0x197c+-0x3832*-0x1,Ze=0x2a*-0x7d+-0x230+0x16b4,Um={[ve]:'DIRECTIONA'+'L',[Ke]:'OMNI',[Ze]:'SPOT'},wc=0x197e+-0x251b+0xc01,js=0x94b+-0xc6a+0x31f,my=0x2*-0xb9a+0x23bf+0x1e*-0x6b,_y=-0x1*0x162b+0x1149+0x4e4,gy=0x12*0x1bc+0x22*-0x13+-0x1caf,JT={[js]:'PUNCTUAL',[my]:'RECT',[_y]:'DISK',[gy]:'SPHERE'},bp=0x49d*0x1+0x10*0xd4+-0x11dd,Sy=-0x1*0x180c+-0xd30+0x253d,ew={[bp]:'LINEAR',[Sy]:'INVERSESQU'+'ARED'},Ws=0x18bf+-0x585+-0x133a,Rf=-0x1*0x349+0x329*0x6+0x539*-0x3,Ap=-0x20b7+-0x4a6+0x2560,tw=-0x27*0x7+0x1d9e+-0xf*0x1e7,yy=-0xcb+0x2255+-0x2185,Xo=0x8*-0xaf+-0x268a+0x2c08,vy=-0x1cda+0x12*-0xb5+0x299b,xy=-0x26a1+-0x1*-0x21c8+0x4e1,sw=0x1ec7*-0x1+0x2231+-0x361,Xi=new Map([[yy,{'name':'PCF1_32F','kind':'PCF1','format':Wi,'pcf':!(0x1*-0x1f96+-0x754+0x26ea*0x1)}],[Ws,{'name':'PCF3_32F','kind':'PCF3','format':Wi,'pcf':!(0x182+-0x1*0x1835+-0x1bf*-0xd)}],[tw,{'name':'PCF5_32F','kind':'PCF5','format':Wi,'pcf':!(-0x1e9b+-0x1ea1+0x1e9e*0x2)}],[vy,{'name':'PCF1_16F','kind':'PCF1','format':un,'pcf':!(-0x16d1+0x95c+0x109*0xd)}],[xy,{'name':'PCF3_16F','kind':'PCF3','format':un,'pcf':!(0x4*0x7ea+-0x2448+0x4a0)}],[sw,{'name':'PCF5_16F','kind':'PCF5','format':un,'pcf':!(0x1c+-0x18a9+0x188d*0x1)}],[Rf,{'name':'VSM_16F','kind':'VSM','format':nt,'vsm':!(0x2*0x32b+-0x17a4+-0x5*-0x376)}],[Ap,{'name':'VSM_32F','kind':'VSM','format':Xt,'vsm':!(-0x6*-0x4b7+0x10f9+-0x2d43)}],[Xo,{'name':'PCSS_32F','kind':'PCSS','format':Qi,'pcss':!(0x4*0x909+0x219d+-0x45c1)}]]),iw=-0x1*0x13f5+-0x2*-0x68f+0x7d6,Cp=0x1*-0x2069+-0x1c39+0x1*0x3ca3,Of=0x21c0+-0x21f4+-0x1*-0x34,Ty=-0x2597+0x326+0x2271,ai=0x134d+-0x178e+0x9*0x79,rw=0x1*-0xb4f+0x35e+0x7f2,Zc=0x1*0x24fd+0x89*-0x43+-0x122,aw=0x11*0x43+-0x1e7b+-0xd7*-0x1f,ni=0xa1f*0x1+0x1f8+-0x26b*0x5,gn=0x4db*-0x6+0x214d+0x1*-0x42a,nn=0x2479+0x3c7+-0x38*0xb8,Vr=0x2118+0x8*0x402+-0x4127,Bl=0x725+0x1*-0x8b6+0x193,Pp=-0x1d3c*-0x1+0x20ad*-0x1+0x1*0x371,wy=0x1*-0x1f7b+-0x1845+0x37c1*0x1,nw={[Pp]:'NONE',[wy]:'BOX'},Bm='mul',yl=-0x7ac+0x17da+0x102e*-0x1,Ec=-0x98f*0x1+-0x56c+0xe*0x112,ow={[yl]:'NONE',[Ec]:'SRGB'},Mp=-0x13*0x6f+-0x303+-0x90*-0x14,sU=-0x22*-0x3c+-0x1396*-0x1+0x3*-0x92f,iU=-0x13f*0x13+0x2554+-0xda5,rU=-0x3*-0x92b+-0x1*0xe57+-0xd27,aU=0x1ab*0x7+-0x1177*-0x1+-0x748*0x4,nU=-0x24de+-0x57d+0x2a60,Ey=0x215b+0x155c+-0x36b1,by=['LINEAR','FILMIC','HEJL','ACES','ACES2','NEUTRAL','NONE'],Ay=0x406+-0x2609+-0x2203*-0x1,id=-0x223*0x5+0x12ad+0x5*-0x199,Cy=-0x2*0xb25+-0x1932+0x2f7e,lw={[Ay]:'NONE',[id]:'AO',[Cy]:'GLOSSDEPEN'+'DENT'},_r='none',Qc='envAtlas',Jc='envAtlasHQ',eh='cubeMap',Py='sphereMap',cw={[_r]:'NONE',[Qc]:'ENVATLAS',[Jc]:'ENVATLASHQ',[eh]:'CUBEMAP',[Py]:'SPHEREMAP'},Dp='ambientSH',Ip='envAtlas',Lp='constant',hw={[Dp]:'AMBIENTSH',[Ip]:'ENVALATLAS',[Lp]:'CONSTANT'},th=-0x1*0xacf+0x3a+0xa96,qo=-0x1*-0x15e3+0x47+0x58a*-0x4,Rp=-0xa29+0x103b*-0x2+0x2aa3,My=0x1aae+0x1d28+-0x2*0x1be7,Dy=-0x90b+0x6*0x95+0x59d,jo=-0x10a4+0x9*-0x51+-0x1*-0x139d,Ff=-0x1c99*0x1+0x1c3*-0x10+0x3909,Iy=-0x42f+0x229+0x286,sh=0x1183+0x1*-0x2273+0x70*0x29,Op=0xc1b+-0xd4*-0x29+0x2c0f*-0x1,Yo=0x2*-0x82f+0x241*0xf+0x1f*-0x6f,Ko=0x11*-0x119+0x15*0x20+0x803*0x3,Ly=-0x5c9+-0x1139*-0x1+0x124*0x4,Zo=-0x3566+-0x2ddc+0x8342,bc=-0x27b*-0xf+0x7ccf+-0xcc*0x7b,Ps=0x3*-0xa27+0x1dd1+0xa4,gr=0xeed+0x14a1+-0x1*0x238d,Fp=-0x10c6+0x1f7e+-0xeb6,Ss=-0x17*0x17+0x20b6+-0x1ea4,di=0x3*0x74d+0x101*-0x22+0xc3d,fi=-0x2376+0x1b*-0x9e+0x3424,xa=-0x2709+-0x1*-0x1723+0xa*0x197,vl=0x105b+-0x2dd*0x3+-0x7c3*0x1,Np=0x1ec+-0x723+0x539,Wn=0x1289+-0xf90+-0x2*0x17b,ci=0x1*0x247f+-0x145e+0x1021*-0x1,Pt=0x121b+0xc7*-0x29+0xdc5,Mt=-0x232*-0x5+-0xb00+0x8,dw={[ci]:'SIMPLE',[Pt]:'SLICED',[Mt]:'TILED'},Ac=-0x8a0+-0x4*-0x3be+0x1*-0x657,zl=0x26*-0x2+0x5e5*0x1+-0x599,Cc=-0x1a2*-0x5+0x13b2+0x1bdc*-0x1,fw=-0xa12*-0x3+0x1ffb*-0x1+0x1c6,uw=-0x7*-0xce+0x3d+0x5dd*-0x1,zm=0xba+0x1143+-0x11fa,pw=-0x34*-0x2b+-0x24c5+-0x2b*-0xa7,mw=-0x1c6a+-0xa6f*0x2+0x314d,kp=0xa*0x361+-0x1045+0x1185*-0x1,Nf=0x1*0x196d+0x207a*-0x1+0x70e,Ae=0x1891+0x1624+-0x2eb5,je=-0x1b35+-0xf4e+0x2a84,Co='infinite',_w='box',gw='dome',ua='none',Sw='bayer8',yw='bluenoise',vw='ignnoise',xw={[ua]:'NONE',[Sw]:'BAYER8',[yw]:'BLUENOISE',[vw]:'IGNNOISE'},Tw='prerender',ww='postrender',Ew='prerender:'+'layer',bw='postrender'+':layer',Ry='precull',Oy='postcull',Aw='cull:end';class rd{constructor(_0x5d9457,_0x6c708d,_0x5eb5a9){h(this,'uniformFor'+'mats',[]),h(this,'bindGroupF'+'ormats',[]),h(this,'vertexForm'+'at'),(this['uniformFor'+'mats'][$o]=_0x5d9457,this['bindGroupF'+'ormats'][$o]=_0x6c708d,this['vertexForm'+'at']=_0x5eb5a9);}['hasUniform'](_0x47eae4){for(let _0x529c87=-0xd*0x2a7+0xff2+0x41*0x49;_0x529c87<this['uniformFor'+'mats']['length'];_0x529c87++){const _0x1dd8cd=this['uniformFor'+'mats'][_0x529c87];if(_0x1dd8cd!=null&&_0x1dd8cd['get'](_0x47eae4))return!(0x91+0x2303*-0x1+0x1*0x2272);}return!(-0x916+0xf82+-0x1*0x66b);}['hasTexture'](_0x6927ea){for(let _0xfc3292=0x30b+-0x1f68+0x1c5d;_0xfc3292<this['bindGroupF'+'ormats']['length'];_0xfc3292++){const _0xf85566=this['bindGroupF'+'ormats'][_0xfc3292];if(_0xf85566!=null&&_0xf85566['getTexture'](_0x6927ea))return!(0x3a*0x1+0x1090+-0x10ca);}return!(0x23f4*0x1+0xb87+-0x2f7a);}['getVertexE'+'lement'](_0x3b82ff){var _0x165bc2;return(_0x165bc2=this['vertexForm'+'at'])==null?void(0x2707*0x1+-0x69d*0x3+-0x1330):_0x165bc2['elements']['find'](_0x122886=>_0x122886['name']===_0x3b82ff);}['generateKe'+'y'](_0x28d3b1){var _0x3a3d1c;let _0x247f5b=JSON['stringify'](this['uniformFor'+'mats'])+JSON['stringify'](this['bindGroupF'+'ormats']);return _0x28d3b1['isWebGPU']&&(_0x247f5b+=(_0x3a3d1c=this['vertexForm'+'at'])==null?void(-0x1768+-0xb89+0x22f1):_0x3a3d1c['shaderProc'+'essingHash'+'String']),_0x247f5b;}}const Fy=new Kt();function Nn(_0x34dc50){const _0x4ddafe=Fy['get'](_0x34dc50);return w['assert'](_0x4ddafe),_0x4ddafe;}function Cw(_0x845736,_0x40d817){w['assert'](_0x40d817),Fy['get'](_0x845736,()=>_0x40d817);}class pa{static['definesHas'+'h'](_0x317fcd){const _0x5b0493=Array['from'](_0x317fcd)['sort']((_0x1de906,_0x9a8cae)=>_0x1de906[-0x215c+0xeb*-0x28+0x2e*0x186]>_0x9a8cae[0x22b*-0x2+-0x1e1c*0x1+0x2272]?0x33f+0x20cc+0x1*-0x240a:-(0xf1a+0x1912*-0x1+-0x6f*-0x17));return hi(JSON['stringify'](_0x5b0493));}}const Pw=new Kt();class Mw{constructor(_0x24f729,_0x36b041,_0x268032={}){h(this,'index'),h(this,'name'),h(this,'defines',new Map()),(w['assert'](/^[a-z]\w*$/i['test'](_0x24f729),'ShaderPass'+'\x20name\x20can\x20'+'only\x20conta'+'in\x20letters'+',\x20numbers\x20'+'and\x20unders'+'cores\x20and\x20'+'start\x20with'+'\x20a\x20letter:'+'\x20'+_0x24f729),this['name']=_0x24f729,this['index']=_0x36b041,Object['assign'](this,_0x268032),this['buildShade'+'rDefines']());}['buildShade'+'rDefines'](){let _0x2c1b12;this['isShadow']?_0x2c1b12='SHADOW':this['isForward']?_0x2c1b12='FORWARD':this['index']===Wn&&(_0x2c1b12='PICK'),this['defines']['set'](_0x2c1b12+'_PASS',''),this['defines']['set'](this['name']['toUpperCas'+'e']()+'_PASS','');}}class Si{constructor(){h(this,'passesName'+'d',new Map()),h(this,'passesInde'+'xed',[]),h(this,'nextIndex',-0xfe*-0x19+0x1d91+-0x365f);const _0x5a91dd=(_0xc6b70,_0x4fafe9,_0x1f35c9)=>{const _0x126303=this['allocate'](_0xc6b70,_0x1f35c9);w['assert'](_0x126303['index']===_0x4fafe9);};_0x5a91dd('forward',xa,{'isForward':!(0x1b4*0x8+-0x17fe*-0x1+-0xa*0x3c3)}),_0x5a91dd('prepass',vl),_0x5a91dd('shadow',Np),_0x5a91dd('pick',Wn);}static['get'](_0x354260){return w['assert'](_0x354260),Pw['get'](_0x354260,()=>new Si());}['allocate'](_0x21b811,_0x8c83a4){let _0x109dda=this['passesName'+'d']['get'](_0x21b811);return _0x109dda===void(0x266*-0x7+0x35*0x80+-0x9b6)&&(_0x109dda=new Mw(_0x21b811,this['nextIndex'],_0x8c83a4),this['passesName'+'d']['set'](_0x109dda['name'],_0x109dda),this['passesInde'+'xed'][_0x109dda['index']]=_0x109dda,this['nextIndex']++),_0x109dda;}['getByIndex'](_0x277811){const _0x2c2bae=this['passesInde'+'xed'][_0x277811];return w['assert'](_0x2c2bae),_0x2c2bae;}['getByName'](_0x1b9113){return this['passesName'+'d']['get'](_0x1b9113);}}class Vm extends Map{constructor(){super(...arguments),h(this,'_keyDirty',!(0x5*0x10d+0x2bf*-0xd+0x1e73)),h(this,'_key','');}['set'](_0x2c8489,_0x20b85d){return(!this['has'](_0x2c8489)||this['get'](_0x2c8489)!==_0x20b85d)&&this['markDirty'](),super['set'](_0x2c8489,_0x20b85d);}['add'](_0x2dbc7c){for(const [_0x229073,_0x36cd0e]of Object['entries'](_0x2dbc7c))this['set'](_0x229073,_0x36cd0e);return this;}['delete'](_0x2ca2a0){const _0x36a0e2=this['has'](_0x2ca2a0),_0x1e882c=super['delete'](_0x2ca2a0);return _0x36a0e2&&_0x1e882c&&this['markDirty'](),_0x1e882c;}['clear'](){this['size']>0x2*-0xac6+-0x1d1f+0x1*0x32ab&&this['markDirty'](),super['clear']();}['markDirty'](){this['_dirty']=!(0x2*0xd8a+0x1e1*0x6+-0x265a*0x1),this['_keyDirty']=!(0xc0d*-0x1+0x244+0x9c9);}['isDirty'](){return this['_dirty'];}['resetDirty'](){this['_dirty']=!(-0x22fd+-0x1c05+0x3f03);}get['key'](){return this['_keyDirty']&&(this['_keyDirty']=!(0x2*-0x104e+-0x1*-0x85f+-0x183e*-0x1),this['_key']=Array['from'](this['entries']())['sort'](([_0x2cd5ba],[_0x5dda30])=>_0x2cd5ba<_0x5dda30?-(-0xad*-0x39+0x71b+-0x3*0xf35):_0x2cd5ba>_0x5dda30?-0x250f+0xb43+0x19cd:0xf5+-0x19*0x39+0x49c)['map'](([_0x2ddd4f,_0xc12076])=>_0x2ddd4f+'='+hi(_0xc12076))['join'](',')),this['_key'];}['copy'](_0x29c145){this['clear']();for(const [_0x101fc0,_0x2e46a3]of _0x29c145)this['set'](_0x101fc0,_0x2e46a3);return this;}}const Dw=new Kt();class Ce{constructor(){h(this,'glsl',new Vm()),h(this,'wgsl',new Vm()),h(this,'version','');}static['get'](_0xfde314,_0x3e41e1=Fe){const _0x442aab=Dw['get'](_0xfde314,()=>new Ce());return _0x3e41e1===Fe?_0x442aab['glsl']:_0x442aab['wgsl'];}get['useWGSL'](){return this['glsl']['size']===0x2*-0x134+0x1f67+0x1cff*-0x1||this['wgsl']['size']>0x7*0x434+0x22b6+-0x4022*0x1;}get['key'](){return'GLSL:'+this['glsl']['key']+'|WGSL:'+this['wgsl']['key']+'|API:'+this['version'];}['isDirty'](){return this['glsl']['isDirty']()||this['wgsl']['isDirty']();}['resetDirty'](){this['glsl']['resetDirty'](),this['wgsl']['resetDirty']();}['copy'](_0x202b15){return this['version']=_0x202b15['version'],this['glsl']['copy'](_0x202b15['glsl']),this['wgsl']['copy'](_0x202b15['wgsl']),this;}}class ih{static['merge'](..._0x2f7879){const _0x17dd17=new Map(_0x2f7879[0x22c6+-0x56*0x2f+0xc*-0x195]??[]);for(let _0x461fa5=-0x1906+-0xa96*0x1+0x3*0xbdf;_0x461fa5<_0x2f7879['length'];_0x461fa5++){const _0x2e83fe=_0x2f7879[_0x461fa5];if(_0x2e83fe){for(const [_0x3b9ff1,_0x569f2c]of _0x2e83fe)_0x17dd17['set'](_0x3b9ff1,_0x569f2c);}}return _0x17dd17;}}class Iw extends pa{constructor(_0x14fe5a,_0x2f069e){super(),this['key']=_0x14fe5a,this['shaderDefi'+'nition']=_0x2f069e;}['generateKe'+'y'](_0x57ceb4){return this['key'];}['createShad'+'erDefiniti'+'on'](_0x285a56,_0x98fe1a){return this['shaderDefi'+'nition'];}}class $t{static['createShad'+'er'](_0x506c0c,_0xb1a980){const _0x1877d9=Nn(_0x506c0c);let _0x192c51=_0x1877d9['getCachedS'+'hader'](_0xb1a980['uniqueName']);if(!_0x192c51){const _0x2d4e36=_0x506c0c['isWebGPU']&&(!!_0xb1a980['vertexWGSL']||!!_0xb1a980['vertexChun'+'k'])&&(!!_0xb1a980['fragmentWG'+'SL']||!!_0xb1a980['fragmentCh'+'unk']),_0x49dbd9=Ce['get'](_0x506c0c,_0x2d4e36?it:Fe),_0x30c594=_0xb1a980['vertexChun'+'k']?_0x49dbd9['get'](_0xb1a980['vertexChun'+'k']):_0x2d4e36?_0xb1a980['vertexWGSL']:_0xb1a980['vertexGLSL'],_0xbf9743=_0xb1a980['fragmentCh'+'unk']?_0x49dbd9['get'](_0xb1a980['fragmentCh'+'unk']):_0x2d4e36?_0xb1a980['fragmentWG'+'SL']:_0xb1a980['fragmentGL'+'SL'];w['assert'](_0x30c594,'ShaderUtil'+'s.createSh'+'ader:\x20vert'+'ex\x20shader\x20'+'code\x20not\x20p'+'rovided',_0xb1a980),w['assert'](_0xbf9743,'ShaderUtil'+'s.createSh'+'ader:\x20frag'+'ment\x20shade'+'r\x20code\x20not'+'\x20provided',_0xb1a980);const _0x1a9665=ih['merge'](_0x49dbd9,_0xb1a980['fragmentIn'+'cludes']),_0x38181f=ih['merge'](_0x49dbd9,_0xb1a980['vertexIncl'+'udes']);_0x192c51=new dy(_0x506c0c,Jt['createDefi'+'nition'](_0x506c0c,{'name':_0xb1a980['uniqueName'],'shaderLanguage':_0x2d4e36?it:Fe,'attributes':_0xb1a980['attributes'],'vertexCode':_0x30c594,'fragmentCode':_0xbf9743,'useTransformFeedback':_0xb1a980['useTransfo'+'rmFeedback'],'vertexIncludes':_0x38181f,'vertexDefines':_0xb1a980['vertexDefi'+'nes'],'fragmentIncludes':_0x1a9665,'fragmentDefines':_0xb1a980['fragmentDe'+'fines'],'fragmentOutputTypes':_0xb1a980['fragmentOu'+'tputTypes']})),_0x1877d9['setCachedS'+'hader'](_0xb1a980['uniqueName'],_0x192c51);}return _0x192c51;}static['getCoreDef'+'ines'](_0x132dcc,_0x4c5d01){const _0x1cdca8=new Map(_0x132dcc['defines']);return _0x4c5d01['cameraShad'+'erParams']['defines']['forEach']((_0x368128,_0x86384f)=>_0x1cdca8['set'](_0x86384f,_0x368128)),Si['get'](_0x4c5d01['device'])['getByIndex'](_0x4c5d01['pass'])['defines']['forEach']((_0xa9017,_0x2a007c)=>_0x1cdca8['set'](_0x2a007c,_0xa9017)),_0x1cdca8;}static['processSha'+'der'](_0x420607,_0x735ebc){w['assert'](_0x420607);const _0x435c9a=_0x420607['definition'],_0x1c3dd7=(_0x435c9a['name']??'shader')+'-id-'+_0x420607['id'],_0x19ce2d=new Iw(_0x1c3dd7,_0x435c9a),_0x2d1ab0='shader',_0x1c5ea5=Nn(_0x420607['device']);w['assert'](!_0x1c5ea5['isRegister'+'ed'](_0x2d1ab0)),_0x1c5ea5['register'](_0x2d1ab0,_0x19ce2d);const _0x228554=_0x1c5ea5['getProgram'](_0x2d1ab0,{},_0x735ebc);return _0x1c5ea5['unregister'](_0x2d1ab0),_0x228554;}static['addScreenD'+'epthChunkD'+'efines'](_0x61c192,_0x3ae12a,_0x502ca8){_0x3ae12a['sceneDepth'+'MapLinear']&&_0x502ca8['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',''),_0x61c192['textureFlo'+'atRenderab'+'le']&&_0x502ca8['set']('SCENE_DEPT'+'HMAP_FLOAT','');}}const Lw={'type':vr,'base':0x0,'baseVertex':0x0,'count':0x4,'indexed':!(-0x1*-0x4d3+0xd4d+-0x121f)},Yn=new re(),Kn=new re(),vd=new ty();class rh{constructor(_0x3277dd){h(this,'uniformBuf'+'fer'),h(this,'bindGroup');const _0x5c03b=_0x3277dd['device'];if(this['shader']=_0x3277dd,w['assert'](_0x3277dd),_0x5c03b['supportsUn'+'iformBuffe'+'rs']){const _0xd23798=new rd();this['shader']=$t['processSha'+'der'](_0x3277dd,_0xd23798);const _0x356640=this['shader']['meshUnifor'+'mBufferFor'+'mat'];_0x356640&&(this['uniformBuf'+'fer']=new up(_0x5c03b,_0x356640,!(-0x1*0x982+-0x2*0x1289+0x2e95*0x1)));const _0x507256=this['shader']['meshBindGr'+'oupFormat'];w['assert'](_0x507256),this['bindGroup']=new dp(_0x5c03b,_0x507256),ya['setName'](this['bindGroup'],'QuadRender'+'-MeshBindG'+'roup_'+this['bindGroup']['id']);}}['destroy'](){var _0x4bfbdd,_0x350bfe;(_0x4bfbdd=this['uniformBuf'+'fer'])==null||_0x4bfbdd['destroy'](),this['uniformBuf'+'fer']=null,(_0x350bfe=this['bindGroup'])==null||_0x350bfe['destroy'](),this['bindGroup']=null;}['render'](_0x57b661,_0x464ed9){const _0xb9af85=this['shader']['device'];Q['pushGpuMar'+'ker'](_0xb9af85,'QuadRender'),_0x57b661&&(Yn['set'](_0xb9af85['vx'],_0xb9af85['vy'],_0xb9af85['vw'],_0xb9af85['vh']),Kn['set'](_0xb9af85['sx'],_0xb9af85['sy'],_0xb9af85['sw'],_0xb9af85['sh']),_0x464ed9=_0x464ed9??_0x57b661,_0xb9af85['setViewpor'+'t'](_0x57b661['x'],_0x57b661['y'],_0x57b661['z'],_0x57b661['w']),_0xb9af85['setScissor'](_0x464ed9['x'],_0x464ed9['y'],_0x464ed9['z'],_0x464ed9['w'])),_0xb9af85['setVertexB'+'uffer'](_0xb9af85['quadVertex'+'Buffer'],0x64f+-0x1bb7+0x1568);const _0x3adbf1=this['shader'];if(_0xb9af85['setShader'](_0x3adbf1),_0xb9af85['supportsUn'+'iformBuffe'+'rs']){_0xb9af85['setBindGro'+'up']($o,_0xb9af85['emptyBindG'+'roup']);const _0x10b813=this['bindGroup'];_0x10b813['update'](),_0xb9af85['setBindGro'+'up'](QS,_0x10b813);const _0x3139d6=this['uniformBuf'+'fer'];_0x3139d6?(_0x3139d6['update'](vd),_0xb9af85['setBindGro'+'up'](Df,vd['bindGroup'],vd['offsets'])):_0xb9af85['setBindGro'+'up'](Df,_0xb9af85['emptyBindG'+'roup']);}_0xb9af85['draw'](Lw),_0x57b661&&(_0xb9af85['setViewpor'+'t'](Yn['x'],Yn['y'],Yn['z'],Yn['w']),_0xb9af85['setScissor'](Kn['x'],Kn['y'],Kn['z'],Kn['w'])),Q['popGpuMark'+'er'](_0xb9af85);}}class Rw extends ys{constructor(_0xa8ebed,_0x14f881,_0x4ce617,_0x5c1523){super(_0xa8ebed),this['quad']=_0x14f881,this['rect']=_0x4ce617,this['scissorRec'+'t']=_0x5c1523;}['execute'](){const {device:_0x3027bb}=this;Q['pushGpuMar'+'ker'](_0x3027bb,this['name']+':'+this['quad']['shader']['name']),_0x3027bb['setCullMod'+'e'](bt),_0x3027bb['setDepthSt'+'ate'](Yt['NODEPTH']),_0x3027bb['setStencil'+'State'](null,null),this['quad']['render'](this['rect'],this['scissorRec'+'t']),Q['popGpuMark'+'er'](_0x3027bb);}}const Ow=new re();function Tr(_0x35dd9e,_0x174107,_0x381200,_0x5a171c,_0x3c3f5f){w['assert'](_0x174107!==void(0x8df*0x4+0x1d59+-0x40d5));const _0x5a90ec=arguments[0x2ff+0x1e44+-0x213e];w['call'](()=>{_0x5a90ec!==void(-0x7*-0x133+0x1145+-0x5*0x522)&&w['warnOnce']('pc.drawQua'+'dWithShade'+'r\x20no\x20longe'+'r\x20accepts\x20'+'useBlend\x20p'+'arameter,\x20'+'and\x20blendi'+'ng\x20state\x20n'+'eeds\x20to\x20be'+'\x20set\x20up\x20us'+'ing\x20Graphi'+'csDevice.s'+'etBlendSta'+'te.');});const _0x267ad2=new rh(_0x381200);_0x5a171c||(_0x5a171c=Ow,_0x5a171c['x']=0x156a+0x1*0x1c03+0x1*-0x316d,_0x5a171c['y']=-0x2228*-0x1+-0x1947+-0x8e1,_0x5a171c['z']=_0x174107?_0x174107['width']:_0x35dd9e['width'],_0x5a171c['w']=_0x174107?_0x174107['height']:_0x35dd9e['height']);const _0x56dcf3=new Rw(_0x35dd9e,_0x267ad2,_0x5a171c,_0x3c3f5f);_0x56dcf3['init'](_0x174107),_0x56dcf3['colorOps']['clear']=!(-0x7*0x299+-0xa58+-0x53*-0x58),_0x56dcf3['depthStenc'+'ilOps']['clearDepth']=!(0x9*0x44b+0x2345*-0x1+-0x35d),_0x35dd9e['isWebGPU']&&_0x174107===null&&_0x35dd9e['samples']>0x5e*-0x58+-0x854+0x5*0x821&&(_0x56dcf3['colorOps']['store']=!(0x66f*-0x6+0x998+0x2*0xe81)),_0x56dcf3['render'](),_0x267ad2['destroy']();}class Gm{constructor(_0x34daad,_0x3db05a,_0x5be1d3){h(this,'_aabb',new De()),h(this,'origMeshIn'+'stances'),h(this,'meshInstan'+'ce',null),h(this,'dynamic'),h(this,'batchGroup'+'Id'),(this['origMeshIn'+'stances']=_0x34daad,this['dynamic']=_0x3db05a,this['batchGroup'+'Id']=_0x5be1d3);}['destroy'](_0x2ba34b,_0x9f1e8c){this['meshInstan'+'ce']&&(this['removeFrom'+'Layers'](_0x2ba34b,_0x9f1e8c),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}['addToLayer'+'s'](_0x545377,_0x3b5853){for(let _0x30c1f1=0xed0+-0xfa2+0x5*0x2a;_0x30c1f1<_0x3b5853['length'];_0x30c1f1++){const _0x4a6670=_0x545377['layers']['getLayerBy'+'Id'](_0x3b5853[_0x30c1f1]);_0x4a6670&&_0x4a6670['addMeshIns'+'tances']([this['meshInstan'+'ce']]);}}['removeFrom'+'Layers'](_0x396592,_0x49d3ea){for(let _0x46b6b4=-0x1a7c+-0x4*0x5fd+-0x10*-0x327;_0x46b6b4<_0x49d3ea['length'];_0x46b6b4++){const _0x5f54e8=_0x396592['layers']['getLayerBy'+'Id'](_0x49d3ea[_0x46b6b4]);_0x5f54e8&&_0x5f54e8['removeMesh'+'Instances']([this['meshInstan'+'ce']]);}}['updateBoun'+'dingBox'](){this['_aabb']['copy'](this['origMeshIn'+'stances'][0x1105*0x1+0xefd*-0x1+0x1a*-0x14]['aabb']);for(let _0x8862a5=0x11*-0x12f+-0x1fd6*-0x1+0x1*-0xbb6;_0x8862a5<this['origMeshIn'+'stances']['length'];_0x8862a5++)this['_aabb']['add'](this['origMeshIn'+'stances'][_0x8862a5]['aabb']);this['meshInstan'+'ce']['aabb']=this['_aabb'],this['meshInstan'+'ce']['_aabbVer']=-0xab5+0x7ac+0x7*0x6f;}get['model'](){w['removed']('pc.Batch#m'+'odel\x20was\x20r'+'emoved.\x20Us'+'e\x20pc.Batch'+'#meshInsta'+'nce\x20to\x20acc'+'ess\x20batche'+'d\x20mesh\x20ins'+'tead.');}}class St{constructor(_0x54864a,_0x589df7,_0x874d44,_0x575ea9,_0x4abc20=[Ji]){h(this,'_ui',!(-0x39*-0x25+-0x1*-0x7a3+-0xfdf)),h(this,'_sprite',!(-0x2099+0x1876+-0x412*-0x2)),h(this,'_obj',{'model':[],'element':[],'sprite':[],'render':[]}),h(this,'id'),h(this,'name'),h(this,'dynamic'),h(this,'maxAabbSiz'+'e'),h(this,'layers'),(this['id']=_0x54864a,this['name']=_0x589df7,this['dynamic']=_0x874d44,this['maxAabbSiz'+'e']=_0x575ea9,this['layers']=_0x4abc20);}}h(St,'MODEL','model'),h(St,'ELEMENT','element'),h(St,'SPRITE','sprite'),h(St,'RENDER','render');const Hm=new te();class xl{constructor(_0x2dd58b){h(this,'bones'),(this['_dirty']=!(-0x2139+0x632+0x1b07),this['_rootBone']=null,this['_skinUpdat'+'eIndex']=-(-0x27*-0xea+-0xbd1*-0x3+-0x64*0xb6),this['_updateBef'+'oreCull']=!(-0x1cb0+-0x319*-0xa+-0x24a),_0x2dd58b&&this['initSkin'](_0x2dd58b));}set['rootBone'](_0x1a0765){this['_rootBone']=_0x1a0765;}get['rootBone'](){return this['_rootBone'];}['init'](_0x54841b,_0x4c299){const _0x4a58f0=_0x4c299*(0x1763*-0x1+0x1*-0x35b+0x1ac1);let _0x33fce6=Math['ceil'](Math['sqrt'](_0x4a58f0));_0x33fce6=Y['roundUp'](_0x33fce6,0x1be0+-0x12a1+-0x93c);const _0xd66d44=Math['ceil'](_0x4a58f0/_0x33fce6);this['boneTextur'+'e']=new _e(_0x54841b,{'width':_0x33fce6,'height':_0xd66d44,'format':Xt,'mipmaps':!(0x2c9*-0x7+-0x113e+0x1*0x24be),'minFilter':Te,'magFilter':Te,'name':'skin'}),this['matrixPale'+'tte']=this['boneTextur'+'e']['lock']({'mode':kS}),this['boneTextur'+'e']['unlock']();}['destroy'](){this['boneTextur'+'e']&&(this['boneTextur'+'e']['destroy'](),this['boneTextur'+'e']=null);}['resolve'](_0x282d03,_0x476fc7){this['rootBone']=_0x282d03;const _0x4a89a8=this['skin'],_0x36b69d=[];for(let _0x2d13ff=-0x139*-0xb+-0x3d1*0xa+0x13*0x14d;_0x2d13ff<_0x4a89a8['boneNames']['length'];_0x2d13ff++){const _0x120f3b=_0x4a89a8['boneNames'][_0x2d13ff];let _0x4de564=_0x282d03['findByName'](_0x120f3b);_0x4de564||(w['error']('Failed\x20to\x20'+'find\x20bone\x20'+'['+_0x120f3b+(']\x20in\x20the\x20e'+'ntity\x20hier'+'archy,\x20Ren'+'derCompone'+'nt\x20on\x20')+_0x476fc7['name']+(',\x20rootBone'+':\x20')+_0x282d03['name']),_0x4de564=_0x476fc7),_0x36b69d['push'](_0x4de564);}this['bones']=_0x36b69d;}['initSkin'](_0x1cef31){this['skin']=_0x1cef31,this['bones']=[];const _0x4084a7=_0x1cef31['inverseBin'+'dPose']['length'];this['init'](_0x1cef31['device'],_0x4084a7),this['matrices']=[];for(let _0x1280ae=-0xde9+0x195b+-0xb72;_0x1280ae<_0x4084a7;_0x1280ae++)this['matrices'][_0x1280ae]=new te();}['uploadBone'+'s'](_0x3da197){this['boneTextur'+'e']['upload']();}['_updateMat'+'rices'](_0x36b197,_0x18bce8){if(this['_skinUpdat'+'eIndex']!==_0x18bce8){this['_skinUpdat'+'eIndex']=_0x18bce8,Hm['copy'](_0x36b197['getWorldTr'+'ansform']())['invert']();for(let _0x44885a=this['bones']['length']-(-0x964*0x2+-0x1a98+0x2d61);_0x44885a>=0xd15*0x1+-0x1587+-0x1*-0x872;_0x44885a--)this['matrices'][_0x44885a]['mulAffine2'](Hm,this['bones'][_0x44885a]['getWorldTr'+'ansform']()),this['matrices'][_0x44885a]['mulAffine2'](this['matrices'][_0x44885a],this['skin']['inverseBin'+'dPose'][_0x44885a]);}}['updateMatr'+'ices'](_0x4f8906,_0x851ff3){this['_updateBef'+'oreCull']&&this['_updateMat'+'rices'](_0x4f8906,_0x851ff3);}['updateMatr'+'ixPalette'](_0x46238f,_0x4a7f38){this['_updateMat'+'rices'](_0x46238f,_0x4a7f38);const _0x42c709=this['matrixPale'+'tte'],_0x5384e5=this['bones']['length'];for(let _0x38056e=-0x10a7+0x9*-0xbb+0x173a;_0x38056e<_0x5384e5;_0x38056e++){const _0x116496=this['matrices'][_0x38056e]['data'],_0xb260ff=_0x38056e*(0x646+0x5*-0x7+0x617*-0x1);_0x42c709[_0xb260ff]=_0x116496[-0x9a*0x25+0x26e8+0x1*-0x10a6],_0x42c709[_0xb260ff+(-0x3d1*0x8+0x2*-0xbed+0x3663)]=_0x116496[0xe2a+-0xaf7+0xa3*-0x5],_0x42c709[_0xb260ff+(0x13d4*0x1+0x12c7+-0x2699)]=_0x116496[-0x2c*0x4f+-0x2587+0x3323],_0x42c709[_0xb260ff+(0x2*0x5c0+-0x35*-0x3d+0x15*-0x126)]=_0x116496[0x3c*-0x8b+-0x1*0xb57+0x2bf7],_0x42c709[_0xb260ff+(-0x4*0x853+0x715+0x1a3b)]=_0x116496[0x1292+0x2525+-0x37b6],_0x42c709[_0xb260ff+(0x1*-0x1649+-0x2ae*0x7+0x2910)]=_0x116496[0x1a58+0x236*-0x2+-0x15e7],_0x42c709[_0xb260ff+(0x1021*-0x1+-0x55*0x17+0x17ca)]=_0x116496[-0x131b+-0x75e+0x1a82],_0x42c709[_0xb260ff+(0x4a7*-0x3+-0x2da+0x10d6)]=_0x116496[0x1*0x1828+-0xc5a+-0xbc1],_0x42c709[_0xb260ff+(0xc01+0x18fc+0x24f5*-0x1)]=_0x116496[0x205b+-0x7*-0x367+-0x382a],_0x42c709[_0xb260ff+(0x3b2+-0x19cb*0x1+-0x1*-0x1622)]=_0x116496[-0x160f+0x19*0x104+-0x1*0x34f],_0x42c709[_0xb260ff+(-0x557+0x44f+0x112)]=_0x116496[0x1ee3*-0x1+-0x3*0x304+-0x27f9*-0x1],_0x42c709[_0xb260ff+(-0x19d7+0x2*0xb58+0x2*0x199)]=_0x116496[-0x797*0x1+-0x16cc+0x1*0x1e71];}this['uploadBone'+'s'](this['skin']['device']);}}class Wm extends xl{constructor(_0x291c4f,_0x1013b0,_0x2eeb30){super();const _0x49534e=_0x1013b0['length'];this['init'](_0x291c4f,_0x49534e),this['device']=_0x291c4f,this['rootNode']=_0x2eeb30,this['bones']=_0x1013b0;}['updateMatr'+'ices'](_0x21cbc5,_0x48dad7){}['updateMatr'+'ixPalette'](_0x1554e5,_0x11a4fd){const _0x1b959e=this['matrixPale'+'tte'],_0x3ea708=this['bones']['length'];for(let _0x2c263f=-0x1f7f+-0x514+0x3*0xc31;_0x2c263f<_0x3ea708;_0x2c263f++){const _0xa6e847=this['bones'][_0x2c263f]['getWorldTr'+'ansform']()['data'],_0x15e886=_0x2c263f*(0x1193+-0x16d*0x1+0x6*-0x2af);_0x1b959e[_0x15e886]=_0xa6e847[-0x1*-0x179d+-0xb9b+-0x1d*0x6a],_0x1b959e[_0x15e886+(-0x6c5+-0x4*0x9a5+-0x306*-0xf)]=_0xa6e847[-0x1*-0x483+-0x1e4f+0x19d0],_0x1b959e[_0x15e886+(-0x263*0x9+0xdb0+-0x7cd*-0x1)]=_0xa6e847[0x13*-0x111+0x4*0x48c+0x21b],_0x1b959e[_0x15e886+(0x20a4+-0x523*0x3+-0x1138)]=_0xa6e847[-0x679*0x1+0x4fd+-0x188*-0x1],_0x1b959e[_0x15e886+(0x1086*-0x1+0xb1e+-0x56c*-0x1)]=_0xa6e847[0x1276+-0x1b4b+0x1a*0x57],_0x1b959e[_0x15e886+(-0x1591+-0x5c5+0x1b5b*0x1)]=_0xa6e847[0x14b4+0x2152+-0xacd*0x5],_0x1b959e[_0x15e886+(0x283*-0x4+-0x1*-0x16a2+-0x30*0x43)]=_0xa6e847[0x1447+0x1d52+-0x3190],_0x1b959e[_0x15e886+(0x2*0x67d+-0x1*-0x214a+-0x2e3d)]=_0xa6e847[-0x1499+0xd3a+-0x76c*-0x1],_0x1b959e[_0x15e886+(0x944+0x3*-0x529+0x63f)]=_0xa6e847[0x1f13+-0x2620+0x70f],_0x1b959e[_0x15e886+(0x4b*0x1b+0x6*0x375+-0x1c9e)]=_0xa6e847[-0x3*-0x1ff+0x21b+-0x812],_0x1b959e[_0x15e886+(0x1*0x101d+0xbc*-0xe+0x1*-0x5cb)]=_0xa6e847[-0xbd8+-0x2*-0xe3+0xa1c],_0x1b959e[_0x15e886+(-0x22f2+-0x12b1+0x35ae*0x1)]=_0xa6e847[0x1*0xbe9+-0x4b0+0x5*-0x16f];}this['uploadBone'+'s'](this['device']);}}let Fw=-0x51b*-0x1+0x7*0x1e4+-0x1257;class oi{constructor(){this['initDefaul'+'ts']();}['initDefaul'+'ts'](){this['recreate']=!(0x3f4+-0xc7*0x3+-0x3*0x8a),this['verticesUs'+'age']=ms,this['indicesUsa'+'ge']=ms,this['maxVertice'+'s']=0x6*0x5aa+-0x1f*-0x131+-0x46eb,this['maxIndices']=-0x4d*-0x3d+-0x24b6*-0x1+0x5*-0xb03,this['vertexCoun'+'t']=-0x1*-0x2705+0x5e2*-0x2+0x1b41*-0x1,this['indexCount']=-0x1b33+0x88*-0x17+0x276b*0x1,this['vertexStre'+'amsUpdated']=!(0x9*0x40d+0x78f+-0x2c03),this['indexStrea'+'mUpdated']=!(0xa6*0x7+-0x98c+0x503),this['vertexStre'+'amDictiona'+'ry']={},this['indices']=null;}['_changeVer'+'texCount'](_0x409330,_0x43f5c3){this['vertexCoun'+'t']?w['assert'](this['vertexCoun'+'t']===_0x409330,'Vertex\x20str'+'eam\x20'+_0x43f5c3+'\x20has\x20'+_0x409330+('\x20vertices,'+'\x20which\x20doe'+'s\x20not\x20matc'+'h\x20already\x20'+'set\x20stream'+'s\x20with\x20')+this['vertexCoun'+'t']+'\x20vertices.'):this['vertexCoun'+'t']=_0x409330;}}h(oi,'DEFAULT_CO'+'MPONENTS_P'+'OSITION',0x9f7*0x2+-0x1*0x92c+-0xabf),h(oi,'DEFAULT_CO'+'MPONENTS_N'+'ORMAL',-0x1*-0x1bd7+-0x1*-0x13aa+0x2f7e*-0x1),h(oi,'DEFAULT_CO'+'MPONENTS_U'+'V',0x111f+-0xda3+-0x37a),h(oi,'DEFAULT_CO'+'MPONENTS_C'+'OLORS',-0x78d*0x3+0x1ca7+-0x17f*0x4);class Nw{constructor(_0x323595,_0x13ba29,_0x5ecdd,_0x4ea318,_0x1d6f7b){this['data']=_0x323595,this['componentC'+'ount']=_0x13ba29,this['dataType']=_0x5ecdd,this['dataTypeNo'+'rmalize']=_0x4ea318,this['asInt']=_0x1d6f7b;}}class Ge extends td{constructor(_0x1ada40,_0x322caf){super(),h(this,'indexBuffe'+'r',[null]),h(this,'vertexBuff'+'er',null),h(this,'primitive',[{'type':0x0,'base':0x0,'baseVertex':0x0,'count':0x0}]),h(this,'skin',null),h(this,'boneAabb',null),h(this,'_aabbVer',-0xe*0x1d+0x1063*0x1+-0xecd),h(this,'_aabb',new De()),h(this,'_geometryD'+'ata',null),h(this,'_morph',null),h(this,'_storageIn'+'dex',!(-0x1f33+-0x58*0x13+0x25bc)),h(this,'_storageVe'+'rtex',!(0x1*0x54b+-0xf*-0x86+-0xd24)),(this['id']=Fw++,w['assert'](_0x1ada40,'Mesh\x20const'+'ructor\x20tak'+'es\x20a\x20Graph'+'icsDevice\x20'+'as\x20a\x20param'+'eter,\x20and\x20'+'it\x20was\x20not'+'\x20provided.'),this['device']=_0x1ada40,this['_storageIn'+'dex']=(_0x322caf==null?void(0x4fb+-0x1d*-0x71+-0x11c8*0x1):_0x322caf['storageInd'+'ex'])||!(-0x59*-0x55+-0x995*-0x4+0x6*-0xb50),this['_storageVe'+'rtex']=(_0x322caf==null?void(-0x17b*-0x17+-0x1445+-0x7e*0x1c):_0x322caf['storageVer'+'tex'])||!(-0x1102+0xc64+0x49f));}static['fromGeomet'+'ry'](_0x55aa56,_0x534b76,_0x32d4a0={}){const _0x1d578b=new Ge(_0x55aa56,_0x32d4a0),{positions:_0x2be109,normals:_0x555090,tangents:_0x4eed49,colors:_0x2960ce,uvs:_0x25ccc1,uvs1:_0x280325,blendIndices:_0x591ac3,blendWeights:_0x4f3a88,indices:_0x5a24fe}=_0x534b76;return _0x2be109&&_0x1d578b['setPositio'+'ns'](_0x2be109),_0x555090&&_0x1d578b['setNormals'](_0x555090),_0x4eed49&&_0x1d578b['setVertexS'+'tream'](yi,_0x4eed49,-0x21ab+-0x1a90+0x3c3f),_0x2960ce&&_0x1d578b['setColors3'+'2'](_0x2960ce),_0x25ccc1&&_0x1d578b['setUvs'](-0xd70+0x152d+0x7bd*-0x1,_0x25ccc1),_0x280325&&_0x1d578b['setUvs'](-0x1*-0x299+-0x21c7*-0x1+-0x245f,_0x280325),_0x591ac3&&_0x1d578b['setVertexS'+'tream'](us,_0x591ac3,0x1*0x1763+0x16eb+-0x2e4a,_0x591ac3['length']/(0x1*0x1c8d+-0x12f0+-0x999),ia),_0x4f3a88&&_0x1d578b['setVertexS'+'tream'](gi,_0x4f3a88,-0x26f4+-0xf77+0x366f*0x1),_0x5a24fe&&_0x1d578b['setIndices'](_0x5a24fe),_0x1d578b['update'](),_0x1d578b;}set['morph'](_0x5b42fa){_0x5b42fa!==this['_morph']&&(this['_morph']&&this['_morph']['decRefCoun'+'t'](),this['_morph']=_0x5b42fa,_0x5b42fa&&_0x5b42fa['incRefCoun'+'t']());}get['morph'](){return this['_morph'];}set['aabb'](_0x4c3c13){this['_aabb']=_0x4c3c13,this['_aabbVer']++;}get['aabb'](){return this['_aabb'];}['destroy'](){const _0x55270a=this['morph'];_0x55270a&&(this['morph']=null,_0x55270a['refCount']<-0x1cbb+-0x14ce+-0x22*-0x175&&_0x55270a['destroy']()),this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);for(let _0x47610d=0x1505+-0x3*0xa86+0xa8d;_0x47610d<this['indexBuffe'+'r']['length'];_0x47610d++)this['_destroyIn'+'dexBuffer'](_0x47610d);this['indexBuffe'+'r']['length']=0x1*0xf36+-0x2306+0x9e8*0x2,this['_geometryD'+'ata']=null;}['_destroyIn'+'dexBuffer'](_0x555fc3){this['indexBuffe'+'r'][_0x555fc3]&&(this['indexBuffe'+'r'][_0x555fc3]['destroy'](),this['indexBuffe'+'r'][_0x555fc3]=null);}['_initBoneA'+'abbs'](_0x19abc2){this['boneAabb']=[],this['boneUsed']=[];let _0x12365d,_0x4adf66,_0xdc5fc2,_0xed9a2f,_0x2bd0b9;const _0x5927b0=[],_0x1839ce=[],_0x3ef3a4=this['boneUsed'],_0x35f110=this['skin']['boneNames']['length'];let _0x470b3f,_0x2f18d1,_0x101b27;for(let _0x55ff97=0x226c*-0x1+0xa*-0x91+0x2816;_0x55ff97<_0x35f110;_0x55ff97++)_0x5927b0[_0x55ff97]=new D(Number['MAX_VALUE'],Number['MAX_VALUE'],Number['MAX_VALUE']),_0x1839ce[_0x55ff97]=new D(-Number['MAX_VALUE'],-Number['MAX_VALUE'],-Number['MAX_VALUE']);const _0x28efc3=new Ao(this['vertexBuff'+'er']),_0xde01c5=_0x28efc3['element'][Pe],_0x24983d=_0x28efc3['element'][gi],_0x1ab922=_0x28efc3['element'][us],_0x5d7d07=this['vertexBuff'+'er']['numVertice'+'s'];for(let _0x5d640c=0x2488+0x1149+-0x17*0x257;_0x5d640c<_0x5d7d07;_0x5d640c++){for(let _0xb54594=-0x4c1+-0x13ff+-0x420*-0x6;_0xb54594<0xc91+0xb6f+0x5ff*-0x4;_0xb54594++)if(_0x24983d['array'][_0x24983d['index']+_0xb54594]>0x20d8+-0x679+-0x1a5f){const _0x1ce764=_0x1ab922['array'][_0x1ab922['index']+_0xb54594];if(_0x3ef3a4[_0x1ce764]=!(-0x147*0x15+-0x2644+0x4117),_0x12365d=_0xde01c5['array'][_0xde01c5['index']],_0x4adf66=_0xde01c5['array'][_0xde01c5['index']+(-0xb6*0x29+-0x9*0x1cf+0x2d6e)],_0xdc5fc2=_0xde01c5['array'][_0xde01c5['index']+(0x1*0x258d+-0xcfb+-0x1890)],_0xed9a2f=_0x1839ce[_0x1ce764],_0x2bd0b9=_0x5927b0[_0x1ce764],_0x2bd0b9['x']>_0x12365d&&(_0x2bd0b9['x']=_0x12365d),_0x2bd0b9['y']>_0x4adf66&&(_0x2bd0b9['y']=_0x4adf66),_0x2bd0b9['z']>_0xdc5fc2&&(_0x2bd0b9['z']=_0xdc5fc2),_0xed9a2f['x']<_0x12365d&&(_0xed9a2f['x']=_0x12365d),_0xed9a2f['y']<_0x4adf66&&(_0xed9a2f['y']=_0x4adf66),_0xed9a2f['z']<_0xdc5fc2&&(_0xed9a2f['z']=_0xdc5fc2),_0x19abc2){let _0x307270=_0x470b3f=_0x12365d,_0x45717d=_0x2f18d1=_0x4adf66,_0x5f3f8b=_0x101b27=_0xdc5fc2;for(let _0x5cd3d0=0x176e+0x4c*-0x56+0x21a;_0x5cd3d0<_0x19abc2['length'];_0x5cd3d0++){const _0xdef2fb=_0x19abc2[_0x5cd3d0],_0x3f7a60=_0xdef2fb['deltaPosit'+'ions'][_0x5d640c*(-0x21fe+-0xeae+0x1*0x30af)],_0x330209=_0xdef2fb['deltaPosit'+'ions'][_0x5d640c*(-0x179c*0x1+0x3*0x699+-0x5*-0xc4)+(-0x1*0x1abf+0xe1*0xf+0xd91)],_0x4e6e0d=_0xdef2fb['deltaPosit'+'ions'][_0x5d640c*(-0xa54*-0x1+0x17b+-0xbcc)+(-0x2310+-0x1e84+-0x1*-0x4196)];_0x3f7a60<0x755*0x3+0x1bc7+0x31c6*-0x1?_0x307270+=_0x3f7a60:_0x470b3f+=_0x3f7a60,_0x330209<-0x14c5+0x31d*-0x9+0x30ca?_0x45717d+=_0x330209:_0x2f18d1+=_0x330209,_0x4e6e0d<0x811+0x1f6b+0x2d2*-0xe?_0x5f3f8b+=_0x4e6e0d:_0x101b27+=_0x4e6e0d;}_0x2bd0b9['x']>_0x307270&&(_0x2bd0b9['x']=_0x307270),_0x2bd0b9['y']>_0x45717d&&(_0x2bd0b9['y']=_0x45717d),_0x2bd0b9['z']>_0x5f3f8b&&(_0x2bd0b9['z']=_0x5f3f8b),_0xed9a2f['x']<_0x470b3f&&(_0xed9a2f['x']=_0x470b3f),_0xed9a2f['y']<_0x2f18d1&&(_0xed9a2f['y']=_0x2f18d1),_0xed9a2f['z']<_0x101b27&&(_0xed9a2f['z']=_0x101b27);}}_0x28efc3['next']();}const _0x47917c=this['vertexBuff'+'er']['getFormat']()['elements']['find'](_0x2420d0=>_0x2420d0['name']===Pe);if(_0x47917c&&_0x47917c['normalize']){const _0x5363b1=((()=>{switch(_0x47917c['dataType']){case Hh:return _0x409861=>Math['max'](_0x409861/(0x2594+0x796+-0x2cab),-(0x44*-0x2b+-0x178*-0x6+0x3*0xdf));case ia:return _0x4687c2=>_0x4687c2/(0x2a8+-0xc22+-0xa79*-0x1);case Wh:return _0xb265e8=>Math['max'](_0xb265e8/(-0x139*-0xc+0x56ec+0x1a67),-(-0x1bcc+-0x5*-0x32+0x1ad3));case _l:return _0x28038e=>_0x28038e/(-0x1a70*0xd+-0x47b9+-0x8*-0x53ed);default:return _0x181ea8=>_0x181ea8;}})());for(let _0x29c6ae=0x146f+-0x142b*-0x1+0x1*-0x289a;_0x29c6ae<_0x35f110;_0x29c6ae++)if(_0x3ef3a4[_0x29c6ae]){const _0x318df7=_0x5927b0[_0x29c6ae],_0x2af794=_0x1839ce[_0x29c6ae];_0x318df7['set'](_0x5363b1(_0x318df7['x']),_0x5363b1(_0x318df7['y']),_0x5363b1(_0x318df7['z'])),_0x2af794['set'](_0x5363b1(_0x2af794['x']),_0x5363b1(_0x2af794['y']),_0x5363b1(_0x2af794['z']));}}for(let _0x6a20d7=0xd*0x4f+0x1099+-0x149c;_0x6a20d7<_0x35f110;_0x6a20d7++){const _0x4cd847=new De();_0x4cd847['setMinMax'](_0x5927b0[_0x6a20d7],_0x1839ce[_0x6a20d7]),this['boneAabb']['push'](_0x4cd847);}}['_initGeome'+'tryData'](){this['_geometryD'+'ata']||(this['_geometryD'+'ata']=new oi(),this['vertexBuff'+'er']&&(this['_geometryD'+'ata']['vertexCoun'+'t']=this['vertexBuff'+'er']['numVertice'+'s'],this['_geometryD'+'ata']['maxVertice'+'s']=this['vertexBuff'+'er']['numVertice'+'s']),this['indexBuffe'+'r']['length']>0x20e+0xb*-0x1bf+-0x1127*-0x1&&this['indexBuffe'+'r'][-0x2*-0xd7e+0x1cb6+-0x37b2]&&(this['_geometryD'+'ata']['indexCount']=this['indexBuffe'+'r'][0x902+0x463*0x7+0xd3d*-0x3]['numIndices'],this['_geometryD'+'ata']['maxIndices']=this['indexBuffe'+'r'][-0xe*0x215+0x1*-0x1332+0x3058]['numIndices']));}['clear'](_0x21b10e,_0x20a9d4,_0x5c173c=0x10a8*0x1+0x25f3+0x369b*-0x1,_0x25bc7e=0x1480+-0x69a+-0xde6){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['initDefaul'+'ts'](),this['_geometryD'+'ata']['recreate']=!(-0x133+-0x1bef+-0x1*-0x1d22),this['_geometryD'+'ata']['maxVertice'+'s']=_0x5c173c,this['_geometryD'+'ata']['maxIndices']=_0x25bc7e,this['_geometryD'+'ata']['verticesUs'+'age']=_0x21b10e?ms:zc,this['_geometryD'+'ata']['indicesUsa'+'ge']=_0x20a9d4?ms:zc;}['setVertexS'+'tream'](_0x2a4684,_0x40c63f,_0x276dd7,_0x56a0cc,_0x1f2232=Ve,_0x2213df=!(-0x1274+0x1540+-0x2cb),_0x9291b3=!(-0x12eb+-0xc90+-0x326*-0xa)){this['_initGeome'+'tryData']();const _0x10d1a4=_0x56a0cc||_0x40c63f['length']/_0x276dd7;this['_geometryD'+'ata']['_changeVer'+'texCount'](_0x10d1a4,_0x2a4684),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(-0x1d*-0x130+0xa6a+-0x2cda),this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x2a4684]=new Nw(_0x40c63f,_0x276dd7,_0x1f2232,_0x2213df,_0x9291b3);}['getVertexS'+'tream'](_0x3059ec,_0x4ab38c){let _0x2a5a62=0x177a+0x83c+-0x1fb6,_0x825908=!(0x2259*0x1+0x98b+-0x5*0x8c7);if(this['_geometryD'+'ata']){const _0x47bc5a=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x3059ec];_0x47bc5a&&(_0x825908=!(-0x3d*0x67+-0xb*0x286+0x1*0x344d),_0x2a5a62=this['_geometryD'+'ata']['vertexCoun'+'t'],ArrayBuffer['isView'](_0x4ab38c)?_0x4ab38c['set'](_0x47bc5a['data']):(_0x4ab38c['length']=0x1*0x309+-0x3d6+-0x5*-0x29,_0x4ab38c['push'](_0x47bc5a['data'])));}return _0x825908||this['vertexBuff'+'er']&&(_0x2a5a62=new Ao(this['vertexBuff'+'er'])['readData'](_0x3059ec,_0x4ab38c)),_0x2a5a62;}['setPositio'+'ns'](_0x2762f3,_0x48f96e=oi['DEFAULT_CO'+'MPONENTS_P'+'OSITION'],_0x4f4607){this['setVertexS'+'tream'](Pe,_0x2762f3,_0x48f96e,_0x4f4607,Ve,!(0x90e*0x4+-0x805*0x2+-0x142d));}['setNormals'](_0xb8a22f,_0x26f524=oi['DEFAULT_CO'+'MPONENTS_N'+'ORMAL'],_0xb71162){this['setVertexS'+'tream'](gs,_0xb8a22f,_0x26f524,_0xb71162,Ve,!(-0x14c1+0x2fe*0x3+0xbc8));}['setUvs'](_0x512697,_0x3c4e68,_0x1c5d14=oi['DEFAULT_CO'+'MPONENTS_U'+'V'],_0x2b8089){this['setVertexS'+'tream'](fm+_0x512697,_0x3c4e68,_0x1c5d14,_0x2b8089,Ve,!(-0x871*0x1+-0x1*-0x124f+-0x9dd));}['setColors'](_0x124077,_0x143f92=oi['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x57c264){this['setVertexS'+'tream'](Wt,_0x124077,_0x143f92,_0x57c264,Ve,!(-0x2*-0xa6f+0x3*0x901+-0x2fe0));}['setColors3'+'2'](_0xd290af,_0xf077c){this['setVertexS'+'tream'](Wt,_0xd290af,oi['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0xf077c,ia,!(0x19b6+-0x24e0+0xb2a));}['setIndices'](_0x2ed189,_0x5e271e){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(-0x934+-0x5*-0xed+0x493),this['_geometryD'+'ata']['indices']=_0x2ed189,this['_geometryD'+'ata']['indexCount']=_0x5e271e||_0x2ed189['length'];}['getPositio'+'ns'](_0x46959e){return this['getVertexS'+'tream'](Pe,_0x46959e);}['getNormals'](_0x1f1e62){return this['getVertexS'+'tream'](gs,_0x1f1e62);}['getUvs'](_0x1f3415,_0x547074){return this['getVertexS'+'tream'](fm+_0x1f3415,_0x547074);}['getColors'](_0x457c04){return this['getVertexS'+'tream'](Wt,_0x457c04);}['getIndices'](_0x17545d){let _0x205bf0=-0x1*0x1f4b+-0x5b*0x4e+0x3b05;if(this['_geometryD'+'ata']&&this['_geometryD'+'ata']['indices']){const _0x4fb854=this['_geometryD'+'ata']['indices'];if(_0x205bf0=this['_geometryD'+'ata']['indexCount'],ArrayBuffer['isView'](_0x17545d))_0x17545d['set'](_0x4fb854);else{_0x17545d['length']=-0x9e*0x7+0x1d3*-0x6+0xf44;for(let _0xddc069=0x258d+0xbb*-0x1+-0x2*0x1269,_0x285ab1=_0x4fb854['length'];_0xddc069<_0x285ab1;_0xddc069++)_0x17545d['push'](_0x4fb854[_0xddc069]);}}else this['indexBuffe'+'r']['length']>-0xf0+0x1cc+-0xdc&&this['indexBuffe'+'r'][-0x1ebb+0xe31+0x49*0x3a]&&(_0x205bf0=this['indexBuffe'+'r'][-0xd6e*0x2+-0x26b+-0x5*-0x5db]['readData'](_0x17545d));return _0x205bf0;}['update'](_0x821657=qs,_0x51a518=!(0x7f5+0xbd0+-0x13c5)){if(this['_geometryD'+'ata']){if(_0x51a518){const _0x51eccc=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][Pe];_0x51eccc&&_0x51eccc['componentC'+'ount']===0x4*0x4cd+0x4d6+-0x1*0x1807&&(this['_aabb']['compute'](_0x51eccc['data'],this['_geometryD'+'ata']['vertexCoun'+'t']),this['_aabbVer']++);}let _0x3ac8bd=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['vertexCoun'+'t']>this['_geometryD'+'ata']['maxVertice'+'s']&&(_0x3ac8bd=!(-0x2445+0x251a+-0xd5),this['_geometryD'+'ata']['maxVertice'+'s']=this['_geometryD'+'ata']['vertexCoun'+'t']),_0x3ac8bd&&this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);let _0x14a3b1=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['indexCount']>this['_geometryD'+'ata']['maxIndices']&&(_0x14a3b1=!(-0xa7+0x20dd+-0x2036),this['_geometryD'+'ata']['maxIndices']=this['_geometryD'+'ata']['indexCount']),_0x14a3b1&&this['indexBuffe'+'r']['length']>0x2f*-0x2b+0x1e4f+0x166a*-0x1&&this['indexBuffe'+'r'][-0x19c0+0x2416+-0xa56]&&(this['indexBuffe'+'r'][-0x583+-0x209*0x1+0x78c]['destroy'](),this['indexBuffe'+'r'][-0x13*-0xfa+0x155d+-0x27eb]=null),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&this['_updateVer'+'texBuffer'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&this['_updateInd'+'exBuffer'](),this['primitive'][0x61f+-0x21f1+0x1bd2]['type']=_0x821657,this['indexBuffe'+'r']['length']>0x2663*0x1+-0x1*0x7e6+0x619*-0x5&&this['indexBuffe'+'r'][0x660+0x1770+-0x1dd0]?this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&(this['primitive'][0x1*0x2417+-0x130*-0xd+-0x3387]['count']=this['_geometryD'+'ata']['indexCount'],this['primitive'][-0x1*-0x12d0+0x1a37+-0x2d07]['indexed']=!(-0x8a3+-0xfbc+0x185f)):this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&(this['primitive'][0x2631+0x78d+-0x2dbe]['count']=this['_geometryD'+'ata']['vertexCoun'+'t'],this['primitive'][0x13dc+-0x14d8+0xfc]['indexed']=!(0x145f+-0x1b52+-0xa*-0xb2)),this['_geometryD'+'ata']['vertexCoun'+'t']=-0x1a2b+-0x13bb+0x2de6,this['_geometryD'+'ata']['indexCount']=0xad3+0xd40+0x1*-0x1813,this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(-0x1*-0x1fa7+-0x11d1+-0xdd5),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(0x13*-0x182+-0xecb+0x53*0x86),this['_geometryD'+'ata']['recreate']=!(0x1da9+0x2055+-0x3dfd),this['updateRend'+'erStates']();}}['_buildVert'+'exFormat'](_0x246cda){const _0x3e6f26=[];for(const _0x4ca6bc in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x2ebc98=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x4ca6bc];_0x3e6f26['push']({'semantic':_0x4ca6bc,'components':_0x2ebc98['componentC'+'ount'],'type':_0x2ebc98['dataType'],'normalize':_0x2ebc98['dataTypeNo'+'rmalize'],'asInt':_0x2ebc98['asInt']});}return new kt(this['device'],_0x3e6f26,_0x246cda);}['_updateVer'+'texBuffer'](){if(!this['vertexBuff'+'er']){const _0x47c2ae=this['_geometryD'+'ata']['maxVertice'+'s'],_0x1fd8e4=this['_buildVert'+'exFormat'](_0x47c2ae);this['vertexBuff'+'er']=new Ds(this['device'],_0x1fd8e4,_0x47c2ae,{'usage':this['_geometryD'+'ata']['verticesUs'+'age'],'storage':this['_storageVe'+'rtex']});}const _0x22cfa5=new Ao(this['vertexBuff'+'er']),_0x56f0cb=this['_geometryD'+'ata']['vertexCoun'+'t'];for(const _0x211b6a in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x118fd5=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x211b6a];_0x22cfa5['writeData'](_0x211b6a,_0x118fd5['data'],_0x56f0cb),delete this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x211b6a];}_0x22cfa5['end']();}['_updateInd'+'exBuffer'](){if(this['indexBuffe'+'r']['length']<=-0x1d74*0x1+0x961+0x1413||!this['indexBuffe'+'r'][0x23bc+0x121+-0x24dd]){const _0x2d79c0=this['_geometryD'+'ata']['maxVertice'+'s'],_0x5d0ec4=_0x2d79c0>0x1f9a7+-0x9f49*0x1+0x1*-0x5a5f||_0x2d79c0===0x1ce6+0x130f+-0x2ff5?yr:ji,_0x3f739f=this['_storageIn'+'dex']?{'storage':!(-0xd*-0x63+0x1e6d*-0x1+0x1966)}:void(-0x1*0xd96+-0xb*-0x136+0x44);this['indexBuffe'+'r'][-0x815+-0x3*-0x5c9+-0x4a3*0x2]=new xr(this['device'],_0x5d0ec4,this['_geometryD'+'ata']['maxIndices'],this['_geometryD'+'ata']['indicesUsa'+'ge'],void(0x4*-0x46f+-0x2369+0x11b7*0x3),_0x3f739f);}const _0xe50c4f=this['_geometryD'+'ata']['indices'];_0xe50c4f&&(this['indexBuffe'+'r'][0xad*0x35+0x1b8c+-0x3f5d]['writeData'](_0xe50c4f,this['_geometryD'+'ata']['indexCount']),this['_geometryD'+'ata']['indices']=null);}['prepareRen'+'derState'](_0x488722){_0x488722===Vr?this['generateWi'+'reframe']():_0x488722===Bl&&(this['primitive'][Bl]={'type':Vh,'base':0x0,'baseVertex':0x0,'count':this['vertexBuff'+'er']?this['vertexBuff'+'er']['numVertice'+'s']:0xb*0x1bf+-0x6a+-0x12cb,'indexed':!(-0xaa8+0x1d0c+-0x1263)});}['updateRend'+'erStates'](){this['primitive'][Bl]&&this['prepareRen'+'derState'](Bl),this['primitive'][Vr]&&this['prepareRen'+'derState'](Vr);}['generateWi'+'reframe'](){this['_destroyIn'+'dexBuffer'](Vr);const _0x158996=this['vertexBuff'+'er']['numVertice'+'s'],_0x41a8eb=[];let _0x1eaf95;if(this['indexBuffe'+'r']['length']>-0xdc3+0x263d+-0x187a&&this['indexBuffe'+'r'][-0x6d5*0x1+-0x1e1e+0x24f3]){const _0x565b5c=[[-0x3d*-0x1+0x852+-0x88f,-0x46*-0x4e+0x9fd*0x3+-0x334a],[-0x256e+0x1319*-0x1+0x192*0x24,-0x22f*0x7+-0x565*-0x5+-0x82*0x17],[-0xb*0x66+-0x1c66+0x1*0x20ca,0x179*0x2+0x1193+-0x6d7*0x3]],_0x3fb3f8=this['primitive'][nn]['base'],_0x278702=this['primitive'][nn]['count'],_0x9ad8c8=this['primitive'][nn]['baseVertex']||-0x2655+-0xb59+-0x18d7*-0x2,_0x5b32aa=this['indexBuffe'+'r'][nn],_0xa75bbb=new Kc[_0x5b32aa['format']](_0x5b32aa['storage']),_0x554a6e=new Set();for(let _0x205a31=_0x3fb3f8;_0x205a31<_0x3fb3f8+_0x278702;_0x205a31+=0x1a2+-0x2496+0x22f7)for(let _0x24665e=-0x1*-0x1bd7+-0xd8f+0x1c9*-0x8;_0x24665e<0x9e2+-0x10f*0xb+0x1c6;_0x24665e++){const _0x11ca9a=_0xa75bbb[_0x205a31+_0x565b5c[_0x24665e][0x10+-0x1028+-0x338*-0x5]]+_0x9ad8c8,_0x78a6fb=_0xa75bbb[_0x205a31+_0x565b5c[_0x24665e][-0xb3*-0x3+0x1904+-0x1b1c]]+_0x9ad8c8,_0x342997=_0x11ca9a>_0x78a6fb?_0x78a6fb*_0x158996+_0x11ca9a:_0x11ca9a*_0x158996+_0x78a6fb;_0x554a6e['has'](_0x342997)||(_0x554a6e['add'](_0x342997),_0x41a8eb['push'](_0x11ca9a,_0x78a6fb));}_0x1eaf95=_0x5b32aa['format'];}else{for(let _0xe135b5=-0x7f*0x31+-0xf68+0xd3d*0x3;_0xe135b5<_0x158996;_0xe135b5+=0xe6+-0x3*0x34b+0x8fe)_0x41a8eb['push'](_0xe135b5,_0xe135b5+(-0x18b0+0xce*0x16+-0x6fd*-0x1),_0xe135b5+(0xf7f*-0x2+0x1dca+-0x3*-0x67),_0xe135b5+(0xa*0x277+0x17f6+0x184d*-0x2),_0xe135b5+(0x85e+-0x7*0x3df+0x215*0x9),_0xe135b5);_0x1eaf95=_0x41a8eb['length']>-0x13db1+-0x1*-0x103db+-0x139d5*-0x1?yr:ji;}const _0x2ed595=new xr(this['vertexBuff'+'er']['device'],_0x1eaf95,_0x41a8eb['length']);new Kc[_0x2ed595['format']](_0x2ed595['storage'])['set'](_0x41a8eb),_0x2ed595['unlock'](),this['primitive'][Vr]={'type':Gh,'base':0x0,'baseVertex':0x0,'count':_0x41a8eb['length'],'indexed':!(0x3*0x6b9+-0xefa+-0x531)},this['indexBuffe'+'r'][Vr]=_0x2ed595;}}const $m=new te(),xd=new D(),Xm=new le(),Td=new le(),qm=new D(),jm=new D(),kw=new te(),Uw=new le(),rs=new D(),Zn=new te(),as=new le(),Aa=new le(),Ym=new te(),wd=new D(),Vl=new D();function Km(_0x52ae64,_0x56987c){return _0x52ae64 instanceof Function?_0x52ae64:_0x5ddae9=>{let _0x5e1d0a=_0x5ddae9[_0x52ae64];return _0x5e1d0a instanceof Function&&(_0x5e1d0a=_0x5e1d0a()),_0x5e1d0a===_0x56987c;};}function Ny(_0x1507b1,_0x1f8a45){if(_0x1f8a45(_0x1507b1))return _0x1507b1;const _0x11a23f=_0x1507b1['_children'],_0x361f17=_0x11a23f['length'];for(let _0x2bcbc7=0x625+-0xf*-0x6d+-0xc88;_0x2bcbc7<_0x361f17;++_0x2bcbc7){const _0x61813a=Ny(_0x11a23f[_0x2bcbc7],_0x1f8a45);if(_0x61813a)return _0x61813a;}return null;}class Ie extends me{constructor(_0x24760f='Untitled'){super(),h(this,'name'),h(this,'tags',new To(this)),h(this,'localPosit'+'ion',new D()),h(this,'localRotat'+'ion',new le()),h(this,'localScale',new D(0x1ce3+-0xb56+-0x2*0x8c6,0xacf*-0x3+0x2294+-0x5*0x6e,-0x1*-0x2216+0x1bd5+-0x3dea)),h(this,'localEuler'+'Angles',new D()),h(this,'position',new D()),h(this,'rotation',new le()),h(this,'eulerAngle'+'s',new D()),h(this,'_scale',null),h(this,'localTrans'+'form',new te()),h(this,'_dirtyLoca'+'l',!(0x1cbd+-0xf*-0x291+-0x1669*0x3)),h(this,'_aabbVer',0x11b*0x1+0x24e8+0x107*-0x25),h(this,'_frozen',!(0xb31+0x2317+-0x435*0xb)),h(this,'worldTrans'+'form',new te()),h(this,'_dirtyWorl'+'d',!(-0x2408+0x1f11+-0x3*-0x1a8)),h(this,'_worldScal'+'eSign',-0xf1*0x7+-0x5*-0x6e6+-0x1be7),h(this,'_normalMat'+'rix',new _i()),h(this,'_dirtyNorm'+'al',!(-0x225+0x767+0x542*-0x1)),h(this,'_right',null),h(this,'_up',null),h(this,'_forward',null),h(this,'_parent',null),h(this,'_children',[]),h(this,'_graphDept'+'h',-0x10*-0xc2+0x1*0x1e55+-0x2a75),h(this,'_enabled',!(-0x1*-0x653+0x2451+-0x2aa4)),h(this,'_enabledIn'+'Hierarchy',!(-0x3*-0xac0+-0xc5f+-0x13e0)),h(this,'scaleCompe'+'nsation',!(0xef9+-0x1*0x1b1+-0x3*0x46d)),this['name']=_0x24760f;}get['right'](){return this['_right']||(this['_right']=new D()),this['getWorldTr'+'ansform']()['getX'](this['_right'])['normalize']();}get['up'](){return this['_up']||(this['_up']=new D()),this['getWorldTr'+'ansform']()['getY'](this['_up'])['normalize']();}get['forward'](){return this['_forward']||(this['_forward']=new D()),this['getWorldTr'+'ansform']()['getZ'](this['_forward'])['normalize']()['mulScalar'](-(0x8e3+0x542+0x2*-0x712));}get['normalMatr'+'ix'](){const _0x30ba80=this['_normalMat'+'rix'];return this['_dirtyNorm'+'al']&&(_0x30ba80['invertMat4'](this['getWorldTr'+'ansform']())['transpose'](),this['_dirtyNorm'+'al']=!(-0x18b8+0xd*-0x1be+-0xb5*-0x43)),_0x30ba80;}set['enabled'](_0x551579){var _0x149f3b;this['_enabled']!==_0x551579&&(this['_enabled']=_0x551579,(_0x551579&&((_0x149f3b=this['_parent'])!=null&&_0x149f3b['enabled'])||!_0x551579)&&this['_notifyHie'+'rarchyStat'+'eChanged'](this,_0x551579));}get['enabled'](){return this['_enabled']&&this['_enabledIn'+'Hierarchy'];}get['parent'](){return this['_parent'];}get['path'](){let _0xce8fb6=this['_parent'];if(!_0xce8fb6)return'';let _0x526e8d=this['name'];for(;_0xce8fb6&&_0xce8fb6['_parent'];)_0x526e8d=_0xce8fb6['name']+'/'+_0x526e8d,_0xce8fb6=_0xce8fb6['_parent'];return _0x526e8d;}get['root'](){let _0x1dd01e=this;for(;_0x1dd01e['_parent'];)_0x1dd01e=_0x1dd01e['_parent'];return _0x1dd01e;}get['children'](){return this['_children'];}get['graphDepth'](){return this['_graphDept'+'h'];}['_notifyHie'+'rarchyStat'+'eChanged'](_0x1f9f47,_0x4389a0){_0x1f9f47['_onHierarc'+'hyStateCha'+'nged'](_0x4389a0);const _0x5c3bbd=_0x1f9f47['_children'];for(let _0x24057c=0x2*-0x40e+0x1041+-0x2b7*0x3,_0x421034=_0x5c3bbd['length'];_0x24057c<_0x421034;_0x24057c++)_0x5c3bbd[_0x24057c]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x5c3bbd[_0x24057c],_0x4389a0);}['_onHierarc'+'hyStateCha'+'nged'](_0x5981bc){this['_enabledIn'+'Hierarchy']=_0x5981bc,_0x5981bc&&!this['_frozen']&&this['_unfreezeP'+'arentToRoo'+'t']();}['_cloneInte'+'rnal'](_0x532e1a){_0x532e1a['name']=this['name'];const _0x5c9b3b=this['tags']['_list'];_0x532e1a['tags']['clear']();for(let _0x126b4d=-0x1ba2+-0x464+0x2006;_0x126b4d<_0x5c9b3b['length'];_0x126b4d++)_0x532e1a['tags']['add'](_0x5c9b3b[_0x126b4d]);_0x532e1a['localPosit'+'ion']['copy'](this['localPosit'+'ion']),_0x532e1a['localRotat'+'ion']['copy'](this['localRotat'+'ion']),_0x532e1a['localScale']['copy'](this['localScale']),_0x532e1a['localEuler'+'Angles']['copy'](this['localEuler'+'Angles']),_0x532e1a['position']['copy'](this['position']),_0x532e1a['rotation']['copy'](this['rotation']),_0x532e1a['eulerAngle'+'s']['copy'](this['eulerAngle'+'s']),_0x532e1a['localTrans'+'form']['copy'](this['localTrans'+'form']),_0x532e1a['_dirtyLoca'+'l']=this['_dirtyLoca'+'l'],_0x532e1a['worldTrans'+'form']['copy'](this['worldTrans'+'form']),_0x532e1a['_dirtyWorl'+'d']=this['_dirtyWorl'+'d'],_0x532e1a['_dirtyNorm'+'al']=this['_dirtyNorm'+'al'],_0x532e1a['_aabbVer']=this['_aabbVer']+(0xe82+0x1c*-0x3a+-0x829),_0x532e1a['_enabled']=this['_enabled'],_0x532e1a['scaleCompe'+'nsation']=this['scaleCompe'+'nsation'],_0x532e1a['_enabledIn'+'Hierarchy']=!(0xc47+0x10*0xdf+-0xb*0x262);}['clone'](){const _0x59c050=new this['constructo'+'r']();return this['_cloneInte'+'rnal'](_0x59c050),_0x59c050;}['copy'](_0x3da2b2){return _0x3da2b2['_cloneInte'+'rnal'](this),this;}['destroy'](){this['remove']();const _0x49c7ee=this['_children'];for(;_0x49c7ee['length'];){const _0x2b8661=_0x49c7ee['pop']();_0x2b8661['_parent']=null,_0x2b8661['destroy']();}this['fire']('destroy',this),this['off']();}['find'](_0x464bd3,_0x250db4){const _0x241570=[],_0x3bc635=Km(_0x464bd3,_0x250db4);return this['forEach'](_0x23a67a=>{_0x3bc635(_0x23a67a)&&_0x241570['push'](_0x23a67a);}),_0x241570;}['findOne'](_0x4aa74b,_0x1a7c79){const _0x6fa40=Km(_0x4aa74b,_0x1a7c79);return Ny(this,_0x6fa40);}['findByTag'](..._0x19f74b){const _0x35027f=[],_0x52dd13=(_0xea551d,_0x3b7e62)=>{_0x3b7e62&&_0xea551d['tags']['has'](..._0x19f74b)&&_0x35027f['push'](_0xea551d);for(let _0x130966=-0x1*0x1225+-0x1430+0xcc7*0x3;_0x130966<_0xea551d['_children']['length'];_0x130966++)_0x52dd13(_0xea551d['_children'][_0x130966],!(-0x2ac+0x85*-0x3e+0x37d*0xa));};return _0x52dd13(this,!(-0xb7d*0x1+0x3e*0x22+0x342)),_0x35027f;}['findByName'](_0x232e9a){return this['findOne']('name',_0x232e9a);}['findByPath'](_0x57d98c){const _0x1e2abb=Array['isArray'](_0x57d98c)?_0x57d98c:_0x57d98c['split']('/');let _0x4d1263=this;for(let _0xc49eb3=0x2*0x6fd+-0xb69*0x2+0x8*0x11b,_0x158f9b=_0x1e2abb['length'];_0xc49eb3<_0x158f9b;++_0xc49eb3)if(_0x4d1263=_0x4d1263['children']['find'](_0x2ba8f6=>_0x2ba8f6['name']===_0x1e2abb[_0xc49eb3]),!_0x4d1263)return null;return _0x4d1263;}['forEach'](_0x5d25ae,_0xd33efb){_0x5d25ae['call'](_0xd33efb,this);const _0x29d2a1=this['_children'],_0x1dd82b=_0x29d2a1['length'];for(let _0x354689=0x89d+-0x263d+0x1da0;_0x354689<_0x1dd82b;++_0x354689)_0x29d2a1[_0x354689]['forEach'](_0x5d25ae,_0xd33efb);}['isDescenda'+'ntOf'](_0x10f859){let _0x1d1e3e=this['_parent'];for(;_0x1d1e3e;){if(_0x1d1e3e===_0x10f859)return!(-0x1*-0x1583+0x1591*0x1+-0x2b14);_0x1d1e3e=_0x1d1e3e['_parent'];}return!(0x3db*-0xa+0x6*0x4e+0x24bb);}['isAncestor'+'Of'](_0x9b9fc9){return _0x9b9fc9['isDescenda'+'ntOf'](this);}['getEulerAn'+'gles'](){return this['getWorldTr'+'ansform']()['getEulerAn'+'gles'](this['eulerAngle'+'s']),this['eulerAngle'+'s'];}['getLocalEu'+'lerAngles'](){return this['localRotat'+'ion']['getEulerAn'+'gles'](this['localEuler'+'Angles']),this['localEuler'+'Angles'];}['getLocalPo'+'sition'](){return this['localPosit'+'ion'];}['getLocalRo'+'tation'](){return this['localRotat'+'ion'];}['getLocalSc'+'ale'](){return this['localScale'];}['getLocalTr'+'ansform'](){return this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(-0x13fb+0x9d*0x31+-0x3*0x35b)),this['localTrans'+'form'];}['getPositio'+'n'](){return this['getWorldTr'+'ansform']()['getTransla'+'tion'](this['position']),this['position'];}['getRotatio'+'n'](){return this['rotation']['setFromMat'+'4'](this['getWorldTr'+'ansform']()),this['rotation'];}['getScale'](){return this['_scale']||(this['_scale']=new D()),this['getWorldTr'+'ansform']()['getScale'](this['_scale']);}['getWorldTr'+'ansform'](){return!this['_dirtyLoca'+'l']&&!this['_dirtyWorl'+'d']?this['worldTrans'+'form']:(this['_parent']&&this['_parent']['getWorldTr'+'ansform'](),this['_sync'](),this['worldTrans'+'form']);}get['worldScale'+'Sign'](){return this['_worldScal'+'eSign']===0x1c2b+-0xb3*-0x19+-0x2da6*0x1&&(this['_worldScal'+'eSign']=this['getWorldTr'+'ansform']()['scaleSign']),this['_worldScal'+'eSign'];}['remove'](){var _0x3d89e6;(_0x3d89e6=this['_parent'])==null||_0x3d89e6['removeChil'+'d'](this);}['reparent'](_0x5c209f,_0x3c2c33){this['remove'](),_0x5c209f&&(_0x3c2c33>=-0x6e7+-0x1320+0x1a07?_0x5c209f['insertChil'+'d'](this,_0x3c2c33):_0x5c209f['addChild'](this));}['setLocalEu'+'lerAngles'](_0x23fc1f,_0xf73137,_0x5c0d6f){this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x23fc1f,_0xf73137,_0x5c0d6f),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalPo'+'sition'](_0x30939b,_0x630aff,_0x325a71){_0x30939b instanceof D?this['localPosit'+'ion']['copy'](_0x30939b):this['localPosit'+'ion']['set'](_0x30939b,_0x630aff,_0x325a71),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalRo'+'tation'](_0x207ef7,_0x173a90,_0x49cfc2,_0x547453){_0x207ef7 instanceof le?this['localRotat'+'ion']['copy'](_0x207ef7):this['localRotat'+'ion']['set'](_0x207ef7,_0x173a90,_0x49cfc2,_0x547453),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalSc'+'ale'](_0x10ea95,_0x31caf0,_0x5823cf){_0x10ea95 instanceof D?this['localScale']['copy'](_0x10ea95):this['localScale']['set'](_0x10ea95,_0x31caf0,_0x5823cf),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_dirtifyLo'+'cal'](){this['_dirtyLoca'+'l']||(this['_dirtyLoca'+'l']=!(-0xe7c+0x7d2+0x6aa),this['_dirtyWorl'+'d']||this['_dirtifyWo'+'rld']());}['_unfreezeP'+'arentToRoo'+'t'](){let _0x4e5599=this['_parent'];for(;_0x4e5599;)_0x4e5599['_frozen']=!(0x24df+0x3*-0x55d+-0x14c7),_0x4e5599=_0x4e5599['_parent'];}['_dirtifyWo'+'rld'](){this['_dirtyWorl'+'d']||this['_unfreezeP'+'arentToRoo'+'t'](),this['_dirtifyWo'+'rldInterna'+'l']();}['_dirtifyWo'+'rldInterna'+'l'](){if(!this['_dirtyWorl'+'d']){this['_frozen']=!(-0x122d+0x368*-0x2+0xc7f*0x2),this['_dirtyWorl'+'d']=!(0x4cf*0x1+0x2271+-0x2740);for(let _0x36317d=-0x1f9f+0x881*0x1+0x16*0x10d;_0x36317d<this['_children']['length'];_0x36317d++)this['_children'][_0x36317d]['_dirtyWorl'+'d']||this['_children'][_0x36317d]['_dirtifyWo'+'rldInterna'+'l']();}this['_dirtyNorm'+'al']=!(0x221+0x2370+-0x2591),this['_worldScal'+'eSign']=0x1*-0x17c6+-0xb30+-0x117b*-0x2,this['_aabbVer']++;}['setPositio'+'n'](_0x2d52d7,_0x49a16c,_0x3a6c6a){_0x2d52d7 instanceof D?rs['copy'](_0x2d52d7):rs['set'](_0x2d52d7,_0x49a16c,_0x3a6c6a),this['_parent']===null?this['localPosit'+'ion']['copy'](rs):(Zn['copy'](this['_parent']['getWorldTr'+'ansform']())['invert'](),Zn['transformP'+'oint'](rs,this['localPosit'+'ion'])),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setRotatio'+'n'](_0x48d7af,_0x505c34,_0x5b55a5,_0x47fea3){if(_0x48d7af instanceof le?as['copy'](_0x48d7af):as['set'](_0x48d7af,_0x505c34,_0x5b55a5,_0x47fea3),this['_parent']===null)this['localRotat'+'ion']['copy'](as);else{const _0x1b9ec7=this['_parent']['getRotatio'+'n']();Aa['copy'](_0x1b9ec7)['invert'](),this['localRotat'+'ion']['copy'](Aa)['mul'](as);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setPositio'+'nAndRotati'+'on'](_0x4466d7,_0x3108d7){if(this['_parent']===null)this['localPosit'+'ion']['copy'](_0x4466d7),this['localRotat'+'ion']['copy'](_0x3108d7);else{const _0x5cc0b0=this['_parent']['getWorldTr'+'ansform']();Zn['copy'](_0x5cc0b0)['invert'](),Zn['transformP'+'oint'](_0x4466d7,this['localPosit'+'ion']),this['localRotat'+'ion']['setFromMat'+'4'](Zn)['mul'](_0x3108d7);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setEulerAn'+'gles'](_0xf13aca,_0x2a9db0,_0x291049){if(this['localRotat'+'ion']['setFromEul'+'erAngles'](_0xf13aca,_0x2a9db0,_0x291049),this['_parent']!==null){const _0x4d23d0=this['_parent']['getRotatio'+'n']();Aa['copy'](_0x4d23d0)['invert'](),this['localRotat'+'ion']['mul2'](Aa,this['localRotat'+'ion']);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['addChild'](_0x2532c6){this['_prepareIn'+'sertChild'](_0x2532c6),this['_children']['push'](_0x2532c6),this['_onInsertC'+'hild'](_0x2532c6);}['addChildAn'+'dSaveTrans'+'form'](_0x4256f6){const _0x409ba4=_0x4256f6['getPositio'+'n'](),_0x134e29=_0x4256f6['getRotatio'+'n']();this['_prepareIn'+'sertChild'](_0x4256f6),_0x4256f6['setPositio'+'n'](kw['copy'](this['worldTrans'+'form'])['invert']()['transformP'+'oint'](_0x409ba4)),_0x4256f6['setRotatio'+'n'](Uw['copy'](this['getRotatio'+'n']())['invert']()['mul'](_0x134e29)),this['_children']['push'](_0x4256f6),this['_onInsertC'+'hild'](_0x4256f6);}['insertChil'+'d'](_0x12d821,_0x1baef9){this['_prepareIn'+'sertChild'](_0x12d821),this['_children']['splice'](_0x1baef9,0x21df+0x10f*-0x1f+-0x10e,_0x12d821),this['_onInsertC'+'hild'](_0x12d821);}['_prepareIn'+'sertChild'](_0x3176f8){_0x3176f8['remove'](),w['assert'](_0x3176f8!==this,'GraphNode\x20'+(_0x3176f8==null?void(0x2*0x9ee+-0x47b+-0xf61):_0x3176f8['name'])+('\x20cannot\x20be'+'\x20a\x20child\x20o'+'f\x20itself')),w['assert'](!this['isDescenda'+'ntOf'](_0x3176f8),'GraphNode\x20'+(_0x3176f8==null?void(-0x22*-0x9d+-0x1ef7*-0x1+-0x1*0x33d1):_0x3176f8['name'])+('\x20cannot\x20ad'+'d\x20an\x20ances'+'tor\x20as\x20a\x20c'+'hild'));}['_fireOnHie'+'rarchy'](_0x34b93e,_0x55861d,_0x248fa5){this['fire'](_0x34b93e,_0x248fa5);for(let _0x266e2a=-0x1234+0x1a*-0x61+0x1c0e;_0x266e2a<this['_children']['length'];_0x266e2a++)this['_children'][_0x266e2a]['_fireOnHie'+'rarchy'](_0x55861d,_0x55861d,_0x248fa5);}['_onInsertC'+'hild'](_0x148f08){_0x148f08['_parent']=this;const _0x4bc4da=_0x148f08['_enabled']&&this['enabled'];_0x148f08['_enabledIn'+'Hierarchy']!==_0x4bc4da&&(_0x148f08['_enabledIn'+'Hierarchy']=_0x4bc4da,_0x148f08['_notifyHie'+'rarchyStat'+'eChanged'](_0x148f08,_0x4bc4da)),_0x148f08['_updateGra'+'phDepth'](),_0x148f08['_dirtifyWo'+'rld'](),this['_frozen']&&_0x148f08['_unfreezeP'+'arentToRoo'+'t'](),_0x148f08['_fireOnHie'+'rarchy']('insert','inserthier'+'archy',this),this['fire']&&this['fire']('childinser'+'t',_0x148f08);}['_updateGra'+'phDepth'](){this['_graphDept'+'h']=this['_parent']?this['_parent']['_graphDept'+'h']+(-0x3cd+-0x6b*-0x5+0x1b7):0x6*-0x399+0x2*-0xdbd+-0x5*-0x9d0;for(let _0x5721c8=-0x17a2+-0x26c9+0x3e6b,_0x3e47e3=this['_children']['length'];_0x5721c8<_0x3e47e3;_0x5721c8++)this['_children'][_0x5721c8]['_updateGra'+'phDepth']();}['removeChil'+'d'](_0x4f2163){const _0x798834=this['_children']['indexOf'](_0x4f2163);_0x798834!==-(-0x10a5+-0x1085+0x1*0x212b)&&(this['_children']['splice'](_0x798834,0x879+-0xd20+-0x8*-0x95),_0x4f2163['_parent']=null,_0x4f2163['_fireOnHie'+'rarchy']('remove','removehier'+'archy',this),this['fire']('childremov'+'e',_0x4f2163));}['_sync'](){if(this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(-0x1f5a*0x1+0xe92*-0x1+0x2ded)),this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['scaleCompe'+'nsation']){let _0x38ca03;const _0x46937f=this['_parent'];let _0x334003=this['localScale'],_0x3253f7=_0x46937f;if(_0x3253f7){for(;_0x3253f7&&_0x3253f7['scaleCompe'+'nsation'];)_0x3253f7=_0x3253f7['_parent'];_0x3253f7&&(_0x3253f7=_0x3253f7['_parent'],_0x3253f7&&(_0x38ca03=_0x3253f7['worldTrans'+'form']['getScale'](),qm['mul2'](_0x38ca03,this['localScale']),_0x334003=qm));}Td['setFromMat'+'4'](_0x46937f['worldTrans'+'form']),Xm['mul2'](Td,this['localRotat'+'ion']);let _0x492b7c=_0x46937f['worldTrans'+'form'];_0x46937f['scaleCompe'+'nsation']&&(jm['mul2'](_0x38ca03,_0x46937f['getLocalSc'+'ale']()),$m['setTRS'](_0x46937f['worldTrans'+'form']['getTransla'+'tion'](xd),Td,jm),_0x492b7c=$m),_0x492b7c['transformP'+'oint'](this['localPosit'+'ion'],xd),this['worldTrans'+'form']['setTRS'](xd,Xm,_0x334003);}else this['worldTrans'+'form']['mulAffine2'](this['_parent']['worldTrans'+'form'],this['localTrans'+'form']);}this['_dirtyWorl'+'d']=!(0x24bc+0x1be2+-0x409d);}}['syncHierar'+'chy'](){if(!this['_enabled']||this['_frozen'])return;this['_frozen']=!(0x29*-0x6d+0xa8e+0x6e7),(this['_dirtyLoca'+'l']||this['_dirtyWorl'+'d'])&&this['_sync']();const _0x5d9a29=this['_children'];for(let _0xa9643d=0xfba+0x19f9*-0x1+-0x1*-0xa3f,_0xe89d77=_0x5d9a29['length'];_0xa9643d<_0xe89d77;_0xa9643d++)_0x5d9a29[_0xa9643d]['syncHierar'+'chy']();}['lookAt'](_0x20f09e,_0x3d52d3,_0x4a705f,_0x143903=-0x41c*-0x6+-0x14f7+-0x3b1,_0x345958=0x321*0x6+0x1*-0xef2+-0x3d3,_0x1baa3e=0x248a+0x1cc4+-0x283*0x1a){if(_0x20f09e instanceof D)wd['copy'](_0x20f09e),_0x3d52d3 instanceof D?Vl['copy'](_0x3d52d3):Vl['copy'](D['UP']);else{if(_0x4a705f===void(-0x722*-0x2+-0x1cad+0xe69))return;wd['set'](_0x20f09e,_0x3d52d3,_0x4a705f),Vl['set'](_0x143903,_0x345958,_0x1baa3e);}Ym['setLookAt'](this['getPositio'+'n'](),wd,Vl),as['setFromMat'+'4'](Ym),this['setRotatio'+'n'](as);}['translate'](_0x420f5c,_0xbc786,_0x40f01){_0x420f5c instanceof D?rs['copy'](_0x420f5c):rs['set'](_0x420f5c,_0xbc786,_0x40f01),rs['add'](this['getPositio'+'n']()),this['setPositio'+'n'](rs);}['translateL'+'ocal'](_0x1d16c7,_0x33b83d,_0x22dcb9){_0x1d16c7 instanceof D?rs['copy'](_0x1d16c7):rs['set'](_0x1d16c7,_0x33b83d,_0x22dcb9),this['localRotat'+'ion']['transformV'+'ector'](rs,rs),this['localPosit'+'ion']['add'](rs),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotate'](_0x25daea,_0x469030,_0x211689){if(as['setFromEul'+'erAngles'](_0x25daea,_0x469030,_0x211689),this['_parent']===null)this['localRotat'+'ion']['mul2'](as,this['localRotat'+'ion']);else{const _0x50ae03=this['getRotatio'+'n'](),_0x417858=this['_parent']['getRotatio'+'n']();Aa['copy'](_0x417858)['invert'](),as['mul2'](Aa,as),this['localRotat'+'ion']['mul2'](as,_0x50ae03);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotateLoca'+'l'](_0xedaf1e,_0x43fc84,_0x41bf15){as['setFromEul'+'erAngles'](_0xedaf1e,_0x43fc84,_0x41bf15),this['localRotat'+'ion']['mul'](as),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}}const ky=new Kt();function $n(_0x5dfa65){const _0x126595=ky['get'](_0x5dfa65);return w['assert'](_0x126595),_0x126595;}function Bw(_0x1e55ca,_0x431767){w['assert'](_0x431767),ky['get'](_0x1e55ca,()=>_0x431767);}class zw{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach']((_0xa0b928,_0x19be7e)=>{_0x19be7e['destroy']();}),this['cache']['clear']();}['incRef'](_0x2a43a1){const _0x29810e=(this['cache']['get'](_0x2a43a1)||0x1ffe+-0x71+-0x1*0x1f8d)+(-0x6c1+-0x1f67+0x2629);this['cache']['set'](_0x2a43a1,_0x29810e);}['decRef'](_0x1c0d69){if(_0x1c0d69){let _0x433bcd=this['cache']['get'](_0x1c0d69);_0x433bcd&&(_0x433bcd--,_0x433bcd===0x23f9+-0x1adf+-0x91a?(this['cache']['delete'](_0x1c0d69),_0x1c0d69['destroy']()):this['cache']['set'](_0x1c0d69,_0x433bcd));}}}class Bi{static['incRef'](_0x54adcb){this['cache']['incRef'](_0x54adcb);}static['decRef'](_0x361ede){this['cache']['decRef'](_0x361ede);}static['destroy'](){this['cache']['destroy']();}}h(Bi,'cache',new zw());let Vw=-0x141*0x1+-0x3cb+0x50c;const Gw=new De(),Gl=new De(),Ed=new Mu(),bd=new Set(),Mr=new Uint32Array(-0x1f00+-0x224e+-0x6*-0xae3);class Hw{constructor(_0x2082b1){h(this,'vertexBuff'+'er',null),h(this,'_destroyVe'+'rtexBuffer',!(-0x7cf*0x2+0x10d1+0x132*-0x1)),this['count']=_0x2082b1;}['destroy'](){var _0x595032;this['_destroyVe'+'rtexBuffer']&&((_0x595032=this['vertexBuff'+'er'])==null||_0x595032['destroy']()),this['vertexBuff'+'er']=null;}}class Ww{constructor(){h(this,'map',new Map()),h(this,'meshMetaDa'+'ta',new Int32Array(-0x1e23+-0xb37+0x423*0xa));}['get'](_0x13f58c){return this['map']['get'](_0x13f58c)??this['map']['get'](null);}}class $w{constructor(){h(this,'shader'),h(this,'bindGroup',null),h(this,'uniformBuf'+'fer',null),h(this,'hashes');}['getBindGro'+'up'](_0x548d3d){if(!this['bindGroup']){const _0x50a72a=this['shader'];w['assert'](_0x50a72a);const _0x2989a4=_0x50a72a['meshBindGr'+'oupFormat'];w['assert'](_0x2989a4),this['bindGroup']=new dp(_0x548d3d,_0x2989a4),ya['setName'](this['bindGroup'],'MeshBindGr'+'oup_'+this['bindGroup']['id']);}return this['bindGroup'];}['getUniform'+'Buffer'](_0x3da223){if(!this['uniformBuf'+'fer']){const _0x4e6800=this['shader'];w['assert'](_0x4e6800);const _0x3fe6c6=_0x4e6800['meshUnifor'+'mBufferFor'+'mat'];w['assert'](_0x3fe6c6),this['uniformBuf'+'fer']=new up(_0x3da223,_0x3fe6c6,!(-0x743*0x1+0x157*0x19+-0x1a3b));}return this['uniformBuf'+'fer'];}['destroy'](){var _0x372873,_0x3ebb6d;(_0x372873=this['bindGroup'])==null||_0x372873['destroy'](),this['bindGroup']=null,(_0x3ebb6d=this['uniformBuf'+'fer'])==null||_0x3ebb6d['destroy'](),this['uniformBuf'+'fer']=null;}}const Yr=class Yr{constructor(_0x2aa3a9,_0x3b1ff0,_0x37fb6f=null){h(this,'castShadow',!(-0x319*0xb+-0x1*-0x1791+0xa83)),h(this,'shadowCasc'+'adeMask',iw),h(this,'cull',!(-0x169e+-0x2121+0x37bf)),h(this,'drawOrder',-0x220+0x4b3+-0x293*0x1),h(this,'_drawBucke'+'t',0x3*0xaad+-0x583*-0x1+-0x1d*0x147),h(this,'node'),h(this,'visible',!(-0x9*0x3e1+-0x2*-0x2ab+0x43*0x71)),h(this,'visibleThi'+'sFrame',!(-0x605+-0xf3a+-0x1*-0x1540)),h(this,'flipFacesF'+'actor',0x2d6*0x9+-0x23ce+0xa49),h(this,'gsplatInst'+'ance',null),h(this,'id',Vw++),h(this,'isVisibleF'+'unc',null),h(this,'instancing'+'Data',null),h(this,'indirectDa'+'ta',null),h(this,'parameters',{}),h(this,'pick',!(-0x1f7e+-0x2*0x8a9+0x11c*0x2c)),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'transparen'+'t',!(0x1694+0x23*0xa2+0x6b*-0x6b)),h(this,'_aabb',new De()),h(this,'_aabbVer',-(0xeef+-0x3e2+-0xb0c)),h(this,'_aabbMeshV'+'er',-(0xe92+0x17*0x71+0xe*-0x1c4)),h(this,'_customAab'+'b',null),h(this,'_updateAab'+'b',!(0x1276+0x1*0x2447+-0x36bd)),h(this,'_updateAab'+'bFunc',null),h(this,'_sortKeySh'+'adow',0x2*-0x583+0x4*0x355+0x5*-0x76),h(this,'_sortKeyFo'+'rward',0x4e4*-0x2+0x156f+-0xba7*0x1),h(this,'_sortKeyDy'+'namic',0x6*0x37d+0x1*0x10a5+-0x2593),h(this,'_layer',py),h(this,'_material',null),h(this,'_skinInsta'+'nce',null),h(this,'_morphInst'+'ance',null),h(this,'_receiveSh'+'adow',!(0x1*0xa49+0x15a2+-0x1feb)),h(this,'_renderSty'+'le',nn),h(this,'_screenSpa'+'ce',!(0x7*0x32c+-0x1615+0x1*-0x1e)),h(this,'_shaderCac'+'he',new Map()),h(this,'_shaderDef'+'s',Ss<<0x61d*0x2+0x10d*0xe+-0x1ae0),h(this,'_calculate'+'SortDistan'+'ce',null);if(w['assert'](!(_0x2aa3a9 instanceof Ie),'Incorrect\x20'+'parameters'+'\x20for\x20MeshI'+'nstance\x27s\x20'+'constructo'+'r.\x20Use\x20new'+'\x20MeshInsta'+'nce(mesh,\x20'+'material,\x20'+'node)'),this['node']=_0x37fb6f,this['_mesh']=_0x2aa3a9,_0x2aa3a9['incRefCoun'+'t'](),this['material']=_0x3b1ff0,_0x2aa3a9['vertexBuff'+'er']){const _0x259a93=_0x2aa3a9['vertexBuff'+'er']['format'];this['_shaderDef'+'s']|=_0x259a93['hasUv0']?Rp:0x17ed+0x133*0x1e+-0x3be7,this['_shaderDef'+'s']|=_0x259a93['hasUv1']?My:0xf*0x139+-0x1148+-0x10f*0x1,this['_shaderDef'+'s']|=_0x259a93['hasColor']?Dy:-0x5*-0x77f+-0x20c6+-0x4b5,this['_shaderDef'+'s']|=_0x259a93['hasTangent'+'s']?Op:0x2286+-0x1*-0x2241+-0x1*0x44c7;}this['updateKey']();}set['drawBucket'](_0x58bc5c){this['_drawBucke'+'t']=Math['floor'](_0x58bc5c)&0x89e*0x3+0x1899+0x3*-0x107c,this['updateKey']();}get['drawBucket'](){return this['_drawBucke'+'t'];}set['renderStyl'+'e'](_0x3b992f){this['_renderSty'+'le']=_0x3b992f,this['mesh']['prepareRen'+'derState'](_0x3b992f);}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['mesh'](_0x568a83){_0x568a83!==this['_mesh']&&(this['_mesh']&&this['_mesh']['decRefCoun'+'t'](),this['_mesh']=_0x568a83,_0x568a83&&_0x568a83['incRefCoun'+'t']());}get['mesh'](){return this['_mesh'];}set['aabb'](_0x4eda45){this['_aabb']=_0x4eda45;}get['aabb'](){if(!this['_updateAab'+'b'])return this['_aabb'];if(this['_updateAab'+'bFunc'])return this['_updateAab'+'bFunc'](this['_aabb']);let _0x3cdcb8=this['_customAab'+'b'],_0x513ded=!!_0x3cdcb8;if(!_0x3cdcb8){if(_0x3cdcb8=Gw,this['skinInstan'+'ce']){if(!this['mesh']['boneAabb']){const _0x46d7c7=this['_morphInst'+'ance']?this['_morphInst'+'ance']['morph']['_targets']:null;this['mesh']['_initBoneA'+'abbs'](_0x46d7c7);}const _0x401808=this['mesh']['boneUsed'];let _0xef4529=!(0x10b+0x26b1+-0x27bc);for(let _0x401747=0x1675+-0x3*0x701+-0x172;_0x401747<this['mesh']['boneAabb']['length'];_0x401747++)_0x401808[_0x401747]&&(Gl['setFromTra'+'nsformedAa'+'bb'](this['mesh']['boneAabb'][_0x401747],this['skinInstan'+'ce']['matrices'][_0x401747]),_0xef4529?(_0xef4529=!(-0x44f*-0x2+0x2*-0x1227+0x1*0x1bb1),_0x3cdcb8['center']['copy'](Gl['center']),_0x3cdcb8['halfExtent'+'s']['copy'](Gl['halfExtent'+'s'])):_0x3cdcb8['add'](Gl));_0x513ded=!(0x857+-0x1a8f+0x1238);}else{if(this['node']['_aabbVer']!==this['_aabbVer']||this['mesh']['_aabbVer']!==this['_aabbMeshV'+'er']){if(this['mesh']?(_0x3cdcb8['center']['copy'](this['mesh']['aabb']['center']),_0x3cdcb8['halfExtent'+'s']['copy'](this['mesh']['aabb']['halfExtent'+'s'])):(_0x3cdcb8['center']['set'](0x30f*0x9+-0x3b*0x53+-0x866,0x1062+-0x13fc+0x39a,-0x14e2+-0x16a3+-0x2b85*-0x1),_0x3cdcb8['halfExtent'+'s']['set'](0xf01*0x1+0x4*-0xd6+-0xba9,-0x1be1+-0x15cc+0x31ad,0x2397+0x349*0x2+-0x2a29*0x1)),this['mesh']&&this['mesh']['morph']){const _0x1ebde6=this['mesh']['morph']['aabb'];_0x3cdcb8['_expand'](_0x1ebde6['getMin'](),_0x1ebde6['getMax']());}_0x513ded=!(-0x2234+0xa86+-0x17ae*-0x1),this['_aabbVer']=this['node']['_aabbVer'],this['_aabbMeshV'+'er']=this['mesh']['_aabbVer'];}}}return _0x513ded&&this['_aabb']['setFromTra'+'nsformedAa'+'bb'](_0x3cdcb8,this['node']['getWorldTr'+'ansform']()),this['_aabb'];}['clearShade'+'rs'](){this['_shaderCac'+'he']['forEach'](_0x571f05=>{_0x571f05['destroy']();}),this['_shaderCac'+'he']['clear']();}['getShaderI'+'nstance'](_0x18aba9,_0x3cee11,_0x49e0f0,_0x2f992c,_0x1a2eae,_0x19cc38,_0x591085){var _0x19e355;const _0x48e005=this['_shaderDef'+'s'];Mr[-0x2674+0x6e9*-0x1+-0xf1f*-0x3]=_0x18aba9,Mr[0x1*0x16b1+-0x1049+-0x667]=_0x3cee11,Mr[0xda5*0x2+-0x1*0x2491+0x1*0x949]=_0x48e005,Mr[0x1d*0x63+-0x1932*-0x1+0x2466*-0x1]=_0x2f992c['hash'];const _0x2f0087=iy(Mr);let _0x38d50b=this['_shaderCac'+'he']['get'](_0x2f0087);if(!_0x38d50b){const _0x2623a3=this['_material'];if(_0x38d50b=new $w(),_0x38d50b['shader']=_0x2623a3['variants']['get'](_0x2f0087),_0x38d50b['hashes']=new Uint32Array(Mr),!_0x38d50b['shader']){Q['pushGpuMar'+'ker'](this['mesh']['device'],'Node:\x20'+this['node']['name']);const _0x316859=_0x2623a3['getShaderV'+'ariant']({'device':this['mesh']['device'],'scene':_0x49e0f0,'objDefs':_0x48e005,'cameraShaderParams':_0x2f992c,'pass':_0x18aba9,'sortedLights':_0x591085,'viewUniformFormat':_0x1a2eae,'viewBindGroupFormat':_0x19cc38,'vertexFormat':(_0x19e355=this['mesh']['vertexBuff'+'er'])==null?void(0x7a4+-0xdd3+0x62f):_0x19e355['format']});Q['popGpuMark'+'er'](this['mesh']['device']),_0x2623a3['variants']['set'](_0x2f0087,_0x316859),_0x38d50b['shader']=_0x316859;}this['_shaderCac'+'he']['set'](_0x2f0087,_0x38d50b);}return w['call'](()=>{Yx['equals'](_0x38d50b['hashes'],Mr)||w['errorOnce']('Hash\x20colli'+'sion\x20in\x20th'+'e\x20shader\x20c'+'ache\x20for\x20m'+'esh\x20instan'+'ce.\x20This\x20i'+'s\x20very\x20unl'+'ikely\x20but\x20'+'still\x20poss'+'ible.\x20Plea'+'se\x20report\x20'+'this\x20issue'+'.');}),_0x38d50b;}set['material'](_0x13e9a3){this['clearShade'+'rs']();const _0x46a6e8=this['_material'];_0x46a6e8&&_0x46a6e8['removeMesh'+'InstanceRe'+'f'](this),this['_material']=_0x13e9a3,_0x13e9a3&&(_0x13e9a3['addMeshIns'+'tanceRef'](this),this['transparen'+'t']=_0x13e9a3['transparen'+'t'],this['updateKey']());}get['material'](){return this['_material'];}['_updateSha'+'derDefs'](_0x567d2d){_0x567d2d!==this['_shaderDef'+'s']&&(this['_shaderDef'+'s']=_0x567d2d,this['clearShade'+'rs']());}set['calculateS'+'ortDistanc'+'e'](_0x326e1c){this['_calculate'+'SortDistan'+'ce']=_0x326e1c;}get['calculateS'+'ortDistanc'+'e'](){return this['_calculate'+'SortDistan'+'ce'];}set['receiveSha'+'dow'](_0x436276){this['_receiveSh'+'adow']!==_0x436276&&(this['_receiveSh'+'adow']=_0x436276,this['_updateSha'+'derDefs'](_0x436276?this['_shaderDef'+'s']&~th:this['_shaderDef'+'s']|th));}get['receiveSha'+'dow'](){return this['_receiveSh'+'adow'];}set['batching'](_0x83ef24){this['_updateSha'+'derDefs'](_0x83ef24?this['_shaderDef'+'s']|bc:this['_shaderDef'+'s']&~bc);}get['batching'](){return(this['_shaderDef'+'s']&bc)!==0x1261*-0x1+-0x11d3+0x2434;}set['skinInstan'+'ce'](_0x3357f6){this['_skinInsta'+'nce']=_0x3357f6,this['_updateSha'+'derDefs'](_0x3357f6?this['_shaderDef'+'s']|qo:this['_shaderDef'+'s']&~qo),this['_setupSkin'+'Update']();}get['skinInstan'+'ce'](){return this['_skinInsta'+'nce'];}set['morphInsta'+'nce'](_0x35597e){var _0x493b93;(_0x493b93=this['_morphInst'+'ance'])==null||_0x493b93['destroy'](),this['_morphInst'+'ance']=_0x35597e;let _0x4a8007=this['_shaderDef'+'s'];_0x4a8007=_0x35597e&&_0x35597e['morph']['morphPosit'+'ions']?_0x4a8007|Yo:_0x4a8007&~Yo,_0x4a8007=_0x35597e&&_0x35597e['morph']['morphNorma'+'ls']?_0x4a8007|Ko:_0x4a8007&~Ko,_0x4a8007=_0x35597e&&_0x35597e['morph']['intRenderF'+'ormat']?_0x4a8007|Zo:_0x4a8007&~Zo,this['_updateSha'+'derDefs'](_0x4a8007);}get['morphInsta'+'nce'](){return this['_morphInst'+'ance'];}set['screenSpac'+'e'](_0x209873){this['_screenSpa'+'ce']!==_0x209873&&(this['_screenSpa'+'ce']=_0x209873,this['_updateSha'+'derDefs'](_0x209873?this['_shaderDef'+'s']|sh:this['_shaderDef'+'s']&~sh));}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['key'](_0x4629fa){this['_sortKeyFo'+'rward']=_0x4629fa;}get['key'](){return this['_sortKeyFo'+'rward'];}set['mask'](_0x2444a5){const _0x4d9d11=this['_shaderDef'+'s']&-0x66d2+0xd80f+0x8ec2;this['_updateSha'+'derDefs'](_0x4d9d11|_0x2444a5<<0x64+0x116*-0xd+0xdca);}get['mask'](){return this['_shaderDef'+'s']>>0x1370+-0x1c34+0x8d4;}set['instancing'+'Count'](_0x35c153){this['instancing'+'Data']&&(this['instancing'+'Data']['count']=_0x35c153);}get['instancing'+'Count'](){return this['instancing'+'Data']?this['instancing'+'Data']['count']:0x18*-0x20+0x219+0xe7*0x1;}['destroy'](){var _0x3cd6b3,_0x58e6ce,_0x5194f9;const _0x37b25e=this['mesh'];_0x37b25e&&(this['mesh']=null,_0x37b25e['refCount']<0x20ce+-0x21c7+-0x5*-0x32&&_0x37b25e['destroy']()),this['setRealtim'+'eLightmap'](Yr['lightmapPa'+'ramNames'][0x4*-0x2dd+0x10bb+-0x547],null),this['setRealtim'+'eLightmap'](Yr['lightmapPa'+'ramNames'][-0x1*-0x36e+0x15cf+0x64f*-0x4],null),(_0x3cd6b3=this['_skinInsta'+'nce'])==null||_0x3cd6b3['destroy'](),this['_skinInsta'+'nce']=null,(_0x58e6ce=this['morphInsta'+'nce'])==null||_0x58e6ce['destroy'](),this['morphInsta'+'nce']=null,this['clearShade'+'rs'](),this['material']=null,(_0x5194f9=this['instancing'+'Data'])==null||_0x5194f9['destroy']();}static['_prepareRe'+'nderStyleF'+'orArray'](_0x419ed0,_0x4ec960){if(_0x419ed0){for(let _0x48b549=0x15e4+-0xe0b+0x7*-0x11f;_0x48b549<_0x419ed0['length'];_0x48b549++){_0x419ed0[_0x48b549]['_renderSty'+'le']=_0x4ec960;const _0x1d9b8b=_0x419ed0[_0x48b549]['mesh'];bd['has'](_0x1d9b8b)||(bd['add'](_0x1d9b8b),_0x1d9b8b['prepareRen'+'derState'](_0x4ec960));}bd['clear']();}}['_isVisible'](_0x3c11ae){return this['visible']?this['isVisibleF'+'unc']?this['isVisibleF'+'unc'](_0x3c11ae):(Ed['center']=this['aabb']['center'],Ed['radius']=this['_aabb']['halfExtent'+'s']['length'](),_0x3c11ae['frustum']['containsSp'+'here'](Ed)>-0x10ed+-0x1222+0x230f):!(0x2212+0x1355+-0x3566);}['updateKey'](){const {material:_0x50d286}=this;this['_sortKeyFo'+'rward']=this['_drawBucke'+'t']<<0x1b0*-0x12+0x431*-0x4+0x6b*0x71|(_0x50d286['alphaToCov'+'erage']||_0x50d286['alphaTest']?0x3*-0x141c65+-0x1*0xbd98e+0x882ebd:0x3*0xd01+-0x9*-0x30+0x97*-0x45)|_0x50d286['id']&0x22*-0x3155f+0x3b5*-0x156a+-0x1*-0xf8388f;}['setInstanc'+'ing'](_0x2fb100,_0x3bbc7e=!(0x7e7*-0x2+-0x653+0x2*0xb11)){_0x2fb100?(this['instancing'+'Data']=new Hw(_0x2fb100['numVertice'+'s']),this['instancing'+'Data']['vertexBuff'+'er']=_0x2fb100,_0x2fb100['format']['instancing']=!(-0x1c46+-0x6a*0x1e+0x1459*0x2),this['cull']=_0x3bbc7e):(this['instancing'+'Data']=null,this['cull']=!(-0xac0+-0x584+0x1044)),this['_updateSha'+'derDefs'](_0x2fb100?this['_shaderDef'+'s']|jo:this['_shaderDef'+'s']&~jo);}['setIndirec'+'t'](_0x3cc13b,_0x5e881f){this['_allocIndi'+'rectData'](),this['indirectDa'+'ta']['map']['set']((_0x3cc13b==null?void(-0x22b2+0x19ad+-0x905*-0x1):_0x3cc13b['camera'])??null,_0x5e881f),this['mesh']['device']['mapsToClea'+'r']['add'](this['indirectDa'+'ta']['map']);}['getIndirec'+'tMetaData'](){var _0x5f1eab;this['_allocIndi'+'rectData']();const _0x192baf=(_0x5f1eab=this['mesh'])==null?void(0x171a+-0x22bb*-0x1+-0x39d5):_0x5f1eab['primitive'][this['renderStyl'+'e']],_0x57cad0=this['indirectDa'+'ta']['meshMetaDa'+'ta'];return _0x57cad0[0x39d*0x6+-0xbb1*0x3+0xd65]=_0x192baf['count'],_0x57cad0[0x454+-0xb*0x16e+0x15*0x8b]=_0x192baf['base'],_0x57cad0[-0x5d5+0x3a*0x4d+0xb9b*-0x1]=_0x192baf['baseVertex'],_0x57cad0;}['_allocIndi'+'rectData'](){this['indirectDa'+'ta']||(this['indirectDa'+'ta']=new Ww());}['ensureMate'+'rial'](_0x4ab12e){this['material']||(w['warn']('Mesh\x20attac'+'hed\x20to\x20ent'+'ity\x20\x27'+this['node']['name']+('\x27\x20does\x20not'+'\x20have\x20a\x20ma'+'terial,\x20us'+'ing\x20a\x20defa'+'ult\x20one.')),this['material']=$n(_0x4ab12e));}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['getParamet'+'er'](_0x1b2724){return this['parameters'][_0x1b2724];}['setParamet'+'er'](_0x57d651,_0x351a6e,_0x2ee02e=-0x9afc7b00+-0x15ad82277+0x2f5d49d76){const _0x4fdc48=this['parameters'][_0x57d651];_0x4fdc48?(_0x4fdc48['data']=_0x351a6e,_0x4fdc48['passFlags']=_0x2ee02e):this['parameters'][_0x57d651]={'scopeId':null,'data':_0x351a6e,'passFlags':_0x2ee02e};}['setRealtim'+'eLightmap'](_0x231c68,_0x1c2d07){const _0x4779d6=this['getParamet'+'er'](_0x231c68);_0x4779d6!==_0x1c2d07&&(_0x4779d6&&Bi['decRef'](_0x4779d6['data']),_0x1c2d07?(Bi['incRef'](_0x1c2d07),this['setParamet'+'er'](_0x231c68,_0x1c2d07)):this['deletePara'+'meter'](_0x231c68));}['deletePara'+'meter'](_0x1a812d){this['parameters'][_0x1a812d]&&delete this['parameters'][_0x1a812d];}['setParamet'+'ers'](_0x8f7c12,_0x28c8ba){const _0x3e3c01=this['parameters'];for(const _0x420e1d in _0x3e3c01){const _0x3ba0f2=_0x3e3c01[_0x420e1d];_0x3ba0f2['passFlags']&_0x28c8ba&&(_0x3ba0f2['scopeId']||(_0x3ba0f2['scopeId']=_0x8f7c12['scope']['resolve'](_0x420e1d)),_0x3ba0f2['scopeId']['setValue'](_0x3ba0f2['data']));}}['setLightma'+'pped'](_0x58c51e){_0x58c51e?this['mask']=(this['mask']|di)&-(0x17d1+-0x2da+0x1*-0x14f1):(this['setRealtim'+'eLightmap'](Yr['lightmapPa'+'ramNames'][0x18bb+-0x1b1*0xc+-0x46f],null),this['setRealtim'+'eLightmap'](Yr['lightmapPa'+'ramNames'][-0x1a71+0x251a+-0x1f*0x58],null),this['_shaderDef'+'s']&=-(-0x5a3+-0x1411+0x2a75),this['mask']=(this['mask']|Ss)&-(-0x6b5+0x1*0x1cbf+0x1*-0x1603));}['setCustomA'+'abb'](_0xdb5722){_0xdb5722?this['_customAab'+'b']?this['_customAab'+'b']['copy'](_0xdb5722):this['_customAab'+'b']=_0xdb5722['clone']():(this['_customAab'+'b']=null,this['_aabbVer']=-(-0x1488+-0x2706+0x3b8f)),this['_setupSkin'+'Update']();}['_setupSkin'+'Update'](){this['_skinInsta'+'nce']&&(this['_skinInsta'+'nce']['_updateBef'+'oreCull']=!this['_customAab'+'b']);}};h(Yr,'lightmapPa'+'ramNames',['texture_li'+'ghtMap','texture_di'+'rLightMap']);let He=Yr;const Xw=[0xa*0xb7+0x1219*-0x1+-0x1*-0xaf3,0x1fb1+-0x1*-0x17ec+-0xde7*0x4,-0xb04+-0x8f*0x1+0xb96,0x1288+0x690+-0x1916,0x1*-0x1da1+0x1dd5*0x1+-0x31,-0x6d*0x20+0xb83+0x21e],qw=[0x1edd+0x1*0x613+0x4*-0x93c,0x1*-0x1ca3+-0x1*-0x62e+0x1676,-0x84f*-0x2+-0xb9b+-0x28*0x20,0x230b+-0x22*-0xed+0x1*-0x4285,0xb8e+0x2621+-0x31ac,-0x1c5b+0x1f66*0x1+-0x309],Zm=new _i();function Qm(_0x593996,_0x1e307b){if(_0x593996&&!_0x1e307b||!_0x593996&&_0x1e307b)return!(0xfeb+-0x1*0x1e02+-0x386*-0x4);if(_0x593996=_0x593996['data'],_0x1e307b=_0x1e307b['data'],_0x593996===_0x1e307b)return!(-0x5*-0x403+0x2582+-0x3991*0x1);if(_0x593996 instanceof Float32Array&&_0x1e307b instanceof Float32Array){if(_0x593996['length']!==_0x1e307b['length'])return!(0x1*0x1211+0x1fbe+-0x22*0x177);for(let _0x2d9055=-0x1b3b*-0x1+-0x2*0xb71+-0x459;_0x2d9055<_0x593996['length'];_0x2d9055++)if(_0x593996[_0x2d9055]!==_0x1e307b[_0x2d9055])return!(-0xaf9*0x1+0xc4*-0x7+0x1056);return!(-0xec*-0x7+-0x2*-0xf47+-0x2502);}return!(0x12d8+-0x900+-0x1*0x9d7);}function jw(_0x10fb25,_0x51c324){for(const _0x4a59c3 in _0x10fb25)if(_0x10fb25['hasOwnProp'+'erty'](_0x4a59c3)&&!Qm(_0x10fb25[_0x4a59c3],_0x51c324[_0x4a59c3]))return!(0x290+-0x4*-0x2ee+-0xe47);for(const _0x324a5d in _0x51c324)if(_0x51c324['hasOwnProp'+'erty'](_0x324a5d)&&!Qm(_0x51c324[_0x324a5d],_0x10fb25[_0x324a5d]))return!(-0x6fc+-0x2694+0x2d91);return!(0x85+0xbf7+0x31f*-0x4);}function Ad(_0x3f6c4d){return _0x3f6c4d['node']['worldTrans'+'form']['scaleSign'];}class Yw{constructor(_0x33d908,_0x2bbd9e,_0x30626f){this['device']=_0x33d908,this['rootNode']=_0x2bbd9e,this['scene']=_0x30626f,this['_init']=!(0x131*-0xf+0x97c+0x864),this['_batchGrou'+'ps']={},this['_batchGrou'+'pCounter']=0x1e0c+-0x19ca+-0x442,this['_batchList']=[],this['_dirtyGrou'+'ps']=[],this['_stats']={'createTime':0x0,'updateLastFrameTime':0x0};}['destroy'](){this['device']=null,this['rootNode']=null,this['scene']=null,this['_batchGrou'+'ps']={},this['_batchList']=[],this['_dirtyGrou'+'ps']=[];}['addGroup'](_0x45e7d5,_0x17dce8,_0x2d8294,_0x14fb07,_0x96af00){if(_0x14fb07===void(0x2*0x47b+0x1362+-0x1c58)&&(_0x14fb07=this['_batchGrou'+'pCounter'],this['_batchGrou'+'pCounter']++),this['_batchGrou'+'ps'][_0x14fb07]){w['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x14fb07+('\x20already\x20e'+'xists.'));return;}const _0x54833f=new St(_0x14fb07,_0x45e7d5,_0x17dce8,_0x2d8294,_0x96af00);return this['_batchGrou'+'ps'][_0x14fb07]=_0x54833f,_0x54833f;}['removeGrou'+'p'](_0x14c989){if(!this['_batchGrou'+'ps'][_0x14c989]){w['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x14c989+('\x20doesn\x27t\x20e'+'xist.'));return;}const _0x3e7b9f=[];for(let _0x10a7b0=0xb50+0x8b*0x7+-0xf1d;_0x10a7b0<this['_batchList']['length'];_0x10a7b0++)this['_batchList'][_0x10a7b0]['batchGroup'+'Id']===_0x14c989?this['destroyBat'+'ch'](this['_batchList'][_0x10a7b0]):_0x3e7b9f['push'](this['_batchList'][_0x10a7b0]);this['_batchList']=_0x3e7b9f,this['_removeMod'+'elsFromBat'+'chGroup'](this['rootNode'],_0x14c989),delete this['_batchGrou'+'ps'][_0x14c989];}['markGroupD'+'irty'](_0x38a58d){this['_dirtyGrou'+'ps']['indexOf'](_0x38a58d)<0x18cf*0x1+0x894+-0x2163&&this['_dirtyGrou'+'ps']['push'](_0x38a58d);}['getGroupBy'+'Name'](_0x4a072e){const _0x13c6fe=this['_batchGrou'+'ps'];for(const _0x2e3bc3 in _0x13c6fe)if(_0x13c6fe['hasOwnProp'+'erty'](_0x2e3bc3)&&_0x13c6fe[_0x2e3bc3]['name']===_0x4a072e)return _0x13c6fe[_0x2e3bc3];return null;}['getBatches'](_0xe57a8f){const _0x323115=[],_0x5a8b12=this['_batchList']['length'];for(let _0x7f2c10=-0xdd7+-0x7e3+0x15ba;_0x7f2c10<_0x5a8b12;_0x7f2c10++){const _0x31d1c9=this['_batchList'][_0x7f2c10];_0x31d1c9['batchGroup'+'Id']===_0xe57a8f&&_0x323115['push'](_0x31d1c9);}return _0x323115;}['_removeMod'+'elsFromBat'+'chGroup'](_0x2953f7,_0x11d9c0){if(_0x2953f7['enabled']){_0x2953f7['model']&&_0x2953f7['model']['batchGroup'+'Id']===_0x11d9c0&&(_0x2953f7['model']['batchGroup'+'Id']=-(0x1282+0x1ecc+-0x106f*0x3)),_0x2953f7['render']&&_0x2953f7['render']['batchGroup'+'Id']===_0x11d9c0&&(_0x2953f7['render']['batchGroup'+'Id']=-(-0x1*-0x25c3+0x1*0x15a+-0x271c*0x1)),_0x2953f7['element']&&_0x2953f7['element']['batchGroup'+'Id']===_0x11d9c0&&(_0x2953f7['element']['batchGroup'+'Id']=-(-0x275+-0x1525+-0x179b*-0x1)),_0x2953f7['sprite']&&_0x2953f7['sprite']['batchGroup'+'Id']===_0x11d9c0&&(_0x2953f7['sprite']['batchGroup'+'Id']=-(0xdd*-0x1+0x5*-0x5f+0x2b9));for(let _0x4a4af6=0x2*0xf73+-0x229c+0x5*0xbe;_0x4a4af6<_0x2953f7['_children']['length'];_0x4a4af6++)this['_removeMod'+'elsFromBat'+'chGroup'](_0x2953f7['_children'][_0x4a4af6],_0x11d9c0);}}['insert'](_0x19e1a8,_0x5404de,_0x23fb53){const _0x30229d=this['_batchGrou'+'ps'][_0x5404de];w['assert'](_0x30229d,'Invalid\x20ba'+'tch\x20'+_0x5404de+'\x20insertion'),_0x30229d&&_0x30229d['_obj'][_0x19e1a8]['indexOf'](_0x23fb53)<-0xaa9*0x3+-0x1a61+-0x4*-0xe97&&(_0x30229d['_obj'][_0x19e1a8]['push'](_0x23fb53),this['markGroupD'+'irty'](_0x5404de));}['remove'](_0x45672d,_0x3a808a,_0x23c32f){const _0x2f9a75=this['_batchGrou'+'ps'][_0x3a808a];if(w['assert'](_0x2f9a75,'Invalid\x20ba'+'tch\x20'+_0x3a808a+'\x20insertion'),_0x2f9a75){const _0x45c021=_0x2f9a75['_obj'][_0x45672d]['indexOf'](_0x23c32f);_0x45c021>=0x3*-0xc74+0x1d09*0x1+0x853&&(_0x2f9a75['_obj'][_0x45672d]['splice'](_0x45c021,0x1ad0+0xad7*-0x2+-0x65*0xd),this['markGroupD'+'irty'](_0x3a808a));}}['_extractRe'+'nder'](_0x19a41e,_0x36fe26,_0x4abf65,_0x4dcd28){return _0x19a41e['render']&&(_0x36fe26=_0x4dcd28[_0x19a41e['render']['batchGroup'+'Id']]=_0x36fe26['concat'](_0x19a41e['render']['meshInstan'+'ces']),_0x19a41e['render']['removeFrom'+'Layers']()),_0x36fe26;}['_extractMo'+'del'](_0x25903a,_0x202c69,_0x4d7e77,_0x39ef72){return _0x25903a['model']&&_0x25903a['model']['model']&&(_0x202c69=_0x39ef72[_0x25903a['model']['batchGroup'+'Id']]=_0x202c69['concat'](_0x25903a['model']['meshInstan'+'ces']),_0x25903a['model']['removeMode'+'lFromLayer'+'s'](),_0x25903a['model']['_batchGrou'+'p']=_0x4d7e77),_0x202c69;}['_extractEl'+'ement'](_0x5c8182,_0x44d5a4,_0x1cc0f3){if(!_0x5c8182['element'])return;let _0x495620=!(0x1b63+-0x200f+0xab*0x7);_0x5c8182['element']['_text']&&_0x5c8182['element']['_text']['_model']['meshInstan'+'ces']['length']>0x108b+-0x1*-0xb2d+-0x1bb8?(_0x44d5a4['push'](_0x5c8182['element']['_text']['_model']['meshInstan'+'ces'][0x725*0x3+0x47*0x40+0x1*-0x272f]),_0x5c8182['element']['removeMode'+'lFromLayer'+'s'](_0x5c8182['element']['_text']['_model']),_0x495620=!(-0x2419*0x1+-0x1207*-0x2+0xb)):_0x5c8182['element']['_image']&&(_0x44d5a4['push'](_0x5c8182['element']['_image']['_renderabl'+'e']['meshInstan'+'ce']),_0x5c8182['element']['removeMode'+'lFromLayer'+'s'](_0x5c8182['element']['_image']['_renderabl'+'e']['model']),_0x5c8182['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']&&(_0x44d5a4['push'](_0x5c8182['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']),(!_0x5c8182['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']||!_0x5c8182['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k'])&&(_0x5c8182['element']['_dirtifyMa'+'sk'](),_0x5c8182['element']['_onPrerend'+'er']())),_0x495620=!(-0x1f85*0x1+0x226c+-0x1*0x2e7)),_0x495620&&(_0x1cc0f3['_ui']=!(-0x13fd+-0x12fd*0x1+0x26fa),_0x5c8182['element']['_batchGrou'+'p']=_0x1cc0f3);}['_collectAn'+'dRemoveMes'+'hInstances'](_0x3f1789,_0x13d0e5){for(let _0x2ed08d=0x1*-0x12e+0x3c2*-0x6+-0x1*-0x17ba;_0x2ed08d<_0x13d0e5['length'];_0x2ed08d++){const _0x4b43b1=_0x13d0e5[_0x2ed08d],_0x242d57=this['_batchGrou'+'ps'][_0x4b43b1];if(!_0x242d57)continue;let _0xc9750c=_0x3f1789[_0x4b43b1];_0xc9750c||(_0xc9750c=_0x3f1789[_0x4b43b1]=[]);for(let _0x5a10a8=-0x1*0x157f+-0x1bb2+0x3131;_0x5a10a8<_0x242d57['_obj']['model']['length'];_0x5a10a8++)_0xc9750c=this['_extractMo'+'del'](_0x242d57['_obj']['model'][_0x5a10a8],_0xc9750c,_0x242d57,_0x3f1789);for(let _0x3c82e4=0x64e+-0x63c+-0x3*0x6;_0x3c82e4<_0x242d57['_obj']['render']['length'];_0x3c82e4++)_0xc9750c=this['_extractRe'+'nder'](_0x242d57['_obj']['render'][_0x3c82e4],_0xc9750c,_0x242d57,_0x3f1789);for(let _0x26bb38=-0x94e+0x1*-0xad5+-0x407*-0x5;_0x26bb38<_0x242d57['_obj']['element']['length'];_0x26bb38++)this['_extractEl'+'ement'](_0x242d57['_obj']['element'][_0x26bb38],_0xc9750c,_0x242d57);for(let _0x2d98c2=0x15d5+0x1cd5+-0x32aa;_0x2d98c2<_0x242d57['_obj']['sprite']['length'];_0x2d98c2++){const _0x2da81f=_0x242d57['_obj']['sprite'][_0x2d98c2];_0x2da81f['sprite']&&_0x2da81f['sprite']['_meshInsta'+'nce']&&(_0x242d57['dynamic']||_0x2da81f['sprite']['sprite']['_renderMod'+'e']===ci)&&(_0xc9750c['push'](_0x2da81f['sprite']['_meshInsta'+'nce']),_0x2da81f['sprite']['removeMode'+'lFromLayer'+'s'](),_0x242d57['_sprite']=!(0x97*0x2e+0x4b*0x22+-0x2518),_0x2da81f['sprite']['_batchGrou'+'p']=_0x242d57);}}}['generate'](_0x27d657){const _0x30db11={};_0x27d657||(_0x27d657=Object['keys'](this['_batchGrou'+'ps']));const _0x58ec56=[];for(let _0x24670c=0x12e6+-0x2342*0x1+0x105c;_0x24670c<this['_batchList']['length'];_0x24670c++){if(_0x27d657['indexOf'](this['_batchList'][_0x24670c]['batchGroup'+'Id'])<-0xe5*0x19+0x20e6+-0xa89){_0x58ec56['push'](this['_batchList'][_0x24670c]);continue;}this['destroyBat'+'ch'](this['_batchList'][_0x24670c]);}if(this['_batchList']=_0x58ec56,this['_collectAn'+'dRemoveMes'+'hInstances'](_0x30db11,_0x27d657),_0x27d657===this['_dirtyGrou'+'ps'])this['_dirtyGrou'+'ps']['length']=-0x1*0xc14+-0x1740+0x2354;else{const _0x6d9955=[];for(let _0x176ffc=-0x12d2+-0x151b+0x27ed;_0x176ffc<this['_dirtyGrou'+'ps']['length'];_0x176ffc++)_0x27d657['indexOf'](this['_dirtyGrou'+'ps'][_0x176ffc])<0x34e+0x322*-0x9+-0x36*-0x76&&_0x6d9955['push'](this['_dirtyGrou'+'ps'][_0x176ffc]);this['_dirtyGrou'+'ps']=_0x6d9955;}let _0x351932,_0x6bdef7,_0xfac01e,_0x2f3205;for(const _0x584a2f in _0x30db11)if(_0x30db11['hasOwnProp'+'erty'](_0x584a2f)){if(_0x351932=_0x30db11[_0x584a2f],_0xfac01e=this['_batchGrou'+'ps'][_0x584a2f],!_0xfac01e){w['error']('batch\x20grou'+'p\x20'+_0x584a2f+'\x20not\x20found');continue;}_0x6bdef7=this['prepare'](_0x351932,_0xfac01e['dynamic'],_0xfac01e['maxAabbSiz'+'e'],_0xfac01e['_ui']||_0xfac01e['_sprite']);for(let _0x175a95=-0x22*-0x2f+-0x1432+-0x4*-0x37d;_0x175a95<_0x6bdef7['length'];_0x175a95++)_0x2f3205=this['create'](_0x6bdef7[_0x175a95],_0xfac01e['dynamic'],parseInt(_0x584a2f,-0x17c+-0x388*0x2+0x896)),_0x2f3205&&_0x2f3205['addToLayer'+'s'](this['scene'],_0xfac01e['layers']);}}['prepare'](_0x41e000,_0x6496e0,_0x4023c2=Number['POSITIVE_I'+'NFINITY'],_0x28b3de){if(_0x41e000['length']===-0x124a*0x2+0x1f97*0x1+-0x4fd*-0x1)return[];const _0x1479fe=_0x4023c2*(-0x1d9b*-0x1+-0x5*0x40f+0x254*-0x4+0.5),_0x526377=0xab*0x30+-0xe8f+-0xd81*0x1,_0x3fcb5f=-0x61edf*-0x3239+-0x34c3fe71*-0x7+-0x1*0x1a4c062bf,_0x48fe9e=new De(),_0x4c549d=new De();let _0x39538e=null,_0xf29f52;const _0x3e1153=[];let _0x2c1328=-0x2af*0x1+0x523+-0x274;_0x28b3de&&_0x41e000['sort']((_0x4687ac,_0x13cd0e)=>_0x4687ac['drawOrder']-_0x13cd0e['drawOrder']);let _0x41be16=_0x41e000,_0x2a6ce9;const _0x5d8078=_0x28b3de?function(_0x357fd7){_0x39538e?_0x39538e['add'](_0x357fd7['aabb']):_0x39538e=_0x357fd7['aabb']['clone'](),_0x2a6ce9['push'](_0x357fd7);}:function(_0x59eb90){_0x2a6ce9['push'](_0x59eb90);};for(;_0x41be16['length']>-0x2564+-0xd57+0x5a3*0x9;){_0x3e1153[_0x2c1328]=[_0x41be16[0x1d33+-0x77*-0x47+-0xf8d*0x4]],_0x2a6ce9=[];const _0x421b70=_0x41be16[0x31*0x52+-0x20a6+0x10f4]['material'],_0x541d63=_0x41be16[0x185e+0x18c7*0x1+-0x3125]['layer'],_0x4fa399=_0x41be16[-0x14f7*-0x1+0x1039+-0x7*0x550]['_shaderDef'+'s'],_0x49ad99=_0x41be16[0xfe3+0x2b*0xb3+-0x2*0x16fa]['parameters'],_0x50db8f=_0x41be16[0x30*-0x75+-0x9*-0x2c1+0x9*-0x51]['stencilFro'+'nt'];let _0x32b8b2=_0x41be16[0x891+0x9*-0x39+-0x690]['mesh']['vertexBuff'+'er']['getNumVert'+'ices']();const _0x5f22c0=_0x41be16[0xf6e+0x31*-0x9+-0xdb5]['drawOrder'];_0x48fe9e['copy'](_0x41be16[0x10*-0xdb+-0x108e+0x452*0x7]['aabb']);const _0x30f779=Ad(_0x41be16[0x1b11+0x2234+-0x3d45*0x1]),_0xeb78f7=_0x41be16[0x14*0x1eb+0xd1*-0xd+0x1*-0x1bbf]['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh'],_0x3275b2=_0x41be16[-0x14b7+-0xcef+-0x92*-0x3b]['mesh']['primitive'][0x313*-0x8+0x2*-0xddb+0x344e]['indexed'];_0x39538e=null;for(let _0xef5d40=0x1*-0x29a+-0x8*0x1e3+-0xc5*-0x17;_0xef5d40<_0x41be16['length'];_0xef5d40++){const _0x4110a1=_0x41be16[_0xef5d40];if(_0x6496e0&&_0x3e1153[_0x2c1328]['length']>=_0x526377){_0x2a6ce9=_0x2a6ce9['concat'](_0x41be16['slice'](_0xef5d40));break;}if(_0x421b70!==_0x4110a1['material']||_0x541d63!==_0x4110a1['layer']||_0xeb78f7!==_0x4110a1['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh']||_0x3275b2!==_0x4110a1['mesh']['primitive'][-0xf1*0xb+-0x7*0x56d+0x182b*0x2]['indexed']||_0x4fa399!==_0x4110a1['_shaderDef'+'s']||_0x32b8b2+_0x4110a1['mesh']['vertexBuff'+'er']['getNumVert'+'ices']()>_0x3fcb5f){_0x5d8078(_0x4110a1);continue;}if(_0x4c549d['copy'](_0x48fe9e),_0x4c549d['add'](_0x4110a1['aabb']),_0x4c549d['halfExtent'+'s']['x']>_0x1479fe||_0x4c549d['halfExtent'+'s']['y']>_0x1479fe||_0x4c549d['halfExtent'+'s']['z']>_0x1479fe){_0x5d8078(_0x4110a1);continue;}if(_0x50db8f&&(!(_0xf29f52=_0x4110a1['stencilFro'+'nt'])||_0x50db8f['func']!==_0xf29f52['func']||_0x50db8f['zpass']!==_0xf29f52['zpass'])){_0x5d8078(_0x4110a1);continue;}if(_0x30f779!==Ad(_0x4110a1)){_0x5d8078(_0x4110a1);continue;}if(!jw(_0x49ad99,_0x4110a1['parameters'])){_0x5d8078(_0x4110a1);continue;}if(_0x28b3de&&_0x39538e&&_0x39538e['intersects'](_0x4110a1['aabb'])&&_0x4110a1['drawOrder']!==_0x5f22c0){_0x5d8078(_0x4110a1);continue;}_0x48fe9e['add'](_0x4110a1['aabb']),_0x32b8b2+=_0x4110a1['mesh']['vertexBuff'+'er']['getNumVert'+'ices'](),_0x3e1153[_0x2c1328]['push'](_0x4110a1);}_0x2c1328++,_0x41be16=_0x2a6ce9;}return _0x3e1153;}['collectBat'+'chedMeshDa'+'ta'](_0xc4face,_0x19e6e8){let _0x35f347=null,_0x3ff6bb=0x3*-0xa+-0x5e*-0x8+-0x169*0x2,_0x50b5fc=-0x21e1+-0x5d*0x49+0x3c66,_0x24e425=null;for(let _0x3d5eb1=0x1356+-0xc5d+0xff*-0x7;_0x3d5eb1<_0xc4face['length'];_0x3d5eb1++)if(_0xc4face[_0x3d5eb1]['visible']){const _0x384b1d=_0xc4face[_0x3d5eb1]['mesh'],_0x268409=_0x384b1d['vertexBuff'+'er']['numVertice'+'s'];if(_0x3ff6bb+=_0x268409,_0x384b1d['primitive'][0x77b*0x2+-0x3*0x2b9+-0x6cb]['indexed'])_0x50b5fc+=_0x384b1d['primitive'][-0x1a0d+0x177*-0x7+-0xc1a*-0x3]['count'];else{const _0x2d3b8f=_0x384b1d['primitive'][0x1a22+0x1bf8+0x115*-0x32]['type'];(_0x2d3b8f===sa||_0x2d3b8f===vr)&&_0x384b1d['primitive'][-0x16d2+0x2c2*-0x7+-0x20*-0x151]['count']===-0x6d5+0x937+-0x25e&&(_0x50b5fc+=-0x8fe+-0x22b5+0x15*0x215);}if(!_0x35f347){_0x24e425=_0xc4face[_0x3d5eb1]['material'],_0x35f347={};const _0x5dd956=_0x384b1d['vertexBuff'+'er']['format']['elements'];for(let _0x220c50=0x10b7*-0x1+-0x136a*0x2+0x378b;_0x220c50<_0x5dd956['length'];_0x220c50++){const _0x222191=_0x5dd956[_0x220c50]['name'];_0x35f347[_0x222191]={'numComponents':_0x5dd956[_0x220c50]['numCompone'+'nts'],'dataType':_0x5dd956[_0x220c50]['dataType'],'normalize':_0x5dd956[_0x220c50]['normalize'],'count':0x0};}_0x19e6e8&&(_0x35f347[us]={'numComponents':0x1,'dataType':Ve,'normalize':!(-0x1*-0x124e+0x242d+0x2de*-0x13),'count':0x0});}}return{'streams':_0x35f347,'batchNumVerts':_0x3ff6bb,'batchNumIndices':_0x50b5fc,'material':_0x24e425};}['create'](_0x58914c,_0x3c56bc,_0x462b3f){const _0x259b54=de();this['_init']||(this['vertexForm'+'ats']={},this['_init']=!(0x1f40+-0xa4f+-0x14f1));let _0x5ad6e5=null,_0x37a041,_0x5c666f,_0x567127,_0x5649ca=null;const _0x421d60=this['collectBat'+'chedMeshDa'+'ta'](_0x58914c,_0x3c56bc);if(_0x421d60['streams']){const _0x731eaf=_0x421d60['streams'];let _0x6e01eb=_0x421d60['material'];const _0x22abb0=_0x421d60['batchNumVe'+'rts'],_0x2aa695=_0x421d60['batchNumIn'+'dices'];_0x5649ca=new Gm(_0x58914c,_0x3c56bc,_0x462b3f),this['_batchList']['push'](_0x5649ca);let _0x3acef2,_0xa1144c,_0x1cc8fb,_0xd7e9e5,_0x5a75d7=0x5fb+-0x10f4+0x35*0x35,_0x292f4c=-0x1b*-0x5d+-0x1*-0x1b31+0x25*-0x100,_0xe5302e;const _0x12786b=_0x22abb0<=0xad*0x2e1+0x7e*-0x15+-0xe7b8?Uint16Array:Uint32Array,_0x25f5ea=new _0x12786b(_0x2aa695);for(_0x37a041 in _0x731eaf)_0x5ad6e5=_0x731eaf[_0x37a041],_0x5ad6e5['typeArrayT'+'ype']=_n[_0x5ad6e5['dataType']],_0x5ad6e5['elementByt'+'eSize']=Eo[_0x5ad6e5['dataType']],_0x5ad6e5['buffer']=new _0x5ad6e5['typeArrayT'+'ype'](_0x22abb0*_0x5ad6e5['numCompone'+'nts']);for(let _0x5cd1d8=-0x218f+0x5ce+0x1bc1;_0x5cd1d8<_0x58914c['length'];_0x5cd1d8++)if(_0x58914c[_0x5cd1d8]['visible']){_0x5c666f=_0x58914c[_0x5cd1d8]['mesh'],_0x567127=_0x5c666f['vertexBuff'+'er']['numVertice'+'s'],_0x3c56bc||(_0xe5302e=_0x58914c[_0x5cd1d8]['node']['getWorldTr'+'ansform']());for(_0x37a041 in _0x731eaf)if(_0x37a041!==us){_0x5ad6e5=_0x731eaf[_0x37a041];const _0x368ccb=new _0x5ad6e5['typeArrayT'+'ype'](_0x5ad6e5['buffer']['buffer'],_0x5ad6e5['elementByt'+'eSize']*_0x5ad6e5['count']),_0x11e1c1=_0x5c666f['getVertexS'+'tream'](_0x37a041,_0x368ccb)*_0x5ad6e5['numCompone'+'nts'];if(_0x5ad6e5['count']+=_0x11e1c1,!_0x3c56bc&&_0x5ad6e5['numCompone'+'nts']>=-0x7*-0x116+-0x1*0x17fa+-0x5*-0x347){if(_0x37a041===Pe){const _0xb10544=_0xe5302e['data'],_0x39a70a=_0xb10544[0x3*0x7fe+-0x2639+0x7*0x209],_0x2effc6=_0xb10544[-0x2*0x73+-0x7c9+0x8b0],_0xba4926=_0xb10544[0x763+-0x10f1+0x990],_0x32e9f7=_0xb10544[-0x22a5+0x2538*-0x1+0x1*0x47e1],_0x5d1ceb=_0xb10544[-0xccd+0x390+0x942],_0x293a8a=_0xb10544[-0x1*-0x727+0x18dc+-0x1ffd],_0x10097d=_0xb10544[-0x161c+0x2f*0xc5+-0xe07],_0x5cad03=_0xb10544[-0x2ef*-0x4+-0x970*0x4+0x1a0d],_0x4a3d9c=_0xb10544[0x9a4*0x2+-0xbed+-0x751],_0x59aaf0=_0xb10544[0x138f*-0x1+0xbd4+0xb5*0xb],_0x56bd4c=_0xb10544[-0xfe1+-0x16*0xc5+0x20dc],_0xd7956=_0xb10544[0x2177*0x1+-0x1722+-0xa47];let _0x58feee,_0x39004c,_0x7a6327;for(let _0x525700=-0x1*0x2394+0xbf1+0x17a3;_0x525700<_0x11e1c1;_0x525700+=_0x5ad6e5['numCompone'+'nts'])_0x58feee=_0x368ccb[_0x525700],_0x39004c=_0x368ccb[_0x525700+(-0x1ab*-0x12+-0x3*0xcfa+0x8e9)],_0x7a6327=_0x368ccb[_0x525700+(-0x3a6+0x1*0x339+0x3*0x25)],_0x368ccb[_0x525700]=_0x58feee*_0x39a70a+_0x39004c*_0x32e9f7+_0x7a6327*_0x10097d+_0x59aaf0,_0x368ccb[_0x525700+(0x1334+0x20e8+-0x341b)]=_0x58feee*_0x2effc6+_0x39004c*_0x5d1ceb+_0x7a6327*_0x5cad03+_0x56bd4c,_0x368ccb[_0x525700+(-0x6a*0x59+0x1*0x265+0x2277)]=_0x58feee*_0xba4926+_0x39004c*_0x293a8a+_0x7a6327*_0x4a3d9c+_0xd7956;}else{if(_0x37a041===gs||_0x37a041===yi){Zm['invertMat4'](_0xe5302e)['transpose']();const [_0x33b0b4,_0x13e5dc,_0x3015ae,_0x4b36ad,_0x13faaf,_0x5bd619,_0x18eb7e,_0x1be44a,_0x3c54c6]=Zm['data'];let _0x4bab0a,_0x5ec0ef,_0x64a4a9;for(let _0x2a672f=-0x1*-0x1e49+0x5c*-0x60+0x437;_0x2a672f<_0x11e1c1;_0x2a672f+=_0x5ad6e5['numCompone'+'nts'])_0x4bab0a=_0x368ccb[_0x2a672f],_0x5ec0ef=_0x368ccb[_0x2a672f+(0x17+0x6bb+0x1*-0x6d1)],_0x64a4a9=_0x368ccb[_0x2a672f+(0x1e5f+0x2521*0x1+0xa3*-0x6a)],_0x368ccb[_0x2a672f]=_0x4bab0a*_0x33b0b4+_0x5ec0ef*_0x4b36ad+_0x64a4a9*_0x18eb7e,_0x368ccb[_0x2a672f+(-0x1f0f*0x1+0x2502+-0x5f2*0x1)]=_0x4bab0a*_0x13e5dc+_0x5ec0ef*_0x13faaf+_0x64a4a9*_0x1be44a,_0x368ccb[_0x2a672f+(0x23f8+0x23f1+-0x47e7)]=_0x4bab0a*_0x3015ae+_0x5ec0ef*_0x5bd619+_0x64a4a9*_0x3c54c6;}}}}if(_0x3c56bc){_0x5ad6e5=_0x731eaf[us];for(let _0x5b74d5=0x1004+0x467+-0x146b;_0x5b74d5<_0x567127;_0x5b74d5++)_0x5ad6e5['buffer'][_0x5ad6e5['count']++]=_0x5cd1d8;}if(_0x5c666f['primitive'][0x1*0x120a+0x1dd7+0x6d7*-0x7]['indexed']){_0x3acef2=_0x5c666f['primitive'][0x1288*0x2+-0x6d7*0x1+-0x1e39*0x1]['base'],_0xa1144c=_0x5c666f['primitive'][-0xedb+0x8*-0x3ff+-0x2ed3*-0x1]['baseVertex']||0x107*0x8+-0x17f*-0x10+-0x2028,_0x1cc8fb=_0x5c666f['primitive'][0xf5c+0x1f2c+0xba2*-0x4]['count'];const _0x3091b5=_0x5c666f['indexBuffe'+'r'][-0x1105*-0x2+0x24ca+-0x5e7*0xc]['getFormat']();_0xd7e9e5=new Kc[_0x3091b5](_0x5c666f['indexBuffe'+'r'][0x53c*-0x2+0x1*-0x23dd+-0x1*-0x2e55]['storage']);}else{_0xa1144c=0x7b*0x16+0x15a4+-0x24d*0xe;const _0x19183b=_0x5c666f['primitive'][-0x707*0x1+-0x1*0x2345+0x2a4c]['type'];if(_0x19183b===sa||_0x19183b===vr){if(_0x5c666f['primitive'][-0x1*-0x10ad+0x46a+-0x1517*0x1]['count']===-0xf09+0x374*0x8+0x1d*-0x6f)_0x3acef2=-0x1323+0x1c0f+0x1*-0x8ec,_0x1cc8fb=-0x7*0x45f+-0x2523+0x43c2,_0xd7e9e5=_0x19183b===sa?Xw:qw;else{_0x1cc8fb=0x11*-0x16f+0x187c+-0x1d*0x1;continue;}}}for(let _0xb0ad3f=-0x5b*0x47+0xdad+-0x25*-0x50;_0xb0ad3f<_0x1cc8fb;_0xb0ad3f++)_0x25f5ea[_0xb0ad3f+_0x292f4c]=_0xd7e9e5[_0x3acef2+_0xb0ad3f]+_0xa1144c+_0x5a75d7;_0x292f4c+=_0x1cc8fb,_0x5a75d7+=_0x567127;}_0x5c666f=new Ge(this['device']);for(_0x37a041 in _0x731eaf)_0x5ad6e5=_0x731eaf[_0x37a041],_0x5c666f['setVertexS'+'tream'](_0x37a041,_0x5ad6e5['buffer'],_0x5ad6e5['numCompone'+'nts'],void(0x61e+-0x1474+-0x2de*-0x5),_0x5ad6e5['dataType'],_0x5ad6e5['normalize']);_0x25f5ea['length']>-0x7c5+0x1bfa+-0x1*0x1435&&_0x5c666f['setIndices'](_0x25f5ea),_0x5c666f['update'](qs,!(-0x1443+0x1*0x53+0x3fd*0x5)),_0x3c56bc&&(_0x6e01eb=_0x6e01eb['clone'](),_0x6e01eb['update']());const _0x3cf939=new He(_0x5c666f,_0x6e01eb,this['rootNode']);_0x3cf939['castShadow']=_0x5649ca['origMeshIn'+'stances'][-0x57*-0x8+0x2*0x35e+-0x2*0x4ba]['castShadow'],_0x3cf939['parameters']=_0x5649ca['origMeshIn'+'stances'][-0x19a2*0x1+0x1df4+-0x7*0x9e]['parameters'],_0x3cf939['layer']=_0x5649ca['origMeshIn'+'stances'][0x6fd+0x2611+-0x2d0e]['layer'],_0x3cf939['_shaderDef'+'s']=_0x5649ca['origMeshIn'+'stances'][-0x1*0x504+0x581*0x7+-0x17*0x175]['_shaderDef'+'s'],_0x3cf939['batching']=!(-0x16*-0x2+0x809*-0x3+0x17ef),_0x3cf939['cull']=_0x5649ca['origMeshIn'+'stances'][0x456+0x16ca+-0x1b20]['cull'];const _0x15fd52=this['_batchGrou'+'ps'][_0x462b3f];if(_0x15fd52&&_0x15fd52['_ui']&&(_0x3cf939['cull']=!(-0x32a+-0x1*0x55c+0x887)),_0x3c56bc){const _0x23b154=[];for(let _0x5be467=-0x51*-0x56+-0x243+-0x18f3;_0x5be467<_0x5649ca['origMeshIn'+'stances']['length'];_0x5be467++)_0x23b154['push'](_0x5649ca['origMeshIn'+'stances'][_0x5be467]['node']);_0x3cf939['skinInstan'+'ce']=new Wm(this['device'],_0x23b154,this['rootNode']);}_0x3cf939['_updateAab'+'b']=!(-0x43*0x51+-0x1610+0x2b44),_0x3cf939['drawOrder']=_0x5649ca['origMeshIn'+'stances'][-0x1523+-0x24fb+-0x2b*-0x15a]['drawOrder'],_0x3cf939['stencilFro'+'nt']=_0x5649ca['origMeshIn'+'stances'][-0x6*0x2d7+0x6d9*-0x1+0x1*0x17e3]['stencilFro'+'nt'],_0x3cf939['stencilBac'+'k']=_0x5649ca['origMeshIn'+'stances'][0x5f5+-0x12c3+0x667*0x2]['stencilBac'+'k'],_0x3cf939['flipFacesF'+'actor']=Ad(_0x5649ca['origMeshIn'+'stances'][0x86*0x48+-0xd4*-0x1f+-0x3f5c]),_0x3cf939['castShadow']=_0x5649ca['origMeshIn'+'stances'][-0x876+0x1889+-0x1013]['castShadow'],_0x5649ca['meshInstan'+'ce']=_0x3cf939,_0x5649ca['updateBoun'+'dingBox']();}return this['_stats']['createTime']+=de()-_0x259b54,_0x5649ca;}['updateAll'](){this['_dirtyGrou'+'ps']['length']>0x217e+-0x25ec+0x7*0xa2&&this['generate'](this['_dirtyGrou'+'ps']);const _0x44ea9f=de();for(let _0x102a4a=0x9f2+0x1a9b+-0x248d;_0x102a4a<this['_batchList']['length'];_0x102a4a++)this['_batchList'][_0x102a4a]['dynamic']&&this['_batchList'][_0x102a4a]['updateBoun'+'dingBox']();this['_stats']['updateLast'+'FrameTime']=de()-_0x44ea9f;}['clone'](_0x469bb6,_0x9e2950){const _0x809f50=new Gm(_0x9e2950,_0x469bb6['dynamic'],_0x469bb6['batchGroup'+'Id']);this['_batchList']['push'](_0x809f50);const _0x259473=[];for(let _0x8b905f=-0xa56+-0x6b8+0x110e;_0x8b905f<_0x9e2950['length'];_0x8b905f++)_0x259473['push'](_0x9e2950[_0x8b905f]['node']);return _0x809f50['meshInstan'+'ce']=new He(_0x469bb6['meshInstan'+'ce']['mesh'],_0x469bb6['meshInstan'+'ce']['material'],_0x469bb6['meshInstan'+'ce']['node']),_0x809f50['meshInstan'+'ce']['_updateAab'+'b']=!(0x932+-0x416+-0x51b),_0x809f50['meshInstan'+'ce']['parameters']=_0x9e2950[0x8*-0x19f+0x647*0x3+-0x4f*0x13]['parameters'],_0x809f50['meshInstan'+'ce']['cull']=_0x9e2950[-0x169+-0x32d*-0x9+-0x2*0xd96]['cull'],_0x809f50['meshInstan'+'ce']['layer']=_0x9e2950[0x168c+-0x2db*-0x6+0xd3a*-0x3]['layer'],_0x469bb6['dynamic']&&(_0x809f50['meshInstan'+'ce']['skinInstan'+'ce']=new Wm(this['device'],_0x259473,this['rootNode'])),_0x809f50['meshInstan'+'ce']['castShadow']=_0x469bb6['meshInstan'+'ce']['castShadow'],_0x809f50;}['destroyBat'+'ch'](_0x129b39){_0x129b39['destroy'](this['scene'],this['_batchGrou'+'ps'][_0x129b39['batchGroup'+'Id']]['layers']);}}const Jm='uSceneColo'+'rMap';class Kw extends ys{constructor(){super(...arguments),h(this,'colorRende'+'rTarget',null),h(this,'source',null);}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']);}['shouldReal'+'locate'](_0x4ed4e7,_0x2501e0,_0x22c48e){if((_0x4ed4e7==null?void(-0x19f5+-0xecb+0x28c0):_0x4ed4e7['colorBuffe'+'r']['format'])!==_0x22c48e)return!(-0x116*0x22+-0xa61*0x3+0x440f);const _0x3f4cda=(_0x2501e0==null?void(0xcaf+-0x41*-0x39+-0x1b28):_0x2501e0['width'])||this['device']['width'],_0x135b54=(_0x2501e0==null?void(-0x1*-0x206b+0x1303+-0x336e):_0x2501e0['height'])||this['device']['height'];return!_0x4ed4e7||_0x3f4cda!==_0x4ed4e7['width']||_0x135b54!==_0x4ed4e7['height'];}['allocateRe'+'nderTarget'](_0x2c6f22,_0x11539c,_0x57295d,_0x3aa384){const _0x15e4d5=new _e(_0x57295d,{'name':Jm,'format':_0x3aa384,'width':_0x11539c?_0x11539c['colorBuffe'+'r']['width']:_0x57295d['width'],'height':_0x11539c?_0x11539c['colorBuffe'+'r']['height']:_0x57295d['height'],'mipmaps':!(0xd*-0x101+0x3*-0x2f+-0x2*-0x6cd),'minFilter':ha,'magFilter':vt,'addressU':ue,'addressV':ue});return _0x2c6f22?(_0x2c6f22['destroyFra'+'meBuffers'](),_0x2c6f22['_colorBuff'+'er']=_0x15e4d5,_0x2c6f22['_colorBuff'+'ers']=[_0x15e4d5]):_0x2c6f22=new gt({'name':'ColorGrabR'+'T','colorBuffer':_0x15e4d5,'depth':!(0x1374+-0x1369*0x1+0x2*-0x5),'stencil':!(0xd*-0xa9+-0x115*0x5+-0xdff*-0x1),'autoResolve':!(-0x1df7+0x5ef+0x1809)}),_0x2c6f22;}['releaseRen'+'derTarget'](_0x3f8f8b){_0x3f8f8b&&(_0x3f8f8b['destroyTex'+'tureBuffer'+'s'](),_0x3f8f8b['destroy']());}['frameUpdat'+'e'](){const _0x520b86=this['device'],_0x5962f2=this['source'],_0x8e5e72=(_0x5962f2==null?void(-0x14be+0x1b30+-0x672):_0x5962f2['colorBuffe'+'r']['format'])??this['device']['backBuffer'+'Format'];this['shouldReal'+'locate'](this['colorRende'+'rTarget'],_0x5962f2==null?void(-0xd3e+-0xf61+0x1c9f):_0x5962f2['colorBuffe'+'r'],_0x8e5e72)&&(this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']),this['colorRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['colorRende'+'rTarget'],_0x5962f2,_0x520b86,_0x8e5e72));const _0x49a9cd=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x520b86['scope']['resolve'](Jm)['setValue'](_0x49a9cd);}['execute'](){const _0x4b659a=this['device'];Q['pushGpuMar'+'ker'](_0x4b659a,'GRAB-COLOR');const _0x2f3da0=this['source'],_0x43bf0c=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x4b659a['isWebGPU']?(_0x4b659a['copyRender'+'Target'](_0x2f3da0,this['colorRende'+'rTarget'],!(0x4*0x979+-0xca3+-0x1941),!(0x26ae+-0x144e+-0x125f*0x1)),_0x4b659a['mipmapRend'+'erer']['generate'](this['colorRende'+'rTarget']['colorBuffe'+'r']['impl'])):(_0x4b659a['copyRender'+'Target'](_0x2f3da0,this['colorRende'+'rTarget'],!(0x19c7+0x11c9+-0x2b90),!(0x7*-0x310+0x1182+0x3ef)),_0x4b659a['activeText'+'ure'](_0x4b659a['maxCombine'+'dTextures']-(0x144b+0x1e5a+-0x32a4)),_0x4b659a['bindTextur'+'e'](_0x43bf0c),_0x4b659a['gl']['generateMi'+'pmap'](_0x43bf0c['impl']['_glTarget'])),Q['popGpuMark'+'er'](_0x4b659a);}}const e_='uSceneDept'+'hMap';class Zw extends ys{constructor(_0x47c59d,_0xe61a69){super(_0x47c59d),h(this,'depthRende'+'rTarget',null),h(this,'camera',null),this['camera']=_0xe61a69;}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']);}['shouldReal'+'locate'](_0x5ee055,_0x5b58a8){const _0x376844=(_0x5b58a8==null?void(0x1*-0xdea+-0x1*0x16a9+0x1*0x2493):_0x5b58a8['width'])||this['device']['width'],_0x9b4e21=(_0x5b58a8==null?void(0x623*-0x2+0x194d+-0x91*0x17):_0x5b58a8['height'])||this['device']['height'];return!_0x5ee055||_0x376844!==_0x5ee055['width']||_0x9b4e21!==_0x5ee055['height'];}['allocateRe'+'nderTarget'](_0x505248,_0x5c7e24,_0x2d1e4e,_0x4c3bb9,_0xec631f){const _0x3f93de=new _e(_0x2d1e4e,{'name':e_,'format':_0x4c3bb9,'width':_0x5c7e24?_0x5c7e24['colorBuffe'+'r']['width']:_0x2d1e4e['width'],'height':_0x5c7e24?_0x5c7e24['colorBuffe'+'r']['height']:_0x2d1e4e['height'],'mipmaps':!(-0x1764+-0x7*-0x54a+-0xda1),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});return _0x505248?(_0x505248['destroyFra'+'meBuffers'](),_0xec631f?_0x505248['_depthBuff'+'er']=_0x3f93de:(_0x505248['_colorBuff'+'er']=_0x3f93de,_0x505248['_colorBuff'+'ers']=[_0x3f93de])):_0x505248=new gt({'name':'DepthGrabR'+'T','colorBuffer':_0xec631f?null:_0x3f93de,'depthBuffer':_0xec631f?_0x3f93de:null,'depth':!_0xec631f,'stencil':_0x2d1e4e['supportsSt'+'encil'],'autoResolve':!(0x9a*-0x6+-0xc*-0x255+-0x185f*0x1)}),_0x505248;}['releaseRen'+'derTarget'](_0x4357ec){_0x4357ec&&(_0x4357ec['destroyTex'+'tureBuffer'+'s'](),_0x4357ec['destroy']());}['before'](){var _0x19b921,_0x5b1bde;const _0x44f0d5=this['camera'],_0x3061a7=this['device'],_0x2717d5=(_0x44f0d5==null?void(-0x151*-0x17+-0x113*-0x2+-0x206d*0x1):_0x44f0d5['renderTarg'+'et'])??_0x3061a7['backBuffer'];let _0x3f9af9=!(-0x4*0x833+0x5*0x3ef+0xd21),_0x4daf6a=_0x2717d5['stencil']?Oh:Wi;_0x3061a7['isWebGPU']&&_0x2717d5['samples']>-0x224c+-0x2606+0x17*0x325&&(_0x4daf6a=Qi,_0x3f9af9=!(0x518*0x5+0x1*0x1189+-0x2b00));const _0x879ab2=((_0x19b921=_0x44f0d5['renderTarg'+'et'])==null?void(0x1e59+0x3c1*0x8+0x3c61*-0x1):_0x19b921['depthBuffe'+'r'])??((_0x5b1bde=_0x44f0d5['renderTarg'+'et'])==null?void(0x668*0x2+-0x1*-0x19cb+-0x269b):_0x5b1bde['colorBuffe'+'r']);this['shouldReal'+'locate'](this['depthRende'+'rTarget'],_0x879ab2)&&(this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']),this['depthRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['depthRende'+'rTarget'],_0x44f0d5['renderTarg'+'et'],_0x3061a7,_0x4daf6a,_0x3f9af9));const _0x1492b9=_0x3f9af9?this['depthRende'+'rTarget']['depthBuffe'+'r']:this['depthRende'+'rTarget']['colorBuffe'+'r'];_0x3061a7['scope']['resolve'](e_)['setValue'](_0x1492b9);}['execute'](){const _0x292262=this['device'];if(Q['pushGpuMar'+'ker'](_0x292262,'GRAB-DEPTH'),_0x292262['isWebGL2']&&_0x292262['renderTarg'+'et']['samples']>0x67*-0x61+-0x23e4+0xefc*0x5){const _0x2b43ff=_0x292262['renderTarg'+'et']['impl']['_glFrameBu'+'ffer'],_0x30dcc3=this['depthRende'+'rTarget'];_0x292262['renderTarg'+'et']=_0x30dcc3,_0x292262['updateBegi'+'n'](),this['depthRende'+'rTarget']['impl']['internalRe'+'solve'](_0x292262,_0x2b43ff,_0x30dcc3['impl']['_glFrameBu'+'ffer'],this['depthRende'+'rTarget'],_0x292262['gl']['DEPTH_BUFF'+'ER_BIT']);}else _0x292262['copyRender'+'Target'](_0x292262['renderTarg'+'et'],this['depthRende'+'rTarget'],!(0x1503+-0x827*0x2+-0x4b4*0x1),!(0x1e6f+-0x1af*0xb+-0xbea));Q['popGpuMark'+'er'](_0x292262);}}class Uy{constructor(){h(this,'_gammaCorr'+'ection',Ec),h(this,'_toneMappi'+'ng',Mp),h(this,'_srgbRende'+'rTarget',!(-0x1e17+0x189*-0x5+0x25c5)),h(this,'_ssaoEnabl'+'ed',!(-0x232f+0x212e+0x202)),h(this,'_fog',Hn),h(this,'_sceneDept'+'hMapLinear',!(0x10fb+-0xecf+-0xf*0x25)),h(this,'_hash'),h(this,'_defines',new Map()),h(this,'_definesDi'+'rty',!(-0x49c+0x51*0x5d+0x1*-0x18d1));}get['hash'](){if(this['_hash']===void(-0xa38*-0x2+-0x62*-0x53+0x2*-0x1a1b)){const _0x5d073e=this['gammaCorre'+'ction']+'_'+this['toneMappin'+'g']+'_'+this['srgbRender'+'Target']+'_'+this['fog']+'_'+this['ssaoEnable'+'d']+'_'+this['sceneDepth'+'MapLinear'];this['_hash']=hi(_0x5d073e);}return this['_hash'];}get['defines'](){const _0x4d4aed=this['_defines'];return this['_definesDi'+'rty']&&(this['_definesDi'+'rty']=!(-0x1721+0x1b29+-0x407),_0x4d4aed['clear'](),this['_sceneDept'+'hMapLinear']&&_0x4d4aed['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',!(-0x12b*0x4+-0x270f+0x2bbb*0x1)),_0x4d4aed['set']('FOG',this['_fog']['toUpperCas'+'e']()),_0x4d4aed['set']('TONEMAP',by[this['_toneMappi'+'ng']]),_0x4d4aed['set']('GAMMA',ow[this['shaderOutp'+'utGamma']])),_0x4d4aed;}['markDirty'](){this['_hash']=void(0x1c4c+-0xf*0x11b+0xbb7*-0x1),this['_definesDi'+'rty']=!(0x1*-0x1ac7+0x2499+0x346*-0x3);}set['fog'](_0x24c889){this['_fog']!==_0x24c889&&(this['_fog']=_0x24c889,this['markDirty']());}get['fog'](){return this['_fog'];}set['ssaoEnable'+'d'](_0x383898){this['_ssaoEnabl'+'ed']!==_0x383898&&(this['_ssaoEnabl'+'ed']=_0x383898,this['markDirty']());}get['ssaoEnable'+'d'](){return this['_ssaoEnabl'+'ed'];}set['gammaCorre'+'ction'](_0x3469d4){this['_gammaCorr'+'ectionAssi'+'gned']=!(0x1a67+-0x1d22+0x3*0xe9),this['_gammaCorr'+'ection']!==_0x3469d4&&(this['_gammaCorr'+'ection']=_0x3469d4,this['markDirty']());}get['gammaCorre'+'ction'](){return this['_gammaCorr'+'ection'];}set['toneMappin'+'g'](_0x1b263e){this['_toneMappi'+'ng']!==_0x1b263e&&(this['_toneMappi'+'ng']=_0x1b263e,this['markDirty']());}get['toneMappin'+'g'](){return this['_toneMappi'+'ng'];}set['srgbRender'+'Target'](_0x15b4ff){this['_srgbRende'+'rTarget']!==_0x15b4ff&&(this['_srgbRende'+'rTarget']=_0x15b4ff,this['markDirty']());}get['srgbRender'+'Target'](){return this['_srgbRende'+'rTarget'];}set['sceneDepth'+'MapLinear'](_0x184728){this['_sceneDept'+'hMapLinear']!==_0x184728&&(this['_sceneDept'+'hMapLinear']=_0x184728,this['markDirty']());}get['sceneDepth'+'MapLinear'](){return this['_sceneDept'+'hMapLinear'];}get['shaderOutp'+'utGamma'](){return this['_gammaCorr'+'ection']===Ec&&!this['_srgbRende'+'rTarget']?Ec:yl;}}const Ca=new D(),Qn=new D(),t_=new D(),s_=new te(),Qw=[new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D()];class Tl{constructor(){h(this,'shaderPass'+'Info',null),h(this,'renderPass'+'ColorGrab',null),h(this,'renderPass'+'DepthGrab',null),h(this,'fogParams',null),h(this,'shaderPara'+'ms',new Uy()),h(this,'renderPass'+'es',[]),h(this,'jitter',0x21fb+0x4*-0x283+-0x17ef),(this['_aspectRat'+'io']=(0x1*-0x1223+-0x12b1+0x2*0x1272)/(0x89b+0x1c67*0x1+-0xc53*0x3),this['_aspectRat'+'ioMode']=kp,this['_calculate'+'Projection']=null,this['_calculate'+'Transform']=null,this['_clearColo'+'r']=new ie(-0x557*-0x2+0xe30*0x2+0x2*-0x1387+0.75,-0x260f+-0x95f*0x2+0x12ef*0x3+0.75,-0x1a48+-0xeeb+0x2933+0.75,0x100c*-0x1+-0x1a53*-0x1+0xa*-0x107),this['_clearColo'+'rBuffer']=!(0x4f7+-0x1071+-0xe2*-0xd),this['_clearDept'+'h']=0x659+-0x5*0x621+0x184d,this['_clearDept'+'hBuffer']=!(-0x5*-0x685+0x2610+0x46a9*-0x1),this['_clearSten'+'cil']=0x6db+-0x2459+0x1d7e,this['_clearSten'+'cilBuffer']=!(0x1*0x21d3+-0x19ae+-0x825),this['_cullFaces']=!(-0x139*-0x15+-0x255f+-0xbb2*-0x1),this['_farClip']=0x67*0x26+0x248d+0x6d9*-0x7,this['_flipFaces']=!(0x3d1*0x1+-0x255a+0x218a),this['_fov']=0x201+-0x1*0x62e+0x2*0x22d,this['_frustumCu'+'lling']=!(-0x8a*-0x1c+-0x1*-0x1a6e+-0x2986),this['_horizonta'+'lFov']=!(-0x40f*-0x7+0xab*0x1b+0x2e71*-0x1),this['_layers']=[Ji,ps,wp,Sl,Ep],this['_layersSet']=new Set(this['_layers']),this['_nearClip']=0x2*0xb9b+-0x4f9+-0x7*0x29b+0.1,this['_node']=null,this['_orthoHeig'+'ht']=-0x1f0+0x1*-0x14bd+0x16b7,this['_projectio'+'n']=ni,this['_rect']=new re(-0x1501*-0x1+0x166d*0x1+0x22*-0x147,-0x1ba3+0x1*-0x24d2+0x4075,0x17f*0x3+-0x1eaf+-0x1*-0x1a33,-0x14fc+0x215a+-0xf*0xd3),this['_renderTar'+'get']=null,this['_scissorRe'+'ct']=new re(0x674*-0x1+0x1*0x2611+-0x1f9d,-0xed1*0x1+0xac5+0x40c,0x2257*0x1+0x10*-0x1fd+0x11*-0x26,0x1*-0x1a79+0x2*0xb89+0x6d*0x8),this['_scissorRe'+'ctClear']=!(0x19da+-0x750+-0x49*0x41),this['_aperture']=0x1*0x185f+0x7*-0x323+-0x25a,this['_shutter']=(-0x42+0x1027+0x24*-0x71)/(-0x75*0x4+0x7*0x481+-0x19cb),this['_sensitivi'+'ty']=-0x6*0x605+0x1edd+-0x14f*-0x7,this['_projMat']=new te(),this['_projMatDi'+'rty']=!(0x231*-0x7+0x1d0e*-0x1+-0x8e1*-0x5),this['_projMatSk'+'ybox']=new te(),this['_viewMat']=new te(),this['_viewMatDi'+'rty']=!(0x9*-0x21b+-0x1ba7+0x2e9a),this['_viewProjM'+'at']=new te(),this['_viewProjM'+'atDirty']=!(-0x1*0x18cc+0x1*0x3d9+-0x1f*-0xad),this['_shaderMat'+'ricesVersi'+'on']=0x1c8b*0x1+0xac7+-0x2*0x13a9,this['_viewProjI'+'nverse']=new te(),this['_viewProjC'+'urrent']=null,this['_viewProjP'+'revious']=new te(),this['_jitters']=[0x1689+-0x97*-0x1+-0x25*0xa0,0xc4f+-0xe*-0x23b+-0x2b89,-0x5*-0x4a9+0x1923+-0x3070,-0x14f*0x2+-0x227*0x4+0xb3a],this['frustum']=new k0(),this['_xr']=null,this['_xrPropert'+'ies']={'horizontalFov':this['_horizonta'+'lFov'],'fov':this['_fov'],'aspectRatio':this['_aspectRat'+'io'],'farClip':this['_farClip'],'nearClip':this['_nearClip']});}['destroy'](){var _0x1fd94e,_0x7ed501;(_0x1fd94e=this['renderPass'+'ColorGrab'])==null||_0x1fd94e['destroy'](),this['renderPass'+'ColorGrab']=null,(_0x7ed501=this['renderPass'+'DepthGrab'])==null||_0x7ed501['destroy'](),this['renderPass'+'DepthGrab']=null,this['renderPass'+'es']['length']=-0xcd0+-0x560+-0x610*-0x3;}['_storeShad'+'erMatrices'](_0x532110,_0x452a08,_0x4f9595,_0x111cd3){this['_shaderMat'+'ricesVersi'+'on']!==_0x111cd3&&(this['_shaderMat'+'ricesVersi'+'on']=_0x111cd3,this['_viewProjP'+'revious']['copy'](this['_viewProjC'+'urrent']??_0x532110),this['_viewProjC'+'urrent']??(this['_viewProjC'+'urrent']=new te()),this['_viewProjC'+'urrent']['copy'](_0x532110),this['_viewProjI'+'nverse']['invert'](_0x532110),this['_jitters'][0x1914+0x23*0x7f+-0x2a6f]=this['_jitters'][0x25a+0x209*-0x13+0x2451],this['_jitters'][0x91*-0x2e+-0x1*0x64e+-0x1*-0x205f]=this['_jitters'][0x588+0xec+-0x1*0x673],this['_jitters'][-0x16*-0xf1+0x2a*0x31+-0x2e*0xa0]=_0x452a08,this['_jitters'][0x1281+0x14b5+-0x2735]=_0x4f9595);}get['fullSizeCl'+'earRect'](){const _0x12c9c6=this['_scissorRe'+'ctClear']?this['scissorRec'+'t']:this['_rect'];return _0x12c9c6['x']===0x24a1*0x1+-0x2520*0x1+0x7f&&_0x12c9c6['y']===-0x47+0xfe3*0x1+-0x6f*0x24&&_0x12c9c6['z']===-0x1c30+0x259d*0x1+-0x96c&&_0x12c9c6['w']===0x74*0x12+-0xac*0x8+-0x2c7*0x1;}set['aspectRati'+'o'](_0x2e82b4){this['_aspectRat'+'io']!==_0x2e82b4&&(this['_aspectRat'+'io']=_0x2e82b4,this['_projMatDi'+'rty']=!(0x4*0x131+-0x1d*-0x149+-0x2a09));}get['aspectRati'+'o'](){var _0x23f82e;return(_0x23f82e=this['xr'])!=null&&_0x23f82e['active']?this['_xrPropert'+'ies']['aspectRati'+'o']:this['_aspectRat'+'io'];}set['aspectRati'+'oMode'](_0x18ab36){this['_aspectRat'+'ioMode']!==_0x18ab36&&(this['_aspectRat'+'ioMode']=_0x18ab36,this['_projMatDi'+'rty']=!(0x1*0x224d+-0xdb5+-0x1498*0x1));}get['aspectRati'+'oMode'](){return this['_aspectRat'+'ioMode'];}set['calculateP'+'rojection'](_0x35cb77){this['_calculate'+'Projection']=_0x35cb77,this['_projMatDi'+'rty']=!(-0x15ff+-0x2*0x7e5+0x25c9*0x1);}get['calculateP'+'rojection'](){return this['_calculate'+'Projection'];}set['calculateT'+'ransform'](_0x2e62c4){this['_calculate'+'Transform']=_0x2e62c4;}get['calculateT'+'ransform'](){return this['_calculate'+'Transform'];}set['clearColor'](_0x5bd6de){this['_clearColo'+'r']['copy'](_0x5bd6de);}get['clearColor'](){return this['_clearColo'+'r'];}set['clearColor'+'Buffer'](_0x26e58b){this['_clearColo'+'rBuffer']=_0x26e58b;}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'](_0xcaabe0){this['_clearDept'+'h']=_0xcaabe0;}get['clearDepth'](){return this['_clearDept'+'h'];}set['clearDepth'+'Buffer'](_0x3f96af){this['_clearDept'+'hBuffer']=_0x3f96af;}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'il'](_0x52c5c1){this['_clearSten'+'cil']=_0x52c5c1;}get['clearStenc'+'il'](){return this['_clearSten'+'cil'];}set['clearStenc'+'ilBuffer'](_0x427067){this['_clearSten'+'cilBuffer']=_0x427067;}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}set['cullFaces'](_0x54ee46){this['_cullFaces']=_0x54ee46;}get['cullFaces'](){return this['_cullFaces'];}set['farClip'](_0x365a3c){this['_farClip']!==_0x365a3c&&(this['_farClip']=_0x365a3c,this['_projMatDi'+'rty']=!(0x122*0x16+-0x93*-0x9+-0x1e17*0x1));}get['farClip'](){var _0x3251a0;return(_0x3251a0=this['xr'])!=null&&_0x3251a0['active']?this['_xrPropert'+'ies']['farClip']:this['_farClip'];}set['flipFaces'](_0x2ed6dc){this['_flipFaces']=_0x2ed6dc;}get['flipFaces'](){return this['_flipFaces'];}set['fov'](_0x3e69e2){this['_fov']!==_0x3e69e2&&(this['_fov']=_0x3e69e2,this['_projMatDi'+'rty']=!(0x884+-0x2d0+0x49*-0x14));}get['fov'](){var _0x142ec5;return(_0x142ec5=this['xr'])!=null&&_0x142ec5['active']?this['_xrPropert'+'ies']['fov']:this['_fov'];}set['frustumCul'+'ling'](_0x5e252a){this['_frustumCu'+'lling']=_0x5e252a;}get['frustumCul'+'ling'](){return this['_frustumCu'+'lling'];}set['horizontal'+'Fov'](_0x4ceeac){this['_horizonta'+'lFov']!==_0x4ceeac&&(this['_horizonta'+'lFov']=_0x4ceeac,this['_projMatDi'+'rty']=!(0x1c94+-0x25a9+-0xf*-0x9b));}get['horizontal'+'Fov'](){var _0x21cf18;return(_0x21cf18=this['xr'])!=null&&_0x21cf18['active']?this['_xrPropert'+'ies']['horizontal'+'Fov']:this['_horizonta'+'lFov'];}set['layers'](_0xf97704){this['_layers']=_0xf97704['slice'](0x3*0x471+0x14*0x28+-0x1073),this['_layersSet']=new Set(this['_layers']);}get['layers'](){return this['_layers'];}get['layersSet'](){return this['_layersSet'];}set['nearClip'](_0x351478){this['_nearClip']!==_0x351478&&(this['_nearClip']=_0x351478,this['_projMatDi'+'rty']=!(0x176*-0x2+-0x52d+-0x2b3*-0x3));}get['nearClip'](){var _0x1c8502;return(_0x1c8502=this['xr'])!=null&&_0x1c8502['active']?this['_xrPropert'+'ies']['nearClip']:this['_nearClip'];}set['node'](_0x546b9b){this['_node']=_0x546b9b;}get['node'](){return this['_node'];}set['orthoHeigh'+'t'](_0x3bc1b0){this['_orthoHeig'+'ht']!==_0x3bc1b0&&(this['_orthoHeig'+'ht']=_0x3bc1b0,this['_projMatDi'+'rty']=!(-0x1*-0x314+0x1701+-0x1a15));}get['orthoHeigh'+'t'](){return this['_orthoHeig'+'ht'];}set['projection'](_0x5a9b0f){this['_projectio'+'n']!==_0x5a9b0f&&(this['_projectio'+'n']=_0x5a9b0f,this['_projMatDi'+'rty']=!(0x1600+0x4b2*0x2+-0x23e*0xe));}get['projection'](){return this['_projectio'+'n'];}get['projection'+'Matrix'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMat'];}set['rect'](_0xc713ca){this['_rect']['copy'](_0xc713ca);}get['rect'](){return this['_rect'];}set['renderTarg'+'et'](_0x10d632){this['_renderTar'+'get']=_0x10d632;}get['renderTarg'+'et'](){return this['_renderTar'+'get'];}set['scissorRec'+'t'](_0x45a268){this['_scissorRe'+'ct']['copy'](_0x45a268);}get['scissorRec'+'t'](){return this['_scissorRe'+'ct'];}get['viewMatrix'](){if(this['_viewMatDi'+'rty']){const _0x1f0b29=this['_node']['getWorldTr'+'ansform']();this['_viewMat']['copy'](_0x1f0b29)['invert'](),this['_viewMatDi'+'rty']=!(0x268+0x1c4a+-0x1eb1*0x1);}return this['_viewMat'];}set['aperture'](_0x1685ef){this['_aperture']=_0x1685ef;}get['aperture'](){return this['_aperture'];}set['sensitivit'+'y'](_0x449cf5){this['_sensitivi'+'ty']=_0x449cf5;}get['sensitivit'+'y'](){return this['_sensitivi'+'ty'];}set['shutter'](_0x30d0cd){this['_shutter']=_0x30d0cd;}get['shutter'](){return this['_shutter'];}set['xr'](_0x4c4985){this['_xr']!==_0x4c4985&&(this['_xr']=_0x4c4985,this['_projMatDi'+'rty']=!(0x1*-0xbdd+0xc2f+0x29*-0x2));}get['xr'](){return this['_xr'];}['clone'](){return new Tl()['copy'](this);}['copy'](_0x44df4b){return this['_aspectRat'+'io']=_0x44df4b['_aspectRat'+'io'],this['_farClip']=_0x44df4b['_farClip'],this['_fov']=_0x44df4b['_fov'],this['_horizonta'+'lFov']=_0x44df4b['_horizonta'+'lFov'],this['_nearClip']=_0x44df4b['_nearClip'],this['_xrPropert'+'ies']['aspectRati'+'o']=_0x44df4b['_xrPropert'+'ies']['aspectRati'+'o'],this['_xrPropert'+'ies']['farClip']=_0x44df4b['_xrPropert'+'ies']['farClip'],this['_xrPropert'+'ies']['fov']=_0x44df4b['_xrPropert'+'ies']['fov'],this['_xrPropert'+'ies']['horizontal'+'Fov']=_0x44df4b['_xrPropert'+'ies']['horizontal'+'Fov'],this['_xrPropert'+'ies']['nearClip']=_0x44df4b['_xrPropert'+'ies']['nearClip'],this['aspectRati'+'oMode']=_0x44df4b['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x44df4b['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x44df4b['calculateT'+'ransform'],this['clearColor']=_0x44df4b['clearColor'],this['clearColor'+'Buffer']=_0x44df4b['clearColor'+'Buffer'],this['clearDepth']=_0x44df4b['clearDepth'],this['clearDepth'+'Buffer']=_0x44df4b['clearDepth'+'Buffer'],this['clearStenc'+'il']=_0x44df4b['clearStenc'+'il'],this['clearStenc'+'ilBuffer']=_0x44df4b['clearStenc'+'ilBuffer'],this['cullFaces']=_0x44df4b['cullFaces'],this['flipFaces']=_0x44df4b['flipFaces'],this['frustumCul'+'ling']=_0x44df4b['frustumCul'+'ling'],this['layers']=_0x44df4b['layers'],this['orthoHeigh'+'t']=_0x44df4b['orthoHeigh'+'t'],this['projection']=_0x44df4b['projection'],this['rect']=_0x44df4b['rect'],this['renderTarg'+'et']=_0x44df4b['renderTarg'+'et'],this['scissorRec'+'t']=_0x44df4b['scissorRec'+'t'],this['aperture']=_0x44df4b['aperture'],this['shutter']=_0x44df4b['shutter'],this['sensitivit'+'y']=_0x44df4b['sensitivit'+'y'],this['shaderPass'+'Info']=_0x44df4b['shaderPass'+'Info'],this['jitter']=_0x44df4b['jitter'],this['_projMatDi'+'rty']=!(-0x5c+-0x1179*0x1+-0x1*-0x11d5),this;}['_enableRen'+'derPassCol'+'orGrab'](_0x384203,_0x497611){var _0x5aad81;_0x497611?this['renderPass'+'ColorGrab']||(this['renderPass'+'ColorGrab']=new Kw(_0x384203)):((_0x5aad81=this['renderPass'+'ColorGrab'])==null||_0x5aad81['destroy'](),this['renderPass'+'ColorGrab']=null);}['_enableRen'+'derPassDep'+'thGrab'](_0x37ec56,_0x51d608,_0x482876){var _0xff5e5d;_0x482876?this['renderPass'+'DepthGrab']||(this['renderPass'+'DepthGrab']=new Zw(_0x37ec56,this)):((_0xff5e5d=this['renderPass'+'DepthGrab'])==null||_0xff5e5d['destroy'](),this['renderPass'+'DepthGrab']=null);}['_updateVie'+'wProjMat'](){(this['_projMatDi'+'rty']||this['_viewMatDi'+'rty']||this['_viewProjM'+'atDirty'])&&(this['_viewProjM'+'at']['mul2'](this['projection'+'Matrix'],this['viewMatrix']),this['_viewProjM'+'atDirty']=!(0x2253+-0xe7e+-0x13d4));}['worldToScr'+'een'](_0x5d974d,_0x36067a,_0x3a4019,_0x47b796=new D()){this['_updateVie'+'wProjMat'](),this['_viewProjM'+'at']['transformP'+'oint'](_0x5d974d,_0x47b796);const _0x25bfe5=this['_viewProjM'+'at']['data'],_0x1904aa=_0x5d974d['x']*_0x25bfe5[0x3b*-0x1b+-0x3*0x695+-0x2e3*-0x9]+_0x5d974d['y']*_0x25bfe5[0x1*-0x11+0x1bb*0x16+-0x25fa*0x1]+_0x5d974d['z']*_0x25bfe5[-0x708+-0x1486+0x1b99]+(0x14a0+-0x5*0x392+0x2c5*-0x1)*_0x25bfe5[0x2508+-0x1*0x2281+0x9e*-0x4];_0x47b796['x']=(_0x47b796['x']/_0x1904aa+(0xf8*-0x4+-0x1550+0x1931))*(0x1e29+0x265*0x8+-0x65*0x7d+0.5),_0x47b796['y']=(-0x1ff8+-0x1027+0x3020-_0x47b796['y']/_0x1904aa)*(0x2cf*-0x9+0x9e*0xb+0x127d+0.5);const {x:_0x2c77a7,y:_0x20ee02,z:_0xc22d43,w:_0x55a92e}=this['_rect'];return _0x47b796['x']=_0x47b796['x']*_0xc22d43*_0x36067a+_0x2c77a7*_0x36067a,_0x47b796['y']=_0x47b796['y']*_0x55a92e*_0x3a4019+(-0x1d91+-0x472+0x2204-_0x20ee02-_0x55a92e)*_0x3a4019,_0x47b796;}['screenToWo'+'rld'](_0x470a69,_0x27a4f6,_0x1ae889,_0x37812f,_0x59cd6b,_0x2e4af4=new D()){const {x:_0x25b3fe,y:_0xd1964b,z:_0x2df5a8,w:_0x3e3436}=this['_rect'],_0x59af26=this['farClip']-this['nearClip'];if(Ca['set']((_0x470a69-_0x25b3fe*_0x37812f)/(_0x2df5a8*_0x37812f),0x4*-0x6bf+0x1807*-0x1+0x3304-(_0x27a4f6-(-0x716+0x1d97+-0x1680-_0xd1964b-_0x3e3436)*_0x59cd6b)/(_0x3e3436*_0x59cd6b),_0x1ae889/_0x59af26),Ca['mulScalar'](0x41b*0x1+0x5fd+-0x2*0x50b),Ca['sub'](D['ONE']),this['_projectio'+'n']===ni){te['_getPerspe'+'ctiveHalfS'+'ize'](Qn,this['fov'],this['aspectRati'+'o'],this['nearClip'],this['horizontal'+'Fov']),Qn['x']*=Ca['x'],Qn['y']*=Ca['y'];const _0x3a7e66=this['_node']['getWorldTr'+'ansform']();Qn['z']=-this['nearClip'],_0x3a7e66['transformP'+'oint'](Qn,t_);const _0x7476b8=this['_node']['getPositio'+'n']();_0x2e4af4['sub2'](t_,_0x7476b8),_0x2e4af4['normalize'](),_0x2e4af4['mulScalar'](_0x1ae889),_0x2e4af4['add'](_0x7476b8);}else this['_updateVie'+'wProjMat'](),s_['copy'](this['_viewProjM'+'at'])['invert'](),s_['transformP'+'oint'](Ca,_0x2e4af4);return _0x2e4af4;}['_evaluateP'+'rojectionM'+'atrix'](){if(this['_projMatDi'+'rty']){if(this['_projectio'+'n']===ni)this['_projMat']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip'],this['horizontal'+'Fov']),this['_projMatSk'+'ybox']['copy'](this['_projMat']);else{const _0x32d3d9=this['_orthoHeig'+'ht'],_0x497f84=_0x32d3d9*this['aspectRati'+'o'];this['_projMat']['setOrtho'](-_0x497f84,_0x497f84,-_0x32d3d9,_0x32d3d9,this['nearClip'],this['farClip']),this['_projMatSk'+'ybox']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip']);}this['_projMatDi'+'rty']=!(-0x1e8a+-0xb11+0x299c);}}['getProject'+'ionMatrixS'+'kybox'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMatSk'+'ybox'];}['getExposur'+'e'](){const _0x41e994=Math['log2'](this['_aperture']*this['_aperture']/this['_shutter']*(-0x26c0+0xb*0x6b+0x228b)/this['_sensitivi'+'ty']);return(-0x228e+0x6a2+0x3*0x94f)/(Math['pow'](-0x128f+-0x185f+0x2af0,_0x41e994)*(0x277*-0x5+-0xed6+0x1b2a+0.19999999999999996));}['getScreenS'+'ize'](_0x55dbb4){if(this['_projectio'+'n']===ni){const _0x3f1f6d=this['_node']['getPositio'+'n']()['distance'](_0x55dbb4['center']);if(_0x3f1f6d<_0x55dbb4['radius'])return-0x1e*0x141+-0x434+-0x29d3*-0x1;const _0x5825ff=Math['asin'](_0x55dbb4['radius']/_0x3f1f6d),_0x1d9f27=Math['tan'](_0x5825ff),_0x306ba9=Math['tan'](this['fov']/(0xa9e+0x6a*0x12+-0x1210)*Y['DEG_TO_RAD']);return Math['min'](_0x1d9f27/_0x306ba9,0x15f+-0x23cd+0x29*0xd7);}return Y['clamp'](_0x55dbb4['radius']/this['_orthoHeig'+'ht'],-0xaa1*-0x2+-0xc5*-0x8+-0x2*0xdb5,0x1512+0x1*0x70c+-0x1c1d);}['getFrustum'+'Corners'](_0x431471=this['nearClip'],_0xb97786=this['farClip']){const _0x56b890=this['fov']*Math['PI']/(0x43d+0x11e9*0x2+0x5*-0x7df);let _0x20be6e,_0x49a951;this['projection']===ni?this['horizontal'+'Fov']?(_0x20be6e=_0x431471*Math['tan'](_0x56b890/(-0x65f+-0x11*-0x1eb+-0x1a3a)),_0x49a951=_0x20be6e/this['aspectRati'+'o']):(_0x49a951=_0x431471*Math['tan'](_0x56b890/(-0x39c+-0x1896*0x1+0x1c34)),_0x20be6e=_0x49a951*this['aspectRati'+'o']):(_0x49a951=this['_orthoHeig'+'ht'],_0x20be6e=_0x49a951*this['aspectRati'+'o']);const _0x599970=Qw;return _0x599970[0xa06+0x3*-0x2bd+0x1*-0x1cf]['x']=_0x20be6e,_0x599970[0x1*0xa3d+0x1*-0x20b9+0x167c]['y']=-_0x49a951,_0x599970[0x1246+0x2aa+-0x43*0x50]['z']=-_0x431471,_0x599970[-0x17*-0x2c+-0x257*0x7+0x56*0x25]['x']=_0x20be6e,_0x599970[-0x1*0x1036+0x160a+-0x5d3]['y']=_0x49a951,_0x599970[0x4cf*0x7+0x110f+-0x32b7]['z']=-_0x431471,_0x599970[0x786+-0xa*-0x3d3+0x2*-0x16e1]['x']=-_0x20be6e,_0x599970[-0x1*-0x102f+0x1fc9*-0x1+0xf9c]['y']=_0x49a951,_0x599970[0x1*0x1b1+0x3d*-0x39+0xbe6]['z']=-_0x431471,_0x599970[-0x1*0x1bbf+-0x3*-0x9e9+-0x1*0x1f9]['x']=-_0x20be6e,_0x599970[-0x3*0x26f+-0xbd9+0x1329]['y']=-_0x49a951,_0x599970[-0x2097+-0x1*-0x1256+-0x722*-0x2]['z']=-_0x431471,this['_projectio'+'n']===ni&&(this['horizontal'+'Fov']?(_0x20be6e=_0xb97786*Math['tan'](_0x56b890/(0x16a7*-0x1+-0x1de0+0x3489)),_0x49a951=_0x20be6e/this['aspectRati'+'o']):(_0x49a951=_0xb97786*Math['tan'](_0x56b890/(0x14*-0x1c9+0x1*0x1b51+0x865*0x1)),_0x20be6e=_0x49a951*this['aspectRati'+'o'])),_0x599970[-0x38+-0x1ae4+0x1b20]['x']=_0x20be6e,_0x599970[0x11*0x10f+-0x14*0xb+-0x111f]['y']=-_0x49a951,_0x599970[-0x222b+-0x54f*0x1+0x277e]['z']=-_0xb97786,_0x599970[-0xd3c+0x37b*0x2+0x219*0x3]['x']=_0x20be6e,_0x599970[0x12c4+-0x1d95*0x1+0xad6]['y']=_0x49a951,_0x599970[-0x29*0x7a+-0x24f1+0x710*0x8]['z']=-_0xb97786,_0x599970[-0xb0b+0x213b+-0x1*0x162a]['x']=-_0x20be6e,_0x599970[-0xbf*-0x2f+-0x14*0x2c+-0x1f9b]['y']=_0x49a951,_0x599970[0x1701*-0x1+-0x86*0x24+0x29df]['z']=-_0xb97786,_0x599970[0x1844+0x912+-0x214f]['x']=-_0x20be6e,_0x599970[-0x2053+0xd9*-0x1f+0x3aa1]['y']=-_0x49a951,_0x599970[0x1712+0xeb5+-0x4b8*0x8]['z']=-_0xb97786,_0x599970;}['setXrPrope'+'rties'](_0x428e66){Object['assign'](this['_xrPropert'+'ies'],_0x428e66),this['_projMatDi'+'rty']=!(-0x1c21*0x1+0x2*0xc31+0x3bf);}}const i_=new te(),r_=new te(),a_=new te(),ur=class ur{static['create'](_0x1a0910,_0x2fe556,_0x1f3999){const _0x2e8ca3=new Tl();switch(_0x2e8ca3['node']=new Ie(_0x1a0910),_0x2e8ca3['aspectRati'+'o']=0xe9*-0x7+0xfbb*0x1+-0x95b,_0x2e8ca3['aspectRati'+'oMode']=Nf,_0x2e8ca3['_scissorRe'+'ctClear']=!(-0x29*-0x2f+-0x8c*0x46+-0x1*-0x1ec1),_0x2fe556){case Ke:_0x2e8ca3['node']['setRotatio'+'n'](ur['pointLight'+'Rotations'][_0x1f3999]),_0x2e8ca3['fov']=0x2*0xc86+0x2*-0xc61+0x10,_0x2e8ca3['projection']=ni;break;case Ze:_0x2e8ca3['projection']=ni;break;case ve:_0x2e8ca3['projection']=gn;break;}return _0x2e8ca3;}static['evalSpotCo'+'okieMatrix'](_0x47f682){let _0x224492=ur['_spotCooki'+'eCamera'];_0x224492||(_0x224492=ur['create']('SpotCookie'+'Camera',Ze),ur['_spotCooki'+'eCamera']=_0x224492),_0x224492['fov']=_0x47f682['_outerCone'+'Angle']*(0x35*-0x15+0x2*-0xedd+0x2215);const _0x3baef9=_0x224492['_node'];_0x3baef9['setPositio'+'n'](_0x47f682['_node']['getPositio'+'n']()),_0x3baef9['setRotatio'+'n'](_0x47f682['_node']['getRotatio'+'n']()),_0x3baef9['rotateLoca'+'l'](-(-0x1765+-0x16b7+0x2e76),0x394*-0x9+0xb9f+0x1495,0xd0d+0x440+0x2b*-0x67),i_['setTRS'](_0x3baef9['getPositio'+'n'](),_0x3baef9['getRotatio'+'n'](),D['ONE'])['invert'](),r_['mul2'](_0x224492['projection'+'Matrix'],i_);const _0x39129e=_0x47f682['cookieMatr'+'ix'],_0x2ff04c=_0x47f682['atlasViewp'+'ort'];return a_['setViewpor'+'t'](_0x2ff04c['x'],_0x2ff04c['y'],_0x2ff04c['z'],_0x2ff04c['w']),_0x39129e['mul2'](a_,r_),_0x39129e;}};h(ur,'pointLight'+'Rotations',[new le()['setFromEul'+'erAngles'](-0x1*0x2372+0xe*0x227+0x88*0xa,-0x8*0x4d1+-0x2647*-0x1+-0x5*-0x1f,-0x209*0x5+-0x2f*0x99+-0x137c*-0x2),new le()['setFromEul'+'erAngles'](-0x97a+0x19b9+-0x103f,-(0x26dc+0x2283+-0x4905),-0x1*0x137b+-0x181b+0x2c4a),new le()['setFromEul'+'erAngles'](0x11e3+0x11eb+-0x2374,0xa96+-0x15ca*-0x1+-0x2060,-0x3*0xae7+0x8d6+0x17df),new le()['setFromEul'+'erAngles'](-(-0x3a*0x91+-0x19bf+0x3af3),-0x2*-0xb33+0x1*-0xec1+-0x7a5,-0xf9b+-0x1a79+-0x1*-0x2a14),new le()['setFromEul'+'erAngles'](-0x4*-0x290+-0x1d4a+0x2*0x985,0xd0*-0x21+-0x1*0xf8b+0x49*0x97,0x2*0x5c1+0x23b4+-0x2e82),new le()['setFromEul'+'erAngles'](0x1*0x827+-0x5*-0xa+-0x1*0x859,0x1678+-0x5*0x6c5+0xb61,0x18ae+-0x464+-0x1396)]),h(ur,'_spotCooki'+'eCamera',null);let kn=ur;const vs=new D(),Dr=new Float32Array(0x11e*0x1+-0x2217+0x20ff),Jw=new D(-(0x266f*-0x1+-0x1be7+0x4256+0.5),-0x4*0x4cf+-0x21a0+0x34dc,0x67*0xa+-0x2*-0x90d+-0x1620),eE=new D(-0x2336+-0x495*0x7+0x4349,-0xa8b+-0x1bac+0x2637*0x1,0x263*0x7+-0x5f8+0x1*-0xabd+0.5),at={'POSITION_RANGE':0x0,'DIRECTION_FLAGS':0x1,'COLOR_ANGLES_BIAS':0x2,'PROJ_MAT_0':0x3,'ATLAS_VIEWPORT':0x3,'PROJ_MAT_1':0x4,'PROJ_MAT_2':0x5,'PROJ_MAT_3':0x6,'AREA_DATA_WIDTH':0x7,'AREA_DATA_HEIGHT':0x8,'COUNT':0x9},tE={'LIGHTSHAPE_PUNCTUAL':js+'u','LIGHTSHAPE_RECT':my+'u','LIGHTSHAPE_DISK':_y+'u','LIGHTSHAPE_SPHERE':gy+'u','LIGHT_COLOR_DIVIDER':wc+'.0'},n_=(_0x13fede,_0xa1ed)=>Object['keys'](_0x13fede)['map'](_0x75fff1=>'#define\x20{'+_0xa1ed+_0x75fff1+'}\x20'+_0x13fede[_0x75fff1])['join']('\x0a'),o_='\x0a\x0a\x20\x20\x20\x20'+n_(at,'CLUSTER_TE'+'XTURE_')+'\x0a\x20\x20\x20\x20'+n_(tE,'')+'\x0a';class sE{constructor(_0x121736){h(this,'areaLights'+'Enabled',!(0x1729+-0xdc5+-0x963)),(this['device']=_0x121736,Ce['get'](_0x121736,Fe)['set']('lightBuffe'+'rDefinesPS',o_),Ce['get'](_0x121736,it)['set']('lightBuffe'+'rDefinesPS',o_),this['cookiesEna'+'bled']=!(0xfc0+-0x13*0xe9+0x18c),this['shadowsEna'+'bled']=!(0x1*0x2053+-0x7e0+-0x12a*0x15),this['areaLights'+'Enabled']=!(0xc45+0x37+-0xc7b*0x1),this['maxLights']=-0x4*0x959+-0x9e4+-0x1*-0x3047);const _0x2f94f1=at['COUNT'];this['lightsFloa'+'t']=new Float32Array((-0x1*-0x200b+-0x656+-0x19b1)*_0x2f94f1*this['maxLights']),this['lightsUint']=new Uint32Array(this['lightsFloa'+'t']['buffer']),this['lightsText'+'ure']=this['createText'+'ure'](this['device'],_0x2f94f1,this['maxLights'],Xt,'LightsText'+'ure'),this['_lightsTex'+'tureId']=this['device']['scope']['resolve']('lightsText'+'ure'),this['invMaxColo'+'rValue']=-0x13ab+-0x189b+0x2c46,this['invMaxAtte'+'nuation']=-0x4*0x2e9+0x1343+-0x79f,this['boundsMin']=new D(),this['boundsDelt'+'a']=new D();}['destroy'](){var _0x113b21;(_0x113b21=this['lightsText'+'ure'])==null||_0x113b21['destroy'](),this['lightsText'+'ure']=null;}['createText'+'ure'](_0x35864e,_0x3bab5d,_0x59195e,_0x13dc63,_0x59cc06){return new _e(_0x35864e,{'name':_0x59cc06,'width':_0x3bab5d,'height':_0x59195e,'mipmaps':!(-0x1*-0x22b7+-0x3*0x274+-0x2*0xdad),'format':_0x13dc63,'addressU':ue,'addressV':ue,'type':Ms,'magFilter':Te,'minFilter':Te,'anisotropy':0x1});}['setBounds'](_0x184557,_0x51c45d){this['boundsMin']['copy'](_0x184557),this['boundsDelt'+'a']['copy'](_0x51c45d);}['uploadText'+'ures'](){this['lightsText'+'ure']['lock']()['set'](this['lightsFloa'+'t']),this['lightsText'+'ure']['unlock']();}['updateUnif'+'orms'](){this['_lightsTex'+'tureId']['setValue'](this['lightsText'+'ure']);}['getSpotDir'+'ection'](_0x3b8ed5,_0xfc0a02){_0xfc0a02['_node']['getWorldTr'+'ansform']()['getY'](_0x3b8ed5)['mulScalar'](-(-0x6*-0x641+-0x1d22+-0x13*0x71)),_0x3b8ed5['normalize']();}['getLightAr'+'eaSizes'](_0x286f02){const _0x2392d1=_0x286f02['_node']['getWorldTr'+'ansform']();return _0x2392d1['transformV'+'ector'](Jw,vs),Dr[0x80f+-0x2600+0x1df1]=vs['x'],Dr[0x263c+-0x11f6+-0x1445]=vs['y'],Dr[0x1895+-0x1*0x1f89+-0x1*-0x6f6]=vs['z'],_0x2392d1['transformV'+'ector'](eE,vs),Dr[-0xbba+0x16*0x43+0x5fb]=vs['x'],Dr[-0xe94+-0x1d*0xec+0x422*0xa]=vs['y'],Dr[-0xda2+-0xd73+0x2*0xd8d]=vs['z'],Dr;}['addLightDa'+'ta'](_0x464c10,_0x44b4c8){const _0xa7582d=_0x464c10['_type']===Ze,_0x46db47=_0x464c10['atlasViewp'+'ortAllocat'+'ed'],_0x417790=this['cookiesEna'+'bled']&&!!_0x464c10['_cookie']&&_0x46db47,_0x1a3c62=this['areaLights'+'Enabled']&&_0x464c10['shape']!==js,_0x2dba16=this['shadowsEna'+'bled']&&_0x464c10['castShadow'+'s']&&_0x46db47,_0x44bd61=_0x464c10['_node']['getPositio'+'n']();let _0x51ca8f=null,_0x126b1b=null;_0xa7582d?_0x2dba16?_0x51ca8f=_0x464c10['getRenderD'+'ata'](null,-0x1*-0x22fd+0x1*-0x19ab+-0x952*0x1)['shadowMatr'+'ix']:_0x417790&&(_0x51ca8f=kn['evalSpotCo'+'okieMatrix'](_0x464c10)):(_0x2dba16||_0x417790)&&(_0x126b1b=_0x464c10['atlasViewp'+'ort']);const _0x34843b=this['lightsFloa'+'t'],_0x2055d4=this['lightsUint'],_0x22b332=_0x44b4c8*this['lightsText'+'ure']['width']*(0x4ca*0x5+-0x26bb+0xecd);_0x34843b[_0x22b332+(0x1*-0x1d53+-0x31a*-0x3+-0x17*-0xdf)*at['POSITION_R'+'ANGE']+(-0xf05+-0x179a+0x269f)]=_0x44bd61['x'],_0x34843b[_0x22b332+(-0x2691*-0x1+-0x18d*-0x6+-0x1*0x2fdb)*at['POSITION_R'+'ANGE']+(-0x3*-0x43d+-0x1*-0x1a73+-0x2729)]=_0x44bd61['y'],_0x34843b[_0x22b332+(-0x2*-0x8cf+0x4*0x975+-0x16*0x285)*at['POSITION_R'+'ANGE']+(0xc6b*-0x1+0x22d+0xa40)]=_0x44bd61['z'],_0x34843b[_0x22b332+(-0x24ba*0x1+-0xda0+0x325e*0x1)*at['POSITION_R'+'ANGE']+(0x1*0x1a7b+-0x88a*0x1+-0x11ee)]=_0x464c10['attenuatio'+'nEnd'];const _0x4db268=_0x464c10['clusteredD'+'ata'];if(_0x2055d4[_0x22b332+(0x1d9f*-0x1+0x13db+0x9c8)*at['COLOR_ANGL'+'ES_BIAS']+(-0x1369+0xacd+0x89c)]=_0x4db268[0x4*-0x5ad+-0x1*0x6f6+0x1daa],_0x2055d4[_0x22b332+(0xb62+0xe06+0xd*-0x1f4)*at['COLOR_ANGL'+'ES_BIAS']+(-0x250d+-0xe4c+0x335a)]=_0x4db268[-0xd87*-0x1+-0x259f+0x1819],_0x2055d4[_0x22b332+(-0xb03+0xbef+-0xe8)*at['COLOR_ANGL'+'ES_BIAS']+(0x2330+-0x1e39+-0x4f5)]=_0x4db268[0x188c+0x1b8b+-0x3415],_0x464c10['castShadow'+'s']){const _0x1887ea=_0x464c10['getRenderD'+'ata'](null,0x13aa+0x15df+-0x2989),_0x2caed7=_0x464c10['_getUnifor'+'mBiasValue'+'s'](_0x1887ea),_0x40cfc7=Tn['float2Half'](_0x2caed7['bias']),_0x2b80ff=Tn['float2Half'](_0x2caed7['normalBias']);_0x2055d4[_0x22b332+(0x1796+-0x3d*0x12+-0x1348)*at['COLOR_ANGL'+'ES_BIAS']+(0x2dd+0x13f3+-0xd*0x1c1)]=_0x40cfc7|_0x2b80ff<<0x17*0xa8+-0xc0b+-0x2fd;}if(_0xa7582d&&(this['getSpotDir'+'ection'](vs,_0x464c10),_0x34843b[_0x22b332+(-0x151b+-0x9*0xc6+0x1c15)*at['DIRECTION_'+'FLAGS']+(-0x1*0x972+-0x65+-0xb*-0xe5)]=vs['x'],_0x34843b[_0x22b332+(0xea7+0x4*0x6d5+-0x29f7)*at['DIRECTION_'+'FLAGS']+(0x8ea*0x2+0x1*-0x2113+0x7a0*0x2)]=vs['y'],_0x34843b[_0x22b332+(-0x1ddf+0xa5c+-0x1387*-0x1)*at['DIRECTION_'+'FLAGS']+(0xa*-0x25+0x5*0x5ab+0x1*-0x1ae3)]=vs['z']),_0x2055d4[_0x22b332+(0xbf+-0x7a7*-0x1+-0x862)*at['DIRECTION_'+'FLAGS']+(-0x1*-0x62f+0x2440+-0x2a6c)]=_0x464c10['getCluster'+'edFlags'](_0x2dba16,_0x417790),_0x51ca8f){const _0x1f125b=_0x51ca8f['data'];for(let _0x2daabc=0x1f9c+-0x1076+0x793*-0x2;_0x2daabc<0x1*0x5ab+0x24c8+-0x2a63;_0x2daabc++)_0x34843b[_0x22b332+(0x2686*0x1+0xe2*-0x16+0x1*-0x1316)*at['PROJ_MAT_0']+_0x2daabc]=_0x1f125b[_0x2daabc];}if(_0x126b1b&&(_0x34843b[_0x22b332+(0x2e7*0x1+0x16c+-0x44f)*at['ATLAS_VIEW'+'PORT']+(0x18dd+0x2e*-0x71+-0x48f)]=_0x126b1b['x'],_0x34843b[_0x22b332+(-0x162*-0xe+0x126e+-0x25c6)*at['ATLAS_VIEW'+'PORT']+(-0x13e*0x8+-0x112*-0x2+0x7cd)]=_0x126b1b['y'],_0x34843b[_0x22b332+(0xfe6+0x16c3+-0x26a5)*at['ATLAS_VIEW'+'PORT']+(0x222c+-0x2153+-0x5*0x2b)]=_0x126b1b['z']/(0x2208+0x12d2+-0x1b*0x1f5)),_0x1a3c62){const _0x47a27a=this['getLightAr'+'eaSizes'](_0x464c10);_0x34843b[_0x22b332+(-0x15a5+0x1c*0x117+-0x8db)*at['AREA_DATA_'+'WIDTH']+(0x2294+-0x1*-0x1754+-0x39e8)]=_0x47a27a[-0x2426+-0x11ee+0x1*0x3614],_0x34843b[_0x22b332+(-0x1f94+-0x3ce+0x2366)*at['AREA_DATA_'+'WIDTH']+(-0x2f4+0x1238+-0xf43)]=_0x47a27a[0x29*-0x9d+0x211b+-0x7f5],_0x34843b[_0x22b332+(-0x195f+-0x29*0x45+-0x2c*-0xd4)*at['AREA_DATA_'+'WIDTH']+(0x17c7+0xb7*0x1f+-0x2dee)]=_0x47a27a[-0x30a+-0x1473+-0x177f*-0x1],_0x34843b[_0x22b332+(0x1f2*-0x3+-0x2489+0x2a63)*at['AREA_DATA_'+'HEIGHT']+(0x3e*-0x3c+-0x856+0x16de)]=_0x47a27a[-0x2*-0x1251+-0x14a4+0x1*-0xffb],_0x34843b[_0x22b332+(0xa5*-0x1d+0xf8e+0x1*0x327)*at['AREA_DATA_'+'HEIGHT']+(0x22*-0x6d+0x1*-0x1d93+0x2c0e)]=_0x47a27a[-0x47a+-0xc50+0x10ce],_0x34843b[_0x22b332+(-0xa08+0x4c7*-0x2+-0x9cd*-0x2)*at['AREA_DATA_'+'HEIGHT']+(-0x49b*0x1+-0x21*-0xb+-0x2*-0x199)]=_0x47a27a[-0xc75+-0x3e*0x95+-0x4*-0xc24];}}}const Hl=new D(),Wl=new D(),$l=new D(),Cd=new De(),l_=-0xff6+0x7e4+0x1812;class c_{constructor(){this['light']=null,this['min']=new D(),this['max']=new D();}}class kf{constructor(_0x511874){h(this,'clusterTex'+'ture'),(this['device']=_0x511874,this['name']='Untitled',this['reportCoun'+'t']=0xc7c+-0x96b*0x1+0x311*-0x1,this['boundsMin']=new D(),this['boundsMax']=new D(),this['boundsDelt'+'a']=new D(),this['_cells']=new D(-0x1d2b+0xe76+0xeb6,0x2031+-0x1ea2+0xc7*-0x2,-0x2d8+-0x27b+0x554),this['_cellsLimi'+'t']=new D(),this['cells']=this['_cells'],this['maxCellLig'+'htCount']=0x6a*-0x56+-0xc90+0x1010*0x3,this['_usedLight'+'s']=[],this['_usedLight'+'s']['push'](new c_()),this['lightsBuff'+'er']=new sE(_0x511874),this['registerUn'+'iforms'](_0x511874));}set['maxCellLig'+'htCount'](_0x5bd81b){_0x5bd81b!==this['_maxCellLi'+'ghtCount']&&(this['_maxCellLi'+'ghtCount']=_0x5bd81b,this['_cellsDirt'+'y']=!(0x2588+-0x5c*0x13+-0x1e*0x106));}get['maxCellLig'+'htCount'](){return this['_maxCellLi'+'ghtCount'];}set['cells'](_0x155275){Hl['copy'](_0x155275)['floor'](),this['_cells']['equals'](Hl)||(this['_cells']['copy'](Hl),this['_cellsLimi'+'t']['copy'](Hl)['sub'](D['ONE']),this['_cellsDirt'+'y']=!(0x154c+0x1*-0x187f+0x333));}get['cells'](){return this['_cells'];}['destroy'](){this['lightsBuff'+'er']['destroy'](),this['releaseClu'+'sterTextur'+'e']();}['releaseClu'+'sterTextur'+'e'](){this['clusterTex'+'ture']&&(this['clusterTex'+'ture']['destroy'](),this['clusterTex'+'ture']=null);}['registerUn'+'iforms'](_0x3f6535){this['_clusterSk'+'ipId']=_0x3f6535['scope']['resolve']('clusterSki'+'p'),this['_clusterMa'+'xCellsId']=_0x3f6535['scope']['resolve']('clusterMax'+'Cells'),this['_clusterWo'+'rldTexture'+'Id']=_0x3f6535['scope']['resolve']('clusterWor'+'ldTexture'),this['_clusterTe'+'xtureSizeI'+'d']=_0x3f6535['scope']['resolve']('clusterTex'+'tureSize'),this['_clusterTe'+'xtureSizeD'+'ata']=new Float32Array(0x7cb+0xc5f*-0x1+-0x19*-0x2f),this['_clusterBo'+'undsMinId']=_0x3f6535['scope']['resolve']('clusterBou'+'ndsMin'),this['_clusterBo'+'undsMinDat'+'a']=new Float32Array(0x7d1+0x1aac+0x113d*-0x2),this['_clusterBo'+'undsDeltaI'+'d']=_0x3f6535['scope']['resolve']('clusterBou'+'ndsDelta'),this['_clusterBo'+'undsDeltaD'+'ata']=new Float32Array(-0x274*0x1+0xdb5+0x59f*-0x2),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']=_0x3f6535['scope']['resolve']('clusterCel'+'lsCountByB'+'oundsSize'),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']=new Float32Array(0x1a88*0x1+0x2572+-0x3ff7*0x1),this['_clusterCe'+'llsDotId']=_0x3f6535['scope']['resolve']('clusterCel'+'lsDot'),this['_clusterCe'+'llsDotData']=new Float32Array(0x5*0x438+0x13eb*-0x1+-0x95*0x2),this['_clusterCe'+'llsMaxId']=_0x3f6535['scope']['resolve']('clusterCel'+'lsMax'),this['_clusterCe'+'llsMaxData']=new Float32Array(-0x11e1*0x2+0x1613+0xdb2);}['updatePara'+'ms'](_0x12837d){_0x12837d&&(this['cells']=_0x12837d['cells'],this['maxCellLig'+'htCount']=_0x12837d['maxLightsP'+'erCell'],this['lightsBuff'+'er']['cookiesEna'+'bled']=_0x12837d['cookiesEna'+'bled'],this['lightsBuff'+'er']['shadowsEna'+'bled']=_0x12837d['shadowsEna'+'bled'],this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x12837d['areaLights'+'Enabled']);}['updateCell'+'s'](){if(this['_cellsDirt'+'y']){this['_cellsDirt'+'y']=!(-0x1c7b*-0x1+-0x1*-0xedb+-0x2b55*0x1);const _0x1f40a4=this['_cells']['x'],_0xe1dfd9=this['_cells']['y'],_0x517bf5=this['_cells']['z'],_0x5f31a0=_0x1f40a4*_0xe1dfd9*_0x517bf5,_0x278008=this['maxCellLig'+'htCount']*_0x5f31a0;let _0x40f958=Math['ceil'](Math['sqrt'](_0x278008));_0x40f958=Y['roundUp'](_0x40f958,this['maxCellLig'+'htCount']);const _0x479c08=Math['ceil'](_0x278008/_0x40f958);w['assert'](_0x40f958<=l_&&_0x479c08<=l_,'Clustered\x20'+'lights\x20par'+'ameters\x20ca'+'use\x20the\x20te'+'xture\x20size'+'\x20to\x20be\x20ove'+'r\x20the\x20limi'+'t,\x20please\x20'+'adjust\x20the'+'m.'),this['_clusterCe'+'llsMaxData'][0x1efa+0x2339+-0x1*0x4233]=_0x1f40a4,this['_clusterCe'+'llsMaxData'][0x1*0xb47+0xb72+-0x8*0x2d7]=_0xe1dfd9,this['_clusterCe'+'llsMaxData'][-0x165d+-0x2401+0x1d3*0x20]=_0x517bf5,this['_clusterCe'+'llsDotData'][0x4a*0x5a+-0x1565+-0x49f]=this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][0xf4a+-0x1659+0xe2*0x8]=_0x1f40a4*_0x517bf5*this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][-0x3e*0x81+-0x1*0x149f+0x31*0x10f]=_0x1f40a4*this['maxCellLig'+'htCount'],this['clusters']=new Uint8ClampedArray(_0x278008),this['counts']=new Int32Array(_0x5f31a0),this['_clusterTe'+'xtureSizeD'+'ata'][0x9d9*0x1+-0xafd+-0x2*-0x92]=_0x40f958,this['_clusterTe'+'xtureSizeD'+'ata'][-0x1812+-0x1e4b+0x365e]=(-0x19ac+0x76b+0x1242)/_0x40f958,this['_clusterTe'+'xtureSizeD'+'ata'][0x1daa+0x1*0x1cd5+-0x3a7d]=(-0x8ce*0x2+-0x1eb*0xa+0x24cb)/_0x479c08,this['releaseClu'+'sterTextur'+'e'](),this['clusterTex'+'ture']=this['lightsBuff'+'er']['createText'+'ure'](this['device'],_0x40f958,_0x479c08,Zu,'ClusterTex'+'ture');}}['uploadText'+'ures'](){this['clusterTex'+'ture']['lock']()['set'](this['clusters']),this['clusterTex'+'ture']['unlock'](),this['lightsBuff'+'er']['uploadText'+'ures']();}['updateUnif'+'orms'](){this['_clusterSk'+'ipId']['setValue'](this['_usedLight'+'s']['length']>-0x1a1b+-0xeed*-0x1+-0x1*-0xb2f?-0x5f*0x18+-0x6d*-0x21+0x1*-0x525:0xf67+-0x2419*0x1+-0x1*-0x14b3),this['lightsBuff'+'er']['updateUnif'+'orms'](),this['_clusterWo'+'rldTexture'+'Id']['setValue'](this['clusterTex'+'ture']),this['_clusterMa'+'xCellsId']['setValue'](this['maxCellLig'+'htCount']);const _0x7b2d66=this['boundsDelt'+'a'];this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][0xaa6*0x1+-0x12*-0x65+-0x11c0]=this['_cells']['x']/_0x7b2d66['x'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][-0x154*-0x19+0xfb3*-0x1+-0x1180]=this['_cells']['y']/_0x7b2d66['y'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][0x54*0x72+0x1665+0x1*-0x3bcb]=this['_cells']['z']/_0x7b2d66['z'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']['setValue'](this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']),this['_clusterBo'+'undsMinDat'+'a'][0x1*-0x16f7+-0x1*-0x855+-0x751*-0x2]=this['boundsMin']['x'],this['_clusterBo'+'undsMinDat'+'a'][-0xa21+-0x8*-0x5c+0x742]=this['boundsMin']['y'],this['_clusterBo'+'undsMinDat'+'a'][-0x10*-0x1d6+-0x1ec5+0x167]=this['boundsMin']['z'],this['_clusterBo'+'undsDeltaD'+'ata'][0x22ee+-0x7e0+-0x1b0e]=_0x7b2d66['x'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x24e4+0x617*-0x5+0xa*0x6bc]=_0x7b2d66['y'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x1a70+-0x4*-0x20f+0x309*0x6]=_0x7b2d66['z'],this['_clusterTe'+'xtureSizeI'+'d']['setValue'](this['_clusterTe'+'xtureSizeD'+'ata']),this['_clusterBo'+'undsMinId']['setValue'](this['_clusterBo'+'undsMinDat'+'a']),this['_clusterBo'+'undsDeltaI'+'d']['setValue'](this['_clusterBo'+'undsDeltaD'+'ata']),this['_clusterCe'+'llsDotId']['setValue'](this['_clusterCe'+'llsDotData']),this['_clusterCe'+'llsMaxId']['setValue'](this['_clusterCe'+'llsMaxData']);}['evalLightC'+'ellMinMax'](_0x5524d0,_0x31b041,_0x42c521){_0x31b041['copy'](_0x5524d0['min']),_0x31b041['sub'](this['boundsMin']),_0x31b041['div'](this['boundsDelt'+'a']),_0x31b041['mul2'](_0x31b041,this['cells']),_0x31b041['floor'](),_0x42c521['copy'](_0x5524d0['max']),_0x42c521['sub'](this['boundsMin']),_0x42c521['div'](this['boundsDelt'+'a']),_0x42c521['mul2'](_0x42c521,this['cells']),_0x42c521['ceil'](),_0x31b041['max'](D['ZERO']),_0x42c521['min'](this['_cellsLimi'+'t']);}['collectLig'+'hts'](_0xc99388){const _0x5f3a51=this['lightsBuff'+'er']['maxLights'],_0x124e80=this['_usedLight'+'s'];let _0x4d5e77=-0x17*0xe+-0x76a+0x8ad;_0xc99388['forEach'](_0x4b968=>{const _0x4cf686=!!(_0x4b968['mask']&(Ss|di)),_0x5487c2=_0x4b968['type']===Ze&&_0x4b968['_outerCone'+'Angle']===-0x1*0x18ed+-0x10*0x1df+0x109*0x35;if(_0x4b968['enabled']&&_0x4b968['type']!==ve&&_0x4b968['visibleThi'+'sFrame']&&_0x4b968['intensity']>0x61*0x24+0x26c3*0x1+0x3467*-0x1&&_0x4cf686&&!_0x5487c2){if(_0x4d5e77<_0x5f3a51){let _0x3bedd0;_0x4d5e77<_0x124e80['length']?_0x3bedd0=_0x124e80[_0x4d5e77]:(_0x3bedd0=new c_(),_0x124e80['push'](_0x3bedd0)),_0x3bedd0['light']=_0x4b968,_0x4b968['getBoundin'+'gBox'](Cd),_0x3bedd0['min']['copy'](Cd['getMin']()),_0x3bedd0['max']['copy'](Cd['getMax']()),_0x4d5e77++;}else w['warnOnce']('Clustered\x20'+'lighting:\x20'+'more\x20than\x20'+(_0x5f3a51-(0x1fb7+-0x5d1*-0x3+-0x3129))+('\x20lights\x20in'+'\x20the\x20frame'+',\x20ignoring'+'\x20some.'));}}),_0x124e80['length']=_0x4d5e77;}['evaluateBo'+'unds'](){const _0x2b7cf7=this['_usedLight'+'s'],_0x3055ea=this['boundsMin'],_0x48aa7d=this['boundsMax'];if(_0x2b7cf7['length']>-0x652+0x44b*-0x6+0x1*0x2015){_0x3055ea['copy'](_0x2b7cf7[0x1497+-0x1ad+-0x12e9]['min']),_0x48aa7d['copy'](_0x2b7cf7[-0x64a+-0x2*-0x1099+-0x1ae7]['max']);for(let _0x13d3af=-0x1d49+0xe50*0x1+-0x1*-0xefb;_0x13d3af<_0x2b7cf7['length'];_0x13d3af++)_0x3055ea['min'](_0x2b7cf7[_0x13d3af]['min']),_0x48aa7d['max'](_0x2b7cf7[_0x13d3af]['max']);}else _0x3055ea['set'](-0x205e+-0x1eb+0x2249,0xf9+0x5f*-0x54+0x35b*0x9,0xb13+-0x962*-0x1+-0x1475*0x1),_0x48aa7d['set'](-0x5*-0x274+-0x1*0x1c0+-0xa83,-0x59f*-0x5+0x1e1e+-0x3a38,0x2432+0x1*-0x2c2+-0x1*0x216f);this['boundsDelt'+'a']['sub2'](_0x48aa7d,_0x3055ea),this['lightsBuff'+'er']['setBounds'](_0x3055ea,this['boundsDelt'+'a']);}['updateClus'+'ters'](_0x192762){this['counts']['fill'](0x1c7a+0x25*0x6d+-0x2c3b),this['clusters']['fill'](-0x1fdb+0x110c+0xdf*0x11),this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x192762?_0x192762['areaLights'+'Enabled']:!(-0xb2*-0x25+0x3*0xaca+-0x3a17);const _0x1b60b7=this['_cells']['x'],_0x20e333=this['_cells']['z'],_0x64e16d=this['counts'],_0x56a216=this['_maxCellLi'+'ghtCount'],_0x545244=this['clusters'],_0x28f28c=this['maxCellLig'+'htCount'];let _0x499bb7=!(0x112d+0x8f4+0x4*-0x688);const _0x2cbe48=this['_usedLight'+'s'];for(let _0x3430c0=0x13*-0xbf+0x131d+-0x1a5*0x3;_0x3430c0<_0x2cbe48['length'];_0x3430c0++){const _0x32bdab=_0x2cbe48[_0x3430c0],_0x1cff19=_0x32bdab['light'];this['lightsBuff'+'er']['addLightDa'+'ta'](_0x1cff19,_0x3430c0),this['evalLightC'+'ellMinMax'](_0x32bdab,Wl,$l);const _0x35f371=Wl['x'],_0xc68fcd=$l['x'],_0x47a930=Wl['y'],_0xa3f82a=$l['y'],_0x1d5231=Wl['z'],_0x1c70c3=$l['z'];for(let _0xeadb87=_0x35f371;_0xeadb87<=_0xc68fcd;_0xeadb87++)for(let _0x5ddd60=_0x1d5231;_0x5ddd60<=_0x1c70c3;_0x5ddd60++)for(let _0xc46702=_0x47a930;_0xc46702<=_0xa3f82a;_0xc46702++){const _0x2b23a0=_0xeadb87+_0x1b60b7*(_0x5ddd60+_0xc46702*_0x20e333),_0x5a3df1=_0x64e16d[_0x2b23a0];_0x5a3df1<_0x56a216?(_0x545244[_0x28f28c*_0x2b23a0+_0x5a3df1]=_0x3430c0,_0x64e16d[_0x2b23a0]=_0x5a3df1+(0xd43+-0x1*-0x47b+0xef*-0x13)):_0x499bb7=!(-0x1142+0xa*0x2b9+-0xe8*0xb);}}_0x499bb7&&this['reportCoun'+'t']<-0x729*0x5+0x114a+-0x4a2*-0x4&&(console['warn']('Too\x20many\x20l'+'ights\x20in\x20l'+'ight\x20clust'+'er\x20'+this['name']+(',\x20please\x20a'+'djust\x20para'+'meters.')+(this['reportCoun'+'t']===0x1579+-0x904*-0x1+-0x10d*0x1d?'\x20Giving\x20up'+'\x20on\x20report'+'ing\x20it.':'')),this['reportCoun'+'t']++);}['update'](_0xe43caa,_0x534d1e=null){this['updatePara'+'ms'](_0x534d1e),this['updateCell'+'s'](),this['collectLig'+'hts'](_0xe43caa),this['evaluateBo'+'unds'](),this['updateClus'+'ters'](_0x534d1e),this['uploadText'+'ures']();}['activate'](){this['updateUnif'+'orms']();}}const h_=-0x972+0x170a+-0xd96+0.39996322972865306,wl={'circlePoint'(_0x3c0dd5){const _0x49eaff=Math['sqrt'](Math['random']()),_0x4924a=Math['random']()*(0x394*0x6+-0x236a+-0x6fa*-0x2)*Math['PI'];_0x3c0dd5['x']=_0x49eaff*Math['cos'](_0x4924a),_0x3c0dd5['y']=_0x49eaff*Math['sin'](_0x4924a);},'circlePointDeterministic'(_0x24a25,_0x55a20b,_0x531f57){const _0xb5748d=_0x55a20b*h_,_0x18d6de=Math['sqrt'](_0x55a20b)/Math['sqrt'](_0x531f57);_0x24a25['x']=_0x18d6de*Math['cos'](_0xb5748d),_0x24a25['y']=_0x18d6de*Math['sin'](_0xb5748d);},'spherePointDeterministic'(_0x567522,_0x68701,_0x1715e5,_0x9c5bb1=0x18f5*-0x1+-0x51d*0x5+-0x1d*-0x1be,_0x25fb65=0x1eb3+0xd80+-0x2c32){_0x9c5bb1=-0x1*-0x6c9+-0x47c+-0x24c-(-0x1475+-0x9d4*-0x1+0xaa3)*_0x9c5bb1,_0x25fb65=-0x2f*-0x7+-0x2df*0x4+0xa34-(0x4*-0x838+0x1ed6+0x20c)*_0x25fb65;const _0x46ed18=Y['lerp'](_0x9c5bb1,_0x25fb65,_0x68701/_0x1715e5),_0x266894=Math['sqrt'](0x210f+-0x173f*0x1+0x1*-0x9cf-_0x46ed18*_0x46ed18),_0x22916a=h_*_0x68701;_0x567522['x']=Math['cos'](_0x22916a)*_0x266894,_0x567522['y']=_0x46ed18,_0x567522['z']=Math['sin'](_0x22916a)*_0x266894;},'radicalInverse'(_0x55ad8b){let _0x1c4a81=(_0x55ad8b<<0x1c15+0x1e70+-0x3a75*0x1|_0x55ad8b>>>-0x6e2*-0x2+0x1c3*0x11+-0x2ba7)>>>0x111f+0x1138+-0x2257;return _0x1c4a81=((_0x1c4a81&0x44d8766b+-0x814a494c+0x6*0x184bdc09)<<0x2*0x249+-0x1*-0x1852+0x33*-0x91|(_0x1c4a81&-0xc0441bf*0x6+-0x93*-0x972957+0x9bf7782f)>>>0x1a5c+-0x1cd0+-0x275*-0x1)>>>-0x11*0xb+0x11c7+-0x110c,_0x1c4a81=((_0x1c4a81&0x1ed8c*-0xec6+-0x419b4610+0x9149db8b)<<-0x1129+-0x217b*0x1+-0x1953*-0x2|(_0x1c4a81&-0x1427c*-0x9320+0x13c876ef9+-0x1291025ad)>>>-0x5*0xbb+-0x29*-0x49+0x4*-0x202)>>>-0xa*0xa1+-0x14cf*-0x1+-0xe85,_0x1c4a81=((_0x1c4a81&-0x12cc*-0xa1f1+0x124a75c8+-0xf1f64c5)<<0xc31+0x74b+-0x1378|(_0x1c4a81&0x14e92db47+0x1d2504195+0x19*-0x1665d8cc)>>>-0xc7f*0x3+-0xdf6+0x3377)>>>0x1703+-0x263b+-0x79c*-0x2,_0x1c4a81=((_0x1c4a81&-0x165e78c+0x15b3ff3+0x109a898)<<0x1*-0x13bc+-0x44f+-0x1813*-0x1|(_0x1c4a81&-0x158e7da90+-0x1*0xa7fce0ab+0x2ffe5ba3b)>>>-0x2515+0x1acd+0xa50)>>>0xe7*-0x15+0x18d*0x1+0x11*0x106,_0x1c4a81*(0x1b96+0x1df*0x4+0x2312*-0x1+2.3283064365386963e-10);}},iE={'linear':'decodeLine'+'ar','srgb':'decodeGamm'+'a','rgbm':'decodeRGBM','rgbe':'decodeRGBE','rgbp':'decodeRGBP','xy':'unpackNorm'+'alXY','xyz':'unpackNorm'+'alXYZ'},rE={'linear':'encodeLine'+'ar','srgb':'encodeGamm'+'a','rgbm':'encodeRGBM','rgbe':'encodeRGBE','rgbp':'encodeRGBP'};class Sr{static['decodeFunc'](_0x3b0e56){return iE[_0x3b0e56]??'decodeGamm'+'a';}static['encodeFunc'](_0x8bedb8){return rE[_0x8bedb8]??'encodeGamm'+'a';}}const d_=_0x3196e2=>{switch(_0x3196e2){case Mf:return'Cubemap';case nx:return'Octahedral';default:return'Equirect';}},Xl=(_0x3babba,_0x368d7d,_0x44318b)=>{if(_0x3babba<=0x4*0x4ea+0x7f4+-0x1b9c)_0x368d7d[_0x44318b+(0x1*0x1dfc+-0x2582+0x786)]=0x363*0x9+0x19de+-0x3859,_0x368d7d[_0x44318b+(-0x167*-0xa+0x1438+-0x223d)]=0x41a+-0x2*-0xd2+-0x46*0x15,_0x368d7d[_0x44318b+(0x139f*-0x1+0x192b+0x2*-0x2c5)]=0x62f+-0x249a+-0x257*-0xd,_0x368d7d[_0x44318b+(-0x1*0xbfb+0x4*0x335+-0xd6)]=0x1fe4+0x31d*0xa+-0x3f06;else{if(_0x3babba>=-0x4*-0x2bc+-0x1d4*-0x3+-0x106b)_0x368d7d[_0x44318b+(0x20f2*0x1+-0x1fec+0x106*-0x1)]=0x61+-0x83a*-0x4+-0x204a,_0x368d7d[_0x44318b+(0x126b+-0x2*0x99b+-0x1*-0xcc)]=-0x1ced+-0x1ad3+0x37c0,_0x368d7d[_0x44318b+(-0x37*-0xe+0xa*0x191+-0x12aa)]=0x25ce+-0x78b*0x3+-0xf2d,_0x368d7d[_0x44318b+(0x9*0x39b+-0x25ea+0x57a)]=-0xd50+0x3a*0x98+-0x1520;else{let _0xcdccb3=(-0x1e*0x25+0x10a4+-0xc4d)*_0x3babba%(-0x956+-0x1cea+0x2641),_0x2dc61a=(0x1*0x7a9+0xb*-0x111+-0x511*-0x1)*_0x3babba%(0x1e01+-0x1*-0x323+-0x2123),_0x234158=(0x199c6+0xe23e+0x4c67*-0x5)*_0x3babba%(0x21d5+-0x108f+-0x1145);const _0x1f91cb=(0x3*-0x9fd46b+0x58*0x6bbd+0x2b77748)*_0x3babba%(0x1da+-0x1*-0x13+-0x1ec*0x1);_0xcdccb3-=_0x2dc61a/(0x125c+-0x168a+0x52d),_0x2dc61a-=_0x234158/(-0xc04+0x2505+0x2*-0xc01),_0x234158-=_0x1f91cb/(0x1*0x12eb+0xa+-0x11f6),_0x368d7d[_0x44318b+(-0x1*0x2464+0x1bd2+-0x1*-0x892)]=Math['min'](-0xf*0x106+-0x70+0x10c9,Math['floor'](_0xcdccb3*(0x13*-0x8f+-0x23+0xbc0))),_0x368d7d[_0x44318b+(0x9*0x1fe+0x92e*0x1+-0x1*0x1b1b)]=Math['min'](0x4*0x231+0x3*0x6f3+-0x1c9e,Math['floor'](_0x2dc61a*(0x1f*0x2f+-0x95a+0x4a9))),_0x368d7d[_0x44318b+(-0x2515+0x8*-0xc5+0x2b3f)]=Math['min'](-0x2e6*-0xa+-0x1*-0xb47+0x2744*-0x1,Math['floor'](_0x234158*(-0x60*0x58+-0x9d7*-0x1+0x5*0x4d5))),_0x368d7d[_0x44318b+(0x5e4*-0x3+-0xa6*0x1f+0x239*0x11)]=Math['min'](-0x21e1+-0x1e90+0x4170,Math['floor'](_0x1f91cb*(0x239c+-0x2076+0x1*-0x226)));}}},aE=_0x174d9c=>{const _0x35816e=_0x174d9c['length'],_0x2eeff0=Math['min'](_0x35816e,0x1537+0x8fa+-0x1c31),_0x1fec75=Math['ceil'](_0x35816e/_0x2eeff0),_0x26bc58=new Uint8Array(_0x2eeff0*_0x1fec75*(-0x1*0x1edd+0x6e8+-0x143*-0x13));let _0x4e1813=-0x61f*-0x1+0x17f6*-0x1+0x1*0x11d7;for(let _0x5e9643=-0x1ff2+0x9a9*-0x2+-0x44*-0xc1;_0x5e9643<_0x35816e;_0x5e9643+=-0x79c+0xa2+0xa*0xb3)Xl(_0x174d9c[_0x5e9643+(-0x7*0x4f9+0x1ca*0x3+0x1d71)]*(0x38f+0x88a+0xc19*-0x1+0.5)+(-0x7c1*0x5+-0xf2b+0x35f0+0.5),_0x26bc58,_0x4e1813+(-0x24e4+-0x83c+0x2d20)),Xl(_0x174d9c[_0x5e9643+(-0x1602+-0x1328+0x292b)]*(-0x69f*0x2+0x2356+-0x1618+0.5)+(-0x24*-0x94+-0x1710*-0x1+0x48*-0x9c+0.5),_0x26bc58,_0x4e1813+(-0x25*0xf1+-0x17ad+0x3a86)),Xl(_0x174d9c[_0x5e9643+(-0x4ce+-0x24a6+0x2976)]*(-0x2b*0x15+-0x129f+-0x2d*-0x7e+0.5)+(-0x1495+-0x51f+0x19b4+0.5),_0x26bc58,_0x4e1813+(0x127a*0x2+-0x1*0x122f+-0x12bd)),Xl(_0x174d9c[_0x5e9643+(-0x6*0x38d+-0x2011+0x3562)]/(0x4d3*0x1+0xc3d+0x442*-0x4),_0x26bc58,_0x4e1813+(-0x1f*0xf1+0x21f4+-0x4b9)),_0x4e1813+=-0x781+0x473*0x7+0x3*-0x7dc;return{'width':_0x2eeff0,'height':_0x1fec75,'data':_0x26bc58};},nE=(_0x3dd2bf,_0x196318,_0x1e08ff,_0x17202c)=>{const _0x56dd49=_0x1e08ff*(-0xb0e+0x1a8d+-0xf7d)*Math['PI'],_0xdf84e5=Math['pow'](-0x785+0x2*-0x36c+-0x1*-0xe5e-_0x196318,(0x11*0x9a+0x2369+-0x2da2)/(_0x17202c+(0x249a+-0x1*-0x1272+-0x4d*0xb7))),_0x386066=Math['sqrt'](0x1f72+-0x15d*0x8+-0x1489-_0xdf84e5*_0xdf84e5);_0x3dd2bf['set'](Math['cos'](_0x56dd49)*_0x386066,Math['sin'](_0x56dd49)*_0x386066,_0xdf84e5)['normalize']();},oE=(_0x508e2e,_0x5f2d66,_0x5e592f)=>{const _0x3b0006=_0x5e592f*(0xb23+0x2*-0x6be+0x25b)*Math['PI'],_0x289e47=Math['sqrt'](0x32c+0x3b9*-0x2+0x5*0xdb-_0x5f2d66),_0x2a102e=Math['sqrt'](_0x5f2d66);_0x508e2e['set'](Math['cos'](_0x3b0006)*_0x2a102e,Math['sin'](_0x3b0006)*_0x2a102e,_0x289e47)['normalize']();},lE=(_0x2b7bdf,_0x369a9f,_0x1c4fce,_0x50c600)=>{const _0x4077b3=_0x1c4fce*(0x3e*0x39+0xd75*0x1+-0x1b41)*Math['PI'],_0x2be6d9=Math['sqrt']((-0x17*-0xe3+-0x275*0xd+0xb8d-_0x369a9f)/(0xb0*0x31+-0xdc1+0x1*-0x13ee+(_0x50c600*_0x50c600-(0xfe5+-0x1*0x33d+-0xca7))*_0x369a9f)),_0x8d9f89=Math['sqrt'](-0xdf*0x1b+0x1f*0xc2+0x8-_0x2be6d9*_0x2be6d9);_0x2b7bdf['set'](Math['cos'](_0x4077b3)*_0x8d9f89,Math['sin'](_0x4077b3)*_0x8d9f89,_0x2be6d9)['normalize']();},cE=(_0x2f2345,_0x1d29e8)=>{const _0x161aae=_0x2f2345*_0x1d29e8,_0x4fe0c5=_0x1d29e8/(-0x1*-0x1d4a+0x109d*-0x1+-0xcac-_0x2f2345*_0x2f2345+_0x161aae*_0x161aae);return _0x4fe0c5*_0x4fe0c5*((0x1079+-0x1*-0x23ce+-0x3446)/Math['PI']);},hE=(_0x563dc8,_0x348d26)=>{const _0x347228=new D(),_0x194f92=[];for(let _0x45f918=0x3d9*-0x9+0x961+-0x20*-0xca;_0x45f918<_0x563dc8;++_0x45f918)nE(_0x347228,_0x45f918/_0x563dc8,wl['radicalInv'+'erse'](_0x45f918),_0x348d26),_0x194f92['push'](_0x347228['x'],_0x347228['y'],_0x347228['z'],-0x20a8+0x153d+-0x1*-0xb6b);return _0x194f92;},dE=(_0xdf3a9d,_0x3e4098)=>{const _0x143ba5=_0x3e4098/_0xdf3a9d,_0x5dac7c=new D(),_0x12b382=[];for(let _0xb3e0bc=-0xcf0+0x201a+-0xb*0x1be;_0xb3e0bc<_0xdf3a9d;++_0xb3e0bc){oE(_0x5dac7c,_0xb3e0bc/_0xdf3a9d,wl['radicalInv'+'erse'](_0xb3e0bc));const _0x170a74=_0x5dac7c['z']/Math['PI'],_0x4bbd67=(0x724*0x4+0x1539+-0x31c9+0.5)*Math['log2'](_0x143ba5/_0x170a74);_0x12b382['push'](_0x5dac7c['x'],_0x5dac7c['y'],_0x5dac7c['z'],_0x4bbd67);}return _0x12b382;},fE={0x10:{0x2:0x1a,0x8:0x14,0x20:0x11,0x80:0x10,0x200:0x10},0x20:{0x2:0x35,0x8:0x28,0x20:0x22,0x80:0x20,0x200:0x20},0x80:{0x2:0xd6,0x8:0xa3,0x20:0x8b,0x80:0x82,0x200:0x80},0x400:{0x2:0x6ba,0x8:0x51e,0x20:0x45a,0x80:0x411,0x200:0x401}},uE=(_0xf2c678,_0x498b2b)=>{const _0x208bf8=fE[_0xf2c678];return _0x208bf8&&_0x208bf8[_0x498b2b]||_0xf2c678;},pE=(_0x5b189e,_0x7204e1,_0x2cfa73)=>{const _0x3de8ff=_0x2cfa73/_0x5b189e,_0xcdf514=0x22f1+-0x191e+-0x9d2-Math['log2'](_0x7204e1)/(-0x179*0xb+0x1f3f+-0xa7*0x17),_0x2f124a=_0xcdf514*_0xcdf514,_0x512392=new D(),_0x1783da=new D(),_0x360be4=new D(-0x9f0*-0x3+-0x3a*-0x3e+-0x2bdc,0x683+-0x3*-0x874+0xc7*-0x29,0x2435+0x1779+0x3bad*-0x1),_0x53d8af=[],_0x1101e7=uE(_0x5b189e,_0x7204e1);for(let _0xc44899=0xc59*0x1+-0x30*0x7d+0xb17*0x1;_0xc44899<_0x1101e7;++_0xc44899){lE(_0x512392,_0xc44899/_0x1101e7,wl['radicalInv'+'erse'](_0xc44899),_0x2f124a);const _0x4996f0=_0x512392['z'];if(_0x1783da['set'](_0x512392['x'],_0x512392['y'],_0x512392['z'])['mulScalar']((-0x1cb6+0x421+0x4eb*0x5)*_0x4996f0)['sub'](_0x360be4),_0x1783da['z']>-0x7*-0x2f9+-0x17b2+0x2e3){const _0xa3fb91=cE(Math['min'](0x1505+-0x253a+0x1036,_0x4996f0),_0x2f124a)/(0x1*-0x30f+-0xfc1+0x12d4)+(0x2c9*-0x5+0x1*-0x11a7+0x5e*0x56+0.001),_0x3a52b2=(-0x1*0xc60+-0xc0+-0x69*-0x20+0.5)*Math['log2'](_0x3de8ff/_0xa3fb91);_0x53d8af['push'](_0x1783da['x'],_0x1783da['y'],_0x1783da['z'],_0x3a52b2);}}for(;_0x53d8af['length']<_0x5b189e*(0x53b*-0x1+0x1*0x268d+-0xae*0x31);)_0x53d8af['push'](0x7ef*-0x2+-0x1de3*-0x1+0xe05*-0x1,-0x1*0xa7b+-0x124*0x5+0x102f,-0x166*-0xb+-0x14ca+-0x4*-0x15a,0x153d+0xa*-0x1b7+0x15d*-0x3);return _0x53d8af;},mE=(_0xb9dcd8,_0x81ef5e,_0x68f5d)=>{const _0x311178=aE(_0x68f5d);return new _e(_0xb9dcd8,{'name':_0x81ef5e,'width':_0x311178['width'],'height':_0x311178['height'],'mipmaps':!(0xec*0xb+-0x2340+0x191d),'minFilter':Te,'magFilter':Te,'levels':[_0x311178['data']]});};class By{constructor(_0x9b247=!(0x14c*-0xc+0x1cfc+0x1*-0xd6c)){h(this,'map',new Map()),this['destroyCon'+'tent']=_0x9b247;}['destroy'](){this['destroyCon'+'tent']&&this['map']['forEach']((_0x34d574,_0x208777)=>{_0x34d574['destroy']();});}['get'](_0x2bb59b,_0x10969e){if(!this['map']['has'](_0x2bb59b)){const _0xe4ae24=_0x10969e();return this['map']['set'](_0x2bb59b,_0xe4ae24),_0xe4ae24;}return this['map']['get'](_0x2bb59b);}}const _E=new By(!(0x38b*-0x9+0x216a+-0x27*0xa)),gE=new Kt(),Up=(_0x67a5df,_0x17a4a7,_0x360f8a)=>gE['get'](_0x67a5df,()=>new By())['get'](_0x17a4a7,()=>mE(_0x67a5df,_0x17a4a7,_E['get'](_0x17a4a7,_0x360f8a))),SE=(_0x5fc82f,_0x151100,_0x340289)=>{const _0x76a36b='lambert-sa'+'mples-'+_0x151100+'-'+_0x340289;return Up(_0x5fc82f,_0x76a36b,()=>dE(_0x151100,_0x340289));},yE=(_0x29c409,_0x253f58,_0x1e5476)=>{const _0x32086e='phong-samp'+'les-'+_0x253f58+'-'+_0x1e5476;return Up(_0x29c409,_0x32086e,()=>hE(_0x253f58,_0x1e5476));},vE=(_0x152f08,_0x47f12f,_0x1178b8,_0x783b36)=>{const _0x5ba3dc='ggx-sample'+'s-'+_0x47f12f+'-'+_0x1178b8+'-'+_0x783b36;return Up(_0x152f08,_0x5ba3dc,()=>pE(_0x47f12f,_0x1178b8,_0x783b36));};function vi(_0x22338b,_0x423ebe,_0x3251ff={}){var _0x59a4da,_0x375e25;w['assert'](_0x22338b instanceof _e&&_0x423ebe instanceof _e,'source\x20and'+'\x20target\x20mu'+'st\x20be\x20text'+'ures');const _0x209dbf=_0x3251ff['seamPixels']??-0x4b*-0x60+-0x1802+-0x41e,_0x633ff4=(((_0x59a4da=_0x3251ff['rect'])==null?void(0x2300+-0x18e0+-0xa20*0x1):_0x59a4da['z'])??_0x423ebe['width'])-_0x209dbf*(0x7*-0x4dd+0x2a*0x6+0x1*0x2111),_0xc61f44=(((_0x375e25=_0x3251ff['rect'])==null?void(-0x17c*-0x9+-0x1b6b+0xe0f):_0x375e25['w'])??_0x423ebe['height'])-_0x209dbf*(0x2*-0xe77+0x1b1*-0x7+0x28c7);if(_0x633ff4<0x18a7*0x1+0x1a3b*-0x1+0x195||_0xc61f44<-0x16eb*-0x1+-0x6*0x13f+0xf70*-0x1)return!(0x20dc+-0x4c*-0x40+-0x33db);const _0x5b5a72={'none':'reproject','lambert':'prefilterS'+'amplesUnwe'+'ighted','phong':'prefilterS'+'amplesUnwe'+'ighted','ggx':'prefilterS'+'amples'},_0x5bb4fd=_0x3251ff['hasOwnProp'+'erty']('specularPo'+'wer')?_0x3251ff['specularPo'+'wer']:-0x9*0x417+0x2471+0x5f,_0x4b00cc=_0x3251ff['hasOwnProp'+'erty']('face')?_0x3251ff['face']:null,_0x3183b9=_0x3251ff['hasOwnProp'+'erty']('distributi'+'on')?_0x3251ff['distributi'+'on']:_0x5bb4fd===0x1*0x16e7+0x1*0x1979+0x3d*-0xcb?'none':'phong',_0x5c84f1=_0x5b5a72[_0x3183b9]||'reproject',_0x5caf31=_0x5c84f1['startsWith']('prefilterS'+'amples'),_0x5bf20d=Sr['decodeFunc'](_0x22338b['encoding']),_0x28b5d6=Sr['encodeFunc'](_0x423ebe['encoding']),_0x4e7feb='sample'+d_(_0x22338b['projection']),_0x2175a8='getDirecti'+'on'+d_(_0x423ebe['projection']),_0x1977bc=_0x3251ff['hasOwnProp'+'erty']('numSamples')?_0x3251ff['numSamples']:-0x5*-0x55d+0x2439+-0x3b0a,_0x1c2aec='ReprojectS'+'hader:'+_0x5c84f1+'_'+_0x5bf20d+'_'+_0x28b5d6+'_'+_0x4e7feb+'_'+_0x2175a8+'_'+_0x1977bc,_0x580428=_0x22338b['device'];let _0x502556=Nn(_0x580428)['getCachedS'+'hader'](_0x1c2aec);if(!_0x502556){const _0x169f72=new Map();_0x5caf31&&_0x169f72['set']('USE_SAMPLE'+'S_TEX',''),_0x22338b['cubemap']&&_0x169f72['set']('CUBEMAP_SO'+'URCE',''),_0x169f72['set']('{PROCESS_F'+'UNC}',_0x5c84f1),_0x169f72['set']('{DECODE_FU'+'NC}',_0x5bf20d),_0x169f72['set']('{ENCODE_FU'+'NC}',_0x28b5d6),_0x169f72['set']('{SOURCE_FU'+'NC}',_0x4e7feb),_0x169f72['set']('{TARGET_FU'+'NC}',_0x2175a8),_0x169f72['set']('{NUM_SAMPL'+'ES}',_0x1977bc),_0x169f72['set']('{NUM_SAMPL'+'ES_SQRT}',Math['round'](Math['sqrt'](_0x1977bc))['toFixed'](-0x1a+-0x1d31+0x1d4c));const _0x42682a=_0x580428['isWebGPU'],_0x284aac=Ce['get'](_0x580428,_0x42682a?it:Fe),_0x3244ad=new Map();_0x3244ad['set']('decodePS',_0x284aac['get']('decodePS')),_0x3244ad['set']('encodePS',_0x284aac['get']('encodePS')),_0x502556=$t['createShad'+'er'](_0x580428,{'uniqueName':_0x1c2aec,'attributes':{'vertex_position':Pe},'vertexChunk':'reprojectV'+'S','fragmentChunk':'reprojectP'+'S','fragmentIncludes':_0x3244ad,'fragmentDefines':_0x169f72});}Q['pushGpuMar'+'ker'](_0x580428,'ReprojectT'+'exture'),_0x580428['setBlendSt'+'ate'](pt['NOBLEND']);const _0x341f69=_0x580428['scope']['resolve'](_0x22338b['cubemap']?'sourceCube':'sourceTex');w['assert'](_0x341f69),_0x341f69['setValue'](_0x22338b);const _0xa392c=_0x580428['scope']['resolve']('params'),_0x2ef9c5=_0x580428['scope']['resolve']('uvMod');_0x209dbf>0x5d8+0x17*0x133+-0x216d?_0x2ef9c5['setValue']([(_0x633ff4+_0x209dbf*(0x1*0x3c7+-0xc7*0x1f+0x2*0xa2a))/_0x633ff4,(_0xc61f44+_0x209dbf*(-0xabe+-0xe43+0x151*0x13))/_0xc61f44,-_0x209dbf/_0x633ff4,-_0x209dbf/_0xc61f44]):_0x2ef9c5['setValue']([0x1*0x146b+-0xb*0x22a+-0xe*-0x3e,-0x1cd0+0x249c+0x5f*-0x15,0x1066+0x139*0x1f+0x1*-0x364d,0x3c4+0x3e*-0x32+0x858]);const _0x2f43cd=[0x25fc+-0x4d*-0x59+-0x1*0x40c1,_0x423ebe['width']*_0x423ebe['height']*(_0x423ebe['cubemap']?-0x1a0e+-0x17c8+0x31dc:0xe4*0x29+-0xc7*-0x23+-0x3fb8),_0x22338b['width']*_0x22338b['height']*(_0x22338b['cubemap']?0x132f+-0x1f21+0xbf8:0xf88+-0x1*-0xb29+-0x1ab0)];if(_0x5caf31){const _0x5686d4=_0x22338b['width']*_0x22338b['height']*(_0x22338b['cubemap']?-0xfb9+-0x25e+-0x121d*-0x1:0x1b0b+-0x754*0x2+-0xc62),_0xc766bc=_0x3183b9==='ggx'?vE(_0x580428,_0x1977bc,_0x5bb4fd,_0x5686d4):_0x3183b9==='lambert'?SE(_0x580428,_0x1977bc,_0x5686d4):yE(_0x580428,_0x1977bc,_0x5bb4fd);_0x580428['scope']['resolve']('samplesTex')['setValue'](_0xc766bc),_0x580428['scope']['resolve']('samplesTex'+'InverseSiz'+'e')['setValue']([(0x3bf+-0xd2c+0x96e)/_0xc766bc['width'],(-0x63*0x2b+0x1cc2+-0xc20)/_0xc766bc['height']]);}for(let _0x352f98=0x775+0x897+-0xd*0x13c;_0x352f98<(_0x423ebe['cubemap']?-0x1cc9+-0x1167+-0x82*-0x5b:-0xb34+0x225d+-0x1728);_0x352f98++)if(_0x4b00cc===null||_0x352f98===_0x4b00cc){const _0x1f2ba7=new gt({'colorBuffer':_0x423ebe,'face':_0x352f98,'depth':!(-0x5*-0x292+0x11c9+-0x1ea2),'flipY':_0x580428['isWebGPU']});_0x2f43cd[-0x239*-0x8+0x15*-0xc1+-0x1f3]=_0x352f98,_0xa392c['setValue'](_0x2f43cd),Tr(_0x580428,_0x1f2ba7,_0x502556,_0x3251ff==null?void(-0x1433*-0x1+0x22a0+-0x1*0x36d3):_0x3251ff['rect']),_0x1f2ba7['destroy']();}return Q['popGpuMark'+'er'](_0x580428),!(0x25a4+0xa8e*-0x1+0x2*-0xd8b);}const Pd=(_0x4f7331,_0x2abd6e=-0xa*0x1eb+-0x1147*0x2+0x35bc)=>0xed8+-0x1*-0x1427+-0x5d5*0x6+Math['floor'](Math['log2'](Math['max'](_0x4f7331,_0x2abd6e))),xE=_0x26391f=>_0x26391f['textureHal'+'fFloatRend'+'erable'],TE=_0x349d25=>_0x349d25['textureFlo'+'atRenderab'+'le'],wE=_0x4a5590=>xE(_0x4a5590)?nt:TE(_0x4a5590)?Xt:Ne,EE=_0xd13201=>Ne,bE=(_0x388ed9,_0x4565ac,_0x1388ac,_0x555bc3)=>new _e(_0x388ed9,{'name':'lighting-'+_0x4565ac,'cubemap':!(-0x369*-0xb+-0x2690+0x10d),'width':_0x4565ac,'height':_0x4565ac,'format':_0x1388ac,'type':Bo,'addressU':ue,'addressV':ue,'mipmaps':!(-0x2457+-0xac1*-0x1+0x1997)});class zy{static['generateSk'+'yboxCubema'+'p'](_0x6b6345,_0x58e9bc){const _0x51458f=_0x6b6345['device'];Q['pushGpuMar'+'ker'](_0x51458f,'genSkyboxC'+'ubemap');const _0x4d1396=bE(_0x51458f,_0x58e9bc||(_0x6b6345['cubemap']?_0x6b6345['width']:_0x6b6345['width']/(0x2*-0xf73+-0xacb+0x29b5)),Ne);return vi(_0x6b6345,_0x4d1396,{'numSamples':0x400}),Q['popGpuMark'+'er'](_0x51458f),_0x4d1396;}static['generateLi'+'ghtingSour'+'ce'](_0x182e23,_0x5dba79){const _0x4b54d1=_0x182e23['device'];Q['pushGpuMar'+'ker'](_0x4b54d1,'genLightin'+'gSource');const _0x4ca45d=wE(_0x4b54d1),_0x2c7c2e=(_0x5dba79==null?void(0x659+0x91*0xb+-0xc94):_0x5dba79['target'])||new _e(_0x4b54d1,{'name':'lighting-s'+'ource','cubemap':!(0x41f*-0x5+0x1d0a+-0x86f),'width':(_0x5dba79==null?void(0x1*0x1389+0x1e0a+-0x3193):_0x5dba79['size'])||0x83f*0x2+0x1f4c+-0x2f4a,'height':(_0x5dba79==null?void(0x749*-0x2+0xb6b+0x327):_0x5dba79['size'])||-0xf7*0x4+0x1*-0x18e5+0x1d41,'format':_0x4ca45d,'type':_0x4ca45d===Ne?Bo:Ms,'addressU':ue,'addressV':ue,'mipmaps':!(0x265+-0x2cd*0x3+-0x602*-0x1)});return vi(_0x182e23,_0x2c7c2e,{'numSamples':_0x182e23['mipmaps']?0x176b+0x1a0e+-0x3178:0x25b6+-0x16be+-0x75*0x18}),Q['popGpuMark'+'er'](_0x4b54d1),_0x2c7c2e;}static['generateAt'+'las'](_0x48bc4e,_0x586b0e){const _0x420b1b=_0x48bc4e['device'],_0x598ec0=EE();Q['pushGpuMar'+'ker'](_0x420b1b,'genAtlas');const _0x19d640=(_0x586b0e==null?void(-0x2532+-0xecb+0x33fd):_0x586b0e['target'])||new _e(_0x420b1b,{'name':'envAtlas','width':(_0x586b0e==null?void(-0x1*-0x1b64+0x1*0x403+-0x1f67):_0x586b0e['size'])||0x2394+-0x1*0x277+0x1b*-0x127,'height':(_0x586b0e==null?void(0x1357+-0x5f*-0x58+-0x33ff*0x1):_0x586b0e['size'])||0x1c57+-0x5a1+-0x14b6,'format':_0x598ec0,'type':Bo,'projection':um,'addressU':ue,'addressV':ue,'mipmaps':!(-0x1748+0xa93*-0x1+-0x10ee*-0x2)});Q['pushGpuMar'+'ker'](_0x420b1b,'mipmaps');const _0x3c80a0=_0x19d640['width']/(-0x12f*0x9+0x1520+-0xf1*0x9),_0xb05f67=new re(-0x2*-0x5b7+0x1a1c+0xa*-0x3c1,0x4*-0x92f+-0x9fa*-0x1+0x112*0x19,(-0x18d2+-0x1*0x24f5+-0x1d*-0x233)*_0x3c80a0,(0xec1+0x13d6+-0x2197)*_0x3c80a0),_0x4d5b00=Pd(0x1aa1+-0x120*0x10+-0x7a1)-Pd(0xcc3+0x1efe+0x1*-0x2bbd);for(let _0xe94608=0x1fe5+-0x649+0x95*-0x2c;_0xe94608<_0x4d5b00;++_0xe94608)vi(_0x48bc4e,_0x19d640,{'numSamples':0x1,'rect':_0xb05f67,'seamPixels':_0x3c80a0}),_0xb05f67['x']+=_0xb05f67['w'],_0xb05f67['y']+=_0xb05f67['w'],_0xb05f67['z']=Math['max'](0x1e20+0xd*0x170+0xf*-0x341,Math['floor'](_0xb05f67['z']*(-0x2c3*0xa+-0x4*-0xdb+-0x26*-0xa3+0.5))),_0xb05f67['w']=Math['max'](0x1324+0x1aec+0x2e0f*-0x1,Math['floor'](_0xb05f67['w']*(0x1b82+0xf7b+-0x2afd+0.5)));Q['popGpuMark'+'er'](_0x420b1b),Q['pushGpuMar'+'ker'](_0x420b1b,'reflection'+'s'),_0xb05f67['set'](0x204f+-0x1923+-0x6*0x132,(-0x3*0xb9d+-0x1f06+0x42dd)*_0x3c80a0,(0x62*-0x1+0x956*-0x1+-0xc4*-0xe)*_0x3c80a0,(-0xf65*-0x2+0x5*-0x2cd+-0x1049)*_0x3c80a0);for(let _0x25b9ce=0x122b+0x21d9+-0x3403;_0x25b9ce<0x2*-0xdb9+0x14c*0x3+-0x1*-0x1795;++_0x25b9ce)vi(_0x48bc4e,_0x19d640,{'numSamples':(_0x586b0e==null?void(0x13*0x102+0x1d76+-0x309c):_0x586b0e['numReflect'+'ionSamples'])||-0x1*0x1e13+0x3cc*0x9+-0x1*0x19,'distribution':(_0x586b0e==null?void(-0xfcf+0x137*-0xb+-0x4*-0x74b):_0x586b0e['distributi'+'on'])||'ggx','specularPower':Math['max'](-0xab*0x22+0x1*-0x17a9+0x2e60,-0xa8e+0x1*-0x39f+0x162d>>_0x25b9ce*(0x1ddb+0xf15+-0x2cee)),'rect':_0xb05f67,'seamPixels':_0x3c80a0}),_0xb05f67['y']+=_0xb05f67['w'],_0xb05f67['z']=Math['max'](-0x2517+0xe*0x1b1+0xd6a,Math['floor'](_0xb05f67['z']*(0x1462+-0x3*0x676+0x8*-0x20+0.5))),_0xb05f67['w']=Math['max'](-0x11*0x29+0x1*0x175b+0x1*-0x14a1,Math['floor'](_0xb05f67['w']*(0x18*-0x89+0x20a3+0x13cb*-0x1+0.5)));return Q['popGpuMark'+'er'](_0x420b1b),Q['pushGpuMar'+'ker'](_0x420b1b,'ambient'),_0xb05f67['set']((-0x186b+-0xd5+0x4*0x670)*_0x3c80a0,(0x1*0xcbf+-0xb40+0x1)*_0x3c80a0,(-0x2*-0x1160+0x9aa+-0x2c2a)*_0x3c80a0,(-0x248+-0xa5b+0xcc3)*_0x3c80a0),vi(_0x48bc4e,_0x19d640,{'numSamples':(_0x586b0e==null?void(0x236b*0x1+-0x21e*0x11+0x93):_0x586b0e['numAmbient'+'Samples'])||-0x15db+-0x2*-0x12b9+-0x797,'distribution':'lambert','rect':_0xb05f67,'seamPixels':_0x3c80a0}),Q['popGpuMark'+'er'](_0x420b1b),Q['popGpuMark'+'er'](_0x420b1b),_0x19d640;}static['generatePr'+'efilteredA'+'tlas'](_0xd48b48,_0x50aae2){const _0x6409eb=_0xd48b48[0x12af*0x1+-0x26e2+0x1433]['device'],_0x1f2200=_0xd48b48[-0x3b*-0x23+0x9b3+-0x11c4]['format'],_0x2fd138=_0xd48b48[0xa91*0x1+-0x1*0x947+-0x14a]['type'];Q['pushGpuMar'+'ker'](_0x6409eb,'genPrefilt'+'eredAtlas');const _0x433db5=(_0x50aae2==null?void(-0x11b6+0x1*-0x3fb+0x15b1):_0x50aae2['target'])||new _e(_0x6409eb,{'name':'envPrefilt'+'eredAtlas','width':(_0x50aae2==null?void(-0x3*-0x757+-0x39a*-0x5+-0x2807):_0x50aae2['size'])||-0xc51*0x1+0xb*0x139+0xde,'height':(_0x50aae2==null?void(0x17*-0x191+-0x2436+0x1*0x483d):_0x50aae2['size'])||-0x1176+-0x49*-0x67+0x3b*-0x2b,'format':_0x1f2200,'type':_0x2fd138,'projection':um,'addressU':ue,'addressV':ue,'mipmaps':!(-0x1011+-0x27*-0xa9+0x9ad*-0x1)});Q['pushGpuMar'+'ker'](_0x6409eb,'mipmaps');const _0x2ca365=_0x433db5['width']/(-0x1*0x2029+-0xa3d*0x3+-0x18*-0x2b4),_0xe2543d=new re(-0x1ed7*-0x1+0xecc+0x1*-0x2da3,-0x127f+-0x252c+0x37ab,(0x1981+-0xca5+-0xadc)*_0x2ca365,(0x10*-0x1c0+0x6ba+0x1646)*_0x2ca365),_0xe41800=Pd(-0x113f*0x2+0xda3+-0x1*-0x16db);for(let _0x2f9c37=0x1*-0xb16+0x1cc4+-0x8d7*0x2;_0x2f9c37<_0xe41800;++_0x2f9c37)vi(_0xd48b48[-0x1*-0x21ab+0x52*-0x17+-0x1a4d*0x1],_0x433db5,{'numSamples':0x1,'rect':_0xe2543d,'seamPixels':_0x2ca365}),_0xe2543d['x']+=_0xe2543d['w'],_0xe2543d['y']+=_0xe2543d['w'],_0xe2543d['z']=Math['max'](0x4f+0x1c47+-0x1b*0x10f,Math['floor'](_0xe2543d['z']*(0x2704+-0x4de+-0x8d*0x3e+0.5))),_0xe2543d['w']=Math['max'](0x23*0x101+-0x829*0x2+-0x12d0,Math['floor'](_0xe2543d['w']*(0xf17*0x1+-0x1456+0x53f*0x1+0.5)));Q['popGpuMark'+'er'](_0x6409eb),Q['pushGpuMar'+'ker'](_0x6409eb,'reflection'+'s'),_0xe2543d['set'](-0x101c+-0x1*-0x223a+-0x121e,(-0x259*0xb+-0x161a+0x104f*0x3)*_0x2ca365,(0x2*0x2fd+-0x6dc+-0x1e2*-0x1)*_0x2ca365,(-0x1f4*0x9+-0x1826+-0xe6*-0x2f)*_0x2ca365);for(let _0x4fe074=-0x2f*0x4f+-0x2069*0x1+0x2eeb*0x1;_0x4fe074<_0xd48b48['length'];++_0x4fe074)vi(_0xd48b48[_0x4fe074],_0x433db5,{'numSamples':0x1,'rect':_0xe2543d,'seamPixels':_0x2ca365}),_0xe2543d['y']+=_0xe2543d['w'],_0xe2543d['z']=Math['max'](-0x1478+-0x93*-0x13+0x198*0x6,Math['floor'](_0xe2543d['z']*(-0x25f5+-0x1*-0x1813+0xde2+0.5))),_0xe2543d['w']=Math['max'](-0x2*0x100a+-0x45*-0x5e+-0xb*-0x9d,Math['floor'](_0xe2543d['w']*(0x13b5+0xf14*-0x1+0xf*-0x4f+0.5)));return Q['popGpuMark'+'er'](_0x6409eb),Q['pushGpuMar'+'ker'](_0x6409eb,'ambient'),_0xe2543d['set']((0x13d6+0x5*-0x153+-0xcb7)*_0x2ca365,(-0x1*-0x6df+-0x1d4b+-0x1*-0x17ec)*_0x2ca365,(0x694+-0xedb+0x887)*_0x2ca365,(0x2064*0x1+0x41c*0x7+-0x3d08)*_0x2ca365),_0x50aae2!=null&&_0x50aae2['legacyAmbi'+'ent']?vi(_0xd48b48[-0x1c2a+-0x3a5*-0x1+0x188a],_0x433db5,{'numSamples':0x1,'rect':_0xe2543d,'seamPixels':_0x2ca365}):vi(_0xd48b48[-0x4af+-0x184f+0x1cfe],_0x433db5,{'numSamples':(_0x50aae2==null?void(0x214+0x806+-0xa1a):_0x50aae2['numSamples'])||-0x1203+-0x1c46+0x3649,'distribution':'lambert','rect':_0xe2543d,'seamPixels':_0x2ca365}),Q['popGpuMark'+'er'](_0x6409eb),Q['popGpuMark'+'er'](_0x6409eb),_0x433db5;}}const AE={'aoPS':'1.57','clearCoatPS':'1.57','clearCoatGlossPS':'1.60','clearCoatNormalPS':'1.57','diffusePS':'1.57','emissivePS':'1.57','glossPS':'1.60','metalnessPS':'1.57','normalMapPS':'1.57','opacityPS':'1.57','parallaxPS':'1.57','sheenPS':'1.57','sheenGlossPS':'1.60','specularPS':'1.57','specularityFactorPS':'1.57','thicknessPS':'1.57','transmissionPS':'1.57','normalVertexPS':'1.55','aoDiffuseOccPS':'1.62','aoSpecOccPS':'2.6','clusteredLightPS':'1.62','clusteredLightShadowPS':'1.62','combinePS':'1.62','falloffInvSquaredPS':'1.62','falloffLinearPS':'1.62','lightDiffuseLambertPS':'1.62','lightSheenPS':'1.62','lightSpecularAnisoGGXPS':'1.62','lightSpecularBlinnPS':'1.62','ltcPS':'1.62','reflDirPS':'1.62','reflDirAnisoPS':'1.62','reflectionCCPS':'1.62','reflectionCubePS':'2.6','reflectionEnvPS':'2.6','reflectionEnvHQPS':'2.6','reflectionSpherePS':'2.6','reflectionSheenPS':'1.62','shadowCommonPS':'1.62','shadowCoordPS':'1.62','shadowCoordPerspZBufferPS':'1.62','shadowEVSMPS':'1.62','spotPS':'1.62','TBNPS':'1.62','endPS':'1.65','metalnessModulatePS':'1.65','outputAlphaPS':'1.65','outputAlphaPremulPS':'1.65','fresnelSchlickPS':'1.65','iridescenceDiffractionPS':'1.65','lightmapAddPS':'1.65','refractionCubePS':'1.70','refractionDynamicPS':'1.70'},f_={'ambientPrefilteredCubePS':'1.51','ambientPrefilteredCubeLodPS':'1.51','dpAtlasQuadPS':'1.51','genParaboloidPS':'1.51','prefilterCubemapPS':'1.51','reflectionDpAtlasPS':'1.51','reflectionPrefilteredCubePS':'1.51','reflectionPrefilteredCubeLodPS':'1.51','refractionPS':'1.56','combineClearCoatPS':'1.56','combineDiffusePS':'1.56','combineDiffuseSpecularPS':'1.56','combineDiffuseSpecularNoReflPS':'1.56','combineDiffuseSpecularNoReflSeparateAmbientPS':'1.56','combineDiffuseSpecularOldPS':'1.56','lightmapSingleVertPS':'1.55','normalMapFastPS':'1.55','specularAaNonePS':'1.55','specularAaToksvigPS':'1.55','specularAaToksvigFastPS':'1.55','skyboxEnvPS':'2.1','skyboxHDRPS':'2.1','shadowVSM8PS':'2.3','fogExpPS':'2.5','fogExp2PS':'2.5','fogLinearPS':'2.5','fogNonePS':'2.5','gamma1_0PS':'2.5','gamma2_2PS':'2.5','storeEVSMPS':'2.6','shadowEVSMnPS':'2.6','shadowVSM_commonPS':'2.6','shadowStandardPS':'2.6','shadowStandardGL2PS':'2.6','startVS':'2.6','endVS':'2.6','baseVS':'2.6','baseNineSlicedVS':'2.6','viewNormalVS':'2.6','lightmapDirAddPS':'2.6','TBNObjectSpacePS':'2.6','TBNderivativePS':'2.6','startPS':'2.6','outputAlphaOpaque':'2.6','outputAlphaPremul':'2.6','cubeMapProjectBoxPS':'2.6','cubeMapProjectNonePS':'2.6','envMultiplyPS':'2.6','envConstPS':'2.6','aoSpecOccConstPS':'2.6','aoSpecOccConstSimplePS':'2.6','aoSpecOccSimplePS':'2.6','ambientConstantPS':'2.6','ambientEnvPS':'2.6','ambientSHPS':'2.6','shadowSampleCoordPS':'2.6','diffuseDetailMapPS':'2.7','normalDetailMapPS':'2.7','normalXYPS':'2.7','normalXYZPS':'2.7','aoDetailMapPS':'2.7','lightmapDirPS':'2.7','lightmapSinglePS':'2.7','tangentBinormalVS':'2.7'},CE=(_0x312b29,_0x17b5e4)=>{const _0x507dae=_0x312b29['split']('.')['map'](_0x567cff=>parseInt(_0x567cff,-0x1*-0x1a35+0x253b+-0x3f66)),_0x5862ab=_0x17b5e4['split']('.')['map'](_0x15698b=>parseInt(_0x15698b,0xc7f+0x2364+0x3*-0xff3));return _0x507dae[0x3*0x5d5+0x1c06*-0x1+0x21b*0x5]<_0x5862ab[0x1*-0x2255+-0x170+0x23c5]||_0x507dae[-0x2*-0x1172+-0x1b59+-0x78b]===_0x5862ab[-0x46*-0x5b+-0x1820+-0xc2]&&_0x507dae[-0x1*0x1fbb+-0xb01*0x3+0x145*0x33]<_0x5862ab[0x2228+-0x2*-0xed5+-0x3fd1];},PE=(_0x2297f0,_0x105a37)=>{for(const _0x4cb7ec of _0x2297f0['keys']())if(f_['hasOwnProp'+'erty'](_0x4cb7ec)){const _0x35c70f=f_[_0x4cb7ec];w['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x4cb7ec+('\x27\x20was\x20remo'+'ved\x20in\x20API'+'\x20')+_0x35c70f+('\x20and\x20is\x20no'+'\x20longer\x20su'+'pported.'));}else{const _0x510ec0=AE[_0x4cb7ec];_0x510ec0&&(!_0x105a37||CE(_0x105a37,_0x510ec0))&&w['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x4cb7ec+('\x27\x20is\x20API\x20v'+'ersion\x20')+_0x510ec0+(',\x20but\x20the\x20'+'supplied\x20c'+'hunk\x20is\x20ve'+'rsion\x20')+(_0x105a37||'undefined')+('.\x20Please\x20u'+'pdate\x20to\x20t'+'he\x20latest\x20'+'API:\x20https'+'://develop'+'er.playcan'+'vas.com/us'+'er-manual/'+'graphics/s'+'hader-chun'+'k-migratio'+'ns/'));}},Md={'vertex_normal':gs,'vertex_tangent':yi,'vertex_texCoord0':is,'vertex_texCoord1':va,'vertex_color':Wt,'vertex_boneWeights':gi,'vertex_boneIndices':us};class ME{constructor(_0x2cb15e,_0x4ca289,_0x23162e=!(-0x68e*-0x2+0x2423+-0x7*0x709)){h(this,'varyingsCo'+'de',''),h(this,'device'),h(this,'options'),h(this,'shaderLang'+'uage'),h(this,'vDefines',new Map()),h(this,'fDefines',new Map()),h(this,'includes',new Map()),h(this,'chunks',null),(this['device']=_0x2cb15e,this['options']=_0x4ca289);const _0x242ba8=_0x4ca289['shaderChun'+'ks'];if(this['shaderLang'+'uage']=_0x2cb15e['isWebGPU']&&_0x23162e&&(_0x242ba8!=null&&_0x242ba8['useWGSL'])?it:Fe,this['attributes']={'vertex_position':Pe},_0x4ca289['userAttrib'+'utes']){for(const [_0x2025f4,_0x3bc7ad]of Object['entries'](_0x4ca289['userAttrib'+'utes']))this['attributes'][_0x3bc7ad]=_0x2025f4;}const _0x8e9cab=Ce['get'](_0x2cb15e,this['shaderLang'+'uage']);if(this['chunks']=new Map(_0x8e9cab),_0x242ba8){const _0x412934=this['shaderLang'+'uage']===Fe?_0x242ba8['glsl']:_0x242ba8['wgsl'];w['call'](()=>{PE(_0x412934,_0x242ba8['version']);}),_0x412934['forEach']((_0x4e8337,_0xe23fed)=>{for(const _0x1efe64 in Md)Md['hasOwnProp'+'erty'](_0x1efe64)&&_0x4e8337['indexOf'](_0x1efe64)>=0x2*0x989+-0x24e1+0x11cf&&(this['attributes'][_0x1efe64]=Md[_0x1efe64]);this['chunks']['set'](_0xe23fed,_0x4e8337);});}this['shaderPass'+'Info']=Si['get'](this['device'])['getByIndex'](_0x4ca289['pass']),this['shadowPass']=this['shaderPass'+'Info']['isShadow'],this['lighting']=_0x4ca289['lights']['length']>-0x2129+0x4f*0x6+0x1*0x1f4f||_0x4ca289['dirLightMa'+'pEnabled']||_0x4ca289['clusteredL'+'ightingEna'+'bled'],this['reflection'+'s']=_0x4ca289['reflection'+'Source']!==_r,this['needsNorma'+'l']=this['lighting']||this['reflection'+'s']||_0x4ca289['useSpecula'+'r']||_0x4ca289['ambientSH']||_0x4ca289['useHeights']||_0x4ca289['enableGGXS'+'pecular']||_0x4ca289['clusteredL'+'ightingEna'+'bled']&&!this['shadowPass']||_0x4ca289['useClearCo'+'atNormals'],this['needsNorma'+'l']=this['needsNorma'+'l']&&!this['shadowPass'],this['needsScene'+'Color']=_0x4ca289['useDynamic'+'Refraction'],this['needsScree'+'nSize']=_0x4ca289['useDynamic'+'Refraction'],this['needsTrans'+'forms']=_0x4ca289['useDynamic'+'Refraction'],this['vshader']=null,this['fshader']=null;}['fDefineSet'](_0x27c18e,_0x1ccf16,_0x19c24f=''){_0x27c18e&&this['fDefines']['set'](_0x1ccf16,_0x19c24f);}['generateVe'+'rtexShader'](_0x5f1f88,_0x6d0de0,_0x4722c3){const {options:_0x18238f,vDefines:_0x51ddb3,attributes:_0x264c8d}=this,_0x51da6b=new Map();if(_0x51da6b['set']('vPositionW','vec3'),(_0x18238f['nineSliced'+'Mode']===Pt||_0x18238f['nineSliced'+'Mode']===Mt)&&_0x51ddb3['set']('NINESLICED',!(-0xbd2+-0x268e+-0x1a*-0x1f0)),this['options']['linearDept'+'h']&&(_0x51ddb3['set']('LINEAR_DEP'+'TH',!(-0xb5*-0x32+0x1*-0xaae+-0x18ac)),_0x51da6b['set']('vLinearDep'+'th','float')),this['needsNorma'+'l']&&_0x51ddb3['set']('NORMALS',!(0xd73+-0x1391*0x1+0x61e)),this['options']['useInstanc'+'ing']){const _0x4e423d=Ce['get'](this['device'],this['shaderLang'+'uage']);this['chunks']['get']('transformI'+'nstancingV'+'S')===_0x4e423d['get']('transformI'+'nstancingV'+'S')&&(_0x264c8d['instance_l'+'ine1']=sp,_0x264c8d['instance_l'+'ine2']=ip,_0x264c8d['instance_l'+'ine3']=rp,_0x264c8d['instance_l'+'ine4']=bn);}this['needsNorma'+'l']&&(_0x264c8d['vertex_nor'+'mal']=gs,_0x51da6b['set']('vNormalW','vec3'),_0x18238f['hasTangent'+'s']&&(_0x18238f['useHeights']||_0x18238f['useNormals']||_0x18238f['useClearCo'+'atNormals']||_0x18238f['enableGGXS'+'pecular'])?(_0x51ddb3['set']('TANGENTS',!(0x1*0xf1f+-0x24b2+0x1593)),_0x264c8d['vertex_tan'+'gent']=yi,_0x51da6b['set']('vTangentW','vec3'),_0x51da6b['set']('vBinormalW','vec3')):_0x18238f['enableGGXS'+'pecular']&&(_0x51ddb3['set']('GGX_SPECUL'+'AR',!(0xc72+0x4d*0x6+-0xe40)),_0x51da6b['set']('vObjectSpa'+'ceUpW','vec3')));const _0x12410b=-0x2*0x647+0x2*0x6a3+-0xb6;for(let _0x3adcdc=-0x3b9*-0x1+0x98a+-0x1e5*0x7;_0x3adcdc<_0x12410b;_0x3adcdc++)_0x5f1f88[_0x3adcdc]&&(_0x51ddb3['set']('UV'+_0x3adcdc,!(-0x1*0x26f9+-0xd*0x226+0x615*0xb)),_0x264c8d['vertex_tex'+'Coord'+_0x3adcdc]='TEXCOORD'+_0x3adcdc),_0x6d0de0[_0x3adcdc]&&(_0x51ddb3['set']('UV'+_0x3adcdc+('_UNMODIFIE'+'D'),!(0x13b9+-0x25cc+0x1213)),_0x51da6b['set']('vUv'+_0x3adcdc,'vec2'));let _0x476bd8=-0x238f*-0x1+0x1*-0x23f+0xa4*-0x34;const _0x2e4e5c=new Set();_0x4722c3['forEach'](_0x5c6920=>{const {id:_0x374dd0,uv:_0x127392,name:_0x5892c0}=_0x5c6920,_0x1e2031=_0x374dd0+_0x127392*(0xe7e+-0x1*0x2383+0x9*0x261);if(!_0x2e4e5c['has'](_0x1e2031)){_0x2e4e5c['add'](_0x1e2031),_0x51da6b['set']('vUV'+_0x127392+'_'+_0x374dd0,'vec2');const _0x3015fc='texture_'+_0x5892c0+('MapTransfo'+'rm');_0x51ddb3['set']('{TRANSFORM'+'_NAME_'+_0x476bd8+'}',_0x3015fc),_0x51ddb3['set']('{TRANSFORM'+'_UV_'+_0x476bd8+'}',_0x127392),_0x51ddb3['set']('{TRANSFORM'+'_ID_'+_0x476bd8+'}',_0x374dd0),_0x476bd8++;}}),_0x51ddb3['set']('UV_TRANSFO'+'RMS_COUNT',_0x476bd8),_0x18238f['vertexColo'+'rs']&&(_0x264c8d['vertex_col'+'or']=Wt,_0x51ddb3['set']('VERTEX_COL'+'OR',!(0x5*0x62b+0x1e7b+-0x3d52)),_0x51da6b['set']('vVertexCol'+'or','vec4')),_0x18238f['useMsdf']&&_0x18238f['msdfTextAt'+'tribute']&&(_0x264c8d['vertex_out'+'lineParame'+'ters']=ko,_0x264c8d['vertex_sha'+'dowParamet'+'ers']=Uo,_0x51ddb3['set']('MSDF',!(-0x10f5+-0x1f5a+-0x95*-0x53))),(_0x18238f['useMorphPo'+'sition']||_0x18238f['useMorphNo'+'rmal'])&&(_0x51ddb3['set']('MORPHING',!(-0x1010*-0x1+-0xb*-0x247+-0x291d)),_0x18238f['useMorphTe'+'xtureBased'+'Int']&&_0x51ddb3['set']('MORPHING_I'+'NT',!(0xe33+-0x351*-0x9+-0x2c0c)),_0x18238f['useMorphPo'+'sition']&&_0x51ddb3['set']('MORPHING_P'+'OSITION',!(-0xd9f+-0x1895+0x2634)),_0x18238f['useMorphNo'+'rmal']&&_0x51ddb3['set']('MORPHING_N'+'ORMAL',!(-0x37c*0x9+-0x1961*-0x1+0x5fb*0x1)),_0x264c8d['morph_vert'+'ex_id']=bn),_0x18238f['skin']&&(_0x264c8d['vertex_bon'+'eIndices']=us,_0x18238f['batch']?_0x51ddb3['set']('BATCH',!(0xc23+-0x24f0+0x18cd)):(_0x264c8d['vertex_bon'+'eWeights']=gi,_0x51ddb3['set']('SKIN',!(0xaba*-0x3+-0x1750+0x1*0x377e)))),_0x18238f['useInstanc'+'ing']&&_0x51ddb3['set']('INSTANCING',!(0x160c+0x2*0x88f+0x9*-0x45a)),_0x18238f['screenSpac'+'e']&&_0x51ddb3['set']('SCREENSPAC'+'E',!(-0xabd+0x185b+0x1f2*-0x7)),_0x18238f['pixelSnap']&&_0x51ddb3['set']('PIXELSNAP',!(0xb17+-0x13c4+0x8ad)),_0x51da6b['forEach']((_0x1a7f24,_0x45ad06)=>{this['varyingsCo'+'de']+='#define\x20VA'+'RYING_'+_0x45ad06['toUpperCas'+'e']()+'\x0a',this['varyingsCo'+'de']+=this['shaderLang'+'uage']===it?'varying\x20'+_0x45ad06+':\x20'+JS['get'](_0x1a7f24)+';\x0a':'varying\x20'+_0x1a7f24+'\x20'+_0x45ad06+';\x0a';}),this['includes']['set']('varyingsVS',this['varyingsCo'+'de']),this['includes']['set']('varyingsPS',this['varyingsCo'+'de']),this['vshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}['_setupLigh'+'tingDefine'+'s'](_0x38b8a7,_0x353eee){const _0x3c6906=this['fDefines'],_0x1978dc=this['options'];if(this['fDefines']['set']('LIGHT_COUN'+'T',_0x1978dc['lights']['length']),_0x38b8a7&&_0x3c6906['set']('AREA_LIGHT'+'S',!(-0xb*-0x19f+-0x3c5+-0xe10)),_0x353eee&&this['lighting']&&(_0x3c6906['set']('LIT_CLUSTE'+'RED_LIGHTS',!(0x369+-0x208f*-0x1+-0x23f8)),_0x1978dc['clusteredL'+'ightingCoo'+'kiesEnable'+'d']&&_0x3c6906['set']('CLUSTER_CO'+'OKIES',!(-0x2464+0x3*-0xa5d+0x437b)),_0x1978dc['clusteredL'+'ightingAre'+'aLightsEna'+'bled']&&_0x3c6906['set']('CLUSTER_AR'+'EALIGHTS',!(0x111c+0x1d2a+-0x2e46)),_0x1978dc['lightMaskD'+'ynamic']&&_0x3c6906['set']('CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS',!(0xb*0x295+0x204+-0x1e6b)),_0x1978dc['clusteredL'+'ightingSha'+'dowsEnable'+'d']&&!_0x1978dc['noShadow'])){const _0x595f85=Xi['get'](_0x1978dc['clusteredL'+'ightingSha'+'dowType']);_0x3c6906['set']('CLUSTER_SH'+'ADOWS',!(0xe3d+-0x151+0x33b*-0x4)),_0x3c6906['set']('SHADOW_KIN'+'D_'+_0x595f85['kind'],!(0x6aa*0x1+0x108c*-0x1+-0x17*-0x6e)),_0x3c6906['set']('CLUSTER_SH'+'ADOW_TYPE_'+_0x595f85['kind'],!(-0x1*-0x2487+0x4*-0x3e1+0x1*-0x1503));}for(let _0x229b91=0x2317+-0x1753+-0xbc4;_0x229b91<_0x1978dc['lights']['length'];_0x229b91++){const _0x2891d3=_0x1978dc['lights'][_0x229b91],_0x38dfaa=_0x2891d3['_type'];if(_0x353eee&&_0x38dfaa!==ve)continue;const _0x25d3ee=_0x38b8a7&&_0x2891d3['_shape']?_0x2891d3['_shape']:js,_0x204b0f=_0x2891d3['_shadowTyp'+'e'],_0x3e892b=_0x2891d3['castShadow'+'s']&&!_0x1978dc['noShadow'],_0x5ba95f=Xi['get'](_0x204b0f);w['assert'](_0x5ba95f),_0x3c6906['set']('LIGHT'+_0x229b91,!(-0x1*-0x17b+-0xdb3+-0x2*-0x61c)),_0x3c6906['set']('LIGHT'+_0x229b91+'TYPE',''+Um[_0x38dfaa]),_0x3c6906['set']('LIGHT'+_0x229b91+'SHADOWTYPE',''+_0x5ba95f['name']),_0x3c6906['set']('LIGHT'+_0x229b91+'SHAPE',''+JT[_0x25d3ee]),_0x3c6906['set']('LIGHT'+_0x229b91+'FALLOFF',''+ew[_0x2891d3['_falloffMo'+'de']]),_0x2891d3['affectSpec'+'ularity']&&_0x3c6906['set']('LIGHT'+_0x229b91+('AFFECT_SPE'+'CULARITY'),!(-0x2*-0x12c3+0xee9+-0x346f)),_0x2891d3['_cookie']&&(_0x38dfaa===Ze&&!_0x2891d3['_cookie']['_cubemap']||_0x38dfaa===Ke&&_0x2891d3['_cookie']['_cubemap'])&&(_0x3c6906['set']('LIGHT'+_0x229b91+'COOKIE',!(0x1*-0x1a35+-0xbc5*0x1+0x25fa)),_0x3c6906['set']('{LIGHT'+_0x229b91+('COOKIE_CHA'+'NNEL}'),_0x2891d3['_cookieCha'+'nnel']),_0x38dfaa===Ze&&(_0x2891d3['_cookieTra'+'nsform']&&_0x3c6906['set']('LIGHT'+_0x229b91+('COOKIE_TRA'+'NSFORM'),!(0xbbc+-0x70*0x43+0x1194)),_0x2891d3['_cookieFal'+'loff']&&_0x3c6906['set']('LIGHT'+_0x229b91+('COOKIE_FAL'+'LOFF'),!(-0x4b5+0x3a0+0x115*0x1)))),_0x3e892b&&(_0x3c6906['set']('LIGHT'+_0x229b91+'CASTSHADOW',!(-0x1ce5+-0xfad+0x2c92)),_0x5ba95f['pcf']&&_0x3c6906['set']('LIGHT'+_0x229b91+'SHADOW_PCF',!(0x2349+0x471+-0x27ba)),_0x2891d3['_normalOff'+'setBias']&&!_0x2891d3['_isVsm']&&_0x3c6906['set']('LIGHT'+_0x229b91+('_SHADOW_SA'+'MPLE_NORMA'+'L_OFFSET'),!(0x15ca+0x8*-0x41c+0xb16)),_0x38dfaa===ve&&(_0x3c6906['set']('LIGHT'+_0x229b91+('_SHADOW_SA'+'MPLE_ORTHO'),!(0xd7e+-0x13d4+0x656)),_0x2891d3['cascadeBle'+'nd']>-0x130c*-0x2+-0x1*0x1067+-0x15b1&&_0x3c6906['set']('LIGHT'+_0x229b91+('_SHADOW_CA'+'SCADE_BLEN'+'D'),!(-0x140c*-0x1+0xca6+0x87*-0x3e)),_0x2891d3['numCascade'+'s']>-0x1f8c+-0x5f3*0x6+-0x37*-0x139&&_0x3c6906['set']('LIGHT'+_0x229b91+('_SHADOW_CA'+'SCADES'),!(-0x9*-0x35d+0x2*0xd6d+0x391f*-0x1))),(_0x5ba95f['pcf']||_0x5ba95f['pcss']||this['device']['isWebGPU'])&&_0x3c6906['set']('LIGHT'+_0x229b91+('_SHADOW_SA'+'MPLE_SOURC'+'E_ZBUFFER'),!(0x163b+0x1097+0x2*-0x1369)),_0x38dfaa===Ke&&_0x3c6906['set']('LIGHT'+_0x229b91+('_SHADOW_SA'+'MPLE_POINT'),!(0x1*-0x2596+0x11ef+-0x183*-0xd))),_0x3e892b&&(_0x3c6906['set']('SHADOW_KIN'+'D_'+_0x5ba95f['kind'],!(-0x1509*-0x1+-0x600+-0xf09)),_0x38dfaa===ve&&_0x3c6906['set']('SHADOW_DIR'+'ECTIONAL',!(-0x17*0x85+0x2*-0xcd2+-0x2597*-0x1)));}}['prepareFor'+'wardPass'](_0x902de4){const {options:_0x368a78}=this,_0x5cbbc3=_0x368a78['clusteredL'+'ightingEna'+'bled']&&_0x368a78['clusteredL'+'ightingAre'+'aLightsEna'+'bled']||_0x368a78['lights']['some'](_0x846cd0=>_0x846cd0['_shape']&&_0x846cd0['_shape']!==js),_0x1d3144=!_0x368a78['lightMapEn'+'abled']||_0x368a78['lightMapWi'+'thoutAmbie'+'nt'],_0x51043c=this['needsNorma'+'l']&&(_0x368a78['useNormals']||_0x368a78['useClearCo'+'atNormals']||_0x368a78['enableGGXS'+'pecular']&&!_0x368a78['useHeights']);_0x368a78['useSpecula'+'r']&&(this['fDefineSet'](!(-0x16a0+0x25e1+-0xf41),'LIT_SPECUL'+'AR'),this['fDefineSet'](this['reflection'+'s'],'LIT_REFLEC'+'TIONS'),this['fDefineSet'](_0x368a78['useClearCo'+'at'],'LIT_CLEARC'+'OAT'),this['fDefineSet'](_0x368a78['fresnelMod'+'el']>0x31*0x6e+0x1*0x1e23+-0x3331,'LIT_SPECUL'+'AR_FRESNEL'),this['fDefineSet'](_0x368a78['useSheen'],'LIT_SHEEN'),this['fDefineSet'](_0x368a78['useIridesc'+'ence'],'LIT_IRIDES'+'CENCE')),this['fDefineSet'](this['lighting']&&_0x368a78['useSpecula'+'r']||this['reflection'+'s'],'LIT_SPECUL'+'AR_OR_REFL'+'ECTION'),this['fDefineSet'](this['needsScene'+'Color'],'LIT_SCENE_'+'COLOR'),this['fDefineSet'](this['needsScree'+'nSize'],'LIT_SCREEN'+'_SIZE'),this['fDefineSet'](this['needsTrans'+'forms'],'LIT_TRANSF'+'ORMS'),this['fDefineSet'](this['needsNorma'+'l'],'LIT_NEEDS_'+'NORMAL'),this['fDefineSet'](this['lighting'],'LIT_LIGHTI'+'NG'),this['fDefineSet'](_0x368a78['useMetalne'+'ss'],'LIT_METALN'+'ESS'),this['fDefineSet'](_0x368a78['enableGGXS'+'pecular'],'LIT_GGX_SP'+'ECULAR'),this['fDefineSet'](_0x368a78['useSpecula'+'rityFactor'],'LIT_SPECUL'+'ARITY_FACT'+'OR'),this['fDefineSet'](_0x368a78['useCubeMap'+'Rotation'],'CUBEMAP_RO'+'TATION'),this['fDefineSet'](_0x368a78['occludeSpe'+'cularFloat'],'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT'),this['fDefineSet'](_0x368a78['separateAm'+'bient'],'LIT_SEPARA'+'TE_AMBIENT'),this['fDefineSet'](_0x368a78['twoSidedLi'+'ghting'],'LIT_TWO_SI'+'DED_LIGHTI'+'NG'),this['fDefineSet'](_0x368a78['lightMapEn'+'abled'],'LIT_LIGHTM'+'AP'),this['fDefineSet'](_0x368a78['dirLightMa'+'pEnabled'],'LIT_DIR_LI'+'GHTMAP'),this['fDefineSet'](_0x368a78['skyboxInte'+'nsity']>0x19e9+0x1993+-0x337c,'LIT_SKYBOX'+'_INTENSITY'),this['fDefineSet'](_0x368a78['clusteredL'+'ightingSha'+'dowsEnable'+'d'],'LIT_CLUSTE'+'RED_SHADOW'+'S'),this['fDefineSet'](_0x368a78['clusteredL'+'ightingAre'+'aLightsEna'+'bled'],'LIT_CLUSTE'+'RED_AREA_L'+'IGHTS'),this['fDefineSet'](_0x51043c,'LIT_TBN'),this['fDefineSet'](_0x1d3144,'LIT_ADD_AM'+'BIENT'),this['fDefineSet'](_0x368a78['hasTangent'+'s'],'LIT_TANGEN'+'TS'),this['fDefineSet'](_0x368a78['useNormals'],'LIT_USE_NO'+'RMALS'),this['fDefineSet'](_0x368a78['useClearCo'+'atNormals'],'LIT_USE_CL'+'EARCOAT_NO'+'RMALS'),this['fDefineSet'](_0x368a78['useRefract'+'ion'],'LIT_REFRAC'+'TION'),this['fDefineSet'](_0x368a78['useDynamic'+'Refraction'],'LIT_DYNAMI'+'C_REFRACTI'+'ON'),this['fDefineSet'](_0x368a78['dispersion'],'LIT_DISPER'+'SION'),this['fDefineSet'](_0x368a78['useHeights'],'LIT_HEIGHT'+'S'),this['fDefineSet'](_0x368a78['opacityFad'+'esSpecular'],'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR'),this['fDefineSet'](_0x368a78['alphaToCov'+'erage'],'LIT_ALPHA_'+'TO_COVERAG'+'E'),this['fDefineSet'](_0x368a78['alphaTest'],'LIT_ALPHA_'+'TEST'),this['fDefineSet'](_0x368a78['useMsdf'],'LIT_MSDF'),this['fDefineSet'](_0x368a78['ssao'],'LIT_SSAO'),this['fDefineSet'](_0x368a78['useAo'],'LIT_AO'),this['fDefineSet'](_0x368a78['occludeDir'+'ect'],'LIT_OCCLUD'+'E_DIRECT'),this['fDefineSet'](_0x368a78['msdfTextAt'+'tribute'],'LIT_MSDF_T'+'EXT_ATTRIB'+'UTE'),this['fDefineSet'](_0x368a78['diffuseMap'+'Enabled'],'LIT_DIFFUS'+'E_MAP'),this['fDefineSet'](_0x368a78['shadowCatc'+'her'],'LIT_SHADOW'+'_CATCHER'),this['fDefineSet'](!(0x24f7+0x14b8+-0x1*0x39af),'LIT_FRESNE'+'L_MODEL',ZT[_0x368a78['fresnelMod'+'el']]),this['fDefineSet'](!(0x1a48+0xfc5+-0x1*0x2a0d),'LIT_NONE_S'+'LICE_MODE',dw[_0x368a78['nineSliced'+'Mode']]),this['fDefineSet'](!(-0x171+0xfb*0x7+-0x56c),'LIT_BLEND_'+'TYPE',uy[_0x368a78['blendType']]),this['fDefineSet'](!(0xab8+0x2193+-0x29b*0x11),'LIT_CUBEMA'+'P_PROJECTI'+'ON',nw[_0x368a78['cubeMapPro'+'jection']]),this['fDefineSet'](!(-0x1*-0xa85+0x2213+0x593*-0x8),'LIT_OCCLUD'+'E_SPECULAR',lw[_0x368a78['occludeSpe'+'cular']]),this['fDefineSet'](!(-0x9f+0x2583+-0x939*0x4),'LIT_REFLEC'+'TION_SOURC'+'E',cw[_0x368a78['reflection'+'Source']]),this['fDefineSet'](!(-0x16f8+0xeee+0x2*0x405),'LIT_AMBIEN'+'T_SOURCE',hw[_0x368a78['ambientSou'+'rce']]),this['fDefineSet'](!(0xfd0+-0x7e3+0x7ed*-0x1),'{lightingU'+'v}',_0x902de4??''),this['fDefineSet'](!(-0x245c+0xa47+0x1a15),'{reflectio'+'nDecode}',Sr['decodeFunc'](_0x368a78['reflection'+'Encoding'])),this['fDefineSet'](!(-0x2*-0x93a+0x16c+-0x13e0),'{reflectio'+'nCubemapDe'+'code}',Sr['decodeFunc'](_0x368a78['reflection'+'CubemapEnc'+'oding'])),this['fDefineSet'](!(-0x2519*0x1+-0x32f*0x8+0x3e91),'{ambientDe'+'code}',Sr['decodeFunc'](_0x368a78['ambientEnc'+'oding'])),this['_setupLigh'+'tingDefine'+'s'](_0x5cbbc3,_0x368a78['clusteredL'+'ightingEna'+'bled']);}['prepareSha'+'dowPass'](){const {options:_0x5bedb2}=this,_0x5dd13d=this['shaderPass'+'Info']['lightType'],_0x1c9fb6=this['shaderPass'+'Info']['shadowType'],_0x361f01=Xi['get'](_0x1c9fb6);w['assert'](_0x361f01);const _0x319a9f=_0x5dd13d===ve||!_0x361f01['vsm']&&_0x5dd13d===Ze;this['fDefineSet'](_0x319a9f,'PERSPECTIV'+'E_DEPTH'),this['fDefineSet'](!(-0xa31+0x329*0xa+-0x1569),'LIGHT_TYPE',''+Um[_0x5dd13d]),this['fDefineSet'](!(0x1*0xb4e+0xefb+-0x3*0x8c3),'SHADOW_TYP'+'E',''+_0x361f01['name']),this['fDefineSet'](_0x5bedb2['alphaTest'],'LIT_ALPHA_'+'TEST');}['generateFr'+'agmentShad'+'er'](_0x24b20a,_0x26a9e7,_0x44bf5d){const _0x459615=this['options'];this['includes']['set']('frontendDe'+'clPS',_0x24b20a??''),this['includes']['set']('frontendCo'+'dePS',_0x26a9e7??''),_0x459615['pass']===Wn||_0x459615['pass']===vl||(this['shadowPass']?this['prepareSha'+'dowPass']():this['prepareFor'+'wardPass'](_0x44bf5d)),this['fshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}}class Vy{constructor(){h(this,'hasTangent'+'s',!(-0x1323+0xb1f*0x1+-0x1*-0x805)),h(this,'shaderChun'+'ks',null),h(this,'pass',0x1*-0x19bf+0x1f3*-0x3+0x7e6*0x4),h(this,'alphaTest',!(-0x11e*0x17+-0x13*-0x1ca+0xc1*-0xb)),h(this,'blendType',Cs),h(this,'separateAm'+'bient',!(-0x2270+0x19c8+-0x3*-0x2e3)),h(this,'screenSpac'+'e',!(-0xa5*0x13+0x1382*-0x2+0xc1*0x44)),h(this,'skin',!(0x3ed+-0x1a85+0x1699*0x1)),h(this,'batch',!(0x1b*0xa3+0x1e3a+-0x2f6a)),h(this,'useInstanc'+'ing',!(-0x3d*-0x18+-0x19c2+-0x1*-0x140b)),h(this,'useMorphPo'+'sition',!(-0x1*-0x86e+-0x10f9+0x88c)),h(this,'useMorphNo'+'rmal',!(0x53+0x14b*0x1d+0xc9b*-0x3)),h(this,'useMorphTe'+'xtureBased'+'Int',!(0x516+-0x2*0x3df+0x2a9)),h(this,'nineSliced'+'Mode',-0x35d+0x11*0x7c+-0x1d*0x2b),h(this,'clusteredL'+'ightingEna'+'bled',!(-0x69*0x6+-0xeef+0x1165)),h(this,'clusteredL'+'ightingCoo'+'kiesEnable'+'d',!(-0x1*0x2221+-0x1871+0x3a93)),h(this,'clusteredL'+'ightingSha'+'dowsEnable'+'d',!(-0x1dfe*0x1+0x1fe5+-0x9*0x36)),h(this,'clusteredL'+'ightingSha'+'dowType',0x11f4+-0xa2*-0x27+-0x2aa2),h(this,'clusteredL'+'ightingAre'+'aLightsEna'+'bled',!(-0x17ee*-0x1+0x1a3+0x2*-0xcc8)),h(this,'vertexColo'+'rs',!(0x62e+-0x16f5+-0x166*-0xc)),h(this,'lightMapEn'+'abled',!(0x934+0x1f8f+0x11a*-0x25)),h(this,'dirLightMa'+'pEnabled',!(0x1a6+0x1fe7+-0x218c)),h(this,'useHeights',!(0xb*0x89+0x4a3*-0x7+0x1a93*0x1)),h(this,'useNormals',!(0x2fb*-0x4+0x13bf+-0x8f*0xe)),h(this,'useClearCo'+'atNormals',!(0x1931*0x1+0x6cd+-0x1af*0x13)),h(this,'useAo',!(0x15d3+-0x1b64+0x17*0x3e)),h(this,'diffuseMap'+'Enabled',!(0x5c1*0x6+-0x12b1+-0xfd4)),h(this,'pixelSnap',!(0x9f5+-0x1c7b+0x1287)),h(this,'ambientSH',!(0x59e*-0x6+-0x462+0x2617)),h(this,'ssao',!(0x5*-0x5e3+-0x10b+0x33*0x99)),h(this,'twoSidedLi'+'ghting',!(-0xe08+0x106*-0x4+0x1221)),h(this,'occludeDir'+'ect',!(-0x355*0x3+-0xe05+-0x2b*-0x8f)),h(this,'occludeSpe'+'cular',-0x1*0x13a8+-0x25ad+0x3955),h(this,'occludeSpe'+'cularFloat',!(0x1*0x1007+-0x1f2d+-0x1af*-0x9)),h(this,'useMsdf',!(0x11*0x16+0x11b9+-0x132e)),h(this,'msdfTextAt'+'tribute',!(-0xd01*0x3+-0x43c+0x2b40)),h(this,'alphaToCov'+'erage',!(-0x1e2c+-0x101*0x15+0x2d9*0x12)),h(this,'opacityFad'+'esSpecular',!(-0x2205+-0x8ec*-0x1+0x2ca*0x9)),h(this,'opacityDit'+'her',ua),h(this,'opacitySha'+'dowDither',ua),h(this,'cubeMapPro'+'jection',-0x1*-0x1fa7+-0x3eb+0xa*-0x2c6),h(this,'useSpecula'+'r',!(-0x1*0x8db+-0x4f5+0xdd1)),h(this,'useSpecula'+'rityFactor',!(0x9*0x16d+-0x39*0x3f+0x133*0x1)),h(this,'enableGGXS'+'pecular',!(0x9*0x15f+0x1664*0x1+0x23*-0xfe)),h(this,'fresnelMod'+'el',-0x135*-0xf+0x17ce+-0x1*0x29e9),h(this,'useRefract'+'ion',!(0x2263*0x1+0x12e7+-0x3549)),h(this,'useClearCo'+'at',!(-0x14c6*0x1+-0x1*-0x159b+-0x2*0x6a)),h(this,'useSheen',!(-0x187d+-0xd*-0x1a7+0x303)),h(this,'useIridesc'+'ence',!(0x1*0x1fe8+-0x73f+-0x20e*0xc)),h(this,'useMetalne'+'ss',!(0x5*-0x485+-0xf48+0x25e2)),h(this,'useDynamic'+'Refraction',!(-0x645+0x25ca*0x1+0xfc2*-0x2)),h(this,'dispersion',!(0x1b07+0x24*-0x2d+-0xa59*0x2)),h(this,'fog',Hn),h(this,'gamma',yl),h(this,'toneMap',-(0x21ef+-0x25ab+-0x13f*-0x3)),h(this,'reflection'+'Source',_r),h(this,'reflection'+'Encoding',null),h(this,'reflection'+'CubemapEnc'+'oding',null),h(this,'ambientSou'+'rce','constant'),h(this,'ambientEnc'+'oding',null),h(this,'skyboxInte'+'nsity',0x6d5+0x5*-0x682+-0x2*-0xcdb),h(this,'useCubeMap'+'Rotation',!(0x1788+-0x27*-0xd3+-0x37ac)),h(this,'lightMapWi'+'thoutAmbie'+'nt',!(-0x2266+-0x1*0x12fd+-0x1*-0x3564)),h(this,'lights',[]),h(this,'noShadow',!(-0xfc4+0x21a5+-0x11e0)),h(this,'lightMaskD'+'ynamic',0x2220+-0x431+-0x1def),h(this,'userAttrib'+'utes',{}),h(this,'linearDept'+'h',!(0x461+0xad6+-0x3b*0x42)),h(this,'shadowCatc'+'her',!(-0x1999+-0x1*-0x885+0x1*0x1115));}}class Qo{constructor(){h(this,'defines',new Map()),h(this,'forceUv1',!(-0x2413+-0x1*-0x229a+0x1b*0xe)),h(this,'specularTi'+'nt',!(0x55*0x29+0x79f*-0x5+0x1*0x187f)),h(this,'metalnessT'+'int',!(-0x249b*0x1+0x913+0x35*0x85)),h(this,'glossTint',!(-0x1d44+0xd*-0x1a5+0x32a6)),h(this,'emissiveEn'+'coding','linear'),h(this,'lightMapEn'+'coding','linear'),h(this,'packedNorm'+'al',!(-0x389*0x2+-0x35f*0x7+0x1eac)),h(this,'normalDeta'+'ilPackedNo'+'rmal',!(-0x5b1*-0x2+-0x1e5c+0x12fb)),h(this,'clearCoatP'+'ackedNorma'+'l',!(-0xf5+0x1*-0x224f+0x2345*0x1)),h(this,'glossInver'+'t',!(-0xa7a+-0x2335+0x2db0)),h(this,'sheenGloss'+'Invert',!(-0x1*-0x18bf+0x1cf*0x8+-0x2736)),h(this,'clearCoatG'+'lossInvert',!(0x46d*-0x1+0x1b5b+-0x16ed)),h(this,'useAO',!(-0x441+0xe53+0x35b*-0x3)),h(this,'litOptions',new Vy());}get['pass'](){return this['litOptions']['pass'];}}const Gy={'generateKey'(_0x3e0b1b){return'lit'+Object['keys'](_0x3e0b1b)['sort']()['map'](_0x4432d2=>{var _0x4f091d;return _0x4432d2==='shaderChun'+'ks'?((_0x4f091d=_0x3e0b1b['shaderChun'+'ks'])==null?void(0x1932+0xb99*-0x3+0x15*0x75):_0x4f091d['key'])??'':_0x4432d2==='lights'?Gy['generateLi'+'ghtsKey'](_0x3e0b1b):_0x4432d2+_0x3e0b1b[_0x4432d2];})['join']('\x0a');},'generateLightsKey'(_0x4fa8eb){return'lights:'+_0x4fa8eb['lights']['map'](_0x326293=>!_0x4fa8eb['clusteredL'+'ightingEna'+'bled']||_0x326293['_type']===ve?_0x326293['key']+',':'')['join']('');}},Sn=[],Dd=_0x5c9106=>Object['keys'](_0x5c9106)['filter'](_0x13a87b=>_0x13a87b!=='litOptions')['sort']();class DE extends pa{constructor(){super(...arguments),h(this,'optionsCon'+'text',new Qo()),h(this,'optionsCon'+'textMin',new Qo());}['generateKe'+'y'](_0x4954c4){let _0x1ddada;return _0x4954c4===this['optionsCon'+'textMin']?(this['propsMin']||(this['propsMin']=Dd(_0x4954c4)),_0x1ddada=this['propsMin']):_0x4954c4===this['optionsCon'+'text']?(this['props']||(this['props']=Dd(_0x4954c4)),_0x1ddada=this['props']):_0x1ddada=Dd(_0x4954c4),'standard:\x0a'+pa['definesHas'+'h'](_0x4954c4['defines'])+'\x0a'+_0x1ddada['map'](_0x20342d=>_0x20342d+_0x4954c4[_0x20342d])['join']('\x0a')+Gy['generateKe'+'y'](_0x4954c4['litOptions']);}['_getUvSour'+'ceExpressi'+'on'](_0x3402a3,_0x4a84b8,_0x1987d7){const _0x175daa=_0x1987d7[_0x3402a3],_0x21491a=_0x1987d7[_0x4a84b8],_0x515e7d=_0x1987d7['litOptions']['pass']===xa;let _0x2c1ca4;return _0x515e7d&&_0x1987d7['litOptions']['nineSliced'+'Mode']===Pt||_0x515e7d&&_0x1987d7['litOptions']['nineSliced'+'Mode']===Mt?_0x2c1ca4='nineSliced'+'Uv':(_0x175daa===0x4*-0x797+0x92e+-0x2*-0xa97?_0x2c1ca4='vUv'+_0x21491a:_0x2c1ca4='vUV'+_0x21491a+'_'+_0x175daa,_0x1987d7['heightMap']&&_0x3402a3!=='heightMapT'+'ransform'&&(_0x2c1ca4+='\x20+\x20dUvOffs'+'et')),_0x2c1ca4;}['_validateM'+'apChunk'](_0x1ca03c,_0x4200f2,_0x563ae8){w['call'](()=>{const _0x17006b=_0x563ae8['get'](_0x4200f2)['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1'),_0xd21ad6=[],_0x2723d9=(_0x2b4ad6,_0xd9b109)=>{_0x17006b['includes'](_0x2b4ad6)&&_0xd21ad6['push']('\x20\x20'+_0x2b4ad6+'\x20->\x20'+_0xd9b109);};[['$UV','{STD_'+_0x1ca03c+('_TEXTURE_U'+'V}')],['$CH','{STD_'+_0x1ca03c+('_TEXTURE_C'+'HANNEL}')],['$SAMPLER','{STD_'+_0x1ca03c+('_TEXTURE_N'+'AME}')],['$DECODE','{STD_'+_0x1ca03c+('_TEXTURE_D'+'ECODE}')],['$VC','{STD_'+_0x1ca03c+('_VERTEX_CH'+'ANNEL}')],['$DETAILMOD'+'E','{STD_'+_0x1ca03c+('_DETAILMOD'+'E}')],['unpackNorm'+'al(','{STD_'+_0x1ca03c+('_TEXTURE_D'+'ECODE}(')]]['forEach'](([_0x3a3de3,_0xddcfb5])=>_0x2723d9(_0x3a3de3,_0xddcfb5)),[['MAPFLOAT','STD_'+_0x1ca03c+'_CONSTANT'],['MAPCOLOR','STD_'+_0x1ca03c+'_CONSTANT'],['MAPVERTEX','STD_'+_0x1ca03c+'_VERTEX'],['MAPTEXTURE','STD_'+_0x1ca03c+'_TEXTURE'],['MAPINVERT','STD_'+_0x1ca03c+'_INVERT']]['forEach'](([_0x2de321,_0x311b60])=>_0x2723d9(_0x2de321,_0x311b60)),_0x17006b['includes']('$texture2D'+'SAMPLE')&&_0x2723d9('$texture2D'+'SAMPLE','(Macro\x20no\x20'+'longer\x20sup'+'ported\x20-\x20r'+'emove/refa'+'ctor)'),_0xd21ad6['length']>-0x1437+-0x1*-0x219f+0x8*-0x1ad&&w['errorOnce']('Shader\x20chu'+'nk\x20'+_0x4200f2+('\x20is\x20in\x20no\x20'+'longer\x20com'+'patible\x20fo'+'rmat.\x20Plea'+'se\x20make\x20th'+'ese\x20replac'+'ements\x20to\x20'+'bring\x20it\x20t'+'o\x20the\x20curr'+'ent\x20versio'+'n:\x0a')+_0xd21ad6['join']('\x0a'),{'code':_0x17006b});});}['_addMapDef'+'ines'](_0x157a67,_0x220265,_0x3987f9,_0x35d35a,_0x30fb94,_0x3a188f,_0x266f83=null){const _0x59b1db=_0x220265+'Map',_0x4b87a8=_0x220265['toUpperCas'+'e'](),_0x3fe1de=_0x59b1db+'Uv',_0x58984b=_0x59b1db+'Identifier',_0x3a0f97=_0x59b1db+'Transform',_0x100d4a=_0x59b1db+'Channel',_0x4d594e=_0x220265+('VertexColo'+'rChannel'),_0x175dd8=_0x220265+'Tint',_0xdf630=_0x220265+('VertexColo'+'r'),_0x3b15be=_0x220265+'Mode',_0x4729bd=_0x220265+'Invert',_0x268979=_0x35d35a[_0x175dd8],_0x4be012=_0x35d35a[_0xdf630],_0xd61f84=_0x35d35a[_0x59b1db],_0xfb8810=_0x35d35a[_0x58984b],_0x35f5fb=_0x35d35a[_0x3b15be],_0x4bd816=_0x30fb94['get'](_0x3987f9);if(w['assert'](_0x4bd816,'Shader\x20chu'+'nk\x20'+_0x3987f9+('\x20not\x20found'+'.')),w['call'](()=>{_0x4bd816&&this['_validateM'+'apChunk'](_0x4b87a8,_0x3987f9,_0x30fb94);}),_0xd61f84){_0x157a67['set']('STD_'+_0x4b87a8+'_TEXTURE','');const _0x5ccbb1=this['_getUvSour'+'ceExpressi'+'on'](_0x3a0f97,_0x3fe1de,_0x35d35a);_0x157a67['set']('{STD_'+_0x4b87a8+('_TEXTURE_U'+'V}'),_0x5ccbb1),_0x157a67['set']('{STD_'+_0x4b87a8+('_TEXTURE_C'+'HANNEL}'),_0x35d35a[_0x100d4a]);const _0x28e258='{STD_'+_0x4b87a8+('_TEXTURE_N'+'AME}');if(_0x4bd816['includes'](_0x28e258)){let _0x3ed68f='texture_'+_0x59b1db;const _0x29ee73=_0x3a188f[_0xfb8810];_0x29ee73?_0x3ed68f=_0x29ee73:(_0x3a188f[_0xfb8810]=_0x3ed68f,_0x157a67['set']('STD_'+_0x4b87a8+('_TEXTURE_A'+'LLOCATE'),'')),_0x157a67['set'](_0x28e258,_0x3ed68f);}if(_0x266f83){const _0x2e3ed6=_0x35d35a[_0x100d4a]==='aaa'?'passThroug'+'h':Sr['decodeFunc'](_0x266f83);_0x157a67['set']('{STD_'+_0x4b87a8+('_TEXTURE_D'+'ECODE}'),_0x2e3ed6);}}_0x4be012&&(_0x157a67['set']('STD_'+_0x4b87a8+'_VERTEX',''),_0x157a67['set']('{STD_'+_0x4b87a8+('_VERTEX_CH'+'ANNEL}'),_0x35d35a[_0x4d594e])),_0x35f5fb&&_0x157a67['set']('{STD_'+_0x4b87a8+('_DETAILMOD'+'E}'),_0x35f5fb),_0x268979&&_0x157a67['set']('STD_'+_0x4b87a8+'_CONSTANT',''),_0x35d35a[_0x4729bd]&&_0x157a67['set']('STD_'+_0x4b87a8+'_INVERT','');}['_correctCh'+'annel'](_0x376781,_0x5d2bf6,_0x16f712){if(_0x16f712[_0x376781]>-0x1a01+-0x150d+-0x13d*-0x26){if(_0x16f712[_0x376781]<_0x5d2bf6['length'])return _0x5d2bf6['substring'](-0x3*0x55e+0x10e4+0xca*-0x1,_0x16f712[_0x376781]);if(_0x16f712[_0x376781]>_0x5d2bf6['length']){let _0xd061fa=_0x5d2bf6;const _0x45ed10=_0xd061fa['charAt'](_0xd061fa['length']-(-0x1*-0x43+0x21d2+0x2214*-0x1)),_0x597017=_0x16f712[_0x376781]-_0xd061fa['length'];for(let _0x59f500=0x18fe+0xb1+-0x19af;_0x59f500<_0x597017;_0x59f500++)_0xd061fa+=_0x45ed10;return _0xd061fa;}return _0x5d2bf6;}}['createVert'+'exShader'](_0x193364,_0x36299f){const _0x34d0d7=[],_0xcbc1f8=[],_0x2e6f6e=[];for(const _0x28cb4d in Sn){const _0x524695=_0x28cb4d+'Map';if(_0x36299f[_0x28cb4d+('VertexColo'+'r')]){const _0x1fa1bd=_0x28cb4d+('VertexColo'+'rChannel');_0x36299f[_0x1fa1bd]=this['_correctCh'+'annel'](_0x28cb4d,_0x36299f[_0x1fa1bd],Sn);}if(_0x36299f[_0x524695]){const _0x14ad89=_0x524695+'Channel',_0x5ad6cf=_0x524695+'Transform',_0x16bf6d=_0x524695+'Uv';_0x36299f[_0x16bf6d]=Math['min'](_0x36299f[_0x16bf6d],-0x181a+0xc28+0x13*0xa1),_0x36299f[_0x14ad89]=this['_correctCh'+'annel'](_0x28cb4d,_0x36299f[_0x14ad89],Sn);const _0x8c77d3=_0x36299f[_0x16bf6d];_0x34d0d7[_0x8c77d3]=!(-0x12*0x216+-0x25eb+0x1*0x4b77),_0xcbc1f8[_0x8c77d3]=_0xcbc1f8[_0x8c77d3]||_0x36299f[_0x524695]&&!_0x36299f[_0x5ad6cf],_0x36299f[_0x5ad6cf]&&_0x2e6f6e['push']({'name':_0x28cb4d,'id':_0x36299f[_0x5ad6cf],'uv':_0x36299f[_0x16bf6d]});}}_0x36299f['forceUv1']&&(_0x34d0d7[-0x1597*0x1+0x1479+0x11f]=!(0x1*0xeaa+0x1*-0xa5f+-0x44b),_0xcbc1f8[0x884+-0x12*-0x69+-0xfe5]=_0xcbc1f8[0x20b3*-0x1+-0x26f*-0xb+0x31*0x1f]!==void(0x1ec9*-0x1+-0x1365+0x322e*0x1)?_0xcbc1f8[-0x751+0x18e4+-0x1192]:!(0xa3d+-0xd3e+0x301*0x1)),_0x193364['generateVe'+'rtexShader'](_0x34d0d7,_0xcbc1f8,_0x2e6f6e);}['prepareFra'+'gmentDefin'+'es'](_0x408fe5,_0x3baea4,_0x1eaa09){const _0xb5f583=(_0x3138be,_0x461c17,_0x74c80='')=>{_0x3138be&&_0x3baea4['set'](_0x461c17,_0x74c80);};_0xb5f583(_0x408fe5['lightMap'],'STD_LIGHTM'+'AP',''),_0xb5f583(_0x408fe5['lightVerte'+'xColor'],'STD_LIGHT_'+'VERTEX_COL'+'OR',''),_0xb5f583(_0x408fe5['dirLightMa'+'p']&&_0x408fe5['litOptions']['useSpecula'+'r'],'STD_LIGHTM'+'AP_DIR',''),_0xb5f583(_0x408fe5['heightMap'],'STD_HEIGHT'+'_MAP',''),_0xb5f583(_0x408fe5['useSpecula'+'rColor'],'STD_SPECUL'+'AR_COLOR',''),_0xb5f583(_0x408fe5['aoMap']||_0x408fe5['aoVertexCo'+'lor']||_0x408fe5['useAO'],'STD_AO',''),_0xb5f583(!(-0x1108+0x5*0x439+-0x415),'STD_OPACIT'+'Y_DITHER',xw[_0x1eaa09['isForward']?_0x408fe5['litOptions']['opacityDit'+'her']:_0x408fe5['litOptions']['opacitySha'+'dowDither']]);}['createShad'+'erDefiniti'+'on'](_0x57c15d,_0x2f048f){const _0x58185f=Si['get'](_0x57c15d)['getByIndex'](_0x2f048f['litOptions']['pass']),_0x32e3e9=_0x58185f['isForward'],_0x4247e3=new ME(_0x57c15d,_0x2f048f['litOptions']);this['createVert'+'exShader'](_0x4247e3,_0x2f048f);const _0xe3571e={};_0x2f048f['litOptions']['fresnelMod'+'el']=_0x2f048f['litOptions']['fresnelMod'+'el']===0x1289+-0x1*0x1d2c+0xaa3?Tp:_0x2f048f['litOptions']['fresnelMod'+'el'];const _0x403ce0=_0x4247e3['fDefines'];this['prepareFra'+'gmentDefin'+'es'](_0x2f048f,_0x403ce0,_0x58185f);let _0x140888='';if(_0x32e3e9){if(_0x2f048f['heightMap']&&this['_addMapDef'+'ines'](_0x403ce0,'height','parallaxPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e),(_0x2f048f['litOptions']['blendType']!==Cs||_0x2f048f['litOptions']['alphaTest']||_0x2f048f['litOptions']['alphaToCov'+'erage']||_0x2f048f['litOptions']['opacityDit'+'her']!==ua)&&this['_addMapDef'+'ines'](_0x403ce0,'opacity','opacityPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e),_0x4247e3['needsNorma'+'l']){if((_0x2f048f['normalMap']||_0x2f048f['clearCoatN'+'ormalMap'])&&!_0x2f048f['litOptions']['hasTangent'+'s']){const _0x4bec34=_0x2f048f['normalMap']?'normalMap':'clearCoatN'+'ormalMap';_0x140888=this['_getUvSour'+'ceExpressi'+'on'](_0x4bec34+'Transform',_0x4bec34+'Uv',_0x2f048f);}this['_addMapDef'+'ines'](_0x403ce0,'normalDeta'+'il','normalMapP'+'S',_0x2f048f,_0x4247e3['chunks'],_0xe3571e,_0x2f048f['normalDeta'+'ilPackedNo'+'rmal']?'xy':'xyz'),this['_addMapDef'+'ines'](_0x403ce0,'normal','normalMapP'+'S',_0x2f048f,_0x4247e3['chunks'],_0xe3571e,_0x2f048f['packedNorm'+'al']?'xy':'xyz');}_0x2f048f['diffuseDet'+'ail']&&this['_addMapDef'+'ines'](_0x403ce0,'diffuseDet'+'ail','diffusePS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e,_0x2f048f['diffuseDet'+'ailEncodin'+'g']),this['_addMapDef'+'ines'](_0x403ce0,'diffuse','diffusePS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e,_0x2f048f['diffuseEnc'+'oding']),_0x2f048f['litOptions']['useRefract'+'ion']&&(this['_addMapDef'+'ines'](_0x403ce0,'refraction','transmissi'+'onPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e),this['_addMapDef'+'ines'](_0x403ce0,'thickness','thicknessP'+'S',_0x2f048f,_0x4247e3['chunks'],_0xe3571e)),_0x2f048f['litOptions']['useIridesc'+'ence']&&(this['_addMapDef'+'ines'](_0x403ce0,'iridescenc'+'e','iridescenc'+'ePS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e),this['_addMapDef'+'ines'](_0x403ce0,'iridescenc'+'eThickness','iridescenc'+'eThickness'+'PS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e)),(_0x4247e3['lighting']&&_0x2f048f['litOptions']['useSpecula'+'r']||_0x4247e3['reflection'+'s'])&&(_0x2f048f['litOptions']['useSheen']&&(this['_addMapDef'+'ines'](_0x403ce0,'sheen','sheenPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e,_0x2f048f['sheenEncod'+'ing']),this['_addMapDef'+'ines'](_0x403ce0,'sheenGloss','sheenGloss'+'PS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e)),_0x2f048f['litOptions']['useMetalne'+'ss']&&(this['_addMapDef'+'ines'](_0x403ce0,'metalness','metalnessP'+'S',_0x2f048f,_0x4247e3['chunks'],_0xe3571e),this['_addMapDef'+'ines'](_0x403ce0,'ior','iorPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e)),_0x2f048f['litOptions']['useSpecula'+'rityFactor']&&this['_addMapDef'+'ines'](_0x403ce0,'specularit'+'yFactor','specularit'+'yFactorPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e),_0x2f048f['useSpecula'+'rColor']&&this['_addMapDef'+'ines'](_0x403ce0,'specular','specularPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e,_0x2f048f['specularEn'+'coding']),this['_addMapDef'+'ines'](_0x403ce0,'gloss','glossPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e)),_0x2f048f['aoDetail']&&this['_addMapDef'+'ines'](_0x403ce0,'aoDetail','aoPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e),(_0x2f048f['aoMap']||_0x2f048f['aoVertexCo'+'lor']||_0x2f048f['useAO'])&&this['_addMapDef'+'ines'](_0x403ce0,'ao','aoPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e),this['_addMapDef'+'ines'](_0x403ce0,'emissive','emissivePS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e,_0x2f048f['emissiveEn'+'coding']),_0x2f048f['litOptions']['useClearCo'+'at']&&(this['_addMapDef'+'ines'](_0x403ce0,'clearCoat','clearCoatP'+'S',_0x2f048f,_0x4247e3['chunks'],_0xe3571e),this['_addMapDef'+'ines'](_0x403ce0,'clearCoatG'+'loss','clearCoatG'+'lossPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e),this['_addMapDef'+'ines'](_0x403ce0,'clearCoatN'+'ormal','clearCoatN'+'ormalPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e,_0x2f048f['clearCoatP'+'ackedNorma'+'l']?'xy':'xyz')),_0x2f048f['litOptions']['enableGGXS'+'pecular']&&this['_addMapDef'+'ines'](_0x403ce0,'anisotropy','anisotropy'+'PS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e),(_0x2f048f['lightMap']||_0x2f048f['lightVerte'+'xColor'])&&this['_addMapDef'+'ines'](_0x403ce0,'light','lightmapPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e,_0x2f048f['lightMapEn'+'coding']);}else{const _0x7835b4=_0x2f048f['litOptions']['opacitySha'+'dowDither'];(_0x2f048f['litOptions']['alphaTest']||_0x7835b4)&&this['_addMapDef'+'ines'](_0x403ce0,'opacity','opacityPS',_0x2f048f,_0x4247e3['chunks'],_0xe3571e);}_0x4247e3['generateFr'+'agmentShad'+'er'](_0x4247e3['chunks']['get']('stdDeclara'+'tionPS'),_0x4247e3['chunks']['get']('stdFrontEn'+'dPS'),_0x140888);const _0xfd65c4=ih['merge'](_0x4247e3['chunks'],_0x4247e3['includes']),_0x1a47bb=_0x4247e3['vDefines'];_0x2f048f['defines']['forEach']((_0x5ab51a,_0x2fc946)=>_0x1a47bb['set'](_0x2fc946,_0x5ab51a)),_0x2f048f['defines']['forEach']((_0x499e38,_0x54f981)=>_0x403ce0['set'](_0x54f981,_0x499e38));const _0x3397db=Jt['createDefi'+'nition'](_0x57c15d,{'name':'StandardSh'+'ader','attributes':_0x4247e3['attributes'],'shaderLanguage':_0x4247e3['shaderLang'+'uage'],'vertexCode':_0x4247e3['vshader'],'fragmentCode':_0x4247e3['fshader'],'vertexIncludes':_0xfd65c4,'fragmentIncludes':_0xfd65c4,'fragmentDefines':_0x403ce0,'vertexDefines':_0x1a47bb});return _0x4247e3['shaderPass'+'Info']['isForward']&&(_0x3397db['tag']=NS),_0x3397db;}}const Id=new DE(),ss=[];ss[mp]={'src':Ft,'dst':Ft,'op':z0},ss[Cs]={'src':Ft,'dst':Iu,'op':fs},ss[Zs]={'src':Ah,'dst':Ch,'op':fs,'alphaSrc':Ft},ss[Fn]={'src':Ft,'dst':Ch,'op':fs},ss[_p]={'src':Ft,'dst':Ft,'op':fs},ss[sd]={'src':Ah,'dst':Ft,'op':fs},ss[Sp]={'src':gS,'dst':U0,'op':fs},ss[yp]={'src':B0,'dst':Ft,'op':fs},ss[gp]={'src':gS,'dst':Iu,'op':fs},ss[vp]={'src':Ft,'dst':Ft,'op':V0},ss[xp]={'src':Ft,'dst':Ft,'op':G0};let IE=-0x19dd+-0xa*0x3e6+-0x1*-0x40d9;class er{constructor(){h(this,'meshInstan'+'ces',[]),h(this,'name','Untitled'),h(this,'userId',''),h(this,'id',IE++),h(this,'variants',new Map()),h(this,'defines',new Map()),h(this,'_definesDi'+'rty',!(0x1935+-0x1*0x269b+-0x2f*-0x49)),h(this,'parameters',{}),h(this,'alphaTest',0xf9e+-0x98b*-0x1+-0x1929),h(this,'alphaToCov'+'erage',!(0xc3b+0x2f*0xb9+-0x2e31)),h(this,'_blendStat'+'e',new pt()),h(this,'_depthStat'+'e',new Yt()),h(this,'cull',ca),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'_shaderChu'+'nks',null),h(this,'_oldChunks',{}),h(this,'_dirtyShad'+'er',!(0xde4+0x2326+-0x1*0x310a)),h(this,'_shaderVer'+'sion',0x3b*0x1+-0x565*-0x4+-0x745*0x3),h(this,'_scene',null),h(this,'dirty',!(0xc91+-0x1*0x14+0xc7d*-0x1)),new.target===er&&w['error']('Material\x20c'+'lass\x20canno'+'t\x20be\x20insta'+'ntiated,\x20u'+'se\x20ShaderM'+'aterial\x20in'+'stead');}get['hasShaderC'+'hunks'](){return this['_shaderChu'+'nks']!=null;}get['shaderChun'+'ks'](){return this['_shaderChu'+'nks']||(this['_shaderChu'+'nks']=new Ce()),this['_shaderChu'+'nks'];}['getShaderC'+'hunks'](_0x4dc038=Fe){const _0x430d15=this['shaderChun'+'ks'];return _0x4dc038===Fe?_0x430d15['glsl']:_0x430d15['wgsl'];}set['shaderChun'+'ksVersion'](_0x54529d){this['shaderChun'+'ks']['version']=_0x54529d;}get['shaderChun'+'ksVersion'](){return this['shaderChun'+'ks']['version'];}set['chunks'](_0xdd2088){w['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),this['_oldChunks']=_0xdd2088;}get['chunks'](){return w['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),Object['assign'](this['_oldChunks'],Object['fromEntrie'+'s'](this['shaderChun'+'ks']['glsl'])),this['_oldChunks'];}set['depthBias'](_0x3459eb){this['_depthStat'+'e']['depthBias']=_0x3459eb;}get['depthBias'](){return this['_depthStat'+'e']['depthBias'];}set['slopeDepth'+'Bias'](_0x257221){this['_depthStat'+'e']['depthBiasS'+'lope']=_0x257221;}get['slopeDepth'+'Bias'](){return this['_depthStat'+'e']['depthBiasS'+'lope'];}set['redWrite'](_0x28197f){this['_blendStat'+'e']['redWrite']=_0x28197f;}get['redWrite'](){return this['_blendStat'+'e']['redWrite'];}set['greenWrite'](_0x180bb4){this['_blendStat'+'e']['greenWrite']=_0x180bb4;}get['greenWrite'](){return this['_blendStat'+'e']['greenWrite'];}set['blueWrite'](_0x170b6f){this['_blendStat'+'e']['blueWrite']=_0x170b6f;}get['blueWrite'](){return this['_blendStat'+'e']['blueWrite'];}set['alphaWrite'](_0xea1ec){this['_blendStat'+'e']['alphaWrite']=_0xea1ec;}get['alphaWrite'](){return this['_blendStat'+'e']['alphaWrite'];}get['transparen'+'t'](){return this['_blendStat'+'e']['blend'];}['_updateTra'+'nsparency'](){const _0x1d4667=this['transparen'+'t'],_0x54f287=this['meshInstan'+'ces'];for(let _0x5121de=0x1fcd+-0x739+-0x1894;_0x5121de<_0x54f287['length'];_0x5121de++)_0x54f287[_0x5121de]['transparen'+'t']=_0x1d4667;}set['blendState'](_0x3df67d){this['_blendStat'+'e']['copy'](_0x3df67d),this['_updateTra'+'nsparency']();}get['blendState'](){return this['_blendStat'+'e'];}set['blendType'](_0x35826f){const _0x11cb41=ss[_0x35826f];w['assert'](_0x11cb41,'Unknown\x20bl'+'end\x20mode\x20'+_0x35826f),this['_blendStat'+'e']['setColorBl'+'end'](_0x11cb41['op'],_0x11cb41['src'],_0x11cb41['dst']),this['_blendStat'+'e']['setAlphaBl'+'end'](_0x11cb41['alphaOp']??_0x11cb41['op'],_0x11cb41['alphaSrc']??_0x11cb41['src'],_0x11cb41['alphaDst']??_0x11cb41['dst']);const _0x23989f=_0x35826f!==Cs;this['_blendStat'+'e']['blend']!==_0x23989f&&(this['_blendStat'+'e']['blend']=_0x23989f,this['_updateTra'+'nsparency']()),this['_updateMes'+'hInstanceK'+'eys']();}get['blendType'](){if(!this['transparen'+'t'])return Cs;const {colorOp:_0x431fb9,colorSrcFactor:_0x374849,colorDstFactor:_0x106018,alphaOp:_0x623f04,alphaSrcFactor:_0x1362b9,alphaDstFactor:_0x3ee011}=this['_blendStat'+'e'];for(let _0x5f7d63=0xd7f*0x2+0x1*0x982+-0x2480;_0x5f7d63<ss['length'];_0x5f7d63++){const _0x46d885=ss[_0x5f7d63];if(_0x46d885['src']===_0x374849&&_0x46d885['dst']===_0x106018&&_0x46d885['op']===_0x431fb9&&_0x46d885['src']===_0x1362b9&&_0x46d885['dst']===_0x3ee011&&_0x46d885['op']===_0x623f04)return _0x5f7d63;}return Zs;}set['depthState'](_0x4f7caa){this['_depthStat'+'e']['copy'](_0x4f7caa);}get['depthState'](){return this['_depthStat'+'e'];}set['depthTest'](_0xd3a33b){this['_depthStat'+'e']['test']=_0xd3a33b;}get['depthTest'](){return this['_depthStat'+'e']['test'];}set['depthFunc'](_0x479022){this['_depthStat'+'e']['func']=_0x479022;}get['depthFunc'](){return this['_depthStat'+'e']['func'];}set['depthWrite'](_0x4b8f32){this['_depthStat'+'e']['write']=_0x4b8f32;}get['depthWrite'](){return this['_depthStat'+'e']['write'];}['copy'](_0x4c23cb){var _0x3b99db,_0x56285b;this['name']=_0x4c23cb['name'],this['alphaTest']=_0x4c23cb['alphaTest'],this['alphaToCov'+'erage']=_0x4c23cb['alphaToCov'+'erage'],this['_blendStat'+'e']['copy'](_0x4c23cb['_blendStat'+'e']),this['_depthStat'+'e']['copy'](_0x4c23cb['_depthStat'+'e']),this['cull']=_0x4c23cb['cull'],this['stencilFro'+'nt']=(_0x3b99db=_0x4c23cb['stencilFro'+'nt'])==null?void(0xc3*0xb+0x29d*0x9+0xaa2*-0x3):_0x3b99db['clone'](),_0x4c23cb['stencilBac'+'k']&&(this['stencilBac'+'k']=_0x4c23cb['stencilFro'+'nt']===_0x4c23cb['stencilBac'+'k']?this['stencilFro'+'nt']:_0x4c23cb['stencilBac'+'k']['clone']()),this['clearParam'+'eters']();for(const _0x3246c3 in _0x4c23cb['parameters'])_0x4c23cb['parameters']['hasOwnProp'+'erty'](_0x3246c3)&&this['_setParame'+'terSimple'](_0x3246c3,_0x4c23cb['parameters'][_0x3246c3]['data']);return this['defines']['clear'](),_0x4c23cb['defines']['forEach']((_0x19ac8c,_0x1a5ffb)=>this['defines']['set'](_0x1a5ffb,_0x19ac8c)),this['_shaderChu'+'nks']=_0x4c23cb['hasShaderC'+'hunks']?new Ce():null,(_0x56285b=this['_shaderChu'+'nks'])==null||_0x56285b['copy'](_0x4c23cb['_shaderChu'+'nks']),this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['_updateMes'+'hInstanceK'+'eys'](){const _0x1c6c2b=this['meshInstan'+'ces'];for(let _0x5573b8=0x626*0x2+-0x1b0d+0xec1;_0x5573b8<_0x1c6c2b['length'];_0x5573b8++)_0x1c6c2b[_0x5573b8]['updateKey']();}['updateUnif'+'orms'](_0x17ec9a,_0x1e4eb2){this['_dirtyShad'+'er']&&this['clearVaria'+'nts']();}['getShaderV'+'ariant'](_0x1b3e6a){w['assert'](!(-0x23e6+-0x21*-0x43+0x1b44),'Not\x20implem'+'ented');}['update'](){var _0x2f0294,_0x40b3e8;if(Object['keys'](this['_oldChunks'])['length']>-0x152c+-0x1581+0x2aad){for(const [_0xb8b992,_0x45ad70]of Object['entries'](this['_oldChunks']))this['shaderChun'+'ks']['glsl']['set'](_0xb8b992,_0x45ad70),delete this['_oldChunks'][_0xb8b992];}(this['_definesDi'+'rty']||(_0x2f0294=this['_shaderChu'+'nks'])!=null&&_0x2f0294['isDirty']())&&(this['_definesDi'+'rty']=!(-0x1*0x22b7+0x8*0x27a+0xee8),(_0x40b3e8=this['_shaderChu'+'nks'])==null||_0x40b3e8['resetDirty'](),this['clearVaria'+'nts']()),this['dirty']=!(0x1*0x1bd6+-0xe*-0xcd+-0x270c);}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['clearVaria'+'nts'](){this['variants']['clear']();const _0xda5f3b=this['meshInstan'+'ces'],_0x3a7ec0=_0xda5f3b['length'];for(let _0x4d7ea3=0x26*-0x86+-0x8d*-0xd+0xcbb;_0x4d7ea3<_0x3a7ec0;_0x4d7ea3++)_0xda5f3b[_0x4d7ea3]['clearShade'+'rs']();}['getParamet'+'er'](_0x354990){return this['parameters'][_0x354990];}['_setParame'+'terSimple'](_0x5efbd8,_0x5a3ecb){w['call'](()=>{_0x5a3ecb===void(-0x1fff*-0x1+-0x1e*-0x76+-0x2dd3)&&w['warnOnce']('Material#s'+'etParamete'+'r:\x20Attempt'+'ing\x20to\x20set'+'\x20undefined'+'\x20data\x20for\x20'+'parameter\x20'+'\x22'+_0x5efbd8+('\x22,\x20this\x20is'+'\x20likely\x20no'+'t\x20expected'+'.'),this);});const _0x55dc3d=this['parameters'][_0x5efbd8];_0x55dc3d?_0x55dc3d['data']=_0x5a3ecb:this['parameters'][_0x5efbd8]={'scopeId':null,'data':_0x5a3ecb};}['setParamet'+'er'](_0x365576,_0x4e9fcb){if(_0x4e9fcb===void(0x2e*-0x87+0x17a8+0xe*0xb)&&typeof _0x365576=='object'){const _0x243637=_0x365576;if(_0x243637['length']){for(let _0x161fa4=0x179b*-0x1+-0x2296+-0x3a31*-0x1;_0x161fa4<_0x243637['length'];_0x161fa4++)this['setParamet'+'er'](_0x243637[_0x161fa4]);return;}_0x365576=_0x243637['name'],_0x4e9fcb=_0x243637['value'];}this['_setParame'+'terSimple'](_0x365576,_0x4e9fcb);}['deletePara'+'meter'](_0x24bcb1){this['parameters'][_0x24bcb1]&&delete this['parameters'][_0x24bcb1];}['setParamet'+'ers'](_0x559a83,_0x4057e0){const _0x1be559=this['parameters'];_0x4057e0===void(-0x1ee*0xb+-0x1*-0x91d+-0xc1d*-0x1)&&(_0x4057e0=_0x1be559);for(const _0x3ff3e1 in _0x4057e0){const _0x58b5fe=_0x1be559[_0x3ff3e1];_0x58b5fe&&(_0x58b5fe['scopeId']||(_0x58b5fe['scopeId']=_0x559a83['scope']['resolve'](_0x3ff3e1)),_0x58b5fe['scopeId']['setValue'](_0x58b5fe['data']));}}['setDefine'](_0x432254,_0x9f2933){let _0x81093c=!(-0x119b+-0x5aa+0x1746);const {defines:_0x3efdbe}=this;_0x9f2933!==void(-0x64f+0xbb2+0x563*-0x1)&&_0x9f2933!==!(0x6b*-0x5+0x1bd9+-0x19c1)?(_0x81093c=!_0x3efdbe['has'](_0x432254)||_0x3efdbe['get'](_0x432254)!==_0x9f2933,_0x3efdbe['set'](_0x432254,_0x9f2933)):(_0x81093c=_0x3efdbe['has'](_0x432254),_0x3efdbe['delete'](_0x432254)),this['_definesDi'+'rty']||(this['_definesDi'+'rty']=_0x81093c);}['getDefine'](_0x354bd9){return this['defines']['has'](_0x354bd9);}['destroy'](){this['variants']['clear']();for(let _0xf33148=0x206*-0xb+-0x2143*0x1+0x3d*0xe9;_0xf33148<this['meshInstan'+'ces']['length'];_0xf33148++){const _0xf13743=this['meshInstan'+'ces'][_0xf33148];if(_0xf13743['clearShade'+'rs'](),_0xf13743['_material']=null,_0xf13743['mesh']){const _0x12356e=$n(_0xf13743['mesh']['device']);this!==_0x12356e&&(_0xf13743['material']=_0x12356e);}else w['warn']('pc.Materia'+'l:\x20MeshIns'+'tance.mesh'+'\x20is\x20null,\x20'+'default\x20ma'+'terial\x20can'+'not\x20be\x20ass'+'igned\x20to\x20t'+'he\x20MeshIns'+'tance');}this['meshInstan'+'ces']['length']=-0x7*-0xca+-0x1a73+0x14ed;}['addMeshIns'+'tanceRef'](_0x29fa5d){this['meshInstan'+'ces']['push'](_0x29fa5d);}['removeMesh'+'InstanceRe'+'f'](_0x581f2c){const _0x589630=this['meshInstan'+'ces'],_0x11a60d=_0x589630['indexOf'](_0x581f2c);_0x11a60d!==-(0x102*0x1+0x46a*0x5+-0x1713)&&_0x589630['splice'](_0x11a60d,0x1*0xb9c+-0x10ae+0x513);}}class Hs{static['update'](_0x2373d6,_0x3e1424,_0x29284a,_0x3582dc,_0x25d777,_0x2abd84,_0x1a9879){Hs['updateShar'+'edOptions'](_0x2373d6,_0x3e1424,_0x29284a,_0x25d777,_0x2abd84),Hs['updateMate'+'rialOption'+'s'](_0x2373d6,_0x3e1424),Hs['updateEnvO'+'ptions'](_0x2373d6,_0x3e1424,_0x29284a,_0x3582dc),Hs['updateLigh'+'tingOption'+'s'](_0x2373d6,_0x3e1424,_0x29284a,_0x25d777,_0x1a9879);}static['updateShar'+'edOptions'](_0x58b1fb,_0x26bd5f,_0x1870b7,_0x5fca7e,_0x3cc5d){_0x58b1fb['shaderChun'+'ks']=_0x26bd5f['shaderChun'+'ks'],_0x58b1fb['pass']=_0x3cc5d,_0x58b1fb['alphaTest']=_0x26bd5f['alphaTest']>0x17*-0x11c+0x22c1+-0x93d,_0x58b1fb['blendType']=_0x26bd5f['blendType'],_0x58b1fb['screenSpac'+'e']=_0x5fca7e&&(_0x5fca7e&sh)!==-0x229+0x2*0xa9c+-0x130f,_0x58b1fb['skin']=_0x5fca7e&&(_0x5fca7e&qo)!==-0xa07*0x2+0xb7e+0x1*0x890,_0x58b1fb['useInstanc'+'ing']=_0x5fca7e&&(_0x5fca7e&jo)!==-0x11b+0x6d8+-0x5bd*0x1,_0x58b1fb['useMorphPo'+'sition']=_0x5fca7e&&(_0x5fca7e&Yo)!==0x5*-0x5e+0x1f56+-0x2*0xec0,_0x58b1fb['useMorphNo'+'rmal']=_0x5fca7e&&(_0x5fca7e&Ko)!==-0x5*0x5+-0xc1e+0x1*0xc37,_0x58b1fb['useMorphTe'+'xtureBased'+'Int']=_0x5fca7e&&(_0x5fca7e&Zo)!==0x17ce+-0x1c*0x14d+0xc9e,_0x58b1fb['hasTangent'+'s']=_0x5fca7e&&(_0x5fca7e&Op)!==-0x213d+-0xc44+0xf2b*0x3,_0x58b1fb['nineSliced'+'Mode']=_0x26bd5f['nineSliced'+'Mode']||ci,_0x26bd5f['useLightin'+'g']&&_0x1870b7['clusteredL'+'ightingEna'+'bled']?(_0x58b1fb['clusteredL'+'ightingEna'+'bled']=!(0x1*0x15c5+-0xa*-0x1ad+-0x7*0x581),_0x58b1fb['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x1870b7['lighting']['cookiesEna'+'bled'],_0x58b1fb['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x1870b7['lighting']['shadowsEna'+'bled'],_0x58b1fb['clusteredL'+'ightingSha'+'dowType']=_0x1870b7['lighting']['shadowType'],_0x58b1fb['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x1870b7['lighting']['areaLights'+'Enabled']):(_0x58b1fb['clusteredL'+'ightingEna'+'bled']=!(0x1*0xa85+0x507+-0xf8b),_0x58b1fb['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(0xed1*-0x2+0x4*0x1ac+-0x1*-0x16f3),_0x58b1fb['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(0x31d*-0x3+-0x19e6+-0x2*-0x119f),_0x58b1fb['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(-0xc61*0x1+-0x3*-0xaa7+-0x1*0x1393));}static['updateMate'+'rialOption'+'s'](_0x193d38,_0x43c76b){_0x193d38['separateAm'+'bient']=!(0x811+0x2560+0x16b8*-0x2),_0x193d38['pixelSnap']=_0x43c76b['pixelSnap'],_0x193d38['ambientSH']=_0x43c76b['ambientSH'],_0x193d38['twoSidedLi'+'ghting']=_0x43c76b['twoSidedLi'+'ghting'],_0x193d38['occludeDir'+'ect']=_0x43c76b['occludeDir'+'ect'],_0x193d38['occludeSpe'+'cular']=_0x43c76b['occludeSpe'+'cular'],_0x193d38['occludeSpe'+'cularFloat']=_0x43c76b['occludeSpe'+'cularInten'+'sity']!==-0x9*0x1ec+-0x593+-0x30*-0x7a,_0x193d38['useMsdf']=!(-0x1*0x232b+-0xcaf+0x2fdb*0x1),_0x193d38['msdfTextAt'+'tribute']=!(0x1715+-0x21*0x3d+-0xf37),_0x193d38['alphaToCov'+'erage']=_0x43c76b['alphaToCov'+'erage'],_0x193d38['opacityFad'+'esSpecular']=_0x43c76b['opacityFad'+'esSpecular'],_0x193d38['opacityDit'+'her']=_0x43c76b['opacityDit'+'her'],_0x193d38['cubeMapPro'+'jection']=Pp,_0x193d38['useSpecula'+'r']=_0x43c76b['hasSpecula'+'r'],_0x193d38['useSpecula'+'rityFactor']=_0x43c76b['hasSpecula'+'rityFactor'],_0x193d38['enableGGXS'+'pecular']=_0x43c76b['ggxSpecula'+'r'],_0x193d38['fresnelMod'+'el']=_0x43c76b['fresnelMod'+'el'],_0x193d38['useRefract'+'ion']=_0x43c76b['hasRefract'+'ion'],_0x193d38['useClearCo'+'at']=_0x43c76b['hasClearCo'+'at'],_0x193d38['useSheen']=_0x43c76b['hasSheen'],_0x193d38['useIridesc'+'ence']=_0x43c76b['hasIrrides'+'cence'],_0x193d38['useMetalne'+'ss']=_0x43c76b['hasMetalne'+'ss'],_0x193d38['useDynamic'+'Refraction']=_0x43c76b['dynamicRef'+'raction'],_0x193d38['dispersion']=_0x43c76b['dispersion']>-0x1*-0x2c9+-0x12aa*-0x1+0x121*-0x13,_0x193d38['vertexColo'+'rs']=!(0x244a+0x1*0x1c31+0x3f*-0x106),_0x193d38['lightMapEn'+'abled']=_0x43c76b['hasLightin'+'g'],_0x193d38['dirLightMa'+'pEnabled']=_0x43c76b['dirLightMa'+'p'],_0x193d38['useHeights']=_0x43c76b['hasHeights'],_0x193d38['useNormals']=_0x43c76b['hasNormals'],_0x193d38['useClearCo'+'atNormals']=_0x43c76b['hasClearCo'+'atNormals'],_0x193d38['useAo']=_0x43c76b['hasAo'],_0x193d38['diffuseMap'+'Enabled']=_0x43c76b['hasDiffuse'+'Map'];}static['updateEnvO'+'ptions'](_0x17c703,_0x2ce6ee,_0x25fbbe,_0x47ebae){_0x17c703['fog']=_0x2ce6ee['useFog']?_0x47ebae['fog']:Hn,_0x17c703['gamma']=_0x47ebae['shaderOutp'+'utGamma'],_0x17c703['toneMap']=_0x2ce6ee['useTonemap']?_0x47ebae['toneMappin'+'g']:Ey,_0x2ce6ee['useSkybox']&&_0x25fbbe['envAtlas']&&_0x25fbbe['skybox']?(_0x17c703['reflection'+'Source']=Jc,_0x17c703['reflection'+'Encoding']=_0x25fbbe['envAtlas']['encoding'],_0x17c703['reflection'+'CubemapEnc'+'oding']=_0x25fbbe['skybox']['encoding']):_0x2ce6ee['useSkybox']&&_0x25fbbe['envAtlas']?(_0x17c703['reflection'+'Source']=Qc,_0x17c703['reflection'+'Encoding']=_0x25fbbe['envAtlas']['encoding']):_0x2ce6ee['useSkybox']&&_0x25fbbe['skybox']?(_0x17c703['reflection'+'Source']=eh,_0x17c703['reflection'+'Encoding']=_0x25fbbe['skybox']['encoding']):(_0x17c703['reflection'+'Source']=_r,_0x17c703['reflection'+'Encoding']=null),_0x2ce6ee['ambientSH']?(_0x17c703['ambientSou'+'rce']=Dp,_0x17c703['ambientEnc'+'oding']=null):_0x17c703['reflection'+'Source']!==_r&&_0x25fbbe['envAtlas']?(_0x17c703['ambientSou'+'rce']=Ip,_0x17c703['ambientEnc'+'oding']=_0x25fbbe['envAtlas']['encoding']):(_0x17c703['ambientSou'+'rce']=Lp,_0x17c703['ambientEnc'+'oding']=null);const _0x35db96=_0x17c703['reflection'+'Source']!==_r;_0x17c703['skyboxInte'+'nsity']=_0x35db96,_0x17c703['useCubeMap'+'Rotation']=_0x35db96&&_0x25fbbe['_skyboxRot'+'ationShade'+'rInclude'];}static['updateLigh'+'tingOption'+'s'](_0x586d6f,_0x358886,_0x4758c1,_0x459c99,_0x599887){if(_0x586d6f['lightMapWi'+'thoutAmbie'+'nt']=!(0x1c77+0xbea+-0x2860),_0x358886['useLightin'+'g']){const _0x3bdd6a=[],_0x2c81d1=_0x459c99?_0x459c99>>0x1860+-0x2246+0x5*0x1fe:Ss;_0x586d6f['lightMaskD'+'ynamic']=!!(_0x2c81d1&Ss),_0x586d6f['lightMapWi'+'thoutAmbie'+'nt']=!(-0x1206+-0x379+0x1580),_0x599887&&(Hs['collectLig'+'hts'](ve,_0x599887[ve],_0x3bdd6a,_0x2c81d1),_0x4758c1['clusteredL'+'ightingEna'+'bled']||(Hs['collectLig'+'hts'](Ke,_0x599887[Ke],_0x3bdd6a,_0x2c81d1),Hs['collectLig'+'hts'](Ze,_0x599887[Ze],_0x3bdd6a,_0x2c81d1))),_0x586d6f['lights']=_0x3bdd6a;}else _0x586d6f['lights']=[];(_0x586d6f['lights']['length']===-0x24be+0x2*-0x6de+-0xb6*-0x47&&!_0x4758c1['clusteredL'+'ightingEna'+'bled']||(_0x459c99&th)!==0xa1*0x2e+-0xabb+-0x1233)&&(_0x586d6f['noShadow']=!(-0x1*0x13ff+0x3*-0xacf+0x346c));}static['collectLig'+'hts'](_0x2fa088,_0x50a53d,_0x5dcb7b,_0x5ec477){for(let _0x31cbbf=-0x1a93+-0x1ffa+-0x1*-0x3a8d;_0x31cbbf<_0x50a53d['length'];_0x31cbbf++){const _0x2d9ea1=_0x50a53d[_0x31cbbf];_0x2d9ea1['enabled']&&_0x2d9ea1['mask']&_0x5ec477&&_0x5dcb7b['push'](_0x2d9ea1);}}}const u_=(_0x1adda0,_0x4c3bf6)=>{if(_0x1adda0['length']!==_0x4c3bf6['length'])return!(-0x70+-0x1f32+0x7*0x485);for(let _0x294ea5=0x201b+-0x25e9+-0x1*-0x5ce;_0x294ea5<_0x1adda0['length'];++_0x294ea5)if(_0x1adda0[_0x294ea5]!==_0x4c3bf6[_0x294ea5])return!(-0x16d+-0x199e*-0x1+0x2b*-0x90);return!(0xade+-0x22a3*-0x1+-0x2d81);},LE=_0x320eae=>_0x320eae['r']!==0xe31+-0x1a42+-0x2*-0x609||_0x320eae['g']!==-0x1c46+0xb*-0x1fd+0x3226||_0x320eae['b']!==0xbab+-0x3b*0x77+0xfc3,RE=_0x4eff4d=>_0x4eff4d['r']!==-0x6*0x41+0x391+-0x20b*0x1||_0x4eff4d['g']!==0x1*-0x1175+-0x1*0x1279+-0x291*-0xe||_0x4eff4d['b']!==-0x436+-0x1*0x16b5+0x1aeb*0x1;class OE{constructor(){this['_mapXForms']=null;}['updateMinR'+'ef'](_0x26e08c,_0x3d7525,_0x1e6d48,_0x4ae102,_0x275e1f,_0x11d027){this['_updateSha'+'redOptions'](_0x26e08c,_0x3d7525,_0x1e6d48,_0x4ae102,_0x275e1f),this['_updateMin'+'Options'](_0x26e08c,_0x1e6d48,_0x275e1f),this['_updateUVO'+'ptions'](_0x26e08c,_0x1e6d48,_0x4ae102,!(0x1*0x1327+-0x638+-0xcef));}['updateRef'](_0x2da899,_0x578181,_0x33c442,_0x13bdcd,_0x317a6a,_0x49c0b6,_0x56908d){this['_updateSha'+'redOptions'](_0x2da899,_0x578181,_0x13bdcd,_0x317a6a,_0x49c0b6),this['_updateEnv'+'Options'](_0x2da899,_0x13bdcd,_0x578181,_0x33c442),this['_updateMat'+'erialOptio'+'ns'](_0x2da899,_0x13bdcd,_0x578181),_0x2da899['litOptions']['hasTangent'+'s']=_0x317a6a&&(_0x317a6a&Op)!==-0x1f55*0x1+0x1*-0x319+0x2*0x1137,this['_updateLig'+'htOptions'](_0x2da899,_0x578181,_0x13bdcd,_0x317a6a,_0x56908d),this['_updateUVO'+'ptions'](_0x2da899,_0x13bdcd,_0x317a6a,!(0x966+-0x1bc8+0x1263),_0x33c442);}['_updateSha'+'redOptions'](_0xed2705,_0x5460c8,_0xffec8b,_0x5b8ccc,_0x4524a2){_0xed2705['forceUv1']=_0xffec8b['forceUv1'],_0xffec8b['userAttrib'+'utes']&&(_0xed2705['litOptions']['userAttrib'+'utes']=Object['fromEntrie'+'s'](_0xffec8b['userAttrib'+'utes']['entries']())),_0xed2705['litOptions']['shaderChun'+'ks']=_0xffec8b['shaderChun'+'ks'],_0xed2705['litOptions']['pass']=_0x4524a2,_0xed2705['litOptions']['alphaTest']=_0xffec8b['alphaTest']>0x40*-0x3b+0x26df*0x1+-0x181f,_0xed2705['litOptions']['blendType']=_0xffec8b['blendType'],_0xed2705['litOptions']['screenSpac'+'e']=_0x5b8ccc&&(_0x5b8ccc&sh)!==0xf4d+0x162*0x3+-0x1373,_0xed2705['litOptions']['skin']=_0x5b8ccc&&(_0x5b8ccc&qo)!==0x55f+-0x1dfb+0x189c,_0xed2705['litOptions']['batch']=_0x5b8ccc&&(_0x5b8ccc&bc)!==-0x2*0xe87+0xebb+0xe53*0x1,_0xed2705['litOptions']['useInstanc'+'ing']=_0x5b8ccc&&(_0x5b8ccc&jo)!==0x1c09+-0x1009+-0xc00,_0xed2705['litOptions']['useMorphPo'+'sition']=_0x5b8ccc&&(_0x5b8ccc&Yo)!==0x13a0+-0x1714+0x374,_0xed2705['litOptions']['useMorphNo'+'rmal']=_0x5b8ccc&&(_0x5b8ccc&Ko)!==0x1203+-0x49*0x78+0x9*0x1cd,_0xed2705['litOptions']['useMorphTe'+'xtureBased'+'Int']=_0x5b8ccc&&(_0x5b8ccc&Zo)!==-0x20cb*-0x1+-0x58c+-0x1f*0xe1,_0xed2705['litOptions']['nineSliced'+'Mode']=_0xffec8b['nineSliced'+'Mode']||-0x2ce*0xc+-0x26dd+-0x1*-0x4885,_0x5460c8['clusteredL'+'ightingEna'+'bled']&&_0xffec8b['useLightin'+'g']?(_0xed2705['litOptions']['clusteredL'+'ightingEna'+'bled']=!(0x17c3*-0x1+-0x1166+0x2929),_0xed2705['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x5460c8['lighting']['cookiesEna'+'bled'],_0xed2705['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x5460c8['lighting']['shadowsEna'+'bled'],_0xed2705['litOptions']['clusteredL'+'ightingSha'+'dowType']=_0x5460c8['lighting']['shadowType'],_0xed2705['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x5460c8['lighting']['areaLights'+'Enabled']):(_0xed2705['litOptions']['clusteredL'+'ightingEna'+'bled']=!(-0x11e6+0x591*-0x5+0x2dbc),_0xed2705['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(-0x15d*-0x5+0xc3*-0x27+0x1*0x16e5),_0xed2705['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(0x2*0x41e+0x814+0x19*-0xa7),_0xed2705['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(-0x4*-0x223+0x7f0+-0x1*0x107b));}['_updateUVO'+'ptions'](_0x1d8fbe,_0x2317ab,_0x296d9b,_0xbf878d,_0x405377){let _0x2032ed=!(0x11ae+-0x24bc+0x130f),_0x192aaf=!(-0x471*0x3+-0x1*-0xb37+0x21d),_0xaf00a9=!(0x6c*0x46+0x14fa+-0x3281);_0x296d9b&&(_0x2032ed=(_0x296d9b&Rp)!==-0x3e0*0x9+0x21b+0x20c5,_0x192aaf=(_0x296d9b&My)!==-0x3b3+-0x5*-0x631+0x2*-0xda1,_0xaf00a9=(_0x296d9b&Dy)!==0x26be+0x1*0x65b+-0x5*0x905),_0x1d8fbe['litOptions']['vertexColo'+'rs']=!(0x1*-0x1307+-0x4f+-0x1357*-0x1),this['_mapXForms']=[];const _0x20c194={};for(const _0x3aacbe in Sn)this['_updateTex'+'Options'](_0x1d8fbe,_0x2317ab,_0x3aacbe,_0x2032ed,_0x192aaf,_0xaf00a9,_0xbf878d,_0x20c194);this['_mapXForms']=null,_0x1d8fbe['litOptions']['ssao']=_0x405377==null?void(0x547*-0x1+-0x1*-0xf9d+-0x9*0x126):_0x405377['ssaoEnable'+'d'],_0x1d8fbe['useAO']=_0x1d8fbe['litOptions']['ssao'],_0x1d8fbe['litOptions']['lightMapEn'+'abled']=_0x1d8fbe['lightMap'],_0x1d8fbe['litOptions']['dirLightMa'+'pEnabled']=_0x1d8fbe['dirLightMa'+'p'],_0x1d8fbe['litOptions']['useHeights']=_0x1d8fbe['heightMap'],_0x1d8fbe['litOptions']['useNormals']=_0x1d8fbe['normalMap'],_0x1d8fbe['litOptions']['useClearCo'+'atNormals']=_0x1d8fbe['clearCoatN'+'ormalMap'],_0x1d8fbe['litOptions']['useAo']=_0x1d8fbe['aoMap']||_0x1d8fbe['aoVertexCo'+'lor']||_0x1d8fbe['litOptions']['ssao'],_0x1d8fbe['litOptions']['diffuseMap'+'Enabled']=_0x1d8fbe['diffuseMap'];}['_updateTex'+'Options'](_0x33ca1a,_0x2768df,_0x2e8113,_0x3dd865,_0x279f88,_0x511369,_0x29f819,_0x4face9){const _0x3fc348=_0x2e8113==='opacity';if(!_0x29f819||_0x3fc348){const _0x48cbc1=_0x2e8113+'Map',_0x2ba801=_0x2e8113+('VertexColo'+'r'),_0x29de5c=_0x2e8113+('VertexColo'+'rChannel'),_0x1bb54f=_0x48cbc1+'Channel',_0x4e2b14=_0x48cbc1+'Transform',_0x3f29b7=_0x48cbc1+'Uv',_0x46b82f=_0x48cbc1+'Identifier';if(_0x2e8113!=='light'&&(_0x33ca1a[_0x48cbc1]=!(-0x1*-0x1e16+-0x129a+-0xb7b),_0x33ca1a[_0x46b82f]=void(0x1d*0x111+0x805*-0x3+0x125*-0x6),_0x33ca1a[_0x1bb54f]='',_0x33ca1a[_0x4e2b14]=0x1*-0x1e7+-0x38e+0x575,_0x33ca1a[_0x3f29b7]=-0x7e*0x1a+-0xed*-0x1e+-0xefa),_0x33ca1a[_0x2ba801]=!(0x1647+-0xac*-0xe+-0x656*0x5),_0x33ca1a[_0x29de5c]='',_0x3fc348&&_0x2768df['blendType']===Cs&&_0x2768df['alphaTest']===0x1b21+0xdee*-0x1+-0xd33&&!_0x2768df['alphaToCov'+'erage']&&_0x2768df['opacityDit'+'her']===ua)return;if(_0x2e8113!=='height'&&_0x2768df[_0x2ba801]&&_0x511369&&(_0x33ca1a[_0x2ba801]=_0x2768df[_0x2ba801],_0x33ca1a[_0x29de5c]=_0x2768df[_0x29de5c],_0x33ca1a['litOptions']['vertexColo'+'rs']=!(-0x3*-0x9db+0x1c*0x4d+-0x25fd)),_0x2768df[_0x48cbc1]){let _0x54471b=!(0x59a+0x152d+-0x1ac7);if(_0x2768df[_0x3f29b7]===0xa89+0x1*-0xb0b+0x82&&!_0x3dd865&&(_0x54471b=!(-0xa*0x377+-0xc5*0xf+0x1b6*0x1b)),_0x2768df[_0x3f29b7]===-0xdff+-0x1cd9*0x1+-0x61f*-0x7&&!_0x279f88&&(_0x54471b=!(0xf*-0x32+-0xdf4+-0x5a1*-0x3)),_0x54471b){const _0x250804=_0x2768df[_0x48cbc1]['id'];let _0x4990e4=_0x4face9[_0x250804];_0x4990e4===void(0xdeb+0x1f13+0x1a*-0x1bb)&&(_0x4face9[_0x250804]=_0x2e8113,_0x4990e4=_0x2e8113),_0x33ca1a[_0x48cbc1]=!!_0x2768df[_0x48cbc1],_0x33ca1a[_0x46b82f]=_0x4990e4,_0x33ca1a[_0x4e2b14]=this['_getMapTra'+'nsformID'](_0x2768df['getUniform'](_0x4e2b14),_0x2768df[_0x3f29b7]),_0x33ca1a[_0x1bb54f]=_0x2768df[_0x1bb54f],_0x33ca1a[_0x3f29b7]=_0x2768df[_0x3f29b7];}}}}['_updateMin'+'Options'](_0x233ac8,_0x1bfd5f,_0x5660aa){const _0x880328=_0x5660aa===vl;_0x233ac8['litOptions']['opacitySha'+'dowDither']=_0x880328?_0x1bfd5f['opacityDit'+'her']:_0x1bfd5f['opacitySha'+'dowDither'],_0x233ac8['litOptions']['linearDept'+'h']=_0x880328,_0x233ac8['litOptions']['lights']=[];}['_updateMat'+'erialOptio'+'ns'](_0x2bf024,_0x47b937,_0x5175ac){var _0x593335,_0x54457a,_0x5d8445,_0x38f359,_0x3ad768,_0x3839fc;const _0x32e0b1=!!(_0x47b937['useMetalne'+'ss']||_0x47b937['specularMa'+'p']||_0x47b937['sphereMap']||_0x47b937['cubeMap']||RE(_0x47b937['specular'])||_0x47b937['specularit'+'yFactor']>0x7*-0x469+0x5*-0x412+0x5d*0x8d&&_0x47b937['useMetalne'+'ss']||_0x47b937['enableGGXS'+'pecular']||_0x47b937['clearCoat']>0x68d+0x1baa+0x1cd*-0x13),_0x5cf60c=!_0x47b937['useMetalne'+'ss']||_0x47b937['useMetalne'+'ssSpecular'+'Color'],_0x14f581=_0x32e0b1&&(_0x47b937['specularTi'+'nt']||!_0x47b937['specularMa'+'p']&&!_0x47b937['specularVe'+'rtexColor'])&&LE(_0x47b937['specular']),_0x2d7f1b=_0x32e0b1&&_0x47b937['useMetalne'+'ssSpecular'+'Color']&&(_0x47b937['specularit'+'yFactorTin'+'t']||_0x47b937['specularit'+'yFactor']<0xa84+-0x724+-0x35f&&!_0x47b937['specularit'+'yFactorMap']),_0x1426fc=_0x2f5af5=>_0x2f5af5?_0x2f5af5['format']===ol||_0x2f5af5['type']===zo:!(0x1200+0xe9*-0x3+-0xf44),_0x39660f=(_0x11f450,_0x2655b9)=>Math['abs'](_0x11f450-_0x2655b9)<-0x1*-0x5c+0x2*-0x2f9+0x596+0.0001;_0x2bf024['specularTi'+'nt']=_0x14f581,_0x2bf024['specularit'+'yFactorTin'+'t']=_0x2d7f1b,_0x2bf024['metalnessT'+'int']=_0x47b937['useMetalne'+'ss']&&_0x47b937['metalness']<-0x1cd1+-0x366+0x1*0x2038,_0x2bf024['glossTint']=!(-0x2309*0x1+0x1*0x16e1+-0x4*-0x30a),_0x2bf024['diffuseEnc'+'oding']=(_0x593335=_0x47b937['diffuseMap'])==null?void(-0x11eb+0x1*-0x11b9+0x23a4):_0x593335['encoding'],_0x2bf024['diffuseDet'+'ailEncodin'+'g']=(_0x54457a=_0x47b937['diffuseDet'+'ailMap'])==null?void(-0x2*0x11fd+-0x18ae+0x3ca8):_0x54457a['encoding'],_0x2bf024['emissiveEn'+'coding']=(_0x5d8445=_0x47b937['emissiveMa'+'p'])==null?void(-0x17b1*-0x1+-0x1b88+-0x3d7*-0x1):_0x5d8445['encoding'],_0x2bf024['lightMapEn'+'coding']=(_0x38f359=_0x47b937['lightMap'])==null?void(-0x995*0x3+0x660+0x3*0x775):_0x38f359['encoding'],_0x2bf024['packedNorm'+'al']=_0x1426fc(_0x47b937['normalMap']),_0x2bf024['refraction'+'Tint']=_0x39660f(_0x47b937['refraction'],-0x1ad4+0x26b7+-0xbe2),_0x2bf024['refraction'+'IndexTint']=_0x39660f(_0x47b937['refraction'+'Index'],(-0xf2e*-0x2+0x11*-0x24a+0x7*0x139)/(-0x19*-0x26+0x2082+-0x2437+0.5)),_0x2bf024['thicknessT'+'int']=_0x47b937['useDynamic'+'Refraction']&&_0x47b937['thickness']!==-0x2613+0x2481+-0x1f*-0xd,_0x2bf024['specularEn'+'coding']=(_0x3ad768=_0x47b937['specularMa'+'p'])==null?void(0xa76+0x52+-0xac8):_0x3ad768['encoding'],_0x2bf024['sheenEncod'+'ing']=(_0x3839fc=_0x47b937['sheenMap'])==null?void(-0xb5d*-0x3+0x4*0x837+-0x42f3):_0x3839fc['encoding'],_0x2bf024['aoMapUv']=_0x47b937['aoUvSet'],_0x2bf024['aoDetail']=!!_0x47b937['aoDetailMa'+'p'],_0x2bf024['diffuseDet'+'ail']=!!_0x47b937['diffuseDet'+'ailMap'],_0x2bf024['normalDeta'+'il']=!!_0x47b937['normalMap'],_0x2bf024['normalDeta'+'ilPackedNo'+'rmal']=_0x1426fc(_0x47b937['normalDeta'+'ilMap']),_0x2bf024['diffuseDet'+'ailMode']=_0x47b937['diffuseDet'+'ailMode'],_0x2bf024['aoDetailMo'+'de']=_0x47b937['aoDetailMo'+'de'],_0x2bf024['clearCoatG'+'loss']=!!_0x47b937['clearCoatG'+'loss'],_0x2bf024['clearCoatP'+'ackedNorma'+'l']=_0x1426fc(_0x47b937['clearCoatN'+'ormalMap']),_0x2bf024['iorTint']=_0x39660f(_0x47b937['refraction'+'Index'],(-0x3*-0x3fb+-0x1*0x26e3+0x1af3)/(-0x133*0xf+0x1*0x1946+-0x748*0x1+0.5)),_0x5175ac['forcePassT'+'hroughSpec'+'ular']&&(_0x2bf024['specularEn'+'coding']='linear',_0x2bf024['sheenEncod'+'ing']='linear'),_0x2bf024['iridescenc'+'eTint']=_0x47b937['iridescenc'+'e']!==-0x63b*0x3+0x162b+-0x379,_0x2bf024['glossInver'+'t']=_0x47b937['glossInver'+'t'],_0x2bf024['sheenGloss'+'Invert']=_0x47b937['sheenGloss'+'Invert'],_0x2bf024['clearCoatG'+'lossInvert']=_0x47b937['clearCoatG'+'lossInvert'],_0x2bf024['useSpecula'+'rColor']=_0x5cf60c,_0x2bf024['litOptions']['separateAm'+'bient']=!(0x1f10+0xf16*-0x1+-0xff9),_0x2bf024['litOptions']['pixelSnap']=_0x47b937['pixelSnap'],_0x2bf024['litOptions']['ambientSH']=!!_0x47b937['ambientSH'],_0x2bf024['litOptions']['twoSidedLi'+'ghting']=_0x47b937['twoSidedLi'+'ghting'],_0x2bf024['litOptions']['occludeSpe'+'cular']=_0x47b937['occludeSpe'+'cular'],_0x2bf024['litOptions']['occludeSpe'+'cularFloat']=_0x47b937['occludeSpe'+'cularInten'+'sity']!==-0x2564+0xd30+-0x1*-0x1835,_0x2bf024['litOptions']['useMsdf']=!!_0x47b937['msdfMap'],_0x2bf024['litOptions']['msdfTextAt'+'tribute']=!!_0x47b937['msdfTextAt'+'tribute'],_0x2bf024['litOptions']['alphaToCov'+'erage']=_0x47b937['alphaToCov'+'erage'],_0x2bf024['litOptions']['opacityFad'+'esSpecular']=_0x47b937['opacityFad'+'esSpecular'],_0x2bf024['litOptions']['opacityDit'+'her']=_0x47b937['opacityDit'+'her'],_0x2bf024['litOptions']['cubeMapPro'+'jection']=_0x47b937['cubeMapPro'+'jection'],_0x2bf024['litOptions']['occludeDir'+'ect']=_0x47b937['occludeDir'+'ect'],_0x2bf024['litOptions']['useSpecula'+'r']=_0x32e0b1,_0x2bf024['litOptions']['useSpecula'+'rityFactor']=(_0x2d7f1b||!!_0x47b937['specularit'+'yFactorMap'])&&_0x47b937['useMetalne'+'ssSpecular'+'Color'],_0x2bf024['litOptions']['enableGGXS'+'pecular']=_0x47b937['enableGGXS'+'pecular'],_0x2bf024['litOptions']['fresnelMod'+'el']=_0x47b937['fresnelMod'+'el'],_0x2bf024['litOptions']['useRefract'+'ion']=(_0x47b937['refraction']||!!_0x47b937['refraction'+'Map'])&&(_0x47b937['useDynamic'+'Refraction']||_0x2bf024['litOptions']['reflection'+'Source']!==_r),_0x2bf024['litOptions']['useClearCo'+'at']=!!_0x47b937['clearCoat'],_0x2bf024['litOptions']['useSheen']=_0x47b937['useSheen'],_0x2bf024['litOptions']['useIridesc'+'ence']=_0x47b937['useIridesc'+'ence']&&_0x47b937['iridescenc'+'e']!==-0x4*0x4bc+-0x111*-0x13+0x153*-0x1,_0x2bf024['litOptions']['useMetalne'+'ss']=_0x47b937['useMetalne'+'ss'],_0x2bf024['litOptions']['useDynamic'+'Refraction']=_0x47b937['useDynamic'+'Refraction'],_0x2bf024['litOptions']['dispersion']=_0x47b937['dispersion']>0x248a+0x2*-0x209+-0x2078,_0x2bf024['litOptions']['shadowCatc'+'her']=_0x47b937['shadowCatc'+'her'];}['_updateEnv'+'Options'](_0x47f3b5,_0x4dd4c9,_0x8f24c2,_0x154bfa){_0x47f3b5['litOptions']['fog']=_0x4dd4c9['useFog']?_0x154bfa['fog']:Hn,_0x47f3b5['litOptions']['gamma']=_0x154bfa['shaderOutp'+'utGamma'],_0x47f3b5['litOptions']['toneMap']=_0x4dd4c9['useTonemap']?_0x154bfa['toneMappin'+'g']:Ey;let _0x479690=!(-0x3*0x346+0x2094+-0x48d*0x5);if(_0x4dd4c9['envAtlas']&&_0x4dd4c9['cubeMap']?(_0x47f3b5['litOptions']['reflection'+'Source']=Jc,_0x47f3b5['litOptions']['reflection'+'Encoding']=_0x4dd4c9['envAtlas']['encoding'],_0x47f3b5['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x4dd4c9['cubeMap']['encoding']):_0x4dd4c9['envAtlas']?(_0x47f3b5['litOptions']['reflection'+'Source']=Qc,_0x47f3b5['litOptions']['reflection'+'Encoding']=_0x4dd4c9['envAtlas']['encoding']):_0x4dd4c9['cubeMap']?(_0x47f3b5['litOptions']['reflection'+'Source']=eh,_0x47f3b5['litOptions']['reflection'+'Encoding']=_0x4dd4c9['cubeMap']['encoding']):_0x4dd4c9['sphereMap']?(_0x47f3b5['litOptions']['reflection'+'Source']=Py,_0x47f3b5['litOptions']['reflection'+'Encoding']=_0x4dd4c9['sphereMap']['encoding']):_0x4dd4c9['useSkybox']&&_0x8f24c2['envAtlas']&&_0x8f24c2['skybox']?(_0x47f3b5['litOptions']['reflection'+'Source']=Jc,_0x47f3b5['litOptions']['reflection'+'Encoding']=_0x8f24c2['envAtlas']['encoding'],_0x47f3b5['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x8f24c2['skybox']['encoding'],_0x479690=!(0x25*-0x8a+0xa4*0x1d+0x15e)):_0x4dd4c9['useSkybox']&&_0x8f24c2['envAtlas']?(_0x47f3b5['litOptions']['reflection'+'Source']=Qc,_0x47f3b5['litOptions']['reflection'+'Encoding']=_0x8f24c2['envAtlas']['encoding'],_0x479690=!(0x4e*-0x6b+-0xd*0x8b+-0xb*-0x39b)):_0x4dd4c9['useSkybox']&&_0x8f24c2['skybox']?(_0x47f3b5['litOptions']['reflection'+'Source']=eh,_0x47f3b5['litOptions']['reflection'+'Encoding']=_0x8f24c2['skybox']['encoding'],_0x479690=!(0x2635+0xe*0x54+0x1*-0x2acd)):(_0x47f3b5['litOptions']['reflection'+'Source']=_r,_0x47f3b5['litOptions']['reflection'+'Encoding']=null),_0x4dd4c9['ambientSH'])_0x47f3b5['litOptions']['ambientSou'+'rce']=Dp,_0x47f3b5['litOptions']['ambientEnc'+'oding']=null;else{const _0x10388a=_0x4dd4c9['envAtlas']||(_0x4dd4c9['useSkybox']&&_0x8f24c2['envAtlas']?_0x8f24c2['envAtlas']:null);_0x10388a&&!_0x4dd4c9['sphereMap']?(_0x47f3b5['litOptions']['ambientSou'+'rce']=Ip,_0x47f3b5['litOptions']['ambientEnc'+'oding']=_0x10388a['encoding']):(_0x47f3b5['litOptions']['ambientSou'+'rce']=Lp,_0x47f3b5['litOptions']['ambientEnc'+'oding']=null);}_0x47f3b5['litOptions']['skyboxInte'+'nsity']=_0x479690,_0x47f3b5['litOptions']['useCubeMap'+'Rotation']=_0x479690&&_0x8f24c2['_skyboxRot'+'ationShade'+'rInclude'];}['_updateLig'+'htOptions'](_0x257f13,_0x5a4338,_0x26c10b,_0x38b1a3,_0x19bca1){if(_0x257f13['lightMap']=!(-0xf58+0x12b+0xe2e),_0x257f13['lightMapCh'+'annel']='',_0x257f13['lightMapUv']=0x2*0x2e3+-0x240f*0x1+0x1e49,_0x257f13['lightMapTr'+'ansform']=0x26c+-0x20d9+-0x1e6d*-0x1,_0x257f13['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0x48b+0x7*-0x212+0xc4*0xd),_0x257f13['dirLightMa'+'p']=!(0x746+-0x4*0x88b+0x1ae7*0x1),_0x38b1a3&&(_0x257f13['litOptions']['noShadow']=(_0x38b1a3&th)!==-0x1ce0+-0x1cb3*-0x1+0x2d,(_0x38b1a3&Ff)!==-0xa27+0x25fb+-0x1bd4&&(_0x257f13['lightMapEn'+'coding']=_0x5a4338['lightmapPi'+'xelFormat']===Ne?'rgbm':'linear',_0x257f13['lightMap']=!(-0x151*-0xd+0x1*0xaed+-0x4a*0x61),_0x257f13['lightMapCh'+'annel']='rgb',_0x257f13['lightMapUv']=-0x82*0x4a+-0x2199+-0x17ba*-0x3,_0x257f13['lightMapTr'+'ansform']=-0x5*0x6cb+-0x23f2+0x45e9,_0x257f13['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!_0x26c10b['lightMap'],(_0x38b1a3&Iy)!==0x111d+0x1414+-0x2531&&(_0x257f13['dirLightMa'+'p']=!(-0x2*0x949+0x4c+0x1*0x1246)),(_0x38b1a3&Ly)!==0x23b5+0x187e+-0x3c33&&(_0x257f13['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0x22ee+0x17a+-0x2467)))),_0x26c10b['useLightin'+'g']){const _0x33c9ce=[],_0xc5c5ff=_0x38b1a3?_0x38b1a3>>-0x1417+-0x4*-0x57e+0x1*-0x1d1:Ss;_0x257f13['litOptions']['lightMaskD'+'ynamic']=!!(_0xc5c5ff&Ss),_0x19bca1&&(Hs['collectLig'+'hts'](ve,_0x19bca1[ve],_0x33c9ce,_0xc5c5ff),_0x5a4338['clusteredL'+'ightingEna'+'bled']||(Hs['collectLig'+'hts'](Ke,_0x19bca1[Ke],_0x33c9ce,_0xc5c5ff),Hs['collectLig'+'hts'](Ze,_0x19bca1[Ze],_0x33c9ce,_0xc5c5ff))),_0x257f13['litOptions']['lights']=_0x33c9ce;}else _0x257f13['litOptions']['lights']=[];_0x257f13['litOptions']['lights']['length']===-0x1e2e+-0x214e+-0x44*-0xef&&!_0x5a4338['clusteredL'+'ightingEna'+'bled']&&(_0x257f13['litOptions']['noShadow']=!(-0x1853+-0x11f2*-0x2+-0x149*0x9));}['_getMapTra'+'nsformID'](_0x847de3,_0x43655c){if(!_0x847de3)return 0x2d*0x1f+0x26b0+0x1*-0x2c23;let _0x3e489b=this['_mapXForms'][_0x43655c];_0x3e489b||(_0x3e489b=[],this['_mapXForms'][_0x43655c]=_0x3e489b);for(let _0x2c3501=0x1b72+0x4d5*0x6+-0x3870;_0x2c3501<_0x3e489b['length'];_0x2c3501++)if(u_(_0x3e489b[_0x2c3501][0x2*-0x8f5+0x506*-0x2+-0x952*-0x3]['value'],_0x847de3[-0x2433+-0x8*-0x73+0x209b]['value'])&&u_(_0x3e489b[_0x2c3501][-0x22e5*0x1+0x1*-0x1c8e+0x3f74]['value'],_0x847de3[0xf95*0x1+0x3*-0x44d+-0x2ad*0x1]['value']))return _0x2c3501+(-0x153b*-0x1+0x748*0x1+-0x1c82);return _0x3e489b['push'](_0x847de3);}}function rt(_0x33137f,_0x4365eb=!(0x3*-0xadb+0xb06+0x1*0x158b),_0x435418=!(-0x3bc+0x1bd4+-0x4*0x606)){const _0x2ba9d4={};return _0x2ba9d4[_0x33137f+'Map']='texture',_0x2ba9d4[_0x33137f+'MapTiling']='vec2',_0x2ba9d4[_0x33137f+'MapOffset']='vec2',_0x2ba9d4[_0x33137f+('MapRotatio'+'n')]='number',_0x2ba9d4[_0x33137f+'MapUv']='number',_0x4365eb&&(_0x2ba9d4[_0x33137f+'MapChannel']='string',_0x435418&&(_0x2ba9d4[_0x33137f+('VertexColo'+'r')]='boolean',_0x2ba9d4[_0x33137f+('VertexColo'+'rChannel')]='string')),_0x2ba9d4;}const Un={'name':'string','chunks':'chunks','mappingFormat':'string','_engine':'boolean','ambient':'rgb',...rt('ao'),...rt('aoDetail',!(0x3*0xbf1+0x8f*0x2f+-0x3e14),!(-0x2539*0x1+-0x2a9*0xb+0x427d)),'aoDetailMode':'string','aoIntensity':'number','diffuse':'rgb',...rt('diffuse'),...rt('diffuseDet'+'ail',!(-0x1*0x17a1+0x7*-0x354+0x2eed),!(-0x14ea+-0x1*-0x19b+0x67*0x30)),'diffuseDetailMode':'string','specular':'rgb','specularTint':'boolean',...rt('specular'),'occludeSpecular':'enum:occlu'+'deSpecular','specularityFactor':'number','specularityFactorTint':'boolean',...rt('specularit'+'yFactor'),'useMetalness':'boolean','metalness':'number','enableGGXSpecular':'boolean','metalnessTint':'boolean',...rt('metalness'),'useMetalnessSpecularColor':'boolean','anisotropyIntensity':'number','anisotropyRotation':'number',...rt('anisotropy'),'shininess':'number','gloss':'number','glossInvert':'boolean',...rt('gloss'),'clearCoat':'number',...rt('clearCoat'),'clearCoatGloss':'number','clearCoatGlossInvert':'boolean',...rt('clearCoatG'+'loss'),'clearCoatBumpiness':'number',...rt('clearCoatN'+'ormal',!(0xb53+0xc3d+-0x178f)),'useSheen':'boolean','sheen':'rgb',...rt('sheen'),'sheenGloss':'number','sheenGlossInvert':'boolean',...rt('sheenGloss'),'fresnelModel':'number','emissive':'rgb',...rt('emissive'),'emissiveIntensity':'number',...rt('normal',!(-0x5*0x57a+0x1d0c+-0x1a9)),'bumpiness':'number',...rt('normalDeta'+'il',!(-0x937+-0x1f23+0x1*0x285b)),'normalDetailMapBumpiness':'number',...rt('height',!(0xd63+0x1e11*-0x1+0x10ae),!(-0x1e93*-0x1+-0x2f8+0x1*-0x1b9a)),'heightMapFactor':'number','alphaToCoverage':'boolean','alphaTest':'number','alphaFade':'number','opacity':'number',...rt('opacity'),'opacityFadesSpecular':'boolean','opacityDither':'string','opacityShadowDither':'string','reflectivity':'number','refraction':'number','refractionTint':'boolean',...rt('refraction'),'refractionIndex':'number','dispersion':'number','thickness':'number','thicknessTint':'boolean',...rt('thickness'),'attenuation':'rgb','attenuationDistance':'number','useDynamicRefraction':'boolean','sphereMap':'texture','cubeMap':'cubemap','cubeMapProjection':'number','cubeMapProjectionBox':'boundingbo'+'x','useIridescence':'boolean','iridescence':'number','iridescenceTint':'boolean',...rt('iridescenc'+'e'),'iridescenceThicknessTint':'boolean','iridescenceThicknessMin':'number','iridescenceThicknessMax':'number','iridescenceRefractionIndex':'number',...rt('iridescenc'+'eThickness'),...rt('light'),'depthTest':'boolean','depthFunc':'enum:depth'+'Func','depthWrite':'boolean','depthBias':'number','slopeDepthBias':'number','cull':'enum:cull','blendType':'enum:blend'+'Type','useFog':'boolean','useLighting':'boolean','useSkybox':'boolean','useTonemap':'boolean','envAtlas':'texture','twoSidedLighting':'boolean','shadowCatcher':'boolean'},ad=[];for(const l in Un)Un[l]==='texture'&&ad['push'](l);const Bp=[];for(const l in Un)Un[l]==='cubemap'&&Bp['push'](l);const FE={'aoMapVertexColor':'boolean','diffuseMapTint':'boolean','diffuseMapVertexColor':'boolean','emissiveMapTint':'boolean','emissiveMapVertexColor':'boolean','glossMapVertexColor':'boolean','metalnessMapVertexColor':'boolean','opacityMapVertexColor':'boolean','specularAntialias':'boolean','specularMapTint':'boolean','specularMapVertexColor':'boolean','ambientTint':'boolean','emissiveTint':'boolean','diffuseTint':'boolean','sheenTint':'boolean','conserveEnergy':'boolean','useGamma':'boolean','useGammaTonemap':'boolean','sheenGlossTint':'boolean','anisotropy':'boolean'},Pc={},Hy={};let Jn=new Set();const ql=new ie();class Ut extends er{constructor(){super(),h(this,'userAttrib'+'utes',new Map()),h(this,'onUpdateSh'+'ader'),(this['_assetRefe'+'rences']={},this['_activePar'+'ams']=new Set(),this['_activeLig'+'htingParam'+'s']=new Set(),this['shaderOptB'+'uilder']=new OE(),this['reset']());}['reset'](){Object['keys'](Pc)['forEach'](_0x42cd6b=>{this['_'+_0x42cd6b]=Pc[_0x42cd6b]['value']();}),this['_uniformCa'+'che']={};}['copy'](_0x3cd09b){return super['copy'](_0x3cd09b),Object['keys'](Pc)['forEach'](_0x2de34a=>{this[_0x2de34a]=_0x3cd09b[_0x2de34a];}),this['userAttrib'+'utes']=new Map(_0x3cd09b['userAttrib'+'utes']),this;}['setAttribu'+'te'](_0x7ceaba,_0x326594){this['userAttrib'+'utes']['set'](_0x326594,_0x7ceaba);}['_setParame'+'ter'](_0x3b84f2,_0x24f4fd){Jn['add'](_0x3b84f2),this['setParamet'+'er'](_0x3b84f2,_0x24f4fd);}['_setParame'+'ters'](_0x1c67c5){_0x1c67c5['forEach'](_0x41d4f7=>{this['_setParame'+'ter'](_0x41d4f7['name'],_0x41d4f7['value']);});}['_processPa'+'rameters'](_0x4cf4d9){const _0x411f43=this[_0x4cf4d9];_0x411f43['forEach'](_0x5cebb=>{Jn['has'](_0x5cebb)||delete this['parameters'][_0x5cebb];}),this[_0x4cf4d9]=Jn,Jn=_0x411f43,Jn['clear']();}['_updateMap'](_0x2bbc7e){const _0x8d5709=_0x2bbc7e+'Map',_0x54848f=this[_0x8d5709];if(_0x54848f){this['_setParame'+'ter']('texture_'+_0x8d5709,_0x54848f);const _0x25aea6=_0x8d5709+'Transform',_0x56948b=this['getUniform'](_0x25aea6);_0x56948b&&this['_setParame'+'ters'](_0x56948b);}}['_allocUnif'+'orm'](_0x1465c9,_0x3c901a){let _0x368b3a=this['_uniformCa'+'che'][_0x1465c9];return _0x368b3a||(_0x368b3a=_0x3c901a(),this['_uniformCa'+'che'][_0x1465c9]=_0x368b3a),_0x368b3a;}['getUniform'](_0x2d5ab6,_0x5c7332,_0xab7b6a){return Hy[_0x2d5ab6](this,_0x5c7332,_0xab7b6a);}['updateUnif'+'orms'](_0x4d6585,_0x57f176){const _0x37d230=_0x5d21fc=>this['getUniform'](_0x5d21fc,_0x4d6585,_0x57f176);this['_setParame'+'ter']('material_a'+'mbient',_0x37d230('ambient')),this['_setParame'+'ter']('material_d'+'iffuse',_0x37d230('diffuse')),this['_setParame'+'ter']('material_a'+'oIntensity',this['aoIntensit'+'y']),this['useMetalne'+'ss']?((!this['metalnessM'+'ap']||this['metalness']<0xc82+0x98*0xa+0x1271*-0x1)&&this['_setParame'+'ter']('material_m'+'etalness',this['metalness']),(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x37d230('specular')),(!this['specularit'+'yFactorMap']||this['specularit'+'yFactorTin'+'t'])&&this['_setParame'+'ter']('material_s'+'pecularity'+'Factor',this['specularit'+'yFactor']),this['_setParame'+'ter']('material_s'+'heen',_0x37d230('sheen')),this['_setParame'+'ter']('material_s'+'heenGloss',this['sheenGloss']),this['_setParame'+'ter']('material_r'+'efractionI'+'ndex',this['refraction'+'Index'])):(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x37d230('specular')),this['enableGGXS'+'pecular']&&(this['_setParame'+'ter']('material_a'+'nisotropyI'+'ntensity',this['anisotropy'+'Intensity']),this['_setParame'+'ter']('material_a'+'nisotropyR'+'otation',[Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']),Math['sin'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD'])])),this['clearCoat']>-0x4ac+0x131f+-0x1*0xe73&&(this['_setParame'+'ter']('material_c'+'learCoat',this['clearCoat']),this['_setParame'+'ter']('material_c'+'learCoatGl'+'oss',this['clearCoatG'+'loss']),this['_setParame'+'ter']('material_c'+'learCoatBu'+'mpiness',this['clearCoatB'+'umpiness'])),this['_setParame'+'ter']('material_g'+'loss',this['gloss']),w['call'](()=>{this['emissiveMa'+'p']&&this['emissive']['r']===0x7*-0x264+0x809+-0x83*-0x11&&this['emissive']['g']===-0x8*-0x431+-0xf*0x278+-0x20*-0x1c&&this['emissive']['b']===-0x1fea+-0x50*-0x3+0x262*0xd&&w['warnOnce']('Emissive\x20m'+'ap\x20is\x20set\x20'+'but\x20emissi'+'ve\x20color\x20i'+'s\x20black,\x20m'+'aking\x20the\x20'+'map\x20invisi'+'ble.\x20Set\x20e'+'missive\x20co'+'lor\x20to\x20whi'+'te\x20to\x20make'+'\x20the\x20map\x20v'+'isible.\x20Re'+'ndering\x20['+Q['toString']()+']',this);}),this['_setParame'+'ter']('material_e'+'missive',_0x37d230('emissive')),this['_setParame'+'ter']('material_e'+'missiveInt'+'ensity',this['emissiveIn'+'tensity']),this['refraction']>-0xd47+0x1*0xf9d+-0x256&&this['_setParame'+'ter']('material_r'+'efraction',this['refraction']),this['dispersion']>0x2f*-0x5d+0x153*0x11+-0x570&&this['_setParame'+'ter']('material_d'+'ispersion',this['dispersion']),this['useDynamic'+'Refraction']&&(this['_setParame'+'ter']('material_t'+'hickness',this['thickness']),this['_setParame'+'ter']('material_a'+'ttenuation',_0x37d230('attenuatio'+'n')),this['_setParame'+'ter']('material_i'+'nvAttenuat'+'ionDistanc'+'e',this['attenuatio'+'nDistance']===0x24b*-0x4+-0x125b+0x1b87?0x24*0xff+-0xa6+-0x2336:(-0x1ad6+0x34*-0x3+-0x1b73*-0x1)/this['attenuatio'+'nDistance'])),this['useIridesc'+'ence']&&(this['_setParame'+'ter']('material_i'+'ridescence',this['iridescenc'+'e']),this['_setParame'+'ter']('material_i'+'ridescence'+'Refraction'+'Index',this['iridescenc'+'eRefractio'+'nIndex']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'in',this['iridescenc'+'eThickness'+'Min']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'ax',this['iridescenc'+'eThickness'+'Max'])),this['_setParame'+'ter']('material_o'+'pacity',this['opacity']),this['opacityFad'+'esSpecular']===!(-0x6b9+-0xb42+-0x11fc*-0x1)&&this['_setParame'+'ter']('material_a'+'lphaFade',this['alphaFade']),this['occludeSpe'+'cular']&&this['_setParame'+'ter']('material_o'+'ccludeSpec'+'ularIntens'+'ity',this['occludeSpe'+'cularInten'+'sity']),this['cubeMapPro'+'jection']===wy&&this['_setParame'+'ter'](_0x37d230('cubeMapPro'+'jectionBox'));for(const _0x14a531 in Sn)this['_updateMap'](_0x14a531);this['ambientSH']&&this['_setParame'+'ter']('ambientSH['+'0]',this['ambientSH']),this['normalMap']&&this['_setParame'+'ter']('material_b'+'umpiness',this['bumpiness']),this['normalMap']&&this['normalDeta'+'ilMap']&&this['_setParame'+'ter']('material_n'+'ormalDetai'+'lMapBumpin'+'ess',this['normalDeta'+'ilMapBumpi'+'ness']),this['heightMap']&&this['_setParame'+'ter']('material_h'+'eightMapFa'+'ctor',_0x37d230('heightMapF'+'actor')),this['envAtlas']&&this['cubeMap']?(this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap'])):this['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']):this['cubeMap']?this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap']):this['sphereMap']&&this['_setParame'+'ter']('texture_sp'+'hereMap',this['sphereMap']),this['_setParame'+'ter']('material_r'+'eflectivit'+'y',this['reflectivi'+'ty']),this['_processPa'+'rameters']('_activePar'+'ams'),super['updateUnif'+'orms'](_0x4d6585,_0x57f176);}['updateEnvU'+'niforms'](_0x3c35ab,_0xfcbb2){!(this['envAtlas']||this['cubeMap']||this['sphereMap'])&&this['useSkybox']&&(_0xfcbb2['envAtlas']&&_0xfcbb2['skybox']?(this['_setParame'+'ter']('texture_en'+'vAtlas',_0xfcbb2['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',_0xfcbb2['skybox'])):_0xfcbb2['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',_0xfcbb2['envAtlas']):_0xfcbb2['skybox']&&this['_setParame'+'ter']('texture_cu'+'beMap',_0xfcbb2['skybox'])),this['_processPa'+'rameters']('_activeLig'+'htingParam'+'s');}['getShaderV'+'ariant'](_0x17e41d){const {device:_0x2971b4,scene:_0xf4c02f,pass:_0xb55ab3,objDefs:_0x377ddb,sortedLights:_0xcca170,cameraShaderParams:_0x999ecd}=_0x17e41d;this['updateEnvU'+'niforms'](_0x2971b4,_0xf4c02f);const _0x496044=Si['get'](_0x2971b4)['getByIndex'](_0xb55ab3),_0x24801b=_0xb55ab3===Wn||_0xb55ab3===vl||_0x496044['isShadow'];let _0x55ea67=_0x24801b?Id['optionsCon'+'textMin']:Id['optionsCon'+'text'];_0x55ea67['defines']=$t['getCoreDef'+'ines'](this,_0x17e41d),_0x24801b?this['shaderOptB'+'uilder']['updateMinR'+'ef'](_0x55ea67,_0xf4c02f,this,_0x377ddb,_0xb55ab3,_0xcca170):this['shaderOptB'+'uilder']['updateRef'](_0x55ea67,_0xf4c02f,_0x999ecd,this,_0x377ddb,_0xb55ab3,_0xcca170),this['useFog']||_0x55ea67['defines']['set']('FOG','NONE'),_0x55ea67['defines']['set']('TONEMAP',by[_0x55ea67['litOptions']['toneMap']]),this['onUpdateSh'+'ader']&&(_0x55ea67=this['onUpdateSh'+'ader'](_0x55ea67));const _0x5a5325=new rd(_0x17e41d['viewUnifor'+'mFormat'],_0x17e41d['viewBindGr'+'oupFormat'],_0x17e41d['vertexForm'+'at']),_0x1e112d=Nn(_0x2971b4);_0x1e112d['register']('standard',Id);const _0x1b1314=_0x1e112d['getProgram']('standard',_0x55ea67,_0x5a5325,this['userId']);return this['_dirtyShad'+'er']=!(0x1ae8+-0xeda*-0x2+-0x1*0x389b),_0x1b1314;}['destroy'](){for(const _0x3d7d8f in this['_assetRefe'+'rences'])this['_assetRefe'+'rences'][_0x3d7d8f]['_unbind']();this['_assetRefe'+'rences']=null,super['destroy']();}}h(Ut,'TEXTURE_PA'+'RAMETERS',ad),h(Ut,'CUBEMAP_PA'+'RAMETERS',Bp);const nd=(_0x17d033,_0x5829e0)=>{Hy[_0x17d033]=_0x5829e0;},zp=(_0x2c7eb3,_0x302f3a,_0x384842,_0x9153b6)=>{Object['defineProp'+'erty'](Ut['prototype'],_0x2c7eb3,{'get':_0x9153b6||function(){return this['_'+_0x2c7eb3];},'set':_0x384842}),Pc[_0x2c7eb3]={'value':_0x302f3a};},NE=_0x595061=>{const _0x50da94='_'+_0x595061['name'],_0x7959bc=_0x595061['dirtyShade'+'rFunc']||(()=>!(-0x106*-0x7+-0x2405+0x1cdb)),_0x57a385=function(_0x143789){const _0x553475=this[_0x50da94];_0x553475!==_0x143789&&(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x7959bc(_0x553475,_0x143789),this[_0x50da94]=_0x143789);};zp(_0x595061['name'],()=>_0x595061['defaultVal'+'ue'],_0x57a385,_0x595061['getterFunc']);},kE=_0x5bd78a=>{const _0x25c564='_'+_0x5bd78a['name'],_0x91876=_0x5bd78a['dirtyShade'+'rFunc']||(()=>!(-0x68+-0xa5d+0xac5)),_0x59c1c4=function(_0x5a1894){const _0x35e686=this[_0x25c564];_0x35e686['equals'](_0x5a1894)||(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x91876(_0x35e686,_0x5a1894),this[_0x25c564]=_0x35e686['copy'](_0x5a1894));};zp(_0x5bd78a['name'],()=>_0x5bd78a['defaultVal'+'ue']['clone'](),_0x59c1c4,_0x5bd78a['getterFunc']);},Es=_0x2b113d=>_0x2b113d['defaultVal'+'ue']&&_0x2b113d['defaultVal'+'ue']['clone']?kE(_0x2b113d):NE(_0x2b113d);function et(_0x2c6b3b,_0x4723d3='rgb',_0x5b4496=!(0x81c+0x1*-0x763+-0xb9),_0x522a66=-0x6e7+-0x27*-0x79+-0xb88){Sn[_0x2c6b3b]=_0x4723d3['length']||-(0x9*-0x265+0xda1*0x1+0x7ed*0x1),Es({'name':_0x2c6b3b+'Map','defaultValue':null,'dirtyShaderFunc':(_0x2f9de6,_0x4ff90e)=>!!_0x2f9de6!=!!_0x4ff90e||_0x2f9de6&&(_0x2f9de6['type']!==_0x4ff90e['type']||_0x2f9de6['format']!==_0x4ff90e['format'])}),Es({'name':_0x2c6b3b+'MapTiling','defaultValue':new J(-0x17d3+0x15f7+0x1dd,-0xe64*-0x2+-0xf63+-0xd64)}),Es({'name':_0x2c6b3b+'MapOffset','defaultValue':new J(-0x1bd2+0x13d6+0x7fc,-0x2354+0x924+-0x68c*-0x4)}),Es({'name':_0x2c6b3b+('MapRotatio'+'n'),'defaultValue':0x0}),Es({'name':_0x2c6b3b+'MapUv','defaultValue':_0x522a66}),_0x4723d3&&(Es({'name':_0x2c6b3b+'MapChannel','defaultValue':_0x4723d3}),_0x5b4496&&(Es({'name':_0x2c6b3b+('VertexColo'+'r'),'defaultValue':!(0x1*-0x13c9+0x4aa+0xf20)}),Es({'name':_0x2c6b3b+('VertexColo'+'rChannel'),'defaultValue':_0x4723d3})));const _0x3d6548=_0x2c6b3b+'MapTiling',_0x2b673b=_0x2c6b3b+'MapOffset',_0x4f06eb=_0x2c6b3b+('MapRotatio'+'n'),_0xf90b1=_0x2c6b3b+('MapTransfo'+'rm');nd(_0xf90b1,(_0x33ca61,_0x56419f,_0x2f8322)=>{const _0x3d2eca=_0x33ca61[_0x3d6548],_0x30c57c=_0x33ca61[_0x2b673b],_0x3aa029=_0x33ca61[_0x4f06eb];if(_0x3d2eca['x']===0x910+0x9bf+0x1d*-0xa6&&_0x3d2eca['y']===-0x50a+0x1*0x1ca5+-0x179a&&_0x30c57c['x']===-0x147d+0x3*-0x215+0x1abc&&_0x30c57c['y']===0xd55+0x1*-0xdf6+0xa1&&_0x3aa029===0x1efc+-0xda*-0x16+-0x31b8)return null;const _0x34f8c7=_0x33ca61['_allocUnif'+'orm'](_0xf90b1,()=>[{'name':'texture_'+_0xf90b1+'0','value':new Float32Array(-0x13*-0x17+-0x1fe8+0x2*0xf1b)},{'name':'texture_'+_0xf90b1+'1','value':new Float32Array(-0x121d+0x9*-0x27b+-0x5*-0x817)}]),_0x3ef1d3=Math['cos'](_0x3aa029*Y['DEG_TO_RAD']),_0x3bd610=Math['sin'](_0x3aa029*Y['DEG_TO_RAD']),_0x324868=_0x34f8c7[-0x2566*0x1+-0x1621+0x3b87]['value'];_0x324868[-0x1*0x9eb+-0x1*0x1147+0x1b32]=_0x3ef1d3*_0x3d2eca['x'],_0x324868[-0x1*-0xf98+0xbc0+-0x1b57]=-_0x3bd610*_0x3d2eca['y'],_0x324868[-0x1d14+-0x23fa+0x4110]=_0x30c57c['x'];const _0x1b3df4=_0x34f8c7[0x2006+0x3*-0x9f5+-0x226]['value'];return _0x1b3df4[0x20a2+0x1f*0x133+0x6f*-0xa1]=_0x3bd610*_0x3d2eca['x'],_0x1b3df4[0x1c0+0x631+-0x7f0]=_0x3ef1d3*_0x3d2eca['y'],_0x1b3df4[0x63e+-0x259e+0x1f62]=-0x4ee+-0xf01+0xb*0x1d0-_0x3d2eca['y']-_0x30c57c['y'],_0x34f8c7;});}function Pa(_0x3b6ef4,_0x4b0021){Es({'name':_0x3b6ef4,'defaultValue':_0x4b0021,'getterFunc':function(){return this['_dirtyShad'+'er']=!(-0xc16+-0x13*-0xad+-0xc1*0x1),this['_'+_0x3b6ef4];}}),nd(_0x3b6ef4,(_0x5a2d77,_0x28de1c,_0x151f8c)=>{const _0x1a935e=_0x5a2d77['_allocUnif'+'orm'](_0x3b6ef4,()=>new Float32Array(-0x8b*-0x39+-0x1*0x2479+-0xd*-0x6d)),_0x53c487=_0x5a2d77[_0x3b6ef4];return ql['linear'](_0x53c487),_0x1a935e[0x2c2*0x1+0x1fce+-0x2290]=ql['r'],_0x1a935e[-0x13a0+-0x76*0x3d+0x1*0x2fbf]=ql['g'],_0x1a935e[-0xf81+0x258f+-0x44*0x53]=ql['b'],_0x1a935e;});}function ze(_0x1d724e,_0x3354b4,_0x41024c){Es({'name':_0x1d724e,'defaultValue':_0x3354b4,'dirtyShaderFunc':(_0x1e11aa,_0x39ab7c)=>(_0x1e11aa===-0x1616+0xe0e*-0x1+0x2424||_0x1e11aa===0x1829*0x1+0x1c13*0x1+-0x1169*0x3)!=(_0x39ab7c===0x2200+0x16*-0x13b+-0x6ee||_0x39ab7c===-0x218f+-0x8a*0x1+0x221a)}),nd(_0x1d724e,_0x41024c);}function eo(_0x3d5139,_0x49884b){Es({'name':_0x3d5139,'defaultValue':null,'dirtyShaderFunc':(_0x51d4ed,_0x19596e)=>!!_0x51d4ed==!!_0x19596e}),nd(_0x3d5139,_0x49884b);}function ke(_0x45bdaf,_0x37385d){Es({'name':_0x45bdaf,'defaultValue':_0x37385d});}function UE(){Pa('ambient',new ie(0x396+0x72b+-0x4*0x2b0,-0x94c+-0x1156+-0x3*-0x8e1,0x2*-0xb34+0x59*-0x53+0x3344)),Pa('diffuse',new ie(-0x2*-0x51b+-0x9c4+-0x71*0x1,0x1fe8+-0x2f1*0x8+-0x85f*0x1,0x1*-0x149e+0x52e+-0xf71*-0x1)),Pa('specular',new ie(0x26b7+0x1c86+0x7*-0x99b,0x1cb7+-0x2276+0x5bf,-0x89e+0x262f+-0x1d91)),Pa('emissive',new ie(0x23e7+0x22f8*0x1+-0x1*0x46df,0xb9f+-0x20e7+-0x18*-0xe3,0x101*-0x6+-0x1e46+0x194*0x17)),Pa('sheen',new ie(0xcb*0x2f+-0x37*0x1+-0x250d,-0x1374+0x42e+0xf47,0x1e53+-0xf04+0xf4e*-0x1)),Pa('attenuatio'+'n',new ie(-0x514+0x1019+-0xb04,0x293*0x2+0x1beb+-0x2110,-0x610+-0xfdf+0x3*0x750)),ze('emissiveIn'+'tensity',-0xab7+-0xc7*0x2+-0x2*-0x623),ze('specularit'+'yFactor',-0x18e*-0x1+-0x1551+0x13c4),ze('sheenGloss',-0x12dc+0x2643+0x1*-0x1367),ze('gloss',0x2223+0x1367+-0x358a+0.25),ze('aoIntensit'+'y',-0x1*0x1f61+0x4*-0x6f7+0x3b3e),ze('heightMapF'+'actor',0x1*-0x26c7+-0x40f*0x3+0x32f5,(_0x39eb53,_0x13b29d,_0x1810e0)=>_0x39eb53['heightMapF'+'actor']*(0x1d0*-0x11+0x1c76+0x25a+0.025)),ze('opacity',0x2d9+-0x210d*0x1+0x1e35),ze('alphaFade',0x55*0x52+0x1*-0x1a91+-0xc*0xe),ze('alphaTest',-0x58f+-0x189d*0x1+0x78b*0x4),ze('bumpiness',0x68b*0x1+0xaf4+0x117e*-0x1),ze('normalDeta'+'ilMapBumpi'+'ness',0x1ab6+-0x1d75*0x1+0xb*0x40),ze('reflectivi'+'ty',-0xb*-0x324+-0x37c*-0x2+-0x2983),ze('occludeSpe'+'cularInten'+'sity',-0x6fd+0xf6b*0x1+-0x2cf*0x3),ze('refraction',0x8e1+0x1*-0x1307+-0x1*-0xa26),ze('refraction'+'Index',(0x17a7+-0x191d+0x177)/(-0x2*-0xf95+-0xe18+-0x11*0x101+0.5)),ze('dispersion',0x6b*0x6+0x5*0x4e9+0x905*-0x3),ze('thickness',-0x1403*0x1+0x2199+-0xd96),ze('attenuatio'+'nDistance',0x3*-0xa21+-0x11ed+0x3050),ze('metalness',0x525+0x2*0x853+-0x15ca),ze('anisotropy'+'Intensity',0xdbb*0x2+0x45e+-0x1fd4),ze('anisotropy'+'Rotation',-0x1*0x311+0x17*0x47+0x10*-0x35),ze('clearCoat',-0x479+-0x1c9*0xd+-0xdd7*-0x2),ze('clearCoatG'+'loss',-0x13fb+0x11a4+0x258),ze('clearCoatB'+'umpiness',-0x2184+-0x5*-0x1b7+0x18f2),ze('aoUvSet',0x1c0*0x10+0x4*-0x27a+-0x243*0x8,null),ze('iridescenc'+'e',-0x1b80+-0x70*0x3+0x1cd0),ze('iridescenc'+'eRefractio'+'nIndex',(0xa04+-0x234e*0x1+-0x5*-0x50f)/(-0x1*0xac4+0x17da+0xd15*-0x1+0.5)),ze('iridescenc'+'eThickness'+'Min',0x232b+0x25a0+-0xe8f*0x5),ze('iridescenc'+'eThickness'+'Max',0xa*0x1e6+-0x20e+-0xb*0x18a),eo('ambientSH'),eo('cubeMapPro'+'jectionBox',(_0x33306f,_0x2a3d3a,_0x1221d3)=>{const _0x20539c=_0x33306f['_allocUnif'+'orm']('cubeMapPro'+'jectionBox',()=>[{'name':'envBoxMin','value':new Float32Array(0x3*0x3e1+0x26cf*-0x1+0x1b2f*0x1)},{'name':'envBoxMax','value':new Float32Array(0x267b+-0x1252+-0x1426)}]),_0x22df3f=_0x33306f['cubeMapPro'+'jectionBox']['getMin'](),_0x4a9b38=_0x20539c[-0x12a8+-0x18*0x67+0x1c50]['value'];_0x4a9b38[-0x1*-0xe99+-0x34b*0x1+-0xb4e]=_0x22df3f['x'],_0x4a9b38[0x7*-0x2fb+-0x2*-0x1a6+0xd*0x15a]=_0x22df3f['y'],_0x4a9b38[-0xb*0x21a+-0x1fdd*-0x1+-0x8bd]=_0x22df3f['z'];const _0x10dfe5=_0x33306f['cubeMapPro'+'jectionBox']['getMax'](),_0x4575e7=_0x20539c[-0x15e*0xa+0x1*-0x64d+0x13fa]['value'];return _0x4575e7[-0x1*-0x25fd+-0x17cc+-0xe31]=_0x10dfe5['x'],_0x4575e7[-0x197*0xb+0xab9*0x1+-0x6c5*-0x1]=_0x10dfe5['y'],_0x4575e7[0x2349+0x161*-0x2+0x19*-0x14d]=_0x10dfe5['z'],_0x20539c;}),ke('specularTi'+'nt',!(-0x1*0x180e+0x1107+0x708)),ke('specularit'+'yFactorTin'+'t',!(-0x1*-0x1e89+0x227e+-0x4106)),ke('useMetalne'+'ss',!(-0x11c0+0xd*0x2f+0xf5e)),ke('useMetalne'+'ssSpecular'+'Color',!(-0x450*0x4+0xa3f+0x702)),ke('useSheen',!(0xc07+0x257+-0xe5d)),ke('enableGGXS'+'pecular',!(0x1c*0x50+0x251*0x1+-0xb10)),ke('occludeDir'+'ect',!(-0x1*-0xbe7+-0xbab*0x1+-0x3b*0x1)),ke('opacityFad'+'esSpecular',!(-0x3*-0xaab+0x233f+-0x4340)),ke('occludeSpe'+'cular',id),ke('fresnelMod'+'el',Tp),ke('useDynamic'+'Refraction',!(0xa62+0x8da*-0x1+0x17*-0x11)),ke('cubeMapPro'+'jection',Pp),ke('useFog',!(-0x20f+-0x964*0x4+-0x467*-0x9)),ke('useLightin'+'g',!(0x420+-0x5*-0xe4+-0x894)),ke('useTonemap',!(-0x1fc6+0x839+0x1*0x178d)),ke('useSkybox',!(-0xa7+0x1e0e+0x243*-0xd)),ke('forceUv1',!(-0x1034+-0x1*-0x21e6+-0x11b1)),ke('pixelSnap',!(0xb64+-0x1552+0x9ef)),ke('twoSidedLi'+'ghting',!(0x328*-0xb+0x7c7+0xd79*0x2)),ke('nineSliced'+'Mode',void(-0x1fca+-0x1*-0x235d+-0xf*0x3d)),ke('msdfTextAt'+'tribute',!(0x25d2+0x886*-0x1+-0x1d4b)),ke('useIridesc'+'ence',!(-0x101a+-0x21d7+0x31f2)),ke('glossInver'+'t',!(0x3*-0xbbb+0x13a5+0xf8d)),ke('sheenGloss'+'Invert',!(0x355*-0xa+-0x1d*-0x49+0x190e)),ke('clearCoatG'+'lossInvert',!(0x74b*0x2+-0x42*-0x65+-0x289f)),ke('opacityDit'+'her',ua),ke('opacitySha'+'dowDither',ua),ke('shadowCatc'+'her',!(-0x7d*0x39+0xcd4+0xf02)),et('diffuse'),et('specular'),et('emissive'),et('thickness','g'),et('specularit'+'yFactor','g'),et('normal',''),et('metalness','g'),et('gloss','g'),et('opacity','a'),et('refraction','g'),et('height','g',!(-0x2357*-0x1+0xa6e+-0x2dc4)),et('ao','g'),et('light','rgb',!(-0x1b59*-0x1+0xa3d+-0x236*0x11),0x139e+-0x1f68+0x1*0xbcb),et('msdf',''),et('diffuseDet'+'ail','rgb',!(-0x1634+-0x1d4d+0x3382)),et('normalDeta'+'il',''),et('aoDetail','g',!(-0x19*0x14+-0x6fa+0x8ef)),et('clearCoat','g'),et('clearCoatG'+'loss','g'),et('clearCoatN'+'ormal',''),et('sheen','rgb'),et('sheenGloss','g'),et('iridescenc'+'e','g'),et('iridescenc'+'eThickness','g'),et('anisotropy',''),ke('diffuseDet'+'ailMode',Bm),ke('aoDetailMo'+'de',Bm),eo('cubeMap'),eo('sphereMap'),eo('envAtlas');const _0x4391af=function(){return this['_prefilter'+'edCubemaps'];},_0x2b7a1f=function(_0x50e1d8){const _0x26fefa=this['_prefilter'+'edCubemaps'];_0x50e1d8=_0x50e1d8||[];let _0x30b164=!(-0x1*0x1461+-0x4e*-0x29+0x7e4),_0xa1ce99=!(-0x1a7e+-0x1*0x431+0x1eaf);for(let _0x1fe586=0x336+0x1286+-0x15bc;_0x1fe586<0x1054+0x66b*0x1+-0x16b9;++_0x1fe586){const _0x4a50f8=_0x50e1d8[_0x1fe586]||null;_0x26fefa[_0x1fe586]!==_0x4a50f8&&(_0x26fefa[_0x1fe586]=_0x4a50f8,_0x30b164=!(0x6b+-0x1*0x2a5+0x23a)),_0xa1ce99=_0xa1ce99&&!!_0x26fefa[_0x1fe586];}_0x30b164&&(_0xa1ce99?this['envAtlas']=zy['generatePr'+'efilteredA'+'tlas'](_0x26fefa,{'target':this['envAtlas']}):this['envAtlas']&&(this['envAtlas']['destroy'](),this['envAtlas']=null),this['_dirtyShad'+'er']=!(0x1e7a+-0xaee+0x1a1*-0xc));},_0x552851=[null,null,null,null,null,null];zp('prefiltere'+'dCubemaps',()=>_0x552851['slice'](),_0x2b7a1f,_0x4391af);}UE();const Rt=class Rt{static['render'](_0x3891e2,_0x4bf720){const _0x440ace=_0x4bf720['device'],_0x46cd63=_0x3891e2['cells'],_0x4281c3=_0x3891e2['lightsBuff'+'er'],_0x496425=_0x4281c3['boundsMin'],_0xe1037d=_0x4281c3['boundsDelt'+'a'],_0x3bc61b=_0x496425['clone']()['add'](_0xe1037d),_0x44b783=_0x4281c3['boundsDelt'+'a']['clone']()['div'](_0x46cd63),_0x419a05=Rt['gridPositi'+'ons'],_0x5806d0=Rt['gridColors'],_0x330f82=new ie(-0x1dcd+0x63+-0xf*-0x1f6+0.3,0x9*-0x2df+-0x1448+0x2e1f+0.3,-0xbca+-0x18d7*-0x1+0xd*-0x101+0.3),_0x180c6d=(_0x4dc2f1,_0xbe7010,_0x2ab296,_0x3a55ba,_0x528acf,_0x1f37d8,_0xf1cc27,_0x2576f2,_0x5f25f7)=>{for(let _0x3812f2=-0x11a6+0x17b1+-0x77*0xd;_0x3812f2<=_0x4dc2f1;_0x3812f2++)for(let _0x1b8824=-0x97*-0x29+-0x1c8c+-0x45d*-0x1;_0x1b8824<=_0xbe7010;_0x1b8824++){const _0xd42857=_0x2ab296+_0x3812f2*_0x3a55ba,_0x79e929=_0x528acf+_0x1b8824*_0x1f37d8;_0x5f25f7===0x1*0x130c+-0x1*-0xa75+-0x1d81?_0x419a05['push'](_0xd42857,_0xf1cc27,_0x79e929,_0xd42857,_0x2576f2,_0x79e929):_0x5f25f7===0x1c1a+-0xed4*-0x1+0x3*-0xe4f?_0x419a05['push'](_0xd42857,_0x79e929,_0xf1cc27,_0xd42857,_0x79e929,_0x2576f2):_0x5f25f7===-0x878*0x1+-0x1*0x257b+0x2df5&&_0x419a05['push'](_0xf1cc27,_0xd42857,_0x79e929,_0x2576f2,_0xd42857,_0x79e929);}};if(_0x180c6d(_0x46cd63['x'],_0x46cd63['z'],_0x496425['x'],_0x44b783['x'],_0x496425['z'],_0x44b783['z'],_0x496425['y'],_0x3bc61b['y'],-0x1f*0x53+-0x4e5*0x7+0x2c50),_0x180c6d(_0x46cd63['x'],_0x46cd63['y'],_0x496425['x'],_0x44b783['x'],_0x496425['y'],_0x44b783['y'],_0x496425['z'],_0x3bc61b['z'],0xff2*0x2+-0x9f1+-0x15f2),_0x180c6d(_0x46cd63['y'],_0x46cd63['z'],_0x496425['y'],_0x44b783['y'],_0x496425['z'],_0x44b783['z'],_0x496425['x'],_0x3bc61b['x'],-0x12ba+0xec*-0xa+-0x1bf4*-0x1),_0x419a05['length']){const _0x37ff47=_0x419a05['length']/(0x21ad+0xad*0xd+-0x2a73);if(_0x37ff47!==_0x5806d0['length']/(-0xc2b*0x3+0x1*-0x537+0x29bc)){_0x5806d0['length']=0x265*0x10+0x1b91*0x1+-0x41e1;for(let _0x8a35e7=0x1*-0x1e7f+0x3e*-0x59+-0x1*-0x340d;_0x8a35e7<_0x37ff47;_0x8a35e7++)_0x5806d0['push'](_0x330f82['r'],_0x330f82['g'],_0x330f82['b'],_0x330f82['a']);}_0x4bf720['drawLineAr'+'rays'](_0x419a05,_0x5806d0),_0x419a05['length']=-0x1dd5+0x2520+-0x1*0x74b;}let _0x48e2e1=Rt['mesh'];_0x48e2e1||(_0x48e2e1=new Ge(_0x440ace),_0x48e2e1['clear'](!(-0x88*0x3e+0x2*-0x44b+0x2986),!(0x3*0x727+0x665*0x1+-0x1bda)),Rt['mesh']=_0x48e2e1);const _0x337916=[],_0x86b347=[],_0x433cba=[],_0x33eb80=_0x3891e2['_cells']['x'],_0x469db3=_0x3891e2['_cells']['z'],_0x151668=_0x3891e2['counts'],_0x24d871=_0x3891e2['_maxCellLi'+'ghtCount'],_0x567443=new D(),_0x5467e0=new D(),_0xf6c72=new D(),_0x283034=_0xe1037d['clone']()['div'](_0x46cd63);let _0x11c6f6=0xd92+-0x123a+0x4a8;for(let _0x2082e0=-0x44d*-0x1+0x381+-0x2*0x3e7;_0x2082e0<_0x46cd63['x'];_0x2082e0++)for(let _0x306055=0x3b*-0x47+0xb*0x18b+0x4e*-0x2;_0x306055<_0x46cd63['z'];_0x306055++)for(let _0x2c17f6=-0x5*0x15c+0xe25+-0x759;_0x2c17f6<_0x46cd63['y'];_0x2c17f6++){const _0x40bbc7=_0x2082e0+_0x33eb80*(_0x306055+_0x2c17f6*_0x469db3),_0x146a84=_0x151668[_0x40bbc7];if(_0x146a84>-0x4*-0x13a+0x11*0x51+-0xa49){_0x567443['x']=_0x496425['x']+_0x283034['x']*_0x2082e0,_0x567443['y']=_0x496425['y']+_0x283034['y']*_0x2c17f6,_0x567443['z']=_0x496425['z']+_0x283034['z']*_0x306055,_0x5467e0['add2'](_0x567443,_0x283034),_0x337916['push'](_0x567443['x'],_0x567443['y'],_0x5467e0['z']),_0x337916['push'](_0x5467e0['x'],_0x567443['y'],_0x5467e0['z']),_0x337916['push'](_0x5467e0['x'],_0x5467e0['y'],_0x5467e0['z']),_0x337916['push'](_0x567443['x'],_0x5467e0['y'],_0x5467e0['z']),_0x337916['push'](_0x5467e0['x'],_0x567443['y'],_0x567443['z']),_0x337916['push'](_0x567443['x'],_0x567443['y'],_0x567443['z']),_0x337916['push'](_0x567443['x'],_0x5467e0['y'],_0x567443['z']),_0x337916['push'](_0x5467e0['x'],_0x5467e0['y'],_0x567443['z']),_0xf6c72['lerp'](Rt['colorLow'],Rt['colorHigh'],_0x146a84/_0x24d871)['round']();for(let _0xaf147=0x2212+-0x2696+-0x484*-0x1;_0xaf147<-0x29b+-0x59d+0x840;_0xaf147++)_0x86b347['push'](_0xf6c72['x'],_0xf6c72['y'],_0xf6c72['z'],0x1f70*0x1+0xc2*0x1b+-0x33e5);_0x433cba['push'](_0x11c6f6*(-0x4*-0x37+-0x10c5*-0x1+-0x1199)+(-0x43b*-0x7+0x1*-0x83c+-0xd*0x1a5),_0x11c6f6*(-0x257f+-0xb5e+-0x30e5*-0x1)+(-0x1*0x10e5+-0x2232+0x3318),_0x11c6f6*(-0x194f+-0x3dd*-0x5+0x606*0x1)+(-0x8b*-0x39+0x2*0xc9d+-0x382a)),_0x433cba['push'](_0x11c6f6*(0x22d+-0x1*-0x2337+0x255c*-0x1)+(0x1993+-0x2b*-0x4f+-0x26d5),_0x11c6f6*(-0x19b7+0xb3d+0x4d6*0x3)+(0x19*0x27+0xc60+-0x102e),_0x11c6f6*(-0x56*0x26+-0x939*-0x4+-0x1818)+(-0x133c+0x1d9c+-0x52f*0x2)),_0x433cba['push'](_0x11c6f6*(0x2cb*-0x8+0x25d7+-0x25*0x6b)+(-0x146e+-0x60a*0x1+-0x5*-0x54c),_0x11c6f6*(-0x29*-0x45+-0x119*-0x1f+-0x2d0c)+(-0x3*0xd8+-0x1*-0x1f55+-0x6*0x4cc),_0x11c6f6*(0x11c*0x11+-0x1529+0x3*0xc7)+(-0xf0+0x10d*-0x11+0x12d4)),_0x433cba['push'](_0x11c6f6*(-0x1cde+-0xcaf*0x1+0x2995)+(-0x10a8+-0x2673+-0x2*-0x1b91),_0x11c6f6*(-0x40d*0x1+-0x1cab+0x20c0)+(-0x1*0x1143+-0x60*0x6+-0xa*-0x1f4),_0x11c6f6*(-0x3*0x1d9+0x3fa*-0x6+0x1d6f)+(-0x1c24+-0x167f*0x1+-0x49b*-0xb)),_0x433cba['push'](_0x11c6f6*(0x44*-0x67+-0x2*0x163+0x1e2a)+(-0xa5d+0x4f7+-0x115*-0x5),_0x11c6f6*(-0x1*0x19c7+-0x1120+0x2aef*0x1)+(0x7f9*0x3+-0x4*0x1df+-0x106d),_0x11c6f6*(0x23*-0xed+-0x13c8+0x3437)+(-0xe4e+-0x2*-0x2ac+0x8fc)),_0x433cba['push'](_0x11c6f6*(0x94e+0x12e3+-0x1c29)+(-0x1101+-0x2b4+0x13b7),_0x11c6f6*(0xf7f+-0x39f*0x6+0x643)+(0xa5b+-0x645+-0x40f),_0x11c6f6*(0x2*-0x35f+0x20e1+-0x1a1b*0x1)+(0x1d6c+0x5c6+-0x232c)),_0x433cba['push'](_0x11c6f6*(0x4ce+0x1a6a+-0x1f30)+(0xc*-0x200+-0x1ed1+-0x923*-0x6),_0x11c6f6*(-0x152*0x5+-0x104a+0x16ec)+(0x913+0x1c34+-0x2547),_0x11c6f6*(0x163e+0x1553+0x8b5*-0x5)+(-0x7*-0x18e+-0x1de6+0x1308)),_0x433cba['push'](_0x11c6f6*(0x1d61*0x1+-0xdb5+-0xfa4)+(0x29*-0xf1+0x1*-0x1455+-0x31a*-0x13),_0x11c6f6*(0x1*-0x13d2+0xaa2+0x5*0x1d8)+(0x1bc7+-0x3ec*0x1+-0x17d6),_0x11c6f6*(-0x265+-0xcd0+0xf3d)+(0x1*-0x742+-0x1d3*-0x5+0x1d9*-0x1)),_0x433cba['push'](_0x11c6f6*(0xb31+-0xec8*-0x1+-0x19f1)+(-0x160f*0x1+0x1*-0x2657+0x8a1*0x7),_0x11c6f6*(-0xc5c+0x230b+-0x78d*0x3)+(0x2680+-0x25fc+-0x20*0x4),_0x11c6f6*(-0x3*0x799+-0x1*-0x10a6+0x62d)+(0x12ed+-0x63b+0x70*-0x1d)),_0x433cba['push'](_0x11c6f6*(0x1585+0x1*-0x23f3+0x3*0x4d2)+(-0x37d*-0x2+0x2265*-0x1+0x1b6f),_0x11c6f6*(0x1d35+-0xdfe*0x1+-0xf2f)+(-0x228f*0x1+0x8b*-0x19+0x3029),_0x11c6f6*(-0x6a8+-0x1*-0xa4+0x56*0x12)+(-0x225a+0x1649*-0x1+0x38a5)),_0x433cba['push'](_0x11c6f6*(0x505*-0x7+0x2338+-0xd)+(-0x166f+-0x154e+0x15e1*0x2),_0x11c6f6*(0x1d1+0x1c+0x61*-0x5)+(-0x161e+0x248e+0x15*-0xb0),_0x11c6f6*(0x114*0xf+0x115e+-0x1*0x2182)+(0x1bca+-0x31*0x87+-0x1ed)),_0x433cba['push'](_0x11c6f6*(0x3f3*0x1+-0x1b3a+0xd*0x1cb)+(0x187e+0x2047+-0x38c5),_0x11c6f6*(-0x1053+-0x2654+0x36af)+(-0x1a2f+0x151c+0xe*0x5d),_0x11c6f6*(0x24fa+-0x1a71*0x1+0x1*-0xa81)+(-0x1*-0x1a69+-0x3*0x1ef+-0x41e*0x5)),_0x11c6f6++;}}if(_0x11c6f6){if(_0x48e2e1['setPositio'+'ns'](_0x337916),_0x48e2e1['setNormals'](new Float32Array(_0x337916['length'])),_0x48e2e1['setColors3'+'2'](_0x86b347),_0x48e2e1['setIndices'](_0x433cba),_0x48e2e1['update'](qs,!(0x1b*0xe5+-0x4*0x905+0xbee)),!Rt['meshInstan'+'ce']){const _0x3bcdd1=new Ut();_0x3bcdd1['useLightin'+'g']=!(-0xfc9+-0x1e2c+0x6*0x7a9),_0x3bcdd1['emissive']=new ie(0x772+-0x718+0x1*-0x59,-0x1969+-0x2*0xa7f+0x1ef*0x18,-0x18d7+-0x5*0xfa+0x5f2*0x5),_0x3bcdd1['emissiveVe'+'rtexColor']=!(0xc2d+-0xf7d+0x350),_0x3bcdd1['blendType']=sd,_0x3bcdd1['depthWrite']=!(-0x48a*0x6+-0x1*0x1146+0x2c83),_0x3bcdd1['update']();const _0x18f1e7=new Ie('WorldClust'+'ersDebug');_0x18f1e7['worldTrans'+'form']=te['IDENTITY'],_0x18f1e7['_dirtyWorl'+'d']=_0x18f1e7['_dirtyNorm'+'al']=!(0xf7*0x20+0x236c+-0x424b),Rt['meshInstan'+'ce']=new He(_0x48e2e1,_0x3bcdd1,_0x18f1e7),Rt['meshInstan'+'ce']['cull']=!(-0x9ff*-0x3+0x264a+-0x3*0x16c2);}const _0x2cc170=Rt['meshInstan'+'ce'];_0x4bf720['immediate']['drawMesh'](_0x2cc170['material'],_0x2cc170['node']['worldTrans'+'form'],null,_0x2cc170,_0x4bf720['defaultDra'+'wLayer']);}}};h(Rt,'gridPositi'+'ons',[]),h(Rt,'gridColors',[]),h(Rt,'mesh',null),h(Rt,'meshInstan'+'ce',null),h(Rt,'colorLow',new D(-0x2484+0xb*-0xcd+0x2d54,-0x6b*0x29+-0xd6*0x3+0x5*0x3ee,-0x4e7+-0x2*-0x12b+0x292)),h(Rt,'colorHigh',new D(0x1*0x23ad+-0x131*-0x14+-0x3b59,-0x5d2+0x4d5*0x1+0x1*0xfd,0x11a5+-0x1fbb*-0x1+-0x4f*0xa0));let Uf=Rt;const BE='muPIHORMLN'+'DCz4DxVR/Z'+'vYfAUVEFR4'+'7KRIC4nwAA'+'AAAP7WxlhD'+'6Ci+2HCe7B'+'F8jRAPZwdH'+'2UPpI5PdLC'+'JdkvG4UTaN'+'DJ/0crAzne'+'71GCrb4kbd'+'MjjCEGzdX6'+'fNxDMLJq5x'+'keoIVTdfiZ'+'kodEeArmZm'+'p/FQzFjD4x'+'8iOW7Dg64n'+'+3mWqyEwLx'+'XT8zoJXfbw'+'8QJKDCaarU'+'YyTlMzNFHb'+'gUe9IQV7g4'+'YOgtSKpIFZ'+'J0qERm7u4P'+'pmiF89ktHW'+'CywaGmD6h+'+'hfh2/Zd8KY'+'lKqqo4Cem4'+'T42bT/Z9Fp'+'CQF1hhSjfB'+'zZ5XFn/y3j'+'egWC6u86Ku'+'ELRundQS/1'+'Rp+XuKKGIg'+'Rv3CvP5y74'+'9yqLlFO495'+'JOT3+f2CXg'+'d71npU0/Kj'+'jpkZucbJ5m'+'78IVyuSrSo'+'zc9jgBUhDr'+'z0hFsyb7LF'+'UH9//wJbBg'+'LdNWJZObfK'+'xrNt8TliLA'+'9w9sXFv6g2'+'6iXpf6r/Bq'+'cAusj/QzGB'+'ZuoUGeEtw8'+'BCXCZ3jUiw'+'4hvM18ZVql'+'UD3C40LAFX'+'W6FRjuAZGR'+'Nstb0/qVk4'+'skwyT+MHrv'+'RorI4rKHVM'+'WZmKyAkzL/'+'78u/9pMQuX'+'14pZN50b2P'+'Hn6fRxeaCQ'+'LsfT4dpvIk'+'WWFuFVENZI'+'h+8xgR6lU+'+'85W0PPdAu1'+'j99kcCG40J'+'BQa4JMyRzq'+'6qriOBLtqF'+'87vpCJan0W'+'EduVr/mOYk'+'S00urVA0mA'+'6M3031+GmG'+'mW48PaJDYO'+'EIb3bIXWPa'+'LoAOEinX1T'+'N3+/vwhG6n'+'qJu0TdHped'+'S7QsGZIoxH'+'3nQYYjQP1j'+'mbahlbNngw'+'5ogsGk1y50'+'XZyUmQBY+/'+'JBJ3Unu4dA'+'pm+WmPwHPU'+'9gLb+4mHh4'+'BiY6M86pq+'+'WeTyWdI3s0'+'CXPEtHGXZ8'+'zMZgUoyRom'+'Bi1VdazzuN'+'+WOmQ9Pa0Z'+'0tlNopUi8A'+'J4x2Xn4mmO'+'KEbXLxlbVs'+'Wu8XhuDGYF'+'OGCRVdSqDP'+'XrHU5SDdUl'+'ti3k5///SB'+'wzTMwK3L4a'+'1H7w4lnpEa'+'s6////AfX8'+('asyIBfeFXV'+'J3tgvxQ/bl'+'ZuUKyIODIf'+'r/UzdWNu7p'+'ciLBpdZRZ4'+'pIfZ1R6szq'+'+XNxkGG///'+'8EZFpu7VHA'+'hFWqHEOrB9'+'unw+YQa5o8'+'/9IR/V5/zq'+'+986rJSyfg'+'JKt2u9hxU1'+'wzyQWPjJGv'+'zG9+eWWxGF'+'OHVKqI4jBQ'+'ALwZZswesn'+'vZ2UmmkEXd'+'iRpz8B+oWE'+'7PY70ZTMnd'+'isYSXg2Tqo'+'I+3y9BxbnY'+'2Y4EfbdcRh'+'AvG59NqDEN'+'NYbxKvK5HJ'+'fPG5M+Wi2A'+'cpLVJrD6ca'+'iEOzgSoVNS'+'gQK8fm2M3z'+'GcF4xtClv/'+'8Hs9oD7C3j'+'itTATYNQxm'+'KqKf1LhIxz'+'f1bmfiNn7U'+'KFmcJu4sLq'+'VLwxGSue3t'+'aBEyknkw5h'+'XTsUCvqmmL'+'/f8n/w0giR'+'7Hu/9EHvpk'+'z3yuu64Tio'+'MkzdTJ30i0'+'+hFnQqW1+v'+'9mMwq+z9qG'+'X0UFu9Momv'+'VG2xod6vc1'+'2AAAAACq7s'+'Ga5qptFR0j'+'F3nQt/D+7P'+'ibKYahaxP3'+'hEixPbGi9n'+'wNf2LAa7Lk'+'EZRKxzXeCD'+'64Xpii5n+8'+'Kpg8eHIv7A'+'WXZltgMoGl'+'tmoJ0XGdOC'+'L8WkzphvR9'+'N2o3ARSZ42'+'l5e5Pe4B58'+'MCRlP3EKv+'+'mcloknH+ft'+'o5BWsmEutW'+'6KvjOVsznF'+'CktkSczVk4'+'aGvj9VXlRc'+'LeDoKG8RkB'+'gdcNG2bf8H'+'UL4MT2DM+a'+'r7NImJhKpx'+'akX4Vk0CnP'+'+/XNhl5UsP'+'0lXgeZXPoD'+'BMSW5An+DX'+'lTCO5FQGwS'+'PYwHLKYVIi'+'mEdAoVe49r'+'QLaaNcye5L'+'xU2/c5TijT'+'gJtD5eQQIe'+'1snxauj5jZ'+'sxJBUJdoP/'+'zqpjqv8qBr'+'uoPsVsP8N4'+'4PCUW5Dd0D'+'zqjSS/Dl5m'+'I9cn1w2ndN'+'/0KAEm1QAA'+'AACwu6KM/0'+'83IBbH5bPa'+'/9oHUwcU8I'+'9v3j6/v18Q'+'Yammrf+P6V'+'L///8BrpuM'+'3fOLCxaLNO'+'FNF1zPbPYT'+'P65ni6njft'+'4eVcyrVXRQ'+'Frs52tr35S'+'tiSp55edVD')+('CBC0H5rIfa'+'c6nzUwxQSt'+'7y15QoKb+5'+'zebEQUmVbr'+'PjXuUa19Ey'+'7sqXMiSUKH'+'aw72PJKDdr'+'utJoQr3u6l'+'EYJ8K0MakW'+'Kj9zjTFi4X'+'94TsKYco0G'+'rLeB60M6D8'+'M/80rhXUW8'+'iMequg8y5F'+'838WI0+gp3'+'GBN5Kj/xIO'+'xTWQuUaPV/'+'LwvARr1VH9'+'3BFgGZR1MF'+'W0Ua30GbYm'+'dnAgo9VWy8'+'SQtpDUgGE2'+'r2zq2eTEMC'+'L7sMKmE1hc'+'hVhuF/TCq9'+'iXKEm86kzO'+'f3Rp9ZnCxb'+'pDUj+FKNxV'+'yXe6pVZkRX'+'v/m95SnB/E'+'B8aME29N85'+'MtAcDoXWlo'+'r8De2Q5Dg1'+'tar+8wgiZu'+'fbMam81j//'+'ASUohoR/zS'+'h2KG4bvT6m'+'kIPz6C5/98'+'DC3LaWlaEZ'+'1zA5JORZRu'+'6J/a0GY285'+'sEYzw71YqO'+'T1ihAG0z5S'+'Dt1xNiDQWZ'+'dFpndArp6x'+'WhqSDkRb4k'+'SJEHb9liPv'+'w7uLV/6i5M'+'Vf//A9Qjr8'+'xkAEUh+KDI'+'+zdtJ68d6M'+'BOktg1iyp/'+'SCq8O9f5pb'+'amn1VVVQPR'+'TWqNBvhQKa'+'07s6P0lc9L'+'uu/3gw4Hey'+'OUfz8MxMwV'+'4UQhua+t9c'+'r4bz/nIB2w'+'nDSK1K7I94'+'M+s6C84hta'+'X/CNlMQUSs'+'2KJO+yaebf'+'TbkNX5yWcq'+'EJevo0vbKU'+'iETuFXiL01'+'9A3E+lmsyZ'+'MwXrXLLiQA'+'Z5t9+jI3Jo'+'bhJTMiDH5Z'+'OQ+8Jau555'+'5NMjHSscP9'+'qCVaa40doh'+'+1a3Ukf6jq'+'BmLddgh79/'+'fwTfCyqiul'+'dNkUoy+nUp'+'+4nerwg0Oj'+'tGv2x485PJ'+'OJvUEokNhY'+'IdWjpx7BWk'+'0VZGWOp3jS'+'FTJ2bnu6KC'+'duZtG/UcBC'+'9RZ3W/jMSf'+'SMw4Etr/Do'+'D/XYP2V5Ov'+'w+YoM3F5g2'+'dGLdvuG6Zk'+'VGLE6Dk5Zr'+'+sdSyGliJP'+'1y2OFf/KFO'+'0RWO+3gsGh'+'esTnfZVpTd'+'8/HwgO216g'+'waqo+vY3Tl'+'jfJWowY+i0'+'p0Os4SLn/1'+'wLqDHMlszg')+('gmT/D8MRFz'+'s+pLv6LNJS'+'sNZ/r41mWi'+'/rF6ZcKp/y'+'zJdK0VU44h'+'skq3RGpgO6'+'mIpJDsf/mZ'+'kFrz0yYOML'+'buaj/wp1v7'+'JMFM5eqvBh'+'mTd7U8frQA'+'tHtys4zgpj'+'ZmzUhOVTfN'+'NLifElGXAD'+'lqHGKrkBT/'+'nYwX8ZRm3R'+'jvyPvjKyEq'+'EGKUpVnvOG'+'x+NKPHiWM/'+'/ZDpDVGvvr'+'jmk8RPF/wi'+'YZD3+Us8YC'+'XjrVOfjdd1'+'UPAfjLp8jg'+'Sn4me7DPTp'+'z1Ggy9XL80'+'guFO7ECT10'+'AvILKfD18Q'+'x+KY/f8aRq'+'u0oOO8hfKR'+'FZa9PUJwCs'+'p6VdZz6LFk'+'m2b9Pl2LIi'+'fCwzRy7Tpd'+'G2uAtOxP2O'+'emY26bJMa9'+'ZGSLIRlMsg'+'pDpnDJwd0o'+'a5pQ13x1hr'+'Hf52HpulUW'+'onGWsfXZbS'+'QYKu9bnEN7'+'6ciQih0opN'+'3deDVrbrxo'+'rfVlnCmL1R'+'9zq3ePGWIv'+'21c7pW8kEi'+'FTM5JX8dAw'+'867s/60cf7'+'9/BH+MDFCZ'+'BHlz1L+qGO'+'Jf/1txhhmr'+'f3//As+RIJ'+'wevDb+fgNX'+'VeHw67QptZ'+'egayhrEwr5'+'Gy+EPo1RLa'+'MtPbqOZYoV'+'zXzwzjMFWZ'+'xyUG9YUIf6'+'////AQWy84'+'iAygLk9COt'+'Xt92+0mT/x'+'g0zMzMBeLk'+'b8y9SL2TDX'+'gSX422hDgp'+'GNLJyuPioA'+'+YJ91G8znr'+'pNqHkwYysc'+'aJDEc9Vc+j'+'4cXle3hvcd'+'2JqDQH2lBZ'+'xDn6mUTs0b'+'75raMvbs72'+'7codX01Anj'+'8f3wir9P2x'+'QaQ22v/TxC'+'MglKDFoTja'+'P01XTLgxnT'+'vPv02JgEUr'+'W6UDgOnobF'+'pLdvKdlypg'+'IzPcq14fgX'+'U5tvVW0FEs'+'7VRlsG1IyA'+'69fN4n+awH'+'hT34cE+xUv'+'dj86C8LgAs'+'FheTjI9Ht9'+'EyYAAAAAAV'+'BVKRx2wLgU'+'TI0/2QfyJo'+'2riRw3JDqz'+'EShmx/Lifo'+'6mRkQVbS7X'+'53t+EvKxcX'+'ogtdts31e9'+'MRHdcHgsA8'+'rt4/mt2unl'+'zQ/wsU8Gu7')+('+W6Oj7eD8E'+'QdDp5XlCsV'+'aS/AV/t5Zp'+'POHR3rGpyA'+'Je9IPV+xMr'+'BL1Oz/8MQh'+'Fs31h0N1cV'+'nq371uqIJY'+'HyafKH1jte'+'AK3VpMXBcu'+'C+yt0ZeKyR'+'UY4QhdrJJ4'+'tJ1wg3Hu6k'+'DsbovxupTM'+'kGdRrm8oZS'+'oYPbJ+PwH/'+'xotgTdkA12'+'05vUEfnqkI'+'04T/fnnd1f'+'iZW5AwNcgg'+'d7fi4j5zas'+'mcntZexIxq'+'FZQMzMJpfn'+'dmI5jn17cg'+'n5EV5t9XN0'+'C///8Q9wlJ'+'pMGXdoiaMT'+'G2sVyHQsn8'+'mWRISCLNG7'+'77S0OuDRP2'+'GlLcJ2UeOg'+'7Fo8hTNPeJ'+'//iTJhyqxh'+'KRUntdXOih'+'q2wfKfH///'+'8B0GGrwT+f'+'SOQRdctKxj'+'jGCSS11d6B'+'lQ9BDfE0J6'+'Z25FaNTKGp'+'FKNCMr2G/0'+'41KpWwBLVe'+'1k08vncseQ'+'bKZdXi8x1t'+'9XA45U/Wd4'+'3D9wAh3Tal'+'0aiLVzGPus'+'OZ1F+W3TWo'+'qlX/A95+dN'+'ef11TsuGfu'+'l+ctGssldk'+'3fqpfqh+43'+'XTxL42+leS'+'HoF/dWHYGX'+'6maqUEuLX7'+'UB+r/6Llr4'+'LKocbVIeu+'+'hB9QTPfz9f'+'CP8RyWmX4S'+'mbhMFsNtCi'+'jV7lVcwejL'+'Klvl0GfCnd'+'nWV7/39VBr'+'tTRuUx92ok'+'e3GBgKkC5f'+'dGK0YvNK+x'+'enKaDmsHDj'+'NFUM3NMz3Z'+'iXXFuLgojo'+'sPVCDEl2W5'+'BjX3Ms+j0G'+'SqACHmh0+R'+'PWyuNm/Qe8'+'vFf9AW7N1u'+'RaxWirrUyt'+'qEJnJ4/Flm'+'8hSoiZ2NQB'+'sS6w/yQlC4'+'gCaFo8q4ny'+'Y6AFdo4hiw'+'hBXzbNKKvZ'+'vktCjSCukR'+'R/BbYVbNwZ'+'i2Yh3hGodE'+'acLW8qijiW'+'JODf0P2bhf'+'aiPspPT4lY'+'JBgi/KfcFw'+'CfvyUIgkJO'+'v///8CG/JE'+'epRBLaMFE+'+'2TgrqsJXOV'+'OWHt6g/bFw'+'VLLMVBsMR5'+'0dis/39/Al'+'BX+/rMTJkU'+'QrnlxpR2iu'+'0Tp8tATkRY'+'GmDIrcAiRP'+'8PjoWIlb7/')+('0ecTdSCE9Y'+'58+a+n/Fov'+'JQTVF4F2jA'+'xMZhTgrM/K'+'VS5BQu6bVb'+'kWY5HXnxRs'+'hks3urDdW4'+'RkWp4M4TeL'+'mFK5KF/uHk'+'kiO5Kv96Ri'+'oH984v/CSD'+'BnG+BwlnU9'+'B+o7Y+0X0N'+'ob+0pLsStx'+'jvPXMy2eCp'+'zhOWV4XbOb'+'BHN4UE2sLQ'+'/DIqXhOzxV'+'f38GlTi6aG'+'7EnePO7TRJ'+'m9yOfUUcqq'+'1I2iQHrVDq'+'n3TUNRi/lM'+'w8KbMW/3/n'+'qCz/Ef8PoW'+'5Qxcz2yHR/'+'f78EPB2Stb'+'d+ZFmfNTUY'+'ILzsb9YNhp'+'aHcaymYrBi'+'NHmFE3Y4cc'+'YJ25Prqm7z'+'HobGHED8/9'+'3ZNlWro9vc'+'KivGZs31Ui'+'K1k5zjUhex'+'UgbqJb+fUT'+'jxce/7Zly8'+'a5KMC1fX5n'+'fjPgibdvzb'+'XV1jRT2asX'+'vmSAusaLdq'+'1TSIJ8fXIN'+'k5AtT34EWP'+'AsfP9IFQqM'+'5K11O6saoH'+'JA==');let zi=null;const Wy=()=>{if(!zi){const _0x14ba96=atob(BE);zi=Uint8Array['from'](_0x14ba96,_0x50682b=>_0x50682b['charCodeAt'](-0x17b7*0x1+-0xe32+0x25e9));}},zE=()=>(Wy(),zi);class VE{constructor(_0x11d3c7=-0x2017+-0xc0d*0x1+-0x1*-0x2c24){h(this,'seed',0x149*0x1+0x1ee1+-0x202a),(this['seed']=_0x11d3c7*(0x1202+-0x10*0x23b+0x11b2),Wy());}['_next'](){this['seed']=(this['seed']+(-0x1*0x2177+0x1e61+-0x31a*-0x1))%zi['length'];}['value'](){return this['_next'](),zi[this['seed']]/(-0x2626+-0x8d3+0x17fc*0x2);}['vec4'](_0x2f84ac=new re()){return this['_next'](),_0x2f84ac['set'](zi[this['seed']],zi[this['seed']+(-0x1e13*0x1+0x138*0x7+0x314*0x7)],zi[this['seed']+(0x6bf*-0x1+0x130e+-0xc4d*0x1)],zi[this['seed']+(-0x2335+-0x1eda+0xb03*0x6)])['mulScalar']((-0x24dd+-0x81d+0x2cfb)/(0x15f6+-0x246d+0xf76));}}const GE=[new D(-(0x223*-0xd+-0x4a2+-0x567*-0x6),0x1339+0xa63+0x5*-0x5ec,0x1*0x10d2+0xc72+0x2*-0xea2),new D(0x953+-0x11fc+0x8aa,-0x209*0x2+0x1c82+-0x1870,0x1f82+0x22ff+-0x1*0x4281),new D(0x2*0x6b2+-0x158a+0x7*0x12a,-(-0x1dfa+-0x1209+-0xc01*-0x4),-0xe42+-0x793+0x15d5),new D(-0x3*-0xae6+-0xd3d*0x1+0x125*-0x11,0x26*-0xaa+-0x1087+0x29c4,-0x1*-0x9d0+-0xe74+0x42*0x12),new D(0x1163+-0x3*-0x2ad+0x1*-0x196a,0x1e36+0x1403+0x3dd*-0xd,-(0x6*0x275+-0x23dc+0x151f)),new D(0x1083+0x247f*0x1+-0x2e*0x127,-0x322*0x9+-0x1*-0x1aa0+-0x43*-0x6,-0x4*0x265+0x2523+0x1b8e*-0x1)];class HE{constructor(){h(this,'colors',new Float32Array(0xace*0x1+-0x488+-0x634));}['update'](_0x41bc59,_0x5d1a4e){const _0x270083=this['colors'],{r:_0x7adad7,g:_0x4c4e5b,b:_0x240f29}=_0x41bc59;for(let _0x4a0127=-0x5*-0x1a3+0xc4f+-0x147e;_0x4a0127<-0x1b8e+0x2702+-0xb6e;_0x4a0127++)_0x270083[_0x4a0127*(-0x869+-0xc5e*-0x1+-0x1*0x3f2)]=_0x7adad7,_0x270083[_0x4a0127*(-0xd76+-0x45*0x6c+0x2a95)+(0x1bcf*0x1+0x4*-0x6fa+0xd*0x2)]=_0x4c4e5b,_0x270083[_0x4a0127*(0xc84+-0x16*-0x183+0xa5*-0x47)+(0x136d+0x15ff+-0x296a)]=_0x240f29;for(let _0xb73a56=-0x1fa+0x1266*-0x1+0x1460;_0xb73a56<_0x5d1a4e['length'];_0xb73a56++){const _0x44c456=_0x5d1a4e[_0xb73a56];if(_0x44c456['_type']===ve)for(let _0x29eff1=-0x23f9+-0x1f2c+0x4325;_0x29eff1<0x53*-0x65+-0x1474+0x3539;_0x29eff1++){const _0x25add5=Math['max'](GE[_0x29eff1]['dot'](_0x44c456['_direction']),0x5*-0x360+-0xae*-0x18+0x48*0x2)*_0x44c456['_intensity'],_0xbe6984=_0x44c456['_color'];_0x270083[_0x29eff1*(-0x2ab+-0x6e6*-0x1+-0x438)]+=_0xbe6984['r']*_0x25add5,_0x270083[_0x29eff1*(-0x13c2+-0x23*-0x5e+0x6eb)+(0x1*0x8f1+0x2ed*0xb+-0x291f)]+=_0xbe6984['g']*_0x25add5,_0x270083[_0x29eff1*(0x2e5+-0x227d+0x1f9b)+(0xa39+-0x2485+0xd27*0x2)]+=_0xbe6984['b']*_0x25add5;}}}}const WE=(_0x14a785,_0x25c425,_0x2e83e6,_0x5566bc)=>{const _0x5523bd=new _e(_0x14a785,{'name':''+_0x25c425+_0x2e83e6,'width':_0x2e83e6,'height':_0x2e83e6,'format':Ne,'addressU':yt,'addressV':yt,'type':Ms,'magFilter':Te,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(-0x1ca7+-0xc89*0x2+0x35ba)});return _0x5523bd['lock']()['set'](_0x5566bc),_0x5523bd['unlock'](),_0x5523bd;},$E=new Kt(),XE=_0x8a7217=>$E['get'](_0x8a7217,()=>{const _0x4d99ab=zE(),_0xb9b4ee=Math['sqrt'](_0x4d99ab['length']/(0x1e9f+-0xf17*0x1+-0xf84));return WE(_0x8a7217,'BlueNoise',_0xb9b4ee,_0x4d99ab);});class ma{constructor(_0x15b5d9,_0x390526){this['texture']=_0x15b5d9,this['cached']=!(0x1d54*0x1+0x1fe9+0x3d3c*-0x1),this['renderTarg'+'ets']=_0x390526;}['destroy'](){this['texture']&&(this['texture']['destroy'](),this['texture']=null);const _0x18610b=this['renderTarg'+'ets'];for(let _0x133315=-0x26cb*-0x1+0x16b9*-0x1+0x2*-0x809;_0x133315<_0x18610b['length'];_0x133315++)_0x18610b[_0x133315]['destroy']();this['renderTarg'+'ets']['length']=0xd5*0x20+-0x1372+-0x397*0x2;}static['create'](_0x4ad4fa,_0x20f596){let _0x51a032=null;return _0x20f596['_type']===Ke?_0x51a032=this['createCube'+'map'](_0x4ad4fa,_0x20f596['_shadowRes'+'olution'],_0x20f596['_shadowTyp'+'e']):_0x51a032=this['create2dMa'+'p'](_0x4ad4fa,_0x20f596['_shadowRes'+'olution'],_0x20f596['_shadowTyp'+'e']),_0x51a032;}static['createAtla'+'s'](_0x4c2b97,_0x471b84,_0x18ee60){const _0x6299ab=this['create2dMa'+'p'](_0x4c2b97,_0x471b84,_0x18ee60),_0x25ced3=_0x6299ab['renderTarg'+'ets'],_0x41727e=_0x25ced3[0xe3c+0x67a*-0x3+-0x2*-0x299];for(let _0x265517=-0x1513+-0x494*0x2+0x1e3b;_0x265517<0x515*0x1+0x1*0xdd+-0x29*0x25;_0x265517++)_0x25ced3['push'](_0x41727e);return _0x6299ab;}static['create2dMa'+'p'](_0x596ffb,_0x468129,_0x592b59){var _0x5555a2;const _0x35f307=Xi['get'](_0x592b59);w['assert'](_0x35f307);let _0x1cee69=_0x35f307['format'];_0x1cee69===Qi&&!_0x596ffb['textureFlo'+'atRenderab'+'le']&&_0x596ffb['textureHal'+'fFloatRend'+'erable']&&(_0x1cee69=Bh);const _0x11cc51=(_0x5555a2=Nt['get'](_0x1cee69))==null?void(0x7bb+0x17*0x3d+-0xd36):_0x5555a2['name'];let _0x10f89f=vt;_0x592b59===Ap&&(_0x10f89f=_0x596ffb['extTexture'+'FloatLinea'+'r']?vt:Te),_0x592b59===Xo&&(_0x10f89f=Te);const _0x38118b=new _e(_0x596ffb,{'profilerHint':Pf,'format':_0x1cee69,'width':_0x468129,'height':_0x468129,'mipmaps':!(0x1f*-0x107+-0x1*0x69b+-0x5*-0x7b1),'minFilter':_0x10f89f,'magFilter':_0x10f89f,'addressU':ue,'addressV':ue,'name':'ShadowMap2'+'D_'+_0x11cc51});let _0x3189f6=null;return _0x35f307!=null&&_0x35f307['pcf']?(_0x38118b['compareOnR'+'ead']=!(-0x1*-0x1fca+0x20e2+-0x40ac),_0x38118b['compareFun'+'c']=Gc,_0x3189f6=new gt({'depthBuffer':_0x38118b})):_0x3189f6=new gt({'colorBuffer':_0x38118b,'depth':!(-0x12d4+-0xd7+-0x5*-0x3ef)}),_0x596ffb['isWebGPU']&&(_0x3189f6['flipY']=!(0x346*-0x1+0x196c*0x1+-0x1626)),new ma(_0x38118b,[_0x3189f6]);}static['createCube'+'map'](_0x4494b6,_0x47c50b,_0x203343){var _0x19a2f3;const _0x5b6054=Xi['get'](_0x203343);w['assert'](_0x5b6054);const _0x4e10fc=(_0x19a2f3=Nt['get'](_0x5b6054['format']))==null?void(0x2497+-0x8ed+-0x1baa):_0x19a2f3['name'],_0x4e4984=_0x203343===Xo,_0x43e4d4=_0x4e4984?Te:vt,_0x15437f=new _e(_0x4494b6,{'profilerHint':Pf,'format':_0x5b6054==null?void(-0xc4*-0x1f+0x829*0x1+-0x1fe5):_0x5b6054['format'],'width':_0x47c50b,'height':_0x47c50b,'cubemap':!(-0x1ad8+0x2313+-0x83b),'mipmaps':!(-0x18*-0xd8+-0x1a94+0x655),'minFilter':_0x43e4d4,'magFilter':_0x43e4d4,'addressU':ue,'addressV':ue,'name':'ShadowMapC'+'ube_'+_0x4e10fc});_0x4e4984||(_0x15437f['compareOnR'+'ead']=!(-0x1cf7+0x11*0xeb+-0x2ac*-0x5),_0x15437f['compareFun'+'c']=Gc);const _0x5d1954=[];for(let _0x14e59d=0x2a4+-0x37a+-0x1*-0xd6;_0x14e59d<0xad*0x5+0x107*0x7+-0xa8c;_0x14e59d++)_0x4e4984?_0x5d1954['push'](new gt({'colorBuffer':_0x15437f,'face':_0x14e59d,'depth':!(-0x2c3+-0x17fc+0x1abf)})):_0x5d1954['push'](new gt({'depthBuffer':_0x15437f,'face':_0x14e59d}));return new ma(_0x15437f,_0x5d1954);}}const qE=[],jE=[],xi=new re(),Ld=new re();class Rd{constructor(_0x6358fe){this['size']=Math['floor'](_0x6358fe['w']*(0xfbb+-0x20df*-0x1+-0x2c9a)),this['used']=!(0x192c+-0x1*-0x13d3+-0x2cfe),this['lightId']=-(0x58d*0x1+-0xa48+0x4bc),this['rect']=_0x6358fe;}}class YE{constructor(_0x41df90){this['device']=_0x41df90,this['version']=-0x1*0x1bd+-0x2*-0x19a+0xb*-0x22,this['shadowAtla'+'sResolutio'+'n']=-0x103f+-0x38f*0x1+0x1bce,this['shadowAtla'+'s']=null,this['shadowEdge'+'Pixels']=0x3*0x175+0x8d*-0x43+0x208b,this['cookieAtla'+'sResolutio'+'n']=0x423+-0x1*0xc41+0x822,this['cookieAtla'+'s']=new _e(this['device'],{'name':'CookieAtla'+'s','width':this['cookieAtla'+'sResolutio'+'n'],'height':this['cookieAtla'+'sResolutio'+'n'],'format':_s,'cubemap':!(-0x204e+0x1*-0x20d7+0x4126),'mipmaps':!(-0x1d2+0x5*0x6ad+-0x1f8e),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue}),this['cookieRend'+'erTarget']=new gt({'colorBuffer':this['cookieAtla'+'s'],'depth':!(-0x76c+0xced+-0x580),'flipY':!(0x7ea+0x148d*0x1+0x1*-0x1c77)}),this['slots']=[],this['atlasSplit']=[],this['cubeSlotsO'+'ffsets']=[new J(-0xed7+0x1bc2+-0xceb,0xec8+0x14*0x101+-0x22dc),new J(0x209c+0x2501+-0x459d,-0x227f+0x1*-0x51b+0x1*0x279b),new J(0x162*-0x7+-0x207e+0x3*0xe0f,0xf07+-0x4b+-0x5c*0x29),new J(0x93d*-0x1+0x254e+-0x1c10,-0xb75*0x1+-0x14*0x1d+0xfb*0xe),new J(0x1d5b+0x789+-0x1271*0x2,-0x17f7+-0x693+0x6*0x517),new J(0x3*0x92f+-0x162a+-0x561,0x4*-0x31b+-0x1*-0x7d7+0x1*0x496)],this['scissorVec']=new re(),this['allocateSh'+'adowAtlas'](-0xf*-0x2+0x100b+-0x1028),this['allocateCo'+'okieAtlas'](0x32b*-0x2+0x23dc+-0x1d85),this['allocateUn'+'iforms']();}['destroy'](){this['destroySha'+'dowAtlas'](),this['destroyCoo'+'kieAtlas']();}['destroySha'+'dowAtlas'](){var _0x2edb37;(_0x2edb37=this['shadowAtla'+'s'])==null||_0x2edb37['destroy'](),this['shadowAtla'+'s']=null;}['destroyCoo'+'kieAtlas'](){var _0x4ecd49,_0x4785d2;(_0x4ecd49=this['cookieAtla'+'s'])==null||_0x4ecd49['destroy'](),this['cookieAtla'+'s']=null,(_0x4785d2=this['cookieRend'+'erTarget'])==null||_0x4785d2['destroy'](),this['cookieRend'+'erTarget']=null;}['allocateSh'+'adowAtlas'](_0x31f804,_0x127abd=Ws){var _0x2824cb;const _0x1e8879=(_0x2824cb=this['shadowAtla'+'s'])==null?void(-0x43*0x29+0xf9*0x7+0xfb*0x4):_0x2824cb['texture']['format'],_0x28bc45=Xi['get'](_0x127abd)['format'];if(!this['shadowAtla'+'s']||this['shadowAtla'+'s']['texture']['width']!==_0x31f804||_0x1e8879!==_0x28bc45){this['version']++,this['destroySha'+'dowAtlas'](),this['shadowAtla'+'s']=ma['createAtla'+'s'](this['device'],_0x31f804,_0x127abd),this['shadowAtla'+'s']['cached']=!(-0x16a7+-0x1aa8+-0xd*-0x3cb);const _0x2bee4d=(-0x62b+0x146*0x1d+-0x1*0x1ebf)/this['shadowAtla'+'sResolutio'+'n'];this['scissorVec']['set'](_0x2bee4d,_0x2bee4d,-(-0x21f1+-0x2478+-0x9*-0x7d3)*_0x2bee4d,-(0x110*0x22+-0xd79*0x1+-0x16a5)*_0x2bee4d);}}['allocateCo'+'okieAtlas'](_0x59a00a){this['cookieAtla'+'s']['width']!==_0x59a00a&&(this['cookieRend'+'erTarget']['resize'](_0x59a00a,_0x59a00a),this['version']++);}['allocateUn'+'iforms'](){this['_shadowAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('shadowAtla'+'sTexture'),this['_shadowAtl'+'asParamsId']=this['device']['scope']['resolve']('shadowAtla'+'sParams'),this['_shadowAtl'+'asParams']=new Float32Array(0xfa+0x11e4+-0x12dc),this['_cookieAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('cookieAtla'+'sTexture');}['updateUnif'+'orms'](){const _0x340d2a=this['shadowAtla'+'s']['renderTarg'+'ets'][-0x3*-0xaf3+0x16ef+-0x37c8]['depthBuffe'+'r'];this['_shadowAtl'+'asTextureI'+'d']['setValue'](_0x340d2a),this['_shadowAtl'+'asParams'][-0x1361+-0xc8e+0x1fef]=this['shadowAtla'+'sResolutio'+'n'],this['_shadowAtl'+'asParams'][-0x769+-0x18dd*-0x1+-0x5d1*0x3]=this['shadowEdge'+'Pixels'],this['_shadowAtl'+'asParamsId']['setValue'](this['_shadowAtl'+'asParams']),this['_cookieAtl'+'asTextureI'+'d']['setValue'](this['cookieAtla'+'s']);}['subdivide'](_0xb65b0c,_0xa792ac){let _0x3a1f51=_0xa792ac['atlasSplit'];if(!_0x3a1f51){const _0x2c554f=Math['ceil'](Math['sqrt'](_0xb65b0c));_0x3a1f51=jE,_0x3a1f51[0x1*0xce3+0xaa4+-0x1787]=_0x2c554f,_0x3a1f51['length']=-0x1315+-0x1120+0x2436;}if(!((_0x727b0,_0x16d629)=>_0x727b0['length']===_0x16d629['length']&&_0x727b0['every']((_0x453ab1,_0x57e1e1)=>_0x453ab1===_0x16d629[_0x57e1e1]))(_0x3a1f51,this['atlasSplit'])){this['version']++,this['slots']['length']=-0x11fe+-0x1a88+0x2c86,this['atlasSplit']['length']=-0x1b*0x88+-0x4fa+0x1352,this['atlasSplit']['push'](..._0x3a1f51);const _0x7b30fd=this['atlasSplit'][-0x175d*0x1+0x1f4a+-0x7ed*0x1];if(_0x7b30fd>0x207a+-0x4*-0x527+-0x7f*0x6b){const _0x237602=(0x1f51+0x2011+0xb*-0x5c3)/_0x7b30fd;for(let _0xb7d203=0x4*0x859+0x206e*-0x1+-0xf6*0x1;_0xb7d203<_0x7b30fd;_0xb7d203++)for(let _0xb09a0b=0x26e3+-0x19*0xe1+0xa*-0x1b1;_0xb09a0b<_0x7b30fd;_0xb09a0b++){const _0x588ab0=new re(_0xb7d203*_0x237602,_0xb09a0b*_0x237602,_0x237602,_0x237602),_0x4f3f17=this['atlasSplit'][-0x23ec+-0x1c21+0x155a*0x3+_0xb7d203*_0x7b30fd+_0xb09a0b];if(_0x4f3f17>0x45*0x3+0xc*0x1c1+-0x1*0x15da){for(let _0x3fe9da=-0x21db+-0x22d+0x1*0x2408;_0x3fe9da<_0x4f3f17;_0x3fe9da++)for(let _0x36ac91=-0x1989+0x3*0x8bf+0x4*-0x2d;_0x36ac91<_0x4f3f17;_0x36ac91++){const _0x149360=_0x237602/_0x4f3f17,_0x5ef4f9=new re(_0x588ab0['x']+_0x3fe9da*_0x149360,_0x588ab0['y']+_0x36ac91*_0x149360,_0x149360,_0x149360);this['slots']['push'](new Rd(_0x5ef4f9));}}else this['slots']['push'](new Rd(_0x588ab0));}}else this['slots']['push'](new Rd(new re(-0x1c52+-0x119e+0x2df0,-0x1e62+0x452+0x8b0*0x3,-0x601*-0x1+0xc1*0x1a+-0x199a,0x1*-0x2053+0x12f4+0xd60)));this['slots']['sort']((_0x1594dc,_0x5ef316)=>_0x5ef316['size']-_0x1594dc['size']);}}['collectLig'+'hts'](_0x2925f2,_0x30cbc2){const _0x2a0f89=_0x30cbc2['cookiesEna'+'bled'],_0x187f28=_0x30cbc2['shadowsEna'+'bled'];let _0x267cd5=!(-0x1*0x69d+0x2*0x1221+-0x1da4),_0x413ed7=!(-0x207b+0x5*-0x417+-0x11a5*-0x3);const _0x157c61=qE;return _0x157c61['length']=-0x22e7+0x1*-0x13fc+-0x36e3*-0x1,(_0x2a0f89||_0x187f28)&&(_0x112c8c=>{for(let _0x7a7e79=-0x46d+-0x209*-0x1+0x264;_0x7a7e79<_0x112c8c['length'];_0x7a7e79++){const _0xaaf321=_0x112c8c[_0x7a7e79];if(_0xaaf321['visibleThi'+'sFrame']){const _0x15d558=_0x187f28&&_0xaaf321['castShadow'+'s'],_0xcc4531=_0x2a0f89&&!!_0xaaf321['cookie'];_0x267cd5||(_0x267cd5=_0x15d558),_0x413ed7||(_0x413ed7=_0xcc4531),(_0x15d558||_0xcc4531)&&_0x157c61['push'](_0xaaf321);}}})(_0x2925f2),_0x157c61['sort']((_0x4b344b,_0x268386)=>_0x268386['maxScreenS'+'ize']-_0x4b344b['maxScreenS'+'ize']),_0x267cd5&&this['allocateSh'+'adowAtlas'](this['shadowAtla'+'sResolutio'+'n'],_0x30cbc2['shadowType']),_0x413ed7&&this['allocateCo'+'okieAtlas'](this['cookieAtla'+'sResolutio'+'n']),(_0x267cd5||_0x413ed7)&&this['subdivide'](_0x157c61['length'],_0x30cbc2),_0x157c61;}['setupSlot'](_0x369674,_0x2d38f8){_0x369674['atlasViewp'+'ort']['copy'](_0x2d38f8);const _0x2f9b8f=_0x369674['numShadowF'+'aces'];for(let _0x56f831=0x582*-0x1+-0x248d+0x6f*0x61;_0x56f831<_0x2f9b8f;_0x56f831++)if(_0x369674['castShadow'+'s']||_0x369674['_cookie']){if(xi['copy'](_0x2d38f8),Ld['copy'](_0x2d38f8),_0x369674['_type']===Ze&&xi['add'](this['scissorVec']),_0x369674['_type']===Ke){const _0x2f0895=xi['z']/(0x13be+-0xdf*0x29+0xffc),_0x2a689e=this['cubeSlotsO'+'ffsets'][_0x56f831];xi['x']+=_0x2f0895*_0x2a689e['x'],xi['y']+=_0x2f0895*_0x2a689e['y'],xi['z']=_0x2f0895,xi['w']=_0x2f0895,Ld['copy'](xi);}if(_0x369674['castShadow'+'s']){const _0x3e3ad5=_0x369674['getRenderD'+'ata'](null,_0x56f831);_0x3e3ad5['shadowView'+'port']['copy'](xi),_0x3e3ad5['shadowScis'+'sor']['copy'](Ld);}}}['assignSlot'](_0x3cd161,_0x55a7f7,_0x42385a){_0x3cd161['atlasViewp'+'ortAllocat'+'ed']=!(-0x260a+0x23e4+0x226);const _0x5dbf76=this['slots'][_0x55a7f7];_0x5dbf76['lightId']=_0x3cd161['id'],_0x5dbf76['used']=!(-0x159*0x11+0x9*0x14b+0xb46),_0x42385a&&(_0x3cd161['atlasSlotU'+'pdated']=!(-0xd*-0x1c9+0x1d1b+-0x3450),_0x3cd161['atlasVersi'+'on']=this['version'],_0x3cd161['atlasSlotI'+'ndex']=_0x55a7f7);}['update'](_0x377524,_0x5aaddb){this['shadowAtla'+'sResolutio'+'n']=_0x5aaddb['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0x5aaddb['cookieAtla'+'sResolutio'+'n'];const _0xb8bcc1=this['collectLig'+'hts'](_0x377524,_0x5aaddb);if(_0xb8bcc1['length']>0x2309+0x127*0x15+-0x3b3c){const _0x38eb40=this['slots'];for(let _0x51afdc=-0xe2c+-0x1*-0x78e+0x16*0x4d;_0x51afdc<_0x38eb40['length'];_0x51afdc++)_0x38eb40[_0x51afdc]['used']=!(-0xca*-0x9+0x17*-0x71+-0x11*-0x2e);const _0x266c7d=Math['min'](_0xb8bcc1['length'],_0x38eb40['length']);for(let _0x486100=-0x3*0x125+-0x72f+0x6*0x1c5;_0x486100<_0x266c7d;_0x486100++){const _0x4bb7c3=_0xb8bcc1[_0x486100];_0x4bb7c3['castShadow'+'s']&&(_0x4bb7c3['_shadowMap']=this['shadowAtla'+'s']);const _0x68e8ce=_0x38eb40[_0x4bb7c3['atlasSlotI'+'ndex']];if(_0x4bb7c3['atlasVersi'+'on']===this['version']&&_0x4bb7c3['id']===(_0x68e8ce==null?void(-0x22f0+-0x40c*-0x2+0x1ad8):_0x68e8ce['lightId'])){const _0x50fb73=_0x38eb40[_0x4bb7c3['atlasSlotI'+'ndex']];_0x50fb73['size']===_0x38eb40[_0x486100]['size']&&!_0x50fb73['used']&&this['assignSlot'](_0x4bb7c3,_0x4bb7c3['atlasSlotI'+'ndex'],!(0x7*-0x376+-0x5ec*-0x4+0x8b));}}let _0x13ead6=-0x13*-0xe5+0x30*-0x71+-0x431*-0x1;for(let _0x16b72d=-0x12aa*-0x2+0x1b2b+0x13*-0x365;_0x16b72d<_0x266c7d;_0x16b72d++){for(;_0x13ead6<_0x38eb40['length']&&_0x38eb40[_0x13ead6]['used'];)_0x13ead6++;const _0x21d6a4=_0xb8bcc1[_0x16b72d];_0x21d6a4['atlasViewp'+'ortAllocat'+'ed']||this['assignSlot'](_0x21d6a4,_0x13ead6,!(0x24fd+-0x134f+0x11ae*-0x1));const _0x13de3c=_0x38eb40[_0x21d6a4['atlasSlotI'+'ndex']];this['setupSlot'](_0x21d6a4,_0x13de3c['rect']);}}this['updateUnif'+'orms']();}}class KE{constructor(){this['cache']=new Map();}['destroy'](){this['clear'](),this['cache']=null;}['clear'](){this['cache']['forEach'](_0x477b44=>{_0x477b44['forEach'](_0x50e4c8=>{_0x50e4c8['destroy']();});}),this['cache']['clear']();}['getKey'](_0x580219){const _0x2035fe=_0x580219['_type']===Ke,_0x87e9f3=_0x580219['_shadowTyp'+'e'],_0x2f1f93=_0x580219['_shadowRes'+'olution'];return _0x2035fe+'-'+_0x87e9f3+'-'+_0x2f1f93;}['get'](_0x5f1e20,_0x339f23){const _0x3bc58b=this['getKey'](_0x339f23),_0x3ea63d=this['cache']['get'](_0x3bc58b);if(_0x3ea63d&&_0x3ea63d['length'])return _0x3ea63d['pop']();const _0x779dc5=ma['create'](_0x5f1e20,_0x339f23);return _0x779dc5['cached']=!(-0x7*-0x3ea+0x1*0x158f+-0x30f5),_0x779dc5;}['add'](_0x2c6418,_0x73e0c9){const _0x421947=this['getKey'](_0x2c6418),_0x2932b2=this['cache']['get'](_0x421947);_0x2932b2?_0x2932b2['push'](_0x73e0c9):this['cache']['set'](_0x421947,[_0x73e0c9]);}}class ZE extends ys{constructor(_0x52cd38,_0x52c5b8,_0x47cdda,_0x5754c1,_0x1a53ca){super(_0x52cd38),ya['setName'](this,this['name']+'-'+_0x47cdda['_node']['name']),this['requiresCu'+'bemaps']=!(-0xb1d*0x1+0xf6+0xc8*0xd),this['shadowRend'+'erer']=_0x52c5b8,this['light']=_0x47cdda,this['face']=_0x5754c1,this['applyVsm']=_0x1a53ca,this['shadowCame'+'ra']=_0x52c5b8['prepareFac'+'e'](_0x47cdda,null,_0x5754c1),_0x52c5b8['setupRende'+'rPass'](this,this['shadowCame'+'ra'],!(-0x1*-0x10f1+0x99+-0x382*0x5));}['execute'](){this['shadowRend'+'erer']['renderFace'](this['light'],null,this['face'],!(-0x1622*-0x1+-0x22c+-0x13f5));}['after'](){this['applyVsm']&&this['shadowRend'+'erer']['renderVsm'](this['light'],this['shadowCame'+'ra']);}}class QE{constructor(_0x2832c3,_0xef91c2){h(this,'shadowLigh'+'ts',[]),h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x2832c3,this['shadowRend'+'erer']=_0xef91c2,this['device']=_0x2832c3['device']);}['cull'](_0x12fb3e,_0x4137d3,_0x14a3dc=null){const _0x16e45c=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled'];_0x12fb3e['visibleThi'+'sFrame']=!(0x34a*0x5+-0xeaf*-0x2+0x4*-0xb74),_0x16e45c||_0x12fb3e['_shadowMap']||(_0x12fb3e['_shadowMap']=ma['create'](this['device'],_0x12fb3e));const _0x4ba796=_0x12fb3e['_type'],_0x3f2f2d=_0x4ba796===Ze?0x6*0xa3+0x212f+-0x2500:-0x67*-0x2f+-0x892+-0xa51;for(let _0x4fd343=-0x1c79+-0x265f+0x42d8;_0x4fd343<_0x3f2f2d;_0x4fd343++){const _0x1454f1=_0x12fb3e['getRenderD'+'ata'](null,_0x4fd343),_0x428826=_0x1454f1['shadowCame'+'ra'];_0x428826['nearClip']=_0x12fb3e['attenuatio'+'nEnd']/(-0x36e+0x1ce8+-0x1592*0x1),_0x428826['farClip']=_0x12fb3e['attenuatio'+'nEnd'];const _0x4d9cd0=_0x428826['_node'],_0x13e364=_0x12fb3e['_node'];if(_0x4d9cd0['setPositio'+'n'](_0x13e364['getPositio'+'n']()),_0x4ba796===Ze)_0x428826['fov']=_0x12fb3e['_outerCone'+'Angle']*(-0xda5+0x3*-0x39e+-0x7b*-0x33),_0x4d9cd0['setRotatio'+'n'](_0x13e364['getRotatio'+'n']()),_0x4d9cd0['rotateLoca'+'l'](-(0x146*-0x7+-0x1*0x1bdb+0x251f),-0x86*0x3a+-0x1a2*-0xc+-0xd*-0xd4,-0x35*-0x55+-0x1d1d+0xb84);else{if(_0x4ba796===Ke){if(_0x16e45c){const _0x49b4e6=(-0x31*-0x31+0x5*0xa9+-0xcac)/(this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowAtla'+'sResolutio'+'n']*_0x12fb3e['atlasViewp'+'ort']['z']/(0xfd6+-0x2*-0x5f1+0x1*-0x1bb5))*this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowEdge'+'Pixels'];_0x428826['fov']=Math['atan'](-0x1a75+-0x92*0x44+0x413e+_0x49b4e6)*Y['RAD_TO_DEG']*(-0x5a+0x30a*-0x3+-0x1*-0x97a);}else _0x428826['fov']=-0x1*0x18e5+-0x28+0x1967;}}this['renderer']['updateCame'+'raFrustum'](_0x428826),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x4137d3,_0x12fb3e,_0x1454f1['visibleCas'+'ters'],_0x428826,_0x14a3dc);}}['prepareLig'+'hts'](_0x288ac1,_0x212701){let _0x1f45db;for(let _0xd8c9de=0x1*-0x1da3+-0x27*0xa2+0x3651;_0xd8c9de<_0x212701['length'];_0xd8c9de++){const _0x3c7736=_0x212701[_0xd8c9de];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x3c7736)&&_0x3c7736['atlasViewp'+'ortAllocat'+'ed']){_0x288ac1['push'](_0x3c7736);for(let _0x10b468=-0x685*-0x2+0xb0e+-0x1818;_0x10b468<_0x3c7736['numShadowF'+'aces'];_0x10b468++)_0x1f45db=this['shadowRend'+'erer']['prepareFac'+'e'](_0x3c7736,null,_0x10b468);}}return _0x1f45db;}['buildNonCl'+'usteredRen'+'derPasses'](_0x2eef61,_0x4afcc8){for(let _0xc9d330=-0x1dca+-0x6a9+0x2473;_0xc9d330<_0x4afcc8['length'];_0xc9d330++){const _0x4c1e33=_0x4afcc8[_0xc9d330];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x4c1e33)){const _0x389231=_0x4c1e33['_type']===Ze,_0x339a31=_0x4c1e33['numShadowF'+'aces'];for(let _0x1a29b3=-0x1*0x11f7+0x2273*0x1+-0x107c;_0x1a29b3<_0x339a31;_0x1a29b3++){const _0x4a9913=new ZE(this['device'],this['shadowRend'+'erer'],_0x4c1e33,_0x1a29b3,_0x389231);_0x2eef61['addRenderP'+'ass'](_0x4a9913);}}}}}class JE extends ys{constructor(_0x4c4c4e,_0x2a6865,_0x2fd61e,_0x2b61da,_0x126cb6){super(_0x4c4c4e),ya['setName'](this,this['name']+'-'+_0x2fd61e['_node']['name']),this['shadowRend'+'erer']=_0x2a6865,this['light']=_0x2fd61e,this['camera']=_0x2b61da,this['allCascade'+'sRendering']=_0x126cb6;}['execute'](){const {light:_0x4a7016,camera:_0x4a976f,shadowRenderer:_0x3bb2be,allCascadesRendering:_0x4c790a}=this,_0x32fd10=_0x4a7016['numShadowF'+'aces'],_0x54d1ed=_0x4a7016['shadowUpda'+'teOverride'+'s'];for(let _0x800d52=0x14c1+-0x92c+0xb95*-0x1;_0x800d52<_0x32fd10;_0x800d52++)(_0x54d1ed==null?void(0x5*0x596+0x1e87+-0x3a75):_0x54d1ed[_0x800d52])!==Ps&&_0x3bb2be['renderFace'](_0x4a7016,_0x4a976f,_0x800d52,!_0x4c790a),(_0x54d1ed==null?void(-0x16bd+0x2ba*-0x2+0x1c31):_0x54d1ed[_0x800d52])===gr&&(_0x54d1ed[_0x800d52]=Ps);}['after'](){this['shadowRend'+'erer']['renderVsm'](this['light'],this['camera']);}}const jl=new De(),Ti=new D(),p_=new te(),Xe=[new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D()],Od={'min':0x0,'max':0x0};function eb(_0x2c25d3,_0x7508,_0x10019a){Xe[-0x4f*-0x59+-0x1458+-0x1*0x71f]['x']=Xe[0x8be+0x6d3+-0xf90]['x']=Xe[0x1f6+0x3dc+0x3e*-0x18]['x']=Xe[-0xeb*0x11+-0xd6f+0x1d0d]['x']=_0x7508['x'],Xe[0x281*0x3+-0x1*0x1da5+0x1623]['y']=Xe[-0x9a3+0x2c*-0x6d+0x1c62]['y']=Xe[0x12f7*-0x1+-0xc36+0x1f34]['y']=Xe[-0x39b*0x5+0x1*-0x200b+-0x1*-0x3217]['y']=_0x7508['y'],Xe[-0x268*-0x2+-0x3*-0xb83+-0xd1d*0x3]['z']=Xe[0x1*-0x20c5+0x47*0x6+0x1f1e]['z']=Xe[-0x220a+0xea1*0x2+0x4ce]['z']=Xe[0x182c+0x103+-0x1928]['z']=_0x7508['z'],Xe[-0x26*-0x101+-0x4dc*-0x5+-0x3e6e]['x']=Xe[0xf33*0x1+0x3aa+-0x12d8]['x']=Xe[0x38f*-0x1+0x1634+-0x129f]['x']=Xe[-0x5ea+-0x8*-0x3b3+-0x7*0x361]['x']=_0x10019a['x'],Xe[0x2486+0x189a+-0x3d20*0x1]['y']=Xe[-0x1*0xed+0x1eaa+0x2b*-0xb1]['y']=Xe[-0x7d3+0x634+0x1a3]['y']=Xe[-0x1a8b+0x499*-0x3+0x285c]['y']=_0x10019a['y'],Xe[-0x137d+-0x6f3*0x3+0x2856]['z']=Xe[-0x1cde+0x223d+-0x55e]['z']=Xe[-0x24e9*-0x1+0x1bfb+0x4*-0x1038]['z']=Xe[0x63d+0x7*0x2+-0x646]['z']=_0x10019a['z'];let _0x156543=0x3f56f4d02+0x29bef95c0+-0x43d52fec3,_0x3ce258=-(0x1*0x1e732a102+-0x9*-0x1bdad54b+-0x1a*0x5749fdf);for(let _0x3c185c=0x25f*-0xe+-0x22d+0x235f;_0x3c185c<-0x1*0x1393+-0x1*0x1ddd+0x18bc*0x2;++_0x3c185c){_0x2c25d3['transformP'+'oint'](Xe[_0x3c185c],Xe[_0x3c185c]);const _0x3f5ce9=Xe[_0x3c185c]['z'];_0x3f5ce9<_0x156543&&(_0x156543=_0x3f5ce9),_0x3f5ce9>_0x3ce258&&(_0x3ce258=_0x3f5ce9);}return Od['min']=_0x156543,Od['max']=_0x3ce258,Od;}class tb{constructor(_0x332ca8,_0x246b01){h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x332ca8,this['shadowRend'+'erer']=_0x246b01,this['device']=_0x332ca8['device']);}['cull'](_0xf14ffb,_0x267b4d,_0x256884,_0x5bb5c4=null){_0xf14ffb['visibleThi'+'sFrame']=!(-0x1801+0x3*0xaed+-0x8c6),_0xf14ffb['_shadowMap']||(_0xf14ffb['_shadowMap']=ma['create'](this['device'],_0xf14ffb));const _0x16bd0f=_0x256884['_nearClip'];this['generateSp'+'litDistanc'+'es'](_0xf14ffb,_0x16bd0f,Math['min'](_0x256884['_farClip'],_0xf14ffb['shadowDist'+'ance']));const _0x2039e7=_0xf14ffb['shadowUpda'+'teOverride'+'s'];for(let _0x4489aa=0x2501*0x1+-0x141*0x3+-0x213e;_0x4489aa<_0xf14ffb['numCascade'+'s']&&(_0x2039e7==null?void(-0x1fe7+-0x315+0x22fc):_0x2039e7[_0x4489aa])!==Ps;_0x4489aa++){const _0x49a403=_0xf14ffb['getRenderD'+'ata'](_0x256884,_0x4489aa),_0x4a1204=_0x49a403['shadowCame'+'ra'];_0x4a1204['renderTarg'+'et']=_0xf14ffb['_shadowMap']['renderTarg'+'ets'][0x2500+0x14b2*0x1+0x5c5*-0xa],_0x49a403['shadowView'+'port']['copy'](_0xf14ffb['cascades'][_0x4489aa]),_0x49a403['shadowScis'+'sor']['copy'](_0xf14ffb['cascades'][_0x4489aa]);const _0x59a9f4=_0x4a1204['_node'],_0x47f018=_0xf14ffb['_node'];_0x59a9f4['setPositio'+'n'](_0x47f018['getPositio'+'n']()),_0x59a9f4['setRotatio'+'n'](_0x47f018['getRotatio'+'n']()),_0x59a9f4['rotateLoca'+'l'](-(0xd31+0x103b+-0x3d*0x7a),-0x16c3*-0x1+-0x9c3*0x2+-0x33d,0x955+-0x26a*-0x1+-0xbbf);const _0x12dd86=_0x4489aa===-0x24b5+0x1e75+0x640?_0x16bd0f:_0xf14ffb['_shadowCas'+'cadeDistan'+'ces'][_0x4489aa-(0x25e3+0x2295*0x1+-0x4877)],_0x458da1=_0xf14ffb['_shadowCas'+'cadeDistan'+'ces'][_0x4489aa],_0x5cde0f=_0x256884['getFrustum'+'Corners'](_0x12dd86,_0x458da1);Ti['set'](0x1*-0x1d5d+-0x54*0x77+0x4469,-0x25e5*-0x1+0x1ae4+0x217*-0x1f,-0x149*-0x1+0x1aef+-0x1c38);const _0x5c296a=_0x256884['node']['getWorldTr'+'ansform']();for(let _0x2fe70a=0xcc2*0x1+-0x1*-0x16b3+-0x2375;_0x2fe70a<0xe*0xf5+0x141c+-0x217a;_0x2fe70a++)_0x5c296a['transformP'+'oint'](_0x5cde0f[_0x2fe70a],_0x5cde0f[_0x2fe70a]),Ti['add'](_0x5cde0f[_0x2fe70a]);Ti['mulScalar']((0xc56+0x9c4+-0x1619)/(-0x240f+0x1*0x1a68+-0x1*-0x9af));let _0x531d94=0x17d9+-0x26a*-0x6+-0x2655;for(let _0x4e787e=0xc5a+-0x5*0x82+0x8*-0x13a;_0x4e787e<-0x1*-0x2473+0x23e9+-0x4854;_0x4e787e++){const _0x4ad7b8=_0x5cde0f[_0x4e787e]['sub'](Ti)['length']();_0x4ad7b8>_0x531d94&&(_0x531d94=_0x4ad7b8);}const _0x497115=_0x59a9f4['right'],_0x17d85b=_0x59a9f4['up'],_0x5398dc=_0x59a9f4['forward'],_0x30775f=(0x6d*0x26+-0x43f+-0xbef+0.25)*_0xf14ffb['_shadowRes'+'olution']/_0x531d94,_0x4a998d=Math['ceil'](Ti['dot'](_0x17d85b)*_0x30775f)/_0x30775f,_0x140191=Math['ceil'](Ti['dot'](_0x497115)*_0x30775f)/_0x30775f,_0x1eb79e=_0x17d85b['mulScalar'](_0x4a998d),_0x41df9c=_0x497115['mulScalar'](_0x140191),_0x5d9d89=Ti['dot'](_0x5398dc),_0x5e9088=_0x5398dc['mulScalar'](_0x5d9d89);Ti['add2'](_0x1eb79e,_0x41df9c)['add'](_0x5e9088),_0x59a9f4['setPositio'+'n'](Ti),_0x59a9f4['translateL'+'ocal'](-0xb3*0x34+0x134+0x2328,0x1a7*-0x13+-0x24a4+-0x4409*-0x1,-0xb18d8+0x497*0x2ba+-0x2*-0x6ebb1),_0x4a1204['nearClip']=0x9a5*0x2+0x45d*-0x2+-0xa90+0.01,_0x4a1204['farClip']=0x2e8618+-0x1*-0x38d9e3+-0x9*0x81863,_0x4a1204['orthoHeigh'+'t']=_0x531d94,this['renderer']['updateCame'+'raFrustum'](_0x4a1204),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x267b4d,_0xf14ffb,_0x49a403['visibleCas'+'ters'],_0x4a1204,_0x5bb5c4);const _0xa468ee=0x110*-0x21+-0x72+0x2383<<_0x4489aa,_0x3475b0=_0x49a403['visibleCas'+'ters'],_0x19b7bb=_0x3475b0['length'];let _0x10aa15=0xf50+-0x1*0x5f1+0x95f*-0x1;for(let _0xaaeaa=0x49*0x53+-0x1dbd*-0x1+-0x1ab4*0x2;_0xaaeaa<_0x19b7bb;_0xaaeaa++){const _0x4f5983=_0x3475b0[_0xaaeaa];_0x4f5983['shadowCasc'+'adeMask']&_0xa468ee&&(_0x3475b0[_0x10aa15++]=_0x4f5983,_0x10aa15===-0x26*-0x2f+-0x696+-0x63?jl['copy'](_0x4f5983['aabb']):jl['add'](_0x4f5983['aabb']));}_0x19b7bb!==_0x10aa15&&(_0x3475b0['length']=_0x10aa15),p_['copy'](_0x59a9f4['getWorldTr'+'ansform']())['invert']();const _0x5b6111=eb(p_,jl['getMin'](),jl['getMax']());_0x59a9f4['translateL'+'ocal'](0x32*-0x4a+-0x6d*0x1d+0x1acd,0x4*-0x190+0x1*-0x1231+-0x1*-0x1871,_0x5b6111['max']+(0x832*-0x3+-0x93d+0x21d3+0.1)),_0x4a1204['farClip']=_0x5b6111['max']-_0x5b6111['min']+(-0x14f*-0x1a+0x7*0x3df+0x1*-0x3d1f+0.2),_0x49a403['projection'+'Compensati'+'on']=_0x531d94;}}['generateSp'+'litDistanc'+'es'](_0x470ae6,_0x2fa958,_0x31662a){_0x470ae6['_shadowCas'+'cadeDistan'+'ces']['fill'](_0x31662a);for(let _0x5da09c=-0x440+-0x25a0+0x29e1;_0x5da09c<_0x470ae6['numCascade'+'s'];_0x5da09c++){const _0x46b138=_0x5da09c/_0x470ae6['numCascade'+'s'],_0x5595d1=_0x2fa958+(_0x31662a-_0x2fa958)*_0x46b138,_0x10c9ce=_0x2fa958*(_0x31662a/_0x2fa958)**_0x46b138,_0xcdc75e=Y['lerp'](_0x5595d1,_0x10c9ce,_0x470ae6['cascadeDis'+'tribution']);_0x470ae6['_shadowCas'+'cadeDistan'+'ces'][_0x5da09c-(-0x1a8*0x1+0x25dc+-0x2433)]=_0xcdc75e;}}['getLightRe'+'nderPass'](_0x1a69c8,_0x29e9cf){w['assert'](_0x1a69c8&&_0x1a69c8['_type']===ve);let _0x5a7d9a=null;if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x1a69c8)){const _0x52a316=_0x1a69c8['numShadowF'+'aces'],_0x3cad6d=_0x1a69c8['shadowUpda'+'teOverride'+'s'];let _0x5882af=!(0xc96+-0x1e03+0x116d),_0x3b1492;for(let _0xab1a06=-0x1*-0xf31+-0x1123+0x3*0xa6;_0xab1a06<_0x52a316;_0xab1a06++)(_0x3cad6d==null?void(-0x31d*-0x2+-0x2*-0xc7a+-0xd*0x266):_0x3cad6d[_0xab1a06])===Ps&&(_0x5882af=!(-0x2d*0x3a+0x1a48+0xb3*-0x17)),_0x3b1492=this['shadowRend'+'erer']['prepareFac'+'e'](_0x1a69c8,_0x29e9cf,_0xab1a06);_0x5a7d9a=new JE(this['device'],this['shadowRend'+'erer'],_0x1a69c8,_0x29e9cf,_0x5882af),this['shadowRend'+'erer']['setupRende'+'rPass'](_0x5a7d9a,_0x3b1492,_0x5882af);}return _0x5a7d9a;}}const Fd=new Set(),m_=new te(),__=new te(),Ir=new Float32Array(0x5d*0x49+-0x3*-0xb12+-0x3bb9),to=new re(-0x9b1*-0x2+-0xb1d+-0x2e*0x2e,0x6c0+0x62f+-0xcee,0x424+-0xb*-0x1db+-0x188d,-0x5dd+0xdf0+-0xd*0x9f),g_=new te();function sb(_0x586433,_0x33d8b5){return Math['exp'](-(_0x586433*_0x586433)/((0x54a+-0x2*0xffb+-0x5*-0x556)*_0x33d8b5*_0x33d8b5));}function ib(_0x901703){const _0x13e78e=(_0x901703-(0x3e7+0x1b7*-0x2+0x1e*-0x4))/(0x1389+-0x2e7*-0xb+0x10*-0x337),_0x57a98f=(_0x901703-(-0x22ce*-0x1+-0x398+-0x1f35))*(-0x7a0+-0xc3f+0x13df+0.5),_0x1b3013=new Array(_0x901703);let _0x19c03d=-0x1*0x1579+0x4f6+0x581*0x3;for(let _0x280e62=-0x2479+-0x1f98*0x1+-0x5*-0xd9d;_0x280e62<_0x901703;++_0x280e62)_0x1b3013[_0x280e62]=sb(_0x280e62-_0x57a98f,_0x13e78e),_0x19c03d+=_0x1b3013[_0x280e62];for(let _0x363648=0x4b2+0x1*-0x1b3e+0xd*0x1bc;_0x363648<_0x901703;++_0x363648)_0x1b3013[_0x363648]/=_0x19c03d;return _0x1b3013;}class $y{constructor(_0xf8f44c,_0x26c8e6){h(this,'shadowPass'+'Cache',[]),(this['device']=_0xf8f44c['device'],this['renderer']=_0xf8f44c,this['lightTextu'+'reAtlas']=_0x26c8e6);const _0x24ee03=this['device']['scope'];this['sourceId']=_0x24ee03['resolve']('source'),this['pixelOffse'+'tId']=_0x24ee03['resolve']('pixelOffse'+'t'),this['weightId']=_0x24ee03['resolve']('weight[0]'),this['blurVsmSha'+'der']=[{},{}],this['blurVsmWei'+'ghts']={},this['shadowMapL'+'ightRadius'+'Id']=_0x24ee03['resolve']('light_radi'+'us'),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['blendState'+'Write']=new pt(),this['blendState'+'NoWrite']=new pt(),this['blendState'+'NoWrite']['setColorWr'+'ite'](!(-0xf*0x1cd+-0xfa0+-0x2aa4*-0x1),!(0x1*0x107a+-0x1943*0x1+0x8ca),!(-0x1*-0x23ed+-0x4*-0x59f+0x858*-0x7),!(0x13ef+-0x4a*0x56+-0x1*-0x4ee));}static['createShad'+'owCamera'](_0x46f57b,_0x15d983,_0xd22db){const _0x4c00b1=kn['create']('ShadowCame'+'ra',_0x15d983,_0xd22db),_0x1a0da5=Xi['get'](_0x46f57b);w['assert'](_0x1a0da5);const _0x17597c=(_0x1a0da5==null?void(0x8+-0x3*0x7b+0x169):_0x1a0da5['vsm'])??!(0x1cd*-0x8+-0x2520+0x3389),_0x24ef92=(_0x1a0da5==null?void(0x6+0xe*0x147+0xbf*-0x18):_0x1a0da5['pcf'])??!(-0x1bb*0xb+-0x94d+0x1c57);return _0x17597c?_0x4c00b1['clearColor']=new ie(0xc02*-0x3+0xb41*0x1+-0x1*-0x18c5,0x1bf6+0x2*0x4e4+-0x25be*0x1,-0x1303+0x2593*0x1+-0x1290,-0x7*0x40f+0x28b+0x19de):_0x4c00b1['clearColor']=new ie(-0xa*-0x352+0x15*-0x7f+-0x16c8,-0x191*-0x14+0x754*0x4+-0x331*0x13,0x1*0x5d+-0x38+0x3*-0xc,0x762+-0x446*0x1+-0x31b),_0x4c00b1['clearDepth'+'Buffer']=!(-0x489+-0x8e9+0xd72),_0x4c00b1['clearStenc'+'ilBuffer']=!(0xbab*-0x2+-0x3*-0x100+0x7f*0x29),_0x4c00b1['clearColor'+'Buffer']=!_0x24ef92,_0x4c00b1;}['_cullShado'+'wCastersIn'+'ternal'](_0x34425c,_0x517d5f,_0x14aede){const _0x30eb3d=_0x34425c['length'];for(let _0xd9128e=-0x43*0x16+0xbf6+-0x634;_0xd9128e<_0x30eb3d;_0xd9128e++){const _0x72e488=_0x34425c[_0xd9128e];_0x72e488['castShadow']&&(!_0x72e488['cull']||_0x72e488['_isVisible'](_0x14aede))&&(_0x72e488['visibleThi'+'sFrame']=!(-0x96d+0x228e*0x1+0x1*-0x1921),_0x517d5f['push'](_0x72e488));}}['cullShadow'+'Casters'](_0x105f71,_0x54c79a,_0x14349b,_0x13dad3,_0x43c09e){var _0x1989eb,_0x2f92a0;if((_0x1989eb=this['renderer']['scene'])==null||_0x1989eb['fire'](Ry,_0x13dad3),_0x14349b['length']=-0x7*-0x18b+-0x966+-0x167,_0x43c09e)this['_cullShado'+'wCastersIn'+'ternal'](_0x43c09e,_0x14349b,_0x13dad3);else{const _0x251261=_0x105f71['layerList'],_0xb5492d=_0x251261['length'];for(let _0x1a7271=-0x395*-0x7+0x105b*0x1+0x1*-0x296e;_0x1a7271<_0xb5492d;_0x1a7271++){const _0x3c8c44=_0x251261[_0x1a7271];_0x3c8c44['_lightsSet']['has'](_0x54c79a)&&(Fd['has'](_0x3c8c44)||(Fd['add'](_0x3c8c44),this['_cullShado'+'wCastersIn'+'ternal'](_0x3c8c44['shadowCast'+'ers'],_0x14349b,_0x13dad3)));}Fd['clear']();}_0x14349b['sort'](this['sortCompar'+'eShader']),(_0x2f92a0=this['renderer']['scene'])==null||_0x2f92a0['fire'](Oy,_0x13dad3);}['sortCompar'+'eShader'](_0x2321de,_0x351991){const _0x447725=_0x2321de['_sortKeySh'+'adow'],_0x5ba8ea=_0x351991['_sortKeySh'+'adow'];return _0x447725===_0x5ba8ea?_0x351991['mesh']['id']-_0x2321de['mesh']['id']:_0x5ba8ea-_0x447725;}['setupRende'+'rState'](_0x52cbdc,_0x3c5ccb){const _0x12f4c7=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']?_0x3c5ccb['_isPcf']:_0x3c5ccb['_isPcf']&&_0x3c5ccb['_type']!==Ke;_0x52cbdc['setBlendSt'+'ate'](_0x12f4c7?this['blendState'+'NoWrite']:this['blendState'+'Write']),_0x52cbdc['setDepthSt'+'ate'](_0x3c5ccb['shadowDept'+'hState']),_0x52cbdc['setStencil'+'State'](null,null);}['dispatchUn'+'iforms'](_0x427ea2,_0x593c0f,_0x44f68b,_0x1a1821){const _0x14f45f=_0x593c0f['_node'];_0x427ea2['_type']!==ve&&(this['renderer']['dispatchVi'+'ewPos'](_0x14f45f['getPositio'+'n']()),this['shadowMapL'+'ightRadius'+'Id']['setValue'](_0x427ea2['attenuatio'+'nEnd'])),m_['setTRS'](_0x14f45f['getPositio'+'n'](),_0x14f45f['getRotatio'+'n'](),D['ONE'])['invert'](),__['mul2'](_0x593c0f['projection'+'Matrix'],m_);const _0x4be0e4=_0x44f68b['shadowView'+'port'];_0x593c0f['rect']=_0x4be0e4,_0x593c0f['scissorRec'+'t']=_0x44f68b['shadowScis'+'sor'],g_['setViewpor'+'t'](_0x4be0e4['x'],_0x4be0e4['y'],_0x4be0e4['z'],_0x4be0e4['w']),_0x44f68b['shadowMatr'+'ix']['mul2'](g_,__),_0x427ea2['_type']===ve&&_0x427ea2['_shadowMat'+'rixPalette']['set'](_0x44f68b['shadowMatr'+'ix']['data'],_0x1a1821*(0x2db*0xb+0x1*-0x61e+-0x193b*0x1));}['getShadowP'+'ass'](_0xa66f98){var _0x436e16;const _0x3eb94=_0xa66f98['_type'],_0x263caf=_0xa66f98['_shadowTyp'+'e'];let _0x525e88=(_0x436e16=this['shadowPass'+'Cache'][_0x3eb94])==null?void(0x1ff5+0xd2e+-0x2d23):_0x436e16[_0x263caf];if(!_0x525e88){const _0x1abb4b='ShadowPass'+'_'+_0x3eb94+'_'+_0x263caf;_0x525e88=Si['get'](this['device'])['allocate'](_0x1abb4b,{'isShadow':!(0x152b+0x1*-0xc70+-0x2e9*0x3),'lightType':_0x3eb94,'shadowType':_0x263caf}),this['shadowPass'+'Cache'][_0x3eb94]||(this['shadowPass'+'Cache'][_0x3eb94]=[]),this['shadowPass'+'Cache'][_0x3eb94][_0x263caf]=_0x525e88;}return _0x525e88['index'];}['submitCast'+'ers'](_0x3efbde,_0x5d7386,_0x2c745c){var _0x4bc0e5;const _0x4acbe4=this['device'],_0x10d3e0=this['renderer'],_0x4ce99b=_0x10d3e0['scene'],_0xe3bcb0=-0x2d7*-0x2+-0x131a+-0xd6d*-0x1<<Np,_0x5caac1=this['getShadowP'+'ass'](_0x5d7386),_0x282d6c=_0x2c745c['shaderPara'+'ms'],_0x6c44d5=_0x2c745c['renderTarg'+'et']['flipY']?-(-0x683*0x1+-0x2124+0x27a8):-0x2061*0x1+-0x2588+0x45ea,_0x125be3=_0x3efbde['length'];for(let _0x45acb6=0x15c*0x14+-0x105b+-0x2f*0x3b;_0x45acb6<_0x125be3;_0x45acb6++){const _0x1c99a1=_0x3efbde[_0x45acb6],_0x503499=_0x1c99a1['mesh'],_0x35a662=_0x1c99a1['instancing'+'Data'];if(_0x35a662&&_0x35a662['count']<=-0x2454+0x20f9+-0x35b*-0x1)continue;_0x1c99a1['ensureMate'+'rial'](_0x4acbe4);const _0x1140c6=_0x1c99a1['material'];Q['pushGpuMar'+'ker'](_0x4acbe4,'Node:\x20'+_0x1c99a1['node']['name']+(',\x20Material'+':\x20')+_0x1140c6['name']),_0x10d3e0['setBaseCon'+'stants'](_0x4acbe4,_0x1140c6),_0x10d3e0['setSkinnin'+'g'](_0x4acbe4,_0x1c99a1),_0x1140c6['dirty']&&(_0x1140c6['updateUnif'+'orms'](_0x4acbe4,_0x4ce99b),_0x1140c6['dirty']=!(0x4dd*0x1+-0x13*0x7f+0x491*0x1)),_0x10d3e0['setupCullM'+'ode'](!(-0x1c80+0x23*0xf9+-0x58b),_0x6c44d5,_0x1c99a1),_0x1140c6['setParamet'+'ers'](_0x4acbe4),_0x1c99a1['setParamet'+'ers'](_0x4acbe4,_0xe3bcb0);const _0x1354ac=_0x1c99a1['getShaderI'+'nstance'](_0x5caac1,-0x25dc+-0x928*-0x2+0x138c,_0x4ce99b,_0x282d6c,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat']),_0x4e0226=_0x1354ac['shader'];if(w['assert'](_0x4e0226,'no\x20shader\x20'+'for\x20pass\x20'+_0x5caac1,_0x1140c6),_0x4e0226['failed'])continue;_0x1c99a1['_sortKeySh'+'adow']=_0x4e0226['id'],_0x4acbe4['setShader'](_0x4e0226),_0x10d3e0['setVertexB'+'uffers'](_0x4acbe4,_0x503499),_0x10d3e0['setMorphin'+'g'](_0x4acbe4,_0x1c99a1['morphInsta'+'nce']),_0x35a662&&_0x4acbe4['setVertexB'+'uffer'](_0x35a662['vertexBuff'+'er']),_0x10d3e0['setMeshIns'+'tanceMatri'+'ces'](_0x1c99a1),_0x10d3e0['setupMeshU'+'niformBuff'+'ers'](_0x1354ac);const _0x44a5e8=_0x1c99a1['renderStyl'+'e'],_0x1a782e=(_0x4bc0e5=_0x1c99a1['indirectDa'+'ta'])==null?void(-0x1*0xd37+-0x8e2+-0x1619*-0x1):_0x4bc0e5['get'](_0x2c745c);_0x4acbe4['draw'](_0x503499['primitive'][_0x44a5e8],_0x503499['indexBuffe'+'r'][_0x44a5e8],_0x35a662==null?void(0x6cd*-0x5+0x2*0x943+0xf7b):_0x35a662['count'],_0x1a782e),_0x10d3e0['_shadowDra'+'wCalls']++,_0x35a662&&_0x10d3e0['_instanced'+'DrawCalls']++,Q['popGpuMark'+'er'](_0x4acbe4);}}['needsShado'+'wRendering'](_0x1d1790){const _0x21a978=_0x1d1790['enabled']&&_0x1d1790['castShadow'+'s']&&_0x1d1790['shadowUpda'+'teMode']!==Ps&&_0x1d1790['visibleThi'+'sFrame'];return _0x1d1790['shadowUpda'+'teMode']===gr&&(_0x1d1790['shadowUpda'+'teMode']=Ps),_0x21a978&&(this['renderer']['_shadowMap'+'Updates']+=_0x1d1790['numShadowF'+'aces']),_0x21a978;}['getLightRe'+'nderData'](_0x42f9d2,_0x246a34,_0x35c5ec){return _0x42f9d2['getRenderD'+'ata'](_0x42f9d2['_type']===ve?_0x246a34:null,_0x35c5ec);}['setupRende'+'rPass'](_0x417b49,_0x3cd922,_0xb2dcb0){const _0x577363=_0x3cd922['renderTarg'+'et'];_0x417b49['init'](_0x577363),_0x417b49['depthStenc'+'ilOps']['clearDepth'+'Value']=-0x2*0x17e+0x1857+-0x155a*0x1,_0x417b49['depthStenc'+'ilOps']['clearDepth']=_0xb2dcb0,_0x577363['depthBuffe'+'r']?_0x417b49['depthStenc'+'ilOps']['storeDepth']=!(0x1ab+-0xda0+0xbf5*0x1):(_0x417b49['colorOps']['clearValue']['copy'](_0x3cd922['clearColor']),_0x417b49['colorOps']['clear']=_0xb2dcb0,_0x417b49['depthStenc'+'ilOps']['storeDepth']=!(-0x1*-0xc15+0x56*-0x65+0xaed*0x2)),_0x417b49['requiresCu'+'bemaps']=!(-0x2*0xe2c+0x179+0x1ae0);}['prepareFac'+'e'](_0x208f24,_0x3e636b,_0x251199){const _0x451b05=_0x208f24['_type'],_0x3777dc=this['getLightRe'+'nderData'](_0x208f24,_0x3e636b,_0x251199)['shadowCame'+'ra'],_0x4b2b87=_0x451b05===ve?-0x1b*-0x23+-0x255e+0x21ad:_0x251199;return _0x3777dc['renderTarg'+'et']=_0x208f24['_shadowMap']['renderTarg'+'ets'][_0x4b2b87],_0x3777dc;}['renderFace'](_0x96455,_0x3a9ac7,_0x1a8ecb,_0x151e28,_0x22d852=!(0x192d+0x26b*0xa+-0x1*0x315b)){const _0x305859=this['device'],_0xf80dcc=de();Q['pushGpuMar'+'ker'](_0x305859,'SHADOW\x20'+_0x96455['_node']['name']+'\x20FACE\x20'+_0x1a8ecb);const _0x2744e8=this['getLightRe'+'nderData'](_0x96455,_0x3a9ac7,_0x1a8ecb),_0x3f05f4=_0x2744e8['shadowCame'+'ra'];this['dispatchUn'+'iforms'](_0x96455,_0x3f05f4,_0x2744e8,_0x1a8ecb);const _0x46d941=_0x3f05f4['renderTarg'+'et'],_0x110f9d=this['renderer'];_0x110f9d['setCameraU'+'niforms'](_0x3f05f4,_0x46d941),_0x305859['supportsUn'+'iformBuffe'+'rs']&&_0x110f9d['setupViewU'+'niformBuff'+'ers'](_0x2744e8['viewBindGr'+'oups'],this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],null),_0x22d852?(_0x110f9d['setupViewp'+'ort'](_0x3f05f4,_0x46d941),_0x151e28&&_0x110f9d['clear'](_0x3f05f4)):_0x110f9d['clearView'](_0x3f05f4,_0x46d941,!(-0x1*-0x1555+0x2133+0x1*-0x3688),!(0x1e59+0x6e2*-0x5+0x412)),this['setupRende'+'rState'](_0x305859,_0x96455),this['submitCast'+'ers'](_0x2744e8['visibleCas'+'ters'],_0x96455,_0x3f05f4),Q['popGpuMark'+'er'](_0x305859),_0x110f9d['_shadowMap'+'Time']+=de()-_0xf80dcc;}['render'](_0x5288f1,_0x45b36e,_0x5dd85d=!(-0x10c5+0x4a*0x22+0x6f1)){if(this['needsShado'+'wRendering'](_0x5288f1)){const _0x45cb1e=_0x5288f1['numShadowF'+'aces'];for(let _0x453f0a=0x2135*-0x1+-0xe*-0x26+0x1f21*0x1;_0x453f0a<_0x45cb1e;_0x453f0a++)this['prepareFac'+'e'](_0x5288f1,_0x45b36e,_0x453f0a),this['renderFace'](_0x5288f1,_0x45b36e,_0x453f0a,!(-0x160e+0x886*-0x2+0x271a),_0x5dd85d);this['renderVsm'](_0x5288f1,_0x45b36e);}}['renderVsm'](_0x4c0193,_0x1f3887){_0x4c0193['_isVsm']&&_0x4c0193['_vsmBlurSi'+'ze']>-0x9*-0x145+-0x39*-0x6d+-0x23b1&&(!this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']||_0x4c0193['_type']===ve)&&this['applyVsmBl'+'ur'](_0x4c0193,_0x1f3887);}['getVsmBlur'+'Shader'](_0x5d4d16,_0x2fbbbf){const _0x4ed268=this['blurVsmSha'+'der'];let _0x7699d6=_0x4ed268[_0x5d4d16][_0x2fbbbf];if(!_0x7699d6){this['blurVsmWei'+'ghts'][_0x2fbbbf]=ib(_0x2fbbbf);const _0x3f6ffc=new Map();_0x3f6ffc['set']('{SAMPLES}',_0x2fbbbf),_0x5d4d16===-0x67*0x4a+-0xfa*0x19+0x3631&&_0x3f6ffc['set']('GAUSS',''),_0x7699d6=$t['createShad'+'er'](this['device'],{'uniqueName':'blurVsm'+_0x5d4d16+_0x2fbbbf,'attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'blurVSMPS','fragmentDefines':_0x3f6ffc}),_0x4ed268[_0x5d4d16][_0x2fbbbf]=_0x7699d6;}return _0x7699d6;}['applyVsmBl'+'ur'](_0x319f3e,_0x43c431){const _0x187993=this['device'];Q['pushGpuMar'+'ker'](_0x187993,'VSM\x20'+_0x319f3e['_node']['name']),_0x187993['setBlendSt'+'ate'](pt['NOBLEND']);const _0x5ca97f=_0x319f3e['getRenderD'+'ata'](_0x319f3e['_type']===ve?_0x43c431:null,-0x2bc+-0x21cc+0x2488)['shadowCame'+'ra']['renderTarg'+'et'],_0x48f83e=this['renderer']['shadowMapC'+'ache']['get'](_0x187993,_0x319f3e),_0x1fd720=_0x48f83e['renderTarg'+'ets'][-0x26d3+0x1*-0x1a21+0x40f4],_0x304f0c=_0x319f3e['vsmBlurMod'+'e'],_0x1be581=_0x319f3e['_vsmBlurSi'+'ze'],_0x4b363e=this['getVsmBlur'+'Shader'](_0x304f0c,_0x1be581);to['z']=_0x319f3e['_shadowRes'+'olution']-(0x309*0x1+0x1467*-0x1+0x1160),to['w']=to['z'],this['sourceId']['setValue'](_0x5ca97f['colorBuffe'+'r']),Ir[0x42d+0x260a+0x2a37*-0x1]=(0x154c+-0x1*-0x1fdd+-0x3528)/_0x319f3e['_shadowRes'+'olution'],Ir[-0x4*-0x77b+-0x1*0x1383+-0xa68]=0x12e*-0x1f+0x5*-0x73d+0x1841*0x3,this['pixelOffse'+'tId']['setValue'](Ir),_0x304f0c===Cp&&this['weightId']['setValue'](this['blurVsmWei'+'ghts'][_0x1be581]),Tr(_0x187993,_0x1fd720,_0x4b363e,null,to),this['sourceId']['setValue'](_0x1fd720['colorBuffe'+'r']),Ir[-0x18ee+-0xac7+0x11db*0x2]=Ir[0x1*0xf86+0x39b+0x53*-0x3b],Ir[-0x1054+0x1*-0x23cf+0x3423]=-0xf7*0x13+0xc04+0x651,this['pixelOffse'+'tId']['setValue'](Ir),Tr(_0x187993,_0x5ca97f,_0x4b363e,null,to),this['renderer']['shadowMapC'+'ache']['add'](_0x319f3e,_0x48f83e),Q['popGpuMark'+'er'](_0x187993);}['initViewBi'+'ndGroupFor'+'mat'](){this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']&&(this['viewUnifor'+'mFormat']=new ry(this['device'],[new dt('matrix_vie'+'wProjectio'+'n',li)]),this['viewBindGr'+'oupFormat']=new ey(this['device'],[new hp(cp,lp|HS)]));}['frameUpdat'+'e'](){this['initViewBi'+'ndGroupFor'+'mat']();}}const Yl=[];class rb{constructor(_0x478593){h(this,'_empty',null),h(this,'_allocated',[]),h(this,'_clusters',new Map()),this['device']=_0x478593;}['destroy'](){this['_empty']&&(this['_empty']['destroy'](),this['_empty']=null),this['_allocated']['forEach'](_0x2173a7=>{_0x2173a7['destroy']();}),this['_allocated']['length']=-0x10*-0x49+-0x1c6a+-0x2b*-0x8e;}get['count'](){return this['_allocated']['length'];}get['empty'](){if(!this['_empty']){const _0x32dffb=new kf(this['device']);_0x32dffb['name']='ClusterEmp'+'ty',_0x32dffb['update']([]),this['_empty']=_0x32dffb;}return this['_empty'];}['assign'](_0x20a19d){const _0xe94924=this['empty'];Yl['push'](...this['_allocated']),this['_allocated']['length']=-0x16*-0x32+0x12dd+-0x1729,this['_clusters']['clear']();const _0x48c48b=_0x20a19d['length'];for(let _0x38a4a4=-0x2385+0x21a7+0x1de;_0x38a4a4<_0x48c48b;_0x38a4a4++){const _0x451cd6=_0x20a19d[_0x38a4a4]['renderActi'+'ons'];if(_0x451cd6){const _0x3ec628=_0x451cd6['length'];for(let _0x62a845=0x135+-0x1af6+0x19c1;_0x62a845<_0x3ec628;_0x62a845++){const _0x721278=_0x451cd6[_0x62a845];_0x721278['lightClust'+'ers']=null;const _0x3833f3=_0x721278['layer'];if(_0x3833f3['hasCluster'+'edLights']&&_0x3833f3['meshInstan'+'ces']['length']){const _0x78bc44=_0x3833f3['getLightId'+'Hash'](),_0x38fb13=this['_clusters']['get'](_0x78bc44);let _0x4e1196=_0x38fb13==null?void(0x2*0x99a+-0x497+0x1*-0xe9d):_0x38fb13['lightClust'+'ers'];_0x4e1196||(_0x4e1196=Yl['pop']()??new kf(this['device']),ya['setName'](_0x4e1196,'Cluster-'+this['_allocated']['length']),this['_allocated']['push'](_0x4e1196),this['_clusters']['set'](_0x78bc44,_0x721278)),_0x721278['lightClust'+'ers']=_0x4e1196;}_0x721278['lightClust'+'ers']||(_0x721278['lightClust'+'ers']=_0xe94924);}}}Yl['forEach'](_0x3213d9=>_0x3213d9['destroy']()),Yl['length']=-0x387+0x1028*-0x1+0x13af;}['update'](_0x17d3b0,_0x99f07){this['assign'](_0x17d3b0),this['_clusters']['forEach'](_0x41e030=>{const _0x1ec086=_0x41e030['layer'];_0x41e030['lightClust'+'ers']['update'](_0x1ec086['clusteredL'+'ightsSet'],_0x99f07);});}}const ir=new re(),Nd=[];class Vp extends ys{constructor(_0x3cfce3,_0xad55c8){super(_0x3cfce3),h(this,'_quadRende'+'rer2D',null),h(this,'_quadRende'+'rerCube',null),h(this,'_filteredL'+'ights',[]),h(this,'_forceCopy',!(-0x1756+0x1*0xc9b+0xabc)),h(this,'_evtDevice'+'Restored',null),(this['_cubeSlots'+'Offsets']=_0xad55c8,this['requiresCu'+'bemaps']=!(-0x3fb+0x1c*0xc2+-0x113c),this['blitTextur'+'eId']=_0x3cfce3['scope']['resolve']('blitTextur'+'e'),this['invViewPro'+'jId']=_0x3cfce3['scope']['resolve']('invViewPro'+'j'),this['_evtDevice'+'Restored']=_0x3cfce3['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this));}['destroy'](){var _0x4bdaff,_0x447ee0,_0x2aa9fc;(_0x4bdaff=this['_quadRende'+'rer2D'])==null||_0x4bdaff['destroy'](),this['_quadRende'+'rer2D']=null,(_0x447ee0=this['_quadRende'+'rerCube'])==null||_0x447ee0['destroy'](),this['_quadRende'+'rerCube']=null,(_0x2aa9fc=this['_evtDevice'+'Restored'])==null||_0x2aa9fc['off'](),this['_evtDevice'+'Restored']=null;}static['create'](_0x5064ef,_0x3cc578){w['assert'](_0x5064ef);const _0x5138f5=new Vp(_0x5064ef['device'],_0x3cc578);return _0x5138f5['init'](_0x5064ef),_0x5138f5['colorOps']['clear']=!(0x1f*-0x2+0x413+-0x3d4),_0x5138f5['depthStenc'+'ilOps']['clearDepth']=!(-0xb9d+-0x7c*0xf+0x12e2),_0x5138f5;}['onDeviceRe'+'stored'](){this['_forceCopy']=!(-0x534+0x4d1+-0x3*-0x21);}['update'](_0x34c878){const _0x291e03=this['_filteredL'+'ights'];this['filter'](_0x34c878,_0x291e03),this['executeEna'+'bled']=_0x291e03['length']>0x1e8e*-0x1+0x77*-0x9+0x22bd*0x1;}['filter'](_0x54d704,_0xba806c){for(let _0x1d6916=-0x120d+0x2173+-0xf66;_0x1d6916<_0x54d704['length'];_0x1d6916++){const _0x31f169=_0x54d704[_0x1d6916];_0x31f169['_type']!==ve&&_0x31f169['atlasViewp'+'ortAllocat'+'ed']&&(!_0x31f169['atlasSlotU'+'pdated']&&!this['_forceCopy']||_0x31f169['enabled']&&_0x31f169['cookie']&&_0x31f169['visibleThi'+'sFrame']&&_0xba806c['push'](_0x31f169));}this['_forceCopy']=!(-0x1ca3+-0x1*-0x874+0x1430);}['initInvVie'+'wProjMatri'+'ces'](){if(!Nd['length'])for(let _0x5a1c9e=-0x208e*0x1+-0x17e*-0x10+0x8ae;_0x5a1c9e<-0xcd*-0x20+-0x2309*0x1+-0x96f*-0x1;_0x5a1c9e++){const _0x552589=kn['create'](null,Ke,_0x5a1c9e),_0x49ef4e=_0x552589['projection'+'Matrix'],_0x2041c5=_0x552589['node']['getLocalTr'+'ansform']()['clone']()['invert']();Nd[_0x5a1c9e]=new te()['mul2'](_0x49ef4e,_0x2041c5)['invert']();}}get['quadRender'+'er2D'](){if(!this['_quadRende'+'rer2D']){const _0xb8ead3=$t['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'erer2d','attributes':{'vertex_position':Pe},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'2DPS'});this['_quadRende'+'rer2D']=new rh(_0xb8ead3);}return this['_quadRende'+'rer2D'];}get['quadRender'+'erCube'](){if(!this['_quadRende'+'rerCube']){const _0x54fbaf=$t['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'ererCube','attributes':{'vertex_position':Pe},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'CubePS'});this['_quadRende'+'rerCube']=new rh(_0x54fbaf);}return this['_quadRende'+'rerCube'];}['execute'](){const _0x58ff61=this['device'];_0x58ff61['setBlendSt'+'ate'](pt['NOBLEND']),_0x58ff61['setCullMod'+'e'](bt),_0x58ff61['setDepthSt'+'ate'](Yt['NODEPTH']),_0x58ff61['setStencil'+'State']();const _0x151592=this['renderTarg'+'et']['colorBuffe'+'r']['width'],_0x541739=this['_cubeSlots'+'Offsets'],_0xbe3499=this['_filteredL'+'ights'];for(let _0x1dbbf1=0x7*0x7+-0xd36*-0x1+0x49*-0x2f;_0x1dbbf1<_0xbe3499['length'];_0x1dbbf1++){const _0xc3a9a8=_0xbe3499[_0x1dbbf1];Q['pushGpuMar'+'ker'](this['device'],'COOKIE\x20'+_0xc3a9a8['_node']['name']);const _0x2f1284=_0xc3a9a8['numShadowF'+'aces'],_0x2edae2=_0x2f1284>-0x677*0x6+0x8a0+0x1e2b?this['quadRender'+'erCube']:this['quadRender'+'er2D'];_0x2f1284>-0x5*-0x4a3+0x176e*0x1+0x13a*-0x26&&this['initInvVie'+'wProjMatri'+'ces'](),this['blitTextur'+'eId']['setValue'](_0xc3a9a8['cookie']);for(let _0x2224f2=-0x5*-0x570+-0x3*0x5a3+0xa47*-0x1;_0x2224f2<_0x2f1284;_0x2224f2++){if(ir['copy'](_0xc3a9a8['atlasViewp'+'ort']),_0x2f1284>0xc1b+-0x4cb*-0x3+-0x1a7b){const _0x363190=ir['z']/(-0x269*0x1+0xb7*-0x19+0x144b),_0x257aec=_0x541739[_0x2224f2];ir['x']+=_0x363190*_0x257aec['x'],ir['y']+=_0x363190*_0x257aec['y'],ir['z']=_0x363190,ir['w']=_0x363190,this['invViewPro'+'jId']['setValue'](Nd[_0x2224f2]['data']);}ir['mulScalar'](_0x151592),_0x2edae2['render'](ir);}Q['popGpuMark'+'er'](_0x58ff61);}_0xbe3499['length']=-0xa0d*-0x2+0xa01*-0x1+-0xa19;}}class ab extends ys{constructor(_0x2ead73,_0x342d23,_0x8b67d5){super(_0x2ead73),this['requiresCu'+'bemaps']=!(0xdbb*-0x2+0xe*-0x38+-0x1e87*-0x1),this['shadowRend'+'erer']=_0x342d23,this['shadowRend'+'ererLocal']=_0x8b67d5;}['update'](_0x46d92d){const _0x3a8863=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x2ec43f=this['shadowRend'+'ererLocal']['prepareLig'+'hts'](_0x3a8863,_0x46d92d),_0x43499c=_0x3a8863['length'];this['enabled']=_0x43499c>-0x181a+-0x1*0x1e21+0x363b,_0x43499c&&this['shadowRend'+'erer']['setupRende'+'rPass'](this,_0x2ec43f,!(-0x100f*0x1+0x194*0x8+0x370));}['execute'](){const _0x49b100=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x59e68b=_0x49b100['length'];for(let _0x258551=0x1cf5+-0x1976*-0x1+-0x366b*0x1;_0x258551<_0x59e68b;_0x258551++){const _0x260a9b=_0x49b100[_0x258551];for(let _0x2802f0=0x9*-0x2b9+-0x192a*0x1+-0x1*-0x31ab;_0x2802f0<_0x260a9b['numShadowF'+'aces'];_0x2802f0++)this['shadowRend'+'erer']['renderFace'](_0x260a9b,null,_0x2802f0,!(0x6f*0x49+0xcba+-0x2c61));}_0x49b100['length']=-0x2246+0x234b+-0x105;}}class nb extends ys{constructor(_0x35e287,_0x58842b,_0xd3cd84,_0x5dd16a,_0x4d8ac6){super(_0x35e287),this['renderer']=_0x58842b,this['frameGraph']=null,this['cookiesRen'+'derPass']=Vp['create'](_0x4d8ac6['cookieRend'+'erTarget'],_0x4d8ac6['cubeSlotsO'+'ffsets']),this['beforePass'+'es']['push'](this['cookiesRen'+'derPass']),this['shadowRend'+'erPass']=new ab(_0x35e287,_0xd3cd84,_0x5dd16a),this['beforePass'+'es']['push'](this['shadowRend'+'erPass']);}['update'](_0xcf1b80,_0x20fac2,_0x2d37ab,_0x141924,_0x53a6b1){this['frameGraph']=_0xcf1b80,this['cookiesRen'+'derPass']['enabled']=_0x2d37ab,_0x2d37ab&&this['cookiesRen'+'derPass']['update'](_0x141924),this['shadowRend'+'erPass']['enabled']=_0x20fac2,_0x20fac2&&this['shadowRend'+'erPass']['update'](_0x53a6b1);}['destroy'](){this['cookiesRen'+'derPass']['destroy'](),this['cookiesRen'+'derPass']=null;}['execute'](){const _0x51d6cc=de(),{renderer:_0xfd18ff}=this,{scene:_0x157fb3}=_0xfd18ff;_0xfd18ff['worldClust'+'ersAllocat'+'or']['update'](this['frameGraph']['renderPass'+'es'],_0x157fb3['lighting']),_0xfd18ff['_lightClus'+'tersTime']+=de()-_0x51d6cc,_0xfd18ff['_lightClus'+'ters']=_0xfd18ff['worldClust'+'ersAllocat'+'or']['count'];}}let kd=0x71*0x29+0x13ca+0x9f*-0x3d;const rr=new te(),ar=new te(),Ma=new te(),S_=new _i(),Ud=new Mu(),y_=new te()['setScale'](-0xc51+-0xd0e+0x70*0x3a,-(0xb*0x265+0x2*-0xb03+-0x450),-0x112d*0x1+0x20f2+-0xfc4),Bd=new Set(),zd=new Set(),Vd=new ty(),v_=new te()['set']([0x2*-0x6fd+0xbf3+0x208,-0x4*0x913+0x17eb*0x1+0xc61,0x6d*-0xa+-0x13eb+-0x182d*-0x1,-0x527*0x1+-0xdfa+0x1321,0x117d*-0x1+-0x19ae+0x2b2b,-0x1*-0x2470+-0x26b7+-0x2*-0x124,-0x1b26+0x24bf+-0x3*0x333,-0x1*-0xf39+0x5*0x610+-0x2d89,0x163*0x13+0x1*0x20a+-0x1*0x1c63,0x1f73*0x1+-0x5c0+-0x19b3,-0xc05+-0x2184+0x2d89+0.5,0x6c+0x72e+-0x79a,0x240a+-0x5c4+-0x1e46,0x1*-0xe7d+0xdea+0x93,0x168b+-0x2*0x85d+0x5d1*-0x1+0.5,-0x184*-0x13+-0x1*-0xefc+-0x2bc7]),x_=[new J(-0x3c1+0x1*0x37+0x38a+0.5,-0x1ab1*0x1+0x260e+-0xb5d+0.333333),new J(0x5f*-0x7+-0xab1+0xd4a+0.25,0x2524+0x2271+-0xe51*0x5+0.666667),new J(-0xb*0xa5+-0x1*-0x1369+-0x13*0xa6+0.75,-0x1731+-0x3a*0x17+0x1c67+0.111111),new J(0x2*0x65+-0x5fc+0x532+0.125,0x1*-0x2330+0xa*0x2f9+0x2bb*0x2+0.444444),new J(0x2dd*0xc+0x22d7+-0x4533+0.625,-0x25*0xda+0x28d*-0x2+0x249c*0x1+0.777778),new J(-0x15b1+0x1*0x3a9+-0x1*-0x1208+0.375,0xa3*-0x1c+0xd*0x1c6+-0x53a+0.222222),new J(0x2*0x7b1+-0xb9*-0x26+-0x2ad8+0.875,0x5*-0x4f7+0x13b1+0x522+0.555556),new J(0x1d7e*-0x1+-0x1*-0x1115+0xc69+0.0625,-0x6d*0x47+-0x1*-0xd30+-0x110b*-0x1+0.888889),new J(0x3e0+-0x1d*0x97+0x469*0x3+0.5625,-0x13*-0x1e9+-0x54c+-0x5*0x633+0.037037),new J(0xcb7+-0x1*0x1545+0x88e+0.3125,0x1895+-0x1d85+0x4f0+0.37037),new J(-0x9*-0x14d+0x15d9+0x1*-0x218e+0.8125,0x1*-0x18bf+0xcdc+-0xb3*-0x11+0.703704),new J(-0x3*-0x5b5+-0x26e7+0x15c8+0.1875,0x1*0x66a+0x2*-0xc8c+0x1*0x12ae+0.148148),new J(0x19cc+-0x17f7+0x7*-0x43+0.6875,-0x1d1+0x2533+-0x2362+0.481481),new J(0x1*-0x7b5+-0x10e4*0x1+0x1899+0.4375,-0x2f*-0x67+0x5*-0x6b+-0x10d2+0.814815),new J(0x72f+0x1e6f+-0x259e+0.9375,0x1*0x16e1+0x31*0xb+-0xc*0x215+0.259259),new J(0x147c+-0x1409+0x5*-0x17+0.03125,-0xe9+-0xcb*0x1f+0x197e+0.592593)],ob=new te(),lb=new te(),cb=new te(),hb=new te(),db=new te(),fb=new te(),Da=new Set(),Gd=[],Hd=[];class ub{constructor(_0x5181f9){h(this,'clustersDe'+'bugRendere'+'d',!(-0x6*-0x4bb+0xc+-0x1*0x1c6d)),h(this,'processing'+'MeshInstan'+'ces',new Set()),h(this,'worldClust'+'ersAllocat'+'or'),h(this,'lights',[]),h(this,'localLight'+'s',[]),h(this,'cameraDirS'+'hadowLight'+'s',new Map()),h(this,'dirLightSh'+'adows',new Map()),h(this,'blueNoise',new VE(0x18b3+0x59b*-0x6+-0x96a*-0x1)),(this['device']=_0x5181f9,this['scene']=null,this['worldClust'+'ersAllocat'+'or']=new rb(_0x5181f9),this['lightTextu'+'reAtlas']=new YE(_0x5181f9),this['shadowMapC'+'ache']=new KE(),this['shadowRend'+'erer']=new $y(this,this['lightTextu'+'reAtlas']),this['_shadowRen'+'dererLocal']=new QE(this,this['shadowRend'+'erer']),this['_shadowRen'+'dererDirec'+'tional']=new tb(this,this['shadowRend'+'erer']),this['_renderPas'+'sUpdateClu'+'stered']=new nb(this['device'],this,this['shadowRend'+'erer'],this['_shadowRen'+'dererLocal'],this['lightTextu'+'reAtlas']),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['_skinTime']=-0xe2*-0x2b+-0x6b4+-0x1f42,this['_morphTime']=-0x240b+0x1dfb+0x610*0x1,this['_cullTime']=-0x1335+-0x61*-0x4f+-0xaba,this['_shadowMap'+'Time']=0x3ab+0xccd+-0x1078,this['_lightClus'+'tersTime']=0x2238+0x985+0x2bbd*-0x1,this['_layerComp'+'ositionUpd'+'ateTime']=0x2412+0x1bd*-0x12+-0x4c8,this['_shadowDra'+'wCalls']=0xf59+-0x20fd+0x4*0x469,this['_skinDrawC'+'alls']=-0x2b*0x73+0x74*0x54+0x1*-0x12bf,this['_instanced'+'DrawCalls']=0xe3b*-0x1+0x809*0x2+-0x3*0x9d,this['_shadowMap'+'Updates']=0x1662+-0x1719+0xb7,this['_numDrawCa'+'llsCulled']=0x1*-0x269+0x1bb8+-0x194f,this['_camerasRe'+'ndered']=-0x3*-0x427+0xcfe+-0x1973,this['_lightClus'+'ters']=-0x2*0x1046+-0x1*-0x5d4+-0xe4*-0x1e);const _0x362909=_0x5181f9['scope'];this['boneTextur'+'eId']=_0x362909['resolve']('texture_po'+'seMap'),this['modelMatri'+'xId']=_0x362909['resolve']('matrix_mod'+'el'),this['normalMatr'+'ixId']=_0x362909['resolve']('matrix_nor'+'mal'),this['viewInvId']=_0x362909['resolve']('matrix_vie'+'wInverse'),this['viewPos']=new Float32Array(-0x18ac+0x9*0x398+0x25*-0x35),this['viewPosId']=_0x362909['resolve']('view_posit'+'ion'),this['projId']=_0x362909['resolve']('matrix_pro'+'jection'),this['projSkybox'+'Id']=_0x362909['resolve']('matrix_pro'+'jectionSky'+'box'),this['viewId']=_0x362909['resolve']('matrix_vie'+'w'),this['viewId3']=_0x362909['resolve']('matrix_vie'+'w3'),this['viewProjId']=_0x362909['resolve']('matrix_vie'+'wProjectio'+'n'),this['flipYId']=_0x362909['resolve']('projection'+'FlipY'),this['tbnBasis']=_0x362909['resolve']('tbnBasis'),this['nearClipId']=_0x362909['resolve']('camera_nea'+'r'),this['farClipId']=_0x362909['resolve']('camera_far'),this['cameraPara'+'ms']=new Float32Array(0x16fd+-0x9d0+-0x1*0xd29),this['cameraPara'+'msId']=_0x362909['resolve']('camera_par'+'ams'),this['viewIndexI'+'d']=_0x362909['resolve']('view_index'),this['viewIndexI'+'d']['setValue'](-0x21c9+-0x1c84+-0x29*-0x185),this['blueNoiseJ'+'itterVersi'+'on']=-0x1*0x1622+-0x1e34+0x3bd*0xe,this['blueNoiseJ'+'itterVec']=new re(),this['blueNoiseJ'+'itterData']=new Float32Array(0x24f7+-0x1b35+-0x2*0x4df),this['blueNoiseJ'+'itterId']=_0x362909['resolve']('blueNoiseJ'+'itter'),this['blueNoiseT'+'extureId']=_0x362909['resolve']('blueNoiseT'+'ex32'),this['alphaTestI'+'d']=_0x362909['resolve']('alpha_ref'),this['opacityMap'+'Id']=_0x362909['resolve']('texture_op'+'acityMap'),this['exposureId']=_0x362909['resolve']('exposure'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']=_0x362909['resolve']('twoSidedLi'+'ghtingNegS'+'caleFactor'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](0x1*-0x2462+-0xfb*-0x7+0x1d85),this['morphPosit'+'ionTex']=_0x362909['resolve']('morphPosit'+'ionTex'),this['morphNorma'+'lTex']=_0x362909['resolve']('morphNorma'+'lTex'),this['morphTexPa'+'rams']=_0x362909['resolve']('morph_tex_'+'params'),this['lightCube']=new HE(),this['constantLi'+'ghtCube']=_0x362909['resolve']('lightCube['+'0]');}['destroy'](){this['shadowRend'+'erer']=null,this['_shadowRen'+'dererLocal']=null,this['_shadowRen'+'dererDirec'+'tional']=null,this['shadowMapC'+'ache']['destroy'](),this['shadowMapC'+'ache']=null,this['_renderPas'+'sUpdateClu'+'stered']['destroy'](),this['_renderPas'+'sUpdateClu'+'stered']=null,this['lightTextu'+'reAtlas']['destroy'](),this['lightTextu'+'reAtlas']=null;}['setupViewp'+'ort'](_0x32443c,_0xa9fa40){const _0x399c5e=this['device'],_0x363be1=_0xa9fa40?_0xa9fa40['width']:_0x399c5e['width'],_0x522567=_0xa9fa40?_0xa9fa40['height']:_0x399c5e['height'],_0x4b7333=_0x32443c['rect'];let _0x3e0148=Math['floor'](_0x4b7333['x']*_0x363be1),_0xcf58c9=Math['floor'](_0x4b7333['y']*_0x522567),_0x84ed49=Math['floor'](_0x4b7333['z']*_0x363be1),_0x474e01=Math['floor'](_0x4b7333['w']*_0x522567);if(_0x399c5e['setViewpor'+'t'](_0x3e0148,_0xcf58c9,_0x84ed49,_0x474e01),_0x32443c['_scissorRe'+'ctClear']){const _0x5ef077=_0x32443c['scissorRec'+'t'];_0x3e0148=Math['floor'](_0x5ef077['x']*_0x363be1),_0xcf58c9=Math['floor'](_0x5ef077['y']*_0x522567),_0x84ed49=Math['floor'](_0x5ef077['z']*_0x363be1),_0x474e01=Math['floor'](_0x5ef077['w']*_0x522567);}_0x399c5e['setScissor'](_0x3e0148,_0xcf58c9,_0x84ed49,_0x474e01);}['setCameraU'+'niforms'](_0x403bf1,_0x597860){var _0x12c4cf,_0x51ea52;const _0x121e9d=_0x597860==null?void(-0x17bc+0x551*-0x6+0x37a2):_0x597860['flipY'];let _0x5d869f=null;if(_0x403bf1['xr']&&_0x403bf1['xr']['session']){const _0x59d485=((_0x51ea52=(_0x12c4cf=_0x403bf1['_node'])==null?void(-0x11af+0x1*0x377+0x1c*0x82):_0x12c4cf['parent'])==null?void(0x58e+-0x121d+0xc8f*0x1):_0x51ea52['getWorldTr'+'ansform']())||null;_0x5d869f=_0x403bf1['xr']['views']['list'];for(let _0x2db982=0x33*-0xc1+0x26f6+-0x83;_0x2db982<_0x5d869f['length'];_0x2db982++){const _0x406a69=_0x5d869f[_0x2db982];_0x406a69['updateTran'+'sforms'](_0x59d485),_0x403bf1['frustum']['setFromMat'+'4'](_0x406a69['projViewOf'+'fMat']);}}else{let _0x270f8c=_0x403bf1['projection'+'Matrix'];_0x403bf1['calculateP'+'rojection']&&_0x403bf1['calculateP'+'rojection'](_0x270f8c,zl);let _0x99aae1=_0x403bf1['getProject'+'ionMatrixS'+'kybox']();_0x121e9d&&(_0x270f8c=ob['mul2'](y_,_0x270f8c),_0x99aae1=lb['mul2'](y_,_0x99aae1)),this['device']['isWebGPU']&&(_0x270f8c=cb['mul2'](v_,_0x270f8c),_0x99aae1=hb['mul2'](v_,_0x99aae1));const {jitter:_0x38862c}=_0x403bf1;let _0x4f4ab2=-0xf8f*0x1+-0x7c2+0x1751,_0x413ef4=0x125a+-0x2*-0x123b+-0x36d0;if(_0x38862c>-0x1a65*0x1+0x148f+0x1*0x5d6){const _0x3aca0e=_0x597860?_0x597860['width']:this['device']['width'],_0x23207b=_0x597860?_0x597860['height']:this['device']['height'],_0xfa3026=x_[this['device']['renderVers'+'ion']%x_['length']];_0x4f4ab2=_0x38862c*(_0xfa3026['x']*(-0x1bb9+-0x4*-0x5cf+0x1*0x47f)-(0x1caa+0xc5*-0x3+-0x1a5a))/_0x3aca0e,_0x413ef4=_0x38862c*(_0xfa3026['y']*(-0xee5+0x1c96+-0xdaf*0x1)-(0x5d5+0x2634+-0x1*0x2c08))/_0x23207b,_0x270f8c=db['copy'](_0x270f8c),_0x270f8c['data'][-0x1a4*-0x13+0x3*-0x851+-0x1*0x631]=_0x4f4ab2,_0x270f8c['data'][0x1f44+-0x6cd*0x3+0x7e*-0x16]=_0x413ef4,_0x99aae1=fb['copy'](_0x99aae1),_0x99aae1['data'][0x1*0x8d1+-0x3d*-0xe+0x6b*-0x1d]=_0x4f4ab2,_0x99aae1['data'][0x2202+0x130f+-0x3508]=_0x413ef4,this['blueNoiseJ'+'itterVersi'+'on']!==this['device']['renderVers'+'ion']&&(this['blueNoiseJ'+'itterVersi'+'on']=this['device']['renderVers'+'ion'],this['blueNoise']['vec4'](this['blueNoiseJ'+'itterVec']));}const _0x99e7b8=_0x38862c>-0x169a+-0x2031+0x36cb?this['blueNoiseJ'+'itterVec']:re['ZERO'];if(this['blueNoiseJ'+'itterData'][-0xaaf*0x3+-0x212c*0x1+-0x11b*-0x3b]=_0x99e7b8['x'],this['blueNoiseJ'+'itterData'][-0xb8*-0x33+0x34*0x13+-0x3*0xd81]=_0x99e7b8['y'],this['blueNoiseJ'+'itterData'][0x313*0x1+0xc9e+0xb*-0x16d]=_0x99e7b8['z'],this['blueNoiseJ'+'itterData'][0x1cf4+0x1006+-0x2cf7]=_0x99e7b8['w'],this['blueNoiseJ'+'itterId']['setValue'](this['blueNoiseJ'+'itterData']),this['projId']['setValue'](_0x270f8c['data']),this['projSkybox'+'Id']['setValue'](_0x99aae1['data']),_0x403bf1['calculateT'+'ransform'])_0x403bf1['calculateT'+'ransform'](ar,zl);else{const _0x4da52f=_0x403bf1['_node']['getPositio'+'n'](),_0x56ba99=_0x403bf1['_node']['getRotatio'+'n']();ar['setTRS'](_0x4da52f,_0x56ba99,D['ONE']);}this['viewInvId']['setValue'](ar['data']),Ma['copy'](ar)['invert'](),this['viewId']['setValue'](Ma['data']),S_['setFromMat'+'4'](Ma),this['viewId3']['setValue'](S_['data']),rr['mul2'](_0x270f8c,Ma),this['viewProjId']['setValue'](rr['data']),_0x403bf1['_storeShad'+'erMatrices'](rr,_0x4f4ab2,_0x413ef4,this['device']['renderVers'+'ion']),this['flipYId']['setValue'](_0x121e9d?-(0x12a9+0x26e7+-0x5*0xb83):0xf*0x273+0x5*-0x157+0x21*-0xe9),this['dispatchVi'+'ewPos'](_0x403bf1['_node']['getPositio'+'n']()),_0x403bf1['frustum']['setFromMat'+'4'](rr);}this['tbnBasis']['setValue'](_0x121e9d?-(0x11e4+-0x1*0x1ebb+0x19b*0x8):0x1638+0x3*0x10b+-0x1958);const _0x3969d7=_0x403bf1['_nearClip'],_0x5f1f20=_0x403bf1['_farClip'];return this['nearClipId']['setValue'](_0x3969d7),this['farClipId']['setValue'](_0x5f1f20),this['cameraPara'+'ms'][0x1de+0x1900+-0x1ade]=(-0xa*0x1a7+-0x70*0xc+0x15c7)/_0x5f1f20,this['cameraPara'+'ms'][-0x3+-0x202f+0x2033]=_0x5f1f20,this['cameraPara'+'ms'][0x202+0x1a64+0x2*-0xe32]=_0x3969d7,this['cameraPara'+'ms'][-0x19dd+0x2563*0x1+-0xb83]=_0x403bf1['projection']===gn?-0x1*0x137d+-0x7d*-0x1d+0x555:-0x207c+-0x482*-0x5+0x86*0x13,this['cameraPara'+'msId']['setValue'](this['cameraPara'+'ms']),this['exposureId']['setValue'](this['scene']['physicalUn'+'its']?_0x403bf1['getExposur'+'e']():this['scene']['exposure']),_0x5d869f;}['clear'](_0x3de96f,_0x59c18e,_0x5c1e6f,_0x5330ea){const _0x32c16d=(_0x59c18e??_0x3de96f['_clearColo'+'rBuffer']?Fo:0xfb9+0xa0e+-0x1*0x19c7)|(_0x5c1e6f??_0x3de96f['_clearDept'+'hBuffer']?No:0x1177+-0x62*-0x35+-0x5*0x78d)|(_0x5330ea??_0x3de96f['_clearSten'+'cilBuffer']?Vc:0x1*-0x200e+0x2*-0xf6f+-0x1f76*-0x2);if(_0x32c16d){const _0x553dba=this['device'];Q['pushGpuMar'+'ker'](_0x553dba,'CLEAR'),_0x553dba['clear']({'color':[_0x3de96f['_clearColo'+'r']['r'],_0x3de96f['_clearColo'+'r']['g'],_0x3de96f['_clearColo'+'r']['b'],_0x3de96f['_clearColo'+'r']['a']],'depth':_0x3de96f['_clearDept'+'h'],'stencil':_0x3de96f['_clearSten'+'cil'],'flags':_0x32c16d}),Q['popGpuMark'+'er'](_0x553dba);}}['setCamera'](_0x59d90e,_0x56fdc2,_0x3e086a,_0x174b16=null){this['setCameraU'+'niforms'](_0x59d90e,_0x56fdc2),this['clearView'](_0x59d90e,_0x56fdc2,_0x3e086a,!(-0x593+-0xd9e+0x1332));}['clearView'](_0x49b5d5,_0x585b94,_0x2eabcf,_0x29886f){const _0x52ceec=this['device'];if(Q['pushGpuMar'+'ker'](_0x52ceec,'CLEAR-VIEW'),_0x52ceec['setRenderT'+'arget'](_0x585b94),_0x52ceec['updateBegi'+'n'](),_0x29886f&&(_0x52ceec['setColorWr'+'ite'](!(0xc79+0x1567*0x1+-0x10f0*0x2),!(-0xdc1*0x2+-0xf17*0x1+0x885*0x5),!(-0x2*0x93a+-0x2d*-0x13+-0x35*-0x49),!(0x7c2+-0x2a*-0xdf+-0x2c58)),_0x52ceec['setDepthWr'+'ite'](!(0x19f4+0xa8e+-0x2482))),this['setupViewp'+'ort'](_0x49b5d5,_0x585b94),_0x2eabcf){const _0x986677=_0x49b5d5['_clearOpti'+'ons'];_0x52ceec['clear'](_0x986677||{'color':[_0x49b5d5['_clearColo'+'r']['r'],_0x49b5d5['_clearColo'+'r']['g'],_0x49b5d5['_clearColo'+'r']['b'],_0x49b5d5['_clearColo'+'r']['a']],'depth':_0x49b5d5['_clearDept'+'h'],'flags':(_0x49b5d5['_clearColo'+'rBuffer']?Fo:-0x2*0x101f+-0x107b*-0x1+0xfc3)|(_0x49b5d5['_clearDept'+'hBuffer']?No:0xd3a+0x44f+-0x1189*0x1)|(_0x49b5d5['_clearSten'+'cilBuffer']?Vc:0x19fd+0x2*0xb2+0xa3*-0x2b),'stencil':_0x49b5d5['_clearSten'+'cil']});}Q['popGpuMark'+'er'](_0x52ceec);}['setupCullM'+'ode'](_0x56e147,_0x2730f8,_0x9b6ee6){const _0x5cea40=_0x9b6ee6['material'];let _0x176f01=bt;if(_0x56e147){let _0x2a0bfa=-0x10bb+0x1*0x613+-0x1*-0xaa9;(_0x5cea40['cull']===wo||_0x5cea40['cull']===ca)&&(_0x2a0bfa=_0x2730f8*_0x9b6ee6['flipFacesF'+'actor']*_0x9b6ee6['node']['worldScale'+'Sign']),_0x2a0bfa<-0xcbb+0x2576+-0x18bb*0x1?_0x176f01=_0x5cea40['cull']===wo?ca:wo:_0x176f01=_0x5cea40['cull'];}this['device']['setCullMod'+'e'](_0x176f01),_0x176f01===bt&&_0x5cea40['cull']===bt&&this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](_0x9b6ee6['node']['worldScale'+'Sign']);}['updateCame'+'raFrustum'](_0x48c604){if(_0x48c604['xr']&&_0x48c604['xr']['views']['list']['length']){const _0x22f0a3=_0x48c604['xr']['views']['list'][-0xb3a+-0x1e2c+0x2966];rr['mul2'](_0x22f0a3['projMat'],_0x22f0a3['viewOffMat']),_0x48c604['frustum']['setFromMat'+'4'](rr);return;}const _0x3ba9bc=_0x48c604['projection'+'Matrix'];if(_0x48c604['calculateP'+'rojection']&&_0x48c604['calculateP'+'rojection'](_0x3ba9bc,zl),_0x48c604['calculateT'+'ransform'])_0x48c604['calculateT'+'ransform'](ar,zl);else{const _0x409ea6=_0x48c604['_node']['getPositio'+'n'](),_0x16a318=_0x48c604['_node']['getRotatio'+'n']();ar['setTRS'](_0x409ea6,_0x16a318,D['ONE']),this['viewInvId']['setValue'](ar['data']);}Ma['copy'](ar)['invert'](),rr['mul2'](_0x3ba9bc,Ma),_0x48c604['frustum']['setFromMat'+'4'](rr);}['setBaseCon'+'stants'](_0xb7d94e,_0x3b7bb8){_0xb7d94e['setCullMod'+'e'](_0x3b7bb8['cull']),_0x3b7bb8['opacityMap']&&this['opacityMap'+'Id']['setValue'](_0x3b7bb8['opacityMap']),(_0x3b7bb8['opacityMap']||_0x3b7bb8['alphaTest']>0x1394+-0x2173*-0x1+0xb5*-0x4b)&&this['alphaTestI'+'d']['setValue'](_0x3b7bb8['alphaTest']);}['updateCpuS'+'kinMatrice'+'s'](_0x4efe10){kd++;const _0x702603=_0x4efe10['length'];if(_0x702603===0x19d1+0x1531+-0x2f02)return;const _0xa191c4=de();for(let _0x3f3fc8=-0x41*-0x4d+-0x1e01*0x1+0xa74;_0x3f3fc8<_0x702603;_0x3f3fc8++){const _0x365dc4=_0x4efe10[_0x3f3fc8]['skinInstan'+'ce'];_0x365dc4&&(_0x365dc4['updateMatr'+'ices'](_0x4efe10[_0x3f3fc8]['node'],kd),_0x365dc4['_dirty']=!(-0x21d6+-0x125*0x1b+0x40bd));}this['_skinTime']+=de()-_0xa191c4;}['updateGpuS'+'kinMatrice'+'s'](_0x4f8965){const _0x1304da=de();for(const _0x59d510 of _0x4f8965){const _0x44bd23=_0x59d510['skinInstan'+'ce'];_0x44bd23&&_0x44bd23['_dirty']&&(_0x44bd23['updateMatr'+'ixPalette'](_0x59d510['node'],kd),_0x44bd23['_dirty']=!(0x2392+-0x224c+0x41*-0x5));}this['_skinTime']+=de()-_0x1304da;}['updateMorp'+'hing'](_0x75d2d0){const _0xc91fc1=de();for(const _0x1c8a4e of _0x75d2d0){const _0x1007d3=_0x1c8a4e['morphInsta'+'nce'];_0x1007d3&&_0x1007d3['_dirty']&&_0x1007d3['update']();}this['_morphTime']+=de()-_0xc91fc1;}['updateGSpl'+'ats'](_0x54eb87){var _0x1da505;for(const _0x26fa6b of _0x54eb87)(_0x1da505=_0x26fa6b['gsplatInst'+'ance'])==null||_0x1da505['update']();}['gpuUpdate'](_0x1dda3b){this['updateGpuS'+'kinMatrice'+'s'](_0x1dda3b),this['updateMorp'+'hing'](_0x1dda3b),this['updateGSpl'+'ats'](_0x1dda3b);}['setVertexB'+'uffers'](_0x4dd773,_0x43cb21){_0x4dd773['setVertexB'+'uffer'](_0x43cb21['vertexBuff'+'er']);}['setMorphin'+'g'](_0x4e89b8,_0x3b8f45){_0x3b8f45&&(_0x3b8f45['prepareRen'+'dering'](_0x4e89b8),_0x4e89b8['setVertexB'+'uffer'](_0x3b8f45['morph']['vertexBuff'+'erIds']),this['morphPosit'+'ionTex']['setValue'](_0x3b8f45['texturePos'+'itions']),this['morphNorma'+'lTex']['setValue'](_0x3b8f45['textureNor'+'mals']),this['morphTexPa'+'rams']['setValue'](_0x3b8f45['_texturePa'+'rams']));}['setSkinnin'+'g'](_0x2ff2cc,_0x25ae0a){const _0x49bfd5=_0x25ae0a['skinInstan'+'ce'];if(_0x49bfd5){this['_skinDrawC'+'alls']++;const _0x3a5760=_0x49bfd5['boneTextur'+'e'];this['boneTextur'+'eId']['setValue'](_0x3a5760);}}['dispatchVi'+'ewPos'](_0x1dd7d4){const _0x27ca0b=this['viewPos'];_0x27ca0b[-0x4cd*-0x8+0x115e+-0x37c6]=_0x1dd7d4['x'],_0x27ca0b[0xf9*0x13+-0x6a4+0x2*-0x5eb]=_0x1dd7d4['y'],_0x27ca0b[0x1*0x17ab+0x2477+-0x3c20]=_0x1dd7d4['z'],this['viewPosId']['setValue'](_0x27ca0b);}['initViewBi'+'ndGroupFor'+'mat'](_0xee6f03){if(this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']){const _0x2a61e8=[new dt('matrix_vie'+'w',li),new dt('matrix_vie'+'wInverse',li),new dt('matrix_pro'+'jection',li),new dt('matrix_pro'+'jectionSky'+'box',li),new dt('matrix_vie'+'wProjectio'+'n',li),new dt('matrix_vie'+'w3',Cn),new dt('cubeMapRot'+'ationMatri'+'x',Cn),new dt('view_posit'+'ion',ds),new dt('skyboxInte'+'nsity',$s),new dt('exposure',$s),new dt('textureBia'+'s',$s),new dt('view_index',$s)];_0xee6f03&&_0x2a61e8['push'](new dt('clusterCel'+'lsCountByB'+'oundsSize',ds),new dt('clusterTex'+'tureSize',ds),new dt('clusterBou'+'ndsMin',ds),new dt('clusterBou'+'ndsDelta',ds),new dt('clusterCel'+'lsDot',ds),new dt('clusterCel'+'lsMax',ds),new dt('shadowAtla'+'sParams',fa),new dt('clusterMax'+'Cells',da),new dt('clusterSki'+'p',$s)),this['viewUnifor'+'mFormat']=new ry(this['device'],_0x2a61e8);const _0x511893=[new hp(cp,lp|HS)];this['viewBindGr'+'oupFormat']=new ey(this['device'],_0x511893);}}['setupViewU'+'niforms'](_0x346d59,_0x72ae06){this['projId']['setValue'](_0x346d59['projMat']['data']),this['projSkybox'+'Id']['setValue'](_0x346d59['projMat']['data']),this['viewId']['setValue'](_0x346d59['viewOffMat']['data']),this['viewInvId']['setValue'](_0x346d59['viewInvOff'+'Mat']['data']),this['viewId3']['setValue'](_0x346d59['viewMat3']['data']),this['viewProjId']['setValue'](_0x346d59['projViewOf'+'fMat']['data']),this['viewPosId']['setValue'](_0x346d59['positionDa'+'ta']),this['viewIndexI'+'d']['setValue'](_0x72ae06);}['setupViewU'+'niformBuff'+'ers'](_0x373550,_0x31f8ec,_0x51a0c4,_0x14a07b){w['assert'](Array['isArray'](_0x373550),'viewBindGr'+'oups\x20must\x20'+'be\x20an\x20arra'+'y');const {device:_0x1bc9da}=this,_0x448c91=(_0x14a07b==null?void(-0x2467*-0x1+0x1b4b+-0x3e*0x107):_0x14a07b['length'])??0x7*-0x417+0x21b5+-0x513;for(;_0x373550['length']<_0x448c91;){const _0x1ab349=new up(_0x1bc9da,_0x31f8ec,!(-0x1*-0x51f+0x336+-0x34*0x29)),_0x3a4767=new dp(_0x1bc9da,_0x51a0c4,_0x1ab349);ya['setName'](_0x3a4767,'ViewBindGr'+'oup_'+_0x3a4767['id']),_0x373550['push'](_0x3a4767);}if(_0x14a07b)for(let _0x1ddb01=0x1*-0x1f9+0x19f4+-0x17fb;_0x1ddb01<_0x448c91;_0x1ddb01++){const _0x4f3890=_0x14a07b[_0x1ddb01];this['setupViewU'+'niforms'](_0x4f3890,_0x1ddb01);const _0x39750a=_0x373550[_0x1ddb01];_0x39750a['defaultUni'+'formBuffer']['update'](),_0x39750a['update']();}else{const _0x505082=_0x373550[-0x14cb+-0x182*0x8+0x20db];_0x505082['defaultUni'+'formBuffer']['update'](),_0x505082['update']();}_0x14a07b||_0x1bc9da['setBindGro'+'up']($o,_0x373550[-0x2455+0x20*0xa2+0x1015]);}['setupMeshU'+'niformBuff'+'ers'](_0x707584){const _0x9295b3=this['device'];if(_0x9295b3['supportsUn'+'iformBuffe'+'rs']){const _0x554b7d=_0x707584['getBindGro'+'up'](_0x9295b3);_0x554b7d['update'](),_0x9295b3['setBindGro'+'up'](QS,_0x554b7d),_0x707584['getUniform'+'Buffer'](_0x9295b3)['update'](Vd),_0x9295b3['setBindGro'+'up'](Df,Vd['bindGroup'],Vd['offsets']);}}['setMeshIns'+'tanceMatri'+'ces'](_0x397a0c,_0x4ab61b=!(0x130*-0x11+-0x1cfc+0x312d)){const _0x47e604=_0x397a0c['node']['worldTrans'+'form'];this['modelMatri'+'xId']['setValue'](_0x47e604['data']),_0x4ab61b&&this['normalMatr'+'ixId']['setValue'](_0x397a0c['node']['normalMatr'+'ix']['data']);}['cull'](_0x2e12e6,_0x4a39c5,_0x101532){const _0x106854=de(),_0x4f3a94=_0x101532['opaque'];_0x4f3a94['length']=-0x2134+0x1e00+-0xa*-0x52;const _0x120c4f=_0x101532['transparen'+'t'];_0x120c4f['length']=0x394*-0xa+-0x17d7+0x3b9f;const _0x454f44=_0x2e12e6['frustumCul'+'ling'],_0x1d0e7e=_0x4a39c5['length'];for(let _0x336c36=0x115*0x3+-0x18dd+0x159e;_0x336c36<_0x1d0e7e;_0x336c36++){const _0x3c9b55=_0x4a39c5[_0x336c36];_0x3c9b55['visible']&&(!_0x454f44||!_0x3c9b55['cull']||_0x3c9b55['_isVisible'](_0x2e12e6))&&(_0x3c9b55['visibleThi'+'sFrame']=!(0x31a+0x2089+-0x23a3),(_0x3c9b55['transparen'+'t']?_0x120c4f:_0x4f3a94)['push'](_0x3c9b55),(_0x3c9b55['skinInstan'+'ce']||_0x3c9b55['morphInsta'+'nce']||_0x3c9b55['gsplatInst'+'ance'])&&(this['processing'+'MeshInstan'+'ces']['add'](_0x3c9b55),_0x3c9b55['gsplatInst'+'ance']&&_0x3c9b55['gsplatInst'+'ance']['cameras']['push'](_0x2e12e6)));}this['_cullTime']+=de()-_0x106854,this['_numDrawCa'+'llsCulled']+=_0x454f44?_0x1d0e7e:-0x1468*-0x1+-0x207f*0x1+0xc17;}['collectLig'+'hts'](_0x36039b){this['lights']['length']=-0x43c*-0x2+0xba6+-0x19*0xce,this['localLight'+'s']['length']=0x1*-0x22b3+-0x1a93*-0x1+0x820;const _0x145c79=this['scene']['_stats'];_0x145c79['dynamicLig'+'hts']=-0x4*-0x923+-0x17c*0x4+-0x1e9c,_0x145c79['bakedLight'+'s']=0xc2*0x7+0x14e6+-0x1a34;const _0x164f87=_0x36039b['layerList']['length'];for(let _0x3ebea0=-0x1fe1+0x1a1+0x1e40;_0x3ebea0<_0x164f87;_0x3ebea0++){const _0x3dd5f1=_0x36039b['layerList'][_0x3ebea0];if(!zd['has'](_0x3dd5f1)){zd['add'](_0x3dd5f1);const _0x231369=_0x3dd5f1['_lights'];for(let _0x1f5821=-0x13c8*0x1+-0x2031+0x33f9;_0x1f5821<_0x231369['length'];_0x1f5821++){const _0x33bb3b=_0x231369[_0x1f5821];Bd['has'](_0x33bb3b)||(Bd['add'](_0x33bb3b),this['lights']['push'](_0x33bb3b),_0x33bb3b['_type']!==ve&&this['localLight'+'s']['push'](_0x33bb3b),(_0x33bb3b['mask']&Ss||_0x33bb3b['mask']&di)&&_0x145c79['dynamicLig'+'hts']++,_0x33bb3b['mask']&fi&&_0x145c79['bakedLight'+'s']++);}}}_0x145c79['lights']=this['lights']['length'],Bd['clear'](),zd['clear']();}['cullLights'](_0xfb8927,_0x323e84){const _0x1974e4=this['scene']['clusteredL'+'ightingEna'+'bled'],_0xa3fe9c=this['scene']['physicalUn'+'its'];for(let _0x49c560=-0x937+-0x2*0x8fe+0xd3*0x21;_0x49c560<_0x323e84['length'];_0x49c560++){const _0x4178a2=_0x323e84[_0x49c560];if(_0x4178a2['enabled']){if(_0x4178a2['_type']!==ve){if(_0x4178a2['getBoundin'+'gSphere'](Ud),_0xfb8927['frustum']['containsSp'+'here'](Ud)){_0x4178a2['visibleThi'+'sFrame']=!(-0x4df*-0x2+0x37*0x11+0x7f*-0x1b),_0x4178a2['usePhysica'+'lUnits']=_0xa3fe9c;const _0x23ad1b=_0xfb8927['getScreenS'+'ize'](Ud);_0x4178a2['maxScreenS'+'ize']=Math['max'](_0x4178a2['maxScreenS'+'ize'],_0x23ad1b);}else _0x1974e4||_0x4178a2['castShadow'+'s']&&!_0x4178a2['shadowMap']&&(_0x4178a2['visibleThi'+'sFrame']=!(-0x1bf0+-0xb5*-0x1f+-0x1*-0x605));}else _0x4178a2['usePhysica'+'lUnits']=this['scene']['physicalUn'+'its'];}}}['cullShadow'+'maps'](_0x3d6be3){const _0x309cec=this['scene']['clusteredL'+'ightingEna'+'bled'];for(let _0x48efd4=0x16b*0x13+-0x5*-0x91+-0x1dc6;_0x48efd4<this['localLight'+'s']['length'];_0x48efd4++){const _0x766b93=this['localLight'+'s'][_0x48efd4];_0x766b93['_type']!==ve&&(_0x309cec?_0x766b93['atlasSlotU'+'pdated']&&_0x766b93['shadowUpda'+'teMode']===Ps&&(_0x766b93['shadowUpda'+'teMode']=gr):_0x766b93['shadowUpda'+'teMode']===Ps&&_0x766b93['castShadow'+'s']&&(_0x766b93['getRenderD'+'ata'](null,0x25f*-0xb+0x240a+-0x9f5)['shadowCame'+'ra']['renderTarg'+'et']||(_0x766b93['shadowUpda'+'teMode']=gr)),_0x766b93['visibleThi'+'sFrame']&&_0x766b93['castShadow'+'s']&&_0x766b93['shadowUpda'+'teMode']!==Ps&&this['_shadowRen'+'dererLocal']['cull'](_0x766b93,_0x3d6be3));}this['cameraDirS'+'hadowLight'+'s']['clear']();const _0x1c2e8f=_0x3d6be3['cameras'];for(let _0x349868=-0x8*-0x4f+0xe6+0x1*-0x35e;_0x349868<_0x1c2e8f['length'];_0x349868++){const _0x2e07eb=_0x1c2e8f[_0x349868];if(_0x2e07eb['enabled']){const _0xa5ac18=_0x2e07eb['camera'];let _0x5fb677;const _0x514ad2=_0xa5ac18['layers'];for(let _0x30a7de=-0x1ffd+0x269d+-0x6a0;_0x30a7de<_0x514ad2['length'];_0x30a7de++){const _0x5a925e=_0x3d6be3['getLayerBy'+'Id'](_0x514ad2[_0x30a7de]);if(_0x5a925e){const _0x19c825=_0x5a925e['splitLight'+'s'][ve];for(let _0x4127fd=0xf1*-0x7+-0x1*0x21a9+0x2840;_0x4127fd<_0x19c825['length'];_0x4127fd++){const _0x59c0a4=_0x19c825[_0x4127fd];_0x59c0a4['castShadow'+'s']&&!Da['has'](_0x59c0a4)&&(Da['add'](_0x59c0a4),_0x5fb677=_0x5fb677??[],_0x5fb677['push'](_0x59c0a4),this['_shadowRen'+'dererDirec'+'tional']['cull'](_0x59c0a4,_0x3d6be3,_0xa5ac18));}}}_0x5fb677&&this['cameraDirS'+'hadowLight'+'s']['set'](_0xa5ac18,_0x5fb677),Da['clear']();}}}['cullCompos'+'ition'](_0x4dd977){const _0x28f0fd=de(),{scene:_0x59ccf9}=this;this['processing'+'MeshInstan'+'ces']['clear']();const _0x1176e2=_0x4dd977['cameras']['length'];this['_camerasRe'+'ndered']+=_0x1176e2;for(let _0x5b5907=-0x137c+0x1*-0xb4b+0x1ec7;_0x5b5907<_0x1176e2;_0x5b5907++){const _0xa6e3f6=_0x4dd977['cameras'][_0x5b5907];_0x59ccf9==null||_0x59ccf9['fire'](Ry,_0xa6e3f6);const _0x21dbff=_0xa6e3f6['renderTarg'+'et'];_0xa6e3f6['frameUpdat'+'e'](_0x21dbff),this['updateCame'+'raFrustum'](_0xa6e3f6['camera']);const _0x2c6115=_0xa6e3f6['layers'];for(let _0x48874f=-0x1d*-0xdd+0x19c4+-0x32cd;_0x48874f<_0x2c6115['length'];_0x48874f++){const _0x3f238f=_0x4dd977['getLayerBy'+'Id'](_0x2c6115[_0x48874f]);if(_0x3f238f&&_0x3f238f['enabled']){this['cullLights'](_0xa6e3f6['camera'],_0x3f238f['_lights']);const _0x3e6a7f=_0x3f238f['getCulledI'+'nstances'](_0xa6e3f6['camera']);this['cull'](_0xa6e3f6['camera'],_0x3f238f['meshInstan'+'ces'],_0x3e6a7f);}}_0x59ccf9==null||_0x59ccf9['fire'](Oy,_0xa6e3f6);}_0x59ccf9['clusteredL'+'ightingEna'+'bled']&&this['updateLigh'+'tTextureAt'+'las'](),this['cullShadow'+'maps'](_0x4dd977),_0x59ccf9==null||_0x59ccf9['fire'](Aw),this['_cullTime']+=de()-_0x28f0fd;}['updateShad'+'ers'](_0x39258d,_0x351c46){const _0x84edcc=_0x39258d['length'];for(let _0x449d59=0x1232*0x2+0x24*0xf5+-0x46d8;_0x449d59<_0x84edcc;_0x449d59++){const _0x4b605d=_0x39258d[_0x449d59]['material'];if(_0x4b605d&&!Da['has'](_0x4b605d)&&(Da['add'](_0x4b605d),_0x4b605d['getShaderV'+'ariant']!==er['prototype']['getShaderV'+'ariant'])){if(_0x351c46&&(!_0x4b605d['useLightin'+'g']||_0x4b605d['emitter']&&!_0x4b605d['emitter']['lighting']))continue;_0x4b605d['clearVaria'+'nts']();}}Da['clear']();}['updateFram'+'eUniforms'](){this['blueNoiseT'+'extureId']['setValue'](XE(this['device']));}['beginFrame'](_0x17e92b){const _0x568e05=this['scene'],_0x95d9aa=_0x568e05['updateShad'+'ers']||this['device']['_shadersDi'+'rty'];let _0x19c85b=0xfdb+0x352+-0x132d;const _0x10935f=_0x17e92b['layerList'],_0x294dd8=_0x10935f['length'];for(let _0x19e419=0xbcb*0x1+-0x1e9d+0x12d2;_0x19e419<_0x294dd8;_0x19e419++){const _0x1d0ce6=_0x10935f[_0x19e419]['meshInstan'+'ces'],_0xd5ec97=_0x1d0ce6['length'];_0x19c85b+=_0xd5ec97;for(let _0x1dab25=0x1149+0x2264+-0x33ad*0x1;_0x1dab25<_0xd5ec97;_0x1dab25++){const _0x2f8112=_0x1d0ce6[_0x1dab25];_0x2f8112['visibleThi'+'sFrame']=!(-0x5*-0x6b6+-0xd9e+-0x13ef),_0x95d9aa&&Gd['push'](_0x2f8112),_0x2f8112['skinInstan'+'ce']&&Hd['push'](_0x2f8112);}}if(_0x568e05['_stats']['meshInstan'+'ces']=_0x19c85b,_0x95d9aa){const _0x329fb2=!_0x568e05['updateShad'+'ers']||!this['device']['_shadersDi'+'rty'];this['updateShad'+'ers'](Gd,_0x329fb2),_0x568e05['updateShad'+'ers']=!(0xf89*-0x2+0x1f02+0x1*0x11),this['device']['_shadersDi'+'rty']=!(-0x62b*-0x3+-0x26b+-0x1015),_0x568e05['_shaderVer'+'sion']++;}this['updateFram'+'eUniforms'](),this['updateCpuS'+'kinMatrice'+'s'](Hd),Gd['length']=0x60*0x5b+0x15e1+-0x51*0xb1,Hd['length']=-0x1f13+0x2603+0x1*-0x6f0;const _0x1f9eae=this['lights'],_0x2a75c3=_0x1f9eae['length'];for(let _0x403ad6=0x14fe+0x4e*0x45+0xa81*-0x4;_0x403ad6<_0x2a75c3;_0x403ad6++)_0x1f9eae[_0x403ad6]['beginFrame']();}['updateLigh'+'tTextureAt'+'las'](){this['lightTextu'+'reAtlas']['update'](this['localLight'+'s'],this['scene']['lighting']);}['updateLaye'+'rCompositi'+'on'](_0x1508a2){const _0x38be42=de(),_0x387d82=_0x1508a2['layerList']['length'],_0xb02283=this['scene']['_shaderVer'+'sion'];for(let _0x2bf58f=-0x3*-0x113+-0x416*0x7+0x1961;_0x2bf58f<_0x387d82;_0x2bf58f++){const _0x2a1129=_0x1508a2['layerList'][_0x2bf58f];_0x2a1129['_shaderVer'+'sion']=_0xb02283,_0x2a1129['_skipRende'+'rCounter']=-0x2d*-0xd+-0x25*-0x67+0x1*-0x112c,_0x2a1129['_forwardDr'+'awCalls']=0x1851+-0x24fa+-0x1*-0xca9,_0x2a1129['_shadowDra'+'wCalls']=0x1cba+-0x220c+0x552*0x1,_0x2a1129['_renderTim'+'e']=0x21c9+0x4*0x92f+0x1*-0x4685;}_0x1508a2['_update'](),this['_layerComp'+'ositionUpd'+'ateTime']+=de()-_0x38be42;}['frameUpdat'+'e'](){this['clustersDe'+'bugRendere'+'d']=!(0x445*-0x2+-0x27*0x53+0x1530),this['initViewBi'+'ndGroupFor'+'mat'](this['scene']['clusteredL'+'ightingEna'+'bled']),this['dirLightSh'+'adows']['clear']();}}class Xy{constructor(){h(this,'camera',null),(this['layer']=null,this['transparen'+'t']=!(0x1b5e+0x16fc+-0x3259*0x1),this['renderTarg'+'et']=null,this['lightClust'+'ers']=null,this['clearColor']=!(-0x1d*0xa9+0xe72+0x4b4),this['clearDepth']=!(0x4*0x335+-0x26*-0x8c+-0x219b),this['clearStenc'+'il']=!(0x243d+0x1*0x1bea+0x66*-0xa1),this['triggerPos'+'tprocess']=!(0x280+-0x9d5*0x1+0x756),this['firstCamer'+'aUse']=!(0x1*-0x9be+0x1f79+-0x15ba),this['lastCamera'+'Use']=!(-0x1e37+-0x5*-0x529+0x46b),this['viewBindGr'+'oups']=[],this['useCameraP'+'asses']=!(0x5*-0x523+-0x1446+0x35*0xde));}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x356194=>{_0x356194['defaultUni'+'formBuffer']['destroy'](),_0x356194['destroy']();}),this['viewBindGr'+'oups']['length']=-0x25b6+-0x1a44+0x3ffa;}['setupClear'+'s'](_0x1a19cc,_0x2bdb9d){this['clearColor']=(_0x1a19cc==null?void(0xb*-0x2f5+-0x257*0x1+0x22de):_0x1a19cc['clearColor'+'Buffer'])||_0x2bdb9d['clearColor'+'Buffer'],this['clearDepth']=(_0x1a19cc==null?void(-0x1008+-0x359*0x4+0x1d6c):_0x1a19cc['clearDepth'+'Buffer'])||_0x2bdb9d['clearDepth'+'Buffer'],this['clearStenc'+'il']=(_0x1a19cc==null?void(-0x1784+-0x1e36+0x35ba):_0x1a19cc['clearStenc'+'ilBuffer'])||_0x2bdb9d['clearStenc'+'ilBuffer'];}}class pb extends ys{constructor(_0x3d378b,_0x579210,_0x42d107,_0x419859){super(_0x3d378b),h(this,'layerCompo'+'sition'),h(this,'scene'),h(this,'renderer'),h(this,'renderActi'+'ons',[]),h(this,'gammaCorre'+'ction'),h(this,'toneMappin'+'g'),h(this,'noDepthCle'+'ar',!(0x1158+0x7f*0x1d+-0x1fba*0x1)),(this['layerCompo'+'sition']=_0x579210,this['scene']=_0x42d107,this['renderer']=_0x419859);}get['rendersAny'+'thing'](){return this['renderActi'+'ons']['length']>0xc7f+-0xf39+0x2ba*0x1;}['addRenderA'+'ction'](_0xcb0d89){this['renderActi'+'ons']['push'](_0xcb0d89);}['addLayer'](_0x2d43ef,_0x375419,_0x436dd6,_0xce2b5=!(-0xcf1*0x2+-0x91b+0x22fd)){w['assert'](_0x2d43ef),w['assert'](this['renderTarg'+'et']!==void(0x1f5e+0x347*0xb+0xb*-0x621),'Render\x20pas'+'s\x20needs\x20to'+'\x20be\x20initia'+'lized\x20befo'+'re\x20adding\x20'+'layers'),w['assert'](_0x2d43ef['camera']['layersSet']['has'](_0x375419['id']),'Camera\x20'+_0x2d43ef['entity']['name']+('\x20does\x20not\x20'+'render\x20lay'+'er\x20')+_0x375419['name']+'.');const _0x2ec373=new Xy();if(_0x2ec373['renderTarg'+'et']=this['renderTarg'+'et'],_0x2ec373['camera']=_0x2d43ef,_0x2ec373['layer']=_0x375419,_0x2ec373['transparen'+'t']=_0x436dd6,_0xce2b5){const _0x35e832=this['renderActi'+'ons']['length']===-0xa1*-0xc+0x42e*-0x8+0x19e4;_0x2ec373['setupClear'+'s'](_0x35e832?_0x2d43ef:void(0x1385+-0xf74+0x1*-0x411),_0x375419);}this['addRenderA'+'ction'](_0x2ec373);}['addLayers'](_0x5663e5,_0x3c1ceb,_0x3836ca,_0x5f22d2,_0x290028,_0x4e17db=!(-0xaa*-0x2b+-0x23f6*-0x1+-0x4084)){const {layerList:_0x529650,subLayerList:_0x25672c}=_0x5663e5;let _0x1c2eda=_0x5f22d2,_0x2a2cb3=_0x3836ca;for(;_0x2a2cb3<_0x529650['length'];){const _0x425849=_0x529650[_0x2a2cb3],_0x36196e=_0x25672c[_0x2a2cb3];if(_0x3c1ceb['camera']['layersSet']['has'](_0x425849['id'])&&(this['addLayer'](_0x3c1ceb,_0x425849,_0x36196e,_0x1c2eda),_0x1c2eda=!(-0x4*0x2f2+-0x1326+-0x1*-0x1eef)),_0x2a2cb3++,_0x425849['id']===_0x290028&&_0x36196e===_0x4e17db)break;}return _0x2a2cb3;}['updateDire'+'ctionalSha'+'dows'](){const {renderer:_0x1270fb,renderActions:_0x4c54b6}=this;for(let _0x4abeee=0x211+-0x4*-0x100+0x611*-0x1;_0x4abeee<_0x4c54b6['length'];_0x4abeee++){const _0x7d6902=_0x4c54b6[_0x4abeee]['camera']['camera'],_0x117ace=this['renderer']['cameraDirS'+'hadowLight'+'s']['get'](_0x7d6902);if(_0x117ace)for(let _0x2e33c3=-0xb*-0x35b+0x67f+-0x39e*0xc;_0x2e33c3<_0x117ace['length'];_0x2e33c3++){const _0x33a420=_0x117ace[_0x2e33c3];if(_0x1270fb['dirLightSh'+'adows']['get'](_0x33a420)!==_0x7d6902){_0x1270fb['dirLightSh'+'adows']['set'](_0x33a420,_0x7d6902);const _0x45586a=_0x1270fb['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x33a420,_0x7d6902);_0x45586a&&this['beforePass'+'es']['push'](_0x45586a);}}}}['updateClea'+'rs'](){const _0x3d261d=this['renderActi'+'ons'][-0xfa1+-0x25dd+-0x357e*-0x1];if(_0x3d261d){const _0x2eb8c9=_0x3d261d['camera']['camera'],_0x513827=_0x2eb8c9['fullSizeCl'+'earRect'];this['setClearCo'+'lor'](_0x513827&&_0x3d261d['clearColor']?_0x2eb8c9['clearColor']:void(0x11df+0x5a8*0x1+-0x1787*0x1)),this['setClearDe'+'pth'](_0x513827&&_0x3d261d['clearDepth']&&!this['noDepthCle'+'ar']?_0x2eb8c9['clearDepth']:void(-0x22*0x1f+-0x1bb3*0x1+0x1fd1)),this['setClearSt'+'encil'](_0x513827&&_0x3d261d['clearStenc'+'il']?_0x2eb8c9['clearStenc'+'il']:void(-0x1406*0x1+-0xa6d+0x5*0x617));}}['frameUpdat'+'e'](){super['frameUpdat'+'e'](),this['updateDire'+'ctionalSha'+'dows'](),this['updateClea'+'rs']();}['before'](){const {renderActions:_0xcef1b0}=this;for(let _0x235061=-0x14e2+-0x2235+0x3717;_0x235061<_0xcef1b0['length'];_0x235061++){const _0x1a78d5=_0xcef1b0[_0x235061];_0x1a78d5['firstCamer'+'aUse']&&this['scene']['fire'](Tw,_0x1a78d5['camera']);}}['execute'](){const {layerComposition:_0x47422f,renderActions:_0x514f7e}=this;for(let _0x47e96b=0x9c+-0x1*0x495+0x153*0x3;_0x47e96b<_0x514f7e['length'];_0x47e96b++){const _0x212fa5=_0x514f7e[_0x47e96b],_0x1b76b7=_0x212fa5['layer'];w['call'](()=>{_0x47422f['getLayerBy'+'Name'](_0x1b76b7['name'])||w['warnOnce']('Layer\x20'+_0x1b76b7['name']+('\x20is\x20not\x20fo'+'und\x20in\x20the'+'\x20scene\x20and'+'\x20will\x20not\x20'+'be\x20rendere'+'d.\x20Your\x20re'+'nder\x20pass\x20'+'setup\x20migh'+'t\x20need\x20to\x20'+'be\x20updated'+'.'));}),_0x47422f['isEnabled'](_0x1b76b7,_0x212fa5['transparen'+'t'])&&this['renderRend'+'erAction'](_0x212fa5,_0x47e96b===0x6ed+0x967*-0x4+0x1eaf*0x1);}}['after'](){for(let _0x3d37cc=-0x43a+-0x1481+-0x1*-0x18bb;_0x3d37cc<this['renderActi'+'ons']['length'];_0x3d37cc++){const _0x2466a5=this['renderActi'+'ons'][_0x3d37cc];_0x2466a5['lastCamera'+'Use']&&this['scene']['fire'](ww,_0x2466a5['camera']);}this['beforePass'+'es']['length']=0x217e+-0x1*0x191+-0x1fed;}['renderRend'+'erAction'](_0x8fa7a7,_0xaba0cf){var _0x45d0da;const {renderer:_0x5b8bb7,scene:_0x473e42}=this,_0xd68405=_0x5b8bb7['device'],{layer:_0x57eae2,transparent:_0x42534a,camera:_0x121b04}=_0x8fa7a7;Q['pushGpuMar'+'ker'](this['device'],'Camera:\x20'+(_0x121b04?_0x121b04['entity']['name']:'Unnamed')+',\x20Layer:\x20'+_0x57eae2['name']+'('+(_0x42534a?'TRANSP':'OPAQUE')+')');const _0xc63959=de();if(_0x121b04){const _0x3b4413=_0x121b04['gammaCorre'+'ction'],_0x525c0a=_0x121b04['toneMappin'+'g'];this['gammaCorre'+'ction']!==void(0xa*0x47+0x15cf+-0xd9*0x1d)&&(_0x121b04['gammaCorre'+'ction']=this['gammaCorre'+'ction']),this['toneMappin'+'g']!==void(-0x4*-0x5d5+-0x7*-0x397+-0x1027*0x3)&&(_0x121b04['toneMappin'+'g']=this['toneMappin'+'g']),_0x473e42['fire'](Ew,_0x121b04,_0x57eae2,_0x42534a);const _0x7fa0eb={'lightClusters':_0x8fa7a7['lightClust'+'ers']},_0x1b1b34=((_0x45d0da=_0x121b04['camera']['shaderPass'+'Info'])==null?void(-0xbd*-0x10+-0x9*-0x10b+0x711*-0x3):_0x45d0da['index'])??xa;(!_0xaba0cf||!_0x121b04['camera']['fullSizeCl'+'earRect'])&&(_0x7fa0eb['clearColor']=_0x8fa7a7['clearColor'],_0x7fa0eb['clearDepth']=_0x8fa7a7['clearDepth'],_0x7fa0eb['clearStenc'+'il']=_0x8fa7a7['clearStenc'+'il']);const _0x27871c=_0x8fa7a7['renderTarg'+'et']??_0xd68405['backBuffer'];_0x5b8bb7['renderForw'+'ardLayer'](_0x121b04['camera'],_0x27871c,_0x57eae2,_0x42534a,_0x1b1b34,_0x8fa7a7['viewBindGr'+'oups'],_0x7fa0eb),_0xd68405['setBlendSt'+'ate'](pt['NOBLEND']),_0xd68405['setStencil'+'State'](null,null),_0xd68405['setAlphaTo'+'Coverage'](!(0x761+-0x1e4*-0xf+-0x23bc)),_0x473e42['fire'](bw,_0x121b04,_0x57eae2,_0x42534a),this['gammaCorre'+'ction']!==void(0x1*0x18d9+0x3d*0x61+-0x2ff6)&&(_0x121b04['gammaCorre'+'ction']=_0x3b4413),this['toneMappin'+'g']!==void(-0x5*0x6ad+0x5fd+0x1b64)&&(_0x121b04['toneMappin'+'g']=_0x525c0a);}Q['popGpuMark'+'er'](this['device']),_0x57eae2['_renderTim'+'e']+=de()-_0xc63959;}['log'](_0x1ef084,_0x5216ab){if(super['log'](_0x1ef084,_0x5216ab),mi['get'](tn)){const {layerComposition:_0xd9cb92}=this;this['renderActi'+'ons']['forEach']((_0x3cd925,_0x530db8)=>{const _0x51d0c2=_0x3cd925['layer'],_0x1befb0=_0x51d0c2['enabled']&&_0xd9cb92['isEnabled'](_0x51d0c2,_0x3cd925['transparen'+'t']),_0x3244f1=_0x3cd925['camera'];w['trace'](tn,'\x20\x20\x20\x20'+_0x530db8+':'+('\x20Cam:\x20'+(_0x3244f1?_0x3244f1['entity']['name']:'-'))['padEnd'](0x20b*0x2+0x1*-0x395+-0x6b,'\x20')+('\x20Lay:\x20'+_0x51d0c2['name'])['padEnd'](-0x359+0x4*-0x31+0x1*0x433,'\x20')+(_0x3cd925['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x1befb0?'\x20ENABLED':'\x20DISABLED')+('\x20Meshes:\x20'+_0x51d0c2['meshInstan'+'ces']['length'])['padEnd'](-0x1*-0x6df+-0x24b0+0x1dd6,'\x20'));});}}}class mb extends ys{constructor(_0x1e2616,_0x400afe,_0x464bc0){super(_0x1e2616),this['renderer']=_0x400afe,this['renderActi'+'on']=_0x464bc0,this['requiresCu'+'bemaps']=!(0xacb+0x1b26+-0x25f0);}['execute'](){const _0x405e5d=this['renderActi'+'on'],_0x28538a=_0x405e5d['camera'];w['assert'](_0x405e5d['triggerPos'+'tprocess']&&_0x28538a['onPostproc'+'essing']),_0x28538a['onPostproc'+'essing']();}}const _b=[[],[],[]],nr=new ie(),Lr={'drawCalls':[],'shaderInstances':[],'isNewMaterial':[],'lightMaskChanged':[],'clear':function(){this['drawCalls']['length']=-0xe94+-0x1*0x1a2f+0x28c3*0x1,this['shaderInst'+'ances']['length']=0xa46+-0x1*0xab7+0x71,this['isNewMater'+'ial']['length']=-0x1948+-0x18a7+0x31ef,this['lightMaskC'+'hanged']['length']=0xdcc+0x7*-0x3c1+0xc7b;}};function gb(_0x422a4e){const _0x2da88a=[];for(let _0x8eb8c9=0x2*0x649+-0x966*0x4+0x1*0x1906;_0x8eb8c9<_0x422a4e;++_0x8eb8c9){const _0x32e29e=Math['sqrt'](_0x8eb8c9+(0x4*0x484+-0x26*-0xdd+-0x32de+0.5))/Math['sqrt'](_0x422a4e);_0x2da88a['push'](_0x32e29e);}return _0x2da88a;}function Sb(_0x4cdee9){const _0x524840=[];for(let _0x31c1f7=0x5*0x7ba+0x1*-0xbbb+0x61*-0x47;_0x31c1f7<_0x4cdee9;_0x31c1f7++){const _0x3ff79f=_0x31c1f7/_0x4cdee9,_0x5f3438=Math['sqrt'](_0x3ff79f*_0x3ff79f);_0x524840['push'](_0x5f3438);}return _0x524840;}const Fi=class Fi extends ub{constructor(_0x3b4d52){super(_0x3b4d52);const _0x47de63=this['device'];this['_forwardDr'+'awCalls']=-0x1*-0x1cc8+-0x11+0x1cb7*-0x1,this['_materialS'+'witches']=-0x381*0x6+0x1*-0x1e11+-0x13f*-0x29,this['_depthMapT'+'ime']=-0x17c2*0x1+-0xa06+0x21c8,this['_forwardTi'+'me']=0x5e7+0x1*-0x1a00+0x1419,this['_sortTime']=0x1*0x154d+0x69b*-0x4+0x51f;const _0x7968e9=_0x47de63['scope'];this['fogColorId']=_0x7968e9['resolve']('fog_color'),this['fogStartId']=_0x7968e9['resolve']('fog_start'),this['fogEndId']=_0x7968e9['resolve']('fog_end'),this['fogDensity'+'Id']=_0x7968e9['resolve']('fog_densit'+'y'),this['ambientId']=_0x7968e9['resolve']('light_glob'+'alAmbient'),this['skyboxInte'+'nsityId']=_0x7968e9['resolve']('skyboxInte'+'nsity'),this['cubeMapRot'+'ationMatri'+'xId']=_0x7968e9['resolve']('cubeMapRot'+'ationMatri'+'x'),this['pcssDiskSa'+'mplesId']=_0x7968e9['resolve']('pcssDiskSa'+'mples[0]'),this['pcssSphere'+'SamplesId']=_0x7968e9['resolve']('pcssSphere'+'Samples[0]'),this['lightColor'+'Id']=[],this['lightDir']=[],this['lightDirId']=[],this['lightShado'+'wMapId']=[],this['lightShado'+'wMatrixId']=[],this['lightShado'+'wParamsId']=[],this['lightShado'+'wIntensity']=[],this['lightRadiu'+'sId']=[],this['lightPos']=[],this['lightPosId']=[],this['lightWidth']=[],this['lightWidth'+'Id']=[],this['lightHeigh'+'t']=[],this['lightHeigh'+'tId']=[],this['lightInAng'+'leId']=[],this['lightOutAn'+'gleId']=[],this['lightCooki'+'eId']=[],this['lightCooki'+'eIntId']=[],this['lightCooki'+'eMatrixId']=[],this['lightCooki'+'eOffsetId']=[],this['lightShado'+'wSearchAre'+'aId']=[],this['lightCamer'+'aParamsId']=[],this['lightSoftS'+'hadowParam'+'sId']=[],this['shadowMatr'+'ixPaletteI'+'d']=[],this['shadowCasc'+'adeDistanc'+'esId']=[],this['shadowCasc'+'adeCountId']=[],this['shadowCasc'+'adeBlendId']=[],this['screenSize'+'Id']=_0x7968e9['resolve']('uScreenSiz'+'e'),this['_screenSiz'+'e']=new Float32Array(-0x966+-0x1a06*-0x1+-0x2*0x84e),this['fogColor']=new Float32Array(-0x1620+-0x1281+0x484*0x9),this['ambientCol'+'or']=new Float32Array(-0x80e+-0x22dc+0x2aed),this['pcssDiskSa'+'mples']=gb(-0x1dfe*0x1+0x159d+0x1*0x871),this['pcssSphere'+'Samples']=Sb(0x1*-0x1de6+-0x3c7*0x1+-0x21bd*-0x1);}['destroy'](){super['destroy']();}['dispatchGl'+'obalLights'](_0x5928bb){const _0x279127=this['ambientCol'+'or'];if(nr['linear'](_0x5928bb['ambientLig'+'ht']),_0x279127[0x2e*0x16+-0x1db0+0x2dc*0x9]=nr['r'],_0x279127[-0x1330+-0x17d6+-0x2b07*-0x1]=nr['g'],_0x279127[-0x1*-0x976+-0x10ac+0x2a*0x2c]=nr['b'],_0x5928bb['physicalUn'+'its']){for(let _0x1c4e1d=-0x6dd*-0x4+-0x1647*0x1+-0x52d;_0x1c4e1d<0x10b*-0x3+0x1*0x5c7+0x1*-0x2a3;_0x1c4e1d++)_0x279127[_0x1c4e1d]*=_0x5928bb['ambientLum'+'inance'];}this['ambientId']['setValue'](_0x279127),this['skyboxInte'+'nsityId']['setValue'](_0x5928bb['physicalUn'+'its']?_0x5928bb['skyboxLumi'+'nance']:_0x5928bb['skyboxInte'+'nsity']),this['cubeMapRot'+'ationMatri'+'xId']['setValue'](_0x5928bb['_skyboxRot'+'ationMat3']['data']);}['_resolveLi'+'ght'](_0x479cd5,_0xb5dbbf){const _0x293c5b='light'+_0xb5dbbf;this['lightColor'+'Id'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+'_color'),this['lightDir'][_0xb5dbbf]=new Float32Array(-0x37c*-0x8+0x7cd+-0x23aa),this['lightDirId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+'_direction'),this['lightShado'+'wMapId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+'_shadowMap'),this['lightShado'+'wMatrixId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_shadowMat'+'rix')),this['lightShado'+'wParamsId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_shadowPar'+'ams')),this['lightShado'+'wIntensity'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_shadowInt'+'ensity')),this['lightShado'+'wSearchAre'+'aId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_shadowSea'+'rchArea')),this['lightRadiu'+'sId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+'_radius'),this['lightPos'][_0xb5dbbf]=new Float32Array(-0x1*0x5ce+0x5*0x65+0x18*0x29),this['lightPosId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+'_position'),this['lightWidth'][_0xb5dbbf]=new Float32Array(-0x69a*0x1+-0x3c7*0x3+0x11f2),this['lightWidth'+'Id'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+'_halfWidth'),this['lightHeigh'+'t'][_0xb5dbbf]=new Float32Array(0x1e13*0x1+-0x5*-0x5f9+-0x29b*0x17),this['lightHeigh'+'tId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_halfHeigh'+'t')),this['lightInAng'+'leId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_innerCone'+'Angle')),this['lightOutAn'+'gleId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_outerCone'+'Angle')),this['lightCooki'+'eId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+'_cookie'),this['lightCooki'+'eIntId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_cookieInt'+'ensity')),this['lightCooki'+'eMatrixId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_cookieMat'+'rix')),this['lightCooki'+'eOffsetId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_cookieOff'+'set')),this['lightCamer'+'aParamsId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_cameraPar'+'ams')),this['lightSoftS'+'hadowParam'+'sId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_softShado'+'wParams')),this['shadowMatr'+'ixPaletteI'+'d'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_shadowMat'+'rixPalette'+'[0]')),this['shadowCasc'+'adeDistanc'+'esId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_shadowCas'+'cadeDistan'+'ces')),this['shadowCasc'+'adeCountId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_shadowCas'+'cadeCount')),this['shadowCasc'+'adeBlendId'][_0xb5dbbf]=_0x479cd5['resolve'](_0x293c5b+('_shadowCas'+'cadeBlend'));}['setLTCDire'+'ctionalLig'+'ht'](_0x5943b0,_0x20a7fb,_0x201a12,_0x5d6722,_0x299789){this['lightPos'][_0x20a7fb][0x1858+0x1*-0xd73+-0xae5*0x1]=_0x5d6722['x']-_0x201a12['x']*_0x299789,this['lightPos'][_0x20a7fb][0x1383+0x298*-0xf+0x1366]=_0x5d6722['y']-_0x201a12['y']*_0x299789,this['lightPos'][_0x20a7fb][-0x1b79+-0xf8f*0x1+0x2b0a]=_0x5d6722['z']-_0x201a12['z']*_0x299789,this['lightPosId'][_0x20a7fb]['setValue'](this['lightPos'][_0x20a7fb]);const _0x1df7f7=_0x5943b0['transformV'+'ector'](new D(-(-0x6*-0x196+0xb11+-0x1495*0x1+0.5),-0x1*0x11a1+0xd88+-0x1*-0x419,0x12ff+0x1025+-0x1*0x2324));this['lightWidth'][_0x20a7fb][-0x2524+0x4*0x1db+0x4f4*0x6]=_0x1df7f7['x']*_0x299789,this['lightWidth'][_0x20a7fb][0x1d7*0xa+-0xcb3+-0x5b2]=_0x1df7f7['y']*_0x299789,this['lightWidth'][_0x20a7fb][0x2121+-0x1c73+-0xd*0x5c]=_0x1df7f7['z']*_0x299789,this['lightWidth'+'Id'][_0x20a7fb]['setValue'](this['lightWidth'][_0x20a7fb]);const _0x42ec60=_0x5943b0['transformV'+'ector'](new D(-0x21cd+-0x6ed+-0x322*-0xd,-0x192c+0x2*-0x993+0x2c52,-0x2*0xc51+0xff0+0x6a*0x15+0.5));this['lightHeigh'+'t'][_0x20a7fb][0x22e1+-0xa6*0x2+-0x2195]=_0x42ec60['x']*_0x299789,this['lightHeigh'+'t'][_0x20a7fb][-0x2429+0x1261+0x1d*0x9d]=_0x42ec60['y']*_0x299789,this['lightHeigh'+'t'][_0x20a7fb][-0x2b1*-0xa+0x1a87+-0x1*0x356f]=_0x42ec60['z']*_0x299789,this['lightHeigh'+'tId'][_0x20a7fb]['setValue'](this['lightHeigh'+'t'][_0x20a7fb]);}['dispatchDi'+'rectLights'](_0x5ed29b,_0xb2fb4a,_0x15b430){let _0xe3b033=0x1130+0x21e1+-0x3311;const _0x3a59a8=this['device']['scope'];for(let _0x5000f3=-0x87b*-0x2+0x7ff+-0x18f5;_0x5000f3<_0x5ed29b['length'];_0x5000f3++){if(!(_0x5ed29b[_0x5000f3]['mask']&_0xb2fb4a))continue;const _0x37f328=_0x5ed29b[_0x5000f3],_0x2ba235=_0x37f328['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0xe3b033]||this['_resolveLi'+'ght'](_0x3a59a8,_0xe3b033),this['lightColor'+'Id'][_0xe3b033]['setValue'](_0x37f328['_colorLine'+'ar']),_0x2ba235['getY'](_0x37f328['_direction'])['mulScalar'](-(-0x1253+0x1*-0x2f5+0x1549)),_0x37f328['_direction']['normalize'](),this['lightDir'][_0xe3b033][-0xf*-0x45+0x162f+-0x1a3a]=_0x37f328['_direction']['x'],this['lightDir'][_0xe3b033][0x11f2+0x46*-0x5c+-0x1*-0x737]=_0x37f328['_direction']['y'],this['lightDir'][_0xe3b033][-0x67*-0x11+-0xf23+0x84e]=_0x37f328['_direction']['z'],this['lightDirId'][_0xe3b033]['setValue'](this['lightDir'][_0xe3b033]),_0x37f328['shape']!==js&&this['setLTCDire'+'ctionalLig'+'ht'](_0x2ba235,_0xe3b033,_0x37f328['_direction'],_0x15b430['_node']['getPositio'+'n'](),_0x15b430['farClip']),_0x37f328['castShadow'+'s']){const _0x140cca=_0x37f328['getRenderD'+'ata'](_0x15b430,0x1*-0xe73+0x1fe1+0x1*-0x116e),_0x384f0e=_0x37f328['_getUnifor'+'mBiasValue'+'s'](_0x140cca);this['lightShado'+'wMapId'][_0xe3b033]['setValue'](_0x140cca['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0xe3b033]['setValue'](_0x140cca['shadowMatr'+'ix']['data']),this['shadowMatr'+'ixPaletteI'+'d'][_0xe3b033]['setValue'](_0x37f328['_shadowMat'+'rixPalette']),this['shadowCasc'+'adeDistanc'+'esId'][_0xe3b033]['setValue'](_0x37f328['_shadowCas'+'cadeDistan'+'ces']),this['shadowCasc'+'adeCountId'][_0xe3b033]['setValue'](_0x37f328['numCascade'+'s']),this['shadowCasc'+'adeBlendId'][_0xe3b033]['setValue'](0x111f+0x1*-0x1dad+-0x283*-0x5-_0x37f328['cascadeBle'+'nd']),this['lightShado'+'wIntensity'][_0xe3b033]['setValue'](_0x37f328['shadowInte'+'nsity']),this['lightSoftS'+'hadowParam'+'sId'][_0xe3b033]['setValue'](_0x37f328['_softShado'+'wParams']),_0x140cca['shadowCame'+'ra']['renderTarg'+'et']&&this['lightShado'+'wSearchAre'+'aId'][_0xe3b033]['setValue'](_0x37f328['penumbraSi'+'ze']/_0x140cca['shadowCame'+'ra']['renderTarg'+'et']['width']*_0x140cca['projection'+'Compensati'+'on']);const _0x155ad1=_0x37f328['_shadowCam'+'eraParams'];_0x155ad1['length']=-0x8*0x85+0x1635+0x3*-0x603,_0x155ad1[-0x2a1+-0x11*-0x175+0x6d*-0x34]=-0xd69+0x5*0x289+0x4*0x2f,_0x155ad1[-0x3a4+0x837+-0x492]=_0x140cca['shadowCame'+'ra']['_farClip'],_0x155ad1[0xba2+0x2632*0x1+-0x31d2]=_0x140cca['shadowCame'+'ra']['_nearClip'],_0x155ad1[0x2f6+0xa18+-0x173*0x9]=-0x277*-0xb+-0x1b47*0x1+0x2b,this['lightCamer'+'aParamsId'][_0xe3b033]['setValue'](_0x155ad1);const _0x461503=_0x37f328['_shadowRen'+'derParams'];_0x461503['length']=-0x25a4+0x5*-0x18+0x2620,_0x461503[-0x115b*0x1+0x19bd+-0x862]=_0x37f328['_shadowRes'+'olution'],_0x461503[0x1*0x20f0+0x23e1+0x1134*-0x4]=_0x384f0e['normalBias'],_0x461503[0xc1*0x13+-0x24ea+0x1699]=_0x384f0e['bias'],_0x461503[-0xa*-0x14b+-0x7*-0x425+0x1*-0x29ee]=-0xb*0x11+-0xc5*-0x19+0xce*-0x17,this['lightShado'+'wParamsId'][_0xe3b033]['setValue'](_0x461503);}_0xe3b033++;}return _0xe3b033;}['setLTCPosi'+'tionalLigh'+'t'](_0x1ea207,_0x1f9edd){const _0x520cd4=_0x1ea207['transformV'+'ector'](new D(-(0x2665*0x1+0x1b61*-0x1+-0x234*0x5+0.5),-0x2d8+-0x9c8*-0x2+-0xa*0x1ac,0x61*0x3a+-0x13f*-0x17+-0x32a3));this['lightWidth'][_0x1f9edd][-0x13ce+0x13*0x20+0x116e*0x1]=_0x520cd4['x'],this['lightWidth'][_0x1f9edd][0x263a+0xc89+-0x32c2]=_0x520cd4['y'],this['lightWidth'][_0x1f9edd][-0x1b71*0x1+0x4*0x7de+-0x405]=_0x520cd4['z'],this['lightWidth'+'Id'][_0x1f9edd]['setValue'](this['lightWidth'][_0x1f9edd]);const _0x3b3f1d=_0x1ea207['transformV'+'ector'](new D(0xf62*0x1+-0x14*0x19b+0x85d*0x2,0x5*0x374+-0x25b*-0x5+-0x1d0b,0x1c09+-0x17d2+-0x437+0.5));this['lightHeigh'+'t'][_0x1f9edd][-0x126f+-0x11ce+-0x1*-0x243d]=_0x3b3f1d['x'],this['lightHeigh'+'t'][_0x1f9edd][0x1304+-0x724*0x1+-0xbdf]=_0x3b3f1d['y'],this['lightHeigh'+'t'][_0x1f9edd][0x1*0x730+0x230e*0x1+-0x2a3c]=_0x3b3f1d['z'],this['lightHeigh'+'tId'][_0x1f9edd]['setValue'](this['lightHeigh'+'t'][_0x1f9edd]);}['dispatchOm'+'niLight'](_0x362313,_0x398f16,_0x1b3153){const _0x2283e7=_0x398f16['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x1b3153]||this['_resolveLi'+'ght'](_0x362313,_0x1b3153),this['lightRadiu'+'sId'][_0x1b3153]['setValue'](_0x398f16['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x1b3153]['setValue'](_0x398f16['_colorLine'+'ar']),_0x2283e7['getTransla'+'tion'](_0x398f16['_position']),this['lightPos'][_0x1b3153][0x10*-0x100+0x20*-0xeb+-0x42*-0xb0]=_0x398f16['_position']['x'],this['lightPos'][_0x1b3153][0x6*0x31+-0x2667+-0x13*-0x1f6]=_0x398f16['_position']['y'],this['lightPos'][_0x1b3153][-0x4*0x22f+0x1*-0x583+-0xe41*-0x1]=_0x398f16['_position']['z'],this['lightPosId'][_0x1b3153]['setValue'](this['lightPos'][_0x1b3153]),_0x398f16['shape']!==js&&this['setLTCPosi'+'tionalLigh'+'t'](_0x2283e7,_0x1b3153),_0x398f16['castShadow'+'s']){const _0x4637aa=_0x398f16['getRenderD'+'ata'](null,-0x1a*0x60+0x263e+-0x1c7e);this['lightShado'+'wMapId'][_0x1b3153]['setValue'](_0x4637aa['shadowBuff'+'er']);const _0x3f71ed=_0x398f16['_getUnifor'+'mBiasValue'+'s'](_0x4637aa),_0x16c6a0=_0x398f16['_shadowRen'+'derParams'];_0x16c6a0['length']=-0x1433+0x546+0x33*0x4b,_0x16c6a0[-0x2012+-0x57f*-0x6+-0xe8]=_0x398f16['_shadowRes'+'olution'],_0x16c6a0[-0x151d+0x1a6d+-0x54f]=_0x3f71ed['normalBias'],_0x16c6a0[0x9*-0x43f+0x2480+0x3*0x93]=_0x3f71ed['bias'],_0x16c6a0[-0xaa1*-0x1+0x11*0xa+-0xb48]=(0x2*-0xb97+-0xf4c+0x267b)/_0x398f16['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x1b3153]['setValue'](_0x16c6a0),this['lightShado'+'wIntensity'][_0x1b3153]['setValue'](_0x398f16['shadowInte'+'nsity']);const _0x24fd70=_0x398f16['penumbraSi'+'ze']/_0x4637aa['shadowCame'+'ra']['renderTarg'+'et']['width'];this['lightShado'+'wSearchAre'+'aId'][_0x1b3153]['setValue'](_0x24fd70);const _0x482be2=_0x398f16['_shadowCam'+'eraParams'];_0x482be2['length']=-0x40f*0x7+-0x15*-0x4d+0x4*0x587,_0x482be2[-0x2183+0x1a3+0x8*0x3fc]=-0x274*-0x5+0x1bea+-0x282e,_0x482be2[0x130d+-0x103e+-0x1*0x2ce]=_0x4637aa['shadowCame'+'ra']['_farClip'],_0x482be2[0x3*-0x39b+-0xd8*0x16+0x1*0x1d63]=_0x4637aa['shadowCame'+'ra']['_nearClip'],_0x482be2[0x36*-0x76+0x6*0xca+0x142b]=0x6ce*-0x3+0x14d6+-0x6c,this['lightCamer'+'aParamsId'][_0x1b3153]['setValue'](_0x482be2);}_0x398f16['_cookie']&&(this['lightCooki'+'eId'][_0x1b3153]['setValue'](_0x398f16['_cookie']),this['lightShado'+'wMatrixId'][_0x1b3153]['setValue'](_0x2283e7['data']),this['lightCooki'+'eIntId'][_0x1b3153]['setValue'](_0x398f16['cookieInte'+'nsity']));}['dispatchSp'+'otLight'](_0x56884b,_0x5726b2,_0x3761c4){const _0x249610=_0x5726b2['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x3761c4]||this['_resolveLi'+'ght'](_0x56884b,_0x3761c4),this['lightInAng'+'leId'][_0x3761c4]['setValue'](_0x5726b2['_innerCone'+'AngleCos']),this['lightOutAn'+'gleId'][_0x3761c4]['setValue'](_0x5726b2['_outerCone'+'AngleCos']),this['lightRadiu'+'sId'][_0x3761c4]['setValue'](_0x5726b2['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x3761c4]['setValue'](_0x5726b2['_colorLine'+'ar']),_0x249610['getTransla'+'tion'](_0x5726b2['_position']),this['lightPos'][_0x3761c4][-0xd81*0x1+0x11ab*0x2+-0x747*0x3]=_0x5726b2['_position']['x'],this['lightPos'][_0x3761c4][0x165+-0x24a5+0x2341]=_0x5726b2['_position']['y'],this['lightPos'][_0x3761c4][-0x1*0x19b+-0x1ec7*-0x1+-0x1d2a*0x1]=_0x5726b2['_position']['z'],this['lightPosId'][_0x3761c4]['setValue'](this['lightPos'][_0x3761c4]),_0x5726b2['shape']!==js&&this['setLTCPosi'+'tionalLigh'+'t'](_0x249610,_0x3761c4),_0x249610['getY'](_0x5726b2['_direction'])['mulScalar'](-(0x52*0x46+0x843+-0x1eae)),_0x5726b2['_direction']['normalize'](),this['lightDir'][_0x3761c4][0xded*0x2+0x1*-0x9d1+-0x1209]=_0x5726b2['_direction']['x'],this['lightDir'][_0x3761c4][0x1ab*0x1+-0xf*-0x24b+-0x240f]=_0x5726b2['_direction']['y'],this['lightDir'][_0x3761c4][-0x1*-0x1ed7+-0x27*-0xb6+0x107*-0x39]=_0x5726b2['_direction']['z'],this['lightDirId'][_0x3761c4]['setValue'](this['lightDir'][_0x3761c4]),_0x5726b2['castShadow'+'s']){const _0x2c5c37=_0x5726b2['getRenderD'+'ata'](null,0xa41*0x3+-0x197f+-0x544);this['lightShado'+'wMapId'][_0x3761c4]['setValue'](_0x2c5c37['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x3761c4]['setValue'](_0x2c5c37['shadowMatr'+'ix']['data']);const _0x507679=_0x5726b2['_getUnifor'+'mBiasValue'+'s'](_0x2c5c37),_0x404db6=_0x5726b2['_shadowRen'+'derParams'];_0x404db6['length']=0x148c+0x2600+-0x3a88,_0x404db6[0x10d7+-0x41*0x2+-0x1055]=_0x5726b2['_shadowRes'+'olution'],_0x404db6[0xc*0x26f+0x1*-0x1e25+0xf2]=_0x507679['normalBias'],_0x404db6[-0x1d4c+-0x687*-0x1+-0x7*-0x341]=_0x507679['bias'],_0x404db6[0x1*0xdc7+0xe3*-0x1+0x1d7*-0x7]=(-0x25cf+-0x1df*-0x5+0x5b1*0x5)/_0x5726b2['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x3761c4]['setValue'](_0x404db6),this['lightShado'+'wIntensity'][_0x3761c4]['setValue'](_0x5726b2['shadowInte'+'nsity']);const _0x3f699c=_0x5726b2['penumbraSi'+'ze']/_0x2c5c37['shadowCame'+'ra']['renderTarg'+'et']['width'],_0x27a8b7=_0x2c5c37['shadowCame'+'ra']['_fov']*Math['PI']/(-0x1*0x22c2+0x18f2+0xa84),_0x1996de=(0x2608+0xb8f+-0x3196)/Math['tan'](_0x27a8b7/(0x1c43+0x142*-0x6+0x13*-0x117));this['lightShado'+'wSearchAre'+'aId'][_0x3761c4]['setValue'](_0x3f699c*_0x1996de);const _0x12ab47=_0x5726b2['_shadowCam'+'eraParams'];_0x12ab47['length']=0x5*-0x7c9+-0x25e3+0x4cd4,_0x12ab47[-0x1390+0x729+0xc67]=0x1422+-0x1*0x1b1a+0x6f8*0x1,_0x12ab47[-0x11c0+-0x652*0x1+-0x1813*-0x1]=_0x2c5c37['shadowCame'+'ra']['_farClip'],_0x12ab47[-0x997*-0x1+-0x12ae*0x1+0x919]=_0x2c5c37['shadowCame'+'ra']['_nearClip'],_0x12ab47[0x2211*-0x1+-0x16fb+0x390f]=-0x362*-0x2+0x115f+0x25*-0xa7,this['lightCamer'+'aParamsId'][_0x3761c4]['setValue'](_0x12ab47);}if(_0x5726b2['_cookie']){if(!_0x5726b2['castShadow'+'s']){const _0x410ca0=kn['evalSpotCo'+'okieMatrix'](_0x5726b2);this['lightShado'+'wMatrixId'][_0x3761c4]['setValue'](_0x410ca0['data']);}this['lightCooki'+'eId'][_0x3761c4]['setValue'](_0x5726b2['_cookie']),this['lightCooki'+'eIntId'][_0x3761c4]['setValue'](_0x5726b2['cookieInte'+'nsity']),_0x5726b2['_cookieTra'+'nsform']&&(_0x5726b2['_cookieTra'+'nsformUnif'+'orm'][-0x2659+0x18*-0x33+0x2b21]=_0x5726b2['_cookieTra'+'nsform']['x'],_0x5726b2['_cookieTra'+'nsformUnif'+'orm'][0x82d+0x1*-0x1f9d+0x1771]=_0x5726b2['_cookieTra'+'nsform']['y'],_0x5726b2['_cookieTra'+'nsformUnif'+'orm'][0x23b0*0x1+0x10e7*0x1+-0x3495]=_0x5726b2['_cookieTra'+'nsform']['z'],_0x5726b2['_cookieTra'+'nsformUnif'+'orm'][0x3b*0x29+-0x101d+0x6ad]=_0x5726b2['_cookieTra'+'nsform']['w'],this['lightCooki'+'eMatrixId'][_0x3761c4]['setValue'](_0x5726b2['_cookieTra'+'nsformUnif'+'orm']),_0x5726b2['_cookieOff'+'setUniform'][0x4f*-0x67+0x4b2*0x6+0x39d]=_0x5726b2['_cookieOff'+'set']['x'],_0x5726b2['_cookieOff'+'setUniform'][0x15c+0x1*0x1e09+-0x1f64]=_0x5726b2['_cookieOff'+'set']['y'],this['lightCooki'+'eOffsetId'][_0x3761c4]['setValue'](_0x5726b2['_cookieOff'+'setUniform']));}}['dispatchLo'+'calLights'](_0x6d79db,_0x4de7ba,_0x2efa3d){let _0x348392=_0x2efa3d;const _0x565642=this['device']['scope'],_0x1a5f82=_0x6d79db[Ke],_0x4fc114=_0x1a5f82['length'];for(let _0x12c196=-0x397+0x1*0x1ebb+-0x1b24;_0x12c196<_0x4fc114;_0x12c196++){const _0x5edecc=_0x1a5f82[_0x12c196];_0x5edecc['mask']&_0x4de7ba&&(this['dispatchOm'+'niLight'](_0x565642,_0x5edecc,_0x348392),_0x348392++);}const _0x9807ee=_0x6d79db[Ze],_0x554dd9=_0x9807ee['length'];for(let _0x17d777=0x4b*0x2b+-0x627+0x42*-0x19;_0x17d777<_0x554dd9;_0x17d777++){const _0x597adf=_0x9807ee[_0x17d777];_0x597adf['mask']&_0x4de7ba&&(this['dispatchSp'+'otLight'](_0x565642,_0x597adf,_0x348392),_0x348392++);}}['renderForw'+'ardPrepare'+'Materials'](_0x311a8f,_0x358d2a,_0x25a951,_0x3c4137,_0x2af48e,_0x3925e4){const _0x27c940=_0x311a8f['fogParams']??this['scene']['fog'],_0x51bd24=_0x311a8f['shaderPara'+'ms'];_0x51bd24['fog']=_0x27c940['type'],_0x51bd24['srgbRender'+'Target']=(_0x358d2a==null?void(0xd75+0x206e+-0x11*0x2b3):_0x358d2a['isColorBuf'+'ferSrgb'](-0xa16*0x1+-0x8*-0x483+0x1*-0x1a02))??!(-0x1c1b+-0x1a1*0x11+0x37cd);const _0x591031=(_0x2bad8a,_0x37d17b,_0x569182,_0x2c60a0)=>{Lr['drawCalls']['push'](_0x2bad8a),Lr['shaderInst'+'ances']['push'](_0x37d17b),Lr['isNewMater'+'ial']['push'](_0x569182),Lr['lightMaskC'+'hanged']['push'](_0x2c60a0);};Lr['clear']();const _0x5ecfbd=this['device'],_0x187242=this['scene'],_0x1b15f8=_0x187242['clusteredL'+'ightingEna'+'bled'],_0x47d635=(_0x2af48e==null?void(-0x35b*0x4+-0x2*0x1043+0x1*0x2df2):_0x2af48e['getLightHa'+'sh'](_0x1b15f8))??-0x3f7*0x9+-0x2582+0x1*0x4931;let _0x2afade=null,_0x48c46b,_0x1a2137;const _0x32ffdb=_0x25a951['length'];for(let _0x9112c=0x962+-0x203a+0x16d8;_0x9112c<_0x32ffdb;_0x9112c++){const _0xda624f=_0x25a951[_0x9112c];if(_0x311a8f===Fi['skipRender'+'Camera']){if(Fi['_skipRende'+'rCounter']>=Fi['skipRender'+'After'])continue;Fi['_skipRende'+'rCounter']++;}if(_0x2af48e){if(_0x2af48e['_skipRende'+'rCounter']>=_0x2af48e['skipRender'+'After'])continue;_0x2af48e['_skipRende'+'rCounter']++;}const _0x346b16=_0xda624f['instancing'+'Data'];if(_0x346b16&&_0x346b16['count']<=-0x17d3+0x863+0xd0*0x13)continue;_0xda624f['ensureMate'+'rial'](_0x5ecfbd);const _0x512558=_0xda624f['material'],_0x43eeac=_0xda624f['_shaderDef'+'s'],_0x1f5c72=_0xda624f['mask'];_0x512558&&_0x512558===_0x2afade&&_0x43eeac!==_0x48c46b&&(_0x2afade=null),_0x512558!==_0x2afade&&(this['_materialS'+'witches']++,_0x512558['_scene']=_0x187242,_0x512558['dirty']&&(Q['pushGpuMar'+'ker'](_0x5ecfbd,'Node:\x20'+_0xda624f['node']['name']+(',\x20Material'+':\x20')+_0x512558['name']),_0x512558['updateUnif'+'orms'](_0x5ecfbd,_0x187242),_0x512558['dirty']=!(0x4d*-0x2c+-0x1*-0x17e9+0x2*-0x556),Q['popGpuMark'+'er'](_0x5ecfbd)));const _0x1877dc=_0xda624f['getShaderI'+'nstance'](_0x3925e4,_0x47d635,_0x187242,_0x51bd24,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x3c4137);_0x591031(_0xda624f,_0x1877dc,_0x512558!==_0x2afade,!_0x2afade||_0x1f5c72!==_0x1a2137),_0x2afade=_0x512558,_0x48c46b=_0x43eeac,_0x1a2137=_0x1f5c72;}return Lr;}['renderForw'+'ardInterna'+'l'](_0x1c8c9d,_0x1d33ed,_0x4c175d,_0x214f44,_0xfccfe1,_0x5b450d,_0x45a14c){var _0x5090f7,_0x1cced5;const _0x2a78a3=this['device'],_0x457567=this['scene'],_0x34abe3=0x4*0x66f+0xcf0+0x1*-0x26ab<<_0x214f44,_0xc448cd=_0x5b450d?-(0x19*-0x15b+0x3f9+0x45*0x6f):-0x9b*-0x3b+-0x5f9*0x3+-0x15*0xd9,_0x3fd5f2=_0x457567['clusteredL'+'ightingEna'+'bled'],_0x3bab43=(_0x5090f7=_0x1c8c9d['xr'])!=null&&_0x5090f7['session']&&_0x1c8c9d['xr']['views']['list']['length']?_0x1c8c9d['xr']['views']['list']:null,_0x488620=_0x1d33ed['drawCalls']['length'];for(let _0x3cba4f=-0x12f9+-0xd*0x1a+0x144b;_0x3cba4f<_0x488620;_0x3cba4f++){const _0x402310=_0x1d33ed['drawCalls'][_0x3cba4f],_0x454813=_0x1d33ed['isNewMater'+'ial'][_0x3cba4f],_0x1f62db=_0x1d33ed['lightMaskC'+'hanged'][_0x3cba4f],_0x587bc4=_0x1d33ed['shaderInst'+'ances'][_0x3cba4f],_0x324263=_0x402310['material'],_0x19853b=_0x402310['mask'];if(_0x587bc4['shader']['failed'])continue;if(_0x454813){if(_0x2a78a3['setShader'](_0x587bc4['shader'],!(-0x23a8+0x18d*0x16+0x18b)),_0x324263['setParamet'+'ers'](_0x2a78a3),_0x1f62db){const _0x106445=this['dispatchDi'+'rectLights'](_0x4c175d[ve],_0x19853b,_0x1c8c9d);_0x3fd5f2||this['dispatchLo'+'calLights'](_0x4c175d,_0x19853b,_0x106445);}this['alphaTestI'+'d']['setValue'](_0x324263['alphaTest']),_0x2a78a3['setBlendSt'+'ate'](_0x324263['blendState']),_0x2a78a3['setDepthSt'+'ate'](_0x324263['depthState']),_0x2a78a3['setAlphaTo'+'Coverage'](_0x324263['alphaToCov'+'erage']);}Q['pushGpuMar'+'ker'](_0x2a78a3,'Node:\x20'+_0x402310['node']['name']+(',\x20Material'+':\x20')+_0x324263['name']),this['setupCullM'+'ode'](_0x1c8c9d['_cullFaces'],_0xc448cd,_0x402310);const _0x1afa46=_0x402310['stencilFro'+'nt']??_0x324263['stencilFro'+'nt'],_0x5aab36=_0x402310['stencilBac'+'k']??_0x324263['stencilBac'+'k'];_0x2a78a3['setStencil'+'State'](_0x1afa46,_0x5aab36),_0x402310['setParamet'+'ers'](_0x2a78a3,_0x34abe3),_0x2a78a3['scope']['resolve']('meshInstan'+'ceId')['setValue'](_0x402310['id']);const _0xc07650=_0x402310['mesh'];this['setVertexB'+'uffers'](_0x2a78a3,_0xc07650),this['setMorphin'+'g'](_0x2a78a3,_0x402310['morphInsta'+'nce']),this['setSkinnin'+'g'](_0x2a78a3,_0x402310);const _0x345332=_0x402310['instancing'+'Data'];_0x345332&&_0x2a78a3['setVertexB'+'uffer'](_0x345332['vertexBuff'+'er']),this['setMeshIns'+'tanceMatri'+'ces'](_0x402310,!(-0xe9b+-0x184+-0x101f*-0x1)),this['setupMeshU'+'niformBuff'+'ers'](_0x587bc4);const _0x47b03a=_0x402310['renderStyl'+'e'],_0x3e6438=_0xc07650['indexBuffe'+'r'][_0x47b03a];_0xfccfe1==null||_0xfccfe1(_0x402310,_0x3cba4f);const _0x539cf2=(_0x1cced5=_0x402310['indirectDa'+'ta'])==null?void(-0x13c4+-0x21*-0x16+0x10ee):_0x1cced5['get'](_0x1c8c9d);if(_0x3bab43)for(let _0x3904af=-0xe8c+0xfdb+-0x5*0x43;_0x3904af<_0x3bab43['length'];_0x3904af++){const _0x401861=_0x3bab43[_0x3904af];if(_0x2a78a3['setViewpor'+'t'](_0x401861['viewport']['x'],_0x401861['viewport']['y'],_0x401861['viewport']['z'],_0x401861['viewport']['w']),_0x2a78a3['supportsUn'+'iformBuffe'+'rs']){const _0x20ab9f=_0x45a14c[_0x3904af];_0x2a78a3['setBindGro'+'up']($o,_0x20ab9f);}else this['setupViewU'+'niforms'](_0x401861,_0x3904af);const _0x4d2864=_0x3904af===-0x3*-0x1cf+0x13b8+-0x1925,_0x2f6f29=_0x3904af===_0x3bab43['length']-(-0x1*0x10e7+0x2237+0x279*-0x7);_0x2a78a3['draw'](_0xc07650['primitive'][_0x47b03a],_0x3e6438,_0x345332==null?void(-0x964+0x182c*0x1+-0x764*0x2):_0x345332['count'],_0x539cf2,_0x4d2864,_0x2f6f29),this['_forwardDr'+'awCalls']++,_0x402310['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;}else _0x2a78a3['draw'](_0xc07650['primitive'][_0x47b03a],_0x3e6438,_0x345332==null?void(0x5a2+0x26f1+-0x2c93):_0x345332['count'],_0x539cf2),this['_forwardDr'+'awCalls']++,_0x402310['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;_0x3cba4f<_0x488620-(-0x1e*-0x11f+-0x788+-0x1a19)&&!_0x1d33ed['isNewMater'+'ial'][_0x3cba4f+(-0x1bc7+0x1790+0x18*0x2d)]&&_0x324263['setParamet'+'ers'](_0x2a78a3,_0x402310['parameters']),Q['popGpuMark'+'er'](_0x2a78a3);}}['renderForw'+'ard'](_0x5b14fc,_0xe22c36,_0x53c3fe,_0x344bc5,_0x455011,_0x331d5c,_0x115729,_0x3a3bbb,_0xc287c0){const _0x39a5cd=de(),_0x189109=this['renderForw'+'ardPrepare'+'Materials'](_0x5b14fc,_0xe22c36,_0x53c3fe,_0x344bc5,_0x115729,_0x455011);this['renderForw'+'ardInterna'+'l'](_0x5b14fc,_0x189109,_0x344bc5,_0x455011,_0x331d5c,_0x3a3bbb,_0xc287c0),Lr['clear'](),this['_forwardTi'+'me']+=de()-_0x39a5cd;}['renderForw'+'ardLayer'](_0x499d2f,_0x59a935,_0x1a72af,_0x3f49dc,_0x3abb12,_0xaffb74,_0x80814a={}){const {scene:_0x97f94e,device:_0x7ea80d}=this,_0x746461=_0x97f94e['clusteredL'+'ightingEna'+'bled'];this['setupViewp'+'ort'](_0x499d2f,_0x59a935);let _0x15c714,_0x28dc79;if(_0x1a72af){const _0x4ae255=de();_0x1a72af['sortVisibl'+'e'](_0x499d2f,_0x3f49dc),this['_sortTime']+=de()-_0x4ae255;const _0x5973cb=_0x1a72af['getCulledI'+'nstances'](_0x499d2f);_0x15c714=_0x3f49dc?_0x5973cb['transparen'+'t']:_0x5973cb['opaque'],_0x97f94e['immediate']['onPreRende'+'rLayer'](_0x1a72af,_0x15c714,_0x3f49dc),_0x1a72af['requiresLi'+'ghtCube']&&(this['lightCube']['update'](_0x97f94e['ambientLig'+'ht'],_0x1a72af['_lights']),this['constantLi'+'ghtCube']['setValue'](this['lightCube']['colors'])),_0x28dc79=_0x1a72af['splitLight'+'s'];}else _0x15c714=_0x80814a['meshInstan'+'ces'],_0x28dc79=_0x80814a['splitLight'+'s']??_b;if(w['assert'](_0x15c714,'Either\x20lay'+'er\x20or\x20opti'+'ons.meshIn'+'stances\x20mu'+'st\x20be\x20prov'+'ided'),_0x746461){const _0x5724fd=_0x80814a['lightClust'+'ers']??this['worldClust'+'ersAllocat'+'or']['empty'];_0x5724fd['activate'](),_0x1a72af&&!this['clustersDe'+'bugRendere'+'d']&&_0x97f94e['lighting']['debugLayer']===_0x1a72af['id']&&(this['clustersDe'+'bugRendere'+'d']=!(-0x31*0x1e+0x9d5*0x3+-0x17c1),Uf['render'](_0x5724fd,this['scene']));}_0x97f94e['_activeCam'+'era']=_0x499d2f;const _0x197641=_0x499d2f['fogParams']??this['scene']['fog'];this['setFogCons'+'tants'](_0x197641);const _0x40afae=this['setCameraU'+'niforms'](_0x499d2f,_0x59a935);_0x7ea80d['supportsUn'+'iformBuffe'+'rs']&&this['setupViewU'+'niformBuff'+'ers'](_0xaffb74,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x40afae);const _0x3b6454=_0x80814a['clearColor']??!(-0xdf4+-0x3*0x41e+0x1*0x1a4f),_0x52203=_0x80814a['clearDepth']??!(0xc51+-0x2313+0x1*0x16c3),_0x2b3ff4=_0x80814a['clearStenc'+'il']??!(0x1022*-0x2+-0x1858+-0x3*-0x12df);(_0x3b6454||_0x52203||_0x2b3ff4)&&this['clear'](_0x499d2f,_0x3b6454,_0x52203,_0x2b3ff4);const _0x3fa67a=!!(_0x499d2f['_flipFaces']^(_0x59a935==null?void(-0x7e2*0x3+-0x1*-0x7c1+0xfe5):_0x59a935['flipY'])),_0x4b9b69=this['_forwardDr'+'awCalls'];this['renderForw'+'ard'](_0x499d2f,_0x59a935,_0x15c714,_0x28dc79,_0x3abb12,null,_0x1a72af,_0x3fa67a,_0xaffb74),_0x1a72af&&(_0x1a72af['_forwardDr'+'awCalls']+=this['_forwardDr'+'awCalls']-_0x4b9b69);}['setFogCons'+'tants'](_0x48e682){if(_0x48e682['type']!==Hn){nr['linear'](_0x48e682['color']);const _0x7df77d=this['fogColor'];_0x7df77d[-0x1982+-0xc27+0x25a9]=nr['r'],_0x7df77d[0xb0*-0x22+-0x19*-0xef+0xa]=nr['g'],_0x7df77d[0x12d0+0x803+-0x1ad1*0x1]=nr['b'],this['fogColorId']['setValue'](_0x7df77d),_0x48e682['type']===YT?(this['fogStartId']['setValue'](_0x48e682['start']),this['fogEndId']['setValue'](_0x48e682['end'])):this['fogDensity'+'Id']['setValue'](_0x48e682['density']);}}['setSceneCo'+'nstants'](){const _0x2a405c=this['scene'];this['dispatchGl'+'obalLights'](_0x2a405c);const _0x30aa95=this['device'];this['_screenSiz'+'e'][-0x16d1+-0x1b1c*0x1+0x31ed]=_0x30aa95['width'],this['_screenSiz'+'e'][-0x1a4b+-0x2092+0x3ade]=_0x30aa95['height'],this['_screenSiz'+'e'][-0x354*-0x1+-0x2445+0x20f3]=(-0x10b8+-0x2663+-0x4*-0xdc7)/_0x30aa95['width'],this['_screenSiz'+'e'][0x1c9*-0xa+0x103*-0xb+0x1cfe]=(0x7a4+-0x22c2+0x1b1f)/_0x30aa95['height'],this['screenSize'+'Id']['setValue'](this['_screenSiz'+'e']),this['pcssDiskSa'+'mplesId']['setValue'](this['pcssDiskSa'+'mples']),this['pcssSphere'+'SamplesId']['setValue'](this['pcssSphere'+'Samples']);}['buildFrame'+'Graph'](_0x2fa81a,_0x3e0a08){const _0x1db0c1=this['scene'];if(_0x2fa81a['reset'](),_0x1db0c1['clusteredL'+'ightingEna'+'bled']){const {shadowsEnabled:_0x11b658,cookiesEnabled:_0xe78906}=_0x1db0c1['lighting'];this['_renderPas'+'sUpdateClu'+'stered']['update'](_0x2fa81a,_0x11b658,_0xe78906,this['lights'],this['localLight'+'s']),_0x2fa81a['addRenderP'+'ass'](this['_renderPas'+'sUpdateClu'+'stered']);}else this['_shadowRen'+'dererLocal']['buildNonCl'+'usteredRen'+'derPasses'](_0x2fa81a,this['localLight'+'s']);let _0x217339=-0x5ca*0x1+-0x14a7+0x1a71,_0x29526c=!(-0x2*-0x2bb+-0x2*0xc7f+0x1388),_0x4b6c92=null;const _0x5b1827=_0x3e0a08['_renderAct'+'ions'];for(let _0x274feb=_0x217339;_0x274feb<_0x5b1827['length'];_0x274feb++){const _0x363645=_0x5b1827[_0x274feb],{layer:_0x25bb7d,camera:_0x351e4b}=_0x363645;if(_0x363645['useCameraP'+'asses'])w['call'](()=>{_0x351e4b['postEffect'+'s']['effects']['length']>-0x15de*0x1+-0x6*-0x10f+0x3*0x52c&&w['warnOnce']('Camera\x20\x27'+_0x351e4b['entity']['name']+('\x27\x20uses\x20ren'+'der\x20passes'+',\x20which\x20ar'+'e\x20not\x20comp'+'atible\x20wit'+'h\x20post-eff'+'ects\x20scrip'+'ts.\x20Render'+'ing\x20of\x20the'+'\x20post-effe'+'cts\x20is\x20ign'+'ored,\x20but\x20'+'they\x20shoul'+'d\x20not\x20be\x20a'+'ttached\x20to'+'\x20the\x20camer'+'a.'));}),_0x351e4b['camera']['renderPass'+'es']['forEach'](_0x36aa42=>{_0x2fa81a['addRenderP'+'ass'](_0x36aa42);});else{const _0x5bb187=_0x25bb7d['id']===ps,_0x50bd1c=_0x5bb187&&(_0x351e4b['renderScen'+'eColorMap']||_0x351e4b['renderScen'+'eDepthMap']);_0x29526c&&(_0x29526c=!(0x1*-0x19e8+-0x1b1*-0x14+-0x7eb),_0x217339=_0x274feb,_0x4b6c92=_0x363645['renderTarg'+'et']);const _0x4fe79f=_0x5b1827[_0x274feb+(0x24a3+-0x81e+-0x2*0xe42)],_0x1a5183=(_0x4fe79f?!_0x4fe79f['useCameraP'+'asses']&&_0x4fe79f['layer']['id']===ps:!(-0x5*-0x8b+-0x1f*-0xad+-0x17a9))&&(_0x351e4b['renderScen'+'eColorMap']||_0x351e4b['renderScen'+'eDepthMap']),_0x48ae4b=_0x4fe79f?_0x4fe79f['firstCamer'+'aUse']&&this['cameraDirS'+'hadowLight'+'s']['has'](_0x4fe79f['camera']['camera']):!(-0x1*-0x2225+-0x3c7+-0x1e5d);if(!_0x4fe79f||_0x4fe79f['renderTarg'+'et']!==_0x4b6c92||_0x48ae4b||_0x1a5183||_0x50bd1c){if(_0x5bb187&&_0x217339===_0x274feb||this['addMainRen'+'derPass'](_0x2fa81a,_0x3e0a08,_0x4b6c92,_0x217339,_0x274feb),_0x5bb187){if(_0x351e4b['renderScen'+'eColorMap']){const _0x4101c0=_0x351e4b['camera']['renderPass'+'ColorGrab'];_0x4101c0['source']=_0x351e4b['renderTarg'+'et'],_0x2fa81a['addRenderP'+'ass'](_0x4101c0);}_0x351e4b['renderScen'+'eDepthMap']&&_0x2fa81a['addRenderP'+'ass'](_0x351e4b['camera']['renderPass'+'DepthGrab']);}if(_0x363645['triggerPos'+'tprocess']&&(_0x351e4b!=null&&_0x351e4b['onPostproc'+'essing'])){const _0x3c23bd=new mb(this['device'],this,_0x363645);_0x2fa81a['addRenderP'+'ass'](_0x3c23bd);}_0x29526c=!(-0x247c+0xce6+-0x2*-0xbcb);}}}}['addMainRen'+'derPass'](_0x247f67,_0x5bea6b,_0x3324ab,_0x4a0547,_0x3b2121){const _0x31d93d=new pb(this['device'],_0x5bea6b,this['scene'],this);_0x31d93d['init'](_0x3324ab);const _0x59de35=_0x5bea6b['_renderAct'+'ions'];for(let _0x30c06e=_0x4a0547;_0x30c06e<=_0x3b2121;_0x30c06e++)_0x31d93d['addRenderA'+'ction'](_0x59de35[_0x30c06e]);_0x247f67['addRenderP'+'ass'](_0x31d93d);}['update'](_0x552f65){this['frameUpdat'+'e'](),this['shadowRend'+'erer']['frameUpdat'+'e'](),this['scene']['_updateSky'+'Mesh'](),this['updateLaye'+'rCompositi'+'on'](_0x552f65),this['collectLig'+'hts'](_0x552f65),this['beginFrame'](_0x552f65),this['setSceneCo'+'nstants'](),this['cullCompos'+'ition'](_0x552f65),this['gpuUpdate'](this['processing'+'MeshInstan'+'ces']);}};h(Fi,'skipRender'+'Camera',null),h(Fi,'_skipRende'+'rCounter',-0x165b+0x355+0x1306),h(Fi,'skipRender'+'After',0x5e+-0x1253+0x11f5*0x1);let Jo=Fi,Wd=0x8*0x27d+-0x1393+-0x55*0x1;const so=[],Kl=new Set();function yb(_0x3ba054,_0x54a2b0){return _0x3ba054['drawOrder']-_0x54a2b0['drawOrder'];}function vb(_0x2b20f0,_0x510b6f){const _0x30bf02=_0x2b20f0['_sortKeyFo'+'rward'],_0x5d5932=_0x510b6f['_sortKeyFo'+'rward'];return _0x30bf02===_0x5d5932?_0x510b6f['mesh']['id']-_0x2b20f0['mesh']['id']:_0x5d5932-_0x30bf02;}function xb(_0x188976,_0x236c7f){return _0x236c7f['_sortKeyDy'+'namic']-_0x188976['_sortKeyDy'+'namic'];}function Tb(_0x5c5a28,_0x556e3e){return _0x5c5a28['_sortKeyDy'+'namic']-_0x556e3e['_sortKeyDy'+'namic'];}const wb=[null,yb,vb,xb,Tb];class Eb{constructor(){h(this,'opaque',[]),h(this,'transparen'+'t',[]);}}class Ot{constructor(_0x10308e={}){h(this,'meshInstan'+'ces',[]),h(this,'meshInstan'+'cesSet',new Set()),h(this,'shadowCast'+'ers',[]),h(this,'shadowCast'+'ersSet',new Set()),h(this,'_visibleIn'+'stances',new WeakMap()),h(this,'_lights',[]),h(this,'_lightsSet',new Set()),h(this,'_clustered'+'LightsSet',new Set()),h(this,'_splitLigh'+'ts',[[],[],[]]),h(this,'_splitLigh'+'tsDirty',!(-0x2cb*0x1+-0xe*0x24+-0x35*-0x17)),h(this,'requiresLi'+'ghtCube',!(-0x1ab3+-0x8*-0x3be+-0x12*0x2e)),h(this,'cameras',[]),h(this,'camerasSet',new Set()),h(this,'_dirtyComp'+'osition',!(-0xc*-0x2b8+-0x1bb*0x12+-0x1*0x179)),(_0x10308e['id']!==void(0x5*-0x591+0xd08+0x4ef*0x3)?(this['id']=_0x10308e['id'],Wd=Math['max'](this['id']+(0x426+-0xb0+-0x375*0x1),Wd)):this['id']=Wd++,this['name']=_0x10308e['name'],this['_enabled']=_0x10308e['enabled']??!(-0x2635*0x1+0x85*-0x23+0x3864),this['_refCounte'+'r']=this['_enabled']?0x315*-0x7+-0x5*-0x3d1+0x27f:0x1162+-0x9*0x132+-0x6a0,this['opaqueSort'+'Mode']=_0x10308e['opaqueSort'+'Mode']??uw,this['transparen'+'tSortMode']=_0x10308e['transparen'+'tSortMode']??zm,_0x10308e['renderTarg'+'et']&&(this['renderTarg'+'et']=_0x10308e['renderTarg'+'et']),this['_clearColo'+'rBuffer']=!!_0x10308e['clearColor'+'Buffer'],this['_clearDept'+'hBuffer']=!!_0x10308e['clearDepth'+'Buffer'],this['_clearSten'+'cilBuffer']=!!_0x10308e['clearStenc'+'ilBuffer'],this['onEnable']=_0x10308e['onEnable'],this['onDisable']=_0x10308e['onDisable'],this['_enabled']&&this['onEnable']&&this['onEnable'](),this['customSort'+'Callback']=null,this['customCalc'+'ulateSortV'+'alues']=null,this['_lightHash']=-0x24ca+0x1cf7*-0x1+0x41c1,this['_lightHash'+'Dirty']=!(-0x1027+-0x12e*0x5+0x160e),this['_lightIdHa'+'sh']=0x26de+0x2656+-0x4d34,this['_lightIdHa'+'shDirty']=!(-0x1520+-0x1*0x1d7d+-0x13*-0x2aa),this['skipRender'+'After']=Number['MAX_VALUE'],this['_skipRende'+'rCounter']=0x1a79+-0x196d*-0x1+-0x19f3*0x2,this['_renderTim'+'e']=-0x694+0x3*-0xc2f+-0x1*-0x2b21,this['_forwardDr'+'awCalls']=0x7*-0xa6+0x1a26+-0x159c,this['_shadowDra'+'wCalls']=-0x79*0x39+-0xef*-0x1b+0x1bc,this['_shaderVer'+'sion']=-(0x1*-0xf1+0x1a50+-0x17e*0x11));}set['enabled'](_0x4d1cdf){_0x4d1cdf!==this['_enabled']&&(this['_dirtyComp'+'osition']=!(0x1*0x215a+-0x1565+-0xbf5),this['_enabled']=_0x4d1cdf,_0x4d1cdf?(this['incrementC'+'ounter'](),this['onEnable']&&this['onEnable']()):(this['decrementC'+'ounter'](),this['onDisable']&&this['onDisable']()));}get['enabled'](){return this['_enabled'];}set['clearColor'+'Buffer'](_0x274a84){this['_clearColo'+'rBuffer']=_0x274a84,this['_dirtyComp'+'osition']=!(0x2248+0x1*0x17f3+-0x3a3b);}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'+'Buffer'](_0x490af9){this['_clearDept'+'hBuffer']=_0x490af9,this['_dirtyComp'+'osition']=!(0x1d52+0x2b*0x72+0x6*-0x814);}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'ilBuffer'](_0xc71f42){this['_clearSten'+'cilBuffer']=_0xc71f42,this['_dirtyComp'+'osition']=!(0x139*0x19+-0x1dd7+-0xba);}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}get['hasCluster'+'edLights'](){return this['_clustered'+'LightsSet']['size']>-0x19f6+-0x2198+0x3b8e;}get['clusteredL'+'ightsSet'](){return this['_clustered'+'LightsSet'];}['incrementC'+'ounter'](){this['_refCounte'+'r']===-0x1048+0xed3+0x175&&(this['_enabled']=!(-0x1c91+-0x11c*0x4+0x7*0x4b7),this['onEnable']&&this['onEnable']()),this['_refCounte'+'r']++;}['decrementC'+'ounter'](){if(this['_refCounte'+'r']===-0xf8e+-0x1*-0x6ab+0x8e4)this['_enabled']=!(0x1a*-0x21+0xd*0x167+0x38*-0x44),this['onDisable']&&this['onDisable']();else{if(this['_refCounte'+'r']===0x336+0x1e13+-0x2149){w['warn']('Trying\x20to\x20'+'decrement\x20'+'layer\x20coun'+'ter\x20below\x20'+'0');return;}}this['_refCounte'+'r']--;}['addMeshIns'+'tances'](_0x3887cb,_0x92844e){const _0x5b95dd=this['meshInstan'+'ces'],_0x1a7d5c=this['meshInstan'+'cesSet'];for(let _0x135d34=-0x1db0*0x1+-0x178c+0x353c;_0x135d34<_0x3887cb['length'];_0x135d34++){const _0x5ec952=_0x3887cb[_0x135d34];_0x1a7d5c['has'](_0x5ec952)||(_0x5b95dd['push'](_0x5ec952),_0x1a7d5c['add'](_0x5ec952),Kl['add'](_0x5ec952['material']));}if(_0x92844e||this['addShadowC'+'asters'](_0x3887cb),Kl['size']>0x12b3+0x43*0x51+0x27e6*-0x1){const _0x1a054a=this['_shaderVer'+'sion'];Kl['forEach'](_0x541111=>{_0x1a054a>=0x2569*0x1+0xa01+-0x7*0x6c6&&_0x541111['_shaderVer'+'sion']!==_0x1a054a&&(_0x541111['getShaderV'+'ariant']!==er['prototype']['getShaderV'+'ariant']&&_0x541111['clearVaria'+'nts'](),_0x541111['_shaderVer'+'sion']=_0x1a054a);}),Kl['clear']();}}['removeMesh'+'Instances'](_0xc17e73,_0x28348b){const _0x4388e5=this['meshInstan'+'ces'],_0x4a54bc=this['meshInstan'+'cesSet'];for(let _0x22969c=-0x99*-0x25+0x53*-0xb+-0x128c;_0x22969c<_0xc17e73['length'];_0x22969c++){const _0x225cc1=_0xc17e73[_0x22969c];if(_0x4a54bc['has'](_0x225cc1)){_0x4a54bc['delete'](_0x225cc1);const _0x1ed8dd=_0x4388e5['indexOf'](_0x225cc1);_0x1ed8dd>=0x1dac+0x1516*0x1+-0x1*0x32c2&&_0x4388e5['splice'](_0x1ed8dd,0x4*-0x4cd+-0x254+-0x1*-0x1589);}}_0x28348b||this['removeShad'+'owCasters'](_0xc17e73);}['addShadowC'+'asters'](_0x443c3c){const _0x164c81=this['shadowCast'+'ers'],_0x395ca9=this['shadowCast'+'ersSet'];for(let _0x124645=-0x2fa*-0x3+-0x1c2+-0x72c;_0x124645<_0x443c3c['length'];_0x124645++){const _0xdef841=_0x443c3c[_0x124645];_0xdef841['castShadow']&&!_0x395ca9['has'](_0xdef841)&&(_0x395ca9['add'](_0xdef841),_0x164c81['push'](_0xdef841));}}['removeShad'+'owCasters'](_0x4ff333){const _0x53c10e=this['shadowCast'+'ers'],_0x4474ff=this['shadowCast'+'ersSet'];for(let _0x1e55db=0x1*-0x18eb+-0xba9+0x4*0x925;_0x1e55db<_0x4ff333['length'];_0x1e55db++){const _0x29582f=_0x4ff333[_0x1e55db];if(_0x4474ff['has'](_0x29582f)){_0x4474ff['delete'](_0x29582f);const _0xa387f0=_0x53c10e['indexOf'](_0x29582f);_0xa387f0>=-0x64*-0x25+-0x1c81*0x1+0xe0d&&_0x53c10e['splice'](_0xa387f0,0x2233+-0x26de+-0x17*-0x34);}}}['clearMeshI'+'nstances'](_0x2f7524=!(0xad2+0x16bb+-0x218c)){this['meshInstan'+'ces']['length']=-0x86*0x24+0x15c5+-0x2ed,this['meshInstan'+'cesSet']['clear'](),_0x2f7524||(this['shadowCast'+'ers']['length']=-0x1*0xd1c+0x281*-0xe+-0x89*-0x5a,this['shadowCast'+'ersSet']['clear']());}['markLights'+'Dirty'](){this['_lightHash'+'Dirty']=!(0x1232+-0x1803*0x1+-0x5d1*-0x1),this['_lightIdHa'+'shDirty']=!(0x21*-0x6e+-0x1de*0x14+0x3386),this['_splitLigh'+'tsDirty']=!(0x4a9*0x6+0x1603+-0x31f9);}['hasLight'](_0xd1e85){return this['_lightsSet']['has'](_0xd1e85);}['addLight'](_0x1afa9e){const _0x55d636=_0x1afa9e['light'];this['_lightsSet']['has'](_0x55d636)||(this['_lightsSet']['add'](_0x55d636),this['_lights']['push'](_0x55d636),this['markLights'+'Dirty']()),_0x55d636['type']!==ve&&this['_clustered'+'LightsSet']['add'](_0x55d636);}['removeLigh'+'t'](_0x4e9aa9){const _0x131804=_0x4e9aa9['light'];this['_lightsSet']['has'](_0x131804)&&(this['_lightsSet']['delete'](_0x131804),this['_lights']['splice'](this['_lights']['indexOf'](_0x131804),0xdbd*0x1+-0xbf5*-0x2+0x4f*-0x7a),this['markLights'+'Dirty']()),_0x131804['type']!==ve&&this['_clustered'+'LightsSet']['delete'](_0x131804);}['clearLight'+'s'](){this['_lightsSet']['forEach'](_0x27d4c0=>_0x27d4c0['removeLaye'+'r'](this)),this['_lightsSet']['clear'](),this['_clustered'+'LightsSet']['clear'](),this['_lights']['length']=-0x19f*-0x5+0x2*0x467+-0x10e9,this['markLights'+'Dirty']();}get['splitLight'+'s'](){if(this['_splitLigh'+'tsDirty']){this['_splitLigh'+'tsDirty']=!(0x1*-0x1a60+0x14e3+-0x26*-0x25);const _0x444f97=this['_splitLigh'+'ts'];for(let _0xaaf908=0xa24+0xfd4+0x115*-0x18;_0xaaf908<_0x444f97['length'];_0xaaf908++)_0x444f97[_0xaaf908]['length']=-0x1a6d+0x178a+0x2e3;const _0xd069fd=this['_lights'];for(let _0x1c071b=-0x5*0x275+0x2*0x751+0x259*-0x1;_0x1c071b<_0xd069fd['length'];_0x1c071b++){const _0xaeab87=_0xd069fd[_0x1c071b];_0xaeab87['enabled']&&_0x444f97[_0xaeab87['_type']]['push'](_0xaeab87);}for(let _0x2174c7=0x12b5+0x1fd8+-0x1*0x328d;_0x2174c7<_0x444f97['length'];_0x2174c7++)_0x444f97[_0x2174c7]['sort']((_0x2373b6,_0x1ea778)=>_0x2373b6['key']-_0x1ea778['key']);}return this['_splitLigh'+'ts'];}['evaluateLi'+'ghtHash'](_0x14e225,_0x35073e,_0xffa52e){let _0x14c4b4=-0x1900+0x4*-0x7bb+0x37ec;const _0x5448f9=this['_lights'];for(let _0x4fa7a0=-0x9d4+-0xf*0x7f+0x1145;_0x4fa7a0<_0x5448f9['length'];_0x4fa7a0++){const _0x4e2632=_0x5448f9[_0x4fa7a0]['type']!==ve;(_0x14e225&&_0x4e2632||_0x35073e&&!_0x4e2632)&&so['push'](_0xffa52e?_0x5448f9[_0x4fa7a0]['id']:_0x5448f9[_0x4fa7a0]['key']);}return so['length']>-0x5*0x10f+-0x21c5+-0x28*-0xfa&&(so['sort'](),_0x14c4b4=iy(so),so['length']=-0xfef+-0xdb8+0x1da7),_0x14c4b4;}['getLightHa'+'sh'](_0x3bed37){return this['_lightHash'+'Dirty']&&(this['_lightHash'+'Dirty']=!(-0x1ae1+-0x15b*0x11+0x31ed),this['_lightHash']=this['evaluateLi'+'ghtHash'](!_0x3bed37,!(-0x206c+0x287*0x3+-0x18d7*-0x1),!(-0x1*0x13a9+-0x148b*-0x1+0x2d*-0x5))),this['_lightHash'];}['getLightId'+'Hash'](){return this['_lightIdHa'+'shDirty']&&(this['_lightIdHa'+'shDirty']=!(0x1*0x12bf+0x45*0x33+0x207d*-0x1),this['_lightIdHa'+'sh']=this['evaluateLi'+'ghtHash'](!(-0x7d8+0x11c3+-0x9eb),!(0x1*-0x9c8+-0x1*-0xe6b+-0x4a2),!(-0x16f*-0x16+-0x14e5+-0x221*0x5))),this['_lightIdHa'+'sh'];}['addCamera'](_0x1de18c){this['camerasSet']['has'](_0x1de18c['camera'])||(this['camerasSet']['add'](_0x1de18c['camera']),this['cameras']['push'](_0x1de18c),this['_dirtyComp'+'osition']=!(0x139b+-0x4*0x4bb+-0x1*0xaf));}['removeCame'+'ra'](_0x30d3af){if(this['camerasSet']['has'](_0x30d3af['camera'])){this['camerasSet']['delete'](_0x30d3af['camera']);const _0x7ee31a=this['cameras']['indexOf'](_0x30d3af);this['cameras']['splice'](_0x7ee31a,0x3c*0xa5+0xefb+-0x35a6),this['_dirtyComp'+'osition']=!(-0x9*-0x51+-0xdc4+0xaeb);}}['clearCamer'+'as'](){this['cameras']['length']=-0x22e3*0x1+0xaa6*-0x1+-0x2d89*-0x1,this['camerasSet']['clear'](),this['_dirtyComp'+'osition']=!(0xe4b+-0x1*-0x20af+-0x2*0x177d);}['_calculate'+'SortDistan'+'ces'](_0x2c67af,_0xcfd506,_0x36fb06){const _0x45daee=_0x2c67af['length'],{x:_0x48a3ee,y:_0x374286,z:_0x27fe28}=_0xcfd506,{x:_0x56dac9,y:_0x34907d,z:_0x11db87}=_0x36fb06;for(let _0x4aac68=-0x204*0x13+-0x261f*-0x1+0x2d;_0x4aac68<_0x45daee;_0x4aac68++){const _0x485726=_0x2c67af[_0x4aac68];let _0x55d74d;if(_0x485726['calculateS'+'ortDistanc'+'e'])_0x55d74d=_0x485726['calculateS'+'ortDistanc'+'e'](_0x485726,_0xcfd506,_0x36fb06);else{const _0x392cd1=_0x485726['aabb']['center'];_0x55d74d=(_0x392cd1['x']-_0x48a3ee)*_0x56dac9+(_0x392cd1['y']-_0x374286)*_0x34907d+(_0x392cd1['z']-_0x27fe28)*_0x11db87;}const _0x51dab9=_0x485726['_drawBucke'+'t']*(-0x303b83*0x1d1+-0xc50de66+0x1*0x9f87c159);_0x485726['_sortKeyDy'+'namic']=_0x51dab9+_0x55d74d;}}['getCulledI'+'nstances'](_0x263c84){let _0x1afe87=this['_visibleIn'+'stances']['get'](_0x263c84);return _0x1afe87||(_0x1afe87=new Eb(),this['_visibleIn'+'stances']['set'](_0x263c84,_0x1afe87)),_0x1afe87;}['sortVisibl'+'e'](_0x7a001,_0x2fc57e){const _0xa852f5=_0x2fc57e?this['transparen'+'tSortMode']:this['opaqueSort'+'Mode'];if(_0xa852f5===Cc)return;const _0x2993c3=this['getCulledI'+'nstances'](_0x7a001),_0x2d6495=_0x2fc57e?_0x2993c3['transparen'+'t']:_0x2993c3['opaque'],_0x45c244=_0x7a001['node'];if(_0xa852f5===mw){const _0x1fba66=_0x45c244['getPositio'+'n'](),_0x589f43=_0x45c244['forward'];this['customCalc'+'ulateSortV'+'alues']&&this['customCalc'+'ulateSortV'+'alues'](_0x2d6495,_0x2d6495['length'],_0x1fba66,_0x589f43),this['customSort'+'Callback']&&_0x2d6495['sort'](this['customSort'+'Callback']);}else{if(_0xa852f5===zm||_0xa852f5===pw){const _0x38fea1=_0x45c244['getPositio'+'n'](),_0x4771a6=_0x45c244['forward'];this['_calculate'+'SortDistan'+'ces'](_0x2d6495,_0x38fea1,_0x4771a6);}_0x2d6495['sort'](wb[_0xa852f5]);}}}const bb=(_0x3c2659,_0x53d698)=>_0x3c2659['priority']-_0x53d698['priority'],el=_0x2b171b=>_0x2b171b['sort'](bb);class Bf extends me{constructor(_0x449e79='Untitled'){super(),h(this,'layerList',[]),h(this,'layerIdMap',new Map()),h(this,'layerNameM'+'ap',new Map()),h(this,'layerOpaqu'+'eIndexMap',new Map()),h(this,'layerTrans'+'parentInde'+'xMap',new Map()),h(this,'subLayerLi'+'st',[]),h(this,'subLayerEn'+'abled',[]),h(this,'cameras',[]),h(this,'_renderAct'+'ions',[]),h(this,'_dirty',!(-0x37*0x83+0x1f57+-0x2b*0x13)),(this['name']=_0x449e79,this['_opaqueOrd'+'er']={},this['_transpare'+'ntOrder']={});}['destroy'](){this['destroyRen'+'derActions']();}['destroyRen'+'derActions'](){this['_renderAct'+'ions']['forEach'](_0x48bc23=>_0x48bc23['destroy']()),this['_renderAct'+'ions']['length']=0x5c*0x21+-0x126e*0x2+0x1900;}['markDirty'](){this['_dirty']=!(0x31c*0xc+0x1*0x16db+-0x1*0x3c2b);}['_update'](){const _0x868582=this['layerList']['length'];if(!this['_dirty']){for(let _0x2ad344=-0x53*0x71+0x23dd+0xc6*0x1;_0x2ad344<_0x868582;_0x2ad344++)if(this['layerList'][_0x2ad344]['_dirtyComp'+'osition']){this['_dirty']=!(-0x3*0x9+0x1109+-0x10ee);break;}}if(this['_dirty']){this['_dirty']=!(-0xe87+0x9df+0x4a9),this['cameras']['length']=-0x2cd*-0x7+-0x1a*0x59+-0xa91;for(let _0x5dd7e8=-0x1511+-0xf*-0x27+0x12c8;_0x5dd7e8<_0x868582;_0x5dd7e8++){const _0x17881c=this['layerList'][_0x5dd7e8];_0x17881c['_dirtyComp'+'osition']=!(0x9e*-0x3d+-0x7*0x5f+0x2*0x1420);for(let _0x2ce8bd=-0x1823*-0x1+0x1060+0x3*-0xd81;_0x2ce8bd<_0x17881c['cameras']['length'];_0x2ce8bd++){const _0x254206=_0x17881c['cameras'][_0x2ce8bd];this['cameras']['indexOf'](_0x254206)<0x22ce+-0xe9d+-0x1431&&this['cameras']['push'](_0x254206);}}this['cameras']['length']>-0x12*-0xc1+-0x31*-0x33+0x5d5*-0x4&&el(this['cameras']);let _0x43627d=-0xb9b*-0x1+0x1550+-0x20eb;this['destroyRen'+'derActions']();for(let _0x375f13=-0x7a1+0x14d6+0x467*-0x3;_0x375f13<this['cameras']['length'];_0x375f13++){const _0x3b964b=this['cameras'][_0x375f13];if(_0x3b964b['camera']['renderPass'+'es']['length']>-0x7af+-0xf1*0xc+0x12fb){this['addDummyRe'+'nderAction'](_0x43627d,_0x3b964b),_0x43627d++;continue;}let _0x25f67e=!(-0x1b45+-0xb4e+0x2693);const _0x359d45=_0x43627d;let _0x4b92bf=null,_0x180413=!(-0x1573+-0x8b9+0xf*0x203);for(let _0x4298f8=0xc81*0x1+0x1*-0x6ad+-0x1*0x5d4;_0x4298f8<_0x868582;_0x4298f8++){const _0x5a9558=this['layerList'][_0x4298f8];if(_0x5a9558['enabled']&&this['subLayerEn'+'abled'][_0x4298f8]&&_0x5a9558['cameras']['length']>-0x5*-0x3f7+-0x409+-0xfca&&_0x3b964b['layers']['indexOf'](_0x5a9558['id'])>=-0xa9*-0xc+0x1*-0x1f07+-0xa9*-0x23){!_0x180413&&_0x5a9558['id']===_0x3b964b['disablePos'+'tEffectsLa'+'yer']&&(_0x180413=!(-0x2*0x3eb+0x17cc+-0xff6),_0x4b92bf&&(_0x4b92bf['triggerPos'+'tprocess']=!(0x255b+0x1941*-0x1+-0x2*0x60d)));const _0x3ee255=this['subLayerLi'+'st'][_0x4298f8];_0x4b92bf=this['addRenderA'+'ction'](_0x43627d,_0x5a9558,_0x3ee255,_0x3b964b,_0x25f67e,_0x180413),_0x43627d++,_0x25f67e=!(-0x415+0x20f4+-0x1cde);}}_0x359d45<_0x43627d&&(_0x4b92bf['lastCamera'+'Use']=!(0x148*0x1e+0x97*-0x1d+0x1*-0x1555)),!_0x180413&&_0x4b92bf&&(_0x4b92bf['triggerPos'+'tprocess']=!(-0x2525+-0xd72+0x3297)),_0x3b964b['renderTarg'+'et']&&_0x3b964b['postEffect'+'sEnabled']&&this['propagateR'+'enderTarge'+'t'](_0x359d45-(-0x119c+-0x18ef*-0x1+-0x3a9*0x2),_0x3b964b);}this['_logRender'+'Actions']();}}['getNextRen'+'derAction'](_0xd18060){w['assert'](this['_renderAct'+'ions']['length']===_0xd18060);const _0x1b5d6c=new Xy();return this['_renderAct'+'ions']['push'](_0x1b5d6c),_0x1b5d6c;}['addDummyRe'+'nderAction'](_0x497622,_0x3542ae){const _0x19967c=this['getNextRen'+'derAction'](_0x497622);_0x19967c['camera']=_0x3542ae,_0x19967c['useCameraP'+'asses']=!(-0x263c+-0x48d+0x2ac9);}['addRenderA'+'ction'](_0x479ec9,_0x274ff8,_0x2f1c66,_0xacb62a,_0x3fa9a4,_0x837b61){let _0x1e2161=_0x274ff8['id']!==ps?_0xacb62a['renderTarg'+'et']:null,_0x3fdfb8=!(-0x1d62+-0x16e8+-0x344b*-0x1);const _0x5359d6=this['_renderAct'+'ions'];for(let _0x126e03=_0x479ec9-(-0x2f*-0x8a+0x5*0x23+-0xb4*0x25);_0x126e03>=0x939+0x1421+0x22*-0xdd;_0x126e03--)if(_0x5359d6[_0x126e03]['camera']===_0xacb62a&&_0x5359d6[_0x126e03]['renderTarg'+'et']===_0x1e2161){_0x3fdfb8=!(0x17b8+0x1d0b+-0xd*0x40f);break;}_0x837b61&&_0xacb62a['postEffect'+'sEnabled']&&(_0x1e2161=null);const _0x305301=this['getNextRen'+'derAction'](_0x479ec9);_0x305301['triggerPos'+'tprocess']=!(-0x26c9+0x1*-0x23a7+0x1*0x4a71),_0x305301['layer']=_0x274ff8,_0x305301['transparen'+'t']=_0x2f1c66,_0x305301['camera']=_0xacb62a,_0x305301['renderTarg'+'et']=_0x1e2161,_0x305301['firstCamer'+'aUse']=_0x3fa9a4,_0x305301['lastCamera'+'Use']=!(0xd13*0x2+-0x91d+-0x1108);const _0x50c605=_0x3fa9a4||!_0x3fdfb8,_0x2a5e16=_0x274ff8['clearColor'+'Buffer']||_0x274ff8['clearDepth'+'Buffer']||_0x274ff8['clearStenc'+'ilBuffer'];return(_0x50c605||_0x2a5e16)&&_0x305301['setupClear'+'s'](_0x50c605?_0xacb62a:void(-0x9e*-0x13+0x10*0x7f+0x9d5*-0x2),_0x274ff8),_0x305301;}['propagateR'+'enderTarge'+'t'](_0x551414,_0x5cc523){for(let _0x25020c=_0x551414;_0x25020c>=-0x4e*0x47+-0x174+0x3*0x7b2;_0x25020c--){const _0x45b4a3=this['_renderAct'+'ions'][_0x25020c],_0x2b5016=_0x45b4a3['layer'];if(_0x45b4a3['renderTarg'+'et']&&_0x2b5016['id']!==ps)break;if(_0x2b5016['id']===ps)continue;if(_0x45b4a3['useCameraP'+'asses'])break;const _0x337639=_0x45b4a3==null?void(-0x43*0x1+-0x1d32+-0x1d75*-0x1):_0x45b4a3['camera']['camera'];if(_0x337639&&(!_0x5cc523['camera']['rect']['equals'](_0x337639['rect'])||!_0x5cc523['camera']['scissorRec'+'t']['equals'](_0x337639['scissorRec'+'t'])))break;_0x45b4a3['renderTarg'+'et']=_0x5cc523['renderTarg'+'et'];}}['_logRender'+'Actions'](){if(mi['get'](Pl)){w['trace'](Pl,'Render\x20Act'+'ions\x20for\x20c'+'omposition'+':\x20'+this['name']);for(let _0x4ecd80=-0xad*-0x37+-0x180b*0x1+-0x1e*0x70;_0x4ecd80<this['_renderAct'+'ions']['length'];_0x4ecd80++){const _0x5a827a=this['_renderAct'+'ions'][_0x4ecd80],_0x1b55d4=_0x5a827a['camera'];if(_0x5a827a['useCameraP'+'asses'])w['trace'](Pl,_0x4ecd80+('CustomPass'+'es\x20Cam:\x20')+(_0x1b55d4?_0x1b55d4['entity']['name']:'-'));else{const _0x34e062=_0x5a827a['layer'],_0x293b98=_0x34e062['enabled']&&this['isEnabled'](_0x34e062,_0x5a827a['transparen'+'t']),_0x5e50d2=(_0x5a827a['clearColor']?'Color\x20':'.....\x20')+(_0x5a827a['clearDepth']?'Depth\x20':'.....\x20')+(_0x5a827a['clearStenc'+'il']?'Stencil':'.......');w['trace'](Pl,_0x4ecd80+('\x20Cam:\x20'+(_0x1b55d4?_0x1b55d4['entity']['name']:'-'))['padEnd'](0xe1c+-0x2315+0x150f,'\x20')+('\x20Lay:\x20'+_0x34e062['name'])['padEnd'](0x26df*-0x1+-0x5*0x183+0x394*0xd,'\x20')+(_0x5a827a['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x293b98?'\x20ENABLED\x20':'\x20DISABLED')+('\x20RT:\x20'+(_0x5a827a['renderTarg'+'et']?_0x5a827a['renderTarg'+'et']['name']:'-'))['padEnd'](0x1a*-0x68+-0x1356+0x1*0x1e04,'\x20')+'\x20Clear:\x20'+_0x5e50d2+(_0x5a827a['firstCamer'+'aUse']?'\x20CAM-FIRST':'')+(_0x5a827a['lastCamera'+'Use']?'\x20CAM-LAST':'')+(_0x5a827a['triggerPos'+'tprocess']?'\x20POSTPROCE'+'SS':''));}}}}['_isLayerAd'+'ded'](_0x219ce1){const _0x2277d2=this['layerIdMap']['get'](_0x219ce1['id'])===_0x219ce1;return w['assert'](!_0x2277d2,'Layer\x20is\x20a'+'lready\x20add'+'ed:\x20'+_0x219ce1['name']),_0x2277d2;}['_isSublaye'+'rAdded'](_0x186560,_0x137cf){return(_0x137cf?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['get'](_0x186560)!==void(-0xc40+0x25*-0x5c+0x4*0x663)?(w['error']('Sublayer\x20'+_0x186560['name']+(',\x20transpar'+'ent:\x20')+_0x137cf+('\x20is\x20alread'+'y\x20added.')),!(0xc6c+0x34*-0x5+-0x2da*0x4)):!(-0x1*-0x1313+0x802+-0x2*0xd8a);}['push'](_0x3d47bb){this['_isLayerAd'+'ded'](_0x3d47bb)||(this['layerList']['push'](_0x3d47bb),this['layerList']['push'](_0x3d47bb),this['_opaqueOrd'+'er'][_0x3d47bb['id']]=this['subLayerLi'+'st']['push'](!(-0x2523+-0xb6a+-0x9b6*-0x5))-(0x122d+0x7*0x6f+-0x1535),this['_transpare'+'ntOrder'][_0x3d47bb['id']]=this['subLayerLi'+'st']['push'](!(0x20db+0xa51+-0x2b2c))-(-0x13*-0x3+-0x146*0xb+0xdca),this['subLayerEn'+'abled']['push'](!(-0x5d*-0x27+-0x124+-0xd07)),this['subLayerEn'+'abled']['push'](!(0x55*0x6f+-0x114a+-0x1391*0x1)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x269*0x8+-0x6d1*0x5+0x2cf*0x13),this['fire']('add',_0x3d47bb));}['insert'](_0x408711,_0xfcf8e8){if(this['_isLayerAd'+'ded'](_0x408711))return;this['layerList']['splice'](_0xfcf8e8,0xf64+0x1944+-0x1*0x28a8,_0x408711,_0x408711),this['subLayerLi'+'st']['splice'](_0xfcf8e8,-0xc72+-0x2248*-0x1+0x1*-0x15d6,!(0x1915+0x21b2+0x3ac6*-0x1),!(-0x1adb*0x1+-0x1b*0xbb+-0x174a*-0x2));const _0x3b1b81=this['layerList']['length'];this['_updateOpa'+'queOrder'](_0xfcf8e8,_0x3b1b81-(0x1546+0xd8*-0x12+0x9*-0xad)),this['_updateTra'+'nsparentOr'+'der'](_0xfcf8e8,_0x3b1b81-(0x99e*0x3+0x1a7+-0x1e80)),this['subLayerEn'+'abled']['splice'](_0xfcf8e8,-0x1523+0x1015+0x50e,!(0x3*-0xb37+0x14a3+0xd02),!(-0x26f4+0x1da5*-0x1+0x4499*0x1)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x1*0x10f3+-0x20fa+-0xb*-0x175),this['fire']('add',_0x408711);}['remove'](_0x1377b8){let _0x3a0daa=this['layerList']['indexOf'](_0x1377b8);for(delete this['_opaqueOrd'+'er'][_0x3a0daa],delete this['_transpare'+'ntOrder'][_0x3a0daa];_0x3a0daa>=0x26e9+0x1*0x1c27+-0x3a*0x128;)this['layerList']['splice'](_0x3a0daa,-0x41c+0x3d*-0x56+0x1*0x189b),this['subLayerLi'+'st']['splice'](_0x3a0daa,-0xe60+0x1a*0x113+-0xd8d),this['subLayerEn'+'abled']['splice'](_0x3a0daa,-0x200+0xfca+-0xdc9),_0x3a0daa=this['layerList']['indexOf'](_0x1377b8),this['_dirty']=!(-0x11e6+-0x920*-0x3+0x1*-0x97a),this['fire']('remove',_0x1377b8);const _0x444cd2=this['layerList']['length'];this['_updateOpa'+'queOrder'](0x6e2+0x20*0x116+-0x2*0x14d1,_0x444cd2-(0x15*-0x1bd+-0x1855+0x3cd7)),this['_updateTra'+'nsparentOr'+'der'](0xfa0+0x7a7*-0x1+0x7f9*-0x1,_0x444cd2-(0x4*0x1a3+0x15aa+-0xf9*0x1d)),this['_updateLay'+'erMaps']();}['pushOpaque'](_0x2552fb){this['_isSublaye'+'rAdded'](_0x2552fb,!(0x23*0xae+-0x2cf*0x1+-0x1e*0xb3))||(this['layerList']['push'](_0x2552fb),this['_opaqueOrd'+'er'][_0x2552fb['id']]=this['subLayerLi'+'st']['push'](!(0x206b*-0x1+0x6*0x676+-0x32c*0x2))-(0x5*-0x16a+-0x1*0x1bce+0x1*0x22e1),this['subLayerEn'+'abled']['push'](!(-0x3*-0x2ff+0x9*-0xce+-0x1bf)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x21*-0xd1+-0x1b39+0x362a),this['fire']('add',_0x2552fb));}['insertOpaq'+'ue'](_0x83bb73,_0x542193){if(this['_isSublaye'+'rAdded'](_0x83bb73,!(0xe3*0x13+-0x1808*-0x1+-0x28e0)))return;this['layerList']['splice'](_0x542193,-0xb1*-0x25+-0x24b2+0xb1d*0x1,_0x83bb73),this['subLayerLi'+'st']['splice'](_0x542193,0x1d76+0xc0d+-0x2983,!(-0x1f14+-0x1cda+-0x1*-0x3bef));const _0x4d94c1=this['subLayerLi'+'st']['length'];this['_updateOpa'+'queOrder'](_0x542193,_0x4d94c1-(0x7a2*-0x4+-0x1bc9+0x1d29*0x2)),this['subLayerEn'+'abled']['splice'](_0x542193,0x182d+0x11*0x1a+-0x15d*0x13,!(-0x700+-0xdf8+0x1*0x14f8)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x15b3+0x1257+-0x52*0x7d),this['fire']('add',_0x83bb73);}['removeOpaq'+'ue'](_0x162dbd){for(let _0x23a6a5=-0x1463*-0x1+0xb*-0x2d1+0x6*0x1c4,_0x1542ed=this['layerList']['length'];_0x23a6a5<_0x1542ed;_0x23a6a5++)if(this['layerList'][_0x23a6a5]===_0x162dbd&&!this['subLayerLi'+'st'][_0x23a6a5]){this['layerList']['splice'](_0x23a6a5,0x1ba7+0x124*0x18+0x1*-0x3706),this['subLayerLi'+'st']['splice'](_0x23a6a5,0xcc+-0x4ad+0x3e2),_0x1542ed--,this['_updateOpa'+'queOrder'](_0x23a6a5,_0x1542ed-(-0x9*-0x39f+-0x1e7*0x13+0x38f*0x1)),this['subLayerEn'+'abled']['splice'](_0x23a6a5,-0x105a*0x2+-0xc28+-0x5*-0x8f9),this['_dirty']=!(0x1d*0x103+0x1*0x57c+0x1*-0x22d3),this['layerList']['indexOf'](_0x162dbd)<-0x89b+-0x1*-0x1e73+-0x15d8&&this['fire']('remove',_0x162dbd);break;}this['_updateLay'+'erMaps']();}['pushTransp'+'arent'](_0x1c8250){this['_isSublaye'+'rAdded'](_0x1c8250,!(-0x25ad+-0x1*0x6c7+0x2c74))||(this['layerList']['push'](_0x1c8250),this['_transpare'+'ntOrder'][_0x1c8250['id']]=this['subLayerLi'+'st']['push'](!(0xeb4+-0xfc0+-0x43*-0x4))-(0x423+-0x1*-0x169f+0x8eb*-0x3),this['subLayerEn'+'abled']['push'](!(0x1ec+0x86c+-0xa58)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x1976+-0x195d+0x32d3),this['fire']('add',_0x1c8250));}['insertTran'+'sparent'](_0x5c0a9e,_0x5b3f8c){if(this['_isSublaye'+'rAdded'](_0x5c0a9e,!(-0x1*-0x30a+-0x623+0x319)))return;this['layerList']['splice'](_0x5b3f8c,0x7d3+0x1*-0x10d3+-0x24*-0x40,_0x5c0a9e),this['subLayerLi'+'st']['splice'](_0x5b3f8c,0x8b*-0x37+-0x4*-0x503+0x9d1,!(-0xb*0x25+0xf30+0x3b*-0x3b));const _0x5aae21=this['subLayerLi'+'st']['length'];this['_updateTra'+'nsparentOr'+'der'](_0x5b3f8c,_0x5aae21-(0x18c3+-0x11*-0x136+-0x2d58)),this['subLayerEn'+'abled']['splice'](_0x5b3f8c,0xa4a+-0x1b0d+0x10c3,!(-0x6aa*-0x2+0x107a+0x442*-0x7)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x1*-0x2329+0x29*-0x3+0x2*0x11d2),this['fire']('add',_0x5c0a9e);}['removeTran'+'sparent'](_0x10d60c){for(let _0xaa7184=0x69b+-0x2044+0x19a9,_0x10b31d=this['layerList']['length'];_0xaa7184<_0x10b31d;_0xaa7184++)if(this['layerList'][_0xaa7184]===_0x10d60c&&this['subLayerLi'+'st'][_0xaa7184]){this['layerList']['splice'](_0xaa7184,-0xae0+0x115*-0x7+0x1274),this['subLayerLi'+'st']['splice'](_0xaa7184,0x3f0*-0x4+0x18d6+-0x915),_0x10b31d--,this['_updateTra'+'nsparentOr'+'der'](_0xaa7184,_0x10b31d-(0x4c4+0x1141*0x1+-0x1604)),this['subLayerEn'+'abled']['splice'](_0xaa7184,0xa48+0x1*0x113f+-0x1b86),this['_dirty']=!(0x410*-0x4+-0x1*0xbb7+-0x1*-0x1bf7),this['layerList']['indexOf'](_0x10d60c)<-0xd05+-0x1c3*0xd+0x4*0x8fb&&this['fire']('remove',_0x10d60c);break;}this['_updateLay'+'erMaps']();}['getOpaqueI'+'ndex'](_0x8e4a4f){return this['layerOpaqu'+'eIndexMap']['get'](_0x8e4a4f)??-(0x1961+0x71*0xb+-0x1*0x1e3b);}['getTranspa'+'rentIndex'](_0x26b611){return this['layerTrans'+'parentInde'+'xMap']['get'](_0x26b611)??-(-0x116a+-0x878+0x19e3*0x1);}['isEnabled'](_0x288a5c,_0x4aa943){if(_0x288a5c['enabled']){const _0x5e17d0=_0x4aa943?this['getTranspa'+'rentIndex'](_0x288a5c):this['getOpaqueI'+'ndex'](_0x288a5c);if(_0x5e17d0>=0x5ba*-0x2+0x10*0x8f+-0x1c*-0x17)return this['subLayerEn'+'abled'][_0x5e17d0];}return!(-0xd5b+0x2345+0x47*-0x4f);}['_updateLay'+'erMaps'](){this['layerIdMap']['clear'](),this['layerNameM'+'ap']['clear'](),this['layerOpaqu'+'eIndexMap']['clear'](),this['layerTrans'+'parentInde'+'xMap']['clear']();for(let _0x219f40=-0x9e7*-0x1+-0x1f51*0x1+0x156a;_0x219f40<this['layerList']['length'];_0x219f40++){const _0x4e6799=this['layerList'][_0x219f40];this['layerIdMap']['set'](_0x4e6799['id'],_0x4e6799),this['layerNameM'+'ap']['set'](_0x4e6799['name'],_0x4e6799),(this['subLayerLi'+'st'][_0x219f40]?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['set'](_0x4e6799,_0x219f40);}}['getLayerBy'+'Id'](_0x3b6506){return this['layerIdMap']['get'](_0x3b6506)??null;}['getLayerBy'+'Name'](_0x5a412c){return this['layerNameM'+'ap']['get'](_0x5a412c)??null;}['_updateOpa'+'queOrder'](_0x32b207,_0x2f41ad){for(let _0xb3a618=_0x32b207;_0xb3a618<=_0x2f41ad;_0xb3a618++)this['subLayerLi'+'st'][_0xb3a618]===!(0x217*0x1+0x2f*0xb3+-0x22f3)&&(this['_opaqueOrd'+'er'][this['layerList'][_0xb3a618]['id']]=_0xb3a618);}['_updateTra'+'nsparentOr'+'der'](_0x1be07e,_0x1a51a8){for(let _0x1780d5=_0x1be07e;_0x1780d5<=_0x1a51a8;_0x1780d5++)this['subLayerLi'+'st'][_0x1780d5]===!(0x25d*-0x1+0x984+-0x727)&&(this['_transpare'+'ntOrder'][this['layerList'][_0x1780d5]['id']]=_0x1780d5);}['_sortLayer'+'sDescendin'+'g'](_0x266a8c,_0x33b9dd,_0x27ad6b){let _0x5153e0=-(-0x167a+-0x483+-0x1afe*-0x1),_0x39dc7e=-(0x231c+0x228e+-0x45a9);for(let _0x3c483d=-0x1*-0x1354+0xfea+-0x233e,_0x568129=_0x266a8c['length'];_0x3c483d<_0x568129;_0x3c483d++){const _0x1c72f9=_0x266a8c[_0x3c483d];_0x27ad6b['hasOwnProp'+'erty'](_0x1c72f9)&&(_0x5153e0=Math['max'](_0x5153e0,_0x27ad6b[_0x1c72f9]));}for(let _0x163339=0x174a+-0x166a+-0xe0,_0x12f34c=_0x33b9dd['length'];_0x163339<_0x12f34c;_0x163339++){const _0x4997e7=_0x33b9dd[_0x163339];_0x27ad6b['hasOwnProp'+'erty'](_0x4997e7)&&(_0x39dc7e=Math['max'](_0x39dc7e,_0x27ad6b[_0x4997e7]));}return _0x5153e0===-(-0x26cc+-0x43*0x1b+-0x6*-0x7a5)&&_0x39dc7e!==-(-0x1d3a+0x1ecd+-0x192)?0xa34+-0x330+0x703*-0x1:_0x39dc7e===-(0x269b+0x2*0x2f6+-0x2c86)&&_0x5153e0!==-(-0xb5b+0x89f*-0x4+0x518*0x9)?-(0x1e68+0x3*0x473+-0xaf*0x40):_0x39dc7e-_0x5153e0;}['sortTransp'+'arentLayer'+'s'](_0x297b9c,_0x1d8e24){return this['_sortLayer'+'sDescendin'+'g'](_0x297b9c,_0x1d8e24,this['_transpare'+'ntOrder']);}['sortOpaque'+'Layers'](_0x1e387c,_0x13211f){return this['_sortLayer'+'sDescendin'+'g'](_0x1e387c,_0x13211f,this['_opaqueOrd'+'er']);}}const Zl=new D(),wi={'bias':0x0,'normalBias':0x0},io=new ie(),$d={'r':0x0,'g':0x1,'b':0x2,'a':0x3},zf={'directional':ve,'omni':Ke,'point':Ke,'spot':Ze},Ab=[[new re(0x5*0x70b+0x269+0xac*-0x38,-0x80b+0x39*-0x4+0x1*0x8ef,0x1c2d+-0x26fe+0x2*0x569,0x1ae2*-0x1+0x2103*-0x1+0x3be6)],[new re(0x1015*0x2+0x7*-0x58f+0x6bf,-0x12e6+-0x4ea+0x17d0,0x386+-0x941+-0x9*-0xa3+0.5,0xa0+-0x1*-0x1119+-0x1*0x11b9+0.5),new re(0x233*0x1+0x2702+0x1*-0x2935,0xa21+0x1*-0x1eef+-0xa67*-0x2+0.5,0x1f5*0xb+-0x280+-0x1307+0.5,0x1*-0x2598+0x5e0+0xfdc*0x2+0.5)],[new re(0x485+-0x43*-0x2f+-0x10d2,0xd5f+0x1*-0x88+-0xcd7,0x1d12+-0x2a8*-0x6+0x1681*-0x2+0.5,0xae1*-0x2+0x10eb+0x3*0x19d+0.5),new re(0x1*-0xd90+-0x2*-0x1186+0x16*-0xfa,-0x1ca4+-0x24b3+0x4157+0.5,0x117f*0x1+0x1d36+0x43f*-0xb+0.5,0x1bcf+-0x5*-0x4a1+-0x32f4+0.5),new re(-0xc11+-0x1*-0x1299+-0x688+0.5,-0x92d*0x3+-0x5*0x4b3+-0x3a5*-0xe,0x2*-0x1360+0x7*0x3b+0x2523+0.5,-0x1a1+0xae8+-0x947+0.5)],[new re(-0x40e*0x1+-0x2b*-0x96+-0x52*0x42,-0xe*0xf6+0x1f1e+-0x11aa,-0x5*0x578+-0x1*0x21cd+0x3d25*0x1+0.5,0x26d+-0x2131+0x2*0xf62+0.5),new re(-0x2224+-0x9*0xda+-0x29ce*-0x1,-0x1*0x25ed+0x2018*0x1+0x5d5+0.5,-0xb1f+0x1eca+-0x3ef*0x5+0.5,-0x1aa0+0x1*-0x1adf+0x357f+0.5),new re(0x244b+-0x1f65+0x39*-0x16+0.5,-0xa6d*0x2+0x8db*0x1+0x25*0x53,0x1*0x17d+0xf1a*-0x2+-0x1cb7*-0x1+0.5,0x1ca5+-0x113e+0x3cd*-0x3+0.5),new re(-0x11f8*0x1+0x187*0x19+-0x1437+0.5,-0x54*0x3b+0x24c7+0x31*-0x5b+0.5,0x9fb+0x1*-0x212+-0x7e9+0.5,-0x4c6*-0x4+0xa8b+-0x1da3+0.5)]],Cb={'rrr':0x1,'ggg':0x2,'bbb':0x4,'aaa':0x8,'rgb':0x7};let Pb=-0xf73+-0xcb*-0x31+-0xe*0x1ac;class Mb{constructor(_0x3da741,_0xed403e,_0x3c5f37){this['light']=_0x3c5f37,this['camera']=_0x3da741,this['shadowCame'+'ra']=$y['createShad'+'owCamera'](_0x3c5f37['_shadowTyp'+'e'],_0x3c5f37['_type'],_0xed403e),this['shadowMatr'+'ix']=new te(),this['shadowView'+'port']=new re(-0x1a1d+-0x1*-0x2de+-0x173f*-0x1,-0x5e5*-0x1+0x88+0xeb*-0x7,-0x28e+0x1b2d+0x112*-0x17,0x2*-0xf29+-0xa7*-0x3b+-0x82a),this['shadowScis'+'sor']=new re(-0x277*0x5+0x933+-0x320*-0x1,-0x7c1+-0x1*-0x17a4+-0xfe3,-0x1735*-0x1+0xff9+-0x272d,0x1e7f+-0x293*-0x1+0x5*-0x69d),this['projection'+'Compensati'+'on']=0x26c8+0x4a+0x683*-0x6,this['face']=_0xed403e,this['visibleCas'+'ters']=[],this['viewBindGr'+'oups']=[];}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x2777f0=>{_0x2777f0['defaultUni'+'formBuffer']['destroy'](),_0x2777f0['destroy']();}),this['viewBindGr'+'oups']['length']=0x708+0x757*-0x5+-0x5*-0x5ef;}get['shadowBuff'+'er'](){const _0x4328a5=this['shadowCame'+'ra']['renderTarg'+'et'];return _0x4328a5?this['light']['_isPcf']?_0x4328a5['depthBuffe'+'r']:_0x4328a5['colorBuffe'+'r']:null;}}class tl{constructor(_0x5d0886,_0x1e7edb){h(this,'layers',new Set()),h(this,'clusteredL'+'ighting'),h(this,'shadowDept'+'hState',Yt['DEFAULT']['clone']()),h(this,'clusteredF'+'lags',0x34e+-0xb91+0x843),h(this,'clusteredD'+'ata',new Uint32Array(-0x128+0x2*0xa46+-0x1c3*0xb)),h(this,'clusteredD'+'ata16',new Uint16Array(this['clusteredD'+'ata']['buffer'])),h(this,'_evtDevice'+'Restored',null),(this['device']=_0x5d0886,this['clusteredL'+'ighting']=_0x1e7edb,this['id']=Pb++,this['_evtDevice'+'Restored']=_0x5d0886['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this),this['_type']=ve,this['_color']=new ie(-0x907+-0x229*-0xa+-0x57*0x25+0.8,0xc5b*-0x1+0x1916+-0xcbb+0.8,0x1f7d+-0x1c5+-0x1db8+0.8),this['_intensity']=-0x632*-0x1+0x1*-0x1ca3+0x1672,this['_affectSpe'+'cularity']=!(-0x4*0x4c1+0x17d1+-0x4cd),this['_luminance']=0x7a*0x44+-0x22c6+-0x3*-0xca,this['_castShado'+'ws']=!(-0x1*0x213d+-0x31f*0x1+0x245d),this['_enabled']=!(-0x2633+-0x589*-0x5+-0xf5*-0xb),this['_mask']=Ss,this['isStatic']=!(0x11bd+0x91*0xb+-0x17f7),this['key']=-0x379+0x9bc+-0x643*0x1,this['bakeDir']=!(0x1f0d+-0xba4*0x2+-0x7c5),this['bakeNumSam'+'ples']=-0x167*0x1+-0x289+0x3f1,this['bakeArea']=-0x10ef+0x116c+0x19*-0x5,this['attenuatio'+'nStart']=0x69b+0x1*-0x242f+0x1d9e,this['attenuatio'+'nEnd']=0x75b*-0x4+0x1488+0x8ee,this['_falloffMo'+'de']=bp,this['_shadowTyp'+'e']=Ws,this['_vsmBlurSi'+'ze']=0x10b0+0x26bb+0x1bb0*-0x2,this['vsmBlurMod'+'e']=Cp,this['vsmBias']=(-0x16f*0x1+-0x15a+0x1*0x2c9+0.01)*(-0x1937*-0x1+-0x1*-0x877+0x59d*-0x6+0.25),this['_cookie']=null,this['cookieInte'+'nsity']=0xc83+0xfb9+0x1*-0x1c3b,this['_cookieFal'+'loff']=!(0x1ff6*0x1+0x1*0x1d12+0x22e*-0x1c),this['_cookieCha'+'nnel']='rgb',this['_cookieTra'+'nsform']=null,this['_cookieTra'+'nsformUnif'+'orm']=new Float32Array(-0x7*0x169+-0xc3*-0x2f+0x2*-0xcf5),this['_cookieOff'+'set']=null,this['_cookieOff'+'setUniform']=new Float32Array(-0x2506+0x1853*-0x1+0x3d5b),this['_cookieTra'+'nsformSet']=!(0xa*0x3b3+0x572+0x2a6f*-0x1),this['_cookieOff'+'setSet']=!(0x41*-0x45+0x1437+-0xd*0x35),this['_innerCone'+'Angle']=0x4*-0x59b+-0x17*-0x63+-0xdaf*-0x1,this['_outerCone'+'Angle']=0x1fd7+-0x1d*0x3b+-0x18fb,this['cascades']=null,this['_shadowMat'+'rixPalette']=null,this['_shadowCas'+'cadeDistan'+'ces']=null,this['numCascade'+'s']=0x20a0+-0x2*0x347+0x1a11*-0x1,this['_cascadeBl'+'end']=-0x5*0x2e7+0xba5+0x2de,this['cascadeDis'+'tribution']=-0x42+-0x10*-0x146+-0x141e+0.5,this['_shape']=js,this['_colorLine'+'ar']=new Float32Array(-0x1d3a+0x1*0x913+-0x1*-0x142a),this['_updateLin'+'earColor'](),this['_position']=new D(0x983+-0x14fe+0xb7b,-0xa60+0x1ae9+-0x53*0x33,0x2d*0x13+0xe7d+-0x11d4),this['_direction']=new D(0x2*0xf20+0x1*-0x923+-0x73*0x2f,0x232b+0x13*-0xa1+-0x2*0xb9c,-0x1*-0x1661+-0x1509+0x1*-0x158),this['_innerCone'+'AngleCos']=Math['cos'](this['_innerCone'+'Angle']*Math['PI']/(-0x241a+0x4*-0x859+0x4632)),this['_updateOut'+'erAngle'](this['_outerCone'+'Angle']),this['_usePhysic'+'alUnits']=void(-0x10*-0xd8+0x22c1*0x1+-0x3041*0x1),this['_shadowMap']=null,this['_shadowRen'+'derParams']=[],this['_shadowCam'+'eraParams']=[],this['shadowDist'+'ance']=0x31*-0xb2+-0x649*0x2+0x2ecc,this['_shadowRes'+'olution']=-0x1ffb+-0x5*0x31d+-0xce3*-0x4,this['_shadowBia'+'s']=-(-0x1685+-0x1e6d*-0x1+-0x7e8+0.0005),this['_shadowInt'+'ensity']=0x1bd6+-0x7f*0x40+0x3eb,this['_normalOff'+'setBias']=-0x15e3+-0x73*0x1a+0x2191,this['shadowUpda'+'teMode']=Fp,this['shadowUpda'+'teOverride'+'s']=null,this['_isVsm']=!(-0x1*0xaa0+-0x7c9+-0x1*-0x126a),this['_isPcf']=!(0x169*-0x17+0x11e0+0xe8f),this['_softShado'+'wParams']=new Float32Array(0x832*0x3+-0xfc4+-0x2*0x467),this['shadowSamp'+'les']=0x1*-0x11c8+-0x1*0x18b0+0x2a88,this['shadowBloc'+'kerSamples']=-0x194f+0xebc+0x185*0x7,this['penumbraSi'+'ze']=0x1893+0x1*-0x2287+0x9f5*0x1,this['penumbraFa'+'lloff']=-0x8c4+-0x1db4+0x43*0x93,this['_cookieMat'+'rix']=null,this['_atlasView'+'port']=null,this['atlasViewp'+'ortAllocat'+'ed']=!(-0x233b+-0xc1b+0x2f57),this['atlasVersi'+'on']=0x1c3c+0x128c+-0x2ec8,this['atlasSlotI'+'ndex']=0x2*-0xbd4+0x1254+0x554,this['atlasSlotU'+'pdated']=!(0x4*-0x78b+-0x1ff*0x11+0x401c),this['_node']=null,this['_renderDat'+'a']=[],this['visibleThi'+'sFrame']=!(-0x2*-0x78d+0x9d*0x1f+-0x221c),this['maxScreenS'+'ize']=-0x4a*-0x38+0x3*0xb53+0x3229*-0x1,this['_updateSha'+'dowBias']());}['destroy'](){var _0x2adf5b;(_0x2adf5b=this['_evtDevice'+'Restored'])==null||_0x2adf5b['off'](),this['_evtDevice'+'Restored']=null,this['_destroySh'+'adowMap'](),this['releaseRen'+'derData'](),this['_renderDat'+'a']=null;}['onDeviceRe'+'stored'](){this['shadowUpda'+'teMode']===Ps&&(this['shadowUpda'+'teMode']=gr);}['releaseRen'+'derData'](){if(this['_renderDat'+'a']){for(let _0x4782f7=0x22*0x104+-0xa3*0x1d+-0x9*0x1c9;_0x4782f7<this['_renderDat'+'a']['length'];_0x4782f7++)this['_renderDat'+'a'][_0x4782f7]['destroy']();this['_renderDat'+'a']['length']=0x1057+-0xc75*-0x1+-0x1ccc;}}['addLayer'](_0x2d1738){this['layers']['add'](_0x2d1738);}['removeLaye'+'r'](_0x1634d9){this['layers']['delete'](_0x1634d9);}set['shadowSamp'+'les'](_0x3dd9f0){this['_softShado'+'wParams'][-0x1a32+0x2568+-0x23*0x52]=_0x3dd9f0;}get['shadowSamp'+'les'](){return this['_softShado'+'wParams'][0xc*-0x1a+0x1*0x3a1+-0x269];}set['shadowBloc'+'kerSamples'](_0x4aae2b){this['_softShado'+'wParams'][0x250+0x1*-0x3df+0xc8*0x2]=_0x4aae2b;}get['shadowBloc'+'kerSamples'](){return this['_softShado'+'wParams'][-0x1*-0x101+0x1d45+-0x1e45];}set['shadowBias'](_0x544cd0){this['_shadowBia'+'s']!==_0x544cd0&&(this['_shadowBia'+'s']=_0x544cd0,this['_updateSha'+'dowBias']());}get['shadowBias'](){return this['_shadowBia'+'s'];}set['numCascade'+'s'](_0x4be3d8){(!this['cascades']||this['numCascade'+'s']!==_0x4be3d8)&&(this['cascades']=Ab[_0x4be3d8-(-0x21cb+0x475*0x7+0x85*0x5)],this['_shadowMat'+'rixPalette']=new Float32Array(0x3*0x82b+0xbe5*0x2+-0x6dd*0x7),this['_shadowCas'+'cadeDistan'+'ces']=new Float32Array(-0x1697*0x1+0x1ebb+-0x2*0x410),this['_destroySh'+'adowMap'](),this['updateKey']());}get['numCascade'+'s'](){return this['cascades']['length'];}set['cascadeBle'+'nd'](_0x3226ea){this['_cascadeBl'+'end']!==_0x3226ea&&(this['_cascadeBl'+'end']=_0x3226ea,this['updateKey']());}get['cascadeBle'+'nd'](){return this['_cascadeBl'+'end'];}set['shadowMap'](_0x3f710a){this['_shadowMap']!==_0x3f710a&&(this['_destroySh'+'adowMap'](),this['_shadowMap']=_0x3f710a);}get['shadowMap'](){return this['_shadowMap'];}set['mask'](_0x36c95e){this['_mask']!==_0x36c95e&&(this['_mask']=_0x36c95e,this['updateKey'](),this['updateClus'+'teredFlags']());}get['mask'](){return this['_mask'];}get['numShadowF'+'aces'](){const _0x28df18=this['_type'];return _0x28df18===ve?this['numCascade'+'s']:_0x28df18===Ke?-0xf56+-0x7*-0x234+-0x10:0x3db+-0x1f15+0x1b3b;}set['type'](_0x5cf18b){if(this['_type']===_0x5cf18b)return;this['_type']=_0x5cf18b,this['_destroySh'+'adowMap'](),this['_updateSha'+'dowBias'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x458cb5=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowUpda'+'teOverride'+'s']=null,this['shadowType']=_0x458cb5;}get['type'](){return this['_type'];}set['shape'](_0x42aaae){if(this['_shape']===_0x42aaae)return;this['_shape']=_0x42aaae,this['_destroySh'+'adowMap'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x323ffa=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowType']=_0x323ffa;}get['shape'](){return this['_shape'];}set['usePhysica'+'lUnits'](_0x44342c){this['_usePhysic'+'alUnits']!==_0x44342c&&(this['_usePhysic'+'alUnits']=_0x44342c,this['_updateLin'+'earColor']());}get['usePhysica'+'lUnits'](){return this['_usePhysic'+'alUnits'];}set['shadowType'](_0x695a19){if(this['_shadowTyp'+'e']===_0x695a19)return;let _0x580dc6=Xi['get'](_0x695a19);_0x580dc6||(_0x695a19=Ws);const _0x5d5270=this['device'];_0x695a19===Xo&&!_0x5d5270['textureFlo'+'atRenderab'+'le']&&!_0x5d5270['textureHal'+'fFloatRend'+'erable']&&(_0x695a19=Ws),this['_type']===Ke&&_0x695a19!==yy&&_0x695a19!==Ws&&_0x695a19!==vy&&_0x695a19!==xy&&_0x695a19!==Xo&&(_0x695a19=Ws),_0x695a19===Ap&&(!_0x5d5270['textureFlo'+'atRenderab'+'le']||!_0x5d5270['textureFlo'+'atFilterab'+'le'])&&(_0x695a19=Rf),_0x695a19===Rf&&!_0x5d5270['textureHal'+'fFloatRend'+'erable']&&(_0x695a19=Ws),_0x580dc6=Xi['get'](_0x695a19),this['_isVsm']=(_0x580dc6==null?void(0x12f9*-0x2+0x1e19+0x7d9):_0x580dc6['vsm'])??!(0x12b3+0x4cc*0x1+-0x177e),this['_isPcf']=(_0x580dc6==null?void(0x3b3*-0x7+0x55d+0xa44*0x2):_0x580dc6['pcf'])??!(-0x3a*0x2b+-0x1*-0x64d+0x372),this['_shadowTyp'+'e']=_0x695a19,this['_destroySh'+'adowMap'](),this['updateKey']();}get['shadowType'](){return this['_shadowTyp'+'e'];}set['enabled'](_0x51bd13){this['_enabled']!==_0x51bd13&&(this['_enabled']=_0x51bd13,this['layersDirt'+'y']());}get['enabled'](){return this['_enabled'];}set['castShadow'+'s'](_0x5b36b7){this['_castShado'+'ws']!==_0x5b36b7&&(this['_castShado'+'ws']=_0x5b36b7,this['_destroySh'+'adowMap'](),this['layersDirt'+'y'](),this['updateKey']());}get['castShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']!==fi&&this['_mask']!==-0x23b5+-0x45f*0x5+0x4*0xe64;}set['shadowInte'+'nsity'](_0x828382){this['_shadowInt'+'ensity']!==_0x828382&&(this['_shadowInt'+'ensity']=_0x828382,this['updateKey']());}get['shadowInte'+'nsity'](){return this['_shadowInt'+'ensity'];}get['bakeShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']===fi;}set['shadowReso'+'lution'](_0xfdf20d){this['_shadowRes'+'olution']!==_0xfdf20d&&(this['_type']===Ke?_0xfdf20d=Math['min'](_0xfdf20d,this['device']['maxCubeMap'+'Size']):_0xfdf20d=Math['min'](_0xfdf20d,this['device']['maxTexture'+'Size']),this['_shadowRes'+'olution']=_0xfdf20d,this['_destroySh'+'adowMap']());}get['shadowReso'+'lution'](){return this['_shadowRes'+'olution'];}set['vsmBlurSiz'+'e'](_0x352ee3){this['_vsmBlurSi'+'ze']!==_0x352ee3&&(_0x352ee3%(-0x6db+0x1194+-0xab7)===-0xaee+-0x1d1a+0xb7*0x38&&_0x352ee3++,this['_vsmBlurSi'+'ze']=_0x352ee3);}get['vsmBlurSiz'+'e'](){return this['_vsmBlurSi'+'ze'];}set['normalOffs'+'etBias'](_0x1f55c7){if(this['_normalOff'+'setBias']!==_0x1f55c7){const _0x54f4f5=!this['_normalOff'+'setBias']&&_0x1f55c7||this['_normalOff'+'setBias']&&!_0x1f55c7;this['_normalOff'+'setBias']=_0x1f55c7,_0x54f4f5&&this['updateKey']();}}get['normalOffs'+'etBias'](){return this['_normalOff'+'setBias'];}set['falloffMod'+'e'](_0x289a67){this['_falloffMo'+'de']!==_0x289a67&&(this['_falloffMo'+'de']=_0x289a67,this['updateKey'](),this['updateClus'+'teredFlags']());}get['falloffMod'+'e'](){return this['_falloffMo'+'de'];}set['innerConeA'+'ngle'](_0x42bb8e){this['_innerCone'+'Angle']!==_0x42bb8e&&(this['_innerCone'+'Angle']=_0x42bb8e,this['_innerCone'+'AngleCos']=Math['cos'](_0x42bb8e*Math['PI']/(0x18a*-0x1+0x2ec+-0xae)),this['updateClus'+'terData'](!(-0x245d+0xcd*-0x11+0x31fb),!(-0x1bbf+-0xb*-0x13+0x1aee)),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['innerConeA'+'ngle'](){return this['_innerCone'+'Angle'];}set['outerConeA'+'ngle'](_0x35516d){this['_outerCone'+'Angle']!==_0x35516d&&(this['_outerCone'+'Angle']=_0x35516d,this['_updateOut'+'erAngle'](_0x35516d),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['outerConeA'+'ngle'](){return this['_outerCone'+'Angle'];}set['penumbraSi'+'ze'](_0x5b57e6){this['_penumbraS'+'ize']=_0x5b57e6,this['_softShado'+'wParams'][0x13f7*0x1+0x79a*0x4+-0x325d]=_0x5b57e6;}get['penumbraSi'+'ze'](){return this['_penumbraS'+'ize'];}set['penumbraFa'+'lloff'](_0x2632f7){this['_softShado'+'wParams'][-0x28*-0xf1+0x1*0xa4e+-0x2ff3]=_0x2632f7;}get['penumbraFa'+'lloff'](){return this['_softShado'+'wParams'][0x150*-0x1a+0x1*0x1739+0xb*0xfe];}['_updateOut'+'erAngle'](_0x2406b0){const _0x28bdc2=_0x2406b0*Math['PI']/(-0x172f+-0x7fb+-0x1fde*-0x1);this['_outerCone'+'AngleCos']=Math['cos'](_0x28bdc2),this['_outerCone'+'AngleSin']=Math['sin'](_0x28bdc2),this['updateClus'+'terData'](!(-0x2660+-0x11f5*0x1+-0x1c2b*-0x2),!(0x1baf*0x1+0x11*0x6d+-0x22ec));}set['intensity'](_0x3afa45){this['_intensity']!==_0x3afa45&&(this['_intensity']=_0x3afa45,this['_updateLin'+'earColor']());}get['intensity'](){return this['_intensity'];}set['affectSpec'+'ularity'](_0x41554d){this['_type']===ve&&(this['_affectSpe'+'cularity']=_0x41554d,this['updateKey']());}get['affectSpec'+'ularity'](){return this['_affectSpe'+'cularity'];}set['luminance'](_0x368045){this['_luminance']!==_0x368045&&(this['_luminance']=_0x368045,this['_updateLin'+'earColor']());}get['luminance'](){return this['_luminance'];}get['cookieMatr'+'ix'](){return this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new te()),this['_cookieMat'+'rix'];}get['atlasViewp'+'ort'](){return this['_atlasView'+'port']||(this['_atlasView'+'port']=new re(-0x1170+-0x13d4+-0x35*-0xb4,-0x1*0x1d2d+0x23a*-0x9+0x2b*0x125,-0x1*-0x1c9+0x19*-0x49+0x559*0x1,0x237+-0x1*0x281+0x4b)),this['_atlasView'+'port'];}set['cookie'](_0x5dbca3){this['_cookie']!==_0x5dbca3&&(this['_cookie']=_0x5dbca3,this['updateKey']());}get['cookie'](){return this['_cookie'];}set['cookieFall'+'off'](_0x2b3dd9){this['_cookieFal'+'loff']!==_0x2b3dd9&&(this['_cookieFal'+'loff']=_0x2b3dd9,this['updateKey']());}get['cookieFall'+'off'](){return this['_cookieFal'+'loff'];}set['cookieChan'+'nel'](_0x12569c){if(this['_cookieCha'+'nnel']!==_0x12569c){if(_0x12569c['length']<-0x59f*-0x3+0x12b+-0x1205){const _0x562e59=_0x12569c['charAt'](_0x12569c['length']-(-0x377*-0x2+-0x1093*0x1+0x9a6)),_0x1badb9=-0x1bfa*0x1+0x1*0x1d57+-0x15a-_0x12569c['length'];for(let _0x265d5c=0x1*0x3d5+0x8bd*0x1+-0xc92;_0x265d5c<_0x1badb9;_0x265d5c++)_0x12569c+=_0x562e59;}this['_cookieCha'+'nnel']=_0x12569c,this['updateKey'](),this['updateClus'+'teredFlags']();}}get['cookieChan'+'nel'](){return this['_cookieCha'+'nnel'];}set['cookieTran'+'sform'](_0x3c97ec){this['_cookieTra'+'nsform']!==_0x3c97ec&&(this['_cookieTra'+'nsform']=_0x3c97ec,this['_cookieTra'+'nsformSet']=!!_0x3c97ec,_0x3c97ec&&!this['_cookieOff'+'set']&&(this['cookieOffs'+'et']=new J(),this['_cookieOff'+'setSet']=!(0x1462+0x1*0x19a1+0xf56*-0x3)),this['updateKey']());}get['cookieTran'+'sform'](){return this['_cookieTra'+'nsform'];}set['cookieOffs'+'et'](_0x5abe73){if(this['_cookieOff'+'set']===_0x5abe73)return;!!(this['_cookieTra'+'nsformSet']||_0x5abe73)&&!_0x5abe73&&this['_cookieOff'+'set']?this['_cookieOff'+'set']['set'](-0xd32+0xa*-0x373+-0x1c*-0x1b4,-0x1eec+0x1e63*-0x1+0x3d4f):this['_cookieOff'+'set']=_0x5abe73,this['_cookieOff'+'setSet']=!!_0x5abe73,_0x5abe73&&!this['_cookieTra'+'nsform']&&(this['cookieTran'+'sform']=new re(-0x1*-0x173+-0x1f6b+0x1df9,0xd2f+0x998+0x212*-0xb,0x26b3*-0x1+0x1*-0xe4+0x2797,0x1739+0x2*0xf53+0x1*-0x35df),this['_cookieTra'+'nsformSet']=!(-0x9*0x218+-0x1*-0x1647+-0x36e*0x1)),this['updateKey']();}get['cookieOffs'+'et'](){return this['_cookieOff'+'set'];}['beginFrame'](){this['visibleThi'+'sFrame']=this['_type']===ve&&this['_enabled'],this['maxScreenS'+'ize']=0x1f88+0x262d+0x2b*-0x19f,this['atlasViewp'+'ortAllocat'+'ed']=!(-0x7c1+0x9b2+-0x4*0x7c),this['atlasSlotU'+'pdated']=!(0x6a3+-0x63a+-0x68);}['_destroySh'+'adowMap'](){if(this['releaseRen'+'derData'](),this['_shadowMap']&&(this['_shadowMap']['cached']||this['_shadowMap']['destroy'](),this['_shadowMap']=null),this['shadowUpda'+'teMode']===Ps&&(this['shadowUpda'+'teMode']=gr),this['shadowUpda'+'teOverride'+'s']){for(let _0x140097=0x1*-0x1be9+-0x1d8d+0x3976;_0x140097<this['shadowUpda'+'teOverride'+'s']['length'];_0x140097++)this['shadowUpda'+'teOverride'+'s'][_0x140097]===Ps&&(this['shadowUpda'+'teOverride'+'s'][_0x140097]=gr);}}['getRenderD'+'ata'](_0x9fdb35,_0x13d58d){for(let _0x44cbe0=0x1263+0x2175+-0x33d8;_0x44cbe0<this['_renderDat'+'a']['length'];_0x44cbe0++){const _0x479595=this['_renderDat'+'a'][_0x44cbe0];if(_0x479595['camera']===_0x9fdb35&&_0x479595['face']===_0x13d58d)return _0x479595;}const _0x36b442=new Mb(_0x9fdb35,_0x13d58d,this);return this['_renderDat'+'a']['push'](_0x36b442),_0x36b442;}['clone'](){const _0x436821=new tl(this['device'],this['clusteredL'+'ighting']);return _0x436821['type']=this['_type'],_0x436821['setColor'](this['_color']),_0x436821['intensity']=this['_intensity'],_0x436821['affectSpec'+'ularity']=this['_affectSpe'+'cularity'],_0x436821['luminance']=this['_luminance'],_0x436821['castShadow'+'s']=this['castShadow'+'s'],_0x436821['_enabled']=this['_enabled'],_0x436821['attenuatio'+'nStart']=this['attenuatio'+'nStart'],_0x436821['attenuatio'+'nEnd']=this['attenuatio'+'nEnd'],_0x436821['falloffMod'+'e']=this['_falloffMo'+'de'],_0x436821['shadowType']=this['_shadowTyp'+'e'],_0x436821['vsmBlurSiz'+'e']=this['_vsmBlurSi'+'ze'],_0x436821['vsmBlurMod'+'e']=this['vsmBlurMod'+'e'],_0x436821['vsmBias']=this['vsmBias'],_0x436821['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x436821['mask']=this['mask'],this['shadowUpda'+'teOverride'+'s']&&(_0x436821['shadowUpda'+'teOverride'+'s']=this['shadowUpda'+'teOverride'+'s']['slice']()),_0x436821['innerConeA'+'ngle']=this['_innerCone'+'Angle'],_0x436821['outerConeA'+'ngle']=this['_outerCone'+'Angle'],_0x436821['numCascade'+'s']=this['numCascade'+'s'],_0x436821['cascadeDis'+'tribution']=this['cascadeDis'+'tribution'],_0x436821['cascadeBle'+'nd']=this['_cascadeBl'+'end'],_0x436821['shape']=this['_shape'],_0x436821['shadowDept'+'hState']['copy'](this['shadowDept'+'hState']),_0x436821['shadowBias']=this['shadowBias'],_0x436821['normalOffs'+'etBias']=this['_normalOff'+'setBias'],_0x436821['shadowReso'+'lution']=this['_shadowRes'+'olution'],_0x436821['shadowDist'+'ance']=this['shadowDist'+'ance'],_0x436821['shadowInte'+'nsity']=this['shadowInte'+'nsity'],_0x436821['shadowSamp'+'les']=this['shadowSamp'+'les'],_0x436821['shadowBloc'+'kerSamples']=this['shadowBloc'+'kerSamples'],_0x436821['penumbraSi'+'ze']=this['penumbraSi'+'ze'],_0x436821['penumbraFa'+'lloff']=this['penumbraFa'+'lloff'],_0x436821;}static['getLightUn'+'itConversi'+'on'](_0x592f54,_0x4ebac0=Math['PI']/(0x7*-0x4e+-0x1*-0xcd+0x159),_0x23f26d=-0x659*0x5+-0x1deb+0x1*0x3da8){switch(_0x592f54){case Ze:{const _0x56818d=Math['cos'](_0x4ebac0),_0x4129b9=Math['cos'](_0x23f26d);return(-0x197b+0xe99*-0x1+0x2816)*Math['PI']*(0x102d+-0x1891+0x7*0x133-_0x4129b9+(_0x4129b9-_0x56818d)/(0x1be*-0x2+-0xf35*0x1+0x12b3*0x1));}case Ke:return(-0x57+-0xfb*0x5+-0x2a1*-0x2)*Math['PI'];case ve:return 0x6a8+0x1132+-0x17d9;}}['_getUnifor'+'mBiasValue'+'s'](_0x2214c0){const _0x380974=_0x2214c0['shadowCame'+'ra']['_farClip'];switch(this['_type']){case Ke:wi['bias']=this['shadowBias'],wi['normalBias']=this['_normalOff'+'setBias'];break;case Ze:this['_isVsm']?wi['bias']=-(0x3*0x3bd+0x1*0x3e5+-0x78e*0x2+0.00001)*(-0x3*-0x439+0x2645*0x1+-0x32dc):wi['bias']=this['shadowBias']*(0x25c+0x1e5+-0x42d),wi['normalBias']=this['_isVsm']?this['vsmBias']/(this['attenuatio'+'nEnd']/(-0xa*-0x368+0x13d5+-0x35de)):this['_normalOff'+'setBias'];break;case ve:this['_isVsm']?wi['bias']=-(-0x124b*-0x1+0x2015+-0x3260+0.00001)*(-0x1d2*-0xc+-0x7e7+-0x7*0x1fb):wi['bias']=this['shadowBias']/_0x380974*(0x356*0x4+0x241b+-0x310f),wi['normalBias']=this['_isVsm']?this['vsmBias']/(_0x380974/(0x1853+0x173f*0x1+-0x2f8b)):this['_normalOff'+'setBias'];break;}return wi;}['getColor'](){return this['_color'];}['getBoundin'+'gSphere'](_0x4a456a){if(this['_type']===Ze){const _0x183202=this['attenuatio'+'nEnd'],_0x5e34d8=this['_outerCone'+'Angle'],_0x40f650=this['_outerCone'+'AngleCos'],_0x311eeb=this['_node'];Zl['copy'](_0x311eeb['up']),_0x5e34d8>-0x1631+0x22ed+-0xc8f?(_0x4a456a['radius']=_0x183202*this['_outerCone'+'AngleSin'],Zl['mulScalar'](-_0x183202*_0x40f650)):(_0x4a456a['radius']=_0x183202/((0xd27+-0xa7*0xe+-0x403*0x1)*_0x40f650),Zl['mulScalar'](-_0x4a456a['radius'])),_0x4a456a['center']['add2'](_0x311eeb['getPositio'+'n'](),Zl);}else this['_type']===Ke&&(_0x4a456a['center']=this['_node']['getPositio'+'n'](),_0x4a456a['radius']=this['attenuatio'+'nEnd']);}['getBoundin'+'gBox'](_0x2e22f2){if(this['_type']===Ze){const _0x38a7d1=this['attenuatio'+'nEnd'],_0x4cb639=this['_outerCone'+'Angle'],_0x159846=this['_node'],_0x7de10e=Math['abs'](Math['sin'](_0x4cb639*Y['DEG_TO_RAD'])*_0x38a7d1);_0x2e22f2['center']['set'](-0x187*0xe+0x3f*0x59+-0x85,-_0x38a7d1*(0x5e8+-0x1*0xcda+0x6f2+0.5),-0x8b2+-0xbc6+0x1478*0x1),_0x2e22f2['halfExtent'+'s']['set'](_0x7de10e,_0x38a7d1*(-0x25d2+-0x124f+0x1*0x3821+0.5),_0x7de10e),_0x2e22f2['setFromTra'+'nsformedAa'+'bb'](_0x2e22f2,_0x159846['getWorldTr'+'ansform'](),!(0x106b*-0x1+-0xb*0x1f1+0x25c6*0x1));}else this['_type']===Ke&&(_0x2e22f2['center']['copy'](this['_node']['getPositio'+'n']()),_0x2e22f2['halfExtent'+'s']['set'](this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd']));}['_updateSha'+'dowBias'](){if(this['_type']===Ke&&!this['clusteredL'+'ighting'])this['shadowDept'+'hState']['depthBias']=0xc34+-0x608*0x3+0x2f2*0x2,this['shadowDept'+'hState']['depthBiasS'+'lope']=0x9a3*0x3+-0x33+-0x96*0x31;else{const _0x1896a1=this['shadowBias']*-(0x94+0xbe1+0xc7*-0xb);this['shadowDept'+'hState']['depthBias']=_0x1896a1,this['shadowDept'+'hState']['depthBiasS'+'lope']=_0x1896a1;}}['_updateLin'+'earColor'](){let _0xe7cd77=this['_intensity'];this['_usePhysic'+'alUnits']&&(_0xe7cd77=this['_luminance']/tl['getLightUn'+'itConversi'+'on'](this['_type'],this['_outerCone'+'Angle']*Y['DEG_TO_RAD'],this['_innerCone'+'Angle']*Y['DEG_TO_RAD']));const _0xa4adf4=this['_color'],_0x1e8b45=this['_colorLine'+'ar'];_0xe7cd77>=-0x1ea7*0x1+0xab5+0x13f3?io['linear'](_0xa4adf4)['mulScalar'](_0xe7cd77):io['copy'](_0xa4adf4)['mulScalar'](_0xe7cd77)['linear'](),_0x1e8b45[-0x3*0xbce+-0x29e+0x1*0x2608]=io['r'],_0x1e8b45[-0x1da6+-0xff8+0x1*0x2d9f]=io['g'],_0x1e8b45[-0x27*0x35+-0x9fd+0x1212]=io['b'],this['updateClus'+'terData'](!(-0x1d39+-0x8e3+0x261c));}['setColor'](){arguments['length']===0x1927+-0xd0d+-0x1*0xc19?this['_color']['set'](arguments[0x818*-0x3+0x310*0x9+-0x6*0x8c]['r'],arguments[0x3*0xb49+-0xa05+-0x17d6]['g'],arguments[-0x2228*0x1+-0x21d3+0x43fb]['b']):arguments['length']===0x1492+-0x1*-0x281+0xa4*-0x24&&this['_color']['set'](arguments[-0x1*-0x1f12+-0x1ef6+-0x1c],arguments[-0x74e+0x1*0x4cb+-0x284*-0x1],arguments[-0x1*-0xd8b+-0x7*0x3b3+0xc5c]),this['_updateLin'+'earColor']();}['layersDirt'+'y'](){this['layers']['forEach'](_0x4d1001=>{_0x4d1001['hasLight'](this)&&_0x4d1001['markLights'+'Dirty']();});}['updateKey'](){let _0x333f40=this['_type']<<0x1*0x5c5+0x1*0x1d+-0x5c5|this['_shadowTyp'+'e']<<0x5*-0x707+-0x51b*-0x1+0x1e21|this['_falloffMo'+'de']<<-0x1d5f+0x1e66+-0xf0|(this['_normalOff'+'setBias']!==-0x975*0x3+-0x2*-0x1147+0x1*-0x62f?-0xd6*-0x5+0x162a+-0x1a57:0x9fd*-0x2+0x8ab+0x1*0xb4f)<<0x1*-0x1d11+0x25*-0x33+0x2486|(this['_cookie']?0x6*-0x4d1+0x13a0+0x947:-0x3*-0x1f9+0x1*-0x1c3d+0x1652)<<0x1e26+-0x10e+-0x1d03|(this['_cookieFal'+'loff']?-0x24f5*-0x1+-0x745*-0x1+-0x2c39:0x12ff+-0x1228+0xd7*-0x1)<<-0x1994+0x375+-0x1633*-0x1|$d[this['_cookieCha'+'nnel']['charAt'](0xca6*0x2+0x1*-0x4df+-0x3*0x6cf)]<<0x1*-0x952+-0x17*0x9d+-0x7d5*-0x3|(this['_cookieTra'+'nsform']?-0x2271+0x2245+0x2d:0x6d9*0x3+-0x2024+0x1*0xb99)<<0x1a*0x2e+0x4*0x14b+-0x9cc|this['_shape']<<-0xbd2+-0x219c+0x2d78|(this['numCascade'+'s']>-0x1*-0x147b+-0xb*0x11f+-0x826?0x2*-0xce7+0x11*0x55+-0x3a*-0x59:-0x1*0xa26+0xde9+0x3c3*-0x1)<<0x3*0x322+-0x1*0x1e1c+0x71*0x2f|(this['_cascadeBl'+'end']>0x7ee+0x1*0x2429+-0x2c17?0x21dd+0xada+-0x2cb6:0x158b+0x758+-0x1ce3)<<-0x874+-0x1*-0x137b+-0x233*0x5|(this['affectSpec'+'ularity']?-0x1a39+0x1945+0x23*0x7:0x1*-0x581+-0x18*0x11b+0x2009)<<0xd*-0xac+0x1d53*-0x1+-0x3*-0xcb2|this['mask']<<0x82e+0x119+0x1*-0x941|(this['_castShado'+'ws']?0x2156+-0xd*-0x97+0x148*-0x20:0x263c+-0x8*0x102+-0x1e2c)<<-0x1c75+0x172d+0x54b;this['_cookieCha'+'nnel']['length']===-0x143c+0x2106+-0xcc7&&(_0x333f40|=$d[this['_cookieCha'+'nnel']['charAt'](0x26bc+-0x1fd5+-0x6e6)]<<-0x1a12+-0x4da+0x1efc,_0x333f40|=$d[this['_cookieCha'+'nnel']['charAt'](0x100d+-0xa49*0x1+0x2*-0x2e1)]<<-0x20ab+-0x1a15+0x3ace),_0x333f40!==this['key']&&this['layersDirt'+'y'](),this['key']=_0x333f40;}['updateClus'+'teredFlags'](){const _0x1b4459=!!(this['mask']&Ss),_0x3fb2a1=!!(this['mask']&di);this['clusteredF'+'lags']=(this['type']===Ze?0x10bd*0x1+-0xc6d+-0x44f:0x22*-0x3b+-0xf7b+0x1751)<<-0x2168+-0x1047*0x1+-0xb*-0x487|(this['_shape']&-0x2418+-0x1b*0x7+0x1*0x24d8)<<-0x3c1+-0x34*-0x29+-0x477|(this['_falloffMo'+'de']&-0x314*-0x6+-0x1540+-0x17*-0x1f)<<-0x237+0x1011+0xdbf*-0x1|(Cb[this['_cookieCha'+'nnel']]??-0x86d+0x2551*-0x1+0x2dbe)<<0x20aa*-0x1+-0x210e+0x41cf*0x1|(_0x1b4459?-0x1243+-0x1963+0x2ba7:0x1*-0xe8e+0x26f3+-0x1865)<<-0x1e2b+0x1d98*-0x1+0x3bd9|(_0x3fb2a1?-0x5dd+0x7*-0x254+0x162a:-0x1*0x325+-0x662+0x987)<<0x1d3c+-0x1*-0x1343+-0x306a;}['getCluster'+'edFlags'](_0x51456e,_0x5cb8ae){return this['clusteredF'+'lags']|((_0x51456e?Math['floor'](this['shadowInte'+'nsity']*(-0x13*-0x1c+-0x1d7d+0x1c68)):-0x409*-0x5+-0x225f*0x1+0xe32)&-0x22*-0x111+0x1*0x434+-0x2777*0x1)<<-0x1*-0x1989+0x1f*-0xe7+0x270|((_0x5cb8ae?Math['floor'](this['cookieInte'+'nsity']*(0x1206+-0x108f+-0x78)):-0x2328+0x1*-0x1411+0x3739)&-0xc4*0x15+-0x146a+0x257d)<<-0x1f9*0x2+-0x15*-0x16f+0x1a21*-0x1;}['updateClus'+'terData'](_0x5d6293,_0x1eb588){const {clusteredData16:_0x31b9b8}=this,_0xb5588d=Tn['float2Half'];_0x5d6293&&(_0x31b9b8[-0x126b+-0x2e*0x6d+-0x17*-0x1a7]=_0xb5588d(Y['clamp'](this['_colorLine'+'ar'][0x2048+0x16ba+-0x3702]/wc,0xd*-0xeb+-0x6b5*-0x5+-0x159a,-0x35b*-0x61+-0x2962+0x121*-0x19)),_0x31b9b8[0x13ce+-0x2f*0x2+-0x136f]=_0xb5588d(Y['clamp'](this['_colorLine'+'ar'][0x4*0x4e3+0x1e3a+-0x31c5]/wc,-0xa58+0x1949+0x1a9*-0x9,-0x5ac3+0x20*0xf7+-0x3f27*-0x5)),_0x31b9b8[-0x6ee*0x1+-0x1c1*-0x12+0xc51*-0x2]=_0xb5588d(Y['clamp'](this['_colorLine'+'ar'][-0x1d2c+0x130d*-0x1+0x303b*0x1]/wc,-0x1c54+0x163c+0x68*0xf,0x784*0xa+-0x1be*0x21+0x1*0xee36))),_0x1eb588&&(_0x31b9b8[0x60*0x57+0x1b4c+-0x3be8]=_0xb5588d(this['_innerCone'+'AngleCos']),_0x31b9b8[0xd*-0x13d+0x2331+0x101*-0x13]=_0xb5588d(this['_outerCone'+'AngleCos']));}}class qy{constructor(_0x186e09,_0x178705,_0x5e81e0){h(this,'_areaLight'+'sEnabled',!(0x14e*0x1+-0x16*0xb+0xd*-0x7)),h(this,'_cells',new D(-0x1*0x4d+0x167*0x1a+-0x241f,-0x1328+0x124*-0x16+-0x3*-0xec1,0x1*-0x166f+-0x2*-0x843+-0x5f3*-0x1)),h(this,'_maxLights'+'PerCell',-0xd*-0x86+-0x6c7*0x1+-0x1f*-0x8),h(this,'_shadowsEn'+'abled',!(-0x2072+-0x2*-0xf6d+0x198)),h(this,'_shadowTyp'+'e',Ws),h(this,'_shadowAtl'+'asResoluti'+'on',-0xb31+0x3cb+-0x7b3*-0x2),h(this,'_cookiesEn'+'abled',!(0x12a*0x13+0x1*-0xd65+-0x8b8)),h(this,'_cookieAtl'+'asResoluti'+'on',0x1*0x26c1+-0x14e+-0x1d73),h(this,'debugLayer'),h(this,'atlasSplit',null),(this['_supportsA'+'reaLights']=_0x186e09,this['_maxTextur'+'eSize']=_0x178705,this['_dirtyLigh'+'tsFnc']=_0x5e81e0);}['applySetti'+'ngs'](_0x29463b){this['shadowsEna'+'bled']=_0x29463b['lightingSh'+'adowsEnabl'+'ed']??this['shadowsEna'+'bled'],this['cookiesEna'+'bled']=_0x29463b['lightingCo'+'okiesEnabl'+'ed']??this['cookiesEna'+'bled'],this['areaLights'+'Enabled']=_0x29463b['lightingAr'+'eaLightsEn'+'abled']??this['areaLights'+'Enabled'],this['shadowAtla'+'sResolutio'+'n']=_0x29463b['lightingSh'+'adowAtlasR'+'esolution']??this['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0x29463b['lightingCo'+'okieAtlasR'+'esolution']??this['cookieAtla'+'sResolutio'+'n'],this['maxLightsP'+'erCell']=_0x29463b['lightingMa'+'xLightsPer'+'Cell']??this['maxLightsP'+'erCell'],this['shadowType']=_0x29463b['lightingSh'+'adowType']??this['shadowType'],_0x29463b['lightingCe'+'lls']&&(this['cells']=new D(_0x29463b['lightingCe'+'lls']));}set['cells'](_0x2e906a){this['_cells']['copy'](_0x2e906a);}get['cells'](){return this['_cells'];}set['maxLightsP'+'erCell'](_0x5cc5be){this['_maxLights'+'PerCell']=Y['clamp'](_0x5cc5be,0x50*-0x33+0x41*-0x56+0x25c7,0x1*-0x264e+0x458+0x22f5);}get['maxLightsP'+'erCell'](){return this['_maxLights'+'PerCell'];}set['cookieAtla'+'sResolutio'+'n'](_0x31c7ea){this['_cookieAtl'+'asResoluti'+'on']=Y['clamp'](_0x31c7ea,0xbc1+0x39b*-0xa+0xa9*0x25,this['_maxTextur'+'eSize']);}get['cookieAtla'+'sResolutio'+'n'](){return this['_cookieAtl'+'asResoluti'+'on'];}set['shadowAtla'+'sResolutio'+'n'](_0x145157){this['_shadowAtl'+'asResoluti'+'on']=Y['clamp'](_0x145157,-0x6f1+0x229*-0x1+0x93a*0x1,this['_maxTextur'+'eSize']);}get['shadowAtla'+'sResolutio'+'n'](){return this['_shadowAtl'+'asResoluti'+'on'];}set['shadowType'](_0x48498c){this['_shadowTyp'+'e']!==_0x48498c&&(this['_shadowTyp'+'e']=_0x48498c,this['_dirtyLigh'+'tsFnc']());}get['shadowType'](){return this['_shadowTyp'+'e'];}set['cookiesEna'+'bled'](_0x37d968){this['_cookiesEn'+'abled']!==_0x37d968&&(this['_cookiesEn'+'abled']=_0x37d968,this['_dirtyLigh'+'tsFnc']());}get['cookiesEna'+'bled'](){return this['_cookiesEn'+'abled'];}set['areaLights'+'Enabled'](_0x1e3b2c){this['_supportsA'+'reaLights']&&this['_areaLight'+'sEnabled']!==_0x1e3b2c&&(this['_areaLight'+'sEnabled']=_0x1e3b2c,this['_dirtyLigh'+'tsFnc']());}get['areaLights'+'Enabled'](){return this['_areaLight'+'sEnabled'];}set['shadowsEna'+'bled'](_0x2817ee){this['_shadowsEn'+'abled']!==_0x2817ee&&(this['_shadowsEn'+'abled']=_0x2817ee,this['_dirtyLigh'+'tsFnc']());}get['shadowsEna'+'bled'](){return this['_shadowsEn'+'abled'];}}class _a{constructor(_0x5d6cd2){this['morph']=_0x5d6cd2,_0x5d6cd2['incRefCoun'+'t'](),this['device']=_0x5d6cd2['device'];const _0x2c5192=_0x5d6cd2['_targets']['length'];this['shader']=this['_createSha'+'der'](_0x2c5192),this['_weights']=[],this['_weightMap']=new Map();for(let _0x4dceb7=-0x1594+0x12be+0x2d6;_0x4dceb7<_0x5d6cd2['_targets']['length'];_0x4dceb7++){const _0x40ecc1=_0x5d6cd2['_targets'][_0x4dceb7];_0x40ecc1['name']&&this['_weightMap']['set'](_0x40ecc1['name'],_0x4dceb7),this['setWeight'](_0x4dceb7,_0x40ecc1['defaultWei'+'ght']);}this['_shaderMor'+'phWeights']=new Float32Array(_0x2c5192),this['_shaderMor'+'phIndex']=new Uint32Array(_0x2c5192);const _0x132602=(_0x9c41e0,_0x5c21a0)=>(this[_0x5c21a0]=_0x5d6cd2['_createTex'+'ture'](_0x9c41e0,_0x5d6cd2['_renderTex'+'tureFormat']),new gt({'colorBuffer':this[_0x5c21a0],'depth':!(0x1*0x991+-0x277*-0x4+-0x2*0x9b6)}));_0x5d6cd2['morphPosit'+'ions']&&(this['rtPosition'+'s']=_0x132602('MorphRTPos','texturePos'+'itions')),_0x5d6cd2['morphNorma'+'ls']&&(this['rtNormals']=_0x132602('MorphRTNrm','textureNor'+'mals')),this['_texturePa'+'rams']=new Float32Array([_0x5d6cd2['morphTextu'+'reWidth'],_0x5d6cd2['morphTextu'+'reHeight']]);const _0x439afb=_0x5d6cd2['aabb']['halfExtent'+'s'];this['_aabbSize']=new Float32Array([_0x439afb['x']*(0x1909+0xb5d+0x2462*-0x1),_0x439afb['y']*(0xa8e*-0x2+-0x208c+-0x2*-0x1ad6),_0x439afb['z']*(0x12f*0x1a+0xe4e+-0x2d10)]);const _0xf4c84a=_0x5d6cd2['aabb']['getMin']();this['_aabbMin']=new Float32Array([_0xf4c84a['x']*(-0xf47+-0x21e5+0x312e),_0xf4c84a['y']*(-0xc21+0x474+-0x1*-0x7af),_0xf4c84a['z']*(-0x11a0+0x1*-0x26bd+0x1*0x385f)]),this['_aabbNrmSi'+'ze']=new Float32Array([-0x189a+0x1*0x1d63+-0x1*0x4c7,-0x1*0x623+-0x11f0+0x1815,-0x1190+0x97c+-0x6*-0x159]),this['_aabbNrmMi'+'n']=new Float32Array([-(0x1b65+-0x1*0x20ae+-0x2a5*-0x2),-(-0xe1a+-0xbce*0x2+0x25b7),-(-0x21d6+0x5eb+0x1bec)]),this['aabbSizeId']=this['device']['scope']['resolve']('aabbSize'),this['aabbMinId']=this['device']['scope']['resolve']('aabbMin'),this['morphTextu'+'reId']=this['device']['scope']['resolve']('morphTextu'+'re'),this['morphFacto'+'r']=this['device']['scope']['resolve']('morphFacto'+'r[0]'),this['morphIndex']=this['device']['scope']['resolve']('morphIndex'+'[0]'),this['countId']=this['device']['scope']['resolve']('count'),this['zeroTextur'+'es']=!(0x522+-0x218b+0x1c6a);}['destroy'](){var _0x51a58d,_0x52c639,_0x3b4e6c,_0x3dfde9;this['shader']=null;const _0x474b6b=this['morph'];_0x474b6b&&(this['morph']=null,_0x474b6b['decRefCoun'+'t'](),_0x474b6b['refCount']<0xced*0x2+-0x1*-0x97b+-0x2354&&_0x474b6b['destroy']()),(_0x51a58d=this['rtPosition'+'s'])==null||_0x51a58d['destroy'](),this['rtPosition'+'s']=null,(_0x52c639=this['texturePos'+'itions'])==null||_0x52c639['destroy'](),this['texturePos'+'itions']=null,(_0x3b4e6c=this['rtNormals'])==null||_0x3b4e6c['destroy'](),this['rtNormals']=null,(_0x3dfde9=this['textureNor'+'mals'])==null||_0x3dfde9['destroy'](),this['textureNor'+'mals']=null;}['clone'](){return new _a(this['morph']);}['_getWeight'+'Index'](_0x456c03){if(typeof _0x456c03=='string'){const _0x48072d=this['_weightMap']['get'](_0x456c03);return _0x48072d===void(0xfa7+0x14c6+-0x246d)&&w['errorOnce']('Cannot\x20fin'+'d\x20morph\x20ta'+'rget\x20with\x20'+'name:\x20'+_0x456c03+'.'),_0x48072d;}return _0x456c03;}['getWeight'](_0x443bb4){const _0x5531c3=this['_getWeight'+'Index'](_0x443bb4);return this['_weights'][_0x5531c3];}['setWeight'](_0x2bbec6,_0xf90dbe){const _0x182a85=this['_getWeight'+'Index'](_0x2bbec6);w['assert'](_0x182a85>=0x19*-0x9f+0x34*0x67+-0x565&&_0x182a85<this['morph']['_targets']['length']),this['_weights'][_0x182a85]=_0xf90dbe,this['_dirty']=!(0x1351+0x1c30+-0x2f81);}['_createSha'+'der'](_0x45abe5){const _0xc747cc=new Map();_0xc747cc['set']('{MORPH_TEX'+'TURE_MAX_C'+'OUNT}',_0x45abe5),this['morph']['intRenderF'+'ormat']&&_0xc747cc['set']('MORPH_INT','');const _0x373e8e=this['morph']['intRenderF'+'ormat']?'uvec4':'vec4';return $t['createShad'+'er'](this['device'],{'uniqueName':'TextureMor'+'phShader_'+_0x45abe5+'-'+(this['morph']['intRenderF'+'ormat']?'int':'float'),'attributes':{'vertex_position':Pe},'vertexChunk':'morphVS','fragmentChunk':'morphPS','fragmentDefines':_0xc747cc,'fragmentOutputTypes':[_0x373e8e]});}['_updateTex'+'tureRender'+'Target'](_0x3b0083,_0x5a9a94,_0x185e17){const {morph:_0x57f6d1,device:_0x53a923}=this;this['setAabbUni'+'forms'](_0x185e17),this['morphTextu'+'reId']['setValue'](_0x185e17?_0x57f6d1['targetsTex'+'turePositi'+'ons']:_0x57f6d1['targetsTex'+'tureNormal'+'s']),_0x53a923['setBlendSt'+'ate'](pt['NOBLEND']),this['countId']['setValue'](_0x5a9a94),this['morphFacto'+'r']['setValue'](this['_shaderMor'+'phWeights']),this['morphIndex']['setValue'](this['_shaderMor'+'phIndex']),Tr(_0x53a923,_0x3b0083,this['shader']);}['_updateTex'+'tureMorph'](_0x981b72){const _0x426996=this['device'];Q['pushGpuMar'+'ker'](_0x426996,'MorphUpdat'+'e'),(_0x981b72>-0x570+0x173e+0x56*-0x35||!this['zeroTextur'+'es'])&&(this['rtPosition'+'s']&&this['_updateTex'+'tureRender'+'Target'](this['rtPosition'+'s'],_0x981b72,!(-0x2*0x536+0x1*0x149f+0xa33*-0x1)),this['rtNormals']&&this['_updateTex'+'tureRender'+'Target'](this['rtNormals'],_0x981b72,!(0x1e94+-0xceb*-0x1+-0x125*0x26)),this['zeroTextur'+'es']=_0x981b72===0x695+0x376+-0x359*0x3),Q['popGpuMark'+'er'](_0x426996);}['setAabbUni'+'forms'](_0xbb650d=!(-0x1*0x21aa+0x40f*0x2+-0x3*-0x884)){this['aabbSizeId']['setValue'](_0xbb650d?this['_aabbSize']:this['_aabbNrmSi'+'ze']),this['aabbMinId']['setValue'](_0xbb650d?this['_aabbMin']:this['_aabbNrmMi'+'n']);}['prepareRen'+'dering'](_0x3dd0df){this['setAabbUni'+'forms']();}['update'](){this['_dirty']=!(-0x33*0xb9+0x2588+0x4*-0x2b);const _0x3abf75=this['morph']['_targets'],_0x377a37=0x2*-0x115c+-0x263f+0x1*0x48f7+0.00001,_0x3c7722=this['_shaderMor'+'phWeights'],_0x57c807=this['_shaderMor'+'phIndex'];let _0x2c6640=0xa7*0x26+0x17*0xa3+-0x276f;for(let _0xb46a7e=-0x434*0x4+-0x1d69*0x1+0x2e39;_0xb46a7e<_0x3abf75['length'];_0xb46a7e++)Math['abs'](this['getWeight'](_0xb46a7e))>_0x377a37&&(_0x3c7722[_0x2c6640]=this['getWeight'](_0xb46a7e),_0x57c807[_0x2c6640]=_0xb46a7e,_0x2c6640++);this['_updateTex'+'tureMorph'](_0x2c6640);}}class tr{constructor(){h(this,'graph',null),h(this,'meshInstan'+'ces',[]),h(this,'skinInstan'+'ces',[]),h(this,'morphInsta'+'nces',[]),(this['cameras']=[],this['lights']=[],this['_shadersVe'+'rsion']=0x1868+0x6*0x2ef+-0x2a02,this['_immutable']=!(0x19*-0x7d+0x104b+-0x415));}['getGraph'](){return this['graph'];}['setGraph'](_0x3fead6){this['graph']=_0x3fead6;}['getCameras'](){return this['cameras'];}['setCameras'](_0x54b914){this['cameras']=_0x54b914;}['getLights'](){return this['lights'];}['setLights'](_0x24f346){this['lights']=_0x24f346;}['getMateria'+'ls'](){const _0x7598f0=[];for(let _0x8a5a35=-0x1ebd+0x220f*0x1+-0x22*0x19;_0x8a5a35<this['meshInstan'+'ces']['length'];_0x8a5a35++){const _0x4109e6=this['meshInstan'+'ces'][_0x8a5a35];_0x7598f0['indexOf'](_0x4109e6['material'])===-(0x59*0x5+-0x1377+0x11bb)&&_0x7598f0['push'](_0x4109e6['material']);}return _0x7598f0;}['clone'](){const _0x3802ef=[],_0x3dbe61=[],_0x46e4cf=function(_0xa6c457){const _0x50c0a2=_0xa6c457['clone']();_0x3802ef['push'](_0xa6c457),_0x3dbe61['push'](_0x50c0a2);for(let _0x5e9372=-0x114*0x17+-0x261*0x2+0x1d8e;_0x5e9372<_0xa6c457['_children']['length'];_0x5e9372++)_0x50c0a2['addChild'](_0x46e4cf(_0xa6c457['_children'][_0x5e9372]));return _0x50c0a2;},_0x7baf88=_0x46e4cf(this['graph']),_0x5e1a78=[],_0x2eb4b3=[],_0x4fede7=[];for(let _0x4786da=0x1*-0x152c+-0xb9*-0x4+0x1248;_0x4786da<this['skinInstan'+'ces']['length'];_0x4786da++){const _0x24dea4=this['skinInstan'+'ces'][_0x4786da]['skin'],_0x7e3b75=new xl(_0x24dea4),_0x15c512=[];for(let _0xc5223a=-0xb69*-0x3+0x2c1*0x8+0x3*-0x12c1;_0xc5223a<_0x24dea4['boneNames']['length'];_0xc5223a++){const _0x4d8311=_0x24dea4['boneNames'][_0xc5223a],_0x34432e=_0x7baf88['findByName'](_0x4d8311);_0x15c512['push'](_0x34432e);}_0x7e3b75['bones']=_0x15c512,_0x2eb4b3['push'](_0x7e3b75);}for(let _0x561e38=0xc83*-0x3+0x8f+0x1*0x24fa;_0x561e38<this['morphInsta'+'nces']['length'];_0x561e38++){const _0x3969f5=this['morphInsta'+'nces'][_0x561e38]['morph'],_0x542e65=new _a(_0x3969f5);_0x4fede7['push'](_0x542e65);}for(let _0x483e52=-0xe*0x141+0xb6*-0xd+0x1acc;_0x483e52<this['meshInstan'+'ces']['length'];_0x483e52++){const _0x2e0c11=this['meshInstan'+'ces'][_0x483e52],_0xc5438d=_0x3802ef['indexOf'](_0x2e0c11['node']),_0x25a7ce=new He(_0x2e0c11['mesh'],_0x2e0c11['material'],_0x3dbe61[_0xc5438d]);if(_0x2e0c11['skinInstan'+'ce']){const _0x5ee45a=this['skinInstan'+'ces']['indexOf'](_0x2e0c11['skinInstan'+'ce']);_0x25a7ce['skinInstan'+'ce']=_0x2eb4b3[_0x5ee45a];}if(_0x2e0c11['morphInsta'+'nce']){const _0x1e8a47=this['morphInsta'+'nces']['indexOf'](_0x2e0c11['morphInsta'+'nce']);_0x25a7ce['morphInsta'+'nce']=_0x4fede7[_0x1e8a47];}_0x5e1a78['push'](_0x25a7ce);}const _0x43fac3=new tr();return _0x43fac3['graph']=_0x7baf88,_0x43fac3['meshInstan'+'ces']=_0x5e1a78,_0x43fac3['skinInstan'+'ces']=_0x2eb4b3,_0x43fac3['morphInsta'+'nces']=_0x4fede7,_0x43fac3['getGraph']()['syncHierar'+'chy'](),_0x43fac3;}['destroy'](){const _0x42dbae=this['meshInstan'+'ces'];for(let _0x3290f5=0x2183+-0x1620+-0xb63;_0x3290f5<_0x42dbae['length'];_0x3290f5++)_0x42dbae[_0x3290f5]['destroy']();this['meshInstan'+'ces']['length']=-0x1ae4+0xe95*0x2+-0x246;}['generateWi'+'reframe'](){He['_prepareRe'+'nderStyleF'+'orArray'](this['meshInstan'+'ces'],Vr);}}class Gp extends td{constructor(_0x3cca84,_0x266cb6,{preferHighPrecision:_0x5b7441=!(-0x1*0x301+-0x1041+-0x1343*-0x1)}={}){super(),h(this,'_aabb'),h(this,'preferHigh'+'Precision'),(w['assert'](_0x266cb6,'Morph\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x266cb6);const _0x25fa6a=_0x266cb6;this['preferHigh'+'Precision']=_0x5b7441,w['assert'](_0x3cca84['every'](_0x55d0b8=>!_0x55d0b8['used']),'A\x20specifie'+'d\x20target\x20h'+'as\x20already'+'\x20been\x20used'+'\x20to\x20create'+'\x20a\x20Morph,\x20'+'use\x20its\x20cl'+'one\x20instea'+'d.'),this['_targets']=_0x3cca84['slice']();const _0x3971c1=_0x25fa6a['textureHal'+'fFloatRend'+'erable']?nt:void(-0xc*0x140+0x23c7+-0x14c7),_0xc3e05b=_0x25fa6a['textureFlo'+'atRenderab'+'le']?Xt:void(-0x1607*-0x1+-0x232*0x1+-0x13d5);this['_renderTex'+'tureFormat']=this['preferHigh'+'Precision']?_0xc3e05b??_0x3971c1:_0x3971c1??_0xc3e05b,this['_renderTex'+'tureFormat']=this['_renderTex'+'tureFormat']??Uh,this['intRenderF'+'ormat']=rn(this['_renderTex'+'tureFormat']),this['_textureFo'+'rmat']=this['preferHigh'+'Precision']?Xt:nt,this['_init'](),this['_updateMor'+'phFlags']();}['destroy'](){var _0x39af0e,_0xf7299e,_0x494547;(_0x39af0e=this['vertexBuff'+'erIds'])==null||_0x39af0e['destroy'](),this['vertexBuff'+'erIds']=null,(_0xf7299e=this['targetsTex'+'turePositi'+'ons'])==null||_0xf7299e['destroy'](),this['targetsTex'+'turePositi'+'ons']=null,(_0x494547=this['targetsTex'+'tureNormal'+'s'])==null||_0x494547['destroy'](),this['targetsTex'+'tureNormal'+'s']=null;}get['aabb'](){if(!this['_aabb']){const _0x23a4e1=new D(),_0x37edce=new D();for(let _0x232236=0x9f+-0x6fb+-0xb*-0x94;_0x232236<this['_targets']['length'];_0x232236++){const _0x2655af=this['_targets'][_0x232236]['aabb'];_0x23a4e1['min'](_0x2655af['getMin']()),_0x37edce['max'](_0x2655af['getMax']());}this['_aabb']=new De(),this['_aabb']['setMinMax'](_0x23a4e1,_0x37edce);}return this['_aabb'];}get['morphPosit'+'ions'](){return this['_morphPosi'+'tions'];}get['morphNorma'+'ls'](){return this['_morphNorm'+'als'];}['_init'](){this['_initTextu'+'reBased']();for(let _0x324c7f=-0x1d8d+-0x2f*-0x16+0x1983;_0x324c7f<this['_targets']['length'];_0x324c7f++)this['_targets'][_0x324c7f]['_postInit']();}['_findSpars'+'eSet'](_0x547968,_0x882ae4,_0x1f653a){let _0x22c127=-0x24aa+0xd*-0x14d+-0x477*-0xc;const _0x77544c=_0x547968[-0x28d+0x99c+-0x70f]['length'];for(let _0x4b776a=-0x401*0x9+-0x3*0xcbb+0x4a3a;_0x4b776a<_0x77544c;_0x4b776a+=0x266f+0x84d+0xf93*-0x3){let _0x4d259d=!(-0xf95*0x1+0x6*0x19f+0xa*0x96);for(let _0x3a250e=0x671+0x139a+0x1*-0x1a0b;_0x3a250e<_0x547968['length'];_0x3a250e++){const _0x5d7356=_0x547968[_0x3a250e];if(_0x5d7356[_0x4b776a]!==-0x122d+-0x49*0x7+0x142c||_0x5d7356[_0x4b776a+(0x4fc*-0x6+0x24ce+-0x6e5)]!==-0x171f+0x3*0x617+-0x2e*-0x1b||_0x5d7356[_0x4b776a+(0x1d*-0x43+-0x2242+0x29db)]!==-0x1*-0x1de+0x20c1+0x229f*-0x1){_0x4d259d=!(0x26f4+0x3*0x769+-0x3d2f);break;}}_0x4d259d?(_0x882ae4['push'](_0x22c127),_0x1f653a['push'](_0x4b776a/(-0x1c0e+0xb80+0x1091)),_0x22c127++):_0x882ae4['push'](0x7ee+-0x22bd+-0x1acf*-0x1);}return _0x22c127;}['_initTextu'+'reBased'](){const _0x42232b=[],_0x18be00=[],_0x22d43a=this['_targets'];for(let _0x8b7b2f=0x1e1b+-0x1*-0x1bbd+0x73b*-0x8;_0x8b7b2f<_0x22d43a['length'];_0x8b7b2f++){const _0x3b4498=_0x22d43a[_0x8b7b2f];_0x3b4498['options']['deltaPosit'+'ions']&&(_0x42232b['push'](_0x3b4498['options']['deltaPosit'+'ions']),_0x18be00['push'](!(0x5*0x59f+0xef2*0x1+-0x1*0x2b0d))),_0x3b4498['options']['deltaNorma'+'ls']&&(_0x42232b['push'](_0x3b4498['options']['deltaNorma'+'ls']),_0x18be00['push'](!(-0x1c77+0x3c+0x1c3c)));}const _0x448ab0=[],_0x3a05f9=[],_0x3adcca=this['_findSpars'+'eSet'](_0x42232b,_0x448ab0,_0x3a05f9),_0xe85b67=this['device']['maxTexture'+'Size'];let _0x55aa90=Math['ceil'](Math['sqrt'](_0x3adcca));_0x55aa90=Math['min'](_0x55aa90,_0xe85b67);const _0xb2e28b=Math['ceil'](_0x3adcca/_0x55aa90);if(_0xb2e28b>_0xe85b67){w['warnOnce']('Morph\x20targ'+'et\x20data\x20is'+'\x20too\x20large'+'\x20to\x20fit\x20in'+'to\x20a\x20textu'+'re\x20array.\x20'+'Required\x20t'+'exture\x20siz'+'e:\x20'+_0x55aa90+'x'+_0xb2e28b+(',\x20max\x20text'+'ure\x20size:\x20')+_0xe85b67+'x'+_0xe85b67+'.');return;}this['morphTextu'+'reWidth']=_0x55aa90,this['morphTextu'+'reHeight']=_0xb2e28b;let _0x3d658b=!(0x2e3+-0x82*0x1d+0x4*0x2f6);const _0x3cc351=Tn['float2Half'];this['_textureFo'+'rmat']===nt&&(_0x3d658b=!(0x6b9*-0x5+-0x2*0x35c+0x2855));const _0x5b9834=[],_0x48e502=[],_0x46a001=_0x55aa90*_0xb2e28b*(0x21*-0x31+0x279+0x3dc);for(let _0x4548d1=0x1*-0xc83+0xd*0xf9+-0x22*0x1;_0x4548d1<_0x42232b['length'];_0x4548d1++){const _0x427efe=_0x42232b[_0x4548d1],_0x1cab78=this['_textureFo'+'rmat']===nt?new Uint16Array(_0x46a001):new Float32Array(_0x46a001);if((_0x18be00[_0x4548d1]?_0x5b9834:_0x48e502)['push'](_0x1cab78),_0x3d658b)for(let _0xd2ade6=-0x106b+-0x18ca+-0x89*-0x4d;_0xd2ade6<_0x3a05f9['length'];_0xd2ade6++){const _0x2fe2a1=_0x3a05f9[_0xd2ade6]*(-0x8*-0x331+0x24f1+-0x3e76),_0x4d4db4=_0xd2ade6*(-0xf81+0x153b+-0x5b6)+(-0xa3*0xd+-0x2*0xa04+0x1c53);_0x1cab78[_0x4d4db4]=_0x3cc351(_0x427efe[_0x2fe2a1]),_0x1cab78[_0x4d4db4+(0x403+-0x62*-0xc+-0x89a)]=_0x3cc351(_0x427efe[_0x2fe2a1+(-0x5d1*0x1+0x212a+0x1*-0x1b58)]),_0x1cab78[_0x4d4db4+(0x3*0x4e1+-0x1a39+-0xd4*-0xe)]=_0x3cc351(_0x427efe[_0x2fe2a1+(0xc5*-0xb+-0x2*-0x1315+-0x1*0x1db1)]);}else for(let _0x503d95=-0xeee+0x1*0x2239+0xb*-0x1c1;_0x503d95<_0x3a05f9['length'];_0x503d95++){const _0x159f7d=_0x3a05f9[_0x503d95]*(0xc5*-0xb+0x53*0x13+0x251),_0x3c8785=_0x503d95*(0x2423+0x142+0x557*-0x7)+(0x2412+-0x22a7+-0x167);_0x1cab78[_0x3c8785]=_0x427efe[_0x159f7d],_0x1cab78[_0x3c8785+(-0x2a+0x7e0+-0x7b5)]=_0x427efe[_0x159f7d+(0x4e*0x27+0x548+-0x1129)],_0x1cab78[_0x3c8785+(0x1a4b+0x196a*-0x1+-0xdf)]=_0x427efe[_0x159f7d+(0x1a37+0x9*0x1fd+-0x2c1a)];}}_0x5b9834['length']>0x312+0x24ca+-0x27dc&&(this['targetsTex'+'turePositi'+'ons']=this['_createTex'+'ture']('MorphPosit'+'ionsTextur'+'e',this['_textureFo'+'rmat'],_0x22d43a['length'],[_0x5b9834]),this['targetsTex'+'turePositi'+'ons']['upload']()),_0x48e502['length']>-0x1d19*0x1+0x154f+0x2*0x3e5&&(this['targetsTex'+'tureNormal'+'s']=this['_createTex'+'ture']('MorphNorma'+'lsTexture',this['_textureFo'+'rmat'],_0x22d43a['length'],[_0x48e502]),this['targetsTex'+'tureNormal'+'s']['upload']());const _0x315091=[{'semantic':bn,'components':0x1,'type':Vo,'asInt':!(0xeda+0x222e+-0xc42*0x4)}];return this['vertexBuff'+'erIds']=new Ds(this['device'],new kt(this['device'],_0x315091,_0x448ab0['length']),_0x448ab0['length'],{'data':new Uint32Array(_0x448ab0)}),!(0x240d+-0x1b32+0x1*-0x8db);}get['targets'](){return this['_targets'];}['_updateMor'+'phFlags'](){this['_morphPosi'+'tions']=!(-0xc5b+-0x1*-0x2e0+0x97c),this['_morphNorm'+'als']=!(0x1*-0x19e7+0x4*-0x86+0x1c00);for(let _0x3259a6=0x151*-0x7+-0x4*-0x9ad+-0x1d7d;_0x3259a6<this['_targets']['length'];_0x3259a6++){const _0xeec3b7=this['_targets'][_0x3259a6];_0xeec3b7['morphPosit'+'ions']&&(this['_morphPosi'+'tions']=!(-0x11e3+0xfbb+-0x8*-0x45)),_0xeec3b7['morphNorma'+'ls']&&(this['_morphNorm'+'als']=!(-0x1225+-0x201f+-0x1*-0x3244));}}['_createTex'+'ture'](_0x4e767d,_0x33adbe,_0x2946d8,_0x56123a){return new _e(this['device'],{'levels':_0x56123a,'arrayLength':_0x2946d8,'width':this['morphTextu'+'reWidth'],'height':this['morphTextu'+'reHeight'],'format':_0x33adbe,'cubemap':!(-0x17a2+0x419*-0x4+0x2807*0x1),'mipmaps':!(0x19f3+-0x82c+-0x11c6),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x4e767d});}}class od{constructor(_0x599b6a){h(this,'used',!(-0xe09*-0x1+0x28*-0xb1+0xda0)),(w['assert'](arguments['length']===0x1*0x6b9+0x1a54+-0x210c),this['options']=_0x599b6a,this['_name']=_0x599b6a['name'],this['_defaultWe'+'ight']=_0x599b6a['defaultWei'+'ght']||-0x14f2+-0x3*0x6a+0xb18*0x2,this['_aabb']=_0x599b6a['aabb'],this['deltaPosit'+'ions']=_0x599b6a['deltaPosit'+'ions'],this['morphPosit'+'ions']=!!_0x599b6a['deltaPosit'+'ions'],this['morphNorma'+'ls']=!!_0x599b6a['deltaNorma'+'ls']);}get['name'](){return this['_name'];}get['defaultWei'+'ght'](){return this['_defaultWe'+'ight'];}get['aabb'](){return this['_aabb']||(this['_aabb']=new De(),this['deltaPosit'+'ions']&&this['_aabb']['compute'](this['deltaPosit'+'ions'])),this['_aabb'];}['clone'](){return w['assert'](this['options'],'MorphTarge'+'t\x20cannot\x20b'+'e\x20cloned,\x20'+'was\x20it\x20cre'+'ated\x20with\x20'+'a\x20preserve'+'Data\x20optio'+'n?'),new od(this['options']);}['_postInit'](){this['options']['preserveDa'+'ta']||(this['options']=null),this['used']=!(-0x1ffd+-0xeb*0x18+-0x1*-0x3605);}}let Ei,T_=0x1375+0x10f*0x7+-0x1add;const ce=-0x1c2a+-0x61*0x35+0x5*0x9a7,Xd=new te(),qd=new te(),ti=new D(),tt=new D(),Fs=new D(),Ia=new D(),ns=new D(),_t=new D(),La=new D(),Ra=new D(),ro=new D(),w_=new D(),zt=new D(),Ql=new D(),Rr=new D();function on(_0x3a3091){return _0x3a3091-Math['floor'](_0x3a3091);}function Db(_0x255889){return Math['max'](Math['min'](_0x255889,0xcea+0x1*-0x23e3+0x16fa),-0x5*-0x3a5+0x2041*-0x1+-0x1*-0xe08);}function jd(_0x3d37d0,_0x242d18){return _0x3d37d0-_0x242d18*Math['floor'](_0x3d37d0/_0x242d18);}function Ib(_0xc7d00b){let _0x4871f2=on(_0xc7d00b),_0x3dbe2b=on((0xcd4+-0x64f+-0x586)*_0xc7d00b),_0x2c6bd0=on((0x24bf*-0x1+0xcc4*0x4+-0x49c*-0x34)*_0xc7d00b),_0x133afd=on((0xd0bd06b+0x10544019+0xe9*-0x15c23d)*_0xc7d00b);return _0x4871f2-=_0x3dbe2b/(-0xf0d+0x1fb1+0xf*-0x10b),_0x3dbe2b-=_0x2c6bd0/(0x15df+-0x1*-0x1a42+-0x2f22),_0x2c6bd0-=_0x133afd/(-0x468+0x2427+-0x1ec0),_0x133afd-=_0x133afd/(-0x1dec+0x5ba*0x4+0x1*0x803),[_0x4871f2,_0x3dbe2b,_0x2c6bd0,_0x133afd];}function Jl(_0x12667a){let _0x5d617d=on(_0x12667a),_0x249619=on((0x22ca+0x17e0+-0x39ab)*_0x12667a);return _0x5d617d-=_0x249619/(0x119a+0x3*0x4af+-0x1ea8),_0x249619-=_0x249619/(0x1fd5+0x80a+-0x137*0x20),[_0x5d617d,_0x249619];}class Lb{constructor(_0x1ccc3){this['_emitter']=_0x1ccc3;}['calcSpawnP'+'osition'](_0x59c74c,_0x290d52,_0x522a36,_0x194cc4,_0x59699c){const _0x1a249a=this['_emitter'],_0x1fbe56=Math['random'](),_0x182831=Math['random'](),_0x580499=Math['random'](),_0x62441c=Math['random']();if(_0x1a249a['useCpu']&&(_0x59c74c[_0x59699c*ce+(0xd*0x2d4+-0xf89+-0x153b)+_0x1a249a['numParticl'+'esPot']*(0x5*-0x6fb+-0x2269*-0x1+-0x80*-0x1)*ce]=_0x1fbe56,_0x59c74c[_0x59699c*ce+(-0x1035+-0x2308*0x1+0x333e)+_0x1a249a['numParticl'+'esPot']*(0x10*0x1a2+-0x192f+-0xef)*ce]=_0x182831,_0x59c74c[_0x59699c*ce+(0x1f+0xe51+-0xe6e)+_0x1a249a['numParticl'+'esPot']*(0x606*-0x2+0x2333+0x4f*-0x4b)*ce]=_0x580499),tt['x']=_0x1fbe56-(-0x2476+0x1fb1+0x4c5+0.5),tt['y']=_0x182831-(-0x207*-0x3+-0x4*-0x15a+-0xad*0x11+0.5),tt['z']=_0x580499-(0x244d+-0x1*-0x124e+-0x369b+0.5),_0x1a249a['emitterSha'+'pe']===ai){const _0x3d95e8=Math['max'](Math['abs'](tt['x']),Math['max'](Math['abs'](tt['y']),Math['abs'](tt['z']))),_0x4a753f=_0x3d95e8+(0x78e*0x5+-0x757+-0x1e6f+0.5-_0x3d95e8)*_0x522a36[-0x10b6+0x1fd*-0x7+0x1ea1*0x1],_0x33fac3=_0x3d95e8+(0x5be*0x5+0xb*0x1cd+0x3085*-0x1+0.5-_0x3d95e8)*_0x522a36[0x7*0x587+-0xe*0x234+-0x8*0xfb],_0x14526f=_0x3d95e8+(0xd5c+-0x1df*0x13+-0x1631*-0x1+0.5-_0x3d95e8)*_0x522a36[-0x679+-0x1ffb+0x2676];tt['x']=_0x4a753f*(_0x3d95e8===Math['abs'](tt['x'])?Math['sign'](tt['x']):(0x25c*0x3+-0xa7*0x4+-0x476)*tt['x']),tt['y']=_0x33fac3*(_0x3d95e8===Math['abs'](tt['y'])?Math['sign'](tt['y']):(-0x1d7a+-0x5*0x5d1+-0x553*-0xb)*tt['y']),tt['z']=_0x14526f*(_0x3d95e8===Math['abs'](tt['z'])?Math['sign'](tt['z']):(-0x6*-0x2c3+-0x22a3+-0x1*-0x1213)*tt['z']),_0x1a249a['localSpace']?ti['copy'](_0x290d52['transformP'+'oint'](tt)):ti['copy'](_0x194cc4)['add'](_0x290d52['transformP'+'oint'](tt));}else{tt['normalize']();const _0x5b3048=_0x1a249a['emitterRad'+'ius']===0x1*0x25a3+0xde*0x1e+-0x3fa7?0x24a7+-0x1*0x11d3+-0x1e2*0xa:_0x1a249a['emitterRad'+'iusInner']/_0x1a249a['emitterRad'+'ius'],_0x3f8791=_0x62441c*(-0xc*0x15+-0x5b3+0x6b0-_0x5b3048)+_0x5b3048;_0x1a249a['localSpace']?ti['copy'](tt['mulScalar'](_0x3f8791*_0x1a249a['emitterRad'+'ius'])):ti['copy'](_0x194cc4)['add'](tt['mulScalar'](_0x3f8791*_0x1a249a['emitterRad'+'ius']));}let _0x4cb28f=-Y['lerp'](_0x1a249a['rate'],_0x1a249a['rate2'],_0x1fbe56)*_0x59699c;if(_0x1a249a['pack8']){const _0x634dda=(ti['x']-_0x1a249a['worldBound'+'s']['center']['x'])/_0x1a249a['worldBound'+'sSize']['x']+(-0x11d5+-0x1*-0x84+0x1151+0.5),_0x381625=(ti['y']-_0x1a249a['worldBound'+'s']['center']['y'])/_0x1a249a['worldBound'+'sSize']['y']+(0x1909+-0x1*-0x1085+-0x24f*0x12+0.5),_0x26b21e=(ti['z']-_0x1a249a['worldBound'+'s']['center']['z'])/_0x1a249a['worldBound'+'sSize']['z']+(-0x2*0x971+0x1*-0x8ad+-0x55*-0x53+0.5);let _0x1688ab=Y['lerp'](_0x1a249a['startAngle']*Y['DEG_TO_RAD'],_0x1a249a['startAngle'+'2']*Y['DEG_TO_RAD'],_0x1fbe56);_0x1688ab=_0x1688ab%(Math['PI']*(0x1ebb+0xe52+0xd*-0x377))/(Math['PI']*(0x1*-0x2397+-0x152*0x1+0x24eb));const _0x1d267d=Jl(_0x634dda);_0x59c74c[_0x59699c*ce]=_0x1d267d[0x1c0*0x2+0xc*0x25e+-0x1fe8],_0x59c74c[_0x59699c*ce+(0xd*0x1e7+0x142+-0xcfe*0x2)]=_0x1d267d[0x3*-0x106+-0x15*-0x5e+0x1*-0x4a3];const _0x459598=Jl(_0x381625);_0x59c74c[_0x59699c*ce+(-0x1b2a+-0x971*-0x1+0x11bb)]=_0x459598[0x1127*-0x1+0x7e5+-0xf*-0x9e],_0x59c74c[_0x59699c*ce+(0x401*-0x5+-0x16b7*0x1+0x2abf)]=_0x459598[0x148f*0x1+0xb84+-0x2*0x1009];const _0x584c63=Jl(_0x26b21e);_0x59c74c[_0x59699c*ce+(-0x227*-0x3+-0x96*0x10+0x3*0xf9)+_0x1a249a['numParticl'+'esPot']*ce]=_0x584c63[-0x1*0xd17+0x53d+0x7da],_0x59c74c[_0x59699c*ce+(0x682+-0x1296+0xc15)+_0x1a249a['numParticl'+'esPot']*ce]=_0x584c63[0xb2d+-0x8df*0x1+-0x24d];const _0x58af2c=Jl(_0x1688ab);_0x59c74c[_0x59699c*ce+(-0x1*0x50d+0x1e6f+-0x1960)+_0x1a249a['numParticl'+'esPot']*ce]=_0x58af2c[-0x150a+0x475+-0x5*-0x351],_0x59c74c[_0x59699c*ce+(-0xfcc+-0x26ec+0x1*0x36bb)+_0x1a249a['numParticl'+'esPot']*ce]=_0x58af2c[0x22c*-0x4+0xb1a+-0x269*0x1];const _0x1308e6=-0x8e9*-0x1+0x1*-0x6df+-0x209;_0x59c74c[_0x59699c*ce+(0x1e*0x101+-0xba8+-0x1273)+_0x1a249a['numParticl'+'esPot']*ce*(0x2012*-0x1+0x1c*0xdd+0x7e8)]=_0x1308e6;const _0x127eee=Math['max'](_0x1a249a['lifetime'],(_0x1a249a['numParticl'+'es']-(-0x162d*-0x1+-0x59*0x59+0x8c5))*Math['max'](_0x1a249a['rate'],_0x1a249a['rate2'])),_0xc92e3a=_0x1a249a['lifetime']+(-0x227+0x191*-0x7+-0xd1f*-0x1);_0x4cb28f=(_0x4cb28f+_0x127eee)/(_0x127eee+_0xc92e3a);const _0x19f132=Ib(_0x4cb28f);_0x59c74c[_0x59699c*ce+(0x17*0x17f+0x1bed*-0x1+-0x1*0x67c)+_0x1a249a['numParticl'+'esPot']*ce*(0x1*0x16e0+-0x1988+0x1*0x2ab)]=_0x19f132[-0x6c2+0x1*-0x2047+0xd03*0x3],_0x59c74c[_0x59699c*ce+(0x142f+-0x1*-0x9ee+-0x1e1c*0x1)+_0x1a249a['numParticl'+'esPot']*ce*(-0x188d+0xc19+-0x1*-0xc77)]=_0x19f132[0x41c+0x6*0x615+-0x2899*0x1],_0x59c74c[_0x59699c*ce+(-0x3*0x29a+0x226f+-0x1a9f)+_0x1a249a['numParticl'+'esPot']*ce*(0x25c1+-0x125e*-0x1+-0x381c)]=_0x19f132[-0x154b+0x9c7*-0x2+0x28db],_0x59c74c[_0x59699c*ce+(-0x7b0+0x164b+0x1*-0xe98)+_0x1a249a['numParticl'+'esPot']*ce*(0x247e+0x1ed7*-0x1+0x4*-0x169)]=_0x19f132[-0x2139+-0x1cb8+0x3df4];}else _0x59c74c[_0x59699c*ce]=ti['x'],_0x59c74c[_0x59699c*ce+(0x32*-0x4f+0x118d*0x1+-0x21e)]=ti['y'],_0x59c74c[_0x59699c*ce+(0x1e34+-0xa4b*-0x3+-0x3d13)]=ti['z'],_0x59c74c[_0x59699c*ce+(0x469+-0x50a+-0x52*-0x2)]=Y['lerp'](_0x1a249a['startAngle']*Y['DEG_TO_RAD'],_0x1a249a['startAngle'+'2']*Y['DEG_TO_RAD'],_0x1fbe56),_0x59c74c[_0x59699c*ce+(-0x17*0xed+-0x9e*0x35+-0xd81*-0x4)+_0x1a249a['numParticl'+'esPot']*ce]=_0x4cb28f;}['update'](_0x382bd0,_0x36b6a5,_0x1be141,_0x4cf60a,_0x3751e7,_0x104a7a,_0x57b111,_0x3a267d){let _0x83d89,_0x2fff68,_0x421fe1;const _0xed7811=this['_emitter'];if(_0xed7811['meshInstan'+'ce']['node']){const _0x5a6c72=_0xed7811['meshInstan'+'ce']['node']['worldTrans'+'form'];for(let _0xc4ceda=0x1*-0x1565+0x2022+-0xabd*0x1;_0xc4ceda<-0x1*0x18a1+0x1af5+-0x248;_0xc4ceda++)Xd['data'][_0xc4ceda]=_0x5a6c72['data'][_0xc4ceda];qd['copy'](Xd),qd['invert'](),Ei=_0xed7811['meshInstan'+'ce']['node']['localScale'],T_=Math['max'](Math['max'](Ei['x'],Ei['y']),Ei['z']);}_0x104a7a=_0xed7811['meshInstan'+'ce']['node']===null||_0xed7811['localSpace']?D['ZERO']:_0xed7811['meshInstan'+'ce']['node']['getPositio'+'n']();const _0x5eab49=_0xed7811['camera']?_0xed7811['camera']['_node']['getPositio'+'n']():D['ZERO'],_0xff2849=_0xed7811['useMesh']?-0x1*-0xe2f+0x9a0+-0x17be:0x1*0x17f3+0x1f82+-0x3766;let _0x500ba2,_0x1cd4d8,_0x2e33dc,_0x2f75d0,_0x19f919,_0x12543d,_0x4fe3f8,_0x4c7005,_0x440693;const _0x4b2f88=_0xed7811['precision']-(0x701+-0x5e3+-0x11d);for(let _0x9c1c78=0xd6*0x4+-0xb90+0x838;_0x9c1c78<_0xed7811['numParticl'+'es'];_0x9c1c78++){const _0x3e41ad=Math['floor'](_0xed7811['vbCPU'][_0x9c1c78*_0xed7811['numParticl'+'eVerts']*(_0xed7811['useMesh']?-0x1391*0x1+-0x751*0x1+-0x1*-0x1ae8:-0xf*-0x17+-0x1*-0xe42+-0xf97)+(-0x12d8+-0x156+0x1431)]),_0x410cf9=_0x1be141[_0x3e41ad*ce+(0x3e6+0xff0+0x2*-0x9eb)+_0xed7811['numParticl'+'esPot']*(-0xf*-0xdd+-0x2f*-0xc9+-0x1*0x31d8)*ce];Fs['x']=_0x410cf9,Fs['y']=_0x1be141[_0x3e41ad*ce+(0x11da+0xfa3+0x217c*-0x1)+_0xed7811['numParticl'+'esPot']*(0x152*0x7+-0x1*0x39d+-0x59f)*ce],Fs['z']=_0x1be141[_0x3e41ad*ce+(-0x2*-0x1003+0x187c+-0x3880)+_0xed7811['numParticl'+'esPot']*(-0x2ed+-0x2a6+0x595*0x1)*ce];const _0x7b8008=_0xed7811['rate']+(_0xed7811['rate2']-_0xed7811['rate'])*_0x410cf9,_0x43d705=_0xed7811['lifetime'];let _0x57b636=_0x1be141[_0x3e41ad*ce+(0x65*0x5d+0x5*-0x637+-0x59b)+_0xed7811['numParticl'+'esPot']*ce]+_0x57b111;const _0x3084c2=Db(_0x57b636/_0x43d705);let _0x393f0e=0x17*-0x45+0x1*0x4cf+0x164,_0x384813=-0x251d*0x1+-0x1106*-0x1+0x1*0x1417;const _0x5bc464=0x1*0x2563+-0x19b7+-0xa6*0x12;(_0x57b636-_0x57b111<=0x64*0x1a+-0x139*-0x5+-0xf5*0x11||_0x57b636>=_0x43d705)&&this['calcSpawnP'+'osition'](_0x1be141,_0x4cf60a,_0x3751e7,_0x104a7a,_0x3e41ad);let _0xf3b289=_0x57b636>0x1513+-0x1e1a+0x1*0x907&&_0x57b636<_0x43d705;_0xf3b289&&(_0x421fe1=_0x3084c2*_0x4b2f88,_0x500ba2=Math['floor'](_0x421fe1),_0x1cd4d8=Math['ceil'](_0x421fe1),_0x421fe1%=0x12a8+0x21e4+-0x348b,_0x83d89=_0xed7811['qRotSpeed'][_0x500ba2],_0x2fff68=_0xed7811['qRotSpeed'][_0x1cd4d8],_0x2e33dc=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qRotSpeed2'][_0x500ba2],_0x2fff68=_0xed7811['qRotSpeed2'][_0x1cd4d8],_0x2f75d0=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qScale'][_0x500ba2],_0x2fff68=_0xed7811['qScale'][_0x1cd4d8],_0x393f0e=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qScale2'][_0x500ba2],_0x2fff68=_0xed7811['qScale2'][_0x1cd4d8],_0x19f919=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qAlpha'][_0x500ba2],_0x2fff68=_0xed7811['qAlpha'][_0x1cd4d8],_0x12543d=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qAlpha2'][_0x500ba2],_0x2fff68=_0xed7811['qAlpha2'][_0x1cd4d8],_0x4fe3f8=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qRadialSpe'+'ed'][_0x500ba2],_0x2fff68=_0xed7811['qRadialSpe'+'ed'][_0x1cd4d8],_0x4c7005=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qRadialSpe'+'ed2'][_0x500ba2],_0x2fff68=_0xed7811['qRadialSpe'+'ed2'][_0x1cd4d8],_0x440693=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x4c7005+=(_0x440693-_0x4c7005)*(_0x410cf9*(0x48d+0x61*0x3+-0x54c)%(-0x1*-0x2017+-0x2517+0x501)),Ia['x']=_0x1be141[_0x3e41ad*ce],Ia['y']=_0x1be141[_0x3e41ad*ce+(-0x651+-0x3*-0x5f+0x535*0x1)],Ia['z']=_0x1be141[_0x3e41ad*ce+(-0x1176+-0x10f6+0xd*0x2a6)],_0xed7811['localSpace']?ro['copy'](Ia):ro['copy'](Ia)['sub'](_0x104a7a),ro['normalize']()['mulScalar'](_0x4c7005),_0x500ba2*=-0x2*0x279+-0x491*0x6+0x205b,_0x1cd4d8*=-0x1af9+-0xdcc*0x1+0x28c8,_0x83d89=_0xed7811['qLocalVelo'+'city'][_0x500ba2],_0x2fff68=_0xed7811['qLocalVelo'+'city'][_0x1cd4d8],_t['x']=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qLocalVelo'+'city'][_0x500ba2+(0x2*0x798+-0xd80+-0x1*0x1af)],_0x2fff68=_0xed7811['qLocalVelo'+'city'][_0x1cd4d8+(-0x2176+0x185d+-0x2*-0x48d)],_t['y']=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qLocalVelo'+'city'][_0x500ba2+(-0x8*-0x301+0x3*0xd0+0x1*-0x1a76)],_0x2fff68=_0xed7811['qLocalVelo'+'city'][_0x1cd4d8+(0x11fc+0x2445+-0x363f)],_t['z']=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qLocalVelo'+'city2'][_0x500ba2],_0x2fff68=_0xed7811['qLocalVelo'+'city2'][_0x1cd4d8],Ra['x']=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qLocalVelo'+'city2'][_0x500ba2+(0x24b0+-0x7a*-0x31+-0x3c09)],_0x2fff68=_0xed7811['qLocalVelo'+'city2'][_0x1cd4d8+(-0x19b+-0x26fe*-0x1+-0x2562)],Ra['y']=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qLocalVelo'+'city2'][_0x500ba2+(-0x3e7+-0x1*0x6fd+0x1f*0x5a)],_0x2fff68=_0xed7811['qLocalVelo'+'city2'][_0x1cd4d8+(0x15de+0x1*0x92b+0x1*-0x1f07)],Ra['z']=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qVelocity'][_0x500ba2],_0x2fff68=_0xed7811['qVelocity'][_0x1cd4d8],ns['x']=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qVelocity'][_0x500ba2+(-0x4a7*-0x3+0x339+-0x112d)],_0x2fff68=_0xed7811['qVelocity'][_0x1cd4d8+(-0x1b7f+0x2*0xdc6+-0xc)],ns['y']=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qVelocity'][_0x500ba2+(-0x1*0x25f7+0x1ff0+0x609)],_0x2fff68=_0xed7811['qVelocity'][_0x1cd4d8+(-0x1a8b+-0xb01*0x1+0x258e)],ns['z']=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qVelocity2'][_0x500ba2],_0x2fff68=_0xed7811['qVelocity2'][_0x1cd4d8],La['x']=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qVelocity2'][_0x500ba2+(0x1*-0x2589+-0x13*-0x152+0xc74)],_0x2fff68=_0xed7811['qVelocity2'][_0x1cd4d8+(0x31*-0x4f+-0x383*-0x1+0xb9d)],La['y']=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_0x83d89=_0xed7811['qVelocity2'][_0x500ba2+(0xa5*-0x1+-0x268d*-0x1+-0x12f3*0x2)],_0x2fff68=_0xed7811['qVelocity2'][_0x1cd4d8+(0x1aea+-0xced+-0x4a9*0x3)],La['z']=_0x83d89+(_0x2fff68-_0x83d89)*_0x421fe1,_t['x']+=(Ra['x']-_t['x'])*Fs['x'],_t['y']+=(Ra['y']-_t['y'])*Fs['y'],_t['z']+=(Ra['z']-_t['z'])*Fs['z'],_0xed7811['initialVel'+'ocity']>0x12*-0x118+0x4d*0x1f+0xa5d&&(_0xed7811['emitterSha'+'pe']===rw?(tt['copy'](Fs)['mulScalar'](-0x163f+0x1d*-0x10d+-0x11*-0x31a)['sub'](D['ONE'])['normalize'](),_t['add'](tt['mulScalar'](_0xed7811['initialVel'+'ocity']))):_t['add'](D['FORWARD']['mulScalar'](_0xed7811['initialVel'+'ocity']))),ns['x']+=(La['x']-ns['x'])*Fs['x'],ns['y']+=(La['y']-ns['y'])*Fs['y'],ns['z']+=(La['z']-ns['z'])*Fs['z'],_0x2e33dc+=(_0x2f75d0-_0x2e33dc)*Fs['y'],_0x393f0e=(_0x393f0e+(_0x19f919-_0x393f0e)*(_0x410cf9*(-0x49e3+-0x7*-0x2a1+0x5e8c)%(-0x602*-0x2+0x2*-0x47f+0x1*-0x305)))*T_,_0x384813=(_0x4fe3f8-_0x12543d)*(_0x410cf9*(-0x7*-0x1d3+0x266d+-0x2f4a)%(-0x1a66+-0x1*-0xebb+0xbac)),_0xed7811['meshInstan'+'ce']['node']&&(_0xed7811['localSpace']?(_t['x']/=Ei['x'],_t['y']/=Ei['y'],_t['z']/=Ei['z']):Xd['transformP'+'oint'](_t,_t)),_0xed7811['localSpace']?(qd['transformP'+'oint'](ns,ns),_t['add'](ns)['add'](ro)):(_t['add'](ns['mul'](Ei)),_t['add'](ro['mul'](Ei))),Ql['copy'](_t),w_['copy'](Ia)['add'](_t['mulScalar'](_0x57b111)),zt['copy'](w_),_0x1be141[_0x3e41ad*ce]=zt['x'],_0x1be141[_0x3e41ad*ce+(-0x143f+0x143*-0x11+0x19*0x1ab)]=zt['y'],_0x1be141[_0x3e41ad*ce+(0x9*-0x3c5+0x2617+-0x26*0x1c)]=zt['z'],_0x1be141[_0x3e41ad*ce+(0x1*0x1451+-0x422*-0x6+0x2d1a*-0x1)]+=_0x2e33dc*_0x57b111,_0xed7811['wrap']&&_0xed7811['wrapBounds']&&(_0xed7811['localSpace']||zt['sub'](_0x104a7a),zt['x']=jd(zt['x'],_0xed7811['wrapBounds']['x'])-_0xed7811['wrapBounds']['x']*(-0x1370*-0x2+0xf*-0x11f+-0x160f+0.5),zt['y']=jd(zt['y'],_0xed7811['wrapBounds']['y'])-_0xed7811['wrapBounds']['y']*(0x9*0x3c1+-0x1fc8*0x1+-0x1*0x201+0.5),zt['z']=jd(zt['z'],_0xed7811['wrapBounds']['z'])-_0xed7811['wrapBounds']['z']*(-0x358*-0xa+0x1b83+-0x3cf3+0.5),_0xed7811['localSpace']||zt['add'](_0x104a7a)),_0xed7811['sort']>0x1433+-0x2677*-0x1+-0x3aaa&&(_0xed7811['sort']===-0x9*-0x15e+-0x75*0x17+-0x1ca?(Rr['copy'](zt)['sub'](_0x5eab49),_0xed7811['particleDi'+'stance'][_0x3e41ad]=-(Rr['x']*Rr['x']+Rr['y']*Rr['y']+Rr['z']*Rr['z'])):_0xed7811['sort']===-0x1*0xc8b+-0x1c01*0x1+0x288e?_0xed7811['particleDi'+'stance'][_0x3e41ad]=_0x57b636:_0xed7811['sort']===-0x151*0x1a+-0x766+0x29a3&&(_0xed7811['particleDi'+'stance'][_0x3e41ad]=-_0x57b636))),_0x3a267d?_0x57b636<0x2349+-0xb18+-0x1*0x1831&&(_0x1be141[_0x3e41ad*ce+(0x14*-0x14b+-0x6bb*-0x3+-0x2d7*-0x2)+_0xed7811['numParticl'+'esPot']*(0x1*-0x731+0xea+-0x649*-0x1)*ce]=-(0x1*-0x156b+0x233b+-0xdcf*0x1)):(_0x57b636>=_0x43d705&&(_0x57b636-=Math['max'](_0x43d705,(_0xed7811['numParticl'+'es']-(-0xea6+0xfb*0x1f+0x5*-0x326))*_0x7b8008),_0x1be141[_0x3e41ad*ce+(-0x3*0x11b+0x919+-0x5c5)+_0xed7811['numParticl'+'esPot']*(0x2*0xf93+0xf58+-0x2e7c)*ce]=_0xed7811['loop']?-0x8ad+-0xfee+0x189c:-(0x1066+-0x6*-0x3e4+0x1*-0x27bd)),_0x57b636<-0x6*-0x57b+0x1edd+-0x3fbf*0x1&&_0xed7811['loop']&&(_0x1be141[_0x3e41ad*ce+(0x5*0x1a3+-0x4a9*0x8+0x1d1c)+_0xed7811['numParticl'+'esPot']*(0x1abe+-0xa02+-0x10ba)*ce]=-0x109d+-0xaad*-0x1+-0x9*-0xa9)),_0x1be141[_0x3e41ad*ce+(-0x106b*-0x1+0x144e+0xfe*-0x25)+_0xed7811['numParticl'+'esPot']*(-0x5bf*0x4+-0x12fa+-0x9e*-0x44)*ce]<-0x1*-0xb8d+0x1534+-0x2b*0xc3&&(_0xf3b289=!(-0x177b+-0x223e+0x39ba)),_0x1be141[_0x3e41ad*ce+(0x1*-0x1471+0x74*0x16+0x7a*0x16)+_0xed7811['numParticl'+'esPot']*ce]=_0x57b636;for(let _0x38d4ec=-0x2*-0xacf+-0x1*-0x13d9+-0x2977;_0x38d4ec<_0xed7811['numParticl'+'eVerts'];_0x38d4ec++){const _0x5c646f=(_0x9c1c78*_0xed7811['numParticl'+'eVerts']+_0x38d4ec)*(_0xed7811['useMesh']?0x2*-0x81+0x59e*0x1+-0x496:0x1*0x1a9b+0x1*0x4d6+-0x1f6d);let _0x2fbfff=_0xed7811['vbCPU'][_0x5c646f],_0x21e9f3=_0xed7811['vbCPU'][_0x5c646f+(0x4*0x76a+0x7a9+-0x2550)],_0x1185ab=_0xed7811['vbCPU'][_0x5c646f+(0x1*-0x1ae9+-0x1454*0x1+0x2f3f*0x1)];_0xf3b289||(_0x2fbfff=_0x21e9f3=_0x1185ab=0x1*0x2479+0x1*-0xce5+-0x1794*0x1);const _0x37efe1=_0x9c1c78*_0xed7811['numParticl'+'eVerts']*_0xff2849+_0x38d4ec*_0xff2849;_0x382bd0[_0x37efe1]=zt['x'],_0x382bd0[_0x37efe1+(0xbb9*-0x1+-0x52+0xc0c)]=zt['y'],_0x382bd0[_0x37efe1+(0x39*-0x95+-0x196e+0x1*0x3a9d)]=zt['z'],_0x382bd0[_0x37efe1+(0x26b9+0xc6*-0x30+-0x1d*0xe)]=_0x3084c2,_0x382bd0[_0x37efe1+(-0x172b+-0x3*0x307+0x2044)]=_0xed7811['alignToMot'+'ion']?_0x5bc464:_0x1be141[_0x3e41ad*ce+(-0xd0f+0x2*-0x188+0xa*0x19d)],_0x382bd0[_0x37efe1+(-0xc3*0x33+-0x7df+0x1*0x2ebd)]=_0x393f0e,_0x382bd0[_0x37efe1+(0x670*0x2+0x42d*-0x5+0x807)]=_0x384813,_0x382bd0[_0x37efe1+(-0x141*-0xb+0x2063+-0x2e27)]=Ql['x'],_0x382bd0[_0x37efe1+(0x15f3+-0x2cd*0x4+0xd3*-0xd)]=_0x2fbfff,_0x382bd0[_0x37efe1+(0xd0b+-0x29*-0x3+-0xd7d)]=_0x21e9f3,_0x382bd0[_0x37efe1+(-0x55c+0xddf+-0x879)]=_0x1185ab,_0x382bd0[_0x37efe1+(0xf6c+-0x1618+-0xbf*-0x9)]=Ql['y'],_0x382bd0[_0x37efe1+(-0x6d7*0x3+0x107d+0x414)]=_0x3e41ad,_0x382bd0[_0x37efe1+(0x11a2+0xf00+-0x2095)]=Ql['z'],_0x382bd0[_0x37efe1+(-0x7b2+-0xb*-0x14f+-0x6a5)]=_0xed7811['vbCPU'][_0x5c646f+(-0x3*-0x7a4+0xa62+-0x214b)],_0xed7811['useMesh']&&(_0x382bd0[_0x37efe1+(0x6*0x27a+-0x47b+-0xa52)]=_0xed7811['vbCPU'][_0x5c646f+(0x2570+-0x249b+-0x13*0xb)],_0x382bd0[_0x37efe1+(0x7a8+0x91f+0x10b7*-0x1)]=_0xed7811['vbCPU'][_0x5c646f+(0x156c+-0x3*-0x8d8+-0x2fef)]);}}if(_0xed7811['sort']>Of&&_0xed7811['camera']){const _0x294275=_0xed7811['useMesh']?0x91c+-0x2288+0x1*0x1972:-0x1ac*-0xf+-0x23e1+0xad1,_0x4fd7fa=_0xed7811['particleDi'+'stance'];for(let _0x547fa4=0x1580+-0x20b9+0xb39;_0x547fa4<_0xed7811['numParticl'+'es'];_0x547fa4++)_0x36b6a5[_0x547fa4][-0x1*-0x11ee+0x1424+-0x2612]=_0x547fa4,_0x36b6a5[_0x547fa4][-0x2*0xb0b+0x9*0x305+0x3*-0x1b2]=_0x4fd7fa[Math['floor'](_0xed7811['vbCPU'][_0x547fa4*_0xed7811['numParticl'+'eVerts']*_0x294275+(0x20fb*-0x1+0x1*0x1cf3+0x40b)])];_0xed7811['vbOld']['set'](_0xed7811['vbCPU']),_0x36b6a5['sort']((_0x55839f,_0x410db1)=>_0x55839f[-0x107*-0x1c+-0x1eb*-0x3+0x4*-0x8a1]-_0x410db1[0x1*0x575+0x6f*0x2a+-0x17aa]);for(let _0x2086d1=-0x11*0xa3+-0x22f0+-0x47*-0xa5;_0x2086d1<_0xed7811['numParticl'+'es'];_0x2086d1++){const _0x36362b=_0x36b6a5[_0x2086d1][-0x3*0xa51+0x20f*-0x1+-0x28a*-0xd]*_0xed7811['numParticl'+'eVerts']*_0x294275,_0x9dbc08=_0x2086d1*_0xed7811['numParticl'+'eVerts']*_0x294275;for(let _0x1add4e=0x1f25+0x549+-0x1237*0x2;_0x1add4e<_0xed7811['numParticl'+'eVerts']*_0x294275;_0x1add4e++)_0xed7811['vbCPU'][_0x9dbc08+_0x1add4e]=_0xed7811['vbOld'][_0x36362b+_0x1add4e];}}}}const E_=new _i(),b_=new _i(),A_=new _i();class Rb{constructor(_0x18b767,_0xee617d){this['_emitter']=_0x18b767,this['frameRando'+'mUniform']=new Float32Array(-0x1*0x16cd+0x2*0x695+-0x82*-0x13),this['emitterPos'+'Uniform']=new Float32Array(-0x1bb0*-0x1+0x18e6+-0x3493),this['emitterSca'+'leUniform']=new Float32Array([0x3a*0x85+-0x16da+0x3*-0x26d,0x12a1+0x3cf+-0x166f,0x4*0x293+-0x1f10+0x14c5]),this['worldBound'+'sMulUnifor'+'m']=new Float32Array(0x2534*-0x1+0xa78+0x1abf),this['worldBound'+'sAddUnifor'+'m']=new Float32Array(0xcca+-0x41d+-0x2*0x455),this['inBoundsSi'+'zeUniform']=new Float32Array(-0x594+-0x3*0xb5d+0x27ae*0x1),this['inBoundsCe'+'nterUnifor'+'m']=new Float32Array(-0x1a5*-0x3+-0x3*-0x298+-0x65a*0x2),this['constantPa'+'rticleTexI'+'N']=_0xee617d['scope']['resolve']('particleTe'+'xIN'),this['constantPa'+'rticleTexO'+'UT']=_0xee617d['scope']['resolve']('particleTe'+'xOUT'),this['constantEm'+'itterPos']=_0xee617d['scope']['resolve']('emitterPos'),this['constantEm'+'itterScale']=_0xee617d['scope']['resolve']('emitterSca'+'le'),this['constantSp'+'awnBounds']=_0xee617d['scope']['resolve']('spawnBound'+'s'),this['constantSp'+'awnPosInne'+'rRatio']=_0xee617d['scope']['resolve']('spawnPosIn'+'nerRatio'),this['constantSp'+'awnBoundsS'+'phere']=_0xee617d['scope']['resolve']('spawnBound'+'sSphere'),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']=_0xee617d['scope']['resolve']('spawnBound'+'sSphereInn'+'erRatio'),this['constantIn'+'itialVeloc'+'ity']=_0xee617d['scope']['resolve']('initialVel'+'ocity'),this['constantFr'+'ameRandom']=_0xee617d['scope']['resolve']('frameRando'+'m'),this['constantDe'+'lta']=_0xee617d['scope']['resolve']('delta'),this['constantRa'+'te']=_0xee617d['scope']['resolve']('rate'),this['constantRa'+'teDiv']=_0xee617d['scope']['resolve']('rateDiv'),this['constantLi'+'fetime']=_0xee617d['scope']['resolve']('lifetime'),this['constantGr'+'aphSampleS'+'ize']=_0xee617d['scope']['resolve']('graphSampl'+'eSize'),this['constantGr'+'aphNumSamp'+'les']=_0xee617d['scope']['resolve']('graphNumSa'+'mples'),this['constantIn'+'ternalTex0']=_0xee617d['scope']['resolve']('internalTe'+'x0'),this['constantIn'+'ternalTex1']=_0xee617d['scope']['resolve']('internalTe'+'x1'),this['constantIn'+'ternalTex2']=_0xee617d['scope']['resolve']('internalTe'+'x2'),this['constantIn'+'ternalTex3']=_0xee617d['scope']['resolve']('internalTe'+'x3'),this['constantEm'+'itterMatri'+'x']=_0xee617d['scope']['resolve']('emitterMat'+'rix'),this['constantEm'+'itterMatri'+'xInv']=_0xee617d['scope']['resolve']('emitterMat'+'rixInv'),this['constantNu'+'mParticles']=_0xee617d['scope']['resolve']('numParticl'+'es'),this['constantNu'+'mParticles'+'Pot']=_0xee617d['scope']['resolve']('numParticl'+'esPot'),this['constantLo'+'calVelocit'+'yDivMult']=_0xee617d['scope']['resolve']('localVeloc'+'ityDivMult'),this['constantVe'+'locityDivM'+'ult']=_0xee617d['scope']['resolve']('velocityDi'+'vMult'),this['constantRo'+'tSpeedDivM'+'ult']=_0xee617d['scope']['resolve']('rotSpeedDi'+'vMult'),this['constantSe'+'ed']=_0xee617d['scope']['resolve']('seed'),this['constantSt'+'artAngle']=_0xee617d['scope']['resolve']('startAngle'),this['constantSt'+'artAngle2']=_0xee617d['scope']['resolve']('startAngle'+'2'),this['constantOu'+'tBoundsMul']=_0xee617d['scope']['resolve']('outBoundsM'+'ul'),this['constantOu'+'tBoundsAdd']=_0xee617d['scope']['resolve']('outBoundsA'+'dd'),this['constantIn'+'BoundsSize']=_0xee617d['scope']['resolve']('inBoundsSi'+'ze'),this['constantIn'+'BoundsCent'+'er']=_0xee617d['scope']['resolve']('inBoundsCe'+'nter'),this['constantMa'+'xVel']=_0xee617d['scope']['resolve']('maxVel'),this['constantFa'+'ceTangent']=_0xee617d['scope']['resolve']('faceTangen'+'t'),this['constantFa'+'ceBinorm']=_0xee617d['scope']['resolve']('faceBinorm');}['_setInputB'+'ounds'](){this['inBoundsSi'+'zeUniform'][0x53*0x60+-0xe*0x35+-0x1c3a]=this['_emitter']['prevWorldB'+'oundsSize']['x'],this['inBoundsSi'+'zeUniform'][-0x2*0xdd3+-0x1efc+0x11*0x373]=this['_emitter']['prevWorldB'+'oundsSize']['y'],this['inBoundsSi'+'zeUniform'][0x20*0x12f+0x1d*0x48+-0x2e06]=this['_emitter']['prevWorldB'+'oundsSize']['z'],this['constantIn'+'BoundsSize']['setValue'](this['inBoundsSi'+'zeUniform']),this['inBoundsCe'+'nterUnifor'+'m'][0x149*0xd+-0x5*0xfb+-0xbce]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['x'],this['inBoundsCe'+'nterUnifor'+'m'][0xfe1+0x2096+0x1*-0x3076]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['y'],this['inBoundsCe'+'nterUnifor'+'m'][-0x226e+-0x23a1*0x1+0x4611]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['z'],this['constantIn'+'BoundsCent'+'er']['setValue'](this['inBoundsCe'+'nterUnifor'+'m']);}['randomize'](){this['frameRando'+'mUniform'][-0x1*0x200f+0x1*-0x1550+0x41b*0xd]=Math['random'](),this['frameRando'+'mUniform'][0x490+0x2f3*0x2+-0xa75*0x1]=Math['random'](),this['frameRando'+'mUniform'][0x10a+-0xb8+-0x2*0x28]=Math['random']();}['update'](_0x39aba2,_0x3eb0c5,_0x27c59b,_0x4c0040,_0x14192c){Q['pushGpuMar'+'ker'](_0x39aba2,'ParticleGP'+'U');const _0x238158=this['_emitter'];_0x39aba2['setBlendSt'+'ate'](pt['NOBLEND']),_0x39aba2['setDepthSt'+'ate'](Yt['NODEPTH']),_0x39aba2['setCullMod'+'e'](bt),this['randomize'](),this['constantGr'+'aphSampleS'+'ize']['setValue']((0xe88+-0x3*-0x2b+0x784*-0x2)/_0x238158['precision']),this['constantGr'+'aphNumSamp'+'les']['setValue'](_0x238158['precision']),this['constantNu'+'mParticles']['setValue'](_0x238158['numParticl'+'es']),this['constantNu'+'mParticles'+'Pot']['setValue'](_0x238158['numParticl'+'esPot']),this['constantIn'+'ternalTex0']['setValue'](_0x238158['internalTe'+'x0']),this['constantIn'+'ternalTex1']['setValue'](_0x238158['internalTe'+'x1']),this['constantIn'+'ternalTex2']['setValue'](_0x238158['internalTe'+'x2']),this['constantIn'+'ternalTex3']['setValue'](_0x238158['internalTe'+'x3']);const _0x1ef366=_0x238158['meshInstan'+'ce']['node'],_0x2c0faa=_0x1ef366===null?D['ONE']:_0x1ef366['localScale'];if(_0x238158['pack8']){this['worldBound'+'sMulUnifor'+'m'][-0x5+0xafa+-0xbb*0xf]=_0x238158['worldBound'+'sMul']['x'],this['worldBound'+'sMulUnifor'+'m'][0x660+-0x59c+-0xc3]=_0x238158['worldBound'+'sMul']['y'],this['worldBound'+'sMulUnifor'+'m'][-0x21c9+-0x371*-0x8+0x643]=_0x238158['worldBound'+'sMul']['z'],this['constantOu'+'tBoundsMul']['setValue'](this['worldBound'+'sMulUnifor'+'m']),this['worldBound'+'sAddUnifor'+'m'][0x20b8+0x224f*-0x1+0x197]=_0x238158['worldBound'+'sAdd']['x'],this['worldBound'+'sAddUnifor'+'m'][-0x2e7+0x1575+-0x128d*0x1]=_0x238158['worldBound'+'sAdd']['y'],this['worldBound'+'sAddUnifor'+'m'][-0x2285+0xc6*-0xf+0x2e21]=_0x238158['worldBound'+'sAdd']['z'],this['constantOu'+'tBoundsAdd']['setValue'](this['worldBound'+'sAddUnifor'+'m']),this['_setInputB'+'ounds']();let _0x3bc3d9=_0x238158['maxVel']*Math['max'](Math['max'](_0x2c0faa['x'],_0x2c0faa['y']),_0x2c0faa['z']);_0x3bc3d9=Math['max'](_0x3bc3d9,0x1f*0xb1+-0x191*-0x5+-0x1d43),this['constantMa'+'xVel']['setValue'](_0x3bc3d9);}const _0x1f3105=_0x1ef366===null||_0x238158['localSpace']?D['ZERO']:_0x1ef366['getPositio'+'n'](),_0x3688b3=_0x1ef366===null?te['IDENTITY']:_0x1ef366['getWorldTr'+'ansform']();_0x238158['emitterSha'+'pe']===ai?(E_['setFromMat'+'4'](_0x3eb0c5),this['constantSp'+'awnBounds']['setValue'](E_['data']),this['constantSp'+'awnPosInne'+'rRatio']['setValue'](_0x27c59b)):(this['constantSp'+'awnBoundsS'+'phere']['setValue'](_0x238158['emitterRad'+'ius']),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']['setValue'](_0x238158['emitterRad'+'ius']===0x333*-0x1+-0x410+0xa9*0xb?0x2366*-0x1+0x3e2*-0xa+-0x2*-0x251d:_0x238158['emitterRad'+'iusInner']/_0x238158['emitterRad'+'ius'])),this['constantIn'+'itialVeloc'+'ity']['setValue'](_0x238158['initialVel'+'ocity']),b_['setFromMat'+'4'](_0x3688b3),A_['invertMat4'](_0x3688b3),this['emitterPos'+'Uniform'][-0x19a5*-0x1+-0x7e*-0x3b+0x1*-0x36af]=_0x1f3105['x'],this['emitterPos'+'Uniform'][0xe76+0x65*-0x5b+0x1572]=_0x1f3105['y'],this['emitterPos'+'Uniform'][-0x59*0x2e+0x74+0xf8c]=_0x1f3105['z'],this['constantEm'+'itterPos']['setValue'](this['emitterPos'+'Uniform']),this['constantFr'+'ameRandom']['setValue'](this['frameRando'+'mUniform']),this['constantDe'+'lta']['setValue'](_0x4c0040),this['constantRa'+'te']['setValue'](_0x238158['rate']),this['constantRa'+'teDiv']['setValue'](_0x238158['rate2']-_0x238158['rate']),this['constantSt'+'artAngle']['setValue'](_0x238158['startAngle']*Y['DEG_TO_RAD']),this['constantSt'+'artAngle2']['setValue'](_0x238158['startAngle'+'2']*Y['DEG_TO_RAD']),this['constantSe'+'ed']['setValue'](_0x238158['seed']),this['constantLi'+'fetime']['setValue'](_0x238158['lifetime']),this['emitterSca'+'leUniform'][0x1ee5+0x2278+-0x415d]=_0x2c0faa['x'],this['emitterSca'+'leUniform'][-0x204b+-0x1262+0x32ae]=_0x2c0faa['y'],this['emitterSca'+'leUniform'][0xdf*0x7+-0x71*0x32+0xffb]=_0x2c0faa['z'],this['constantEm'+'itterScale']['setValue'](this['emitterSca'+'leUniform']),this['constantEm'+'itterMatri'+'x']['setValue'](b_['data']),this['constantEm'+'itterMatri'+'xInv']['setValue'](A_['data']),this['constantLo'+'calVelocit'+'yDivMult']['setValue'](_0x238158['localVeloc'+'ityUMax']),this['constantVe'+'locityDivM'+'ult']['setValue'](_0x238158['velocityUM'+'ax']),this['constantRo'+'tSpeedDivM'+'ult']['setValue'](_0x238158['rotSpeedUM'+'ax'][-0x8e0+0xf22+-0x12*0x59]);let _0x528601=_0x238158['swapTex']?_0x238158['particleTe'+'xOUT']:_0x238158['particleTe'+'xIN'];_0x528601=_0x238158['beenReset']?_0x238158['particleTe'+'xStart']:_0x528601;const _0x381b57=_0x238158['swapTex']?_0x238158['particleTe'+'xIN']:_0x238158['particleTe'+'xOUT'];this['constantPa'+'rticleTexI'+'N']['setValue'](_0x528601),Tr(_0x39aba2,_0x238158['swapTex']?_0x238158['rtParticle'+'TexIN']:_0x238158['rtParticle'+'TexOUT'],_0x14192c?_0x238158['shaderPart'+'icleUpdate'+'OnStop']:_0x238158['loop']?_0x238158['shaderPart'+'icleUpdate'+'Respawn']:_0x238158['shaderPart'+'icleUpdate'+'NoRespawn']),_0x238158['material']['setParamet'+'er']('particleTe'+'xOUT',_0x528601),_0x238158['material']['setParamet'+'er']('particleTe'+'xIN',_0x381b57),_0x238158['beenReset']=!(-0x73f+-0x1*-0x2429+-0x1ce9),_0x238158['swapTex']=!_0x238158['swapTex'],_0x238158['prevWorldB'+'oundsSize']['copy'](_0x238158['worldBound'+'sSize']),_0x238158['prevWorldB'+'oundsCente'+'r']['copy'](_0x238158['worldBound'+'s']['center']),_0x238158['pack8']&&this['_setInputB'+'ounds'](),Q['popGpuMark'+'er'](_0x39aba2);}}const C_=['NONE','VERTEX','MAP'];class Ob extends pa{['generateKe'+'y'](_0x46dc04){let _0x2b89d7='particle_'+pa['definesHas'+'h'](_0x46dc04['defines'])+'_';for(const _0x946eb2 in _0x46dc04)_0x46dc04['hasOwnProp'+'erty'](_0x946eb2)&&(_0x2b89d7+=_0x46dc04[_0x946eb2]);return _0x2b89d7;}['createVert'+'exDefines'](_0x3c3cab,_0x691d76){const _0x787f6a=new Map(_0x3c3cab['defines']);return _0x3c3cab['mesh']&&_0x787f6a['set']('USE_MESH',''),_0x3c3cab['meshUv']&&_0x787f6a['set']('USE_MESH_U'+'V',''),_0x3c3cab['localSpace']&&_0x787f6a['set']('LOCAL_SPAC'+'E',''),_0x3c3cab['screenSpac'+'e']&&_0x787f6a['set']('SCREEN_SPA'+'CE',''),_0x3c3cab['animTex']&&_0x787f6a['set']('ANIMTEX',''),_0x3c3cab['soft']>-0x1aed*0x1+-0xe1*-0x1b+0x332&&_0x787f6a['set']('SOFT',''),_0x3c3cab['stretch']>0x1257*0x1+0x70d*-0x2+0xd9*-0x5&&_0x787f6a['set']('STRETCH',''),_0x3c3cab['customFace']&&_0x787f6a['set']('CUSTOM_FAC'+'E',''),_0x3c3cab['pack8']&&_0x787f6a['set']('PACK8',''),_0x3c3cab['localSpace']&&_0x787f6a['set']('LOCAL_SPAC'+'E',''),_0x3c3cab['animTexLoo'+'p']&&_0x787f6a['set']('ANIMTEX_LO'+'OP',''),_0x3c3cab['wrap']&&_0x787f6a['set']('WRAP',''),_0x3c3cab['alignToMot'+'ion']&&_0x787f6a['set']('ALIGN_TO_M'+'OTION',''),_0x787f6a['set']('NORMAL',C_[_0x3c3cab['normal']]),_0x691d76['particle_v'+'ertexData']=Pe,_0x3c3cab['mesh']&&_0x3c3cab['meshUv']&&(_0x691d76['particle_u'+'v']=is),_0x3c3cab['useCpu']&&(_0x691d76['particle_v'+'ertexData2']=$c,_0x691d76['particle_v'+'ertexData3']=Ju,_0x691d76['particle_v'+'ertexData4']=ep,_0x691d76['particle_v'+'ertexData5']=tp),_0x787f6a;}['createFrag'+'mentDefine'+'s'](_0x2513df){const _0x5274e2=new Map(_0x2513df['defines']);return _0x2513df['soft']>0x1173+-0x22d*0x3+0x1*-0xaec&&_0x5274e2['set']('SOFT',''),_0x2513df['halflamber'+'t']&&_0x5274e2['set']('HALF_LAMBE'+'RT',''),_0x5274e2['set']('NORMAL',C_[_0x2513df['normal']]),_0x5274e2['set']('BLEND',uy[_0x2513df['blend']]),_0x5274e2;}['createShad'+'erDefiniti'+'on'](_0x4ff00e,_0x23551e){const _0x321fdb=_0x4ff00e['isWebGPU']?it:Fe,_0x9be1f9=Ce['get'](_0x4ff00e,_0x321fdb),_0x11b926={},_0x3007b3=this['createVert'+'exDefines'](_0x23551e,_0x11b926),_0x440798=this['createFrag'+'mentDefine'+'s'](_0x23551e),_0x37b21e='PARTICLE_'+(_0x23551e['useCpu']?'CPU':'GPU')+'\x0a';_0x3007b3['set'](_0x37b21e,''),_0x440798['set'](_0x37b21e,'');const _0x3e4e29=new Map(_0x9be1f9);return Jt['createDefi'+'nition'](_0x4ff00e,{'name':'ParticleSh'+'ader','shaderLanguage':_0x321fdb,'attributes':_0x11b926,'vertexCode':_0x9be1f9['get']('particle_s'+'haderVS'),'fragmentCode':_0x9be1f9['get']('particle_s'+'haderPS'),'fragmentDefines':_0x440798,'fragmentIncludes':_0x3e4e29,'vertexIncludes':_0x3e4e29,'vertexDefines':_0x3007b3});}}const Fb=new Ob();class Nb extends er{constructor(_0xd9e0a5){super(),h(this,'emitter',null),(this['emitter']=_0xd9e0a5,w['assert'](_0xd9e0a5));}['getShaderV'+'ariant'](_0x4e2d55){const {device:_0x3a0217,scene:_0x48b1ca,cameraShaderParams:_0xa46ce9,objDefs:_0x17fca4}=_0x4e2d55,{emitter:_0x359619}=this,_0x211f4f={'defines':$t['getCoreDef'+'ines'](this,_0x4e2d55),'pass':xa,'useCpu':this['emitter']['useCpu'],'normal':_0x359619['lighting']?_0x359619['normalMap']!==null?-0x2411+-0x5ac+0x29bf:-0x249f+-0x2306*0x1+0x47a6:0x2*0x11db+0x59*0xa+-0x2730,'halflambert':this['emitter']['halfLamber'+'t'],'stretch':this['emitter']['stretch'],'alignToMotion':this['emitter']['alignToMot'+'ion'],'soft':this['emitter']['depthSofte'+'ning'],'mesh':this['emitter']['useMesh'],'meshUv':_0x17fca4&Rp,'gamma':(_0xa46ce9==null?void(-0x1*0x11a5+-0xa0*-0xa+-0xb65*-0x1):_0xa46ce9['shaderOutp'+'utGamma'])??yl,'toneMap':(_0xa46ce9==null?void(0x47*0x56+-0x25e5*0x1+0xe0b):_0xa46ce9['toneMappin'+'g'])??Mp,'fog':_0x48b1ca&&!this['emitter']['noFog']?_0x48b1ca['fog']['type']:'none','wrap':this['emitter']['wrap']&&this['emitter']['wrapBounds'],'localSpace':this['emitter']['localSpace'],'screenSpace':_0x359619['inTools']?!(0x15c8+-0x2e4+-0x3c7*0x5):this['emitter']['screenSpac'+'e'],'blend':this['emitter']['blendType'],'animTex':this['emitter']['_isAnimate'+'d'](),'animTexLoop':this['emitter']['animLoop'],'pack8':this['emitter']['pack8'],'customFace':this['emitter']['orientatio'+'n']!==Zc},_0x13f0cf=new rd(_0x4e2d55['viewUnifor'+'mFormat'],_0x4e2d55['viewBindGr'+'oupFormat'],_0x4e2d55['vertexForm'+'at']),_0x123aad=Nn(_0x3a0217);return _0x123aad['register']('particle',Fb),_0x123aad['getProgram']('particle',_0x211f4f,_0x13f0cf,this['userId']);}}const P_=[[-(-0x2de+0x3a*-0x13+-0x72d*-0x1),-(0xbfb*-0x3+0x1354+0x58a*0x3)],[0x1a00+-0x15*0x1b5+0x9da,-(-0x20b*-0x8+0x25*0xf3+0xe*-0x3ad)],[0x5d*0x47+0x1*0x1df9+-0x37c3,-0x3*-0x2ef+0xe92+-0x175e],[-(-0x1*-0xcad+0x9ef*-0x1+-0x2bd),0x222c+0x362*0x3+-0x1*0x2c51]];function xs(_0x305305,_0x6e985b,_0x150c87,_0x36f232,_0x382cc8=Xt,_0x5ca3f0,_0xefe7b7){let _0x418b97=Te;_0xefe7b7&&(_0x382cc8===Ne||_0x382cc8===_s)&&(_0x418b97=vt);const _0x448435=new _e(_0x305305,{'width':_0x6e985b,'height':_0x150c87,'format':_0x382cc8,'cubemap':!(0x57*0x26+0x1*0x80e+-0x14f7),'mipmaps':!(0x118d+-0x11*-0xa0+-0x1c2c),'minFilter':_0x418b97,'magFilter':_0x418b97,'addressU':ue,'addressV':ue,'name':'ParticleSy'+'stemTextur'+'e'}),_0x492989=_0x448435['lock']();if(_0x382cc8===Ne||_0x382cc8===_s){const _0x15e947=new Uint8Array(_0x36f232['length']);for(let _0x35dd40=-0x1241+-0xac3+0x1d04;_0x35dd40<_0x36f232['length'];_0x35dd40++)_0x15e947[_0x35dd40]=_0x36f232[_0x35dd40]*_0x5ca3f0*(-0x1*-0x8eb+0x1464+-0x3*0x970);_0x36f232=_0x15e947;}return _0x492989['set'](_0x36f232),_0x448435['unlock'](),_0x448435;}function M_(_0x494e67){return Math['max'](Math['min'](_0x494e67,0xb*0x111+-0x1*-0x1b29+0x1*-0x26e3),0x861+-0x3*-0xb65+-0x2a90);}const D_=new Xs([-0x1*0x1282+-0xa24*-0x3+-0x32*0x3d,0x1*0x166b+0x4d*-0x2f+-0x5*0x1a8,0x24e7+-0x1*0x1dd9+-0x70d,-0x1*0xe2+-0x13d*0x8+0xaca]),I_=new Xs([-0x485*-0x2+-0x1d*0x31+-0x1*0x37d,-0x1a43+0x1af6+0x59*-0x2,0x64*-0xb+0xdf*-0x1+-0x296*-0x2,-0x930+0x5*-0xd4+-0xd55*-0x1]),L_=new ta([0x540+-0x1424+-0x1*-0xee4,-0x15*0x3a+-0x7b0*-0x4+-0x19fe,0x124c+0x148*-0x16+0x1*0x9e5,-0x472*-0x1+-0x2143+-0x3*-0x99b],[0x1*-0x62a+0x49*0x21+0x115*-0x3,0xe97+-0x3b3*-0x1+-0x925*0x2,0x1212+0x1198*-0x1+-0x1*0x79,-0x1f*0x133+0x71*-0x16+0xfa1*0x3],[-0x14dc+-0x1db6+0x3292,-0x76*0x49+-0x1*-0x6f7+0xfd*0x1b,0x1de2+-0x1f62+0x181,0x43f+0x5*0x4d1+0x1*-0x1c54]),kb=new ta([-0xcd4+0x1*0x270b+-0x3*0x8bd,-0x33d+0x1ff*0xf+-0x1ab3,-0x2*0x25a+0xd06+-0x851*0x1,0xc0d+-0x1*-0x8ea+0x1*-0x14f6],[0x93e+-0x4*-0x3da+-0xc53*0x2,0x84e+-0x809*-0x1+0x2b9*-0x6,0x3d0+-0x1f7b+0x1bac,-0x2198+-0x1*-0x2284+-0xeb],[0x28c*-0xa+-0x287+0x1bff,0x3f5*0x5+0xf37+-0x22ff,0x14f5+0x2*-0x162+-0x1230,0xe26*-0x2+-0x16ff+-0x43*-0xc4]);let bi=-0x2ad*-0x5+0xe17+0x4a*-0x5f;const ec=-0x88*-0x1d+-0x1d59+0xdf5,Ai=new Float32Array(0x6d*-0x3b+-0x1bf*0x9+0x28d9),Or=new te(),R_=new D(),tc=new D(),sc=new D();let Vf,Mc;function he(_0x29226a,_0x28d8d7){Mc[_0x29226a]!==void(-0x1196+-0x23e3+0x3579)&&Mc[_0x29226a]!==null?Vf[_0x29226a]=Mc[_0x29226a]:Vf[_0x29226a]=_0x28d8d7;}function jy(_0x33e23c,_0x2d7ee5,_0x351d8e){return(_0x33e23c*(0x48d*-0x2+-0x171f*0x1+-0x427*-0x8)<<0x1aa7+0x8d2+-0x5*0x715|_0x2d7ee5*(-0x2083+0x1206+0x1*0xf7c)<<0x13e*0x17+-0x1d*0x75+-0xf49|_0x351d8e*(0x1ffc+0x1327*-0x1+-0x5*0x25e))/(0x14b*0xd+0x7bf*-0x2+-0x10*0x15<<0x16d+0x1665+-0x17ba);}function O_(_0x457f3a,_0x7b45ad){const _0x17b8ac=_0x457f3a['length']/(-0x1bf1+0x7*-0x392+0xfb*0x36),_0x342682=new Array(_0x17b8ac*(0x14cd+-0x6f*-0x53+-0x38c6));for(let _0x527ebc=-0x103e+0x3d6*-0x6+0x2742;_0x527ebc<_0x17b8ac;_0x527ebc++)_0x342682[_0x527ebc*(0x7c3*-0x1+0x1*0x9b3+-0x1ec)]=_0x457f3a[_0x527ebc*(-0x117a+0x99f+0x7de)],_0x342682[_0x527ebc*(-0x1*-0x170f+-0x2e3*-0xd+-0x3c92)+(0x222f+0x9be*-0x3+0x4f4*-0x1)]=_0x457f3a[_0x527ebc*(0x1043+0x531+-0x1571*0x1)+(-0x4f*-0x13+0x2*-0x455+0x2ce)],_0x342682[_0x527ebc*(0x1c98+-0x64b*0x1+-0x475*0x5)+(-0xeaf*-0x1+-0x2212+0x1365)]=_0x457f3a[_0x527ebc*(-0x1247+0x2*-0xc5+0x13d4)+(-0xe1b*0x1+0x94*-0x2+-0x1*-0xf45)],_0x342682[_0x527ebc*(0x2*-0x2f5+-0x1541*0x1+0x1b2f)+(0x1*0x1b69+-0x1834+-0x332*0x1)]=jy(_0x7b45ad[_0x527ebc*(0x265a+0x7cf+-0x432*0xb)],_0x7b45ad[_0x527ebc*(-0x8ea+-0x63*-0x3d+-0xeaa)+(-0x1643+-0x1c8e+0x32d2)],_0x7b45ad[_0x527ebc*(0xc89*0x1+0x5*0x503+0x2595*-0x1)+(-0x14a6+0x1a48+0x14*-0x48)]);return _0x342682;}function Ub(_0x36a1bc,_0x2bfede){const _0x2b3970=new Array(_0x2bfede['length']*(-0x1f4f+0x1*-0x18b6+0x3809));for(let _0x134339=-0x1620+0xb*-0x361+0x3b4b;_0x134339<_0x2bfede['length'];_0x134339++)_0x2b3970[_0x134339*(-0x4*-0x4a5+-0x1*-0x1c7c+-0x2f0c)]=_0x36a1bc[_0x134339*(0x146*0x4+-0x1*-0x226a+-0x277f*0x1)],_0x2b3970[_0x134339*(-0x2164+-0x1960+-0x16*-0x2ac)+(0x27b*0x8+0x217e+0x6f*-0x7b)]=_0x36a1bc[_0x134339*(0x232f+0x8a9+-0x2bd5)+(0xe7*0x23+0x23cc+-0x4360)],_0x2b3970[_0x134339*(-0xfc2*0x1+-0x1f02*0x1+-0x4*-0xbb2)+(-0x1f39*0x1+-0x1321+0x325c)]=_0x36a1bc[_0x134339*(0x197d+-0x1482+0x27c*-0x2)+(-0x1*-0x13ee+-0x1d13+0x1*0x927)],_0x2b3970[_0x134339*(0xf*-0x20e+-0x6ce*-0x1+0x1808)+(-0x915+0x10e1*-0x2+0x2ada)]=_0x2bfede[_0x134339];return _0x2b3970;}function Bb(_0x5a2beb,_0x3991bc,_0x3b0081,_0x172cc4,_0xb4d112){const _0x57704a=new Array(_0x5a2beb['length']*(0x232b+0x5e*-0x4c+0x109*-0x7));for(let _0x3a3368=-0xb*-0x1fd+0x510+0x1*-0x1aef;_0x3a3368<_0x5a2beb['length'];_0x3a3368++)_0x57704a[_0x3a3368*(0x1cb*-0x2+0x1c4e+-0x18b4)]=_0x5a2beb[_0x3a3368],_0x57704a[_0x3a3368*(-0x191*-0xb+0xa9f+-0x2*0xdeb)+(-0x1a4a+-0x262f+0x12*0x395)]=_0x3991bc[_0x3a3368],_0x57704a[_0x3a3368*(0x685+-0x24b1+-0x70*-0x45)+(0x1021*0x1+0x2664+0x1*-0x3683)]=0x1*-0x223+0x635+0x2*-0x209,_0x57704a[_0x3a3368*(-0x9e6*-0x3+0xd03*0x2+-0x37b4)+(0x49*0xd+-0x410+0x5e)]=jy(_0x3b0081[_0x3a3368],_0x172cc4[_0x3a3368],_0xb4d112[_0x3a3368]);return _0x57704a;}function zb(_0x394f10,_0x421da2){const _0xfe38b5=new Array(_0x394f10['length']*(-0x1c6e+-0x460+0x2*0x1069));for(let _0x32b5de=-0x1e41*-0x1+-0x1*0x48+-0x1df9;_0x32b5de<_0x394f10['length'];_0x32b5de++)_0xfe38b5[_0x32b5de*(-0x427*-0x3+-0x1*-0x1610+-0x2281)]=_0x394f10[_0x32b5de],_0xfe38b5[_0x32b5de*(-0x2248+-0x45f*-0x7+0x3b3*0x1)+(0x4f0*-0x6+-0x2*-0x161+0x1adf)]=_0x421da2[_0x32b5de],_0xfe38b5[_0x32b5de*(0x2fe+-0x5fa+0x4*0xc0)+(0x10f1*-0x1+-0x77f+0x1872)]=-0x16*0x5b+0x16ef+-0xf1d,_0xfe38b5[_0x32b5de*(0xee8+-0x233f+0x9*0x243)+(0x6b1*-0x1+0x19c5+0x65b*-0x3)]=0x142a+0x2181+-0x35ab;return _0xfe38b5;}function Vb(_0x558fc9){const _0x5508cb=Math['max'](_0x558fc9['rate'],_0x558fc9['rate2'])*_0x558fc9['numParticl'+'es']+_0x558fc9['lifetime'];return Date['now']()+_0x5508cb*(0x975+0x2252+-0x27df);}function Gb(_0x54d7a4,_0x37319c){const _0x512bb0=new Float32Array(_0x54d7a4['length']);for(let _0x259372=-0x11eb*0x1+0xfd8+0x213;_0x259372<_0x54d7a4['length'];_0x259372++)_0x512bb0[_0x259372]=_0x54d7a4[_0x259372]-_0x37319c[_0x259372];return _0x512bb0;}function Gr(_0x2b3273,_0xa7b97b){const _0x136c28=_0xa7b97b['length'],_0x4b7f4=_0x2b3273['length']/_0x136c28;for(let _0x17dd22=0x2*-0x30+-0x1*-0x164f+-0x15ef;_0x17dd22<_0x4b7f4;_0x17dd22++)for(let _0x2e69ab=-0x8c*-0x5+0x377*0x1+-0x633;_0x2e69ab<_0x136c28;_0x2e69ab++){const _0x54892a=Math['abs'](_0x2b3273[_0x17dd22*_0x136c28+_0x2e69ab]);_0xa7b97b[_0x2e69ab]=Math['max'](_0xa7b97b[_0x2e69ab],_0x54892a);}}function Hb(_0x5b1dcb,_0xc9c28a){const _0x5481a9=_0xc9c28a['length'],_0x48aea9=_0x5b1dcb['length']/_0x5481a9;for(let _0x491a5b=0x24*0x10a+-0x1046+0xa*-0x21d;_0x491a5b<_0x48aea9;_0x491a5b++)for(let _0x72a1c0=-0x1e83+0x1*0x1422+-0x1*-0xa61;_0x72a1c0<_0x5481a9;_0x72a1c0++)_0x5b1dcb[_0x491a5b*_0x5481a9+_0x72a1c0]/=_0xc9c28a[_0x72a1c0]===0x1547*0x1+0x4*0x509+-0x296b?-0xfea+-0x1e79+0x1*0x2e64:_0xc9c28a[_0x72a1c0],_0x5b1dcb[_0x491a5b*_0x5481a9+_0x72a1c0]*=-0x5*-0x3b7+0x116b+0x11ff*-0x2+0.5,_0x5b1dcb[_0x491a5b*_0x5481a9+_0x72a1c0]+=0x178d*0x1+-0x1e8*0x4+-0xfed+0.5;}function Fr(_0x5b6313,_0x31b3e1,_0x1b6c86){const _0x7f29f6=Gb(_0x31b3e1,_0x5b6313);return Gr(_0x7f29f6,_0x1b6c86),Hb(_0x7f29f6,_0x1b6c86),_0x7f29f6;}const Wb=new Kt();class $b{constructor(_0x5b3f06,_0x4785bf){h(this,'material',null),h(this,'internalTe'+'x0',null),h(this,'internalTe'+'x1',null),h(this,'internalTe'+'x2',null),h(this,'colorParam',null),this['graphicsDe'+'vice']=_0x5b3f06;const _0x4a7e7a=_0x5b3f06,_0x2c8712=-0x17*-0x144+0x1*0x8e7+0x9f*-0x3d;this['precision']=_0x2c8712,this['_addTimeTi'+'me']=-0x5*0x788+-0xa2e*-0x2+0x12*0xf6,Vf=this,Mc=_0x4785bf,he('numParticl'+'es',0x1*-0x12a4+0x25ce*-0x1+-0x3*-0x12d1),this['numParticl'+'es']>_0x5b3f06['maxTexture'+'Size']&&(w['warn']('WARNING:\x20c'+'an\x27t\x20creat'+'e\x20more\x20tha'+'n\x20'+_0x5b3f06['maxTexture'+'Size']+('\x20particles'+'\x20on\x20this\x20d'+'evice.')),this['numParticl'+'es']=_0x5b3f06['maxTexture'+'Size']),he('rate',-0x7*-0x37+-0x2518+0x2398),he('rate2',this['rate']),he('lifetime',0xe23+0x135f+-0x2150),he('emitterExt'+'ents',new D(0x1aca+0x1*0x1c08+0x3*-0x1246,-0x8a7+0x25ae+-0x1d07,-0x2609+0xbe7+0x1a22)),he('emitterExt'+'entsInner',new D(-0xb*-0x77+0x333*0x3+0x10d*-0xe,0x1*-0xc52+-0x1*0x1a3f+0x2691*0x1,-0x1*-0x1cb5+-0x50c+-0x17a9)),he('emitterRad'+'ius',-0x2a*-0x4a+0x329*0x9+-0x2895*0x1),he('emitterRad'+'iusInner',-0x19ff+0xe4b*0x2+-0x297),he('emitterSha'+'pe',ai),he('initialVel'+'ocity',-0x9ef+0xf08+-0x518),he('wrap',!(0x2377+-0x2cb+-0x20ab)),he('localSpace',!(-0x1173+-0x3*0x801+0x2977)),he('screenSpac'+'e',!(0xfc2+0x597*-0x1+0x2*-0x515)),he('wrapBounds',null),he('colorMap',this['defaultPar'+'amTexture']),he('normalMap',null),he('loop',!(-0x38*0x20+0xe43+-0xa9*0xb)),he('preWarm',!(-0x1*-0x1349+-0x751*-0x1+-0x1a99)),he('sort',Of),he('mode',Ty),he('scene',null),he('lighting',!(-0x2215+-0x12d*0x1f+0x4689)),he('halfLamber'+'t',!(-0xd3*0x29+0x1de7+0x1*0x3e5)),he('intensity',0x15*0x110+-0x21e*-0xd+-0x31d5),he('stretch',0x2*-0xb8a+-0x207d+0x5*0xb1d),he('alignToMot'+'ion',!(0x5*-0x2c2+0x7*-0x95+0x2*0x8ef)),he('depthSofte'+'ning',-0x328*0x5+0x24b2+-0x14ea),he('mesh',null),he('particleNo'+'rmal',new D(-0xe99*0x2+-0x15*0x17f+0x3c9d,-0xe5+-0x1127+0x120d,-0x2fe*0x1+-0x1*0x220d+0x250b)),he('orientatio'+'n',Zc),he('depthWrite',!(-0x3aa+0xcb8+-0x90d)),he('noFog',!(-0xad+0x15d6+-0x4*0x54a)),he('blendType',Zs),he('node',null),he('startAngle',-0xfc3+0x196b+0x2*-0x4d4),he('startAngle'+'2',this['startAngle']),he('animTilesX',-0x4f5+0x474+-0x1*-0x82),he('animTilesY',-0x1c13*0x1+-0x1d89+0x399d),he('animStartF'+'rame',-0x1ea7+0x18f7+0x2d8*0x2),he('animNumFra'+'mes',-0x1*0x207+-0x63c+0x422*0x2),he('animNumAni'+'mations',0x1*0xed+0xb9e+-0xc8a),he('animIndex',0x43*0x35+-0x1f6d+-0x8c7*-0x2),he('randomizeA'+'nimIndex',!(0x86a+0xdac+-0x1615)),he('animSpeed',0x3b*-0x3f+-0x21fa+-0x3080*-0x1),he('animLoop',!(0x1*0x1402+-0x1fff+-0xbfd*-0x1)),this['_gpuUpdate'+'r']=new Rb(this,_0x4a7e7a),this['_cpuUpdate'+'r']=new Lb(this),this['emitterPos'+'Uniform']=new Float32Array(0x4e9*0x7+0x8d3+-0x2b2f),this['wrapBounds'+'Uniform']=new Float32Array(0x2242+-0xd6c*-0x1+0x1*-0x2fab),this['emitterSca'+'leUniform']=new Float32Array([0x1016+0x1847+0x23e*-0x12,0x9*-0xb9+0xba7*-0x2+0x1dd0,-0x21b1+0x4d*-0x9+-0x2467*-0x1]),he('colorGraph',kb),he('colorGraph'+'2',this['colorGraph']),he('scaleGraph',I_),he('scaleGraph'+'2',this['scaleGraph']),he('alphaGraph',I_),he('alphaGraph'+'2',this['alphaGraph']),he('localVeloc'+'ityGraph',L_),he('localVeloc'+'ityGraph2',this['localVeloc'+'ityGraph']),he('velocityGr'+'aph',L_),he('velocityGr'+'aph2',this['velocityGr'+'aph']),he('rotationSp'+'eedGraph',D_),he('rotationSp'+'eedGraph2',this['rotationSp'+'eedGraph']),he('radialSpee'+'dGraph',D_),he('radialSpee'+'dGraph2',this['radialSpee'+'dGraph']),this['animTilesP'+'arams']=new Float32Array(0xea3+-0x16ad+-0xa*-0xce),this['animParams']=new Float32Array(0x257f+-0xd5f+-0x4*0x607),this['animIndexP'+'arams']=new Float32Array(-0x786+-0xbdd*-0x2+0x566*-0x3),this['vbToSort']=null,this['vbOld']=null,this['particleDi'+'stance']=null,this['camera']=null,this['swapTex']=!(-0x1e40+-0x48c*-0x3+0x1*0x109d),this['useMesh']=!(0x46c*0x3+-0x5d2+-0x772),this['useCpu']=!_0x5b3f06['supportsGp'+'uParticles'],this['pack8']=!(0x1*0x1931+0x1*-0x197a+0x49),this['localBound'+'s']=new De(),this['worldBound'+'sNoTrail']=new De(),this['worldBound'+'sTrail']=[new De(),new De()],this['worldBound'+'s']=new De(),this['worldBound'+'sSize']=new D(),this['prevWorldB'+'oundsSize']=new D(),this['prevWorldB'+'oundsCente'+'r']=new D(),this['prevEmitte'+'rExtents']=this['emitterExt'+'ents'],this['prevEmitte'+'rRadius']=this['emitterRad'+'ius'],this['worldBound'+'sMul']=new D(),this['worldBound'+'sAdd']=new D(),this['timeToSwit'+'chBounds']=-0x2339+-0x832+0x2b6b,this['shaderPart'+'icleUpdate'+'Respawn']=null,this['shaderPart'+'icleUpdate'+'NoRespawn']=null,this['shaderPart'+'icleUpdate'+'OnStop']=null,this['numParticl'+'eVerts']=-0x16bd+0x1*0x2710+-0x255*0x7,this['numParticl'+'eIndices']=0x12b*-0x1f+-0x2670+-0x61*-0xc5,this['material']=null,this['meshInstan'+'ce']=null,this['drawOrder']=-0xb12+0x3*-0x7dc+0x22a6,this['seed']=Math['random'](),this['fixedTimeS'+'tep']=(-0xa19*-0x1+0x7*0x455+-0x286b)/(0x8*0x39a+-0xdcf*0x2+-0xf6),this['maxSubStep'+'s']=-0x1ffd+-0xa23*-0x1+0x3a6*0x6,this['simTime']=0x11d6*0x1+0x2700+-0x38d6,this['simTimeTot'+'al']=0x1*-0xa81+0x14b*0x1b+-0x1868,this['beenReset']=!(0x632*0x6+0x36e+-0x223*0x13),this['_layer']=null,this['rebuild']();}get['defaultPar'+'amTexture'](){return w['assert'](this['graphicsDe'+'vice']),Wb['get'](this['graphicsDe'+'vice'],()=>{const _0x59bca7=new Float32Array(0x7be+0x13df*0x1+-0x5*0x4b9);for(let _0x43d049=0x2*0x853+-0x13*-0x1f6+-0x23f*0x18;_0x43d049<0x25fa+-0x1a3a+-0xbb0;_0x43d049++)for(let _0x38c58c=-0x1bf5+-0x6b*0x23+0x2a96;_0x38c58c<-0x2*0xd3c+0x40a+0x167e*0x1;_0x38c58c++){const _0x559e51=_0x38c58c+(-0x1*-0x4b7+-0x55*-0x6b+-0x283d)-(0xdbe+-0x2253+0x1*0x149d+0.5),_0x486de1=_0x43d049+(0x178a+-0x96*0x17+0xa0f*-0x1)-(0x2f*-0x6f+-0xc66+-0x25*-0xe3+0.5),_0x2663ce=M_(0x2475+0xc5b*-0x3+0x9d-M_(Math['sqrt'](_0x559e51*_0x559e51+_0x486de1*_0x486de1)/(0x17e0+-0x43f*-0x3+-0x248d*0x1))-(0x15*-0x11e+0x3*-0x51a+0x9b1*0x4+0.5)),_0x3d7ecc=_0x43d049*(0x22cf+0x29*-0xbd+-0x47a*0x1)+_0x38c58c;_0x59bca7[_0x3d7ecc*(0x1*-0xb82+0x4e2*-0x1+-0x2bc*-0x6)]=-0x56b+-0x2380+-0x246*-0x12,_0x59bca7[_0x3d7ecc*(-0x163+-0x9b9*0x4+0x284b)+(-0x1*-0x321+0x1*0xf3b+-0x125b)]=-0x1a96+-0xdf*-0x1+0x19b8,_0x59bca7[_0x3d7ecc*(-0x886+-0x643+0xecd)+(-0x239*-0xf+-0x4*0x302+-0x154d)]=0x1*0xf8c+-0x5ff+0x98c*-0x1,_0x59bca7[_0x3d7ecc*(-0x103*0x20+-0xb63+-0x1*-0x2bc7)+(0x209*0x12+0x1964+0x27b*-0x19)]=_0x2663ce;}const _0x29fe86=xs(this['graphicsDe'+'vice'],-0xb01+-0x31*0x28+0x12b9*0x1,0xfff+-0x1b34+0xb45,_0x59bca7,_s,-0x2565+0x1*-0x2683+0x4be9*0x1,!(-0x16*-0xc1+-0x13c3*-0x1+-0x2459));return _0x29fe86['minFilter']=vt,_0x29fe86['magFilter']=vt,_0x29fe86;});}['onChangeCa'+'mera'](){this['resetMater'+'ial']();}['calculateB'+'oundsMad'](){this['worldBound'+'sMul']['x']=(0x22dc+-0x875*-0x1+0xb0*-0x3f)/this['worldBound'+'sSize']['x'],this['worldBound'+'sMul']['y']=(0x1875+0x1*0x20ed+-0x3961)/this['worldBound'+'sSize']['y'],this['worldBound'+'sMul']['z']=(0x885*0x3+-0x1c*0x56+-0x1026)/this['worldBound'+'sSize']['z'],this['worldBound'+'sAdd']['copy'](this['worldBound'+'s']['center'])['mul'](this['worldBound'+'sMul'])['mulScalar'](-(-0x2481+0x2*0x902+0x107*0x12)),this['worldBound'+'sAdd']['x']+=-0x2*-0x12bf+-0x3c4+-0x21ba+0.5,this['worldBound'+'sAdd']['y']+=0x8b4+-0x1ba3*0x1+0x12ef+0.5,this['worldBound'+'sAdd']['z']+=-0x1*0x25bb+-0xde9+0x33a4+0.5;}['calculateW'+'orldBounds'](){if(!this['node'])return;if(this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),!this['useCpu']){let _0x1ecf57=!(-0x1*0x1321+-0xf4b+0x1*0x226d);this['emitterSha'+'pe']===ai?_0x1ecf57=!this['emitterExt'+'ents']['equals'](this['prevEmitte'+'rExtents']):_0x1ecf57=this['emitterRad'+'ius']!==this['prevEmitte'+'rRadius'],_0x1ecf57&&this['calculateL'+'ocalBounds']();}const _0x5463b0=this['node']['getWorldTr'+'ansform']();this['localSpace']?this['worldBound'+'sNoTrail']['copy'](this['localBound'+'s']):this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],_0x5463b0),this['worldBound'+'sTrail'][-0xa3*0x1+0x1cd9+-0x1c36]['add'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][-0xcd2+0x15e2+0x90f*-0x1]['add'](this['worldBound'+'sNoTrail']);const _0x20c8ab=this['simTimeTot'+'al'];_0x20c8ab>=this['timeToSwit'+'chBounds']&&(this['worldBound'+'sTrail'][-0x1b58+-0x60d*0x1+0x1*0x2165]['copy'](this['worldBound'+'sTrail'][-0x11b2+0x53c+0x1*0xc77]),this['worldBound'+'sTrail'][-0x1928+-0x3*0x5f4+0x2b05]['copy'](this['worldBound'+'sNoTrail']),this['timeToSwit'+'chBounds']=_0x20c8ab+this['lifetime']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][-0x14af+0x14b3+-0x4*0x1]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0x1f25+-0x14*-0x1c4+-0x4273),this['localSpace']?(this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x5463b0),this['meshInstan'+'ce']['mesh']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x5463b0)):(this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['mesh']['aabb']['copy'](this['worldBound'+'s'])),this['meshInstan'+'ce']['_aabbVer']=0x68c*0x1+-0x3e*0x1f+0xd*0x13-this['meshInstan'+'ce']['_aabbVer'],this['pack8']&&this['calculateB'+'oundsMad']();}['resetWorld'+'Bounds'](){this['node']&&(this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][0x871*-0x2+-0xa35+-0x5f*-0x49]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][0x122c+-0x1b1+-0x107a]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][-0x1401+0x1abf*0x1+-0x6be]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0x2421+0x255e+0x497d*-0x1),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['simTimeTot'+'al']=0x32*0x2e+-0x1a4e+0x5c6*0x3,this['timeToSwit'+'chBounds']=-0x2*0x17e+-0x6d8+0x9d4);}['calculateL'+'ocalBounds'](){let _0xc95f17=Number['MAX_VALUE'],_0x2a0153=Number['MAX_VALUE'],_0xdea3d5=Number['MAX_VALUE'],_0x2b7b47=-Number['MAX_VALUE'],_0x457e24=-Number['MAX_VALUE'],_0x4efeb6=-Number['MAX_VALUE'],_0x15cc21=-0x975*0x1+0x29*-0x40+-0x13b5*-0x1,_0x555ac8=0xc2*0x13+0x265*-0x2+0x1e*-0x52;const _0x3c66bd=this['lifetime']/this['precision'],_0x8c6520=[this['qVelocity'],this['qVelocity2']],_0x185c85=[this['qLocalVelo'+'city'],this['qLocalVelo'+'city2']],_0x41a4ec=[-0x8*0x26f+0xa*0x91+-0x24d*-0x6,-0x23e5+-0x761+0x2b46],_0x8a0516=[0x2*0xa31+0x1*-0x3c4+0x2*-0x84f,-0xf7+-0x1*0xf53+0x825*0x2],_0x5209ba=[0x2002+-0x1*-0x1c53+-0x3c55,-0x5a*-0x59+-0x13da+0x2dc*-0x4],_0x485cb3=[-0x1df7+-0xc05+-0x29fc*-0x1,-0x5ff*-0x2+-0x4a4+-0x75a],_0x391c87=[0x3*0x388+-0x1b16+0x107e,-0x10bf+-0x1*0x1231+0x22f0];let _0x2211eb,_0x28796b,_0x47f511;for(let _0x1c2dc0=-0x193f+0x25e3+-0xca4;_0x1c2dc0<this['precision']+(0x271*0x5+0x120*0x1e+-0x44*0xad);_0x1c2dc0++){const _0x2b8ee2=Math['min'](_0x1c2dc0,this['precision']-(0x37b*0x5+-0x783*0x1+-0x9e3));for(let _0xcdf5d1=-0x1591+0x15*0x8+-0x1*-0x14e9;_0xcdf5d1<-0x1*0xbbb+-0x13e6+0x26f*0xd;_0xcdf5d1++)_0x2211eb=_0x185c85[_0xcdf5d1][_0x2b8ee2*(0x1*0x16d6+0x129b+-0x296e)+(-0x1c1*0x2+0xfb*-0x12+0x1528)]*_0x3c66bd+_0x41a4ec[_0xcdf5d1],_0x28796b=_0x185c85[_0xcdf5d1][_0x2b8ee2*(0x10b5+0x182*0x15+-0x14*0x26b)+(-0xb61*0x3+-0xce2+0x1cf*0x1a)]*_0x3c66bd+_0x8a0516[_0xcdf5d1],_0x47f511=_0x185c85[_0xcdf5d1][_0x2b8ee2*(0x33c*0x9+0xbb+-0xeea*0x2)+(-0x17*-0x149+-0x1c82+0x59*-0x3)]*_0x3c66bd+_0x5209ba[_0xcdf5d1],_0xc95f17=Math['min'](_0x2211eb,_0xc95f17),_0x2a0153=Math['min'](_0x28796b,_0x2a0153),_0xdea3d5=Math['min'](_0x47f511,_0xdea3d5),_0x2b7b47=Math['max'](_0x2211eb,_0x2b7b47),_0x457e24=Math['max'](_0x28796b,_0x457e24),_0x4efeb6=Math['max'](_0x47f511,_0x4efeb6),_0x41a4ec[_0xcdf5d1]=_0x2211eb,_0x8a0516[_0xcdf5d1]=_0x28796b,_0x5209ba[_0xcdf5d1]=_0x47f511;for(let _0x4d0c5b=0x6*-0x34c+0x16f1+-0x329;_0x4d0c5b<0xc3*0xb+-0x5*-0x13+-0x8be;_0x4d0c5b++)_0x391c87[_0x4d0c5b]+=_0x3c66bd*Math['sqrt'](_0x8c6520[_0x4d0c5b][_0x2b8ee2*(-0x4ac+-0x930+0x1*0xddf)+(-0xc51*0x3+-0x465+0x2958)]*_0x8c6520[_0x4d0c5b][_0x2b8ee2*(-0x4e0+0x23d+-0x3*-0xe2)+(-0xc27+-0x23cc+0x2ff3*0x1)]+_0x8c6520[_0x4d0c5b][_0x2b8ee2*(0x1a36*-0x1+0xa93*0x2+0x513)+(-0x20e9+-0x29e*-0x2+0x1bae)]*_0x8c6520[_0x4d0c5b][_0x2b8ee2*(-0x853*-0x3+0x13bc+0x2*-0x1659)+(-0x1*0x1148+0x1b37+-0x29*0x3e)]+_0x8c6520[_0x4d0c5b][_0x2b8ee2*(0x1c5*-0x13+-0x26d6+0x4878)+(0x2*-0xe9+0x1a9d+-0xeb*0x1b)]*_0x8c6520[_0x4d0c5b][_0x2b8ee2*(-0x18a9*0x1+-0x46e*-0x5+-0x13*-0x22)+(-0x1*-0x1b41+-0x60+-0x1*0x1adf)]);_0x485cb3[-0x2277+-0x1*-0x1d09+0x56e]+=this['qRadialSpe'+'ed'][_0x2b8ee2]*_0x3c66bd,_0x485cb3[-0xdd*0x21+0x703*-0x4+0x388a]+=this['qRadialSpe'+'ed2'][_0x2b8ee2]*_0x3c66bd,_0x15cc21=Math['max'](_0x15cc21,Math['max'](Math['abs'](_0x485cb3[-0x2*0xc89+0x2*-0xc8b+0x3228]),Math['abs'](_0x485cb3[-0x12e4+-0xd2c+0x2011]))),_0x555ac8=Math['max'](_0x555ac8,this['qScale'][_0x2b8ee2]);}this['emitterSha'+'pe']===ai?(_0x2211eb=this['emitterExt'+'ents']['x']*(0x71*0x1a+-0x12bf+0x745+0.5),_0x28796b=this['emitterExt'+'ents']['y']*(0x1*-0x17ba+-0xd7e+0x2538+0.5),_0x47f511=this['emitterExt'+'ents']['z']*(0x1188+0x8*0x397+-0x50*0x94+0.5)):(_0x2211eb=this['emitterRad'+'ius'],_0x28796b=this['emitterRad'+'ius'],_0x47f511=this['emitterRad'+'ius']);const _0x5ab695=Math['max'](_0x391c87[-0x21ff+-0x1d7d*0x1+0x3f7c],_0x391c87[-0xd00*-0x2+-0x1*-0x2453+-0x3e52]);tc['x']=_0xc95f17-_0x555ac8-_0x2211eb-_0x15cc21-_0x5ab695,tc['y']=_0x2a0153-_0x555ac8-_0x28796b-_0x15cc21-_0x5ab695,tc['z']=_0xdea3d5-_0x555ac8-_0x47f511-_0x15cc21-_0x5ab695,sc['x']=_0x2b7b47+_0x555ac8+_0x2211eb+_0x15cc21+_0x5ab695,sc['y']=_0x457e24+_0x555ac8+_0x28796b+_0x15cc21+_0x5ab695,sc['z']=_0x4efeb6+_0x555ac8+_0x47f511+_0x15cc21+_0x5ab695,this['localBound'+'s']['setMinMax'](tc,sc);}['rebuild'](){const _0x1b783c=this['graphicsDe'+'vice'];this['colorMap']===null&&(this['colorMap']=this['defaultPar'+'amTexture']),this['spawnBound'+'s']=this['emitterSha'+'pe']===ai?this['emitterExt'+'ents']:this['emitterRad'+'ius'],this['useCpu']=this['useCpu']||this['sort']>Of||_0x1b783c['maxVertexT'+'extures']<=-0x21f*0xb+-0x982+0x20d8*0x1||_0x1b783c['fragmentUn'+'iformsCoun'+'t']<0x9b+0x1702+0x175d*-0x1||_0x1b783c['forceCpuPa'+'rticles'],this['_destroyRe'+'sources'](),this['pack8']=(this['pack8']||!_0x1b783c['textureFlo'+'atRenderab'+'le'])&&!this['useCpu'],bi=this['useCpu']||this['pack8']?-0x1cdd+-0x1*0x1525+0x3206:-0x10b4+0x1*0x241+0xe75,this['useMesh']=!!this['mesh'],this['numParticl'+'esPot']=Y['nextPowerO'+'fTwo'](this['numParticl'+'es']),this['rebuildGra'+'phs'](),this['calculateL'+'ocalBounds'](),this['resetWorld'+'Bounds'](),this['node']&&(this['worldBound'+'s']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][0x2e*-0xbf+-0xa*-0x2e7+0x54c]['copy'](this['worldBound'+'s']),this['worldBound'+'sTrail'][-0x187e+-0xb14+0x2393]['copy'](this['worldBound'+'s']),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0xd01*-0x1+-0x730*-0x1+0x5d3),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['pack8']&&this['calculateB'+'oundsMad']()),this['vbToSort']=new Array(this['numParticl'+'es']);for(let _0x2f46a1=-0x3*-0x588+0x47*-0x81+0x132f;_0x2f46a1<this['numParticl'+'es'];_0x2f46a1++)this['vbToSort'][_0x2f46a1]=[-0xe4a+-0x50f+0x27*0x7f,0x20d1+-0xb3*0x29+-0x426];this['particleDi'+'stance']=new Float32Array(this['numParticl'+'es']),this['_gpuUpdate'+'r']['randomize'](),this['particleTe'+'x']=new Float32Array(this['numParticl'+'esPot']*bi*ec);const _0x52b816=this['node']===null||this['localSpace']?D['ZERO']:this['node']['getPositio'+'n']();this['emitterSha'+'pe']===ai&&(this['node']===null||this['localSpace']?Or['setTRS'](D['ZERO'],le['IDENTITY'],this['spawnBound'+'s']):Or['setTRS'](D['ZERO'],this['node']['getRotatio'+'n'](),R_['copy'](this['spawnBound'+'s'])['mul'](this['node']['localScale'])),Ai[0xd42+0x252f+0x1*-0x3271]=this['emitterExt'+'ents']['x']!==-0x1*0x1b8d+0x1*0xeff+-0x1*-0xc8e?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:0x1*-0xc2+0x8b7+-0x1*0x7f5,Ai[0x79*0x1d+-0x38d+-0xa27]=this['emitterExt'+'ents']['y']!==0x4b8*0x1+0x3af+0x1*-0x867?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:-0x10e1+0x304+-0x1*-0xddd,Ai[-0x230+-0x2*0x452+0xad6]=this['emitterExt'+'ents']['z']!==-0x200a+-0xffb+0x1*0x3005?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:0x22e0+0xdb7+0x3097*-0x1);for(let _0x2559b5=-0x1*0x14b1+-0x22c1*-0x1+-0x12c*0xc;_0x2559b5<this['numParticl'+'es'];_0x2559b5++)this['_cpuUpdate'+'r']['calcSpawnP'+'osition'](this['particleTe'+'x'],Or,Ai,_0x52b816,_0x2559b5),this['useCpu']&&(this['particleTe'+'x'][_0x2559b5*ec+(-0xb*0x175+0x41*0x8b+-0x35*0x5d)+this['numParticl'+'esPot']*(0x8de+-0x202f+0x1753)*ec]=-0x3e0+-0x18b0+-0x1c91*-0x1);this['particleTe'+'xStart']=new Float32Array(this['numParticl'+'esPot']*bi*ec);for(let _0xda03fb=0x192b+0x17*0x139+-0x354a;_0xda03fb<this['particleTe'+'xStart']['length'];_0xda03fb++)this['particleTe'+'xStart'][_0xda03fb]=this['particleTe'+'x'][_0xda03fb];this['useCpu']||(this['pack8']?(this['particleTe'+'xIN']=xs(_0x1b783c,this['numParticl'+'esPot'],bi,this['particleTe'+'x'],Ne,0x1c13+0x65*-0x35+-0x729,!(0x13d3+0x15ef+-0x29c1*0x1)),this['particleTe'+'xOUT']=xs(_0x1b783c,this['numParticl'+'esPot'],bi,this['particleTe'+'x'],Ne,-0x1e*0x13f+-0x1eb8+0x441b,!(-0x2*0x335+-0xc34+0x129f*0x1)),this['particleTe'+'xStart']=xs(_0x1b783c,this['numParticl'+'esPot'],bi,this['particleTe'+'xStart'],Ne,-0x95*-0x2b+0x4f*0x1+0x511*-0x5,!(-0x4*-0xa7+-0xceb*-0x3+-0x295c))):(this['particleTe'+'xIN']=xs(_0x1b783c,this['numParticl'+'esPot'],bi,this['particleTe'+'x']),this['particleTe'+'xOUT']=xs(_0x1b783c,this['numParticl'+'esPot'],bi,this['particleTe'+'x']),this['particleTe'+'xStart']=xs(_0x1b783c,this['numParticl'+'esPot'],bi,this['particleTe'+'xStart'])),this['rtParticle'+'TexIN']=new gt({'colorBuffer':this['particleTe'+'xIN'],'depth':!(0x2*0xf9e+0x32*0x37+-0x29f9)}),this['rtParticle'+'TexOUT']=new gt({'colorBuffer':this['particleTe'+'xOUT'],'depth':!(0x2326+-0x15b9+-0xd6c)}),this['swapTex']=!(0x17bf*-0x1+0x7bc+0x1004));const _0x59e2d1=new Map();this['localSpace']&&_0x59e2d1['set']('LOCAL_SPAC'+'E',''),this['pack8']&&_0x59e2d1['set']('PACK8',''),this['emitterSha'+'pe']===ai&&_0x59e2d1['set']('EMITTERSHA'+'PE_BOX','');const _0x1ffbd6='Shape:'+this['emitterSha'+'pe']+'-Pack:'+this['pack8']+'-Local:'+this['localSpace'],_0x2fd2c6=Ce['get'](_0x1b783c,_0x1b783c['isWebGPU']?it:Fe),_0x582568=new Map(_0x2fd2c6),_0xf3b43c={'attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'particle_s'+'imulationP'+'S','fragmentDefines':_0x59e2d1,'fragmentIncludes':_0x582568};_0xf3b43c['uniqueName']='ParticleUp'+'dateRespaw'+'n-'+_0x1ffbd6,_0x59e2d1['set']('RESPAWN',''),this['shaderPart'+'icleUpdate'+'Respawn']=$t['createShad'+'er'](_0x1b783c,_0xf3b43c),_0x59e2d1['delete']('RESPAWN'),_0xf3b43c['uniqueName']='ParticleUp'+'dateNoResp'+'awn-'+_0x1ffbd6,_0x59e2d1['set']('NO_RESPAWN',''),this['shaderPart'+'icleUpdate'+'NoRespawn']=$t['createShad'+'er'](_0x1b783c,_0xf3b43c),_0x59e2d1['delete']('NO_RESPAWN'),_0xf3b43c['uniqueName']='ParticleUp'+'dateStop-'+_0x1ffbd6,_0x59e2d1['set']('ON_STOP',''),this['shaderPart'+'icleUpdate'+'OnStop']=$t['createShad'+'er'](_0x1b783c,_0xf3b43c),this['numParticl'+'eVerts']=this['useMesh']?this['mesh']['vertexBuff'+'er']['numVertice'+'s']:-0x1c35+0xb2f+0x2*0x885,this['numParticl'+'eIndices']=this['useMesh']?this['mesh']['indexBuffe'+'r'][0x1843+-0x9f+-0x17a4]['numIndices']:0x1*-0x1eba+0x18d1*0x1+0x5ef,this['_allocate'](this['numParticl'+'es']);const _0x198360=new Ge(_0x1b783c);_0x198360['vertexBuff'+'er']=this['vertexBuff'+'er'],_0x198360['indexBuffe'+'r'][-0x1b0b+-0x6*-0xd+-0x5*-0x559]=this['indexBuffe'+'r'],_0x198360['primitive'][0x42d*-0x1+0xd*0x13c+-0x3*0x3f5]['type']=qs,_0x198360['primitive'][0x1554+0x1a62+-0x1f*0x18a]['base']=0x264b*0x1+0x4b3*-0x8+0xb3*-0x1,_0x198360['primitive'][-0x262c+0x1b9a+0xf6*0xb]['count']=this['numParticl'+'es']*this['numParticl'+'eIndices'],_0x198360['primitive'][-0x65*-0x47+-0xa58+0x1*-0x11ab]['indexed']=!(0xbf0+0x655+-0x1245),this['material']=this['_createMat'+'erial'](),this['resetMater'+'ial']();const _0x2de26c=this['meshInstan'+'ce']?this['meshInstan'+'ce']['visible']:!(-0x4*-0x716+-0xcf*0x2e+0x8da);this['meshInstan'+'ce']=new He(_0x198360,this['material'],this['node']),this['meshInstan'+'ce']['pick']=!(-0xfe9*-0x1+-0x1*-0x1dd1+-0x1*0x2db9),this['meshInstan'+'ce']['updateKey'](),this['meshInstan'+'ce']['cull']=!(-0x3e1*0xa+0x21c2+-0x508*-0x1),this['localSpace']?this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],this['node']['getWorldTr'+'ansform']()):this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['_updateAab'+'b']=!(0x10d*0x1d+0x10a5+-0x2f1d),this['meshInstan'+'ce']['visible']=_0x2de26c,this['_setMateri'+'alTextures'](),this['resetTime'](),this['addTime'](-0x26c6+-0x2371+0x3*0x18bd,!(-0x1c55+-0x247f*-0x1+-0x829)),this['preWarm']&&this['prewarm'](this['lifetime']);}['_isAnimate'+'d'](){return this['animNumFra'+'mes']>=0x17be+0xb6d+0xe*-0x283&&(this['animTilesX']>0x2703+0x1*-0x1741+-0xfc1||this['animTilesY']>0x23dd*0x1+0x218+0x97d*-0x4)&&(this['colorMap']&&this['colorMap']!==this['defaultPar'+'amTexture']||this['normalMap']);}['rebuildGra'+'phs'](){const _0x4e3e96=this['precision'],_0x1ed110=this['graphicsDe'+'vice'];this['qLocalVelo'+'city']=this['localVeloc'+'ityGraph']['quantize'](_0x4e3e96),this['qVelocity']=this['velocityGr'+'aph']['quantize'](_0x4e3e96),this['qColor']=this['colorGraph']['quantizeCl'+'amped'](_0x4e3e96,0x24bb+0x211*-0xd+-0x1*0x9de,0x1214+-0x1b71+0x2*0x4af),this['qRotSpeed']=this['rotationSp'+'eedGraph']['quantize'](_0x4e3e96),this['qScale']=this['scaleGraph']['quantize'](_0x4e3e96),this['qAlpha']=this['alphaGraph']['quantize'](_0x4e3e96),this['qRadialSpe'+'ed']=this['radialSpee'+'dGraph']['quantize'](_0x4e3e96),this['qLocalVelo'+'city2']=this['localVeloc'+'ityGraph2']['quantize'](_0x4e3e96),this['qVelocity2']=this['velocityGr'+'aph2']['quantize'](_0x4e3e96),this['qColor2']=this['colorGraph'+'2']['quantizeCl'+'amped'](_0x4e3e96,-0x2069*-0x1+-0x1134+-0xf35,-0x1bc9+0x1fa0+0x3d6*-0x1),this['qRotSpeed2']=this['rotationSp'+'eedGraph2']['quantize'](_0x4e3e96),this['qScale2']=this['scaleGraph'+'2']['quantize'](_0x4e3e96),this['qAlpha2']=this['alphaGraph'+'2']['quantize'](_0x4e3e96),this['qRadialSpe'+'ed2']=this['radialSpee'+'dGraph2']['quantize'](_0x4e3e96);for(let _0x1ba2fb=0x1*0x180a+-0x2cf+-0x1*0x153b;_0x1ba2fb<_0x4e3e96;_0x1ba2fb++)this['qRotSpeed'][_0x1ba2fb]*=Y['DEG_TO_RAD'],this['qRotSpeed2'][_0x1ba2fb]*=Y['DEG_TO_RAD'];if(this['localVeloc'+'ityUMax']=new Float32Array(0x1e0c+-0x1133+0x1f*-0x6a),this['velocityUM'+'ax']=new Float32Array(0x46b+-0x17b6+0x134e),this['colorUMax']=new Float32Array(0xbd*-0x2d+0x1e64+0x2d8),this['rotSpeedUM'+'ax']=[0x1*0x11a2+-0x55*-0x11+-0x1*0x1747],this['scaleUMax']=[-0x2428*-0x1+0x1785+-0x1*0x3bad],this['alphaUMax']=[-0xad*0x1c+0x1e6d+-0xb81],this['radialSpee'+'dUMax']=[0x24d9+-0x3*-0x5cf+-0x3646],this['qLocalVelo'+'cityDiv']=Fr(this['qLocalVelo'+'city'],this['qLocalVelo'+'city2'],this['localVeloc'+'ityUMax']),this['qVelocityD'+'iv']=Fr(this['qVelocity'],this['qVelocity2'],this['velocityUM'+'ax']),this['qColorDiv']=Fr(this['qColor'],this['qColor2'],this['colorUMax']),this['qRotSpeedD'+'iv']=Fr(this['qRotSpeed'],this['qRotSpeed2'],this['rotSpeedUM'+'ax']),this['qScaleDiv']=Fr(this['qScale'],this['qScale2'],this['scaleUMax']),this['qAlphaDiv']=Fr(this['qAlpha'],this['qAlpha2'],this['alphaUMax']),this['qRadialSpe'+'edDiv']=Fr(this['qRadialSpe'+'ed'],this['qRadialSpe'+'ed2'],this['radialSpee'+'dUMax']),this['pack8']){const _0x38ec44=[0x2ed*0xd+0x42f*0x7+-0x4352,0x1a2a+0x1f41+-0x396b,-0x2324+0x1fc0+0x7*0x7c];Gr(this['qVelocity'],_0x38ec44);const _0x43a733=[-0x3*0x224+-0xf6e*-0x2+-0x1870,-0xc5*0x11+-0x7*0x3b7+-0x1*-0x2716,0x15*-0x3+-0xb*0x2f5+0x20c6];Gr(this['qVelocity2'],_0x43a733);const _0x2b4082=[0x7c2+-0x1*-0x1a03+0x21c5*-0x1,-0x3ce+0x981*0x4+-0x1d*0x12e,-0x2207+0x1e8a*-0x1+0x4091];Gr(this['qLocalVelo'+'city'],_0x2b4082);const _0x31d898=[0x5ae*-0x1+0x17b8+-0x120a,-0x2*-0x74c+0x2632*0x1+-0x34ca,-0x8f3*0x1+-0x1*0x1d87+0x267a];Gr(this['qLocalVelo'+'city2'],_0x31d898);const _0x36e22b=[0x1193+-0xa*-0x1ff+-0x2589];Gr(this['qRadialSpe'+'ed'],_0x36e22b);const _0x1ccbb7=[0x2700+0x1*-0x1273+-0x148d];Gr(this['qRadialSpe'+'ed2'],_0x1ccbb7);let _0x2873ff=Math['max'](_0x38ec44[-0x19*0x15d+0x1*0x2051+0x1c4],_0x43a733[-0x47*0x49+0x1*0x1c3e+-0x1*0x7ff]);_0x2873ff=Math['max'](_0x2873ff,_0x38ec44[0x1*0x23bf+-0x602+0xb*-0x2b4]),_0x2873ff=Math['max'](_0x2873ff,_0x43a733[-0x3*0xb3b+-0x1*0x242b+0x45dd]),_0x2873ff=Math['max'](_0x2873ff,_0x38ec44[0x1934+-0xb69*0x1+0x1*-0xdc9]),_0x2873ff=Math['max'](_0x2873ff,_0x43a733[0x21e3+-0x2b3*-0xe+-0x47ab*0x1]);let _0x37ae20=Math['max'](_0x2b4082[-0x18bb+-0x5eb+0x1ea6],_0x31d898[0x2539+-0x1*-0x1e2f+-0x4368]);_0x37ae20=Math['max'](_0x37ae20,_0x2b4082[0x124d+0xa*0x43+-0xa75*0x2]),_0x37ae20=Math['max'](_0x37ae20,_0x31d898[-0x2616+0x3*-0x53f+0x34*0x109]),_0x37ae20=Math['max'](_0x37ae20,_0x2b4082[0x1*-0x260b+-0x3*0x133+-0x14d3*-0x2]),_0x37ae20=Math['max'](_0x37ae20,_0x31d898[-0x2644+-0xdfd+-0x313*-0x11]);const _0x3e1a9f=Math['max'](_0x36e22b[0x1322+0x1dcb+0x30ed*-0x1],_0x1ccbb7[-0x1*0x1411+0x2e*-0x47+-0xaf1*-0x3]);this['maxVel']=_0x2873ff+_0x37ae20+_0x3e1a9f;}this['useCpu']||(this['internalTe'+'x0']=xs(_0x1ed110,_0x4e3e96,0x9e*0xd+0x1*-0xa1b+0x216,O_(this['qLocalVelo'+'city'],this['qLocalVelo'+'cityDiv'])),this['internalTe'+'x1']=xs(_0x1ed110,_0x4e3e96,0x3fd*-0x5+-0xf5e+0x2350*0x1,O_(this['qVelocity'],this['qVelocityD'+'iv'])),this['internalTe'+'x2']=xs(_0x1ed110,_0x4e3e96,-0x5*0xb9+0x118e+-0xdf0,Bb(this['qRotSpeed'],this['qScale'],this['qScaleDiv'],this['qRotSpeedD'+'iv'],this['qAlphaDiv'])),this['internalTe'+'x3']=xs(_0x1ed110,_0x4e3e96,-0x1*0x10d+0x253*-0xd+0x641*0x5,zb(this['qRadialSpe'+'ed'],this['qRadialSpe'+'edDiv']))),this['colorParam']=xs(_0x1ed110,_0x4e3e96,-0x231a+-0x3*-0x9c7+0x5c6,Ub(this['qColor'],this['qAlpha']),_s,-0x13a9+-0xb97+0x1f41,!(-0xdee+-0x126*0x21+0x33d4));}['_setMateri'+'alTextures'](){this['colorMap']&&(w['call'](()=>{LS(this['colorMap']['format'])&&w['warnOnce']('ParticleEm'+'itter:\x20col'+'orMap\x20text'+'ure\x20['+this['colorMap']['name']+(']\x20is\x20not\x20u'+'sing\x20sRGB\x20'+'format.\x20Pl'+'ease\x20corre'+'ct\x20it\x20for\x20'+'the\x20correc'+'t\x20renderin'+'g.'),this['colorMap']);}),this['material']['setParamet'+'er']('colorMap',this['colorMap']),this['lighting']&&this['normalMap']&&this['material']['setParamet'+'er']('normalMap',this['normalMap']));}['_createMat'+'erial'](){const _0x4c7b44=new Nb(this);return _0x4c7b44['name']='EmitterMat'+'erial:'+this['node']['name'],_0x4c7b44['cull']=bt,_0x4c7b44['alphaWrite']=!(-0x66f*-0x1+0x11e+-0x78c),_0x4c7b44['blendType']=this['blendType'],_0x4c7b44['depthWrite']=this['depthWrite'],_0x4c7b44;}['resetMater'+'ial'](){const _0x32052d=this['material'];_0x32052d['setParamet'+'er']('stretch',this['stretch']),this['_isAnimate'+'d']()&&(_0x32052d['setParamet'+'er']('animTexTil'+'esParams',this['animTilesP'+'arams']),_0x32052d['setParamet'+'er']('animTexPar'+'ams',this['animParams']),_0x32052d['setParamet'+'er']('animTexInd'+'exParams',this['animIndexP'+'arams'])),_0x32052d['setParamet'+'er']('colorMult',this['intensity']),this['useCpu']||(_0x32052d['setParamet'+'er']('internalTe'+'x0',this['internalTe'+'x0']),_0x32052d['setParamet'+'er']('internalTe'+'x1',this['internalTe'+'x1']),_0x32052d['setParamet'+'er']('internalTe'+'x2',this['internalTe'+'x2']),_0x32052d['setParamet'+'er']('internalTe'+'x3',this['internalTe'+'x3'])),_0x32052d['setParamet'+'er']('colorParam',this['colorParam']),_0x32052d['setParamet'+'er']('numParticl'+'es',this['numParticl'+'es']),_0x32052d['setParamet'+'er']('numParticl'+'esPot',this['numParticl'+'esPot']),_0x32052d['setParamet'+'er']('lifetime',this['lifetime']),_0x32052d['setParamet'+'er']('rate',this['rate']),_0x32052d['setParamet'+'er']('rateDiv',this['rate2']-this['rate']),_0x32052d['setParamet'+'er']('seed',this['seed']),_0x32052d['setParamet'+'er']('scaleDivMu'+'lt',this['scaleUMax'][0x5c4+0xad*-0xb+0x3d*0x7]),_0x32052d['setParamet'+'er']('alphaDivMu'+'lt',this['alphaUMax'][0x1914+-0x6bb*0x2+0x5cf*-0x2]),_0x32052d['setParamet'+'er']('radialSpee'+'dDivMult',this['radialSpee'+'dUMax'][-0x185*0x9+0x1e7a+-0x10cd]),_0x32052d['setParamet'+'er']('graphNumSa'+'mples',this['precision']),_0x32052d['setParamet'+'er']('graphSampl'+'eSize',(0x5*0x4b6+0x1*-0x1c81+0x4f4)/this['precision']),_0x32052d['setParamet'+'er']('emitterSca'+'le',new Float32Array([0x865+-0xa45+0x1e1,0x1*-0x8c9+-0x3*-0x8d+0x9*0xcb,0xf5d+-0x2*0xae1+0x666])),this['pack8']&&(this['_gpuUpdate'+'r']['_setInputB'+'ounds'](),_0x32052d['setParamet'+'er']('inBoundsSi'+'ze',this['_gpuUpdate'+'r']['inBoundsSi'+'zeUniform']),_0x32052d['setParamet'+'er']('inBoundsCe'+'nter',this['_gpuUpdate'+'r']['inBoundsCe'+'nterUnifor'+'m']),_0x32052d['setParamet'+'er']('maxVel',this['maxVel'])),this['wrap']&&this['wrapBounds']&&(this['wrapBounds'+'Uniform'][-0x1*-0x7a9+0x1026+0x5*-0x4c3]=this['wrapBounds']['x'],this['wrapBounds'+'Uniform'][0x30*0xc2+0x779*0x4+0x4243*-0x1]=this['wrapBounds']['y'],this['wrapBounds'+'Uniform'][-0x572*-0x2+-0x42*-0x3d+-0x1a9c]=this['wrapBounds']['z'],_0x32052d['setParamet'+'er']('wrapBounds',this['wrapBounds'+'Uniform'])),this['_setMateri'+'alTextures'](),this['depthSofte'+'ning']>0x2415+-0x1*-0x2329+-0xb*0x67a&&_0x32052d['setParamet'+'er']('softening',(-0x1*0x2a9+-0x1092+0x99e*0x2)/(this['depthSofte'+'ning']*this['depthSofte'+'ning']*(0x3*0x4ca+-0x1e7*-0x9+0x13*-0x1a3))),this['stretch']>0x1*0x1c75+-0x1125+-0xb50&&(_0x32052d['cull']=bt),this['_compParti'+'cleFacePar'+'ams']();}['_compParti'+'cleFacePar'+'ams'](){let _0x452046,_0x2949f6;if(this['orientatio'+'n']===Zc)_0x452046=new Float32Array([-0x1249+0x12be+-0x2*0x3a,-0x4b5*-0x3+-0xf1a+-0x1*-0xfb,-0x1e8d*-0x1+-0x114a+0x5*-0x2a7]),_0x2949f6=new Float32Array([0x264+-0xe3*-0xa+-0x106*0xb,-0x155c+-0x162b+-0x1*-0x2b87,-0x1*0x19f6+-0x18e6*0x1+0x1*0x32dd]);else{let _0x3e4897;this['orientatio'+'n']===aw?_0x3e4897=this['particleNo'+'rmal']['normalize']():_0x3e4897=(this['node']===null?te['IDENTITY']:this['node']['getWorldTr'+'ansform']())['transformV'+'ector'](this['particleNo'+'rmal'])['normalize']();const _0x3c8ed4=new D(0x8f*-0x3b+-0x1e6d+0x3f63,-0x17b2+-0x1*0xdb+0x188d,0xd29+0x6*0xce+-0x11fd);Math['abs'](_0x3c8ed4['dot'](_0x3e4897))===0xd0e+-0x577+0x1*-0x796&&_0x3c8ed4['set'](-0x1eaf*-0x1+-0x25c*-0xe+0x153d*-0x3,0xa25+-0x1*-0xa55+0xa3d*-0x2,-0x621+0x7d+0x5a5);const _0x125df8=new D()['cross'](_0x3e4897,_0x3c8ed4)['normalize']();_0x3c8ed4['cross'](_0x125df8,_0x3e4897)['normalize'](),_0x452046=new Float32Array([_0x3c8ed4['x'],_0x3c8ed4['y'],_0x3c8ed4['z']]),_0x2949f6=new Float32Array([_0x125df8['x'],_0x125df8['y'],_0x125df8['z']]);}this['material']['setParamet'+'er']('faceTangen'+'t',_0x452046),this['material']['setParamet'+'er']('faceBinorm',_0x2949f6);}['getVertexI'+'nfo'](){const _0x5a750e=[];return this['useCpu']?_0x5a750e['push']({'semantic':Cf,'components':0x4,'type':Ve},{'semantic':$c,'components':0x4,'type':Ve},{'semantic':Ju,'components':0x4,'type':Ve},{'semantic':ep,'components':0x1,'type':Ve},{'semantic':tp,'components':this['useMesh']?-0x2514+0x6bb*0x1+-0xa1f*-0x3:0x1886+0x1750+-0x2fd4,'type':Ve}):(_0x5a750e['push']({'semantic':Cf,'components':0x4,'type':Ve}),this['useMesh']&&_0x5a750e['push']({'semantic':$c,'components':0x2,'type':Ve})),_0x5a750e;}['_allocate'](_0x4880dd){const _0x505c74=_0x4880dd*this['numParticl'+'eVerts'],_0x1c23ab=_0x4880dd*this['numParticl'+'eIndices'];if(this['vertexBuff'+'er']===void(-0x43c+-0x2*0x8c6+0x52*0x44)||this['vertexBuff'+'er']['getNumVert'+'ices']()!==_0x505c74){const _0x3509e6=this['getVertexI'+'nfo'](),_0x24ac0e=new kt(this['graphicsDe'+'vice'],_0x3509e6);this['vertexBuff'+'er']=new Ds(this['graphicsDe'+'vice'],_0x24ac0e,_0x505c74,{'usage':zc}),this['indexBuffe'+'r']=new xr(this['graphicsDe'+'vice'],yr,_0x1c23ab);const _0x5e459e=new Float32Array(this['vertexBuff'+'er']['lock']());let _0x5f1791,_0x3c253c,_0x14e23b;if(this['useMesh']){_0x5f1791=new Float32Array(this['mesh']['vertexBuff'+'er']['lock']()),_0x3c253c=_0x5f1791['length']/this['mesh']['vertexBuff'+'er']['numVertice'+'s'];for(let _0x374812=-0x185d+0x20*0x7a+0x91d;_0x374812<this['mesh']['vertexBuff'+'er']['format']['elements']['length'];_0x374812++)if(this['mesh']['vertexBuff'+'er']['format']['elements'][_0x374812]['name']===is){_0x14e23b=this['mesh']['vertexBuff'+'er']['format']['elements'][_0x374812]['offset']/(0x18c8+0xc*0x223+0x8*-0x64d);break;}}for(let _0x32f7dc=-0x19cc+-0x25be+0x3f8a;_0x32f7dc<_0x505c74;_0x32f7dc++){const _0x3e5f0a=Math['floor'](_0x32f7dc/this['numParticl'+'eVerts']);if(this['useMesh']){const _0x4c6048=_0x32f7dc%this['numParticl'+'eVerts'];_0x5e459e[_0x32f7dc*(0x1d4e+0xaef*-0x3+0x385)]=_0x5f1791[_0x4c6048*_0x3c253c],_0x5e459e[_0x32f7dc*(0xa87+0x39*0xa6+-0x2f77)+(-0xb3d+0x1*0x727+0x417)]=_0x5f1791[_0x4c6048*_0x3c253c+(-0x1d*-0x73+0x1*0x2614+-0x2*0x198d)],_0x5e459e[_0x32f7dc*(-0x279+0xf*-0x75+0x9*0x10a)+(-0x20e3*-0x1+-0xdd2+-0x130f)]=_0x5f1791[_0x4c6048*_0x3c253c+(0x1*0x11af+0x18d8+-0x2a85)],_0x5e459e[_0x32f7dc*(0x7*0x1d4+0x2429*0x1+-0x30ef)+(-0x15bf*0x1+-0x1*-0x1c19+-0x657)]=_0x3e5f0a,_0x5e459e[_0x32f7dc*(-0x16aa+0x2b3*-0x7+0x2995)+(-0x127a+-0xd65+0x1fe3)]=_0x5f1791[_0x4c6048*_0x3c253c+_0x14e23b+(-0x34b*-0x1+-0x3*0x107+0x1*-0x36)],_0x5e459e[_0x32f7dc*(-0x1079+-0x5e*-0x1a+-0x3*-0x251)+(0x30a*0x2+-0x1a66+0x1457*0x1)]=-0x1ba5+0xe1f+0xd87*0x1-_0x5f1791[_0x4c6048*_0x3c253c+_0x14e23b+(-0xdbb+-0xf54+0x1d10)];}else{const _0x1cb658=_0x32f7dc%(0xc66+0x6e8+-0x134a);_0x5e459e[_0x32f7dc*(0x697+-0x1a84+0x13f1*0x1)]=P_[_0x1cb658][0xc27*0x1+-0x1280+0x659],_0x5e459e[_0x32f7dc*(-0x1afd+-0x1*-0x1475+0x68c)+(0x1ac6+0x52+-0x1b17)]=P_[_0x1cb658][-0x209*0x13+0x1379+-0x5*-0x3d7],_0x5e459e[_0x32f7dc*(0x53*-0x43+-0x7f9*-0x2+0x5cb)+(-0x2383+0x26f*0xe+0x173)]=0x4da+0xdae+-0x1288,_0x5e459e[_0x32f7dc*(-0x1f68+-0xa19*-0x1+0x1553)+(0x302+0x172c+-0x1a2b)]=_0x3e5f0a;}}this['useCpu']&&(this['vbCPU']=new Float32Array(_0x5e459e),this['vbOld']=new Float32Array(this['vbCPU']['length'])),this['vertexBuff'+'er']['unlock'](),this['useMesh']&&this['mesh']['vertexBuff'+'er']['unlock']();let _0x4b1363=0x17fd*0x1+0xd65+-0x2562;const _0x41cec9=new Uint32Array(this['indexBuffe'+'r']['lock']());if(this['useMesh']){const _0x377cd9=this['mesh']['indexBuffe'+'r'][-0x868+-0x1*0x64d+0xeb5];_0x5f1791=new Kc[_0x377cd9['format']](_0x377cd9['lock']());}for(let _0x3c7d80=0xfe+0x16dc+-0x17da;_0x3c7d80<_0x4880dd;_0x3c7d80++)if(this['useMesh']){for(let _0x4d89e2=-0x1a8a*0x1+0x264b*-0x1+0x40d5;_0x4d89e2<this['numParticl'+'eIndices'];_0x4d89e2++)_0x41cec9[_0x3c7d80*this['numParticl'+'eIndices']+_0x4d89e2]=_0x5f1791[_0x4d89e2]+_0x3c7d80*this['numParticl'+'eVerts'];}else{const _0x5ae25d=_0x3c7d80*(-0x6e*-0x49+-0x1*-0x11e7+-0x3141);_0x41cec9[_0x4b1363++]=_0x5ae25d,_0x41cec9[_0x4b1363++]=_0x5ae25d+(0x1c94+-0x183f+-0x454),_0x41cec9[_0x4b1363++]=_0x5ae25d+(0x1d*-0xe3+0x3*0xb11+0x3bd*-0x2),_0x41cec9[_0x4b1363++]=_0x5ae25d,_0x41cec9[_0x4b1363++]=_0x5ae25d+(0x3d5*-0x1+0x2300+-0x1f29),_0x41cec9[_0x4b1363++]=_0x5ae25d+(0x1ccc*-0x1+0x8b0+-0x12f*-0x11);}this['indexBuffe'+'r']['unlock'](),this['useMesh']&&this['mesh']['indexBuffe'+'r'][0x264f+0x4*0x8cd+-0x4983]['unlock']();}}['reset'](){if(this['beenReset']=!(-0x1*0x6fd+-0x3*0xa59+0x2*0x1304),this['seed']=Math['random'](),this['material']['setParamet'+'er']('seed',this['seed']),this['useCpu']){for(let _0x687c54=-0x6a*-0x2f+-0x20d*0x7+-0x51b;_0x687c54<this['particleTe'+'xStart']['length'];_0x687c54++)this['particleTe'+'x'][_0x687c54]=this['particleTe'+'xStart'][_0x687c54];}else this['_setMateri'+'alTextures']();this['resetWorld'+'Bounds'](),this['resetTime']();const _0x181d6f=this['loop'];this['loop']=!(0xd*-0x12f+-0x27f+0x11e2),this['addTime'](0x84*0x42+0x899+-0x2aa1,!(-0x4*-0x3fb+-0x7b+-0x1ee*0x8)),this['loop']=_0x181d6f,this['preWarm']&&this['prewarm'](this['lifetime']);}['prewarm'](_0x2790ee){const _0x56cd2e=_0x2790ee/this['lifetime'],_0x19343b=Math['min'](Math['floor'](_0x56cd2e*this['precision']),this['precision']),_0x1c1cab=_0x2790ee/_0x19343b;for(let _0x4a46e6=-0x198d+-0xed3+0x10*0x286;_0x4a46e6<_0x19343b;_0x4a46e6++)this['addTime'](_0x1c1cab,!(-0xba8*-0x3+0x2*-0x108+-0x20e7*0x1));}['resetTime'](){this['endTime']=Vb(this);}['finishFram'+'e'](){this['useCpu']&&this['vertexBuff'+'er']['unlock']();}['addTime'](_0x48bff5,_0x3772a9){const _0x323ced=this['graphicsDe'+'vice'],_0x55580c=de();if(this['simTimeTot'+'al']+=_0x48bff5,this['calculateW'+'orldBounds'](),this['_isAnimate'+'d']()){const _0x279079=this['animTilesP'+'arams'];_0x279079[0xffd+-0x709*-0x1+-0x1706]=(-0xe17+0x1*0x19ee+-0x1f9*0x6)/this['animTilesX'],_0x279079[-0x1af6+0x217b+-0x684]=(0x14b*-0x1b+-0x98*-0x16+0x15da)/this['animTilesY'];const _0x3f70e9=this['animParams'];_0x3f70e9[0x1ea8+0x1*-0x1354+-0xb54]=this['animStartF'+'rame'],_0x3f70e9[-0xfb+0x1f5+-0xf9]=this['animNumFra'+'mes']*this['animSpeed'],_0x3f70e9[-0x6ac+-0xf5b+0x1*0x1609]=this['animNumFra'+'mes']-(0x7bb+-0x245b+0x1ca1),_0x3f70e9[-0x2ff*0x8+-0x1*-0xdb2+0xa49]=this['animNumAni'+'mations']-(0x1*0xa31+0x76d*-0x3+0xc17);const _0x39a05c=this['animIndexP'+'arams'];_0x39a05c[-0x1b4f+0x16bd+0x5*0xea]=this['animIndex'],_0x39a05c[0x10*0x8+-0x11*-0xcb+0x6fd*-0x2]=this['randomizeA'+'nimIndex'];}this['scene']&&this['camera']!==this['scene']['_activeCam'+'era']&&(this['camera']=this['scene']['_activeCam'+'era'],this['onChangeCa'+'mera']()),this['emitterSha'+'pe']===ai&&(Ai[-0xb*0x9+-0x18b3+0x1916]=this['emitterExt'+'ents']['x']!==-0xb*0x19+0x2*-0xa0c+0x152b?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:0x1b67+-0x2152+0x5eb,Ai[0x1a60+0x1ead+-0x3*0x1304]=this['emitterExt'+'ents']['y']!==-0x4*0x66e+0x1623+-0x7*-0x83?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:-0x1014+0x1bff*0x1+0xbeb*-0x1,Ai[0x84c+-0x19b5+0x116b]=this['emitterExt'+'ents']['z']!==0xb8e*-0x2+0xf1*-0xb+-0x2177*-0x1?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:0x44*-0xd+0x1c7f+-0x190b,this['meshInstan'+'ce']['node']===null?Or['setTRS'](D['ZERO'],le['IDENTITY'],this['emitterExt'+'ents']):Or['setTRS'](D['ZERO'],this['meshInstan'+'ce']['node']['getRotatio'+'n'](),R_['copy'](this['emitterExt'+'ents'])['mul'](this['meshInstan'+'ce']['node']['localScale'])));let _0x5c0abd;const _0x2dcdfc=this['meshInstan'+'ce']['node']===null?D['ONE']:this['meshInstan'+'ce']['node']['localScale'];if(this['emitterSca'+'leUniform'][-0x2708+-0xe1d+0x38b*0xf]=_0x2dcdfc['x'],this['emitterSca'+'leUniform'][0x10da+-0x2f9*-0x4+-0x41b*0x7]=_0x2dcdfc['y'],this['emitterSca'+'leUniform'][-0xd7*0xa+-0x1181+0x19e9]=_0x2dcdfc['z'],this['material']['setParamet'+'er']('emitterSca'+'le',this['emitterSca'+'leUniform']),this['localSpace']&&this['meshInstan'+'ce']['node']&&(_0x5c0abd=this['meshInstan'+'ce']['node']['getPositio'+'n'](),this['emitterPos'+'Uniform'][0xa79*-0x3+0x1dbe+0x1ad]=_0x5c0abd['x'],this['emitterPos'+'Uniform'][0x1eb3+-0xc57+-0x125b]=_0x5c0abd['y'],this['emitterPos'+'Uniform'][-0x53*-0x30+-0x5e6*0x2+0x1*-0x3c2]=_0x5c0abd['z'],this['material']['setParamet'+'er']('emitterPos',this['emitterPos'+'Uniform'])),this['_compParti'+'cleFacePar'+'ams'](),!this['useCpu'])this['_gpuUpdate'+'r']['update'](_0x323ced,Or,Ai,_0x48bff5,_0x3772a9);else{const _0x2032a1=new Float32Array(this['vertexBuff'+'er']['lock']());this['_cpuUpdate'+'r']['update'](_0x2032a1,this['vbToSort'],this['particleTe'+'x'],Or,Ai,_0x5c0abd,_0x48bff5,_0x3772a9);}this['loop']||Date['now']()>this['endTime']&&(this['onFinished']&&this['onFinished'](),this['meshInstan'+'ce']['visible']=!(-0x1f5a+0x2*-0xb8b+-0xb*-0x4f3)),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['drawOrder']=this['drawOrder']),this['_addTimeTi'+'me']+=de()-_0x55580c;}['_destroyRe'+'sources'](){var _0x18a2fe,_0x43b994,_0x4e88c2,_0xc530c1,_0x2df7ae,_0x27f8ab,_0x484268,_0x12532b,_0x58266f,_0x4b2219,_0x54bdd0,_0x10b72a;(_0x18a2fe=this['particleTe'+'xIN'])==null||_0x18a2fe['destroy'](),this['particleTe'+'xIN']=null,(_0x43b994=this['particleTe'+'xOUT'])==null||_0x43b994['destroy'](),this['particleTe'+'xOUT']=null,this['particleTe'+'xStart']&&this['particleTe'+'xStart']['destroy']&&(this['particleTe'+'xStart']['destroy'](),this['particleTe'+'xStart']=null),(_0x4e88c2=this['rtParticle'+'TexIN'])==null||_0x4e88c2['destroy'](),this['rtParticle'+'TexIN']=null,(_0xc530c1=this['rtParticle'+'TexOUT'])==null||_0xc530c1['destroy'](),this['rtParticle'+'TexOUT']=null,(_0x2df7ae=this['internalTe'+'x0'])==null||_0x2df7ae['destroy'](),this['internalTe'+'x0']=null,(_0x27f8ab=this['internalTe'+'x1'])==null||_0x27f8ab['destroy'](),this['internalTe'+'x1']=null,(_0x484268=this['internalTe'+'x2'])==null||_0x484268['destroy'](),this['internalTe'+'x2']=null,(_0x12532b=this['internalTe'+'x3'])==null||_0x12532b['destroy'](),this['internalTe'+'x3']=null,(_0x58266f=this['colorParam'])==null||_0x58266f['destroy'](),this['colorParam']=null,(_0x4b2219=this['vertexBuff'+'er'])==null||_0x4b2219['destroy'](),this['vertexBuff'+'er']=void(0x676+0x1*0x16cd+-0x3*0x9c1),(_0x54bdd0=this['indexBuffe'+'r'])==null||_0x54bdd0['destroy'](),this['indexBuffe'+'r']=void(0xc52*0x3+-0x1df5+-0x701),(_0x10b72a=this['material'])==null||_0x10b72a['destroy'](),this['material']=null;}['destroy'](){this['camera']=null,this['_destroyRe'+'sources']();}}class Xb extends pa{['generateKe'+'y'](_0x3b9725){var _0x3996db;const _0x5d7733=_0x3b9725['shaderDesc'],_0x53bf21=_0x5d7733['vertexGLSL']?hi(_0x5d7733['vertexGLSL']):-0x1939+-0x220+-0x1*-0x1b59,_0x214590=_0x5d7733['fragmentGL'+'SL']?hi(_0x5d7733['fragmentGL'+'SL']):0x150d+0x20c0+-0x35cd,_0x59f3eb=_0x5d7733['vertexWGSL']?hi(_0x5d7733['vertexWGSL']):-0x17ac+-0x1ee2+-0x1b47*-0x2,_0x44ef00=_0x5d7733['fragmentWG'+'SL']?hi(_0x5d7733['fragmentWG'+'SL']):-0xbbe+0x3*-0x874+0x1*0x251a,_0x1b86e4=pa['definesHas'+'h'](_0x3b9725['defines']),_0x4db62a=((_0x3996db=_0x3b9725['shaderChun'+'ks'])==null?void(0x460+-0x49*-0x49+-0x1931):_0x3996db['key'])??'';let _0x2dea76=_0x5d7733['uniqueName']+'_'+_0x1b86e4+'_'+_0x53bf21+'_'+_0x214590+'_'+_0x59f3eb+'_'+_0x44ef00+'_'+_0x4db62a;return _0x3b9725['skin']&&(_0x2dea76+='_skin'),_0x3b9725['useInstanc'+'ing']&&(_0x2dea76+='_inst'),_0x3b9725['useMorphPo'+'sition']&&(_0x2dea76+='_morphp'),_0x3b9725['useMorphNo'+'rmal']&&(_0x2dea76+='_morphn'),_0x3b9725['useMorphTe'+'xtureBased'+'Int']&&(_0x2dea76+='_morphi'),_0x2dea76;}['createAttr'+'ibutesDefi'+'nition'](_0x3b755c,_0x2111c8){const _0x9e0ce8=_0x2111c8['shaderDesc']['attributes'],_0x477b65=_0x9e0ce8?{..._0x9e0ce8}:void(-0x1*-0x9ad+0x11fe+-0x1bab);_0x2111c8['skin']&&(_0x477b65['vertex_bon'+'eWeights']=gi,_0x477b65['vertex_bon'+'eIndices']=us),(_0x2111c8['useMorphPo'+'sition']||_0x2111c8['useMorphNo'+'rmal'])&&(_0x477b65['morph_vert'+'ex_id']=bn),_0x3b755c['attributes']=_0x477b65;}['createVert'+'exDefiniti'+'on'](_0x3a5e4d,_0x2b8757,_0x48682f,_0x2e2549){const _0x42c22c=_0x2b8757['shaderDesc'],_0x17ec62=new Map(_0x48682f);_0x17ec62['set']('transformI'+'nstancingV'+'S','');const _0x27e579=new Map(_0x2b8757['defines']);_0x2b8757['skin']&&_0x27e579['set']('SKIN',!(-0x3f9*-0x1+-0x2f1+-0x108)),_0x2b8757['useInstanc'+'ing']&&_0x27e579['set']('INSTANCING',!(0x6c8*0x1+-0x1*-0x18ea+-0x1fb2)),(_0x2b8757['useMorphPo'+'sition']||_0x2b8757['useMorphNo'+'rmal'])&&(_0x27e579['set']('MORPHING',!(0x1824+0x7*-0x162+0x1*-0xe76)),_0x2b8757['useMorphTe'+'xtureBased'+'Int']&&_0x27e579['set']('MORPHING_I'+'NT',!(0x2f*0x83+-0x14a4+-0x9*0x61)),_0x2b8757['useMorphPo'+'sition']&&_0x27e579['set']('MORPHING_P'+'OSITION',!(-0x1*0xbe+-0x1*0x191+0xc5*0x3)),_0x2b8757['useMorphNo'+'rmal']&&_0x27e579['set']('MORPHING_N'+'ORMAL',!(-0xe78+0x9b8+-0x20*-0x26))),_0x3a5e4d['vertexCode']=_0x2e2549?_0x42c22c['vertexWGSL']:_0x42c22c['vertexGLSL'],_0x3a5e4d['vertexIncl'+'udes']=_0x17ec62,_0x3a5e4d['vertexDefi'+'nes']=_0x27e579;}['createFrag'+'mentDefini'+'tion'](_0x46bf05,_0x1c1b67,_0x3b6a77,_0x2f5814){const _0x1b4e6f=_0x1c1b67['shaderDesc'],_0xe929f2=new Map(_0x3b6a77),_0x4158c9=new Map(_0x1c1b67['defines']);_0x46bf05['fragmentCo'+'de']=_0x2f5814?_0x1b4e6f['fragmentWG'+'SL']:_0x1b4e6f['fragmentGL'+'SL'],_0x46bf05['fragmentIn'+'cludes']=_0xe929f2,_0x46bf05['fragmentDe'+'fines']=_0x4158c9;}['createShad'+'erDefiniti'+'on'](_0x358e0b,_0x2a3f14){var _0x5bfdb2;const _0xb5fd38=_0x2a3f14['shaderDesc'],_0x539380=_0x358e0b['isWebGPU']&&!!_0xb5fd38['vertexWGSL']&&!!_0xb5fd38['fragmentWG'+'SL']&&(((_0x5bfdb2=_0x2a3f14['shaderChun'+'ks'])==null?void(0x13a3+-0x1*-0x1f37+-0x32da):_0x5bfdb2['useWGSL'])??!(0x149c+0x113+-0x15af)),_0x54f9a7={'name':'ShaderMate'+'rial-'+_0xb5fd38['uniqueName'],'shaderLanguage':_0x539380?it:Fe,'fragmentOutputTypes':_0xb5fd38['fragmentOu'+'tputTypes'],'meshUniformBufferFormat':_0xb5fd38['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0xb5fd38['meshBindGr'+'oupFormat']},_0x3c19d9=_0x539380?it:Fe,_0x24834f=ih['merge'](Ce['get'](_0x358e0b,_0x3c19d9),_0x2a3f14['shaderChun'+'ks'][_0x3c19d9]);return this['createAttr'+'ibutesDefi'+'nition'](_0x54f9a7,_0x2a3f14),this['createVert'+'exDefiniti'+'on'](_0x54f9a7,_0x2a3f14,_0x24834f,_0x539380),this['createFrag'+'mentDefini'+'tion'](_0x54f9a7,_0x2a3f14,_0x24834f,_0x539380),Jt['createDefi'+'nition'](_0x358e0b,_0x54f9a7);}}const qb=new Xb();class Bn extends er{constructor(_0x268f48){super(),h(this,'_shaderDes'+'c'),this['shaderDesc']=_0x268f48;}set['shaderDesc'](_0x90981d){if(this['_shaderDes'+'c']=void(-0x2ef+0x8b*-0x40+-0x25af*-0x1),_0x90981d&&(this['_shaderDes'+'c']={'uniqueName':_0x90981d['uniqueName'],'attributes':_0x90981d['attributes'],'fragmentOutputTypes':_0x90981d['fragmentOu'+'tputTypes'],'vertexGLSL':_0x90981d['vertexGLSL'],'fragmentGLSL':_0x90981d['fragmentGL'+'SL'],'vertexWGSL':_0x90981d['vertexWGSL'],'fragmentWGSL':_0x90981d['fragmentWG'+'SL']},_0x90981d['vertexCode']||_0x90981d['fragmentCo'+'de']||_0x90981d['shaderLang'+'uage'])){w['deprecated']('ShaderMate'+'rial\x20['+_0x90981d['uniqueName']+(']:\x20vertexC'+'ode,\x20fragm'+'entCode\x20an'+'d\x20shaderLa'+'nguage\x20pro'+'perties\x20of'+'\x20ShaderDes'+'c\x20is\x20depre'+'cated.\x20Use'+'\x20vertexGLS'+'L,\x20fragmen'+'tGLSL,\x20ver'+'texWGSL\x20or'+'\x20fragmentW'+'GSL\x20instea'+'d.'));const _0x55b8ee=_0x90981d['shaderLang'+'uage']??Fe;_0x55b8ee===Fe?(this['_shaderDes'+'c']['vertexGLSL']=_0x90981d['vertexCode'],this['_shaderDes'+'c']['fragmentGL'+'SL']=_0x90981d['fragmentCo'+'de']):_0x55b8ee===it&&(this['_shaderDes'+'c']['vertexWGSL']=_0x90981d['vertexCode'],this['_shaderDes'+'c']['fragmentWG'+'SL']=_0x90981d['fragmentCo'+'de']);}this['clearVaria'+'nts']();}get['shaderDesc'](){return this['_shaderDes'+'c'];}['copy'](_0x161af6){return super['copy'](_0x161af6),this['shaderDesc']=_0x161af6['shaderDesc'],this;}['getShaderV'+'ariant'](_0x5e03d2){const {objDefs:_0x5c97a0}=_0x5e03d2,_0x168aa3={'defines':$t['getCoreDef'+'ines'](this,_0x5e03d2),'skin':(_0x5c97a0&qo)!==-0x3*-0xba7+0x17c7*-0x1+-0xb2e,'useInstancing':(_0x5c97a0&jo)!==-0x1*0x1cd6+-0x22d1+0x3fa7,'useMorphPosition':(_0x5c97a0&Yo)!==-0x1d3c+-0xa9b+0x27d7,'useMorphNormal':(_0x5c97a0&Ko)!==-0x167*0x16+-0x6f9+0x25d3,'useMorphTextureBasedInt':(_0x5c97a0&Zo)!==-0xf96+0x1fa5+-0x100f,'pass':_0x5e03d2['pass'],'gamma':_0x5e03d2['cameraShad'+'erParams']['shaderOutp'+'utGamma'],'toneMapping':_0x5e03d2['cameraShad'+'erParams']['toneMappin'+'g'],'fog':_0x5e03d2['cameraShad'+'erParams']['fog'],'shaderDesc':this['shaderDesc'],'shaderChunks':this['shaderChun'+'ks']},_0x2c5b3d=new rd(_0x5e03d2['viewUnifor'+'mFormat'],_0x5e03d2['viewBindGr'+'oupFormat'],_0x5e03d2['vertexForm'+'at']),_0x339a99=Nn(_0x5e03d2['device']);return _0x339a99['register']('shader-mat'+'erial',qb),_0x339a99['getProgram']('shader-mat'+'erial',_0x168aa3,_0x2c5b3d,this['userId']);}}const Yy=(_0x4d5e3a,_0x1f4c2f)=>{const _0x1aa084=_0x1f4c2f['length']/(0x8a+-0xaf*0x1d+-0x1*-0x134c),_0x4bb7de=_0x4d5e3a['length']/(0x1*-0xf55+0x1fdf+0x1*-0x1087),_0x55fce8=new D(),_0x4fada3=new D(),_0x339dc0=new D(),_0x538285=new D(),_0x4420b8=new D(),_0x29750b=new D(),_0x361db1=[];for(let _0x891646=0x158c+0x2*-0x464+-0x4c*0x2b;_0x891646<_0x4d5e3a['length'];_0x891646++)_0x361db1[_0x891646]=0x87+-0xa1f+0x998;for(let _0x84b63b=-0x17da+0x36*0x8+0x1*0x162a;_0x84b63b<_0x1aa084;_0x84b63b++){const _0x165753=_0x1f4c2f[_0x84b63b*(-0x1930+0x653*-0x3+-0x2*-0x1616)],_0x3251b9=_0x1f4c2f[_0x84b63b*(-0x3*0x627+0x94b+0x105*0x9)+(-0xe9f+-0x8fe+0x179e*0x1)],_0x3d62d7=_0x1f4c2f[_0x84b63b*(0x2098+-0x19b1*0x1+-0x6e4)+(0x56+-0x13*0x169+0x1a77)];_0x55fce8['set'](_0x4d5e3a[_0x165753*(0x7a8+-0x269e+0x1ef9)],_0x4d5e3a[_0x165753*(0x2*-0xd8a+0xc7a+0x4df*0x3)+(-0x2531+-0x5*-0x45a+-0xd*-0x130)],_0x4d5e3a[_0x165753*(-0x279+0xc42*-0x2+0x180*0x12)+(-0x18b8+-0x69c+0xe*0x23d)]),_0x4fada3['set'](_0x4d5e3a[_0x3251b9*(-0x1168+0xfd1*-0x2+0x310d*0x1)],_0x4d5e3a[_0x3251b9*(0x23de+-0x25b4+0x1*0x1d9)+(-0xdad+-0x316+0x74*0x25)],_0x4d5e3a[_0x3251b9*(-0xc03*-0x1+0xe30+-0x2*0xd18)+(0x33b*0x5+0x1758+-0x277d*0x1)]),_0x339dc0['set'](_0x4d5e3a[_0x3d62d7*(0x8f2+-0x2*-0x7ad+-0x1849)],_0x4d5e3a[_0x3d62d7*(-0x6*0x8a+0x1576+-0x1237)+(0x11d*0x1+0x1c5c+-0x1d78)],_0x4d5e3a[_0x3d62d7*(0xa*0x38f+0xe3*-0x29+-0x8*-0x19)+(0x2*0xce3+-0xa75+-0xf4f)]),_0x538285['sub2'](_0x4fada3,_0x55fce8),_0x4420b8['sub2'](_0x339dc0,_0x55fce8),_0x29750b['cross'](_0x538285,_0x4420b8)['normalize'](),_0x361db1[_0x165753*(0x11f0+-0xb1*-0x1+-0x129e)]+=_0x29750b['x'],_0x361db1[_0x165753*(0xb99+0x1d4*0x7+0x2*-0xc31)+(-0xb04*0x3+-0x263d*0x1+0x474a)]+=_0x29750b['y'],_0x361db1[_0x165753*(0x2588+0x2002+-0x11*0x417)+(-0x9f*0x1f+0x23b*0xd+0x4de*-0x2)]+=_0x29750b['z'],_0x361db1[_0x3251b9*(0x50f*-0x1+0x149*0x16+-0x1734)]+=_0x29750b['x'],_0x361db1[_0x3251b9*(-0x1414+-0x3*0x964+0x9a7*0x5)+(-0x2f1+0x6*-0x11f+0x9ac)]+=_0x29750b['y'],_0x361db1[_0x3251b9*(-0x13*-0x150+0x2d*0x4a+-0x25ef)+(0x1e1a+0x293*0xb+-0x3a69)]+=_0x29750b['z'],_0x361db1[_0x3d62d7*(-0x43a+-0xb72*0x3+0x2693)]+=_0x29750b['x'],_0x361db1[_0x3d62d7*(0x1*-0xa61+-0x972+0x13d6*0x1)+(-0xd*-0x17+0x4c1+-0x65*0xf)]+=_0x29750b['y'],_0x361db1[_0x3d62d7*(-0x20e7*0x1+0x7bb*0x3+-0x83*-0x13)+(0x10c2+0x1326+0x397*-0xa)]+=_0x29750b['z'];}for(let _0x361fa3=-0x256f+-0x160e+0x3b7d;_0x361fa3<_0x4bb7de;_0x361fa3++){const _0x30abe2=_0x361db1[_0x361fa3*(-0x191+-0x229f*-0x1+-0x210b*0x1)],_0x35b957=_0x361db1[_0x361fa3*(-0x80*-0x1+0x32b*-0x1+-0x62*-0x7)+(0x1fff+0xb97+0x2b95*-0x1)],_0x399d3d=_0x361db1[_0x361fa3*(0x2512*-0x1+-0x3ca+-0x1*-0x28df)+(0x1*-0x1b1d+-0x1*-0x1885+0x29a)],_0x3a47fd=(-0x25d8+-0xdfc+0x33d5)/Math['sqrt'](_0x30abe2*_0x30abe2+_0x35b957*_0x35b957+_0x399d3d*_0x399d3d);_0x361db1[_0x361fa3*(0x1f*-0x9+0x158d+-0x1473)]*=_0x3a47fd,_0x361db1[_0x361fa3*(0x5d2+-0xee1+-0x36*-0x2b)+(-0x2539*0x1+0x2*-0x10d0+0x46da)]*=_0x3a47fd,_0x361db1[_0x361fa3*(-0x1fd6+-0xc70*0x2+0x38b9)+(0x2*-0x1e2+0x282+-0x51*-0x4)]*=_0x3a47fd;}return _0x361db1;},br=(_0x2e6341,_0x3d1700,_0x31307d,_0x4388ad)=>{const _0x343797=_0x4388ad['length']/(-0x53*0x7+0xaaf+-0x867),_0x22eac3=_0x2e6341['length']/(-0x1b29+0x13c4+0x768),_0x2720de=new D(),_0x2c9e99=new D(),_0x1a675a=new D(),_0x647b28=new J(),_0xfa9937=new J(),_0x2f24c0=new J(),_0x5a417b=new D(),_0x3c3823=new D(),_0x27c689=new Float32Array(_0x22eac3*(-0xa5f+0x786*0x2+-0x4aa)),_0x3e9d86=new Float32Array(_0x22eac3*(-0xded+-0x10*0x13c+0x21b0)),_0x2d8763=[];for(let _0x8a26d4=0xef1+0x1994+-0x3af*0xb;_0x8a26d4<_0x343797;_0x8a26d4++){const _0x142220=_0x4388ad[_0x8a26d4*(0x176a+-0x2345*0x1+0x31*0x3e)],_0x4bff4b=_0x4388ad[_0x8a26d4*(-0xa17+0x89c+0x17e)+(0x158*0x7+-0x187d+0x1*0xf16)],_0x4b22bd=_0x4388ad[_0x8a26d4*(0x1913+-0x1*0x6b+0x18a5*-0x1)+(0xeb*0x5+0x198+-0x62d)];_0x2720de['set'](_0x2e6341[_0x142220*(-0x1bb7+0x82e+0x9c6*0x2)],_0x2e6341[_0x142220*(-0x750+-0x24d5+-0xeb8*-0x3)+(0x16f6+0x1ee5+-0x35da)],_0x2e6341[_0x142220*(0x1882+-0x186a+-0x15)+(-0xb*0x2f5+-0x62c+0x26b5)]),_0x2c9e99['set'](_0x2e6341[_0x4bff4b*(0x91e+0x178*0x11+-0x1*0x2213)],_0x2e6341[_0x4bff4b*(0x933+0x1995+-0x22c5)+(-0x7a*0x4a+-0x61*-0x1d+0x40c*0x6)],_0x2e6341[_0x4bff4b*(-0x1*0x22ee+-0x159+0x244a)+(-0x20c6+0x1084+0x1044*0x1)]),_0x1a675a['set'](_0x2e6341[_0x4b22bd*(-0x2*-0x882+0x65*-0x57+-0x3*-0x5c6)],_0x2e6341[_0x4b22bd*(0x1ba1+-0x1*-0x15e2+0x40*-0xc6)+(0xae7+0xaf3+0x15d9*-0x1)],_0x2e6341[_0x4b22bd*(0xffa+0x14*0xaa+-0x1d3f)+(-0x1*0x1917+0x1fd0+-0xbf*0x9)]),_0x647b28['set'](_0x31307d[_0x142220*(-0x183a+0x163*-0x1+-0x199f*-0x1)],_0x31307d[_0x142220*(0x1*0x15d+-0x8a6+0x74b)+(0x4*-0x57a+-0x162d+0x2c16)]),_0xfa9937['set'](_0x31307d[_0x4bff4b*(-0x232*-0x5+-0x1053+0x55b)],_0x31307d[_0x4bff4b*(-0x1a19+0x9c0+0x105b)+(0x22ea+-0x10b*-0x24+0x3*-0x1827)]),_0x2f24c0['set'](_0x31307d[_0x4b22bd*(-0x16f7+0x231b*0x1+0x1*-0xc22)],_0x31307d[_0x4b22bd*(0x1*-0x1bdb+0x1c0c+-0x2f)+(-0xa*0x102+-0x7*0x427+0x2726)]);const _0x1d0bad=_0x2c9e99['x']-_0x2720de['x'],_0x3ab962=_0x1a675a['x']-_0x2720de['x'],_0x3f6f0a=_0x2c9e99['y']-_0x2720de['y'],_0x116d16=_0x1a675a['y']-_0x2720de['y'],_0xf7d20b=_0x2c9e99['z']-_0x2720de['z'],_0x5cd63e=_0x1a675a['z']-_0x2720de['z'],_0x3909df=_0xfa9937['x']-_0x647b28['x'],_0x43878c=_0x2f24c0['x']-_0x647b28['x'],_0x4e0935=_0xfa9937['y']-_0x647b28['y'],_0x3d8a8e=_0x2f24c0['y']-_0x647b28['y'],_0x4bb10c=_0x3909df*_0x3d8a8e-_0x43878c*_0x4e0935;if(_0x4bb10c===0x1ccd+0x21c+-0x1ee9)_0x5a417b['set'](0x16cf+0x1981+-0x4*0xc14,-0x4*0x435+-0x7ab*-0x1+0x92a,-0x14f0+-0x1d8*0x3+0x1a78),_0x3c3823['set'](-0x1da5+-0x17ea+0x3590,0x1*-0x592+-0x2f*0x5d+0x20f*0xb,-0x2482+-0x133*-0x11+0x101f);else{const _0x49982c=(-0x4bd*-0x5+-0x4cd+-0x12e3)/_0x4bb10c;_0x5a417b['set']((_0x3d8a8e*_0x1d0bad-_0x4e0935*_0x3ab962)*_0x49982c,(_0x3d8a8e*_0x3f6f0a-_0x4e0935*_0x116d16)*_0x49982c,(_0x3d8a8e*_0xf7d20b-_0x4e0935*_0x5cd63e)*_0x49982c),_0x3c3823['set']((_0x3909df*_0x3ab962-_0x43878c*_0x1d0bad)*_0x49982c,(_0x3909df*_0x116d16-_0x43878c*_0x3f6f0a)*_0x49982c,(_0x3909df*_0x5cd63e-_0x43878c*_0xf7d20b)*_0x49982c);}_0x27c689[_0x142220*(-0x3*0xce8+-0x22*0xa6+-0x1*-0x3cc7)+(0x11c0+-0x25c0+0x1400)]+=_0x5a417b['x'],_0x27c689[_0x142220*(0x1f8d+-0x19a3*0x1+-0x5e7)+(-0xaf3+-0x8*0x3bb+0x28cc)]+=_0x5a417b['y'],_0x27c689[_0x142220*(0x69*-0x2e+0x1b8+-0x17*-0xbf)+(0x1887+-0x1aa*-0xd+-0x55*0x8b)]+=_0x5a417b['z'],_0x27c689[_0x4bff4b*(-0x82+-0x665+0x6ea)+(0x132c+0x1*-0x1802+0x2*0x26b)]+=_0x5a417b['x'],_0x27c689[_0x4bff4b*(0x781*-0x5+-0xaa*-0x2b+0x6*0x17f)+(-0x269b+0xa*-0x259+-0x1f0b*-0x2)]+=_0x5a417b['y'],_0x27c689[_0x4bff4b*(0x10cc+0x2f5*-0x2+-0xadf)+(-0x24d2+0x19c*-0x3+0x3e*0xac)]+=_0x5a417b['z'],_0x27c689[_0x4b22bd*(-0x3*0xb89+0x72f*-0x1+0x29cd)+(0x1eb*0x11+-0x3*-0x12e+-0x2425)]+=_0x5a417b['x'],_0x27c689[_0x4b22bd*(-0x501+-0x1*-0x19c+0x6d*0x8)+(-0x2*0xd3c+0x513+0x1*0x1566)]+=_0x5a417b['y'],_0x27c689[_0x4b22bd*(-0x7*-0x2c5+-0x2*0x3e5+-0x2*0x5cb)+(-0x192b*0x1+-0x27*0x2f+0x2056)]+=_0x5a417b['z'],_0x3e9d86[_0x142220*(-0x1d51+0x1b77+-0x9*-0x35)+(0x59d*-0x1+-0x453+0x35*0x30)]+=_0x3c3823['x'],_0x3e9d86[_0x142220*(-0x166d+-0x2b7*-0x1+0x129*0x11)+(-0x2682+0x177c+-0xf07*-0x1)]+=_0x3c3823['y'],_0x3e9d86[_0x142220*(0x2*-0x832+0x28*0x41+0x63f)+(-0x1*0x6fc+0x1*-0xd76+0x1474)]+=_0x3c3823['z'],_0x3e9d86[_0x4bff4b*(0x120a*-0x1+-0x9b*-0x2f+0x24*-0x4a)+(-0x2078+-0x124f+0x26b*0x15)]+=_0x3c3823['x'],_0x3e9d86[_0x4bff4b*(-0x5*-0xaf+0x1f*0xa3+-0x4f*0x4b)+(-0xa*-0x390+0x227*-0x11+-0x1*-0xf8)]+=_0x3c3823['y'],_0x3e9d86[_0x4bff4b*(-0xe23+0x1bef+-0xdc9)+(-0x1f6a*0x1+-0x494*-0x5+0x888)]+=_0x3c3823['z'],_0x3e9d86[_0x4b22bd*(-0x14bc+0x7*0x409+-0x3c0*0x2)+(-0x1*-0xd17+-0x1e37+-0x2*-0x890)]+=_0x3c3823['x'],_0x3e9d86[_0x4b22bd*(0x14*-0x16d+0x1*0x1fa3+-0x31c)+(-0xc3b+0x845+0x3f7)]+=_0x3c3823['y'],_0x3e9d86[_0x4b22bd*(-0x1*0x1882+0xe55+-0x2*-0x518)+(0x1d2*0x13+0x1d52+-0x3fe6)]+=_0x3c3823['z'];}const _0x3966c0=new D(),_0x391767=new D(),_0x24fec2=new D(),_0xc3f662=new D();for(let _0x4105e6=-0xf2d+0xe9*0x10+-0x9d*-0x1;_0x4105e6<_0x22eac3;_0x4105e6++){_0x24fec2['set'](_0x3d1700[_0x4105e6*(0x1f3*0xd+0x225*-0x3+-0x12e5)],_0x3d1700[_0x4105e6*(-0x6*-0x1e3+0x6*0x573+-0x8cd*0x5)+(-0x1a*0x16a+-0xdf*-0x27+-0x166*-0x2)],_0x3d1700[_0x4105e6*(-0x1576+0xc21+-0x68*-0x17)+(0x217b+-0x1*-0x154f+-0x36c8)]),_0x3966c0['set'](_0x27c689[_0x4105e6*(-0x3b*-0x47+0x5*-0x69+-0xe4d)],_0x27c689[_0x4105e6*(0x1d*0x103+-0x10be+-0xc96)+(-0x1a23+-0x275*0xa+-0x1*-0x32b6)],_0x27c689[_0x4105e6*(0x6a3*0x1+0xbe1+-0x1281)+(0x24*-0xf+0x2a*0xed+-0x24c4)]),_0x391767['set'](_0x3e9d86[_0x4105e6*(0x1e1e+-0x1*0xbcf+-0x124c)],_0x3e9d86[_0x4105e6*(0x1a*0x162+-0xdc3+0x2*-0xb17)+(-0x233c+-0x1*-0x13a+0x2203)],_0x3e9d86[_0x4105e6*(0xe14+-0x36*0x4e+0x263*0x1)+(-0x1*0xd91+-0x1*0x13d9+0x216c)]);const _0x3fbbcf=_0x24fec2['dot'](_0x3966c0);_0xc3f662['copy'](_0x24fec2)['mulScalar'](_0x3fbbcf),_0xc3f662['sub2'](_0x3966c0,_0xc3f662)['normalize'](),_0x2d8763[_0x4105e6*(-0xa5a+-0x1e39+0x2897*0x1)]=_0xc3f662['x'],_0x2d8763[_0x4105e6*(0x1c5e+-0x24ae+0x854)+(-0x6*0x1b1+0x9f7+-0x18*-0x2)]=_0xc3f662['y'],_0x2d8763[_0x4105e6*(0x16f0+0x120a+0xe*-0x2ed)+(-0x12ec+-0x1850+0x2b3e)]=_0xc3f662['z'],_0xc3f662['cross'](_0x24fec2,_0x3966c0),_0x2d8763[_0x4105e6*(0x124f*0x1+0x25*0xd1+-0x3080)+(-0x16e*0xd+-0x1ec1+0x315a)]=_0xc3f662['dot'](_0x391767)<-0x2e7*-0x5+0x8b*-0x3b+0x1*0x1186?-(-0x645*0x2+-0x1794+0x241f):0x70e+0x3b*-0x3b+0x68c;}return _0x2d8763;};class ga{constructor(){h(this,'positions'),h(this,'normals'),h(this,'colors'),h(this,'uvs'),h(this,'uvs1'),h(this,'blendIndic'+'es'),h(this,'blendWeigh'+'ts'),h(this,'tangents'),h(this,'indices');}['calculateN'+'ormals'](){w['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),w['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['normals']=Yy(this['positions'],this['indices']);}['calculateT'+'angents'](){w['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),w['assert'](this['normals'],'Geometry\x20m'+'ust\x20have\x20n'+'ormals\x20set'),w['assert'](this['uvs'],'Geometry\x20m'+'ust\x20have\x20u'+'vs\x20set'),w['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['tangents']=br(this['positions'],this['normals'],this['uvs'],this['indices']);}}const Gf=(-0x158a+-0x11b9+0x2747)/(-0x531*-0x7+0x1e8c+-0x42a3),F_=0x10cf+-0xf7c*0x1+0xd*-0x1a-Gf*(0x1422+-0x1edb*-0x1+-0x32fb*0x1);class Hf extends ga{constructor(_0x130581={}){super();const _0x429e30=_0x130581['halfExtent'+'s']??new D(-0x9ca+-0xdc6+0xd0*0x1d+0.5,0x18d*0xb+-0xc91*0x1+-0x73*0xa+0.5,-0x1*0x88+-0x1e6d+0x1ef5+0.5),_0x6848e2=_0x130581['widthSegme'+'nts']??-0x246b+0x163b+0xe31,_0x50b05a=_0x130581['lengthSegm'+'ents']??0x7*-0xa6+0x8ba*-0x2+-0x1*-0x15ff,_0x3f67cd=_0x130581['heightSegm'+'ents']??0x2*-0x6c7+0x38a+0x357*0x3,_0x1612a9=_0x130581['yOffset']??-0x15ea+0x41f*0x9+0x103*-0xf,_0x6ed996=-_0x429e30['y']+_0x1612a9,_0x18eec3=_0x429e30['y']+_0x1612a9,_0xc4252d=[new D(-_0x429e30['x'],_0x6ed996,_0x429e30['z']),new D(_0x429e30['x'],_0x6ed996,_0x429e30['z']),new D(_0x429e30['x'],_0x18eec3,_0x429e30['z']),new D(-_0x429e30['x'],_0x18eec3,_0x429e30['z']),new D(_0x429e30['x'],_0x6ed996,-_0x429e30['z']),new D(-_0x429e30['x'],_0x6ed996,-_0x429e30['z']),new D(-_0x429e30['x'],_0x18eec3,-_0x429e30['z']),new D(_0x429e30['x'],_0x18eec3,-_0x429e30['z'])],_0x1e5f34=[[0x1*0x1a49+0x8d0+-0x2319,0xde3+0x8db+-0x16bd,-0x13c7+-0x1d2d+-0x1*-0x30f7],[-0x563*0x1+0x14a5*-0x1+0x1a0c,0x49*-0xa+-0xbac+0x49*0x33,0x853+0x2ac*-0x9+0xfc0],[0x7*-0x185+-0x177a+-0x888*-0x4,-0x119*0x14+-0xbb*-0x1a+-0x1*-0x2f8,-0x19fd+0x243b+-0x6d*0x18],[0x4ad+0x1*-0x21f1+0x7f*0x3b,-0x891+-0x21b9*0x1+0x2a4a,0x1e35+-0x150f+-0x2*0x491],[0x8d2+0x245f+-0x2d30,0xc72+0x1a+-0xc88,0x1854+-0x25f+-0x15f3],[0xbfb+-0x202a+0x1434,-0x2048+0x97*0xe+0x1806,0x21fa+-0xd*-0x26d+-0x95b*0x7]],_0x5e8575=[[-0x14b1*0x1+-0x2486+-0x3937*-0x1,-0x1799+0x247f+0xce6*-0x1,-0x45*-0x76+0x8*-0x42a+0x9*0x2b],[0x1595+0x17a7+-0x2d3c,0xfbf*-0x1+0x1541*-0x1+0x2500,-(-0x1*0x149+0x464+-0x31a)],[0x1159+0x15f*-0x15+0x1*0xb72,-0x3a4*0x9+0x10d*-0x6+0x2713,0x6fb*-0x3+0x1093*0x1+0x45e],[0x1842+-0x22c3+0xa81,-(0x1476+0x1*-0x11e+0x1*-0x1357),0x882+-0xc7d+0x1*0x3fb],[-0x1a5c+0x1fe1+-0x584,-0x5cf*-0x5+-0xf95+-0xd76,-0x225e+-0xeed+0x1*0x314b],[-(0x3*0x583+0x1c*0x6d+-0x2*0xe3a),-0xa6a+-0x1108+-0x926*-0x3,0xd6b+0x13a*0xd+0x1d5d*-0x1]],_0x4592fa={'FRONT':0x0,'BACK':0x1,'TOP':0x2,'BOTTOM':0x3,'RIGHT':0x4,'LEFT':0x5},_0x2c6712=[],_0x307643=[],_0x498101=[],_0x2a1bdd=[];let _0x4dae0d=-0x1cb5+0x3*-0x9fc+0x3aa9;const _0x5e646b=(_0x23b1b6,_0x60c29d,_0x5b369d)=>{const _0x54a572=new D(),_0x56bfb5=new D(),_0x2b4d73=new D(),_0x53e988=new D();for(let _0x1e8379=0x36*-0x1a+0x3c3+0x9*0x31;_0x1e8379<=_0x60c29d;_0x1e8379++)for(let _0x41fc0e=0x160e+0x9a1+-0x1faf;_0x41fc0e<=_0x5b369d;_0x41fc0e++){_0x54a572['lerp'](_0xc4252d[_0x1e5f34[_0x23b1b6][-0x543*0x3+-0x12*-0x74+0x7a1]],_0xc4252d[_0x1e5f34[_0x23b1b6][0x3af*-0x9+0x1*-0x1aa5+0x1*0x3bcd]],_0x1e8379/_0x60c29d),_0x56bfb5['lerp'](_0xc4252d[_0x1e5f34[_0x23b1b6][-0xabd*0x1+0x1*0x2216+-0x2b*0x8b]],_0xc4252d[_0x1e5f34[_0x23b1b6][-0xb9e*-0x1+-0x1cd5+0x1139]],_0x41fc0e/_0x5b369d),_0x2b4d73['sub2'](_0x56bfb5,_0xc4252d[_0x1e5f34[_0x23b1b6][0x13df+-0x1af*-0x1+-0xb2*0x1f]]),_0x53e988['add2'](_0x54a572,_0x2b4d73);let _0x458093=_0x1e8379/_0x60c29d,_0x37105e=_0x41fc0e/_0x5b369d;_0x2c6712['push'](_0x53e988['x'],_0x53e988['y'],_0x53e988['z']),_0x307643['push'](_0x5e8575[_0x23b1b6][-0x1745+-0x17bb+-0x2f*-0x100],_0x5e8575[_0x23b1b6][0x45*-0x11+-0x1a1*0x4+0x1*0xb1a],_0x5e8575[_0x23b1b6][-0xd6*0x9+-0x503*0x4+0x1b94]),_0x498101['push'](_0x458093,0x398+-0x257+-0x140-_0x37105e),_0x458093=_0x458093*F_+Gf,_0x37105e=_0x37105e*F_+Gf,_0x458093/=0x1361*-0x2+-0xaff+0x1*0x31c4,_0x37105e/=-0x4a*-0x83+-0x2594+-0x1*0x47,_0x458093+=_0x23b1b6%(0x96*-0x18+0xb97+-0x3*-0xd4)/(-0x20e7+-0x1*0x2dd+0x23c7),_0x37105e+=Math['floor'](_0x23b1b6/(0xe2+-0x1*0xb95+0xab6))/(0x144f+-0x1886+0x43a),_0x1e8379<_0x60c29d&&_0x41fc0e<_0x5b369d&&(_0x2a1bdd['push'](_0x4dae0d+_0x5b369d+(0x1cb1+0x847*-0x1+-0x1469),_0x4dae0d+(-0x84e*0x4+0x855+-0x36*-0x76),_0x4dae0d),_0x2a1bdd['push'](_0x4dae0d+_0x5b369d+(0x802+0x1*-0x26c8+0x1ec7),_0x4dae0d+_0x5b369d+(-0xec*-0x1f+-0x1660+0x1*-0x632),_0x4dae0d+(-0x8e6+0x1869+-0xf82))),_0x4dae0d++;}};_0x5e646b(_0x4592fa['FRONT'],_0x6848e2,_0x3f67cd),_0x5e646b(_0x4592fa['BACK'],_0x6848e2,_0x3f67cd),_0x5e646b(_0x4592fa['TOP'],_0x6848e2,_0x50b05a),_0x5e646b(_0x4592fa['BOTTOM'],_0x6848e2,_0x50b05a),_0x5e646b(_0x4592fa['RIGHT'],_0x50b05a,_0x3f67cd),_0x5e646b(_0x4592fa['LEFT'],_0x50b05a,_0x3f67cd),this['positions']=_0x2c6712,this['normals']=_0x307643,this['uvs']=_0x498101,this['uvs1']=_0x498101,this['indices']=_0x2a1bdd,_0x130581['calculateT'+'angents']&&(this['tangents']=br(_0x2c6712,_0x307643,_0x498101,_0x2a1bdd));}}class Hp extends ga{constructor(_0x274b1d={}){super();const _0x16dde5=_0x274b1d['radius']??-0x1f7b+-0x2*0x11ed+0x4355+0.5,_0xeb13e5=_0x274b1d['latitudeBa'+'nds']??-0x2d8+0x5*0x3f7+-0x3d*0x47,_0x33e7ba=_0x274b1d['longitudeB'+'ands']??-0x1503+0x18c6+-0x3b3,_0x9aeafa=[],_0x4f33f6=[],_0x2f8a7e=[],_0x24dd1d=[];for(let _0x2042a9=-0x22d2+0x753*-0x1+-0x2a25*-0x1;_0x2042a9<=_0xeb13e5;_0x2042a9++){const _0x1e15b2=_0x2042a9*Math['PI']/_0xeb13e5,_0x413d13=Math['sin'](_0x1e15b2),_0x14e16c=Math['cos'](_0x1e15b2);for(let _0x4b72d2=0x3*0x779+-0x1dbb*-0x1+-0x1a13*0x2;_0x4b72d2<=_0x33e7ba;_0x4b72d2++){const _0x605ac7=_0x4b72d2*(-0x1*0x161d+0xbf*-0x1d+-0x2bc2*-0x1)*Math['PI']/_0x33e7ba-Math['PI']/(0x2*0xa+0x23b0+-0x23c2),_0x5b05e5=Math['sin'](_0x605ac7),_0x2eacdc=Math['cos'](_0x605ac7)*_0x413d13,_0x3ec3c3=_0x14e16c,_0x351d30=_0x5b05e5*_0x413d13,_0x15e07d=0x2377+-0x1*-0x407+-0x277d-_0x4b72d2/_0x33e7ba,_0x1ecf05=0x2c5*0x6+0x227a*-0x1+-0x10d*-0x11-_0x2042a9/_0xeb13e5;_0x9aeafa['push'](_0x2eacdc*_0x16dde5,_0x3ec3c3*_0x16dde5,_0x351d30*_0x16dde5),_0x4f33f6['push'](_0x2eacdc,_0x3ec3c3,_0x351d30),_0x2f8a7e['push'](_0x15e07d,-0x260d+-0x2*0x11c5+-0x1*-0x4998-_0x1ecf05);}}for(let _0x1d466=0x17f0*-0x1+-0x4d1+0x1b1*0x11;_0x1d466<_0xeb13e5;++_0x1d466)for(let _0x134d66=-0xc*0xb3+0x107d+0x2b3*-0x3;_0x134d66<_0x33e7ba;++_0x134d66){const _0x5eef8d=_0x1d466*(_0x33e7ba+(0xac5*0x3+-0x337*0x5+-0x103b))+_0x134d66,_0x933ccf=_0x5eef8d+_0x33e7ba+(0x25fd+-0x12a5+-0x1357);_0x24dd1d['push'](_0x5eef8d+(0x1654+0xc57*-0x3+0xeb2),_0x933ccf,_0x5eef8d),_0x24dd1d['push'](_0x5eef8d+(0x174d*0x1+0x16a2+-0x2dee),_0x933ccf+(0x89c*-0x1+-0x74f+-0x7f6*-0x2),_0x933ccf);}this['positions']=_0x9aeafa,this['normals']=_0x4f33f6,this['uvs']=_0x2f8a7e,this['uvs1']=_0x2f8a7e,this['indices']=_0x24dd1d,_0x274b1d['calculateT'+'angents']&&(this['tangents']=br(_0x9aeafa,_0x4f33f6,_0x2f8a7e,_0x24dd1d));}}class jb extends Hp{constructor(_0x1f708c={}){const _0x323e64=_0x1f708c['latitudeBa'+'nds']??0x2697+0x5ab*-0x1+0x106e*-0x2,_0x45adb3=_0x1f708c['longitudeB'+'ands']??-0x378*-0xb+-0x5*-0xa4+0x14a6*-0x2;super({'radius':0.5,'latitudeBands':_0x323e64,'longitudeBands':_0x45adb3});const _0x7ad4d5=0xb7d+0xeea+-0x1a67+0.1,_0x3c9554=0x55*-0x6a+-0x92d*-0x2+-0x8*-0x21b+0.95,_0x598316=_0x3c9554*_0x3c9554,_0x3652af=this['positions'];for(let _0xe52474=-0x3f5*-0x9+0xa68+0x2e05*-0x1;_0xe52474<_0x3652af['length'];_0xe52474+=-0x135f+-0x1a*-0x17b+-0x131c){const _0x55d816=_0x3652af[_0xe52474]/(-0xe08+0x529+0x8df+0.5);let _0x2d0411=_0x3652af[_0xe52474+(-0x11f4+0xfb2+0x243)]/(-0x1*-0x35f+-0x1*0x275+0xd*-0x12+0.5);const _0x1d5fd1=_0x3652af[_0xe52474+(0x14b5+0x9d9+0x11*-0x1cc)]/(-0x126*0xd+-0x1c02+0x2af0+0.5);_0x2d0411<-0x35*0x23+0x1b93+0x1*-0x1454&&(_0x2d0411*=-0x125*0x1+-0x327+0x44c+0.3,_0x55d816*_0x55d816+_0x1d5fd1*_0x1d5fd1<_0x598316&&(_0x2d0411=-_0x7ad4d5)),_0x2d0411+=_0x7ad4d5,_0x2d0411*=-0x22*0x1+-0x1*-0x1588+-0xb*0x1f2+0.5,_0x3652af[_0xe52474+(-0x959*0x1+-0x2*0x89f+0x353*0x8)]=_0x2d0411;}}}class Po{static['create'](_0x175404,_0x9b11cf){switch(_0x9b11cf){case _w:return Po['box'](_0x175404);case gw:return Po['dome'](_0x175404);}return w['assert'](_0x9b11cf===Co,'Unsupporte'+'d\x20sky\x20geom'+'etry\x20type\x20'+_0x9b11cf),Po['infinite'](_0x175404);}static['infinite'](_0x49a20a){return Ge['fromGeomet'+'ry'](_0x49a20a,new Hf(_0x49a20a));}static['box'](_0x60ccdc){return Ge['fromGeomet'+'ry'](_0x60ccdc,new Hf({'yOffset':0.5}));}static['dome'](_0x39d91b){const _0x488fb1=new jb({'latitudeBands':0x32,'longitudeBands':0x32});return _0x488fb1['normals']=void(0x1306+0x1acf+-0x1*0x2dd5),_0x488fb1['uvs']=void(-0x1b5+-0x249d+0x2652*0x1),Ge['fromGeomet'+'ry'](_0x39d91b,_0x488fb1);}}class Yb{constructor(_0x19d4cf,_0x42ea97,_0x4ff567,_0x7610a,_0x262345){h(this,'meshInstan'+'ce',null),h(this,'_depthWrit'+'e',!(0x9eb+0x161*-0x11+0xd87*0x1));const _0x333734=new Bn({'uniqueName':'SkyMateria'+'l','vertexGLSL':Ce['get'](_0x19d4cf,Fe)['get']('skyboxVS'),'fragmentGLSL':Ce['get'](_0x19d4cf,Fe)['get']('skyboxPS'),'vertexWGSL':Ce['get'](_0x19d4cf,it)['get']('skyboxVS'),'fragmentWGSL':Ce['get'](_0x19d4cf,it)['get']('skyboxPS'),'attributes':{'aPosition':Pe}});_0x333734['setDefine']('{SKYBOX_DE'+'CODE_FNC}',Sr['decodeFunc'](_0x7610a['encoding'])),_0x262345!==Co&&_0x333734['setDefine']('SKYMESH',''),_0x7610a['cubemap']&&_0x333734['setDefine']('SKY_CUBEMA'+'P',''),_0x333734['setParamet'+'er']('skyboxHigh'+'lightMulti'+'plier',_0x42ea97['skyboxHigh'+'lightMulti'+'plier']),_0x7610a['cubemap']?_0x333734['setParamet'+'er']('texture_cu'+'beMap',_0x7610a):(_0x333734['setParamet'+'er']('texture_en'+'vAtlas',_0x7610a),_0x333734['setParamet'+'er']('mipLevel',_0x42ea97['skyboxMip'])),_0x333734['cull']=wo,_0x333734['depthWrite']=this['_depthWrit'+'e'];const _0x5788fb=_0x42ea97['layers']['getLayerBy'+'Id'](wp);if(_0x5788fb){const _0xa95c37=Po['create'](_0x19d4cf,_0x262345),_0x264473=new He(_0xa95c37,_0x333734,_0x4ff567);this['meshInstan'+'ce']=_0x264473,_0x264473['cull']=!(0x13*0x8+0x5*-0x136+0x577),_0x264473['pick']=!(0x1*0x31d+-0x22+-0x2fa),_0x5788fb['addMeshIns'+'tances']([_0x264473]),this['skyLayer']=_0x5788fb;}}['destroy'](){this['meshInstan'+'ce']&&(this['skyLayer']&&this['skyLayer']['removeMesh'+'Instances']([this['meshInstan'+'ce']]),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}set['depthWrite'](_0x2b8f2e){this['_depthWrit'+'e']=_0x2b8f2e,this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']['depthWrite']=_0x2b8f2e);}get['depthWrite'](){return this['_depthWrit'+'e'];}}class Kb{constructor(_0x8d0715){h(this,'_type',Co),h(this,'_center',new D(-0x94a+0x13+0x937,-0x349*0x3+0x1*0x241f+-0x1a43,-0x5c*-0x26+-0x1*0x2107+0x57*0x39)),h(this,'skyMesh',null),h(this,'_depthWrit'+'e',!(0x1e0*-0x8+0x20c9+-0x11c8*0x1)),h(this,'node',new Ie('SkyMeshNod'+'e')),(this['device']=_0x8d0715['device'],this['scene']=_0x8d0715,this['center']=new D(0x2*0xcb5+0x2284+-0x1*0x3bee,0x244f+0x3cd*-0x7+-0x9b3,0x7c1+0x24b*-0x7+0x9*0xec),this['centerArra'+'y']=new Float32Array(-0x1250+-0x685*0x5+0x32ec),this['projectedS'+'kydomeCent'+'erId']=this['device']['scope']['resolve']('projectedS'+'kydomeCent'+'er'));}['applySetti'+'ngs'](_0x5efb29){this['type']=_0x5efb29['skyType']??Co,this['node']['setLocalPo'+'sition'](new D(_0x5efb29['skyMeshPos'+'ition']??[-0x11a2*-0x2+-0x1e46+-0x4fe,0xcd6+-0x144e+0x4*0x1de,-0x81a*0x4+0x1*0x241b+-0x3b3*0x1])),this['node']['setLocalEu'+'lerAngles'](new D(_0x5efb29['skyMeshRot'+'ation']??[0xebc+0x25e0+-0x40c*0xd,0x1277*0x1+0x1*-0xb4e+-0x729,-0x7ea+-0x1c91+0x247b])),this['node']['setLocalSc'+'ale'](new D(_0x5efb29['skyMeshSca'+'le']??[0x14*0x136+-0x45*0x29+-0xd2a,-0x827+0xe8e+-0x666,-0x133f+0x49*0x63+-0xb*0xd1])),_0x5efb29['skyCenter']&&(this['_center']=new D(_0x5efb29['skyCenter']));}set['type'](_0x4fd583){this['_type']!==_0x4fd583&&(this['_type']=_0x4fd583,this['scene']['updateShad'+'ers']=!(-0x2af+0x5*0x3c5+0x102a*-0x1),this['updateSkyM'+'esh']());}get['type'](){return this['_type'];}set['center'](_0xdb64e2){this['_center']['copy'](_0xdb64e2);}get['center'](){return this['_center'];}set['depthWrite'](_0x9a4e77){this['_depthWrit'+'e']!==_0x9a4e77&&(this['_depthWrit'+'e']=_0x9a4e77,this['skyMesh']&&(this['skyMesh']['depthWrite']=_0x9a4e77));}get['depthWrite'](){return this['_depthWrit'+'e'];}['updateSkyM'+'esh'](){const _0x4cb68f=this['scene']['_getSkybox'+'Tex']();_0x4cb68f&&(this['resetSkyMe'+'sh'](),this['skyMesh']=new Yb(this['device'],this['scene'],this['node'],_0x4cb68f,this['type']),this['skyMesh']['depthWrite']=this['_depthWrit'+'e'],this['scene']['fire']('set:skybox',_0x4cb68f));}['resetSkyMe'+'sh'](){var _0x4dbaaf;(_0x4dbaaf=this['skyMesh'])==null||_0x4dbaaf['destroy'](),this['skyMesh']=null;}['update'](){if(this['type']!==Co){const {center:_0x4ae976,centerArray:_0x1189e0}=this,_0x499b45=new D();this['node']['getWorldTr'+'ansform']()['transformP'+'oint'](_0x4ae976,_0x499b45),_0x1189e0[0xe*-0x25e+0x116a+0xfba]=_0x499b45['x'],_0x1189e0[-0x10c+-0x171+0x27e]=_0x499b45['y'],_0x1189e0[0x3*0x257+0x201e+0x9f*-0x3f]=_0x499b45['z'],this['projectedS'+'kydomeCent'+'erId']['setValue'](_0x1189e0);}}}const ah=new Ie();ah['worldTrans'+'form']=te['IDENTITY'],ah['_dirtyWorl'+'d']=ah['_dirtyNorm'+'al']=!(0x117a*0x1+-0x6*0x22d+-0x46b);class Zb{constructor(_0x31e1bc,_0x4639ae,_0x2b71af){this['material']=_0x4639ae,this['layer']=_0x2b71af,this['positions']=[],this['colors']=[],this['mesh']=new Ge(_0x31e1bc),this['meshInstan'+'ce']=null;}['addLines'](_0x7c7622,_0x51bff1){const _0x2c221d=this['positions'],_0x35a594=_0x7c7622['length'];for(let _0x24ca9a=-0x21b3*-0x1+0x1ee3*0x1+-0x4096;_0x24ca9a<_0x35a594;_0x24ca9a++){const _0x3ea90b=_0x7c7622[_0x24ca9a];_0x2c221d['push'](_0x3ea90b['x'],_0x3ea90b['y'],_0x3ea90b['z']);}const _0x2725a1=this['colors'];if(_0x51bff1['length'])for(let _0x34e90f=-0x6a*0x1d+0x10*-0x1b5+0x2752;_0x34e90f<_0x35a594;_0x34e90f++){const _0x5e0a7c=_0x51bff1[_0x34e90f];_0x2725a1['push'](_0x5e0a7c['r'],_0x5e0a7c['g'],_0x5e0a7c['b'],_0x5e0a7c['a']);}else{for(let _0x4c64f9=0x5ab*0x1+0x1fe*-0xb+0x1*0x103f;_0x4c64f9<_0x35a594;_0x4c64f9++)_0x2725a1['push'](_0x51bff1['r'],_0x51bff1['g'],_0x51bff1['b'],_0x51bff1['a']);}}['addLinesAr'+'rays'](_0x6e6675,_0x26ba4){const _0x21bedc=this['positions'];for(let _0x36927b=0xad7*0x1+0xe1f+-0x8e*0x2d;_0x36927b<_0x6e6675['length'];_0x36927b+=0x13ae+-0x257a*0x1+0x1*0x11cf)_0x21bedc['push'](_0x6e6675[_0x36927b],_0x6e6675[_0x36927b+(0x111d+0xee3+-0x1fff*0x1)],_0x6e6675[_0x36927b+(-0xb3*0x2b+0xc1a+-0x2b*-0x6b)]);const _0x2ec370=this['colors'];if(_0x26ba4['length']){for(let _0x483697=0x10bf+-0x200b+-0x2*-0x7a6;_0x483697<_0x26ba4['length'];_0x483697+=-0x17*0x106+0x13*0x86+-0x6ce*-0x2)_0x2ec370['push'](_0x26ba4[_0x483697],_0x26ba4[_0x483697+(-0x150b+-0x71*0x58+0x2*0x1df2)],_0x26ba4[_0x483697+(-0x68f+0x1f42+0x2b*-0x93)],_0x26ba4[_0x483697+(0x3*-0xa61+0xd9*-0x13+0x1*0x2f41)]);}else{const _0x276cf3=_0x6e6675['length']/(-0x4f*-0x7+-0x49*-0x43+-0x1541);for(let _0x18813d=0x18a3+0x22d3+0x102*-0x3b;_0x18813d<_0x276cf3;_0x18813d++)_0x2ec370['push'](_0x26ba4['r'],_0x26ba4['g'],_0x26ba4['b'],_0x26ba4['a']);}}['onPreRende'+'r'](_0x49a87a,_0x6dd054){this['positions']['length']>-0x31d+0x1d*-0x5f+0xde0&&this['material']['transparen'+'t']===_0x6dd054&&(this['mesh']['setPositio'+'ns'](this['positions']),this['mesh']['setColors'](this['colors']),this['mesh']['update'](Gh,!(-0x1*-0x1d08+-0x178c+-0x57b)),this['meshInstan'+'ce']||(this['meshInstan'+'ce']=new He(this['mesh'],this['material'],ah)),_0x49a87a['push'](this['meshInstan'+'ce']));}['clear'](){this['positions']['length']=0x1a48+0x695*-0x5+-0x1*-0x6a1,this['colors']['length']=0xd*-0x17e+0x5*0x78d+-0x125b;}}class Qb{constructor(_0x2ccfde){this['device']=_0x2ccfde,this['map']=new Map();}['getBatch'](_0x234c1b,_0x2059fe){let _0x5c7427=this['map']['get'](_0x234c1b);return _0x5c7427||(_0x5c7427=new Zb(this['device'],_0x234c1b,_0x2059fe),this['map']['set'](_0x234c1b,_0x5c7427)),_0x5c7427;}['onPreRende'+'r'](_0x317d98,_0x225972){this['map']['forEach'](_0x34503f=>{_0x34503f['onPreRende'+'r'](_0x317d98,_0x225972);});}['clear'](){this['map']['forEach'](_0x5e2948=>_0x5e2948['clear']());}}const Ts=[],Oa=new D();class Jb{constructor(_0xc50d44){h(this,'shaderDesc'+'s',new Map()),(this['device']=_0xc50d44,this['quadMesh']=null,this['textureSha'+'der']=null,this['depthTextu'+'reShader']=null,this['cubeLocalP'+'os']=null,this['cubeWorldP'+'os']=null,this['batchesMap']=new Map(),this['allBatches']=new Set(),this['updatedLay'+'ers']=new Set(),this['_materialD'+'epth']=null,this['_materialN'+'oDepth']=null,this['layerMeshI'+'nstances']=new Map());}['createMate'+'rial'](_0x337918){const _0x243c1b=new Bn({'uniqueName':'ImmediateL'+'ine','vertexGLSL':Ce['get'](this['device'],Fe)['get']('immediateL'+'ineVS'),'fragmentGLSL':Ce['get'](this['device'],Fe)['get']('immediateL'+'inePS'),'vertexWGSL':Ce['get'](this['device'],it)['get']('immediateL'+'ineVS'),'fragmentWGSL':Ce['get'](this['device'],it)['get']('immediateL'+'inePS'),'attributes':{'vertex_position':Pe,'vertex_color':Wt}});return _0x243c1b['blendType']=Zs,_0x243c1b['depthTest']=_0x337918,_0x243c1b['update'](),_0x243c1b;}get['materialDe'+'pth'](){return this['_materialD'+'epth']||(this['_materialD'+'epth']=this['createMate'+'rial'](!(0x355*0x1+-0x3*0x8d+-0x1ae))),this['_materialD'+'epth'];}get['materialNo'+'Depth'](){return this['_materialN'+'oDepth']||(this['_materialN'+'oDepth']=this['createMate'+'rial'](!(0x2*-0xb51+0x1dc3*0x1+-0x26*0x30))),this['_materialN'+'oDepth'];}['getBatch'](_0x4ce735,_0x171423){let _0x46b665=this['batchesMap']['get'](_0x4ce735);_0x46b665||(_0x46b665=new Qb(this['device']),this['batchesMap']['set'](_0x4ce735,_0x46b665)),this['allBatches']['add'](_0x46b665);const _0x43ba3a=_0x171423?this['materialDe'+'pth']:this['materialNo'+'Depth'];return _0x46b665['getBatch'](_0x43ba3a,_0x4ce735);}['getShaderD'+'esc'](_0x42bfec,_0xe1a002,_0x271ca4){return this['shaderDesc'+'s']['has'](_0x42bfec)||this['shaderDesc'+'s']['set'](_0x42bfec,{'uniqueName':'DebugShade'+'r:'+_0x42bfec,'vertexGLSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20matr'+'ix_model;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ve'+'c2\x20uv0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_model\x20*\x20v'+'ec4(vertex'+'_position,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uv0\x20=\x20ve'+'rtex_posit'+'ion.xy\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20','vertexWGSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20@ver'+'tex\x20fn\x20ver'+'texMain(in'+'put:\x20Verte'+'xInput)\x20->'+'\x20VertexOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20un'+'iform.matr'+'ix_model\x20*'+'\x20vec4f(inp'+'ut.vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.uv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20+\x20vec2f'+'(0.5);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20','fragmentGLSL':_0xe1a002,'fragmentWGSL':_0x271ca4,'attributes':{'vertex_position':Pe}}),this['shaderDesc'+'s']['get'](_0x42bfec);}['getTexture'+'ShaderDesc'](_0x25c651){const _0x1f98a2=Sr['decodeFunc'](_0x25c651);return this['getShaderD'+'esc']('textureSha'+'der-'+_0x25c651,'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20vec2\x20uv0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20colorMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20linear'+'Color\x20=\x20'+_0x1f98a2+('(texture2D'+'(colorMap,'+'\x20uv0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(linearC'+'olor),\x201);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'),'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20colorMa'+'pSampler:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20@fragment'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output:\x20Fr'+'agmentOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20sample'+'dTex\x20=\x20tex'+'tureSample'+'(colorMap,'+'\x20colorMapS'+'ampler,\x20in'+'put.uv0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'linearColo'+'r:\x20vec3f\x20='+'\x20'+_0x1f98a2+('(sampledTe'+'x);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(gammaCorr'+'ectOutput('+'linearColo'+'r),\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'));}['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](){return this['getShaderD'+'esc']('textureSha'+'derUnfilte'+'rable','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vec2\x20uv0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20highp\x20sam'+'pler2D\x20col'+'orMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'oid\x20main\x20('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'uv\x20=\x20ivec2'+'(uv0\x20*\x20tex'+'tureSize(c'+'olorMap,\x200'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'texelFetch'+'(colorMap,'+'\x20uv,\x200).xy'+'z,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<uff>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20@'+'fragment\x20f'+'n\x20fragment'+'Main(input'+'\x20:\x20Fragmen'+'tInput)\x20->'+'\x20FragmentO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'nput.uv0\x20*'+'\x20vec2f(tex'+'tureDimens'+'ions(color'+'Map,\x200)));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20fetchedCo'+'lor\x20:\x20vec4'+'f\x20=\x20textur'+'eLoad(colo'+'rMap,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(fetchedCo'+'lor.xyz,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20');}['getDepthTe'+'xtureShade'+'rDesc'](){return this['getShaderD'+'esc']('depthTextu'+'reShader','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20void\x20main'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x20getLi'+'nearScreen'+'Depth(getI'+'mageEffect'+'UV(uv0))\x20*'+'\x20camera_pa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(vec3(de'+'pth)),\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20u'+'v0:\x20vec2f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20@fragme'+'nt\x20fn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20depth'+':\x20f32\x20=\x20ge'+'tLinearScr'+'eenDepth(g'+'etImageEff'+'ectUV(inpu'+'t.uv0))\x20*\x20'+'uniform.ca'+'mera_param'+'s.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(vec3f(dep'+'th)),\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}['getQuadMes'+'h'](){return this['quadMesh']||(this['quadMesh']=new Ge(this['device']),this['quadMesh']['setPositio'+'ns']([-(-0x8b*0x2+-0x124a+-0x1360*-0x1+0.5),-(0xef2*-0x2+0x790+0x1654+0.5),0x1*0x22be+-0x224b+0x73*-0x1,0x14b*-0x1d+0x6d*-0x17+0x2f4a+0.5,-(-0x1*0x1ec1+-0x230e+0x41cf+0.5),-0x1025+-0x2*-0x103f+-0x1059,-(0x5*-0x1ed+0x3*-0x949+0x1*0x257c+0.5),0x1241+0x6cd*-0x2+0x3*-0x18d+0.5,0x1ade+-0x30f*0x8+0x1*-0x266,-0xeb6+0x1318+-0x462+0.5,0x7*0x56e+0x8bf+-0x2ec1*0x1+0.5,0x9b1*-0x3+0x38a+0x1989]),this['quadMesh']['update'](vr)),this['quadMesh'];}['drawMesh'](_0x213093,_0x40e571,_0x2eec36,_0x44dc8c,_0x45cac6){if(!_0x44dc8c){const _0x31437a=this['getGraphNo'+'de'](_0x40e571);_0x44dc8c=new He(_0x2eec36,_0x213093,_0x31437a);}let _0x39e6ef=this['layerMeshI'+'nstances']['get'](_0x45cac6);_0x39e6ef||(_0x39e6ef=[],this['layerMeshI'+'nstances']['set'](_0x45cac6,_0x39e6ef)),_0x39e6ef['push'](_0x44dc8c);}['drawWireAl'+'ignedBox'](_0x544afa,_0x35dca1,_0x2a4f88,_0x2fffdf,_0x15fadd,_0x3e6b79){if(_0x3e6b79){const _0x1260f5=(_0x2f9e3c,_0x1ff6e0,_0x4836f9)=>{Oa['set'](_0x2f9e3c,_0x1ff6e0,_0x4836f9),_0x3e6b79['transformP'+'oint'](Oa,Oa),Ts['push'](Oa['x'],Oa['y'],Oa['z']);};_0x1260f5(_0x544afa['x'],_0x544afa['y'],_0x544afa['z']),_0x1260f5(_0x544afa['x'],_0x35dca1['y'],_0x544afa['z']),_0x1260f5(_0x544afa['x'],_0x35dca1['y'],_0x544afa['z']),_0x1260f5(_0x35dca1['x'],_0x35dca1['y'],_0x544afa['z']),_0x1260f5(_0x35dca1['x'],_0x35dca1['y'],_0x544afa['z']),_0x1260f5(_0x35dca1['x'],_0x544afa['y'],_0x544afa['z']),_0x1260f5(_0x35dca1['x'],_0x544afa['y'],_0x544afa['z']),_0x1260f5(_0x544afa['x'],_0x544afa['y'],_0x544afa['z']),_0x1260f5(_0x544afa['x'],_0x544afa['y'],_0x35dca1['z']),_0x1260f5(_0x544afa['x'],_0x35dca1['y'],_0x35dca1['z']),_0x1260f5(_0x544afa['x'],_0x35dca1['y'],_0x35dca1['z']),_0x1260f5(_0x35dca1['x'],_0x35dca1['y'],_0x35dca1['z']),_0x1260f5(_0x35dca1['x'],_0x35dca1['y'],_0x35dca1['z']),_0x1260f5(_0x35dca1['x'],_0x544afa['y'],_0x35dca1['z']),_0x1260f5(_0x35dca1['x'],_0x544afa['y'],_0x35dca1['z']),_0x1260f5(_0x544afa['x'],_0x544afa['y'],_0x35dca1['z']),_0x1260f5(_0x544afa['x'],_0x544afa['y'],_0x544afa['z']),_0x1260f5(_0x544afa['x'],_0x544afa['y'],_0x35dca1['z']),_0x1260f5(_0x544afa['x'],_0x35dca1['y'],_0x544afa['z']),_0x1260f5(_0x544afa['x'],_0x35dca1['y'],_0x35dca1['z']),_0x1260f5(_0x35dca1['x'],_0x35dca1['y'],_0x544afa['z']),_0x1260f5(_0x35dca1['x'],_0x35dca1['y'],_0x35dca1['z']),_0x1260f5(_0x35dca1['x'],_0x544afa['y'],_0x544afa['z']),_0x1260f5(_0x35dca1['x'],_0x544afa['y'],_0x35dca1['z']);}else Ts['push'](_0x544afa['x'],_0x544afa['y'],_0x544afa['z'],_0x544afa['x'],_0x35dca1['y'],_0x544afa['z'],_0x544afa['x'],_0x35dca1['y'],_0x544afa['z'],_0x35dca1['x'],_0x35dca1['y'],_0x544afa['z'],_0x35dca1['x'],_0x35dca1['y'],_0x544afa['z'],_0x35dca1['x'],_0x544afa['y'],_0x544afa['z'],_0x35dca1['x'],_0x544afa['y'],_0x544afa['z'],_0x544afa['x'],_0x544afa['y'],_0x544afa['z'],_0x544afa['x'],_0x544afa['y'],_0x35dca1['z'],_0x544afa['x'],_0x35dca1['y'],_0x35dca1['z'],_0x544afa['x'],_0x35dca1['y'],_0x35dca1['z'],_0x35dca1['x'],_0x35dca1['y'],_0x35dca1['z'],_0x35dca1['x'],_0x35dca1['y'],_0x35dca1['z'],_0x35dca1['x'],_0x544afa['y'],_0x35dca1['z'],_0x35dca1['x'],_0x544afa['y'],_0x35dca1['z'],_0x544afa['x'],_0x544afa['y'],_0x35dca1['z'],_0x544afa['x'],_0x544afa['y'],_0x544afa['z'],_0x544afa['x'],_0x544afa['y'],_0x35dca1['z'],_0x544afa['x'],_0x35dca1['y'],_0x544afa['z'],_0x544afa['x'],_0x35dca1['y'],_0x35dca1['z'],_0x35dca1['x'],_0x35dca1['y'],_0x544afa['z'],_0x35dca1['x'],_0x35dca1['y'],_0x35dca1['z'],_0x35dca1['x'],_0x544afa['y'],_0x544afa['z'],_0x35dca1['x'],_0x544afa['y'],_0x35dca1['z']);this['getBatch'](_0x15fadd,_0x2fffdf)['addLinesAr'+'rays'](Ts,_0x2a4f88),Ts['length']=0x16*-0x6a+-0x814+0x50*0x37;}['drawWireSp'+'here'](_0x3f9303,_0x5cc050,_0x52e4ac,_0x2ee97c,_0xd0f2c,_0x4b3f3f){const _0x1ddb48=(-0x261a+0x1061+0x15bb)*Math['PI']/_0x2ee97c;let _0x4aaecb=-0x135d+-0xec2+0x221f;for(let _0x2e2436=-0x5b*0x2f+0x91f*0x1+0x796;_0x2e2436<_0x2ee97c;_0x2e2436++){const _0x3805cf=Math['sin'](_0x4aaecb),_0x379540=Math['cos'](_0x4aaecb);_0x4aaecb+=_0x1ddb48;const _0x84f8ff=Math['sin'](_0x4aaecb),_0x53fc3c=Math['cos'](_0x4aaecb);Ts['push'](_0x3f9303['x']+_0x5cc050*_0x3805cf,_0x3f9303['y'],_0x3f9303['z']+_0x5cc050*_0x379540),Ts['push'](_0x3f9303['x']+_0x5cc050*_0x84f8ff,_0x3f9303['y'],_0x3f9303['z']+_0x5cc050*_0x53fc3c),Ts['push'](_0x3f9303['x']+_0x5cc050*_0x3805cf,_0x3f9303['y']+_0x5cc050*_0x379540,_0x3f9303['z']),Ts['push'](_0x3f9303['x']+_0x5cc050*_0x84f8ff,_0x3f9303['y']+_0x5cc050*_0x53fc3c,_0x3f9303['z']),Ts['push'](_0x3f9303['x'],_0x3f9303['y']+_0x5cc050*_0x3805cf,_0x3f9303['z']+_0x5cc050*_0x379540),Ts['push'](_0x3f9303['x'],_0x3f9303['y']+_0x5cc050*_0x84f8ff,_0x3f9303['z']+_0x5cc050*_0x53fc3c);}this['getBatch'](_0x4b3f3f,_0xd0f2c)['addLinesAr'+'rays'](Ts,_0x52e4ac),Ts['length']=0x11f5*0x2+-0xe6+0x3e4*-0x9;}['getGraphNo'+'de'](_0xf424f0){const _0x371e35=new Ie('ImmediateD'+'ebug');return _0x371e35['worldTrans'+'form']=_0xf424f0,_0x371e35['_dirtyWorl'+'d']=_0x371e35['_dirtyNorm'+'al']=!(0x8*-0x135+-0xdde+0x1787),_0x371e35;}['onPreRende'+'rLayer'](_0x282b52,_0x2975cd,_0x486aa6){if(this['batchesMap']['forEach']((_0xeb6321,_0x2cd8de)=>{_0x2cd8de===_0x282b52&&_0xeb6321['onPreRende'+'r'](_0x2975cd,_0x486aa6);}),!this['updatedLay'+'ers']['has'](_0x282b52)){this['updatedLay'+'ers']['add'](_0x282b52);const _0x2569b1=this['layerMeshI'+'nstances']['get'](_0x282b52);if(_0x2569b1){for(let _0x2b39aa=0x10c0+0xead+-0x1f6d;_0x2b39aa<_0x2569b1['length'];_0x2b39aa++)_0x2975cd['push'](_0x2569b1[_0x2b39aa]);_0x2569b1['length']=0x1047*-0x2+-0x1f1f+0x3fad*0x1;}}}['onPostRend'+'er'](){this['allBatches']['forEach'](_0x2af596=>_0x2af596['clear']()),this['allBatches']['clear'](),this['updatedLay'+'ers']['clear']();}}class eA{constructor(){h(this,'type',Hn),h(this,'color',new ie(0x6a6+0x1*0x3d1+0x39*-0x2f,-0x422*0x1+-0xb*-0x5d+-0x5*-0x7,0x1248+-0xcfb*0x2+0x3d7*0x2)),h(this,'density',0x65*-0x7+0xce6+-0xa23),h(this,'start',0x2b1+-0x19f5+0x1745),h(this,'end',0xf7a+-0x1*0x2410+0x187e);}}class Et extends me{constructor(_0x4978dd){super(),h(this,'ambientBak'+'e',!(0x23f2*-0x1+0x25f5+-0x202)),h(this,'ambientBak'+'eOcclusion'+'Brightness',-0x1*0x11ef+-0x20e2*0x1+0x32d1),h(this,'ambientBak'+'eOcclusion'+'Contrast',-0x75+0xef8+-0x5*0x2e7),h(this,'ambientLig'+'ht',new ie(0x5de+0x2261+-0x283f,0xef5+0x1c35+-0x2b2a,0x124a+-0x202+-0x1048)),h(this,'ambientLum'+'inance',0x1af6+0x100c+0x2b02*-0x1),h(this,'exposure',0x392*-0x4+0x3b*-0x1f+-0x1a*-0xd3),h(this,'lightmapSi'+'zeMultipli'+'er',0x2289+-0x13*-0x60+0x3e*-0xac),h(this,'lightmapMa'+'xResolutio'+'n',-0x2274+-0x21e0*0x1+-0x1*-0x4c54),h(this,'lightmapMo'+'de',Ac),h(this,'lightmapFi'+'lterEnable'+'d',!(0x86*-0x8+-0x869+-0x1*-0xc9a)),h(this,'lightmapHD'+'R',!(-0x2*0x922+0x52a*0x2+0x7f1*0x1)),h(this,'root',null),h(this,'physicalUn'+'its',!(-0x6a5+-0x1*-0x1d84+-0x16de)),h(this,'_envAtlas',null),h(this,'_skyboxCub'+'eMap',null),h(this,'_fogParams',new eA()),h(this,'forcePassT'+'hroughSpec'+'ular',!(-0x2*0xab6+0x47*0x1c+0xda9)),(w['assert'](_0x4978dd,'Scene\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x4978dd,this['_gravity']=new D(-0x1838+0x11eb*0x2+-0xb9e,-(-0x6a7+0x3ec+0x2c4+0.8000000000000007),-0x1217+0x1714+0x1*-0x4fd),this['_layers']=null,this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']=null,this['_skyboxInt'+'ensity']=0x287*-0x6+0x3d*-0x59+0x2460,this['_skyboxLum'+'inance']=0x1cf*-0x2+0x5*-0xe5+0x1*0x817,this['_skyboxMip']=-0xceb*-0x1+0x2*0x62f+-0x1949,this['_skyboxHig'+'hlightMult'+'iplier']=-0x1*-0x1f0a+0xb79*-0x3+0x362,this['_skyboxRot'+'ationShade'+'rInclude']=!(-0x1*-0x1a38+-0x1bf8+0x1c1),this['_skyboxRot'+'ation']=new le(),this['_skyboxRot'+'ationMat3']=new _i(),this['_skyboxRot'+'ationMat4']=new te(),this['_ambientBa'+'keNumSampl'+'es']=-0x133*0x1f+-0x1*0x1eee+0x4*0x1107,this['_ambientBa'+'keSpherePa'+'rt']=-0x1037+0x1a5d+-0xa26+0.4,this['_lightmapF'+'ilterRange']=-0x30a+0x66b*0x4+0xf1*-0x18,this['_lightmapF'+'ilterSmoot'+'hness']=0x2*0x4e3+0x726*0x1+-0x10ec+0.2,this['_clustered'+'LightingEn'+'abled']=!(-0x1366+-0x2c9*0x7+-0x1*-0x26e5),this['_lightingP'+'arams']=new qy(this['device']['supportsAr'+'eaLights'],this['device']['maxTexture'+'Size'],()=>{this['updateShad'+'ers']=!(-0x15c6+-0xcfb+0x4f7*0x7);}),this['_sky']=new Kb(this),this['_stats']={'meshInstances':0x0,'lights':0x0,'dynamicLights':0x0,'bakedLights':0x0,'updateShadersTime':0x0},this['updateShad'+'ers']=!(-0x20f*0x1+0xe9*-0x3+-0x1*-0x4ca),this['_shaderVer'+'sion']=0x302+0x19ef+0xef*-0x1f,this['immediate']=new Jb(this['device']));}get['defaultDra'+'wLayer'](){return this['layers']['getLayerBy'+'Id'](Ep);}set['ambientBak'+'eNumSample'+'s'](_0x9ef316){this['_ambientBa'+'keNumSampl'+'es']=Y['clamp'](Math['floor'](_0x9ef316),0x49f+0x1e6c+-0x230a,-0x1*0x4f9+-0x16e5+0x1cdd);}get['ambientBak'+'eNumSample'+'s'](){return this['_ambientBa'+'keNumSampl'+'es'];}set['ambientBak'+'eSpherePar'+'t'](_0x563c51){this['_ambientBa'+'keSpherePa'+'rt']=Y['clamp'](_0x563c51,-0x1308+0x1*-0x2383+-0x368b*-0x1+0.001,0x1111+0x1*-0x1cb5+0xba5);}get['ambientBak'+'eSpherePar'+'t'](){return this['_ambientBa'+'keSpherePa'+'rt'];}set['clusteredL'+'ightingEna'+'bled'](_0x4703f9){if(this['device']['isWebGPU']&&!_0x4703f9){w['warnOnce']('WebGPU\x20cur'+'rently\x20onl'+'y\x20supports'+'\x20clustered'+'\x20lighting,'+'\x20and\x20this\x20'+'cannot\x20be\x20'+'disabled.');return;}if(!this['_clustered'+'LightingEn'+'abled']&&_0x4703f9){console['error']('Turning\x20on'+'\x20disabled\x20'+'clustered\x20'+'lighting\x20i'+'s\x20not\x20curr'+'ently\x20supp'+'orted');return;}this['_clustered'+'LightingEn'+'abled']=_0x4703f9;}get['clusteredL'+'ightingEna'+'bled'](){return this['_clustered'+'LightingEn'+'abled'];}set['envAtlas'](_0x255ec4){_0x255ec4!==this['_envAtlas']&&(this['_envAtlas']=_0x255ec4,_0x255ec4&&(_0x255ec4['addressU']=ue,_0x255ec4['addressV']=ue,_0x255ec4['minFilter']=vt,_0x255ec4['magFilter']=vt,_0x255ec4['mipmaps']=!(-0x135+-0x1*-0xc6a+-0x4*0x2cd)),this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_resetSkyM'+'esh']());}get['envAtlas'](){return this['_envAtlas'];}set['layers'](_0x3cd98a){const _0x521e3c=this['_layers'];this['_layers']=_0x3cd98a,this['fire']('set:layers',_0x521e3c,_0x3cd98a);}get['layers'](){return this['_layers'];}get['sky'](){return this['_sky'];}get['lighting'](){return this['_lightingP'+'arams'];}get['fog'](){return this['_fogParams'];}set['lightmapFi'+'lterRange'](_0xab67f2){this['_lightmapF'+'ilterRange']=Math['max'](_0xab67f2,-0x132e+-0x242f+-0x375d*-0x1+0.001);}get['lightmapFi'+'lterRange'](){return this['_lightmapF'+'ilterRange'];}set['lightmapFi'+'lterSmooth'+'ness'](_0x453ca4){this['_lightmapF'+'ilterSmoot'+'hness']=Math['max'](_0x453ca4,0xd99+-0x1b04+0xd6b+0.001);}get['lightmapFi'+'lterSmooth'+'ness'](){return this['_lightmapF'+'ilterSmoot'+'hness'];}set['prefiltere'+'dCubemaps'](_0x28e227){_0x28e227=_0x28e227||[];const _0x5b61d8=this['_prefilter'+'edCubemaps'];(_0x5b61d8['length']!==_0x28e227['length']||_0x5b61d8['some']((_0x330396,_0xe3ceae)=>_0x330396!==_0x28e227[_0xe3ceae]))&&(_0x28e227['length']===-0x1af*0x12+0xc1c+0x1238&&_0x28e227['every'](_0x368983=>!!_0x368983)?(this['_internalE'+'nvAtlas']=zy['generatePr'+'efilteredA'+'tlas'](_0x28e227,{'target':this['_internalE'+'nvAtlas']}),this['_envAtlas']=this['_internalE'+'nvAtlas']):(this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_envAtlas']=null),this['_prefilter'+'edCubemaps']=_0x28e227['slice'](),this['_resetSkyM'+'esh']());}get['prefiltere'+'dCubemaps'](){return this['_prefilter'+'edCubemaps'];}set['skybox'](_0x5d4dc3){_0x5d4dc3!==this['_skyboxCub'+'eMap']&&(this['_skyboxCub'+'eMap']=_0x5d4dc3,this['_resetSkyM'+'esh']());}get['skybox'](){return this['_skyboxCub'+'eMap'];}set['skyboxInte'+'nsity'](_0xc61a91){_0xc61a91!==this['_skyboxInt'+'ensity']&&(this['_skyboxInt'+'ensity']=_0xc61a91,this['_resetSkyM'+'esh']());}get['skyboxInte'+'nsity'](){return this['_skyboxInt'+'ensity'];}set['skyboxLumi'+'nance'](_0x2084dd){_0x2084dd!==this['_skyboxLum'+'inance']&&(this['_skyboxLum'+'inance']=_0x2084dd,this['_resetSkyM'+'esh']());}get['skyboxLumi'+'nance'](){return this['_skyboxLum'+'inance'];}set['skyboxMip'](_0x1b3e52){_0x1b3e52!==this['_skyboxMip']&&(this['_skyboxMip']=_0x1b3e52,this['_resetSkyM'+'esh']());}get['skyboxMip'](){return this['_skyboxMip'];}set['skyboxHigh'+'lightMulti'+'plier'](_0x44456c){_0x44456c!==this['_skyboxHig'+'hlightMult'+'iplier']&&(this['_skyboxHig'+'hlightMult'+'iplier']=_0x44456c,this['_resetSkyM'+'esh']());}get['skyboxHigh'+'lightMulti'+'plier'](){return this['_skyboxHig'+'hlightMult'+'iplier'];}set['skyboxRota'+'tion'](_0x452d9f){if(!this['_skyboxRot'+'ation']['equals'](_0x452d9f)){const _0x328ab9=_0x452d9f['equals'](le['IDENTITY']);this['_skyboxRot'+'ation']['copy'](_0x452d9f),_0x328ab9?this['_skyboxRot'+'ationMat3']['setIdentit'+'y']():(this['_skyboxRot'+'ationMat4']['setTRS'](D['ZERO'],_0x452d9f,D['ONE']),this['_skyboxRot'+'ationMat3']['invertMat4'](this['_skyboxRot'+'ationMat4'])),!this['_skyboxRot'+'ationShade'+'rInclude']&&!_0x328ab9&&(this['_skyboxRot'+'ationShade'+'rInclude']=!(0x1e*0xb+0x3*0x47d+-0xec1),this['_resetSkyM'+'esh']());}}get['skyboxRota'+'tion'](){return this['_skyboxRot'+'ation'];}['destroy'](){this['_resetSkyM'+'esh'](),this['root']=null,this['off']();}['drawLine'](_0x178ce8,_0x478b19,_0x233a9f=ie['WHITE'],_0x59ddfb=!(0x24d9+-0x473*0x1+-0x2066),_0x14113d=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x14113d,_0x59ddfb)['addLines']([_0x178ce8,_0x478b19],[_0x233a9f,_0x233a9f]);}['drawLines'](_0x1eedff,_0x413b66,_0xec81f4=!(-0x1*0x2345+0xa6a+0x1*0x18db),_0x46f8a3=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x46f8a3,_0xec81f4)['addLines'](_0x1eedff,_0x413b66);}['drawLineAr'+'rays'](_0x166669,_0x4ad8b8,_0xc386f3=!(0x66*-0x28+0xc25+0x3cb*0x1),_0x1cb1f6=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x1cb1f6,_0xc386f3)['addLinesAr'+'rays'](_0x166669,_0x4ad8b8);}['applySetti'+'ngs'](_0x53a03b){const _0x5a84c0=_0x53a03b['physics'],_0x2978d6=_0x53a03b['render'];this['_gravity']['set'](_0x5a84c0['gravity'][-0x21*-0x79+-0x15e+0xe3b*-0x1],_0x5a84c0['gravity'][-0x21ef+-0x14*0xdf+0x335c],_0x5a84c0['gravity'][0x2123+-0x1392+-0xd8f]),this['ambientLig'+'ht']['set'](_0x2978d6['global_amb'+'ient'][-0x1a0+-0x1025+-0x1*-0x11c5],_0x2978d6['global_amb'+'ient'][0x1fbb+-0x232b+-0x1*-0x371],_0x2978d6['global_amb'+'ient'][-0x48d*-0x3+-0x192d*-0x1+-0x26d2]),this['ambientLum'+'inance']=_0x2978d6['ambientLum'+'inance'],this['fog']['type']=_0x2978d6['fog'],this['fog']['color']['set'](_0x2978d6['fog_color'][-0x12ea+0x2429+-0x1*0x113f],_0x2978d6['fog_color'][0x597+0x5*-0x240+0x3a*0x19],_0x2978d6['fog_color'][0x2*-0x8c3+0xe17+-0x371*-0x1]),this['fog']['start']=_0x2978d6['fog_start'],this['fog']['end']=_0x2978d6['fog_end'],this['fog']['density']=_0x2978d6['fog_densit'+'y'],this['lightmapSi'+'zeMultipli'+'er']=_0x2978d6['lightmapSi'+'zeMultipli'+'er'],this['lightmapMa'+'xResolutio'+'n']=_0x2978d6['lightmapMa'+'xResolutio'+'n'],this['lightmapMo'+'de']=_0x2978d6['lightmapMo'+'de'],this['exposure']=_0x2978d6['exposure'],this['_skyboxInt'+'ensity']=_0x2978d6['skyboxInte'+'nsity']??0xd*0xe8+0x1cde+0x5*-0x821,this['_skyboxLum'+'inance']=_0x2978d6['skyboxLumi'+'nance']??-0x16e+0x1ae3*-0x3+0x41*0x277,this['_skyboxMip']=_0x2978d6['skyboxMip']??0x305*-0xc+0x11f0+0x124c,_0x2978d6['skyboxRota'+'tion']&&(this['skyboxRota'+'tion']=new le()['setFromEul'+'erAngles'](_0x2978d6['skyboxRota'+'tion'][0xb37*-0x3+-0xf65+-0x2*-0x1885],_0x2978d6['skyboxRota'+'tion'][0xc7*0x16+-0x1af9+0x9e0],_0x2978d6['skyboxRota'+'tion'][-0x3*0x29b+-0x118+-0x8eb*-0x1])),this['sky']['applySetti'+'ngs'](_0x2978d6),this['clusteredL'+'ightingEna'+'bled']=_0x2978d6['clusteredL'+'ightingEna'+'bled']??!(0x1c0+0x2*-0x120e+0x13*0x1cf),this['lighting']['applySetti'+'ngs'](_0x2978d6),['lightmapFi'+'lterEnable'+'d','lightmapFi'+'lterRange','lightmapFi'+'lterSmooth'+'ness','ambientBak'+'e','ambientBak'+'eNumSample'+'s','ambientBak'+'eSpherePar'+'t','ambientBak'+'eOcclusion'+'Brightness','ambientBak'+'eOcclusion'+'Contrast']['forEach'](_0x3d9e75=>{_0x2978d6['hasOwnProp'+'erty'](_0x3d9e75)&&(this[_0x3d9e75]=_0x2978d6[_0x3d9e75]);}),this['_resetSkyM'+'esh']();}['_getSkybox'+'Tex'](){const _0x3a13eb=this['_prefilter'+'edCubemaps'];return this['_skyboxMip']?_0x3a13eb[[-0x4*0x7d7+-0xc6f+-0x6f*-0x65,0x1699*-0x1+-0xf7*0x19+0x9*0x531,-0x32*-0x8e+0x19f4+-0x1*0x35ad,0x1743+0x1002+-0x2741,-0x22e+-0x3*-0x2+0x22d*0x1,-0x1634+0x8be+0x6be*0x2][this['_skyboxMip']]]||this['_envAtlas']||_0x3a13eb[0x18d8+0x6f6+0xb1*-0x2e]||this['_skyboxCub'+'eMap']:this['_skyboxCub'+'eMap']||_0x3a13eb[-0x2*0x180+-0x1d5e+0x102f*0x2]||this['_envAtlas'];}['_updateSky'+'Mesh'](){this['sky']['skyMesh']||this['sky']['updateSkyM'+'esh'](),this['sky']['update']();}['_resetSkyM'+'esh'](){this['sky']['resetSkyMe'+'sh'](),this['updateShad'+'ers']=!(-0x253a+0x1bce+0x96c);}['setSkybox'](_0x23a92a){_0x23a92a?(this['skybox']=_0x23a92a[-0x1546+-0x1*0x10ad+-0x14f*-0x1d]||null,_0x23a92a[0x1462+-0xd*0x2a1+-0x373*-0x4]&&!_0x23a92a[-0x11bb+-0x1d*0xe6+0x461*0xa]['cubemap']?this['envAtlas']=_0x23a92a[-0x1e*0x2+0x263f*-0x1+0x267c]:this['prefiltere'+'dCubemaps']=_0x23a92a['slice'](0x1*-0xf67+0x10d*0x23+-0x155f)):(this['skybox']=null,this['envAtlas']=null);}get['lightmapPi'+'xelFormat'](){return this['lightmapHD'+'R']&&this['device']['getRendera'+'bleHdrForm'+'at']()||Ne;}}h(Et,'EVENT_SETL'+'AYERS','set:layers'),h(Et,'EVENT_SETS'+'KYBOX','set:skybox'),h(Et,'EVENT_PRER'+'ENDER','prerender'),h(Et,'EVENT_POST'+'RENDER','postrender'),h(Et,'EVENT_PRER'+'ENDER_LAYE'+'R','prerender:'+'layer'),h(Et,'EVENT_POST'+'RENDER_LAY'+'ER','postrender'+':layer'),h(Et,'EVENT_PREC'+'ULL','precull'),h(Et,'EVENT_POST'+'CULL','postcull');class Ky{constructor(_0x31c531,_0x553f3e,_0x21cf37){this['device']=_0x31c531,this['inverseBin'+'dPose']=_0x553f3e,this['boneNames']=_0x21cf37;}}const tA=[0x627+0x3*-0x1b+-0x5d6,-0x1779+0x1497*-0x1+-0xf*-0x2f0,-0x1a37*-0x1+0x689+0x65*-0x53,0xe95+-0xa38*-0x2+-0x2305,-0x1*0x598+0x1*-0x1d87+-0x1*-0x231f,0xaff+-0xd12+0x4c*0x7,0x55b*0x7+-0x1ca0+-0x8dd,-0x22b+-0x1431+0x165c,-0x22d0+0xc11*0x1+0xb60*0x2,0x1*0x44f+-0x1b60+0x49d*0x5,-0x95*-0x2e+-0xe21+0x437*-0x3,-0x44f+0x1ae3+-0x1693*0x1],sA=[0x23d5+0x93d+-0x2d12,-0x1f9a+-0x147+-0x3*-0xaf6,-0x1fc0+0xb6*0x31+-0x313,-0x5*0x617+0x790+0x16e5*0x1,0x1e17+0x2*0x1d+-0x1e4e,0x12e3+-0x4cf*0x1+-0xe13];class iA extends me{constructor(_0xbec87a,_0x469e0d){super(),this['_device']=_0xbec87a,this['_pixelsPer'+'Unit']=_0x469e0d&&_0x469e0d['pixelsPerU'+'nit']!==void(0x18ce+-0xce0*-0x3+-0x3f6e*0x1)?_0x469e0d['pixelsPerU'+'nit']:-0xa*-0x100+0x168c+-0x1*0x208b,this['_renderMod'+'e']=_0x469e0d&&_0x469e0d['renderMode']!==void(-0x1*0x260f+0x2186+0x489)?_0x469e0d['renderMode']:ci,this['_atlas']=_0x469e0d&&_0x469e0d['atlas']!==void(0x1c69*0x1+0xe*0xf4+0x1fd*-0x15)?_0x469e0d['atlas']:null,this['_frameKeys']=_0x469e0d&&_0x469e0d['frameKeys']!==void(0x268b+-0x1*-0x415+-0x7c*0x58)?_0x469e0d['frameKeys']:null,this['_meshes']=[],this['_updatingP'+'roperties']=!(0x984+-0x2e3*0x8+0xd95),this['_meshesDir'+'ty']=!(-0xa6f+-0x440+-0xbc*-0x14),this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes']();}set['frameKeys'](_0x33772c){this['_frameKeys']=_0x33772c,this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x1*0x1d72+0x28*-0x5b+0x2*0x15d5):this['_createMes'+'hes']()),this['fire']('set:frameK'+'eys',_0x33772c);}get['frameKeys'](){return this['_frameKeys'];}set['atlas'](_0x279849){_0x279849!==this['_atlas']&&(this['_atlas']&&(this['_atlas']['off']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['off']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['off']('remove:fra'+'me',this['_onFrameRe'+'moved'],this)),this['_atlas']=_0x279849,this['_atlas']&&this['_frameKeys']&&(this['_atlas']['on']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['on']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['on']('remove:fra'+'me',this['_onFrameRe'+'moved'],this),this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x1ea3+0x1*0x1a0e+0x1*0x495):this['_createMes'+'hes']()),this['fire']('set:atlas',_0x279849));}get['atlas'](){return this['_atlas'];}set['pixelsPerU'+'nit'](_0x4817b5){this['_pixelsPer'+'Unit']!==_0x4817b5&&(this['_pixelsPer'+'Unit']=_0x4817b5,this['fire']('set:pixels'+'PerUnit',_0x4817b5),this['_atlas']&&this['_frameKeys']&&this['renderMode']===ci&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x39e+0xfdc*0x2+0x6d*-0x42):this['_createMes'+'hes']()));}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}set['renderMode'](_0x2942b1){if(this['_renderMod'+'e']===_0x2942b1)return;const _0x3e9562=this['_renderMod'+'e'];this['_renderMod'+'e']=_0x2942b1,this['fire']('set:render'+'Mode',_0x2942b1),(_0x3e9562===ci||_0x2942b1===ci)&&this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0xc16+-0x7f6+-0x420):this['_createMes'+'hes']());}get['renderMode'](){return this['_renderMod'+'e'];}get['meshes'](){return this['_meshes'];}['_createMes'+'hes'](){const _0x5368d0=this['_meshes']['length'];for(let _0x1a8d90=0x1*0x24ac+0x26d1+-0x1*0x4b7d;_0x1a8d90<_0x5368d0;_0x1a8d90++){const _0x126784=this['_meshes'][_0x1a8d90];_0x126784&&_0x126784['destroy']();}const _0x5b1183=this['_frameKeys']['length'];this['_meshes']=new Array(_0x5b1183);const _0x4e67e1=this['renderMode']===Pt||this['_renderMod'+'e']===Mt?this['_create9Sl'+'iceMesh']:this['_createSim'+'pleMesh'];for(let _0x14bc10=0x42c+0x4d9*0x1+0x1*-0x905;_0x14bc10<_0x5b1183;_0x14bc10++){const _0x2c6680=this['_atlas']['frames'][this['_frameKeys'][_0x14bc10]];this['_meshes'][_0x14bc10]=_0x2c6680?_0x4e67e1['call'](this,_0x2c6680):null;}this['fire']('set:meshes');}['_createSim'+'pleMesh'](_0x5d6db5){const _0x51c439=_0x5d6db5['rect'],_0x40b39d=this['_atlas']['texture']['width'],_0xd6a463=this['_atlas']['texture']['height'],_0x4ef8d3=_0x51c439['z']/this['_pixelsPer'+'Unit'],_0x5559f7=_0x51c439['w']/this['_pixelsPer'+'Unit'],_0x27f48c=_0x5d6db5['pivot']['x'],_0x5ed292=_0x5d6db5['pivot']['y'],_0x3d9a07=[-_0x27f48c*_0x4ef8d3,-_0x5ed292*_0x5559f7,-0x1352+0x23eb+-0x7*0x25f,(0x1668+0x1d2+-0x1dd*0xd-_0x27f48c)*_0x4ef8d3,-_0x5ed292*_0x5559f7,0x92f*-0x1+0x1*0x50e+0x7*0x97,(0x21*0x27+0x1adf+-0x1fe5-_0x27f48c)*_0x4ef8d3,(0x2451+0x1805+-0x5*0xc11-_0x5ed292)*_0x5559f7,-0x2f1+-0x15de+0x18cf,-_0x27f48c*_0x4ef8d3,(0x1*0x25a5+0x2*0x1278+-0x18dc*0x3-_0x5ed292)*_0x5559f7,0x1d29+0x1*-0x17c5+0xf*-0x5c],_0x418919=_0x51c439['x']/_0x40b39d,_0x1511c7=-0x1113+-0x98f*0x1+0x1aa3-_0x51c439['y']/_0xd6a463,_0x24f6aa=(_0x51c439['x']+_0x51c439['z'])/_0x40b39d,_0x4f9762=0xb2+-0x15f8+0x1547*0x1-(_0x51c439['y']+_0x51c439['w'])/_0xd6a463,_0x3ed3cd=[_0x418919,_0x1511c7,_0x24f6aa,_0x1511c7,_0x24f6aa,_0x4f9762,_0x418919,_0x4f9762],_0x584649=new ga();return _0x584649['positions']=_0x3d9a07,_0x584649['normals']=tA,_0x584649['uvs']=_0x3ed3cd,_0x584649['indices']=sA,Ge['fromGeomet'+'ry'](this['_device'],_0x584649);}['_create9Sl'+'iceMesh'](){const _0x5cb54b=J['ONE'],_0x3ad9f2=0x2685+0x1fd4+-0x4656,_0x46d7b6=0x8b1*-0x4+-0x1*-0x2241+0x86,_0x15291e=[],_0x86e786=[],_0x25a773=[],_0x5c9a7e=[];let _0x50e99d=-0x1640+0x1a83+-0x443;for(let _0xbad2d3=0x6ad+0xbb1*-0x1+-0x504*-0x1;_0xbad2d3<=_0x3ad9f2;_0xbad2d3++){const _0x407b8c=_0xbad2d3===0x3*0x7c9+-0x12c1+0x13*-0x3e||_0xbad2d3===_0x3ad9f2?-0x6*-0x301+-0xd*0x1b1+0x3f7:0x7dd*0x2+0x18cc+-0x2885;for(let _0x6b8a55=0x1b4f+-0x554+-0x15fb;_0x6b8a55<=_0x46d7b6;_0x6b8a55++){const _0x5527e2=-_0x5cb54b['x']+(-0x1555+0xdc9*-0x1+0x4*0x8c8)*_0x5cb54b['x']*(_0xbad2d3<=-0xb*0x1d+0x91*0x27+-0x37*0x61?0xa86+-0x16+-0xa70:0x27*-0x7+0x1*0x1b95+-0x1a81)/_0x3ad9f2,_0x225a80=-0x18ab+-0x1d*0x155+0x3f4c,_0x209287=-(-_0x5cb54b['y']+(0x3*-0x20d+0x283*0xa+-0x17*0xd3)*_0x5cb54b['y']*(_0x6b8a55<=-0x7c*-0x22+-0xa6*-0x29+-0x2b0d?-0x195+-0x1*-0x5e9+-0x454:-0x1*-0x2641+-0x8e*0x43+-0xc*0x17)/_0x46d7b6),_0x4bd1f9=_0x6b8a55===-0x61*-0x5+-0x1cf*0x10+-0x2b*-0xa1||_0x6b8a55===_0x46d7b6?0x1*0x9ad+-0x337*0x2+-0x33f:0x80*0x47+-0x23f7+-0x2*-0x3c;_0x15291e['push'](-_0x5527e2,_0x225a80,_0x209287),_0x86e786['push'](-0xf8d+-0x1e44+0x2dd1,0xfb1+-0x1e88*-0x1+-0xb8e*0x4,0x1*0xa7b+0xf5+-0x3*0x3d0),_0x25a773['push'](_0x407b8c,_0x4bd1f9),_0xbad2d3<_0x3ad9f2&&_0x6b8a55<_0x46d7b6&&(_0x5c9a7e['push'](_0x50e99d+_0x46d7b6+(0x105b*-0x2+0x16e5+-0x346*-0x3),_0x50e99d+(-0x2094+-0xae6*0x3+0x4147),_0x50e99d),_0x5c9a7e['push'](_0x50e99d+_0x46d7b6+(0x1*-0x1f0d+-0xdb0+0x2cbe),_0x50e99d+_0x46d7b6+(-0x191e+-0x9b*-0x9+-0x68f*-0x3),_0x50e99d+(-0x2317*0x1+0x2*-0xc84+-0x2*-0x1e10))),_0x50e99d++;}}const _0x21d5c8=new ga();return _0x21d5c8['positions']=_0x15291e,_0x21d5c8['normals']=_0x86e786,_0x21d5c8['uvs']=_0x25a773,_0x21d5c8['indices']=_0x5c9a7e,Ge['fromGeomet'+'ry'](this['_device'],_0x21d5c8);}['_onSetFram'+'es'](_0x126cf5){this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x2b*-0x67+-0xa97*-0x2+-0x267b):this['_createMes'+'hes']();}['_onFrameCh'+'anged'](_0x51ba20,_0x2ce687){const _0xb40048=this['_frameKeys']['indexOf'](_0x51ba20);_0xb40048<0xa57*-0x1+-0xeec+0x1943||(_0x2ce687?this['renderMode']===ci&&(this['_meshes'][_0xb40048]=this['_createSim'+'pleMesh'](_0x2ce687)):this['_meshes'][_0xb40048]=null,this['fire']('set:meshes'));}['_onFrameRe'+'moved'](_0x12c843){const _0x40bbf5=this['_frameKeys']['indexOf'](_0x12c843);_0x40bbf5<-0xa33+0x2bf+0x774||(this['_meshes'][_0x40bbf5]=null,this['fire']('set:meshes'));}['startUpdat'+'e'](){this['_updatingP'+'roperties']=!(-0x43*-0x7a+-0x576*0x3+-0xf8c),this['_meshesDir'+'ty']=!(-0xeb+-0x1*-0xec1+-0xdd5);}['endUpdate'](){this['_updatingP'+'roperties']=!(-0xb9d+0x87e+0x1*0x320),this['_meshesDir'+'ty']&&this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes'](),this['_meshesDir'+'ty']=!(0x231b+-0x9*-0x294+-0x22*0x1b7);}['destroy'](){for(const _0x42c048 of this['_meshes'])_0x42c048&&_0x42c048['destroy']();this['_meshes']['length']=0x1095+-0x895+-0x800;}}class rA extends me{constructor(){super(),this['_texture']=null,this['_frames']=null;}set['texture'](_0x43782e){this['_texture']=_0x43782e,this['fire']('set:textur'+'e',_0x43782e);}get['texture'](){return this['_texture'];}set['frames'](_0x24330e){this['_frames']=_0x24330e,this['fire']('set:frames',_0x24330e);}get['frames'](){return this['_frames'];}['setFrame'](_0x5ad203,_0x169ae5){let _0x3660b0=this['_frames'][_0x5ad203];_0x3660b0?(_0x3660b0['rect']['copy'](_0x169ae5['rect']),_0x3660b0['pivot']['copy'](_0x169ae5['pivot']),_0x3660b0['border']['copy'](_0x169ae5['border'])):(_0x3660b0={'rect':_0x169ae5['rect']['clone'](),'pivot':_0x169ae5['pivot']['clone'](),'border':_0x169ae5['border']['clone']()},this['_frames'][_0x5ad203]=_0x3660b0),this['fire']('set:frame',_0x5ad203['toString'](),_0x3660b0);}['removeFram'+'e'](_0x5f56ac){const _0x351353=this['_frames'][_0x5f56ac];_0x351353&&(delete this['_frames'][_0x5f56ac],this['fire']('remove:fra'+'me',_0x5f56ac['toString'](),_0x351353));}['destroy'](){this['_texture']&&this['_texture']['destroy']();}}class N_{constructor(_0x1f90ee,_0x1d6636,_0x304b42,_0x11654b){this['time']=_0x1f90ee,this['position']=_0x1d6636,this['rotation']=_0x304b42,this['scale']=_0x11654b;}}class k_{constructor(){this['_name']='',this['_keys']=[];}}class U_{constructor(){h(this,'name',''),h(this,'duration',-0x2040+-0x1*0x505+0x2545),(this['_nodes']=[],this['_nodeDict']={});}['getNode'](_0x2e7d66){return this['_nodeDict'][_0x2e7d66];}['addNode'](_0x414d90){this['_nodes']['push'](_0x414d90),this['_nodeDict'][_0x414d90['_name']]=_0x414d90;}get['nodes'](){return this['_nodes'];}}class aA{constructor(){this['_written']=!(0x1*0x1615+0x2685+0x3c99*-0x1),this['_name']='',this['_keyFrames']=[],this['_quat']=new le(),this['_pos']=new D(),this['_scale']=new D(),this['_targetNod'+'e']=null;}['getTarget'](){return this['_targetNod'+'e'];}['setTarget'](_0x41bc74){this['_targetNod'+'e']=_0x41bc74;}}class Yd{constructor(_0x2c341f){h(this,'looping',!(0x26a5+0x80a+0x13*-0x275)),(this['_animation']=null,this['_time']=-0x1ce*0x15+0x2354+0x292,this['_interpola'+'tedKeys']=[],this['_interpola'+'tedKeyDict']={},this['_currKeyIn'+'dices']={},this['graph']=null);const _0x20c5cc=_0x2a0a18=>{const _0x33353c=new aA();_0x33353c['_name']=_0x2a0a18['name'],this['_interpola'+'tedKeys']['push'](_0x33353c),this['_interpola'+'tedKeyDict'][_0x2a0a18['name']]=_0x33353c,this['_currKeyIn'+'dices'][_0x2a0a18['name']]=0x13de+-0x1fe8+0x2e*0x43;for(let _0x15efa5=-0xa3c+0x6b1*0x5+-0x1*0x1739;_0x15efa5<_0x2a0a18['_children']['length'];_0x15efa5++)_0x20c5cc(_0x2a0a18['_children'][_0x15efa5]);};_0x20c5cc(_0x2c341f);}set['animation'](_0x54535d){this['_animation']=_0x54535d,this['currentTim'+'e']=0x1*-0x222+0x16*-0xf9+0x1788;}get['animation'](){return this['_animation'];}set['currentTim'+'e'](_0x160657){this['_time']=_0x160657;const _0x1ff69b=this['_interpola'+'tedKeys']['length'];for(let _0x54b187=-0x1b8d+0x1*-0x1f51+0xbc6*0x5;_0x54b187<_0x1ff69b;_0x54b187++){const _0x74fea=this['_interpola'+'tedKeys'][_0x54b187]['_name'];this['_currKeyIn'+'dices'][_0x74fea]=0x2*0x6a3+-0x14bc+0x776;}this['addTime'](0x895+-0x146a+0xbd5),this['updateGrap'+'h']();}get['currentTim'+'e'](){return this['_time'];}get['numNodes'](){return this['_interpola'+'tedKeys']['length'];}['addTime'](_0x1e27b7){if(this['_animation']!==null){const _0x106c0b=this['_animation']['_nodes'],_0x34c18a=this['_animation']['duration'];if(this['_time']===_0x34c18a&&!this['looping'])return;if(this['_time']+=_0x1e27b7,this['_time']>_0x34c18a){this['_time']=this['looping']?-0x1e95+-0x1ca6+0x3b3b:_0x34c18a;for(let _0x2df351=0x5*0x283+-0x265b+-0x19cc*-0x1;_0x2df351<_0x106c0b['length'];_0x2df351++){const _0x2dabdd=_0x106c0b[_0x2df351]['_name'];this['_currKeyIn'+'dices'][_0x2dabdd]=-0x1*0x82d+0x1bb6+-0x1389;}}else{if(this['_time']<-0x1*-0x1aad+0x1e1b+-0x278*0x17){this['_time']=this['looping']?_0x34c18a:-0xc9f*0x1+-0x1*0xd15+0x19b4*0x1;for(let _0x268a9e=-0x189*0x6+-0x1*-0x1c5+0x771;_0x268a9e<_0x106c0b['length'];_0x268a9e++){const _0x4fc12b=_0x106c0b[_0x268a9e],_0x239c44=_0x4fc12b['_name'];this['_currKeyIn'+'dices'][_0x239c44]=_0x4fc12b['_keys']['length']-(-0x8e*-0x5+0x1*-0x92f+0x66b);}}}const _0x276df5=_0x1e27b7>=-0x10d2+-0x10fe+0x21d0*0x1?-0xc46*0x1+0x8b6+0x391:-(0x3*0x92d+-0x123e*0x2+0x8f6);for(let _0x586273=0x28f+0x26d1+-0x2960;_0x586273<_0x106c0b['length'];_0x586273++){const _0x2a1327=_0x106c0b[_0x586273],_0x402a00=_0x2a1327['_name'],_0x24c9c6=_0x2a1327['_keys'],_0x31e61a=this['_interpola'+'tedKeyDict'][_0x402a00];if(_0x31e61a===void(-0x1*0xbb7+-0x1*-0x13ae+-0x7f7)){w['warn']('Unknown\x20sk'+'eleton\x20nod'+'e\x20name:\x20'+_0x402a00);continue;}let _0x582e6d=!(-0x3*0x6d5+0x1*-0x17f3+0x2c73);if(_0x24c9c6['length']!==0x6b1+-0xbfb+-0x1*-0x54b)for(let _0x9e1ffd=this['_currKeyIn'+'dices'][_0x402a00];_0x9e1ffd<_0x24c9c6['length']-(0xe3*-0x13+-0x18bb+0x2995)&&_0x9e1ffd>=-0x22f4*-0x1+0x95a+-0x2c4e;_0x9e1ffd+=_0x276df5){const _0x8c58f5=_0x24c9c6[_0x9e1ffd],_0x584d67=_0x24c9c6[_0x9e1ffd+(0x322+-0x9f2+0x6d1)];if(_0x8c58f5['time']<=this['_time']&&_0x584d67['time']>=this['_time']){const _0x2e50e2=(this['_time']-_0x8c58f5['time'])/(_0x584d67['time']-_0x8c58f5['time']);_0x31e61a['_pos']['lerp'](_0x8c58f5['position'],_0x584d67['position'],_0x2e50e2),_0x31e61a['_quat']['slerp'](_0x8c58f5['rotation'],_0x584d67['rotation'],_0x2e50e2),_0x31e61a['_scale']['lerp'](_0x8c58f5['scale'],_0x584d67['scale'],_0x2e50e2),_0x31e61a['_written']=!(-0x84b*0x3+-0x5*0x262+0x24cb*0x1),this['_currKeyIn'+'dices'][_0x402a00]=_0x9e1ffd,_0x582e6d=!(-0x2*-0xa3e+-0x8a*-0x3e+0x1e*-0x1cc);break;}}(_0x24c9c6['length']===0x371+0x1d01+-0x1*0x2071||!_0x582e6d&&this['_time']===0x4c2+0x8a2+-0xd64&&this['looping'])&&(_0x31e61a['_pos']['copy'](_0x24c9c6[-0x7d+-0xae6+0xb63]['position']),_0x31e61a['_quat']['copy'](_0x24c9c6[0x2*-0xc91+0x1*-0x10f+0x2e9*0x9]['rotation']),_0x31e61a['_scale']['copy'](_0x24c9c6[-0x2210+0x1*-0x1bc+-0x13c*-0x1d]['scale']),_0x31e61a['_written']=!(0x5*0x122+-0x1*0x27+0x583*-0x1));}}}['blend'](_0x1ec227,_0x304de1,_0x3b1a99){const _0x2f5f0c=this['_interpola'+'tedKeys']['length'];for(let _0x2a82bf=0x321*-0xa+-0x235f+-0x1*-0x42a9;_0x2a82bf<_0x2f5f0c;_0x2a82bf++){const _0x3ea9e5=_0x1ec227['_interpola'+'tedKeys'][_0x2a82bf],_0x1e3513=_0x304de1['_interpola'+'tedKeys'][_0x2a82bf],_0x2b4b01=this['_interpola'+'tedKeys'][_0x2a82bf];_0x3ea9e5['_written']&&_0x1e3513['_written']?(_0x2b4b01['_quat']['slerp'](_0x3ea9e5['_quat'],_0x304de1['_interpola'+'tedKeys'][_0x2a82bf]['_quat'],_0x3b1a99),_0x2b4b01['_pos']['lerp'](_0x3ea9e5['_pos'],_0x304de1['_interpola'+'tedKeys'][_0x2a82bf]['_pos'],_0x3b1a99),_0x2b4b01['_scale']['lerp'](_0x3ea9e5['_scale'],_0x1e3513['_scale'],_0x3b1a99),_0x2b4b01['_written']=!(0x9*-0x1d6+-0x2c*0x44+0x1c36)):_0x3ea9e5['_written']?(_0x2b4b01['_quat']['copy'](_0x3ea9e5['_quat']),_0x2b4b01['_pos']['copy'](_0x3ea9e5['_pos']),_0x2b4b01['_scale']['copy'](_0x3ea9e5['_scale']),_0x2b4b01['_written']=!(-0x920+0x1ff5+-0x16d5)):_0x1e3513['_written']&&(_0x2b4b01['_quat']['copy'](_0x1e3513['_quat']),_0x2b4b01['_pos']['copy'](_0x1e3513['_pos']),_0x2b4b01['_scale']['copy'](_0x1e3513['_scale']),_0x2b4b01['_written']=!(0x2*-0x2f2+0xa*-0xb5+0x9e*0x15));}}['setGraph'](_0x371710){if(this['graph']=_0x371710,_0x371710)for(let _0x333659=-0x1ca*0x5+-0x15ef*0x1+0x1ee1;_0x333659<this['_interpola'+'tedKeys']['length'];_0x333659++){const _0x32ca4e=this['_interpola'+'tedKeys'][_0x333659],_0x1c331e=_0x371710['findByName'](_0x32ca4e['_name']);this['_interpola'+'tedKeys'][_0x333659]['setTarget'](_0x1c331e);}else{for(let _0xff2219=-0x4*-0x76d+-0x1*0x43a+-0x197a;_0xff2219<this['_interpola'+'tedKeys']['length'];_0xff2219++)this['_interpola'+'tedKeys'][_0xff2219]['setTarget'](null);}}['updateGrap'+'h'](){if(this['graph'])for(let _0x7ac6b1=-0x1*-0x26c0+0x1*-0x983+-0x1d3d;_0x7ac6b1<this['_interpola'+'tedKeys']['length'];_0x7ac6b1++){const _0x117c2e=this['_interpola'+'tedKeys'][_0x7ac6b1];if(_0x117c2e['_written']){const _0x2e7cbc=_0x117c2e['getTarget']();_0x2e7cbc['localPosit'+'ion']['copy'](_0x117c2e['_pos']),_0x2e7cbc['localRotat'+'ion']['copy'](_0x117c2e['_quat']),_0x2e7cbc['localScale']['copy'](_0x117c2e['_scale']),_0x2e7cbc['_dirtyLoca'+'l']||_0x2e7cbc['_dirtifyLo'+'cal'](),_0x117c2e['_written']=!(-0x1a1*-0x1+-0x7db+0x91*0xb);}}}}const Bs=(0x1*-0x1509+0x4*0xc7+0x11f1)/(-0x11fa+0x1a82+-0x848),si=0x114b*0x2+0x217b+-0x4410-Bs*(0x257*0x1+0x3ac*0x6+-0x81f*0x3);class Wp extends ga{constructor(_0x456ea8,_0x3c3761,_0x4f2767,_0x2e8d09,_0x1f1912,_0x1fb7a0){super();const _0x256b8c=new D(),_0x29f2ae=new D(),_0x5c3344=new D(),_0x34abbc=new D(),_0x4229d4=new D(),_0x4ff680=new D(),_0x4e554f=[],_0x5ee3fc=[],_0x53d57b=[],_0x3b21df=[],_0x2475a1=[];let _0x291ce2;if(_0x4f2767>-0xc*-0x55+-0x1*-0x1a8c+-0x2*0xf44){for(let _0x33a7ac=0x61c*-0x2+0x200b+-0x13d3;_0x33a7ac<=_0x2e8d09;_0x33a7ac++)for(let _0x1ac953=0xb5*0x1a+-0x11*-0x1df+-0x10bb*0x3;_0x1ac953<=_0x1f1912;_0x1ac953++){const _0x5a45c9=_0x1ac953/_0x1f1912*(-0x137e+-0x33f+0x16bf)*Math['PI']-Math['PI'],_0x1cfef2=Math['sin'](_0x5a45c9),_0x2b617c=Math['cos'](_0x5a45c9);_0x4229d4['set'](_0x1cfef2*_0x456ea8,-_0x4f2767/(-0xe8e+0x90c+0x584),_0x2b617c*_0x456ea8),_0x34abbc['set'](_0x1cfef2*_0x3c3761,_0x4f2767/(0x9*-0x168+0x25*0x1f+0x1a3*0x5),_0x2b617c*_0x3c3761),_0x256b8c['lerp'](_0x4229d4,_0x34abbc,_0x33a7ac/_0x2e8d09),_0x29f2ae['sub2'](_0x34abbc,_0x4229d4)['normalize'](),_0x4ff680['set'](_0x2b617c,-0x1822*-0x1+0x1*-0x11e6+0x85*-0xc,-_0x1cfef2),_0x5c3344['cross'](_0x4ff680,_0x29f2ae)['normalize'](),_0x4e554f['push'](_0x256b8c['x'],_0x256b8c['y'],_0x256b8c['z']),_0x5ee3fc['push'](_0x5c3344['x'],_0x5c3344['y'],_0x5c3344['z']);let _0x58d793=_0x1ac953/_0x1f1912,_0x585461=_0x33a7ac/_0x2e8d09;_0x53d57b['push'](_0x58d793,0x1b6d+0x1b9*-0x1+0x19b3*-0x1-_0x585461);const _0x3f07a4=_0x585461;if(_0x585461=_0x58d793,_0x58d793=_0x3f07a4,_0x58d793=_0x58d793*si+Bs,_0x585461=_0x585461*si+Bs,_0x58d793/=-0x1bb+0x5b*0x1+0x163,_0x3b21df['push'](_0x58d793,-0x11e7*0x1+-0x10a*0x1f+0x321e-_0x585461),_0x33a7ac<_0x2e8d09&&_0x1ac953<_0x1f1912){const _0x5566e8=_0x33a7ac*(_0x1f1912+(0x1*0x1bb5+0xd67+-0x291b*0x1))+_0x1ac953,_0x144a5f=_0x33a7ac*(_0x1f1912+(-0x320+-0x1118+0x1439))+(_0x1ac953+(-0x154e+-0x17*-0x1+0x1538)),_0x82c06d=(_0x33a7ac+(-0x1661+0x1241*0x1+0x421))*(_0x1f1912+(0x1*-0x1281+0x7ac+0xad6))+_0x1ac953,_0x9d75fb=(_0x33a7ac+(-0x3*-0x4cb+0x73c+-0x159c))*(_0x1f1912+(-0x378+-0x147c+0x17f5))+(_0x1ac953+(-0x12c0+-0x736+0x19f7));_0x2475a1['push'](_0x5566e8,_0x144a5f,_0x82c06d),_0x2475a1['push'](_0x144a5f,_0x9d75fb,_0x82c06d);}}}if(_0x1fb7a0){const _0x54436e=Math['floor'](_0x1f1912/(0x18*-0x98+0x1862+0x3*-0x360)),_0x1c4cdb=_0x1f1912,_0x39a71d=_0x4f2767/(-0x2484+-0x99*0xd+-0x1d*-0x187);for(let _0x36b605=0x43b+0x1e67+0x22a2*-0x1;_0x36b605<=_0x54436e;_0x36b605++){const _0x2cad9c=_0x36b605*Math['PI']*(0xa1*0x2+-0x4*-0x8ec+-0x24f2+0.5)/_0x54436e,_0x575acb=Math['sin'](_0x2cad9c),_0x36a9ed=Math['cos'](_0x2cad9c);for(let _0x2ffc26=0x1c91+0x242e+0x19*-0x297;_0x2ffc26<=_0x1c4cdb;_0x2ffc26++){const _0x2ad041=_0x2ffc26*(0x1503*0x1+-0x26fe+0x11fd)*Math['PI']/_0x1c4cdb-Math['PI']/(0xe6*0xc+0x224c+-0x2d12),_0x55e250=Math['sin'](_0x2ad041),_0x279dee=Math['cos'](_0x2ad041)*_0x575acb,_0x38f074=_0x36a9ed,_0x10a5c1=_0x55e250*_0x575acb;let _0x5c1d3a=0x1a3a+-0x1*0x1c37+0x1e*0x11-_0x2ffc26/_0x1c4cdb,_0x4e89be=0xc88+-0x1aa6+0xe1f-_0x36b605/_0x54436e;_0x4e554f['push'](_0x279dee*_0x3c3761,_0x38f074*_0x3c3761+_0x39a71d,_0x10a5c1*_0x3c3761),_0x5ee3fc['push'](_0x279dee,_0x38f074,_0x10a5c1),_0x53d57b['push'](_0x5c1d3a,-0x1ae1+0x1*-0x795+0x2277-_0x4e89be),_0x5c1d3a=_0x5c1d3a*si+Bs,_0x4e89be=_0x4e89be*si+Bs,_0x5c1d3a/=0x5*0x3fd+0x1*-0x225+0x11c9*-0x1,_0x4e89be/=-0x100a+0x2*-0xee3+0x1*0x2dd3,_0x5c1d3a+=(0x1450+-0x1*0x13+-0x143c)/(-0x106+-0x4*-0x311+0x23f*-0x5),_0x3b21df['push'](_0x5c1d3a,-0x622*0x3+-0x120*-0x5+0xcc7-_0x4e89be);}}_0x291ce2=(_0x2e8d09+(0x25a0+-0x9a6+-0x1bf9))*(_0x1f1912+(0x2*0x729+-0x1864+0xa13*0x1));for(let _0x398420=-0x20b2+0x1*-0x1b46+0x4*0xefe;_0x398420<_0x54436e;++_0x398420)for(let _0x5aa423=0x3fb*0x2+-0x21fe+0x1a08;_0x5aa423<_0x1c4cdb;++_0x5aa423){const _0x578c12=_0x398420*(_0x1c4cdb+(-0xb7f+0x1*-0x1136+0x2a*0xaf))+_0x5aa423,_0x896221=_0x578c12+_0x1c4cdb+(-0x10fd*-0x1+0x35c+0xf8*-0x15);_0x2475a1['push'](_0x291ce2+_0x578c12+(0xbca+-0x3ec+-0xb*0xb7),_0x291ce2+_0x896221,_0x291ce2+_0x578c12),_0x2475a1['push'](_0x291ce2+_0x578c12+(0x1e42*-0x1+-0x910+0x2753),_0x291ce2+_0x896221+(0x298*-0x1+0x1820+0xb*-0x1f5),_0x291ce2+_0x896221);}for(let _0x3b4986=-0x270a+-0x435+-0x2b3f*-0x1;_0x3b4986<=_0x54436e;_0x3b4986++){const _0x2b5d53=Math['PI']*(-0x1df9+0xdb7+0x1042+0.5)+_0x3b4986*Math['PI']*(-0x1e23+0xa*-0xa5+-0x751*-0x5+0.5)/_0x54436e,_0x50b00b=Math['sin'](_0x2b5d53),_0x55a536=Math['cos'](_0x2b5d53);for(let _0x8f1de0=0x1c8*-0xa+-0x1359+-0x3*-0xc63;_0x8f1de0<=_0x1c4cdb;_0x8f1de0++){const _0x3aac30=_0x8f1de0*(0xd*0x15+-0x1*-0x2009+0xc*-0x2c2)*Math['PI']/_0x1c4cdb-Math['PI']/(0x4*-0x4e8+0x756+0xc4c),_0x8815a7=Math['sin'](_0x3aac30),_0x3035a6=Math['cos'](_0x3aac30)*_0x50b00b,_0x317d7d=_0x55a536,_0x4cefdd=_0x8815a7*_0x50b00b;let _0x519d1e=0x19ed+0x4c*-0x7e+-0x5be*-0x2-_0x8f1de0/_0x1c4cdb,_0x55b691=0x984+0xc22+-0x15a5*0x1-_0x3b4986/_0x54436e;_0x4e554f['push'](_0x3035a6*_0x3c3761,_0x317d7d*_0x3c3761-_0x39a71d,_0x4cefdd*_0x3c3761),_0x5ee3fc['push'](_0x3035a6,_0x317d7d,_0x4cefdd),_0x53d57b['push'](_0x519d1e,-0xd70+-0x1f*0xb7+0x239a-_0x55b691),_0x519d1e=_0x519d1e*si+Bs,_0x55b691=_0x55b691*si+Bs,_0x519d1e/=-0x2*-0x106+-0xf9d+-0x4*-0x365,_0x55b691/=-0xf6a*-0x2+0x1*0x161b+-0x34ec,_0x519d1e+=(0x11ab+0x133*0x11+-0x260c)/(0xc*0x73+0x2*0x1bb+-0x1f*0x49),_0x3b21df['push'](_0x519d1e,0xe2e+0x554+-0x1381-_0x55b691);}}_0x291ce2=(_0x2e8d09+(0x1bb2+-0x1f59+0x3a8))*(_0x1f1912+(-0x1*0x1901+0x24f4+-0xbf2))+(_0x1c4cdb+(0x1b*0x128+-0x1*-0x1f+-0xa72*0x3))*(_0x54436e+(-0x10fb+-0x180d*0x1+0x1*0x2909));for(let _0x47eea2=-0x336+0x1*0x1403+-0x10cd;_0x47eea2<_0x54436e;++_0x47eea2)for(let _0x244818=0x1*0x1cb4+0x2397*0x1+-0x404b;_0x244818<_0x1c4cdb;++_0x244818){const _0x6f2f23=_0x47eea2*(_0x1c4cdb+(0x1bd1+-0x1*0x1136+-0x3b*0x2e))+_0x244818,_0x20ac95=_0x6f2f23+_0x1c4cdb+(-0x1055+0x1*0x1e99+-0xe43);_0x2475a1['push'](_0x291ce2+_0x6f2f23+(0xdcc*-0x2+0x2bd*0x9+0x12*0x2a),_0x291ce2+_0x20ac95,_0x291ce2+_0x6f2f23),_0x2475a1['push'](_0x291ce2+_0x6f2f23+(0x1*-0x271+-0x248c+-0x142*-0x1f),_0x291ce2+_0x20ac95+(-0xfe*-0x1f+-0x1b40+-0x12b*0x3),_0x291ce2+_0x20ac95);}}else{if(_0x291ce2=(_0x2e8d09+(0x1*-0x780+0xdc8+0x1*-0x647))*(_0x1f1912+(0x42e*0x3+0x7*0x2d5+-0x205c)),_0x456ea8>-0x2*0x2a5+-0x742+0x2c*0x49)for(let _0x15dde8=0x1713+-0x1faa+0x897;_0x15dde8<_0x1f1912;_0x15dde8++){const _0x47ec6e=_0x15dde8/_0x1f1912*(0x3*0x17+0x13ab+0x13ee*-0x1)*Math['PI'],_0x2aca52=Math['sin'](_0x47ec6e),_0x458728=-_0x4f2767/(0x793*0x1+0x46b+-0xbfc),_0xafaebb=Math['cos'](_0x47ec6e);let _0x5268d6=0x947+-0x6b*0x38+0xe22-(_0x2aca52+(0x145*0x12+0x9*0x365+-0x3566))/(0x1a59+-0xa64+-0x1*0xff3),_0x455c01=(_0xafaebb+(-0x106+-0x165a+0x1*0x1761))/(0x1*0x742+-0x23a+-0x506);_0x4e554f['push'](_0x2aca52*_0x456ea8,_0x458728,_0xafaebb*_0x456ea8),_0x5ee3fc['push'](-0x23c7+-0xaea+-0x2eb1*-0x1,-(-0x23b5+0x273*-0xd+0x438d),-0x1*-0x143b+-0xfb3+0x244*-0x2),_0x53d57b['push'](_0x5268d6,0x15a*-0x16+0xaa9*-0x3+0x3db8-_0x455c01),_0x5268d6=_0x5268d6*si+Bs,_0x455c01=_0x455c01*si+Bs,_0x5268d6/=-0x49*0x61+-0x171f+-0x1*-0x32cb,_0x455c01/=0x1cab+0x1e62*0x1+0x6*-0x9d7,_0x5268d6+=(-0x194e+-0x1b9c+-0x24d*-0x17)/(0x12*-0x17d+0x427+0x16a6),_0x3b21df['push'](_0x5268d6,0x1b7f+0x1*0x15af+-0x312d*0x1-_0x455c01),_0x15dde8>0xad*0x11+0x1*-0x220f+0x1693&&_0x2475a1['push'](_0x291ce2,_0x291ce2+_0x15dde8,_0x291ce2+_0x15dde8-(-0x1cef+0x1*-0x5dd+0x97*0x3b));}if(_0x291ce2+=_0x1f1912,_0x3c3761>-0x26*-0x62+-0x46b*-0x1+-0x12f7)for(let _0x23dc0b=-0x1389+0x18b0+-0x527;_0x23dc0b<_0x1f1912;_0x23dc0b++){const _0x3cca43=_0x23dc0b/_0x1f1912*(0xc9b+0x12ff*0x1+0x544*-0x6)*Math['PI'],_0x12872e=Math['sin'](_0x3cca43),_0x10e1ce=_0x4f2767/(0x5*-0x61d+0x59*0x25+-0x11b6*-0x1),_0xe1310e=Math['cos'](_0x3cca43);let _0x55f94e=0x6*0x5d8+-0x439*0x9+-0xd*-0x3a-(_0x12872e+(-0x8*0x162+0x304*-0x1+0xe15))/(0x1c6*-0xc+-0x2074+0x6*0x8f5),_0x1973be=(_0xe1310e+(-0x4*0x33f+-0x181a*-0x1+-0xb1d))/(0x1*-0x17b6+0x31*0x59+0x6af);_0x4e554f['push'](_0x12872e*_0x3c3761,_0x10e1ce,_0xe1310e*_0x3c3761),_0x5ee3fc['push'](0x3*0xc22+0x12ed+-0x3753,0x41*-0x15+0x1*-0x2601+-0x13d*-0x23,-0x17*0x109+-0x1a49+0xe*0x394),_0x53d57b['push'](_0x55f94e,0x2*-0x7bb+0x1b7*0xf+-0xa42-_0x1973be),_0x55f94e=_0x55f94e*si+Bs,_0x1973be=_0x1973be*si+Bs,_0x55f94e/=-0x238f+0x56c+0x1e26,_0x1973be/=-0x10fb*0x1+0x229e+0x11a0*-0x1,_0x55f94e+=(0x1*-0x25ce+0x195*-0x9+-0x215*-0x19)/(0xaae+-0x4*-0x7d8+-0x2a0b),_0x3b21df['push'](_0x55f94e,-0x1ea2+0xaed+0x13b6-_0x1973be),_0x23dc0b>-0x2459+0x1bfd+0x85d&&_0x2475a1['push'](_0x291ce2,_0x291ce2+_0x23dc0b-(0x20d0+0x14f1+-0x56*0xa0),_0x291ce2+_0x23dc0b);}}this['positions']=_0x4e554f,this['normals']=_0x5ee3fc,this['uvs']=_0x53d57b,this['uvs1']=_0x3b21df,this['indices']=_0x2475a1;}}class nA extends Wp{constructor(_0x10ded3={}){const _0x40e74a=_0x10ded3['radius']??-0x20db+-0xf06+0x2fe1+0.3,_0x51b697=_0x10ded3['height']??0x1*-0x3e5+-0x1*-0x26b9+-0x22d3,_0x641659=_0x10ded3['heightSegm'+'ents']??-0x1bb6+-0x19e3*-0x1+0x1d4,_0x3781e3=_0x10ded3['sides']??-0x213*0xb+-0x54d+0x1c32*0x1;super(_0x40e74a,_0x40e74a,_0x51b697-(0x1854+0x3d*0x18+0xa*-0x301)*_0x40e74a,_0x641659,_0x3781e3,!(0x21ed*-0x1+-0xf18+-0x59*-0x8d)),_0x10ded3['calculateT'+'angents']&&(this['tangents']=br(this['positions'],this['normals'],this['uvs'],this['indices']));}}class oA extends Wp{constructor(_0x1e67d3={}){const _0x3b10dc=_0x1e67d3['baseRadius']??-0x15f9+0x1a0a+-0x411*0x1+0.5,_0x35be51=_0x1e67d3['peakRadius']??-0x46b+-0x2071+-0x1*-0x24dc,_0xc58e87=_0x1e67d3['height']??-0x2af*0x3+-0xe59+0x1667*0x1,_0xf467a6=_0x1e67d3['heightSegm'+'ents']??0x7fd+-0xc96+0x49e,_0x40fcc6=_0x1e67d3['capSegment'+'s']??-0xd56*-0x1+-0x512+-0x2*0x419;super(_0x3b10dc,_0x35be51,_0xc58e87,_0xf467a6,_0x40fcc6,!(-0x3ac+0x263*-0x1+0x610)),_0x1e67d3['calculateT'+'angents']&&(this['tangents']=br(this['positions'],this['normals'],this['uvs'],this['indices']));}}class lA extends Wp{constructor(_0x5dad42={}){const _0x7bdf6d=_0x5dad42['radius']??0x244b+0x3*0x36d+-0x2e92+0.5,_0x9d5e68=_0x5dad42['height']??-0x1812+0xc79*-0x1+0x248c,_0x99fe93=_0x5dad42['heightSegm'+'ents']??0x577*-0x7+0x1a3*0xb+0x1445,_0x46eacf=_0x5dad42['capSegment'+'s']??0x36f*-0xb+0xeaf+0x172a;super(_0x7bdf6d,_0x7bdf6d,_0x9d5e68,_0x99fe93,_0x46eacf,!(0x349*0x7+-0x1*0x18e5+0x1e7*0x1)),_0x5dad42['calculateT'+'angents']&&(this['tangents']=br(this['positions'],this['normals'],this['uvs'],this['indices']));}}class cA extends ga{constructor(_0x57eea7={}){super();const _0x23dc50=_0x57eea7['halfExtent'+'s']??new J(-0x5*-0x10d+-0x1840+-0x655*-0x3+0.5,-0x17a0+0x305*0x3+0xe91+0.5),_0x437d11=_0x57eea7['widthSegme'+'nts']??0x13*0x11e+0xcb+0xb00*-0x2,_0x1b605f=_0x57eea7['lengthSegm'+'ents']??0x1121+-0x5b*-0xb+-0x1505,_0x57c82e=[],_0x586fd6=[],_0x45e8e9=[],_0xaba711=[];let _0x5f236d=-0xbfb*-0x3+-0x767+-0x1c8a;for(let _0x10ac05=-0x560*0x5+-0x42d*0x8+0x4*0xf12;_0x10ac05<=_0x437d11;_0x10ac05++)for(let _0x2396a8=0x2405+0x743+-0x14*0x22a;_0x2396a8<=_0x1b605f;_0x2396a8++){const _0x2627c7=-_0x23dc50['x']+(-0x121e+-0x1*-0x1db7+-0x3dd*0x3)*_0x23dc50['x']*_0x10ac05/_0x437d11,_0x379eb1=0x7f9*-0x4+0xcda+-0x985*-0x2,_0x1ca2d6=-(-_0x23dc50['y']+(0x1cdd+-0x1*-0x111d+-0x2*0x16fc)*_0x23dc50['y']*_0x2396a8/_0x1b605f),_0x455ed7=_0x10ac05/_0x437d11,_0x4fc0fb=_0x2396a8/_0x1b605f;_0x57c82e['push'](_0x2627c7,_0x379eb1,_0x1ca2d6),_0x586fd6['push'](-0x11ed+-0x409*0x1+0x15f6,0x2*-0x472+0x776+0x16f,-0x4a*-0x15+-0x6c9*0x3+0xe49),_0x45e8e9['push'](_0x455ed7,0x1*0xf77+0x16b4*-0x1+0x73e-_0x4fc0fb),_0x10ac05<_0x437d11&&_0x2396a8<_0x1b605f&&(_0xaba711['push'](_0x5f236d+_0x1b605f+(0x1f69*0x1+-0xfd2+0xbe*-0x15),_0x5f236d+(-0x639+-0x197*-0x1+0x4a3*0x1),_0x5f236d),_0xaba711['push'](_0x5f236d+_0x1b605f+(-0xad+0x890+-0x7e2),_0x5f236d+_0x1b605f+(0x1*-0x161f+-0x1*-0x2b4+-0x1*-0x136d),_0x5f236d+(-0x1935*0x1+0x15aa+0x38c))),_0x5f236d++;}this['positions']=_0x57c82e,this['normals']=_0x586fd6,this['uvs']=_0x45e8e9,this['uvs1']=_0x45e8e9,this['indices']=_0xaba711,_0x57eea7['calculateT'+'angents']&&(this['tangents']=br(_0x57c82e,_0x586fd6,_0x45e8e9,_0xaba711));}}class hA extends ga{constructor(_0x4e21af={}){super();const _0x4998a6=_0x4e21af['tubeRadius']??0x1abc+-0x110b+-0x9b1+0.2,_0xbb3131=_0x4e21af['ringRadius']??-0x1449+-0x2*-0x687+0x73b+0.3,_0x54996b=(_0x4e21af['sectorAngl'+'e']??0x2552+0x12d9*-0x1+-0x1111)*Y['DEG_TO_RAD'],_0x1bb53b=_0x4e21af['segments']??0xe7*-0x9+-0x8c1*-0x1+0x84*-0x1,_0x501788=_0x4e21af['sides']??0x13+0x2*-0x429+0x1*0x853,_0x205a5d=[],_0x404c8a=[],_0x6116=[],_0x503bb5=[];for(let _0xadfebf=-0x1*0x1da2+-0x10f1*-0x1+0xcb1;_0xadfebf<=_0x501788;_0xadfebf++)for(let _0x1551ff=0x2*-0x8c2+0xde4*-0x1+0x3ed*0x8;_0x1551ff<=_0x1bb53b;_0x1551ff++){const _0x1a9076=Math['cos'](_0x54996b*_0x1551ff/_0x1bb53b)*(_0xbb3131+_0x4998a6*Math['cos']((0x5d1*-0x1+0x1523*-0x1+0x1af6)*Math['PI']*_0xadfebf/_0x501788)),_0x138239=Math['sin']((-0xd3*-0xb+-0xd*0x8+-0x8a7)*Math['PI']*_0xadfebf/_0x501788)*_0x4998a6,_0x403122=Math['sin'](_0x54996b*_0x1551ff/_0x1bb53b)*(_0xbb3131+_0x4998a6*Math['cos']((0x52e+0x1ccf+-0x21fb)*Math['PI']*_0xadfebf/_0x501788)),_0x346ade=Math['cos'](_0x54996b*_0x1551ff/_0x1bb53b)*Math['cos']((0x669*-0x4+-0x1fcd*-0x1+0x7*-0xe1)*Math['PI']*_0xadfebf/_0x501788),_0x1ef6bd=Math['sin']((-0x13*-0x13c+-0x1*0x213a+0x2*0x4e4)*Math['PI']*_0xadfebf/_0x501788),_0xac9516=Math['sin'](_0x54996b*_0x1551ff/_0x1bb53b)*Math['cos']((0x1394+-0x1*-0xd8b+0x211d*-0x1)*Math['PI']*_0xadfebf/_0x501788),_0x35e002=_0xadfebf/_0x501788,_0x128ef6=-0xebd+0x6a*0x3b+0x26c*-0x4-_0x1551ff/_0x1bb53b;if(_0x205a5d['push'](_0x1a9076,_0x138239,_0x403122),_0x404c8a['push'](_0x346ade,_0x1ef6bd,_0xac9516),_0x6116['push'](_0x35e002,-0x22f6+0x24cd+0x5e*-0x5-_0x128ef6),_0xadfebf<_0x501788&&_0x1551ff<_0x1bb53b){const _0x3d53e4=_0xadfebf*(_0x1bb53b+(0x17be+0x13bb+-0x2b78))+_0x1551ff,_0x45f606=(_0xadfebf+(-0x625+0x1*0xbc1+-0x59b))*(_0x1bb53b+(0x4b*-0x6d+-0x26fc+0x46ec))+_0x1551ff,_0x3fa1b8=_0xadfebf*(_0x1bb53b+(-0x32*-0x98+-0x1*-0xe9+-0x1e98))+(_0x1551ff+(0x2e*0x1a+-0x3*0xe9+-0x1f0)),_0x47fba6=(_0xadfebf+(-0x202e+-0x3*-0x74a+0xa51))*(_0x1bb53b+(0xcb3*-0x3+-0x1f*-0x102+0x6dc))+(_0x1551ff+(0x89*0x3b+0x45*0x3d+-0x3003));_0x503bb5['push'](_0x3d53e4,_0x45f606,_0x3fa1b8),_0x503bb5['push'](_0x45f606,_0x47fba6,_0x3fa1b8);}}this['positions']=_0x205a5d,this['normals']=_0x404c8a,this['uvs']=_0x6116,this['uvs1']=_0x6116,this['indices']=_0x503bb5,_0x4e21af['calculateT'+'angents']&&(this['tangents']=br(_0x205a5d,_0x404c8a,_0x6116,_0x503bb5));}}class dA{constructor(_0x5bd738,_0x39eb09){h(this,'processedC'+'ache',new Map()),h(this,'definition'+'sCache',new Map()),h(this,'_generator'+'s',new Map()),(this['_device']=_0x5bd738,this['_isClearin'+'gCache']=!(-0x577+-0x3*0x137+-0x1*-0x91d),this['_precached']=!(-0x1*0x8c+-0x1*-0x1233+-0x11a6),this['_programsC'+'ollection']=[],this['_defaultSt'+'dMatOption']=new Qo(),this['_defaultSt'+'dMatOption'+'Min']=new Qo());const _0x2e597=new Uy();_0x39eb09['shaderOptB'+'uilder']['updateRef'](this['_defaultSt'+'dMatOption'],{},_0x2e597,_0x39eb09,null,[],xa,null),_0x39eb09['shaderOptB'+'uilder']['updateMinR'+'ef'](this['_defaultSt'+'dMatOption'+'Min'],{},_0x39eb09,null,Np,null),_0x5bd738['on']('destroy:sh'+'ader',_0x6e8fca=>{this['removeFrom'+'Cache'](_0x6e8fca);});}['destroy'](){this['clearCache']();}['register'](_0x1d52bf,_0x3bc308){this['_generator'+'s']['has'](_0x1d52bf)||this['_generator'+'s']['set'](_0x1d52bf,_0x3bc308);}['unregister'](_0x3fefa9){this['_generator'+'s']['has'](_0x3fefa9)&&this['_generator'+'s']['delete'](_0x3fefa9);}['isRegister'+'ed'](_0x53b382){return this['_generator'+'s']['has'](_0x53b382);}['generateSh'+'aderDefini'+'tion'](_0x55f246,_0xdaeae5,_0x48a321,_0x57c11a){var _0x278cf1,_0x4411de;let _0x57d534=this['definition'+'sCache']['get'](_0x48a321);if(!_0x57d534){let _0x5415a2;(_0x278cf1=_0x57c11a['litOptions'])!=null&&_0x278cf1['lights']&&(_0x5415a2=_0x57c11a['litOptions']['lights'],_0x57c11a['litOptions']['lights']=_0x5415a2['map'](_0x1d741d=>{const _0x5611ab=_0x1d741d['clone']?_0x1d741d['clone']():_0x1d741d;return _0x5611ab['key']=_0x1d741d['key'],_0x5611ab;})),this['storeNewPr'+'ogram'](_0xdaeae5,_0x57c11a),(_0x4411de=_0x57c11a['litOptions'])!=null&&_0x4411de['lights']&&(_0x57c11a['litOptions']['lights']=_0x5415a2),this['_precached']&&w['log']('ProgramLib'+'rary#getPr'+'ogram:\x20Cac'+'he\x20miss\x20fo'+'r\x20shader\x20'+_0xdaeae5+'\x20key\x20'+_0x48a321+('\x20after\x20sha'+'ders\x20preca'+'ching'));const _0x1e3095=this['_device'];_0x57d534=_0x55f246['createShad'+'erDefiniti'+'on'](_0x1e3095,_0x57c11a),_0x57d534['name']=_0x57d534['name']??(_0x57c11a['pass']?_0xdaeae5+'-pass:'+_0x57c11a['pass']:_0xdaeae5),this['definition'+'sCache']['set'](_0x48a321,_0x57d534);}return _0x57d534;}['getCachedS'+'hader'](_0x5afcb2){return this['processedC'+'ache']['get'](_0x5afcb2);}['setCachedS'+'hader'](_0x40f89b,_0x412433){this['processedC'+'ache']['set'](_0x40f89b,_0x412433);}['getProgram'](_0x5ceeea,_0x1b7518,_0x42c268,_0xb4dbad){const _0x5a1e2f=this['_generator'+'s']['get'](_0x5ceeea);if(!_0x5a1e2f)return w['warn']('ProgramLib'+'rary#getPr'+'ogram:\x20No\x20'+'program\x20li'+'brary\x20func'+'tions\x20regi'+'stered\x20for'+':\x20'+_0x5ceeea),null;const _0x28694f=_0x5a1e2f['generateKe'+'y'](_0x1b7518),_0xa96fb7=hi(_0x28694f),_0x3dc3d9=_0x42c268['generateKe'+'y'](this['_device']),_0xc65a32=hi(_0x3dc3d9),_0x590c9b=_0xa96fb7+'#'+_0xc65a32;let _0x5402ab=this['getCachedS'+'hader'](_0x590c9b);if(!_0x5402ab){const _0x2872e7=this['generateSh'+'aderDefini'+'tion'](_0x5a1e2f,_0x5ceeea,_0xa96fb7,_0x1b7518);w['assert'](_0x2872e7);let _0xa89b84='',_0x542337;_0x1b7518['pass']!==void(0x7cf+0x123*0xd+-0x1696)&&(_0x542337=Si['get'](this['_device'])['getByIndex'](_0x1b7518['pass']),_0xa89b84='-'+_0x542337['name']),this['_device']['fire']('shader:gen'+'erate',{'userMaterialId':_0xb4dbad,'shaderPassInfo':_0x542337,'definition':_0x2872e7});const _0x4e6bdc={'name':''+_0x2872e7['name']+_0xa89b84+'-proc','attributes':_0x2872e7['attributes'],'vshader':_0x2872e7['vshader'],'vincludes':_0x2872e7['vincludes'],'fincludes':_0x2872e7['fincludes'],'fshader':_0x2872e7['fshader'],'processingOptions':_0x42c268,'shaderLanguage':_0x2872e7['shaderLang'+'uage'],'meshUniformBufferFormat':_0x2872e7['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x2872e7['meshBindGr'+'oupFormat']};_0x5402ab=new dy(this['_device'],_0x4e6bdc),w['call'](()=>{_0x5402ab['_generatio'+'nKey']=_0x28694f,_0x5402ab['_processin'+'gKey']=_0x3dc3d9;}),this['setCachedS'+'hader'](_0x590c9b,_0x5402ab);}return _0x5402ab;}['storeNewPr'+'ogram'](_0x300e1e,_0x1d240a){let _0x1861ef={};if(_0x300e1e==='standard'){const _0x32c0c1=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x1d240a['pass']);for(const _0x30c90c in _0x1d240a)(_0x1d240a['hasOwnProp'+'erty'](_0x30c90c)&&_0x32c0c1[_0x30c90c]!==_0x1d240a[_0x30c90c]||_0x30c90c==='pass')&&(_0x1861ef[_0x30c90c]=_0x1d240a[_0x30c90c]);for(const _0x1314c4 in _0x1d240a['litOptions'])_0x1861ef[_0x1314c4]=_0x1d240a['litOptions'][_0x1314c4];}else _0x1861ef=_0x1d240a;this['_programsC'+'ollection']['push'](JSON['stringify']({'name':_0x300e1e,'options':_0x1861ef}));}['dumpProgra'+'ms'](){let _0x4c5528='let\x20device'+'\x20=\x20pc.app\x20'+'?\x20pc.app.g'+'raphicsDev'+'ice\x20:\x20pc.A'+'pplication'+'.getApplic'+'ation().gr'+'aphicsDevi'+'ce;\x0a';_0x4c5528+='let\x20shader'+'s\x20=\x20[',this['_programsC'+'ollection'][0x2621+0x178e+-0x3daf*0x1]&&(_0x4c5528+='\x0a\x09'+this['_programsC'+'ollection'][0x1*0x7e4+0x2531+-0x2d15]);for(let _0x1608d6=-0x73a*-0x2+-0x20e1+0x151*0xe;_0x1608d6<this['_programsC'+'ollection']['length'];++_0x1608d6)_0x4c5528+=',\x0a\x09'+this['_programsC'+'ollection'][_0x1608d6];_0x4c5528+='\x0a];\x0a',_0x4c5528+='pc.getProg'+'ramLibrary'+'(device).p'+'recompile('+'shaders);\x0a',_0x4c5528+='if\x20(pc.ver'+'sion\x20!=\x20\x22'+sn+('\x22\x20||\x20pc.re'+'vision\x20!=\x20'+'\x22')+cS+'\x22)\x0a',_0x4c5528+='\x09console.w'+'arn(\x22preco'+'mpile-shad'+'ers.js:\x20en'+'gine\x20versi'+'on\x20mismatc'+'h,\x20rebuild'+'\x20shaders\x20l'+'ib\x20with\x20cu'+'rrent\x20engi'+'ne\x22);';const _0x3980b5=document['createElem'+'ent']('a');_0x3980b5['setAttribu'+'te']('href','data:text/'+'plain;char'+'set=utf-8,'+encodeURIComponent(_0x4c5528)),_0x3980b5['setAttribu'+'te']('download','precompile'+'-shaders.j'+'s'),_0x3980b5['style']['display']='none',document['body']['appendChil'+'d'](_0x3980b5),_0x3980b5['click'](),document['body']['removeChil'+'d'](_0x3980b5);}['clearCache'](){this['_isClearin'+'gCache']=!(0x1d62*0x1+0x2090+-0x3df2),this['processedC'+'ache']['forEach'](_0x581f3d=>{_0x581f3d['destroy']();}),this['processedC'+'ache']['clear'](),this['_isClearin'+'gCache']=!(0xad2+0x1d*-0x12+0x8c7*-0x1);}['removeFrom'+'Cache'](_0x50007f){this['_isClearin'+'gCache']||this['processedC'+'ache']['forEach']((_0x4ea5d4,_0x3f5a05)=>{_0x50007f===_0x4ea5d4&&this['processedC'+'ache']['delete'](_0x3f5a05);});}['_getDefaul'+'tStdMatOpt'+'ions'](_0x553555){const _0x217520=Si['get'](this['_device'])['getByIndex'](_0x553555);return _0x553555===Wn||_0x553555===vl||_0x217520['isShadow']?this['_defaultSt'+'dMatOption'+'Min']:this['_defaultSt'+'dMatOption'];}['precompile'](_0x1cad7d){if(_0x1cad7d){const _0x44fecd=new Array(_0x1cad7d['length']);for(let _0x246416=0xc13*-0x3+-0xb1f*-0x2+-0xdfb*-0x1;_0x246416<_0x1cad7d['length'];_0x246416++){if(_0x1cad7d[_0x246416]['name']==='standard'){const _0x478d09=_0x1cad7d[_0x246416]['options'],_0x5350a5=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x478d09['pass']);for(const _0x44de1f in _0x5350a5)_0x5350a5['hasOwnProp'+'erty'](_0x44de1f)&&_0x478d09[_0x44de1f]===void(-0x19*-0xd4+-0x5b*0x1e+-0xa*0x101)&&(_0x478d09[_0x44de1f]=_0x5350a5[_0x44de1f]);}_0x44fecd[_0x246416]=this['getProgram'](_0x1cad7d[_0x246416]['name'],_0x1cad7d[_0x246416]['options']);}}this['_precached']=!(-0x1*-0x26ff+0x4b2*0x5+-0x3e79);}}async function fA(){const _0x45a561=new Float32Array(-0x1f69+-0x78*-0x41+0xf2),_0x5b65c1=new Int32Array(_0x45a561['buffer']);let _0x45a9bd=0x521*0x7+0x10ff*-0x1+-0x12e8,_0x341a2b={};self['onmessage']=async _0xf4dbfd=>{const {data:_0x59a102}=_0xf4dbfd;switch(_0x59a102['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x4469d1(_0x59a102['properties'],_0x59a102['timeIndex'],_0x59a102['timeOption']);break;case'releaseSeq'+'Data':_0x3d4c91(_0x59a102['index']);break;case'releaseAll'+'SeqData':_0x1b8bcd();break;case'destroyWor'+'ker':_0x16a973();break;}};class _0x37cb0b{constructor(_0x3afe34=0x8fe+-0x25*-0xec+0x9*-0x4ca,_0x270276=-0x264*-0xd+0x1cf4+-0x3c08,_0x429d5c=0x1*-0x281+0x1925+-0x3c6*0x6,_0x187f92=0x211b+0x11b2+-0x32cc){this['x']=_0x3afe34,this['y']=_0x270276,this['z']=_0x429d5c,this['w']=_0x187f92;}['set'](_0x3c4261,_0x5b7b3e,_0x3724e7,_0x515c44){return this['x']=_0x3c4261,this['y']=_0x5b7b3e,this['z']=_0x3724e7,this['w']=_0x515c44,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x5e2b74=this){let _0x536785=_0x5e2b74['length']();return _0x536785===0x1b49+-0xfb5*0x2+-0x1*-0x421?(this['x']=this['y']=this['z']=0x14be+0x4ef*0x1+-0x19ad,this['w']=0x2016+-0x1ee2+-0x133*0x1):(_0x536785=(0x159a+-0x1170+0x163*-0x3)/_0x536785,this['x']=_0x5e2b74['x']*_0x536785,this['y']=_0x5e2b74['y']*_0x536785,this['z']=_0x5e2b74['z']*_0x536785,this['w']=_0x5e2b74['w']*_0x536785),this;}['mulScalar'](_0x78cc2,_0x43fd8f=this){return this['x']=_0x43fd8f['x']*_0x78cc2,this['y']=_0x43fd8f['y']*_0x78cc2,this['z']=_0x43fd8f['z']*_0x78cc2,this['w']=_0x43fd8f['w']*_0x78cc2,this;}}const _0x3bfd4f=_0x129a45=>{_0x45a561[-0x9*0x278+-0x2*-0x2fa+-0x15b*-0xc]=_0x129a45;const _0x4bfaf0=_0x5b65c1[-0x1562+-0x1754+-0x165b*-0x2];let _0x191e15=_0x4bfaf0>>-0xa89+0xb*0xa3+0x398&-0x6826+-0x6497*-0x1+0x838f*0x1,_0x58717b=_0x4bfaf0>>-0x1*-0xe67+-0x391+-0xaca&0x1288+-0x1a4f+0xfc6;const _0x517a7d=_0x4bfaf0>>0x1*-0x28b+-0xfa1+0x55*0x37&-0x10*0x17e+-0x17e5*0x1+0x30c4;return _0x517a7d<-0x1475+0x1*0x2327+-0xe4b?_0x191e15:_0x517a7d>0x172+0x1fc9+-0x20ad?(_0x191e15|=0xe549+-0x9e77+0x8dd*0x6,_0x191e15|=(_0x517a7d===-0x53a*-0x7+0x1878+0x1405*-0x3?-0x1b4e+-0x16f5*-0x1+0x459:-0xaa*0x35+-0x1631+0x4*0xe59)&&_0x4bfaf0&0x611fcf+0x53a8d2*0x1+-0x1*0x34c8a2,_0x191e15):_0x517a7d<0x3*0x1f7+0x7*-0x3e2+0x15ba?(_0x58717b|=0x24fb*-0x1+-0x1c56+-0x4951*-0x1,_0x191e15|=(_0x58717b>>-0x23ba+-0x59*-0x4f+0x1*0x8b5-_0x517a7d)+(_0x58717b>>-0x666+0x1653+-0x2*0x7be-_0x517a7d&0xbe5*0x2+-0x4fd*0x1+-0x12cc),_0x191e15):(_0x191e15|=_0x517a7d-(-0x395*0x6+-0x1756+0x2d44)<<0xf45*0x1+0xa45+-0x1980|_0x58717b>>0x1*-0x126a+0x1712+-0x4a7,_0x191e15+=_0x58717b&-0x4*-0x74b+0x3a*0x9e+-0x40f7,_0x191e15);},_0x3a98f9=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x45f4c2=-0x251c+0x3f8+0x2124;_0x45f4c2<0x11e0+0x232b*-0x1+0x1178;++_0x45f4c2)if(!_0x341a2b['f_rest_'+_0x45f4c2])return _0x45f4c2;return 0x23*0xa3+-0x14f3*-0x1+0x49*-0x97;})())]??-0x2*-0x66e+0x1e4d+-0x2b29),_0x4469d1=(_0x2c2d2e,_0x25c86f,_0x2200c7)=>{const _0x51ab3e=!!_0x2c2d2e['time_index'];_0x51ab3e||(_0x2c2d2e['time_index']=new Float32Array(0x2518+-0x16*-0x45+0x1583*-0x2)),_0x45a9bd+=_0x2c2d2e['x']['length']??-0xcb6+-0x1*0x9c1+0x1677;const _0x558af0=Object['keys'](_0x2c2d2e);for(let _0x5bc2c9=0x25c0*0x1+0x26d0+-0x4c90;_0x5bc2c9<_0x558af0['length'];_0x5bc2c9++){const _0xaa8f1b=_0x558af0[_0x5bc2c9],_0x46db22=_0x2c2d2e[_0xaa8f1b],_0x3bc26d=_0x341a2b[_0xaa8f1b]??new Float32Array(0x771*-0x5+-0x4e0+0x15*0x201);if(!_0x51ab3e&&_0xaa8f1b==='time_index'){const _0x262474=new Float32Array(_0x45a9bd);_0x262474['fill'](_0x25c86f),_0x262474['set'](_0x3bc26d,0x50c+-0xd7*-0x3+-0x791),_0x341a2b[_0xaa8f1b]=_0x262474;}else{if(!_0x51ab3e&&_0x46db22&&_0xaa8f1b==='t'){const _0x3b9c95=new Float32Array(_0x45a9bd);if(_0x3b9c95['set'](_0x3bc26d,-0x1*0x1f0d+-0xf1*-0x13+0xd2a),_0x2200c7){for(let _0x385e4a=_0x3bc26d['length'];_0x385e4a<_0x45a9bd;_0x385e4a++)_0x46db22[_0x385e4a-_0x3bc26d['length']]>-(0xcbf+-0x49*0x29+-0x109)?_0x3b9c95[_0x385e4a]=_0x46db22[_0x385e4a-_0x3bc26d['length']]+_0x2200c7[(-0xc1*-0x5+0x1123+-0x14e6)*_0x25c86f]:_0x3b9c95[_0x385e4a]=_0x46db22[_0x385e4a-_0x3bc26d['length']];}_0x341a2b[_0xaa8f1b]=_0x3b9c95;}else{if(_0x46db22){const _0x41a509=new Float32Array(_0x45a9bd);_0x41a509['set'](_0x3bc26d,-0x15ae+0x2*0x66a+0x8da),_0x41a509['set'](_0x46db22,_0x3bc26d['length']),_0x341a2b[_0xaa8f1b]=_0x41a509;}}}}const _0xb05852={};Object['keys'](_0x341a2b)['forEach'](_0x5eb543=>{_0xb05852[_0x5eb543]=new Float32Array(_0x341a2b[_0x5eb543]['buffer']['slice']());});const _0x54d882=Object['keys'](_0xb05852)['map'](_0x5b9cb7=>_0xb05852[_0x5b9cb7]['buffer']),_0x38d5ff=_0x4b7c00(),_0x53e9b4=Object['keys'](_0x38d5ff)['map'](_0x2798d4=>_0x38d5ff[_0x2798d4]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0xb05852,'transformData':_0x38d5ff},_0x54d882['concat'](_0x53e9b4));},_0x4b7c00=()=>{const _0x404882=_0x341a2b['x']['length'],_0x1dd9e2=_0x341a2b['x'],_0x560f7b=_0x341a2b['y'],_0x21c09a=_0x341a2b['z'],_0x63f5c6=_0x341a2b['scale_0'],_0x4de6df=_0x341a2b['scale_1'],_0x149fae=_0x341a2b['scale_2'],_0x1154d2=_0x341a2b['rot_1'],_0x309072=_0x341a2b['rot_2'],_0x297328=_0x341a2b['rot_3'],_0x52b569=_0x341a2b['rot_0'],_0x435c80=_0x341a2b['motion_0'],_0xfca54e=_0x341a2b['motion_1'],_0x4b52c7=_0x341a2b['motion_2'],_0x1970cc=_0x341a2b['t'],_0x28a5c6=_0x341a2b['t_scale'],_0x25954c=_0x341a2b['time_index'],_0x42af50=_0x341a2b['f_dc_0'],_0xde7604=_0x341a2b['f_dc_1'],_0x473c5b=_0x341a2b['f_dc_2'],_0x1aec17=_0x341a2b['opacity'],_0x3cd2a2=(_0x1970cc==null?void(0x727*-0x5+0x1*-0x1b19+-0x9*-0x6fc):_0x1970cc['length'])>0x1ca*0x15+0x1*-0xaa4+-0x12*0x17f,_0x348272=new Float32Array(_0x404882*(-0x16*0xae+0x35b+-0x2e7*-0x4)),_0x3de3c3=new Float32Array(_0x404882*(0xf9a+-0x11*-0x119+-0x8*0x448)),_0x396e00=new Uint16Array(_0x404882*(0x47*0x71+0x44*-0x83+0x378)),_0x3b332d=new Float32Array(_0x404882*(0x15ad+0x20*-0xb1+0x76));let _0x3f0be4=null,_0x55c82f=null,_0x863734=null,_0x28c27d=null;_0x3cd2a2&&(_0x3f0be4=new Float32Array(_0x404882*(-0x4b4+-0xc5f*-0x3+-0x2066)),_0x55c82f=new Float32Array(_0x404882*(-0x1835+0x496+0x13a2)),_0x863734=new Float32Array(_0x404882*(-0x31+-0x1d98+0xee6*0x2)),_0x28c27d=new Float32Array(_0x404882));const _0x2a8985=new _0x37cb0b(-0x1fec+-0x119b+0x3187,0x57*0x5+0x995*0x3+-0x1e72,0x1d93+-0x19b8+-0x3db*0x1,-0x9c5*-0x1+0x2b*-0x9f+-0x2*-0x878);let _0x10d8eb=0x9bd+0x2247+-0x2c04,_0x23ba95=0x1b48+-0x256b+0xa23,_0x1575bf=-0x12b*0x1+0x856+-0x72b,_0x2c401a=0x1*0x12c1+-0x956*0x3+0x941*0x1,_0x2bdb37=-0xa3*0x19+0x1*-0x124c+0x1cd*0x13,_0x511c07=-0x35*0x5b+-0x43*-0x14+0x81*0x1b,_0x41a120=!(-0xb8e*0x2+0x1b*-0x12f+-0x17d*-0x25);const _0x50024d=new Float32Array(0x6*-0x2f7+0x1bf3+-0xa26),_0x51191b=new Float32Array(0x19a9*-0x1+0x1d9f+0x151*-0x3),_0x27e3d2=new Uint16Array(_0x404882*(-0x1174+-0x1cef+0x2e67)),_0xa33f52=-0xe9c+0xd*0x8f+0x759+0.28209479177387814;for(let _0x5b37aa=0x3*-0x13c+0x659+-0x2a5;_0x5b37aa<_0x404882;++_0x5b37aa){const _0x4f4116=_0x42af50[_0x5b37aa]*_0xa33f52+(-0x1e40*0x1+-0x6*-0x4bd+0x1d2+0.5),_0x450459=_0xde7604[_0x5b37aa]*_0xa33f52+(0x1*-0x1f67+0x1279+-0xa*-0x14b+0.5),_0x576b38=_0x473c5b[_0x5b37aa]*_0xa33f52+(-0xd5a+-0x1c15+0x1*0x296f+0.5),_0x346644=_0x1aec17[_0x5b37aa];_0x27e3d2[_0x5b37aa*(0x2585+-0x461+-0x1a8*0x14)+(0x1f9*-0xf+-0x5*0x1b4+-0x5*-0x79f)]=_0x3bfd4f(_0x4f4116),_0x27e3d2[_0x5b37aa*(0x1*0x117e+0x2*0x1f6+-0x1566)+(-0x1*0x1736+0x2476+0xd3f*-0x1)]=_0x3bfd4f(_0x450459),_0x27e3d2[_0x5b37aa*(-0x12f2+0x323+-0x1*-0xfd3)+(-0x193*-0x1+0x1*0x5e7+0x3bc*-0x2)]=_0x3bfd4f(_0x576b38),_0x27e3d2[_0x5b37aa*(-0xe92+0x19*-0x55+0x16e3)+(0x883*-0x2+-0x2d5+0x13de)]=_0x3bfd4f(_0x346644);const _0x1a8ba1=_0x1dd9e2[_0x5b37aa],_0x506821=_0x560f7b[_0x5b37aa],_0x244f29=_0x21c09a[_0x5b37aa],_0x4cb45c=Math['max'](_0x63f5c6[_0x5b37aa],_0x4de6df[_0x5b37aa],_0x149fae[_0x5b37aa]);if(isFinite(_0x1a8ba1)&&isFinite(_0x506821)&&isFinite(_0x244f29)&&isFinite(_0x4cb45c)){const _0xaea921=(0xa66+-0x1*0x116f+-0x259*-0x3)*Math['exp'](_0x4cb45c);_0x41a120?(_0x41a120=!(-0x3*-0x25a+-0x18eb*0x1+0x8ef*0x2),_0x10d8eb=_0x1a8ba1-_0xaea921,_0x23ba95=_0x506821-_0xaea921,_0x1575bf=_0x244f29-_0xaea921,_0x2c401a=_0x1a8ba1+_0xaea921,_0x2bdb37=_0x506821+_0xaea921,_0x511c07=_0x244f29+_0xaea921):(_0x10d8eb=Math['min'](_0x10d8eb,_0x1a8ba1-_0xaea921),_0x23ba95=Math['min'](_0x23ba95,_0x506821-_0xaea921),_0x1575bf=Math['min'](_0x1575bf,_0x244f29-_0xaea921),_0x2c401a=Math['max'](_0x2c401a,_0x1a8ba1+_0xaea921),_0x2bdb37=Math['max'](_0x2bdb37,_0x506821+_0xaea921),_0x511c07=Math['max'](_0x511c07,_0x244f29+_0xaea921));}_0x2a8985['set'](_0x1154d2[_0x5b37aa],_0x309072[_0x5b37aa],_0x297328[_0x5b37aa],_0x52b569[_0x5b37aa]),_0x2a8985['normalize'](),_0x2a8985['w']<-0x1705+0x1*0xb77+-0x66*-0x1d&&_0x2a8985['mulScalar'](-(0x1*0x15ef+0x2391+-0x397f)),_0x3de3c3[_0x5b37aa*(-0x7*0x3d+0x1a86+0x31b*-0x8)+(-0x15b*-0x1b+-0x810+-0x1c89)]=_0x1dd9e2[_0x5b37aa],_0x3de3c3[_0x5b37aa*(-0x80f+0x1c6e+-0x145c)+(0xb77+-0x1f*0x106+-0x511*-0x4)]=_0x560f7b[_0x5b37aa],_0x3de3c3[_0x5b37aa*(-0x233b+0x83*0x4a+0x54*-0x8)+(-0x1168+-0xb*0xfd+0x1c49)]=_0x21c09a[_0x5b37aa],_0x348272[_0x5b37aa*(-0x1e80+0x1414+-0xa6f*-0x1)+(0x164e+0xbc8+-0x2216)]=_0x1dd9e2[_0x5b37aa],_0x348272[_0x5b37aa*(-0x245f*-0x1+-0x579+-0x1*0x1ee3)+(0x55e*-0x2+-0x2104+-0x2bc1*-0x1)]=_0x560f7b[_0x5b37aa],_0x348272[_0x5b37aa*(0x23e3+0xae3+-0x2ec3*0x1)+(-0x1519*-0x1+0x1*0xdd9+-0x22f0)]=_0x21c09a[_0x5b37aa],_0x396e00[_0x5b37aa*(0x1b9d+0x20*-0xa+-0x1a5a)+(-0x1ddd*0x1+0x19*-0xfa+0x5*0xadb)]=_0x3bfd4f(Math['exp'](_0x63f5c6[_0x5b37aa])),_0x396e00[_0x5b37aa*(-0x1*0x1b46+0x1dc2+-0x279)+(0x3b*-0x73+-0x147*0x2+-0x50*-0x5d)]=_0x3bfd4f(Math['exp'](_0x4de6df[_0x5b37aa])),_0x396e00[_0x5b37aa*(-0x9e9*-0x1+-0x1*0x1e16+-0x286*-0x8)+(-0x2103*-0x1+-0x3ec*-0x8+0x4061*-0x1)]=_0x3bfd4f(Math['exp'](_0x149fae[_0x5b37aa])),_0x3b332d[_0x5b37aa*(-0x130a*0x1+-0x36*-0x43+0x4eb)+(-0x2078+-0x3ac*-0x4+0x11c8)]=_0x2a8985['x'],_0x3b332d[_0x5b37aa*(-0x1d*0x149+0x1527+0x1021)+(-0x2ac+-0x1983+0x1c30)]=_0x2a8985['y'],_0x3b332d[_0x5b37aa*(0xb7a*-0x2+-0x1*-0x16f5+-0x1*-0x2)+(0x2372+0x1d3*0x1+0x2543*-0x1)]=_0x2a8985['z'],_0x3cd2a2&&_0x3f0be4&&_0x55c82f&&_0x863734&&_0x28c27d&&(_0x3f0be4[_0x5b37aa*(-0xa*-0x2f9+-0x24ea+0x733)+(-0x347*0x4+0x160f*0x1+-0x8f3)]=_0x435c80[_0x5b37aa],_0x3f0be4[_0x5b37aa*(0x2bf+-0xbe9*-0x3+0x2b*-0xe5)+(-0x3d*0x89+0x16a5+0xa01)]=_0xfca54e[_0x5b37aa],_0x3f0be4[_0x5b37aa*(0x13e*-0xd+-0xeb4+-0x1*-0x1edd)+(0x1bd5+-0xf92+-0xc41)]=_0x4b52c7[_0x5b37aa],_0x863734[_0x5b37aa*(0xe*0x27a+-0x2fe+-0x1*0x1fab)+(0x5*0x6c5+0x1565*0x1+0x6*-0x935)]=_0x435c80[_0x5b37aa],_0x863734[_0x5b37aa*(0x1bbd*0x1+-0x8f5+0x9b*-0x1f)+(0x1*-0x241a+-0x131+0x1b2*0x16)]=_0xfca54e[_0x5b37aa],_0x863734[_0x5b37aa*(-0xc9*0x1a+0x1244*0x1+0x229)+(0x221f*0x1+0x174b+-0x3968)]=_0x4b52c7[_0x5b37aa],_0x28c27d[_0x5b37aa]=_0x28a5c6?Math['exp'](_0x28a5c6[_0x5b37aa]):-0x10c1*0x1+-0x1*0x24eb+0x1e*0x1ca,_0x55c82f[_0x5b37aa*(0x1bcd+0xa06*0x2+-0x2fd6)+(0xbb3+-0x20bd*-0x1+0x4f0*-0x9)]=_0x1970cc?_0x1970cc[_0x5b37aa]:-0xe06+-0x110f*0x1+0x1f15,_0x55c82f[_0x5b37aa*(0x1*-0x41e+0xb3f*0x1+0x71e*-0x1)+(0xba7+0x2c*0x5b+0x1b4a*-0x1)]=_0x28c27d[_0x5b37aa]);}_0x41a120||(_0x50024d[0x1fa8+0x1*0x1283+0x10b9*-0x3]=(_0x10d8eb+_0x2c401a)*(-0x134c+-0x1756*0x1+0x2aa2+0.5),_0x50024d[0xe31+-0xd17+-0x119]=(_0x23ba95+_0x2bdb37)*(0xea*-0xf+0xb13+0x2a3+0.5),_0x50024d[-0x11+0x1*-0x6ca+-0xfb*-0x7]=(_0x1575bf+_0x511c07)*(0x1732*-0x1+0x50b*0x1+-0x3*-0x60d+0.5),_0x51191b[0x1*-0x239c+-0xf59+0x32f5]=(_0x2c401a-_0x10d8eb)*(0x617*0x6+-0x26e2+0x8*0x4b+0.5),_0x51191b[-0x22*-0xd7+0x5f3*-0x1+-0x1*0x169a]=(_0x2bdb37-_0x23ba95)*(0x1eb0+0x1*-0x13cf+-0xae1+0.5),_0x51191b[0x2500+-0x46b*-0x7+-0x43eb]=(_0x511c07-_0x1575bf)*(-0x1*0xf15+0xc8e*-0x1+0x1ba3+0.5));const _0x30389c=_0x4f5c3e();let _0x4165c9={'dataColor':_0x27e3d2,'center':_0x50024d,'halfExtents':_0x51191b,'dataCenters':_0x348272,'dataPosition':_0x3de3c3,'dataScale':_0x396e00,'dataRotation':_0x3b332d,..._0x30389c};return _0x3cd2a2&&(_0x4165c9={..._0x4165c9,'dataMotion':_0x3f0be4,'dataTime':_0x55c82f,'motion':_0x863734,'tScaleArray':_0x28c27d,'muT':new Float32Array(_0x1970cc),'timeIndex':new Float32Array(_0x25954c)}),_0x4165c9;},_0x1881f8=_0x111763=>{const _0x583b33=[];for(let _0x42f4f7=-0x15f3+0xe9e+0x755*0x1;_0x42f4f7<_0x111763;++_0x42f4f7)_0x583b33['push'](_0x341a2b['f_rest_'+_0x42f4f7]);return _0x583b33;},_0x4f5c3e=()=>{const _0x2f9cd1=_0x3a98f9();if(_0x2f9cd1<=-0x180*-0xe+0x1e16+-0x3316)return{};const _0x365591=_0x341a2b['x']['length'],_0x4e266b=new Uint32Array(_0x365591*(0x3b0+-0x2098+-0x9a4*-0x3)),_0x2e0e82=new Uint32Array(_0x365591*(0x1*0x11ef+0x1*0x23f8+0x59*-0x9b)),_0x40b207=new Uint32Array(_0x365591*(-0x185d+-0xca5+0x2a5*0xe)),_0x394c1c=new Uint32Array(_0x365591*(0x1d*-0xd9+0x885+-0x126*-0xe)),_0x34b0b0={0x1:0x3,0x2:0x8,0x3:0xf}[_0x2f9cd1],_0x3f239f=_0x1881f8(_0x34b0b0*(0x1*0x1dd7+-0x1*-0x74a+-0x251e)),_0x45ea26=-0x2040+-0x1*-0x2201+0x63e,_0x2b931d=-0x3a1*-0x2+0x2*0xb57+-0x19f1,_0x49521d=new Float32Array(0x8*-0xf2+0xa3a+0x2a9*-0x1),_0x958e99=new Uint32Array(_0x49521d['buffer']),_0x2895ee=new Array(_0x34b0b0*(0x19*0xe2+0x1e3*-0x1+0x4*-0x50b))['fill'](0x5c*0x1a+0x1268+-0x1bc0);for(let _0x1e5f55=0x61e+-0x206f+0x1a51*0x1;_0x1e5f55<_0x365591;++_0x1e5f55){for(let _0x1226a6=0x3c9+0x1385+-0x174e;_0x1226a6<_0x34b0b0;++_0x1226a6)_0x2895ee[_0x1226a6*(0x1*0xfdd+0x12ce*0x1+0x2*-0x1154)]=_0x3f239f[_0x1226a6][_0x1e5f55],_0x2895ee[_0x1226a6*(-0x1*0x1bd0+0xaf7+-0xa6*-0x1a)+(-0x617+0x1b43+-0x1*0x152b)]=_0x3f239f[_0x1226a6+_0x34b0b0][_0x1e5f55],_0x2895ee[_0x1226a6*(-0x6e8+-0x1d62+-0x1*-0x244d)+(0x20*-0x77+-0x1af4+-0x85e*-0x5)]=_0x3f239f[_0x1226a6+_0x34b0b0*(-0xb*-0x26e+0x1a9*-0x3+-0x15bd)][_0x1e5f55];let _0x2a181d=_0x2895ee[0xb2*0x1+0x16a7+-0x1759];for(let _0x21133a=-0x1ab*-0xe+-0x1eb8+0x11*0x6f;_0x21133a<_0x34b0b0*(-0x11a9*0x1+-0x1263+-0xb5*-0x33);++_0x21133a)_0x2a181d=Math['max'](_0x2a181d,Math['abs'](_0x2895ee[_0x21133a]));if(_0x2a181d!==-0x1299+0x209e+-0x25*0x61){for(let _0x4c2bb0=-0x1f9+-0x26d0+0x28c9;_0x4c2bb0<_0x34b0b0;++_0x4c2bb0)_0x2895ee[_0x4c2bb0*(0x1ead+-0x4*-0x6fe+-0x3aa2)+(-0x2543+-0x1b99+0x40dc)]=Math['max'](-0x202f+0x1af3+0x5*0x10c,Math['min'](_0x45ea26,Math['floor']((_0x2895ee[_0x4c2bb0*(-0x1a3*0xd+0xdff+0x74b*0x1)+(0x12c*-0x6+-0x1*0x14e5+0x1bed)]/_0x2a181d*(0x138+-0x5e0+0x4a8+0.5)+(0x12e9+-0x4*-0x78b+-0x5*0x9d1+0.5))*_0x45ea26+(-0x1a*0x14e+0x831+0x19bb*0x1+0.5)))),_0x2895ee[_0x4c2bb0*(0x1*-0x1b4f+-0xbe3*0x3+0x2bd*0x17)+(-0x571*0x1+-0xece+0x1b0*0xc)]=Math['max'](0x5*-0x476+-0x235b+0x39a9,Math['min'](_0x2b931d,Math['floor']((_0x2895ee[_0x4c2bb0*(0x8cf*0x4+-0xf91*0x1+-0x25*0x88)+(0xc2*-0x1+0x1*0x6fd+-0x1*0x63a)]/_0x2a181d*(-0x10*0x211+-0x1beb*-0x1+0x525+0.5)+(0xcf4*-0x1+-0xf0b+-0x955*-0x3+0.5))*_0x2b931d+(0x1c*-0x12b+-0x181b+0x1*0x38cf+0.5)))),_0x2895ee[_0x4c2bb0*(-0x1*-0x923+0x217a+-0x2a9a)+(0x20b8+0x23cd+-0x4483)]=Math['max'](-0x59*-0x1d+0xdb6+-0x17cb*0x1,Math['min'](_0x45ea26,Math['floor']((_0x2895ee[_0x4c2bb0*(-0x1*-0x809+0x1037+-0x5*0x4d9)+(-0x70f+-0x17f7+-0xf84*-0x2)]/_0x2a181d*(-0x177a+0x1*0x9c7+-0xdb3*-0x1+0.5)+(-0x19d1+-0xa8c+-0x141*-0x1d+0.5))*_0x45ea26+(-0xaef*0x3+0x1*-0x1d86+-0x1*-0x3e53+0.5))));_0x49521d[-0xf68+-0x14d9+0x2441]=_0x2a181d,_0x4e266b[_0x1e5f55*(-0xba1+-0xb7b*-0x1+-0x3*-0xe)+(0x1912+0x10df+-0x29f1)]=_0x958e99[-0x1545+0x1*-0x22c3+0x3808],_0x4e266b[_0x1e5f55*(-0x1041+0xbed*0x1+-0x458*-0x1)+(-0x59*0x31+0x2657+-0x154d)]=_0x2895ee[-0x17e*-0x4+-0x24cc+0x1ed4]<<0x1a6d+0x71*0x7+-0x1d6f|_0x2895ee[-0x1b76+-0x1ee1+0x3a58]<<-0x1*-0x25b1+-0x788*-0x4+-0xd8e*0x5|_0x2895ee[0x25*-0x28+-0x26e0+0x2caa*0x1],_0x4e266b[_0x1e5f55*(-0x269f+0xe15+0x188e)+(-0x2*0xe11+-0x261b+-0x1*-0x423f)]=_0x2895ee[-0x72a+-0x1*-0x1cf4+-0x15c7]<<0x9c*0x26+0x26a0+-0x3db3|_0x2895ee[-0x3*-0x7f7+-0x1*0x1ee7+-0x3a*-0x1f]<<-0x124b+-0x24ab+0x1*0x3701|_0x2895ee[-0x68+-0x707+0x774],_0x4e266b[_0x1e5f55*(0xfa9+0x1352+-0x22f7*0x1)+(-0x3b*0x6b+0x21fd+0x951*-0x1)]=_0x2895ee[-0x5dc+-0x65*0x42+0x4*0x7fb]<<-0x1*-0xd55+-0x23ad*-0x1+-0x30ed|_0x2895ee[-0x1575+0x156b+-0x1*-0x11]<<-0x57a*-0x4+-0xc2*0x9+-0xf0b|_0x2895ee[-0xaa3+0x1*0x25b5+0x1*-0x1b0a],_0x2f9cd1>0x6fe+-0x1302+0xc05&&(_0x2e0e82[_0x1e5f55*(-0x27*0x32+-0x199a+0x213c)+(0x287+-0x1*0x62f+0x3a8)]=_0x2895ee[-0x2a9*-0x1+0x3*0xaf9+-0x3f3*0x9]<<-0x4de*0x3+0x29*-0x5+0x4*0x3df|_0x2895ee[-0xe97+-0x13*-0x1+0x12*0xcf]<<0x264b*-0x1+0x1a47+0x9*0x157|_0x2895ee[-0x1e26+0xe6f*0x2+0x1*0x153],_0x2e0e82[_0x1e5f55*(-0x265*-0xd+0x1*0x1f99+-0x3eb6)+(0x1bf*0x13+0x20fa+-0x4226)]=_0x2895ee[0x1403+-0xb*0x386+0x12cb]<<-0x5*-0x43+0x1584+-0x16be|_0x2895ee[-0x1*-0x2488+0xdd*-0x2+-0x11f*0x1f]<<-0x2327+-0x11de+0x46c*0xc|_0x2895ee[-0x1201*-0x1+-0x63*0x33+0x1c6],_0x2e0e82[_0x1e5f55*(0x1586*0x1+0x1*-0x204f+0xacd)+(0x1a96+0x1*-0xdfd+-0xc97)]=_0x2895ee[0x11*-0x175+0x841*0x4+0x4*-0x20c]<<-0x37a+-0x1984+-0x33b*-0x9|_0x2895ee[0x12d0+-0x385+-0xf3b]<<0x5c1*0x4+0xe5*-0x28+0xccf|_0x2895ee[-0x126b+-0x21fc+0x4*0xd1e],_0x2e0e82[_0x1e5f55*(-0x1*0x26a2+-0x1*0x1835+-0x1*-0x3edb)+(0x1*0xa19+-0x1ee1+0x14cb)]=_0x2895ee[-0x1*0x38f+-0x236a+0x270b]<<-0xb*0x35b+0x1*-0x25fe+-0x2*-0x257e|_0x2895ee[0x1*0x2405+-0x2*-0x347+-0x40*0xaa]<<0x32a*-0x3+-0x16be+0x2047|_0x2895ee[0x343*0x2+-0x2*0x86b+0x5f*0x1c],_0x2f9cd1>-0x594+-0x5c9+-0x1*-0xb5f?(_0x40b207[_0x1e5f55*(0xa71+-0x9af+-0xbe)+(-0x68a+-0x359*0x5+0x1747)]=_0x2895ee[0x1*-0xfa7+0x7fe+0x7be]<<0x606+-0x77*-0x7+-0xd6*0xb|_0x2895ee[-0x12e*-0x20+0x3a8+-0x2952]<<0x16*0x174+0x1ecb+-0x3eb8|_0x2895ee[0x851+0xf56+-0x179*0x10],_0x40b207[_0x1e5f55*(-0x1b67+0x16ac+0x4bf)+(0x12f4*-0x1+0x1a62+-0x76d*0x1)]=_0x2895ee[0x2423+0x52e+-0x2939]<<0xd99*0x1+-0x97*-0xa+-0x136a|_0x2895ee[-0x97*0x13+0x218b+-0x163d]<<0x8b5*-0x1+-0x40d*0x3+0x14e7|_0x2895ee[-0x10f7*-0x1+-0x140c+0x32f],_0x40b207[_0x1e5f55*(-0x26*0xf1+0x1dd2+0x1*0x5f8)+(-0x2*0x970+0xbd3+0x70f)]=_0x2895ee[0x50a*-0x4+0x26bd+-0x127a]<<-0x130*0x16+-0x2327+0x22*0x1ce|_0x2895ee[0x1*0x2327+-0x4*0x515+-0x1*0xeb7]<<-0x1ee4+0x2*0x94a+0xc5b*0x1|_0x2895ee[0x12d7*0x1+-0xd20+-0x59a],_0x40b207[_0x1e5f55*(-0x2*-0x127d+0x2a0+-0x233*0x12)+(0x1*0xe8b+-0x22f+-0x1*0xc59)]=_0x2895ee[-0x396+-0x259f*0x1+-0x1*-0x2953]<<0xa*-0xa2+0x3*-0x8eb+0xf*0x236|_0x2895ee[0x98c+0x131e+-0x1c8b]<<-0x1*-0x1724+-0x1814+-0x1*-0xfb|_0x2895ee[-0x19f8+0x27*0x2a+0x13b2],_0x394c1c[_0x1e5f55*(0x1*0x1ecf+-0xc6a+0x5*-0x3ad)+(-0x25ae+-0x1e35+0x43e3)]=_0x2895ee[-0x1*0x47+-0x1b22+0x1b8a]<<-0x1171+0x21a5+-0x1*0x101f|_0x2895ee[-0x1*-0xf6a+-0x1a*0x76+-0x1*0x34c]<<-0x2*0xd6f+0xa6f*0x1+-0x13*-0xde|_0x2895ee[-0x5d0+0x1ee6+0x3*-0x851],_0x394c1c[_0x1e5f55*(-0x67d*-0x3+-0x11be+-0x17*0x13)+(-0x1a37*0x1+0x21d+0x11*0x16b)]=_0x2895ee[0x1508+-0xb*0x12f+-0x7df]<<0x1a6a+-0x65*0x1d+-0x3b9*0x4|_0x2895ee[0x453*0x3+-0xb48*0x1+-0x63*0x4]<<-0x39*0x4d+0x1b57+-0xa27|_0x2895ee[0x1130+0xf98+-0x20a2],_0x394c1c[_0x1e5f55*(0x14f3+0x2347*-0x1+0xe58)+(0x18a5+-0x128a+-0x619)]=_0x2895ee[0x29*0x98+0x183b+-0x306c]<<-0x1*-0x7b5+-0x1ba1+0x3*0x6ab|_0x2895ee[-0x23d4+-0x1c3*0x14+0x56*0xd4]<<-0x9fa*-0x1+0x6ac+-0x109b|_0x2895ee[0x1254+0xfb3*-0x1+0x1*-0x278],_0x394c1c[_0x1e5f55*(0x3b7+0x13be+-0x1771*0x1)+(0x2037+0x1b99+0x3f*-0xf3)]=_0x2895ee[-0x65*0x1a+-0x19e0+0x244c]<<-0x2d8*-0xd+-0xeab+-0x8*0x2c7|_0x2895ee[-0x551*0x4+-0x3*0x686+0x3*0xdab]<<-0x889+-0x908+0xe*0x142|_0x2895ee[0x1*0x7c9+-0x2*-0x5c7+0x1*-0x132b]):_0x40b207[_0x1e5f55]=_0x2895ee[0x7*0x1d6+-0x2599+0x18d4]<<-0x1*0x254+-0x179f*0x1+0x1a08|_0x2895ee[0xae9+-0x1c63+0x8c8*0x2]<<-0x1baa+-0x9e9*0x3+-0x10*-0x397|_0x2895ee[-0x17*-0x18d+0x1a07*0x1+-0x3*0x1489]);}}return{'sh1to3Data':_0x4e266b,'sh4to7Data':_0x2e0e82,'sh8to11Data':_0x40b207,'sh12to15Data':_0x394c1c};},_0x3d4c91=_0x4b94e0=>{if(!_0x341a2b['time_index'])return;const _0x1b14dc=_0x341a2b['time_index']['findIndex'](_0xbcde9=>_0xbcde9===_0x4b94e0);let _0x358ed0=_0x341a2b['time_index']['findIndex']((_0x2cdbf7,_0x4079b5)=>_0x2cdbf7!==_0x4b94e0&&_0x4079b5>_0x1b14dc);if(_0x358ed0===-(0x1*-0x22a3+0x8c*0x11+0x1958)&&_0x1b14dc===-(-0x2259+0x16f8+-0x2f*-0x3e))return;_0x358ed0===-(-0x1168+0x25d4+-0x146b)&&_0x1b14dc!==-(-0x1bdd*0x1+0x13ca+0x814)&&(_0x358ed0=_0x341a2b['time_index']['length']),_0x45a9bd-=_0x358ed0-_0x1b14dc;const _0x3da9f6=Object['keys'](_0x341a2b);for(let _0x4cb49d=0x12af+0x24d6+-0x3785;_0x4cb49d<_0x3da9f6['length'];_0x4cb49d++){const _0x56813b=_0x3da9f6[_0x4cb49d],_0x215adc=_0x341a2b[_0x56813b];if(_0x215adc){const _0x2d47e4=new Float32Array(_0x45a9bd);_0x1b14dc>0xd94*0x2+0x663+0x115*-0x1f?(_0x2d47e4['set'](_0x215adc['subarray'](0x2*-0xd81+-0x1f9a+0x3a9c,_0x1b14dc),-0x162a+-0xdd*0x13+-0xcdb*-0x3),_0x2d47e4['set'](_0x215adc['subarray'](_0x358ed0),_0x1b14dc)):_0x2d47e4['set'](_0x215adc['subarray'](_0x358ed0),0x11f3*-0x1+0xb87+-0x6*-0x112),_0x341a2b[_0x56813b]=_0x2d47e4;}}},_0x1b8bcd=()=>{const _0x76da46=Object['keys'](_0x341a2b);for(let _0x4c3d3d=0xb29*0x1+0x8*-0x1d+-0x23*0x4b;_0x4c3d3d<_0x76da46['length'];_0x4c3d3d++){const _0x4d3c7c=_0x76da46[_0x4c3d3d];_0x341a2b[_0x4d3c7c]&&(_0x341a2b[_0x4d3c7c]=[]);}},_0x16a973=()=>{_0x341a2b={},_0x45a9bd=0x2*-0xff+0x18d2+-0x16d4;};}class uA extends me{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+fA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x48a2de,_0xe3948b,_0x2a4491,_0x35c79e=!(0x1584+0x2621+-0x3ba4)){var _0x164913,_0x4e3ac9;const _0x3d198d={};return _0x48a2de['elements'][-0xe69+0x670+0x7f9]['properties']['forEach'](_0x474ae0=>{_0x3d198d[_0x474ae0['name']]=_0x474ae0['storage'];}),_0x35c79e?(_0x164913=this['worker'])==null||_0x164913['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x3d198d,'timeIndex':_0xe3948b,'timeOption':_0x2a4491},_0x48a2de['elements'][-0x17bf*-0x1+0x35*0x56+-0x1*0x298d]['properties']['map'](_0x2a5cb5=>_0x2a5cb5['storage']['buffer'])):(_0x4e3ac9=this['worker'])==null||_0x4e3ac9['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x3d198d,'timeIndex':_0xe3948b,'timeOption':_0x2a4491}),new Promise(_0x2c762a=>{this['worker']['onmessage']=_0x5b041b=>{if(!this['worker'])return;const {data:_0xf25928}=_0x5b041b;_0xf25928['type']==='newAppendD'+'ata'&&_0x2c762a(_0xf25928);};});}async['releaseSeq'+'Data'](_0x43de98){var _0x57356a;(_0x57356a=this['worker'])==null||_0x57356a['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x43de98});}async['releaseAll'+'SeqData'](){var _0x2b82ce;(_0x2b82ce=this['worker'])==null||_0x2b82ce['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x3d8f28;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x3d8f28=this['worker'])==null||_0x3d8f28['terminate'](),this['worker']=null);}}const Fa=new te(),B_=new le(),Kd=new De(),z_=new De(),pA=new ie(0x3*-0x9e4+0x2*0x3b9+0x163b,0x1*-0x1b01+0x544*0x1+0x15be,0x647+0x6d*0x23+-0x152e,-0xb5f*0x3+-0x1242+-0x6d*-0x7b+0.4),Zd=-0x3*0x94d+-0x2*0xb29+0x2b*0x12b+0.28209479177387814,Qd=0x476cf+0x588ca+-0x6f259;let mA=class{constructor(_0x3683d3,_0x42fbcd,_0x2af61c,_0x19fc57,_0x44da43,_0x138722){const _0x2f55e0=_0x3683d3['getProp']('x'),_0x6b97ed=_0x3683d3['getProp']('y'),_0x269a9d=_0x3683d3['getProp']('z'),_0x5846b7=_0x3683d3['getProp']('rot_1'),_0xe02f3a=_0x3683d3['getProp']('rot_2'),_0x47554c=_0x3683d3['getProp']('rot_3'),_0x53d8de=_0x3683d3['getProp']('rot_0'),_0x307d52=_0x3683d3['getProp']('motion_0'),_0x2863b3=_0x3683d3['getProp']('motion_1'),_0x26f7b0=_0x3683d3['getProp']('motion_2'),_0x269c85=_0x3683d3['getProp']('scale_0'),_0x4d4dae=_0x3683d3['getProp']('scale_1'),_0x28bc00=_0x3683d3['getProp']('scale_2'),_0x27cd17=_0x3683d3['getProp']('f_dc_0'),_0x1eaf08=_0x3683d3['getProp']('f_dc_1'),_0x336723=_0x3683d3['getProp']('f_dc_2'),_0x1caedb=_0x3683d3['getProp']('opacity');this['read']=_0x24f8e0=>{_0x42fbcd&&(_0x42fbcd['x']=_0x2f55e0[_0x24f8e0],_0x42fbcd['y']=_0x6b97ed[_0x24f8e0],_0x42fbcd['z']=_0x269a9d[_0x24f8e0]),_0x2af61c&&_0x2af61c['set'](_0x5846b7[_0x24f8e0],_0xe02f3a[_0x24f8e0],_0x47554c[_0x24f8e0],_0x53d8de[_0x24f8e0]),_0x19fc57&&_0x19fc57['set'](Math['exp'](_0x269c85[_0x24f8e0]),Math['exp'](_0x4d4dae[_0x24f8e0]),Math['exp'](_0x28bc00[_0x24f8e0])),_0x138722&&_0x307d52&&_0x138722['set'](_0x307d52[_0x24f8e0],_0x2863b3[_0x24f8e0],_0x26f7b0[_0x24f8e0]),_0x44da43&&_0x44da43['set'](-0x1*-0x1ce9+0x3a1*0x1+-0x208a+0.5+_0x27cd17[_0x24f8e0]*Zd,0x1ef7+0x361+-0x2*0x112c+0.5+_0x1eaf08[_0x24f8e0]*Zd,0x1ab9+-0x266f*0x1+-0x2*-0x5db+0.5+_0x336723[_0x24f8e0]*Zd,_0x1caedb[_0x24f8e0]);};}};const V_=(_0xf88243,_0x3622a4,_0x413803)=>{B_['set'](_0x413803['x'],_0x413803['y'],_0x413803['z'],_0x413803['w'])['normalize'](),_0xf88243['setTRS'](_0x3622a4,B_,D['ONE']);};class zn{constructor(_0x21b90a,_0x132d3b=[]){h(this,'elements'),h(this,'numSplats',0x1646+-0xe1f+-0x827),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x434ef9;(_0x434ef9=this['dataWorker'])==null||_0x434ef9['destroy'](),this['dataWorker']=null;});var _0x32fcf9,_0x2d80bb,_0x42569b;this['elements']=_0x21b90a,this['numSplats']=((_0x32fcf9=this['getElement']('vertex'))==null?void(-0x14be+0x1*0x14+-0xe6*-0x17):_0x32fcf9['count'])??0xc*-0x207+-0x901*-0x3+-0x2af,this['comments']=_0x132d3b,this['is4D']=!!((_0x42569b=(_0x2d80bb=this['getElement']('vertex'))==null?void(0x1ed*0x1+-0x4*-0x6b9+-0x99b*0x3):_0x2d80bb['properties']['find'](_0x474296=>_0x474296['name']==='t'))!=null&&_0x42569b['storage']);}async['appendGSpl'+'atData'](_0x128234,_0x1d0a98,_0x531e2c){var _0x13a5bd;let _0x34f397=-0x1*0x17c2+-0x1291+0x2a53;for(let _0x2f0a29=-0x1676+0x35*0x75+-0x29*0xb;_0x2f0a29<_0x531e2c['length']&&_0x1d0a98>_0x531e2c[_0x2f0a29];_0x2f0a29+=-0x1733+0x23aa+-0xc75)_0x34f397=_0x2f0a29/(0x941*0x1+-0x89d+-0xa2);console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData',_0x34f397),this['dataWorker']||(this['dataWorker']=new uA(),await this['dataWorker']['appendGSpl'+'atData'](this,0x14d4+0x15*0x5+-0x153d*0x1,_0x531e2c));const _0x11bb2c=this['getElement']('vertex');_0x11bb2c&&(_0x11bb2c['count']=this['numSplats']);const _0x59d6a7=await this['dataWorker']['appendGSpl'+'atData'](_0x128234,_0x34f397,_0x531e2c,!(-0xca6+-0x2057+0x2cfd)),_0x31b1de=_0x59d6a7['properties'],_0x2cd075=((_0x13a5bd=this['getElement']('vertex'))==null?void(-0xf1d+0x1d*0xb2+0x3*-0x1af):_0x13a5bd['properties'])??[];for(const _0x50776c in _0x31b1de){const _0x264cb9=_0x2cd075['find'](_0x39bd67=>_0x39bd67['name']===_0x50776c);_0x264cb9?_0x264cb9['storage']=_0x31b1de[_0x50776c]:_0x2cd075['push']({'type':'float','name':_0x50776c,'storage':_0x31b1de[_0x50776c],'byteSize':0x4});}this['transformD'+'ata']=_0x59d6a7['transformD'+'ata'],this['numSplats']=_0x31b1de['x']['length'],console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData\x20nu'+'mSplats',this['numSplats']);}async['releaseSeq'+'Data'](_0x373a22){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20releaseSe'+'qData',_0x373a22),this['dataWorker']['releaseSeq'+'Data'](_0x373a22),this;}async['releaseAll'+'SeqData'](){var _0x5ac120;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20release\x20a'+'ll\x20SeqData'),(_0x5ac120=this['dataWorker'])==null||_0x5ac120['releaseAll'+'SeqData'](),this;}static['calcSplatA'+'abb'](_0xa36088,_0x167d3e,_0x5c6a3b,_0x10d05d){V_(Fa,_0x167d3e,_0x5c6a3b),Kd['center']['set'](0x1*-0x2047+-0x1809+0x3850,0xaaf*0x1+-0x81*0x39+0x120a,0x5c1*-0x1+-0x2480+0x2a41),Kd['halfExtent'+'s']['set'](_0x10d05d['x']*(-0x1*-0x92f+0x7e0+-0x110d),_0x10d05d['y']*(-0x2015+0x20ad+-0x96),_0x10d05d['z']*(-0x2*0x509+-0x1be8+0x25fc)),_0xa36088['setFromTra'+'nsformedAa'+'bb'](Kd,Fa);}['getProp'](_0x40f47c,_0x35dc44='vertex'){var _0x3fd767,_0x43ec48;return(_0x43ec48=(_0x3fd767=this['getElement'](_0x35dc44))==null?void(-0x91c+-0x1ec0+-0x13ee*-0x2):_0x3fd767['properties']['find'](_0x25c9c9=>_0x25c9c9['name']===_0x40f47c))==null?void(-0x19*-0x10c+-0x7*-0x416+0x13*-0x2e2):_0x43ec48['storage'];}['getElement'](_0x4f2112){return this['elements']['find'](_0x6b55b=>_0x6b55b['name']===_0x4f2112);}['addProp'](_0x42429a,_0x44f88c){this['getElement']('vertex')['properties']['push']({'type':'float','name':_0x42429a,'storage':_0x44f88c,'byteSize':0x4});}['createIter'](_0x36cf47,_0x518d3f,_0x2c6a46,_0x1c8223,_0xbac5b1){return new mA(this,_0x36cf47,_0x518d3f,_0x2c6a46,_0x1c8223,_0xbac5b1);}async['calcAabbAs'+'ync'](_0x4089ac,_0x4619b1){var _0x58d977,_0x4ccc6f;if((_0x58d977=this['transformD'+'ata'])!=null&&_0x58d977['center']&&((_0x4ccc6f=this['transformD'+'ata'])!=null&&_0x4ccc6f['halfExtent'+'s'])){_0x4089ac['center']['set'](this['transformD'+'ata']['center'][-0x16dc+0x52*0x8+0x144c],this['transformD'+'ata']['center'][-0x7f*-0x35+-0x1d*0x2f+0x1*-0x14f7],this['transformD'+'ata']['center'][0x206a*0x1+0x1cab+-0x3d13]),_0x4089ac['halfExtent'+'s']['set'](this['transformD'+'ata']['halfExtent'+'s'][-0x1ef1+0x7c8+-0x21b*-0xb],this['transformD'+'ata']['halfExtent'+'s'][-0x14ed+-0x2100+0x35ee],this['transformD'+'ata']['halfExtent'+'s'][-0xb67+-0x149f+0x2008]);return;}const _0x2f6989=this['getProp']('x'),_0x1f7106=this['getProp']('y'),_0x201b17=this['getProp']('z'),_0x42ca8d=this['getProp']('scale_0'),_0x47affe=this['getProp']('scale_1'),_0x31117a=this['getProp']('scale_2'),_0x427f02=await(_0x4619b1==null?void(-0x1*0x55f+0x1d69+0x11*-0x16a):_0x4619b1['calcAabb'](this['numSplats'],_0x2f6989,_0x1f7106,_0x201b17,_0x42ca8d,_0x47affe,_0x31117a));_0x4089ac['center']['set'](_0x427f02['center'][-0x11e8+-0x2657+0x383f],_0x427f02['center'][-0x1880+-0xade+0x235f],_0x427f02['center'][0x1276+-0xefe*0x1+-0x1*0x376]),_0x4089ac['halfExtent'+'s']['set'](_0x427f02['halfExtent'+'s'][-0x1c3a+-0xea2+0x2adc],_0x427f02['halfExtent'+'s'][0x353+0x1*-0xfca+0xc78],_0x427f02['halfExtent'+'s'][0x2371+0x3*-0xb2f+-0x1e2]);}['calcAabb'](_0x33ad37,_0x1cf840){let _0x153d51,_0x2e7b15,_0x2f5cb0,_0x1f12c7,_0x225b86,_0x2b84ea,_0x1411e2=!(0x1589+0x5*-0x7c3+-0x192*-0xb);const _0x58822c=this['getProp']('x'),_0x23111e=this['getProp']('y'),_0x2a1db5=this['getProp']('z'),_0x3ffb9=this['getProp']('scale_0'),_0x3fb841=this['getProp']('scale_1'),_0x4a7c0d=this['getProp']('scale_2');for(let _0x409661=-0xc72+-0x10*-0xbf+-0x1*-0x82;_0x409661<this['numSplats'];++_0x409661){if(_0x1cf840&&!_0x1cf840(_0x409661))continue;const _0x268958=_0x58822c[_0x409661],_0x26f9eb=_0x23111e[_0x409661],_0x54ebeb=_0x2a1db5[_0x409661],_0x3dba5f=Math['max'](_0x3ffb9[_0x409661],_0x3fb841[_0x409661],_0x4a7c0d[_0x409661]);if(!isFinite(_0x268958)||!isFinite(_0x26f9eb)||!isFinite(_0x54ebeb)||!isFinite(_0x3dba5f))continue;const _0x51731c=(-0x158f+0x20d7*0x1+-0xb46)*Math['exp'](_0x3dba5f);_0x1411e2?(_0x1411e2=!(0x14a3+-0xfc0+-0x4e2),_0x153d51=_0x268958-_0x51731c,_0x2e7b15=_0x26f9eb-_0x51731c,_0x2f5cb0=_0x54ebeb-_0x51731c,_0x1f12c7=_0x268958+_0x51731c,_0x225b86=_0x26f9eb+_0x51731c,_0x2b84ea=_0x54ebeb+_0x51731c):(_0x153d51=Math['min'](_0x153d51,_0x268958-_0x51731c),_0x2e7b15=Math['min'](_0x2e7b15,_0x26f9eb-_0x51731c),_0x2f5cb0=Math['min'](_0x2f5cb0,_0x54ebeb-_0x51731c),_0x1f12c7=Math['max'](_0x1f12c7,_0x268958+_0x51731c),_0x225b86=Math['max'](_0x225b86,_0x26f9eb+_0x51731c),_0x2b84ea=Math['max'](_0x2b84ea,_0x54ebeb+_0x51731c));}return _0x1411e2||(_0x33ad37['center']['set']((_0x153d51+_0x1f12c7)*(0x1ebd+0x79f*-0x1+-0x171e+0.5),(_0x2e7b15+_0x225b86)*(0x1*-0x1f08+-0x224d+0x15c7*0x3+0.5),(_0x2f5cb0+_0x2b84ea)*(0x3*0x3f9+0x5cd*0x6+0x9*-0x531+0.5)),_0x33ad37['halfExtent'+'s']['set']((_0x1f12c7-_0x153d51)*(0x1*0xa79+-0x1b53*0x1+-0x1*-0x10da+0.5),(_0x225b86-_0x2e7b15)*(-0x1d49+-0xcb9+0x2a02+0.5),(_0x2b84ea-_0x2f5cb0)*(-0x1ef2*0x1+-0x1571+0x1*0x3463+0.5))),!_0x1411e2;}['yieldToMai'+'n'](){var _0x4d3783;return(_0x4d3783=globalThis['scheduler'])!=null&&_0x4d3783['yield']?globalThis['scheduler']['yield']():new Promise(_0x93e159=>{setTimeout(_0x93e159,0x214*0xb+-0xdf*-0x12+-0x268a);});}['calcAabbEx'+'act'](_0x5a415a,_0x293db9){const _0x28e5e8=new D(),_0x12a0cf=new le(),_0x1950af=new D(),_0x45f6ff=this['createIter'](_0x28e5e8,_0x12a0cf,_0x1950af);let _0x1c0b15=!(-0x1d56+-0x19c9+0x371f);for(let _0x390ab2=0xd4*0xa+0x2042+0x1*-0x288a;_0x390ab2<this['numSplats'];++_0x390ab2)_0x293db9&&!_0x293db9(_0x390ab2)||(_0x45f6ff['read'](_0x390ab2),_0x1c0b15?(_0x1c0b15=!(-0x21c9*0x1+0xaa5*0x2+0xc80),zn['calcSplatA'+'abb'](_0x5a415a,_0x28e5e8,_0x12a0cf,_0x1950af)):(zn['calcSplatA'+'abb'](z_,_0x28e5e8,_0x12a0cf,_0x1950af),_0x5a415a['add'](z_)));return!_0x1c0b15;}async['getCenters'](_0x3ec6a6){const _0x31073c=this['getProp']('x'),_0x370245=this['getProp']('y'),_0x26d652=this['getProp']('z');for(let _0xff0198=0x1d1a+-0x218*0xe+-0x1*-0x36;_0xff0198<this['numSplats'];++_0xff0198)_0x3ec6a6[_0xff0198*(0x339+-0x2*-0x1223+-0xe*0x2d2)+(0x2349+0x3*-0xb23+-0x1e0)]=_0x31073c[_0xff0198],_0x3ec6a6[_0xff0198*(0x1a82+0x18a*-0x5+0x12cd*-0x1)+(0x1d*-0x16+0x2*-0x836+0x12eb)]=_0x370245[_0xff0198],_0x3ec6a6[_0xff0198*(-0x4*0x5b6+0x1bb7+-0x4dc)+(-0x965*-0x4+0x1880+-0x3e12)]=_0x26d652[_0xff0198],_0xff0198%Qd===0x17c3+0x1*0x81+-0xc22*0x2&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x18fbf4;if((_0x18fbf4=this['transformD'+'ata'])!=null&&_0x18fbf4['muT'])return this['transformD'+'ata']['muT'];const _0x3f31df=this['getProp']('t');return _0x3f31df?new Float32Array(_0x3f31df):void(-0xc1*-0x1f+0x1*0x109d+-0xd54*0x3);}async['getTScale'](){const _0x13b2ec=this['getProp']('t_scale');if(!_0x13b2ec)return;const _0x2392d2=new Float32Array(this['numSplats']);for(let _0x356a33=-0x359*-0x3+0x1f5*-0x3+-0x42c;_0x356a33<this['numSplats'];++_0x356a33)_0x2392d2[_0x356a33]=Math['exp'](_0x13b2ec[_0x356a33]),_0x356a33%Qd===-0x1880+0x1*0x1147+-0x739*-0x1&&await this['yieldToMai'+'n']();return _0x2392d2;}async['getMotion'](_0x31ad91){const _0x4720da=this['getProp']('motion_0'),_0x599efe=this['getProp']('motion_1'),_0x522d4a=this['getProp']('motion_2');if(!(!_0x4720da||!_0x599efe||!_0x522d4a)){for(let _0x2a14b0=0xd*-0x21d+0x145*-0x1+0x1cbe;_0x2a14b0<this['numSplats'];++_0x2a14b0)_0x31ad91[_0x2a14b0*(-0xa3d+0xfe5*0x2+-0x158a)+(0x1ffe+0x2326+-0x4324)]=_0x4720da[_0x2a14b0],_0x31ad91[_0x2a14b0*(-0x1ab*-0xb+-0x1e75+-0xc1f*-0x1)+(-0x3f0+0x1604+-0x1213)]=_0x599efe[_0x2a14b0],_0x31ad91[_0x2a14b0*(0x1935+-0x734*0x2+-0x565*0x2)+(0x5*0xd8+-0x73*-0x53+-0xdd5*0x3)]=_0x522d4a[_0x2a14b0],_0x2a14b0%Qd===0x9f4+-0x2527*0x1+0x1b33&&await this['yieldToMai'+'n']();}}['getTimeInd'+'ex'](){var _0x3545ff;if((_0x3545ff=this['transformD'+'ata'])!=null&&_0x3545ff['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x738051=this['getProp']('time_index');if(_0x738051)return new Float32Array(_0x738051);}['calcFocalP'+'oint'](_0x552cfd,_0x4db312){const _0x23b03b=this['getProp']('x'),_0x239267=this['getProp']('y'),_0x5c0bcf=this['getProp']('z'),_0x55327e=this['getProp']('scale_0'),_0x36ea38=this['getProp']('scale_1'),_0xe7751d=this['getProp']('scale_2');_0x552cfd['x']=0x1f*0x11c+0x2*0x421+-0x2aa6,_0x552cfd['y']=0x10ce*-0x1+0x1*-0xf77+-0x2045*-0x1,_0x552cfd['z']=-0x23fc+0x25d8+-0x2*0xee;let _0x22fb9f=-0x939+-0x21e*-0x11+-0x1ac5;for(let _0x4cc3d7=-0x1*0x8ef+0x581*-0x2+0x13f1;_0x4cc3d7<this['numSplats'];++_0x4cc3d7){if(_0x4db312&&!_0x4db312(_0x4cc3d7))continue;const _0x2b1138=_0x23b03b[_0x4cc3d7],_0xda36f1=_0x239267[_0x4cc3d7],_0x4dcb24=_0x5c0bcf[_0x4cc3d7];if(!isFinite(_0x2b1138)||!isFinite(_0xda36f1)||!isFinite(_0x4dcb24))continue;const _0x95df3e=(-0x187d*0x1+0x13*0x1f1+0xc65*-0x1)/(0xde7*-0x1+0x5fd+-0x1*-0x7eb+Math['exp'](Math['max'](_0x55327e[_0x4cc3d7],_0x36ea38[_0x4cc3d7],_0xe7751d[_0x4cc3d7])));_0x552cfd['x']+=_0x2b1138*_0x95df3e,_0x552cfd['y']+=_0xda36f1*_0x95df3e,_0x552cfd['z']+=_0x4dcb24*_0x95df3e,_0x22fb9f+=_0x95df3e;}_0x552cfd['mulScalar']((-0x95b+0x1836+-0xeda)/_0x22fb9f);}['renderWire'+'frameBound'+'s'](_0x1bed17,_0x59cb49){const _0x21f505=new D(),_0x1d392a=new le(),_0x4b5ed5=new D(),_0x440e01=new D(),_0x271703=new D(),_0x3d6d00=this['createIter'](_0x21f505,_0x1d392a,_0x4b5ed5);for(let _0x1c9996=0x18*-0x3f+-0x1154+0x5cf*0x4;_0x1c9996<this['numSplats'];++_0x1c9996)_0x3d6d00['read'](_0x1c9996),V_(Fa,_0x21f505,_0x1d392a),Fa['mul2'](_0x59cb49,Fa),_0x440e01['set'](_0x4b5ed5['x']*-(-0x1bd7+-0x269d+-0x4276*-0x1),_0x4b5ed5['y']*-(0xaa5+-0x6*0x4eb+0x12df),_0x4b5ed5['z']*-(0x56*-0x4f+-0x16b3+0x313f)),_0x271703['set'](_0x4b5ed5['x']*(-0xd79+-0x34*0x23+0x1497),_0x4b5ed5['y']*(0x79e+0x110b+-0x1*0x18a7),_0x4b5ed5['z']*(-0x1*0x1867+0x14e3+0x386)),_0x1bed17['immediate']['drawWireAl'+'ignedBox'](_0x440e01,_0x271703,pA,!(0x15d5+0x2020+-0x35f5),_0x1bed17['defaultDra'+'wLayer'],Fa);}get['isCompress'+'ed'](){return!(-0x22ac+-0x1dc9+0x4076);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x2d1ad5=-0x114b+-0xa*0x1ce+0x2357;_0x2d1ad5<0x782+0x17d2+-0x1f27;++_0x2d1ad5)if(!this['getProp']('f_rest_'+_0x2d1ad5))return _0x2d1ad5;return-0x2583+0x1fd*0x11+-0x1*-0x3e3;})())]??0x3*0xafb+0xa*0x1f8+-0x1b*0x1f3;}['calcMorton'+'Order'](){const _0x3eae05=_0x87190e=>{let _0x10344e=_0x87190e[-0x1*-0x87f+0x157e+-0x1dfd],_0x7bd15e=_0x87190e[-0x19*0x18d+-0xac0+0x3185*0x1];for(let _0x127691=0x220e+-0x2466+0x259;_0x127691<_0x87190e['length'];_0x127691++)_0x87190e[_0x127691]<_0x10344e&&(_0x10344e=_0x87190e[_0x127691]),_0x87190e[_0x127691]>_0x7bd15e&&(_0x7bd15e=_0x87190e[_0x127691]);return{'min':_0x10344e,'max':_0x7bd15e};},_0x28f6b8=(_0x348b0a,_0xd1ceea,_0x1907e7)=>{const _0x5f4601=_0x11c770=>(_0x11c770&=0xac0+-0xd99+0x6d8,_0x11c770=(_0x11c770^_0x11c770<<0x2*0x55d+-0x1a51+0xfa7)&-0x128db097c+0x4acedfc9+0xd4c287*0x23e,_0x11c770=(_0x11c770^_0x11c770<<-0x8*0x3eb+-0xc4c+-0xd7*-0x34)&0x19b*0x27253+-0x12a*-0x3eaf2+-0x1*0x57c18e6,_0x11c770=(_0x11c770^_0x11c770<<-0x87b+-0xa*0x4+0x8a7)&0x1*0x1c5555d+0x158b848+0x1*-0x11dce2,_0x11c770=(_0x11c770^_0x11c770<<-0x1*-0x601+0x4b7*-0x3+-0x2*-0x413)&-0x4*-0x1a90f12+-0x212cee9+0x49324ea*0x1,_0x11c770);return(_0x5f4601(_0x1907e7)<<-0xaa1*0x2+0x2b0*0x3+0xd34)+(_0x5f4601(_0xd1ceea)<<-0x1*0x18e6+0x4*0x6ad+-0x1*0x1cd)+_0x5f4601(_0x348b0a);},_0x1b1f92=this['getProp']('x'),_0x5c5fdb=this['getProp']('y'),_0x1a66a8=this['getProp']('z'),{min:_0xb72256,max:_0x5d9b97}=_0x3eae05(_0x1b1f92),{min:_0x2c89db,max:_0x57d573}=_0x3eae05(_0x5c5fdb),{min:_0x4251f0,max:_0x5b74c5}=_0x3eae05(_0x1a66a8),_0x25f533=_0xb72256===_0x5d9b97?-0x5*0x1f0+0x24e7*-0x1+0x1*0x2e97:(-0x1916+-0x1321+0x3037*0x1)/(_0x5d9b97-_0xb72256),_0x59367f=_0x2c89db===_0x57d573?-0x188*0xe+-0xe*0x175+-0x276*-0x11:(0xd75+-0x12b4+-0x93f*-0x1)/(_0x57d573-_0x2c89db),_0x10980b=_0x4251f0===_0x5b74c5?-0x101f+0x1227*0x1+-0x208:(-0xb81+0x1d9*-0x11+0x2eea)/(_0x5b74c5-_0x4251f0),_0x43da84=new Map();for(let _0x10b91f=0x2ba*-0xd+0x2708+-0x12*0x33;_0x10b91f<this['numSplats'];_0x10b91f++){const _0x71fedb=Math['min'](-0x1*0xfb8+0x31*-0x29+0x70*0x3f,Math['floor']((_0x1b1f92[_0x10b91f]-_0xb72256)*_0x25f533)),_0x282c01=Math['min'](-0x2*-0x3f3+-0x1b*0x61+0x654,Math['floor']((_0x5c5fdb[_0x10b91f]-_0x2c89db)*_0x59367f)),_0x28405a=Math['min'](-0x15f*-0x6+-0x1e9a*0x1+-0x1*-0x1a5f,Math['floor']((_0x1a66a8[_0x10b91f]-_0x4251f0)*_0x10980b)),_0x524755=_0x28f6b8(_0x71fedb,_0x282c01,_0x28405a),_0x4858a2=_0x43da84['get'](_0x524755);_0x4858a2?_0x4858a2['push'](_0x10b91f):_0x43da84['set'](_0x524755,[_0x10b91f]);}const _0x4ea79b=Array['from'](_0x43da84['keys']())['sort']((_0x5504e4,_0x25494a)=>_0x5504e4-_0x25494a),_0x100f9d=new Uint32Array(this['numSplats']);let _0xe3fbc0=0x7*-0xce+0x2*-0x937+0x1810;for(let _0x37d7e7=0x2381+-0x10f3+-0x128e;_0x37d7e7<_0x4ea79b['length'];++_0x37d7e7){const _0x1045a9=_0x43da84['get'](_0x4ea79b[_0x37d7e7]);for(let _0x12411e=-0x1840+0x1263*0x1+0x5dd;_0x12411e<_0x1045a9['length'];++_0x12411e)_0x100f9d[_0xe3fbc0++]=_0x1045a9[_0x12411e];}return _0x100f9d;}['reorder'](_0x4c2a7b){const _0x428bb9=new Map(),_0x3271e7=_0x3226a3=>{if(_0x428bb9['has'](_0x3226a3)){const _0xf65d3d=_0x428bb9['get'](_0x3226a3);return _0x428bb9['delete'](_0x3226a3),_0xf65d3d;}return new ArrayBuffer(_0x3226a3);},_0x428fcb=_0x3cb2ae=>{_0x428bb9['set'](_0x3cb2ae['byteLength'],_0x3cb2ae);},_0xf3d56e=_0x3199b4=>{const _0x5bf250=new _0x3199b4['constructo'+'r'](_0x3271e7(_0x3199b4['byteLength']));for(let _0x4400e4=-0x9d9+-0x2b*-0x1+-0x19d*-0x6;_0x4400e4<_0x4c2a7b['length'];_0x4400e4++)_0x5bf250[_0x4400e4]=_0x3199b4[_0x4c2a7b[_0x4400e4]];return _0x428fcb(_0x3199b4['buffer']),_0x5bf250;};this['elements']['forEach'](_0x2e9ad8=>{_0x2e9ad8['properties']['forEach'](_0x1f9c21=>{_0x1f9c21['storage']&&(_0x1f9c21['storage']=_0xf3d56e(_0x1f9c21['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}async function _A(){const _0x1db849=new Float32Array(0x626+0x1*0x8de+0x501*-0x3);new Int32Array(_0x1db849['buffer']);let _0x12104b=-0xa6*0x10+0x7cc*-0x4+-0xa*-0x428,_0x29bddd={};self['onmessage']=async _0x543f4f=>{const {data:_0x502b77}=_0x543f4f;switch(_0x502b77['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x5df162(_0x502b77['properties'],_0x502b77['timeIndex'],_0x502b77['timeOption']);break;case'releaseSeq'+'Data':_0x1c1882(_0x502b77['index']);break;case'releaseAll'+'SeqData':_0x1964aa();break;case'destroyWor'+'ker':_0x9620ea();break;}};const _0x37fba2=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x2c7cc6=0x6f1*0x2+0xccc+-0x1aae*0x1;_0x2c7cc6<-0x15*0xe8+-0x201f+0xf*0x36c;++_0x2c7cc6)if(!_0x29bddd['f_rest_'+_0x2c7cc6])return _0x2c7cc6;return-0x1*-0x1d95+0x252d+-0x4295;})())]??-0x2661+0x11e6*-0x2+-0x45d*-0x11),_0x5df162=(_0x31792e,_0x2f53cf,_0x217608)=>{var _0xab4679,_0x2f6af0;_0x12104b+=(((_0xab4679=_0x31792e['position'])==null?void(0x2707+0x19b2+-0x40b9):_0xab4679['length'])??-0x584*-0x7+0xeef+-0x358b)/(0x19e1+-0xdc3+-0x409*0x3),console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20append'+'GSplatData'+'\x20numSplats',_0x12104b,(((_0x2f6af0=_0x31792e['position'])==null?void(0x3*0xce3+0x1912+-0xfb*0x41):_0x2f6af0['length'])??-0x1*0x1588+0x1622+-0x9a)/(-0x1acb+-0xaef+0x25bd*0x1));const _0x4cea1b=Object['keys'](_0x31792e);for(let _0x4dc042=-0x1f*-0x61+-0x6e+-0xb51;_0x4dc042<_0x4cea1b['length'];_0x4dc042++){const _0x1a3621=_0x4cea1b[_0x4dc042],_0x31a660=_0x31792e[_0x1a3621],_0x3329fa=_0x29bddd[_0x1a3621]??new Float32Array(0x1575*-0x1+-0x83*0x42+0x373b);if(_0x31a660){let _0x34b059=null;switch(_0x1a3621){case'position':_0x34b059=new Float32Array(_0x12104b*(0x2*0x88+-0x1664+0x1557));break;case'color_opac'+'ity':_0x34b059=new Uint16Array(_0x12104b*(-0x8*0x3c3+-0x1*-0x9f9+-0x5*-0x407));break;case'scale':_0x34b059=new Uint16Array(_0x12104b*(-0x4f0+-0x5*0x4f2+0x1dad));break;case'motion':_0x34b059=new Float32Array(_0x12104b*(-0x1a60+-0x425*-0x1+0x76a*0x3));break;case'rotation':_0x34b059=new Float32Array(_0x12104b*(0x750+-0x2*0xe0f+0x14d1));break;default:_0x34b059=new Float32Array(_0x12104b);break;}_0x34b059['set'](_0x3329fa,0x175a+-0x1cd5+-0x57b*-0x1),_0x34b059['set'](_0x31a660,_0x3329fa['length']),_0x29bddd[_0x1a3621]=_0x34b059;}}const _0x504b7f={};Object['keys'](_0x29bddd)['forEach'](_0x357c67=>{_0x357c67==='scale'||_0x357c67==='color_opac'+'ity'?_0x504b7f[_0x357c67]=new Uint16Array(_0x29bddd[_0x357c67]['buffer']['slice']()):_0x504b7f[_0x357c67]=new Float32Array(_0x29bddd[_0x357c67]['buffer']['slice']());});const _0x366747=Object['keys'](_0x504b7f)['map'](_0x4361d8=>_0x504b7f[_0x4361d8]['buffer']),_0xed58c0=_0x348bf3(),_0xa4749d=Object['keys'](_0xed58c0)['map'](_0x976b35=>_0xed58c0[_0x976b35]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x504b7f,'transformData':_0xed58c0},_0x366747['concat'](_0xa4749d));},_0x348bf3=()=>{const _0x260d25=_0x29bddd['position']['length']/(-0x529*0x4+-0x2373+0x381a),_0x5822c8=_0x29bddd['position'],_0xdc5a5c=_0x29bddd['scale'],_0x4f6d7e=_0x29bddd['rotation'],_0x5793d6=_0x29bddd['motion'],_0x269105=_0x29bddd['t'],_0x136aa5=_0x29bddd['t_scale'],_0x3a4f17=_0x29bddd['time_index'],_0x5e3f12=_0x29bddd['color_opac'+'ity'],_0xd4f8aa=(_0x269105==null?void(0x201*0xf+-0x1849+0x2*-0x2e3):_0x269105['length'])>-0xcea*-0x2+-0x153*-0x7+-0x2319;let _0x238a9b=null,_0x3fa852=null,_0x340f84=null,_0x23728a=null;_0xd4f8aa&&(_0x3fa852=new Float32Array(_0x260d25*(0xb*-0x13+-0xf2b+0xfff)),_0x23728a=new Float32Array(_0x260d25),_0x238a9b=new Float32Array(_0x5793d6['buffer']['slice']()),_0x340f84=new Float32Array(_0x5793d6['buffer']['slice']()));const _0x55e6fd=new Float32Array(_0x5822c8['buffer']['slice']()),_0x584a59=new Float32Array(_0x5822c8['buffer']['slice']()),_0x4a9ec9=new Uint16Array(_0x5e3f12['buffer']['slice']()),_0x2806fe=new Uint16Array(_0xdc5a5c['buffer']['slice']()),_0x46c40f=new Float32Array(_0x4f6d7e['buffer']['slice']());for(let _0x59b248=0x24df+-0x333*0x6+-0x11ad;_0x59b248<_0x260d25;++_0x59b248)_0xd4f8aa&&_0x3fa852&&_0x23728a&&(_0x23728a[_0x59b248]=_0x136aa5?Math['exp'](_0x136aa5[_0x59b248]):0x5c5*-0x5+0x1ffc*0x1+-0x323,_0x3fa852[_0x59b248*(-0xa42+0x3*-0xc3+0xc8e)+(-0x2162*-0x1+0x1bdd+-0x3d3f)]=_0x269105?_0x269105[_0x59b248]:-0x443*0x5+-0x95*-0xc+-0x13*-0xc1,_0x3fa852[_0x59b248*(-0x21d1+-0x1f9+0x23cd)+(0x2666+0x1a9c+-0x4101)]=_0x23728a[_0x59b248]);const _0xf632bf=_0x2cd79b();let _0x21cbac={'dataColor':_0x4a9ec9,'dataCenters':_0x584a59,'dataPosition':_0x55e6fd,'dataScale':_0x2806fe,'dataRotation':_0x46c40f,..._0xf632bf};return _0xd4f8aa&&(_0x21cbac={..._0x21cbac,'dataMotion':_0x238a9b,'dataTime':_0x3fa852,'motion':_0x340f84,'tScaleArray':_0x23728a,'muT':new Float32Array(_0x269105),'timeIndex':new Float32Array(_0x3a4f17)}),_0x21cbac;},_0x47a525=_0x2bf12e=>{const _0xd21772=[];for(let _0x5d5c72=0x39b*-0x3+-0x1*-0x2176+-0x16a5*0x1;_0x5d5c72<_0x2bf12e;++_0x5d5c72)_0xd21772['push'](_0x29bddd['f_rest_'+_0x5d5c72]);return _0xd21772;},_0x2cd79b=()=>{const _0x40931a=_0x37fba2();if(_0x40931a<=0xa81*-0x1+-0xb33+-0x1cf*-0xc)return{};const _0xa30939=_0x29bddd['x']['length'],_0x5eb4ec=new Uint32Array(_0xa30939*(0x21+0xe4+-0x101)),_0x4ab721=new Uint32Array(_0xa30939*(-0x1451*-0x1+0x70b*0x5+-0x3784)),_0x170205=new Uint32Array(_0xa30939*(-0x1*0xc9+-0x1980+-0x1*-0x1a4d)),_0x2a34d7=new Uint32Array(_0xa30939*(0x1b59+-0x107*-0x5+0x1*-0x2078)),_0x4c4e9d={0x1:0x3,0x2:0x8,0x3:0xf}[_0x40931a],_0x34711f=_0x47a525(_0x4c4e9d*(-0x1d33+-0xdec+0x2*0x1591)),_0x585a8b=0x1*0x412+-0xf53+0x1340,_0x1fc0cf=0xbfe+0x5*0x655+-0x27a8,_0x45005a=new Float32Array(-0x233b*-0x1+-0x25*-0xef+-0x45c5),_0x46379d=new Uint32Array(_0x45005a['buffer']),_0x1cef96=new Array(_0x4c4e9d*(-0x1f2e+0x17*-0xe9+0x3420))['fill'](-0xba1*-0x3+-0x178e+-0xb55);for(let _0x40db30=0x1f60+0x1d1b+-0x3c7b;_0x40db30<_0xa30939;++_0x40db30){for(let _0xa16ef3=-0xa9d+0x1a*-0x13f+-0x5b*-0x79;_0xa16ef3<_0x4c4e9d;++_0xa16ef3)_0x1cef96[_0xa16ef3*(-0x18b8+-0x957*-0x3+-0x34a)]=_0x34711f[_0xa16ef3][_0x40db30],_0x1cef96[_0xa16ef3*(-0x1*0x1fe+-0x27*0x9+0x2*0x1b0)+(0x106*0x1+-0x2217+-0xb06*-0x3)]=_0x34711f[_0xa16ef3+_0x4c4e9d][_0x40db30],_0x1cef96[_0xa16ef3*(-0x10cd+0x1b8e+-0xabe)+(-0x2*0xff4+-0x1271+0x1*0x325b)]=_0x34711f[_0xa16ef3+_0x4c4e9d*(-0xd*-0x6d+0x1*-0x1825+-0x94f*-0x2)][_0x40db30];let _0x350f74=_0x1cef96[-0x2221+0x59*0x35+0x43*0x3c];for(let _0x104813=0x2*0x396+0xb9+0xca*-0xa;_0x104813<_0x4c4e9d*(0x4f*-0x59+0xf*-0x3d+-0x1f0d*-0x1);++_0x104813)_0x350f74=Math['max'](_0x350f74,Math['abs'](_0x1cef96[_0x104813]));if(_0x350f74!==0x1*-0xe1d+-0x6d*-0x1+-0xc*-0x124){for(let _0x29ab71=0xf19+0x1d0e+-0x2c27;_0x29ab71<_0x4c4e9d;++_0x29ab71)_0x1cef96[_0x29ab71*(-0xab*-0x18+0x8bf+-0x2*0xc62)+(0x13eb+0x70+-0x145b)]=Math['max'](0x2360+0x1a3f+-0x3d9f,Math['min'](_0x585a8b,Math['floor']((_0x1cef96[_0x29ab71*(0x1674+-0x1390+-0x2e1)+(-0xe25+-0x3*0x84c+-0xd03*-0x3)]/_0x350f74*(0x14*-0x90+0x148c+0xee*-0xa+0.5)+(0x28*0x43+-0x80*-0x4a+-0x3e*0xc4+0.5))*_0x585a8b+(-0x9*0xc2+0x86b+-0x1*0x199+0.5)))),_0x1cef96[_0x29ab71*(0x1f24+0x11bd*-0x1+-0xd64)+(0x957+-0x1*-0x223+-0xb79)]=Math['max'](0x2*-0x226+0x3fd*0x6+-0x13a2,Math['min'](_0x1fc0cf,Math['floor']((_0x1cef96[_0x29ab71*(-0x1d33+0x20b3*0x1+0x1*-0x37d)+(0xb2c+-0xe3b*0x1+-0x62*-0x8)]/_0x350f74*(0xd21*-0x1+-0x559*-0x3+-0x2ea+0.5)+(-0x1237+0x23a2*-0x1+0x35d9+0.5))*_0x1fc0cf+(-0x1127*0x1+0x1f*0x3d+-0x1*-0x9c4+0.5)))),_0x1cef96[_0x29ab71*(-0x2fd+0x5a9+-0x2a9)+(0x71c+0x22*-0xb2+-0x845*-0x2)]=Math['max'](0xf44*0x2+0x11*0x241+-0x44d9,Math['min'](_0x585a8b,Math['floor']((_0x1cef96[_0x29ab71*(0x1b*-0x141+-0x401*0x2+0x29e0)+(-0x1d2*0x3+-0x665*-0x6+-0x1073*0x2)]/_0x350f74*(-0x73*0x14+-0x1*-0x1b56+-0x125a*0x1+0.5)+(0xb*-0x107+-0xabd*0x2+0x20c7+0.5))*_0x585a8b+(0xfa8*-0x2+0x11ab+0xda5+0.5))));_0x45005a[-0x270e+0x1*0x12a+0x25e4]=_0x350f74,_0x5eb4ec[_0x40db30*(0xd05+-0x18e3+0xbe2)+(-0x1*-0xfdf+-0x2395*-0x1+-0x19ba*0x2)]=_0x46379d[0x1116+-0x99c+0x77a*-0x1],_0x5eb4ec[_0x40db30*(0xec*0xa+-0x2404+0x1ad0)+(-0x931+-0x5e6+-0x8a*-0x1c)]=_0x1cef96[0x17*-0x15d+0xa61+0x14fa]<<0x10*-0xa3+0x963*-0x2+-0x5cf*-0x5|_0x1cef96[-0x3*-0x83c+-0x1f32+0x67f*0x1]<<0x12d*-0x13+0x4a7*-0x2+-0x1fb*-0x10|_0x1cef96[0x12*0x215+0x35*0x83+-0x4097],_0x5eb4ec[_0x40db30*(0x543+-0x25f1+0x20b2)+(-0xb*-0x124+0x1*-0x11d3+0x549)]=_0x1cef96[0xab5+0xfff+-0x1ab1]<<-0x29*-0x51+-0xd69*-0x2+-0x13db*0x2|_0x1cef96[0x80b*-0x4+0x1caa+0x386]<<0xf9e+0x15*0x133+-0x28c2|_0x1cef96[0x1a7+0x91a+0x6*-0x1ca],_0x5eb4ec[_0x40db30*(-0x10f+-0x1891+0x19a4)+(0x19*-0xa7+-0x1de*-0x2+-0xc96*-0x1)]=_0x1cef96[-0x240f+0x16f9+0x4*0x347]<<-0xf3c+-0x207e+-0x2fcf*-0x1|_0x1cef96[-0x13*0x47+0x1152+0x402*-0x3]<<0x70*0x3e+0x10b7+0xaf3*-0x4|_0x1cef96[0x1ee1+0x1*0x1ab6+-0x5*0xb83],_0x40931a>-0x880+0x1899+-0x1018&&(_0x4ab721[_0x40db30*(0x20*-0x5+0x753+-0x6af)+(-0x1*-0x125d+-0x33*-0x2+-0x1*0x12c3)]=_0x1cef96[-0xff+-0x23cf+0x24d7]<<-0x1bdf+0x1452+0x7a2|_0x1cef96[0xe*-0x21e+0x1*0x1ce5+-0xc9*-0x1]<<-0x225e+0x205+0x2064|_0x1cef96[0x25bd+0x2*0xc4d+-0x12*0x376],_0x4ab721[_0x40db30*(0x1703+-0x15dd+-0x122)+(-0x1985+0x19ce+-0x4*0x12)]=_0x1cef96[-0x1*0x1a9a+0x337*-0x1+-0x1*-0x1ddd]<<0x135c+-0x1c*0x2+-0x130f|_0x1cef96[-0x2136+-0x18da+0x3a1d]<<0x15b8+-0x2*-0x15d+-0x1867|_0x1cef96[-0x10a*-0x13+0xb*0x301+-0x34bb],_0x4ab721[_0x40db30*(-0xef8+-0x1*0xa1b+0x1917)+(-0x1*-0x896+0xc1*0xb+-0x10df*0x1)]=_0x1cef96[-0x2258+-0x19d2+0x3c39]<<-0x5a1*0x1+-0x277*0x4+0xf92|_0x1cef96[-0x1*0x14e9+0x45f+-0x7d*-0x22]<<-0x1*0x1582+0x48f+0x3a*0x4b|_0x1cef96[-0x2*-0x6a7+-0x15a2+0x865*0x1],_0x4ab721[_0x40db30*(0x2220+0x370+0xc*-0x321)+(0xa42*-0x3+-0x1*0x18e3+0x37ac)]=_0x1cef96[-0xace*-0x1+0x1eb7+-0x83*0x51]<<-0x2*-0x54d+-0xd*0x2bd+0x1914|_0x1cef96[0x12bc+-0xa5a+-0x3*0x2c5]<<-0x64c+0x5f*0x32+0x3b*-0x35|_0x1cef96[0x6eb+0x11b1+0x9d*-0x28],_0x40931a>-0x1ee6+0x5*-0x337+-0xfa9*-0x3?(_0x170205[_0x40db30*(-0x206e+-0x2349*0x1+-0x1*-0x43bb)+(-0x1811+0x2*-0x2d8+0x1dc1)]=_0x1cef96[0x17*0x167+-0x2ab+-0x7*0x437]<<-0x4*0x31d+0x1978+-0x1*0xcef|_0x1cef96[-0x91a+-0x1f26+-0x3*-0xd72]<<0x1a1*0x10+0x2*-0x5b4+0x1d*-0x81|_0x1cef96[-0x1d93+0x204d+-0x1b*0x19],_0x170205[_0x40db30*(0x92*0x3f+0xb*-0x332+-0xc4)+(0x26e*0x10+0x1993+-0x4072)]=_0x1cef96[0x2*-0x952+-0x11a1*-0x2+0x6*-0x2c1]<<-0x17*-0x67+0x31d+-0xc49|_0x1cef96[0x13a9+0x4a*0x6+-0x2*0xaa6]<<-0x436+0x306*-0x4+-0x573*-0x3|_0x1cef96[-0x4*-0x925+-0xbf4+0x1*-0x1886],_0x170205[_0x40db30*(0x1c67+-0x1f9*0x6+-0x108d)+(0x21d5+-0x1*-0xd9f+-0x1*0x2f72)]=_0x1cef96[-0x1*0x8a5+0x1*-0x1322+0x1be2]<<0x806+-0x10d4*0x1+-0x41*-0x23|_0x1cef96[0xd4b+0x2d7+-0x1006]<<0x29f*0x7+-0x1ac9+0x87b|_0x1cef96[0xbae*-0x1+0x222b+-0x1660],_0x170205[_0x40db30*(0x59*0x12+0x177e+-0x1dbc)+(-0xf3f+-0x2*0xaa9+-0x124a*-0x2)]=_0x1cef96[-0x202c+0x1*-0x7c5+-0x280f*-0x1]<<0x1013+0x43e+-0x143c|_0x1cef96[0x1*0x2204+0x1642+-0x23f*0x19]<<0x2*0xbb1+0x1c*-0x14c+-0x7b*-0x1b|_0x1cef96[0xab*-0x11+0x1160+0x1f7*-0x3],_0x2a34d7[_0x40db30*(-0x210*0xb+-0x18a7+-0x2f5b*-0x1)+(-0x7e0*0x4+0x2381+-0x401)]=_0x1cef96[-0x185a+-0x1*0x995+0x2210]<<-0x7*-0x89+-0x1b3e+0x1794|_0x1cef96[0x1857+-0x1bad+-0x4a*-0xc]<<0x4a0*-0x4+-0x1bc8+-0x3*-0xf71|_0x1cef96[0x6ad*-0x1+0xb*0x115+-0x517],_0x2a34d7[_0x40db30*(-0xf14+-0x22ef+0x3207)+(-0x8*-0x1eb+0xbff+0x2*-0xdab)]=_0x1cef96[-0x2*0x68f+-0x1*-0x1a1b+0xd*-0xfd]<<0x2*-0xd3d+-0x1f52+0x39e1|_0x1cef96[-0xed9+0xbb9+-0x345*-0x1]<<0x13b9+-0x1a7+-0x47*0x41|_0x1cef96[0x4*0x227+0x1*0x26bd+-0x2f33],_0x2a34d7[_0x40db30*(0x4*-0x2df+-0x8f*-0x21+-0x6ef)+(-0xd26+0x2485+-0x175d)]=_0x1cef96[0xbb8+-0x1d7a+0x11e9]<<0x1242*-0x1+0x1cd1+-0xa7a|_0x1cef96[-0x6*0x2d4+0x78e+0x992]<<-0x37a*0x5+0x1392+-0x225|_0x1cef96[-0x44d+0x19f2+-0x157c],_0x2a34d7[_0x40db30*(0x1*-0x15fb+0x2*-0x84e+0x269b*0x1)+(0x4a*-0x26+-0x2374+-0x2f*-0xfd)]=_0x1cef96[0x2*-0x78e+-0x12ac+0x1*0x21f2]<<-0x1e*0x13e+0x1f8c+0xf*0x63|_0x1cef96[-0x3*-0xaab+-0x130f+0xcc7*-0x1]<<-0x2377*0x1+0x1dd8*-0x1+0x415a|_0x1cef96[0x1729+0x16*0x18d+-0x1*0x391b]):_0x170205[_0x40db30]=_0x1cef96[0x3e5*0x1+0x44*0x5c+0xe2*-0x20]<<-0x13f7+0x1*0x1b0f+0x5*-0x167|_0x1cef96[-0x1*0x1fa6+-0x1854+-0xd*-0x450]<<0x15dc+-0x22bf+0xcee|_0x1cef96[-0xe12*0x2+-0x3a7+-0x9a*-0x35]);}}return{'sh1to3Data':_0x5eb4ec,'sh4to7Data':_0x4ab721,'sh8to11Data':_0x170205,'sh12to15Data':_0x2a34d7};},_0x1c1882=_0x482ed9=>{if(!_0x29bddd['time_index'])return;const _0xdb8382=_0x29bddd['time_index']['findIndex'](_0x3b43f0=>_0x3b43f0===_0x482ed9);let _0x563b4a=_0x29bddd['time_index']['findIndex']((_0x376e28,_0x1b5b3d)=>_0x376e28!==_0x482ed9&&_0x1b5b3d>_0xdb8382);if(_0x563b4a===-(-0x1497*-0x1+-0xa51*0x1+0xa45*-0x1)&&_0xdb8382===-(0x137*0x1f+-0x2*-0x1187+-0x48b6))return;_0x563b4a===-(0x7*0x1c3+0x14eb+-0x213f)&&_0xdb8382!==-(-0x1d43+0x68f+-0x1*-0x16b5)&&(_0x563b4a=_0x29bddd['time_index']['length']),_0x12104b-=_0x563b4a-_0xdb8382,console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20releas'+'eSeqData\x20n'+'umSplats',_0x12104b,_0x563b4a-_0xdb8382);const _0x2357ac=Object['keys'](_0x29bddd);for(let _0x3c1f68=0x3*0xade+0x1653+-0x36ed;_0x3c1f68<_0x2357ac['length'];_0x3c1f68++){const _0x1e4e12=_0x2357ac[_0x3c1f68],_0x23a27e=_0x29bddd[_0x1e4e12];if(_0x23a27e){let _0x2374c0=0x122b+0x1f+-0x1249;switch(_0x1e4e12){case'position':_0x2374c0=0x1207+-0x5b*-0x6d+0x38c3*-0x1;break;case'color_opac'+'ity':_0x2374c0=-0x1*0x46+-0xff*-0x19+-0x1*0x189d;break;case'scale':_0x2374c0=-0x1*0x4be+-0x268d+0x1e2*0x17;break;case'motion':_0x2374c0=0x253c+0x24*0x63+-0x3325;break;case'rotation':_0x2374c0=-0x5b7+-0x71f*-0x3+-0xfa3;break;default:_0x2374c0=-0xa62+0x21b1+-0x174e;break;}const _0x3d6de2=new Float32Array(_0x12104b*_0x2374c0);_0xdb8382>0x5*0x665+-0x1be+-0x1*0x1e3b?(_0x3d6de2['set'](_0x23a27e['subarray'](0x1*-0x183b+0xfc2+0x879,_0xdb8382*_0x2374c0),-0x2540+0x1e77+-0xc1*-0x9),_0x3d6de2['set'](_0x23a27e['subarray'](_0x563b4a*_0x2374c0),_0xdb8382*_0x2374c0)):_0x3d6de2['set'](_0x23a27e['subarray'](_0x563b4a*_0x2374c0),0x4*-0x544+-0x1e08+0xcc6*0x4),_0x29bddd[_0x1e4e12]=_0x3d6de2;}}},_0x1964aa=()=>{const _0x2b99bd=Object['keys'](_0x29bddd);for(let _0x163136=-0x51*-0x5d+-0xe4*0x2b+0x8df;_0x163136<_0x2b99bd['length'];_0x163136++){const _0x39a2f3=_0x2b99bd[_0x163136];_0x29bddd[_0x39a2f3]&&(_0x29bddd[_0x39a2f3]=[]);}},_0x9620ea=()=>{_0x29bddd={},_0x12104b=0xaa2+0x9b5+-0x1*0x1457;};}class gA extends me{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+_A['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x41b1c6,_0x12a35b,_0x4bbce1,_0x584f53=!(-0x5cd+-0x1*-0x6f+0x55f)){var _0x167674,_0x5d17b2;const _0x2ca5e2={};return _0x41b1c6['elements'][-0x2c*-0x1d+-0x1*0x26b3+0x15*0x19b]['properties']['forEach'](_0x3d932a=>{_0x2ca5e2[_0x3d932a['name']]=_0x3d932a['storage'];}),_0x584f53?(_0x167674=this['worker'])==null||_0x167674['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x2ca5e2,'timeIndex':_0x12a35b,'timeOption':_0x4bbce1},_0x41b1c6['elements'][0x2*0xfa7+0x3f3*-0x8+0x4a]['properties']['map'](_0xa01063=>_0xa01063['storage']['buffer'])):(_0x5d17b2=this['worker'])==null||_0x5d17b2['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x2ca5e2,'timeIndex':_0x12a35b,'timeOption':_0x4bbce1}),new Promise(_0x54aa7d=>{this['worker']['onmessage']=_0x5d2022=>{if(!this['worker'])return;const {data:_0x21cf6a}=_0x5d2022;_0x21cf6a['type']==='newAppendD'+'ata'&&_0x54aa7d(_0x21cf6a);};});}async['releaseSeq'+'Data'](_0x4719a5){var _0x56d52e;(_0x56d52e=this['worker'])==null||_0x56d52e['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x4719a5});}async['releaseAll'+'SeqData'](){var _0x49312b;(_0x49312b=this['worker'])==null||_0x49312b['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x4b2f0b;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x4b2f0b=this['worker'])==null||_0x4b2f0b['terminate'](),this['worker']=null);}}const ic=new te(),G_=new le(),SA=new ie(-0x8f3*-0x1+-0x97*-0x31+-0x25d9,-0x1efd+-0x10f4+-0x286*-0x13,0x10d5*-0x1+-0x4*0x63d+0x29c9*0x1,0x1*-0x1f47+0x1917+0x630+0.4),H_=-0x1*-0x55f8f+-0x585ec*-0x1+-0x29d69*0x3;class yA{constructor(_0x7d9502,_0x51426e,_0x49b1b6,_0x1e94c8,_0x5a15d7,_0x205fc6){const _0x29da7c=_0x7d9502['getProp']('position'),_0x1b7f6d=_0x7d9502['getProp']('color_opac'+'ity'),_0x57d65b=_0x7d9502['getProp']('scale'),_0xaff63b=_0x7d9502['getProp']('motion'),_0x5954e4=_0x7d9502['getProp']('rotation');this['read']=_0x501277=>{_0x51426e&&_0x51426e['set'](_0x29da7c[_0x501277*(-0x16ca+-0x1*-0x1f57+-0x88a)+(-0x1*0x2025+0x1662+0x15*0x77)],_0x29da7c[_0x501277*(0xad2+-0x476*0x3+-0x293*-0x1)+(-0x126c+0x1c61+-0x9f4)],_0x29da7c[_0x501277*(0x146a*0x1+0x3*0x87e+0x5*-0x92d)+(0x2*-0x1a7+0x10f9+-0x1*0xda9)]),_0x49b1b6&&_0x49b1b6['set'](_0x5954e4[_0x501277*(0x981+-0x1*0x197e+0x1000)+(0x1b0+-0xa*-0x102+-0x6*0x1f6)],_0x5954e4[_0x501277*(-0x16f9*0x1+-0x1*-0x7e2+-0x78d*-0x2)+(-0x2419+0x2151*0x1+0x2c9)],_0x5954e4[_0x501277*(0x44*-0x4b+0x110d+-0x171*-0x2)+(0x20b0+-0xe3*0x21+-0x36b)]),_0x1e94c8&&_0x1e94c8['set'](_0x57d65b[_0x501277*(-0x5ed*0x3+0x3c3*0x1+-0x1b*-0x85)+(-0x109*-0xf+0x1*-0xee6+-0xa1)],_0x57d65b[_0x501277*(-0x1*-0x2113+-0xc2*-0x6+-0x259c)+(0x9f7*0x2+0x1ec+-0x149*0x11)],_0x57d65b[_0x501277*(0x1*0x207+-0x970*-0x3+-0x1e54)+(0x6*-0x409+0x1*0x13c3+0x475)]),_0x205fc6&&_0xaff63b&&_0x205fc6['set'](_0xaff63b[_0x501277*(0x957+-0x1194+0x840)+(-0xd6b+0x266*-0xb+0x27cd)],_0xaff63b[_0x501277*(0x13d9+-0x21e7+-0xd*-0x115)+(0x23*0x9a+0x191c+-0x2e29)],_0xaff63b[_0x501277*(-0x111e+0x2591*-0x1+0x36b2)+(-0x119b*-0x1+-0x1*-0x3f7+0xa*-0x228)]),_0x5a15d7&&_0x5a15d7['set'](_0x1b7f6d[_0x501277*(0xdfa*0x1+0x1926+-0x271c)+(-0x1*0x5b7+-0x823*-0x1+0x7c*-0x5)],_0x1b7f6d[_0x501277*(0xffd+0x123*0x2+-0x9*0x207)+(0x1ee5+-0x2282+-0x1cf*-0x2)],_0x1b7f6d[_0x501277*(-0x6ee*0x1+-0x18b+0x87d)+(0x1854+-0x2352+0x80*0x16)],_0x1b7f6d[_0x501277*(0x355*-0x1+-0x1f55+0x2*0x1157)+(-0x760+0xab2+-0x34f)]);};}}const vA=(_0x1f5278,_0x5d2d52,_0x434c40)=>{G_['set'](_0x434c40['x'],_0x434c40['y'],_0x434c40['z'],_0x434c40['w'])['normalize'](),_0x1f5278['setTRS'](_0x5d2d52,G_,D['ONE']);};class xA{constructor(_0x2d875e,_0x438ce=[],_0x116e4f=[]){h(this,'elements'),h(this,'properties'),h(this,'numSplats',0x2226+-0xeee+0x78*-0x29),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x1d1d7d;(_0x1d1d7d=this['dataWorker'])==null||_0x1d1d7d['destroy'](),this['dataWorker']=null;});var _0x3ffd3e,_0x2ead1f,_0x37167c;this['elements']=_0x2d875e,this['properties']=_0x116e4f,this['numSplats']=((_0x3ffd3e=this['getElement']('vertex'))==null?void(0x27*-0x97+-0xc1*0x33+0x3*0x147c):_0x3ffd3e['count'])??-0xa3a+-0x178c+0x189*0x16,this['comments']=_0x438ce,this['is4D']=!!((_0x37167c=(_0x2ead1f=this['getElement']('vertex'))==null?void(0xbcf+-0x1*-0x1b4d+0x271c*-0x1):_0x2ead1f['properties']['find'](_0x368517=>_0x368517['name']==='t'))!=null&&_0x37167c['storage']);}async['appendGSpl'+'atData'](_0x5ad4e6,_0x5ab6d1,_0x296800){var _0x45a641;let _0x5f4750=0x1b4*0xe+-0x8*0x22c+-0x678;for(let _0x20d46d=0x48*0x3f+-0x6df+-0xad9*0x1;_0x20d46d<_0x296800['length']&&_0x5ab6d1>_0x296800[_0x20d46d];_0x20d46d+=-0xd0a+0xa52+-0x1*-0x2ba)_0x5f4750=_0x20d46d/(0x1dca+-0x8e2+-0x14e6);this['dataWorker']||(this['dataWorker']=new gA(),await this['dataWorker']['appendGSpl'+'atData'](this,-0x1da2+-0x543+0x22e5,_0x296800));const _0x59d4c1=this['getElement']('vertex');_0x59d4c1&&(_0x59d4c1['count']=this['numSplats']);const _0x2cc2d4=await this['dataWorker']['appendGSpl'+'atData'](_0x5ad4e6,_0x5f4750,_0x296800,!(0x5a+0x1f08+-0x1f62)),_0x5e98b2=_0x2cc2d4['properties'],_0x39dfb3=((_0x45a641=this['getElement']('vertex'))==null?void(-0xbd3+0x3*-0xa61+0x2af6):_0x45a641['properties'])??[];for(const _0x491d15 in _0x5e98b2){const _0x10f256=_0x39dfb3['find'](_0x1816fc=>_0x1816fc['name']===_0x491d15);_0x10f256?_0x10f256['storage']=_0x5e98b2[_0x491d15]:_0x39dfb3['push']({'type':'float','name':_0x491d15,'storage':_0x5e98b2[_0x491d15],'byteSize':0x4});}this['transformD'+'ata']=_0x2cc2d4['transformD'+'ata'],this['numSplats']=_0x5e98b2['position']['length']/(-0x1*-0x107+-0x7f3+0x163*0x5);}async['releaseSeq'+'Data'](_0x2f2d2f){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'leaseSeqDa'+'ta',_0x2f2d2f),this['dataWorker']['releaseSeq'+'Data'](_0x2f2d2f),this;}async['releaseAll'+'SeqData'](){var _0x26287f;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'lease\x20all\x20'+'SeqData'),(_0x26287f=this['dataWorker'])==null||_0x26287f['releaseAll'+'SeqData'](),this;}['getProp'](_0x47f275,_0x53fe36='vertex'){var _0x49d8c0,_0x5cc1c8;return(_0x5cc1c8=(_0x49d8c0=this['getElement'](_0x53fe36))==null?void(-0x6b*-0x15+0x1*-0x25d7+0x1d10):_0x49d8c0['properties']['find'](_0x43e1fd=>_0x43e1fd['name']===_0x47f275))==null?void(-0x1fc9+0x16c1+0x908):_0x5cc1c8['storage'];}['getElement'](_0x4e1f90){return this['elements']['find'](_0x3177c8=>_0x3177c8['name']===_0x4e1f90);}['createIter'](_0x22fee9,_0x4b7a00,_0x4b1858,_0x23e75d,_0x3a085f){return new yA(this,_0x22fee9,_0x4b7a00,_0x4b1858,_0x23e75d,_0x3a085f);}['calcAabb'](_0x31e50b,_0x146c7b){let _0x42534c=-0xa70+-0x2*0xe1d+0x1355*0x2,_0x413036=-0xdc4+-0x2*-0x118a+-0x1550,_0x5c3113=0x23a2+0x853+0x3ff*-0xb,_0x3c746a=-0x1d60+-0x1*0x9c5+0x2725*0x1,_0x102218=0x26fd+-0xc07+-0xcb*0x22,_0x5c17c8=0x1*0x21f1+-0x16f*0xc+-0x10bd*0x1,_0x188d45=!(-0x2*-0x547+-0x968+0x126*-0x1);const _0x33fd73=this['getProp']('position'),_0x4a22ff=this['getProp']('scale');for(let _0x1bd32f=0x1*-0xedb+0x24d6+0x14b*-0x11;_0x1bd32f<this['numSplats'];++_0x1bd32f){if(_0x146c7b&&!_0x146c7b(_0x1bd32f))continue;const _0x4ae57a=_0x33fd73[_0x1bd32f*(-0xba1+0x770+-0x4*-0x10d)+(-0x1e17+-0x560+0x7*0x511)],_0x53cbd1=_0x33fd73[_0x1bd32f*(-0x965+0x3fb+-0x3*-0x1cf)+(-0x4*0x2f7+0x6b1*0x4+0xee7*-0x1)],_0x18d7bd=_0x33fd73[_0x1bd32f*(0x128b+0x65d*-0x5+0xd49)+(0x1091+0xf2e*0x2+-0x2eeb*0x1)],_0x3bfaf9=Math['max'](_0x4a22ff[_0x1bd32f*(-0xfd8+-0x4e*-0xd+0xbe5)+(-0xac9+0x1*0x22bd+-0x17f4)],_0x4a22ff[_0x1bd32f*(-0x12a0+-0x13a9+0x264c)+(0x1f*0x39+-0x23db+0x1cf5)],_0x4a22ff[_0x1bd32f*(0x9f5*0x1+0x2203+-0x2bf5)+(-0x15d9+-0x104+0x16df)]);if(!isFinite(_0x4ae57a)||!isFinite(_0x53cbd1)||!isFinite(_0x18d7bd)||!isFinite(_0x3bfaf9))continue;const _0x2ea103=(0x1d3*-0xb+0x230f+-0x1c*0x89)*Math['exp'](_0x3bfaf9);_0x188d45?(_0x188d45=!(0x1ca5+-0x1*-0x99a+-0x7a6*0x5),_0x42534c=_0x4ae57a-_0x2ea103,_0x413036=_0x53cbd1-_0x2ea103,_0x5c3113=_0x18d7bd-_0x2ea103,_0x3c746a=_0x4ae57a+_0x2ea103,_0x102218=_0x53cbd1+_0x2ea103,_0x5c17c8=_0x18d7bd+_0x2ea103):(_0x42534c=Math['min'](_0x42534c,_0x4ae57a-_0x2ea103),_0x413036=Math['min'](_0x413036,_0x53cbd1-_0x2ea103),_0x5c3113=Math['min'](_0x5c3113,_0x18d7bd-_0x2ea103),_0x3c746a=Math['max'](_0x3c746a,_0x4ae57a+_0x2ea103),_0x102218=Math['max'](_0x102218,_0x53cbd1+_0x2ea103),_0x5c17c8=Math['max'](_0x5c17c8,_0x18d7bd+_0x2ea103));}return _0x188d45||(_0x31e50b['center']['set']((_0x42534c+_0x3c746a)*(-0x207b+-0xd*-0x236+0x3bd+0.5),(_0x413036+_0x102218)*(-0x18ca+-0x2*-0xff7+-0x724+0.5),(_0x5c3113+_0x5c17c8)*(0x2*0x1072+0xbd0+0xb2d*-0x4+0.5)),_0x31e50b['halfExtent'+'s']['set']((_0x3c746a-_0x42534c)*(-0x1e7d+0x2447*-0x1+-0x10b1*-0x4+0.5),(_0x102218-_0x413036)*(-0x7c5+-0x25ea+0x2daf+0.5),(_0x5c17c8-_0x5c3113)*(-0x9a+-0x5bc+-0x1*-0x656+0.5))),!_0x188d45;}['yieldToMai'+'n'](){var _0xfc5e1e;return(_0xfc5e1e=globalThis['scheduler'])!=null&&_0xfc5e1e['yield']?globalThis['scheduler']['yield']():new Promise(_0x12295f=>{setTimeout(_0x12295f,-0x1f81+-0xbfb*-0x3+-0x470);});}async['getCenters'](_0x69990){const _0x267273=this['getProp']('x'),_0x386acb=this['getProp']('y'),_0x2b1edd=this['getProp']('z');for(let _0x2aab0b=0x13ef+-0x125d*0x1+-0x192;_0x2aab0b<this['numSplats'];++_0x2aab0b)_0x69990[_0x2aab0b*(0xe0b*-0x1+-0xe5*0x25+0x2f27*0x1)+(-0x614+-0xb91*0x1+0x1*0x11a5)]=_0x267273[_0x2aab0b],_0x69990[_0x2aab0b*(0x539+0x253c+0x2*-0x1539)+(0x7*-0x4ec+0x81b+0x1a5a)]=_0x386acb[_0x2aab0b],_0x69990[_0x2aab0b*(0x6cf*0x1+-0x11*-0x1b6+-0x23e2)+(-0x1c76+-0x1*-0x3dd+0x189b*0x1)]=_0x2b1edd[_0x2aab0b],_0x2aab0b%H_===-0xb7b+-0xcb6*0x2+-0x3*-0xc4d&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x49cd42;if((_0x49cd42=this['transformD'+'ata'])!=null&&_0x49cd42['muT'])return this['transformD'+'ata']['muT'];const _0x62ce56=this['getProp']('t');return _0x62ce56?new Float32Array(_0x62ce56):void(-0x1*0x4b8+0x1c75*0x1+-0x17bd);}async['getTScale'](){const _0x163d7d=this['getProp']('t_scale');if(!_0x163d7d)return;const _0x22cf49=new Float32Array(this['numSplats']);for(let _0x206192=0x1f2+-0x1*0x207d+-0x45d*-0x7;_0x206192<this['numSplats'];++_0x206192)_0x22cf49[_0x206192]=Math['exp'](_0x163d7d[_0x206192]),_0x206192%H_===-0x16b9+-0x4c+0x53*0x47&&await this['yieldToMai'+'n']();return _0x22cf49;}['getMotion'](_0x294598){const _0x2ae395=this['getProp']('motion');_0x2ae395&&new Float32Array(_0x2ae395['buffer']['slice']());}['getTimeInd'+'ex'](){var _0x14e86c;if((_0x14e86c=this['transformD'+'ata'])!=null&&_0x14e86c['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x16d5d4=this['getProp']('time_index');if(_0x16d5d4)return new Float32Array(_0x16d5d4);}['calcFocalP'+'oint'](_0x68307c,_0x400a5c){const _0x1a3195=this['getProp']('position'),_0x1653ca=this['getProp']('scale');_0x68307c['x']=0x219b+-0x2f*-0x26+-0x2895,_0x68307c['y']=0x135d*0x2+-0x5*0x9+-0x268d,_0x68307c['z']=-0x342+0x671+-0x32f;let _0x4a513a=-0x20ed+-0x150d+0x35fa;for(let _0x267ee6=0x1*0x1ff7+0x1667+-0x365e;_0x267ee6<this['numSplats'];++_0x267ee6){if(_0x400a5c&&!_0x400a5c(_0x267ee6))continue;const _0x364946=_0x1a3195[_0x267ee6*(0x15*0xd+0x3a7+0x5*-0xf1)+(-0x372+0x376+-0x4)],_0x38f407=_0x1a3195[_0x267ee6*(-0xdde+0x1*0x449+0x266*0x4)+(-0x7*-0x2cf+0x6b2*0x3+0x1*-0x27be)],_0x235f8b=_0x1a3195[_0x267ee6*(0x2b*-0x8c+0x18d1+-0x6e*0x3)+(0x4b5+-0x1*-0x6df+0xb92*-0x1)];if(!isFinite(_0x364946)||!isFinite(_0x38f407)||!isFinite(_0x235f8b))continue;const _0x1f9b83=(-0x395+0x1102+0x6b6*-0x2)/(0x1911+0x1f7*-0x11+0x857*0x1+Math['max'](_0x1653ca[_0x267ee6*(0x585+-0x1*-0x296+-0x25*0x38)+(-0xf07+-0x2317+-0x5*-0xa06)],_0x1653ca[_0x267ee6*(-0x1*-0x2203+-0x550*-0x6+0x7c*-0x88)+(-0x1391+0xf*0x1e+-0x3c*-0x4c)],_0x1653ca[_0x267ee6*(0x1fe7*0x1+0x1342+-0x3326)+(-0x6e6+-0x25c2+0x2caa)]));_0x68307c['x']+=_0x364946*_0x1f9b83,_0x68307c['y']+=_0x38f407*_0x1f9b83,_0x68307c['z']+=_0x235f8b*_0x1f9b83,_0x4a513a+=_0x1f9b83;}_0x68307c['mulScalar']((0x33*0xbc+0x4*0x2fc+-0x3163)/_0x4a513a);}['renderWire'+'frameBound'+'s'](_0x1ca5db,_0x5862d0){const _0x1d0399=new D(),_0x8b0cc3=new le(),_0x1e7eab=new D(),_0x4376c3=new D(),_0x46b3b6=new D(),_0x1bbd9a=this['createIter'](_0x1d0399,_0x8b0cc3,_0x1e7eab);for(let _0xb1d1c9=-0xb67+-0x1b44+0x26ab*0x1;_0xb1d1c9<this['numSplats'];++_0xb1d1c9)_0x1bbd9a['read'](_0xb1d1c9),vA(ic,_0x1d0399,_0x8b0cc3),ic['mul2'](_0x5862d0,ic),_0x4376c3['set'](_0x1e7eab['x']*-(-0x177a+-0x2461+0x3bdd),_0x1e7eab['y']*-(0x7f3+-0x5*0x469+0x15*0xac),_0x1e7eab['z']*-(-0x10f+-0xec*0x22+0x2069)),_0x46b3b6['set'](_0x1e7eab['x']*(-0x220d+0x1136+-0x13*-0xe3),_0x1e7eab['y']*(-0xb1e*-0x1+0xbe9+-0x1705),_0x1e7eab['z']*(-0x1e3e+0x220d+-0x3cd)),_0x1ca5db['immediate']['drawWireAl'+'ignedBox'](_0x4376c3,_0x46b3b6,SA,!(-0x1c9d+-0x23f3+0x4090),_0x1ca5db['defaultDra'+'wLayer'],ic);}get['isCompress'+'ed'](){return!(0x74b+0x1253*0x1+0x199d*-0x1);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x4dd943=0x1bdb+-0x12f9*-0x1+0x6*-0x7ce;_0x4dd943<0xea2+0x65*0x4c+-0x2c71;++_0x4dd943)if(!this['getProp']('f_rest_'+_0x4dd943))return _0x4dd943;return-0x10ef+-0x7dd+0x853*0x3;})())]??-0xef*0x15+-0x178c+-0x1*-0x2b27;}['calcMorton'+'Order'](){const _0x8e651f=_0x3c0628=>{let _0x176452=_0x3c0628[0x7*0x473+0x1*0x9c1+-0x28e6],_0xcdb6fd=_0x3c0628[0x1*0x25af+-0x90b+-0x234*0xd];for(let _0x54afdc=0x91*-0x5+0x5d5*-0x1+0x1*0x8ab;_0x54afdc<_0x3c0628['length'];_0x54afdc++)_0x3c0628[_0x54afdc]<_0x176452&&(_0x176452=_0x3c0628[_0x54afdc]),_0x3c0628[_0x54afdc]>_0xcdb6fd&&(_0xcdb6fd=_0x3c0628[_0x54afdc]);return{'min':_0x176452,'max':_0xcdb6fd};},_0x3c5a71=(_0x1dec57,_0x5013de,_0x2c2180)=>{const _0x77c869=_0x5e9090=>(_0x5e9090&=-0xa67*0x1+0x1*-0x8ad+0x1713,_0x5e9090=(_0x5e9090^_0x5e9090<<-0x178*-0x16+0x1d4b+0x73*-0x89)&0x13*-0x15b304f7+-0x46fc1b69+0x2e2457abd,_0x5e9090=(_0x5e9090^_0x5e9090<<-0x1022+-0xd13*-0x2+-0x9fc)&-0x16dae1c+0x232366c+0x1*0x23c67bf,_0x5e9090=(_0x5e9090^_0x5e9090<<0x99c*-0x4+0xb*0xa3+0x1*0x1f73)&0x2c9d6fb+-0x193*-0x3b96f+-0x59a8ff5*0x1,_0x5e9090=(_0x5e9090^_0x5e9090<<-0x2*0xa22+-0x681+0x3*0x8ed)&-0x137e*0x17f5+-0x4852*-0x2813+0x1*-0x5aa237,_0x5e9090);return(_0x77c869(_0x2c2180)<<0x756*-0x1+-0x1*0x565+-0x1*-0xcbd)+(_0x77c869(_0x5013de)<<0xd*0xf7+0x2a1+-0xf2b)+_0x77c869(_0x1dec57);},_0x7d8aea=this['getProp']('x'),_0x38f03b=this['getProp']('y'),_0x575cf0=this['getProp']('z'),{min:_0x1beaf1,max:_0x518e8e}=_0x8e651f(_0x7d8aea),{min:_0x52eba4,max:_0x5d21cf}=_0x8e651f(_0x38f03b),{min:_0x4f9bb2,max:_0x543214}=_0x8e651f(_0x575cf0),_0x1813d9=_0x1beaf1===_0x518e8e?0x3*-0xca1+0x3f1*0x8+-0x1*-0x65b:(0x30d+0x1e5b+0x2*-0xeb4)/(_0x518e8e-_0x1beaf1),_0x55d3d5=_0x52eba4===_0x5d21cf?-0x4*0x4fd+-0x1687*0x1+-0x2a7b*-0x1:(0x24ea+0x127f+-0x3369)/(_0x5d21cf-_0x52eba4),_0x5d3c74=_0x4f9bb2===_0x543214?-0x1*-0x11a1+0xb77*0x2+-0x1*0x288f:(0xbe7+0x1f40+-0x2727)/(_0x543214-_0x4f9bb2),_0x142931=new Map();for(let _0x37a763=0x38d+-0x1ad0+-0x4a7*-0x5;_0x37a763<this['numSplats'];_0x37a763++){const _0x3b5373=Math['min'](-0x52f*0x5+0x2*-0x112a+-0x403e*-0x1,Math['floor']((_0x7d8aea[_0x37a763]-_0x1beaf1)*_0x1813d9)),_0x3ce015=Math['min'](0x1714+0x2e*-0x1a+-0x77*0x1f,Math['floor']((_0x38f03b[_0x37a763]-_0x52eba4)*_0x55d3d5)),_0x57d526=Math['min'](0x1*0x217f+0x7*-0xc1+0x9*-0x2b1,Math['floor']((_0x575cf0[_0x37a763]-_0x4f9bb2)*_0x5d3c74)),_0x2b5f38=_0x3c5a71(_0x3b5373,_0x3ce015,_0x57d526),_0x4c78fd=_0x142931['get'](_0x2b5f38);_0x4c78fd?_0x4c78fd['push'](_0x37a763):_0x142931['set'](_0x2b5f38,[_0x37a763]);}const _0x21d6f4=Array['from'](_0x142931['keys']())['sort']((_0x3ac5a1,_0x447ccf)=>_0x3ac5a1-_0x447ccf),_0x512187=new Uint32Array(this['numSplats']);let _0x188da5=0x20e2+0x1*-0x1a63+-0x1*0x67f;for(let _0x26bcb2=-0x21e1+0x1eb2+-0x1*-0x32f;_0x26bcb2<_0x21d6f4['length'];++_0x26bcb2){const _0x122f88=_0x142931['get'](_0x21d6f4[_0x26bcb2]);for(let _0x384665=-0x7*0x1c+-0x1*-0x21ba+-0x20f6;_0x384665<_0x122f88['length'];++_0x384665)_0x512187[_0x188da5++]=_0x122f88[_0x384665];}return _0x512187;}['reorder'](_0x23a26a){const _0x46fa43=new Map(),_0x105912=_0x3d30c9=>{if(_0x46fa43['has'](_0x3d30c9)){const _0x137b33=_0x46fa43['get'](_0x3d30c9);return _0x46fa43['delete'](_0x3d30c9),_0x137b33;}return new ArrayBuffer(_0x3d30c9);},_0x2312d2=_0xae2d0e=>{_0x46fa43['set'](_0xae2d0e['byteLength'],_0xae2d0e);},_0x2c3653=_0x4eb4c9=>{const _0x1a9d6e=new _0x4eb4c9['constructo'+'r'](_0x105912(_0x4eb4c9['byteLength']));for(let _0x32c990=-0x19b2+0x1*-0x16db+-0x308d*-0x1;_0x32c990<_0x23a26a['length'];_0x32c990++)_0x1a9d6e[_0x32c990]=_0x4eb4c9[_0x23a26a[_0x32c990]];return _0x2312d2(_0x4eb4c9['buffer']),_0x1a9d6e;};this['elements']['forEach'](_0x54ac21=>{_0x54ac21['properties']['forEach'](_0xe3b5b5=>{_0xe3b5b5['storage']&&(_0xe3b5b5['storage']=_0x2c3653(_0xe3b5b5['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}const TA='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20void\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(vert'+'ex_positio'+'n,\x200.0,\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a',wA='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'vec4\x20packR'+'gb(vec3\x20v)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uvec3\x20vb\x20'+'=\x20uvec3(cl'+'amp(v,\x20vec'+'3(0.0),\x20ve'+'c3(1.0))\x20*'+'\x20vec3(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uint\x20bits\x20'+'=\x20(vb.x\x20<<'+'\x2021)\x20|\x20(vb'+'.y\x20<<\x2010)\x20'+'|\x20vb.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4((u'+'vec4(bits)'+'\x20>>\x20uvec4('+'24,\x2016,\x208,'+'\x200))\x20&\x20uve'+'c4(0xff))\x20'+'/\x20vec4(255'+'.0);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20vec3\x20dir'+';\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20sampler2'+'D\x20centroid'+'s;\x0a\x20\x20\x20\x20uni'+'form\x20mediu'+'mp\x20float\x20s'+'hN_mins;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20f'+'loat\x20shN_m'+'axs;\x0a\x0a\x20\x20\x20\x20'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20ivec'+'2\x20uv\x20=\x20ive'+'c2(gl_Frag'+'Coord.xy)\x20'+'*\x20ivec2(SH'+'_COEFFS,\x201'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20mediump\x20v'+'ec3\x20coeffi'+'cients[SH_'+'COEFFS];\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(int\x20i\x20=\x20'+'0;\x20i\x20<\x20SH_'+'COEFFS;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20s\x20=\x20texe'+'lFetch(cen'+'troids,\x20iv'+'ec2(uv.x\x20+'+'\x20i,\x20uv.y),'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20coefficie'+'nts[i]\x20=\x20m'+'ix(vec3(sh'+'N_mins),\x20v'+'ec3(shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20packRgb'+'(evalSH(co'+'efficients'+',\x20dir)\x20*\x200'+('.25\x20+\x200.5)'+';\x0a\x20\x20\x20\x20}\x0a'),EA='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput:\x20Vert'+'exInput)\x20-'+'>\x20VertexOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Ver'+'texOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a',bA='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'fn\x20packRgb'+'(v:\x20vec3f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vb\x20=\x20v'+'ec3u(clamp'+'(v,\x20vec3f('+'0.0),\x20vec3'+'f(1.0))\x20*\x20'+'vec3f(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20bits\x20='+'\x20dot(vb,\x20v'+'ec3u(1\x20<<\x20'+'21,\x201\x20<<\x201'+'0,\x201));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(('+'vec4u(bits'+')\x20>>\x20vec4u'+'(24,\x2016,\x208'+',\x200))\x20&\x20ve'+'c4u(0xff))'+'\x20/\x20vec4f(2'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20un'+'iform\x20dir:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'shN_mins:\x20'+'f32;\x0a\x20\x20\x20\x20u'+'niform\x20shN'+'_maxs:\x20f32'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20centroids'+':\x20texture_'+'2d<f32>;\x0a\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input:'+'\x20FragmentI'+'nput)\x20->\x20F'+'ragmentOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20uv\x20=\x20'+'vec2i(inpu'+'t.position'+'.xy)\x20*\x20vec'+'2i(SH_COEF'+'FS,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'coefficien'+'ts:\x20array<'+'vec3f,\x20SH_'+'COEFFS>;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x200;\x20i\x20'+'<\x20SH_COEFF'+'S;\x20i++)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s:\x20v'+'ec3f\x20=\x20tex'+'tureLoad(c'+'entroids,\x20'+'vec2i(uv.x'+'\x20+\x20i,\x20uv.y'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20coeffic'+'ients[i]\x20='+'\x20mix(vec3f'+'(uniform.s'+'hN_mins),\x20'+'vec3f(unif'+('orm.shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20packRgb'+'(evalSH(&c'+'oefficient'+'s,\x20uniform'+'.dir)\x20*\x200.'+'25\x20+\x200.5);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20}'+'\x0a'),AA='\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20sampler2D'+'\x20sh0;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x20\x20\x20\x20u'+'niform\x20med'+'iump\x20sampl'+'er2D\x20sh_re'+'sult;\x0a\x0a\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20sh0_mi'+'ns;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20sh0_maxs;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20SH_C0\x20=\x20'+'0.28209479'+'177387814;'+'\x0a\x0a\x20\x20\x20\x20//\x20u'+'npack\x2011,\x20'+'11,\x2010\x20nor'+'malized\x20va'+'lue\x20from\x20r'+'gba8\x20textu'+'re\x20sample\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackRgb(v'+'ec4\x20v)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uve'+'c4\x20uv\x20=\x20uv'+'ec4(v\x20*\x2025'+'5.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uint\x20b'+'its\x20=\x20(uv.'+'x\x20<<\x2024)\x20|'+'\x20(uv.y\x20<<\x20'+'16)\x20|\x20(uv.'+'z\x20<<\x208)\x20|\x20'+'uv.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uvec3\x20'+'vb\x20=\x20(uvec'+'3(bits)\x20>>'+'\x20uvec3(21,'+'\x2010,\x200))\x20&'+'\x20uvec3(0x7'+'ffu,\x200x7ff'+'u,\x200x3ffu)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3(vb)\x20/\x20ve'+'c3(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20baseSampl'+'e\x20=\x20mix(sh'+'0_mins,\x20sh'+'0_maxs,\x20te'+'xelFetch(s'+'h0,\x20source'+'.uv,\x200));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20resolve\x20'+'base\x20color'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4\x20base\x20='+'\x20vec4(vec3'+'(0.5)\x20+\x20ba'+'seSample.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'baseSample'+'.w)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'xtract\x20sph'+'erical\x20har'+'monics\x20pal'+'ette\x20index'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20label'+'Sample\x20=\x20i'+'vec2(texel'+'Fetch(sh_l'+'abels,\x20sou'+'rce.uv,\x200)'+'.xy\x20*\x20255.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20int\x20n\x20=\x20'+('labelSampl'+'e.x\x20+\x20labe'+'lSample.y\x20'+'*\x20256;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20shSample\x20'+'=\x20texelFet'+'ch(sh_resu'+'lt,\x20ivec2('+'n\x20%\x2064,\x20n\x20'+'/\x2064),\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20sh\x20=\x20('+'unpackRgb('+'shSample)\x20'+'-\x20vec3(0.5'+'))\x20*\x204.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'(base.xyz\x20'+'+\x20sh,\x20base'+'.w);\x0a\x20\x20\x20\x20}'+'\x0a'),CA='\x0a\x20\x20\x20\x20var\x20s'+'h0:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'h_labels:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20sh_re'+'sult:\x20text'+'ure_2d<f32'+'>;\x0a\x0a\x20\x20\x20\x20un'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20sh0_m'+'axs:\x20vec4f'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20SH_C0:\x20'+'f32\x20=\x200.28'+'2094791773'+'87814;\x0a\x0a\x20\x20'+'\x20\x20//\x20unpac'+'k\x2011,\x2011,\x20'+'10\x20normali'+'zed\x20value\x20'+'from\x20rgba8'+'\x20texture\x20s'+'ample\x0a\x20\x20\x20\x20'+'fn\x20unpackR'+'gb(v:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20bits'+'\x20=\x20dot(vec'+'4u(v\x20*\x20255'+'.0),\x20vec4u'+'(1u\x20<<\x2024,'+'\x201u\x20<<\x2016,'+'\x201u\x20<<\x208,\x20'+'1u));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20vb'+'\x20=\x20(vec3u('+'bits)\x20>>\x20v'+'ec3u(21,\x201'+'0,\x200))\x20&\x20v'+'ec3u(0x7ff'+'u,\x200x7ffu,'+'\x200x3ffu);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec3f'+'(vb)\x20/\x20vec'+'3f(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20f'+'n\x20readColo'+'r(source:\x20'+'ptr<functi'+'on,\x20SplatS'+'ource>)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'baseSample'+':\x20vec4f\x20=\x20'+'mix(unifor'+'m.sh0_mins'+',\x20uniform.'+'sh0_maxs,\x20'+'textureLoa'+'d(sh0,\x20sou'+'rce.uv,\x200)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20base\x20'+'=\x20vec4f(ve'+'c3f(0.5)\x20+'+'\x20baseSampl'+'e.xyz\x20*\x20SH'+'_C0,\x201.0\x20/'+'\x20(1.0\x20+\x20ex'+'p(-baseSam'+'ple.w)));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20extract\x20'+'spherical\x20'+'harmonics\x20'+'palette\x20in'+'dex\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20labe'+'lSample:\x20v'+'ec2i\x20=\x20vec'+'2i(texture'+'Load(sh_la'+'bels,\x20sour'+'ce.uv,\x200).'+'xy\x20*\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20n\x20=\x20l'+('abelSample'+'.x\x20+\x20label'+'Sample.y\x20*'+'\x20256;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hSample:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(s'+'h_result,\x20'+'vec2i(n\x20%\x20'+'64,\x20n\x20/\x2064'+'),\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'h:\x20vec3f\x20='+'\x20(unpackRg'+'b(shSample'+')\x20-\x20vec3f('+'0.5))\x20*\x204.'+'0;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(base.'+'xyz\x20+\x20sh,\x20'+'base.w);\x0a\x20'+'\x20\x20\x20}\x0a'),PA=(_0x25ffda,_0x540a89)=>{for(const _0x3da1ee in _0x540a89)_0x25ffda['resolve'](_0x3da1ee)['setValue'](_0x540a89[_0x3da1ee]);};class MA extends ys{constructor(){super(...arguments),h(this,'executeCal'+'lback',null);}['execute'](){var _0x4c75d6;(_0x4c75d6=this['executeCal'+'lback'])==null||_0x4c75d6['call'](this);}}const W_=new te(),ao=new D();class DA{constructor(_0x267817,_0x362304){h(this,'prevDir',new D()),h(this,'updateMode','enable'),(this['device']=_0x267817,this['gsplatInst'+'ance']=_0x362304);const {resource:_0x1c48bb}=_0x362304,_0x378257=new Map(Ce['get'](_0x267817,_0x267817['isWebGPU']?'wgsl':'glsl'));this['shader']=$t['createShad'+'er'](_0x267817,{'uniqueName':'gsplatReso'+'lveSH','vertexGLSL':TA,'fragmentGLSL':wA,'vertexWGSL':EA,'fragmentWGSL':bA,'vertexIncludes':_0x378257,'fragmentIncludes':_0x378257,'fragmentDefines':new Map([['SH_BANDS',_0x1c48bb['gsplatData']['shBands']['toString']()]]),'attributes':{'vertex_position':Pe}}),this['texture']=_0x1c48bb['createText'+'ure']('centroids',Ne,new J(0xe5*0x25+-0x1*-0xb84+0x29*-0x115,-0x8*-0x29d+0x1*0x245+0x1*-0x132d)),this['renderTarg'+'et']=new gt({'colorBuffer':this['texture'],'depth':!(-0x953+-0x6b*0x13+0x1145)}),this['renderPass']=new MA(_0x267817),this['renderPass']['init'](this['renderTarg'+'et'],{}),this['renderPass']['colorOps']['clear']=!(-0x3*-0x2a1+0x2*0x5d5+-0x138d),this['quadRender']=new rh(this['shader']);const {material:_0x568427}=_0x362304;_0x568427['setDefine']('SH_BANDS','0');const {shaderChunks:_0x28a361}=_0x568427;_0x28a361['glsl']['set']('gsplatSogs'+'ColorVS',AA),_0x28a361['wgsl']['set']('gsplatSogs'+'ColorVS',CA),_0x568427['update'](),_0x267817['scope']['resolve']('sh_result')['setValue'](this['texture']);}['destroy'](){const {gsplatInstance:_0x2c4d98}=this,{material:_0x44256f}=_0x2c4d98;_0x44256f['setDefine']('SH_BANDS',_0x2c4d98['resource']['gsplatData']['shBands']['toString']());const {shaderChunks:_0x449f3c}=_0x44256f;_0x449f3c['glsl']['delete']('gsplatSogs'+'ColorVS'),_0x449f3c['wgsl']['delete']('gsplatSogs'+'ColorVS'),_0x44256f['update'](),this['quadRender']['destroy'](),this['renderPass']['destroy'](),this['renderTarg'+'et']['destroy'](),this['texture']['destroy'](),this['shader']['destroy']();}['render'](_0x4705d2,_0x13fa39){const {prevDir:_0x2a93fd,updateMode:_0x4723c5}=this;if(_0x4723c5==='disable'||(W_['invert'](_0x13fa39),W_['transformV'+'ector'](_0x4705d2['forward'],ao),ao['normalize'](),_0x4723c5==='enable'&&ao['equalsAppr'+'ox'](_0x2a93fd,0x1*0x26cb+-0x2*-0x78+-0x27bb+0.001)))return;_0x2a93fd['copy'](ao);const _0x41725a=()=>{const {device:_0xe19cfc}=this,{sh_centroids:_0x3fc783,meta:_0x35c729}=this['gsplatInst'+'ance']['resource']['gsplatData'];PA(_0xe19cfc['scope'],{'dir':ao['toArray'](),'centroids':_0x3fc783,'shN_mins':_0x35c729['shN']['mins'],'shN_maxs':_0x35c729['shN']['maxs']}),_0xe19cfc['setCullMod'+'e'](bt),_0xe19cfc['setDepthSt'+'ate'](Yt['NODEPTH']),_0xe19cfc['setStencil'+'State'](null,null),_0xe19cfc['setBlendSt'+'ate'](pt['NOBLEND']),this['quadRender']['render']();};this['renderPass']['executeCal'+'lback']=_0x41725a,this['renderPass']['render']();}}const IA='\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20means_l'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20means_'+'u;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20quats'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20scales'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20uint\x20n'+'umSplats;\x0a'+'\x0a\x20\x20\x20\x20uint\x20'+'packU32(ve'+'c4\x20v)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20uint(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u\x20|\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20uint('+'v.y\x20*\x20255.'+'0)\x20<<\x2016u\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uin'+'t(v.z\x20*\x2025'+'5.0)\x20<<\x208u'+'\x20|\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(v.w\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20uv'+'ec4\x20packU3'+'2(vec4\x20a,\x20'+'vec4\x20b,\x20ve'+'c4\x20c,\x20vec4'+'\x20d)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uvec4(pac'+'kU32(a),\x20p'+'ackU32(b),'+'\x20packU32(c'+'),\x20packU32'+'(d));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20w\x20='+'\x20int(textu'+'reSize(mea'+'ns_l,\x200).x'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ivec2\x20uv\x20'+'=\x20ivec2(gl'+'_FragCoord'+'.xy);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(ui'+'nt(uv.x\x20+\x20'+'uv.y\x20*\x20w)\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansLSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_l,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansUSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_u,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20quatsSamp'+'le\x20=\x20texel'+'Fetch(quat'+'s,\x20uv,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20scales'+'Sample\x20=\x20t'+'exelFetch('+'scales,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shLabel'+'sSample\x20=\x20'+'texelFetch'+'(sh_labels'+',\x20uv,\x200).x'+('y;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20pcFragCo'+'lor0\x20=\x20pac'+'kU32(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansLS'+'ample,\x20shL'+'abelsSampl'+'e.x),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansUS'+'ample,\x20shL'+'abelsSampl'+'e.y),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(quatsSa'+'mple),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4(scales'+'Sample,\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20}\x0a'),LA='\x0a\x20\x20\x20\x20var\x20m'+'eans_l:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20means_u'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20qua'+'ts:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'cales:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sh_label'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20numSpla'+'ts:\x20u32;\x0a\x0a'+'\x20\x20\x20\x20fn\x20pac'+'kU32(v:\x20ve'+'c4<f32>)\x20-'+'>\x20u32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(u32(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20(u3'+'2(v.y\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20\x20|\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(u32(v.z\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20u32(v.w'+'\x20*\x20255.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20packU'+'Vec32(a:\x20v'+'ec4<f32>,\x20'+'b:\x20vec4<f3'+'2>,\x20c:\x20vec'+'4<f32>,\x20d:'+'\x20vec4<f32>'+')\x20->\x20vec4<'+'u32>\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4<u32'+'>(packU32('+'a),\x20packU3'+'2(b),\x20pack'+'U32(c),\x20pa'+'ckU32(d));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20@fragmen'+'t\x0a\x20\x20\x20\x20fn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20w:\x20u32\x20'+'=\x20textureD'+'imensions('+'means_l,\x200'+').x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2<u32>'+'\x20=\x20vec2<u3'+'2>(pcPosit'+'ion.xy);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv.x\x20+\x20uv'+'.y\x20*\x20w\x20>=\x20'+'uniform.nu'+'mSplats)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20fetch\x20the'+'\x20source\x20in'+'dex\x20and\x20ca'+'lculate\x20so'+'urce\x20uv\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'meansLSamp'+'le:\x20vec3<f'+('32>\x20=\x20text'+'ureLoad(me'+'ans_l,\x20uv,'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20meansUSam'+'ple:\x20vec3<'+'f32>\x20=\x20tex'+'tureLoad(m'+'eans_u,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20quatsSam'+'ple:\x20vec4<'+'f32>\x20=\x20tex'+'tureLoad(q'+'uats,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20scal'+'esSample:\x20'+'vec3<f32>\x20'+'=\x20textureL'+'oad(scales'+',\x20uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shLa'+'belsSample'+':\x20vec2<f32'+'>\x20=\x20textur'+'eLoad(sh_l'+'abels,\x20uv,'+'\x200).xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20packUVec'+'32(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansLSam'+'ple,\x20shLab'+'elsSample.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansUSam'+'ple,\x20shLab'+'elsSample.'+'y),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(quatsSamp'+'le),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4(scalesSa'+'mple,\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a'),yn=0x1de*0x3+0xda+-0x674+0.28209479177387814,Ci=_0xafc5bd=>_0xafc5bd['read'](0x1108+0x476+-0x157e,-0x1a9f+-0xb03+0x25a2,_0xafc5bd['width'],_0xafc5bd['height'],{'mipLevel':0x0,'face':0x0,'immediate':!(-0x1c9a+0x5cb+0x16cf)}),RA=(_0x5b72eb,_0x58c237)=>{for(const _0x4084a2 in _0x58c237)_0x5b72eb['resolve'](_0x4084a2)['setValue'](_0x58c237[_0x4084a2]);};class OA{constructor(_0x4e43e4,_0x5acd6d,_0x332263,_0x2c6e46,_0x43737b,_0x1b9c5f){const _0xf15782=(_0x2ae5cf,_0xf3a800,_0x315fba)=>_0x2ae5cf*(0x8cb+-0xa05+0x13b-_0x315fba)+_0xf3a800*_0x315fba,{meta:_0x3572ba}=_0x4e43e4,{means:_0x52ec11,scales:_0x2381f5,sh0:_0x2391de,shN:_0xca5c01}=_0x3572ba,_0x3476a7=_0x5acd6d&&_0x4e43e4['means_l']['_levels'][-0x161f+0x1c8c+-0x1*0x66d],_0x33154c=_0x5acd6d&&_0x4e43e4['means_u']['_levels'][-0x282+0x3c5*-0x7+0x1ce5],_0x4fcd1f=_0x332263&&_0x4e43e4['quats']['_levels'][0x3f3*-0x1+-0x2246*-0x1+-0x1*0x1e53],_0x293d5f=_0x2c6e46&&_0x4e43e4['scales']['_levels'][0x2ae*0xd+0x629*-0x4+0x91*-0x12],_0x98d619=_0x43737b&&_0x4e43e4['sh0']['_levels'][0x1*-0x1429+-0x171e+-0x2b47*-0x1],_0x276320=_0x1b9c5f&&_0x4e43e4['sh_labels']['_levels'][0x3*-0x86+0x1*-0x1b5+0x347],_0x448a5a=_0x1b9c5f&&_0x4e43e4['sh_centroi'+'ds']['_levels'][-0x5f*-0x41+-0xe4f+0x1*-0x9d0],_0x5a8611=(0x2*-0x44b+0x1246+-0x9ae)/Math['sqrt'](-0x64e+0x14*-0x48+0xbf0);this['read']=_0x3499cc=>{if(_0x5acd6d){const _0x3f02e1=_0xf15782(_0x52ec11['mins'][0x1258+0x301+-0x445*0x5],_0x52ec11['maxs'][-0xcde*-0x1+0x42a+-0x1108],((_0x33154c[_0x3499cc*(0x17bb+0x10b3*-0x2+0x43*0x25)+(-0xd*-0x277+0x26fa+0x1*-0x4705)]<<-0x65*-0x59+0x1b96+0x3eab*-0x1)+_0x3476a7[_0x3499cc*(0x354*-0x2+0x65e*0x3+-0x1*0xc6e)+(-0x10f+-0x3*0x9f5+0x1eee)])/(-0x14b9*0xa+-0x3a80+0x209b9*0x1)),_0x39f382=_0xf15782(_0x52ec11['mins'][-0x388*0x4+0x1f70+-0x114f],_0x52ec11['maxs'][-0x1aa7*0x1+-0x2660+0x4108],((_0x33154c[_0x3499cc*(0x1bab+0x1*-0x183+0xd12*-0x2)+(0x1b16*0x1+0x7cb+-0x3e0*0x9)]<<-0x22fc+-0x1eac+0x41b0)+_0x3476a7[_0x3499cc*(0x2b3*-0x3+0x2*0xa45+-0xc6d)+(-0x1581+-0x1*0x2213+-0x1f*-0x1cb)])/(-0x8d0+0x3*-0x3f69+0x1c70a)),_0xdda241=_0xf15782(_0x52ec11['mins'][-0x8a8+-0x1194+0x1a3e],_0x52ec11['maxs'][-0xc5*-0x17+0x1*0x1a11+-0x2bc2],((_0x33154c[_0x3499cc*(0x1*0x1c1+0x4c5+-0x682)+(0x55b*0x1+-0xdf9+0x8a0)]<<0x1*0xfc6+0x1*0x5c1+0x157f*-0x1)+_0x3476a7[_0x3499cc*(0x1*-0x201d+-0x21*0x9f+0x34a0)+(0xc7b+0xb25+-0x179e)])/(-0xa7*0x146+0x2d1c+0x2f*0x903));_0x5acd6d['x']=Math['sign'](_0x3f02e1)*(Math['exp'](Math['abs'](_0x3f02e1))-(0x2*0xc5f+-0x9af*0x1+0x29*-0x5e)),_0x5acd6d['y']=Math['sign'](_0x39f382)*(Math['exp'](Math['abs'](_0x39f382))-(0x1215*-0x2+0xa44+0x19e7)),_0x5acd6d['z']=Math['sign'](_0xdda241)*(Math['exp'](Math['abs'](_0xdda241))-(0x2*0x1331+0x4f*-0x2f+-0xbf0*0x2));}if(_0x332263){const _0xbd8082=(_0x4fcd1f[_0x3499cc*(-0x924+0x285*0x3+0x199)+(-0x2*-0x101a+0x1c*0x8b+-0xbda*0x4)]/(-0x8ba*-0x1+0x478*-0x8+0x3*0x957)-(0x2470+0x11d1*0x2+-0x4812+0.5))*_0x5a8611,_0x2c7bcc=(_0x4fcd1f[_0x3499cc*(0x1dad+-0x7fb+-0x15ae)+(-0x162c+-0xf09+0x1b1*0x16)]/(0x24a+0x4*0x27a+0x2f*-0x3d)-(0x1b42+0x1*0x1a1+-0x91*0x33+0.5))*_0x5a8611,_0x3b7e42=(_0x4fcd1f[_0x3499cc*(0x27b*-0x4+0x2b*-0x7+-0x239*-0x5)+(0x1f2c+-0x1565+0x29*-0x3d)]/(0x9e+0x1d+0x4*0x11)-(-0x2c5*0x4+-0x1*0x1ab7+0x2d*0xd7+0.5))*_0x5a8611,_0x158236=Math['sqrt'](Math['max'](0x1d*-0x95+0x28*0x57+0x349,-0x93c+-0x3d*-0x23+0xe6-(_0xbd8082*_0xbd8082+_0x2c7bcc*_0x2c7bcc+_0x3b7e42*_0x3b7e42)));switch(_0x4fcd1f[_0x3499cc*(0x65*-0x5a+0x74f+0x1c37)+(-0x2343+-0x2628+0x496e)]-(-0x1*-0xd63+0x33*-0xa0+-0x5*-0x3e5)){case 0x13f5+-0x4*-0x80e+-0x1*0x342d:_0x332263['set'](_0xbd8082,_0x2c7bcc,_0x3b7e42,_0x158236);break;case-0x2b0+-0x83*0x33+-0x37*-0x86:_0x332263['set'](_0x158236,_0x2c7bcc,_0x3b7e42,_0xbd8082);break;case 0x5d*-0x5f+0x776+-0x905*-0x3:_0x332263['set'](_0x2c7bcc,_0x158236,_0x3b7e42,_0xbd8082);break;case 0xa4*0x22+-0xa76+-0xb4f:_0x332263['set'](_0x2c7bcc,_0x3b7e42,_0x158236,_0xbd8082);break;}}if(_0x2c6e46){const _0x48d0e1=_0xf15782(_0x2381f5['mins'][-0x1653+-0x2406+0x3*0x1373],_0x2381f5['maxs'][0x1a8c+-0xd*-0x15b+-0x2c2b],_0x293d5f[_0x3499cc*(-0xd35+-0x1d*0x7b+0x1b28)+(0x1467*-0x1+-0xdfc+0x2263*0x1)]/(-0x183+0x9f0*-0x2+0x1662)),_0x4c4063=_0xf15782(_0x2381f5['mins'][0x264e+-0x109*-0x2+0x27*-0x109],_0x2381f5['maxs'][-0x4d4+-0x33b*-0xb+-0xf5a*0x2],_0x293d5f[_0x3499cc*(-0x15a*0x11+0x1*-0x120d+0x85*0x4f)+(0x10b5+-0x4ca*0x4+0x274)]/(0x9a4+0x1*-0x39+0x2c*-0x31)),_0x22e4c1=_0xf15782(_0x2381f5['mins'][-0x7*0x128+-0x6+-0x1*-0x820],_0x2381f5['maxs'][0x1*-0x842+0x1c88+0x511*-0x4],_0x293d5f[_0x3499cc*(-0x4*-0x554+-0x1*-0x25fa+-0x3b46)+(0x12ad+-0x7c4+-0xae7)]/(0x4b8+-0x7*0x243+0x60e*0x2));_0x2c6e46['set'](_0x48d0e1,_0x4c4063,_0x22e4c1);}if(_0x43737b){const _0x34293b=_0xf15782(_0x2391de['mins'][0x243c+0x7*0x575+0x1*-0x4a6f],_0x2391de['maxs'][-0x1a4+-0x1*-0x995+-0x7f1],_0x98d619[_0x3499cc*(-0x260f+0x1511*0x1+0x1*0x1102)+(0x234a+-0x33*0x1+-0x2317)]/(-0x16*-0x7a+-0x2486+0x1b09)),_0x4e9f85=_0xf15782(_0x2391de['mins'][-0xb1b+-0x493+0xfaf*0x1],_0x2391de['maxs'][-0x65*0x32+-0x14cd+0x2888*0x1],_0x98d619[_0x3499cc*(0x5de+-0x2bb+-0x11*0x2f)+(-0x21*-0x105+-0xa9*0x22+-0xb32)]/(0x7*0x62+-0x1aeb+0xaa*0x26)),_0x4cc863=_0xf15782(_0x2391de['mins'][-0x12f9+0xc2+-0x613*-0x3],_0x2391de['maxs'][0x165b+-0xf47*0x1+-0x16a*0x5],_0x98d619[_0x3499cc*(-0x1af*-0x3+0x25ea*0x1+-0x2af3)+(0x1*-0x18a7+-0x23a2+-0x7*-0x89d)]/(0x5*-0x403+-0x52*0x4b+0x2*0x168a)),_0x400b2c=_0xf15782(_0x2391de['mins'][-0x1ef9+-0x946+-0x2842*-0x1],_0x2391de['maxs'][-0x221c+-0x1a6b*-0x1+-0x1d*-0x44],_0x98d619[_0x3499cc*(-0x1*-0x1489+0x922+-0x1*0x1da7)+(0x1*-0x15c8+0x229+-0x2ce*-0x7)]/(-0xc32+-0xf44*-0x1+-0x213));_0x43737b['set'](0x1309*0x1+0x1a53+-0x2d5c+0.5+_0x34293b*yn,0x3*-0x9+-0x1*0x1955+0x1970+0.5+_0x4e9f85*yn,0xba9+-0xdf*-0x5+-0x1004+0.5+_0x4cc863*yn,(-0x1*-0x1a31+0xaeb+-0x251b)/(0x23a9+-0x1b*0xf2+-0xa22+Math['exp'](-_0x400b2c)));}if(_0x1b9c5f){const _0x5146ef=_0x276320[_0x3499cc*(-0x2616+0x798+0x1e82)+(-0x1*0x1a03+0xd4b+-0xcb8*-0x1)]+(_0x276320[_0x3499cc*(0x679+0xe*-0x1b+-0x4fb)+(-0x2c8*-0x5+0x989*0x3+0x1*-0x2a82)]<<0x11fb+0x2057+0x9d*-0x52),_0x2b02fa=_0x5146ef%(-0x31*-0x1+-0x197*0xf+0x17e8)*(0x1db2+-0x2352+0x5af),_0x44bb88=Math['floor'](_0x5146ef/(0xea5+0x259e+-0x3403));for(let _0x3740d1=0x2*-0xd6+-0x1*0x145e+0x160a;_0x3740d1<-0x857+0x3*-0x772+0x8*0x3d6;++_0x3740d1)for(let _0x20eca0=-0x2709*-0x1+-0x10a*-0x18+-0x67*0x9f;_0x20eca0<0x7c8*-0x1+0x24cd+-0x1cf6;++_0x20eca0)_0x1b9c5f[_0x3740d1*(0xbf8*-0x1+0x3c3+0x4*0x211)+_0x20eca0]=_0xf15782(_0xca5c01['mins'],_0xca5c01['maxs'],_0x448a5a[(_0x2b02fa+_0x20eca0)*(0x267*0x1+0x1*0xa75+-0x224*0x6)+_0x3740d1+_0x44bb88*_0x4e43e4['sh_centroi'+'ds']['width']*(-0x4a5+-0x33b*0x1+-0x1f9*-0x4)]/(-0xa48*-0x1+0x1*0x1744+-0x281*0xd));}};}}class FA{constructor(){h(this,'meta'),h(this,'numSplats'),h(this,'means_l'),h(this,'means_u'),h(this,'quats'),h(this,'scales'),h(this,'sh0'),h(this,'sh_centroi'+'ds'),h(this,'sh_labels'),h(this,'packedText'+'ure');}['destroy'](){var _0x2510b6,_0x126eaf,_0x310384,_0x19e788,_0x5c5adc,_0x51168f,_0x3fe1d2,_0x44d0b7;(_0x2510b6=this['means_l'])==null||_0x2510b6['destroy'](),(_0x126eaf=this['means_u'])==null||_0x126eaf['destroy'](),(_0x310384=this['quats'])==null||_0x310384['destroy'](),(_0x19e788=this['scales'])==null||_0x19e788['destroy'](),(_0x5c5adc=this['sh0'])==null||_0x5c5adc['destroy'](),(_0x51168f=this['sh_centroi'+'ds'])==null||_0x51168f['destroy'](),(_0x3fe1d2=this['sh_labels'])==null||_0x3fe1d2['destroy'](),(_0x44d0b7=this['packedText'+'ure'])==null||_0x44d0b7['destroy']();}['createIter'](_0x2d86c7,_0x482c16,_0x59d261,_0x2e09c9,_0x899bbb){return new OA(this,_0x2d86c7,_0x482c16,_0x59d261,_0x2e09c9,_0x899bbb);}['calcAabb'](_0x238eb4){const {mins:_0x15e53b,maxs:_0x4cb6ae}=this['meta']['means'],_0x176f95=_0x5b264b=>Math['sign'](_0x5b264b)*(Math['exp'](Math['abs'](_0x5b264b))-(-0xba9+0x200d+0x11*-0x133));_0x238eb4['center']['set']((_0x176f95(_0x15e53b[0x2664+-0x1cf*0xb+-0x127f])+_0x176f95(_0x4cb6ae[-0x2*-0x18f+0xdab+-0x10c9]))*(0x1dad*0x1+0x1*-0x2474+-0x5*-0x15b+0.5),(_0x176f95(_0x15e53b[0x9bd*0x3+0xa2e+-0x2764])+_0x176f95(_0x4cb6ae[-0xdd0+-0x1bd*-0x1+0xc14]))*(-0x1dd*0x3+0x62*-0x2e+0x1*0x1733+0.5),(_0x176f95(_0x15e53b[-0xd59*0x1+-0x10*-0x127+-0x515])+_0x176f95(_0x4cb6ae[-0x128b+0x57e*-0x1+0x180b]))*(0x25d2*-0x1+-0x6d*-0x12+0x1e28+0.5)),_0x238eb4['halfExtent'+'s']['set']((_0x176f95(_0x4cb6ae[-0x634+-0x2*-0x1056+0xf2*-0x1c])-_0x176f95(_0x15e53b[-0x16a4+-0x1*-0x1f21+0x1*-0x87d]))*(0x2*0x12d3+0x20e4+0x1*-0x468a+0.5),(_0x176f95(_0x4cb6ae[0x1bcb+0x1*-0x1119+0x187*-0x7])-_0x176f95(_0x15e53b[0x1*-0x6aa+0x1035+-0x21*0x4a]))*(-0x1361+-0xa1f+-0xec0*-0x2+0.5),(_0x176f95(_0x4cb6ae[0x14f2+0x101+0x1*-0x15f1])-_0x176f95(_0x15e53b[0x575*-0x7+0x833*0x1+-0x14e*-0x17]))*(-0x14*-0x59+0x226d+0x63*-0x6b+0.5));}['getCenters'](_0x76776d){const {meta:_0x5790ee,means_l:_0x2d5034,means_u:_0x2b8515,numSplats:_0x2b62fc}=this,{means:_0x2cdcc0}=_0x5790ee,_0xa763ac=new Uint32Array(_0x2b8515['_levels'][0x13d9+-0x1f54+0xb7b]['buffer']),_0x35ff6a=new Uint32Array(_0x2d5034['_levels'][0x2de+-0x240+-0x9e]['buffer']),_0x4a231=_0x2cdcc0['mins'][-0x1520+-0x1496+-0x1*-0x29b6]/(0x88bd*0x1+-0x1*-0x1e035+0x3*-0x7851),_0x40c97a=_0x2cdcc0['mins'][-0xd7b+-0x1*-0x142b+-0x6af]/(0x1196b+0x127*-0x4b+0x3d01),_0x35e22a=_0x2cdcc0['mins'][-0x1*0x173+0x1*-0x804+0x5*0x1e5]/(0x13d80+0x5*0x4bf3+-0x1b940),_0x5aeb9d=_0x2cdcc0['maxs'][-0xb4d+0xb41*0x1+0xc]/(-0xe6fe+0x7458+0x172a5),_0x3f1fb1=_0x2cdcc0['maxs'][-0x11d2*-0x1+-0x16ad+0x4dc]/(-0x8108+0xc83e+-0xb8c9*-0x1),_0x2e8f2a=_0x2cdcc0['maxs'][-0x243f*-0x1+-0x1*-0x7d6+-0x2c13]/(-0xd62c+-0x1d583+0x1393a*0x3);for(let _0x3a3b75=0xa5b*-0x2+-0xa*-0x33b+-0xb98;_0x3a3b75<_0x2b62fc;_0x3a3b75++){const _0x232e6e=_0x3a3b75,_0x10eb1b=_0xa763ac[_0x232e6e],_0x4a8e41=_0x35ff6a[_0x232e6e],_0x5593f2=_0x10eb1b<<-0x2185+-0x1ca1+0x3e2e&0xb3d*-0x1+-0x137a*0x17+0x2ca33|_0x4a8e41&0x141e+0x1ef9+-0x38*0xe5,_0x5f0dac=_0x10eb1b&-0x15d9b+-0x51b*0x33+0x360fc|_0x4a8e41>>>0x17ab+0x20de+0x523*-0xb&-0x1f8c+-0x26*0x104+0x4723,_0x1dd873=_0x10eb1b>>>0x447+0x858*-0x3+0x14c9&0xde08*0x2+0x397*0x31+-0x16cf7|_0x4a8e41>>>-0x4*-0x4ca+-0x20c8*0x1+-0xc*-0x124&0x1276+0x19*0xd2+-0x1*0x25f9,_0x2d1897=_0x4a231*(0x343*-0x95+0x1865*0x5+0x26c05-_0x5593f2)+_0x5aeb9d*_0x5593f2,_0x39245c=_0x40c97a*(0xa*0x110c+-0x12e66*-0x1+-0xd8df-_0x5f0dac)+_0x3f1fb1*_0x5f0dac,_0x1e947a=_0x35e22a*(0x11bf2+-0xbf2+0x1*-0x1001-_0x1dd873)+_0x2e8f2a*_0x1dd873,_0x1b4019=_0x2d1897<-0x67*-0x2f+0x16*-0x6d+-0x7*0x15d?-_0x2d1897:_0x2d1897,_0x42864e=_0x39245c<-0x1ecf+-0x1*0x21fb+0x40ca?-_0x39245c:_0x39245c,_0x599262=_0x1e947a<0xdb0+0x1543+0x17*-0x185?-_0x1e947a:_0x1e947a;_0x76776d[_0x3a3b75*(0xdb*0x27+-0x3*-0x8de+-0x3bf4)]=(_0x2d1897<0x21b+0x1e7b+-0x2096?-(-0x1821+0x16f0+0x132):-0x35*0x8+0x7*-0x1c1+-0xdf*-0x10)*(Math['exp'](_0x1b4019)-(0x9a*-0x3c+0x9*-0x397+-0xc7*-0x58)),_0x76776d[_0x3a3b75*(0xdbb+-0x5*-0x6+-0xdd6)+(0x1c2f+0xb*-0x21c+0x5b*-0xe)]=(_0x39245c<-0x1e7f+-0x1dff+-0xa15*-0x6?-(-0x5*0x621+-0x2f2*0x6+-0x2*-0x1829):0x336+-0x565*0x1+0x230)*(Math['exp'](_0x42864e)-(0x1e07+-0xc73*0x1+-0x1193)),_0x76776d[_0x3a3b75*(-0x2477+-0xaaf*-0x1+0x19cb)+(0x5*0x12b+-0xf09+0x4*0x24d)]=(_0x1e947a<0x1eb4+-0x1*0x69e+-0x1816?-(-0x5*-0x436+0x2325+-0x3832):0x167+-0x1423+0x12bd)*(Math['exp'](_0x599262)-(0x31*-0x25+-0x68d+0x1*0xda3));}}['calcFocalP'+'oint'](_0x53fde5,_0x3d706e){_0x53fde5['set'](-0x13d2+0x1584+0xd9*-0x2,0x1*-0x178b+0x265*0x7+0x2*0x364,0x1636*0x1+0x175*0x3+-0x1a95);}get['isSogs'](){return!(0xe92+0x8dc+-0x2*0xbb7);}get['shBands'](){var _0x2f145c;return{0xc0:0x1,0x200:0x2,0x3c0:0x3}[(_0x2f145c=this['sh_centroi'+'ds'])==null?void(-0x68a+0x1ea2+-0x18*0x101):_0x2f145c['width']]??-0x1*-0x16c3+0xa7a+-0x213d;}async['decompress'](){const _0x806a3c=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3'],{shBands:_0xda1fa4}=this,{means_l:_0x2dcec1,means_u:_0x2bafbf,quats:_0x304b8,scales:_0x425050,sh0:_0x51f27a,sh_labels:_0x213c8c,sh_centroids:_0x19bedd}=this;if(_0x2dcec1['_levels'][-0x24e9+-0x12fa*0x1+0x37e3]=await Ci(_0x2dcec1),_0x2bafbf['_levels'][-0xbb3*0x1+-0x23f8+0x2fab]=await Ci(_0x2bafbf),_0x304b8['_levels'][0x2*0x12ce+-0x1*-0x1ffa+-0x1*0x4596]=await Ci(_0x304b8),_0x425050['_levels'][0x1d57+-0x2459+0x702]=await Ci(_0x425050),_0x51f27a['_levels'][-0x1*-0xb1b+-0x12af+0x794]=await Ci(_0x51f27a),_0xda1fa4>-0x874+-0x23e+0xab2){_0x213c8c['_levels'][0x619+-0x5ee+0x2b*-0x1]=await Ci(_0x213c8c),_0x19bedd['_levels'][0xe4b*0x1+-0x23d*-0x1+0x1088*-0x1]=await Ci(_0x19bedd);const _0x5385a7=[];for(let _0x3fe767=0x1*-0x1d2+0x101*0x13+0x7*-0x277;_0x3fe767<0x34e+-0x6*0x45+0x3*-0x81;++_0x3fe767)_0x5385a7['push']('f_rest_'+_0x3fe767);_0x806a3c['splice'](_0x806a3c['indexOf']('f_dc_0')+(0x1*-0x93a+-0xdcc+0x3*0x7ad),-0x1*-0x1ab6+0x4ee*0x1+-0x1fa4*0x1,..._0x5385a7);}const _0xc74cb8={};_0x806a3c['forEach'](_0x559adb=>{_0xc74cb8[_0x559adb]=new Float32Array(this['numSplats']);});const _0x274398=new D(),_0x462a09=new le(),_0x503f08=new D(),_0x12fbeb=new re(),_0x1d3118=_0xda1fa4>-0x1*-0x159e+0x7*0x51f+-0x3977?new Float32Array(-0x1*-0x4c0+-0x1009*-0x2+-0x24a5):null,_0x4295bf=this['createIter'](_0x274398,_0x462a09,_0x503f08,_0x12fbeb,_0x1d3118);for(let _0x21b6cd=-0x2*0x1039+-0x123b*-0x1+0xe37;_0x21b6cd<this['numSplats'];++_0x21b6cd)if(_0x4295bf['read'](_0x21b6cd),_0xc74cb8['x'][_0x21b6cd]=_0x274398['x'],_0xc74cb8['y'][_0x21b6cd]=_0x274398['y'],_0xc74cb8['z'][_0x21b6cd]=_0x274398['z'],_0xc74cb8['rot_1'][_0x21b6cd]=_0x462a09['x'],_0xc74cb8['rot_2'][_0x21b6cd]=_0x462a09['y'],_0xc74cb8['rot_3'][_0x21b6cd]=_0x462a09['z'],_0xc74cb8['rot_0'][_0x21b6cd]=_0x462a09['w'],_0xc74cb8['scale_0'][_0x21b6cd]=_0x503f08['x'],_0xc74cb8['scale_1'][_0x21b6cd]=_0x503f08['y'],_0xc74cb8['scale_2'][_0x21b6cd]=_0x503f08['z'],_0xc74cb8['f_dc_0'][_0x21b6cd]=(_0x12fbeb['x']-(-0x21e*0xf+0x89*-0x20+0x30e2+0.5))/yn,_0xc74cb8['f_dc_1'][_0x21b6cd]=(_0x12fbeb['y']-(-0x5*0xc1+-0xc0a+0xfcf+0.5))/yn,_0xc74cb8['f_dc_2'][_0x21b6cd]=(_0x12fbeb['z']-(0x7*-0x175+0x26f4+-0x1cc1+0.5))/yn,_0xc74cb8['opacity'][_0x21b6cd]=_0x12fbeb['w']<=0xf2f*0x2+0x66e+-0x24cc?-(0xe*0x21a+-0x562+0x1*-0x17e2):_0x12fbeb['w']>=-0x1c42*-0x1+0x1183+0x194*-0x1d?0x43*-0x4c+0x1c61+0x1*-0x855:-Math['log']((-0x2c7*-0x3+-0x139c+-0x1*-0xb48)/_0x12fbeb['w']-(0xbfb*0x2+0x10*-0x11f+-0x605)),_0x1d3118){for(let _0x19b757=0xf45+-0x61*0x32+0x3ad;_0x19b757<0x421*0x2+0x2*-0xfa3+0x1731;++_0x19b757)_0xc74cb8['f_rest_'+_0x19b757][_0x21b6cd]=_0x1d3118[_0x19b757];}return new zn([{'name':'vertex','count':this['numSplats'],'properties':_0x806a3c['map'](_0x1cf866=>({'name':_0x1cf866,'type':'float','byteSize':0x4,'storage':_0xc74cb8[_0x1cf866]}))}]);}['packGpuMem'+'ory'](){const {means_l:_0x3267fe,means_u:_0x1c5f0a,quats:_0x301dce,scales:_0x42308f,sh_labels:_0x3f7d6d,numSplats:_0x2d4fc8}=this,{device:_0x63ce8}=_0x3267fe,{scope:_0x15226d}=_0x63ce8,_0xfd16c7=$t['createShad'+'er'](_0x63ce8,{'uniqueName':'GsplatSogs'+'ReorderSha'+'der','attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentGLSL':IA,'fragmentWGSL':LA,'fragmentOutputTypes':['uvec4']}),_0x190ee1=new gt({'colorBuffer':this['packedText'+'ure'],'depth':!(-0x5*-0x4b1+-0x31+-0x1743),'mipLevel':0x0});_0x63ce8['setCullMod'+'e'](bt),_0x63ce8['setBlendSt'+'ate'](pt['NOBLEND']),_0x63ce8['setDepthSt'+'ate'](Yt['NODEPTH']),RA(_0x15226d,{'means_l':_0x3267fe,'means_u':_0x1c5f0a,'quats':_0x301dce,'scales':_0x42308f,'sh_labels':_0x3f7d6d??_0x3267fe,'numSplats':_0x2d4fc8}),Tr(_0x63ce8,_0x190ee1,_0xfd16c7),_0x190ee1['destroy'](),_0xfd16c7['destroy']();}async['prepareGpu'+'Data'](){const {device:_0x5ed795,height:_0x4e934c,width:_0x56d901}=this['means_l'];this['means_l']['_levels'][-0xeb5+-0x2245+0x187d*0x2]=await Ci(this['means_l']),this['means_u']['_levels'][-0x712+-0x12cd*0x1+0x19df]=await Ci(this['means_u']),this['packedText'+'ure']=new _e(_0x5ed795,{'name':'sogsPacked'+'Texture','width':_0x56d901,'height':_0x4e934c,'format':Ue,'mipmaps':!(-0x662+0x335+0x32e*0x1)}),_0x5ed795['on']('devicerest'+'ored',()=>{this['packGpuMem'+'ory']();}),this['packGpuMem'+'ory']();}['reorderDat'+'a'](){return this['prepareGpu'+'Data']();}}async function NA(){let _0x1cffcb=null,_0x35ee99=null,_0x1933a1=null,_0xd19880=null,_0x2db75a=null,_0x247c5c=null,_0x20657e=null,_0x8c841d=null,_0x548821=null,_0x58e87f=null,_0xa816aa=null,_0x41f1d7=null,_0x322b32=null,_0x3a3913=null,_0x9fbdcb=null,_0x433998=null,_0x3c4fec=null,_0x30d45f=null,_0x58407d=null,_0x3d2ce9=null,_0x1707d9=null,_0x565713=null,_0x295bd2=null,_0x469426=null,_0x42f6df=Float32Array['BYTES_PER_'+'ELEMENT'],_0x4210e2=Uint32Array['BYTES_PER_'+'ELEMENT'],_0x39a1ee=-0x5*0x605+0x1d41+0xd8,_0x564be3=!(-0x447+0x5*0x7cf+0x4*-0x8b1),_0x28ff0c,_0xaa334f,_0x2929f8={'x':0x0,'y':0x0,'z':0x0},_0x1f6620={'x':0x0,'y':0x0,'z':0x0},_0x1775be=!(-0x1024+-0x1e9b*-0x1+0x1*-0xe77),_0x4c53a9=!(0x194a+-0xb*0x183+-0x8a9),_0x106321=!(0x986+-0x2104+-0x3*-0x7d5),_0x49d6dd=!(0x369+-0x626+0x2be),_0x582e02=0x4ee+0x285+-0x773,_0x144712=-0x1c08+-0x1692+0x329a,_0x4ede2d=!(-0x3cc+-0xe6a+-0x1237*-0x1),_0x1a6679=null,_0x341baa=!(0xecc+-0xe8*0x2b+0x182d*0x1),_0x16632d=0x1421+0x2*0x81b+-0x2457,_0x1aef74=-0x1*-0x22ca+0x8*0x13a+-0x42*0xad,_0x43c3af={'x':0x0,'y':0x0,'z':0x0},_0x102e73={'x':0x0,'y':0x0,'z':0x0},_0x2bcc05,_0x49c237;self['onmessage']=async _0x4baf8e=>{const {data:_0x4efcb1}=_0x4baf8e;switch(_0x4efcb1['type']){case'initWorker':await _0x4e15d2(_0x4efcb1['sortWasmUr'+'l']),self['postMessag'+'e']({'type':'initialize'+'d'});break;case'initData':if(_0x39a1ee=_0x4efcb1['centers']['length']/(-0x1367+-0x1773+0x2add),_0x39a1ee<=-0x236b+-0xc25*-0x1+0x1746||!_0x35ee99)return;_0x190f54(),_0x564be3=_0x4efcb1['is4d'],_0x2bcc05=_0x4efcb1['id'];const _0x1583d8=_0x3fd15b(_0x39a1ee);if(_0x51f976(_0x1583d8),_0x1933a1[-0x42d+0x4eb*0x3+-0xa94]=_0x43c3af['x'],_0x1933a1[0x14e3*-0x1+0xb2d+0x9b7]=_0x43c3af['y'],_0x1933a1[-0x145f+0x1a*-0x3a+0x19*0x10d]=_0x43c3af['z'],_0xd19880[-0xd*0x197+-0x419+0x18c4]=_0x102e73['x'],_0xd19880[-0x19cf+-0x1ab6+0x3486]=_0x102e73['y'],_0xd19880[0x259*-0xd+0x16f5+-0x39*-0x22]=_0x102e73['z'],_0x247c5c&&_0x4efcb1['centers']&&_0x247c5c['length']===_0x4efcb1['centers']['length']){const _0x5418f6=new Float32Array(_0x4efcb1['centers']);_0x247c5c['set'](_0x5418f6);}if(_0x8c841d&&_0x4efcb1['timeIndex']&&_0x8c841d['length']===_0x4efcb1['timeIndex']['length']){const _0x280f68=new Uint32Array(_0x4efcb1['timeIndex']);_0x8c841d['set'](_0x280f68);}if(_0xa816aa&&_0x4efcb1['motion']&&_0xa816aa['length']===_0x4efcb1['motion']['length']){const _0x27ff46=new Float32Array(_0x4efcb1['motion']);_0xa816aa['set'](_0x27ff46);}if(_0x564be3&&_0x548821&&_0x58e87f&&_0x4efcb1['muT']&&_0x4efcb1['tScale']&&_0x548821['length']===_0x4efcb1['muT']['length']&&_0x58e87f['length']===_0x4efcb1['tScale']['length']&&(_0x548821['set'](_0x4efcb1['muT']),_0x58e87f['set'](_0x4efcb1['tScale'])),_0x20657e){for(let _0x5744b8=-0x1*-0x412+-0x28d+-0x185;_0x5744b8<_0x20657e['length'];++_0x5744b8)_0x20657e[_0x5744b8]=_0x5744b8;}_0x2db75a&&_0x4efcb1['timeOption']&&_0x2db75a['set'](_0x4efcb1['timeOption']),_0x9252dd(),_0x341baa=!(0xca3+-0x200f+0x136c),_0x106321=!(-0xc8a+-0x26d+0xef7),_0x5eb692();break;case'setTime':_0x28ff0c=_0x4efcb1['time'],_0x5eb692();break;case'setUseTemp'+'oralSort':_0x1775be=_0x4efcb1['useTempora'+'lSort'];break;case'setUseDyna'+'micSort':_0x4c53a9=_0x4efcb1['useDynamic'+'Sort'];break;case'sort':if(!_0x1933a1)return;_0x1933a1[0x1*-0xb53+-0xc41*0x3+0x3016]=_0x4efcb1['cameraPosi'+'tion']['x'],_0x1933a1[0xaca+0xc8f+0x9*-0x298]=_0x4efcb1['cameraPosi'+'tion']['y'],_0x1933a1[-0x211a+-0x344+0x2460]=_0x4efcb1['cameraPosi'+'tion']['z'],_0xd19880[-0x223a+0xa*0x12e+0x1*0x166e]=_0x4efcb1['cameraDire'+'ction']['x'],_0xd19880[0xb3a+-0xa87+-0xb2*0x1]=_0x4efcb1['cameraDire'+'ction']['y'],_0xd19880[-0x6*-0x515+0xada+-0x2956]=_0x4efcb1['cameraDire'+'ction']['z'],_0x43c3af['x']=_0x4efcb1['cameraPosi'+'tion']['x'],_0x43c3af['y']=_0x4efcb1['cameraPosi'+'tion']['y'],_0x43c3af['z']=_0x4efcb1['cameraPosi'+'tion']['z'],_0x102e73['x']=_0x4efcb1['cameraDire'+'ction']['x'],_0x102e73['y']=_0x4efcb1['cameraDire'+'ction']['y'],_0x102e73['z']=_0x4efcb1['cameraDire'+'ction']['z'],_0x5eb692();break;}};const _0x190f54=()=>{_0x144712=Math['max'](-0x1793+0x1*-0x1227+0x29c4,Math['min'](-0x1a13+-0xb2*0x6+-0x1*-0x1e53,Math['round'](Math['log2'](_0x39a1ee/(0x45+0x93e+0x8f*-0x11))))),_0x582e02=(-0x2*0x10b7+-0x1b4+0x2324)**_0x144712+(0x351*-0xb+-0xab4+-0x4b8*-0xa);},_0x51f976=_0x206faf=>{_0x41f1d7=-0x14c5*0x1+-0x2455+0x391a,_0x322b32=_0x41f1d7+_0x39a1ee*_0x42f6df*(0x8ba*0x1+0x7*-0x362+0x1*0xef7),_0x30d45f=_0x322b32+(0xd64+-0x1*0x10a3+-0x85*-0x7)*_0x42f6df*(0x9*-0xb1+0x18b7+0x93e*-0x2),_0x58407d=_0x30d45f+_0x39a1ee*_0x4210e2,_0x3d2ce9=_0x58407d+(-0x624+0x2710+0x695*-0x5)*_0x42f6df,_0x1707d9=_0x3d2ce9+(-0xdc9+0x1*0x22f+0x3df*0x3)*_0x42f6df,_0x565713=_0x1707d9+(0x25*0x66+-0x94d*0x2+0x3df)*_0x42f6df,_0x295bd2=_0x565713+(0x10*-0x218+0x1bee+0x595*0x1)*_0x42f6df,_0x469426=_0x295bd2+_0x39a1ee*_0x4210e2,_0x247c5c=new Float32Array(_0x206faf,_0x41f1d7,_0x39a1ee*(0x305*-0xb+0x2271+-0x137*0x1)),_0x2db75a=new Float32Array(_0x206faf,_0x322b32,-0xe*-0x29+0x2cd+-0x443),_0x20657e=new Uint32Array(_0x206faf,_0x30d45f,_0x39a1ee),_0x1933a1=new Float32Array(_0x206faf,_0x58407d,-0x2*0xda6+0x2079+-0x295*0x2),_0xd19880=new Float32Array(_0x206faf,_0x3d2ce9,0x1*-0x7f6+0xfd8+0xd*-0x9b),_0x564be3&&(_0x433998=_0x469426+_0x582e02*_0x4210e2,_0x3c4fec=_0x433998+_0x39a1ee*_0x42f6df,_0x9fbdcb=_0x3c4fec+_0x39a1ee*_0x42f6df,_0x3a3913=_0x9fbdcb+_0x39a1ee*(0xc76+-0x136a+-0x6f7*-0x1)*_0x42f6df,_0x548821=new Float32Array(_0x206faf,_0x433998,_0x39a1ee),_0x58e87f=new Float32Array(_0x206faf,_0x3c4fec,_0x39a1ee),_0xa816aa=new Float32Array(_0x206faf,_0x9fbdcb,_0x39a1ee*(-0x227f+0x658+0x23*0xce)),_0x8c841d=new Uint32Array(_0x206faf,_0x3a3913,_0x39a1ee));},_0x4e15d2=async _0x698ef6=>{_0x16632d=0x1aa2+-0x1b76+0xd5;const _0x4ebc13={'env':{'memory':new WebAssembly['Memory']({'initial':_0x16632d}),'pthread_self':function(){return-0x1be+0x1*0x308+-0x14a;},'emscripten_builtin_memalign':function(){return 0xf2*-0x16+-0x162f+-0x2afb*-0x1;},'loggerVec3':(_0x19b96c,_0x16ffbd,_0x3586c6,_0x14a346)=>{console['log']('C++\x20logger'+'Vec3\x20['+_0x19b96c+']\x200:'+_0x16ffbd+'\x201:'+_0x3586c6+'\x202:'+_0x14a346);},'loggerFloat':(_0x190ddc,_0x183e2e)=>{console['log']('C++\x20LogFlo'+'at\x20['+_0x190ddc+']\x20a:'+_0x183e2e);},'loggerValue':(_0x6f5dea,_0x708dd,_0x421d1b,_0x1b73bb,_0x2cd1b6)=>{console['log']('C++\x20logger'+'Value\x20['+_0x6f5dea+']\x20minDist:'+_0x708dd+'\x20maxDist:'+_0x421d1b+'\x20range:'+_0x1b73bb+'\x20divider:'+_0x2cd1b6);},'loggerCamera':(_0x18abd7,_0x32499c,_0x128d9c,_0x4af8de,_0x1228f3,_0x3a0f44,_0x5fbdb5)=>{console['log']('C++\x20logger'+'Camera\x20['+_0x18abd7+']\x20x:'+_0x32499c+'\x20y:'+_0x128d9c+'\x20z:'+_0x4af8de+'\x20dx:'+_0x1228f3+'\x20dy:'+_0x3a0f44+'\x20dz:'+_0x5fbdb5);},'loggerBound':(_0x526108,_0x10f13c,_0x375ff1,_0x3991b1,_0x389612,_0x5b4be4)=>{console['log']('C++\x20logger'+'Bound\x20minX'+':'+_0x526108+'\x20minY:'+_0x10f13c+'\x20minZ:'+_0x375ff1+'\x20maxX:'+_0x3991b1+'\x20maxY:'+_0x389612+'\x20maxZ:'+_0x5b4be4);},'loggerDebug':_0x3e6965=>{console['log']('C++\x20logger'+'Debug\x20['+_0x3e6965+']');}}};try{const _0x31c0a7=await(await fetch(_0x698ef6))['arrayBuffe'+'r']();return _0x1cffcb=(await WebAssembly['instantiat'+'e'](_0x31c0a7,_0x4ebc13))['instance'],_0x35ee99=_0x4ebc13['env']['memory'],_0x1cffcb;}catch(_0x4d1a20){throw console['error']('WASM'+':',_0x4d1a20),_0x4d1a20;}},_0x4d2d36=_0x26d2cc=>{if(_0x26d2cc<=0x4f+0x1c22*-0x1+-0x1*-0x1bd3)return-0x22bb+0x385+0x83*0x3d;let _0x54f344=_0x26d2cc*_0x42f6df*(0x610+0x16d5+-0x1ce2);_0x54f344+=_0x26d2cc*_0x4210e2,_0x54f344+=(0xbff*-0x3+-0x709+0x2b09)*_0x42f6df,_0x54f344+=(0x10c5*0x1+-0xa95+0x1*-0x62d)*_0x42f6df,_0x54f344+=(0xbc8*-0x2+0x14f9+0x29a)*_0x42f6df,_0x54f344+=(-0x12d1+-0x245c+0x3730)*_0x42f6df,_0x54f344+=_0x26d2cc*_0x42f6df,_0x54f344+=_0x582e02*_0x4210e2,_0x54f344+=(0x3e*-0x9e+0x47*-0x83+0x1b*0x2c7)*_0x42f6df*(0xbe+0xaa5+-0xb61),_0x54f344+=_0x26d2cc*_0x4210e2,_0x564be3&&(_0x54f344+=_0x26d2cc*_0x42f6df,_0x54f344+=_0x26d2cc*_0x42f6df,_0x54f344+=_0x26d2cc*_0x42f6df*(-0x168f+0x1c9a*-0x1+-0xa3c*-0x5));const _0x41a5d0=(0x9*0x346+-0x1d*-0x51+0x1f*-0x13d)*(-0x1066*0x1+-0x1264+0x26ca);return Math['ceil'](_0x54f344/_0x41a5d0);},_0x3fd15b=_0x3e56a7=>{const _0xec63a2=_0x4d2d36(_0x3e56a7);return _0xec63a2>_0x16632d?(_0x35ee99['grow'](_0xec63a2-_0x16632d),_0x16632d=_0xec63a2):_0x35ee99['grow'](0x1*0x9f7+-0xe63+0x46c),_0x35ee99['buffer'];},_0x9252dd=()=>{if(!_0x1cffcb)return;const {calcAABB:_0x58fbe}=_0x1cffcb['exports'];_0x58fbe(_0x41f1d7,_0x1707d9,_0x565713,_0x39a1ee);},_0x5eb692=()=>{_0x1a6679&&clearTimeout(_0x1a6679),_0x1a6679=setTimeout(()=>{_0x1a6679=null,_0x49fe84();},-0x8b3+0x2061+0x2*-0xbd7);},_0x49fe84=()=>{if(!_0x1cffcb||!_0x341baa||_0x20657e['length']!==_0x39a1ee||_0x30d45f===null||_0x41f1d7===null||_0x58407d===null||_0x3d2ce9===null||_0x1707d9===null||_0x565713===null)return;const _0x14c35d=_0x1933a1[0x22*-0xd4+0x101*-0xa+-0x2*-0x1319],_0xbcfd32=_0x1933a1[-0x30e*0xc+0x1e3d+0x66c],_0x5bd139=_0x1933a1[0xaed+0x6*-0x1a3+-0x1*0x119],_0x2d2cdb=_0xd19880[-0x4*-0xad+0x26c5*-0x1+-0x1*-0x2411],_0x39e72a=_0xd19880[0x865+-0x635*0x5+-0x155*-0x11],_0x590ca0=_0xd19880[0x774+0x1a38*-0x1+0x12c6],_0x5062d4=-0x357+0x23bb+0x1*-0x2064+0.001;if(!_0x106321&&Math['abs'](_0x14c35d-_0x2929f8['x'])<_0x5062d4&&Math['abs'](_0xbcfd32-_0x2929f8['y'])<_0x5062d4&&Math['abs'](_0x5bd139-_0x2929f8['z'])<_0x5062d4&&Math['abs'](_0x2d2cdb-_0x1f6620['x'])<_0x5062d4&&Math['abs'](_0x39e72a-_0x1f6620['y'])<_0x5062d4&&Math['abs'](_0x590ca0-_0x1f6620['z'])<_0x5062d4&&Math['abs'](_0x28ff0c-_0xaa334f)<-0x23fb*-0x1+0xe70+-0x326b*0x1+0.01)return;if(_0x49d6dd){_0x4ede2d=!(0x1de*-0x12+-0x2169+0x4305);return;}_0x49d6dd=!(0x1322+0x2175+0x3497*-0x1),_0x106321=!(-0x111*0x1f+0x2c8+-0x18*-0x143),_0xaa334f=_0x28ff0c,_0x2929f8['x']=_0x14c35d,_0x2929f8['y']=_0xbcfd32,_0x2929f8['z']=_0x5bd139,_0x1f6620['x']=_0x2d2cdb,_0x1f6620['y']=_0x39e72a,_0x1f6620['z']=_0x590ca0,_0x4ede2d=!(-0xcd9+0x6f2+-0x3*-0x1f8);const {sortIndexes:_0x5e4d82}=_0x1cffcb['exports'];try{const _0x3810c3=_0x5e4d82(_0x30d45f,_0x41f1d7,_0x9fbdcb,_0x433998,_0x3c4fec,_0x58407d,_0x3d2ce9,_0x1707d9,_0x565713,_0x295bd2,_0x469426,_0x28ff0c||-0x27a*-0x3+-0xac0+0x352,_0x1775be,_0x4c53a9,_0x564be3,_0x39a1ee,_0x582e02,_0x144712,_0x322b32,_0x3a3913),_0x426ef3=new Uint32Array(_0x20657e);if(_0x3810c3===-0x23c7+-0x4*-0x685+0x9b3){debugger;console['log']('____\x20ENGIN'+'E','Indexes\x20co'+'unt\x20===\x20',_0x3810c3);}const _0x46725c=_0x39a1ee!==_0x1aef74||_0x49c237!==_0x2bcc05;self['postMessag'+'e']({'type':'sortComple'+'ted','count':_0x3810c3,'order':_0x426ef3,'isNewOrder':_0x46725c},[_0x426ef3['buffer']]),_0x1aef74=_0x39a1ee,_0x49c237=_0x2bcc05;}catch(_0x186911){console['error'](':',_0x186911),self['postMessag'+'e']({'type':'error','error':_0x186911['message']});}_0x49d6dd=!(-0x1*-0x14a1+0x173d+-0x2bdd),_0x4ede2d&&_0x5eb692();};}class kA extends me{constructor(){super(),h(this,'worker',null),h(this,'numSplats',-0xfb5+0x12b5*-0x1+0x226a),h(this,'is4d',!(-0xb80+0xfcf+0x1*-0x44f)),h(this,'sortStartT'+'ime',-0x1123+-0x2387+0x34aa),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'data',{}),(this['orderTextu'+'re']=null,this['backOrderT'+'exture']=null,this['worker']=null,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+NA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x131d25=>{var _0x2a18cb;if(!this['worker'])return;const {data:_0x33272c}=_0x131d25;switch(_0x33272c['type']){case'initialize'+'d':this['fire']('initialize'+'d');break;case'sortComple'+'ted':_0x33272c['order']&&(_0x33272c['isNewOrder']&&(this['orderTextu'+'re']=this['backOrderT'+'exture']),(_0x2a18cb=this['orderTextu'+'re'])==null||_0x2a18cb['write'](0x2*-0x5b3+0x1790+-0x1*0xc2a,-0x1c93+-0x114a*0x2+-0x3*-0x150d,this['orderTextu'+'re']['width'],this['orderTextu'+'re']['height']-(-0x229d*0x1+0x1dee*-0x1+0x408c),_0x33272c['order']));let _0x5b33ce=-0x48f*0x1+-0x486+0x915;this['sortStartT'+'ime']!==-0xe*-0x2f+0x236a+-0x11e*0x22&&(_0x5b33ce=performance['now']()-this['sortStartT'+'ime']),this['fire']('updated',_0x131d25['data']['count'],_0x5b33ce,_0x33272c['isNewOrder']),this['sortStartT'+'ime']=0x4b8*0x1+-0x1d7e+-0x6*-0x421;break;case'error':console['error']('Worker:',_0x33272c['error']),this['fire']('error',_0x33272c['error']);break;}};const _0x31a98c='https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/sorter-t'+'railing.wa'+'sm?t='+Date['now']();this['worker']['postMessag'+'e']({'type':'initWorker','sortWasmUrl':_0x31a98c});}['initData'](_0x263b5a,_0x5529a2,_0x593b72,_0x333025,_0x5ab92d,_0x3d31b9,_0x176fa4,_0x513c72){var _0x262bc9;this['is4d']=_0x513c72,this['numSplats']=_0x5529a2['length']/(-0x713*0x5+-0x1*0x1b6b+0x3ecd),(!_0x176fa4||_0x176fa4['length']===-0x1bcb+0x1*0x18bb+-0x188*-0x2)&&(_0x176fa4=[-0xbe*0x8+-0x1543+0x21*0xd3,-0x1dc+0x18*0xe6+-0x1378]),this['orderTextu'+'re']||(this['orderTextu'+'re']=_0x263b5a),this['backOrderT'+'exture']=_0x263b5a;const _0x1c80e3=new Date()['getTime']();(_0x262bc9=this['worker'])==null||_0x262bc9['postMessag'+'e']({'type':'initData','centers':_0x5529a2,'muT':_0x593b72,'tScale':_0x333025,'motion':_0x5ab92d,'timeIndex':_0x3d31b9,'timeOption':_0x176fa4,'is4d':_0x513c72,'id':_0x1c80e3});}['setCamera'](_0x750492,_0x193474){this['worker']&&(!_0x750492||!_0x193474||(this['data']['cameraPosi'+'tion']={'x':_0x750492['x'],'y':_0x750492['y'],'z':_0x750492['z']},this['data']['cameraDire'+'ction']={'x':_0x193474['x'],'y':_0x193474['y'],'z':_0x193474['z']},this['sortStartT'+'ime']===-0x1f9*0x3+-0x1*-0xd2b+-0x740&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'sort','cameraPosition':{'x':_0x750492['x'],'y':_0x750492['y'],'z':_0x750492['z']},'cameraDirection':{'x':_0x193474['x'],'y':_0x193474['y'],'z':_0x193474['z']}})));}['setCurrent'+'Time'](_0x377a80){this['worker']&&(this['data']['time']=_0x377a80,this['sortStartT'+'ime']===0x4*0x36e+-0x16fb+0x943&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'setTime','time':_0x377a80}));}['setUseTemp'+'oralSort'](_0x353898){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseTemp'+'oralSort','useTemporalSort':_0x353898});}['setUseDyna'+'micSort'](_0x32c10b){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseDyna'+'micSort','useDynamicSort':_0x32c10b});}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}const UA=new te(),Na=new D(),ka=new D(),rc=[0x1ee1+0xb97+0x1*-0x2a78,0x150d+0x1*0x1fe1+-0x10f*0x32];class BA{constructor(_0x6f0bc4,_0x5f99e0={}){h(this,'resource'),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'_material'),h(this,'meshInstan'+'ce'),h(this,'options',{}),h(this,'sorter',null),h(this,'time',0x1bce+0x18c0+-0x348e),h(this,'lastCamera'+'Position',new D()),h(this,'lastCamera'+'Direction',new D()),h(this,'resolveSH',null),h(this,'cameras',[]),h(this,'forceUpDat'+'eSorterTim'+'e',(_0x24478b,_0x3d1dfc=void(0x113f+0x1fc0+-0x30ff))=>{(_0x3d1dfc||_0x3d1dfc===0xc*-0x1fd+0x743*0x1+0x1099)&&(this['material']['setParamet'+'er']('uTime',_0x3d1dfc),this['updateTime'](_0x3d1dfc)),this['sort'](_0x24478b);}),(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Instance',_0x6f0bc4['numSplats']),this['resource']=_0x6f0bc4,this['orderTextu'+'re']=this['resource']['createText'+'ure']('splatOrder',Yi,this['resource']['evalTextur'+'eSize'](this['resource']['numSplats'])),this['backOrderT'+'exture']=null,_0x5f99e0['material']?(this['_material']=_0x5f99e0['material'],this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])):(this['_material']=new Bn({'uniqueName':'SplatMater'+'ial','vertexGLSL':'#include\x20\x22'+'gsplatVS\x22','fragmentGLSL':'#include\x20\x22'+'gsplatPS\x22','vertexWGSL':'#include\x20\x22'+'gsplatVS\x22','fragmentWGSL':'#include\x20\x22'+'gsplatPS\x22','attributes':{'vertex_position':Pe,'vertex_id_attrib':Xc}}),this['configureM'+'aterial'](this['_material']),this['_material']['update']()),this['meshInstan'+'ce']=new He(this['resource']['mesh'],this['_material']),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(-0x1a4+-0x148+0xb*0x44)),this['meshInstan'+'ce']['gsplatInst'+'ance']=this,this['meshInstan'+'ce']['instancing'+'Count']=-0x2684+-0x10fd+-0x3781*-0x1,this['sorter']=new kA(),this['sorter']['on']('initialize'+'d',()=>{var _0x353c9,_0x38192b,_0x1409b2,_0x13c3d9,_0x5a061f,_0x41d6a9,_0x622a5b,_0x2ef0e1,_0x4fa943,_0x5cd3a0,_0x3ddc60;const _0x45842f=new Float32Array(this['resource']['centers']['buffer']['slice']()),_0x22288b=new Float32Array(((_0x38192b=(_0x353c9=this['resource']['muT'])==null?void(0x3e*-0x5c+0xce8+-0x30*-0x32):_0x353c9['buffer'])==null?void(-0xe9*0x16+-0xd1*-0x1e+0x11e*-0x4):_0x38192b['slice']())??new Float32Array()),_0x276e04=new Float32Array(((_0x13c3d9=(_0x1409b2=this['resource']['tScale'])==null?void(0xc6c*-0x1+-0x1105+-0x1d71*-0x1):_0x1409b2['buffer'])==null?void(-0x9e4*0x1+0x159d+-0xbb9):_0x13c3d9['slice']())??new Float32Array()),_0xac33e5=new Float32Array(((_0x41d6a9=(_0x5a061f=this['resource']['motion'])==null?void(0xaaf+-0x19bb+0xf0c):_0x5a061f['buffer'])==null?void(-0xe7b+0x5*0xd7+0xa48):_0x41d6a9['slice']())??new Float32Array()),_0x416f26=new Float32Array(((_0x2ef0e1=(_0x622a5b=this['resource']['timeIndex'])==null?void(0x120f+-0x1a*0x8a+-0x40b):_0x622a5b['buffer'])==null?void(-0x106*-0x13+-0x2175*-0x1+-0x1*0x34e7):_0x2ef0e1['slice']())??new Float32Array(-0x16eb*-0x1+0x1*0x45d+0x18*-0x123)),_0x2f8f3d=new Float32Array(((_0x5cd3a0=(_0x4fa943=this['resource']['timeOption'])==null?void(0xf3f+0x1d1c+-0x2c5b):_0x4fa943['buffer'])==null?void(0x1*-0x14a2+-0x34*0x6d+-0x5*-0x88e):_0x5cd3a0['slice']())??new Float32Array());(_0x3ddc60=this['sorter'])==null||_0x3ddc60['initData'](this['orderTextu'+'re'],_0x45842f,_0x22288b,_0x276e04,_0xac33e5,_0x416f26,_0x2f8f3d,this['resource']['is4D']);}),this['sorter']['on']('updated',async(_0x490b7f,_0x5a4003,_0x13cd18)=>{var _0x362c3d;this['meshInstan'+'ce']['instancing'+'Count']=Math['ceil'](_0x490b7f/this['resource']['instanceSi'+'ze']),_0x13cd18&&this['backOrderT'+'exture']&&(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatInst'+'ance\x20updat'+'ed'),[this['orderTextu'+'re'],this['backOrderT'+'exture']]=[this['backOrderT'+'exture'],this['orderTextu'+'re']],await this['resource']['updateText'+'ure'](),this['resource']['configureM'+'aterial'](this['_material']),this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])),_0x13cd18&&((_0x362c3d=this['resource'])==null||_0x362c3d['fireAssets'+'ManagerTim'+'eIndex']()),this['material']['setParamet'+'er']('numSplats',_0x490b7f);}),this['setHighQua'+'litySH'](_0x5f99e0['highQualit'+'ySH']??!(0x17cf+0x17*-0x7f+-0xc65)));}async['updateInst'+'anceData'](_0x433449){var _0x2537c1,_0x33f89d;console['log']('____\x20ENGIN'+'E\x20IVAN','updateInst'+'anceData\x20A'+'SSETS\x20GSpl'+'atInstance',_0x433449['numSplats']),this['resource']=_0x433449;const _0x47d5f4=this['resource']['evalTextur'+'eSize'](_0x433449['centers']['length']/(0x2*0xca6+0x1c1c+0x1*-0x3565));return(_0x2537c1=this['backOrderT'+'exture'])==null||_0x2537c1['destroy'](),this['backOrderT'+'exture']=this['resource']['createText'+'ure']('splatOrder'+'2',Yi,_0x47d5f4),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(-0x2*-0x62a+-0x1*0x6ab+-0x5a9)),(_0x33f89d=this['sorter'])==null||_0x33f89d['initData'](this['backOrderT'+'exture'],_0x433449['centers'],_0x433449['muT'],_0x433449['tScale'],_0x433449['motion'],_0x433449['timeIndex'],_0x433449['timeOption'],_0x433449['is4D']),new Promise(_0x5bb836=>{var _0x2b82c9;const _0xc9daf1=(_0x4d8fdf,_0x29b43a,_0x3a5c90)=>{var _0x4016fe;_0x3a5c90&&((_0x4016fe=this['sorter'])==null||_0x4016fe['off']('updated',_0xc9daf1),_0x5bb836(!(0xb*-0x160+-0x4d*0xf+0x1c9*0xb)));};(_0x2b82c9=this['sorter'])==null||_0x2b82c9['on']('updated',_0xc9daf1);});}['destroy'](){var _0x1c3baa,_0x3cb558,_0x2481cb,_0x4c75e1,_0x32af7c,_0x5397b;(_0x1c3baa=this['resolveSH'])==null||_0x1c3baa['destroy'](),(_0x3cb558=this['material'])==null||_0x3cb558['destroy'](),(_0x2481cb=this['meshInstan'+'ce'])==null||_0x2481cb['destroy'](),(_0x4c75e1=this['sorter'])==null||_0x4c75e1['destroy'](),(_0x32af7c=this['orderTextu'+'re'])==null||_0x32af7c['destroy'](),(_0x5397b=this['backOrderT'+'exture'])==null||_0x5397b['destroy']();}set['material'](_0x24fd82){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.set\x20'+'material'),this['_material']!==_0x24fd82&&(this['_material']=_0x24fd82,this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x24fd82));}get['material'](){return this['_material'];}['configureM'+'aterial'](_0x4623bd,_0x98ce56={}){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.conf'+'igureMater'+'ial'),this['resource']['configureM'+'aterial'](_0x4623bd),_0x4623bd['setParamet'+'er']('numSplats',-0x1*-0x213b+0x467*0x5+-0x373e),_0x4623bd['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),_0x4623bd['setParamet'+'er']('alphaClip',0x4f2*0x5+0x1dde+-0x3698+0.3),_0x4623bd['setDefine']('DITHER_'+(_0x98ce56['dither']?'BLUENOISE':'NONE'),''),_0x4623bd['cull']=bt,_0x4623bd['blendType']=_0x98ce56['dither']?Cs:Zs,_0x4623bd['depthWrite']=!!_0x98ce56['dither'];}['updateView'+'port'](_0x8099bb){var _0xe073fc;const _0x500c27=_0x8099bb==null?void(-0x2*-0x9c1+-0x2f*0xab+0xbe3):_0x8099bb['camera'],_0xeb57ef=_0x500c27==null?void(0x1dd2+0x15b*0x1c+-0x43c6):_0x500c27['renderTarg'+'et'],{width:_0x2e21b4,height:_0x3c0bb8}=_0xeb57ef??this['resource']['device'];rc[0x445*-0x5+0x1d*0x115+-0xa08]=_0x2e21b4,rc[-0x2ab*-0x4+-0x269*-0x4+-0x144f*0x1]=_0x3c0bb8;const _0x2d73e5=(_0xe073fc=_0x500c27==null?void(0x1642+-0x68e+-0xfb4):_0x500c27['camera'])==null?void(0x739+-0x194c+0x1213):_0xe073fc['xr'];_0x2d73e5!=null&&_0x2d73e5['active']&&_0x2d73e5['views']['list']['length']===-0xa7*-0x17+0x1423+-0x1191*0x2&&(rc[-0x1aa3*0x1+0x2602+-0xb5f]*=0x2705+-0x24c*-0xc+0xd51*-0x5+0.5),this['material']['setParamet'+'er']('viewport',rc);}['sort'](_0x5f57a5){if(this['sorter']){const _0x22e6d5=_0x5f57a5['getWorldTr'+'ansform']();_0x22e6d5['getTransla'+'tion'](Na),_0x22e6d5['getZ'](ka);const _0x5044fd=this['meshInstan'+'ce']['node']['getWorldTr'+'ansform'](),_0x161eff=UA['invert'](_0x5044fd);_0x161eff['transformP'+'oint'](Na,Na),_0x161eff['transformV'+'ector'](ka,ka),(!Na['equalsAppr'+'ox'](this['lastCamera'+'Position'])||!ka['equalsAppr'+'ox'](this['lastCamera'+'Direction']))&&(this['lastCamera'+'Position']['copy'](Na),this['lastCamera'+'Direction']['copy'](ka),this['sorter']['setCamera'](Na,ka)),this['sorter']['setCurrent'+'Time'](this['time']);}this['updateView'+'port'](_0x5f57a5);}['update'](){var _0x5a88b1;if(this['cameras']['length']>-0x1*0x1a0b+-0x1d*-0x4e+0x1135){const _0x4ce50c=this['cameras'][-0x1094+0x179e+-0x70a];this['sort'](_0x4ce50c['_node']),(_0x5a88b1=this['resolveSH'])==null||_0x5a88b1['render'](_0x4ce50c['_node'],this['meshInstan'+'ce']['node']['getWorldTr'+'ansform']()),this['cameras']['length']=-0x23f1+-0x96f+-0x160*-0x21;}}['setHighQua'+'litySH'](_0x27a8ec){const {resource:_0x31ba5d}=this,{gsplatData:_0x4895bc}=_0x31ba5d;_0x4895bc instanceof FA&&_0x4895bc['shBands']>0xc7c+-0x1d1b+0x109f&&_0x27a8ec===!!this['resolveSH']&&(this['resolveSH']?(this['resolveSH']['destroy'](),this['resolveSH']=null):this['resolveSH']=new DA(_0x31ba5d['device'],this));}['updateTime'](_0x40db01){this['time']=_0x40db01;}}class Zy{constructor(_0x298042,_0x5e7e5d){h(this,'sceneInfo',{}),h(this,'isDestroye'+'d',!(-0x3*0x4fc+0x1*0x1dc3+-0xecf)),h(this,'device'),h(this,'gsplatData'),h(this,'centers'),h(this,'aabb'),h(this,'mesh'),h(this,'instanceIn'+'dices'),h(this,'gsplatInst'+'ance'),(this['device']=_0x298042,this['gsplatData']=_0x5e7e5d,this['isDestroye'+'d']=!(-0x1*0x1196+-0x20a1+0x3238));const _0x5d7f35=-0x2437+0x1bc3*-0x1+0xabf*0x6,_0x3331b6=Math['ceil'](_0x5e7e5d['numSplats']/_0x5d7f35)*_0x5d7f35/_0x5d7f35,_0x16bd66=new Uint32Array(_0x3331b6);for(let _0x1b33d4=-0x1a7a+-0x395+0x1e0f;_0x1b33d4<_0x3331b6;++_0x1b33d4)_0x16bd66[_0x1b33d4]=_0x1b33d4*_0x5d7f35;const _0x16023e=new kt(_0x298042,[{'semantic':Xc,'components':0x1,'type':Vo,'asInt':!(-0x16a3+0x2*0x88c+0x21*0x2b)}]),_0xc74d80=new Float32Array((0x1*0x112a+0xd*-0x59+-0x2b*0x4b)*_0x5d7f35),_0x5b1caa=new Uint32Array((0xa44+0x4*-0x8e+-0x806)*_0x5d7f35);for(let _0x381510=0x119a+-0x17f7+0x65d;_0x381510<_0x5d7f35;++_0x381510){_0xc74d80['set']([-(0x2539+-0x1*0x1ae+-0x1*0x238a),-(-0x7b2+0x1e7a+-0x16c7),_0x381510,-0x6e1+0x7*0x3b7+0x5*-0x3d3,-(0xa3*-0x2e+-0x2*-0xe4b+0xb5),_0x381510,-0x823*-0x4+0x1c7e+-0x3d09,-0x4f5+0x147a+-0xf84,_0x381510,-(0x8d7+0xc0d+-0x14e3*0x1),0x1de4+-0x21b9*0x1+0x2*0x1eb,_0x381510],_0x381510*(-0x136e+-0x16fd+0x2a77));const _0x395476=_0x381510*(-0x1e65+0x2*-0x1dd+0x3*0xb61);_0x5b1caa['set']([0x1*0x1762+0x1642+-0x2da4+_0x395476,0x872*-0x2+0x2d0*-0xb+0x9b*0x4f+_0x395476,0x251e+-0x26eb+0x1cf+_0x395476,0x59d+-0x22aa+0x1d0d+_0x395476,0x541*0x7+0x1*0x1596+-0x3a5b+_0x395476,0xed4+0x2e0+-0x11b1*0x1+_0x395476],_0x381510*(-0x838*0x2+-0x3*-0x103+0x1*0xd6d));}this['mesh']=new Ge(_0x298042),this['mesh']['setPositio'+'ns'](_0xc74d80,-0x12b8+0x184b+0x1*-0x590),this['mesh']['setIndices'](_0x5b1caa),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),this['instanceIn'+'dices']=new Ds(_0x298042,_0x16023e,_0x3331b6,{'usage':ms,'data':_0x16bd66['buffer']});}['updateData'](){var _0x59c054;const _0x896a45=this['gsplatData'];if(!_0x896a45)return;const _0x4dec25=-0x1526+-0x66*0x51+0x35ec,_0x10fb5c=Math['ceil'](_0x896a45['numSplats']/_0x4dec25)*_0x4dec25/_0x4dec25,_0x1eb4af=new Uint32Array(_0x10fb5c);for(let _0xcac751=0xfc5*0x1+-0x1a*0x16+-0xd89;_0xcac751<_0x10fb5c;++_0xcac751)_0x1eb4af[_0xcac751]=_0xcac751*_0x4dec25;const _0xb62e57=new kt(this['device'],[{'semantic':Xc,'components':0x1,'type':Vo,'asInt':!(-0x123*0x11+-0x1*-0x2383+-0x94*0x1c)}]),_0x722a18=new Float32Array((0x3b*0xe+0xf1a*0x2+-0x2162)*_0x4dec25),_0x377af8=new Uint32Array((-0x3d1*-0x2+0xfd3*-0x1+0x1*0x837)*_0x4dec25);for(let _0x5749b9=0xf8+-0x1061+0xf69;_0x5749b9<_0x4dec25;++_0x5749b9){_0x722a18['set']([-(0x10dc+-0x9db+0x70*-0x10),-(0x1084+-0x4*-0x874+-0x3253*0x1),_0x5749b9,0xba1+0x6ea+-0x2a6*0x7,-(-0x9b9*0x4+0x4*0x5+0x26d1),_0x5749b9,0xdbd*0x2+0x1332+-0x2eab,-0x1*-0x12df+-0x26d2+-0x9fa*-0x2,_0x5749b9,-(0x7*0x518+-0x6cd+-0x3*0x99e),-0x4c1*0x5+-0x7*-0x2+0x1fa*0xc,_0x5749b9],_0x5749b9*(0x33*-0x1f+-0x2225+-0x1*-0x285e));const _0x20a84f=_0x5749b9*(0x1a7f+0x203b*-0x1+0x4*0x170);_0x377af8['set']([-0x4b*0x47+0x2185+0x58*-0x25+_0x20a84f,0xfb3*-0x2+0x116d+-0x1*-0xdfa+_0x20a84f,-0x9*0x163+-0x18d7*0x1+0x2554+_0x20a84f,0x1bb5+0x11a2+-0x2d57+_0x20a84f,0x977*-0x3+0x23b0+-0x749+_0x20a84f,0x2*0x124f+0x95c*-0x2+-0x11e3+_0x20a84f],_0x5749b9*(-0xa30+-0x1a7b+-0x1f*-0x12f));}this['mesh']['setPositio'+'ns'](_0x722a18,-0x1*-0x1f51+-0x2189+-0x1*-0x23b),this['mesh']['setIndices'](_0x377af8),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),(_0x59c054=this['instanceIn'+'dices'])==null||_0x59c054['destroy'](),this['instanceIn'+'dices']=new Ds(this['device'],_0xb62e57,_0x10fb5c,{'usage':ms,'data':_0x1eb4af['buffer']});}['updateText'+'ure'](){}['destroy'](){var _0x3f8a9b,_0x479132,_0x26da95,_0x3bcd0b;(_0x3f8a9b=this['mesh'])==null||_0x3f8a9b['destroy'](),(_0x479132=this['instanceIn'+'dices'])==null||_0x479132['destroy'](),(_0x26da95=this['gsplatData'])==null||_0x26da95['destroy'](),this['gsplatData']=null,(_0x3bcd0b=this['gsplatInst'+'ance'])==null||_0x3bcd0b['destroy'](),this['gsplatInst'+'ance']=void(-0x22f9+-0x2304+0x45fd),this['isDestroye'+'d']=!(-0x267b+-0x11ac+-0x5*-0xb3b),this['mesh']=null;}get['instanceSi'+'ze'](){return 0x89e+0x141d*-0x1+-0x25*-0x53;}get['numSplats'](){var _0x4f8d4b;return(_0x4f8d4b=this['gsplatData'])==null?void(-0x1*-0x20d5+-0x11*-0x70+-0x1*0x2845):_0x4f8d4b['numSplats'];}['setSceneIn'+'fo'](_0x2b066a){}['configureM'+'aterial'](_0x89ea10){}['evalTextur'+'eSize'](_0xb1df6d){return J['ZERO'];}['appendGSpl'+'atResource'](_0xa50f28,_0x41f3c6,_0x2d46ac,_0x4af060,_0x4fbddf){}['fireAssets'+'ManagerTim'+'eIndex'](){}['createText'+'ure'](_0x4761ad,_0x45d55e,_0x1d4c63,_0x54fc7b){return new _e(this['device'],{'name':_0x4761ad,'width':_0x1d4c63['x'],'height':_0x1d4c63['y'],'format':_0x45d55e,'cubemap':!(0x1*0x21c7+0x7a*0x51+-0x486*0x10),'mipmaps':!(0x1*-0x118d+0x1a*0x72+0x5fa),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,..._0x54fc7b?{'levels':[_0x54fc7b]}:{}});}['instantiat'+'e'](){w['removed']('GSplatReso'+'urce.insta'+'ntiate\x20is\x20'+'removed.\x20U'+'se\x20gsplat\x20'+'component\x20'+'instead');}['createInst'+'ance'](_0x3a5fa0,_0x33d548){return this['gsplatInst'+'ance']=new BA(_0x3a5fa0,_0x33d548),this['gsplatInst'+'ance'];}}async function zA(){const _0x2405e4=new Float32Array(-0x1*-0xf68+0x2*-0x4ca+-0x1f1*0x3),_0x3addc5=new Int32Array(_0x2405e4['buffer']);let _0x4515a2=null,_0x30c3ca=null,_0x1bbe07=null,_0x4bdfa2=null,_0xd8a769=null,_0xe384fa=null,_0x1b21b3=null,_0x1a8e97=null;self['onmessage']=async _0x220825=>{const {data:_0x2aff5f}=_0x220825;switch(_0x2aff5f['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x4c0ffd(_0x2aff5f['numSplats'],_0x2aff5f['shBands'],_0x2aff5f['SHData']);break;case'updateColo'+'rData':_0xcfdcfb(_0x2aff5f['numSplats'],_0x2aff5f['cr'],_0x2aff5f['cg'],_0x2aff5f['cb'],_0x2aff5f['ca']);break;case'updateTran'+'sformData':_0x461b79(_0x2aff5f['numSplats'],_0x2aff5f['is4D'],_0x2aff5f['x'],_0x2aff5f['y'],_0x2aff5f['z'],_0x2aff5f['rx'],_0x2aff5f['ry'],_0x2aff5f['rz'],_0x2aff5f['rw'],_0x2aff5f['mx'],_0x2aff5f['my'],_0x2aff5f['mz'],_0x2aff5f['sx'],_0x2aff5f['sy'],_0x2aff5f['sz'],_0x2aff5f['muT'],_0x2aff5f['tScale']);break;case'calcAabb':_0x20599c(_0x2aff5f['numSplats'],_0x2aff5f['x'],_0x2aff5f['y'],_0x2aff5f['z'],_0x2aff5f['sx'],_0x2aff5f['sy'],_0x2aff5f['sz']);break;case'destroyWor'+'ker':_0x5d2a05();break;}};class _0x1fd47f{constructor(_0x293534=-0x25d*0x1+0x1*0x1f53+-0xe7b*0x2,_0x8ce8c1=-0x4f*-0xd+-0x24b4+0x20b1,_0x576f5f=-0x60c+-0x1*0x1163+0x359*0x7,_0x18b2e6=-0xc8c+-0x1*-0x1c6a+-0xfdd){this['x']=_0x293534,this['y']=_0x8ce8c1,this['z']=_0x576f5f,this['w']=_0x18b2e6;}['set'](_0x47477e,_0xb2c2ae,_0x24f40e,_0x2cd675){return this['x']=_0x47477e,this['y']=_0xb2c2ae,this['z']=_0x24f40e,this['w']=_0x2cd675,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x598f24=this){let _0x589aa7=_0x598f24['length']();return _0x589aa7===-0x1*0x15a8+-0x259*0x5+0x2165?(this['x']=this['y']=this['z']=-0x1583+0x39*-0x15+0x1a30,this['w']=0x2e7*0x7+-0x592+-0xebe):(_0x589aa7=(-0x49*0x4+-0x1*-0x1593+-0x146e)/_0x589aa7,this['x']=_0x598f24['x']*_0x589aa7,this['y']=_0x598f24['y']*_0x589aa7,this['z']=_0x598f24['z']*_0x589aa7,this['w']=_0x598f24['w']*_0x589aa7),this;}['mulScalar'](_0x528eb5,_0x442a3f=this){return this['x']=_0x442a3f['x']*_0x528eb5,this['y']=_0x442a3f['y']*_0x528eb5,this['z']=_0x442a3f['z']*_0x528eb5,this['w']=_0x442a3f['w']*_0x528eb5,this;}}const _0x18e2cb=_0x5d084c=>{_0x2405e4[-0xcf8+-0x1a8c+0xd2c*0x3]=_0x5d084c;const _0x15d432=_0x3addc5[-0x8*-0x190+0x1933*0x1+-0x3*0xc91];let _0x7c79b2=_0x15d432>>0x1a3c+-0x187b+-0x1b1&0x2f*0x503+-0xdbe+-0x5dcf*0x1,_0x508af7=_0x15d432>>-0x1a*0x2b+0x1*0x2407+-0x1f9d&0x2*0xf11+0x18e*-0x7+-0xb41;const _0x664e02=_0x15d432>>-0x18a*0x4+-0x10f*0x1d+0x1279*0x2&0xce5*-0x2+0x221b*0x1+-0x752*0x1;return _0x664e02<0x1*0x342+0x2*0x10a5+-0x2425*0x1?_0x7c79b2:_0x664e02>0x1*-0x1d7f+-0x238+0x2045?(_0x7c79b2|=-0xa751+0x1b47*-0x2+0x31*0x70f,_0x7c79b2|=(_0x664e02===-0x191c+-0x1b*-0x97+0x517*0x2?-0x78f+-0x11*-0xd1+-0x652:0x2357*0x1+-0xa*-0x112+0x53*-0x8e)&&_0x15d432&0x3a129f+-0x7fea*0xdc+0xb3da78,_0x7c79b2):_0x664e02<-0x439+0x1*-0x17bf+0x1c69?(_0x508af7|=0x1632+-0xd77+-0xbb,_0x7c79b2|=(_0x508af7>>-0x960+-0x2fb*-0x1+0x6d7-_0x664e02)+(_0x508af7>>-0x989*-0x4+0x232c+-0x48df-_0x664e02&-0x35f*0x5+0x960+-0x77c*-0x1),_0x7c79b2):(_0x7c79b2|=_0x664e02-(-0x26*-0xbb+0x21e7+-0x1*0x3d39)<<-0x1*0x243+-0x1*-0x679+0xb2*-0x6|_0x508af7>>-0xf8b+-0x5a2+0x152e,_0x7c79b2+=_0x508af7&0x515+-0x17bc+-0x638*-0x3,_0x7c79b2);},_0x20599c=(_0x127d00,_0x470e14,_0x25a488,_0x453860,_0x2f66b7,_0x459eda,_0x31aaf5)=>{let _0x274538=-0x7*0x3f3+0x232d*-0x1+0xb*0x5b6,_0x179519=0xee7*0x2+0x1f33+-0x2a7*0x17,_0x3c01c8=0x2*-0x1127+-0x518+-0x13b3*-0x2,_0x2660f3=-0x1a50+-0x5b*-0x4e+0x16a*-0x1,_0x1e62d6=-0xe*-0x127+0x31*-0x21+-0x9d1,_0x15e7e0=-0x10f8+0x5*-0x35+-0x1*-0x1201,_0x3dd9c8=!(0x468+0x1ba8+-0x10*0x201);const _0x369cd4=new Float32Array(0x215f*-0x1+0x4a0*0x4+0xee2),_0x2c4733=new Float32Array(0x1f84+-0x3*-0x675+-0x1970*0x2);for(let _0x2a0e0c=-0x15aa+-0xc77*0x3+0x3b0f;_0x2a0e0c<_0x127d00;++_0x2a0e0c){const _0x16c0a3=_0x470e14[_0x2a0e0c],_0x1622b7=_0x25a488[_0x2a0e0c],_0x5352ce=_0x453860[_0x2a0e0c],_0x8e5c71=Math['max'](_0x2f66b7[_0x2a0e0c],_0x459eda[_0x2a0e0c],_0x31aaf5[_0x2a0e0c]);if(!isFinite(_0x16c0a3)||!isFinite(_0x1622b7)||!isFinite(_0x5352ce)||!isFinite(_0x8e5c71))continue;const _0x41db62=(-0x1*-0x13f3+0xb9b+-0x1f8c)*Math['exp'](_0x8e5c71);_0x3dd9c8?(_0x3dd9c8=!(-0x182*0x1+-0x107c+0x11ff),_0x274538=_0x16c0a3-_0x41db62,_0x179519=_0x1622b7-_0x41db62,_0x3c01c8=_0x5352ce-_0x41db62,_0x2660f3=_0x16c0a3+_0x41db62,_0x1e62d6=_0x1622b7+_0x41db62,_0x15e7e0=_0x5352ce+_0x41db62):(_0x274538=Math['min'](_0x274538,_0x16c0a3-_0x41db62),_0x179519=Math['min'](_0x179519,_0x1622b7-_0x41db62),_0x3c01c8=Math['min'](_0x3c01c8,_0x5352ce-_0x41db62),_0x2660f3=Math['max'](_0x2660f3,_0x16c0a3+_0x41db62),_0x1e62d6=Math['max'](_0x1e62d6,_0x1622b7+_0x41db62),_0x15e7e0=Math['max'](_0x15e7e0,_0x5352ce+_0x41db62));}_0x3dd9c8||(_0x369cd4[0x1*0x247d+0xfd9+-0x3456]=(_0x274538+_0x2660f3)*(-0x6df*-0x1+0x14e*0x7+0x11*-0xf1+0.5),_0x369cd4[-0x1*-0x647+0x2644+0x1*-0x2c8a]=(_0x179519+_0x1e62d6)*(0x100c+-0x1*0x567+-0x6d*0x19+0.5),_0x369cd4[-0x2677+0x9b9*-0x1+0x3032]=(_0x3c01c8+_0x15e7e0)*(0x1334*-0x2+0xbf*0x2+0x24ea+0.5),_0x2c4733[-0x23aa+-0x1787+0x3b31]=(_0x2660f3-_0x274538)*(-0x493*0x6+-0x22d9+0x1af*0x25+0.5),_0x2c4733[0xde0+0x669+-0x1448]=(_0x1e62d6-_0x179519)*(-0x2*-0x298+0xa37+-0xf67+0.5),_0x2c4733[0xb94+-0x1bc4*-0x1+0x1*-0x2756]=(_0x15e7e0-_0x3c01c8)*(-0x2598+-0x17*0x10b+0x3d95+0.5)),self['postMessag'+'e']({'type':'updatedAab'+'bData','center':_0x369cd4,'halfExtents':_0x2c4733});},_0x461b79=(_0x212051,_0x232061,_0x1f84fc,_0x5d7b55,_0x1c3c2b,_0x75f4eb,_0x146d2b,_0x1a2157,_0x54652,_0x35abce,_0x4ba703,_0x1e97aa,_0x3bddb6,_0x55cc62,_0x3e3b0d,_0x567c23,_0x2b8940)=>{_0x5d2a05(),_0x4515a2=new Float32Array(_0x212051*(0x1*-0x1de7+0x16b6+0x734)),_0x4bdfa2=new Float32Array(_0x212051*(-0x4f2+-0x15c0+0x2b*0x9f)),_0xe384fa=new Uint16Array(_0x212051*(0x22*-0x47+-0x3*0x737+-0x17*-0x15a)),_0x1bbe07=new Float32Array(_0x212051*(0x21ca+-0x1*0x155f+-0x4*0x31a)),_0x232061&&(_0xd8a769=new Float32Array(_0x212051*(0xf62+-0x1c93+0x34d*0x4)),_0x30c3ca=new Float32Array(_0x212051*(0x213a+0x207d+-0x41b4)),_0x1b21b3=new Float32Array(_0x212051*(0x2*-0x170+-0x2a9*-0xe+-0x225b)),_0x1a8e97=new Float32Array(_0x212051));const _0x418bba=new _0x1fd47f(0x4f*0x7d+-0x3*0x4d5+0x5c*-0x43,0x152e+-0x151*-0x19+-0x1*0x3617,0x1f19+0xda2+-0x2cbb,-0xd*-0x1f9+-0x1*0x16ea+-0x2bb);for(let _0x11c339=0x17*0x53+-0xf00+0x1*0x78b;_0x11c339<_0x212051;_0x11c339++)_0x418bba['set'](_0x75f4eb[_0x11c339],_0x146d2b[_0x11c339],_0x1a2157[_0x11c339],_0x54652[_0x11c339]),_0x418bba['normalize'](),_0x418bba['w']<-0x8b*-0x3d+0x16*0x1bb+-0x4731&&_0x418bba['mulScalar'](-(0x2*-0x3cb+0x3*-0x663+0x1ac0)),_0x4bdfa2[_0x11c339*(0x16ea+-0x2d9+0x97*-0x22)+(0x59*0x49+-0x65*0x21+0x1c*-0x71)]=_0x1f84fc[_0x11c339],_0x4bdfa2[_0x11c339*(0x1*0x2141+0x19d*0x1+0x22db*-0x1)+(0x13dd*-0x1+-0x1593+0x2971)]=_0x5d7b55[_0x11c339],_0x4bdfa2[_0x11c339*(-0x10a2+0x960+-0x745*-0x1)+(0x13*0xd3+0x5a5+0x2*-0xaa6)]=_0x1c3c2b[_0x11c339],_0x4515a2[_0x11c339*(-0x1f*0x2+-0x1ce0+0x1d21)+(0x35*-0x8b+-0x3e*-0x7f+-0x27*0xd)]=_0x1f84fc[_0x11c339],_0x4515a2[_0x11c339*(0x3bf*-0x1+-0x12*-0x65+-0x1*0x358)+(-0x236c*-0x1+-0x2*-0x718+-0x9*0x583)]=_0x5d7b55[_0x11c339],_0x4515a2[_0x11c339*(0x747+0xec*-0x1b+0x1*0x11a0)+(0xb*-0x33+-0x1*-0x857+0x3*-0x20c)]=_0x1c3c2b[_0x11c339],_0xe384fa[_0x11c339*(0x23c8+-0x1e3c+-0x589*0x1)+(0x46+-0x6fd+-0xbf*-0x9)]=_0x18e2cb(Math['exp'](_0x3bddb6[_0x11c339])),_0xe384fa[_0x11c339*(0x1413+-0x17ff+0x35*0x13)+(-0x53f+0x1d8f+-0x184f)]=_0x18e2cb(Math['exp'](_0x55cc62[_0x11c339])),_0xe384fa[_0x11c339*(-0x2*0x60+0x1251+-0x1*0x118e)+(-0x2322+0x3*-0x1f6+0x2906)]=_0x18e2cb(Math['exp'](_0x3e3b0d[_0x11c339])),_0x1bbe07[_0x11c339*(-0x24d9*0x1+-0x1248+0x3724)+(-0xb72+-0x1100+0x1c72)]=_0x418bba['x'],_0x1bbe07[_0x11c339*(-0x23+0x619+-0x5f3)+(-0xb8b+-0x104a+0x3fa*0x7)]=_0x418bba['y'],_0x1bbe07[_0x11c339*(0x219c+-0x1b86+-0x613)+(-0x10*-0x1c6+0xd3e+-0x299c*0x1)]=_0x418bba['z'],_0x232061&&_0xd8a769&&_0x30c3ca&&(_0xd8a769[_0x11c339*(0x1840+0x23b6+0x3bf3*-0x1)+(-0x90a+0x4*0x707+-0x1312)]=_0x35abce[_0x11c339],_0xd8a769[_0x11c339*(-0x1ce7+0x75*0x46+-0x314)+(0xb89*-0x1+-0x70c*0x4+0x27ba)]=_0x4ba703[_0x11c339],_0xd8a769[_0x11c339*(-0x13*0x13c+-0x1d9b+0x1a89*0x2)+(0x17b*0x17+-0x3*-0x1f3+0xc*-0x353)]=_0x1e97aa[_0x11c339],_0x1b21b3[_0x11c339*(-0x2*-0x1066+0x10ec+-0x31b5)+(-0x1*-0xa81+0x7e*0x16+-0x7f*0x2b)]=_0x35abce[_0x11c339],_0x1b21b3[_0x11c339*(0x967+0x1a86+-0x23ea)+(0xbe9+0x44f+-0x1037)]=_0x4ba703[_0x11c339],_0x1b21b3[_0x11c339*(-0x3*-0x949+-0x8e1*-0x3+0x3*-0x1229)+(0x605*-0x1+-0xd*0xe5+0x11a8)]=_0x1e97aa[_0x11c339],_0x1a8e97[_0x11c339]=_0x2b8940?Math['exp'](_0x2b8940[_0x11c339]):0x38b*0x1+0x1*0x142+0x1*-0x4cd,_0x30c3ca[_0x11c339*(0x1*0x25f9+-0x5a5+-0x2051*0x1)+(0x926+0xf4f*0x1+0x827*-0x3)]=_0x567c23?_0x567c23[_0x11c339]:-0x1*0x264b+-0x2f*0xad+-0x7*-0xa02,_0x30c3ca[_0x11c339*(-0x1f9d+-0x14d*-0x5+0x3b*0x6d)+(0x662+-0xd70+0x70f*0x1)]=_0x1a8e97[_0x11c339]);const _0x431619=[_0x4515a2['buffer'],_0x4bdfa2['buffer'],_0xe384fa['buffer'],_0x1bbe07['buffer']];_0x232061&&_0x431619['push'](_0xd8a769['buffer'],_0x30c3ca['buffer'],_0x1b21b3['buffer'],_0x1a8e97['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x4515a2,'dataPosition':_0x4bdfa2,'dataScale':_0xe384fa,'dataRotation':_0x1bbe07,'dataMotion':_0xd8a769,'dataTime':_0x30c3ca,'motion':_0x1b21b3,'tScaleArray':_0x1a8e97},_0x431619);},_0xcfdcfb=(_0x57279b,_0x312c50,_0x4a8cb7,_0xead4ce,_0x1f06e7)=>{const _0x43cf17=new Uint16Array(_0x57279b*(0x1e3b+-0x1e8c+0x55)),_0x1c44ae=0x1c9d+-0x3*0xa52+0x259*0x1+0.28209479177387814;for(let _0x58bf2b=0xb*0x1c+-0x1d93+0x3*0x975;_0x58bf2b<_0x57279b;++_0x58bf2b){const _0x3e228c=_0x312c50[_0x58bf2b]*_0x1c44ae+(-0x207*0x7+0x1*-0x21b+-0x104c*-0x1+0.5),_0x43c3ca=_0x4a8cb7[_0x58bf2b]*_0x1c44ae+(0x2507+0x1*0x24dc+0x5*-0xec7+0.5),_0x3bcfaa=_0xead4ce[_0x58bf2b]*_0x1c44ae+(0x1*-0xd13+-0x43*-0x53+-0x8a6+0.5),_0x12d1d3=_0x1f06e7[_0x58bf2b];_0x43cf17[_0x58bf2b*(-0x1936+0x11*0x1c8+-0x2*0x287)+(0x2366*-0x1+0xf3*-0x12+0x347c)]=_0x18e2cb(_0x3e228c),_0x43cf17[_0x58bf2b*(0x538+-0x1*-0xf7c+-0x14b0)+(0x1d9f+0x1*-0x97a+-0x1424)]=_0x18e2cb(_0x43c3ca),_0x43cf17[_0x58bf2b*(0x3*-0x263+0x2*-0x872+0x1811)+(0x47*-0x51+0x23*0x3d+0xe22)]=_0x18e2cb(_0x3bcfaa),_0x43cf17[_0x58bf2b*(-0x1c0e+0x89+0x1b89)+(0x90f+0x2db*0x1+-0xbe7)]=_0x18e2cb(_0x12d1d3);}self['postMessag'+'e']({'type':'updatedCol'+'orData','data':_0x43cf17});},_0x4c0ffd=(_0x535082,_0x2d7722,_0x566760)=>{const _0x1872bb=new Uint32Array(_0x535082*(-0x2*0x37e+0x1*0xb35+-0x435)),_0x211652=new Uint32Array(_0x535082*(0x10ce+-0x45a*-0x3+0x1*-0x1dd8)),_0x47df08=new Uint32Array(_0x535082*(0x1b1d+0x13f7+-0x2f10)),_0x2f8a13=new Uint32Array(_0x535082*(0x1a4a+-0x10e3+-0x963*0x1)),_0x58642c={0x1:0x3,0x2:0x8,0x3:0xf}[_0x2d7722],_0x2792b5=_0x566760,_0x32b7ed=-0x192+-0x6d4+0x1065,_0x409ebd=-0x70*-0x7+-0xf19+0x1008,_0x5db20c=new Float32Array(-0x2662*-0x1+0x2e*-0x38+-0x1c51),_0x5e3284=new Uint32Array(_0x5db20c['buffer']),_0x584e78=new Array(_0x58642c*(-0x9c7+-0x1*0x106f+0x31*0x89))['fill'](-0x1f7b+0x1e13*-0x1+0x3d8e);for(let _0x4fbf16=-0x1aa7+0x23*0xaf+0x2*0x15d;_0x4fbf16<_0x535082;++_0x4fbf16){for(let _0x2f97c3=-0x10*0x14b+-0x82e+0x1*0x1cde;_0x2f97c3<_0x58642c;++_0x2f97c3)_0x584e78[_0x2f97c3*(-0x21+0x68d*0x4+-0xc*0x22c)]=_0x2792b5[_0x2f97c3][_0x4fbf16],_0x584e78[_0x2f97c3*(0x12d*-0x17+-0x241+0x1d4f)+(-0x1f82+0x5*0x4db+0x73c)]=_0x2792b5[_0x2f97c3+_0x58642c][_0x4fbf16],_0x584e78[_0x2f97c3*(0xb*0x1b+0x107*0x5+-0x649)+(0x585+0x4*-0x2a5+-0x511*-0x1)]=_0x2792b5[_0x2f97c3+_0x58642c*(-0xb5*-0x35+0x3*0xd3+0x238*-0x12)][_0x4fbf16];let _0xb70de0=_0x584e78[0xa7*0x25+-0x1c57*-0x1+-0x347a];for(let _0x4cb525=-0x15b9+-0x38b*0x4+0x23e6;_0x4cb525<_0x58642c*(-0xc5f+0x259b*0x1+0x24b*-0xb);++_0x4cb525)_0xb70de0=Math['max'](_0xb70de0,Math['abs'](_0x584e78[_0x4cb525]));if(_0xb70de0!==-0x20ac+0xb3f+0x156d){for(let _0x1b995b=0x1*0x1a4b+0x1*-0x7d3+-0x1278;_0x1b995b<_0x58642c;++_0x1b995b)_0x584e78[_0x1b995b*(-0x1f59+-0x1a7c+0x39d8)+(0x40a*0x2+0x1de0+-0x25f4)]=Math['max'](-0xb99+-0xe*0x125+0x3*0x935,Math['min'](_0x32b7ed,Math['floor']((_0x584e78[_0x1b995b*(0xc86*0x1+0x3*0x58e+-0x1d2d)+(0xfd+-0x307*0x1+0x105*0x2)]/_0xb70de0*(0x112b+-0x2369+0x123e+0.5)+(-0x1950+0x1*0x1ffb+-0x6ab*0x1+0.5))*_0x32b7ed+(0x1*0x1afd+0x21d+0xe8d*-0x2+0.5)))),_0x584e78[_0x1b995b*(0xbe8+0x1*-0x1227+-0x321*-0x2)+(-0x8*0x38b+0x1fa2+-0x349)]=Math['max'](0x25a1+-0x14e9+-0x6b*0x28,Math['min'](_0x409ebd,Math['floor']((_0x584e78[_0x1b995b*(-0x17ba+0xff9+0x4*0x1f1)+(-0x18bf+0x1d*-0x78+-0x8*-0x4cb)]/_0xb70de0*(0x2219+0x5*-0x53d+0x8*-0xfd+0.5)+(-0x124a+0x3b*-0x3a+0x1fa8+0.5))*_0x409ebd+(0x81c*0x4+-0x47a*0x7+-0x8d*0x2+0.5)))),_0x584e78[_0x1b995b*(-0x25a9+-0x64d*0x2+0x3246)+(0x245c+-0x15fc+-0x2*0x72f)]=Math['max'](-0x1efb+-0x1702+0x35fd,Math['min'](_0x32b7ed,Math['floor']((_0x584e78[_0x1b995b*(-0x1*0xf77+-0xdd5*-0x1+0x1a5)+(0x1*-0x5ed+0x244c+-0x1e5d)]/_0xb70de0*(0x80a+-0x10e7+-0x8dd*-0x1+0.5)+(-0x1*0x10b1+0x1*0xc2d+0x11*0x44+0.5))*_0x32b7ed+(0x1d55+-0x216f+-0xf*-0x46+0.5))));_0x5db20c[-0x1693*0x1+-0x47f+0x1b12]=_0xb70de0,_0x1872bb[_0x4fbf16*(0x1*0xda6+0x2381*-0x1+-0xb*-0x1fd)+(0x2db*-0x5+0xa6b+0x3dc)]=_0x5e3284[-0x1b3e+-0xad0+0x1307*0x2],_0x1872bb[_0x4fbf16*(-0xb3c+0x202e*0x1+-0x14ee)+(0xe91+0x2*-0x1303+0x1776)]=_0x584e78[-0x16fd+0x61*0x26+0x2dd*0x3]<<-0x54d*0x3+-0x3ec+0x4*0x4fa|_0x584e78[0xa*-0x1ef+0x18a1+-0x54a]<<0x1*-0x1e4a+0x3c8+0x7*0x3cb|_0x584e78[0x1*-0xb87+0x1dde+-0x169*0xd],_0x1872bb[_0x4fbf16*(-0x154e+-0x10a3+-0xca7*-0x3)+(0x1d1d+0x11*0x12+-0x1e4d)]=_0x584e78[-0x24f*0x8+0x916*0x3+-0x8c7]<<-0x73*-0x1+0x123+-0x181|_0x584e78[0xbae+0xddd+-0x1987]<<0x1e89*0x1+-0x1f*0xfe+0x44|_0x584e78[0x930+-0x2530+-0x3*-0x957],_0x1872bb[_0x4fbf16*(-0x34f*-0x9+0x86*-0x4a+0x8f9)+(-0x12a*0xc+-0x9*0x8b+-0x45*-0x46)]=_0x584e78[-0x20cf+-0x136*0x8+0x2a85]<<0xc2*0x18+-0xf8f+-0x28c|_0x584e78[0xf9b+-0x9c+0x77c*-0x2]<<-0xea0+-0x3*-0xbdd+-0x14ec|_0x584e78[0x2546+0x1848+-0x3d86],_0x2d7722>-0x13bd*0x1+0x13b8+-0x6*-0x1&&(_0x211652[_0x4fbf16*(-0x6bf+-0x1ea0+0x1*0x2563)+(-0x31+-0x15a*0x9+-0xc5b*-0x1)]=_0x584e78[0x21d9+-0x9f8+-0x17d8]<<0x1*0xad3+-0x2661+0x1ba3|_0x584e78[-0x879+-0x2*-0xc85+-0x1*0x1087]<<0x1f30+-0x1b3d*-0x1+-0x3a62|_0x584e78[0x3*0xbf5+0x1*0x1fcd+-0x43a1],_0x211652[_0x4fbf16*(-0x1*-0xaa9+0x23ad+0x1729*-0x2)+(-0x9e*0x1b+0x6*0x144+0x913)]=_0x584e78[-0x1*-0xb73+0x23d5*-0x1+0x186e]<<-0x1304+-0x4e8*-0x3+-0x461*-0x1|_0x584e78[0x269d*0x1+0x116f*0x1+-0x37ff]<<-0xc2*0x1d+-0x1*-0xd96+0x86f|_0x584e78[-0x318*-0x3+-0x1e9*0xa+0x9e0],_0x211652[_0x4fbf16*(-0x33d*-0xb+0x64+-0x1*0x23ff)+(-0x293+0x3ea*0x6+-0x1*0x14e7)]=_0x584e78[-0x5*0x390+0x1*-0x7a2+0x1981]<<0x2*-0xb0f+0x4*-0x622+0x7*0x6ad|_0x584e78[0xec*-0x1b+0x4f*0x26+0xd3a]<<-0xc49*-0x1+0x3*-0x5f7+0x1*0x5a7|_0x584e78[-0xc3d+-0x74f*0x2+0x1aec],_0x211652[_0x4fbf16*(-0x7*-0x32d+-0x1df*-0x8+-0x252f)+(-0x2*-0x72d+-0xcc1*-0x2+-0x27d9)]=_0x584e78[-0xe1+-0x2178+-0xb*-0x321]<<-0x3b3*-0x7+-0x24e*-0x10+0x4*-0xfac|_0x584e78[0xb*0x132+-0xee7+0x1d4]<<-0x2ee+0x10b7+-0x2*0x6df|_0x584e78[-0x1*-0x6bc+0x183+-0x33*0x29],_0x2d7722>0x1e8c+0xb31+-0x29bb?(_0x47df08[_0x4fbf16*(-0x6*0x329+-0x187f*-0x1+0x3*-0x1d7)+(0x22a1+0x2*-0xf33+-0x43b)]=_0x584e78[-0x253d*0x1+-0x13f5+-0x2b*-0x155]<<0x1d64+-0x44e*0x8+-0xd*-0x65|_0x584e78[-0x1d26+0x3*-0x3d+0x1df3]<<-0x1*-0x1169+0xf*-0x21d+0xe55|_0x584e78[0x2*-0xa85+-0xe0e+0x232f],_0x47df08[_0x4fbf16*(0xa77+0xde9+-0x185c)+(-0x19b*0x5+-0x1c7+-0x1b*-0x5d)]=_0x584e78[-0xb*0x34a+-0x1a7d+-0x1*-0x3ec3]<<-0x1501+0x43c+0x59e*0x3|_0x584e78[0x6d*0x13+0x7a*0x4e+0x8d*-0x52]<<-0x13c9+-0x574+0x1948|_0x584e78[-0x1992+0x19db*-0x1+-0x3387*-0x1],_0x47df08[_0x4fbf16*(-0x664+-0x32a+0x992)+(-0x4*-0x480+-0x29*-0xad+0x1*-0x2db3)]=_0x584e78[0x3e4+-0x3*0x4af+0xa44*0x1]<<-0x79d*-0x1+-0xd68+0x5e0|_0x584e78[0xba*-0x2f+0x3*0x331+0x59*0x47]<<0xd*0x266+-0x157f+-0x9a4|_0x584e78[-0x13d9*0x1+0x859+0xb9d],_0x47df08[_0x4fbf16*(-0x23c2*0x1+-0x796+0x2b5c)+(0x11a4+-0x7ca+-0x9d7)]=_0x584e78[0xd7f+0x5d*-0x55+-0x20*-0x8c]<<0xb29+-0x9a5+0x16f*-0x1|_0x584e78[0x13f0+-0x3a4+-0x102d]<<0x16f3+0x1cf8+-0x20*0x19f|_0x584e78[-0x1*-0x1d2c+-0x19f*-0xc+0x61*-0x80],_0x2f8a13[_0x4fbf16*(-0x1a49*-0x1+0x1*0xa63+-0x8*0x495)+(-0xebb+0x17*-0x185+0x31ae)]=_0x584e78[-0x1ee3+0x1f6*0x13+0x1*-0x63e]<<0x1*0x195+-0x207b+0x7*0x46d|_0x584e78[0x8f9*0x3+0x211*0xb+-0x3184]<<0x6cd+0x145c+-0x2*0xd8f|_0x584e78[0x21b*-0x3+0x1*0x219e+-0x1b2a],_0x2f8a13[_0x4fbf16*(-0x175c+-0x1a*-0x6b+0xc82)+(0xb47*-0x1+0x251*-0x5+-0x16dd*-0x1)]=_0x584e78[0x35c*-0x6+0x25d+0x11ef]<<-0x1687+-0x223*-0xa+0x13e*0x1|_0x584e78[-0x24ca+-0x17f*0xc+-0x1*-0x36e3]<<0xb*0x24b+-0x196*0x10+0x32|_0x584e78[0x1*-0x204d+0x2*-0x12cd+0x460d],_0x2f8a13[_0x4fbf16*(0x2203+0x140+-0x7*0x509)+(-0xa3e+-0x14*-0x124+-0x18*0x86)]=_0x584e78[0xb23*0x1+-0x20a7+-0x15ab*-0x1]<<-0x3fd+-0x336+0x8*0xe9|_0x584e78[-0x11*-0x207+-0x1*-0x228e+-0x44dd*0x1]<<-0x1*-0xbc3+0x1e20+-0x29d8|_0x584e78[-0x19d3+-0x17*0xef+0x2f75],_0x2f8a13[_0x4fbf16*(0x24a*0x3+-0x9*0x2e+0x53c*-0x1)+(-0x108f+0x1175+-0xe3)]=_0x584e78[0x27*-0x15+-0x1*0x1fea+0x2347]<<0x7*0x3bc+0x2225+-0xf0d*0x4|_0x584e78[0x39f+-0x8be+0x54a]<<-0x5ed+-0x6*0x5cf+0x37*0xbe|_0x584e78[-0x123a*-0x1+-0x1d05*-0x1+0x135*-0x27]):_0x47df08[_0x4fbf16]=_0x584e78[0x1c*0x65+0x2301+-0x2df8]<<0x167*0xa+-0x23f7+-0xb03*-0x2|_0x584e78[0x1*0x155f+0x12d2+-0x281b]<<0x22a3+0x1ae4*-0x1+-0x7b4|_0x584e78[0x83*0x13+0x1*-0xd13+0x371]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x1872bb,'sh4to7Data':_0x211652,'sh8to11Data':_0x47df08,'sh12to15Data':_0x2f8a13}},[_0x1872bb['buffer'],_0x211652['buffer'],_0x47df08['buffer'],_0x2f8a13['buffer']]);},_0x5d2a05=()=>{_0x4515a2=null,_0x30c3ca=null,_0x1bbe07=null,_0x4bdfa2=null,_0xd8a769=null,_0xe384fa=null,_0x1b21b3=null,_0x1a8e97=null;};}let VA=class extends me{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+zA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x588033,_0x93361,_0x31259a){_0x588033['onmessage']=_0x24e4dd=>{if(!this['worker'])return;const {data:_0xf706fa}=_0x24e4dd;if(_0xf706fa['type']===_0x93361)switch(_0x93361){case'updatedSHD'+'ata1':_0x31259a(_0xf706fa['data']);break;case'updatedCol'+'orData':_0x31259a(_0xf706fa['data']);break;case'updatedTra'+'nsformData':_0x31259a(_0xf706fa);break;case'updatedAab'+'bData':_0x31259a(_0xf706fa);break;}};}['updateSHDa'+'ta1'](_0x5deb4b,_0x2740d9,_0x4052be){var _0x7c93b9;return(_0x7c93b9=this['worker'])==null||_0x7c93b9['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x5deb4b,'shBands':_0x2740d9,'SHData':_0x4052be}),new Promise(_0xfbd14b=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x2a4612=>{_0xfbd14b(_0x2a4612);});});}async['updateColo'+'rData'](_0x2eb0b0,_0x3440c4,_0x1aff11,_0x398355,_0x1fee54){var _0x3c54b4;return(_0x3c54b4=this['worker'])==null||_0x3c54b4['postMessag'+'e']({'type':'updateColo'+'rData','numSplats':_0x2eb0b0,'cr':_0x3440c4,'cg':_0x1aff11,'cb':_0x398355,'ca':_0x1fee54}),new Promise(_0x4ffa18=>{this['workerMess'+'ageFn'](this['worker'],'updatedCol'+'orData',_0x227b30=>{_0x4ffa18(_0x227b30);});});}async['calcAabb'](_0x48e3ec,_0x11b8f6,_0x3eb7f2,_0x175231,_0x220c0e,_0x19d6ec,_0x57fc37){var _0x1b7a0a;const _0x3ec031=new Float32Array(_0x11b8f6),_0x4ee409=new Float32Array(_0x3eb7f2),_0x17a6c3=new Float32Array(_0x175231),_0x4a31e8=new Float32Array(_0x220c0e),_0x404a6b=new Float32Array(_0x19d6ec),_0xf73264=new Float32Array(_0x57fc37);return(_0x1b7a0a=this['worker'])==null||_0x1b7a0a['postMessag'+'e']({'type':'calcAabb','numSplats':_0x48e3ec,'x':_0x3ec031,'y':_0x4ee409,'z':_0x17a6c3,'sx':_0x4a31e8,'sy':_0x404a6b,'sz':_0xf73264},[_0x3ec031['buffer'],_0x4ee409['buffer'],_0x17a6c3['buffer'],_0x4a31e8['buffer'],_0x404a6b['buffer'],_0xf73264['buffer']]),new Promise(_0x361f41=>{this['workerMess'+'ageFn'](this['worker'],'updatedAab'+'bData',_0x1acc8d=>{_0x361f41(_0x1acc8d);});});}async['updateTran'+'sData'](_0x45afb4,_0x45eb86,_0xcf21bc,_0x5e1540,_0x4c8be7,_0x5308d9,_0x5c79c4,_0x4d34fb,_0x433698,_0x404479,_0x39334f,_0x352874,_0x159e68,_0x30e1c4,_0x2d4fa4,_0x597c82,_0x46fca2){var _0x40200e;return(_0x40200e=this['worker'])==null||_0x40200e['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x45afb4,'is4D':_0x45eb86,'x':_0xcf21bc,'y':_0x5e1540,'z':_0x4c8be7,'rx':_0x5308d9,'ry':_0x5c79c4,'rz':_0x4d34fb,'rw':_0x433698,'mx':_0x404479,'my':_0x39334f,'mz':_0x352874,'sx':_0x159e68,'sy':_0x30e1c4,'sz':_0x2d4fa4,'muT':_0x597c82,'tScale':_0x46fca2}),new Promise(_0x259c06=>{const _0x1266cd=_0x297564=>{_0x259c06(_0x297564);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x1266cd);});}['destroy'](){var _0x19c3ff;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x19c3ff=this['worker'])==null||_0x19c3ff['terminate'](),this['worker']=null);}};const $_=(_0x429e4e,_0x161ee1)=>{const _0x36c8e0=[];for(let _0x1ea313=-0xb8f+0x836+0x359*0x1;_0x1ea313<_0x161ee1;++_0x1ea313)_0x36c8e0['push'](_0x429e4e['getProp']('f_rest_'+_0x1ea313));return _0x36c8e0;};class GA extends Zy{constructor(_0x445b14,_0x1a728f){console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),super(_0x445b14,_0x1a728f),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(-0x1420+0x22be*0x1+-0xe9d)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new VA(),this['assetsMana'+'gerLoadedT'+'ime']=-0x2066+0x2b7*-0x1+0x2322);}async['updateData'](){var _0x591be4,_0x25439c,_0x10fc68,_0x3ce5d3,_0x4c0f64,_0x24eb60,_0x337cea,_0x1f1ef9,_0x26d2c0,_0x6797e,_0x2de35e;console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Data'),await super['updateData']();const _0x11ae3a=this['gsplatData'];if(!_0x11ae3a)return;this['is4D']=_0x11ae3a['is4D'];const _0x461dc4=await this['getTransfo'+'rmDataByWo'+'rker'](_0x11ae3a);this['aabb']=new De(),await _0x11ae3a['calcAabbAs'+'ync'](this['aabb'],this['updateData'+'Worker']),this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x461dc4['centers'],this['motion']=_0x461dc4['motion'],this['tScale']=_0x461dc4['tScaleArra'+'y'],this['muT']=await _0x11ae3a['getMuT'](),this['timeIndex']=await _0x11ae3a['getTimeInd'+'ex']();const _0x4bfe4f=this['evalTextur'+'eSize'](_0x11ae3a['numSplats']);this['colorTextu'+'re']?((_0x591be4=this['colorTextu'+'re2'])==null||_0x591be4['destroy'](),(_0x25439c=this['transformA'+'Texture2'])==null||_0x25439c['destroy'](),(_0x10fc68=this['transformB'+'Texture2'])==null||_0x10fc68['destroy'](),(_0x3ce5d3=this['transformR'+'Texture2'])==null||_0x3ce5d3['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x4bfe4f),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x4bfe4f),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x4bfe4f),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x4bfe4f),this['is4D']&&((_0x4c0f64=this['transformM'+'otionTextu'+'re2'])==null||_0x4c0f64['destroy'](),(_0x24eb60=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x24eb60['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x4bfe4f),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x4bfe4f))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',nt,_0x4bfe4f),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x4bfe4f),this['transformA'+'Texture']=this['createText'+'ure']('transformA',Ye,_0x4bfe4f),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x4bfe4f),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ui,_0x4bfe4f),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x4bfe4f),this['transformR'+'Texture']=this['createText'+'ure']('transformR',Ye,_0x4bfe4f),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x4bfe4f),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',Ye,_0x4bfe4f),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x4bfe4f),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',Ye,_0x4bfe4f),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x4bfe4f))),await this['updateColo'+'rData'](_0x11ae3a),await this['updateTran'+'sformFromD'+'ata'](_0x461dc4),this['shBands']=_0x11ae3a['shBands'],this['shBands']>0x1f18*0x1+0x1*0x2ed+0x1*-0x2205&&(this['sh1to3Text'+'ure']?((_0x337cea=this['sh1to3Text'+'ure2'])==null||_0x337cea['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x4bfe4f),this['shBands']>-0x553+0x1b1*-0x5+-0xdc9*-0x1&&((_0x1f1ef9=this['sh4to7Text'+'ure2'])==null||_0x1f1ef9['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x4bfe4f),this['shBands']>-0x22bd+0xb9+0x2206?((_0x26d2c0=this['sh8to11Tex'+'ture2'])==null||_0x26d2c0['destroy'](),(_0x6797e=this['sh12to15Te'+'xture2'])==null||_0x6797e['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x4bfe4f),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x4bfe4f)):((_0x2de35e=this['sh8to11Tex'+'ture2'])==null||_0x2de35e['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x4bfe4f)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x4bfe4f),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ue,_0x4bfe4f),this['shBands']>-0xf9f+-0x1a3a+0x1e7*0x16&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ue,_0x4bfe4f),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x4bfe4f),this['shBands']>-0x261e+-0x5*0x2fc+0x350c?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ue,_0x4bfe4f),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x4bfe4f),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ue,_0x4bfe4f),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x4bfe4f)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Yi,_0x4bfe4f),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Yi,_0x4bfe4f)))),await this['updateSHDa'+'taByWorker'](_0x11ae3a));}['updateText'+'ure'](){console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Texture'),!this['isDestroye'+'d']&&(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0xef5466){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0xef5466}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20releas'+'eSeqGSplat'+'\x20all'),this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x332b9f,_0xb57966,_0x3bd110,_0x1865ad,_0x1b073f){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x332b9f,'timeOption':_0xb57966,'loadedTime':_0x3bd110,'asset':_0x1865ad,'events':_0x1b073f}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(-0x42*-0x22+0x2701+-0x2fc5);try{for(;this['appendQueu'+'e']['length']>0x15fa*-0x1+0x3*0xa34+-0x8a2;){const _0x5b6684=this['appendQueu'+'e']['shift']();_0x5b6684['type']==='append'?await this['processApp'+'endTask'](_0x5b6684['data']):_0x5b6684['type']==='release'&&await this['processRel'+'easeTask'](_0x5b6684['data']);}}finally{this['isProcessi'+'ngQueue']=!(-0x1f1d+-0x51*0x63+0x3e71);}}}async['processRel'+'easeTask'](_0x3a4415){const {index:_0x8c4f1c}=_0x3a4415;console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.relea'+'seGSplatRe'+'source',_0x8c4f1c),!this['isDestroye'+'d']&&await this['gsplatData']['releaseSeq'+'Data'](_0x8c4f1c);}async['processApp'+'endTask'](_0x36a3dc){var _0xb24029;const {gsplatData:_0x274a07,timeOption:_0x2f0731,loadedTime:_0x46ac4e,asset:_0x424256,events:_0x1bd5c3}=_0x36a3dc;!this['gsplatData']||this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.appen'+'dGSplatRes'+'ource'),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x2f0731,await this['gsplatData']['appendGSpl'+'atData'](_0x274a07,_0x46ac4e,_0x2f0731),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20gspla'+'tData.appe'+'ndGSplatDa'+'ta',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x43b*-0x1+0x1*0x22a6+-0x1e69),_0x274a07['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x274a07['numSplats'])['toFixed'](0xfa5+0x14ac+0x6*-0x60d)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20this.'+'updateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x7b*0x2f+-0x20d8+0xa45),_0x274a07['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),(_0xb24029=this['gsplatInst'+'ance'])==null||_0xb24029['updateInst'+'anceData'](this),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20updat'+'eInstanceD'+'ata',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0xba6+-0x1a02+0xe5e),_0x274a07['numSplats']),this['asset']=_0x424256,this['assetsMana'+'gerLoadedT'+'ime']=_0x46ac4e,this['events']=_0x1bd5c3);}['fireAssets'+'ManagerTim'+'eIndex'](){var _0x274b4a;const _0x3817d6=this['assetsMana'+'gerLoadedT'+'ime'];console['log']('____\x20ENGIN'+'E\x20IVAN','fireAssets'+'ManagerTim'+'eIndex',_0x3817d6),(_0x274b4a=this['asset'])==null||_0x274b4a['fire']('setAssetsL'+'oaded',_0x3817d6);}['destroy'](){var _0x165d53,_0x43e095,_0x2c6a66,_0x54833c,_0x5bf4ca,_0x143e2d,_0x285781,_0x5338e5,_0x11856f,_0x1bab08,_0x5dbefd,_0x53ffb2,_0x3d6f1b,_0x507f79,_0x54e3e4,_0x506a3e,_0x2c7efc,_0x9a5b2b,_0x4217f3,_0x325d60,_0x30aecd;(_0x165d53=this['updateData'+'Worker'])==null||_0x165d53['destroy'](),this['updateData'+'Worker']=void(-0x13de+0x46d+0x43*0x3b),(_0x43e095=this['colorTextu'+'re'])==null||_0x43e095['destroy'](),(_0x2c6a66=this['transformA'+'Texture'])==null||_0x2c6a66['destroy'](),(_0x54833c=this['transformB'+'Texture'])==null||_0x54833c['destroy'](),(_0x5bf4ca=this['transformR'+'Texture'])==null||_0x5bf4ca['destroy'](),(_0x143e2d=this['transformM'+'otionTextu'+'re'])==null||_0x143e2d['destroy'](),(_0x285781=this['transformL'+'ifecycleTe'+'xture'])==null||_0x285781['destroy'](),(_0x5338e5=this['sh1to3Text'+'ure'])==null||_0x5338e5['destroy'](),(_0x11856f=this['sh4to7Text'+'ure'])==null||_0x11856f['destroy'](),(_0x1bab08=this['sh8to11Tex'+'ture'])==null||_0x1bab08['destroy'](),(_0x5dbefd=this['sh12to15Te'+'xture'])==null||_0x5dbefd['destroy'](),(_0x53ffb2=this['colorTextu'+'re2'])==null||_0x53ffb2['destroy'](),(_0x3d6f1b=this['transformA'+'Texture2'])==null||_0x3d6f1b['destroy'](),(_0x507f79=this['transformB'+'Texture2'])==null||_0x507f79['destroy'](),(_0x54e3e4=this['transformR'+'Texture2'])==null||_0x54e3e4['destroy'](),(_0x506a3e=this['transformM'+'otionTextu'+'re2'])==null||_0x506a3e['destroy'](),(_0x2c7efc=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x2c7efc['destroy'](),(_0x9a5b2b=this['sh1to3Text'+'ure2'])==null||_0x9a5b2b['destroy'](),(_0x4217f3=this['sh4to7Text'+'ure2'])==null||_0x4217f3['destroy'](),(_0x325d60=this['sh8to11Tex'+'ture2'])==null||_0x325d60['destroy'](),(_0x30aecd=this['sh12to15Te'+'xture2'])==null||_0x30aecd['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x18ff8a){var _0x4d5171,_0x145fe5,_0x153411,_0x39fa2c,_0xbd724f,_0x2aa293,_0x2cc1fa,_0x1b3367,_0xb40b79,_0x32ea4c,_0x81a1e6,_0x2f5edc,_0x3f338d;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0x36a8d9=((_0x4d5171=_0x18ff8a['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(0xbc2+-0x1bc1+0xfff):_0x4d5171['data'])??-0x13fc*-0x1+-0xba1+-0x1f*0x45,_0x2e5ce8=((_0x145fe5=_0x18ff8a['getParamet'+'er']('uSplatScal'+'e'))==null?void(-0x13*0x7f+0x2422+-0x1ab5):_0x145fe5['data'])??-0xacc+-0x19ab+0x123c*0x2,_0x1bf43d=((_0x153411=_0x18ff8a['getParamet'+'er']('uSaturatio'+'n'))==null?void(-0x1*0x1c33+0x19f*-0xd+-0x3146*-0x1):_0x153411['data'])??0x21b3+-0x6e5*-0x1+-0x2897*0x1,_0x3b758f=((_0x39fa2c=_0x18ff8a['getParamet'+'er']('uHueOffset'))==null?void(0x1081*-0x2+0x26e3+-0x5e1):_0x39fa2c['data'])??-0xbf9+0xb*0x1c9+-0x7aa,_0x153e65=((_0xbd724f=_0x18ff8a['getParamet'+'er']('uInvertOpa'+'city'))==null?void(0x2506+-0x1*-0x15c1+-0x3ac7):_0xbd724f['data'])??0x1fd*-0x9+0x216d+-0x4*0x3e2,_0x1757e1=((_0x2aa293=_0x18ff8a['getParamet'+'er']('uOpacity'))==null?void(-0x3*-0xa7b+0x26c*0x10+0x4631*-0x1):_0x2aa293['data'])??-0x4c*0x13+0x1*0x25e7+-0x2042,_0x13b1ca=((_0x2cc1fa=_0x18ff8a['getParamet'+'er']('clrOffset'))==null?void(0x3*0x2dd+0xe2b+-0x16c2):_0x2cc1fa['data'])??[-0xe2a+-0x3*-0x71+0xcd7,0x1d08+0xf3a+-0x2c42,0xc7b+0x67a+-0x17*0xd3,-0xa*-0x239+0x1593+-0x2bcc],_0x38df1f=((_0x1b3367=_0x18ff8a['getParamet'+'er']('clrScale'))==null?void(0x1*-0xf38+0x1fb7*0x1+-0x107f):_0x1b3367['data'])??[-0x1fb5*0x1+0x25b8+-0x2*0x301,-0x1b9f+-0x4db+0x207b,-0x6f+0x198a+-0x191a,0x22ed*0x1+-0x1*-0x327+-0x2613],_0x58906d=((_0xb40b79=_0x18ff8a['getParamet'+'er']('uShapeN'))==null?void(0x812+-0x1057+0x845*0x1):_0xb40b79['data'])??0x1c11+-0x25*-0x6b+0x15c4*-0x2,_0x52ef39=((_0x32ea4c=_0x18ff8a['getParamet'+'er']('mode'))==null?void(-0x2589+0x2*0xae7+0xfbb*0x1):_0x32ea4c['data'])??-0x3c1*-0x3+-0xa54+-0xef,_0x1b20d8=((_0x81a1e6=_0x18ff8a['getParamet'+'er']('ringSize'))==null?void(-0x1c*0x146+0xaab*-0x1+0x2e53):_0x81a1e6['data'])??-0x14e8+0x2018+-0xb30,_0x911caf=((_0x2f5edc=_0x18ff8a['defines'])==null?void(-0x2113+0x6fb+0x1a18):_0x2f5edc['get']('uOpenAnim'))??'0',_0xe0bd41=((_0x3f338d=_0x18ff8a['defines'])==null?void(0x9*0x26f+0x1*0x24a9+0x4*-0xea4):_0x3f338d['get']('uControlCo'+'lorMode'))??'0';_0x18ff8a['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x18ff8a['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x18ff8a['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x18ff8a['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x18ff8a['setParamet'+'er']('uSplatScal'+'e',_0x2e5ce8),_0x18ff8a['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0x36a8d9),_0x18ff8a['setParamet'+'er']('uSaturatio'+'n',_0x1bf43d),_0x18ff8a['setParamet'+'er']('uHueOffset',_0x3b758f),_0x18ff8a['setParamet'+'er']('uInvertOpa'+'city',_0x153e65),_0x18ff8a['setParamet'+'er']('uOpacity',_0x1757e1),_0x18ff8a['setParamet'+'er']('clrOffset',_0x13b1ca),_0x18ff8a['setParamet'+'er']('clrScale',_0x38df1f),_0x18ff8a['setParamet'+'er']('uShapeN',_0x58906d),_0x18ff8a['setParamet'+'er']('mode',_0x52ef39),_0x18ff8a['setParamet'+'er']('ringSize',_0x1b20d8),_0x18ff8a['setParamet'+'er']('prerenderC'+'Time',0x2468+-0x95d+-0x1b0b),_0x18ff8a['setParamet'+'er']('renderSpac'+'e',-0x1*-0x2f5+-0x122+-0x1*0x1c9),_0x18ff8a['setParamet'+'er']('endSpace',0x49*0x33+0x25*0x50+-0x1a11),_0x18ff8a['setDefine']('uOpenAnim',_0x911caf),_0x18ff8a['setDefine']('uControlCo'+'lorMode',_0xe0bd41),this['transformM'+'otionTextu'+'re']&&_0x18ff8a['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x18ff8a['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x18ff8a['setDefine']('SH_BANDS',this['shBands']),_0x18ff8a['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x18ff8a['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x18ff8a['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x18ff8a['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x18ff8a['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x3a5010){const _0x1572f3=Math['ceil'](Math['sqrt'](_0x3a5010)),_0x8e0784=Math['ceil'](_0x3a5010/_0x1572f3);return new J(_0x1572f3,_0x8e0784);}async['updateColo'+'rData'](_0x4fd78a){var _0x4887e0;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x440b98=this['colorTextu'+'re2'];if(!_0x440b98||this['isDestroye'+'d'])return;const _0x5718c=_0x4fd78a['getProp']('f_dc_0'),_0x58d7d6=_0x4fd78a['getProp']('f_dc_1'),_0x2861f5=_0x4fd78a['getProp']('f_dc_2'),_0x204652=_0x4fd78a['getProp']('opacity');let _0x67bb62=(_0x4887e0=_0x4fd78a['transformD'+'ata'])==null?void(0x1615+0x3d1+0xff*-0x1a):_0x4887e0['dataColor'];_0x67bb62||(_0x67bb62=await this['updateData'+'Worker']['updateColo'+'rData'](_0x4fd78a['numSplats'],_0x5718c,_0x58d7d6,_0x2861f5,_0x204652)),await this['idleUpdate'+'TexturePro'+'mise'](_0x440b98,_0x67bb62);}async['getTransfo'+'rmDataByWo'+'rker'](_0x2a11b3){var _0x5203f3;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0x5203f3=_0x2a11b3['transformD'+'ata'])!=null&&_0x5203f3['dataCenter'+'s'])return{'centers':_0x2a11b3['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x2a11b3['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x2a11b3['transformD'+'ata']['dataScale'],'dataRotation':_0x2a11b3['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x2a11b3['transformD'+'ata']['dataMotion'],'dataTime':_0x2a11b3['transformD'+'ata']['dataTime'],'motion':_0x2a11b3['transformD'+'ata']['motion'],'tScaleArray':_0x2a11b3['transformD'+'ata']['tScaleArra'+'y']};const _0xf7eab=_0x2a11b3['getProp']('x'),_0x59dd9a=_0x2a11b3['getProp']('y'),_0xf8a0ca=_0x2a11b3['getProp']('z'),_0x26ec59=_0x2a11b3['getProp']('rot_1'),_0x235830=_0x2a11b3['getProp']('rot_2'),_0x34696c=_0x2a11b3['getProp']('rot_3'),_0x339a0c=_0x2a11b3['getProp']('rot_0'),_0x257e15=_0x2a11b3['getProp']('motion_0'),_0x3ee944=_0x2a11b3['getProp']('motion_1'),_0x33db60=_0x2a11b3['getProp']('motion_2'),_0x31d907=_0x2a11b3['getProp']('scale_0'),_0x3a15f3=_0x2a11b3['getProp']('scale_1'),_0x37a9ed=_0x2a11b3['getProp']('scale_2'),_0x3996a5=_0x2a11b3['getProp']('t'),_0x2a33b0=_0x2a11b3['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x2a11b3['numSplats'],this['is4D'],_0xf7eab,_0x59dd9a,_0xf8a0ca,_0x26ec59,_0x235830,_0x34696c,_0x339a0c,_0x257e15,_0x3ee944,_0x33db60,_0x31d907,_0x3a15f3,_0x37a9ed,_0x3996a5,_0x2a33b0);}async['updateTran'+'sformFromD'+'ata'](_0x4e9e63){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x4e9e63['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x4e9e63['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x4e9e63['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x4e9e63['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x4e9e63['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x28a744,_0x251fb2){if(!this['isDestroye'+'d'])return new Promise(_0x1f9b87=>{requestIdleCallback(()=>{const _0x22b916=_0x28a744['lock']();_0x22b916==null||_0x22b916['set'](_0x251fb2),_0x28a744['unlock'](),_0x1f9b87(!(0x1b6f+-0x1*-0x1b11+-0xda*0x40));},{'timeout':0x12c});});}async['updateTran'+'sformData'](_0x5ba671){var _0xc04eb9,_0x2be43c,_0x963173,_0x241216;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformData'),this['isDestroye'+'d'])return;const _0x969897=Tn['float2Half'];if(!this['transformA'+'Texture'])return;const _0x4e21eb=this['transformA'+'Texture']['lock'](),_0x12b62b=this['transformR'+'Texture']['lock'](),_0x519f4d=this['transformB'+'Texture']['lock'](),_0x3ce0cb=(_0xc04eb9=this['transformM'+'otionTextu'+'re'])==null?void(0xeef+-0x1d*-0x13f+0x3*-0x1106):_0xc04eb9['lock'](),_0x347acb=(_0x2be43c=this['transformL'+'ifecycleTe'+'xture'])==null?void(0x4f*0x2f+0x23fe+0x5d*-0x8b):_0x2be43c['lock'](),_0x3eca6f=new D(),_0x10a873=new le(),_0x178f43=new D(),_0x3b4565=new D(),_0x7f4edd=_0x5ba671['createIter'](_0x3eca6f,_0x10a873,_0x178f43,null,_0x3b4565),_0x1a1c9b=_0x5ba671['getProp']('t'),_0x3140c5=_0x5ba671['getProp']('t_scale');for(let _0x58e6ad=-0xfff+0x1709+-0x70a;_0x58e6ad<_0x5ba671['numSplats'];_0x58e6ad++)_0x7f4edd['read'](_0x58e6ad),_0x10a873['normalize'](),_0x10a873['w']<-0x23cc+-0x1090+0x8ba*0x6&&_0x10a873['mulScalar'](-(0xb87+-0x1*-0x20c5+-0x2c4b)),_0x4e21eb[_0x58e6ad*(-0x16bd+0x2*-0x774+0x25a8)+(-0x35*0x32+-0x12*0x18b+0x2620)]=_0x3eca6f['x'],_0x4e21eb[_0x58e6ad*(0x1*-0x1fc7+-0x11ce*0x1+0x3198)+(0x603+-0xd4c+-0x3a5*-0x2)]=_0x3eca6f['y'],_0x4e21eb[_0x58e6ad*(-0x1*-0x18c7+0x1667+-0x5*0x96f)+(0x1a70+-0xa7f*-0x1+-0x19b*0x17)]=_0x3eca6f['z'],_0x519f4d[_0x58e6ad*(-0x1*0x1687+0x25*0xd3+0x7*-0x123)+(0x517*-0x2+-0x6b*-0x3+0x1*0x8ed)]=_0x969897(_0x178f43['x']),_0x519f4d[_0x58e6ad*(0x1*-0xc37+0x10*-0xaf+-0x251*-0xa)+(0x116f*-0x1+-0x1c9d+0x2e0d)]=_0x969897(_0x178f43['y']),_0x519f4d[_0x58e6ad*(-0x15b*-0x16+-0x2*0x1b0+-0x1a6f*0x1)+(-0x311+0x1*0x1945+-0x1632)]=_0x969897(_0x178f43['z']),_0x12b62b[_0x58e6ad*(0x8*0x83+-0xa6f*0x1+-0x6*-0x10f)+(-0x51b*-0x7+-0xd40+-0x167d)]=_0x10a873['x'],_0x12b62b[_0x58e6ad*(-0x79c+-0x2c2+0xa61)+(0xe*-0x262+-0x2460+0x657*0xb)]=_0x10a873['y'],_0x12b62b[_0x58e6ad*(-0xdfb*0x2+0x1de2+0x3*-0xa3)+(0x2258+-0x1*-0x2204+-0x445a)]=_0x10a873['z'],this['is4D']&&_0x3ce0cb&&_0x347acb&&(_0x3ce0cb[_0x58e6ad*(0x342+0x19a1+-0x1ce0)+(-0x1d53*0x1+0x123e+0x1*0xb15)]=_0x3b4565['x'],_0x3ce0cb[_0x58e6ad*(0x236d+-0x18d1+-0xa99*0x1)+(-0x4b*0x71+-0x17a0+0x38bc)]=_0x3b4565['y'],_0x3ce0cb[_0x58e6ad*(0x11bd+0x1495+-0x264f)+(-0x19e1+0x7f0+0x11f3)]=_0x3b4565['z'],_0x347acb[_0x58e6ad*(-0x1*-0x792+-0x27b*-0x8+-0x5*0x57b)+(-0x11c2+-0x4d5*-0x3+0x343*0x1)]=_0x1a1c9b?_0x1a1c9b[_0x58e6ad]:-0x52*0x29+-0x565+0x1287,_0x347acb[_0x58e6ad*(0x1*0x4b9+-0x4f4*-0x6+-0x226e)+(0x1ce+0x2382+-0x1*0x254f)]=_0x3140c5?Math['exp'](_0x3140c5[_0x58e6ad]):-0x2*-0x4a4+0x65*-0x42+-0x82*-0x21);this['transformA'+'Texture']['unlock'](),this['transformB'+'Texture']['unlock'](),this['transformR'+'Texture']['unlock'](),(_0x963173=this['transformM'+'otionTextu'+'re'])==null||_0x963173['unlock'](),(_0x241216=this['transformL'+'ifecycleTe'+'xture'])==null||_0x241216['unlock']();}async['updateSHDa'+'ta'](_0x26cf97){var _0x1ecc9a,_0x180dd4,_0xa43f75,_0x298c2f,_0x5218e2,_0x3c3dd6,_0x50ac09,_0x14d086;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x183f73=(_0x1ecc9a=this['sh1to3Text'+'ure2'])==null?void(0x19b*-0x18+0x1336*-0x1+-0x1*-0x39be):_0x1ecc9a['lock'](),_0x53f7ee=(_0x180dd4=this['sh4to7Text'+'ure2'])==null?void(-0x1494+0x11ed*-0x2+0x2*0x1c37):_0x180dd4['lock'](),_0x3cc288=(_0xa43f75=this['sh8to11Tex'+'ture2'])==null?void(-0x40d*0x2+0x1c3e+-0x1424):_0xa43f75['lock'](),_0x5ecf38=(_0x298c2f=this['sh12to15Te'+'xture2'])==null?void(0xb97+-0x2a8+-0x8ef):_0x298c2f['lock'](),_0x539968={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x23b661=$_(_0x26cf97,_0x539968*(-0xc4e+0x51e+0x733)),_0x165cbc=-0x1*-0xa93+-0x5*-0x95+-0x119*0x5,_0xc6e812=-0x19ff*-0x1+-0x5*-0x2b5+-0x2389*0x1,_0x29ca60=new Float32Array(-0x151c+-0x10f0+0x260d),_0x2c5f94=new Uint32Array(_0x29ca60['buffer']),_0x2c50c4=new Array(_0x539968*(-0x8fc+0x1a*0x155+-0x1*0x19a3))['fill'](-0x12*-0x31+0xa*-0x13a+0x2*0x469);for(let _0x3cf328=0x889+-0x6*0x28f+0x6d1;_0x3cf328<_0x26cf97['numSplats'];++_0x3cf328){for(let _0x1ae76d=0x7*0x455+-0xfc3*-0x1+-0x2e16;_0x1ae76d<_0x539968;++_0x1ae76d)_0x2c50c4[_0x1ae76d*(0x235c+0x1477+-0x37d0)]=_0x23b661[_0x1ae76d][_0x3cf328],_0x2c50c4[_0x1ae76d*(0x1557+0x491+-0x19e5)+(0x100+-0x11c7+-0x864*-0x2)]=_0x23b661[_0x1ae76d+_0x539968][_0x3cf328],_0x2c50c4[_0x1ae76d*(-0x1*0x1fac+-0x1fd0+0x5*0xcb3)+(0x1cc3+0x219+-0x1eda)]=_0x23b661[_0x1ae76d+_0x539968*(-0x23ee+-0x3*0x4b4+0x320c)][_0x3cf328];let _0x10a2c=_0x2c50c4[0x22f4*0x1+0x1492+-0x8a*0x67];for(let _0x4f87fb=0x17c+0x1f47+-0x20c2;_0x4f87fb<_0x539968*(-0x8a5*-0x1+-0x816+-0x8c);++_0x4f87fb)_0x10a2c=Math['max'](_0x10a2c,Math['abs'](_0x2c50c4[_0x4f87fb]));if(_0x10a2c!==0x7*0x1e3+0x974+-0x16a9){for(let _0x524b79=-0x2047+0x6*-0x4ac+0x3c4f;_0x524b79<_0x539968;++_0x524b79)_0x2c50c4[_0x524b79*(-0x470*0x8+-0x1c9*-0xe+0x1*0xa85)+(0xe96+-0x9f*-0x12+-0x4*0x671)]=Math['max'](0x13b5+-0x1b97+0x7e2,Math['min'](_0x165cbc,Math['floor']((_0x2c50c4[_0x524b79*(0x1451*0x1+0x2634+-0x3a82)+(0x8*0x2f3+0x1b4b+-0x32e3*0x1)]/_0x10a2c*(0x408*0x3+-0x18b0+0x7c*0x1a+0.5)+(0x1d21+-0x1b51+-0x4*0x74+0.5))*_0x165cbc+(0x1*-0x1491+-0x1d17+0x1c6*0x1c+0.5)))),_0x2c50c4[_0x524b79*(-0x10ab+0x19f6+0x58*-0x1b)+(-0x2433+-0x17d*-0xf+0xde1)]=Math['max'](0x80f*-0x3+-0x42*0x77+0x36db,Math['min'](_0xc6e812,Math['floor']((_0x2c50c4[_0x524b79*(0x4fb+-0x1*-0x70e+-0x402*0x3)+(-0xab7*-0x1+-0x4*-0x574+-0x2*0x1043)]/_0x10a2c*(-0x70b+-0x1ae*0x15+0x2a51*0x1+0.5)+(-0x233a+-0x15d7+0x3911+0.5))*_0xc6e812+(-0xb6c*-0x2+-0xa6+-0x3b3*0x6+0.5)))),_0x2c50c4[_0x524b79*(0x31d*0x9+-0x15d0+-0x632)+(-0x241f+-0x15*0x95+0x101e*0x3)]=Math['max'](-0x1*-0x2414+0x1b*0xcd+-0x39b3,Math['min'](_0x165cbc,Math['floor']((_0x2c50c4[_0x524b79*(-0x2647+0x1dc6+0x884)+(-0x23b9+-0x2*0x63d+0x3035)]/_0x10a2c*(0x1cdf+0x2285+0x3f64*-0x1+0.5)+(0x509*0x1+-0x997*-0x1+0x10*-0xea+0.5))*_0x165cbc+(0x2366+0x207e+-0x43e4+0.5))));_0x29ca60[-0x16cc+-0x2*0x671+-0x11d7*-0x2]=_0x10a2c,_0x183f73[_0x3cf328*(-0x3a1+0x1a7a+-0x16d5)+(0x15a8+0x8*-0x472+0xde8)]=_0x2c5f94[0x8d3*0x1+-0x12af*-0x1+-0x1b82],_0x183f73[_0x3cf328*(0x23e0+-0x1*0x103f+-0x139d)+(0x19a3*0x1+-0x1*-0x12c8+-0x2c6a)]=_0x2c50c4[0x18a2+-0x127*-0x11+-0x2c39*0x1]<<0x25e+0xd9a+-0x7*0x245|_0x2c50c4[0x1*-0x821+-0x19c2+0x5a6*0x6]<<0x1*0x883+-0x149+-0x72f|_0x2c50c4[-0x1ee6+-0x46*-0x10+0x18*0x11b],_0x183f73[_0x3cf328*(-0x26c+-0x9d9+-0xb9*-0x11)+(0x819+-0x25fe+0x1de7)]=_0x2c50c4[0x2095+0x17cd+-0x385f]<<-0xa93+0xa7*0x35+-0x17eb|_0x2c50c4[-0x5*0x25f+0x1*-0x1ada+0x1*0x26b9]<<0x14c5+0x3*0xa42+-0x3380|_0x2c50c4[-0x1b45+0xeb6+0xc94],_0x183f73[_0x3cf328*(0x1*0xfde+0x649+-0x1623)+(0x1f79+-0x1*0x2ad+0x1cc9*-0x1)]=_0x2c50c4[-0x3*-0x3e7+-0x22ec+0x173d]<<-0x67b+-0x2577+0x121*0x27|_0x2c50c4[0x26c4+-0x1*0x1bd9+-0x2*0x572]<<0x14d*0xc+0x1*0xf45+-0x1ed6|_0x2c50c4[-0x760*0x4+0x3db+0x19ad],this['shBands']>0x2e+-0x6*-0x20+0xed*-0x1&&(_0x53f7ee[_0x3cf328*(-0x1067+-0x1f6*0x11+-0x31c1*-0x1)+(-0x1*-0xce5+-0x1a*-0xc1+-0x3*0xad5)]=_0x2c50c4[-0x2079+0x269f+-0x139*0x5]<<0x1*-0x96b+-0x1*-0x2390+-0x1a10|_0x2c50c4[-0x335*-0xb+-0x73*-0x20+-0x3d1*0xd]<<-0x2*0x50f+-0xc59+0x86*0x2b|_0x2c50c4[-0x6*-0x250+0xaa3*-0x1+0x2*-0x199],_0x53f7ee[_0x3cf328*(-0x19e3+-0x2*-0x6f3+-0x1*-0xc01)+(0x23a0+0x11c1+0x10*-0x356)]=_0x2c50c4[-0xb91+0x37*-0x15+0x4*0x408]<<0xbf1*-0x3+-0x25f*-0xc+0x774|_0x2c50c4[0x1d1c+-0x1*-0x17e+-0x1e8d]<<0xbf9+0x2f*0x25+0x12b9*-0x1|_0x2c50c4[-0x1dd7+0xe4d+0xf98],_0x53f7ee[_0x3cf328*(-0xd4*0x1d+0x14b1*-0x1+0x1*0x2cb9)+(-0x785+-0x7*0x4d5+-0x9e*-0x43)]=_0x2c50c4[0x3*-0x233+0x195b+0x1*-0x12b3]<<0x40f*-0x5+0x63*0x3+0x1337*0x1|_0x2c50c4[0xd95+0x2138*-0x1+0x13b3]<<-0x14cb+0x1333+-0x1a3*-0x1|_0x2c50c4[0x27f+-0x62+0x83*-0x4],_0x53f7ee[_0x3cf328*(-0x4d*0x42+-0x195d*0x1+-0x1*-0x2d3b)+(0xd*-0xb5+-0x1*0x201+-0xb35*-0x1)]=_0x2c50c4[0x399+-0x1cd5+0x194e]<<0x180e+0x202b+-0x3824|_0x2c50c4[-0x7eb+0x208+0x2*0x2fb]<<-0x2*0x36f+0x977+-0x6*0x6d|_0x2c50c4[-0x195e+0xe77*-0x1+-0x27e9*-0x1],this['shBands']>0xc0d+-0x24d7*0x1+-0xc*-0x211?(_0x3cc288[_0x3cf328*(-0xe39*0x2+0x9*-0x297+-0x1*-0x33c5)+(0x485*0x5+0x1b7b+-0x3214)]=_0x2c50c4[0x1*0x153d+-0xc4a+0x46f*-0x2]<<0x4*0x1bf+0xc9b+-0x16*0xe3|_0x2c50c4[-0x16c1+0x1e52+0x17f*-0x5]<<-0x61*0x1a+0x1bb0+-0x11cb*0x1|_0x2c50c4[0x1*0x11d1+0x113+-0x12cd],_0x3cc288[_0x3cf328*(-0x200c+-0x12c1+-0x32d1*-0x1)+(-0x2659+-0x2*-0x1321+0x18)]=_0x2c50c4[0x5*-0x4f4+-0x12b6+0x8f*0x4e]<<-0x23*0x6e+-0x1dec+0x377*0xd|_0x2c50c4[0x953+-0xb0*-0x2f+-0x298a]<<0x3fc+0xa53+0x4*-0x391|_0x2c50c4[0x50b+-0xf1c+0xa2b],_0x3cc288[_0x3cf328*(0x234e+-0x73f*-0x5+-0x11*0x435)+(0x7b0+-0x1*-0x1985+-0x2133)]=_0x2c50c4[-0x18f8+0x3*0x431+0x20*0x64]<<-0xa*0x194+-0x15*-0xc5+-0x26*0x2|_0x2c50c4[-0x733*-0x1+-0x1*-0xd6f+-0x8e*0x25]<<0x21d1+-0x393+0xa11*-0x3|_0x2c50c4[0x1224+0x49d+-0xe*0x19e],_0x3cc288[_0x3cf328*(0x3*-0x2e5+-0xcd8+0x158b)+(0x7*0x26b+0x3*0x9+-0x1105)]=_0x2c50c4[0x2*0xf32+-0x5f3*-0x3+-0x301f]<<-0xa42+0xa0c+0x4b|_0x2c50c4[-0xab*0x17+-0xef1+0x1e6d]<<0x1b81+-0x24be+0x18c*0x6|_0x2c50c4[0x2*-0x1193+-0x24e4+0x482a],_0x5ecf38[_0x3cf328*(-0x1450+-0x298+0x16ec)+(-0x2b2*-0x7+-0x6*-0x545+0x2*-0x193e)]=_0x2c50c4[-0x12d2*-0x2+0x1*-0x1e33+-0x750*0x1]<<0x1956+0x12ef+-0x2c30|_0x2c50c4[0x1fbe+-0xedb+-0x10c1]<<-0x1*-0x227c+-0x605+-0x1c6c|_0x2c50c4[-0x2*-0x495+0xd3d+-0x5*0x474],_0x5ecf38[_0x3cf328*(-0xa91+0x153d+-0xaa8)+(-0x150d+0x41+-0x3*-0x6ef)]=_0x2c50c4[0x17df+-0x1*-0x1ec5+0x1b4*-0x20]<<0x11*-0x99+-0xebb+0x3*0x853|_0x2c50c4[0x22*0x86+-0x429*0x1+-0xd7e]<<-0x69a+-0x1331*0x2+-0x1*-0x2d07|_0x2c50c4[-0x1335+0x68*0x3a+0x1*-0x435],_0x5ecf38[_0x3cf328*(0xe*-0xac+-0x1*-0x1def+0x1483*-0x1)+(-0xb*0x2f3+-0xd43+0x16db*0x2)]=_0x2c50c4[-0x34*-0xa3+0x1507+0x2b3*-0x14]<<-0x2118+0x145e+0xccf|_0x2c50c4[0x4c8*-0x1+-0x211a+-0x2*-0x1305]<<-0xc2+-0x20*-0xc+-0x1*0xb3|_0x2c50c4[0x2393*0x1+0x152+-0x24bc],_0x5ecf38[_0x3cf328*(0xc52*0x3+0x94d*-0x4+0x42)+(-0x2*-0xa8f+-0x6c2+0x1*-0xe59)]=_0x2c50c4[-0x1097+-0x1cf8+0x2db9]<<-0x2a9+-0x1e0b+0x7*0x4af|_0x2c50c4[-0x9b6+0x3*0x9ad+-0x1326*0x1]<<-0x31*-0x9f+0x1aaf+-0x3913|_0x2c50c4[-0x7*0x26b+0x495*-0x2+0x1a43]):_0x3cc288[_0x3cf328]=_0x2c50c4[0x1ee5+-0x1efe+0x2e]<<0x1ec2+-0x4bd+0x2*-0xcf8|_0x2c50c4[-0xc*0x202+0x234f+-0x103*0xb]<<0x2aa+-0xe42*0x2+-0x3b3*-0x7|_0x2c50c4[-0x2d*0xb1+-0x4*0x8e1+0x857*0x8]);}}(_0x5218e2=this['sh1to3Text'+'ure2'])==null||_0x5218e2['unlock'](),(_0x3c3dd6=this['sh4to7Text'+'ure2'])==null||_0x3c3dd6['unlock'](),(_0x50ac09=this['sh8to11Tex'+'ture2'])==null||_0x50ac09['unlock'](),(_0x14d086=this['sh12to15Te'+'xture2'])==null||_0x14d086['unlock']();}async['updateSHDa'+'taByWorker'](_0x15c6d7){var _0x1e8cab,_0x3d9df5,_0x59d810,_0x582b39,_0x1c9bd8;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x2bbd0c={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x3b57b4,_0x1f85f9,_0x11669f,_0x1f9a2c;if((_0x1e8cab=_0x15c6d7['transformD'+'ata'])!=null&&_0x1e8cab['sh1to3Data'])_0x3b57b4=(_0x3d9df5=_0x15c6d7['transformD'+'ata'])==null?void(0x1*0x14b5+-0xe00+-0x6b5*0x1):_0x3d9df5['sh1to3Data'],_0x1f85f9=(_0x59d810=_0x15c6d7['transformD'+'ata'])==null?void(0x12*0x3b+-0x17d8+-0x9d9*-0x2):_0x59d810['sh4to7Data'],_0x11669f=(_0x582b39=_0x15c6d7['transformD'+'ata'])==null?void(-0x1d2*-0xe+-0xc98+-0xce4):_0x582b39['sh8to11Dat'+'a'],_0x1f9a2c=(_0x1c9bd8=_0x15c6d7['transformD'+'ata'])==null?void(-0x2*0x1282+-0x2b9*-0x3+0x1cd9):_0x1c9bd8['sh12to15Da'+'ta'];else{const _0x232622=$_(_0x15c6d7,_0x2bbd0c*(-0x48*0x3d+-0xd4f+0x1e7a)),_0x27e52d=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x15c6d7['numSplats'],this['shBands'],_0x232622);_0x3b57b4=_0x27e52d['sh1to3Data'],_0x1f85f9=_0x27e52d['sh4to7Data'],_0x11669f=_0x27e52d['sh8to11Dat'+'a'],_0x1f9a2c=_0x27e52d['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x3b57b4),this['shBands']>-0xa8e+0x1*-0x25d3+0x16*0x233&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x1f85f9),this['shBands']>-0x184d+0x1*-0x4cf+-0x2*-0xe8f?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x11669f),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x1f9a2c)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x11669f));}}async function HA(){const _0x10c7db=new Float32Array(-0xfb1*0x1+-0x135d*-0x1+-0x3ab);new Int32Array(_0x10c7db['buffer']);let _0x297f44=null,_0x79227a=null,_0x205cd7=null,_0x3cb6f8=null,_0x5e6e82=null,_0x541df1=null,_0x4d3bc1=null,_0x5c7a81=null;self['onmessage']=async _0x21b661=>{const {data:_0x560632}=_0x21b661;switch(_0x560632['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x50a574(_0x560632['numSplats'],_0x560632['shBands'],_0x560632['SHData']);break;case'updateTran'+'sformData':_0x5d6a02(_0x560632['numSplats'],_0x560632['is4D'],_0x560632['position'],_0x560632['rotation'],_0x560632['motion'],_0x560632['scale'],_0x560632['muT'],_0x560632['tScale']);break;case'destroyWor'+'ker':_0xd70969();break;}};const _0x5d6a02=(_0x4d08b5,_0xd90c76,_0xbacb1c,_0x596925,_0x153afa,_0x26cc6d,_0x38c56a,_0x15571d)=>{_0xd70969(),_0xd90c76&&(_0x79227a=new Float32Array(_0x4d08b5*(0x3*-0x6d1+0x1d23+-0x1*0x8ad)),_0x5c7a81=new Float32Array(_0x4d08b5),_0x5e6e82=new Float32Array(_0x153afa['buffer']['slice']()),_0x4d3bc1=new Float32Array(_0x153afa['buffer']['slice']())),_0x3cb6f8=new Float32Array(_0xbacb1c['buffer']['slice']()),_0x297f44=new Float32Array(_0xbacb1c['buffer']['slice']()),_0x541df1=new Uint16Array(_0x26cc6d['buffer']['slice']()),_0x205cd7=new Float32Array(_0x596925['buffer']['slice']());for(let _0x1554b3=0x1349*0x1+0x1*0x14c5+-0x280e;_0x1554b3<_0x4d08b5;_0x1554b3++)_0xd90c76&&_0x79227a&&(_0x5c7a81[_0x1554b3]=_0x15571d?Math['exp'](_0x15571d[_0x1554b3]):-0xf63+0x612+-0x35*-0x2d,_0x79227a[_0x1554b3*(0x2443+-0x929+-0x1b17)+(-0x2563+0x169*0x12+0xc01)]=_0x38c56a?_0x38c56a[_0x1554b3]:0x1d30+-0x2*0x11dc+0x4c*0x16,_0x79227a[_0x1554b3*(-0x175*-0xb+-0x11b*0x1c+-0xef0*-0x1)+(-0x2345+-0x767*0x5+-0x5*-0xe75)]=_0x5c7a81[_0x1554b3]);const _0x2321b4=[_0x297f44['buffer'],_0x3cb6f8['buffer'],_0x541df1['buffer'],_0x205cd7['buffer']];_0xd90c76&&_0x2321b4['push'](_0x5e6e82['buffer'],_0x79227a['buffer'],_0x4d3bc1['buffer'],_0x5c7a81['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x297f44,'dataPosition':_0x3cb6f8,'dataScale':_0x541df1,'dataRotation':_0x205cd7,'dataMotion':_0x5e6e82,'dataTime':_0x79227a,'motion':_0x4d3bc1,'tScaleArray':_0x5c7a81},_0x2321b4);},_0x50a574=(_0x440ddb,_0x5577fa,_0x2b6079)=>{const _0x406c33=new Uint32Array(_0x440ddb*(0x1bc4+0x1*0x1dfa+-0x6*0x99f)),_0x5cb861=new Uint32Array(_0x440ddb*(0xd*-0x103+-0x112d+0x1e58)),_0x4df235=new Uint32Array(_0x440ddb*(0x1*0x25bd+-0x5*0x24+-0x2505)),_0x58f049=new Uint32Array(_0x440ddb*(-0x1*0x185a+-0xb02*0x3+0x3964)),_0x12c557={0x1:0x3,0x2:0x8,0x3:0xf}[_0x5577fa],_0x3d290b=_0x2b6079,_0x5dc132=0x238*-0xd+0xbd1+0x1906,_0x15d20e=0x11a*-0x1b+-0x218c+0x4349,_0x1b6dda=new Float32Array(0x3a*-0xd+0x1*0x9e4+-0x6f1),_0x4bb660=new Uint32Array(_0x1b6dda['buffer']),_0x5d1702=new Array(_0x12c557*(0x1*-0xff4+-0x1277+0x226e))['fill'](0x1*0x16d+0x2364+-0x75d*0x5);for(let _0x22644e=0x311*0x5+-0x18*0x16d+0x12e3;_0x22644e<_0x440ddb;++_0x22644e){for(let _0x20b8de=-0x3aa*0x3+0x1693+-0xb95;_0x20b8de<_0x12c557;++_0x20b8de)_0x5d1702[_0x20b8de*(0x1*-0xbdb+-0x6b*0x5+-0xdf5*-0x1)]=_0x3d290b[_0x20b8de][_0x22644e],_0x5d1702[_0x20b8de*(-0x440+-0x1b86+-0x4f*-0x67)+(-0x2270+0xd*0x5+0x2230)]=_0x3d290b[_0x20b8de+_0x12c557][_0x22644e],_0x5d1702[_0x20b8de*(-0x496+-0x1*0xfa3+-0x2*-0xa1e)+(-0x46a*0x6+-0x633*-0x2+0xe18)]=_0x3d290b[_0x20b8de+_0x12c557*(-0x217e+0x2*0xd4b+0x1*0x6ea)][_0x22644e];let _0x5b579f=_0x5d1702[0x1b71*0x1+-0x7*0x19+-0x1ac2];for(let _0x373a1e=0x4b4+-0x3*0x4f1+0x12*0x90;_0x373a1e<_0x12c557*(0x982+-0x26*0x101+-0x1e9*-0xf);++_0x373a1e)_0x5b579f=Math['max'](_0x5b579f,Math['abs'](_0x5d1702[_0x373a1e]));if(_0x5b579f!==0x2*-0xe5f+0x1*-0x89f+0x779*0x5){for(let _0x41b23f=-0x2158+0x9*0xd5+0x19db;_0x41b23f<_0x12c557;++_0x41b23f)_0x5d1702[_0x41b23f*(-0x10fa+0x1c92+-0xb95)+(0xc09+-0x11b6+0x5ad)]=Math['max'](0x302*0x1+-0x3cb*-0x1+-0x6cd*0x1,Math['min'](_0x5dc132,Math['floor']((_0x5d1702[_0x41b23f*(0x2*0x8eb+0xb*0xdf+0x1b68*-0x1)+(0x487*0x1+-0x2471+0xbe*0x2b)]/_0x5b579f*(-0x225a+-0x1*-0xdd+-0x1*-0x217d+0.5)+(0xb1b+0x8fa+-0x1415+0.5))*_0x5dc132+(-0x49f*0x1+0x1fd*-0x2+0x47*0x1f+0.5)))),_0x5d1702[_0x41b23f*(-0x1089+-0x22d9+-0x3b*-0xdf)+(-0xa1b+0xa9*0x1+0x973)]=Math['max'](-0x1bc4+0x1225+0x335*0x3,Math['min'](_0x15d20e,Math['floor']((_0x5d1702[_0x41b23f*(0x1d8*0x15+0x1*-0x30a+-0x23ab)+(0x1c4a+0x1fd*-0x3+-0xb29*0x2)]/_0x5b579f*(0x15ca+-0x398+-0x1232+0.5)+(0x1671+0x1c64+-0x32d5+0.5))*_0x15d20e+(-0xa6*0x11+-0xf82+0x1a88+0.5)))),_0x5d1702[_0x41b23f*(-0xd75*0x2+-0x1*-0x23bf+-0x8d2)+(0x3aa*0x1+-0x1*0x167b+0x1*0x12d3)]=Math['max'](-0x1a99*0x1+0x7b*0x29+-0x373*-0x2,Math['min'](_0x5dc132,Math['floor']((_0x5d1702[_0x41b23f*(0x1167+0x13c3*-0x1+-0x25f*-0x1)+(0x103*0x3+0x1186+-0x148d)]/_0x5b579f*(0x1cf1+0x1c42+0x65b*-0x9+0.5)+(0x10b6+0x26d*0x9+0x3*-0xcd9+0.5))*_0x5dc132+(0x5ed+-0xd+-0x5e0+0.5))));_0x1b6dda[0x1a1f*0x1+-0x18df*0x1+-0x140]=_0x5b579f,_0x406c33[_0x22644e*(-0x1ff8+-0xb*0x7a+0x253a)+(0x1*-0x683+-0x2*0xd81+-0x2185*-0x1)]=_0x4bb660[0x3*-0x93a+0xb*-0x1bb+-0x1*-0x2eb7],_0x406c33[_0x22644e*(0xfe1+-0x4*0x71f+0xc9f*0x1)+(0x447+0x2653*-0x1+0x220d)]=_0x5d1702[-0x2*-0xa84+0x25e*-0x5+-0x932]<<-0x4a*-0x71+0x1*-0x149b+-0x3*0x3fe|_0x5d1702[-0x565*-0x4+-0x1*0x1261+0x1*-0x332]<<-0x989+0x2*0x3eb+0x1be|_0x5d1702[-0x53d+-0x1854+0x1d93],_0x406c33[_0x22644e*(-0x3f1*-0x2+0x1*0x1b65+-0x3*0xbc1)+(0x5bc*-0x1+-0x4*0x17d+0xbb2)]=_0x5d1702[-0x2*0x1373+-0x6eb+0x4*0xb75]<<-0x22f7+-0x154b+0x3857*0x1|_0x5d1702[0x483+-0x178+-0x19*0x1f]<<0x96c+-0xa4e*-0x2+0x1*-0x1dfd|_0x5d1702[-0xb*0xc2+-0x6*-0x20d+-0x3f3],_0x406c33[_0x22644e*(-0x1a7c+-0x11*0x20e+0x3d6e)+(0x2400+-0xa*-0x27d+-0x3cdf)]=_0x5d1702[-0x2d2*-0x2+-0x26*-0x96+-0x2b*0xa6]<<0x1e5d+-0x1*-0x10ba+0x1781*-0x2|_0x5d1702[0x63c+0x1af*-0x6+0x1*0x3e5]<<-0xddb+0x3e*0x47+0x1*-0x34c|_0x5d1702[-0x15d*-0x1a+0x171e+0x2*-0x1d44],_0x5577fa>-0x50b*0x1+0x1*0x293+0x279&&(_0x5cb861[_0x22644e*(-0x1*-0xfb+-0xc64+0xb6d)+(-0x8f1*-0x3+0x1*0x159b+0x306e*-0x1)]=_0x5d1702[0xb4b+0xa5b+0x159d*-0x1]<<-0x1*0x246b+-0x33*-0x3b+0x5*0x4f3|_0x5d1702[0x371+0x13c4+-0x1*0x172b]<<-0x2*0xfe4+-0x1*0x26bd+0x4690|_0x5d1702[-0x5c*-0x34+-0xb2a*-0x3+0x1161*-0x3],_0x5cb861[_0x22644e*(0x571*0x2+0xa6*-0x11+-0x1*-0x28)+(-0x22a6+0x195b*0x1+0x23*0x44)]=_0x5d1702[0x14*-0x11+-0x774+0x71*0x14]<<-0x1*0xa39+0x133a+0x23b*-0x4|_0x5d1702[0xf83+-0x285+-0xcf1]<<0x1b98+-0x1*0x5c9+-0x2*0xae2|_0x5d1702[-0xa5b+-0xd1*0x7+0x1020],_0x5cb861[_0x22644e*(-0x49*-0x5c+-0x240b+-0x1f7*-0x5)+(0x31*0x43+0x1e1c+-0x9*0x4c5)]=_0x5d1702[-0x1b52+0x1c3*-0xb+0x2ec2]<<0x14b7+-0x1*-0x199+-0x15*0x10f|_0x5d1702[-0x3*0xacb+-0x140+-0x45*-0x7d]<<-0x1*0x509+-0x2071+0x71*0x55|_0x5d1702[-0x12*0x169+0x1058+-0x14d*-0x7],_0x5cb861[_0x22644e*(0x1*-0x2149+0x18cb+0x882)+(0x1*0x9e4+-0x1*0xba2+0x1c1)]=_0x5d1702[-0x36*-0x5e+-0x5c5+0xdfd*-0x1]<<0x5*-0x50b+0x1*0x20e2+-0x796|_0x5d1702[-0x1150+0x128f+-0x12c]<<-0x1*-0x22f7+-0x5d*-0x1f+-0x233*0x15|_0x5d1702[-0x9b8*-0x1+-0x29+-0x97b],_0x5577fa>-0x2*-0x5e0+-0x2b3+-0x1*0x90b?(_0x4df235[_0x22644e*(-0x2015+0x1c*-0xe8+0x3979)+(0x3af+-0xd9d+0x9ee)]=_0x5d1702[-0x233c+-0xe80+0x1*0x31d1]<<0xde2+0xfd3+-0x4f0*0x6|_0x5d1702[-0x2*0x4f4+-0x13a5*0x1+0x1da3]<<-0x1ca8+-0x1c6c+0x391f|_0x5d1702[0x1*0x2153+-0xb*0x2d8+-0x1f4],_0x4df235[_0x22644e*(0x241d+0x3bf*-0x1+0x1*-0x205a)+(0x8*-0x355+0x1*-0x1be2+-0x368b*-0x1)]=_0x5d1702[-0x25dc+0xc67+0x198d*0x1]<<-0x24e5+-0x242a+0x4924|_0x5d1702[0xc56+-0x1415+-0xfb*-0x8]<<0x17ba+-0x347*0x4+-0xa93|_0x5d1702[-0x21ad+0xd4*-0x17+0x34d3],_0x4df235[_0x22644e*(0x818+0x7b6+-0x2*0x7e5)+(0x12d0+0x1*-0x647+-0xc87)]=_0x5d1702[0x4*-0x6e9+-0x19af+0x356e]<<0x1f79*0x1+-0x193b+0x53*-0x13|_0x5d1702[0x2da+-0x1367+0x10a9]<<-0x19bd+0xdee+0xbda|_0x5d1702[0xab4+0x166*0x9+-0x172d],_0x4df235[_0x22644e*(0x3*0x8e+-0x24f*0x10+0x234a)+(-0xc5f+-0x10*-0x97+0x1*0x2f2)]=_0x5d1702[0x884+-0x1e09+0x15a3]<<0x1b43+0xcec+-0x281a|_0x5d1702[-0x1*-0x766+-0x5de*0x1+-0x169]<<0xb8b+-0x1931+0xdb1|_0x5d1702[-0x1fab+0x238c+0x1*-0x3c1],_0x58f049[_0x22644e*(-0x2*0x17b+-0xbc1+0xebb*0x1)+(0x1*0x2213+0x2526+-0x4739)]=_0x5d1702[0xcb4+-0x1a*-0x152+-0x2ee7]<<0xebb+-0xae3*-0x2+-0x246c|_0x5d1702[0x1336+0x1703+-0x2a17]<<0x1*0x2031+-0x1*-0x1c33+0x89f*-0x7|_0x5d1702[-0x1bbf+-0x1*-0x15df+0x603],_0x58f049[_0x22644e*(0x2388+-0x7*0x223+-0x148f)+(-0x23*0x100+-0x3*-0x35b+0x18f0)]=_0x5d1702[0x2557+-0x242d+-0x106]<<-0x2*0x12c5+0x4*-0x45b+0x7*0x7dd|_0x5d1702[0x14c*0x8+0x1af3*0x1+0x1297*-0x2]<<0x12*0xfb+0x1013+-0x21ae|_0x5d1702[0xc71+0x3*0x504+-0x1b57],_0x58f049[_0x22644e*(0x1eed+-0x17ab+-0x73e)+(0x1a6e+0xb23*-0x1+-0xf49)]=_0x5d1702[-0x2b6*0x1+0x1*0x26ff+-0x2422]<<-0x7*0x199+-0x1806*0x1+0x234a|_0x5d1702[-0x351+-0x11e+-0x1*-0x497]<<0x3*-0xafa+0xb4c+0x15ad|_0x5d1702[-0x390*-0x9+-0x1*-0x1f2d+-0x3f14],_0x58f049[_0x22644e*(-0x73c*-0x4+0x59*-0x53+-0x11)+(-0x7b2+-0x1*-0x12d1+-0x3*0x3b4)]=_0x5d1702[0xca1*-0x1+-0x7*0x9d+-0x51*-0x36]<<-0x793*-0x1+0x203b+-0x27b9|_0x5d1702[-0x5*0x487+-0x2*0x335+-0x74e*-0x4]<<-0x7*0x166+-0x8d8+-0x1*-0x12ad|_0x5d1702[-0x10f+-0x1*0x17b+0x2b6]):_0x4df235[_0x22644e]=_0x5d1702[0x1*-0x9b4+0x2*-0x6cb+0x175f]<<-0x1*0x16f9+0xb*-0x351+0x3b89*0x1|_0x5d1702[-0x26db+0x25b6+0x1*0x13b]<<-0x1*0x1993+-0x1f5d+0x38fb|_0x5d1702[0x2*0x9b7+-0x5c*0x37+-0x6d*-0x1]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x406c33,'sh4to7Data':_0x5cb861,'sh8to11Data':_0x4df235,'sh12to15Data':_0x58f049}},[_0x406c33['buffer'],_0x5cb861['buffer'],_0x4df235['buffer'],_0x58f049['buffer']]);},_0xd70969=()=>{_0x297f44=null,_0x79227a=null,_0x205cd7=null,_0x3cb6f8=null,_0x5e6e82=null,_0x541df1=null,_0x4d3bc1=null,_0x5c7a81=null;};}class WA extends me{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+HA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x4f8d3c,_0x5ad0f2,_0x7b0dd5){_0x4f8d3c['onmessage']=_0x53d3c5=>{if(!this['worker'])return;const {data:_0x1ea68a}=_0x53d3c5;if(_0x1ea68a['type']===_0x5ad0f2)switch(_0x5ad0f2){case'updatedSHD'+'ata1':_0x7b0dd5(_0x1ea68a['data']);break;case'updatedCol'+'orData':_0x7b0dd5(_0x1ea68a['data']);break;case'updatedTra'+'nsformData':_0x7b0dd5(_0x1ea68a);break;}};}['updateSHDa'+'ta1'](_0x4d7e3d,_0x51aabc,_0x57690e){var _0x5e14b4;return(_0x5e14b4=this['worker'])==null||_0x5e14b4['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x4d7e3d,'shBands':_0x51aabc,'SHData':_0x57690e}),new Promise(_0x34352d=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x278dc4=>{_0x34352d(_0x278dc4);});});}async['updateTran'+'sData'](_0x454be1,_0x965f0d,_0x14e596,_0x46ec97,_0x55bcd3,_0x5f4b7c,_0x1de4f9,_0x4843e4){var _0x3945c4;return(_0x3945c4=this['worker'])==null||_0x3945c4['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x454be1,'is4D':_0x965f0d,'position':_0x14e596,'rotation':_0x46ec97,'motion':_0x55bcd3,'scale':_0x5f4b7c,'muT':_0x1de4f9,'tScale':_0x4843e4}),new Promise(_0x2fd1b0=>{const _0x55e5f4=_0x6cccd3=>{_0x2fd1b0(_0x6cccd3);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x55e5f4);});}['destroy'](){var _0x596e78;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x596e78=this['worker'])==null||_0x596e78['terminate'](),this['worker']=null);}}const X_=(_0xcba4d1,_0x9713ce)=>{const _0x1c71b8=[];for(let _0x57b71b=-0x1*-0x15af+0x1bfd*0x1+0x2*-0x18d6;_0x57b71b<_0x9713ce;++_0x57b71b)_0x1c71b8['push'](_0xcba4d1['getProp']('f_rest_'+_0x57b71b));return _0x1c71b8;};class $A extends Zy{constructor(_0x4953c2,_0x422e57){super(_0x4953c2,_0x422e57),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(-0x1753+-0x1901+-0x1*-0x3055)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new WA(),this['assetsMana'+'gerLoadedT'+'ime']=0x166*-0x11+0x11cb+-0x20*-0x30);}['setSceneIn'+'fo'](_0x571c36){this['sceneInfo']['duration']=_0x571c36['duration'],this['sceneInfo']['fps']=_0x571c36['fps'],this['sceneInfo']['totalGauss'+'ians']=_0x571c36['totalGauss'+'ians'],this['sceneInfo']['globalBoun'+'dingBoxMin']=new D(_0x571c36['globalBoun'+'dingBox']['min'][-0x1e28+0x13f7+0xa31],_0x571c36['globalBoun'+'dingBox']['min'][-0x174e+0x407*0x4+0x13*0x61],_0x571c36['globalBoun'+'dingBox']['min'][0x2*-0x135d+0x40*-0x40+0x36bc]),this['sceneInfo']['globalBoun'+'dingBoxMax']=new D(_0x571c36['globalBoun'+'dingBox']['max'][0x1baa+-0x1*0x2671+-0x59*-0x1f],_0x571c36['globalBoun'+'dingBox']['max'][-0x71*0x2d+0x16c9+-0xf9*0x3],_0x571c36['globalBoun'+'dingBox']['max'][0x80b+-0x6*0x673+0x1ea9]);const _0x473399=_0x571c36['globalBoun'+'dingBox']['min'][-0x398*0x5+0xc51+-0x1*-0x5a7],_0x5e440e=_0x571c36['globalBoun'+'dingBox']['min'][-0x1*0x12b1+-0x1e0+-0xa49*-0x2],_0x435624=_0x571c36['globalBoun'+'dingBox']['min'][-0x53e*-0x5+-0x1*-0x1091+-0x2ac5],_0x3296cd=_0x571c36['globalBoun'+'dingBox']['max'][-0x137*0x18+-0x5*-0x1ba+-0x8e*-0x25],_0x5a2e0d=_0x571c36['globalBoun'+'dingBox']['max'][-0xf71+0x1*0x11a7+-0x235],_0x5377ca=_0x571c36['globalBoun'+'dingBox']['max'][-0x193c+0x1ce3+-0x3a5],_0x2ff18d=new D((_0x473399+_0x3296cd)*(-0x442*-0x2+-0xe6*0x23+0x16ee+0.5),(_0x5e440e+_0x5a2e0d)*(0x23d9+0x24fb*-0x1+-0x122*-0x1+0.5),(_0x435624+_0x5377ca)*(0x1607+0x2d*0x92+-0x2fb1+0.5)),_0x59a135=new D((_0x3296cd-_0x473399)*(0x1*-0x15fb+0xda7+0x854+0.5),(_0x5a2e0d-_0x5e440e)*(0x186f+-0x1c59+0x3ea+0.5),(_0x5377ca-_0x435624)*(0x1c01+-0xfa8+0x1*-0xc59+0.5)),_0x3f4dce=new De(_0x2ff18d,_0x59a135);this['sceneInfo']['globalBoun'+'dingBox']=_0x3f4dce,this['aabb']=_0x3f4dce;}async['updateData'](){var _0x27b7b5,_0x593b8a,_0x1d55c6,_0x2d1340,_0x365b0a,_0x246cee,_0x1b0c08,_0x351410,_0x324ead,_0x267cb0,_0x56482c;await super['updateData']();const _0x31930e=this['gsplatData'];if(!_0x31930e)return;this['is4D']=_0x31930e['is4D'];const _0x2e442c=await this['getTransfo'+'rmDataByWo'+'rker'](_0x31930e);this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x2e442c['centers'],this['motion']=_0x2e442c['motion'],this['tScale']=_0x2e442c['tScaleArra'+'y'],this['muT']=await _0x31930e['getMuT'](),this['timeIndex']=await _0x31930e['getTimeInd'+'ex']();const _0x55f7bb=this['evalTextur'+'eSize'](_0x31930e['numSplats']);this['colorTextu'+'re']?((_0x27b7b5=this['colorTextu'+'re2'])==null||_0x27b7b5['destroy'](),(_0x593b8a=this['transformA'+'Texture2'])==null||_0x593b8a['destroy'](),(_0x1d55c6=this['transformB'+'Texture2'])==null||_0x1d55c6['destroy'](),(_0x2d1340=this['transformR'+'Texture2'])==null||_0x2d1340['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x55f7bb),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x55f7bb),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x55f7bb),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x55f7bb),this['is4D']&&((_0x365b0a=this['transformM'+'otionTextu'+'re2'])==null||_0x365b0a['destroy'](),(_0x246cee=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x246cee['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x55f7bb),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x55f7bb))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',nt,_0x55f7bb),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x55f7bb),this['transformA'+'Texture']=this['createText'+'ure']('transformA',Ye,_0x55f7bb),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x55f7bb),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ui,_0x55f7bb),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x55f7bb),this['transformR'+'Texture']=this['createText'+'ure']('transformR',Ye,_0x55f7bb),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x55f7bb),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',Ye,_0x55f7bb),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x55f7bb),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',Ye,_0x55f7bb),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x55f7bb))),await this['updateColo'+'rData'](_0x31930e),await this['updateTran'+'sformFromD'+'ata'](_0x2e442c),this['shBands']=_0x31930e['shBands'],this['shBands']>0x1a03+-0x38b*-0x2+-0x1*0x2119&&(this['sh1to3Text'+'ure']?((_0x1b0c08=this['sh1to3Text'+'ure2'])==null||_0x1b0c08['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x55f7bb),this['shBands']>-0x24ad+0x1426+0x2*0x844&&((_0x351410=this['sh4to7Text'+'ure2'])==null||_0x351410['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x55f7bb),this['shBands']>-0xbf1+-0x89*0x2e+0x17*0x197?((_0x324ead=this['sh8to11Tex'+'ture2'])==null||_0x324ead['destroy'](),(_0x267cb0=this['sh12to15Te'+'xture2'])==null||_0x267cb0['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x55f7bb),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x55f7bb)):((_0x56482c=this['sh8to11Tex'+'ture2'])==null||_0x56482c['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x55f7bb)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x55f7bb),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ue,_0x55f7bb),this['shBands']>-0x2163+0xa60+0x3d6*0x6&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ue,_0x55f7bb),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x55f7bb),this['shBands']>0x1ae0+-0x11c+-0x19c2?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ue,_0x55f7bb),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x55f7bb),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ue,_0x55f7bb),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x55f7bb)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Yi,_0x55f7bb),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Yi,_0x55f7bb)))),await this['updateSHDa'+'taByWorker'](_0x31930e));}['updateText'+'ure'](){this['isDestroye'+'d']||(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x30ad07){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x30ad07}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0xe07f14,_0x5640e0,_0x10c030,_0x5467d5,_0x44a87d,_0x2645a3){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0xe07f14,'timeOption':_0x5640e0,'loadedTime':_0x10c030,'asset':_0x5467d5,'events':_0x44a87d,'seekCB':_0x2645a3}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(0x7a+-0x3e*0x26+0x8ba);try{for(;this['appendQueu'+'e']['length']>0x2*-0xa60+0x95a+-0xb66*-0x1;){const _0x44eb75=this['appendQueu'+'e']['shift']();_0x44eb75['type']==='append'?await this['processApp'+'endTask'](_0x44eb75['data']):_0x44eb75['type']==='release'&&await this['processRel'+'easeTask'](_0x44eb75['data']);}}finally{this['isProcessi'+'ngQueue']=!(0x1f6a+-0xc47+-0x1322);}}}async['processRel'+'easeTask'](_0x550a1c){const {index:_0x4c49e2}=_0x550a1c;this['isDestroye'+'d']||await this['gsplatData']['releaseSeq'+'Data'](_0x4c49e2);}async['processApp'+'endTask'](_0x1201f1){var _0x925d45;const {gsplatData:_0xc35dd,timeOption:_0x35036f,loadedTime:_0x25bf6f,asset:_0x361939,events:_0x238cd7,seekCB:_0x1eae3c}=_0x1201f1;!this['gsplatData']||this['isDestroye'+'d']||(globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x35036f,this['asset']=_0x361939,this['assetsMana'+'gerLoadedT'+'ime']=_0x25bf6f,this['events']=_0x238cd7,await this['gsplatData']['appendGSpl'+'atData'](_0xc35dd,_0x25bf6f,_0x35036f),console['log']('loadTime__'+'__','gsplatDeco'+'dedResourc'+'e\x20gsplatDa'+'ta.appendG'+'SplatData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x136f+0x4bc*-0x8+-0x43*-0xdb),_0xc35dd['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0xc35dd['numSplats'])['toFixed'](-0x3eb+-0xfc3*0x1+0x13b1)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20this.upd'+'ateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x11*-0x151+0x2232+0xbcf*-0x1),_0xc35dd['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await((_0x925d45=this['gsplatInst'+'ance'])==null?void(0x126f+-0x1*0x1c19+0x9aa):_0x925d45['updateInst'+'anceData'](this,_0x25bf6f,_0x1eae3c)),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20updateIn'+'stanceData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x1*-0x22e5+0x1ec+0x20fb),_0xc35dd['numSplats']));}['fireAssets'+'ManagerTim'+'eIndex'](_0x164632,_0x4e7afb){var _0x5c9f47;const _0x524df0=_0x164632||this['assetsMana'+'gerLoadedT'+'ime'];(_0x5c9f47=this['asset'])==null||_0x5c9f47['fire']('setAssetsL'+'oaded',_0x524df0,_0x4e7afb);}['destroy'](){var _0x21a195,_0x97cb04,_0x4c9490,_0xc62bad,_0x359a60,_0x112876,_0x415faf,_0x1f5ba9,_0x4f4ac6,_0x508c98,_0x3002ed,_0x5906b9,_0xe24fd2,_0x5d0fe6,_0xfe83c,_0x5c09bc,_0x24a2a1,_0x24e522,_0x55f85f,_0x1f2ffd,_0x40bae7;(_0x21a195=this['updateData'+'Worker'])==null||_0x21a195['destroy'](),this['updateData'+'Worker']=void(0x7ec+0x1*0x189d+-0x2089),(_0x97cb04=this['colorTextu'+'re'])==null||_0x97cb04['destroy'](),(_0x4c9490=this['transformA'+'Texture'])==null||_0x4c9490['destroy'](),(_0xc62bad=this['transformB'+'Texture'])==null||_0xc62bad['destroy'](),(_0x359a60=this['transformR'+'Texture'])==null||_0x359a60['destroy'](),(_0x112876=this['transformM'+'otionTextu'+'re'])==null||_0x112876['destroy'](),(_0x415faf=this['transformL'+'ifecycleTe'+'xture'])==null||_0x415faf['destroy'](),(_0x1f5ba9=this['sh1to3Text'+'ure'])==null||_0x1f5ba9['destroy'](),(_0x4f4ac6=this['sh4to7Text'+'ure'])==null||_0x4f4ac6['destroy'](),(_0x508c98=this['sh8to11Tex'+'ture'])==null||_0x508c98['destroy'](),(_0x3002ed=this['sh12to15Te'+'xture'])==null||_0x3002ed['destroy'](),(_0x5906b9=this['colorTextu'+'re2'])==null||_0x5906b9['destroy'](),(_0xe24fd2=this['transformA'+'Texture2'])==null||_0xe24fd2['destroy'](),(_0x5d0fe6=this['transformB'+'Texture2'])==null||_0x5d0fe6['destroy'](),(_0xfe83c=this['transformR'+'Texture2'])==null||_0xfe83c['destroy'](),(_0x5c09bc=this['transformM'+'otionTextu'+'re2'])==null||_0x5c09bc['destroy'](),(_0x24a2a1=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x24a2a1['destroy'](),(_0x24e522=this['sh1to3Text'+'ure2'])==null||_0x24e522['destroy'](),(_0x55f85f=this['sh4to7Text'+'ure2'])==null||_0x55f85f['destroy'](),(_0x1f2ffd=this['sh8to11Tex'+'ture2'])==null||_0x1f2ffd['destroy'](),(_0x40bae7=this['sh12to15Te'+'xture2'])==null||_0x40bae7['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x186eb7){var _0x52f447,_0x25a1b0,_0xa7fdcd,_0x26b925,_0x411370,_0x21ac47,_0x5c361d,_0xa48eac,_0x55fd4f,_0xba93f8,_0x403134,_0x5d2a37,_0x595958;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0xa920df=((_0x52f447=_0x186eb7['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(0x79*0x3a+0x1f*-0x139+0xa7d):_0x52f447['data'])??-0x14d2+0x97f+-0x1*-0xb53,_0x10109b=((_0x25a1b0=_0x186eb7['getParamet'+'er']('uSplatScal'+'e'))==null?void(0x19eb*-0x1+0xc42+0x1*0xda9):_0x25a1b0['data'])??-0x1*0x19fb+-0x11a9+-0x2ba5*-0x1,_0x504ef1=((_0xa7fdcd=_0x186eb7['getParamet'+'er']('uSaturatio'+'n'))==null?void(0xa*-0x3a7+-0x40*0x94+-0x1882*-0x3):_0xa7fdcd['data'])??0x1b*0x129+-0x1441+-0xb11,_0x2ac497=((_0x26b925=_0x186eb7['getParamet'+'er']('uHueOffset'))==null?void(0x4*-0x921+0xee4+-0x1*-0x15a0):_0x26b925['data'])??0x16f*-0x13+0x29*-0x1+-0x2a*-0xa7,_0x3b4e75=((_0x411370=_0x186eb7['getParamet'+'er']('uInvertOpa'+'city'))==null?void(-0x69*0x55+0x593*-0x2+0x2e03):_0x411370['data'])??-0x1bd0+0x175f+0x17b*0x3,_0x259b2d=((_0x21ac47=_0x186eb7['getParamet'+'er']('uOpacity'))==null?void(0x24ec+0x1af0+0xff7*-0x4):_0x21ac47['data'])??-0xc1f+-0x1*-0x66e+0x51*0x12,_0x3e98bf=((_0x5c361d=_0x186eb7['getParamet'+'er']('clrOffset'))==null?void(-0x1d07+-0x20f9+0x3e00):_0x5c361d['data'])??[0x205c+0x1428+-0x1*0x3484,-0xa67+0x26d6+-0x1c6f,0xd*-0x1e5+0x7b+0x1826,-0x515*-0x6+-0x2eb+-0x1*0x1b92],_0x323932=((_0xa48eac=_0x186eb7['getParamet'+'er']('clrScale'))==null?void(0x2064+-0x840+-0x1824):_0xa48eac['data'])??[-0xb2f*0x3+-0x1ae9+0x3c77,0x4*-0x3c7+0x1aec*0x1+-0xbcf*0x1,0xc96+-0x2*0xad9+0x91d*0x1,0x1*0xde2+0x1499+-0x1*0x227a],_0x250761=((_0x55fd4f=_0x186eb7['getParamet'+'er']('uShapeN'))==null?void(-0x2*-0x4bb+-0x3f1*0x6+-0x10*-0xe3):_0x55fd4f['data'])??-0x2*-0x11c5+0x225a+0x11c*-0x3f,_0x41f38b=((_0xba93f8=_0x186eb7['getParamet'+'er']('mode'))==null?void(-0x2509+-0x21cb+0x1*0x46d4):_0xba93f8['data'])??-0x1*-0xc0e+-0x19c2+-0x2*-0x6da,_0x219dcf=((_0x403134=_0x186eb7['getParamet'+'er']('ringSize'))==null?void(0x259*-0x4+-0x1f83+-0x11b*-0x25):_0x403134['data'])??-0x50b+-0xe8f*0x1+0x139a,_0x51bcfc=((_0x5d2a37=_0x186eb7['defines'])==null?void(0x1*-0x2444+0x1*0x1dfd+-0x1*-0x647):_0x5d2a37['get']('uOpenAnim'))??'0',_0x50ccb3=((_0x595958=_0x186eb7['defines'])==null?void(-0x5*-0x71c+-0x1710+-0xc7c):_0x595958['get']('uControlCo'+'lorMode'))??'0';_0x186eb7['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x186eb7['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x186eb7['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x186eb7['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x186eb7['setParamet'+'er']('uSplatScal'+'e',_0x10109b),_0x186eb7['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0xa920df),_0x186eb7['setParamet'+'er']('uSaturatio'+'n',_0x504ef1),_0x186eb7['setParamet'+'er']('uHueOffset',_0x2ac497),_0x186eb7['setParamet'+'er']('uInvertOpa'+'city',_0x3b4e75),_0x186eb7['setParamet'+'er']('uOpacity',_0x259b2d),_0x186eb7['setParamet'+'er']('clrOffset',_0x3e98bf),_0x186eb7['setParamet'+'er']('clrScale',_0x323932),_0x186eb7['setParamet'+'er']('uShapeN',_0x250761),_0x186eb7['setParamet'+'er']('mode',_0x41f38b),_0x186eb7['setParamet'+'er']('ringSize',_0x219dcf),_0x186eb7['setParamet'+'er']('prerenderC'+'Time',0x2e*0x3+-0x4*0xd+-0x1*0x56),_0x186eb7['setParamet'+'er']('renderSpac'+'e',-0x1*-0xb7f+0x145f+0x1c*-0x123),_0x186eb7['setParamet'+'er']('endSpace',-0xfd8+-0x5e*0x2+0x109e),_0x186eb7['setDefine']('uOpenAnim',_0x51bcfc),_0x186eb7['setDefine']('uControlCo'+'lorMode',_0x50ccb3),this['transformM'+'otionTextu'+'re']&&_0x186eb7['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x186eb7['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x186eb7['setDefine']('SH_BANDS',this['shBands']),_0x186eb7['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x186eb7['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x186eb7['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x186eb7['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x186eb7['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x1393b2){const _0x15fa71=Math['ceil'](Math['sqrt'](_0x1393b2)),_0x500a6c=Math['ceil'](_0x1393b2/_0x15fa71);return new J(_0x15fa71,_0x500a6c);}async['updateColo'+'rData'](_0x512adf){var _0x251f83;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x16e807=this['colorTextu'+'re2'];if(!_0x16e807||this['isDestroye'+'d'])return;let _0x352c1b=(_0x251f83=_0x512adf['transformD'+'ata'])==null?void(-0x58*0x53+0x1774+0x514):_0x251f83['dataColor'];if(!_0x352c1b){const _0x477ff4=_0x512adf['getProp']('color_opac'+'ity');_0x352c1b=new Uint16Array(_0x477ff4['buffer']['slice']());}await this['idleUpdate'+'TexturePro'+'mise'](_0x16e807,_0x352c1b);}async['getTransfo'+'rmDataByWo'+'rker'](_0xde57bd){var _0x1278de;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0x1278de=_0xde57bd['transformD'+'ata'])!=null&&_0x1278de['dataCenter'+'s'])return{'centers':_0xde57bd['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0xde57bd['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0xde57bd['transformD'+'ata']['dataScale'],'dataRotation':_0xde57bd['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0xde57bd['transformD'+'ata']['dataMotion'],'dataTime':_0xde57bd['transformD'+'ata']['dataTime'],'motion':_0xde57bd['transformD'+'ata']['motion'],'tScaleArray':_0xde57bd['transformD'+'ata']['tScaleArra'+'y']};const _0x12712d=_0xde57bd['getProp']('position'),_0x5e4ead=_0xde57bd['getProp']('motion'),_0x17a327=_0xde57bd['getProp']('rotation'),_0x3aa447=_0xde57bd['getProp']('scale'),_0x2de7c4=_0xde57bd['getProp']('t'),_0x14772b=_0xde57bd['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0xde57bd['numSplats'],this['is4D'],_0x12712d,_0x17a327,_0x5e4ead,_0x3aa447,_0x2de7c4,_0x14772b);}async['updateTran'+'sformFromD'+'ata'](_0x1da50e){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x1da50e['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x1da50e['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x1da50e['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x1da50e['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x1da50e['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x371468,_0x434e01){if(!this['isDestroye'+'d'])return new Promise(_0x2d7305=>{requestIdleCallback(()=>{const _0x443ce0=_0x371468['lock']();_0x443ce0==null||_0x443ce0['set'](_0x434e01),_0x371468['unlock'](),_0x2d7305(!(0xf1e+0x25d2+-0x34f0));},{'timeout':0x12c});});}async['updateSHDa'+'ta'](_0x49299c){var _0x429658,_0x14859d,_0x2b2ac0,_0x5a01cf,_0x1f0a73,_0x7757bd,_0x540853,_0x3e2188;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x5bb111=(_0x429658=this['sh1to3Text'+'ure2'])==null?void(-0x12e5+-0xd0d*-0x2+0x1*-0x735):_0x429658['lock'](),_0x1a184f=(_0x14859d=this['sh4to7Text'+'ure2'])==null?void(0x1a8d+-0x3f1*0x1+0xb4e*-0x2):_0x14859d['lock'](),_0x28d15d=(_0x2b2ac0=this['sh8to11Tex'+'ture2'])==null?void(0x18b8+-0x274+0x13*-0x12c):_0x2b2ac0['lock'](),_0x57fc91=(_0x5a01cf=this['sh12to15Te'+'xture2'])==null?void(0xc6c+0x66+-0x669*0x2):_0x5a01cf['lock'](),_0x2608a4={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0xbe7e2a=X_(_0x49299c,_0x2608a4*(0x5*0x431+-0xcf9*-0x2+-0x2ee4)),_0x128883=0x453*-0x9+0x10*-0x7+0x2f5a,_0x31ed32=-0x263e+-0x9*0x2df+0x1105*0x4,_0x4bfd73=new Float32Array(0x3e0+0xcd1+-0x2*0x858),_0x382377=new Uint32Array(_0x4bfd73['buffer']),_0x599283=new Array(_0x2608a4*(-0x162b+-0x10*0x66+0x1c8e))['fill'](-0x41*0x61+-0x7f*0x11+-0x422*-0x8);for(let _0x235468=0x777+0xa7f+-0x8fb*0x2;_0x235468<_0x49299c['numSplats'];++_0x235468){for(let _0x14accb=0x119*-0xc+-0x1f97+0x2cc3;_0x14accb<_0x2608a4;++_0x14accb)_0x599283[_0x14accb*(-0x1243+0xb51+-0x1*-0x6f5)]=_0xbe7e2a[_0x14accb][_0x235468],_0x599283[_0x14accb*(-0xf*0x1d3+-0x1*0x150d+-0x1*-0x306d)+(0x97*-0x2f+-0x1*-0x1504+-0x6b6*-0x1)]=_0xbe7e2a[_0x14accb+_0x2608a4][_0x235468],_0x599283[_0x14accb*(-0x781*-0x5+-0x2*-0x361+-0x1*0x2c44)+(0x20f0+0x1*0xb03+-0x7*0x647)]=_0xbe7e2a[_0x14accb+_0x2608a4*(-0x1*-0x12f7+-0xc59+0x12*-0x5e)][_0x235468];let _0x11d8a7=_0x599283[0x20d9+-0xd77+-0x1362];for(let _0x4d93dd=0x7b*-0x7+-0xea6+0x1204;_0x4d93dd<_0x2608a4*(-0x382*0x1+0x1151+-0x1*0xdcc);++_0x4d93dd)_0x11d8a7=Math['max'](_0x11d8a7,Math['abs'](_0x599283[_0x4d93dd]));if(_0x11d8a7!==0x180b+-0xd1+-0x173a){for(let _0x3d4459=0xc62+-0x78f+0x13*-0x41;_0x3d4459<_0x2608a4;++_0x3d4459)_0x599283[_0x3d4459*(0x5*-0x5ec+-0x61*-0x47+0x2*0x15c)+(-0x1d25+-0x23ab+-0x40d0*-0x1)]=Math['max'](-0x1b2*-0x1+0x1*-0x2167+0x1fb5*0x1,Math['min'](_0x128883,Math['floor']((_0x599283[_0x3d4459*(0x1*0x1af2+0xd*0x1e7+0x185*-0x22)+(-0x18*-0x77+0x1ba9*0x1+-0x26d1)]/_0x11d8a7*(-0xb8*-0x19+0xf20+-0xc*0x2c2+0.5)+(0x1*0x1307+0x1*0x236b+-0x3672+0.5))*_0x128883+(-0x1*0x11f9+-0xc1*0x14+0x210d+0.5)))),_0x599283[_0x3d4459*(0x9bf+0x3*-0x25f+-0x29f)+(0x83*-0x29+0x1c15*0x1+-0x719)]=Math['max'](-0x1724*-0x1+-0x2656+0xf32,Math['min'](_0x31ed32,Math['floor']((_0x599283[_0x3d4459*(-0x3a6*0x3+0x1*-0x108e+0x1b83)+(-0x1b*-0x144+-0x37e*-0x3+0x1*-0x2ca5)]/_0x11d8a7*(0x258d*0x1+-0x246*0xa+-0x1*0xed1+0.5)+(0x439+0x1762+-0xbf*0x25+0.5))*_0x31ed32+(-0x3b4*-0x8+-0x234c+-0x2c*-0x21+0.5)))),_0x599283[_0x3d4459*(0x3*-0x16f+0x9*-0xb+0x4b3)+(0x4a1+-0x1*-0x59+-0x4f8)]=Math['max'](0x664+-0x2*0x50e+0x8*0x77,Math['min'](_0x128883,Math['floor']((_0x599283[_0x3d4459*(-0xf37*0x1+0x9*0x67+0xb9b)+(0xeee+0x2185+-0x3071)]/_0x11d8a7*(0xd1*0x29+-0xc07+-0x1*0x1572+0.5)+(0xe2b+-0xad*0x25+0xad6+0.5))*_0x128883+(0xc64+0x1*-0x1d55+0x10f1+0.5))));_0x4bfd73[-0x124b+0xab*0x1+0x11a0]=_0x11d8a7,_0x5bb111[_0x235468*(-0x422+-0x630+0xa56)+(-0x67*0x61+-0x25f4+0x4cfb)]=_0x382377[-0x1*-0x2174+-0xd5b+-0x1419],_0x5bb111[_0x235468*(0xfb3*0x1+-0x12a9*0x1+0x2fa)+(0x3*-0xa37+0xb6c+0x133a)]=_0x599283[0x1*0x852+0x7c4+-0x1016]<<0xc2a+0x1*0x19c+-0xdb1|_0x599283[-0x1801+-0x2616+0x7c3*0x8]<<0x23*-0x53+-0xb45+0x16a9|_0x599283[-0x100*-0x14+-0x23*-0x83+0x25e7*-0x1],_0x5bb111[_0x235468*(-0x8e*-0x10+-0x197a+-0x1*-0x109e)+(-0xa06*0x1+0x3*-0x8f9+0x24f3)]=_0x599283[-0x3b*-0xc+-0x1106+0x1*0xe45]<<0xe73+0x7*-0x1a2+-0x2f0|_0x599283[-0x642+-0xa*0x1df+0x34*0x7b]<<0x26ce+-0xe*-0x101+0x1*-0x34d1|_0x599283[0x2*0xf33+-0x20b2+-0x251*-0x1],_0x5bb111[_0x235468*(-0x1e40+-0x3*0x508+0x2d5c)+(-0xdf1+0x154d*-0x1+-0x19*-0x169)]=_0x599283[-0x377+-0x367+0x126*0x6]<<0x16db+-0x2ca*-0x6+-0x2782|_0x599283[0x949+0x219*-0x12+0x30*0x98]<<0x1f95+-0xc*0x8b+-0x1*0x1906|_0x599283[0x1348+0x1649*-0x1+0x309],this['shBands']>0x2401+0x1*0x3cb+-0x27cb*0x1&&(_0x1a184f[_0x235468*(-0x17c3+0x10f*-0x9+0x4c2*0x7)+(0x61*-0x48+0x12fd+0x84b)]=_0x599283[-0x4*0x643+0x77e+0x1197]<<0x1884+0x1*0xc61+0x1f*-0x130|_0x599283[-0x19be+0x1912+-0xb6*-0x1]<<0x1f4*0x1+-0x2155+0x1f6c|_0x599283[-0x1042+-0x562+0x3d*0x5b],_0x1a184f[_0x235468*(0x70a+-0x1960+-0x105*-0x12)+(-0xd6*0x3+0x1*-0x47f+0x17*0x4e)]=_0x599283[0x2*0xf7e+-0x595*-0x1+0x1*-0x2485]<<0x117a+0x991+-0x1af6|_0x599283[-0x1*-0x2033+-0x181d*-0x1+-0x3843]<<0x311*0x4+-0x809*0x4+0x13eb*0x1|_0x599283[0x6c*0x53+-0x1540+-0x2be*0x5],_0x1a184f[_0x235468*(-0xd51+-0x61*0x3b+0x23b0)+(0x1989+0x1a7c+-0x3403)]=_0x599283[0x49b+0x2537+0x1*-0x29c3]<<0x1*-0xa1c+0x1864*0x1+-0xe33|_0x599283[0x1848*0x1+-0x1639+-0x1ff]<<-0x33f*0x3+-0x1871+0x2239|_0x599283[0x7*0x11f+0x11b7+-0x197f],_0x1a184f[_0x235468*(0x18d+0x4a3*0x3+-0xf72)+(0xf5*-0xb+-0x4f2+0xf7c)]=_0x599283[-0x1bf2+0x1*0x10ea+-0x1*-0xb1a]<<0x1eea+0x1*0x21eb+-0x40c0|_0x599283[-0x229c+-0x651+0x2900]<<0x24d6+-0x3b*0x1d+-0x1e1c|_0x599283[-0x1d*-0xa7+-0x313*-0xb+-0x1*0x34a8],this['shBands']>0x1f7*-0x11+-0x11*0xb1+0x5e*0x7b?(_0x28d15d[_0x235468*(-0x1096+-0x1*0xad3+0x1b6d)+(0xc2f*-0x2+0x1b27+0x1f*-0x17)]=_0x599283[0x47*-0x3b+0x23a+0x14*0xb6]<<0xb*0x2c9+-0x3*0x133+-0x1af5|_0x599283[-0xaaf+0x11*-0x20f+0x2dc4]<<0x3b7*0x1+0x1cf0+-0x209c|_0x599283[-0x7*0x83+0xa8a+0x125*-0x6],_0x28d15d[_0x235468*(0x200d+0x1fdb+0x2*-0x1ff2)+(-0x1c4e*0x1+0x5b*-0x4d+-0x1bd7*-0x2)]=_0x599283[0xaa*-0x16+-0x237d+0x1*0x3231]<<0x1*0x1223+-0x265b+-0x144d*-0x1|_0x599283[-0xbc8+0x1*0xa8b+0x1*0x156]<<-0x12ca+-0xf4f+0x2224|_0x599283[0x861+0x914+0x5c9*-0x3],_0x28d15d[_0x235468*(-0x42*-0x77+-0xd*0x28e+0x1*0x28c)+(-0x1d7d+0x81*-0x22+0x1*0x2ea1)]=_0x599283[-0x419*0x4+-0x39*0x3+0x112a]<<0x4*0x4c1+-0x5d4+-0xd1b|_0x599283[0xebb+-0x1e41+0xfa2]<<0x946*0x1+0x68*-0x56+0x19b5|_0x599283[-0xfe3+-0x1*-0x22d7+-0x12d7],_0x28d15d[_0x235468*(-0xe1*0x1+0x1025+0x3d*-0x40)+(-0x1945*-0x1+-0x940+-0x1002)]=_0x599283[-0x1*0x45d+0x507+-0x1c*0x5]<<-0xa7a+-0x1fc2+0x2a51*0x1|_0x599283[0x25d*-0x8+-0x6d*0x2a+0x24e9]<<0x3e7+0x1*0x349+-0x725|_0x599283[0x1463+-0x25c4+-0x1181*-0x1],_0x57fc91[_0x235468*(-0x4*0x173+-0x1*0x1985+0x1f55)+(-0x1*0x279+0x4c*0x57+0x175b*-0x1)]=_0x599283[0x16e*0x8+-0x14ff+0x9b0]<<-0x13f1+0x6e3+0xd23*0x1|_0x599283[-0x14a+0x1bac+-0x38*0x78]<<0x232*0xe+-0x102*0x26+-0x289*-0x3|_0x599283[-0x1f*0x7c+-0x1f53+-0x52a*-0x9],_0x57fc91[_0x235468*(-0x2575+0x1*-0x3a9+0x2922)+(-0x1e01+0xe7b+0x109*0xf)]=_0x599283[0x2665*0x1+-0x2*0x107b+-0x54b]<<-0x1f4d+0x12c9+0xc99|_0x599283[-0x33*-0xb3+0x377+-0x24b*0x11]<<0x1bac+0x10c8+-0x1*0x2c69|_0x599283[0x18ae+0x28*0xe6+0x306*-0x14],_0x57fc91[_0x235468*(-0xa*-0x28f+-0x1b56+-0x1c4*-0x1)+(0x211f+0x1ff*0xd+0x87*-0x70)]=_0x599283[-0x1eef+0x661*0x1+0x18b5]<<0x1a7e+-0x1126+-0x943|_0x599283[-0x140a+-0x1d*-0xb3+-0x1*0x15]<<0x1*0x2499+-0x25a9+0x11b|_0x599283[0x229*0xa+0x1*-0x1387+-0xe*0x23],_0x57fc91[_0x235468*(0x18a5+0x883*0x3+-0x322a)+(0x2286*0x1+-0xd2b*-0x1+0x2*-0x17d7)]=_0x599283[0x238c+-0x2340+0x2*-0x11]<<-0x10f*0x1b+0x1*0x79d+0x150d|_0x599283[0x2237+-0xbe2+-0x162a*0x1]<<-0x2172*0x1+0xbdb+0x15a2|_0x599283[-0x22cd+0xf4e*0x2+0x45d]):_0x28d15d[_0x235468]=_0x599283[0x31*-0x23+-0xdbd*0x1+0x3*0x6d7]<<-0x5a9+-0xd8b*-0x1+-0x7cd|_0x599283[0x1d75*-0x1+0x1*0x22a2+-0x517]<<0x267d+0x1a3+-0x2815|_0x599283[0x23cf+-0x162+0x5b9*-0x6]);}}(_0x1f0a73=this['sh1to3Text'+'ure2'])==null||_0x1f0a73['unlock'](),(_0x7757bd=this['sh4to7Text'+'ure2'])==null||_0x7757bd['unlock'](),(_0x540853=this['sh8to11Tex'+'ture2'])==null||_0x540853['unlock'](),(_0x3e2188=this['sh12to15Te'+'xture2'])==null||_0x3e2188['unlock']();}async['updateSHDa'+'taByWorker'](_0x10c562){var _0x1f8d54,_0x22c7bc,_0x594865,_0xe2481f,_0x5653e6;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x1d38a0={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x4076d0,_0x512430,_0x47a60f,_0x30c463;if((_0x1f8d54=_0x10c562['transformD'+'ata'])!=null&&_0x1f8d54['sh1to3Data'])_0x4076d0=(_0x22c7bc=_0x10c562['transformD'+'ata'])==null?void(0x2227+-0x1935+-0x5*0x1ca):_0x22c7bc['sh1to3Data'],_0x512430=(_0x594865=_0x10c562['transformD'+'ata'])==null?void(-0x9c6*0x3+-0x5f4+0x46*0x81):_0x594865['sh4to7Data'],_0x47a60f=(_0xe2481f=_0x10c562['transformD'+'ata'])==null?void(-0xa6*-0x2+0xf87+-0x10d3*0x1):_0xe2481f['sh8to11Dat'+'a'],_0x30c463=(_0x5653e6=_0x10c562['transformD'+'ata'])==null?void(0x26ce*0x1+0x45*0x1+-0x2713):_0x5653e6['sh12to15Da'+'ta'];else{const _0x483160=X_(_0x10c562,_0x1d38a0*(-0xe9d+0x1673+0x7d3*-0x1)),_0x322543=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x10c562['numSplats'],this['shBands'],_0x483160);_0x4076d0=_0x322543['sh1to3Data'],_0x512430=_0x322543['sh4to7Data'],_0x47a60f=_0x322543['sh8to11Dat'+'a'],_0x30c463=_0x322543['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x4076d0),this['shBands']>-0x231b+0x268d+-0x371&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x512430),this['shBands']>0x2*-0x997+-0x219e+0x5de*0x9?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x47a60f),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x30c463)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x47a60f));}}const XA='FILL_WINDO'+'W',q_='KEEP_ASPEC'+'T',j_='AUTO',qA='FIXED';let Qy;function Ys(){return Qy;}function Wf(_0x373fb1){Qy=_0x373fb1;}class jA{constructor(){h(this,'renderPass'+'es',[]),h(this,'renderTarg'+'etMap',new Map());}['addRenderP'+'ass'](_0x410262){w['assert'](_0x410262),_0x410262['frameUpdat'+'e']();const _0x4936ca=_0x410262['beforePass'+'es'];for(let _0x1dd94a=-0x140e+0x21b3+0x1f3*-0x7;_0x1dd94a<_0x4936ca['length'];_0x1dd94a++){const _0x5204b8=_0x4936ca[_0x1dd94a];_0x5204b8['enabled']&&this['addRenderP'+'ass'](_0x5204b8);}_0x410262['enabled']&&this['renderPass'+'es']['push'](_0x410262);const _0x3aeaa5=_0x410262['afterPasse'+'s'];for(let _0x3468f4=0x215f+0x29*-0xd6+0xe7;_0x3468f4<_0x3aeaa5['length'];_0x3468f4++){const _0x445896=_0x3aeaa5[_0x3468f4];_0x445896['enabled']&&this['addRenderP'+'ass'](_0x445896);}}['reset'](){this['renderPass'+'es']['length']=-0x15*0x76+0x1*-0x200f+0x29bd;}['compile'](){const _0x1eeb85=this['renderTarg'+'etMap'],_0x242563=this['renderPass'+'es'];for(let _0x4dd42e=-0x223d+-0x1*-0x1539+0xd04;_0x4dd42e<_0x242563['length'];_0x4dd42e++){const _0x2486e4=_0x242563[_0x4dd42e],_0x433be2=_0x2486e4['renderTarg'+'et'];if(_0x433be2!==void(0xa57*-0x1+0x16*-0x35+0xee5)){const _0x118804=_0x1eeb85['get'](_0x433be2);if(_0x118804){const _0x39c2a0=_0x2486e4['colorArray'+'Ops']['length'];for(let _0xb9ceef=-0x7b3+0x5*0x3f1+-0xc02;_0xb9ceef<_0x39c2a0;_0xb9ceef++)_0x2486e4['colorArray'+'Ops'][_0xb9ceef]['clear']||(_0x118804['colorArray'+'Ops'][_0xb9ceef]['store']=!(-0x3*-0x335+0x17a3+-0x2142));_0x2486e4['depthStenc'+'ilOps']['clearDepth']||(_0x118804['depthStenc'+'ilOps']['storeDepth']=!(0xa*0x78+-0x6ba*-0x5+-0x2652)),_0x2486e4['depthStenc'+'ilOps']['clearStenc'+'il']||(_0x118804['depthStenc'+'ilOps']['storeStenc'+'il']=!(0xf8*0x1f+0x2367+-0x416f));}_0x1eeb85['set'](_0x433be2,_0x2486e4);}}for(let _0x2d23e3=-0x17a6+0x2*0x111d+-0xa94;_0x2d23e3<_0x242563['length']-(-0xb3e+0x2559+-0x1a1a);_0x2d23e3++){const _0xebc2af=_0x242563[_0x2d23e3],_0x12d29b=_0xebc2af['renderTarg'+'et'],_0x34a056=_0x242563[_0x2d23e3+(0x19ae+0x35b*0x7+-0x312a)],_0x2dba87=_0x34a056['renderTarg'+'et'];_0x12d29b!==_0x2dba87||_0x12d29b===void(-0x626*-0x1+0x1f97+-0x25bd)||_0x34a056['depthStenc'+'ilOps']['clearDepth']||_0x34a056['depthStenc'+'ilOps']['clearStenc'+'il']||_0x34a056['colorArray'+'Ops']['some'](_0x436c5a=>_0x436c5a['clear'])||_0xebc2af['afterPasse'+'s']['length']>-0x1*-0x349+0x22*0x125+-0x2a33*0x1||_0x34a056['beforePass'+'es']['length']>-0x43*0x65+-0x1c4f+0x36be||(_0xebc2af['_skipEnd']=!(-0x10*0x200+0xbdd+0x1423),_0x34a056['_skipStart']=!(-0x1*-0x17c2+0x1*0x1c3d+-0x33ff));}let _0x2b11e6=null,_0x20bbb5=null;for(let _0x1fedb8=0x6*0x35e+0x140*-0x18+-0x2c*-0x39;_0x1fedb8<_0x242563['length'];_0x1fedb8++){const _0x6f2eac=_0x242563[_0x1fedb8],_0x25862c=_0x6f2eac['renderTarg'+'et'],_0x13c73c=_0x25862c==null?void(0x115*-0x14+-0x1c00+0x31a4):_0x25862c['colorBuffe'+'r'];if(_0x13c73c!=null&&_0x13c73c['cubemap']){if(_0x2b11e6===_0x13c73c){const _0x2b7900=_0x20bbb5['colorArray'+'Ops']['length'];for(let _0x4f2209=-0x22b6*0x1+-0x1cc+0x2482;_0x4f2209<_0x2b7900;_0x4f2209++)_0x20bbb5['colorArray'+'Ops'][_0x4f2209]['mipmaps']=!(0x5e8+0xc7*-0x18+0xcc1);}_0x2b11e6=_0x25862c['colorBuffe'+'r'],_0x20bbb5=_0x6f2eac;}else _0x6f2eac['requiresCu'+'bemaps']&&(_0x2b11e6=null,_0x20bbb5=null);}_0x1eeb85['clear']();}['render'](_0x388a80){this['compile']();const _0x58825f=this['renderPass'+'es'];for(let _0x1099cb=-0x18fe*0x1+0x1998+-0x9a;_0x1099cb<_0x58825f['length'];_0x1099cb++)_0x58825f[_0x1099cb]['render']();}}class YA{constructor(_0x42dfbd,_0x2b538e){this['texture0']=_0x42dfbd,this['texture1']=_0x2b538e;}['destroy'](){var _0x4b6895,_0x5240bb;(_0x4b6895=this['texture0'])==null||_0x4b6895['destroy'](),(_0x5240bb=this['texture1'])==null||_0x5240bb['destroy']();}}const Y_=new Kt();class Qr{static['createText'+'ure'](_0x47065e,_0x48cc73,_0x7c3fe0,_0x21325a=''){return new _e(_0x47065e,{'name':'AreaLightL'+'UT'+_0x21325a,'width':_0x7c3fe0,'height':_0x7c3fe0,'format':_0x48cc73,'addressU':ue,'addressV':ue,'type':Ms,'magFilter':vt,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(0x1ee0+-0xd*0x53+-0x1aa8)});}static['applyTextu'+'res'](_0x13b020,_0x3a75d7,_0x254ce1){Y_['remove'](_0x13b020),Y_['get'](_0x13b020,()=>new YA(_0x3a75d7,_0x3a75d7===_0x254ce1?null:_0x254ce1)),_0x13b020['scope']['resolve']('areaLights'+'LutTex1')['setValue'](_0x3a75d7),_0x13b020['scope']['resolve']('areaLights'+'LutTex2')['setValue'](_0x254ce1);}static['createPlac'+'eholder'](_0x41a6ac){const _0x3331d5=Qr['createText'+'ure'](_0x41a6ac,nt,-0x86b*0x3+0x2246*0x1+-0x903,'placeholde'+'r');_0x3331d5['lock']()['fill'](-0x189b*-0x1+-0x2656+0xdbb),_0x3331d5['unlock'](),Qr['applyTextu'+'res'](_0x41a6ac,_0x3331d5,_0x3331d5);}static['set'](_0x129402,_0x4cb29e,_0xa4d8fa){function _0x35bfb3(_0x49fb67,_0x3ff6ff,_0x5f12c2){const _0x947495=Qr['createText'+'ure'](_0x49fb67,_0x5f12c2,-0x224+-0x761+0x9c5);return _0x947495['lock']()['set'](_0x3ff6ff),_0x947495['unlock'](),_0x947495;}function _0x5b124f(_0x1fce06){const _0x13f99f=_0x1fce06['length'],_0x285ec9=new Uint16Array(_0x13f99f),_0x5e9c2d=Tn['float2Half'];for(let _0x346918=0x1a*0x11b+0x59f*0x5+0x12f3*-0x3;_0x346918<_0x13f99f;_0x346918++)_0x285ec9[_0x346918]=_0x5e9c2d(_0x1fce06[_0x346918]);return _0x285ec9;}const _0x48eb9c=_0x4cb29e,_0x3b49d1=_0xa4d8fa,_0xb3a238=_0x5b124f(_0x48eb9c),_0x40ea1d=_0x5b124f(_0x3b49d1),_0x27e6a8=_0x35bfb3(_0x129402,_0xb3a238,nt),_0xdeec33=_0x35bfb3(_0x129402,_0x40ea1d,nt);Qr['applyTextu'+'res'](_0x129402,_0x27e6a8,_0xdeec33);}}const nh='en-US',oh={'en':'en-US','es':'en-ES','zh':'zh-CN','zh-HK':'zh-TW','zh-TW':'zh-HK','zh-MO':'zh-HK','fr':'fr-FR','de':'de-DE','it':'it-IT','ru':'ru-RU','ja':'ja-JP'},$p={};function Ar(_0x320f0c,_0x13788b){for(let _0x3b5aba=0xd1a+0x166a+0x1*-0x2384,_0x5e6e79=_0x320f0c['length'];_0x3b5aba<_0x5e6e79;_0x3b5aba++)$p[_0x320f0c[_0x3b5aba]]=_0x13788b;}function Ri(_0x321aa3){const _0x280927=_0x321aa3['indexOf']('-');return _0x280927!==-(-0x496+0xd*-0x49+0x84c)?_0x321aa3['substring'](-0x821+-0x1*0x5c4+0x1*0xde5,_0x280927):_0x321aa3;}function KA(_0x3d4496,_0x55d9b1){const _0x3cc99c=_0x3d4496['indexOf']('-');return _0x3cc99c!==-(0x981*0x1+0x10*0x2c+-0xc40)?_0x55d9b1+_0x3d4496['substring'](_0x3cc99c):_0x55d9b1;}function Jy(_0x45b577,_0x5399a0){if(_0x5399a0[_0x45b577])return _0x45b577;let _0x29c66c=oh[_0x45b577];if(_0x29c66c&&_0x5399a0[_0x29c66c])return _0x29c66c;const _0x369bdf=Ri(_0x45b577);return _0x29c66c=oh[_0x369bdf],_0x5399a0[_0x29c66c]?_0x29c66c:_0x5399a0[_0x369bdf]?_0x369bdf:nh;}Ar(['ja','ko','th','vi','zh','id'],_0x150c1d=>0x1*-0x577+-0x14b7+0x1a2e),Ar(['fa','hi'],_0x2a77e3=>_0x2a77e3>=0x1633+-0x1*-0x6bf+-0x9a6*0x3&&_0x2a77e3<=0x1c56+0x1*0x33a+0xa85*-0x3?-0x35*0xd+0x1*-0x3a9+0x65a*0x1:0x1dd0+-0x3f*0x61+0x4c*-0x14),Ar(['fr','pt'],_0x65c3f6=>_0x65c3f6>=0x1*0x167a+0x1627+-0x1c9*0x19&&_0x65c3f6<-0x1d99+-0x2250+-0x1*-0x3feb?-0x25e9+-0x18b+0x2774:0x2621+0x959*0x1+0x1*-0x2f79),Ar(['da'],_0x18c843=>_0x18c843===-0x5*0x7c9+-0x2f7*0x1+0x339*0xd||!Number['isInteger'](_0x18c843)&&_0x18c843>=-0x6b*0x55+-0xe88+0x320f&&_0x18c843<=0x1*0x1dd7+0x238d+-0x4163?-0x8de+0x4bd*-0x6+0x3e*0x9a:-0x1*0x19f+0x1e4f+-0x1caf),Ar(['de','en','it','el','es','tr','fi','sv','nb','no','ur'],_0x3a997e=>_0x3a997e===0xe75+0xecb+-0x1d3f?-0x2275*0x1+0x1*-0xbf3+0x948*0x5:-0x1b73*-0x1+0x5*-0x25d+0xfa1*-0x1),Ar(['ru','uk'],_0xe87607=>{if(Number['isInteger'](_0xe87607)){const _0x118af4=_0xe87607%(-0x2c0*0xb+-0xf4*0x5+-0x7*-0x502),_0xe3b24c=_0xe87607%(-0x2059+-0x8e7+0x29a4);if(_0x118af4===0x1148+-0x4e3+-0x1a*0x7a&&_0xe3b24c!==-0x637*0x2+0xb5*-0x35+0x31f2)return-0x12df+0x3ed*-0x1+0x4*0x5b3;if(_0x118af4>=0x3e5+-0xc2*-0xd+0x1*-0xdbd&&_0x118af4<=-0x22f*0xd+0xd39+0xf2e*0x1&&(_0xe3b24c<-0x157c+0x2157+-0xbcf*0x1||_0xe3b24c>-0x1360+-0x2*0x23c+0xbf3*0x2))return-0x1*0x2655+-0x14e4*-0x1+0x1172;if(_0x118af4===-0x6b4+0x1*-0x935+0xfe9||_0x118af4>=-0x1c45+0x26*0x65+0xd4c&&_0x118af4<=0x2592+-0x1309+-0x1280||_0xe3b24c>=0x1efb+-0x6b2+-0x1d*0xd6&&_0xe3b24c<=-0x2*-0xaba+-0xe3*0xc+-0xac2)return 0x1c4*-0x14+0x34b*-0x7+-0x36f*-0x11;}return 0x1*0x1ebb+-0x157b+-0x93d;}),Ar(['pl'],_0x181001=>{if(Number['isInteger'](_0x181001)){if(_0x181001===0xcbb+0x2641+-0x32fb)return 0x21ce+-0x390+0x7*-0x452;const _0x4c8f9f=_0x181001%(0x1a82+0x1345+-0x2dbd),_0x36c5b6=_0x181001%(0x295*0x2+-0x72a+0x1*0x264);if(_0x4c8f9f>=-0x6e2*-0x2+0x14bf+-0x2281&&_0x4c8f9f<=0x493*0x2+0x1d9+0xafb*-0x1&&(_0x36c5b6<-0x9c1+-0x161e+-0x1*-0x1feb||_0x36c5b6>-0x73b*0x2+0xe7b*-0x2+0x5*0x8b2))return-0x1077+0x2*-0x8ad+0x1*0x21d2;if(_0x4c8f9f>=0xa3b*-0x3+-0x1a16+0x11d*0x33&&_0x4c8f9f<=-0x1*0x2566+0x1083+-0xbf*-0x1c||_0x4c8f9f>=0x1f4f+0x1380+-0x32ca&&_0x4c8f9f<=0x13*0x11+0x459+0x1*-0x593||_0x36c5b6>=-0x52a*-0x2+0xadc+-0x1524&&_0x36c5b6<=0x190+-0x10f7*0x1+0x1*0xf75)return-0xba1+-0x1537+0x20da;}return-0x2449+-0x20cb+0x4517;}),Ar(['ar'],_0x2e23a7=>{if(_0x2e23a7===-0x2020+-0xce0+-0xa*-0x480)return 0x1d9*-0x5+0x54*-0x71+-0x1*-0x2e51;if(_0x2e23a7===0x1bba+0x130f+-0x1764*0x2)return-0x1076*0x1+0x2db+-0x86*-0x1a;if(_0x2e23a7===0xe60+0x7cc+-0x162a*0x1)return-0x2220+0xa2c+0x1*0x17f6;if(Number['isInteger'](_0x2e23a7)){const _0x990af7=_0x2e23a7%(0x1*-0x21f5+-0x1*-0x2675+-0x20e*0x2);if(_0x990af7>=0x14ed+-0x13*0x57+-0xe75&&_0x990af7<=-0x13d*-0x1e+-0x1*0x129b+-0x1281*0x1)return-0x84b+-0xd96+0x3*0x74c;if(_0x990af7>=-0x102*0x8+-0x55c*-0x2+-0x29d&&_0x990af7<=-0x16ba+0xc2e+-0x1*-0xaef)return 0x24f*-0x2+-0x1b4d+0x1fef;}return-0xcd5+0x1e75+-0x119b;});const ZA=$p[Ri(nh)];function Jd(_0x41e6a3){return $p[_0x41e6a3]||ZA;}const Vn=new RegExp('^\x5cs*(?:(?:'+'[a-z]+[a-z'+'0-9\x5c-+.]*:'+')?//|data:'+'|blob:)','i');class QA{constructor(_0x52a000='',_0x46c44e='',_0x193f00=null,_0x2397ad=null,_0x17f907=null,_0x188e24=null){this['url']=_0x52a000,this['filename']=_0x46c44e,this['hash']=_0x193f00,this['size']=_0x2397ad,this['opt']=_0x17f907,this['contents']=_0x188e24;}['equals'](_0x3a1438){return this['url']===_0x3a1438['url']&&this['filename']===_0x3a1438['filename']&&this['hash']===_0x3a1438['hash']&&this['size']===_0x3a1438['size']&&this['opt']===_0x3a1438['opt']&&this['contents']===_0x3a1438['contents'];}}let JA=-(0x9*0x2f2+0x40*0x56+0x1*-0x3001);const eC={'pvr':'extCompres'+'sedTexture'+'PVRTC','dxt':'extCompres'+'sedTexture'+'S3TC','etc2':'extCompres'+'sedTexture'+'ETC','etc1':'extCompres'+'sedTexture'+'ETC1','basis':'canvas'},K_=['pvr','dxt','etc2','etc1','basis'];class pe extends me{constructor(_0x419f29,_0x29b79d,_0x5707cf,_0x2d8302={},_0x171413={}){super(),h(this,'_file',null),h(this,'_i18n',{}),h(this,'_preload',!(0x171f+-0xc60+-0xfa*0xb)),h(this,'_resources',[]),h(this,'id',JA--),h(this,'loaded',!(0x1a6e*0x1+0x2e*-0x67+0x1*-0x7eb)),h(this,'loading',!(-0x1d*0xc5+0x95*0x42+-0x1018)),h(this,'options',{}),h(this,'registry',null),h(this,'tags',new To(this)),h(this,'type'),h(this,'urlObject',null),(this['_name']=_0x419f29||'',this['type']=_0x29b79d,this['_data']=_0x2d8302||{},this['options']=_0x171413||{},_0x5707cf&&(this['file']=_0x5707cf));}set['name'](_0x3d7774){if(this['_name']===_0x3d7774)return;const _0x272d13=this['_name'];this['_name']=_0x3d7774,this['fire']('name',this,this['_name'],_0x272d13);}get['name'](){return this['_name'];}set['file'](_0x442a32){var _0x284f79,_0xb27814;if(_0x442a32&&_0x442a32['variants']&&['texture','textureatl'+'as','bundle']['indexOf'](this['type'])!==-(0xcd2+-0x10de+-0x3d*-0x11)){const _0x153f5e=((_0xb27814=(_0x284f79=this['registry'])==null?void(0x1e28+0xfcb+-0x3*0xf51):_0x284f79['_loader'])==null?void(0x1be*0x14+-0x1994+-0x944):_0xb27814['_app'])||Ys(),_0x45e4e8=_0x153f5e==null?void(-0x1f*-0x44+-0x33*-0xb+-0xa6d):_0x153f5e['graphicsDe'+'vice'];if(_0x45e4e8)for(let _0x160bb2=0x1cd3+-0x2381+0x6ae,_0x2a09b2=K_['length'];_0x160bb2<_0x2a09b2;_0x160bb2++){const _0x1a668a=K_[_0x160bb2];if(_0x442a32['variants'][_0x1a668a]&&_0x45e4e8[eC[_0x1a668a]]){_0x442a32=_0x442a32['variants'][_0x1a668a];break;}if(_0x153f5e['enableBund'+'les']){const _0x4ae7a4=_0x153f5e['bundles']['listBundle'+'sForAsset'](this);if(_0x4ae7a4&&_0x4ae7a4['find'](_0x169a80=>{var _0xeea21f;return(_0xeea21f=_0x169a80==null?void(-0xc*-0x92+0x132+0x15*-0x62):_0x169a80['file'])==null?void(-0x17d4+-0x1b5b+0x1*0x332f):_0xeea21f['variants'][_0x1a668a];}))break;}}}const _0x12b6e8=this['_file'],_0x477021=_0x442a32?new QA(_0x442a32['url'],_0x442a32['filename'],_0x442a32['hash'],_0x442a32['size'],_0x442a32['opt'],_0x442a32['contents']):null;(!!_0x477021!=!!_0x12b6e8||_0x477021&&!_0x477021['equals'](_0x12b6e8))&&(this['_file']=_0x477021,this['fire']('change',this,'file',_0x477021,_0x12b6e8),this['reload']());}get['file'](){return this['_file'];}set['data'](_0x515201){const _0xa28327=this['_data'];this['_data']=_0x515201,_0x515201!==_0xa28327&&(this['fire']('change',this,'data',_0x515201,_0xa28327),this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['data'](){return this['_data'];}set['resource'](_0x54fbdb){const _0x1dee16=this['_resources'][-0xa9f+-0xd1c+0x4b*0x51];this['_resources'][-0x1*0x1a2f+-0x15a0+0x2fcf]=_0x54fbdb,this['fire']('change',this,'resource',_0x54fbdb,_0x1dee16);}get['resource'](){return this['_resources'][-0x9e7*0x1+-0x2287*0x1+0x2c6e];}set['resources'](_0x3669d2){const _0x6bd2a6=this['_resources'];this['_resources']=_0x3669d2,this['fire']('change',this,'resources',_0x3669d2,_0x6bd2a6);}get['resources'](){return this['_resources'];}set['preload'](_0x4e424d){_0x4e424d=!!_0x4e424d,this['_preload']!==_0x4e424d&&(this['_preload']=_0x4e424d,this['_preload']&&!this['loaded']&&!this['loading']&&this['registry']&&this['registry']['load'](this));}get['preload'](){return this['_preload'];}set['loadFaces'](_0x23f5a4){_0x23f5a4=!!_0x23f5a4,(!this['hasOwnProp'+'erty']('_loadFaces')||_0x23f5a4!==this['_loadFaces'])&&(this['_loadFaces']=_0x23f5a4,this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['loadFaces'](){return this['_loadFaces'];}['getFileUrl'](){const _0x2f30cf=this['file'];if(!_0x2f30cf||!_0x2f30cf['url'])return null;let _0x23a803=_0x2f30cf['url'];if(this['registry']&&this['registry']['prefix']&&!Vn['test'](_0x23a803)&&(_0x23a803=this['registry']['prefix']+_0x23a803),this['type']!=='script'&&_0x2f30cf['hash']){const _0xd53e63=_0x23a803['indexOf']('?')!==-(-0x1598+0x2f2*0x7+0xfb)?'&':'?';_0x23a803+=_0xd53e63+'t='+_0x2f30cf['hash'];}return _0x23a803;}['getAbsolut'+'eUrl'](_0x44d954){if(_0x44d954['startsWith']('blob:')||_0x44d954['startsWith']('data:'))return _0x44d954;const _0x59f0d4=xe['getDirecto'+'ry'](this['file']['url']);return xe['join'](_0x59f0d4,_0x44d954);}['getLocaliz'+'edAssetId'](_0x1e7d31){return _0x1e7d31=Jy(_0x1e7d31,this['_i18n']),this['_i18n'][_0x1e7d31]||null;}['addLocaliz'+'edAssetId'](_0x266e30,_0x49055e){this['_i18n'][_0x266e30]=_0x49055e,this['fire']('add:locali'+'zed',_0x266e30,_0x49055e);}['removeLoca'+'lizedAsset'+'Id'](_0x474120){const _0x3b1f43=this['_i18n'][_0x474120];_0x3b1f43&&(delete this['_i18n'][_0x474120],this['fire']('remove:loc'+'alized',_0x474120,_0x3b1f43));}['ready'](_0x183f78,_0x3d20f5){_0x3d20f5=_0x3d20f5||this,this['loaded']?_0x183f78['call'](_0x3d20f5,this):this['once']('load',_0x2b19f6=>{_0x183f78['call'](_0x3d20f5,_0x2b19f6);});}['reload'](){this['loaded']&&(this['loaded']=!(-0x182*-0xd+-0xa31*-0x1+-0x1dca),this['registry']['load'](this));}['unload'](){if(!this['loaded']&&this['_resources']['length']===-0x209e+0x19d4+0x6ca)return;this['fire']('unload',this),this['registry']['fire']('unload:'+this['id'],this);const _0x11d3b7=this['_resources'];this['urlObject']&&(URL['revokeObje'+'ctURL'](this['urlObject']),this['urlObject']=null),this['resources']=[],this['loaded']=!(0x123d+0x72c*0x4+0x3*-0xfa4),this['file']&&this['registry']['_loader']['clearCache'](this['getFileUrl'](),this['type']);for(let _0x43bd81=-0x17da+-0x1287+0x2a61;_0x43bd81<_0x11d3b7['length'];++_0x43bd81){const _0x12a8d3=_0x11d3b7[_0x43bd81];_0x12a8d3&&_0x12a8d3['destroy']&&_0x12a8d3['destroy']();}}static['fetchArray'+'Buffer'](_0x419f92,_0x3743df,_0x4ca362,_0x37fe20=-0xe6e+0x202c+-0x11be){var _0x3c3024;(_0x3c3024=_0x4ca362==null?void(0xd*0x1fd+0xd4b*0x1+-0x2724):_0x4ca362['file'])!=null&&_0x3c3024['contents']?setTimeout(()=>{_0x3743df(null,_0x4ca362['file']['contents']);}):ot['get'](_0x419f92,{'cache':!(-0x2*0xca4+-0x1*-0x1367+0x5e1),'responseType':'arraybuffe'+'r','retry':_0x37fe20>0x42*-0x20+0x1688+-0xe48,'maxRetries':_0x37fe20},_0x3743df);}}h(pe,'EVENT_LOAD','load'),h(pe,'EVENT_UNLO'+'AD','unload'),h(pe,'EVENT_REMO'+'VE','remove'),h(pe,'EVENT_ERRO'+'R','error'),h(pe,'EVENT_CHAN'+'GE','change'),h(pe,'EVENT_PROG'+'RESS','progress'),h(pe,'EVENT_ADDL'+'OCALIZED','add:locali'+'zed'),h(pe,'EVENT_REMO'+'VELOCALIZE'+'D','remove:loc'+'alized');class tC{constructor(_0x3d439e=null){h(this,'_index',{}),h(this,'_key'),this['_key']=_0x3d439e;}['addItem'](_0xab8f42){const _0x24aaea=_0xab8f42['tags']['_list'];for(const _0x4a399a of _0x24aaea)this['add'](_0x4a399a,_0xab8f42);}['removeItem'](_0x1a1fc6){const _0x1d0e53=_0x1a1fc6['tags']['_list'];for(const _0x4a7b45 of _0x1d0e53)this['remove'](_0x4a7b45,_0x1a1fc6);}['add'](_0x12ede8,_0x4839b6){this['_index'][_0x12ede8]&&this['_index'][_0x12ede8]['list']['indexOf'](_0x4839b6)!==-(-0x8*0x8f+0x1215+-0xd9c)||(this['_index'][_0x12ede8]||(this['_index'][_0x12ede8]={'list':[]},this['_key']&&(this['_index'][_0x12ede8]['keys']={})),this['_index'][_0x12ede8]['list']['push'](_0x4839b6),this['_key']&&(this['_index'][_0x12ede8]['keys'][_0x4839b6[this['_key']]]=_0x4839b6));}['remove'](_0x32707b,_0x5c91c4){if(!this['_index'][_0x32707b]||this['_key']&&!this['_index'][_0x32707b]['keys'][_0x5c91c4[this['_key']]])return;const _0x180a2b=this['_index'][_0x32707b]['list']['indexOf'](_0x5c91c4);_0x180a2b!==-(0x2*-0x2ea+-0x5e8+0xbbd)&&(this['_index'][_0x32707b]['list']['splice'](_0x180a2b,-0x1ce5+0x6e2+0xb02*0x2),this['_key']&&delete this['_index'][_0x32707b]['keys'][_0x5c91c4[this['_key']]],this['_index'][_0x32707b]['list']['length']===0x1e9*-0xf+0x2*-0xced+0x3681&&delete this['_index'][_0x32707b]);}['find'](_0x3ab92a){const _0x32019c={},_0x1f4292=[];let _0x1cef4d,_0x714b71,_0x2e4d07,_0x27da4b,_0x8c3690;const _0x3bb774=(_0x1b51ce,_0x26c1e4)=>this['_index'][_0x1b51ce]['list']['length']-this['_index'][_0x26c1e4]['list']['length'];for(let _0x232bdd=0x106d+0x1*-0x26a4+0xb*0x205;_0x232bdd<_0x3ab92a['length'];_0x232bdd++){if(_0x714b71=_0x3ab92a[_0x232bdd],_0x714b71 instanceof Array){if(_0x714b71['length']===0xbe7+-0x164*-0x1a+-0x300f)continue;if(_0x714b71['length']===0x2322+0x1f9d+-0x42be)_0x714b71=_0x714b71[0x6*-0x266+-0x31b+0x117f];else{_0x8c3690=!(-0x9b*0x17+0x1f78+0xa*-0x1c1);for(let _0x3dbb71=-0x11*0xf+-0x8cf+0x9ce;_0x3dbb71<_0x714b71['length'];_0x3dbb71++)if(!this['_index'][_0x714b71[_0x3dbb71]]){_0x8c3690=!(-0x1*-0xb79+0x753+-0x644*0x3);break;}if(_0x8c3690)continue;_0x2e4d07=_0x714b71['slice'](-0x686*-0x2+0x9*0x15+-0xdc9*0x1)['sort'](_0x3bb774),_0x27da4b=_0x2e4d07['slice'](-0x170d+-0x1bbc+-0x1*-0x32ca),_0x27da4b['length']===-0x863*-0x1+-0x2ea+0x15e*-0x4&&(_0x27da4b=_0x27da4b[0x1*-0x1df1+0x601+0x17f0]);for(let _0x3e8814=0x529*-0x1+0x1e58*0x1+0x865*-0x3;_0x3e8814<this['_index'][_0x2e4d07[0x1c4b+-0x957+-0x12f4]]['list']['length'];_0x3e8814++)_0x1cef4d=this['_index'][_0x2e4d07[-0x1c48+0x967*0x1+0x1*0x12e1]]['list'][_0x3e8814],(this['_key']?!_0x32019c[_0x1cef4d[this['_key']]]:_0x1f4292['indexOf'](_0x1cef4d)===-(0x21*0x5d+0x638+-0x1234))&&_0x1cef4d['tags']['has'](_0x27da4b)&&(this['_key']&&(_0x32019c[_0x1cef4d[this['_key']]]=!(0x2218+-0x2*-0x4ab+-0x2b6e)),_0x1f4292['push'](_0x1cef4d));continue;}}if(_0x714b71&&typeof _0x714b71=='string'&&this['_index'][_0x714b71]){for(let _0x1ac576=0x1*0x2559+0x13b7*-0x1+-0x11a2;_0x1ac576<this['_index'][_0x714b71]['list']['length'];_0x1ac576++)_0x1cef4d=this['_index'][_0x714b71]['list'][_0x1ac576],this['_key']?_0x32019c[_0x1cef4d[this['_key']]]||(_0x32019c[_0x1cef4d[this['_key']]]=!(-0x1a93+-0x3*0x3a5+0x2582),_0x1f4292['push'](_0x1cef4d)):_0x1f4292['indexOf'](_0x1cef4d)===-(-0x1*0x1718+-0xb5f*0x1+0x2278)&&_0x1f4292['push'](_0x1cef4d);}}return _0x1f4292;}}class ln extends me{constructor(_0x1646f0){super(),h(this,'_assets',new Set()),h(this,'_loader'),h(this,'_idToAsset',new Map()),h(this,'_urlToAsse'+'t',new Map()),h(this,'_nameToAss'+'et',new Map()),h(this,'_tags',new tC('id')),h(this,'prefix',null),h(this,'bundles',null),this['_loader']=_0x1646f0;}['list'](_0x3ecd49={}){const _0x409f8a=Array['from'](this['_assets']);return _0x3ecd49['preload']!==void(-0x898+-0x1*-0x1bdb+-0x1343)?_0x409f8a['filter'](_0x57838b=>_0x57838b['preload']===_0x3ecd49['preload']):_0x409f8a;}['add'](_0x13bd8b){var _0x802c63,_0x46dd63;this['_assets']['has'](_0x13bd8b)||(this['_assets']['add'](_0x13bd8b),this['_idToAsset']['set'](_0x13bd8b['id'],_0x13bd8b),(_0x802c63=_0x13bd8b['file'])!=null&&_0x802c63['url']&&this['_urlToAsse'+'t']['set'](_0x13bd8b['file']['url'],_0x13bd8b),this['_nameToAss'+'et']['has'](_0x13bd8b['name'])||this['_nameToAss'+'et']['set'](_0x13bd8b['name'],new Set()),this['_nameToAss'+'et']['get'](_0x13bd8b['name'])['add'](_0x13bd8b),_0x13bd8b['on']('name',this['_onNameCha'+'nge'],this),_0x13bd8b['registry']=this,this['_tags']['addItem'](_0x13bd8b),_0x13bd8b['tags']['on']('add',this['_onTagAdd'],this),_0x13bd8b['tags']['on']('remove',this['_onTagRemo'+'ve'],this),this['fire']('add',_0x13bd8b),this['fire']('add:'+_0x13bd8b['id'],_0x13bd8b),(_0x46dd63=_0x13bd8b['file'])!=null&&_0x46dd63['url']&&this['fire']('add:url:'+_0x13bd8b['file']['url'],_0x13bd8b),_0x13bd8b['preload']&&this['load'](_0x13bd8b));}['remove'](_0x58bee2){var _0x50ec51,_0x18b98d;if(!this['_assets']['has'](_0x58bee2))return!(0x1abc+0x2273*0x1+0x2*-0x1e97);if(this['_assets']['delete'](_0x58bee2),this['_idToAsset']['delete'](_0x58bee2['id']),(_0x50ec51=_0x58bee2['file'])!=null&&_0x50ec51['url']&&this['_urlToAsse'+'t']['delete'](_0x58bee2['file']['url']),_0x58bee2['off']('name',this['_onNameCha'+'nge'],this),this['_nameToAss'+'et']['has'](_0x58bee2['name'])){const _0x2b8dad=this['_nameToAss'+'et']['get'](_0x58bee2['name']);_0x2b8dad['delete'](_0x58bee2),_0x2b8dad['size']===-0x4ff*-0x1+-0x254*-0x4+0x14d*-0xb&&this['_nameToAss'+'et']['delete'](_0x58bee2['name']);}return this['_tags']['removeItem'](_0x58bee2),_0x58bee2['tags']['off']('add',this['_onTagAdd'],this),_0x58bee2['tags']['off']('remove',this['_onTagRemo'+'ve'],this),_0x58bee2['fire']('remove',_0x58bee2),this['fire']('remove',_0x58bee2),this['fire']('remove:'+_0x58bee2['id'],_0x58bee2),(_0x18b98d=_0x58bee2['file'])!=null&&_0x18b98d['url']&&this['fire']('remove:url'+':'+_0x58bee2['file']['url'],_0x58bee2),!(-0xced*-0x1+0x1a36+-0x2723);}['get'](_0x335554){return this['_idToAsset']['get'](Number(_0x335554));}['getByUrl'](_0x48c8a0){return this['_urlToAsse'+'t']['get'](_0x48c8a0);}['load'](_0x350970,_0x10de00){if((_0x350970['loading']||_0x350970['loaded'])&&!(_0x10de00!=null&&_0x10de00['force']))return;const _0x5f3162=_0x350970['file'],_0x20ab3e=()=>{this['fire']('load',_0x350970),this['fire']('load:'+_0x350970['id'],_0x350970),_0x5f3162&&_0x5f3162['url']&&this['fire']('load:url:'+_0x5f3162['url'],_0x350970),_0x350970['fire']('load',_0x350970);},_0x5463e9=_0x4e7c65=>{if(_0x4e7c65 instanceof Array?_0x350970['resources']=_0x4e7c65:_0x350970['resource']=_0x4e7c65,this['_loader']['patch'](_0x350970,this),_0x350970['type']==='bundle'){const _0x25dcb4=_0x350970['data']['assets'];for(let _0x56c6a6=0x2*0x2b3+0x3d2*0x6+0xa*-0x2d5;_0x56c6a6<_0x25dcb4['length'];_0x56c6a6++){const _0x3b54db=this['_idToAsset']['get'](_0x25dcb4[_0x56c6a6]);_0x3b54db&&!_0x3b54db['loaded']&&this['load'](_0x3b54db,{'force':!(0x1df*-0xa+0x493*-0x6+0x2e28)});}_0x350970['resource']['loaded']?_0x20ab3e():(this['fire']('load:start',_0x350970),this['fire']('load:start'+':'+_0x350970['id'],_0x350970),_0x5f3162&&_0x5f3162['url']&&this['fire']('load:start'+':url:'+_0x5f3162['url'],_0x350970),_0x350970['fire']('load:start',_0x350970),_0x350970['resource']['on']('load',_0x20ab3e));}else _0x20ab3e();},_0x256f8c=(_0x6c7b48,_0x3904a1,_0x5064a6)=>{if(_0x350970['loaded']=!(0x226d+-0x170d+-0xb6*0x10),_0x350970['loading']=!(-0x1135*-0x1+0x26d9+0x1*-0x380d),_0x6c7b48)this['fire']('error',_0x6c7b48,_0x350970),this['fire']('error:'+_0x350970['id'],_0x6c7b48,_0x350970),_0x350970['fire']('error',_0x6c7b48,_0x350970);else{if(_0x350970['type']==='script'){const _0x4a6d5e=this['_loader']['getHandler']('script');_0x4a6d5e['_cache'][_0x350970['id']]&&_0x4a6d5e['_cache'][_0x350970['id']]['parentNode']===document['head']&&document['head']['removeChil'+'d'](_0x4a6d5e['_cache'][_0x350970['id']]),_0x4a6d5e['_cache'][_0x350970['id']]=_0x5064a6;}_0x5463e9(_0x3904a1);}};if(_0x5f3162||_0x350970['type']==='cubemap'){this['fire']('load:start',_0x350970),this['fire']('load:'+_0x350970['id']+':start',_0x350970),_0x350970['loading']=!(0xdc8+-0x1fac+-0x5*-0x394);const _0x4bb6f0=_0x350970['getFileUrl']();if(_0x350970['type']==='bundle'){const _0x56b04b=_0x350970['data']['assets'];for(let _0x425f85=0x569+0x35b*-0xb+0x480*0x7;_0x425f85<_0x56b04b['length'];_0x425f85++){const _0x191071=this['_idToAsset']['get'](_0x56b04b[_0x425f85]);_0x191071&&(_0x191071['loaded']||_0x191071['resource']||_0x191071['loading']||(_0x191071['loading']=!(-0x4*0x32f+0x1c68+-0x22*0x76)));}}this['_loader']['load'](_0x4bb6f0,_0x350970['type'],_0x256f8c,_0x350970,_0x10de00);}else{const _0x42bc0c=this['_loader']['open'](_0x350970['type'],_0x350970['data']);_0x350970['loaded']=!(-0x54d*0x4+-0xfd*0x15+0x1d3*0x17),_0x5463e9(_0x42bc0c);}}['reloadInde'+'x'](_0x21ca5f,_0x4f0546,_0x120f74){const _0x44a5c0=(_0x4f4868,_0x56169c,_0x14b243)=>{_0x4f0546['loaded']=!(-0xd5b+0xa42+0x319),_0x4f0546['loading']=!(-0x79*-0x44+-0x1a42*0x1+0xd7*-0x7);};return this['_loader']['load'](_0x21ca5f,_0x4f0546['type'],_0x44a5c0,_0x4f0546,_0x120f74),_0x4f0546;}['loadFromUr'+'l'](_0x4f7939,_0x413d96,_0x55cc9f){this['loadFromUr'+'lAndFilena'+'me'](_0x4f7939,null,_0x413d96,_0x55cc9f);}['loadFromUr'+'lAndFilena'+'me'](_0x2aa9b1,_0x477a9f,_0x1aa29a,_0x11d7c8){const _0x2550db=xe['getBasenam'+'e'](_0x477a9f||_0x2aa9b1),_0x3b2dad={'filename':_0x477a9f||_0x2550db,'url':_0x2aa9b1};let _0xefffaf=this['getByUrl'](_0x2aa9b1);if(!_0xefffaf)_0xefffaf=new pe(_0x2550db,_0x1aa29a,_0x3b2dad),this['add'](_0xefffaf);else{if(_0xefffaf['loaded']){_0x11d7c8(_0xefffaf['loadFromUr'+'lError']||null,_0xefffaf);return;}}const _0x28c7f5=_0x11ceee=>{_0x11ceee['once']('load',_0x56a92b=>{_0x1aa29a==='material'?this['_loadTextu'+'res'](_0x56a92b,(_0xf61e0e,_0x59e38c)=>{_0x11d7c8(_0xf61e0e,_0x56a92b);}):_0x11d7c8(null,_0x56a92b);}),_0x11ceee['once']('error',_0x4b5b2a=>{_0x4b5b2a&&(this['loadFromUr'+'lError']=_0x4b5b2a),_0x11d7c8(_0x4b5b2a,_0x11ceee);}),this['load'](_0x11ceee);};_0xefffaf['resource']?_0x11d7c8(null,_0xefffaf):_0x1aa29a==='model'?this['_loadModel'](_0xefffaf,_0x28c7f5):_0x28c7f5(_0xefffaf);}['_loadModel'](_0xa757ed,_0x46b146){const _0x311860=_0xa757ed['getFileUrl'](),_0x5212bb=xe['getExtensi'+'on'](_0x311860);if(_0x5212bb==='.json'||_0x5212bb==='.glb'){const _0x28b254=xe['getDirecto'+'ry'](_0x311860),_0x16e579=xe['getBasenam'+'e'](_0x311860),_0x2e084d=xe['join'](_0x28b254,_0x16e579['replace'](_0x5212bb,'.mapping.j'+'son'));this['_loader']['load'](_0x2e084d,'json',(_0x3bf27b,_0x42c9d3)=>{_0x3bf27b?(_0xa757ed['data']={'mapping':[]},_0x46b146(_0xa757ed)):this['_loadMater'+'ials'](_0xa757ed,_0x42c9d3,(_0x3007c3,_0x1a2a31)=>{_0xa757ed['data']=_0x42c9d3,_0x46b146(_0xa757ed);});});}else _0x46b146(_0xa757ed);}['_loadMater'+'ials'](_0x275ce2,_0x1fdd77,_0x5d1f2f){const _0xa74bd5=[];let _0x4bb040=-0x4de*-0x5+-0xbd3+0xc83*-0x1;const _0x1aa0e0=(_0x280d9a,_0x1a0bf0)=>{this['_loadTextu'+'res'](_0x1a0bf0,(_0x33f5af,_0x3f03bd)=>{_0xa74bd5['push'](_0x1a0bf0),_0xa74bd5['length']===_0x4bb040&&_0x5d1f2f(null,_0xa74bd5);});};for(let _0x2e5c8c=0x1be2*0x1+0x20ef+0x3cd1*-0x1;_0x2e5c8c<_0x1fdd77['mapping']['length'];_0x2e5c8c++){const _0x2f1ca8=_0x1fdd77['mapping'][_0x2e5c8c]['path'];if(_0x2f1ca8){_0x4bb040++;const _0x492148=_0x275ce2['getAbsolut'+'eUrl'](_0x2f1ca8);this['loadFromUr'+'l'](_0x492148,'material',_0x1aa0e0);}}_0x4bb040===-0x3*-0x75a+0x52f+-0x1b3d&&_0x5d1f2f(null,_0xa74bd5);}['_loadTextu'+'res'](_0x17d9a2,_0x309bec){const _0x34bea1=[];let _0x1fb481=0x1da4+-0xdec+-0xfb8;const _0x3d83c0=_0x17d9a2['data'];if(_0x3d83c0['mappingFor'+'mat']!=='path'){w['warn']('Skipping:\x20'+_0x17d9a2['name']+(',\x20material'+'\x20files\x20mus'+'t\x20be\x20mappi'+'ngFormat:\x20'+'\x22path\x22\x20to\x20'+'be\x20loaded\x20'+'from\x20URL')),_0x309bec(null,_0x34bea1);return;}const _0x2cd396=(_0x196d9f,_0x2bb466)=>{_0x196d9f&&console['error'](_0x196d9f),_0x34bea1['push'](_0x2bb466),_0x34bea1['length']===_0x1fb481&&_0x309bec(null,_0x34bea1);},_0x270603=ad;for(let _0x1b1ca6=0x86b+-0x216e*0x1+0x1903;_0x1b1ca6<_0x270603['length'];_0x1b1ca6++){const _0x145bd8=_0x3d83c0[_0x270603[_0x1b1ca6]];if(_0x145bd8&&typeof _0x145bd8=='string'){_0x1fb481++;const _0x4fe81a=_0x17d9a2['getAbsolut'+'eUrl'](_0x145bd8);this['loadFromUr'+'l'](_0x4fe81a,'texture',_0x2cd396);}}_0x1fb481===0x151b+0xa79*0x1+0x4*-0x7e5&&_0x309bec(null,_0x34bea1);}['_onTagAdd'](_0x5d4479,_0x147177){this['_tags']['add'](_0x5d4479,_0x147177);}['_onTagRemo'+'ve'](_0x3660c0,_0x2cffa8){this['_tags']['remove'](_0x3660c0,_0x2cffa8);}['_onNameCha'+'nge'](_0x304550,_0x2bbd99,_0x42d72f){if(this['_nameToAss'+'et']['has'](_0x42d72f)){const _0x4e4180=this['_nameToAss'+'et']['get'](_0x42d72f);_0x4e4180['delete'](_0x304550),_0x4e4180['size']===-0x190b+0xdf4+0xb17&&this['_nameToAss'+'et']['delete'](_0x42d72f);}this['_nameToAss'+'et']['has'](_0x304550['name'])||this['_nameToAss'+'et']['set'](_0x304550['name'],new Set()),this['_nameToAss'+'et']['get'](_0x304550['name'])['add'](_0x304550);}['findByTag'](..._0x55cde8){return this['_tags']['find'](_0x55cde8);}['filter'](_0x1c1003){return Array['from'](this['_assets'])['filter'](_0x35a704=>_0x1c1003(_0x35a704));}['find'](_0x4ec62d,_0x1f8455){const _0x41ddfa=this['_nameToAss'+'et']['get'](_0x4ec62d);if(!_0x41ddfa)return null;for(const _0x109cf4 of _0x41ddfa)if(!_0x1f8455||_0x109cf4['type']===_0x1f8455)return _0x109cf4;return null;}['findAll'](_0xde5f0a,_0x9a813){const _0x33ca92=this['_nameToAss'+'et']['get'](_0xde5f0a);if(!_0x33ca92)return[];const _0x2f224e=Array['from'](_0x33ca92);return _0x9a813?_0x2f224e['filter'](_0x28fd79=>_0x28fd79['type']===_0x9a813):_0x2f224e;}}h(ln,'EVENT_LOAD','load'),h(ln,'EVENT_ADD','add'),h(ln,'EVENT_REMO'+'VE','remove'),h(ln,'EVENT_ERRO'+'R','error');class sC{constructor(_0x527041){h(this,'_idToBundl'+'e',new Map()),h(this,'_assetToBu'+'ndles',new Map()),h(this,'_urlsToBun'+'dles',new Map()),h(this,'_fileReque'+'sts',new Map()),(this['_assets']=_0x527041,this['_assets']['bundles']=this,this['_assets']['on']('add',this['_onAssetAd'+'d'],this),this['_assets']['on']('remove',this['_onAssetRe'+'move'],this));}['_onAssetAd'+'d'](_0x1bdc43){if(_0x1bdc43['type']==='bundle'){this['_idToBundl'+'e']['set'](_0x1bdc43['id'],_0x1bdc43),this['_assets']['on']('load:start'+':'+_0x1bdc43['id'],this['_onBundleL'+'oadStart'],this),this['_assets']['on']('load:'+_0x1bdc43['id'],this['_onBundleL'+'oad'],this),this['_assets']['on']('error:'+_0x1bdc43['id'],this['_onBundleE'+'rror'],this);const _0x4df721=_0x1bdc43['data']['assets'];for(let _0x3f8d9c=-0x191c*0x1+0x1*0x115+-0x1807*-0x1;_0x3f8d9c<_0x4df721['length'];_0x3f8d9c++)this['_indexAsse'+'tInBundle'](_0x4df721[_0x3f8d9c],_0x1bdc43);}else this['_assetToBu'+'ndles']['has'](_0x1bdc43['id'])&&this['_indexAsse'+'tFileUrls'](_0x1bdc43);}['_unbindAss'+'etEvents'](_0x2adcb8){this['_assets']['off']('load:start'+':'+_0x2adcb8,this['_onBundleL'+'oadStart'],this),this['_assets']['off']('load:'+_0x2adcb8,this['_onBundleL'+'oad'],this),this['_assets']['off']('error:'+_0x2adcb8,this['_onBundleE'+'rror'],this);}['_indexAsse'+'tInBundle'](_0x1f0613,_0x4b4ef0){let _0x43d57c=this['_assetToBu'+'ndles']['get'](_0x1f0613);_0x43d57c||(_0x43d57c=new Set(),this['_assetToBu'+'ndles']['set'](_0x1f0613,_0x43d57c)),_0x43d57c['add'](_0x4b4ef0);const _0x4a3b2d=this['_assets']['get'](_0x1f0613);_0x4a3b2d&&this['_indexAsse'+'tFileUrls'](_0x4a3b2d);}['_indexAsse'+'tFileUrls'](_0x4eb5eb){const _0x2fb635=this['_getAssetF'+'ileUrls'](_0x4eb5eb);if(_0x2fb635)for(let _0xf1c962=0x1cae*0x1+-0x1a8a+-0x224;_0xf1c962<_0x2fb635['length'];_0xf1c962++){const _0x1fe17d=this['_assetToBu'+'ndles']['get'](_0x4eb5eb['id']);_0x1fe17d&&this['_urlsToBun'+'dles']['set'](_0x2fb635[_0xf1c962],_0x1fe17d);}}['_getAssetF'+'ileUrls'](_0x4f0d46){let _0x1dfdc6=_0x4f0d46['getFileUrl']();if(!_0x1dfdc6)return null;_0x1dfdc6=_0x1dfdc6['split']('?')[0x17*-0xa+-0x1acf+-0x1bb5*-0x1];const _0x41e508=[_0x1dfdc6];if(_0x4f0d46['type']==='font'){const _0xb6806e=_0x4f0d46['data']['info']['maps']['length'];for(let _0xc263a1=-0x1a40+0x4*0x355+0xced;_0xc263a1<_0xb6806e;_0xc263a1++)_0x41e508['push'](_0x1dfdc6['replace']('.png',_0xc263a1+'.png'));}return _0x41e508;}['_onAssetRe'+'move'](_0x24341a){if(_0x24341a['type']==='bundle'){this['_idToBundl'+'e']['delete'](_0x24341a['id']),this['_unbindAss'+'etEvents'](_0x24341a['id']);const _0x532191=_0x24341a['data']['assets'];for(let _0x5d2b43=-0x25d0+0x12a*-0x7+-0x7a9*-0x6;_0x5d2b43<_0x532191['length'];_0x5d2b43++){const _0x54b6f2=this['_assetToBu'+'ndles']['get'](_0x532191[_0x5d2b43]);if(_0x54b6f2&&(_0x54b6f2['delete'](_0x24341a),_0x54b6f2['size']===0x1*0x1b9d+-0x1a39+-0x4*0x59)){this['_assetToBu'+'ndles']['delete'](_0x532191[_0x5d2b43]);for(const [_0x58f738,_0x1bf763]of this['_urlsToBun'+'dles'])_0x1bf763===_0x54b6f2&&this['_urlsToBun'+'dles']['delete'](_0x58f738);}}this['_onBundleE'+'rror']('Bundle\x20'+_0x24341a['id']+('\x20was\x20remov'+'ed'));}else{if(!this['_assetToBu'+'ndles']['get'](_0x24341a['id']))return;this['_assetToBu'+'ndles']['delete'](_0x24341a['id']);const _0x513cd2=this['_getAssetF'+'ileUrls'](_0x24341a);if(!_0x513cd2)return;for(let _0x33e0e9=-0x1a40+-0x1ba1+0xd*0x425;_0x33e0e9<_0x513cd2['length'];_0x33e0e9++)this['_urlsToBun'+'dles']['delete'](_0x513cd2[_0x33e0e9]);}}['_onBundleL'+'oadStart'](_0x42bbd7){_0x42bbd7['resource']['on']('add',(_0xa2a494,_0x24fa8d)=>{const _0x13bdf0=this['_fileReque'+'sts']['get'](_0xa2a494);if(_0x13bdf0){for(let _0x3e2176=-0x293*-0xe+0x13ad+-0x37b7;_0x3e2176<_0x13bdf0['length'];_0x3e2176++)_0x13bdf0[_0x3e2176](null,_0x24fa8d);this['_fileReque'+'sts']['delete'](_0xa2a494);}});}['_onBundleL'+'oad'](_0x524a12){if(!_0x524a12['resource']){this['_onBundleE'+'rror']('Bundle\x20'+_0x524a12['id']+('\x20failed\x20to'+'\x20load'));return;}if(this['_fileReque'+'sts'])for(const [_0x1967f6,_0x23de4c]of this['_fileReque'+'sts']){const _0x73383a=this['_urlsToBun'+'dles']['get'](_0x1967f6);if(!_0x73383a||!_0x73383a['has'](_0x524a12))continue;const _0x2dc0ad=decodeURIComponent(_0x1967f6);let _0x58f57c,_0x2b545a;if(_0x524a12['resource']['has'](_0x2dc0ad))_0x2b545a=_0x524a12['resource']['get'](_0x2dc0ad);else{if(_0x524a12['resource']['loaded'])_0x58f57c='Bundle\x20'+_0x524a12['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x1967f6;else continue;}for(let _0x1c58ca=0x1f4*0x6+-0xacf*-0x1+-0x1687;_0x1c58ca<_0x23de4c['length'];_0x1c58ca++)_0x23de4c[_0x1c58ca](_0x58f57c,_0x58f57c||_0x2b545a);this['_fileReque'+'sts']['delete'](_0x1967f6);}}['_onBundleE'+'rror'](_0x3ff777){for(const [_0x98c6a1,_0x2e014e]of this['_fileReque'+'sts'])if(!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x98c6a1)){for(let _0x4e2381=-0x14b*0x2+-0x1b36+0x1dcc;_0x4e2381<_0x2e014e['length'];_0x4e2381++)_0x2e014e[_0x4e2381](_0x3ff777);this['_fileReque'+'sts']['delete'](_0x98c6a1);}}['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x46eb4f){const _0x48c0e8=this['_urlsToBun'+'dles']['get'](_0x46eb4f);if(!_0x48c0e8)return null;let _0x1b4236=null;for(const _0x2750d0 of _0x48c0e8){if(_0x2750d0['loaded']&&_0x2750d0['resource'])return _0x2750d0;_0x2750d0['loading']&&(_0x1b4236=_0x2750d0);}return _0x1b4236;}['listBundle'+'sForAsset'](_0x5729d1){const _0x5a882f=this['_assetToBu'+'ndles']['get'](_0x5729d1['id']);return _0x5a882f?Array['from'](_0x5a882f):null;}['list'](){return Array['from'](this['_idToBundl'+'e']['values']());}['hasUrl'](_0x435e51){return this['_urlsToBun'+'dles']['has'](_0x435e51);}['urlIsLoade'+'dOrLoading'](_0x2b4fba){return!!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x2b4fba);}['loadUrl'](_0x214789,_0x2b27e0){const _0x3e11f1=this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x214789);if(!_0x3e11f1){_0x2b27e0('URL\x20'+_0x214789+('\x20not\x20found'+'\x20in\x20any\x20bu'+'ndles'));return;}if(_0x3e11f1['loaded']){const _0x3134b4=decodeURIComponent(_0x214789);if(_0x3e11f1['resource']['has'](_0x3134b4)){_0x2b27e0(null,_0x3e11f1['resource']['get'](_0x3134b4));return;}else{if(_0x3e11f1['resource']['loaded']){_0x2b27e0('Bundle\x20'+_0x3e11f1['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x214789);return;}}}let _0x28a58b=this['_fileReque'+'sts']['get'](_0x214789);_0x28a58b||(_0x28a58b=[],this['_fileReque'+'sts']['set'](_0x214789,_0x28a58b)),_0x28a58b['push'](_0x2b27e0);}['destroy'](){this['_assets']['off']('add',this['_onAssetAd'+'d'],this),this['_assets']['off']('remove',this['_onAssetRe'+'move'],this);for(const _0x3b8204 of this['_idToBundl'+'e']['keys']())this['_unbindAss'+'etEvents'](_0x3b8204);this['_assets']=null,this['_idToBundl'+'e']['clear'](),this['_idToBundl'+'e']=null,this['_assetToBu'+'ndles']['clear'](),this['_assetToBu'+'ndles']=null,this['_urlsToBun'+'dles']['clear'](),this['_urlsToBun'+'dles']=null,this['_fileReque'+'sts']['clear'](),this['_fileReque'+'sts']=null;}}class iC extends me{constructor(){super(),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'joint'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'zone'),this['list']=[];}['add'](_0x4ea493){const _0x225b8f=_0x4ea493['id'];if(this[_0x225b8f])throw new Error('ComponentS'+'ystem\x20name'+'\x20\x27'+_0x225b8f+('\x27\x20already\x20'+'registered'+'\x20or\x20not\x20al'+'lowed'));this[_0x225b8f]=_0x4ea493,this['list']['push'](_0x4ea493);}['remove'](_0x5b4dc7){const _0x4619a8=_0x5b4dc7['id'];if(!this[_0x4619a8])throw new Error('No\x20Compone'+'ntSystem\x20n'+'amed\x20\x27'+_0x4619a8+('\x27\x20register'+'ed'));delete this[_0x4619a8];const _0x454af4=this['list']['indexOf'](this[_0x4619a8]);_0x454af4!==-(-0x1*-0x203+-0x38b*-0x3+-0xca3)&&this['list']['splice'](_0x454af4,-0x253+0x16*-0x124+-0x1d4*-0xf);}['destroy'](){this['off']();for(let _0x1075fc=-0x1823+-0x1d*-0x4+0x17af;_0x1075fc<this['list']['length'];_0x1075fc++)this['list'][_0x1075fc]['destroy']();}}class $f extends me{constructor(){super(...arguments),h(this,'_index',new Map()),h(this,'_loaded',!(-0x22b0+0x127*0x6+0x1bc7));}['addFile'](_0x3ea7f7,_0x32eb5e){this['_index']['has'](_0x3ea7f7)||(this['_index']['set'](_0x3ea7f7,_0x32eb5e),this['fire']('add',_0x3ea7f7,_0x32eb5e));}['has'](_0x4dd1f6){return this['_index']['has'](_0x4dd1f6);}['get'](_0x3e812c){return this['_index']['get'](_0x3e812c)||null;}['destroy'](){this['_index']['clear']();}set['loaded'](_0x187802){!_0x187802||this['_loaded']||(this['_loaded']=!(-0x6da*-0x3+-0x1*0xb62+-0x4*0x24b),this['fire']('load'));}get['loaded'](){return this['_loaded'];}}h($f,'EVENT_ADD','add'),h($f,'EVENT_LOAD','load');class rC extends me{constructor(_0x34e200,_0x24877a=''){super(),h(this,'headerSize',0x4c8+-0x13b3+-0x10eb*-0x1),h(this,'paddingSiz'+'e',0x1*-0x1f7+-0x21dd+-0x12ea*-0x2),h(this,'bytesRead',0x1*-0xeaa+-0x2*0xb3d+0x2524),h(this,'bytesRecei'+'ved',-0x1159*-0x1+-0x4e4+-0xc75),h(this,'headerRead',!(-0xa7*-0x16+0x1e9*0x9+-0x1f8a)),h(this,'reader',null),h(this,'data',new Uint8Array(0x413+0x1bea+-0x1ffd)),h(this,'decoder',null),h(this,'prefix',''),h(this,'fileName',''),h(this,'fileSize',0x1*0x2151+-0x49*-0x39+0x2d*-0x11a),h(this,'fileType',''),h(this,'ustarForma'+'t',''),(this['prefix']=_0x24877a||'',this['reader']=_0x34e200['body']['getReader'](),this['reader']['read']()['then'](_0x34202f=>{this['pump'](_0x34202f['done'],_0x34202f['value']);})['catch'](_0x4b04eb=>{this['fire']('error',_0x4b04eb);}));}['pump'](_0x92fe4d,_0x4a507c){if(_0x92fe4d)return this['fire']('done'),null;this['bytesRecei'+'ved']+=_0x4a507c['byteLength'];const _0x202fab=new Uint8Array(this['data']['length']+_0x4a507c['length']);for(_0x202fab['set'](this['data']),_0x202fab['set'](_0x4a507c,this['data']['length']),this['data']=_0x202fab;this['readFile'](););return this['reader']['read']()['then'](_0x5fe2df=>{this['pump'](_0x5fe2df['done'],_0x5fe2df['value']);})['catch'](_0x608b3b=>{this['fire']('error',_0x608b3b);});}['readFile'](){if(!this['headerRead']&&this['bytesRecei'+'ved']>this['bytesRead']+this['headerSize']){this['headerRead']=!(0x23f*-0x5+0x105a+-0x51f);const _0x100905=new DataView(this['data']['buffer'],this['bytesRead'],this['headerSize']);this['decoder']??(this['decoder']=new TextDecoder('windows-12'+'52'));const _0x4c8eb3=this['decoder']['decode'](_0x100905);if(this['fileName']=_0x4c8eb3['substring'](-0x7*0x6b+0x4eb+-0xa*0x33,0x1*-0x2361+0x260b*0x1+-0xc2*0x3)['replace'](/\0/g,''),this['fileSize']=parseInt(_0x4c8eb3['substring'](-0x19cb+-0x1*-0x94+-0x99*-0x2b,-0x939+-0xb*-0x135+0x2*-0x1c3),-0xf59+-0x9d4+0x1935),this['fileType']=_0x4c8eb3['substring'](0xe76+-0x589+0x851*-0x1,0x2236+-0x16*0xc6+-0xf*0x11b),this['ustarForma'+'t']=_0x4c8eb3['substring'](0x439+0x31e+-0x656,0x1*-0x1257+-0x9*-0x38d+-0x125*0xb),this['ustarForma'+'t']['indexOf']('ustar')!==-(-0x227e+0x2022+-0x5*-0x79)){const _0x5b21bf=_0x4c8eb3['substring'](-0x1f*-0x1a+-0xaa*-0x2f+-0x2103,-0x74*0x3d+0x2a7+-0xd1*-0x21)['replace'](/\0/g,'');_0x5b21bf['length']>0x201*0x9+0x26f1+-0x21*0x1ba&&(this['fileName']=_0x5b21bf['trim']()+this['fileName']['trim']());}this['bytesRead']+=-0x1*0x163c+-0xa06+0x1*0x2242;}if(this['headerRead']){if(this['bytesRecei'+'ved']<this['bytesRead']+this['fileSize'])return!(0x6fa*0x2+-0x52d*0x5+0xbee);if(this['fileType']===''||this['fileType']==='0'){const _0xc500b1=new DataView(this['data']['buffer'],this['bytesRead'],this['fileSize']),_0x24ce90={'name':this['prefix']+this['fileName'],'size':this['fileSize'],'data':_0xc500b1};this['fire']('file',_0x24ce90);}this['bytesRead']+=this['fileSize'],this['headerRead']=!(-0x1d61+0x1c8*-0x7+0x14ed*0x2);const _0x191bd9=this['bytesRead']%this['paddingSiz'+'e'];return _0x191bd9!==-0x1f49+0x1*-0x33c+0x2285&&(this['bytesRead']+=this['paddingSiz'+'e']-_0x191bd9),!(0x126e+-0xed7*-0x1+-0x2145);}return!(-0x22*-0xb+0x7*-0x466+-0x1*-0x1d55);}}class Qe{constructor(_0x52244c,_0x47ef35){h(this,'handlerTyp'+'e',''),h(this,'_app'),h(this,'_maxRetrie'+'s',-0x56d*-0x1+-0x1*0x2319+0x1a6*0x12),(this['_app']=_0x52244c,this['handlerTyp'+'e']=_0x47ef35);}set['maxRetries'](_0x39a731){this['_maxRetrie'+'s']=_0x39a731;}get['maxRetries'](){return this['_maxRetrie'+'s'];}['load'](_0x3b00a1,_0x30d9d8,_0x43a029){}['open'](_0x4bf03b,_0x5efa2c,_0x8ff251){return _0x5efa2c;}['patch'](_0x37513a,_0xa5969c){}}class aC extends Qe{constructor(_0x394d0a){super(_0x394d0a,'bundle'),this['_assets']=_0x394d0a['assets'];}['_fetchRetr'+'ies'](_0x37952d,_0x3efdc1,_0x510697=-0x2606+-0x1*0x171e+0x3d24){return new Promise((_0x10ad34,_0x19e649)=>{const _0x4ce933=()=>{fetch(_0x37952d,_0x3efdc1)['then'](_0x10ad34)['catch'](_0x541c08=>{_0x510697++,_0x510697<this['maxRetries']?(w['error']('Bundle\x20fai'+'led\x20to\x20loa'+'d\x20retrying'+'\x20(attempt\x20'+_0x510697),_0x4ce933()):_0x19e649(_0x541c08);});};_0x4ce933();});}['load'](_0x5d3119,_0x38366e){typeof _0x5d3119=='string'&&(_0x5d3119={'load':_0x5d3119,'original':_0x5d3119}),this['_fetchRetr'+'ies'](_0x5d3119['load'],{'mode':'cors'},this['maxRetries'])['then'](_0x3e71a0=>{const _0x5b29d1=new $f();_0x38366e(null,_0x5b29d1);const _0x2c8403=new rC(_0x3e71a0,this['_assets']['prefix']);_0x2c8403['on']('file',_0x54bce3=>{_0x5b29d1['addFile'](_0x54bce3['name'],_0x54bce3['data']);}),_0x2c8403['on']('done',()=>{_0x5b29d1['loaded']=!(0xc2*0x1+0x2*0x54+-0x16a);}),_0x2c8403['on']('error',_0x2efd3e=>{w['error'](_0x2efd3e),_0x38366e(_0x2efd3e);});})['catch'](_0xb96cb1=>{w['error'](_0xb96cb1),_0x38366e(_0xb96cb1);});}['open'](_0x1e7a82,_0x327cb4){return _0x327cb4;}}class vn{constructor(_0x2240ed){this['_handlers']={},this['_requests']={},this['_cache']={},this['_app']=_0x2240ed;}['addHandler'](_0x2f2a6c,_0x3c9459){this['_handlers'][_0x2f2a6c]=_0x3c9459,_0x3c9459['_loader']=this;}['removeHand'+'ler'](_0x310f7f){delete this['_handlers'][_0x310f7f];}['getHandler'](_0x17367c){return this['_handlers'][_0x17367c];}static['makeKey'](_0x46395a,_0x1f2af2){return _0x46395a+'-'+_0x1f2af2;}['load'](_0x49e0af,_0x4efc34,_0x4e8fd9,_0x142a03,_0x450f26){var _0x5afa8b;const _0x11bbc1=this['_handlers'][_0x4efc34];if(!_0x11bbc1){const _0xc74090='No\x20resourc'+'e\x20handler\x20'+'for\x20asset\x20'+'type:\x20\x27'+_0x4efc34+('\x27\x20when\x20loa'+'ding\x20[')+_0x49e0af+']';w['errorOnce'](_0xc74090),_0x4e8fd9(_0xc74090);return;}if(!_0x49e0af){this['_loadNull'](_0x11bbc1,_0x4e8fd9,_0x142a03);return;}const _0xc298ec=vn['makeKey'](_0x49e0af,_0x4efc34);if(this['_requests'][_0xc298ec])this['_requests'][_0xc298ec]['push'](_0x4e8fd9);else{this['_requests'][_0xc298ec]=[_0x4e8fd9];const _0x48f150=this,_0x2fe875=function(_0x968cb,_0x5da5e8){if(_0x968cb){_0x48f150['_onFailure'](_0xc298ec,_0x968cb);return;}if(_0x5da5e8['load']instanceof DataView){if(_0x11bbc1['openBinary']){if(!_0x48f150['_requests'][_0xc298ec])return;try{const _0x3e6b3b=_0x11bbc1['openBinary'](_0x5da5e8['load']);_0x48f150['_onSuccess'](_0xc298ec,_0x3e6b3b);}catch(_0xfddafa){_0x48f150['_onFailure'](_0xc298ec,_0xfddafa);}return;}_0x5da5e8['load']=URL['createObje'+'ctURL'](new Blob([_0x5da5e8['load']])),_0x142a03&&(_0x142a03['urlObject']&&URL['revokeObje'+'ctURL'](_0x142a03['urlObject']),_0x142a03['urlObject']=_0x5da5e8['load']);}_0x11bbc1['load'](_0x5da5e8,(_0x4b94dc,_0x230822,_0x4cfa2b)=>{if(_0x48f150['_requests'][_0xc298ec]){if(_0x4b94dc){_0x48f150['_onFailure'](_0xc298ec,_0x4b94dc);return;}try{_0x48f150['_onSuccess'](_0xc298ec,_0x11bbc1['open'](_0x5da5e8['original'],_0x230822,_0x142a03),_0x4cfa2b);}catch(_0xc83023){_0x48f150['_onFailure'](_0xc298ec,_0xc83023);}}},_0x142a03);},_0x3d895d=_0x49e0af['split']('?')[-0x1489*0x1+0x73f+-0x51*-0x2a];if(this['_app']['enableBund'+'les']&&this['_app']['bundles']['hasUrl'](_0x3d895d)&&!(_0x450f26&&_0x450f26['bundlesIgn'+'ore'])){if(!this['_app']['bundles']['urlIsLoade'+'dOrLoading'](_0x3d895d)){const _0x203f16=this['_app']['bundles']['listBundle'+'sForAsset'](_0x142a03);let _0x3ff1ab;_0x450f26&&_0x450f26['bundlesFil'+'ter']&&(_0x3ff1ab=_0x450f26['bundlesFil'+'ter'](_0x203f16)),_0x3ff1ab||(_0x203f16==null||_0x203f16['sort']((_0x7296c7,_0x19f056)=>_0x7296c7['file']['size']-_0x19f056['file']['size']),_0x3ff1ab=_0x203f16==null?void(-0x1*0xf71+0x1*-0x210a+-0x24f*-0x15):_0x203f16[-0x67*0x1a+-0x1*0xb2a+-0x15a*-0x10]),_0x3ff1ab&&((_0x5afa8b=this['_app']['assets'])==null||_0x5afa8b['load'](_0x3ff1ab));}this['_app']['bundles']['loadUrl'](_0x3d895d,(_0x5b7eab,_0xa9f850)=>{_0x2fe875(_0x5b7eab,{'load':_0xa9f850,'original':_0x3d895d});});}else _0x2fe875(null,{'load':_0x49e0af,'original':_0x142a03&&_0x142a03['file']['filename']||_0x49e0af});}}['_loadNull'](_0x29e074,_0x39e55b,_0x48f60e){const _0x299963=function(_0x3803b3,_0x520b0c,_0x3ab90d){if(_0x3803b3)_0x39e55b(_0x3803b3);else try{_0x39e55b(null,_0x29e074['open'](null,_0x520b0c,_0x48f60e),_0x3ab90d);}catch(_0x1f9395){_0x39e55b(_0x1f9395);}};_0x29e074['load'](null,_0x299963,_0x48f60e);}['_onSuccess'](_0x52dabd,_0x5f5ae4,_0x6fd1d8){for(let _0xccbf68=-0xa*-0xac+-0x1d*0xc3+-0xf5f*-0x1;_0xccbf68<this['_requests'][_0x52dabd]['length'];_0xccbf68++)this['_requests'][_0x52dabd][_0xccbf68](null,_0x5f5ae4,_0x6fd1d8);delete this['_requests'][_0x52dabd];}['_onFailure'](_0x2467cc,_0x26dedc){if(console['error'](_0x26dedc),this['_requests'][_0x2467cc]){for(let _0x570630=-0x2503+0x4bb*0x1+0x2048;_0x570630<this['_requests'][_0x2467cc]['length'];_0x570630++)this['_requests'][_0x2467cc][_0x570630](_0x26dedc);delete this['_requests'][_0x2467cc];}}['open'](_0x206b3e,_0x5963c7){const _0x21c4c1=this['_handlers'][_0x206b3e];return _0x21c4c1?_0x21c4c1['open'](null,_0x5963c7):(console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x206b3e),_0x5963c7);}['patch'](_0x46ec20,_0x51185c){const _0x20497e=this['_handlers'][_0x46ec20['type']];if(!_0x20497e){console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x46ec20['type']);return;}_0x20497e['patch']&&_0x20497e['patch'](_0x46ec20,_0x51185c);}['clearCache'](_0x34fdb7,_0x14c45e){const _0x1ac0b2=vn['makeKey'](_0x34fdb7,_0x14c45e);delete this['_cache'][_0x1ac0b2];}['getFromCac'+'he'](_0x5ed578,_0xd8068b){const _0x4e3dc9=vn['makeKey'](_0x5ed578,_0xd8068b);if(this['_cache'][_0x4e3dc9])return this['_cache'][_0x4e3dc9];}['enableRetr'+'y'](_0xd6f47a=0x6c*-0x4d+0x150*0x2+0x1*0x1de1){_0xd6f47a=Math['max'](-0xced*0x2+0x7*-0x13d+0x2285,_0xd6f47a)||-0x21*-0x84+-0x942+-0x7c2;for(const _0x102169 in this['_handlers'])this['_handlers'][_0x102169]['maxRetries']=_0xd6f47a;}['disableRet'+'ry'](){for(const _0x2463f8 in this['_handlers'])this['_handlers'][_0x2463f8]['maxRetries']=0x177+-0x8*0x34a+0x18d9;}['destroyReq'+'uests'](){this['_requests']={};}['destroy'](){this['_handlers']={},this['_requests']={},this['_cache']={};}}class nC{['_validate'](_0x4839ab){if(!_0x4839ab['header'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er\x22\x20field');if(!_0x4839ab['header']['version'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er.version'+'\x22\x20field');if(_0x4839ab['header']['version']!==0x2*-0x801+-0x242c+-0xb7*-0x49)throw new Error('pc.I18n#ad'+'dData:\x20Inv'+'alid\x20\x22head'+'er.version'+'\x22\x20field');if(_0x4839ab['data']){if(!Array['isArray'](_0x4839ab['data']))throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta\x22\x20field\x20'+'must\x20be\x20an'+'\x20array');}else throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22data'+'\x22\x20field');for(let _0x553bdb=0xdaf+0x22eb+-0x309a,_0x5976e4=_0x4839ab['data']['length'];_0x553bdb<_0x5976e4;_0x553bdb++){const _0x274fbf=_0x4839ab['data'][_0x553bdb];if(!_0x274fbf['info'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x553bdb+('].info\x22\x20fi'+'eld'));if(!_0x274fbf['info']['locale'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x553bdb+('].info.loc'+'ale\x22\x20field'));if(typeof _0x274fbf['info']['locale']!='string')throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta['+_0x553bdb+('].info.loc'+'ale\x22\x20must\x20'+'be\x20a\x20strin'+'g'));if(!_0x274fbf['messages'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x553bdb+('].messages'+'\x22\x20field'));}}['parse'](_0x4c0d53){return this['_validate'](_0x4c0d53),_0x4c0d53['data'];}}const vh=class vh extends me{constructor(_0xc383e0){super(),this['locale']=nh,this['_translati'+'ons']={},this['_available'+'Langs']={},this['_app']=_0xc383e0,this['_assets']=[],this['_parser']=new nC();}set['assets'](_0x5a644c){const _0x76954d={};for(let _0x3efa14=0x1d27+-0xb52+-0x11d5,_0x2aac77=_0x5a644c['length'];_0x3efa14<_0x2aac77;_0x3efa14++){const _0x38286f=_0x5a644c[_0x3efa14]instanceof pe?_0x5a644c[_0x3efa14]['id']:_0x5a644c[_0x3efa14];_0x76954d[_0x38286f]=!(0x2*0x795+0x27*0x77+-0x214b);}let _0x491ff7=this['_assets']['length'];for(;_0x491ff7--;){const _0x294432=this['_assets'][_0x491ff7];if(!_0x76954d[_0x294432]){this['_app']['assets']['off']('add:'+_0x294432,this['_onAssetAd'+'d'],this);const _0x31eaa3=this['_app']['assets']['get'](_0x294432);_0x31eaa3&&this['_onAssetRe'+'move'](_0x31eaa3),this['_assets']['splice'](_0x491ff7,-0x1*-0x14bd+0x2475+-0x3931);}}for(const _0x411233 in _0x76954d){const _0x1d034f=parseInt(_0x411233,-0x2b*-0xd3+-0x3a2+-0xa97*0x3);if(this['_assets']['indexOf'](_0x1d034f)!==-(-0x9db+-0x249e+0x2e7a))continue;this['_assets']['push'](_0x1d034f);const _0xb0b16d=this['_app']['assets']['get'](_0x1d034f);_0xb0b16d?this['_onAssetAd'+'d'](_0xb0b16d):this['_app']['assets']['once']('add:'+_0x1d034f,this['_onAssetAd'+'d'],this);}}get['assets'](){return this['_assets'];}set['locale'](_0x244a0c){if(this['_locale']===_0x244a0c)return;let _0x11206b=Ri(_0x244a0c);if(_0x11206b==='in'&&(_0x11206b='id',_0x244a0c=KA(_0x244a0c,_0x11206b),this['_locale']===_0x244a0c))return;const _0x1bb169=this['_locale'];this['_locale']=_0x244a0c,this['_lang']=_0x11206b,this['_pluralFn']=Jd(this['_lang']),this['fire'](vh['EVENT_CHAN'+'GE'],_0x244a0c,_0x1bb169);}get['locale'](){return this['_locale'];}static['findAvaila'+'bleLocale'](_0x4add12,_0x4a94dc){return Jy(_0x4add12,_0x4a94dc);}['findAvaila'+'bleLocale'](_0x1ce235){if(this['_translati'+'ons'][_0x1ce235])return _0x1ce235;const _0x1226c7=Ri(_0x1ce235);return this['_findFallb'+'ackLocale'](_0x1ce235,_0x1226c7);}['getText'](_0x2b7a03,_0x3ad419){let _0x100e7d=_0x2b7a03,_0x5d8ee3;_0x3ad419||(_0x3ad419=this['_locale'],_0x5d8ee3=this['_lang']);let _0x172ba8=this['_translati'+'ons'][_0x3ad419];return _0x172ba8||(_0x5d8ee3||(_0x5d8ee3=Ri(_0x3ad419)),_0x3ad419=this['_findFallb'+'ackLocale'](_0x3ad419,_0x5d8ee3),_0x172ba8=this['_translati'+'ons'][_0x3ad419]),_0x172ba8&&_0x172ba8['hasOwnProp'+'erty'](_0x2b7a03)&&(_0x100e7d=_0x172ba8[_0x2b7a03],Array['isArray'](_0x100e7d)&&(_0x100e7d=_0x100e7d[0x18ce+-0x38d*-0x7+0x31a9*-0x1]),_0x100e7d==null&&(_0x100e7d=_0x2b7a03)),_0x100e7d;}['getPluralT'+'ext'](_0x4a7845,_0x343815,_0x542a60){let _0x1a1942=_0x4a7845,_0x66272b,_0x4ab102;_0x542a60?(_0x66272b=Ri(_0x542a60),_0x4ab102=Jd(_0x66272b)):(_0x542a60=this['_locale'],_0x66272b=this['_lang'],_0x4ab102=this['_pluralFn']);let _0x5e7f8e=this['_translati'+'ons'][_0x542a60];if(_0x5e7f8e||(_0x542a60=this['_findFallb'+'ackLocale'](_0x542a60,_0x66272b),_0x66272b=Ri(_0x542a60),_0x4ab102=Jd(_0x66272b),_0x5e7f8e=this['_translati'+'ons'][_0x542a60]),_0x5e7f8e&&_0x5e7f8e[_0x4a7845]&&_0x4ab102){const _0x371682=_0x4ab102(_0x343815);_0x1a1942=_0x5e7f8e[_0x4a7845][_0x371682],_0x1a1942==null&&(_0x1a1942=_0x4a7845);}return _0x1a1942;}['addData'](_0x1bb5be){let _0x104100;try{_0x104100=this['_parser']['parse'](_0x1bb5be);}catch(_0x79cdc3){console['error'](_0x79cdc3);return;}for(let _0x5504bc=0x1b81+0x1138+-0x1*0x2cb9,_0x4d2692=_0x104100['length'];_0x5504bc<_0x4d2692;_0x5504bc++){const _0x5a4dfe=_0x104100[_0x5504bc],_0x3751e9=_0x5a4dfe['info']['locale'],_0x549226=_0x5a4dfe['messages'];if(!this['_translati'+'ons'][_0x3751e9]){this['_translati'+'ons'][_0x3751e9]={};const _0x3db49c=Ri(_0x3751e9);this['_available'+'Langs'][_0x3db49c]||(this['_available'+'Langs'][_0x3db49c]=_0x3751e9);}Object['assign'](this['_translati'+'ons'][_0x3751e9],_0x549226),this['fire']('data:add',_0x3751e9,_0x549226);}}['removeData'](_0x3cea5e){let _0xc86208;try{_0xc86208=this['_parser']['parse'](_0x3cea5e);}catch(_0x41bb56){console['error'](_0x41bb56);return;}for(let _0x452ce6=-0x5*0x637+0xa*-0x1d1+0x9d9*0x5,_0x4635fe=_0xc86208['length'];_0x452ce6<_0x4635fe;_0x452ce6++){const _0x354b71=_0xc86208[_0x452ce6],_0x1ce47a=_0x354b71['info']['locale'],_0x199a5c=this['_translati'+'ons'][_0x1ce47a];if(!_0x199a5c)continue;const _0x3d0841=_0x354b71['messages'];for(const _0x4a4de2 in _0x3d0841)delete _0x199a5c[_0x4a4de2];Object['keys'](_0x199a5c)['length']===-0xa3*-0x1e+-0x1*0x79d+0x11*-0xad&&(delete this['_translati'+'ons'][_0x1ce47a],delete this['_available'+'Langs'][Ri(_0x1ce47a)]),this['fire']('data:remov'+'e',_0x1ce47a,_0x3d0841);}}['destroy'](){this['_translati'+'ons']=null,this['_available'+'Langs']=null,this['_assets']=null,this['_parser']=null,this['off']();}['_findFallb'+'ackLocale'](_0x2ce127,_0x1daecf){let _0x303a9b=oh[_0x2ce127];return _0x303a9b&&this['_translati'+'ons'][_0x303a9b]||(_0x303a9b=oh[_0x1daecf],_0x303a9b&&this['_translati'+'ons'][_0x303a9b])||(_0x303a9b=this['_available'+'Langs'][_0x1daecf],_0x303a9b&&this['_translati'+'ons'][_0x303a9b])?_0x303a9b:nh;}['_onAssetAd'+'d'](_0x5d2d7d){_0x5d2d7d['on']('load',this['_onAssetLo'+'ad'],this),_0x5d2d7d['on']('change',this['_onAssetCh'+'ange'],this),_0x5d2d7d['on']('remove',this['_onAssetRe'+'move'],this),_0x5d2d7d['on']('unload',this['_onAssetUn'+'load'],this),_0x5d2d7d['resource']&&this['_onAssetLo'+'ad'](_0x5d2d7d);}['_onAssetLo'+'ad'](_0x33f62f){this['addData'](_0x33f62f['resource']);}['_onAssetCh'+'ange'](_0x28d320){_0x28d320['resource']&&this['addData'](_0x28d320['resource']);}['_onAssetRe'+'move'](_0x4555aa){_0x4555aa['off']('load',this['_onAssetLo'+'ad'],this),_0x4555aa['off']('change',this['_onAssetCh'+'ange'],this),_0x4555aa['off']('remove',this['_onAssetRe'+'move'],this),_0x4555aa['off']('unload',this['_onAssetUn'+'load'],this),_0x4555aa['resource']&&this['removeData'](_0x4555aa['resource']),this['_app']['assets']['once']('add:'+_0x4555aa['id'],this['_onAssetAd'+'d'],this);}['_onAssetUn'+'load'](_0xa4d513){_0xa4d513['resource']&&this['removeData'](_0xa4d513['resource']);}};h(vh,'EVENT_CHAN'+'GE','change');let Sa=vh;class oC extends me{constructor(_0x5dd81c){super(),h(this,'_scripts',{}),h(this,'_list',[]),h(this,'_scriptSch'+'emas',new Map()),this['app']=_0x5dd81c;}['destroy'](){this['app']=null,this['off']();}['addSchema'](_0x11c2e7,_0x596b10){_0x596b10&&this['_scriptSch'+'emas']['set'](_0x11c2e7,_0x596b10);}['getSchema'](_0x2c266b){return this['_scriptSch'+'emas']['get'](_0x2c266b);}['add'](_0xdf87a8){const _0x367692=_0xdf87a8['__name'];return this['_scripts']['hasOwnProp'+'erty'](_0x367692)?(setTimeout(()=>{if(_0xdf87a8['prototype']['swap']){const _0x3c04f8=this['_scripts'][_0x367692],_0xf83c4d=this['_list']['indexOf'](_0x3c04f8);this['_list'][_0xf83c4d]=_0xdf87a8,this['_scripts'][_0x367692]=_0xdf87a8,this['fire']('swap',_0x367692,_0xdf87a8),this['fire']('swap:'+_0x367692,_0xdf87a8);}else console['warn']('script\x20reg'+'istry\x20alre'+'ady\x20has\x20\x27'+_0x367692+('\x27\x20script,\x20'+'define\x20\x27sw'+'ap\x27\x20method'+'\x20for\x20new\x20s'+'cript\x20type'+'\x20to\x20enable'+'\x20code\x20hot\x20'+'swapping'));}),!(0x17dc+0xf6b+-0x1c9*0x16)):(this['_scripts'][_0x367692]=_0xdf87a8,this['_list']['push'](_0xdf87a8),this['fire']('add',_0x367692,_0xdf87a8),this['fire']('add:'+_0x367692,_0xdf87a8),setTimeout(()=>{if(!this['_scripts']['hasOwnProp'+'erty'](_0x367692)||!this['app']||!this['app']['systems']||!this['app']['systems']['script'])return;const _0x418e71=this['app']['systems']['script']['_component'+'s'];let _0x414042;const _0x1b2e4d=[],_0x3b4e72=[];for(_0x418e71['loopIndex']=-0xb*-0x356+-0x192b+0x1*-0xb87;_0x418e71['loopIndex']<_0x418e71['length'];_0x418e71['loopIndex']++){const _0x447e2c=_0x418e71['items'][_0x418e71['loopIndex']];if(_0x447e2c['_scriptsIn'+'dex'][_0x367692]&&_0x447e2c['_scriptsIn'+'dex'][_0x367692]['awaiting']){_0x447e2c['_scriptsDa'+'ta']&&_0x447e2c['_scriptsDa'+'ta'][_0x367692]&&(_0x414042=_0x447e2c['_scriptsDa'+'ta'][_0x367692]['attributes']);const _0x5ef1ac=_0x447e2c['create'](_0x367692,{'preloading':!(-0x281+-0x4ed*-0x1+0x7c*-0x5),'ind':_0x447e2c['_scriptsIn'+'dex'][_0x367692]['ind'],'attributes':_0x414042});_0x5ef1ac&&_0x1b2e4d['push'](_0x5ef1ac);for(const _0x31d11d of _0x447e2c['scripts'])_0x447e2c['initialize'+'Attributes'](_0x31d11d);}}for(let _0x281f8c=-0x2*0x731+-0x21d0+0x3032;_0x281f8c<_0x1b2e4d['length'];_0x281f8c++)_0x1b2e4d[_0x281f8c]['enabled']&&(_0x1b2e4d[_0x281f8c]['_initializ'+'ed']=!(0x1*-0xbb3+-0x8a4+0x1457),_0x3b4e72['push'](_0x1b2e4d[_0x281f8c]),_0x1b2e4d[_0x281f8c]['initialize']&&_0x1b2e4d[_0x281f8c]['initialize']());for(let _0x1fafe2=0x8a4*-0x3+-0xd0+0x1abc;_0x1fafe2<_0x3b4e72['length'];_0x1fafe2++)!_0x3b4e72[_0x1fafe2]['enabled']||_0x3b4e72[_0x1fafe2]['_postIniti'+'alized']||(_0x3b4e72[_0x1fafe2]['_postIniti'+'alized']=!(-0x1c8f+0x7f*-0x1e+-0xb*-0x3f3),_0x3b4e72[_0x1fafe2]['postInitia'+'lize']&&_0x3b4e72[_0x1fafe2]['postInitia'+'lize']());}),!(0x7*0x3da+-0xa6+-0x1a50));}['remove'](_0x45f864){let _0x3a3278=_0x45f864,_0x589abc=_0x45f864;if(typeof _0x589abc!='string'?_0x589abc=_0x3a3278['__name']:_0x3a3278=this['get'](_0x589abc),this['get'](_0x589abc)!==_0x3a3278)return!(0x6*-0x545+0x364*-0x3+0x29cb);delete this['_scripts'][_0x589abc];const _0x5736dd=this['_list']['indexOf'](_0x3a3278);return this['_list']['splice'](_0x5736dd,0x1bd+0xcd*-0x11+-0x1*-0xbe1),this['fire']('remove',_0x589abc,_0x3a3278),this['fire']('remove:'+_0x589abc,_0x3a3278),!(-0x1bfe+-0x1*-0x1685+0x579);}['get'](_0x46719a){return this['_scripts'][_0x46719a]||null;}['has'](_0x3c5804){if(typeof _0x3c5804=='string')return this['_scripts']['hasOwnProp'+'erty'](_0x3c5804);if(!_0x3c5804)return!(-0x238b+0x1*0x1c53+0x739);const _0x47fcd3=_0x3c5804['__name'];return this['_scripts'][_0x47fcd3]===_0x3c5804;}['list'](){return this['_list'];}}const lC=(_0x134d03,_0x283d26)=>_0x134d03['constructo'+'r']['order']-_0x283d26['constructo'+'r']['order'],cC=_0xae88b1=>_0xae88b1['sort'](lC),no=[],ev=[],hC=()=>ev['pop']()??[],Z_=_0x568830=>{_0x568830['length']=-0x194a+0x9b5+0xf95,ev['push'](_0x568830);},xh=class xh extends Ie{constructor(_0x162d39,_0x35f990=Ys()){super(_0x162d39),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'gsplat'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'c',{}),h(this,'_app'),h(this,'_destroyin'+'g',!(0x3*-0x803+0x16ed+0x3*0x5f)),h(this,'_guid',null),h(this,'_template',!(0xa63+0x1a5b+-0x24bd)),(w['assert'](_0x35f990,'Could\x20not\x20'+'find\x20curre'+'nt\x20applica'+'tion'),this['_app']=_0x35f990);}['addCompone'+'nt'](_0x570aa3,_0xf53540){const _0xb50068=this['_app']['systems'][_0x570aa3];return _0xb50068?this['c'][_0x570aa3]?(w['warn']('addCompone'+'nt:\x20Entity'+'\x20already\x20h'+'as\x20\x27'+_0x570aa3+('\x27\x20componen'+'t')),null):_0xb50068['addCompone'+'nt'](this,_0xf53540):(w['error']('addCompone'+'nt:\x20System'+'\x20\x27'+_0x570aa3+('\x27\x20doesn\x27t\x20'+'exist')),null);}['removeComp'+'onent'](_0x2bf97e){const _0x5d2cca=this['_app']['systems'][_0x2bf97e];if(!_0x5d2cca){w['error']('removeComp'+'onent:\x20Sys'+'tem\x20\x27'+_0x2bf97e+('\x27\x20doesn\x27t\x20'+'exist'));return;}if(!this['c'][_0x2bf97e]){w['warn']('removeComp'+'onent:\x20Ent'+'ity\x20doesn\x27'+'t\x20have\x20\x27'+_0x2bf97e+('\x27\x20componen'+'t'));return;}_0x5d2cca['removeComp'+'onent'](this);}['findCompon'+'ent'](_0x3508f8){const _0x264a07=this['findOne'](_0x2cc902=>{var _0x2d3545;return(_0x2d3545=_0x2cc902['c'])==null?void(0xd1b+0x2*-0xac5+-0x1*-0x86f):_0x2d3545[_0x3508f8];});return _0x264a07&&_0x264a07['c'][_0x3508f8];}['findCompon'+'ents'](_0x3b8fdd){return this['find'](_0x553508=>{var _0x18b63f;return(_0x18b63f=_0x553508['c'])==null?void(-0x1*-0x12d1+-0xd*-0x65+-0x17f2):_0x18b63f[_0x3b8fdd];})['map'](_0x44bd31=>_0x44bd31['c'][_0x3b8fdd]);}['findScript'](_0x5595e4){const _0x4c7d22=this['findOne'](_0x46efb9=>{var _0x48cfad,_0x1144d6;return(_0x1144d6=(_0x48cfad=_0x46efb9['c'])==null?void(0x130f*0x2+0x563+-0x2b81):_0x48cfad['script'])==null?void(0x5ca+0x2119*0x1+-0x7c7*0x5):_0x1144d6['has'](_0x5595e4);});return _0x4c7d22==null?void(0x125d+0x4db+-0x5ce*0x4):_0x4c7d22['c']['script']['get'](_0x5595e4);}['findScript'+'s'](_0x6060f7){return this['find'](_0x442259=>{var _0x517a66,_0x3bcd43;return(_0x3bcd43=(_0x517a66=_0x442259['c'])==null?void(0x91*-0x7+-0x11e8+0x15df):_0x517a66['script'])==null?void(-0x1*0xcc1+0x1c6a+0xd3*-0x13):_0x3bcd43['has'](_0x6060f7);})['map'](_0x8b2ed8=>_0x8b2ed8['c']['script']['get'](_0x6060f7));}['getGuid'](){return this['_guid']||this['setGuid'](_0['create']()),this['_guid'];}['setGuid'](_0x598344){const _0x594509=this['_app']['_entityInd'+'ex'];this['_guid']&&delete _0x594509[this['_guid']],this['_guid']=_0x598344,_0x594509[this['_guid']]=this;}['_notifyHie'+'rarchyStat'+'eChanged'](_0x36eb61,_0x363b35){let _0x6f08c=!(-0x1*-0x2586+0x1032+-0x35b7*0x1);_0x36eb61===this&&no['length']===-0x457+-0x35*-0x6f+-0x12a4&&(_0x6f08c=!(0x11*0x123+-0x5da*-0x6+-0x366f)),_0x36eb61['_beingEnab'+'led']=!(-0xbde+-0x4d6+0x10b4),_0x36eb61['_onHierarc'+'hyStateCha'+'nged'](_0x363b35),_0x36eb61['_onHierarc'+'hyStatePos'+'tChanged']&&no['push'](_0x36eb61);const _0x397482=_0x36eb61['_children'];for(let _0x3cf8b1=-0xab1+0x1e8b*0x1+-0x13da,_0x398edb=_0x397482['length'];_0x3cf8b1<_0x398edb;_0x3cf8b1++)_0x397482[_0x3cf8b1]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x397482[_0x3cf8b1],_0x363b35);if(_0x36eb61['_beingEnab'+'led']=!(-0x2*0xeef+-0x544*0x1+-0x2323*-0x1),_0x6f08c){for(let _0x5344da=-0x1*0x871+-0x6b5+-0x22a*-0x7;_0x5344da<no['length'];_0x5344da++)no[_0x5344da]['_onHierarc'+'hyStatePos'+'tChanged']();no['length']=0x12e6+0x116*-0x7+-0xb4c;}}['_onHierarc'+'hyStateCha'+'nged'](_0xf90b5c){super['_onHierarc'+'hyStateCha'+'nged'](_0xf90b5c);const _0x3d9846=this['_getSorted'+'Components']();for(let _0x55fa63=-0xca5+-0x772+0x1417;_0x55fa63<_0x3d9846['length'];_0x55fa63++){const _0x8a810a=_0x3d9846[_0x55fa63];_0x8a810a['enabled']&&(_0xf90b5c?_0x8a810a['onEnable']():_0x8a810a['onDisable']());}Z_(_0x3d9846);}['_onHierarc'+'hyStatePos'+'tChanged'](){const _0x42bd2c=this['_getSorted'+'Components']();for(let _0x4cc0e0=-0x9fb*-0x1+0x29*0x95+0xb48*-0x3;_0x4cc0e0<_0x42bd2c['length'];_0x4cc0e0++)_0x42bd2c[_0x4cc0e0]['onPostStat'+'eChange']();Z_(_0x42bd2c);}['findByGuid'](_0x3d897a){if(this['_guid']===_0x3d897a)return this;const _0x41f5a9=this['_app']['_entityInd'+'ex'][_0x3d897a];return _0x41f5a9&&(_0x41f5a9===this||_0x41f5a9['isDescenda'+'ntOf'](this))?_0x41f5a9:null;}['destroy'](){this['_destroyin'+'g']=!(0x179*0x17+-0x1e7+0x42*-0x7c);for(const _0x8dfced in this['c'])this['c'][_0x8dfced]['enabled']=!(0x527+0x1*-0x9a2+0x47c);for(const _0x1bf00f in this['c'])this['c'][_0x1bf00f]['system']['removeComp'+'onent'](this);super['destroy'](),this['_guid']&&delete this['_app']['_entityInd'+'ex'][this['_guid']],this['_destroyin'+'g']=!(0x1*-0x1cf1+-0x1e3e+0x10*0x3b3);}['clone'](){const _0x2ccd29={},_0x2bad95=this['_cloneRecu'+'rsively'](_0x2ccd29);return _0x2ccd29[this['getGuid']()]=_0x2bad95,tv(this,this,_0x2bad95,_0x2ccd29),_0x2bad95;}['_getSorted'+'Components'](){const _0x48edd4=this['c'],_0x3c7514=hC();let _0x4bfc78=0x2061+0x1e7+-0x2*0x1124;for(const _0x1b320f in _0x48edd4)if(_0x48edd4['hasOwnProp'+'erty'](_0x1b320f)){const _0xb3b175=_0x48edd4[_0x1b320f];_0x4bfc78|=_0xb3b175['constructo'+'r']['order']!==0x2351+-0x1*0x84f+-0x1b02,_0x3c7514['push'](_0xb3b175);}return _0x4bfc78&&_0x3c7514['length']>-0x1c09+0x1437+-0x1*-0x7d3&&cC(_0x3c7514),_0x3c7514;}['_cloneRecu'+'rsively'](_0x255bd0){const _0x3ef503=new this['constructo'+'r'](void(-0x1ee1+0x2*0xdcd+0x347),this['_app']);super['_cloneInte'+'rnal'](_0x3ef503);for(const _0x53a898 in this['c'])this['c'][_0x53a898]['system']['cloneCompo'+'nent'](this,_0x3ef503);for(let _0x149d85=-0x150d+0x3*0x5c4+-0x1f*-0x1f;_0x149d85<this['_children']['length'];_0x149d85++){const _0x4f9a61=this['_children'][_0x149d85];if(_0x4f9a61 instanceof xh){const _0x2c0292=_0x4f9a61['_cloneRecu'+'rsively'](_0x255bd0);_0x3ef503['addChild'](_0x2c0292),_0x255bd0[_0x4f9a61['getGuid']()]=_0x2c0292;}}return _0x3ef503;}};h(xh,'EVENT_DEST'+'ROY','destroy');let lt=xh;function tv(_0x310f40,_0x3d2719,_0x16dcfd,_0x3fa47a){if(_0x3d2719 instanceof lt){const _0x5b4e84=_0x3d2719['c'];for(const _0x62e98d in _0x5b4e84){const _0x489b58=_0x5b4e84[_0x62e98d],_0x2dc803=_0x489b58['system']['getPropert'+'iesOfType']('entity');for(let _0x58e7ff=-0xd2f+-0x1860+0x258f,_0x533c5c=_0x2dc803['length'];_0x58e7ff<_0x533c5c;_0x58e7ff++){const _0x4b2ab4=_0x2dc803[_0x58e7ff]['name'],_0x54c81d=_0x489b58[_0x4b2ab4];if(!!_0x310f40['findByGuid'](_0x54c81d)){const _0x25824e=_0x3fa47a[_0x54c81d]['getGuid']();_0x25824e?_0x16dcfd['c'][_0x62e98d][_0x4b2ab4]=_0x25824e:w['warn']('Could\x20not\x20'+'find\x20corre'+'sponding\x20e'+'ntity\x20id\x20w'+'hen\x20resolv'+'ing\x20duplic'+'ated\x20entit'+'y\x20referenc'+'es');}}}_0x5b4e84['script']&&_0x16dcfd['script']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x5b4e84['script'],_0x3fa47a),_0x5b4e84['render']&&_0x16dcfd['render']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x5b4e84['render'],_0x3fa47a),_0x5b4e84['button']&&_0x16dcfd['button']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x5b4e84['button'],_0x3fa47a),_0x5b4e84['scrollview']&&_0x16dcfd['scrollview']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x5b4e84['scrollview'],_0x3fa47a),_0x5b4e84['scrollbar']&&_0x16dcfd['scrollbar']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x5b4e84['scrollbar'],_0x3fa47a),_0x5b4e84['anim']&&_0x16dcfd['anim']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x5b4e84['anim'],_0x3fa47a);const _0x5ebc5c=_0x3d2719['children']['filter'](_0x567e3c=>_0x567e3c instanceof lt),_0x3270f8=_0x16dcfd['children']['filter'](_0x2b7f24=>_0x2b7f24 instanceof lt);for(let _0x1b1b3a=0x2*-0x23b+-0x97*0x16+0x1f*0x90,_0x10acdc=_0x5ebc5c['length'];_0x1b1b3a<_0x10acdc;_0x1b1b3a++)tv(_0x310f40,_0x5ebc5c[_0x1b1b3a],_0x3270f8[_0x1b1b3a],_0x3fa47a);}}class Q_{constructor(_0xaae5f2,_0x2eba09){h(this,'name'),h(this,'url'),h(this,'data',null),h(this,'_loading',!(-0x15*-0x51+-0xc8b*-0x2+-0x1fba)),h(this,'_onLoadedC'+'allbacks',[]),(this['name']=_0xaae5f2,this['url']=_0x2eba09);}get['loaded'](){return!!this['data'];}get['loading'](){return this['_loading'];}}class dC{constructor(_0x54c21e){h(this,'_app'),h(this,'_list',[]),h(this,'_index',{}),h(this,'_urlIndex',{}),this['_app']=_0x54c21e;}['destroy'](){this['_app']=null;}['list'](){return this['_list'];}['add'](_0x1f8e3d,_0x3be765){if(this['_index']['hasOwnProp'+'erty'](_0x1f8e3d))return w['warn']('pc.SceneRe'+'gistry:\x20tr'+'ying\x20to\x20ad'+'d\x20more\x20tha'+'n\x20one\x20scen'+'e\x20called:\x20'+_0x1f8e3d),!(0x2eb+-0x1adf+0x17f5);const _0x235566=new Q_(_0x1f8e3d,_0x3be765),_0x592369=this['_list']['push'](_0x235566);return this['_index'][_0x235566['name']]=_0x592369-(0xe1+-0xb9f+0xabf),this['_urlIndex'][_0x235566['url']]=_0x592369-(0x275+0x1ea1+0xb07*-0x3),!(-0xe4e*-0x1+-0x2f2+-0xb5c);}['find'](_0x2d49ff){return this['_index']['hasOwnProp'+'erty'](_0x2d49ff)?this['_list'][this['_index'][_0x2d49ff]]:null;}['findByUrl'](_0x387df8){return this['_urlIndex']['hasOwnProp'+'erty'](_0x387df8)?this['_list'][this['_urlIndex'][_0x387df8]]:null;}['remove'](_0x2a858c){if(this['_index']['hasOwnProp'+'erty'](_0x2a858c)){const _0x74c375=this['_index'][_0x2a858c];let _0x1c5d7f=this['_list'][_0x74c375];delete this['_urlIndex'][_0x1c5d7f['url']],delete this['_index'][_0x2a858c],this['_list']['splice'](_0x74c375,-0x2442+0x24b9+-0x76);for(let _0x1ba954=-0x110e+0x9b*-0x16+-0x51*-0x60;_0x1ba954<this['_list']['length'];_0x1ba954++)_0x1c5d7f=this['_list'][_0x1ba954],this['_index'][_0x1c5d7f['name']]=_0x1ba954,this['_urlIndex'][_0x1c5d7f['url']]=_0x1ba954;}}['_loadScene'+'Data'](_0x1477f8,_0x20f0fe,_0x230f75){const _0x12652d=this['_app'];let _0x35aa70=_0x1477f8;if(typeof _0x1477f8=='string'&&(_0x1477f8=this['findByUrl'](_0x35aa70)||this['find'](_0x35aa70)||new Q_('Untitled',_0x35aa70)),_0x35aa70=_0x1477f8['url'],!_0x35aa70){_0x230f75('Cannot\x20fin'+'d\x20scene\x20to'+'\x20load');return;}if(_0x1477f8['loaded']){_0x230f75(null,_0x1477f8);return;}_0x12652d['assets']&&_0x12652d['assets']['prefix']&&!Vn['test'](_0x35aa70)&&(_0x35aa70=xe['join'](_0x12652d['assets']['prefix'],_0x35aa70)),_0x1477f8['_onLoadedC'+'allbacks']['push'](_0x230f75),_0x1477f8['_loading']||_0x12652d['loader']['getHandler']('hierarchy')['load'](_0x35aa70,(_0x56cf0a,_0x5802cd)=>{_0x1477f8['data']=_0x5802cd,_0x1477f8['_loading']=!(-0x2069+0x2*-0x31d+0x26a4);for(let _0x54eca5=0x2*-0xba5+0x54b+0x11ff;_0x54eca5<_0x1477f8['_onLoadedC'+'allbacks']['length'];_0x54eca5++)_0x1477f8['_onLoadedC'+'allbacks'][_0x54eca5](_0x56cf0a,_0x1477f8);_0x20f0fe||(_0x1477f8['data']=null),_0x1477f8['_onLoadedC'+'allbacks']['length']=-0x9*0x210+-0x1871+0x2b01;}),_0x1477f8['_loading']=!(-0x1*-0x1327+-0x4*-0x67a+-0x2d0f);}['loadSceneD'+'ata'](_0x3b4753,_0x51bd53){this['_loadScene'+'Data'](_0x3b4753,!(0x3df+-0x1*0x434+0x55),_0x51bd53);}['unloadScen'+'eData'](_0x21b47b){typeof _0x21b47b=='string'&&(_0x21b47b=this['findByUrl'](_0x21b47b)),_0x21b47b&&(_0x21b47b['data']=null);}['_loadScene'+'Hierarchy'](_0x4de0a8,_0x548871,_0x321054){this['_loadScene'+'Data'](_0x4de0a8,!(0x278+0x119*-0x22+0x1*0x22db),(_0x4a74bd,_0x2cbe9a)=>{if(_0x4a74bd){_0x321054&&_0x321054(_0x4a74bd);return;}_0x548871&&_0x548871(_0x2cbe9a);const _0x545be6=this['_app'],_0x5347af=()=>{const _0x476e9a=_0x545be6['loader']['getHandler']('hierarchy');_0x545be6['systems']['script']['preloading']=!(0x7f4+-0xd88+-0x33*-0x1c);const _0x3da3c4=_0x476e9a['open'](_0x2cbe9a['url'],_0x2cbe9a['data']);_0x545be6['systems']['script']['preloading']=!(0x16b8+0x706+-0x1dbd),_0x545be6['loader']['clearCache'](_0x2cbe9a['url'],'hierarchy'),_0x545be6['root']['addChild'](_0x3da3c4),_0x545be6['systems']['fire']('initialize',_0x3da3c4),_0x545be6['systems']['fire']('postInitia'+'lize',_0x3da3c4),_0x545be6['systems']['fire']('postPostIn'+'itialize',_0x3da3c4),_0x321054&&_0x321054(null,_0x3da3c4);};_0x545be6['_preloadSc'+'ripts'](_0x2cbe9a['data'],_0x5347af);});}['loadSceneH'+'ierarchy'](_0x131f9c,_0x49f044){this['_loadScene'+'Hierarchy'](_0x131f9c,null,_0x49f044);}['loadSceneS'+'ettings'](_0x3bf6fe,_0x51c282){this['_loadScene'+'Data'](_0x3bf6fe,!(0x2194+0x17*-0x1a8+0x485),(_0x1db245,_0x5b0ee4)=>{_0x1db245?_0x51c282&&_0x51c282(_0x1db245):(this['_app']['applyScene'+'Settings'](_0x5b0ee4['data']['settings']),_0x51c282&&_0x51c282(null));});}['changeScen'+'e'](_0xd07f9a,_0x29a345){const _0x11c635=this['_app'],_0x435bf1=_0x4ed51d=>{const {children:_0xeeb67e}=_0x11c635['root'];for(;_0xeeb67e['length'];)_0xeeb67e[-0x1038+0x10*0xb5+0x9d*0x8]['destroy']();_0x11c635['applyScene'+'Settings'](_0x4ed51d['data']['settings']);};this['_loadScene'+'Hierarchy'](_0xd07f9a,_0x435bf1,_0x29a345);}['loadScene'](_0x3768bb,_0x1e2af2){const _0xef178a=this['_app'],_0xeda1e6=_0xef178a['loader']['getHandler']('scene');_0xef178a['assets']&&_0xef178a['assets']['prefix']&&!Vn['test'](_0x3768bb)&&(_0x3768bb=xe['join'](_0xef178a['assets']['prefix'],_0x3768bb)),_0xeda1e6['load'](_0x3768bb,(_0x570d28,_0x193dcb)=>{if(_0x570d28)_0x1e2af2&&_0x1e2af2(_0x570d28);else{const _0x52aad7=()=>{_0xef178a['systems']['script']['preloading']=!(-0x383*0x9+0x745+-0x7*-0x37a);const _0x370c06=_0xeda1e6['open'](_0x3768bb,_0x193dcb),_0x7f6148=this['findByUrl'](_0x3768bb);_0x7f6148&&!_0x7f6148['loaded']&&(_0x7f6148['data']=_0x193dcb),_0xef178a['systems']['script']['preloading']=!(0xdc6+0xe8*-0x7+-0x76d*0x1),_0xef178a['loader']['clearCache'](_0x3768bb,'scene'),_0xef178a['loader']['patch']({'resource':_0x370c06,'type':'scene'},_0xef178a['assets']),_0xef178a['root']['addChild'](_0x370c06['root']),_0xef178a['systems']['rigidbody']&&typeof Ammo<'u'&&_0xef178a['systems']['rigidbody']['gravity']['set'](_0x370c06['_gravity']['x'],_0x370c06['_gravity']['y'],_0x370c06['_gravity']['z']),_0x1e2af2&&_0x1e2af2(null,_0x370c06);};_0xef178a['_preloadSc'+'ripts'](_0x193dcb,_0x52aad7);}});}}class fC{constructor(_0x520332){this['frame']={'fps':0x0,'ms':0x0,'dt':0x0,'updateStart':0x0,'updateTime':0x0,'renderStart':0x0,'renderTime':0x0,'physicsStart':0x0,'physicsTime':0x0,'cullTime':0x0,'sortTime':0x0,'skinTime':0x0,'morphTime':0x0,'instancingTime':0x0,'triangles':0x0,'otherPrimitives':0x0,'shaders':0x0,'materials':0x0,'cameras':0x0,'shadowMapUpdates':0x0,'shadowMapTime':0x0,'depthMapTime':0x0,'forwardTime':0x0,'lightClustersTime':0x0,'lightClusters':0x0,'_timeToCountFrames':0x0,'_fpsAccum':0x0},this['drawCalls']={'forward':0x0,'depth':0x0,'shadow':0x0,'immediate':0x0,'misc':0x0,'total':0x0,'skinned':0x0,'instanced':0x0,'removedByInstancing':0x0},this['misc']={'renderTargetCreationTime':0x0},this['particles']={'updatesPerFrame':0x0,'_updatesPerFrame':0x0,'frameTime':0x0,'_frameTime':0x0},this['shaders']=_0x520332['_shaderSta'+'ts'],this['vram']=_0x520332['_vram'],Object['defineProp'+'erty'](this['vram'],'totalUsed',{'get':function(){return this['tex']+this['vb']+this['ib'];}}),Object['defineProp'+'erty'](this['vram'],'geom',{'get':function(){return this['vb']+this['ib'];}});}get['scene'](){return Ys()['scene']['_stats'];}get['lightmappe'+'r'](){var _0x3dd656;return(_0x3dd656=Ys()['lightmappe'+'r'])==null?void(-0x7d2*0x3+0xe5*0x1f+-0x445*0x1):_0x3dd656['stats'];}get['batcher'](){const _0xc35017=Ys()['_batcher'];return _0xc35017?_0xc35017['_stats']:null;}}const uC='\x0auniform\x20f'+'loat\x20alpha'+'_ref;\x0a\x0avoi'+'d\x20alphaTes'+'t(float\x20a)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(a\x20<\x20alpha'+'_ref)\x20disc'+'ard;\x0a}\x0a',pC='\x0a\x0a#ifdef\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+'\x20AMBIENTSH'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20am'+'bientSH[9]'+';\x0a#endif\x0a\x0a'+'#if\x20LIT_AM'+'BIENT_SOUR'+'CE\x20==\x20ENVA'+'LATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fndef\x20ENV_'+'ATLAS\x0a\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_envAtlas'+';\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0avoid\x20addA'+'mbient(vec'+'3\x20worldNor'+'mal)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'AMBIENTSH\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20n\x20=\x20cu'+'beMapRotat'+'e(worldNor'+'mal);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20c'+'olor\x20=\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[0'+']\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ambi'+'entSH[1]\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[2'+']\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[3]\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[4]\x20*\x20'+'n.x\x20*\x20n.z\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ambien'+'tSH[5]\x20*\x20n'+'.z\x20*\x20n.y\x20+'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ambient'+'SH[6]\x20*\x20n.'+'y\x20*\x20n.x\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[7]\x20*\x20(3.'+'0\x20*\x20n.z\x20*\x20'+'n.z\x20-\x201.0)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[8]\x20*\x20'+'(n.x\x20*\x20n.x'+'\x20-\x20n.y\x20*\x20n'+'.y);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20processEn'+'vironment('+'max(color,'+'\x20vec3(0.0)'+'));\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_A'+'MBIENT_SOU'+'RCE\x20==\x20ENV'+'ALATLAS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dir\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20ma'+'pUv(toSphe'+'ricalUv(di'+'r),\x20vec4(1'+('28.0,\x20256.'+'0\x20+\x20128.0,'+'\x2064.0,\x2032.'+'0)\x20/\x20atlas'+'Size);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20raw\x20=\x20tex'+'ture2D(tex'+'ture_envAt'+'las,\x20uv);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20linear\x20'+'=\x20{ambient'+'Decode}(ra'+'w);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20p'+'rocessEnvi'+'ronment(li'+'near);\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'CONSTANT\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20light'+'_globalAmb'+'ient;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),mC='\x0a\x0a#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_anisotr'+'opyIntensi'+'ty;\x0a\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20material_'+'anisotropy'+'Rotation;\x0a'+'#endif\x0a\x0avo'+'id\x20getAnis'+'otropy()\x20{'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x200'+'.0;\x0a\x20\x20\x20\x20dA'+'nisotropyR'+'otation\x20=\x20'+'vec2(1.0,\x20'+'0.0);\x0a\x0a#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20m'+'aterial_an'+'isotropyIn'+'tensity;\x0a\x20'+'\x20\x20\x20dAnisot'+'ropyRotati'+'on\x20=\x20mater'+'ial_anisot'+'ropyRotati'+'on;\x0a#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_ANI'+'SOTROPY_TE'+'XTURE\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropyTex\x20='+'\x20texture2D'+'Bias({STD_'+'ANISOTROPY'+'_TEXTURE_N'+'AME},\x20{STD'+'_ANISOTROP'+'Y_TEXTURE_'+'UV},\x20textu'+'reBias).rg'+'b;\x0a\x20\x20\x20\x20dAn'+'isotropy\x20*'+'=\x20anisotro'+'pyTex.b;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20a'+'nisotropyR'+'otationFro'+'mTex\x20=\x20ani'+'sotropyTex'+'.rg\x20*\x202.0\x20'+'-\x20vec2(1.0'+');\x0a\x20\x20\x20\x20mat'+'2\x20rotation'+'Matrix\x20=\x20m'+'at2(dAniso'+'tropyRotat'+'ion.x,\x20dAn'+'isotropyRo'+'tation.y,\x20'+'-dAnisotro'+'pyRotation'+'.y,\x20dAniso'+'tropyRotat'+'ion.x);\x0a\x20\x20'+'\x20\x20dAnisotr'+'opyRotatio'+'n\x20=\x20rotati'+'onMatrix\x20*'+'\x20anisotrop'+'yRotationF'+'romTex;\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20dA'+'nisotropy\x20'+'=\x20clamp(dA'+'nisotropy,'+'\x200.0,\x201.0)'+';\x0a}\x0a',_C='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_aoInten'+'sity;\x0a#end'+'if\x0a\x0a#ifdef'+'\x20STD_AODET'+'AIL_TEXTUR'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22deta'+'ilModesPS\x22'+'\x0a#endif\x0a\x0av'+'oid\x20getAO('+')\x20{\x0a\x20\x20\x20\x20dA'+'o\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'aoBase\x20=\x20t'+'exture2DBi'+'as({STD_AO'+'_TEXTURE_N'+'AME},\x20{STD'+'_AO_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_AO_TE'+'XTURE_CHAN'+'NEL};\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20aoDetail\x20'+'=\x20texture2'+'DBias({STD'+'_AODETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'AODETAIL_T'+'EXTURE_UV}'+',\x20textureB'+'ias).{STD_'+'AODETAIL_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'oBase\x20=\x20de'+'tailMode_{'+'STD_AODETA'+'IL_DETAILM'+'ODE}(vec3('+'aoBase),\x20v'+'ec3(aoDeta'+'il)).r;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_AO_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(STD_A'+'O_TEXTURE)'+'\x20||\x20define'+'d(STD_AO_V'+'ERTEX)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAo\x20='+'\x20mix(1.0,\x20'+'dAo,\x20mater'+'ial_aoInte'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',gC='\x0avoid\x20occl'+'udeDiffuse'+'(float\x20ao)'+'\x20{\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20ao;\x0a}\x0a',SC='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_occlud'+'eSpecularI'+'ntensity;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0av'+'oid\x20occlud'+'eSpecular('+'float\x20glos'+'s,\x20float\x20a'+'o,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir)\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'AO\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_OCCLUDE_'+'SPECULAR_F'+'LOAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20specOcc'+'\x20=\x20mix(1.0'+',\x20ao,\x20mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20specOc'+'c\x20=\x20ao;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_OCC'+'LUDE_SPECU'+'LAR\x20==\x20GLO'+'SSDEPENDEN'+'T\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20approx'+'imated\x20spe'+'cular\x20occl'+'usion\x20from'+'\x20AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20http:'+'//research'+'.tri-ace.c'+'om/Data/ce'+'dec2011_Re'+'altimePBR_'+'Implementa'+'tion_e.ppt'+'x\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20spec'+'Pow\x20=\x20exp2'+'(gloss\x20*\x201'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'specOcc\x20=\x20'+'saturate(p'+'ow(dot(wor'+'ldNormal,\x20'+'viewDir)\x20+'+'\x20ao,\x200.01\x20'+'*\x20specPow)'+'\x20-\x201.0\x20+\x20a'+'o);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecOcc\x20=\x20m'+'ix(1.0,\x20sp'+'ecOcc,\x20mat'+'erial_occl'+'udeSpecula'+'rIntensity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'*=\x20specOcc'+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20*=\x20specO'+'cc;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sSpecula'+'rLight\x20*=\x20'+'specOcc;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sReflecti'+'on\x20*=\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a'),yC='\x0a\x20\x20\x20\x20vec4\x20'+'dirLm\x20=\x20te'+'xture2D(te'+'xture_dirL'+'ightMap,\x20v'+'Uv1);\x0a\x0a\x20\x20\x20'+'\x20if\x20(bakeD'+'ir\x20>\x200.5)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dAtten'+'\x20>\x200.00001'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dirL'+'m.xyz\x20=\x20di'+'rLm.xyz\x20*\x20'+'2.0\x20-\x20vec3'+'(1.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20sa'+'turate(dAt'+'ten);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20nor'+'malize(dLi'+'ghtDirNorm'+'W.xyz*dAtt'+'en\x20+\x20dirLm'+'.xyz*dirLm'+'.w)\x20*\x200.5\x20'+'+\x20vec3(0.5'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20dirLm.w\x20'+'+\x20dAtten;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.a\x20=\x20m'+'ax(gl_Frag'+'Color.a,\x201'+'.0\x20/\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20dir'+'Lm;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20dirLm.'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color.a\x20=\x20'+'max(dirLm.'+'w,\x20dAtten\x20'+'>\x200.00001\x20'+'?\x20(1.0/255'+'.0)\x20:\x200.0)'+';\x0a\x20\x20\x20\x20}\x0a',vC='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'ambientBak'+'eOcclusion'+'Contrast\x20+'+'\x201.0,\x200.0)'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'vec3(ambie'+'ntBakeOccl'+'usionBrigh'+'tness);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20sa'+'turate(dDi'+'ffuseLight'+');\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20dAmbie'+'ntLight;\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHTM'+'AP_RGBM\x0a\x20\x20'+'\x20\x20//\x20encod'+'e\x20to\x20RGBM\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.rgb'+'\x20=\x20dDiffus'+'eLight;\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor.rgb\x20='+'\x20pow(gl_Fr'+'agColor.rg'+'b,\x20vec3(0.'+'5));\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20/=\x208'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.a\x20=\x20clamp'+'(\x20max(\x20max'+'(\x20gl_FragC'+'olor.r,\x20gl'+'_FragColor'+'.g\x20),\x20max('+'\x20gl_FragCo'+'lor.b,\x201.0'+'\x20/\x20255.0\x20)'+'\x20),\x200.0,1.'+'0\x20);\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.a\x20=\x20ceil'+'(gl_FragCo'+'lor.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20/=\x20gl'+'_FragColor'+'.a;\x0a#else\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(dDiffu'+'seLight,\x201'+'.0);\x0a#endi'+'f\x0a',xC='\x0auniform\x20v'+'ec3\x20view_p'+'osition;\x0a\x0a'+'uniform\x20ve'+'c3\x20light_g'+'lobalAmbie'+'nt;\x0a\x0afloat'+'\x20square(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'x*x;\x0a}\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0ave'+'c3\x20saturat'+'e(vec3\x20x)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3(0.0'+'),\x20vec3(1.'+'0));\x0a}\x0a',TC='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'ec2\x20vMask;'+'\x0avarying\x20v'+'ec2\x20vTiled'+'Uv;\x0a\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0au'+'niform\x20med'+'iump\x20vec2\x20'+'outerScale'+';\x0auniform\x20'+'mediump\x20ve'+'c4\x20atlasRe'+'ct;\x0a\x0avec2\x20'+'nineSliced'+'Uv;\x0a',wC='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vec2\x20vMa'+'sk;\x0avaryin'+'g\x20vec2\x20vTi'+'ledUv;\x0a\x0aun'+'iform\x20medi'+'ump\x20vec4\x20i'+'nnerOffset'+';\x0auniform\x20'+'mediump\x20ve'+'c2\x20outerSc'+'ale;\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20atla'+'sRect;\x0a\x0ave'+'c2\x20nineSli'+'cedUv;\x0a',EC='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afloat\x20'+'bayer2(vec'+'2\x20p)\x20{\x0a\x20\x20\x20'+'\x20return\x20mo'+'d(2.0\x20*\x20p.'+'y\x20+\x20p.x\x20+\x20'+'1.0,\x204.0);'+'\x0a}\x0a\x0a//\x204x4'+'\x20matrix,\x20p'+'\x20-\x20pixel\x20c'+'oordinate\x0a'+'float\x20baye'+'r4(vec2\x20p)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20p1\x20=\x20mod'+'(p,\x202.0);\x0a'+'\x20\x20\x20\x20vec2\x20p'+'2\x20=\x20floor('+'0.5\x20*\x20mod('+'p,\x204.0));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afloat\x20bay'+'er8(vec2\x20p'+')\x20{\x0a\x20\x20\x20\x20ve'+'c2\x20p1\x20=\x20mo'+'d(p,\x202.0);'+'\x0a\x20\x20\x20\x20vec2\x20'+'p2\x20=\x20floor'+'(0.5\x20*\x20mod'+'(p,\x204.0));'+'\x0a\x20\x20\x20\x20vec2\x20'+'p4\x20=\x20floor'+'(0.25\x20*\x20mo'+'d(p,\x208.0))'+';\x0a\x20\x20\x20\x20retu'+'rn\x204.0\x20*\x20('+'4.0\x20*\x20baye'+'r2(p1)\x20+\x20b'+'ayer2(p2))'+'\x20+\x20bayer2('+'p4);\x0a}\x0a',bC='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0auni'+'form\x20vec2\x20'+'pixelOffse'+'t;\x0a\x0a#ifdef'+'\x20GAUSS\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20weigh'+'t[{SAMPLES'+'}];\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20m'+'oments\x20=\x20v'+'ec3(0.0);\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vUv0\x20-'+'\x20pixelOffs'+'et\x20*\x20(floa'+'t({SAMPLES'+'})\x20*\x200.5);'+'\x0a\x20\x20\x20\x20for\x20('+'int\x20i\x20=\x200;'+'\x20i\x20<\x20{SAMP'+'LES};\x20i++)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20c\x20=\x20'+'texture2D('+'source,\x20uv'+'\x20+\x20pixelOf'+'fset\x20*\x20flo'+'at(i));\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20GAUSS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20moments\x20'+'+=\x20c.xyz\x20*'+'\x20weight[i]'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'ments\x20+=\x20c'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'GAUSS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20*=\x201.0\x20/'+'\x20float({SA'+'MPLES});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(momen'+'ts.x,\x20mome'+'nts.y,\x20mom'+'ents.z,\x201.'+'0);\x0a}\x0a',AC='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oat;\x0a\x0avoid'+'\x20getClearC'+'oat()\x20{\x0a\x20\x20'+'\x20\x20ccSpecul'+'arity\x20=\x20ma'+'terial_cle'+'arCoat;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_CLEARC'+'OAT_TEXTUR'+'E\x0a\x20\x20\x20\x20ccSp'+'ecularity\x20'+'*=\x20texture'+'2DBias({ST'+'D_CLEARCOA'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_CL'+'EARCOAT_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20*=\x20satu'+'rate(vVert'+'exColor.{S'+'TD_CLEARCO'+'AT_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',CC='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oatGloss;\x0a'+'\x0avoid\x20getC'+'learCoatGl'+'ossiness()'+'\x20{\x0a\x20\x20\x20\x20ccG'+'lossiness\x20'+'=\x20material'+'_clearCoat'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE\x0a\x20\x20\x20\x20'+'ccGlossine'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_CLEAR'+'COATGLOSS_'+'TEXTURE_NA'+'ME},\x20{STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_CLEAR'+'COATGLOSS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_CLEAR'+'COATGLOSS_'+'INVERT\x0a\x20\x20\x20'+'\x20ccGlossin'+'ess\x20=\x201.0\x20'+'-\x20ccGlossi'+'ness;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20+=\x200.'+'0000001;\x0a}'+'\x0a',PC='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0aunif'+'orm\x20float\x20'+'material_c'+'learCoatBu'+'mpiness;\x0a#'+'endif\x0a\x0avoi'+'d\x20getClear'+'CoatNormal'+'()\x20{\x0a#ifde'+'f\x20STD_CLEA'+'RCOATNORMA'+'L_TEXTURE\x0a'+'\x20\x20\x20\x20vec3\x20n'+'ormalMap\x20='+'\x20{STD_CLEA'+'RCOATNORMA'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_UV}'+',\x20textureB'+'ias));\x0a\x20\x20\x20'+'\x20normalMap'+'\x20=\x20mix(vec'+'3(0.0,\x200.0'+',\x201.0),\x20no'+'rmalMap,\x20m'+'aterial_cl'+'earCoatBum'+'piness);\x0a\x20'+'\x20\x20\x20ccNorma'+'lW\x20=\x20norma'+'lize(dTBN\x20'+'*\x20normalMa'+'p);\x0a#else\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20dVer'+'texNormalW'+';\x0a#endif\x0a}'+'\x0a',MC='\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0avec2\x20ge'+'tCubemapFa'+'ceCoordina'+'tes(const\x20'+'vec3\x20dir,\x20'+'out\x20float\x20'+'faceIndex,'+'\x20out\x20vec2\x20'+'tileOffset'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20vAbs\x20=\x20'+'abs(dir);\x0a'+'\x20\x20\x20\x20float\x20'+'ma;\x0a\x20\x20\x20\x20ve'+'c2\x20uv;\x0a\x20\x20\x20'+'\x20if\x20(vAbs.'+'z\x20>=\x20vAbs.'+'x\x20&&\x20vAbs.'+'z\x20>=\x20vAbs.'+'y)\x20{\x20\x20\x20//\x20'+'front\x20/\x20ba'+'ck\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20faceInde'+'x\x20=\x20dir.z\x20'+'<\x200.0\x20?\x205.'+'0\x20:\x204.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2(dir.z\x20'+'<\x200.0\x20?\x20-d'+'ir.x\x20:\x20dir'+'.x,\x20-dir.y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.x\x20=\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20t'+'ileOffset.'+'y\x20=\x20dir.z\x20'+'<\x200.0\x20?\x201.'+'0\x20:\x200.0;\x0a\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if(vAbs.y'+'\x20>=\x20vAbs.x'+')\x20{\x20\x20//\x20to'+'p\x20index\x202,'+'\x20bottom\x20in'+'dex\x203\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20faceI'+'ndex\x20=\x20dir'+'.y\x20<\x200.0\x20?'+'\x203.0\x20:\x202.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ma\x20=\x200.5\x20/'+'\x20vAbs.y;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uv\x20'+'=\x20vec2(dir'+'.x,\x20dir.y\x20'+'<\x200.0\x20?\x20-d'+'ir.z\x20:\x20dir'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20tileOff'+'set.x\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.y\x20=\x20dir.'+'y\x20<\x200.0\x20?\x20'+'1.0\x20:\x200.0;'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'\x20=\x200.5\x20/\x20v'+'Abs.x;\x0a\x20\x20\x20'+('\x20\x20\x20\x20\x20uv\x20=\x20'+'vec2(dir.x'+'\x20<\x200.0\x20?\x20d'+'ir.z\x20:\x20-di'+'r.z,\x20-dir.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20tileOffs'+'et.x\x20=\x200.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'tileOffset'+'.y\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20uv'+'\x20*\x20ma\x20+\x200.'+'5;\x0a}\x0a\x0a//\x20c'+'onverts\x20un'+'normalized'+'\x20direction'+'\x20vector\x20to'+'\x20a\x20texture'+'\x20coordinat'+'e\x20for\x20a\x20cu'+'bemap\x20face'+'\x20stored\x20wi'+'thin\x20textu'+'re\x20atlas\x20d'+'escribed\x20b'+'y\x20the\x20view'+'port\x0avec2\x20'+'getCubemap'+'AtlasCoord'+'inates(con'+'st\x20vec3\x20om'+'niAtlasVie'+'wport,\x20flo'+'at\x20shadowE'+'dgePixels,'+'\x20float\x20sha'+'dowTexture'+'Resolution'+',\x20const\x20ve'+'c3\x20dir)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20faceIndex'+';\x0a\x20\x20\x20\x20vec2'+'\x20tileOffse'+'t;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapFac'+'eCoordinat'+'es(dir,\x20fa'+'ceIndex,\x20t'+'ileOffset)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'move\x20uv\x20co'+'ordinates\x20'+'inwards\x20in'+'side\x20to\x20co'+'mpensate\x20f'+'or\x20larger\x20'+'fov\x20when\x20r'+'endering\x20s'+'hadow\x20into'+'\x20atlas\x0a\x20\x20\x20'+'\x20float\x20atl'+'asFaceSize'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20tileSi'+'ze\x20=\x20shado'+'wTextureRe'+'solution\x20*'+'\x20atlasFace'+'Size;\x0a\x20\x20\x20\x20'+'float\x20offs'+'et\x20=\x20shado'+'wEdgePixel'+'s\x20/\x20tileSi'+'ze;\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv\x20*\x20ve'+'c2(1.0\x20-\x20o'+'ffset\x20*\x202.'+'0)\x20+\x20vec2('+'offset\x20*\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20*'+'=\x20atlasFac'+'eSize;\x0a\x0a\x20\x20'+'\x20\x20//\x20offse'+'t\x20into\x20fac'+'e\x20of\x20the\x20a')+('tlas\x20(3x3\x20'+'grid)\x0a\x20\x20\x20\x20'+'uv\x20+=\x20tile'+'Offset\x20*\x20a'+'tlasFaceSi'+'ze;\x0a\x0a\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nto\x20the\x20at'+'las\x20viewpo'+'rt\x0a\x20\x20\x20\x20uv\x20'+'+=\x20omniAtl'+'asViewport'+'.xy;\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a'),DC='\x0avec3\x20_get'+'CookieClus'+'tered(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20uv,\x20floa'+'t\x20intensit'+'y,\x20vec4\x20co'+'okieChanne'+'l)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20pixel\x20'+'=\x20mix(vec4'+'(1.0),\x20tex'+'ture2DLod('+'tex,\x20uv,\x200'+'.0),\x20inten'+'sity);\x0a\x20\x20\x20'+'\x20bool\x20isRg'+'b\x20=\x20dot(co'+'okieChanne'+'l.rgb,\x20vec'+'3(1.0))\x20=='+'\x203.0;\x0a\x20\x20\x20\x20'+'return\x20isR'+'gb\x20?\x20pixel'+'.rgb\x20:\x20vec'+'3(dot(pixe'+'l,\x20cookieC'+'hannel));\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0ave'+'c3\x20getCook'+'ie2DCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20mat4\x20'+'transform,'+'\x20vec3\x20worl'+'dPosition,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieC'+'hannel)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20p'+'rojPos\x20=\x20t'+'ransform\x20*'+'\x20vec4(worl'+'dPosition,'+'\x201.0);\x0a\x20\x20\x20'+'\x20return\x20_g'+'etCookieCl'+'ustered(TE'+'XTURE_PASS'+'(tex),\x20pro'+'jPos.xy\x20/\x20'+'projPos.w,'+'\x20intensity'+',\x20cookieCh'+'annel);\x0a}\x0a'+'\x0a//\x20getCoo'+'kie\x20for\x20cl'+'ustered\x20om'+'ni\x20light\x20w'+'ith\x20the\x20co'+'okie\x20textu'+'re\x20being\x20s'+'tored\x20in\x20t'+'he\x20cookie\x20'+'atlas\x0avec3'+'\x20getCookie'+'CubeCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec3\x20'+'dir,\x20float'+'\x20intensity'+',\x20vec4\x20coo'+'kieChannel'+',\x20float\x20sh'+'adowTextur'+'eResolutio'+'n,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20omniAtla'+'sViewport)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+('tureResolu'+'tion,\x20dir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getCoo'+'kieCluster'+'ed(TEXTURE'+'_PASS(tex)'+',\x20uv,\x20inte'+'nsity,\x20coo'+'kieChannel'+');\x0a}\x0a'),IC='\x0a\x0avec3\x20_ge'+'tShadowCoo'+'rdPerspZbu'+'ffer(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20wP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20shado'+'wMatrix\x20*\x20'+'vec4(wPos,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'yz\x20/=\x20proj'+'Pos.w;\x0a\x20\x20\x20'+'\x20return\x20pr'+'ojPos.xyz;'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20bias\x20i'+'s\x20already\x20'+'applied\x20on'+'\x20render\x0a}\x0a'+'\x0avec3\x20getS'+'hadowCoord'+'PerspZbuff'+'erNormalOf'+'fset(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20no'+'rmal)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20wPo'+'s\x20=\x20vPosit'+'ionW\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowCoordPe'+'rspZbuffer'+'(shadowMat'+'rix,\x20shado'+'wParams,\x20w'+'Pos);\x0a}\x0a\x0av'+'ec3\x20normal'+'OffsetPoin'+'tShadow(ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20lightPos'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm,\x20vec3'+'\x20normal)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20distScale'+'\x20=\x20length('+'lightDir);'+'\x0a\x20\x20\x20\x20vec3\x20'+'wPos\x20=\x20vPo'+'sitionW\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x20/'+'/0.02\x0a\x20\x20\x20\x20'+'vec3\x20dir\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0afloa'+'t\x20getShado'+'wOmniClust'+'eredPCF1(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20omniAtla'+'sViewport,'+'\x20float\x20sha'+'dowEdgePix'+'els,\x20vec3\x20'+'lightDir)\x20'+'{\x0a\x0a\x20\x20\x20\x20flo'+'at\x20shadowT'+('extureReso'+'lution\x20=\x20s'+'hadowParam'+'s.x;\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etCubemapA'+'tlasCoordi'+'nates(omni'+'AtlasViewp'+'ort,\x20shado'+'wEdgePixel'+'s,\x20shadowT'+'extureReso'+'lution,\x20li'+'ghtDir);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'shadowZ\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(uv,\x20sha'+'dowZ));\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF3'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF3'+'x3(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF5)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF5'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s')+('hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF5'+'x5(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a/'+'/\x20Clustere'+'d\x20Spot\x20Sam'+'pling\x20usin'+'g\x20atlas\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF1)\x0a\x0afl'+'oat\x20getSha'+'dowSpotClu'+'steredPCF1'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSha'+'dow(shadow'+'Map,\x20shado'+'wCoord);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x0af'+'loat\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF3x3'+'(SHADOWMAP'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a}\x0a\x0a#'+'endif\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x0afloa'+'t\x20getShado'+'wSpotClust'+'eredPCF5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC')+('oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a}'+'\x0a#endif\x0a'),LC='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20clu'+'sterWorldT'+'exture;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20lightsTe'+'xture;\x0a\x0a#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x20\x20\x20\x20//\x20TO'+'DO:\x20when\x20V'+'SM\x20shadow\x20'+'is\x20support'+'ed,\x20it\x20nee'+'ds\x20to\x20use\x20'+'sampler2D\x20'+'in\x20webgl2\x0a'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'DShadow\x20sh'+'adowAtlasT'+'exture;\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20CLUSTER'+'_COOKIES\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20cookieAtl'+'asTexture;'+'\x0a#endif\x0a\x0au'+'niform\x20int'+'\x20clusterMa'+'xCells;\x0a\x0a/'+'/\x201.0\x20if\x20c'+'lustered\x20l'+'ighting\x20ca'+'n\x20be\x20skipp'+'ed\x20(0\x20ligh'+'ts\x20in\x20the\x20'+'clusters)\x0a'+'uniform\x20fl'+'oat\x20cluste'+'rSkip;\x0a\x0aun'+'iform\x20vec3'+'\x20clusterCe'+'llsCountBy'+'BoundsSize'+';\x0auniform\x20'+'vec3\x20clust'+'erTextureS'+'ize;\x0aunifo'+'rm\x20vec3\x20cl'+'usterBound'+'sMin;\x0aunif'+'orm\x20vec3\x20c'+'lusterBoun'+'dsDelta;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsDot;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsMax;\x0au'+'niform\x20vec'+'2\x20shadowAt'+'lasParams;'+'\x0a\x0a//\x20struc'+'ture\x20stori'+'ng\x20light\x20p'+'roperties\x20'+'of\x20a\x20clust'+'ered\x20light'+'\x0a//\x20it\x27s\x20s'+('orted\x20to\x20h'+'ave\x20all\x20ve'+'ctors\x20alig'+'ned\x20to\x204\x20f'+'loats\x20to\x20l'+'imit\x20paddi'+'ng\x0astruct\x20'+'ClusterLig'+'htData\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x2032b'+'it\x20of\x20flag'+'s\x0a\x20\x20\x20\x20uint'+'\x20flags;\x0a\x0a\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20siz'+'es\x20/\x20orien'+'tation\x0a\x20\x20\x20'+'\x20vec3\x20half'+'Width;\x0a\x0a\x20\x20'+'\x20\x20bool\x20isS'+'pot;\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20sizes\x20'+'/\x20orientat'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20halfHei'+'ght;\x0a\x0a\x20\x20\x20\x20'+'//\x20light\x20i'+'ndex\x0a\x20\x20\x20\x20i'+'nt\x20lightIn'+'dex;\x0a\x0a\x20\x20\x20\x20'+'//\x20world\x20s'+'pace\x20posit'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20positio'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20shape\x0a\x20\x20'+'\x20\x20uint\x20sha'+'pe;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20direct'+'ion\x20(spot\x20'+'light\x20only'+')\x0a\x20\x20\x20\x20vec3'+'\x20direction'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20foll'+'ow\x20mode\x0a\x20\x20'+'\x20\x20bool\x20fal'+'loffModeLi'+'near;\x0a\x0a\x20\x20\x20'+'\x20//\x20color\x0a'+'\x20\x20\x20\x20vec3\x20c'+'olor;\x0a\x0a\x20\x20\x20'+'\x20//\x200.0\x20if'+'\x20the\x20light'+'\x20doesn\x27t\x20c'+'ast\x20shadow'+'s\x0a\x20\x20\x20\x20floa'+'t\x20shadowIn'+'tensity;\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20vec3\x20om'+'niAtlasVie'+'wport;\x0a\x0a\x20\x20'+'\x20\x20//\x20range'+'\x20of\x20the\x20li'+'ght\x0a\x20\x20\x20\x20fl'+'oat\x20range;'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'hannel\x20mas'+'k\x20-\x20one\x20of'+'\x20the\x20chann'+'els\x20has\x201,'+'\x20the\x20other'+'s\x20are\x200\x0a\x20\x20'+'\x20\x20vec4\x20coo'+'kieChannel'+'Mask;\x0a\x0a\x20\x20\x20'+'\x20//\x20compre'+'ssed\x20biase'+'s,\x20two\x20haf'+'-floats\x20st'+'ored\x20in\x20a\x20'+'float\x0a\x20\x20\x20\x20'+'float\x20bias'+'esData;\x0a\x0a\x20')+('\x20\x20\x20//\x20shad'+'ow\x20bias\x20va'+'lues\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wBias;\x0a\x20\x20\x20'+'\x20float\x20sha'+'dowNormalB'+'ias;\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20f'+'loat\x20angle'+'sData;\x0a\x0a\x20\x20'+'\x20\x20//\x20spot\x20'+'light\x20inne'+'r\x20and\x20oute'+'r\x20angle\x20co'+'sine\x0a\x20\x20\x20\x20f'+'loat\x20inner'+'ConeAngleC'+'os;\x0a\x20\x20\x20\x20fl'+'oat\x20outerC'+'oneAngleCo'+'s;\x0a\x0a\x20\x20\x20\x20//'+'\x20intensity'+'\x20of\x20the\x20co'+'okie\x0a\x20\x20\x20\x20f'+'loat\x20cooki'+'eIntensity'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20mask'+'\x0a\x20\x20\x20\x20//flo'+'at\x20mask;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Dynamic;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Lightmappe'+'d;\x0a};\x0a\x0a//\x20'+'Note:\x20on\x20s'+'ome\x20device'+'s\x20(tested\x20'+'on\x20Pixel\x203'+'A\x20XL),\x20thi'+'s\x20matrix\x20w'+'hen\x20stored'+'\x20inside\x20th'+'e\x20light\x20st'+'ruct\x20has\x20l'+'ower\x20preci'+'sion\x20compa'+'red\x20to\x0a//\x20'+'when\x20store'+'d\x20outside,'+'\x20so\x20we\x20sto'+'re\x20it\x20outs'+'ide\x20to\x20avo'+'id\x20spot\x20sh'+'adow\x20flick'+'ering.\x20Thi'+'s\x20might\x20ne'+'ed\x20to\x20be\x20d'+'one\x20to\x20oth'+'er\x20/\x20all\x20m'+'embers\x0a//\x20'+'of\x20the\x20str'+'ucture\x20if\x20'+'further\x20si'+'milar\x20issu'+'es\x20are\x20obs'+'erved.\x0a\x0a//'+'\x20shadow\x20(s'+'pot\x20light\x20'+'only)\x20/\x20co'+'okie\x20proje'+'ction\x20matr'+'ix\x0amat4\x20li'+'ghtProject'+'ionMatrix;'+'\x0a\x0avec4\x20sam'+'pleLightTe'+'xtureF(con'+'st\x20Cluster'+'LightData\x20'+'clusterLig'+'htData,\x20in'+'t\x20index)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20texelFet'+'ch(lightsT'+'exture,\x20iv'+'ec2(index,'+'\x20clusterLi'+'ghtData.li'+'ghtIndex),'+'\x200);\x0a}\x0a\x0avo'+'id\x20decodeC'+'lusterLigh')+('tCore(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData,\x20flo'+'at\x20lightIn'+'dex)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20index\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.li'+'ghtIndex\x20='+'\x20int(light'+'Index);\x0a\x0a\x20'+'\x20\x20\x20//\x20samp'+'le\x20data\x20en'+'coding\x20hal'+'f-float\x20va'+'lues\x20into\x20'+'32bit\x20uint'+'s\x0a\x20\x20\x20\x20vec4'+'\x20halfData\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_COL'+'OR_ANGLES_'+'BIAS});\x0a\x0a\x20'+'\x20\x20\x20//\x20stor'+'e\x20floats\x20w'+'e\x20decode\x20l'+'ater\x20as\x20ne'+'eded\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.angl'+'esData\x20=\x20h'+'alfData.z;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.biasesDa'+'ta\x20=\x20halfD'+'ata.w;\x0a\x0a\x20\x20'+'\x20\x20//\x20decom'+'press\x20colo'+'r\x20half-flo'+'ats\x0a\x20\x20\x20\x20ve'+'c2\x20colorRG'+'\x20=\x20unpackH'+'alf2x16(fl'+'oatBitsToU'+'int(halfDa'+'ta.x));\x0a\x20\x20'+'\x20\x20vec2\x20col'+'orB_\x20=\x20unp'+'ackHalf2x1'+'6(floatBit'+'sToUint(ha'+'lfData.y))'+';\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.color\x20='+'\x20vec3(colo'+'rRG,\x20color'+'B_.x)\x20*\x20{L'+'IGHT_COLOR'+'_DIVIDER};'+'\x0a\x0a\x20\x20\x20\x20//\x20p'+'osition\x20an'+'d\x20range,\x20f'+'ull\x20floats'+'\x0a\x20\x20\x20\x20vec4\x20'+'lightPosRa'+'nge\x20=\x20samp'+'leLightTex'+'tureF(clus'+'terLightDa'+'ta,\x20{CLUST'+'ER_TEXTURE'+'_POSITION_'+'RANGE});\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'position\x20='+'\x20lightPosR'+'ange.xyz;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.range\x20=\x20l'+'ightPosRan'+'ge.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20d'+'irection\x20&'+'\x20flags\x20dat'+'a\x0a\x20\x20\x20\x20vec4'+'\x20lightDir_'+'Flags\x20=\x20sa'+'mpleLightT'+'extureF(cl')+('usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_DIRECTI'+'ON_FLAGS})'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'spot\x20light'+'\x20direction'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.directio'+'n\x20=\x20lightD'+'ir_Flags.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x2032bit\x20fl'+'ags\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20floatBi'+'tsToUint(l'+'ightDir_Fl'+'ags.w);\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sSpot\x20=\x20(c'+'lusterLigh'+'tData.flag'+'s\x20&\x20(1u\x20<<'+'\x2030u))\x20!=\x20'+'0u;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.shape'+'\x20=\x20(cluste'+'rLightData'+'.flags\x20>>\x20'+'28u)\x20&\x200x3'+'u;\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.fallof'+'fModeLinea'+'r\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2027u'+'))\x20==\x200u;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.shadowInt'+'ensity\x20=\x20f'+'loat((clus'+'terLightDa'+'ta.flags\x20>'+'>\x200u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eIntensity'+'\x20=\x20float(('+'clusterLig'+'htData.fla'+'gs\x20>>\x208u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sDynamic\x20='+'\x20(clusterL'+'ightData.f'+'lags\x20&\x20(1u'+'\x20<<\x2022u))\x20'+'!=\x200u;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.is'+'Lightmappe'+'d\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2021u'+'))\x20!=\x200u;\x0a'+'}\x0a\x0avoid\x20de'+'codeCluste'+'rLightSpot'+'(inout\x20Clu'+'sterLightD'+'ata\x20cluste'+'rLightData'+')\x20{\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20cos\x20ang'+'les\x0a\x20\x20\x20\x20ve'+'c2\x20angles\x20'+'=\x20unpackHa'+'lf2x16(flo'+'atBitsToUi'+'nt(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight')+('Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0av'+'oid\x20decode'+'ClusterLig'+'htOmniAtla'+'sViewport('+'inout\x20Clus'+'terLightDa'+'ta\x20cluster'+'LightData)'+'\x20{\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.omniAt'+'lasViewpor'+'t\x20=\x20sample'+'LightTextu'+'reF(cluste'+'rLightData'+',\x20{CLUSTER'+'_TEXTURE_P'+'ROJ_MAT_0}'+').xyz;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtAreaDat'+'a(inout\x20Cl'+'usterLight'+'Data\x20clust'+'erLightDat'+'a)\x20{\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.half'+'Width\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_AREA_DA'+'TA_WIDTH})'+'.xyz;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.hal'+'fHeight\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData,\x20{C'+'LUSTER_TEX'+'TURE_AREA_'+'DATA_HEIGH'+'T}).xyz;\x0a}'+'\x0a\x0avoid\x20dec'+'odeCluster'+'LightProje'+'ctionMatri'+'xData(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20m0\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData,\x20{CL'+'USTER_TEXT'+'URE_PROJ_M'+'AT_0});\x0a\x20\x20'+'\x20\x20vec4\x20m1\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_PRO'+'J_MAT_1});'+'\x0a\x20\x20\x20\x20vec4\x20'+'m2\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a,\x20{CLUSTE'+'R_TEXTURE_'+'PROJ_MAT_2'+'});\x0a\x20\x20\x20\x20ve'+'c4\x20m3\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight')+('Data,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4('+'m0,\x20m1,\x20m2'+',\x20m3);\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtShadowD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20//\x20s'+'hadow\x20bias'+'es\x0a\x20\x20\x20\x20vec'+'2\x20biases\x20='+'\x20unpackHal'+'f2x16(floa'+'tBitsToUin'+'t(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20extra'+'ct\x20channel'+'\x20mask\x20from'+'\x20flags\x0a\x20\x20\x20'+'\x20uint\x20cook'+'ieFlags\x20=\x20'+'(clusterLi'+'ghtData.fl'+'ags\x20>>\x2023u'+')\x20&\x200x0Fu;'+'\x20\x20//\x204bits'+',\x20each\x20bit'+'\x20enables\x20a'+'\x20channel\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'cookieChan'+'nelMask\x20=\x20'+'vec4(uvec4'+'(cookieFla'+'gs)\x20&\x20uvec'+'4(1u,\x202u,\x20'+'4u,\x208u));\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.cookieCha'+'nnelMask\x20='+'\x20step(1.0,'+'\x20clusterLi'+'ghtData.co'+'okieChanne'+'lMask);\x20\x20/'+'/\x20Normaliz'+'e\x20to\x200.0\x20o'+'r\x201.0\x0a}\x0a\x0av'+'oid\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20Cluster'+'LightData\x20'+'light,\x20\x0a\x20\x20'+'\x20\x20vec3\x20wor'+'ldNormal,\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'viewDir,\x20\x0a'+'\x20\x20\x20\x20vec3\x20r'+'eflectionD'+'ir,\x0a#if\x20de'+'fined(LIT_'+'CLEARCOAT)'+'\x0a\x20\x20\x20\x20vec3\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20')+('\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20mat3\x20tb'+'n,\x20\x0a#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20vec'+'3\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20vec3\x20cl'+'earcoat_wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20float'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20float\x20sh'+'een_gloss,'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce_intensi'+'ty\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20vec'+'3(1.0);\x0a\x20\x20'+'\x20\x20float\x20di'+'ffuseAtten'+'uation\x20=\x201'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20fallof'+'fAttenuati'+'on\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20omn'+'i\x20part\x20of\x20'+'the\x20light\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ightDirW\x20='+'\x20evalOmniL'+'ight(light'+'.position)'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'ormW\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20')+('else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fall'+'offAttenua'+'tion\x20=\x20get'+'FalloffLin'+'ear(light.'+'range,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20getFa'+'lloffInvSq'+'uared(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_AREALIGH'+'TS\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shape\x20!='+'\x20{LIGHTSHA'+'PE_PUNCTUA'+'L})\x20{\x20//\x20a'+'rea\x20light\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20hand'+'le\x20light\x20s'+'hape\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20diffuse'+'Attenuatio'+'n\x20=\x20getRec'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirW,\x20lig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'DISK})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getD'+'iskLightDi'+'ffuse(worl'+'dNormal,\x20v'+'iewDir,\x20li'+'ghtDirW,\x20l'+'ightDirNor'+'mW)\x20*\x2016.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20{\x20//\x20sphe'+'re\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getSphereL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20g'+'etLightDif'+'fuse(world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+');\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spot'+'\x20light\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtSpot(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20*=\x20'+'getSpotEff'+'ect(light.'+'direction,'+'\x20light.inn'+'erConeAngl'+'eCos,\x20ligh'+'t.outerCon'+'eAngleCos,'+'\x20lightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_COOK'+'IES)\x20||\x20de'+'fined(CLUS'+'TER_SHADOW'+'S)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20shadow'+'\x20/\x20cookie\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shadowIn'+'tensity\x20>\x20'+'0.0\x20||\x20lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'ared\x20shado'+'w\x20/\x20cookie'+'\x20data\x20depe'+'nds\x20on\x20lig'+'ht\x20type\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightOmniAt'+'lasViewpor'+'t(light);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20shadowTex'+'tureResolu'+'tion\x20=\x20sha'+'dowAtlasPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadowEdge'+'Pixels\x20=\x20s'+'hadowAtlas'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_COOKIES\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'cookie\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20de'+'codeCluste'+'rLightCook'+'ieData(lig'+'ht);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.isSp'+'ot)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'cookieAtte'+'nuation\x20=\x20'+'getCookie2'+'DClustered'+'(TEXTURE_P'+'ASS(cookie'+'AtlasTextu'+'re),\x20light'+'Projection'+'Matrix,\x20vP'+'ositionW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20cookieAt'+'tenuation\x20'+'=\x20getCooki'+'eCubeClust'+'ered(TEXTU'+'RE_PASS(co'+'okieAtlasT'+'exture),\x20l'+'ightDirW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask,\x20sh'+'adowTextur'+'eResolutio'+'n,\x20shadowE'+'dgePixels,'+'\x20light.omn'+'iAtlasView'+'port);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20shadow\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shadow'+'Intensity\x20'+'>\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d')+('ecodeClust'+'erLightSha'+'dowData(li'+'ght);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20shadowPa'+'rams\x20=\x20vec'+'4(shadowTe'+'xtureResol'+'ution,\x20lig'+'ht.shadowN'+'ormalBias,'+'\x20light.sha'+'dowBias,\x201'+'.0\x20/\x20light'+'.range);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'isSpot)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ot\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'hadowCoord'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat'+'rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F1)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CF1(SHADOW'+'MAP_PASS(s'+'hadowAtlas'+'Texture),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20de'+'fined(CLUS'+'TER_SHADOW'+'_TYPE_PCF3'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_PASS(sha'+'dowAtlasTe'+'xture),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#elif\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF5('+'SHADOWMAP_'+'PASS(shado'+'wAtlasText'+'ure),\x20shad'+'owCoord,\x20s'+'hadowParam')+('s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCSS)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20shadow\x20='+'\x20getShadow'+'SpotCluste'+'redPCSS(SH'+'ADOWMAP_PA'+'SS(shadowA'+'tlasTextur'+'e),\x20shadow'+'Coord,\x20sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20m'+'ix(1.0,\x20sh'+'adow,\x20ligh'+'t.shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20om'+'ni\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20d'+'ir\x20=\x20norma'+'lOffsetPoi'+'ntShadow(s'+'hadowParam'+'s,\x20light.p'+'osition,\x20l'+'ightDirW,\x20'+'lightDirNo'+'rmW,\x20geome'+'tricNormal'+');\x20\x20//\x20nor'+'malBias\x20ad'+'justed\x20for'+'\x20distance\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_SHADO'+'W_TYPE_PCF'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20sha'+'dow\x20=\x20getS'+'hadowOmniC'+'lusteredPC'+'F1(SHADOWM'+'AP_PASS(sh'+'adowAtlasT'+'exture),\x20s'+'hadowParam'+'s,\x20light.o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20dir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#eli'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF3)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadowOm'+'niClustere'+'dPCF3(SHAD'+'OWMAP_PASS'+'(shadowAtl'+'asTexture)'+',\x20shadowPa'+'rams,\x20ligh'+'t.omniAtla'+'sViewport,')+('\x20shadowEdg'+'ePixels,\x20d'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20shadow\x20'+'=\x20getShado'+'wOmniClust'+'eredPCF5(S'+'HADOWMAP_P'+'ASS(shadow'+'AtlasTextu'+'re),\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20*=\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20areaDi'+'ffuse\x20=\x20(d'+'iffuseAtte'+'nuation\x20*\x20'+'falloffAtt'+'enuation)\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaDiffuse\x20'+'=\x20mix(area'+'Diffuse,\x20v'+'ec3(0),\x20dL'+'TCSpecFres'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20dif'+'fuse\x20-\x20it\x20'+'does\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20')+('into\x20specu'+'lar\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20a'+'reaDiffuse'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20and\x20clear'+'\x20coat\x20are\x20'+'material\x20s'+'ettings\x20an'+'d\x20get\x20incl'+'uded\x20by\x20a\x20'+'define\x20bas'+'ed\x20on\x20the\x20'+'material\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20specular'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20areaLig'+'htSpecular'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'RECT})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecular\x20=\x20g'+'etRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20area'+'LightSpecu'+'lar\x20=\x20getD'+'iskLightSp'+'ecular(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x20//\x20sp'+'here\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getSp'+'hereLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp'+'ecFres\x20*\x20a'+'reaLightSp'+'ecular\x20*\x20f'+'alloffAtte'+'nuation\x20*\x20'+'light.colo'+'r\x20*\x20cookie'+'Attenuatio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x20clear'+'\x20coat\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20areaLigh'+'tSpecularC')+('C;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shape\x20'+'==\x20{LIGHTS'+'HAPE_RECT}'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getRectLig'+'htSpecular'+'(clearcoat'+'_worldNorm'+'al,\x20viewDi'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(light'+'.shape\x20==\x20'+'{LIGHTSHAP'+'E_DISK})\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'arCC\x20=\x20get'+'DiskLightS'+'pecular(cl'+'earcoat_wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x20'+'//\x20sphere\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaLi'+'ghtSpecula'+'rCC\x20=\x20getS'+'phereLight'+'Specular(c'+'learcoat_w'+'orldNormal'+',\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20+=\x20ccLTCS'+'pecFres\x20*\x20'+'areaLightS'+'pecularCC\x20'+'*\x20falloffA'+'ttenuation'+'\x20*\x20light.c'+'olor\x20\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20{\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'unctualDif'+'fuse\x20=\x20fal'+'loffAttenu'+'ation\x20*\x20li'+'ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'CLUSTER_AR'+'EALIGHTS)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20punctual')+('Diffuse\x20=\x20'+'mix(punctu'+'alDiffuse,'+'\x20vec3(0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20punctu'+'alDiffuse;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20and\x20cle'+'ar\x20coat\x20ar'+'e\x20material'+'\x20settings\x20'+'and\x20get\x20in'+'cluded\x20by\x20'+'a\x20define\x20b'+'ased\x20on\x20th'+'e\x20material'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20halfD'+'ir\x20=\x20norma'+'lize(-ligh'+'tDirNormW\x20'+'+\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR_FRESNEL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htSpecular'+'(halfDir,\x20'+'reflection'+'Dir,\x20world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation\x20*'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'viewDir,\x20h'+'alfDir),\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descence_i'+'ntensity\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecular('+'halfDir,\x20c'+'learcoatRe'+'flectionDi'+'r,\x20clearco'+'at_worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'clearcoat_'+'gloss,\x20tbn'+')\x20*\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation\x20*\x20g'+'etFresnelC'+'C(dot(view'+'Dir,\x20halfD'+'ir));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20getLi'+'ghtSpecula'+'r(halfDir,'+'\x20clearcoat'+'Reflection'+'Dir,\x20clear'+'coat_world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20clearcoa'+'t_gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HEEN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec')+('ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'ir,\x20worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNormW,'+'\x20sheen_glo'+'ss)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20Wri'+'te\x20to\x20glob'+'al\x20attenua'+'tion\x20value'+'s\x20(for\x20lig'+'htmapper)\x0a'+'\x20\x20\x20\x20dAtten'+'\x20=\x20falloff'+'Attenuatio'+'n;\x0a\x20\x20\x20\x20dLi'+'ghtDirNorm'+'W\x20=\x20lightD'+'irNormW;\x0a}'+'\x0a\x0avoid\x20eva'+'luateClust'+'erLight(\x0a\x20'+'\x20\x20\x20float\x20l'+'ightIndex,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20worldNorm'+'al,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20viewDi'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20reflect'+'ionDir,\x20\x0a#'+'if\x20defined'+'(LIT_CLEAR'+'COAT)\x0a\x20\x20\x20\x20'+'vec3\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'float\x20glos'+'s,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20specula'+'rity,\x20\x0a\x20\x20\x20'+'\x20vec3\x20geom'+'etricNorma'+'l,\x20\x0a\x20\x20\x20\x20ma'+'t3\x20tbn,\x20\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20ve'+'c3\x20clearco'+'at_worldNo'+'rmal,\x0a\x20\x20\x20\x20'+'float\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20flo'+'at\x20sheen_g'+'loss,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escence_in'+'tensity\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'decode\x20cor'+'e\x20light\x20da'+'ta\x20from\x20te'+'xtures\x0a\x20\x20\x20'+'\x20ClusterLi'+'ghtData\x20cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(cluster'+'LightData,'+'\x20lightInde'+'x);\x0a\x0a\x20\x20\x20\x20/'+'/\x20evaluate'+'\x20light\x20if\x20'+'it\x20uses\x20ac'+'cepted\x20lig'+'ht\x20mask\x0a\x20\x20'+'\x20\x20#ifdef\x20C')+('LUSTER_MES'+'H_DYNAMIC_'+'LIGHTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20bool\x20'+'acceptLigh'+'tMask\x20=\x20cl'+'usterLight'+'Data.isDyn'+'amic;\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20bool\x20a'+'cceptLight'+'Mask\x20=\x20clu'+'sterLightD'+'ata.isLigh'+'tmapped;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20if\x20(a'+'cceptLight'+'Mask)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clusterLi'+'ghtData,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20worldNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vi'+'ewDir,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'reflection'+'Dir,\x20\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x20\x0a'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_worldNorm'+'al,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sheen'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a}\x0a\x0avoid'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20reflecti'+'onDir,\x20\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20v'+'ec3\x20clearc'+'oatReflect'+'ionDir,\x0a#e'+'ndif\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20mat'+'3\x20tbn,\x20\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a#end')+('if\x0a\x20\x20\x20\x20vec'+'3\x20clearcoa'+'t_worldNor'+'mal,\x0a\x20\x20\x20\x20f'+'loat\x20clear'+'coat_gloss'+',\x0a\x20\x20\x20\x20floa'+'t\x20sheen_gl'+'oss,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scence_int'+'ensity\x0a)\x20{'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'kip\x20lights'+'\x20if\x20no\x20lig'+'hts\x20at\x20all'+'\x0a\x20\x20\x20\x20if\x20(c'+'lusterSkip'+'\x20>\x200.5)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20positi'+'on\x20to\x203d\x20i'+'nteger\x20cel'+'l\x20cordinat'+'es\x20in\x20the\x20'+'cluster\x20st'+'ructure\x0a\x20\x20'+'\x20\x20vec3\x20cel'+'lCoords\x20=\x20'+'floor((vPo'+'sitionW\x20-\x20'+'clusterBou'+'ndsMin)\x20*\x20'+'clusterCel'+'lsCountByB'+'oundsSize)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'no\x20lightin'+'g\x20when\x20cel'+'l\x20coordina'+'te\x20is\x20out\x20'+'of\x20range\x0a\x20'+'\x20\x20\x20if\x20(!(a'+'ny(lessTha'+'n(cellCoor'+'ds,\x20vec3(0'+'.0)))\x20||\x20a'+'ny(greater'+'ThanEqual('+'cellCoords'+',\x20clusterC'+'ellsMax)))'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cell'+'\x20index\x20(ma'+'pping\x20from'+'\x203d\x20cell\x20c'+'oordinates'+'\x20to\x20linear'+'\x20memory)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20cellInd'+'ex\x20=\x20dot(c'+'lusterCell'+'sDot,\x20cell'+'Coords);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20convert\x20c'+'ell\x20index\x20'+'to\x20uv\x20coor'+'dinates\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20clusterV'+'\x20=\x20floor(c'+'ellIndex\x20*'+'\x20clusterTe'+'xtureSize.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20cl'+'usterU\x20=\x20c'+'ellIndex\x20-'+'\x20(clusterV'+'\x20*\x20cluster'+'TextureSiz'+'e.x);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20lo'+'op\x20over\x20ma'+'ximum\x20numb'+'er\x20of\x20ligh'+'t\x20cells\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20light'+'CellIndex\x20'+'=\x200;\x20light'+'CellIndex\x20'+'<\x20clusterM'+'axCells;\x20l'+'ightCellIn')+('dex++)\x20{\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20using'+'\x20a\x20single\x20'+'channel\x20te'+'xture\x20with'+'\x20data\x20in\x20r'+'ed\x20channel'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20l'+'ightIndex\x20'+'=\x20texelFet'+'ch(cluster'+'WorldTextu'+'re,\x20ivec2('+'int(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20clusterV'+'),\x200).x;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'tIndex\x20<=\x20'+'0.0)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20break;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20evaluateC'+'lusterLigh'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightIndex\x20'+'*\x20255.0,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel,\x0a#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20cl'+'earcoat_gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sheen_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),RC='\x0avec3\x20comb'+'ineColor(v'+'ec3\x20albedo'+',\x20vec3\x20she'+'enSpecular'+'ity,\x20float'+'\x20clearcoat'+'Specularit'+'y)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20ret\x20=\x20'+'vec3(0);\x0a#'+'ifdef\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20ret\x20'+'+=\x20(dDiffu'+'seLight\x20-\x20'+'light_glob'+'alAmbient)'+'\x20*\x20albedo\x20'+'+\x20material'+'_ambient\x20*'+'\x20light_glo'+'balAmbient'+';\x0a#else\x0a\x20\x20'+'\x20\x20ret\x20+=\x20a'+'lbedo\x20*\x20dD'+'iffuseLigh'+'t;\x0a#endif\x0a'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20ret\x20+='+'\x20dSpecular'+'Light;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_REFLE'+'CTIONS\x0a\x20\x20\x20'+'\x20ret\x20+=\x20dR'+'eflection.'+'rgb\x20*\x20dRef'+'lection.a;'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'float\x20shee'+'nScaling\x20='+'\x201.0\x20-\x20max'+'(max(sheen'+'Specularit'+'y.r,\x20sheen'+'Specularit'+'y.g),\x20shee'+'nSpeculari'+'ty.b)\x20*\x200.'+'157;\x0a\x20\x20\x20\x20r'+'et\x20=\x20ret\x20*'+'\x20sheenScal'+'ing\x20+\x20(sSp'+'ecularLigh'+'t\x20+\x20sRefle'+'ction.rgb)'+'\x20*\x20sheenSp'+'ecularity;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20float\x20c'+'learCoatSc'+'aling\x20=\x201.'+'0\x20-\x20ccFres'+'nel\x20*\x20clea'+'rcoatSpecu'+'larity;\x0a\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20clearC'+'oatScaling'+'\x20+\x20(ccSpec'+'ularLight\x20'+'+\x20ccReflec'+'tion)\x20*\x20cl'+'earcoatSpe'+'cularity;\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20return\x20r'+'et;\x0a}\x0a',OC='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blitT'+'exture;\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20texture'+'2D(blitTex'+'ture,\x20uv0)'+';\x0a\x20\x20\x20\x20}\x0a',FC='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'erCube\x20bli'+'tTexture;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20inv'+'ViewProj;\x0a'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20vec4('+'uv0\x20*\x202.0\x20'+'-\x201.0,\x200.5'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20worldPos\x20'+'=\x20invViewP'+'roj\x20*\x20proj'+'Pos;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20te'+'xtureCube('+'blitTextur'+'e,\x20worldPo'+'s.xyz);\x0a\x20\x20'+'\x20\x20}\x0a',NC='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uv0'+'.y\x20=\x201.0\x20-'+'\x20uv0.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20}\x0a',kC='\x0a//\x20light\x20'+'cookie\x20fun'+'ctionality'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0avec4'+'\x20getCookie'+'2D(sampler'+'2D\x20tex,\x20ma'+'t4\x20transfo'+'rm,\x20float\x20'+'intensity)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20projPos\x20'+'=\x20transfor'+'m\x20*\x20vec4(v'+'PositionW,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'y\x20/=\x20projP'+'os.w;\x0a\x20\x20\x20\x20'+'return\x20mix'+'(vec4(1.0)'+',\x20texture2'+'D(tex,\x20pro'+'jPos.xy),\x20'+'intensity)'+';\x0a}\x0a\x0avec4\x20'+'getCookie2'+'DClip(samp'+'ler2D\x20tex,'+'\x20mat4\x20tran'+'sform,\x20flo'+'at\x20intensi'+'ty)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20trans'+'form\x20*\x20vec'+'4(vPositio'+'nW,\x201.0);\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20/=\x20pr'+'ojPos.w;\x0a\x20'+'\x20\x20\x20if\x20(pro'+'jPos.x\x20<\x200'+'.0\x20||\x20proj'+'Pos.x\x20>\x201.'+'0\x20||\x20projP'+'os.y\x20<\x200.0'+'\x20||\x20projPo'+'s.y\x20>\x201.0\x20'+'||\x20projPos'+'.z\x20<\x200.0)\x20'+'return\x20vec'+'4(0.0);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(vec4(1.'+'0),\x20textur'+'e2D(tex,\x20p'+'rojPos.xy)'+',\x20intensit'+'y);\x0a}\x0a\x0avec'+'4\x20getCooki'+'e2DXform(s'+'ampler2D\x20t'+'ex,\x20mat4\x20t'+'ransform,\x20'+'float\x20inte'+'nsity,\x20vec'+'4\x20cookieMa'+'trix,\x20vec2'+'\x20cookieOff'+'set)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20proj'+'Pos\x20=\x20tran'+'sform\x20*\x20ve'+'c4(vPositi'+'onW,\x201.0);'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20/=\x20p'+'rojPos.w;\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20+=\x20co'+'okieOffset'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookie2D'+'ClipXform('+('sampler2D\x20'+'tex,\x20mat4\x20'+'transform,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieM'+'atrix,\x20vec'+'2\x20cookieOf'+'fset)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'jPos\x20=\x20tra'+'nsform\x20*\x20v'+'ec4(vPosit'+'ionW,\x201.0)'+';\x0a\x20\x20\x20\x20proj'+'Pos.xy\x20/=\x20'+'projPos.w;'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20+=\x20c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20if\x20'+'(projPos.x'+'\x20<\x200.0\x20||\x20'+'projPos.x\x20'+'>\x201.0\x20||\x20p'+'rojPos.y\x20<'+'\x200.0\x20||\x20pr'+'ojPos.y\x20>\x20'+'1.0\x20||\x20pro'+'jPos.z\x20<\x200'+'.0)\x20return'+'\x20vec4(0.0)'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookieCu'+'be(sampler'+'Cube\x20tex,\x20'+'mat4\x20trans'+'form,\x20floa'+'t\x20intensit'+'y)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20mix('+'vec4(1.0),'+'\x20textureCu'+'be(tex,\x20dL'+'ightDirNor'+'mW\x20*\x20mat3('+'transform)'+'),\x20intensi'+'ty);\x0a}\x0a'),UC='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20envBoxM'+'in;\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20envBoxMax'+';\x0a#endif\x0a\x0a'+'vec3\x20cubeM'+'apProject('+'vec3\x20nrdir'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_CUB'+'EMAP_PROJE'+'CTION\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20c'+'ubeMapRota'+'te(nrdir);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20LIT_CUBEM'+'AP_PROJECT'+'ION\x20==\x20BOX'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'nrdir\x20=\x20cu'+'beMapRotat'+'e(nrdir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20rbmax\x20'+'=\x20(envBoxM'+'ax\x20-\x20vPosi'+'tionW)\x20/\x20n'+'rdir;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20r'+'bmin\x20=\x20(en'+'vBoxMin\x20-\x20'+'vPositionW'+')\x20/\x20nrdir;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20rbmin'+'max\x20=\x20mix('+'rbmin,\x20rbm'+'ax,\x20vec3(g'+'reaterThan'+'(nrdir,\x20ve'+'c3(0.0))))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20fa\x20='+'\x20min(min(r'+'bminmax.x,'+'\x20rbminmax.'+'y),\x20rbminm'+'ax.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20posonbox\x20'+'=\x20vPositio'+'nW\x20+\x20nrdir'+'\x20*\x20fa;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envBoxPos\x20'+'=\x20(envBoxM'+'in\x20+\x20envBo'+'xMax)\x20*\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20no'+'rmalize(po'+'sonbox\x20-\x20e'+'nvBoxPos);'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',BC='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20mat3\x20cu'+'beMapRotat'+'ionMatrix;'+'\x0a#endif\x0a\x0av'+'ec3\x20cubeMa'+'pRotate(ve'+'c3\x20refDir)'+'\x20{\x0a#ifdef\x20'+'CUBEMAP_RO'+'TATION\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'#else\x0a\x20\x20\x20\x20'+'return\x20ref'+'Dir;\x0a#endi'+'f\x0a}\x0a',zC='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0agl_FragCo'+'lor\x20=\x20vec4'+'(litArgs_a'+'lbedo\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_WORLD'+'_NORMAL_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(litArgs'+'_worldNorm'+'al\x20*\x200.5\x20+'+'\x200.5,\x201.0)'+';\x0a#endif\x0a\x0a'+'#ifdef\x20DEB'+'UG_OPACITY'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(vec3'+'(litArgs_o'+'pacity)\x20,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_SPE'+'CULARITY_P'+'ASS\x0agl_Fra'+'gColor\x20=\x20v'+'ec4(litArg'+'s_specular'+'ity,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_GLOSS_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(vec3(li'+'tArgs_glos'+'s)\x20,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_METALNES'+'S_PASS\x0agl_'+'FragColor\x20'+'=\x20vec4(vec'+'3(litArgs_'+'metalness)'+'\x20,\x201.0);\x0a#'+'endif\x0a\x0a#if'+'def\x20DEBUG_'+'AO_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ve'+'c3(litArgs'+'_ao)\x20,\x201.0'+');\x0a#endif\x0a'+'\x0a#ifdef\x20DE'+'BUG_EMISSI'+'ON_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ga'+'mmaCorrect'+'Output(lit'+'Args_emiss'+'ion),\x201.0)'+';\x0a#endif\x0a',VC='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0ali'+'tArgs_albe'+'do\x20=\x20vec3('+'0.5);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_UV0'+'_PASS\x0a#ifd'+'ef\x20VARYING'+'_VUV0\x0alitA'+'rgs_albedo'+'\x20=\x20vec3(vU'+'v0,\x200);\x0a#e'+'lse\x0alitArg'+'s_albedo\x20='+'\x20vec3(0);\x0a'+'#endif\x0a#en'+'dif\x0a',GC='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0avec3\x20'+'decodeLine'+'ar(vec4\x20ra'+'w)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw.'+'rgb;\x0a}\x0a\x0afl'+'oat\x20decode'+'Gamma(floa'+'t\x20raw)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'pow(raw,\x202'+'.2);\x0a}\x0a\x0ave'+'c3\x20decodeG'+'amma(vec3\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w(raw,\x20vec'+'3(2.2));\x0a}'+'\x0a\x0avec3\x20dec'+'odeGamma(v'+'ec4\x20raw)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(raw.'+'xyz,\x20vec3('+'2.2));\x0a}\x0a\x0a'+'vec3\x20decod'+'eRGBM(vec4'+'\x20raw)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20col'+'or\x20=\x20(8.0\x20'+'*\x20raw.a)\x20*'+'\x20raw.rgb;\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0av'+'ec3\x20decode'+'RGBP(vec4\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20colo'+'r\x20=\x20raw.rg'+'b\x20*\x20(-raw.'+'a\x20*\x207.0\x20+\x20'+'8.0);\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBE'+'(vec4\x20raw)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(raw.a\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec3(0.0'+',\x200.0,\x200.0'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20raw.xyz\x20*'+'\x20pow(2.0,\x20'+'raw.w\x20*\x2025'+'5.0\x20-\x20128.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0avec4\x20pa'+'ssThrough('+'vec4\x20raw)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20raw;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'Z(vec4\x20nma'+'p)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20nmap'+'.xyz\x20*\x202.0'+'\x20-\x201.0;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'(vec4\x20nmap'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20normal;'+'\x0a\x20\x20\x20\x20norma'+'l.xy\x20=\x20nma'+'p.wy\x20*\x202.0'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20normal.z'+'\x20=\x20sqrt(1.'+'0\x20-\x20clamp('+'dot(normal'+'.xy,\x20norma'+'l.xy),\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20return\x20'+'normal;\x0a}\x0a'+'\x0a#endif\x0a',HC='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0avec3\x20'+'detailMode'+'_mul(vec3\x20'+'c1,\x20vec3\x20c'+'2)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20c1\x20*'+'\x20c2;\x0a}\x0a\x0ave'+'c3\x20detailM'+'ode_add(ve'+'c3\x20c1,\x20vec'+'3\x20c2)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'1\x20+\x20c2;\x0a}\x0a'+'\x0a//\x20https:'+'//en.wikip'+'edia.org/w'+'iki/Blend_'+'modes#Scre'+'en\x0avec3\x20de'+'tailMode_s'+'creen(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x201.0'+'\x20-\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2);\x0a}\x0a\x0a/'+'/\x20https://'+'en.wikiped'+'ia.org/wik'+'i/Blend_mo'+'des#Overla'+'y\x0avec3\x20det'+'ailMode_ov'+'erlay(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(1.0\x20-\x202.0'+'\x20*\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2),\x202.0\x20'+'*\x20c1\x20*\x20c2,'+'\x20step(c1,\x20'+'vec3(0.5))'+');\x0a}\x0a\x0avec3'+'\x20detailMod'+'e_min(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20min'+'(c1,\x20c2);\x0a'+'}\x0a\x0avec3\x20de'+'tailMode_m'+'ax(vec3\x20c1'+',\x20vec3\x20c2)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20max(c1'+',\x20c2);\x0a}\x0a\x0a'+'#endif\x0a',WC='\x0auniform\x20v'+'ec3\x20materi'+'al_diffuse'+';\x0a\x0a#ifdef\x20'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'detailMode'+'sPS\x22\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20mate'+'rial_diffu'+'se.rgb;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_DIFFUS'+'E_TEXTURE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20albedoT'+'exture\x20=\x20{'+'STD_DIFFUS'+'E_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_DIF'+'FUSE_TEXTU'+'RE_NAME},\x20'+'{STD_DIFFU'+'SE_TEXTURE'+'_UV},\x20text'+'ureBias)).'+'{STD_DIFFU'+'SE_TEXTURE'+'_CHANNEL};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSEDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'albedoDeta'+'il\x20=\x20{STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_DECODE}('+'texture2DB'+'ias({STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'DETAIL_TEX'+'TURE_UV},\x20'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20*=\x20albe'+'doTexture;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSE_VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dAlbedo\x20*'+'=\x20gammaCor'+'rectInput('+'saturate(v'+'VertexColo'+'r.{STD_DIF'+'FUSE_VERTE'+'X_CHANNEL}'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',$C='\x0auniform\x20v'+'ec3\x20materi'+'al_emissiv'+'e;\x0auniform'+'\x20float\x20mat'+'erial_emis'+'siveIntens'+'ity;\x0a\x0avoid'+'\x20getEmissi'+'on()\x20{\x0a\x20\x20\x20'+'\x20dEmission'+'\x20=\x20materia'+'l_emissive'+'\x20*\x20materia'+'l_emissive'+'Intensity;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_TEXT'+'URE\x0a\x20\x20\x20\x20dE'+'mission\x20*='+'\x20{STD_EMIS'+'SIVE_TEXTU'+'RE_DECODE}'+'(texture2D'+'Bias({STD_'+'EMISSIVE_T'+'EXTURE_NAM'+'E},\x20{STD_E'+'MISSIVE_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'EMISSIVE_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_EMISSI'+'VE_VERTEX\x0a'+'\x20\x20\x20\x20dEmiss'+'ion\x20*=\x20gam'+'maCorrectI'+'nput(satur'+'ate(vVerte'+'xColor.{ST'+'D_EMISSIVE'+'_VERTEX_CH'+'ANNEL}));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a',XC='\x0avec4\x20enco'+'deLinear(v'+'ec3\x20source'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'source,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeGa'+'mma(vec3\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec4(pow(s'+'ource\x20+\x200.'+'0000001,\x20v'+'ec3(1.0\x20/\x20'+'2.2)),\x201.0'+');\x0a}\x0a\x0avec4'+'\x20encodeRGB'+'M(vec3\x20sou'+'rce)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20result;'+'\x0a\x20\x20\x20\x20resul'+'t.rgb\x20=\x20po'+'w(source.r'+'gb,\x20vec3(0'+'.5));\x0a\x20\x20\x20\x20'+'result.rgb'+'\x20*=\x201.0\x20/\x20'+'8.0;\x0a\x0a\x20\x20\x20\x20'+'result.a\x20='+'\x20saturate('+'\x20max(\x20max('+'\x20result.r,'+'\x20result.g\x20'+'),\x20max(\x20re'+'sult.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20)\x20);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20ceil(res'+'ult.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x0a\x20\x20\x20\x20r'+'esult.rgb\x20'+'/=\x20result.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0avec4\x20'+'encodeRGBP'+'(vec3\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'//\x20convert'+'\x20incoming\x20'+'linear\x20to\x20'+'gamma(ish)'+'\x0a\x20\x20\x20\x20vec3\x20'+'gamma\x20=\x20po'+'w(source,\x20'+'vec3(0.5))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'the\x20maximu'+'m\x20componen'+'t\x20clamped\x20'+'to\x201..8\x0a\x20\x20'+'\x20\x20float\x20ma'+'xVal\x20=\x20min'+'(8.0,\x20max('+'1.0,\x20max(g'+'amma.x,\x20ma'+'x(gamma.y,'+'\x20gamma.z))'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20storage\x20'+'factor\x0a\x20\x20\x20'+'\x20float\x20v\x20='+'\x201.0\x20-\x20((m'+'axVal\x20-\x201.'+'0)\x20/\x207.0);'+'\x0a\x0a\x20\x20\x20\x20//\x20r'+'ound\x20the\x20v'+'alue\x20for\x20s'+'torage\x20in\x20'+'8bit\x20chann'+'el\x0a\x20\x20\x20\x20v\x20='+'\x20ceil(v\x20*\x20'+'255.0)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(gamma\x20/'+'\x20(-v\x20*\x207.0'+'\x20+\x208.0),\x20v'+');\x20\x20\x20\x20\x0a}\x0a\x0a'+'vec4\x20encod'+'eRGBE(vec3'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20float'+('\x20maxVal\x20=\x20'+'max(source'+'.x,\x20max(so'+'urce.y,\x20so'+'urce.z));\x0a'+'\x20\x20\x20\x20if\x20(ma'+'xVal\x20<\x201e-'+'32)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec4(0,\x200'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20e\x20=\x20'+'ceil(log2('+'maxVal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec4('+'source\x20/\x20p'+'ow(2.0,\x20e)'+',\x20(e\x20+\x20128'+'.0)\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),qC='\x0a\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20combin'+'eColor(lit'+'Args_albed'+'o,\x20litArgs'+'_sheen_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_sp'+'ecularity)'+';\x0a\x0a\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20+=\x20lit'+'Args_emiss'+'ion;\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20=\x20ad'+'dFog(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20ton'+'eMap(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20gam'+'maCorrectO'+'utput(gl_F'+'ragColor.r'+'gb);\x0a',jC='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20floa'+'t\x20atlasSiz'+'e\x20=\x20512.0;'+'\x0aconst\x20flo'+'at\x20seamSiz'+'e\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0avec2\x20ma'+'pUv(vec2\x20u'+'v,\x20vec4\x20re'+'ct)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(mix(rect'+'.x\x20+\x20seamS'+'ize,\x20rect.'+'x\x20+\x20rect.z'+'\x20-\x20seamSiz'+'e,\x20uv.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mix('+'rect.y\x20+\x20s'+'eamSize,\x20r'+'ect.y\x20+\x20re'+'ct.w\x20-\x20sea'+'mSize,\x20uv.'+'y));\x0a}\x0a\x0a//'+'\x20map\x20a\x20nor'+'malized\x20eq'+'uirect\x20UV\x20'+'and\x20roughn'+'ess\x20level\x20'+'to\x20the\x20cor'+'rect\x20atlas'+'\x20rect.\x0avec'+'2\x20mapRough'+'nessUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'0,\x201.0\x20-\x20t'+',\x20t,\x20t\x20*\x200'+'.5));\x0a}\x0a\x0a/'+'/\x20map\x20shin'+'y\x20level\x20UV'+'\x0avec2\x20mapS'+'hinyUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'1.0\x20-\x20t,\x201'+'.0\x20-\x20t,\x20t,'+'\x20t\x20*\x200.5))'+';\x0a}\x0a\x0a#endi'+'f\x0a',YC='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20float\x20sky'+'boxIntensi'+'ty;\x0a#endif'+'\x0a\x0avec3\x20pro'+'cessEnviro'+'nment(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20skybo'+'xIntensity'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',KC='\x0afloat\x20get'+'FalloffWin'+'dow(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'sqrDist\x20=\x20'+'dot(lightD'+'ir,\x20lightD'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20invRa'+'dius\x20=\x201.0'+'\x20/\x20lightRa'+'dius;\x0a\x20\x20\x20\x20'+'return\x20squ'+'are(satura'+'te(1.0\x20-\x20s'+'quare(sqrD'+'ist\x20*\x20squa'+'re(invRadi'+'us))));\x0a}\x0a'+'\x0afloat\x20get'+'FalloffInv'+'Squared(fl'+'oat\x20lightR'+'adius,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20sqrDis'+'t\x20=\x20dot(li'+'ghtDir,\x20li'+'ghtDir);\x0a\x20'+'\x20\x20\x20float\x20f'+'alloff\x20=\x201'+'.0\x20/\x20(sqrD'+'ist\x20+\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20invRadiu'+'s\x20=\x201.0\x20/\x20'+'lightRadiu'+'s;\x0a\x0a\x20\x20\x20\x20fa'+'lloff\x20*=\x201'+'6.0;\x0a\x20\x20\x20\x20f'+'alloff\x20*=\x20'+'square(sat'+'urate(1.0\x20'+'-\x20square(s'+'qrDist\x20*\x20s'+'quare(invR'+'adius))));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20falloff'+';\x0a}\x0a',ZC='\x0afloat\x20get'+'FalloffLin'+'ear(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20length'+'(lightDir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20max(((l'+'ightRadius'+'\x20-\x20d)\x20/\x20li'+'ghtRadius)'+',\x200.0);\x0a}\x0a',QC='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x0ave'+'c4\x20float2u'+'int(float\x20'+'value)\x20{\x0a\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20fl'+'oatBitsToU'+'int(value)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20vec4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((intBit'+'s\x20>>\x2024u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((intBits'+'\x20>>\x2016u)\x20&'+'\x200xFFu)\x20/\x20'+'255.0,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'((intBits\x20'+'>>\x208u)\x20&\x200'+'xFFu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(i'+'ntBits\x20&\x200'+'xFFu)\x20/\x2025'+'5.0\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0a//\x20dec'+'ode\x20RGBA8\x20'+'value\x20to\x20f'+'loat\x0afloat'+'\x20uint2floa'+'t(vec4\x20val'+'ue)\x20{\x0a\x20\x20\x20\x20'+'uint\x20intBi'+'ts\x20=\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20(uint('+'value.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(value.g\x20*'+'\x20255.0)\x20<<'+'\x2016u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20(uin'+'t(value.b\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uint'+'(value.a\x20*'+'\x20255.0);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20uintBitsT'+'oFloat(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0av'+'ec4\x20float2'+'vec4(float'+'\x20value)\x20{\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(CAPS'+'_TEXTURE_F'+'LOAT_RENDE'+'RABLE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4(val'+'ue,\x201.0,\x201'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20float'+'2uint(valu'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0a#e'+'ndif\x20//\x20FL'+'OAT_AS_UIN'+'T\x0a',JC='\x0a\x0afloat\x20dB'+'lendModeFo'+'gFactor\x20=\x20'+'1.0;\x0a\x0a#if\x20'+'(FOG\x20!=\x20NO'+'NE)\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20fog_color'+';\x0a\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20f'+'og_start;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20fog_end;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20fog_den'+'sity;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afloat'+'\x20getFogFac'+'tor()\x20{\x0a\x0a\x20'+'\x20\x20\x20float\x20d'+'epth\x20=\x20gl_'+'FragCoord.'+'z\x20/\x20gl_Fra'+'gCoord.w;\x0a'+'\x20\x20\x20\x20float\x20'+'fogFactor\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20#if\x20(FOG'+'\x20==\x20LINEAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fogFactor\x20'+'=\x20(fog_end'+'\x20-\x20depth)\x20'+'/\x20(fog_end'+'\x20-\x20fog_sta'+'rt);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fogF'+'actor\x20=\x20ex'+'p(-depth\x20*'+'\x20fog_densi'+'ty);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP2)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fog'+'Factor\x20=\x20e'+'xp(-depth\x20'+'*\x20depth\x20*\x20'+'fog_densit'+'y\x20*\x20fog_de'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(fog'+'Factor,\x200.'+'0,\x201.0);\x0a}'+'\x0a\x0avec3\x20add'+'Fog(vec3\x20c'+'olor)\x20{\x0a\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'fog_color\x20'+'*\x20dBlendMo'+'deFogFacto'+'r,\x20color,\x20'+'getFogFact'+'or());\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'color;\x0a}\x0a',e1='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0ave'+'c3\x20getFres'+'nel(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20c'+'osTheta,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20specu'+'larity\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20vec3'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a\x20\x20\x20\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20fresnel\x20'+'=\x20pow(1.0\x20'+'-\x20saturate'+'(cosTheta)'+',\x205.0);\x0a\x20\x20'+'\x20\x20float\x20gl'+'ossSq\x20=\x20gl'+'oss\x20*\x20glos'+'s;\x0a\x20\x20\x20\x20vec'+'3\x20ret\x20=\x20sp'+'ecularity\x20'+'+\x20(max(vec'+'3(glossSq)'+',\x20specular'+'ity)\x20-\x20spe'+'cularity)\x20'+'*\x20fresnel;'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20return'+'\x20mix(ret,\x20'+'iridescenc'+'eFresnel,\x20'+'iridescenc'+'eIntensity'+');\x0a#else\x0a\x20'+'\x20\x20\x20return\x20'+'ret;\x0a#endi'+'f\x20\x20\x20\x20\x0a}\x0a\x0af'+'loat\x20getFr'+'esnelCC(fl'+'oat\x20cosThe'+'ta)\x20{\x0a\x20\x20\x20\x20'+'float\x20fres'+'nel\x20=\x20pow('+'1.0\x20-\x20satu'+'rate(cosTh'+'eta),\x205.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x200.04\x20+\x20'+'(1.0\x20-\x200.0'+'4)\x20*\x20fresn'+'el;\x0a}\x0a',t1='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x0avaryin'+'g\x20vec2\x20vUv'+'0;\x0a\x0avoid\x20m'+'ain(void)\x0a'+'{\x0a\x20\x20\x20\x20gl_P'+'osition\x20=\x20'+'vec4(verte'+'x_position'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20vUv'+'0\x20=\x20vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x200.5;\x0a}\x0a',s1='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(color)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ga'+'mmaCorrect'+'Input(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGamma(col'+'or);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20gammaCorr'+'ectInput(v'+'ec4\x20color)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4(decodeG'+'amma(color'+'.xyz),\x20col'+'or.w);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20gammaCo'+'rrectOutpu'+'t(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20pow(color'+'\x20+\x200.00000'+'01,\x20vec3(1'+'.0\x20/\x202.2))'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'else\x20//\x20NO'+'NE\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectInp'+'ut(vec3\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20gamma'+'CorrectInp'+'ut(vec4\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectOut'+'put(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20color;\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a',i1='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0auni'+'form\x20float'+'\x20material_'+'gloss;\x0a#en'+'dif\x0a\x0avoid\x20'+'getGlossin'+'ess()\x20{\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_GLO'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20*='+'\x20material_'+'gloss;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_GLOSS_'+'TEXTURE\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20*=\x20tex'+'ture2DBias'+'({STD_GLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_GLOSS_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_G'+'LOSS_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_INVE'+'RT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x201.0\x20-\x20dGl'+'ossiness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20+='+'\x200.0000001'+';\x0a}\x0a',r1='\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tion;\x0a\x0a//\x20'+'project\x20th'+'e\x20model\x20sp'+'ace\x20gaussi'+'an\x20center\x20'+'to\x20view\x20an'+'d\x20clip\x20spa'+'ce\x0abool\x20in'+'itCenter(v'+'ec3\x20modelC'+'enter,\x20out'+'\x20SplatCent'+'er\x20center)'+'\x20{\x0a\x20\x20\x20\x20mat'+'4\x20modelVie'+'w\x20=\x20matrix'+'_view\x20*\x20ma'+'trix_model'+';\x0a\x20\x20\x20\x20vec4'+'\x20centerVie'+'w\x20=\x20modelV'+'iew\x20*\x20vec4'+'(modelCent'+'er,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly\x20out\x20if'+'\x20splat\x20is\x20'+'behind\x20the'+'\x20camera\x0a\x20\x20'+'\x20\x20if\x20(cent'+'erView.z\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20false;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20vec4\x20cent'+'erProj\x20=\x20m'+'atrix_proj'+'ection\x20*\x20c'+'enterView;'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nsure\x20gaus'+'sians\x20are\x20'+'not\x20clippe'+'d\x20by\x20camer'+'a\x20near\x20and'+'\x20far\x0a\x20\x20\x20\x20#'+'if\x20WEBGPU\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ce'+'nterProj.z'+'\x20=\x20clamp(c'+'enterProj.'+'z,\x200,\x20abs('+'centerProj'+'.w));\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20center'+'Proj.z\x20=\x20c'+'lamp(cente'+'rProj.z,\x20-'+'abs(center'+'Proj.w),\x20a'+'bs(centerP'+'roj.w));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20cente'+'r.view\x20=\x20c'+'enterView.'+'xyz\x20/\x20cent'+'erView.w;\x0a'+'\x20\x20\x20\x20center'+'.proj\x20=\x20ce'+'nterProj;\x0a'+'\x20\x20\x20\x20center'+'.projMat00'+'\x20=\x20matrix_'+'projection'+'[0][0];\x0a\x20\x20'+'\x20\x20center.m'+'odelView\x20='+'\x20modelView'+';\x0a\x20\x20\x20\x20retu'+'rn\x20true;\x0a}'+'\x0a',a1='\x0a\x0auniform\x20'+'mediump\x20sa'+'mpler2D\x20sp'+'latColor;\x0a'+'\x0a//\x20:\x200'+'.0\x20~\x201.0\x20'+'\x0afl'+'oat\x20comput'+'eAlpha(flo'+'at\x20muT,\x20fl'+'oat\x20uTime,'+'\x20float\x20uFa'+'deSpeed,\x20f'+'loat\x20life)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20age\x20=\x20('+'uTime\x20-\x20mu'+'T)\x20*\x202.0;\x20'+'//\x20'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'muT\x20>\x20uTim'+'e)\x20return\x20'+'0.0;\x0a\x0a\x20\x20\x20\x20'+'//\x20---\x20'+'\x20life\x20'+'---\x0a\x20\x20\x20\x20fl'+'oat\x20linear'+'Fade\x20=\x201.0'+'\x20-\x20age\x20/\x20l'+'ife;\x0a\x20\x20\x20\x20/'+'/\x20---\x20'+'\x20uFadeS'+'peed\x20---\x0a\x20'+'\x20\x20\x20float\x20e'+'xpFade\x20=\x20e'+'xp(-age\x20*\x20'+'uFadeSpeed'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20cl'+'amp(linear'+'Fade,\x200.0,'+'\x201.0);\x20\x0a\x20\x20'+'\x20\x20return\x20c'+'lamp(expFa'+'de,\x200.0,\x201'+'.0);\x0a}\x0a\x0a\x0av'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20uTime,\x20'+'bool\x20plusA'+',\x20int\x20poin'+'tCloudMode'+'Enabled)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'color\x20=\x20te'+'xelFetch(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a\x20\x20\x20\x20'+'#ifdef\x20IS_'+'4D\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20tDat'+'a\x20=\x20texelF'+'etch(trans'+'formLifecy'+'cle,\x20sourc'+'e.uv,\x200).x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20muT'+'\x20=\x20tData.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20saveA'+'\x20=\x20pointCl'+'oudModeEna'+'bled\x20==\x201\x20'+'?\x201.0\x20:\x20co'+'lor.a;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20alpha\x20=\x20s'+'aveA;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(uOp'+'enAnim\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20alp'+'ha\x20=\x20alpha'+'\x20*\x20(muT\x20-\x20'+'uTime\x20+\x200.'+'05);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20age\x20=\x20u'+'Time\x20-\x20muT'+';\x20\x20\x20\x20//\x20'+'\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20uFad'+'eSpeed\x20=\x202'+('.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20life\x20=\x200'+'.1;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20alph'+'a\x20=\x20comput'+'eAlpha(muT'+',\x20uTime,\x20u'+'FadeSpeed,'+'\x20life);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'alpha\x20*=\x20a'+'lpha;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor.a\x20=\x20p'+'lusA\x20?\x20alp'+'ha\x20:\x20saveA'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20ret'+'urn\x20color;'+'\x0a}\x0a\x0a'),n1='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20uint\x20o'+'rder;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20uint\x20i'+'d;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'ivec2\x20uv;\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20vec2'+'\x20cornerUV;'+'\x20\x20\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a};\x0a'+'\x0a//\x20stores'+'\x20the\x20camer'+'a\x20and\x20clip'+'\x20space\x20pos'+'ition\x20of\x20t'+'he\x20gaussia'+'n\x20center\x0as'+'truct\x20Spla'+'tCenter\x20{\x0a'+'\x20\x20\x20\x20vec3\x20v'+'iew;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cen'+'ter\x20in\x20vie'+'w\x20space\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'j;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'mat4\x20model'+'View;\x20\x20\x20\x20\x20'+'//\x20model-v'+'iew\x20matrix'+'\x0a\x20\x20\x20\x20float'+'\x20projMat00'+';\x20\x20\x20\x20//\x20el'+'ement\x20[0]['+'0]\x20of\x20the\x20'+'projection'+'\x20matrix\x0a};'+'\x0a\x0a//\x20store'+'s\x20the\x20offs'+'et\x20from\x20ce'+'nter\x20for\x20t'+'he\x20current'+'\x20gaussian\x0a'+'struct\x20Spl'+'atCorner\x20{'+'\x0a\x20\x20\x20\x20vec2\x20'+'offset;\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'rner\x20offse'+'t\x20from\x20cen'+'ter\x20in\x20cli'+'p\x20space\x0a\x20\x20'+'\x20\x20vec2\x20uv;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20aaF'+'actor;\x20//\x20'+'for\x20scenes'+'\x20generated'+'\x20with\x20anti'+'aliasing\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20vec2\x20'+'v;\x0a\x20\x20\x20\x20flo'+'at\x20dlen;\x0a\x20'+'\x20\x20\x20vec2\x20cS'+'ize;\x0a\x20\x20\x20\x20v'+'ec2\x20cUV;\x0a}'+';\x0a\x0a#includ'+'e\x20\x22gsplatE'+'valSHVS\x22\x0a#'+'include\x20\x22g'+'splatQuatT'+'oMat3VS\x22\x0a\x0a'+'#if\x20GSPLAT'+'_COMPRESSE'+('D_DATA\x20==\x20'+'true\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatCompr'+'essedDataV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_COEFFS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x20='+'=\x20true\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22gsplatSog'+'sDataVS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSo'+'gsSHVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'else\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatDataV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22gsp'+'latColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0avoi'+'d\x20clipCorn'+'er(inout\x20S'+'platCorner'+'\x20corner,\x20f'+'loat\x20alpha'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20clip\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20255.'+'0\x20/\x20alpha)'+')\x20/\x202.0);\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20*='+'\x20clip;\x0a\x20\x20\x20'+'\x20corner.uv'+'\x20*=\x20clip;\x0a'+'}\x0a'),o1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTimeText'+'ure;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20c'+'hunkTextur'+'e;\x0a\x0a//\x20wor'+'k\x20values\x0av'+'ec4\x20chunkD'+'ataA;\x20\x20\x20\x20/'+'/\x20x:\x20min_x'+',\x20y:\x20min_y'+',\x20z:\x20min_z'+',\x20w:\x20max_x'+'\x0avec4\x20chun'+'kDataB;\x20\x20\x20'+'\x20//\x20x:\x20max'+'_y,\x20y:\x20max'+'_z,\x20z:\x20sca'+'le_min_x,\x20'+'w:\x20scale_m'+'in_y\x0avec4\x20'+'chunkDataC'+';\x20\x20\x20\x20//\x20x:'+'\x20scale_min'+'_z,\x20y:\x20sca'+'le_max_x,\x20'+'z:\x20scale_m'+'ax_y,\x20w:\x20s'+'cale_max_z'+'\x0avec4\x20chun'+'kDataD;\x20\x20\x20'+'\x20//\x20x:\x20min'+'_r,\x20y:\x20min'+'_g,\x20z:\x20min'+'_b,\x20w:\x20max'+'_r\x0avec4\x20ch'+'unkDataE;\x20'+'\x20\x20\x20//\x20x:\x20m'+'ax_g,\x20y:\x20m'+'ax_b,\x20z:\x20m'+'in_motion_'+'x,\x20w:\x20min_'+'motion_y\x0av'+'ec4\x20chunkD'+'ataF;\x20\x20\x20\x20/'+'/\x20x:\x20min_m'+'otion_z,\x20y'+':\x20max_moti'+'on_x,\x20z:\x20m'+'ax_motion_'+'y,\x20w:\x20max_'+'motion_z\x0av'+'ec4\x20chunkD'+'ataT;\x20\x20\x20\x20/'+'/\x20x:\x20min_t'+'ime,\x20y:\x20ma'+'x_time,\x20z:'+'\x20min_time_'+'scale,\x20w:\x20'+'max_time_s'+'cale\x0auvec4'+'\x20packedDat'+'a;\x20\x20\x20//\x20x:'+'\x20position\x20'+'bits,\x20y:\x20r'+'otation\x20bi'+'ts,\x20z:\x20sca'+'le\x20bits,\x20w'+':\x20color\x20bi'+'ts\x0auvec2\x20p'+'ackedT;\x20\x20\x20'+'//\x20x:\x20moti'+'on\x20bits(x,'+'\x20y,\x20z),\x20y:'+'\x20time\x20bits'+'(t_scale,\x20'+'t,\x20unused)'+'\x0a\x0a//\x20tool\x20'+'for\x20comput'+'e\x20Marginal'+'\x20time\x0afloa'+'t\x20computeM'+'arginalT(f'+'loat\x20time,'+'\x20float\x20muT'+',\x20float\x20si'+'gmaT)\x20{\x0a\x20\x20'+'\x20\x20if\x20(muT\x20'+'<=\x20-10.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20float\x20re'+('sult\x20=\x20exp'+'(-0.5\x20*\x20(p'+'ow((time\x20-'+'\x20muT),\x202.0'+')\x20/\x20pow(si'+'gmaT,\x202.0)'+'));\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0avec3'+'\x20unpack111'+'011(uint\x20b'+'its)\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'c3(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float(bi'+'ts\x20>>\x2021u)'+'\x20/\x202047.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((bits'+'\x20>>\x2011u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at(bits\x20&\x20'+'0x7ffu)\x20/\x20'+'2047.0\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0avec'+'4\x20unpack88'+'88(uint\x20bi'+'ts)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float(bit'+'s\x20>>\x2024u)\x20'+'/\x20255.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((bits\x20>'+'>\x2016u)\x20&\x200'+'xffu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(('+'bits\x20>>\x208u'+')\x20&\x200xffu)'+'\x20/\x20255.0,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat(bits\x20&'+'\x200xffu)\x20/\x20'+'255.0\x0a\x20\x20\x20\x20'+');\x0a}\x0a\x0acons'+'t\x20float\x20no'+'rm\x20=\x201.0\x20/'+'\x20(sqrt(2.0'+')\x20*\x200.5);\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20a\x20=\x20(f'+'loat((bits'+'\x20>>\x2020u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0\x20-\x20'+'0.5)\x20*\x20nor'+'m;\x0a\x20\x20\x20\x20flo'+'at\x20b\x20=\x20(fl'+'oat((bits\x20'+'>>\x2010u)\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20(flo'+'at(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20m\x20=\x20sqrt'+'(1.0\x20-\x20(a\x20'+'*\x20a\x20+\x20b\x20*\x20'+'b\x20+\x20c\x20*\x20c)'+');\x0a\x0a\x20\x20\x20\x20ui'+'nt\x20mode\x20=\x20'+'bits\x20>>\x2030'+'u;\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x200'+'u)\x20return\x20'+'vec4(m,\x20a,'+'\x20b,\x20c);\x0a\x20\x20'+'\x20\x20if\x20(mode'+'\x20==\x201u)\x20re'+'turn\x20vec4('+'a,\x20m,\x20b,\x20c'+');\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x202'+'u)\x20return\x20'+'vec4(a,\x20b,'+'\x20m,\x20c);\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4(a,\x20b,\x20')+('c,\x20m);\x0a}\x0a\x0a'+'\x0a//\x20read\x20c'+'enter\x0avec3'+'\x20readCente'+'r(SplatSou'+'rce\x20source'+')\x20{\x0a\x20\x20\x20\x20ui'+'nt\x20w\x20=\x20uin'+'t(textureS'+'ize(chunkT'+'exture,\x200)'+'.x)\x20/\x205u;\x0a'+'\x20\x20\x20\x20uint\x20c'+'hunkId\x20=\x20s'+'ource.id\x20/'+'\x20256u;\x0a\x20\x20\x20'+'\x20ivec2\x20chu'+'nkUV\x20=\x20ive'+'c2((chunkI'+'d\x20%\x20w)\x20*\x205'+'u,\x20chunkId'+'\x20/\x20w);\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'chunk\x20and\x20'+'packed\x20com'+'pressed\x20da'+'ta\x0a\x20\x20\x20\x20chu'+'nkDataA\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV,\x200);\x0a\x20\x20'+'\x20\x20chunkDat'+'aB\x20=\x20texel'+'Fetch(chun'+'kTexture,\x20'+'chunkUV\x20+\x20'+'ivec2(1,\x200'+'),\x200);\x0a\x20\x20\x20'+'\x20chunkData'+'C\x20=\x20texelF'+'etch(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20i'+'vec2(2,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataD'+'\x20=\x20texelFe'+'tch(chunkT'+'exture,\x20ch'+'unkUV\x20+\x20iv'+'ec2(3,\x200),'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataE\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(4,\x200),\x20'+'0);\x0a\x20\x20\x20\x20pa'+'ckedData\x20='+'\x20texelFetc'+'h(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ch'+'unkDataA.x'+'yz,\x20vec3(c'+'hunkDataA.'+'w,\x20chunkDa'+'taB.xy),\x20u'+'npack11101'+'1(packedDa'+'ta.x));\x0a}\x0a'+'\x0avec4\x20read'+'Color(in\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'r\x20=\x20unpack'+'8888(packe'+'dData.w);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4(mix('+'chunkDataD'+'.xyz,\x20vec3'+'(chunkData'+'D.w,\x20chunk'+'DataE.xy),'+'\x20r.rgb),\x20r'+'.w);\x0a}\x0a\x0ave'+'c4\x20getRota'+'tion()\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'unpackRota'+'tion(packe'+'dData.y);\x0a'+'}\x0a\x0avec3\x20ge'+'tScale()\x20{')+('\x0a\x20\x20\x20\x20retur'+'n\x20exp(mix('+'vec3(chunk'+'DataB.zw,\x20'+'chunkDataC'+'.x),\x20chunk'+'DataC.yzw,'+'\x20unpack111'+'011(packed'+'Data.z)));'+'\x0a}\x0a\x0a//\x20giv'+'en\x20a\x20rotat'+'ion\x20matrix'+'\x20and\x20scale'+'\x20vector,\x20c'+'ompute\x203d\x20'+'covariance'+'\x20A\x20and\x20B\x0av'+'oid\x20readCo'+'variance(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20covA,\x20out'+'\x20vec3\x20covB'+')\x20{\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3('+'getRotatio'+'n());\x0a\x20\x20\x20\x20'+'vec3\x20scale'+'\x20=\x20getScal'+'e();\x0a\x0a\x20\x20\x20\x20'+'//\x20M\x20=\x20S\x20*'+'\x20R\x0a\x20\x20\x20\x20mat'+'3\x20M\x20=\x20tran'+'spose(mat3'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'scale.x\x20*\x20'+'rot[0],\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20scal'+'e.y\x20*\x20rot['+'1],\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale.z\x20'+'*\x20rot[2]\x0a\x20'+'\x20\x20\x20));\x0a\x0a\x20\x20'+'\x20\x20covA\x20=\x20v'+'ec3(dot(M['+'0],\x20M[0]),'+'\x20dot(M[0],'+'\x20M[1]),\x20do'+'t(M[0],\x20M['+'2]));\x0a\x20\x20\x20\x20'+'covB\x20=\x20vec'+'3(dot(M[1]'+',\x20M[1]),\x20d'+'ot(M[1],\x20M'+'[2]),\x20dot('+'M[2],\x20M[2]'+'));\x0a}\x0a\x0aflo'+'at\x20getMarg'+'inalT(in\x20S'+'platSource'+'\x20source,\x20i'+'n\x20float\x20ti'+'me)\x20{\x0a\x20\x20\x20\x20'+'float\x20marg'+'inal\x20=\x201.0'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20IS_4D\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20chu'+'nkDataT\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(6,\x200),\x200)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'packedT\x20=\x20'+'texelFetch'+'(packedTim'+'eTexture,\x20'+'source.uv,'+'\x200).xy;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20timeData\x20'+'=\x20mix(vec3'+'(chunkData'+'T.z,\x20chunk'+'DataT.x,\x200'+'),\x20vec3(ch'+'unkDataT.w'+',\x20chunkDat'+'aT.y,\x201),\x20'+'unpack1110'+'11(packedT'+'.y));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'tScale\x20=\x20e'+'xp(timeDat')+('a.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'muT\x20=\x20time'+'Data.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20marg'+'inal\x20=\x20com'+'puteMargin'+'alT(time,\x20'+'muT,\x20tScal'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20r'+'eturn\x20marg'+'inal;\x0a}\x0a\x0av'+'ec3\x20readCe'+'nter4D(Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20time)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(chunkText'+'ure,\x200).x)'+'\x20/\x207u;\x0a\x20\x20\x20'+'\x20uint\x20chun'+'kId\x20=\x20sour'+'ce.id\x20/\x2025'+'6u;\x0a\x20\x20\x20\x20iv'+'ec2\x20chunkU'+'V\x20=\x20ivec2('+'(chunkId\x20%'+'\x20w)\x20*\x207u,\x20'+'chunkId\x20/\x20'+'w);\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20chu'+'nk\x20and\x20pac'+'ked\x20compre'+'ssed\x20data\x0a'+'\x20\x20\x20\x20chunkD'+'ataA\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV,'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataB\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(1,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataC\x20='+'\x20texelFetc'+'h(chunkTex'+'ture,\x20chun'+'kUV\x20+\x20ivec'+'2(2,\x200),\x200'+');\x0a\x20\x20\x20\x20chu'+'nkDataD\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(3,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataE\x20=\x20t'+'exelFetch('+'chunkTextu'+'re,\x20chunkU'+'V\x20+\x20ivec2('+'4,\x200),\x200);'+'\x0a\x20\x20\x20\x20chunk'+'DataF\x20=\x20te'+'xelFetch(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20ivec2(5'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataT\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV\x20'+'+\x20ivec2(6,'+'\x200),\x200);\x0a\x20'+'\x20\x20\x20packedD'+'ata\x20=\x20texe'+'lFetch(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20packedT\x20='+'\x20texelFetc'+'h(packedTi'+'meTexture,'+'\x20source.uv'+',\x200).xy;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20mix(chu')+('nkDataA.xy'+'z,\x20vec3(ch'+'unkDataA.w'+',\x20chunkDat'+'aB.xy),\x20un'+'pack111011'+'(packedDat'+'a.x));\x0a\x20\x20\x20'+'\x20#ifdef\x20IS'+'_4D\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20tim'+'e\x20=\x20mix(ve'+'c3(chunkDa'+'taT.z,\x20chu'+'nkDataT.x,'+'\x200),\x20vec3('+'chunkDataT'+'.w,\x20chunkD'+'ataT.y,\x201)'+',\x20unpack11'+'1011(packe'+'dT.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20muT\x20=\x20ti'+'me.y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'ovingSpeed'+'\x20=\x20mix(vec'+'3(chunkDat'+'aE.zw,\x20chu'+'nkDataF.x)'+',\x20chunkDat'+'aF.yzw,\x20un'+'pack111011'+'(packedT.x'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20spl'+'atOffset\x20='+'\x20movingSpe'+'ed\x20*\x20(time'+'\x20-\x20muT);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20spl'+'atCenter\x20+'+'=\x20splatOff'+'set;\x0a\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'return\x20spl'+'atCenter;\x0a'+'}\x0a'),l1='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20shText'+'ure0;\x0aunif'+'orm\x20highp\x20'+'usampler2D'+'\x20shTexture'+'1;\x0auniform'+'\x20highp\x20usa'+'mpler2D\x20sh'+'Texture2;\x0a'+'\x0avec4\x20unpa'+'ck8888s(in'+'\x20uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'(uvec4(bit'+'s)\x20>>\x20uvec'+'4(0u,\x208u,\x20'+'16u,\x2024u))'+'\x20&\x200xffu)\x20'+'*\x20(8.0\x20/\x202'+'55.0)\x20-\x204.'+'0;\x0a}\x0a\x0avoid'+'\x20readSHDat'+'a(in\x20Splat'+'Source\x20sou'+'rce,\x20out\x20v'+'ec3\x20sh[15]'+',\x20out\x20floa'+'t\x20scale)\x20{'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20the\x20sh\x20'+'coefficien'+'ts\x0a\x20\x20\x20\x20uve'+'c4\x20shData0'+'\x20=\x20texelFe'+'tch(shText'+'ure0,\x20sour'+'ce.uv,\x200);'+'\x0a\x20\x20\x20\x20uvec4'+'\x20shData1\x20='+'\x20texelFetc'+'h(shTextur'+'e1,\x20source'+'.uv,\x200);\x0a\x20'+'\x20\x20\x20uvec4\x20s'+'hData2\x20=\x20t'+'exelFetch('+'shTexture2'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec4\x20r0\x20'+'=\x20unpack88'+'88s(shData'+'0.x);\x0a\x20\x20\x20\x20'+'vec4\x20r1\x20=\x20'+'unpack8888'+'s(shData0.'+'y);\x0a\x20\x20\x20\x20ve'+'c4\x20r2\x20=\x20un'+'pack8888s('+'shData0.z)'+';\x0a\x20\x20\x20\x20vec4'+'\x20r3\x20=\x20unpa'+'ck8888s(sh'+'Data0.w);\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'g0\x20=\x20unpac'+'k8888s(shD'+'ata1.x);\x0a\x20'+'\x20\x20\x20vec4\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20vec4\x20g2\x20='+'\x20unpack888'+'8s(shData1'+'.z);\x0a\x20\x20\x20\x20v'+'ec4\x20g3\x20=\x20u'+'npack8888s'+'(shData1.w'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20b0\x20=\x20un'+'pack8888s('+'shData2.x)'+';\x0a\x20\x20\x20\x20vec4'+'\x20b1\x20=\x20unpa'+'ck8888s(sh'+'Data2.y);\x0a'+'\x20\x20\x20\x20vec4\x20b'+'2\x20=\x20unpack'+'8888s(shDa'+'ta2.z);\x0a\x20\x20'+'\x20\x20vec4\x20b3\x20'+'=\x20unpack88'+'88s(shData'+'2.w);\x0a\x0a\x20\x20\x20'+('\x20sh[0]\x20=\x20\x20'+'vec3(r0.x,'+'\x20g0.x,\x20b0.'+'x);\x0a\x20\x20\x20\x20sh'+'[1]\x20=\x20\x20vec'+'3(r0.y,\x20g0'+'.y,\x20b0.y);'+'\x0a\x20\x20\x20\x20sh[2]'+'\x20=\x20\x20vec3(r'+'0.z,\x20g0.z,'+'\x20b0.z);\x0a\x20\x20'+'\x20\x20sh[3]\x20=\x20'+'\x20vec3(r0.w'+',\x20g0.w,\x20b0'+'.w);\x0a\x20\x20\x20\x20s'+'h[4]\x20=\x20\x20ve'+'c3(r1.x,\x20g'+'1.x,\x20b1.x)'+';\x0a\x20\x20\x20\x20sh[5'+']\x20=\x20\x20vec3('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3(r1.'+'z,\x20g1.z,\x20b'+'1.z);\x0a\x20\x20\x20\x20'+'sh[7]\x20=\x20\x20v'+'ec3(r1.w,\x20'+'g1.w,\x20b1.w'+');\x0a\x20\x20\x20\x20sh['+'8]\x20=\x20\x20vec3'+'(r2.x,\x20g2.'+'x,\x20b2.x);\x0a'+'\x20\x20\x20\x20sh[9]\x20'+'=\x20\x20vec3(r2'+'.y,\x20g2.y,\x20'+'b2.y);\x0a\x20\x20\x20'+'\x20sh[10]\x20=\x20'+'vec3(r2.z,'+'\x20g2.z,\x20b2.'+'z);\x0a\x20\x20\x20\x20sh'+'[11]\x20=\x20vec'+'3(r2.w,\x20g2'+'.w,\x20b2.w);'+'\x0a\x20\x20\x20\x20sh[12'+']\x20=\x20vec3(r'+'3.x,\x20g3.x,'+'\x20b3.x);\x0a\x20\x20'+'\x20\x20sh[13]\x20='+'\x20vec3(r3.y'+',\x20g3.y,\x20b3'+'.y);\x0a\x20\x20\x20\x20s'+'h[14]\x20=\x20ve'+'c3(r3.z,\x20g'+'3.z,\x20b3.z)'+';\x0a\x0a\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),c1='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20S'+'H_COEFFS\x203'+'\x0a\x20\x20\x20\x20#elif'+'\x20SH_BANDS\x20'+'==\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20SH_COEFFS'+'\x208\x0a\x20\x20\x20\x20#el'+'if\x20SH_BAND'+'S\x20==\x203\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20SH_COEF'+'FS\x2015\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20SH_COEFF'+'S\x200\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x200\x0a\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20SH_C1\x20'+'=\x200.488602'+'5119029199'+'f;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x201\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20f'+'loat\x20SH_C2'+'_0\x20=\x201.092'+'5484305920'+'792f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'2_1\x20=\x20-1.0'+'9254843059'+'20792f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C2_2\x20=\x200.'+'3153915652'+'5252005f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C2_3\x20=\x20'+'-1.0925484'+'305920792f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'const\x20floa'+'t\x20SH_C2_4\x20'+'=\x200.546274'+'2152960396'+'f;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x202\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'3_0\x20=\x20-0.5'+'9004358992'+'66435f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_1\x20=\x202.'+'8906114426'+'40554f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_2\x20=\x20-0'+'.457045799'+'4644658f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C3_3\x20=\x20'+'0.37317633'+'25901154f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20float'+'\x20SH_C3_4\x20='+'\x20-0.457045'+'7994644658'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_5'+'\x20=\x201.44530'+'5721320277'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_6'+'\x20=\x20-0.5900'+'4358992664'+'35f;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20see\x20ht'+'tps://gith'+'ub.com/gra'+'phdeco-inr'+('ia/gaussia'+'n-splattin'+'g/blob/mai'+'n/utils/sh'+'_utils.py\x0a'+'\x20\x20\x20\x20vec3\x20e'+'valSH(in\x20v'+'ec3\x20sh[SH_'+'COEFFS],\x20i'+'n\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20x\x20'+'=\x20dir.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20y\x20=\x20dir'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20z\x20'+'=\x20dir.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201st\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20resul'+'t\x20=\x20SH_C1\x20'+'*\x20(-sh[0]\x20'+'*\x20y\x20+\x20sh[1'+']\x20*\x20z\x20-\x20sh'+'[2]\x20*\x20x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x201\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x202nd\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xx\x20=\x20x\x20*\x20x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yy\x20=\x20y\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'zz\x20=\x20z\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yz\x20=\x20y\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xz\x20=\x20x\x20*\x20z'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[3]\x20*\x20('+'SH_C2_0\x20*\x20'+'xy)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[4]\x20*\x20'+'(SH_C2_1\x20*'+'\x20yz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[5]\x20*'+'\x20(SH_C2_2\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x20xx\x20-\x20y'+'y))\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[6]\x20*\x20'+'(SH_C2_3\x20*'+'\x20xz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20*'+'\x20(SH_C2_4\x20'+'*\x20(xx\x20-\x20yy'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'+=\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20')+('xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20#endif\x0a'),h1='\x0amat3\x20quat'+'ToMat3(vec'+'4\x20R)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20R2\x20='+'\x20R\x20+\x20R;\x0a\x20\x20'+'\x20\x20float\x20X\x20'+'=\x20R2.x\x20*\x20R'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20Y\x20\x20=\x20R2'+'.y\x20*\x20R;\x0a\x20\x20'+'\x20\x20vec4\x20Z\x20\x20'+'=\x20R2.z\x20*\x20R'+';\x0a\x20\x20\x20\x20floa'+'t\x20W\x20=\x20R2.w'+'\x20*\x20R.w;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x201.0\x20-\x20'+'Z.z\x20-\x20W,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20Y.z\x20+\x20X'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20Y.z\x20-\x20X,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x201.'+'0\x20-\x20Y.y\x20-\x20'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20+\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20Y.w\x20+\x20Z.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20-\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',d1='\x0auniform\x20m'+'ediump\x20sam'+'pler2D\x20sh0'+';\x0a\x0auniform'+'\x20vec4\x20sh0_'+'mins;\x0aunif'+'orm\x20vec4\x20s'+'h0_maxs;\x0a\x0a'+'float\x20SH_C'+'0\x20=\x200.2820'+'9479177387'+'814;\x0a\x0avec4'+'\x20readColor'+'(in\x20SplatS'+'ource\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20clr\x20='+'\x20mix(sh0_m'+'ins,\x20sh0_m'+'axs,\x20texel'+'Fetch(sh0,'+'\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(vec3(0.'+'5)\x20+\x20clr.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'clr.w)));\x0a'+'}\x0a',f1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0a\x0auniform\x20'+'vec3\x20means'+'_mins;\x0auni'+'form\x20vec3\x20'+'means_maxs'+';\x0a\x0auniform'+'\x20vec3\x20scal'+'es_mins;\x0au'+'niform\x20vec'+'3\x20scales_m'+'axs;\x0a\x0avec4'+'\x20unpackU32'+'(uint\x20v)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((v\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((v\x20>>'+'\x2016u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float((v'+'\x20>>\x208u)\x20&\x20'+'0xFFu)\x20/\x202'+'55.0,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float('+'v\x20&\x200xFFu)'+'\x20/\x20255.0\x0a\x20'+'\x20\x20\x20);\x0a}\x0a\x0au'+'vec4\x20packe'+'dSample;\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20th'+'e\x20packed\x20t'+'exture\x20sam'+'ple\x0a\x20\x20\x20\x20pa'+'ckedSample'+'\x20=\x20texelFe'+'tch(packed'+'Texture,\x20s'+'ource.uv,\x20'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20l\x20=\x20un'+'packU32(pa'+'ckedSample'+'.x).xyz;\x0a\x20'+'\x20\x20\x20vec3\x20u\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20vec'+'3\x20n\x20=\x20(l\x20*'+'\x20255.0\x20+\x20u'+'\x20*\x20255.0\x20*'+'\x20256.0)\x20/\x20'+'65535.0;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20mix(mean'+'s_mins,\x20me'+'ans_maxs,\x20'+'n);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20sign'+'(v)\x20*\x20(exp'+'(abs(v))\x20-'+'\x201.0);\x0a}\x0a\x0a'+'const\x20floa'+'t\x20norm\x20=\x202'+'.0\x20/\x20sqrt('+'2.0);\x0a\x0a//\x20'+'sample\x20cov'+'ariance\x20ve'+'ctors\x0avoid'+'\x20readCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'qdata\x20=\x20un'+'packU32(pa'+'ckedSample'+'.z);\x0a\x20\x20\x20\x20v'+'ec3\x20sdata\x20'+('=\x20unpackU3'+'2(packedSa'+'mple.w).xy'+'z;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20abc\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20f'+'loat\x20d\x20=\x20s'+'qrt(max(0.'+'0,\x201.0\x20-\x20d'+'ot(abc,\x20ab'+'c)));\x0a\x0a\x20\x20\x20'+'\x20uint\x20mode'+'\x20=\x20uint(qd'+'ata.w\x20*\x2025'+'5.0\x20+\x200.5)'+'\x20-\x20252u;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20q'+'uat\x20=\x20(mod'+'e\x20==\x200u)\x20?'+'\x20vec4(d,\x20a'+'bc)\x20:\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20((mode\x20='+'=\x201u)\x20?\x20ve'+'c4(abc.x,\x20'+'d,\x20abc.yz)'+'\x20:\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20('+'(mode\x20==\x202'+'u)\x20?\x20vec4('+'abc.xy,\x20d,'+'\x20abc.z)\x20:\x20'+'vec4(abc,\x20'+'d)));\x0a\x0a\x20\x20\x20'+'\x20mat3\x20rot\x20'+'=\x20quatToMa'+'t3(quat);\x0a'+'\x20\x20\x20\x20vec3\x20s'+'cale\x20=\x20exp'+'(mix(scale'+'s_mins,\x20sc'+'ales_maxs,'+'\x20sdata));\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20mat3\x20M\x20='+'\x20transpose'+'(mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20cov'+'A\x20=\x20vec3(d'+'ot(M[0],\x20M'+'[0]),\x20dot('+'M[0],\x20M[1]'+'),\x20dot(M[0'+'],\x20M[2]));'+'\x0a\x20\x20\x20\x20covB\x20'+'=\x20vec3(dot'+'(M[1],\x20M[1'+']),\x20dot(M['+'1],\x20M[2]),'+'\x20dot(M[2],'+'\x20M[2]));\x0a}'+'\x0a'),u1='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20sh_ce'+'ntroids;\x0a\x0a'+'uniform\x20fl'+'oat\x20shN_mi'+'ns;\x0aunifor'+'m\x20float\x20sh'+'N_maxs;\x0a\x0a/'+'/\x20To\x20suppo'+'rt\x20each\x20SH'+'\x20degree,\x20r'+'eadSHData\x20'+'is\x20overloa'+'ded\x20based\x20'+'on\x20the\x20SH\x20'+'vector\x20dep'+'th\x20\x0a\x0avoid\x20'+'readSHData'+'(in\x20SplatS'+'ource\x20sour'+'ce,\x20out\x20ve'+'c3\x20sh[SH_C'+'OEFFS],\x20ou'+'t\x20float\x20sc'+'ale)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'ivec2\x20t\x20=\x20'+'ivec2(pack'+'edSample.x'+'\x20&\x20255u,\x20p'+'ackedSampl'+'e.y\x20&\x20255u'+');\x0a\x20\x20\x20\x20int'+'\x20n\x20=\x20t.x\x20+'+'\x20t.y\x20*\x20256'+';\x0a\x20\x20\x20\x20int\x20'+'u\x20=\x20(n\x20%\x206'+'4)\x20*\x20SH_CO'+'EFFS;\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20n\x20'+'/\x2064;\x0a\x0a\x20\x20\x20'+'\x20//\x20calcul'+'ate\x20offset'+'\x20into\x20the\x20'+'centroids\x20'+'texture\x20an'+'d\x20read\x20con'+'secutive\x20t'+'exels\x0a\x20\x20\x20\x20'+'for\x20(int\x20i'+'\x20=\x200;\x20i\x20<\x20'+'SH_COEFFS;'+'\x20i++)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[i'+']\x20=\x20mix(ve'+'c3(shN_min'+'s),\x20vec3(s'+'hN_maxs),\x20'+'texelFetch'+'(sh_centro'+'ids,\x20ivec2'+'(u\x20+\x20i,\x20v)'+',\x200).xyz);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20scale\x20=\x20'+'1.0;\x0a}\x0a',p1='\x0auniform\x20v'+'ec2\x20viewpo'+'rt;\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20viewpo'+'rt\x20dimensi'+'ons\x0aunifor'+'m\x20vec4\x20cam'+'era_params'+';\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x201\x20/'+'\x20far,\x20far,'+'\x20near,\x20isO'+'rtho\x0aunifo'+'rm\x20float\x20u'+'SplatScale'+';\x0auniform\x20'+'float\x20rend'+'erSpace;\x0au'+'niform\x20flo'+'at\x20endSpac'+'e;\x0auniform'+'\x20int\x20uShap'+'eN;\x0a\x0a//\x20ca'+'lculate\x20th'+'e\x20clip-spa'+'ce\x20offset\x20'+'from\x20the\x20c'+'enter\x20for\x20'+'this\x20gauss'+'ian\x0abool\x20i'+'nitCorner('+'SplatSourc'+'e\x20source,\x20'+'SplatCente'+'r\x20center,\x20'+'out\x20SplatC'+'orner\x20corn'+'er,\x20int\x20po'+'intCloudMo'+'deEnabled)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'get\x20covari'+'ance\x0a\x20\x20\x20\x20v'+'ec3\x20covA,\x20'+'covB;\x0a\x20\x20\x20\x20'+'readCovari'+'ance(sourc'+'e,\x20covA,\x20c'+'ovB);\x0a\x0a\x20\x20\x20'+'\x20mat3\x20Vrk\x20'+'=\x20mat3(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20covA'+'.x,\x20covA.y'+',\x20covA.z,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'vA.y,\x20covB'+'.x,\x20covB.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'covA.z,\x20co'+'vB.y,\x20covB'+'.z\x0a\x20\x20\x20\x20);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20focal\x20=\x20v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'v\x20=\x20camera'+'_params.w\x20'+'==\x201.0\x20?\x20v'+'ec3(0.0,\x200'+'.0,\x201.0)\x20:'+'\x20center.vi'+'ew.xyz;\x0a\x20\x20'+'\x20\x20float\x20J1'+'\x20=\x20focal\x20/'+'\x20v.z;\x0a\x20\x20\x20\x20'+'vec2\x20J2\x20=\x20'+'-J1\x20/\x20v.z\x20'+'*\x20v.xy;\x0a\x20\x20'+'\x20\x20mat3\x20J\x20='+'\x20mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20J1,\x200'+'.0,\x20J2.x,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x200.'+'0,\x20J1,\x20J2.'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.0,\x200.0,'+'\x200.0\x0a\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20mat'+'3\x20W\x20=\x20tran'+'spose(mat3'+'(center.mo'+'delView));'+'\x0a\x20\x20\x20\x20mat3\x20'+'T\x20=\x20W\x20*\x20J;'+'\x0a\x20\x20\x20\x20mat3\x20'+'cov\x20=\x20tran'+'spose(T)\x20*'+('\x20Vrk\x20*\x20T;\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'calculate\x20'+'AA\x20factor\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20detOri'+'g\x20=\x20cov[0]'+'[0]\x20*\x20cov['+'1][1]\x20-\x20co'+'v[0][1]\x20*\x20'+'cov[0][1];'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20detBl'+'ur\x20=\x20(cov['+'0][0]\x20+\x200.'+'3)\x20*\x20(cov['+'1][1]\x20+\x200.'+'3)\x20-\x20cov[0'+'][1]\x20*\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20corn'+'er.aaFacto'+'r\x20=\x20sqrt(m'+'ax(detOrig'+'\x20/\x20detBlur'+',\x200.0));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20diagonal1'+'\x20=\x20cov[0]['+'0]\x20+\x200.3;\x0a'+'\x20\x20\x20\x20float\x20'+'offDiagona'+'l\x20=\x20cov[0]'+'[1];\x0a\x20\x20\x20\x20f'+'loat\x20diago'+'nal2\x20=\x20cov'+'[1][1]\x20+\x200'+'.3;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20mid\x20='+'\x200.5\x20*\x20(di'+'agonal1\x20+\x20'+'diagonal2)'+';\x0a\x20\x20\x20\x20floa'+'t\x20radius\x20='+'\x20length(ve'+'c2((diagon'+'al1\x20-\x20diag'+'onal2)\x20/\x202'+'.0,\x20offDia'+'gonal));\x0a\x20'+'\x20\x20\x20float\x20l'+'ambda1\x20=\x20m'+'id\x20+\x20radiu'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20lambda2'+'\x20=\x20max(mid'+'\x20-\x20radius,'+'\x200.1);\x0a\x20\x20\x20'+'\x20if\x20(point'+'CloudModeE'+'nabled\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20l'+'ambda1\x20=\x20l'+'ambda2\x20=\x202'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Us'+'e\x20the\x20smal'+'ler\x20viewpo'+'rt\x20dimensi'+'on\x20to\x20limi'+'t\x20the\x20kern'+'el\x20size\x20re'+'lative\x20to\x20'+'the\x20screen'+'\x20resolutio'+'n.\x0a\x20\x20\x20\x20flo'+'at\x20vmin\x20=\x20'+'min(1024.0'+',\x20min(view'+'port.x,\x20vi'+'ewport.y))'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20l1\x20=\x202.'+'0\x20*\x20min(sq'+'rt(2.0\x20*\x20l'+'ambda1),\x20v'+'min);\x0a\x20\x20\x20\x20'+'float\x20l2\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda2)'+',\x20vmin);\x0a\x0a'+'\x20\x20\x20\x20//\x20ear'+'ly-out\x20gau'+'ssians\x20sma'+'ller\x20than\x20'+'2\x20pixels\x0a\x20')+('\x20\x20\x20if\x20(l1\x20'+'<\x202.0\x20&&\x20l'+'2\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec2\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'viewport;\x0a'+'\x0a\x20\x20\x20\x20//\x20cu'+'ll\x20against'+'\x20frustum\x20x'+'/y\x20axes\x0a\x20\x20'+'\x20\x20if\x20(any('+'greaterTha'+'n(abs(cent'+'er.proj.xy'+')\x20-\x20vec2(m'+'ax(l1,\x20l2)'+')\x20*\x20c,\x20cen'+'ter.proj.w'+'w)))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20false;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec2\x20diago'+'nalVector\x20'+'=\x20normaliz'+'e(vec2(off'+'Diagonal,\x20'+'lambda1\x20-\x20'+'diagonal1)'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20scale\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20bool\x20inRe'+'nderSpace\x20'+'=\x20(center.'+'view.x\x20>=\x20'+'-renderSpa'+'ce\x20&&\x20cent'+'er.view.x\x20'+'<=\x20renderS'+'pace)\x20&&\x20('+'center.vie'+'w.y\x20>=\x20-re'+'nderSpace\x20'+'&&\x20center.'+'view.y\x20<=\x20'+'renderSpac'+'e);\x0a\x20\x20\x20\x20bo'+'ol\x20openRen'+'derAnim\x20=\x20'+'renderSpac'+'e\x20<\x20endSpa'+'ce;\x0a\x20\x20\x20\x20bo'+'ol\x20inRende'+'r\x20=\x20render'+'Space\x20>=\x20e'+'ndSpace\x20||'+'\x20inRenderS'+'pace\x20||\x20po'+'intCloudMo'+'deEnabled\x20'+'==\x201;\x0a\x20\x20\x20\x20'+'if(!openRe'+'nderAnim\x20&'+'&\x20uSplatSc'+'ale\x20>\x200.0\x20'+'&&\x20uSplatS'+'cale\x20<=\x205.'+'0){\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale\x20=\x20'+'uSplatScal'+'e;\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(in'+'Render){\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(openR'+'enderAnim)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'scale\x20=\x20in'+'RenderSpac'+'e\x20?\x20uSplat'+'Scale\x20:\x200.'+'1;\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20vec2\x20v1'+'\x20=\x20scale\x20*'+'\x20l1\x20*\x20diag'+'onalVector'+';\x0a\x20\x20\x20\x20vec2'+'\x20v2\x20=\x20scal'+'e\x20*\x20l2\x20*\x20v'+'ec2(diagon'+'alVector.y'+',\x20-diagona'+'lVector.x)')+(';\x0a\x0a\x20\x20\x20\x20cor'+'ner.offset'+'\x20=\x20(source'+'.cornerUV.'+'x\x20*\x20v1\x20+\x20s'+'ource.corn'+'erUV.y\x20*\x20v'+'2)\x20*\x20c;\x0a\x20\x20'+'\x20\x20//\x20corne'+'r.uv\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20if\x20(uSh'+'apeN\x20<\x203)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'corner.uv\x20'+'=\x20source.c'+'ornerUV;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'corner.cSi'+'ze\x20=\x20(v1\x20+'+'\x20v2)\x20*\x20c;\x0a'+'\x20\x20\x20\x20corner'+'.cUV\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),m1='\x0a\x0auniform\x20'+'highp\x20samp'+'ler2D\x20tran'+'sformA;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20transfor'+'mB;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformR;\x0a'+'\x0a#ifdef\x20IS'+'_4D\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformMot'+'ion;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20t'+'ransformLi'+'fecycle;\x0a#'+'endif\x0a\x0a//\x20'+'work\x20value'+'s\x0a//\x20uint\x20'+'tAw;\x0avec2\x20'+'sampledCov'+'4D;\x0afloat\x20'+'muT;\x0a\x0a//\x20t'+'ool\x20for\x20co'+'mpute\x20Marg'+'inal\x20time\x0a'+'float\x20comp'+'uteMargina'+'lT(float\x20t'+'ime,\x20float'+'\x20muT,\x20floa'+'t\x20sigmaT)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'muT\x20<=\x20-10'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20floa'+'t\x20result\x20='+'\x20exp(-0.5\x20'+'*\x20(pow((ti'+'me\x20-\x20muT),'+'\x202.0)\x20/\x20po'+'w(sigmaT,\x20'+'2.0)));\x0a\x20\x20'+'\x20\x20return\x20r'+'esult;\x0a}\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20retu'+'rn\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a}\x0a\x0ama'+'t3\x20quatToM'+'at3v2(vec4'+'\x20R)\x20{\x0a\x20\x20\x20\x20'+'float\x20x\x20=\x20'+'R.w;\x0a\x20\x20\x20\x20f'+'loat\x20y\x20=\x20R'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20R.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20w\x20=\x20R.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20mat3(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x201.0'+'\x20-\x202.0\x20*\x20('+'z\x20*\x20z\x20+\x20w\x20'+'*\x20w),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'2.0\x20*\x20(y\x20*'+'\x20z\x20+\x20x\x20*\x20w'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x202.0'+'\x20*\x20(y\x20*\x20w\x20'+'-\x20x\x20*\x20z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x202.0\x20*\x20'+'(y\x20*\x20z\x20-\x20x'+'\x20*\x20w),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x201.0\x20-'+'\x202.0\x20*\x20(y\x20'+'*\x20y\x20+\x20w\x20*\x20'+'w),\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x202.'+'0\x20*\x20(z\x20*\x20w'+'\x20+\x20x\x20*\x20y),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x202.0\x20*'+'\x20(y\x20*\x20w\x20+\x20'+'x\x20*\x20z),\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x202.0\x20*\x20(z'+'\x20*\x20w\x20-\x20x\x20*'+'\x20y),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.0\x20-\x202'+'.0\x20*\x20(y\x20*\x20'+'y\x20+\x20z\x20*\x20z)'+'\x0a\x20\x20\x20\x20);\x0a}\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(vec3\x20pack'+'ed)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(packed.x'+'yz,\x20sqrt(m'+'ax(0.0,\x201.'+'0\x20-\x20dot(pa'+'cked,\x20pack'+'ed))));\x0a}\x0a'+'\x0a//\x20sample'+'\x20covarianc'+'e\x20vectors\x0a'+'void\x20readC'+'ovariance('+'in\x20SplatSo'+'urce\x20sourc'+'e,\x20out\x20vec'+'3\x20covA,\x20ou'+'t\x20vec3\x20cov'+'B)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20tB\x20=\x20t'+'exelFetch('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20tR\x20'+'=\x20texelFet'+'ch(transfo'+'rmR,\x20sourc'+'e.uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3v'+'2(unpackRo'+'tation(tR)'+');\x0a\x20\x20\x20\x20vec'+'3\x20scale\x20=\x20'+'tB.xyz;\x0a\x0a\x20'+'\x20\x20\x20//\x20M\x20=\x20'+'S\x20*\x20R\x0a\x20\x20\x20\x20'+'mat3\x20M\x20=\x20t'+'ranspose(m'+'at3(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.x'+'\x20*\x20rot[0],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.y\x20*\x20r'+'ot[1],\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.z\x20*\x20rot[2'+']\x0a\x20\x20\x20\x20));\x0a'+'\x0a\x20\x20\x20\x20covA\x20'+'=\x20vec3(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20covB\x20=\x20'+'vec3(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a\x0a'+'//\x20sample\x20'+'4D\x20covaria'+'nce\x20vector'+'s\x0avoid\x20rea'+'dFTGSCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB,ou'+'t\x20vec4\x20cov'+'ariance4D)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20tB\x20=\x20tex'+'elFetch(tr'+'ansformB,\x20'+'source.uv,')+('\x200);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20tR\x20=\x20'+'texelFetch'+'(transform'+'R,\x20source.'+'uv,\x200).xyz'+';\x0a\x20\x20\x20\x20mat3'+'\x20rot\x20=\x20qua'+'tToMat3v2('+'unpackRota'+'tion(tR));'+'\x0a\x20\x20\x20\x20vec3\x20'+'scale\x20=\x20tB'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x20M\x20=\x20S\x20'+'*\x20R\x0a\x20\x20\x20\x20ma'+'t3\x20M\x20=\x20tra'+'nspose(mat'+'3(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20covA\x20=\x20'+'vec3(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20covB\x20=\x20ve'+'c3(dot(M[1'+'],\x20M[1]),\x20'+'dot(M[1],\x20'+'M[2]),\x20dot'+'(M[2],\x20M[2'+']));\x0a\x0a}\x0a\x0a\x0a'+'float\x20getM'+'arginalT(i'+'n\x20SplatSou'+'rce\x20source'+',\x20in\x20float'+'\x20time)\x20{\x0a\x20'+'\x20\x20\x20float\x20m'+'arginal\x20=\x20'+'1.0;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20filter\x20'+'out\x20splats'+'\x20that\x20have'+'\x20too\x20littl'+'e\x20influenc'+'e\x20to\x20now\x20i'+'n\x20the\x20time'+'\x20dimension'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20tData'+'\x20=\x20texelFe'+'tch(transf'+'ormLifecyc'+'le,\x20source'+'.uv,\x200).xy'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'muT\x20=\x20tDat'+'a.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20t'+'Scale\x20=\x20tD'+'ata.y;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20margi'+'nal\x20=\x20comp'+'uteMargina'+'lT(time,\x20m'+'uT,\x20tScale'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20re'+'turn\x20margi'+'nal;\x0a}\x0a\x0ave'+'c3\x20readCen'+'ter4D(Spla'+'tSource\x20so'+'urce,\x20floa'+'t\x20time)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20if(m'+'uT\x20>\x20-5.0)'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20movin'+'gSpeed\x20=\x20t')+('exelFetch('+'transformM'+'otion,\x20sou'+'rce.uv,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'platOffset'+'\x20=\x20movingS'+'peed\x20*\x20(ti'+'me\x20-\x20muT);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'platCenter'+'\x20+=\x20splatO'+'ffset;\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20spla'+'tCenter;\x0a}'+'\x0a'),_1='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0avec'+'3\x20prepareO'+'utputFromG'+'amma(vec3\x20'+'gammaColor'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20TONEMAP\x20'+'==\x20NONE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'GAMMA\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'onvert\x20to\x20'+'linear\x20spa'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20outp'+'ut\x20gamma\x20s'+'pace\x20color'+'\x20directly\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'ly\x20tonemap'+'ping\x20in\x20li'+'near\x20space'+'\x20and\x20outpu'+'t\x20to\x20linea'+'r\x20or\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20gamm'+'a\x20(which\x20i'+'s\x20handled\x20'+'by\x20gammaCo'+'rrectOutpu'+'t)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ga'+'mmaCorrect'+'Output(ton'+'eMap(decod'+'eGamma(gam'+'maColor)))'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',g1='\x0auniform\x20i'+'nt\x20mode;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x200:\x20c'+'enters,\x201:'+'\x20rings\x0auni'+'form\x20float'+'\x20ringSize;'+'\x0auniform\x20i'+'nt\x20uShapeN'+';\x0a\x0a#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bay'+'erPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'opacityDit'+'herPS\x22\x0a\x20\x20\x20'+'\x20varying\x20f'+'loat\x20id;\x0a#'+'endif\x0a\x0a#if'+'def\x20PICK_P'+'ASS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pi'+'ckPS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20alphaC'+'lip;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20vLinearDe'+'pth;\x0a\x20\x20\x20\x20#'+'include\x20\x22f'+'loatAsUint'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20Fast\x20'+'approximat'+'e\x20e^x\x20base'+'d\x20on\x20https'+'://nic.sch'+'raudolph.o'+'rg/pubs/Sc'+'hraudolph9'+'9.pdf\x0acons'+'t\x20float\x20\x20E'+'XP_A\x20\x20\x20\x20\x20\x20'+'=\x2012102203'+'.0;\x20\x20\x20//\x20'+'\x202^23\x20/\x20ln'+'(2)\x0aconst\x20'+'int\x20\x20\x20\x20EXP'+'_BC_RMS\x20=\x20'+'1064866808'+';\x20\x20\x20//\x20(12'+'7\x20<<\x2023)\x20-'+'\x2060801\x20*\x208'+'\x0afloat\x20fas'+'tExp(float'+'\x20x)\x20{\x0a\x20\x20\x20\x20'+'int\x20i\x20=\x20in'+'t(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20in'+'tBitsToFlo'+'at(i);\x0a}\x0a\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianU'+'V;\x0avarying'+'\x20mediump\x20v'+'ec4\x20gaussi'+'anColor;\x0av'+'arying\x20med'+'iump\x20vec2\x20'+'gaussianSi'+'ze;\x0avaryin'+'g\x20mediump\x20'+'vec2\x20gauss'+'ianCUV;\x0ava'+'rying\x20medi'+'ump\x20float\x20'+'saveMargin'+'al;\x0a\x0a//\x20'+'\x20p\x20\x20N'+'\x20\x0a//\x20p:'+'\x20\x20(UV\x20'+')\x0a//'+'\x20N:\x20\x0a//\x20'+'r:\x20'+('1\x0a/'+'/\x20center:\x20'+'\x0abool\x20'+'insideRegu'+'larPolygon'+'(vec2\x20p,\x20i'+'nt\x20N,\x20floa'+'t\x20r,\x20vec2\x20'+'center)\x20{\x0a'+'\x20\x20\x20\x20//\x20'+'\x0a\x20'+'\x20\x20\x20vec2\x20d\x20'+'=\x20p\x20-\x20cent'+'er;\x0a\x20\x20\x20\x20fl'+'oat\x20theta\x20'+'=\x20atan(d.y'+',\x20d.x);\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20'+'\x0a\x20\x20\x20\x20flo'+'at\x20len\x20=\x20l'+'ength(d);\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20'+'\x0a\x20\x20\x20\x20float'+'\x20anglePerS'+'ide\x20=\x202.0\x20'+'*\x203.141592'+'65\x20/\x20float'+'(N);\x0a\x0a\x20\x20\x20\x20'+'//\x20\x200\x20~'+'\x20anglePerS'+'ide\x20\x0a\x20\x20\x20'+'\x20float\x20loc'+'alAngle\x20=\x20'+'mod(theta,'+'\x20anglePerS'+'ide);\x0a\x0a\x20\x20\x20'+'\x20//\x20'+'\x20'+'N\x20\x0a\x20\x20'+'\x20\x20float\x20ma'+'xR\x20=\x20r\x20*\x20c'+'os(anglePe'+'rSide\x20/\x202.'+'0)\x20/\x20cos(l'+'ocalAngle\x20'+'-\x20anglePer'+'Side\x20/\x202.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20len\x20<'+'=\x20maxR;\x0a}\x0a'+'\x0a//\x20'+'N\x20soft\x20'+'mask\x0afloat'+'\x20polygonSo'+'ftMask(vec'+'2\x20p,\x20int\x20N'+',\x20float\x20ra'+'dius,\x20floa'+'t\x20edgeSoft'+'ness)\x20{\x0a\x20\x20'+'\x20\x20float\x20an'+'gle\x20=\x20atan'+'(p.y,\x20p.x)'+';\x0a\x20\x20\x20\x20floa'+'t\x20sector\x20='+'\x206.2831853'+'\x20/\x20float(N'+');\x20\x20//\x20'+'\x0a\x20\x20\x20\x20//'+'\x20\x20['+'-sector/2,'+'\x20sector/2]'+'\x0a\x20\x20\x20\x20float'+'\x20halfSecto'+'r\x20=\x20sector'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20float\x20lo'+'calAngle\x20='+'\x20mod(angle'+'\x20+\x20halfSec'+'tor,\x20secto'+'r)\x20-\x20halfS'+'ector;\x0a\x0a\x20\x20'+'\x20\x20//\x20'+'\x0a'+'\x20\x20\x20\x20float\x20'+'boundary\x20='+'\x20radius\x20*\x20'+'cos(halfSe'+'ctor)\x20/\x20co'+'s(localAng'+'le);\x0a\x0a\x20\x20\x20\x20'+'//\x20\x20=\x20'+'\x0a\x20\x20\x20\x20'+'float\x20dist'+'\x20=\x20boundar'+'y\x20-\x20length'+'(p);\x0a\x0a\x20\x20\x20\x20'+'//\x20\x20smoot')+('hstep\x20'+'\x20(edgeSof'+'tness\x20'+')\x0a\x20\x20\x20\x20'+'float\x20alph'+'a\x20=\x20smooth'+'step(0.0,\x20'+'edgeSoftne'+'ss,\x20dist);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20alpha;\x20'+'//\x200~1\x0a}\x0a\x0a'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20mediump\x20'+'float\x20A\x20=\x20'+'dot(gaussi'+'anUV,\x20gaus'+'sianUV);\x0a\x20'+'\x20\x20\x20if\x20(A\x20>'+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'valuate\x20al'+'pha\x0a\x20\x20\x20\x20me'+'diump\x20floa'+'t\x20alpha\x20=\x20'+'fastExp(-A'+'\x20*\x204.0)\x20*\x20'+'gaussianCo'+'lor.a;\x0a\x20\x20\x20'+'\x20//\x20TODO\x20u'+'ShapeN\x20alp'+'ha\x0a\x20\x20\x20\x20//\x20'+'float\x20dx\x20='+'\x20abs(gauss'+'ianCUV.x)\x20'+'/\x20gaussian'+'Size.x;\x0a\x20\x20'+'\x20\x20//\x20float'+'\x20dy\x20=\x20abs('+'gaussianCU'+'V.y)\x20/\x20gau'+'ssianSize.'+'y;\x0a\x20\x20\x20\x20//\x20'+'float\x20B\x20=\x20'+'max(dx,\x20dy'+');\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20'+'\x0a\x20\x20\x20\x20//\x20'+'mediump\x20fl'+'oat\x20alpha\x20'+'=\x20exp(-pow'+'(B,\x202.0)\x20*'+'\x204.0)\x20*\x20ga'+'ussianColo'+'r.a;\x0a\x0a\x20\x20\x20\x20'+'bool\x20openR'+'ingMode\x20=\x20'+'ringSize\x20>'+'\x200.0\x20&&\x20mo'+'de\x20==\x201;\x20/'+'/\x20&&\x20uCont'+'rolMode\x20=='+'\x201;\x20\x0a\x20\x20\x20\x20i'+'f\x20(openRin'+'gMode\x20&&\x20s'+'aveMargina'+'l\x20>=\x200.05)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(A\x20<\x201'+'.0\x20-\x20ringS'+'ize)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'lpha\x20=\x20max'+'(0.05,\x20alp'+'ha);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alpha\x20'+'=\x200.6;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20bool\x20ope'+'nShapeMode'+'\x20=\x20uShapeN'+'\x20>\x202;\x20//\x20&'+'&\x20uControl'+'Mode\x20==\x201;'+'\x0a\x20\x20\x20\x20if\x20(o'+'penShapeMo'+'de)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20gaussi'+'anCUV\x20*\x202.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20rad'+'ius\x20=\x201.0;')+('\x20//\x201.0\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20edgeSoft'+'ness\x20=\x200.0'+'5;\x20//\x200.05'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v\x20*=\x201.0;/'+'/0.9;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20c'+'enter\x20=\x20ve'+'c2(0.0,\x200.'+'0);\x20\x20\x20//\x20'+''+'\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20alpha\x20'+'=\x20polygonS'+'oftMask(uv'+',\x20uShapeN,'+'\x20radius,\x20e'+'dgeSoftnes'+'s);\x20//\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(!insideR'+'egularPoly'+'gon(uv,\x20uS'+'hapeN,\x20rad'+'ius,\x20cente'+'r))\x20{\x20//'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20defined(S'+'HADOW_PASS'+')\x20||\x20defin'+'ed(PICK_PA'+'SS)\x20||\x20def'+'ined(PREPA'+'SS_PASS)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20a'+'lphaClip)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'getPickOut'+'put();\x0a\x0a\x20\x20'+'\x20\x20#elif\x20SH'+'ADOW_PASS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(0'+'.0,\x200.0,\x200'+'.0,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20#elif'+'\x20PREPASS_P'+'ASS\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20fl'+'oat2vec4(v'+'LinearDept'+'h);\x0a\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x201.0\x20/'+'\x20255.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20discard;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20DI'+'THER_NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(alph'+'a,\x20id\x20*\x200.'+'013);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'gaussianCo'+'lor.xyz,\x20a'+'lpha);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),S1='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0avec3\x20unpa'+'ck111011s('+'uint\x20bits)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec3(('+'uvec3(bits'+')\x20>>\x20uvec3'+'(21u,\x2011u,'+'\x200u))\x20&\x20uv'+'ec3(0x7ffu'+',\x200x3ffu,\x20'+'0x7ffu))\x20/'+'\x20vec3(2047'+'.0,\x201023.0'+',\x202047.0)\x20'+'*\x202.0\x20-\x201.'+'0;\x0a}\x0a\x0a//\x20f'+'etch\x20quant'+'ized\x20spher'+'ical\x20harmo'+'nic\x20coeffi'+'cients\x0avoi'+'d\x20fetchSca'+'le(in\x20uvec'+'4\x20t,\x20out\x20f'+'loat\x20scale'+',\x20out\x20vec3'+'\x20a,\x20out\x20ve'+'c3\x20b,\x20out\x20'+'vec3\x20c)\x20{\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20uintBits'+'ToFloat(t.'+'x);\x0a\x20\x20\x20\x20a\x20'+'=\x20unpack11'+'1011s(t.y)'+';\x0a\x20\x20\x20\x20b\x20=\x20'+'unpack1110'+'11s(t.z);\x0a'+'\x20\x20\x20\x20c\x20=\x20un'+'pack111011'+'s(t.w);\x0a}\x0a'+'\x0a//\x20fetch\x20'+'quantized\x20'+'spherical\x20'+'harmonic\x20c'+'oefficient'+'s\x0avoid\x20fet'+'ch(in\x20uvec'+'4\x20t,\x20out\x20v'+'ec3\x20a,\x20out'+'\x20vec3\x20b,\x20o'+'ut\x20vec3\x20c,'+'\x20out\x20vec3\x20'+'d)\x20{\x0a\x20\x20\x20\x20a'+'\x20=\x20unpack1'+'11011s(t.x'+');\x0a\x20\x20\x20\x20b\x20='+'\x20unpack111'+'011s(t.y);'+'\x0a\x20\x20\x20\x20c\x20=\x20u'+'npack11101'+'1s(t.z);\x0a\x20'+'\x20\x20\x20d\x20=\x20unp'+'ack111011s'+'(t.w);\x0a}\x0a\x0a'+'void\x20fetch'+'(in\x20uint\x20t'+',\x20out\x20vec3'+'\x20a)\x20{\x0a\x20\x20\x20\x20'+'a\x20=\x20unpack'+'111011s(t)'+';\x0a}\x0a\x0a#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20splatSH_'+'1to3;\x0a\x20\x20\x20\x20'+'void\x20readS'+'HData(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20sh'+'[3],\x20out\x20f'+'loat\x20scale'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetchSca'+'le(texelFe'+'tch(splatS'+'H_1to3,\x20so'+'urce.uv,\x200'+'),\x20scale,\x20'+'sh[0],\x20sh['+'1],\x20sh[2])'+(';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20SH_BAN'+'DS\x20==\x202\x0a\x20\x20'+'\x20\x20uniform\x20'+'highp\x20usam'+'pler2D\x20spl'+'atSH_1to3;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20highp\x20u'+'sampler2D\x20'+'splatSH_4t'+'o7;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_8to11;\x0a\x20\x20'+'\x20\x20void\x20rea'+'dSHData(in'+'\x20SplatSour'+'ce\x20source,'+'\x20out\x20vec3\x20'+'sh[8],\x20out'+'\x20float\x20sca'+'le)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetchS'+'cale(texel'+'Fetch(spla'+'tSH_1to3,\x20'+'source.uv,'+'\x200),\x20scale'+',\x20sh[0],\x20s'+'h[1],\x20sh[2'+']);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetch(te'+'xelFetch(s'+'platSH_4to'+'7,\x20source.'+'uv,\x200),\x20sh'+'[3],\x20sh[4]'+',\x20sh[5],\x20s'+'h[6]);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20fetch'+'(texelFetc'+'h(splatSH_'+'8to11,\x20sou'+'rce.uv,\x200)'+'.x,\x20sh[7])'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_1to3;\x0a\x20\x20\x20'+'\x20uniform\x20h'+'ighp\x20usamp'+'ler2D\x20spla'+'tSH_4to7;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20us'+'ampler2D\x20s'+'platSH_8to'+'11;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_12to15;\x0a\x20'+'\x20\x20\x20void\x20re'+'adSHData(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20sh[15],\x20o'+'ut\x20float\x20s'+'cale)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fetc'+'hScale(tex'+'elFetch(sp'+'latSH_1to3'+',\x20source.u'+'v,\x200),\x20sca'+'le,\x20sh[0],'+'\x20sh[1],\x20sh'+'[2]);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetch('+'texelFetch'+'(splatSH_4'+'to7,\x20sourc'+'e.uv,\x200),\x20'+'sh[3],\x20sh['+'4],\x20sh[5],'+'\x20sh[6]);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fet'+'ch(texelFe'+'tch(splatS'+'H_8to11,\x20s'+'ource.uv,\x20'+'0),\x20sh[7],'+'\x20sh[8],\x20sh'+'[9],\x20sh[10'+']);\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20fetch(te'+'xelFetch(s'+'platSH_12t'+'o15,\x20sourc'+'e.uv,\x200),\x20'+'sh[11],\x20sh'+'[12],\x20sh[1'+'3],\x20sh[14]'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0a#en'+'dif\x0a'),y1='\x0aattribute'+'\x20vec3\x20vert'+'ex_positio'+'n;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20xy:\x20co'+'rnerUV,\x20z:'+'\x20render\x20or'+'der\x20offset'+'\x0aattribute'+'\x20uint\x20vert'+'ex_id_attr'+'ib;\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20render'+'\x20order\x20bas'+'e\x0a\x0auniform'+'\x20uint\x20numS'+'plats;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20tota'+'l\x20number\x20o'+'f\x20splats\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20splatO'+'rder;\x20\x20\x20\x20/'+'/\x20per-spla'+'t\x20index\x20to'+'\x20source\x20ga'+'ussian\x0a\x0a//'+'\x20initializ'+'e\x20the\x20spla'+'t\x20source\x20s'+'tructure\x0ab'+'ool\x20initSo'+'urce(out\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(splatOrde'+'r,\x200).x);\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20ui'+'nt(vertex_'+'position.z'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20if'+'\x20out\x20of\x20ra'+'nge\x20(since'+'\x20the\x20last\x20'+'block\x20of\x20s'+'plats\x20may\x20'+'be\x20partial'+'ly\x20full)\x0a\x20'+'\x20\x20\x20if\x20(sou'+'rce.order\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'vec2\x20order'+'UV\x20=\x20ivec2'+'(source.or'+'der\x20%\x20w,\x20s'+'ource.orde'+'r\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20splat\x20id\x0a'+'\x20\x20\x20\x20source'+'.id\x20=\x20texe'+'lFetch(spl'+'atOrder,\x20o'+'rderUV,\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20/'+'/\x20map\x20id\x20t'+'o\x20uv\x0a\x20\x20\x20\x20s'+'ource.uv\x20='+'\x20ivec2(sou'+'rce.id\x20%\x20w'+',\x20source.i'+'d\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20true;'+'\x0a}\x0a',v1='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0aun'+'iform\x20int\x20'+'pointCloud'+'ModeEnable'+'d;\x0auniform'+'\x20float\x20uTi'+'me;\x0aunifor'+'m\x20float\x20pr'+'erenderCTi'+'me;\x0aunifor'+'m\x20float\x20uS'+'aturation;'+'\x20//\x200.0-2.'+'01.0\x20'+'\x0auniform'+'\x20float\x20uHu'+'eOffset;\x20\x20'+'//\x20'+'360'+'\x0auniform\x20v'+'ec3\x20clrOff'+'set;\x0aunifo'+'rm\x20vec4\x20cl'+'rScale;\x0aun'+'iform\x20floa'+'t\x20uOpacity'+';\x0auniform\x20'+'int\x20uInver'+'tOpacity;\x0a'+'\x0avarying\x20m'+'ediump\x20vec'+'2\x20gaussian'+'UV;\x0avaryin'+'g\x20mediump\x20'+'vec4\x20gauss'+'ianColor;\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianS'+'ize;\x0avaryi'+'ng\x20mediump'+'\x20vec2\x20gaus'+'sianCUV;\x0av'+'arying\x20med'+'iump\x20float'+'\x20saveMargi'+'nal;\x0a\x0a//\x20='+'====\x20\x20H'+'SV/RGB\x20\x20'+'=====\x0ahigh'+'p\x20vec3\x20rgb'+'2hsv(highp'+'\x20vec3\x20c)\x20{'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20cMa'+'x\x20=\x20max(ma'+'x(c.r,\x20c.g'+'),\x20c.b);\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20cMin\x20'+'=\x20min(min('+'c.r,\x20c.g),'+'\x20c.b);\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20delta\x20='+'\x20cMax\x20-\x20cM'+'in\x20+\x201e-10'+';\x20//\x200\x0a'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20h\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'if\x20(delta\x20'+'>\x201e-6)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(cMax\x20==\x20'+'c.r)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20=\x20mod((c.'+'g\x20-\x20c.b)\x20/'+'\x20delta,\x206.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(cMax\x20=='+'\x20c.g)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.b\x20-'+'\x20c.r)\x20/\x20de'+'lta\x20+\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.r\x20-'+'\x20c.g)\x20/\x20de'+'lta\x20+\x204.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20/=\x206.0;\x20/'+'/\x20\x20[0,1]'+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(h\x20<\x200.0'+')\x20h\x20+=\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20s\x20=\x20('+'cMax\x20<\x201e-'+'6)\x20?\x200.0\x20:'+'\x20delta\x20/\x20c'+'Max;\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20v\x20=\x20cMax;'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec3(h,\x20'+'s,\x20v);\x0a}\x0a\x0a'+'highp\x20vec3'+'\x20hsv2rgb(h'+'ighp\x20vec3\x20'+'c)\x20{\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20h\x20=\x20c.x\x20*'+'\x206.0;\x20//\x200'+'-6\x0a\x20\x20\x20\x20hig'+'hp\x20float\x20s'+'\x20=\x20c.y;\x0a\x20\x20'+'\x20\x20highp\x20fl'+'oat\x20v\x20=\x20c.'+'z;\x0a\x0a\x20\x20\x20\x20hi'+'ghp\x20int\x20i\x20'+'=\x20int(floo'+'r(h));\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20f\x20=\x20h\x20-'+'\x20float(i);'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20p\x20='+'\x20v\x20*\x20(1.0\x20'+'-\x20s);\x0a\x20\x20\x20\x20'+'highp\x20floa'+'t\x20q\x20=\x20v\x20*\x20'+'(1.0\x20-\x20s\x20*'+'\x20f);\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20t\x20=\x20v\x20*\x20('+'1.0\x20-\x20s\x20*\x20'+'(1.0\x20-\x20f))'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(i\x20==\x200)\x20r'+'eturn\x20vec3'+'(v,\x20t,\x20p);'+'\x0a\x20\x20\x20\x20else\x20'+'if\x20(i\x20==\x201'+')\x20return\x20v'+'ec3(q,\x20v,\x20'+'p);\x0a\x20\x20\x20\x20el'+'se\x20if\x20(i\x20='+'=\x202)\x20retur'+'n\x20vec3(p,\x20'+'v,\x20t);\x0a\x20\x20\x20'+'\x20else\x20if\x20('+'i\x20==\x203)\x20re'+'turn\x20vec3('+'p,\x20q,\x20v);\x0a'+'\x20\x20\x20\x20else\x20i'+'f\x20(i\x20==\x204)'+'\x20return\x20ve'+'c3(t,\x20p,\x20v'+');\x0a\x20\x20\x20\x20els'+'e\x20return\x20v'+'ec3(v,\x20p,\x20'+'q);\x20//\x20i=='+'5\x0a}\x0a\x0a#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20id;\x0a#en'+'dif\x0a\x0amediu'+'mp\x20vec4\x20di'+'scardVec\x20='+'\x20vec4(0.0,'+'\x200.0,\x202.0,'+'\x201.0);\x0a\x0a#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20varying\x20'+'float\x20vLin'+'earDepth;\x0a'+'#endif\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'//\x20read\x20ga'+'ussian\x20det'+'ails\x0a\x20\x20\x20\x20S'+'platSource'+'\x20source;\x0a\x20'+'\x20\x20\x20if\x20(!in'+'itSource(s'+'ource))\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20')+('=\x20discardV'+'ec;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20saveMargi'+'nal\x20=\x20getM'+'arginalT(s'+'ource,\x20uTi'+'me);\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20float\x20'+'marginal\x20='+'\x20uOpenAnim'+'\x20==\x201\x20?\x201.'+'0\x20:\x20saveMa'+'rginal;\x0a\x20\x20'+'\x20\x20if\x20(marg'+'inal\x20<\x200.0'+'5)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Posi'+'tion\x20=\x20dis'+'cardVec;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec3'+'\x20modelCent'+'er;\x0a\x20\x20\x20\x20bo'+'ol\x20isCente'+'r4D\x20=\x20save'+'Marginal\x20>'+'=\x200.05;\x0a\x20\x20'+'\x20\x20if\x20(isCe'+'nter4D)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'delCenter\x20'+'=\x20readCent'+'er4D(sourc'+'e,\x20uTime);'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20modelCen'+'ter\x20=\x20read'+'Center(sou'+'rce);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20Spl'+'atCenter\x20c'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'center))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return;'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20int\x20'+'showCloud\x20'+'=\x20pointClo'+'udModeEnab'+'led;\x0a\x20\x20\x20\x20i'+'f\x20(prerend'+'erCTime\x20=='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(prer'+'enderCTime'+'\x20>=\x201.0\x20&&'+'\x20prerender'+'CTime\x20<\x202.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20showClo'+'ud\x20=\x201;\x0a\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(prerend'+'erCTime\x20>='+'\x202.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20proje'+'ct\x20center\x20'+'to\x20screen\x20'+'space\x0a\x20\x20\x20\x20'+'SplatCorne'+'r\x20corner;\x0a'+'\x20\x20\x20\x20if\x20(!i'+'nitCorner('+'source,\x20ce'+'nter,\x20corn'+'er,\x20showCl'+'oud))\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_P'+'osition\x20=\x20')+('discardVec'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20vec'+'4\x20clr\x20=\x20re'+'adColor(so'+'urce,\x20uTim'+'e,\x20!isCent'+'er4D,\x20poin'+'tCloudMode'+'Enabled);\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'apply\x20AA\x20c'+'ompensatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'clr.a\x20*=\x20c'+'orner.aaFa'+'ctor;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20if(margi'+'nal\x20>\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20clr.w\x20*=\x20'+'marginal;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20\x0a\x20'+'\x20\x20\x20if\x20(uCo'+'ntrolColor'+'Mode\x20==\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'tint/brigh'+'tness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr\x20=\x20'+'clr\x20*\x20clrS'+'cale\x20+\x20vec'+'4(clrOffse'+'t,\x200.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(uInvertO'+'pacity\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20clr'+'.a\x20=\x201.0\x20-'+'\x20clr.a;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20don\x27t\x20'+'allow\x20out-'+'of-range\x20a'+'lpha\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20clr\x20=\x20c'+'lamp(clr,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20evalu'+'ate\x20spheri'+'cal\x20harmon'+'ics\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20the\x20'+'model-spac'+'e\x20view\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20norm'+'alize(cent'+'er.view\x20*\x20'+'mat3(cente'+'r.modelVie'+'w));\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20rea'+'d\x20sh\x20coeff'+'icients\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sh[SH_COE'+'FFS];\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20readS'+'HData(sour'+'ce,\x20sh,\x20sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr.x'+'yz\x20+=\x20eval'+'SH(sh,\x20dir'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(co'+'rner,\x20clr.'+'w);\x0a\x0a\x20\x20\x20\x20/')+('/\x20pointClo'+'udMode\x0a\x20\x20\x20'+'\x20//\x20if\x20(po'+'intCloudMo'+'deEnabled\x20'+'==\x201)\x20{\x0a\x20\x20'+'\x20\x20//\x20\x20\x20\x20\x20c'+'lr.a\x20=\x201.0'+';\x0a\x20\x20\x20\x20//\x20}'+'\x0a\x20\x20\x20\x20highp'+'\x20vec3\x20colo'+'r\x20=\x20max(cl'+'r.xyz,\x200.0'+');\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20\x0a'+'\x20\x20\x20\x20if\x20(uC'+'ontrolColo'+'rMode\x20==\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20\x20HSV'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'ighp\x20vec3\x20'+'hsv\x20=\x20rgb2'+'hsv(color)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20hsv.'+'y\x20*=\x20uSatu'+'ration;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20hsv.x\x20=\x20f'+'ract(hsv.x'+'\x20+\x20uHueOff'+'set\x20/\x20360.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20\x20RGB'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor\x20=\x20hsv'+'2rgb(hsv);'+'\x20\x20\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wri'+'te\x20output\x0a'+'\x20\x20\x20\x20gl_Pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4(cor'+'ner.offset'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20gaussia'+'nUV\x20=\x20corn'+'er.uv;\x0a\x20\x20\x20'+'\x20gaussianC'+'UV\x20=\x20corne'+'r.cUV;\x0a\x20\x20\x20'+'\x20gaussianS'+'ize\x20=\x20corn'+'er.cSize;\x0a'+'\x20\x20\x20\x20gaussi'+'anColor\x20=\x20'+'vec4(prepa'+'reOutputFr'+'omGamma(co'+'lor),\x20clr.'+'w);\x0a\x20\x20\x20\x20ga'+'ussianColo'+'r\x20=\x20clamp('+'gaussianCo'+'lor,\x200.0,\x20'+'1.0);\x0a\x0a\x20\x20\x20'+'\x20#ifndef\x20D'+'ITHER_NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'d\x20=\x20float('+'source.id)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vLin'+'earDepth\x20='+'\x20-center.v'+'iew.z;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),x1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'aPosition;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x0a\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(aPos'+'ition,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv0\x20'+'=\x20getImage'+'EffectUV(('+'aPosition.'+'xy\x20+\x201.0)\x20'+'*\x200.5);\x0a\x20\x20'+'\x20\x20}\x0a',T1='\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec4\x20c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(decodeG'+'amma(color'+'.rgb)),\x20co'+'lor.a);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a',w1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec4\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec4\x20vert'+'ex_color;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20co'+'lor;\x0a\x20\x20\x20\x20v'+'oid\x20main(v'+'oid)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20=\x20vertex_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20matrix_'+'model\x20*\x20ve'+'rtex_posit'+'ion;\x0a\x20\x20\x20\x20}'+'\x0a',E1='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceRefra'+'ctionIndex'+';\x0a\x0afloat\x20i'+'ridescence'+'_iorToFres'+'nel(float\x20'+'transmitte'+'dIor,\x20floa'+'t\x20incident'+'Ior)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'incidentIo'+'r)\x20/\x20(tran'+'smittedIor'+'\x20+\x20inciden'+'tIor),\x202.0'+');\x0a}\x0a\x0avec3'+'\x20iridescen'+'ce_iorToFr'+'esnel(vec3'+'\x20transmitt'+'edIor,\x20flo'+'at\x20inciden'+'tIor)\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow((transm'+'ittedIor\x20-'+'\x20vec3(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3(incid'+'entIor)),\x20'+'vec3(2.0))'+';\x0a}\x0a\x0avec3\x20'+'iridescenc'+'e_fresnelT'+'oIor(vec3\x20'+'f0)\x20{\x0a\x20\x20\x20\x20'+'vec3\x20sqrtF'+'0\x20=\x20sqrt(f'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20(vec3'+'(1.0)\x20+\x20sq'+'rtF0)\x20/\x20(v'+'ec3(1.0)\x20-'+'\x20sqrtF0);\x0a'+'}\x0a\x0avec3\x20ir'+'idescence_'+'sensitivit'+'y(float\x20op'+'d,\x20vec3\x20sh'+'ift)\x20{\x0a\x20\x20\x20'+'\x20float\x20PI\x20'+'=\x203.141592'+'653589793;'+'\x0a\x20\x20\x20\x20float'+'\x20phase\x20=\x202'+'.0\x20*\x20PI\x20*\x20'+'opd\x20*\x201.0e'+'-9;\x0a\x20\x20\x20\x20co'+'nst\x20vec3\x20v'+'al\x20=\x20vec3('+'5.4856e-13'+',\x204.4201e-'+'13,\x205.2481'+'e-13);\x0a\x20\x20\x20'+'\x20const\x20vec'+'3\x20pos\x20=\x20ve'+'c3(1.6810e'+'+06,\x201.795'+'3e+06,\x202.2'+'084e+06);\x0a'+'\x20\x20\x20\x20const\x20'+'vec3\x20var\x20='+'\x20vec3(4.32'+'78e+09,\x209.'+'3046e+09,\x20'+'6.6121e+09'+');\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20xyz\x20=\x20v'+'al\x20*\x20sqrt('+'2.0\x20*\x20PI\x20*'+'\x20var)\x20*\x20co'+'s(pos\x20*\x20ph'+'ase\x20+\x20shif'+'t)\x20*\x20exp(-'+'pow(phase,'+'\x202.0)\x20*\x20va'+'r);\x0a\x20\x20\x20\x20xy'+'z.x\x20+=\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+('cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20/=\x20vec3(1'+'.0685e-07)'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20mat3\x20XY'+'Z_TO_REC70'+'9\x20=\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x203.'+'2404542,\x20-'+'0.9692660,'+'\x20\x200.055643'+'4,\x0a\x20\x20\x20\x20\x20\x20\x20'+'-1.5371385'+',\x20\x201.87601'+'08,\x20-0.204'+'0259,\x0a\x20\x20\x20\x20'+'\x20\x20\x20-0.4985'+'314,\x20\x200.04'+'15560,\x20\x201.'+'0572252\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'return\x20XYZ'+'_TO_REC709'+'\x20*\x20xyz;\x0a}\x0a'+'\x0afloat\x20iri'+'descence_f'+'resnel(flo'+'at\x20cosThet'+'a,\x20float\x20f'+'0)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20x\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20x2\x20=\x20x\x20*'+'\x20x;\x0a\x20\x20\x20\x20fl'+'oat\x20x5\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x20\x0a\x0av'+'ec3\x20irides'+'cence_fres'+'nel(float\x20'+'cosTheta,\x20'+'vec3\x20f0)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20clamp'+'(1.0\x20-\x20cos'+'Theta,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20float\x20x2'+'\x20=\x20x\x20*\x20x;\x0a'+'\x20\x20\x20\x20float\x20'+'x5\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x20\x0a\x20'+'\x20\x20\x20return\x20'+'f0\x20+\x20(vec3'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0avec3\x20calc'+'Iridescenc'+'e(float\x20ou'+'tsideIor,\x20'+'float\x20cosT'+'heta,\x20vec3'+'\x20base_f0,\x20'+'float\x20irid'+'escenceThi'+'ckness)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceIor\x20'+'=\x20mix(outs'+'ideIor,\x20ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20float'+'\x20sinTheta2'+'Sq\x20=\x20pow(o'+'utsideIor\x20'+'/\x20iridesce')+('nceIor,\x202.'+'0)\x20*\x20(1.0\x20'+'-\x20pow(cosT'+'heta,\x202.0)'+');\x0a\x20\x20\x20\x20flo'+'at\x20cosThet'+'a2Sq\x20=\x201.0'+'\x20-\x20sinThet'+'a2Sq;\x0a\x0a\x20\x20\x20'+'\x20if\x20(cosTh'+'eta2Sq\x20<\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec3(1.0)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20c'+'osTheta2\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20r0\x20=\x20irid'+'escence_io'+'rToFresnel'+'(iridescen'+'ceIor,\x20out'+'sideIor);\x0a'+'\x20\x20\x20\x20float\x20'+'r12\x20=\x20irid'+'escence_fr'+'esnel(cosT'+'heta,\x20r0);'+'\x0a\x20\x20\x20\x20float'+'\x20r21\x20=\x20r12'+';\x0a\x20\x20\x20\x20floa'+'t\x20t121\x20=\x201'+'.0\x20-\x20r12;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20phi12\x20=\x20i'+'ridescence'+'Ior\x20<\x20outs'+'ideIor\x20?\x20P'+'I\x20:\x200.0;\x0a\x20'+'\x20\x20\x20float\x20p'+'hi21\x20=\x20PI\x20'+'-\x20phi12;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20b'+'aseIor\x20=\x20i'+'ridescence'+'_fresnelTo'+'Ior(base_f'+'0\x20+\x20vec3(0'+'.0001));\x0a\x20'+'\x20\x20\x20vec3\x20r1'+'\x20=\x20iridesc'+'ence_iorTo'+'Fresnel(ba'+'seIor,\x20iri'+'descenceIo'+'r);\x0a\x20\x20\x20\x20ve'+'c3\x20r23\x20=\x20i'+'ridescence'+'_fresnel(c'+'osTheta2,\x20'+'r1);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20phi23'+'\x20=\x20vec3(0.'+'0);\x0a\x20\x20\x20\x20if'+'\x20(baseIor['+'0]\x20<\x20iride'+'scenceIor)'+'\x20phi23[0]\x20'+'=\x20PI;\x0a\x20\x20\x20\x20'+'if\x20(baseIo'+'r[1]\x20<\x20iri'+'descenceIo'+'r)\x20phi23[1'+']\x20=\x20PI;\x0a\x20\x20'+'\x20\x20if\x20(base'+'Ior[2]\x20<\x20i'+'ridescence'+'Ior)\x20phi23'+'[2]\x20=\x20PI;\x0a'+'\x20\x20\x20\x20float\x20'+'opd\x20=\x202.0\x20'+'*\x20iridesce'+'nceIor\x20*\x20i'+'ridescence'+'Thickness\x20'+'*\x20cosTheta'+'2;\x0a\x20\x20\x20\x20vec'+'3\x20phi\x20=\x20ve'+'c3(phi21)\x20'+'+\x20phi23;\x20\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123Sq\x20=\x20c'+'lamp(r12\x20*'+'\x20r23,\x201e-5'+',\x200.9999);'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123\x20=\x20sqr')+('t(r123Sq);'+'\x0a\x20\x20\x20\x20vec3\x20'+'rs\x20=\x20pow(t'+'121,\x202.0)\x20'+'*\x20r23\x20/\x20(1'+'.0\x20-\x20r123S'+'q);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20c0\x20=\x20r'+'12\x20+\x20rs;\x0a\x20'+'\x20\x20\x20vec3\x20i\x20'+'=\x20c0;\x0a\x0a\x20\x20\x20'+'\x20vec3\x20cm\x20='+'\x20rs\x20-\x20t121'+';\x0a\x20\x20\x20\x20for\x20'+'(int\x20m\x20=\x201'+';\x20m\x20<=\x202;\x20'+'m++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20cm\x20*='+'\x20r123;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'sm\x20=\x202.0\x20*'+'\x20iridescen'+'ce_sensiti'+'vity(float'+'(m)\x20*\x20opd,'+'\x20float(m)\x20'+'*\x20phi);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20i\x20+='+'\x20cm\x20*\x20sm;\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20max'+'(i,\x20vec3(0'+'.0));\x0a}\x0a\x0av'+'ec3\x20getIri'+'descence(f'+'loat\x20cosTh'+'eta,\x20vec3\x20'+'specularit'+'y,\x20float\x20i'+'ridescence'+'Thickness)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),b1='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_irid'+'escence;\x0a#'+'endif\x0a\x0avoi'+'d\x20getIride'+'scence()\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_IRID'+'ESCENCE_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20iridescen'+'ce\x20*=\x20mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20*=\x20textur'+'e2DBias({S'+'TD_IRIDESC'+'ENCE_TEXTU'+'RE_NAME},\x20'+'{STD_IRIDE'+'SCENCE_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCE_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scence\x20=\x20i'+'ridescence'+';\x20\x0a}\x0a',A1='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceThick'+'nessMax;\x0a\x0a'+'#ifdef\x20STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_iridesc'+'enceThickn'+'essMin;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'end\x20=\x20text'+'ure2DBias('+'{STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE_NAME},'+'\x20{STD_IRID'+'ESCENCETHI'+'CKNESS_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCET'+'HICKNESS_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20iridescen'+'ceThicknes'+'s\x20=\x20mix(ma'+'terial_iri'+'descenceTh'+'icknessMin'+',\x20material'+'_iridescen'+'ceThicknes'+'sMax,\x20blen'+'d);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20ir'+'idescenceT'+'hickness\x20='+'\x20material_'+'iridescenc'+'eThickness'+'Max;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dIridesce'+'nceThickne'+'ss\x20=\x20iride'+'scenceThic'+'kness;\x20\x0a}\x0a',C1='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'fractionIn'+'dex;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tIor()\x20{\x0a#'+'ifdef\x20STD_'+'IOR_CONSTA'+'NT\x0a\x20\x20\x20\x20dIo'+'r\x20=\x20materi'+'al_refract'+'ionIndex;\x0a'+'#else\x0a\x20\x20\x20\x20'+'dIor\x20=\x201.0'+'\x20/\x201.5;\x0a#e'+'ndif\x0a}\x0a',P1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20light{i}_'+'color;\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec3\x20light'+'{i}_direct'+'ion;\x0a\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20LIT_CODE'+'_LIGHTS_PO'+'INT\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20point\x20l'+'ights\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_pos'+'ition;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_ra'+'dius;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20SPOT\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20spot\x20ligh'+'ts\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20l'+'ight{i}_di'+'rection;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20light'+'{i}_innerC'+'oneAngle;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_outer'+'ConeAngle;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'3\x20light{i}'+'_position;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20vec3\x20lig'+'ht{i}_half'+'Width;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_hal'+'fHeight;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'FALLOFF\x20=='+'\x20LINEAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+('T_CODE_FAL'+'LOFF_LINEA'+'R\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20linear\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}FALLOFF\x20'+'==\x20INVERSE'+'SQUARED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ca'+'sting\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'CASTSHADOW'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'at4\x20light{'+'i}_shadowM'+'atrix;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_sh'+'adowIntens'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec4\x20ligh'+'t{i}_shado'+'wParams;\x20/'+'/\x20width,\x20h'+'eight,\x20bia'+'s,\x20radius\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_s'+'hadowSearc'+'hArea;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20light{i}'+'_cameraPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_sof'+'tShadowPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20direction'+'al\x20(cascad'+'ed)\x20shadow'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrixPa'+'lette[4];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec4\x20light'+'{i}_shadow'+'CascadeDis'+'tances;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20in'+'t\x20light{i}'+'_shadowCas')+('cadeCount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_shad'+'owCascadeB'+'lend;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'SHADOW_PCF'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2DShado'+'w\x20light{i}'+'_shadowMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_shadowM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'okie\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIGHT{i}C'+'OOKIE)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_COOKIE\x20'+'//\x20include'+'\x20functiona'+'lity\x20for\x20c'+'ookies\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20light{i'+'}_cookie;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_cooki'+'eIntensity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d'+'efined(LIG'+'HT{i}CASTS'+'HADOW)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20ligh'+'t{i}_shado'+'wMatrix;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20SPOT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20lig')+('ht{i}_cook'+'ie;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_c'+'ookieInten'+'sity;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIGHT{i}C'+'ASTSHADOW)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'light{i}_s'+'hadowMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIGH'+'T{i}COOKIE'+'_TRANSFORM'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20light{i}_'+'cookieMatr'+'ix;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c2\x20light{i'+'}_cookieOf'+'fset;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),M1='\x0afloat\x20get'+'LightDiffu'+'se(vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir,\x20vec3\x20'+'lightDirNo'+'rm)\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',D1='\x0avec3\x20eval'+'OmniLight('+'vec3\x20light'+'PosW)\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'PositionW\x20'+'-\x20lightPos'+'W;\x0a}\x0a',I1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',L1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0avoid\x20e'+'valuateLig'+'ht{i}(\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20iridesc'+'enceFresne'+'l\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20color\x0a\x20\x20\x20'+'\x20vec3\x20ligh'+'tColor\x20=\x20l'+'ight{i}_co'+'lor;\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x20&&\x20!defi'+'ned(LIT_SH'+'ADOW_CATCH'+'ER)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20return\x20if'+'\x20the\x20light'+'\x20color\x20is\x20'+'black\x20(use'+'d\x20by\x20shado'+'w\x20catcher\x20'+'-\x20this\x20way'+'\x20this\x20ligh'+'t\x20is\x20very\x20'+'cheap)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(a'+'ll(equal(l'+'ightColor,'+'\x20vec3(0.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20dir'+'ectional\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dLight'+'DirNormW\x20='+'\x20light{i}_'+'direction;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20omn'+'i\x20or\x20spot\x20'+'light\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtDirW\x20=\x20'+'evalOmniLi'+'ght(light{'+'i}_positio'+'n);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightDi'+'rNormW\x20=\x20n'+'ormalize(l'+'ightDirW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20cookie\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'COOKIE)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_FALLOF'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_TRANSF'+'ORM\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2DXform('+('light{i}_c'+'ookie,\x20lig'+'ht{i}_shad'+'owMatrix,\x20'+'light{i}_c'+'ookieInten'+'sity,\x20ligh'+'t{i}_cooki'+'eMatrix,\x20l'+'ight{i}_co'+'okieOffset'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2D(light'+'{i}_cookie'+',\x20light{i}'+'_shadowMat'+'rix,\x20light'+'{i}_cookie'+'Intensity)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}COOKIE_TR'+'ANSFORM\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'Cookie2DCl'+'ipXform(li'+'ght{i}_coo'+'kie,\x20light'+'{i}_shadow'+'Matrix,\x20li'+'ght{i}_coo'+'kieIntensi'+'ty,\x20light{'+'i}_cookieM'+'atrix,\x20lig'+'ht{i}_cook'+'ieOffset).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20cookieAtt'+'enuation\x20='+'\x20getCookie'+'2DClip(lig'+'ht{i}_cook'+'ie,\x20light{'+'i}_shadowM'+'atrix,\x20lig'+'ht{i}_cook'+'ieIntensit'+'y).{LIGHT{'+'i}COOKIE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20OMNI\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'CookieCube'+'(light{i}_'+'cookie,\x20li'+'ght{i}_sha')+('dowMatrix,'+'\x20light{i}_'+'cookieInte'+'nsity).{LI'+'GHT{i}COOK'+'IE_CHANNEL'+'};\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20mu'+'ltiply\x20lig'+'ht\x20color\x20b'+'y\x20the\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lig'+'htColor\x20*='+'\x20cookieAtt'+'enuation;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20di'+'stance\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20==\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}FAL'+'LOFF\x20==\x20LI'+'NEAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Linear(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20=\x20g'+'etFalloffI'+'nvSquared('+'light{i}_r'+'adius,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20non'+'\x20punctual\x20'+'lights\x20onl'+'y\x20gets\x20the'+'\x20range\x20win'+'dow\x20here\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Window(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20spot\x20li'+'ght\x20angle\x20'+'falloff\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20SPOT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20!de'+'fined(LIGH'+'T{i}COOKIE'+')\x20||\x20defin'+'ed(LIGHT{i'+'}COOKIE_FA'+'LLOFF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dAtten\x20'+'*=\x20getSpot'+'Effect(lig'+'ht{i}_dire'+'ction,\x20lig'+'ht{i}_inne'+'rConeAngle'+',\x20light{i}'+'_outerCone'+'Angle,\x20dLi'+'ghtDirNorm'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20if\x20(dA'+'tten\x20<\x200.0')+('0001)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20are'+'a\x20light\x20va'+'lues\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcR'+'ectLightVa'+'lues(light'+'{i}_positi'+'on,\x20light{'+'i}_halfWid'+'th,\x20light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20calcDi'+'skLightVal'+'ues(light{'+'i}_positio'+'n,\x20light{i'+'}_halfWidt'+'h,\x20light{i'+'}_halfHeig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcS'+'phereLight'+'Values(lig'+'ht{i}_posi'+'tion,\x20ligh'+'t{i}_halfW'+'idth,\x20ligh'+'t{i}_halfH'+'eight);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'lighting\x20-'+'\x20LTC\x20light'+'s\x20do\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20'+'into\x20atten'+'uation\x20tha'+'t\x20affects\x20'+'specular\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20atten'+'Diffuse\x20-\x20'+'separate\x20d'+'iffuse\x20att'+'enuation\x20f'+'or\x20non-pun'+'ctual\x20ligh'+'t\x20sources\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20NB:\x20'+'A\x20better\x20a'+'pproximati'+'on\x20perhaps'+'\x20using\x20wra'+'p\x20lighting'+'\x20could\x20be\x20'+'implemente'+'d\x20here\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20atten'+'Diffuse\x20=\x20'+'getLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dL'+'ightDirNor'+'mW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x2016.0\x20i'+'s\x20a\x20consta'+'nt\x20that\x20is'+'\x20in\x20getFal'+'loffInvSqu'+'ared()\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20==\x20'+'RECT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getRectL'+'ightDiffus'+'e(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20lightD'+'irW,\x20dLigh'+'tDirNormW)'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20attenDiff'+'use\x20=\x20getD'+'iskLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20li'+'ghtDirW,\x20d'+'LightDirNo'+'rmW)\x20*\x2016.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getSpher'+'eLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20ligh'+'tDirW,\x20dLi'+'ghtDirNorm'+'W)\x20*\x2016.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20one\x20'+'parameter\x20'+'is\x20unused\x20'+'for\x20punctu'+'al\x20lights\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20*=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20vec3('+'0.0),\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20apply\x20th'+'e\x20shadow\x20a'+'ttenuation'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'CASTSHADOW'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadow{i'+'}(vec3(0.0'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adow{i}(li'+'ghtDirW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20App')+('ly\x20shadow\x20'+'intensity\x20'+'to\x20the\x20sha'+'dow\x20value\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20=\x20mix'+'(1.0,\x20shad'+'ow,\x20light{'+'i}_shadowI'+'ntensity);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20*=\x20'+'shadow;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_SHADOW_'+'CATCHER)\x20&'+'&\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20accum'+'ulate\x20shad'+'ows\x20for\x20di'+'rectional\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ShadowCatc'+'her\x20*=\x20sha'+'dow;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20-\x20they\x20do'+'\x20not\x20mix\x20d'+'iffuse\x20lig'+'hting\x20into'+'\x20specular\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20('+'(attenDiff'+'use\x20*\x20dAtt'+'en)\x20*\x20ligh'+'tColor)\x20*\x20'+'(1.0\x20-\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(atte'+'nDiffuse\x20*'+'\x20dAtten)\x20*'+'\x20lightColo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20punctua'+'l\x20light\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(AR'+'EA_LIGHTS)'+'\x20&&\x20define'+'d(LIT_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(dAtt'+'en\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20litA'+'rgs_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20spec'+'ular\x20light'+'ing\x0a\x20\x20\x20\x20#i'+'fdef\x20LIGHT')+('{i}AFFECT_'+'SPECULARIT'+'Y\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x20//\x20area\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccSpecula'+'rLight\x20+=\x20'+'ccLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_clear'+'coat_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20ccLTC'+'SpecFres\x20*'+'\x20getDiskLi'+'ghtSpecula'+'r(litArgs_'+'clearcoat_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20+'+'=\x20ccLTCSpe'+'cFres\x20*\x20ge'+'tSphereLig'+'htSpecular'+'(litArgs_c'+'learcoat_w'+'orldNormal'+',\x20dViewDir'+'W)\x20*\x20dAtte'+'n\x20*\x20lightC'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20dLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp')+('ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20SPHERE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20d'+'LTCSpecFre'+'s\x20*\x20getSph'+'ereLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20punctual'+'\x20light\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20is\x20fres'+'nel\x20needed'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20LI'+'T_FRESNEL_'+'MODEL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'GHT{i}FRES'+'NEL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20hal'+'fDirW\x20=\x20no'+'rmalize(-d'+'LightDirNo'+'rmW\x20+\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20if\x20LTC\x20'+'lights\x20are'+'\x20present,\x20'+'specular\x20m'+'ust\x20be\x20acc'+'umulated\x20w'+'ith\x20specul'+'arity\x20(spe'+'cularity\x20i'+'s\x20pre\x20mult'+'iplied\x20by\x20'+'punctual\x20l'+'ight\x20fresn'+'el)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtspecula'+'rCC\x20=\x20getL'+'ightSpecul'+'ar(halfDir'+'W,\x20ccReflD'+'irW,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_clearcoat'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tspecularC'+'C\x20*=\x20getFr'+'esnelCC(do'+'t(dViewDir'+'W,\x20halfDir'+'W));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20lightsp'+'ecularCC;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_sheen_glo'+'ss)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20lightSpec'+'ular\x20=\x20get'+'LightSpecu'+'lar(halfDi'+'rW,\x20dReflD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightSpecu'+'lar\x20*=\x20get'+'Fresnel(do'+'t(dViewDir'+'W,\x20halfDir'+'W),\x20litArg'+'s_gloss,\x20l'+'itArgs_spe'+'cularity,\x20'+'iridescenc'+'eFresnel,\x20'+'litArgs_ir'+'idescence_'+'intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20*=\x20g'+'etFresnel('+'dot(dViewD'+'irW,\x20halfD'+'irW),\x20litA'+'rgs_gloss,'+'\x20litArgs_s')+('pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20lightSp'+'ecular\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20+=\x20light'+'Specular;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a#en'+'dif\x0a'),R1='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20vec3\x20'+'getShadowS'+'ampleCoord'+'{i}(mat4\x20s'+'hadowTrans'+'form,\x20vec4'+'\x20shadowPar'+'ams,\x20vec3\x20'+'worldPosit'+'ion,\x20vec3\x20'+'lightPos,\x20'+'inout\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'vec3\x20norma'+'l)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'urfacePosi'+'tion\x20=\x20wor'+'ldPosition'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT{i}_SHA'+'DOW_SAMPLE'+'_POINT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20len'+'gth(lightD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightDir'+'\x20=\x20surface'+'Position\x20-'+'\x20lightPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20lightD'+'ir;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_S'+'OURCE_ZBUF'+'FER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+('NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_NORMAL_O'+'FFSET\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20distScal'+'e\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20abs'+'(dot(vPosi'+'tionW\x20-\x20li'+'ghtPos,\x20li'+'ghtDirNorm'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20posi'+'tionInShad'+'owSpace\x20=\x20'+'shadowTran'+'sform\x20*\x20ve'+'c4(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM'+'PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20/=\x20po'+'sitionInSh'+'adowSpace.')+('w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20posit'+'ionInShado'+'wSpace.xy\x20'+'/=\x20positio'+'nInShadowS'+'pace.w;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20po'+'sitionInSh'+'adowSpace.'+'z\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20thi'+'s\x20is\x20curre'+'ntly\x20unuse'+'d\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20SHADOW_SA'+'MPLE_Z_BIA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20positionI'+'nShadowSpa'+'ce.z\x20+=\x20ge'+'tShadowBia'+'s(shadowPa'+'rams.x,\x20sh'+'adowParams'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20positi'+'onInShadow'+'Space.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20surfaceP'+'osition;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'evaluation'+'\x20function\x0a'+'\x20\x20\x20\x20float\x20'+'getShadow{'+'i}(vec3\x20li'+'ghtDirW)\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20shado'+'w\x20cascades'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_CASCADES'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20sel'+'ect\x20shadow'+'\x20cascade\x20m'+'atrix\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'t\x20cascadeI'+'ndex\x20=\x20get'+'ShadowCasc'+'adeIndex(l'+'ight{i}_sh'+'adowCascad'+'eDistances'+',\x20light{i}'+'_shadowCas'+'cadeCount)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'_SHADOW_CA'+'SCADE_BLEN'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'scadeIndex'+'\x20=\x20ditherS'+'hadowCasca'+'deIndex(ca'+'scadeIndex'+',\x20light{i}'+'_shadowCas'+'cadeDistan'+'ces,\x20light')+('{i}_shadow'+'CascadeCou'+'nt,\x20light{'+'i}_shadowC'+'ascadeBlen'+'d);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mat4'+'\x20shadowMat'+'rix\x20=\x20ligh'+'t{i}_shado'+'wMatrixPal'+'ette[casca'+'deIndex];\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t4\x20shadowM'+'atrix\x20=\x20li'+'ght{i}_sha'+'dowMatrix;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20DIRE'+'CTIONAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20light'+'\x20does\x20not\x20'+'have\x20a\x20pos'+'ition\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20light'+'{i}_shadow'+'Params,\x20vP'+'ositionW,\x20'+'vec3(0.0),'+'\x20lightDirW'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20shad'+'owCoord\x20=\x20'+'getShadowS'+'ampleCoord'+'{i}(shadow'+'Matrix,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20vPosition'+'W,\x20light{i'+'}_position'+',\x20lightDir'+'W,\x20dLightD'+'irNormW,\x20d'+'VertexNorm'+'alW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Fade\x20di'+'rectional\x20'+'shadow\x20at\x20'+'the\x20far\x20di'+'stance\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadowCoord'+'\x20=\x20fadeSha'+'dow(shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owCascadeD'+'istances);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20--'+'---\x20sample'+'\x20the\x20shado'+'w\x20-----\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x20/'+'/\x20-----\x20di'+'rectional\x20'+'light\x20----')+('-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wVSM16(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x205'+'.54);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20VSM_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowVSM32('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x2015.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCS'+'S_32F\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20sh'+'adowSearch'+'Area\x20=\x20vec'+'2(length(l'+'ight{i}_ha'+'lfWidth),\x20'+'length(lig'+'ht{i}_half'+'Height))\x20*'+'\x20light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCSS(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20light{i}_'+'cameraPara'+'ms,\x20shadow'+'SearchArea'+',\x20lightDir'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20light{i}'+'_softShado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF1_16'+'F\x20||\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'1_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF3'+'_16F\x20||\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCF3x3(SH'+'ADOWMAP_PA'+'SS(light{i'+'}_shadowMa'+'p),\x20shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owParams);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF5_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF5_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(SHADOWMAP'+'_PASS(ligh'+'t{i}_shado'+'wMap),\x20sha'+'dowCoord,\x20'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20S'+'POT\x20//\x20---'+'--\x20spot\x20li'+'ght\x20-----\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20V'+'SM_16F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potVSM16(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x205.54,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowSpo')+('tVSM32(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x201'+'5.0,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20shad'+'owSearchAr'+'ea\x20=\x20vec2('+'length(lig'+'ht{i}_half'+'Width),\x20le'+'ngth(light'+'{i}_halfHe'+'ight))\x20*\x20l'+'ight{i}_sh'+'adowSearch'+'Area;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(lig'+'ht{i}_shad'+'owSearchAr'+'ea);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotPCSS('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x20light{i}'+'_cameraPar'+'ams,\x20shado'+'wSearchAre'+'a,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF1_1'+'6F\x20||\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potPCF1x1('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(SHA')+('DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F5_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'5x5(SHADOW'+'MAP_PASS(l'+'ight{i}_sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20light{i'+'}_shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x20//\x20'+'-----\x20omni'+'\x20light\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCSS_32F'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P'+'UNCTUAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(len'+'gth(light{'+'i}_halfWid'+'th),\x20lengt'+'h(light{i}'+'_halfHeigh'+'t))\x20*\x20ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2(light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20shadowSe'+'archArea,\x20'+'lightDirW)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_')+('32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF3_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF3_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowOmniPC'+'F3x3(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),O1='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20areaLi'+'ghtsLutTex'+'1;\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20sampler2D'+'\x20areaLight'+'sLutTex2;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCSSPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22shadow'+'SoftPS\x22\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(SH'+'ADOW_KIND_'+'VSM)\x0a\x20\x20\x20\x20#'+'include\x20\x22s'+('hadowEVSMP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_LINEA'+'R\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fall'+'offLinearP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22fal'+'loffInvSqu'+'aredPS\x22\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20LIT_COD'+'E_LIGHTS_P'+'OINT\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'ightDirPoi'+'ntPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22spot'+'PS\x22\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_CODE_CO'+'OKIE\x0a\x20\x20\x20\x20#'+'include\x20\x22c'+'ookiePS\x22\x0a#'+'endif\x0a\x0a//\x20'+'clustered\x20'+'lighting\x0a#'+'ifdef\x20LIT_'+'CLUSTERED_'+'LIGHTS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22clustered'+'LightPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHT_'+'COUNT\x20>\x200\x0a'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20genera'+'te\x20shadow\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionSha'+'dowPS,\x20LIG'+'HT_COUNT\x22\x0a'+'\x0a\x20\x20\x20\x20//\x20LO'+'OP\x20-\x20gener'+'ate\x20light\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionLig'+'htPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a'),F1='\x0avoid\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20vec3\x20li'+'ghtmap,\x20\x0a\x20'+'\x20\x20\x20vec3\x20di'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20worldNo'+'rmal,\x20\x0a\x20\x20\x20'+'\x20vec3\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'vec3\x20refle'+'ctionDir,\x20'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20'+'\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20vertexNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'mat3\x20tbn\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x20\x0a\x20\x20'+'\x20\x20float\x20ir'+'idescenceI'+'ntensity\x0a#'+'endif\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'rectional\x20'+'lightmap\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x20&'+'&\x20defined('+'LIT_DIR_LI'+'GHTMAP)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dot(dir,\x20'+'dir)\x20<\x200.0'+'001)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'lightmap;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20vligh'+'t\x20=\x20satura'+'te(dot(dir'+',\x20-vertexN'+'ormal));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20fli'+'ght\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20nl'+'ight\x20=\x20(fl'+'ight\x20/\x20max'+'(vlight,\x200'+'.01))\x20*\x200.'+'5;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p\x20*\x20nlight'+'\x20*\x202.0;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20half'+'Dir\x20=\x20norm'+'alize(-dir'+'\x20+\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'specularLi'+'ght\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'*=\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20getFre'+'snel(dot(v'+'iewDir,\x20ha'+'lfDir),\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceInt'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'+=\x20specula'+'rLight;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20non-dire'+'ctional\x20li'+'ghtmap\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),N1='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'vec3\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_d'+'irLightMap'+';\x0a#endif\x0a\x0a'+'void\x20getLi'+'ghtMap()\x20{'+'\x0a\x0a\x20\x20\x20\x20dLig'+'htmap\x20=\x20ve'+'c3(1.0);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_LIGHT'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dLi'+'ghtmap\x20*=\x20'+'{STD_LIGHT'+'_TEXTURE_D'+'ECODE}(tex'+'ture2DBias'+'({STD_LIGH'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'LIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_LIGHTM'+'AP_DIR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dir\x20=\x20'+'texture2DB'+'ias(textur'+'e_dirLight'+'Map,\x20{STD_'+'LIGHT_TEXT'+'URE_UV},\x20t'+'extureBias'+').xyz\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dir'+'Dot\x20=\x20dot('+'dir,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightm'+'apDir\x20=\x20(d'+'irDot\x20>\x200.'+'001)\x20?\x20dir'+'\x20/\x20sqrt(di'+'rDot)\x20:\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_LIGHT_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightma'+'p\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_LIGHT_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a}\x0a',k1='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'float\x20calc'+'LightSpecu'+'lar(float\x20'+'gloss,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20h,\x20vec'+'3\x20lightDir'+'Norm,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20float\x20PI'+'\x20=\x203.14159'+'2653589793'+';\x0a\x20\x20\x20\x20floa'+'t\x20roughnes'+'s\x20=\x20max((1'+'.0\x20-\x20gloss'+')\x20*\x20(1.0\x20-'+'\x20gloss),\x200'+'.001);\x0a\x20\x20\x20'+'\x20float\x20alp'+'haRoughnes'+'s\x20=\x20roughn'+'ess\x20*\x20roug'+'hness;\x0a\x20\x20\x20'+'\x20float\x20ani'+'sotropy\x20=\x20'+'dAnisotrop'+'y;\x0a\x20\x20\x20\x20vec'+'2\x20directio'+'n\x20=\x20dAniso'+'tropyRotat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'float\x20at\x20='+'\x20mix(alpha'+'Roughness,'+'\x201.0,\x20anis'+'otropy\x20*\x20a'+'nisotropy)'+';\x0a\x20\x20\x20\x20floa'+'t\x20ab\x20=\x20cla'+'mp(alphaRo'+'ughness,\x200'+'.001,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20anisotro'+'picT\x20=\x20nor'+'malize(tbn'+'\x20*\x20vec3(di'+'rection,\x200'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicB\x20=\x20'+'normalize('+'cross(tbn['+'2],\x20anisot'+'ropicT));\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20NoH\x20=\x20dot'+'(worldNorm'+'al,\x20h);\x0a\x20\x20'+'\x20\x20float\x20To'+'H\x20=\x20dot(an'+'isotropicT'+',\x20h);\x0a\x20\x20\x20\x20'+'float\x20BoH\x20'+'=\x20dot(anis'+'otropicB,\x20'+'h);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20a2\x20=\x20'+'at\x20*\x20ab;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20vec3(ab\x20'+'*\x20ToH,\x20at\x20'+'*\x20BoH,\x20a2\x20'+'*\x20NoH);\x0a\x20\x20'+'\x20\x20float\x20v2'+'\x20=\x20dot(v,\x20'+'v);\x0a\x20\x20\x20\x20fl'+'oat\x20w2\x20=\x20a'+'2\x20/\x20v2;\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'ToV\x20=\x20dot('+'anisotropi'+'cT,\x20viewDi'+'r);\x0a\x20\x20\x20\x20fl'+'oat\x20BoV\x20=\x20'+'dot(anisot'+'ropicB,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20float\x20To'+'L\x20=\x20dot(an'+'isotropicT'+(',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20Bo'+'L\x20=\x20dot(an'+'isotropicB'+',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20No'+'V\x20=\x20dot(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20float'+'\x20NoL\x20=\x20dot'+'(worldNorm'+'al,\x20-light'+'DirNorm);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20lambdaV\x20='+'\x20NoL\x20*\x20len'+'gth(vec3(a'+'t\x20*\x20ToV,\x20a'+'b\x20*\x20BoV,\x20N'+'oV));\x0a\x20\x20\x20\x20'+'float\x20lamb'+'daL\x20=\x20NoV\x20'+'*\x20length(v'+'ec3(at\x20*\x20T'+'oL,\x20ab\x20*\x20B'+'oL,\x20NoL));'+'\x0a\x20\x20\x20\x20float'+'\x20G\x20=\x200.5\x20/'+'\x20(lambdaV\x20'+'+\x20lambdaL)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20D\x20*\x20G;'+'\x0a}\x0a\x0afloat\x20'+'getLightSp'+'ecular(vec'+'3\x20h,\x20vec3\x20'+'reflDir,\x20v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'float\x20glos'+'s,\x20mat3\x20tb'+'n)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'LightSpecu'+'lar(gloss,'+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20h,\x20ligh'+'tDirNorm,\x20'+'tbn);\x0a}\x0a'),U1='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afloa'+'t\x20calcLigh'+'tSpecular('+'float\x20glos'+'s,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20h)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20nh\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20specPow\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x20//\x20gloss'+'iness\x20is\x20l'+'inear,\x20pow'+'er\x20is\x20not;'+'\x200\x20-\x202048\x0a'+'\x0a\x20\x20\x20\x20//\x20Ha'+'ck:\x20On\x20Mac'+'\x20OS\x20X,\x20cal'+'ling\x20pow\x20w'+'ith\x20zero\x20f'+'or\x20the\x20exp'+'onent\x20gene'+'rates\x20hide'+'ous\x20artifa'+'cts\x20so\x20bia'+'s\x20up\x20a\x20lit'+'tle\x0a\x20\x20\x20\x20sp'+'ecPow\x20=\x20ma'+'x(specPow,'+'\x200.0001);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(nh,\x20'+'specPow)\x20*'+'\x20(specPow\x20'+'+\x202.0)\x20/\x208'+'.0;\x0a}\x0a\x0aflo'+'at\x20getLigh'+'tSpecular('+'vec3\x20h,\x20ve'+'c3\x20reflDir'+',\x20vec3\x20wor'+'ldNormal,\x20'+'vec3\x20viewD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m,\x20float\x20g'+'loss,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',B1='\x0a\x0afloat\x20sh'+'eenD(vec3\x20'+'normal,\x20ve'+'c3\x20h,\x20floa'+'t\x20roughnes'+'s)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20PI\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20f'+'loat\x20invR\x20'+'=\x201.0\x20/\x20(r'+'oughness\x20*'+'\x20roughness'+');\x0a\x20\x20\x20\x20flo'+'at\x20cos2h\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20*=\x20'+'cos2h;\x0a\x20\x20\x20'+'\x20float\x20sin'+'2h\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'float\x20shee'+'nV(vec3\x20no'+'rmal,\x20vec3'+'\x20viewDir,\x20'+'vec3\x20light'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20NoV\x20=\x20'+'max(dot(no'+'rmal,\x20view'+'Dir),\x200.00'+'0001);\x0a\x20\x20\x20'+'\x20float\x20NoL'+'\x20=\x20max(dot'+'(normal,\x20l'+'ight),\x200.0'+'00001);\x0a\x20\x20'+'\x20\x20return\x201'+'.0\x20/\x20(4.0\x20'+'*\x20(NoL\x20+\x20N'+'oV\x20-\x20NoL\x20*'+'\x20NoV));\x0a}\x0a'+'\x0afloat\x20get'+'LightSpecu'+'larSheen(v'+'ec3\x20h,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'irNorm,\x20fl'+'oat\x20sheenG'+'loss)\x20{\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20float\x20V\x20'+'=\x20sheenV(w'+'orldNormal'+',\x20viewDir,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20return\x20D\x20'+'*\x20V;\x0a}\x0a',z1='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afloat\x20lin'+'earizeDept'+'hWithParam'+'s(float\x20z,'+'\x20vec4\x20came'+'raParams)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'cameraPara'+'ms.w\x20==\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20(c'+'ameraParam'+'s.z\x20*\x20came'+'raParams.y'+')\x20/\x20(camer'+'aParams.y\x20'+'+\x20z\x20*\x20(cam'+'eraParams.'+'z\x20-\x20camera'+'Params.y))'+';\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20came'+'raParams.z'+'\x20+\x20z\x20*\x20(ca'+'meraParams'+'.y\x20-\x20camer'+'aParams.z)'+';\x0a}\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec4\x20ca'+'mera_param'+'s;\x20//\x20x:\x201'+'\x20/\x20camera_'+'far,\x20\x20\x20\x20\x20\x20'+'y:\x20camera_'+'far,\x20\x20\x20\x20\x20z'+':\x20camera_n'+'ear,\x20\x20\x20\x20\x20\x20'+'\x20\x20w:\x20is_or'+'tho\x0a#endif'+'\x0a\x0afloat\x20li'+'nearizeDep'+'th(float\x20z'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20linea'+'rizeDepthW'+'ithParams('+'z,\x20camera_'+'params);\x0a}'+'\x0a#endif\x0a',V1='\x0avoid\x20eval'+'uateBacken'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'SSAO\x20durin'+'g\x20lighting'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_SSAO'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ao\x20'+'*=\x20texture'+'2DLod(ssao'+'Texture,\x20g'+'l_FragCoor'+'d.xy\x20*\x20ssa'+'oTextureSi'+'zeInv,\x200.0'+').r;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20transf'+'orm\x20tangen'+'t\x20space\x20no'+'rmals\x20to\x20w'+'orld\x20space'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_NEED'+'S_NORMAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etReflDir('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20litArgs_'+'gloss,\x20dTB'+'N);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W\x20=\x20normal'+'ize(-refle'+'ct(dViewDi'+'rW,\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR_OR'+'_REFLECTIO'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20f'+'0\x20=\x201.0\x20/\x20'+'litArgs_io'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20f0\x20=\x20'+'(f0\x20-\x201.0)'+'\x20/\x20(f0\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20f0\x20'+'*=\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20i'+'ridescence'+'Fresnel\x20=\x20'+'getIridesc'+('ence(satur'+'ate(dot(dV'+'iewDirW,\x20l'+'itArgs_wor'+'ldNormal))'+',\x20litArgs_'+'specularit'+'y,\x20litArgs'+'_iridescen'+'ce_thickne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'mbient\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20addAmbie'+'nt(litArgs'+'_worldNorm'+'al);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20dDiffuse'+'Light\x20*\x20(1'+'.0\x20-\x20litAr'+'gs_specula'+'rity);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20move\x20a'+'mbient\x20col'+'or\x20out\x20of\x20'+'diffuse\x20(u'+'sed\x20by\x20Lig'+'htmapper,\x20'+'to\x20multipl'+'y\x20ambient\x20'+'color\x20by\x20a'+'ccumulated'+'\x20AO)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SEPARA'+'TE_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dA'+'mbientLigh'+'t\x20=\x20dDiffu'+'seLight;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_O'+'LD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20*=\x20mate'+'rial_ambie'+'nt;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OCCLUD'+'E_DIRECT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20occludeDi'+'ffuse(litA'+'rgs_ao);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTMAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'dLightMap('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmap,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_lightmap'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dViewDir'+'W,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dRef'+'lDirW,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('litArgs_gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dTBN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTING\x20'+'||\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tionCC(ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_glo'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_FRESNE'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccFresne'+'l\x20=\x20getFre'+'snelCC(dot'+'(dViewDirW'+',\x20litArgs_'+'clearcoat_'+'worldNorma'+'l));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccRef'+'lection\x20*='+'\x20ccFresnel'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccFres'+'nel\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20*=\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SH'+'EEN\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'addReflect'+'ionSheen(l'+'itArgs_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20litArgs_s'+'heen_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Fr')+('esnel\x20has\x20'+'to\x20be\x20appl'+'ied\x20to\x20ref'+'lections\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tion(dRefl'+'DirW,\x20litA'+'rgs_gloss)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_FRES'+'NEL_MODEL\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dRe'+'flection.r'+'gb\x20*=\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_iri'+'descence_i'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.rgb\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n.rgb\x20*=\x20l'+'itArgs_spe'+'cularityFa'+'ctor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20ARE'+'A_LIGHTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20has\x20to\x20'+'be\x20accumul'+'ated\x20diffe'+'rently\x20if\x20'+'we\x20want\x20ar'+'ea\x20lights\x20'+'to\x20look\x20co'+'rrect\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dS'+'pecularLig'+'ht\x20*=\x20litA'+'rgs_specul'+'arity;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'valuate\x20ma'+'terial\x20bas'+'ed\x20area\x20li'+'ghts\x20data,')+('\x20shared\x20by'+'\x20all\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20calcLTC'+'LightValue'+'s(litArgs_'+'gloss,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_gl'+'oss,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20LOOP\x20-\x20e'+'valuate\x20al'+'l\x20non-clus'+'tered\x20ligh'+'ts\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT_COUNT\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tEvaluatio'+'nPS,\x20LIGHT'+'_COUNT\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clust'+'ered\x20light'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addClust'+'eredLights'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20dReflDi'+'rW,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_CLEA'+'RCOAT)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_gl'+'oss,\x20litAr'+'gs_specula'+'rity,\x20dVer'+'texNormalW'+',\x20dTBN,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_gloss,'+'\x20litArgs_s'+'heen_gloss'+',\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20AR'+'EA_LIGHTS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity\x20=\x20ve'+'c3(1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dViewD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'thickness,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_albe'+'do,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_t'+'ransmissio'+'n,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_disp'+'ersion\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_iridesc'+'ence_inten'+'sity\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20ambient'+'\x20occlusion'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_OC')+('CLUDE_DIRE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20occlu'+'deDiffuse('+'litArgs_ao'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIT_OCCLU'+'DE_SPECULA'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeS'+'pecular(li'+'tArgs_glos'+'s,\x20litArgs'+'_ao,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULARIT'+'Y_FACTOR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20*=\x20litAr'+'gs_specula'+'rityFactor'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIT_OPACI'+'TY_FADES_S'+'PECULAR)\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIT_BLEN'+'D_TYPE\x20==\x20'+'NORMAL\x20||\x20'+'LIT_BLEND_'+'TYPE\x20==\x20PR'+'EMULTIPLIE'+'D\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20specLum\x20='+'\x20dot((dSpe'+'cularLight'+'\x20+\x20dReflec'+'tion.rgb\x20*'+'\x20dReflecti'+'on.a),\x20vec'+'3(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecLum\x20+=\x20'+'dot(ccSpec'+'ularLight\x20'+'*\x20litArgs_'+'clearcoat_'+'specularit'+'y\x20+\x20ccRefl'+'ection\x20*\x20l'+'itArgs_cle'+'arcoat_spe'+'cularity,\x20'+'vec3(\x200.21'+'26,\x200.7152'+',\x200.0722\x20)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_opacity\x20'+'=\x20clamp(li'+'tArgs_opac'+'ity\x20+\x20gamm'+'aCorrectIn'+'put(specLu'+'m),\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_op'+'acity\x20*=\x20m'+'aterial_al'+'phaFade;\x0a\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nd\x20chunks\x20'+'-\x20when\x20bak'+'ing\x20lightm'+'ap\x0a\x20\x20\x20\x20#if'+'def\x20LIT_LI')+('GHTMAP_BAK'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22bak'+'eLmEndPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_LIGHTM'+'AP_BAKING_'+'DIR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22bake'+'DirLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20en'+'d\x20chunks\x20-'+'\x20in\x20all\x20ot'+'her\x20cases\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22en'+'dPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22outputA'+'lphaPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_MSDF\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20applyMs'+'df(gl_Frag'+'Color);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22output'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22de'+'bugOutputP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HADOW_CATC'+'HER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20when\x20the'+'\x20shadow\x20ca'+'tcher\x20is\x20e'+'nabled\x20-\x20a'+'ccumulated'+'\x20shadows\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20=\x20vec3'+'(dShadowCa'+'tcher);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a'),G1='\x0a\x0a//\x20globa'+'ls\x0avec3\x20sR'+'eflection;'+'\x0avec3\x20dVer'+'texNormalW'+';\x0avec3\x20dTa'+'ngentW;\x0ave'+'c3\x20dBinorm'+'alW;\x0avec3\x20'+'dViewDirW;'+'\x0avec3\x20dRef'+'lDirW;\x0avec'+'3\x20ccReflDi'+'rW;\x0a\x0a//\x20Pe'+'r-light\x20te'+'mporaries\x0a'+'vec3\x20dLigh'+'tDirNormW;'+'\x0afloat\x20dAt'+'ten;\x0a\x0a//\x20O'+'utputs\x0amat'+'3\x20dTBN;\x0ave'+'c4\x20dReflec'+'tion;\x0avec3'+'\x20dDiffuseL'+'ight;\x0avec3'+'\x20dSpecular'+'Light;\x0aflo'+'at\x20ccFresn'+'el;\x0avec3\x20c'+'cReflectio'+'n;\x0avec3\x20cc'+'SpecularLi'+'ght;\x0afloat'+'\x20ccSpecula'+'rityNoFres'+';\x0avec3\x20sSp'+'ecularLigh'+'t;\x0a\x0a//\x20FRA'+'GMENT\x20SHAD'+'ER\x20INPUTS:'+'\x20UNIFORMS\x0a'+'\x0a#ifdef\x20LI'+'T_DISPERSI'+'ON\x0a\x20\x20\x20\x20uni'+'form\x20float'+'\x20material_'+'dispersion'+';\x0a#endif\x0a\x0a'+'#ifndef\x20LI'+'T_OPACITY_'+'FADES_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_alphaFad'+'e;\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_SSAO\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20s'+'saoTexture'+';\x0a\x20\x20\x20\x20unif'+'orm\x20vec2\x20s'+'saoTexture'+'SizeInv;\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20a'+'nd\x20shadowi'+'ng\x20declara'+'tions\x0a\x0a#if'+'def\x20LIT_SH'+'ADOW_CATCH'+'ER\x0a\x20\x20\x20\x20//\x20'+'a\x20variable'+'\x20to\x20accumu'+'late\x20shado'+'ws\x20for\x20sha'+'dow\x20catche'+'r\x20material'+'s\x0a\x20\x20\x20\x20floa'+'t\x20dShadowC'+'atcher\x20=\x201'+'.0;\x0a#endif'+'\x0a\x0a//\x20LOOP\x20'+'-\x20uniform\x20'+'declaratio'+'ns\x20for\x20all'+'\x20non-clust'+'ered\x20light'+'s\x0a#if\x20LIGH'+'T_COUNT\x20>\x20'+'0\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDeclarati'+'onPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+('\x20#if\x20LIT_F'+'RESNEL_MOD'+'EL\x20==\x20NONE'+'\x20&&\x20!defin'+'ed(LIT_REF'+'LECTIONS)\x20'+'&&\x20!define'+'d(LIT_DIFF'+'USE_MAP)\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a//\x20lightm'+'ap\x20baking\x0a'+'#ifdef\x20STD'+'_LIGHTMAP_'+'DIR\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20bakeDir;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_L'+'IGHTMAP_BA'+'KING_ADD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20ambie'+'ntBakeOccl'+'usionContr'+'ast;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20ambient'+'BakeOcclus'+'ionBrightn'+'ess;\x0a#endi'+'f\x0a'),H1='\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4(0'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ccS'+'pecularLig'+'ht\x20=\x20vec3('+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'NONE_SLICE'+'_MODE\x20==\x20S'+'LICED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22startN'+'ineSlicedP'+'S\x22\x0a\x20\x20\x20\x20#el'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20TILE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'startNineS'+'licedTiled'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_NEEDS_NOR'+'MAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW\x20=\x20n'+'ormalize(v'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'TANGENTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_HEI'+'GHTS)\x20||\x20d'+'efined(LIT'+'_USE_NORMA'+'LS)\x20||\x20def'+'ined(LIT_U'+'SE_CLEARCO'+'AT_NORMALS'+')\x20||\x20defin'+'ed(LIT_GGX'+'_SPECULAR)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dTa'+'ngentW\x20=\x20v'+'TangentW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dBin'+'ormalW\x20=\x20v'+'BinormalW;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20getVie'+'wDir();\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_TB'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getTBN'+'(dTangentW'+',\x20dBinorma'+'lW,\x20dVerte'+'xNormalW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_TWO_S'+'IDED_LIGHT'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'handleTwoS'+'idedLighti'+'ng();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20i'+'nvoke\x20fron'+'tend\x20funct'+'ions\x0a\x20\x20\x20\x20e'+'valuateFro'+'ntend();\x0a\x0a'+('\x20\x20\x20\x20#inclu'+'de\x20\x22debugP'+'rocessFron'+'tendPS\x22\x0a\x0a\x20'+'\x20\x20\x20evaluat'+'eBackend()'+';\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a'),W1='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20vec3\x20mate'+'rial_ambie'+'nt;\x0a\x0a#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTING\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightSp'+'ecularAnis'+'oGGXPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightS'+'pecularBli'+'nnPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'combinePS\x22'+'\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tmapAddPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'ADD_AMBIEN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ambi'+'entPS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIT_MSDF'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22msdfP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'include\x20\x22v'+'iewDirPS\x22\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flDirAniso'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a//\x20li'+'ghting\x20fun'+'ctionality')+('\x0a#include\x20'+'\x22lightingP'+'S\x22\x0a\x0a'),$1='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',X1='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',q1='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec4\x20ve'+'rtex_color'+';\x0a#endif\x0a\x0a'+'#ifdef\x20NIN'+'ESLICED\x0a\x0a\x20'+'\x20\x20\x20varying'+'\x20vec2\x20vMas'+'k;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'vTiledUv;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20v'+'ec2\x20outerS'+'cale;\x0a\x20\x20\x20\x20'+'uniform\x20me'+'diump\x20vec4'+'\x20atlasRect'+';\x0a\x0a#endif\x0a'+'\x0avec3\x20dPos'+'itionW;\x0ama'+'t4\x20dModelM'+'atrix;\x0a\x0a#i'+'nclude\x20\x22tr'+'ansformCor'+'eVS\x22\x0a\x0a#ifd'+'ef\x20UV0\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'c2\x20vertex_'+'texCoord1;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22uv1VS'+'\x22\x0a#endif\x0a\x0a'+'\x0a#ifdef\x20LI'+'NEAR_DEPTH'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20#d'+'efine\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'transformV'+'S\x22\x0a\x0a#ifdef'+'\x20NORMALS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22normalC'+'oreVS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22normalVS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20TANG'+'ENTS\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_tangent;\x0a'+'#endif\x0a\x0a//'+'\x20expand\x20un'+'iforms\x20for'+'\x20uv\x20transf'+'orms\x0a#incl'+'ude\x20\x22uvTra'+'nsformUnif'+'ormsPS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'#ifdef\x20MSD'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22msdf'+'VS\x22\x0a#endif'+'\x0a\x0a#include'+'\x20\x20\x22litUser'+'CodeVS\x22\x0a\x0av'+'oid\x20main(v'+'oid)\x20{\x0a\x0a\x20\x20'+'\x20\x20#include'+('\x20\x22litUserM'+'ainStartVS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'default\x20po'+'int\x20size\x20t'+'o\x201\x20in\x20cas'+'e\x20the\x20shad'+'er\x20is\x20used'+'\x20with\x20poin'+'ts\x0a\x20\x20\x20\x20gl_'+'PointSize\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20getP'+'osition();'+'\x0a\x20\x20\x20\x20vPosi'+'tionW\x20=\x20ge'+'tWorldPosi'+'tion();\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'NORMALS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vNor'+'malW\x20=\x20get'+'Normal();\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20TANGENT'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vTangentW\x20'+'=\x20normaliz'+'e(dNormalM'+'atrix\x20*\x20ve'+'rtex_tange'+'nt.xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vBi'+'normalW\x20=\x20'+'cross(vNor'+'malW,\x20vTan'+'gentW)\x20*\x20v'+'ertex_tang'+'ent.w;\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(GGX_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3(0,\x201'+',\x200));\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV0\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv0'+'\x20=\x20getUv0('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20UV'+'0_UNMODIFI'+'ED\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv1\x20=\x20ge'+'tUv1();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20UV1_UNM'+'ODIFIED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vUv1\x20=\x20uv1'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20expa'+'nd\x20code\x20fo'+'r\x20uv\x20trans'+'forms\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'uvTransfor'+'mVS,\x20UV_TR'+'ANSFORMS_C'+'OUNT\x22\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20VE'+'RTEX_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition')+(',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vPosi'+'tionW,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20M'+'SDF\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20unpackMs'+'dfParams()'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tUserMainE'+'ndVS\x22\x0a}\x0a'),j1='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20g'+'etPickOutp'+'ut();\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20P'+'REPASS_PAS'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20float'+'2vec4(vLin'+'earDepth);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a',Y1='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avec3\x20litA'+'rgs_albedo'+';\x0a\x0a//\x20Tran'+'sparency\x0af'+'loat\x20litAr'+'gs_opacity'+';\x0a\x0a//\x20Emis'+'sion\x20color'+'\x0avec3\x20litA'+'rgs_emissi'+'on;\x0a\x0a//\x20No'+'rmal\x20direc'+'tion\x20in\x20wo'+'rld\x20space\x0a'+'vec3\x20litAr'+'gs_worldNo'+'rmal;\x0a\x0a//\x20'+'Ambient\x20oc'+'clusion\x20am'+'ount,\x20rang'+'e\x20[0..1]\x0af'+'loat\x20litAr'+'gs_ao;\x0a\x0a//'+'\x20Light\x20map'+'\x20color\x0avec'+'3\x20litArgs_'+'lightmap;\x0a'+'\x0a//\x20Light\x20'+'map\x20direct'+'ion\x0avec3\x20l'+'itArgs_lig'+'htmapDir;\x0a'+'\x0a//\x20Surfac'+'e\x20metalnes'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_met'+'alness;\x0a\x0a/'+'/\x20The\x20f0\x20s'+'pecularity'+'\x20factor\x0ave'+'c3\x20litArgs'+'_speculari'+'ty;\x0a\x0a//\x20Sp'+'ecularity\x20'+'intensity\x20'+'factor,\x20ra'+'nge\x20[0..1]'+'\x0afloat\x20lit'+'Args_specu'+'larityFact'+'or;\x0a\x0a//\x20Th'+'e\x20microfac'+'et\x20glossin'+'ess\x20factor'+',\x20range\x20[0'+'..1]\x0afloat'+'\x20litArgs_g'+'loss;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_sh'+'een_gloss;'+'\x0a\x0a//\x20The\x20c'+'olor\x20of\x20th'+'e\x20f0\x20specu'+'larity\x20fac'+'tor\x20for\x20th'+'e\x20sheen\x20la'+'yer\x0avec3\x20l'+'itArgs_she'+'en_specula'+'rity;\x0a\x0a//\x20'+'Transmissi'+'on\x20factor\x20'+'(refractio'+'n),\x20range\x20'+'[0..1]\x0aflo'+'at\x20litArgs'+'_transmiss'+'ion;\x0a\x0a//\x20U'+'niform\x20thi'+'ckness\x20of\x20'+'medium,\x20us'+'ed\x20by\x20tran'+'smission,\x20'+'range\x20[0..'+'inf]\x0afloat'+'\x20litArgs_t'+'hickness;\x0a'+'\x0a//\x20Index\x20'+'of\x20refract'+'ion\x0afloat\x20'+('litArgs_io'+'r;\x0a\x0a//\x20Dis'+'persion,\x20r'+'ange\x20[0..1'+']\x20typicall'+'y,\x20but\x20can'+'\x20be\x20higher'+'\x0afloat\x20lit'+'Args_dispe'+'rsion;\x0a\x0a//'+'\x20Iridescen'+'ce\x20effect\x20'+'intensity,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_ir'+'idescence_'+'intensity;'+'\x0a\x0a//\x20Thick'+'ness\x20of\x20th'+'e\x20iridesce'+'nt\x20microfi'+'lm\x20layer,\x20'+'value\x20is\x20i'+'n\x20nanomete'+'rs,\x20range\x20'+'[0..1000]\x0a'+'float\x20litA'+'rgs_irides'+'cence_thic'+'kness;\x0a\x0a//'+'\x20The\x20norma'+'l\x20used\x20for'+'\x20the\x20clear'+'coat\x20layer'+'\x0avec3\x20litA'+'rgs_clearc'+'oat_worldN'+'ormal;\x0a\x0a//'+'\x20Intensity'+'\x20of\x20the\x20cl'+'earcoat\x20la'+'yer,\x20range'+'\x20[0..1]\x0afl'+'oat\x20litArg'+'s_clearcoa'+'t_specular'+'ity;\x0a\x0a//\x20G'+'lossiness\x20'+'of\x20clearco'+'at\x20layer,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_cle'+'arcoat_glo'+'ss;\x0a\x0a'),K1='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20te'+'xtureBias\x20'+'=\x20-1000.0;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20texture'+'Bias;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litShade'+'rArgsPS\x22\x0a',Z1='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20vec3\x20v'+'iew_positi'+'on;\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20light_ra'+'dius;\x0a#end'+'if\x0a\x0a#if\x20SH'+'ADOW_TYPE\x20'+'==\x20PCSS_32'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22line'+'arizeDepth'+'PS\x22\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'evaluateFr'+'ontend();\x0a'+'\x0a\x20\x20\x20\x20//\x20us'+'ing\x20non-st'+'andard\x20dep'+'th,\x20i.e\x20gl'+'_FragCoord'+'.z\x0a\x20\x20\x20\x20#if'+'def\x20PERSPE'+'CTIVE_DEPT'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20gl_Fra'+'gCoord.z;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SHADOW_'+'TYPE\x20==\x20PC'+'SS_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot/omn'+'i\x20shadows\x20'+'currently\x20'+'use\x20linear'+'\x20depth.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20TODO:\x20u'+'se\x20perspec'+'tive\x20depth'+'\x20for\x20spot/'+'omni\x20the\x20s'+'ame\x20way\x20as'+'\x20direction'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT_TYPE\x20'+'!=\x20DIRECTI'+'ONAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20depth\x20=\x20l'+'inearizeDe'+'pthWithPar'+'ams(depth,'+'\x20camera_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20min(di'+'stance(vie'+'w_position'+',\x20vPositio'+'nW)\x20/\x20ligh'+'t_radius,\x20'+'0.99999);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20MODI'+'FIED_DEPTH'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20VSM_'+'16F\x20||\x20SHA'+'DOW_TYPE\x20='+'=\x20VSM_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20exponen'+'t\x20=\x2015.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+('t\x20exponent'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20depth\x20=\x20'+'2.0\x20*\x20dept'+'h\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dep'+'th\x20=\x20\x20exp('+'exponent\x20*'+'\x20depth);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(dep'+'th,\x20depth*'+'depth,\x201.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'SHADOW_TYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'tore\x20depth'+'\x20into\x20R32\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.r\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ODIFIED_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20If\x20we\x20e'+'nd\x20up\x20usin'+'g\x20modified'+'\x20depth,\x20it'+'\x20needs\x20to\x20'+'be\x20explici'+'tly\x20writte'+'n\x20to\x20gl_Fr'+'agDepth\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gDepth\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20just\x20the\x20'+'simplest\x20c'+'ode,\x20color'+'\x20is\x20not\x20wr'+'itten\x20anyw'+'ay\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'}\x0a'),Q1='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0amat'+'3\x20transpos'+'eMat3(\x20con'+'st\x20in\x20mat3'+'\x20m\x20)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20tmp;'+'\x0a\x20\x20\x20\x20tmp[\x20'+'0\x20]\x20=\x20vec3'+'(\x20m[\x200\x20].x'+',\x20m[\x201\x20].x'+',\x20m[\x202\x20].x'+'\x20);\x0a\x20\x20\x20\x20tm'+'p[\x201\x20]\x20=\x20v'+'ec3(\x20m[\x200\x20'+'].y,\x20m[\x201\x20'+'].y,\x20m[\x202\x20'+'].y\x20);\x0a\x20\x20\x20'+'\x20tmp[\x202\x20]\x20'+'=\x20vec3(\x20m['+'\x200\x20].z,\x20m['+'\x201\x20].z,\x20m['+'\x202\x20].z\x20);\x0a'+'\x20\x20\x20\x20return'+'\x20tmp;\x0a}\x0a\x0av'+'ec2\x20LTC_Uv'+'(\x20const\x20in'+'\x20vec3\x20N,\x20c'+'onst\x20in\x20ve'+'c3\x20V,\x20cons'+'t\x20in\x20float'+'\x20roughness'+'\x20)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20LUT_SIZE\x20'+'=\x2064.0;\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20LUT_SC'+'ALE\x20=\x20(\x20LU'+'T_SIZE\x20-\x201'+'.0\x20)\x20/\x20LUT'+'_SIZE;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20LUT_BIA'+'S\x20=\x200.5\x20/\x20'+'LUT_SIZE;\x0a'+'\x20\x20\x20\x20float\x20'+'dotNV\x20=\x20sa'+'turate(\x20do'+'t(\x20N,\x20V\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'texture\x20pa'+'rameterize'+'d\x20by\x20sqrt('+'\x20GGX\x20alpha'+'\x20)\x20and\x20sqr'+'t(\x201\x20-\x20cos'+'(\x20theta\x20)\x20'+')\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20vec2'+'(\x20roughnes'+'s,\x20sqrt(\x201'+'.0\x20-\x20dotNV'+'\x20)\x20);\x0a\x20\x20\x20\x20'+'uv\x20=\x20uv\x20*\x20'+'LUT_SCALE\x20'+'+\x20LUT_BIAS'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'float\x20LTC_'+'ClippedSph'+'ereFormFac'+'tor(\x20const'+'\x20in\x20vec3\x20f'+'\x20)\x20{\x0a\x20\x20\x20\x20/'+'/\x20Real-Tim'+'e\x20Area\x20Lig'+'hting:\x20a\x20J'+'ourney\x20fro'+'m\x20Research'+'\x20to\x20Produc'+'tion\x20(p.10'+'2)\x0a\x20\x20\x20\x20//\x20'+('An\x20approxi'+'mation\x20of\x20'+'the\x20form\x20f'+'actor\x20of\x20a'+'\x20horizon-c'+'lipped\x20rec'+'tangle.\x0a\x20\x20'+'\x20\x20float\x20l\x20'+'=\x20length(\x20'+'f\x20);\x0a\x20\x20\x20\x20r'+'eturn\x20max('+'\x20(\x20l\x20*\x20l\x20+'+'\x20f.z\x20)\x20/\x20('+'\x20l\x20+\x201.0\x20)'+',\x200.0\x20);\x0a}'+'\x0a\x0avec3\x20LTC'+'_EdgeVecto'+'rFormFacto'+'r(\x20const\x20i'+'n\x20vec3\x20v1,'+'\x20const\x20in\x20'+'vec3\x20v2\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20x\x20=\x20dot('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20float'+'\x20y\x20=\x20abs(\x20'+'x\x20);\x0a\x20\x20\x20\x20/'+'/\x20rational'+'\x20polynomia'+'l\x20approxim'+'ation\x20to\x20t'+'heta\x20/\x20sin'+'(\x20theta\x20)\x20'+'/\x202PI\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'0.8543985\x20'+'+\x20(\x200.4965'+'155\x20+\x200.01'+'45206\x20*\x20y\x20'+')\x20*\x20y;\x0a\x20\x20\x20'+'\x20float\x20b\x20='+'\x203.4175940'+'\x20+\x20(\x204.161'+'6724\x20+\x20y\x20)'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'float\x20v\x20=\x20'+'a\x20/\x20b;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta_sinthet'+'a\x20=\x20(\x20x\x20>\x20'+'0.0\x20)\x20?\x20v\x20'+':\x200.5\x20*\x20in'+'versesqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7\x20)\x20)\x20-\x20'+'v;\x0a\x20\x20\x20\x20ret'+'urn\x20cross('+'\x20v1,\x20v2\x20)\x20'+'*\x20theta_si'+'ntheta;\x0a}\x0a'+'\x0astruct\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'d0;\x0a\x20\x20\x20\x20ve'+'c3\x20coord1;'+'\x0a\x20\x20\x20\x20vec3\x20'+'coord2;\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'rd3;\x0a};\x0a\x0af'+'loat\x20LTC_E'+'valuateRec'+'t(\x20const\x20i'+'n\x20vec3\x20N,\x20'+'const\x20in\x20v'+'ec3\x20V,\x20con'+'st\x20in\x20vec3'+'\x20P,\x20const\x20'+'in\x20mat3\x20mI'+'nv,\x20const\x20'+'in\x20Coords\x20'+'rectCoords'+')\x20{\x0a\x20\x20\x20\x20//'+'\x20bail\x20if\x20p'+'oint\x20is\x20on'+'\x20back\x20side'+'\x20of\x20plane\x20'+'of\x20light\x0a\x20'+'\x20\x20\x20//\x20assu'+'mes\x20ccw\x20wi'+'nding\x20orde'+'r\x20of\x20light'+'\x20vertices\x0a'+'\x20\x20\x20\x20vec3\x20v'+'1\x20=\x20rectCo'+'ords.coord'+'1\x20-\x20rectCo'+'ords.coord'+'0;\x0a\x20\x20\x20\x20vec')+('3\x20v2\x20=\x20rec'+'tCoords.co'+'ord3\x20-\x20rec'+'tCoords.co'+'ord0;\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'lightNorma'+'l\x20=\x20cross('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20//\x20if'+'(\x20dot(\x20lig'+'htNormal,\x20'+'P\x20-\x20rectCo'+'ords.coord'+'0\x20)\x20<\x200.0\x20'+')\x20return\x200'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20factor'+'\x20=\x20sign(-d'+'ot(\x20lightN'+'ormal,\x20P\x20-'+'\x20rectCoord'+'s.coord0\x20)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20vec3\x20T1,'+'\x20T2;\x0a\x20\x20\x20\x20T'+'1\x20=\x20normal'+'ize(\x20V\x20-\x20N'+'\x20*\x20dot(\x20V,'+'\x20N\x20)\x20);\x0a\x20\x20'+'\x20\x20T2\x20=\x20\x20fa'+'ctor\x20*\x20cro'+'ss(\x20N,\x20T1\x20'+');\x20//\x20nega'+'ted\x20from\x20p'+'aper;\x20poss'+'ibly\x20due\x20t'+'o\x20a\x20differ'+'ent\x20handed'+'ness\x20of\x20wo'+'rld\x20coordi'+'nate\x20syste'+'m\x0a\x20\x20\x20\x20//\x20c'+'ompute\x20tra'+'nsform\x0a\x20\x20\x20'+'\x20mat3\x20mat\x20'+'=\x20mInv\x20*\x20t'+'ransposeMa'+'t3(\x20mat3(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20transfor'+'m\x20rect\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'ds[\x204\x20];\x0a\x20'+'\x20\x20\x20coords['+'\x200\x20]\x20=\x20mat'+'\x20*\x20(\x20rectC'+'oords.coor'+'d0\x20-\x20P\x20);\x0a'+'\x20\x20\x20\x20coords'+'[\x201\x20]\x20=\x20ma'+'t\x20*\x20(\x20rect'+'Coords.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20coord'+'s[\x202\x20]\x20=\x20m'+'at\x20*\x20(\x20rec'+'tCoords.co'+'ord2\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20coor'+'ds[\x203\x20]\x20=\x20'+'mat\x20*\x20(\x20re'+'ctCoords.c'+'oord3\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20//\x20'+'project\x20re'+'ct\x20onto\x20sp'+'here\x0a\x20\x20\x20\x20c'+'oords[\x200\x20]'+'\x20=\x20normali'+'ze(\x20coords'+'[\x200\x20]\x20);\x0a\x20'+'\x20\x20\x20coords['+'\x201\x20]\x20=\x20nor'+'malize(\x20co'+'ords[\x201\x20]\x20'+');\x0a\x20\x20\x20\x20coo'+'rds[\x202\x20]\x20='+'\x20normalize'+'(\x20coords[\x20'+'2\x20]\x20);\x0a\x20\x20\x20'+'\x20coords[\x203'+'\x20]\x20=\x20norma'+'lize(\x20coor'+'ds[\x203\x20]\x20);')+('\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20ve'+'ctor\x20form\x20'+'factor\x0a\x20\x20\x20'+'\x20vec3\x20vect'+'orFormFact'+'or\x20=\x20vec3('+'\x200.0\x20);\x0a\x20\x20'+'\x20\x20vectorFo'+'rmFactor\x20+'+'=\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[\x200\x20],'+'\x20coords[\x201'+'\x20]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20+=\x20'+'LTC_EdgeVe'+'ctorFormFa'+'ctor(\x20coor'+'ds[\x201\x20],\x20c'+'oords[\x202\x20]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa'+'ctor\x20+=\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[\x202\x20],\x20coo'+'rds[\x203\x20]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20+=\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[\x20'+'3\x20],\x20coord'+'s[\x200\x20]\x20);\x0a'+'\x20\x20\x20\x20//\x20adj'+'ust\x20for\x20ho'+'rizon\x20clip'+'ping\x0a\x20\x20\x20\x20f'+'loat\x20resul'+'t\x20=\x20LTC_Cl'+'ippedSpher'+'eFormFacto'+'r(\x20vectorF'+'ormFactor\x20'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0aCoor'+'ds\x20dLTCCoo'+'rds;\x0aCoord'+'s\x20getLTCLi'+'ghtCoords('+'vec3\x20light'+'Pos,\x20vec3\x20'+'halfWidth,'+'\x20vec3\x20half'+'Height){\x0a\x20'+'\x20\x20\x20Coords\x20'+'coords;\x0a\x20\x20'+'\x20\x20coords.c'+'oord0\x20=\x20li'+'ghtPos\x20+\x20h'+'alfWidth\x20-'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord1'+'\x20=\x20lightPo'+'s\x20-\x20halfWi'+'dth\x20-\x20half'+'Height;\x0a\x20\x20'+'\x20\x20coords.c'+'oord2\x20=\x20li'+'ghtPos\x20-\x20h'+'alfWidth\x20+'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord3'+'\x20=\x20lightPo'+'s\x20+\x20halfWi'+'dth\x20+\x20half'+'Height;\x0a\x20\x20'+'\x20\x20return\x20c'+'oords;\x0a}\x0a\x0a'+'float\x20dSph'+'ereRadius;'+'\x0aCoords\x20ge'+'tSphereLig'+'htCoords(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight){\x0a\x20\x20'+'\x20\x20//\x20used\x20'+'for\x20simple'+'\x20sphere\x20li')+('ght\x20fallof'+'f\x0a\x20\x20\x20\x20//\x20a'+'lso,\x20the\x20c'+'ode\x20only\x20h'+'andles\x20a\x20s'+'pherical\x20l'+'ight,\x20it\x20c'+'annot\x20be\x20n'+'on-uniform'+'ly\x20scaled\x20'+'in\x20world\x20s'+'pace,\x20and\x20'+'so\x20we\x20enfo'+'rce\x20it\x20her'+'e\x0a\x20\x20\x20\x20dSph'+'ereRadius\x20'+'=\x20max(leng'+'th(halfWid'+'th),\x20lengt'+'h(halfHeig'+'ht));\x0a\x0a\x20\x20\x20'+'\x20//\x20Billbo'+'ard\x20the\x202d'+'\x20light\x20qua'+'d\x20to\x20refle'+'ction\x20vect'+'or,\x20as\x20it\x27'+'s\x20used\x20for'+'\x20specular.'+'\x20This\x20allo'+'ws\x20us\x20to\x20u'+'se\x20disk\x20ma'+'th\x20for\x20the'+'\x20sphere.\x0a\x20'+'\x20\x20\x20vec3\x20f\x20'+'=\x20reflect('+'normalize('+'lightPos\x20-'+'\x20view_posi'+'tion),\x20vNo'+'rmalW);\x0a\x20\x20'+'\x20\x20vec3\x20w\x20='+'\x20normalize'+'(cross(f,\x20'+'halfHeight'+'));\x0a\x20\x20\x20\x20ve'+'c3\x20h\x20=\x20nor'+'malize(cro'+'ss(f,\x20w));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20getLTCL'+'ightCoords'+'(lightPos,'+'\x20w\x20*\x20dSphe'+'reRadius,\x20'+'h\x20*\x20dSpher'+'eRadius);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20LTC\x20L'+'UT\x20texture'+'\x20lookup\x0ave'+'c2\x20dLTCUV;'+'\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20vec2'+'\x20ccLTCUV;\x0a'+'#endif\x0a\x0ave'+'c2\x20getLTCL'+'ightUV(flo'+'at\x20gloss,\x20'+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+')\x0a{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20max('+'(1.0\x20-\x20glo'+'ss)\x20*\x20(1.0'+'\x20-\x20gloss),'+'\x200.001);\x0a\x20'+'\x20\x20\x20return\x20'+'LTC_Uv(\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'roughness\x20'+');\x0a}\x0a\x0a//\x20u'+'sed\x20for\x20en'+'ergy\x20conse'+'rvation\x20an'+'d\x20to\x20modul'+'ate\x20specul'+'ar\x0avec3\x20dL'+'TCSpecFres'+';\x0a#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20vec'+'3\x20ccLTCSpe'+'cFres;\x0a#en'+'dif\x0a\x0avec3\x20'+'getLTCLigh')+('tSpecFres('+'vec2\x20uv,\x20v'+'ec3\x20specul'+'arity)\x0a{\x0a\x20'+'\x20\x20\x20vec4\x20t2'+'\x20=\x20texture'+'2DLod(area'+'LightsLutT'+'ex2,\x20uv,\x200'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20spec'+'ularity\x20*\x20'+'t2.x\x20+\x20(\x20v'+'ec3(\x201.0\x20)'+'\x20-\x20specula'+'rity)\x20*\x20t2'+'.y;\x0a}\x0a\x0avoi'+'d\x20calcLTCL'+'ightValues'+'(float\x20glo'+'ss,\x20vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20speculari'+'ty,\x20float\x20'+'clearcoatG'+'loss,\x20vec3'+'\x20clearcoat'+'WorldNorma'+'l,\x20float\x20c'+'learcoatSp'+'ecularity)'+'\x0a{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x20\x0a\x0a#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20cc'+'LTCUV\x20=\x20ge'+'tLTCLightU'+'V(clearcoa'+'tGloss,\x20cl'+'earcoatWor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20ccLTCS'+'pecFres\x20=\x20'+'getLTCLigh'+'tSpecFres('+'ccLTCUV,\x20v'+'ec3(clearc'+'oatSpecula'+'rity));\x0a#e'+'ndif\x0a}\x0a\x0avo'+'id\x20calcRec'+'tLightValu'+'es(vec3\x20li'+'ghtPos,\x20ve'+'c3\x20halfWid'+'th,\x20vec3\x20h'+'alfHeight)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0avoid\x20c'+'alcDiskLig'+'htValues(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight)\x20{\x0a\x20'+'\x20\x20\x20calcRec'+'tLightValu'+'es(lightPo'+'s,\x20halfWid'+'th,\x20halfHe'+'ight);\x0a}\x0av'+'oid\x20calcSp'+'hereLightV'+'alues(vec3'+'\x20lightPos,'+'\x20vec3\x20half'+'Width,\x20vec'+'3\x20halfHeig'+'ht)\x20{\x0a\x20\x20\x20\x20')+('dLTCCoords'+'\x20=\x20getSphe'+'reLightCoo'+'rds(lightP'+'os,\x20halfWi'+'dth,\x20halfH'+'eight);\x0a}\x0a'+'\x0a//\x20An\x20ext'+'ended\x20vers'+'ion\x20of\x20the'+'\x20implement'+'ation\x20from'+'\x20\x22How\x20to\x20s'+'olve\x20a\x20cub'+'ic\x20equatio'+'n,\x20revisit'+'ed\x22\x0a//\x20htt'+'p://moment'+'singraphic'+'s.de/?p=10'+'5\x0avec3\x20Sol'+'veCubic(ve'+'c4\x20Coeffic'+'ient)\x0a{\x0a\x20\x20'+'\x20\x20float\x20pi'+'\x20=\x203.14159'+';\x0a\x20\x20\x20\x20//\x20N'+'ormalize\x20t'+'he\x20polynom'+'ial\x0a\x20\x20\x20\x20Co'+'efficient.'+'xyz\x20/=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20//\x20D'+'ivide\x20midd'+'le\x20coeffic'+'ients\x20by\x20t'+'hree\x0a\x20\x20\x20\x20C'+'oefficient'+'.yz\x20/=\x203.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20A\x20=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20floa'+'t\x20B\x20=\x20Coef'+'ficient.z;'+'\x0a\x20\x20\x20\x20float'+'\x20C\x20=\x20Coeff'+'icient.y;\x0a'+'\x20\x20\x20\x20float\x20'+'D\x20=\x20Coeffi'+'cient.x;\x0a\x0a'+'\x20\x20\x20\x20//\x20Com'+'pute\x20the\x20H'+'essian\x20and'+'\x20the\x20discr'+'iminant\x0a\x20\x20'+'\x20\x20vec3\x20Del'+'ta\x20=\x20vec3('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-'+'Coefficien'+'t.z\x20*\x20Coef'+'ficient.z\x20'+'+\x20Coeffici'+'ent.y,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20-Coef'+'ficient.y\x20'+'*\x20Coeffici'+'ent.z\x20+\x20Co'+'efficient.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dot(vec2('+'Coefficien'+'t.z,\x20-Coef'+'ficient.y)'+',\x20Coeffici'+'ent.xy)\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'float\x20Disc'+'riminant\x20='+'\x20dot(vec2('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20vec2\x20xlc'+',\x20xsc;\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20A\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_a'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20C_a\x20=\x20De'+'lta.x;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20D_a\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20')+('\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20Theta\x20'+'=\x20atan(sqr'+'t(Discrimi'+'nant),\x20-D_'+'a)\x20/\x203.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20x_1a\x20'+'=\x202.0\x20*\x20sq'+'rt(-C_a)\x20*'+'\x20cos(Theta'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20x_3'+'a\x20=\x202.0\x20*\x20'+'sqrt(-C_a)'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20x'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20((x_1a'+'\x20+\x20x_3a)\x20>'+'\x202.0\x20*\x20B)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xl\x20=\x20x_1'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'\x20=\x20x_3a;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'c\x20=\x20vec2(x'+'l\x20-\x20B,\x20A);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20D\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_d'+'\x20=\x20D;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'C_d\x20=\x20Delt'+'a.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20D'+'_d\x20=\x20-D\x20*\x20'+'Delta.y\x20+\x20'+'2.0\x20*\x20C\x20*\x20'+'Delta.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20Take\x20the\x20'+'cubic\x20root'+'\x20of\x20a\x20norm'+'alized\x20com'+'plex\x20numbe'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20Thet'+'a\x20=\x20atan(D'+'\x20*\x20sqrt(Di'+'scriminant'+'),\x20-D_d)\x20/'+'\x203.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20x_1d\x20=\x202.'+'0\x20*\x20sqrt(-'+'C_d)\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20x_3d\x20=\x20'+'2.0\x20*\x20sqrt'+'(-C_d)\x20*\x20c'+'os(Theta\x20+'+'\x20(2.0\x20/\x203.'+'0)\x20*\x20pi);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20xs;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(x_1d\x20+\x20x_'+'3d\x20<\x202.0\x20*'+'\x20C)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20xs\x20='+'\x20x_1d;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xs\x20=\x20x_3'+'d;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20xsc\x20=\x20ve'+'c2(-D,\x20xs\x20'+'+\x20C);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20flo'+'at\x20E\x20=\x20\x20xl'+'c.y\x20*\x20xsc.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20F\x20=\x20-xl'+'c.x\x20*\x20xsc.'+'y\x20-\x20xlc.y\x20')+('*\x20xsc.x;\x0a\x20'+'\x20\x20\x20float\x20G'+'\x20=\x20\x20xlc.x\x20'+'*\x20xsc.x;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20x'+'mc\x20=\x20vec2('+'C\x20*\x20F\x20-\x20B\x20'+'*\x20G,\x20-B\x20*\x20'+'F\x20+\x20C\x20*\x20E)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20Root\x20=\x20v'+'ec3(xsc.x\x20'+'/\x20xsc.y,\x20x'+'mc.x\x20/\x20xmc'+'.y,\x20xlc.x\x20'+'/\x20xlc.y);\x0a'+'\x0a\x20\x20\x20\x20if\x20(R'+'oot.x\x20<\x20Ro'+'ot.y\x20&&\x20Ro'+'ot.x\x20<\x20Roo'+'t.z)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root.xy'+'z\x20=\x20Root.y'+'xz;\x0a\x20\x20\x20\x20el'+'se\x20if\x20(Roo'+'t.z\x20<\x20Root'+'.x\x20&&\x20Root'+'.z\x20<\x20Root.'+'y)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root.xyz\x20'+'=\x20Root.xzy'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20Root;\x0a'+'}\x0a\x0afloat\x20L'+'TC_Evaluat'+'eDisk(vec3'+'\x20N,\x20vec3\x20V'+',\x20vec3\x20P,\x20'+'mat3\x20Minv,'+'\x20Coords\x20po'+'ints)\x0a{\x0a\x20\x20'+'\x20\x20//\x20const'+'ruct\x20ortho'+'normal\x20bas'+'is\x20around\x20'+'N\x0a\x20\x20\x20\x20vec3'+'\x20T1\x20=\x20norm'+'alize(V\x20-\x20'+'N\x20*\x20dot(V,'+'\x20N));\x0a\x20\x20\x20\x20'+'vec3\x20T2\x20=\x20'+'cross(N,\x20T'+'1);\x0a\x0a\x20\x20\x20\x20/'+'/\x20rotate\x20a'+'rea\x20light\x20'+'in\x20(T1,\x20T2'+',\x20N)\x20basis'+'\x0a\x20\x20\x20\x20//mat'+'3\x20R\x20=\x20tran'+'spose(mat3'+'(T1,\x20T2,\x20N'+'));\x0a\x20\x20\x20\x20ma'+'t3\x20R\x20=\x20tra'+'nsposeMat3'+'(\x20mat3(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'polygon\x20(a'+'llocate\x205\x20'+'vertices\x20f'+'or\x20clippin'+'g)\x0a\x20\x20\x20\x20vec'+'3\x20L_[\x203\x20];'+'\x0a\x20\x20\x20\x20L_[\x200'+'\x20]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[\x20'+'1\x20]\x20=\x20R\x20*\x20'+'(\x20points.c'+'oord1\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20L_['+'\x202\x20]\x20=\x20R\x20*'+'\x20(\x20points.'+'coord2\x20-\x20P'+'\x20);\x0a\x0a\x20\x20\x20\x20/'+'/\x20init\x20ell'+'ipse\x0a\x20\x20\x20\x20v'+'ec3\x20C\x20\x20=\x200'+'.5\x20*\x20(L_[0'+']\x20+\x20L_[2])'+';\x0a\x20\x20\x20\x20vec3'+'\x20V1\x20=\x200.5\x20'+'*\x20(L_[1]\x20-'+'\x20L_[2]);\x0a\x20'+'\x20\x20\x20vec3\x20V2'+'\x20=\x200.5\x20*\x20('+'L_[1]\x20-\x20L_'+'[0]);\x0a\x0a\x20\x20\x20'+'\x20C\x20\x20=\x20Minv')+('\x20*\x20C;\x0a\x20\x20\x20\x20'+'V1\x20=\x20Minv\x20'+'*\x20V1;\x0a\x20\x20\x20\x20'+'V2\x20=\x20Minv\x20'+'*\x20V2;\x0a\x0a\x20\x20\x20'+'\x20//if(dot('+'cross(V1,\x20'+'V2),\x20C)\x20>\x20'+'0.0)\x0a\x20\x20\x20\x20/'+'/\x20\x20\x20\x20retur'+'n\x200.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20compu'+'te\x20eigenve'+'ctors\x20of\x20e'+'llipse\x0a\x20\x20\x20'+'\x20float\x20a,\x20'+'b;\x0a\x20\x20\x20\x20flo'+'at\x20d11\x20=\x20d'+'ot(V1,\x20V1)'+';\x0a\x20\x20\x20\x20floa'+'t\x20d22\x20=\x20do'+'t(V2,\x20V2);'+'\x0a\x20\x20\x20\x20float'+'\x20d12\x20=\x20dot'+'(V1,\x20V2);\x0a'+'\x20\x20\x20\x20if\x20(ab'+'s(d12)\x20/\x20s'+'qrt(d11\x20*\x20'+'d22)\x20>\x200.0'+'001)\x0a\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20tr\x20=\x20'+'d11\x20+\x20d22;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20det\x20='+'\x20-d12\x20*\x20d1'+'2\x20+\x20d11\x20*\x20'+'d22;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20use'+'\x20sqrt\x20matr'+'ix\x20to\x20solv'+'e\x20for\x20eige'+'nvalues\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20det\x20'+'=\x20sqrt(det'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20u\x20='+'\x200.5\x20*\x20sqr'+'t(tr\x20-\x202.0'+'\x20*\x20det);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20v\x20=\x200.5'+'\x20*\x20sqrt(tr'+'\x20+\x202.0\x20*\x20d'+'et);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20e'+'_max\x20=\x20(u\x20'+'+\x20v)\x20*\x20(u\x20'+'+\x20v);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'e_min\x20=\x20(u'+'\x20-\x20v)\x20*\x20(u'+'\x20-\x20v);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20V1_,\x20V2_;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(d11\x20>\x20'+'d22)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12\x20*\x20V'+'1\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20V2_\x20'+'=\x20d12\x20*\x20V1'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20V1'+'_\x20=\x20d12*V2'+'\x20+\x20(e_max\x20'+'-\x20d22)*V1;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20V2_\x20=\x20d'+'12*V2\x20+\x20(e'+'_min\x20-\x20d22'+')*V1;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20e_max'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'b\x20=\x201.0\x20/\x20'+'e_min;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V1\x20=\x20'+'normalize('+'V1_);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20V2\x20=\x20n'+'ormalize(V'+'2_);\x0a\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20dot(V1'+',\x20V1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20b\x20=\x201'+'.0\x20/\x20dot(V'+'2,\x20V2);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20V1\x20*'+'=\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20*=\x20sqrt('+'b);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'V3\x20=\x20norma'+'lize(cross'+'(V1,\x20V2));'+'\x0a\x20\x20\x20\x20if\x20(d'+'ot(C,\x20V3)\x20'+'<\x200.0)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V3\x20*='+'\x20-1.0;\x0a\x0a\x20\x20'+'\x20\x20float\x20L\x20'+'\x20=\x20dot(V3,'+'\x20C);\x0a\x20\x20\x20\x20f'+'loat\x20x0\x20=\x20'+'dot(V1,\x20C)'+'\x20/\x20L;\x0a\x20\x20\x20\x20'+'float\x20y0\x20='+'\x20dot(V2,\x20C'+')\x20/\x20L;\x0a\x0a\x20\x20'+'\x20\x20float\x20E1'+'\x20=\x20inverse'+'sqrt(a);\x0a\x20'+'\x20\x20\x20float\x20E'+'2\x20=\x20invers'+'esqrt(b);\x0a'+'\x0a\x20\x20\x20\x20a\x20*=\x20'+'L\x20*\x20L;\x0a\x20\x20\x20'+'\x20b\x20*=\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20c0\x20=\x20a'+'\x20*\x20b;\x0a\x20\x20\x20\x20'+'float\x20c1\x20='+'\x20a\x20*\x20b\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0\x20+\x20y0\x20*'+'\x20y0)\x20-\x20a\x20-'+'\x20b;\x0a\x20\x20\x20\x20fl'+'oat\x20c2\x20=\x201'+'.0\x20-\x20a\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0)\x20-\x20b\x20*'+'\x20(1.0\x20+\x20y0'+'\x20*\x20y0);\x0a\x20\x20'+'\x20\x20float\x20c3'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ro'+'ots\x20=\x20Solv'+'eCubic(vec'+'4(c0,\x20c1,\x20'+'c2,\x20c3));\x0a'+'\x20\x20\x20\x20float\x20'+'e1\x20=\x20roots'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20e2\x20=\x20r'+'oots.y;\x0a\x20\x20'+'\x20\x20float\x20e3'+'\x20=\x20roots.z'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20avgDir\x20='+'\x20vec3(a\x20*\x20'+'x0\x20/\x20(a\x20-\x20'+'e2),\x20b\x20*\x20y'+'0\x20/\x20(b\x20-\x20e'+'2),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20mat3\x20'+'rotate\x20=\x20m'+'at3(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20L1\x20=\x20sqrt'+'(-e2\x20/\x20e3)'+';\x0a\x20\x20\x20\x20floa'+'t\x20L2\x20=\x20sqr'+'t(-e2\x20/\x20e1'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20formFa'+'ctor\x20=\x20max'+'(0.0,\x20L1\x20*'+'\x20L2\x20*\x20inve')+('rsesqrt((1'+'.0\x20+\x20L1\x20*\x20'+'L1)\x20*\x20(1.0'+'\x20+\x20L2\x20*\x20L2'+')));\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20const\x20'+'float\x20LUT_'+'SIZE\x20=\x2064.'+'0;\x0a\x20\x20\x20\x20con'+'st\x20float\x20L'+'UT_SCALE\x20='+'\x20(\x20LUT_SIZ'+'E\x20-\x201.0\x20)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20float\x20LU'+'T_BIAS\x20=\x200'+'.5\x20/\x20LUT_S'+'IZE;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20tab'+'ulated\x20hor'+'izon-clipp'+'ed\x20sphere\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vec2(a'+'vgDir.z\x20*\x20'+'0.5\x20+\x200.5,'+'\x20formFacto'+'r);\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv*LUT_'+'SCALE\x20+\x20LU'+'T_BIAS;\x0a\x0a\x20'+'\x20\x20\x20float\x20s'+'cale\x20=\x20tex'+'ture2DLod('+'areaLights'+'LutTex2,\x20u'+'v,\x200.0).w;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20formFac'+'tor*scale;'+'\x0a}\x0a\x0a//\x20LTC'+'_EvaluateD'+'isk\x20in\x20som'+'e\x20rare\x20cas'+'es\x20generea'+'tes\x20NaN\x20va'+'lues\x20in\x20a\x20'+'or\x20b,\x20just'+'\x20before\x20\x27f'+'loat\x20c0\x20=\x20'+'a\x20*\x20b;\x27\x0a//'+'\x20Get\x20rid\x20o'+'f\x20those\x20Na'+'n\x20values\x20b'+'efore\x20they'+'\x20propagate'+'\x20further,\x20'+'as\x20in\x20case'+'\x20of\x20bloom\x20'+'/\x20DOF\x20blur'+'s\x20they\x0a//\x20'+'propagate\x20'+'to\x20large\x20a'+'reas.\x20I\x20di'+'dn\x27t\x20find\x20'+'the\x20actual'+'\x20reason\x20wh'+'ere\x20those\x20'+'come\x20from,'+'\x20so\x20that\x20i'+'s\x20still\x20TO'+'DO.\x0a//\x20Not'+'e\x20that\x20onl'+'y\x20disk/sph'+'ere\x20lights'+'\x20are\x20causi'+'ng\x20it,\x20so\x20'+'only\x20handl'+'e\x20those.\x0af'+'loat\x20FixNa'+'n(float\x20va'+'lue)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'value\x20!=\x20v'+'alue\x20?\x200.0'+'\x20:\x20value;\x20'+'\x20//\x20isnan\x20'+'does\x20not\x20t'+'ranspile\x20c'+'orrectly,\x20'+'use\x20a\x20work'+'around\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20isnan(va'+'lue)\x20?\x200.0'+'\x20:\x20value;\x0a')+('\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afloat\x20'+'getRectLig'+'htDiffuse('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm)\x20{\x0a\x20\x20'+'\x20\x20return\x20L'+'TC_Evaluat'+'eRect(\x20wor'+'ldNormal,\x20'+'viewDir,\x20v'+'PositionW,'+'\x20mat3(\x201.0'+'\x20),\x20dLTCCo'+'ords\x20);\x0a}\x0a'+'\x0afloat\x20get'+'DiskLightD'+'iffuse(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20FixN'+'an(LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mat3('+'\x201.0\x20),\x20dL'+'TCCoords\x20)'+');\x0a}\x0a\x0afloa'+'t\x20getSpher'+'eLightDiff'+'use(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm)\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20float\x20fa'+'lloff\x20=\x20dS'+'phereRadiu'+'s\x20/\x20(dot(l'+'ightDir,\x20l'+'ightDir)\x20+'+'\x20dSphereRa'+'dius);\x0a\x20\x20\x20'+'\x20return\x20Fi'+'xNan(getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNorm)\x20*\x20f'+'alloff);\x0a}'+'\x0a\x0amat3\x20get'+'LTCLightIn'+'vMat(vec2\x20'+'uv)\x0a{\x0a\x20\x20\x20\x20'+'vec4\x20t1\x20=\x20'+'texture2DL'+'od(areaLig'+'htsLutTex1'+',\x20uv,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3(\x20t1.x,\x20'+'0,\x20t1.y\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3(\x20\x20\x20\x200,'+'\x201,\x20\x20\x20\x200\x20)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3(\x20t1.z'+',\x200,\x20t1.w\x20'+')\x0a\x20\x20\x20\x20);\x0a}'+'\x0a\x0afloat\x20ca'+'lcRectLigh'+'tSpecular('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir')+(',\x20vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20mat'+'3\x20mInv\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afl'+'oat\x20getRec'+'tLightSpec'+'ular(vec3\x20'+'worldNorma'+'l,\x20vec3\x20vi'+'ewDir)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'calcRectLi'+'ghtSpecula'+'r(worldNor'+'mal,\x20viewD'+'ir,\x20dLTCUV'+');\x0a}\x0a\x0afloa'+'t\x20calcDisk'+'LightSpecu'+'lar(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20mInv'+'\x20=\x20getLTCL'+'ightInvMat'+'(uv);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_EvaluateD'+'isk(\x20world'+'Normal,\x20vi'+'ewDir,\x20vPo'+'sitionW,\x20m'+'Inv,\x20dLTCC'+'oords\x20);\x0a}'+'\x0a\x0afloat\x20ge'+'tDiskLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a\x0a'+'float\x20getS'+'phereLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a'),J1='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_metaln'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tMetalness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20metal'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20metalness'+'\x20*=\x20materi'+'al_metalne'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20metalne'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_METAL'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_METAL'+'NESS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_META'+'LNESS_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_VERTEX\x0a\x20\x20'+'\x20\x20metalnes'+'s\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_METALNES'+'S_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dMet'+'alness\x20=\x20m'+'etalness;\x0a'+'}\x0a',eP='\x0auniform\x20s'+'ampler2D\x20t'+'exture_msd'+'fMap;\x0a\x0aflo'+'at\x20median('+'float\x20r,\x20f'+'loat\x20g,\x20fl'+'oat\x20b)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'max(min(r,'+'\x20g),\x20min(m'+'ax(r,\x20g),\x20'+'b));\x0a}\x0a\x0afl'+'oat\x20map\x20(f'+'loat\x20min,\x20'+'float\x20max,'+'\x20float\x20v)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20(v\x20-\x20mi'+'n)\x20/\x20(max\x20'+'-\x20min);\x0a}\x0a'+'\x0auniform\x20f'+'loat\x20font_'+'sdfIntensi'+'ty;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20float\x20f'+'ont_pxrang'+'e;\x20\x20\x20\x20\x20\x20//'+'\x20the\x20numbe'+'r\x20of\x20pixel'+'s\x20between\x20'+'inside\x20and'+'\x20outside\x20t'+'he\x20font\x20in'+'\x20SDF\x0aunifo'+'rm\x20float\x20f'+'ont_textur'+'eWidth;\x20//'+'\x20the\x20width'+'\x20of\x20the\x20te'+'xture\x20atla'+'s\x0a\x0a#ifndef'+'\x20LIT_MSDF_'+'TEXT_ATTRI'+'BUTE\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20shadow_co'+'lor;\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20shadow_o'+'ffset;\x0a#el'+'se\x0a\x20\x20\x20\x20var'+'ying\x20vec4\x20'+'outline_co'+'lor;\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20outline'+'_thickness'+';\x0a\x20\x20\x20\x20vary'+'ing\x20vec4\x20s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'shadow_off'+'set;\x0a#endi'+'f\x0a\x0avec4\x20ap'+'plyMsdf(ve'+'c4\x20color)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Convert\x20to'+'\x20linear\x20sp'+'ace\x20before'+'\x20processin'+'g\x0a\x20\x20\x20\x20//\x20T'+'ODO:\x20ideal'+'ly\x20this\x20wo'+'uld\x20receiv'+'e\x20the\x20colo'+'r\x20in\x20linea'+'r\x20space,\x20b'+'ut\x20that\x20wo'+'uld\x20requir'+'e\x20larger\x20c'+'hanges\x0a\x20\x20\x20'+('\x20//\x20on\x20the'+'\x20engine\x20si'+'de,\x20with\x20t'+'he\x20way\x20pre'+'multiplied'+'\x20alpha\x20is\x20'+'handled\x20as'+'\x20well.\x0a\x20\x20\x20'+'\x20color.rgb'+'\x20=\x20gammaCo'+'rrectInput'+'(color.rgb'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20sample\x20th'+'e\x20field\x0a\x20\x20'+'\x20\x20vec3\x20tsa'+'mple\x20=\x20tex'+'ture2D(tex'+'ture_msdfM'+'ap,\x20vUv0).'+'rgb;\x0a\x20\x20\x20\x20v'+'ec2\x20uvShdw'+'\x20=\x20vUv0\x20-\x20'+'shadow_off'+'set;\x0a\x20\x20\x20\x20v'+'ec3\x20ssampl'+'e\x20=\x20textur'+'e2D(textur'+'e_msdfMap,'+'\x20uvShdw).r'+'gb;\x0a\x0a\x20\x20\x20\x20/'+'/\x20get\x20the\x20'+'signed\x20dis'+'tance\x20valu'+'e\x0a\x20\x20\x20\x20floa'+'t\x20sigDist\x20'+'=\x20median(t'+'sample.r,\x20'+'tsample.g,'+'\x20tsample.b'+');\x0a\x20\x20\x20\x20flo'+'at\x20sigDist'+'Shdw\x20=\x20med'+'ian(ssampl'+'e.r,\x20ssamp'+'le.g,\x20ssam'+'ple.b);\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20limi'+'t\x20-\x20smalle'+'r\x20value\x20ma'+'kes\x20for\x20sh'+'arper\x20but\x20'+'more\x20alias'+'ed\x20text,\x20e'+'specially\x20'+'on\x20angles\x0a'+'\x20\x20\x20\x20//\x20too'+'\x20large\x20val'+'ue\x20(0.5)\x20c'+'reates\x20a\x20d'+'ark\x20glow\x20a'+'round\x20the\x20'+'letters\x0a\x20\x20'+'\x20\x20float\x20sm'+'oothingMax'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20vec'+'2\x20w\x20=\x20fwid'+'th(vUv0);\x0a'+'\x20\x20\x20\x20float\x20'+'smoothing\x20'+'=\x20clamp(w.'+'x\x20*\x20font_t'+'extureWidt'+'h\x20/\x20font_p'+'xrange,\x200.'+'0,\x20smoothi'+'ngMax);\x0a\x0a\x20'+'\x20\x20\x20float\x20m'+'apMin\x20=\x200.'+'05;\x0a\x20\x20\x20\x20fl'+'oat\x20mapMax'+'\x20=\x20clamp(1'+'.0\x20-\x20font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20float\x20')+('sigDistInn'+'er\x20=\x20map(m'+'apMin,\x20map'+'Max,\x20sigDi'+'st);\x0a\x20\x20\x20\x20f'+'loat\x20sigDi'+'stOutline\x20'+'=\x20map(mapM'+'in,\x20mapMax'+',\x20sigDist\x20'+'+\x20outline_'+'thickness)'+';\x0a\x20\x20\x20\x20sigD'+'istShdw\x20=\x20'+'map(mapMin'+',\x20mapMax,\x20'+'sigDistShd'+'w\x20+\x20outlin'+'e_thicknes'+'s);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20cente'+'r\x20=\x200.5;\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20smoo'+'thing\x20and\x20'+'use\x20to\x20gen'+'erate\x20opac'+'ity\x0a\x20\x20\x20\x20fl'+'oat\x20inside'+'\x20=\x20smooths'+'tep(center'+'-smoothing'+',\x20center+s'+'moothing,\x20'+'sigDistInn'+'er);\x0a\x20\x20\x20\x20f'+'loat\x20outli'+'ne\x20=\x20smoot'+'hstep(cent'+'er-smoothi'+'ng,\x20center'+'+smoothing'+',\x20sigDistO'+'utline);\x0a\x20'+'\x20\x20\x20float\x20s'+'hadow\x20=\x20sm'+'oothstep(c'+'enter-smoo'+'thing,\x20cen'+'ter+smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20vec4\x20t'+'color\x20=\x20(o'+'utline\x20>\x20i'+'nside)\x20?\x20o'+'utline\x20*\x20v'+'ec4(outlin'+'e_color.a\x20'+'*\x20outline_'+'color.rgb,'+'\x20outline_c'+'olor.a)\x20:\x20'+'vec4(0.0);'+'\x0a\x20\x20\x20\x20tcolo'+'r\x20=\x20mix(tc'+'olor,\x20colo'+'r,\x20inside)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20scolor\x20='+'\x20(shadow\x20>'+'\x20outline)\x20'+'?\x20shadow\x20*'+'\x20vec4(shad'+'ow_color.a'+'\x20*\x20shadow_'+'color.rgb,'+'\x20shadow_co'+'lor.a)\x20:\x20t'+'color;\x0a\x20\x20\x20'+'\x20tcolor\x20=\x20'+'mix(scolor'+',\x20tcolor,\x20'+'outline);\x0a'+'\x0a\x20\x20\x20\x20//\x20Co'+'nvert\x20back'+'\x20to\x20gamma\x20'+'space\x20befo'+'re\x20returni'+'ng\x0a\x20\x20\x20\x20tco'+'lor.rgb\x20=\x20'+'gammaCorre'+'ctOutput(t'+'color.rgb)'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20return\x20tc'+'olor;\x0a}\x0a'),tP='\x0a\x0avec3\x20get'+'SpecularMo'+'dulate(in\x20'+'vec3\x20specu'+'larity,\x20in'+'\x20vec3\x20albe'+'do,\x20in\x20flo'+'at\x20metalne'+'ss,\x20in\x20flo'+'at\x20f0)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20di'+'electricF0'+'\x20=\x20f0\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(diel'+'ectricF0,\x20'+'albedo,\x20me'+'talness);\x0a'+'}\x0a\x0avec3\x20ge'+'tAlbedoMod'+'ulate(in\x20v'+'ec3\x20albedo'+',\x20in\x20float'+'\x20metalness'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20albed'+'o\x20*\x20(1.0\x20-'+'\x20metalness'+');\x0a}\x0a',sP='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20vec2\x20u'+'v0;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2DArra'+'y\x20morphTex'+'ture;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20float\x20'+'morphFacto'+'r[{MORPH_T'+'EXTURE_MAX'+'_COUNT}];\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20ui'+'nt\x20morphIn'+'dex[{MORPH'+'_TEXTURE_M'+'AX_COUNT}]'+';\x0a\x20\x20\x20\x20unif'+'orm\x20int\x20co'+'unt;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PH_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20aa'+'bbSize;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20a'+'abbMin;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20highp\x20vec'+'3\x20color\x20=\x20'+'vec3(0,\x200,'+'\x200);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'pixelCoord'+'s\x20=\x20ivec2('+'uv0\x20*\x20vec2'+'(textureSi'+'ze(morphTe'+'xture,\x200).'+'xy));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20count;\x20'+'i++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'int\x20textur'+'eIndex\x20=\x20m'+'orphIndex['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20delta\x20=\x20t'+'exelFetch('+'morphTextu'+'re,\x20ivec3('+'pixelCoord'+'s,\x20int(tex'+'tureIndex)'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20color\x20+'+'=\x20morphFac'+'tor[i]\x20*\x20d'+'elta;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20MORPH_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20color\x20'+'=\x20(color\x20-'+'\x20aabbMin)\x20'+'/\x20aabbSize'+'\x20*\x2065535.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20u'+'vec4(color'+',\x201u);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20ve'+'c4(color,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a',iP='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20}\x0a',rP='\x0aattribute'+'\x20vec3\x20vert'+'ex_outline'+'Parameters'+';\x0aattribut'+'e\x20vec3\x20ver'+'tex_shadow'+'Parameters'+';\x0a\x0avarying'+'\x20vec4\x20outl'+'ine_color;'+'\x0avarying\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0avaryin'+'g\x20vec4\x20sha'+'dow_color;'+'\x0avarying\x20v'+'ec2\x20shadow'+'_offset;\x0a\x0a'+'void\x20unpac'+'kMsdfParam'+'s()\x20{\x0a\x20\x20\x20\x20'+'vec3\x20littl'+'e\x20=\x20mod(ve'+'rtex_outli'+'neParamete'+'rs,\x20256.);'+'\x0a\x20\x20\x20\x20vec3\x20'+'big\x20=\x20(ver'+'tex_outlin'+'eParameter'+'s\x20-\x20little'+')\x20/\x20256.;\x0a'+'\x0a\x20\x20\x20\x20outli'+'ne_color.r'+'b\x20=\x20little'+'.xy\x20/\x20255.'+';\x0a\x20\x20\x20\x20outl'+'ine_color.'+'ga\x20=\x20big.x'+'y\x20/\x20255.;\x0a'+'\x0a\x20\x20\x20\x20//\x20_o'+'utlineThic'+'knessScale'+'\x20===\x200.2\x0a\x20'+'\x20\x20\x20outline'+'_thickness'+'\x20=\x20little.'+'z\x20/\x20255.\x20*'+'\x200.2;\x0a\x0a\x20\x20\x20'+'\x20little\x20=\x20'+'mod(vertex'+'_shadowPar'+'ameters,\x202'+'56.);\x0a\x20\x20\x20\x20'+'big\x20=\x20(ver'+'tex_shadow'+'Parameters'+'\x20-\x20little)'+'\x20/\x20256.;\x0a\x0a'+'\x20\x20\x20\x20shadow'+'_color.rb\x20'+'=\x20little.x'+'y\x20/\x20255.;\x0a'+'\x20\x20\x20\x20shadow'+'_color.ga\x20'+'=\x20big.xy\x20/'+'\x20255.;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+'ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20shado'+'w_offset\x20='+'\x20(vec2(lit'+'tle.z,\x20big'+'.z)\x20/\x20127.'+'\x20-\x201.)\x20*\x200'+'.005;\x0a}\x0a',aP='\x0amat3\x20dNor'+'malMatrix;'+'\x0a\x0avec3\x20get'+'Normal()\x20{'+'\x0a\x20\x20\x20\x20dNorm'+'alMatrix\x20='+'\x20getNormal'+'Matrix(dMo'+'delMatrix)'+';\x0a\x20\x20\x20\x20vec3'+'\x20localNorm'+'al\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}\x0a',nP='\x0a\x0aattribut'+'e\x20vec3\x20ver'+'tex_normal'+';\x0a\x0auniform'+'\x20mat3\x20matr'+'ix_normal;'+'\x0a\x0a#ifdef\x20M'+'ORPHING_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20morphNor'+'malTex;\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'morphNorma'+'lTex;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0avec3\x20'+'getLocalNo'+'rmal(vec3\x20'+'vertexNorm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20vec3\x20loca'+'lNormal\x20=\x20'+'vertex_nor'+'mal;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_NORM'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ivec2\x20mo'+'rphUV\x20=\x20ge'+'tTextureMo'+'rphCoords('+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'orphNormal'+'\x20=\x20vec3(te'+'xelFetch(m'+'orphNormal'+'Tex,\x20ivec2'+'(morphUV),'+'\x200).xyz)\x20/'+'\x2065535.0\x20*'+'\x202.0\x20-\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphNo'+'rmal\x20=\x20tex'+'elFetch(mo'+'rphNormalT'+'ex,\x20ivec2('+'morphUV),\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20localNor'+'mal\x20+=\x20mor'+'phNormal;\x0a'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20localN'+'ormal;\x0a}\x0a\x0a'+'#if\x20define'+'d(SKIN)\x20||'+'\x20defined(B'+'ATCH)\x0a\x20\x20\x20\x20'+'mat3\x20getNo'+'rmalMatrix'+'(mat4\x20mode'+'lMatrix)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mat3'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20ma'+'t3\x20getNorm'+'alMatrix(m'+'at4\x20modelM'+'atrix)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20mat3(m'+'odelMatrix'+'[0].xyz,\x20m'+('odelMatrix'+'[1].xyz,\x20m'+'odelMatrix'+'[2].xyz);\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20mat3'+'\x20getNormal'+'Matrix(mat'+'4\x20modelMat'+'rix)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_n'+'ormal;\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'),oP='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_bumpin'+'ess;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_NORMAL'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_normalDe'+'tailMapBum'+'piness;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20bl'+'endNormals'+'(vec3\x20n1,\x20'+'vec3\x20n2)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20https://'+'blog.selfs'+'hadow.com/'+'publicatio'+'ns/blendin'+'g-in-detai'+'l/#detail-'+'oriented\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20n1\x20'+'+=\x20vec3(0,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20n2\x20*'+'=\x20vec3(-1,'+'\x20-1,\x201);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20n1\x20*\x20d'+'ot(n1,\x20n2)'+'\x20/\x20n1.z\x20-\x20'+'n2;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0avo'+'id\x20getNorm'+'al()\x20{\x0a#if'+'def\x20STD_NO'+'RMAL_TEXTU'+'RE\x0a\x20\x20\x20\x20vec'+'3\x20normalMa'+'p\x20=\x20{STD_N'+'ORMAL_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_NORMAL_TE'+'XTURE_NAME'+'},\x20{STD_NO'+'RMAL_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+');\x0a\x20\x20\x20\x20nor'+'malMap\x20=\x20m'+'ix(vec3(0.'+'0,\x200.0,\x201.'+'0),\x20normal'+'Map,\x20mater'+'ial_bumpin'+'ess);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMALDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20norm'+'alDetailMa'+'p\x20=\x20{STD_N'+'ORMALDETAI'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_NOR'+'MALDETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'NORMALDETA'+'IL_TEXTURE'+'_UV},\x20text'+'ureBias));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20n'+'ormalDetai'+'lMap\x20=\x20mix'+'(vec3(0.0,'+'\x200.0,\x201.0)'+',\x20normalDe'+'tailMap,\x20m'+'aterial_no'+'rmalDetail'+'MapBumpine'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20blend'+'Normals(no'+'rmalMap,\x20n'+('ormalDetai'+'lMap);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20normal'+'ize(dTBN\x20*'+'\x20normalMap'+');\x0a#else\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20dVerte'+'xNormalW;\x0a'+'#endif\x0a}\x0a'),lP='\x0auniform\x20f'+'loat\x20mater'+'ial_opacit'+'y;\x0a\x0avoid\x20g'+'etOpacity('+')\x20{\x0a\x20\x20\x20\x20dA'+'lpha\x20=\x20mat'+'erial_opac'+'ity;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_OPACITY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20dAlpha\x20*='+'\x20texture2D'+'Bias({STD_'+'OPACITY_TE'+'XTURE_NAME'+'},\x20{STD_OP'+'ACITY_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20*=\x20c'+'lamp(vVert'+'exColor.{S'+'TD_OPACITY'+'_VERTEX_CH'+'ANNEL},\x200.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',cP='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20vec4\x20b'+'lueNoiseJi'+'tter;\x0a\x0a#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BLUENOI'+'SE\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blueN'+'oiseTex32;'+'\x0a#endif\x0a\x0av'+'oid\x20opacit'+'yDither(fl'+'oat\x20alpha,'+'\x20float\x20id)'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BAYER8\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20noise'+'\x20=\x20bayer8('+'floor(mod('+'gl_FragCoo'+'rd.xy\x20+\x20bl'+'ueNoiseJit'+'ter.xy\x20+\x20i'+'d,\x208.0)))\x20'+'/\x2064.0;\x0a\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20BLUENO'+'ISE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20frac'+'t(gl_FragC'+'oord.xy\x20/\x20'+'32.0\x20+\x20blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20noise\x20=\x20t'+'exture2DLo'+'d(blueNois'+'eTex32,\x20uv'+',\x200.0).y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20==\x20'+'IGNNOISE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20based\x20'+'on\x20https:/'+'/www.iryok'+'u.com/next'+'-generatio'+'n-post-pro'+'cessing-in'+'-call-of-d'+'uty-advanc'+'ed-warfare'+'/\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'agic\x20=\x20vec'+'3(0.067110'+'56,\x200.0058'+'3715,\x2052.9'+'829189);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20noi'+'se\x20=\x20fract'+'(magic.z\x20*'+'\x20fract(dot'+'(gl_FragCo'+'ord.xy\x20+\x20b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id,\x20magic.'+'xy)));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20convert\x20'+'the\x20noise\x20'+'to\x20linear\x20'+'space,\x20as\x20'+'that\x20is\x20sp'+'ecified\x20in'+('\x20sRGB\x20spac'+'e\x20(stores\x20'+'perceptual'+'\x20values)\x0a\x20'+'\x20\x20\x20noise\x20='+'\x20pow(noise'+',\x202.2);\x0a\x0a\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x20noise'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a}'+'\x0a'),hP='\x0a',dP='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20litArgs_'+'opacity;\x0a\x0a'+'#elif\x20LIT_'+'BLEND_TYPE'+'\x20==\x20PREMUL'+'TIPLIED\x0a\x0a\x20'+'\x20\x20\x20gl_Frag'+'Color.rgb\x20'+'*=\x20litArgs'+'_opacity;\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.a\x20='+'\x20litArgs_o'+'pacity;\x0a\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or.a\x20=\x201.0'+';\x0a\x0a#endif\x0a',fP='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20textu'+'re2D(sourc'+'e,\x20vUv0);\x0a'+'}\x0a',uP='\x0a\x0auniform\x20'+'vec3\x20mater'+'ial_sheen;'+'\x0a\x0avoid\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'heenColor\x20'+'=\x20material'+'_sheen;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEEN_'+'TEXTURE\x0a\x20\x20'+'\x20\x20sheenCol'+'or\x20*=\x20{STD'+'_SHEEN_TEX'+'TURE_DECOD'+'E}(texture'+'2DBias({ST'+'D_SHEEN_TE'+'XTURE_NAME'+'},\x20{STD_SH'+'EEN_TEXTUR'+'E_UV},\x20tex'+'tureBias))'+'.{STD_SHEE'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_VERTEX\x0a'+'\x20\x20\x20\x20sheenC'+'olor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20sSpec'+'ularity\x20=\x20'+'sheenColor'+';\x0a}\x0a',pP='\x0auniform\x20f'+'loat\x20mater'+'ial_sheenG'+'loss;\x0a\x0avoi'+'d\x20getSheen'+'Glossiness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20sheen'+'Glossiness'+'\x20=\x20materia'+'l_sheenGlo'+'ss;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20*'+'=\x20texture2'+'DBias({STD'+'_SHEENGLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_SHEENGLO'+'SS_TEXTURE'+'_UV},\x20text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20*='+'\x20saturate('+'vVertexCol'+'or.{STD_SH'+'EENGLOSS_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_INVER'+'T\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x201.0\x20-\x20'+'sheenGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20sGlossi'+'ness\x20=\x20she'+'enGlossine'+'ss\x20+\x200.000'+'0001;\x0a}\x0a',mP='\x0auniform\x20f'+'loat\x20mater'+'ial_height'+'MapFactor;'+'\x0a\x0avoid\x20get'+'Parallax()'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20paralla'+'xScale\x20=\x20m'+'aterial_he'+'ightMapFac'+'tor;\x0a\x0a\x20\x20\x20\x20'+'float\x20heig'+'ht\x20=\x20textu'+'re2DBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_H'+'EIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20he'+'ight\x20=\x20hei'+'ght\x20*\x20para'+'llaxScale\x20'+'-\x20parallax'+'Scale\x20*\x200.'+'5;\x0a\x20\x20\x20\x20vec'+'3\x20viewDirT'+'\x20=\x20dViewDi'+'rW\x20*\x20dTBN;'+'\x0a\x0a\x20\x20\x20\x20view'+'DirT.z\x20+=\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',_P='\x0auniform\x20u'+'int\x20meshIn'+'stanceId;\x0a'+'\x0avec4\x20getP'+'ickOutput('+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20vec4\x20i'+'nv\x20=\x20vec4('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20co'+'nst\x20uvec4\x20'+'shifts\x20=\x20u'+'vec4(16,\x208'+',\x200,\x2024);\x0a'+'\x20\x20\x20\x20uvec4\x20'+'col\x20=\x20(uve'+'c4(meshIns'+'tanceId)\x20>'+'>\x20shifts)\x20'+'&\x20uvec4(0x'+'ff);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'(col)\x20*\x20in'+'v;\x0a}\x0a',gP='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20dR'+'eflDirW\x20=\x20'+'normalize('+'-reflect(v'+'iewDir,\x20wo'+'rldNormal)'+');\x0a}\x0a',SP='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20sqrt'+'(1.0\x20-\x20min'+'(gloss,\x201.'+'0));\x0a\x0a\x20\x20\x20\x20'+'vec2\x20direc'+'tion\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicT\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3(directi'+'on,\x200.0));'+'\x0a\x20\x20\x20\x20vec3\x20'+'anisotropi'+'cB\x20=\x20norma'+'lize(cross'+'(tbn[2],\x20a'+'nisotropic'+'T));\x0a\x0a\x20\x20\x20\x20'+'float\x20anis'+'otropy\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20vec3'+'\x20anisotrop'+'icDirectio'+'n\x20=\x20anisot'+'ropicB;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicTa'+'ngent\x20=\x20cr'+'oss(anisot'+'ropicDirec'+'tion,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicNorm'+'al\x20=\x20cross'+'(anisotrop'+'icTangent,'+'\x20anisotrop'+'icDirectio'+'n);\x0a\x20\x20\x20\x20fl'+'oat\x20bendFa'+'ctor\x20=\x201.0'+'\x20-\x20anisotr'+'opy\x20*\x20(1.0'+'\x20-\x20roughne'+'ss);\x0a\x20\x20\x20\x20f'+'loat\x20bendF'+'actor4\x20=\x20b'+'endFactor\x20'+'*\x20bendFact'+'or\x20*\x20bendF'+'actor\x20*\x20be'+'ndFactor;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'entNormal\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}\x0a',yP='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0avoid\x20add'+'Reflection'+'CC(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20ccRe'+'flection\x20+'+'=\x20calcRefl'+'ection(ref'+'lDir,\x20glos'+'s);\x0a}\x0a#end'+'if\x0a',vP='\x0auniform\x20s'+'amplerCube'+'\x20texture_c'+'ubeMap;\x0aun'+'iform\x20floa'+'t\x20material'+'_reflectiv'+'ity;\x0a\x0avec3'+'\x20calcRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20lookup'+'Vec\x20=\x20cube'+'MapProject'+'(reflDir);'+'\x0a\x20\x20\x20\x20looku'+'pVec.x\x20*=\x20'+'-1.0;\x0a\x20\x20\x20\x20'+'return\x20{re'+'flectionDe'+'code}(text'+'ureCube(te'+'xture_cube'+'Map,\x20looku'+'pVec));\x0a}\x0a'+'\x0avoid\x20addR'+'eflection('+'vec3\x20reflD'+'ir,\x20float\x20'+'gloss)\x20{\x20\x20'+'\x20\x0a\x20\x20\x20\x20dRef'+'lection\x20+='+'\x20vec4(calc'+'Reflection'+'(reflDir,\x20'+'gloss),\x20ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',xP='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_envAtlas;'+'\x0a#endif\x0aun'+'iform\x20samp'+'lerCube\x20te'+'xture_cube'+'Map;\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'flectivity'+';\x0a\x0avec3\x20ca'+'lcReflecti'+'on(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20cub'+'eMapProjec'+'t(reflDir)'+'\x20*\x20vec3(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20t'+'oSpherical'+'Uv(dir);\x0a\x0a'+'\x20\x20\x20\x20//\x20cal'+'culate\x20rou'+'ghness\x20lev'+'el\x0a\x20\x20\x20\x20flo'+'at\x20level\x20='+'\x20saturate('+'1.0\x20-\x20glos'+'s)\x20*\x205.0;\x0a'+'\x20\x20\x20\x20float\x20'+'ilevel\x20=\x20f'+'loor(level'+');\x0a\x20\x20\x20\x20flo'+'at\x20flevel\x20'+'=\x20level\x20-\x20'+'ilevel;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20sh'+'arp\x20=\x20{ref'+'lectionCub'+'emapDecode'+'}(textureC'+'ube(textur'+'e_cubeMap,'+'\x20dir));\x0a\x20\x20'+'\x20\x20vec3\x20rou'+'ghA\x20=\x20{ref'+'lectionDec'+'ode}(textu'+'re2D(textu'+'re_envAtla'+'s,\x20mapRoug'+'hnessUv(uv'+',\x20ilevel))'+');\x0a\x20\x20\x20\x20vec'+'3\x20roughB\x20='+'\x20{reflecti'+'onDecode}('+'texture2D('+'texture_en'+'vAtlas,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20proc'+'essEnviron'+'ment(mix(s'+'harp,\x20mix('+'roughA,\x20ro'+'ughB,\x20flev'+'el),\x20min(l'+'evel,\x201.0)'+'));\x0a}\x0a\x0avoi'+'d\x20addRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x20\x20\x20\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20+=\x20vec'+'4(calcRefl'+'ection(ref'+'lDir,\x20glos'+'s),\x20materi'+'al_reflect'+'ivity);\x0a}\x0a',TP='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_env'+'Atlas;\x0a#en'+'dif\x0aunifor'+'m\x20float\x20ma'+'terial_ref'+'lectivity;'+'\x0a\x0a//\x20calcu'+'late\x20mip\x20l'+'evel\x20for\x20s'+'hiny\x20refle'+'ction\x20give'+'n\x20equirect'+'\x20coords\x20uv'+'.\x0afloat\x20sh'+'inyMipLeve'+'l(vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20dx\x20=\x20dFd'+'x(uv);\x0a\x20\x20\x20'+'\x20vec2\x20dy\x20='+'\x20dFdy(uv);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20s'+'econd\x20dF\x20a'+'t\x20180\x20degr'+'ees\x0a\x20\x20\x20\x20ve'+'c2\x20uv2\x20=\x20v'+'ec2(fract('+'uv.x\x20+\x200.5'+'),\x20uv.y);\x0a'+'\x20\x20\x20\x20vec2\x20d'+'x2\x20=\x20dFdx('+'uv2);\x0a\x20\x20\x20\x20'+'vec2\x20dy2\x20='+'\x20dFdy(uv2)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'min\x20of\x20bot'+'h\x20sets\x20of\x20'+'dF\x20to\x20hand'+'le\x20discont'+'inuity\x20at\x20'+'the\x20azim\x20e'+'dge\x0a\x20\x20\x20\x20fl'+'oat\x20maxd\x20='+'\x20min(max(d'+'ot(dx,\x20dx)'+',\x20dot(dy,\x20'+'dy)),\x20max('+'dot(dx2,\x20d'+'x2),\x20dot(d'+'y2,\x20dy2)))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'0.5\x20*\x20log2'+'(maxd)\x20-\x201'+'.0\x20+\x20textu'+'reBias,\x200.'+'0,\x205.0);\x0a}'+'\x0a\x0avec3\x20cal'+'cReflectio'+'n(vec3\x20ref'+'lDir,\x20floa'+'t\x20gloss)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3(-1.'+'0,\x201.0,\x201.'+'0);\x0a\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20to'+'SphericalU'+'v(dir);\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20roug'+'hness\x20leve'+'l\x0a\x20\x20\x20\x20floa'+'t\x20level\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20float\x20i'+'level\x20=\x20fl'+'oor(level)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'accessing\x20'+'the\x20shiny\x20'+'(top\x20level'+')\x20reflecti'+'on\x20-\x20perfo'+'rm\x20manual\x20'+'mipmap\x20loo'+'kup\x0a\x20\x20\x20\x20fl'+('oat\x20level2'+'\x20=\x20shinyMi'+'pLevel(uv\x20'+'*\x20atlasSiz'+'e);\x0a\x20\x20\x20\x20fl'+'oat\x20ilevel'+'2\x20=\x20floor('+'level2);\x0a\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v0,\x20uv1;\x0a\x20'+'\x20\x20\x20float\x20w'+'eight;\x0a\x20\x20\x20'+'\x20if\x20(ileve'+'l\x20==\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uv0\x20=\x20mapS'+'hinyUv(uv,'+'\x20ilevel2);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v1\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x20level2\x20'+'-\x20ilevel2;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20acces'+'sing\x20rough'+'\x20reflectio'+'n\x20-\x20just\x20s'+'ample\x20the\x20'+'same\x20part\x20'+'twice\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'uv1\x20=\x20mapR'+'oughnessUv'+'(uv,\x20ileve'+'l);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20weight\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'3\x20linearA\x20'+'=\x20{reflect'+'ionDecode}'+'(texture2D'+'(texture_e'+'nvAtlas,\x20u'+'v0));\x0a\x20\x20\x20\x20'+'vec3\x20linea'+'rB\x20=\x20{refl'+'ectionDeco'+'de}(textur'+'e2D(textur'+'e_envAtlas'+',\x20uv1));\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near0\x20=\x20mi'+'x(linearA,'+'\x20linearB,\x20'+'weight);\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near1\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(line'+'ar0,\x20linea'+'r1,\x20level\x20'+'-\x20ilevel))'+';\x0a}\x0a\x0avoid\x20'+'addReflect'+'ion(vec3\x20r'+'eflDir,\x20fl'+'oat\x20gloss)'+'\x20{\x20\x20\x20\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20+=\x20vec4('+'calcReflec'+'tion(reflD'+'ir,\x20gloss)'+',\x20material'+'_reflectiv'+'ity);\x0a}\x0a'),wP='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'uniform\x20sa'+'mpler2D\x20te'+'xture_sphe'+'reMap;\x0auni'+'form\x20float'+'\x20material_'+'reflectivi'+'ty;\x0a\x0avec3\x20'+'calcReflec'+'tion(vec3\x20'+'reflDir,\x20f'+'loat\x20gloss'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20reflDir'+'V\x20=\x20(mat3('+'matrix_vie'+'w)\x20*\x20reflD'+'ir);\x0a\x0a\x20\x20\x20\x20'+'float\x20m\x20=\x20'+'2.0\x20*\x20sqrt'+'(dot(reflD'+'irV.xy,\x20re'+'flDirV.xy)'+'\x20+\x20(reflDi'+'rV.z\x20+\x201.0'+')\x20*\x20(reflD'+'irV.z\x20+\x201.'+'0));\x0a\x20\x20\x20\x20v'+'ec2\x20sphere'+'MapUv\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(texture2'+'D(texture_'+'sphereMap,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0av'+'oid\x20addRef'+'lection(ve'+'c3\x20reflDir'+',\x20float\x20gl'+'oss)\x20{\x20\x20\x20\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20+=\x20v'+'ec4(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20mate'+'rial_refle'+'ctivity);\x0a'+'}\x0a',EP='\x0a\x0avoid\x20add'+'Reflection'+'Sheen(vec3'+'\x20worldNorm'+'al,\x20vec3\x20v'+'iewDir,\x20fl'+'oat\x20gloss)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20NoV\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'float\x20alph'+'aG\x20=\x20gloss'+'\x20*\x20gloss;\x0a'+'\x0a\x20\x20\x20\x20//\x20Av'+'oid\x20using\x20'+'a\x20LUT\x20and\x20'+'approximat'+'e\x20the\x20valu'+'es\x20analyti'+'cally\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'gloss\x20<\x200.'+'25\x20?\x20-339.'+'2\x20*\x20alphaG'+'\x20+\x20161.4\x20*'+'\x20gloss\x20-\x202'+'5.9\x20:\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95;\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20gl'+'oss\x20<\x200.25'+'\x20?\x2044.0\x20*\x20'+'alphaG\x20-\x202'+'3.7\x20*\x20glos'+'s\x20+\x203.26\x20:'+'\x201.97\x20*\x20al'+'phaG\x20-\x203.2'+'7\x20*\x20gloss\x20'+'+\x200.72;\x0a\x20\x20'+'\x20\x20float\x20DG'+'\x20=\x20exp(\x20a\x20'+'*\x20NoV\x20+\x20b\x20'+')\x20+\x20(\x20glos'+'s\x20<\x200.25\x20?'+'\x200.0\x20:\x200.1'+'\x20*\x20(\x20gloss'+'\x20-\x200.25\x20)\x20'+');\x0a\x20\x20\x20\x20sRe'+'flection\x20+'+'=\x20calcRefl'+'ection(wor'+'ldNormal,\x20'+'0.0)\x20*\x20sat'+'urate(DG);'+'\x0a}\x0a',bP='\x0avec3\x20refr'+'act2(vec3\x20'+'viewVec,\x20v'+'ec3\x20normal'+',\x20float\x20IO'+'R)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20vn\x20=\x20'+'dot(viewVe'+'c,\x20normal)'+';\x0a\x20\x20\x20\x20floa'+'t\x20k\x20=\x201.0\x20'+'-\x20IOR\x20*\x20IO'+'R\x20*\x20(1.0\x20-'+'\x20vn\x20*\x20vn);'+'\x0a\x20\x20\x20\x20vec3\x20'+'refrVec\x20=\x20'+'IOR\x20*\x20view'+'Vec\x20-\x20(IOR'+'\x20*\x20vn\x20+\x20sq'+'rt(k))\x20*\x20n'+'ormal;\x0a\x20\x20\x20'+'\x20return\x20re'+'frVec;\x0a}\x0a\x0a'+'void\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20vec3\x20w'+'orldNormal'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20viewDir,'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20thicknes'+'s,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20albedo'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20transmi'+'ssion,\x0a\x20\x20\x20'+'\x20float\x20ref'+'ractionInd'+'ex,\x0a\x20\x20\x20\x20fl'+'oat\x20disper'+'sion\x0a#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20,\x20'+'vec3\x20iride'+'scenceFres'+'nel,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceInte'+'nsity\x0a#end'+'if\x20\x0a)\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20s'+'ame\x20reflec'+'tion\x20code\x20'+'with\x20refra'+'ction\x20vect'+'or\x0a\x20\x20\x20\x20vec'+'4\x20tmpRefl\x20'+'=\x20dReflect'+'ion;\x0a\x20\x20\x20\x20v'+'ec3\x20reflec'+'tionDir\x20=\x20'+'refract2(-'+'viewDir,\x20w'+'orldNormal'+',\x20refracti'+'onIndex);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve'+'c4(0);\x0a\x20\x20\x20'+'\x20addReflec'+'tion(refle'+'ctionDir,\x20'+'gloss);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20dRe'+'flection.r'+'gb\x20*\x20albed'+'o,\x20transmi'+'ssion);\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20=\x20tmpR'+'efl;\x0a}\x0a',AP='\x0auniform\x20f'+'loat\x20mater'+'ial_invAtt'+'enuationDi'+'stance;\x0aun'+'iform\x20vec3'+'\x20material_'+'attenuatio'+'n;\x0a\x0avec3\x20e'+'valRefract'+'ionColor(v'+'ec3\x20refrac'+'tionVector'+',\x20float\x20gl'+'oss,\x20float'+'\x20refractio'+'nIndex)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20Th'+'e\x20refracti'+'on\x20point\x20i'+'s\x20the\x20entr'+'y\x20point\x20+\x20'+'vector\x20to\x20'+'exit\x20point'+'\x0a\x20\x20\x20\x20vec4\x20'+'pointOfRef'+'raction\x20=\x20'+'vec4(vPosi'+'tionW\x20+\x20re'+'fractionVe'+'ctor,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'Project\x20to'+'\x20texture\x20s'+'pace\x20so\x20we'+'\x20can\x20sampl'+'e\x20it\x0a\x20\x20\x20\x20v'+'ec4\x20projec'+'tionPoint\x20'+'=\x20matrix_v'+'iewProject'+'ion\x20*\x20poin'+'tOfRefract'+'ion;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20bui'+'lt-in\x20getG'+'rabScreenP'+'os\x20functio'+'n\x20to\x20conve'+'rt\x20screen\x20'+'position\x20t'+'o\x20grab\x20tex'+'ture\x20uv\x20co'+'ords\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etGrabScre'+'enPos(proj'+'ectionPoin'+'t);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Use\x20IOR\x20'+'and\x20roughn'+'ess\x20to\x20sel'+'ect\x20mip\x0a\x20\x20'+'\x20\x20float\x20io'+'rToRoughne'+'ss\x20=\x20(1.0\x20'+'-\x20gloss)\x20*'+'\x20clamp((1.'+'0\x20/\x20refrac'+'tionIndex)'+'\x20*\x202.0\x20-\x202'+'.0,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20f'+'loat\x20refra'+'ctionLod\x20='+'\x20log2(uScr'+'eenSize.x)'+'\x20*\x20iorToRo'+'ughness;\x0a\x20'+'\x20\x20\x20vec3\x20re'+'fraction\x20='+'\x20texture2D'+'Lod(uScene'+'ColorMap,\x20'+'uv,\x20refrac'+'tionLod).r'+'gb;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20refr'+'action;\x0a}\x0a'+'\x0avoid\x20addR'+'efraction('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20thickne'+'ss,\x20\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+('3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20albed'+'o,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20transm'+'ission,\x0a\x20\x20'+'\x20\x20float\x20re'+'fractionIn'+'dex,\x0a\x20\x20\x20\x20f'+'loat\x20dispe'+'rsion\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a)\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20Extr'+'act\x20scale\x20'+'from\x20the\x20m'+'odel\x20trans'+'form\x0a\x20\x20\x20\x20v'+'ec3\x20modelS'+'cale;\x0a\x20\x20\x20\x20'+'modelScale'+'.x\x20=\x20lengt'+'h(vec3(mat'+'rix_model['+'0].xyz));\x0a'+'\x20\x20\x20\x20modelS'+'cale.y\x20=\x20l'+'ength(vec3'+'(matrix_mo'+'del[1].xyz'+'));\x0a\x20\x20\x20\x20mo'+'delScale.z'+'\x20=\x20length('+'vec3(matri'+'x_model[2]'+'.xyz));\x0a\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20the\x20'+'refraction'+'\x20vector,\x20s'+'caled\x20by\x20t'+'he\x20thickne'+'ss\x20and\x20sca'+'le\x20of\x20the\x20'+'object\x0a\x20\x20\x20'+'\x20vec3\x20scal'+'e\x20=\x20thickn'+'ess\x20*\x20mode'+'lScale;\x0a\x20\x20'+'\x20\x20vec3\x20ref'+'ractionVec'+'tor\x20=\x20norm'+'alize(refr'+'act(-viewD'+'ir,\x20worldN'+'ormal,\x20ref'+'ractionInd'+'ex))\x20*\x20sca'+'le;\x0a\x20\x20\x20\x20ve'+'c3\x20refract'+'ion\x20=\x20eval'+'Refraction'+'Color(refr'+'actionVect'+'or,\x20gloss,'+'\x20refractio'+'nIndex);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20bas'+'ed\x20on\x20the\x20'+'dispersion'+'\x20material\x20'+'property,\x20'+'calculate\x20'+'modified\x20r'+'efraction\x20'+'index\x20valu'+'es\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20for\x20R\x20'+'and\x20B\x20chan'+'nels\x20and\x20e'+'valuate\x20th'+'e\x20refracti'+'on\x20color\x20f'+'or\x20them.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20halfSpr'+'ead\x20=\x20(1.0'+'\x20/\x20refract'+'ionIndex\x20-')+('\x201.0)\x20*\x200.'+'025\x20*\x20disp'+'ersion;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20refract'+'ionIndexR\x20'+'=\x20refracti'+'onIndex\x20-\x20'+'halfSpread'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'refraction'+'Vector\x20=\x20n'+'ormalize(r'+'efract(-vi'+'ewDir,\x20wor'+'ldNormal,\x20'+'refraction'+'IndexR))\x20*'+'\x20scale;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20refr'+'action.r\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'xR).r;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20refracti'+'onIndexB\x20='+'\x20refractio'+'nIndex\x20+\x20h'+'alfSpread;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efractionV'+'ector\x20=\x20no'+'rmalize(re'+'fract(-vie'+'wDir,\x20worl'+'dNormal,\x20r'+'efractionI'+'ndexB))\x20*\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20refra'+'ction.b\x20=\x20'+'evalRefrac'+'tionColor('+'refraction'+'Vector,\x20gl'+'oss,\x20refra'+'ctionIndex'+'B).b;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20Trans'+'mittance\x20i'+'s\x20our\x20fina'+'l\x20refracti'+'on\x20color\x0a\x20'+'\x20\x20\x20vec3\x20tr'+'ansmittanc'+'e;\x0a\x20\x20\x20\x20if\x20'+'(material_'+'invAttenua'+'tionDistan'+'ce\x20!=\x200.0)'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'attenuatio'+'n\x20=\x20-log(m'+'aterial_at'+'tenuation)'+'\x20*\x20materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans'+'mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20vec3'+'\x20fresnel\x20='+'\x20vec3(1.0)'+'\x20-\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot(')+('viewDir,\x20w'+'orldNormal'+'),\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20ref'+'raction\x20*\x20'+'transmitta'+'nce\x20*\x20fres'+'nel,\x20trans'+'mission);\x0a'+'}\x0a'),CP='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0a//\x20sourc'+'e\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'lerCube\x20so'+'urceCube;\x0a'+'#else\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20so'+'urceTex;\x0a#'+'endif\x0a\x0a#if'+'def\x20USE_SA'+'MPLES_TEX\x0a'+'\x20\x20\x20\x20//\x20sam'+'ples\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20sam'+'plesTex;\x0a\x20'+'\x20\x20\x20uniform'+'\x20vec2\x20samp'+'lesTexInve'+'rseSize;\x0a#'+'endif\x0a\x0a//\x20'+'params:\x0a//'+'\x20x\x20-\x20targe'+'t\x20cubemap\x20'+'face\x200..6\x0a'+'//\x20y\x20-\x20tar'+'get\x20image\x20'+'total\x20pixe'+'ls\x0a//\x20z\x20-\x20'+'source\x20cub'+'emap\x20size\x0a'+'uniform\x20ve'+'c3\x20params;'+'\x0a\x0afloat\x20ta'+'rgetFace()'+'\x20{\x20return\x20'+'params.x;\x20'+'}\x0afloat\x20ta'+'rgetTotalP'+'ixels()\x20{\x20'+'return\x20par'+'ams.y;\x20}\x0af'+'loat\x20sourc'+'eTotalPixe'+'ls()\x20{\x20ret'+'urn\x20params'+'.z;\x20}\x0a\x0aflo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0a#i'+'nclude\x20\x22de'+'codePS\x22\x0a#i'+'nclude\x20\x22en'+'codePS\x22\x0a\x0a/'+'/--\x20suppor'+'ted\x20projec'+'tions\x0a\x0avec'+'3\x20modifySe'+'ams(vec3\x20d'+'ir,\x20float\x20'+'scale)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20ad'+'ir\x20=\x20abs(d'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20M\x20=\x20m'+'ax(max(adi'+'r.x,\x20adir.'+'y),\x20adir.z'+');\x0a\x20\x20\x20\x20ret'+'urn\x20dir\x20/\x20'+'M\x20*\x20vec3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.x\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20adir.y\x20'+'==\x20M\x20?\x201.0'+'\x20:\x20scale,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.z\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0avec2\x20t'+'oSpherical'+'(vec3\x20dir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec2(d'+'ir.xz\x20==\x20v'+'ec2(0.0)\x20?'+('\x200.0\x20:\x20ata'+'n(dir.x,\x20d'+'ir.z),\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0avec3\x20f'+'romSpheric'+'al(vec2\x20uv'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec3('+'cos(uv.y)\x20'+'*\x20sin(uv.x'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'in(uv.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cos('+'uv.y)\x20*\x20co'+'s(uv.x));\x0a'+'}\x0a\x0avec3\x20ge'+'tDirection'+'Equirect()'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20fromSp'+'herical((v'+'ec2(vUv0.x'+',\x201.0\x20-\x20vU'+'v0.y)\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20vec2(PI,\x20'+'PI\x20*\x200.5))'+';\x0a}\x0a\x0a//\x20oc'+'tahedral\x20c'+'ode,\x20based'+'\x20on\x20https:'+'//jcgt.org'+'/published'+'/0003/02/0'+'1/\x0a//\x20\x22Sur'+'vey\x20of\x20Eff'+'icient\x20Rep'+'resentatio'+'ns\x20for\x20Ind'+'ependent\x20U'+'nit\x20Vector'+'s\x22\x20by\x20Cigo'+'lle,\x20Donow'+',\x20Evangela'+'kos,\x20Mara,'+'\x20McGuire,\x20'+'Meyer\x0a\x0aflo'+'at\x20signNot'+'Zero(float'+'\x20k){\x0a\x20\x20\x20\x20r'+'eturn(k\x20>='+'\x200.0)\x20?\x201.'+'0\x20:\x20-1.0;\x0a'+'}\x0a\x0avec2\x20si'+'gnNotZero('+'vec2\x20v)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20vec2(sign'+'NotZero(v.'+'x),\x20signNo'+'tZero(v.y)'+');\x0a}\x0a\x0a//\x20R'+'eturns\x20a\x20u'+'nit\x20vector'+'.\x20Argument'+'\x20o\x20is\x20an\x20o'+'ctahedral\x20'+'vector\x20pac'+'ked\x20via\x20oc'+'tEncode,\x20o'+'n\x20the\x20[-1,'+'\x20+1]\x20squar'+'e\x0avec3\x20oct'+'Decode(vec'+'2\x20o)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20v\x20=\x20'+'vec3(o.x,\x20'+'1.0\x20-\x20abs('+'o.x)\x20-\x20abs'+'(o.y),\x20o.y'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20v.xz\x20=\x20('+'1.0\x20-\x20abs('+'v.zx))\x20*\x20s'+'ignNotZero'+'(v.xz);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20norma'+'lize(v);\x0a}'+'\x0a\x0avec3\x20get'+'DirectionO'+'ctahedral('+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20octDe'+'code(vec2(')+('vUv0.x,\x201.'+'0\x20-\x20vUv0.y'+')\x20*\x202.0\x20-\x20'+'1.0);\x0a}\x0a\x0a/'+'/\x20Assumes\x20'+'that\x20v\x20is\x20'+'a\x20unit\x20vec'+'tor.\x20The\x20r'+'esult\x20is\x20a'+'n\x20octahedr'+'al\x20vector\x20'+'on\x20the\x20[-1'+',\x20+1]\x20squa'+'re\x0avec2\x20oc'+'tEncode(in'+'\x20vec3\x20v)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20vec2'+'\x20result\x20=\x20'+'v.xz\x20*\x20(1.'+'0\x20/\x20l1norm'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20result\x20='+'\x20(1.0\x20-\x20ab'+'s(result.y'+'x))\x20*\x20sign'+'NotZero(re'+'sult.xy);\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20res'+'ult;\x0a}\x0a\x0a//'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'///////\x0a\x0a#'+'ifdef\x20CUBE'+'MAP_SOURCE'+'\x0a\x20\x20\x20\x20vec4\x20'+'sampleCube'+'map(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureCu'+'be(sourceC'+'ube,\x20modif'+'ySeams(dir'+',\x201.0));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eCubemap(v'+'ec2\x20sph)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leCubemap('+'fromSpheri'+'cal(sph));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20vec4\x20sam'+'pleCubemap'+'(vec3\x20dir,'+'\x20float\x20mip'+'Level)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20textur'+'eCubeLod(s'+'ourceCube,'+'\x20modifySea'+'ms(dir,\x201.'+'0),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleCub'+'emap(vec2\x20'+'sph,\x20float'+'\x20mipLevel)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleCubema'+'p(fromSphe'+'rical(sph)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eEquirect('+'vec2\x20sph)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'sph\x20/\x20vec2'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'ture2D(sou'+'rceTex,\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec4\x20s'+'ampleEquir'+'ect(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleEqu'+'irect(toSp'+'herical(di'+'r));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleEqu'+'irect(vec2'+'\x20sph,\x20floa'+'t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20sph\x20/\x20ve'+'c2(PI\x20*\x202.'+'0,\x20PI)\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2DLo'+'d(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y),\x20mip'+'Level);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Equirect(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20sampleEq'+'uirect(toS'+'pherical(d'+'ir),\x20mipLe'+'vel);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20o'+'ctEncode(d'+'ir)\x20*\x200.5\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20texture2'+'D(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Octahedral'+'(vec2\x20sph)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleOctahe'+'dral(fromS'+'pherical(s'+'ph));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20octEn'+'code(dir)\x20'+'*\x200.5\x20+\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20te'+'xture2DLod'+'(sourceTex'+',\x20vec2(uv.'+'x,\x201.0\x20-\x20u'+'v.y),\x20mipL'+'evel);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20sampleO'+'ctahedral('+'vec2\x20sph,\x20'+'float\x20mipL'+'evel)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleO'+'ctahedral('+'fromSpheri'+'cal(sph),\x20')+('mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0avec3'+'\x20getDirect'+'ionCubemap'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec2\x20st\x20=\x20v'+'Uv0\x20*\x202.0\x20'+'-\x201.0;\x0a\x20\x20\x20'+'\x20float\x20fac'+'e\x20=\x20target'+'Face();\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ve'+'c;\x0a\x20\x20\x20\x20if\x20'+'(face\x20==\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec\x20=\x20'+'vec3(1,\x20-s'+'t.y,\x20-st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3(-1,\x20-st.'+'y,\x20st.x);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(face\x20'+'==\x202.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c\x20=\x20vec3(s'+'t.x,\x201,\x20st'+'.y);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x203.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3(st.x,\x20'+'-1,\x20-st.y)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(fac'+'e\x20==\x204.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec\x20=\x20vec3'+'(st.x,\x20-st'+'.y,\x201);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec\x20=\x20vec3('+'-st.x,\x20-st'+'.y,\x20-1);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(mod'+'ifySeams(v'+'ec,\x201.0));'+'\x0a}\x0a\x0amat3\x20m'+'atrixFromV'+'ector(vec3'+'\x20n)\x20{\x20//\x20f'+'risvad\x0a\x20\x20\x20'+'\x20float\x20a\x20='+'\x201.0\x20/\x20(1.'+'0\x20+\x20n.z);\x0a'+'\x20\x20\x20\x20float\x20'+'b\x20=\x20-n.x\x20*'+'\x20n.y\x20*\x20a;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'1\x20=\x20vec3(1'+'.0\x20-\x20n.x\x20*'+'\x20n.x\x20*\x20a,\x20'+'b,\x20-n.x);\x0a'+'\x20\x20\x20\x20vec3\x20b'+'2\x20=\x20vec3(b'+',\x201.0\x20-\x20n.'+'y\x20*\x20n.y\x20*\x20'+'a,\x20-n.y);\x0a'+'\x20\x20\x20\x20return'+'\x20mat3(b1,\x20'+'b2,\x20n);\x0a}\x0a'+'\x0amat3\x20matr'+'ixFromVect'+'orSlow(vec'+'3\x20n)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20up\x20='+'\x20(1.0\x20-\x20ab'+'s(n.y)\x20<=\x20'+'0.0000001)'+'\x20?\x20vec3(0.'+'0,\x200.0,\x20n.'+'y\x20>\x200.0\x20?\x20'+'1.0\x20:\x20-1.0'+')\x20:\x20vec3(0'+'.0,\x201.0,\x200'+'.0);\x0a\x20\x20\x20\x20v'+'ec3\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20vec'+'3\x20y\x20=\x20cros')+('s(n,\x20x);\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(x,\x20y,'+'\x20n);\x0a}\x0a\x0ave'+'c4\x20reproje'+'ct()\x20{\x0a\x20\x20\x20'+'\x20if\x20({NUM_'+'SAMPLES}\x20<'+'=\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20si'+'ngle\x20sampl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20{EN'+'CODE_FUNC}'+'({DECODE_F'+'UNC}({SOUR'+'CE_FUNC}({'+'TARGET_FUN'+'C}())));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multi\x20s'+'ample\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20t'+'\x20=\x20{TARGET'+'_FUNC}();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20tu\x20=\x20dF'+'dx(t);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'tv\x20=\x20dFdy('+'t);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(float\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'++u)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(float\x20'+'v\x20=\x200.0;\x20v'+'\x20<\x20{NUM_SA'+'MPLES_SQRT'+'};\x20++v)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20resu'+'lt\x20+=\x20{DEC'+'ODE_FUNC}('+'{SOURCE_FU'+'NC}(normal'+'ize(t\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20tu'+'\x20*\x20(u\x20/\x20{N'+'UM_SAMPLES'+'_SQRT}\x20-\x200'+'.5)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20tv\x20*'+'\x20(v\x20/\x20{NUM'+'_SAMPLES_S'+'QRT}\x20-\x200.5'+'))));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20({'+'NUM_SAMPLE'+'S_SQRT}\x20*\x20'+'{NUM_SAMPL'+'ES_SQRT}))'+';\x0a\x20\x20\x20\x20}\x0a}\x0a'+'\x0avec4\x20unpa'+'ckFloat\x20=\x20'+'vec4(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20void\x20'+'unpackSamp'+'le(int\x20i,\x20'+'out\x20vec3\x20L'+',\x20out\x20floa')+('t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20u\x20'+'=\x20(float(i'+'\x20*\x204)\x20+\x200.'+'5)\x20*\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20v\x20=\x20(f'+'loor(u)\x20+\x20'+'0.5)\x20*\x20sam'+'plesTexInv'+'erseSize.y'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20raw;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.x\x20=\x20dot'+'(texture2D'+'(samplesTe'+'x,\x20vec2(u,'+'\x20v)),\x20unpa'+'ckFloat);\x20'+'u\x20+=\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'texture2D('+'samplesTex'+',\x20vec2(u,\x20'+'v)),\x20unpac'+'kFloat);\x20u'+'\x20+=\x20sample'+'sTexInvers'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.z\x20=\x20dot(t'+'exture2D(s'+'amplesTex,'+'\x20vec2(u,\x20v'+')),\x20unpack'+'Float);\x20u\x20'+'+=\x20samples'+'TexInverse'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20raw.'+'w\x20=\x20dot(te'+'xture2D(sa'+'mplesTex,\x20'+'vec2(u,\x20v)'+'),\x20unpackF'+'loat);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20L.xy'+'z\x20=\x20raw.xy'+'z\x20*\x202.0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20mipLeve'+'l\x20=\x20raw.w\x20'+'*\x208.0;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20convolve\x20'+'an\x20environ'+'ment\x20given'+'\x20pre-gener'+'ated\x20sampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamples()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L')+(',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level))\x20*\x20'+'L.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tot'+'alWeight\x20+'+'=\x20L.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20{ENCODE'+'_FUNC}(res'+'ult\x20/\x20tota'+'lWeight);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20unweig'+'hted\x20versi'+'on\x20of\x20pref'+'ilterSampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamplesUn'+'weighted()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20fl'+'oat({NUM_S'+'AMPLES}));'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20{PROCESS'+'_FUNC}();\x0a'+'}\x0a'),PP='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0auniform'+'\x20vec4\x20uvMo'+'d;\x0avarying'+'\x20vec2\x20vUv0'+';\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20v'+'ec4(vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(vertex_po'+'sition.xy\x20'+'*\x200.5\x20+\x200.'+'5)\x20*\x20uvMod'+'.xy\x20+\x20uvMo'+'d.zw);\x0a}\x0a',MP='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20uScen'+'eDepthMap;'+'\x0a\x0a#ifndef\x20'+'SCREENSIZE'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20SCREENS'+'IZE\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20un'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#ifndef'+'\x20CAMERAPLA'+'NES\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20camera'+'_params;\x20/'+'/\x20x:\x201\x20/\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20\x20y:\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20z:\x20ca'+'mera_near,'+'\x20\x20\x20\x20\x20\x20\x20\x20w:'+'\x20is_ortho\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20lineariz'+'eDepth(flo'+'at\x20z)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'camera_par'+'ams.w\x20==\x200'+'.0)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(camera'+'_params.z\x20'+'*\x20camera_p'+'arams.y)\x20/'+'\x20(camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(camer'+'a_params.z'+'\x20-\x20camera_'+'params.y))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20camera'+'_params.z\x20'+'+\x20z\x20*\x20(cam'+'era_params'+'.y\x20-\x20camer'+'a_params.z'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0aflo'+'at\x20delinea'+'rizeDepth('+'float\x20line'+'arDepth)\x20{'+'\x0a\x20\x20\x20\x20if\x20(c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'(camera_pa'+'rams.y\x20*\x20('+'camera_par'+'ams.z\x20-\x20li'+'nearDepth)'+')\x20/\x20(linea'+'rDepth\x20*\x20('+'camera_par'+'ams.z\x20-\x20ca'+'mera_param'+'s.y));\x0a\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(line'+'arDepth\x20-\x20'+'camera_par'+'ams.z)\x20/\x20('+('camera_par'+'ams.y\x20-\x20ca'+'mera_param'+'s.z);\x0a\x20\x20\x20\x20'+'}\x0a}\x0a\x0a//\x20Re'+'trieves\x20re'+'ndered\x20lin'+'ear\x20camera'+'\x20depth\x20by\x20'+'UV\x0afloat\x20g'+'etLinearSc'+'reenDepth('+'vec2\x20uv)\x20{'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SCENE_DE'+'PTHMAP_LIN'+'EAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_FLOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2D(u'+'SceneDepth'+'Map,\x20uv).r'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20textu'+'reSize\x20=\x20t'+'extureSize'+'(uSceneDep'+'thMap,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ivec2\x20t'+'exel\x20=\x20ive'+'c2(uv\x20*\x20ve'+'c2(texture'+'Size));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20data\x20'+'=\x20texelFet'+'ch(uSceneD'+'epthMap,\x20t'+'exel,\x200);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(data.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(uint(d'+'ata.g\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20|\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(uint(dat'+'a.b\x20*\x20255.'+'0)\x20<<\x208u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(data.a\x20'+'*\x20255.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uintBitsTo'+'Float(intB'+'its);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20line'+'arizeDepth'+'(texture2D'+'(uSceneDep'+'thMap,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20float\x20'+'getLinearS'+'creenDepth'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20uv'+'\x20=\x20gl_Frag'+'Coord.xy\x20*'+'\x20uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur')+('n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afloat\x20'+'getLinearD'+'epth(vec3\x20'+'pos)\x20{\x0a\x20\x20\x20'+'\x20return\x20-('+'matrix_vie'+'w\x20*\x20vec4(p'+'os,\x201.0)).'+'z;\x0a}\x0a'),DP='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x20\x0ai'+'nt\x20getShad'+'owCascadeI'+'ndex(vec4\x20'+'shadowCasc'+'adeDistanc'+'es,\x20int\x20sh'+'adowCascad'+'eCount)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20in\x200\x20.'+'.\x20far\x20plan'+'e\x20range\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x0a\x20'+'\x20\x20\x20//\x201.0\x20'+'if\x20depth\x20>'+'=\x20distance'+',\x200.0\x20othe'+'rwise\x0a\x20\x20\x20\x20'+'vec4\x20compa'+'risons\x20=\x20s'+'tep(shadow'+'CascadeDis'+'tances,\x20ve'+'c4(depth))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'sum\x20is\x20the'+'\x20index\x0a\x20\x20\x20'+'\x20int\x20casca'+'deIndex\x20=\x20'+'int(dot(co'+'mparisons,'+'\x20vec4(1.0)'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20limit\x20to'+'\x20actual\x20nu'+'mber\x20of\x20us'+'ed\x20cascade'+'s\x0a\x20\x20\x20\x20retu'+'rn\x20min(cas'+'cadeIndex,'+'\x20shadowCas'+'cadeCount\x20'+'-\x201);\x0a}\x0a\x0a/'+'/\x20function'+'\x20which\x20mod'+'ifies\x20casc'+'ade\x20index\x20'+'to\x20dither\x20'+'between\x20ca'+'scades\x0aint'+'\x20ditherSha'+'dowCascade'+'Index(int\x20'+'cascadeInd'+'ex,\x20vec4\x20s'+'hadowCasca'+'deDistance'+'s,\x20int\x20sha'+'dowCascade'+'Count,\x20flo'+'at\x20blendFa'+'ctor)\x20{\x0a\x20\x0a'+'\x20\x20\x20\x20if\x20(ca'+'scadeIndex'+'\x20<\x20shadowC'+'ascadeCoun'+'t\x20-\x201)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20current'+'RangeEnd\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20transit'+'ionStart\x20='+'\x20blendFact'+'or\x20*\x20curre'+'ntRangeEnd'+';\x20//\x20Start'+'\x20overlap\x20f'+'actor\x20away'+'\x20from\x20the\x20'+'end\x20distan'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x201.0\x20/'+('\x20gl_FragCo'+'ord.w;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'depth\x20>\x20tr'+'ansitionSt'+'art)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Calculat'+'e\x20a\x20transi'+'tion\x20facto'+'r\x20(0.0\x20to\x20'+'1.0)\x20withi'+'n\x20the\x20over'+'lap\x20range\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20tr'+'ansitionFa'+'ctor\x20=\x20smo'+'othstep(tr'+'ansitionSt'+'art,\x20curre'+'ntRangeEnd'+',\x20depth);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Add\x20'+'pseudo-ran'+'dom\x20dither'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ODO:\x20repla'+'ce\x20by\x20user'+'\x20selectabl'+'e\x20ditherin'+'g\x20method\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dit'+'her\x20=\x20frac'+'t(sin(dot('+'gl_FragCoo'+'rd.xy,\x20vec'+'2(12.9898,'+'\x2078.233)))'+'\x20*\x2043758.5'+'453);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(dither\x20<'+'\x20transitio'+'nFactor)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20cas'+'cadeIndex\x20'+'+=\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20return\x20ca'+'scadeIndex'+';\x0a}\x0a\x0avec3\x20'+'fadeShadow'+'(vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'CascadeDis'+'tances)\x20{\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20if\x20th'+'e\x20pixel\x20is'+'\x20past\x20the\x20'+'shadow\x20dis'+'tance,\x20rem'+'ove\x20shadow'+'\x0a\x20\x20\x20\x20//\x20th'+'is\x20enforce'+'s\x20straight'+'\x20line\x20inst'+'ead\x20of\x20cor'+'ner\x20of\x20sha'+'dow\x20which\x20'+'moves\x20when'+'\x20camera\x20ro'+'tates\x20\x20\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x20\x20'+'\x20\x20if\x20(dept'+'h\x20>\x20shadow'+'CascadeDis'+'tances.w)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'shadowCoor'+'d.z\x20=\x20-999'+'9999.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20shad'+'owCoord;\x0a}'+'\x0a'),IP='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afloat\x20lin'+'step(float'+'\x20a,\x20float\x20'+'b,\x20float\x20v'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20satur'+'ate((v\x20-\x20a'+')\x20/\x20(b\x20-\x20a'+'));\x0a}\x0a\x0aflo'+'at\x20reduceL'+'ightBleedi'+'ng(float\x20p'+'Max,\x20float'+'\x20amount)\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'float\x20cheb'+'yshevUpper'+'Bound(vec2'+'\x20moments,\x20'+'float\x20mean'+',\x20float\x20mi'+'nVariance,'+'\x20float\x20lig'+'htBleeding'+'Reduction)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'Compute\x20va'+'riance\x0a\x20\x20\x20'+'\x20float\x20var'+'iance\x20=\x20mo'+'ments.y\x20-\x20'+'(moments.x'+'\x20*\x20moments'+'.x);\x0a\x20\x20\x20\x20v'+'ariance\x20=\x20'+'max(varian'+'ce,\x20minVar'+'iance);\x0a\x0a\x20'+'\x20\x20\x20//\x20Comp'+'ute\x20probab'+'ilistic\x20up'+'per\x20bound\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20mean\x20-'+'\x20moments.x'+';\x0a\x20\x20\x20\x20floa'+'t\x20pMax\x20=\x20v'+'ariance\x20/\x20'+'(variance\x20'+'+\x20(d\x20*\x20d))'+';\x0a\x0a\x20\x20\x20\x20pMa'+'x\x20=\x20reduce'+'LightBleed'+'ing(pMax,\x20'+'lightBleed'+'ingReducti'+'on);\x0a\x0a\x20\x20\x20\x20'+'//\x20One-tai'+'led\x20Chebys'+'hev\x0a\x20\x20\x20\x20re'+'turn\x20(mean'+'\x20<=\x20moment'+'s.x\x20?\x201.0\x20'+':\x20pMax);\x0a}'+'\x0a\x0afloat\x20ca'+'lculateEVS'+'M(vec3\x20mom'+'ents,\x20floa'+'t\x20Z,\x20float'+'\x20vsmBias,\x20'+'float\x20expo'+'nent)\x20{\x0a\x20\x20'+'\x20\x20Z\x20=\x202.0\x20'+'*\x20Z\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20warpedDep'+'th\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20m'+'oments.xy\x20'+'+=\x20vec2(wa'+'rpedDepth,'+'\x20warpedDep'+'th*warpedD'+'epth)\x20*\x20(1'+'.0\x20-\x20momen'+'ts.z);\x0a\x0a\x20\x20'+('\x20\x20float\x20VS'+'MBias\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20float'+'\x20depthScal'+'e\x20=\x20VSMBia'+'s\x20*\x20expone'+'nt\x20*\x20warpe'+'dDepth;\x0a\x20\x20'+'\x20\x20float\x20mi'+'nVariance1'+'\x20=\x20depthSc'+'ale\x20*\x20dept'+'hScale;\x0a\x20\x20'+'\x20\x20return\x20c'+'hebyshevUp'+'perBound(m'+'oments.xy,'+'\x20warpedDep'+'th,\x20minVar'+'iance1,\x200.'+'1);\x0a}\x0a\x0a//\x20'+'------\x20VSM'+'\x2016\x20------'+'\x0a\x0afloat\x20VS'+'M16(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec2\x20'+'texCoords,'+'\x20float\x20res'+'olution,\x20f'+'loat\x20Z,\x20fl'+'oat\x20vsmBia'+'s,\x20float\x20e'+'xponent)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'moments\x20=\x20'+'texture2DL'+'od(tex,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM16('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM16(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM16(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20VSM16('+'TEXTURE_PA'+'SS(shadowM'+'ap),\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----')+('--\x0a\x0afloat\x20'+'VSM32(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20texCoord'+'s,\x20float\x20r'+'esolution,'+'\x20float\x20Z,\x20'+'float\x20vsmB'+'ias,\x20float'+'\x20exponent)'+'\x20{\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20CAPS_'+'TEXTURE_FL'+'OAT_FILTER'+'ABLE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20te'+'xture2DLod'+'(tex,\x20texC'+'oords,\x200.0'+').xyz;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ma'+'nual\x20bilin'+'ear\x20filter'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pi'+'xelSize\x20=\x20'+'1.0\x20/\x20reso'+'lution;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20texC'+'oords\x20-=\x20v'+'ec2(pixelS'+'ize);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'00\x20=\x20textu'+'re2DLod(te'+'x,\x20texCoor'+'ds,\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20s10'+'\x20=\x20texture'+'2DLod(tex,'+'\x20texCoords'+'\x20+\x20vec2(pi'+'xelSize,\x200'+'),\x200.0).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20s01\x20'+'=\x20texture2'+'DLod(tex,\x20'+'texCoords\x20'+'+\x20vec2(0,\x20'+'pixelSize)'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20s11\x20='+'\x20texture2D'+'Lod(tex,\x20t'+'exCoords\x20+'+'\x20vec2(pixe'+'lSize),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20fr\x20=\x20frac'+'t(texCoord'+'s\x20*\x20resolu'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'h0\x20=\x20mix(s'+'00,\x20s10,\x20f'+'r.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20h'+'1\x20=\x20mix(s0'+'1,\x20s11,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20mi'+'x(h0,\x20h1,\x20'+'fr.y);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM32('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM32(T')+('EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM32(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20Z\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd.xy,\x20sha'+'dowParams.'+'x,\x20Z,\x20shad'+'owParams.y'+',\x20exponent'+');\x0a}\x0a'),LP='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_ACCEP'+'T(shadowMa'+'p),\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20textur'+'eShadow(sh'+'adowMap,\x20s'+'hadowCoord'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wSpotPCF1x'+'1(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSh'+'adow(shado'+'wMap,\x20shad'+'owCoord);\x0a'+'}\x0a\x0a//\x20----'+'-\x20Omni\x20Sam'+'pling\x20----'+'-\x0a\x0a#ifndef'+'\x20WEBGPU\x0a\x0af'+'loat\x20getSh'+'adowOmniPC'+'F1x1(sampl'+'erCubeShad'+'ow\x20shadowM'+'ap,\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20float\x20sh'+'adowZ\x20=\x20le'+'ngth(light'+'Dir)\x20*\x20sha'+'dowParams.'+'w\x20+\x20shadow'+'Params.z;\x0a'+'\x20\x20\x20\x20return'+'\x20texture(s'+'hadowMap,\x20'+'vec4(light'+'Dir,\x20shado'+'wZ));\x0a}\x0a\x0a#'+'endif\x0a',RP='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_ACCE'+'PT(shadowM'+'ap),\x20vec3\x20'+'shadowCoor'+'d,\x20vec3\x20sh'+'adowParams'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20sh'+'adowCoord.'+'z;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20sha'+'dowCoord.x'+'y\x20*\x20shadow'+'Params.x;\x20'+'//\x201\x20unit\x20'+'-\x201\x20texel\x0a'+'\x20\x20\x20\x20float\x20'+'shadowMapS'+'izeInv\x20=\x201'+'.0\x20/\x20shado'+'wParams.x;'+'\x0a\x20\x20\x20\x20vec2\x20'+'base_uv\x20=\x20'+'floor(uv\x20+'+'\x200.5);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20(uv.x\x20+\x200'+'.5\x20-\x20base_'+'uv.x);\x0a\x20\x20\x20'+'\x20float\x20t\x20='+'\x20(uv.y\x20+\x200'+'.5\x20-\x20base_'+'uv.y);\x20\x0a\x20\x20'+'\x20\x20base_uv\x20'+'-=\x20vec2(0.'+'5);\x0a\x20\x20\x20\x20ba'+'se_uv\x20*=\x20s'+'hadowMapSi'+'zeInv;\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'uw0\x20=\x20(3.0'+'\x20-\x202.0\x20*\x20s'+');\x0a\x20\x20\x20\x20flo'+'at\x20uw1\x20=\x20('+'1.0\x20+\x202.0\x20'+'*\x20s);\x0a\x0a\x20\x20\x20'+'\x20float\x20u0\x20'+'=\x20(2.0\x20-\x20s'+')\x20/\x20uw0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20f'+'loat\x20u1\x20=\x20'+'s\x20/\x20uw1\x20+\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(3.0\x20-\x202'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20t)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20v0\x20=\x20(2'+'.0\x20-\x20t)\x20/\x20'+'vw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20v1\x20=\x20t\x20/\x20'+'vw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20u0\x20='+'\x20u0\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v0\x20=\x20v0\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u1\x20=\x20'+'u1\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'1\x20=\x20v1\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+('sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw0\x20*\x20v'+'w1\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u0,\x20v'+'1,\x20z));\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w1\x20*\x20vw1\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u1,\x20v1,\x20z'+'));\x0a\x0a\x20\x20\x20\x20s'+'um\x20*=\x201.0f'+'\x20/\x2016.0;\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowPCF3x3('+'SHADOWMAP_'+'ACCEPT(sha'+'dowMap),\x20v'+'ec3\x20shadow'+'Coord,\x20vec'+'4\x20shadowPa'+'rams)\x20{\x0a\x20\x20'+'\x20\x20return\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_PASS'+'(shadowMap'+'),\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowSpotPCF'+'3x3(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3('+'SHADOWMAP_'+'PASS(shado'+'wMap),\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0a//\x20-----'+'\x20Omni\x20Samp'+'ling\x20-----'+'\x0a\x0a#ifndef\x20'+'WEBGPU\x0a\x0afl'+'oat\x20getSha'+'dowOmniPCF'+'3x3(sample'+'rCubeShado'+'w\x20shadowMa'+'p,\x20vec4\x20sh'+'adowParams'+',\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a\x20\x20\x20\x20fl'+'oat\x20shadow'+'Z\x20=\x20length'+'(dir)\x20*\x20sh'+'adowParams'+'.w\x20+\x20shado'+'wParams.z;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x0a\x20\x20\x20\x20'+'float\x20z\x20=\x20'+'1.0\x20/\x20floa'+'t(textureS'+'ize(shadow'+'Map,\x200));\x0a'+'\x20\x20\x20\x20vec3\x20t'+'c\x20=\x20normal'+'ize(dir);\x0a'+'\x0a\x20\x20\x20\x20//\x20av'+'erage\x204\x20sa'+'mples\x20-\x20no'+'t\x20a\x20strict')+('\x203x3\x20PCF\x20b'+'ut\x20that\x27s\x20'+'tricky\x20wit'+'h\x20cubemaps'+'\x0a\x20\x20\x20\x20mediu'+'mp\x20vec4\x20sh'+'adows;\x0a\x20\x20\x20'+'\x20shadows.x'+'\x20=\x20texture'+'(shadowMap'+',\x20vec4(tc\x20'+'+\x20vec3(\x20z,'+'\x20z,\x20z),\x20sh'+'adowZ));\x0a\x20'+'\x20\x20\x20shadows'+'.y\x20=\x20textu'+'re(shadowM'+'ap,\x20vec4(t'+'c\x20+\x20vec3(-'+'z,-z,\x20z),\x20'+'shadowZ));'+'\x0a\x20\x20\x20\x20shado'+'ws.z\x20=\x20tex'+'ture(shado'+'wMap,\x20vec4'+'(tc\x20+\x20vec3'+'(-z,\x20z,-z)'+',\x20shadowZ)'+');\x0a\x20\x20\x20\x20sha'+'dows.w\x20=\x20t'+'exture(sha'+'dowMap,\x20ve'+'c4(tc\x20+\x20ve'+'c3(\x20z,-z,-'+'z),\x20shadow'+'Z));\x0a\x0a\x20\x20\x20\x20'+'return\x20dot'+'(shadows,\x20'+'vec4(0.25)'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wOmniPCF3x'+'3(samplerC'+'ubeShadow\x20'+'shadowMap,'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20lightDi'+'r)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowOmniP'+'CF3x3(shad'+'owMap,\x20sha'+'dowParams,'+'\x20lightDir)'+';\x0a}\x0a\x0a#endi'+'f\x0a'),OP='\x0afloat\x20_ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec3\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20//\x20h'+'ttp://the-'+'witness.ne'+'t/news/201'+'3/09/shado'+'w-mapping-'+'summary-pa'+'rt-1/\x0a\x0a\x20\x20\x20'+'\x20float\x20z\x20='+'\x20shadowCoo'+'rd.z;\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'shadowCoor'+'d.xy\x20*\x20sha'+'dowParams.'+'x;\x20//\x201\x20un'+'it\x20-\x201\x20tex'+'el\x0a\x20\x20\x20\x20flo'+'at\x20shadowM'+'apSizeInv\x20'+'=\x201.0\x20/\x20sh'+'adowParams'+'.x;\x0a\x20\x20\x20\x20ve'+'c2\x20base_uv'+'\x20=\x20floor(u'+'v\x20+\x200.5);\x0a'+'\x20\x20\x20\x20float\x20'+'s\x20=\x20(uv.x\x20'+'+\x200.5\x20-\x20ba'+'se_uv.x);\x0a'+'\x20\x20\x20\x20float\x20'+'t\x20=\x20(uv.y\x20'+'+\x200.5\x20-\x20ba'+'se_uv.y);\x0a'+'\x20\x20\x20\x20base_u'+'v\x20-=\x20vec2('+'0.5);\x0a\x20\x20\x20\x20'+'base_uv\x20*='+'\x20shadowMap'+'SizeInv;\x0a\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20uw0\x20=\x20(4.'+'0\x20-\x203.0\x20*\x20'+'s);\x0a\x20\x20\x20\x20fl'+'oat\x20uw1\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20f'+'loat\x20uw2\x20='+'\x20(1.0\x20+\x203.'+'0\x20*\x20s);\x0a\x0a\x20'+'\x20\x20\x20float\x20u'+'0\x20=\x20(3.0\x20-'+'\x202.0\x20*\x20s)\x20'+'/\x20uw0\x20-\x202.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20u1\x20=\x20(3'+'.0\x20+\x20s)\x20/\x20'+'uw1;\x0a\x20\x20\x20\x20f'+'loat\x20u2\x20=\x20'+'s\x20/\x20uw2\x20+\x20'+'2.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(4.0\x20-\x203'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x207.0;\x0a'+'\x20\x20\x20\x20float\x20'+'vw2\x20=\x20(1.0'+'\x20+\x203.0\x20*\x20t'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20v0\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20t)\x20/\x20vw0'+'\x20-\x202.0;\x0a\x20\x20'+'\x20\x20float\x20v1'+'\x20=\x20(3.0\x20+\x20'+'t)\x20/\x20vw1;\x0a'+'\x20\x20\x20\x20float\x20'+'v2\x20=\x20t\x20/\x20v'+'w2\x20+\x202.0;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20sum\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20u0\x20'+'=\x20u0\x20*\x20sha'+'dowMapSize'+'Inv\x20+\x20base'+'_uv.x;\x0a\x20\x20\x20'+'\x20v0\x20=\x20v0\x20*'+'\x20shadowMap'+'SizeInv\x20+\x20'+'base_uv.y;'+'\x0a\x0a\x20\x20\x20\x20u1\x20='+('\x20u1\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v1\x20=\x20v1\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u2\x20=\x20'+'u2\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'2\x20=\x20v2\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+'sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw2\x20*\x20v'+'w0\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u2,\x20v'+'0,\x20z));\x0a\x0a\x20'+'\x20\x20\x20sum\x20+=\x20'+'uw0\x20*\x20vw1\x20'+'*\x20textureS'+'hadow(shad'+'owMap,\x20vec'+'3(u0,\x20v1,\x20'+'z));\x0a\x20\x20\x20\x20s'+'um\x20+=\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureShado'+'w(shadowMa'+'p,\x20vec3(u1'+',\x20v1,\x20z));'+'\x0a\x20\x20\x20\x20sum\x20+'+'=\x20uw2\x20*\x20vw'+'1\x20*\x20textur'+'eShadow(sh'+'adowMap,\x20v'+'ec3(u2,\x20v1'+',\x20z));\x0a\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w0\x20*\x20vw2\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u0,\x20v2,\x20z'+'));\x0a\x20\x20\x20\x20su'+'m\x20+=\x20uw1\x20*'+'\x20vw2\x20*\x20tex'+'tureShadow'+'(shadowMap'+',\x20vec3(u1,'+'\x20v2,\x20z));\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw2\x20*\x20vw2'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u2,\x20v2,'+'\x20z));\x0a\x0a\x20\x20\x20'+'\x20sum\x20*=\x201.'+'0f\x20/\x20144.0'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20saturate'+'(sum);\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'um;\x0a}\x0a\x0aflo'+'at\x20getShad'+'owPCF5x5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20_g'+'etShadowPC'+'F5x5(SHADO'+'WMAP_PASS('+'shadowMap)'+',\x20shadowCo'+'ord,\x20shado')+('wParams.xy'+'z);\x0a}\x0a\x0aflo'+'at\x20getShad'+'owSpotPCF5'+'x5(SHADOWM'+'AP_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getShad'+'owPCF5x5(S'+'HADOWMAP_P'+'ASS(shadow'+'Map),\x20shad'+'owCoord,\x20s'+'hadowParam'+'s.xyz);\x0a}\x0a'),FP='\x0a\x0a/**\x0a\x20*\x20P'+'CSS\x20is\x20a\x20s'+'hadow\x20samp'+'ling\x20metho'+'d\x20that\x20pro'+'vides\x20cont'+'act\x20harden'+'ing\x20soft\x20s'+'hadows,\x20us'+'ed\x20for\x20omn'+'i\x20and\x20spot'+'\x20lights.\x0a\x20'+'*\x20Based\x20on'+':\x20\x0a\x20*\x20-\x20ht'+'tps://www.'+'gamedev.ne'+'t/tutorial'+'s/programm'+'ing/graphi'+'cs/effect-'+'area-light'+'-shadows-p'+'art-1-pcss'+'-r4971/\x0a\x20*'+'\x20-\x20https:/'+'/github.co'+'m/pboechat'+'/PCSS\x20\x0a\x20*/'+'\x0a\x0a#define\x20'+'PCSS_SAMPL'+'E_COUNT\x2016'+'\x0a\x0auniform\x20'+'float\x20pcss'+'DiskSample'+'s[PCSS_SAM'+'PLE_COUNT]'+';\x0auniform\x20'+'float\x20pcss'+'SphereSamp'+'les[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x0avec2\x20'+'vogelDisk('+'int\x20sample'+'Index,\x20flo'+'at\x20count,\x20'+'float\x20phi,'+'\x20float\x20r)\x20'+'{\x0a\x20\x20\x20\x20cons'+'t\x20float\x20Go'+'ldenAngle\x20'+'=\x202.4;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta\x20=\x20float'+'(sampleInd'+'ex)\x20*\x20Gold'+'enAngle\x20+\x20'+'phi;\x0a\x0a\x20\x20\x20\x20'+'float\x20sine'+'\x20=\x20sin(the'+'ta);\x0a\x20\x20\x20\x20f'+'loat\x20cosin'+'e\x20=\x20cos(th'+'eta);\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(r\x20*\x20cosi'+'ne,\x20r\x20*\x20si'+'ne);\x0a}\x0a\x0ave'+'c3\x20vogelSp'+'here(int\x20s'+'ampleIndex'+',\x20float\x20co'+'unt,\x20float'+'\x20phi,\x20floa'+'t\x20r)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20GoldenA'+'ngle\x20=\x202.4'+';\x0a\x20\x20\x20\x20floa'+'t\x20theta\x20=\x20'+'float(samp'+'leIndex)\x20*'+'\x20GoldenAng'+'le\x20+\x20phi;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20weight\x20=\x20'+'float(samp'+'leIndex)\x20/'+'\x20count;\x0a\x20\x20'+'\x20\x20return\x20v'+'ec3(cos(th'+'eta)\x20*\x20r,\x20'+'weight,\x20si'+'n(theta)\x20*'+'\x20r);\x0a}\x0a\x0afl'+'oat\x20noise('+'vec2\x20scree'+'nPos)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PHI\x20=\x20'+('1.61803398'+'8749894848'+'20459;\x20\x20//'+'\x20\x20=\x20Golde'+'n\x20Ratio\x20\x20\x20'+'\x0a\x20\x20\x20\x20retur'+'n\x20fract(si'+'n(dot(scre'+'enPos\x20*\x20PH'+'I,\x20screenP'+'os))\x20*\x20scr'+'eenPos.x);'+'\x0a}\x0a\x0afloat\x20'+'viewSpaceD'+'epth(float'+'\x20depth,\x20ma'+'t4\x20invProj'+'ection)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'z\x20=\x20depth\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20vec'+'4\x20clipSpac'+'e\x20=\x20vec4(0'+'.0,\x200.0,\x20z'+',\x201.0);\x0a\x20\x20'+'\x20\x20vec4\x20vie'+'wSpace\x20=\x20i'+'nvProjecti'+'on\x20*\x20clipS'+'pace;\x0a\x20\x20\x20\x20'+'return\x20vie'+'wSpace.z;\x0a'+'}\x0a\x0afloat\x20P'+'CSSBlocker'+'Distance(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20sampleCoo'+'rds[PCSS_S'+'AMPLE_COUN'+'T],\x20vec2\x20s'+'hadowCoord'+'s,\x20vec2\x20se'+'archSize,\x20'+'float\x20z,\x20v'+'ec4\x20camera'+'Params)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20blockers\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20float\x20ave'+'rageBlocke'+'r\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20offset\x20='+'\x20sampleCoo'+'rds[i]\x20*\x20s'+'earchSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20sample'+'UV\x20=\x20shado'+'wCoords\x20+\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20blocker'+'\x20=\x20texture'+'2DLod(shad'+'owMap,\x20sam'+'pleUV,\x200.0'+').r;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20i'+'sBlocking\x20'+'=\x20step(blo'+'cker,\x20z);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20bl'+'ockers\x20+=\x20'+'isBlocking'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'averageBlo'+'cker\x20+=\x20bl'+'ocker\x20*\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20if\x20(block'+'ers\x20>\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20aver'+'ageBlocker'+'\x20/\x20blocker'+'s;\x0a\x20\x20\x20\x20ret'+'urn\x20-1.0;\x0a'+'}\x0a\x0afloat\x20P'+'CSS(TEXTUR')+('E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoords,\x20'+'vec4\x20camer'+'aParams,\x20v'+'ec2\x20shadow'+'SearchArea'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'linearizeD'+'epthWithPa'+'rams(shado'+'wCoords.z,'+'\x20cameraPar'+'ams);\x0a\x0a\x20\x20\x20'+'\x20vec2\x20samp'+'lePoints[P'+'CSS_SAMPLE'+'_COUNT];\x0a\x20'+'\x20\x20\x20const\x20f'+'loat\x20PI\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20float\x20n'+'oise\x20=\x20noi'+'se(\x20gl_Fra'+'gCoord.xy\x20'+')\x20*\x202.0\x20*\x20'+'PI;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x200;\x20i\x20<\x20PC'+'SS_SAMPLE_'+'COUNT;\x20i++'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pc'+'ssPresampl'+'e\x20=\x20pcssDi'+'skSamples['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20samplePo'+'ints[i]\x20=\x20'+'vogelDisk('+'i,\x20float(P'+'CSS_SAMPLE'+'_COUNT),\x20n'+'oise,\x20pcss'+'Presample)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20a'+'verageBloc'+'ker\x20=\x20PCSS'+'BlockerDis'+'tance(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20samplePoi'+'nts,\x20shado'+'wCoords.xy'+',\x20shadowSe'+'archArea,\x20'+'receiverDe'+'pth,\x20camer'+'aParams);\x0a'+'\x20\x20\x20\x20if\x20(av'+'erageBlock'+'er\x20==\x20-1.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x201'+'.0;\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depthDiff'+'erence\x20=\x20('+'receiverDe'+'pth\x20-\x20aver'+'ageBlocker'+')\x20/\x203.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20filterRa'+'dius\x20=\x20dep'+'thDifferen'+'ce\x20*\x20shado'+'wSearchAre'+'a;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20for\x20(int\x20'+'i\x20=\x200;\x20i\x20<'+'\x20PCSS_SAMP'+'LE_COUNT;\x20'+'i\x20++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20sampleU'+'V\x20=\x20sample'+'Points[i]\x20'+'*\x20filterRa')+('dius;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleUV\x20=\x20s'+'hadowCoord'+'s.xy\x20+\x20sam'+'pleUV;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20textur'+'e2DLod(sha'+'dowMap,\x20sa'+'mpleUV,\x200.'+'0).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20shadow\x20/\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT);\x0a\x20\x20\x20\x20'+'}\x20\x0a}\x0a\x0a#ifn'+'def\x20WEBGPU'+'\x0a\x0afloat\x20PC'+'SSCubeBloc'+'kerDistanc'+'e(samplerC'+'ube\x20shadow'+'Map,\x20vec3\x20'+'lightDirNo'+'rm,\x20vec3\x20s'+'amplePoint'+'s[PCSS_SAM'+'PLE_COUNT]'+',\x20float\x20z,'+'\x20float\x20sha'+'dowSearchA'+'rea)\x20{\x0a\x20\x20\x20'+'\x20float\x20blo'+'ckers\x20=\x200.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20average'+'Blocker\x20=\x20'+'0.0;\x0a\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20P'+'CSS_SAMPLE'+'_COUNT;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sa'+'mpleDir\x20=\x20'+'lightDirNo'+'rm\x20+\x20sampl'+'ePoints[i]'+'\x20*\x20shadowS'+'earchArea;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'ampleDir\x20='+'\x20normalize'+'(sampleDir'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'ocker\x20=\x20te'+'xtureCubeL'+'od(shadowM'+'ap,\x20sample'+'Dir,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20isB'+'locking\x20=\x20'+'step(block'+'er,\x20z);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20bloc'+'kers\x20+=\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20av'+'erageBlock'+'er\x20+=\x20bloc'+'ker\x20*\x20isBl'+'ocking;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'f\x20(blocker'+'s\x20>\x200.0)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20averag'+'eBlocker\x20/'+'\x20blockers;'+'\x0a\x20\x20\x20\x20retur'+'n\x20-1.0;\x0a}\x0a'+'\x0afloat\x20PCS'+'SCube(samp'+'lerCube\x20sh'+'adowMap,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20shadowC'+'oords,\x20vec')+('4\x20cameraPa'+'rams,\x20floa'+'t\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20samplePoi'+'nts[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x20\x20\x20\x20fl'+'oat\x20noise\x20'+'=\x20noise(\x20g'+'l_FragCoor'+'d.xy\x20)\x20*\x202'+'.0\x20*\x20PI;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20r\x20=\x20pcs'+'sSphereSam'+'ples[i];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sam'+'plePoints['+'i]\x20=\x20vogel'+'Sphere(i,\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT),\x20nois'+'e,\x20r);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'orm\x20=\x20norm'+'alize(ligh'+'tDir);\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20averageB'+'locker\x20=\x20P'+'CSSCubeBlo'+'ckerDistan'+'ce(shadowM'+'ap,\x20lightD'+'irNorm,\x20sa'+'mplePoints'+',\x20receiver'+'Depth,\x20sha'+'dowSearchA'+'rea);\x0a\x20\x20\x20\x20'+'if\x20(averag'+'eBlocker\x20='+'=\x20-1.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20fi'+'lterRadius'+'\x20=\x20((recei'+'verDepth\x20-'+'\x20averageBl'+'ocker)\x20/\x20a'+'verageBloc'+'ker)\x20*\x20sha'+'dowSearchA'+'rea;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20for\x20(int'+'\x20i\x20=\x200;\x20i\x20'+'<\x20PCSS_SAM'+'PLE_COUNT;'+'\x20i++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20offset\x20'+'=\x20samplePo'+'ints[i]\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sampleDir'+'\x20=\x20lightDi'+'rNorm\x20+\x20of'+'fset;\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleDir\x20=\x20'+'normalize('+'sampleDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depth\x20=\x20t'+'extureCube'+'Lod(shadow'+'Map,\x20sampl'+'eDir,\x200.0)'+'.r;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'ow\x20+=\x20step'+'(receiverD'+'epth,\x20dept'+'h);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20s'+'hadow\x20/\x20fl'+'oat(PCSS_S'+'AMPLE_COUN'+'T);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0afloat\x20g'+'etShadowOm'+'niPCSS(sam'+'plerCube\x20s'+'hadowMap,\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'4\x20cameraPa'+'rams,\x20vec2'+'\x20shadowSea'+'rchArea,\x20v'+'ec3\x20lightD'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SCube(shad'+'owMap,\x20sha'+'dowParams,'+'\x20shadowCoo'+'rd,\x20camera'+'Params,\x20sh'+'adowSearch'+'Area.x,\x20li'+'ghtDir);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'float\x20getS'+'hadowSpotP'+'CSS(TEXTUR'+'E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c4\x20cameraP'+'arams,\x20vec'+'2\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20return\x20PC'+'SS(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20cameraPar'+'ams,\x20shado'+'wSearchAre'+'a);\x0a}\x0a\x0a'),NP='\x0a\x0ahighp\x20fl'+'oat\x20fractS'+'inRand(con'+'st\x20in\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x20\x20\x20'+'\x20const\x20hig'+'hp\x20float\x20a'+'\x20=\x2012.9898'+',\x20b\x20=\x2078.2'+'33,\x20c\x20=\x2043'+'758.5453;\x0a'+'\x20\x20\x20\x20highp\x20'+'float\x20dt\x20='+'\x20dot(uv.xy'+',\x20vec2(a,\x20'+'b)),\x20sn\x20=\x20'+'mod(dt,\x20PI'+');\x0a\x20\x20\x20\x20ret'+'urn\x20fract('+'sin(sn)\x20*\x20'+'c);\x0a}\x0a\x0a//\x20'+'struct\x20to\x20'+'hold\x20preco'+'mputed\x20con'+'stants\x20and'+'\x20current\x20s'+'tate\x0astruc'+'t\x20VogelDis'+'kData\x20{\x0a\x20\x20'+'\x20\x20float\x20in'+'vNumSample'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20initial'+'Angle;\x0a\x20\x20\x20'+'\x20float\x20cur'+'rentPointI'+'d;\x0a};\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'void\x20prepa'+'reDiskCons'+'tants(out\x20'+'VogelDiskD'+'ata\x20data,\x20'+'int\x20sample'+'Count,\x20flo'+'at\x20randomS'+'eed)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20pi2\x20=\x206'+'.283185307'+'18;\x0a\x20\x20\x20\x20da'+'ta.invNumS'+'amples\x20=\x201'+'.0\x20/\x20float'+'(sampleCou'+'nt);\x0a\x20\x20\x20\x20d'+'ata.initia'+'lAngle\x20=\x20r'+'andomSeed\x20'+'*\x20pi2;\x0a\x20\x20\x20'+'\x20data.curr'+'entPointId'+'\x20=\x200.0;\x0a}\x0a'+'\x0a\x0avec2\x20gen'+'erateDiskS'+'ample(inou'+'t\x20VogelDis'+'kData\x20data'+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'GOLDEN_ANG'+'LE\x20=\x202.399'+'963;\x0a\x20\x20\x20\x20f'+'loat\x20r\x20=\x20s'+'qrt((data.'+'currentPoi'+'ntId\x20+\x200.5'+')\x20*\x20data.i'+'nvNumSampl'+'es);\x0a\x20\x20\x20\x20f'+'loat\x20theta'+'\x20=\x20data.cu'+'rrentPoint'+'Id\x20*\x20GOLDE'+'N_ANGLE\x20+\x20'+'data.initi'+'alAngle;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20o'+'ffset\x20=\x20ve'+('c2(cos(the'+'ta),\x20sin(t'+'heta))\x20*\x20p'+'ow(r,\x201.33'+');\x0a\x0a\x20\x20\x20\x20da'+'ta.current'+'PointId\x20+='+'\x201.0;\x0a\x20\x20\x20\x20'+'return\x20off'+'set;\x0a}\x0a\x0avo'+'id\x20PCSSFin'+'dBlocker(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20out\x20'+'float\x20avgB'+'lockerDept'+'h,\x20out\x20int'+'\x20numBlocke'+'rs,\x0a\x20\x20\x20\x20ve'+'c2\x20shadowC'+'oords,\x20flo'+'at\x20z,\x20int\x20'+'shadowBloc'+'kerSamples'+',\x20float\x20pe'+'numbraSize'+',\x20float\x20in'+'vShadowMap'+'Size,\x20floa'+'t\x20randomSe'+'ed)\x20{\x0a\x0a\x20\x20\x20'+'\x20VogelDisk'+'Data\x20diskD'+'ata;\x0a\x20\x20\x20\x20p'+'repareDisk'+'Constants('+'diskData,\x20'+'shadowBloc'+'kerSamples'+',\x20randomSe'+'ed);\x0a\x0a\x20\x20\x20\x20'+'float\x20sear'+'chWidth\x20=\x20'+'penumbraSi'+'ze\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x20\x20\x20\x20flo'+'at\x20blocker'+'Sum\x20=\x200.0;'+'\x0a\x20\x20\x20\x20numBl'+'ockers\x20=\x200'+';\x0a\x0a\x20\x20\x20\x20for'+'(\x20int\x20i\x20=\x20'+'0;\x20i\x20<\x20sha'+'dowBlocker'+'Samples;\x20+'+'+i\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'diskUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20sampleUV'+'\x20=\x20shadowC'+'oords\x20+\x20di'+'skUV\x20*\x20sea'+'rchWidth;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'MapDepth\x20='+'\x20texture2D'+'Lod(shadow'+'Map,\x20sampl'+'eUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(\x20shad'+'owMapDepth'+'\x20<\x20z\x20)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20blockerSu'+'m\x20+=\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers++;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20av'+'gBlockerDe'+'pth\x20=\x20bloc'+'kerSum\x20/\x20f'+'loat(numBl'+'ockers);\x0a}'+'\x0a\x0afloat\x20PC'+'SSFilter(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20uv,\x20float')+('\x20receiverD'+'epth,\x20int\x20'+'shadowSamp'+'les,\x20float'+'\x20filterRad'+'ius,\x20float'+'\x20randomSee'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'VogelDiskD'+'ata\x20diskDa'+'ta;\x0a\x20\x20\x20\x20pr'+'epareDiskC'+'onstants(d'+'iskData,\x20s'+'hadowSampl'+'es,\x20random'+'Seed);\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20shadowS'+'amples;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20of'+'fsetUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x20text'+'ure2DLod(s'+'hadowMap,\x20'+'uv\x20+\x20offse'+'tUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sum\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20retu'+'rn\x20sum\x20/\x20f'+'loat(shado'+'wSamples);'+'\x0a}\x0a\x0afloat\x20'+'getPenumbr'+'a(float\x20db'+'locker,\x20fl'+'oat\x20drecei'+'ver,\x20float'+'\x20penumbraS'+'ize,\x20float'+'\x20penumbraF'+'alloff)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'dist\x20=\x20dre'+'ceiver\x20-\x20d'+'blocker;\x0a\x20'+'\x20\x20\x20float\x20p'+'enumbra\x20=\x20'+'1.0\x20-\x20pow('+'1.0\x20-\x20dist'+',\x20penumbra'+'Falloff);\x0a'+'\x20\x20\x20\x20return'+'\x20penumbra\x20'+'*\x20penumbra'+'Size;\x0a}\x0a\x0af'+'loat\x20PCSSD'+'irectional'+'(TEXTURE_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oords,\x20vec'+'4\x20cameraPa'+'rams,\x20vec4'+'\x20softShado'+'wParams)\x20{'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20receiver'+'Depth\x20=\x20sh'+'adowCoords'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20random'+'Seed\x20=\x20fra'+'ctSinRand('+'gl_FragCoo'+'rd.xy);\x0a\x20\x20'+'\x20\x20int\x20shad'+'owSamples\x20'+'=\x20int(soft'+'ShadowPara'+'ms.x);\x0a\x20\x20\x20'+'\x20int\x20shado'+'wBlockerSa'+'mples\x20=\x20in'+'t(softShad')+('owParams.y'+');\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'aSize\x20=\x20so'+'ftShadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20float\x20pe'+'numbraFall'+'off\x20=\x20soft'+'ShadowPara'+'ms.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20normal'+'ized\x20inver'+'se\x20shadow\x20'+'map\x20size\x20t'+'o\x20preserve'+'\x20the\x20shado'+'w\x20softness'+'\x20regardles'+'s\x20of\x20the\x20s'+'hadow\x20reso'+'lution\x0a\x20\x20\x20'+'\x20int\x20shado'+'wMapSize\x20='+'\x20textureSi'+'ze(shadowM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20float\x20'+'invShadowM'+'apSize\x20=\x201'+'.0\x20/\x20float'+'(shadowMap'+'Size);\x0a\x20\x20\x20'+'\x20invShadow'+'MapSize\x20*='+'\x20float(sha'+'dowMapSize'+')\x20/\x202048.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'a;\x0a\x0a\x20\x20\x20\x20//'+'\x20contact\x20h'+'ardening\x20p'+'ath\x0a\x20\x20\x20\x20if'+'\x20(shadowBl'+'ockerSampl'+'es\x20>\x200)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20find\x20ave'+'rage\x20block'+'er\x20depth\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20avgBloc'+'kerDepth\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20int\x20nu'+'mBlockers\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20avgBlo'+'ckerDepth,'+'\x20numBlocke'+'rs,\x20shadow'+'Coords.xy,'+'\x20receiverD'+'epth,\x20shad'+'owBlockerS'+'amples,\x20pe'+'numbraSize'+',\x20invShado'+'wMapSize,\x20'+'randomSeed'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20out\x20when\x20'+'no\x20blocker'+'s\x20are\x20pres'+'ent\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(numB'+'lockers\x20<\x20'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x201.0f;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'penumbra\x20s'+'ize\x20is\x20bas'+'ed\x20on\x20the\x20'+'blocker\x20de'+'pth\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20penumbra'+'\x20=\x20getPenu'+'mbra(avgBl'+'ockerDepth'+',\x20shadowCo'+'ords.z,\x20pe'+'numbraSize'+',\x20penumbra')+('Falloff);\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'tant\x20filte'+'r\x20size,\x20no'+'\x20contact\x20h'+'ardening\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pen'+'umbra\x20=\x20pe'+'numbraSize'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20f'+'ilterRadiu'+'s\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoords'+'.xy,\x20recei'+'verDepth,\x20'+'shadowSamp'+'les,\x20filte'+'rRadius,\x20r'+'andomSeed)'+';\x0a}\x0a\x0afloat'+'\x20getShadow'+'PCSS(TEXTU'+'RE_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec4\x20camera'+'Params,\x20ve'+'c4\x20softSha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20return\x20P'+'CSSDirecti'+'onal(TEXTU'+'RE_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20cameraP'+'arams,\x20sof'+'tShadowPar'+'ams);\x0a}\x0a\x0a'),kP='\x0aattribute'+'\x20float\x20ver'+'tex_boneIn'+'dices;\x0a\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20texture_'+'poseMap;\x0a\x0a'+'mat4\x20getBo'+'neMatrix(c'+'onst\x20in\x20fl'+'oat\x20indexF'+'loat)\x20{\x0a\x0a\x20'+'\x20\x20\x20int\x20wid'+'th\x20=\x20textu'+'reSize(tex'+'ture_poseM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20int\x20in'+'dex\x20=\x20int('+'indexFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x20\x20\x20\x20int'+'\x20iy\x20=\x20inde'+'x\x20/\x20width;'+'\x0a\x20\x20\x20\x20int\x20i'+'x\x20=\x20index\x20'+'%\x20width;\x0a\x0a'+'\x20\x20\x20\x20//\x20rea'+'d\x20elements'+'\x20of\x204x3\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20v1\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x200,'+'\x20iy),\x200);\x0a'+'\x20\x20\x20\x20vec4\x20v'+'2\x20=\x20texelF'+'etch(textu'+'re_poseMap'+',\x20ivec2(ix'+'\x20+\x201,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20v'+'ec4\x20v3\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x202,'+'\x20iy),\x200);\x0a'+'\x0a\x20\x20\x20\x20//\x20tr'+'anspose\x20to'+'\x204x4\x20matri'+'x\x0a\x20\x20\x20\x20retu'+'rn\x20mat4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'x,\x20v2.x,\x20v'+'3.x,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.y'+',\x20v2.y,\x20v3'+'.y,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.z,'+'\x20v2.z,\x20v3.'+'z,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.w,\x20'+'v2.w,\x20v3.w'+',\x201\x0a\x20\x20\x20\x20);'+'\x0a}\x0a',UP='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_boneWe'+'ights;\x0aatt'+'ribute\x20vec'+'4\x20vertex_b'+'oneIndices'+';\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20tex'+'ture_poseM'+'ap;\x0a\x0avoid\x20'+'getBoneMat'+'rix(const\x20'+'in\x20int\x20wid'+'th,\x20const\x20'+'in\x20int\x20ind'+'ex,\x20out\x20ve'+'c4\x20v1,\x20out'+'\x20vec4\x20v2,\x20'+'out\x20vec4\x20v'+'3)\x20{\x0a\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20in'+'dex\x20/\x20widt'+'h;\x0a\x20\x20\x20\x20int'+'\x20u\x20=\x20index'+'\x20%\x20width;\x0a'+'\x0a\x20\x20\x20\x20v1\x20=\x20'+'texelFetch'+'(texture_p'+'oseMap,\x20iv'+'ec2(u\x20+\x200,'+'\x20v),\x200);\x0a\x20'+'\x20\x20\x20v2\x20=\x20te'+'xelFetch(t'+'exture_pos'+'eMap,\x20ivec'+'2(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20v3\x20=\x20texe'+'lFetch(tex'+'ture_poseM'+'ap,\x20ivec2('+'u\x20+\x202,\x20v),'+'\x200);\x0a}\x0a\x0ama'+'t4\x20getSkin'+'Matrix(con'+'st\x20in\x20vec4'+'\x20indicesFl'+'oat,\x20const'+'\x20in\x20vec4\x20w'+'eights)\x20{\x0a'+'\x0a\x20\x20\x20\x20int\x20w'+'idth\x20=\x20tex'+'tureSize(t'+'exture_pos'+'eMap,\x200).x'+';\x0a\x20\x20\x20\x20ivec'+'4\x20indices\x20'+'=\x20ivec4(in'+'dicesFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20get\x204\x20bon'+'e\x20matrices'+'\x0a\x20\x20\x20\x20vec4\x20'+'a1,\x20a2,\x20a3'+';\x0a\x20\x20\x20\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.x,\x20a1'+',\x20a2,\x20a3);'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20b1,\x20b2,\x20b'+'3;\x0a\x20\x20\x20\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y,\x20b'+'1,\x20b2,\x20b3)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20c1,\x20c2,\x20'+'c3;\x0a\x20\x20\x20\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.z,\x20'+'c1,\x20c2,\x20c3'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20d1,\x20d2,'+'\x20d3;\x0a\x20\x20\x20\x20g'+'etBoneMatr'+'ix(width,\x20'+'indices.w,'+'\x20d1,\x20d2,\x20d'+'3);\x0a\x0a\x20\x20\x20\x20/'+'/\x20multiply'+'\x20them\x20by\x20w'+'eights\x20and'+'\x20add\x20up\x20to'+'\x20get\x20final'+'\x204x3\x20matri'+('x\x0a\x20\x20\x20\x20vec4'+'\x20v1\x20=\x20a1\x20*'+'\x20weights.x'+'\x20+\x20b1\x20*\x20we'+'ights.y\x20+\x20'+'c1\x20*\x20weigh'+'ts.z\x20+\x20d1\x20'+'*\x20weights.'+'w;\x0a\x20\x20\x20\x20vec'+'4\x20v2\x20=\x20a2\x20'+'*\x20weights.'+'x\x20+\x20b2\x20*\x20w'+'eights.y\x20+'+'\x20c2\x20*\x20weig'+'hts.z\x20+\x20d2'+'\x20*\x20weights'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20v3\x20=\x20a3'+'\x20*\x20weights'+'.x\x20+\x20b3\x20*\x20'+'weights.y\x20'+'+\x20c3\x20*\x20wei'+'ghts.z\x20+\x20d'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'//\x20add\x20up\x20'+'weights\x0a\x20\x20'+'\x20\x20float\x20on'+'e\x20=\x20dot(we'+'ights,\x20vec'+'4(1.0));\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.x'+',\x20v2.x,\x20v3'+'.x,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.y,'+'\x20v2.y,\x20v3.'+'y,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.z,\x20'+'v2.z,\x20v3.z'+',\x200,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20v1.w,\x20v'+'2.w,\x20v3.w,'+'\x20one\x0a\x20\x20\x20\x20)'+';\x0a}\x0a'),BP='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20float\x20v'+'LinearDept'+'h;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22floatAsUi'+'ntPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec3\x20vView'+'Dir;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20skyboxH'+'ighlightMu'+'ltiplier;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SKY_CUBE'+'MAP\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20texture'+'_cubeMap;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SKYM'+'ESH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec3\x20v'+'WorldPos;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20project'+'edSkydomeC'+'enter;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#el'+'se\x20//\x20env-'+'atlas\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22spher'+'icalPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22envA'+'tlasPS\x22\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_envAtla'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mipLe'+'vel;\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20linear\x20d'+'epth\x20durin'+'g\x20prepass\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20flo'+'at2vec4(vL'+'inearDepth'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20SK'+'Y_CUBEMAP\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SKYMES'+'H\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+('\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envDir\x20=\x20n'+'ormalize(v'+'WorldPos\x20-'+'\x20projected'+'SkydomeCen'+'ter);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20env'+'Dir\x20*\x20cube'+'MapRotatio'+'nMatrix;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20di'+'r\x20=\x20vViewD'+'ir;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir.x'+'\x20*=\x20-1.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20linear\x20=\x20'+'{SKYBOX_DE'+'CODE_FNC}('+'textureCub'+'e(texture_'+'cubeMap,\x20d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x20//\x20en'+'v-atlas\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20vVie'+'wDir\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20toSph'+'ericalUv(n'+'ormalize(d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20mipLev'+'el)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20our\x20HDR'+'\x20encodes\x20v'+'alues\x20up\x20t'+'o\x2064,\x20so\x20a'+'llow\x20extra'+'\x20brightnes'+'s\x20for\x20the\x20'+'clipped\x20va'+'lues\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(any(great'+'erThanEqua'+'l(linear,\x20'+'vec3(64.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20skyboxHi'+'ghlightMul'+'tiplier;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(toneM'+'ap(process'+'Environmen'+'t(linear))'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20}'+'\x0a'),zP='\x0aattribute'+'\x20vec4\x20aPos'+'ition;\x0a\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tionSkybox'+';\x0auniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x0av'+'arying\x20vec'+'3\x20vViewDir'+';\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20//\x20'+'when\x20skydo'+'me\x20renders'+'\x20depth\x20dur'+'ing\x20prepas'+'s,\x20generat'+'e\x20linear\x20d'+'epth\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20vLinear'+'Depth;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20SKYMESH\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec3\x20vW'+'orldPos;\x0a#'+'endif\x0a\x0avoi'+'d\x20main(voi'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'mat4\x20view\x20'+'=\x20matrix_v'+'iew;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20SKY'+'MESH\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec4\x20w'+'orldPos\x20=\x20'+'matrix_mod'+'el\x20*\x20aPosi'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vWorld'+'Pos\x20=\x20worl'+'dPos.xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20'+'=\x20matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20PREPASS'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20linear\x20de'+'pth\x20from\x20t'+'he\x20worldPo'+'sition,\x20se'+'e\x20getLinea'+'rDepth\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vWorl'+'dPos,\x201.0)'+').z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'view[3][0]'+'\x20=\x20view[3]'+'[1]\x20=\x20view'+'[3][2]\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20matr'+'ix_project'+'ionSkybox\x20'+'*\x20(view\x20*\x20'+'aPosition)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vViewDir\x20='+'\x20aPosition'+'.xyz\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20//\x20for\x20in'+'finite\x20sky'+'box,\x20use\x20n'+'egative\x20gl'+'_Position.'+'w\x20to\x20get\x20p'+'ositive\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vLinear'+'Depth\x20=\x20-g'+'l_Position'+'.w;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20Fo'+'rce\x20skybox'+'\x20to\x20far\x20Z,'+'\x20regardles'+'s\x20of\x20the\x20c'+'lip\x20planes'+'\x20on\x20the\x20ca'+'mera\x0a\x20\x20\x20\x20/'+'/\x20Subtract'+'\x20a\x20tiny\x20fu'+'dge\x20factor'+'\x20to\x20ensure'+'\x20floating\x20'+'point\x20erro'+'rs\x20don\x27t\x0a\x20'+'\x20\x20\x20//\x20stil'+'l\x20push\x20pix'+'els\x20beyond'+'\x20far\x20Z.\x20Se'+'e:\x0a\x20\x20\x20\x20//\x20'+'https://co'+'mmunity.kh'+'ronos.org/'+'t/skybox-p'+'roblem/618'+'57\x0a\x0a\x20\x20\x20\x20gl'+'_Position.'+'z\x20=\x20gl_Pos'+'ition.w\x20-\x20'+'1.0e-7;\x0a}\x0a'),VP='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0auniform\x20v'+'ec3\x20materi'+'al_specula'+'r;\x0a#endif\x0a'+'\x0avoid\x20getS'+'pecularity'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20specul'+'arColor\x20=\x20'+'vec3(1,1,1'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20specularC'+'olor\x20*=\x20ma'+'terial_spe'+'cular;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'AR_TEXTURE'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_SPECULAR_'+'TEXTURE_NA'+'ME},\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20textureB'+'ias)).{STD'+'_SPECULAR_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SPECU'+'LAR_VERTEX'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_S'+'PECULAR_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20spe'+'cularColor'+';\x0a}\x0a',GP='\x0a//\x20equire'+'ctangular\x20'+'helper\x20fun'+'ctions\x0avec'+'2\x20toSpheri'+'cal(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(dir.xz\x20='+'=\x20vec2(0.0'+')\x20?\x200.0\x20:\x20'+'atan(dir.x'+',\x20dir.z),\x20'+'asin(dir.y'+'));\x0a}\x0a\x0avec'+'2\x20toSpheri'+'calUv(vec3'+'\x20dir)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PI\x20=\x203'+'.141592653'+'589793;\x0a\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20toSpheri'+'cal(dir)\x20/'+'\x20vec2(PI\x20*'+'\x202.0,\x20PI)\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+';\x0a}\x0a',HP='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_specula'+'rityFactor'+';\x0a#endif\x0a\x0a'+'void\x20getSp'+'ecularityF'+'actor()\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'specularit'+'yFactor\x20=\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULARI'+'TYFACTOR_C'+'ONSTANT\x0a\x20\x20'+'\x20\x20specular'+'ityFactor\x20'+'*=\x20materia'+'l_specular'+'ityFactor;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE\x0a\x20\x20\x20\x20sp'+'ecularityF'+'actor\x20*=\x20t'+'exture2DBi'+'as({STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE_NAME},'+'\x20{STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_VERT'+'EX\x0a\x20\x20\x20\x20spe'+'cularityFa'+'ctor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SPECU'+'LARITYFACT'+'OR_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dSp'+'ecularityF'+'actor\x20=\x20sp'+'ecularityF'+'actor;\x0a}\x0a',WP='\x0afloat\x20get'+'SpotEffect'+'(vec3\x20ligh'+'tSpotDir,\x20'+'float\x20ligh'+'tInnerCone'+'Angle,\x20flo'+'at\x20lightOu'+'terConeAng'+'le,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20cosAn'+'gle\x20=\x20dot('+'lightDirNo'+'rm,\x20lightS'+'potDir);\x0a\x20'+'\x20\x20\x20return\x20'+'smoothstep'+'(lightOute'+'rConeAngle'+',\x20lightInn'+'erConeAngl'+'e,\x20cosAngl'+'e);\x0a}\x0a',$P='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2(vUv0.'+'x,\x201.0\x20-\x20v'+'Uv0.y);\x0a',XP='\x0a\x20\x20\x20\x20vec2\x20'+'tileMask\x20='+'\x20step(vMas'+'k,\x20vec2(0.'+'99999));\x0a\x20'+'\x20\x20\x20vec2\x20ti'+'leSize\x20=\x200'+'.5\x20*\x20(inne'+'rOffset.xy'+'\x20+\x20innerOf'+'fset.zw);\x0a'+'\x20\x20\x20\x20vec2\x20t'+'ileScale\x20='+'\x20vec2(1.0)'+'\x20/\x20(vec2(1'+'.0)\x20-\x20tile'+'Size);\x0a\x20\x20\x20'+'\x20vec2\x20clam'+'pedUv\x20=\x20mi'+'x(innerOff'+'set.xy\x20*\x200'+'.5,\x20vec2(1'+'.0)\x20-\x20inne'+'rOffset.zw'+'\x20*\x200.5,\x20fr'+'act((vTile'+'dUv\x20-\x20tile'+'Size)\x20*\x20ti'+'leScale));'+'\x0a\x20\x20\x20\x20clamp'+'edUv\x20=\x20cla'+'mpedUv\x20*\x20a'+'tlasRect.z'+'w\x20+\x20atlasR'+'ect.xy;\x0a\x20\x20'+'\x20\x20nineSlic'+'edUv\x20=\x20vUv'+'0\x20*\x20tileMa'+'sk\x20+\x20clamp'+'edUv\x20*\x20(ve'+'c2(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x20\x20\x20\x20\x0a',qP='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20float\x20dAl'+'pha\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_o'+'pacityMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20global'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dAlbe'+'do;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20dNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dSpeculari'+'ty\x20=\x20vec3('+'0.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dGlossines'+'s\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20dT'+'ransmissio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dThicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SC'+'ENE_COLOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'uSceneColo'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SCREEN_SI'+'ZE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20uS'+'creenSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_TRAN'+'SFORMS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20matrix_v'+'iewProject'+'ion;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_mod'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20parallax\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20dUv'+'Offset;\x0a\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_he'+'ightMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20diffu'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20tex'+'ture_diffu'+'seMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_diffuseDe'+'tailMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_normal'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'NORMALDETA'+'IL_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_no'+'rmalDetail'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20refracti'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_THICKNES'+'S_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_thi'+'cknessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_REFRA'+'CTION_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_refractio'+'nMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20iridesc'+'ence\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_IRIDES'+'CENCE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20dIride'+'scence;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dIri'+'descenceTh')+('ickness;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_irides'+'cenceThick'+'nessMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_iridesce'+'nceMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20ccNorm'+'alW;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dAnisotro'+'py;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20&\x20glossin'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_OR_REFLE'+'CTION\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20sheen\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20sGloss'+'iness;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SHEEN'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_sheenM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_sh'+'eenGlossMa')+('p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20metalness'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dMet'+'alness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dIor;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_met'+'alnessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20dSpecula'+'rityFactor'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_speculari'+'tyFactorMa'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20specular\x20'+'color\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_specula'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20gloss\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_gl'+'ossMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dAo'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_aoM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_aoDeta'+'ilMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dEmis'+'sion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_EMISS'+'IVE_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_e'+'missiveMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'learcoat\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'EARCOAT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatG'+'lossMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'NORMAL_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_clea'+'rCoatNorma'+'lMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'anisotropy'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde')+('f\x20STD_ANIS'+'OTROPY_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_anis'+'otropyMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dLightma'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_LIGH'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_lightMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20front\x20'+'end\x20output'+'s\x20to\x20lit\x20s'+'hader\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'litShaderC'+'orePS\x22\x0a'),jP='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20voi'+'d\x20getSpecu'+'larity()\x20{'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20vec'+'3(1);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20g'+'loss\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22glo'+'ssPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20ao\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'aoPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'emissivePS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO')+('AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22clear'+'CoatPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatG'+'lossPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatN'+'ormalPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20anis'+'otropy\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ani'+'sotropyPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(STD'+'_LIGHTMAP)'+'\x20||\x20define'+'d(STD_LIGH'+'T_VERTEX_C'+'OLOR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20void\x20eval'+'uateFronte'+'nd()\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIT'+'_BLEND_TYP'+'E\x20!=\x20NONE\x20'+'||\x20defined'+'(LIT_ALPHA'+'_TEST)\x20||\x20'+'defined(LI'+'T_ALPHA_TO'+'_COVERAGE)'+'\x20||\x20STD_OP'+'ACITY_DITH'+'ER\x20!=\x20NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getOpac'+'ity();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_ALPH'+'A_TEST)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alphaT'+'est(dAlpha'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(dAlp'+'ha,\x200.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'opacity\x20=\x20'+'dAlpha;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20pa'+'rallax\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'HEIGHT_MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Parallax()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Albedo();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20d'+'Albedo;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20normal'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getNorm'+'al();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'worldNorma'+'l\x20=\x20dNorma'+'lW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_REFRACT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getRefract'+'ion();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_transmiss'+'ion\x20=\x20dTra'+'nsmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tThickness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_th'+'ickness\x20=\x20'+'dThickness'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_d'+'ispersion\x20'+'=\x20material'+'_dispersio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20iridescen'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_IRID'+'ESCENCE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getIri'+'descence()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tIridescen'+'ceThicknes'+'s();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_i'+'ridescence'+'_intensity'+'\x20=\x20dIrides'+'cence;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_iridescen'+'ce_thickne'+'ss\x20=\x20dIrid'+'escenceThi'+'ckness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('//\x20specula'+'rity\x20&\x20glo'+'ssiness\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR_'+'OR_REFLECT'+'ION\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getShee'+'n();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_sheen_s'+'pecularity'+'\x20=\x20sSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'SheenGloss'+'iness();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_she'+'en_gloss\x20='+'\x20sGlossine'+'ss;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20met'+'alness\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getMet'+'alness();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_me'+'talness\x20=\x20'+'dMetalness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getIor()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'ior\x20=\x20dIor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20specu'+'larity\x20fac'+'tor\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rityFactor'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ityFactor\x20'+'=\x20dSpecula'+'rityFactor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20gloss'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rity();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ity\x20=\x20dSpe'+'cularity;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss\x20'+'=\x20dGlossin')+('ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getAO'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ao'+'\x20=\x20dAo;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getEmi'+'ssion();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_e'+'mission\x20=\x20'+'dEmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cle'+'arcoat\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getC'+'learCoat()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tClearCoat'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getClearCo'+'atNormal()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20=\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_g'+'loss\x20=\x20ccG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_clear'+'coat_world'+'Normal\x20=\x20c'+'cNormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20aniso'+'tropy\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x20&&\x20def'+'ined(LIT_L'+'IGHTING)\x20&'+'&\x20defined('+'LIT_GGX_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getAni'+'sotropy();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20ligh'+'tmap\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(S'+'TD_LIGHTMA'+'P)\x20||\x20defi'+'ned(STD_LI'+'GHT_VERTEX'+'_COLOR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htMap();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_lightma'+'p\x20=\x20dLight'+'map;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_lightm'+'apDir\x20=\x20dL'+'ightmapDir'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20}\x0a'),YP='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20tbnBasis'+';\x0a#endif\x0a\x0a'+'void\x20getTB'+'N(vec3\x20tan'+'gent,\x20vec3'+'\x20binormal,'+'\x20vec3\x20norm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TB'+'N_TANGENTS'+'\x20//\x20tangen'+'ts\x20/\x20binor'+'mals\x20based'+'\x20TBN\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(tang'+'ent),\x20norm'+'alize(bino'+'rmal),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(TBN_'+'DERIVATIVE'+'S)\x20//\x20deri'+'vatives\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20{li'+'ghtingUv};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20get\x20edg'+'e\x20vectors\x20'+'of\x20the\x20pix'+'el\x20triangl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dp1\x20='+'\x20dFdx(\x20vPo'+'sitionW\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dp2\x20=\x20'+'dFdy(\x20vPos'+'itionW\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20duv1\x20=\x20'+'dFdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20duv2\x20'+'=\x20dFdy(\x20uv'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20solv'+'e\x20the\x20line'+'ar\x20system\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20dp2perp'+'\x20=\x20cross(\x20'+'dp2,\x20norma'+'l\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dp'+'1perp\x20=\x20cr'+'oss(\x20norma'+'l,\x20dp1\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20T\x20=\x20dp2'+'perp\x20*\x20duv'+'1.x\x20+\x20dp1p'+'erp\x20*\x20duv2'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20B\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+'dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+('ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'nom\x20=\x20max('+'\x20dot(T,T),'+'\x20dot(B,B)\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20inv'+'max\x20=\x20(den'+'om\x20==\x200.0)'+'\x20?\x200.0\x20:\x20t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3(T\x20*\x20i'+'nvmax,\x20-B\x20'+'*\x20invmax,\x20'+'normal\x20);\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20object'+'\x20space\x20TBN'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20B\x20=\x20c'+'ross(norma'+'l,\x20vObject'+'SpaceUpW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20T\x20=\x20cr'+'oss(normal'+',\x20B);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(d'+'ot(B,B)==0'+'.0)\x20//\x20dea'+'l\x20with\x20cas'+'e\x20when\x20vOb'+'jectSpaceU'+'pW\x20normal\x20'+'are\x20parall'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20major=max'+'(max(norma'+'l.x,\x20norma'+'l.y),\x20norm'+'al.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(normal'+'.x\x20==\x20majo'+'r)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20B\x20=\x20cro'+'ss(normal,'+'\x20vec3(0,1,'+'0));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20T\x20=\x20cross'+'(normal,\x20B'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20e'+'lse\x20if\x20(no'+'rmal.y\x20==\x20'+'major)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20B\x20='+'\x20cross(nor'+'mal,\x20vec3('+'0,0,1));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20if'+'\x20(normal.z'+'\x20==\x20major)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20B\x20=\x20cross'+'(normal,\x20v'+'ec3(1,0,0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(T),\x20'+'normalize('+'B),\x20normal'+'ize(normal'+'));\x0a\x0a\x20\x20\x20\x20#')+'endif\x0a}\x0a',KP='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_thickn'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tThickness'+'()\x20{\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_THICKNE'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dThi'+'ckness\x20*=\x20'+'material_t'+'hickness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_THI'+'CKNESS_TEX'+'TURE\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20texture'+'2DBias({ST'+'D_THICKNES'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_THICKNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_TH'+'ICKNESS_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',ZP='\x0a\x0a#if\x20(TON'+'EMAP\x20==\x20NO'+'NE)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22to'+'nemappingN'+'onePS\x22\x0a#el'+'if\x20TONEMAP'+'\x20==\x20FILMIC'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingFilm'+'icPS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20LINEAR\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingLinea'+'rPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20HEJL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngHejlPS\x22\x0a'+'#elif\x20TONE'+'MAP\x20==\x20ACE'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22tone'+'mappingAce'+'sPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20ACES2\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingAces2PS'+'\x22\x0a#elif\x20TO'+'NEMAP\x20==\x20N'+'EUTRAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngNeutralP'+'S\x22\x0a#endif\x0a'+'\x0a',QP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20tA\x20=\x202.'+'51;\x0a\x20\x20\x20\x20fl'+'oat\x20tB\x20=\x200'+'.03;\x0a\x20\x20\x20\x20f'+'loat\x20tC\x20=\x20'+'2.43;\x0a\x20\x20\x20\x20'+'float\x20tD\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20float\x20tE\x20'+'=\x200.14;\x0a\x20\x20'+'\x20\x20vec3\x20x\x20='+'\x20color\x20*\x20e'+'xposure;\x0a\x20'+'\x20\x20\x20return\x20'+'(x*(tA*x+t'+'B))/(x*(tC'+'*x+tD)+tE)'+';\x0a}\x0a',JP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0a//\x20A'+'CES\x20approx'+'imation\x20by'+'\x20Stephen\x20H'+'ill\x0a\x0a//\x20sR'+'GB\x20=>\x20XYZ\x20'+'=>\x20D65_2_D'+'60\x20=>\x20AP1\x20'+'=>\x20RRT_SAT'+'\x0aconst\x20mat'+'3\x20ACESInpu'+'tMat\x20=\x20mat'+'3(\x0a\x20\x20\x20\x200.5'+'9719,\x200.35'+'458,\x200.048'+'23,\x0a\x20\x20\x20\x200.'+'07600,\x200.9'+'0834,\x200.01'+'566,\x0a\x20\x20\x20\x200'+'.02840,\x200.'+'13383,\x200.8'+'3777\x0a);\x0a\x0a/'+'/\x20ODT_SAT\x20'+'=>\x20XYZ\x20=>\x20'+'D60_2_D65\x20'+'=>\x20sRGB\x0aco'+'nst\x20mat3\x20A'+'CESOutputM'+'at\x20=\x20mat3('+'\x0a\x20\x20\x20\x20\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367,\x0a\x20\x20\x20\x20-'+'0.10208,\x20\x20'+'1.10813,\x20-'+'0.00605,\x0a\x20'+'\x20\x20\x20-0.0032'+'7,\x20-0.0727'+'6,\x20\x201.0760'+'2\x0a);\x0a\x0avec3'+'\x20RRTAndODT'+'Fit(vec3\x20v'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20a\x20=\x20v\x20*'+'\x20(v\x20+\x200.02'+'45786)\x20-\x200'+'.000090537'+';\x0a\x20\x20\x20\x20vec3'+'\x20b\x20=\x20v\x20*\x20('+'0.983729\x20*'+'\x20v\x20+\x200.432'+'9510)\x20+\x200.'+'238081;\x0a\x20\x20'+'\x20\x20return\x20a'+'\x20/\x20b;\x0a}\x0a\x0av'+'ec3\x20toneMa'+'p(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'color\x20*=\x20e'+'xposure\x20/\x20'+'0.6;\x0a\x20\x20\x20\x20c'+'olor\x20=\x20col'+'or\x20*\x20ACESI'+'nputMat;\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20RRT\x20and'+'\x20ODT\x0a\x20\x20\x20\x20c'+'olor\x20=\x20RRT'+'AndODTFit('+'color);\x0a\x20\x20'+'\x20\x20color\x20=\x20'+'color\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20color\x20=\x20c'+'lamp(color'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',e2='\x0aconst\x20flo'+'at\x20A\x20=\x20\x200.'+'15;\x0aconst\x20'+'float\x20B\x20=\x20'+'\x200.50;\x0acon'+'st\x20float\x20C'+'\x20=\x20\x200.10;\x0a'+'const\x20floa'+'t\x20D\x20=\x20\x200.2'+'0;\x0aconst\x20f'+'loat\x20E\x20=\x20\x20'+'0.02;\x0acons'+'t\x20float\x20F\x20'+'=\x20\x200.30;\x0ac'+'onst\x20float'+'\x20W\x20=\x20\x2011.2'+';\x0a\x0auniform'+'\x20float\x20exp'+'osure;\x0a\x0ave'+'c3\x20unchart'+'ed2Tonemap'+'(vec3\x20x)\x20{'+'\x0a\x20\x20\x20return'+'\x20((x*(A*x+'+'C*B)+D*E)/'+'(x*(A*x+B)'+'+D*F))-E/F'+';\x0a}\x0a\x0avec3\x20'+'toneMap(ve'+'c3\x20color)\x20'+'{\x0a\x20\x20\x20\x20colo'+'r\x20=\x20unchar'+'ted2Tonema'+'p(color\x20*\x20'+'exposure);'+'\x0a\x20\x20\x20\x20vec3\x20'+'whiteScale'+'\x20=\x201.0\x20/\x20u'+'ncharted2T'+'onemap(vec'+'3(W,W,W));'+'\x0a\x20\x20\x20\x20color'+'\x20=\x20color\x20*'+'\x20whiteScal'+'e;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',t2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20col'+'or\x20*=\x20expo'+'sure;\x0a\x20\x20\x20\x20'+'const\x20floa'+'t\x20\x20A\x20=\x200.2'+'2,\x20B\x20=\x200.3'+',\x20C\x20=\x20.1,\x20'+'D\x20=\x200.2,\x20E'+'\x20=\x20.01,\x20F\x20'+'=\x200.3;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20Scl\x20=\x201'+'.25;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20h\x20=\x20m'+'ax(\x20vec3(0'+'.0),\x20color'+'\x20-\x20vec3(0.'+'004)\x20);\x0a\x20\x20'+'\x20\x20return\x20('+'h*((Scl*A)'+'*h+Scl*vec'+'3(C*B,C*B,'+'C*B))+Scl*'+'vec3(D*E,D'+'*E,D*E))\x20/'+'\x20(h*(A*h+v'+'ec3(B,B,B)'+')+vec3(D*F'+',D*F,D*F))'+'\x20-\x20Scl*vec'+'3(E/F,E/F,'+'E/F);\x0a}\x0a',s2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20color\x20'+'*\x20exposure'+';\x0a}\x0a',i2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x0a\x20\x20\x20\x20co'+'lor\x20*=\x20exp'+'osure;\x0a\x0a\x20\x20'+'\x20\x20float\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20float\x20d'+'esaturatio'+'n\x20=\x200.15;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20min(c'+'olor.r,\x20mi'+'n(color.g,'+'\x20color.b))'+';\x0a\x20\x20\x20\x20floa'+'t\x20offset\x20='+'\x20x\x20<\x200.08\x20'+'?\x20x\x20-\x206.25'+'\x20*\x20x\x20*\x20x\x20:'+'\x200.04;\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20float\x20p'+'eak\x20=\x20max('+'color.r,\x20m'+'ax(color.g'+',\x20color.b)'+');\x0a\x20\x20\x20\x20if\x20'+'(peak\x20<\x20st'+'artCompres'+'sion)\x20retu'+'rn\x20color;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20d\x20=\x201.\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20float\x20ne'+'wPeak\x20=\x201.'+'\x20-\x20d\x20*\x20d\x20/'+'\x20(peak\x20+\x20d'+'\x20-\x20startCo'+'mpression)'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x20newPe'+'ak\x20/\x20peak;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20g\x20=\x201.\x20-'+'\x201.\x20/\x20(des'+'aturation\x20'+'*\x20(peak\x20-\x20'+'newPeak)\x20+'+'\x201.);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ne'+'wPeak\x20*\x20ve'+'c3(1,\x201,\x201'+'),\x20g);\x0a}\x0a',r2='\x0avec3\x20tone'+'Map(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'olor;\x0a}\x0a',a2='\x0a#ifdef\x20PI'+'XELSNAP\x0aun'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'CREENSPACE'+'\x0auniform\x20f'+'loat\x20proje'+'ctionFlipY'+';\x0a#endif\x0a\x0a'+'vec4\x20evalW'+'orldPositi'+'on(vec3\x20ve'+'rtexPositi'+'on,\x20mat4\x20m'+'odelMatrix'+')\x20{\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localP'+'os\x20=\x20getLo'+'calPositio'+'n(vertexPo'+'sition);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20NINESLICE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20outer\x20a'+'nd\x20inner\x20v'+'ertices\x20ar'+'e\x20at\x20the\x20s'+'ame\x20positi'+'on,\x20scale\x20'+'both\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s.xz\x20*=\x20ou'+'terScale;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nner\x20verti'+'ces\x20inside'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20(origina'+'l\x20vertices'+'\x20must\x20be\x20i'+'n\x20[-1;1]\x20r'+'ange)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20p'+'ositiveUni'+'tOffset\x20=\x20'+'clamp(vert'+'exPosition'+'.xz,\x20vec2('+'0.0),\x20vec2'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20negativeU'+'nitOffset\x20'+'=\x20clamp(-v'+'ertexPosit'+'ion.xz,\x20ve'+'c2(0.0),\x20v'+'ec2(1.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'ocalPos.xz'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vTiledU'+'v\x20=\x20(local'+'Pos.xz\x20-\x20o'+'uterScale\x20'+'+\x20innerOff'+'set.xy)\x20*\x20'+'-0.5\x20+\x201.0'+';\x20//\x20uv\x20=\x20'+'local\x20pos\x20'+'-\x20inner\x20co'+'rner\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20localP'+'os.xz\x20*=\x20-'+'0.5;\x20//\x20mo'+'ve\x20from\x20-1'+';1\x20to\x20-0.5'+';0.5\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s\x20=\x20localP'+'os.xzy;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20vec4\x20p'+'osW\x20=\x20mode'+'lMatrix\x20*\x20'+'vec4(local'+('Pos,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREENS'+'PACE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20posW.zw'+'\x20=\x20vec2(0.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20posW;\x0a}\x0a'+'\x0avec4\x20getP'+'osition()\x20'+'{\x0a\x0a\x20\x20\x20\x20dMo'+'delMatrix\x20'+'=\x20getModel'+'Matrix();\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'posW\x20=\x20eva'+'lWorldPosi'+'tion(verte'+'x_position'+'.xyz,\x20dMod'+'elMatrix);'+'\x0a\x20\x20\x20\x20dPosi'+'tionW\x20=\x20po'+'sW.xyz;\x0a\x0a\x20'+'\x20\x20\x20vec4\x20sc'+'reenPos;\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV1LAYOUT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sc'+'reenPos\x20=\x20'+'vec4(verte'+'x_texCoord'+'1.xy\x20*\x202.0'+'\x20-\x201.0,\x200.'+'5,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20WEBGPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20SCREENSP'+'ACE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos\x20=\x20po'+'sW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.y\x20*='+'\x20projectio'+'nFlipY;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20screen'+'Pos\x20=\x20matr'+'ix_viewPro'+'jection\x20*\x20'+'posW;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PIX'+'ELSNAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20snap\x20ver'+'tex\x20to\x20a\x20p'+'ixel\x20bound'+'ary\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x200.5'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.xy\x20*=\x20uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'ScreenSize'+'.zw;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x202.'+'0)\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20sc'+'reenPos;\x0a}')+('\x0a\x0avec3\x20get'+'WorldPosit'+'ion()\x20{\x0a\x20\x20'+'\x20\x20return\x20d'+'PositionW;'+'\x0a}\x0a'),n2='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_positi'+'on;\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifdef\x20MORP'+'HING\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20morph_te'+'x_params;\x0a'+'\x20\x20\x20\x20attrib'+'ute\x20uint\x20m'+'orph_verte'+'x_id;\x0a\x0a\x20\x20\x20'+'\x20ivec2\x20get'+'TextureMor'+'phCoords()'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20turn\x20'+'morph_vert'+'ex_id\x20into'+'\x20int\x20grid\x20'+'coordinate'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ivec2\x20text'+'ureSize\x20=\x20'+'ivec2(morp'+'h_tex_para'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20mor'+'phGridV\x20=\x20'+'int(morph_'+'vertex_id)'+'\x20/\x20texture'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20int\x20'+'morphGridU'+'\x20=\x20int(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20flipY\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20morphGrid'+'V\x20=\x20textur'+'eSize.y\x20-\x20'+'morphGridV'+'\x20-\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20ivec'+'2(morphGri'+'dU,\x20morphG'+'ridV);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_POSITI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_INT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec3\x20aabb'+'Size;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20aabbMin;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'usampler2D'+'\x20morphPosi'+'tionTex;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20highp\x20s'+'ampler2D\x20m'+'orphPositi'+'onTex;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a#ifdef\x20de'+'fined(BATC'+'H)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ski'+'nBatchVS\x22\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getBon'+'eMatrix(ve'+'rtex_boneI'+'ndices);\x0a\x20'+'\x20\x20\x20}\x0a\x0a#eli'+'f\x20defined('+'SKIN)\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x0a\x20'+'\x20\x20\x20mat4\x20ge'+'tModelMatr'+'ix()\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20get'+'SkinMatrix'+'(vertex_bo'+'neIndices,'+'\x20vertex_bo'+'neWeights)'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'elif\x20defin'+'ed(INSTANC'+'ING)\x0a\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'transformI'+'nstancingV'+'S\x22\x0a\x0a#else\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20matrix'+'_model;\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a\x0avec3\x20ge'+'tLocalPosi'+'tion(vec3\x20'+'vertexPosi'+'tion)\x20{\x0a\x0a\x20'+'\x20\x20\x20vec3\x20lo'+'calPos\x20=\x20v'+'ertexPosit'+'ion;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'morphUV\x20=\x20'+'getTexture'+'MorphCoord'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20MORPHING_'+'INT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20morphPos\x20'+'=\x20vec3(tex'+'elFetch(mo'+'rphPositio'+'nTex,\x20ivec'+'2(morphUV)'+',\x200).xyz)\x20'+'/\x2065535.0\x20'+'*\x20aabbSize'+'\x20+\x20aabbMin'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphPo'+'s\x20=\x20texelF'+'etch(morph'+'PositionTe'+'x,\x20ivec2(m'+'orphUV),\x200'+').xyz;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20localPos\x20'+'+=\x20morphPo'+'s;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20loc'+'alPos;\x0a}\x0a\x0a'),o2='\x0a\x0aattribut'+'e\x20vec4\x20ins'+'tance_line'+'1;\x0aattribu'+'te\x20vec4\x20in'+'stance_lin'+'e2;\x0aattrib'+'ute\x20vec4\x20i'+'nstance_li'+'ne3;\x0aattri'+'bute\x20vec4\x20'+'instance_l'+'ine4;\x0a\x0amat'+'4\x20getModel'+'Matrix()\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20mat'+'4(instance'+'_line1,\x20in'+'stance_lin'+'e2,\x20instan'+'ce_line3,\x20'+'instance_l'+'ine4);\x0a}\x0a',l2='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_refr'+'action;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getRefrac'+'tion()\x20{\x0a\x20'+'\x20\x20\x20float\x20r'+'efraction\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20ref'+'raction\x20=\x20'+'material_r'+'efraction;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_RE'+'FRACTION_T'+'EXTURE\x0a\x20\x20\x20'+'\x20refractio'+'n\x20*=\x20textu'+'re2DBias({'+'STD_REFRAC'+'TION_TEXTU'+'RE_NAME},\x20'+'{STD_REFRA'+'CTION_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_REF'+'RACTION_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_VERTEX'+'\x0a\x20\x20\x20\x20refra'+'ction\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_REFR'+'ACTION_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dTransmis'+'sion\x20=\x20ref'+'raction;\x0a}'+'\x0a',c2='\x0auniform\x20f'+'loat\x20twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0avoi'+'d\x20handleTw'+'oSidedLigh'+'ting()\x20{\x0a\x20'+'\x20\x20\x20dTBN[2]'+'\x20*=\x20gl_Fro'+'ntFacing\x20?'+'\x20twoSidedL'+'ightingNeg'+'ScaleFacto'+'r\x20:\x20-twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0a}\x0a',h2='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20vec2\x20ge'+'tUv0()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20ver'+'tex_positi'+'on.xz;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20o'+'ffset\x20inne'+'r\x20vertices'+'\x20inside\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20('+'original\x20v'+'ertices\x20mu'+'st\x20be\x20in\x20['+'-1;1]\x20rang'+'e)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2(0.'+'0),\x20vec2(1'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20n'+'egativeUni'+'tOffset\x20=\x20'+'clamp(-ver'+'tex_positi'+'on.xz,\x20vec'+'2(0.0),\x20ve'+'c2(1.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20-0.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20atlasRe'+'ct.zw\x20+\x20at'+'lasRect.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vMask\x20=\x20v'+'ertex_texC'+'oord0.xy;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20uv;\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20vec2'+'\x20getUv0()\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20ver'+'tex_texCoo'+'rd0;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a',d2='\x0avec2\x20getU'+'v1()\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'rtex_texCo'+'ord1;\x0a}\x0a',f2='\x0avUV{TRANS'+'FORM_UV_{i'+'}}_{TRANSF'+'ORM_ID_{i}'+'}\x20=\x20vec2(\x0a'+'\x20\x20\x20\x20dot(ve'+'c3(uv{TRAN'+'SFORM_UV_{'+'i}},\x201),\x20{'+'TRANSFORM_'+'NAME_{i}}0'+'),\x0a\x20\x20\x20\x20dot'+'(vec3(uv{T'+'RANSFORM_U'+'V_{i}},\x201)'+',\x20{TRANSFO'+'RM_NAME_{i'+'}}1)\x0a);\x0a',u2='\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}0;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}1;'+'\x0a',p2='\x0avoid\x20getV'+'iewDir()\x20{'+'\x0a\x20\x20\x20\x20dView'+'DirW\x20=\x20nor'+'malize(vie'+'w_position'+'\x20-\x20vPositi'+'onW);\x0a}\x0a',m2={'alphaTestPS':uC,'ambientPS':pC,'anisotropyPS':mC,'aoPS':_C,'aoDiffuseOccPS':gC,'aoSpecOccPS':SC,'bakeDirLmEndPS':yC,'bakeLmEndPS':vC,'basePS':xC,'baseNineSlicedPS':TC,'baseNineSlicedTiledPS':wC,'bayerPS':EC,'blurVSMPS':bC,'clearCoatPS':AC,'clearCoatGlossPS':CC,'clearCoatNormalPS':PC,'clusteredLightCookiesPS':DC,'clusteredLightShadowsPS':IC,'clusteredLightUtilsPS':MC,'clusteredLightPS':LC,'combinePS':RC,'cookieBlit2DPS':OC,'cookieBlitCubePS':FC,'cookieBlitVS':NC,'cookiePS':kC,'cubeMapProjectPS':UC,'cubeMapRotatePS':BC,'debugOutputPS':zC,'debugProcessFrontendPS':VC,'detailModesPS':HC,'diffusePS':WC,'decodePS':GC,'emissivePS':$C,'encodePS':XC,'endPS':qC,'envAtlasPS':jC,'envProcPS':YC,'falloffInvSquaredPS':KC,'falloffLinearPS':ZC,'floatAsUintPS':QC,'fogPS':JC,'fresnelSchlickPS':e1,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':t1,'gammaPS':s1,'gles3PS':ay,'gles3VS':ny,'glossPS':i1,'gsplatCenterVS':r1,'gsplatCornerVS':p1,'gsplatColorVS':a1,'gsplatCommonVS':n1,'gsplatCompressedDataVS':o1,'gsplatCompressedSHVS':l1,'gsplatEvalSHVS':c1,'gsplatQuatToMat3VS':h1,'gsplatSogsColorVS':d1,'gsplatSogsDataVS':f1,'gsplatSogsSHVS':u1,'gsplatDataVS':m1,'gsplatOutputVS':_1,'gsplatPS':g1,'gsplatSHVS':S1,'gsplatSourceVS':y1,'gsplatVS':v1,'quadVS':x1,'immediateLinePS':T1,'immediateLineVS':w1,'iridescenceDiffractionPS':E1,'iridescencePS':b1,'iridescenceThicknessPS':A1,'iorPS':C1,'lightDeclarationPS':P1,'lightDiffuseLambertPS':M1,'lightDirPointPS':D1,'lightEvaluationPS':I1,'lightFunctionLightPS':L1,'lightFunctionShadowPS':R1,'lightingPS':O1,'lightmapAddPS':F1,'lightmapPS':N1,'lightSpecularAnisoGGXPS':k1,'lightSpecularBlinnPS':U1,'lightSheenPS':B1,'linearizeDepthPS':z1,'litForwardBackendPS':V1,'litForwardDeclarationPS':G1,'litForwardMainPS':H1,'litForwardPostCodePS':W1,'litForwardPreCodePS':$1,'litMainPS':X1,'litMainVS':q1,'litOtherMainPS':j1,'litShaderArgsPS':Y1,'litShaderCorePS':K1,'litShadowMainPS':Z1,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':Q1,'metalnessPS':J1,'metalnessModulatePS':tP,'morphPS':sP,'morphVS':iP,'msdfPS':eP,'msdfVS':rP,'normalVS':aP,'normalCoreVS':nP,'normalMapPS':oP,'opacityPS':lP,'opacityDitherPS':cP,'outputPS':hP,'outputAlphaPS':dP,'outputTex2DPS':fP,'sheenPS':uP,'sheenGlossPS':pP,'parallaxPS':mP,'pickPS':_P,'reflDirPS':gP,'reflDirAnisoPS':SP,'reflectionCCPS':yP,'reflectionCubePS':vP,'reflectionEnvHQPS':xP,'reflectionEnvPS':TP,'reflectionSpherePS':wP,'reflectionSheenPS':EP,'refractionCubePS':bP,'refractionDynamicPS':AP,'reprojectPS':CP,'reprojectVS':PP,'screenDepthPS':MP,'shadowCascadesPS':DP,'shadowEVSMPS':IP,'shadowPCF1PS':LP,'shadowPCF3PS':RP,'shadowPCF5PS':OP,'shadowPCSSPS':FP,'shadowSoftPS':NP,'skinBatchVS':kP,'skinVS':UP,'skyboxPS':BP,'skyboxVS':zP,'specularPS':VP,'sphericalPS':GP,'specularityFactorPS':HP,'spotPS':WP,'startNineSlicedPS':$P,'startNineSlicedTiledPS':XP,'stdDeclarationPS':qP,'stdFrontEndPS':jP,'TBNPS':YP,'thicknessPS':KP,'tonemappingPS':ZP,'tonemappingAcesPS':QP,'tonemappingAces2PS':JP,'tonemappingFilmicPS':e2,'tonemappingHejlPS':t2,'tonemappingLinearPS':s2,'tonemappingNeutralPS':i2,'tonemappingNonePS':r2,'transformVS':a2,'transformCoreVS':n2,'transformInstancingVS':o2,'transmissionPS':l2,'twoSidedLightingPS':c2,'uv0VS':h2,'uv1VS':d2,'uvTransformVS':f2,'uvTransformUniformsPS':u2,'viewDirPS':p2,'webgpuPS':oy,'webgpuVS':ly},_2='\x0auniform\x20a'+'lpha_ref:\x20'+'f32;\x0a\x0afn\x20a'+'lphaTest(a'+':\x20f32)\x20{\x0a\x20'+'\x20\x20\x20if\x20(a\x20<'+'\x20uniform.a'+'lpha_ref)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',g2='\x0a\x0a#if\x20LIT_'+'AMBIENT_SO'+'URCE\x20==\x20AM'+'BIENTSH\x0a\x20\x20'+'\x20\x20uniform\x20'+'ambientSH:'+'\x20array<vec'+'3f,\x209>;\x0a#e'+'ndif\x0a\x0a#if\x20'+'LIT_AMBIEN'+'T_SOURCE\x20='+'=\x20ENVALATL'+'AS\x0a\x20\x20\x20\x20#in'+'clude\x20\x22env'+'AtlasPS\x22\x0a\x0a'+'\x20\x20\x20\x20#ifnde'+'f\x20ENV_ATLA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_en'+'vAtlas:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_envAt'+'lasSampler'+':\x20sampler;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'fn\x20addAmbi'+'ent(worldN'+'ormal:\x20vec'+'3f)\x20{\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20A'+'MBIENTSH\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20n:\x20vec3f'+'\x20=\x20cubeMap'+'Rotate(wor'+'ldNormal);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20color:\x20'+'vec3f\x20=\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[0]'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[1]\x20*\x20n.'+'x\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm.ambien'+'tSH[2]\x20*\x20n'+'.y\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form.ambie'+'ntSH[3]\x20*\x20'+'n.z\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform.ambi'+'entSH[4]\x20*'+'\x20n.x\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[5]\x20*\x20n.'+'z\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform.'+'ambientSH['+'6]\x20*\x20n.y\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform.amb'+'ientSH[7]\x20'+'*\x20(3.0\x20*\x20n'+'.z\x20*\x20n.z\x20-'+'\x201.0)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[8]'+'\x20*\x20(n.x\x20*\x20'+'n.x\x20-\x20n.y\x20'+'*\x20n.y);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20proces'+'sEnvironme'+'nt(max(col'+'or,\x20vec3f('+'0.0)));\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+('\x20ENVALATLA'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3f(-1.0,\x201'+'.0,\x201.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20mapUv'+'(toSpheric'+'alUv(dir),'+'\x20vec4f(128'+'.0,\x20256.0\x20'+'+\x20128.0,\x206'+'4.0,\x2032.0)'+'\x20/\x20atlasSi'+'ze);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20ra'+'w:\x20vec4f\x20='+'\x20textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20uv'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20linea'+'r:\x20vec3f\x20='+'\x20{ambientD'+'ecode}(raw'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20+=\x20pr'+'ocessEnvir'+'onment(lin'+'ear);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20C'+'ONSTANT\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20unifor'+'m.light_gl'+'obalAmbien'+'t;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),S2='\x0a#ifdef\x20LI'+'T_GGX_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_anis'+'otropyInte'+'nsity:\x20f32'+';\x0a\x20\x20\x20\x20unif'+'orm\x20materi'+'al_anisotr'+'opyRotatio'+'n:\x20vec2f;\x0a'+'#endif\x0a\x0afn'+'\x20getAnisot'+'ropy()\x20{\x0a\x20'+'\x20\x20\x20dAnisot'+'ropy\x20=\x200.0'+';\x0a\x20\x20\x20\x20dAni'+'sotropyRot'+'ation\x20=\x20ve'+'c2f(1.0,\x200'+'.0);\x0a\x0a#ifd'+'ef\x20LIT_GGX'+'_SPECULAR\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20=\x20un'+'iform.mate'+'rial_aniso'+'tropyInten'+'sity;\x0a\x20\x20\x20\x20'+'dAnisotrop'+'yRotation\x20'+'=\x20uniform.'+'material_a'+'nisotropyR'+'otation;\x0a#'+'endif\x0a\x0a#if'+'def\x20STD_AN'+'ISOTROPY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyTex:\x20'+'vec3f\x20=\x20te'+'xtureSampl'+'eBias({STD'+'_ANISOTROP'+'Y_TEXTURE_'+'NAME},\x20{ST'+'D_ANISOTRO'+'PY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'ANISOTROPY'+'_TEXTURE_U'+'V},\x20unifor'+'m.textureB'+'ias).rgb;\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20*=\x20a'+'nisotropyT'+'ex.b;\x0a\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyRotat'+'ionFromTex'+':\x20vec2f\x20=\x20'+'anisotropy'+'Tex.rg\x20*\x202'+'.0\x20-\x20vec2f'+'(1.0);\x0a\x20\x20\x20'+'\x20let\x20rotat'+'ionMatrix:'+'\x20mat2x2f\x20='+'\x20mat2x2f(d'+'Anisotropy'+'Rotation.x'+',\x20dAnisotr'+'opyRotatio'+'n.y,\x20-dAni'+'sotropyRot'+'ation.y,\x20d'+'Anisotropy'+'Rotation.x'+');\x0a\x20\x20\x20\x20dAn'+'isotropyRo'+'tation\x20=\x20r'+'otationMat'+'rix\x20*\x20anis'+'otropyRota'+'tionFromTe'+'x;\x0a#endif\x0a'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20c'+'lamp(dAnis'+'otropy,\x200.'+'0,\x201.0);\x0a}'+'\x0a',y2='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_aoI'+'ntensity:\x20'+'f32;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_AODETA'+'IL_TEXTURE'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22detai'+'lModesPS\x22\x0a'+'#endif\x0a\x0afn'+'\x20getAO()\x20{'+'\x0a\x20\x20\x20\x20dAo\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20aoBas'+'e:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_AO_TEXTU'+'RE_NAME},\x20'+'{STD_AO_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AO_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_AO_'+'TEXTURE_CH'+'ANNEL};\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_AO'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20aoDetail:'+'\x20f32\x20=\x20tex'+'tureSample'+'Bias({STD_'+'AODETAIL_T'+'EXTURE_NAM'+'E},\x20{STD_A'+'ODETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AODET'+'AIL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_AODETAI'+'L_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20aoBase\x20='+'\x20detailMod'+'e_{STD_AOD'+'ETAIL_DETA'+'ILMODE}(ve'+'c3f(aoBase'+'),\x20vec3f(a'+'oDetail)).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dAo'+'\x20=\x20dAo\x20*\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20=\x20dA'+'o\x20*\x20satura'+'te(vVertex'+'Color.{STD'+'_AO_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'STD_AO_TEX'+'TURE)\x20||\x20d'+'efined(STD'+'_AO_VERTEX'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAo\x20=\x20mix('+'1.0,\x20dAo,\x20'+'uniform.ma'+'terial_aoI'+'ntensity);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',v2='\x0afn\x20occlud'+'eDiffuse(a'+'o:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20ao;\x0a'+'}\x0a',x2='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'aterial_oc'+'cludeSpecu'+'larIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0afn'+'\x20occludeSp'+'ecular(glo'+'ss:\x20f32,\x20a'+'o:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f)\x20{\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20==\x20A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_OCCLUDE_S'+'PECULAR_FL'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'specOcc:\x20f'+'32\x20=\x20mix(1'+'.0,\x20ao,\x20un'+'iform.mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specOcc:'+'\x20f32\x20=\x20ao;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'GLOSSDEPEN'+'DENT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'roximated\x20'+'specular\x20o'+'cclusion\x20f'+'rom\x20AO\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ht'+'tp://resea'+'rch.tri-ac'+'e.com/Data'+'/cedec2011'+'_RealtimeP'+'BR_Impleme'+'ntation_e.'+'pptx\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20spe'+'cPow:\x20f32\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20specOc'+'c:\x20f32\x20=\x20s'+'aturate(po'+'w(dot(worl'+'dNormal,\x20v'+'iewDir)\x20+\x20'+'ao,\x200.01\x20*'+'\x20specPow)\x20'+'-\x201.0\x20+\x20ao'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_OCCLUDE'+'_SPECULAR_'+'FLOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecOcc\x20=\x20mi'+'x(1.0,\x20spe'+'cOcc,\x20unif'+'orm.materi'+'al_occlude'+'SpecularIn'+'tensity);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20*\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20dRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'*\x20specOcc;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sReflec'+'tion\x20=\x20sRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a'),T2='\x0a\x20\x20\x20\x20let\x20d'+'irLm\x20=\x20tex'+'tureSample'+'(texture_d'+'irLightMap'+',\x20texture_'+'dirLightMa'+'pSampler,\x20'+'vUv1);\x0a\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.bakeDi'+'r\x20>\x200.5)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(dAtten\x20'+'>\x200.00001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'npacked_di'+'r\x20=\x20dirLm.'+'xyz\x20*\x202.0\x20'+'-\x20vec3f(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x20clamp'+'(dAtten,\x200'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20comb'+'ined_dir\x20='+'\x20dLightDir'+'NormW.xyz\x20'+'*\x20dAtten\x20+'+'\x20unpacked_'+'dir\x20*\x20dirL'+'m.w;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20finalRgb\x20'+'=\x20normaliz'+'e(combined'+'_dir)\x20*\x200.'+'5\x20+\x20vec3f('+'0.5);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20finalA\x20='+'\x20max(dirLm'+'.w\x20+\x20dAtte'+'n,\x201.0\x20/\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalRgb,\x20'+'finalA);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20dirLm;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20alpha'+'_min\x20=\x20sel'+'ect(0.0,\x201'+'.0\x20/\x20255.0'+',\x20dAtten\x20>'+'\x200.00001);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20finalA\x20'+'=\x20max(dirL'+'m.w,\x20alpha'+'_min);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(dirL'+'m.rgb,\x20fin'+'alA);\x0a\x20\x20\x20\x20'+'}\x0a',w2='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'uniform.am'+'bientBakeO'+'cclusionCo'+'ntrast\x20+\x201'+'.0,\x200.0))\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20vec3f(u'+'niform.amb'+'ientBakeOc'+'clusionBri'+'ghtness);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'saturate3('+'dDiffuseLi'+'ght);\x0a\x20\x20\x20\x20'+'dDiffuseLi'+'ght\x20=\x20dDif'+'fuseLight\x20'+'*\x20dAmbient'+'Light;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIGHTMAP'+'_RGBM\x0a\x20\x20\x20\x20'+'//\x20encode\x20'+'to\x20RGBM\x0a\x20\x20'+'\x20\x20var\x20temp'+'_color_rgb'+'m\x20=\x20vec4f('+'dDiffuseLi'+'ght,\x201.0);'+'\x0a\x20\x20\x20\x20temp_'+'color_rgbm'+'\x20=\x20vec4f(p'+'ow(temp_co'+'lor_rgbm.r'+'gb,\x20vec3f('+'0.5)),\x20tem'+'p_color_rg'+'bm.a);\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+'color_rgbm'+'.rgb\x20/\x208.0'+',\x20temp_col'+'or_rgbm.a)'+';\x0a\x20\x20\x20\x20let\x20'+'max_g_b\x20=\x20'+'max(temp_c'+'olor_rgbm.'+'g,\x20max(tem'+'p_color_rg'+'bm.b,\x201.0\x20'+'/\x20255.0));'+'\x0a\x20\x20\x20\x20let\x20m'+'ax_rgb\x20=\x20m'+'ax(temp_co'+'lor_rgbm.r'+',\x20max_g_b)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20ceil'+'(temp_colo'+'r_rgbm.a\x20*'+'\x20255.0)\x20/\x20'+'255.0;\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+('color_rgbm'+'.rgb\x20/\x20tem'+'p_color_rg'+'bm.a,\x20temp'+'_color_rgb'+'m.a);\x0a\x20\x20\x20\x20'+'output.col'+'or\x20=\x20temp_'+'color_rgbm'+';\x0a#else\x0a\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20vec'+'4f(dDiffus'+'eLight,\x201.'+'0);\x0a#endif'+'\x0a'),E2='\x0auniform\x20v'+'iew_positi'+'on:\x20vec3f;'+'\x0a\x0auniform\x20'+'light_glob'+'alAmbient:'+'\x20vec3f;\x0a\x0af'+'n\x20square(x'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20x*x'+';\x0a}\x0a\x0afn\x20sa'+'turate(x:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0afn'+'\x20saturate3'+'(x:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3f(0.'+'0),\x20vec3f('+'1.0));\x0a}\x0a',b2='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'Mask:\x20vec2'+'f;\x0avarying'+'\x20vTiledUv:'+'\x20vec2f;\x0a\x0au'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0auni'+'form\x20outer'+'Scale:\x20vec'+'2f;\x0aunifor'+'m\x20atlasRec'+'t:\x20vec4f;\x0a'+'\x0avar<priva'+'te>\x20nineSl'+'icedUv:\x20ve'+'c2f;\x0a',A2='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vMask:\x20v'+'ec2f;\x0avary'+'ing\x20vTiled'+'Uv:\x20vec2f;'+'\x0a\x0auniform\x20'+'innerOffse'+'t:\x20vec4f;\x0a'+'uniform\x20ou'+'terScale:\x20'+'vec2f;\x0auni'+'form\x20atlas'+'Rect:\x20vec4'+'f;\x0a\x0avar<pr'+'ivate>\x20nin'+'eSlicedUv:'+'\x20vec2f;\x0a',C2='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afn\x20bay'+'er2(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(2.0\x20*'+'\x20p.y\x20+\x20p.x'+'\x20+\x201.0)\x20%\x20'+'4.0;\x0a}\x0a\x0a//'+'\x204x4\x20matri'+'x,\x20p\x20-\x20pix'+'el\x20coordin'+'ate\x0afn\x20bay'+'er4(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20p1:\x20vec2f'+'\x20=\x20p\x20%\x20vec'+'2f(2.0);\x0a\x20'+'\x20\x20\x20let\x20p2:'+'\x20vec2f\x20=\x20f'+'loor(0.5\x20*'+'\x20(p\x20%\x20vec2'+'f(4.0)));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afn\x20bayer8'+'(p:\x20vec2f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20p1'+':\x20vec2f\x20=\x20'+'p\x20%\x20vec2f('+'2.0);\x0a\x20\x20\x20\x20'+'let\x20p2:\x20ve'+'c2f\x20=\x20floo'+'r(0.5\x20*\x20(p'+'\x20%\x20vec2f(4'+'.0)));\x0a\x20\x20\x20'+'\x20let\x20p4:\x20v'+'ec2f\x20=\x20flo'+'or(0.25\x20*\x20'+'(p\x20%\x20vec2f'+'(8.0)));\x0a\x20'+'\x20\x20\x20return\x20'+'4.0\x20*\x20(4.0'+'\x20*\x20bayer2('+'p1)\x20+\x20baye'+'r2(p2))\x20+\x20'+'bayer2(p4)'+';\x0a}\x0a',P2='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20sou'+'rce:\x20textu'+'re_2d<f32>'+';\x0avar\x20sour'+'ceSampler:'+'\x20sampler;\x0a'+'\x0a#ifdef\x20GA'+'USS\x0a\x20\x20\x20\x20un'+'iform\x20weig'+'ht:\x20array<'+'f32,\x20{SAMP'+'LES}>;\x0a#en'+'dif\x0aunifor'+'m\x20pixelOff'+'set:\x20vec2f'+';\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20var'+'\x20moments:\x20'+'vec3f\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20let\x20uv'+':\x20vec2f\x20=\x20'+'input.vUv0'+'\x20-\x20uniform'+'.pixelOffs'+'et\x20*\x20(f32('+'{SAMPLES})'+'\x20*\x200.5);\x0a\x0a'+'\x20\x20\x20\x20for\x20(v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20{'+'SAMPLES};\x20'+'i\x20=\x20i\x20+\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20c:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'source,\x20so'+'urceSample'+'r,\x20uv\x20+\x20un'+'iform.pixe'+'lOffset\x20*\x20'+'f32(i));\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20moments'+'\x20=\x20moments'+'\x20+\x20c.xyz\x20*'+'\x20uniform.w'+'eight[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20=\x20moment'+'s\x20+\x20c.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'oments\x20=\x20m'+'oments\x20*\x20('+'1.0\x20/\x20f32('+'{SAMPLES})'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'moments,\x201'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a',M2='\x0auniform\x20m'+'aterial_cl'+'earCoat:\x20f'+'32;\x0a\x0afn\x20ge'+'tClearCoat'+'()\x20{\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20=\x20unifo'+'rm.materia'+'l_clearCoa'+'t;\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_C'+'LEARCOAT_T'+'EXTURE\x0a\x20\x20\x20'+'\x20ccSpecula'+'rity\x20=\x20ccS'+'pecularity'+'\x20*\x20texture'+'SampleBias'+'({STD_CLEA'+'RCOAT_TEXT'+'URE_NAME},'+'\x20{STD_CLEA'+'RCOAT_TEXT'+'URE_NAME}S'+'ampler,\x20{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_CLE'+'ARCOAT_VER'+'TEX\x0a\x20\x20\x20\x20cc'+'Specularit'+'y\x20=\x20ccSpec'+'ularity\x20*\x20'+'saturate(v'+'VertexColo'+'r.{STD_CLE'+'ARCOAT_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a',D2='\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_clearCoa'+'tGloss:\x20f3'+'2;\x0a\x0afn\x20get'+'ClearCoatG'+'lossiness('+')\x20{\x0a\x20\x20\x20\x20cc'+'Glossiness'+'\x20=\x20uniform'+'.material_'+'clearCoatG'+'loss;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE_NAME}'+',\x20{STD_CLE'+'ARCOATGLOS'+'S_TEXTURE_'+'NAME}Sampl'+'er,\x20{STD_C'+'LEARCOATGL'+'OSS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_CLEA'+'RCOATGLOSS'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_INVERT\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20=\x201.0'+'\x20-\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20ccGloss'+'iness\x20+=\x200'+'.0000001;\x0a'+'}\x0a',I2='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_cle'+'arCoatBump'+'iness:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getClea'+'rCoatNorma'+'l()\x20{\x0a#ifd'+'ef\x20STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'\x0a\x20\x20\x20\x20var\x20n'+'ormalMap:\x20'+'vec3f\x20=\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_DEC'+'ODE}(textu'+'reSampleBi'+'as({STD_CL'+'EARCOATNOR'+'MAL_TEXTUR'+'E_NAME},\x20{'+'STD_CLEARC'+'OATNORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias));\x0a\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20mix(v'+'ec3f(0.0,\x20'+'0.0,\x201.0),'+'\x20normalMap'+',\x20uniform.'+'material_c'+'learCoatBu'+'mpiness);\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20norm'+'alize(dTBN'+'\x20*\x20normalM'+'ap);\x0a#else'+'\x0a\x20\x20\x20\x20ccNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a',L2='\x0astruct\x20Fa'+'ceCoords\x20{'+'\x0a\x20\x20\x20\x20uv:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Or'+'iginal\x20ret'+'urn\x20value\x0a'+'\x20\x20\x20\x20faceIn'+'dex:\x20f32,\x20'+'\x20\x20\x20//\x20Was\x20'+'out\x20parame'+'ter\x0a\x20\x20\x20\x20ti'+'leOffset:\x20'+'vec2f,\x20//\x20'+'Was\x20out\x20pa'+'rameter\x0a}\x0a'+'\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0afn\x20getC'+'ubemapFace'+'Coordinate'+'s(dir:\x20vec'+'3f)\x20->\x20Fac'+'eCoords\x20{\x0a'+'\x20\x20\x20\x20var\x20fa'+'ceIndex:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20tileOffs'+'et:\x20vec2f;'+'\x0a\x20\x20\x20\x20var\x20u'+'v:\x20vec2f;\x20'+'//\x20This\x20is'+'\x20the\x20face\x20'+'UV\x20[0..1]\x0a'+'\x20\x20\x20\x20let\x20vA'+'bs:\x20vec3f\x20'+'=\x20abs(dir)'+';\x0a\x20\x20\x20\x20var\x20'+'ma:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20if\x20(vA'+'bs.z\x20>=\x20vA'+'bs.x\x20&&\x20vA'+'bs.z\x20>=\x20vA'+'bs.y)\x20{\x20\x20\x20'+'//\x20front\x20/'+'\x20back\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20i'+'s_neg_z\x20=\x20'+'dir.z\x20<\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20faceIndex'+'\x20=\x20select('+'4.0,\x205.0,\x20'+'is_neg_z);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'a\x20=\x200.5\x20/\x20'+'vAbs.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv\x20='+'\x20vec2f(sel'+'ect(dir.x,'+'\x20-dir.x,\x20i'+'s_neg_z),\x20'+'-dir.y);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20til'+'eOffset\x20=\x20'+'vec2f(2.0,'+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_z));\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(vAbs'+'.y\x20>=\x20vAbs'+'.x)\x20{\x20\x20//\x20'+'top\x20index\x20'+'2,\x20bottom\x20'+'index\x203\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20is_neg_y\x20'+'=\x20dir.y\x20<\x20'+'0.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20selec'+('t(2.0,\x203.0'+',\x20is_neg_y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ma\x20=\x200.5\x20'+'/\x20vAbs.y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20=\x20vec2f(d'+'ir.x,\x20sele'+'ct(dir.z,\x20'+'-dir.z,\x20is'+'_neg_y));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ti'+'leOffset\x20='+'\x20vec2f(1.0'+',\x20select(0'+'.0,\x201.0,\x20i'+'s_neg_y));'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20is_'+'neg_x\x20=\x20di'+'r.x\x20<\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'aceIndex\x20='+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_x);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2f(selec'+'t(-dir.z,\x20'+'dir.z,\x20is_'+'neg_x),\x20-d'+'ir.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20tileO'+'ffset\x20=\x20ve'+'c2f(0.0,\x20s'+'elect(0.0,'+'\x201.0,\x20is_n'+'eg_x));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20u'+'v\x20=\x20uv\x20*\x20m'+'a\x20+\x200.5;\x0a\x20'+'\x20\x20\x20return\x20'+'FaceCoords'+'(uv,\x20faceI'+'ndex,\x20tile'+'Offset);\x0a}'+'\x0a\x0a//\x20conve'+'rts\x20unnorm'+'alized\x20dir'+'ection\x20vec'+'tor\x20to\x20a\x20t'+'exture\x20coo'+'rdinate\x20fo'+'r\x20a\x20cubema'+'p\x20face\x20sto'+'red\x20within'+'\x20texture\x20a'+'tlas\x20descr'+'ibed\x20by\x20th'+'e\x20viewport'+'\x0afn\x20getCub'+'emapAtlasC'+'oordinates'+'(omniAtlas'+'Viewport:\x20'+'vec3f,\x20sha'+'dowEdgePix'+'els:\x20f32,\x20'+'shadowText'+'ureResolut'+'ion:\x20f32,\x20'+'dir:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20faceData'+':\x20FaceCoor'+'ds\x20=\x20getCu'+'bemapFaceC'+'oordinates'+'(dir);\x0a\x20\x20\x20'+'\x20var\x20uv:\x20v'+'ec2f\x20=\x20fac'+'eData.uv;\x0a'+'\x20\x20\x20\x20let\x20ti'+'leOffset:\x20'+'vec2f\x20=\x20fa'+'ceData.til'+'eOffset;\x0a\x0a'+'\x20\x20\x20\x20//\x20mov'+'e\x20uv\x20coord'+'inates\x20inw'+'ards\x20insid'+'e\x20to\x20compe'+'nsate\x20for\x20')+('larger\x20fov'+'\x20when\x20rend'+'ering\x20shad'+'ow\x20into\x20at'+'las\x0a\x20\x20\x20\x20le'+'t\x20atlasFac'+'eSize:\x20f32'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20le'+'t\x20tileSize'+':\x20f32\x20=\x20sh'+'adowTextur'+'eResolutio'+'n\x20*\x20atlasF'+'aceSize;\x0a\x20'+'\x20\x20\x20var\x20off'+'set:\x20f32\x20='+'\x20shadowEdg'+'ePixels\x20/\x20'+'tileSize;\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20*\x20(1.0\x20-'+'\x20offset\x20*\x20'+'2.0)\x20+\x20off'+'set;\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20='+'\x20uv\x20*\x20atla'+'sFaceSize;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x20into'+'\x20face\x20of\x20t'+'he\x20atlas\x20('+'3x3\x20grid)\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20+\x20tileOf'+'fset\x20*\x20atl'+'asFaceSize'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'offset\x20int'+'o\x20the\x20atla'+'s\x20viewport'+'\x0a\x20\x20\x20\x20uv\x20=\x20'+'uv\x20+\x20omniA'+'tlasViewpo'+'rt.xy;\x0a\x0a\x20\x20'+'\x20\x20return\x20u'+'v;\x0a}\x0a'),R2='\x0afn\x20_getCo'+'okieCluste'+'red(tex:\x20t'+'exture_2d<'+'f32>,\x20texS'+'ampler:\x20sa'+'mpler,\x20uv:'+'\x20vec2f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20pixel'+':\x20vec4f\x20=\x20'+'mix(vec4f('+'1.0),\x20text'+'ureSampleL'+'evel(tex,\x20'+'texSampler'+',\x20uv,\x200.0)'+',\x20intensit'+'y);\x0a\x20\x20\x20\x20le'+'t\x20isRgb:\x20b'+'ool\x20=\x20dot('+'cookieChan'+'nel.rgb,\x20v'+'ec3f(1.0))'+'\x20==\x203.0;\x0a\x20'+'\x20\x20\x20return\x20'+'select(vec'+'3f(dot(pix'+'el,\x20cookie'+'Channel)),'+'\x20pixel.rgb'+',\x20isRgb);\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0afn'+'\x20getCookie'+'2DClustere'+'d(tex:\x20tex'+'ture_2d<f3'+'2>,\x20texSam'+'pler:\x20samp'+'ler,\x20trans'+'form:\x20mat4'+'x4f,\x20world'+'Position:\x20'+'vec3f,\x20int'+'ensity:\x20f3'+'2,\x20cookieC'+'hannel:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20projPo'+'s:\x20vec4f\x20='+'\x20transform'+'\x20*\x20vec4f(w'+'orldPositi'+'on,\x201.0);\x0a'+'\x20\x20\x20\x20return'+'\x20_getCooki'+'eClustered'+'(tex,\x20texS'+'ampler,\x20pr'+'ojPos.xy\x20/'+'\x20projPos.w'+',\x20intensit'+'y,\x20cookieC'+'hannel);\x0a}'+'\x0a\x0a//\x20getCo'+'okie\x20for\x20c'+'lustered\x20o'+'mni\x20light\x20'+'with\x20the\x20c'+'ookie\x20text'+'ure\x20being\x20'+'stored\x20in\x20'+'the\x20cookie'+'\x20atlas\x0afn\x20'+'getCookieC'+'ubeCluster'+'ed(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20dir:'+'\x20vec3f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f,\x20shad'+'owTextureR'+'esolution:'+'\x20f32,\x20shad'+('owEdgePixe'+'ls:\x20f32,\x20o'+'mniAtlasVi'+'ewport:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20dir);'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getCook'+'ieClustere'+'d(tex,\x20tex'+'Sampler,\x20u'+'v,\x20intensi'+'ty,\x20cookie'+'Channel);\x0a'+'}\x0a'),O2='\x0a\x0afn\x20_getS'+'hadowCoord'+'PerspZbuff'+'er(shadowM'+'atrix:\x20mat'+'4x4f,\x20shad'+'owParams:\x20'+'vec4f,\x20wPo'+'s:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20p'+'rojPos\x20=\x20s'+'hadowMatri'+'x\x20*\x20vec4f('+'wPos,\x201.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20projPos'+'.xyz\x20/\x20pro'+'jPos.w;\x0a\x20\x20'+'\x20\x20//\x20depth'+'\x20bias\x20is\x20a'+'lready\x20app'+'lied\x20on\x20re'+'nder\x0a}\x0a\x0afn'+'\x20getShadow'+'CoordPersp'+'ZbufferNor'+'malOffset('+'shadowMatr'+'ix:\x20mat4x4'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20normal'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20wP'+'os:\x20vec3f\x20'+'=\x20vPositio'+'nW\x20+\x20norma'+'l\x20*\x20shadow'+'Params.y;\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wCoordPers'+'pZbuffer(s'+'hadowMatri'+'x,\x20shadowP'+'arams,\x20wPo'+'s);\x0a}\x0a\x0afn\x20'+'normalOffs'+'etPointSha'+'dow(shadow'+'Params:\x20ve'+'c4f,\x20light'+'Pos:\x20vec3f'+',\x20lightDir'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'normal:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(li'+'ghtDir);\x0a\x20'+'\x20\x20\x20let\x20wPo'+'s:\x20vec3f\x20='+'\x20vPosition'+'W\x20+\x20normal'+'\x20*\x20shadowP'+'arams.y\x20*\x20'+'clamp(1.0\x20'+'-\x20dot(norm'+'al,\x20-light'+'DirNorm),\x20'+'0.0,\x201.0)\x20'+'*\x20distScal'+'e;\x20//0.02\x0a'+'\x20\x20\x20\x20let\x20di'+'r:\x20vec3f\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0a\x20\x20\x20\x20'+'fn\x20getShad'+'owOmniClus'+'teredPCF1('+'shadowMap:'+'\x20texture_d'+'epth_2d,\x20s'+'hadowMapSa'+'mpler:\x20sam'+'pler_compa'+'rison,\x20sha'+'dowParams:'+('\x20vec4f,\x20om'+'niAtlasVie'+'wport:\x20vec'+'3f,\x20shadow'+'EdgePixels'+':\x20f32,\x20lig'+'htDir:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shad'+'owTextureR'+'esolution:'+'\x20f32\x20=\x20sha'+'dowParams.'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+'tureResolu'+'tion,\x20ligh'+'tDir);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowZ:\x20f'+'32\x20=\x20lengt'+'h(lightDir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv,'+'\x20shadowZ);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F3)\x0a\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'wOmniClust'+'eredPCF3(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owParams:\x20'+'vec4f,\x20omn'+'iAtlasView'+'port:\x20vec3'+'f,\x20shadowE'+'dgePixels:'+'\x20f32,\x20ligh'+'tDir:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wTextureRe'+'solution:\x20'+'f32\x20=\x20shad'+'owParams.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20light'+'Dir);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadowZ:\x20f3'+'2\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w\x20+\x20'+'shadowPara'+'ms.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowCoord:'+'\x20vec3f\x20=\x20v'+'ec3f(uv,\x20s'+'hadowZ);\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF3x3('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20}\x0a\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowOmn'+'iClustered'+'PCF5(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20omniAtl'+'asViewport'+':\x20vec3f,\x20s'+'hadowEdgeP'+'ixels:\x20f32'+',\x20lightDir'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadowTex'+'tureResolu'+'tion:\x20f32\x20'+'=\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'uv:\x20vec2f\x20'+'=\x20getCubem'+'apAtlasCoo'+'rdinates(o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20shad'+'owTextureR'+'esolution,'+'\x20lightDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20vec3f'+'(uv,\x20shado'+'wZ);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CF5x5(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'#endif\x0a\x0a//'+'\x20Clustered'+'\x20Spot\x20Samp'+'ling\x20using'+'\x20atlas\x0a\x0a#i'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF1)\x0a\x0a\x20\x20\x20'+'\x20fn\x20getSha'+'dowSpotClu'+'steredPCF1'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu')+('rn\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowCoord.'+'xy,\x20shadow'+'Coord.z);\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0a\x20\x20'+'\x20\x20fn\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'3x3(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF5)\x0a\x0a\x20'+'\x20\x20\x20fn\x20getS'+'hadowSpotC'+'lusteredPC'+'F5(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),F2='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0avar\x20clu'+'sterWorldT'+'exture:\x20te'+'xture_2d<f'+'32>;\x0avar\x20l'+'ightsTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x0a#ifdef\x20C'+'LUSTER_SHA'+'DOWS\x0a\x20\x20\x20\x20/'+'/\x20TODO:\x20wh'+'en\x20VSM\x20sha'+'dow\x20is\x20sup'+'ported,\x20it'+'\x20needs\x20to\x20'+'use\x20sample'+'r2D\x20in\x20web'+'gl2\x0a\x20\x20\x20\x20va'+'r\x20shadowAt'+'lasTexture'+':\x20texture_'+'depth_2d;\x0a'+'\x20\x20\x20\x20var\x20sh'+'adowAtlasT'+'extureSamp'+'ler:\x20sampl'+'er_compari'+'son;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'var\x20cookie'+'AtlasTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20c'+'ookieAtlas'+'TextureSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0auniform'+'\x20clusterMa'+'xCells:\x20i3'+'2;\x0a\x0a//\x201.0'+'\x20if\x20cluste'+'red\x20lighti'+'ng\x20can\x20be\x20'+'skipped\x20(0'+'\x20lights\x20in'+'\x20the\x20clust'+'ers)\x0aunifo'+'rm\x20cluster'+'Skip:\x20f32;'+'\x0a\x0auniform\x20'+'clusterCel'+'lsCountByB'+'oundsSize:'+'\x20vec3f;\x0aun'+'iform\x20clus'+'terTexture'+'Size:\x20vec3'+'f;\x0auniform'+'\x20clusterBo'+'undsMin:\x20v'+'ec3f;\x0aunif'+'orm\x20cluste'+'rBoundsDel'+'ta:\x20vec3f;'+'\x0auniform\x20c'+'lusterCell'+'sDot:\x20vec3'+'f;\x0auniform'+'\x20clusterCe'+'llsMax:\x20ve'+('c3f;\x0aunifo'+'rm\x20shadowA'+'tlasParams'+':\x20vec2f;\x0a\x0a'+'//\x20structu'+'re\x20storing'+'\x20light\x20pro'+'perties\x20of'+'\x20a\x20cluster'+'ed\x20light\x0a/'+'/\x20it\x27s\x20sor'+'ted\x20to\x20hav'+'e\x20all\x20vect'+'ors\x20aligne'+'d\x20to\x204\x20flo'+'ats\x20to\x20lim'+'it\x20padding'+'\x0astruct\x20Cl'+'usterLight'+'Data\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x2032bit'+'\x20of\x20flags\x0a'+'\x20\x20\x20\x20flags:'+'\x20u32,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfWidth:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20isSpot:\x20'+'bool,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfHeight:'+'\x20vec3f,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20index\x0a\x20\x20'+'\x20\x20lightInd'+'ex:\x20i32,\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x0a\x20\x20'+'\x20\x20position'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sh'+'ape\x0a\x20\x20\x20\x20sh'+'ape:\x20u32,\x0a'+'\x0a\x20\x20\x20\x20//\x20wo'+'rld\x20space\x20'+'direction\x20'+'(spot\x20ligh'+'t\x20only)\x0a\x20\x20'+'\x20\x20directio'+'n:\x20vec3f,\x0a'+'\x0a\x20\x20\x20\x20//\x20li'+'ght\x20follow'+'\x20mode\x0a\x20\x20\x20\x20'+'falloffMod'+'eLinear:\x20b'+'ool,\x0a\x0a\x20\x20\x20\x20'+'//\x20color\x0a\x20'+'\x20\x20\x20color:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20//\x200.0\x20i'+'f\x20the\x20ligh'+'t\x20doesn\x27t\x20'+'cast\x20shado'+'ws\x0a\x20\x20\x20\x20sha'+'dowIntensi'+'ty:\x20f32,\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20omniAtl'+'asViewport'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20of\x20the\x20'+'light\x0a\x20\x20\x20\x20'+'range:\x20f32'+',\x0a\x0a\x20\x20\x20\x20//\x20'+'channel\x20ma'+'sk\x20-\x20one\x20o'+'f\x20the\x20chan'+'nels\x20has\x201'+',\x20the\x20othe')+('rs\x20are\x200\x0a\x20'+'\x20\x20\x20cookieC'+'hannelMask'+':\x20vec4f,\x0a\x0a'+'\x20\x20\x20\x20//\x20com'+'pressed\x20bi'+'ases,\x20two\x20'+'haf-floats'+'\x20stored\x20in'+'\x20a\x20float\x0a\x20'+'\x20\x20\x20biasesD'+'ata:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20bias\x20'+'values\x0a\x20\x20\x20'+'\x20shadowBia'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20shadowNo'+'rmalBias:\x20'+'f32,\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20a'+'nglesData:'+'\x20f32,\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20inner'+'\x20and\x20outer'+'\x20angle\x20cos'+'ine\x0a\x20\x20\x20\x20in'+'nerConeAng'+'leCos:\x20f32'+',\x0a\x20\x20\x20\x20oute'+'rConeAngle'+'Cos:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'tensity\x20of'+'\x20the\x20cooki'+'e\x0a\x20\x20\x20\x20cook'+'ieIntensit'+'y:\x20f32,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20mask\x0a\x20\x20\x20'+'\x20//float\x20m'+'ask;\x0a\x20\x20\x20\x20i'+'sDynamic:\x20'+'bool,\x0a\x20\x20\x20\x20'+'isLightmap'+'ped:\x20bool\x0a'+'}\x0a\x0a//\x20Note'+':\x20on\x20some\x20'+'devices\x20(t'+'ested\x20on\x20P'+'ixel\x203A\x20XL'+'),\x20this\x20ma'+'trix\x20when\x20'+'stored\x20ins'+'ide\x20the\x20li'+'ght\x20struct'+'\x20has\x20lower'+'\x20precision'+'\x20compared\x20'+'to\x0a//\x20when'+'\x20stored\x20ou'+'tside,\x20so\x20'+'we\x20store\x20i'+'t\x20outside\x20'+'to\x20avoid\x20s'+'pot\x20shadow'+'\x20flickerin'+'g.\x20This\x20mi'+'ght\x20need\x20t'+'o\x20be\x20done\x20'+'to\x20other\x20/'+'\x20all\x20membe'+'rs\x0a//\x20of\x20t'+'he\x20structu'+'re\x20if\x20furt'+'her\x20simila'+'r\x20issues\x20a'+'re\x20observe'+'d.\x0a\x0a//\x20sha'+'dow\x20(spot\x20'+'light\x20only'+')\x20/\x20cookie'+'\x20projectio'+'n\x20matrix\x0av'+'ar<private'+'>\x20lightPro'+'jectionMat'+'rix:\x20mat4x'+'4f;\x0a\x0afn\x20sa'+'mpleLightT'+'extureF(li'+'ghtIndex:\x20'+'i32,\x20index'+':\x20i32)\x20->\x20')+('vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20t'+'extureLoad'+'(lightsTex'+'ture,\x20vec2'+'<i32>(inde'+'x,\x20lightIn'+'dex),\x200);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightCore(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>,\x20'+'lightIndex'+':\x20f32)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20lig'+'ht\x20index\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'lightIndex'+'\x20=\x20i32(lig'+'htIndex);\x0a'+'\x0a\x20\x20\x20\x20//\x20sa'+'mple\x20data\x20'+'encoding\x20h'+'alf-float\x20'+'values\x20int'+'o\x2032bit\x20ui'+'nts\x0a\x20\x20\x20\x20le'+'t\x20halfData'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_COLO'+'R_ANGLES_B'+'IAS});\x0a\x0a\x20\x20'+'\x20\x20//\x20store'+'\x20floats\x20we'+'\x20decode\x20la'+'ter\x20as\x20nee'+'ded\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.angle'+'sData\x20=\x20ha'+'lfData.z;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.biasesDat'+'a\x20=\x20halfDa'+'ta.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20decomp'+'ress\x20color'+'\x20half-floa'+'ts\x0a\x20\x20\x20\x20let'+'\x20colorRG:\x20'+'vec2f\x20=\x20un'+'pack2x16fl'+'oat(bitcas'+'t<u32>(hal'+'fData.x));'+'\x0a\x20\x20\x20\x20let\x20c'+'olorB_:\x20ve'+'c2f\x20=\x20unpa'+'ck2x16floa'+'t(bitcast<'+'u32>(halfD'+'ata.y));\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'color\x20=\x20ve'+'c3f(colorR'+'G,\x20colorB_'+'.x)\x20*\x20{LIG'+'HT_COLOR_D'+'IVIDER};\x0a\x0a'+'\x20\x20\x20\x20//\x20pos'+'ition\x20and\x20'+'range,\x20ful'+'l\x20floats\x0a\x20'+'\x20\x20\x20let\x20lig'+'htPosRange'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_POSI'+'TION_RANGE'+'});\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.posit')+('ion\x20=\x20ligh'+'tPosRange.'+'xyz;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.rang'+'e\x20=\x20lightP'+'osRange.w;'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'pot\x20direct'+'ion\x20&\x20flag'+'s\x20data\x0a\x20\x20\x20'+'\x20let\x20light'+'Dir_Flags:'+'\x20vec4f\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData.ligh'+'tIndex,\x20{C'+'LUSTER_TEX'+'TURE_DIREC'+'TION_FLAGS'+'});\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20directi'+'on\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.direct'+'ion\x20=\x20ligh'+'tDir_Flags'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x2032bit\x20'+'flags\x0a\x20\x20\x20\x20'+'let\x20flags_'+'uint:\x20u32\x20'+'=\x20bitcast<'+'u32>(light'+'Dir_Flags.'+'w);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20flags_u'+'int;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.isSp'+'ot\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2030u)'+')\x20!=\x200u;\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'shape\x20=\x20(f'+'lags_uint\x20'+'>>\x2028u)\x20&\x20'+'0x3u;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.fal'+'loffModeLi'+'near\x20=\x20(fl'+'ags_uint\x20&'+'\x20(1u\x20<<\x2027'+'u))\x20==\x200u;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.shadowIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x200'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.cookieIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x208'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.isDynami'+'c\x20=\x20(flags'+'_uint\x20&\x20(1'+'u\x20<<\x2022u))'+'\x20!=\x200u;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sLightmapp'+'ed\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2021u)'+')\x20!=\x200u;\x0a}'+'\x0a\x0afn\x20decod'+'eClusterLi'+'ghtSpot(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{')+('\x0a\x20\x20\x20\x20//\x20sp'+'ot\x20light\x20c'+'os\x20angles\x0a'+'\x20\x20\x20\x20let\x20an'+'gles:\x20vec2'+'f\x20=\x20unpack'+'2x16float('+'bitcast<u3'+'2>(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'OmniAtlasV'+'iewport(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.omniAtla'+'sViewport\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData.l'+'ightIndex,'+'\x20{CLUSTER_'+'TEXTURE_PR'+'OJ_MAT_0})'+'.xyz;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'AreaData(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>)\x20'+'{\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.halfWid'+'th\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a.lightInd'+'ex,\x20{CLUST'+'ER_TEXTURE'+'_AREA_DATA'+'_WIDTH}).x'+'yz;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.halfH'+'eight\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data.light'+'Index,\x20{CL'+'USTER_TEXT'+'URE_AREA_D'+'ATA_HEIGHT'+'}).xyz;\x0a}\x0a'+'\x0afn\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(cluster'+'LightData:'+'\x20ptr<funct'+'ion,\x20Clust'+'erLightDat'+'a>)\x20{\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'matrix\x0a\x20\x20\x20'+'\x20let\x20m0:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_0});\x0a\x20\x20\x20'+'\x20let\x20m1:\x20v')+('ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_1});\x0a\x20\x20\x20'+'\x20let\x20m2:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_2});\x0a\x20\x20\x20'+'\x20let\x20m3:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4x'+'4f(m0,\x20m1,'+'\x20m2,\x20m3);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightShadow'+'Data(clust'+'erLightDat'+'a:\x20ptr<fun'+'ction,\x20Clu'+'sterLightD'+'ata>)\x20{\x0a\x20\x20'+'\x20\x20//\x20shado'+'w\x20biases\x0a\x20'+'\x20\x20\x20let\x20bia'+'ses:\x20vec2f'+'\x20=\x20unpack2'+'x16float(b'+'itcast<u32'+'>(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'fn\x20decodeC'+'lusterLigh'+'tCookieDat'+'a(clusterL'+'ightData:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20extract'+'\x20channel\x20m'+'ask\x20from\x20f'+'lags\x0a\x20\x20\x20\x20l'+'et\x20cookieF'+'lags:\x20u32\x20'+'=\x20(cluster'+'LightData.'+'flags\x20>>\x202'+'3u)\x20&\x200x0F'+'u;\x20\x20//\x204bi'+'ts,\x20each\x20b'+'it\x20enables'+'\x20a\x20channel'+'\x0a\x20\x20\x20\x20let\x20m'+'ask_uvec:\x20'+'vec4<u32>\x20'+'=\x20vec4<u32'+'>(cookieFl'+'ags)\x20&\x20vec'+'4<u32>(1u,'+'\x202u,\x204u,\x208'+'u);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eChannelMa'+'sk\x20=\x20step('+'vec4f(1.0)')+(',\x20vec4f(ma'+'sk_uvec));'+'\x20//\x20Normal'+'ize\x20to\x200.0'+'\x20or\x201.0\x0a}\x0a'+'\x0afn\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20light:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>,\x0a\x20\x20\x20\x20wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20reflectio'+'nDir:\x20vec3'+'f,\x0a#if\x20def'+'ined(LIT_C'+'LEARCOAT)\x0a'+'\x20\x20\x20\x20clearc'+'oatReflect'+'ionDir:\x20ve'+'c3f,\x0a#endi'+'f\x0a\x20\x20\x20\x20glos'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20specular'+'ity:\x20vec3f'+',\x0a\x20\x20\x20\x20geom'+'etricNorma'+'l:\x20vec3f,\x0a'+'\x20\x20\x20\x20tbn:\x20m'+'at3x3f,\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a#e'+'ndif\x0a\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20clearco'+'at_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20s'+'heen_gloss'+':\x20f32,\x0a\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty:\x20f32\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ve'+'c3f(1.0);\x0a'+'\x20\x20\x20\x20var\x20di'+'ffuseAtten'+'uation:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20var\x20fal'+'loffAttenu'+'ation:\x20f32'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20omni\x20'+'part\x20of\x20th'+'e\x20light\x0a\x20\x20'+'\x20\x20let\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(l'+'ight.posit'+'ion);\x0a\x20\x20\x20\x20'+'let\x20lightD'+'irNormW:\x20v'+'ec3f\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20')+('handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20=\x20g'+'etFalloffL'+'inear(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'falloffAtt'+'enuation\x20='+'\x20getFallof'+'fInvSquare'+'d(light.ra'+'nge,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20if'+'\x20(falloffA'+'ttenuation'+'\x20>\x200.00001'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_AR'+'EALIGHTS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20!=\x20{LI'+'GHTSHAPE_P'+'UNCTUAL})\x20'+'{\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20handle\x20l'+'ight\x20shape'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20='+'=\x20{LIGHTSH'+'APE_RECT})'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getRectLig'+'htDiffuse('+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'W,\x20lightDi'+'rNormW)\x20*\x20'+'16.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20diffuseAt'+'tenuation\x20'+'=\x20getDiskL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x20{\x20/'+'/\x20sphere\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getS'+'phereLight'+'Diffuse(wo'+'rldNormal,'+'\x20viewDir,\x20'+'lightDirW,'+'\x20lightDirN'+'ormW)\x20*\x2016'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNormW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.is'+'Spot)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'decodeClus'+'terLightSp'+'ot(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getSp'+'otEffect(l'+'ight.direc'+'tion,\x20ligh'+'t.innerCon'+'eAngleCos,'+'\x20light.out'+'erConeAngl'+'eCos,\x20ligh'+'tDirNormW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(CLUSTER'+'_COOKIES)\x20'+'||\x20defined'+'(CLUSTER_S'+'HADOWS)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(falloffAt'+'tenuation\x20'+'>\x200.00001)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'hadow\x20/\x20co')+('okie\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'dowIntensi'+'ty\x20>\x200.0\x20|'+'|\x20light.co'+'okieIntens'+'ity\x20>\x200.0)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20shared\x20'+'shadow\x20/\x20c'+'ookie\x20data'+'\x20depends\x20o'+'n\x20light\x20ty'+'pe\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.i'+'sSpot)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ecodeClust'+'erLightPro'+'jectionMat'+'rixData(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20decodeClu'+'sterLightO'+'mniAtlasVi'+'ewport(lig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'TextureRes'+'olution:\x20f'+'32\x20=\x20unifo'+'rm.shadowA'+'tlasParams'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'EdgePixels'+':\x20f32\x20=\x20un'+'iform.shad'+'owAtlasPar'+'ams.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_C'+'OOKIES\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'cookieInte'+'nsity\x20>\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(light)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'!!!!!!!!!!'+'!\x20TEXTURE_'+'PASS\x20likel'+'y\x20needs\x20sa'+'mpler.\x20Ass'+'uming\x20cook'+'ieAtlasTex'+'tureSample'+'r\x20exists.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20cookie'+'Attenuatio'+'n\x20=\x20getCoo'+'kie2DClust'+'ered(cooki'+'eAtlasText'+'ure,\x20cooki'+'eAtlasText'+'ureSampler'+',\x20lightPro'+'jectionMat'+'rix,\x20vPosi'+'tionW,\x20lig')+('ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20!!!!!!!!'+'!!!\x20TEXTUR'+'E_PASS\x20lik'+'ely\x20needs\x20'+'sampler.\x20A'+'ssuming\x20co'+'okieAtlasT'+'extureSamp'+'ler\x20exists'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cook'+'ieAttenuat'+'ion\x20=\x20getC'+'ookieCubeC'+'lustered(c'+'ookieAtlas'+'Texture,\x20c'+'ookieAtlas'+'TextureSam'+'pler,\x20ligh'+'tDirW,\x20lig'+'ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask,\x20shado'+'wTextureRe'+'solution,\x20'+'shadowEdge'+'Pixels,\x20li'+'ght.omniAt'+'lasViewpor'+'t);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20CLUSTER_'+'SHADOWS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'adow\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(light'+'.shadowInt'+'ensity\x20>\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightShadow'+'Data(light'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowParams'+':\x20vec4f\x20=\x20'+'vec4f(shad'+'owTextureR'+'esolution,'+'\x20light.sha'+'dowNormalB'+'ias,\x20light'+'.shadowBia'+'s,\x201.0\x20/\x20l'+'ight.range'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot\x20sha'+'dow\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20shadowCo'+'ord:\x20vec3f'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat')+('rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20!!!!!'+'!!!!!!\x20SHA'+'DOWMAP_PAS'+'S\x20needs\x20te'+'xture\x20and\x20'+'sampler_co'+'mparison.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20!!!'+'!!!!!!!!\x20S'+'hadow\x20func'+'tions\x20need'+'\x20update\x20fo'+'r\x20WGSL\x20tex'+'tureSample'+'Compare\x20et'+'c.\x20Assumin'+'g\x20these\x20ar'+'e\x20handled\x20'+'in\x20include'+'s.\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'SpotCluste'+'redPCF1(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadow:\x20f32'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF3('+'shadowAtla'+'sTexture,\x20'+'shadowAtla'+'sTextureSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadow:\x20f'+'32\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'5(shadowAt'+'lasTexture'+',\x20shadowAt'+'lasTexture'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCSS)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l')+('et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CSS(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20fallo'+'ffAttenuat'+'ion\x20*\x20mix('+'1.0,\x20shado'+'w,\x20light.s'+'hadowInten'+'sity);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20omni\x20'+'shadow\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalOffset'+'PointShado'+'w(shadowPa'+'rams,\x20ligh'+'t.position'+',\x20lightDir'+'W,\x20lightDi'+'rNormW,\x20ge'+'ometricNor'+'mal);\x20\x20//\x20'+'normalBias'+'\x20adjusted\x20'+'for\x20distan'+'ce\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20!!!!!!!!!'+'!!\x20SHADOWM'+'AP_PASS\x20ne'+'eds\x20textur'+'e\x20and\x20samp'+'ler_compar'+'ison.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20!!!!!!!'+'!!!!\x20Shado'+'w\x20function'+'s\x20need\x20upd'+'ate\x20for\x20WG'+'SL\x20texture'+'SampleComp'+'are\x20etc.\x20A'+'ssuming\x20th'+'ese\x20are\x20ha'+'ndled\x20in\x20i'+'ncludes.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCF1)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowOmni'+'ClusteredP'+'CF1(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowPar'+'ams,\x20light'+'.omniAtlas'+'Viewport,\x20'+'shadowEdge'+'Pixels,\x20di'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20getSha'+'dowOmniClu'+'steredPCF3'+'(shadowAtl'+'asTexture,'+'\x20shadowAtl'+'asTextureS'+'ampler,\x20sh'+'adowParams'+',\x20light.om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'OmniCluste'+'redPCF5(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20areaDif'+'fuse:\x20vec3'+'f\x20=\x20(diffu'+'seAttenuat'+'ion\x20*\x20fall'+'offAttenua'+'tion)\x20*\x20li')+('ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaDi'+'ffuse\x20=\x20mi'+'x(areaDiff'+'use,\x20vec3f'+'(0.0),\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20diff'+'use\x20-\x20it\x20d'+'oes\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20areaDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20areaL'+'ightSpecul'+'ar:\x20f32;\x20/'+'/\x20Use\x20var\x20'+'because\x20as'+'signed\x20in\x20'+'if/else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_RECT'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getRe'+'ctLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20if\x20(ligh'+'t.shape\x20=='+'\x20{LIGHTSHA'+'PE_DISK})\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecular\x20'+'=\x20getDiskL'+'ightSpecul'+'ar(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x20//\x20sphere'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20areaLight'+'Specular\x20='+'\x20getSphere'+'LightSpecu')+('lar(worldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20dLTC'+'SpecFres\x20*'+'\x20areaLight'+'Specular\x20*'+'\x20falloffAt'+'tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sp'+'ecular\x20cle'+'ar\x20coat\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20areaLigh'+'tSpecularC'+'C:\x20f32;\x20//'+'\x20Use\x20var\x20b'+'ecause\x20ass'+'igned\x20in\x20i'+'f/else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20==\x20{LI'+'GHTSHAPE_R'+'ECT})\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecularC'+'C\x20=\x20getRec'+'tLightSpec'+'ular(clear'+'coat_world'+'Normal,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecularCC\x20='+'\x20getDiskLi'+'ghtSpecula'+'r(clearcoa'+'t_worldNor'+'mal,\x20viewD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20{\x20//\x20sph'+'ere\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getSphereL'+'ightSpecul'+'ar(clearco'+'at_worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'cSpecularL'+'ight\x20=\x20ccS'+'pecularLig'+'ht\x20+\x20ccLTC'+'SpecFres\x20*'+'\x20areaLight'+'SpecularCC'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20\x20*\x20c'+'ookieAtten')+('uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20punctual'+'\x20light\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20p'+'unctualDif'+'fuse:\x20vec3'+'f\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_AREAL'+'IGHTS)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'unctualDif'+'fuse\x20=\x20mix'+'(punctualD'+'iffuse,\x20ve'+'c3f(0.0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20=\x20dDiffus'+'eLight\x20+\x20p'+'unctualDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Dir:\x20vec3f'+'\x20=\x20normali'+'ze(-lightD'+'irNormW\x20+\x20'+'viewDir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specular\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR_FRESN'+'EL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20=\x20'+'dSpecularL'+'ight\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD')+('ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20halfD'+'ir),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecularity\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'=\x20ccSpecul'+'arLight\x20+\x20'+'getLightSp'+'ecular(hal'+'fDir,\x20clea'+'rcoatRefle'+'ctionDir,\x20'+'clearcoat_'+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'NormW,\x20cle'+'arcoat_glo'+'ss,\x20tbn)\x20*'+'\x20falloffAt')+('tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion\x20*\x20getF'+'resnelCC(d'+'ot(viewDir'+',\x20halfDir)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20='+'\x20ccSpecula'+'rLight\x20+\x20g'+'etLightSpe'+'cular(half'+'Dir,\x20clear'+'coatReflec'+'tionDir,\x20c'+'learcoat_w'+'orldNormal'+',\x20viewDir,'+'\x20lightDirN'+'ormW,\x20clea'+'rcoat_glos'+'s,\x20tbn)\x20*\x20'+'falloffAtt'+'enuation\x20*'+'\x20light.col'+'or\x20*\x20cooki'+'eAttenuati'+'on;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'+\x20getLight'+'SpecularSh'+'een(halfDi'+'r,\x20worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'sheen_glos'+'s)\x20*\x20fallo'+'ffAttenuat'+'ion\x20*\x20ligh'+'t.color\x20*\x20'+'cookieAtte'+'nuation;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20Writ'+'e\x20to\x20globa'+'l\x20attenuat'+'ion\x20values'+'\x20(for\x20ligh'+'tmapper)\x0a\x20'+'\x20\x20\x20dAtten\x20'+'=\x20falloffA'+'ttenuation'+';\x0a\x20\x20\x20\x20dLig'+'htDirNormW'+'\x20=\x20lightDi'+'rNormW;\x0a}\x0a'+'\x0a\x0afn\x20evalu'+'ateCluster'+'Light(\x0a\x20\x20\x20'+'\x20lightInde'+'x:\x20f32,\x0a\x20\x20'+'\x20\x20worldNor'+'mal:\x20vec3f'+',\x0a\x20\x20\x20\x20view'+'Dir:\x20vec3f'+',\x0a\x20\x20\x20\x20refl'+'ectionDir:'+'\x20vec3f,\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20c'+'learcoatRe'+'flectionDi'+'r:\x20vec3f,\x0a'+'#endif\x0a\x20\x20\x20')+('\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20geometric'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20t'+'bn:\x20mat3x3'+'f,\x0a#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20clearc'+'oat_worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20cl'+'earcoat_gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20sheen_'+'gloss:\x20f32'+',\x0a\x20\x20\x20\x20irid'+'escence_in'+'tensity:\x20f'+'32\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20decod'+'e\x20core\x20lig'+'ht\x20data\x20fr'+'om\x20texture'+'s\x0a\x20\x20\x20\x20var\x20'+'clusterLig'+'htData:\x20Cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(&cluste'+'rLightData'+',\x20lightInd'+'ex);\x0a\x0a\x20\x20\x20\x20'+'//\x20evaluat'+'e\x20light\x20if'+'\x20it\x20uses\x20a'+'ccepted\x20li'+'ght\x20mask\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'acceptLigh'+'tMask:\x20boo'+'l\x20=\x20cluste'+'rLightData'+'.isDynamic'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20accept'+'LightMask:'+'\x20bool\x20=\x20cl'+'usterLight'+'Data.isLig'+'htmapped;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'acceptLigh'+'tMask)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20eva'+'luateLight'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20&clust'+'erLightDat'+'a,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'viewDir,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20reflectio'+'nDir,\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20geometri'+'cNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20tbn,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE')+('NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_worl'+'dNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'sheen_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a\x0a\x0afn'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20world'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20v'+'iewDir:\x20ve'+'c3f,\x0a\x20\x20\x20\x20r'+'eflectionD'+'ir:\x20vec3f,'+'\x0a#if\x20defin'+'ed(LIT_CLE'+'ARCOAT)\x0a\x20\x20'+'\x20\x20clearcoa'+'tReflectio'+'nDir:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'specularit'+'y:\x20vec3f,\x0a'+'\x20\x20\x20\x20geomet'+'ricNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20tbn:\x20mat'+'3x3f,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a#end'+'if\x0a\x20\x20\x20\x20cle'+'arcoat_wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20clearcoat'+'_gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20she'+'en_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20i'+'ridescence'+'_intensity'+':\x20f32\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20sk'+'ip\x20lights\x20'+'if\x20no\x20ligh'+'ts\x20at\x20all\x0a'+'\x20\x20\x20\x20if\x20(un'+'iform.clus'+'terSkip\x20>\x20'+'0.5)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x20to'+'\x203d\x20intege'+'r\x20cell\x20cor'+'dinates\x20in'+'\x20the\x20clust'+'er\x20structu'+'re\x0a\x20\x20\x20\x20let'+'\x20cellCoord'+'s:\x20vec3f\x20='+'\x20floor((vP'+'ositionW\x20-'+'\x20uniform.c'+'lusterBoun'+'dsMin)\x20*\x20u'+'niform.clu'+'sterCellsC'+'ountByBoun'+'dsSize);\x0a\x0a'+'\x20\x20\x20\x20//\x20no\x20'+'lighting\x20w'+'hen\x20cell\x20c'+'oordinate\x20'+'is\x20out\x20of\x20'+'range\x0a\x20\x20\x20\x20'+'if\x20(!(any('+'cellCoords')+('\x20<\x20vec3f(0'+'.0))\x20||\x20an'+'y(cellCoor'+'ds\x20>=\x20unif'+'orm.cluste'+'rCellsMax)'+'))\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cel'+'l\x20index\x20(m'+'apping\x20fro'+'m\x203d\x20cell\x20'+'coordinate'+'s\x20to\x20linea'+'r\x20memory)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20cellInde'+'x:\x20f32\x20=\x20d'+'ot(uniform'+'.clusterCe'+'llsDot,\x20ce'+'llCoords);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20convert'+'\x20cell\x20inde'+'x\x20to\x20uv\x20co'+'ordinates\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20clusterV'+':\x20f32\x20=\x20fl'+'oor(cellIn'+'dex\x20*\x20unif'+'orm.cluste'+'rTextureSi'+'ze.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20c'+'lusterU:\x20f'+'32\x20=\x20cellI'+'ndex\x20-\x20(cl'+'usterV\x20*\x20u'+'niform.clu'+'sterTextur'+'eSize.x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20loop\x20ove'+'r\x20maximum\x20'+'number\x20of\x20'+'light\x20cell'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'for\x20(var\x20l'+'ightCellIn'+'dex:\x20i32\x20='+'\x200;\x20lightC'+'ellIndex\x20<'+'\x20uniform.c'+'lusterMaxC'+'ells;\x20ligh'+'tCellIndex'+'\x20=\x20lightCe'+'llIndex\x20+\x20'+'1)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20using\x20a\x20s'+'ingle\x20chan'+'nel\x20textur'+'e\x20with\x20dat'+'a\x20in\x20red\x20c'+'hannel\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20lightIn'+'dexPacked:'+'\x20f32\x20=\x20tex'+'tureLoad(c'+'lusterWorl'+'dTexture,\x20'+'vec2<i32>('+'i32(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20i32(clus'+'terV)),\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(lightInde'+'xPacked\x20<='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20break;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ev'+'aluateClus'+'terLight(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tIndexPack'+'ed\x20*\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20vie'+'wDir,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'eometricNo'+'rmal,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20tbn,\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coat_world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20clearc'+'oat_gloss,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20she'+'en_gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a}'),N2='\x0afn\x20combin'+'eColor(alb'+'edo:\x20vec3f'+',\x20sheenSpe'+'cularity:\x20'+'vec3f,\x20cle'+'arcoatSpec'+'ularity:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20ret:\x20ve'+'c3f\x20=\x20vec3'+'f(0.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ret\x20=\x20'+'ret\x20+\x20((dD'+'iffuseLigh'+'t\x20-\x20unifor'+'m.light_gl'+'obalAmbien'+'t)\x20*\x20albed'+'o\x20+\x20unifor'+'m.material'+'_ambient\x20*'+'\x20uniform.l'+'ight_globa'+'lAmbient);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(albedo\x20*'+'\x20dDiffuseL'+'ight);\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_OLD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20dSpecular'+'Light;\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(dReflect'+'ion.rgb\x20*\x20'+'dReflectio'+'n.a);\x0a\x20\x20\x20\x20'+'#endif\x20//\x20'+'LIT_REFLEC'+'TIONS\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'sheenScali'+'ng:\x20f32\x20=\x20'+'1.0\x20-\x20max('+'max(sheenS'+'pecularity'+'.r,\x20sheenS'+'pecularity'+'.g),\x20sheen'+'Specularit'+'y.b)\x20*\x200.1'+'57;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20sheenS'+'caling\x20+\x20('+'sSpecularL'+'ight\x20+\x20sRe'+'flection.r'+'gb)\x20*\x20shee'+'nSpeculari'+'ty;\x0a\x20\x20\x20\x20#e'+'ndif\x20//\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20clear'+'CoatScalin'+'g:\x20f32\x20=\x201'+'.0\x20-\x20ccFre'+'snel\x20*\x20cle'+'arcoatSpec'+'ularity;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'\x20=\x20ret\x20*\x20c'+'learCoatSc'+'aling\x20+\x20(c'+'cSpecularL'+'ight\x20+\x20ccR'+'eflection)'+('\x20*\x20clearco'+'atSpecular'+'ity;\x0a\x20\x20\x20\x20#'+'endif\x20//\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20re'+'turn\x20ret;\x0a'+'}\x0a'),k2='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x0a\x20\x20\x20\x20'+'var\x20blitTe'+'xture:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20blitText'+'ureSampler'+'\x20:\x20sampler'+';\x0a\x0a\x20\x20\x20\x20@fr'+'agment\x0a\x20\x20\x20'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20t'+'extureSamp'+'le(blitTex'+'ture,\x20blit'+'TextureSam'+'pler,\x20inpu'+'t.uv0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20}\x0a',U2='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20u'+'niform\x20inv'+'ViewProj:\x20'+'mat4x4<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'re:\x20textur'+'e_cube<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'reSampler\x20'+':\x20sampler;'+'\x0a\x0a\x20\x20\x20\x20@fra'+'gment\x0a\x20\x20\x20\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20pro'+'jPos\x20=\x20vec'+'4f(input.u'+'v0\x20*\x202.0\x20-'+'\x201.0,\x200.5,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20w'+'orldPos\x20=\x20'+'uniform.in'+'vViewProj\x20'+'*\x20projPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20textur'+'eSample(bl'+'itTexture,'+'\x20blitTextu'+'reSampler,'+'\x20worldPos.'+'xyz);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20}\x0a',B2='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.uv0.y'+'\x20=\x201.0\x20-\x20o'+'utput.uv0.'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',z2='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMin:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMax:\x20v'+'ec3f;\x0a#end'+'if\x0a\x0afn\x20cub'+'eMapProjec'+'t(nrdir:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20cubeMapR'+'otate(nrdi'+'r);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIT_CU'+'BEMAP_PROJ'+'ECTION\x20==\x20'+'BOX\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20nrd'+'ir_rotated'+':\x20vec3f\x20=\x20'+'cubeMapRot'+'ate(nrdir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20rbmax'+':\x20vec3f\x20=\x20'+'(uniform.e'+'nvBoxMax\x20-'+'\x20vPosition'+'W)\x20/\x20nrdir'+'_rotated;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20rbmin:\x20v'+'ec3f\x20=\x20(un'+'iform.envB'+'oxMin\x20-\x20vP'+'ositionW)\x20'+'/\x20nrdir_ro'+'tated;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'rbminmax:\x20'+'vec3f\x20=\x20se'+'lect(rbmin'+',\x20rbmax,\x20n'+'rdir_rotat'+'ed\x20>\x20vec3f'+'(0.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'fa:\x20f32\x20=\x20'+'min(min(rb'+'minmax.x,\x20'+'rbminmax.y'+'),\x20rbminma'+'x.z);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20p'+'osonbox:\x20v'+'ec3f\x20=\x20vPo'+'sitionW\x20+\x20'+'nrdir_rota'+'ted\x20*\x20fa;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20envBoxPo'+'s:\x20vec3f\x20='+'\x20(uniform.'+'envBoxMin\x20'+'+\x20uniform.'+'envBoxMax)'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20normali'+'ze(posonbo'+'x\x20-\x20envBox'+'Pos);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',V2='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20cubeMap'+'RotationMa'+'trix:\x20mat3'+'x3f;\x0a#endi'+'f\x0a\x0afn\x20cube'+'MapRotate('+'refDir:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a#ifd'+'ef\x20CUBEMAP'+'_ROTATION\x0a'+'\x20\x20\x20\x20return'+'\x20refDir\x20*\x20'+'uniform.cu'+'beMapRotat'+'ionMatrix;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir;\x0a#end'+'if\x0a}\x0a',G2='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0aoutp'+'ut.color\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0aoutput.co'+'lor\x20=\x20vec4'+'f(litArgs_'+'albedo\x20,\x201'+'.0);\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'DEBUG_WORL'+'D_NORMAL_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(litAr'+'gs_worldNo'+'rmal\x20*\x200.5'+'\x20+\x200.5,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_OPACI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_opacity'+')\x20,\x201.0);\x0a'+'#endif\x0a\x0a#i'+'fdef\x20DEBUG'+'_SPECULARI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(l'+'itArgs_spe'+'cularity,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_GLO'+'SS_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_gloss)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_M'+'ETALNESS_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(vec3f'+'(litArgs_m'+'etalness)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_A'+'O_PASS\x0aout'+'put.color\x20'+'=\x20vec4f(ve'+'c3f(litArg'+'s_ao)\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_EMISS'+'ION_PASS\x0ao'+'utput.colo'+'r\x20=\x20vec4f('+'gammaCorre'+'ctOutput(l'+'itArgs_emi'+'ssion),\x201.'+'0);\x0a#endif'+'\x0a',H2='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0a\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20v'+'ec3f(0.5);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0a#ifdef\x20VA'+'RYING_VUV0'+'\x0a\x20\x20\x20\x20litAr'+'gs_albedo\x20'+'=\x20vec3f(vU'+'v0,\x200.0);\x0a'+'#else\x0a\x20\x20\x20\x20'+'litArgs_al'+'bedo\x20=\x20vec'+'3f(0.0);\x0a#'+'endif\x0a#end'+'if\x0a',W2='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0afn\x20de'+'codeLinear'+'(raw:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20raw.r'+'gb;\x0a}\x0a\x0afn\x20'+'decodeGamm'+'aFloat(raw'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20pow'+'(raw,\x202.2)'+';\x0a}\x0a\x0afn\x20de'+'codeGamma3'+'(raw:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(r'+'aw,\x20vec3f('+'2.2));\x0a}\x0a\x0a'+'fn\x20decodeG'+'amma(raw:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow(raw.xyz'+',\x20vec3f(2.'+'2));\x0a}\x0a\x0afn'+'\x20decodeRGB'+'M(raw:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20color\x20='+'\x20(8.0\x20*\x20ra'+'w.a)\x20*\x20raw'+'.rgb;\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0afn\x20de'+'codeRGBP(r'+'aw:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20ra'+'w.rgb\x20*\x20(-'+'raw.a\x20*\x207.'+'0\x20+\x208.0);\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0af'+'n\x20decodeRG'+'BE(raw:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(vec3f('+'0.0),\x20raw.'+'xyz\x20*\x20pow('+'2.0,\x20raw.w'+'\x20*\x20255.0\x20-'+'\x20128.0),\x20r'+'aw.a\x20!=\x200.'+'0);\x0a}\x0a\x0afn\x20'+'passThroug'+'h(raw:\x20vec'+'4f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw;'+'\x0a}\x0a\x0afn\x20unp'+'ackNormalX'+'YZ(nmap:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20nm'+'ap.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'}\x0a\x0afn\x20unpa'+'ckNormalXY'+'(nmap:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20xy\x20=\x20nm'+'ap.wy\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'vec3f(xy,\x20'+'sqrt(1.0\x20-'+'\x20clamp(dot'+'(xy,\x20xy),\x20'+'0.0,\x201.0))'+');\x0a}\x0a\x0a#end'+'if\x0a',$2='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0afn\x20de'+'tailMode_m'+'ul(c1:\x20vec'+'3f,\x20c2:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20c1\x20'+'*\x20c2;\x0a}\x0a\x0af'+'n\x20detailMo'+'de_add(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20c1\x20+\x20c2;\x0a'+'}\x0a\x0a//\x20http'+'s://en.wik'+'ipedia.org'+'/wiki/Blen'+'d_modes#Sc'+'reen\x0afn\x20de'+'tailMode_s'+'creen(c1:\x20'+'vec3f,\x20c2:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'1.0\x20-\x20(1.0'+'\x20-\x20c1)*(1.'+'0\x20-\x20c2);\x0a}'+'\x0a\x0a//\x20https'+'://en.wiki'+'pedia.org/'+'wiki/Blend'+'_modes#Ove'+'rlay\x0afn\x20de'+'tailMode_o'+'verlay(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20mix(1.0\x20-'+'\x202.0\x20*\x20(1.'+'0\x20-\x20c1)*(1'+'.0\x20-\x20c2),\x20'+'2.0\x20*\x20c1\x20*'+'\x20c2,\x20step('+'c1,\x20vec3f('+'0.5)));\x0a}\x0a'+'\x0afn\x20detail'+'Mode_min(c'+'1:\x20vec3f,\x20'+'c2:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20min(c1,'+'\x20c2);\x0a}\x0a\x0af'+'n\x20detailMo'+'de_max(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(c1,\x20c'+'2);\x0a}\x0a\x0a#en'+'dif\x0a',X2='\x0auniform\x20m'+'aterial_di'+'ffuse:\x20vec'+'3f;\x0a\x0a#ifde'+'f\x20STD_DIFF'+'USEDETAIL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22detailMo'+'desPS\x22\x0a#en'+'dif\x0a\x0afn\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20unif'+'orm.materi'+'al_diffuse'+'.rgb;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoText'+'ure:\x20vec3f'+'\x20=\x20{STD_DI'+'FFUSE_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_DIFFU'+'SE_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'_TEXTURE_N'+'AME}Sample'+'r,\x20{STD_DI'+'FFUSE_TEXT'+'URE_UV},\x20u'+'niform.tex'+'tureBias))'+'.{STD_DIFF'+'USE_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoDeta'+'il:\x20vec3f\x20'+'=\x20{STD_DIF'+'FUSEDETAIL'+'_TEXTURE_D'+'ECODE}(tex'+'tureSample'+'Bias({STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_NAME},\x20{'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_DIFFU'+'SEDETAIL_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20=\x20dAlbe'+'do\x20*\x20albed'+'oTexture;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_DIF'+'FUSE_VERTE'+'X\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAlbedo\x20=\x20'+'dAlbedo\x20*\x20'+'gammaCorre'+'ctInputVec'+'3(saturate'+'3(vVertexC'+'olor.{STD_'+('DIFFUSE_VE'+'RTEX_CHANN'+'EL}));\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),q2='\x0auniform\x20m'+'aterial_em'+'issive:\x20ve'+'c3f;\x0aunifo'+'rm\x20materia'+'l_emissive'+'Intensity:'+'\x20f32;\x0a\x0afn\x20'+'getEmissio'+'n()\x20{\x0a\x20\x20\x20\x20'+'dEmission\x20'+'=\x20uniform.'+'material_e'+'missive\x20*\x20'+'uniform.ma'+'terial_emi'+'ssiveInten'+'sity;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_EMISSIVE'+'_TEXTURE\x0a\x20'+'\x20\x20\x20dEmissi'+'on\x20*=\x20{STD'+'_EMISSIVE_'+'TEXTURE_DE'+'CODE}(text'+'ureSampleB'+'ias({STD_E'+'MISSIVE_TE'+'XTURE_NAME'+'},\x20{STD_EM'+'ISSIVE_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_EMISSI'+'VE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias)).{S'+'TD_EMISSIV'+'E_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_VERT'+'EX\x0a\x20\x20\x20\x20dEm'+'ission\x20=\x20d'+'Emission\x20*'+'\x20gammaCorr'+'ectInputVe'+'c3(saturat'+'e3(vVertex'+'Color.{STD'+'_EMISSIVE_'+'VERTEX_CHA'+'NNEL}));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',j2='\x0afn\x20encode'+'Linear(sou'+'rce:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'source,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeGamm'+'a(source:\x20'+'vec3f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4f(pow(s'+'ource\x20+\x20ve'+'c3f(0.0000'+'001),\x20vec3'+'f(1.0\x20/\x202.'+'2)),\x201.0);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBM(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+'r\x20color:\x20v'+'ec3f\x20=\x20pow'+'(source,\x20v'+'ec3f(0.5))'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x201.0\x20/'+'\x208.0;\x0a\x0a\x20\x20\x20'+'\x20var\x20a:\x20f3'+'2\x20=\x20satura'+'te(max(max'+'(color.r,\x20'+'color.g),\x20'+'max(color.'+'b,\x201.0\x20/\x202'+'55.0)));\x0a\x20'+'\x20\x20\x20a\x20=\x20cei'+'l(a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20col'+'or\x20/=\x20a;\x0a\x20'+'\x20\x20\x20return\x20'+'vec4f(colo'+'r,\x20a);\x0a}\x0a\x0a'+'fn\x20encodeR'+'GBP(source'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20//\x20con'+'vert\x20incom'+'ing\x20linear'+'\x20to\x20gamma('+'ish)\x0a\x20\x20\x20\x20v'+'ar\x20gamma:\x20'+'vec3f\x20=\x20po'+'w(source,\x20'+'vec3f(0.5)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20the\x20maxim'+'um\x20compone'+'nt\x20clamped'+'\x20to\x201..8\x0a\x20'+'\x20\x20\x20var\x20max'+'Val:\x20f32\x20='+'\x20min(8.0,\x20'+'max(1.0,\x20m'+'ax(gamma.x'+',\x20max(gamm'+'a.y,\x20gamma'+'.z))));\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20stor'+'age\x20factor'+'\x0a\x20\x20\x20\x20var\x20v'+':\x20f32\x20=\x201.'+'0\x20-\x20((maxV'+'al\x20-\x201.0)\x20'+'/\x207.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20roun'+'d\x20the\x20valu'+'e\x20for\x20stor'+'age\x20in\x208bi'+'t\x20channel\x0a'+'\x20\x20\x20\x20v\x20=\x20ce'+'il(v\x20*\x20255'+'.0)\x20/\x20255.'+'0;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(gamma\x20/\x20('+'-v\x20*\x207.0\x20+'+'\x208.0),\x20v);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBE(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+('r\x20maxVal:\x20'+'f32\x20=\x20max('+'source.x,\x20'+'max(source'+'.y,\x20source'+'.z));\x0a\x20\x20\x20\x20'+'if\x20(maxVal'+'\x20<\x201e-32)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+':\x20f32\x20=\x20ce'+'il(log2(ma'+'xVal));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(s'+'ource\x20/\x20po'+'w(2.0,\x20e),'+'\x20(e\x20+\x20128.'+'0)\x20/\x20255.0'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a'),Y2='\x0a\x20\x20\x20\x20var\x20f'+'inalRgb:\x20v'+'ec3f\x20=\x20com'+'bineColor('+'litArgs_al'+'bedo,\x20litA'+'rgs_sheen_'+'specularit'+'y,\x20litArgs'+'_clearcoat'+'_speculari'+'ty);\x0a\x0a\x20\x20\x20\x20'+'finalRgb\x20='+'\x20finalRgb\x20'+'+\x20litArgs_'+'emission;\x0a'+'\x20\x20\x20\x20finalR'+'gb\x20=\x20addFo'+'g(finalRgb'+');\x0a\x20\x20\x20\x20fin'+'alRgb\x20=\x20to'+'neMap(fina'+'lRgb);\x0a\x20\x20\x20'+'\x20finalRgb\x20'+'=\x20gammaCor'+'rectOutput'+'(finalRgb)'+';\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(fin'+'alRgb,\x20out'+'put.color.'+'a);\x0a',K2='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20atla'+'sSize\x20:\x20f3'+'2\x20=\x20512.0;'+'\x0aconst\x20sea'+'mSize\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0afn\x20mapU'+'v(uv\x20:\x20vec'+'2f,\x20rect\x20:'+'\x20vec4f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec2f(mix('+'rect.x\x20+\x20s'+'eamSize,\x20r'+'ect.x\x20+\x20re'+'ct.z\x20-\x20sea'+'mSize,\x20uv.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20mix(rect.'+'y\x20+\x20seamSi'+'ze,\x20rect.y'+'\x20+\x20rect.w\x20'+'-\x20seamSize'+',\x20uv.y));\x0a'+'}\x0a\x0a//\x20map\x20'+'a\x20normaliz'+'ed\x20equirec'+'t\x20UV\x20and\x20r'+'oughness\x20l'+'evel\x20to\x20th'+'e\x20correct\x20'+'atlas\x20rect'+'.\x0afn\x20mapRo'+'ughnessUv('+'uv\x20:\x20vec2f'+',\x20level\x20:\x20'+'f32)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20t\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'exp2(level'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mapUv('+'uv,\x20vec4f('+'0.0,\x201.0\x20-'+'\x20t,\x20t,\x20t\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20map\x20sh'+'iny\x20level\x20'+'UV\x0afn\x20mapS'+'hinyUv(uv\x20'+':\x20vec2f,\x20l'+'evel\x20:\x20f32'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20t\x20:\x20f32\x20='+'\x201.0\x20/\x20exp'+'2(level);\x0a'+'\x20\x20\x20\x20return'+'\x20mapUv(uv,'+'\x20vec4f(1.0'+'\x20-\x20t,\x201.0\x20'+'-\x20t,\x20t,\x20t\x20'+'*\x200.5));\x0a}'+'\x0a\x0a#endif\x0a',Z2='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20skyboxInt'+'ensity\x20:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20proce'+'ssEnvironm'+'ent(color\x20'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20unifo'+'rm.skyboxI'+'ntensity;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',Q2='\x0afn\x20getFal'+'loffWindow'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20sqrDist'+':\x20f32\x20=\x20do'+'t(lightDir'+',\x20lightDir'+');\x0a\x20\x20\x20\x20let'+'\x20invRadius'+':\x20f32\x20=\x201.'+'0\x20/\x20lightR'+'adius;\x0a\x20\x20\x20'+'\x20return\x20sq'+'uare(satur'+'ate(1.0\x20-\x20'+'square(sqr'+'Dist\x20*\x20squ'+'are(invRad'+'ius))));\x0a}'+'\x0a\x0afn\x20getFa'+'lloffInvSq'+'uared(ligh'+'tRadius:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20sq'+'rDist:\x20f32'+'\x20=\x20dot(lig'+'htDir,\x20lig'+'htDir);\x0a\x20\x20'+'\x20\x20var\x20fall'+'off:\x20f32\x20='+'\x201.0\x20/\x20(sq'+'rDist\x20+\x201.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20invRadiu'+'s:\x20f32\x20=\x201'+'.0\x20/\x20light'+'Radius;\x0a\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x20square('+'saturate(1'+'.0\x20-\x20squar'+'e(sqrDist\x20'+'*\x20square(i'+'nvRadius))'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20fall'+'off;\x0a}\x0a',J2='\x0afn\x20getFal'+'loffLinear'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20length(l'+'ightDir);\x0a'+'\x20\x20\x20\x20return'+'\x20max(((lig'+'htRadius\x20-'+'\x20d)\x20/\x20ligh'+'tRadius),\x20'+'0.0);\x0a}\x0a',eM='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x20re'+'presentati'+'on\x20(0.0-1.'+'0\x20range)\x0af'+'n\x20float2ui'+'nt(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20intBit'+'s\x20=\x20bitcas'+'t<u32>(val'+'ue);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20f32((intB'+'its\x20>>\x2024u'+')\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((intBi'+'ts\x20>>\x2016u)'+'\x20&\x200xffu),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((intBit'+'s\x20>>\x208u)\x20&'+'\x200xffu),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20f32'+'(intBits\x20&'+'\x200xffu)\x0a\x20\x20'+'\x20\x20)\x20/\x20255.'+'0;\x0a}\x0a\x0a//\x20d'+'ecode\x20RGBA'+'8\x20value\x20to'+'\x20float\x0afn\x20'+'uint2float'+'(value:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20rgba_u32'+'\x20=\x20vec4<u3'+'2>(value\x20*'+'\x20255.0);\x0a\x20'+'\x20\x20\x20let\x20int'+'Bits:\x20u32\x20'+'=\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'r\x20<<\x2024u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'g\x20<<\x2016u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'b\x20<<\x208u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20rgba_u32.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20bitcas'+'t<f32>(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0af'+'n\x20float2ve'+'c4(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CAPS_TEX'+'TURE_FLOAT'+'_RENDERABL'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(value,'+'\x201.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20float2ui'+'nt(value);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0a#endi'+'f\x20//\x20FLOAT'+'_AS_UINT\x0a',tM='\x0a\x0avar<priv'+'ate>\x20dBlen'+'dModeFogFa'+'ctor\x20:\x20f32'+'\x20=\x201.0;\x0a\x0a#'+'if\x20(FOG\x20!='+'\x20NONE)\x0a\x20\x20\x20'+'\x20uniform\x20f'+'og_color\x20:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20fog_sta'+'rt\x20:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20fog_'+'end\x20:\x20f32;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20fog'+'_density\x20:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afn\x20ge'+'tFogFactor'+'()\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20depth\x20=\x20p'+'cPosition.'+'z\x20/\x20pcPosi'+'tion.w;\x0a\x0a\x20'+'\x20\x20\x20var\x20fog'+'Factor\x20:\x20f'+'32\x20=\x200.0;\x0a'+'\x0a\x20\x20\x20\x20#if\x20('+'FOG\x20==\x20LIN'+'EAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20(unif'+'orm.fog_en'+'d\x20-\x20depth)'+'\x20/\x20(unifor'+'m.fog_end\x20'+'-\x20uniform.'+'fog_start)'+';\x0a\x20\x20\x20\x20#eli'+'f\x20(FOG\x20==\x20'+'EXP)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20exp(-'+'depth\x20*\x20un'+'iform.fog_'+'density);\x0a'+'\x20\x20\x20\x20#elif\x20'+'(FOG\x20==\x20EX'+'P2)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fogFacto'+'r\x20=\x20exp(-d'+'epth\x20*\x20dep'+'th\x20*\x20unifo'+'rm.fog_den'+'sity\x20*\x20uni'+'form.fog_d'+'ensity);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(fo'+'gFactor,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0afn\x20addF'+'og(color\x20:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'uniform.fo'+'g_color\x20*\x20'+'dBlendMode'+'FogFactor,'+'\x20color,\x20ge'+'tFogFactor'+'());\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'color;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',sM='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0afn'+'\x20getFresne'+'l(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20cosTheta:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y:\x20f32\x0a\x20\x20\x20'+'\x20#endif\x0a)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20f'+'resnel:\x20f3'+'2\x20=\x20pow(1.'+'0\x20-\x20satura'+'te(cosThet'+'a),\x205.0);\x0a'+'\x20\x20\x20\x20let\x20gl'+'ossSq:\x20f32'+'\x20=\x20gloss\x20*'+'\x20gloss;\x0a\x20\x20'+'\x20\x20let\x20ret:'+'\x20vec3f\x20=\x20s'+'pecularity'+'\x20+\x20(max(ve'+'c3f(glossS'+'q),\x20specul'+'arity)\x20-\x20s'+'pecularity'+')\x20*\x20fresne'+'l;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20mix(ret,'+'\x20iridescen'+'ceFresnel,'+'\x20iridescen'+'ceIntensit'+'y);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20r'+'et;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0afn'+'\x20getFresne'+'lCC(cosThe'+'ta:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20fres'+'nel:\x20f32\x20='+'\x20pow(1.0\x20-'+'\x20saturate('+'cosTheta),'+'\x205.0);\x0a\x20\x20\x20'+'\x20return\x200.'+'04\x20+\x20(1.0\x20'+'-\x200.04)\x20*\x20'+'fresnel;\x0a}',iM='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x0avary'+'ing\x20vUv0:\x20'+'vec2f;\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4f(inpu'+'t.vertex_p'+'osition,\x200'+'.5,\x201.0);\x0a'+'\x20\x20\x20\x20output'+'.vUv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x20vec2f(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',rM='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInput(c'+'olor:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGammaFloa'+'t(color);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20fn\x20gammaC'+'orrectInpu'+'tVec3(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20deco'+'deGamma3(c'+'olor);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInputVe'+'c4(color:\x20'+'vec4f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(d'+'ecodeGamma'+'3(color.xy'+'z),\x20color.'+'w);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Output(col'+'or:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20pow'+'(color\x20+\x200'+'.0000001,\x20'+'vec3f(1.0\x20'+'/\x202.2));\x0a\x20'+'\x20\x20\x20}\x0a\x0a#els'+'e\x20//\x20NONE\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Input(colo'+'r:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20gammaCo'+'rrectInput'+'Vec3(color'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20gamm'+'aCorrectIn'+'putVec4(co'+'lor:\x20vec4f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20g'+'ammaCorrec'+'tOutput(co'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a',aM='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_gl'+'oss:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getGlossi'+'ness()\x20{\x0a\x20'+'\x20\x20\x20dGlossi'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_GL'+'OSS_CONSTA'+'NT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20unifo'+'rm.materia'+'l_gloss;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_GLOS'+'S_TEXTURE\x0a'+'\x20\x20\x20\x20dGloss'+'iness\x20=\x20dG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_GLOSS'+'_TEXTURE_N'+'AME},\x20{STD'+'_GLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_GLOSS_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_GLOSS_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_I'+'NVERT\x0a\x20\x20\x20\x20'+'dGlossines'+'s\x20=\x201.0\x20-\x20'+'dGlossines'+'s;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20d'+'Glossiness'+'\x20=\x20dGlossi'+'ness\x20+\x200.0'+'000001;\x0a}\x0a',nM='\x0auniform\x20m'+'atrix_mode'+'l:\x20mat4x4f'+';\x0auniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0auniform\x20'+'matrix_pro'+'jection:\x20m'+'at4x4f;\x0a\x0a/'+'/\x20project\x20'+'the\x20model\x20'+'space\x20gaus'+'sian\x20cente'+'r\x20to\x20view\x20'+'and\x20clip\x20s'+'pace\x0afn\x20in'+'itCenter(m'+'odelCenter'+':\x20vec3f,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>)\x20->\x20bo'+'ol\x20{\x0a\x20\x20\x20\x20l'+'et\x20modelVi'+'ew:\x20mat4x4'+'f\x20=\x20unifor'+'m.matrix_v'+'iew\x20*\x20unif'+'orm.matrix'+'_model;\x0a\x20\x20'+'\x20\x20let\x20cent'+'erView:\x20ve'+'c4f\x20=\x20mode'+'lView\x20*\x20ve'+'c4f(modelC'+'enter,\x201.0'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20if\x20splat\x20'+'is\x20behind\x20'+'the\x20camera'+'\x0a\x20\x20\x20\x20if\x20(c'+'enterView.'+'z\x20>\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20ce'+'nterProj:\x20'+'vec4f\x20=\x20un'+'iform.matr'+'ix_project'+'ion\x20*\x20cent'+'erView;\x0a\x0a\x20'+'\x20\x20\x20//\x20ensu'+'re\x20gaussia'+'ns\x20are\x20not'+'\x20clipped\x20b'+'y\x20camera\x20n'+'ear\x20and\x20fa'+'r\x0a\x20\x20\x20\x20cent'+'erProj.z\x20='+'\x20clamp(cen'+'terProj.z,'+'\x200.0,\x20abs('+'centerProj'+'.w));\x0a\x0a\x20\x20\x20'+'\x20center.vi'+'ew\x20=\x20cente'+'rView.xyz\x20'+'/\x20centerVi'+'ew.w;\x0a\x20\x20\x20\x20'+'center.pro'+'j\x20=\x20center'+'Proj;\x0a\x20\x20\x20\x20'+'center.pro'+'jMat00\x20=\x20u'+'niform.mat'+'rix_projec'+'tion[0][0]'+';\x0a\x20\x20\x20\x20cent'+'er.modelVi'+'ew\x20=\x20model'+'View;\x0a\x20\x20\x20\x20'+'return\x20tru'+'e;\x0a}\x0a',oM='\x0a\x0avar\x20spla'+'tColor:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20r'+'eadColor(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20tex'+'tureLoad(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a}\x0a',lM='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20order:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20id:\x20u3'+'2,\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'uv:\x20vec2<i'+'32>,\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20corn'+'erUV:\x20vec2'+'f,\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a}\x0a\x0a'+'//\x20stores\x20'+'the\x20camera'+'\x20and\x20clip\x20'+'space\x20posi'+'tion\x20of\x20th'+'e\x20gaussian'+'\x20center\x0ast'+'ruct\x20Splat'+'Center\x20{\x0a\x20'+'\x20\x20\x20view:\x20v'+'ec3f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20vi'+'ew\x20space\x0a\x20'+'\x20\x20\x20proj:\x20v'+'ec4f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20cl'+'ip\x20space\x0a\x20'+'\x20\x20\x20modelVi'+'ew:\x20mat4x4'+'f,\x20\x20\x20//\x20mo'+'del-view\x20m'+'atrix\x0a\x20\x20\x20\x20'+'projMat00:'+'\x20f32,\x20\x20\x20\x20\x20'+'\x20\x20//\x20eleme'+'mt\x20[0][0]\x20'+'of\x20the\x20pro'+'jection\x20ma'+'trix\x0a}\x0a\x0a//'+'\x20stores\x20th'+'e\x20offset\x20f'+'rom\x20center'+'\x20for\x20the\x20c'+'urrent\x20gau'+'ssian\x0astru'+'ct\x20SplatCo'+'rner\x20{\x0a\x20\x20\x20'+'\x20offset:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20corn'+'er\x20offset\x20'+'from\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'uv:\x20vec2f,'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20aaFactor:'+'\x20f32,\x20//\x20f'+'or\x20scenes\x20'+'generated\x20'+'with\x20antia'+'liasing\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0a#include'+'\x20\x22gsplatEv'+'alSHVS\x22\x0a#i'+'nclude\x20\x22gs'+'platQuatTo'+'Mat3VS\x22\x0a\x0a#'+'if\x20GSPLAT_'+'COMPRESSED'+'_DATA\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatComp'+'ressedData'+'VS\x22\x0a\x20\x20\x20\x20#i'+('f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsDataVS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tSogsColor'+'VS\x22\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsSHVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#else\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatData'+'VS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22gs'+'platColorV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0afn\x20'+'clipCorner'+'(corner:\x20p'+'tr<functio'+'n,\x20SplatCo'+'rner>,\x20alp'+'ha:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'lip:\x20f32\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20(255'+'.0\x20*\x20alpha'+')))\x20/\x202.0)'+';\x0a\x20\x20\x20\x20corn'+'er.offset\x20'+'=\x20corner.o'+'ffset\x20*\x20cl'+'ip;\x0a\x20\x20\x20\x20co'+'rner.uv\x20=\x20'+'corner.uv\x20'+'*\x20clip;\x0a}\x0a'+'\x0a'),cM='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0avar'+'\x20chunkText'+'ure:\x20textu'+'re_2d<f32>'+';\x0a\x0a//\x20work'+'\x20values\x0ava'+'r<private>'+'\x20chunkData'+'A:\x20vec4f;\x20'+'\x20\x20\x20//\x20x:\x20m'+'in_x,\x20y:\x20m'+'in_y,\x20z:\x20m'+'in_z,\x20w:\x20m'+'ax_x\x0avar<p'+'rivate>\x20ch'+'unkDataB:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20max_'+'y,\x20y:\x20max_'+'z,\x20z:\x20scal'+'e_min_x,\x20w'+':\x20scale_mi'+'n_y\x0avar<pr'+'ivate>\x20chu'+'nkDataC:\x20v'+'ec4f;\x20\x20\x20\x20/'+'/\x20x:\x20scale'+'_min_z,\x20y:'+'\x20scale_max'+'_x,\x20z:\x20sca'+'le_max_y,\x20'+'w:\x20scale_m'+'ax_z\x0avar<p'+'rivate>\x20ch'+'unkDataD:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20min_'+'r,\x20y:\x20min_'+'g,\x20z:\x20min_'+'b,\x20w:\x20max_'+'r\x0avar<priv'+'ate>\x20chunk'+'DataE:\x20vec'+'4f;\x20\x20\x20\x20//\x20'+'x:\x20max_g,\x20'+'y:\x20max_b,\x20'+'z:\x20unused,'+'\x20w:\x20unused'+'\x0avar<priva'+'te>\x20packed'+'Data:\x20vec4'+'u;\x20\x20\x20\x20//\x20x'+':\x20position'+'\x20bits,\x20y:\x20'+'rotation\x20b'+'its,\x20z:\x20sc'+'ale\x20bits,\x20'+'w:\x20color\x20b'+'its\x0a\x0afn\x20un'+'pack111011'+'(bits:\x20u32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(vec3f'+'((vec3<u32'+'>(bits)\x20>>'+'\x20vec3<u32>'+'(21u,\x2011u,'+'\x200u))\x20&\x20ve'+'c3<u32>(0x'+'7ffu,\x200x3f'+'fu,\x200x7ffu'+')))\x20/\x20vec3'+'f(2047.0,\x20'+'1023.0,\x2020'+'47.0);\x0a}\x0a\x0a'+'fn\x20unpack8'+'888(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20f32((bit'+'s\x20>>\x2024u)\x20'+'&\x200xffu),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((bits\x20>>'+'\x2016u)\x20&\x200x'+'ffu),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20f32((b'+'its\x20>>\x208u)'+'\x20\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(bits\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20&\x200'+'xffu)\x0a\x20\x20\x20\x20'+')\x20/\x20255.0;'+('\x0a}\x0a\x0aconst\x20'+'norm_const'+':\x20f32\x20=\x201.'+'0\x20/\x20(sqrt('+'2.0)\x20*\x200.5'+');\x0a\x0afn\x20unp'+'ackRotatio'+'n(bits:\x20u3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x20(f32'+'((bits\x20>>\x20'+'20u)\x20&\x200x3'+'ffu)\x20/\x20102'+'3.0\x20-\x200.5)'+'\x20*\x20norm_co'+'nst;\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20(f3'+'2((bits\x20>>'+'\x2010u)\x20&\x200x'+'3ffu)\x20/\x2010'+'23.0\x20-\x200.5'+')\x20*\x20norm_c'+'onst;\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20(f'+'32(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+'_const;\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'sqrt(1.0\x20-'+'\x20(a\x20*\x20a\x20+\x20'+'b\x20*\x20b\x20+\x20c\x20'+'*\x20c));\x0a\x0a\x20\x20'+'\x20\x20let\x20mode'+'\x20=\x20bits\x20>>'+'\x2030u;\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x200u)\x20{\x20re'+'turn\x20vec4f'+'(m,\x20a,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20m,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x202u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20b,\x20m,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(a,\x20b,\x20c'+',\x20m);\x0a}\x0a\x0a/'+'/\x20read\x20cen'+'ter\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex_siz'+'e_u\x20=\x20text'+'ureDimensi'+'ons(chunkT'+'exture,\x200)'+';\x0a\x20\x20\x20\x20let\x20'+'w:\x20u32\x20=\x20t'+'ex_size_u.'+'x\x20/\x205u;\x0a\x20\x20'+'\x20\x20let\x20chun'+'kId:\x20u32\x20='+'\x20source.id'+'\x20/\x20256u;\x0a\x20'+'\x20\x20\x20let\x20chu'+'nkUV:\x20vec2'+'<i32>\x20=\x20ve'+'c2<i32>(i3'+'2((chunkId'+'\x20%\x20w)\x20*\x205u'+'),\x20i32(chu'+'nkId\x20/\x20w))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'read\x20chunk'+'\x20and\x20packe'+'d\x20compress'+'ed\x20data\x0a\x20\x20'+'\x20\x20chunkDat'+'aA\x20=\x20textu'+'reLoad(chu'+'nkTexture,'+'\x20chunkUV\x20+'+'\x20vec2<i32>'+'(0,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataB\x20=\x20t'+'extureLoad')+('(chunkText'+'ure,\x20chunk'+'UV\x20+\x20vec2<'+'i32>(1,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataC'+'\x20=\x20texture'+'Load(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20v'+'ec2<i32>(2'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataD\x20=\x20tex'+'tureLoad(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20vec2<i3'+'2>(3,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataE\x20='+'\x20textureLo'+'ad(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20vec'+'2<i32>(4,\x20'+'0),\x200);\x0a\x20\x20'+'\x20\x20packedDa'+'ta\x20=\x20textu'+'reLoad(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(chunkDa'+'taA.xyz,\x20v'+'ec3f(chunk'+'DataA.w,\x20c'+'hunkDataB.'+'xy),\x20unpac'+'k111011(pa'+'ckedData.x'+'));\x0a}\x0a\x0afn\x20'+'readColor('+'source:\x20pt'+'r<function'+',\x20SplatSou'+'rce>)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20let\x20r\x20=\x20u'+'npack8888('+'packedData'+'.w);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(mix(chun'+'kDataD.xyz'+',\x20vec3f(ch'+'unkDataD.w'+',\x20chunkDat'+'aE.xy),\x20r.'+'rgb),\x20r.w)'+';\x0a}\x0a\x0afn\x20ge'+'tRotation('+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20unpack'+'Rotation(p'+'ackedData.'+'y);\x0a}\x0a\x0afn\x20'+'getScale()'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20exp(mix'+'(vec3f(chu'+'nkDataB.zw'+',\x20chunkDat'+'aC.x),\x20chu'+'nkDataC.yz'+'w,\x20unpack1'+'11011(pack'+'edData.z))'+');\x0a}\x0a\x0a//\x20g'+'iven\x20a\x20rot'+'ation\x20matr'+'ix\x20and\x20sca'+'le\x20vector,'+'\x20compute\x203'+'d\x20covarian'+'ce\x20A\x20and\x20B'+'\x0afn\x20readCo'+'variance(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>,\x20covA_'+'ptr:\x20ptr<f'+'unction,\x20v'+'ec3f>,\x20cov'+'B_ptr:\x20ptr'+'<function,')+('\x20vec3f>)\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'ot\x20=\x20quatT'+'oMat3(getR'+'otation())'+';\x0a\x20\x20\x20\x20let\x20'+'scale\x20=\x20ge'+'tScale();\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20let\x20M\x20=\x20'+'transpose('+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.x\x20*\x20rot'+'[0],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.y'+'\x20*\x20rot[1],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.z\x20*\x20r'+'ot[2]\x0a\x20\x20\x20\x20'+'));\x0a\x0a\x20\x20\x20\x20*'+'covA_ptr\x20='+'\x20vec3f(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20*covB_p'+'tr\x20=\x20vec3f'+'(dot(M[1],'+'\x20M[1]),\x20do'+'t(M[1],\x20M['+'2]),\x20dot(M'+'[2],\x20M[2])'+');\x0a}\x0a'),hM='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0av'+'ar\x20shTextu'+'re0:\x20textu'+'re_2d<u32>'+';\x0avar\x20shTe'+'xture1:\x20te'+'xture_2d<u'+'32>;\x0avar\x20s'+'hTexture2:'+'\x20texture_2'+'d<u32>;\x0a\x0af'+'n\x20unpack88'+'88s(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20unpack'+'ed_u\x20=\x20(ve'+'c4<u32>(bi'+'ts)\x20>>\x20vec'+'4<u32>(0u,'+'\x208u,\x2016u,\x20'+'24u))\x20&\x20ve'+'c4<u32>(0x'+'ffu);\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(unpacke'+'d_u)\x20*\x20(8.'+'0\x20/\x20255.0)'+'\x20-\x204.0;\x0a}\x0a'+'\x0afn\x20readSH'+'Data(sourc'+'e:\x20ptr<fun'+'ction,\x20Spl'+'atSource>,'+'\x20sh:\x20ptr<f'+'unction,\x20a'+'rray<vec3f'+',\x2015>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20read\x20t'+'he\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20let\x20shD'+'ata0:\x20vec4'+'<u32>\x20=\x20te'+'xtureLoad('+'shTexture0'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20let\x20shDat'+'a1:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(sh'+'Texture1,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20shData2'+':\x20vec4<u32'+'>\x20=\x20textur'+'eLoad(shTe'+'xture2,\x20so'+'urce.uv,\x200'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20r0\x20=\x20unp'+'ack8888s(s'+'hData0.x);'+'\x0a\x20\x20\x20\x20let\x20r'+'1\x20=\x20unpack'+'8888s(shDa'+'ta0.y);\x0a\x20\x20'+'\x20\x20let\x20r2\x20='+'\x20unpack888'+'8s(shData0'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20r3\x20=\x20un'+'pack8888s('+'shData0.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20g0\x20=\x20unpa'+'ck8888s(sh'+'Data1.x);\x0a'+'\x20\x20\x20\x20let\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20let\x20g2\x20=\x20'+'unpack8888'+'s(shData1.'+'z);\x0a\x20\x20\x20\x20le'+'t\x20g3\x20=\x20unp'+'ack8888s(s'+'hData1.w);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'b0\x20=\x20unpac'+'k8888s(shD'+'ata2.x);\x0a\x20'+'\x20\x20\x20let\x20b1\x20'+('=\x20unpack88'+'88s(shData'+'2.y);\x0a\x20\x20\x20\x20'+'let\x20b2\x20=\x20u'+'npack8888s'+'(shData2.z'+');\x0a\x20\x20\x20\x20let'+'\x20b3\x20=\x20unpa'+'ck8888s(sh'+'Data2.w);\x0a'+'\x0a\x20\x20\x20\x20sh[0]'+'\x20=\x20\x20vec3f('+'r0.x,\x20g0.x'+',\x20b0.x);\x0a\x20'+'\x20\x20\x20sh[1]\x20='+'\x20\x20vec3f(r0'+'.y,\x20g0.y,\x20'+'b0.y);\x0a\x20\x20\x20'+'\x20sh[2]\x20=\x20\x20'+'vec3f(r0.z'+',\x20g0.z,\x20b0'+'.z);\x0a\x20\x20\x20\x20s'+'h[3]\x20=\x20\x20ve'+'c3f(r0.w,\x20'+'g0.w,\x20b0.w'+');\x0a\x20\x20\x20\x20sh['+'4]\x20=\x20\x20vec3'+'f(r1.x,\x20g1'+'.x,\x20b1.x);'+'\x0a\x20\x20\x20\x20sh[5]'+'\x20=\x20\x20vec3f('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3f(r1'+'.z,\x20g1.z,\x20'+'b1.z);\x0a\x20\x20\x20'+'\x20sh[7]\x20=\x20\x20'+'vec3f(r1.w'+',\x20g1.w,\x20b1'+'.w);\x0a\x20\x20\x20\x20s'+'h[8]\x20=\x20\x20ve'+'c3f(r2.x,\x20'+'g2.x,\x20b2.x'+');\x0a\x20\x20\x20\x20sh['+'9]\x20=\x20\x20vec3'+'f(r2.y,\x20g2'+'.y,\x20b2.y);'+'\x0a\x20\x20\x20\x20sh[10'+']\x20=\x20vec3f('+'r2.z,\x20g2.z'+',\x20b2.z);\x0a\x20'+'\x20\x20\x20sh[11]\x20'+'=\x20vec3f(r2'+'.w,\x20g2.w,\x20'+'b2.w);\x0a\x20\x20\x20'+'\x20sh[12]\x20=\x20'+'vec3f(r3.x'+',\x20g3.x,\x20b3'+'.x);\x0a\x20\x20\x20\x20s'+'h[13]\x20=\x20ve'+'c3f(r3.y,\x20'+'g3.y,\x20b3.y'+');\x0a\x20\x20\x20\x20sh['+'14]\x20=\x20vec3'+'f(r3.z,\x20g3'+'.z,\x20b3.z);'+'\x0a\x0a\x20\x20\x20\x20*sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),dM='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'COEFFS:\x20i3'+'2\x20=\x203;\x0a\x20\x20\x20'+'\x20#elif\x20SH_'+'BANDS\x20==\x202'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20SH_CO'+'EFFS:\x20i32\x20'+'=\x208;\x0a\x20\x20\x20\x20#'+'elif\x20SH_BA'+'NDS\x20==\x203\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20con'+'st\x20SH_COEF'+'FS:\x20i32\x20=\x20'+'15;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20const\x20SH'+'_COEFFS:\x20i'+'32\x20=\x200;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20SH'+'_BANDS\x20>\x200'+'\x0a\x0a\x20\x20\x20\x20cons'+'t\x20SH_C1:\x20f'+'32\x20=\x200.488'+'6025119029'+'199;\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x201\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20const'+'\x20SH_C2_0:\x20'+'f32\x20=\x201.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_1:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_2:\x20f'+'32\x20=\x200.315'+'3915652525'+'2005;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_3:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_4:\x20f'+'32\x20=\x200.546'+'2742152960'+'396;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SH_BA'+'NDS\x20>\x202\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_0:'+'\x20f32\x20=\x20-0.'+'5900435899'+'266435;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_1:'+'\x20f32\x20=\x202.8'+'9061144264'+'0554;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_2:\x20f'+'32\x20=\x20-0.45'+'7045799464'+'4658;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_3:\x20f'+'32\x20=\x200.373'+'1763325901'+'154;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_4:\x20f3'+'2\x20=\x20-0.457'+'0457994644'+'658;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_5:\x20f3'+'2\x20=\x201.4453'+'0572132027'+'7;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'C3_6:\x20f32\x20'+'=\x20-0.59004'+'3589926643'+'5;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20see\x20http'+'s://github'+'.com/graph'+'deco-inria'+('/gaussian-'+'splatting/'+'blob/main/'+'utils/sh_u'+'tils.py\x0a\x20\x20'+'\x20\x20fn\x20evalS'+'H(sh:\x20ptr<'+'function,\x20'+'array<vec3'+'f,\x20SH_COEF'+'FS>>,\x20dir:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x\x20=\x20dir.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20y\x20=\x20di'+'r.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20z\x20='+'\x20dir.z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'1st\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20result\x20'+'=\x20SH_C1\x20*\x20'+'(-sh[0]\x20*\x20'+'y\x20+\x20sh[1]\x20'+'*\x20z\x20-\x20sh[2'+']\x20*\x20x);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x201\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x202'+'nd\x20degree\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xx\x20='+'\x20x\x20*\x20x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20yy\x20=\x20y'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20zz\x20=\x20z\x20*'+'\x20z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20yz'+'\x20=\x20y\x20*\x20z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xz\x20='+'\x20x\x20*\x20z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'result\x20+\x20('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'3]\x20*\x20(SH_C'+'2_0\x20*\x20xy)\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[4]\x20*\x20(SH_'+'C2_1\x20*\x20yz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[5]\x20*\x20(SH'+'_C2_2\x20*\x20(2'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[6]\x20*\x20(SH_'+'C2_3\x20*\x20xz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[7]\x20*\x20(SH'+'_C2_4\x20*\x20(x'+'x\x20-\x20yy))\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'=\x20result\x20+'+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20re'+'sult;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20#end'+'if\x0a'),fM='\x0afn\x20quatTo'+'Mat3(R:\x20ve'+'c4<f32>)\x20-'+'>\x20mat3x3<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'let\x20R2:\x20ve'+'c4<f32>\x20=\x20'+'R\x20+\x20R;\x0a\x20\x20\x20'+'\x20let\x20X:\x20f3'+'2\x20\x20\x20\x20\x20\x20\x20=\x20'+'R2.x\x20*\x20R.w'+';\x0a\x20\x20\x20\x20let\x20'+'Y:\x20vec4<f3'+'2>\x20=\x20R2.y\x20'+'*\x20R;\x0a\x20\x20\x20\x20l'+'et\x20Z:\x20vec4'+'<f32>\x20=\x20R2'+'.z\x20*\x20R;\x0a\x20\x20'+'\x20\x20let\x20W:\x20f'+'32\x20\x20\x20\x20\x20\x20\x20='+'\x20R2.w\x20*\x20R.'+'w;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20mat3x'+'3<f32>(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Z.z\x20-\x20W,'+'\x20\x20Y.z\x20+\x20X,'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.z\x20-'+'\x20X,\x20\x20\x20\x20\x20\x20\x20'+'\x201.0\x20-\x20Y.y'+'\x20-\x20W,\x20Z.w\x20'+'+\x20Y.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.w\x20+'+'\x20Z.x,\x20\x20\x20\x20\x20'+'\x20Z.w\x20-\x20Y.x'+',\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',uM='\x0avar\x20sh0:\x20'+'texture_2d'+'<f32>;\x0a\x0aun'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0auniform'+'\x20sh0_maxs:'+'\x20vec4f;\x0a\x0ac'+'onst\x20SH_C0'+':\x20f32\x20=\x200.'+'2820947917'+'7387814;\x0a\x0a'+'fn\x20readCol'+'or(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20let\x20cl'+'r:\x20vec4f\x20='+'\x20mix(unifo'+'rm.sh0_min'+'s,\x20uniform'+'.sh0_maxs,'+'\x20textureLo'+'ad(sh0,\x20so'+'urce.uv,\x200'+'));\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(vec3f(0.5'+')\x20+\x20clr.xy'+'z\x20*\x20SH_C0,'+'\x201.0\x20/\x20(1.'+'0\x20+\x20exp(-c'+'lr.w)));\x0a}'+'\x0a',pM='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0a\x0aun'+'iform\x20mean'+'s_mins:\x20ve'+'c3f;\x0aunifo'+'rm\x20means_m'+'axs:\x20vec3f'+';\x0a\x0auniform'+'\x20scales_mi'+'ns:\x20vec3f;'+'\x0auniform\x20s'+'cales_maxs'+':\x20vec3f;\x0a\x0a'+'fn\x20unpackU'+'32(u:\x20u32)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20vec4f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((u\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((u\x20>>\x201'+'6u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((u\x20>>\x20'+'8u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(u\x20&\x200x'+'FFu)\x20/\x20255'+'.0\x0a\x20\x20\x20\x20);\x0a'+'}\x0a\x0avar<pri'+'vate>\x20pack'+'edSample:\x20'+'vec4<u32>;'+'\x0a\x0a//\x20read\x20'+'the\x20model-'+'space\x20cent'+'er\x20of\x20the\x20'+'gaussian\x0af'+'n\x20readCent'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec3f\x20{\x0a'+'\x0a\x20\x20\x20\x20packe'+'dSample\x20=\x20'+'textureLoa'+'d(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20l:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.x).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20u:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20n:\x20vec3f\x20'+'=\x20(l\x20*\x20255'+'.0\x20+\x20u\x20*\x202'+'55.0\x20*\x20256'+'.0)\x20/\x206553'+'5.0;\x0a\x20\x20\x20\x20l'+'et\x20v:\x20vec3'+'f\x20=\x20mix(un'+'iform.mean'+'s_mins,\x20un'+'iform.mean'+'s_maxs,\x20n)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20sign(v'+')\x20*\x20(exp(a'+'bs(v))\x20-\x201'+'.0);\x0a}\x0a\x0aco'+'nst\x20norm:\x20'+'f32\x20=\x202.0\x20'+'/\x20sqrt(2.0'+');\x0a\x0a//\x20sam'+'ple\x20covari'+'ance\x20vecto'+'rs\x0afn\x20read'+'Covariance'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>,\x20cov'+'A_ptr:\x20ptr'+'<function,'+'\x20vec3f>,\x20c'+('ovB_ptr:\x20p'+'tr<functio'+'n,\x20vec3f>)'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20qdata:\x20ve'+'c4f\x20=\x20unpa'+'ckU32(pack'+'edSample.z'+');\x0a\x20\x20\x20\x20let'+'\x20sdata:\x20ve'+'c3f\x20=\x20unpa'+'ckU32(pack'+'edSample.w'+').xyz;\x0a\x0a\x20\x20'+'\x20\x20let\x20abc:'+'\x20vec3f\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(abc,'+'\x20abc)));\x0a\x0a'+'\x20\x20\x20\x20let\x20mo'+'de:\x20u32\x20=\x20'+'u32(qdata.'+'w\x20*\x20255.0\x20'+'+\x200.5)\x20-\x202'+'52u;\x0a\x0a\x20\x20\x20\x20'+'var\x20quat:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20if\x20(mode\x20'+'==\x200u)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20qua'+'t\x20=\x20vec4f('+'d,\x20abc);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20quat'+'\x20=\x20vec4f(a'+'bc.x,\x20d,\x20a'+'bc.y,\x20abc.'+'z);\x0a\x20\x20\x20\x20}\x20'+'else\x20if\x20(m'+'ode\x20==\x202u)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20quat\x20=\x20ve'+'c4f(abc.x,'+'\x20abc.y,\x20d,'+'\x20abc.z);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'quat\x20=\x20vec'+'4f(abc.x,\x20'+'abc.y,\x20abc'+'.z,\x20d);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x0a\x20\x20\x20\x20'+'let\x20rot:\x20m'+'at3x3f\x20=\x20q'+'uatToMat3('+'quat);\x0a\x20\x20\x20'+'\x20let\x20scale'+':\x20vec3f\x20=\x20'+'exp(mix(un'+'iform.scal'+'es_mins,\x20u'+'niform.sca'+'les_maxs,\x20'+'sdata));\x0a\x0a'+'\x20\x20\x20\x20//\x20M\x20='+'\x20S\x20*\x20R\x0a\x20\x20\x20'+'\x20let\x20M:\x20ma'+'t3x3f\x20=\x20tr'+'anspose(ma'+'t3x3f(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20*co'+'vA_ptr\x20=\x20v'+'ec3f(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20*covB_ptr'+'\x20=\x20vec3f(d'+'ot(M[1],\x20M'+'[1]),\x20dot('+'M[1],\x20M[2]'+'),\x20dot(M[2'+'],\x20M[2]));')+'\x0a}\x0a',mM='\x0avar\x20sh_ce'+'ntroids:\x20t'+'exture_2d<'+'f32>;\x0a\x0auni'+'form\x20shN_m'+'ins:\x20f32;\x0a'+'uniform\x20sh'+'N_maxs:\x20f3'+'2;\x0a\x0afn\x20rea'+'dSHData(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>,\x20sh:\x20pt'+'r<function'+',\x20array<ve'+'c3f,\x20SH_CO'+'EFFS>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'let\x20t:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'32(packedS'+'ample.x\x20&\x20'+'255u),\x20i32'+'(packedSam'+'ple.y\x20&\x2025'+'5u));\x0a\x20\x20\x20\x20'+'let\x20n:\x20i32'+'\x20=\x20t.x\x20+\x20t'+'.y\x20*\x20256;\x0a'+'\x20\x20\x20\x20let\x20u:'+'\x20i32\x20=\x20(n\x20'+'%\x2064)\x20*\x20SH'+'_COEFFS;\x0a\x20'+'\x20\x20\x20let\x20v:\x20'+'i32\x20=\x20n\x20/\x20'+'64;\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20offset\x20i'+'nto\x20the\x20ce'+'ntroids\x20te'+'xture\x20and\x20'+'read\x20conse'+'cutive\x20tex'+'els\x0a\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'i32\x20=\x200;\x20i'+'\x20<\x20SH_COEF'+'FS;\x20i\x20=\x20i\x20'+'+\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[i]'+'\x20=\x20mix(vec'+'3f(uniform'+'.shN_mins)'+',\x20vec3f(un'+'iform.shN_'+'maxs),\x20tex'+'tureLoad(s'+'h_centroid'+'s,\x20vec2<i3'+'2>(u\x20+\x20i,\x20'+'v),\x200).xyz'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20*scale'+'\x20=\x201.0;\x0a}\x0a',_M='\x0auniform\x20v'+'iewport:\x20v'+'ec2f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20view'+'port\x20dimen'+'sions\x0aunif'+'orm\x20camera'+'_params:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201\x20/\x20far,\x20'+'far,\x20near,'+'\x20isOrtho\x0a\x0a'+'//\x20calcula'+'te\x20the\x20cli'+'p-space\x20of'+'fset\x20from\x20'+'the\x20center'+'\x20for\x20this\x20'+'gaussian\x0af'+'n\x20initCorn'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>,\x20corne'+'r:\x20ptr<fun'+'ction,\x20Spl'+'atCorner>)'+'\x20->\x20bool\x20{'+'\x0a\x20\x20\x20\x20//\x20ge'+'t\x20covarian'+'ce\x0a\x20\x20\x20\x20var'+'\x20covA:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20covB:\x20ve'+'c3f;\x0a\x20\x20\x20\x20r'+'eadCovaria'+'nce(source'+',\x20&covA,\x20&'+'covB);\x0a\x0a\x20\x20'+'\x20\x20let\x20Vrk\x20'+'=\x20mat3x3f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(covA.'+'x,\x20covA.y,'+'\x20covA.z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(covA.y'+',\x20covB.x,\x20'+'covB.y),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(covA.z,'+'\x20covB.y,\x20c'+'ovB.z)\x0a\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20l'+'et\x20focal\x20='+'\x20uniform.v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20let\x20v'+'\x20=\x20select('+'center.vie'+'w.xyz,\x20vec'+'3f(0.0,\x200.'+'0,\x201.0),\x20u'+'niform.cam'+'era_params'+'.w\x20==\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'J1\x20=\x20focal'+'\x20/\x20v.z;\x0a\x20\x20'+'\x20\x20let\x20J2\x20='+'\x20-J1\x20/\x20v.z'+'\x20*\x20v.xy;\x0a\x20'+'\x20\x20\x20let\x20J\x20='+'\x20mat3x3f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(J1,\x200.'+'0,\x20J2.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x20J'+'1,\x20J2.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x200'+'.0,\x200.0)\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20W\x20=\x20t'+'ranspose(m'+'at3x3f(cen'+'ter.modelV'+'iew[0].xyz'+',\x20center.m'+'odelView[1'+'].xyz,\x20cen'+('ter.modelV'+'iew[2].xyz'+'));\x0a\x20\x20\x20\x20le'+'t\x20T\x20=\x20W\x20*\x20'+'J;\x0a\x20\x20\x20\x20let'+'\x20cov\x20=\x20tra'+'nspose(T)\x20'+'*\x20Vrk\x20*\x20T;'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'GSPLAT_AA\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20calculate'+'\x20AA\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20detOrig'+'\x20=\x20cov[0]['+'0]\x20*\x20cov[1'+'][1]\x20-\x20cov'+'[0][1]\x20*\x20c'+'ov[1][0];\x20'+'//\x20Using\x20['+'0][1]\x20*\x20[1'+'][0]\x20as\x20ma'+'trix\x20might'+'\x20not\x20be\x20pe'+'rfectly\x20sy'+'mmetric\x20nu'+'merically\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20detBlur\x20'+'=\x20(cov[0]['+'0]\x20+\x200.3)\x20'+'*\x20(cov[1]['+'1]\x20+\x200.3)\x20'+'-\x20cov[0][1'+']\x20*\x20cov[1]'+'[0];\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20corner.'+'aaFactor\x20='+'\x20sqrt(detO'+'rig\x20/\x20detB'+'lur);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal1\x20=\x20co'+'v[0][0]\x20+\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20offDiag'+'onal\x20=\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal2\x20=\x20co'+'v[1][1]\x20+\x20'+'0.3;\x0a\x0a\x20\x20\x20\x20'+'let\x20mid\x20=\x20'+'0.5\x20*\x20(dia'+'gonal1\x20+\x20d'+'iagonal2);'+'\x0a\x20\x20\x20\x20let\x20r'+'adius\x20=\x20le'+'ngth(vec2f'+'((diagonal'+'1\x20-\x20diagon'+'al2)\x20/\x202.0'+',\x20offDiago'+'nal));\x0a\x20\x20\x20'+'\x20let\x20lambd'+'a1\x20=\x20mid\x20+'+'\x20radius;\x0a\x20'+'\x20\x20\x20let\x20lam'+'bda2\x20=\x20max'+'(mid\x20-\x20rad'+'ius,\x200.1);'+'\x0a\x0a\x20\x20\x20\x20//\x20U'+'se\x20the\x20sma'+'ller\x20viewp'+'ort\x20dimens'+'ion\x20to\x20lim'+'it\x20the\x20ker'+'nel\x20size\x20r'+'elative\x20to'+'\x20the\x20scree'+'n\x20resoluti'+'on.\x0a\x20\x20\x20\x20le'+'t\x20vmin\x20=\x20m'+'in(1024.0,'+'\x20min(unifo'+'rm.viewpor'+'t.x,\x20unifo'+'rm.viewpor'+'t.y));\x0a\x0a\x20\x20'+'\x20\x20let\x20l1\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda1)'+',\x20vmin);\x0a\x20'+'\x20\x20\x20let\x20l2\x20'+'=\x202.0\x20*\x20mi'+'n(sqrt(2.0'+'\x20*\x20lambda2')+('),\x20vmin);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly-out\x20ga'+'ussians\x20sm'+'aller\x20than'+'\x202\x20pixels\x0a'+'\x20\x20\x20\x20if\x20(l1'+'\x20<\x202.0\x20&&\x20'+'l2\x20<\x202.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20fal'+'se;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'uniform.vi'+'ewport;\x0a\x0a\x20'+'\x20\x20\x20//\x20cull'+'\x20against\x20f'+'rustum\x20x/y'+'\x20axes\x0a\x20\x20\x20\x20'+'if\x20(any((a'+'bs(center.'+'proj.xy)\x20-'+'\x20vec2f(max'+'(l1,\x20l2))\x20'+'*\x20c)\x20>\x20cen'+'ter.proj.w'+'w))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20diagona'+'lVector\x20=\x20'+'normalize('+'vec2f(offD'+'iagonal,\x20l'+'ambda1\x20-\x20d'+'iagonal1))'+';\x0a\x20\x20\x20\x20let\x20'+'v1\x20=\x20l1\x20*\x20'+'diagonalVe'+'ctor;\x0a\x20\x20\x20\x20'+'let\x20v2\x20=\x20l'+'2\x20*\x20vec2f('+'diagonalVe'+'ctor.y,\x20-d'+'iagonalVec'+'tor.x);\x20//'+'\x20Swizzle\x0a\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20=\x20'+'(source.co'+'rnerUV.x\x20*'+'\x20v1\x20+\x20sour'+'ce.cornerU'+'V.y\x20*\x20v2)\x20'+'*\x20c;\x0a\x20\x20\x20\x20c'+'orner.uv\x20='+'\x20source.co'+'rnerUV;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),gM='\x0avar\x20trans'+'formA:\x20tex'+'ture_2d<u3'+'2>;\x0avar\x20tr'+'ansformB:\x20'+'texture_2d'+'<f32>;\x0a\x0a//'+'\x20work\x20valu'+'es\x0avar<pri'+'vate>\x20tAw:'+'\x20u32;\x0a\x0a//\x20'+'read\x20the\x20m'+'odel-space'+'\x20center\x20of'+'\x20the\x20gauss'+'ian\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20let\x20'+'tA:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(tr'+'ansformA,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20t'+'Aw\x20=\x20tA.w;'+'\x0a\x20\x20\x20\x20retur'+'n\x20bitcast<'+'vec3f>(tA.'+'xyz);\x0a}\x0a\x0af'+'n\x20unpackRo'+'tation(pac'+'ked:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'packed.xyz'+',\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(pack'+'ed,\x20packed'+'))));\x0a}\x0a\x0a/'+'/\x20sample\x20c'+'ovariance\x20'+'vectors\x0afn'+'\x20readCovar'+'iance(sour'+'ce:\x20ptr<fu'+'nction,\x20Sp'+'latSource>'+',\x20covA_ptr'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20covB_p'+'tr:\x20ptr<fu'+'nction,\x20ve'+'c3f>)\x20{\x0a\x20\x20'+'\x20\x20let\x20tB:\x20'+'vec4f\x20=\x20te'+'xtureLoad('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20let\x20rot:'+'\x20mat3x3f\x20='+'\x20quatToMat'+'3(unpackRo'+'tation(vec'+'3f(unpack2'+'x16float(b'+'itcast<u32'+'>(tAw)),\x20t'+'B.w)).wxyz'+');\x0a\x20\x20\x20\x20let'+'\x20scale:\x20ve'+'c3f\x20=\x20tB.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x20M\x20=\x20S\x20*\x20'+'R\x0a\x20\x20\x20\x20let\x20'+'M\x20=\x20transp'+'ose(mat3x3'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20*covA_p'+'tr\x20=\x20vec3f'+'(dot(M[0],'+'\x20M[0]),\x20do'+('t(M[0],\x20M['+'1]),\x20dot(M'+'[0],\x20M[2])'+');\x0a\x20\x20\x20\x20*co'+'vB_ptr\x20=\x20v'+'ec3f(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a'),SM='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0afn\x20'+'prepareOut'+'putFromGam'+'ma(gammaCo'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20TONEMAP\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20G'+'AMMA\x20==\x20NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'nvert\x20to\x20l'+'inear\x20spac'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20decodeGam'+'ma3(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20gamma\x20'+'space\x20colo'+'r\x20directly'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'gammaColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ap'+'ply\x20tonema'+'pping\x20in\x20l'+'inear\x20spac'+'e\x20and\x20outp'+'ut\x20to\x20line'+'ar\x20or\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20gam'+'ma\x20(which\x20'+'is\x20handled'+'\x20by\x20gammaC'+'orrectOutp'+'ut)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaCorrec'+'tOutput(to'+'neMap(deco'+'deGamma3(g'+'ammaColor)'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',yM='\x0a\x0a#ifndef\x20'+'DITHER_NON'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22baye'+'rPS\x22\x0a\x20\x20\x20\x20#'+'include\x20\x22o'+'pacityDith'+'erPS\x22\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20PICK_PAS'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22pick'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_PASS)\x20||\x20'+'defined(PI'+'CK_PASS)\x20|'+'|\x20defined('+'PREPASS_PA'+'SS)\x0a\x20\x20\x20\x20un'+'iform\x20alph'+'aClip:\x20f32'+';\x0a#endif\x0a\x0a'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vLinearD'+'epth:\x20f32;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22float'+'AsUintPS\x22\x0a'+'#endif\x0a\x0a//'+'\x20Fast\x20appr'+'oximate\x20e^'+'x\x20based\x20on'+'\x20https://n'+'ic.schraud'+'olph.org/p'+'ubs/Schrau'+'dolph99.pd'+'f\x0aconst\x20EX'+'P_A:\x20f32\x20\x20'+'\x20\x20\x20\x20=\x201210'+'2203.0;\x20\x20\x20'+'//\x20\x202^23\x20'+'/\x20ln(2)\x0aco'+'nst\x20EXP_BC'+'_RMS:\x20i32\x20'+'=\x2010648668'+'08;\x20\x20\x20//\x20('+'127\x20<<\x2023)'+'\x20-\x2060801\x20*'+'\x208\x0afn\x20fast'+'Exp(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20var\x20i'+':\x20i32\x20=\x20i3'+'2(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20bi'+'tcast<f32>'+'(i);\x0a}\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x0a\x20\x20\x20'+'\x20let\x20A:\x20f3'+'2\x20=\x20dot(ga'+'ussianUV,\x20'+'gaussianUV'+');\x0a\x20\x20\x20\x20if\x20'+'(A\x20>\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20alpha'+'\x0a\x20\x20\x20\x20var\x20a'+'lpha:\x20f32\x20'+'=\x20fastExp('+'-A\x20*\x204.0)\x20'+'*\x20gaussian'+('Color.a;\x0a\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(al'+'pha\x20<\x20unif'+'orm.alphaC'+'lip)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20PI'+'CK_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20getPickO'+'utput();\x0a\x0a'+'\x20\x20\x20\x20#elif\x20'+'SHADOW_PAS'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(0.0,\x200.0'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20PREPAS'+'S_PASS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20float2vec'+'4(vLinearD'+'epth);\x0a\x0a\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20('+'1.0\x20/\x20255.'+'0))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20opaci'+'tyDither(&'+'alpha,\x20id\x20'+'*\x200.013);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(input'+'.gaussianC'+'olor.xyz,\x20'+'alpha);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'),vM='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0afn\x20unpack'+'111011s(bi'+'ts:\x20u32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20(vec3f((v'+'ec3<u32>(b'+'its)\x20>>\x20ve'+'c3<u32>(21'+'u,\x2011u,\x200u'+'))\x20&\x20vec3<'+'u32>(0x7ff'+'u,\x200x3ffu,'+'\x200x7ffu))\x20'+'/\x20vec3f(20'+'47.0,\x201023'+'.0,\x202047.0'+'))\x20*\x202.0\x20-'+'\x201.0;\x0a}\x0a\x0as'+'truct\x20Scal'+'eAndSH\x20{\x0a\x20'+'\x20\x20\x20scale:\x20'+'f32,\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f\x0a};\x0a\x0a'+'//\x20fetch\x20q'+'uantized\x20s'+'pherical\x20h'+'armonic\x20co'+'efficients'+'\x0afn\x20fetchS'+'cale(t_in:'+'\x20vec4<u32>'+')\x20->\x20Scale'+'AndSH\x20{\x0a\x20\x20'+'\x20\x20var\x20resu'+'lt:\x20ScaleA'+'ndSH;\x0a\x20\x20\x20\x20'+'result.sca'+'le\x20=\x20bitca'+'st<f32>(t_'+'in.x);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20unpack11'+'1011s(t_in'+'.y);\x0a\x20\x20\x20\x20r'+'esult.b\x20=\x20'+'unpack1110'+'11s(t_in.z'+');\x0a\x20\x20\x20\x20res'+'ult.c\x20=\x20un'+'pack111011'+'s(t_in.w);'+'\x0a\x20\x20\x20\x20retur'+'n\x20result;\x0a'+'}\x0a\x0astruct\x20'+'SH\x20{\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20d:\x20vec3f\x0a'+'};\x0a\x0a//\x20fet'+'ch\x20quantiz'+'ed\x20spheric'+'al\x20harmoni'+'c\x20coeffici'+'ents\x0afn\x20fe'+'tch4(t_in:'+'\x20vec4<u32>'+')\x20->\x20SH\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'sult:\x20SH;\x0a'+'\x20\x20\x20\x20result'+'.a\x20=\x20unpac'+'k111011s(t'+'_in.x);\x0a\x20\x20'+'\x20\x20result.b'+'\x20=\x20unpack1'+'11011s(t_i'+'n.y);\x0a\x20\x20\x20\x20'+'result.c\x20='+'\x20unpack111'+'011s(t_in.'+'z);\x0a\x20\x20\x20\x20re'+'sult.d\x20=\x20u'+'npack11101'+'1s(t_in.w)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20result;'+'\x0a}\x0a\x0afn\x20fet'+'ch1(t_in:\x20'+'u32)\x20->\x20ve'+('c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20unp'+'ack111011s'+'(t_in);\x0a}\x0a'+'\x0a#if\x20SH_BA'+'NDS\x20==\x201\x0a\x20'+'\x20\x20\x20var\x20spl'+'atSH_1to3:'+'\x20texture_2'+'d<u32>;\x0a\x0a\x20'+'\x20\x20\x20fn\x20read'+'SHData(sou'+'rce:\x20ptr<f'+'unction,\x20S'+'platSource'+'>,\x20sh:\x20ptr'+'<function,'+'\x20array<vec'+'3f,\x203>>,\x20s'+'cale:\x20ptr<'+'function,\x20'+'f32>)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'result\x20=\x20f'+'etchScale('+'textureLoa'+'d(splatSH_'+'1to3,\x20sour'+'ce.uv,\x200))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'*scale\x20=\x20r'+'esult.scal'+'e;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[0]\x20=\x20r'+'esult.a;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'1]\x20=\x20resul'+'t.b;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[2]\x20='+'\x20result.c;'+'\x0a\x20\x20\x20\x20}\x0a#el'+'if\x20SH_BAND'+'S\x20==\x202\x0a\x20\x20\x20'+'\x20var\x20splat'+'SH_1to3:\x20t'+'exture_2d<'+'u32>;\x0a\x20\x20\x20\x20'+'var\x20splatS'+'H_4to7:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_8to11:\x20te'+'xture_2d<u'+'32>;\x0a\x0a\x20\x20\x20\x20'+'fn\x20readSHD'+'ata(source'+':\x20ptr<func'+'tion,\x20Spla'+'tSource>,\x20'+'sh:\x20ptr<fu'+'nction,\x20ar'+'ray<vec3f,'+'\x208>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se')+('cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20='+'\x20fetch1(te'+'xtureLoad('+'splatSH_8t'+'o11,\x20sourc'+'e.uv,\x200).x'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_1to3:\x20tex'+'ture_2d<u3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20splatSH_'+'4to7:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_8'+'to11:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_1'+'2to15:\x20tex'+'ture_2d<u3'+'2>;\x0a\x0a\x20\x20\x20\x20f'+'n\x20readSHDa'+'ta(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20s'+'h:\x20ptr<fun'+'ction,\x20arr'+'ay<vec3f,\x20'+'15>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se'+'cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20thi'+'rd:\x20SH\x20=\x20f'+'etch4(text'+'ureLoad(sp'+'latSH_8to1'+'1,\x20source.'+'uv,\x200));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'7]\x20=\x20third'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[8]\x20=\x20'+'third.b;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'9]\x20=\x20third'+'.c;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[10]\x20='+'\x20third.d;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20fourth:'+'\x20SH\x20=\x20fetc'+'h4(texture'+'Load(splat'+'SH_12to15,')+('\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[11'+']\x20=\x20fourth'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[12]\x20='+'\x20fourth.b;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[13]\x20=\x20fo'+'urth.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[1'+'4]\x20=\x20fourt'+'h.d;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a\x0a#'+'endif\x0a'),xM='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c3f;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20xy:\x20'+'cornerUV,\x20'+'z:\x20render\x20'+'order\x20offs'+'et\x0aattribu'+'te\x20vertex_'+'id_attrib:'+'\x20u32;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'nder\x20order'+'\x20base\x0a\x0auni'+'form\x20numSp'+'lats:\x20u32;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20total\x20nu'+'mber\x20of\x20sp'+'lats\x0avar\x20s'+'platOrder:'+'\x20texture_2'+'d<u32>;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'per-splat\x20'+'index\x20to\x20s'+'ource\x20gaus'+'sian\x0a\x0a//\x20i'+'nitialize\x20'+'the\x20splat\x20'+'source\x20str'+'ucture\x0afn\x20'+'initSource'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20let\x20w:\x20u3'+'2\x20=\x20textur'+'eDimension'+'s(splatOrd'+'er,\x200).x;\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20u3'+'2(vertex_p'+'osition.z)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'return\x20if\x20'+'out\x20of\x20ran'+'ge\x20(since\x20'+'the\x20last\x20b'+'lock\x20of\x20sp'+'lats\x20may\x20b'+'e\x20partiall'+'y\x20full)\x0a\x20\x20'+'\x20\x20if\x20(sour'+'ce.order\x20>'+'=\x20uniform.'+'numSplats)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20fa'+'lse;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'orderUV\x20=\x20'+'vec2i(vec2'+'u(source.o'+'rder\x20%\x20w,\x20'+'source.ord'+'er\x20/\x20w));\x0a'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20splat\x20i'+'d\x0a\x20\x20\x20\x20sour'+'ce.id\x20=\x20te'+'xtureLoad('+'splatOrder'+',\x20orderUV,'+'\x200).r;\x0a\x0a\x20\x20'+'\x20\x20//\x20map\x20i'+'d\x20to\x20uv\x0a\x20\x20'+'\x20\x20source.u'+'v\x20=\x20vec2i('+'vec2u(sour'+'ce.id\x20%\x20w,'+'\x20source.id'+'\x20/\x20w));\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+('turn\x20true;'+'\x0a}\x0a'),TM='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a#ifn'+'def\x20DITHER'+'_NONE\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0aconst'+'\x20discardVe'+'c:\x20vec4f\x20='+'\x20vec4f(0.0'+',\x200.0,\x202.0'+',\x201.0);\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20varying'+'\x20vLinearDe'+'pth:\x20f32;\x0a'+'#endif\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20gaussian\x20'+'details\x0a\x20\x20'+'\x20\x20var\x20sour'+'ce:\x20SplatS'+'ource;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Source(&so'+'urce))\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.positi'+'on\x20=\x20disca'+'rdVec;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20let\x20model'+'Center:\x20ve'+'c3f\x20=\x20read'+'Center(&so'+'urce);\x0a\x0a\x20\x20'+'\x20\x20var\x20cent'+'er:\x20SplatC'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'&center))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20di'+'scardVec;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20pro'+'ject\x20cente'+'r\x20to\x20scree'+'n\x20space\x0a\x20\x20'+'\x20\x20var\x20corn'+'er:\x20SplatC'+'orner;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Corner(&so'+'urce,\x20&cen'+'ter,\x20&corn'+'er))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20clr:\x20vec4'+'f\x20=\x20readCo'+'lor(&sourc'+'e);\x0a\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'AA\x20compens'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr.a\x20'+('=\x20clr.a\x20*\x20'+'corner.aaF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20spher'+'ical\x20harmo'+'nics\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x200\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cal'+'culate\x20the'+'\x20model-spa'+'ce\x20view\x20di'+'rection\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'modelView3'+'x3\x20=\x20mat3x'+'3f(center.'+'modelView['+'0].xyz,\x20ce'+'nter.model'+'View[1].xy'+'z,\x20center.'+'modelView['+'2].xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dir\x20=\x20nor'+'malize(mod'+'elView3x3\x20'+'*\x20center.v'+'iew);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'ad\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20sh:\x20array'+'<vec3f,\x20SH'+'_COEFFS>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20scale:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20readSHDa'+'ta(&source'+',\x20&sh,\x20&sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr\x20='+'\x20vec4f(clr'+'.xyz\x20+\x20eva'+'lSH(&sh,\x20d'+'ir)\x20*\x20scal'+'e,\x20clr.a);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(&c'+'orner,\x20clr'+'.w);\x0a\x0a\x20\x20\x20\x20'+'//\x20write\x20o'+'utput\x0a\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4f(co'+'rner.offse'+'t,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20ou'+'tput.gauss'+'ianUV\x20=\x20co'+'rner.uv;\x0a\x20'+'\x20\x20\x20output.'+'gaussianCo'+'lor\x20=\x20vec4'+'f(prepareO'+'utputFromG'+'amma(max(c'+'lr.xyz,\x20ve'+'c3f(0.0)))'+',\x20clr.w);\x0a'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'id\x20=\x20f32(s'+'ource.id);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vLinearD'+'epth\x20=\x20-ce'+'nter.view.'+'z;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),wM='\x0a\x20\x20\x20\x20attri'+'bute\x20aPosi'+'tion:\x20vec2'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20uv0:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20@vertex\x20f'+'n\x20vertexMa'+'in(input:\x20'+'VertexInpu'+'t)\x20->\x20Vert'+'exOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20vec4f(inp'+'ut.aPositi'+'on,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'uv0\x20=\x20getI'+'mageEffect'+'UV((input.'+'aPosition\x20'+'+\x201.0)\x20*\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a',EM='\x0a//\x20Indire'+'ct\x20indexed'+'\x20draw\x20call'+'\x20parameter'+'s\x0astruct\x20D'+'rawIndexed'+'IndirectAr'+'gs\x20{\x0a\x20\x20\x20\x20i'+'ndexCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Numb'+'er\x20of\x20indi'+'ces\x20to\x20dra'+'w\x0a\x20\x20\x20\x20inst'+'anceCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20instanc'+'es\x20to\x20draw'+'\x0a\x20\x20\x20\x20first'+'Index:\x20u32'+',\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Index\x20of'+'\x20the\x20first'+'\x20index\x20in\x20'+'the\x20index\x20'+'buffer\x0a\x20\x20\x20'+'\x20baseVerte'+'x:\x20i32,\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Of'+'fset\x20added'+'\x20to\x20each\x20i'+'ndex\x20befor'+'e\x20fetching'+'\x20vertex\x0a\x20\x20'+'\x20\x20firstIns'+'tance:\x20u32'+'\x20\x20\x20\x20\x20\x20//\x20F'+'irst\x20insta'+'nce\x20ID\x0a};\x0a'+'\x0a//\x20Indire'+'ct\x20non-ind'+'exed\x20draw\x20'+'call\x20param'+'eters\x0astru'+'ct\x20DrawInd'+'irectArgs\x20'+'{\x0a\x20\x20\x20\x20vert'+'exCount:\x20u'+'32,\x20\x20\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20vertice'+'s\x20to\x20draw\x0a'+'\x20\x20\x20\x20instan'+'ceCount:\x20u'+'32,\x20\x20\x20\x20\x20//'+'\x20Number\x20of'+'\x20instances'+'\x20to\x20draw\x0a\x20'+'\x20\x20\x20firstVe'+'rtex:\x20u32,'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Index\x20of\x20t'+'he\x20first\x20v'+'ertex\x0a\x20\x20\x20\x20'+'firstInsta'+'nce:\x20u32,\x20'+'\x20\x20\x20\x20//\x20Fir'+'st\x20instanc'+'e\x20ID\x0a\x20\x20\x20\x20_'+'pad:\x20u32\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Padd'+'ing\x20to\x20mat'+'ch\x20indexed'+'\x20size\x20(unu'+'sed)\x0a};\x0a',bM='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gamma'+'PS\x22\x0a\x20\x20\x20\x20va'+'rying\x20colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(decodeGam'+'ma3(input.'+'color.rgb)'+'),\x20input.c'+'olor.a);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a',AM='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20matr'+'ix_model:\x20'+'mat4x4f;\x0a\x20'+'\x20\x20\x20uniform'+'\x20matrix_vi'+'ewProjecti'+'on:\x20mat4x4'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output\x20:\x20V'+'ertexOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20inpu'+'t.vertex_c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20unifor'+'m.matrix_m'+'odel\x20*\x20inp'+'ut.vertex_'+'position;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',CM='\x0auniform\x20m'+'aterial_ir'+'idescenceR'+'efractionI'+'ndex:\x20f32;'+'\x0a\x0afn\x20iride'+'scence_ior'+'ToFresnelS'+'calar(tran'+'smittedIor'+':\x20f32,\x20inc'+'identIor:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(('+'transmitte'+'dIor\x20-\x20inc'+'identIor)\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'incidentIo'+'r),\x202.0);\x0a'+'}\x0a\x0afn\x20irid'+'escence_io'+'rToFresnel'+'Vec3(trans'+'mittedIor:'+'\x20vec3f,\x20in'+'cidentIor:'+'\x20f32)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'vec3f(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3f(inci'+'dentIor)),'+'\x20vec3f(2.0'+'));\x0a}\x0a\x0afn\x20'+'iridescenc'+'e_fresnelT'+'oIor(f0:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20sqrtF'+'0:\x20vec3f\x20='+'\x20sqrt(f0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20(vec3f(1'+'.0)\x20+\x20sqrt'+'F0)\x20/\x20(vec'+'3f(1.0)\x20-\x20'+'sqrtF0);\x0a}'+'\x0a\x0aconst\x20XY'+'Z_TO_REC70'+'9:\x20mat3x3f'+'\x20=\x20mat3x3f'+'(\x0a\x20\x20\x20\x20vec3'+'f(3.240454'+'2,\x20-1.5371'+'385,\x20-0.49'+'85314),\x0a\x20\x20'+'\x20\x20vec3f(-0'+'.9692660,\x20'+'\x201.8760108'+',\x20\x200.04155'+'60),\x0a\x20\x20\x20\x20v'+'ec3f(0.055'+'6434,\x20-0.2'+'040259,\x20\x201'+'.0572252)\x0a'+');\x0a\x0afn\x20iri'+'descence_s'+'ensitivity'+'(opd:\x20f32,'+'\x20shift:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x20\x20\x20\x20let'+'\x20phase:\x20f3'+'2\x20=\x202.0\x20*\x20'+'PI\x20*\x20opd\x20*'+'\x201.0e-9;\x0a\x20'+'\x20\x20\x20const\x20v'+'al:\x20vec3f\x20'+'=\x20vec3f(5.'+'4856e-13,\x20'+'4.4201e-13'+',\x205.2481e-'+'13);\x0a\x20\x20\x20\x20c'+'onst\x20pos:\x20'+'vec3f\x20=\x20ve'+'c3f(1.6810'+'e+06,\x201.79'+('53e+06,\x202.'+'2084e+06);'+'\x0a\x20\x20\x20\x20const'+'\x20var_:\x20vec'+'3f\x20=\x20vec3f'+'(4.3278e+0'+'9,\x209.3046e'+'+09,\x206.612'+'1e+09);\x0a\x0a\x20'+'\x20\x20\x20var\x20xyz'+':\x20vec3f\x20=\x20'+'val\x20*\x20sqrt'+'(2.0\x20*\x20PI\x20'+'*\x20var_)\x20*\x20'+'cos(pos\x20*\x20'+'phase\x20+\x20sh'+'ift)\x20*\x20exp'+'(-pow(phas'+'e,\x202.0)\x20*\x20'+'var_);\x0a\x20\x20\x20'+'\x20xyz.x\x20=\x20x'+'yz.x\x20+\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+'cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20=\x20xyz\x20/\x20v'+'ec3f(1.068'+'5e-07);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'XYZ_TO_REC'+'709\x20*\x20xyz;'+'\x0a}\x0a\x0afn\x20iri'+'descence_f'+'resnelScal'+'ar(cosThet'+'a:\x20f32,\x20f0'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20x:\x20f32'+'\x20=\x20clamp(1'+'.0\x20-\x20cosTh'+'eta,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'let\x20x2:\x20f3'+'2\x20=\x20x\x20*\x20x;'+'\x0a\x20\x20\x20\x20let\x20x'+'5:\x20f32\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x0a\x0afn'+'\x20iridescen'+'ce_fresnel'+'Vec3(cosTh'+'eta:\x20f32,\x20'+'f0:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'x:\x20f32\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'x2:\x20f32\x20=\x20'+'x\x20*\x20x;\x0a\x20\x20\x20'+'\x20let\x20x5:\x20f'+'32\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x0a\x20\x20'+'\x20\x20return\x20f'+'0\x20+\x20(vec3f'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0afn\x20calcIr'+'idescence('+'outsideIor'+':\x20f32,\x20cos'+'Theta:\x20f32'+',\x20base_f0:'+'\x20vec3f,\x20ir'+'idescenceT'+'hickness:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0a\x20\x20\x20\x20le'+'t\x20iridesce'+'nceIor:\x20f3'+'2\x20=\x20mix(ou')+('tsideIor,\x20'+'uniform.ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20let\x20s'+'inTheta2Sq'+':\x20f32\x20=\x20po'+'w(outsideI'+'or\x20/\x20iride'+'scenceIor,'+'\x202.0)\x20*\x20(1'+'.0\x20-\x20pow(c'+'osTheta,\x202'+'.0));\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2Sq:\x20f32'+'\x20=\x201.0\x20-\x20s'+'inTheta2Sq'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(cosTheta2'+'Sq\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3f(1.0);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2:\x20f32\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20let\x20r'+'0:\x20f32\x20=\x20i'+'ridescence'+'_iorToFres'+'nelScalar('+'iridescenc'+'eIor,\x20outs'+'ideIor);\x0a\x20'+'\x20\x20\x20let\x20r12'+':\x20f32\x20=\x20ir'+'idescence_'+'fresnelSca'+'lar(cosThe'+'ta,\x20r0);\x0a\x20'+'\x20\x20\x20let\x20r21'+':\x20f32\x20=\x20r1'+'2;\x0a\x20\x20\x20\x20let'+'\x20t121:\x20f32'+'\x20=\x201.0\x20-\x20r'+'12;\x0a\x0a\x20\x20\x20\x20l'+'et\x20phi12:\x20'+'f32\x20=\x20sele'+'ct(0.0,\x20PI'+',\x20iridesce'+'nceIor\x20<\x20o'+'utsideIor)'+';\x0a\x20\x20\x20\x20let\x20'+'phi21:\x20f32'+'\x20=\x20PI\x20-\x20ph'+'i12;\x0a\x0a\x20\x20\x20\x20'+'let\x20baseIo'+'r:\x20vec3f\x20='+'\x20iridescen'+'ce_fresnel'+'ToIor(base'+'_f0\x20+\x20vec3'+'f(0.0001))'+';\x0a\x20\x20\x20\x20let\x20'+'r1:\x20vec3f\x20'+'=\x20iridesce'+'nce_iorToF'+'resnelVec3'+'(baseIor,\x20'+'iridescenc'+'eIor);\x0a\x20\x20\x20'+'\x20let\x20r23:\x20'+'vec3f\x20=\x20ir'+'idescence_'+'fresnelVec'+'3(cosTheta'+'2,\x20r1);\x0a\x0a\x20'+'\x20\x20\x20let\x20phi'+'23:\x20vec3f\x20'+'=\x20select(v'+'ec3f(0.0),'+'\x20vec3f(PI)'+',\x20baseIor\x20'+'<\x20vec3f(ir'+'idescenceI'+'or));\x0a\x20\x20\x20\x20'+'let\x20opd:\x20f'+'32\x20=\x202.0\x20*'+'\x20iridescen'+'ceIor\x20*\x20ir'+'idescenceT')+('hickness\x20*'+'\x20cosTheta2'+';\x0a\x20\x20\x20\x20let\x20'+'phi:\x20vec3f'+'\x20=\x20vec3f(p'+'hi21)\x20+\x20ph'+'i23;\x20//\x20Pr'+'omote\x20scal'+'ar\x20phi21\x20t'+'o\x20vec3f\x0a\x0a\x20'+'\x20\x20\x20let\x20r12'+'3Sq:\x20vec3f'+'\x20=\x20clamp(v'+'ec3f(r12)\x20'+'*\x20r23,\x20vec'+'3f(1e-5),\x20'+'vec3f(0.99'+'99));\x0a\x20\x20\x20\x20'+'let\x20r123:\x20'+'vec3f\x20=\x20sq'+'rt(r123Sq)'+';\x0a\x20\x20\x20\x20let\x20'+'rs:\x20vec3f\x20'+'=\x20pow(vec3'+'f(t121),\x20v'+'ec3f(2.0))'+'\x20*\x20r23\x20/\x20('+'vec3f(1.0)'+'\x20-\x20r123Sq)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20c0:\x20vec3f'+'\x20=\x20vec3f(r'+'12)\x20+\x20rs;\x0a'+'\x20\x20\x20\x20var\x20i_'+'irid:\x20vec3'+'f\x20=\x20c0;\x0a\x0a\x20'+'\x20\x20\x20var\x20cm:'+'\x20vec3f\x20=\x20r'+'s\x20-\x20vec3f('+'t121);\x0a\x0a\x20\x20'+'\x20\x20cm\x20=\x20cm\x20'+'*\x20r123;\x0a\x20\x20'+'\x20\x20let\x20sm1:'+'\x20vec3f\x20=\x202'+'.0\x20*\x20iride'+'scence_sen'+'sitivity(1'+'.0\x20*\x20opd,\x20'+'1.0\x20*\x20phi)'+';\x0a\x20\x20\x20\x20i_ir'+'id\x20=\x20i_iri'+'d\x20+\x20cm\x20*\x20s'+'m1;\x0a\x0a\x20\x20\x20\x20c'+'m\x20=\x20cm\x20*\x20r'+'123;\x0a\x20\x20\x20\x20l'+'et\x20sm2:\x20ve'+'c3f\x20=\x202.0\x20'+'*\x20iridesce'+'nce_sensit'+'ivity(2.0\x20'+'*\x20opd,\x202.0'+'\x20*\x20phi);\x0a\x20'+'\x20\x20\x20i_irid\x20'+'=\x20i_irid\x20+'+'\x20cm\x20*\x20sm2;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20max(i_i'+'rid,\x20vec3f'+'(0.0));\x0a}\x0a'+'\x0afn\x20getIri'+'descenceDi'+'ffraction('+'cosTheta:\x20'+'f32,\x20specu'+'larity:\x20ve'+'c3f,\x20iride'+'scenceThic'+'kness:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),PM='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_irides'+'cence:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getIrid'+'escence()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'iridescenc'+'e\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_CON'+'STANT\x0a\x20\x20\x20\x20'+'iridescenc'+'e\x20=\x20irides'+'cence\x20*\x20un'+'iform.mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20=\x20iridesc'+'ence\x20*\x20tex'+'tureSample'+'Bias({STD_'+'IRIDESCENC'+'E_TEXTURE_'+'NAME},\x20{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_CHANNEL}'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dI'+'ridescence'+'\x20=\x20iridesc'+'ence;\x20\x0a}\x0a',MM='\x0auniform\x20m'+'aterial_ir'+'idescenceT'+'hicknessMa'+'x:\x20f32;\x0a\x0a#'+'ifdef\x20STD_'+'IRIDESCENC'+'ETHICKNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20uniform'+'\x20material_'+'iridescenc'+'eThickness'+'Min:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20blen'+'d:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_IRIDESCE'+'NCETHICKNE'+'SS_TEXTURE'+'_NAME},\x20{S'+'TD_IRIDESC'+'ENCETHICKN'+'ESS_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20iridesce'+'nceThickne'+'ss:\x20f32\x20=\x20'+'mix(unifor'+'m.material'+'_iridescen'+'ceThicknes'+'sMin,\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax,\x20bl'+'end);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceT'+'hickness:\x20'+'f32\x20=\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scenceThic'+'kness\x20=\x20ir'+'idescenceT'+'hickness;\x20'+'\x0a}\x0a',DM='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_refr'+'actionInde'+'x:\x20f32;\x0a#e'+'ndif\x0a\x0afn\x20g'+'etIor()\x20{\x0a'+'#ifdef\x20STD'+'_IOR_CONST'+'ANT\x0a\x20\x20\x20\x20dI'+'or\x20=\x20unifo'+'rm.materia'+'l_refracti'+'onIndex;\x0a#'+'else\x0a\x20\x20\x20\x20d'+'Ior\x20=\x201.0\x20'+'/\x201.5;\x0a#en'+'dif\x0a}\x0a',IM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_color'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_direction'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_POINT\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20poi'+'nt\x20lights\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20lig'+'ht{i}_posi'+'tion:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ra'+'dius:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'SPOT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_SPOT\x20//\x20'+'include\x20fu'+'nctionalit'+'y\x20for\x20spot'+'\x20lights\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_di'+'rection:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_inner'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_outer'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20//\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_FALLOFF_'+'SQUARED\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20inv'+'erse\x20squar'+'ed\x20falloff'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_position:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ha'+'lfWidth:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_halfHeigh'+'t:\x20vec3f;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}FALLOFF\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_LINE'+'AR\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20linear\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}FALLOFF'+'\x20==\x20INVERS'+'ESQUARED\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_SQUA'+'RED\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20inverse'+'\x20squared\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20shadow\x20c'+'asting\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowMatri'+'x:\x20mat4x4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20li'+'ght{i}_sha'+'dowIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'{i}_shadow'+'Params:\x20ve'+'c4f;\x20//\x20wi'+'dth,\x20heigh'+'t,\x20bias,\x20r'+'adius\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowSearc'+'hArea:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_cameraPar'+'ams:\x20vec4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'oftShadowP'+'arams:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'directiona'+'l\x20(cascade'+'d)\x20shadows'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20light{i}_'+'shadowMatr'+'ixPalette:'+'\x20array<mat'+'4x4f,\x204>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deDistance'+'s:\x20vec4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deCount:\x20i'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20light{'+'i}_shadowC'+'ascadeBlen'+'d:\x20f32;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20N'+'OT\x20SUPPORT'+'ED\x0a/*\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIG'+'HT{i}SHADO'+'W_PCF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMap:\x20tex'+'ture_depth'+'_2d;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'{i}_shadow'+'MapSampler'+':\x20sampler_'+'comparison'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'light{i}_s'+'hadowMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMapSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIGHT{i}CO'+'OKIE)\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_COOKIE\x20/'+'/\x20include\x20'+'functional'+'ity\x20for\x20co'+'okies\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20OMNI\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20NOT\x20SUPP'+'ORTED\x0a/*\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'plerCube\x20l'+'ight{i}_co'+'okie;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un')+('iform\x20floa'+'t\x20light{i}'+'_cookieInt'+'ensity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20!defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20light{i}'+'_shadowMat'+'rix;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20NO'+'T\x20SUPPORTE'+'D\x0a/*\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_cookie;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_cook'+'ieIntensit'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20!'+'defined(LI'+'GHT{i}CAST'+'SHADOW)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrix;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}COOKIE_TR'+'ANSFORM)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_coo'+'kieMatrix;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20vec2\x20'+'light{i}_c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a*/\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),LM='\x0afn\x20getLig'+'htDiffuse('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',RM='\x0afn\x20evalOm'+'niLight(li'+'ghtPosW:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20vP'+'ositionW\x20-'+'\x20lightPosW'+';\x0a}\x0a',OM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',FM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0afn\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x20\x20\x20'+'\x20//\x20light\x20'+'color\x0a\x20\x20\x20\x20'+'var\x20lightC'+'olor:\x20vec3'+'f\x20=\x20unifor'+'m.light{i}'+'_color;\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20!d'+'efined(LIT'+'_SHADOW_CA'+'TCHER)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ea'+'rly\x20return'+'\x20if\x20the\x20li'+'ght\x20color\x20'+'is\x20black\x20('+'used\x20by\x20sh'+'adow\x20catch'+'er\x20-\x20this\x20'+'way\x20this\x20l'+'ight\x20is\x20ve'+'ry\x20cheap)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(all(ligh'+'tColor\x20==\x20'+'vec3f(0.0,'+'\x200.0,\x200.0)'+'))\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20DIRECTION'+'AL\x20//\x20dire'+'ctional\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightD'+'irNormW\x20=\x20'+'uniform.li'+'ght{i}_dir'+'ection;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20omni\x20o'+'r\x20spot\x20lig'+'ht\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(u'+'niform.lig'+'ht{i}_posi'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tDirNormW\x20'+'=\x20normaliz'+'e(lightDir'+'W);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIGHT'+'{i}COOKIE)'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20SPOT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_FAL'+'LOFF\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+('eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DXform(u'+'niform.lig'+'ht{i}_cook'+'ie,\x20unifor'+'m.light{i}'+'_shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_cookieIn'+'tensity,\x20u'+'niform.lig'+'ht{i}_cook'+'ieMatrix,\x20'+'uniform.li'+'ght{i}_coo'+'kieOffset)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookie2D('+'uniform.li'+'ght{i}_coo'+'kie,\x20unifo'+'rm.light{i'+'}_shadowMa'+'trix,\x20unif'+'orm.light{'+'i}_cookieI'+'ntensity).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClipXfo'+'rm(uniform'+'.light{i}_'+'cookie,\x20un'+'iform.ligh'+'t{i}_shado'+'wMatrix,\x20u'+'niform.lig'+'ht{i}_cook'+'ieIntensit'+'y,\x20uniform'+'.light{i}_'+'cookieMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieOff'+'set).{LIGH'+'T{i}COOKIE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClip(un'+'iform.ligh'+'t{i}_cooki'+'e,\x20uniform'+'.light{i}_'+'shadowMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieInt'+'ensity).{L'+'IGHT{i}COO'+'KIE_CHANNE'+'L};\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookieCub'+'e(uniform.'+'light{i}_c'+'ookie,\x20uni'+'form.light'+'{i}_shadow'+'Matrix,\x20un'+'iform.ligh'+'t{i}_cooki'+'eIntensity'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multipl'+'y\x20light\x20co'+'lor\x20by\x20the'+'\x20cookie\x20at'+'tenuation\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightCol'+'or\x20=\x20light'+'Color\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dista'+'nce\x20fallof'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20PUNCTUAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}FALLOF'+'F\x20==\x20LINEA'+'R\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20=\x20get'+'FalloffLin'+'ear(unifor'+'m.light{i}'+'_radius,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20getFal'+'loffInvSqu'+'ared(unifo'+'rm.light{i'+'}_radius,\x20'+'lightDirW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'non\x20punctu'+'al\x20lights\x20'+'only\x20gets\x20'+'the\x20range\x20'+'window\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20getFall'+'offWindow('+'uniform.li'+'ght{i}_rad'+'ius,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20angle'+'\x20falloff\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20SPO'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d')+('efined(LIG'+'HT{i}COOKI'+'E)\x20||\x20defi'+'ned(LIGHT{'+'i}COOKIE_F'+'ALLOFF)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20dAtten\x20'+'*\x20getSpotE'+'ffect(unif'+'orm.light{'+'i}_directi'+'on,\x20unifor'+'m.light{i}'+'_innerCone'+'Angle,\x20uni'+'form.light'+'{i}_outerC'+'oneAngle,\x20'+'dLightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20if\x20'+'(dAtten\x20<\x20'+'0.00001)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20evaluate\x20'+'area\x20light'+'\x20values\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20RECT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcRectLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20calcDiskL'+'ightValues'+'(uniform.l'+'ight{i}_po'+'sition,\x20un'+'iform.ligh'+'t{i}_halfW'+'idth,\x20unif'+'orm.light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20SPH'+'ERE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20calc'+'SphereLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20dif'+'fuse\x20light'+'ing\x20-\x20LTC\x20'+'lights\x20do\x20'+'not\x20mix\x20di'+'ffuse\x20ligh'+'ting\x20into\x20'+'attenuatio'+'n\x20that\x20aff'+'ects\x20specu'+'lar\x0a\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P')+('UNCTUAL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'attenDiffu'+'se\x20-\x20separ'+'ate\x20diffus'+'e\x20attenuat'+'ion\x20for\x20no'+'n-punctual'+'\x20light\x20sou'+'rces\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20NB:\x20A\x20bet'+'ter\x20approx'+'imation\x20pe'+'rhaps\x20usin'+'g\x20wrap\x20lig'+'hting\x20coul'+'d\x20be\x20imple'+'mented\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20at'+'tenDiffuse'+':\x20f32\x20=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x2016.0\x20is\x20'+'a\x20constant'+'\x20that\x20is\x20i'+'n\x20getFallo'+'ffInvSquar'+'ed()\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20attenDi'+'ffuse:\x20f32'+'\x20=\x20getRect'+'LightDiffu'+'se(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20light'+'DirW,\x20dLig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20DISK\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'attenDiffu'+'se:\x20f32\x20=\x20'+'getDiskLig'+'htDiffuse('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20lightDir'+'W,\x20dLightD'+'irNormW)\x20*'+'\x2016.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20LIGHT'+'{i}SHAPE\x20='+'=\x20SPHERE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20a'+'ttenDiffus'+'e:\x20f32\x20=\x20g'+'etSphereLi'+'ghtDiffuse'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20lightDi'+'rW,\x20dLight'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20one\x20par'+'ameter\x20is\x20'+'unused\x20for')+('\x20punctual\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20dAtten'+'\x20*\x20getLigh'+'tDiffuse(l'+'itArgs_wor'+'ldNormal,\x20'+'vec3(0.0),'+'\x20dLightDir'+'NormW);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20the\x20sha'+'dow\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}CASTS'+'HADOW\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20shadow:'+'\x20f32\x20=\x20get'+'Shadow{i}('+'vec3(0.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20shadow:\x20'+'f32\x20=\x20getS'+'hadow{i}(l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Ap'+'ply\x20shadow'+'\x20intensity'+'\x20to\x20the\x20sh'+'adow\x20value'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadow\x20=\x20mi'+'x(1.0,\x20sha'+'dow,\x20unifo'+'rm.light{i'+'}_shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20dA'+'tten\x20*\x20sha'+'dow;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'SHADOW_CAT'+'CHER)\x20&&\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20accumula'+'te\x20shadows'+'\x20for\x20direc'+'tional\x20lig'+'hts\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSha'+'dowCatcher'+'\x20=\x20dShadow'+'Catcher\x20*\x20'+'shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20-\x20they'+'\x20do\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((('+'attenDiffu'+'se\x20*\x20dAtte'+'n)\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20dLTC'+'SpecFres))')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'((attenDif'+'fuse\x20*\x20dAt'+'ten)\x20*\x20lig'+'htColor);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(AREA_'+'LIGHTS)\x20&&'+'\x20defined(L'+'IT_SPECULA'+'R)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((d'+'Atten\x20*\x20li'+'ghtColor)\x20'+'*\x20(1.0\x20-\x20l'+'itArgs_spe'+'cularity))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'(dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20spe'+'cular\x20ligh'+'ting\x0a\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}AFFECT'+'_SPECULARI'+'TY\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20==\x20REC'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getRe'+'ctLightSpe'+'cular(litA'+'rgs_clearc'+'oat_worldN'+'ormal,\x20dVi'+'ewDirW)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20=\x20ccSpec'+'ularLight\x20'+'+\x20(ccLTCSp'+'ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20SPHER'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_clea'+'rcoat_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20=\x20dS'+'pecularLig'+'ht\x20+\x20(dLTC'+'SpecFres\x20*'+'\x20getRectLi'+'ghtSpecula'+'r(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20(dLT'+'CSpecFres\x20'+'*\x20getDiskL'+'ightSpecul'+'ar(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW)\x20*\x20dAt'+'ten\x20*\x20ligh'+'tColor);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'=\x20dSpecula'+'rLight\x20+\x20('+'dLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20//\x20punctu'+'al\x20light\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20is\x20fr'+'esnel\x20need'+'ed\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC')+('TIONAL\x20&&\x20'+'LIT_FRESNE'+'L_MODEL\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ha'+'lfDirW:\x20ve'+'c3f\x20=\x20norm'+'alize(-dLi'+'ghtDirNorm'+'W\x20+\x20dViewD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20if\x20LTC\x20li'+'ghts\x20are\x20p'+'resent,\x20sp'+'ecular\x20mus'+'t\x20be\x20accum'+'ulated\x20wit'+'h\x20specular'+'ity\x20(specu'+'larity\x20is\x20'+'pre\x20multip'+'lied\x20by\x20pu'+'nctual\x20lig'+'ht\x20fresnel'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'specularCC'+':\x20vec3f\x20=\x20'+'getLightSp'+'ecular(hal'+'fDirW,\x20ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20dLightDir'+'NormW,\x20lit'+'Args_clear'+'coat_gloss'+',\x20dTBN)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightspecu'+'larCC\x20=\x20li'+'ghtspecula'+'rCC\x20*\x20getF'+'resnelCC(d'+'ot(dViewDi'+'rW,\x20halfDi'+'rW));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20=\x20ccSpecu'+'larLight\x20+'+'\x20lightspec'+'ularCC;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sSpecul'+'arLight\x20=\x20'+'sSpecularL'+'ight\x20+\x20(ge'+'tLightSpec'+'ularSheen('+'halfDirW,\x20'+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20dLightDi')+('rNormW,\x20li'+'tArgs_shee'+'n_gloss)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tSpecular:'+'\x20vec3f\x20=\x20g'+'etLightSpe'+'cular(half'+'DirW,\x20dRef'+'lDirW,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20d'+'LightDirNo'+'rmW,\x20litAr'+'gs_gloss,\x20'+'dTBN)\x20*\x20dA'+'tten\x20*\x20lig'+'htColor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'FRESNEL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20=\x20li'+'ghtSpecula'+'r\x20*\x20getFre'+'snel(dot(d'+'ViewDirW,\x20'+'halfDirW),'+'\x20litArgs_g'+'loss,\x20litA'+'rgs_specul'+'arity,\x20iri'+'descenceFr'+'esnel,\x20lit'+'Args_iride'+'scence_int'+'ensity);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightSpecul'+'ar\x20=\x20light'+'Specular\x20*'+'\x20getFresne'+'l(dot(dVie'+'wDirW,\x20hal'+'fDirW),\x20li'+'tArgs_glos'+'s,\x20litArgs'+'_speculari'+'ty);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20light'+'Specular\x20='+'\x20lightSpec'+'ular\x20*\x20lit'+'Args_specu'+'larity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20+\x20li'+'ghtSpecula'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'#endif\x0a'),NM='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowSam'+'pleCoord{i'+'}(shadowTr'+'ansform:\x20m'+'at4x4f,\x20sh'+'adowParams'+':\x20vec4f,\x20w'+'orldPositi'+'on:\x20vec3f,'+'\x20lightPos:'+'\x20vec3f,\x20li'+'ghtDir:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'lightDirNo'+'rm:\x20vec3f,'+'\x20normal:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'surfacePos'+'ition\x20=\x20wo'+'rldPositio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_POINT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+'NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(*l'+'ightDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20surfac'+'ePosition\x20'+'+\x20normal\x20*'+'\x20shadowPar'+'ams.y\x20*\x20cl'+'amp(1.0\x20-\x20'+'dot(normal'+',\x20-lightDi'+'rNorm),\x200.'+'0,\x201.0)\x20*\x20'+'distScale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20*li'+'ghtDir\x20=\x20s'+'urfacePosi'+'tion\x20-\x20lig'+'htPos;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'*lightDir;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}_SHADOW_'+'SAMPLE_NOR'+'MAL_OFFSET'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_SAMP'+'LE_ORTHO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dis'+'tScale:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20distSca'+'le:\x20f32\x20=\x20'+'abs(dot(vP'+'ositionW\x20-'+'\x20lightPos,'+'\x20lightDirN'+'orm));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Use'+'\x20var\x20for\x20m'+'odificatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20po'+'sitionInSh'+'adowSpace:'+'\x20vec4f\x20=\x20s'+'hadowTrans'+'form\x20*\x20vec'+'4f(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM')+('PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20=\x20pos'+'itionInSha'+'dowSpace.x'+'yz\x20/\x20posit'+'ionInShado'+'wSpace.w;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20position'+'InShadowSp'+'ace.xy\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xy\x20/\x20posi'+'tionInShad'+'owSpace.w;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20positionI'+'nShadowSpa'+'ce.z\x20=\x20len'+'gth(*light'+'Dir)\x20*\x20sha'+'dowParams.'+'w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20this\x20is\x20c'+'urrently\x20u'+'nused\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SHADO'+'W_SAMPLE_Z'+'_BIAS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20posit'+'ionInShado'+'wSpace.z\x20+'+'=\x20getShado'+'wBias(shad'+'owParams.x'+',\x20shadowPa'+'rams.z);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20sur'+'facePositi'+'on;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20evalu'+'ation\x20func'+'tion\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'w{i}(light'+'DirW_in:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20s'+'hadow\x20casc'+'ades\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_CASC'+'ADES\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20select\x20sh'+'adow\x20casca'+'de\x20matrix\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20casc'+'adeIndex:\x20'+'i32\x20=\x20getS'+'hadowCasca'+'deIndex(un'+'iform.ligh'+'t{i}_shado'+'wCascadeDi'+'stances,\x20u'+'niform.lig'+'ht{i}_shad')+('owCascadeC'+'ount);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_CASCADE'+'_BLEND\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20cascade'+'Index\x20=\x20di'+'therShadow'+'CascadeInd'+'ex(cascade'+'Index,\x20uni'+'form.light'+'{i}_shadow'+'CascadeDis'+'tances,\x20un'+'iform.ligh'+'t{i}_shado'+'wCascadeCo'+'unt,\x20unifo'+'rm.light{i'+'}_shadowCa'+'scadeBlend'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowMatri'+'x:\x20mat4x4f'+'\x20=\x20uniform'+'.light{i}_'+'shadowMatr'+'ixPalette['+'cascadeInd'+'ex];\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20sha'+'dowMatrix:'+'\x20mat4x4f\x20='+'\x20uniform.l'+'ight{i}_sh'+'adowMatrix'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20lightDirA'+'rg\x20=\x20light'+'DirW_in;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20direc'+'tional\x20lig'+'ht\x20does\x20no'+'t\x20have\x20a\x20p'+'osition\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20getSh'+'adowSample'+'Coord{i}(s'+'hadowMatri'+'x,\x20uniform'+'.light{i}_'+'shadowPara'+'ms,\x20vPosit'+'ionW,\x20vec3'+'f(0.0),\x20&l'+'ightDirArg'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owCoord:\x20v'+'ec3f\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_shadowPa'+'rams,\x20vPos'+'itionW,\x20un'+'iform.ligh'+'t{i}_posit'+'ion,\x20&ligh'+'tDirArg,\x20d'+'LightDirNo'+'rmW,\x20dVert'+'exNormalW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('#endif\x0a\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Fade\x20direc'+'tional\x20sha'+'dow\x20at\x20the'+'\x20far\x20dista'+'nce\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'owCoord\x20=\x20'+'fadeShadow'+'(shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowCas'+'cadeDistan'+'ces);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20-----\x20s'+'ample\x20the\x20'+'shadow\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20---'+'--\x20directi'+'onal\x20light'+'\x20-----\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20VSM_'+'16F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowVSM1'+'6(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s,\x205.54);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20VS'+'M_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowVS'+'M32(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x2015.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2f(lengt'+'h(uniform.'+'light{i}_h'+'alfWidth),'+'\x20length(un'+'iform.ligh'+'t{i}_halfH'+'eight))\x20*\x20'+'uniform.li'+'ght{i}_sha'+'dowSearchA'+'rea;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCSS(ligh'+'t{i}_shado'+'wMap,\x20ligh'+'t{i}_shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20unif'+'orm.light{'+'i}_shadowP'+'arams,\x20uni'+'form.light'+'{i}_camera'+'Params,\x20sh'+'adowSearch'+'Area,\x20ligh'+'tDirW_in);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CSS(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x20unifo'+'rm.light{i'+'}_cameraPa'+'rams,\x20unif'+'orm.light{'+'i}_softSha'+'dowParams,'+'\x20lightDirW'+'_in);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF1_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF1x1('+'light{i}_s'+'hadowMap,\x20'+'light{i}_s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'uniform.li'+'ght{i}_sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_16F\x20|'+'|\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF3_3'+'2F\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowPCF3x'+'3(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_16F'+'\x20||\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF5')+('_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x20//\x20-'+'----\x20spot\x20'+'light\x20----'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM16'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x205.54,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM32'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x2015.0,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20!=\x20PU'+'NCTUAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f\x20=\x20vec'+'2f(length('+'uniform.li'+'ght{i}_hal'+'fWidth),\x20l'+'ength(unif'+'orm.light{'+'i}_halfHei'+'ght))\x20*\x20un'+'iform.ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowSearc'+'hArea:\x20vec')+('2f\x20=\x20vec2f'+'(uniform.l'+'ight{i}_sh'+'adowSearch'+'Area);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCSS'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x20uniform.'+'light{i}_c'+'ameraParam'+'s,\x20shadowS'+'earchArea,'+'\x20lightDirW'+'_in);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'16F\x20||\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF1_32F\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF1x1'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'5_16F\x20||\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF5_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCF5'+'x5(light{i'+'}_shadowMa'+'p,\x20light{i'+'}_shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20uniform'+'.light{i}_'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20')+('\x20\x20\x20#endif\x0a'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x20//\x20--'+'---\x20omni\x20l'+'ight\x20-----'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f;\x20//\x20U'+'se\x20var\x20bec'+'ause\x20assig'+'ned\x20in\x20if/'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owSearchAr'+'ea:\x20vec2f\x20'+'=\x20vec2f(le'+'ngth(unifo'+'rm.light{i'+'}_halfWidt'+'h),\x20length'+'(uniform.l'+'ight{i}_ha'+'lfHeight))'+'\x20*\x20uniform'+'.light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'SearchArea'+':\x20vec2f\x20=\x20'+'vec2f(unif'+'orm.light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20un'+'iform.ligh'+'t{i}_camer'+'aParams,\x20s'+'hadowSearc'+'hArea,\x20lig'+'htDirW_in)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in')+(');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),kM='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'var\x20areaLi'+'ghtsLutTex'+'1:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20areaLight'+'sLutTex2:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20areaL'+'ightsLutTe'+'x2Sampler:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'omni\x20/\x20spo'+'t\x20PCSS\x20is\x20'+('not\x20suppor'+'ted\x20on\x20Web'+'GPU\x20curren'+'tly,\x20as\x20th'+'is\x20is\x20only'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0a\x20\x20\x20\x20'+'//\x20#includ'+'e\x20\x22shadowP'+'CSSPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22shadowSof'+'tPS\x22\x0a#endi'+'f\x0a\x0a#if\x20def'+'ined(SHADO'+'W_KIND_VSM'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owEVSMPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22falloff'+'LinearPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_SQUARED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fallof'+'fInvSquare'+'dPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_CODE_L'+'IGHTS_POIN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDirPointP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22spotPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'CODE_COOKI'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22cook'+'iePS\x22\x0a#end'+'if\x0a\x0a//\x20clu'+'stered\x20lig'+'hting\x0a#ifd'+'ef\x20LIT_CLU'+'STERED_LIG'+'HTS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22cl'+'usteredLig'+'htPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIGHT_COU'+'NT\x20>\x200\x0a\x20\x20\x20'+'\x20//\x20LOOP\x20-'+'\x20generate\x20'+'shadow\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionShadow'+'PS,\x20LIGHT_'+'COUNT\x22\x0a\x0a\x20\x20'+'\x20\x20//\x20LOOP\x20'+'-\x20generate'+'\x20light\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionLightP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a'),UM='\x0afn\x20addLig'+'htMap(\x0a\x20\x20\x20'+'\x20lightmap:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20dir:\x20vec'+'3f,\x0a\x20\x20\x20\x20wo'+'rldNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20viewDir:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20reflecti'+'onDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20ve'+'rtexNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20tbn:\x20ma'+'t3x3f\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20iridesce'+'nceIntensi'+'ty:\x20f32\x0a#e'+'ndif\x0a)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x20&&'+'\x20defined(L'+'IT_DIR_LIG'+'HTMAP)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'dot(dir,\x20d'+'ir)\x20<\x200.00'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20dD'+'iffuseLigh'+'t\x20+\x20lightm'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20vli'+'ght:\x20f32\x20='+'\x20saturate('+'dot(dir,\x20-'+'vertexNorm'+'al));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20flight:\x20'+'f32\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20nlig'+'ht:\x20f32\x20=\x20'+'(flight\x20/\x20'+'max(vlight'+',\x200.01))\x20*'+'\x200.5;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20=\x20dDiff'+'useLight\x20+'+'\x20lightmap\x20'+'*\x20nlight\x20*'+'\x202.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20halfDir'+':\x20vec3f\x20=\x20'+'normalize('+'-dir\x20+\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20specula'+'rLight:\x20ve'+'c3f\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+('_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'=\x20specular'+'Light\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(d'+'ot(viewDir'+',\x20halfDir)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gloss,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20,\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceI'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20specularL'+'ight;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'non-direct'+'ional\x20ligh'+'tmap\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20+\x20ligh'+'tmap;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),BM='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'var<privat'+'e>\x20dLightm'+'apDir:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'dirLightMa'+'p:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_dirL'+'ightMapSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0afn\x20getL'+'ightMap()\x20'+'{\x0a\x0a\x20\x20\x20\x20dLi'+'ghtmap\x20=\x20v'+'ec3f(1.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_TEXTURE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Lightmap\x20='+'\x20dLightmap'+'\x20*\x20{STD_LI'+'GHT_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_LIGHT_T'+'EXTURE_NAM'+'E},\x20{STD_L'+'IGHT_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+')).{STD_LI'+'GHT_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_LIGHTMAP'+'_DIR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20dir:\x20vec3'+'f\x20=\x20textur'+'eSampleBia'+'s(texture_'+'dirLightMa'+'p,\x20texture'+'_dirLightM'+'apSampler,'+'\x20{STD_LIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).xyz\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20d'+'irDot\x20=\x20do'+'t(dir,\x20dir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tmapDir\x20=\x20'+'select(vec'+'3(0.0),\x20di'+'r\x20/\x20sqrt(d'+'irDot),\x20di'+'rDot\x20>\x200.0'+'01);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dL'+'ightmap\x20=\x20'+'dLightmap\x20'+'*\x20saturate'+'(vVertexCo'+'lor.{STD_L'+'IGHT_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a',zM='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'fn\x20calcLig'+'htSpecular'+'(gloss:\x20f3'+'2,\x20worldNo'+'rmal:\x20vec3'+'f,\x20viewDir'+':\x20vec3f,\x20h'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'tbn:\x20mat3x'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20PI:\x20f32\x20='+'\x203.1415926'+'53589793;\x0a'+'\x20\x20\x20\x20let\x20ro'+'ughness:\x20f'+'32\x20=\x20max(('+'1.0\x20-\x20glos'+'s)\x20*\x20(1.0\x20'+'-\x20gloss),\x20'+'0.001);\x0a\x20\x20'+'\x20\x20let\x20alph'+'aRoughness'+':\x20f32\x20=\x20ro'+'ughness\x20*\x20'+'roughness;'+'\x0a\x20\x20\x20\x20let\x20a'+'nisotropy:'+'\x20f32\x20=\x20dAn'+'isotropy;\x0a'+'\x20\x20\x20\x20let\x20di'+'rection:\x20v'+'ec2f\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x0a\x20'+'\x20\x20\x20let\x20at:'+'\x20f32\x20=\x20mix'+'(alphaRoug'+'hness,\x201.0'+',\x20anisotro'+'py\x20*\x20aniso'+'tropy);\x0a\x20\x20'+'\x20\x20let\x20ab:\x20'+'f32\x20=\x20clam'+'p(alphaRou'+'ghness,\x200.'+'001,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20NoH:\x20f32\x20'+'=\x20dot(worl'+'dNormal,\x20h'+');\x0a\x20\x20\x20\x20let'+'\x20ToH:\x20f32\x20'+'=\x20dot(anis'+'otropicT,\x20'+'h);\x0a\x20\x20\x20\x20le'+'t\x20BoH:\x20f32'+'\x20=\x20dot(ani'+'sotropicB,'+'\x20h);\x0a\x0a\x20\x20\x20\x20'+'let\x20a2:\x20f3'+'2\x20=\x20at\x20*\x20a'+'b;\x0a\x20\x20\x20\x20let'+'\x20v:\x20vec3f\x20'+'=\x20vec3f(ab'+'\x20*\x20ToH,\x20at'+'\x20*\x20BoH,\x20a2'+'\x20*\x20NoH);\x0a\x20'+'\x20\x20\x20let\x20v2:'+'\x20f32\x20=\x20dot'+'(v,\x20v);\x0a\x20\x20'+'\x20\x20let\x20w2:\x20'+'f32\x20=\x20a2\x20/'+'\x20v2;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20let\x20To'+'V:\x20f32\x20=\x20d'+'ot(anisotr'+'opicT,\x20vie'+('wDir);\x0a\x20\x20\x20'+'\x20let\x20BoV:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20viewDi'+'r);\x0a\x20\x20\x20\x20le'+'t\x20ToL:\x20f32'+'\x20=\x20dot(ani'+'sotropicT,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20let\x20BoL:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20let\x20No'+'V:\x20f32\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'let\x20NoL:\x20f'+'32\x20=\x20dot(w'+'orldNormal'+',\x20-lightDi'+'rNorm);\x0a\x0a\x20'+'\x20\x20\x20let\x20lam'+'bdaV:\x20f32\x20'+'=\x20NoL\x20*\x20le'+'ngth(vec3f'+'(at\x20*\x20ToV,'+'\x20ab\x20*\x20BoV,'+'\x20NoV));\x0a\x20\x20'+'\x20\x20let\x20lamb'+'daL:\x20f32\x20='+'\x20NoV\x20*\x20len'+'gth(vec3f('+'at\x20*\x20ToL,\x20'+'ab\x20*\x20BoL,\x20'+'NoL));\x0a\x20\x20\x20'+'\x20let\x20G:\x20f3'+'2\x20=\x200.5\x20/\x20'+'(lambdaV\x20+'+'\x20lambdaL);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20D\x20*\x20G;\x0a'+'}\x0a\x0afn\x20getL'+'ightSpecul'+'ar(h:\x20vec3'+'f,\x20reflDir'+':\x20vec3f,\x20w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'DirNorm:\x20v'+'ec3f,\x20glos'+'s:\x20f32,\x20tb'+'n:\x20mat3x3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20calcLigh'+'tSpecular('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir,\x20h'+',\x20lightDir'+'Norm,\x20tbn)'+';\x0a}\x0a'),VM='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afn\x20c'+'alcLightSp'+'ecular(glo'+'ss:\x20f32,\x20w'+'orldNormal'+':\x20vec3f,\x20h'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20nh:\x20'+'f32\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'specPow:\x20f'+'32\x20=\x20exp2('+'gloss\x20*\x2011'+'.0);\x20//\x20gl'+'ossiness\x20i'+'s\x20linear,\x20'+'power\x20is\x20n'+'ot;\x200\x20-\x2020'+'48\x0a\x0a\x20\x20\x20\x20//'+'\x20Hack:\x20On\x20'+'Mac\x20OS\x20X,\x20'+'calling\x20po'+'w\x20with\x20zer'+'o\x20for\x20the\x20'+'exponent\x20g'+'enerates\x20h'+'ideous\x20art'+'ifacts\x20so\x20'+'bias\x20up\x20a\x20'+'little\x0a\x20\x20\x20'+'\x20specPow\x20='+'\x20max(specP'+'ow,\x200.0001'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20pow(n'+'h,\x20specPow'+')\x20*\x20(specP'+'ow\x20+\x202.0)\x20'+'/\x208.0;\x0a}\x0a\x0a'+'fn\x20getLigh'+'tSpecular('+'h:\x20vec3f,\x20'+'reflDir:\x20v'+'ec3f,\x20worl'+'dNormal:\x20v'+'ec3f,\x20view'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20tbn:\x20'+'mat3x3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',GM='\x0a\x0afn\x20sheen'+'D(normal:\x20'+'vec3f,\x20h:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'PI:\x20f32\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20let\x20inv'+'R:\x20f32\x20=\x201'+'.0\x20/\x20(roug'+'hness\x20*\x20ro'+'ughness);\x0a'+'\x20\x20\x20\x20var\x20co'+'s2h:\x20f32\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20=\x20c'+'os2h\x20*\x20cos'+'2h;\x0a\x20\x20\x20\x20le'+'t\x20sin2h:\x20f'+'32\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'fn\x20sheenV('+'normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20light:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20max(dot'+'(normal,\x20v'+'iewDir),\x200'+'.000001);\x0a'+'\x20\x20\x20\x20let\x20No'+'L:\x20f32\x20=\x20m'+'ax(dot(nor'+'mal,\x20light'+'),\x200.00000'+'1);\x0a\x20\x20\x20\x20re'+'turn\x201.0\x20/'+'\x20(4.0\x20*\x20(N'+'oL\x20+\x20NoV\x20-'+'\x20NoL\x20*\x20NoV'+'));\x0a}\x0a\x0afn\x20'+'getLightSp'+'ecularShee'+'n(h:\x20vec3f'+',\x20worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f,\x20li'+'ghtDirNorm'+':\x20vec3f,\x20s'+'heenGloss:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20let\x20V:\x20f'+'32\x20=\x20sheen'+'V(worldNor'+'mal,\x20viewD'+'ir,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20return'+'\x20D\x20*\x20V;\x0a}',HM='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afn\x20linear'+'izeDepthWi'+'thParams(z'+':\x20f32,\x20cam'+'eraParams:'+'\x20vec4f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20if\x20(camer'+'aParams.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(came'+'raParams.z'+'\x20*\x20cameraP'+'arams.y)\x20/'+'\x20(cameraPa'+'rams.y\x20+\x20z'+'\x20*\x20(camera'+'Params.z\x20-'+'\x20cameraPar'+'ams.y));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20cam'+'eraParams.'+'z\x20+\x20z\x20*\x20(c'+'ameraParam'+'s.y\x20-\x20came'+'raParams.z'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0a#ifndef\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20#de'+'fine\x20CAMER'+'APLANES\x0a\x20\x20'+'\x20\x20uniform\x20'+'camera_par'+'ams:\x20vec4f'+';\x20\x20\x20//\x20x:\x20'+'1\x20/\x20camera'+'_far,\x20\x20\x20\x20\x20'+'\x20y:\x20camera'+'_far,\x20\x20\x20\x20\x20'+'z:\x20camera_'+'near,\x20\x20\x20\x20\x20'+'\x20\x20\x20w:\x20is_o'+'rtho\x0a#endi'+'f\x0a\x0afn\x20line'+'arizeDepth'+'(z:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pthWithPar'+'ams(z,\x20uni'+'form.camer'+'a_params);'+'\x0a}\x0a#endif\x20'+'//\x20LINEARI'+'ZE_DEPTH\x0a',WM='\x0afn\x20evalua'+'teBackend('+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'//\x20apply\x20S'+'SAO\x20during'+'\x20lighting\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SSAO\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_ao\x20='+'\x20litArgs_a'+'o\x20*\x20textur'+'eSampleLev'+'el(ssaoTex'+'ture,\x20ssao'+'TextureSam'+'pler,\x20pcPo'+'sition.xy\x20'+'*\x20uniform.'+'ssaoTextur'+'eSizeInv,\x20'+'0.0).r;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nsform\x20tan'+'gent\x20space'+'\x20normals\x20t'+'o\x20world\x20sp'+'ace\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_N'+'EEDS_NORMA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getReflD'+'ir(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20litAr'+'gs_gloss,\x20'+'dTBN);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'DirW\x20=\x20nor'+'malize(-re'+'flect(dVie'+'wDirW,\x20lit'+'Args_clear'+'coat_world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'f0:\x20f32\x20=\x20'+'1.0\x20/\x20litA'+'rgs_ior;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20f0\x20=\x20(f0\x20'+'-\x201.0)\x20/\x20('+'f0\x20+\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20f0\x20=\x20f0'+'\x20*\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+('ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceF'+'resnel:\x20ve'+'c3f\x20=\x20getI'+'ridescence'+'Diffractio'+'n(saturate'+'(dot(dView'+'DirW,\x20litA'+'rgs_worldN'+'ormal)),\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_ir'+'idescence_'+'thickness)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20ambi'+'ent\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddAmbient('+'litArgs_wo'+'rldNormal)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20=\x20d'+'DiffuseLig'+'ht\x20*\x20(1.0\x20'+'-\x20litArgs_'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20move\x20ambi'+'ent\x20color\x20'+'out\x20of\x20dif'+'fuse\x20(used'+'\x20by\x20Lightm'+'apper,\x20to\x20'+'multiply\x20a'+'mbient\x20col'+'or\x20by\x20accu'+'mulated\x20AO'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SEPARATE_'+'AMBIENT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20dAmbie'+'ntLight:\x20v'+'ec3f\x20=\x20dDi'+'ffuseLight'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'vec3(0.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20unif'+'orm.materi'+'al_ambient'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20LI'+'T_OCCLUDE_'+'DIRECT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeDiff'+'use(litArg'+'s_ao);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTMAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20litArgs_l'+'ightmap,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmapDi'+'r,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dViewDirW,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dReflD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dVertexNor'+'malW,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'BN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_irides'+'cence_inte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTING\x20||'+'\x20LIT_REFLE'+'CTIONS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddReflecti'+'onCC(ccRef'+'lDirW,\x20lit'+'Args_clear'+'coat_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'ccFresnel\x20'+'=\x20getFresn'+'elCC(dot(d'+'ViewDirW,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccRefle'+'ction\x20=\x20cc'+'Reflection'+'\x20*\x20ccFresn'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccFr'+'esnel\x20=\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'ection\x20=\x20c'+'cReflectio'+'n\x20*\x20litArg'+'s_specular'+'ityFactor;')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20addR'+'eflectionS'+'heen(litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20lit'+'Args_sheen'+'_gloss);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20Fresne'+'l\x20has\x20to\x20b'+'e\x20applied\x20'+'to\x20reflect'+'ions\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'Reflection'+'(dReflDirW'+',\x20litArgs_'+'gloss);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_FRESNEL_'+'MODEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction.rgb\x20'+'*\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'dReflectio'+'n.rgb\x20*\x20li'+'tArgs_spec'+'ularity,\x20d'+'Reflection'+'.a);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve')+('c4f(dRefle'+'ction.rgb\x20'+'*\x20litArgs_'+'specularit'+'yFactor,\x20d'+'Reflection'+'.a);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20AREA'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20*'+'\x20litArgs_s'+'pecularity'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20evalua'+'te\x20materia'+'l\x20based\x20ar'+'ea\x20lights\x20'+'data,\x20shar'+'ed\x20by\x20all\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcLTCLight'+'Values(lit'+'Args_gloss'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20litArg'+'s_specular'+'ity,\x20litAr'+'gs_clearco'+'at_gloss,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20evalua'+'te\x20all\x20non'+'-clustered'+'\x20lights\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22lightEval'+'uationPS,\x20'+'LIGHT_COUN'+'T\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'USTERED_LI'+'GHTS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'ClusteredL'+'ights(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dR'+'eflDirW,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_CLEARCOAT'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20ccRe'+'flDirW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'litArgs_sp'+'ecularity,'+'\x20dVertexNo'+'rmalW,\x20dTB'+'N,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_g'+'loss,\x20litA'+'rgs_sheen_'+'gloss,\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20AREA_LI'+'GHTS\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x20has'+'\x20to\x20be\x20acc'+'umulated\x20d'+'ifferently'+'\x20if\x20we\x20wan'+'t\x20area\x20lig'+'hts\x20to\x20loo'+'k\x20correct\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_clearc'+'oat_specul'+'arity\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20vec3(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addRefra'+'ction(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_worldNorm'+'al,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dViewDirW'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_specu'+'larity,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr')+('gs_albedo,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_tran'+'smission,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_ior,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_dispers'+'ion\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'ambient\x20oc'+'clusion\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_OCCLU'+'DE_DIRECT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeD'+'iffuse(lit'+'Args_ao);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeSpec'+'ular(litAr'+'gs_gloss,\x20'+'litArgs_ao'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20*\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20!defi'+'ned(LIT_OP'+'ACITY_FADE'+'S_SPECULAR'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'==\x20NORMAL\x20'+'||\x20LIT_BLE'+'ND_TYPE\x20=='+'\x20PREMULTIP'+'LIED\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specLum:'+'\x20f32\x20=\x20dot'+'((dSpecula'+'rLight\x20+\x20d'+'Reflection'+'.rgb\x20*\x20dRe'+'flection.a'+'),\x20vec3f(\x20'+'0.2126,\x200.'+'7152,\x200.07'+'22\x20));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'Lum\x20=\x20spec'+'Lum\x20+\x20dot('+'ccSpecular'+'Light\x20*\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20+\x20'+'ccReflecti'+'on\x20*\x20litAr'+'gs_clearco'+'at_specula'+'rity,\x20vec3'+'f(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20c'+'lamp(litAr'+'gs_opacity'+'\x20+\x20gammaCo'+'rrectInput'+'(specLum),'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_opaci'+'ty\x20=\x20litAr'+'gs_opacity'+'\x20*\x20uniform'+'.material_'+'alphaFade;'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20end\x20chunk'+'s\x20-\x20when\x20b'+'aking\x20ligh'+'tmap\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTMAP_B'+'AKING\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_COLOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22b'+'akeLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_LIGH'+'TMAP_BAKIN'+'G_DIR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22ba'+'keDirLmEnd'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'end\x20chunks'+'\x20-\x20in\x20all\x20'+'other\x20case'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'endPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22outpu'+'tAlphaPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_MSD'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20apply'+'Msdf(outpu'+'t.color);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22outp'+'utPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'debugOutpu'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHADOW_CA'+'TCHER\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20when\x20t'+'he\x20shadow\x20'+'catcher\x20is'+'\x20enabled\x20-'+'\x20accumulat'+'ed\x20shadows')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'vec3f(dSha'+'dowCatcher'+'),\x20output.'+'color.a);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),$M='\x0a\x0a//\x20globa'+'ls\x0avar<pri'+'vate>\x20sRef'+'lection:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'VertexNorm'+'alW:\x20vec3f'+';\x0avar<priv'+'ate>\x20dTang'+'entW:\x20vec3'+'f;\x0avar<pri'+'vate>\x20dBin'+'ormalW:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dV'+'iewDirW:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'ReflDirW:\x20'+'vec3f;\x0avar'+'<private>\x20'+'ccReflDirW'+':\x20vec3f;\x0a\x0a'+'//\x20Per-lig'+'ht\x20tempora'+'ries\x0avar<p'+'rivate>\x20dL'+'ightDirNor'+'mW:\x20vec3f;'+'\x0avar<priva'+'te>\x20dAtten'+':\x20f32;\x0a\x0a//'+'\x20Outputs\x0av'+'ar<private'+'>\x20dTBN:\x20ma'+'t3x3f;\x0avar'+'<private>\x20'+'dReflectio'+'n:\x20vec4f;\x0a'+'var<privat'+'e>\x20dDiffus'+'eLight:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccFres'+'nel:\x20f32;\x0a'+'var<privat'+'e>\x20ccRefle'+'ction:\x20vec'+'3f;\x0avar<pr'+'ivate>\x20ccS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccSpec'+'ularityNoF'+'res:\x20f32;\x0a'+'var<privat'+'e>\x20sSpecul'+'arLight:\x20v'+'ec3f;\x0a\x0a//\x20'+'FRAGMENT\x20S'+'HADER\x20INPU'+'TS:\x20UNIFOR'+'MS\x0a\x0a#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_dis'+'persion:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_al'+'phaFade:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_SSAO\x0a\x20\x20'+'\x20\x20var\x20ssao'+'Texture\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20ssaoT'+'extureSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20u'+'niform\x20ssa'+'oTextureSi'+'zeInv:\x20vec'+'2f;\x0a#endif'+'\x0a\x0a//\x20light'+'ing\x20and\x20sh'+'adowing\x20de'+('clarations'+'\x0a\x0a#ifdef\x20L'+'IT_SHADOW_'+'CATCHER\x0a\x20\x20'+'\x20\x20//\x20a\x20var'+'iable\x20to\x20a'+'ccumulate\x20'+'shadows\x20fo'+'r\x20shadow\x20c'+'atcher\x20mat'+'erials\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dShado'+'wCatcher:\x20'+'f32\x20=\x201.0;'+'\x0a#endif\x0a\x0a/'+'/\x20LOOP\x20-\x20u'+'niform\x20dec'+'larations\x20'+'for\x20all\x20no'+'n-clustere'+'d\x20lights\x0a#'+'if\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightDe'+'clarationP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'f\x20LIT_FRES'+'NEL_MODEL\x20'+'==\x20NONE\x20&&'+'\x20!defined('+'LIT_REFLEC'+'TIONS)\x20&&\x20'+'!defined(L'+'IT_DIFFUSE'+'_MAP)\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_OLD'+'_AMBIENT\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0a//'+'\x20lightmap\x20'+'baking\x0a#if'+'def\x20STD_LI'+'GHTMAP_DIR'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20bakeDir'+':\x20f32;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_ADD_AMBIE'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20ambie'+'ntBakeOccl'+'usionContr'+'ast:\x20f32;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20ambientB'+'akeOcclusi'+'onBrightne'+'ss:\x20f32;\x0a#'+'endif\x0a'),XM='\x0a\x0a@fragmen'+'t\x0afn\x20fragm'+'entMain(in'+'put:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ccSpecular'+'Light\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20cc'+'Reflection'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_N'+'ONE_SLICE_'+'MODE\x20==\x20SL'+'ICED\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22startNi'+'neSlicedPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20LIT_NONE'+'_SLICE_MOD'+'E\x20==\x20TILED'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'tartNineSl'+'icedTiledP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'NEEDS_NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dVertexNo'+'rmalW\x20=\x20no'+'rmalize(vN'+'ormalW);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_T'+'ANGENTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_HEIG'+'HTS)\x20||\x20de'+'fined(LIT_'+'USE_NORMAL'+'S)\x20||\x20defi'+'ned(LIT_US'+'E_CLEARCOA'+'T_NORMALS)'+'\x20||\x20define'+'d(LIT_GGX_'+'SPECULAR)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dTan'+'gentW\x20=\x20vT'+'angentW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dBino'+'rmalW\x20=\x20vB'+'inormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20getView'+'Dir();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_TBN'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getTBN('+'dTangentW,'+'\x20dBinormal'+'W,\x20dVertex'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'andleTwoSi'+'dedLightin'+'g();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+('\x0a\x20\x20\x20\x20//\x20in'+'voke\x20front'+'end\x20functi'+'ons\x0a\x20\x20\x20\x20ev'+'aluateFron'+'tend();\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22debugPr'+'ocessFront'+'endPS\x22\x0a\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput\x20='+'\x20evaluateB'+'ackend();\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainEndP'+'S\x22\x0a\x0a\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a}\x0a'),qM='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20material_'+'ambient:\x20v'+'ec3f;\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_LIGHTING'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22light'+'SpecularAn'+'isoGGXPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tSpecularB'+'linnPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0a#include'+'\x20\x22combineP'+'S\x22\x0a\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapAddP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22am'+'bientPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_MS'+'DF\x0a\x20\x20\x20\x20#in'+'clude\x20\x22msd'+'fPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22viewDirPS'+'\x22\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_GGX_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirAni'+'soPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22reflDirP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20f'+'unctionali')+('ty\x0a#includ'+'e\x20\x22lightin'+'gPS\x22\x0a\x0a'),jM='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',YM='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',KM='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a#endif'+'\x0a\x0a#ifdef\x20N'+'INESLICED\x0a'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vMask:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20varying\x20v'+'TiledUv:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dMaskG'+'lobal:\x20vec'+'2f;\x0a\x20\x20\x20\x20va'+'r<private>'+'\x20dTiledUvG'+'lobal:\x20vec'+'2f;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'uterScale:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'atlasRect:'+'\x20vec4f;\x0a\x0a#'+'endif\x0a\x0avar'+'<private>\x20'+'dPositionW'+':\x20vec3f;\x0av'+'ar<private'+'>\x20dModelMa'+'trix:\x20mat4'+'x4f;\x0a\x0a#inc'+'lude\x20\x22tran'+'sformCoreV'+'S\x22\x0a\x0a#ifdef'+'\x20UV0\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ertex_texC'+'oord0:\x20vec'+'2f;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'rtex_texCo'+'ord1:\x20vec2'+'f;\x0a\x20\x20\x20\x20#in'+'clude\x20\x22uv1'+'VS\x22\x0a#endif'+'\x0a\x0a\x0a#ifdef\x20'+'LINEAR_DEP'+'TH\x0a\x20\x20\x20\x20#if'+'ndef\x20VIEWM'+'ATRIX\x0a\x20\x20\x20\x20'+'#define\x20VI'+'EWMATRIX\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#inc'+'lude\x20\x22tran'+'sformVS\x22\x0a\x0a'+'#ifdef\x20NOR'+'MALS\x0a\x20\x20\x20\x20#'+'include\x20\x22n'+'ormalCoreV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malVS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20TANGENTS'+'\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_tangent:'+'\x20vec4f;\x0a#e'+'ndif\x0a\x0a//\x20e'+'xpand\x20unif'+'orms\x20for\x20u'+'v\x20transfor'+'ms\x0a#includ'+'e\x20\x22uvTrans'+'formUnifor'+'msPS,\x20UV_T'+'RANSFORMS_'+('COUNT\x22\x0a\x0a#i'+'fdef\x20MSDF\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22msdfVS'+'\x22\x0a#endif\x0a\x0a'+'#include\x20\x20'+'\x22litUserCo'+'deVS\x22\x0a\x0a@ve'+'rtex\x0afn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'MainStartV'+'S\x22\x0a\x0a\x20\x20\x20\x20va'+'r\x20output\x20:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20get'+'Position()'+';\x0a\x20\x20\x20\x20outp'+'ut.vPositi'+'onW\x20=\x20getW'+'orldPositi'+'on();\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20NO'+'RMALS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vNormalW\x20'+'=\x20getNorma'+'l();\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TA'+'NGENTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vTangent'+'W\x20=\x20normal'+'ize(dNorma'+'lMatrix\x20*\x20'+'vertex_tan'+'gent.xyz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vBin'+'ormalW\x20=\x20c'+'ross(outpu'+'t.vNormalW'+',\x20output.v'+'TangentW)\x20'+'*\x20vertex_t'+'angent.w;\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(GG'+'X_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20UV0'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f\x20=\x20getU'+'v0();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20UV0_UNMOD'+'IFIED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20uv1:\x20vec2'+'f\x20=\x20getUv1'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20U'+'V1_UNMODIF'+'IED\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.vUv1\x20=\x20'+'uv1;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'xpand\x20code'+'\x20for\x20uv\x20tr'+'ansforms\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22uvTrans')+('formVS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20VERTEX_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition'+',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-(uniform'+'.matrix_vi'+'ew\x20*\x20vec4f'+'(output.vP'+'ositionW,\x20'+'1.0)).z;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MSDF\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unpac'+'kMsdfParam'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.outline_c'+'olor\x20=\x20dOu'+'tlineColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.out'+'line_thick'+'ness\x20=\x20dOu'+'tlineThick'+'ness;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.shadow_co'+'lor\x20=\x20dSha'+'dowColor;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.shado'+'w_offset\x20='+'\x20dShadowOf'+'fset;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vMask'+'\x20=\x20dMaskGl'+'obal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vTiledUv\x20'+'=\x20dTiledUv'+'Global;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndVS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),ZM='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20evaluateF'+'rontend();'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PICK_PA'+'SS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20getP'+'ickOutput('+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20float2ve'+'c4(vLinear'+'Depth);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndPS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',QM='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avar<priva'+'te>\x20litArg'+'s_albedo:\x20'+'vec3f;\x0a\x0a//'+'\x20Transpare'+'ncy\x0avar<pr'+'ivate>\x20lit'+'Args_opaci'+'ty:\x20f32;\x0a\x0a'+'//\x20Emissio'+'n\x20color\x0ava'+'r<private>'+'\x20litArgs_e'+'mission:\x20v'+'ec3f;\x0a\x0a//\x20'+'Normal\x20dir'+'ection\x20in\x20'+'world\x20spac'+'e\x0avar<priv'+'ate>\x20litAr'+'gs_worldNo'+'rmal:\x20vec3'+'f;\x0a\x0a//\x20Amb'+'ient\x20occlu'+'sion\x20amoun'+'t,\x20range\x20['+'0..1]\x0avar<'+'private>\x20l'+'itArgs_ao:'+'\x20f32;\x0a\x0a//\x20'+'Light\x20map\x20'+'color\x0avar<'+'private>\x20l'+'itArgs_lig'+'htmap:\x20vec'+'3f;\x0a\x0a//\x20Li'+'ght\x20map\x20di'+'rection\x0ava'+'r<private>'+'\x20litArgs_l'+'ightmapDir'+':\x20vec3f;\x0a\x0a'+'//\x20Surface'+'\x20metalness'+'\x20factor,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_metalne'+'ss:\x20f32;\x0a\x0a'+'//\x20The\x20f0\x20'+'specularit'+'y\x20factor\x0av'+'ar<private'+'>\x20litArgs_'+'specularit'+'y:\x20vec3f;\x0a'+'\x0a//\x20Specul'+'arity\x20inte'+'nsity\x20fact'+'or,\x20range\x20'+'[0..1]\x0avar'+'<private>\x20'+'litArgs_sp'+'ecularityF'+'actor:\x20f32'+';\x0a\x0a//\x20The\x20'+'microfacet'+'\x20glossines'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0avar<pri'+'vate>\x20litA'+'rgs_gloss:'+'\x20f32;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_sheen'+'_gloss:\x20f3'+'2;\x0a\x0a//\x20The'+'\x20color\x20of\x20'+'the\x20f0\x20spe'+'cularity\x20f'+'actor\x20for\x20'+'the\x20sheen\x20'+'layer\x0avar<'+'private>\x20l'+'itArgs_she'+'en_specula'+'rity:\x20vec3'+'f;\x0a\x0a//\x20Tra'+'nsmission\x20'+'factor\x20(re'+('fraction),'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_trans'+'mission:\x20f'+'32;\x0a\x0a//\x20Un'+'iform\x20thic'+'kness\x20of\x20m'+'edium,\x20use'+'d\x20by\x20trans'+'mission,\x20r'+'ange\x20[0..i'+'nf]\x0avar<pr'+'ivate>\x20lit'+'Args_thick'+'ness:\x20f32;'+'\x0a\x0a//\x20Index'+'\x20of\x20refrac'+'tion\x0avar<p'+'rivate>\x20li'+'tArgs_ior:'+'\x20f32;\x0a\x0a//\x20'+'Dispersion'+',\x20range\x20[0'+'..1]\x20typic'+'ally,\x20but\x20'+'can\x20be\x20hig'+'her\x0avar<pr'+'ivate>\x20lit'+'Args_dispe'+'rsion:\x20f32'+';\x0a\x0a//\x20Irid'+'escence\x20ef'+'fect\x20inten'+'sity,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'iridescenc'+'e_intensit'+'y:\x20f32;\x0a\x0a/'+'/\x20Thicknes'+'s\x20of\x20the\x20i'+'ridescent\x20'+'microfilm\x20'+'layer,\x20val'+'ue\x20is\x20in\x20n'+'anometers,'+'\x20range\x20[0.'+'.1000]\x0avar'+'<private>\x20'+'litArgs_ir'+'idescence_'+'thickness:'+'\x20f32;\x0a\x0a//\x20'+'The\x20normal'+'\x20used\x20for\x20'+'the\x20clearc'+'oat\x20layer\x0a'+'var<privat'+'e>\x20litArgs'+'_clearcoat'+'_worldNorm'+'al:\x20vec3f;'+'\x0a\x0a//\x20Inten'+'sity\x20of\x20th'+'e\x20clearcoa'+'t\x20layer,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_clearco'+'at_specula'+'rity:\x20f32;'+'\x0a\x0a//\x20Gloss'+'iness\x20of\x20c'+'learcoat\x20l'+'ayer,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'clearcoat_'+'gloss:\x20f32'+';\x0a\x0a'),JM='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20t'+'extureBias'+':\x20f32\x20=\x20-1'+'000.0;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20texture'+'Bias:\x20f32;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ShaderArgs'+'PS\x22\x0a',eD='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20view_p'+'osition:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20li'+'ght_radius'+':\x20f32;\x0a#en'+'dif\x0a\x0a#if\x20S'+'HADOW_TYPE'+'\x20==\x20PCSS_3'+'2F\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lin'+'earizeDept'+'hPS\x22\x0a#endi'+'f\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serMainSta'+'rtPS\x22\x0a\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20/'+'/\x20using\x20no'+'n-standard'+'\x20depth,\x20i.'+'e\x20gl_FragC'+'oord.z\x0a\x20\x20\x20'+'\x20#ifdef\x20PE'+'RSPECTIVE_'+'DEPTH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20de'+'pth:\x20f32\x20='+'\x20input.pos'+'ition.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20PCS'+'S_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot/omni'+'\x20shadows\x20c'+'urrently\x20u'+'se\x20linear\x20'+'depth.\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20TODO:\x20us'+'e\x20perspect'+'ive\x20depth\x20'+'for\x20spot/o'+'mni\x20the\x20sa'+'me\x20way\x20as\x20'+'directiona'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT_TYPE\x20!'+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'depth\x20=\x20li'+'nearizeDep'+'thWithPara'+'ms(depth,\x20'+'camera_par'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20depth:\x20'+'f32\x20=\x20min('+'distance(u'+'niform.vie'+'w_position'+',\x20input.vP'+'ositionW)\x20'+'/\x20uniform.'+'light_radi'+'us,\x200.9999'+'9);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'MODIFIED_D'+'EPTH\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SHADO'+'W_TYPE\x20==\x20'+'VSM_16F\x20||'+'\x20SHADOW_TY'+('PE\x20==\x20VSM_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20SHAD'+'OW_TYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20expon'+'ent:\x20f32\x20='+'\x2015.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20exp'+'onent:\x20f32'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dep'+'th_vsm\x20=\x202'+'.0\x20*\x20depth'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dept'+'h_vsm\x20=\x20ex'+'p(exponent'+'\x20*\x20depth_v'+'sm);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(depth_'+'vsm,\x20depth'+'_vsm\x20*\x20dep'+'th_vsm,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20PCSS'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(de'+'pth,\x200.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MODIFI'+'ED_DEPTH\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20If'+'\x20we\x20end\x20up'+'\x20using\x20mod'+'ified\x20dept'+'h,\x20it\x20need'+'s\x20to\x20be\x20ex'+'plicitly\x20w'+'ritten\x20to\x20'+'gl_FragDep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.frag'+'Depth\x20=\x20de'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'just\x20the\x20s'+'implest\x20co'+'de,\x20color\x20'+'is\x20not\x20wri'+'tten\x20anywa'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),tD='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0afn\x20'+'LTC_Uv(N:\x20'+'vec3f,\x20V:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20co'+'nst\x20LUT_SI'+'ZE:\x20f32\x20=\x20'+'64.0;\x0a\x20\x20\x20\x20'+'const\x20LUT_'+'SCALE:\x20f32'+'\x20=\x20(LUT_SI'+'ZE\x20-\x201.0)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_BIAS'+':\x20f32\x20=\x200.'+'5\x20/\x20LUT_SI'+'ZE;\x0a\x20\x20\x20\x20le'+'t\x20dotNV:\x20f'+'32\x20=\x20satur'+'ate(dot(\x20N'+',\x20V\x20));\x0a\x20\x20'+'\x20\x20//\x20textu'+'re\x20paramet'+'erized\x20by\x20'+'sqrt(\x20GGX\x20'+'alpha\x20)\x20an'+'d\x20sqrt(\x201\x20'+'-\x20cos(\x20the'+'ta\x20)\x20)\x0a\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20vec'+'2f(\x20roughn'+'ess,\x20sqrt('+'\x201.0\x20-\x20dot'+'NV\x20)\x20);\x0a\x20\x20'+'\x20\x20return\x20u'+'v\x20*\x20LUT_SC'+'ALE\x20+\x20LUT_'+'BIAS;\x0a}\x0a\x0af'+'n\x20LTC_Clip'+'pedSphereF'+'ormFactor('+'\x20f:\x20vec3f\x20'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20//\x20Re'+'al-Time\x20Ar'+'ea\x20Lightin'+'g:\x20a\x20Journ'+'ey\x20from\x20Re'+'search\x20to\x20'+'Production'+'\x20(p.102)\x0a\x20'+'\x20\x20\x20//\x20An\x20a'+'pproximati'+'on\x20of\x20the\x20'+'form\x20facto'+'r\x20of\x20a\x20hor'+'izon-clipp'+'ed\x20rectang'+'le.\x0a\x20\x20\x20\x20le'+'t\x20l:\x20f32\x20='+'\x20length(\x20f'+'\x20);\x0a\x20\x20\x20\x20re'+'turn\x20max(\x20'+'(\x20l\x20*\x20l\x20+\x20'+'f.z\x20)\x20/\x20(\x20'+'l\x20+\x201.0\x20),'+'\x200.0\x20);\x0a}\x0a'+'\x0afn\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'v1:\x20vec3f,'+'\x20v2:\x20vec3f'+'\x20)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20x:\x20f32\x20='+'\x20dot(\x20v1,\x20'+'v2\x20);\x0a\x20\x20\x20\x20'+'let\x20y:\x20f32'+('\x20=\x20abs(\x20x\x20'+');\x0a\x20\x20\x20\x20//\x20'+'rational\x20p'+'olynomial\x20'+'approximat'+'ion\x20to\x20the'+'ta\x20/\x20sin(\x20'+'theta\x20)\x20/\x20'+'2PI\x0a\x20\x20\x20\x20le'+'t\x20a:\x20f32\x20='+'\x200.8543985'+'\x20+\x20(\x200.496'+'5155\x20+\x200.0'+'145206\x20*\x20y'+'\x20)\x20*\x20y;\x0a\x20\x20'+'\x20\x20let\x20b:\x20f'+'32\x20=\x203.417'+'5940\x20+\x20(\x204'+'.1616724\x20+'+'\x20y\x20)\x20*\x20y;\x0a'+'\x20\x20\x20\x20let\x20v:'+'\x20f32\x20=\x20a\x20/'+'\x20b;\x0a\x20\x20\x20\x20le'+'t\x20inv_sqrt'+'_term\x20=\x20in'+'verseSqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7f\x20)\x20);\x0a'+'\x20\x20\x20\x20let\x20th'+'eta_sinthe'+'ta:\x20f32\x20=\x20'+'select(\x20(0'+'.5\x20*\x20inv_s'+'qrt_term\x20-'+'\x20v),\x20v,\x20x\x20'+'>\x200.0\x20);\x0a\x20'+'\x20\x20\x20return\x20'+'cross(\x20v1,'+'\x20v2\x20)\x20*\x20th'+'eta_sinthe'+'ta;\x0a}\x0a\x0astr'+'uct\x20Coords'+'\x20{\x0a\x20\x20\x20\x20coo'+'rd0:\x20vec3f'+',\x0a\x20\x20\x20\x20coor'+'d1:\x20vec3f,'+'\x0a\x20\x20\x20\x20coord'+'2:\x20vec3f,\x0a'+'\x20\x20\x20\x20coord3'+':\x20vec3f,\x0a}'+'\x0a\x0afn\x20LTC_E'+'valuateRec'+'t(\x20N:\x20vec3'+'f,\x20V:\x20vec3'+'f,\x20P:\x20vec3'+'f,\x20mInv:\x20m'+'at3x3f,\x20re'+'ctCoords:\x20'+'Coords)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20//\x20bail\x20i'+'f\x20point\x20is'+'\x20on\x20back\x20s'+'ide\x20of\x20pla'+'ne\x20of\x20ligh'+'t\x0a\x20\x20\x20\x20//\x20a'+'ssumes\x20ccw'+'\x20winding\x20o'+'rder\x20of\x20li'+'ght\x20vertic'+'es\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec3f'+'\x20=\x20rectCoo'+'rds.coord1'+'\x20-\x20rectCoo'+'rds.coord0'+';\x0a\x20\x20\x20\x20let\x20'+'v2:\x20vec3f\x20'+'=\x20rectCoor'+'ds.coord3\x20'+'-\x20rectCoor'+'ds.coord0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'lightNorma'+'l:\x20vec3f\x20='+'\x20cross(\x20v1'+',\x20v2\x20);\x0a\x20\x20'+'\x20\x20let\x20fact'+'or:\x20f32\x20=\x20'+'sign(-dot('+'\x20lightNorm'+'al,\x20P\x20-\x20re'+'ctCoords.c'+'oord0\x20));\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'nstruct\x20or'+'thonormal\x20'+'basis\x20arou'+'nd\x20N\x0a\x20\x20\x20\x20l')+('et\x20T1:\x20vec'+'3f\x20=\x20norma'+'lize(\x20V\x20-\x20'+'N\x20*\x20dot(\x20V'+',\x20N\x20)\x20);\x0a\x20'+'\x20\x20\x20let\x20T2:'+'\x20vec3f\x20=\x20f'+'actor\x20*\x20cr'+'oss(\x20N,\x20T1'+'\x20);\x20//\x20neg'+'ated\x20from\x20'+'paper;\x20pos'+'sibly\x20due\x20'+'to\x20a\x20diffe'+'rent\x20hande'+'dness\x20of\x20w'+'orld\x20coord'+'inate\x20syst'+'em\x0a\x20\x20\x20\x20//\x20'+'compute\x20tr'+'ansform\x0a\x20\x20'+'\x20\x20let\x20mat:'+'\x20mat3x3f\x20='+'\x20mInv\x20*\x20tr'+'anspose(\x20m'+'at3x3f(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'transform\x20'+'rect\x0a\x20\x20\x20\x20v'+'ar\x20coords:'+'\x20array<vec'+'3f,\x204>;\x0a\x20\x20'+'\x20\x20coords[0'+']\x20=\x20mat\x20*\x20'+'(\x20rectCoor'+'ds.coord0\x20'+'-\x20P\x20);\x0a\x20\x20\x20'+'\x20coords[1]'+'\x20=\x20mat\x20*\x20('+'\x20rectCoord'+'s.coord1\x20-'+'\x20P\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20mat\x20*\x20(\x20'+'rectCoords'+'.coord2\x20-\x20'+'P\x20);\x0a\x20\x20\x20\x20c'+'oords[3]\x20='+'\x20mat\x20*\x20(\x20r'+'ectCoords.'+'coord3\x20-\x20P'+'\x20);\x0a\x20\x20\x20\x20//'+'\x20project\x20r'+'ect\x20onto\x20s'+'phere\x0a\x20\x20\x20\x20'+'coords[0]\x20'+'=\x20normaliz'+'e(\x20coords['+'0]\x20);\x0a\x20\x20\x20\x20'+'coords[1]\x20'+'=\x20normaliz'+'e(\x20coords['+'1]\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20normaliz'+'e(\x20coords['+'2]\x20);\x0a\x20\x20\x20\x20'+'coords[3]\x20'+'=\x20normaliz'+'e(\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20vector\x20'+'form\x20facto'+'r\x0a\x20\x20\x20\x20var\x20'+'vectorForm'+'Factor:\x20ve'+'c3f\x20=\x20vec3'+'f(\x200.0\x20);\x0a'+'\x20\x20\x20\x20vector'+'FormFactor'+'\x20=\x20vectorF'+'ormFactor\x20'+'+\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[0],\x20c'+'oords[1]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20=\x20vecto'+'rFormFacto'+'r\x20+\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'coords[1],'+'\x20coords[2]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa')+('ctor\x20=\x20vec'+'torFormFac'+'tor\x20+\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[2'+'],\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20=\x20v'+'ectorFormF'+'actor\x20+\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[3],\x20coord'+'s[0]\x20);\x0a\x20\x20'+'\x20\x20//\x20adjus'+'t\x20for\x20hori'+'zon\x20clippi'+'ng\x0a\x20\x20\x20\x20let'+'\x20result:\x20f'+'32\x20=\x20LTC_C'+'lippedSphe'+'reFormFact'+'or(\x20vector'+'FormFactor'+'\x20);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20resu'+'lt;\x0a}\x0a\x0avar'+'<private>\x20'+'dLTCCoords'+':\x20Coords;\x0a'+'fn\x20getLTCL'+'ightCoords'+'(lightPos:'+'\x20vec3f,\x20ha'+'lfWidth:\x20v'+'ec3f,\x20half'+'Height:\x20ve'+'c3f)\x20->\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20var\x20coord'+'s:\x20Coords;'+'\x0a\x20\x20\x20\x20coord'+'s.coord0\x20='+'\x20lightPos\x20'+'+\x20halfWidt'+'h\x20-\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd1\x20=\x20ligh'+'tPos\x20-\x20hal'+'fWidth\x20-\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20coord'+'s.coord2\x20='+'\x20lightPos\x20'+'-\x20halfWidt'+'h\x20+\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd3\x20=\x20ligh'+'tPos\x20+\x20hal'+'fWidth\x20+\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20retur'+'n\x20coords;\x0a'+'}\x0a\x0avar<pri'+'vate>\x20dSph'+'ereRadius:'+'\x20f32;\x0afn\x20g'+'etSphereLi'+'ghtCoords('+'lightPos:\x20'+'vec3f,\x20hal'+'fWidth:\x20ve'+'c3f,\x20halfH'+'eight:\x20vec'+'3f)\x20->\x20Coo'+'rds\x20{\x0a\x20\x20\x20\x20'+'//\x20used\x20fo'+'r\x20simple\x20s'+'phere\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20//\x20als'+'o,\x20the\x20cod'+'e\x20only\x20han'+'dles\x20a\x20sph'+'erical\x20lig'+'ht,\x20it\x20can'+'not\x20be\x20non'+'-uniformly'+'\x20scaled\x20in'+'\x20world\x20spa'+'ce,\x20and\x20so'+'\x20we\x20enforc'+'e\x20it\x20here\x0a'+'\x20\x20\x20\x20dSpher'+'eRadius\x20=\x20')+('max(length'+'(halfWidth'+'),\x20length('+'halfHeight'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20Billboar'+'d\x20the\x202d\x20l'+'ight\x20quad\x20'+'to\x20reflect'+'ion\x20vector'+',\x20as\x20it\x27s\x20'+'used\x20for\x20s'+'pecular.\x20T'+'his\x20allows'+'\x20us\x20to\x20use'+'\x20disk\x20math'+'\x20for\x20the\x20s'+'phere.\x0a\x20\x20\x20'+'\x20let\x20f:\x20ve'+'c3f\x20=\x20refl'+'ect(normal'+'ize(lightP'+'os\x20-\x20unifo'+'rm.view_po'+'sition),\x20v'+'NormalW);\x0a'+'\x20\x20\x20\x20let\x20w:'+'\x20vec3f\x20=\x20n'+'ormalize(c'+'ross(f,\x20ha'+'lfHeight))'+';\x0a\x20\x20\x20\x20let\x20'+'h:\x20vec3f\x20='+'\x20normalize'+'(cross(f,\x20'+'w));\x0a\x0a\x20\x20\x20\x20'+'return\x20get'+'LTCLightCo'+'ords(light'+'Pos,\x20w\x20*\x20d'+'SphereRadi'+'us,\x20h\x20*\x20dS'+'phereRadiu'+'s);\x0a}\x0a\x0a//\x20'+'used\x20for\x20L'+'TC\x20LUT\x20tex'+'ture\x20looku'+'p\x0avar<priv'+'ate>\x20dLTCU'+'V:\x20vec2f;\x0a'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20var<p'+'rivate>\x20cc'+'LTCUV:\x20vec'+'2f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightUV(g'+'loss:\x20f32,'+'\x20worldNorm'+'al:\x20vec3f,'+'\x20viewDir:\x20'+'vec3f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20roug'+'hness:\x20f32'+'\x20=\x20max((1.'+'0\x20-\x20gloss)'+'\x20*\x20(1.0\x20-\x20'+'gloss),\x200.'+'001);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_Uv(\x20world'+'Normal,\x20vi'+'ewDir,\x20rou'+'ghness\x20);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20energ'+'y\x20conserva'+'tion\x20and\x20t'+'o\x20modulate'+'\x20specular\x0a'+'var<privat'+'e>\x20dLTCSpe'+'cFres:\x20vec'+'3f;\x0a#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20v'+'ar<private'+'>\x20ccLTCSpe'+'cFres:\x20vec'+'3f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightSpec'+'Fres(uv:\x20v'+'ec2f,\x20spec'+'ularity:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20t2:\x20v')+('ec4f\x20=\x20tex'+'tureSample'+'Level(area'+'LightsLutT'+'ex2,\x20areaL'+'ightsLutTe'+'x2Sampler,'+'\x20uv,\x200.0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20specular'+'ity\x20*\x20t2.x'+'\x20+\x20(\x20vec3f'+'(\x201.0\x20)\x20-\x20'+'specularit'+'y)\x20*\x20t2.y;'+'\x0a}\x0a\x0afn\x20cal'+'cLTCLightV'+'alues(glos'+'s:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f,\x20specul'+'arity:\x20vec'+'3f,\x20clearc'+'oatGloss:\x20'+'f32,\x20clear'+'coatWorldN'+'ormal:\x20vec'+'3f,\x20clearc'+'oatSpecula'+'rity:\x20f32)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'UV\x20=\x20getLT'+'CLightUV(c'+'learcoatGl'+'oss,\x20clear'+'coatWorldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'SpecFres\x20='+'\x20getLTCLig'+'htSpecFres'+'(ccLTCUV,\x20'+'vec3f(clea'+'rcoatSpecu'+'larity));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0afn\x20cal'+'cDiskLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20cal'+'cRectLight'+'Values(lig'+'htPos,\x20hal'+'fWidth,\x20ha'+'lfHeight);'+'\x0a}\x0afn\x20calc'+'SphereLigh'+'tValues(li'+'ghtPos:\x20ve'+'c3f,\x20halfW'+'idth:\x20vec3'+'f,\x20halfHei')+('ght:\x20vec3f'+')\x20{\x0a\x20\x20\x20\x20dL'+'TCCoords\x20='+'\x20getSphere'+'LightCoord'+'s(lightPos'+',\x20halfWidt'+'h,\x20halfHei'+'ght);\x0a}\x0a\x0a/'+'/\x20An\x20exten'+'ded\x20versio'+'n\x20of\x20the\x20i'+'mplementat'+'ion\x20from\x20\x22'+'How\x20to\x20sol'+'ve\x20a\x20cubic'+'\x20equation,'+'\x20revisited'+'\x22\x0a//\x20http:'+'//momentsi'+'ngraphics.'+'de/?p=105\x0a'+'fn\x20SolveCu'+'bic(Coeffi'+'cient_in:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20pi:\x20'+'f32\x20=\x203.14'+'159;\x0a\x20\x20\x20\x20v'+'ar\x20Coeffic'+'ient\x20=\x20Coe'+'fficient_i'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20Normalize'+'\x20the\x20polyn'+'omial\x0a\x20\x20\x20\x20'+'Coefficien'+'t\x20=\x20vec4f('+'Coefficien'+'t.xyz\x20/\x20Co'+'efficient.'+'w,\x20Coeffic'+'ient.w);\x0a\x0a'+'\x20\x20\x20\x20//\x20Div'+'ide\x20middle'+'\x20coefficie'+'nts\x20by\x20thr'+'ee\x0a\x20\x20\x20\x20let'+'\x20new_yz:\x20v'+'ec2f\x20=\x20Coe'+'fficient.y'+'z\x20/\x203.0;\x0a\x20'+'\x20\x20\x20Coeffic'+'ient\x20=\x20vec'+'4f(Coeffic'+'ient.x,\x20ne'+'w_yz.x,\x20ne'+'w_yz.y,\x20Co'+'efficient.'+'w);\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20let\x20A:\x20'+'f32\x20=\x20Coef'+'ficient.w;'+'\x0a\x20\x20\x20\x20let\x20B'+':\x20f32\x20=\x20Co'+'efficient.'+'z;\x0a\x20\x20\x20\x20let'+'\x20C:\x20f32\x20=\x20'+'Coefficien'+'t.y;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20Coeffici'+'ent.x;\x0a\x0a\x20\x20'+'\x20\x20//\x20Compu'+'te\x20the\x20Hes'+'sian\x20and\x20t'+'he\x20discrim'+'inant\x0a\x20\x20\x20\x20'+'let\x20Delta:'+'\x20vec3f\x20=\x20v'+'ec3f(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20-Coeff'+'icient.z\x20*'+'\x20Coefficie'+'nt.z\x20+\x20Coe'+'fficient.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'-Coefficie'+'nt.y\x20*\x20Coe'+'fficient.z'+'\x20+\x20Coeffic'+'ient.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'vec2f(Coef'+'ficient.z,'+'\x20-Coeffici'+'ent.y),\x20Co'+'efficient.'+'xy)\x0a\x20\x20\x20\x20);')+('\x0a\x0a\x20\x20\x20\x20let\x20'+'Discrimina'+'nt:\x20f32\x20=\x20'+'dot(vec2f('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20var\x20xlc:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20var\x20xsc:'+'\x20vec2f;\x0a\x0a\x20'+'\x20\x20\x20//\x20Algo'+'rithm\x20A\x0a\x20\x20'+'\x20\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20A_a:'+'\x20f32\x20=\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_a:\x20f'+'32\x20=\x20Delta'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_a:'+'\x20f32\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20Theta:\x20f'+'32\x20=\x20atan2'+'(sqrt(Disc'+'riminant),'+'\x20-D_a)\x20/\x203'+'.0;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sqr'+'t_neg_Ca\x20='+'\x20sqrt(-C_a'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20x_1a:'+'\x20f32\x20=\x202.0'+'\x20*\x20sqrt_ne'+'g_Ca\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x_3a:\x20f32'+'\x20=\x202.0\x20*\x20s'+'qrt_neg_Ca'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20xl:'+'\x20f32\x20=\x20sel'+'ect(x_3a,\x20'+'x_1a,\x20(x_1'+'a\x20+\x20x_3a)\x20'+'>\x202.0\x20*\x20B)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'xlc\x20=\x20vec2'+'f(xl\x20-\x20B,\x20'+'A);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Al'+'gorithm\x20D\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20A_'+'d:\x20f32\x20=\x20D'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_d:\x20f'+'32\x20=\x20Delta'+'.z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_d:'+'\x20f32\x20=\x20-D\x20'+'*\x20Delta.y\x20'+'+\x202.0\x20*\x20C\x20'+'*\x20Delta.z;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Take\x20th'+'e\x20cubic\x20ro'+'ot\x20of\x20a\x20no'+'rmalized\x20c'+'omplex\x20num'+'ber\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20Thet'+'a:\x20f32\x20=\x20a'+'tan2(D\x20*\x20s'+'qrt(Discri'+'minant),\x20-'+'D_d)\x20/\x203.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20sqrt_'+'neg_Cd\x20=\x20s'+'qrt(-C_d);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20x_1d:\x20f'+'32\x20=\x202.0\x20*')+('\x20sqrt_neg_'+'Cd\x20*\x20cos(T'+'heta);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20x'+'_3d:\x20f32\x20='+'\x202.0\x20*\x20sqr'+'t_neg_Cd\x20*'+'\x20cos(Theta'+'\x20+\x20(2.0\x20/\x20'+'3.0)\x20*\x20pi)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20xs:\x20f'+'32\x20=\x20selec'+'t(x_3d,\x20x_'+'1d,\x20x_1d\x20+'+'\x20x_3d\x20<\x202.'+'0\x20*\x20C);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20xsc\x20'+'=\x20vec2f(-D'+',\x20xs\x20+\x20C);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20let\x20E:\x20f'+'32\x20=\x20\x20xlc.'+'y\x20*\x20xsc.y;'+'\x0a\x20\x20\x20\x20let\x20F'+':\x20f32\x20=\x20-x'+'lc.x\x20*\x20xsc'+'.y\x20-\x20xlc.y'+'\x20*\x20xsc.x;\x0a'+'\x20\x20\x20\x20let\x20G:'+'\x20f32\x20=\x20\x20xl'+'c.x\x20*\x20xsc.'+'x;\x0a\x0a\x20\x20\x20\x20le'+'t\x20xmc:\x20vec'+'2f\x20=\x20vec2f'+'(C\x20*\x20F\x20-\x20B'+'\x20*\x20G,\x20-B\x20*'+'\x20F\x20+\x20C\x20*\x20E'+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20Root:\x20ve'+'c3f\x20=\x20vec3'+'f(xsc.x\x20/\x20'+'xsc.y,\x20xmc'+'.x\x20/\x20xmc.y'+',\x20xlc.x\x20/\x20'+'xlc.y);\x0a\x0a\x20'+'\x20\x20\x20if\x20(Roo'+'t.x\x20<\x20Root'+'.y\x20&&\x20Root'+'.x\x20<\x20Root.'+'z)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root\x20=\x20'+'Root.yxz;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(Root.'+'z\x20<\x20Root.x'+'\x20&&\x20Root.z'+'\x20<\x20Root.y)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root\x20=\x20Ro'+'ot.xzy;\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20Root;'+'\x0a}\x0a\x0afn\x20LTC'+'_EvaluateD'+'isk(N:\x20vec'+'3f,\x20V:\x20vec'+'3f,\x20P:\x20vec'+'3f,\x20Minv:\x20'+'mat3x3f,\x20p'+'oints:\x20Coo'+'rds)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20let\x20T1:\x20'+'vec3f\x20=\x20no'+'rmalize(V\x20'+'-\x20N\x20*\x20dot('+'V,\x20N));\x0a\x20\x20'+'\x20\x20let\x20T2:\x20'+'vec3f\x20=\x20cr'+'oss(N,\x20T1)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'rotate\x20are'+'a\x20light\x20in'+'\x20(T1,\x20T2,\x20'+'N)\x20basis\x0a\x20'+'\x20\x20\x20let\x20R:\x20'+'mat3x3f\x20=\x20'+'transpose('+'\x20mat3x3f(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20polygon\x20'+'(allocate\x20'+'5\x20vertices'+'\x20for\x20clipp')+('ing\x0a\x20\x20\x20\x20va'+'r\x20L_:\x20arra'+'y<vec3f,\x203'+'>;\x0a\x20\x20\x20\x20L_['+'0]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[1'+']\x20=\x20R\x20*\x20(\x20'+'points.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20L_[2]'+'\x20=\x20R\x20*\x20(\x20p'+'oints.coor'+'d2\x20-\x20P\x20);\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'it\x20ellipse'+'\x0a\x20\x20\x20\x20let\x20C'+':\x20vec3f\x20\x20='+'\x200.5\x20*\x20(L_'+'[0]\x20+\x20L_[2'+']);\x0a\x20\x20\x20\x20va'+'r\x20V1:\x20vec3'+'f\x20=\x200.5\x20*\x20'+'(L_[1]\x20-\x20L'+'_[2]);\x0a\x20\x20\x20'+'\x20var\x20V2:\x20v'+'ec3f\x20=\x200.5'+'\x20*\x20(L_[1]\x20'+'-\x20L_[0]);\x0a'+'\x0a\x20\x20\x20\x20let\x20C'+'_Minv:\x20vec'+'3f\x20\x20=\x20Minv'+'\x20*\x20C;\x0a\x20\x20\x20\x20'+'let\x20V1_Min'+'v:\x20vec3f\x20='+'\x20Minv\x20*\x20V1'+';\x0a\x20\x20\x20\x20let\x20'+'V2_Minv:\x20v'+'ec3f\x20=\x20Min'+'v\x20*\x20V2;\x0a\x0a\x20'+'\x20\x20\x20//\x20comp'+'ute\x20eigenv'+'ectors\x20of\x20'+'ellipse\x0a\x20\x20'+'\x20\x20var\x20a:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20b:\x20f32;\x0a'+'\x20\x20\x20\x20let\x20d1'+'1:\x20f32\x20=\x20d'+'ot(V1_Minv'+',\x20V1_Minv)'+';\x0a\x20\x20\x20\x20let\x20'+'d22:\x20f32\x20='+'\x20dot(V2_Mi'+'nv,\x20V2_Min'+'v);\x0a\x20\x20\x20\x20le'+'t\x20d12:\x20f32'+'\x20=\x20dot(V1_'+'Minv,\x20V2_M'+'inv);\x0a\x20\x20\x20\x20'+'if\x20(abs(d1'+'2)\x20/\x20sqrt('+'d11\x20*\x20d22)'+'\x20>\x200.0001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20tr:\x20f'+'32\x20=\x20d11\x20+'+'\x20d22;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'t_inner:\x20f'+'32\x20=\x20-d12\x20'+'*\x20d12\x20+\x20d1'+'1\x20*\x20d22;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20det:\x20f32\x20'+'=\x20sqrt(det'+'_inner);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20u:\x20f32\x20=\x20'+'0.5\x20*\x20sqrt'+'(tr\x20-\x202.0\x20'+'*\x20det);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'v:\x20f32\x20=\x200'+'.5\x20*\x20sqrt('+'tr\x20+\x202.0\x20*'+'\x20det);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20e'+'_max:\x20f32\x20'+'=\x20(u\x20+\x20v)\x20'+'*\x20(u\x20+\x20v);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20e_min:\x20'+'f32\x20=\x20(u\x20-'+'\x20v)\x20*\x20(u\x20-'+'\x20v);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20V1'+'_:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va')+('r\x20V2_:\x20vec'+'3f;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(d11'+'\x20>\x20d22)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V1_\x20=\x20d1'+'2\x20*\x20V1_Min'+'v\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2_Minv;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20V2_\x20=\x20d12'+'\x20*\x20V1_Minv'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2_Minv;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12*V2_'+'Minv\x20+\x20(e_'+'max\x20-\x20d22)'+'*V1_Minv;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V2_\x20=\x20d1'+'2*V2_Minv\x20'+'+\x20(e_min\x20-'+'\x20d22)*V1_M'+'inv;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20e_max;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20b'+'\x20=\x201.0\x20/\x20e'+'_min;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20V1\x20=\x20n'+'ormalize(V'+'1_);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20V2\x20=\x20no'+'rmalize(V2'+'_);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20dot(V'+'1_Minv,\x20V1'+'_Minv);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20b\x20=\x20'+'1.0\x20/\x20dot('+'V2_Minv,\x20V'+'2_Minv);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V1\x20'+'=\x20V1_Minv\x20'+'*\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20=\x20V2_Min'+'v\x20*\x20sqrt(b'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20V3'+':\x20vec3f\x20=\x20'+'normalize('+'cross(V1,\x20'+'V2));\x0a\x20\x20\x20\x20'+'if\x20(dot(C_'+'Minv,\x20V3)\x20'+'<\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V3\x20'+'=\x20V3\x20*\x20-1.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20let\x20L:'+'\x20f32\x20\x20=\x20do'+'t(V3,\x20C_Mi'+'nv);\x0a\x20\x20\x20\x20l'+'et\x20x0:\x20f32'+'\x20=\x20dot(V1,'+'\x20C_Minv)\x20/'+'\x20L;\x0a\x20\x20\x20\x20le'+'t\x20y0:\x20f32\x20'+'=\x20dot(V2,\x20'+'C_Minv)\x20/\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20E1:\x20f32\x20'+'=\x20inverseS'+'qrt(a);\x0a\x20\x20'+'\x20\x20let\x20E2:\x20'+'f32\x20=\x20inve'+'rseSqrt(b)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20a_scaled\x20'+'=\x20a\x20*\x20L\x20*\x20'+'L;\x0a\x20\x20\x20\x20let'+'\x20b_scaled\x20'+'=\x20b\x20*\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20c0:\x20f32\x20'+'=\x20a_scaled'+'\x20*\x20b_scale'+'d;\x0a\x20\x20\x20\x20let'+'\x20c1:\x20f32\x20='+'\x20a_scaled\x20'+'*\x20b_scaled')+('\x20*\x20(1.0\x20+\x20'+'x0\x20*\x20x0\x20+\x20'+'y0\x20*\x20y0)\x20-'+'\x20a_scaled\x20'+'-\x20b_scaled'+';\x0a\x20\x20\x20\x20let\x20'+'c2:\x20f32\x20=\x20'+'1.0\x20-\x20a_sc'+'aled\x20*\x20(1.'+'0\x20+\x20x0\x20*\x20x'+'0)\x20-\x20b_sca'+'led\x20*\x20(1.0'+'\x20+\x20y0\x20*\x20y0'+');\x0a\x20\x20\x20\x20let'+'\x20c3:\x20f32\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20let\x20roots'+':\x20vec3f\x20=\x20'+'SolveCubic'+'(vec4f(c0,'+'\x20c1,\x20c2,\x20c'+'3));\x0a\x20\x20\x20\x20l'+'et\x20e1:\x20f32'+'\x20=\x20roots.x'+';\x0a\x20\x20\x20\x20let\x20'+'e2:\x20f32\x20=\x20'+'roots.y;\x0a\x20'+'\x20\x20\x20let\x20e3:'+'\x20f32\x20=\x20roo'+'ts.z;\x0a\x0a\x20\x20\x20'+'\x20var\x20avgDi'+'r:\x20vec3f\x20='+'\x20vec3f(a_s'+'caled\x20*\x20x0'+'\x20/\x20(a_scal'+'ed\x20-\x20e2),\x20'+'b_scaled\x20*'+'\x20y0\x20/\x20(b_s'+'caled\x20-\x20e2'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20let\x20ro'+'tate:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20let\x20L'+'1:\x20f32\x20=\x20s'+'qrt(-e2\x20/\x20'+'e3);\x0a\x20\x20\x20\x20l'+'et\x20L2:\x20f32'+'\x20=\x20sqrt(-e'+'2\x20/\x20e1);\x0a\x0a'+'\x20\x20\x20\x20let\x20fo'+'rmFactor:\x20'+'f32\x20=\x20max('+'0.0,\x20L1\x20*\x20'+'L2\x20*\x20inver'+'seSqrt((1.'+'0\x20+\x20L1\x20*\x20L'+'1)\x20*\x20(1.0\x20'+'+\x20L2\x20*\x20L2)'+'));\x0a\x0a\x20\x20\x20\x20c'+'onst\x20LUT_S'+'IZE_disk:\x20'+'f32\x20=\x2064.0'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_SCAL'+'E_disk:\x20f3'+'2\x20=\x20(\x20LUT_'+'SIZE_disk\x20'+'-\x201.0\x20)\x20/\x20'+'LUT_SIZE_d'+'isk;\x0a\x20\x20\x20\x20c'+'onst\x20LUT_B'+'IAS_disk:\x20'+'f32\x20=\x200.5\x20'+'/\x20LUT_SIZE'+'_disk;\x0a\x0a\x20\x20'+'\x20\x20//\x20use\x20t'+'abulated\x20h'+'orizon-cli'+'pped\x20spher'+'e\x0a\x20\x20\x20\x20var\x20'+'uv:\x20vec2f\x20'+'=\x20vec2f(av'+'gDir.z\x20*\x200'+'.5\x20+\x200.5,\x20'+'formFactor'+');\x0a\x20\x20\x20\x20uv\x20'+'=\x20uv\x20*\x20LUT'+'_SCALE_dis'+'k\x20+\x20LUT_BI'+'AS_disk;\x0a\x0a'+'\x20\x20\x20\x20let\x20sc')+('ale:\x20f32\x20='+'\x20textureSa'+'mpleLevel('+'areaLights'+'LutTex2,\x20a'+'reaLightsL'+'utTex2Samp'+'ler,\x20uv,\x200'+'.0).w;\x0a\x0a\x20\x20'+'\x20\x20return\x20f'+'ormFactor\x20'+'*\x20scale;\x0a}'+'\x0a\x0a//\x20LTC_E'+'valuateDis'+'k\x20in\x20some\x20'+'rare\x20cases'+'\x20genereate'+'s\x20NaN\x20valu'+'es\x20in\x20a\x20or'+'\x20b,\x20just\x20b'+'efore\x20\x27flo'+'at\x20c0\x20=\x20a\x20'+'*\x20b;\x27\x0a//\x20G'+'et\x20rid\x20of\x20'+'those\x20Nan\x20'+'values\x20bef'+'ore\x20they\x20p'+'ropagate\x20f'+'urther,\x20as'+'\x20in\x20case\x20o'+'f\x20bloom\x20/\x20'+'DOF\x20blurs\x20'+'they\x0a//\x20pr'+'opagate\x20to'+'\x20large\x20are'+'as.\x20I\x20didn'+'\x27t\x20find\x20th'+'e\x20actual\x20r'+'eason\x20wher'+'e\x20those\x20co'+'me\x20from,\x20s'+'o\x20that\x20is\x20'+'still\x20TODO'+'.\x0a//\x20Note\x20'+'that\x20only\x20'+'disk/spher'+'e\x20lights\x20a'+'re\x20causing'+'\x20it,\x20so\x20on'+'ly\x20handle\x20'+'those.\x0afn\x20'+'FixNan(val'+'ue:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20v'+'alue\x20!=\x20va'+'lue\x20check\x20'+'for\x20NaN\x20as'+'\x20isnan()\x20i'+'s\x20not\x20avai'+'lable\x20in\x20W'+'GSL\x0a\x20\x20\x20\x20re'+'turn\x20selec'+'t(value,\x200'+'.0,\x20value\x20'+'!=\x20value);'+'\x0a}\x0a\x0afn\x20get'+'RectLightD'+'iffuse(wor'+'ldNormal:\x20'+'vec3f,\x20vie'+'wDir:\x20vec3'+'f,\x20lightDi'+'r:\x20vec3f,\x20'+'lightDirNo'+'rm:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20id'+'entityMat\x20'+'=\x20mat3x3f('+'vec3f(1.0,'+'\x200.0,\x200.0)'+',\x20vec3f(0.'+'0,\x201.0,\x200.'+'0),\x20vec3f('+'0.0,\x200.0,\x20'+'1.0));\x0a\x20\x20\x20'+'\x20return\x20LT'+'C_Evaluate'+'Rect(\x20worl'+'dNormal,\x20v'+'iewDir,\x20vP'+'ositionW,\x20'+'identityMa'+'t,\x20dLTCCoo'+'rds\x20);\x0a}\x0a\x0a'+'fn\x20getDisk'+'LightDiffu'+'se(worldNo'+'rmal:\x20vec3')+('f,\x20viewDir'+':\x20vec3f,\x20l'+'ightDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20identi'+'tyMat\x20=\x20ma'+'t3x3f(vec3'+'f(1.0,\x200.0'+',\x200.0),\x20ve'+'c3f(0.0,\x201'+'.0,\x200.0),\x20'+'vec3f(0.0,'+'\x200.0,\x201.0)'+');\x0a\x20\x20\x20\x20ret'+'urn\x20FixNan'+'(LTC_Evalu'+'ateDisk(\x20w'+'orldNormal'+',\x20viewDir,'+'\x20vPosition'+'W,\x20identit'+'yMat,\x20dLTC'+'Coords\x20));'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tDiffuse(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20let\x20fall'+'off:\x20f32\x20='+'\x20dSphereRa'+'dius\x20/\x20(do'+'t(lightDir'+',\x20lightDir'+')\x20+\x20dSpher'+'eRadius);\x0a'+'\x20\x20\x20\x20return'+'\x20FixNan(ge'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNorm)\x20'+'*\x20falloff)'+';\x0a}\x0a\x0afn\x20ge'+'tLTCLightI'+'nvMat(uv:\x20'+'vec2f)\x20->\x20'+'mat3x3f\x20{\x0a'+'\x20\x20\x20\x20let\x20t1'+':\x20vec4f\x20=\x20'+'textureSam'+'pleLevel(a'+'reaLightsL'+'utTex1,\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er,\x20uv,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(\x20'+'t1.x,\x200.0,'+'\x20t1.y\x20),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(\x200.0,\x201'+'.0,\x200.0\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(\x20t1.z'+',\x200.0,\x20t1.'+'w\x20)\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight')+('InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getRectLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20cal'+'cDiskLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getDiskLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcDiskLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tSpecular('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'DiskLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir,\x20'+'dLTCUV);\x0a}'+'\x0a'),sD='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_me'+'talness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getMe'+'talness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'metalness:'+'\x20f32\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20metal'+'ness\x20=\x20met'+'alness\x20*\x20u'+'niform.mat'+'erial_meta'+'lness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'metalness\x20'+'=\x20metalnes'+'s\x20*\x20textur'+'eSampleBia'+'s({STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+',\x20{STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_METALN'+'ESS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_METALNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_VE'+'RTEX\x0a\x20\x20\x20\x20m'+'etalness\x20='+'\x20metalness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'METALNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dMetal'+'ness\x20=\x20met'+'alness;\x0a}\x0a',iD='\x0avar\x20textu'+'re_msdfMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20texture'+'_msdfMapSa'+'mpler:\x20sam'+'pler;\x0a\x0afn\x20'+'median(r:\x20'+'f32,\x20g:\x20f3'+'2,\x20b:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(min(r'+',\x20g),\x20min('+'max(r,\x20g),'+'\x20b));\x0a}\x0a\x0af'+'n\x20map(min:'+'\x20f32,\x20max:'+'\x20f32,\x20v:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(v\x20-\x20m'+'in)\x20/\x20(max'+'\x20-\x20min);\x0a}'+'\x0a\x0auniform\x20'+'font_sdfIn'+'tensity:\x20f'+'32;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20font_px'+'range:\x20f32'+';\x20\x20\x20\x20\x20\x20//\x20'+'the\x20number'+'\x20of\x20pixels'+'\x20between\x20i'+'nside\x20and\x20'+'outside\x20th'+'e\x20font\x20in\x20'+'SDF\x0aunifor'+'m\x20font_tex'+'tureWidth:'+'\x20f32;\x20//\x20t'+'he\x20width\x20o'+'f\x20the\x20text'+'ure\x20atlas\x0a'+'\x0a#ifndef\x20L'+'IT_MSDF_TE'+'XT_ATTRIBU'+'TE\x0a\x20\x20\x20\x20uni'+'form\x20outli'+'ne_color:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'utline_thi'+'ckness:\x20f3'+'2;\x0a\x20\x20\x20\x20uni'+'form\x20shado'+'w_color:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'uniform\x20sh'+'adow_offse'+'t:\x20vec2f;\x0a'+'#else\x0a\x20\x20\x20\x20'+'varying\x20ou'+'tline_colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20outline_'+'thickness:'+'\x20f32;\x0a\x20\x20\x20\x20'+'varying\x20sh'+'adow_color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20varying'+'\x20shadow_of'+'fset:\x20vec2'+'f;\x0a#endif\x0a'+'\x0afn\x20applyM'+'sdf(color_'+'in:\x20vec4f)'+'\x20->\x20vec4f\x20'+'{\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_M'+'SDF_TEXT_A'+'TTRIBUTE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20uniform.'+'outline_co'+'lor;\x0a\x20\x20\x20\x20\x20'+('\x20\x20\x20var\x20out'+'line_thick'+'nessValue\x20'+'=\x20uniform.'+'outline_th'+'ickness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_co'+'lorValue\x20='+'\x20uniform.s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_offsetVa'+'lue\x20=\x20unif'+'orm.shadow'+'_offset;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utline_thi'+'cknessValu'+'e\x20=\x20outlin'+'e_thicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_colorVal'+'ue\x20=\x20shado'+'w_color;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_of'+'fsetValue\x20'+'=\x20shadow_o'+'ffset;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20Conv'+'ert\x20to\x20lin'+'ear\x20space\x20'+'before\x20pro'+'cessing\x0a\x20\x20'+'\x20\x20//\x20TODO:'+'\x20ideally\x20t'+'his\x20would\x20'+'receive\x20th'+'e\x20color\x20in'+'\x20linear\x20sp'+'ace,\x20but\x20t'+'hat\x20would\x20'+'require\x20la'+'rger\x20chang'+'es\x0a\x20\x20\x20\x20//\x20'+'on\x20the\x20eng'+'ine\x20side,\x20'+'with\x20the\x20w'+'ay\x20premult'+'iplied\x20alp'+'ha\x20is\x20hand'+'led\x20as\x20wel'+'l.\x0a\x20\x20\x20\x20var'+'\x20color\x20=\x20v'+'ec4f(gamma'+'CorrectInp'+'utVec3(col'+'or_in.rgb)'+',\x20color_in'+'.a);\x0a\x0a\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20field\x0a'+'\x20\x20\x20\x20let\x20ts'+'ample:\x20vec'+'3f\x20=\x20textu'+'reSample(t'+'exture_msd'+'fMap,\x20text'+'ure_msdfMa'+'pSampler,\x20'+'vUv0).rgb;'+'\x0a\x20\x20\x20\x20let\x20u'+'vShdw:\x20vec'+'2f\x20=\x20vUv0\x20'+'-\x20shadow_o'+'ffsetValue'+';\x0a\x20\x20\x20\x20let\x20'+'ssample:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'(texture_m'+'sdfMap,\x20te'+'xture_msdf'+'MapSampler'+',\x20uvShdw).'+'rgb;\x0a\x0a\x20\x20\x20\x20'+'//\x20get\x20the'+'\x20signed\x20di'+'stance\x20val'+'ue\x0a\x20\x20\x20\x20let')+('\x20sigDist:\x20'+'f32\x20=\x20medi'+'an(tsample'+'.r,\x20tsampl'+'e.g,\x20tsamp'+'le.b);\x0a\x20\x20\x20'+'\x20var\x20sigDi'+'stShdw:\x20f3'+'2\x20=\x20median'+'(ssample.r'+',\x20ssample.'+'g,\x20ssample'+'.b);\x0a\x0a\x20\x20\x20\x20'+'//\x20smoothi'+'ng\x20limit\x20-'+'\x20smaller\x20v'+'alue\x20makes'+'\x20for\x20sharp'+'er\x20but\x20mor'+'e\x20aliased\x20'+'text,\x20espe'+'cially\x20on\x20'+'angles\x0a\x20\x20\x20'+'\x20//\x20too\x20la'+'rge\x20value\x20'+'(0.5)\x20crea'+'tes\x20a\x20dark'+'\x20glow\x20arou'+'nd\x20the\x20let'+'ters\x0a\x20\x20\x20\x20l'+'et\x20smoothi'+'ngMax:\x20f32'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20let'+'\x20w:\x20vec2f\x20'+'=\x20abs(dpdx'+'(vUv0))\x20+\x20'+'abs(dpdy(v'+'Uv0));\x0a\x20\x20\x20'+'\x20let\x20smoot'+'hing:\x20f32\x20'+'=\x20clamp(w.'+'x\x20*\x20unifor'+'m.font_tex'+'tureWidth\x20'+'/\x20uniform.'+'font_pxran'+'ge,\x200.0,\x20s'+'moothingMa'+'x);\x0a\x0a\x20\x20\x20\x20l'+'et\x20mapMin:'+'\x20f32\x20=\x200.0'+'5;\x0a\x20\x20\x20\x20let'+'\x20mapMax:\x20f'+'32\x20=\x20clamp'+'(1.0\x20-\x20uni'+'form.font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20let\x20si'+'gDistInner'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist);\x0a\x20\x20'+'\x20\x20let\x20sigD'+'istOutline'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist\x20+\x20ou'+'tline_thic'+'knessValue'+');\x0a\x20\x20\x20\x20sig'+'DistShdw\x20='+'\x20map(mapMi'+'n,\x20mapMax,'+'\x20sigDistSh'+'dw\x20+\x20outli'+'ne_thickne'+'ssValue);\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'enter:\x20f32'+'\x20=\x200.5;\x0a\x20\x20'+'\x20\x20//\x20calcu'+'late\x20smoot'+'hing\x20and\x20u'+'se\x20to\x20gene')+('rate\x20opaci'+'ty\x0a\x20\x20\x20\x20let'+'\x20inside:\x20f'+'32\x20=\x20smoot'+'hstep(cent'+'er\x20-\x20smoot'+'hing,\x20cent'+'er\x20+\x20smoot'+'hing,\x20sigD'+'istInner);'+'\x0a\x20\x20\x20\x20let\x20o'+'utline:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stOutline)'+';\x0a\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20let\x20tc'+'olor_outli'+'ne:\x20vec4f\x20'+'=\x20outline\x20'+'*\x20vec4f(ou'+'tline_colo'+'rValue.a\x20*'+'\x20outline_c'+'olorValue.'+'rgb,\x20outli'+'ne_colorVa'+'lue.a);\x0a\x20\x20'+'\x20\x20var\x20tcol'+'or:\x20vec4f\x20'+'=\x20select(v'+'ec4f(0.0),'+'\x20tcolor_ou'+'tline,\x20out'+'line\x20>\x20ins'+'ide);\x0a\x20\x20\x20\x20'+'tcolor\x20=\x20m'+'ix(tcolor,'+'\x20color,\x20in'+'side);\x0a\x0a\x20\x20'+'\x20\x20let\x20scol'+'or_shadow:'+'\x20vec4f\x20=\x20s'+'hadow\x20*\x20ve'+'c4f(shadow'+'_colorValu'+'e.a\x20*\x20shad'+'ow_colorVa'+'lue.rgb,\x20s'+'hadow_colo'+'rValue.a);'+'\x0a\x20\x20\x20\x20let\x20s'+'color:\x20vec'+'4f\x20=\x20selec'+'t(tcolor,\x20'+'scolor_sha'+'dow,\x20shado'+'w\x20>\x20outlin'+'e);\x0a\x20\x20\x20\x20tc'+'olor\x20=\x20mix'+'(scolor,\x20t'+'color,\x20out'+'line);\x0a\x0a\x20\x20'+'\x20\x20//\x20Conve'+'rt\x20back\x20to'+'\x20gamma\x20spa'+'ce\x20before\x20'+'returning\x0a'+'\x20\x20\x20\x20tcolor'+'\x20=\x20vec4f(g'+'ammaCorrec'+'tOutput(tc'+'olor.rgb),'+'\x20tcolor.a)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20tcolor'+';\x0a}\x0a'),rD='\x0a\x0afn\x20getSp'+'ecularModu'+'late(specu'+'larity:\x20ve'+'c3f,\x20albed'+'o:\x20vec3f,\x20'+'metalness:'+'\x20f32,\x20f0:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20dielec'+'tricF0:\x20ve'+'c3f\x20=\x20f0\x20*'+'\x20speculari'+'ty;\x0a\x20\x20\x20\x20re'+'turn\x20mix(d'+'ielectricF'+'0,\x20albedo,'+'\x20metalness'+');\x0a}\x0a\x0afn\x20g'+'etAlbedoMo'+'dulate(alb'+'edo:\x20vec3f'+',\x20metalnes'+'s:\x20f32)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'albedo\x20*\x20('+'1.0\x20-\x20meta'+'lness);\x0a}\x0a',aD='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var\x20morph'+'Texture:\x20t'+'exture_2d_'+'array<f32>'+';\x0a\x20\x20\x20\x20unif'+'orm\x20morphF'+'actor:\x20arr'+'ay<f32,\x20{M'+'ORPH_TEXTU'+'RE_MAX_COU'+'NT}>;\x0a\x20\x20\x20\x20'+'uniform\x20mo'+'rphIndex:\x20'+'array<u32,'+'\x20{MORPH_TE'+'XTURE_MAX_'+'COUNT}>;\x0a\x20'+'\x20\x20\x20uniform'+'\x20count:\x20u3'+'2;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x0a\x20\x20'+'\x20\x20fn\x20fragm'+'entMain(in'+'put\x20:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20color\x20='+'\x20vec3f(0,\x20'+'0,\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20t'+'extureDims'+'\x20=\x20texture'+'Dimensions'+'(morphText'+'ure);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20pi'+'xelCoords\x20'+'=\x20vec2i(in'+'put.uv0\x20*\x20'+'vec2f(text'+'ureDims));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'u32\x20=\x200;\x20i'+'\x20<\x20uniform'+'.count;\x20i\x20'+'=\x20i\x20+\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'tureIndex:'+'\x20u32\x20=\x20uni'+'form.morph'+'Index[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20delta\x20'+'=\x20textureL'+'oad(morphT'+'exture,\x20pi'+'xelCoords,'+'\x20textureIn'+'dex,\x200).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20+=\x20unifor'+'m.morphFac'+'tor[i].ele'+'ment\x20*\x20del'+'ta;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'color,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',nD='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',oD='\x0aattribute'+'\x20vertex_ou'+'tlineParam'+'eters:\x20vec'+'3f;\x0aattrib'+'ute\x20vertex'+'_shadowPar'+'ameters:\x20v'+'ec3f;\x0a\x0avar'+'ying\x20outli'+'ne_color:\x20'+'vec4f;\x0avar'+'ying\x20outli'+'ne_thickne'+'ss:\x20f32;\x0av'+'arying\x20sha'+'dow_color:'+'\x20vec4f;\x0ava'+'rying\x20shad'+'ow_offset:'+'\x20vec2f;\x0a\x0av'+'ar<private'+'>\x20dOutline'+'Color:\x20vec'+'4f;\x0avar<pr'+'ivate>\x20dOu'+'tlineThick'+'ness:\x20f32;'+'\x0avar<priva'+'te>\x20dShado'+'wColor:\x20ve'+'c4f;\x0avar<p'+'rivate>\x20dS'+'hadowOffse'+'t:\x20vec2f;\x0a'+'\x0afn\x20unpack'+'MsdfParams'+'()\x20{\x0a\x20\x20\x20\x20l'+'et\x20little:'+'\x20vec3f\x20=\x20v'+'ertex_outl'+'ineParamet'+'ers\x20%\x20vec3'+'f(256.0);\x0a'+'\x20\x20\x20\x20let\x20bi'+'g:\x20vec3f\x20='+'\x20(vertex_o'+'utlinePara'+'meters\x20-\x20l'+'ittle)\x20/\x202'+'56.0;\x0a\x0a\x20\x20\x20'+'\x20dOutlineC'+'olor\x20=\x20vec'+'4f(little.'+'x,\x20big.x,\x20'+'little.y,\x20'+'big.y)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20//\x20_outli'+'neThicknes'+'sScale\x20==='+'\x200.2\x0a\x20\x20\x20\x20d'+'OutlineThi'+'ckness\x20=\x20l'+'ittle.z\x20/\x20'+'255.0\x20*\x200.'+'2;\x0a\x0a\x20\x20\x20\x20le'+'t\x20little_s'+'hadow\x20=\x20ve'+'rtex_shado'+'wParameter'+'s\x20%\x20vec3f('+'256.0);\x0a\x20\x20'+'\x20\x20let\x20big_'+'shadow\x20=\x20('+'vertex_sha'+'dowParamet'+'ers\x20-\x20litt'+'le_shadow)'+'\x20/\x20256.0;\x0a'+'\x0a\x20\x20\x20\x20dShad'+'owColor\x20=\x20'+'vec4f(litt'+'le_shadow.'+'x,\x20big_sha'+'dow.x,\x20lit'+'tle_shadow'+'.y,\x20big_sh'+'adow.y)\x20/\x20'+'255.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+('ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20dShad'+'owOffset\x20='+'\x20(vec2f(li'+'ttle_shado'+'w.z,\x20big_s'+'hadow.z)\x20/'+'\x20127.0\x20-\x201'+'.0)\x20*\x200.00'+'5;\x0a}\x0a'),lD='\x0avar<priva'+'te>\x20dNorma'+'lMatrix:\x20m'+'at3x3f;\x0a\x0af'+'n\x20getNorma'+'l()\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20d'+'NormalMatr'+'ix\x20=\x20getNo'+'rmalMatrix'+'(dModelMat'+'rix);\x0a\x20\x20\x20\x20'+'let\x20localN'+'ormal:\x20vec'+'3f\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}',cD='\x0a\x0aattribut'+'e\x20vertex_n'+'ormal:\x20vec'+'3f;\x0a\x0aunifo'+'rm\x20matrix_'+'normal:\x20ma'+'t3x3f;\x0a\x0a#i'+'fdef\x20MORPH'+'ING_NORMAL'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MORPHING'+'_INT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20mor'+'phNormalTe'+'x:\x20texture'+'_2d<u32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphNor'+'malTexSamp'+'ler:\x20sampl'+'er;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hNormalTex'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20morphNorm'+'alTexSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0afn\x20getLo'+'calNormal('+'vertexNorm'+'al:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20localNorm'+'al:\x20vec3f\x20'+'=\x20vertexNo'+'rmal;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_NOR'+'MAL\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20mor'+'phUV:\x20vec2'+'i\x20=\x20getTex'+'tureMorphC'+'oords();\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_INT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20morphN'+'ormalInt:\x20'+'vec4u\x20=\x20te'+'xtureLoad('+'morphNorma'+'lTex,\x20morp'+'hUV,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20morph'+'NormalF:\x20v'+'ec3f\x20=\x20vec'+'3f(morphNo'+'rmalInt.xy'+'z)\x20/\x2065535'+'.0\x20*\x202.0\x20-'+'\x201.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormalF;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'morphNorma'+'l:\x20vec3f\x20='+'\x20textureLo'+'ad(morphNo'+'rmalTex,\x20m'+'orphUV,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormal;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20lo'+'calNormal;'+'\x0a}\x0a\x0a#if\x20de'+'fined(SKIN'+')\x20||\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20fn\x20get'+('NormalMatr'+'ix(modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ma'+'t3x3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20mat3x3f'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20fn'+'\x20getNormal'+'Matrix(mod'+'elMatrix:\x20'+'mat4x4f)\x20-'+'>\x20mat3x3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20mat'+'3x3f(model'+'Matrix[0].'+'xyz,\x20model'+'Matrix[1].'+'xyz,\x20model'+'Matrix[2].'+'xyz);\x0a\x20\x20\x20\x20'+'}\x0a#else\x0a\x20\x20'+'\x20\x20fn\x20getNo'+'rmalMatrix'+'(modelMatr'+'ix:\x20mat4x4'+'f)\x20->\x20mat3'+'x3f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_norm'+'al;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),hD='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_bu'+'mpiness:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20un'+'iform\x20mate'+'rial_norma'+'lDetailMap'+'Bumpiness:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20//\x20https:'+'//blog.sel'+'fshadow.co'+'m/publicat'+'ions/blend'+'ing-in-det'+'ail/#detai'+'l-oriented'+'\x0a\x20\x20\x20\x20fn\x20bl'+'endNormals'+'(inN1:\x20vec'+'3f,\x20inN2:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'n1:\x20vec3f\x20'+'=\x20inN1\x20+\x20v'+'ec3f(0.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20n2:\x20vec'+'3f\x20=\x20inN2\x20'+'*\x20vec3f(-1'+'.0,\x20-1.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20n1\x20*\x20dot('+'n1,\x20n2)\x20/\x20'+'n1.z\x20-\x20n2;'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0afn\x20ge'+'tNormal()\x20'+'{\x0a#ifdef\x20S'+'TD_NORMAL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20var\x20norm'+'alMap:\x20vec'+'3f\x20=\x20{STD_'+'NORMAL_TEX'+'TURE_DECOD'+'E}(texture'+'SampleBias'+'({STD_NORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_NORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_NOR'+'MAL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias));\x0a'+'\x20\x20\x20\x20normal'+'Map\x20=\x20mix('+'vec3f(0.0,'+'\x200.0,\x201.0)'+',\x20normalMa'+'p,\x20uniform'+'.material_'+'bumpiness)'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_NO'+'RMALDETAIL'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20normalDet'+'ailMap:\x20ve'+'c3f\x20=\x20{STD'+'_NORMALDET'+'AIL_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE_NAME},'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_NAM'+'E}Sampler,'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_UV}'+(',\x20uniform.'+'textureBia'+'s));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalD'+'etailMap\x20='+'\x20mix(vec3f'+'(0.0,\x200.0,'+'\x201.0),\x20nor'+'malDetailM'+'ap,\x20unifor'+'m.material'+'_normalDet'+'ailMapBump'+'iness);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20norm'+'alMap\x20=\x20bl'+'endNormals'+'(normalMap'+',\x20normalDe'+'tailMap);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20nor'+'malize(dTB'+'N\x20*\x20normal'+'Map);\x0a#els'+'e\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a'),dD='\x0auniform\x20m'+'aterial_op'+'acity:\x20f32'+';\x0a\x0afn\x20getO'+'pacity()\x20{'+'\x0a\x20\x20\x20\x20dAlph'+'a\x20=\x20unifor'+'m.material'+'_opacity;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E\x0a\x20\x20\x20\x20dAlp'+'ha\x20=\x20dAlph'+'a\x20*\x20textur'+'eSampleBia'+'s({STD_OPA'+'CITY_TEXTU'+'RE_NAME},\x20'+'{STD_OPACI'+'TY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'OPACITY_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20=\x20dA'+'lpha\x20*\x20cla'+'mp(vVertex'+'Color.{STD'+'_OPACITY_V'+'ERTEX_CHAN'+'NEL},\x200.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',fD='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20blueNo'+'iseJitter:'+'\x20vec4f;\x0a\x0a#'+'if\x20STD_OPA'+'CITY_DITHE'+'R\x20==\x20BLUEN'+'OISE\x0a\x20\x20\x20\x20v'+'ar\x20blueNoi'+'seTex32\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20blueN'+'oiseTex32S'+'ampler\x20:\x20s'+'ampler;\x0a#e'+'ndif\x0a\x0afn\x20o'+'pacityDith'+'er(alpha:\x20'+'f32,\x20id:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'#if\x20STD_OP'+'ACITY_DITH'+'ER\x20==\x20BAYE'+'R8\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20nois'+'e:\x20f32\x20=\x20b'+'ayer8(floo'+'r((pcPosit'+'ion.xy\x20+\x20u'+'niform.blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+')\x20%\x20vec2f('+'8.0)))\x20/\x206'+'4.0;\x0a\x0a\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20=='+'\x20BLUENOISE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uv\x20'+'=\x20fract(pc'+'Position.x'+'y\x20/\x2032.0\x20+'+'\x20uniform.b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20noise:\x20f3'+'2\x20=\x20textur'+'eSampleLev'+'el(blueNoi'+'seTex32,\x20b'+'lueNoiseTe'+'x32Sampler'+',\x20uv,\x200.0)'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20IGNNOI'+'SE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ba'+'sed\x20on\x20htt'+'ps://www.i'+'ryoku.com/'+'next-gener'+'ation-post'+'-processin'+'g-in-call-'+'of-duty-ad'+'vanced-war'+'fare/\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20magic\x20=\x20'+'vec3f(0.06'+'711056,\x200.'+'00583715,\x20'+'52.9829189'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'oise:\x20f32\x20'+'=\x20fract(ma'+'gic.z\x20*\x20fr'+'act(dot(pc'+'Position.x'+'y\x20+\x20unifor'+'m.blueNois'+'eJitter.xy'+'\x20+\x20id,\x20mag'+('ic.xy)));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20conve'+'rt\x20the\x20noi'+'se\x20to\x20line'+'ar\x20space,\x20'+'as\x20that\x20is'+'\x20specified'+'\x20in\x20sRGB\x20s'+'pace\x20(stor'+'es\x20percept'+'ual\x20values'+')\x0a\x20\x20\x20\x20nois'+'e\x20=\x20pow(no'+'ise,\x202.2);'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'alpha\x20<\x20no'+'ise)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),uD='\x0a',pD='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(outp'+'ut.color.r'+'gb,\x20litArg'+'s_opacity)'+';\x0a\x0a#elif\x20L'+'IT_BLEND_T'+'YPE\x20==\x20PRE'+'MULTIPLIED'+'\x0a\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(out'+'put.color.'+'rgb\x20*\x20litA'+'rgs_opacit'+'y,\x20litArgs'+'_opacity);'+'\x0a\x0a#else\x0a\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(output'+'.color.rgb'+',\x201.0);\x0a\x0a#'+'endif\x0a',mD='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0avar\x20sour'+'ce:\x20textur'+'e_2d<f32>;'+'\x0avar\x20sourc'+'eSampler:\x20'+'sampler;\x0a\x0a'+'@fragment\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'textureSam'+'ple(source'+',\x20sourceSa'+'mpler,\x20inp'+'ut.vUv0);\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'+'\x0a',_D='\x0a\x0auniform\x20'+'material_s'+'heen:\x20vec3'+'f;\x0a\x0afn\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20var\x20sh'+'eenColor\x20='+'\x20uniform.m'+'aterial_sh'+'een;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_TEX'+'TURE\x0a\x20\x20\x20\x20s'+'heenColor\x20'+'=\x20sheenCol'+'or\x20*\x20{STD_'+'SHEEN_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SHEEN'+'_TEXTURE_N'+'AME},\x20{STD'+'_SHEEN_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEEN_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as)).{STD_'+'SHEEN_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_VER'+'TEX\x0a\x20\x20\x20\x20sh'+'eenColor\x20='+'\x20sheenColo'+'r\x20*\x20satura'+'te3(vVerte'+'xColor.{ST'+'D_SHEEN_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20sSpecula'+'rity\x20=\x20she'+'enColor;\x0a}'+'\x0a',gD='\x0auniform\x20m'+'aterial_sh'+'eenGloss:\x20'+'f32;\x0a\x0afn\x20g'+'etSheenGlo'+'ssiness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'sheenGloss'+'iness\x20=\x20un'+'iform.mate'+'rial_sheen'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SHEENGL'+'OSS_TEXTUR'+'E\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_SHEEN'+'GLOSS_TEXT'+'URE_NAME},'+'\x20{STD_SHEE'+'NGLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_UV},\x20un'+'iform.text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20=\x20'+'sheenGloss'+'iness\x20*\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'GLOSS_VERT'+'EX_CHANNEL'+'});\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEENGLOS'+'S_INVERT\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20='+'\x201.0\x20-\x20she'+'enGlossine'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'sGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'+\x200.000000'+'1;\x0a}\x0a',SD='\x0auniform\x20m'+'aterial_he'+'ightMapFac'+'tor:\x20f32;\x0a'+'\x0afn\x20getPar'+'allax()\x20{\x0a'+'\x20\x20\x20\x20var\x20pa'+'rallaxScal'+'e\x20=\x20unifor'+'m.material'+'_heightMap'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20var\x20hei'+'ght:\x20f32\x20='+'\x20textureSa'+'mpleBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_HEIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_HEIGHT_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'height\x20=\x20h'+'eight\x20*\x20pa'+'rallaxScal'+'e\x20-\x20parall'+'axScale\x20*\x20'+'0.5;\x0a\x20\x20\x20\x20v'+'ar\x20viewDir'+'T:\x20vec3f\x20='+'\x20dViewDirW'+'\x20*\x20dTBN;\x0a\x0a'+'\x20\x20\x20\x20viewDi'+'rT.z\x20=\x20vie'+'wDirT.z\x20+\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',yD='\x0auniform\x20m'+'eshInstanc'+'eId:\x20u32;\x0a'+'\x0afn\x20getPic'+'kOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20let\x20i'+'nv:\x20vec4f\x20'+'=\x20vec4f(1.'+'0\x20/\x20255.0)'+';\x0a\x20\x20\x20\x20let\x20'+'shifts:\x20ve'+'c4u\x20=\x20vec4'+'u(16u,\x208u,'+'\x200u,\x2024u);'+'\x0a\x20\x20\x20\x20let\x20c'+'ol:\x20vec4u\x20'+'=\x20(vec4u(u'+'niform.mes'+'hInstanceI'+'d)\x20>>\x20shif'+'ts)\x20&\x20vec4'+'u(0xffu);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4f(col'+')\x20*\x20inv;\x0a}',vD='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20dReflDi'+'rW\x20=\x20norma'+'lize(-refl'+'ect(viewDi'+'r,\x20worldNo'+'rmal));\x0a}\x0a',xD='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20rou'+'ghness:\x20f3'+'2\x20=\x20sqrt(1'+'.0\x20-\x20min(g'+'loss,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20directio'+'n:\x20vec2f\x20='+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20anisotrop'+'y:\x20f32\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cDirection'+':\x20vec3f\x20=\x20'+'anisotropi'+'cB;\x0a\x20\x20\x20\x20le'+'t\x20anisotro'+'picTangent'+':\x20vec3f\x20=\x20'+'cross(anis'+'otropicDir'+'ection,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20let\x20anis'+'otropicNor'+'mal:\x20vec3f'+'\x20=\x20cross(a'+'nisotropic'+'Tangent,\x20a'+'nisotropic'+'Direction)'+';\x0a\x20\x20\x20\x20let\x20'+'bendFactor'+':\x20f32\x20=\x201.'+'0\x20-\x20anisot'+'ropy\x20*\x20(1.'+'0\x20-\x20roughn'+'ess);\x0a\x20\x20\x20\x20'+'let\x20bendFa'+'ctor4:\x20f32'+'\x20=\x20bendFac'+'tor\x20*\x20bend'+'Factor\x20*\x20b'+'endFactor\x20'+'*\x20bendFact'+'or;\x0a\x20\x20\x20\x20le'+'t\x20bentNorm'+'al:\x20vec3f\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}',TD='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0afn\x20addRe'+'flectionCC'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20ccRef'+'lection\x20=\x20'+'ccReflecti'+'on\x20+\x20calcR'+'eflection('+'reflDir,\x20g'+'loss);\x0a}\x0a#'+'endif\x0a',wD='\x0avar\x20textu'+'re_cubeMap'+':\x20texture_'+'cube<f32>;'+'\x0avar\x20textu'+'re_cubeMap'+'Sampler:\x20s'+'ampler;\x0aun'+'iform\x20mate'+'rial_refle'+'ctivity:\x20f'+'32;\x0a\x0afn\x20ca'+'lcReflecti'+'on(reflDir'+':\x20vec3f,\x20g'+'loss:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'lookupVec:'+'\x20vec3f\x20=\x20c'+'ubeMapProj'+'ect(reflDi'+'r);\x0a\x20\x20\x20\x20lo'+'okupVec.x\x20'+'=\x20lookupVe'+'c.x\x20*\x20-1.0'+';\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_cubeMa'+'p,\x20texture'+'_cubeMapSa'+'mpler,\x20loo'+'kupVec));\x0a'+'}\x0a\x0afn\x20addR'+'eflection('+'reflDir:\x20v'+'ec3f,\x20glos'+'s:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20dR'+'eflection\x20'+'+\x20vec4f(ca'+'lcReflecti'+'on(reflDir'+',\x20gloss),\x20'+'uniform.ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',ED='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20var\x20t'+'exture_env'+'Atlas:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'envAtlasSa'+'mpler:\x20sam'+'pler;\x0a#end'+'if\x0a\x0avar\x20te'+'xture_cube'+'Map:\x20textu'+'re_cube<f3'+'2>;\x0avar\x20te'+'xture_cube'+'MapSampler'+':\x20sampler;'+'\x0auniform\x20m'+'aterial_re'+'flectivity'+':\x20f32;\x0a\x0afn'+'\x20calcRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20dir:\x20ve'+'c3f\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20toSph'+'ericalUv(d'+'ir);\x0a\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20roughne'+'ss\x20level\x0a\x20'+'\x20\x20\x20let\x20lev'+'el:\x20f32\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20let\x20ile'+'vel:\x20f32\x20='+'\x20floor(lev'+'el);\x0a\x20\x20\x20\x20l'+'et\x20flevel:'+'\x20f32\x20=\x20lev'+'el\x20-\x20ileve'+'l;\x0a\x0a\x20\x20\x20\x20le'+'t\x20sharp:\x20v'+'ec3f\x20=\x20{re'+'flectionCu'+'bemapDecod'+'e}(texture'+'Sample(tex'+'ture_cubeM'+'ap,\x20textur'+'e_cubeMapS'+'ampler,\x20di'+'r));\x0a\x20\x20\x20\x20l'+'et\x20roughA:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+')));\x0a\x20\x20\x20\x20l'+'et\x20roughB:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(shar'+'p,\x20mix(rou'+('ghA,\x20rough'+'B,\x20flevel)'+',\x20min(leve'+'l,\x201.0)));'+'\x0a}\x0a\x0afn\x20add'+'Reflection'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20dRefl'+'ection\x20=\x20d'+'Reflection'+'\x20+\x20vec4f(c'+'alcReflect'+'ion(reflDi'+'r,\x20gloss),'+'\x20uniform.m'+'aterial_re'+'flectivity'+');\x0a}\x0a'),bD='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_envA'+'tlasSample'+'r:\x20sampler'+';\x0a#endif\x0au'+'niform\x20mat'+'erial_refl'+'ectivity:\x20'+'f32;\x0a\x0a//\x20c'+'alculate\x20m'+'ip\x20level\x20f'+'or\x20shiny\x20r'+'eflection\x20'+'given\x20equi'+'rect\x20coord'+'s\x20uv.\x0afn\x20s'+'hinyMipLev'+'el(uv:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20dx:\x20vec2f'+'\x20=\x20dpdx(uv'+');\x0a\x20\x20\x20\x20let'+'\x20dy:\x20vec2f'+'\x20=\x20dpdy(uv'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20second\x20dF'+'\x20at\x20180\x20de'+'grees\x0a\x20\x20\x20\x20'+'let\x20uv2:\x20v'+'ec2f\x20=\x20vec'+'2f(fract(u'+'v.x\x20+\x200.5)'+',\x20uv.y);\x0a\x20'+'\x20\x20\x20let\x20dx2'+':\x20vec2f\x20=\x20'+'dpdx(uv2);'+'\x0a\x20\x20\x20\x20let\x20d'+'y2:\x20vec2f\x20'+'=\x20dpdy(uv2'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20min\x20of\x20bo'+'th\x20sets\x20of'+'\x20dF\x20to\x20han'+'dle\x20discon'+'tinuity\x20at'+'\x20the\x20azim\x20'+'edge\x0a\x20\x20\x20\x20l'+'et\x20maxd:\x20f'+'32\x20=\x20min(m'+'ax(dot(dx,'+'\x20dx),\x20dot('+'dy,\x20dy)),\x20'+'max(dot(dx'+'2,\x20dx2),\x20d'+'ot(dy2,\x20dy'+'2)));\x0a\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(0.5\x20*\x20'+'log2(maxd)'+'\x20-\x201.0\x20+\x20u'+'niform.tex'+'tureBias,\x20'+'0.0,\x205.0);'+'\x0a}\x0a\x0afn\x20cal'+'cReflectio'+'n(reflDir:'+'\x20vec3f,\x20gl'+'oss:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20d'+'ir:\x20vec3f\x20'+'=\x20cubeMapP'+'roject(ref'+'lDir)\x20*\x20ve'+'c3f(-1.0,\x20'+'1.0,\x201.0);'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20toSpheric'+'alUv(dir);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20r'+'oughness\x20l'+'evel\x0a\x20\x20\x20\x20l'+'et\x20level:\x20'+'f32\x20=\x20satu'+'rate(1.0\x20-'+'\x20gloss)\x20*\x20'+'5.0;\x0a\x20\x20\x20\x20l'+('et\x20ilevel:'+'\x20f32\x20=\x20flo'+'or(level);'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ccessing\x20t'+'he\x20shiny\x20('+'top\x20level)'+'\x20reflectio'+'n\x20-\x20perfor'+'m\x20manual\x20m'+'ipmap\x20look'+'up\x0a\x20\x20\x20\x20let'+'\x20level2:\x20f'+'32\x20=\x20shiny'+'MipLevel(u'+'v\x20*\x20atlasS'+'ize);\x0a\x20\x20\x20\x20'+'let\x20ilevel'+'2:\x20f32\x20=\x20f'+'loor(level'+'2);\x0a\x0a\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20uv1:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20weight:'+'\x20f32;\x0a\x20\x20\x20\x20'+'if\x20(ilevel'+'\x20==\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'1\x20=\x20mapShi'+'nyUv(uv,\x20i'+'level2\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20weight\x20'+'=\x20level2\x20-'+'\x20ilevel2;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20access'+'ing\x20rough\x20'+'reflection'+'\x20-\x20just\x20sa'+'mple\x20the\x20s'+'ame\x20part\x20t'+'wice\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv0\x20=\x20m'+'apRoughnes'+'sUv(uv,\x20il'+'evel);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv1\x20='+'\x20uv0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x200.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20linearA'+':\x20vec3f\x20=\x20'+'{reflectio'+'nDecode}(t'+'extureSamp'+'le(texture'+'_envAtlas,'+'\x20texture_e'+'nvAtlasSam'+'pler,\x20uv0)'+');\x0a\x20\x20\x20\x20let'+'\x20linearB:\x20'+'vec3f\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'tureSample'+'(texture_e'+'nvAtlas,\x20t'+'exture_env'+'AtlasSampl'+'er,\x20uv1));'+'\x0a\x20\x20\x20\x20let\x20l'+'inear0:\x20ve'+'c3f\x20=\x20mix('+'linearA,\x20l'+'inearB,\x20we'+'ight);\x0a\x20\x20\x20'+'\x20let\x20linea'+'r1:\x20vec3f\x20'+'=\x20{reflect'+'ionDecode}'+'(textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r')+('eturn\x20proc'+'essEnviron'+'ment(mix(l'+'inear0,\x20li'+'near1,\x20lev'+'el\x20-\x20ileve'+'l));\x0a}\x0a\x0afn'+'\x20addReflec'+'tion(reflD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20d'+'Reflection'+'\x20=\x20dReflec'+'tion\x20+\x20vec'+'4f(calcRef'+'lection(re'+'flDir,\x20glo'+'ss),\x20unifo'+'rm.materia'+'l_reflecti'+'vity);\x0a}\x0a'),AD='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a#en'+'dif\x0a\x0avar\x20t'+'exture_sph'+'ereMap:\x20te'+'xture_2d<f'+'32>;\x0avar\x20t'+'exture_sph'+'ereMapSamp'+'ler:\x20sampl'+'er;\x0aunifor'+'m\x20material'+'_reflectiv'+'ity:\x20f32;\x0a'+'\x0afn\x20calcRe'+'flection(r'+'eflDir:\x20ve'+'c3f,\x20gloss'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20view'+'RotationMa'+'trix\x20=\x20mat'+'3x3f(unifo'+'rm.matrix_'+'view[0].xy'+'z,\x20uniform'+'.matrix_vi'+'ew[1].xyz,'+'\x20uniform.m'+'atrix_view'+'[2].xyz);\x0a'+'\x20\x20\x20\x20let\x20re'+'flDirV:\x20ve'+'c3f\x20=\x20view'+'RotationMa'+'trix\x20*\x20ref'+'lDir;\x0a\x0a\x20\x20\x20'+'\x20let\x20m:\x20f3'+'2\x20=\x202.0\x20*\x20'+'sqrt(dot(r'+'eflDirV.xy'+',\x20reflDirV'+'.xy)\x20+\x20(re'+'flDirV.z\x20+'+'\x201.0)\x20*\x20(r'+'eflDirV.z\x20'+'+\x201.0));\x0a\x20'+'\x20\x20\x20let\x20sph'+'ereMapUv:\x20'+'vec2f\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_sphere'+'Map,\x20textu'+'re_sphereM'+'apSampler,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0af'+'n\x20addRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20dRefle'+'ction\x20+\x20ve'+'c4f(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20unif'+'orm.materi'+'al_reflect'+'ivity);\x0a}\x0a',CD='\x0a\x0afn\x20addRe'+'flectionSh'+'een(worldN'+'ormal:\x20vec'+'3f,\x20viewDi'+'r:\x20vec3f,\x20'+'gloss:\x20f32'+')\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20dot(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20let\x20al'+'phaG:\x20f32\x20'+'=\x20gloss\x20*\x20'+'gloss;\x0a\x0a\x20\x20'+'\x20\x20//\x20Avoid'+'\x20using\x20a\x20L'+'UT\x20and\x20app'+'roximate\x20t'+'he\x20values\x20'+'analytical'+'ly\x0a\x20\x20\x20\x20let'+'\x20a:\x20f32\x20=\x20'+'select(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20-339.2\x20*'+'\x20alphaG\x20+\x20'+'161.4\x20*\x20gl'+'oss\x20-\x2025.9'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gloss\x20<\x200.'+'25\x0a\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20let\x20b:'+'\x20f32\x20=\x20sel'+'ect(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.97\x20*\x20'+'alphaG\x20-\x203'+'.27\x20*\x20glos'+'s\x20+\x200.72,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x2044'+'.0\x20*\x20alpha'+'G\x20-\x2023.7\x20*'+'\x20gloss\x20+\x203'+'.26,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss\x20<'+'\x200.25\x0a\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20let'+'\x20dg_add:\x20f'+'32\x20=\x20selec'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.1\x20*\x20(\x20g'+'loss\x20-\x200.2'+'5\x20),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x200.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s\x20<\x200.25\x0a\x20'+'\x20\x20\x20);\x0a\x20\x20\x20\x20'+'let\x20dg:\x20f3'+'2\x20=\x20exp(\x20a'+'\x20*\x20NoV\x20+\x20b'+'\x20)\x20+\x20dg_ad'+'d;\x0a\x20\x20\x20\x20sRe'+'flection\x20='+'\x20sReflecti'+'on\x20+\x20(calc'+'Reflection'+'(worldNorm'+'al,\x200.0)\x20*'+'\x20saturate('+'dg));\x0a}',PD='\x0afn\x20refrac'+'t2(viewVec'+':\x20vec3f,\x20n'+'ormal:\x20vec'+'3f,\x20IOR:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20vn:\x20f32'+'\x20=\x20dot(vie'+'wVec,\x20norm'+'al);\x0a\x20\x20\x20\x20l'+'et\x20k:\x20f32\x20'+'=\x201.0\x20-\x20IO'+'R\x20*\x20IOR\x20*\x20'+'(1.0\x20-\x20vn\x20'+'*\x20vn);\x0a\x20\x20\x20'+'\x20let\x20refrV'+'ec:\x20vec3f\x20'+'=\x20IOR\x20*\x20vi'+'ewVec\x20-\x20(I'+'OR\x20*\x20vn\x20+\x20'+'sqrt(k))\x20*'+'\x20normal;\x0a\x20'+'\x20\x20\x20return\x20'+'refrVec;\x0a}'+'\x0a\x0afn\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20vi'+'ewDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20th'+'ickness:\x20f'+'32,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20al'+'bedo:\x20vec3'+'f,\x0a\x20\x20\x20\x20tra'+'nsmission:'+'\x20f32,\x0a\x20\x20\x20\x20'+'refraction'+'Index:\x20f32'+',\x0a\x20\x20\x20\x20disp'+'ersion:\x20f3'+'2\x0a#if\x20defi'+'ned(LIT_IR'+'IDESCENCE)'+'\x0a\x20\x20\x20\x20,\x20iri'+'descenceFr'+'esnel:\x20vec'+'3f,\x0a\x20\x20\x20\x20ir'+'idescenceI'+'ntensity:\x20'+'f32\x0a#endif'+'\x0a)\x20{\x0a\x20\x20\x20\x20/'+'/\x20use\x20same'+'\x20reflectio'+'n\x20code\x20wit'+'h\x20refracti'+'on\x20vector\x0a'+'\x20\x20\x20\x20let\x20tm'+'pRefl:\x20vec'+'4f\x20=\x20dRefl'+'ection;\x0a\x20\x20'+'\x20\x20let\x20refl'+'ectionDir:'+'\x20vec3f\x20=\x20r'+'efract2(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndex);\x0a\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(0.0);\x0a\x20'+'\x20\x20\x20addRefl'+'ection(ref'+'lectionDir'+',\x20gloss);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'mix(dDiffu'+'seLight,\x20d'+'Reflection'+'.rgb\x20*\x20alb'+'edo,\x20trans'+'mission);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20tm'+'pRefl;\x0a}\x0a',MD='\x0auniform\x20m'+'aterial_in'+'vAttenuati'+'onDistance'+':\x20f32;\x0auni'+'form\x20mater'+'ial_attenu'+'ation:\x20vec'+'3f;\x0a\x0afn\x20ev'+'alRefracti'+'onColor(re'+'fractionVe'+'ctor:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20refra'+'ctionIndex'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20The\x20'+'refraction'+'\x20point\x20is\x20'+'the\x20entry\x20'+'point\x20+\x20ve'+'ctor\x20to\x20ex'+'it\x20point\x0a\x20'+'\x20\x20\x20let\x20poi'+'ntOfRefrac'+'tion:\x20vec4'+'f\x20=\x20vec4f('+'vPositionW'+'\x20+\x20refract'+'ionVector,'+'\x201.0);\x0a\x0a\x20\x20'+'\x20\x20//\x20Proje'+'ct\x20to\x20text'+'ure\x20space\x20'+'so\x20we\x20can\x20'+'sample\x20it\x0a'+'\x20\x20\x20\x20let\x20pr'+'ojectionPo'+'int:\x20vec4f'+'\x20=\x20uniform'+'.matrix_vi'+'ewProjecti'+'on\x20*\x20point'+'OfRefracti'+'on;\x0a\x0a\x20\x20\x20\x20/'+'/\x20use\x20buil'+'t-in\x20getGr'+'abScreenPo'+'s\x20function'+'\x20to\x20conver'+'t\x20screen\x20p'+'osition\x20to'+'\x20grab\x20text'+'ure\x20uv\x20coo'+'rds\x0a\x20\x20\x20\x20le'+'t\x20uv:\x20vec2'+'f\x20=\x20getGra'+'bScreenPos'+'(projectio'+'nPoint);\x0a\x0a'+'\x20\x20\x20\x20//\x20Use'+'\x20IOR\x20and\x20r'+'oughness\x20t'+'o\x20select\x20m'+'ip\x0a\x20\x20\x20\x20let'+'\x20iorToRoug'+'hness:\x20f32'+'\x20=\x20(1.0\x20-\x20'+'gloss)\x20*\x20c'+'lamp((1.0\x20'+'/\x20refracti'+'onIndex)\x20*'+'\x202.0\x20-\x202.0'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20let'+'\x20refractio'+'nLod:\x20f32\x20'+'=\x20log2(uni'+'form.uScre'+'enSize.x)\x20'+'*\x20iorToRou'+'ghness;\x0a\x20\x20'+'\x20\x20let\x20refr'+'action:\x20ve'+'c3f\x20=\x20text'+'ureSampleL'+'evel(uScen'+'eColorMap,'+'\x20uSceneCol'+'orMapSampl'+'er,\x20uv,\x20re'+'fractionLo'+'d).rgb;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'refraction'+';\x0a}\x0a\x0afn\x20ad'+'dRefractio'+'n(\x0a\x20\x20\x20\x20wor'+('ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20thickness'+':\x20f32,\x0a\x20\x20\x20'+'\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20albedo:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'transmissi'+'on:\x20f32,\x0a\x20'+'\x20\x20\x20refract'+'ionIndex:\x20'+'f32,\x0a\x20\x20\x20\x20d'+'ispersion:'+'\x20f32,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'iridescenc'+'eIntensity'+':\x20f32\x0a#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20Extra'+'ct\x20scale\x20f'+'rom\x20the\x20mo'+'del\x20transf'+'orm\x0a\x20\x20\x20\x20va'+'r\x20modelSca'+'le:\x20vec3f;'+'\x0a\x20\x20\x20\x20model'+'Scale.x\x20=\x20'+'length(uni'+'form.matri'+'x_model[0]'+'.xyz);\x0a\x20\x20\x20'+'\x20modelScal'+'e.y\x20=\x20leng'+'th(uniform'+'.matrix_mo'+'del[1].xyz'+');\x0a\x20\x20\x20\x20mod'+'elScale.z\x20'+'=\x20length(u'+'niform.mat'+'rix_model['+'2].xyz);\x0a\x0a'+'\x20\x20\x20\x20//\x20Cal'+'culate\x20the'+'\x20refractio'+'n\x20vector,\x20'+'scaled\x20by\x20'+'the\x20thickn'+'ess\x20and\x20sc'+'ale\x20of\x20the'+'\x20object\x0a\x20\x20'+'\x20\x20let\x20scal'+'e:\x20vec3f\x20='+'\x20thickness'+'\x20*\x20modelSc'+'ale;\x0a\x20\x20\x20\x20v'+'ar\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndex))'+'\x20*\x20scale;\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'x);\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20based\x20on'+'\x20the\x20dispe'+'rsion\x20mate'+'rial\x20prope'+'rty,\x20calcu'+'late\x20modif'+'ied\x20refrac'+'tion\x20index'+'\x20values\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20f'+'or\x20R\x20and\x20B'+'\x20channels\x20')+('and\x20evalua'+'te\x20the\x20ref'+'raction\x20co'+'lor\x20for\x20th'+'em.\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Spread:\x20f3'+'2\x20=\x20(1.0\x20/'+'\x20refractio'+'nIndex\x20-\x201'+'.0)\x20*\x200.02'+'5\x20*\x20disper'+'sion;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20r'+'efractionI'+'ndexR:\x20f32'+'\x20=\x20refract'+'ionIndex\x20-'+'\x20halfSprea'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20refractio'+'nVector\x20=\x20'+'normalize('+'refract(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndexR))\x20'+'*\x20scale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ref'+'raction.r\x20'+'=\x20evalRefr'+'actionColo'+'r(refracti'+'onVector,\x20'+'gloss,\x20ref'+'ractionInd'+'exR).r;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20refractio'+'nIndexB:\x20f'+'32\x20=\x20refra'+'ctionIndex'+'\x20+\x20halfSpr'+'ead;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndexB)'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efraction.'+'b\x20=\x20evalRe'+'fractionCo'+'lor(refrac'+'tionVector'+',\x20gloss,\x20r'+'efractionI'+'ndexB).b;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20T'+'ransmittan'+'ce\x20is\x20our\x20'+'final\x20refr'+'action\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20transmitt'+'ance:\x20vec3'+'f;\x0a\x20\x20\x20\x20if\x20'+'(uniform.m'+'aterial_in'+'vAttenuati'+'onDistance'+'\x20!=\x200.0)\x0a\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20att'+'enuation:\x20'+'vec3f\x20=\x20-l'+'og(uniform'+'.material_'+'attenuatio'+'n)\x20*\x20unifo'+'rm.materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans')+('mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20let\x20'+'fresnel:\x20v'+'ec3f\x20=\x20vec'+'3f(1.0)\x20-\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20world'+'Normal),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scenceInte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20mix(dDif'+'fuseLight,'+'\x20refractio'+'n\x20*\x20transm'+'ittance\x20*\x20'+'fresnel,\x20t'+'ransmissio'+'n);\x0a}\x0a'),DD='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0a#ifdef'+'\x20CUBEMAP_S'+'OURCE\x0a\x20\x20\x20\x20'+'var\x20source'+'Cube:\x20text'+'ure_cube<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20sourceC'+'ubeSampler'+'\x20:\x20sampler'+';\x0a#else\x0a\x20\x20'+'\x20\x20var\x20sour'+'ceTex:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sourceTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20//\x20sa'+'mples\x0a\x20\x20\x20\x20'+'var\x20sample'+'sTex:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20samplesTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20samplesT'+'exInverseS'+'ize:\x20vec2f'+';\x0a#endif\x0a\x0a'+'//\x20params:'+'\x0a//\x20x\x20-\x20ta'+'rget\x20cubem'+'ap\x20face\x200.'+'.6\x0a//\x20y\x20-\x20'+'target\x20ima'+'ge\x20total\x20p'+'ixels\x0a//\x20z'+'\x20-\x20source\x20'+'cubemap\x20si'+'ze\x0auniform'+'\x20params:\x20v'+'ec3f;\x0a\x0afn\x20'+'targetFace'+'()\x20->\x20f32\x20'+'{\x20return\x20u'+'niform.par'+'ams.x;\x20}\x0af'+'n\x20targetTo'+'talPixels('+')\x20->\x20f32\x20{'+'\x20return\x20un'+'iform.para'+'ms.y;\x20}\x0afn'+'\x20sourceTot'+'alPixels()'+'\x20->\x20f32\x20{\x20'+'return\x20uni'+'form.param'+'s.z;\x20}\x0a\x0aco'+'nst\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22enc'+'odePS\x22\x0a\x0a//'+'--\x20support'+'ed\x20project'+'ions\x0a\x0afn\x20m'+'odifySeams'+'(dir:\x20vec3'+'f,\x20scale:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20adir\x20='+'\x20abs(dir);'+'\x0a\x20\x20\x20\x20let\x20M'+'\x20=\x20max(max'+'(adir.x,\x20a'+'dir.y),\x20ad'+'ir.z);\x0a\x20\x20\x20'+'\x20return\x20di'+'r\x20/\x20M\x20*\x20ve'+'c3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20select('+('scale,\x201.0'+',\x20adir.x\x20='+'=\x20M),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20select'+'(scale,\x201.'+'0,\x20adir.y\x20'+'==\x20M),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20selec'+'t(scale,\x201'+'.0,\x20adir.z'+'\x20==\x20M)\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0afn\x20'+'toSpherica'+'l(dir:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20l'+'et\x20nonZero'+'XZ\x20=\x20any(d'+'ir.xz\x20!=\x20v'+'ec2f(0.0,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2f(select'+'(0.0,\x20atan'+'2(dir.x,\x20d'+'ir.z),\x20non'+'ZeroXZ),\x20a'+'sin(dir.y)'+');\x0a}\x0a\x0afn\x20f'+'romSpheric'+'al(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20vec3'+'f(cos(uv.y'+')\x20*\x20sin(uv'+'.x),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sin(uv.y)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'s(uv.y)\x20*\x20'+'cos(uv.x))'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Equirect(u'+'v:\x20vec2f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20fromSphe'+'rical((vec'+'2f(uv.x,\x201'+'.0\x20-\x20uv.y)'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20vec2'+'f(PI,\x20PI\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20octahe'+'dral\x20code,'+'\x20based\x20on\x20'+'https://jc'+'gt.org/pub'+'lished/000'+'3/02/01/\x0a/'+'/\x20\x22Survey\x20'+'of\x20Efficie'+'nt\x20Represe'+'ntations\x20f'+'or\x20Indepen'+'dent\x20Unit\x20'+'Vectors\x22\x20b'+'y\x20Cigolle,'+'\x20Donow,\x20Ev'+'angelakos,'+'\x20Mara,\x20McG'+'uire,\x20Meye'+'r\x0a\x0afn\x20sign'+'NotZero(k:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20sele'+'ct(-1.0,\x201'+'.0,\x20k\x20>=\x200'+'.0);\x0a}\x0a\x0afn'+'\x20signNotZe'+'roVec2(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec2f(signN'+'otZero(v.x'+'),\x20signNot'+'Zero(v.y))'+';\x0a}\x0a\x0a//\x20Re'+'turns\x20a\x20un'+'it\x20vector.'+'\x20Argument\x20'+'o\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20pack')+('ed\x20via\x20oct'+'Encode,\x20on'+'\x20the\x20[-1,\x20'+'+1]\x20square'+'\x0afn\x20octDec'+'ode(o:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20v\x20=\x20vec'+'3f(o.x,\x201.'+'0\x20-\x20abs(o.'+'x)\x20-\x20abs(o'+'.y),\x20o.y);'+'\x0a\x20\x20\x20\x20if\x20(v'+'.y\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20temp:\x20'+'vec2f\x20=\x20(1'+'.0\x20-\x20abs(v'+'.zx))\x20*\x20si'+'gnNotZeroV'+'ec2(v.xz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'\x20=\x20vec3f(t'+'emp.x,\x20v.y'+',\x20temp.y);'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20no'+'rmalize(v)'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Octahedral'+'(uv:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20octDec'+'ode(vec2f('+'uv.x,\x201.0\x20'+'-\x20uv.y)\x20*\x20'+'2.0\x20-\x201.0)'+';\x0a}\x0a\x0a//\x20As'+'sumes\x20that'+'\x20v\x20is\x20a\x20un'+'it\x20vector.'+'\x20The\x20resul'+'t\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20on\x20t'+'he\x20[-1,\x20+1'+']\x20square\x0af'+'n\x20octEncod'+'e(v:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20var\x20'+'result\x20=\x20v'+'.xz\x20*\x20(1.0'+'\x20/\x20l1norm)'+';\x0a\x20\x20\x20\x20if\x20('+'v.y\x20<\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'(1.0\x20-\x20abs'+'(result.yx'+'))\x20*\x20signN'+'otZeroVec2'+'(result.xy'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20return\x20'+'result;\x0a}\x0a'+'\x0a/////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'\x0a\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20fn'+'\x20sampleCub'+'emapDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'sourceCube'+',\x20sourceCu'+'beSampler,'+'\x20modifySea'+'ms(dir,\x201.'+'0));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleCubem'+'apSph(sph:')+('\x20vec2f)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20sample'+'CubemapDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leCubemapD'+'irLod(dir:'+'\x20vec3f,\x20mi'+'pLevel:\x20f3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leLevel(so'+'urceCube,\x20'+'sourceCube'+'Sampler,\x20m'+'odifySeams'+'(dir,\x201.0)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleCubemap'+'SphLod(sph'+':\x20vec2f,\x20m'+'ipLevel:\x20f'+'32)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'sampleCube'+'mapDirLod('+'fromSpheri'+'cal(sph),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a#el'+'se\x0a\x0a\x20\x20\x20\x20fn'+'\x20sampleEqu'+'irectSph(s'+'ph:\x20vec2f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv\x20=\x20s'+'ph\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'(sourceTex'+',\x20sourceTe'+'xSampler,\x20'+'vec2f(uv.x'+',\x201.0\x20-\x20uv'+'.y));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20fn\x20'+'sampleEqui'+'rectDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leEquirect'+'Sph(toSphe'+'rical(dir)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleEquirec'+'tSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20uv'+'\x20=\x20sph\x20/\x20v'+'ec2f(PI\x20*\x20'+'2.0,\x20PI)\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleLevel('+'sourceTex,'+'\x20sourceTex'+'Sampler,\x20v'+'ec2f(uv.x,'+'\x201.0\x20-\x20uv.'+'y),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleEquir'+'ectDirLod('+'dir:\x20vec3f'+',\x20mipLevel'+':\x20f32)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleE')+('quirectSph'+'Lod(toSphe'+'rical(dir)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleOctahed'+'ralDir(dir'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20=\x20oct'+'Encode(dir'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'textureSam'+'ple(source'+'Tex,\x20sourc'+'eTexSample'+'r,\x20vec2f(u'+'v.x,\x201.0\x20-'+'\x20uv.y));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20sampleO'+'ctahedralS'+'ph(sph:\x20ve'+'c2f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leOctahedr'+'alDirLod(d'+'ir:\x20vec3f,'+'\x20mipLevel:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'v\x20=\x20octEnc'+'ode(dir)\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'Level(sour'+'ceTex,\x20sou'+'rceTexSamp'+'ler,\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20sampl'+'eOctahedra'+'lSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'Lod(fromSp'+'herical(sp'+'h),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a\x0a'+'fn\x20getDire'+'ctionCubem'+'ap(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20st\x20=\x20uv'+'\x20*\x202.0\x20-\x201'+'.0;\x0a\x20\x20\x20\x20le'+'t\x20face\x20=\x20t'+'argetFace('+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20vec:\x20vec'+'3f;\x0a\x20\x20\x20\x20if'+'\x20(face\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(1,\x20'+'-st.y,\x20-st'+'.x);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3f(-1,\x20-'+'st.y,\x20st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x202.0)')+('\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3f(st.x,\x201'+',\x20st.y);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(face\x20='+'=\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'\x20=\x20vec3f(s'+'t.x,\x20-1,\x20-'+'st.y);\x0a\x20\x20\x20'+'\x20}\x20else\x20if'+'\x20(face\x20==\x20'+'4.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(st.'+'x,\x20-st.y,\x20'+'1);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(-st'+'.x,\x20-st.y,'+'\x20-1);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20normal'+'ize(modify'+'Seams(vec,'+'\x201.0));\x0a}\x0a'+'\x0afn\x20matrix'+'FromVector'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x201.0\x20'+'/\x20(1.0\x20+\x20n'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20-n.'+'x\x20*\x20n.y\x20*\x20'+'a;\x0a\x20\x20\x20\x20let'+'\x20b1\x20=\x20vec3'+'f(1.0\x20-\x20n.'+'x\x20*\x20n.x\x20*\x20'+'a,\x20b,\x20-n.x'+');\x0a\x20\x20\x20\x20let'+'\x20b2\x20=\x20vec3'+'f(b,\x201.0\x20-'+'\x20n.y\x20*\x20n.y'+'\x20*\x20a,\x20-n.y'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mat3x3'+'f(b1,\x20b2,\x20'+'n);\x0a}\x0a\x0afn\x20'+'matrixFrom'+'VectorSlow'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20up\x20=\x20sel'+'ect(vec3f('+'0.0,\x200.0,\x20'+'select(-1.'+'0,\x201.0,\x20n.'+'y\x20>\x200.0)),'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'),\x20abs(n.y'+')\x20>\x200.0000'+'001);\x0a\x20\x20\x20\x20'+'let\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20let'+'\x20y\x20=\x20cross'+'(n,\x20x);\x0a\x20\x20'+'\x20\x20return\x20m'+'at3x3f(x,\x20'+'y,\x20n);\x0a}\x0a\x0a'+'fn\x20reproje'+'ct(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20i'+'f\x20({NUM_SA'+'MPLES}\x20<=\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20sing'+'le\x20sample\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}({'+'DECODE_FUN'+'C}({SOURCE'+'_FUNC}Dir('+'{TARGET_FU'+'NC}(uv))))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mult'+'i\x20sample\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20t\x20=\x20{TARG')+('ET_FUNC}(u'+'v);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20tu\x20='+'\x20dpdx(t);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20tv\x20=\x20dpd'+'y(t);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'u\x20+=\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20for\x20(v'+'ar\x20v\x20=\x200.0'+';\x20v\x20<\x20{NUM'+'_SAMPLES_S'+'QRT};\x20v\x20+='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}Dir(norma'+'lize(t\x20+\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20t'+'u\x20*\x20(u\x20/\x20{'+'NUM_SAMPLE'+'S_SQRT}\x20-\x20'+'0.5)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tv\x20'+'*\x20(v\x20/\x20{NU'+'M_SAMPLES_'+'SQRT}\x20-\x200.'+'5))));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20{ENC'+'ODE_FUNC}('+'result\x20/\x20('+'{NUM_SAMPL'+'ES_SQRT}\x20*'+'\x20{NUM_SAMP'+'LES_SQRT})'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0aconst\x20un'+'packFloat:'+'\x20vec4f\x20=\x20v'+'ec4f(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20fn\x20un'+'packSample'+'(i:\x20i32,\x20L'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20mipLev'+'el:\x20ptr<fu'+'nction,\x20f3'+'2>)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20u\x20'+'=\x20(f32(i\x20*'+'\x204)\x20+\x200.5)'+'\x20*\x20uniform'+'.samplesTe'+'xInverseSi'+'ze.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20v\x20'+'=\x20(floor(u'+')\x20+\x200.5)\x20*'+'\x20uniform.s'+'amplesTexI'+'nverseSize'+'.y;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20raw'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.x\x20=\x20dot(t'+'extureSamp')+('le(samples'+'Tex,\x20sampl'+'esTexSampl'+'er,\x20vec2f('+'u,\x20v)),\x20un'+'packFloat)'+';\x20u\x20+=\x20uni'+'form.sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'textureSam'+'ple(sample'+'sTex,\x20samp'+'lesTexSamp'+'ler,\x20vec2f'+'(u,\x20v)),\x20u'+'npackFloat'+');\x20u\x20+=\x20un'+'iform.samp'+'lesTexInve'+'rseSize.x;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.z\x20=\x20dot'+'(textureSa'+'mple(sampl'+'esTex,\x20sam'+'plesTexSam'+'pler,\x20vec2'+'f(u,\x20v)),\x20'+'unpackFloa'+'t);\x20u\x20+=\x20u'+'niform.sam'+'plesTexInv'+'erseSize.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'raw.w\x20=\x20do'+'t(textureS'+'ample(samp'+'lesTex,\x20sa'+'mplesTexSa'+'mpler,\x20vec'+'2f(u,\x20v)),'+'\x20unpackFlo'+'at);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20*L\x20=\x20r'+'aw.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*m'+'ipLevel\x20=\x20'+'raw.w\x20*\x208.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20con'+'volve\x20an\x20e'+'nvironment'+'\x20given\x20pre'+'-generated'+'\x20samples\x0a\x20'+'\x20\x20\x20fn\x20pref'+'ilterSampl'+'es(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'truct\x20vect'+'or\x20space\x20g'+'iven\x20targe'+'t\x20directio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vecSpa'+'ce\x20=\x20matri'+'xFromVecto'+'rSlow({TAR'+'GET_FUNC}('+'uv));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20L'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20mipLevel:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(var\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20i\x20+=\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unpa'+'ckSample(i'+',\x20&L,\x20&mip'+'Level);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'result\x20+=\x20'+'{DECODE_FU')+('NC}({SOURC'+'E_FUNC}Dir'+'Lod(vecSpa'+'ce\x20*\x20L,\x20mi'+'pLevel))\x20*'+'\x20L.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20to'+'talWeight\x20'+'+=\x20L.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20{ENCOD'+'E_FUNC}(re'+'sult\x20/\x20tot'+'alWeight);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20unwei'+'ghted\x20vers'+'ion\x20of\x20pre'+'filterSamp'+'les\x0a\x20\x20\x20\x20fn'+'\x20prefilter'+'SamplesUnw'+'eighted(uv'+':\x20vec2f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20construct'+'\x20vector\x20sp'+'ace\x20given\x20'+'target\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20v'+'ecSpace\x20=\x20'+'matrixFrom'+'VectorSlow'+'({TARGET_F'+'UNC}(uv));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20L:\x20vec'+'3f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20mipL'+'evel:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20result'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(va'+'r\x20i\x20=\x200;\x20i'+'\x20<\x20{NUM_SA'+'MPLES};\x20i\x20'+'+=\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'unpackSamp'+'le(i,\x20&L,\x20'+'&mipLevel)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}DirLod(ve'+'cSpace\x20*\x20L'+',\x20mipLevel'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'{ENCODE_FU'+'NC}(result'+'\x20/\x20f32({NU'+'M_SAMPLES}'+'));\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20{P'+'ROCESS_FUN'+'C}(input.v'+'Uv0);\x0a\x20\x20\x20\x20'+'return\x20out'+'put;\x0a}\x0a'),ID='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0aunifo'+'rm\x20uvMod:\x20'+'vec4f;\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0a\x0a@'+'vertex\x0afn\x20'+'vertexMain'+'(input:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20var\x20outpu'+'t:\x20VertexO'+'utput;\x0a\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(input.v'+'ertex_posi'+'tion,\x200.5,'+'\x201.0);\x0a\x20\x20o'+'utput.vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(input.ver'+'tex_positi'+'on\x20*\x200.5\x20+'+'\x20vec2f(0.5'+',\x200.5))\x20*\x20'+'uniform.uv'+'Mod.xy\x20+\x20u'+'niform.uvM'+'od.zw);\x0a\x20\x20'+'return\x20out'+'put;\x0a}\x0a',LD='\x0a\x0avar\x20uSce'+'neDepthMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20uSceneD'+'epthMapSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifn'+'def\x20SCREEN'+'SIZE\x0a\x20\x20\x20\x20#'+'define\x20SCR'+'EENSIZE\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fndef\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20#define\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20unifor'+'m\x20matrix_v'+'iew:\x20mat4x'+'4f;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20CAM'+'ERAPLANES\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20CAME'+'RAPLANES\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20camer'+'a_params:\x20'+'vec4f;\x20//\x20'+'x:\x201\x20/\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20\x20y:\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20z:\x20came'+'ra_near,\x20\x20'+'\x20\x20\x20\x20\x20\x20w:\x20i'+'s_ortho\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20fn\x20lin'+'earizeDept'+'h(z:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uniform.c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x20//\x20Pe'+'rspective\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20('+'uniform.ca'+'mera_param'+'s.z\x20*\x20unif'+'orm.camera'+'_params.y)'+'\x20/\x20(unifor'+'m.camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.z\x20-'+'\x20uniform.c'+'amera_para'+'ms.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20unifor'+'m.camera_p'+'arams.z\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'+'\x0afn\x20deline'+'arizeDepth'+'(linearDep'+'th:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.camera'+'_params.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(unif'+'orm.camera'+('_params.y\x20'+'*\x20(uniform'+'.camera_pa'+'rams.z\x20-\x20l'+'inearDepth'+'))\x20/\x20(line'+'arDepth\x20*\x20'+'(uniform.c'+'amera_para'+'ms.z\x20-\x20uni'+'form.camer'+'a_params.y'+'));\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20(linearD'+'epth\x20-\x20uni'+'form.camer'+'a_params.z'+')\x20/\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20}\x0a}\x0a\x0a//\x20R'+'etrieves\x20r'+'endered\x20li'+'near\x20camer'+'a\x20depth\x20by'+'\x20UV\x0afn\x20get'+'LinearScre'+'enDepth(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_LINEAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SCEN'+'E_DEPTHMAP'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'uSceneDept'+'hMap,\x20uSce'+'neDepthMap'+'Sampler,\x20u'+'v).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20tex'+'tureSize\x20='+'\x20textureDi'+'mensions(u'+'SceneDepth'+'Map,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20texel'+':\x20vec2i\x20=\x20'+'vec2i(uv\x20*'+'\x20vec2f(tex'+'tureSize))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta:\x20vec4f\x20'+'=\x20textureL'+'oad(uScene'+'DepthMap,\x20'+'texel,\x200);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta_u32:\x20ve'+'c4u\x20=\x20vec4'+'u(data\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20intBits'+':\x20u32\x20=\x20(d'+'ata_u32.r\x20'+'<<\x2024u)\x20|\x20'+'(data_u32.'+'g\x20<<\x2016u)\x20'+'|\x20(data_u3'+'2.b\x20<<\x208u)'+'\x20|\x20data_u3'+'2.a;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20bitca'+'st<f32>(in'+'tBits);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pth(textur'+'eSample(uS'+'ceneDepthM')+('ap,\x20uScene'+'DepthMapSa'+'mpler,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20fn\x20get'+'LinearScre'+'enDepthFra'+'g()\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20pcP'+'osition.xy'+'\x20*\x20uniform'+'.uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afn\x20get'+'LinearDept'+'h(pos:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20-(unif'+'orm.matrix'+'_view\x20*\x20ve'+'c4f(pos,\x201'+'.0)).z;\x0a}\x0a'),RD='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x0afn'+'\x20getShadow'+'CascadeInd'+'ex(shadowC'+'ascadeDist'+'ances:\x20vec'+'4f,\x20shadow'+'CascadeCou'+'nt:\x20i32)\x20-'+'>\x20i32\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20dept'+'h\x20in\x200\x20..\x20'+'far\x20plane\x20'+'range\x0a\x20\x20\x20\x20'+'let\x20depth:'+'\x20f32\x20=\x201.0'+'\x20/\x20pcPosit'+'ion.w;\x0a\x0a\x20\x20'+'\x20\x20//\x201.0\x20i'+'f\x20depth\x20>='+'\x20distance,'+'\x200.0\x20other'+'wise\x0a\x20\x20\x20\x20l'+'et\x20compari'+'sons:\x20vec4'+'f\x20=\x20step(s'+'hadowCasca'+'deDistance'+'s,\x20vec4f(d'+'epth));\x0a\x0a\x20'+'\x20\x20\x20//\x20sum\x20'+'is\x20the\x20ind'+'ex\x0a\x20\x20\x20\x20let'+'\x20cascadeIn'+'dex:\x20i32\x20='+'\x20i32(dot(c'+'omparisons'+',\x20vec4f(1.'+'0)));\x0a\x0a\x20\x20\x20'+'\x20//\x20limit\x20'+'to\x20actual\x20'+'number\x20of\x20'+'used\x20casca'+'des\x0a\x20\x20\x20\x20re'+'turn\x20min(c'+'ascadeInde'+'x,\x20shadowC'+'ascadeCoun'+'t\x20-\x201);\x0a}\x0a'+'\x0a//\x20functi'+'on\x20which\x20m'+'odifies\x20ca'+'scade\x20inde'+'x\x20to\x20dithe'+'r\x20between\x20'+'cascades\x0af'+'n\x20ditherSh'+'adowCascad'+'eIndex(cas'+'cadeIndex_'+'in:\x20i32,\x20s'+'hadowCasca'+'deDistance'+'s:\x20vec4f,\x20'+'shadowCasc'+'adeCount:\x20'+'i32,\x20blend'+'Factor:\x20f3'+'2)\x20->\x20i32\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Use\x20var\x20as'+'\x20cascadeIn'+'dex\x20might\x20'+'be\x20modifie'+'d\x0a\x20\x20\x20\x20var\x20'+'cascadeInd'+'ex:\x20i32\x20=\x20'+'cascadeInd'+'ex_in;\x0a\x20\x20\x20'+'\x20if\x20(casca'+'deIndex\x20<\x20'+'shadowCasc'+'adeCount\x20-'+'\x201)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20cu'+'rrentRange'+'End:\x20f32\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+('\x20transitio'+'nStart:\x20f3'+'2\x20=\x20blendF'+'actor\x20*\x20cu'+'rrentRange'+'End;\x20//\x20St'+'art\x20overla'+'p\x20factor\x20a'+'way\x20from\x20t'+'he\x20end\x20dis'+'tance\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(depth\x20'+'>\x20transiti'+'onStart)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20a\x20tr'+'ansition\x20f'+'actor\x20(0.0'+'\x20to\x201.0)\x20w'+'ithin\x20the\x20'+'overlap\x20ra'+'nge\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'transition'+'Factor:\x20f3'+'2\x20=\x20smooth'+'step(trans'+'itionStart'+',\x20currentR'+'angeEnd,\x20d'+'epth);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Add\x20pse'+'udo-random'+'\x20dithering'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20TODO'+':\x20replace\x20'+'by\x20user\x20se'+'lectable\x20d'+'ithering\x20m'+'ethod\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20dither:\x20'+'f32\x20=\x20frac'+'t(sin(dot('+'pcPosition'+'.xy,\x20vec2f'+'(12.9898,\x20'+'78.233)))\x20'+'*\x2043758.54'+'53);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dither\x20<\x20'+'transition'+'Factor)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20casc'+'adeIndex\x20='+'\x20cascadeIn'+'dex\x20+\x201;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20cascadeIn'+'dex;\x0a}\x0a\x0afn'+'\x20fadeShado'+'w(shadowCo'+'ord_in:\x20ve'+'c3f,\x20shado'+'wCascadeDi'+'stances:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20//\x20if\x20the'+'\x20pixel\x20is\x20'+'past\x20the\x20s'+'hadow\x20dist'+'ance,\x20remo'+'ve\x20shadow\x0a'+'\x20\x20\x20\x20//\x20thi'+'s\x20enforces'+'\x20straight\x20'+'line\x20inste'+'ad\x20of\x20corn'+'er\x20of\x20shad'+'ow\x20which\x20m'+'oves\x20when\x20'+'camera\x20rot'+'ates\x0a\x20\x20\x20\x20v'+'ar\x20shadowC'+'oord:\x20vec3'+'f\x20=\x20shadow')+('Coord_in;\x0a'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x20\x20\x20\x20if\x20(d'+'epth\x20>\x20sha'+'dowCascade'+'Distances.'+'w)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20shadowC'+'oord.z\x20=\x20-'+'9999999.0;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'hadowCoord'+';\x0a}\x0a'),OD='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afn\x20linste'+'p(a:\x20f32,\x20'+'b:\x20f32,\x20v:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20/'+'/\x20WGSL\x20sat'+'urate\x20->\x20c'+'lamp\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p((v\x20-\x20a)\x20'+'/\x20(b\x20-\x20a),'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0afn\x20re'+'duceLightB'+'leeding(pM'+'ax:\x20f32,\x20a'+'mount:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'fn\x20chebysh'+'evUpperBou'+'nd(moments'+':\x20vec2f,\x20m'+'ean:\x20f32,\x20'+'minVarianc'+'e:\x20f32,\x20li'+'ghtBleedin'+'gReduction'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'//\x20Compute'+'\x20variance\x0a'+'\x20\x20\x20\x20var\x20va'+'riance:\x20f3'+'2\x20=\x20moment'+'s.y\x20-\x20(mom'+'ents.x\x20*\x20m'+'oments.x);'+'\x0a\x20\x20\x20\x20varia'+'nce\x20=\x20max('+'variance,\x20'+'minVarianc'+'e);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Compute\x20'+'probabilis'+'tic\x20upper\x20'+'bound\x0a\x20\x20\x20\x20'+'let\x20d:\x20f32'+'\x20=\x20mean\x20-\x20'+'moments.x;'+'\x0a\x20\x20\x20\x20var\x20p'+'Max:\x20f32\x20='+'\x20variance\x20'+'/\x20(varianc'+'e\x20+\x20(d\x20*\x20d'+'));\x0a\x0a\x20\x20\x20\x20p'+'Max\x20=\x20redu'+'ceLightBle'+'eding(pMax'+',\x20lightBle'+'edingReduc'+'tion);\x0a\x0a\x20\x20'+'\x20\x20//\x20One-t'+'ailed\x20Cheb'+'yshev\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(pMax,\x20'+'1.0,\x20mean\x20'+'<=\x20moments'+'.x);\x0a}\x0a\x0afn'+'\x20calculate'+'EVSM(momen'+'ts_in:\x20vec'+'3f,\x20Z_in:\x20'+'f32,\x20vsmBi'+'as:\x20f32,\x20e'+'xponent:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20Z:\x20f32\x20=\x20'+'2.0\x20*\x20Z_in'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20let\x20warp'+'edDepth:\x20f'+'32\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20l'+('et\x20moments'+':\x20vec2f\x20=\x20'+'moments_in'+'.xy\x20+\x20vec2'+'f(warpedDe'+'pth,\x20warpe'+'dDepth*war'+'pedDepth)\x20'+'*\x20(1.0\x20-\x20m'+'oments_in.'+'z);\x0a\x0a\x20\x20\x20\x20l'+'et\x20VSMBias'+':\x20f32\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20let\x20d'+'epthScale:'+'\x20f32\x20=\x20VSM'+'Bias\x20*\x20exp'+'onent\x20*\x20wa'+'rpedDepth;'+'\x0a\x20\x20\x20\x20let\x20m'+'inVariance'+'1:\x20f32\x20=\x20d'+'epthScale\x20'+'*\x20depthSca'+'le;\x0a\x20\x20\x20\x20re'+'turn\x20cheby'+'shevUpperB'+'ound(momen'+'ts,\x20warped'+'Depth,\x20min'+'Variance1,'+'\x200.1);\x0a}\x0a/'+'/\x20------\x20V'+'SM\x2016\x20----'+'--\x0a\x0afn\x20VSM'+'16(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords:\x20vec'+'2f,\x20resolu'+'tion:\x20f32,'+'\x20Z:\x20f32,\x20v'+'smBias:\x20f3'+'2,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20let\x20momen'+'ts:\x20vec3f\x20'+'=\x20textureS'+'ampleLevel'+'(tex,\x20texS'+'ampler,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'n\x20getShado'+'wVSM16(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20VS'+'M16(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord.xy,\x20s'+'hadowParam'+'s.x,\x20shado'+'wCoord.z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotVSM1'+'6(shadowMa'+'p:\x20texture'+'_2d<f32>,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler,\x20sha'+'dowCoord:\x20'+'vec3f,\x20sha')+('dowParams:'+'\x20vec4f,\x20ex'+'ponent:\x20f3'+'2,\x20lightDi'+'r:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20Z:\x20'+'f32\x20=\x20leng'+'th(lightDi'+'r)\x20*\x20shado'+'wParams.w\x20'+'+\x20shadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20return\x20V'+'SM16(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20Z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----'+'--\x0a\x0afn\x20VSM'+'32(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords_in:\x20'+'vec2f,\x20res'+'olution:\x20f'+'32,\x20Z:\x20f32'+',\x20vsmBias:'+'\x20f32,\x20expo'+'nent:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20CAPS_TEX'+'TURE_FLOAT'+'_FILTERABL'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20moment'+'s:\x20vec3f\x20='+'\x20textureSa'+'mpleLevel('+'tex,\x20texSa'+'mpler,\x20tex'+'Coords_in,'+'\x200.0).xyz;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20manual\x20b'+'ilinear\x20fi'+'ltering\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'pixelSize\x20'+':\x20f32\x20=\x201.'+'0\x20/\x20resolu'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20te'+'xCoords:\x20v'+'ec2f\x20=\x20tex'+'Coords_in\x20'+'-\x20vec2f(pi'+'xelSize);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20s00:\x20vec'+'3f\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20texCoords'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20s10:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20texCoor'+'ds\x20+\x20vec2f'+'(pixelSize'+',\x200.0),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'s01:\x20vec3f'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'exCoords\x20+'+'\x20vec2f(0.0'+',\x20pixelSiz'+'e),\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s11:')+('\x20vec3f\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20texCo'+'ords\x20+\x20vec'+'2f(pixelSi'+'ze),\x200.0).'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fr:'+'\x20vec2f\x20=\x20f'+'ract(texCo'+'ords\x20*\x20res'+'olution);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20h0:\x20vec3'+'f\x20=\x20mix(s0'+'0,\x20s10,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20h1:'+'\x20vec3f\x20=\x20m'+'ix(s01,\x20s1'+'1,\x20fr.x);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20moments:'+'\x20vec3f\x20=\x20m'+'ix(h0,\x20h1,'+'\x20fr.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20calculate'+'EVSM(momen'+'ts,\x20Z,\x20vsm'+'Bias,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owVSM32(sh'+'adowMap:\x20t'+'exture_2d<'+'f32>,\x20shad'+'owMapSampl'+'er:\x20sample'+'r,\x20shadowC'+'oord:\x20vec3'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20expone'+'nt:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20V'+'SM32(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afn\x20getSha'+'dowSpotVSM'+'32(shadowM'+'ap:\x20textur'+'e_2d<f32>,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20e'+'xponent:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20Z:'+'\x20f32\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20Z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a'),FD='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afn\x20getS'+'hadowPCF1x'+'1(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowCoo'+'rd.z);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotPCF1'+'x1(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20shad'+'owCoord.xy'+',\x20shadowCo'+'ord.z);\x0a}\x0a'+'\x0a//\x20-----\x20'+'Omni\x20Sampl'+'ing\x20-----\x0a'+'\x0a//\x20Not\x20su'+'pported\x20on'+'\x20WebGPU\x20de'+'vice\x0a//\x20fn'+'\x20getShadow'+'OmniPCF1x1'+'(shadowMap'+':\x20texture_'+'depth_cube'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f,'+'\x20lightDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a//\x20'+'\x20\x20\x20\x20let\x20sh'+'adowZ:\x20f32'+'\x20=\x20length('+'lightDir)\x20'+'*\x20shadowPa'+'rams.w\x20+\x20s'+'hadowParam'+'s.z;\x0a//\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20lightD'+'ir,\x20shadow'+'Z);\x0a//\x20}\x0a',ND='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0afn\x20_getS'+'hadowPCF3x'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20sum:\x20f3'+'2\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20let\x20uw'+'0:\x20f32\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20s);\x0a\x20\x20\x20\x20'+'let\x20uw1:\x20f'+'32\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20s)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20u0_offset'+':\x20f32\x20=\x20(2'+'.0\x20-\x20s)\x20/\x20'+'uw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20let\x20u'+'1_offset:\x20'+'f32\x20=\x20s\x20/\x20'+'uw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'vw0:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t);\x0a\x20\x20'+'\x20\x20let\x20vw1:'+'\x20f32\x20=\x20(1.'+'0\x20+\x202.0\x20*\x20'+'t);\x0a\x0a\x20\x20\x20\x20l'+'et\x20v0_offs'+'et:\x20f32\x20=\x20'+'(2.0\x20-\x20t)\x20'+'/\x20vw0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20let'+'\x20v1_offset'+':\x20f32\x20=\x20t\x20'+'/\x20vw1\x20+\x201.'+'0;\x0a\x0a\x20\x20\x20\x20le'+'t\x20u0:\x20f32\x20'+'=\x20u0_offse'+'t\x20*\x20shadow'+'MapSizeInv'+'\x20+\x20base_uv'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20v0:\x20f32\x20'+'=\x20v0_offse'+'t\x20*\x20shadow'+('MapSizeInv'+'\x20+\x20base_uv'+'.y;\x0a\x0a\x20\x20\x20\x20l'+'et\x20u1:\x20f32'+'\x20=\x20u1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20l'+'et\x20v1:\x20f32'+'\x20=\x20v1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'sum\x20=\x20sum\x20'+'+\x20uw0\x20*\x20vw'+'0\x20*\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20v'+'ec2f(u0,\x20v'+'0),\x20z);\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw1\x20*\x20'+'vw0\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u1,'+'\x20v0),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw0\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'0,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'1\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u1,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20*'+'\x20(1.0\x20/\x2016'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20sum;'+'\x0a}\x0a\x0afn\x20get'+'ShadowPCF3'+'x3(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wPCF3x3(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0afn\x20getSh'+'adowSpotPC'+'F3x3(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3(')+('shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams.xyz);'+'\x0a}\x0a\x0a//\x20---'+'--\x20Omni\x20Sa'+'mpling\x20---'+'--\x0a\x0a//\x20Not'+'\x20currently'+'\x20supported'+'\x20on\x20WebGPU'+'\x20device\x0a//'+'\x20fn\x20getSha'+'dowOmniPCF'+'3x3(shadow'+'Map:\x20textu'+'re_depth_c'+'ube,\x20shado'+'wMapSample'+'r:\x20sampler'+'_compariso'+'n,\x20shadowP'+'arams:\x20vec'+'4f,\x20dir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a//\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a//\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(dir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x0a//'+'\x20\x20\x20\x20\x20//\x20of'+'fset\x0a//\x20\x20\x20'+'\x20\x20let\x20texS'+'ize_i\x20=\x20te'+'xtureDimen'+'sions(shad'+'owMap,\x200);'+'\x0a//\x20\x20\x20\x20\x20le'+'t\x20z:\x20f32\x20='+'\x201.0\x20/\x20f32'+'(texSize_i'+'.x);\x0a//\x20\x20\x20'+'\x20\x20let\x20tc:\x20'+'vec3f\x20=\x20no'+'rmalize(di'+'r);\x0a\x0a//\x20\x20\x20'+'\x20\x20//\x20avera'+'ge\x204\x20sampl'+'es\x20-\x20not\x20a'+'\x20strict\x203x'+'3\x20PCF\x20but\x20'+'that\x27s\x20tri'+'cky\x20with\x20c'+'ubemaps\x0a//'+'\x20\x20\x20\x20\x20var\x20s'+'hadows:\x20ve'+'c4f;\x0a//\x20\x20\x20'+'\x20\x20shadows.'+'x\x20=\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20t'+'c\x20+\x20vec3f('+'\x20z,\x20\x20z,\x20\x20z'+'),\x20shadowZ'+');\x0a//\x20\x20\x20\x20\x20'+'shadows.y\x20'+'=\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20tc\x20'+'+\x20vec3f(-z'+',\x20-z,\x20\x20z),'+'\x20shadowZ);'+'\x0a//\x20\x20\x20\x20\x20sh'+'adows.z\x20=\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20tc\x20+\x20'+'vec3f(-z,\x20'+'\x20z,\x20-z),\x20s'+'hadowZ);\x0a/')+('/\x20\x20\x20\x20\x20shad'+'ows.w\x20=\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20tc\x20+\x20ve'+'c3f(\x20z,\x20-z'+',\x20-z),\x20sha'+'dowZ);\x0a\x0a//'+'\x20\x20\x20\x20\x20retur'+'n\x20dot(shad'+'ows,\x20vec4f'+'(0.25));\x0a/'+'/\x20}\x0a\x0a//\x20fn'+'\x20getShadow'+'OmniPCF3x3'+'_Wrapper(s'+'hadowMap:\x20'+'texture_de'+'pth_cube,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a//\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCF3x3(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowParams'+',\x20lightDir'+');\x0a//\x20}\x0a'),kD='\x0a//\x20http:/'+'/the-witne'+'ss.net/new'+'s/2013/09/'+'shadow-map'+'ping-summa'+'ry-part-1/'+'\x0afn\x20_getSh'+'adowPCF5x5'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20l'+'et\x20uw0:\x20f3'+'2\x20=\x20(4.0\x20-'+'\x203.0\x20*\x20s);'+'\x0a\x20\x20\x20\x20let\x20u'+'w1:\x20f32\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20l'+'et\x20uw2:\x20f3'+'2\x20=\x20(1.0\x20+'+'\x203.0\x20*\x20s);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'u0_offset:'+'\x20f32\x20=\x20(3.'+'0\x20-\x202.0\x20*\x20'+'s)\x20/\x20uw0\x20-'+'\x202.0;\x0a\x20\x20\x20\x20'+'let\x20u1_off'+'set:\x20f32\x20='+'\x20(3.0\x20+\x20s)'+'\x20/\x20uw1;\x0a\x20\x20'+'\x20\x20let\x20u2_o'+'ffset:\x20f32'+'\x20=\x20s\x20/\x20uw2'+'\x20+\x202.0;\x0a\x0a\x20'+'\x20\x20\x20let\x20vw0'+':\x20f32\x20=\x20(4'+'.0\x20-\x203.0\x20*'+'\x20t);\x0a\x20\x20\x20\x20l'+'et\x20vw1:\x20f3'+'2\x20=\x207.0;\x0a\x20'+'\x20\x20\x20let\x20vw2'+':\x20f32\x20=\x20(1'+'.0\x20+\x203.0\x20*'+'\x20t);\x0a\x0a\x20\x20\x20\x20'+'let\x20v0_off'+'set:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t)\x20/\x20v'+'w0\x20-\x202.0;\x0a'+'\x20\x20\x20\x20let\x20v1'+'_offset:\x20f'+'32\x20=\x20(3.0\x20'+('+\x20t)\x20/\x20vw1'+';\x0a\x20\x20\x20\x20let\x20'+'v2_offset:'+'\x20f32\x20=\x20t\x20/'+'\x20vw2\x20+\x202.0'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20sum:\x20f32\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20let\x20u0:\x20'+'f32\x20=\x20u0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.x;\x0a\x20\x20'+'\x20\x20let\x20v0:\x20'+'f32\x20=\x20v0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20u1:'+'\x20f32\x20=\x20u1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.x;\x0a\x20'+'\x20\x20\x20let\x20v1:'+'\x20f32\x20=\x20v1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20let\x20u2'+':\x20f32\x20=\x20u2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.x;\x0a'+'\x20\x20\x20\x20let\x20v2'+':\x20f32\x20=\x20v2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20sum\x20='+'\x20sum\x20+\x20uw0'+'\x20*\x20vw0\x20*\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20vec2f('+'u0,\x20v0),\x20z'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20sum\x20+\x20u'+'w1\x20*\x20vw0\x20*'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20vec2'+'f(u1,\x20v0),'+'\x20z);\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw2\x20*\x20vw0'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u2,\x20v0'+'),\x20z);\x0a\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw0\x20*\x20'+'vw1\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u0,'+'\x20v1),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'1,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'2\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare')+('Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u2,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw0\x20*\x20vw2'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u0,\x20v2'+'),\x20z);\x0a\x20\x20\x20'+'\x20sum\x20=\x20sum'+'\x20+\x20uw1\x20*\x20v'+'w2\x20*\x20textu'+'reSampleCo'+'mpareLevel'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'vec2f(u1,\x20'+'v2),\x20z);\x0a\x20'+'\x20\x20\x20sum\x20=\x20s'+'um\x20+\x20uw2\x20*'+'\x20vw2\x20*\x20tex'+'tureSample'+'CompareLev'+'el(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20vec2f(u2'+',\x20v2),\x20z);'+'\x0a\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20*\x20(1'+'.0\x20/\x20144.0'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20saturat'+'e(sum);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afn'+'\x20getShadow'+'PCF5x5(sha'+'dowMap:\x20te'+'xture_dept'+'h_2d,\x20shad'+'owMapSampl'+'er:\x20sample'+'r_comparis'+'on,\x20shadow'+'Coord:\x20vec'+'3f,\x20shadow'+'Params:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20_getS'+'hadowPCF5x'+'5(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params.xyz'+');\x0a}\x0a\x0afn\x20g'+'etShadowSp'+'otPCF5x5(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owCoord:\x20v'+'ec3f,\x20shad'+'owParams:\x20'+'vec4f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20_ge'+'tShadowPCF'+'5x5(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a'),UD='\x0a\x0afn\x20fract'+'SinRand(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20PI:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20a:\x20f32\x20'+'=\x2012.9898;'+'\x20let\x20b:\x20f3'+'2\x20=\x2078.233'+';\x20let\x20c:\x20f'+'32\x20=\x2043758'+'.5453;\x0a\x20\x20\x20'+'\x20let\x20dt:\x20f'+'32\x20=\x20dot(u'+'v.xy,\x20vec2'+'f(a,\x20b));\x0a'+'\x20\x20\x20\x20let\x20sn'+':\x20f32\x20=\x20dt'+'\x20%\x20PI;\x0a\x20\x20\x20'+'\x20return\x20fr'+'act(sin(sn'+')\x20*\x20c);\x0a}\x0a'+'\x0a//\x20struct'+'\x20to\x20hold\x20p'+'recomputed'+'\x20constants'+'\x20and\x20curre'+'nt\x20state\x0as'+'truct\x20Voge'+'lDiskData\x20'+'{\x0a\x20\x20\x20\x20invN'+'umSamples:'+'\x20f32,\x0a\x20\x20\x20\x20'+'initialAng'+'le:\x20f32,\x0a\x20'+'\x20\x20\x20current'+'PointId:\x20f'+'32,\x0a}\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'fn\x20prepare'+'DiskConsta'+'nts(data:\x20'+'ptr<functi'+'on,\x20VogelD'+'iskData>,\x20'+'sampleCoun'+'t:\x20i32,\x20ra'+'ndomSeed:\x20'+'f32)\x20{\x0a\x20\x20\x20'+'\x20let\x20pi2:\x20'+'f32\x20=\x206.28'+'318530718;'+'\x0a\x20\x20\x20\x20data.'+'invNumSamp'+'les\x20=\x201.0\x20'+'/\x20f32(samp'+'leCount);\x0a'+'\x20\x20\x20\x20data.i'+'nitialAngl'+'e\x20=\x20random'+'Seed\x20*\x20pi2'+';\x0a\x20\x20\x20\x20data'+'.currentPo'+'intId\x20=\x200.'+'0;\x0a}\x0a\x0a\x0afn\x20'+'generateDi'+'skSample(d'+'ata:\x20ptr<f'+'unction,\x20V'+'ogelDiskDa'+'ta>)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20GOLDEN'+'_ANGLE:\x20f3'+'2\x20=\x202.3999'+'63;\x0a\x20\x20\x20\x20le'+'t\x20r:\x20f32\x20='+'\x20sqrt((dat'+'a.currentP'+'ointId\x20+\x200'+'.5)\x20*\x20data'+'.invNumSam'+'ples);\x0a\x20\x20\x20'+'\x20let\x20theta'+':\x20f32\x20=\x20da'+'ta.current'+'PointId\x20*\x20'+'GOLDEN_ANG'+'LE\x20+\x20data.'+'initialAng'+('le;\x0a\x0a\x20\x20\x20\x20l'+'et\x20offset:'+'\x20vec2f\x20=\x20v'+'ec2f(cos(t'+'heta),\x20sin'+'(theta))\x20*'+'\x20pow(r,\x201.'+'33);\x0a\x0a\x20\x20\x20\x20'+'data.curre'+'ntPointId\x20'+'=\x20data.cur'+'rentPointI'+'d\x20+\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'offset;\x0a}\x0a'+'\x0afn\x20PCSSFi'+'ndBlocker('+'shadowMap:'+'\x20texture_2'+'d<f32>,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler,\x20avgBl'+'ockerDepth'+':\x20ptr<func'+'tion,\x20f32>'+',\x20numBlock'+'ers:\x20ptr<f'+'unction,\x20i'+'32>,\x0a\x20\x20\x20\x20s'+'hadowCoord'+'s:\x20vec2f,\x20'+'z:\x20f32,\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32,\x20penum'+'braSize:\x20f'+'32,\x20invSha'+'dowMapSize'+':\x20f32,\x20ran'+'domSeed:\x20f'+'32)\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20diskD'+'ata:\x20Vogel'+'DiskData;\x0a'+'\x20\x20\x20\x20prepar'+'eDiskConst'+'ants(&disk'+'Data,\x20shad'+'owBlockerS'+'amples,\x20ra'+'ndomSeed);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'searchWidt'+'h:\x20f32\x20=\x20p'+'enumbraSiz'+'e\x20*\x20invSha'+'dowMapSize'+';\x0a\x20\x20\x20\x20var\x20'+'blockerSum'+':\x20f32\x20=\x200.'+'0;\x0a\x20\x20\x20\x20var'+'\x20numBlocke'+'rs_local:\x20'+'i32\x20=\x200;\x0a\x0a'+'\x20\x20\x20\x20for(\x20v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20s'+'hadowBlock'+'erSamples;'+'\x20i\x20=\x20i\x20+\x201'+'\x20)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20dis'+'kUV:\x20vec2f'+'\x20=\x20generat'+'eDiskSampl'+'e(&diskDat'+'a);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20samp'+'leUV:\x20vec2'+'f\x20=\x20shadow'+'Coords\x20+\x20d'+'iskUV\x20*\x20se'+'archWidth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadowM'+'apDepth:\x20f'+'32\x20=\x20textu'+'reSampleLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20sampleU'+'V,\x200.0).r;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(\x20shadow'+'MapDepth\x20<'+'\x20z\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20b'+'lockerSum\x20')+('=\x20blockerS'+'um\x20+\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers_local'+'\x20=\x20numBloc'+'kers_local'+'\x20+\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20*avg'+'BlockerDep'+'th\x20=\x20block'+'erSum\x20/\x20f3'+'2(numBlock'+'ers_local)'+';\x0a\x20\x20\x20\x20*num'+'Blockers\x20='+'\x20numBlocke'+'rs_local;\x0a'+'}\x0a\x0afn\x20PCSS'+'Filter(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20uv:\x20vec2'+'f,\x20receive'+'rDepth:\x20f3'+'2,\x20shadowS'+'amples:\x20i3'+'2,\x20filterR'+'adius:\x20f32'+',\x20randomSe'+'ed:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20var\x20dis'+'kData:\x20Vog'+'elDiskData'+';\x0a\x20\x20\x20\x20prep'+'areDiskCon'+'stants(&di'+'skData,\x20sh'+'adowSample'+'s,\x20randomS'+'eed);\x0a\x0a\x20\x20\x20'+'\x20var\x20sum:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20for\x20('+'var\x20i:\x20i32'+'\x20=\x200;\x20i\x20<\x20'+'shadowSamp'+'les;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'offsetUV:\x20'+'vec2f\x20=\x20ge'+'nerateDisk'+'Sample(&di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dept'+'h:\x20f32\x20=\x20t'+'extureSamp'+'leLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv\x20'+'+\x20offsetUV'+',\x200.0).r;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20su'+'m\x20=\x20sum\x20+\x20'+'step(recei'+'verDepth,\x20'+'depth);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20sum\x20/'+'\x20f32(shado'+'wSamples);'+'\x0a}\x0a\x0afn\x20get'+'Penumbra(d'+'blocker:\x20f'+'32,\x20drecei'+'ver:\x20f32,\x20'+'penumbraSi'+'ze:\x20f32,\x20p'+'enumbraFal'+'loff:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20di'+'st:\x20f32\x20=\x20'+'dreceiver\x20'+'-\x20dblocker'+';\x0a\x20\x20\x20\x20let\x20'+'penumbra:\x20'+'f32\x20=\x201.0\x20'+'-\x20pow(1.0\x20'+'-\x20dist,\x20pe')+('numbraFall'+'off);\x0a\x20\x20\x20\x20'+'return\x20pen'+'umbra\x20*\x20pe'+'numbraSize'+';\x0a}\x0a\x0afn\x20PC'+'SSDirectio'+'nal(shadow'+'Map:\x20textu'+'re_2d<f32>'+',\x20shadowMa'+'pSampler:\x20'+'sampler,\x20s'+'hadowCoord'+'s:\x20vec3f,\x20'+'cameraPara'+'ms:\x20vec4f,'+'\x20softShado'+'wParams:\x20v'+'ec4f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'let\x20receiv'+'erDepth:\x20f'+'32\x20=\x20shado'+'wCoords.z;'+'\x0a\x20\x20\x20\x20let\x20r'+'andomSeed:'+'\x20f32\x20=\x20fra'+'ctSinRand('+'pcPosition'+'.xy);\x0a\x20\x20\x20\x20'+'let\x20shadow'+'Samples:\x20i'+'32\x20=\x20i32(s'+'oftShadowP'+'arams.x);\x0a'+'\x20\x20\x20\x20let\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32\x20=\x20i32('+'softShadow'+'Params.y);'+'\x0a\x20\x20\x20\x20let\x20p'+'enumbraSiz'+'e:\x20f32\x20=\x20s'+'oftShadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20let\x20pen'+'umbraFallo'+'ff:\x20f32\x20=\x20'+'softShadow'+'Params.w;\x0a'+'\x0a\x20\x20\x20\x20let\x20s'+'hadowMapSi'+'ze:\x20i32\x20=\x20'+'i32(textur'+'eDimension'+'s(shadowMa'+'p,\x200).x);\x0a'+'\x20\x20\x20\x20var\x20in'+'vShadowMap'+'Size:\x20f32\x20'+'=\x201.0\x20/\x20f3'+'2(shadowMa'+'pSize);\x0a\x20\x20'+'\x20\x20invShado'+'wMapSize\x20='+'\x20invShadow'+'MapSize\x20*\x20'+'(f32(shado'+'wMapSize)\x20'+'/\x202048.0);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'penumbra:\x20'+'f32;\x0a\x0a\x20\x20\x20\x20'+'//\x20contact'+'\x20hardening'+'\x20path\x0a\x20\x20\x20\x20'+'if\x20(shadow'+'BlockerSam'+'ples\x20>\x200)\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20find\x20a'+'verage\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20avgBloc'+'kerDepth:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20numBloc'+'kers:\x20i32\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20&a'+'vgBlockerD'+'epth,\x20&num')+('Blockers,\x20'+'shadowCoor'+'ds.xy,\x20rec'+'eiverDepth'+',\x20shadowBl'+'ockerSampl'+'es,\x20penumb'+'raSize,\x20in'+'vShadowMap'+'Size,\x20rand'+'omSeed);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20when\x20no\x20b'+'lockers\x20ar'+'e\x20present\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(numBlock'+'ers\x20<\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20pen'+'umbra\x20size'+'\x20is\x20based\x20'+'on\x20the\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20p'+'enumbra\x20=\x20'+'getPenumbr'+'a(avgBlock'+'erDepth,\x20s'+'hadowCoord'+'s.z,\x20penum'+'braSize,\x20p'+'enumbraFal'+'loff);\x0a\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20constan'+'t\x20filter\x20s'+'ize,\x20no\x20co'+'ntact\x20hard'+'ening\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20penumb'+'ra\x20=\x20penum'+'braSize;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20filter'+'Radius:\x20f3'+'2\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ords.xy,\x20r'+'eceiverDep'+'th,\x20shadow'+'Samples,\x20f'+'ilterRadiu'+'s,\x20randomS'+'eed);\x0a}\x0a\x0af'+'n\x20getShado'+'wPCSS(shad'+'owMap:\x20tex'+'ture_2d<f3'+'2>,\x20shadow'+'MapSampler'+':\x20sampler,'+'\x20shadowCoo'+'rd:\x20vec3f,'+'\x20shadowPar'+'ams:\x20vec4f'+',\x20cameraPa'+'rams:\x20vec4'+'f,\x20softSha'+'dowParams:'+'\x20vec4f,\x20li'+'ghtDir:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x20//\x20lig'+'htDir\x20unus'+'ed?\x20Kept\x20p'+'aram.\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SDirection'+'al(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ord,\x20camer'+'aParams,\x20s'+'oftShadowP')+'arams);\x0a}\x0a',BD='\x0aattribute'+'\x20vertex_bo'+'neIndices:'+'\x20f32;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20g'+'etBoneMatr'+'ix(indexFl'+'oat:\x20f32)\x20'+'->\x20mat4x4f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20width\x20=\x20'+'i32(textur'+'eDimension'+'s(texture_'+'poseMap).x'+');\x0a\x20\x20\x20\x20let'+'\x20index:\x20i3'+'2\x20=\x20i32(in'+'dexFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x20\x20\x20\x20let\x20i'+'y:\x20i32\x20=\x20i'+'ndex\x20/\x20wid'+'th;\x0a\x20\x20\x20\x20le'+'t\x20ix:\x20i32\x20'+'=\x20index\x20%\x20'+'width;\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'elements\x20o'+'f\x204x3\x20matr'+'ix\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec4f'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(ix'+'\x20+\x200,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20v2:\x20vec'+'4f\x20=\x20textu'+'reLoad(tex'+'ture_poseM'+'ap,\x20vec2i('+'ix\x20+\x201,\x20iy'+'),\x200);\x0a\x20\x20\x20'+'\x20let\x20v3:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(ix\x20+\x202,\x20'+'iy),\x200);\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4x4f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.x,\x20v2.x,'+'\x20v3.x,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.y,\x20v2.y,\x20'+'v3.y,\x200,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'z,\x20v2.z,\x20v'+'3.z,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.w'+',\x20v2.w,\x20v3'+'.w,\x201.0\x0a\x20\x20'+'\x20\x20);\x0a}\x0a',zD='\x0a\x0aattribut'+'e\x20vertex_b'+'oneWeights'+':\x20vec4f;\x0aa'+'ttribute\x20v'+'ertex_bone'+'Indices:\x20v'+'ec4f;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0astru'+'ct\x20BoneMat'+'rix\x20{\x0a\x20\x20\x20\x20'+'v1:\x20vec4f,'+'\x0a\x20\x20\x20\x20v2:\x20v'+'ec4f,\x0a\x20\x20\x20\x20'+'v3:\x20vec4f,'+'\x0a}\x0a\x0afn\x20get'+'BoneMatrix'+'(width:\x20i3'+'2,\x20index:\x20'+'i32)\x20->\x20Bo'+'neMatrix\x20{'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'v\x20=\x20index\x20'+'/\x20width;\x0a\x20'+'\x20\x20\x20let\x20u\x20='+'\x20index\x20%\x20w'+'idth;\x0a\x0a\x20\x20\x20'+'\x20var\x20resul'+'t:\x20BoneMat'+'rix;\x0a\x20\x20\x20\x20r'+'esult.v1\x20='+'\x20textureLo'+'ad(texture'+'_poseMap,\x20'+'vec2i(u\x20+\x20'+'0,\x20v),\x200);'+'\x0a\x20\x20\x20\x20resul'+'t.v2\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20result.v3'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(u\x20'+'+\x202,\x20v),\x200'+');\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0afn\x20ge'+'tSkinMatri'+'x(indicesF'+'loat:\x20vec4'+'f,\x20weights'+':\x20vec4f)\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20width\x20=\x20i'+'32(texture'+'Dimensions'+'(texture_p'+'oseMap).x)'+';\x0a\x20\x20\x20\x20var\x20'+'indices\x20=\x20'+'vec4i(indi'+'cesFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'boneA\x20=\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.x);'+'\x0a\x20\x20\x20\x20let\x20b'+'oneB\x20=\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y);\x0a'+'\x20\x20\x20\x20let\x20bo'+'neC\x20=\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.z);\x0a\x20'+'\x20\x20\x20let\x20bon'+'eD\x20=\x20getBo'+'neMatrix(w'+'idth,\x20indi'+'ces.w);\x0a\x0a\x20'+'\x20\x20\x20//\x20...\x20'+'rest\x20of\x20ge'+'tSkinMatri'+'x\x20remains\x20'+'the\x20same\x20.'+'..\x0a\x20\x20\x20\x20let'+'\x20v1\x20=\x20bone'+'A.v1\x20*\x20wei'+('ghts.x\x20+\x20b'+'oneB.v1\x20*\x20'+'weights.y\x20'+'+\x20boneC.v1'+'\x20*\x20weights'+'.z\x20+\x20boneD'+'.v1\x20*\x20weig'+'hts.w;\x0a\x20\x20\x20'+'\x20let\x20v2\x20=\x20'+'boneA.v2\x20*'+'\x20weights.x'+'\x20+\x20boneB.v'+'2\x20*\x20weight'+'s.y\x20+\x20bone'+'C.v2\x20*\x20wei'+'ghts.z\x20+\x20b'+'oneD.v2\x20*\x20'+'weights.w;'+'\x0a\x20\x20\x20\x20let\x20v'+'3\x20=\x20boneA.'+'v3\x20*\x20weigh'+'ts.x\x20+\x20bon'+'eB.v3\x20*\x20we'+'ights.y\x20+\x20'+'boneC.v3\x20*'+'\x20weights.z'+'\x20+\x20boneD.v'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'let\x20one\x20=\x20'+'dot(weight'+'s,\x20vec4f(1'+'.0,\x201.0,\x201'+'.0,\x201.0));'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'ranspose\x20t'+'o\x204x4\x20matr'+'ix\x0a\x20\x20\x20\x20ret'+'urn\x20mat4x4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20v1.x,\x20v2.'+'x,\x20v3.x,\x200'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'v1.y,\x20v2.y'+',\x20v3.y,\x200,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.z,\x20v2.z,'+'\x20v3.z,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.w,\x20v2.w,\x20'+'v3.w,\x20one\x0a'+'\x20\x20\x20\x20);\x0a}\x0a'),VD='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vLinear'+'Depth:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'floatAsUin'+'tPS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20Varyin'+'g\x20and\x20unif'+'orm\x20declar'+'ations\x0a\x20\x20\x20'+'\x20varying\x20v'+'ViewDir\x20:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20uniform\x20s'+'kyboxHighl'+'ightMultip'+'lier\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20SKY_CU'+'BEMAP\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cub'+'eMap\x20:\x20tex'+'ture_cube<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_cube'+'Map_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vWo'+'rldPos\x20:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20p'+'rojectedSk'+'ydomeCente'+'r\x20:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'env-atlas\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'phericalPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'envAtlasPS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_envAtlas_'+'sampler\x20:\x20'+'sampler;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20mipL'+'evel\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20@'+'fragment\x0a\x20'+'\x20\x20\x20fn\x20frag'+'mentMain(i'+'nput\x20:\x20Fra'+'gmentInput'+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20PREPA'+('SS_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20output'+'\x20linear\x20de'+'pth\x20during'+'\x20prepass\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20floa'+'t2vec4(vLi'+'nearDepth)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20linear'+'\x20:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20dir\x20'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KY_CUBEMAP'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+'\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+'nvDir\x20:\x20ve'+'c3f\x20=\x20norm'+'alize(inpu'+'t.vWorldPo'+'s\x20-\x20unifor'+'m.projecte'+'dSkydomeCe'+'nter);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'\x20=\x20envDir\x20'+'*\x20uniform.'+'cubeMapRot'+'ationMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir\x20='+'\x20input.vVi'+'ewDir;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'.x\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'tureSample'+'(texture_c'+'ubeMap,\x20te'+'xture_cube'+'Map_sample'+'r,\x20dir));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20env-atla'+'s\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ir\x20=\x20input'+'.vViewDir\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv\x20:\x20'+'vec2f\x20=\x20to'+'SphericalU'+'v(normaliz'+'e(dir));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20linea'+'r\x20=\x20{SKYBO'+'X_DECODE_F'+'NC}(textur'+'eSample(te'+'xture_envA'+'tlas,\x20text'+'ure_envAtl'+'as_sampler'+',\x20mapRough'+'nessUv(uv,')+('\x20uniform.m'+'ipLevel)))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ou'+'r\x20HDR\x20enco'+'des\x20values'+'\x20up\x20to\x2064,'+'\x20so\x20allow\x20'+'extra\x20brig'+'htness\x20for'+'\x20the\x20clipp'+'ed\x20values\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(any('+'linear\x20>=\x20'+'vec3f(64.0'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20uniform.'+'skyboxHigh'+'lightMulti'+'plier;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(gam'+'maCorrectO'+'utput(tone'+'Map(proces'+'sEnvironme'+'nt(linear)'+')),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),GD='\x0a\x20\x20\x20\x20//\x20At'+'tribute\x0a\x20\x20'+'\x20\x20attribut'+'e\x20aPositio'+'n\x20:\x20vec4f;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20matrix'+'_view\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20uniform\x20m'+'atrix_proj'+'ectionSkyb'+'ox\x20:\x20mat4x'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vViewDir'+'\x20:\x20vec3f;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PREPASS_'+'PASS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20when'+'\x20skydome\x20r'+'enders\x20dep'+'th\x20during\x20'+'prepass,\x20g'+'enerate\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vLi'+'nearDepth:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vWorldP'+'os\x20:\x20vec3f'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input\x20'+':\x20VertexIn'+'put)\x20->\x20Ve'+'rtexOutput'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut\x20:\x20Verte'+'xOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20view\x20:\x20ma'+'t4x4f\x20=\x20un'+'iform.matr'+'ix_view;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'worldPos\x20:'+'\x20vec4f\x20=\x20u'+'niform.mat'+'rix_model\x20'+'*\x20input.aP'+'osition;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vW'+'orldPos\x20=\x20'+'worldPos.x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'inear\x20dept'+'h\x20from\x20the'+'\x20worldPosi'+'tion,\x20see\x20'+'getLinearD'+'epth\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vL'+'inearDepth'+'\x20=\x20-(unifo'+('rm.matrix_'+'view\x20*\x20vec'+'4f(worldPo'+'s.xyz,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[0]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[1]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[2]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20uniform.m'+'atrix_proj'+'ectionSkyb'+'ox\x20*\x20(view'+'\x20*\x20input.a'+'Position);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'vViewDir\x20='+'\x20input.aPo'+'sition.xyz'+'\x20*\x20uniform'+'.cubeMapRo'+'tationMatr'+'ix;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20for\x20'+'infinite\x20s'+'kybox,\x20use'+'\x20negative\x20'+'gl_Positio'+'n.w\x20to\x20get'+'\x20positive\x20'+'linear\x20dep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-pcPositi'+'on.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Force\x20sk'+'ybox\x20to\x20fa'+'r\x20Z,\x20regar'+'dless\x20of\x20t'+'he\x20clip\x20pl'+'anes\x20on\x20th'+'e\x20camera\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Subtract\x20a'+'\x20tiny\x20fudg'+'e\x20factor\x20t'+'o\x20ensure\x20f'+'loating\x20po'+'int\x20errors'+'\x20don\x27t\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20st'+'ill\x20push\x20p'+'ixels\x20beyo'+'nd\x20far\x20Z.\x20'+'See:\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20http'+'s://commun'+'ity.khrono'+'s.org/t/sk'+'ybox-probl'+'em/61857\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.posit'+'ion.z\x20=\x20ou'+'tput.posit'+'ion.w\x20-\x201.'+'0e-7;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),HD='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_specular'+':\x20vec3f;\x0a#'+'endif\x0a\x0afn\x20'+'getSpecula'+'rity()\x20{\x0a\x20'+'\x20\x20\x20var\x20spe'+'cularColor'+'\x20=\x20vec3f(1'+'.0,\x201.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'CONSTANT\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20unifo'+'rm.materia'+'l_specular'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_TE'+'XTURE\x0a\x20\x20\x20\x20'+'specularCo'+'lor\x20=\x20spec'+'ularColor\x20'+'*\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SPECU'+'LAR_TEXTUR'+'E_NAME},\x20{'+'STD_SPECUL'+'AR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_S'+'PECULAR_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SPECULA'+'R_VERTEX\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20satur'+'ate3(vVert'+'exColor.{S'+'TD_SPECULA'+'R_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dSpe'+'cularity\x20='+'\x20specularC'+'olor;\x0a}\x0a',WD='\x0a\x0afn\x20toSph'+'erical(dir'+':\x20vec3f)\x20-'+'>\x20vec2f\x20{\x0a'+'\x20\x20\x20\x20let\x20an'+'gle_xz\x20=\x20s'+'elect(0.0,'+'\x20atan2(dir'+'.x,\x20dir.z)'+',\x20any(dir.'+'xz\x20!=\x20vec2'+'f(0.0)));\x0a'+'\x20\x20\x20\x20return'+'\x20vec2f(ang'+'le_xz,\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0afn\x20toS'+'phericalUv'+'(dir\x20:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20c'+'onst\x20PI\x20:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20uv\x20:\x20ve'+'c2f\x20=\x20toSp'+'herical(di'+'r)\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x20vec'+'2f(0.5,\x200.'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y);\x0a'+'}\x0a',$D='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'\x20\x20\x20\x20unifor'+'m\x20material'+'_speculari'+'tyFactor:\x20'+'f32;\x0a#endi'+'f\x0a\x0afn\x20getS'+'pecularity'+'Factor()\x20{'+'\x0a\x20\x20\x20\x20var\x20s'+'pecularity'+'Factor\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20speculari'+'tyFactor\x20='+'\x20speculari'+'tyFactor\x20*'+'\x20uniform.m'+'aterial_sp'+'ecularityF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'ARITYFACTO'+'R_TEXTURE\x0a'+'\x20\x20\x20\x20specul'+'arityFacto'+'r\x20=\x20specul'+'arityFacto'+'r\x20*\x20textur'+'eSampleBia'+'s({STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_NAME},\x20'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_VE'+'RTEX\x0a\x20\x20\x20\x20s'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_SPEC'+'ULARITYFAC'+'TOR_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dS'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor;\x0a}\x0a',XD='\x0afn\x20getSpo'+'tEffect(li'+'ghtSpotDir'+':\x20vec3f,\x20l'+'ightInnerC'+'oneAngle:\x20'+'f32,\x20light'+'OuterConeA'+'ngle:\x20f32,'+'\x20lightDirN'+'orm:\x20vec3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'osAngle:\x20f'+'32\x20=\x20dot(l'+'ightDirNor'+'m,\x20lightSp'+'otDir);\x0a\x20\x20'+'\x20\x20return\x20s'+'moothstep('+'lightOuter'+'ConeAngle,'+'\x20lightInne'+'rConeAngle'+',\x20cosAngle'+');\x0a}',qD='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2f(vUv0'+'.x,\x201.0\x20-\x20'+'vUv0.y);\x0a',jD='\x0a\x20\x20\x20\x20let\x20t'+'ileMask:\x20v'+'ec2f\x20=\x20ste'+'p(vMask,\x20v'+'ec2f(0.999'+'99));\x0a\x20\x20\x20\x20'+'let\x20tileSi'+'ze:\x20vec2f\x20'+'=\x200.5\x20*\x20(i'+'nnerOffset'+'.xy\x20+\x20inne'+'rOffset.zw'+');\x0a\x20\x20\x20\x20let'+'\x20tileScale'+':\x20vec2f\x20=\x20'+'vec2f(1.0)'+'\x20/\x20(vec2f('+'1.0)\x20-\x20til'+'eSize);\x0a\x20\x20'+'\x20\x20var\x20clam'+'pedUv:\x20vec'+'2f\x20=\x20mix(i'+'nnerOffset'+'.xy\x20*\x200.5,'+'\x20vec2f(1.0'+')\x20-\x20innerO'+'ffset.zw\x20*'+'\x200.5,\x20frac'+'t((vTiledU'+'v\x20-\x20tileSi'+'ze)\x20*\x20tile'+'Scale));\x0a\x20'+'\x20\x20\x20clamped'+'Uv\x20=\x20clamp'+'edUv\x20*\x20atl'+'asRect.zw\x20'+'+\x20atlasRec'+'t.xy;\x0a\x20\x20\x20\x20'+'var\x20nineSl'+'icedUv:\x20ve'+'c2f\x20=\x20vUv0'+'\x20*\x20tileMas'+'k\x20+\x20clampe'+'dUv\x20*\x20(vec'+'2f(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x0a',YD='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dAlpha'+':\x20f32\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20//'+'\x20all\x20passe'+'s\x20handle\x20o'+'pacity\x0a\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'!=\x20NONE\x20||'+'\x20defined(L'+'IT_ALPHA_T'+'EST)\x20||\x20de'+'fined(LIT_'+'ALPHA_TO_C'+'OVERAGE)\x20|'+'|\x20STD_OPAC'+'ITY_DITHER'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_OP'+'ACITY_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_opa'+'cityMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_opacityMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20globals'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dAlbedo:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'NormalW:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dSp'+'ecularity:'+'\x20vec3f\x20=\x20v'+'ec3f(0.0,\x20'+'0.0,\x200.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dGlossin'+'ess:\x20f32\x20='+'\x200.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_REFR'+'ACTION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dTransmi'+'ssion:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dTh'+'ickness:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'CENE_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SCREE'+'N_SIZE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20uSc'+'reenSize:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+('f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_TRANSFOR'+'MS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20ma'+'trix_viewP'+'rojection:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20matri'+'x_model:\x20m'+'at4x4f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20paral'+'lax\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_HEIGHT_'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'UvOffset:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'DIFFUSE_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_heightM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'heightMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20diffus'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'diffuseMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_diffus'+'eMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSEDETAI'+'L_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20norma'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_NORMAL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_normalMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20#ifdef'+'\x20STD_NORMA'+'LDETAIL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalDetai'+'lMap\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_no'+'rmalDetail'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_T'+'HICKNESS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'thicknessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_thic'+'knessMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_REFRACTIO'+'N_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_refract'+'ionMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'refraction'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20i'+'ridescence'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dIr'+'idescence:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20dIridesce'+'nceThickne'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'iridescenc'+'eThickness'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_iridescen'+'ceThicknes'+'sMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur')+('e_iridesce'+'nceMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_irides'+'cenceMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20ccSp'+'ecularity:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20ccGlossin'+'ess:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20ccNor'+'malW:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dAni'+'sotropy:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'Anisotropy'+'Rotation:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'arity\x20&\x20gl'+'ossiness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20she'+'en\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SHEE'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sSpecular'+'ity:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sGlossine'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'HEENGLOSS_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_s'+'heenGlossM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_sheenG'+'lossMapSam'+'pler\x20:\x20sam'+'pler;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_MET'+'ALNESS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dMet'+'alness:\x20f3'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dIor:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'metalnessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_metaln'+'essMapSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'rity\x20facto'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var<privat'+'e>\x20dSpecul'+'arityFacto'+'r:\x20f32;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rityFactor'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_specu'+'larityFact'+'orMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_SPECULAR'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_')+('specularMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20gloss\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_glossMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_glo'+'ssMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dAo:\x20f32;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_aoMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_AODETAIL_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoDet'+'ailMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_aoDeta'+'ilMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dEmission'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_EM'+'ISSIVE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_em'+'issiveMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_emissiv'+'eMapSample'+'r\x20:\x20sample')+('r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clearcoat\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatG'+'lossMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_clear'+'CoatGlossM'+'apSampler\x20'+':\x20sampler;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_clearC'+'oatNormalM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatN'+'ormalMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20anisotr'+'opy\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_A'+'NISOTROPY_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aniso'+'tropyMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_anis'+'otropyMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20lightm'+'ap\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(STD_LIG'+'HTMAP)\x20||\x20')+('defined(ST'+'D_LIGHT_VE'+'RTEX_COLOR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dLi'+'ghtmap:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_LI'+'GHT_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_l'+'ightMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_light'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20front'+'\x20end\x20outpu'+'ts\x20to\x20lit\x20'+'shader\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22litShader'+'CorePS\x22\x0a'),KD='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fn\x20'+'getSpecula'+'rity()\x20{\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dSpeculari'+'ty\x20=\x20vec3f'+'(1.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'gloss\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22gl'+'ossPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22aoPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20emissi'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22emissiveP'+'S\x22\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clear'+'coat\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20')+('LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22clea'+'rCoatPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'GlossPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'NormalPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ani'+'sotropy\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x20&&\x20defin'+'ed(LIT_LIG'+'HTING)\x20&&\x20'+'defined(LI'+'T_GGX_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22an'+'isotropyPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(ST'+'D_LIGHTMAP'+')\x20||\x20defin'+'ed(STD_LIG'+'HT_VERTEX_'+'COLOR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22l'+'ightmapPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20fn\x20evalu'+'ateFronten'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20al'+'l\x20passes\x20h'+'andle\x20opac'+'ity\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIT_'+'BLEND_TYPE'+'\x20!=\x20NONE\x20|'+'|\x20defined('+'LIT_ALPHA_'+'TEST)\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x20'+'||\x20STD_OPA'+'CITY_DITHE'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getOpaci'+'ty();\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_ALPHA'+'_TEST)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20alphaTe'+'st(dAlpha)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20opacityDi'+'ther(dAlph'+'a,\x200.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20d'+'Alpha;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20par')+('allax\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getP'+'arallax();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getA'+'lbedo();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_a'+'lbedo\x20=\x20dA'+'lbedo;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20normal\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getNorma'+'l();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_w'+'orldNormal'+'\x20=\x20dNormal'+'W;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'fraction\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etRefracti'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'transmissi'+'on\x20=\x20dTran'+'smission;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Thickness('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness\x20=\x20d'+'Thickness;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_D'+'ISPERSION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_di'+'spersion\x20='+'\x20uniform.m'+'aterial_di'+'spersion;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_IRIDESC'+'ENCE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getIrides'+'cence();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getIr'+'idescenceT'+'hickness()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x20=\x20'+'dIridescen'+'ce;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ir'+'idescence_'+'thickness\x20'+'=\x20dIridesc'+'enceThickn'+'ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specularit'+'y\x20&\x20glossi'+'ness\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20sheen\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSheen()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'sheen_spec'+'ularity\x20=\x20'+'sSpeculari'+'ty;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getShe'+'enGlossine'+'ss();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_sheen_'+'gloss\x20=\x20sG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getMetaln'+'ess();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_metal'+'ness\x20=\x20dMe'+'talness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etIor();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+'\x20=\x20dIor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'ity\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULARITY_'+'FACTOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'yFactor();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'Factor\x20=\x20d'+'Specularit'+'yFactor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20gloss\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'y();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20dSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs')+('_gloss\x20=\x20d'+'Glossiness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ao\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getAO();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_ao\x20=\x20'+'dAo;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getEmissi'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_emis'+'sion\x20=\x20dEm'+'ission;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getClea'+'rCoat();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getCl'+'earCoatGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'ClearCoatN'+'ormal();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_specula'+'rity\x20=\x20ccS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_glos'+'s\x20=\x20ccGlos'+'siness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal\x20=\x20ccNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20anisotro'+'py\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getAnisot'+'ropy();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20lightma'+'p\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightM'+'ap();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmap\x20='+'\x20dLightmap'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_')+('LIGHTMAP_D'+'IR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmapD'+'ir\x20=\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a'),ZD='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20tbnB'+'asis:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getTBN(t'+'angent:\x20ve'+'c3f,\x20binor'+'mal:\x20vec3f'+',\x20normal:\x20'+'vec3f)\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20TBN_TANGE'+'NTS\x20//\x20tan'+'gents\x20/\x20bi'+'normals\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dTB'+'N\x20=\x20mat3x3'+'f(normaliz'+'e(tangent)'+',\x20normaliz'+'e(binormal'+'),\x20normali'+'ze(normal)'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20define'+'d(TBN_DERI'+'VATIVES)\x20/'+'/\x20derivati'+'ves\x20based\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2f\x20=\x20{'+'lightingUv'+'};\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20get\x20e'+'dge\x20vector'+'s\x20of\x20the\x20p'+'ixel\x20trian'+'gle\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dp1:'+'\x20vec3f\x20=\x20d'+'pdx(\x20vPosi'+'tionW\x20);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dp2:\x20vec3'+'f\x20=\x20dpdy(\x20'+'vPositionW'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20duv1'+':\x20vec2f\x20=\x20'+'dpdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20duv2:\x20'+'vec2f\x20=\x20dp'+'dy(\x20uv\x20);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20solve\x20th'+'e\x20linear\x20s'+'ystem\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20dp'+'2perp:\x20vec'+'3f\x20=\x20cross'+'(\x20dp2,\x20nor'+'mal\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20d'+'p1perp:\x20ve'+'c3f\x20=\x20cros'+'s(\x20normal,'+'\x20dp1\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'T:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.x\x20+\x20'+'dp1perp\x20*\x20'+'duv2.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'B:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+('dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+'ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20deno'+'m:\x20f32\x20=\x20m'+'ax(\x20dot(T,'+'\x20T),\x20dot(B'+',\x20B)\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'invmax:\x20f3'+'2\x20=\x20select'+'(uniform.t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20),\x200.0,\x20'+'denom\x20==\x200'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3x3f(T\x20'+'*\x20invmax,\x20'+'-B\x20*\x20invma'+'x,\x20normal\x20'+');\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20obj'+'ect\x20space\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20B:\x20'+'vec3f\x20=\x20cr'+'oss(normal'+',\x20vObjectS'+'paceUpW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20T:\x20vec3f'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dot(B,'+'B)\x20==\x200.0)'+'\x20//\x20deal\x20w'+'ith\x20case\x20w'+'hen\x20vObjec'+'tSpaceUpW\x20'+'normal\x20are'+'\x20parallel\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20majo'+'r:\x20f32\x20=\x20m'+'ax(max(nor'+'mal.x,\x20nor'+'mal.y),\x20no'+'rmal.z);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(norm'+'al.x\x20==\x20ma'+'jor)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20B\x20=\x20c'+'ross(norma'+'l,\x20vec3f(0'+'.0,\x201.0,\x200'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20T\x20=\x20cros'+'s(normal,\x20'+'B);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x20if\x20(n'+'ormal.y\x20=='+'\x20major)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20B\x20'+'=\x20cross(no'+'rmal,\x20vec3'+'f(0.0,\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20//'+'\x20removed\x20\x22'+'if\x20(normal'+'.z\x20==\x20majo'+'r)\x22\x20assumi'+'ng\x20it\x27s\x20th'+'e\x20only\x20rem'+'aining\x20cas'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20B\x20=\x20cros'+'s(normal,\x20'+'vec3f(1.0,'+'\x200.0,\x200.0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3x3f(n'+'ormalize(T'+'),\x20normali'+'ze(B),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a}'),QD='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_th'+'ickness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getTh'+'ickness()\x20'+'{\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'THICKNESS_'+'CONSTANT\x0a\x20'+'\x20\x20\x20dThickn'+'ess\x20=\x20dThi'+'ckness\x20*\x20u'+'niform.mat'+'erial_thic'+'kness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_THICKN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x20d'+'Thickness\x20'+'*\x20textureS'+'ampleBias('+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_THICKNESS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_THIC'+'KNESS_VERT'+'EX\x0a\x20\x20\x20\x20dTh'+'ickness\x20=\x20'+'dThickness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',JD='\x0a#if\x20(TONE'+'MAP\x20==\x20NON'+'E)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingNo'+'nePS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20FILMIC\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingFilmi'+'cPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22tonemap'+'pingLinear'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20HEJL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gHejlPS\x22\x0a#'+'elif\x20TONEM'+'AP\x20==\x20ACES'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingAces'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20ACES2\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngAces2PS\x22'+'\x0a#elif\x20TON'+'EMAP\x20==\x20NE'+'UTRAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gNeutralPS'+'\x22\x0a#endif\x0a',eI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20t'+'A:\x20f32\x20=\x202'+'.51;\x0a\x20\x20\x20\x20l'+'et\x20tB:\x20f32'+'\x20=\x200.03;\x0a\x20'+'\x20\x20\x20let\x20tC:'+'\x20f32\x20=\x202.4'+'3;\x0a\x20\x20\x20\x20let'+'\x20tD:\x20f32\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20let\x20tE:\x20f'+'32\x20=\x200.14;'+'\x0a\x20\x20\x20\x20let\x20x'+':\x20vec3f\x20=\x20'+'color\x20*\x20un'+'iform.expo'+'sure;\x0a\x20\x20\x20\x20'+'return\x20(x\x20'+'*\x20(tA\x20*\x20x\x20'+'+\x20tB))\x20/\x20('+'x\x20*\x20(tC\x20*\x20'+'x\x20+\x20tD)\x20+\x20'+'tE);\x0a}\x0a',tI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0a//\x20AC'+'ES\x20approxi'+'mation\x20by\x20'+'Stephen\x20Hi'+'ll\x0a\x0a//\x20sRG'+'B\x20=>\x20XYZ\x20='+'>\x20D65_2_D6'+'0\x20=>\x20AP1\x20='+'>\x20RRT_SAT\x0a'+'const\x20ACES'+'InputMat:\x20'+'mat3x3f\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20vec3f(0'+'.59719,\x200.'+'35458,\x200.0'+'4823),\x0a\x20\x20\x20'+'\x20vec3f(0.0'+'7600,\x200.90'+'834,\x200.015'+'66),\x0a\x20\x20\x20\x20v'+'ec3f(0.028'+'40,\x200.1338'+'3,\x200.83777'+')\x0a);\x0a\x0a//\x20O'+'DT_SAT\x20=>\x20'+'XYZ\x20=>\x20D60'+'_2_D65\x20=>\x20'+'sRGB\x0aconst'+'\x20ACESOutpu'+'tMat:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20v'+'ec3f(\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367),\x0a\x20\x20\x20\x20'+'vec3f(-0.1'+'0208,\x20\x201.1'+'0813,\x20-0.0'+'0605),\x0a\x20\x20\x20'+'\x20vec3f(-0.'+'00327,\x20-0.'+'07276,\x20\x201.'+'07602)\x0a);\x0a'+'\x0afn\x20RRTAnd'+'ODTFit(v:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20a:\x20v'+'ec3f\x20=\x20v\x20*'+'\x20(v\x20+\x20vec3'+'f(0.024578'+'6))\x20-\x20vec3'+'f(0.000090'+'537);\x0a\x20\x20\x20\x20'+'let\x20b:\x20vec'+'3f\x20=\x20v\x20*\x20('+'vec3f(0.98'+'3729)\x20*\x20v\x20'+'+\x20vec3f(0.'+'4329510))\x20'+'+\x20vec3f(0.'+'238081);\x0a\x20'+'\x20\x20\x20return\x20'+'a\x20/\x20b;\x0a}\x0a\x0a'+'fn\x20toneMap'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'var\x20c:\x20vec'+'3f\x20=\x20color'+'\x20*\x20(unifor'+'m.exposure'+'\x20/\x200.6);\x0a\x20'+'\x20\x20\x20c\x20=\x20c\x20*'+'\x20ACESInput'+'Mat;\x0a\x0a\x20\x20\x20\x20'+'//\x20Apply\x20R'+'RT\x20and\x20ODT'+'\x0a\x20\x20\x20\x20c\x20=\x20R'+'RTAndODTFi'+'t(c);\x0a\x20\x20\x20\x20'+'c\x20=\x20c\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(c,\x20vec'+'3f(0.0),\x20v'+'ec3f(1.0))'+';\x0a}\x0a',sI='\x0aconst\x20A:\x20'+'f32\x20=\x200.15'+';\x0aconst\x20B:'+'\x20f32\x20=\x200.5'+'0;\x0aconst\x20C'+':\x20f32\x20=\x200.'+'10;\x0aconst\x20'+'D:\x20f32\x20=\x200'+'.20;\x0aconst'+'\x20E:\x20f32\x20=\x20'+'0.02;\x0acons'+'t\x20F:\x20f32\x20='+'\x200.30;\x0acon'+'st\x20W:\x20f32\x20'+'=\x2011.2;\x0a\x0au'+'niform\x20exp'+'osure:\x20f32'+';\x0a\x0afn\x20unch'+'arted2Tone'+'map(x:\x20vec'+'3f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20((x\x20'+'*\x20(A\x20*\x20x\x20+'+'\x20C\x20*\x20B)\x20+\x20'+'D\x20*\x20E)\x20/\x20('+'x\x20*\x20(A\x20*\x20x'+'\x20+\x20B)\x20+\x20D\x20'+'*\x20F))\x20-\x20ve'+'c3f(E\x20/\x20F)'+';\x0a}\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20c'+':\x20vec3f\x20=\x20'+'uncharted2'+'Tonemap(co'+'lor\x20*\x20unif'+'orm.exposu'+'re);\x0a\x20\x20\x20\x20l'+'et\x20whiteSc'+'ale:\x20vec3f'+'\x20=\x20vec3f(1'+'.0)\x20/\x20unch'+'arted2Tone'+'map(vec3f('+'W,\x20W,\x20W));'+'\x0a\x20\x20\x20\x20c\x20*=\x20'+'whiteScale'+';\x0a\x20\x20\x20\x20retu'+'rn\x20c;\x0a}\x0a',iI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20A'+':\x20f32\x20=\x200.'+'22;\x0a\x20\x20\x20\x20le'+'t\x20B:\x20f32\x20='+'\x200.3;\x0a\x20\x20\x20\x20'+'let\x20C:\x20f32'+'\x20=\x200.1;\x0a\x20\x20'+'\x20\x20let\x20D:\x20f'+'32\x20=\x200.2;\x0a'+'\x20\x20\x20\x20let\x20E:'+'\x20f32\x20=\x200.0'+'1;\x0a\x20\x20\x20\x20let'+'\x20F:\x20f32\x20=\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20Scl:\x20f3'+'2\x20=\x201.25;\x0a'+'\x0a\x20\x20\x20\x20let\x20a'+'djusted_co'+'lor\x20=\x20colo'+'r\x20*\x20unifor'+'m.exposure'+';\x0a\x20\x20\x20\x20let\x20'+'h\x20=\x20max(ve'+'c3f(0.0),\x20'+'adjusted_c'+'olor\x20-\x20vec'+'3f(0.004))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20(h\x20*\x20('+'(Scl\x20*\x20A)\x20'+'*\x20h\x20+\x20Scl\x20'+'*\x20vec3f(C\x20'+'*\x20B))\x20+\x20Sc'+'l\x20*\x20vec3f('+'D\x20*\x20E))\x20/\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(h\x20*\x20(A\x20*'+'\x20h\x20+\x20vec3f'+'(B))\x20+\x20vec'+'3f(D\x20*\x20F))'+'\x20-\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20Scl\x20*\x20'+'vec3f(E\x20/\x20'+'F);\x0a}\x0a',rI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20color\x20*\x20'+'uniform.ex'+'posure;\x0a}\x0a',aI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(col:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20var\x20col'+'or\x20=\x20col\x20*'+'\x20uniform.e'+'xposure;\x0a\x0a'+'\x20\x20\x20\x20let\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20let\x20des'+'aturation\x20'+'=\x200.15;\x0a\x0a\x20'+'\x20\x20\x20let\x20x\x20='+'\x20min(color'+'.r,\x20min(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20let\x20offs'+'et\x20=\x20selec'+'t(0.04,\x20x\x20'+'-\x206.25\x20*\x20x'+'\x20*\x20x,\x20x\x20<\x20'+'0.08);\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'vec3f(offs'+'et);\x0a\x0a\x20\x20\x20\x20'+'let\x20peak\x20='+'\x20max(color'+'.r,\x20max(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20if\x20(peak'+'\x20<\x20startCo'+'mpression)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'d\x20=\x201.0\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20let\x20newP'+'eak\x20=\x201.0\x20'+'-\x20d\x20*\x20d\x20/\x20'+'(peak\x20+\x20d\x20'+'-\x20startCom'+'pression);'+'\x0a\x20\x20\x20\x20color'+'\x20*=\x20newPea'+'k\x20/\x20peak;\x0a'+'\x0a\x20\x20\x20\x20let\x20g'+'\x20=\x201.0\x20-\x201'+'.0\x20/\x20(desa'+'turation\x20*'+'\x20(peak\x20-\x20n'+'ewPeak)\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ve'+'c3f(newPea'+'k),\x20vec3f('+'g));\x0a}\x0a',nI='\x0afn\x20toneMa'+'p(color:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a}\x0a',oI='\x0a#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20SCREE'+'NSPACE\x0a\x20\x20\x20'+'\x20uniform\x20p'+'rojectionF'+'lipY:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20evalWorl'+'dPosition('+'vertexPosi'+'tion:\x20vec3'+'f,\x20modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ve'+'c4f\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20local'+'Pos:\x20vec3f'+'\x20=\x20getLoca'+'lPosition('+'vertexPosi'+'tion);\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20outer\x20and'+'\x20inner\x20ver'+'tices\x20are\x20'+'at\x20the\x20sam'+'e\x20position'+',\x20scale\x20bo'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20local'+'PosXZ:\x20vec'+'2f\x20=\x20local'+'Pos.xz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20loca'+'lPosXZ\x20=\x20l'+'ocalPosXZ\x20'+'*\x20uniform.'+'outerScale'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20offset'+'\x20inner\x20ver'+'tices\x20insi'+'de\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20(origi'+'nal\x20vertic'+'es\x20must\x20be'+'\x20in\x20[-1;1]'+'\x20range)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'positiveUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(vertex'+'Position.x'+'z,\x20vec2f(0'+'.0),\x20vec2f'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(-verte'+'xPosition.'+'xz,\x20vec2f('+'0.0),\x20vec2'+'f(1.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20loc'+'alPosXZ\x20=\x20'+'localPosXZ'+'\x20+\x20(-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy\x20+'+'\x20negativeU'+'nitOffset\x20'+'*\x20uniform.'+'innerOffse'+'t.zw)\x20*\x20ve'+'rtex_texCo'+'ord0.xy;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'iledUvGlob'+'al\x20=\x20(loca'+'lPosXZ\x20-\x20u'+'niform.out'+'erScale\x20+\x20'+'uniform.in'+'nerOffset.'+'xy)\x20*\x20-0.5'+'\x20+\x201.0;\x20//'+'\x20uv\x20=\x20loca'+'l\x20pos\x20-\x20in'+('ner\x20corner'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPosXZ'+'\x20=\x20localPo'+'sXZ\x20*\x20-0.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20='+'\x20vec3f(loc'+'alPosXZ.x,'+'\x20localPosX'+'Z.y,\x20local'+'Pos.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20var\x20po'+'sW:\x20vec4f\x20'+'=\x20modelMat'+'rix\x20*\x20vec4'+'f(localPos'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREENSPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'posW\x20=\x20vec'+'4f(posW.xy'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20posW'+';\x0a}\x0a\x0afn\x20ge'+'tPosition('+')\x20->\x20vec4f'+'\x20{\x0a\x0a\x20\x20\x20\x20dM'+'odelMatrix'+'\x20=\x20getMode'+'lMatrix();'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'posW:\x20vec4'+'f\x20=\x20evalWo'+'rldPositio'+'n(vertex_p'+'osition.xy'+'z,\x20dModelM'+'atrix);\x0a\x20\x20'+'\x20\x20dPositio'+'nW\x20=\x20posW.'+'xyz;\x0a\x0a\x20\x20\x20\x20'+'var\x20screen'+'Pos:\x20vec4f'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20UV1LAYO'+'UT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20vec4f(v'+'ertex_texC'+'oord1.xy\x20*'+'\x202.0\x20-\x201.0'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20SCR'+'EENSPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20posW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20unif'+'orm.projec'+'tionFlipY;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos\x20=\x20u'+'niform.mat'+'rix_viewPr'+'ojection\x20*'+'\x20posW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20snap\x20ve'+'rtex\x20to\x20a\x20'+'pixel\x20boun'+'dary\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x200.'+'5)\x20+\x200.5;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20screenPo'+'s.xy\x20*=\x20un'+'iforms.uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'niforms.uS'+'creenSize.'+'zw;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x202.0'+')\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20scr'+'eenPos;\x0a}\x0a'+'\x0afn\x20getWor'+'ldPosition'+'()\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20dPosi'+'tionW;\x0a}\x0a'),lI='\x0a\x0a\x20\x20\x20\x20attr'+'ibute\x20vert'+'ex_positio'+'n:\x20vec4f;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'rix_model:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20morph_te'+'x_params:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20attri'+'bute\x20morph'+'_vertex_id'+':\x20u32;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etTextureM'+'orphCoords'+'()\x20->\x20vec2'+'i\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'turn\x20morph'+'_vertex_id'+'\x20into\x20int\x20'+'grid\x20coord'+'inates\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'Size:\x20vec2'+'i\x20=\x20vec2i('+'uniform.mo'+'rph_tex_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphGr'+'idV:\x20i32\x20='+'\x20i32(morph'+'_vertex_id'+')\x20/\x20textur'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20morph'+'GridU:\x20i32'+'\x20=\x20i32(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'rphGridV\x20='+'\x20textureSi'+'ze.y\x20-\x20mor'+'phGridV\x20-\x20'+'1;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec2i(mo'+'rphGridU,\x20'+'morphGridV'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_PO'+'SITION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20aabbSiz'+'e:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20aabbMi'+'n:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'morphPosit'+'ionTex:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'sitionTex:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+('if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sk'+'inBatchVS\x22'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fn\x20getMode'+'lMatrix()\x20'+'->\x20mat4x4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getBoneM'+'atrix(vert'+'ex_boneInd'+'ices);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(SKIN'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etModelMat'+'rix()\x20->\x20m'+'at4x4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20un'+'iform.matr'+'ix_model\x20*'+'\x20getSkinMa'+'trix(verte'+'x_boneIndi'+'ces,\x20verte'+'x_boneWeig'+'hts);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(INSTA'+'NCING)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22tran'+'sformInsta'+'ncingVS\x22\x0a\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'n\x20getModel'+'Matrix()\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_mode'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'fn\x20getLoca'+'lPosition('+'vertexPosi'+'tion:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20loc'+'alPos:\x20vec'+'3f\x20=\x20verte'+'xPosition;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphUV:'+'\x20vec2i\x20=\x20g'+'etTextureM'+'orphCoords'+'();\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MORPHI'+'NG_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Use\x20'+'textureLoa'+'d\x20instead\x20'+'of\x20texelFe'+'tch.\x20Coord'+'inates\x20mus'+'t\x20be\x20integ'+'er\x20type\x20(v'+'ec2i).\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20WGSL'+'\x20requires\x20'+'explicit\x20t'+'ype\x20conver'+'sion\x20for\x20v'+'ectors.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Div'+'ision\x20by\x20f'+'loat\x20liter')+('al\x20ensures'+'\x20floating\x20'+'point\x20divi'+'sion.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hPos:\x20vec3'+'f\x20=\x20vec3f('+'textureLoa'+'d(morphPos'+'itionTex,\x20'+'morphUV,\x200'+').xyz)\x20/\x206'+'5535.0\x20*\x20u'+'niform.aab'+'bSize\x20+\x20un'+'iform.aabb'+'Min;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Use\x20text'+'ureLoad\x20in'+'stead\x20of\x20t'+'exelFetch.'+'\x20Coordinat'+'es\x20must\x20be'+'\x20integer\x20t'+'ype\x20(vec2i'+').\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'s:\x20vec3f\x20='+'\x20textureLo'+'ad(morphPo'+'sitionTex,'+'\x20morphUV,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20+'+'=\x20morphPos'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20localP'+'os;\x0a\x20\x20\x20\x20}\x0a'),cI='\x0a\x0aattribut'+'e\x20instance'+'_line1:\x20ve'+'c4f;\x0aattri'+'bute\x20insta'+'nce_line2:'+'\x20vec4f;\x0aat'+'tribute\x20in'+'stance_lin'+'e3:\x20vec4f;'+'\x0aattribute'+'\x20instance_'+'line4:\x20vec'+'4f;\x0a\x0afn\x20ge'+'tModelMatr'+'ix()\x20->\x20ma'+'t4x4f\x20{\x0a\x20\x20'+'\x20\x20return\x20u'+'niform.mat'+'rix_model\x20'+'*\x20mat4x4f('+'instance_l'+'ine1,\x20inst'+'ance_line2'+',\x20instance'+'_line3,\x20in'+'stance_lin'+'e4);\x0a}\x0a',hI='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_refrac'+'tion:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getRefra'+'ction()\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction:\x20'+'f32\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20refractio'+'n\x20=\x20unifor'+'m.material'+'_refractio'+'n;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'REFRACTION'+'_TEXTURE\x0a\x20'+'\x20\x20\x20refract'+'ion\x20=\x20refr'+'action\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_REFRACTI'+'ON_TEXTURE'+'_NAME},\x20{S'+'TD_REFRACT'+'ION_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_REFRACTIO'+'N_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_REFRACTIO'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_VE'+'RTEX\x0a\x20\x20\x20\x20r'+'efraction\x20'+'=\x20refracti'+'on\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_REFRACTI'+'ON_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dTr'+'ansmission'+'\x20=\x20refract'+'ion;\x0a}\x0a',dI='\x0auniform\x20t'+'woSidedLig'+'htingNegSc'+'aleFactor:'+'\x20f32;\x0a\x0afn\x20'+'handleTwoS'+'idedLighti'+'ng()\x20{\x0a\x20\x20\x20'+'\x20dTBN[2]\x20='+'\x20dTBN[2]\x20*'+'\x20select(-u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20p'+'cFrontFaci'+'ng);\x0a}\x0a',fI='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20fn\x20getU'+'v0()\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20uv'+'\x20=\x20vertex_'+'position.x'+'z;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20offse'+'t\x20inner\x20ve'+'rtices\x20ins'+'ide\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2f(0'+'.0,\x200.0),\x20'+'vec2f(1.0,'+'\x201.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset\x20='+'\x20clamp(-ve'+'rtex_posit'+'ion.xz,\x20ve'+'c2f(0.0,\x200'+'.0),\x20vec2f'+'(1.0,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uv\x20=\x20uv\x20'+'+\x20((-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy)\x20'+'+\x20(negativ'+'eUnitOffse'+'t\x20*\x20unifor'+'m.innerOff'+'set.zw))\x20*'+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uv\x20=\x20uv\x20*'+'\x20-0.5\x20+\x20ve'+'c2f(0.5,\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20uniform'+'.atlasRect'+'.zw\x20+\x20unif'+'orm.atlasR'+'ect.xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dMa'+'skGlobal\x20='+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20uv'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20fn'+'\x20getUv0()\x20'+'->\x20vec2f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a',uI='\x0afn\x20getUv1'+'()\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20verte'+'x_texCoord'+'1;\x0a}\x0a',pI='\x0aoutput.vU'+'V{TRANSFOR'+'M_UV_{i}}_'+'{TRANSFORM'+'_ID_{i}}\x20='+'\x20vec2f(\x0a\x20\x20'+'\x20\x20dot(vec3'+'f(uv{TRANS'+'FORM_UV_{i'+'}},\x201),\x20un'+'iform.{TRA'+'NSFORM_NAM'+'E_{i}}0),\x0a'+'\x20\x20\x20\x20dot(ve'+'c3f(uv{TRA'+'NSFORM_UV_'+'{i}},\x201),\x20'+'uniform.{T'+'RANSFORM_N'+'AME_{i}}1)'+'\x0a);\x0a',mI='\x0a\x20\x20\x20\x20unifo'+'rm\x20{TRANSF'+'ORM_NAME_{'+'i}}0:\x20vec3'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20{TRAN'+'SFORM_NAME'+'_{i}}1:\x20ve'+'c3f;\x0a',_I='\x0afn\x20getVie'+'wDir()\x20{\x0a\x20'+'\x20\x20\x20dViewDi'+'rW\x20=\x20norma'+'lize(unifo'+'rm.view_po'+'sition\x20-\x20v'+'PositionW)'+';\x0a}\x0a',gI={'alphaTestPS':_2,'ambientPS':g2,'anisotropyPS':S2,'aoPS':y2,'aoDiffuseOccPS':v2,'aoSpecOccPS':x2,'bakeDirLmEndPS':T2,'bakeLmEndPS':w2,'basePS':E2,'baseNineSlicedPS':b2,'baseNineSlicedTiledPS':A2,'bayerPS':C2,'blurVSMPS':P2,'clearCoatPS':M2,'clearCoatGlossPS':D2,'clearCoatNormalPS':I2,'clusteredLightCookiesPS':R2,'clusteredLightShadowsPS':O2,'clusteredLightUtilsPS':L2,'clusteredLightPS':F2,'combinePS':N2,'cookieBlit2DPS':k2,'cookieBlitCubePS':U2,'cookieBlitVS':B2,'cubeMapProjectPS':z2,'cubeMapRotatePS':V2,'debugOutputPS':G2,'debugProcessFrontendPS':H2,'detailModesPS':$2,'diffusePS':X2,'decodePS':W2,'emissivePS':q2,'encodePS':j2,'endPS':Y2,'envAtlasPS':K2,'envProcPS':Z2,'falloffInvSquaredPS':Q2,'falloffLinearPS':J2,'floatAsUintPS':eM,'fogPS':tM,'fresnelSchlickPS':sM,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':iM,'gammaPS':rM,'glossPS':aM,'gsplatCenterVS':nM,'gsplatCornerVS':_M,'gsplatColorVS':oM,'gsplatCommonVS':lM,'gsplatCompressedDataVS':cM,'gsplatCompressedSHVS':hM,'gsplatEvalSHVS':dM,'gsplatQuatToMat3VS':fM,'gsplatSogsColorVS':uM,'gsplatSogsDataVS':pM,'gsplatSogsSHVS':mM,'gsplatDataVS':gM,'gsplatOutputVS':SM,'gsplatPS':yM,'gsplatSHVS':vM,'gsplatSourceVS':xM,'gsplatVS':TM,'quadVS':wM,'indirectCoreCS':EM,'immediateLinePS':bM,'immediateLineVS':AM,'iridescenceDiffractionPS':CM,'iridescencePS':PM,'iridescenceThicknessPS':MM,'iorPS':DM,'lightDeclarationPS':IM,'lightDiffuseLambertPS':LM,'lightDirPointPS':RM,'lightEvaluationPS':OM,'lightFunctionLightPS':FM,'lightFunctionShadowPS':NM,'lightingPS':kM,'lightmapAddPS':UM,'lightmapPS':BM,'lightSpecularAnisoGGXPS':zM,'lightSpecularBlinnPS':VM,'lightSheenPS':GM,'linearizeDepthPS':HM,'litForwardBackendPS':WM,'litForwardDeclarationPS':$M,'litForwardMainPS':XM,'litForwardPostCodePS':qM,'litForwardPreCodePS':jM,'litMainPS':YM,'litMainVS':KM,'litOtherMainPS':ZM,'litShaderArgsPS':QM,'litShaderCorePS':JM,'litShadowMainPS':eD,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':tD,'metalnessPS':sD,'metalnessModulatePS':rD,'morphPS':aD,'morphVS':nD,'msdfPS':iD,'msdfVS':oD,'normalVS':lD,'normalCoreVS':cD,'normalMapPS':hD,'opacityPS':dD,'opacityDitherPS':fD,'outputPS':uD,'outputAlphaPS':pD,'outputTex2DPS':mD,'sheenPS':_D,'sheenGlossPS':gD,'parallaxPS':SD,'pickPS':yD,'reflDirPS':vD,'reflDirAnisoPS':xD,'reflectionCCPS':TD,'reflectionCubePS':wD,'reflectionEnvHQPS':ED,'reflectionEnvPS':bD,'reflectionSpherePS':AD,'reflectionSheenPS':CD,'refractionCubePS':PD,'refractionDynamicPS':MD,'reprojectPS':DD,'reprojectVS':ID,'screenDepthPS':LD,'shadowCascadesPS':RD,'shadowEVSMPS':OD,'shadowPCF1PS':FD,'shadowPCF3PS':ND,'shadowPCF5PS':kD,'shadowSoftPS':UD,'skinBatchVS':BD,'skinVS':zD,'skyboxPS':VD,'skyboxVS':GD,'specularPS':HD,'sphericalPS':WD,'specularityFactorPS':$D,'spotPS':XD,'startNineSlicedPS':qD,'startNineSlicedTiledPS':jD,'stdDeclarationPS':YD,'stdFrontEndPS':KD,'TBNPS':ZD,'thicknessPS':QD,'tonemappingPS':JD,'tonemappingAcesPS':eI,'tonemappingAces2PS':tI,'tonemappingFilmicPS':sI,'tonemappingHejlPS':iI,'tonemappingLinearPS':rI,'tonemappingNeutralPS':aI,'tonemappingNonePS':nI,'transformVS':oI,'transformCoreVS':lI,'transformInstancingVS':cI,'transmissionPS':hI,'twoSidedLightingPS':dI,'uv0VS':fI,'uv1VS':uI,'uvTransformVS':pI,'uvTransformUniformsPS':mI,'viewDirPS':_I,'webgpuPS':cy,'webgpuVS':hy},Kr=class Kr extends me{constructor(_0x3eab0c){super(),h(this,'_batcher',null),h(this,'_destroyRe'+'quested',!(0x1*0x494+-0x123*-0x14+0x1*-0x1b4f)),h(this,'_inFrameUp'+'date',!(-0x2*-0x1174+-0x2*0x223+-0x1ea1)),h(this,'_libraries'+'Loaded',!(0x1*0x1da7+-0x2278+0x4d2)),h(this,'_fillMode',q_),h(this,'_resolutio'+'nMode',qA),h(this,'_allowResi'+'ze',!(0x85*0x11+-0x164b+0xd76)),h(this,'_skyboxAss'+'et',null),h(this,'_soundMana'+'ger'),h(this,'_visibilit'+'yChangeHan'+'dler'),h(this,'_entityInd'+'ex',{}),h(this,'_inTools',!(-0x3*0x106+-0x19ee+0x1d01)),h(this,'_scriptPre'+'fix',''),h(this,'_time',0x1*0x26bd+0x1369+-0x3a26),h(this,'enableBund'+'les',typeof TextDecoder<'u'),h(this,'frameReque'+'stId'),h(this,'timeScale',-0x48a+-0x3c*0x62+-0x1*-0x1b83),h(this,'maxDeltaTi'+'me',-0x1*0xde+0x72*0x2a+-0x11d6+0.1),h(this,'frame',-0xc*0x30e+0x208f+0x419),h(this,'frameGraph',new jA()),h(this,'renderer'),h(this,'scriptsOrd'+'er',[]),h(this,'stats'),h(this,'autoRender',!(-0x7dd+0x11ba+-0x65*0x19)),h(this,'renderNext'+'Frame',!(0x1*-0xf0b+0x19ce+-0x396*0x3)),h(this,'graphicsDe'+'vice'),h(this,'root'),h(this,'scene'),h(this,'lightmappe'+'r',null),h(this,'loader',new vn(this)),h(this,'assets'),h(this,'bundles'),h(this,'scenes',new dC(this)),h(this,'scripts',new oC(this)),h(this,'systems',new iC()),h(this,'i18n',new Sa(this)),h(this,'keyboard',null),h(this,'mouse',null),h(this,'touch',null),h(this,'gamepads',null),h(this,'elementInp'+'ut',null),h(this,'xr',null),((sn==null?void(0x1233+-0x1*0x174d+0x51a):sn['indexOf']('$'))<-0x1e96+0x20bc+-0x226*0x1&&w['log']('Powered\x20by'+'\x20PlayCanva'+'s\x20'+sn+'\x20'+cS),Kr['_applicati'+'ons'][_0x3eab0c['id']]=this,Wf(this),this['root']=new lt(),this['root']['_enabledIn'+'Hierarchy']=!(-0x91f+0x22e5+-0x19c6));}['init'](_0x145a98){const {assetPrefix:_0x1a67d5,batchManager:_0xc3f187,componentSystems:_0xd77184,elementInput:_0x175b6a,gamepads:_0x36b1f5,graphicsDevice:_0x5a0db2,keyboard:_0x3c383e,lightmapper:_0xe3276c,mouse:_0x1f2425,resourceHandlers:_0x59b492,scriptsOrder:_0x54e9f0,scriptPrefix:_0x315810,soundManager:_0x5c9b45,touch:_0x263eb2,xr:_0x5a74c6}=_0x145a98;w['assert'](_0x5a0db2,'The\x20applic'+'ation\x20cann'+'ot\x20be\x20crea'+'ted\x20withou'+'t\x20a\x20valid\x20'+'GraphicsDe'+'vice'),this['graphicsDe'+'vice']=_0x5a0db2,Ce['get'](_0x5a0db2,Fe)['add'](m2),Ce['get'](_0x5a0db2,it)['add'](gI),this['_initDefau'+'ltMaterial'](),this['_initProgr'+'amLibrary'](),this['stats']=new fC(_0x5a0db2),this['_soundMana'+'ger']=_0x5c9b45,this['scene']=new Et(_0x5a0db2),this['_registerS'+'ceneImmedi'+'ate'](this['scene']),this['assets']=new ln(this['loader']),_0x1a67d5&&(this['assets']['prefix']=_0x1a67d5),this['bundles']=new sC(this['assets']),this['scriptsOrd'+'er']=_0x54e9f0||[],this['defaultLay'+'erWorld']=new Ot({'name':'World','id':Ji}),this['defaultLay'+'erDepth']=new Ot({'name':'Depth','id':ps,'enabled':!(0xa25+-0x3e2+-0x642),'opaqueSortMode':Cc}),this['defaultLay'+'erSkybox']=new Ot({'name':'Skybox','id':wp,'opaqueSortMode':Cc}),this['defaultLay'+'erUi']=new Ot({'name':'UI','id':Sl,'transparentSortMode':fw}),this['defaultLay'+'erImmediat'+'e']=new Ot({'name':'Immediate','id':Ep,'opaqueSortMode':Cc});const _0x52d8fe=new Bf('default');_0x52d8fe['pushOpaque'](this['defaultLay'+'erWorld']),_0x52d8fe['pushOpaque'](this['defaultLay'+'erDepth']),_0x52d8fe['pushOpaque'](this['defaultLay'+'erSkybox']),_0x52d8fe['pushTransp'+'arent'](this['defaultLay'+'erWorld']),_0x52d8fe['pushOpaque'](this['defaultLay'+'erImmediat'+'e']),_0x52d8fe['pushTransp'+'arent'](this['defaultLay'+'erImmediat'+'e']),_0x52d8fe['pushTransp'+'arent'](this['defaultLay'+'erUi']),this['scene']['layers']=_0x52d8fe,Qr['createPlac'+'eholder'](_0x5a0db2),this['renderer']=new Jo(_0x5a0db2),this['renderer']['scene']=this['scene'],_0xe3276c&&(this['lightmappe'+'r']=new _0xe3276c(_0x5a0db2,this['root'],this['scene'],this['renderer'],this['assets']),this['once']('prerender',this['_firstBake'],this)),_0xc3f187&&(this['_batcher']=new _0xc3f187(_0x5a0db2,this['root'],this['scene']),this['once']('prerender',this['_firstBatc'+'h'],this)),this['keyboard']=_0x3c383e||null,this['mouse']=_0x1f2425||null,this['touch']=_0x263eb2||null,this['gamepads']=_0x36b1f5||null,_0x175b6a&&(this['elementInp'+'ut']=_0x175b6a,this['elementInp'+'ut']['app']=this),this['xr']=_0x5a74c6?new _0x5a74c6(this):null,this['elementInp'+'ut']&&this['elementInp'+'ut']['attachSele'+'ctEvents'](),this['_scriptPre'+'fix']=_0x315810||'',this['enableBund'+'les']&&this['loader']['addHandler']('bundle',new aC(this)),_0x59b492['forEach'](_0x4a849a=>{const _0x4e740f=new _0x4a849a(this);this['loader']['addHandler'](_0x4e740f['handlerTyp'+'e'],_0x4e740f);}),_0xd77184['forEach'](_0x5a622c=>{this['systems']['add'](new _0x5a622c(this));}),this['_visibilit'+'yChangeHan'+'dler']=this['onVisibili'+'tyChange']['bind'](this),typeof document<'u'&&(document['hidden']!==void(0x318+0x24e7+-0xd55*0x3)?(this['_hiddenAtt'+'r']='hidden',document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(0x1dd1+0x105b+-0x2e2b))):document['mozHidden']!==void(0x266f*-0x1+-0x55a+0x2bc9)?(this['_hiddenAtt'+'r']='mozHidden',document['addEventLi'+'stener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(-0xad*-0x3+0x23dd+-0x9f*0x3d))):document['msHidden']!==void(0x1158+-0x32*-0xc2+-0x373c)?(this['_hiddenAtt'+'r']='msHidden',document['addEventLi'+'stener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x14fd+0x10f3+-0x25ef))):document['webkitHidd'+'en']!==void(0x22eb+0xb*0x15c+-0x31df)&&(this['_hiddenAtt'+'r']='webkitHidd'+'en',document['addEventLi'+'stener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(-0x151*0x1d+0x1c9a+0x994)))),this['tick']=SI(this);}static['getApplica'+'tion'](_0x2a5bb9){return _0x2a5bb9?Kr['_applicati'+'ons'][_0x2a5bb9]:Ys();}['_initDefau'+'ltMaterial'](){const _0x4f4411=new Ut();_0x4f4411['name']='Default\x20Ma'+'terial',Bw(this['graphicsDe'+'vice'],_0x4f4411);}['_initProgr'+'amLibrary'](){const _0x46a59f=new dA(this['graphicsDe'+'vice'],new Ut());Cw(this['graphicsDe'+'vice'],_0x46a59f);}get['soundManag'+'er'](){return this['_soundMana'+'ger'];}get['batcher'](){return w['assert'](this['_batcher'],'BatchManag'+'er\x20has\x20not'+'\x20been\x20crea'+'ted\x20and\x20is'+'\x20required\x20'+'for\x20correc'+'t\x20function'+'ality.'),this['_batcher'];}get['fillMode'](){return this['_fillMode'];}get['resolution'+'Mode'](){return this['_resolutio'+'nMode'];}['configure'](_0x77783b,_0x50d716){ot['get'](_0x77783b,(_0x1d843d,_0x5dd575)=>{if(_0x1d843d){_0x50d716(_0x1d843d);return;}const _0x19a64a=_0x5dd575['applicatio'+'n_properti'+'es'],_0x266194=_0x5dd575['scenes'],_0x2f6a52=_0x5dd575['assets'];this['_parseAppl'+'icationPro'+'perties'](_0x19a64a,_0x4c9f2f=>{this['_parseScen'+'es'](_0x266194),this['_parseAsse'+'ts'](_0x2f6a52),_0x50d716(_0x4c9f2f||null);});});}['preload'](_0x18dc51){this['fire']('preload:st'+'art');const _0x33c367=this['assets']['list']({'preload':!(-0x18*0x171+0x57*0x58+0xc*0x64)});if(_0x33c367['length']===0x194e*0x1+0x1*-0x220a+-0x34*-0x2b){this['fire']('preload:en'+'d'),_0x18dc51();return;}let _0x471e09=-0xc05*0x3+0x1949*-0x1+0x3d58;const _0x3c625e=()=>{_0x471e09++,this['fire']('preload:pr'+'ogress',_0x471e09/_0x33c367['length']),_0x471e09===_0x33c367['length']&&(this['fire']('preload:en'+'d'),_0x18dc51());};_0x33c367['forEach'](_0x569409=>{_0x569409['loaded']?_0x3c625e():(_0x569409['once']('load',_0x3c625e),_0x569409['once']('error',_0x3c625e),this['assets']['load'](_0x569409));});}['_preloadSc'+'ripts'](_0x3e008f,_0xb8adb9){_0xb8adb9();}['_parseAppl'+'icationPro'+'perties'](_0x3fc6a5,_0xfa0a43){if(typeof _0x3fc6a5['maxAssetRe'+'tries']=='number'&&_0x3fc6a5['maxAssetRe'+'tries']>0x164d*-0x1+0x5*-0x581+0x31d2&&this['loader']['enableRetr'+'y'](_0x3fc6a5['maxAssetRe'+'tries']),_0x3fc6a5['useDeviceP'+'ixelRatio']||(_0x3fc6a5['useDeviceP'+'ixelRatio']=_0x3fc6a5['use_device'+'_pixel_rat'+'io']),_0x3fc6a5['resolution'+'Mode']||(_0x3fc6a5['resolution'+'Mode']=_0x3fc6a5['resolution'+'_mode']),_0x3fc6a5['fillMode']||(_0x3fc6a5['fillMode']=_0x3fc6a5['fill_mode']),this['_width']=_0x3fc6a5['width'],this['_height']=_0x3fc6a5['height'],_0x3fc6a5['useDeviceP'+'ixelRatio']&&(this['graphicsDe'+'vice']['maxPixelRa'+'tio']=window['devicePixe'+'lRatio']),this['setCanvasR'+'esolution'](_0x3fc6a5['resolution'+'Mode'],this['_width'],this['_height']),this['setCanvasF'+'illMode'](_0x3fc6a5['fillMode'],this['_width'],this['_height']),_0x3fc6a5['layers']&&_0x3fc6a5['layerOrder']){const _0x24bbaa=new Bf('applicatio'+'n'),_0x141514={};for(const _0x387317 in _0x3fc6a5['layers']){const _0x10a025=_0x3fc6a5['layers'][_0x387317];_0x10a025['id']=parseInt(_0x387317,-0x22c6+0x225e+0x72),_0x10a025['enabled']=_0x10a025['id']!==ps,_0x141514[_0x387317]=new Ot(_0x10a025);}for(let _0x57092f=0x1*-0x359+0x1bd0+-0x1*0x1877,_0x59433d=_0x3fc6a5['layerOrder']['length'];_0x57092f<_0x59433d;_0x57092f++){const _0x67f6b9=_0x3fc6a5['layerOrder'][_0x57092f],_0x483348=_0x141514[_0x67f6b9['layer']];_0x483348&&(_0x67f6b9['transparen'+'t']?_0x24bbaa['pushTransp'+'arent'](_0x483348):_0x24bbaa['pushOpaque'](_0x483348),_0x24bbaa['subLayerEn'+'abled'][_0x57092f]=_0x67f6b9['enabled']);}this['scene']['layers']=_0x24bbaa;}if(_0x3fc6a5['batchGroup'+'s']){const _0x4cc816=this['batcher'];if(_0x4cc816)for(let _0x194fdb=-0xef*0x1d+0x79b+0xe*0x164,_0x6e5322=_0x3fc6a5['batchGroup'+'s']['length'];_0x194fdb<_0x6e5322;_0x194fdb++){const _0x380df8=_0x3fc6a5['batchGroup'+'s'][_0x194fdb];_0x4cc816['addGroup'](_0x380df8['name'],_0x380df8['dynamic'],_0x380df8['maxAabbSiz'+'e'],_0x380df8['id'],_0x380df8['layers']);}}_0x3fc6a5['i18nAssets']&&(this['i18n']['assets']=_0x3fc6a5['i18nAssets']),this['_loadLibra'+'ries'](_0x3fc6a5['libraries'],_0xfa0a43);}['_loadLibra'+'ries'](_0x4d727,_0x1c3d9b){const _0x147b1a=_0x4d727['length'];let _0x1ac888=_0x147b1a;const _0x1cba5e=/^https?:\/\//;if(_0x147b1a){const _0x5ed70b=(_0xd0a0e2,_0x24af32)=>{_0x1ac888--,_0xd0a0e2?_0x1c3d9b(_0xd0a0e2):_0x1ac888===-0x2*-0x732+-0x88+0x1*-0xddc&&(this['onLibrarie'+'sLoaded'](),_0x1c3d9b(null));};for(let _0x3c24f9=0x1d4c+-0x2510+0x7c4;_0x3c24f9<_0x147b1a;++_0x3c24f9){let _0x4f9d1c=_0x4d727[_0x3c24f9];!_0x1cba5e['test'](_0x4f9d1c['toLowerCas'+'e']())&&this['_scriptPre'+'fix']&&(_0x4f9d1c=xe['join'](this['_scriptPre'+'fix'],_0x4f9d1c)),this['loader']['load'](_0x4f9d1c,'script',_0x5ed70b);}}else this['onLibrarie'+'sLoaded'](),_0x1c3d9b(null);}['_parseScen'+'es'](_0x1147d3){if(_0x1147d3){for(let _0xb3ceea=-0x1b75+-0x2b*-0x56+0x1*0xd03;_0xb3ceea<_0x1147d3['length'];_0xb3ceea++)this['scenes']['add'](_0x1147d3[_0xb3ceea]['name'],_0x1147d3[_0xb3ceea]['url']);}}['_parseAsse'+'ts'](_0x1a6576){const _0x1b05a7=[],_0xc6689a={},_0xcc204e={};for(let _0x10dac0=0x1d64+-0x3cb*0x6+-0x6a2;_0x10dac0<this['scriptsOrd'+'er']['length'];_0x10dac0++){const _0x143508=this['scriptsOrd'+'er'][_0x10dac0];_0x1a6576[_0x143508]&&(_0xc6689a[_0x143508]=!(0x1*-0x3b7+-0x2528+0x28df),_0x1b05a7['push'](_0x1a6576[_0x143508]));}if(this['enableBund'+'les']){for(const _0x408a39 in _0x1a6576)_0x1a6576[_0x408a39]['type']==='bundle'&&(_0xcc204e[_0x408a39]=!(-0x15c+-0x1f01+-0x1*-0x205d),_0x1b05a7['push'](_0x1a6576[_0x408a39]));}for(const _0xa59943 in _0x1a6576)_0xc6689a[_0xa59943]||_0xcc204e[_0xa59943]||_0x1b05a7['push'](_0x1a6576[_0xa59943]);for(let _0x305559=0x669+-0x201e+0x19b5*0x1;_0x305559<_0x1b05a7['length'];_0x305559++){const _0x4c0bfd=_0x1b05a7[_0x305559],_0x1bc846=new pe(_0x4c0bfd['name'],_0x4c0bfd['type'],_0x4c0bfd['file'],_0x4c0bfd['data']);if(_0x1bc846['id']=parseInt(_0x4c0bfd['id'],-0x15b2+-0x23*-0x79+-0x1*-0x531),_0x1bc846['preload']=_0x4c0bfd['preload']?_0x4c0bfd['preload']:!(0x1*0xa63+0x222d+-0x2c8f),_0x1bc846['loaded']=_0x4c0bfd['type']==='script'&&_0x4c0bfd['data']&&_0x4c0bfd['data']['loadingTyp'+'e']>0x1*-0xa85+-0x17*0x7f+-0x2*-0xaf7,_0x1bc846['tags']['add'](_0x4c0bfd['tags']),_0x4c0bfd['i18n']){for(const _0x4933ad in _0x4c0bfd['i18n'])_0x1bc846['addLocaliz'+'edAssetId'](_0x4933ad,_0x4c0bfd['i18n'][_0x4933ad]);}this['assets']['add'](_0x1bc846);}}['start'](){w['call'](()=>{w['assert'](!this['_alreadySt'+'arted'],'The\x20applic'+'ation\x20can\x20'+'be\x20started'+'\x20only\x20one\x20'+'time.'),this['_alreadySt'+'arted']=!(-0x3b*0x9f+0x11*0x1ac+0x839*0x1);}),this['frame']=-0x226a+0x30c+0x646*0x5,this['fire']('start',{'timestamp':de(),'target':this}),this['_libraries'+'Loaded']||this['onLibrarie'+'sLoaded'](),this['systems']['fire']('initialize',this['root']),this['fire']('initialize'),this['systems']['fire']('postInitia'+'lize',this['root']),this['systems']['fire']('postPostIn'+'itialize',this['root']),this['fire']('postinitia'+'lize'),this['tick']();}['inputUpdat'+'e'](_0x14f35c){this['controller']&&this['controller']['update'](_0x14f35c),this['mouse']&&this['mouse']['update'](),this['keyboard']&&this['keyboard']['update'](),this['gamepads']&&this['gamepads']['update']();}['update'](_0x39e4a7){this['frame']++,this['graphicsDe'+'vice']['update'](),this['stats']['frame']['updateStar'+'t']=de(),this['systems']['fire'](this['_inTools']?'toolsUpdat'+'e':'update',_0x39e4a7),this['systems']['fire']('animationU'+'pdate',_0x39e4a7),this['systems']['fire']('postUpdate',_0x39e4a7),this['fire']('update',_0x39e4a7),this['inputUpdat'+'e'](_0x39e4a7),this['stats']['frame']['updateTime']=de()-this['stats']['frame']['updateStar'+'t'];}['render'](){this['updateCanv'+'asSize'](),this['graphicsDe'+'vice']['frameStart'](),this['stats']['frame']['renderStar'+'t']=de(),this['fire']('prerender'),this['root']['syncHierar'+'chy'](),this['_batcher']&&this['_batcher']['updateAll'](),Jo['_skipRende'+'rCounter']=-0x2289+0x1*-0x1195+0x341e*0x1,this['renderComp'+'osition'](this['scene']['layers']),this['fire']('postrender'),this['stats']['frame']['renderTime']=de()-this['stats']['frame']['renderStar'+'t'],this['graphicsDe'+'vice']['frameEnd']();}['renderComp'+'osition'](_0x2d3618){Q['clearGpuMa'+'rkers'](),this['renderer']['update'](_0x2d3618),this['renderer']['buildFrame'+'Graph'](this['frameGraph'],_0x2d3618),this['frameGraph']['render'](this['graphicsDe'+'vice']);}['_fillFrame'+'StatsBasic'](_0x1bba2d,_0x4d9670,_0x1b5157){const _0x524cae=this['stats']['frame'];_0x524cae['dt']=_0x4d9670,_0x524cae['ms']=_0x1b5157,_0x1bba2d>_0x524cae['_timeToCou'+'ntFrames']?(_0x524cae['fps']=_0x524cae['_fpsAccum'],_0x524cae['_fpsAccum']=-0xe3*0x21+0x2608+0x8c5*-0x1,_0x524cae['_timeToCou'+'ntFrames']=_0x1bba2d+(-0x3a*-0x71+-0x524+-0xa3*0x1a)):_0x524cae['_fpsAccum']++,this['stats']['drawCalls']['total']=this['graphicsDe'+'vice']['_drawCalls'+'PerFrame'],this['graphicsDe'+'vice']['_drawCalls'+'PerFrame']=0x18df*-0x1+-0x1616+0xfa7*0x3;}['_fillFrame'+'Stats'](){let _0x4c0784=this['stats']['frame'];_0x4c0784['cameras']=this['renderer']['_camerasRe'+'ndered'],_0x4c0784['materials']=this['renderer']['_materialS'+'witches'],_0x4c0784['shaders']=this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame'],_0x4c0784['shadowMapU'+'pdates']=this['renderer']['_shadowMap'+'Updates'],_0x4c0784['shadowMapT'+'ime']=this['renderer']['_shadowMap'+'Time'],_0x4c0784['depthMapTi'+'me']=this['renderer']['_depthMapT'+'ime'],_0x4c0784['forwardTim'+'e']=this['renderer']['_forwardTi'+'me'];const _0x210e5f=this['graphicsDe'+'vice']['_primsPerF'+'rame'];_0x4c0784['triangles']=_0x210e5f[qs]/(-0x504+-0xa82+0x29*0x61)+Math['max'](_0x210e5f[vr]-(0xd*0x19b+-0x113*0x2+-0x3*0x63d),-0xe12+0x3*0x9d0+-0xf5e)+Math['max'](_0x210e5f[sa]-(-0x80a+-0x20b*0x10+0x28bc),-0x934+0x699+0x29b),_0x4c0784['cullTime']=this['renderer']['_cullTime'],_0x4c0784['sortTime']=this['renderer']['_sortTime'],_0x4c0784['skinTime']=this['renderer']['_skinTime'],_0x4c0784['morphTime']=this['renderer']['_morphTime'],_0x4c0784['lightClust'+'ers']=this['renderer']['_lightClus'+'ters'],_0x4c0784['lightClust'+'ersTime']=this['renderer']['_lightClus'+'tersTime'],_0x4c0784['otherPrimi'+'tives']=-0x1*0x2626+0x15f5+-0x33d*-0x5;for(let _0x3bd422=-0x927+-0x2*0x529+0x5*0x3e5;_0x3bd422<_0x210e5f['length'];_0x3bd422++)_0x3bd422<qs&&(_0x4c0784['otherPrimi'+'tives']+=_0x210e5f[_0x3bd422]),_0x210e5f[_0x3bd422]=0x2ef+0x25d3*0x1+-0x2f*0xde;this['renderer']['_camerasRe'+'ndered']=-0x1d68+-0x8db+0x2643,this['renderer']['_materialS'+'witches']=0x1*0x1df+0x2+-0x1e1,this['renderer']['_shadowMap'+'Updates']=0x42c*-0x7+-0xba3*-0x1+0x1191,this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame']=0x2446+0x2556+-0x499c,this['renderer']['_cullTime']=0x5b8+-0x1af8+0x1540,this['renderer']['_layerComp'+'ositionUpd'+'ateTime']=0x1*-0x26b9+-0x2*0x31c+-0x1*-0x2cf1,this['renderer']['_lightClus'+'tersTime']=-0x1*0x1b99+-0x2002+0x1*0x3b9b,this['renderer']['_sortTime']=0x1*-0x7b5+-0x173e+0x1ef3,this['renderer']['_skinTime']=-0x2e3*-0x1+0x4*-0x6e7+0x18b9,this['renderer']['_morphTime']=-0x956+-0xdcb+-0x1f*-0xbf,this['renderer']['_shadowMap'+'Time']=-0x5*0x2a2+0xa1+0xc89*0x1,this['renderer']['_depthMapT'+'ime']=-0x34f*0x4+-0x1bd1+0x290d,this['renderer']['_forwardTi'+'me']=0x1*-0x1aca+0x1a97+0x3*0x11,_0x4c0784=this['stats']['drawCalls'],_0x4c0784['forward']=this['renderer']['_forwardDr'+'awCalls'],_0x4c0784['culled']=this['renderer']['_numDrawCa'+'llsCulled'],_0x4c0784['depth']=0x1916+-0x15*0x173+-0x25*-0x25,_0x4c0784['shadow']=this['renderer']['_shadowDra'+'wCalls'],_0x4c0784['skinned']=this['renderer']['_skinDrawC'+'alls'],_0x4c0784['immediate']=0x2e*-0x1+0x173*0x1+0x1*-0x145,_0x4c0784['instanced']=-0x7*-0x506+-0x5fe+-0x1d2c,_0x4c0784['removedByI'+'nstancing']=0x1f*0xc9+-0x5c*-0xc+0x1ca7*-0x1,_0x4c0784['misc']=_0x4c0784['total']-(_0x4c0784['forward']+_0x4c0784['shadow']),this['renderer']['_depthDraw'+'Calls']=0xa1c+-0x4c1*-0x2+0x6*-0x345,this['renderer']['_shadowDra'+'wCalls']=-0x1ed7*0x1+-0x25*0xb2+-0x1*-0x3891,this['renderer']['_forwardDr'+'awCalls']=-0x2f2*0x4+-0x1a35*0x1+0x25fd,this['renderer']['_numDrawCa'+'llsCulled']=-0x21b8+-0x19*0xf7+-0x11*-0x367,this['renderer']['_skinDrawC'+'alls']=-0xc78+-0x416*-0x3+0x36,this['renderer']['_immediate'+'Rendered']=-0x1*0x9e1+-0x218e+0x2b6f,this['renderer']['_instanced'+'DrawCalls']=-0x2060*-0x1+-0xe9f+-0x11c1,this['stats']['misc']['renderTarg'+'etCreation'+'Time']=this['graphicsDe'+'vice']['renderTarg'+'etCreation'+'Time'],_0x4c0784=this['stats']['particles'],_0x4c0784['updatesPer'+'Frame']=_0x4c0784['_updatesPe'+'rFrame'],_0x4c0784['frameTime']=_0x4c0784['_frameTime'],_0x4c0784['_updatesPe'+'rFrame']=0xd1*0x2f+-0x26bf+-0x4*-0x18,_0x4c0784['_frameTime']=0x1b01+0x1*0x1184+0x3*-0xed7;}['setCanvasF'+'illMode'](_0x7287f3,_0x48e60b,_0x3de93e){this['_fillMode']=_0x7287f3,this['resizeCanv'+'as'](_0x48e60b,_0x3de93e);}['setCanvasR'+'esolution'](_0x115f70,_0x89a1e2,_0x2ad446){this['_resolutio'+'nMode']=_0x115f70,_0x115f70===j_&&_0x89a1e2===void(-0x102f+-0x75e+0x178d)&&(_0x89a1e2=this['graphicsDe'+'vice']['canvas']['clientWidt'+'h'],_0x2ad446=this['graphicsDe'+'vice']['canvas']['clientHeig'+'ht']),this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x89a1e2,_0x2ad446);}['isHidden'](){return document[this['_hiddenAtt'+'r']];}['onVisibili'+'tyChange'](){this['isHidden']()?this['_soundMana'+'ger']&&this['_soundMana'+'ger']['suspend']():this['_soundMana'+'ger']&&this['_soundMana'+'ger']['resume']();}['resizeCanv'+'as'](_0xede707,_0x10784b){if(!this['_allowResi'+'ze']||this['xr']&&this['xr']['session'])return;const _0x8eda27=window['innerWidth'],_0x5174f6=window['innerHeigh'+'t'];if(this['_fillMode']===q_){const _0x54f056=this['graphicsDe'+'vice']['canvas']['width']/this['graphicsDe'+'vice']['canvas']['height'],_0x55c527=_0x8eda27/_0x5174f6;_0x54f056>_0x55c527?(_0xede707=_0x8eda27,_0x10784b=_0xede707/_0x54f056):(_0x10784b=_0x5174f6,_0xede707=_0x10784b*_0x54f056);}else this['_fillMode']===XA&&(_0xede707=_0x8eda27,_0x10784b=_0x5174f6);return this['graphicsDe'+'vice']['canvas']['style']['width']=_0xede707+'px',this['graphicsDe'+'vice']['canvas']['style']['height']=_0x10784b+'px',this['updateCanv'+'asSize'](),{'width':_0xede707,'height':_0x10784b};}['updateCanv'+'asSize'](){var _0x268f92;if(!(!this['_allowResi'+'ze']||(_0x268f92=this['xr'])!=null&&_0x268f92['active'])&&this['_resolutio'+'nMode']===j_){const _0x45d29d=this['graphicsDe'+'vice']['canvas'];this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x45d29d['clientWidt'+'h'],_0x45d29d['clientHeig'+'ht']);}}['onLibrarie'+'sLoaded'](){this['_libraries'+'Loaded']=!(-0xff5+-0x1b60+0x1*0x2b55),this['systems']['rigidbody']&&this['systems']['rigidbody']['onLibraryL'+'oaded']();}['applyScene'+'Settings'](_0x2de19f){let _0x3988e8;if(this['systems']['rigidbody']&&typeof Ammo<'u'){const [_0x2701c8,_0x178dad,_0x3ac978]=_0x2de19f['physics']['gravity'];this['systems']['rigidbody']['gravity']['set'](_0x2701c8,_0x178dad,_0x3ac978);}this['scene']['applySetti'+'ngs'](_0x2de19f),_0x2de19f['render']['hasOwnProp'+'erty']('skybox')&&(_0x2de19f['render']['skybox']?(_0x3988e8=this['assets']['get'](_0x2de19f['render']['skybox']),_0x3988e8?this['setSkybox'](_0x3988e8):this['assets']['once']('add:'+_0x2de19f['render']['skybox'],this['setSkybox'],this)):this['setSkybox'](null));}['setAreaLig'+'htLuts'](_0x4fb319,_0x3ca574){_0x4fb319&&_0x3ca574?Qr['set'](this['graphicsDe'+'vice'],_0x4fb319,_0x3ca574):w['warn']('setAreaLig'+'htLuts:\x20LU'+'Ts\x20for\x20are'+'a\x20light\x20ar'+'e\x20not\x20vali'+'d');}['setSkybox'](_0x56a929){if(_0x56a929!==this['_skyboxAss'+'et']){const _0x1fb8a2=()=>{this['setSkybox'](null);},_0x81d2da=()=>{this['scene']['setSkybox'](this['_skyboxAss'+'et']?this['_skyboxAss'+'et']['resources']:null);};this['_skyboxAss'+'et']&&(this['assets']['off']('load:'+this['_skyboxAss'+'et']['id'],_0x81d2da,this),this['assets']['off']('remove:'+this['_skyboxAss'+'et']['id'],_0x1fb8a2,this),this['_skyboxAss'+'et']['off']('change',_0x81d2da,this)),this['_skyboxAss'+'et']=_0x56a929,this['_skyboxAss'+'et']&&(this['assets']['on']('load:'+this['_skyboxAss'+'et']['id'],_0x81d2da,this),this['assets']['once']('remove:'+this['_skyboxAss'+'et']['id'],_0x1fb8a2,this),this['_skyboxAss'+'et']['on']('change',_0x81d2da,this),this['scene']['skyboxMip']===-0x2e*0xd1+-0x1077+0x3605&&!this['_skyboxAss'+'et']['loadFaces']&&(this['_skyboxAss'+'et']['loadFaces']=!(-0xa92+-0x1003+0x551*0x5)),this['assets']['load'](this['_skyboxAss'+'et'])),_0x81d2da();}}['_firstBake'](){var _0xd07300;(_0xd07300=this['lightmappe'+'r'])==null||_0xd07300['bake'](null,this['scene']['lightmapMo'+'de']);}['_firstBatc'+'h'](){var _0x53f98d;(_0x53f98d=this['batcher'])==null||_0x53f98d['generate']();}['_processTi'+'mestamp'](_0x3d8077){return _0x3d8077;}['drawLine'](_0x2b6c6c,_0x354606,_0x280699,_0xac4904,_0x380bc9){this['scene']['drawLine'](_0x2b6c6c,_0x354606,_0x280699,_0xac4904,_0x380bc9);}['drawLines'](_0x583fdf,_0x39c264,_0x26b4c9=!(-0x15f0+0x24b9*0x1+-0x1*0xec9),_0x3ec2e2=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLines'](_0x583fdf,_0x39c264,_0x26b4c9,_0x3ec2e2);}['drawLineAr'+'rays'](_0x34e941,_0x5cf25c,_0x5e3169=!(0x2ef*-0xd+-0x21ed+0x1204*0x4),_0x24ae56=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLineAr'+'rays'](_0x34e941,_0x5cf25c,_0x5e3169,_0x24ae56);}['drawWireSp'+'here'](_0x494433,_0x34f75c,_0x138729=ie['WHITE'],_0x536757=-0x14*-0x155+-0x26b*-0xd+-0x39ff,_0x2fd118=!(0xc4e+-0x12e9*-0x2+0xc88*-0x4),_0x46229b=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawWireSp'+'here'](_0x494433,_0x34f75c,_0x138729,_0x536757,_0x2fd118,_0x46229b);}['drawWireAl'+'ignedBox'](_0x2b962e,_0xc55689,_0x5d3ed9=ie['WHITE'],_0x244751=!(-0x1*-0x1d9f+0x121e+-0x65*0x79),_0x115b00=this['scene']['defaultDra'+'wLayer'],_0xc6c551){this['scene']['immediate']['drawWireAl'+'ignedBox'](_0x2b962e,_0xc55689,_0x5d3ed9,_0x244751,_0x115b00,_0xc6c551);}['drawMeshIn'+'stance'](_0x2788aa,_0x494777=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](null,null,null,_0x2788aa,_0x494777);}['drawMesh'](_0x3739dc,_0x42885b,_0x176e5f,_0x1c3744=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x42885b,_0x176e5f,_0x3739dc,null,_0x1c3744);}['drawQuad'](_0x28e6dd,_0x296472,_0x82f497=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x296472,_0x28e6dd,this['scene']['immediate']['getQuadMes'+'h'](),null,_0x82f497);}['drawTextur'+'e'](_0x503dc2,_0x56eb25,_0x279871,_0x2c81a0,_0x3350d8,_0x475800,_0x3a61b3=this['scene']['defaultDra'+'wLayer'],_0x1cc4a5=!(0x11*0x74+-0x2040+0x188c)){if(_0x1cc4a5===!(0x2120+-0x3*-0xc8b+-0x2*0x2360)&&!this['graphicsDe'+'vice']['isWebGPU'])return;const _0x5ec1f6=new te();_0x5ec1f6['setTRS'](new D(_0x503dc2,_0x56eb25,-0xf9*0x21+-0x4b*-0x6b+0x30*0x4),le['IDENTITY'],new D(_0x279871,-_0x2c81a0,0x1ed9+-0x137a+-0x29*0x47)),_0x475800||(_0x475800=new Bn(),_0x475800['cull']=bt,_0x475800['setParamet'+'er']('colorMap',_0x3350d8),_0x475800['shaderDesc']=_0x1cc4a5?this['scene']['immediate']['getTexture'+'ShaderDesc'](_0x3350d8['encoding']):this['scene']['immediate']['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](),_0x475800['update']()),this['drawQuad'](_0x5ec1f6,_0x475800,_0x3a61b3);}['drawDepthT'+'exture'](_0x26f0b6,_0x1b40eb,_0x21dd3d,_0x32e87b,_0x24241e=this['scene']['defaultDra'+'wLayer']){const _0x5bbab4=new Bn();_0x5bbab4['cull']=bt,_0x5bbab4['shaderDesc']=this['scene']['immediate']['getDepthTe'+'xtureShade'+'rDesc'](),_0x5bbab4['update'](),this['drawTextur'+'e'](_0x26f0b6,_0x1b40eb,_0x21dd3d,_0x32e87b,null,_0x5bbab4,_0x24241e);}['destroy'](){var _0x1e4f96,_0x370453,_0x436bc1,_0x278012;if(this['_inFrameUp'+'date']){this['_destroyRe'+'quested']=!(0xf8d+-0x399*0x6+0x609);return;}const _0x306b24=this['graphicsDe'+'vice']['canvas']['id'];this['fire']('destroy',this),this['off']('librariesl'+'oaded'),typeof document<'u'&&(document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(0x3f9*0x7+0x1*-0xb96+-0x1038)),document['removeEven'+'tListener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(-0x12b7+0x963*-0x4+-0x454*-0xd)),document['removeEven'+'tListener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(-0xf92+0xd78+0x21b)),document['removeEven'+'tListener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(0xa2*0x7+-0x13f+-0x32e))),this['_visibilit'+'yChangeHan'+'dler']=null,this['root']['destroy'](),this['root']=null,this['mouse']&&(this['mouse']['off'](),this['mouse']['detach'](),this['mouse']=null),this['keyboard']&&(this['keyboard']['off'](),this['keyboard']['detach'](),this['keyboard']=null),this['touch']&&(this['touch']['off'](),this['touch']['detach'](),this['touch']=null),this['elementInp'+'ut']&&(this['elementInp'+'ut']['detach'](),this['elementInp'+'ut']=null),this['gamepads']&&(this['gamepads']['destroy'](),this['gamepads']=null),this['controller']&&(this['controller']=null),this['systems']['destroy'](),this['scene']['layers']&&this['scene']['layers']['destroy']();const _0x19161d=this['assets']['list']();for(let _0x559993=0x1c82+-0x2521*0x1+0x89f;_0x559993<_0x19161d['length'];_0x559993++)_0x19161d[_0x559993]['unload'](),_0x19161d[_0x559993]['off']();this['assets']['off'](),this['bundles']['destroy'](),this['bundles']=null,this['i18n']['destroy'](),this['i18n']=null;const _0x130ee4=this['loader']['getHandler']('script');_0x130ee4==null||_0x130ee4['clearCache'](),this['loader']['destroy'](),this['loader']=null,this['scene']['destroy'](),this['scene']=null,this['systems']=null,this['context']=null,this['scripts']['destroy'](),this['scripts']=null,this['scenes']['destroy'](),this['scenes']=null,(_0x1e4f96=this['lightmappe'+'r'])==null||_0x1e4f96['destroy'](),this['lightmappe'+'r']=null,this['_batcher']&&(this['_batcher']['destroy'](),this['_batcher']=null),this['_entityInd'+'ex']={},this['defaultLay'+'erDepth']['onDisable']=null,this['defaultLay'+'erDepth']['onEnable']=null,this['defaultLay'+'erDepth']=null,this['defaultLay'+'erWorld']=null,(_0x370453=this['xr'])==null||_0x370453['end'](),(_0x436bc1=this['xr'])==null||_0x436bc1['destroy'](),this['renderer']['destroy'](),this['renderer']=null,this['graphicsDe'+'vice']['destroy'](),this['graphicsDe'+'vice']=null,this['tick']=null,this['off'](),(_0x278012=this['_soundMana'+'ger'])==null||_0x278012['destroy'](),this['_soundMana'+'ger']=null,Kr['_applicati'+'ons'][_0x306b24]=null,Ys()===this&&Wf(null),Kr['cancelTick'](this);}static['cancelTick'](_0x4c80d8){_0x4c80d8['frameReque'+'stId']&&(window['cancelAnim'+'ationFrame'](_0x4c80d8['frameReque'+'stId']),_0x4c80d8['frameReque'+'stId']=void(0x13f*-0x6+-0xd*-0xf+-0x23d*-0x3));}['getEntityF'+'romIndex'](_0xe4ad83){return this['_entityInd'+'ex'][_0xe4ad83];}['_registerS'+'ceneImmedi'+'ate'](_0x252eeb){this['on']('postrender',_0x252eeb['immediate']['onPostRend'+'er'],_0x252eeb['immediate']);}};h(Kr,'_applicati'+'ons',{});let Ks=Kr;const SI=function(_0x5b7f01){const _0x2b5ee0=_0x5b7f01;return function(_0xb38a22,_0x11205a){var _0x5dca05,_0x4955a1,_0x26ee13,_0x4ac59a;if(!_0x2b5ee0['graphicsDe'+'vice'])return;_0x2b5ee0['frameReque'+'stId']&&((_0x4955a1=(_0x5dca05=_0x2b5ee0['xr'])==null?void(0x9b2+-0x26e3+0x2f*0x9f):_0x5dca05['session'])==null||_0x4955a1['cancelAnim'+'ationFrame'](_0x2b5ee0['frameReque'+'stId']),cancelAnimationFrame(_0x2b5ee0['frameReque'+'stId']),_0x2b5ee0['frameReque'+'stId']=null),_0x2b5ee0['_inFrameUp'+'date']=!(-0x1975+-0x8a1+0x2216*0x1),Wf(_0x2b5ee0);const _0x5c177d=_0x2b5ee0['_processTi'+'mestamp'](_0xb38a22)||de(),_0x1d7c1a=_0x5c177d-(_0x2b5ee0['_time']||_0x5c177d);let _0x40a9ee=_0x1d7c1a/(-0x2461*-0x1+0x1d7a+-0x3df3*0x1);if(_0x40a9ee=Y['clamp'](_0x40a9ee,-0x1*0x175a+0x9c6+-0xb*-0x13c,_0x2b5ee0['maxDeltaTi'+'me']),_0x40a9ee*=_0x2b5ee0['timeScale'],_0x2b5ee0['_time']=_0x5c177d,(_0x26ee13=_0x2b5ee0['xr'])!=null&&_0x26ee13['session']?_0x2b5ee0['frameReque'+'stId']=_0x2b5ee0['xr']['session']['requestAni'+'mationFram'+'e'](_0x2b5ee0['tick']):_0x2b5ee0['frameReque'+'stId']=Me['browser']||Me['worker']?requestAnimationFrame(_0x2b5ee0['tick']):null,_0x2b5ee0['graphicsDe'+'vice']['contextLos'+'t'])return;_0x2b5ee0['_fillFrame'+'StatsBasic'](_0x5c177d,_0x40a9ee,_0x1d7c1a),_0x2b5ee0['_fillFrame'+'Stats'](),_0x2b5ee0['fire']('frameupdat'+'e',_0x1d7c1a);let _0x2ea7c1=!(-0x1996+0x125*-0x11+0x2d0c);_0x11205a?(_0x2ea7c1=!((_0x4ac59a=_0x2b5ee0['xr'])!=null&&_0x4ac59a['update'](_0x11205a)),_0x2b5ee0['graphicsDe'+'vice']['defaultFra'+'mebuffer']=_0x11205a['session']['renderStat'+'e']['baseLayer']['framebuffe'+'r']):_0x2b5ee0['graphicsDe'+'vice']['defaultFra'+'mebuffer']=null,!_0x2ea7c1&&!_0x2b5ee0['stopSort']&&(w['trace'](l0,'----\x20Frame'+'\x20'+_0x2b5ee0['frame']),w['trace'](hd,'--\x20UpdateS'+'tart\x20'+de()['toFixed'](-0x54d+0x1aca+-0x157b)+'ms'),_0x2b5ee0['update'](_0x40a9ee),_0x2b5ee0['fire']('framerende'+'r'),(_0x2b5ee0['autoRender']||_0x2b5ee0['renderNext'+'Frame'])&&(w['trace'](hd,'--\x20RenderS'+'tart\x20'+de()['toFixed'](-0x1*0x927+0x2*0x116f+-0x19b5)+'ms'),_0x2b5ee0['render'](),_0x2b5ee0['renderNext'+'Frame']=!(-0x2*-0x9af+0x1*-0x187c+0x51f),w['trace'](hd,'--\x20RenderE'+'nd\x20'+de()['toFixed'](0xb83*-0x1+-0x2702*-0x1+0x1*-0x1b7d)+'ms')),_0x2b5ee0['fire']('frameend')),_0x2b5ee0['_inFrameUp'+'date']=!(0x210c+0x4*-0x254+0x2d*-0x87),_0x2b5ee0['_destroyRe'+'quested']&&_0x2b5ee0['destroy']();};};class yI{constructor(){h(this,'elementInp'+'ut'),h(this,'keyboard'),h(this,'mouse'),h(this,'touch'),h(this,'gamepads'),h(this,'scriptPref'+'ix'),h(this,'assetPrefi'+'x'),h(this,'scriptsOrd'+'er'),h(this,'soundManag'+'er'),h(this,'graphicsDe'+'vice'),h(this,'lightmappe'+'r'),h(this,'batchManag'+'er'),h(this,'xr'),h(this,'componentS'+'ystems',[]),h(this,'resourceHa'+'ndlers',[]);}}const oo=new Mu();class sv{constructor(_0x1708bb,_0x292325,_0x1a894a){this['scene']=_0x1708bb,this['light']=_0x292325,this['store'](),_0x292325['numCascade'+'s']=-0x18b1+-0xd67+-0x2619*-0x1,this['scene']['clusteredL'+'ightingEna'+'bled']&&!_0x1a894a['shadowsEna'+'bled']&&(_0x292325['castShadow'+'s']=!(-0x4*0x844+0xa85+0x168c)),_0x292325['type']!==ve&&(_0x292325['_node']['getWorldTr'+'ansform'](),_0x292325['getBoundin'+'gSphere'](oo),this['lightBound'+'s']=new De(),this['lightBound'+'s']['center']['copy'](oo['center']),this['lightBound'+'s']['halfExtent'+'s']['set'](oo['radius'],oo['radius'],oo['radius']));}['store'](){this['mask']=this['light']['mask'],this['shadowUpda'+'teMode']=this['light']['shadowUpda'+'teMode'],this['enabled']=this['light']['enabled'],this['intensity']=this['light']['intensity'],this['rotation']=this['light']['_node']['getLocalRo'+'tation']()['clone'](),this['numCascade'+'s']=this['light']['numCascade'+'s'],this['castShadow'+'s']=this['light']['_castShado'+'ws'];}['restore'](){const _0x4e27c6=this['light'];_0x4e27c6['mask']=this['mask'],_0x4e27c6['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x4e27c6['enabled']=this['enabled'],_0x4e27c6['intensity']=this['intensity'],_0x4e27c6['_node']['setLocalRo'+'tation'](this['rotation']),_0x4e27c6['numCascade'+'s']=this['numCascade'+'s'],_0x4e27c6['_castShado'+'ws']=this['castShadow'+'s'];}['startBake'](){this['light']['enabled']=!(0xd86+-0x2129+0x13a3),this['light']['_destroySh'+'adowMap'](),this['light']['beginFrame']();}['endBake'](_0x1fe02a){const _0x31f43b=this['light'];_0x31f43b['enabled']=!(0x4bf*0x5+-0x1707+-0x1*0xb3),_0x31f43b['shadowMap']&&(_0x31f43b['shadowMap']['cached']&&_0x1fe02a['add'](_0x31f43b,_0x31f43b['shadowMap']),_0x31f43b['shadowMap']=null);}}const ac=new J();class vI extends sv{constructor(_0x5814a3,_0x573374){super(_0x5814a3['scene'],_0x573374,_0x5814a3['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['type']===ve?this['light']['bakeNumSam'+'ples']:0x45*0x9+0x1*0xabf+-0xd2b;}['prepareVir'+'tualLight'](_0x76b072,_0x204c4a){const _0x43daf6=this['light'];if(_0x43daf6['_node']['setLocalRo'+'tation'](this['rotation']),_0x76b072>-0xc3e*0x1+0x1f3c+-0x12fe){const _0xdeb25a=_0x43daf6['bakeArea'];wl['circlePoin'+'tDetermini'+'stic'](ac,_0x76b072,_0x204c4a),ac['mulScalar'](_0xdeb25a*(-0xb74*-0x1+-0x2*-0xaf4+-0x215c+0.5)),_0x43daf6['_node']['rotateLoca'+'l'](ac['x'],-0x869+-0x3f*-0x8f+-0x1ac8,ac['y']);}_0x43daf6['_node']['getWorldTr'+'ansform']();const _0x33141a=0x1c42+-0xac1+-0x1*0x117f+0.20000000000000018,_0x6eea8b=Math['pow'](this['intensity'],_0x33141a);_0x43daf6['intensity']=Math['pow'](_0x6eea8b/_0x204c4a,(0xa9a+-0x1*0x6c9+-0x3d0)/_0x33141a);}}const J_=new D();class eg extends sv{constructor(_0x233f23){const _0x390abd=_0x233f23['scene'],_0x22b0a1=new lt('AmbientLig'+'ht');_0x22b0a1['addCompone'+'nt']('light',{'type':'directiona'+'l','affectDynamic':!(-0x41*-0x1d+-0xb73*0x2+0xf89),'affectLightmapped':!(-0x192b+0x3e6*-0x7+0x3476),'bake':!(-0x13*0x197+-0x1b44+-0x1*-0x3979),'bakeNumSamples':_0x390abd['ambientBak'+'eNumSample'+'s'],'castShadows':!(-0x2be*0x7+-0x855+0x30f*0x9),'normalOffsetBias':0.05,'shadowBias':0.2,'shadowDistance':0x1,'shadowResolution':0x800,'shadowType':Ws,'color':ie['WHITE'],'intensity':0x1,'bakeDir':!(0xbbb+0x5*-0x5ab+0x109d*0x1)}),super(_0x390abd,_0x22b0a1['light']['light'],_0x233f23['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['bakeNumSam'+'ples'];}['prepareVir'+'tualLight'](_0x5218f0,_0x56c69e){wl['spherePoin'+'tDetermini'+'stic'](J_,_0x5218f0,_0x56c69e,-0x40c+-0x2*0xb95+-0x1b*-0x102,this['scene']['ambientBak'+'eSpherePar'+'t']),this['light']['_node']['lookAt'](J_['mulScalar'](-(-0x179a+-0x53*-0x31+-0x2*-0x3dc))),this['light']['_node']['rotateLoca'+'l'](0xdd*0xc+0xc70+-0x1a*0xdd,-0xbba+-0x21*-0x29+0x671,-0x7f1+0x13*0x7+0x76c);const _0x2ce859=-0x25fa+0x74b*0x4+-0x8d*-0x10+0.20000000000000018,_0x24b8f3=(0x3*0x859+0x2*0x182+-0x1c0d)*Math['PI']*this['scene']['ambientBak'+'eSpherePar'+'t'],_0xb32c2e=Math['pow'](_0x24b8f3,_0x2ce859);this['light']['intensity']=Math['pow'](_0xb32c2e/_0x56c69e,(-0x19*0x113+0x5e*-0x28+0x4*0xa63)/_0x2ce859);}}class nc{constructor(_0x5cbb71,_0x91b9bd=null){this['node']=_0x5cbb71,this['component']=_0x5cbb71['render']||_0x5cbb71['model'],_0x91b9bd=_0x91b9bd||this['component']['meshInstan'+'ces'],this['store'](),this['meshInstan'+'ces']=_0x91b9bd,this['bounds']=null,this['renderTarg'+'ets']=[];}['store'](){this['castShadow'+'s']=this['component']['castShadow'+'s'];}['restore'](){this['component']['castShadow'+'s']=this['castShadow'+'s'];}}const xI='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afl'+'oat\x20normpd'+'f3(in\x20vec3'+'\x20v,\x20in\x20flo'+'at\x20sigma)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x200.39894'+'\x20*\x20exp(-0.'+'5\x20*\x20dot(v,'+'\x20v)\x20/\x20(sig'+'ma\x20*\x20sigma'+'))\x20/\x20sigma'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBM'+'(vec4\x20rgbm'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20color\x20='+'\x20(8.0\x20*\x20rg'+'bm.a)\x20*\x20rg'+'bm.rgb;\x0a\x20\x20'+'\x20\x20return\x20c'+'olor\x20*\x20col'+'or;\x0a}\x0a\x0aflo'+'at\x20saturat'+'e(float\x20x)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeRG'+'BM(vec3\x20co'+'lor)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20encoded'+';\x0a\x20\x20\x20\x20enco'+'ded.rgb\x20=\x20'+'pow(color.'+('rgb,\x20vec3('+'0.5));\x0a\x20\x20\x20'+'\x20encoded.r'+'gb\x20*=\x201.0\x20'+'/\x208.0;\x0a\x0a\x20\x20'+'\x20\x20encoded.'+'a\x20=\x20satura'+'te(\x20max(\x20m'+'ax(\x20encode'+'d.r,\x20encod'+'ed.g\x20),\x20ma'+'x(\x20encoded'+'.b,\x201.0\x20/\x20'+'255.0\x20)\x20)\x20'+');\x0a\x20\x20\x20\x20enc'+'oded.a\x20=\x20c'+'eil(encode'+'d.a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20enc'+'oded.rgb\x20/'+'=\x20encoded.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20encode'+'d;\x0a}\x0a\x0avec3'+'\x20decode(ve'+'c4\x20pixel)\x20'+'{\x0a\x20\x20\x20\x20#if\x20'+'HDR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20p'+'ixel.rgb;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eRGBM(pixe'+'l);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0abo'+'ol\x20isUsed('+'vec4\x20pixel'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20HDR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20any(great'+'erThan(pix'+'el.rgb,\x20ve'+'c3(0.0)));'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20pixe'+'l.a\x20>\x200.0;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0avaryi'+'ng\x20vec2\x20vU'+'v0;\x0aunifor'+'m\x20sampler2'+'D\x20source;\x0a'+'uniform\x20ve'+'c2\x20pixelOf'+'fset;\x0aunif'+'orm\x20vec2\x20s'+'igmas;\x0auni'+'form\x20float'+'\x20bZnorm;\x0au'+'niform\x20flo'+'at\x20kernel['+'{MSIZE}];\x0a'+'\x0avoid\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20ve'+'c4\x20pixel\x20='+'\x20texture2D'+'Lod(source'+',\x20vUv0,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20/'+'/\x20lightmap'+'\x20specific\x20'+'optimizati'+'on\x20-\x20skip\x20'+'pixels\x20tha'+'t\x20were\x20not'+'\x20baked\x0a\x20\x20\x20'+'\x20//\x20this\x20a'+'lso\x20allows'+'\x20dilate\x20fi'+'lter\x20that\x20'+'work\x20on\x20th'+'e\x20output\x20o'+'f\x20this\x20to\x20'+'work\x20corre'+'ctly,\x20as\x20i'+'t\x20depends\x20'+'on\x20.a\x20bein'+'g\x20zero\x0a\x20\x20\x20'+'\x20//\x20to\x20dil'+'ate,\x20which'+'\x20the\x20follo'+'wing\x20blur\x20'+'filter\x20wou'+'ld\x20otherwi'+'se\x20modify\x0a')+('\x20\x20\x20\x20if\x20(!i'+'sUsed(pixe'+'l))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20p'+'ixel;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20sigma\x20-'+'\x20controls\x20'+'blurriness'+'\x20based\x20on\x20'+'a\x20pixel\x20di'+'stance\x0a\x20\x20\x20'+'\x20float\x20sig'+'ma\x20=\x20sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'float\x20bSig'+'ma\x20=\x20sigma'+'s.y;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20pixel'+'Hdr\x20=\x20deco'+'de(pixel);'+'\x0a\x20\x20\x20\x20vec3\x20'+'accumulate'+'dHdr\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20float\x20ac'+'cumulatedF'+'actor\x20=\x200.'+'000001;\x20\x20/'+'/\x20avoid\x20di'+'vision\x20by\x20'+'zero\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20ou'+'t\x20the\x20texe'+'ls\x0a\x20\x20\x20\x20con'+'st\x20int\x20kSi'+'ze\x20=\x20({MSI'+'ZE}\x20-\x201)\x20/'+'\x202;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x20-kSize;\x20i'+'\x20<=\x20kSize;'+'\x20++i)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20j\x20=\x20-'+'kSize;\x20j\x20<'+'=\x20kSize;\x20+'+'+j)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sample'+'\x20the\x20pixel'+'\x20with\x20offs'+'et\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'coord\x20=\x20vU'+'v0\x20+\x20vec2('+'float(i),\x20'+'float(j))\x20'+'*\x20pixelOff'+'set;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20pix\x20=\x20te'+'xture2DLod'+'(source,\x20c'+'oord,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x20-\x20o'+'nly\x20use\x20ba'+'ked\x20pixels'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(isU'+'sed(pix))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20hdr\x20=\x20d'+'ecode(pix)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20bilatera'+'l\x20factors\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20factor\x20='+'\x20kernel[kS'+'ize\x20+\x20j]\x20*'+'\x20kernel[kS')+('ize\x20+\x20i];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fact'+'or\x20*=\x20norm'+'pdf3(hdr\x20-'+'\x20pixelHdr,'+'\x20bSigma)\x20*'+'\x20bZnorm;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ccumulate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20accu'+'mulatedHdr'+'\x20+=\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20+=\x20facto'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20finalHD'+'R\x20=\x20accumu'+'latedHdr\x20/'+'\x20accumulat'+'edFactor;\x0a'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(finalHDR,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'encodeRGBM'+'(finalHDR)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a'),TI='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0auniform\x20'+'sampler2D\x20'+'source;\x0aun'+'iform\x20vec2'+'\x20pixelOffs'+'et;\x0a\x0abool\x20'+'isUsed(vec'+'4\x20pixel)\x20{'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20an'+'y(greaterT'+'han(pixel.'+'rgb,\x20vec3('+'0.0)));\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20pixel.a'+'\x20>\x200.0;\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20c'+'\x20=\x20texture'+'2DLod(sour'+'ce,\x20vUv0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'c\x20=\x20isUsed'+'(c)\x20?\x20c\x20:\x20'+'texture2DL'+'od(source,'+'\x20vUv0\x20-\x20pi'+'xelOffset,'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20v'+'ec2(0,\x20-pi'+'xelOffset.'+'y),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(pix'+'elOffset.x'+',\x20-pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(-pixelOf'+'fset.x,\x200)'+',\x200.0);\x0a\x20\x20'+'\x20\x20c\x20=\x20isUs'+'ed(c)\x20?\x20c\x20'+':\x20texture2'+'DLod(sourc'+'e,\x20vUv0\x20+\x20'+'vec2(pixel'+'Offset.x,\x20'+'0),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(-pi'+'xelOffset.'+'x,\x20pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(0,\x20pixel'+'Offset.y),'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20p'+'ixelOffset'+',\x200.0);\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20c;\x0a'+'}\x0a',wI='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afn'+'\x20normpdf3('+'v:\x20vec3f,\x20'+'sigma:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x200.39894\x20'+'*\x20exp(-0.5'+'\x20*\x20dot(v,\x20'+'v)\x20/\x20(sigm'+'a\x20*\x20sigma)'+')\x20/\x20sigma;'+'\x0a}\x0a\x0afn\x20dec'+'odeRGBM(rg'+'bm:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20(8'+'.0\x20*\x20rgbm.'+'a)\x20*\x20rgbm.'+'rgb;\x0a\x20\x20\x20\x20r'+'eturn\x20colo'+'r\x20*\x20color;'+'\x0a}\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeRGBM'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'var\x20encode'+'d:\x20vec4f;\x0a'+'\x20\x20\x20\x20let\x20rg'+'b_processe'+('d\x20=\x20pow(co'+'lor.rgb,\x20v'+'ec3f(0.5))'+'\x20*\x20(1.0\x20/\x20'+'8.0);\x0a\x20\x20\x20\x20'+'encoded\x20=\x20'+'vec4f(rgb_'+'processed,'+'\x200.0);\x0a\x0a\x20\x20'+'\x20\x20let\x20max_'+'g_b\x20=\x20max('+'\x20encoded.g'+',\x20max(\x20enc'+'oded.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20);\x0a\x20\x20\x20\x20l'+'et\x20max_rgb'+'\x20=\x20max(\x20en'+'coded.r,\x20m'+'ax_g_b\x20);\x0a'+'\x20\x20\x20\x20encode'+'d.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20enco'+'ded.a\x20=\x20ce'+'il(encoded'+'.a\x20*\x20255.0'+')\x20/\x20255.0;'+'\x0a\x0a\x20\x20\x20\x20enco'+'ded\x20=\x20vec4'+'f(encoded.'+'rgb\x20/\x20enco'+'ded.a,\x20enc'+'oded.a);\x0a\x20'+'\x20\x20\x20return\x20'+'encoded;\x0a}'+'\x0a\x0afn\x20decod'+'e(pixel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20pixel.'+'rgb;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'decodeRGBM'+'(pixel);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a\x0afn\x20isUs'+'ed(pixel:\x20'+'vec4f)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0ava'+'r\x20source:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20sourceSam'+'pler:\x20samp'+'ler;\x0aunifo'+'rm\x20kernel:'+'\x20array<f32'+',\x20{MSIZE}>'+';\x0auniform\x20'+'pixelOffse'+'t:\x20vec2f;\x0a'+'uniform\x20si'+'gmas:\x20vec2'+'f;\x0auniform'+'\x20bZnorm:\x20f'+'32;\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20pixel\x20'+'=\x20textureS'+'ampleLevel'+'(source,\x20s'+'ourceSampl'+'er,\x20input.')+('vUv0,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'lightmap\x20s'+'pecific\x20op'+'timization'+'\x20-\x20skip\x20pi'+'xels\x20that\x20'+'were\x20not\x20b'+'aked\x0a\x20\x20\x20\x20/'+'/\x20this\x20als'+'o\x20allows\x20d'+'ilate\x20filt'+'er\x20that\x20wo'+'rk\x20on\x20the\x20'+'output\x20of\x20'+'this\x20to\x20wo'+'rk\x20correct'+'ly,\x20as\x20it\x20'+'depends\x20on'+'\x20.a\x20being\x20'+'zero\x0a\x20\x20\x20\x20/'+'/\x20to\x20dilat'+'e,\x20which\x20t'+'he\x20followi'+'ng\x20blur\x20fi'+'lter\x20would'+'\x20otherwise'+'\x20modify\x0a\x20\x20'+'\x20\x20if\x20(!isU'+'sed(pixel)'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20pix'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20range\x20sig'+'ma\x20-\x20contr'+'ols\x20blurri'+'ness\x20based'+'\x20on\x20a\x20pixe'+'l\x20distance'+'\x0a\x20\x20\x20\x20let\x20s'+'igma\x20=\x20uni'+'form.sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'let\x20bSigma'+'\x20=\x20uniform'+'.sigmas.y;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'pixelHdr\x20='+'\x20decode(pi'+'xel);\x0a\x20\x20\x20\x20'+'var\x20accumu'+'latedHdr\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20var'+'\x20accumulat'+'edFactor\x20='+'\x200.000001;'+'\x20\x20//\x20avoid'+'\x20division\x20'+'by\x20zero\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20out\x20the\x20t'+'exels\x0a\x20\x20\x20\x20'+'const\x20kSiz'+'e\x20=\x20({MSIZ'+'E}\x20-\x201)\x20/\x20'+'2;\x0a\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x20-kSiz'+'e;\x20i\x20<=\x20kS'+'ize;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(var\x20j:\x20i3'+'2\x20=\x20-kSize'+';\x20j\x20<=\x20kSi'+'ze;\x20j\x20=\x20j\x20'+'+\x201)\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20pixel\x20'+'with\x20offse'+'t\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20co'+'ord\x20=\x20inpu'+'t.vUv0\x20+\x20v'+'ec2f(f32(i')+('),\x20f32(j))'+'\x20*\x20uniform'+'.pixelOffs'+'et;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'pix\x20=\x20text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20co'+'ord,\x200.0);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x20-\x20on'+'ly\x20use\x20bak'+'ed\x20pixels\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(isUs'+'ed(pix))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20hdr\x20=\x20dec'+'ode(pix);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'bilateral\x20'+'factors\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20fa'+'ctor\x20=\x20uni'+'form.kerne'+'l[u32(kSiz'+'e\x20+\x20j)].el'+'ement\x20*\x20un'+'iform.kern'+'el[u32(kSi'+'ze\x20+\x20i)].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20factor'+'\x20=\x20factor\x20'+'*\x20normpdf3'+'(hdr\x20-\x20pix'+'elHdr,\x20bSi'+'gma)\x20*\x20uni'+'form.bZnor'+'m;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20accumul'+'ate\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'accumulate'+'dHdr\x20=\x20acc'+'umulatedHd'+'r\x20+\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20=\x20accumu'+'latedFacto'+'r\x20+\x20factor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20let'+'\x20finalHDR\x20'+'=\x20accumula'+'tedHdr\x20/\x20a'+'ccumulated'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20#if\x20HDR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalHDR,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20e'+'ncodeRGBM('+'finalHDR);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),EI='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0avar\x20so'+'urce:\x20text'+'ure_2d<f32'+'>;\x0avar\x20sou'+'rceSampler'+':\x20sampler;'+'\x0auniform\x20p'+'ixelOffset'+':\x20vec2f;\x0a\x0a'+'fn\x20isUsed('+'pixel:\x20vec'+'4f)\x20->\x20boo'+'l\x20{\x0a\x20\x20\x20\x20#i'+'fdef\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0a@fr'+'agment\x0afn\x20'+'fragmentMa'+'in(input:\x20'+'FragmentIn'+'put)\x20->\x20Fr'+'agmentOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20c:\x20vec4'+'f\x20=\x20textur'+'eSampleLev'+'el(source,'+'\x20sourceSam'+'pler,\x20inpu'+'t.vUv0,\x200.'+'0);\x0a\x20\x20\x20\x20c\x20'+'=\x20select(t'+'extureSamp'+'leLevel(so'+'urce,\x20sour'+'ceSampler,'+'\x20input.vUv'+'0\x20-\x20unifor'+'m.pixelOff'+'set,\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20-un'+'iform.pixe'+'lOffset.y)'+',\x200.0),\x20c,'+'\x20isUsed(c)'+');\x0a\x20\x20\x20\x20c\x20='+'\x20select(te'+'xtureSampl'+'eLevel(sou'+'rce,\x20sourc'+'eSampler,\x20'+'input.vUv0'+'\x20+\x20vec2f(u'+'niform.pix'+'elOffset.x'+',\x20-uniform'+'.pixelOffs'+'et.y),\x200.0'+'),\x20c,\x20isUs'+'ed(c));\x0a\x20\x20'+'\x20\x20c\x20=\x20sele'+'ct(texture'+'SampleLeve'+'l(source,\x20'+'sourceSamp'+'ler,\x20input'+'.vUv0\x20+\x20ve'+'c2f(-unifo'+'rm.pixelOf'+'fset.x,\x200.'+'0),\x200.0),\x20'+'c,\x20isUsed('+'c));\x0a\x20\x20\x20\x20c'+'\x20=\x20select('+'textureSam'+'pleLevel(s'+'ource,\x20sou'+'rceSampler'+',\x20input.vU'+'v0\x20+\x20vec2f'+'(uniform.p'+('ixelOffset'+'.x,\x200.0),\x20'+'0.0),\x20c,\x20i'+'sUsed(c));'+'\x0a\x20\x20\x20\x20c\x20=\x20s'+'elect(text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20in'+'put.vUv0\x20+'+'\x20vec2f(-un'+'iform.pixe'+'lOffset.x,'+'\x20uniform.p'+'ixelOffset'+'.y),\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20uni'+'form.pixel'+'Offset.y),'+'\x200.0),\x20c,\x20'+'isUsed(c))'+';\x0a\x20\x20\x20\x20c\x20=\x20'+'select(tex'+'tureSample'+'Level(sour'+'ce,\x20source'+'Sampler,\x20i'+'nput.vUv0\x20'+'+\x20uniform.'+'pixelOffse'+'t,\x200.0),\x20c'+',\x20isUsed(c'+'));\x0a\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20FragmentO'+'utput;\x0a\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20c;\x0a\x20'+'\x20\x20\x20return\x20'+'output;\x0a}\x0a'),tg=-0x23f3+-0x24fd+0x48ff,bI={'glslBilateralDeNoisePS':xI,'glslDilatePS':TI},AI={'wgslBilateralDeNoisePS':wI,'wgslDilatePS':EI};class CI{constructor(_0x243de4){h(this,'shaderDila'+'te',[]),h(this,'shaderDeno'+'ise',[]),(this['device']=_0x243de4,Ce['get'](this['device'],Fe)['add'](bI),Ce['get'](this['device'],it)['add'](AI),this['constantTe'+'xSource']=_0x243de4['scope']['resolve']('source'),this['constantPi'+'xelOffset']=_0x243de4['scope']['resolve']('pixelOffse'+'t'),this['pixelOffse'+'t']=new Float32Array(0x1a0+-0x10bd+0x229*0x7),this['sigmas']=null,this['constantSi'+'gmas']=null,this['kernel']=null);}['setSourceT'+'exture'](_0x2eb9b6){this['constantTe'+'xSource']['setValue'](_0x2eb9b6);}['prepare'](_0x3cf763,_0x58d8fd){this['pixelOffse'+'t'][0x59f+-0xb9b+0x5fc]=(0x1f7b+-0x4f0+-0x2*0xd45)/_0x3cf763,this['pixelOffse'+'t'][0x2b*0x3b+-0x2*-0xc85+-0x22f2]=(-0xe*0x83+0x1009+-0x8de)/_0x58d8fd,this['constantPi'+'xelOffset']['setValue'](this['pixelOffse'+'t']);}['prepareDen'+'oise'](_0x4ab87f,_0x697ccc,_0x11eba5){const _0x19499b=_0x11eba5?-0x1*0x1ec7+0x12d*0x10+0xbf7:0x2*0x61a+-0x1d1*-0x11+-0x2b14;if(!this['shaderDeno'+'ise'][_0x19499b]){const _0x2b3061=new Map();_0x2b3061['set']('{MSIZE}',0x7be+0x1*-0x25de+0x1e2f),_0x11eba5&&_0x2b3061['set']('HDR',''),this['shaderDeno'+'ise'][_0x19499b]=$t['createShad'+'er'](this['device'],{'uniqueName':'lmBilatera'+'lDeNoise-'+(_0x11eba5?'hdr':'rgbm'),'attributes':{'vertex_position':Pe},'vertexGLSL':Ce['get'](this['device'],Fe)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Ce['get'](this['device'],it)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':Ce['get'](this['device'],Fe)['get']('glslBilate'+'ralDeNoise'+'PS'),'fragmentWGSL':Ce['get'](this['device'],it)['get']('wgslBilate'+'ralDeNoise'+'PS'),'fragmentDefines':_0x2b3061}),this['sigmas']=new Float32Array(0xd05+-0x1*-0x2474+-0xbd*0x43),this['constantSi'+'gmas']=this['device']['scope']['resolve']('sigmas'),this['constantKe'+'rnel']=this['device']['scope']['resolve']('kernel[0]'),this['bZnorm']=this['device']['scope']['resolve']('bZnorm');}this['sigmas'][-0x29*0x6d+0x693+-0x571*-0x2]=_0x4ab87f,this['sigmas'][-0xaf3*-0x1+-0x1*-0xcdd+0x17*-0x109]=_0x697ccc,this['constantSi'+'gmas']['setValue'](this['sigmas']),this['evaluateDe'+'noiseUnifo'+'rms'](_0x4ab87f,_0x697ccc);}['getDenoise'](_0x4a189c){const _0x28b25c=_0x4a189c?-0x2193+0x1*0x1b9d+0x2*0x2fb:0x8cd*0x1+-0x5*0x1b+-0x1d*0x49;return this['shaderDeno'+'ise'][_0x28b25c];}['getDilate'](_0x105949,_0xe84a59){const _0x2ea3fd=_0xe84a59?0x449*-0x6+-0x2d7*-0x1+0x16df:-0x47c+-0x31d*-0x4+-0x7f7*0x1;if(!this['shaderDila'+'te'][_0x2ea3fd]){const _0x3aa269=_0xe84a59?'#define\x20HD'+'R\x0a':'';this['shaderDila'+'te'][_0x2ea3fd]=$t['createShad'+'er'](_0x105949,{'uniqueName':'lmDilate-'+(_0xe84a59?'hdr':'rgbm'),'attributes':{'vertex_position':Pe},'vertexGLSL':Ce['get'](this['device'],Fe)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Ce['get'](this['device'],it)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':_0x3aa269+Ce['get'](this['device'],Fe)['get']('glslDilate'+'PS'),'fragmentWGSL':_0x3aa269+Ce['get'](this['device'],it)['get']('wgslDilate'+'PS')});}return this['shaderDila'+'te'][_0x2ea3fd];}['evaluateDe'+'noiseUnifo'+'rms'](_0x4cf983,_0x26df7b){function _0x5439f1(_0x5f09bc,_0x1678db){return(0x3bf*-0x9+-0x16f5+0x38ac+0.39894)*Math['exp'](-(0x1ab1*0x1+-0x2*0xa4f+-0x1*0x613+0.5)*_0x5f09bc*_0x5f09bc/(_0x1678db*_0x1678db))/_0x1678db;}this['kernel']=this['kernel']||new Float32Array(tg);const _0xd4e332=this['kernel'],_0x34bc71=Math['floor']((tg-(0x18*0x3d+0x1d*0x111+-0x24a4))/(-0x20c0+0x395*0x6+0xb44));for(let _0x37637c=0x1e27+-0x7*-0x4e1+-0x2*0x2027;_0x37637c<=_0x34bc71;++_0x37637c){const _0x50b45b=_0x5439f1(_0x37637c,_0x4cf983);_0xd4e332[_0x34bc71+_0x37637c]=_0x50b45b,_0xd4e332[_0x34bc71-_0x37637c]=_0x50b45b;}this['constantKe'+'rnel']['setValue'](this['kernel']);const _0x549702=(0x2429+0x9b3*0x1+-0x2b*0x111)/_0x5439f1(0xfc3+-0x1c14+-0x1*-0xc51,_0x26df7b);this['bZnorm']['setValue'](_0x549702);}}class PI extends ys{constructor(_0x1abae1,_0x53ff1b,_0x278fb4,_0x22b43d,_0x3a3fd1,_0x502091){super(_0x1abae1),h(this,'viewBindGr'+'oups',[]),(this['renderer']=_0x53ff1b,this['camera']=_0x278fb4,this['worldClust'+'ers']=_0x22b43d,this['receivers']=_0x3a3fd1,this['lightArray']=_0x502091);}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x4b578e=>{_0x4b578e['defaultUni'+'formBuffer']['destroy'](),_0x4b578e['destroy']();}),this['viewBindGr'+'oups']['length']=0xae0*0x3+0x117a+-0x6a*0x79;}['execute'](){const _0x3d9367=this['device'];Q['pushGpuMar'+'ker'](_0x3d9367,'Lightmappe'+'r');const {renderer:_0x1663fc,camera:_0x2a04cc,receivers:_0xa3b134,renderTarget:_0x2f0390,worldClusters:_0x5b0fc9,lightArray:_0x47dcfa}=this;_0x1663fc['renderForw'+'ardLayer'](_0x2a04cc,_0x2f0390,null,void(0x1a5*-0xd+0x1*0x1885+-0x324),xa,this['viewBindGr'+'oups'],{'meshInstances':_0xa3b134,'splitLights':_0x47dcfa,'lightClusters':_0x5b0fc9}),Q['popGpuMark'+'er'](_0x3d9367);}}const MI=0x1d*0x2e+0x5*0x2a9+-0xa83,DI=0x33a*0x1+0xa13+-0xd4d*0x1,II=0xdcd*0x1+0xc1a+-0x19e6,oc=new D();class LI{constructor(_0x56ab33,_0x2b0d4a,_0x5e206c,_0x1cf95b,_0x210265){this['device']=_0x56ab33,this['root']=_0x2b0d4a,this['scene']=_0x5e206c,this['renderer']=_0x1cf95b,this['assets']=_0x210265,this['shadowMapC'+'ache']=_0x1cf95b['shadowMapC'+'ache'],this['_tempSet']=new Set(),this['_initCalle'+'d']=!(-0x22a3+-0x1*0x2015+0x227*0x1f),this['passMateri'+'als']=[],this['ambientAOM'+'aterial']=null,this['fog']='',this['ambientLig'+'ht']=new ie(),this['renderTarg'+'ets']=new Map(),this['stats']={'renderPasses':0x0,'lightmapCount':0x0,'totalRenderTime':0x0,'forwardTime':0x0,'fboTime':0x0,'shadowMapTime':0x0,'compileTime':0x0,'shadersLinked':0x0};}['destroy'](){var _0x2a9dba;Bi['decRef'](this['blackTex']),this['blackTex']=null,Bi['destroy'](),this['device']=null,this['root']=null,this['scene']=null,this['renderer']=null,this['assets']=null,(_0x2a9dba=this['camera'])==null||_0x2a9dba['destroy'](),this['camera']=null;}['initBake'](_0x5b18ca){if(this['bakeHDR']=this['scene']['lightmapPi'+'xelFormat']!==Ne,!this['_initCalle'+'d']){this['_initCalle'+'d']=!(-0xc*-0x281+0x2244+-0x4050),this['lightmapFi'+'lters']=new CI(_0x5b18ca),this['constantBa'+'keDir']=_0x5b18ca['scope']['resolve']('bakeDir'),this['materials']=[],this['blackTex']=new _e(this['device'],{'width':0x4,'height':0x4,'format':Ne,'type':Ki,'name':'lightmapBl'+'ack'}),Bi['incRef'](this['blackTex']);const _0x1146d1=new Tl();_0x1146d1['clearColor']['set'](0x118b+-0x8f*-0x13+0x1c28*-0x1,0x3*-0x7b7+0x1a2a+-0x305,0x2077+0x745*0x5+0x1134*-0x4,0x1*-0x10b9+-0x65*-0x53+-0x1006),_0x1146d1['clearColor'+'Buffer']=!(-0x1*-0x1616+-0x1478+-0x19e),_0x1146d1['clearDepth'+'Buffer']=!(0xd*0x1b7+0x1*0x4fe+0x123*-0x18),_0x1146d1['clearStenc'+'ilBuffer']=!(0x1135+0x6f*-0x4d+0x102f),_0x1146d1['frustumCul'+'ling']=!(0xac0+-0xe*-0xf2+-0x17fb),_0x1146d1['projection']=gn,_0x1146d1['aspectRati'+'o']=-0x2439+-0x1*0x7d3+0x2c0d,_0x1146d1['node']=new Ie(),this['camera']=_0x1146d1,this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=yl,this['camera']['shaderPara'+'ms']['toneMappin'+'g']=Mp;}if(this['scene']['clusteredL'+'ightingEna'+'bled']){const _0x469687=new qy(_0x5b18ca['supportsAr'+'eaLights'],_0x5b18ca['maxTexture'+'Size'],()=>{});this['lightingPa'+'rams']=_0x469687;const _0x584fb9=this['scene']['lighting'];_0x469687['shadowsEna'+'bled']=_0x584fb9['shadowsEna'+'bled'],_0x469687['shadowAtla'+'sResolutio'+'n']=_0x584fb9['shadowAtla'+'sResolutio'+'n'],_0x469687['cookiesEna'+'bled']=_0x584fb9['cookiesEna'+'bled'],_0x469687['cookieAtla'+'sResolutio'+'n']=_0x584fb9['cookieAtla'+'sResolutio'+'n'],_0x469687['areaLights'+'Enabled']=_0x584fb9['areaLights'+'Enabled'],_0x469687['cells']=new D(-0x15b+-0xc+0x16a,-0x653*-0x2+0x68b+-0x132e,0xa*0x55+-0x1683*0x1+0x1334),_0x469687['maxLightsP'+'erCell']=0xa25+-0x26c2+0x1*0x1ca1,this['worldClust'+'ers']=new kf(_0x5b18ca),this['worldClust'+'ers']['name']='ClusterLig'+'htmapper';}}['finishBake'](_0x2a4c13){this['materials']=[];function _0x3be773(_0x749f4c){Bi['decRef'](_0x749f4c['colorBuffe'+'r']),_0x749f4c['destroy']();}this['renderTarg'+'ets']['forEach'](_0xc6a459=>{_0x3be773(_0xc6a459);}),this['renderTarg'+'ets']['clear'](),_0x2a4c13['forEach'](_0xe9da4d=>{_0xe9da4d['renderTarg'+'ets']['forEach'](_0x367a9d=>{_0x3be773(_0x367a9d);}),_0xe9da4d['renderTarg'+'ets']['length']=-0x10b*0x1+0x805*0x1+-0x2f*0x26;}),this['ambientAOM'+'aterial']=null,this['worldClust'+'ers']&&(this['worldClust'+'ers']['destroy'](),this['worldClust'+'ers']=null);}['createMate'+'rialForPas'+'s'](_0x5bf526,_0x16bdb5,_0x3eab88){const _0x26c6b5=new Ut();return _0x26c6b5['name']='lmMaterial'+'-pass:'+_0x16bdb5+'-ambient:'+_0x3eab88,_0x26c6b5['setDefine']('UV1LAYOUT',''),_0x26c6b5['setDefine']('LIT_LIGHTM'+'AP_BAKING',''),_0x16bdb5===DI?(_0x26c6b5['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'COLOR',''),_0x3eab88?_0x26c6b5['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'ADD_AMBIEN'+'T',''):_0x26c6b5['ambient']=new ie(0x1aa6+0x329*-0x8+-0x15e,0x1d40+0xa9*0x23+-0x345b*0x1,-0x247*0x6+0x25a8*0x1+-0x4a*0x53),this['bakeHDR']||_0x26c6b5['setDefine']('LIGHTMAP_R'+'GBM',''),_0x26c6b5['lightMap']=this['blackTex']):(_0x26c6b5['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'DIR',''),_0x26c6b5['setDefine']('STD_LIGHTM'+'AP_DIR','')),_0x26c6b5['cull']=bt,_0x26c6b5['forceUv1']=!(-0xcb6+0x26ce+-0x343*0x8),_0x26c6b5['update'](),_0x26c6b5;}['createMate'+'rials'](_0x3f3442,_0x27d078,_0x172a15){for(let _0x57328b=0x6c7*0x2+0x1820+0xd*-0x2e6;_0x57328b<_0x172a15;_0x57328b++)this['passMateri'+'als'][_0x57328b]||(this['passMateri'+'als'][_0x57328b]=this['createMate'+'rialForPas'+'s'](_0x27d078,_0x57328b,!(-0x240+-0xa*0x3b3+0x11*0x24f)));this['ambientAOM'+'aterial']||(this['ambientAOM'+'aterial']=this['createMate'+'rialForPas'+'s'](_0x27d078,0x2e7*0x3+0x733+-0x3fa*0x4,!(0xc17*-0x1+0xf80+0x61*-0x9)),this['ambientAOM'+'aterial']['onUpdateSh'+'ader']=function(_0x131cd3){return _0x131cd3['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(-0x7*-0x499+0x2c5*0x7+0x75e*-0x7),_0x131cd3['litOptions']['separateAm'+'bient']=!(-0x5f0*0x3+0x1d60+0xa*-0x128),_0x131cd3;});}['createText'+'ure'](_0x519c4c,_0x29dc29){return new _e(this['device'],{'profilerHint':US,'width':_0x519c4c,'height':_0x519c4c,'format':this['scene']['lightmapPi'+'xelFormat'],'mipmaps':!(0x1*0x120e+0x21a+-0x1427),'type':this['bakeHDR']?Ms:Ki,'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x29dc29});}['collectMod'+'els'](_0x1bedea,_0x5e8711,_0x3c6ff7){var _0x4b1292,_0x4a05c6,_0x3a8106;if(!_0x1bedea['enabled'])return;let _0x53ee48;if((_0x4b1292=_0x1bedea['model'])!=null&&_0x4b1292['model']&&((_0x4a05c6=_0x1bedea['model'])!=null&&_0x4a05c6['enabled'])&&(_0x3c6ff7&&_0x3c6ff7['push'](new nc(_0x1bedea)),_0x1bedea['model']['lightmappe'+'d']&&_0x5e8711&&(_0x53ee48=_0x1bedea['model']['model']['meshInstan'+'ces'])),(_0x3a8106=_0x1bedea['render'])!=null&&_0x3a8106['enabled']&&(_0x3c6ff7&&_0x3c6ff7['push'](new nc(_0x1bedea)),_0x1bedea['render']['lightmappe'+'d']&&_0x5e8711&&(_0x53ee48=_0x1bedea['render']['meshInstan'+'ces'])),_0x53ee48){let _0x312b3c=!(-0x1*-0x1b29+-0x296*0x5+-0xe3b);for(let _0x119129=0x64b*-0x1+0x1421+0x7*-0x1fa;_0x119129<_0x53ee48['length'];_0x119129++)if(!_0x53ee48[_0x119129]['mesh']['vertexBuff'+'er']['format']['hasUv1']){w['log']('Lightmappe'+'r\x20-\x20node\x20['+_0x1bedea['name']+(']\x20contains'+'\x20meshes\x20wi'+'thout\x20requ'+'ired\x20uv1,\x20'+'excluding\x20'+'it\x20from\x20ba'+'king.')),_0x312b3c=!(-0x1*-0x18cc+-0x391*0x4+-0xa87);break;}if(_0x312b3c){const _0x4e7760=[];for(let _0x3a4016=0x15d*-0x1a+-0x1cf+0x2541;_0x3a4016<_0x53ee48['length'];_0x3a4016++){const _0x2f39c5=_0x53ee48[_0x3a4016]['mesh'];this['_tempSet']['has'](_0x2f39c5)?_0x5e8711['push'](new nc(_0x1bedea,[_0x53ee48[_0x3a4016]])):_0x4e7760['push'](_0x53ee48[_0x3a4016]),this['_tempSet']['add'](_0x2f39c5);}this['_tempSet']['clear'](),_0x4e7760['length']>0x72e*-0x4+-0x26b9*-0x1+0x1*-0xa01&&_0x5e8711['push'](new nc(_0x1bedea,_0x4e7760));}}for(let _0x5d92b8=0x6*0x638+-0xcfb+-0x1855;_0x5d92b8<_0x1bedea['_children']['length'];_0x5d92b8++)this['collectMod'+'els'](_0x1bedea['_children'][_0x5d92b8],_0x5e8711,_0x3c6ff7);}['prepareSha'+'dowCasters'](_0x21e712){const _0x1b251f=[];for(let _0x1114a8=-0x3*0x965+-0xa96+0x5*0x7c1;_0x1114a8<_0x21e712['length'];_0x1114a8++){const _0xaba448=_0x21e712[_0x1114a8]['component'];if(_0xaba448['castShadow'+'s']=_0xaba448['castShadow'+'sLightmap'],_0xaba448['castShadow'+'sLightmap']){const _0x4d3223=_0x21e712[_0x1114a8]['meshInstan'+'ces'];for(let _0x565ea6=0x26a4+-0xea6+-0x17fe;_0x565ea6<_0x4d3223['length'];_0x565ea6++)_0x4d3223[_0x565ea6]['visibleThi'+'sFrame']=!(0xf6b+0x1e1+-0x1*0x114c),_0x1b251f['push'](_0x4d3223[_0x565ea6]);}}return _0x1b251f;}['updateTran'+'sforms'](_0x57ba95){for(let _0x2791c7=0x9*0x51+-0x1*0x5ad+0x2d4;_0x2791c7<_0x57ba95['length'];_0x2791c7++){const _0x2e1f36=_0x57ba95[_0x2791c7]['meshInstan'+'ces'];for(let _0x2e0f6a=-0x107*0x25+-0x2*-0x4df+0x1c45;_0x2e0f6a<_0x2e1f36['length'];_0x2e0f6a++)_0x2e1f36[_0x2e0f6a]['node']['getWorldTr'+'ansform']();}}['calculateL'+'ightmapSiz'+'e'](_0x509366){let _0x151907;const _0xeb95cf=this['scene']['lightmapSi'+'zeMultipli'+'er']||0x2061+0x2446+-0x4497,_0x7020e5=oc;let _0xae2ebb,_0x34066d;_0x509366['model']?(_0x34066d=_0x509366['model']['lightmapSi'+'zeMultipli'+'er'],_0x509366['model']['asset']?(_0x151907=this['assets']['get'](_0x509366['model']['asset'])['data'],_0x151907['area']&&(_0xae2ebb=_0x151907['area'])):_0x509366['model']['_area']&&(_0x151907=_0x509366['model'],_0x151907['_area']&&(_0xae2ebb=_0x151907['_area']))):_0x509366['render']&&(_0x34066d=_0x509366['render']['lightmapSi'+'zeMultipli'+'er'],_0x509366['render']['type']!=='asset'&&_0x509366['render']['_area']&&(_0x151907=_0x509366['render'],_0x151907['_area']&&(_0xae2ebb=_0x151907['_area'])));const _0x2ae9bb={'x':0x1,'y':0x1,'z':0x1,'uv':0x1};_0xae2ebb&&(_0x2ae9bb['x']=_0xae2ebb['x'],_0x2ae9bb['y']=_0xae2ebb['y'],_0x2ae9bb['z']=_0xae2ebb['z'],_0x2ae9bb['uv']=_0xae2ebb['uv']);const _0x14e76f=_0x34066d||-0x2*-0x38f+-0x171f+0x1002;_0x2ae9bb['x']*=_0x14e76f,_0x2ae9bb['y']*=_0x14e76f,_0x2ae9bb['z']*=_0x14e76f;const _0x401e5a=_0x509366['render']||_0x509366['model'],_0x1a8d4f=this['computeNod'+'eBounds'](_0x401e5a['meshInstan'+'ces']);_0x7020e5['copy'](_0x1a8d4f['halfExtent'+'s']);let _0x33cb4e=_0x2ae9bb['x']*_0x7020e5['y']*_0x7020e5['z']+_0x2ae9bb['y']*_0x7020e5['x']*_0x7020e5['z']+_0x2ae9bb['z']*_0x7020e5['x']*_0x7020e5['y'];return _0x33cb4e/=_0x2ae9bb['uv'],_0x33cb4e=Math['sqrt'](_0x33cb4e),Math['min'](Y['nextPowerO'+'fTwo'](_0x33cb4e*_0xeb95cf),this['scene']['lightmapMa'+'xResolutio'+'n']||MI);}['setLightma'+'pping'](_0x2aa7ee,_0x395fc2,_0x82b7fc,_0x1921ca){for(let _0x4ab5be=-0x2*0x145+0x8fe+-0x674;_0x4ab5be<_0x2aa7ee['length'];_0x4ab5be++){const _0x58cd69=_0x2aa7ee[_0x4ab5be],_0x2eeae4=_0x58cd69['meshInstan'+'ces'];for(let _0x2019bc=-0x1869*-0x1+-0x145a+0x1*-0x40f;_0x2019bc<_0x2eeae4['length'];_0x2019bc++){const _0x2cf251=_0x2eeae4[_0x2019bc];if(_0x2cf251['setLightma'+'pped'](_0x395fc2),_0x395fc2){_0x1921ca&&(_0x2cf251['_shaderDef'+'s']|=_0x1921ca),_0x2cf251['mask']=di;for(let _0x140045=-0x5b1+0x5dd*-0x1+0xb8e;_0x140045<_0x82b7fc;_0x140045++){const _0x4ed739=_0x58cd69['renderTarg'+'ets'][_0x140045]['colorBuffe'+'r'];_0x4ed739['minFilter']=vt,_0x4ed739['magFilter']=vt,_0x2cf251['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][_0x140045],_0x4ed739);}}}}}['bake'](_0x5d134c,_0x37dc23=Ac){const _0x8cf9e8=this['device'],_0x397f75=de();this['scene']['_updateSky'+'Mesh'](),_0x8cf9e8['fire']('lightmappe'+'r:start',{'timestamp':_0x397f75,'target':this}),this['stats']['renderPass'+'es']=-0x3d*-0x31+0xd*0x1+0x5dd*-0x2,this['stats']['shadowMapT'+'ime']=-0x1*0x120a+-0x1484+-0x46*-0x8d,this['stats']['forwardTim'+'e']=-0x518*0x4+-0x1f6d+-0x1*-0x33cd;const _0x39d15e=_0x8cf9e8['_shaderSta'+'ts']['linked'],_0x555e7a=_0x8cf9e8['_renderTar'+'getCreatio'+'nTime'],_0x5bb17d=_0x8cf9e8['_shaderSta'+'ts']['compileTim'+'e'],_0x2309c0=[],_0x3b9c51=[];if(_0x5d134c){for(let _0x5a80d4=0x9*0x15b+0x1*-0xdf3+0x70*0x4;_0x5a80d4<_0x5d134c['length'];_0x5a80d4++)this['collectMod'+'els'](_0x5d134c[_0x5a80d4],_0x2309c0,null);this['collectMod'+'els'](this['root'],null,_0x3b9c51);}else this['collectMod'+'els'](this['root'],_0x2309c0,_0x3b9c51);if(Q['pushGpuMar'+'ker'](this['device'],'LMBake'),_0x2309c0['length']>-0x1901+0x17f7+0x1*0x10a){this['renderer']['shadowRend'+'erer']['frameUpdat'+'e']();const _0x163635=_0x37dc23===Ac?-0x1df3+-0x1617+0x340c:0x2260+0x2236+0x4495*-0x1;this['setLightma'+'pping'](_0x2309c0,!(-0x6e*-0x31+0x1af9+-0x3006),_0x163635),this['initBake'](_0x8cf9e8),this['bakeIntern'+'al'](_0x163635,_0x2309c0,_0x3b9c51);let _0x2844fc=Ff;_0x37dc23===Ac&&(_0x2844fc|=Iy),this['scene']['ambientBak'+'e']&&(_0x2844fc|=Ly),this['setLightma'+'pping'](_0x2309c0,!(0x208d+-0x56*-0x7+-0x22e7),_0x163635,_0x2844fc),this['finishBake'](_0x2309c0);}Q['popGpuMark'+'er'](this['device']);const _0x5e7810=de();this['stats']['totalRende'+'rTime']=_0x5e7810-_0x397f75,this['stats']['shadersLin'+'ked']=_0x8cf9e8['_shaderSta'+'ts']['linked']-_0x39d15e,this['stats']['compileTim'+'e']=_0x8cf9e8['_shaderSta'+'ts']['compileTim'+'e']-_0x5bb17d,this['stats']['fboTime']=_0x8cf9e8['_renderTar'+'getCreatio'+'nTime']-_0x555e7a,this['stats']['lightmapCo'+'unt']=_0x2309c0['length'],_0x8cf9e8['fire']('lightmappe'+'r:end',{'timestamp':_0x5e7810,'target':this});}['allocateTe'+'xtures'](_0x2df941,_0x33c0ea){for(let _0x568cc4=0x4b*-0x66+-0x19e8+0x25*0x182;_0x568cc4<_0x2df941['length'];_0x568cc4++){const _0x8d9f18=_0x2df941[_0x568cc4],_0x401b04=this['calculateL'+'ightmapSiz'+'e'](_0x8d9f18['node']);for(let _0x4048ec=-0x19*-0x11c+-0x16a9*-0x1+-0x2a7*0x13;_0x4048ec<_0x33c0ea;_0x4048ec++){const _0xf28462=this['createText'+'ure'](_0x401b04,'lightmappe'+'r_lightmap'+'_'+_0x568cc4);Bi['incRef'](_0xf28462),_0x8d9f18['renderTarg'+'ets'][_0x4048ec]=new gt({'colorBuffer':_0xf28462,'depth':!(0x1*-0x1792+0x1e1*-0x7+0x24ba*0x1)});}if(!this['renderTarg'+'ets']['has'](_0x401b04)){const _0x4e97d0=this['createText'+'ure'](_0x401b04,'lightmappe'+'r_temp_lig'+'htmap_'+_0x401b04);Bi['incRef'](_0x4e97d0),this['renderTarg'+'ets']['set'](_0x401b04,new gt({'colorBuffer':_0x4e97d0,'depth':!(0x1c3e+-0x1334+0x909*-0x1)}));}}}['prepareLig'+'htsToBake'](_0xf127ce,_0x11cc16){if(this['scene']['ambientBak'+'e']){const _0x4d580f=new eg(this);_0x11cc16['push'](_0x4d580f);}const _0x528297=this['renderer']['lights'];for(let _0x1ff4dd=0x18f*0xc+0xa8*0x1f+-0xc*0x341;_0x1ff4dd<_0x528297['length'];_0x1ff4dd++){const _0x2a3524=_0x528297[_0x1ff4dd],_0x2239b7=new vI(this,_0x2a3524);_0xf127ce['push'](_0x2239b7),_0x2a3524['enabled']&&(_0x2a3524['mask']&fi)!==-0x24c0+-0x25cb+0x4a8b&&(_0x2a3524['mask']=fi|di|Ss,_0x2a3524['shadowUpda'+'teMode']=_0x2a3524['type']===ve?Fp:gr,_0x11cc16['push'](_0x2239b7));}_0x11cc16['sort']();}['restoreLig'+'hts'](_0x3d7b71){for(let _0x1bd1f9=0xe3e+-0x2043*-0x1+-0x2e81;_0x1bd1f9<_0x3d7b71['length'];_0x1bd1f9++)_0x3d7b71[_0x1bd1f9]['restore']();}['setupScene'](){this['ambientLig'+'ht']['copy'](this['scene']['ambientLig'+'ht']),this['scene']['ambientBak'+'e']||this['scene']['ambientLig'+'ht']['set'](0xc5e*0x2+-0x1122+-0x1*0x79a,-0x8cc+0x12f3+0x1*-0xa27,-0x6ab+0x299*-0x3+0xe76),this['renderer']['setSceneCo'+'nstants'](),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Contrast')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Contrast']),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Brightness')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Brightness']);}['restoreSce'+'ne'](){this['scene']['ambientLig'+'ht']['copy'](this['ambientLig'+'ht']);}['computeNod'+'eBounds'](_0x4b5ccc){const _0x371afa=new De();if(_0x4b5ccc['length']>0x4d*0x3e+0x192+0x4*-0x50e){_0x371afa['copy'](_0x4b5ccc[-0x1a6d+-0x85f+0x22cc]['aabb']);for(let _0xdd4b32=-0x4*0x3eb+-0x11*0xf+0x10ac;_0xdd4b32<_0x4b5ccc['length'];_0xdd4b32++)_0x371afa['add'](_0x4b5ccc[_0xdd4b32]['aabb']);}return _0x371afa;}['computeNod'+'esBounds'](_0x24a228){for(let _0x59570a=-0x2244+-0x70f+0x2953;_0x59570a<_0x24a228['length'];_0x59570a++){const _0x1d9061=_0x24a228[_0x59570a]['meshInstan'+'ces'];_0x24a228[_0x59570a]['bounds']=this['computeNod'+'eBounds'](_0x1d9061);}}['computeBou'+'nds'](_0x43d185){const _0x3c5f39=new De();for(let _0x1b9654=-0x1*0xe2f+-0x386+0x1*0x11b5;_0x1b9654<_0x43d185['length'];_0x1b9654++){_0x3c5f39['copy'](_0x43d185[-0x18af+0x1334+-0x1*-0x57b]['aabb']);for(let _0xe99404=0xcf2*-0x1+0x179c+-0xaa9;_0xe99404<_0x43d185['length'];_0xe99404++)_0x3c5f39['add'](_0x43d185[_0xe99404]['aabb']);}return _0x3c5f39;}['backupMate'+'rials'](_0x1d8670){for(let _0x4fcb26=-0x904+-0x2*0x78f+0x1822;_0x4fcb26<_0x1d8670['length'];_0x4fcb26++)this['materials'][_0x4fcb26]=_0x1d8670[_0x4fcb26]['material'];}['restoreMat'+'erials'](_0x2707f7){for(let _0x4d5d88=0x1b4b+-0xbc3*-0x1+-0x270e;_0x4d5d88<_0x2707f7['length'];_0x4d5d88++)_0x2707f7[_0x4d5d88]['material']=this['materials'][_0x4d5d88];}['lightCamer'+'aPrepare'](_0x17372f,_0x53ef54){const _0x194ea0=_0x53ef54['light'];let _0x46d1a1;return _0x194ea0['type']===Ze&&(_0x46d1a1=_0x194ea0['getRenderD'+'ata'](null,0xbce+0x72*0x20+0x17*-0x122)['shadowCame'+'ra'],_0x46d1a1['_node']['setPositio'+'n'](_0x194ea0['_node']['getPositio'+'n']()),_0x46d1a1['_node']['setRotatio'+'n'](_0x194ea0['_node']['getRotatio'+'n']()),_0x46d1a1['_node']['rotateLoca'+'l'](-(-0x39f+-0x9*-0x26+-0x4b*-0x9),0x4c4*0x7+0x305*0x3+-0x1*0x2a6b,0xea8+-0x633*-0x3+0x1*-0x2141),_0x46d1a1['projection']=ni,_0x46d1a1['nearClip']=_0x194ea0['attenuatio'+'nEnd']/(0xcfc+-0x1*0x202e+0x171a),_0x46d1a1['farClip']=_0x194ea0['attenuatio'+'nEnd'],_0x46d1a1['aspectRati'+'o']=0x199*0x2+-0x794+0x463,_0x46d1a1['fov']=_0x194ea0['_outerCone'+'Angle']*(0x1388+-0x22c9+0xf43),this['renderer']['updateCame'+'raFrustum'](_0x46d1a1)),_0x46d1a1;}['lightCamer'+'aPrepareAn'+'dCull'](_0x3d1528,_0x3a9edf,_0x5679d8,_0x344a47){const _0x4a2551=_0x3d1528['light'];let _0x10603e=!(0x371*-0x1+-0x1111+0x1482);if(_0x4a2551['type']===ve){oc['copy'](_0x344a47['center']),oc['y']+=_0x344a47['halfExtent'+'s']['y'],this['camera']['node']['setPositio'+'n'](oc),this['camera']['node']['setEulerAn'+'gles'](-(0x11ee+-0x21*-0x60+0x9*-0x354),0xd7+0x1*0x132f+-0x1406,-0x62b*-0x2+0x12c7+0x1*-0x1f1d),this['camera']['nearClip']=-0x373*-0x7+0x377*0x1+-0x1b9c,this['camera']['farClip']=_0x344a47['halfExtent'+'s']['y']*(-0xbb+-0x60c+0x6c9);const _0x411e63=Math['max'](_0x344a47['halfExtent'+'s']['x'],_0x344a47['halfExtent'+'s']['z']);this['camera']['orthoHeigh'+'t']=_0x411e63;}else _0x3d1528['lightBound'+'s']['intersects'](_0x3a9edf['bounds'])||(_0x10603e=!(-0x1ebe+-0x3*-0x21d+0x8*0x30d));if(_0x4a2551['type']===Ze){let _0x1a0862=!(-0x859+-0x53*-0x74+-0x46*0x6b);const _0x5497ce=_0x3a9edf['meshInstan'+'ces'];for(let _0x3dc70e=0xd*-0x203+0x13*-0xd+0x3*0x90a;_0x3dc70e<_0x5497ce['length'];_0x3dc70e++)if(_0x5497ce[_0x3dc70e]['_isVisible'](_0x5679d8)){_0x1a0862=!(0x527+-0x12*0x1ca+0x1b0d);break;}_0x1a0862||(_0x10603e=!(-0xc7*0x6+0x2610+-0x2165));}return _0x10603e;}['setupLight'+'Array'](_0x775b9d,_0x404b9a){_0x775b9d[ve]['length']=-0x4d*-0x5e+0xd7c+-0x29c2,_0x775b9d[Ke]['length']=0x673+0x1*0x1d9+-0x84c,_0x775b9d[Ze]['length']=0x21aa+0x206e+-0x178*0x2d,_0x775b9d[_0x404b9a['type']][0x2*0x72a+-0x26e7+-0x1893*-0x1]=_0x404b9a,_0x404b9a['visibleThi'+'sFrame']=!(0x2414+-0x17*0x95+-0x16b1);}['renderShad'+'owMap'](_0x2c41b4,_0x14e642,_0xb432ad,_0x49c45a){const _0x3975fa=_0x49c45a['light'],_0x2e96d7=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x5b3767=_0x3975fa['castShadow'+'s']&&(!_0x2e96d7||this['scene']['lighting']['shadowsEna'+'bled']);if(!_0x14e642&&_0x5b3767){if(!_0x3975fa['shadowMap']&&!_0x2e96d7&&(_0x3975fa['shadowMap']=this['shadowMapC'+'ache']['get'](this['device'],_0x3975fa)),_0x3975fa['type']===ve){this['renderer']['_shadowRen'+'dererDirec'+'tional']['cull'](_0x3975fa,_0x2c41b4,this['camera'],_0xb432ad);const _0x4c2a72=this['renderer']['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x3975fa,this['camera']);_0x4c2a72==null||_0x4c2a72['render']();}else{if(this['device']['isWebGPU'])return w['warnOnce']('Lightmappe'+'r\x20on\x20WebGP'+'U\x20does\x20not'+'\x20yet\x20suppo'+'rt\x20spot\x20an'+'d\x20omni\x20sha'+'dows.'),!(-0x6*-0x2b7+-0x2381+0x1337);this['renderer']['_shadowRen'+'dererLocal']['cull'](_0x3975fa,_0x2c41b4,_0xb432ad),this['renderer']['shadowRend'+'erer']['render'](_0x3975fa,this['camera'],!(0x16e5+-0x601+-0x1*0x10e3));}}return!(0x1e3b+0x9a3+-0x27de);}['postproces'+'sTextures'](_0x55390d,_0x26fab2,_0x117412){const _0x177659=this['lightmapFi'+'lters']['getDilate'](_0x55390d,this['bakeHDR']);let _0x23e5e2;const _0x30ed11=this['scene']['lightmapFi'+'lterEnable'+'d'];_0x30ed11&&(this['lightmapFi'+'lters']['prepareDen'+'oise'](this['scene']['lightmapFi'+'lterRange'],this['scene']['lightmapFi'+'lterSmooth'+'ness'],this['bakeHDR']),_0x23e5e2=this['lightmapFi'+'lters']['getDenoise'](this['bakeHDR'])),_0x55390d['setBlendSt'+'ate'](pt['NOBLEND']),_0x55390d['setDepthSt'+'ate'](Yt['NODEPTH']),_0x55390d['setStencil'+'State'](null,null);for(let _0x2d37b2=0x1d12+-0x1cd4+-0x3e;_0x2d37b2<_0x26fab2['length'];_0x2d37b2++){const _0x4c76da=_0x26fab2[_0x2d37b2];Q['pushGpuMar'+'ker'](this['device'],'LMPost:'+_0x2d37b2);for(let _0x3bd215=0x203f+0x12a5+-0xcb9*0x4;_0x3bd215<_0x117412;_0x3bd215++){const _0x456278=_0x4c76da['renderTarg'+'ets'][_0x3bd215],_0x3576f5=_0x456278['colorBuffe'+'r'],_0x27a5ca=this['renderTarg'+'ets']['get'](_0x3576f5['width']),_0x577eae=_0x27a5ca['colorBuffe'+'r'];this['lightmapFi'+'lters']['prepare'](_0x3576f5['width'],_0x3576f5['height']);for(let _0x20a7d8=-0x523*-0x6+0x97*0x12+-0x2970;_0x20a7d8<-0x2*0x1093+-0x2470+-0x7*-0x9f1;_0x20a7d8++)this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x3576f5),Tr(_0x55390d,_0x27a5ca,_0x30ed11&&_0x3bd215===0x1*0x19ee+-0x50b*-0x7+-0x3d3b&&_0x20a7d8===-0x1dc7+0xf21+0xea6?_0x23e5e2:_0x177659),this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x577eae),Tr(_0x55390d,_0x456278,_0x177659);}Q['popGpuMark'+'er'](this['device']);}}['bakeIntern'+'al'](_0x44f92d,_0x4be3cf,_0x54d2f5){const _0x28b7e0=this['scene'],_0x4a6312=_0x28b7e0['layers'],_0x5df118=this['device'],_0x39d4b7=_0x28b7e0['clusteredL'+'ightingEna'+'bled'];this['createMate'+'rials'](_0x5df118,_0x28b7e0,_0x44f92d),this['setupScene'](),_0x4a6312['_update'](),this['computeNod'+'esBounds'](_0x4be3cf),this['allocateTe'+'xtures'](_0x4be3cf,_0x44f92d),this['renderer']['collectLig'+'hts'](_0x4a6312);const _0x195501=[],_0x68c9a8=[];this['prepareLig'+'htsToBake'](_0x195501,_0x68c9a8),this['updateTran'+'sforms'](_0x54d2f5);const _0x114d42=this['prepareSha'+'dowCasters'](_0x54d2f5);this['renderer']['updateCpuS'+'kinMatrice'+'s'](_0x114d42),this['renderer']['gpuUpdate'](_0x114d42);const _0x4cf84c=this['computeBou'+'nds'](_0x114d42);let _0xc7a620,_0x572b17,_0xc5bc3d,_0x324861;for(_0xc7a620=-0x10b*-0x13+-0x1cbd+-0x4*-0x23b;_0xc7a620<_0x4be3cf['length'];_0xc7a620++)for(_0xc5bc3d=_0x4be3cf[_0xc7a620]['meshInstan'+'ces'],_0x572b17=-0x1*0xb91+0x2*0x191+0x86f;_0x572b17<_0xc5bc3d['length'];_0x572b17++)_0x324861=_0xc5bc3d[_0x572b17],_0x324861['setLightma'+'pped'](!(0x1da9+0xc9b+0x2a43*-0x1)),_0x324861['mask']=fi,_0x324861['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][0xdad+0x293*0xf+0x1a25*-0x2],this['blackTex']),_0x324861['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][0xb5f*0x1+0x1*0x261a+-0x3178],this['blackTex']);for(_0x572b17=-0x19*-0x91+0x4f*-0x41+-0x2f3*-0x2;_0x572b17<_0x68c9a8['length'];_0x572b17++)_0x68c9a8[_0x572b17]['light']['enabled']=!(-0x2f3*-0x5+0x2306+0x82*-0x62);const _0x39dfdf=[[],[],[]];let _0x280ef8,_0x487d51,_0x125f07=!(-0x1b88+-0x2d5*0x1+-0x12b*-0x1a);for(_0xc7a620=0x4a9*-0x2+-0x1*-0x1f7d+-0x162b;_0xc7a620<_0x68c9a8['length'];_0xc7a620++){const _0x1a4fc1=_0x68c9a8[_0xc7a620],_0x14d884=_0x1a4fc1 instanceof eg,_0x511b76=_0x1a4fc1['light']['type']===ve;let _0x11592c=_0x1a4fc1['numVirtual'+'Lights'];_0x44f92d>0x1a9f+0xc79+0x1*-0x2717&&_0x11592c>-0x108*-0x25+-0x10b*-0x1+-0x2732&&_0x1a4fc1['light']['bakeDir']&&(_0x11592c=0x9f*0x3e+-0x2245*0x1+-0x43c,w['warn']('Lightmappe'+'r\x27s\x20BAKE_C'+'OLORDIR\x20mo'+'de\x20is\x20not\x20'+'compatible'+'\x20with\x20Ligh'+'t\x27s\x20bakeNu'+'mSamples\x20l'+'arger\x20than'+'\x20one.\x20Forc'+'ing\x20it\x20to\x20'+'one.'));for(let _0x56697a=0xb9a+-0x143d*0x1+0x8a3;_0x56697a<_0x11592c;_0x56697a++){Q['pushGpuMar'+'ker'](_0x5df118,'Light:'+_0x1a4fc1['light']['_node']['name']+':'+_0x56697a),_0x11592c>0x1*0xa59+0x7b1+-0x1209&&_0x1a4fc1['prepareVir'+'tualLight'](_0x56697a,_0x11592c),_0x1a4fc1['startBake']();let _0x5b3c5b=!(-0xd8f*0x2+0x1*-0x634+-0x13*-0x1c1);const _0x4b7f08=this['lightCamer'+'aPrepare'](_0x5df118,_0x1a4fc1);for(_0x487d51=-0x2197*-0x1+-0x1bc9*0x1+0x2*-0x2e7;_0x487d51<_0x4be3cf['length'];_0x487d51++){const _0x35f80c=_0x4be3cf[_0x487d51];if(_0xc5bc3d=_0x35f80c['meshInstan'+'ces'],!this['lightCamer'+'aPrepareAn'+'dCull'](_0x1a4fc1,_0x35f80c,_0x4b7f08,_0x4cf84c))continue;this['setupLight'+'Array'](_0x39dfdf,_0x1a4fc1['light']);const _0x57c3d7=_0x511b76?[]:[_0x1a4fc1['light']];for(_0x39d4b7&&this['renderer']['lightTextu'+'reAtlas']['update'](_0x57c3d7,this['lightingPa'+'rams']),_0x5b3c5b=this['renderShad'+'owMap'](_0x4a6312,_0x5b3c5b,_0x114d42,_0x1a4fc1),_0x39d4b7&&this['worldClust'+'ers']['update'](_0x57c3d7,this['lightingPa'+'rams']),this['backupMate'+'rials'](_0xc5bc3d),_0x280ef8=0x213+0x1d01+-0x1f14;_0x280ef8<_0x44f92d&&!(_0x280ef8>-0x2*0xd64+0x8cb+0x3*0x5ff&&_0x56697a>-0xac+0x1e56+-0x1daa||_0x14d884&&_0x280ef8>-0x24a6+-0x4ae*0x4+0x375e);_0x280ef8++){Q['pushGpuMar'+'ker'](_0x5df118,'LMPass:'+_0x280ef8);const _0x413862=_0x35f80c['renderTarg'+'ets'][_0x280ef8],_0x3dc014=_0x35f80c['renderTarg'+'ets'][_0x280ef8]['colorBuffe'+'r']['width'],_0x3201e6=this['renderTarg'+'ets']['get'](_0x3dc014),_0x73977b=_0x3201e6['colorBuffe'+'r'];_0x280ef8===-0xdcb+-0xa12+-0x17dd*-0x1?_0x125f07=_0x28b7e0['updateShad'+'ers']:_0x125f07&&(_0x28b7e0['updateShad'+'ers']=!(-0x3af+0x1091+-0x671*0x2));let _0x30de21=this['passMateri'+'als'][_0x280ef8];for(_0x14d884&&_0x56697a+(0xf2c+0x7aa+-0xa7*0x23)===_0x11592c&&_0x280ef8===-0x20fc+-0x1ac3+-0x7*-0x889&&(_0x30de21=this['ambientAOM'+'aterial']),_0x572b17=-0x2653+0xdd*-0x6+0x2b81;_0x572b17<_0xc5bc3d['length'];_0x572b17++)_0xc5bc3d[_0x572b17]['material']=_0x30de21;if(this['renderer']['updateShad'+'ers'](_0xc5bc3d),_0x280ef8===II&&this['constantBa'+'keDir']['setValue'](_0x1a4fc1['light']['bakeDir']?-0x1f*-0x5f+-0x9*-0x3aa+-0x2c7a:-0x1f86+-0x267e+0x1*0x4604),_0x5df118['isWebGPU']){const _0x1eb380=new PI(_0x5df118,this['renderer'],this['camera'],_0x39d4b7?this['worldClust'+'ers']:null,_0xc5bc3d,_0x39dfdf);_0x1eb380['init'](_0x3201e6),_0x1eb380['render'](),_0x1eb380['destroy']();}else this['renderer']['setCamera'](this['camera'],_0x3201e6,!(0x126*0x10+0x1a1*0x11+-0x1*0x2e11)),_0x39d4b7&&this['worldClust'+'ers']['activate'](),this['renderer']['_forwardTi'+'me']=0xa3c+0x1f*0x22+0xb*-0x14e,this['renderer']['_shadowMap'+'Time']=0x440+-0x1cf2+0x18b2,this['renderer']['renderForw'+'ard'](this['camera'],_0x3201e6,_0xc5bc3d,_0x39dfdf,xa),_0x5df118['updateEnd']();for(this['stats']['shadowMapT'+'ime']+=this['renderer']['_shadowMap'+'Time'],this['stats']['forwardTim'+'e']+=this['renderer']['_forwardTi'+'me'],this['stats']['renderPass'+'es']++,_0x35f80c['renderTarg'+'ets'][_0x280ef8]=_0x3201e6,this['renderTarg'+'ets']['set'](_0x3dc014,_0x413862),_0x572b17=0x1871*0x1+-0x2023+0x7b2;_0x572b17<_0xc5bc3d['length'];_0x572b17++)_0x324861=_0xc5bc3d[_0x572b17],_0x324861['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][_0x280ef8],_0x73977b),_0x324861['_shaderDef'+'s']|=Ff;Q['popGpuMark'+'er'](_0x5df118);}this['restoreMat'+'erials'](_0xc5bc3d);}_0x1a4fc1['endBake'](this['shadowMapC'+'ache']),Q['popGpuMark'+'er'](_0x5df118);}}for(this['postproces'+'sTextures'](_0x5df118,_0x4be3cf,_0x44f92d),_0x487d51=-0x4f*-0x11+0xba+0xb*-0x8b;_0x487d51<_0x54d2f5['length'];_0x487d51++)_0x54d2f5[_0x487d51]['restore']();this['restoreLig'+'hts'](_0x195501),this['restoreSce'+'ne'](),_0x39d4b7||this['shadowMapC'+'ache']['clear']();}}const Th=class Th extends me{constructor(_0x3f4428,_0x2661ad){super(),h(this,'system'),h(this,'entity'),(this['system']=_0x3f4428,this['entity']=_0x2661ad,this['system']['schema']&&!this['_accessors'+'Built']&&this['buildAcces'+'sors'](this['system']['schema']),this['on']('set',function(_0x45b71c,_0x30a9cf,_0x4b4db1){this['fire']('set_'+_0x45b71c,_0x45b71c,_0x30a9cf,_0x4b4db1);}),this['on']('set_enable'+'d',this['onSetEnabl'+'ed'],this));}static['_buildAcce'+'ssors'](_0x2a8f27,_0x1a1757){_0x1a1757['forEach'](_0x3f4819=>{const _0x54b347=typeof _0x3f4819=='object'?_0x3f4819['name']:_0x3f4819;Object['defineProp'+'erty'](_0x2a8f27,_0x54b347,{'get':function(){return this['data'][_0x54b347];},'set':function(_0x1d54aa){const _0x320746=this['data'],_0x1f3498=_0x320746[_0x54b347];_0x320746[_0x54b347]=_0x1d54aa,this['fire']('set',_0x54b347,_0x1f3498,_0x1d54aa);},'configurable':!(0x104f+0x59a+-0x15e9)});}),_0x2a8f27['_accessors'+'Built']=!(0x1*0x1751+0x13f*-0x12+0x1*-0xe3);}['buildAcces'+'sors'](_0x1558c6){Th['_buildAcce'+'ssors'](this,_0x1558c6);}['onSetEnabl'+'ed'](_0x51209c,_0x24128e,_0x4c6e4d){_0x24128e!==_0x4c6e4d&&this['entity']['enabled']&&(_0x4c6e4d?this['onEnable']():this['onDisable']());}['onEnable'](){}['onDisable'](){}['onPostStat'+'eChange'](){}get['data'](){const _0x40315e=this['system']['store'][this['entity']['getGuid']()];return _0x40315e?_0x40315e['data']:null;}set['enabled'](_0x50c4dc){}get['enabled'](){return!(-0x2647+-0x1669*0x1+0x3cb0);}};h(Th,'order',-0x119+0x68*-0x57+0x2471);let we=Th;class ct extends me{constructor(_0x54773d){super(),this['app']=_0x54773d,this['store']={},this['schema']=[];}['addCompone'+'nt'](_0x1efdf6,_0x12d573={}){const _0x5b1174=new this['ComponentT'+'ype'](this,_0x1efdf6),_0x1ec7b2=new this['DataType']();return this['store'][_0x1efdf6['getGuid']()]={'entity':_0x1efdf6,'data':_0x1ec7b2},_0x1efdf6[this['id']]=_0x5b1174,_0x1efdf6['c'][this['id']]=_0x5b1174,this['initialize'+'ComponentD'+'ata'](_0x5b1174,_0x12d573,[]),this['fire']('add',_0x1efdf6,_0x5b1174),_0x5b1174;}['removeComp'+'onent'](_0x4f3b98){const _0x2760d0=this['id'],_0x14ede9=this['store'][_0x4f3b98['getGuid']()],_0x26acb3=_0x4f3b98['c'][_0x2760d0];_0x26acb3['fire']('beforeremo'+'ve'),this['fire']('beforeremo'+'ve',_0x4f3b98,_0x26acb3),delete this['store'][_0x4f3b98['getGuid']()],_0x4f3b98[_0x2760d0]=void(-0x2262+-0x1*0x18ad+0x3b0f),delete _0x4f3b98['c'][_0x2760d0],this['fire']('remove',_0x4f3b98,_0x14ede9['data']);}['cloneCompo'+'nent'](_0xbd4845,_0x651783){const _0x1e8aa2=this['store'][_0xbd4845['getGuid']()];return this['addCompone'+'nt'](_0x651783,_0x1e8aa2['data']);}['initialize'+'ComponentD'+'ata'](_0x7c07f0,_0x268601={},_0x20ef1a){for(let _0x3aaded=-0x1f24+0x1684+-0x60*-0x17,_0x59c7fb=_0x20ef1a['length'];_0x3aaded<_0x59c7fb;_0x3aaded++){const _0x31e9a3=_0x20ef1a[_0x3aaded];let _0x4361fe,_0x3fedce;typeof _0x31e9a3=='object'?(_0x4361fe=_0x31e9a3['name'],_0x3fedce=_0x31e9a3['type']):(_0x4361fe=_0x31e9a3,_0x3fedce=void(-0x1a82+0x16c2+0x3c0));let _0x4a5e20=_0x268601[_0x4361fe];_0x4a5e20!==void(0x1*0x1cc6+0x3*-0x8f9+0x5f*-0x5)?(_0x3fedce!==void(0x631*-0x6+-0x1134*-0x2+-0xd*-0x36)&&(_0x4a5e20=RI(_0x4a5e20,_0x3fedce)),_0x7c07f0[_0x4361fe]=_0x4a5e20):_0x7c07f0[_0x4361fe]=_0x7c07f0['data'][_0x4361fe];}_0x7c07f0['enabled']&&_0x7c07f0['entity']['enabled']&&_0x7c07f0['onEnable']();}['getPropert'+'iesOfType'](_0x11d8c9){const _0x1b825e=[];return(this['schema']||[])['forEach'](_0x3bc3ee=>{_0x3bc3ee&&typeof _0x3bc3ee=='object'&&_0x3bc3ee['type']===_0x11d8c9&&_0x1b825e['push'](_0x3bc3ee);}),_0x1b825e;}['destroy'](){this['off']();}}function RI(_0x299859,_0x55508b){if(!_0x299859)return _0x299859;switch(_0x55508b){case'rgb':return _0x299859 instanceof ie?_0x299859['clone']():new ie(_0x299859[-0x3*0x793+0x224e+-0x5*0x251],_0x299859[-0x9c8+-0x5*0x2f5+0x1892],_0x299859[0x827+-0x1c66+0x55*0x3d]);case'rgba':return _0x299859 instanceof ie?_0x299859['clone']():new ie(_0x299859[0x261d+0x1c9a+-0x42b7],_0x299859[0xba+-0x3e3+0x32a],_0x299859[-0xb3*0xb+-0x771+0xf24],_0x299859[0x1297*-0x1+0x2310+-0x1076]);case'vec2':return _0x299859 instanceof J?_0x299859['clone']():new J(_0x299859[0x15b4+0x2e3*0xb+-0x3575],_0x299859[0x1*-0x2263+-0x5f0+0x2854]);case'vec3':return _0x299859 instanceof D?_0x299859['clone']():new D(_0x299859[0x8b*0x7+-0x73*0x53+0x217c],_0x299859[-0x22*-0x97+0x792+-0x1b9f],_0x299859[0xa11+0x319*-0x9+0x11d2]);case'vec4':return _0x299859 instanceof re?_0x299859['clone']():new re(_0x299859[-0x2*-0xc9a+0x97+-0x5d*0x47],_0x299859[0x12dd*0x1+-0x2b*0x81+0x2cf],_0x299859[0x713*-0x1+0x107b*-0x2+0x280b],_0x299859[0x1505+0x281+-0x1*0x1783]);case'boolean':case'number':case'string':return _0x299859;case'entity':return _0x299859;default:throw new Error('Could\x20not\x20'+'convert\x20un'+'handled\x20ty'+'pe:\x20'+_0x55508b);}}const iv=0xa8a+0x1cbc+-0x2*0x13a3,Xf=-0x263a+0x2*0x901+-0x1f*-0xa7,qf=-0xd60+0x1*-0xa1f+0x1781;class OI{constructor(){this['_left']=(0x5*0x703+0x26a2*0x1+-0x10*0x49b)/(-0x1520+0x1f0b*0x1+-0x9eb),this['_right']=-(0x153e*0x1+0x43b+0x2*-0xcbc)/(0x20a0+0xe*0x2a1+0x2*-0x22b7),this['_len']=-0x619*0x3+-0x5*-0x2e2+0x3e1*0x1,this['_recip']=0x911*0x1+-0x127a+-0xb*-0xdb,this['_p0']=0xa*0x2c5+-0x1*-0x193a+-0x34ec,this['_p1']=0x1526+-0xca*-0x27+-0x33ec,this['_t']=-0x1cb2+-0x977*0x4+-0xe*-0x4c1,this['_hermite']={'valid':!(0xdb8+-0x197c*0x1+0xbc5),'p0':0x0,'m0':0x0,'p1':0x0,'m1':0x0};}['update'](_0x188cfc,_0x528a0c){if(_0x188cfc<this['_left']||_0x188cfc>=this['_right']){const _0x2e9430=_0x528a0c['length'];if(!_0x2e9430)this['_left']=-(0x1095+0x89e*-0x4+0x11e4)/(-0xb2*-0x29+-0x29*-0x61+-0x2c0b),this['_right']=(0xe7c*0x2+0x42d*-0x3+-0x1070)/(0x16de+0x6*-0x5a8+-0x2*-0x589),this['_len']=0x267f+0x153f+-0x3bbe,this['_recip']=0x35*0x1f+0x190d+-0xfbc*0x2,this['_p0']=this['_p1']=0x1f*-0x4e+-0x2671*-0x1+-0x1cff;else{if(_0x188cfc<_0x528a0c[0x2007+0x2*0x3fa+0x27fb*-0x1])this['_left']=-(0x178b*0x1+0x1ab5*-0x1+-0x32b*-0x1)/(0xd7f+0x828+-0x15a7),this['_right']=_0x528a0c[-0x1*0x2569+-0x1*-0x54c+0x1*0x201d],this['_len']=0x3c2+0x1*0x2209+-0x25cb,this['_recip']=0xdb5+0xc*-0x1e2+0xaf*0xd,this['_p0']=this['_p1']=-0x10ea+-0x23e3*-0x1+-0x12f9;else{if(_0x188cfc>=_0x528a0c[_0x2e9430-(-0x1c54+0x2560+-0x90b)])this['_left']=_0x528a0c[_0x2e9430-(0x1*0x1547+0x1ae7+-0x302d)],this['_right']=(0xf93+-0x260+-0x3*0x466)/(0x5e*0x47+0x34d+-0x1d5f),this['_len']=0x24d6+-0x216b+0xaf*-0x5,this['_recip']=0xd7f+0x1*0x1bd7+-0x2956,this['_p0']=this['_p1']=_0x2e9430-(0x285+0xaa9+-0xd2d);else{const _0x576649=this['_findKey'](_0x188cfc,_0x528a0c);this['_left']=_0x528a0c[_0x576649],this['_right']=_0x528a0c[_0x576649+(-0x31*0xcc+0x17a9+0x18a*0xa)],this['_len']=this['_right']-this['_left'];const _0x542a85=(0x1357+-0x1*-0x1d1e+0x1bb*-0x1c)/this['_len'];this['_recip']=isFinite(_0x542a85)?_0x542a85:-0x1d97+0x1b3f+0x258,this['_p0']=_0x576649,this['_p1']=_0x576649+(0x141+-0x3d*-0x5f+0x5*-0x4c7);}}}}this['_t']=this['_recip']===-0x321+0x893*0x2+-0xe05?0x8fc+-0x1*-0xa31+-0x132d*0x1:(_0x188cfc-this['_left'])*this['_recip'],this['_hermite']['valid']=!(-0x8*-0x19+-0xf59+0xe92);}['_findKey'](_0x4cec88,_0x24c9eb){let _0x8eee4f=-0x698+-0x5c*0x62+-0x10*-0x29d;for(;_0x4cec88>=_0x24c9eb[_0x8eee4f+(-0x167b*-0x1+-0x4a5*0x5+0xbf*0x1)];)_0x8eee4f++;return _0x8eee4f;}['eval'](_0x1a74be,_0x3333e0,_0x57a689){const _0x30cc05=_0x57a689['_data'],_0x81ee22=_0x57a689['_component'+'s'],_0xa1c5c3=this['_p0']*_0x81ee22;if(_0x3333e0===iv){for(let _0x4fd16f=-0x89d+0x119*0x3+0x552;_0x4fd16f<_0x81ee22;++_0x4fd16f)_0x1a74be[_0x4fd16f]=_0x30cc05[_0xa1c5c3+_0x4fd16f];}else{const _0x1500cc=this['_t'],_0x3cdee6=this['_p1']*_0x81ee22;switch(_0x3333e0){case Xf:for(let _0x2788bf=-0xa6b+0xdf8+-0x38d;_0x2788bf<_0x81ee22;++_0x2788bf)_0x1a74be[_0x2788bf]=Y['lerp'](_0x30cc05[_0xa1c5c3+_0x2788bf],_0x30cc05[_0x3cdee6+_0x2788bf],_0x1500cc);break;case qf:{const _0x2598df=this['_hermite'];if(!_0x2598df['valid']){const _0x127034=_0x1500cc*_0x1500cc,_0xf83c6f=_0x1500cc+_0x1500cc,_0xad72f4=-0xd*-0x295+0xb3*0x11+-0x1*0x2d73-_0x1500cc,_0x4ed5b8=_0xad72f4*_0xad72f4;_0x2598df['valid']=!(0xdb*-0x8+-0x1bee+0x22c6),_0x2598df['p0']=(0x21d+0x1f7+0x95*-0x7+_0xf83c6f)*_0x4ed5b8,_0x2598df['m0']=_0x1500cc*_0x4ed5b8,_0x2598df['p1']=_0x127034*(-0x795+0x3e9+-0x29*-0x17-_0xf83c6f),_0x2598df['m1']=_0x127034*(_0x1500cc-(-0xbae+0x20dd+-0x2*0xa97));}const _0x435168=(this['_p0']*(0xa*0x397+0x17c8+0x41*-0xeb)+(0x17*-0x16f+0x23b7+-0x2bd))*_0x81ee22,_0x27610b=(this['_p0']*(0x19c1+0x1*-0x205f+-0x1*-0x6a1)+(-0x268b+0x1072+0x1*0x161b))*_0x81ee22,_0x3d9630=(this['_p1']*(-0x193+-0x13eb+0x1581)+(0x230a+0x1801+-0x3b0a))*_0x81ee22,_0x623d0f=(this['_p1']*(0x1*0x959+-0x7*0x24a+-0x4*-0x1ac)+(-0x1fc3+-0x991+0xe6*0x2e))*_0x81ee22;for(let _0x3311a3=0x1628+0x62*0x33+0x37*-0xc2;_0x3311a3<_0x81ee22;++_0x3311a3)_0x1a74be[_0x3311a3]=_0x2598df['p0']*_0x30cc05[_0x435168+_0x3311a3]+_0x2598df['m0']*_0x30cc05[_0x27610b+_0x3311a3]*this['_len']+_0x2598df['p1']*_0x30cc05[_0x3d9630+_0x3311a3]+_0x2598df['m1']*_0x30cc05[_0x623d0f+_0x3311a3]*this['_len'];break;}}}}}class sg{constructor(_0x522cb4){this['_name']=_0x522cb4['name']+'Snapshot',this['_time']=-(0xafc*-0x1+-0x792+0x128f),this['_cache']=[],this['_results']=[];for(let _0x19a2f7=0x1244+-0x1f5d+-0x1df*-0x7;_0x19a2f7<_0x522cb4['_inputs']['length'];++_0x19a2f7)this['_cache'][_0x19a2f7]=new OI();const _0x526d3f=_0x522cb4['_curves'],_0x314df4=_0x522cb4['_outputs'];for(let _0x47e619=0x2361+-0x1*-0x125+-0x2486;_0x47e619<_0x526d3f['length'];++_0x47e619){const _0x42671d=_0x526d3f[_0x47e619],_0x46d6cf=_0x314df4[_0x42671d['_output']],_0x2cb799=[];for(let _0x47d5e4=0x1d62+0x152*0x16+-0x3*0x137a;_0x47d5e4<_0x46d6cf['_component'+'s'];++_0x47d5e4)_0x2cb799[_0x47d5e4]=-0x1*-0x1277+-0x2a*0x58+-0x407;this['_results'][_0x47e619]=_0x2cb799;}}}const Oo=class Oo{constructor(_0xb9687e,_0x377911,_0x2ca6bf,_0x14ee67,_0x401a25,_0x2eb9c4){this['_name']=_0xb9687e['name'],this['_track']=_0xb9687e,this['_snapshot']=new sg(_0xb9687e),this['_playing']=_0x14ee67,this['_time']=_0x377911,this['_speed']=_0x2ca6bf,this['_loop']=_0x401a25,this['_blendWeig'+'ht']=-0x1c*-0xb2+-0x4a5*0x3+-0x588,this['_blendOrde'+'r']=0x1*-0x151d+-0x1339+0x2856,this['_eventHand'+'ler']=_0x2eb9c4,this['alignCurso'+'rToCurrent'+'Time']();}set['name'](_0x35ec21){this['_name']=_0x35ec21;}get['name'](){return this['_name'];}set['track'](_0x3df7af){this['_track']=_0x3df7af,this['_snapshot']=new sg(_0x3df7af);}get['track'](){return this['_track'];}get['snapshot'](){return this['_snapshot'];}set['time'](_0x419c73){this['_time']=_0x419c73,this['alignCurso'+'rToCurrent'+'Time']();}get['time'](){return this['_time'];}set['speed'](_0x27f52d){const _0x3132d7=Math['sign'](_0x27f52d)!==Math['sign'](this['_speed']);this['_speed']=_0x27f52d,_0x3132d7&&this['alignCurso'+'rToCurrent'+'Time']();}get['speed'](){return this['_speed'];}set['loop'](_0x56b257){this['_loop']=_0x56b257;}get['loop'](){return this['_loop'];}set['blendWeigh'+'t'](_0x38baed){this['_blendWeig'+'ht']=_0x38baed;}get['blendWeigh'+'t'](){return this['_blendWeig'+'ht'];}set['blendOrder'](_0x4a1f1b){this['_blendOrde'+'r']=_0x4a1f1b;}get['blendOrder'](){return this['_blendOrde'+'r'];}set['eventCurso'+'r'](_0x4db0de){this['_eventCurs'+'or']=_0x4db0de;}get['eventCurso'+'r'](){return this['_eventCurs'+'or'];}get['eventCurso'+'rEnd'](){return this['isReverse']?-0x102a*-0x2+-0xf4d+0x1*-0x1107:this['_track']['events']['length']-(0x568+-0x2f5+0x1*-0x272);}get['nextEvent'](){return this['_track']['events'][this['_eventCurs'+'or']];}get['isReverse'](){return this['_speed']<0x4*-0x8b4+0xfad+0x47*0x45;}['nextEventA'+'headOfTime'](_0x162104){return this['nextEvent']?this['isReverse']?this['nextEvent']['time']<=_0x162104:this['nextEvent']['time']>=_0x162104:!(0x2*-0x54b+-0xe5*0x1b+0x22be);}['nextEventB'+'ehindTime'](_0x1513ec){return this['nextEvent']?_0x1513ec===this['track']['duration']?this['isReverse']?this['nextEvent']['time']>=_0x1513ec:this['nextEvent']['time']<=_0x1513ec:this['isReverse']?this['nextEvent']['time']>_0x1513ec:this['nextEvent']['time']<_0x1513ec:!(0x1344+-0x1*0xe59+-0x4ea);}['resetEvent'+'Cursor'](){this['_eventCurs'+'or']=this['isReverse']?this['_track']['events']['length']-(0x438+-0x1cf7+-0x90*-0x2c):-0x1d8e+-0x77+0x1e05;}['moveEventC'+'ursor'](){this['_eventCurs'+'or']+=this['isReverse']?-(-0x1ae5+0x32d*-0xb+0x3dd5):-0xf53*0x2+0x3*-0x14d+-0x228e*-0x1,this['_eventCurs'+'or']>=this['track']['events']['length']?this['_eventCurs'+'or']=-0xd*-0x2cf+0x390+-0x2813:this['_eventCurs'+'or']<-0x983+0x1*-0x2027+0x14d5*0x2&&(this['_eventCurs'+'or']=this['track']['events']['length']-(-0x14a1*-0x1+0x21f8+-0x3698));}['clipFrameT'+'ime'](_0x1a0730){const _0xb9c255=Oo['eventFrame'];_0xb9c255['start']=-0x2b*0x61+-0x1e04+0x1*0x2e4f,_0xb9c255['end']=_0x1a0730,_0xb9c255['residual']=-0x116e+0x17a6+-0x638,this['isReverse']?_0x1a0730<-0x164a+0x1ded+-0x55*0x17&&(_0xb9c255['start']=this['track']['duration'],_0xb9c255['end']=-0x1*-0x1f9d+0xa95+-0x2a32*0x1,_0xb9c255['residual']=_0x1a0730+this['track']['duration']):_0x1a0730>this['track']['duration']&&(_0xb9c255['start']=-0x4d5*0x2+0x1*0xc56+-0x2ac,_0xb9c255['end']=this['track']['duration'],_0xb9c255['residual']=_0x1a0730-this['track']['duration']);}['alignCurso'+'rToCurrent'+'Time'](){for(this['resetEvent'+'Cursor']();this['nextEventB'+'ehindTime'](this['_time'])&&this['_eventCurs'+'or']!==this['eventCurso'+'rEnd'];)this['moveEventC'+'ursor']();}['fireNextEv'+'ent'](){this['_eventHand'+'ler']['fire'](this['nextEvent']['name'],{'track':this['track'],...this['nextEvent']}),this['moveEventC'+'ursor']();}['fireNextEv'+'entInFrame'](_0x201693,_0x1dce2d){return this['nextEventA'+'headOfTime'](_0x201693)&&this['nextEventB'+'ehindTime'](_0x1dce2d)?(this['fireNextEv'+'ent'](),!(-0x56+0x12cf+-0x1279*0x1)):!(-0x2362+-0x1*0x70e+0x2a71);}['activeEven'+'tsForFrame'](_0x19fa74,_0x2a8c70){const _0x38a417=Oo['eventFrame'];this['clipFrameT'+'ime'](_0x2a8c70);const _0x405151=this['eventCurso'+'r'];for(;this['fireNextEv'+'entInFrame'](_0x19fa74,_0x38a417['end'])&&_0x405151!==this['eventCurso'+'r'];);this['loop']&&Math['abs'](_0x38a417['residual'])>-0xe14+0xd*0xb1+0x517&&this['activeEven'+'tsForFrame'](_0x38a417['start'],_0x38a417['residual']);}['progressFo'+'rTime'](_0x28a5ff){return _0x28a5ff*this['_speed']/this['_track']['duration'];}['_update'](_0x23f058){if(this['_playing']){let _0x5a2832=this['_time'];const _0x3256ca=this['_track']['duration'],_0xa61e80=this['_speed'],_0x55f435=this['_loop'];this['_track']['events']['length']>-0x33b+0x20*0x79+-0x15*0x91&&_0x3256ca>0x1b*0xbc+-0x1b0+-0x6*0x306&&this['activeEven'+'tsForFrame'](_0x5a2832,_0x5a2832+_0xa61e80*_0x23f058),_0x5a2832+=_0xa61e80*_0x23f058,_0xa61e80>=-0x16d6+0x6*-0x1b2+0x2102?_0x5a2832>_0x3256ca&&(_0x55f435?_0x5a2832=_0x5a2832%_0x3256ca||-0x26c*-0x8+0x541+-0x18a1:(_0x5a2832=this['_track']['duration'],this['pause']())):_0x5a2832<0x188+-0x14ad*0x1+0x1*0x1325&&(_0x55f435?_0x5a2832=_0x3256ca+(_0x5a2832%_0x3256ca||0x38*-0x11+0x107d+-0xcc5):(_0x5a2832=0x82*0x12+-0x1c22+-0x1*-0x12fe,this['pause']())),this['_time']=_0x5a2832;}this['_time']!==this['_snapshot']['_time']&&this['_track']['eval'](this['_time'],this['_snapshot']);}['play'](){this['_playing']=!(0x230f+-0x113d+-0x11d2),this['_time']=0x18ed+-0x1bac+0x13*0x25;}['stop'](){this['_playing']=!(-0x1*0x168d+0x273+0x141b),this['_time']=0x2666+-0x1d39+-0x105*0x9;}['pause'](){this['_playing']=!(-0x1bef*-0x1+0x5e8+-0x21d6);}['resume'](){this['_playing']=!(-0xb3a+-0x299+0xdd3*0x1);}['reset'](){this['_time']=0x11*-0x2+0x2*-0x1b1+-0x64*-0x9;}};h(Oo,'eventFrame',{'start':0x0,'end':0x0,'residual':0x0});let lh=Oo;const rv='NONE',FI='PREV_STATE',NI='NEXT_STATE',kI='PREV_STATE'+'_NEXT_STAT'+'E',UI='NEXT_STATE'+'_PREV_STAT'+'E',BI='GREATER_TH'+'AN',zI='LESS_THAN',VI='GREATER_TH'+'AN_EQUAL_T'+'O',GI='LESS_THAN_'+'EQUAL_TO',HI='EQUAL_TO',WI='NOT_EQUAL_'+'TO',ig='INTEGER',rg='FLOAT',ag='BOOLEAN',Dc='TRIGGER',$I='1D',XI='2D_DIRECTI'+'ONAL',qI='2D_CARTESI'+'AN',jI='DIRECT',_o='START',jf='END',Hr='ANY',ch=[_o,jf,Hr],av='OVERWRITE',YI='ADDITIVE';class Ht{static['dot'](_0x24cccd,_0x408a34){const _0x1f4300=_0x24cccd['length'];let _0x103c7a=-0xc3*0xe+-0x16d*0xa+0xdc*0x1d;for(let _0xcd6e6a=0x1c77*0x1+0xe92+-0x2b09;_0xcd6e6a<_0x1f4300;++_0xcd6e6a)_0x103c7a+=_0x24cccd[_0xcd6e6a]*_0x408a34[_0xcd6e6a];return _0x103c7a;}static['normalize'](_0x551aab){let _0x31abaa=Ht['dot'](_0x551aab,_0x551aab);if(_0x31abaa>-0xad5*0x2+-0x115b*0x1+0x2705){_0x31abaa=(-0x7*-0x3c3+0x1f*-0x91+-0x8c5)/Math['sqrt'](_0x31abaa);const _0x4c9f83=_0x551aab['length'];for(let _0x426a55=0x18c1+0x1cdc+-0x359d;_0x426a55<_0x4c9f83;++_0x426a55)_0x551aab[_0x426a55]*=_0x31abaa;}}static['set'](_0x588d78,_0x38985b,_0xe4a4ee){const _0x5ba956=_0x588d78['length'];if(_0xe4a4ee==='quaternion'){let _0x159460=Ht['dot'](_0x38985b,_0x38985b);_0x159460>0x19de+0xfa*0x11+-0x2a78&&(_0x159460=(-0x211+0x2*-0x110f+0x2430)/Math['sqrt'](_0x159460));for(let _0xd059f0=-0x2067*0x1+0x107e+0xfe9;_0xd059f0<_0x5ba956;++_0xd059f0)_0x588d78[_0xd059f0]=_0x38985b[_0xd059f0]*_0x159460;}else{for(let _0xa78240=0x5db*0x3+-0x22b6+0x1125*0x1;_0xa78240<_0x5ba956;++_0xa78240)_0x588d78[_0xa78240]=_0x38985b[_0xa78240];}}static['blendVec'](_0x1328db,_0x1b927e,_0x406322,_0x1630d9){const _0x36f569=_0x1630d9?-0x1*0xaa1+0x36a+-0x15*-0x58:0x1*0xfb5+0x5a6*-0x1+-0xa0e-_0x406322,_0x57d53a=_0x1328db['length'];for(let _0xa9bddb=-0x1247+-0x84a*0x2+-0x1*-0x22db;_0xa9bddb<_0x57d53a;++_0xa9bddb)_0x1328db[_0xa9bddb]=_0x1328db[_0xa9bddb]*_0x36f569+_0x1b927e[_0xa9bddb]*_0x406322;}static['blendQuat'](_0x45b7c4,_0x442378,_0x590909,_0x206658){const _0x34fc45=_0x45b7c4['length'],_0x160801=_0x206658?0x1a34+-0x3fe+0xf*-0x17b:0x2489+0x2*-0x55c+0x19d0*-0x1-_0x590909;Ht['dot'](_0x45b7c4,_0x442378)<-0x7b7*-0x2+-0xc95+-0x2d9&&(_0x590909=-_0x590909);for(let _0x239f05=-0x2*-0x4c6+0x2*-0x4c+0x1*-0x8f4;_0x239f05<_0x34fc45;++_0x239f05)_0x45b7c4[_0x239f05]=_0x45b7c4[_0x239f05]*_0x160801+_0x442378[_0x239f05]*_0x590909;_0x206658||Ht['normalize'](_0x45b7c4);}static['blend'](_0x4138c6,_0x4b8492,_0x34b864,_0x48eba8,_0x5c5a01){_0x48eba8==='quaternion'?Ht['blendQuat'](_0x4138c6,_0x4b8492,_0x34b864,_0x5c5a01):Ht['blendVec'](_0x4138c6,_0x4b8492,_0x34b864,_0x5c5a01);}static['stableSort'](_0x3d9c87,_0x395d7e){const _0x313b83=_0x3d9c87['length'];for(let _0x211321=0x1*0x1693+0x1ed3*-0x1+-0x1*-0x840;_0x211321<_0x313b83-(0x74+0x1*0x1e0e+-0x1e81);++_0x211321)for(let _0x2887de=_0x211321+(-0x12eb+0x284*-0xd+-0x70*-0x76);_0x2887de<_0x313b83;++_0x2887de)if(_0x395d7e(_0x3d9c87[_0x2887de],_0x3d9c87[_0x211321])){const _0x18cd3c=_0x3d9c87[_0x211321];_0x3d9c87[_0x211321]=_0x3d9c87[_0x2887de],_0x3d9c87[_0x2887de]=_0x18cd3c;}}}const st=class st{constructor(_0x483042,_0x487bcf){this['_component']=_0x483042,this['mask']=new Int8Array(_0x483042['layers']['length']),this['weights']=new Float32Array(_0x483042['layers']['length']),this['totalWeigh'+'t']=-0xa3c+0x2d7*0x2+0x48e,this['counter']=-0xa*-0x16d+0x1*0x20d5+-0x1*0x2f17,this['layerCount'+'er']=-0x1*0x2b6+0x1bbc+-0x1906,this['valueType']=_0x487bcf,this['dirty']=!(0xcc6+0xf52*0x1+0x1*-0x1c18),this['value']=_0x487bcf===st['TYPE_QUAT']?[-0x1676*-0x1+-0x244e+0xdd8,0x2*-0x4ee+0x3*-0xb2b+0x11*0x28d,0x1*-0x153b+-0x2113*0x1+0x364e,0x9*-0x2e7+0xc5f*0x3+-0xafd]:[0x2277+-0x1fd*-0x9+0x1*-0x345c,-0x17fc+0x3*-0x542+-0xe*-0x2d7,0x1*-0xa9f+-0x1011*-0x1+-0x52*0x11],this['baseValue']=null,this['setter']=null;}get['_normalize'+'Weights'](){return this['_component']['normalizeW'+'eights'];}['getWeight'](_0x3b0bd8){return this['dirty']&&this['updateWeig'+'hts'](),this['_normalize'+'Weights']&&this['totalWeigh'+'t']===0xa84+-0x9bf+-0xc5*0x1||!this['mask'][_0x3b0bd8]?-0x19f4+-0x20e5+0x3ad9:this['_normalize'+'Weights']?this['weights'][_0x3b0bd8]/this['totalWeigh'+'t']:Y['clamp'](this['weights'][_0x3b0bd8],-0xd4d*-0x2+0xb7*0x27+-0x367b,-0x1edc+-0x299+0x2*0x10bb);}['_layerBlen'+'dType'](_0x53f945){return this['_component']['layers'][_0x53f945]['blendType'];}['setMask'](_0x39328c,_0x492206){this['mask'][_0x39328c]=_0x492206,this['_normalize'+'Weights']&&(this['_component']['layers'][_0x39328c]['blendType']===av&&(this['mask']=this['mask']['fill'](-0x2*-0x701+0x1675+-0x2477,0x1e48+-0xe5c+-0xfec,_0x39328c)),this['dirty']=!(-0x1*-0x1604+0x1576+-0x2b7a));}['updateWeig'+'hts'](){this['totalWeigh'+'t']=0x1*0x1f5b+0x29b+-0x2*0x10fb;for(let _0x15ff4b=-0x3*-0x277+-0x1*0xc69+-0x141*-0x4;_0x15ff4b<this['weights']['length'];_0x15ff4b++)this['weights'][_0x15ff4b]=this['_component']['layers'][_0x15ff4b]['weight'],this['totalWeigh'+'t']+=this['mask'][_0x15ff4b]*this['weights'][_0x15ff4b];this['dirty']=!(-0x3f2+-0xa56+0xe49);}['updateValu'+'e'](_0x311262,_0x1e6fc1){if(this['counter']===0x835+-0x227*0x1+-0x60e&&(Ht['set'](this['value'],st['IDENTITY_Q'+'UAT_ARR'],this['valueType']),this['_normalize'+'Weights']||Ht['blend'](this['value'],this['baseValue'],0x2*0xa6+-0x17d7+0x168c,this['valueType'])),!(!this['mask'][_0x311262]||this['getWeight'](_0x311262)===0x1*-0x621+-0x15f1+0x1c12)){if(this['_layerBlen'+'dType'](_0x311262)===YI&&!this['_normalize'+'Weights']){if(this['valueType']===st['TYPE_QUAT']){const _0x3e242c=st['q1']['set'](this['value'][0x1*-0x25d+0x217a+0x1*-0x1f1d],this['value'][-0x1794+-0x2*0x824+0x27dd],this['value'][0x4a6+0x8f9+-0xd9d],this['value'][-0x1*-0x25cd+0x881*-0x4+-0x45*0xe]),_0x13029f=st['q2']['set'](this['baseValue'][0x1f83*0x1+-0x4e*0x19+-0x17e5],this['baseValue'][-0x1*-0x2182+0x2ae+0x9d*-0x3b],this['baseValue'][0x25b0+-0x612*0x6+0x7*-0x2e],this['baseValue'][0x16*-0x3a+0x1*0x14e1+-0xfe2]),_0x2ac636=st['q3']['set'](_0x1e6fc1[-0x2498*0x1+0x8b6+0x1be2],_0x1e6fc1[0x2*-0x7b6+-0x1750+0xd3*0x2f],_0x1e6fc1[-0x2*-0xdc7+-0x26d5*-0x1+-0x4261],_0x1e6fc1[-0x1764+-0xdf2+0x2559*0x1]),_0x1b0674=_0x13029f['invert']()['mul'](_0x2ac636);_0x1b0674['slerp'](le['IDENTITY'],_0x1b0674,this['getWeight'](_0x311262)),_0x3e242c['mul'](_0x1b0674),st['quatArr'][0x178b*-0x1+0x246*0xe+-0x7*0x12f]=_0x3e242c['x'],st['quatArr'][0x22f5+0x19b*0xf+-0x3b09]=_0x3e242c['y'],st['quatArr'][-0x3*0x19d+0xcdc*0x2+-0x14df]=_0x3e242c['z'],st['quatArr'][-0x185d+-0x130a+-0x2*-0x15b5]=_0x3e242c['w'],Ht['set'](this['value'],st['quatArr'],this['valueType']);}else st['vecArr'][0x47*-0x79+-0x1*0x236c+0x44fb*0x1]=_0x1e6fc1[-0x408+0x1*-0x225c+0x15f*0x1c]-this['baseValue'][0x5cd+0xdcc+-0x1*0x1399],st['vecArr'][0x1*-0x1ef8+0x26c1+0xa6*-0xc]=_0x1e6fc1[-0xd81+-0x1095+0x1e17]-this['baseValue'][0x1780+0x2d2+-0x1a51*0x1],st['vecArr'][-0x5e*0x16+0x260b+-0x1df5]=_0x1e6fc1[-0x1470+-0x212f*-0x1+-0xcbd]-this['baseValue'][0x40*0x1+0xc2e*0x1+-0x6a*0x1e],Ht['blend'](this['value'],st['vecArr'],this['getWeight'](_0x311262),this['valueType'],!(-0x7*0x2dd+0x142b+-0x20));}else Ht['blend'](this['value'],_0x1e6fc1,this['getWeight'](_0x311262),this['valueType']);this['setter']&&this['setter'](this['value']);}}['unbind'](){this['setter']&&this['setter'](this['baseValue']);}};h(st,'TYPE_QUAT','quaternion'),h(st,'TYPE_VEC3','vector3'),h(st,'q1',new le()),h(st,'q2',new le()),h(st,'q3',new le()),h(st,'quatArr',[0x19ad+0x1*0x215e+-0x3b0b,0x5*-0x727+0x11*0x107+0x493*0x4,0x632*-0x1+0x18b3*0x1+0x1281*-0x1,-0x97*0x7+-0x2173*-0x1+0x13*-0x18b]),h(st,'vecArr',[0xa78+-0x1d8f+-0xb5*-0x1b,-0x957+-0x1e3f+0x1*0x2796,0x1*-0x58f+0xc5*0x2b+-0x2*0xdc4]),h(st,'IDENTITY_Q'+'UAT_ARR',[-0x1f3b+-0x1*0x3b+0x1f76,-0x1218+-0x8a*0x9+0x3d3*0x6,0x3*0x99e+-0x2b*-0xc8+-0x1f39*0x2,0x15fb*-0x1+-0x3*0x54c+0x25e0]);let Mo=st;class nv{constructor(_0x56b05d){this['_binder']=_0x56b05d,this['_clips']=[],this['_inputs']=[],this['_outputs']=[],this['_targets']={};}get['clips'](){return this['_clips'];}['addClip'](_0x545d33){const _0x20e441=this['_targets'],_0x5b1aea=this['_binder'],_0x2db3f0=_0x545d33['track']['curves'],_0x18d8cf=_0x545d33['snapshot'],_0x5905e3=[],_0x461f4b=[];for(let _0x4d847b=0x23a6+-0xef*-0x21+-0x4275;_0x4d847b<_0x2db3f0['length'];++_0x4d847b){const _0x1f5e60=_0x2db3f0[_0x4d847b]['paths'];for(let _0x3520d1=0x1bef+0x529*-0x3+-0xc74;_0x3520d1<_0x1f5e60['length'];++_0x3520d1){const _0x5a98d3=_0x1f5e60[_0x3520d1],_0x459c72=_0x5b1aea['resolve'](_0x5a98d3);let _0x3db77b=_0x20e441[_0x459c72&&_0x459c72['targetPath']||null];if(!_0x3db77b&&_0x459c72){_0x3db77b={'target':_0x459c72,'value':[],'curves':0x0,'blendCounter':0x0};for(let _0x2b9c7c=0x1692*0x1+0x3a*-0x65+-0xa*-0x8;_0x2b9c7c<_0x3db77b['target']['components'];++_0x2b9c7c)_0x3db77b['value']['push'](-0x66e*0x5+-0xd3f+-0x1*-0x2d65);if(_0x20e441[_0x459c72['targetPath']]=_0x3db77b,_0x5b1aea['animCompon'+'ent']){if(!_0x5b1aea['animCompon'+'ent']['targets'][_0x459c72['targetPath']]){let _0x405100;_0x459c72['targetPath']['substring'](_0x459c72['targetPath']['length']-(0x1d4a*0x1+0x1a0c+0x1*-0x3749))==='localRotat'+'ion'?_0x405100=Mo['TYPE_QUAT']:_0x405100=Mo['TYPE_VEC3'],_0x5b1aea['animCompon'+'ent']['targets'][_0x459c72['targetPath']]=new Mo(_0x5b1aea['animCompon'+'ent'],_0x405100);}_0x5b1aea['animCompon'+'ent']['targets'][_0x459c72['targetPath']]['layerCount'+'er']++,_0x5b1aea['animCompon'+'ent']['targets'][_0x459c72['targetPath']]['setMask'](_0x5b1aea['layerIndex'],0xc7*-0xa+-0xfd4+0x1*0x179b);}}_0x3db77b&&(_0x3db77b['curves']++,_0x5905e3['push'](_0x18d8cf['_results'][_0x4d847b]),_0x461f4b['push'](_0x3db77b));}}this['_clips']['push'](_0x545d33),this['_inputs']['push'](_0x5905e3),this['_outputs']['push'](_0x461f4b);}['removeClip'](_0x446bd3){const _0x1e274b=this['_targets'],_0x45329f=this['_binder'],_0x503e24=this['_clips'],_0x43345b=_0x503e24[_0x446bd3]['track']['curves'];for(let _0x1f199b=0x1296+-0x2*0x96b+-0x20*-0x2;_0x1f199b<_0x43345b['length'];++_0x1f199b){const _0x4c9ee8=_0x43345b[_0x1f199b]['paths'];for(let _0x1c2f1b=0x2485*0x1+0x1*-0xf1d+0x1*-0x1568;_0x1c2f1b<_0x4c9ee8['length'];++_0x1c2f1b){const _0x3d3b74=_0x4c9ee8[_0x1c2f1b],_0x425661=this['_binder']['resolve'](_0x3d3b74);_0x425661&&(_0x425661['curves']--,_0x425661['curves']===0xe54+-0x198e+0xb3a&&(_0x45329f['unresolve'](_0x3d3b74),delete _0x1e274b[_0x425661['targetPath']],_0x45329f['animCompon'+'ent']&&_0x45329f['animCompon'+'ent']['targets'][_0x425661['targetPath']]['layerCount'+'er']--));}}_0x503e24['splice'](_0x446bd3,-0x58f*-0x1+-0x2546+0xa*0x32c),this['_inputs']['splice'](_0x446bd3,0x4a*0x31+0x1f18+-0x7*0x677),this['_outputs']['splice'](_0x446bd3,-0x6dd*0x1+0x1*0x611+0x5*0x29);}['removeClip'+'s'](){for(;this['_clips']['length']>-0x765*-0x4+0x557*-0x5+-0x2e1;)this['removeClip'](0x1c8e+0x1*-0x268d+0x9ff*0x1);}['updateClip'+'Track'](_0x218938,_0x1ca88a){this['_clips']['forEach'](_0x1bbf2e=>{_0x1bbf2e['name']['includes'](_0x218938)&&(_0x1bbf2e['track']=_0x1ca88a);}),this['rebind']();}['findClip'](_0x422dc5){const _0x5bdcf1=this['_clips'];for(let _0x508933=0x2656+0x1573+-0x3bc9*0x1;_0x508933<_0x5bdcf1['length'];++_0x508933){const _0x174a80=_0x5bdcf1[_0x508933];if(_0x174a80['name']===_0x422dc5)return _0x174a80;}return null;}['rebind'](){this['_binder']['rebind'](),this['_targets']={};const _0x2a57ac=[...this['clips']];this['removeClip'+'s'](),_0x2a57ac['forEach'](_0x272008=>{this['addClip'](_0x272008);});}['assignMask'](_0xcd499b){return this['_binder']['assignMask'](_0xcd499b);}['update'](_0x1ba03d,_0x46edea=!(-0xe26+0xe81+-0x5b)){const _0x39131f=this['_clips'],_0x3aa712=_0x39131f['map']((_0x47f777,_0x57c4f0)=>_0x57c4f0);Ht['stableSort'](_0x3aa712,(_0xca8d1b,_0xa31904)=>_0x39131f[_0xca8d1b]['blendOrder']<_0x39131f[_0xa31904]['blendOrder']);for(let _0x2644a5=-0x1956+-0x8b*-0x35+-0x371;_0x2644a5<_0x3aa712['length'];++_0x2644a5){const _0x46806f=_0x3aa712[_0x2644a5],_0x3f697b=_0x39131f[_0x46806f],_0x527311=this['_inputs'][_0x46806f],_0x5b76a6=this['_outputs'][_0x46806f],_0x396882=_0x3f697b['blendWeigh'+'t'];if(_0x396882>0x1c0*-0x11+0xe3f*-0x1+0x2bff&&_0x3f697b['_update'](_0x1ba03d),!_0x46edea)break;let _0x498a45,_0x273c3d,_0x2d6e40;if(_0x396882>=-0xfe3+0x7*-0x17b+0x1a41){for(let _0x514a89=0x1676+-0x37*-0x34+-0x3*0xb36;_0x514a89<_0x527311['length'];++_0x514a89)_0x498a45=_0x527311[_0x514a89],_0x273c3d=_0x5b76a6[_0x514a89],_0x2d6e40=_0x273c3d['value'],Ht['set'](_0x2d6e40,_0x498a45,_0x273c3d['target']['type']),_0x273c3d['blendCount'+'er']++;}else{if(_0x396882>0x1*-0x33d+-0xe*0x169+0x3*0x7a9){for(let _0x1bc4bd=-0x1*0x1eef+-0x2d*0x6f+0x3272;_0x1bc4bd<_0x527311['length'];++_0x1bc4bd)_0x498a45=_0x527311[_0x1bc4bd],_0x273c3d=_0x5b76a6[_0x1bc4bd],_0x2d6e40=_0x273c3d['value'],_0x273c3d['blendCount'+'er']===0x17*0x148+0x1398+-0x3110?Ht['set'](_0x2d6e40,_0x498a45,_0x273c3d['target']['type']):Ht['blend'](_0x2d6e40,_0x498a45,_0x396882,_0x273c3d['target']['type']),_0x273c3d['blendCount'+'er']++;}}}const _0x58672f=this['_targets'],_0x1bdea9=this['_binder'];for(const _0x48fe26 in _0x58672f)if(_0x58672f['hasOwnProp'+'erty'](_0x48fe26)){const _0x400f9f=_0x58672f[_0x48fe26];if(_0x1bdea9['animCompon'+'ent']&&_0x400f9f['target']['isTransfor'+'m']){const _0x29fc0b=_0x1bdea9['animCompon'+'ent']['targets'][_0x48fe26];_0x29fc0b['counter']===_0x29fc0b['layerCount'+'er']&&(_0x29fc0b['counter']=0x2125+-0xa03+0x1*-0x1722),_0x29fc0b['path']||(_0x29fc0b['path']=_0x48fe26,_0x29fc0b['baseValue']=_0x400f9f['target']['get'](),_0x29fc0b['setter']=_0x400f9f['target']['set']),_0x29fc0b['updateValu'+'e'](_0x1bdea9['layerIndex'],_0x400f9f['value']),_0x29fc0b['counter']++;}else _0x400f9f['target']['set'](_0x400f9f['value']);_0x400f9f['blendCount'+'er']=0x2*0x103+-0x1*0x10dd+-0xed7*-0x1;}this['_binder']['update'](_0x1ba03d);}}class ov{constructor(_0x59968b){this['_events']=[..._0x59968b],this['_events']['sort']((_0x5907bb,_0x48123d)=>_0x5907bb['time']-_0x48123d['time']);}get['events'](){return this['_events'];}}const wh=class wh{constructor(_0x46f5aa,_0x56cd8c,_0x53171f,_0x27dcd9,_0x5358db,_0x4349b1=new ov([])){this['_name']=_0x46f5aa,this['_duration']=_0x56cd8c,this['_inputs']=_0x53171f,this['_outputs']=_0x27dcd9,this['_curves']=_0x5358db,this['_animEvent'+'s']=_0x4349b1;}get['name'](){return this['_name'];}get['duration'](){return this['_duration'];}get['inputs'](){return this['_inputs'];}get['outputs'](){return this['_outputs'];}get['curves'](){return this['_curves'];}set['events'](_0x30186d){this['_animEvent'+'s']=_0x30186d;}get['events'](){return this['_animEvent'+'s']['events'];}['eval'](_0x17167f,_0x1c71d8){_0x1c71d8['_time']=_0x17167f;const _0x10ce72=this['_inputs'],_0x5674f3=this['_outputs'],_0x22b82b=this['_curves'],_0xab052=_0x1c71d8['_cache'],_0x20e50c=_0x1c71d8['_results'];for(let _0x4ff2a6=-0x67*-0x4a+0x18c5+-0x368b;_0x4ff2a6<_0x10ce72['length'];++_0x4ff2a6)_0xab052[_0x4ff2a6]['update'](_0x17167f,_0x10ce72[_0x4ff2a6]['_data']);for(let _0x57801a=-0x2f*0xc6+0x323*-0x3+0x2dc3;_0x57801a<_0x22b82b['length'];++_0x57801a){const _0x5205ee=_0x22b82b[_0x57801a],_0x795b41=_0x5674f3[_0x5205ee['_output']],_0x3e05af=_0x20e50c[_0x57801a];_0xab052[_0x5205ee['_input']]['eval'](_0x3e05af,_0x5205ee['_interpola'+'tion'],_0x795b41);}}};h(wh,'EMPTY',Object['freeze'](new wh('empty',Number['MAX_VALUE'],[],[],[])));let Zi=wh;class Jr{static['joinPath'](_0x43ab48,_0x3b5d65){_0x3b5d65=_0x3b5d65||'.';const _0x452e66=function(_0x4b0d0c){return _0x4b0d0c['replace'](/\\/g,'\x5c\x5c')['replace'](new RegExp('\x5c'+_0x3b5d65,'g'),'\x5c'+_0x3b5d65);};return _0x43ab48['map'](_0x452e66)['join'](_0x3b5d65);}static['splitPath'](_0x55c20b,_0xd3560){_0xd3560=_0xd3560||'.';const _0x55d3e2=[];let _0x2734db='',_0x4668e6=-0x958+0x26bf+-0x1d67;for(;_0x4668e6<_0x55c20b['length'];){let _0x3cbd35=_0x55c20b[_0x4668e6++];_0x3cbd35==='\x5c'&&_0x4668e6<_0x55c20b['length']?(_0x3cbd35=_0x55c20b[_0x4668e6++],_0x3cbd35==='\x5c'||_0x3cbd35===_0xd3560?_0x2734db+=_0x3cbd35:_0x2734db+='\x5c'+_0x3cbd35):_0x3cbd35===_0xd3560?(_0x55d3e2['push'](_0x2734db),_0x2734db=''):_0x2734db+=_0x3cbd35;}return _0x2734db['length']>0x10b6+-0x1346+0x290&&_0x55d3e2['push'](_0x2734db),_0x55d3e2;}static['encode'](_0x44d652,_0x286f2f,_0x25c05e){return(Array['isArray'](_0x44d652)?_0x44d652['join']('/'):_0x44d652)+'/'+_0x286f2f+'/'+(Array['isArray'](_0x25c05e)?_0x25c05e['join']('/'):_0x25c05e);}['resolve'](_0xee874b){return null;}['unresolve'](_0xd387bd){}['update'](_0x1f2bc7){}}class Yf{constructor(_0x26bace,_0x27ca65,_0x2f1b70,_0x503b69){_0x26bace['set']?(this['_set']=_0x26bace['set'],this['_get']=_0x26bace['get']):this['_set']=_0x26bace,this['_type']=_0x27ca65,this['_component'+'s']=_0x2f1b70,this['_targetPat'+'h']=_0x503b69,this['_isTransfo'+'rm']=this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0x1f9*-0xf+-0x3e1*0x5+0x3109*0x1))==='localRotat'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(-0x1fd6+-0x3b0*-0x3+0x14d3))==='localPosit'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0xbe+-0x2156+0x1051*0x2))==='localScale';}get['set'](){return this['_set'];}get['get'](){return this['_get'];}get['type'](){return this['_type'];}get['components'](){return this['_component'+'s'];}get['targetPath'](){return this['_targetPat'+'h'];}get['isTransfor'+'m'](){return this['_isTransfo'+'rm'];}}class pr{constructor(_0x2d53f0){h(this,'_isPathInM'+'ask',(_0x3ca0c3,_0xcaef7b)=>{const _0x344e07=this['_mask'][_0x3ca0c3];if(_0x344e07){if(_0x344e07['children']||_0xcaef7b&&_0x344e07['value']!==!(0x218b+-0x3b9*0x9+-0x3*0x3))return!(-0x1951+0x11d1*-0x2+0x3cf3);}else return!(0x2*0xa06+0x196+-0x15a1);return!(0xf2*-0x29+0x2d1*-0x5+0x34d8);});if(this['graph']=_0x2d53f0,!_0x2d53f0)return;this['_mask']=null;const _0x270850={},_0x3f99a3=function(_0xfa9956){_0x270850[_0xfa9956['name']]=_0xfa9956;for(let _0x26dfe4=0x1e4e+-0x121+0x2a7*-0xb;_0x26dfe4<_0xfa9956['children']['length'];++_0x26dfe4)_0x3f99a3(_0xfa9956['children'][_0x26dfe4]);};_0x3f99a3(_0x2d53f0),this['nodes']=_0x270850,this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={};const _0x5bc562=function(_0x41f979){let _0x142376=_0x41f979;for(;_0x142376&&!(_0x142376 instanceof lt);)_0x142376=_0x142376['parent'];let _0x2fff86;return _0x142376&&(_0x142376['render']?_0x2fff86=_0x142376['render']['meshInstan'+'ces']:_0x142376['model']&&(_0x2fff86=_0x142376['model']['meshInstan'+'ces'])),_0x2fff86;};this['nodeCounts']={},this['activeNode'+'s']=[],this['handlers']={'localPosition':function(_0x2641a5){const _0x5df8d7=_0x2641a5['localPosit'+'ion'],_0x598b2c=function(_0x100f6c){_0x5df8d7['set'](..._0x100f6c);};return pr['createAnim'+'Target'](_0x598b2c,'vector',-0x1892+0x1bbe+-0x1*0x329,_0x2641a5,'localPosit'+'ion');},'localRotation':function(_0x3d5a70){const _0x380333=_0x3d5a70['localRotat'+'ion'],_0x4a5eb1=function(_0x3f8e68){_0x380333['set'](..._0x3f8e68);};return pr['createAnim'+'Target'](_0x4a5eb1,'quaternion',-0x3d*0x2+-0x175e*-0x1+-0xb70*0x2,_0x3d5a70,'localRotat'+'ion');},'localScale':function(_0x1021dd){const _0x2545fc=_0x1021dd['localScale'],_0x4f1892=function(_0x55f18d){_0x2545fc['set'](..._0x55f18d);};return pr['createAnim'+'Target'](_0x4f1892,'vector',-0x1*-0xcaa+-0x1d*0xf7+0x1b4*0x9,_0x1021dd,'localScale');},'weight':function(_0x38ebbd,_0x3f61c3){_0x3f61c3['indexOf']('name.')===0x1da*-0x2+0xb7e*0x3+-0x1ec6?_0x3f61c3=_0x3f61c3['replace']('name.',''):_0x3f61c3=Number(_0x3f61c3);const _0x1722c3=_0x5bc562(_0x38ebbd);let _0x28bd8f;if(_0x1722c3){for(let _0x1dfac3=-0x12d6*-0x1+0x184c+0x2*-0x1591;_0x1dfac3<_0x1722c3['length'];++_0x1dfac3)if(_0x1722c3[_0x1dfac3]['node']['name']===_0x38ebbd['name']&&_0x1722c3[_0x1dfac3]['morphInsta'+'nce']){const _0x4d6322=_0x1722c3[_0x1dfac3]['morphInsta'+'nce'],_0x4e396a=_0xa04ceb=>{_0x4d6322['setWeight'](_0x3f61c3,_0xa04ceb[-0x1*0x21e4+0xeee+0x97b*0x2]);};_0x28bd8f||(_0x28bd8f=[]),_0x28bd8f['push'](_0x4e396a);}}if(_0x28bd8f){const _0x1f3544=_0x43f957=>{for(let _0x561168=-0x160*-0x6+-0x4*0x54b+0x33b*0x4;_0x561168<_0x28bd8f['length'];++_0x561168)_0x28bd8f[_0x561168](_0x43f957);};return pr['createAnim'+'Target'](_0x1f3544,'number',0x1f50+-0xa*-0x274+-0x37d7,_0x38ebbd,'weight.'+_0x3f61c3);}return null;},'materialTexture':(_0xcdc2db,_0x35e432)=>{const _0x3a03e8=_0x5bc562(_0xcdc2db);if(_0x3a03e8){let _0x443c71;for(let _0x5b2538=0x18cd*-0x1+0x1b0a*0x1+0x1*-0x23d;_0x5b2538<_0x3a03e8['length'];++_0x5b2538)if(_0x3a03e8[_0x5b2538]['node']['name']===_0xcdc2db['name']){_0x443c71=_0x3a03e8[_0x5b2538];break;}if(_0x443c71){const _0x352304=_0x5d459d=>{const _0x2ccfbd=this['animCompon'+'ent']['system']['app']['assets']['get'](_0x5d459d[-0x452+-0x10b7+0x703*0x3]);_0x2ccfbd&&_0x2ccfbd['resource']&&_0x2ccfbd['type']==='texture'&&(_0x443c71['material'][_0x35e432]=_0x2ccfbd['resource'],_0x443c71['material']['update']());};return pr['createAnim'+'Target'](_0x352304,'vector',0x3fa*0x8+-0xd17+-0x4ae*0x4,_0xcdc2db,'materialTe'+'xture','material');}}return null;}};}['_isPathAct'+'ive'](_0x3d00cf){if(!this['_mask'])return!(0xca7*-0x1+0x1974+-0xccd*0x1);const _0x28ac02=[_0x3d00cf['entityPath'][-0x188*0x1+0x16*0xeb+-0x2*0x955],this['graph']['name']];for(let _0x825954=-0x226e+-0x1*0x2709+0x4977;_0x825954<_0x28ac02['length'];++_0x825954){let _0xb8ad49=_0x28ac02[_0x825954];if(this['_isPathInM'+'ask'](_0xb8ad49,_0x3d00cf['entityPath']['length']===-0x1090+-0xf1*-0x1f+-0xc9e))return!(-0x168a+0xf2d+0x75d);for(let _0xdfe823=0x224e+-0x11eb*0x1+-0x1062;_0xdfe823<_0x3d00cf['entityPath']['length'];_0xdfe823++)if(_0xb8ad49+='/'+_0x3d00cf['entityPath'][_0xdfe823],this['_isPathInM'+'ask'](_0xb8ad49,_0xdfe823===_0x3d00cf['entityPath']['length']-(-0x1d01+-0x891+0x1*0x2593)))return!(-0x3*-0x7db+-0x110d+0x22c*-0x3);}return!(-0x3*-0x919+-0x20b*-0x13+-0x421b);}['findNode'](_0x5ca903){if(!this['_isPathAct'+'ive'](_0x5ca903))return null;let _0x3db63f;if(this['graph']&&(_0x3db63f=this['graph']['findByPath'](_0x5ca903['entityPath']),_0x3db63f||(_0x3db63f=this['graph']['findByPath'](_0x5ca903['entityPath']['slice'](0x155c+0x5*-0x469+0xb2)))),!_0x3db63f){_0x3db63f=this['nodes'][_0x5ca903['entityPath'][_0x5ca903['entityPath']['length']-(0x1f*-0x58+-0x18a4+0x234d)]||''];const _0x13cc13=Jr['encode'](_0x5ca903['entityPath'][_0x5ca903['entityPath']['length']-(-0x1c9e+0x3*-0x16f+0x20ec)]||'','graph',_0x5ca903['propertyPa'+'th']);this['visitedFal'+'lbackGraph'+'Paths'][_0x13cc13]===-0x21ad+-0x15e2+0x3790&&w['warnOnce']('Anim\x20Binde'+'r:\x20Multipl'+'e\x20animatio'+'n\x20curves\x20w'+'ith\x20the\x20pa'+'th\x20'+_0x13cc13+('\x20are\x20prese'+'nt\x20in\x20the\x20')+this['graph']['path']+('\x20graph\x20whi'+'ch\x20may\x20res'+'ult\x20in\x20the'+'\x20incorrect'+'\x20binding\x20o'+'f\x20animatio'+'ns')),Number['isFinite'](this['visitedFal'+'lbackGraph'+'Paths'][_0x13cc13])?this['visitedFal'+'lbackGraph'+'Paths'][_0x13cc13]++:this['visitedFal'+'lbackGraph'+'Paths'][_0x13cc13]=-0x2*-0x843+-0x1*-0x9b+-0x1121;}return _0x3db63f;}static['createAnim'+'Target'](_0x240ece,_0x28fc96,_0x4c5cf0,_0x561ef9,_0x453c7b,_0x3b1517){const _0x1e5261=Jr['encode'](_0x561ef9['path'],_0x3b1517||'entity',_0x453c7b);return new Yf(_0x240ece,_0x28fc96,_0x4c5cf0,_0x1e5261);}['resolve'](_0x4500f1){const _0x4a6575=Jr['encode'](_0x4500f1['entityPath'],_0x4500f1['component'],_0x4500f1['propertyPa'+'th']);let _0x53fcbc=this['targetCach'+'e'][_0x4a6575];if(_0x53fcbc)return _0x53fcbc;const _0x55ef48=this['findNode'](_0x4500f1);if(!_0x55ef48)return null;const _0x517e1a=this['handlers'][_0x4500f1['propertyPa'+'th']];return!_0x517e1a||(_0x53fcbc=_0x517e1a(_0x55ef48),!_0x53fcbc)?null:(this['targetCach'+'e'][_0x4a6575]=_0x53fcbc,this['nodeCounts'][_0x55ef48['path']]?this['nodeCounts'][_0x55ef48['path']]++:(this['activeNode'+'s']['push'](_0x55ef48),this['nodeCounts'][_0x55ef48['path']]=-0x4*-0x752+0x909+-0x2650),_0x53fcbc);}['unresolve'](_0xb96608){if(_0xb96608['component']!=='graph')return;const _0x400355=this['nodes'][_0xb96608['entityPath'][_0xb96608['entityPath']['length']-(-0xad0+0xa5*0x5+-0x48*-0x1b)]||''];if(this['nodeCounts'][_0x400355['path']]--,this['nodeCounts'][_0x400355['path']]===0x2ea*0x4+-0x2584+0x19dc){const _0x2fd42a=this['activeNode'+'s'],_0x91f110=_0x2fd42a['indexOf'](_0x400355['node']),_0x5e6439=_0x2fd42a['length'];_0x91f110<_0x5e6439-(-0x3cf*-0x1+0x1aed+-0x1ebb)&&(_0x2fd42a[_0x91f110]=_0x2fd42a[_0x5e6439-(-0xd2f+-0x1*0x1001+0x1d31)]),_0x2fd42a['pop']();}}['update'](_0x508dca){const _0x333280=this['activeNode'+'s'];for(let _0xfaa37b=-0x1*-0x305+0x1*-0x11c3+-0x6*-0x275;_0xfaa37b<_0x333280['length'];++_0xfaa37b)_0x333280[_0xfaa37b]['_dirtifyLo'+'cal']();}['assignMask'](_0x1e7f25){return _0x1e7f25!==this['_mask']?(this['_mask']=_0x1e7f25,!(-0x11*-0x7b+-0x15b*-0x1b+-0x2cc4)):!(-0x1*-0x8ff+0x2179+-0x611*0x7);}}class lv extends we{constructor(){super(...arguments),h(this,'_animation'+'s',{}),h(this,'_assets',[]),h(this,'_loop',!(-0x1*0xe5d+0x1c8c+-0xe2f)),h(this,'animEvalua'+'tor',null),h(this,'model',null),h(this,'skeleton',null),h(this,'fromSkel',null),h(this,'toSkel',null),h(this,'animations'+'Index',{}),h(this,'prevAnim',null),h(this,'currAnim',null),h(this,'blend',0x2*0x668+-0x11e*-0x1c+0x583*-0x8),h(this,'blending',!(-0xb53+0x1013+-0x4bf)),h(this,'blendSpeed',-0xd*0x7b+0xd42+-0x5*0x167),h(this,'activate',!(0x170e+0x4*0x37d+-0x2502)),h(this,'speed',0x159f+0x27*-0xd+-0x13a3);}set['animations'](_0x37154c){this['_animation'+'s']=_0x37154c,this['onSetAnima'+'tions']();}get['animations'](){return this['_animation'+'s'];}set['assets'](_0x14b8e2){const _0x24de6f=this['_assets'];if(_0x24de6f&&_0x24de6f['length']){for(let _0x2c9d13=0xac9+-0xf2b*-0x1+0x97*-0x2c;_0x2c9d13<_0x24de6f['length'];_0x2c9d13++)if(_0x24de6f[_0x2c9d13]){const _0x569688=this['system']['app']['assets']['get'](_0x24de6f[_0x2c9d13]);if(_0x569688){_0x569688['off']('change',this['onAssetCha'+'nged'],this),_0x569688['off']('remove',this['onAssetRem'+'oved'],this);const _0x38f729=this['animations'+'Index'][_0x569688['id']];this['currAnim']===_0x38f729&&this['_stopCurre'+'ntAnimatio'+'n'](),delete this['animations'][_0x38f729],delete this['animations'+'Index'][_0x569688['id']];}}}this['_assets']=_0x14b8e2;const _0x389e4a=_0x14b8e2['map'](_0x17b6d8=>_0x17b6d8 instanceof pe?_0x17b6d8['id']:_0x17b6d8);this['loadAnimat'+'ionAssets'](_0x389e4a);}get['assets'](){return this['_assets'];}set['currentTim'+'e'](_0x35f932){if(this['skeleton']&&(this['skeleton']['currentTim'+'e']=_0x35f932,this['skeleton']['addTime'](0x5*-0x717+0x12b8+0x10bb),this['skeleton']['updateGrap'+'h']()),this['animEvalua'+'tor']){const _0x2a0df2=this['animEvalua'+'tor']['clips'];for(let _0x4a4c01=0x35c*0x4+0x2*-0x2b4+-0x808;_0x4a4c01<_0x2a0df2['length'];++_0x4a4c01)_0x2a0df2[_0x4a4c01]['time']=_0x35f932;}}get['currentTim'+'e'](){if(this['skeleton'])return this['skeleton']['_time'];if(this['animEvalua'+'tor']){const _0x109718=this['animEvalua'+'tor']['clips'];if(_0x109718['length']>0x132e+-0x21f0+0x761*0x2)return _0x109718[_0x109718['length']-(-0x172+0x191c+-0x9*0x2a1)]['time'];}return 0x97*0x29+-0x1294+-0x59b;}get['duration'](){return this['currAnim']?this['animations'][this['currAnim']]['duration']:(w['warn']('No\x20animati'+'on\x20is\x20play'+'ing\x20to\x20get'+'\x20a\x20duratio'+'n.\x20Returni'+'ng\x200.'),-0x2*0xec8+0xb1b+0x1275);}set['loop'](_0x2e837d){if(this['_loop']=_0x2e837d,this['skeleton']&&(this['skeleton']['looping']=_0x2e837d),this['animEvalua'+'tor']){for(let _0x3aac90=0x211c+0xb*-0x205+0xae5*-0x1;_0x3aac90<this['animEvalua'+'tor']['clips']['length'];++_0x3aac90)this['animEvalua'+'tor']['clips'][_0x3aac90]['loop']=_0x2e837d;}}get['loop'](){return this['_loop'];}['play'](_0x362b51,_0xeb26b=0x1ee*-0xa+-0x8a5+0x17*0x137){if(!(!this['enabled']||!this['entity']['enabled'])){if(!this['animations'][_0x362b51]){w['error']('Trying\x20to\x20'+'play\x20anima'+'tion\x20\x27'+_0x362b51+('\x27\x20which\x20do'+'esn\x27t\x20exis'+'t'));return;}if(this['prevAnim']=this['currAnim'],this['currAnim']=_0x362b51,this['model']){!this['skeleton']&&!this['animEvalua'+'tor']&&this['_createAni'+'mationCont'+'roller']();const _0xb5d2b3=this['animations'][this['prevAnim']],_0x37cb8=this['animations'][this['currAnim']];if(this['blending']=_0xeb26b>-0x1313+0x6e5*0x1+0x2*0x617&&!!this['prevAnim'],this['blending']&&(this['blend']=-0x67d+0x1d96+-0x1719,this['blendSpeed']=(0x3*0x312+0x10b4+-0x19e9)/_0xeb26b),this['skeleton']&&(this['blending']?(this['fromSkel']['animation']=_0xb5d2b3,this['fromSkel']['addTime'](this['skeleton']['_time']),this['toSkel']['animation']=_0x37cb8):this['skeleton']['animation']=_0x37cb8),this['animEvalua'+'tor']){const _0x5083f4=this['animEvalua'+'tor'];if(this['blending']){for(;_0x5083f4['clips']['length']>0x12ca*-0x2+0x901+-0x1f*-0xec;)_0x5083f4['removeClip'](0x8e1+-0x9a1+0xc0);}else this['animEvalua'+'tor']['removeClip'+'s']();const _0x436314=new lh(this['animations'][this['currAnim']],-0x2600+-0x1*-0x951+0x1caf,0x461+0x23b4+-0x2814,!(0x1123*0x1+0x1ecd+0x1d8*-0x1a),this['loop']);_0x436314['name']=this['currAnim'],_0x436314['blendWeigh'+'t']=this['blending']?0x25c0+0x189e+-0xa65*0x6:0x25b6+0x1d62*0x1+0x1*-0x4317,_0x436314['reset'](),this['animEvalua'+'tor']['addClip'](_0x436314);}}this['playing']=!(0x95*-0x13+0x1*-0x7c9+-0xc9*-0x18);}}['getAnimati'+'on'](_0x174e1c){return this['animations'][_0x174e1c];}['setModel'](_0xaf2e4c){_0xaf2e4c!==this['model']&&(this['_resetAnim'+'ationContr'+'oller'](),this['model']=_0xaf2e4c,this['animations']&&this['currAnim']&&this['animations'][this['currAnim']]&&this['play'](this['currAnim']));}['onSetAnima'+'tions'](){const _0x5ab81a=this['entity']['model'];if(_0x5ab81a){const _0x3b55e4=_0x5ab81a['model'];_0x3b55e4&&_0x3b55e4!==this['model']&&this['setModel'](_0x3b55e4);}if(!this['currAnim']&&this['activate']&&this['enabled']&&this['entity']['enabled']){const _0x34333e=Object['keys'](this['_animation'+'s']);_0x34333e['length']>0x723+0x286*-0x7+0xa87&&this['play'](_0x34333e[0x3*-0xc11+0x1179+0x12ba]);}}['_resetAnim'+'ationContr'+'oller'](){this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['_createAni'+'mationCont'+'roller'](){const _0x1aa2cf=this['model'],_0x3b0fed=this['animations'];let _0x216610=!(-0x4d7+0x8b1+0x1*-0x3d9),_0x47554a=!(-0xf1*-0x11+-0x3*0xb04+0x4*0x443);for(const _0x2e1402 in _0x3b0fed)_0x3b0fed['hasOwnProp'+'erty'](_0x2e1402)&&(_0x3b0fed[_0x2e1402]['constructo'+'r']===Zi?_0x47554a=!(-0x2205+0x8*0x12c+-0x2bd*-0x9):_0x216610=!(0xa7b+-0x2*0x965+0x84f));const _0x234a93=_0x1aa2cf['getGraph']();_0x216610?(this['fromSkel']=new Yd(_0x234a93),this['toSkel']=new Yd(_0x234a93),this['skeleton']=new Yd(_0x234a93),this['skeleton']['looping']=this['loop'],this['skeleton']['setGraph'](_0x234a93)):_0x47554a&&(this['animEvalua'+'tor']=new nv(new pr(this['entity'])));}['loadAnimat'+'ionAssets'](_0x4912d7){if(!_0x4912d7||!_0x4912d7['length'])return;const _0x932f10=this['system']['app']['assets'],_0x329e96=_0x32bc8a=>{if(_0x32bc8a['resources']['length']>0x26ca+-0xe*-0xa+-0x1*0x2755){for(let _0x241d04=-0x1ef7+0x5c*-0x53+0x1*0x3ccb;_0x241d04<_0x32bc8a['resources']['length'];_0x241d04++)this['animations'][_0x32bc8a['resources'][_0x241d04]['name']]=_0x32bc8a['resources'][_0x241d04],this['animations'+'Index'][_0x32bc8a['id']]=_0x32bc8a['resources'][_0x241d04]['name'];}else this['animations'][_0x32bc8a['name']]=_0x32bc8a['resource'],this['animations'+'Index'][_0x32bc8a['id']]=_0x32bc8a['name'];this['animations']=this['animations'];},_0x5d000a=_0x3ba16c=>{_0x3ba16c['off']('change',this['onAssetCha'+'nged'],this),_0x3ba16c['on']('change',this['onAssetCha'+'nged'],this),_0x3ba16c['off']('remove',this['onAssetRem'+'oved'],this),_0x3ba16c['on']('remove',this['onAssetRem'+'oved'],this),_0x3ba16c['resource']?_0x329e96(_0x3ba16c):(_0x3ba16c['once']('load',_0x329e96,this),this['enabled']&&this['entity']['enabled']&&_0x932f10['load'](_0x3ba16c));};for(let _0x4a1daa=0x2ef*0x8+-0x87e*-0x2+-0x2874,_0x1f2565=_0x4912d7['length'];_0x4a1daa<_0x1f2565;_0x4a1daa++){const _0x280f48=_0x932f10['get'](_0x4912d7[_0x4a1daa]);_0x280f48?_0x5d000a(_0x280f48):_0x932f10['on']('add:'+_0x4912d7[_0x4a1daa],_0x5d000a);}}['onAssetCha'+'nged'](_0x167243,_0x360d34,_0x455587,_0x17b790){if(_0x360d34==='resource'||_0x360d34==='resources'){if(_0x360d34==='resources'&&_0x455587&&_0x455587['length']===-0x12ee+0x106*0x22+-0xfde&&(_0x455587=null),_0x455587){let _0x55027c=!(0x19*0xc7+-0x7a+-0x12f4);if(_0x455587['length']>-0x1*0x1093+0x509*0x3+0x179){if(_0x17b790&&_0x17b790['length']>0x1a69+-0xd*0x1f3+-0x111){for(let _0x427f6c=0xdf*-0x13+-0x8*0x2c6+0xd3*0x2f;_0x427f6c<_0x17b790['length'];_0x427f6c++)delete this['animations'][_0x17b790[_0x427f6c]['name']];}else delete this['animations'][_0x167243['name']];_0x55027c=!(0x705+0x1*0xe21+-0x1*0x1525);for(let _0x5cceb9=0x1b91+0xe*0xf2+0x829*-0x5;_0x5cceb9<_0x455587['length'];_0x5cceb9++)this['animations'][_0x455587[_0x5cceb9]['name']]=_0x455587[_0x5cceb9],!_0x55027c&&this['currAnim']===_0x455587[_0x5cceb9]['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x55027c=!(-0x1574+0xa85+0xaef),this['play'](_0x455587[_0x5cceb9]['name']));_0x55027c||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}else{if(_0x17b790&&_0x17b790['length']>-0x1*-0x1b7+0x1aea*0x1+-0x1ca0*0x1){for(let _0x3b56f0=-0x1*0x1f84+0x1b91*0x1+0x151*0x3;_0x3b56f0<_0x17b790['length'];_0x3b56f0++)delete this['animations'][_0x17b790[_0x3b56f0]['name']];}this['animations'][_0x167243['name']]=_0x455587[0x1207+-0x1f38+-0x133*-0xb]||_0x455587,_0x55027c=!(-0x137*-0x19+0x4a*-0x56+-0x2c1*0x2),this['currAnim']===_0x167243['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x55027c=!(0xcd0*-0x3+0x114d*-0x1+0x1*0x37bd),this['play'](_0x167243['name'])),_0x55027c||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}this['animations'+'Index'][_0x167243['id']]=_0x167243['name'];}else{if(_0x17b790['length']>0xc*0x141+0x1dcf+-0x2cda*0x1){for(let _0x35343a=0x61*0x67+-0x223*0x4+-0x1e7b;_0x35343a<_0x17b790['length'];_0x35343a++)delete this['animations'][_0x17b790[_0x35343a]['name']],this['currAnim']===_0x17b790[_0x35343a]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x167243['name']],this['currAnim']===_0x167243['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x167243['id']];}}}['onAssetRem'+'oved'](_0x1d03f9){if(_0x1d03f9['off']('remove',this['onAssetRem'+'oved'],this),this['animations']){if(_0x1d03f9['resources']['length']>0x2413+0x4*-0x27e+0x202*-0xd){for(let _0x2ac5e9=0xca1+-0x1cf+-0x115*0xa;_0x2ac5e9<_0x1d03f9['resources']['length'];_0x2ac5e9++)delete this['animations'][_0x1d03f9['resources'][_0x2ac5e9]['name']],this['currAnim']===_0x1d03f9['resources'][_0x2ac5e9]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x1d03f9['name']],this['currAnim']===_0x1d03f9['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x1d03f9['id']];}}['_stopCurre'+'ntAnimatio'+'n'](){if(this['currAnim']=null,this['playing']=!(-0x1*0x1ce7+-0xe8f*0x1+0x2b77),this['skeleton']&&(this['skeleton']['currentTim'+'e']=-0xcb0+0xc32+-0x6*-0x15,this['skeleton']['animation']=null),this['animEvalua'+'tor']){for(let _0xbe55cb=0x5*-0x18f+0x1f1e+-0x1753;_0xbe55cb<this['animEvalua'+'tor']['clips']['length'];++_0xbe55cb)this['animEvalua'+'tor']['clips'][_0xbe55cb]['stop']();this['animEvalua'+'tor']['update'](0x21e7+0xcb8+-0xd9*0x37),this['animEvalua'+'tor']['removeClip'+'s']();}}['onEnable'](){super['onEnable']();const _0x560557=this['assets'],_0x64bc79=this['system']['app']['assets'];if(_0x560557)for(let _0x868bb8=-0xf94+0x17*0x37+0x185*0x7,_0x20c6c7=_0x560557['length'];_0x868bb8<_0x20c6c7;_0x868bb8++){let _0x47472c=_0x560557[_0x868bb8];_0x47472c instanceof pe||(_0x47472c=_0x64bc79['get'](_0x47472c)),_0x47472c&&!_0x47472c['resource']&&_0x64bc79['load'](_0x47472c);}if(this['activate']&&!this['currAnim']){const _0x20f59a=Object['keys'](this['animations']);_0x20f59a['length']>-0x1cf+0x747+-0x578&&this['play'](_0x20f59a[-0x1*0x2032+0x753*0x1+0x18df]);}}['onBeforeRe'+'move'](){for(let _0x1341a9=0x25e0+0x4f5*-0x7+-0x3*0x10f;_0x1341a9<this['assets']['length'];_0x1341a9++){let _0x12dec8=this['assets'][_0x1341a9];typeof _0x12dec8=='number'&&(_0x12dec8=this['system']['app']['assets']['get'](_0x12dec8)),_0x12dec8&&(_0x12dec8['off']('change',this['onAssetCha'+'nged'],this),_0x12dec8['off']('remove',this['onAssetRem'+'oved'],this));}this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['update'](_0x1f3fd2){if(this['blending']&&(this['blend']+=_0x1f3fd2*this['blendSpeed'],this['blend']>=-0x1*0xd36+-0x573+0x12aa*0x1&&(this['blend']=0x714*0x1+-0x1daa+0x1697*0x1)),this['playing']){const _0x236396=this['skeleton'];if(_0x236396!==null&&this['model']!==null){if(this['blending'])_0x236396['blend'](this['fromSkel'],this['toSkel'],this['blend']);else{const _0x395134=_0x1f3fd2*this['speed'];_0x236396['addTime'](_0x395134),this['speed']>0x1ba6+-0x83*0x2f+-0x399&&_0x236396['_time']===_0x236396['animation']['duration']&&!this['loop']?this['playing']=!(-0x2*0x2ff+-0x1408+0x3*0x8ad):this['speed']<-0x2*-0x745+0x2*0x328+-0x13a*0x11&&_0x236396['_time']===-0xfb8*0x1+0xcc9+0x2ef&&!this['loop']&&(this['playing']=!(0x52f*0x2+-0x224b*-0x1+-0x2ca8));}this['blending']&&this['blend']===0x2*-0xe5a+0x1*0x2605+-0x950&&(_0x236396['animation']=this['toSkel']['animation']),_0x236396['updateGrap'+'h']();}}const _0x32a5df=this['animEvalua'+'tor'];if(_0x32a5df){for(let _0x25d64f=0x2363*0x1+0xb*0x83+-0x2904;_0x25d64f<_0x32a5df['clips']['length'];++_0x25d64f){const _0x56dd13=_0x32a5df['clips'][_0x25d64f];_0x56dd13['speed']=this['speed'],this['playing']?_0x56dd13['resume']():_0x56dd13['pause']();}this['blending']&&_0x32a5df['clips']['length']>-0x3*-0xd9+-0xa48+-0x1*-0x7be&&(_0x32a5df['clips'][-0x1f*0x82+0x170f*0x1+-0x750]['blendWeigh'+'t']=this['blend']),_0x32a5df['update'](_0x1f3fd2);}this['blending']&&this['blend']===0x1fc2+0x381+-0x2342&&(this['blending']=!(0x2699*0x1+0x1*0x20d1+0xb5*-0x65));}}class KI{constructor(){this['enabled']=!(0x16b9+-0x1f43+0x88a);}}const Kf=['enabled'];class ZI extends ct{constructor(_0x356fcc){super(_0x356fcc),this['id']='animation',this['ComponentT'+'ype']=lv,this['DataType']=KI,this['schema']=Kf,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x17d62b,_0x2a5563,_0x2a2125){_0x2a2125=['activate','enabled','loop','speed','assets'];for(const _0x71d8a6 of _0x2a2125)_0x2a5563['hasOwnProp'+'erty'](_0x71d8a6)&&(_0x17d62b[_0x71d8a6]=_0x2a5563[_0x71d8a6]);super['initialize'+'ComponentD'+'ata'](_0x17d62b,_0x2a5563,Kf);}['cloneCompo'+'nent'](_0x31c4fa,_0x3327ca){this['addCompone'+'nt'](_0x3327ca,{}),_0x3327ca['animation']['assets']=_0x31c4fa['animation']['assets']['slice'](),_0x3327ca['animation']['speed']=_0x31c4fa['animation']['speed'],_0x3327ca['animation']['loop']=_0x31c4fa['animation']['loop'],_0x3327ca['animation']['activate']=_0x31c4fa['animation']['activate'],_0x3327ca['animation']['enabled']=_0x31c4fa['animation']['enabled'];const _0x1dd3ac={},_0x595b66=_0x31c4fa['animation']['animations'];for(const _0x84f0c3 in _0x595b66)_0x595b66['hasOwnProp'+'erty'](_0x84f0c3)&&(_0x1dd3ac[_0x84f0c3]=_0x595b66[_0x84f0c3]);_0x3327ca['animation']['animations']=_0x1dd3ac;const _0x5e7e3d={},_0x52670f=_0x31c4fa['animation']['animations'+'Index'];for(const _0x2e5662 in _0x52670f)_0x52670f['hasOwnProp'+'erty'](_0x2e5662)&&(_0x5e7e3d[_0x2e5662]=_0x52670f[_0x2e5662]);return _0x3327ca['animation']['animations'+'Index']=_0x5e7e3d,_0x3327ca['animation'];}['onBeforeRe'+'move'](_0x3edc20,_0x2203d7){_0x2203d7['onBeforeRe'+'move']();}['onUpdate'](_0x4678ec){const _0x8aa3c5=this['store'];for(const _0x22fc5b in _0x8aa3c5)if(_0x8aa3c5['hasOwnProp'+'erty'](_0x22fc5b)){const _0x251bb3=_0x8aa3c5[_0x22fc5b];_0x251bb3['data']['enabled']&&_0x251bb3['entity']['enabled']&&_0x251bb3['entity']['animation']['update'](_0x4678ec);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](lv['prototype'],Kf);class sl{constructor(_0x5a1a4,_0x516528,_0x2804ab,_0x430242,_0x11debd=0x10b*0xe+0xa7*-0x1f+0x5a0){this['_state']=_0x5a1a4,this['_parent']=_0x516528,this['_name']=_0x2804ab,Array['isArray'](_0x430242)?(this['_point']=new J(_0x430242[0x1*-0xfbb+0x1e8b+0x4*-0x3b4],_0x430242[0x2241+0x4f*-0x49+-0xbb9]),this['_pointLeng'+'th']=this['_point']['length']()):(this['_point']=_0x430242,this['_pointLeng'+'th']=_0x430242),this['_speed']=_0x11debd,this['_weightedS'+'peed']=-0x56e+-0x236*-0x7+-0xa0b,this['_weight']=-0x2*0xb23+-0x667*0x2+-0x1*-0x2315,this['_animTrack']=null;}get['parent'](){return this['_parent'];}get['name'](){return this['_name'];}get['path'](){return this['_parent']?this['_parent']['path']+'.'+this['_name']:this['_name'];}get['point'](){return this['_point'];}get['pointLengt'+'h'](){return this['_pointLeng'+'th'];}set['weight'](_0x4e2970){this['_weight']=_0x4e2970;}get['weight'](){return this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['normalized'+'Weight'](){const _0x15205f=this['_state']['totalWeigh'+'t'];return _0x15205f===-0xa93+-0x1c26+0x26b9?-0x1abf+-0xbe8+0x7bb*0x5:this['weight']/_0x15205f;}get['speed'](){return this['_weightedS'+'peed']*this['_speed'];}get['absoluteSp'+'eed'](){return Math['abs'](this['_speed']);}set['weightedSp'+'eed'](_0x137376){this['_weightedS'+'peed']=_0x137376;}get['weightedSp'+'eed'](){return this['_weightedS'+'peed'];}set['animTrack'](_0xb8ea17){this['_animTrack']=_0xb8ea17;}get['animTrack'](){return this['_animTrack'];}}class Xn extends sl{constructor(_0x20dbbb,_0x3e2f8b,_0x3c9351,_0x3d1d96,_0x2de95d,_0x486e04,_0x260d46,_0x4eaf3b,_0x5da820){super(_0x20dbbb,_0x3e2f8b,_0x3c9351,_0x3d1d96),this['_parameter'+'s']=_0x2de95d,this['_parameter'+'Values']=new Array(_0x2de95d['length']),this['_children']=[],this['_findParam'+'eter']=_0x5da820,this['_syncAnima'+'tions']=_0x260d46!==!(0x1ffc+-0xd9b+-0x1260),this['_pointCach'+'e']={};for(let _0x4fa699=-0x133b+-0x5bb+0x18f6;_0x4fa699<_0x486e04['length'];_0x4fa699++){const _0x312e00=_0x486e04[_0x4fa699];_0x312e00['children']?this['_children']['push'](_0x4eaf3b(_0x312e00['type'],_0x20dbbb,this,_0x312e00['name'],0x1*0x175f+-0x955+-0xe09,_0x312e00['parameter']?[_0x312e00['parameter']]:_0x312e00['parameters'],_0x312e00['children'],_0x312e00['syncAnimat'+'ions'],_0x4eaf3b,_0x5da820)):this['_children']['push'](new sl(_0x20dbbb,this,_0x312e00['name'],_0x312e00['point'],_0x312e00['speed']));}}get['weight'](){return this['calculateW'+'eights'](),this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['syncAnimat'+'ions'](){return this['_syncAnima'+'tions'];}['getChild'](_0x510336){for(let _0x24ae31=0x1227*0x1+0x96e+-0x1b95;_0x24ae31<this['_children']['length'];_0x24ae31++)if(this['_children'][_0x24ae31]['name']===_0x510336)return this['_children'][_0x24ae31];return null;}['updatePara'+'meterValue'+'s'](){let _0x1af4f3=!(-0x427*-0x1+-0x20e0+0x1cb9);for(let _0x5d5919=-0x68b+-0x3*0x236+0xd2d;_0x5d5919<this['_parameter'+'Values']['length'];_0x5d5919++){const _0x561497=this['_findParam'+'eter'](this['_parameter'+'s'][_0x5d5919])['value'];this['_parameter'+'Values'][_0x5d5919]!==_0x561497&&(this['_parameter'+'Values'][_0x5d5919]=_0x561497,_0x1af4f3=!(0x259*0x9+-0x79*-0x10+-0x1cb0));}return _0x1af4f3;}['getNodeWei'+'ghtedDurat'+'ion'](_0x196173){return this['_children'][_0x196173]['animTrack']['duration']/this['_children'][_0x196173]['speedMulti'+'plier']*this['_children'][_0x196173]['weight'];}['getNodeCou'+'nt'](){let _0x5c824a=0xc76+-0x7d9*-0x1+-0x144f;for(let _0x2fb2cb=0xff0+0x216*0xe+-0xc*0x3c3;_0x2fb2cb<this['_children']['length'];_0x2fb2cb++)this['_children'][_0x2fb2cb]['constructo'+'r']===Xn?_0x5c824a+=this['_children'][_0x2fb2cb]['getNodeCou'+'nt']():_0x5c824a++;return _0x5c824a;}}class QI extends Xn{constructor(_0x4b992a,_0x17e72d,_0x1b3ba7,_0x587934,_0x3c0a45,_0x3bb3a7,_0x3e953b,_0x84f516,_0x2284e8){_0x3bb3a7['sort']((_0xa85489,_0x18466)=>_0xa85489['point']-_0x18466['point']),super(_0x4b992a,_0x17e72d,_0x1b3ba7,_0x587934,_0x3c0a45,_0x3bb3a7,_0x3e953b,_0x84f516,_0x2284e8);}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x53924a=-0xa51*-0x3+0x4ad*0x2+-0x284d;this['_children'][-0x2*0xe9b+-0xb95+0x28cb]['weight']=0x2*0xa93+-0xae2+-0x49*0x24;for(let _0x1014b0=0x1*-0x405+-0xd5b+0x1160;_0x1014b0<this['_children']['length'];_0x1014b0++){const _0x9d76dd=this['_children'][_0x1014b0];if(_0x1014b0!==this['_children']['length']-(-0x1d*-0xb7+-0x24f*0x1+-0x126b)){const _0x43c6de=this['_children'][_0x1014b0+(-0x22a8+0xc14+0x1695)];if(_0x9d76dd['point']===_0x43c6de['point'])_0x9d76dd['weight']=-0x49*0xf+-0x824*0x2+-0x148f*-0x1+0.5,_0x43c6de['weight']=0x2495*-0x1+-0x160d*0x1+0x3aa2+0.5;else{if(Y['between'](this['_parameter'+'Values'][0x2444+-0x1174+-0x12d0],_0x9d76dd['point'],_0x43c6de['point'],!(0x115*0xa+0x1504+-0x1fd6))){const _0x42475e=Math['abs'](_0x9d76dd['point']-_0x43c6de['point']),_0x243148=Math['abs'](_0x9d76dd['point']-this['_parameter'+'Values'][0x3*-0xbcf+0x3*0x1a3+-0x117*-0x1c]),_0x10fec6=(_0x42475e-_0x243148)/_0x42475e;_0x9d76dd['weight']=_0x10fec6,_0x43c6de['weight']=-0x5b*-0x22+0xd*0xd0+-0x16a5-_0x10fec6;}else _0x43c6de['weight']=0x1*-0x2573+-0x7*-0x14f+-0x1c4a*-0x1;}}this['_syncAnima'+'tions']&&(_0x53924a+=_0x9d76dd['animTrack']['duration']/_0x9d76dd['absoluteSp'+'eed']*_0x9d76dd['weight']);}if(this['_syncAnima'+'tions'])for(let _0xcb9999=0x2*0x7b+0x6*0x5b1+-0x6b*0x54;_0xcb9999<this['_children']['length'];_0xcb9999++){const _0x24e725=this['_children'][_0xcb9999];_0x24e725['weightedSp'+'eed']=_0x24e725['animTrack']['duration']/_0x24e725['absoluteSp'+'eed']/_0x53924a;}}}const Ni=class Ni extends Xn{['pointDista'+'nceCache'](_0x118b42,_0x4d0636){const _0x5569a8=''+_0x118b42+_0x4d0636;return this['_pointCach'+'e'][_0x5569a8]||(this['_pointCach'+'e'][_0x5569a8]=this['_children'][_0x4d0636]['point']['clone']()['sub'](this['_children'][_0x118b42]['point'])),this['_pointCach'+'e'][_0x5569a8];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x310c82,_0x25e621;Ni['_p']['set'](...this['_parameter'+'Values']),_0x310c82=0x1de2+0xab8*-0x2+-0x872,_0x25e621=0x8cb+0x6*-0x412+-0xfa1*-0x1;for(let _0x10d09f=-0x2064+-0x27*0x41+0x2a4b;_0x10d09f<this['_children']['length'];_0x10d09f++){const _0x52513f=this['_children'][_0x10d09f],_0x4eab29=_0x52513f['point'];Ni['_pip']['set'](Ni['_p']['x'],Ni['_p']['y'])['sub'](_0x4eab29);let _0x14e698=Number['MAX_VALUE'];for(let _0x4f9810=0x22d7+0xf25+-0x31fc;_0x4f9810<this['_children']['length'];_0x4f9810++){if(_0x10d09f===_0x4f9810)continue;const _0x56f5b7=this['pointDista'+'nceCache'](_0x10d09f,_0x4f9810),_0x30dfc8=Y['clamp'](-0x1*-0x2cf+-0x6a3*-0x2+-0x1014-Ni['_pip']['dot'](_0x56f5b7)/_0x56f5b7['lengthSq'](),0x1d9c+0x3bb*-0x6+-0x73a,0x1*0x1e4f+0x47*0x23+-0x2803*0x1);_0x30dfc8<_0x14e698&&(_0x14e698=_0x30dfc8);}_0x52513f['weight']=_0x14e698,_0x310c82+=_0x14e698,this['_syncAnima'+'tions']&&(_0x25e621+=_0x52513f['animTrack']['duration']/_0x52513f['absoluteSp'+'eed']*_0x52513f['weight']);}for(let _0x40e19e=0x1a3c+0x123b+-0x1*0x2c77;_0x40e19e<this['_children']['length'];_0x40e19e++){const _0x570df1=this['_children'][_0x40e19e];_0x570df1['weight']=_0x570df1['_weight']/_0x310c82,this['_syncAnima'+'tions']&&(_0x570df1['weightedSp'+'eed']=_0x570df1['animTrack']['duration']/_0x570df1['absoluteSp'+'eed']/_0x25e621);}}};h(Ni,'_p',new J()),h(Ni,'_pip',new J());let Zf=Ni;const ki=class ki extends Xn{['pointCache'](_0x42aa86,_0x46137b){const _0xa71ce3=''+_0x42aa86+_0x46137b;return this['_pointCach'+'e'][_0xa71ce3]||(this['_pointCach'+'e'][_0xa71ce3]=new J((this['_children'][_0x46137b]['pointLengt'+'h']-this['_children'][_0x42aa86]['pointLengt'+'h'])/((this['_children'][_0x46137b]['pointLengt'+'h']+this['_children'][_0x42aa86]['pointLengt'+'h'])/(-0x18bd+-0x11*0x235+-0x3e44*-0x1)),J['angleRad'](this['_children'][_0x42aa86]['point'],this['_children'][_0x46137b]['point'])*(-0x15*-0x1a7+0xe17+0x30c8*-0x1))),this['_pointCach'+'e'][_0xa71ce3];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x5a2222,_0x4f644e;ki['_p']['set'](...this['_parameter'+'Values']);const _0x9c57ff=ki['_p']['length']();_0x5a2222=-0x673+0x9de*-0x1+0x1051,_0x4f644e=0x1*-0x1467+-0x7c7*0x5+0x3b4a;for(let _0x4e5687=-0x3*-0x97b+-0x49*-0x40+-0x2eb1;_0x4e5687<this['_children']['length'];_0x4e5687++){const _0x477bc4=this['_children'][_0x4e5687],_0x48e848=_0x477bc4['point'],_0x1d2ea6=_0x477bc4['pointLengt'+'h'];let _0x19e732=Number['MAX_VALUE'];for(let _0x25f229=-0x1d9*-0xd+0x479+-0x1c7e;_0x25f229<this['_children']['length'];_0x25f229++){if(_0x4e5687===_0x25f229)continue;const _0x22c921=this['pointCache'](_0x4e5687,_0x25f229),_0x2665b5=this['_children'][_0x25f229]['pointLengt'+'h'];ki['_pip']['set']((_0x9c57ff-_0x1d2ea6)/((_0x2665b5+_0x1d2ea6)/(-0xd2a+-0x75d*-0x5+0x17a5*-0x1)),J['angleRad'](_0x48e848,ki['_p'])*(0x1c35*0x1+-0x1309+-0x92a));const _0x3572c1=Y['clamp'](0x210a*0x1+0x9*-0x34c+-0x35d-Math['abs'](ki['_pip']['dot'](_0x22c921)/_0x22c921['lengthSq']()),-0x1583*0x1+-0x68f*-0x2+0x865,-0xd6a*0x2+0x1e68+-0x393);_0x3572c1<_0x19e732&&(_0x19e732=_0x3572c1);}_0x477bc4['weight']=_0x19e732,_0x5a2222+=_0x19e732,this['_syncAnima'+'tions']&&(_0x4f644e+=_0x477bc4['animTrack']['duration']/_0x477bc4['absoluteSp'+'eed']*_0x477bc4['weight']);}for(let _0x268e51=-0x1c9*0x1+0x24b6+-0x22ed;_0x268e51<this['_children']['length'];_0x268e51++){const _0x78f88f=this['_children'][_0x268e51];if(_0x78f88f['weight']=_0x78f88f['_weight']/_0x5a2222,this['_syncAnima'+'tions']){const _0x500a9b=_0x78f88f['animTrack']['duration']/_0x4f644e*_0x5a2222;_0x78f88f['weightedSp'+'eed']=_0x78f88f['absoluteSp'+'eed']*_0x500a9b;}}}};h(ki,'_p',new J()),h(ki,'_pip',new J());let Qf=ki;class JI extends Xn{['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x228624=-0xf81+0xd69+0x218,_0x281e4e=-0x1a76+-0x17a1+0x3217;for(let _0x2b4d7d=-0x2390+-0xeb*-0x4+0x34*0x9d;_0x2b4d7d<this['_children']['length'];_0x2b4d7d++)if(_0x228624+=Math['max'](this['_parameter'+'Values'][_0x2b4d7d],-0x90a+0x93c*-0x1+0x1246),this['_syncAnima'+'tions']){const _0x2d9c0e=this['_children'][_0x2b4d7d];_0x281e4e+=_0x2d9c0e['animTrack']['duration']/_0x2d9c0e['absoluteSp'+'eed']*_0x2d9c0e['weight'];}for(let _0x5bab8e=0x97c*0x3+0x6bd+-0x2331;_0x5bab8e<this['_children']['length'];_0x5bab8e++){const _0x42a42f=this['_children'][_0x5bab8e],_0x43b009=Math['max'](this['_parameter'+'Values'][_0x5bab8e],-0xbf8+-0x1b93+0x278b);_0x228624?(_0x42a42f['weight']=_0x43b009/_0x228624,this['_syncAnima'+'tions']&&(_0x42a42f['weightedSp'+'eed']=_0x42a42f['animTrack']['duration']/_0x42a42f['absoluteSp'+'eed']/_0x281e4e)):(_0x42a42f['weight']=-0x3cf+-0x207b+-0xa*-0x3a1,this['_syncAnima'+'tions']&&(_0x42a42f['weightedSp'+'eed']=-0x1198+0x1a92+-0x8fa));}}}class ng{constructor(_0x3ef7e9,_0x3ad52a,_0x476f55=0x1738+-0xfe4+-0x753,_0x16c1e2=!(-0x2*-0x2dd+0x1*0x17e1+0x1*-0x1d9b),_0x5e1975){h(this,'_animation'+'s',{}),h(this,'_animation'+'List',[]),(this['_controlle'+'r']=_0x3ef7e9,this['_name']=_0x3ad52a,this['_speed']=_0x476f55,this['_loop']=_0x16c1e2,this['_hasAnimat'+'ions']=!(0x1*0x28+-0x2650+0x2629),_0x5e1975?this['_blendTree']=this['_createTre'+'e'](_0x5e1975['type'],this,null,_0x3ad52a,0x1adc+-0x1854+-0x287*0x1,_0x5e1975['parameter']?[_0x5e1975['parameter']]:_0x5e1975['parameters'],_0x5e1975['children'],_0x5e1975['syncAnimat'+'ions'],this['_createTre'+'e'],this['_controlle'+'r']['findParame'+'ter']):this['_blendTree']=new sl(this,null,_0x3ad52a,-0xad9+0xa*-0x154+0x1822,_0x476f55));}['_createTre'+'e'](_0x58a76e,_0x38dd49,_0x2c3cd1,_0x1d1879,_0x3ac62d,_0x55f60b,_0x480523,_0xe2981c,_0x46b551,_0x8b6000){switch(_0x58a76e){case $I:return new QI(_0x38dd49,_0x2c3cd1,_0x1d1879,_0x3ac62d,_0x55f60b,_0x480523,_0xe2981c,_0x46b551,_0x8b6000);case qI:return new Zf(_0x38dd49,_0x2c3cd1,_0x1d1879,_0x3ac62d,_0x55f60b,_0x480523,_0xe2981c,_0x46b551,_0x8b6000);case XI:return new Qf(_0x38dd49,_0x2c3cd1,_0x1d1879,_0x3ac62d,_0x55f60b,_0x480523,_0xe2981c,_0x46b551,_0x8b6000);case jI:return new JI(_0x38dd49,_0x2c3cd1,_0x1d1879,_0x3ac62d,_0x55f60b,_0x480523,_0xe2981c,_0x46b551,_0x8b6000);}w['error']('Invalid\x20an'+'im\x20blend\x20t'+'ype:\x20'+_0x58a76e);}['_getNodeFr'+'omPath'](_0x484aaf){let _0x4ce55a=this['_blendTree'];for(let _0x7eb25a=-0x23a+0x341+-0x106*0x1;_0x7eb25a<_0x484aaf['length'];_0x7eb25a++)_0x4ce55a=_0x4ce55a['getChild'](_0x484aaf[_0x7eb25a]);return _0x4ce55a;}['addAnimati'+'on'](_0x1d236f,_0x37c421){const _0x4b33f7=_0x1d236f['join']('.'),_0x1e5971=this['_animation'+'List']['findIndex'](_0x278fa5=>_0x278fa5['path']===_0x4b33f7);if(_0x1e5971>=0x1991*-0x1+0x2*0x590+0xe71)this['_animation'+'List'][_0x1e5971]['animTrack']=_0x37c421;else{const _0x130109=this['_getNodeFr'+'omPath'](_0x1d236f);_0x130109['animTrack']=_0x37c421,this['_animation'+'List']['push'](_0x130109);}this['_updateHas'+'Animations']();}['_updateHas'+'Animations'](){this['_hasAnimat'+'ions']=this['_animation'+'List']['length']>0x17c4+0x11a1+0x2965*-0x1&&this['_animation'+'List']['every'](_0x518e87=>_0x518e87['animTrack']&&_0x518e87['animTrack']!==Zi['EMPTY']);}get['name'](){return this['_name'];}set['animations'](_0xec14d){this['_animation'+'List']=_0xec14d,this['_updateHas'+'Animations']();}get['animations'](){return this['_animation'+'List'];}get['hasAnimati'+'ons'](){return this['_hasAnimat'+'ions'];}set['speed'](_0x204254){this['_speed']=_0x204254;}get['speed'](){return this['_speed'];}set['loop'](_0x4c2bb7){this['_loop']=_0x4c2bb7;}get['loop'](){return this['_loop'];}get['nodeCount'](){return!this['_blendTree']||this['_blendTree']['constructo'+'r']===sl?0x218f+0x1a67+-0x3bf5:this['_blendTree']['getNodeCou'+'nt']();}get['playable'](){return ch['indexOf'](this['name'])!==-(0x2*0x11a2+-0x17b1+-0x5c9*0x2)||this['animations']['length']===this['nodeCount'];}get['looping'](){if(this['animations']['length']>-0x15bb+-0x1897+-0x62*-0x79){const _0x1a01cc=this['name']+'.'+this['animations'][-0x20cc+-0x61d*-0x3+0xe75]['animTrack']['name'],_0x1685bf=this['_controlle'+'r']['animEvalua'+'tor']['findClip'](_0x1a01cc);if(_0x1685bf)return _0x1685bf['loop'];}return!(-0x1b69+-0x10*-0x265+-0xae6);}get['totalWeigh'+'t'](){let _0x1d55c0=0x973*0x1+-0x1040+-0x1*-0x6cd;for(let _0x7fd1c6=-0x1d*0x59+0x1*-0x6d3+-0x2*-0x874;_0x7fd1c6<this['animations']['length'];_0x7fd1c6++)_0x1d55c0+=this['animations'][_0x7fd1c6]['weight'];return _0x1d55c0;}get['timelineDu'+'ration'](){let _0x35a6e7=-0x1451+0x2f*-0x97+0x1a*0x1d9;for(let _0x29054a=0x243*-0x1+0x1e9d*-0x1+0x20e*0x10;_0x29054a<this['animations']['length'];_0x29054a++){const _0x31a4a7=this['animations'][_0x29054a];_0x31a4a7['animTrack']['duration']>_0x35a6e7&&(_0x35a6e7=_0x31a4a7['animTrack']['duration']);}return _0x35a6e7;}}class hh{constructor({from:_0x529f7f,to:_0x163a8b,time:_0x2f866c=0x2ca*0x4+-0x257*0xb+0xe95,priority:_0x3be4ac=-0x7*-0x3b+0x2*-0xaa1+0x13a5,conditions:_0x37b0ef=[],exitTime:_0x3b52c7=null,transitionOffset:_0x5333a1=null,interruptionSource:_0x265f58=rv}){this['_from']=_0x529f7f,this['_to']=_0x163a8b,this['_time']=_0x2f866c,this['_priority']=_0x3be4ac,this['_condition'+'s']=_0x37b0ef,this['_exitTime']=_0x3b52c7,this['_transitio'+'nOffset']=_0x5333a1,this['_interrupt'+'ionSource']=_0x265f58;}get['from'](){return this['_from'];}set['to'](_0x1b9102){this['_to']=_0x1b9102;}get['to'](){return this['_to'];}get['time'](){return this['_time'];}get['priority'](){return this['_priority'];}get['conditions'](){return this['_condition'+'s'];}get['exitTime'](){return this['_exitTime'];}get['transition'+'Offset'](){return this['_transitio'+'nOffset'];}get['interrupti'+'onSource'](){return this['_interrupt'+'ionSource'];}get['hasExitTim'+'e'](){return!!this['exitTime'];}}class eL{constructor(_0x54f144,_0x5022c9,_0x59351e,_0x384bb2,_0x672f86,_0x4d808a,_0x28af17){h(this,'_states',{}),h(this,'_stateName'+'s',[]),h(this,'_findTrans'+'itionsFrom'+'StateCache',{}),h(this,'_findTrans'+'itionsBetw'+'eenStatesC'+'ache',{}),h(this,'_previousS'+'tateName',null),h(this,'_activeSta'+'teName',_o),h(this,'_activeSta'+'teDuration',-0x1221+0x1491+-0x270),h(this,'_activeSta'+'teDuration'+'Dirty',!(-0x2338+-0x832*0x1+0x15b5*0x2)),h(this,'_playing',!(0x1*-0x1077+-0x1004+0x1ce*0x12)),h(this,'_activate'),h(this,'_transitio'+'ns'),h(this,'_currTrans'+'itionTime',-0x11*-0xb9+0x2*0xdb1+0x2*-0x13d5),h(this,'_totalTran'+'sitionTime',0x1*0xdcc+-0x1*0x6df+-0x6ec),h(this,'_isTransit'+'ioning',!(-0x2c9+-0x4*-0x88d+-0x1f6a)),h(this,'_transitio'+'nInterrupt'+'ionSource',rv),h(this,'_transitio'+'nPreviousS'+'tates',[]),h(this,'_timeInSta'+'te',-0x26c5+0x1*-0x10ad+0x3772),h(this,'_timeInSta'+'teBefore',-0x3b3*0x2+0x12a1+-0xb3b),h(this,'findParame'+'ter',_0x2820ff=>this['_findParam'+'eter'](_0x2820ff)),(this['_animEvalu'+'ator']=_0x54f144,this['_eventHand'+'ler']=_0x672f86,this['_findParam'+'eter']=_0x4d808a,this['_consumeTr'+'igger']=_0x28af17);for(let _0x4bdc12=0x16e7+-0x11*0x22d+0xe16;_0x4bdc12<_0x5022c9['length'];_0x4bdc12++)this['_states'][_0x5022c9[_0x4bdc12]['name']]=new ng(this,_0x5022c9[_0x4bdc12]['name'],_0x5022c9[_0x4bdc12]['speed'],_0x5022c9[_0x4bdc12]['loop'],_0x5022c9[_0x4bdc12]['blendTree']),this['_stateName'+'s']['push'](_0x5022c9[_0x4bdc12]['name']);this['_transitio'+'ns']=_0x59351e['map'](_0x4b8565=>new hh({..._0x4b8565})),this['_activate']=_0x384bb2;}get['animEvalua'+'tor'](){return this['_animEvalu'+'ator'];}set['activeStat'+'e'](_0x15072d){this['_activeSta'+'teName']=_0x15072d;}get['activeStat'+'e'](){return this['_findState'](this['_activeSta'+'teName']);}get['activeStat'+'eName'](){return this['_activeSta'+'teName'];}get['activeStat'+'eAnimation'+'s'](){return this['activeStat'+'e']['animations'];}set['previousSt'+'ate'](_0x5ee377){this['_previousS'+'tateName']=_0x5ee377;}get['previousSt'+'ate'](){return this['_findState'](this['_previousS'+'tateName']);}get['previousSt'+'ateName'](){return this['_previousS'+'tateName'];}get['playable'](){let _0x146492=!(-0x795+0x832+-0x1*0x9d);for(let _0x3f26df=-0x11*0x1df+0x201*0x9+0xdc6;_0x3f26df<this['_stateName'+'s']['length'];_0x3f26df++)this['_states'][this['_stateName'+'s'][_0x3f26df]]['playable']||(_0x146492=!(0x257d+-0xc77+-0x1905));return _0x146492;}set['playing'](_0x36965e){this['_playing']=_0x36965e;}get['playing'](){return this['_playing'];}get['activeStat'+'eProgress'](){return this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);}get['activeStat'+'eDuration'](){if(this['_activeSta'+'teDuration'+'Dirty']){let _0x30e21f=-0x2f*0x99+0xed+0xb7*0x26;for(let _0x6d3b7b=0x4a3*0x6+0x7a0+-0x2372;_0x6d3b7b<this['activeStat'+'eAnimation'+'s']['length'];_0x6d3b7b++){const _0x41b9ee=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x6d3b7b]['name']);_0x41b9ee&&(_0x30e21f=Math['max'](_0x30e21f,_0x41b9ee['track']['duration']));}this['_activeSta'+'teDuration']=_0x30e21f,this['_activeSta'+'teDuration'+'Dirty']=!(-0x770+0xe*-0x97+0xfb3);}return this['_activeSta'+'teDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x414209){this['_timeInSta'+'teBefore']=_0x414209,this['_timeInSta'+'te']=_0x414209;for(let _0x41ec3f=-0x201d*-0x1+0x86f+-0x288c;_0x41ec3f<this['activeStat'+'eAnimation'+'s']['length'];_0x41ec3f++){const _0x1a22a2=this['animEvalua'+'tor']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x41ec3f]['name']);_0x1a22a2&&(_0x1a22a2['time']=_0x414209);}}get['activeStat'+'eCurrentTi'+'me'](){return this['_timeInSta'+'te'];}get['transition'+'ing'](){return this['_isTransit'+'ioning'];}get['transition'+'Progress'](){return this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime'];}get['states'](){return this['_stateName'+'s'];}['assignMask'](_0x3fb049){return this['_animEvalu'+'ator']['assignMask'](_0x3fb049);}['_findState'](_0xb15aeb){return this['_states'][_0xb15aeb];}['_getActive'+'StateProgr'+'essForTime'](_0x3b3995){if(this['activeStat'+'eName']===_o||this['activeStat'+'eName']===jf||this['activeStat'+'eName']===Hr)return 0x2ae*-0x5+0x8*-0x469+-0x30af*-0x1;const _0x51bb94=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][0xa*0x348+-0x13*0x77+0x7*-0x36d]['name']);return _0x51bb94?_0x51bb94['progressFo'+'rTime'](_0x3b3995):null;}['_findTrans'+'itionsFrom'+'State'](_0x41339f){let _0x38ee60=this['_findTrans'+'itionsFrom'+'StateCache'][_0x41339f];return _0x38ee60||(_0x38ee60=this['_transitio'+'ns']['filter'](_0x297d49=>_0x297d49['from']===_0x41339f),el(_0x38ee60),this['_findTrans'+'itionsFrom'+'StateCache'][_0x41339f]=_0x38ee60),_0x38ee60;}['_findTrans'+'itionsBetw'+'eenStates'](_0x2a9a77,_0x56a5b7){let _0x15edf3=this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x2a9a77+'->'+_0x56a5b7];return _0x15edf3||(_0x15edf3=this['_transitio'+'ns']['filter'](_0x1af779=>_0x1af779['from']===_0x2a9a77&&_0x1af779['to']===_0x56a5b7),el(_0x15edf3),this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x2a9a77+'->'+_0x56a5b7]=_0x15edf3),_0x15edf3;}['_transitio'+'nHasCondit'+'ionsMet'](_0x3c4ae5){const _0x113dc8=_0x3c4ae5['conditions'];for(let _0x51b6ce=0xa9*0xd+-0x161f*-0x1+-0x1eb4;_0x51b6ce<_0x113dc8['length'];_0x51b6ce++){const _0x3b60d3=_0x113dc8[_0x51b6ce],_0x9cbed2=this['_findParam'+'eter'](_0x3b60d3['parameterN'+'ame']);switch(_0x3b60d3['predicate']){case BI:if(!(_0x9cbed2['value']>_0x3b60d3['value']))return!(0x10*-0x259+-0x1fc9+0x455a);break;case zI:if(!(_0x9cbed2['value']<_0x3b60d3['value']))return!(0x2085+0x1fd6+0x1*-0x405a);break;case VI:if(!(_0x9cbed2['value']>=_0x3b60d3['value']))return!(-0x1e91+0x11eb+0xca7);break;case GI:if(!(_0x9cbed2['value']<=_0x3b60d3['value']))return!(0x63d*-0x6+0x235b+0x214);break;case HI:if(_0x9cbed2['value']!==_0x3b60d3['value'])return!(-0x1411+0x1bd7+-0x7c5);break;case WI:if(_0x9cbed2['value']===_0x3b60d3['value'])return!(-0x59b*-0x4+0x2077+-0x36e2);break;}}return!(0x2*-0x137c+0x1*-0x13f9+-0x4f*-0xbf);}['_findTrans'+'ition'](_0x2f2af8,_0x1b94ca){let _0x131f5f=[];if(_0x2f2af8&&_0x1b94ca)_0x131f5f=_0x131f5f['concat'](this['_findTrans'+'itionsBetw'+'eenStates'](_0x2f2af8,_0x1b94ca));else{if(!this['_isTransit'+'ioning'])_0x131f5f=_0x131f5f['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x131f5f=_0x131f5f['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));else switch(this['_transitio'+'nInterrupt'+'ionSource']){case FI:_0x131f5f=_0x131f5f['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x131f5f=_0x131f5f['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));break;case NI:_0x131f5f=_0x131f5f['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x131f5f=_0x131f5f['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));break;case kI:_0x131f5f=_0x131f5f['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x131f5f=_0x131f5f['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x131f5f=_0x131f5f['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));break;case UI:_0x131f5f=_0x131f5f['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x131f5f=_0x131f5f['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x131f5f=_0x131f5f['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));break;}}if(_0x131f5f=_0x131f5f['filter'](_0x1a3d90=>{if(_0x1a3d90['to']===this['activeStat'+'eName'])return!(0x591*0x1+0x10e6+-0x73*0x32);if(_0x1a3d90['hasExitTim'+'e']){let _0x37898b=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'teBefore']),_0x325b6a=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);if(_0x1a3d90['exitTime']<-0x2704+0x1442+0x12c3&&this['activeStat'+'e']['loop']&&(_0x37898b-=Math['floor'](_0x37898b),_0x325b6a-=Math['floor'](_0x325b6a)),_0x325b6a===_0x37898b){if(_0x325b6a!==_0x1a3d90['exitTime'])return null;}else{if(!(_0x1a3d90['exitTime']>_0x37898b&&_0x1a3d90['exitTime']<=_0x325b6a))return null;}}return this['_transitio'+'nHasCondit'+'ionsMet'](_0x1a3d90);}),_0x131f5f['length']>0x111d+-0x1166+0x49){const _0x1889f9=_0x131f5f[0x10c+0x4*0x823+-0x35c*0xa];if(_0x1889f9['to']===jf){const _0x13f699=this['_findTrans'+'itionsFrom'+'State'](_o)[-0x453+0x97*0xd+-0x358*0x1];_0x1889f9['to']=_0x13f699['to'];}return _0x1889f9;}return null;}['updateStat'+'eFromTrans'+'ition'](_0x1169c9){let _0x20a59f,_0x5ce7b1,_0x5ef2b1;this['previousSt'+'ate']=_0x1169c9['from']?this['activeStat'+'eName']:null,this['activeStat'+'e']=_0x1169c9['to'],this['_activeSta'+'teDuration'+'Dirty']=!(-0x3b2*-0x4+-0x4b5+-0xa13);for(let _0x4bdb9d=-0x3*0x79f+-0xc48+0x3*0xbb7;_0x4bdb9d<_0x1169c9['conditions']['length'];_0x4bdb9d++){const _0xfff05c=_0x1169c9['conditions'][_0x4bdb9d];this['_findParam'+'eter'](_0xfff05c['parameterN'+'ame'])['type']===Dc&&this['_consumeTr'+'igger'](_0xfff05c['parameterN'+'ame']);}if(this['previousSt'+'ate']){this['_isTransit'+'ioning']||(this['_transitio'+'nPreviousS'+'tates']=[]),this['_transitio'+'nPreviousS'+'tates']['push']({'name':this['_previousS'+'tateName'],'weight':0x1});const _0x25780c=Math['min'](this['_totalTran'+'sitionTime']!==0x4b9+-0x5c*-0x2+-0x571?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:-0x3*0x9bc+0x39e*-0x7+0xb*0x4f5,0x5*-0x6e6+0x35e*0x5+0x11a9);for(let _0x31dcdc=-0x114c+0x1a7d*0x1+-0x931;_0x31dcdc<this['_transitio'+'nPreviousS'+'tates']['length'];_0x31dcdc++){this['_isTransit'+'ioning']?_0x31dcdc!==this['_transitio'+'nPreviousS'+'tates']['length']-(0x905*0x4+-0x270*-0x8+-0x15b*0x29)?this['_transitio'+'nPreviousS'+'tates'][_0x31dcdc]['weight']*=0x1*-0xc8e+0x2*0xc71+-0xc53*0x1-_0x25780c:this['_transitio'+'nPreviousS'+'tates'][_0x31dcdc]['weight']=_0x25780c:this['_transitio'+'nPreviousS'+'tates'][_0x31dcdc]['weight']=-0xc47+0x2099+0x1*-0x1451,_0x20a59f=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x31dcdc]['name']);for(let _0x260fad=0xb7+-0x75*-0x2f+-0x1632;_0x260fad<_0x20a59f['animations']['length'];_0x260fad++)_0x5ce7b1=_0x20a59f['animations'][_0x260fad],_0x5ef2b1=this['_animEvalu'+'ator']['findClip'](_0x5ce7b1['name']+'.previous.'+_0x31dcdc),_0x5ef2b1||(_0x5ef2b1=this['_animEvalu'+'ator']['findClip'](_0x5ce7b1['name']),_0x5ef2b1['name']=_0x5ce7b1['name']+'.previous.'+_0x31dcdc),_0x31dcdc!==this['_transitio'+'nPreviousS'+'tates']['length']-(-0x259+-0x2065+0x22bf)&&_0x5ef2b1['pause']();}}this['_isTransit'+'ioning']=!(0x15*0x58+-0x1047+0x90f),this['_totalTran'+'sitionTime']=_0x1169c9['time'],this['_currTrans'+'itionTime']=-0x2570+-0x849+0x2db9,this['_transitio'+'nInterrupt'+'ionSource']=_0x1169c9['interrupti'+'onSource'];const _0x506b58=this['activeStat'+'e'],_0x125176=_0x1169c9['transition'+'Offset']&&_0x1169c9['transition'+'Offset']>0xb*0x34a+-0x11*0x1b6+-0x718&&_0x1169c9['transition'+'Offset']<0x32b*-0x1+0xd*-0x165+0x30b*0x7;let _0x501a5d=-0x260c+0x26*0xe8+0x15*0x2c,_0x4afbb7=0x1*0x697+0x1bb4+-0x224b;if(_0x125176){const _0x39f49d=_0x506b58['timelineDu'+'ration']*_0x1169c9['transition'+'Offset'];_0x501a5d=_0x39f49d,_0x4afbb7=_0x39f49d;}this['_timeInSta'+'te']=_0x501a5d,this['_timeInSta'+'teBefore']=_0x4afbb7;for(let _0x3cf7be=-0x24f+-0x1*0x11b+0x36a;_0x3cf7be<_0x506b58['animations']['length'];_0x3cf7be++){if(_0x5ef2b1=this['_animEvalu'+'ator']['findClip'](_0x506b58['animations'][_0x3cf7be]['name']),_0x5ef2b1)_0x5ef2b1['reset']();else{const _0x54b6e6=Number['isFinite'](_0x506b58['animations'][_0x3cf7be]['speed'])?_0x506b58['animations'][_0x3cf7be]['speed']:_0x506b58['speed'];_0x5ef2b1=new lh(_0x506b58['animations'][_0x3cf7be]['animTrack'],this['_timeInSta'+'te'],_0x54b6e6,!(-0x1*-0x13ea+-0x3c1*0x6+0x29c),_0x506b58['loop'],this['_eventHand'+'ler']),_0x5ef2b1['name']=_0x506b58['animations'][_0x3cf7be]['name'],this['_animEvalu'+'ator']['addClip'](_0x5ef2b1);}if(_0x1169c9['time']>-0x10e2+-0x243d+0x351f?_0x5ef2b1['blendWeigh'+'t']=0xdb5+0xbb1+-0x1966:_0x5ef2b1['blendWeigh'+'t']=_0x506b58['animations'][_0x3cf7be]['normalized'+'Weight'],_0x5ef2b1['play'](),_0x125176)_0x5ef2b1['time']=_0x506b58['timelineDu'+'ration']*_0x1169c9['transition'+'Offset'];else{const _0x3cde26=_0x506b58['speed']>=0x187c+0x134a+-0x2bc6?0x4*-0x6dc+-0x17e9*-0x1+0x387:this['activeStat'+'eDuration'];_0x5ef2b1['time']=_0x3cde26;}}}['_transitio'+'nToState'](_0x58eeee){if(!this['_findState'](_0x58eeee))return;let _0x26b200=this['_findTrans'+'ition'](this['_activeSta'+'teName'],_0x58eeee);_0x26b200||(this['_animEvalu'+'ator']['removeClip'+'s'](),_0x26b200=new hh({'from':null,'to':_0x58eeee})),this['updateStat'+'eFromTrans'+'ition'](_0x26b200);}['assignAnim'+'ation'](_0x57e658,_0x18614f,_0x2d3640,_0x5cfd4d){const _0x33627e=_0x57e658['split']('.');let _0x219f5d=this['_findState'](_0x33627e[0x8f*-0x1b+0x316+-0x25*-0x53]);_0x219f5d||(_0x219f5d=new ng(this,_0x33627e[-0x268c+0x15*0x7+-0x25f9*-0x1],_0x2d3640),this['_states'][_0x33627e[0x485+-0x1124+0xc9f]]=_0x219f5d,this['_stateName'+'s']['push'](_0x33627e[0x91+0x959*0x4+0x7b*-0x4f])),_0x219f5d['addAnimati'+'on'](_0x33627e,_0x18614f),this['_animEvalu'+'ator']['updateClip'+'Track'](_0x219f5d['name'],_0x18614f),_0x2d3640!==void(0x4f5+0x59a*0x1+-0xa8f)&&(_0x219f5d['speed']=_0x2d3640),_0x5cfd4d!==void(-0x736+0x5*0x497+-0x33*0x4f)&&(_0x219f5d['loop']=_0x5cfd4d),!this['_playing']&&this['_activate']&&this['playable']&&this['play'](),this['_activeSta'+'teDuration'+'Dirty']=!(-0xce4+0x2*0xc02+0x2*-0x590);}['removeNode'+'Animations'](_0xf5a1a6){if(ch['indexOf'](_0xf5a1a6)!==-(0x6c4+-0x18c6+0x1203*0x1))return!(-0x1ac3+-0x57*-0x30+0x53a*0x2);const _0x2977e7=this['_findState'](_0xf5a1a6);return _0x2977e7?(_0x2977e7['animations']=[],!(0x3*-0x8f7+-0x91*-0x36+0x7*-0x87)):(w['error']('Attempting'+'\x20to\x20unassi'+'gn\x20animati'+'on\x20tracks\x20'+'from\x20a\x20sta'+'te\x20that\x20do'+'es\x20not\x20exi'+'st.',_0xf5a1a6),!(-0x841*-0x4+-0x1*0xb6f+0x4*-0x565));}['play'](_0x1455bb){_0x1455bb&&this['_transitio'+'nToState'](_0x1455bb),this['_playing']=!(-0x3be+0x58b+-0x1cd*0x1);}['pause'](){this['_playing']=!(-0xc*-0x20c+0x1a1*-0x11+0x322);}['reset'](){this['_previousS'+'tateName']=null,this['_activeSta'+'teName']=_o,this['_playing']=!(0x13bd*0x1+-0x20a1*-0x1+-0x17f*0x23),this['_currTrans'+'itionTime']=0x15e5+0x3f*0x55+0x3*-0xe45,this['_totalTran'+'sitionTime']=0x1f86+-0x21*-0x2b+-0x251*0x10,this['_isTransit'+'ioning']=!(0xfd6+0x113d+0x1*-0x2112),this['_timeInSta'+'te']=0x1183*-0x2+-0x3*0x435+0x2fa5,this['_timeInSta'+'teBefore']=-0x542+-0xe*0x6a+0xb0e,this['_animEvalu'+'ator']['removeClip'+'s']();}['rebind'](){this['_animEvalu'+'ator']['rebind']();}['update'](_0x3b1db3){if(!this['_playing'])return;let _0x473f37,_0x54a35b,_0x18cfde;(this['activeStat'+'e']['loop']||this['_timeInSta'+'te']<this['activeStat'+'eDuration'])&&(this['_timeInSta'+'teBefore']=this['_timeInSta'+'te'],this['_timeInSta'+'te']+=_0x3b1db3*this['activeStat'+'e']['speed'],!this['activeStat'+'e']['loop']&&this['_timeInSta'+'te']>this['activeStat'+'eDuration']&&(this['_timeInSta'+'te']=this['activeStat'+'eDuration'],_0x3b1db3=this['activeStat'+'eDuration']-this['_timeInSta'+'teBefore']));const _0x18f952=this['_findTrans'+'ition'](this['_activeSta'+'teName']);if(_0x18f952&&this['updateStat'+'eFromTrans'+'ition'](_0x18f952),this['_isTransit'+'ioning']){if(this['_currTrans'+'itionTime']+=_0x3b1db3,this['_currTrans'+'itionTime']<=this['_totalTran'+'sitionTime']){const _0x426e2a=this['_totalTran'+'sitionTime']!==-0x1d*0x5c+0xad9*-0x3+0x287*0x11?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:0x86*0x43+-0x7*0x201+-0x1*0x150a;for(let _0x367591=-0x5c*-0x3d+0x982*-0x1+0x1*-0xc6a;_0x367591<this['_transitio'+'nPreviousS'+'tates']['length'];_0x367591++){_0x473f37=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x367591]['name']);const _0x357922=this['_transitio'+'nPreviousS'+'tates'][_0x367591]['weight'];for(let _0x489346=0xf89+0x1859+0x5*-0x7fa;_0x489346<_0x473f37['animations']['length'];_0x489346++)_0x54a35b=_0x473f37['animations'][_0x489346],_0x18cfde=this['_animEvalu'+'ator']['findClip'](_0x54a35b['name']+'.previous.'+_0x367591),_0x18cfde&&(_0x18cfde['blendWeigh'+'t']=(0x2*0x8b7+-0xd05+-0x468-_0x426e2a)*_0x54a35b['normalized'+'Weight']*_0x357922);}_0x473f37=this['activeStat'+'e'];for(let _0x5f1bc8=-0x1e*0xc8+0x887*0x2+0x662;_0x5f1bc8<_0x473f37['animations']['length'];_0x5f1bc8++)_0x54a35b=_0x473f37['animations'][_0x5f1bc8],this['_animEvalu'+'ator']['findClip'](_0x54a35b['name'])['blendWeigh'+'t']=_0x426e2a*_0x54a35b['normalized'+'Weight'];}else{this['_isTransit'+'ioning']=!(-0x31a*-0x1+0x1*-0x823+0x50a);const _0x4fba6a=this['activeStat'+'eAnimation'+'s']['length'],_0x2b1124=this['_animEvalu'+'ator']['clips']['length'];for(let _0xb8b45b=-0x1452+0xee3+0x6b*0xd;_0xb8b45b<_0x2b1124-_0x4fba6a;_0xb8b45b++)this['_animEvalu'+'ator']['removeClip'](-0x2*-0xfde+-0x202e+0x72);this['_transitio'+'nPreviousS'+'tates']=[],_0x473f37=this['activeStat'+'e'];for(let _0x2922b1=-0x2174+0x2705+0x1*-0x591;_0x2922b1<_0x473f37['animations']['length'];_0x2922b1++)_0x54a35b=_0x473f37['animations'][_0x2922b1],_0x18cfde=this['_animEvalu'+'ator']['findClip'](_0x54a35b['name']),_0x18cfde&&(_0x18cfde['blendWeigh'+'t']=_0x54a35b['normalized'+'Weight']);}}else{if(this['activeStat'+'e']['_blendTree']['constructo'+'r']!==sl){_0x473f37=this['activeStat'+'e'];for(let _0x1816fa=0x1f59+0xa45*-0x3+0x8a*-0x1;_0x1816fa<_0x473f37['animations']['length'];_0x1816fa++)_0x54a35b=_0x473f37['animations'][_0x1816fa],_0x18cfde=this['_animEvalu'+'ator']['findClip'](_0x54a35b['name']),_0x18cfde&&(_0x18cfde['blendWeigh'+'t']=_0x54a35b['normalized'+'Weight'],_0x54a35b['parent']['syncAnimat'+'ions']&&(_0x18cfde['speed']=_0x54a35b['speed']));}}this['_animEvalu'+'ator']['update'](_0x3b1db3,this['activeStat'+'e']['hasAnimati'+'ons']);}}const ef=new J(),lc=new D(),lo=new re(),co=new ie(),ho=new le();class Oi extends pr{constructor(_0x329829,_0x1b7f88,_0x2d2b4e,_0x3cf3f7,_0x596cbd){super(_0x1b7f88),this['animCompon'+'ent']=_0x329829,this['_mask']=_0x3cf3f7,this['layerName']=_0x2d2b4e,this['layerIndex']=_0x596cbd;}static['_packFloat'](_0x480149){return _0x480149[0x3*0x145+-0x6a3+0xb5*0x4];}static['_packBoole'+'an'](_0x1ba9bf){return!!_0x1ba9bf[0x2097+0x1*-0xdd9+0x1*-0x12be];}static['_packVec2'](_0x5e211b){return ef['x']=_0x5e211b[-0x1bb6+0x905+0x12b1],ef['y']=_0x5e211b[-0x21b8+0x25*0x83+0x277*0x6],ef;}static['_packVec3'](_0xecb5dc){return lc['x']=_0xecb5dc[-0x2048+0x168c*-0x1+0x79*0x74],lc['y']=_0xecb5dc[0x11*-0xeb+0xbb2+0x6*0xa7],lc['z']=_0xecb5dc[-0x5*-0x2a5+0xfc0+0x5cb*-0x5],lc;}static['_packVec4'](_0x5505b7){return lo['x']=_0x5505b7[0x1f39*-0x1+0x4*0x8fb+-0x1*0x4b3],lo['y']=_0x5505b7[-0x1eb0+-0x131*0x13+0x3554],lo['z']=_0x5505b7[-0x33*0x9e+-0x1f77+0x3ef3],lo['w']=_0x5505b7[0x78e*-0x2+0x5*-0x35e+-0x51*-0x65],lo;}static['_packColor'](_0x38a523){return co['r']=_0x38a523[0x8*-0x400+-0x9*0x9b+0x2573],co['g']=_0x38a523[-0x1c2b*0x1+-0x1e66+-0x31*-0x132],co['b']=_0x38a523[-0x1*-0x11ee+0x2*0x1010+-0x2*0x1906],co['a']=_0x38a523[-0x466*0x2+0xb15+-0x246],co;}static['_packQuat'](_0x1167d1){return ho['x']=_0x1167d1[0x26d1+-0x1df*0x1+-0x2*0x1279],ho['y']=_0x1167d1[0x74c+-0x119f+0x2*0x52a],ho['z']=_0x1167d1[0x1e22+0x12cc*-0x1+-0x2d5*0x4],ho['w']=_0x1167d1[0xe6b+-0x1*0x2065+-0x1*-0x11fd],ho;}['resolve'](_0x24a41e){const _0x348fe9=Jr['encode'](_0x24a41e['entityPath'],_0x24a41e['component'],_0x24a41e['propertyPa'+'th']);let _0x25b9e5=this['targetCach'+'e'][_0x348fe9];if(_0x25b9e5)return _0x25b9e5;let _0x61b6be,_0x3d7513,_0x15b514;switch(_0x24a41e['component']){case'entity':_0x61b6be=this['_getEntity'+'FromHierar'+'chy'](_0x24a41e['entityPath']),_0x15b514=Jr['encode'](_0x61b6be['path'],'entity',_0x24a41e['propertyPa'+'th']),_0x3d7513=_0x61b6be;break;case'graph':if(_0x3d7513=this['findNode'](_0x24a41e),!_0x3d7513)return null;_0x15b514=Jr['encode'](_0x3d7513['path'],'graph',_0x24a41e['propertyPa'+'th']);break;default:if(_0x61b6be=this['_getEntity'+'FromHierar'+'chy'](_0x24a41e['entityPath']),_0x3d7513=_0x61b6be['findCompon'+'ent'](_0x24a41e['component']),!_0x3d7513)return null;_0x15b514=Jr['encode'](_0x61b6be['path'],_0x24a41e['component'],_0x24a41e['propertyPa'+'th']);break;}return _0x25b9e5=this['_createAni'+'mTargetFor'+'Property'](_0x3d7513,_0x24a41e['propertyPa'+'th'],_0x15b514),this['targetCach'+'e'][_0x348fe9]=_0x25b9e5,_0x25b9e5;}['update'](_0x5280d1){const _0x1dd35b=this['activeNode'+'s'];if(_0x1dd35b){for(let _0x5757ce=0xc3c+-0x1*0x11ef+0x5b3;_0x5757ce<_0x1dd35b['length'];_0x5757ce++)_0x1dd35b[_0x5757ce]['_dirtifyLo'+'cal']();}}['_getEntity'+'FromHierar'+'chy'](_0xb82c9b){if(!this['animCompon'+'ent']['entity']['name']===_0xb82c9b[-0x22c*0xc+-0x1b2*0x1+0xbb*0x26])return null;const _0x17d9d3=this['animCompon'+'ent']['entity'];return _0xb82c9b['length']===0x23*0x7+0x19*-0x11d+0x1ae1?_0x17d9d3:_0x17d9d3['_parent']['findByPath'](_0xb82c9b);}['_resolvePa'+'th'](_0x15c237,_0x485e3a,_0x43d109){const _0x1d35c5=_0x485e3a['length']-(_0x43d109?0x126e+-0xb19+-0x755:0x7e0+0x1036+-0x1815);for(let _0x3a95e8=0x1fdc+0x23d+-0x2219*0x1;_0x3a95e8<_0x1d35c5;_0x3a95e8++)_0x15c237=_0x15c237[_0x485e3a[_0x3a95e8]];return _0x15c237;}['_setter'](_0x44f009,_0x3b5e98,_0x26401e){const _0x583441=this['_resolvePa'+'th'](_0x44f009,_0x3b5e98),_0x3b15de=_0x3b5e98[_0x3b5e98['length']-(0x11*-0x119+-0x3*0x3c4+-0x76*-0x41)],_0x49fc61='set'+_0x3b15de['substring'](0x217a+0xb49+-0x2cc3,0x2004*-0x1+0x1*-0x6d7+0x26dc)['toUpperCas'+'e']()+_0x3b15de['substring'](0x4*-0x632+-0x1420+-0x2ce9*-0x1);if(_0x583441[_0x49fc61]){let _0x2ddd86=_0x583441['get'+_0x3b15de['substring'](-0x241*0x3+0x5*0x33f+-0x18*0x65,0x7*-0x311+-0x7cc+0xea2*0x2)['toUpperCas'+'e']()+_0x3b15de['substring'](0xc36+-0x905+-0x330)]['bind'](_0x583441)();_0x2ddd86=[_0x2ddd86['x'],_0x2ddd86['y'],_0x2ddd86['z'],_0x2ddd86['w']];const _0x23a18c=_0x583441[_0x49fc61]['bind'](_0x583441);return{'set':_0x39feb5=>{_0x23a18c(_0x26401e(_0x39feb5));},'get':()=>_0x2ddd86};}const _0x10fcaa=_0x583441[_0x3b15de];if(typeof _0x10fcaa=='object'&&_0x10fcaa['hasOwnProp'+'erty']('copy'))return function(_0x463e67){_0x10fcaa['copy'](_0x26401e(_0x463e67));};if([J,D,re,ie,le]['indexOf'](_0x583441['constructo'+'r'])!==-(-0x1d*0x2e+-0xe72+0x1*0x13a9)&&_0x3b5e98['length']>-0x1b7e+0x11*0x133+0x41*0x1c){const _0x165698=_0x3b5e98['length']>-0x1fca+-0xd6*0xb+0x28fe?this['_resolvePa'+'th'](_0x44f009,_0x3b5e98['slice'](-0x257d+0x6b2+0x1*0x1ecb,-(0x2445+-0x705*0x1+-0x1*0x1d3f))):_0x44f009,_0x2a6438=_0x3b5e98[_0x3b5e98['length']-(-0x11*0x1c+-0x327+0x505)];return function(_0x532add){_0x583441[_0x3b15de]=_0x26401e(_0x532add),_0x165698[_0x2a6438]=_0x583441;};}return function(_0x5d6bdb){_0x583441[_0x3b15de]=_0x26401e(_0x5d6bdb);};}['_createAni'+'mTargetFor'+'Property'](_0x4a1689,_0x471a33,_0x46b483){if(this['handlers']&&_0x471a33[0xbec*0x1+0xba9+-0x1795]['startsWith']('weight.'))return this['handlers']['weight'](_0x4a1689,_0x471a33[0x1*-0x159+-0x1*-0x1767+-0x2*0xb07]['replace']('weight.',''));if(this['handlers']&&_0x471a33[0x32f+0x588+-0x8b7]==='material'&&_0x471a33['length']===0x1e74+0x1*0x17e9+0x73*-0x79){const _0x1ab0c6=_0x471a33[0x9ca+-0x1d*0x10b+0x1*0x1476];if(_0x1ab0c6['endsWith']('Map'))return this['handlers']['materialTe'+'xture'](_0x4a1689,_0x1ab0c6);}const _0x4e562b=this['_resolvePa'+'th'](_0x4a1689,_0x471a33,!(0xbf*-0x32+0x304*0x4+0x9*0x2ce));if(typeof _0x4e562b>'u')return null;let _0x5754cb,_0xa94287,_0x6dd345;if(typeof _0x4e562b=='number')_0x5754cb=this['_setter'](_0x4a1689,_0x471a33,Oi['_packFloat']),_0xa94287='vector',_0x6dd345=-0x3fb*-0x4+-0x1*-0x6b9+0x78c*-0x3;else{if(typeof _0x4e562b=='boolean')_0x5754cb=this['_setter'](_0x4a1689,_0x471a33,Oi['_packBoole'+'an']),_0xa94287='vector',_0x6dd345=-0x2*-0xb2a+-0x753*0x3+-0x5a;else{if(typeof _0x4e562b=='object')switch(_0x4e562b['constructo'+'r']){case J:_0x5754cb=this['_setter'](_0x4a1689,_0x471a33,Oi['_packVec2']),_0xa94287='vector',_0x6dd345=0xe1e*0x1+-0x2178+0x135c;break;case D:_0x5754cb=this['_setter'](_0x4a1689,_0x471a33,Oi['_packVec3']),_0xa94287='vector',_0x6dd345=-0x347*-0x3+0x904+-0x12d6;break;case re:_0x5754cb=this['_setter'](_0x4a1689,_0x471a33,Oi['_packVec4']),_0xa94287='vector',_0x6dd345=-0x1139*0x2+0x6bc*0x1+-0x3f6*-0x7;break;case ie:_0x5754cb=this['_setter'](_0x4a1689,_0x471a33,Oi['_packColor']),_0xa94287='vector',_0x6dd345=-0x996+-0x1c35+-0x25cf*-0x1;break;case le:_0x5754cb=this['_setter'](_0x4a1689,_0x471a33,Oi['_packQuat']),_0xa94287='quaternion',_0x6dd345=0x193b*-0x1+-0x95*0x3c+0xd3*0x49;break;default:return null;}}}return _0x471a33['indexOf']('material')!==-(0x1*-0xb73+-0x2044+0x2bb8)?new Yf(_0x4b6fc8=>{_0x5754cb(_0x4b6fc8),_0x4a1689['material']['update']();},_0xa94287,_0x6dd345,_0x46b483):new Yf(_0x5754cb,_0xa94287,_0x6dd345,_0x46b483);}['rebind'](){this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={},this['animCompon'+'ent']['rootBone']?this['graph']=this['animCompon'+'ent']['rootBone']:this['graph']=this['animCompon'+'ent']['entity'];const _0x3b6f5c={},_0x1fd410=function(_0x1616de){_0x3b6f5c[_0x1616de['name']]=_0x1616de;for(let _0x3272d2=-0x1310+0x6*0x2d7+0x25*0xe;_0x3272d2<_0x1616de['children']['length'];++_0x3272d2)_0x1fd410(_0x1616de['children'][_0x3272d2]);};_0x1fd410(this['graph']),this['nodes']=_0x3b6f5c;}}class tL{constructor(_0x2e15bb,_0x167e2c,_0x51e3e6,_0x272969=0xef*0x10+-0xb22+-0x3cd*0x1,_0x2f5a95=av){h(this,'_name'),h(this,'_controlle'+'r'),h(this,'_component'),h(this,'_weight'),h(this,'_blendType'),h(this,'_mask',null),h(this,'_blendTime',-0x1*-0x1408+-0x1f4b+0xb43),h(this,'_blendTime'+'Elapsed',-0x1*0x883+0x1*0x16a2+0x5*-0x2d3),h(this,'_startingW'+'eight',0x10ad+0x86f+-0x191c),h(this,'_targetWei'+'ght',0x7d*0x50+0x6c9*0x1+0x42b*-0xb),(this['_name']=_0x2e15bb,this['_controlle'+'r']=_0x167e2c,this['_component']=_0x51e3e6,this['_weight']=_0x272969,this['_blendType']=_0x2f5a95);}get['name'](){return this['_name'];}set['playing'](_0x4fd4a5){this['_controlle'+'r']['playing']=_0x4fd4a5;}get['playing'](){return this['_controlle'+'r']['playing'];}get['playable'](){return this['_controlle'+'r']['playable'];}get['activeStat'+'e'](){return this['_controlle'+'r']['activeStat'+'eName'];}get['previousSt'+'ate'](){return this['_controlle'+'r']['previousSt'+'ateName'];}get['activeStat'+'eProgress'](){return this['_controlle'+'r']['activeStat'+'eProgress'];}get['activeStat'+'eDuration'](){return this['_controlle'+'r']['activeStat'+'eDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x169916){const _0x2dad1a=this['_controlle'+'r'],_0x1ea012=_0x2dad1a['playing'];_0x2dad1a['playing']=!(0x3*0x6f2+-0x24ce+-0x49*-0x38),_0x2dad1a['activeStat'+'eCurrentTi'+'me']=_0x169916,_0x1ea012||_0x2dad1a['update'](0x1d6a+-0x216b+0x401),_0x2dad1a['playing']=_0x1ea012;}get['activeStat'+'eCurrentTi'+'me'](){return this['_controlle'+'r']['activeStat'+'eCurrentTi'+'me'];}get['transition'+'ing'](){return this['_controlle'+'r']['transition'+'ing'];}get['transition'+'Progress'](){return this['transition'+'ing']?this['_controlle'+'r']['transition'+'Progress']:null;}get['states'](){return this['_controlle'+'r']['states'];}set['weight'](_0x318109){this['_weight']=_0x318109,this['_component']['dirtifyTar'+'gets']();}get['weight'](){return this['_weight'];}set['blendType'](_0x5131ed){_0x5131ed!==this['_blendType']&&(this['_blendType']=_0x5131ed,this['_controlle'+'r']['normalizeW'+'eights']&&this['_component']['rebind']());}get['blendType'](){return this['_blendType'];}set['mask'](_0x17c2af){this['_controlle'+'r']['assignMask'](_0x17c2af)&&this['_component']['rebind'](),this['_mask']=_0x17c2af;}get['mask'](){return this['_mask'];}['play'](_0x133e8b){this['_controlle'+'r']['play'](_0x133e8b);}['pause'](){this['_controlle'+'r']['pause']();}['reset'](){this['_controlle'+'r']['reset']();}['rebind'](){this['_controlle'+'r']['rebind']();}['update'](_0x2b7a3f){this['_blendTime']&&(this['_blendTime'+'Elapsed']<this['_blendTime']?(this['weight']=Y['lerp'](this['_startingW'+'eight'],this['_targetWei'+'ght'],this['_blendTime'+'Elapsed']/this['_blendTime']),this['_blendTime'+'Elapsed']+=_0x2b7a3f):(this['weight']=this['_targetWei'+'ght'],this['_blendTime']=0x1c26+-0x1*0x8f+-0x1b97,this['_blendTime'+'Elapsed']=-0x3*0x907+-0x16d2+0x31e7,this['_startingW'+'eight']=-0xd06+0x62*-0x11+-0x8*-0x271,this['_targetWei'+'ght']=-0x10bf+-0x1acc+0x2b8b)),this['_controlle'+'r']['update'](_0x2b7a3f);}['blendToWei'+'ght'](_0x59b51f,_0x3bcfff){this['_startingW'+'eight']=this['weight'],this['_targetWei'+'ght']=_0x59b51f,this['_blendTime']=Math['max'](-0x12a0+0x637*0x1+0x161*0x9,_0x3bcfff),this['_blendTime'+'Elapsed']=0xd14+0x2*0x10a8+-0x2e64;}['assignAnim'+'ation'](_0x3b37e5,_0x59add8,_0x459b96,_0x323371){if(!(_0x59add8 instanceof Zi)){w['error']('assignAnim'+'ation:\x20ani'+'mTrack\x20sup'+'plied\x20to\x20f'+'unction\x20wa'+'s\x20not\x20of\x20t'+'ype\x20AnimTr'+'ack');return;}this['_controlle'+'r']['assignAnim'+'ation'](_0x3b37e5,_0x59add8,_0x459b96,_0x323371),this['_controlle'+'r']['_transitio'+'ns']['length']===-0x8*0x179+-0x1*0x1cad+0x2875&&this['_controlle'+'r']['_transitio'+'ns']['push'](new hh({'from':'START','to':_0x3b37e5})),this['_component']['activate']&&this['_component']['playable']&&(this['_component']['playing']=!(-0x3a*-0x2+0x9db+-0xa4f));}['removeNode'+'Animations'](_0x34d0fc){this['_controlle'+'r']['removeNode'+'Animations'](_0x34d0fc)&&(this['_component']['playing']=!(0x1*-0x1971+0xe1*-0x12+-0x26*-0x116));}['getAnimati'+'onAsset'](_0x31b5cd){return this['_component']['animationA'+'ssets'][this['name']+':'+_0x31b5cd];}['transition'](_0xa43094,_0x2885ea=0x2*-0x9d3+-0xddf+0x2185,_0x5b3511=null){this['_controlle'+'r']['updateStat'+'eFromTrans'+'ition'](new hh({'from':this['_controlle'+'r']['activeStat'+'eName'],'to':_0xa43094,'time':_0x2885ea,'transitionOffset':_0x5b3511}));}}class Ic{constructor(_0x13f099){if(this['_layers']=[],this['_parameter'+'s']={},Array['isArray'](_0x13f099['layers']))this['_layers']=_0x13f099['layers'];else for(const _0x4b4de9 in _0x13f099['layers']){const _0x28b249=_0x13f099['layers'][_0x4b4de9],_0x5d139f={'name':_0x28b249['name'],'blendType':_0x28b249['blendType'],'weight':_0x28b249['weight'],'states':[],'transitions':[]};for(let _0x204747=0x1068+0xfba+-0x2022;_0x204747<_0x28b249['states']['length'];_0x204747++)_0x5d139f['states']['push'](_0x13f099['states'][_0x28b249['states'][_0x204747]]);for(let _0x37002b=-0x23bb+0x455+-0xfb3*-0x2;_0x37002b<_0x28b249['transition'+'s']['length'];_0x37002b++){const _0x13fd5c=_0x13f099['transition'+'s'][_0x28b249['transition'+'s'][_0x37002b]];if(_0x13fd5c['conditions']&&!Array['isArray'](_0x13fd5c['conditions'])){const _0x23946e=Object['keys'](_0x13fd5c['conditions']),_0x4f061c=[];for(let _0x1aa60a=-0x18b*-0x13+-0x1153*-0x1+-0x6*0x7c6;_0x1aa60a<_0x23946e['length'];_0x1aa60a++){const _0x1ea688=_0x13fd5c['conditions'][_0x23946e[_0x1aa60a]];_0x1ea688['parameterN'+'ame']&&_0x4f061c['push'](_0x1ea688);}_0x13fd5c['conditions']=_0x4f061c;}Number['isInteger'](_0x13fd5c['from'])&&(_0x13fd5c['from']=_0x13f099['states'][_0x13fd5c['from']]['name']),Number['isInteger'](_0x13fd5c['to'])&&(_0x13fd5c['to']=_0x13f099['states'][_0x13fd5c['to']]['name']),_0x5d139f['transition'+'s']['push'](_0x13fd5c);}this['_layers']['push'](_0x5d139f);}for(const _0x21c65d in _0x13f099['parameters']){const _0x30ff95=_0x13f099['parameters'][_0x21c65d];this['_parameter'+'s'][_0x30ff95['name']]={'type':_0x30ff95['type'],'value':_0x30ff95['value']};}}get['parameters'](){return Object['assign']({},this['_parameter'+'s']);}get['layers'](){return this['_layers'];}}class cv extends we{constructor(){super(...arguments),h(this,'_stateGrap'+'hAsset',null),h(this,'_animation'+'Assets',{}),h(this,'_speed',0x132e+-0x234+-0x10f9),h(this,'_activate',!(0x27*-0x1d+0x5a6+-0x13b)),h(this,'_playing',!(-0x1984+-0x1b22+-0x1*-0x34a7)),h(this,'_rootBone',null),h(this,'_stateGrap'+'h',null),h(this,'_layers',[]),h(this,'_layerIndi'+'ces',{}),h(this,'_parameter'+'s',{}),h(this,'_targets',{}),h(this,'_consumedT'+'riggers',new Set()),h(this,'_normalize'+'Weights',!(0x5*-0x3df+-0x21ca+0x3526)),h(this,'findParame'+'ter',_0x6263f5=>this['_parameter'+'s'][_0x6263f5]),h(this,'consumeTri'+'gger',_0x4092d2=>{this['_consumedT'+'riggers']['add'](_0x4092d2);});}set['stateGraph'+'Asset'](_0x54c7a9){if(_0x54c7a9===null){this['removeStat'+'eGraph']();return;}this['_stateGrap'+'hAsset']&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);let _0x2b8e96,_0x50e986;_0x54c7a9 instanceof pe?(_0x2b8e96=_0x54c7a9['id'],_0x50e986=this['system']['app']['assets']['get'](_0x2b8e96),_0x50e986||(this['system']['app']['assets']['add'](_0x54c7a9),_0x50e986=this['system']['app']['assets']['get'](_0x2b8e96))):(_0x2b8e96=_0x54c7a9,_0x50e986=this['system']['app']['assets']['get'](_0x2b8e96)),!(!_0x50e986||this['_stateGrap'+'hAsset']===_0x2b8e96)&&(_0x50e986['resource']?(this['_stateGrap'+'h']=_0x50e986['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']),_0x50e986['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this)):(_0x50e986['once']('load',_0x1c7829=>{this['_stateGrap'+'h']=_0x1c7829['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']);}),_0x50e986['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this),this['system']['app']['assets']['load'](_0x50e986)),this['_stateGrap'+'hAsset']=_0x2b8e96);}get['stateGraph'+'Asset'](){return this['_stateGrap'+'hAsset'];}set['normalizeW'+'eights'](_0x5459b0){this['_normalize'+'Weights']=_0x5459b0,this['unbind']();}get['normalizeW'+'eights'](){return this['_normalize'+'Weights'];}set['animationA'+'ssets'](_0x28b700){this['_animation'+'Assets']=_0x28b700,this['loadAnimat'+'ionAssets']();}get['animationA'+'ssets'](){return this['_animation'+'Assets'];}set['speed'](_0x400af8){this['_speed']=_0x400af8;}get['speed'](){return this['_speed'];}set['activate'](_0x5bbbbe){this['_activate']=_0x5bbbbe;}get['activate'](){return this['_activate'];}set['playing'](_0x27100c){this['_playing']=_0x27100c;}get['playing'](){return this['_playing'];}set['rootBone'](_0x18d7d6){if(typeof _0x18d7d6=='string'){const _0xfebad2=this['entity']['root']['findByGuid'](_0x18d7d6);w['assert'](_0xfebad2,'rootBone\x20e'+'ntity\x20for\x20'+'supplied\x20g'+'uid:'+_0x18d7d6+('\x20cannot\x20be'+'\x20found\x20in\x20'+'the\x20scene')),this['_rootBone']=_0xfebad2;}else _0x18d7d6 instanceof lt?this['_rootBone']=_0x18d7d6:this['_rootBone']=null;this['rebind']();}get['rootBone'](){return this['_rootBone'];}set['stateGraph'](_0x12b147){this['_stateGrap'+'h']=_0x12b147;}get['stateGraph'](){return this['_stateGrap'+'h'];}get['layers'](){return this['_layers'];}set['layerIndic'+'es'](_0x345122){this['_layerIndi'+'ces']=_0x345122;}get['layerIndic'+'es'](){return this['_layerIndi'+'ces'];}set['parameters'](_0x34b3d4){this['_parameter'+'s']=_0x34b3d4;}get['parameters'](){return this['_parameter'+'s'];}set['targets'](_0x199695){this['_targets']=_0x199695;}get['targets'](){return this['_targets'];}get['playable'](){for(let _0x43b65c=-0x1787+0xe2f+0x958;_0x43b65c<this['_layers']['length'];_0x43b65c++)if(!this['_layers'][_0x43b65c]['playable'])return!(-0x3*-0x4cf+0x407*0x1+0x1273*-0x1);return!(-0x11f1*0x1+0xaba+0x737);}get['baseLayer'](){return this['_layers']['length']>-0x17*0xef+-0x2*0x1080+0xae5*0x5?this['_layers'][0x2528*0x1+-0x1f*0xd1+-0xbd9]:null;}['_onStateGr'+'aphAssetCh'+'angeEvent'](_0x15239e){const _0x11299a=this['animationA'+'ssets'],_0x11e4dd=this['layers']['map'](_0xd4ef57=>_0xd4ef57['mask']);this['removeStat'+'eGraph'](),this['_stateGrap'+'h']=new Ic(_0x15239e['_data']),this['loadStateG'+'raph'](this['_stateGrap'+'h']),this['animationA'+'ssets']=_0x11299a,this['loadAnimat'+'ionAssets'](),this['layers']['forEach']((_0x349ab1,_0x4675c2)=>{_0x349ab1['mask']=_0x11e4dd[_0x4675c2];}),this['rebind']();}['dirtifyTar'+'gets'](){const _0x41746a=Object['values'](this['_targets']);for(let _0x294a82=0x23cf*0x1+0x145*-0x1d+-0x3*-0x56;_0x294a82<_0x41746a['length'];_0x294a82++)_0x41746a[_0x294a82]['dirty']=!(-0x1f20+0x1*0x4be+0x133*0x16);}['_addLayer']({name:_0x4df163,states:_0x476ff4,transitions:_0x3bfe09,weight:_0x3cdd8f,mask:_0x438e87,blendType:_0x3b19dc}){let _0x138b29;this['rootBone']?_0x138b29=this['rootBone']:_0x138b29=this['entity'];const _0x42db18=this['_layers']['length'],_0x6422de=new Oi(this,_0x138b29,_0x4df163,_0x438e87,_0x42db18),_0x44d789=new nv(_0x6422de),_0x1738c5=new eL(_0x44d789,_0x476ff4,_0x3bfe09,this['_activate'],this,this['findParame'+'ter'],this['consumeTri'+'gger']);return this['_layers']['push'](new tL(_0x4df163,_0x1738c5,this,_0x3cdd8f,_0x3b19dc)),this['_layerIndi'+'ces'][_0x4df163]=_0x42db18,this['_layers'][_0x42db18];}['addLayer'](_0x20bf8f,_0x181618,_0xfa4796,_0x584f7b){const _0x321309=this['findAnimat'+'ionLayer'](_0x20bf8f);if(_0x321309)return _0x321309;const _0x23beca=[{'name':'START','speed':0x1}],_0x3be878=[];return this['_addLayer']({'name':_0x20bf8f,'states':_0x23beca,'transitions':_0x3be878,'weight':_0x181618,'mask':_0xfa4796,'blendType':_0x584f7b});}['_assignPar'+'ameters'](_0x4109f6){this['_parameter'+'s']={};const _0x163e5d=Object['keys'](_0x4109f6['parameters']);for(let _0x4f17b1=0x4b5*0x7+-0xd4f+-0x13a4;_0x4f17b1<_0x163e5d['length'];_0x4f17b1++){const _0x51c137=_0x163e5d[_0x4f17b1];this['_parameter'+'s'][_0x51c137]={'type':_0x4109f6['parameters'][_0x51c137]['type'],'value':_0x4109f6['parameters'][_0x51c137]['value']};}}['loadStateG'+'raph'](_0x760e53){this['_stateGrap'+'h']=_0x760e53,this['_assignPar'+'ameters'](_0x760e53),this['_layers']=[];let _0x36b05c=!(0x1d*0x93+0x1*0x351+-0x13f7*0x1);for(let _0x26e319=-0x25b1+0x19db*0x1+0xbd6;_0x26e319<_0x760e53['layers']['length'];_0x26e319++){const _0x3e7226=_0x760e53['layers'][_0x26e319];this['_addLayer']({..._0x3e7226}),_0x3e7226['states']['some'](_0x23a8a1=>_0x23a8a1['blendTree'])&&(_0x36b05c=!(0x1ac5+-0x156e+-0x557));}_0x36b05c||this['setupAnima'+'tionAssets']();}['setupAnima'+'tionAssets'](){for(let _0x5b00d4=0xde7+-0x61b*-0x3+-0x1*0x2038;_0x5b00d4<this['_layers']['length'];_0x5b00d4++){const _0x38efc7=this['_layers'][_0x5b00d4],_0x1c67b5=_0x38efc7['name'];for(let _0x189df7=0x17b9+-0x2256+0xd*0xd1;_0x189df7<_0x38efc7['states']['length'];_0x189df7++){const _0x499a34=_0x38efc7['states'][_0x189df7];if(ch['indexOf'](_0x499a34)===-(-0x1a0d+0x932*-0x3+0x35a4)){const _0x449e16=_0x1c67b5+':'+_0x499a34;this['_animation'+'Assets'][_0x449e16]||(this['_animation'+'Assets'][_0x449e16]={'asset':null});}}}this['loadAnimat'+'ionAssets']();}['loadAnimat'+'ionAssets'](){for(let _0x28c9c6=-0x2*-0xb41+-0x1167*-0x1+-0x27e9;_0x28c9c6<this['_layers']['length'];_0x28c9c6++){const _0x1bbdb9=this['_layers'][_0x28c9c6];for(let _0x1897ed=-0x1*0x1a75+0xc7b+-0x1*-0xdfa;_0x1897ed<_0x1bbdb9['states']['length'];_0x1897ed++){const _0x536c27=_0x1bbdb9['states'][_0x1897ed];if(ch['indexOf'](_0x536c27)!==-(-0x1*-0x10d9+0xcf1*0x1+-0x1dc9))continue;const _0x48dea2=this['_animation'+'Assets'][_0x1bbdb9['name']+':'+_0x536c27];if(!_0x48dea2||!_0x48dea2['asset']){this['findAnimat'+'ionLayer'](_0x1bbdb9['name'])['assignAnim'+'ation'](_0x536c27,Zi['EMPTY']);continue;}const _0x3c71a3=_0x48dea2['asset'],_0x109428=this['system']['app']['assets']['get'](_0x3c71a3);_0x109428&&(_0x109428['resource']?this['onAnimatio'+'nAssetLoad'+'ed'](_0x1bbdb9['name'],_0x536c27,_0x109428):(_0x109428['once']('load',function(_0x4d203f,_0x2e97ec){return function(_0x4a85f0){this['onAnimatio'+'nAssetLoad'+'ed'](_0x4d203f,_0x2e97ec,_0x4a85f0);}['bind'](this);}['bind'](this)(_0x1bbdb9['name'],_0x536c27)),this['system']['app']['assets']['load'](_0x109428)));}}}['onAnimatio'+'nAssetLoad'+'ed'](_0x2cc530,_0x54d179,_0x936ce3){this['findAnimat'+'ionLayer'](_0x2cc530)['assignAnim'+'ation'](_0x54d179,_0x936ce3['resource']);}['removeStat'+'eGraph'](){this['_stateGrap'+'h']=null,this['_stateGrap'+'hAsset']=null,this['_animation'+'Assets']={},this['_layers']=[],this['_layerIndi'+'ces']={},this['_parameter'+'s']={},this['_playing']=!(-0x1544+-0xabc+0x2001*0x1),this['unbind'](),this['_targets']={};}['reset'](){this['_assignPar'+'ameters'](this['_stateGrap'+'h']);for(let _0x58f658=-0x1eea+-0x1d48+-0x3c32*-0x1;_0x58f658<this['_layers']['length'];_0x58f658++){const _0x1bb798=this['_layers'][_0x58f658]['playing'];this['_layers'][_0x58f658]['reset'](),this['_layers'][_0x58f658]['playing']=_0x1bb798;}}['unbind'](){this['_normalize'+'Weights']||Object['keys'](this['_targets'])['forEach'](_0x4a08d5=>{this['_targets'][_0x4a08d5]['unbind']();});}['rebind'](){this['_targets']={};for(let _0x5bb8a1=0x1*-0x9f5+-0x2521+-0x2a*-0x11f;_0x5bb8a1<this['_layers']['length'];_0x5bb8a1++)this['_layers'][_0x5bb8a1]['rebind']();}['findAnimat'+'ionLayer'](_0x194579){const _0xdc7ec9=this['_layerIndi'+'ces'][_0x194579];return this['_layers'][_0xdc7ec9]||null;}['addAnimati'+'onState'](_0x357c7f,_0x472684,_0x230d11=0xf86+-0x213*0xf+-0x8*-0x1f3,_0x33e7aa=!(-0xb*0x2f3+0x21c7+-0x156),_0x1d4f4f='Base'){var _0x35f891;this['_stateGrap'+'h']||this['loadStateG'+'raph'](new Ic({'layers':[{'name':_0x1d4f4f,'states':[{'name':'START','speed':0x1},{'name':_0x357c7f,'speed':_0x230d11,'loop':_0x33e7aa,'defaultState':!(0x80f*0x2+-0x16*-0x1af+0x38*-0xf3)}],'transitions':[{'from':'START','to':_0x357c7f}]}],'parameters':{}}));const _0x161a92=this['findAnimat'+'ionLayer'](_0x1d4f4f);_0x161a92?_0x161a92['assignAnim'+'ation'](_0x357c7f,_0x472684,_0x230d11,_0x33e7aa):(_0x35f891=this['addLayer'](_0x1d4f4f))==null||_0x35f891['assignAnim'+'ation'](_0x357c7f,_0x472684,_0x230d11,_0x33e7aa);}['assignAnim'+'ation'](_0x5c8eb4,_0x569c94,_0x34d371,_0x448f2c=0x27e*-0x1+-0x113c+-0x13bb*-0x1,_0x47a14d=!(-0x545*-0x5+-0xa*0xa3+-0xa5*0x1f)){if(!this['_stateGrap'+'h']&&_0x5c8eb4['indexOf']('.')===-(0x10*-0x209+-0x2144+0x41d5)){this['loadStateG'+'raph'](new Ic({'layers':[{'name':'Base','states':[{'name':'START','speed':0x1},{'name':_0x5c8eb4,'speed':_0x448f2c,'loop':_0x47a14d,'defaultState':!(0x1132+0x3*0x981+-0x2db5)}],'transitions':[{'from':'START','to':_0x5c8eb4}]}],'parameters':{}})),this['baseLayer']['assignAnim'+'ation'](_0x5c8eb4,_0x569c94);return;}const _0x4c3a93=_0x34d371?this['findAnimat'+'ionLayer'](_0x34d371):this['baseLayer'];if(!_0x4c3a93){w['error']('assignAnim'+'ation:\x20Try'+'ing\x20to\x20ass'+'ign\x20an\x20ani'+'m\x20track\x20to'+'\x20a\x20layer\x20t'+'hat\x20doesn\x27'+'t\x20exist');return;}_0x4c3a93['assignAnim'+'ation'](_0x5c8eb4,_0x569c94,_0x448f2c,_0x47a14d);}['removeNode'+'Animations'](_0x5db04b,_0x5a023d){const _0x2864a1=_0x5a023d?this['findAnimat'+'ionLayer'](_0x5a023d):this['baseLayer'];if(!_0x2864a1){w['error']('removeStat'+'eAnimation'+'s:\x20Trying\x20'+'to\x20remove\x20'+'animation\x20'+'tracks\x20fro'+'m\x20a\x20state\x20'+'before\x20the'+'\x20state\x20gra'+'ph\x20has\x20bee'+'n\x20loaded.\x20'+'Have\x20you\x20c'+'alled\x20load'+'StateGraph'+'?');return;}_0x2864a1['removeNode'+'Animations'](_0x5db04b);}['getParamet'+'erValue'](_0x208236,_0x490df2){const _0x4873fd=this['_parameter'+'s'][_0x208236];if(_0x4873fd&&_0x4873fd['type']===_0x490df2)return _0x4873fd['value'];w['log']('Cannot\x20get'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0x208236+('\x22\x20of\x20type\x20'+'\x22')+_0x490df2+'\x22');}['setParamet'+'erValue'](_0x38e8e7,_0x57d3e1,_0x1672eb){const _0x44894d=this['_parameter'+'s'][_0x38e8e7];if(_0x44894d&&_0x44894d['type']===_0x57d3e1){_0x44894d['value']=_0x1672eb;return;}w['log']('Cannot\x20set'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0x38e8e7+('\x22\x20of\x20type\x20'+'\x22')+_0x57d3e1+'\x22');}['getFloat'](_0x56c98b){return this['getParamet'+'erValue'](_0x56c98b,rg);}['setFloat'](_0x7db9c7,_0x4fea4c){this['setParamet'+'erValue'](_0x7db9c7,rg,_0x4fea4c);}['getInteger'](_0x54248b){return this['getParamet'+'erValue'](_0x54248b,ig);}['setInteger'](_0x523355,_0x1acfaf){typeof _0x1acfaf=='number'&&_0x1acfaf%(-0x266*0x9+0x30d*0x1+0x2*0x945)===0x56*0x22+0x65*0x2f+-0x3*0x9fd?this['setParamet'+'erValue'](_0x523355,ig,_0x1acfaf):w['error']('Attempting'+'\x20to\x20assign'+'\x20non\x20integ'+'er\x20value\x20t'+'o\x20integer\x20'+'parameter',_0x523355,_0x1acfaf);}['getBoolean'](_0x44a936){return this['getParamet'+'erValue'](_0x44a936,ag);}['setBoolean'](_0x3daf37,_0x510be6){this['setParamet'+'erValue'](_0x3daf37,ag,!!_0x510be6);}['getTrigger'](_0x3934b2){return this['getParamet'+'erValue'](_0x3934b2,Dc);}['setTrigger'](_0x1ce02a,_0x4e05a7=!(0x2*-0x112f+0x13ab+0xeb4)){this['setParamet'+'erValue'](_0x1ce02a,Dc,!(-0x1*0xdc6+-0x1f54+-0x168d*-0x2)),_0x4e05a7&&this['_consumedT'+'riggers']['add'](_0x1ce02a);}['resetTrigg'+'er'](_0x2013e5){this['setParamet'+'erValue'](_0x2013e5,Dc,!(0x361*-0xa+0x3*0x37+0x2126));}['onBeforeRe'+'move'](){Number['isFinite'](this['_stateGrap'+'hAsset'])&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);}['update'](_0x41e559){for(let _0x5e2aa3=0xb4+-0x149*-0x15+-0x1bb1;_0x5e2aa3<this['layers']['length'];_0x5e2aa3++)this['layers'][_0x5e2aa3]['update'](_0x41e559*this['speed']);this['_consumedT'+'riggers']['forEach'](_0x5d6de9=>{this['parameters'][_0x5d6de9]['value']=!(0x4*-0x521+-0x62*0x47+-0x1*-0x2fb3);}),this['_consumedT'+'riggers']['clear']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x474eb1,_0xe2fe80){_0x474eb1['rootBone']&&_0xe2fe80[_0x474eb1['rootBone']['getGuid']()]?this['rootBone']=_0xe2fe80[_0x474eb1['rootBone']['getGuid']()]:this['rebind']();}}class sL{constructor(){this['enabled']=!(-0x7*0x21b+-0x1d3e*-0x1+-0xe81);}}const Jf=['enabled'];class iL extends ct{constructor(_0x18d01e){super(_0x18d01e),this['id']='anim',this['ComponentT'+'ype']=cv,this['DataType']=sL,this['schema']=Jf,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x37bece,_0x48df60,_0x2f9045){super['initialize'+'ComponentD'+'ata'](_0x37bece,_0x48df60,Jf);const _0x3e17ab=['animationA'+'ssets','stateGraph','layers','masks'];Object['keys'](_0x48df60)['forEach'](_0x48e29b=>{_0x3e17ab['includes'](_0x48e29b)||(_0x37bece[_0x48e29b]=_0x48df60[_0x48e29b]);}),_0x48df60['stateGraph']&&(_0x37bece['stateGraph']=_0x48df60['stateGraph'],_0x37bece['loadStateG'+'raph'](_0x37bece['stateGraph'])),_0x48df60['layers']&&_0x48df60['layers']['forEach']((_0x1e34b4,_0x4428b4)=>{_0x1e34b4['_controlle'+'r']['states']['forEach'](_0x4e822a=>{_0x1e34b4['_controlle'+'r']['_states'][_0x4e822a]['_animation'+'List']['forEach'](_0x4928da=>{if(!_0x4928da['animTrack']||_0x4928da['animTrack']===Zi['EMPTY']){const _0x2f3e8e=this['app']['assets']['get'](_0x1e34b4['_component']['_animation'+'Assets'][_0x1e34b4['name']+':'+_0x4928da['name']]['asset']);_0x2f3e8e&&!_0x2f3e8e['loaded']&&_0x2f3e8e['once']('load',()=>{_0x37bece['layers'][_0x4428b4]['assignAnim'+'ation'](_0x4928da['name'],_0x2f3e8e['resource']);});}else _0x37bece['layers'][_0x4428b4]['assignAnim'+'ation'](_0x4928da['name'],_0x4928da['animTrack']);});});}),_0x48df60['animationA'+'ssets']&&(_0x37bece['animationA'+'ssets']=Object['assign'](_0x37bece['animationA'+'ssets'],_0x48df60['animationA'+'ssets'])),_0x48df60['masks']&&Object['keys'](_0x48df60['masks'])['forEach'](_0x56e835=>{if(_0x37bece['layers'][_0x56e835]){const _0x532ed1=_0x48df60['masks'][_0x56e835]['mask'],_0x5918be={};Object['keys'](_0x532ed1)['forEach'](_0x2b3bc5=>{_0x5918be[decodeURI(_0x2b3bc5)]=_0x532ed1[_0x2b3bc5];}),_0x37bece['layers'][_0x56e835]['mask']=_0x5918be;}});}['onAnimatio'+'nUpdate'](_0x3bd7bd){const _0x2ada0a=this['store'];for(const _0x65c810 in _0x2ada0a)if(_0x2ada0a['hasOwnProp'+'erty'](_0x65c810)){const _0x320873=_0x2ada0a[_0x65c810]['entity']['anim'];_0x320873['data']['enabled']&&_0x320873['entity']['enabled']&&_0x320873['playing']&&_0x320873['update'](_0x3bd7bd);}}['cloneCompo'+'nent'](_0x4fd5a8,_0x3fcbc7){let _0x41c7f5;(!_0x4fd5a8['anim']['rootBone']||_0x4fd5a8['anim']['rootBone']===_0x4fd5a8)&&(_0x41c7f5={},_0x4fd5a8['anim']['layers']['forEach']((_0x2fc9cc,_0x496f9a)=>{if(_0x2fc9cc['mask']){const _0x433de1={};Object['keys'](_0x2fc9cc['mask'])['forEach'](_0x2c3402=>{const _0x52dae1=_0x2c3402['split']('/');_0x52dae1['shift']();const _0x402a32=[_0x3fcbc7['name'],..._0x52dae1]['join']('/');_0x433de1[_0x402a32]=_0x2fc9cc['mask'][_0x2c3402];}),_0x41c7f5[_0x496f9a]={'mask':_0x433de1};}}));const _0x2c1ec8={'enabled':_0x4fd5a8['anim']['enabled'],'stateGraphAsset':_0x4fd5a8['anim']['stateGraph'+'Asset'],'animationAssets':_0x4fd5a8['anim']['animationA'+'ssets'],'speed':_0x4fd5a8['anim']['speed'],'activate':_0x4fd5a8['anim']['activate'],'playing':_0x4fd5a8['anim']['playing'],'rootBone':_0x4fd5a8['anim']['rootBone'],'stateGraph':_0x4fd5a8['anim']['stateGraph'],'layers':_0x4fd5a8['anim']['layers'],'layerIndices':_0x4fd5a8['anim']['layerIndic'+'es'],'parameters':_0x4fd5a8['anim']['parameters'],'normalizeWeights':_0x4fd5a8['anim']['normalizeW'+'eights'],'masks':_0x41c7f5};return this['addCompone'+'nt'](_0x3fcbc7,_0x2c1ec8);}['onBeforeRe'+'move'](_0x48564f,_0x59cdb6){_0x59cdb6['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}}we['_buildAcce'+'ssors'](cv['prototype'],Jf);class hv extends we{['setCurrent'+'Listener'](){if(this['enabled']&&this['entity']['audioliste'+'ner']&&this['entity']['enabled']){this['system']['current']=this['entity'];const _0x5c0364=this['system']['current']['getPositio'+'n']();this['system']['manager']['listener']['setPositio'+'n'](_0x5c0364);}}['onEnable'](){this['setCurrent'+'Listener']();}['onDisable'](){this['system']['current']===this['entity']&&(this['system']['current']=null);}}class rL{constructor(){this['enabled']=!(-0x1*-0x252a+0x18b0+-0x261*0x1a);}}const dv=['enabled'];class aL extends ct{constructor(_0x19979c){super(_0x19979c),this['id']='audioliste'+'ner',this['ComponentT'+'ype']=hv,this['DataType']=rL,this['schema']=dv,this['manager']=_0x19979c['soundManag'+'er'],w['assert'](this['manager'],'AudioListe'+'nerCompone'+'ntSystem\x20c'+'annot\x20be\x20c'+'reated\x20wit'+'hout\x20sound'+'\x20manager'),this['current']=null,this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x22f02c,_0x895fd3,_0x49de3e){_0x49de3e=['enabled'],super['initialize'+'ComponentD'+'ata'](_0x22f02c,_0x895fd3,_0x49de3e);}['onUpdate'](_0x289e1e){if(this['current']){const _0x2bfb28=this['current']['getPositio'+'n']();this['manager']['listener']['setPositio'+'n'](_0x2bfb28);const _0x45b026=this['current']['getWorldTr'+'ansform']();this['manager']['listener']['setOrienta'+'tion'](_0x45b026);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](hv['prototype'],dv);const eu=-0xa23+-0x1143+0x1b66,og=0x244f+0x3a0*0x3+0x44a*-0xb,Lc='group',tu='image',fv='text',Rc='stretch',nL='contain',oL='cover',ft={'DEFAULT':'DEFAULT','HOVER':'HOVER','PRESSED':'PRESSED','INACTIVE':'INACTIVE'},El={};El[ft['DEFAULT']]='_defaultTi'+'nt',El[ft['HOVER']]='hoverTint',El[ft['PRESSED']]='pressedTin'+'t',El[ft['INACTIVE']]='inactiveTi'+'nt';const bl={};bl[ft['DEFAULT']]='_defaultSp'+'riteAsset',bl[ft['HOVER']]='hoverSprit'+'eAsset',bl[ft['PRESSED']]='pressedSpr'+'iteAsset',bl[ft['INACTIVE']]='inactiveSp'+'riteAsset';const Al={};Al[ft['DEFAULT']]='_defaultSp'+'riteFrame',Al[ft['HOVER']]='hoverSprit'+'eFrame',Al[ft['PRESSED']]='pressedSpr'+'iteFrame',Al[ft['INACTIVE']]='inactiveSp'+'riteFrame';class It extends we{constructor(_0x39f724,_0x4d2d66){super(_0x39f724,_0x4d2d66),h(this,'_visualSta'+'te',ft['DEFAULT']),h(this,'_isHoverin'+'g',!(-0x90*-0x37+0x1f*-0xc3+0x2*-0x3a9)),h(this,'_hoveringC'+'ounter',0x234+0x1*0x534+0x1da*-0x4),h(this,'_isPressed',!(0x2*-0x100+-0xfd6*0x1+-0x1*-0x11d7)),h(this,'_defaultTi'+'nt',new ie(0x1be9+0xf69+-0x2b51,0x13df+0x2a*-0xb3+0x980,-0x219a+0x2512+-0x377*0x1,0x3*-0xb2b+-0x3*-0x75d+-0x4f*-0x25)),h(this,'_defaultSp'+'riteAsset',null),h(this,'_defaultSp'+'riteFrame',-0xad*-0x25+0x207d+-0x397e),h(this,'_imageEnti'+'ty',null),h(this,'_evtElemen'+'tAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntRemove',null),h(this,'_evtImageE'+'ntityEleme'+'ntColor',null),h(this,'_evtImageE'+'ntityEleme'+'ntOpacity',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame',null),(this['_visualSta'+'te']=ft['DEFAULT'],this['_isHoverin'+'g']=!(-0x9*-0x42d+-0x34*0xa7+-0x3a8),this['_hoveringC'+'ounter']=-0x70*-0xf+0x1057+0x29*-0x8f,this['_isPressed']=!(-0xa67*-0x1+-0x7*0x4cd+-0x1735*-0x1),this['_defaultTi'+'nt']=new ie(-0x4eb*-0x1+0x2c9*-0x6+-0x14*-0x97,-0x169*0x11+0x2630+0xe36*-0x1,-0x1ce9*0x1+0x3fa*0x7+0x114,-0x1*0x287+0xfbf+0x11*-0xc7),this['_defaultSp'+'riteAsset']=null,this['_defaultSp'+'riteFrame']=0x8*-0x3ae+0x1814*-0x1+0x3584,this['_toggleLif'+'ecycleList'+'eners']('on',_0x39f724));}get['data'](){const _0x378fa7=this['system']['store'][this['entity']['getGuid']()];return _0x378fa7?_0x378fa7['data']:null;}set['enabled'](_0x33fd9b){this['_setValue']('enabled',_0x33fd9b);}get['enabled'](){return this['data']['enabled'];}set['active'](_0x27ac82){this['_setValue']('active',_0x27ac82);}get['active'](){return this['data']['active'];}set['imageEntit'+'y'](_0x5f33ed){if(this['_imageEnti'+'ty']!==_0x5f33ed){const _0x321c78=typeof _0x5f33ed=='string';if(this['_imageEnti'+'ty']&&_0x321c78&&this['_imageEnti'+'ty']['getGuid']()===_0x5f33ed)return;this['_imageEnti'+'ty']&&this['_imageEnti'+'tyUnsubscr'+'ibe'](),_0x5f33ed instanceof Ie?this['_imageEnti'+'ty']=_0x5f33ed:_0x321c78?this['_imageEnti'+'ty']=this['system']['app']['getEntityF'+'romIndex'](_0x5f33ed)||null:this['_imageEnti'+'ty']=null,this['_imageEnti'+'ty']&&this['_imageEnti'+'tySubscrib'+'e'](),this['_imageEnti'+'ty']?this['data']['imageEntit'+'y']=this['_imageEnti'+'ty']['getGuid']():_0x321c78&&_0x5f33ed&&(this['data']['imageEntit'+'y']=_0x5f33ed);}}get['imageEntit'+'y'](){return this['_imageEnti'+'ty'];}set['hitPadding'](_0x33fc6e){this['_setValue']('hitPadding',_0x33fc6e);}get['hitPadding'](){return this['data']['hitPadding'];}set['transition'+'Mode'](_0x4d701c){this['_setValue']('transition'+'Mode',_0x4d701c);}get['transition'+'Mode'](){return this['data']['transition'+'Mode'];}set['hoverTint'](_0x44bd44){this['_setValue']('hoverTint',_0x44bd44);}get['hoverTint'](){return this['data']['hoverTint'];}set['pressedTin'+'t'](_0x477350){this['_setValue']('pressedTin'+'t',_0x477350);}get['pressedTin'+'t'](){return this['data']['pressedTin'+'t'];}set['inactiveTi'+'nt'](_0x513fa5){this['_setValue']('inactiveTi'+'nt',_0x513fa5);}get['inactiveTi'+'nt'](){return this['data']['inactiveTi'+'nt'];}set['fadeDurati'+'on'](_0x2b643e){this['_setValue']('fadeDurati'+'on',_0x2b643e);}get['fadeDurati'+'on'](){return this['data']['fadeDurati'+'on'];}set['hoverSprit'+'eAsset'](_0x11684a){this['_setValue']('hoverSprit'+'eAsset',_0x11684a);}get['hoverSprit'+'eAsset'](){return this['data']['hoverSprit'+'eAsset'];}set['hoverSprit'+'eFrame'](_0x4fa8b8){this['_setValue']('hoverSprit'+'eFrame',_0x4fa8b8);}get['hoverSprit'+'eFrame'](){return this['data']['hoverSprit'+'eFrame'];}set['pressedSpr'+'iteAsset'](_0x20f8bc){this['_setValue']('pressedSpr'+'iteAsset',_0x20f8bc);}get['pressedSpr'+'iteAsset'](){return this['data']['pressedSpr'+'iteAsset'];}set['pressedSpr'+'iteFrame'](_0x225b53){this['_setValue']('pressedSpr'+'iteFrame',_0x225b53);}get['pressedSpr'+'iteFrame'](){return this['data']['pressedSpr'+'iteFrame'];}set['inactiveSp'+'riteAsset'](_0x20fcb2){this['_setValue']('inactiveSp'+'riteAsset',_0x20fcb2);}get['inactiveSp'+'riteAsset'](){return this['data']['inactiveSp'+'riteAsset'];}set['inactiveSp'+'riteFrame'](_0x10af12){this['_setValue']('inactiveSp'+'riteFrame',_0x10af12);}get['inactiveSp'+'riteFrame'](){return this['data']['inactiveSp'+'riteFrame'];}['_setValue'](_0x1039e7,_0x47bc78){const _0x1ef5b5=this['data'],_0x12eca0=_0x1ef5b5[_0x1039e7];_0x1ef5b5[_0x1039e7]=_0x47bc78,this['fire']('set',_0x1039e7,_0x12eca0,_0x47bc78);}['_toggleLif'+'ecycleList'+'eners'](_0x23101d,_0x5a7327){var _0x19829a;this[_0x23101d]('set_active',this['_onSetActi'+'ve'],this),this[_0x23101d]('set_transi'+'tionMode',this['_onSetTran'+'sitionMode'],this),this[_0x23101d]('set_hoverT'+'int',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x23101d]('set_presse'+'dTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x23101d]('set_inacti'+'veTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x23101d]('set_hoverS'+'priteAsset',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x23101d]('set_hoverS'+'priteFrame',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x23101d]('set_presse'+'dSpriteAss'+'et',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x23101d]('set_presse'+'dSpriteFra'+'me',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x23101d]('set_inacti'+'veSpriteAs'+'set',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x23101d]('set_inacti'+'veSpriteFr'+'ame',this['_onSetTran'+'sitionValu'+'e'],this),_0x23101d==='on'?this['_evtElemen'+'tAdd']=this['entity']['on']('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this):((_0x19829a=this['_evtElemen'+'tAdd'])==null||_0x19829a['off'](),this['_evtElemen'+'tAdd']=null);}['_onSetActi'+'ve'](_0x5d2c0e,_0x59a39e,_0x4f667b){_0x59a39e!==_0x4f667b&&this['_updateVis'+'ualState']();}['_onSetTran'+'sitionMode'](_0xf2cb5d,_0x2cdd21,_0x5bc36b){_0x2cdd21!==_0x5bc36b&&(this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](_0x2cdd21),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetTran'+'sitionValu'+'e'](_0x96a316,_0x382486,_0x49ae29){_0x382486!==_0x49ae29&&this['_forceReap'+'plyVisualS'+'tate']();}['_imageEnti'+'tySubscrib'+'e'](){this['_evtImageE'+'ntityEleme'+'ntAdd']=this['_imageEnti'+'ty']['on']('element:ad'+'d',this['_onImageEl'+'ementGain'],this),this['_imageEnti'+'ty']['element']&&this['_onImageEl'+'ementGain']();}['_imageEnti'+'tyUnsubscr'+'ibe'](){var _0x3b23ba,_0xd75ac0;(_0x3b23ba=this['_evtImageE'+'ntityEleme'+'ntAdd'])==null||_0x3b23ba['off'](),this['_evtImageE'+'ntityEleme'+'ntAdd']=null,(_0xd75ac0=this['_imageEnti'+'ty'])!=null&&_0xd75ac0['element']&&this['_onImageEl'+'ementLose']();}['_imageEnti'+'tyElementS'+'ubscribe'](){const _0x468674=this['_imageEnti'+'ty']['element'];this['_evtImageE'+'ntityEleme'+'ntRemove']=_0x468674['once']('beforeremo'+'ve',this['_onImageEl'+'ementLose'],this),this['_evtImageE'+'ntityEleme'+'ntColor']=_0x468674['on']('set:color',this['_onSetColo'+'r'],this),this['_evtImageE'+'ntityEleme'+'ntOpacity']=_0x468674['on']('set:opacit'+'y',this['_onSetOpac'+'ity'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=_0x468674['on']('set:sprite'+'Asset',this['_onSetSpri'+'teAsset'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=_0x468674['on']('set:sprite'+'Frame',this['_onSetSpri'+'teFrame'],this);}['_imageEnti'+'tyElementU'+'nsubscribe'](){var _0x1e551a,_0x3c7ca0,_0x133642,_0x9822d9,_0x4e342c;(_0x1e551a=this['_evtImageE'+'ntityEleme'+'ntRemove'])==null||_0x1e551a['off'](),this['_evtImageE'+'ntityEleme'+'ntRemove']=null,(_0x3c7ca0=this['_evtImageE'+'ntityEleme'+'ntColor'])==null||_0x3c7ca0['off'](),this['_evtImageE'+'ntityEleme'+'ntColor']=null,(_0x133642=this['_evtImageE'+'ntityEleme'+'ntOpacity'])==null||_0x133642['off'](),this['_evtImageE'+'ntityEleme'+'ntOpacity']=null,(_0x9822d9=this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set'])==null||_0x9822d9['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=null,(_0x4e342c=this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame'])==null||_0x4e342c['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=null;}['_onElement'+'ComponentR'+'emove'](){this['_toggleHit'+'ElementLis'+'teners']('off');}['_onElement'+'ComponentA'+'dd'](){this['_toggleHit'+'ElementLis'+'teners']('on');}['_onImageEl'+'ementLose'](){this['_imageEnti'+'tyElementU'+'nsubscribe'](),this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['_onImageEl'+'ementGain'](){this['_imageEnti'+'tyElementS'+'ubscribe'](),this['_storeDefa'+'ultVisualS'+'tate'](),this['_forceReap'+'plyVisualS'+'tate']();}['_toggleHit'+'ElementLis'+'teners'](_0x2454f7){if(this['entity']['element']){const _0x4c2a8c=_0x2454f7==='on';if(_0x4c2a8c&&this['_hasHitEle'+'mentListen'+'ers'])return;this['entity']['element'][_0x2454f7]('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['entity']['element'][_0x2454f7]('mouseenter',this['_onMouseEn'+'ter'],this),this['entity']['element'][_0x2454f7]('mouseleave',this['_onMouseLe'+'ave'],this),this['entity']['element'][_0x2454f7]('mousedown',this['_onMouseDo'+'wn'],this),this['entity']['element'][_0x2454f7]('mouseup',this['_onMouseUp'],this),this['entity']['element'][_0x2454f7]('touchstart',this['_onTouchSt'+'art'],this),this['entity']['element'][_0x2454f7]('touchend',this['_onTouchEn'+'d'],this),this['entity']['element'][_0x2454f7]('touchleave',this['_onTouchLe'+'ave'],this),this['entity']['element'][_0x2454f7]('touchcance'+'l',this['_onTouchCa'+'ncel'],this),this['entity']['element'][_0x2454f7]('selectstar'+'t',this['_onSelectS'+'tart'],this),this['entity']['element'][_0x2454f7]('selectend',this['_onSelectE'+'nd'],this),this['entity']['element'][_0x2454f7]('selectente'+'r',this['_onSelectE'+'nter'],this),this['entity']['element'][_0x2454f7]('selectleav'+'e',this['_onSelectL'+'eave'],this),this['entity']['element'][_0x2454f7]('click',this['_onClick'],this),this['_hasHitEle'+'mentListen'+'ers']=_0x4c2a8c;}}['_storeDefa'+'ultVisualS'+'tate'](){var _0x40e973;const _0x3084aa=(_0x40e973=this['_imageEnti'+'ty'])==null?void(0x4f*0x67+-0x15e7+-0x9e2):_0x40e973['element'];!_0x3084aa||_0x3084aa['type']===Lc||(this['_storeDefa'+'ultColor'](_0x3084aa['color']),this['_storeDefa'+'ultOpacity'](_0x3084aa['opacity']),this['_storeDefa'+'ultSpriteA'+'sset'](_0x3084aa['spriteAsse'+'t']),this['_storeDefa'+'ultSpriteF'+'rame'](_0x3084aa['spriteFram'+'e']));}['_storeDefa'+'ultColor'](_0xba6034){this['_defaultTi'+'nt']['r']=_0xba6034['r'],this['_defaultTi'+'nt']['g']=_0xba6034['g'],this['_defaultTi'+'nt']['b']=_0xba6034['b'];}['_storeDefa'+'ultOpacity'](_0x1327d6){this['_defaultTi'+'nt']['a']=_0x1327d6;}['_storeDefa'+'ultSpriteA'+'sset'](_0x9c89cc){this['_defaultSp'+'riteAsset']=_0x9c89cc;}['_storeDefa'+'ultSpriteF'+'rame'](_0x2d98d9){this['_defaultSp'+'riteFrame']=_0x2d98d9;}['_onSetColo'+'r'](_0x2c4f9c){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultColor'](_0x2c4f9c),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetOpac'+'ity'](_0x2fe7be){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultOpacity'](_0x2fe7be),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teAsset'](_0x4efbf7){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteA'+'sset'](_0x4efbf7),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teFrame'](_0x1c5487){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteF'+'rame'](_0x1c5487),this['_forceReap'+'plyVisualS'+'tate']());}['_onMouseEn'+'ter'](_0x2b99fc){this['_isHoverin'+'g']=!(-0x2*-0x392+-0x1*-0xaab+0x11cf*-0x1),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseenter',_0x2b99fc);}['_onMouseLe'+'ave'](_0x54fec8){this['_isHoverin'+'g']=!(-0x2*0xb3f+0x9*0x35f+-0x7d8),this['_isPressed']=!(0xce5*-0x1+0xd1*-0x1+-0xdb7*-0x1),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseleave',_0x54fec8);}['_onMouseDo'+'wn'](_0x7407af){this['_isPressed']=!(-0x1*-0x127b+-0x1ec3+-0x3*-0x418),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mousedown',_0x7407af);}['_onMouseUp'](_0x3211c6){this['_isPressed']=!(0x137b+-0xca*-0x2+-0x150e),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseup',_0x3211c6);}['_onTouchSt'+'art'](_0x27f11d){this['_isPressed']=!(0x2326+-0x126*0xd+-0x1438),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchstart',_0x27f11d);}['_onTouchEn'+'d'](_0x4658a9){_0x4658a9['event']['preventDef'+'ault'](),this['_isPressed']=!(0x11e3+-0x3*-0xafb+-0x32d3),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchend',_0x4658a9);}['_onTouchLe'+'ave'](_0x20387d){this['_isPressed']=!(0x25f*-0x1+-0x7d5+0xa35),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchleave',_0x20387d);}['_onTouchCa'+'ncel'](_0x6a1ea6){this['_isPressed']=!(-0x1*-0x994+0x18dc+-0xd7*0x29),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchcance'+'l',_0x6a1ea6);}['_onSelectS'+'tart'](_0x30bb03){this['_isPressed']=!(0x989*0x3+-0x2068+0x3cd),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectstar'+'t',_0x30bb03);}['_onSelectE'+'nd'](_0x137104){this['_isPressed']=!(-0x1daa+0x1*-0x1daa+0x3*0x13c7),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectend',_0x137104);}['_onSelectE'+'nter'](_0x499d96){this['_hoveringC'+'ounter']++,this['_hoveringC'+'ounter']===-0x2ab+-0xd55*0x2+-0x2*-0xeab&&(this['_isHoverin'+'g']=!(-0x2387+-0x254c+0x1*0x48d3),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectente'+'r',_0x499d96);}['_onSelectL'+'eave'](_0x240b33){this['_hoveringC'+'ounter']--,this['_hoveringC'+'ounter']===0x3dd+-0xff6*0x2+-0xb*-0x28d&&(this['_isHoverin'+'g']=!(0x1cd3+0x88c+-0x255e),this['_isPressed']=!(0x61d+0x1*-0x1c15+-0x7d*-0x2d),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectleav'+'e',_0x240b33);}['_onClick'](_0x4a1b98){this['_fireIfAct'+'ive']('click',_0x4a1b98);}['_fireIfAct'+'ive'](_0x2bcd54,_0x41fbe3){this['data']['active']&&this['fire'](_0x2bcd54,_0x41fbe3);}['_updateVis'+'ualState'](_0x3a5003){const _0x2c9a00=this['_visualSta'+'te'],_0x5d29e7=this['_determine'+'VisualStat'+'e']();if((_0x2c9a00!==_0x5d29e7||_0x3a5003)&&this['enabled'])switch(this['_visualSta'+'te']=_0x5d29e7,_0x2c9a00===ft['HOVER']&&this['_fireIfAct'+'ive']('hoverend'),_0x2c9a00===ft['PRESSED']&&this['_fireIfAct'+'ive']('pressedend'),_0x5d29e7===ft['HOVER']&&this['_fireIfAct'+'ive']('hoverstart'),_0x5d29e7===ft['PRESSED']&&this['_fireIfAct'+'ive']('pressedsta'+'rt'),this['transition'+'Mode']){case eu:{const _0x51816f=El[this['_visualSta'+'te']],_0x509609=this[_0x51816f];this['_applyTint'](_0x509609);break;}case og:{const _0xb523d7=bl[this['_visualSta'+'te']],_0x3bb761=Al[this['_visualSta'+'te']],_0x4cceed=this[_0xb523d7],_0x2ee3bf=this[_0x3bb761];this['_applySpri'+'te'](_0x4cceed,_0x2ee3bf);break;}}}['_forceReap'+'plyVisualS'+'tate'](){this['_updateVis'+'ualState'](!(-0x2059+0x7c9*0x3+0x8fe*0x1));}['_resetToDe'+'faultVisua'+'lState'](_0x445a69){var _0x303656;if((_0x303656=this['_imageEnti'+'ty'])!=null&&_0x303656['element'])switch(_0x445a69){case eu:this['_cancelTwe'+'en'](),this['_applyTint'+'Immediatel'+'y'](this['_defaultTi'+'nt']);break;case og:this['_applySpri'+'te'](this['_defaultSp'+'riteAsset'],this['_defaultSp'+'riteFrame']);break;}}['_determine'+'VisualStat'+'e'](){if(this['active']){if(this['_isPressed'])return ft['PRESSED'];if(this['_isHoverin'+'g'])return ft['HOVER'];}else return ft['INACTIVE'];return ft['DEFAULT'];}['_applySpri'+'te'](_0x31555b,_0x5bf3ba){var _0x5e54b8;const _0x5e4afd=(_0x5e54b8=this['_imageEnti'+'ty'])==null?void(0x2620+0x1*0x20af+0x46cf*-0x1):_0x5e54b8['element'];_0x5e4afd&&(_0x5bf3ba=_0x5bf3ba||0x1a*-0x51+0xd*-0x3e+0x5b0*0x2,this['_isApplyin'+'gSprite']=!(0x26eb+-0x3*0x3c5+-0x1b9c),_0x5e4afd['spriteAsse'+'t']!==_0x31555b&&(_0x5e4afd['spriteAsse'+'t']=_0x31555b),_0x5e4afd['spriteFram'+'e']!==_0x5bf3ba&&(_0x5e4afd['spriteFram'+'e']=_0x5bf3ba),this['_isApplyin'+'gSprite']=!(0x182f+-0x1*0x1b83+-0x1*-0x355));}['_applyTint'](_0x7ebcaf){this['_cancelTwe'+'en'](),this['fadeDurati'+'on']===-0xf8b+-0x1f31*0x1+0x7ca*0x6?this['_applyTint'+'Immediatel'+'y'](_0x7ebcaf):this['_applyTint'+'WithTween'](_0x7ebcaf);}['_applyTint'+'Immediatel'+'y'](_0x4d7717){var _0x5014a3;const _0xea0128=(_0x5014a3=this['_imageEnti'+'ty'])==null?void(0x14c5+-0x63*-0x49+0x10*-0x310):_0x5014a3['element'];if(!_0x4d7717||!_0xea0128||_0xea0128['type']===Lc)return;const _0x212153=lg(_0x4d7717);this['_isApplyin'+'gTint']=!(-0x26be*0x1+0xf44+0x259*0xa),_0x212153['equals'](_0xea0128['color'])||(_0xea0128['color']=_0x212153),_0xea0128['opacity']!==_0x4d7717['a']&&(_0xea0128['opacity']=_0x4d7717['a']),this['_isApplyin'+'gTint']=!(-0x24d0+-0x1*-0x349+0x2188);}['_applyTint'+'WithTween'](_0x279293){var _0xbf1e88;const _0x31cf3d=(_0xbf1e88=this['_imageEnti'+'ty'])==null?void(-0x22bf+0x1d10+0x5af):_0xbf1e88['element'];if(!_0x279293||!_0x31cf3d||_0x31cf3d['type']===Lc)return;const _0x1a918d=lg(_0x279293),_0xe06038=_0x31cf3d['color'],_0x9a1d4b=_0x31cf3d['opacity'];_0x1a918d['equals'](_0xe06038)&&_0x279293['a']===_0x9a1d4b||(this['_tweenInfo']={'startTime':de(),'from':new ie(_0xe06038['r'],_0xe06038['g'],_0xe06038['b'],_0x9a1d4b),'to':_0x279293['clone'](),'lerpColor':new ie()});}['_updateTin'+'tTween'](){const _0x5a06fc=de()-this['_tweenInfo']['startTime'];let _0x21b1bf=this['fadeDurati'+'on']===0x5*0x581+0xab8+0x2f1*-0xd?0xd*0x2ff+-0x1997+-0xd5b:_0x5a06fc/this['fadeDurati'+'on'];if(_0x21b1bf=Y['clamp'](_0x21b1bf,-0x79c+-0x19*0x52+0xf9e,0x1dfe+0x1cb2+-0xb5*0x53),Math['abs'](_0x21b1bf-(0x1f1e+-0x1*-0x6cd+-0x25ea))>0xe28+0x1*0x21f7+-0x301f*0x1+0.00001){const _0x3c8869=this['_tweenInfo']['lerpColor'];_0x3c8869['lerp'](this['_tweenInfo']['from'],this['_tweenInfo']['to'],_0x21b1bf),this['_applyTint'+'Immediatel'+'y'](new ie(_0x3c8869['r'],_0x3c8869['g'],_0x3c8869['b'],_0x3c8869['a']));}else this['_applyTint'+'Immediatel'+'y'](this['_tweenInfo']['to']),this['_cancelTwe'+'en']();}['_cancelTwe'+'en'](){delete this['_tweenInfo'];}['onUpdate'](){this['_tweenInfo']&&this['_updateTin'+'tTween']();}['onEnable'](){this['_isHoverin'+'g']=!(0x5ab+0x2cf+-0x879),this['_hoveringC'+'ounter']=-0x2300+0xb3f*0x1+0x17c1,this['_isPressed']=!(0x1f*0xa7+0x1*-0x6a7+-0xd91),this['_toggleHit'+'ElementLis'+'teners']('on'),this['_forceReap'+'plyVisualS'+'tate']();}['onDisable'](){this['_toggleHit'+'ElementLis'+'teners']('off'),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['onRemove'](){this['_imageEnti'+'tyUnsubscr'+'ibe'](),this['_toggleLif'+'ecycleList'+'eners']('off',this['system']),this['onDisable']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x1de0eb,_0x5a299a){_0x1de0eb['imageEntit'+'y']&&(this['imageEntit'+'y']=_0x5a299a[_0x1de0eb['imageEntit'+'y']['getGuid']()]);}}h(It,'EVENT_MOUS'+'EDOWN','mousedown'),h(It,'EVENT_MOUS'+'EUP','mouseup'),h(It,'EVENT_MOUS'+'EENTER','mouseenter'),h(It,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(It,'EVENT_CLIC'+'K','click'),h(It,'EVENT_TOUC'+'HSTART','touchstart'),h(It,'EVENT_TOUC'+'HEND','touchend'),h(It,'EVENT_TOUC'+'HCANCEL','touchcance'+'l'),h(It,'EVENT_TOUC'+'HLEAVE','touchleave'),h(It,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(It,'EVENT_SELE'+'CTEND','selectend'),h(It,'EVENT_SELE'+'CTENTER','selectente'+'r'),h(It,'EVENT_SELE'+'CTLEAVE','selectleav'+'e'),h(It,'EVENT_HOVE'+'RSTART','hoverstart'),h(It,'EVENT_HOVE'+'REND','hoverend'),h(It,'EVENT_PRES'+'SEDSTART','pressedsta'+'rt'),h(It,'EVENT_PRES'+'SEDEND','pressedend');function lg(_0x5b9d32){return new ie(_0x5b9d32['r'],_0x5b9d32['g'],_0x5b9d32['b']);}class lL{constructor(){this['enabled']=!(0x2159*-0x1+0x12e8+0xe71),this['active']=!(0x1403+-0x58*-0x13+-0x2f3*0x9),this['imageEntit'+'y']=null,this['hitPadding']=new re(),this['transition'+'Mode']=eu,this['hoverTint']=new ie(0x1*0x923+0x1*-0x18fc+0x1*0xfd9+0.75,-0x1094+0x157d+0x1a3*-0x3+0.75,0x1083+-0x1cd*-0xb+0x1229*-0x2+0.75),this['pressedTin'+'t']=new ie(0x8f*0x5+0x1*0xa6b+-0xd36+0.5,-0x24*0xfc+0x653+0x1d1d+0.5,-0x1c79+-0x5d5+0x224e+0.5),this['inactiveTi'+'nt']=new ie(-0x7d1+0x85b+-0x8a*0x1+0.25,-0x4*0x5b1+-0x1c6a+0x332e+0.25,-0x3*0x3f3+-0xfcc+0x1ba5+0.25),this['fadeDurati'+'on']=0x2*-0x6ab+0x627+0x72f,this['hoverSprit'+'eAsset']=null,this['hoverSprit'+'eFrame']=0x1*-0xbf+0x2053+-0x1f94,this['pressedSpr'+'iteAsset']=null,this['pressedSpr'+'iteFrame']=-0x226a+-0x2c5+-0x13*-0x1f5,this['inactiveSp'+'riteAsset']=null,this['inactiveSp'+'riteFrame']=-0xdbb+-0x466+0x1221;}}const cg=['enabled','active',{'name':'hitPadding','type':'vec4'},'transition'+'Mode',{'name':'hoverTint','type':'rgba'},{'name':'pressedTin'+'t','type':'rgba'},{'name':'inactiveTi'+'nt','type':'rgba'},'fadeDurati'+'on','hoverSprit'+'eAsset','hoverSprit'+'eFrame','pressedSpr'+'iteAsset','pressedSpr'+'iteFrame','inactiveSp'+'riteAsset','inactiveSp'+'riteFrame'];class cL extends ct{constructor(_0x48559a){super(_0x48559a),this['id']='button',this['ComponentT'+'ype']=It,this['DataType']=lL,this['schema']=cg,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x206a15,_0x6f44f3,_0x7decb7){_0x206a15['imageEntit'+'y']=_0x6f44f3['imageEntit'+'y'],super['initialize'+'ComponentD'+'ata'](_0x206a15,_0x6f44f3,cg);}['onUpdate'](_0x5a49f0){const _0x4e1088=this['store'];for(const _0x3ec539 in _0x4e1088){const _0x15fe1d=_0x4e1088[_0x3ec539]['entity'],_0x5e0476=_0x15fe1d['button'];_0x5e0476['enabled']&&_0x15fe1d['enabled']&&_0x5e0476['onUpdate']();}}['_onRemoveC'+'omponent'](_0x30984c,_0x50215d){_0x50215d['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}const hg=new D(),dg=new le();class Ka extends we{constructor(_0x374c0a,_0x170996){super(_0x374c0a,_0x170996),h(this,'_compoundP'+'arent',null),h(this,'_hasOffset',!(-0x3c7+-0x2a5*-0x6+-0xe*0xdd)),(this['entity']['on']('insert',this['_onInsert'],this),this['on']('set_type',this['onSetType'],this),this['on']('set_convex'+'Hull',this['onSetModel'],this),this['on']('set_halfEx'+'tents',this['onSetHalfE'+'xtents'],this),this['on']('set_linear'+'Offset',this['onSetOffse'+'t'],this),this['on']('set_angula'+'rOffset',this['onSetOffse'+'t'],this),this['on']('set_radius',this['onSetRadiu'+'s'],this),this['on']('set_height',this['onSetHeigh'+'t'],this),this['on']('set_axis',this['onSetAxis'],this),this['on']('set_asset',this['onSetAsset'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_model',this['onSetModel'],this),this['on']('set_render',this['onSetRende'+'r'],this));}get['data'](){const _0x4babb0=this['system']['store'][this['entity']['getGuid']()];return _0x4babb0?_0x4babb0['data']:null;}set['enabled'](_0x320b24){this['_setValue']('enabled',_0x320b24);}get['enabled'](){return this['data']['enabled'];}set['type'](_0x27cf6d){this['_setValue']('type',_0x27cf6d);}get['type'](){return this['data']['type'];}set['halfExtent'+'s'](_0x5d9fcc){this['_setValue']('halfExtent'+'s',_0x5d9fcc);}get['halfExtent'+'s'](){return this['data']['halfExtent'+'s'];}set['linearOffs'+'et'](_0x25de42){this['_setValue']('linearOffs'+'et',_0x25de42);}get['linearOffs'+'et'](){return this['data']['linearOffs'+'et'];}set['angularOff'+'set'](_0x5b5145){this['_setValue']('angularOff'+'set',_0x5b5145);}get['angularOff'+'set'](){return this['data']['angularOff'+'set'];}set['radius'](_0x2d60de){this['_setValue']('radius',_0x2d60de);}get['radius'](){return this['data']['radius'];}set['axis'](_0x97a0ae){this['_setValue']('axis',_0x97a0ae);}get['axis'](){return this['data']['axis'];}set['height'](_0x290086){this['_setValue']('height',_0x290086);}get['height'](){return this['data']['height'];}set['asset'](_0x2ff7ec){this['_setValue']('asset',_0x2ff7ec);}get['asset'](){return this['data']['asset'];}set['renderAsse'+'t'](_0x1d528b){this['_setValue']('renderAsse'+'t',_0x1d528b);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['convexHull'](_0x2092a5){this['_setValue']('convexHull',_0x2092a5);}get['convexHull'](){return this['data']['convexHull'];}set['shape'](_0x86ff9d){this['_setValue']('shape',_0x86ff9d);}get['shape'](){return this['data']['shape'];}set['model'](_0xac0936){this['_setValue']('model',_0xac0936);}get['model'](){return this['data']['model'];}set['render'](_0x57356f){this['_setValue']('render',_0x57356f);}get['render'](){return this['data']['render'];}set['checkVerte'+'xDuplicate'+'s'](_0x1e76f6){this['_setValue']('checkVerte'+'xDuplicate'+'s',_0x1e76f6);}get['checkVerte'+'xDuplicate'+'s'](){return this['data']['checkVerte'+'xDuplicate'+'s'];}['_setValue'](_0x5dce4e,_0x4426e6){const _0x1a7a96=this['data'],_0x280233=_0x1a7a96[_0x5dce4e];_0x1a7a96[_0x5dce4e]=_0x4426e6,this['fire']('set',_0x5dce4e,_0x280233,_0x4426e6);}['onSetType'](_0x3cb20b,_0x35150a,_0x58247e){_0x35150a!==_0x58247e&&this['system']['changeType'](this,_0x35150a,_0x58247e);}['onSetHalfE'+'xtents'](_0x1ee655,_0x4783a4,_0x580cf7){const _0x389dcf=this['data']['type'];this['data']['initialize'+'d']&&_0x389dcf==='box'&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetOffse'+'t'](_0x216beb,_0x5630e0,_0x2dda4a){this['_hasOffset']=!this['data']['linearOffs'+'et']['equals'](D['ZERO'])||!this['data']['angularOff'+'set']['equals'](le['IDENTITY']),this['data']['initialize'+'d']&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetRadiu'+'s'](_0x97e781,_0x161511,_0x464372){const _0x429740=this['data']['type'];this['data']['initialize'+'d']&&(_0x429740==='sphere'||_0x429740==='capsule'||_0x429740==='cylinder'||_0x429740==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetHeigh'+'t'](_0x471f91,_0x5d240b,_0x269fbf){const _0x231565=this['data']['type'];this['data']['initialize'+'d']&&(_0x231565==='capsule'||_0x231565==='cylinder'||_0x231565==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAxis'](_0x5cd906,_0x10f6b3,_0x2b8264){const _0x182d59=this['data']['type'];this['data']['initialize'+'d']&&(_0x182d59==='capsule'||_0x182d59==='cylinder'||_0x182d59==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAsset'](_0x22c622,_0x170118,_0x483dd0){const _0x4b7b5e=this['system']['app']['assets'];if(_0x170118){const _0xe6f917=_0x4b7b5e['get'](_0x170118);_0xe6f917&&_0xe6f917['off']('remove',this['onAssetRem'+'oved'],this);}if(_0x483dd0){_0x483dd0 instanceof pe&&(this['data']['asset']=_0x483dd0['id']);const _0x3890b1=_0x4b7b5e['get'](this['data']['asset']);_0x3890b1&&(_0x3890b1['off']('remove',this['onAssetRem'+'oved'],this),_0x3890b1['on']('remove',this['onAssetRem'+'oved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x483dd0||(this['data']['model']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetRende'+'rAsset'](_0x297a89,_0x44a0aa,_0x5ca8de){const _0x369343=this['system']['app']['assets'];if(_0x44a0aa){const _0x2fbfdc=_0x369343['get'](_0x44a0aa);_0x2fbfdc&&_0x2fbfdc['off']('remove',this['onRenderAs'+'setRemoved'],this);}if(_0x5ca8de){_0x5ca8de instanceof pe&&(this['data']['renderAsse'+'t']=_0x5ca8de['id']);const _0x4f8186=_0x369343['get'](this['data']['renderAsse'+'t']);_0x4f8186&&(_0x4f8186['off']('remove',this['onRenderAs'+'setRemoved'],this),_0x4f8186['on']('remove',this['onRenderAs'+'setRemoved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x5ca8de||(this['data']['render']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetModel'](_0x2b126d,_0x256446,_0x792e71){this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&this['system']['implementa'+'tions']['mesh']['doRecreate'+'PhysicalSh'+'ape'](this);}['onSetRende'+'r'](_0x4a9c71,_0x172b16,_0x27244e){this['onSetModel'](_0x4a9c71,_0x172b16,_0x27244e);}['onAssetRem'+'oved'](_0xbd8aed){_0xbd8aed['off']('remove',this['onAssetRem'+'oved'],this),this['data']['asset']===_0xbd8aed['id']&&(this['asset']=null);}['onRenderAs'+'setRemoved'](_0x3a32ca){_0x3a32ca['off']('remove',this['onRenderAs'+'setRemoved'],this),this['data']['renderAsse'+'t']===_0x3a32ca['id']&&(this['renderAsse'+'t']=null);}['getCompoun'+'dChildShap'+'eIndex'](_0x45fec4){const _0x268b81=this['data']['shape'],_0x531974=_0x268b81['getNumChil'+'dShapes']();for(let _0x54f99b=0x176b+-0x139*-0x1+0x13*-0x14c;_0x54f99b<_0x531974;_0x54f99b++){const _0x38590f=_0x268b81['getChildSh'+'ape'](_0x54f99b);if(Ammo['getPointer'](_0x38590f)===Ammo['getPointer'](_0x45fec4))return _0x54f99b;}return null;}['_onInsert'](_0xdf5838){if(!(typeof Ammo>'u')){if(this['_compoundP'+'arent'])this['system']['recreatePh'+'ysicalShap'+'es'](this);else{if(!this['entity']['rigidbody']){let _0x7c3e2f=this['entity']['parent'];for(;_0x7c3e2f;){if(_0x7c3e2f['collision']&&_0x7c3e2f['collision']['type']==='compound'){_0x7c3e2f['collision']['shape']['getNumChil'+'dShapes']()===0x5f7*-0x5+-0x179c+-0x1*-0x356f?this['system']['recreatePh'+'ysicalShap'+'es'](_0x7c3e2f['collision']):this['system']['recreatePh'+'ysicalShap'+'es'](this);break;}_0x7c3e2f=_0x7c3e2f['parent'];}}}}}['_updateCom'+'pound'](){const _0x93b18f=this['entity'];if(_0x93b18f['_dirtyWorl'+'d']){let _0x4492ed=_0x93b18f['_dirtyLoca'+'l'],_0x1fce6f=_0x93b18f;for(;_0x1fce6f&&!_0x4492ed&&!(_0x1fce6f['collision']&&_0x1fce6f['collision']===this['_compoundP'+'arent']);)_0x1fce6f['_dirtyLoca'+'l']&&(_0x4492ed=!(0x289+0x3*0x655+0xac4*-0x2)),_0x1fce6f=_0x1fce6f['parent'];if(_0x4492ed){_0x93b18f['forEach'](this['system']['implementa'+'tions']['compound']['_updateEac'+'hDescendan'+'tTransform'],_0x93b18f);const _0x48d22a=this['_compoundP'+'arent']['entity']['rigidbody'];_0x48d22a&&_0x48d22a['activate']();}}}['getShapePo'+'sition'](){const _0x4da38b=this['entity']['getPositio'+'n']();if(this['_hasOffset']){const _0x5c25d2=this['entity']['getRotatio'+'n'](),_0x21c057=this['data']['linearOffs'+'et'];return dg['copy'](_0x5c25d2)['transformV'+'ector'](_0x21c057,hg),hg['add'](_0x4da38b);}return _0x4da38b;}['getShapeRo'+'tation'](){const _0x4d2b59=this['entity']['getRotatio'+'n']();return this['_hasOffset']?dg['copy'](_0x4d2b59)['mul'](this['data']['angularOff'+'set']):_0x4d2b59;}['onEnable'](){if(this['data']['type']==='mesh'&&(this['data']['asset']||this['data']['renderAsse'+'t'])&&this['data']['initialize'+'d']){const _0x5b7c48=this['system']['app']['assets']['get'](this['data']['asset']||this['data']['renderAsse'+'t']);if(_0x5b7c48&&(!_0x5b7c48['resource']||!this['data']['shape'])){this['system']['recreatePh'+'ysicalShap'+'es'](this);return;}}if(this['entity']['rigidbody'])this['entity']['rigidbody']['enabled']&&this['entity']['rigidbody']['enableSimu'+'lation']();else{if(this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']){if(this['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===0x2322+-0x1687+-0xc9b)this['system']['recreatePh'+'ysicalShap'+'es'](this['_compoundP'+'arent']);else{const _0x290997=this['system']['_getNodeTr'+'ansform'](this['entity'],this['_compoundP'+'arent']['entity']);this['_compoundP'+'arent']['shape']['addChildSh'+'ape'](_0x290997,this['data']['shape']),Ammo['destroy'](_0x290997),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']();}}else this['entity']['trigger']&&this['entity']['trigger']['enable']();}}['onDisable'](){this['entity']['rigidbody']?this['entity']['rigidbody']['disableSim'+'ulation']():this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']?this['_compoundP'+'arent']['entity']['_destroyin'+'g']||(this['system']['_removeCom'+'poundChild'](this['_compoundP'+'arent'],this['data']['shape']),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']()):this['entity']['trigger']&&this['entity']['trigger']['disable']();}['onBeforeRe'+'move'](){this['asset']&&(this['asset']=null),this['renderAsse'+'t']&&(this['renderAsse'+'t']=null),this['entity']['off']('insert',this['_onInsert'],this),this['off']();}}h(Ka,'EVENT_CONT'+'ACT','contact'),h(Ka,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(Ka,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(Ka,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(Ka,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve');class hL{constructor(){this['enabled']=!(-0x1*0x1bef+0xc69+-0x7c3*-0x2),this['type']='box',this['halfExtent'+'s']=new D(0x1cb3+-0x1*0x561+0x4aa*-0x5+0.5,-0x7*0x283+0x7c7*-0x4+0x30b1+0.5,0x2*0x11f2+-0x244+0x4*-0x868+0.5),this['linearOffs'+'et']=new D(),this['angularOff'+'set']=new le(),this['radius']=0xfb0+-0x70f*0x2+0x6*-0x43+0.5,this['axis']=0x595*-0x1+-0x21dc+0x2772,this['height']=-0xd94+-0x2688+0x341e,this['convexHull']=!(-0xe*0xc7+-0xca5+-0xbc4*-0x2),this['asset']=null,this['renderAsse'+'t']=null,this['checkVerte'+'xDuplicate'+'s']=!(0x1*0x1901+-0x229f+0x99e),this['shape']=null,this['model']=null,this['render']=null,this['initialize'+'d']=!(0x20a*0xe+0x6a+0x423*-0x7);}}const fo='static',Ns='dynamic',Ua='kinematic',dL=0x3*-0x997+0x119*0x1f+-0x540,go=-0x15f4+-0x1606+0x2bfe,su=-0x10d5+0x511+0xbc5,fg=-0xd5b+0x9*-0x28d+0x4*0x915,uv=-0x1404+-0x436+-0x1*-0x183f,fL=-0x22a5+-0x1*0xdd5+0x307b,ug=-0x1088+-0xeb7*0x1+0x1f41,uL=0x3f8+-0x17*-0x122+-0x1e02,pg=0x2217+0xe2c+-0x3033,mg=-0x19afc+-0x1*0x37f1+-0x2*-0x16976,iu=0x15bdc+0x43bb*-0x1+-0x1824*0x1;let ks,Nr,Ba;class pv{constructor(_0x44facb,_0x390fe0,_0x4c0865){this['entity']=_0x390fe0['entity'],this['component']=_0x390fe0,this['app']=_0x44facb,typeof Ammo<'u'&&!ks&&(ks=new Ammo['btVector3'](),Nr=new Ammo['btQuaterni'+'on'](),Ba=new Ammo['btTransfor'+'m']()),this['initialize'](_0x4c0865);}['initialize'](_0x39e419){const _0x4a1f15=this['entity'],_0x8cb22b=_0x39e419['shape'];if(_0x8cb22b&&typeof Ammo<'u'){_0x4a1f15['trigger']&&_0x4a1f15['trigger']['destroy']();const _0x1cf37c=-0x9d*0x1d+-0x1*0x79d+0x1967,_0x39c36c=this['component'];if(_0x39c36c){const _0x2d2c8f=_0x39c36c['getShapePo'+'sition'](),_0xd60788=_0x39c36c['getShapeRo'+'tation']();ks['setValue'](_0x2d2c8f['x'],_0x2d2c8f['y'],_0x2d2c8f['z']),Nr['setValue'](_0xd60788['x'],_0xd60788['y'],_0xd60788['z'],_0xd60788['w']);}else{const _0x144227=_0x4a1f15['getPositio'+'n'](),_0x54aff9=_0x4a1f15['getRotatio'+'n']();ks['setValue'](_0x144227['x'],_0x144227['y'],_0x144227['z']),Nr['setValue'](_0x54aff9['x'],_0x54aff9['y'],_0x54aff9['z'],_0x54aff9['w']);}Ba['setOrigin'](ks),Ba['setRotatio'+'n'](Nr);const _0x53452d=this['app']['systems']['rigidbody']['createBody'](_0x1cf37c,_0x8cb22b,Ba);_0x53452d['setRestitu'+'tion'](-0x73*-0x47+-0x2649*-0x1+0x462e*-0x1),_0x53452d['setFrictio'+'n'](0x2d*0x55+0x16fa+-0x23b*0x11),_0x53452d['setDamping'](0x11b*-0x1a+0x1384+0x93a,0xf31*0x2+-0x3*-0xfe+-0x215c),ks['setValue'](0x61f*-0x5+-0x174e+0x1*0x35e9,-0x1*-0x1db4+-0xa10+-0x2*0x9d2,0x2396+0xd11+-0x30a7),_0x53452d['setLinearF'+'actor'](ks),_0x53452d['setAngular'+'Factor'](ks),_0x53452d['setCollisi'+'onFlags'](_0x53452d['getCollisi'+'onFlags']()|go),_0x53452d['entity']=_0x4a1f15,this['body']=_0x53452d,this['component']['enabled']&&_0x4a1f15['enabled']&&this['enable']();}}['destroy'](){this['body']&&(this['disable'](),this['app']['systems']['rigidbody']['destroyBod'+'y'](this['body']),this['body']=null);}['_getEntity'+'Transform'](_0x31a2fa){const _0xc383d7=this['component'];if(_0xc383d7){const _0x5e7378=_0xc383d7['getShapePo'+'sition'](),_0x319352=_0xc383d7['getShapeRo'+'tation']();ks['setValue'](_0x5e7378['x'],_0x5e7378['y'],_0x5e7378['z']),Nr['setValue'](_0x319352['x'],_0x319352['y'],_0x319352['z'],_0x319352['w']);}else{const _0xfd30ea=this['entity']['getPositio'+'n'](),_0x39a290=this['entity']['getRotatio'+'n']();ks['setValue'](_0xfd30ea['x'],_0xfd30ea['y'],_0xfd30ea['z']),Nr['setValue'](_0x39a290['x'],_0x39a290['y'],_0x39a290['z'],_0x39a290['w']);}_0x31a2fa['setOrigin'](ks),_0x31a2fa['setRotatio'+'n'](Nr);}['updateTran'+'sform'](){this['_getEntity'+'Transform'](Ba);const _0x24dd09=this['body'];_0x24dd09['setWorldTr'+'ansform'](Ba),_0x24dd09['activate']();}['enable'](){const _0x38b79e=this['body'];if(!_0x38b79e)return;const _0x20e328=this['app']['systems']['rigidbody'];_0x20e328['_triggers']['indexOf'](this)<0x1c2f+-0x1da0+-0x29*-0x9&&(_0x20e328['addBody'](_0x38b79e,pg,iu^pg),_0x20e328['_triggers']['push'](this)),_0x38b79e['forceActiv'+'ationState'](su),this['updateTran'+'sform']();}['disable'](){const _0x48f258=this['body'];if(!_0x48f258)return;const _0xc1475a=this['app']['systems']['rigidbody'],_0x38f4ae=_0xc1475a['_triggers']['indexOf'](this);_0x38f4ae>-(-0x1*-0x1aab+-0x2643+0xb99*0x1)&&(_0xc1475a['removeBody'](_0x48f258),_0xc1475a['_triggers']['splice'](_0x38f4ae,0x66a+-0x267d+-0x805*-0x4)),_0x48f258['forceActiv'+'ationState'](uv);}}const cc=new te(),pL=new D(),mL=new D(),kr=new le(),_g=new Ie(),_L=['enabled','type','halfExtent'+'s','linearOffs'+'et','angularOff'+'set','radius','axis','height','convexHull','asset','renderAsse'+'t','shape','model','render','checkVerte'+'xDuplicate'+'s'];class Ta{constructor(_0x582504){this['system']=_0x582504;}['beforeInit'+'ialize'](_0x558ac7,_0xf50de8){_0xf50de8['shape']=null,_0xf50de8['model']=new tr(),_0xf50de8['model']['graph']=new Ie();}['afterIniti'+'alize'](_0x525814,_0x1cf9ab){this['recreatePh'+'ysicalShap'+'es'](_0x525814),_0x525814['data']['initialize'+'d']=!(-0x1*0xf76+-0xe8*0x1+-0x346*-0x5);}['reset'](_0x4ce913,_0x1ac34d){this['beforeInit'+'ialize'](_0x4ce913,_0x1ac34d),this['afterIniti'+'alize'](_0x4ce913,_0x1ac34d);}['recreatePh'+'ysicalShap'+'es'](_0x4b9715){const _0xb9ebf4=_0x4b9715['entity'],_0x5c7535=_0x4b9715['data'];if(typeof Ammo<'u'){_0xb9ebf4['trigger']&&(_0xb9ebf4['trigger']['destroy'](),delete _0xb9ebf4['trigger']),_0x5c7535['shape']&&(_0x4b9715['_compoundP'+'arent']&&(_0x4b9715!==_0x4b9715['_compoundP'+'arent']&&this['system']['_removeCom'+'poundChild'](_0x4b9715['_compoundP'+'arent'],_0x5c7535['shape']),_0x4b9715['_compoundP'+'arent']['entity']['rigidbody']&&_0x4b9715['_compoundP'+'arent']['entity']['rigidbody']['activate']()),this['destroySha'+'pe'](_0x5c7535)),_0x5c7535['shape']=this['createPhys'+'icalShape'](_0x4b9715['entity'],_0x5c7535);const _0x4013a3=!_0x4b9715['_compoundP'+'arent'];if(_0x5c7535['type']==='compound'&&(!_0x4b9715['_compoundP'+'arent']||_0x4b9715===_0x4b9715['_compoundP'+'arent']))_0x4b9715['_compoundP'+'arent']=_0x4b9715,_0xb9ebf4['forEach'](this['_addEachDe'+'scendant'],_0x4b9715);else{if(_0x5c7535['type']!=='compound'&&!_0x4b9715['rigidbody']){_0x4b9715['_compoundP'+'arent']=null;let _0x212fc7=_0xb9ebf4['parent'];for(;_0x212fc7;){if(_0x212fc7['collision']&&_0x212fc7['collision']['type']==='compound'){_0x4b9715['_compoundP'+'arent']=_0x212fc7['collision'];break;}_0x212fc7=_0x212fc7['parent'];}}}_0x4b9715['_compoundP'+'arent']&&_0x4b9715!==_0x4b9715['_compoundP'+'arent']&&(_0x4013a3&&_0x4b9715['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===-0x2*0xd0a+-0xbf5+0x2609?this['system']['recreatePh'+'ysicalShap'+'es'](_0x4b9715['_compoundP'+'arent']):(this['system']['updateComp'+'oundChildT'+'ransform'](_0xb9ebf4,!(-0xad6+-0x1f84+-0x1a*-0x1a1)),_0x4b9715['_compoundP'+'arent']['entity']['rigidbody']&&_0x4b9715['_compoundP'+'arent']['entity']['rigidbody']['activate']())),_0xb9ebf4['rigidbody']?(_0xb9ebf4['rigidbody']['disableSim'+'ulation'](),_0xb9ebf4['rigidbody']['createBody'](),_0xb9ebf4['enabled']&&_0xb9ebf4['rigidbody']['enabled']&&_0xb9ebf4['rigidbody']['enableSimu'+'lation']()):_0x4b9715['_compoundP'+'arent']||(_0xb9ebf4['trigger']?_0xb9ebf4['trigger']['initialize'](_0x5c7535):_0xb9ebf4['trigger']=new pv(this['system']['app'],_0x4b9715,_0x5c7535));}}['createPhys'+'icalShape'](_0x3361a9,_0x5d5319){}['updateTran'+'sform'](_0x44bf7a,_0x8a6752,_0x34ce2a,_0x5c8c2b){_0x44bf7a['entity']['trigger']&&_0x44bf7a['entity']['trigger']['updateTran'+'sform']();}['destroySha'+'pe'](_0x1b185d){_0x1b185d['shape']&&(Ammo['destroy'](_0x1b185d['shape']),_0x1b185d['shape']=null);}['beforeRemo'+'ve'](_0x2a8278,_0x58c94e){_0x58c94e['data']['shape']&&(_0x58c94e['_compoundP'+'arent']&&!_0x58c94e['_compoundP'+'arent']['entity']['_destroyin'+'g']&&(this['system']['_removeCom'+'poundChild'](_0x58c94e['_compoundP'+'arent'],_0x58c94e['data']['shape']),_0x58c94e['_compoundP'+'arent']['entity']['rigidbody']&&_0x58c94e['_compoundP'+'arent']['entity']['rigidbody']['activate']()),_0x58c94e['_compoundP'+'arent']=null,this['destroySha'+'pe'](_0x58c94e['data']));}['remove'](_0x3f9374,_0x669b6a){_0x3f9374['rigidbody']&&_0x3f9374['rigidbody']['body']&&_0x3f9374['rigidbody']['disableSim'+'ulation'](),_0x3f9374['trigger']&&(_0x3f9374['trigger']['destroy'](),delete _0x3f9374['trigger']);}['clone'](_0x396fcc,_0x402989){const _0x29d6b1=this['system']['store'][_0x396fcc['getGuid']()],_0x402b60={'enabled':_0x29d6b1['data']['enabled'],'type':_0x29d6b1['data']['type'],'halfExtents':[_0x29d6b1['data']['halfExtent'+'s']['x'],_0x29d6b1['data']['halfExtent'+'s']['y'],_0x29d6b1['data']['halfExtent'+'s']['z']],'linearOffset':[_0x29d6b1['data']['linearOffs'+'et']['x'],_0x29d6b1['data']['linearOffs'+'et']['y'],_0x29d6b1['data']['linearOffs'+'et']['z']],'angularOffset':[_0x29d6b1['data']['angularOff'+'set']['x'],_0x29d6b1['data']['angularOff'+'set']['y'],_0x29d6b1['data']['angularOff'+'set']['z'],_0x29d6b1['data']['angularOff'+'set']['w']],'radius':_0x29d6b1['data']['radius'],'axis':_0x29d6b1['data']['axis'],'height':_0x29d6b1['data']['height'],'convexHull':_0x29d6b1['data']['convexHull'],'asset':_0x29d6b1['data']['asset'],'renderAsset':_0x29d6b1['data']['renderAsse'+'t'],'model':_0x29d6b1['data']['model'],'render':_0x29d6b1['data']['render'],'checkVertexDuplicates':_0x29d6b1['data']['checkVerte'+'xDuplicate'+'s']};return this['system']['addCompone'+'nt'](_0x402989,_0x402b60);}}class gL extends Ta{['createPhys'+'icalShape'](_0xaec46,_0x4abc36){if(typeof Ammo<'u'){const _0x4d7003=_0x4abc36['halfExtent'+'s'],_0x1fd8fa=new Ammo['btVector3'](_0x4d7003?_0x4d7003['x']:-0x6*0x449+-0x1*-0x2174+-0x7be+0.5,_0x4d7003?_0x4d7003['y']:0x1d*0x92+0x254b*-0x1+0x14c1+0.5,_0x4d7003?_0x4d7003['z']:-0x2163+0x4*-0x463+0x11*0x2ff+0.5),_0x1211a6=new Ammo['btBoxShape'](_0x1fd8fa);return Ammo['destroy'](_0x1fd8fa),_0x1211a6;}}}class SL extends Ta{['createPhys'+'icalShape'](_0x2c6383,_0x3f348a){if(typeof Ammo<'u')return new Ammo['btSphereSh'+'ape'](_0x3f348a['radius']);}}class yL extends Ta{['createPhys'+'icalShape'](_0x58b02b,_0x1ff65f){const _0x3eea8d=_0x1ff65f['axis']??-0x3*0x795+0x39*-0x64+0x2*0x1682,_0x5d896c=_0x1ff65f['radius']??-0x1c9f*0x1+-0xdc9+0x2a68+0.5,_0x512de5=Math['max']((_0x1ff65f['height']??0x155a+-0x26ab+-0x377*-0x5)-(-0x9ec+0x1*-0x6af+-0x1*-0x109d)*_0x5d896c,0x1*-0x16f7+0x3dd+-0x5*-0x3d2);let _0x4582e5=null;if(typeof Ammo<'u')switch(_0x3eea8d){case-0xd30+0x255e+0x1*-0x182e:_0x4582e5=new Ammo['btCapsuleS'+'hapeX'](_0x5d896c,_0x512de5);break;case 0xc76+0x1a6*0x9+-0x1b4b:_0x4582e5=new Ammo['btCapsuleS'+'hape'](_0x5d896c,_0x512de5);break;case 0x83*-0x16+0x3*-0x46e+0x188e:_0x4582e5=new Ammo['btCapsuleS'+'hapeZ'](_0x5d896c,_0x512de5);break;}return _0x4582e5;}}class vL extends Ta{['createPhys'+'icalShape'](_0x1235e3,_0x53d4fd){const _0x3fa457=_0x53d4fd['axis']??-0x35e*0x7+-0x5*-0x1c6+0xeb5,_0x5356db=_0x53d4fd['radius']??0x1*-0x252+0x100+0x152+0.5,_0x4ba70a=_0x53d4fd['height']??-0x2001+-0x9ab*-0x1+0x1657;let _0x5a2d40=null,_0x2ff800=null;if(typeof Ammo<'u')switch(_0x3fa457){case-0x1*0x183b+0x108c*0x1+-0x119*-0x7:_0x5a2d40=new Ammo['btVector3'](_0x4ba70a*(0xb00+0xc46+0xba3*-0x2+0.5),_0x5356db,_0x5356db),_0x2ff800=new Ammo['btCylinder'+'ShapeX'](_0x5a2d40);break;case 0x124+-0x8f3+0x7d0:_0x5a2d40=new Ammo['btVector3'](_0x5356db,_0x4ba70a*(0x1388+0x8ea+-0x1c72+0.5),_0x5356db),_0x2ff800=new Ammo['btCylinder'+'Shape'](_0x5a2d40);break;case 0x34*0x22+-0xcee+0x2*0x304:_0x5a2d40=new Ammo['btVector3'](_0x5356db,_0x5356db,_0x4ba70a*(-0x17fd*0x1+-0x2*-0x819+0x7cb+0.5)),_0x2ff800=new Ammo['btCylinder'+'ShapeZ'](_0x5a2d40);break;}return _0x5a2d40&&Ammo['destroy'](_0x5a2d40),_0x2ff800;}}class xL extends Ta{['createPhys'+'icalShape'](_0x42e6f0,_0x49aa86){const _0x23496a=_0x49aa86['axis']??-0x8c*-0x3e+-0x155e+-0xc89,_0x13c31f=_0x49aa86['radius']??-0x1841+-0x2*-0x6c2+0x1*0xabd+0.5,_0x416811=_0x49aa86['height']??-0x39b+-0x252e+0x17*0x1c6;let _0x29aa41=null;if(typeof Ammo<'u')switch(_0x23496a){case 0x1821+0x4*0x65d+-0x3195:_0x29aa41=new Ammo['btConeShap'+'eX'](_0x13c31f,_0x416811);break;case-0x3*-0x1eb+-0x2118*0x1+0x1b58:_0x29aa41=new Ammo['btConeShap'+'e'](_0x13c31f,_0x416811);break;case 0xa63+0x113+-0xb74:_0x29aa41=new Ammo['btConeShap'+'eZ'](_0x13c31f,_0x416811);break;}return _0x29aa41;}}class TL extends Ta{['beforeInit'+'ialize'](_0x152ea6,_0xd44ce){}['createAmmo'+'Hull'](_0x1b95f0,_0x348a20,_0x167241,_0x30c1cf){const _0x47906b=new Ammo['btConvexHu'+'llShape'](),_0x4c3b02=new Ammo['btVector3'](),_0x2094d0=[];_0x1b95f0['getPositio'+'ns'](_0x2094d0);for(let _0x469678=0xac0+-0xf76*0x1+0x4b6;_0x469678<_0x2094d0['length'];_0x469678+=0xf5d+0x2*-0x1163+0x136c)_0x4c3b02['setValue'](_0x2094d0[_0x469678]*_0x30c1cf['x'],_0x2094d0[_0x469678+(0x1*0x32d+0x1c0e+-0x1f3a)]*_0x30c1cf['y'],_0x2094d0[_0x469678+(0x1*-0x16bd+0x205e+-0x99f)]*_0x30c1cf['z']),_0x47906b['addPoint'](_0x4c3b02,!(-0x17c1+-0x2403+0xd*0x499));Ammo['destroy'](_0x4c3b02),_0x47906b['recalcLoca'+'lAabb'](),_0x47906b['setMargin'](0x1*-0x14e5+0x1b66+0xf*-0x6f+0.01);const _0x674545=this['system']['_getNodeTr'+'ansform'](_0x348a20);_0x167241['addChildSh'+'ape'](_0x674545,_0x47906b),Ammo['destroy'](_0x674545);}['createAmmo'+'Mesh'](_0x138da3,_0x487bbe,_0x5559b4,_0xba5025,_0x17c58a=!(0x178c+-0x6c2+-0x10ca)){const _0x49d557=this['system'];let _0x19bab1;if(_0x49d557['_triMeshCa'+'che'][_0x138da3['id']])_0x19bab1=_0x49d557['_triMeshCa'+'che'][_0x138da3['id']];else{const _0x4fe40b=_0x138da3['vertexBuff'+'er'],_0xfc389d=_0x4fe40b['getFormat']();let _0x641b85,_0x1f0c24;for(let _0x1c5761=-0x1*0x96d+0x58*0x12+-0x1*-0x33d;_0x1c5761<_0xfc389d['elements']['length'];_0x1c5761++){const _0x260ac8=_0xfc389d['elements'][_0x1c5761];if(_0x260ac8['name']===Pe){_0x1f0c24=new Float32Array(_0x4fe40b['lock'](),_0x260ac8['offset']),_0x641b85=_0x260ac8['stride']/(0x1259+-0x1*0x1583+-0x1*-0x32e);break;}}const _0x5238ec=[];_0x138da3['getIndices'](_0x5238ec);const _0x2ba7f3=_0x138da3['primitive'][0x4*-0x489+-0x1a1a+0x2c3e]['count']/(-0x209*0xb+-0x24ad*0x1+0x3b13),_0x4a7bc7=new Ammo['btVector3']();let _0x4bf45b,_0x31f6eb,_0x42458d;const _0x3b4f84=_0x138da3['primitive'][-0x2e+-0x1db4*0x1+0x1de2]['base'];_0x19bab1=new Ammo['btTriangle'+'Mesh'](),_0x49d557['_triMeshCa'+'che'][_0x138da3['id']]=_0x19bab1;const _0x3787b3=new Map();w['assert'](typeof _0x19bab1['getIndexed'+'MeshArray']=='function','Ammo.js\x20ve'+'rsion\x20is\x20t'+'oo\x20old,\x20pl'+'ease\x20updat'+'e\x20to\x20a\x20new'+'er\x20Ammo.');const _0x603ac6=_0x19bab1['getIndexed'+'MeshArray']();_0x603ac6['at'](-0x1*-0x14bd+-0x152*-0x13+0x2dd3*-0x1)['m_numTrian'+'gles']=_0x2ba7f3;const _0x5e11a6=_0xba5025?_0xba5025['x']:-0x24*-0x71+0x181a+-0x1d*0x161,_0x7319fe=_0xba5025?_0xba5025['y']:-0x506*0x4+-0x2bf*0x2+0x1997,_0x33fc6f=_0xba5025?_0xba5025['z']:0x1*0xbe+0x3*-0x1fb+0x534,_0x6816b2=_0x3f58e6=>{const _0x4b7968=_0x1f0c24[_0x3f58e6*_0x641b85]*_0x5e11a6,_0x1a42da=_0x1f0c24[_0x3f58e6*_0x641b85+(-0x431+0xa*-0x1e+0x55e)]*_0x7319fe,_0x4a9182=_0x1f0c24[_0x3f58e6*_0x641b85+(0x15d*0x8+0x1129+-0x1c0f)]*_0x33fc6f;let _0x29a323;if(_0x17c58a){const _0x519173=_0x4b7968+':'+_0x1a42da+':'+_0x4a9182;if(_0x29a323=_0x3787b3['get'](_0x519173),_0x29a323!==void(-0x969*-0x1+-0xc*0x2ba+0x174f))return _0x29a323;_0x4a7bc7['setValue'](_0x4b7968,_0x1a42da,_0x4a9182),_0x29a323=_0x19bab1['findOrAddV'+'ertex'](_0x4a7bc7,!(-0x65a+0xf47*0x2+-0x1833)),_0x3787b3['set'](_0x519173,_0x29a323);}else _0x4a7bc7['setValue'](_0x4b7968,_0x1a42da,_0x4a9182),_0x29a323=_0x19bab1['findOrAddV'+'ertex'](_0x4a7bc7,!(0x17ac+0xa83+0x15e*-0x19));return _0x29a323;};for(let _0x5a1ca0=0x144a+-0xe*-0x293+-0x3854;_0x5a1ca0<_0x2ba7f3;_0x5a1ca0++)_0x4bf45b=_0x6816b2(_0x5238ec[_0x3b4f84+_0x5a1ca0*(0xc9+0x165c+-0x8d*0x2a)]),_0x31f6eb=_0x6816b2(_0x5238ec[_0x3b4f84+_0x5a1ca0*(-0xaea+-0x6*-0x90+0x78d)+(-0x11e5*-0x2+0x1f2+-0x25bb)]),_0x42458d=_0x6816b2(_0x5238ec[_0x3b4f84+_0x5a1ca0*(0x24*-0xe4+-0x5a3+0x25b6)+(0x8d5+-0x5*0x67f+-0x2*-0xbd4)]),_0x19bab1['addIndex'](_0x4bf45b),_0x19bab1['addIndex'](_0x31f6eb),_0x19bab1['addIndex'](_0x42458d);Ammo['destroy'](_0x4a7bc7);}const _0x21cb16=new Ammo['btBvhTrian'+'gleMeshSha'+'pe'](_0x19bab1,!(-0x191*0x5+0xb8a*0x1+-0x3b5));if(!_0xba5025){const _0x1df791=_0x49d557['_getNodeSc'+'aling'](_0x487bbe);_0x21cb16['setLocalSc'+'aling'](_0x1df791),Ammo['destroy'](_0x1df791);}const _0x131693=_0x49d557['_getNodeTr'+'ansform'](_0x487bbe);_0x5559b4['addChildSh'+'ape'](_0x131693,_0x21cb16),Ammo['destroy'](_0x131693);}['createPhys'+'icalShape'](_0x3f5b7f,_0x3b2244){if(!(typeof Ammo>'u')&&(_0x3b2244['model']||_0x3b2244['render'])){const _0x347ecf=new Ammo['btCompound'+'Shape'](),_0x59be59=_0x3f5b7f['getWorldTr'+'ansform']()['getScale']();if(_0x3b2244['render']){const _0x3ddd1d=_0x3b2244['render']['meshes'];for(let _0x42710c=0x508+0x13e3+0x18eb*-0x1;_0x42710c<_0x3ddd1d['length'];_0x42710c++)_0x3b2244['convexHull']?this['createAmmo'+'Hull'](_0x3ddd1d[_0x42710c],_g,_0x347ecf,_0x59be59):this['createAmmo'+'Mesh'](_0x3ddd1d[_0x42710c],_g,_0x347ecf,_0x59be59,_0x3b2244['checkVerte'+'xDuplicate'+'s']);}else{if(_0x3b2244['model']){const _0x1ab5ac=_0x3b2244['model']['meshInstan'+'ces'];for(let _0x353dcd=-0x540+-0x707+0x1*0xc47;_0x353dcd<_0x1ab5ac['length'];_0x353dcd++)this['createAmmo'+'Mesh'](_0x1ab5ac[_0x353dcd]['mesh'],_0x1ab5ac[_0x353dcd]['node'],_0x347ecf,null,_0x3b2244['checkVerte'+'xDuplicate'+'s']);const _0x97dd58=new Ammo['btVector3'](_0x59be59['x'],_0x59be59['y'],_0x59be59['z']);_0x347ecf['setLocalSc'+'aling'](_0x97dd58),Ammo['destroy'](_0x97dd58);}}return _0x347ecf;}}['recreatePh'+'ysicalShap'+'es'](_0x57097a){const _0x4b128d=_0x57097a['data'];if((_0x4b128d['renderAsse'+'t']||_0x4b128d['asset'])&&_0x57097a['enabled']&&_0x57097a['entity']['enabled']){this['loadAsset'](_0x57097a,_0x4b128d['renderAsse'+'t']||_0x4b128d['asset'],_0x4b128d['renderAsse'+'t']?'render':'model');return;}this['doRecreate'+'PhysicalSh'+'ape'](_0x57097a);}['loadAsset'](_0x262da9,_0x111a59,_0x269eb0){const _0x3ac7cd=_0x262da9['data'],_0x1854a6=this['system']['app']['assets'],_0x149c15=_0x3ac7cd[_0x269eb0],_0x543280=_0x524fe7=>{_0x3ac7cd[_0x269eb0]===_0x149c15&&(_0x3ac7cd[_0x269eb0]=_0x524fe7['resource'],this['doRecreate'+'PhysicalSh'+'ape'](_0x262da9));},_0x5f436d=_0x345b20=>{_0x345b20['ready'](_0xc9039a=>{if(_0xc9039a['data']['containerA'+'sset']){const _0x47ce54=_0x1854a6['get'](_0xc9039a['data']['containerA'+'sset']);_0x47ce54['loaded']?_0x543280(_0xc9039a):(_0x47ce54['ready'](()=>{_0x543280(_0xc9039a);}),_0x1854a6['load'](_0x47ce54));}else _0x543280(_0xc9039a);}),_0x1854a6['load'](_0x345b20);},_0x122f91=_0x1854a6['get'](_0x111a59);_0x122f91?_0x5f436d(_0x122f91):_0x1854a6['once']('add:'+_0x111a59,_0x5f436d);}['doRecreate'+'PhysicalSh'+'ape'](_0x1208a2){const _0x159a1a=_0x1208a2['entity'],_0x7c958=_0x1208a2['data'];_0x7c958['model']||_0x7c958['render']?(this['destroySha'+'pe'](_0x7c958),_0x7c958['shape']=this['createPhys'+'icalShape'](_0x159a1a,_0x7c958),_0x159a1a['rigidbody']?(_0x159a1a['rigidbody']['disableSim'+'ulation'](),_0x159a1a['rigidbody']['createBody'](),_0x159a1a['enabled']&&_0x159a1a['rigidbody']['enabled']&&_0x159a1a['rigidbody']['enableSimu'+'lation']()):_0x159a1a['trigger']?_0x159a1a['trigger']['initialize'](_0x7c958):_0x159a1a['trigger']=new pv(this['system']['app'],_0x1208a2,_0x7c958)):(this['beforeRemo'+'ve'](_0x159a1a,_0x1208a2),this['remove'](_0x159a1a,_0x7c958));}['updateTran'+'sform'](_0x34acf1,_0x15fd8d,_0x1ea0f2,_0x30be7a){if(_0x34acf1['shape']){const _0x2b2d03=_0x34acf1['entity']['getWorldTr'+'ansform']()['getScale'](),_0x388c2c=_0x34acf1['shape']['getLocalSc'+'aling']();(_0x2b2d03['x']!==_0x388c2c['x']()||_0x2b2d03['y']!==_0x388c2c['y']()||_0x2b2d03['z']!==_0x388c2c['z']())&&this['doRecreate'+'PhysicalSh'+'ape'](_0x34acf1);}super['updateTran'+'sform'](_0x34acf1,_0x15fd8d,_0x1ea0f2,_0x30be7a);}['destroySha'+'pe'](_0x1ecf3f){if(!_0x1ecf3f['shape'])return;const _0x2e1449=_0x1ecf3f['shape']['getNumChil'+'dShapes']();for(let _0x4c949e=-0x199*-0x2+0x43*0x17+-0x1*0x937;_0x4c949e<_0x2e1449;_0x4c949e++){const _0x1e98b8=_0x1ecf3f['shape']['getChildSh'+'ape'](_0x4c949e);Ammo['destroy'](_0x1e98b8);}Ammo['destroy'](_0x1ecf3f['shape']),_0x1ecf3f['shape']=null;}}class wL extends Ta{['createPhys'+'icalShape'](_0x56ddff,_0x5ca267){if(typeof Ammo<'u')return new Ammo['btCompound'+'Shape']();}['_addEachDe'+'scendant'](_0xb2a25){!_0xb2a25['collision']||_0xb2a25['rigidbody']||(_0xb2a25['collision']['_compoundP'+'arent']=this,_0xb2a25!==this['entity']&&_0xb2a25['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0xb2a25['collision']));}['_updateEac'+'hDescendan'+'t'](_0x1d8327){_0x1d8327['collision']&&_0x1d8327['collision']['_compoundP'+'arent']===this&&(_0x1d8327['collision']['_compoundP'+'arent']=null,_0x1d8327!==this['entity']&&!_0x1d8327['rigidbody']&&_0x1d8327['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x1d8327['collision']));}['_updateEac'+'hDescendan'+'tTransform'](_0x730ab2){!_0x730ab2['collision']||_0x730ab2['collision']['_compoundP'+'arent']!==this['collision']['_compoundP'+'arent']||this['collision']['system']['updateComp'+'oundChildT'+'ransform'](_0x730ab2,!(-0xd9+-0x1228*0x2+0x252a));}}class EL extends ct{constructor(_0x476bdc){super(_0x476bdc),this['id']='collision',this['ComponentT'+'ype']=Ka,this['DataType']=hL,this['schema']=_L,this['implementa'+'tions']={},this['_triMeshCa'+'che']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['on']('remove',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x2717e1,_0xc527f9,_0x3fabe8){_0x3fabe8=['type','halfExtent'+'s','radius','axis','height','convexHull','shape','model','asset','render','renderAsse'+'t','enabled','linearOffs'+'et','angularOff'+'set','checkVerte'+'xDuplicate'+'s'];const _0x2bb8e8={};for(let _0xc1bd7d=0x24f0+0x39*0x3f+0x10fd*-0x3,_0x4199e0=_0x3fabe8['length'];_0xc1bd7d<_0x4199e0;_0xc1bd7d++){const _0x55b82f=_0x3fabe8[_0xc1bd7d];_0x2bb8e8[_0x55b82f]=_0xc527f9[_0x55b82f];}let _0x4e9cac;if(_0xc527f9['hasOwnProp'+'erty']('asset')?(_0x4e9cac=_0x3fabe8['indexOf']('model'),_0x4e9cac!==-(-0x187b+-0xf*0x11f+-0x61*-0x6d)&&_0x3fabe8['splice'](_0x4e9cac,-0x84c+-0x1*0x247+0xa94),_0x4e9cac=_0x3fabe8['indexOf']('render'),_0x4e9cac!==-(0x1b9b+0xd21+-0x28bb*0x1)&&_0x3fabe8['splice'](_0x4e9cac,0x1a81+-0x9ac+-0x6*0x2ce)):_0xc527f9['hasOwnProp'+'erty']('model')&&(_0x4e9cac=_0x3fabe8['indexOf']('asset'),_0x4e9cac!==-(-0xda7+0x1597*0x1+0x1*-0x7ef)&&_0x3fabe8['splice'](_0x4e9cac,0x26fa+0x13*-0x39+0x22be*-0x1)),_0x2bb8e8['type']||(_0x2bb8e8['type']=_0x2717e1['data']['type']),_0x2717e1['data']['type']=_0x2bb8e8['type'],Array['isArray'](_0x2bb8e8['halfExtent'+'s'])&&(_0x2bb8e8['halfExtent'+'s']=new D(_0x2bb8e8['halfExtent'+'s'])),Array['isArray'](_0x2bb8e8['linearOffs'+'et'])&&(_0x2bb8e8['linearOffs'+'et']=new D(_0x2bb8e8['linearOffs'+'et'])),Array['isArray'](_0x2bb8e8['angularOff'+'set'])){const _0x42fed8=_0x2bb8e8['angularOff'+'set'];_0x42fed8['length']===0x724*0x2+-0x2*-0xc3+-0x1*0xfcb?_0x2bb8e8['angularOff'+'set']=new le()['setFromEul'+'erAngles'](_0x42fed8[-0x17eb+0xe37+0x9b4],_0x42fed8[0x205*0x9+-0x2cf*-0xb+-0x3111],_0x42fed8[-0x78a+-0x19d0+0x215c]):_0x2bb8e8['angularOff'+'set']=new le(_0x2bb8e8['angularOff'+'set']);}const _0x506340=this['_createImp'+'lementatio'+'n'](_0x2bb8e8['type']);_0x506340['beforeInit'+'ialize'](_0x2717e1,_0x2bb8e8),super['initialize'+'ComponentD'+'ata'](_0x2717e1,_0x2bb8e8,_0x3fabe8),_0x506340['afterIniti'+'alize'](_0x2717e1,_0x2bb8e8);}['_createImp'+'lementatio'+'n'](_0x3d3537){if(this['implementa'+'tions'][_0x3d3537]===void(-0xf*-0x64+-0x1189+0xbad)){let _0x3a6a55;switch(_0x3d3537){case'box':_0x3a6a55=new gL(this);break;case'sphere':_0x3a6a55=new SL(this);break;case'capsule':_0x3a6a55=new yL(this);break;case'cylinder':_0x3a6a55=new vL(this);break;case'cone':_0x3a6a55=new xL(this);break;case'mesh':_0x3a6a55=new TL(this);break;case'compound':_0x3a6a55=new wL(this);break;default:w['error']('_createImp'+'lementatio'+'n:\x20Invalid'+'\x20collision'+'\x20system\x20ty'+'pe:\x20'+_0x3d3537);}this['implementa'+'tions'][_0x3d3537]=_0x3a6a55;}return this['implementa'+'tions'][_0x3d3537];}['_getImplem'+'entation'](_0x366568){return this['implementa'+'tions'][_0x366568['collision']['data']['type']];}['cloneCompo'+'nent'](_0x282d41,_0x36d597){return this['_getImplem'+'entation'](_0x282d41)['clone'](_0x282d41,_0x36d597);}['onBeforeRe'+'move'](_0x2dd7f4,_0x54edc7){this['implementa'+'tions'][_0x54edc7['data']['type']]['beforeRemo'+'ve'](_0x2dd7f4,_0x54edc7),_0x54edc7['onBeforeRe'+'move']();}['onRemove'](_0x7f1e5a,_0x2df5c3){this['implementa'+'tions'][_0x2df5c3['type']]['remove'](_0x7f1e5a,_0x2df5c3);}['updateComp'+'oundChildT'+'ransform'](_0xa2afb2,_0x5620f9){const _0x581045=_0xa2afb2['collision']['_compoundP'+'arent'];if(_0x581045!==_0xa2afb2['collision']&&_0xa2afb2['enabled']&&_0xa2afb2['collision']['enabled']&&(_0xa2afb2['_dirtyLoca'+'l']||_0x5620f9)){const _0x33e5eb=this['_getNodeTr'+'ansform'](_0xa2afb2,_0x581045['entity']),_0x481a36=_0x581045['getCompoun'+'dChildShap'+'eIndex'](_0xa2afb2['collision']['shape']);_0x481a36===null?_0x581045['shape']['addChildSh'+'ape'](_0x33e5eb,_0xa2afb2['collision']['data']['shape']):_0x581045['shape']['updateChil'+'dTransform'](_0x481a36,_0x33e5eb,!(0x1*0x1b9f+0x3*-0x1b+-0x91a*0x3)),Ammo['destroy'](_0x33e5eb);}}['_removeCom'+'poundChild'](_0x3ff20e,_0x398f54){if(_0x3ff20e['shape']['getNumChil'+'dShapes']()!==0x29*-0xaa+0x181d+0x31d){if(_0x3ff20e['shape']['removeChil'+'dShape'])_0x3ff20e['shape']['removeChil'+'dShape'](_0x398f54);else{const _0x5a3542=_0x3ff20e['getCompoun'+'dChildShap'+'eIndex'](_0x398f54);_0x5a3542!==null&&_0x3ff20e['shape']['removeChil'+'dShapeByIn'+'dex'](_0x5a3542);}}}['onTransfor'+'mChanged'](_0x92b267,_0x3b0040,_0x4ac0d4,_0x54771b){this['implementa'+'tions'][_0x92b267['data']['type']]['updateTran'+'sform'](_0x92b267,_0x3b0040,_0x4ac0d4,_0x54771b);}['changeType'](_0x1bcdfe,_0x2f3c01,_0xfc7f16){this['implementa'+'tions'][_0x2f3c01]['beforeRemo'+'ve'](_0x1bcdfe['entity'],_0x1bcdfe),this['implementa'+'tions'][_0x2f3c01]['remove'](_0x1bcdfe['entity'],_0x1bcdfe['data']),this['_createImp'+'lementatio'+'n'](_0xfc7f16)['reset'](_0x1bcdfe,_0x1bcdfe['data']);}['recreatePh'+'ysicalShap'+'es'](_0x3438d2){this['implementa'+'tions'][_0x3438d2['data']['type']]['recreatePh'+'ysicalShap'+'es'](_0x3438d2);}['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x1002dc,_0x7a9510){if(_0x1002dc===_0x7a9510){const _0xb0318e=_0x1002dc['getWorldTr'+'ansform']()['getScale']();cc['setScale'](_0xb0318e['x'],_0xb0318e['y'],_0xb0318e['z']);}else this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x1002dc['parent'],_0x7a9510),cc['mul'](_0x1002dc['getLocalTr'+'ansform']());}['_getNodeSc'+'aling'](_0x6e154b){const _0x2604c8=_0x6e154b['getWorldTr'+'ansform']()['getScale']();return new Ammo['btVector3'](_0x2604c8['x'],_0x2604c8['y'],_0x2604c8['z']);}['_getNodeTr'+'ansform'](_0xdf78de,_0x5f0f58){let _0x2ac972,_0x1c48b3;_0x5f0f58?(this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0xdf78de,_0x5f0f58),_0x2ac972=pL,_0x1c48b3=kr,cc['getTransla'+'tion'](_0x2ac972),_0x1c48b3['setFromMat'+'4'](cc)):(_0x2ac972=_0xdf78de['getPositio'+'n'](),_0x1c48b3=_0xdf78de['getRotatio'+'n']());const _0x2600e6=new Ammo['btQuaterni'+'on'](),_0x1dd535=new Ammo['btTransfor'+'m']();_0x1dd535['setIdentit'+'y']();const _0x53c8a9=_0x1dd535['getOrigin'](),_0x2dc6d0=_0xdf78de['collision'];if(_0x2dc6d0&&_0x2dc6d0['_hasOffset']){const _0x341b67=_0x2dc6d0['data']['linearOffs'+'et'],_0x1e4831=_0x2dc6d0['data']['angularOff'+'set'],_0xb05b76=mL;kr['copy'](_0x1c48b3)['transformV'+'ector'](_0x341b67,_0xb05b76),_0xb05b76['add'](_0x2ac972),kr['copy'](_0x1c48b3)['mul'](_0x1e4831),_0x53c8a9['setValue'](_0xb05b76['x'],_0xb05b76['y'],_0xb05b76['z']),_0x2600e6['setValue'](kr['x'],kr['y'],kr['z'],kr['w']);}else _0x53c8a9['setValue'](_0x2ac972['x'],_0x2ac972['y'],_0x2ac972['z']),_0x2600e6['setValue'](_0x1c48b3['x'],_0x1c48b3['y'],_0x1c48b3['z'],_0x1c48b3['w']);return _0x1dd535['setRotatio'+'n'](_0x2600e6),Ammo['destroy'](_0x2600e6),_0x1dd535;}['destroy'](){for(const _0x447375 in this['_triMeshCa'+'che'])Ammo['destroy'](this['_triMeshCa'+'che'][_0x447375]);this['_triMeshCa'+'che']=null,super['destroy']();}}const hc=new ie(),bL=new Kt();class AL{constructor(_0x18f2fa,_0x1b126d,_0x3887c9){this['_entity']=_0x18f2fa,this['_element']=_0x18f2fa['element'],this['model']=new tr(),this['node']=new Ie(),this['model']['graph']=this['node'],this['mesh']=_0x1b126d,this['meshInstan'+'ce']=new He(this['mesh'],_0x3887c9,this['node']),this['meshInstan'+'ce']['name']='ImageEleme'+'nt:\x20'+_0x18f2fa['name'],this['meshInstan'+'ce']['castShadow']=!(-0xc4*0x23+0x1147+0x2*0x4c3),this['meshInstan'+'ce']['receiveSha'+'dow']=!(0x7f5+-0x1584+-0x70*-0x1f),this['_meshDirty']=!(0x6c*-0x3b+-0x4*-0x58a+-0x2bd*-0x1),this['model']['meshInstan'+'ces']['push'](this['meshInstan'+'ce']),this['_entity']['addChild'](this['model']['graph']),this['model']['_entity']=this['_entity'],this['unmaskMesh'+'Instance']=null;}['destroy'](){var _0x1c9dbe,_0x3d3e35;this['setMateria'+'l'](null),this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),this['model']['destroy'](),this['model']=null,this['node']=null,this['mesh']=null,(_0x1c9dbe=this['meshInstan'+'ce'])==null||_0x1c9dbe['destroy'](),this['meshInstan'+'ce']=null,(_0x3d3e35=this['unmaskMesh'+'Instance'])==null||_0x3d3e35['destroy'](),this['unmaskMesh'+'Instance']=null,this['_entity']=null,this['_element']=null;}['setMesh'](_0x4268d9){this['meshInstan'+'ce']&&(this['mesh']=_0x4268d9,this['meshInstan'+'ce']['mesh']=_0x4268d9,this['meshInstan'+'ce']['visible']=!!_0x4268d9,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['mesh']=_0x4268d9),this['forceUpdat'+'eAabb']());}['setMask'](_0xd1210b){var _0xab89ae;if(this['meshInstan'+'ce']){if(this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),_0xd1210b){this['unmaskMesh'+'Instance']=new He(this['mesh'],this['meshInstan'+'ce']['material'],this['node']),this['unmaskMesh'+'Instance']['name']='Unmask:\x20'+this['_entity']['name'],this['unmaskMesh'+'Instance']['castShadow']=!(0x1*0x20b6+-0x4*0xdf+-0x1d39),this['unmaskMesh'+'Instance']['receiveSha'+'dow']=!(-0x139e+0x124a+0x155),this['unmaskMesh'+'Instance']['pick']=!(-0x10ce+-0x83*0x22+0x2235),this['model']['meshInstan'+'ces']['push'](this['unmaskMesh'+'Instance']);for(const _0x4272a2 in this['meshInstan'+'ce']['parameters'])this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x4272a2,this['meshInstan'+'ce']['parameters'][_0x4272a2]['data']);}else{const _0x4c7da0=this['model']['meshInstan'+'ces']['indexOf'](this['unmaskMesh'+'Instance']);_0x4c7da0>=-0x1*-0xf75+0x4f0+0x17*-0xe3&&this['model']['meshInstan'+'ces']['splice'](_0x4c7da0,-0x2686+0x4b2+-0x3*-0xb47);}this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['addModelTo'+'Layers'](this['model']),_0xd1210b||((_0xab89ae=this['unmaskMesh'+'Instance'])==null||_0xab89ae['destroy'](),this['unmaskMesh'+'Instance']=null);}}['setMateria'+'l'](_0x514831){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x514831,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['material']=_0x514831));}['setParamet'+'er'](_0x3ead07,_0x5a05a7){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['setParamet'+'er'](_0x3ead07,_0x5a05a7),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x3ead07,_0x5a05a7));}['deletePara'+'meter'](_0x2aed73){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['deletePara'+'meter'](_0x2aed73),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['deletePara'+'meter'](_0x2aed73));}['setUnmaskD'+'rawOrder'](){if(!this['meshInstan'+'ce'])return;const _0x3161b0=function(_0x258e92){let _0x54b380;const _0x48d063=_0x258e92['children'],_0x50e3d2=_0x48d063['length'];if(_0x50e3d2){for(let _0xf4174=-0x1*0x24b5+0x11cd+0x37*0x58;_0xf4174<_0x50e3d2;_0xf4174++)_0x48d063[_0xf4174]['element']&&(_0x54b380=_0x48d063[_0xf4174]);if(!_0x54b380)return null;const _0x4102e7=_0x3161b0(_0x54b380);return _0x4102e7||_0x54b380;}return null;};if(this['unmaskMesh'+'Instance']){const _0x723b19=_0x3161b0(this['_entity']);_0x723b19&&_0x723b19['element']?this['unmaskMesh'+'Instance']['drawOrder']=_0x723b19['element']['drawOrder']+_0x723b19['element']['getMaskOff'+'set']():this['unmaskMesh'+'Instance']['drawOrder']=this['meshInstan'+'ce']['drawOrder']+this['_element']['getMaskOff'+'set'](),w['trace'](zs,'setDrawOrd'+'er:\x20',this['unmaskMesh'+'Instance']['name'],this['unmaskMesh'+'Instance']['drawOrder']);}}['setDrawOrd'+'er'](_0x25a112){this['meshInstan'+'ce']&&(w['trace'](zs,'setDrawOrd'+'er:\x20',this['meshInstan'+'ce']['name'],_0x25a112),this['meshInstan'+'ce']['drawOrder']=_0x25a112);}['setCull'](_0x44a439){if(!this['meshInstan'+'ce'])return;const _0x771fd5=this['_element'];let _0x35b647=null;_0x44a439&&_0x771fd5['_isScreenS'+'pace']()&&(_0x35b647=function(_0x588d2b){return _0x771fd5['isVisibleF'+'orCamera'](_0x588d2b);}),this['meshInstan'+'ce']['cull']=_0x44a439,this['meshInstan'+'ce']['isVisibleF'+'unc']=_0x35b647,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['cull']=_0x44a439,this['unmaskMesh'+'Instance']['isVisibleF'+'unc']=_0x35b647);}['setScreenS'+'pace'](_0x20396e){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['screenSpac'+'e']=_0x20396e,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['screenSpac'+'e']=_0x20396e));}['setLayer'](_0x4c51d1){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['layer']=_0x4c51d1,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['layer']=_0x4c51d1));}['forceUpdat'+'eAabb'](_0x4da8e1){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_aabbVer']=-(-0x2397+0x1a78*-0x1+0x3e10),this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_aabbVer']=-(0x3*0x313+-0x83*-0x7+-0xccd)));}['setAabbFun'+'c'](_0x17c124){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_updateAab'+'bFunc']=_0x17c124,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_updateAab'+'bFunc']=_0x17c124));}}class CL{constructor(_0x3a3abf){h(this,'_evtSetMes'+'hes',null),(this['_element']=_0x3a3abf,this['_entity']=_0x3a3abf['entity'],this['_system']=_0x3a3abf['system'],this['_textureAs'+'set']=null,this['_texture']=null,this['_materialA'+'sset']=null,this['_material']=null,this['_spriteAss'+'et']=null,this['_sprite']=null,this['_spriteFra'+'me']=-0xcc*0x1b+-0x11c8+-0x3ee*-0xa,this['_pixelsPer'+'Unit']=null,this['_targetAsp'+'ectRatio']=-(0x81f+-0x66d+-0x1b1),this['_rect']=new re(-0x1f7a+-0x6*-0x3d1+0x6*0x16e,-0x200b+0x15ef*-0x1+0x3db*0xe,-0x1d5e+-0x19f*0x9+-0x22*-0x14b,-0x3*-0x847+0x22d2+-0x1dd3*0x2),this['_mask']=!(-0x13*0x6f+0x1782+-0xf44),this['_maskRef']=0x2*-0xa39+-0x1*0x16ef+0x2b61,this['_outerScal'+'e']=new J(),this['_outerScal'+'eUniform']=new Float32Array(0x10f5+-0xd*-0x212+-0x2bdd),this['_innerOffs'+'et']=new re(),this['_innerOffs'+'etUniform']=new Float32Array(-0x23af+-0x1f*-0x1c+-0x397*-0x9),this['_atlasRect']=new re(),this['_atlasRect'+'Uniform']=new Float32Array(0x1*-0x1f29+0xf71*-0x1+0xf8a*0x3),this['_defaultMe'+'sh']=this['_createMes'+'h'](),this['_renderabl'+'e']=new AL(this['_entity'],this['_defaultMe'+'sh'],this['_material']),this['_color']=new ie(0x1a0f+-0xd78+-0xc96,-0x5*0x6e3+0x1*-0xd87+0x2ff7,0x10*-0x1bb+0x1d0b+-0x1*0x15a,0x31*-0x8a+-0x555+0x4*0x7f0),this['_colorUnif'+'orm']=new Float32Array([-0xee2+-0x2*-0x10e8+-0x11*0x11d,-0x12fc+0x5f8+0xd05,0x1b1b+-0xe5b+-0xfb*0xd]),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',0x1726+0xbed*0x2+0x35*-0xe3),this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_onScreenC'+'hange'](this['_element']['screen']),this['_element']['on']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['on']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['on']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this));}['destroy'](){this['textureAss'+'et']=null,this['spriteAsse'+'t']=null,this['materialAs'+'set']=null,this['_renderabl'+'e']['setMesh'](this['_defaultMe'+'sh']),this['_renderabl'+'e']['destroy'](),this['_defaultMe'+'sh']=null,this['_element']['off']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this);}['_onResolut'+'ionChange'](_0x25465c){}['_onParentR'+'esizeOrPiv'+'otChange'](){this['_renderabl'+'e']['mesh']&&this['_updateMes'+'h'](this['_renderabl'+'e']['mesh']);}['_onScreenS'+'paceChange'](_0x1202e6){this['_updateMat'+'erial'](_0x1202e6);}['_onScreenC'+'hange'](_0x2f4793,_0x8099ea){_0x2f4793?this['_updateMat'+'erial'](_0x2f4793['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(-0xd4b+-0x5d*-0x54+-0x1d*0x98));}['_onDrawOrd'+'erChange'](_0x2f1d66){this['_renderabl'+'e']['setDrawOrd'+'er'](_0x2f1d66),this['mask']&&this['_element']['screen']&&this['_element']['screen']['screen']['once']('syncdrawor'+'der',function(){this['_renderabl'+'e']['setUnmaskD'+'rawOrder']();},this);}['_hasUserMa'+'terial'](){return!!this['_materialA'+'sset']||!!this['_material']&&this['_system']['defaultIma'+'geMaterial'+'s']['indexOf'](this['_material'])===-(-0x3d*0x6d+-0x1a10+0x1a05*0x2);}['_use9Slici'+'ng'](){return this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt);}['_updateMat'+'erial'](_0xf83766){const _0xa0ac05=!!this['_mask'],_0x14701b=!!(this['sprite']&&this['sprite']['renderMode']===Pt),_0x5b3cba=!!(this['sprite']&&this['sprite']['renderMode']===Mt);this['_hasUserMa'+'terial']()||(this['_material']=this['_system']['getImageEl'+'ementMater'+'ial'](_0xf83766,_0xa0ac05,_0x14701b,_0x5b3cba)),this['_renderabl'+'e']&&(this['_renderabl'+'e']['setCull'](!this['_element']['_isScreenS'+'pace']()||this['_element']['_isScreenC'+'ulled']()),this['_renderabl'+'e']['setMateria'+'l'](this['_material']),this['_renderabl'+'e']['setScreenS'+'pace'](_0xf83766),this['_renderabl'+'e']['setLayer'](_0xf83766?QT:py));}['_createMes'+'h'](){const _0x4465f3=this['_element'],_0x252601=_0x4465f3['calculated'+'Width'],_0x5d1df0=_0x4465f3['calculated'+'Height'],_0x209ed6=this['_rect'],_0x597c53=this['_system']['app']['graphicsDe'+'vice'],_0x15a7ae=new Float32Array([_0x252601,-0x2100+0x2*-0x14+-0x1*-0x2128,-0x1f75+0x1960+0x615,0x2341+0x496+-0x27d7,0x221e+0x2*-0x121+-0x1fdc,0x25be+-0xda*-0x11+0x1*-0x3437,_0x209ed6['x']+_0x209ed6['z'],-0xfc6+0x2*0x1a5+-0x17*-0x8b-_0x209ed6['y'],_0x252601,_0x5d1df0,0x1*-0x1cfa+-0x247+0x1f41,-0xef*0x21+-0x139+0x2008,-0x226d*0x1+-0x116f*-0x2+0x1*-0x71,0x2ae+-0x26d8+-0x1*-0x242b,_0x209ed6['x']+_0x209ed6['z'],0x10b3+-0x679*-0x4+-0x2a96-(_0x209ed6['y']+_0x209ed6['w']),-0x1*0x773+-0xfa7+0xb8d*0x2,-0x1b*-0xf3+-0x1186*0x1+-0x5*0x19f,0x2*0x1012+0x1*-0x581+-0x1aa3,-0x1*0xc9d+-0x1*-0x24cb+-0x182e,-0xb51+-0x1fdb*0x1+0x4*0xacb,0x1061+0x5*-0x305+-0x147,_0x209ed6['x'],0x6bb*0x4+-0x7*0x239+-0x5ae*0x2-_0x209ed6['y'],-0x1*0x1973+-0x61d*-0x1+0x1356,_0x5d1df0,0x31d*-0xa+-0x1356+0x3278,-0x7f*-0x5+-0x34*0x58+0xf65,-0x939+0xc20+-0x2e7,-0x11cd+0xd*0x1b+0x106f,_0x209ed6['x'],-0x1796+0x1778+-0x1f*-0x1-(_0x209ed6['y']+_0x209ed6['w'])]),_0x329f49=bL['get'](_0x597c53,()=>new kt(_0x597c53,[{'semantic':Pe,'components':0x3,'type':Ve},{'semantic':gs,'components':0x3,'type':Ve},{'semantic':is,'components':0x2,'type':Ve}])),_0x2d1d3b=new Ds(_0x597c53,_0x329f49,0xde1+-0x3*0x331+-0x7a*0x9,{'data':_0x15a7ae['buffer']}),_0x3f8b96=new Ge(_0x597c53);return _0x3f8b96['vertexBuff'+'er']=_0x2d1d3b,_0x3f8b96['primitive'][-0x184*0x9+0x27*0x42+-0x1b*-0x22]['type']=vr,_0x3f8b96['primitive'][-0xaa*-0x17+0xdc9+0x1*-0x1d0f]['base']=-0x191c+0x13cf+0x54d*0x1,_0x3f8b96['primitive'][-0x2*0x106a+0x1*0x177e+0x956]['count']=0x1271*0x2+0x1b60+0x2*-0x201f,_0x3f8b96['primitive'][0x205b*-0x1+0xb5*0x25+-0x3d*-0x1a]['indexed']=!(-0xb1*-0x17+0x4ac+-0x2*0xa49),_0x3f8b96['aabb']['setMinMax'](D['ZERO'],new D(_0x252601,_0x5d1df0,0x1*0xf4c+-0x1606*-0x1+-0x2552)),this['_updateMes'+'h'](_0x3f8b96),_0x3f8b96;}['_updateMes'+'h'](_0x302e94){const _0x14aa80=this['_element'];let _0x12b3ad=_0x14aa80['calculated'+'Width'],_0x2fa1a6=_0x14aa80['calculated'+'Height'];if(_0x14aa80['fitMode']!==Rc&&this['_targetAsp'+'ectRatio']>-0x1005+-0x2*-0x22a+-0xbb1*-0x1){const _0x2bc944=_0x14aa80['calculated'+'Width']/_0x14aa80['calculated'+'Height'];_0x14aa80['fitMode']===nL&&_0x2bc944>this['_targetAsp'+'ectRatio']||_0x14aa80['fitMode']===oL&&_0x2bc944<this['_targetAsp'+'ectRatio']?_0x12b3ad=_0x14aa80['calculated'+'Height']*this['_targetAsp'+'ectRatio']:_0x2fa1a6=_0x14aa80['calculated'+'Width']/this['_targetAsp'+'ectRatio'];}const _0x1f2638=_0x14aa80['_isScreenS'+'pace']();if(this['_updateMat'+'erial'](_0x1f2638),this['_renderabl'+'e']&&this['_renderabl'+'e']['forceUpdat'+'eAabb'](),this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){const _0x4314a7=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]],_0x75332b=(-0xa7e+-0x3a*-0x86+-0x4f7*0x4)/_0x4314a7['rect']['z'],_0x231bd3=(-0x3a*-0x76+0x26d+-0x11*0x1b7)/_0x4314a7['rect']['w'];this['_innerOffs'+'et']['set'](_0x4314a7['border']['x']*_0x75332b,_0x4314a7['border']['y']*_0x231bd3,_0x4314a7['border']['z']*_0x75332b,_0x4314a7['border']['w']*_0x231bd3);const _0x8e443b=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x4314a7['rect']['x']/_0x8e443b['width'],_0x4314a7['rect']['y']/_0x8e443b['height'],_0x4314a7['rect']['z']/_0x8e443b['width'],_0x4314a7['rect']['w']/_0x8e443b['height']);const _0x20e62f=this['_pixelsPer'+'Unit']!==null?this['_pixelsPer'+'Unit']:this['sprite']['pixelsPerU'+'nit'],_0x457ee2=_0x4314a7['rect']['z']/_0x20e62f,_0xe0bcb4=_0x4314a7['rect']['w']/_0x20e62f;this['_outerScal'+'e']['set'](Math['max'](_0x12b3ad,this['_innerOffs'+'et']['x']*_0x457ee2),Math['max'](_0x2fa1a6,this['_innerOffs'+'et']['y']*_0xe0bcb4));let _0x176fa1=_0x457ee2,_0x5e55b3=_0xe0bcb4;this['_outerScal'+'e']['x']/=_0x457ee2,this['_outerScal'+'e']['y']/=_0xe0bcb4,_0x176fa1*=Y['clamp'](_0x12b3ad/(this['_innerOffs'+'et']['x']*_0x457ee2),-0xa93*-0x3+-0x78d+0x1dc*-0xd+0.0001,0x1*-0x11d9+0x1ed0+-0xcf6),_0x5e55b3*=Y['clamp'](_0x2fa1a6/(this['_innerOffs'+'et']['y']*_0xe0bcb4),0x1621+-0xdf6+-0x82b+0.0001,0x7e8*-0x3+0x20cf*-0x1+0x43*0xd8),this['_renderabl'+'e']&&(this['_innerOffs'+'etUniform'][0xdd5*-0x1+0x51b+0x45d*0x2]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][-0x403+0xd*-0xc7+0xe1f]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][-0x635*-0x1+0x37+-0x1*0x66a]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][-0x85*0x1a+0x1*-0x2397+0x311c]=this['_innerOffs'+'et']['w'],this['_renderabl'+'e']['setParamet'+'er']('innerOffse'+'t',this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][-0x1*-0x1eb7+-0x4d7+-0x48*0x5c]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][0x1*0x49+0x240e+-0x2456]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][0x24d+-0xc4f+0x502*0x2]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][0x1*0x321+0x17f6+-0x1b14]=this['_atlasRect']['w'],this['_renderabl'+'e']['setParamet'+'er']('atlasRect',this['_atlasRect'+'Uniform']),this['_outerScal'+'eUniform'][-0x227b+0x1*0x19cc+0x75*0x13]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][-0xffa+0xee6+0x1*0x115]=this['_outerScal'+'e']['y'],this['_renderabl'+'e']['setParamet'+'er']('outerScale',this['_outerScal'+'eUniform']),this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']),this['_renderabl'+'e']['node']['setLocalSc'+'ale'](_0x176fa1,_0x5e55b3,0x2060+0x84a*-0x4+-0xc9*-0x1),this['_renderabl'+'e']['node']['setLocalPo'+'sition']((0x525+0xb0f*-0x2+-0x18b*-0xb+0.5-_0x14aa80['pivot']['x'])*_0x12b3ad,(0x13d9+-0x122d+0x6b*-0x4+0.5-_0x14aa80['pivot']['y'])*_0x2fa1a6,-0x11d4+0x1664+-0x49*0x10));}else{const _0x4f3b29=_0x302e94['vertexBuff'+'er'],_0x3db6d5=new Float32Array(_0x4f3b29['lock']()),_0x46d1f7=_0x14aa80['pivot']['x'],_0xd96d89=_0x14aa80['pivot']['y'];_0x3db6d5[-0x1e*0x60+0x166c+-0xdc*0xd]=_0x12b3ad-_0x46d1f7*_0x12b3ad,_0x3db6d5[-0x9fe+-0x1591+0xa*0x328]=0xd4d+0x5c*-0x5f+0x5*0x42b-_0xd96d89*_0x2fa1a6,_0x3db6d5[0x1a83*0x1+-0x20*0x3+-0x1a1b]=_0x12b3ad-_0x46d1f7*_0x12b3ad,_0x3db6d5[0x1*0x312+-0x119*0x17+0x1636]=_0x2fa1a6-_0xd96d89*_0x2fa1a6,_0x3db6d5[-0x2150+-0x8d8*0x2+0x3310]=0x11*-0x15b+0x98c+0xd7f-_0x46d1f7*_0x12b3ad,_0x3db6d5[-0x382*-0x1+-0x5cf*-0x4+-0x1aad]=0x12e*0x6+0x1e5d*-0x1+0x3*0x7c3-_0xd96d89*_0x2fa1a6,_0x3db6d5[0x1a91+0x2547+0x660*-0xa]=-0xbb6+0x25d8+-0x1a22-_0x46d1f7*_0x12b3ad,_0x3db6d5[-0x2274+0x19*-0x33+0x2788]=_0x2fa1a6-_0xd96d89*_0x2fa1a6;let _0x3381a6=-0x9*0x189+0x28d+0xb45,_0x5cf443=0x4*0x12d+-0x1*-0x213a+0x49*-0x85,_0x4b6adc=this['_rect'];if(this['_sprite']&&this['_sprite']['frameKeys'][this['_spriteFra'+'me']]&&this['_sprite']['atlas']){const _0x503d93=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];_0x503d93&&(_0x4b6adc=_0x503d93['rect'],_0x3381a6=this['_sprite']['atlas']['texture']['width'],_0x5cf443=this['_sprite']['atlas']['texture']['height']);}_0x3db6d5[0x3f9*0x8+-0x14e*-0x16+-0x8e*0x6d]=(_0x4b6adc['x']+_0x4b6adc['z'])/_0x3381a6,_0x3db6d5[0x450*0x4+0x1*-0x1529+-0x38*-0x12]=-0x137e*0x1+0xcc*0xd+0x923-_0x4b6adc['y']/_0x5cf443,_0x3db6d5[0x92d+0xf63*-0x1+0x644]=(_0x4b6adc['x']+_0x4b6adc['z'])/_0x3381a6,_0x3db6d5[-0xcbe+-0x1720+-0x11*-0x21d]=0x4a5*0x2+0x34c+-0x1*0xc95-(_0x4b6adc['y']+_0x4b6adc['w'])/_0x5cf443,_0x3db6d5[-0x1cc*0x8+-0x1*-0x1cc9+-0xe53]=_0x4b6adc['x']/_0x3381a6,_0x3db6d5[0x1d*-0xca+0x387+0x1372]=-0x1*-0x157a+-0x1214+-0x365-_0x4b6adc['y']/_0x5cf443,_0x3db6d5[-0x103*-0x7+-0x107*0x16+0x1*0xfa3]=_0x4b6adc['x']/_0x3381a6,_0x3db6d5[0x1e9c+0x843+0x3e*-0xa0]=-0x201*-0x6+-0x2*-0xceb+0x371*-0xb-(_0x4b6adc['y']+_0x4b6adc['w'])/_0x5cf443,_0x4f3b29['unlock']();const _0x36c02b=new D(-0x1040+-0xdc0*-0x1+0x280-_0x46d1f7*_0x12b3ad,0x2*-0xc10+0x1353*0x2+-0xa9*0x16-_0xd96d89*_0x2fa1a6,0xbf*0x2+-0xcd*0x13+-0x1*-0xdb9),_0x54ea93=new D(_0x12b3ad-_0x46d1f7*_0x12b3ad,_0x2fa1a6-_0xd96d89*_0x2fa1a6,0x178e+0x1a2f*0x1+-0x31bd);_0x302e94['aabb']['setMinMax'](_0x36c02b,_0x54ea93),this['_renderabl'+'e']&&(this['_renderabl'+'e']['node']['setLocalSc'+'ale'](-0x5*-0xa5+-0x1f54+0x7*0x404,-0x38c*0xa+0x72d+0x1*0x1c4c,0x254a+-0x1a7b+-0xace),this['_renderabl'+'e']['node']['setLocalPo'+'sition'](0x11e8+0xda8+-0x1f90,0x303*0x7+-0x3*0x214+-0xed9,-0x46*0xd+-0xe45+0xd*0x15f),this['_renderabl'+'e']['setAabbFun'+'c'](null));}this['_meshDirty']=!(-0x1*-0x127d+-0x2276+0x1*0xffa);}['_updateSpr'+'ite'](){let _0xc6a26=!(-0x1*0x25d+-0x3e*-0x27+-0x714),_0x54ca56=null;if(this['_targetAsp'+'ectRatio']=-(0x10ed+0xc4*-0x1b+0x3c0),this['_sprite']&&this['_sprite']['atlas']){_0x54ca56=this['_sprite']['meshes'][this['spriteFram'+'e']],_0xc6a26=this['_sprite']['renderMode']===Pt||this['_sprite']['renderMode']===Mt;const _0x4ac937=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];(_0x4ac937==null?void(0x5de+0x459+0x20b*-0x5):_0x4ac937['rect']['w'])>0x14ce+-0x12*0x17f+0x620&&(this['_targetAsp'+'ectRatio']=_0x4ac937['rect']['z']/_0x4ac937['rect']['w']);}this['mesh']=_0xc6a26?_0x54ca56:this['_defaultMe'+'sh'],this['refreshMes'+'h']();}['refreshMes'+'h'](){this['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(0x1dc4+0x5*0x6e5+-0x403d):this['_updateMes'+'h'](this['mesh']));}['_updateAab'+'b'](_0x1408b1){return _0x1408b1['center']['set'](0x2*0x382+-0xd6*-0x7+-0xcde,0x15f0+-0x171*0x6+-0x3f*0x36,-0x2434+-0xee6+0x3e*0xd3),_0x1408b1['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(0xfb0*0x1+0x185*-0x7+-0x50d+0.5),this['_outerScal'+'e']['y']*(-0x5*0x7cc+0x865+-0x29*-0xbf+0.5),0x15ba+-0x2428+-0xe6e*-0x1+0.001),_0x1408b1['setFromTra'+'nsformedAa'+'bb'](_0x1408b1,this['_renderabl'+'e']['node']['getWorldTr'+'ansform']()),_0x1408b1;}['_toggleMas'+'k'](){this['_element']['_dirtifyMa'+'sk']();const _0x2481d5=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x2481d5),this['_renderabl'+'e']['setMask'](!!this['_mask']);}['_onMateria'+'lLoad'](_0x4fa36f){this['material']=_0x4fa36f['resource'];}['_onMateria'+'lAdded'](_0x241109){this['_system']['app']['assets']['off']('add:'+_0x241109['id'],this['_onMateria'+'lAdded'],this),this['_materialA'+'sset']===_0x241109['id']&&this['_bindMater'+'ialAsset'](_0x241109);}['_bindMater'+'ialAsset'](_0x599b27){this['_entity']['enabled']&&(_0x599b27['on']('load',this['_onMateria'+'lLoad'],this),_0x599b27['on']('change',this['_onMateria'+'lChange'],this),_0x599b27['on']('remove',this['_onMateria'+'lRemove'],this),_0x599b27['resource']?this['_onMateria'+'lLoad'](_0x599b27):this['_system']['app']['assets']['load'](_0x599b27));}['_unbindMat'+'erialAsset'](_0x55807d){_0x55807d['off']('load',this['_onMateria'+'lLoad'],this),_0x55807d['off']('change',this['_onMateria'+'lChange'],this),_0x55807d['off']('remove',this['_onMateria'+'lRemove'],this);}['_onMateria'+'lChange'](){}['_onMateria'+'lRemove'](){}['_onTexture'+'Added'](_0x571910){this['_system']['app']['assets']['off']('add:'+_0x571910['id'],this['_onTexture'+'Added'],this),this['_textureAs'+'set']===_0x571910['id']&&this['_bindTextu'+'reAsset'](_0x571910);}['_bindTextu'+'reAsset'](_0x3ce41a){this['_entity']['enabled']&&(_0x3ce41a['on']('load',this['_onTexture'+'Load'],this),_0x3ce41a['on']('change',this['_onTexture'+'Change'],this),_0x3ce41a['on']('remove',this['_onTexture'+'Remove'],this),_0x3ce41a['resource']?this['_onTexture'+'Load'](_0x3ce41a):this['_system']['app']['assets']['load'](_0x3ce41a));}['_unbindTex'+'tureAsset'](_0x9686a4){_0x9686a4['off']('load',this['_onTexture'+'Load'],this),_0x9686a4['off']('change',this['_onTexture'+'Change'],this),_0x9686a4['off']('remove',this['_onTexture'+'Remove'],this);}['_onTexture'+'Load'](_0x5aa003){this['texture']=_0x5aa003['resource'];}['_onTexture'+'Change'](_0xa54902){}['_onTexture'+'Remove'](_0x5bff98){}['_onSpriteA'+'ssetAdded'](_0x562b27){this['_system']['app']['assets']['off']('add:'+_0x562b27['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0x562b27['id']&&this['_bindSprit'+'eAsset'](_0x562b27);}['_bindSprit'+'eAsset'](_0x57bde1){this['_entity']['enabled']&&(_0x57bde1['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x57bde1['on']('change',this['_onSpriteA'+'ssetChange'],this),_0x57bde1['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x57bde1['resource']?this['_onSpriteA'+'ssetLoad'](_0x57bde1):this['_system']['app']['assets']['load'](_0x57bde1));}['_unbindSpr'+'iteAsset'](_0x55c55c){_0x55c55c['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x55c55c['off']('change',this['_onSpriteA'+'ssetChange'],this),_0x55c55c['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x55c55c['data']['textureAtl'+'asAsset']&&this['_system']['app']['assets']['off']('load:'+_0x55c55c['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this);}['_onSpriteA'+'ssetLoad'](_0x43221e){if(!_0x43221e||!_0x43221e['resource'])this['sprite']=null;else{if(_0x43221e['resource']['atlas'])this['sprite']=_0x43221e['resource'];else{const _0x311a43=_0x43221e['data']['textureAtl'+'asAsset'];if(_0x311a43){const _0x3a387d=this['_system']['app']['assets'];_0x3a387d['off']('load:'+_0x311a43,this['_onTexture'+'AtlasLoad'],this),_0x3a387d['once']('load:'+_0x311a43,this['_onTexture'+'AtlasLoad'],this);}}}}['_onSpriteA'+'ssetChange'](_0x47ae07){this['_onSpriteA'+'ssetLoad'](_0x47ae07);}['_onSpriteA'+'ssetRemove'](_0x329948){}['_bindSprit'+'e'](_0x247ad8){this['_evtSetMes'+'hes']=_0x247ad8['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),_0x247ad8['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x247ad8['on']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x247ad8['atlas']&&_0x247ad8['atlas']['on']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_unbindSpr'+'ite'](_0x1536a1){var _0x2a61ad;(_0x2a61ad=this['_evtSetMes'+'hes'])==null||_0x2a61ad['off'](),this['_evtSetMes'+'hes']=null,_0x1536a1['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x1536a1['off']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x1536a1['atlas']&&_0x1536a1['atlas']['off']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_onSpriteM'+'eshesChang'+'e'](){this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],0x16ab+-0x1435*-0x1+-0xe0*0x31,this['_sprite']['frameKeys']['length']-(-0x18d4+-0x1c9*0x10+0x3565))),this['_updateSpr'+'ite']();}['_onSpriteP'+'puChange'](){this['sprite']['renderMode']!==ci&&this['_pixelsPer'+'Unit']===null&&this['_updateSpr'+'ite']();}['_onAtlasTe'+'xtureChang'+'e'](){this['sprite']&&this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'));}['_onTexture'+'AtlasLoad'](_0x2271f8){const _0x2cdc63=this['_spriteAss'+'et'];_0x2cdc63 instanceof pe?this['_onSpriteA'+'ssetLoad'](_0x2cdc63):this['_onSpriteA'+'ssetLoad'](this['_system']['app']['assets']['get'](_0x2cdc63));}['onEnable'](){if(this['_materialA'+'sset']){const _0x14db86=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);_0x14db86&&_0x14db86['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0x14db86);}if(this['_textureAs'+'set']){const _0x518c5d=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x518c5d&&_0x518c5d['resource']!==this['_texture']&&this['_bindTextu'+'reAsset'](_0x518c5d);}if(this['_spriteAss'+'et']){const _0x470a51=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x470a51&&_0x470a51['resource']!==this['_sprite']&&this['_bindSprit'+'eAsset'](_0x470a51);}this['_element']['addModelTo'+'Layers'](this['_renderabl'+'e']['model']);}['onDisable'](){this['_element']['removeMode'+'lFromLayer'+'s'](this['_renderabl'+'e']['model']);}['_setStenci'+'l'](_0x2f32a1){this['_renderabl'+'e']['meshInstan'+'ce']['stencilFro'+'nt']=_0x2f32a1,this['_renderabl'+'e']['meshInstan'+'ce']['stencilBac'+'k']=_0x2f32a1;let _0x54f9f9=0x1*0x24d9+-0x1*0x105a+-0x21*0x9f;if(this['_element']['maskedBy']&&(_0x54f9f9=this['_element']['maskedBy']['element']['_image']['_maskRef']),this['_renderabl'+'e']['unmaskMesh'+'Instance']){const _0x1096d9=new pi({'ref':_0x54f9f9+(0x2*-0xa40+0x49*0x5e+-0x64d),'func':Hc,'zpass':ix});this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']=_0x1096d9,this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k']=_0x1096d9;}}['_updateRen'+'derableEmi'+'ssive'](){hc['linear'](this['_color']),this['_colorUnif'+'orm'][0x13*-0x32+-0x33*0x89+-0x1*-0x1f01]=hc['r'],this['_colorUnif'+'orm'][0x7*-0xcf+0x1fcc+-0x1a22]=hc['g'],this['_colorUnif'+'orm'][0x1b42+0x8aa+-0x23ea]=hc['b'],this['_renderabl'+'e']['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}set['color'](_0x16cbfa){this['_color']===_0x16cbfa&&w['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t');const {r:_0x1f6b14,g:_0x38b9e1,b:_0x29ae56}=_0x16cbfa;(this['_color']['r']!==_0x1f6b14||this['_color']['g']!==_0x38b9e1||this['_color']['b']!==_0x29ae56)&&(this['_color']['r']=_0x1f6b14,this['_color']['g']=_0x38b9e1,this['_color']['b']=_0x29ae56,this['_updateRen'+'derableEmi'+'ssive']()),this['_element']&&this['_element']['fire']('set:color',this['_color']);}get['color'](){return this['_color'];}set['opacity'](_0x2e42ea){_0x2e42ea!==this['_color']['a']&&(this['_color']['a']=_0x2e42ea,this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',_0x2e42ea)),this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x2e42ea);}get['opacity'](){return this['_color']['a'];}set['rect'](_0x3657cf){this['_rect']===_0x3657cf&&console['warn']('Setting\x20el'+'ement.rect'+'\x20to\x20itself'+'\x20will\x20have'+'\x20no\x20effect');let _0xeb5bf6,_0x4cd9b6,_0x2c1c02,_0x2b8451;_0x3657cf instanceof re?(_0xeb5bf6=_0x3657cf['x'],_0x4cd9b6=_0x3657cf['y'],_0x2c1c02=_0x3657cf['z'],_0x2b8451=_0x3657cf['w']):(_0xeb5bf6=_0x3657cf[-0x24cd+-0x1435+0x3902],_0x4cd9b6=_0x3657cf[0x1*-0x62b+-0x1267*-0x1+0x1f*-0x65],_0x2c1c02=_0x3657cf[0x1f8c+-0xfba+-0xfd0],_0x2b8451=_0x3657cf[0x65d+0x1528+-0x1b82]),!(_0xeb5bf6===this['_rect']['x']&&_0x4cd9b6===this['_rect']['y']&&_0x2c1c02===this['_rect']['z']&&_0x2b8451===this['_rect']['w'])&&(this['_rect']['set'](_0xeb5bf6,_0x4cd9b6,_0x2c1c02,_0x2b8451),this['_renderabl'+'e']['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(0x1*-0x1d15+0x22d2*-0x1+-0x39*-0x11f):this['_updateMes'+'h'](this['_renderabl'+'e']['mesh'])));}get['rect'](){return this['_rect'];}['_removeMat'+'erialAsset'+'Events'](){if(this['_materialA'+'sset']){const _0x31a74a=this['_system']['app']['assets'];_0x31a74a['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this);const _0x5acd88=_0x31a74a['get'](this['_materialA'+'sset']);_0x5acd88&&(_0x5acd88['off']('load',this['_onMateria'+'lLoad'],this),_0x5acd88['off']('change',this['_onMateria'+'lChange'],this),_0x5acd88['off']('remove',this['_onMateria'+'lRemove'],this));}}set['material'](_0x3cda28){if(this['_material']!==_0x3cda28){if(!_0x3cda28){const _0x436674=this['_element']['_isScreenS'+'pace']();this['mask']?_0x3cda28=_0x436674?this['_system']['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']:this['_system']['defaultIma'+'geMaskMate'+'rial']:_0x3cda28=_0x436674?this['_system']['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']:this['_system']['defaultIma'+'geMaterial'];}if(this['_material']=_0x3cda28,this['_materialA'+'sset']){const _0x324ce8=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);(!_0x324ce8||_0x324ce8['resource']!==_0x3cda28)&&(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=null);}_0x3cda28&&(this['_renderabl'+'e']['setMateria'+'l'](_0x3cda28),this['_hasUserMa'+'terial']()?(this['_renderabl'+'e']['deletePara'+'meter']('material_o'+'pacity'),this['_renderabl'+'e']['deletePara'+'meter']('material_e'+'missive')):(this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a'])));}}get['material'](){return this['_material'];}set['materialAs'+'set'](_0x248566){const _0x23f010=this['_system']['app']['assets'];let _0x30e3dc=_0x248566;if(_0x248566 instanceof pe&&(_0x30e3dc=_0x248566['id']),this['_materialA'+'sset']!==_0x30e3dc){if(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=_0x30e3dc,this['_materialA'+'sset']){const _0x3e108f=_0x23f010['get'](this['_materialA'+'sset']);_0x3e108f?this['_bindMater'+'ialAsset'](_0x3e108f):(this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x30e3dc,_0x23f010['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this));}else this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x30e3dc;}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['texture'](_0x40f86f){if(this['_texture']!==_0x40f86f){if(this['_textureAs'+'set']){const _0x1ac790=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x1ac790&&_0x1ac790['resource']!==_0x40f86f&&(this['textureAss'+'et']=null);}if(this['_texture']=_0x40f86f,_0x40f86f){this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null),this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_texture']),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a']);const _0x4840f9=this['_texture']['width']/this['_texture']['height'];_0x4840f9!==this['_targetAsp'+'ectRatio']&&(this['_targetAsp'+'ectRatio']=_0x4840f9,this['_element']['fitMode']!==Rc&&this['refreshMes'+'h']());}else this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'),this['_targetAsp'+'ectRatio']=-(0x16*0x1b0+-0x2559+0x3a),this['_element']['fitMode']!==Rc&&this['refreshMes'+'h']();}}get['texture'](){return this['_texture'];}set['textureAss'+'et'](_0x105048){const _0x227809=this['_system']['app']['assets'];let _0x5dad8b=_0x105048;if(_0x105048 instanceof pe&&(_0x5dad8b=_0x105048['id']),this['_textureAs'+'set']!==_0x5dad8b){if(this['_textureAs'+'set']){_0x227809['off']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this);const _0x1d3657=_0x227809['get'](this['_textureAs'+'set']);_0x1d3657&&(_0x1d3657['off']('load',this['_onTexture'+'Load'],this),_0x1d3657['off']('change',this['_onTexture'+'Change'],this),_0x1d3657['off']('remove',this['_onTexture'+'Remove'],this));}if(this['_textureAs'+'set']=_0x5dad8b,this['_textureAs'+'set']){const _0x4a7dd4=_0x227809['get'](this['_textureAs'+'set']);_0x4a7dd4?this['_bindTextu'+'reAsset'](_0x4a7dd4):(this['texture']=null,_0x227809['on']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this));}else this['texture']=null;}}get['textureAss'+'et'](){return this['_textureAs'+'set'];}set['spriteAsse'+'t'](_0x3f4329){const _0x371ac8=this['_system']['app']['assets'];let _0x42b2b9=_0x3f4329;if(_0x3f4329 instanceof pe&&(_0x42b2b9=_0x3f4329['id']),this['_spriteAss'+'et']!==_0x42b2b9){if(this['_spriteAss'+'et']){_0x371ac8['off']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this);const _0x1e2e97=_0x371ac8['get'](this['_spriteAss'+'et']);_0x1e2e97&&this['_unbindSpr'+'iteAsset'](_0x1e2e97);}if(this['_spriteAss'+'et']=_0x42b2b9,this['_spriteAss'+'et']){const _0x4f3101=_0x371ac8['get'](this['_spriteAss'+'et']);_0x4f3101?this['_bindSprit'+'eAsset'](_0x4f3101):(this['sprite']=null,_0x371ac8['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}this['_element']&&this['_element']['fire']('set:sprite'+'Asset',_0x42b2b9);}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['sprite'](_0x1f2a8f){if(this['_sprite']!==_0x1f2a8f){if(this['_sprite']&&this['_unbindSpr'+'ite'](this['_sprite']),this['_spriteAss'+'et']){const _0x464741=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x464741&&_0x464741['resource']!==_0x1f2a8f&&(this['spriteAsse'+'t']=null);}this['_sprite']=_0x1f2a8f,this['_sprite']&&(this['_bindSprit'+'e'](this['_sprite']),this['_textureAs'+'set']&&(this['textureAss'+'et']=null)),this['_sprite']&&this['_sprite']['atlas']&&this['_sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap')),this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],0x79*0x15+0x1b8e+-0x1f9*0x13,this['_sprite']['frameKeys']['length']-(0x480*0x1+-0x26f1+0x2272))),this['_updateSpr'+'ite']();}}get['sprite'](){return this['_sprite'];}set['spriteFram'+'e'](_0x32b79a){const _0x25d4bf=this['_spriteFra'+'me'];this['_sprite']?this['_spriteFra'+'me']=Y['clamp'](_0x32b79a,0x1470+-0x1c25+0x7b5,this['_sprite']['frameKeys']['length']-(0x18b4*0x1+0x908+-0x1*0x21bb)):this['_spriteFra'+'me']=_0x32b79a,this['_spriteFra'+'me']!==_0x25d4bf&&this['_updateSpr'+'ite'](),this['_element']&&this['_element']['fire']('set:sprite'+'Frame',_0x32b79a);}get['spriteFram'+'e'](){return this['_spriteFra'+'me'];}set['mesh'](_0x438325){this['_renderabl'+'e']['setMesh'](_0x438325),this['_defaultMe'+'sh']===_0x438325?this['_renderabl'+'e']['setAabbFun'+'c'](null):this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']);}get['mesh'](){return this['_renderabl'+'e']['mesh'];}set['mask'](_0x2f8d60){this['_mask']!==_0x2f8d60&&(this['_mask']=_0x2f8d60,this['_toggleMas'+'k']());}get['mask'](){return this['_mask'];}set['pixelsPerU'+'nit'](_0x28c1a0){this['_pixelsPer'+'Unit']!==_0x28c1a0&&(this['_pixelsPer'+'Unit']=_0x28c1a0,this['_sprite']&&(this['_sprite']['renderMode']===Pt||this['_sprite']['renderMode']===Mt)&&this['_updateSpr'+'ite']());}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}get['aabb'](){return this['_renderabl'+'e']['meshInstan'+'ce']?this['_renderabl'+'e']['meshInstan'+'ce']['aabb']:null;}}class PL extends me{constructor(_0x1b304c){super(),this['_app']=_0x1b304c,_0x1b304c['i18n']['on'](Sa['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['_autoLoad']=!(0x405*-0x9+-0x220d+0x463b),this['_disableLo'+'calization']=!(-0x367*-0x5+-0x5b6+0x3*-0x3c4),this['_defaultAs'+'set']=null,this['_localized'+'Asset']=null;}set['defaultAss'+'et'](_0x2d7004){const _0x554b83=_0x2d7004 instanceof pe?_0x2d7004['id']:_0x2d7004;this['_defaultAs'+'set']!==_0x554b83&&(this['_defaultAs'+'set']&&this['_unbindDef'+'aultAsset'](),this['_defaultAs'+'set']=_0x554b83,this['_defaultAs'+'set']&&this['_bindDefau'+'ltAsset'](),this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['defaultAss'+'et'](){return this['_defaultAs'+'set'];}set['localizedA'+'sset'](_0x110d9c){const _0x4b83bd=_0x110d9c instanceof pe?_0x110d9c['id']:_0x110d9c;this['_localized'+'Asset']!==_0x4b83bd&&(this['_localized'+'Asset']&&(this['_app']['assets']['off']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this),this['_unbindLoc'+'alizedAsse'+'t']()),this['_localized'+'Asset']=_0x4b83bd,this['_localized'+'Asset']&&(this['_app']['assets']['get'](this['_localized'+'Asset'])?this['_bindLocal'+'izedAsset']():this['_app']['assets']['once']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this)));}get['localizedA'+'sset'](){return this['_localized'+'Asset'];}set['autoLoad'](_0x72acbd){this['_autoLoad']!==_0x72acbd&&(this['_autoLoad']=_0x72acbd,this['_autoLoad']&&this['_localized'+'Asset']&&(this['_unbindLoc'+'alizedAsse'+'t'](),this['_bindLocal'+'izedAsset']()));}get['autoLoad'](){return this['_autoLoad'];}set['disableLoc'+'alization'](_0x1e370a){this['_disableLo'+'calization']!==_0x1e370a&&(this['_disableLo'+'calization']=_0x1e370a,this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['disableLoc'+'alization'](){return this['_disableLo'+'calization'];}['_bindDefau'+'ltAsset'](){const _0x5307fa=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x5307fa?this['_onDefault'+'AssetAdd'](_0x5307fa):this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);}['_unbindDef'+'aultAsset'](){if(!this['_defaultAs'+'set'])return;this['_app']['assets']['off']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);const _0x2fc8b0=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x2fc8b0&&(_0x2fc8b0['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x2fc8b0['off']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x2fc8b0['off']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetAdd'](_0x4d6c20){this['_defaultAs'+'set']===_0x4d6c20['id']&&(_0x4d6c20['on']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x4d6c20['on']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x4d6c20['once']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetRemov'+'e'](_0x33948f){this['_defaultAs'+'set']===_0x33948f['id']&&(_0x33948f['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x33948f['off']('remove:loc'+'alized',this['_onLocaleA'+'dd'],this),this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this));}['_bindLocal'+'izedAsset'](){if(!this['_autoLoad'])return;const _0x56218c=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x56218c&&(_0x56218c['on']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x56218c['on']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x56218c['on']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this),_0x56218c['resource']?this['_onLocaliz'+'edAssetLoa'+'d'](_0x56218c):this['_app']['assets']['load'](_0x56218c));}['_unbindLoc'+'alizedAsse'+'t'](){const _0x1d5574=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x1d5574&&(_0x1d5574['off']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x1d5574['off']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x1d5574['off']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this));}['_onLocaliz'+'edAssetAdd'](_0x316290){this['_localized'+'Asset']===_0x316290['id']&&this['_bindLocal'+'izedAsset']();}['_onLocaliz'+'edAssetLoa'+'d'](_0x3f7bc7){this['fire']('load',_0x3f7bc7);}['_onLocaliz'+'edAssetCha'+'nge'](_0x4f6fa2,_0x3aee7e,_0x401bc7,_0x529e5e){this['fire']('change',_0x4f6fa2,_0x3aee7e,_0x401bc7,_0x529e5e);}['_onLocaliz'+'edAssetRem'+'ove'](_0x1450d0){this['_localized'+'Asset']===_0x1450d0['id']&&(this['localizedA'+'sset']=this['_defaultAs'+'set']),this['fire']('remove',_0x1450d0);}['_onLocaleA'+'dd'](_0xc30de0,_0x2ffbdb){this['_app']['i18n']['locale']===_0xc30de0&&this['_onSetLoca'+'le'](_0xc30de0);}['_onLocaleR'+'emove'](_0x5b2de4,_0x549592){this['_app']['i18n']['locale']===_0x5b2de4&&this['_onSetLoca'+'le'](_0x5b2de4);}['_onSetLoca'+'le'](_0x6a76f){if(!this['_defaultAs'+'set']){this['localizedA'+'sset']=null;return;}const _0x2e0da5=this['_app']['assets']['get'](this['_defaultAs'+'set']);if(!_0x2e0da5||this['_disableLo'+'calization']){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}const _0x31ed2d=_0x2e0da5['getLocaliz'+'edAssetId'](_0x6a76f);if(!_0x31ed2d){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}this['localizedA'+'sset']=_0x31ed2d;}['destroy'](){this['defaultAss'+'et']=null,this['_app']['i18n']['off'](Sa['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['off']();}}const dh='msdf',ML='bitmap',So=-0x1dcc*-0x1+0x143a+-0x2a2*0x13,Za=0x88d*0x4+0x6a4+-0x28d7,ru=0x1*0x7+0x456+-0x45b*0x1,mv=-0x7a7*0x2+0x7a1+-0x10*-0x7b,au=-0x24de+0x53*0x4f+-0x5*-0x241,nu=0x1*0x623+-0x1c65+0x1647,ou=-0x24e4+-0x1e76+0x21b*0x20,lu=-0x22d0+-0x1d4*-0x1+0x3*0xb01,gg=0x1f9b*0x1+-0x10d+-0x1e86,DL='\x20\x09\x0a\x0d\x0b\x0c',IL=/[\w|/]/;class LL{constructor(_0x3d02e4){this['_symbols']=_0x3d02e4,this['_index']=-0x2*0x46c+0x461+0x477,this['_last']=0xb15+-0x8*0x1b6+0x29b,this['_cur']=this['_symbols']['length']>-0x416*-0x2+-0xc9b+0x46f?this['_symbols'][-0x1*-0x113f+0x14c7+0x1303*-0x2]:null,this['_buf']=[],this['_mode']='text',this['_error']=null;}['read'](){let _0x33eacb=this['_read']();for(;_0x33eacb===gg;)_0x33eacb=this['_read']();return _0x33eacb!==So&&_0x33eacb!==Za&&(this['_last']=this['_index']),_0x33eacb;}['buf'](){return this['_buf'];}['last'](){return this['_last'];}['error'](){return this['_error'];}['debugPrint'](){const _0xda0b49=['EOF','ERROR','TEXT','OPEN_BRACK'+'ET','CLOSE_BRAC'+'KET','EQUALS','STRING','IDENTIFIER','WHITESPACE'];let _0x506997=this['read'](),_0x4c13fb='';for(;_0x4c13fb+=(_0x4c13fb['length']>-0x1eda+-0x1cf*0xe+0x382c?'\x0a':'')+_0xda0b49[_0x506997]+'\x20\x27'+this['buf']()['join']('')+'\x27',!(_0x506997===So||_0x506997===Za);)_0x506997=this['read']();return _0x4c13fb;}['_read'](){return this['_buf']=[],this['_eof']()?So:this['_mode']==='text'?this['_text']():this['_tag']();}['_text'](){for(;;)switch(this['_cur']){case null:return this['_buf']['length']>0x3a*0x1+-0x596*0x6+0x2*0x10a5?ru:So;case'[':return this['_mode']='tag',this['_buf']['length']>0x1095+0x432*-0x3+-0x5d*0xb?ru:this['_tag']();case'\x5c':switch(this['_next'](),this['_cur']){case'[':this['_store']();break;default:this['_output']('\x5c');break;}break;default:this['_store']();break;}}['_tag'](){switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20tag',Za;case'[':return this['_store'](),mv;case']':return this['_store'](),this['_mode']='text',au;case'=':return this['_store'](),nu;case'\x20':case'\x09':case'\x0a':case'\x0d':case'\x0b':case'\x0c':return this['_whitespac'+'e']();case'\x22':return this['_string']();default:return this['_isIdentif'+'ierSymbol'](this['_cur'])?this['_identifie'+'r']():(this['_error']='unrecogniz'+'ed\x20charact'+'er',Za);}}['_whitespac'+'e'](){for(this['_store']();DL['indexOf'](this['_cur'])!==-(0x37a+0x1351*-0x1+0x2a4*0x6);)this['_store']();return gg;}['_string'](){for(this['_next']();;)switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20string',Za;case'\x22':return this['_next'](),ou;default:this['_store']();break;}}['_identifie'+'r'](){for(this['_store']();this['_cur']!==null&&this['_isIdentif'+'ierSymbol'](this['_cur']);)this['_store']();return lu;}['_isIdentif'+'ierSymbol'](_0x5229de){return _0x5229de['length']===-0xb89*-0x1+-0x1*-0x8cd+0x5*-0x411&&_0x5229de['match'](IL)!==null;}['_eof'](){return this['_cur']===null;}['_next'](){return this['_eof']()||(this['_index']++,this['_cur']=this['_index']<this['_symbols']['length']?this['_symbols'][this['_index']]:null),this['_cur'];}['_store'](){return this['_buf']['push'](this['_cur']),this['_next']();}['_output'](_0x23a62f){this['_buf']['push'](_0x23a62f);}}class RL{constructor(_0x563714){this['_scanner']=new LL(_0x563714),this['_error']=null;}['parse'](_0x405a6e,_0x16c0e5){for(;;)switch(this['_scanner']['read']()){case So:return!(-0x331+0x23e8+0x19*-0x14f);case Za:return!(-0x38f+0x3*-0x576+0x13f2);case ru:Array['prototype']['push']['apply'](_0x405a6e,this['_scanner']['buf']());break;case mv:if(!this['_parseTag'](_0x405a6e,_0x16c0e5))return!(0x1813*-0x1+-0x21*0x2f+0x1e23);break;default:return!(-0xdc6+0x1*-0xb1d+0x18e4);}}['error'](){return'Error\x20eval'+'uating\x20mar'+'kup\x20at\x20#'+this['_scanner']['last']()['toString']()+'\x20('+(this['_scanner']['error']()||this['_error'])+')';}['_parseTag'](_0x3a39b6,_0x261973){let _0x7d45c8=this['_scanner']['read']();if(_0x7d45c8!==lu)return this['_error']='expected\x20i'+'dentifier',!(-0x1*0x2f6+0x1427+0x28*-0x6e);const _0x25b375=this['_scanner']['buf']()['join']('');if(_0x25b375[-0x17*0x6+-0x1a8b+0x1b15]==='/'){for(let _0xb552b7=_0x261973['length']-(0x1b08+0x2*-0x543+-0x1081);_0xb552b7>=0x1*-0x76+0x1693+-0x161d;--_0xb552b7)if(_0x25b375==='/'+_0x261973[_0xb552b7]['name']&&_0x261973[_0xb552b7]['end']===null)return _0x261973[_0xb552b7]['end']=_0x3a39b6['length'],_0x7d45c8=this['_scanner']['read'](),_0x7d45c8!==au?(this['_error']='expected\x20c'+'lose\x20brack'+'et',!(-0x1c3d+-0x57*0x6d+0x4149)):!(0x1f0c+-0xb98*-0x3+0x4*-0x1075);return this['_error']='failed\x20to\x20'+'find\x20match'+'ing\x20tag',!(0x1*-0x2257+-0x7*-0x48a+-0x149*-0x2);}const _0x2dd997={'name':_0x25b375,'value':null,'attributes':{},'start':_0x3a39b6['length'],'end':null};if(_0x7d45c8=this['_scanner']['read'](),_0x7d45c8===nu){if(_0x7d45c8=this['_scanner']['read'](),_0x7d45c8!==ou)return this['_error']='expected\x20s'+'tring',!(-0x10+0xcf2+-0xce1);_0x2dd997['value']=this['_scanner']['buf']()['join'](''),_0x7d45c8=this['_scanner']['read']();}for(;;){switch(_0x7d45c8){case au:return _0x261973['push'](_0x2dd997),!(-0x15ad*-0x1+-0x1a*-0xa1+-0x3*0xcad);case lu:{const _0x4caec6=this['_scanner']['buf']()['join']('');if(_0x7d45c8=this['_scanner']['read'](),_0x7d45c8!==nu)return this['_error']='expected\x20e'+'quals',!(0x906+0xa36*0x1+-0x9*0x223);if(_0x7d45c8=this['_scanner']['read'](),_0x7d45c8!==ou)return this['_error']='expected\x20s'+'tring',!(-0x2227+-0x71f*-0x1+0x1b09);const _0x326e02=this['_scanner']['buf']()['join']('');_0x2dd997['attributes'][_0x4caec6]=_0x326e02;break;}default:return this['_error']='expected\x20c'+'lose\x20brack'+'et\x20or\x20iden'+'tifier',!(-0x14ed+-0x24a7+0x3995*0x1);}_0x7d45c8=this['_scanner']['read']();}}}function _v(_0x98d4f3,_0x3ebf5b){for(const _0x18c2ec in _0x3ebf5b){if(!_0x3ebf5b['hasOwnProp'+'erty'](_0x18c2ec))continue;const _0x1e054e=_0x3ebf5b[_0x18c2ec];_0x1e054e instanceof Object?(_0x98d4f3['hasOwnProp'+'erty'](_0x18c2ec)||(_0x98d4f3[_0x18c2ec]={}),_v(_0x98d4f3[_0x18c2ec],_0x3ebf5b[_0x18c2ec])):_0x98d4f3[_0x18c2ec]=_0x1e054e;}}function OL(_0x2b3cd1){if(_0x2b3cd1['length']===-0x1*-0x1147+0x1b*0x15a+0xac1*-0x5)return null;const _0x300e02={};for(let _0x16e243=-0x65*-0x17+-0x163*0xf+0xbba*0x1;_0x16e243<_0x2b3cd1['length'];++_0x16e243){const _0x47cd8d=_0x2b3cd1[_0x16e243],_0x4ac9c0={};_0x4ac9c0[_0x47cd8d['name']]={'value':_0x47cd8d['value'],'attributes':_0x47cd8d['attributes']},_v(_0x300e02,_0x4ac9c0);}return _0x300e02;}function FL(_0x1c0987,_0x54c910){if(_0x1c0987['length']===0x13*-0xd3+0x6ed+0x34*0x2b)return null;const _0x4fc76d={};for(let _0x31569b=0x16d4+0x152f+-0x2c03;_0x31569b<_0x1c0987['length'];++_0x31569b){const _0x54defa=_0x1c0987[_0x31569b];_0x4fc76d['hasOwnProp'+'erty'](_0x54defa['start'])?_0x4fc76d[_0x54defa['start']]['open']===null?_0x4fc76d[_0x54defa['start']]['open']=[_0x54defa]:_0x4fc76d[_0x54defa['start']]['open']['push'](_0x54defa):_0x4fc76d[_0x54defa['start']]={'open':[_0x54defa],'close':null},_0x4fc76d['hasOwnProp'+'erty'](_0x54defa['end'])?_0x4fc76d[_0x54defa['end']]['close']===null?_0x4fc76d[_0x54defa['end']]['close']=[_0x54defa]:_0x4fc76d[_0x54defa['end']]['close']['push'](_0x54defa):_0x4fc76d[_0x54defa['end']]={'open':null,'close':[_0x54defa]};}let _0x5f5376=[];function _0x92bf82(_0x5ad6a6){_0x5f5376=_0x5f5376['filter'](_0x167c55=>_0x5ad6a6['find'](_0x1de1a5=>_0x1de1a5===_0x167c55)===void(-0x38f*-0x1+0xea6+-0x1235));}function _0x5c3da1(_0x718bea){for(let _0xa266b3=-0x56*-0x65+-0x12aa*-0x2+-0x4742;_0xa266b3<_0x718bea['length'];++_0xa266b3)_0x5f5376['push'](_0x718bea[_0xa266b3]);}const _0x68d0bc=Object['keys'](_0x4fc76d)['sort']((_0x128a13,_0x47c1c8)=>_0x128a13-_0x47c1c8),_0x3bd88f=[];for(let _0x4668d2=-0x8d1+0x877+0x5a;_0x4668d2<_0x68d0bc['length'];++_0x4668d2){const _0x3c440c=_0x4fc76d[_0x68d0bc[_0x4668d2]];_0x3c440c['close']!==null&&_0x92bf82(_0x3c440c['close']),_0x3c440c['open']!==null&&_0x5c3da1(_0x3c440c['open']),_0x3bd88f['push']({'start':_0x68d0bc[_0x4668d2],'tags':OL(_0x5f5376)});}const _0x1d61bd=[];let _0x498430=null;for(let _0x173e00=-0xf66+-0xc69*0x1+0x153*0x15;_0x173e00<_0x3bd88f['length'];++_0x173e00){const _0x1857e3=_0x3bd88f[_0x173e00];for(;_0x1d61bd['length']<_0x1857e3['start'];)_0x1d61bd['push'](_0x498430?_0x498430['tags']:null);_0x498430=_0x1857e3;}for(;_0x1d61bd['length']<_0x54c910;)_0x1d61bd['push'](null);return _0x1d61bd;}function NL(_0x5ae9e2){const _0x3b396a=new RL(_0x5ae9e2),_0x5f9d0=[],_0x59ad54=[];if(!_0x3b396a['parse'](_0x5f9d0,_0x59ad54))return console['warn'](_0x3b396a['error']()),{'symbols':_0x5ae9e2,'tags':null};const _0x28cb8c=_0x59ad54['find'](_0x5f2642=>_0x5f2642['end']===null);if(_0x28cb8c)return console['warn']('Markup\x20err'+'or:\x20found\x20'+'unclosed\x20t'+'ag=\x27'+_0x28cb8c['name']+'\x27'),{'symbols':_0x5ae9e2,'tags':null};const _0x5ed62d=FL(_0x59ad54,_0x5f9d0['length']);return{'symbols':_0x5f9d0,'tags':_0x5ed62d};}class kL{static['evaluate'](_0x4b696f){return NL(_0x4b696f);}}class UL{constructor(){this['count']=0x2137+0xdb*-0x26+-0xb5*0x1,this['quad']=0x2227+-0x1976+0x5*-0x1bd,this['lines']={},this['positions']=[],this['normals']=[],this['uvs']=[],this['colors']=[],this['indices']=[],this['outlines']=[],this['shadows']=[],this['meshInstan'+'ce']=null;}}function BL(_0x4626bb,_0x5205ac){const _0x30f601=new Ge(_0x4626bb);return _0x30f601['setPositio'+'ns'](_0x5205ac['positions']),_0x30f601['setNormals'](_0x5205ac['normals']),_0x30f601['setColors3'+'2'](_0x5205ac['colors']),_0x30f601['setUvs'](-0x1*-0x79+0xb34+-0xbad,_0x5205ac['uvs']),_0x30f601['setIndices'](_0x5205ac['indices']),_0x30f601['setVertexS'+'tream'](ko,_0x5205ac['outlines'],0x185f*0x1+-0x1ae1+0x285,void(0x641*0x2+0x2610+-0x3292),Ve,!(0x1*-0x1d10+-0x2e9+0x1ffa)),_0x30f601['setVertexS'+'tream'](Uo,_0x5205ac['shadows'],0x1*-0x17a3+-0x16b7+-0x2e5d*-0x1,void(-0x31*0x37+-0x1869+-0x8*-0x45e),Ve,!(0x1*-0xa84+-0xf5d+0x19e2)),_0x30f601['update'](),_0x30f601;}const Sg=/^[\r\n]$/,zL=/^[ \t]$/,yg=/^[ \t\-]|\u200b$/,VL=/^[a-z0-9]$/i,vg=/^[\u1100-\u11ff]|[\u3000-\u9fff\ua960-\ua97f]|[\uac00-\ud7ff]$/,GL=/^[]$/,HL=['','','','','','','','','','','','',''],WL={'width':0x0,'height':0x0,'xadvance':0x0,'xoffset':0x0,'yoffset':0x0},xg=new ie(),$L=new J(),We=new ie();class XL{constructor(_0x2c3d1e){this['_element']=_0x2c3d1e,this['_system']=_0x2c3d1e['system'],this['_entity']=_0x2c3d1e['entity'],this['_text']='',this['_symbols']=[],this['_colorPale'+'tte']=[],this['_outlinePa'+'lette']=[],this['_shadowPal'+'ette']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null,this['_i18nKey']=null,this['_fontAsset']=new PL(this['_system']['app']),this['_fontAsset']['disableLoc'+'alization']=!(0x1*0x19ba+-0x1e2f+-0x475*-0x1),this['_fontAsset']['on']('load',this['_onFontLoa'+'d'],this),this['_fontAsset']['on']('change',this['_onFontCha'+'nge'],this),this['_fontAsset']['on']('remove',this['_onFontRem'+'ove'],this),this['_font']=null,this['_color']=new ie(0x1322+-0x1c54+0x933,-0x1a1e+-0x2*0x437+0x131*0x1d,0xb*-0x2dd+0x2157*0x1+0x1d7*-0x1,0x1*0xb2a+-0xaaf+-0x7a),this['_colorUnif'+'orm']=new Float32Array(-0x4c5+0x26f3+-0x222b),this['_spacing']=0xf1*-0x10+-0x35*0x31+-0x1cd*-0xe,this['_fontSize']=0x138d+0x3*-0x46c+0x53*-0x13,this['_fontMinY']=0x356*-0x8+0x5*-0x360+0x2b90,this['_fontMaxY']=0x1b02*0x1+-0x42f+-0x16d3,this['_originalF'+'ontSize']=-0x59e+0x1637+0x1*-0x1079,this['_maxFontSi'+'ze']=0x149f+-0x2521+0x851*0x2,this['_minFontSi'+'ze']=-0x2017+0x1c6e+0x3b1,this['_autoFitWi'+'dth']=!(0x3*0x24b+0x153*-0x1a+-0x2*-0xdc7),this['_autoFitHe'+'ight']=!(0x198*0x1+-0x3*-0x3b7+-0x2*0x65e),this['_maxLines']=-(0x1*0x67c+0x295*-0x3+0x144),this['_lineHeigh'+'t']=-0x958+-0xc7e+0x15f6,this['_scaledLin'+'eHeight']=-0x1cb*0x6+-0x574*-0x1+0x56e,this['_wrapLines']=!(-0x5cb*0x1+-0xe51+-0x10f*-0x13),this['_drawOrder']=-0x190a+-0x2*0xba4+0x3052,this['_alignment']=new J(-0x238b+-0x3*-0x51a+0x143d+0.5,0x5*0x38e+-0x1*0x440+0x1*-0xd86+0.5),this['_autoWidth']=!(0x1*0x8ff+-0x48b*0x1+-0x474),this['_autoHeigh'+'t']=!(-0x2ab*0xb+-0x2b1*-0x1+0x1aa8),this['width']=-0x25ad+0xdf*0x16+-0x7*-0x2a5,this['height']=0x1dff+-0x1611+-0x7ee,this['_node']=new Ie(),this['_model']=new tr(),this['_model']['graph']=this['_node'],this['_entity']['addChild'](this['_node']),this['_meshInfo']=[],this['_material']=null,this['_aabbDirty']=!(-0x11*0x88+0xa79*-0x2+-0x1*-0x1dfa),this['_aabb']=new De(),this['_noResize']=!(-0x337+-0x1906+-0x2d3*-0xa),this['_currentMa'+'terialType']=null,this['_maskedMat'+'erialSrc']=null,this['_rtlReorde'+'r']=!(-0x2684+0x1319*0x1+-0x4*-0x4db),this['_unicodeCo'+'nverter']=!(0x6f7*-0x3+0x1*-0x67b+0x1b61),this['_rtl']=!(-0xa1*0xe+-0x21bb+0x2a8a),this['_outlineCo'+'lor']=new ie(0x2397+0x801+-0x2b98,-0xd0f*-0x2+-0x1ca4+0x286,-0xef2+-0x1b0e+0x2a00,0x13f+-0x4a0*0x1+0x362),this['_outlineCo'+'lorUniform']=new Float32Array(0x8b9+-0x1*0xfa6+-0x1*-0x6f1),this['_outlineTh'+'icknessSca'+'le']=-0x9a*0x3b+-0x138e+0xd*0x43c+0.2,this['_outlineTh'+'ickness']=0x3c2+0xcf2*-0x1+0x930,this['_shadowCol'+'or']=new ie(-0x75+-0xc4+-0x139*-0x1,0x2174+0x1af5+-0x3c69,-0xb*-0x31d+0x5a9+-0x27e8,-0x1f5*0xf+-0xfe*-0x4+0x1964),this['_shadowCol'+'orUniform']=new Float32Array(0x2597+-0x16c7+0x1*-0xecc),this['_shadowOff'+'setScale']=-0x202*0x11+0x1bc5*-0x1+-0x3de7*-0x1+0.005,this['_shadowOff'+'set']=new J(-0x2*-0xda4+-0x1b2b+0x1*-0x1d,0x1e95*-0x1+0xa*0x15d+0x10f3),this['_shadowOff'+'setUniform']=new Float32Array(-0x2c*0x59+0x18f5+0x9a7*-0x1),this['_enableMar'+'kup']=!(-0xfad+-0xdc1+0x37*0x89),this['_onScreenC'+'hange'](this['_element']['screen']),_0x2c3d1e['on']('resize',this['_onParentR'+'esize'],this),_0x2c3d1e['on']('set:screen',this['_onScreenC'+'hange'],this),_0x2c3d1e['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),_0x2c3d1e['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),_0x2c3d1e['on']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['on'](Sa['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['on']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['on']('data:remov'+'e',this['_onLocaliz'+'ationData'],this),this['_rangeStar'+'t']=-0xcae+-0x1*0x1ff3+-0x19*-0x1c9,this['_rangeEnd']=-0x1be9+0x1960+0x1*0x289;}['destroy'](){this['_setMateri'+'al'](null),this['_model']&&(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),this['_model']['destroy'](),this['_model']=null),this['_fontAsset']['destroy'](),this['font']=null,this['_element']['off']('resize',this['_onParentR'+'esize'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['off'](Sa['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['off']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['off']('data:remov'+'e',this['_onLocaliz'+'ationData'],this);}['_onParentR'+'esize'](_0x240cf8,_0x5bf51f){this['_noResize']||this['_font']&&this['_updateTex'+'t']();}['_onScreenC'+'hange'](_0x3c56bb){_0x3c56bb?this['_updateMat'+'erial'](_0x3c56bb['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(-0xbb3*0x1+-0x2379+0x2f2d*0x1));}['_onScreenS'+'paceChange'](_0x1dfc3d){this['_updateMat'+'erial'](_0x1dfc3d);}['_onDrawOrd'+'erChange'](_0x4832e9){if(this['_drawOrder']=_0x4832e9,this['_model']){for(let _0x333a49=-0x1*0x19ed+-0xc2a+-0x1*-0x2617,_0x5b7147=this['_model']['meshInstan'+'ces']['length'];_0x333a49<_0x5b7147;_0x333a49++)this['_model']['meshInstan'+'ces'][_0x333a49]['drawOrder']=_0x4832e9;}}['_onPivotCh'+'ange'](_0x2a5d7d){this['_font']&&this['_updateTex'+'t']();}['_onLocaleS'+'et'](_0x14beb8){if(this['_i18nKey']){if(this['fontAsset']){const _0x10788a=this['_system']['app']['assets']['get'](this['fontAsset']);(!_0x10788a||!_0x10788a['resource']||_0x10788a['resource']!==this['_font'])&&(this['font']=null);}this['_resetLoca'+'lizedText']();}}['_onLocaliz'+'ationData'](_0x24519f,_0x5a11cf){this['_i18nKey']&&_0x5a11cf[this['_i18nKey']]&&this['_resetLoca'+'lizedText']();}['_resetLoca'+'lizedText'](){this['_setText'](this['_system']['app']['i18n']['getText'](this['_i18nKey']));}['_setText'](_0x4c669c){if(this['unicodeCon'+'verter']){const _0x4e27dc=this['_system']['getUnicode'+'Converter']();_0x4e27dc?_0x4c669c=_0x4e27dc(_0x4c669c):console['warn']('Element\x20cr'+'eated\x20with'+'\x20unicodeCo'+'nverter\x20op'+'tion\x20but\x20n'+'o\x20unicodeC'+'onverter\x20f'+'unction\x20re'+'gistered');}this['_text']!==_0x4c669c&&(this['_font']&&this['_updateTex'+'t'](_0x4c669c),this['_text']=_0x4c669c);}['_updateTex'+'t'](_0x1f009b){let _0x354078;if(_0x1f009b===void(0x103+-0x1ee*-0xd+0x83*-0x33)&&(_0x1f009b=this['_text']),this['_symbols']=Tc['getSymbols'](_0x1f009b['normalize']?_0x1f009b['normalize']('NFC'):_0x1f009b),this['_symbols']['length']===0x6*0x2e8+0x9e2+-0x1b52&&(this['_symbols']=['\x20']),this['_enableMar'+'kup']){const _0x59bf45=kL['evaluate'](this['_symbols']);this['_symbols']=_0x59bf45['symbols'],_0x354078=_0x59bf45['tags']||[];}if(this['_rtlReorde'+'r']){const _0x114765=this['_system']['app']['systems']['element']['getRtlReor'+'der']();if(_0x114765){const _0x263854=_0x114765(this['_symbols']);this['_rtl']=_0x263854['rtl'],this['_symbols']=_0x263854['mapping']['map'](function(_0x195555){return this['_symbols'][_0x195555];},this),_0x354078&&(_0x354078=_0x263854['mapping']['map'](_0x87b064=>_0x354078[_0x87b064]));}else console['warn']('Element\x20cr'+'eated\x20with'+'\x20rtlReorde'+'r\x20option\x20b'+'ut\x20no\x20rtlR'+'eorder\x20fun'+'ction\x20regi'+'stered');}else this['_rtl']=!(0x205+0x21af+0x25*-0xf7);const _0x7b6346=(_0x153e0e,_0x44e11b)=>_0x153e0e['toString'](!(-0x7de+-0x1*-0x851+-0x73))['toLowerCas'+'e']()+':'+_0x44e11b['toFixed'](-0x1*0x2183+-0x478+0x25fd),_0x1f6429=(_0x5733f6,_0x39a10a)=>_0x5733f6['toString'](!(-0x4*-0x349+0x30d+-0x1031))['toLowerCas'+'e']()+':'+_0x39a10a['x']['toFixed'](-0xda+-0x67a*0x1+-0x6*-0x139)+':'+_0x39a10a['y']['toFixed'](-0x19e*-0x5+-0x114c+-0x3b*-0x28);if(_0x354078){const _0x2ba64d={},_0x2c3194={},_0x22f8ed={};this['_colorPale'+'tte']=[Math['round'](this['_color']['r']*(-0x23c0+0xd1a+0x17a5)),Math['round'](this['_color']['g']*(-0x13ac+0x10*-0x145+0xda9*0x3)),Math['round'](this['_color']['b']*(0x17e5+0x210f+-0x4b*0xbf))],this['_outlinePa'+'lette']=[Math['round'](this['_outlineCo'+'lor']['r']*(-0x18ee+0x3*0x6fc+0x4f9)),Math['round'](this['_outlineCo'+'lor']['g']*(-0x1dc9+-0xa31+-0x1*-0x28f9)),Math['round'](this['_outlineCo'+'lor']['b']*(0xfdb+0x1688+-0x2564)),Math['round'](this['_outlineCo'+'lor']['a']*(0x2f*0x1e+0x1*-0x17f3+0x1*0x1370)),Math['round'](this['_outlineTh'+'ickness']*(0x1*0x952+-0x192f+0x4*0x437))],this['_shadowPal'+'ette']=[Math['round'](this['_shadowCol'+'or']['r']*(-0x2*0x15d+-0x16bc+0x1a75)),Math['round'](this['_shadowCol'+'or']['g']*(0xf92+0x586+0x157*-0xf)),Math['round'](this['_shadowCol'+'or']['b']*(-0x18df+0x2427+-0xa49)),Math['round'](this['_shadowCol'+'or']['a']*(0x20d+-0x17a6+0x1698)),Math['round'](this['_shadowOff'+'set']['x']*(-0xffa+-0x155f*0x1+0x25d8)),Math['round'](this['_shadowOff'+'set']['y']*(-0x12f2+-0xac7+0x1e38))],this['_symbolCol'+'ors']=[],this['_symbolOut'+'lineParams']=[],this['_symbolSha'+'dowParams']=[],_0x2ba64d[this['_color']['toString'](!(-0x26ce+-0x3b7*-0x2+-0x1*-0x1f61))['toLowerCas'+'e']()]=-0x2083+-0x1f54+0x115*0x3b,_0x2c3194[_0x7b6346(this['_outlineCo'+'lor'],this['_outlineTh'+'ickness'])]=0x9e3+-0x1b6d+0x1c1*0xa,_0x22f8ed[_0x1f6429(this['_shadowCol'+'or'],this['_shadowOff'+'set'])]=0x1af3*-0x1+-0x1f85+-0x74f*-0x8;for(let _0x93b413=-0x2f4*0x9+0xc19*-0x1+0x26ad,_0x1756d6=this['_symbols']['length'];_0x93b413<_0x1756d6;++_0x93b413){const _0x5074c0=_0x354078[_0x93b413];let _0x36c66e=0xf09*0x2+-0x26e2+-0x4*-0x234;if(_0x5074c0&&_0x5074c0['color']&&_0x5074c0['color']['value']){const _0x2cc1a9=_0x5074c0['color']['value'];if(_0x2cc1a9['length']===-0x3a3*0x8+-0x1ef1*-0x1+-0x2*0xe9&&_0x2cc1a9[-0x59*-0x56+-0x4*0x8e6+0x5b2]==='#'){const _0x5c2ee2=_0x2cc1a9['substring'](0x13+-0x1*0x15c7+0x15b5)['toLowerCas'+'e']();_0x2ba64d['hasOwnProp'+'erty'](_0x5c2ee2)?_0x36c66e=_0x2ba64d[_0x5c2ee2]:/^[0-9a-f]{6}$/['test'](_0x5c2ee2)&&(_0x36c66e=this['_colorPale'+'tte']['length']/(-0xd01+-0x1*0x1d95+0x2a99),_0x2ba64d[_0x5c2ee2]=_0x36c66e,this['_colorPale'+'tte']['push'](parseInt(_0x5c2ee2['substring'](0x6*-0x1fd+0x4f1+0x6fd,0x190*-0xa+0x16e3+-0x26b*0x3),-0x19e6+-0x1*0x15b1+0x2fa7)),this['_colorPale'+'tte']['push'](parseInt(_0x5c2ee2['substring'](-0x2*0x531+-0xef+0xb53,-0x72*0x15+0x1b75+-0x1a5*0xb),0x1176+0x21ab+-0x3311)),this['_colorPale'+'tte']['push'](parseInt(_0x5c2ee2['substring'](0xcd9+0x98*0x19+-0x1bad,0x1273+-0x855+-0xa18),-0x175d+-0x113*0x7+0x1ef2)));}}this['_symbolCol'+'ors']['push'](_0x36c66e);let _0x5c5068=-0x152c+0xe35*-0x2+0x2*0x18cb;if(_0x5074c0&&_0x5074c0['outline']&&(_0x5074c0['outline']['attributes']['color']||_0x5074c0['outline']['attributes']['thickness'])){let _0x286a94=_0x5074c0['outline']['attributes']['color']?xg['fromString'](_0x5074c0['outline']['attributes']['color']):this['_outlineCo'+'lor'],_0x545cb1=Number(_0x5074c0['outline']['attributes']['thickness']);(Number['isNaN'](_0x286a94['r'])||Number['isNaN'](_0x286a94['g'])||Number['isNaN'](_0x286a94['b'])||Number['isNaN'](_0x286a94['a']))&&(_0x286a94=this['_outlineCo'+'lor']),Number['isNaN'](_0x545cb1)&&(_0x545cb1=this['_outlineTh'+'ickness']);const _0x193946=_0x7b6346(_0x286a94,_0x545cb1);_0x2c3194['hasOwnProp'+'erty'](_0x193946)?_0x5c5068=_0x2c3194[_0x193946]:(_0x5c5068=this['_outlinePa'+'lette']['length']/(0xa*0x350+0x856+0x1*-0x2971),_0x2c3194[_0x193946]=_0x5c5068,this['_outlinePa'+'lette']['push'](Math['round'](_0x286a94['r']*(-0xda*0x2b+-0x1*0x998+0x2f35)),Math['round'](_0x286a94['g']*(0x247e+0xc5+-0x16*0x1a6)),Math['round'](_0x286a94['b']*(-0x6f7*0x4+-0x117d+-0x2e58*-0x1)),Math['round'](_0x286a94['a']*(0xb43*0x2+0x11a2+-0x2729)),Math['round'](_0x545cb1*(-0x109e*0x2+-0x572+0x27ad))));}this['_symbolOut'+'lineParams']['push'](_0x5c5068);let _0x2b7939=0x2015+0xef0+-0x2f05;if(_0x5074c0&&_0x5074c0['shadow']&&(_0x5074c0['shadow']['attributes']['color']||_0x5074c0['shadow']['attributes']['offset']||_0x5074c0['shadow']['attributes']['offsetX']||_0x5074c0['shadow']['attributes']['offsetY'])){let _0x73df6a=_0x5074c0['shadow']['attributes']['color']?xg['fromString'](_0x5074c0['shadow']['attributes']['color']):this['_shadowCol'+'or'];const _0x306225=Number(_0x5074c0['shadow']['attributes']['offset']),_0x323be6=Number(_0x5074c0['shadow']['attributes']['offsetX']),_0x3e781e=Number(_0x5074c0['shadow']['attributes']['offsetY']);(Number['isNaN'](_0x73df6a['r'])||Number['isNaN'](_0x73df6a['g'])||Number['isNaN'](_0x73df6a['b'])||Number['isNaN'](_0x73df6a['a']))&&(_0x73df6a=this['_shadowCol'+'or']);const _0x4bd006=$L['set'](Number['isNaN'](_0x323be6)?Number['isNaN'](_0x306225)?this['_shadowOff'+'set']['x']:_0x306225:_0x323be6,Number['isNaN'](_0x3e781e)?Number['isNaN'](_0x306225)?this['_shadowOff'+'set']['y']:_0x306225:_0x3e781e),_0x3f569f=_0x1f6429(_0x73df6a,_0x4bd006);_0x22f8ed['hasOwnProp'+'erty'](_0x3f569f)?_0x2b7939=_0x22f8ed[_0x3f569f]:(_0x2b7939=this['_shadowPal'+'ette']['length']/(-0x1aa6+-0x220b*-0x1+0x25*-0x33),_0x22f8ed[_0x3f569f]=_0x2b7939,this['_shadowPal'+'ette']['push'](Math['round'](_0x73df6a['r']*(0x9*-0xc2+-0x2299+0x2a6a)),Math['round'](_0x73df6a['g']*(0x5*0x5db+0x4c+-0x1c94)),Math['round'](_0x73df6a['b']*(0x7cd+0xec3+-0x1591*0x1)),Math['round'](_0x73df6a['a']*(-0x1*-0xa2e+0x20cb+0x18e*-0x1b)),Math['round'](_0x4bd006['x']*(-0xa5*-0x29+-0xdb0+-0x61f*0x2)),Math['round'](_0x4bd006['y']*(-0x25a1+-0x211c+-0x2*-0x239e))));}this['_symbolSha'+'dowParams']['push'](_0x2b7939);}}else this['_colorPale'+'tte']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null;this['_updateMat'+'erialEmiss'+'ive'](),this['_updateMat'+'erialOutli'+'ne'](),this['_updateMat'+'erialShado'+'w']();const _0x293166=this['_calculate'+'CharsPerTe'+'xture']();let _0x121b19=!(-0x240d+0x1f24+0x4ea);const _0x3cb404=this['_element'],_0xc4811f=_0x3cb404['_isScreenS'+'pace'](),_0x320674=_0x3cb404['_isScreenC'+'ulled'](),_0x9f83e1=function(_0x173b50){return _0x3cb404['isVisibleF'+'orCamera'](_0x173b50);};for(let _0xdac24=-0x3c*0x3b+-0x12d5+0x20a9,_0x125ac1=this['_meshInfo']['length'];_0xdac24<_0x125ac1;_0xdac24++){const _0x202294=_0x293166[_0xdac24]||-0x1*-0xe99+-0x94b+0x2a7*-0x2,_0x2d18f0=this['_meshInfo'][_0xdac24];if(_0x2d18f0['count']!==_0x202294){if(_0x121b19||(_0x3cb404['removeMode'+'lFromLayer'+'s'](this['_model']),_0x121b19=!(0x2552*0x1+0x1125+-0x3677*0x1)),_0x2d18f0['count']=_0x202294,_0x2d18f0['positions']['length']=_0x2d18f0['normals']['length']=_0x202294*(0x1*-0x82c+-0x100f*-0x2+0x22d*-0xb)*(-0x1*0x1895+-0x186f+0x3108),_0x2d18f0['indices']['length']=_0x202294*(-0x568*0x1+0x35e+0x20d)*(0xeaa+0xda*-0x28+0x1368),_0x2d18f0['uvs']['length']=_0x202294*(-0xc43*0x3+0x533+-0xa88*-0x3)*(0x10e2+-0x1546+-0x11a*-0x4),_0x2d18f0['colors']['length']=_0x202294*(0x469+-0x962*-0x1+-0xdc7)*(-0x1*-0x153e+-0xdcb+-0x76f),_0x2d18f0['outlines']['length']=_0x202294*(0x67*0x15+-0x1739+0x277*0x6)*(-0x37*-0x79+-0x22*0xb5+-0x1f2),_0x2d18f0['shadows']['length']=_0x202294*(-0x1e84+0x2*-0x27a+0x5ea*0x6)*(0x1*0x11ab+0x15b3+0x307*-0xd),_0x2d18f0['meshInstan'+'ce']&&this['_removeMes'+'hInstance'](_0x2d18f0['meshInstan'+'ce']),_0x202294===-0x2*0x11ee+-0x1*0x2111+0xdc9*0x5){_0x2d18f0['meshInstan'+'ce']=null;continue;}for(let _0x48a3f5=0x13a0+-0xc89*0x2+0x572;_0x48a3f5<_0x202294;_0x48a3f5++)_0x2d18f0['indices'][_0x48a3f5*(0x241e+-0xce5+-0x1*0x1736)*(-0x1da5+-0x46a+-0x3c9*-0x9)+(0xa*-0x146+0x2345*0x1+-0x1689)]=_0x48a3f5*(0x1*0x12cd+0x23d9+0x103*-0x36),_0x2d18f0['indices'][_0x48a3f5*(0x301*-0x4+0x1347+-0x740)*(0x88+-0x23f*-0x6+0x1c*-0x80)+(-0x5a7+0x15b4+-0x100c)]=_0x48a3f5*(-0x12bb+-0x14*0x14a+-0x2c87*-0x1)+(-0xb15+0x127+0x1*0x9ef),_0x2d18f0['indices'][_0x48a3f5*(-0xf4a*0x2+0x1cfa+0x7*0x3b)*(-0x231c+-0x1*-0x22b9+0x65)+(0x12a9+-0x9cb+-0x8dc)]=_0x48a3f5*(-0x1d7e+-0x10e2+0x2e64)+(-0x1*-0x1e0b+-0x15a*0x1+-0x1cae),_0x2d18f0['indices'][_0x48a3f5*(-0x8*0x2+-0xb*-0xc7+-0x1*0x87a)*(0x562+0x4fd*0x7+-0x284b)+(-0x228e+0x1*0x6eb+0x1ba6*0x1)]=_0x48a3f5*(-0x227c+-0xde7*0x1+0x3067*0x1)+(0x1*-0x26d1+0x254*0xa+-0x1*-0xf8b),_0x2d18f0['indices'][_0x48a3f5*(-0x12be+0x25f8+0x1*-0x1337)*(0x1ece+-0x26d0+0x804)+(0x8fa+0x176f+-0x1*0x2065)]=_0x48a3f5*(-0xef0+-0x2704*0x1+0x35f8)+(-0x20+-0x474+0x497),_0x2d18f0['indices'][_0x48a3f5*(-0x43*0x65+0x2625+-0x257*0x5)*(-0x31*-0xf+0x2*0xf77+-0x21cb)+(0x67d*0x4+-0x1271+-0x77e*0x1)]=_0x48a3f5*(-0x23b+0x2197*-0x1+0x23d6)+(-0x15d*-0x17+0x250a*0x1+-0x4464),_0x2d18f0['normals'][_0x48a3f5*(0x9be+0xf40+-0x18fa)*(-0x373*0x1+0x1*0x203+-0x1*-0x173)+(-0x311*0x1+0x21a1+0x28c*-0xc)]=-0x3fd*0x2+-0xdb+0x8d5,_0x2d18f0['normals'][_0x48a3f5*(-0x2096+0xfa9+0x1*0x10f1)*(-0xfe*-0x7+0x1f18+-0xa5*0x3b)+(-0xc0c+0x1*-0x15ca+-0x1*-0x21d7)]=0xd80+0x1*-0x1a9c+-0x68e*-0x2,_0x2d18f0['normals'][_0x48a3f5*(-0x1*0x184d+0x1796+0xb*0x11)*(-0x15de+-0x2054*0x1+-0x1*-0x3635)+(-0x1dbc+-0xb19+0x2b9*0xf)]=-(0x111e*-0x2+-0x259f*-0x1+-0x362),_0x2d18f0['normals'][_0x48a3f5*(-0x156+0xb04+-0x9aa)*(-0x20c+-0x194d+0x1b5c)+(-0xeb*0x8+0x1d85+0xb15*-0x2)]=0x3*-0x8db+0x1184+0x90d,_0x2d18f0['normals'][_0x48a3f5*(0x5d9+0x190e+-0x1ee3)*(0x234a+0x1ed7+-0x421e)+(0xa*0x3c1+0xa61+-0x2fe7)]=-0x1a5b+0x20e*0x2+0x163f,_0x2d18f0['normals'][_0x48a3f5*(-0x1a7e+-0x1111*-0x1+0x971)*(0x1d*0x9a+-0x2276*0x1+0x1107)+(-0xcd5+-0x12*0xf9+0x1e5c)]=-(-0x24c5+0x1fd2+0x4f4),_0x2d18f0['normals'][_0x48a3f5*(-0x5f9*-0x2+-0x23fc+-0x2*-0xc07)*(-0x22c3*0x1+0x9eb*-0x1+-0x2cb1*-0x1)+(-0x1762+-0x15e1+-0x2d49*-0x1)]=0x2*0x1144+0x8ab+0x2b33*-0x1,_0x2d18f0['normals'][_0x48a3f5*(-0x417*-0x7+-0x2d7*-0x5+-0x5*0x890)*(-0x2655+0x2342+0x316)+(0x23f6+-0xea5+-0x2*0xaa5)]=-0x19ca+0x1c27*-0x1+0x35f1,_0x2d18f0['normals'][_0x48a3f5*(0x1537+0x1*-0x1b70+0x63d)*(-0x9ef+-0x2f*-0x1d+0x5b*0xd)+(0x2143+0x617+-0x2752)]=-(-0x8*-0x2bf+-0x20f2+0x3a9*0x3),_0x2d18f0['normals'][_0x48a3f5*(-0x7cf*-0x1+-0x1f*0x97+0xa7e)*(-0xd3*-0x9+0x1c38+-0x23a0)+(0x1*0xe83+0x24d0+-0x3f2*0xd)]=0xe7+-0x1*-0x1be6+-0x1ccd*0x1,_0x2d18f0['normals'][_0x48a3f5*(-0x167a+0xa07+0xc77)*(0x16b4*-0x1+0x18*-0x14e+0x3607)+(-0x1745+0xb2*-0x4+0x1a17)]=0x129a+0x1b04+0x16cf*-0x2,_0x2d18f0['normals'][_0x48a3f5*(0x16b*0x15+0x1*-0x17a+-0x1c49)*(-0x1461+-0xb*0x2db+-0x1*-0x33cd)+(0xc64*0x3+-0x2*-0xc9d+0x3*-0x14c9)]=-(-0x8e*-0x3f+0xe6e+-0x47d*0xb);const _0x303c54=BL(this['_system']['app']['graphicsDe'+'vice'],_0x2d18f0),_0x303bfe=new He(_0x303c54,this['_material'],this['_node']);if(_0x303bfe['name']='Text\x20Eleme'+'nt:\x20'+this['_entity']['name'],_0x303bfe['castShadow']=!(-0xac7*-0x2+0x1*-0x20a1+0xb14),_0x303bfe['receiveSha'+'dow']=!(0x194*0x12+-0x1799+-0x4ce),_0x303bfe['cull']=!_0xc4811f,_0x303bfe['screenSpac'+'e']=_0xc4811f,_0x303bfe['drawOrder']=this['_drawOrder'],_0x320674&&(_0x303bfe['cull']=!(-0x13a8+-0x5*0x1+0x13ad),_0x303bfe['isVisibleF'+'unc']=_0x9f83e1),this['_setTextur'+'eParams'](_0x303bfe,this['_font']['textures'][_0xdac24]),_0x303bfe['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']),_0x303bfe['setParamet'+'er']('material_o'+'pacity',this['_color']['a']),_0x303bfe['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x303bfe['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x303bfe['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0xdac24]['width']),_0x303bfe['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']),_0x303bfe['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']),_0x303bfe['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']),this['_symbolSha'+'dowParams'])this['_shadowOff'+'setUniform'][0x8*0x183+-0x100f+0x1d*0x23]=-0x1159+-0x22b8+0x3411,this['_shadowOff'+'setUniform'][-0x61f+-0x993+0x1*0xfb3]=-0x1*0x23a2+0xb44*0x1+0x185e;else{const _0x444806=-this['_font']['data']['info']['maps'][_0xdac24]['width']/this['_font']['data']['info']['maps'][_0xdac24]['height'];this['_shadowOff'+'setUniform'][0xebc+-0x1*0xd57+-0x165*0x1]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][-0xd5f*0x1+-0x14*0xa6+0x1a58]=_0x444806*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'];}_0x303bfe['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']),_0x2d18f0['meshInstan'+'ce']=_0x303bfe,this['_model']['meshInstan'+'ces']['push'](_0x303bfe);}}this['_element']['maskedBy']&&this['_element']['_setMasked'+'By'](this['_element']['maskedBy']),_0x121b19&&this['_element']['enabled']&&this['_entity']['enabled']&&this['_element']['addModelTo'+'Layers'](this['_model']),this['_updateMes'+'hes'](),this['_rangeStar'+'t']=0x2*0xcbb+0x6*-0x1e9+-0xe00,this['_rangeEnd']=this['_symbols']['length'],this['_updateRen'+'derRange']();}['_removeMes'+'hInstance'](_0x13a77a){_0x13a77a['destroy']();const _0x969ca7=this['_model']['meshInstan'+'ces']['indexOf'](_0x13a77a);_0x969ca7!==-(-0x201e+-0x1*-0x2287+0xe*-0x2c)&&this['_model']['meshInstan'+'ces']['splice'](_0x969ca7,0x1*0xe7b+0x3d*-0x47+-0x1*-0x271);}['_setMateri'+'al'](_0x59e341){if(this['_material']=_0x59e341,this['_model'])for(let _0x2418e5=0x20fc+-0x4e*0x14+0x6b9*-0x4,_0xf80af6=this['_model']['meshInstan'+'ces']['length'];_0x2418e5<_0xf80af6;_0x2418e5++){const _0x47821a=this['_model']['meshInstan'+'ces'][_0x2418e5];_0x47821a['material']=_0x59e341;}}['_updateMat'+'erial'](_0x5c366e){const _0xf31df3=this['_element'],_0x128623=_0xf31df3['_isScreenC'+'ulled'](),_0x48bd0f=function(_0x24d941){return _0xf31df3['isVisibleF'+'orCamera'](_0x24d941);},_0x379e12=this['_font']&&this['_font']['type']===dh;if(this['_material']=this['_system']['getTextEle'+'mentMateri'+'al'](_0x5c366e,_0x379e12,this['_enableMar'+'kup']),this['_model'])for(let _0x1ab663=0xce*0x8+0x1835*-0x1+0x11c5,_0x57d931=this['_model']['meshInstan'+'ces']['length'];_0x1ab663<_0x57d931;_0x1ab663++){const _0x47b5be=this['_model']['meshInstan'+'ces'][_0x1ab663];_0x47b5be['cull']=!_0x5c366e,_0x47b5be['material']=this['_material'],_0x47b5be['screenSpac'+'e']=_0x5c366e,_0x128623?(_0x47b5be['cull']=!(-0x1*-0x15a5+-0x17*-0x1+-0x15bc),_0x47b5be['isVisibleF'+'unc']=_0x48bd0f):_0x47b5be['isVisibleF'+'unc']=null;}}['_updateMat'+'erialEmiss'+'ive'](){this['_symbolCol'+'ors']?(this['_colorUnif'+'orm'][-0x635+-0x1360+0x1995]=-0x37*-0xb1+0x2047+0x176f*-0x3,this['_colorUnif'+'orm'][-0x2*0x4cd+-0x452+0xded]=0x13c1*0x1+-0x2c5*0xb+0xab7,this['_colorUnif'+'orm'][-0x1b4e+0x7*-0x260+0x2bf0]=-0x9f2+0x1a5a+-0x11*0xf7):(We['linear'](this['_color']),this['_colorUnif'+'orm'][-0x2457+-0x5*-0xc5+-0x103f*-0x2]=We['r'],this['_colorUnif'+'orm'][0x1*0x19c5+0x1*0x1499+-0x2e5d]=We['g'],this['_colorUnif'+'orm'][0x1593+-0xcf1*0x1+-0x8a0]=We['b']);}['_updateMat'+'erialOutli'+'ne'](){this['_symbolOut'+'lineParams']?(this['_outlineCo'+'lorUniform'][-0xe*0x278+0xbb7+0x16d9*0x1]=0x1*-0x71f+0x193f+-0x1220,this['_outlineCo'+'lorUniform'][0x12d*-0x3+-0x173c+0x2*0xd62]=-0x251e+0x11ed*0x1+0x1331,this['_outlineCo'+'lorUniform'][-0xf81+0x4c*-0x49+0x252f]=0x10be+0x15e7*-0x1+-0x1*-0x529,this['_outlineCo'+'lorUniform'][0x1447+-0x1d0b+0x141*0x7]=-0x2462+-0x37c*-0x1+0x20e7*0x1):(We['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][0x1*0x1ce2+0x6d9+0x23bb*-0x1]=We['r'],this['_outlineCo'+'lorUniform'][0x19ae+0x242e+0x3ddb*-0x1]=We['g'],this['_outlineCo'+'lorUniform'][-0xbc2*-0x2+0x1669+-0x92f*0x5]=We['b'],this['_outlineCo'+'lorUniform'][0x23c+0x1*-0xc7d+0xa44]=We['a']);}['_updateMat'+'erialShado'+'w'](){this['_symbolOut'+'lineParams']?(this['_shadowCol'+'orUniform'][-0xcdd+-0xae*-0x2f+-0x3d1*0x5]=-0x104a+0x2ae+-0x6ce*-0x2,this['_shadowCol'+'orUniform'][0x17e7*0x1+0x196d+0x57b*-0x9]=0x116e+0x3f*-0x67+0x7eb,this['_shadowCol'+'orUniform'][-0x19e1*-0x1+0xd08+-0x1b1*0x17]=0x2480+-0x1fd8+0x1*-0x4a8,this['_shadowCol'+'orUniform'][0x1*-0x931+-0x1bc6+-0x2*-0x127d]=0x17*0x125+-0xd65+-0xcee):(We['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][-0x14*-0x1e3+0x1*-0x1a5d+0x29*-0x47]=We['r'],this['_shadowCol'+'orUniform'][-0xc63+-0x1284+0x1ee8]=We['g'],this['_shadowCol'+'orUniform'][-0x51e*0x6+-0x10b4+-0xfce*-0x3]=We['b'],this['_shadowCol'+'orUniform'][0xa2a+0x10c9*0x1+-0x6bc*0x4]=We['a']);}['_isWordBou'+'ndary'](_0x32e40f){return yg['test'](_0x32e40f);}['_isValidNe'+'xtChar'](_0x492e07){return _0x492e07!==null&&!GL['test'](_0x492e07);}['_isNextCJK'+'Boundary'](_0x5ebf94,_0x4e2935){return vg['test'](_0x5ebf94)&&(yg['test'](_0x4e2935)||VL['test'](_0x4e2935));}['_isNextCJK'+'WholeWord'](_0x5f2af9){return vg['test'](_0x5f2af9);}['_updateMes'+'hes'](){const _0x297807=this['_font']['data'],_0x438755=this,_0x5f17dd=Math['min'](this['_minFontSi'+'ze'],this['_maxFontSi'+'ze']),_0x2848b2=this['_maxFontSi'+'ze'],_0x4cf140=this['_shouldAut'+'oFit']();_0x4cf140&&(this['_fontSize']=this['_maxFontSi'+'ze']);const _0x50f207=-0x2f*0xb1+0xd91*0x1+0x130e,_0x41dd11=this['_symbols']['length'];let _0x9710d3=-0xb*-0x2f9+-0x1188+-0x1*0xf2b,_0x2c6497=-0x894+-0xee*-0x20+-0x152c,_0x1da398=0xb46+0x2c*0x45+0x7*-0x34e,_0x659643=-0x134e+0x4*0x206+0xb36,_0x36edb8=-0x19e5+-0x22*0x29+-0xfac*-0x2,_0x65b483=-0x1*0x813+-0x1f0*-0x12+-0x3*0x8ef,_0x4113e3=0x329+-0xc*-0x1b4+-0x1799,_0x32b444=0x176d+0xa16+-0x175*0x17,_0x47b33b=0x1*-0x1399+-0x1*-0x243b+0x1*-0x10a2,_0x3a5fcc=-0x1f18+0x198b*-0x1+0x64b*0x9,_0x53e8a6=0x1233*0x2+0x17e9*0x1+-0x3c4f;const _0x45f8e6=Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])>=0x3ba+0x16dd+0x1*-0x1a97+0.0001;let _0x1268ba=this['_element']['calculated'+'Width'];(this['autoWidth']&&!_0x45f8e6||!this['_wrapLines'])&&(_0x1268ba=Number['POSITIVE_I'+'NFINITY']);let _0x2140a8=-0x254d+0x1*-0xf9+0x1*0x2646,_0x4bfe8c=0x53*-0x59+-0xa5f+-0x1*-0x273a,_0x5c20b2,_0xe57ddb,_0x47742b,_0x2d27a3;function _0x46219d(_0x41d523,_0x58bfb3,_0x54ce38){_0x438755['_lineWidth'+'s']['push'](Math['abs'](_0x54ce38));const _0x5f1d37=_0x32b444>_0x58bfb3?_0x58bfb3+(-0x1*0x44b+-0x214c+0x4*0x966):_0x32b444,_0x9b38c9=_0x32b444>_0x58bfb3?_0x32b444+(0x265*0x1+0x13db+-0x163f):_0x58bfb3,_0x4a91d1=_0x41d523['slice'](_0x5f1d37,_0x9b38c9);if(_0x53e8a6){let _0x277118=_0x4a91d1['length'];for(;_0x277118--&&_0x53e8a6>0x1939+-0x138b+-0x5ae;)Sg['test'](_0x4a91d1[_0x277118])&&(_0x4a91d1['splice'](_0x277118,0x4aa+-0xd0c+0x863),_0x53e8a6--);}_0x438755['_lineConte'+'nts']['push'](_0x4a91d1['join']('')),_0x9710d3=0x7f4+-0x54e+-0x2a6*0x1,_0x2c6497-=_0x438755['_scaledLin'+'eHeight'],_0x36edb8++,_0x47b33b=0x97a+0x2107+-0x2a81,_0x3a5fcc=0x116f+-0x2ab+-0xec4,_0x53e8a6=0x8*-0x486+-0x1*0x1b6e+-0x3f9e*-0x1,_0x65b483=0x1c82+-0x2167*-0x1+-0x3de9,_0x32b444=_0x58bfb3;}let _0x3c8cc2=!(-0x994+-0x6*0x122+0x1060);for(;_0x3c8cc2;){_0x3c8cc2=!(0xb2a+0x2*0x1277+-0x3017),_0x4cf140?this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t']*this['_fontSize']/(this['_maxFontSi'+'ze']||0x11f7+0x69d*-0x2+-0x4bd+0.0001):this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t'],this['width']=-0x761*-0x1+0x7b1+-0xf12,this['height']=0x635+-0x59c+-0x99,this['_lineWidth'+'s']=[],this['_lineConte'+'nts']=[],_0x9710d3=-0x3ad*-0x9+0x131*-0x1+-0x2*0xff2,_0x2c6497=-0x1e08+-0x9*0x3b4+0x5*0xcac,_0x1da398=-0x1f28*0x1+0x2*-0x134e+0x45c4,_0x659643=-0x2055+0x10*-0x6b+-0x7*-0x593,_0x36edb8=-0x1c98+-0x81*0x3f+0x3c58,_0x65b483=0xb07*-0x3+0x3da+-0x1*-0x1d3b,_0x4113e3=-0x1*-0x2221+0x10e0+-0x3301,_0x32b444=-0x19*0x2+0x1*0x10af+-0x107d,_0x47b33b=0x25cd+-0x8ba+-0x1*0x1d13,_0x3a5fcc=-0x20bf+-0x76e+0x282d,_0x53e8a6=0x242c+0xb2*0x10+-0x2f4c;const _0xd79249=this['_fontSize']/_0x50f207;_0x2140a8=this['_fontMinY']*_0xd79249,_0x4bfe8c=this['_fontMaxY']*_0xd79249;for(let _0x23afd2=-0x73+-0xdd7*-0x1+-0xd64;_0x23afd2<this['_meshInfo']['length'];_0x23afd2++)this['_meshInfo'][_0x23afd2]['quad']=0x20ce+0xb38+0x23*-0x142,this['_meshInfo'][_0x23afd2]['lines']={};let _0x37d32b=0x49*0x45+0x55*-0x29+-0x511*0x1,_0x3a3350=0x1ba*0x13+0x1e93+-0x1f31*0x2,_0x1dc807=-0x12*0xe8+-0x3*0xb1+-0x1*-0x1362,_0x5b0724=-0x7*-0x1ec+0x1aac+-0x2721+(0x1*0x2231+0x4*0x7a7+-0x3fce)*(0x245f*-0x1+-0x333*0x3+0x8*0x5df),_0x184e7f=-0x1dad+0x1d*0x4a+0x164a+(-0x2505+0x2189+-0x25*-0x1f)*(0x15f7+-0x13e4+-0xb*0x19),_0x55a7bf=0x670+0x133+-0x17*0x55,_0x3fee57=0x3*-0x773+0x2631+-0xed9+(0xe67+0x10a8+-0x1e10)*(-0x11a+0xf19+-0xcff),_0x22c0a0=0x2f*0x7f+-0xb46+0x7*-0x194+(0x1341*-0x1+0x220e+-0xdce)*(-0x67*0x52+-0x23f1+-0x45ef*-0x1),_0xce9c52=-0x220+0x925+-0x686+(0x11c3+-0x877+-0x8cd*0x1)*(0x1ae1+-0x2*-0x6a4+0x1*-0x2729);for(let _0x33c76c=0xceb*0x1+-0xbcf*0x1+0x11c*-0x1;_0x33c76c<_0x41dd11;_0x33c76c++){if(_0x5c20b2=this['_symbols'][_0x33c76c],_0x2d27a3=_0x33c76c+(0x2251+-0x224e+-0x2)>=_0x41dd11?null:this['_symbols'][_0x33c76c+(0xeb6+-0x23b9+0x5*0x434)],Sg['test'](_0x5c20b2)){_0x53e8a6++,(!this['_wrapLines']||this['_maxLines']<0x681+0x1*0x2493+-0x2b14||_0x36edb8<this['_maxLines'])&&(_0x46219d(this['_symbols'],_0x33c76c,_0x659643),_0x4113e3=_0x33c76c+(-0x2*0xc02+-0x11*0x182+-0x13*-0x29d),_0x32b444=_0x33c76c+(0x1*-0x649+0x1b28+-0x14de));continue;}let _0x19afb7=-0x1ef4+0x13c*-0x17+0x3b58,_0xf2012c=0x5*0x42d+-0x172e+0x24d*0x1,_0x406c13=-0x1f43+-0x270d+0x3e8*0x12,_0x24fbd4=0x3d*0x53+0x1*-0x194f+0x1*0x589,_0xfd2eec,_0x72be96;if(_0xe57ddb=_0x297807['chars'][_0x5c20b2],!_0xe57ddb){if(HL['indexOf'](_0x5c20b2)!==-(0x1e96+-0x1b25+-0x370))_0xe57ddb=WL;else{if(_0x297807['chars']['\x20'])_0xe57ddb=_0x297807['chars']['\x20'];else for(const _0x15f3bd in _0x297807['chars']){_0xe57ddb=_0x297807['chars'][_0x15f3bd];break;}_0x297807['missingCha'+'rs']||(_0x297807['missingCha'+'rs']=new Set()),_0x297807['missingCha'+'rs']['has'](_0x5c20b2)||(console['warn']('Character\x20'+'\x27'+_0x5c20b2+('\x27\x20is\x20missi'+'ng\x20from\x20th'+'e\x20font\x20')+_0x297807['info']['face']),_0x297807['missingCha'+'rs']['add'](_0x5c20b2));}}if(_0xe57ddb){let _0x29c4bc=-0x113f+0x11cf*-0x2+0x34dd;if(_0x3a5fcc>-0xde*-0xe+-0xa*-0x167+-0x1a2a){const _0x5dd658=this['_font']['data']['kerning'];if(_0x5dd658){const _0x4ff54a=_0x5dd658[Tc['getCodePoi'+'nt'](this['_symbols'][_0x33c76c-(-0x58d*-0x2+0x14a3+0xfde*-0x2)])||-0x123*0x19+0x6dd+0x158e];_0x4ff54a&&(_0x29c4bc=_0x4ff54a[Tc['getCodePoi'+'nt'](this['_symbols'][_0x33c76c])||-0x98*0xe+-0x1d60+0x25b0]||0x1*-0xb5+0x460*0x8+0x224b*-0x1);}}_0xfd2eec=_0xe57ddb['scale']||0x1df6+-0x22a9+0x4b4,_0x72be96=(_0xe57ddb['width']+_0xe57ddb['height'])/(0x1254+-0x2016+0xdc4*0x1),_0x24fbd4=_0xd79249*_0x72be96/_0xfd2eec,_0x406c13=(_0xe57ddb['xadvance']+_0x29c4bc)*_0xd79249,_0x19afb7=(_0xe57ddb['xoffset']-_0x29c4bc)*_0xd79249,_0xf2012c=_0xe57ddb['yoffset']*_0xd79249;}else console['error']('Couldn\x27t\x20s'+'ubstitute\x20'+'missing\x20ch'+'aracter:\x20\x27'+_0x5c20b2+'\x27');const _0x4d6d32=zL['test'](_0x5c20b2),_0x3dbb6e=_0xe57ddb&&_0xe57ddb['map']||0x1e2c+0x1*0x1871+-0x29*0x155,_0x4fcaaf=-this['_font']['data']['info']['maps'][_0x3dbb6e]['width']/this['_font']['data']['info']['maps'][_0x3dbb6e]['height'],_0x858769=this['_meshInfo'][_0x3dbb6e],_0x4a2262=_0x9710d3+this['_spacing']*_0x406c13;if(_0x4a2262>_0x1268ba&&_0x3a5fcc>0x3d6+0x9e9+-0xdbf&&!_0x4d6d32&&(this['_maxLines']<-0x757*-0x1+0xd2c+-0x1483||_0x36edb8<this['_maxLines'])){if(_0x47b33b===0x1*0x117b+0x16f9+-0x2874)_0x4113e3=_0x33c76c,_0x46219d(this['_symbols'],_0x33c76c,_0x659643);else{const _0x3e286a=Math['max'](_0x33c76c-_0x4113e3,-0x240f+0x8*-0x3c8+0x424f);if(this['_meshInfo']['length']<=-0xa35*0x2+-0x1053*-0x1+-0x20c*-0x2)_0x858769['lines'][_0x36edb8-(-0x2*-0xdff+-0x22b1*-0x1+-0x3eae)]-=_0x3e286a,_0x858769['quad']-=_0x3e286a;else{const _0x2650f9=_0x4113e3,_0x462a4e=_0x33c76c;for(let _0x5a0d1f=_0x2650f9;_0x5a0d1f<_0x462a4e;_0x5a0d1f++){const _0x55d930=this['_symbols'][_0x5a0d1f],_0x45642b=_0x297807['chars'][_0x55d930],_0x171c90=this['_meshInfo'][_0x45642b&&_0x45642b['map']||-0x2470+-0x2283+0x46f3];_0x171c90['lines'][_0x36edb8-(0x6d*-0x4e+0x1d3*0x3+-0x35*-0x86)]-=0x2c*0x49+-0x1e14+0x1189,_0x171c90['quad']-=0x1b02*-0x1+-0x20f+-0x7a*-0x3d;}}_0x33c76c-=_0x3e286a+(-0x1237*0x1+0x1c1*-0x13+-0x1c7*-0x1d),_0x46219d(this['_symbols'],_0x4113e3,_0x65b483);continue;}}_0x47742b=_0x858769['quad'],_0x858769['lines'][_0x36edb8-(0x11b7*0x1+-0x101*-0x1d+-0x2ed3*0x1)]=_0x47742b;let _0x32a1cf=_0x9710d3-_0x19afb7,_0x428b56=_0x32a1cf+_0x24fbd4;const _0x494799=_0x2c6497-_0xf2012c,_0xce539c=_0x494799+_0x24fbd4;if(this['_rtl']){const _0x140462=_0x24fbd4-_0x19afb7-this['_spacing']*_0x406c13-_0x19afb7;_0x32a1cf-=_0x140462,_0x428b56-=_0x140462;}_0x858769['positions'][_0x47742b*(-0x140+0x1dbf+-0x1c7b)*(0x188c+-0x1a1e+0x195)+(0x77c+-0x36d*-0xa+-0x29be)]=_0x32a1cf,_0x858769['positions'][_0x47742b*(0x1571*0x1+0x1663+-0x1*0x2bd0)*(0x1*0x10f5+-0x2a*0xc2+0xee2)+(0xb5f+0xfd1*-0x1+0x1*0x473)]=_0x494799,_0x858769['positions'][_0x47742b*(0xa8c+-0x3*0xa5e+0x1*0x1492)*(0x1955+0xe08*-0x2+-0x4e*-0x9)+(0xa79+0x6f7*0x4+-0x2653)]=_0x1da398,_0x858769['positions'][_0x47742b*(-0x2b1*-0xb+-0x1801+0x1*-0x596)*(0x14d2+-0x1*-0x3f1+-0x20*0xc6)+(-0x79d*-0x3+-0x40a+-0x12ca)]=_0x428b56,_0x858769['positions'][_0x47742b*(0xb60+-0xc56+0xfa)*(0x5*-0x350+-0x1a48+0x2adb)+(-0x1*-0x191b+-0x1e2d+0x7*0xba)]=_0x494799,_0x858769['positions'][_0x47742b*(-0x12f2+-0x108*-0x7+0x3*0x3ea)*(0x11c2*-0x1+-0x4bb*0x5+0x2*0x14b6)+(-0x20*0xe3+-0x55*-0x52+0x12b)]=_0x1da398,_0x858769['positions'][_0x47742b*(0x1841+-0x251*0x1+-0x15ec)*(-0xe24+-0xcfc+0x1b23)+(-0xcc6+0xb*-0x44+-0x4*-0x3ee)]=_0x428b56,_0x858769['positions'][_0x47742b*(-0xd8d*0x2+-0x1241+0x1*0x2d5f)*(0x250e+-0x4e4+0x1*-0x2027)+(-0x1aa9+-0xf3d+-0x1*-0x29ed)]=_0xce539c,_0x858769['positions'][_0x47742b*(-0x23c4+0x2a*-0xad+-0xbf*-0x56)*(-0xa*-0x157+0x336*-0x1+-0x5*0x209)+(-0x1c25+-0x1*-0x2702+0x3b*-0x2f)]=_0x1da398,_0x858769['positions'][_0x47742b*(0x6c8+-0x68*-0x54+0x28e4*-0x1)*(-0x1dd2+0x969+-0x2*-0xa36)+(0x6ae*-0x5+-0x6*0x4e9+0x3ee5)]=_0x32a1cf,_0x858769['positions'][_0x47742b*(0x2*-0x821+0x5ed+-0x1*-0xa59)*(-0x245c+-0x1710+0x3b6f*0x1)+(-0x1662+-0xd83+0x1*0x23ef)]=_0xce539c,_0x858769['positions'][_0x47742b*(-0x1282+-0x1b27+0x2dad)*(-0xba9+0x8ab*-0x4+-0x8*-0x5cb)+(0x19c9+-0x5*0x33a+-0x99c)]=_0x1da398,this['width']=Math['max'](this['width'],_0x4a2262);let _0x203b48;if(this['_shouldAut'+'oFitWidth']()&&this['width']>this['_element']['calculated'+'Width']&&(_0x203b48=Math['floor'](this['_element']['fontSize']*this['_element']['calculated'+'Width']/(this['width']||0xd1*-0x2f+0x6b9*-0x1+0x2d18+0.0001)),_0x203b48=Y['clamp'](_0x203b48,_0x5f17dd,_0x2848b2),_0x203b48!==this['_element']['fontSize'])){this['_fontSize']=_0x203b48,_0x3c8cc2=!(-0x125*0x11+-0x23*-0x6e+0x46b);break;}if(this['height']=Math['max'](this['height'],_0x4bfe8c-(_0x2c6497+_0x2140a8)),this['_shouldAut'+'oFitHeight']()&&this['height']>this['_element']['calculated'+'Height']&&(_0x203b48=Y['clamp'](this['_fontSize']-(0x2334*-0x1+0xc7b+0x16ba*0x1),_0x5f17dd,_0x2848b2),_0x203b48!==this['_element']['fontSize'])){this['_fontSize']=_0x203b48,_0x3c8cc2=!(0x3*0x590+0x1f04+-0x2b*0x11c);break;}_0x9710d3+=this['_spacing']*_0x406c13,_0x4d6d32||(_0x659643=_0x9710d3),(this['_isWordBou'+'ndary'](_0x5c20b2)||this['_isValidNe'+'xtChar'](_0x2d27a3)&&(this['_isNextCJK'+'Boundary'](_0x5c20b2,_0x2d27a3)||this['_isNextCJK'+'WholeWord'](_0x2d27a3)))&&(_0x47b33b++,_0x65b483=_0x659643,_0x4113e3=_0x33c76c+(0x111b*-0x1+-0x97*0x1+0x11b3)),_0x3a5fcc++;const _0x5a2b50=this['_getUv'](_0x5c20b2);if(_0x858769['uvs'][_0x47742b*(0xa*0x346+-0xc2d*-0x1+-0x2ce5)*(0x1bc7+-0x4*0x5f3+-0x1*0x3f9)+(-0x1a0f+0x1373*0x1+0x3*0x234)]=_0x5a2b50[-0x23b7*0x1+0xd37+0x1680],_0x858769['uvs'][_0x47742b*(-0x32b*0x1+0x1aa7+0xbbc*-0x2)*(0x2*-0xec1+-0x801*0x3+0x1*0x3587)+(-0x25cd+-0x175b+0x3d29)]=-0x2444+-0x2*0x12ea+0x4a19-_0x5a2b50[0x1095*0x1+0xb92+0x1c26*-0x1],_0x858769['uvs'][_0x47742b*(0x2*-0x12af+-0x3*0x56b+0x35a3)*(0xb27+0x5*0x25+0xe*-0xd9)+(0x1*-0x1f4b+0x987*0x4+-0x6cf)]=_0x5a2b50[0x13b5+-0x18a2*0x1+0x4ef],_0x858769['uvs'][_0x47742b*(0x17c3+0xbd4+0x1*-0x2393)*(0x187a+0x248e*0x1+-0x6b*0x92)+(-0x13*0x173+0x4a9+-0x15*-0x117)]=-0xc6a+0x236a+0x7*-0x349-_0x5a2b50[0x1c0f+0xa85+0x7d*-0x4f],_0x858769['uvs'][_0x47742b*(-0xeb5+0x203d+-0x76*0x26)*(-0x217b+0xecd*0x2+0x5*0xc7)+(0x26f+-0x12c3+0x1058)]=_0x5a2b50[0x20e0+-0x2c8+-0x1*0x1e16],_0x858769['uvs'][_0x47742b*(0x7c1+0x1*-0x142c+0x3*0x425)*(-0x1ba+0x3*0xbf1+0x2217*-0x1)+(0x1e65*-0x1+-0xb93*-0x3+0x44f*-0x1)]=-0x2f7*-0x1+0x1502+0x4*-0x5fe-_0x5a2b50[-0x23c5+0x14ee+0xeda],_0x858769['uvs'][_0x47742b*(-0x13b4+0x1efe+0x1e1*-0x6)*(0x3*0xb87+0x202e+-0x42c1*0x1)+(0x1321+-0x378+0x1*-0xfa3)]=_0x5a2b50[0x15*-0xf5+0x15*-0x171+-0x7*-0x732],_0x858769['uvs'][_0x47742b*(0x9*-0x44b+0x111e+0x1589)*(-0x4b3*-0x7+-0x16d7*-0x1+-0x3fb*0xe)+(-0x1*-0xf45+-0xe48+-0xf6)]=-0xf*0x1b7+-0x2559+-0xf1*-0x43-_0x5a2b50[0x251b+-0x72f+-0x1de9],this['_symbolCol'+'ors']){const _0x55fe78=this['_symbolCol'+'ors'][_0x33c76c]*(0x1a9e+0x1*0x1367+-0x2e02);_0x37d32b=this['_colorPale'+'tte'][_0x55fe78],_0x3a3350=this['_colorPale'+'tte'][_0x55fe78+(-0x7*-0x32f+0x767*-0x3+0x13*-0x1)],_0x1dc807=this['_colorPale'+'tte'][_0x55fe78+(0xbbd+0x223*0x6+-0x188d)];}if(_0x858769['colors'][_0x47742b*(0x354*-0x6+0x3e5*-0x7+0x2f3f)*(0x14d7+-0x20*-0x59+-0x1*0x1ff3)+(-0x940+-0x1a96+-0xb*-0x342)]=_0x37d32b,_0x858769['colors'][_0x47742b*(0x12b9+0x32+-0x12e7)*(-0x1*-0xb2f+-0x1*0x18ee+0x1*0xdc3)+(0x1183+0x2480+-0x3602)]=_0x3a3350,_0x858769['colors'][_0x47742b*(-0x9ad*-0x1+-0x6*-0x329+0x1af*-0x11)*(0x1*0xb8+-0x11e7+0x1133)+(0x853*-0x3+0x1971+-0x76)]=_0x1dc807,_0x858769['colors'][_0x47742b*(0x1ea+0x1b88+0x1*-0x1d6e)*(0x20d1+-0xee4*0x1+0x83*-0x23)+(-0x7e0+0xaf3+-0x310)]=0x1*-0xa29+0x959+-0x1*-0x1cf,_0x858769['colors'][_0x47742b*(0x3*0x26+0x37*-0x3b+0xc3f)*(-0x3cc+-0x17*0x48+0x8*0x149)+(-0x1469+-0xdd6+-0x4e5*-0x7)]=_0x37d32b,_0x858769['colors'][_0x47742b*(0x18be+0x5*-0xa6+-0x157c)*(-0x2028+-0x5da*0x1+-0x3e*-0x9d)+(-0x1*0xb95+0x26b0+-0x1b16)]=_0x3a3350,_0x858769['colors'][_0x47742b*(-0xfef+-0x1*0x1e01+0x2df4)*(-0xb31+-0x504+0x1039)+(0x184c+-0x3*0x5e7+-0x691)]=_0x1dc807,_0x858769['colors'][_0x47742b*(0x3*-0xcdb+0x2619+0x7c)*(-0x691+0x1fda+-0x1945)+(-0xa*0x95+0x1*-0x68c+0xc65)]=0x1d75+0xd63+-0x3*0xdf3,_0x858769['colors'][_0x47742b*(0x8*-0xf1+0x3*0xa36+-0x1716)*(0x1f*0x47+0x116+-0x9ab)+(-0x133*0x13+0x1605+-0x44*-0x3)]=_0x37d32b,_0x858769['colors'][_0x47742b*(-0x18b3*-0x1+0x2629+0xfb6*-0x4)*(-0x1926+0xad5+0x4c7*0x3)+(-0x3*0x8e9+-0x1*-0x20ff+0x1d*-0x37)]=_0x3a3350,_0x858769['colors'][_0x47742b*(-0x116f*-0x2+-0xea0+-0x143a)*(-0x1c32+-0x2221*-0x1+-0x5eb)+(0x1*-0x182e+0x2b0*-0xb+-0x1ae4*-0x2)]=_0x1dc807,_0x858769['colors'][_0x47742b*(0x112a+-0x8fa*-0x4+-0x2*0x1a87)*(0xd1*0x2+0x2589+-0x2727)+(0x1*0x1c99+-0x10d5*0x1+-0xbb9*0x1)]=0x5f*0x13+0xcce+-0x12dc,_0x858769['colors'][_0x47742b*(-0x23b3+0x16a*0x1+-0x224d*-0x1)*(0x1*-0x613+-0x8b*0xf+0xe3c)+(0xa2f+0x1147+-0x1b6a)]=_0x37d32b,_0x858769['colors'][_0x47742b*(-0x9*0x246+-0x29*0x25+-0x1a67*-0x1)*(0x236a+0xec5+-0x3*0x10b9)+(0x2*-0x1027+-0x1*0x856+0x28b1)]=_0x3a3350,_0x858769['colors'][_0x47742b*(-0x1*-0xe1e+-0xfe4+0x1*0x1ca)*(0x1eb2+-0xa74*-0x2+-0x3396)+(0x10ef*-0x1+-0x254f+0x364c)]=_0x1dc807,_0x858769['colors'][_0x47742b*(0x1204+-0xc0*0x1a+0x180)*(-0x2548+0x5*0x72b+0x175*0x1)+(0x1f*0x12f+-0x184a+-0xc58)]=0x9de+0x158+0x5*-0x20b,this['_symbolOut'+'lineParams']){const _0x523fcd=this['_symbolOut'+'lineParams'][_0x33c76c]*(0xa81+0x9d6+-0x1452);_0x5b0724=this['_outlinePa'+'lette'][_0x523fcd]+this['_outlinePa'+'lette'][_0x523fcd+(0x2553+0xbce*-0x1+-0x1984)]*(0x283+0x9*0x329+-0x1df4),_0x184e7f=this['_outlinePa'+'lette'][_0x523fcd+(-0x2190+0x75f*0x1+0x1*0x1a33)]+this['_outlinePa'+'lette'][_0x523fcd+(0x1495*0x1+0x79c*-0x1+-0xcf6)]*(0xa6a+0x2473+-0x2ddd),_0x55a7bf=this['_outlinePa'+'lette'][_0x523fcd+(-0x4*-0x7c3+-0x237a+0x472)];}if(_0x858769['outlines'][_0x47742b*(-0xef4+-0x66e*-0x5+-0x5ba*0x3)*(0x1abe+-0x1a3f*0x1+0x4*-0x1f)+(0x24d2+-0x17d1+0xd01*-0x1)]=_0x5b0724,_0x858769['outlines'][_0x47742b*(0x16*-0x14c+0x1878+0x414)*(0x2546+0x49+-0x258c)+(0x16f*-0x17+-0x1*0x13f5+0x3*0x11a5)]=_0x184e7f,_0x858769['outlines'][_0x47742b*(-0x254f+0x264d+0x19*-0xa)*(-0x1*0x23b+-0x1d82*-0x1+-0xda2*0x2)+(0x49*0x4+-0x153a*0x1+-0x8*-0x283)]=_0x55a7bf,_0x858769['outlines'][_0x47742b*(0x197e+-0x25*-0xac+0x192b*-0x2)*(-0xe93+-0xd3*0x4+0x11e2)+(0xfb5+-0x5d6+-0x4*0x277)]=_0x5b0724,_0x858769['outlines'][_0x47742b*(0x1*0xbc+0x19ba+-0x1a72)*(-0x8aa*-0x4+-0x190+-0x2115)+(-0x2*-0x485+-0x14b8+0x1f3*0x6)]=_0x184e7f,_0x858769['outlines'][_0x47742b*(0x1bb7+0xa67*-0x1+-0x114c)*(0xe1f+-0x1*0x8bf+-0x55d)+(-0xe21+0x72c+0x37d*0x2)]=_0x55a7bf,_0x858769['outlines'][_0x47742b*(-0x5*0x4f4+0x1*0xaa1+0xe27)*(-0x3b2*0x4+0xd*0x21f+-0xcc8)+(0x1f79+-0x104d+-0xf26)]=_0x5b0724,_0x858769['outlines'][_0x47742b*(0x4b*-0xf+0x1*-0x178f+0x1bf8)*(-0x2fd*0xd+-0x5*-0x5d5+0x9b3)+(-0xa6b+-0xe4e+0x18c0*0x1)]=_0x184e7f,_0x858769['outlines'][_0x47742b*(-0x1deb+-0x20*0xbe+0x35af)*(-0x26fb+0x1aa4+0xc5a)+(-0xaf9+0x57d*0x1+0x1*0x584)]=_0x55a7bf,_0x858769['outlines'][_0x47742b*(0x4*0x50b+0x9ff*-0x2+-0x2a)*(0x27a+0x7d5+-0xa4c)+(0x11e8+-0x287*0xd+0xefc)]=_0x5b0724,_0x858769['outlines'][_0x47742b*(-0x934+0x1*-0x1af+0xae7)*(-0xa*0x321+0x23*0xf2+-0x1c9)+(0x1441+0x946+-0x1d7d*0x1)]=_0x184e7f,_0x858769['outlines'][_0x47742b*(-0x19ae+-0x1*-0x149b+-0x517*-0x1)*(0x1cc4+-0x1e9+-0x35b*0x8)+(0x68f+0x3*0x35b+-0x1095)]=_0x55a7bf,this['_symbolSha'+'dowParams']){const _0x1874dd=this['_symbolSha'+'dowParams'][_0x33c76c]*(-0x1490+-0x1*0xc8f+0x2125);_0x3fee57=this['_shadowPal'+'ette'][_0x1874dd]+this['_shadowPal'+'ette'][_0x1874dd+(0x9a1+-0x1*0xb5a+-0xdd*-0x2)]*(-0xd3f+-0x1c9*-0x3+-0x4*-0x239),_0x22c0a0=this['_shadowPal'+'ette'][_0x1874dd+(0x9a9+-0x2708+0x1d61)]+this['_shadowPal'+'ette'][_0x1874dd+(-0x1*-0x2e3+-0x3fb+0x1*0x11b)]*(-0x2560+-0x2f*0xa7+0x4509),_0xce9c52=this['_shadowPal'+'ette'][_0x1874dd+(-0xd43+-0x1db*-0x2+-0x991*-0x1)]+(0xf1d+0x1cd9+0x3*-0xe7d)+Math['round'](_0x4fcaaf*this['_shadowPal'+'ette'][_0x1874dd+(-0x2259+0x13b9+0xea5)]+(0x2653+0x2*0x562+-0x3098))*(-0x3*0x77c+-0x6d9*-0x5+-0xac9);}_0x858769['shadows'][_0x47742b*(-0x2655*0x1+-0x1*0x2146+-0xc1*-0x5f)*(0x1*-0xeef+-0x8f0*0x1+-0x3*-0x7f6)+(0xf6e+0x2*-0xd55+-0x2*-0x59e)]=_0x3fee57,_0x858769['shadows'][_0x47742b*(-0x13ef+0x1e76+-0xa83)*(0x49*0x2+0x4c3*-0x1+0x434)+(0x20ac+0xbf1+0x2c9c*-0x1)]=_0x22c0a0,_0x858769['shadows'][_0x47742b*(0x493*-0x3+-0x2292+0x53*0x95)*(0xb*0x43+0x25*-0x11+0x23*-0x3)+(0x1f5c+-0xd48+-0x606*0x3)]=_0xce9c52,_0x858769['shadows'][_0x47742b*(0x2653+0x38+-0x2687)*(0x24c7+0x2*0x24b+-0x295a)+(-0x11cb+0x1*-0x1fbe+0x842*0x6)]=_0x3fee57,_0x858769['shadows'][_0x47742b*(-0x1*0x805+0x39+0x7d0)*(0x161b*-0x1+0xf94+0x68a)+(-0x85f+-0x871+-0x86a*-0x2)]=_0x22c0a0,_0x858769['shadows'][_0x47742b*(-0x11a5+-0x8*-0x286+-0x287)*(-0x2*0xd69+0x259c*-0x1+0x4071)+(-0xb64+-0x159c+0x1*0x2105)]=_0xce9c52,_0x858769['shadows'][_0x47742b*(0xd*0x2ce+-0x13*0xbc+-0x167e)*(-0x36*0x21+-0x13*0x1d+-0x920*-0x1)+(-0x5*0x35b+0x1fda+-0xf0d)]=_0x3fee57,_0x858769['shadows'][_0x47742b*(-0x1277+-0x1*-0x118d+-0x11*-0xe)*(-0x16*-0x15a+0x6f5*0x1+-0x1*0x24ae)+(-0x1*0x17e+-0x1*0x25ab+0x2730)]=_0x22c0a0,_0x858769['shadows'][_0x47742b*(-0x844+-0xbf4+0x143c)*(-0x29*-0x70+0x31*0x41+-0x1e5e)+(-0x5b*-0x37+-0x74f*-0x5+0x8*-0x702)]=_0xce9c52,_0x858769['shadows'][_0x47742b*(0x191d+-0x126a+-0x6af)*(0x817*0x1+-0x2*0x971+0xace)+(0x16a7+0x5*-0x31e+-0x708*0x1)]=_0x3fee57,_0x858769['shadows'][_0x47742b*(0x5*0x1e7+0x1dbb+-0x273a)*(-0x8f6+-0x10b+0x2*0x502)+(0x226b+0x1837*0x1+-0x8*0x753)]=_0x22c0a0,_0x858769['shadows'][_0x47742b*(0x1*0x49d+0x1*-0xdc1+0x928)*(0x2520+-0xc14*0x1+0x1d*-0xdd)+(0x3*-0xb51+-0x54*0x11+-0xa*-0x3f5)]=_0xce9c52,_0x858769['quad']++;}_0x3c8cc2||_0x32b444<_0x41dd11&&_0x46219d(this['_symbols'],_0x41dd11,_0x9710d3);}this['_noResize']=!(-0x1*-0x101+0x2bc+-0x1*0x3bd),this['autoWidth']=this['_autoWidth'],this['autoHeight']=this['_autoHeigh'+'t'],this['_noResize']=!(0x19f9+0x1a+-0x1a12);const _0x4107da=this['_element']['pivot']['x'],_0x170f2a=this['_element']['pivot']['y'],_0x4ea7fd=this['_alignment']['x'],_0x451a57=this['_alignment']['y'];for(let _0x555135=0x5*0x722+-0xe90+0x2*-0xa8d;_0x555135<this['_meshInfo']['length'];_0x555135++){if(this['_meshInfo'][_0x555135]['count']===-0x2495+-0x3f2+0x2887)continue;let _0x3e6666=0x6*0x74+-0xa8f+0xdf*0x9;for(const _0x372331 in this['_meshInfo'][_0x555135]['lines']){const _0x9c49ee=this['_meshInfo'][_0x555135]['lines'][_0x372331],_0x56198e=this['_lineWidth'+'s'][parseInt(_0x372331,0x120+-0x2491+0x1f*0x125)],_0x5538e0=-_0x4107da*this['_element']['calculated'+'Width']+_0x4ea7fd*(this['_element']['calculated'+'Width']-_0x56198e)*(this['_rtl']?-(-0x4*-0x7cc+0x2122+-0x4051):0x1*0xb5f+0x1525+-0x2083),_0x167851=(-0x1978+-0x6d3*0x5+0x3b98-_0x170f2a)*this['_element']['calculated'+'Height']-_0x4bfe8c-(0x1c8a+-0x36d*-0x6+-0xd5*0x3b-_0x451a57)*(this['_element']['calculated'+'Height']-this['height']);for(let _0x5d4e5a=_0x3e6666;_0x5d4e5a<=_0x9c49ee;_0x5d4e5a++)this['_meshInfo'][_0x555135]['positions'][_0x5d4e5a*(-0x3*0x6bf+0x3*-0x64b+0x2722)*(-0x8*-0x3c+-0x3*0x25f+0x540)]+=_0x5538e0,this['_meshInfo'][_0x555135]['positions'][_0x5d4e5a*(0x21ad+-0x2*-0x1073+-0x428f)*(0x1*0x1cfc+0x1843+-0xd4f*0x4)+(-0x1e56+-0x8af+-0x2*-0x1384)]+=_0x5538e0,this['_meshInfo'][_0x555135]['positions'][_0x5d4e5a*(-0x230c+-0x1*0x255b+-0x486b*-0x1)*(0x2444+0xed*-0x12+-0x3eb*0x5)+(-0x1*0x7ab+-0x119*-0x1f+-0x1a56)]+=_0x5538e0,this['_meshInfo'][_0x555135]['positions'][_0x5d4e5a*(-0xc8*0x4+-0x56*0x1b+0x6*0x209)*(0x1752+-0xb96+0x1*-0xbb9)+(-0x8cd*0x2+0x2*-0xf4d+0x303d)]+=_0x5538e0,this['_meshInfo'][_0x555135]['positions'][_0x5d4e5a*(0x1ea6+0x97f+0x2821*-0x1)*(-0x16de+-0x1175+0x2856)+(0x5d0+0x62d+-0xbfc)]+=_0x167851,this['_meshInfo'][_0x555135]['positions'][_0x5d4e5a*(0x21c1*-0x1+-0x1c89+0x3e4e)*(-0x2*0x1000+0x24*0xf5+-0x7d*0x5)+(0x14c7*-0x1+-0x26b8+0x3b83)]+=_0x167851,this['_meshInfo'][_0x555135]['positions'][_0x5d4e5a*(-0x67a*-0x1+-0x5f*-0x65+0x1*-0x2bf1)*(0x213*-0x10+0x214e+0x1b*-0x1)+(0x1*-0x11a7+-0xe96*0x2+0x2eda)]+=_0x167851,this['_meshInfo'][_0x555135]['positions'][_0x5d4e5a*(-0xbfd+0x150b+-0xb2*0xd)*(-0x128*0xd+0x229*-0xa+0x24a5)+(-0x2a5+0x1159+-0xeaa)]+=_0x167851;if(this['_rtl'])for(let _0x418526=_0x3e6666;_0x418526<=_0x9c49ee;_0x418526++){const _0x264db1=_0x418526*(0xf01*-0x1+-0x2609+0x350e)*(0x13*-0x95+0x1717+-0xc05);for(let _0x5a731a=-0x1*0x652+-0x1*0x1529+0x1b7b;_0x5a731a<0x8fc*0x2+0x1d39*-0x1+0xb45;++_0x5a731a)this['_meshInfo'][_0x555135]['positions'][_0x264db1+_0x5a731a*(-0x371*0x3+0x89*0x5+-0x25*-0x35)]=this['_element']['calculated'+'Width']-this['_meshInfo'][_0x555135]['positions'][_0x264db1+_0x5a731a*(-0x5c+0x1562+-0x3*0x701)]+_0x5538e0*(-0x3*0x75f+0x206a+-0xa4b);const _0x31fa57=this['_meshInfo'][_0x555135]['positions'][_0x264db1+(-0xd0*0x20+-0x1*0x1780+0x3183)],_0x2e2fbb=this['_meshInfo'][_0x555135]['positions'][_0x264db1+(-0x1*-0x1073+-0x11b3+-0xa3*-0x2)];this['_meshInfo'][_0x555135]['positions'][_0x264db1+(-0x4*-0x113+-0x266b*-0x1+-0x2ab4)]=this['_meshInfo'][_0x555135]['positions'][_0x264db1+(0x171f+0x3*-0x8d+0xabc*-0x2)],this['_meshInfo'][_0x555135]['positions'][_0x264db1+(0x3*0xc4b+0x2*0xd82+-0x3fdf)]=this['_meshInfo'][_0x555135]['positions'][_0x264db1+(0x94a+0x97*-0x3d+-0x137*-0x16)],this['_meshInfo'][_0x555135]['positions'][_0x264db1+(-0x26e0+0xbf4*-0x1+0x32d4)]=_0x31fa57,this['_meshInfo'][_0x555135]['positions'][_0x264db1+(-0x126c+0x2*-0xe2c+-0x1*-0x2ecd)]=_0x2e2fbb;}_0x3e6666=_0x9c49ee+(-0x2135+0x3*-0x7a0+0x3816);}const _0xf740a1=this['_meshInfo'][_0x555135]['count']*(0x23d2+0xe49+-0x3217),_0x5868b4=this['_meshInfo'][_0x555135]['quad']*(0x987+-0x5ef+-0x394),_0x2359a2=new Ao(this['_meshInfo'][_0x555135]['meshInstan'+'ce']['mesh']['vertexBuff'+'er']);for(let _0x24d90e=-0xd23+0x9c5*-0x3+0x2*0x1539;_0x24d90e<_0xf740a1;_0x24d90e++)_0x24d90e>=_0x5868b4?(_0x2359a2['element'][Pe]['set'](-0x1ce4+-0x4*0x443+0x2df0,0x1b47+0x7c+-0x1bc3,0x4c5*0x5+-0x2087*-0x1+0x1*-0x3860),_0x2359a2['element'][is]['set'](-0xd21+-0x6*0x42d+0x262f,-0xdd0+0xac+0x3a*0x3a),_0x2359a2['element'][Wt]['set'](-0x2114+0x258f+-0x47b,0x148c+0x209b+-0x1*0x3527,0x1f80+-0x1adf+-0xf*0x4f,-0x308*-0x3+-0xd8e*0x1+0x2*0x23b),_0x2359a2['element'][ko]['set'](-0x9*-0x1e3+0x1dbf+0x2*-0x175d,0x84a+-0x23e3*-0x1+-0x2c2d,0x18a6+-0xb06+-0xda0,-0x39*0x47+0xdc1+0x1*0x20e),_0x2359a2['element'][Uo]['set'](-0x9b6*-0x4+-0xd80+-0x1958,0x2fa*0xc+0x143a+-0x37f2,0x69f*0x1+-0x14c1+-0x25b*-0x6,-0x1*0x81b+-0x10f0+0x190b)):(_0x2359a2['element'][Pe]['set'](this['_meshInfo'][_0x555135]['positions'][_0x24d90e*(0x320*0x2+-0x1*0x107e+0x19*0x69)+(0x43*0x1+0x1*0x24a1+-0x6*0x626)],this['_meshInfo'][_0x555135]['positions'][_0x24d90e*(-0x40*-0x94+-0x197*0x5+-0x3*0x9ae)+(0x1d6+0x116c+-0x35*0x5d)],this['_meshInfo'][_0x555135]['positions'][_0x24d90e*(0x2035+-0x1115+0xf1d*-0x1)+(0xe1d*-0x2+-0xe75*0x2+0x3926)]),_0x2359a2['element'][is]['set'](this['_meshInfo'][_0x555135]['uvs'][_0x24d90e*(0x43*-0x86+0x1dce+-0x4b*-0x12)+(0x150b+-0x1fc3+0xab8)],this['_meshInfo'][_0x555135]['uvs'][_0x24d90e*(0x27*-0x53+-0xccf+0x1976*0x1)+(0xfec*-0x1+-0x1756*-0x1+-0x769)]),_0x2359a2['element'][Wt]['set'](this['_meshInfo'][_0x555135]['colors'][_0x24d90e*(0x3df*-0x5+0x9*-0x97+0x18ae)+(0xd*-0xa2+-0x24d1+0x377*0xd)],this['_meshInfo'][_0x555135]['colors'][_0x24d90e*(0x9fa+0x1*0x2509+-0x2eff)+(0x4db*0x8+-0x2577+-0x160)],this['_meshInfo'][_0x555135]['colors'][_0x24d90e*(-0x2b2*0xe+0x2*0x11f9+0x1ce)+(0x2*-0xc43+-0x6bf*-0x2+0x6*0x1d7)],this['_meshInfo'][_0x555135]['colors'][_0x24d90e*(0x12ac+0x4*-0x43f+-0x1ac*0x1)+(0x276+0x217d*-0x1+0x1f0a)]),_0x2359a2['element'][ko]['set'](this['_meshInfo'][_0x555135]['outlines'][_0x24d90e*(0x10*0x17+0x97a*0x2+-0x1461)+(-0x1*0xf6d+0xb13+0x45a)],this['_meshInfo'][_0x555135]['outlines'][_0x24d90e*(-0x2c7*-0x9+-0x23*-0xbc+-0x32b0)+(0x15b*0x10+0x909+-0x1eb8)],this['_meshInfo'][_0x555135]['outlines'][_0x24d90e*(-0x1795+-0x2*-0xd01+-0xce*0x3)+(0x16*0xaf+-0x1d7f*0x1+0xe77)]),_0x2359a2['element'][Uo]['set'](this['_meshInfo'][_0x555135]['shadows'][_0x24d90e*(0x4*0xc7+-0xa94*0x1+0x77b)+(-0x210c+0x2b1+-0x1e5b*-0x1)],this['_meshInfo'][_0x555135]['shadows'][_0x24d90e*(-0xed*0x1+0x3*0x25f+-0x62d)+(0x3*0x7a+0x1acf*-0x1+0x156*0x13)],this['_meshInfo'][_0x555135]['shadows'][_0x24d90e*(0x1ff*-0x8+-0x13*0x1e8+0x3433)+(-0x218+-0x9fd*-0x1+-0x7e3*0x1)])),_0x2359a2['next']();_0x2359a2['end'](),this['_meshInfo'][_0x555135]['meshInstan'+'ce']['mesh']['aabb']['compute'](this['_meshInfo'][_0x555135]['positions']),this['_meshInfo'][_0x555135]['meshInstan'+'ce']['_aabbVer']=-(0x4*0x167+-0xe*-0xb7+0x7*-0x23b);}this['_aabbDirty']=!(0x270a+0x127f+-0xb*0x53b);}['_onFontRen'+'der'](){this['font']=this['_font'];}['_onFontLoa'+'d'](_0x334238){this['font']!==_0x334238['resource']&&(this['font']=_0x334238['resource']);}['_onFontCha'+'nge'](_0x4c82a4,_0x31252f,_0x2eb360,_0x1fbcdc){if(_0x31252f==='data'){this['_font']['data']=_0x2eb360;const _0xe799e2=this['_font']['data']['info']['maps']['length'];for(let _0x331067=-0x2*0x909+-0xdcd*-0x1+-0x1*-0x445;_0x331067<_0xe799e2;_0x331067++){if(!this['_meshInfo'][_0x331067])continue;const _0x1099b3=this['_meshInfo'][_0x331067]['meshInstan'+'ce'];_0x1099b3&&(_0x1099b3['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x1099b3['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x1099b3['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x331067]['width']));}}}['_onFontRem'+'ove'](_0x5b929f){}['_setTextur'+'eParams'](_0x1107aa,_0x3ad237){this['_font']&&(this['_font']['type']===dh?(_0x1107aa['deletePara'+'meter']('texture_em'+'issiveMap'),_0x1107aa['deletePara'+'meter']('texture_op'+'acityMap'),_0x1107aa['setParamet'+'er']('texture_ms'+'dfMap',_0x3ad237)):this['_font']['type']===ML&&(_0x1107aa['deletePara'+'meter']('texture_ms'+'dfMap'),_0x1107aa['setParamet'+'er']('texture_em'+'issiveMap',_0x3ad237),_0x1107aa['setParamet'+'er']('texture_op'+'acityMap',_0x3ad237)));}['_getPxRang'+'e'](_0x5a7ed8){const _0x3f128e=Object['keys'](this['_font']['data']['chars']);for(let _0x2a01cc=0xffd*0x1+0x2*-0x959+0x2b5;_0x2a01cc<_0x3f128e['length'];_0x2a01cc++){const _0x5886aa=this['_font']['data']['chars'][_0x3f128e[_0x2a01cc]];if(_0x5886aa['range'])return(_0x5886aa['scale']||0x406*0x5+0xfc1*-0x1+-0x45c)*_0x5886aa['range'];}return-0x1*-0x1f1b+-0x163*0x6+0x77*-0x31;}['_getUv'](_0x2bb798){const _0x344d20=this['_font']['data'];if(!_0x344d20['chars'][_0x2bb798])return _0x344d20['chars']['\x20']?this['_getUv']('\x20'):[0xd4*0xe+-0x19b8+0xe20,0x2630+-0x2515+-0x11b,-0x14f8+-0x3e*-0x76+-0x79c,-0x1*0x2525+-0x10b5+-0x1*-0x35da];const _0x134616=_0x344d20['chars'][_0x2bb798]['map'],_0x5badba=_0x344d20['info']['maps'][_0x134616]['width'],_0x341af8=_0x344d20['info']['maps'][_0x134616]['height'],_0x5d01fd=_0x344d20['chars'][_0x2bb798]['x'],_0x29fd49=_0x344d20['chars'][_0x2bb798]['y'],_0x3e10e4=_0x5d01fd,_0x4a6f33=_0x29fd49,_0x1a9b20=_0x5d01fd+_0x344d20['chars'][_0x2bb798]['width'],_0x109c14=_0x29fd49-_0x344d20['chars'][_0x2bb798]['height'],_0x4ff4b2=-0x1*-0xde5+0x2069*-0x1+-0xb*-0x1af-_0x344d20['chars'][_0x2bb798]['height']/_0x341af8;return[_0x3e10e4/_0x5badba,_0x4ff4b2-_0x4a6f33/_0x341af8,_0x1a9b20/_0x5badba,_0x4ff4b2-_0x109c14/_0x341af8];}['onEnable'](){this['_fontAsset']['autoLoad']=!(-0x1411+-0x9a5*-0x3+-0x8de),this['_model']&&this['_element']['addModelTo'+'Layers'](this['_model']);}['onDisable'](){this['_fontAsset']['autoLoad']=!(-0x25c8+-0x26b1+0x4c7a),this['_model']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']);}['_setStenci'+'l'](_0x1e62a1){if(this['_model']){const _0x451716=this['_model']['meshInstan'+'ces'];for(let _0x1ed715=0x23c8+0x13ed+0x449*-0xd;_0x1ed715<_0x451716['length'];_0x1ed715++)_0x451716[_0x1ed715]['stencilFro'+'nt']=_0x1e62a1,_0x451716[_0x1ed715]['stencilBac'+'k']=_0x1e62a1;}}['_shouldAut'+'oFitWidth'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth'];}['_shouldAut'+'oFitHeight'](){return this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_shouldAut'+'oFit'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth']||this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_calculate'+'CharsPerTe'+'xture'](_0x50c7c0){const _0x4ff43a={};_0x50c7c0===void(0x197d+-0x548*0x5+0xeb)&&(_0x50c7c0=this['_symbols']['length']);for(let _0x7c80a1=0x43*0xd+0x1603+-0x196a*0x1,_0x131865=_0x50c7c0;_0x7c80a1<_0x131865;_0x7c80a1++){const _0x22c544=this['_symbols'][_0x7c80a1];let _0x3db7ad=this['_font']['data']['chars'][_0x22c544];_0x3db7ad||(_0x3db7ad=this['_font']['data']['chars']['\x20'],_0x3db7ad||(_0x3db7ad=this['_font']['data']['chars'][Object['keys'](this['_font']['data']['chars'])[0x2630+-0x8b*-0xd+-0x2d3f]]));const _0x4729e9=_0x3db7ad['map'];_0x4ff43a[_0x4729e9]?_0x4ff43a[_0x4729e9]++:_0x4ff43a[_0x4729e9]=0x4bd*-0x3+0x2*-0x31a+0x2*0xa36;}return _0x4ff43a;}['_updateRen'+'derRange'](){const _0x10b0f2=this['_rangeStar'+'t']===-0x1331+-0x1fd7+0x47*0xb8?-0x190a+0x1*0x107+0x1803:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeStar'+'t']),_0x285faf=this['_rangeEnd']===0x2*-0x4c7+0xc0+0x8ce?-0x4c8+-0x59*-0x20+-0x658:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeEnd']);for(let _0x50bc88=-0x1529*-0x1+-0x1f42+-0xeb*-0xb,_0x5ab1c5=this['_meshInfo']['length'];_0x50bc88<_0x5ab1c5;_0x50bc88++){const _0xc8026c=_0x10b0f2[_0x50bc88]||-0x67*-0x22+0x13*-0x207+0x18d7*0x1,_0x12f33b=_0x285faf[_0x50bc88]||0x1*0x4c7+0x16da+-0x1ba1,_0x1983df=this['_meshInfo'][_0x50bc88]['meshInstan'+'ce'];if(_0x1983df){const _0x586ad8=_0x1983df['mesh'];_0x586ad8&&(_0x586ad8['primitive'][-0x1f7d+0xca7+-0x96b*-0x2]['base']=_0xc8026c*(0x20c4+0x2495+-0x1*0x4556)*(-0x2*-0x502+0x25ec+-0x2fee),_0x586ad8['primitive'][-0x29*-0x6b+-0x478+-0xcab]['count']=(_0x12f33b-_0xc8026c)*(-0x824+0x61*0x17+-0x90)*(0x193c+0x92*0x5+-0x4ae*0x6));}}}set['text'](_0x284f0a){this['_i18nKey']=null;const _0x33c3fa=_0x284f0a!=null&&_0x284f0a['toString']()||'';this['_setText'](_0x33c3fa);}get['text'](){return this['_text'];}set['key'](_0x911cec){const _0x38b136=_0x911cec!==null?_0x911cec['toString']():null;this['_i18nKey']!==_0x38b136&&(this['_i18nKey']=_0x38b136,_0x38b136?(this['_fontAsset']['disableLoc'+'alization']=!(0x14*-0xe9+0x18e0+-0x6ab*0x1),this['_resetLoca'+'lizedText']()):this['_fontAsset']['disableLoc'+'alization']=!(-0x683*-0x3+0x21f+-0xe*0x18c));}get['key'](){return this['_i18nKey'];}set['color'](_0x483acb){const _0x46ca6d=_0x483acb['r'],_0x11e5b5=_0x483acb['g'],_0x96a8f6=_0x483acb['b'];if(this['_color']===_0x483acb&&console['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t'),!(this['_color']['r']===_0x46ca6d&&this['_color']['g']===_0x11e5b5&&this['_color']['b']===_0x96a8f6)&&(this['_color']['r']=_0x46ca6d,this['_color']['g']=_0x11e5b5,this['_color']['b']=_0x96a8f6,!!this['_model'])){if(this['_symbolCol'+'ors'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_color']),this['_colorUnif'+'orm'][0x8bc*-0x1+0x243c+0x8*-0x370]=We['r'],this['_colorUnif'+'orm'][-0x173+0x253*-0x2+0xb*0x8e]=We['g'],this['_colorUnif'+'orm'][0x25*-0x7f+-0x1bb6*0x1+0x2e13]=We['b'];for(let _0x9bdc30=-0x1c9f+-0x1*-0x1771+-0x22*-0x27,_0x349826=this['_model']['meshInstan'+'ces']['length'];_0x9bdc30<_0x349826;_0x9bdc30++)this['_model']['meshInstan'+'ces'][_0x9bdc30]['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}this['_element']&&this['_element']['fire']('set:color',this['_color']);}}get['color'](){return this['_color'];}set['opacity'](_0x3fd712){if(this['_color']['a']!==_0x3fd712&&(this['_color']['a']=_0x3fd712,this['_model'])){for(let _0x4a23be=-0x47*-0x65+-0x33*-0x9e+-0x3b7d,_0x3bd77d=this['_model']['meshInstan'+'ces']['length'];_0x4a23be<_0x3bd77d;_0x4a23be++)this['_model']['meshInstan'+'ces'][_0x4a23be]['setParamet'+'er']('material_o'+'pacity',_0x3fd712);}this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x3fd712);}get['opacity'](){return this['_color']['a'];}set['lineHeight'](_0x38ebcc){const _0x21ba45=this['_lineHeigh'+'t'];this['_lineHeigh'+'t']=_0x38ebcc,this['_scaledLin'+'eHeight']=_0x38ebcc,_0x21ba45!==_0x38ebcc&&this['_font']&&this['_updateTex'+'t']();}get['lineHeight'](){return this['_lineHeigh'+'t'];}set['wrapLines'](_0x5beeef){const _0x566a69=this['_wrapLines'];this['_wrapLines']=_0x5beeef,_0x566a69!==_0x5beeef&&this['_font']&&this['_updateTex'+'t']();}get['wrapLines'](){return this['_wrapLines'];}get['lines'](){return this['_lineConte'+'nts'];}set['spacing'](_0x32a8ef){const _0x570efd=this['_spacing'];this['_spacing']=_0x32a8ef,_0x570efd!==_0x32a8ef&&this['_font']&&this['_updateTex'+'t']();}get['spacing'](){return this['_spacing'];}set['fontSize'](_0x1c3e83){const _0x2848f9=this['_fontSize'];this['_fontSize']=_0x1c3e83,this['_originalF'+'ontSize']=_0x1c3e83,_0x2848f9!==_0x1c3e83&&this['_font']&&this['_updateTex'+'t']();}get['fontSize'](){return this['_fontSize'];}set['fontAsset'](_0x3df311){this['_fontAsset']['defaultAss'+'et']=_0x3df311;}get['fontAsset'](){return this['_fontAsset']['localizedA'+'sset'];}set['font'](_0x13c99f){let _0x574f86;if(this['_font']&&(_0x574f86=this['_font']['type'],this['_font']['off']&&this['_font']['off']('render',this['_onFontRen'+'der'],this)),this['_font']=_0x13c99f,this['_fontMinY']=-0xd81*0x1+0x22ef+-0x156e*0x1,this['_fontMaxY']=0x1*-0x12df+-0x1ba6+0x2e85,!_0x13c99f)return;const _0x14ee75=this['_font']['data'];for(const _0x43a8c6 in _0x14ee75['chars']){const _0x4132a1=_0x14ee75['chars'][_0x43a8c6];_0x4132a1['bounds']&&(this['_fontMinY']=Math['min'](this['_fontMinY'],_0x4132a1['bounds'][0x2567+-0x1d36*-0x1+-0x429c]),this['_fontMaxY']=Math['max'](this['_fontMaxY'],_0x4132a1['bounds'][0x231d*-0x1+-0x850+0x2b7*0x10]));}if(this['_font']['on']&&this['_font']['on']('render',this['_onFontRen'+'der'],this),this['_fontAsset']['localizedA'+'sset']&&this['_system']['app']['assets']['get'](this['_fontAsset']['localizedA'+'sset'])['resource']!==this['_font']&&(this['_fontAsset']['defaultAss'+'et']=null),_0x13c99f['type']!==_0x574f86){const _0x3e187b=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x3e187b);}for(let _0x3c453e=0x22f7*-0x1+0x31b+0x1fdc,_0x20a5a9=this['_font']['textures']['length'];_0x3c453e<_0x20a5a9;_0x3c453e++)if(!this['_meshInfo'][_0x3c453e])this['_meshInfo'][_0x3c453e]=new UL();else{const _0x429f76=this['_meshInfo'][_0x3c453e]['meshInstan'+'ce'];_0x429f76&&(_0x429f76['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x429f76['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x429f76['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x3c453e]['width']),this['_setTextur'+'eParams'](_0x429f76,this['_font']['textures'][_0x3c453e]));}let _0x390b83=!(0x1*0x1177+0xdaa+0x8*-0x3e4);for(let _0x132065=this['_font']['textures']['length'];_0x132065<this['_meshInfo']['length'];_0x132065++)this['_meshInfo'][_0x132065]['meshInstan'+'ce']&&(_0x390b83||(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),_0x390b83=!(0x198+-0x23f+0xa7)),this['_removeMes'+'hInstance'](this['_meshInfo'][_0x132065]['meshInstan'+'ce']));this['_meshInfo']['length']>this['_font']['textures']['length']&&(this['_meshInfo']['length']=this['_font']['textures']['length']),this['_updateTex'+'t']();}get['font'](){return this['_font'];}set['alignment'](_0x5896ef){_0x5896ef instanceof J?this['_alignment']['set'](_0x5896ef['x'],_0x5896ef['y']):this['_alignment']['set'](_0x5896ef[-0x1a91*-0x1+-0x11*-0xa9+-0x25ca],_0x5896ef[0x8*0x353+0x9*0x16a+0x2751*-0x1]),this['_font']&&this['_updateTex'+'t']();}get['alignment'](){return this['_alignment'];}set['autoWidth'](_0x355b28){const _0x5cd67e=this['_autoWidth'];if(this['_autoWidth']=_0x355b28,_0x355b28&&Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])<-0xe*0xb5+-0x2365+0x90f*0x5+0.0001&&(this['_element']['width']=this['width']),_0x5cd67e!==_0x355b28){const _0x28c2ed=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x28c2ed!==this['_fontSize']&&(this['_fontSize']=_0x28c2ed,this['_font']&&this['_updateTex'+'t']());}}get['autoWidth'](){return this['_autoWidth'];}set['autoHeight'](_0xe0e589){const _0x1e7a30=this['_autoHeigh'+'t'];if(this['_autoHeigh'+'t']=_0xe0e589,_0xe0e589&&Math['abs'](this['_element']['anchor']['y']-this['_element']['anchor']['w'])<-0x18a*-0x16+0x5*-0x4a5+-0xaa3+0.0001&&(this['_element']['height']=this['height']),_0x1e7a30!==_0xe0e589){const _0x1d56c2=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x1d56c2!==this['_fontSize']&&(this['_fontSize']=_0x1d56c2,this['_font']&&this['_updateTex'+'t']());}}get['autoHeight'](){return this['_autoHeigh'+'t'];}set['rtlReorder'](_0x214ffd){this['_rtlReorde'+'r']!==_0x214ffd&&(this['_rtlReorde'+'r']=_0x214ffd,this['_font']&&this['_updateTex'+'t']());}get['rtlReorder'](){return this['_rtlReorde'+'r'];}set['unicodeCon'+'verter'](_0x3ef153){this['_unicodeCo'+'nverter']!==_0x3ef153&&(this['_unicodeCo'+'nverter']=_0x3ef153,this['_setText'](this['_text']));}get['unicodeCon'+'verter'](){return this['_unicodeCo'+'nverter'];}get['aabb'](){if(this['_aabbDirty']){let _0x5bf12e=!(0x45*0x21+-0xbb7+0x2d3*0x1);for(let _0x1be39b=-0x24*-0x1b+0x587+0x953*-0x1;_0x1be39b<this['_meshInfo']['length'];_0x1be39b++)this['_meshInfo'][_0x1be39b]['meshInstan'+'ce']&&(_0x5bf12e?this['_aabb']['add'](this['_meshInfo'][_0x1be39b]['meshInstan'+'ce']['aabb']):(this['_aabb']['copy'](this['_meshInfo'][_0x1be39b]['meshInstan'+'ce']['aabb']),_0x5bf12e=!(-0x1c68+-0x2*-0x11d+0x1a2e*0x1)));this['_aabbDirty']=!(-0x2f*-0xb3+0x738+-0x2814);}return this['_aabb'];}set['outlineCol'+'or'](_0xfb29a){const _0x421d71=_0xfb29a instanceof ie?_0xfb29a['r']:_0xfb29a[-0xc*-0x2f9+0x649+-0x29f5],_0xdb80a0=_0xfb29a instanceof ie?_0xfb29a['g']:_0xfb29a[-0xd89+0x133*0x6+-0x2*-0x32c],_0x319a87=_0xfb29a instanceof ie?_0xfb29a['b']:_0xfb29a[-0x1c56+0x6d1*-0x2+0x2*0x14fd],_0x5eaf1f=_0xfb29a instanceof ie?_0xfb29a['a']:_0xfb29a[-0x1574+0xe9*0x11+0x5fe];if(this['_outlineCo'+'lor']===_0xfb29a&&console['warn']('Setting\x20el'+'ement.outl'+'ineColor\x20t'+'o\x20itself\x20w'+'ill\x20have\x20n'+'o\x20effect'),!(this['_outlineCo'+'lor']['r']===_0x421d71&&this['_outlineCo'+'lor']['g']===_0xdb80a0&&this['_outlineCo'+'lor']['b']===_0x319a87&&this['_outlineCo'+'lor']['a']===_0x5eaf1f)&&(this['_outlineCo'+'lor']['r']=_0x421d71,this['_outlineCo'+'lor']['g']=_0xdb80a0,this['_outlineCo'+'lor']['b']=_0x319a87,this['_outlineCo'+'lor']['a']=_0x5eaf1f,!!this['_model'])){if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][0x7fa*0x1+0x6e6+-0xee0]=We['r'],this['_outlineCo'+'lorUniform'][0x214*0x1+-0x52c+0x319]=We['g'],this['_outlineCo'+'lorUniform'][-0x5*0x102+0x1619*0x1+0x2d*-0x61]=We['b'],this['_outlineCo'+'lorUniform'][-0x1*0x11f+-0x1*-0x19f6+-0x7*0x38c]=We['a'];for(let _0x4720e1=-0x24a4+0xb9*0x27+0x875,_0x535bb9=this['_model']['meshInstan'+'ces']['length'];_0x4720e1<_0x535bb9;_0x4720e1++)this['_model']['meshInstan'+'ces'][_0x4720e1]['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']);}this['_element']&&this['_element']['fire']('set:outlin'+'e',this['_color']);}}get['outlineCol'+'or'](){return this['_outlineCo'+'lor'];}set['outlineThi'+'ckness'](_0x2253db){const _0x22fade=this['_outlineTh'+'ickness'];if(this['_outlineTh'+'ickness']=_0x2253db,_0x22fade!==_0x2253db&&this['_font']){if(!this['_model'])return;if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{for(let _0x4d3852=0x245e+-0x15*0x1d+0x317*-0xb,_0x23f2ab=this['_model']['meshInstan'+'ces']['length'];_0x4d3852<_0x23f2ab;_0x4d3852++)this['_model']['meshInstan'+'ces'][_0x4d3852]['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']);}}}get['outlineThi'+'ckness'](){return this['_outlineTh'+'ickness'];}set['shadowColo'+'r'](_0x342a96){const _0x331750=_0x342a96 instanceof ie?_0x342a96['r']:_0x342a96[0x9a3+-0x569*-0x2+-0x1*0x1475],_0x44a475=_0x342a96 instanceof ie?_0x342a96['g']:_0x342a96[-0x2*0xb11+-0x1c76+0x3299*0x1],_0xa22d7e=_0x342a96 instanceof ie?_0x342a96['b']:_0x342a96[-0x1f69+0x11*0xb+0x1eb0*0x1],_0x2273d7=_0x342a96 instanceof ie?_0x342a96['a']:_0x342a96[-0x10f*0x2+-0x1c00+0x1e21];if(this['_shadowCol'+'or']===_0x342a96&&w['warn']('Setting\x20el'+'ement.shad'+'owColor\x20to'+'\x20itself\x20wi'+'ll\x20have\x20no'+'\x20effect'),!(this['_shadowCol'+'or']['r']===_0x331750&&this['_shadowCol'+'or']['g']===_0x44a475&&this['_shadowCol'+'or']['b']===_0xa22d7e&&this['_shadowCol'+'or']['a']===_0x2273d7)&&(this['_shadowCol'+'or']['r']=_0x331750,this['_shadowCol'+'or']['g']=_0x44a475,this['_shadowCol'+'or']['b']=_0xa22d7e,this['_shadowCol'+'or']['a']=_0x2273d7,!!this['_model'])){if(this['_symbolSha'+'dowParams'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][0x24*-0xff+0x10*-0x44+0x281c]=We['r'],this['_shadowCol'+'orUniform'][0x134+-0xc49+0xb16]=We['g'],this['_shadowCol'+'orUniform'][-0x12d0+0xe9+0x11e9]=We['b'],this['_shadowCol'+'orUniform'][0x19b7*0x1+-0x42*-0x69+-0x2*0x1a63]=We['a'];for(let _0x5cd8dd=0x2*-0xbf5+0xc64+0xb86,_0x218d21=this['_model']['meshInstan'+'ces']['length'];_0x5cd8dd<_0x218d21;_0x5cd8dd++)this['_model']['meshInstan'+'ces'][_0x5cd8dd]['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']);}}}get['shadowColo'+'r'](){return this['_shadowCol'+'or'];}set['shadowOffs'+'et'](_0x3d2b9a){const _0x29c1e0=_0x3d2b9a instanceof J?_0x3d2b9a['x']:_0x3d2b9a[-0x2092+0x615+0x1a7d*0x1],_0x22b8f0=_0x3d2b9a instanceof J?_0x3d2b9a['y']:_0x3d2b9a[-0x2e+-0x122*-0x1d+-0x20ab*0x1];if(!(this['_shadowOff'+'set']['x']===_0x29c1e0&&this['_shadowOff'+'set']['y']===_0x22b8f0)&&(this['_shadowOff'+'set']['set'](_0x29c1e0,_0x22b8f0),this['_font']&&this['_model'])){if(this['_symbolSha'+'dowParams'])this['_updateTex'+'t']();else for(let _0x21e612=-0xf44+0x41c+0xb28,_0xb57b8=this['_model']['meshInstan'+'ces']['length'];_0x21e612<_0xb57b8;_0x21e612++){const _0x3e1c7c=-this['_font']['data']['info']['maps'][_0x21e612]['width']/this['_font']['data']['info']['maps'][_0x21e612]['height'];this['_shadowOff'+'setUniform'][0x242f+-0x107c+0x3*-0x691]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][-0x1*-0x568+-0x1625*-0x1+-0x2*0xdc6]=_0x3e1c7c*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'],this['_model']['meshInstan'+'ces'][_0x21e612]['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']);}}}get['shadowOffs'+'et'](){return this['_shadowOff'+'set'];}set['minFontSiz'+'e'](_0x1367ab){this['_minFontSi'+'ze']!==_0x1367ab&&(this['_minFontSi'+'ze']=_0x1367ab,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['minFontSiz'+'e'](){return this['_minFontSi'+'ze'];}set['maxFontSiz'+'e'](_0x6d08ae){this['_maxFontSi'+'ze']!==_0x6d08ae&&(this['_maxFontSi'+'ze']=_0x6d08ae,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['maxFontSiz'+'e'](){return this['_maxFontSi'+'ze'];}set['autoFitWid'+'th'](_0x388341){this['_autoFitWi'+'dth']!==_0x388341&&(this['_autoFitWi'+'dth']=_0x388341,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitWid'+'th'](){return this['_autoFitWi'+'dth'];}set['autoFitHei'+'ght'](_0xc57bb1){this['_autoFitHe'+'ight']!==_0xc57bb1&&(this['_autoFitHe'+'ight']=_0xc57bb1,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitHei'+'ght'](){return this['_autoFitHe'+'ight'];}set['maxLines'](_0x28086b){this['_maxLines']!==_0x28086b&&(_0x28086b===null&&this['_maxLines']===-(0x7fd*0x1+-0x1365+0xb69)||(this['_maxLines']=_0x28086b===null?-(0x9e6+0x26b4+0x3bd*-0xd):_0x28086b,this['font']&&this['_wrapLines']&&this['_updateTex'+'t']()));}get['maxLines'](){return this['_maxLines'];}set['enableMark'+'up'](_0x4c67c8){if(_0x4c67c8=!!_0x4c67c8,this['_enableMar'+'kup']===_0x4c67c8)return;this['_enableMar'+'kup']=_0x4c67c8,this['font']&&this['_updateTex'+'t']();const _0x289870=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x289870);}get['enableMark'+'up'](){return this['_enableMar'+'kup'];}get['symbols'](){return this['_symbols'];}get['symbolColo'+'rs'](){return this['_symbolCol'+'ors']===null?null:this['_symbolCol'+'ors']['map'](function(_0x5f0840){return this['_colorPale'+'tte']['slice'](_0x5f0840*(0x19c+-0x23a9*-0x1+-0x2542),_0x5f0840*(0xd5d+0x3e2*0x7+-0x8*0x511)+(-0x1*-0x347+-0x1f80+0x1c3c));},this);}get['symbolOutl'+'ineParams'](){return this['_symbolOut'+'lineParams']===null?null:this['_symbolOut'+'lineParams']['map'](function(_0x481ec5){return this['_outlinePa'+'lette']['slice'](_0x481ec5*(-0x6f7+0x3f*0x8b+-0x65*0x45),_0x481ec5*(0x268c*0x1+-0x21e9+-0x49e)+(-0x11*0x134+0x20c0+0x1c1*-0x7));},this);}get['symbolShad'+'owParams'](){return this['_symbolSha'+'dowParams']===null?null:this['_symbolSha'+'dowParams']['map'](function(_0x29fa9e){return this['_shadowPal'+'ette']['slice'](_0x29fa9e*(-0x2112+-0x4e6+0x25fe),_0x29fa9e*(0x20b*-0x9+0x53*0x6+0x1077)+(-0x3*0x434+-0x1*-0xef0+-0x24e));},this);}get['rtl'](){return this['_rtl'];}set['rangeStart'](_0x296c69){_0x296c69=Math['max'](-0x2f*0x20+-0x1015*0x1+0x4d*0x49,Math['min'](_0x296c69,this['_symbols']['length'])),_0x296c69!==this['_rangeStar'+'t']&&(this['_rangeStar'+'t']=_0x296c69,this['_updateRen'+'derRange']());}get['rangeStart'](){return this['_rangeStar'+'t'];}set['rangeEnd'](_0xfd5bf5){_0xfd5bf5=Math['max'](this['_rangeStar'+'t'],Math['min'](_0xfd5bf5,this['_symbols']['length'])),_0xfd5bf5!==this['_rangeEnd']&&(this['_rangeEnd']=_0xfd5bf5,this['_updateRen'+'derRange']());}get['rangeEnd'](){return this['_rangeEnd'];}}const tf=new D(),Tg=new te(),Pi=new D(),qL=new D(),ws=new te(),dc=new te(),fc=new te(),za=new te();class hs extends we{constructor(_0x32cc98,_0x487616){super(_0x32cc98,_0x487616),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_beingInit'+'ialized']=!(0x2ba*0x2+-0x1f03+0x1990),this['_anchor']=new re(),this['_localAnch'+'or']=new re(),this['_pivot']=new J(),this['_width']=this['_calculate'+'dWidth']=0x403*0x7+-0xd46+0x15*-0xb3,this['_height']=this['_calculate'+'dHeight']=0x4*-0x6f6+-0x628+-0x9c*-0x38,this['_margin']=new re(0x9c9*-0x1+-0xdf*0x15+0x1c14,0x6bc+-0xf97+0x8db,-(-0x1d0c+-0x14e+-0x53*-0x5e),-(0x2579+0x16da+0xb*-0x579)),this['_modelTran'+'sform']=new te(),this['_screenToW'+'orld']=new te(),this['_anchorTra'+'nsform']=new te(),this['_anchorDir'+'ty']=!(-0x12aa*-0x1+-0x2409+0x1*0x115f),this['_parentWor'+'ldTransfor'+'m']=new te(),this['_screenTra'+'nsform']=new te(),this['_screenCor'+'ners']=[new D(),new D(),new D(),new D()],this['_canvasCor'+'ners']=[new J(),new J(),new J(),new J()],this['_worldCorn'+'ers']=[new D(),new D(),new D(),new D()],this['_cornersDi'+'rty']=!(0x249d+-0x20e2+-0x3bb),this['_canvasCor'+'nersDirty']=!(-0x13f0+0x13*-0x205+0x3a4f),this['_worldCorn'+'ersDirty']=!(0x1*-0x338+-0x88+-0x3*-0x140),this['entity']['on']('insert',this['_onInsert'],this),this['_patch'](),this['screen']=null,this['_type']=Lc,this['_image']=null,this['_text']=null,this['_group']=null,this['_drawOrder']=-0x372+0x10*0x193+-0xb*0x1fa,this['_fitMode']=Rc,this['_useInput']=!(-0xf58+0x8a*-0x3f+0xd*0x3cb),this['_layers']=[Sl],this['_addedMode'+'ls']=[],this['_batchGrou'+'pId']=-(-0x9*0x26+0x198+-0x41),this['_batchGrou'+'p']=null,this['_offsetRea'+'dAt']=0x6d*0xb+-0x1eb+-0x6*0x76,this['_maskOffse'+'t']=-0xa9f+-0x7*-0x343+-0xc36+0.5,this['_maskedBy']=null);}get['data'](){const _0x3261eb=this['system']['store'][this['entity']['getGuid']()];return _0x3261eb?_0x3261eb['data']:null;}set['enabled'](_0xf953b0){const _0x3860d6=this['data'],_0x1db07f=_0x3860d6['enabled'];_0x3860d6['enabled']=_0xf953b0,this['fire']('set','enabled',_0x1db07f,_0xf953b0);}get['enabled'](){return this['data']['enabled'];}get['_absLeft'](){return this['_localAnch'+'or']['x']+this['_margin']['x'];}get['_absRight'](){return this['_localAnch'+'or']['z']-this['_margin']['z'];}get['_absTop'](){return this['_localAnch'+'or']['w']-this['_margin']['w'];}get['_absBottom'](){return this['_localAnch'+'or']['y']+this['_margin']['y'];}get['_hasSplitA'+'nchorsX'](){return Math['abs'](this['_anchor']['x']-this['_anchor']['z'])>0x2669+0x1*-0xc11+-0x1a58+0.001;}get['_hasSplitA'+'nchorsY'](){return Math['abs'](this['_anchor']['y']-this['_anchor']['w'])>0x14f5+0x2a5*-0x9+0x2d8+0.001;}get['aabb'](){return this['_image']?this['_image']['aabb']:this['_text']?this['_text']['aabb']:null;}set['anchor'](_0x412eaa){_0x412eaa instanceof re?this['_anchor']['copy'](_0x412eaa):this['_anchor']['set'](..._0x412eaa),!this['entity']['_parent']&&!this['screen']?this['_calculate'+'LocalAncho'+'rs']():this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['_anchorDir'+'ty']=!(0x9b1*-0x3+0x3*-0x4d9+-0x15cf*-0x2),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:anchor',this['_anchor']);}get['anchor'](){return this['_anchor'];}set['batchGroup'+'Id'](_0x251d01){var _0x409dbf,_0x2bc401;this['_batchGrou'+'pId']!==_0x251d01&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0x6b9*0x2+-0x1*0x1a8c+-0x2b*-0x4e&&((_0x409dbf=this['system']['app']['batcher'])==null||_0x409dbf['remove'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x251d01>=0x2475+0x9*-0x455+0x51*0x8&&((_0x2bc401=this['system']['app']['batcher'])==null||_0x2bc401['insert'](St['ELEMENT'],_0x251d01,this['entity'])),_0x251d01<0x1*0x2474+0x211e+-0x4592&&this['_batchGrou'+'pId']>=0x25c4+0x24b5+-0x4a79&&this['enabled']&&this['entity']['enabled']&&(this['_image']&&this['_image']['_renderabl'+'e']['model']?this['addModelTo'+'Layers'](this['_image']['_renderabl'+'e']['model']):this['_text']&&this['_text']['_model']&&this['addModelTo'+'Layers'](this['_text']['_model'])),this['_batchGrou'+'pId']=_0x251d01);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['bottom'](_0x4fe5db){this['_margin']['y']=_0x4fe5db;const _0x5c9fc2=this['entity']['getLocalPo'+'sition'](),_0x35b9f8=this['_absTop'],_0x13e950=this['_localAnch'+'or']['y']+_0x4fe5db;this['_setHeight'](_0x35b9f8-_0x13e950),_0x5c9fc2['y']=_0x4fe5db+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x5c9fc2);}get['bottom'](){return this['_margin']['y'];}set['calculated'+'Width'](_0xbab77){this['_setCalcul'+'atedWidth'](_0xbab77,!(0x1f4b+-0x1501+0x2*-0x525));}get['calculated'+'Width'](){return this['_calculate'+'dWidth'];}set['calculated'+'Height'](_0x1c0e04){this['_setCalcul'+'atedHeight'](_0x1c0e04,!(0x1*-0x68d+0x1*0xa57+-0x3ca));}get['calculated'+'Height'](){return this['_calculate'+'dHeight'];}get['canvasCorn'+'ers'](){if(!this['_canvasCor'+'nersDirty']||!this['screen']||!this['screen']['screen']['screenSpac'+'e'])return this['_canvasCor'+'ners'];const _0x589a9d=this['system']['app']['graphicsDe'+'vice'],_0x1749aa=this['screenCorn'+'ers'],_0x49ac21=_0x589a9d['canvas']['clientWidt'+'h']/_0x589a9d['width'],_0x4f9f0e=_0x589a9d['canvas']['clientHeig'+'ht']/_0x589a9d['height'];for(let _0x301f03=-0x22ac+0x1c2b*-0x1+0x3ed7;_0x301f03<0x12bb+-0x47b+-0x4*0x38f;_0x301f03++)this['_canvasCor'+'ners'][_0x301f03]['set'](_0x1749aa[_0x301f03]['x']*_0x49ac21,(_0x589a9d['height']-_0x1749aa[_0x301f03]['y'])*_0x4f9f0e);return this['_canvasCor'+'nersDirty']=!(0x191c+0x1*-0xc04+-0xd17),this['_canvasCor'+'ners'];}set['drawOrder'](_0x56c49b){let _0x1d7f00=-0x24fe+-0x9ef+0x2eed*0x1;this['screen']&&(_0x1d7f00=this['screen']['screen']['priority']),_0x56c49b>-0xb45ca0+0x4068ce+0x173f3d1&&(w['warn']('Element.dr'+'awOrder\x20la'+'rger\x20than\x20'+'max\x20size\x20o'+'f:\x201677721'+'5'),_0x56c49b=0x43*0x3363e+-0x109fdd2+0x132cb97),this['_drawOrder']=(_0x1d7f00<<-0x575*-0x3+-0x1a27+0x9e0*0x1)+_0x56c49b,this['fire']('set:drawor'+'der',this['_drawOrder']);}get['drawOrder'](){return this['_drawOrder'];}set['height'](_0x447fb2){this['_height']=_0x447fb2,this['_hasSplitA'+'nchorsY']||this['_setCalcul'+'atedHeight'](_0x447fb2,!(-0x1*-0x1149+0xf7d+0x1063*-0x2)),this['fire']('set:height',this['_height']);}get['height'](){return this['_height'];}set['layers'](_0x32e62b){if(this['_addedMode'+'ls']['length'])for(let _0x1160fe=-0x705*0x1+-0x1ac9*0x1+0x21ce;_0x1160fe<this['_layers']['length'];_0x1160fe++){const _0x334037=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x1160fe]);if(_0x334037){for(let _0x3a49f4=0x321+-0xcc0+0x3*0x335;_0x3a49f4<this['_addedMode'+'ls']['length'];_0x3a49f4++)_0x334037['removeMesh'+'Instances'](this['_addedMode'+'ls'][_0x3a49f4]['meshInstan'+'ces']);}}if(this['_layers']=_0x32e62b,!(!this['enabled']||!this['entity']['enabled']||!this['_addedMode'+'ls']['length']))for(let _0x52cdd8=-0x47f*-0x7+-0x2e7*-0x2+-0x2547;_0x52cdd8<this['_layers']['length'];_0x52cdd8++){const _0x1abc46=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x52cdd8]);if(_0x1abc46){for(let _0x40af35=-0x14fb+0xe6*-0x18+0x2a8b;_0x40af35<this['_addedMode'+'ls']['length'];_0x40af35++)_0x1abc46['addMeshIns'+'tances'](this['_addedMode'+'ls'][_0x40af35]['meshInstan'+'ces']);}}}get['layers'](){return this['_layers'];}set['left'](_0x5df335){this['_margin']['x']=_0x5df335;const _0x5235c1=this['entity']['getLocalPo'+'sition'](),_0x348277=this['_absRight'],_0x21ddbb=this['_localAnch'+'or']['x']+_0x5df335;this['_setWidth'](_0x348277-_0x21ddbb),_0x5235c1['x']=_0x5df335+this['_calculate'+'dWidth']*this['_pivot']['x'],this['entity']['setLocalPo'+'sition'](_0x5235c1);}get['left'](){return this['_margin']['x'];}set['margin'](_0x52c089){this['_margin']['copy'](_0x52c089),this['_calculate'+'Size'](!(0x1ea7+0xf8*-0x9+-0x15ef),!(0x1f52+-0x83*0x1+0x21*-0xef)),this['fire']('set:margin',this['_margin']);}get['margin'](){return this['_margin'];}get['maskedBy'](){return this['_maskedBy'];}set['pivot'](_0x1acc1a){const {pivot:_0x40e885,margin:_0x345bf8}=this,_0x2b4b28=_0x40e885['x'],_0x42ae63=_0x40e885['y'];_0x1acc1a instanceof J?_0x40e885['copy'](_0x1acc1a):_0x40e885['set'](..._0x1acc1a);const _0x3c3bfe=_0x345bf8['x']+_0x345bf8['z'],_0x1b9431=_0x40e885['x']-_0x2b4b28;_0x345bf8['x']+=_0x3c3bfe*_0x1b9431,_0x345bf8['z']-=_0x3c3bfe*_0x1b9431;const _0x287c50=_0x345bf8['y']+_0x345bf8['w'],_0x251ab6=_0x40e885['y']-_0x42ae63;_0x345bf8['y']+=_0x287c50*_0x251ab6,_0x345bf8['w']-=_0x287c50*_0x251ab6,this['_anchorDir'+'ty']=!(0xf1d+0x1*-0x96+-0xe87*0x1),this['_cornersDi'+'rty']=!(0x1763+0x1*-0x1cf5+0x592),this['_worldCorn'+'ersDirty']=!(-0x475+0x1a8+0x2cd),this['_calculate'+'Size'](!(0x26*-0x106+0x3*-0xaf9+-0x17f*-0x30),!(0x2*-0xa52+0x2691*0x1+-0x11ec)),this['_flagChild'+'renAsDirty'](),this['fire']('set:pivot',_0x40e885);}get['pivot'](){return this['_pivot'];}set['right'](_0x24a795){this['_margin']['z']=_0x24a795;const _0x232e70=this['entity']['getLocalPo'+'sition'](),_0x587708=this['_absLeft'],_0x2c2ebb=this['_localAnch'+'or']['z']-_0x24a795;this['_setWidth'](_0x2c2ebb-_0x587708),_0x232e70['x']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-_0x24a795-this['_calculate'+'dWidth']*(0x2237+0x2*-0xc72+-0x952*0x1-this['_pivot']['x']),this['entity']['setLocalPo'+'sition'](_0x232e70);}get['right'](){return this['_margin']['z'];}get['screenCorn'+'ers'](){if(!this['_cornersDi'+'rty']||!this['screen'])return this['_screenCor'+'ners'];const _0xaf856e=this['entity']['parent']&&this['entity']['parent']['element']&&this['entity']['parent']['element']['screenCorn'+'ers'][0x2480+-0x57b+0x1f05*-0x1];this['_screenCor'+'ners'][0x1f*-0x79+0x1579+-0x6d2]['set'](this['_absLeft'],this['_absBottom'],0xf55+0xa13+-0x1968),this['_screenCor'+'ners'][0xcd0+0xbf9+-0x18c8]['set'](this['_absRight'],this['_absBottom'],0xc1d*0x1+0x1f5c+-0x2b79),this['_screenCor'+'ners'][-0xd51*0x1+-0x4*0x6b9+0x91*0x47]['set'](this['_absRight'],this['_absTop'],0x2*0x1127+-0x3d*0x3b+-0x143f*0x1),this['_screenCor'+'ners'][0x116b+-0x1738+0x5d0]['set'](this['_absLeft'],this['_absTop'],0xb*0x2b0+-0x21f1+0x461);const _0x4d5b76=this['screen']['screen']['screenSpac'+'e'];for(let _0x274e6e=-0xf*-0x23b+0x2ea*0x3+-0x27*0x115;_0x274e6e<0x2*-0x221+0x3*-0x741+0x1a09;_0x274e6e++)this['_screenTra'+'nsform']['transformP'+'oint'](this['_screenCor'+'ners'][_0x274e6e],this['_screenCor'+'ners'][_0x274e6e]),_0x4d5b76&&this['_screenCor'+'ners'][_0x274e6e]['mulScalar'](this['screen']['screen']['scale']),_0xaf856e&&this['_screenCor'+'ners'][_0x274e6e]['add'](_0xaf856e);return this['_cornersDi'+'rty']=!(0x2*-0x5d+-0x19ae+-0x1*-0x1a69),this['_canvasCor'+'nersDirty']=!(-0x7dd+-0xd63+0x2a8*0x8),this['_worldCorn'+'ersDirty']=!(-0x1e59+0x1a06+0x1b*0x29),this['_screenCor'+'ners'];}get['textWidth'](){return this['_text']?this['_text']['width']:0xb*-0x38b+-0x104f+0x3748;}get['textHeight'](){return this['_text']?this['_text']['height']:-0x1*0x1c8d+0x3*0x8be+0x253;}set['top'](_0x21d506){this['_margin']['w']=_0x21d506;const _0x5a28db=this['entity']['getLocalPo'+'sition'](),_0x1f145a=this['_absBottom'],_0x196bcb=this['_localAnch'+'or']['w']-_0x21d506;this['_setHeight'](_0x196bcb-_0x1f145a),_0x5a28db['y']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-_0x21d506-this['_calculate'+'dHeight']*(-0x24d9*-0x1+0x10b5+-0x358d-this['_pivot']['y']),this['entity']['setLocalPo'+'sition'](_0x5a28db);}get['top'](){return this['_margin']['w'];}set['type'](_0x26fc2f){_0x26fc2f!==this['_type']&&(this['_type']=_0x26fc2f,this['_image']&&(this['_image']['destroy'](),this['_image']=null),this['_text']&&(this['_text']['destroy'](),this['_text']=null),_0x26fc2f===tu?this['_image']=new CL(this):_0x26fc2f===fv&&(this['_text']=new XL(this)));}get['type'](){return this['_type'];}set['useInput'](_0x41c78c){this['_useInput']!==_0x41c78c&&(this['_useInput']=_0x41c78c,this['system']['app']['elementInp'+'ut']?_0x41c78c?this['enabled']&&this['entity']['enabled']&&this['system']['app']['elementInp'+'ut']['addElement'](this):this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this):this['_useInput']===!(0xc4c*0x1+-0x188a+0xc3e)&&w['warn']('Elements\x20w'+'ill\x20not\x20ge'+'t\x20any\x20inpu'+'t\x20events\x20b'+'ecause\x20thi'+'s.system.a'+'pp.element'+'Input\x20is\x20n'+'ot\x20created'),this['fire']('set:useInp'+'ut',_0x41c78c));}get['useInput'](){return this['_useInput'];}set['fitMode'](_0x59ae91){this['_fitMode']=_0x59ae91,this['_calculate'+'Size'](!(0x163a+-0x9c5+-0xc75),!(-0x126b+0x23ff*-0x1+0x366a)),this['_image']&&this['_image']['refreshMes'+'h']();}get['fitMode'](){return this['_fitMode'];}set['width'](_0x1e3f56){this['_width']=_0x1e3f56,this['_hasSplitA'+'nchorsX']||this['_setCalcul'+'atedWidth'](_0x1e3f56,!(-0x2*0x11e5+-0x1691+-0x1*-0x3a5b)),this['fire']('set:width',this['_width']);}get['width'](){return this['_width'];}get['worldCorne'+'rs'](){if(!this['_worldCorn'+'ersDirty'])return this['_worldCorn'+'ers'];if(this['screen']){const _0xe2026=this['screenCorn'+'ers'];if(!this['screen']['screen']['screenSpac'+'e']){ws['copy'](this['screen']['screen']['_screenMat'+'rix']),ws['data'][0x881+-0x5ea+-0x28a]=-ws['data'][-0x1f2e+0x1a56+0x4e5],ws['mul2'](this['screen']['getWorldTr'+'ansform'](),ws);for(let _0x4a7b64=0x855+0x9*-0x13b+0x15f*0x2;_0x4a7b64<-0x82+0x375+-0x1*0x2ef;_0x4a7b64++)ws['transformP'+'oint'](_0xe2026[_0x4a7b64],this['_worldCorn'+'ers'][_0x4a7b64]);}}else{const _0x670211=this['entity']['getLocalPo'+'sition']();ws['setTransla'+'te'](-_0x670211['x'],-_0x670211['y'],-_0x670211['z']),dc['setTRS'](D['ZERO'],this['entity']['getLocalRo'+'tation'](),this['entity']['getLocalSc'+'ale']()),fc['setTransla'+'te'](_0x670211['x'],_0x670211['y'],_0x670211['z']);const _0x284691=this['entity']['parent']?this['entity']['parent']:this['entity'];za['copy'](_0x284691['getWorldTr'+'ansform']()),za['mul'](fc)['mul'](dc)['mul'](ws),Pi['set'](_0x670211['x']-this['pivot']['x']*this['calculated'+'Width'],_0x670211['y']-this['pivot']['y']*this['calculated'+'Height'],_0x670211['z']),za['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][-0x21e4+0xbd1+-0x1*-0x1613]),Pi['set'](_0x670211['x']+(-0x502+-0x1*0x1507+0x1a0a-this['pivot']['x'])*this['calculated'+'Width'],_0x670211['y']-this['pivot']['y']*this['calculated'+'Height'],_0x670211['z']),za['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][-0x240a+-0x268e+0x4a99]),Pi['set'](_0x670211['x']+(-0x1368+-0x1933+-0x4*-0xb27-this['pivot']['x'])*this['calculated'+'Width'],_0x670211['y']+(0x3*-0x71+0x1610+-0xa5e*0x2-this['pivot']['y'])*this['calculated'+'Height'],_0x670211['z']),za['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][0x1*-0xd92+-0x11ac+0x1f40]),Pi['set'](_0x670211['x']-this['pivot']['x']*this['calculated'+'Width'],_0x670211['y']+(-0x44a+-0x1*0x1900+-0x1*-0x1d4b-this['pivot']['y'])*this['calculated'+'Height'],_0x670211['z']),za['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][-0xc90+0x318+0x97b]);}return this['_worldCorn'+'ersDirty']=!(-0x1616+0x6*-0x223+-0x3*-0xba3),this['_worldCorn'+'ers'];}set['fontSize'](_0x378f61){this['_setValue']('fontSize',_0x378f61);}get['fontSize'](){return this['_text']?this['_text']['fontSize']:null;}set['minFontSiz'+'e'](_0x52a9e9){this['_setValue']('minFontSiz'+'e',_0x52a9e9);}get['minFontSiz'+'e'](){return this['_text']?this['_text']['minFontSiz'+'e']:null;}set['maxFontSiz'+'e'](_0x3fafe8){this['_setValue']('maxFontSiz'+'e',_0x3fafe8);}get['maxFontSiz'+'e'](){return this['_text']?this['_text']['maxFontSiz'+'e']:null;}set['maxLines'](_0x107d6b){this['_setValue']('maxLines',_0x107d6b);}get['maxLines'](){return this['_text']?this['_text']['maxLines']:null;}set['autoFitWid'+'th'](_0x3ff781){this['_setValue']('autoFitWid'+'th',_0x3ff781);}get['autoFitWid'+'th'](){return this['_text']?this['_text']['autoFitWid'+'th']:null;}set['autoFitHei'+'ght'](_0xa8d903){this['_setValue']('autoFitHei'+'ght',_0xa8d903);}get['autoFitHei'+'ght'](){return this['_text']?this['_text']['autoFitHei'+'ght']:null;}set['color'](_0x440303){this['_setValue']('color',_0x440303);}get['color'](){return this['_text']?this['_text']['color']:this['_image']?this['_image']['color']:null;}set['font'](_0x2b27fd){this['_setValue']('font',_0x2b27fd);}get['font'](){return this['_text']?this['_text']['font']:null;}set['fontAsset'](_0x4bdb37){this['_setValue']('fontAsset',_0x4bdb37);}get['fontAsset'](){return this['_text']&&typeof this['_text']['fontAsset']=='number'?this['_text']['fontAsset']:null;}set['spacing'](_0x4ef325){this['_setValue']('spacing',_0x4ef325);}get['spacing'](){return this['_text']?this['_text']['spacing']:null;}set['lineHeight'](_0xbcd1ba){this['_setValue']('lineHeight',_0xbcd1ba);}get['lineHeight'](){return this['_text']?this['_text']['lineHeight']:null;}set['wrapLines'](_0x4408b1){this['_setValue']('wrapLines',_0x4408b1);}get['wrapLines'](){return this['_text']?this['_text']['wrapLines']:null;}set['lines'](_0x2fdfb8){this['_setValue']('lines',_0x2fdfb8);}get['lines'](){return this['_text']?this['_text']['lines']:null;}set['alignment'](_0x374194){this['_setValue']('alignment',_0x374194);}get['alignment'](){return this['_text']?this['_text']['alignment']:null;}set['autoWidth'](_0x50ef37){this['_setValue']('autoWidth',_0x50ef37);}get['autoWidth'](){return this['_text']?this['_text']['autoWidth']:null;}set['autoHeight'](_0x264519){this['_setValue']('autoHeight',_0x264519);}get['autoHeight'](){return this['_text']?this['_text']['autoHeight']:null;}set['rtlReorder'](_0x530d96){this['_setValue']('rtlReorder',_0x530d96);}get['rtlReorder'](){return this['_text']?this['_text']['rtlReorder']:null;}set['unicodeCon'+'verter'](_0x35f32d){this['_setValue']('unicodeCon'+'verter',_0x35f32d);}get['unicodeCon'+'verter'](){return this['_text']?this['_text']['unicodeCon'+'verter']:null;}set['text'](_0x56be7a){this['_setValue']('text',_0x56be7a);}get['text'](){return this['_text']?this['_text']['text']:null;}set['key'](_0x59581a){this['_setValue']('key',_0x59581a);}get['key'](){return this['_text']?this['_text']['key']:null;}set['texture'](_0x588337){this['_setValue']('texture',_0x588337);}get['texture'](){return this['_image']?this['_image']['texture']:null;}set['textureAss'+'et'](_0x1c5c77){this['_setValue']('textureAss'+'et',_0x1c5c77);}get['textureAss'+'et'](){return this['_image']?this['_image']['textureAss'+'et']:null;}set['material'](_0x5275fb){this['_setValue']('material',_0x5275fb);}get['material'](){return this['_image']?this['_image']['material']:null;}set['materialAs'+'set'](_0x5b4f0b){this['_setValue']('materialAs'+'set',_0x5b4f0b);}get['materialAs'+'set'](){return this['_image']?this['_image']['materialAs'+'set']:null;}set['sprite'](_0x536975){this['_setValue']('sprite',_0x536975);}get['sprite'](){return this['_image']?this['_image']['sprite']:null;}set['spriteAsse'+'t'](_0x78130){this['_setValue']('spriteAsse'+'t',_0x78130);}get['spriteAsse'+'t'](){return this['_image']?this['_image']['spriteAsse'+'t']:null;}set['spriteFram'+'e'](_0x7c518){this['_setValue']('spriteFram'+'e',_0x7c518);}get['spriteFram'+'e'](){return this['_image']?this['_image']['spriteFram'+'e']:null;}set['pixelsPerU'+'nit'](_0x2557e1){this['_setValue']('pixelsPerU'+'nit',_0x2557e1);}get['pixelsPerU'+'nit'](){return this['_image']?this['_image']['pixelsPerU'+'nit']:null;}set['opacity'](_0x39c7e8){this['_setValue']('opacity',_0x39c7e8);}get['opacity'](){return this['_text']?this['_text']['opacity']:this['_image']?this['_image']['opacity']:null;}set['rect'](_0x91fcb6){this['_setValue']('rect',_0x91fcb6);}get['rect'](){return this['_image']?this['_image']['rect']:null;}set['mask'](_0x4195e5){this['_setValue']('mask',_0x4195e5);}get['mask'](){return this['_image']?this['_image']['mask']:null;}set['outlineCol'+'or'](_0x32e5ec){this['_setValue']('outlineCol'+'or',_0x32e5ec);}get['outlineCol'+'or'](){return this['_text']?this['_text']['outlineCol'+'or']:null;}set['outlineThi'+'ckness'](_0x26eb33){this['_setValue']('outlineThi'+'ckness',_0x26eb33);}get['outlineThi'+'ckness'](){return this['_text']?this['_text']['outlineThi'+'ckness']:null;}set['shadowColo'+'r'](_0x5c2536){this['_setValue']('shadowColo'+'r',_0x5c2536);}get['shadowColo'+'r'](){return this['_text']?this['_text']['shadowColo'+'r']:null;}set['shadowOffs'+'et'](_0x647b0){this['_setValue']('shadowOffs'+'et',_0x647b0);}get['shadowOffs'+'et'](){return this['_text']?this['_text']['shadowOffs'+'et']:null;}set['enableMark'+'up'](_0x342d10){this['_setValue']('enableMark'+'up',_0x342d10);}get['enableMark'+'up'](){return this['_text']?this['_text']['enableMark'+'up']:null;}set['rangeStart'](_0x6f71fe){this['_setValue']('rangeStart',_0x6f71fe);}get['rangeStart'](){return this['_text']?this['_text']['rangeStart']:null;}set['rangeEnd'](_0x1e9d78){this['_setValue']('rangeEnd',_0x1e9d78);}get['rangeEnd'](){return this['_text']?this['_text']['rangeEnd']:null;}['_setValue'](_0x160a26,_0x3c483f){this['_text']?(this['_text'][_0x160a26]!==_0x3c483f&&this['_dirtyBatc'+'h'](),this['_text'][_0x160a26]=_0x3c483f):this['_image']&&(this['_image'][_0x160a26]!==_0x3c483f&&this['_dirtyBatc'+'h'](),this['_image'][_0x160a26]=_0x3c483f);}['_patch'](){this['entity']['_sync']=this['_sync'],this['entity']['setPositio'+'n']=this['_setPositi'+'on'],this['entity']['setLocalPo'+'sition']=this['_setLocalP'+'osition'];}['_unpatch'](){this['entity']['_sync']=lt['prototype']['_sync'],this['entity']['setPositio'+'n']=lt['prototype']['setPositio'+'n'],this['entity']['setLocalPo'+'sition']=lt['prototype']['setLocalPo'+'sition'];}['_setPositi'+'on'](_0x14013a,_0x58a94d,_0x2b74ce){if(!this['element']['screen']){lt['prototype']['setPositio'+'n']['call'](this,_0x14013a,_0x58a94d,_0x2b74ce);return;}_0x14013a instanceof D?tf['copy'](_0x14013a):tf['set'](_0x14013a,_0x58a94d,_0x2b74ce),this['getWorldTr'+'ansform'](),Tg['copy'](this['element']['_screenToW'+'orld'])['invert'](),Tg['transformP'+'oint'](tf,this['localPosit'+'ion']),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_setLocalP'+'osition'](_0x119949,_0x13ae7f,_0x4a75dc){_0x119949 instanceof D?this['localPosit'+'ion']['copy'](_0x119949):this['localPosit'+'ion']['set'](_0x119949,_0x13ae7f,_0x4a75dc);const _0x9d7c9b=this['element'],_0x373dcc=this['localPosit'+'ion'],_0xa71332=_0x9d7c9b['_pivot'];_0x9d7c9b['_margin']['x']=_0x373dcc['x']-_0x9d7c9b['_calculate'+'dWidth']*_0xa71332['x'],_0x9d7c9b['_margin']['z']=_0x9d7c9b['_localAnch'+'or']['z']-_0x9d7c9b['_localAnch'+'or']['x']-_0x9d7c9b['_calculate'+'dWidth']-_0x9d7c9b['_margin']['x'],_0x9d7c9b['_margin']['y']=_0x373dcc['y']-_0x9d7c9b['_calculate'+'dHeight']*_0xa71332['y'],_0x9d7c9b['_margin']['w']=_0x9d7c9b['_localAnch'+'or']['w']-_0x9d7c9b['_localAnch'+'or']['y']-_0x9d7c9b['_calculate'+'dHeight']-_0x9d7c9b['_margin']['y'],this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_sync'](){const _0x5a60ed=this['element'],_0x3565fa=_0x5a60ed['screen'];if(_0x3565fa){if(_0x5a60ed['_anchorDir'+'ty']){let _0x4ad687=-0xf57+0x4*0x390+0x117,_0x106a09=0x1d4+-0x3*-0xb02+0x116d*-0x2,_0x143aa1=0xfbe*-0x2+0x1176+0xe06,_0x37dc2d=0x7*0x1d3+-0x2*-0x120d+-0x30de;if(this['_parent']&&this['_parent']['element'])_0x4ad687=this['_parent']['element']['calculated'+'Width'],_0x106a09=this['_parent']['element']['calculated'+'Height'],_0x143aa1=this['_parent']['element']['pivot']['x'],_0x37dc2d=this['_parent']['element']['pivot']['y'];else{const _0x2d567a=_0x3565fa['screen']['resolution'];_0x4ad687=_0x2d567a['x']/_0x3565fa['screen']['scale'],_0x106a09=_0x2d567a['y']/_0x3565fa['screen']['scale'];}_0x5a60ed['_anchorTra'+'nsform']['setTransla'+'te'](_0x4ad687*(_0x5a60ed['anchor']['x']-_0x143aa1),-(_0x106a09*(_0x37dc2d-_0x5a60ed['anchor']['y'])),-0x1524+0x1e24+-0x900),_0x5a60ed['_anchorDir'+'ty']=!(-0xe3f*-0x1+-0x1*-0x18c5+-0x2703),_0x5a60ed['_calculate'+'LocalAncho'+'rs']();}_0x5a60ed['_sizeDirty']&&_0x5a60ed['_calculate'+'Size'](!(-0x1960+-0x1476+-0x92b*-0x5),!(0x7*-0x568+-0x1*0x4c7+0x2aa0));}if(this['_dirtyLoca'+'l']){this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']);const _0xa2b23f=this['localPosit'+'ion'],_0x26c518=_0x5a60ed['_pivot'];_0x5a60ed['_margin']['x']=_0xa2b23f['x']-_0x5a60ed['_calculate'+'dWidth']*_0x26c518['x'],_0x5a60ed['_margin']['z']=_0x5a60ed['_localAnch'+'or']['z']-_0x5a60ed['_localAnch'+'or']['x']-_0x5a60ed['_calculate'+'dWidth']-_0x5a60ed['_margin']['x'],_0x5a60ed['_margin']['y']=_0xa2b23f['y']-_0x5a60ed['_calculate'+'dHeight']*_0x26c518['y'],_0x5a60ed['_margin']['w']=_0x5a60ed['_localAnch'+'or']['w']-_0x5a60ed['_localAnch'+'or']['y']-_0x5a60ed['_calculate'+'dHeight']-_0x5a60ed['_margin']['y'],this['_dirtyLoca'+'l']=!(-0xb*-0xfe+-0x26f2+0x1c09);}if(!_0x3565fa){this['_dirtyWorl'+'d']&&(_0x5a60ed['_cornersDi'+'rty']=!(0x1*0x155a+0xce8+-0x6da*0x5),_0x5a60ed['_canvasCor'+'nersDirty']=!(0x1af2+-0x1abe+-0x2*0x1a),_0x5a60ed['_worldCorn'+'ersDirty']=!(0x1214+-0x19e6+0xb*0xb6)),lt['prototype']['_sync']['call'](this);return;}if(this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['_parent']['element']?_0x5a60ed['_screenToW'+'orld']['mul2'](this['_parent']['element']['_modelTran'+'sform'],_0x5a60ed['_anchorTra'+'nsform']):_0x5a60ed['_screenToW'+'orld']['copy'](_0x5a60ed['_anchorTra'+'nsform']),_0x5a60ed['_modelTran'+'sform']['mul2'](_0x5a60ed['_screenToW'+'orld'],this['localTrans'+'form']),_0x3565fa){_0x5a60ed['_screenToW'+'orld']['mul2'](_0x3565fa['screen']['_screenMat'+'rix'],_0x5a60ed['_screenToW'+'orld']),_0x3565fa['screen']['screenSpac'+'e']||_0x5a60ed['_screenToW'+'orld']['mul2'](_0x3565fa['worldTrans'+'form'],_0x5a60ed['_screenToW'+'orld']),this['worldTrans'+'form']['mul2'](_0x5a60ed['_screenToW'+'orld'],this['localTrans'+'form']);const _0x1e1251=_0x5a60ed['_parentWor'+'ldTransfor'+'m'];_0x1e1251['setIdentit'+'y']();const _0x5d82cc=this['_parent'];_0x5d82cc&&_0x5d82cc['element']&&_0x5d82cc!==_0x3565fa&&(ws['setTRS'](D['ZERO'],_0x5d82cc['getLocalRo'+'tation'](),_0x5d82cc['getLocalSc'+'ale']()),_0x1e1251['mul2'](_0x5d82cc['element']['_parentWor'+'ldTransfor'+'m'],ws));const _0x1c71fa=Pi;_0x1c71fa['set'](0x241f+0x64*0x8+-0x11*0x24f,0x1d7b*-0x1+-0x1*-0xf9d+0x8e*0x19,this['localPosit'+'ion']['z']);const _0x1e067c=qL;_0x1e067c['set'](_0x5a60ed['_absLeft']+_0x5a60ed['_pivot']['x']*_0x5a60ed['calculated'+'Width'],_0x5a60ed['_absBottom']+_0x5a60ed['_pivot']['y']*_0x5a60ed['calculated'+'Height'],0x18f*0xd+0x142d+-0x2870),ws['setTransla'+'te'](-_0x1e067c['x'],-_0x1e067c['y'],-_0x1e067c['z']),dc['setTRS'](_0x1c71fa,this['getLocalRo'+'tation'](),this['getLocalSc'+'ale']()),fc['setTransla'+'te'](_0x1e067c['x'],_0x1e067c['y'],_0x1e067c['z']),_0x5a60ed['_screenTra'+'nsform']['mul2'](_0x5a60ed['_parentWor'+'ldTransfor'+'m'],fc)['mul'](dc)['mul'](ws),_0x5a60ed['_cornersDi'+'rty']=!(-0xd8*0x29+-0x279*0x1+0x2511),_0x5a60ed['_canvasCor'+'nersDirty']=!(-0x1d21+0x1e84+-0x163*0x1),_0x5a60ed['_worldCorn'+'ersDirty']=!(0x21d2+0x1*0x1607+0x11*-0x349);}else this['worldTrans'+'form']['copy'](_0x5a60ed['_modelTran'+'sform']);}this['_dirtyWorl'+'d']=!(-0x161a+0x2*0xa85+0x111);}}['_onInsert'](_0x363a94){const _0x38f079=this['_parseUpTo'+'Screen']();this['entity']['_dirtifyWo'+'rld'](),this['_updateScr'+'een'](_0x38f079['screen']),this['_dirtifyMa'+'sk']();}['_dirtifyMa'+'sk'](){let _0x48c5a8=this['entity'];for(;_0x48c5a8;){const _0x412369=_0x48c5a8['parent'];if((_0x412369===null||_0x412369['screen'])&&_0x48c5a8['element']){(!this['system']['_prerender']||!this['system']['_prerender']['length'])&&(this['system']['_prerender']=[],this['system']['app']['once']('prerender',this['_onPrerend'+'er'],this),w['trace'](zs,'register\x20p'+'rerender'));const _0x43ec74=this['system']['_prerender']['indexOf'](this['entity']);_0x43ec74>=-0x9a0+0x77e+0x222&&this['system']['_prerender']['splice'](_0x43ec74,0x8e4+0x1edc+-0x27bf),this['system']['_prerender']['indexOf'](_0x48c5a8)<0x2*-0xd7a+0x487*-0x2+0x2402&&this['system']['_prerender']['push'](_0x48c5a8),w['trace'](zs,'set\x20preren'+'der\x20root\x20t'+'o:\x20'+_0x48c5a8['name']);}_0x48c5a8=_0x412369;}}['_onPrerend'+'er'](){for(let _0x3474d9=-0x448*-0x8+-0xa2f*-0x3+-0x40cd;_0x3474d9<this['system']['_prerender']['length'];_0x3474d9++){const _0x5a4082=this['system']['_prerender'][_0x3474d9];w['trace'](zs,'prerender\x20'+'from:\x20'+_0x5a4082['name']),_0x5a4082['element']&&_0x5a4082['element']['syncMask'](-0x19*-0x4f+-0x1f7a+0x17c4);}this['system']['_prerender']['length']=-0x2556+-0x3*-0xa97+0x591;}['_bindScree'+'n'](_0x47fbf5){_0x47fbf5['_bindEleme'+'nt'](this);}['_unbindScr'+'een'](_0x29fe66){_0x29fe66['_unbindEle'+'ment'](this);}['_updateScr'+'een'](_0x1f819c){this['screen']&&this['screen']!==_0x1f819c&&this['_unbindScr'+'een'](this['screen']['screen']);const _0x407ede=this['screen'];this['screen']=_0x1f819c,this['screen']&&this['_bindScree'+'n'](this['screen']['screen']),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('set:screen',this['screen'],_0x407ede),this['_anchorDir'+'ty']=!(0xeb8+0x1340+-0x21f8);const _0x4d256b=this['entity']['children'];for(let _0x3c1a21=-0x1*-0x1a2d+-0x116f*0x1+-0x8be,_0x27b955=_0x4d256b['length'];_0x3c1a21<_0x27b955;_0x3c1a21++)_0x4d256b[_0x3c1a21]['element']&&_0x4d256b[_0x3c1a21]['element']['_updateScr'+'een'](_0x1f819c);this['screen']&&this['screen']['screen']['syncDrawOr'+'der']();}['syncMask'](_0x4854e3){const _0x145e4f=this['_parseUpTo'+'Screen']();this['_updateMas'+'k'](_0x145e4f['mask'],_0x4854e3);}['_setMasked'+'By'](_0x3a9ab2){const _0xa05c25=this['_image']||this['_text'];if(_0x3a9ab2){const _0x2f13c8=_0x3a9ab2['element']['_image']['_maskRef'];w['trace'](zs,'masking:\x20'+this['entity']['name']+'\x20with\x20'+_0x2f13c8),_0xa05c25==null||_0xa05c25['_setStenci'+'l'](new pi({'ref':_0x2f13c8,'func':Hc})),this['_maskedBy']=_0x3a9ab2;}else w['trace'](zs,'no\x20masking'+'\x20on:\x20'+this['entity']['name']),_0xa05c25==null||_0xa05c25['_setStenci'+'l'](null),this['_maskedBy']=null;}['_updateMas'+'k'](_0xd10afb,_0x2b1f58){var _0x94ecff,_0x5161fe;if(_0xd10afb){if(this['_setMasked'+'By'](_0xd10afb),this['mask']){const _0x309677=_0xd10afb['element']['_image']['_maskRef'],_0x23384a=new pi({'ref':_0x309677,'func':Hc,'zpass':sx});this['_image']['_setStenci'+'l'](_0x23384a),this['_image']['_maskRef']=_0x2b1f58,_0x2b1f58++,w['trace'](zs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+(_0x23384a['ref']+(-0x1980+0x1c61+-0x2e0))),w['trace'](zs,'depth++\x20to'+':\x20',_0x2b1f58),_0xd10afb=this['entity'];}const _0x7eeb9=this['entity']['children'];for(let _0x165875=0x12e2+-0x1*-0xad9+0x2b*-0xb1,_0x495066=_0x7eeb9['length'];_0x165875<_0x495066;_0x165875++)(_0x94ecff=_0x7eeb9[_0x165875]['element'])==null||_0x94ecff['_updateMas'+'k'](_0xd10afb,_0x2b1f58);this['mask']&&_0x2b1f58--;}else{if(this['_setMasked'+'By'](null),this['mask']){const _0x1ec549=new pi({'ref':_0x2b1f58,'func':Hi,'zpass':tx});this['_image']['_setStenci'+'l'](_0x1ec549),this['_image']['_maskRef']=_0x2b1f58,_0x2b1f58++,w['trace'](zs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+_0x1ec549['ref']),w['trace'](zs,'depth++\x20to'+':\x20',_0x2b1f58),_0xd10afb=this['entity'];}const _0x3a78c2=this['entity']['children'];for(let _0x4ecad=0x8*0xef+-0xe*-0xc+0x82*-0x10,_0x26e5c7=_0x3a78c2['length'];_0x4ecad<_0x26e5c7;_0x4ecad++)(_0x5161fe=_0x3a78c2[_0x4ecad]['element'])==null||_0x5161fe['_updateMas'+'k'](_0xd10afb,_0x2b1f58);this['mask']&&_0x2b1f58--;}}['_parseUpTo'+'Screen'](){const _0x42868c={'screen':null,'mask':null};let _0x5905ba=this['entity']['_parent'];for(;_0x5905ba&&!_0x5905ba['screen'];)_0x5905ba['element']&&_0x5905ba['element']['mask']&&(_0x42868c['mask']||(_0x42868c['mask']=_0x5905ba)),_0x5905ba=_0x5905ba['parent'];return _0x5905ba&&_0x5905ba['screen']&&(_0x42868c['screen']=_0x5905ba),_0x42868c;}['_onScreenR'+'esize'](_0x4b0034){this['_anchorDir'+'ty']=!(0x16d+0xef*0xb+0x6*-0x1f3),this['_cornersDi'+'rty']=!(-0xeae+0x48*-0x26+0x195e),this['_worldCorn'+'ersDirty']=!(-0x10*-0x133+-0x20c+-0x1124),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('screen:set'+':resolutio'+'n',_0x4b0034);}['_onScreenS'+'paceChange'](){this['fire']('screen:set'+':screenspa'+'ce',this['screen']['screen']['screenSpac'+'e']);}['_onScreenR'+'emove'](){this['screen']&&(this['screen']['_destroyin'+'g']?this['screen']=null:this['_updateScr'+'een'](null));}['_calculate'+'LocalAncho'+'rs'](){let _0x294e98=0x3*0x221+0x11e3+-0x145e,_0x37e43f=0x20a7+0x975+-0xcbc*0x3;const _0x17920e=this['entity']['_parent'];if(_0x17920e&&_0x17920e['element'])_0x294e98=_0x17920e['element']['calculated'+'Width'],_0x37e43f=_0x17920e['element']['calculated'+'Height'];else{if(this['screen']){const _0x39c637=this['screen']['screen']['resolution'],_0x5ef5c3=this['screen']['screen']['scale'];_0x294e98=_0x39c637['x']/_0x5ef5c3,_0x37e43f=_0x39c637['y']/_0x5ef5c3;}}this['_localAnch'+'or']['set'](this['_anchor']['x']*_0x294e98,this['_anchor']['y']*_0x37e43f,this['_anchor']['z']*_0x294e98,this['_anchor']['w']*_0x37e43f);}['getOffsetP'+'osition'](_0x23501a,_0x40135b){const _0x2ac9e8=this['entity']['getLocalPo'+'sition']()['clone']();return _0x2ac9e8['x']+=_0x23501a,_0x2ac9e8['y']+=_0x40135b,this['_screenToW'+'orld']['transformP'+'oint'](_0x2ac9e8,_0x2ac9e8),_0x2ac9e8;}['onLayersCh'+'anged'](_0x48c01d,_0x2aa0b1){this['addModelTo'+'Layers'](this['_image']?this['_image']['_renderabl'+'e']['model']:this['_text']['_model']),_0x48c01d['off']('add',this['onLayerAdd'+'ed'],this),_0x48c01d['off']('remove',this['onLayerRem'+'oved'],this),_0x2aa0b1['on']('add',this['onLayerAdd'+'ed'],this),_0x2aa0b1['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0xf900b2){this['layers']['indexOf'](_0xf900b2['id'])<-0xaa2+0xf4*0xe+0x15b*-0x2||(this['_image']?_0xf900b2['addMeshIns'+'tances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0xf900b2['addMeshIns'+'tances'](this['_text']['_model']['meshInstan'+'ces']));}['onLayerRem'+'oved'](_0x29fa66){this['layers']['indexOf'](_0x29fa66['id'])<-0xd*-0x167+-0xa6*0x25+0x5c3||(this['_image']?_0x29fa66['removeMesh'+'Instances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x29fa66['removeMesh'+'Instances'](this['_text']['_model']['meshInstan'+'ces']));}['onEnable'](){var _0x1d6ef1;const _0x4400e1=this['system']['app']['scene'],_0x4d4c0b=_0x4400e1['layers'];this['_image']&&this['_image']['onEnable'](),this['_text']&&this['_text']['onEnable'](),this['_group']&&this['_group']['onEnable'](),this['useInput']&&this['system']['app']['elementInp'+'ut']&&this['system']['app']['elementInp'+'ut']['addElement'](this),this['_evtLayers'+'Changed']=_0x4400e1['on']('set:layers',this['onLayersCh'+'anged'],this),_0x4d4c0b&&(this['_evtLayerA'+'dded']=_0x4d4c0b['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x4d4c0b['on']('remove',this['onLayerRem'+'oved'],this)),this['_batchGrou'+'pId']>=0x1069+0x1f*-0x86+-0x2f&&((_0x1d6ef1=this['system']['app']['batcher'])==null||_0x1d6ef1['insert'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('enableelem'+'ent');}['onDisable'](){var _0x51e283,_0x6657b7,_0x325ae3,_0x1fcabe;const _0x41ed58=this['system']['app']['scene']['layers'];(_0x51e283=this['_evtLayers'+'Changed'])==null||_0x51e283['off'](),this['_evtLayers'+'Changed']=null,_0x41ed58&&((_0x6657b7=this['_evtLayerA'+'dded'])==null||_0x6657b7['off'](),this['_evtLayerA'+'dded']=null,(_0x325ae3=this['_evtLayerR'+'emoved'])==null||_0x325ae3['off'](),this['_evtLayerR'+'emoved']=null),this['_image']&&this['_image']['onDisable'](),this['_text']&&this['_text']['onDisable'](),this['_group']&&this['_group']['onDisable'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['_batchGrou'+'pId']>=-0x1*-0xe3+0x1f11+-0x1ff4&&((_0x1fcabe=this['system']['app']['batcher'])==null||_0x1fcabe['remove'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('disableele'+'ment');}['onRemove'](){this['entity']['off']('insert',this['_onInsert'],this),this['_unpatch'](),this['_image']&&this['_image']['destroy'](),this['_text']&&this['_text']['destroy'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['screen']&&this['screen']['screen']&&(this['_unbindScr'+'een'](this['screen']['screen']),this['screen']['screen']['syncDrawOr'+'der']()),this['off']();}['_calculate'+'Size'](_0x3ac6a1,_0x2df9dd){if(!this['entity']['_parent']&&!this['screen'])return;this['_calculate'+'LocalAncho'+'rs']();const _0x1bb086=this['_absRight']-this['_absLeft'],_0x21376c=this['_absTop']-this['_absBottom'];_0x3ac6a1?this['_setWidth'](_0x1bb086):this['_setCalcul'+'atedWidth'](_0x1bb086,!(0x154f*-0x1+0x1*0x1582+0x5*-0xa)),_0x2df9dd?this['_setHeight'](_0x21376c):this['_setCalcul'+'atedHeight'](_0x21376c,!(-0x14*0xe2+-0x1*-0x1dd4+-0xc2b*0x1));const _0x148055=this['entity']['getLocalPo'+'sition']();_0x148055['x']=this['_margin']['x']+this['_calculate'+'dWidth']*this['_pivot']['x'],_0x148055['y']=this['_margin']['y']+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x148055),this['_sizeDirty']=!(-0x4a*-0x24+-0x60+-0x11*0x97);}['_setWidth'](_0x27b01c){this['_width']=_0x27b01c,this['_setCalcul'+'atedWidth'](_0x27b01c,!(-0x1f94+0x1ce6+0x2af)),this['fire']('set:width',this['_width']);}['_setHeight'](_0x44bcb0){this['_height']=_0x44bcb0,this['_setCalcul'+'atedHeight'](_0x44bcb0,!(0x4*0x7+0x1978+-0x1993*0x1)),this['fire']('set:height',this['_height']);}['_setCalcul'+'atedWidth'](_0x44f91f,_0x5d83aa){if(!(Math['abs'](_0x44f91f-this['_calculate'+'dWidth'])<=-0x859+0x145e+0xc05*-0x1+0.0001)){if(this['_calculate'+'dWidth']=_0x44f91f,this['entity']['_dirtifyLo'+'cal'](),_0x5d83aa){const _0x2f7250=this['entity']['getLocalPo'+'sition'](),_0x53a934=this['_pivot'];this['_margin']['x']=_0x2f7250['x']-this['_calculate'+'dWidth']*_0x53a934['x'],this['_margin']['z']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-this['_calculate'+'dWidth']-this['_margin']['x'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedWidth',this['_calculate'+'dWidth']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_setCalcul'+'atedHeight'](_0x555433,_0x2d9b94){if(!(Math['abs'](_0x555433-this['_calculate'+'dHeight'])<=-0x7*-0xf6+-0x13c3+0xd09+0.0001)){if(this['_calculate'+'dHeight']=_0x555433,this['entity']['_dirtifyLo'+'cal'](),_0x2d9b94){const _0x4699a1=this['entity']['getLocalPo'+'sition'](),_0x2ddc58=this['_pivot'];this['_margin']['y']=_0x4699a1['y']-this['_calculate'+'dHeight']*_0x2ddc58['y'],this['_margin']['w']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-this['_calculate'+'dHeight']-this['_margin']['y'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedHeight',this['_calculate'+'dHeight']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_flagChild'+'renAsDirty'](){const _0x504ce7=this['entity']['_children'];for(let _0x4c4906=-0x1f0b*0x1+0x169c*-0x1+0x35a7,_0x507df8=_0x504ce7['length'];_0x4c4906<_0x507df8;_0x4c4906++)_0x504ce7[_0x4c4906]['element']&&(_0x504ce7[_0x4c4906]['element']['_anchorDir'+'ty']=!(0x1*-0xe11+0x6*-0x368+-0xb*-0x323),_0x504ce7[_0x4c4906]['element']['_sizeDirty']=!(-0x1d24+-0x43b+0x215f));}['addModelTo'+'Layers'](_0x3eef88){this['_addedMode'+'ls']['push'](_0x3eef88);for(let _0x506668=0xb36+-0x368*0x5+0x5d2;_0x506668<this['layers']['length'];_0x506668++){const _0x378176=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x506668]);_0x378176&&_0x378176['addMeshIns'+'tances'](_0x3eef88['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](_0x134478){const _0x5a2872=this['_addedMode'+'ls']['indexOf'](_0x134478);_0x5a2872>=-0xb*-0x274+-0x7*-0x2f5+0x1*-0x2faf&&this['_addedMode'+'ls']['splice'](_0x5a2872,0xe92*0x1+-0x1d98+0xf07);for(let _0x39f39c=0xde8+-0x2*-0x869+-0x2e*0xab;_0x39f39c<this['layers']['length'];_0x39f39c++){const _0x1e6bfa=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x39f39c]);_0x1e6bfa&&_0x1e6bfa['removeMesh'+'Instances'](_0x134478['meshInstan'+'ces']);}}['getMaskOff'+'set'](){const _0xe32720=this['system']['app']['frame'];this['_offsetRea'+'dAt']!==_0xe32720&&(this['_maskOffse'+'t']=-0x1*0x1145+-0x4*-0x56a+-0x463*0x1+0.5,this['_offsetRea'+'dAt']=_0xe32720);const _0x4841e8=this['_maskOffse'+'t'];return this['_maskOffse'+'t']-=0x4c0+0x55*0xc+-0x1*0x8bc+0.001,_0x4841e8;}['isVisibleF'+'orCamera'](_0x3ea6b7){let _0x452d38,_0x54da4e,_0x13650d,_0x2efac0;if(this['maskedBy']){const _0x482fab=this['maskedBy']['element']['screenCorn'+'ers'];_0x452d38=Math['min'](Math['min'](_0x482fab[0xcfc+0x1f0f+-0x2c0b]['x'],_0x482fab[-0x71*-0x2b+-0x455*-0x6+-0x2cf8]['x']),Math['min'](_0x482fab[-0x121c+0x4ae*0x1+0xd70]['x'],_0x482fab[-0x272+-0x11fb+-0x4*-0x51c]['x'])),_0x54da4e=Math['max'](Math['max'](_0x482fab[-0x3*0xbf+-0x161+0x39e]['x'],_0x482fab[-0xa18+-0x9ef+0x1408]['x']),Math['max'](_0x482fab[0x3*-0xb32+-0x12f0+0x3488]['x'],_0x482fab[-0xf34+0x8*-0x480+0x3337]['x'])),_0x2efac0=Math['min'](Math['min'](_0x482fab[-0xd29+0x8d*0x1+0xc9c]['y'],_0x482fab[-0x2*-0x6f+0x2*-0xe6d+0x1*0x1bfd]['y']),Math['min'](_0x482fab[-0xa*0x2b9+0x3*-0x96f+0x7ef*0x7]['y'],_0x482fab[0x1a46+-0x11*-0x2f+-0x1d62]['y'])),_0x13650d=Math['max'](Math['max'](_0x482fab[0xed6+-0x525+-0x9b1]['y'],_0x482fab[-0x1022+0x47*0x29+0x7a*0xa]['y']),Math['max'](_0x482fab[-0x11d1+0x26*-0x9d+0x1*0x2921]['y'],_0x482fab[0x16b*-0x5+-0x1268+0x5*0x51a]['y']));}else{const _0x15ab11=this['system']['app']['graphicsDe'+'vice']['width'],_0x5ada06=this['system']['app']['graphicsDe'+'vice']['height'],_0x177c53=_0x3ea6b7['_rect']['z']*_0x15ab11,_0x1de493=_0x3ea6b7['_rect']['w']*_0x5ada06;_0x452d38=_0x3ea6b7['_rect']['x']*_0x15ab11,_0x54da4e=_0x452d38+_0x177c53,_0x13650d=(-0xbd+-0x1597+0x1655-_0x3ea6b7['_rect']['y'])*_0x5ada06,_0x2efac0=_0x13650d-_0x1de493;}const _0x4f857c=this['screenCorn'+'ers'],_0x242423=Math['min'](Math['min'](_0x4f857c[-0x2222+-0x1cc8+-0x2*-0x1f75]['x'],_0x4f857c[0x1fc+0x876*0x1+-0xa71]['x']),Math['min'](_0x4f857c[0x1429+-0xf4*0x19+0x1*0x3ad]['x'],_0x4f857c[-0x23f9+-0x1*0x5ef+0x29eb]['x'])),_0x1125b5=Math['max'](Math['max'](_0x4f857c[0x4cd*-0x6+0x2171*-0x1+0x3e3f]['x'],_0x4f857c[-0x1*-0x14c2+0x22f2+-0x37b3]['x']),Math['max'](_0x4f857c[0x12d6*-0x2+-0x257b+0x4b29]['x'],_0x4f857c[-0x1e*-0x6c+0x4*-0x713+0x1*0xfa7]['x'])),_0x5d3864=Math['min'](Math['min'](_0x4f857c[-0x182e+0x3a9+0x1485*0x1]['y'],_0x4f857c[0x184c+-0x1*0xbaf+-0x6*0x21a]['y']),Math['min'](_0x4f857c[0x1358+-0x1505+0x1af*0x1]['y'],_0x4f857c[-0xc59+0x20f7+-0x41f*0x5]['y'])),_0xda5d42=Math['max'](Math['max'](_0x4f857c[0x4c7*0x3+0x165b+-0x24b0]['y'],_0x4f857c[-0x278*-0x6+0x41c*-0x6+0x9d9]['y']),Math['max'](_0x4f857c[0x1429*0x1+-0x2e5+-0x1142]['y'],_0x4f857c[0x1*-0x240d+0x43e+0x1fd2]['y']));return!(_0x1125b5<_0x452d38||_0x242423>_0x54da4e||_0x5d3864>_0x13650d||_0xda5d42<_0x2efac0);}['_isScreenS'+'pace'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['screenSpac'+'e']:!(-0xd*-0x209+-0x6de*0x3+-0x5da);}['_isScreenC'+'ulled'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['cull']:!(-0x1b9d+-0x11*0x6d+-0x22db*-0x1);}['_dirtyBatc'+'h'](){var _0x3c6c48;this['batchGroup'+'Id']!==-(0x1565+0x7*-0x1cd+-0xd*0xad)&&((_0x3c6c48=this['system']['app']['batcher'])==null||_0x3c6c48['markGroupD'+'irty'](this['batchGroup'+'Id']));}}h(hs,'EVENT_MOUS'+'EDOWN','mousedown'),h(hs,'EVENT_MOUS'+'EUP','mouseup'),h(hs,'EVENT_MOUS'+'EENTER','mouseenter'),h(hs,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(hs,'EVENT_MOUS'+'EMOVE','mousemove'),h(hs,'EVENT_MOUS'+'EWHEEL','mousewheel'),h(hs,'EVENT_CLIC'+'K','click'),h(hs,'EVENT_TOUC'+'HSTART','touchstart'),h(hs,'EVENT_TOUC'+'HEND','touchend'),h(hs,'EVENT_TOUC'+'HMOVE','touchmove'),h(hs,'EVENT_TOUC'+'HCANCEL','touchcance'+'l');class jL{constructor(){this['enabled']=!(-0x631+-0x1671+0x1ca2);}}const YL=['enabled'];class KL extends ct{constructor(_0xf23b7e){super(_0xf23b7e),this['id']='element',this['ComponentT'+'ype']=hs,this['DataType']=jL,this['schema']=YL,this['_unicodeCo'+'nverter']=null,this['_rtlReorde'+'r']=null,this['_defaultTe'+'xture']=new _e(_0xf23b7e['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':_s,'name':'element-sy'+'stem'});const _0x1befba=this['_defaultTe'+'xture']['lock'](),_0x16cc86=new Uint8Array(-0x4e1*0x3+0x13ac+-0x505);_0x16cc86[0x7a+0x1*0xb4e+-0x1a*0x74]=0x20bd+-0x24ac+0x4ee,_0x16cc86[0x377*-0x5+0x1832+-0x125*0x6]=-0x1*0x23df+0x7f3+0x1ceb,_0x16cc86[-0x17d5+-0x155e*0x1+0x2d35]=-0x249b*-0x1+-0x1*0x1ad8+-0x8c4,_0x16cc86[-0x4*-0x941+0xf37+-0x4*0xd0e]=0xe1a+0x978+0x1693*-0x1,_0x1befba['set'](_0x16cc86),this['_defaultTe'+'xture']['unlock'](),this['defaultIma'+'geMaterial']=null,this['defaultIma'+'ge9SlicedM'+'aterial']=null,this['defaultIma'+'ge9TiledMa'+'terial']=null,this['defaultIma'+'geMaskMate'+'rial']=null,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=null,this['defaultIma'+'ge9TiledMa'+'skMaterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=null,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=null,this['_defaultTe'+'xtMaterial'+'s']={},this['defaultIma'+'geMaterial'+'s']=[],this['on']('add',this['onAddCompo'+'nent'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['destroy'](){super['destroy'](),this['_defaultTe'+'xture']['destroy']();}['initialize'+'ComponentD'+'ata'](_0x415790,_0x4caff9,_0x2d64b0){_0x415790['_beingInit'+'ialized']=!(-0x24ce+-0x25e*-0x3+0x1db4),_0x4caff9['anchor']!==void(0xced+0x1a87+-0x2774)&&(_0x4caff9['anchor']instanceof re?_0x415790['anchor']['copy'](_0x4caff9['anchor']):_0x415790['anchor']['set'](_0x4caff9['anchor'][-0x1dd5+0x1b91+0x244],_0x4caff9['anchor'][0x6fb+-0x2*-0x289+0x1*-0xc0c],_0x4caff9['anchor'][0x107*-0x13+-0x24cc+0x3853*0x1],_0x4caff9['anchor'][0x18e*0x16+-0x1*-0x22bf+-0x44f0])),_0x4caff9['pivot']!==void(-0x1*0x132f+0x97*0x9+-0x6*-0x250)&&(_0x4caff9['pivot']instanceof J?_0x415790['pivot']['copy'](_0x4caff9['pivot']):_0x415790['pivot']['set'](_0x4caff9['pivot'][0x83f*0x2+-0x2*-0x756+-0x1f2a],_0x4caff9['pivot'][-0x1*-0x3d1+-0x1*0x266+0x1*-0x16a]));const _0x352363=Math['abs'](_0x415790['anchor']['x']-_0x415790['anchor']['z'])>-0xef7+-0x3f8+0x12ef*0x1+0.001,_0x531b4d=Math['abs'](_0x415790['anchor']['y']-_0x415790['anchor']['w'])>0x197a+0x1*0x240b+-0x3d85*0x1+0.001;let _0x4cdcec=!(0x1f3*-0x3+-0x8*0x2ca+0x1c2a),_0x16d5a4;_0x4caff9['margin']!==void(-0x24bd+0x1e4b+0x672)&&(_0x4caff9['margin']instanceof re?_0x415790['margin']['copy'](_0x4caff9['margin']):_0x415790['_margin']['set'](_0x4caff9['margin'][-0x24bc+-0x1e6b*0x1+-0x4327*-0x1],_0x4caff9['margin'][-0x161a+-0x11*0x25+0x1890],_0x4caff9['margin'][-0x86+-0x16e+0x1f6],_0x4caff9['margin'][0x1*0x59f+-0x1640+-0x6*-0x2c6]),_0x4cdcec=!(-0x90d+-0xa*0x107+0x1353)),_0x4caff9['left']!==void(0x15b6*-0x1+0x1369+0x24d)&&(_0x415790['_margin']['x']=_0x4caff9['left'],_0x4cdcec=!(-0x26cc+-0x18*-0x9e+0xa*0x266)),_0x4caff9['bottom']!==void(0x2487*0x1+0x2+-0x2489)&&(_0x415790['_margin']['y']=_0x4caff9['bottom'],_0x4cdcec=!(-0x127f*-0x1+0x1d*0xed+0x5ab*-0x8)),_0x4caff9['right']!==void(-0x1504+0xa8d+0xa77)&&(_0x415790['_margin']['z']=_0x4caff9['right'],_0x4cdcec=!(-0x189+0x1ee9*0x1+0x1d60*-0x1)),_0x4caff9['top']!==void(-0x73e+-0x1*0x23b2+0x2af0)&&(_0x415790['_margin']['w']=_0x4caff9['top'],_0x4cdcec=!(-0x3*0x8b9+-0x2327+0x3d52)),_0x4cdcec&&(_0x415790['margin']=_0x415790['_margin']);let _0x1577df=!(-0x8*0x1f5+0x1*0xbf6+0x3b3);_0x4caff9['width']!==void(0x1*-0x933+0x20ce+-0x179b*0x1)&&!_0x352363?_0x415790['width']=_0x4caff9['width']:_0x352363&&(_0x1577df=!(-0xb7e+-0xf47+0x26f*0xb)),_0x4caff9['height']!==void(0x3*-0x223+0x875+-0x20c)&&!_0x531b4d?_0x415790['height']=_0x4caff9['height']:_0x531b4d&&(_0x1577df=!(-0xa3*0x18+0x1c6*0x11+-0xede)),_0x1577df&&(_0x415790['anchor']=_0x415790['anchor']),_0x4caff9['enabled']!==void(-0x26b1+0x87*0x1f+0x4*0x596)&&(_0x415790['enabled']=_0x4caff9['enabled']),_0x4caff9['useInput']!==void(0x1f17+0x13*0xe9+0x233*-0x16)&&(_0x415790['useInput']=_0x4caff9['useInput']),_0x4caff9['fitMode']!==void(-0x36b*0x6+-0x1*-0x1e25+-0x9a3)&&(_0x415790['fitMode']=_0x4caff9['fitMode']),_0x415790['batchGroup'+'Id']=_0x4caff9['batchGroup'+'Id']===void(-0xb*0x20e+-0x98*0x16+0xb*0x33e)||_0x4caff9['batchGroup'+'Id']===null?-(0x15cc+-0x2*-0x603+-0x21d1*0x1):_0x4caff9['batchGroup'+'Id'],_0x4caff9['layers']&&Array['isArray'](_0x4caff9['layers'])&&(_0x415790['layers']=_0x4caff9['layers']['slice'](-0x202e*0x1+0x1*-0x20a1+0x40cf)),_0x4caff9['type']!==void(0x3*0x82e+0x15d*0xa+-0x262c)&&(_0x415790['type']=_0x4caff9['type']),_0x415790['type']===tu?(_0x4caff9['rect']!==void(-0x39f+0x1*-0xe87+0x1226)&&(_0x415790['rect']=_0x4caff9['rect']),_0x4caff9['color']!==void(-0x1103+-0x2*0xad+-0x3*-0x61f)&&(_0x16d5a4=_0x4caff9['color'],_0x16d5a4 instanceof ie||(_0x16d5a4=new ie(_0x4caff9['color'][-0xd*0x2f9+-0xda3+-0x3448*-0x1],_0x4caff9['color'][-0x1576+-0x5*0x92+0x1851],_0x4caff9['color'][-0x1b*0x52+-0x2433+0x2cdb])),_0x415790['color']=_0x16d5a4),_0x4caff9['opacity']!==void(-0x13d*-0x5+0x2466+-0x1*0x2a97)&&(_0x415790['opacity']=_0x4caff9['opacity']),_0x4caff9['textureAss'+'et']!==void(0x18c3+0x137*0xd+-0x2*0x1447)&&(_0x415790['textureAss'+'et']=_0x4caff9['textureAss'+'et']),_0x4caff9['texture']&&(_0x415790['texture']=_0x4caff9['texture']),_0x4caff9['spriteAsse'+'t']!==void(0x1*0x1b95+0x31e+-0x1eb3)&&(_0x415790['spriteAsse'+'t']=_0x4caff9['spriteAsse'+'t']),_0x4caff9['sprite']&&(_0x415790['sprite']=_0x4caff9['sprite']),_0x4caff9['spriteFram'+'e']!==void(-0x16c*0xe+-0x1*-0xc2d+0x7bb*0x1)&&(_0x415790['spriteFram'+'e']=_0x4caff9['spriteFram'+'e']),_0x4caff9['pixelsPerU'+'nit']!==void(0x24db+0x1672+0x2f*-0x143)&&_0x4caff9['pixelsPerU'+'nit']!==null&&(_0x415790['pixelsPerU'+'nit']=_0x4caff9['pixelsPerU'+'nit']),_0x4caff9['materialAs'+'set']!==void(0x16f6+0xb6+-0x17ac)&&(_0x415790['materialAs'+'set']=_0x4caff9['materialAs'+'set']),_0x4caff9['material']&&(_0x415790['material']=_0x4caff9['material']),_0x4caff9['mask']!==void(0x1be*-0x2+-0x1020+0x139c)&&(_0x415790['mask']=_0x4caff9['mask'])):_0x415790['type']===fv&&(_0x4caff9['autoWidth']!==void(-0xe*-0x3d+0x1e95+-0x21eb)&&(_0x415790['autoWidth']=_0x4caff9['autoWidth']),_0x4caff9['autoHeight']!==void(0x3a*0x68+0x17c9+-0x2f59)&&(_0x415790['autoHeight']=_0x4caff9['autoHeight']),_0x4caff9['rtlReorder']!==void(0x1d*-0xd1+0x1*-0x1ac1+-0x50b*-0xa)&&(_0x415790['rtlReorder']=_0x4caff9['rtlReorder']),_0x4caff9['unicodeCon'+'verter']!==void(-0xb0*-0x1b+-0x9bb*-0x1+-0x1c4b)&&(_0x415790['unicodeCon'+'verter']=_0x4caff9['unicodeCon'+'verter']),_0x4caff9['text']!==null&&_0x4caff9['text']!==void(-0x1551+0x1c*-0xd8+0x2cf1*0x1)?_0x415790['text']=_0x4caff9['text']:_0x4caff9['key']!==null&&_0x4caff9['key']!==void(0x231d+-0xca3*0x3+0x1*0x2cc)&&(_0x415790['key']=_0x4caff9['key']),_0x4caff9['color']!==void(-0x5ad*-0x1+0xf8e+-0x153b*0x1)&&(_0x16d5a4=_0x4caff9['color'],_0x16d5a4 instanceof ie||(_0x16d5a4=new ie(_0x16d5a4[-0x1*-0x1bd+-0x16ba*-0x1+-0x1877],_0x16d5a4[-0x3*0x8db+0x20a5+0x613*-0x1],_0x16d5a4[-0xf*0xa7+0x5*0x4a2+-0xd5f])),_0x415790['color']=_0x16d5a4),_0x4caff9['opacity']!==void(0xe29+-0x2082+0xb*0x1ab)&&(_0x415790['opacity']=_0x4caff9['opacity']),_0x4caff9['spacing']!==void(0x7*-0x2c5+-0x95*0x43+0x6*0x9bb)&&(_0x415790['spacing']=_0x4caff9['spacing']),_0x4caff9['fontSize']!==void(-0x22ec+0x1a2d*0x1+0x8bf)&&(_0x415790['fontSize']=_0x4caff9['fontSize'],_0x4caff9['lineHeight']||(_0x415790['lineHeight']=_0x4caff9['fontSize'])),_0x4caff9['lineHeight']!==void(0x2*0x7c6+0x2617*-0x1+0x168b*0x1)&&(_0x415790['lineHeight']=_0x4caff9['lineHeight']),_0x4caff9['maxLines']!==void(-0x5*-0x5e1+-0x3*-0x2ad+0xa*-0x3be)&&(_0x415790['maxLines']=_0x4caff9['maxLines']),_0x4caff9['wrapLines']!==void(0x6*-0x11a+0x2632+0x1*-0x1f96)&&(_0x415790['wrapLines']=_0x4caff9['wrapLines']),_0x4caff9['minFontSiz'+'e']!==void(-0xeea+0xa42+0x4a8)&&(_0x415790['minFontSiz'+'e']=_0x4caff9['minFontSiz'+'e']),_0x4caff9['maxFontSiz'+'e']!==void(-0x30*-0x88+0x4*-0x2a5+-0xeec)&&(_0x415790['maxFontSiz'+'e']=_0x4caff9['maxFontSiz'+'e']),_0x4caff9['autoFitWid'+'th']&&(_0x415790['autoFitWid'+'th']=_0x4caff9['autoFitWid'+'th']),_0x4caff9['autoFitHei'+'ght']&&(_0x415790['autoFitHei'+'ght']=_0x4caff9['autoFitHei'+'ght']),_0x4caff9['fontAsset']!==void(0xf71+-0x43+-0x3a*0x43)&&(_0x415790['fontAsset']=_0x4caff9['fontAsset']),_0x4caff9['font']!==void(0x924+0x2484+-0x16d4*0x2)&&(_0x415790['font']=_0x4caff9['font']),_0x4caff9['alignment']!==void(-0x9c8+-0xec4+0x188c)&&(_0x415790['alignment']=_0x4caff9['alignment']),_0x4caff9['outlineCol'+'or']!==void(-0x1719+0x1950+-0x1*0x237)&&(_0x415790['outlineCol'+'or']=_0x4caff9['outlineCol'+'or']),_0x4caff9['outlineThi'+'ckness']!==void(0x1c0e+-0x1cd6+0xc8)&&(_0x415790['outlineThi'+'ckness']=_0x4caff9['outlineThi'+'ckness']),_0x4caff9['shadowColo'+'r']!==void(0x780+-0x2315+0x1b95)&&(_0x415790['shadowColo'+'r']=_0x4caff9['shadowColo'+'r']),_0x4caff9['shadowOffs'+'et']!==void(-0x1898+0x1340+0x558)&&(_0x415790['shadowOffs'+'et']=_0x4caff9['shadowOffs'+'et']),_0x4caff9['enableMark'+'up']!==void(0xfb6+-0x463+0x1*-0xb53)&&(_0x415790['enableMark'+'up']=_0x4caff9['enableMark'+'up']));const _0x4b2bcf=_0x415790['_parseUpTo'+'Screen']();_0x4b2bcf['screen']&&_0x415790['_updateScr'+'een'](_0x4b2bcf['screen']),super['initialize'+'ComponentD'+'ata'](_0x415790,_0x4caff9,_0x2d64b0),_0x415790['_beingInit'+'ialized']=!(0x2355+0x2658+-0x19a*0x2e),_0x415790['type']===tu&&_0x415790['_image']['_meshDirty']&&_0x415790['_image']['_updateMes'+'h'](_0x415790['_image']['mesh']);}['onAddCompo'+'nent'](_0x18ff6c,_0x2f8650){_0x18ff6c['fire']('element:ad'+'d');}['onRemoveCo'+'mponent'](_0x522f09,_0x6e9158){_0x6e9158['onRemove']();}['cloneCompo'+'nent'](_0x5cc25a,_0x56c260){const _0x28099c=_0x5cc25a['element'],_0x2e0ea1={'enabled':_0x28099c['enabled'],'width':_0x28099c['width'],'height':_0x28099c['height'],'anchor':_0x28099c['anchor']['clone'](),'pivot':_0x28099c['pivot']['clone'](),'margin':_0x28099c['margin']['clone'](),'alignment':_0x28099c['alignment']&&_0x28099c['alignment']['clone']()||_0x28099c['alignment'],'autoWidth':_0x28099c['autoWidth'],'autoHeight':_0x28099c['autoHeight'],'type':_0x28099c['type'],'rect':_0x28099c['rect']&&_0x28099c['rect']['clone']()||_0x28099c['rect'],'rtlReorder':_0x28099c['rtlReorder'],'unicodeConverter':_0x28099c['unicodeCon'+'verter'],'materialAsset':_0x28099c['materialAs'+'set'],'material':_0x28099c['material'],'color':_0x28099c['color']&&_0x28099c['color']['clone']()||_0x28099c['color'],'opacity':_0x28099c['opacity'],'textureAsset':_0x28099c['textureAss'+'et'],'texture':_0x28099c['texture'],'spriteAsset':_0x28099c['spriteAsse'+'t'],'sprite':_0x28099c['sprite'],'spriteFrame':_0x28099c['spriteFram'+'e'],'pixelsPerUnit':_0x28099c['pixelsPerU'+'nit'],'spacing':_0x28099c['spacing'],'lineHeight':_0x28099c['lineHeight'],'wrapLines':_0x28099c['wrapLines'],'layers':_0x28099c['layers'],'fontSize':_0x28099c['fontSize'],'minFontSize':_0x28099c['minFontSiz'+'e'],'maxFontSize':_0x28099c['maxFontSiz'+'e'],'autoFitWidth':_0x28099c['autoFitWid'+'th'],'autoFitHeight':_0x28099c['autoFitHei'+'ght'],'maxLines':_0x28099c['maxLines'],'fontAsset':_0x28099c['fontAsset'],'font':_0x28099c['font'],'useInput':_0x28099c['useInput'],'fitMode':_0x28099c['fitMode'],'batchGroupId':_0x28099c['batchGroup'+'Id'],'mask':_0x28099c['mask'],'outlineColor':_0x28099c['outlineCol'+'or']&&_0x28099c['outlineCol'+'or']['clone']()||_0x28099c['outlineCol'+'or'],'outlineThickness':_0x28099c['outlineThi'+'ckness'],'shadowColor':_0x28099c['shadowColo'+'r']&&_0x28099c['shadowColo'+'r']['clone']()||_0x28099c['shadowColo'+'r'],'shadowOffset':_0x28099c['shadowOffs'+'et']&&_0x28099c['shadowOffs'+'et']['clone']()||_0x28099c['shadowOffs'+'et'],'enableMarkup':_0x28099c['enableMark'+'up']};return _0x28099c['key']!==void(-0x16c3*0x1+-0x179b+-0x5*-0x946)&&_0x28099c['key']!==null?_0x2e0ea1['key']=_0x28099c['key']:_0x2e0ea1['text']=_0x28099c['text'],this['addCompone'+'nt'](_0x56c260,_0x2e0ea1);}['getTextEle'+'mentMateri'+'al'](_0x100237,_0x4e0ced,_0x4e5f38){const _0x3bb483=(_0x100237&&0x183b+-0x1a06+0x1cc*0x1)|(_0x4e0ced&&0xf0e+0x1c30+-0x2b3c)|(_0x4e5f38&&-0xd24+0x808+0x520);let _0x2b5dea=this['_defaultTe'+'xtMaterial'+'s'][_0x3bb483];if(_0x2b5dea)return _0x2b5dea;let _0x11fd60='TextMateri'+'al';return _0x2b5dea=new Ut(),_0x4e0ced?(_0x2b5dea['msdfMap']=this['_defaultTe'+'xture'],_0x2b5dea['msdfTextAt'+'tribute']=_0x4e5f38,_0x2b5dea['emissive']['set'](0x1c62+0x251*-0x10+0x13*0x75,0x35*0xa2+-0x4d*-0x81+-0x4856,0xd9b*-0x1+-0x1207+-0x7*-0x485)):(_0x11fd60='Bitmap'+_0x11fd60,_0x2b5dea['emissive']['set'](0x1cae+0x542*0x4+-0x31b5,-0xee3+-0x1*-0x1c83+-0xd9f,-0x6d*0x2d+-0x1805+0x14f*0x21),_0x2b5dea['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x2b5dea['opacityMap']=this['_defaultTe'+'xture'],_0x2b5dea['opacityMap'+'Channel']='a'),_0x100237&&(_0x11fd60='ScreenSpac'+'e'+_0x11fd60,_0x2b5dea['depthTest']=!(0x2218+-0x46d+-0x1daa)),_0x2b5dea['name']='default'+_0x11fd60,_0x2b5dea['useLightin'+'g']=!(0x7*0x350+0x2*0x1229+-0x3b81),_0x2b5dea['useTonemap']=!(-0x2f1+-0x1aaa*-0x1+-0x2e*0x84),_0x2b5dea['useFog']=!(0x40c+0x1*-0xbb3+-0x8c*-0xe),_0x2b5dea['useSkybox']=!(-0xfae+-0x208d*0x1+0x303c),_0x2b5dea['diffuse']['set'](-0xe3*0x27+0x64f+0x2*0xe23,-0x19fc+0x2*-0x6d6+-0x9*-0x468,-0x1*-0x33d+-0x13db+-0x109e*-0x1),_0x2b5dea['opacity']=-0x1ec1+-0x5cb*0x1+0x248c+0.5,_0x2b5dea['blendType']=Fn,_0x2b5dea['depthWrite']=!(0x1*0x8ec+-0x196e+0x1083),_0x2b5dea['emissiveVe'+'rtexColor']=!(-0x102d+-0x23fc+0x3429*0x1),_0x2b5dea['update'](),this['_defaultTe'+'xtMaterial'+'s'][_0x3bb483]=_0x2b5dea,_0x2b5dea;}['_createBas'+'eImageMate'+'rial'](){const _0x2deded=new Ut();return _0x2deded['diffuse']['set'](-0x1*-0x11a1+-0xbe*-0x23+0x3d*-0xb7,0xa5f+0x1d56+-0x13*0x217,-0x6df*0x3+0x20a*-0x2+-0x18b1*-0x1),_0x2deded['emissive']['set'](0x2f*-0x26+-0x22d*0x8+-0x3*-0x821,0x12ef+0xb5*0x34+-0x37b2,-0x25aa+-0x3*0x2e7+0x2e60),_0x2deded['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x2deded['opacityMap']=this['_defaultTe'+'xture'],_0x2deded['opacityMap'+'Channel']='a',_0x2deded['useLightin'+'g']=!(-0x13b5+0x1890+-0x4da),_0x2deded['useTonemap']=!(-0x1*-0x4a6+-0x563*-0x5+-0x1f94),_0x2deded['useFog']=!(-0x2ed+0x1*-0x17a5+-0x1a93*-0x1),_0x2deded['useSkybox']=!(0x1d13+-0x1f*-0x1f+-0x3*0xaf1),_0x2deded['blendType']=Fn,_0x2deded['depthWrite']=!(0x10*-0x29+0x12da+-0x1*0x1049),_0x2deded;}['getImageEl'+'ementMater'+'ial'](_0x1f65c4,_0x79f6b2,_0x23b33b,_0x640cc4){return _0x1f65c4?_0x79f6b2?_0x23b33b?(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al',this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['nineSliced'+'Mode']=Pt,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['depthTest']=!(0x831+-0x10aa+0x87a),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaTest']=-0x5*-0x107+-0x1b1*0x17+-0x299*-0xd,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['redWrite']=!(0x14b8+-0xbdb*0x1+-0x8dc),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['greenWrite']=!(-0xde9*0x2+0x2460+0xb*-0xc7),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['blueWrite']=!(-0x81*-0x4d+-0xc57+-0x1a75),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaWrite']=!(-0x1828+-0x11*0x23c+0x3e25),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']):_0x640cc4?(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['clone'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['nineSliced'+'Mode']=Mt,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['depthTest']=!(-0x5f3*0x4+0x175d*0x1+0x70),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaTest']=0x25bf+0x165*0x4+0x1*-0x2b52,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['redWrite']=!(-0x24da+-0x2f*-0xd3+0xf1*-0x2),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['greenWrite']=!(0xdaa+0x2434+-0x31dd),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['blueWrite']=!(-0x1d*0x43+0x204b*0x1+0x18b3*-0x1),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaWrite']=!(-0x1*-0x19bd+0x172b+0x3*-0x104d),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']):(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']||(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['name']='defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial',this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['depthTest']=!(0xc*-0x163+-0x2512+0x35b7*0x1),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaTest']=0x1*0x19b5+-0x157d+0x1*-0x437,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['redWrite']=!(0x188*0x10+0x236*0xd+-0x353d),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['greenWrite']=!(0x13de*0x1+-0x1724+0x347),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['blueWrite']=!(-0x1*-0x9e4+0x2*-0x349+0x351*-0x1),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaWrite']=!(-0x126d+-0xd6c+0xa9e*0x3),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial'])),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']):_0x23b33b?(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']||(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['name']='defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material',this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['nineSliced'+'Mode']=Pt,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['depthTest']=!(0x489+0x1*-0x12dc+0x106*0xe),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material'])),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']):_0x640cc4?(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']||(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['name']='defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial',this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['nineSliced'+'Mode']=Mt,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['depthTest']=!(0x4*-0x616+0x48b*0x7+-0x1dd*0x4),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial'])),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']):(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['depthTest']=!(0x1696+-0x42*-0x57+0xf01*-0x3),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']):_0x79f6b2?_0x23b33b?(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']||(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['name']='defaultIma'+'ge9SlicedM'+'askMateria'+'l',this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['nineSliced'+'Mode']=Pt,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaTest']=-0x2e9+-0x2dd*0xb+0x2269,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['redWrite']=!(-0x1*0x95b+-0x13cc+0xc*0x26e),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['greenWrite']=!(-0x4bb+0x1*0x1c96+-0x2*0xbed),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['blueWrite']=!(-0x163*-0xb+-0x1*-0x1b87+-0x2ac7),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaWrite']=!(-0x562*-0x1+0x184*-0x7+0x53b*0x1),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'askMateria'+'l'])),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']):_0x640cc4?(this['defaultIma'+'ge9TiledMa'+'skMaterial']||(this['defaultIma'+'ge9TiledMa'+'skMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'skMaterial']['name']='defaultIma'+'ge9TiledMa'+'skMaterial',this['defaultIma'+'ge9TiledMa'+'skMaterial']['nineSliced'+'Mode']=Mt,this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaTest']=-0xdb4+-0x1c9f+-0x102*-0x2a,this['defaultIma'+'ge9TiledMa'+'skMaterial']['redWrite']=!(0x3*0x909+-0x260e*0x1+-0x1*-0xaf4),this['defaultIma'+'ge9TiledMa'+'skMaterial']['greenWrite']=!(0x3f3*0x5+0xb*-0xb3+-0xc0d),this['defaultIma'+'ge9TiledMa'+'skMaterial']['blueWrite']=!(0x24db+-0x1e+-0x24bc*0x1),this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaWrite']=!(-0x24e1+-0x1fd2*-0x1+0x510*0x1),this['defaultIma'+'ge9TiledMa'+'skMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'skMaterial'])),this['defaultIma'+'ge9TiledMa'+'skMaterial']):(this['defaultIma'+'geMaskMate'+'rial']||(this['defaultIma'+'geMaskMate'+'rial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaskMate'+'rial']['name']='defaultIma'+'geMaskMate'+'rial',this['defaultIma'+'geMaskMate'+'rial']['alphaTest']=0x9a3+0x3*-0x74f+-0x1*-0xc4b,this['defaultIma'+'geMaskMate'+'rial']['redWrite']=!(0xd*0x25b+0x291*0x1+-0x6a3*0x5),this['defaultIma'+'geMaskMate'+'rial']['greenWrite']=!(0x1acc+-0x151+-0x43f*0x6),this['defaultIma'+'geMaskMate'+'rial']['blueWrite']=!(0x1*0x11ad+-0x1347+0x19b*0x1),this['defaultIma'+'geMaskMate'+'rial']['alphaWrite']=!(-0x1cd4+-0x74b+0x2420),this['defaultIma'+'geMaskMate'+'rial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaskMate'+'rial'])),this['defaultIma'+'geMaskMate'+'rial']):_0x23b33b?(this['defaultIma'+'ge9SlicedM'+'aterial']||(this['defaultIma'+'ge9SlicedM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'aterial']['name']='defaultIma'+'ge9SlicedM'+'aterial',this['defaultIma'+'ge9SlicedM'+'aterial']['nineSliced'+'Mode']=Pt,this['defaultIma'+'ge9SlicedM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'aterial'])),this['defaultIma'+'ge9SlicedM'+'aterial']):_0x640cc4?(this['defaultIma'+'ge9TiledMa'+'terial']||(this['defaultIma'+'ge9TiledMa'+'terial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'terial']['name']='defaultIma'+'ge9TiledMa'+'terial',this['defaultIma'+'ge9TiledMa'+'terial']['nineSliced'+'Mode']=Mt,this['defaultIma'+'ge9TiledMa'+'terial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'terial'])),this['defaultIma'+'ge9TiledMa'+'terial']):(this['defaultIma'+'geMaterial']||(this['defaultIma'+'geMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaterial']['name']='defaultIma'+'geMaterial',this['defaultIma'+'geMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaterial'])),this['defaultIma'+'geMaterial']);}['registerUn'+'icodeConve'+'rter'](_0x5e0f27){this['_unicodeCo'+'nverter']=_0x5e0f27;}['registerRt'+'lReorder'](_0x10453d){this['_rtlReorde'+'r']=_0x10453d;}['getUnicode'+'Converter'](){return this['_unicodeCo'+'nverter'];}['getRtlReor'+'der'](){return this['_rtlReorde'+'r'];}}const Va='free',Ga='limited',Ha='locked',ZL=['angularDam'+'pingX','angularDam'+'pingY','angularDam'+'pingZ','angularEqu'+'ilibriumX','angularEqu'+'ilibriumY','angularEqu'+'ilibriumZ','angularLim'+'itsX','angularLim'+'itsY','angularLim'+'itsZ','angularMot'+'ionX','angularMot'+'ionY','angularMot'+'ionZ','angularSpr'+'ingX','angularSpr'+'ingY','angularSpr'+'ingZ','angularSti'+'ffnessX','angularSti'+'ffnessY','angularSti'+'ffnessZ','breakForce','enableColl'+'ision','enabled','entityA','entityB','linearDamp'+'ingX','linearDamp'+'ingY','linearDamp'+'ingZ','linearEqui'+'libriumX','linearEqui'+'libriumY','linearEqui'+'libriumZ','linearLimi'+'tsX','linearLimi'+'tsY','linearLimi'+'tsZ','linearMoti'+'onX','linearMoti'+'onY','linearMoti'+'onZ','linearSpri'+'ngX','linearSpri'+'ngY','linearSpri'+'ngZ','linearStif'+'fnessX','linearStif'+'fnessY','linearStif'+'fnessZ'];class Xp extends we{constructor(_0x5cd8b8,_0x5a7d30){super(_0x5cd8b8,_0x5a7d30),w['assert'](typeof Ammo<'u','ERROR:\x20Att'+'empting\x20to'+'\x20create\x20a\x20'+'pc.JointCo'+'mponent\x20bu'+'t\x20Ammo.js\x20'+'is\x20not\x20loa'+'ded'),this['_constrain'+'t']=null,this['_entityA']=null,this['_entityB']=null,this['_breakForc'+'e']=0xffc99e3c66fd68000000000000000000,this['_enableCol'+'lision']=!(-0x5*-0x3c6+0x1e80+-0x315e),this['_linearMot'+'ionX']=Ha,this['_linearLim'+'itsX']=new J(0x2*0x11c2+-0x1*-0x432+0x1ba*-0x17,0x12*-0x103+0x551+-0x1*-0xce5),this['_linearSpr'+'ingX']=!(-0x1*-0x39+0xed4+-0xf0c),this['_linearSti'+'ffnessX']=-0x1194+0xefc+0x298,this['_linearDam'+'pingX']=0x59*0x10+0x3*-0x565+0x4*0x2a8,this['_linearEqu'+'ilibriumX']=-0xaaf*0x3+0x13*0x1a5+-0xce*-0x1,this['_linearMot'+'ionY']=Ha,this['_linearLim'+'itsY']=new J(-0x1c40+0x253d+0x8fd*-0x1,0x1201+-0x26dc*-0x1+0x38dd*-0x1),this['_linearSpr'+'ingY']=!(-0x1522+-0x8b*-0x2e+-0x3d7),this['_linearSti'+'ffnessY']=-0xb*-0xa4+0x1*0x19d+-0x8a9*0x1,this['_linearDam'+'pingY']=-0x1*0xe5d+0x6*0x19b+0x4bc,this['_linearEqu'+'ilibriumY']=-0x1*-0x2397+0x96b*0x1+-0x2d02,this['_linearMot'+'ionZ']=Ha,this['_linearLim'+'itsZ']=new J(-0x2*0x5ad+-0x15d0+0x212a,-0x1*0x1302+0xb92+-0xee*-0x8),this['_linearSpr'+'ingZ']=!(0x1a5*-0x2+0x1a50+-0x53*0x47),this['_linearSti'+'ffnessZ']=0x18a5+0x1a1*0x17+0x14b4*-0x3,this['_linearDam'+'pingZ']=0x19*-0xb9+0x1a3b+-0x829,this['_linearEqu'+'ilibriumZ']=-0x23*0xbf+-0xf2c*-0x1+-0xaf1*-0x1,this['_angularMo'+'tionX']=Ha,this['_angularLi'+'mitsX']=new J(0x1*-0x162d+-0x2176+0x1*0x37a3,-0x18d6+-0x119b*0x2+0x3c0c),this['_angularSp'+'ringX']=!(0x25a3+0x211c+-0x46be),this['_angularSt'+'iffnessX']=0xd74+0xc86*0x3+0x6*-0x881,this['_angularDa'+'mpingX']=0xa5c+-0x56*0x31+0x61b,this['_angularEq'+'uilibriumX']=-0x176*-0x5+-0x11dc*0x2+0xe35*0x2,this['_angularMo'+'tionY']=Ha,this['_angularLi'+'mitsY']=new J(0x5*0x61f+-0xbd2+-0x12c9,0x23*0x28+-0x7*-0x155+-0xecb*0x1),this['_angularSp'+'ringY']=!(-0xd93+0x7*0x8+-0x3c*-0x39),this['_angularSt'+'iffnessY']=0x169a*-0x1+0x993*-0x1+-0x1*-0x202d,this['_angularDa'+'mpingY']=-0x803*-0x3+-0x19eb+-0x15*-0x17,this['_angularEq'+'uilibriumY']=-0x1*0x1639+0x4*0x57a+0x51,this['_angularMo'+'tionZ']=Ha,this['_angularLi'+'mitsZ']=new J(0x6*0x1ff+0x2005+-0x649*0x7,0x1660+-0x13ff+0x1d*-0x15),this['_angularSp'+'ringZ']=!(0x159d+0x11*0x167+-0x2d73),this['_angularEq'+'uilibriumZ']=0x1*0x761+-0x6bd+0xa4*-0x1,this['_angularDa'+'mpingZ']=0xbd4+0x1b6b+0x2*-0x139f,this['_angularSt'+'iffnessZ']=0x2555+-0x1*0x14c4+-0x1*0x1091,this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['entityA'](_0x5eb2d9){this['_destroyCo'+'nstraint'](),this['_entityA']=_0x5eb2d9,this['_createCon'+'straint']();}get['entityA'](){return this['_entityA'];}set['entityB'](_0x6e71b4){this['_destroyCo'+'nstraint'](),this['_entityB']=_0x6e71b4,this['_createCon'+'straint']();}get['entityB'](){return this['_entityB'];}set['breakForce'](_0x2960d2){this['_constrain'+'t']&&this['_breakForc'+'e']!==_0x2960d2&&(this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](_0x2960d2),this['_breakForc'+'e']=_0x2960d2);}get['breakForce'](){return this['_breakForc'+'e'];}set['enableColl'+'ision'](_0x579cc0){this['_destroyCo'+'nstraint'](),this['_enableCol'+'lision']=_0x579cc0,this['_createCon'+'straint']();}get['enableColl'+'ision'](){return this['_enableCol'+'lision'];}set['angularLim'+'itsX'](_0x39ff48){this['_angularLi'+'mitsX']['equals'](_0x39ff48)||(this['_angularLi'+'mitsX']['copy'](_0x39ff48),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsX'](){return this['_angularLi'+'mitsX'];}set['angularMot'+'ionX'](_0x41c7b8){this['_angularMo'+'tionX']!==_0x41c7b8&&(this['_angularMo'+'tionX']=_0x41c7b8,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionX'](){return this['_angularMo'+'tionX'];}set['angularLim'+'itsY'](_0x230fe6){this['_angularLi'+'mitsY']['equals'](_0x230fe6)||(this['_angularLi'+'mitsY']['copy'](_0x230fe6),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsY'](){return this['_angularLi'+'mitsY'];}set['angularMot'+'ionY'](_0x4b0e37){this['_angularMo'+'tionY']!==_0x4b0e37&&(this['_angularMo'+'tionY']=_0x4b0e37,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionY'](){return this['_angularMo'+'tionY'];}set['angularLim'+'itsZ'](_0x4344da){this['_angularLi'+'mitsZ']['equals'](_0x4344da)||(this['_angularLi'+'mitsZ']['copy'](_0x4344da),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsZ'](){return this['_angularLi'+'mitsZ'];}set['angularMot'+'ionZ'](_0x534462){this['_angularMo'+'tionZ']!==_0x534462&&(this['_angularMo'+'tionZ']=_0x534462,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionZ'](){return this['_angularMo'+'tionZ'];}set['linearLimi'+'tsX'](_0x532f4d){this['_linearLim'+'itsX']['equals'](_0x532f4d)||(this['_linearLim'+'itsX']['copy'](_0x532f4d),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsX'](){return this['_linearLim'+'itsX'];}set['linearMoti'+'onX'](_0x22ccef){this['_linearMot'+'ionX']!==_0x22ccef&&(this['_linearMot'+'ionX']=_0x22ccef,this['_updateLin'+'earLimits']());}get['linearMoti'+'onX'](){return this['_linearMot'+'ionX'];}set['linearLimi'+'tsY'](_0x107664){this['_linearLim'+'itsY']['equals'](_0x107664)||(this['_linearLim'+'itsY']['copy'](_0x107664),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsY'](){return this['_linearLim'+'itsY'];}set['linearMoti'+'onY'](_0x5e4ad9){this['_linearMot'+'ionY']!==_0x5e4ad9&&(this['_linearMot'+'ionY']=_0x5e4ad9,this['_updateLin'+'earLimits']());}get['linearMoti'+'onY'](){return this['_linearMot'+'ionY'];}set['linearLimi'+'tsZ'](_0x23bc81){this['_linearLim'+'itsZ']['equals'](_0x23bc81)||(this['_linearLim'+'itsZ']['copy'](_0x23bc81),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsZ'](){return this['_linearLim'+'itsZ'];}set['linearMoti'+'onZ'](_0x3c7395){this['_linearMot'+'ionZ']!==_0x3c7395&&(this['_linearMot'+'ionZ']=_0x3c7395,this['_updateLin'+'earLimits']());}get['linearMoti'+'onZ'](){return this['_linearMot'+'ionZ'];}['_convertTr'+'ansform'](_0x34d60c,_0x380bbd){const _0x1e0cc8=_0x34d60c['getTransla'+'tion'](),_0x42ed40=new le();_0x42ed40['setFromMat'+'4'](_0x34d60c);const _0x4b8e37=new Ammo['btVector3'](_0x1e0cc8['x'],_0x1e0cc8['y'],_0x1e0cc8['z']),_0xfa546d=new Ammo['btQuaterni'+'on'](_0x42ed40['x'],_0x42ed40['y'],_0x42ed40['z'],_0x42ed40['w']);_0x380bbd['setOrigin'](_0x4b8e37),_0x380bbd['setRotatio'+'n'](_0xfa546d),Ammo['destroy'](_0x4b8e37),Ammo['destroy'](_0xfa546d);}['_updateAng'+'ularLimits'](){const _0x371616=this['_constrain'+'t'];if(_0x371616){let _0x498c8c,_0x41358d,_0x21bf96,_0x2ea04a,_0x2cb0b9,_0x1ee530;this['_angularMo'+'tionX']===Ga?(_0x498c8c=this['_angularLi'+'mitsX']['x']*Y['DEG_TO_RAD'],_0x2ea04a=this['_angularLi'+'mitsX']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionX']===Va?(_0x498c8c=-0xa69+0x1*0x1e01+0x5*-0x3eb,_0x2ea04a=0x6fc+-0x1183*0x1+0xa87):_0x498c8c=_0x2ea04a=-0x2*-0x245+0x5f4*-0x1+0x16a*0x1,this['_angularMo'+'tionY']===Ga?(_0x41358d=this['_angularLi'+'mitsY']['x']*Y['DEG_TO_RAD'],_0x2cb0b9=this['_angularLi'+'mitsY']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionY']===Va?(_0x41358d=0x9e1+0x3*-0x73e+-0xbda*-0x1,_0x2cb0b9=-0x1c5a+-0x1*-0x272+0xcf4*0x2):_0x41358d=_0x2cb0b9=0x15b7+-0x22e3+-0xd2c*-0x1,this['_angularMo'+'tionZ']===Ga?(_0x21bf96=this['_angularLi'+'mitsZ']['x']*Y['DEG_TO_RAD'],_0x1ee530=this['_angularLi'+'mitsZ']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionZ']===Va?(_0x21bf96=-0x12ae+0x1*-0xf59+0x441*0x8,_0x1ee530=-0x2453+-0x739+0x2b8c):_0x21bf96=_0x1ee530=-0x26e1+0x10db*-0x2+0x4897;const _0x4c1ed7=new Ammo['btVector3'](_0x498c8c,_0x41358d,_0x21bf96);_0x371616['setAngular'+'LowerLimit'](_0x4c1ed7),_0x4c1ed7['setValue'](_0x2ea04a,_0x2cb0b9,_0x1ee530),_0x371616['setAngular'+'UpperLimit'](_0x4c1ed7),Ammo['destroy'](_0x4c1ed7);}}['_updateLin'+'earLimits'](){const _0x28414e=this['_constrain'+'t'];if(_0x28414e){let _0x572c2c,_0x55bbb7,_0x39b772,_0x1d1564,_0x3dade3,_0x2d0b5a;this['_linearMot'+'ionX']===Ga?(_0x572c2c=this['_linearLim'+'itsX']['x'],_0x1d1564=this['_linearLim'+'itsX']['y']):this['_linearMot'+'ionX']===Va?(_0x572c2c=-0x121c*0x2+0x5*-0x57f+0x6*0xa9e,_0x1d1564=0xf3c+0x2*0x119+-0x116e):_0x572c2c=_0x1d1564=0x1654+-0xcf5*-0x1+-0x2349,this['_linearMot'+'ionY']===Ga?(_0x55bbb7=this['_linearLim'+'itsY']['x'],_0x3dade3=this['_linearLim'+'itsY']['y']):this['_linearMot'+'ionY']===Va?(_0x55bbb7=0x11f7+-0x10ae*-0x1+-0x22a4,_0x3dade3=-0x2a9*0x3+-0x166*0xb+0x175d):_0x55bbb7=_0x3dade3=-0x17*-0x17+0x2*0x381+0x65*-0x17,this['_linearMot'+'ionZ']===Ga?(_0x39b772=this['_linearLim'+'itsZ']['x'],_0x2d0b5a=this['_linearLim'+'itsZ']['y']):this['_linearMot'+'ionZ']===Va?(_0x39b772=-0xfe*0x12+0x3f5*0x5+0x4*-0x7b,_0x2d0b5a=0xa9c*-0x1+-0x5e9+0x1085):_0x39b772=_0x2d0b5a=-0xa*0x167+-0x1*-0xeb4+-0x57*0x2;const _0x4ecfac=new Ammo['btVector3'](_0x572c2c,_0x55bbb7,_0x39b772);_0x28414e['setLinearL'+'owerLimit'](_0x4ecfac),_0x4ecfac['setValue'](_0x1d1564,_0x3dade3,_0x2d0b5a),_0x28414e['setLinearU'+'pperLimit'](_0x4ecfac),Ammo['destroy'](_0x4ecfac);}}['_createCon'+'straint'](){if(this['_entityA']&&this['_entityA']['rigidbody']){this['_destroyCo'+'nstraint']();const _0x274537=new te(),_0x206dfa=this['_entityA']['rigidbody']['body'];_0x206dfa['activate']();const _0x4defa4=this['entity']['getWorldTr'+'ansform'](),_0x5393af=this['_entityA']['getWorldTr'+'ansform']()['clone']()['invert']();_0x274537['mul2'](_0x5393af,_0x4defa4);const _0x4edce8=new Ammo['btTransfor'+'m']();if(this['_convertTr'+'ansform'](_0x274537,_0x4edce8),this['_entityB']&&this['_entityB']['rigidbody']){const _0x29002b=this['_entityB']['rigidbody']['body'];_0x29002b['activate']();const _0x2dd2ca=this['_entityB']['getWorldTr'+'ansform']()['clone']()['invert']();_0x274537['mul2'](_0x2dd2ca,_0x4defa4);const _0x121406=new Ammo['btTransfor'+'m']();this['_convertTr'+'ansform'](_0x274537,_0x121406),this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x206dfa,_0x29002b,_0x4edce8,_0x121406,!this['_enableCol'+'lision']),Ammo['destroy'](_0x121406);}else this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x206dfa,_0x4edce8,!this['_enableCol'+'lision']);Ammo['destroy'](_0x4edce8);const _0x4569c2=['X','Y','Z','X','Y','Z'];for(let _0x35b05b=-0x2432+-0x12f6+0x3728;_0x35b05b<0x7b1+0x15*-0x163+0x1574;_0x35b05b++){const _0x280494=_0x35b05b<-0x1*-0x1965+0x3e5*0x1+0x1d47*-0x1?'_linear':'_angular';this['_constrain'+'t']['enableSpri'+'ng'](_0x35b05b,this[_0x280494+'Spring'+_0x4569c2[_0x35b05b]]),this['_constrain'+'t']['setDamping'](_0x35b05b,this[_0x280494+'Damping'+_0x4569c2[_0x35b05b]]),this['_constrain'+'t']['setEquilib'+'riumPoint'](_0x35b05b,this[_0x280494+('Equilibriu'+'m')+_0x4569c2[_0x35b05b]]),this['_constrain'+'t']['setStiffne'+'ss'](_0x35b05b,this[_0x280494+'Stiffness'+_0x4569c2[_0x35b05b]]);}this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](this['_breakForc'+'e']),this['_updateLin'+'earLimits'](),this['_updateAng'+'ularLimits'](),this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['addConstra'+'int'](this['_constrain'+'t'],!this['_enableCol'+'lision']);}}['_destroyCo'+'nstraint'](){this['_constrain'+'t']&&(this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['removeCons'+'traint'](this['_constrain'+'t']),Ammo['destroy'](this['_constrain'+'t']),this['_constrain'+'t']=null);}['initFromDa'+'ta'](_0x21feb3){for(const _0x1162c6 of ZL)_0x21feb3['hasOwnProp'+'erty'](_0x1162c6)&&(_0x21feb3[_0x1162c6]instanceof J?this['_'+_0x1162c6]['copy'](_0x21feb3[_0x1162c6]):this['_'+_0x1162c6]=_0x21feb3[_0x1162c6]);this['_createCon'+'straint']();}['onEnable'](){this['_createCon'+'straint']();}['onDisable'](){this['_destroyCo'+'nstraint']();}['_onSetEnab'+'led'](_0xa5d0b0,_0x25bed5,_0x3ac283){}['_onBeforeR'+'emove'](){this['fire']('remove');}}const QL={'Damping':'setDamping','Equilibrium':'setEquilib'+'riumPoint','Spring':'enableSpri'+'ng','Stiffness':'setStiffne'+'ss'};['linear','angular']['forEach'](_0x247e77=>{['Damping','Equilibriu'+'m','Spring','Stiffness']['forEach'](_0x556945=>{['X','Y','Z']['forEach'](_0xbba976=>{const _0x3aa8fe=_0x247e77+_0x556945+_0xbba976,_0x42a4a5='_'+_0x3aa8fe;let _0x33e498=_0x247e77==='linear'?0xc83*-0x1+-0x1a20+0x26a3:0x22c2+0x265b+-0x491a;_0xbba976==='Y'&&(_0x33e498+=-0x1*0xb41+0x12bf*-0x1+0x1e01),_0xbba976==='Z'&&(_0x33e498+=-0x2f+-0x235c+0x238d),Object['defineProp'+'erty'](Xp['prototype'],_0x3aa8fe,{'get':function(){return this[_0x42a4a5];},'set':function(_0x9227a8){this[_0x42a4a5]!==_0x9227a8&&(this[_0x42a4a5]=_0x9227a8,this['_constrain'+'t'][QL[_0x556945]](_0x33e498,_0x9227a8));}});});});});class JL{constructor(){this['enabled']=!(0x169+-0x6fe+0x595*0x1);}}const cu=['enabled'];class eR extends ct{constructor(_0x24643b){super(_0x24643b),this['id']='joint',this['app']=_0x24643b,this['ComponentT'+'ype']=Xp,this['DataType']=JL,this['schema']=cu;}['initialize'+'ComponentD'+'ata'](_0x57b40f,_0x1edff8,_0xfb69e3){_0x57b40f['initFromDa'+'ta'](_0x1edff8),super['initialize'+'ComponentD'+'ata'](_0x57b40f,_0x1edff8,cu);}}we['_buildAcce'+'ssors'](Xp['prototype'],cu);class gv extends we{constructor(){super(...arguments),h(this,'_minWidth',0x2196+0x124b*0x1+0x1*-0x33e1),h(this,'_minHeight',0x120c+-0x26e3+-0x14d7*-0x1),h(this,'_maxWidth',null),h(this,'_maxHeight',null),h(this,'_fitWidthP'+'roportion',-0x24eb+0x29*0x81+0x1042),h(this,'_fitHeight'+'Proportion',-0x2331+0x14cd+0xc*0x133),h(this,'_excludeFr'+'omLayout',!(-0x15*0x1db+-0x1*0x18e6+0x3fde));}set['minWidth'](_0x49e7ee){_0x49e7ee!==this['_minWidth']&&(this['_minWidth']=_0x49e7ee,this['fire']('resize'));}get['minWidth'](){return this['_minWidth'];}set['minHeight'](_0x1d37f6){_0x1d37f6!==this['_minHeight']&&(this['_minHeight']=_0x1d37f6,this['fire']('resize'));}get['minHeight'](){return this['_minHeight'];}set['maxWidth'](_0x1f651f){_0x1f651f!==this['_maxWidth']&&(this['_maxWidth']=_0x1f651f,this['fire']('resize'));}get['maxWidth'](){return this['_maxWidth'];}set['maxHeight'](_0x287eea){_0x287eea!==this['_maxHeight']&&(this['_maxHeight']=_0x287eea,this['fire']('resize'));}get['maxHeight'](){return this['_maxHeight'];}set['fitWidthPr'+'oportion'](_0x4ac6b9){_0x4ac6b9!==this['_fitWidthP'+'roportion']&&(this['_fitWidthP'+'roportion']=_0x4ac6b9,this['fire']('resize'));}get['fitWidthPr'+'oportion'](){return this['_fitWidthP'+'roportion'];}set['fitHeightP'+'roportion'](_0x19e7ca){_0x19e7ca!==this['_fitHeight'+'Proportion']&&(this['_fitHeight'+'Proportion']=_0x19e7ca,this['fire']('resize'));}get['fitHeightP'+'roportion'](){return this['_fitHeight'+'Proportion'];}set['excludeFro'+'mLayout'](_0x89a54){_0x89a54!==this['_excludeFr'+'omLayout']&&(this['_excludeFr'+'omLayout']=_0x89a54,this['fire']('resize'));}get['excludeFro'+'mLayout'](){return this['_excludeFr'+'omLayout'];}}class tR{constructor(){this['enabled']=!(0x2256+-0x157c+-0xcda);}}const Sv=['enabled'];class sR extends ct{constructor(_0x3b24ca){super(_0x3b24ca),this['id']='layoutchil'+'d',this['ComponentT'+'ype']=gv,this['DataType']=tR,this['schema']=Sv;}['initialize'+'ComponentD'+'ata'](_0x115e30,_0x4fc0b6,_0xfa44ea){_0x4fc0b6['enabled']!==void(-0x13*-0x16d+-0x1bbf*0x1+-0x18*-0x7)&&(_0x115e30['enabled']=_0x4fc0b6['enabled']),_0x4fc0b6['minWidth']!==void(0x32*0x45+0x18cd+-0x2647)&&(_0x115e30['minWidth']=_0x4fc0b6['minWidth']),_0x4fc0b6['minHeight']!==void(0x3*0x20e+0xeb5+-0x89*0x27)&&(_0x115e30['minHeight']=_0x4fc0b6['minHeight']),_0x4fc0b6['maxWidth']!==void(0x6d9*0x3+-0xc1b+-0x870)&&(_0x115e30['maxWidth']=_0x4fc0b6['maxWidth']),_0x4fc0b6['maxHeight']!==void(-0x1*-0x17a1+-0x1639+-0x3*0x78)&&(_0x115e30['maxHeight']=_0x4fc0b6['maxHeight']),_0x4fc0b6['fitWidthPr'+'oportion']!==void(0x57b*-0x7+0x71*0x13+0x1dfa)&&(_0x115e30['fitWidthPr'+'oportion']=_0x4fc0b6['fitWidthPr'+'oportion']),_0x4fc0b6['fitHeightP'+'roportion']!==void(0x65+0x18*-0xa+0x1*0x8b)&&(_0x115e30['fitHeightP'+'roportion']=_0x4fc0b6['fitHeightP'+'roportion']),_0x4fc0b6['excludeFro'+'mLayout']!==void(-0x653+-0x128e+-0xc1*-0x21)&&(_0x115e30['excludeFro'+'mLayout']=_0x4fc0b6['excludeFro'+'mLayout']),super['initialize'+'ComponentD'+'ata'](_0x115e30,_0x4fc0b6,_0xfa44ea);}['cloneCompo'+'nent'](_0x354c88,_0x3be72e){const _0xeedd9c=_0x354c88['layoutchil'+'d'];return this['addCompone'+'nt'](_0x3be72e,{'enabled':_0xeedd9c['enabled'],'minWidth':_0xeedd9c['minWidth'],'minHeight':_0xeedd9c['minHeight'],'maxWidth':_0xeedd9c['maxWidth'],'maxHeight':_0xeedd9c['maxHeight'],'fitWidthProportion':_0xeedd9c['fitWidthPr'+'oportion'],'fitHeightProportion':_0xeedd9c['fitHeightP'+'roportion'],'excludeFromLayout':_0xeedd9c['excludeFro'+'mLayout']});}}we['_buildAcce'+'ssors'](gv['prototype'],Sv);const hu=-0x1e03*-0x1+0x5*-0x4f6+-0x535,iR=-0x1b*-0xe+-0x1bf2+0x1a79,wg=-0x1*0x1283+0xd63+-0x92*-0x9,rR=0xd6*-0x19+0xa3*-0x14+0xb*0x30f,fh={};fh[Ae]={'axis':'x','size':'width','calculatedSize':'calculated'+'Width','minSize':'minWidth','maxSize':'maxWidth','fitting':'widthFitti'+'ng','fittingProportion':'fitWidthPr'+'oportion'},fh[je]={'axis':'y','size':'height','calculatedSize':'calculated'+'Height','minSize':'minHeight','maxSize':'maxHeight','fitting':'heightFitt'+'ing','fittingProportion':'fitHeightP'+'roportion'};const qp={};qp[Ae]=je,qp[je]=Ae;const aR={'minWidth':0x0,'minHeight':0x0,'maxWidth':Number['POSITIVE_I'+'NFINITY'],'maxHeight':Number['POSITIVE_I'+'NFINITY'],'width':null,'height':null,'fitWidthProportion':0x0,'fitHeightProportion':0x0},os={'NONE':'NONE','APPLY_STRETCHING':'APPLY_STRE'+'TCHING','APPLY_SHRINKING':'APPLY_SHRI'+'NKING'},ls=new J();function yv(_0x5d48b3){let _0x190597;const _0x38b0d5=fh[_0x5d48b3],_0x2f66fe=fh[qp[_0x5d48b3]];function _0x3fa464(_0x4c2468,_0x12d5ab){return-_0x12d5ab[_0x38b0d5['size']]*_0x4c2468['pivot'][_0x38b0d5['axis']];}function _0x468d6c(_0x2e4450,_0x4fff68){return-_0x4fff68[_0x2f66fe['size']]*_0x2e4450['pivot'][_0x2f66fe['axis']];}function _0x2e4ac7(_0x3a0093,_0x951bed){return _0x951bed[_0x38b0d5['size']]*(-0x23d6*-0x1+0x147*0x13+-0x7*0x896-_0x3a0093['pivot'][_0x38b0d5['axis']]);}function _0x2be1d2(_0x279bbe,_0x52c223){_0x279bbe=_0x279bbe['filter'](_0x5beec0),_0x190597=_0x52c223,ls['x']=_0x190597['containerS'+'ize']['x']-_0x190597['padding']['x']-_0x190597['padding']['z'],ls['y']=_0x190597['containerS'+'ize']['y']-_0x190597['padding']['y']-_0x190597['padding']['w'],_0x160f7c(_0x279bbe);const _0x44e7cb=_0x27ee60(_0x3be331(_0x279bbe)),_0x29e3d3=_0x10c46b(_0x44e7cb,_0x7c9920(_0x44e7cb)),_0x45bc34=_0x401630(_0x44e7cb,_0x29e3d3);return _0x2e7164(_0x44e7cb,_0x29e3d3,_0x45bc34),_0x1b7d0f(_0x44e7cb,_0x29e3d3,_0x45bc34),_0x157c5d(_0x44e7cb);}function _0x5beec0(_0x50bd53){const _0xe45ceb=_0x50bd53['entity']['layoutchil'+'d'];return!_0xe45ceb||!_0xe45ceb['enabled']||!_0xe45ceb['excludeFro'+'mLayout'];}function _0x160f7c(_0x3a98e0){for(let _0x4d5732=-0x1*-0x2456+-0xea*-0x5+0xb*-0x3b8;_0x4d5732<_0x3a98e0['length'];++_0x4d5732){const _0x1393ad=_0x3a98e0[_0x4d5732],_0x37f214=_0x1393ad['anchor'];(_0x37f214['x']!==-0x1*-0x1101+-0x3ed*-0x7+0x76a*-0x6||_0x37f214['y']!==0xed0+0xe*0xc7+-0x19b2||_0x37f214['z']!==-0xbb5+0x1c5c+0xcb*-0x15||_0x37f214['w']!==0x565*-0x3+0xd91+-0x2*-0x14f)&&(_0x1393ad['anchor']=re['ZERO']);}}function _0x3be331(_0x113b54){if(!_0x190597['wrap'])return[_0x113b54];const _0x1db99a=[[]],_0x5c3a8a=_0x40ec16(_0x113b54);let _0x26ec5f=-0x3*-0x781+0x206b+-0x2*0x1b77;const _0xc84db8=_0x190597[_0x38b0d5['fitting']]===wg;for(let _0x195e5f=-0x9*0x47+0x12d0+-0x1051*0x1;_0x195e5f<_0x113b54['length'];++_0x195e5f){_0x1db99a[_0x1db99a['length']-(0x1c82+-0x213f+0x2*0x25f)]['length']>0x1262*-0x2+0x1*0x20dd+0x1*0x3e7&&(_0x26ec5f+=_0x190597['spacing'][_0x38b0d5['axis']]);const _0x511524=_0x5c3a8a[_0x195e5f][_0x38b0d5['size']];_0x26ec5f+=_0x511524,!_0xc84db8&&_0x26ec5f>ls[_0x38b0d5['axis']]&&_0x1db99a[_0x1db99a['length']-(-0xe97+-0x17*-0x32+-0x1*-0xa1a)]['length']!==-0x12ea+0x634+-0x2*-0x65b&&(_0x26ec5f=_0x511524,_0x1db99a['push']([])),_0x1db99a[_0x1db99a['length']-(-0x132c+-0x3a*-0x8e+-0xcff)]['push'](_0x113b54[_0x195e5f]),_0xc84db8&&_0x26ec5f>ls[_0x38b0d5['axis']]&&_0x195e5f!==_0x113b54['length']-(0x1*0x25ea+-0x4*0x801+-0x5e5)&&(_0x26ec5f=-0x17fd+-0x4*-0x4fd+-0x1*-0x409,_0x1db99a['push']([]));}return _0x1db99a;}function _0x27ee60(_0x44e233){const _0x46636d=_0x190597['orientatio'+'n']===Ae&&_0x190597['reverseX']||_0x190597['orientatio'+'n']===je&&_0x190597['reverseY'],_0x65c50a=_0x190597['orientatio'+'n']===Ae&&_0x190597['reverseY']||_0x190597['orientatio'+'n']===je&&_0x190597['reverseX'];if(_0x46636d){for(let _0x90bc6d=0x24a0+-0x1*-0x2543+0x41*-0x123;_0x90bc6d<_0x44e233['length'];++_0x90bc6d)_0x46636d&&_0x44e233[_0x90bc6d]['reverse']();}return _0x65c50a&&_0x44e233['reverse'](),_0x44e233;}function _0x7c9920(_0x5e496b){const _0x260292=[];for(let _0x32e842=-0x1d*-0xe9+0x56f+-0x1fd4;_0x32e842<_0x5e496b['length'];++_0x32e842){const _0x52965c=_0x5e496b[_0x32e842],_0x1431b9=_0x40ec16(_0x52965c),_0x3d4041=_0x350971(_0x1431b9,_0x38b0d5),_0x1ad450=_0x847e0f(_0x190597[_0x38b0d5['fitting']],_0x3d4041,ls[_0x38b0d5['axis']]);_0x1ad450===os['APPLY_STRE'+'TCHING']?_0x2288d8(_0x1431b9,_0x3d4041,_0x38b0d5):_0x1ad450===os['APPLY_SHRI'+'NKING']&&_0x526ad3(_0x1431b9,_0x3d4041,_0x38b0d5),_0x260292['push'](_0x1431b9);}return _0x260292;}function _0x10c46b(_0x118132,_0x45d909){const _0x40ef5a=[],_0x1c5755=[];for(let _0x1d268c=0x1dde+-0x1*0x2072+0x2c*0xf;_0x1d268c<_0x118132['length'];++_0x1d268c){const _0x294011=_0x118132[_0x1d268c];_0x294011['largestEle'+'ment']=null,_0x294011['largestSiz'+'e']={'width':Number['NEGATIVE_I'+'NFINITY'],'height':Number['NEGATIVE_I'+'NFINITY']};for(let _0xd074c1=0x2f*0x82+0x297*-0x4+-0xd82;_0xd074c1<_0x294011['length'];++_0xd074c1){const _0xee6fc9=_0x45d909[_0x1d268c][_0xd074c1];_0xee6fc9[_0x2f66fe['size']]>_0x294011['largestSiz'+'e'][_0x2f66fe['size']]&&(_0x294011['largestEle'+'ment']=_0x294011[_0xd074c1],_0x294011['largestSiz'+'e']=_0xee6fc9);}_0x40ef5a['push'](_0x294011['largestEle'+'ment']),_0x1c5755['push'](_0x294011['largestSiz'+'e']);}const _0x49e452=_0x350971(_0x1c5755,_0x2f66fe),_0x535427=_0x847e0f(_0x190597[_0x2f66fe['fitting']],_0x49e452,ls[_0x2f66fe['axis']]);_0x535427===os['APPLY_STRE'+'TCHING']?_0x2288d8(_0x1c5755,_0x49e452,_0x2f66fe):_0x535427===os['APPLY_SHRI'+'NKING']&&_0x526ad3(_0x1c5755,_0x49e452,_0x2f66fe);for(let _0x5e549a=-0x2429+0x2658+-0x22f;_0x5e549a<_0x118132['length'];++_0x5e549a){const _0xbf14d=_0x118132[_0x5e549a];for(let _0x2c0763=0x16db+-0x178+-0x1563;_0x2c0763<_0xbf14d['length'];++_0x2c0763){const _0x378a30=_0x45d909[_0x5e549a][_0x2c0763],_0x4a2bdb=_0x378a30[_0x2f66fe['size']],_0x19aeb2=_0x118132['length']===-0xb08*0x3+-0xd*-0x175+0xe28?ls[_0x2f66fe['axis']]:_0xbf14d['largestSiz'+'e'][_0x2f66fe['size']],_0x49f9c8=_0x847e0f(_0x190597[_0x2f66fe['fitting']],_0x4a2bdb,_0x19aeb2);_0x49f9c8===os['APPLY_STRE'+'TCHING']?_0x378a30[_0x2f66fe['size']]=Math['min'](_0x19aeb2,_0x378a30[_0x2f66fe['maxSize']]):_0x49f9c8===os['APPLY_SHRI'+'NKING']&&(_0x378a30[_0x2f66fe['size']]=Math['max'](_0x19aeb2,_0x378a30[_0x2f66fe['minSize']]));}}return _0x45d909;}function _0x847e0f(_0x24319f,_0x142aac,_0x1d8f2e){switch(_0x24319f){case hu:return os['NONE'];case iR:return _0x142aac<_0x1d8f2e?os['APPLY_STRE'+'TCHING']:os['NONE'];case wg:return _0x142aac>=_0x1d8f2e?os['APPLY_SHRI'+'NKING']:os['NONE'];case rR:return _0x142aac<_0x1d8f2e?os['APPLY_STRE'+'TCHING']:os['APPLY_SHRI'+'NKING'];default:throw new Error('Unrecogniz'+'ed\x20fitting'+'\x20mode:\x20'+_0x24319f);}}function _0x350971(_0x166fd1,_0xdf7735){const _0x1d73bc=_0x1e2347(_0x166fd1,_0xdf7735['size']),_0x2b80cb=(_0x166fd1['length']-(-0x149d+-0x33*-0x2d+0xba7))*_0x190597['spacing'][_0xdf7735['axis']];return _0x1d73bc+_0x2b80cb;}function _0x2288d8(_0x49367e,_0x467a26,_0x5c059c){const _0x1d4d1b=_0x2b2ea4(_0x49367e,_0x5c059c['maxSize']),_0x28a1ce=_0x3229b1(_0x49367e,_0x5c059c['fittingPro'+'portion']),_0x45bdf6=_0x4d91bf(_0x28a1ce,_0x1d4d1b);let _0x2b4444=ls[_0x5c059c['axis']]-_0x467a26;for(let _0x2ec7e4=-0x12a*0xf+0x24f4+0x3e6*-0x5;_0x2ec7e4<_0x49367e['length'];++_0x2ec7e4){const _0x112b22=_0x1d4d1b[_0x2ec7e4],_0x4c18a6=_0x16a066(_0x112b22,_0x2b4444,_0x28a1ce,_0x45bdf6),_0x4d36f2=_0x49367e[_0x112b22][_0x5c059c['size']]+_0x4c18a6,_0x23ea8b=_0x49367e[_0x112b22][_0x5c059c['maxSize']],_0x28ba0b=Math['min'](_0x4d36f2,_0x23ea8b);_0x49367e[_0x112b22][_0x5c059c['size']]=_0x28ba0b;const _0x36a999=Math['max'](_0x4d36f2-_0x28ba0b,-0xc8c+-0x2*-0x12d5+-0x1*0x191e),_0x48dc19=_0x4c18a6-_0x36a999;_0x2b4444-=_0x48dc19;}}function _0x526ad3(_0x259a34,_0x1476f7,_0x749f97){const _0x4f9436=_0x2b2ea4(_0x259a34,_0x749f97['minSize'],!(-0xd1a+-0x51b*-0x7+-0x5*0x487)),_0x3c3be5=_0x3229b1(_0x259a34,_0x749f97['fittingPro'+'portion']),_0x596e34=_0x3ed027(_0x3c3be5),_0x2aa59e=_0x4d91bf(_0x596e34,_0x4f9436);let _0x21797b=_0x1476f7-ls[_0x749f97['axis']];for(let _0x484a59=-0x1fe2+-0x707*0x1+0x26e9;_0x484a59<_0x259a34['length'];++_0x484a59){const _0x4f21b6=_0x4f9436[_0x484a59],_0x5f5bf0=_0x16a066(_0x4f21b6,_0x21797b,_0x596e34,_0x2aa59e),_0x1c4ffa=_0x259a34[_0x4f21b6][_0x749f97['size']]-_0x5f5bf0,_0x2c844c=_0x259a34[_0x4f21b6][_0x749f97['minSize']],_0x11ce73=Math['max'](_0x1c4ffa,_0x2c844c);_0x259a34[_0x4f21b6][_0x749f97['size']]=_0x11ce73;const _0x3cc2e2=Math['max'](_0x11ce73-_0x1c4ffa,0x1e59+-0xdc4*0x1+-0x1095),_0x2e9596=_0x5f5bf0-_0x3cc2e2;_0x21797b-=_0x2e9596;}}function _0x16a066(_0x5625ae,_0x3febb2,_0x169095,_0x19402a){const _0x17b483=_0x169095[_0x5625ae],_0x216b71=_0x19402a[_0x5625ae];return Math['abs'](_0x17b483)<-0x143*0x12+0x2*-0x4f1+0x2098+0.00001&&Math['abs'](_0x216b71)<-0x1273*0x1+0x1*-0x1cc3+-0x2f36*-0x1+0.00001?_0x3febb2:_0x3febb2*_0x17b483/_0x216b71;}function _0x401630(_0x42c403,_0x8df5c1){const _0x697f98={};_0x697f98[_0x38b0d5['axis']]=-0x1196+0x71*-0x22+-0x2098*-0x1,_0x697f98[_0x2f66fe['axis']]=-0x2*0xdd7+0x1407+0x7a7,_0x42c403[_0x38b0d5['size']]=Number['NEGATIVE_I'+'NFINITY'];const _0x2598bf=[];for(let _0x5cf8a5=0x13b0+0x195c+-0x2d0c;_0x5cf8a5<_0x42c403['length'];++_0x5cf8a5){const _0xed0079=_0x42c403[_0x5cf8a5];if(_0xed0079['length']===0x1757+-0x6cb+0x423*-0x4){_0x2598bf['push']([]);continue;}const _0x4bbbba=[],_0x434ae3=_0x8df5c1[_0x5cf8a5];for(let _0x1e8ab6=0x3*-0x5e+0x178b+-0x1671*0x1;_0x1e8ab6<_0xed0079['length'];++_0x1e8ab6){const _0x4a3274=_0xed0079[_0x1e8ab6],_0x3b3e6e=_0x434ae3[_0x1e8ab6];_0x697f98[_0x2f66fe['axis']]-=_0x468d6c(_0x4a3274,_0x3b3e6e),_0x697f98[_0x38b0d5['axis']]-=_0x3fa464(_0x4a3274,_0x3b3e6e),_0x4bbbba[_0x1e8ab6]={},_0x4bbbba[_0x1e8ab6][_0x38b0d5['axis']]=_0x697f98[_0x38b0d5['axis']],_0x4bbbba[_0x1e8ab6][_0x2f66fe['axis']]=_0x697f98[_0x2f66fe['axis']],_0x697f98[_0x2f66fe['axis']]+=_0x468d6c(_0x4a3274,_0x3b3e6e),_0x697f98[_0x38b0d5['axis']]+=_0x2e4ac7(_0x4a3274,_0x3b3e6e)+_0x190597['spacing'][_0x38b0d5['axis']];}_0xed0079[_0x38b0d5['size']]=_0x697f98[_0x38b0d5['axis']]-_0x190597['spacing'][_0x38b0d5['axis']],_0xed0079[_0x2f66fe['size']]=_0xed0079['largestSiz'+'e'][_0x2f66fe['size']],_0x42c403[_0x38b0d5['size']]=Math['max'](_0x42c403[_0x38b0d5['size']],_0xed0079[_0x38b0d5['size']]),_0x697f98[_0x38b0d5['axis']]=0x169e+-0x38a+-0x2*0x98a,_0x697f98[_0x2f66fe['axis']]+=_0xed0079[_0x2f66fe['size']]+_0x190597['spacing'][_0x2f66fe['axis']],_0x2598bf['push'](_0x4bbbba);}return _0x42c403[_0x2f66fe['size']]=_0x697f98[_0x2f66fe['axis']]-_0x190597['spacing'][_0x2f66fe['axis']],_0x2598bf;}function _0x2e7164(_0x37b6f0,_0x54e642,_0x11637c){const _0x49c952=_0x190597['alignment'][_0x38b0d5['axis']],_0x5343d4=_0x190597['alignment'][_0x2f66fe['axis']],_0x4a4eb8=_0x190597['padding'][_0x38b0d5['axis']],_0x5ddba9=_0x190597['padding'][_0x2f66fe['axis']];for(let _0x5a4cbd=0x1153+-0xb*-0x31d+-0x2e*0x11f;_0x5a4cbd<_0x37b6f0['length'];++_0x5a4cbd){const _0x312b99=_0x37b6f0[_0x5a4cbd],_0x418e7f=_0x54e642[_0x5a4cbd],_0x47992a=_0x11637c[_0x5a4cbd],_0x14c55e=(ls[_0x38b0d5['axis']]-_0x312b99[_0x38b0d5['size']])*_0x49c952+_0x4a4eb8,_0x15846e=(ls[_0x2f66fe['axis']]-_0x37b6f0[_0x2f66fe['size']])*_0x5343d4+_0x5ddba9;for(let _0x2471a3=0x187a+0x2*0x5e6+-0x2*0x1223;_0x2471a3<_0x312b99['length'];++_0x2471a3){const _0xeb4c=(_0x312b99[_0x2f66fe['size']]-_0x418e7f[_0x2471a3][_0x2f66fe['size']])*_0x190597['alignment'][_0x2f66fe['axis']];_0x47992a[_0x2471a3][_0x38b0d5['axis']]+=_0x14c55e,_0x47992a[_0x2471a3][_0x2f66fe['axis']]+=_0x15846e+_0xeb4c;}}}function _0x1b7d0f(_0xdbfeba,_0x4bf6ef,_0x57b152){for(let _0x26d585=0x1930+0xc*0x2e7+0x29c*-0x17;_0x26d585<_0xdbfeba['length'];++_0x26d585){const _0x4e6a80=_0xdbfeba[_0x26d585],_0x2a8a44=_0x4bf6ef[_0x26d585],_0x556920=_0x57b152[_0x26d585];for(let _0x3ca291=-0x7*0x56f+-0xd53+0x335c;_0x3ca291<_0x4e6a80['length'];++_0x3ca291){const _0x11a4e0=_0x4e6a80[_0x3ca291];_0x11a4e0[_0x38b0d5['calculated'+'Size']]=_0x2a8a44[_0x3ca291][_0x38b0d5['size']],_0x11a4e0[_0x2f66fe['calculated'+'Size']]=_0x2a8a44[_0x3ca291][_0x2f66fe['size']],_0x190597['orientatio'+'n']===Ae?_0x11a4e0['entity']['setLocalPo'+'sition'](_0x556920[_0x3ca291][_0x38b0d5['axis']],_0x556920[_0x3ca291][_0x2f66fe['axis']],_0x11a4e0['entity']['getLocalPo'+'sition']()['z']):_0x11a4e0['entity']['setLocalPo'+'sition'](_0x556920[_0x3ca291][_0x2f66fe['axis']],_0x556920[_0x3ca291][_0x38b0d5['axis']],_0x11a4e0['entity']['getLocalPo'+'sition']()['z']);}}}function _0x157c5d(_0x2c0103){const _0x295eee=_0x2c0103['width'],_0x4c650b=_0x2c0103['height'],_0x4629a1=(ls['x']-_0x295eee)*_0x190597['alignment']['x']+_0x190597['padding']['x'],_0x46dfcf=(ls['y']-_0x4c650b)*_0x190597['alignment']['y']+_0x190597['padding']['y'];return{'bounds':new re(_0x4629a1,_0x46dfcf,_0x295eee,_0x4c650b)};}function _0x40ec16(_0x26a456){const _0x3516f8=[];for(let _0x3ee406=-0x1700+-0x1*0x217d+0x387d*0x1;_0x3ee406<_0x26a456['length'];++_0x3ee406){const _0x241700=_0x26a456[_0x3ee406],_0x39fe3e=Math['max'](_0x292c83(_0x241700,'minWidth'),0x24a5+0xd7*-0x7+0x166*-0x16),_0x4f1089=Math['max'](_0x292c83(_0x241700,'minHeight'),0x1a1b*0x1+0xbd1+0x1*-0x25ec),_0x40372e=Math['max'](_0x292c83(_0x241700,'maxWidth'),_0x39fe3e),_0x24f61a=Math['max'](_0x292c83(_0x241700,'maxHeight'),_0x4f1089),_0x365f17=_0x59b4b5(_0x292c83(_0x241700,'width'),_0x39fe3e,_0x40372e),_0x3919e6=_0x59b4b5(_0x292c83(_0x241700,'height'),_0x4f1089,_0x24f61a),_0x42e613=_0x292c83(_0x241700,'fitWidthPr'+'oportion'),_0x1bcc6f=_0x292c83(_0x241700,'fitHeightP'+'roportion');_0x3516f8['push']({'minWidth':_0x39fe3e,'minHeight':_0x4f1089,'maxWidth':_0x40372e,'maxHeight':_0x24f61a,'width':_0x365f17,'height':_0x3919e6,'fitWidthProportion':_0x42e613,'fitHeightProportion':_0x1bcc6f});}return _0x3516f8;}function _0x292c83(_0x38cd28,_0x43bc14){const _0x3f6b39=_0x38cd28['entity']['layoutchil'+'d'];return _0x3f6b39&&_0x3f6b39['enabled']&&_0x3f6b39[_0x43bc14]!==void(-0xcf4*0x2+-0x2353+-0x273*-0x19)&&_0x3f6b39[_0x43bc14]!==null?_0x3f6b39[_0x43bc14]:_0x38cd28[_0x43bc14]!==void(0x137f+0x823*0x3+-0x2be8)?_0x38cd28[_0x43bc14]:aR[_0x43bc14];}function _0x59b4b5(_0x36bdb1,_0xdcc9cf,_0x4fca2e){return Math['min'](Math['max'](_0x36bdb1,_0xdcc9cf),_0x4fca2e);}function _0x1e2347(_0x8682f6,_0x515ce6){return _0x8682f6['reduce']((_0x40f939,_0x1ffaaf)=>_0x40f939+_0x1ffaaf[_0x515ce6],0x5ce+0xd76*-0x1+0x62*0x14);}function _0x3229b1(_0x4e4f77,_0x30fe7a){const _0x5c4c80=_0x1e2347(_0x4e4f77,_0x30fe7a),_0x2b17ca=[],_0xc64927=_0x4e4f77['length'];if(_0x5c4c80===0x1bb1+0x1e10+-0x5*0xb8d){for(let _0x206080=0x6e9+0x10af+0x8*-0x2f3;_0x206080<_0xc64927;++_0x206080)_0x2b17ca['push']((0x1*-0x569+-0x2*-0xb4e+0x1f*-0x8e)/_0xc64927);}else{for(let _0x2e2d3c=0x24af+0x1*0xe03+-0xe*0x39f;_0x2e2d3c<_0xc64927;++_0x2e2d3c)_0x2b17ca['push'](_0x4e4f77[_0x2e2d3c][_0x30fe7a]/_0x5c4c80);}return _0x2b17ca;}function _0x3ed027(_0x1148a){if(_0x1148a['length']===0x107*0x22+0x1264+-0x3551)return[0x134b*-0x2+0x65b+0x203c];const _0x263ad2=[],_0x53e7bb=_0x1148a['length'];for(let _0x3f56ac=-0x1*0x11a5+0x1*0x73d+-0xa68*-0x1;_0x3f56ac<_0x53e7bb;++_0x3f56ac)_0x263ad2['push']((0x3*-0x4ab+-0xa18+-0x2*-0xc0d-_0x1148a[_0x3f56ac])/(_0x53e7bb-(0xd15+0x7*0x143+-0x15e9)));return _0x263ad2;}function _0x2b2ea4(_0x204662,_0x56e901,_0x44be23){return _0x204662['forEach'](_0x2aa979),_0x204662['slice']()['sort']((_0x5125ea,_0x6583df)=>_0x44be23?_0x6583df[_0x56e901]-_0x5125ea[_0x56e901]:_0x5125ea[_0x56e901]-_0x6583df[_0x56e901])['map'](_0x34dd8b);}function _0x2aa979(_0x29be7e,_0x298038){_0x29be7e['index']=_0x298038;}function _0x34dd8b(_0x25a017){return _0x25a017['index'];}function _0x4d91bf(_0xb85e2c,_0x396637){const _0x4d8b04=[];_0x4d8b04[_0x396637[_0xb85e2c['length']-(0x207a*-0x1+0x264d+-0x1*0x5d2)]]=_0xb85e2c[_0x396637[_0xb85e2c['length']-(0x1fc4+0x5*0x50e+-0x3909)]];for(let _0x4c0754=_0xb85e2c['length']-(0xe1d+-0x6*-0x5c+-0x1043);_0x4c0754>=0x1*0x1c5e+0x21d*0x6+-0xa43*0x4;--_0x4c0754)_0x4d8b04[_0x396637[_0x4c0754]]=_0x4d8b04[_0x396637[_0x4c0754+(-0x1bef+0xa1c*0x1+0xe*0x146)]]+_0xb85e2c[_0x396637[_0x4c0754]];return _0x4d8b04;}return _0x2be1d2;}const jp={};jp[Ae]=yv(Ae),jp[je]=yv(je);class nR{['calculateL'+'ayout'](_0x47c644,_0x3b5e47){const _0x156a3c=jp[_0x3b5e47['orientatio'+'n']];if(_0x156a3c)return _0x156a3c(_0x47c644,_0x3b5e47);throw new Error('Unrecogniz'+'ed\x20orienta'+'tion\x20value'+':\x20'+_0x3b5e47['orientatio'+'n']);}}function Eg(_0x2f62d4){return _0x2f62d4['element'];}function oR(_0x35a7db){return _0x35a7db['enabled']&&_0x35a7db['element']&&_0x35a7db['element']['enabled'];}class vv extends we{constructor(_0x286d35,_0x143f48){super(_0x286d35,_0x143f48),h(this,'_orientati'+'on',Ae),h(this,'_reverseX',!(-0x1bc0+-0x109e*0x2+0x3cfd*0x1)),h(this,'_reverseY',!(-0x1b48+0x1*0x897+0x12b1)),h(this,'_alignment',new J(0x1073*0x1+0x1*-0x1301+0x28e,-0x1*-0x55f+-0xac*0xc+0x6*0x73)),h(this,'_padding',new re()),h(this,'_spacing',new J()),h(this,'_widthFitt'+'ing',hu),h(this,'_heightFit'+'ting',hu),h(this,'_wrap',!(0x202c+-0x6*-0x449+-0x39e1)),h(this,'_layoutCal'+'culator',new nR()),(this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'on'),this['entity']['children']['forEach'](_0x116321=>{this['_listenFor'+'ReflowEven'+'ts'](_0x116321,'on');}),this['entity']['on']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['on']('childremov'+'e',this['_onChildRe'+'move'],this),w['assert'](_0x286d35['app']['systems']['element'],'System\x20\x27el'+'ement\x27\x20doe'+'sn\x27t\x20exist'),_0x286d35['app']['systems']['element']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0x286d35['app']['systems']['element']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),w['assert'](_0x286d35['app']['systems']['layoutchil'+'d'],'System\x20\x27la'+'youtchild\x27'+'\x20doesn\x27t\x20e'+'xist'),_0x286d35['app']['systems']['layoutchil'+'d']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0x286d35['app']['systems']['layoutchil'+'d']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this));}set['orientatio'+'n'](_0x15f9e0){_0x15f9e0!==this['_orientati'+'on']&&(this['_orientati'+'on']=_0x15f9e0,this['_scheduleR'+'eflow']());}get['orientatio'+'n'](){return this['_orientati'+'on'];}set['reverseX'](_0xc96848){_0xc96848!==this['_reverseX']&&(this['_reverseX']=_0xc96848,this['_scheduleR'+'eflow']());}get['reverseX'](){return this['_reverseX'];}set['reverseY'](_0x2ceec1){_0x2ceec1!==this['_reverseY']&&(this['_reverseY']=_0x2ceec1,this['_scheduleR'+'eflow']());}get['reverseY'](){return this['_reverseY'];}set['alignment'](_0xd7afc3){_0xd7afc3['equals'](this['_alignment'])||(this['_alignment']['copy'](_0xd7afc3),this['_scheduleR'+'eflow']());}get['alignment'](){return this['_alignment'];}set['padding'](_0x323755){_0x323755['equals'](this['_padding'])||(this['_padding']['copy'](_0x323755),this['_scheduleR'+'eflow']());}get['padding'](){return this['_padding'];}set['spacing'](_0x3e0c2c){_0x3e0c2c['equals'](this['_spacing'])||(this['_spacing']['copy'](_0x3e0c2c),this['_scheduleR'+'eflow']());}get['spacing'](){return this['_spacing'];}set['widthFitti'+'ng'](_0x454297){_0x454297!==this['_widthFitt'+'ing']&&(this['_widthFitt'+'ing']=_0x454297,this['_scheduleR'+'eflow']());}get['widthFitti'+'ng'](){return this['_widthFitt'+'ing'];}set['heightFitt'+'ing'](_0x146f04){_0x146f04!==this['_heightFit'+'ting']&&(this['_heightFit'+'ting']=_0x146f04,this['_scheduleR'+'eflow']());}get['heightFitt'+'ing'](){return this['_heightFit'+'ting'];}set['wrap'](_0x231028){_0x231028!==this['_wrap']&&(this['_wrap']=_0x231028,this['_scheduleR'+'eflow']());}get['wrap'](){return this['_wrap'];}['_isSelfOrC'+'hild'](_0x35ff08){return _0x35ff08===this['entity']||this['entity']['children']['indexOf'](_0x35ff08)!==-(-0x33*-0x92+0x1*-0x4a4+-0x1871);}['_listenFor'+'ReflowEven'+'ts'](_0xa7bf69,_0x29232f){_0xa7bf69['element']&&(_0xa7bf69['element'][_0x29232f]('enableelem'+'ent',this['_scheduleR'+'eflow'],this),_0xa7bf69['element'][_0x29232f]('disableele'+'ment',this['_scheduleR'+'eflow'],this),_0xa7bf69['element'][_0x29232f]('resize',this['_scheduleR'+'eflow'],this),_0xa7bf69['element'][_0x29232f]('set:pivot',this['_scheduleR'+'eflow'],this)),_0xa7bf69['layoutchil'+'d']&&(_0xa7bf69['layoutchil'+'d'][_0x29232f]('set_enable'+'d',this['_scheduleR'+'eflow'],this),_0xa7bf69['layoutchil'+'d'][_0x29232f]('resize',this['_scheduleR'+'eflow'],this));}['_onElement'+'OrLayoutCo'+'mponentAdd'](_0x59a42b){this['_isSelfOrC'+'hild'](_0x59a42b)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x59a42b,'on'),this['_scheduleR'+'eflow']());}['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'](_0x4cb185){this['_isSelfOrC'+'hild'](_0x4cb185)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x4cb185,'off'),this['_scheduleR'+'eflow']());}['_onChildIn'+'sert'](_0xa310d3){this['_listenFor'+'ReflowEven'+'ts'](_0xa310d3,'on'),this['_scheduleR'+'eflow']();}['_onChildRe'+'move'](_0x48e9a4){this['_listenFor'+'ReflowEven'+'ts'](_0x48e9a4,'off'),this['_scheduleR'+'eflow']();}['_scheduleR'+'eflow'](){this['enabled']&&this['entity']&&this['entity']['enabled']&&!this['_isPerform'+'ingReflow']&&this['system']['scheduleRe'+'flow'](this);}['reflow'](){const _0x3164f5=Eg(this['entity']),_0x4f2db2=this['entity']['children']['filter'](oR)['map'](Eg);if(!_0x3164f5||_0x4f2db2['length']===0x1*0x16cb+-0x3*-0x8f1+-0x319e)return;const _0x538683=Math['max'](_0x3164f5['calculated'+'Width'],0x3bf*-0x2+-0xf47*0x1+-0x1d*-0xc9),_0x303028=Math['max'](_0x3164f5['calculated'+'Height'],0x7a7*0x5+-0x109a+-0x455*0x5),_0x199083={'orientation':this['_orientati'+'on'],'reverseX':this['_reverseX'],'reverseY':this['_reverseY'],'alignment':this['_alignment'],'padding':this['_padding'],'spacing':this['_spacing'],'widthFitting':this['_widthFitt'+'ing'],'heightFitting':this['_heightFit'+'ting'],'wrap':this['_wrap'],'containerSize':new J(_0x538683,_0x303028)};this['_isPerform'+'ingReflow']=!(-0xa4f*0x2+-0x27f*0x2+0x199c);const _0x549452=this['_layoutCal'+'culator']['calculateL'+'ayout'](_0x4f2db2,_0x199083);this['_isPerform'+'ingReflow']=!(-0x4*0x581+-0xe0f*-0x1+0x7f6),this['fire']('reflow',_0x549452);}['onEnable'](){this['_scheduleR'+'eflow']();}['onRemove'](){this['entity']['off']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['off']('childremov'+'e',this['_onChildRe'+'move'],this),this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'off'),this['entity']['children']['forEach'](_0x24f801=>{this['_listenFor'+'ReflowEven'+'ts'](_0x24f801,'off');}),this['system']['app']['systems']['element']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['element']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this);}}class lR{constructor(){this['enabled']=!(0x8*0x22+0x5cb*0x6+-0x23d2);}}const xv=['enabled'],cR=-0x93b*0x2+0x1045+-0x295*-0x1;class hR extends ct{constructor(_0x2c94b9){super(_0x2c94b9),this['id']='layoutgrou'+'p',this['ComponentT'+'ype']=vv,this['DataType']=lR,this['schema']=xv,this['_reflowQue'+'ue']=[],this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x57759b,_0x2de0ef,_0x5a350f){_0x2de0ef['enabled']!==void(0x23e9+-0x3ee*0x3+-0x181f)&&(_0x57759b['enabled']=_0x2de0ef['enabled']),_0x2de0ef['orientatio'+'n']!==void(0x8dc+-0x10+-0x8cc)&&(_0x57759b['orientatio'+'n']=_0x2de0ef['orientatio'+'n']),_0x2de0ef['reverseX']!==void(0xb1*-0xd+0x4*0x458+-0x863)&&(_0x57759b['reverseX']=_0x2de0ef['reverseX']),_0x2de0ef['reverseY']!==void(0x1e7+-0x11b*-0x4+0x1*-0x653)&&(_0x57759b['reverseY']=_0x2de0ef['reverseY']),_0x2de0ef['alignment']!==void(0x7d*0x35+-0x9*0x337+0x30e)&&(_0x57759b['alignment']=Array['isArray'](_0x2de0ef['alignment'])?new J(_0x2de0ef['alignment']):_0x2de0ef['alignment']),_0x2de0ef['padding']!==void(0xb80+0x2*0x82c+0x58*-0x51)&&(_0x57759b['padding']=Array['isArray'](_0x2de0ef['padding'])?new re(_0x2de0ef['padding']):_0x2de0ef['padding']),_0x2de0ef['spacing']!==void(-0x2e*0x83+0x5*-0x2bd+-0x9*-0x423)&&(_0x57759b['spacing']=Array['isArray'](_0x2de0ef['spacing'])?new J(_0x2de0ef['spacing']):_0x2de0ef['spacing']),_0x2de0ef['widthFitti'+'ng']!==void(0x1938+-0x1811+-0x1*0x127)&&(_0x57759b['widthFitti'+'ng']=_0x2de0ef['widthFitti'+'ng']),_0x2de0ef['heightFitt'+'ing']!==void(0x1*0x1e8b+-0x1f8+0x7*-0x415)&&(_0x57759b['heightFitt'+'ing']=_0x2de0ef['heightFitt'+'ing']),_0x2de0ef['wrap']!==void(-0x5f*-0x1f+-0x1a*0x18+-0x911)&&(_0x57759b['wrap']=_0x2de0ef['wrap']),super['initialize'+'ComponentD'+'ata'](_0x57759b,_0x2de0ef,_0x5a350f);}['cloneCompo'+'nent'](_0x184ac2,_0x5b4752){const _0x52307f=_0x184ac2['layoutgrou'+'p'];return this['addCompone'+'nt'](_0x5b4752,{'enabled':_0x52307f['enabled'],'orientation':_0x52307f['orientatio'+'n'],'reverseX':_0x52307f['reverseX'],'reverseY':_0x52307f['reverseY'],'alignment':_0x52307f['alignment'],'padding':_0x52307f['padding'],'spacing':_0x52307f['spacing'],'widthFitting':_0x52307f['widthFitti'+'ng'],'heightFitting':_0x52307f['heightFitt'+'ing'],'wrap':_0x52307f['wrap']});}['scheduleRe'+'flow'](_0x4ea7f6){this['_reflowQue'+'ue']['indexOf'](_0x4ea7f6)===-(0x99*0x3d+-0x805*-0x1+-0x2c79)&&this['_reflowQue'+'ue']['push'](_0x4ea7f6);}['_onPostUpd'+'ate'](){this['_processRe'+'flowQueue']();}['_processRe'+'flowQueue'](){if(this['_reflowQue'+'ue']['length']===-0x2302+-0x1ca6+0x3fa8)return;let _0x2afd2c=0x49*-0xa+0x2*0xc31+-0x1588;for(;this['_reflowQue'+'ue']['length']>-0xb9f+-0x2b*-0x71+-0x75c;){const _0x10a8a7=this['_reflowQue'+'ue']['slice']();this['_reflowQue'+'ue']['length']=0xb5+0xa2*0x17+-0xf43,_0x10a8a7['sort']((_0x4be256,_0x29b6f7)=>_0x4be256['entity']['graphDepth']-_0x29b6f7['entity']['graphDepth']);for(let _0x56f85a=0x2557+-0xc8+0xbf*-0x31;_0x56f85a<_0x10a8a7['length'];++_0x56f85a)_0x10a8a7[_0x56f85a]['reflow']();if(++_0x2afd2c>=cR){console['warn']('Max\x20reflow'+'\x20iteration'+'s\x20limit\x20re'+'ached,\x20bai'+'ling.');break;}}}['_onRemoveC'+'omponent'](_0x354866,_0x244184){_0x244184['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}we['_buildAcce'+'ssors'](vv['prototype'],xv);class dR{constructor(){h(this,'map',new Map());}['destroy'](_0x3b49a0){this['map']['forEach'](_0x1bc190=>_0x1bc190['mesh']['destroy']());}}const fR=new Kt(),Tv=(_0x5ca19a,_0x51052a)=>{const _0x51b015=fR['get'](_0x5ca19a,()=>new dR());let _0x324c9a=_0x51b015['map']['get'](_0x51052a);if(!_0x324c9a){let _0xabac1f,_0x26dac0;switch(_0x51052a){case'box':_0xabac1f=Ge['fromGeomet'+'ry'](_0x5ca19a,new Hf()),_0x26dac0={'x':0x2,'y':0x2,'z':0x2,'uv':(-0x1d6d+0x3*-0xbaf+0x101f*0x4)/(0x4b+-0x34*-0x8c+-0x1cb8)};break;case'capsule':_0xabac1f=Ge['fromGeomet'+'ry'](_0x5ca19a,new nA({'radius':0.5,'height':0x2})),_0x26dac0={'x':Math['PI']*(-0x28b+0x2eb*0xc+-0x1*0x2077),'y':Math['PI'],'z':Math['PI']*(0x1c37*-0x1+0x19ad+0x28c),'uv':(-0x1*0x23fb+-0x1fd8+0x43d4*0x1)/(-0x138e+-0xbe7+0x1f78)+(0x9d*0x9+-0x15a7+0x1023)/(-0x89a*0x3+0x1466+-0x13*-0x49)/(-0x47c*0x3+-0x2ce*0x4+0x18af*0x1)*(-0x115*0x19+0xa07+0x1b4*0xa)};break;case'cone':_0xabac1f=Ge['fromGeomet'+'ry'](_0x5ca19a,new oA({'baseRadius':0.5,'peakRadius':0x0,'height':0x1})),_0x26dac0={'x':2.54,'y':2.54,'z':2.54,'uv':(-0x8da+0x2*-0x23c+-0x17b*-0x9)/(0xc2d+0x20f9*-0x1+-0x7*-0x2f9)+(0x1f03+0x19b1+-0x38b3)/(0x9be+0x976*-0x2+0x931*0x1)/(-0x10ad+0x1d*0x149+0x1df*-0xb)};break;case'cylinder':_0xabac1f=Ge['fromGeomet'+'ry'](_0x5ca19a,new lA({'radius':0.5,'height':0x1})),_0x26dac0={'x':Math['PI'],'y':(-0x5*-0x59d+-0x11d6*0x2+0xb*0xb1+0.79)*(-0x1d0a+-0x3d9+0x20e5*0x1),'z':Math['PI'],'uv':(-0x522+0x59*-0x3a+0x1*0x194d)/(0x1e5e+0x1b8e+-0x39e9)+(0x5b4+-0x143f+-0x31*-0x4c)/(-0x127+-0x9b8*-0x3+-0x1bfe)/(0xa96*0x1+-0x117d+0x6ea)*(-0x177c+0xf6b+0x813)};break;case'plane':_0xabac1f=Ge['fromGeomet'+'ry'](_0x5ca19a,new cA({'halfExtents':new J(0xd2a+-0x1*0x15e9+0x8bf+0.5,0x13f*-0xf+0x95f+0x952+0.5),'widthSegments':0x1,'lengthSegments':0x1})),_0x26dac0={'x':0x0,'y':0x1,'z':0x0,'uv':0x1};break;case'sphere':_0xabac1f=Ge['fromGeomet'+'ry'](_0x5ca19a,new Hp({'radius':0.5})),_0x26dac0={'x':Math['PI'],'y':Math['PI'],'z':Math['PI'],'uv':0x1};break;case'torus':_0xabac1f=Ge['fromGeomet'+'ry'](_0x5ca19a,new hA({'tubeRadius':0.2,'ringRadius':0.3})),_0x26dac0={'x':Math['PI']*(0x725*0x1+0x197a+-0x7*0x4a9+0.5)*(0x25ae+0x6e3*0x5+-0x481d*0x1+0.5)-Math['PI']*(-0x1026+-0x2096+0x4*0xc2f+0.1)*(-0x1dd+-0x158d+0x176a+0.1),'y':0.4,'z':0.4,'uv':0x1};break;default:throw new Error('Invalid\x20pr'+'imitive\x20ty'+'pe:\x20'+_0x51052a);}_0xabac1f['incRefCoun'+'t'](),_0x324c9a={'mesh':_0xabac1f,'area':_0x26dac0},_0x51b015['map']['set'](_0x51052a,_0x324c9a);}return _0x324c9a;};class Yp extends we{constructor(_0x2bc171,_0x5be30a){super(_0x2bc171,_0x5be30a),h(this,'_type','asset'),h(this,'_asset',null),h(this,'_model',null),h(this,'_mapping',{}),h(this,'_castShado'+'ws',!(-0xaf6*0x3+0x1594+0x5a7*0x2)),h(this,'_receiveSh'+'adows',!(-0x99b*-0x2+-0x5*-0xa3+-0x1665)),h(this,'_materialA'+'sset',null),h(this,'_material'),h(this,'_castShado'+'wsLightmap',!(0x288+-0xd01+0xa79)),h(this,'_lightmapp'+'ed',!(-0x1*-0xb05+0x12ab+-0x1daf)),h(this,'_lightmapS'+'izeMultipl'+'ier',0x60d+0x1499+-0x1aa5*0x1),h(this,'isStatic',!(-0xd4b+0x7*0x146+0x11*0x42)),h(this,'_layers',[Ji]),h(this,'_batchGrou'+'pId',-(-0x1619+0xc7*0x11+0x1c7*0x5)),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_materialE'+'vents',null),h(this,'_clonedMod'+'el',!(0x1d1d+-0xf3a*0x1+0x2*-0x6f1)),h(this,'_batchGrou'+'p',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_material']=_0x2bc171['defaultMat'+'erial'],_0x5be30a['on']('remove',this['onRemoveCh'+'ild'],this),_0x5be30a['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x5be30a['on']('insert',this['onInsertCh'+'ild'],this),_0x5be30a['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['meshInstan'+'ces'](_0x23f533){this['_model']&&(this['_model']['meshInstan'+'ces']=_0x23f533);}get['meshInstan'+'ces'](){return this['_model']?this['_model']['meshInstan'+'ces']:null;}set['customAabb'](_0x24cc4a){if(this['_customAab'+'b']=_0x24cc4a,this['_model']){const _0x13f73b=this['_model']['meshInstan'+'ces'];if(_0x13f73b){for(let _0x4fca88=-0x1c21+-0x2432+0x4053;_0x4fca88<_0x13f73b['length'];_0x4fca88++)_0x13f73b[_0x4fca88]['setCustomA'+'abb'](this['_customAab'+'b']);}}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x35ff93){if(this['_type']!==_0x35ff93){if(this['_area']=null,this['_type']=_0x35ff93,_0x35ff93==='asset')this['_asset']!==null?this['_bindModel'+'Asset'](this['_asset']):this['model']=null;else{const _0x34e171=Tv(this['system']['app']['graphicsDe'+'vice'],_0x35ff93);this['_area']=_0x34e171['area'];const _0x5446a2=_0x34e171['mesh'],_0x2d158b=new Ie(),_0x3cd704=new tr();_0x3cd704['graph']=_0x2d158b,_0x3cd704['meshInstan'+'ces']=[new He(_0x5446a2,this['_material'],_0x2d158b)],this['model']=_0x3cd704,this['_asset']=null;}}}get['type'](){return this['_type'];}set['asset'](_0x38e290){const _0x51bd1b=this['system']['app']['assets'];let _0x521373=_0x38e290;if(_0x38e290 instanceof pe&&(_0x521373=_0x38e290['id']),this['_asset']!==_0x521373){if(this['_asset']){_0x51bd1b['off']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this);const _0x5ae0e0=_0x51bd1b['get'](this['_asset']);_0x5ae0e0&&this['_unbindMod'+'elAsset'](_0x5ae0e0);}if(this['_asset']=_0x521373,this['_asset']){const _0x49d1f6=_0x51bd1b['get'](this['_asset']);_0x49d1f6?this['_bindModel'+'Asset'](_0x49d1f6):(this['model']=null,_0x51bd1b['on']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this));}else this['model']=null;}}get['asset'](){return this['_asset'];}set['model'](_0x3131e3){if(this['_model']!==_0x3131e3){if(_0x3131e3&&_0x3131e3['_immutable']){w['error']('Invalid\x20at'+'tempt\x20to\x20a'+'ssign\x20a\x20mo'+'del\x20to\x20mul'+'tiple\x20Mode'+'lComponent'+'s');return;}if(this['_model']&&(this['_model']['_immutable']=!(0x1*0x11e2+0x207f+-0x3260),this['removeMode'+'lFromLayer'+'s'](),this['_model']['getGraph']()['destroy'](),delete this['_model']['_entity'],this['_clonedMod'+'el']&&(this['_model']['destroy'](),this['_clonedMod'+'el']=!(0x1*-0xffd+-0x1*0x23ad+-0x33ab*-0x1))),this['_model']=_0x3131e3,this['_model']){this['_model']['_immutable']=!(-0x3*-0x412+0x6fb+-0x121*0x11);const _0xcc2c9b=this['_model']['meshInstan'+'ces'];for(let _0x496ce3=0xad*0x3+0xec9+-0x10d0;_0x496ce3<_0xcc2c9b['length'];_0x496ce3++)_0xcc2c9b[_0x496ce3]['castShadow']=this['_castShado'+'ws'],_0xcc2c9b[_0x496ce3]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0xcc2c9b[_0x496ce3]['setCustomA'+'abb'](this['_customAab'+'b']);this['lightmappe'+'d']=this['_lightmapp'+'ed'],this['entity']['addChild'](this['_model']['graph']),this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_model']['_entity']=this['entity'],this['entity']['animation']&&this['entity']['animation']['setModel'](this['_model']),this['entity']['anim']&&this['entity']['anim']['rebind'](),this['type']==='asset'?this['mapping']=this['_mapping']:this['_unsetMate'+'rialEvents']();}}}get['model'](){return this['_model'];}set['lightmappe'+'d'](_0x5ecb26){if(_0x5ecb26!==this['_lightmapp'+'ed']&&(this['_lightmapp'+'ed']=_0x5ecb26,this['_model'])){const _0xaaa36e=this['_model']['meshInstan'+'ces'];for(let _0x94dfd=-0x207*0x4+-0xa2*-0x1b+0x8fa*-0x1;_0x94dfd<_0xaaa36e['length'];_0x94dfd++)_0xaaa36e[_0x94dfd]['setLightma'+'pped'](_0x5ecb26);}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x3971b3){if(this['_castShado'+'ws']===_0x3971b3)return;const _0x53f713=this['_model'];if(_0x53f713){const _0x20dd89=this['layers'],_0x5a8d48=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x3971b3)for(let _0x114bb8=-0x21ec+-0x1a6c*-0x1+0x780;_0x114bb8<_0x20dd89['length'];_0x114bb8++){const _0x359848=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x114bb8]);_0x359848&&_0x359848['removeShad'+'owCasters'](_0x53f713['meshInstan'+'ces']);}const _0x45cda1=_0x53f713['meshInstan'+'ces'];for(let _0x5dc989=-0x74*-0x5+0x1*0x24a3+-0x26e7;_0x5dc989<_0x45cda1['length'];_0x5dc989++)_0x45cda1[_0x5dc989]['castShadow']=_0x3971b3;if(!this['_castShado'+'ws']&&_0x3971b3)for(let _0x4cbe9e=-0x118c+0x6f*-0x5+0x13b7;_0x4cbe9e<_0x20dd89['length'];_0x4cbe9e++){const _0x52f5fd=_0x5a8d48['layers']['getLayerBy'+'Id'](_0x20dd89[_0x4cbe9e]);_0x52f5fd&&_0x52f5fd['addShadowC'+'asters'](_0x53f713['meshInstan'+'ces']);}}this['_castShado'+'ws']=_0x3971b3;}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0xbd7463){if(this['_receiveSh'+'adows']!==_0xbd7463&&(this['_receiveSh'+'adows']=_0xbd7463,this['_model'])){const _0xcf58c7=this['_model']['meshInstan'+'ces'];for(let _0x189d39=-0x1592+-0xa*0x14b+0x2280,_0x34f36a=_0xcf58c7['length'];_0x189d39<_0x34f36a;_0x189d39++)_0xcf58c7[_0x189d39]['receiveSha'+'dow']=_0xbd7463;}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x7bcc2d){this['_castShado'+'wsLightmap']=_0x7bcc2d;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x19d333){this['_lightmapS'+'izeMultipl'+'ier']=_0x19d333;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x952e58){const _0x4b2cbc=this['system']['app']['scene']['layers'];if(this['meshInstan'+'ces'])for(let _0x3f481=0xa1+-0x64d*-0x5+-0x2022;_0x3f481<this['_layers']['length'];_0x3f481++){const _0x438e5f=_0x4b2cbc['getLayerBy'+'Id'](this['_layers'][_0x3f481]);_0x438e5f&&_0x438e5f['removeMesh'+'Instances'](this['meshInstan'+'ces']);}this['_layers']['length']=0x122c+0x1*-0x1de0+0xbb4;for(let _0x106320=-0x33*0x7+0x2202*-0x1+0x2367;_0x106320<_0x952e58['length'];_0x106320++)this['_layers'][_0x106320]=_0x952e58[_0x106320];if(!(!this['enabled']||!this['entity']['enabled']||!this['meshInstan'+'ces']))for(let _0x59af6a=0x22dd+0x174*-0xc+-0x116d;_0x59af6a<this['_layers']['length'];_0x59af6a++){const _0x193a9b=_0x4b2cbc['getLayerBy'+'Id'](this['_layers'][_0x59af6a]);_0x193a9b&&_0x193a9b['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x1c1525){var _0x11ee44,_0x55c5e7;this['_batchGrou'+'pId']!==_0x1c1525&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0x139c+0x1f99+-0x3335&&((_0x11ee44=this['system']['app']['batcher'])==null||_0x11ee44['remove'](St['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x1c1525>=-0x2*0x48b+0x557+0x3bf&&((_0x55c5e7=this['system']['app']['batcher'])==null||_0x55c5e7['insert'](St['MODEL'],_0x1c1525,this['entity'])),_0x1c1525<-0x47*-0x1c+0x19da+-0x219e&&this['_batchGrou'+'pId']>=0x8f7+-0x212f+-0x2*-0xc1c&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_batchGrou'+'pId']=_0x1c1525);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['materialAs'+'set'](_0x5ec889){let _0x526a95=_0x5ec889;_0x5ec889 instanceof pe&&(_0x526a95=_0x5ec889['id']);const _0x5d2878=this['system']['app']['assets'];if(_0x526a95!==this['_materialA'+'sset']){if(this['_materialA'+'sset']){_0x5d2878['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this);const _0x5d4875=_0x5d2878['get'](this['_materialA'+'sset']);_0x5d4875&&this['_unbindMat'+'erialAsset'](_0x5d4875);}if(this['_materialA'+'sset']=_0x526a95,this['_materialA'+'sset']){const _0x4f1e83=_0x5d2878['get'](this['_materialA'+'sset']);_0x4f1e83?this['_bindMater'+'ialAsset'](_0x4f1e83):(this['_setMateri'+'al'](this['system']['defaultMat'+'erial']),_0x5d2878['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this));}else this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['material'](_0xc79d80){this['_material']!==_0xc79d80&&(this['materialAs'+'set']=null,this['_setMateri'+'al'](_0xc79d80));}get['material'](){return this['_material'];}set['mapping'](_0x501f9c){if(this['_type']!=='asset'||(this['_unsetMate'+'rialEvents'](),_0x501f9c||(_0x501f9c={}),this['_mapping']=_0x501f9c,!this['_model']))return;const _0x25f10e=this['_model']['meshInstan'+'ces'],_0x4a53f1=this['asset']?this['system']['app']['assets']['get'](this['asset']):null,_0x32fdf1=_0x4a53f1?_0x4a53f1['data']['mapping']:null;let _0x350508=null;for(let _0x29985b=0x1*-0x1d77+-0x2102+0x3e79*0x1,_0x556ffd=_0x25f10e['length'];_0x29985b<_0x556ffd;_0x29985b++)if(_0x501f9c[_0x29985b]!==void(0x206b+0x393+-0x23fe*0x1))_0x501f9c[_0x29985b]?(_0x350508=this['system']['app']['assets']['get'](_0x501f9c[_0x29985b]),this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x350508,_0x25f10e[_0x29985b],_0x29985b)):_0x25f10e[_0x29985b]['material']=this['system']['defaultMat'+'erial'];else{if(_0x32fdf1){if(_0x32fdf1[_0x29985b]&&(_0x32fdf1[_0x29985b]['material']||_0x32fdf1[_0x29985b]['path'])){if(_0x32fdf1[_0x29985b]['material']!==void(-0x20f1+0x2463+0x93*-0x6))_0x350508=this['system']['app']['assets']['get'](_0x32fdf1[_0x29985b]['material']);else{if(_0x32fdf1[_0x29985b]['path']!==void(-0x989*0x3+-0xdd0+-0x1*-0x2a6b)){const _0x46a31c=this['_getMateri'+'alAssetUrl'](_0x32fdf1[_0x29985b]['path']);_0x46a31c&&(_0x350508=this['system']['app']['assets']['getByUrl'](_0x46a31c));}}this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x350508,_0x25f10e[_0x29985b],_0x29985b);}else _0x25f10e[_0x29985b]['material']=this['system']['defaultMat'+'erial'];}}}get['mapping'](){return this['_mapping'];}['addModelTo'+'Layers'](){const _0x166d98=this['system']['app']['scene']['layers'];for(let _0x202aaf=0x115c+-0x1367+0x20b*0x1;_0x202aaf<this['_layers']['length'];_0x202aaf++){const _0xf7ccbf=_0x166d98['getLayerBy'+'Id'](this['_layers'][_0x202aaf]);_0xf7ccbf&&_0xf7ccbf['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](){const _0x4c6059=this['system']['app']['scene']['layers'];for(let _0x284fe0=0x107b+-0x2e*-0x32+-0x1977;_0x284fe0<this['_layers']['length'];_0x284fe0++){const _0x5ed766=_0x4c6059['getLayerBy'+'Id'](this['_layers'][_0x284fe0]);_0x5ed766&&_0x5ed766['removeMesh'+'Instances'](this['meshInstan'+'ces']);}}['onRemoveCh'+'ild'](){this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['onInsertCh'+'ild'](){this['_model']&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers']();}['onRemove'](){this['asset']=null,this['model']=null,this['materialAs'+'set']=null,this['_unsetMate'+'rialEvents'](),this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x21b649,_0x11df61){this['addModelTo'+'Layers'](),_0x21b649['off']('add',this['onLayerAdd'+'ed'],this),_0x21b649['off']('remove',this['onLayerRem'+'oved'],this),_0x11df61['on']('add',this['onLayerAdd'+'ed'],this),_0x11df61['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x487ba7){this['layers']['indexOf'](_0x487ba7['id'])<-0x5ae+0x73e+-0x190||_0x487ba7['addMeshIns'+'tances'](this['meshInstan'+'ces']);}['onLayerRem'+'oved'](_0x4d6f36){this['layers']['indexOf'](_0x4d6f36['id'])<-0x226c+-0xafa+0x2d66||_0x4d6f36['removeMesh'+'Instances'](this['meshInstan'+'ces']);}['_setMateri'+'alEvent'](_0x26ac34,_0x4f18e5,_0x42a1d3,_0x15b015){const _0x374192=_0x4f18e5+':'+_0x42a1d3;this['system']['app']['assets']['on'](_0x374192,_0x15b015,this),this['_materialE'+'vents']||(this['_materialE'+'vents']=[]),this['_materialE'+'vents'][_0x26ac34]||(this['_materialE'+'vents'][_0x26ac34]={}),this['_materialE'+'vents'][_0x26ac34][_0x374192]={'id':_0x42a1d3,'handler':_0x15b015};}['_unsetMate'+'rialEvents'](){const _0x1997dd=this['system']['app']['assets'],_0x5e6afc=this['_materialE'+'vents'];if(_0x5e6afc){for(let _0xc176f1=0x2c*-0xbf+-0x2e6+-0x1*-0x23ba,_0x33d051=_0x5e6afc['length'];_0xc176f1<_0x33d051;_0xc176f1++){if(!_0x5e6afc[_0xc176f1])continue;const _0x2b6eae=_0x5e6afc[_0xc176f1];for(const _0x4947ff in _0x2b6eae)_0x1997dd['off'](_0x4947ff,_0x2b6eae[_0x4947ff]['handler'],this);}this['_materialE'+'vents']=null;}}['_getAssetB'+'yIdOrPath'](_0x19596f){let _0x37e4d1=null;if(!isNaN(parseInt(_0x19596f,-0x202+-0xfd*0x1a+0xddf*0x2)))_0x37e4d1=this['system']['app']['assets']['get'](_0x19596f);else{if(this['asset']){const _0x14bf90=this['_getMateri'+'alAssetUrl'](_0x19596f);_0x14bf90&&(_0x37e4d1=this['system']['app']['assets']['getByUrl'](_0x14bf90));}}return _0x37e4d1;}['_getMateri'+'alAssetUrl'](_0x2df1ac){if(!this['asset'])return null;const _0x25fc74=this['system']['app']['assets']['get'](this['asset']);return _0x25fc74?_0x25fc74['getAbsolut'+'eUrl'](_0x2df1ac):null;}['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x30344c,_0x40aebc,_0x19d80c){const _0x221715=this['system']['app']['assets'];_0x30344c&&(_0x30344c['resource']?(_0x40aebc['material']=_0x30344c['resource'],this['_setMateri'+'alEvent'](_0x19d80c,'remove',_0x30344c['id'],function(){_0x40aebc['material']=this['system']['defaultMat'+'erial'];})):(this['_setMateri'+'alEvent'](_0x19d80c,'load',_0x30344c['id'],function(_0x59902b){_0x40aebc['material']=_0x59902b['resource'],this['_setMateri'+'alEvent'](_0x19d80c,'remove',_0x30344c['id'],function(){_0x40aebc['material']=this['system']['defaultMat'+'erial'];});}),this['enabled']&&this['entity']['enabled']&&_0x221715['load'](_0x30344c)));}['onEnable'](){var _0xe49c46;const _0x1e341e=this['system']['app'],_0x596ddd=_0x1e341e['scene'],_0x245828=_0x596ddd==null?void(-0x6d5+0x1185+-0xab0):_0x596ddd['layers'];this['_evtLayers'+'Changed']=_0x596ddd['on']('set:layers',this['onLayersCh'+'anged'],this),_0x245828&&(this['_evtLayerA'+'dded']=_0x245828['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x245828['on']('remove',this['onLayerRem'+'oved'],this));const _0x52664c=this['_type']==='asset';let _0xc57c5a;if(this['_model']?this['addModelTo'+'Layers']():_0x52664c&&this['_asset']&&(_0xc57c5a=_0x1e341e['assets']['get'](this['_asset']),_0xc57c5a&&_0xc57c5a['resource']!==this['_model']&&this['_bindModel'+'Asset'](_0xc57c5a)),this['_materialA'+'sset']&&(_0xc57c5a=_0x1e341e['assets']['get'](this['_materialA'+'sset']),_0xc57c5a&&_0xc57c5a['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0xc57c5a)),_0x52664c&&this['_mapping']){for(const _0x41f657 in this['_mapping'])this['_mapping'][_0x41f657]&&(_0xc57c5a=this['_getAssetB'+'yIdOrPath'](this['_mapping'][_0x41f657]),_0xc57c5a&&!_0xc57c5a['resource']&&_0x1e341e['assets']['load'](_0xc57c5a));}this['_batchGrou'+'pId']>=0xb45+0x23f2+-0x2f37&&((_0xe49c46=_0x1e341e['batcher'])==null||_0xe49c46['insert'](St['MODEL'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x4cc20e,_0x54cd76,_0x5bc5d5,_0x1096e3;const _0x36ea43=this['system']['app'],_0x2b6316=_0x36ea43['scene']['layers'];(_0x4cc20e=this['_evtLayers'+'Changed'])==null||_0x4cc20e['off'](),this['_evtLayers'+'Changed']=null,_0x2b6316&&((_0x54cd76=this['_evtLayerA'+'dded'])==null||_0x54cd76['off'](),this['_evtLayerA'+'dded']=null,(_0x5bc5d5=this['_evtLayerR'+'emoved'])==null||_0x5bc5d5['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=-0x4*-0x8af+-0xe7*-0x29+-0x47bb*0x1&&((_0x1096e3=_0x36ea43['batcher'])==null||_0x1096e3['remove'](St['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['hide'](){if(this['_model']){const _0x24c2b9=this['_model']['meshInstan'+'ces'];for(let _0xaacbc1=0x1fa5+-0x7a5*-0x5+-0x32d*0x16,_0x1330d8=_0x24c2b9['length'];_0xaacbc1<_0x1330d8;_0xaacbc1++)_0x24c2b9[_0xaacbc1]['visible']=!(-0x245e+0x3b*-0x94+0x467b*0x1);}}['show'](){if(this['_model']){const _0x200fde=this['_model']['meshInstan'+'ces'];for(let _0x2c1207=-0x1*0xfb6+0x167e+-0x6c8,_0x3b3638=_0x200fde['length'];_0x2c1207<_0x3b3638;_0x2c1207++)_0x200fde[_0x2c1207]['visible']=!(-0x3*-0x6c9+-0x222d+-0x1*-0xdd2);}}['_bindMater'+'ialAsset'](_0xa1ed56){if(_0xa1ed56['on']('load',this['_onMateria'+'lAssetLoad'],this),_0xa1ed56['on']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0xa1ed56['on']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0xa1ed56['on']('change',this['_onMateria'+'lAssetChan'+'ge'],this),_0xa1ed56['resource'])this['_onMateria'+'lAssetLoad'](_0xa1ed56);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0xa1ed56);}}['_unbindMat'+'erialAsset'](_0x104f2d){_0x104f2d['off']('load',this['_onMateria'+'lAssetLoad'],this),_0x104f2d['off']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x104f2d['off']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x104f2d['off']('change',this['_onMateria'+'lAssetChan'+'ge'],this);}['_onMateria'+'lAssetAdd'](_0x590af1){this['system']['app']['assets']['off']('add:'+_0x590af1['id'],this['_onMateria'+'lAssetAdd'],this),this['_materialA'+'sset']===_0x590af1['id']&&this['_bindMater'+'ialAsset'](_0x590af1);}['_onMateria'+'lAssetLoad'](_0x5cdba8){this['_setMateri'+'al'](_0x5cdba8['resource']);}['_onMateria'+'lAssetUnlo'+'ad'](_0x5cd7b1){this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}['_onMateria'+'lAssetRemo'+'ve'](_0x1d26ba){this['_onMateria'+'lAssetUnlo'+'ad'](_0x1d26ba);}['_onMateria'+'lAssetChan'+'ge'](_0x1d96a0){}['_bindModel'+'Asset'](_0x13024d){if(this['_unbindMod'+'elAsset'](_0x13024d),_0x13024d['on']('load',this['_onModelAs'+'setLoad'],this),_0x13024d['on']('unload',this['_onModelAs'+'setUnload'],this),_0x13024d['on']('change',this['_onModelAs'+'setChange'],this),_0x13024d['on']('remove',this['_onModelAs'+'setRemove'],this),_0x13024d['resource'])this['_onModelAs'+'setLoad'](_0x13024d);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x13024d);}}['_unbindMod'+'elAsset'](_0x267be0){_0x267be0['off']('load',this['_onModelAs'+'setLoad'],this),_0x267be0['off']('unload',this['_onModelAs'+'setUnload'],this),_0x267be0['off']('change',this['_onModelAs'+'setChange'],this),_0x267be0['off']('remove',this['_onModelAs'+'setRemove'],this);}['_onModelAs'+'setAdded'](_0x47cf40){this['system']['app']['assets']['off']('add:'+_0x47cf40['id'],this['_onModelAs'+'setAdded'],this),_0x47cf40['id']===this['_asset']&&this['_bindModel'+'Asset'](_0x47cf40);}['_onModelAs'+'setLoad'](_0x41315a){this['model']=_0x41315a['resource']['clone'](),this['_clonedMod'+'el']=!(0x1*-0x2201+0x5e6*-0x2+0x2dcd);}['_onModelAs'+'setUnload'](_0x5297c3){this['model']=null;}['_onModelAs'+'setChange'](_0x385408,_0x255a97,_0x134563,_0x404843){_0x255a97==='data'&&(this['mapping']=this['_mapping']);}['_onModelAs'+'setRemove'](_0x39bf72){this['model']=null;}['_setMateri'+'al'](_0x374ab0){if(this['_material']===_0x374ab0)return;this['_material']=_0x374ab0;const _0x3484b4=this['_model'];if(_0x3484b4&&this['_type']!=='asset'){const _0x445bfe=_0x3484b4['meshInstan'+'ces'];for(let _0x4a5b89=-0x1*0x1cb+-0x1*-0x80a+-0x63f,_0x20c314=_0x445bfe['length'];_0x4a5b89<_0x20c314;_0x4a5b89++)_0x445bfe[_0x4a5b89]['material']=_0x374ab0;}}}class uR{constructor(){this['enabled']=!(-0x23dc+-0x3eb*0x9+0x1*0x471f);}}const wv=['enabled'];class pR extends ct{constructor(_0x2de4ae){super(_0x2de4ae),this['id']='model',this['ComponentT'+'ype']=Yp,this['DataType']=uR,this['schema']=wv,this['defaultMat'+'erial']=$n(_0x2de4ae['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x5ecf1f,_0x2b20f4,_0x2cb655){_0x2cb655=['material','materialAs'+'set','asset','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','type','mapping','layers','isStatic','batchGroup'+'Id'],(_0x2b20f4['batchGroup'+'Id']===null||_0x2b20f4['batchGroup'+'Id']===void(0x264b+0x89*0x4+-0x286f))&&(_0x2b20f4['batchGroup'+'Id']=-(-0x1bb9+0x2*-0x24e+0x2056)),_0x2b20f4['layers']&&_0x2b20f4['layers']['length']&&(_0x2b20f4['layers']=_0x2b20f4['layers']['slice'](0x1*-0x3df+0x70b+-0x1c*0x1d));for(let _0x74795c=-0x15af+0xc0d+-0x2*-0x4d1;_0x74795c<_0x2cb655['length'];_0x74795c++)_0x2b20f4['hasOwnProp'+'erty'](_0x2cb655[_0x74795c])&&(_0x5ecf1f[_0x2cb655[_0x74795c]]=_0x2b20f4[_0x2cb655[_0x74795c]]);_0x2b20f4['aabbCenter']&&_0x2b20f4['aabbHalfEx'+'tents']&&(_0x5ecf1f['customAabb']=new De(new D(_0x2b20f4['aabbCenter']),new D(_0x2b20f4['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x5ecf1f,_0x2b20f4,['enabled']);}['cloneCompo'+'nent'](_0x155574,_0x34d61a){const _0x2670e0={'type':_0x155574['model']['type'],'asset':_0x155574['model']['asset'],'castShadows':_0x155574['model']['castShadow'+'s'],'receiveShadows':_0x155574['model']['receiveSha'+'dows'],'castShadowsLightmap':_0x155574['model']['castShadow'+'sLightmap'],'lightmapped':_0x155574['model']['lightmappe'+'d'],'lightmapSizeMultiplier':_0x155574['model']['lightmapSi'+'zeMultipli'+'er'],'isStatic':_0x155574['model']['isStatic'],'enabled':_0x155574['model']['enabled'],'layers':_0x155574['model']['layers'],'batchGroupId':_0x155574['model']['batchGroup'+'Id'],'mapping':kc({},_0x155574['model']['mapping'])};let _0x30dbc6=_0x155574['model']['materialAs'+'set'];!(_0x30dbc6 instanceof pe)&&_0x30dbc6!=null&&(_0x30dbc6=this['app']['assets']['get'](_0x30dbc6));const _0x47a88f=_0x155574['model']['material'];(!_0x47a88f||_0x47a88f===this['defaultMat'+'erial']||!_0x30dbc6||_0x47a88f===_0x30dbc6['resource'])&&(_0x2670e0['materialAs'+'set']=_0x30dbc6);const _0xa5a990=this['addCompone'+'nt'](_0x34d61a,_0x2670e0);if(_0x155574['model']['model']&&_0x155574['model']['type']==='asset'&&!_0x155574['model']['asset']&&(_0xa5a990['model']=_0x155574['model']['model']['clone'](),_0xa5a990['_clonedMod'+'el']=!(-0xbb6+0x17*-0x124+0x25f2)),_0x2670e0['materialAs'+'set']||(_0xa5a990['material']=_0x47a88f),_0x155574['model']['model']){const _0x297711=_0x155574['model']['model']['meshInstan'+'ces'],_0x3f3784=_0xa5a990['model']['meshInstan'+'ces'];for(let _0x27cf0d=0x20fb+-0x15ff+0x94*-0x13;_0x27cf0d<_0x297711['length'];_0x27cf0d++)_0x3f3784[_0x27cf0d]['mask']=_0x297711[_0x27cf0d]['mask'],_0x3f3784[_0x27cf0d]['material']=_0x297711[_0x27cf0d]['material'],_0x3f3784[_0x27cf0d]['layer']=_0x297711[_0x27cf0d]['layer'],_0x3f3784[_0x27cf0d]['receiveSha'+'dow']=_0x297711[_0x27cf0d]['receiveSha'+'dow'];}return _0x155574['model']['customAabb']&&(_0xa5a990['customAabb']=_0x155574['model']['customAabb']['clone']()),_0xa5a990;}['onRemove'](_0x5783f4,_0x174a92){_0x174a92['onRemove']();}}we['_buildAcce'+'ssors'](Yp['prototype'],wv);const mR=['emitterExt'+'ents','emitterRad'+'ius','emitterExt'+'entsInner','emitterRad'+'iusInner','loop','initialVel'+'ocity','animSpeed','normalMap','particleNo'+'rmal'],_R=['numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','lighting','halfLamber'+'t','intensity','wrap','wrapBounds','depthWrite','noFog','sort','stretch','alignToMot'+'ion','preWarm','emitterSha'+'pe','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animLoop','colorMap','localSpace','screenSpac'+'e','orientatio'+'n'],gR=['scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','velocityGr'+'aph','velocityGr'+'aph2','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2'],uc=['colorMapAs'+'set','normalMapA'+'sset','meshAsset','renderAsse'+'t'];let Wa;class SR extends we{constructor(_0x4e91d8,_0xd623b7){super(_0x4e91d8,_0xd623b7),h(this,'_requested'+'Depth',!(-0x217d*0x1+-0x136*-0x1a+-0x202*-0x1)),h(this,'_drawOrder',-0x1*-0xa+0x2371*-0x1+0xbcd*0x3),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['on']('set_colorM'+'apAsset',this['onSetColor'+'MapAsset'],this),this['on']('set_normal'+'MapAsset',this['onSetNorma'+'lMapAsset'],this),this['on']('set_meshAs'+'set',this['onSetMeshA'+'sset'],this),this['on']('set_mesh',this['onSetMesh'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_loop',this['onSetLoop'],this),this['on']('set_blendT'+'ype',this['onSetBlend'+'Type'],this),this['on']('set_depthS'+'oftening',this['onSetDepth'+'Softening'],this),this['on']('set_layers',this['onSetLayer'+'s'],this),mR['forEach'](_0x4a782b=>{this['on']('set_'+_0x4a782b,this['onSetSimpl'+'eProperty'],this);}),_R['forEach'](_0x66f452=>{this['on']('set_'+_0x66f452,this['onSetCompl'+'exProperty'],this);}),gR['forEach'](_0x53672c=>{this['on']('set_'+_0x53672c,this['onSetGraph'+'Property'],this);}));}get['data'](){const _0xdae58f=this['system']['store'][this['entity']['getGuid']()];return _0xdae58f?_0xdae58f['data']:null;}set['enabled'](_0x447954){this['_setValue']('enabled',_0x447954);}get['enabled'](){return this['data']['enabled'];}set['autoPlay'](_0x139fa1){this['_setValue']('autoPlay',_0x139fa1);}get['autoPlay'](){return this['data']['autoPlay'];}set['numParticl'+'es'](_0x2c01f9){this['_setValue']('numParticl'+'es',_0x2c01f9);}get['numParticl'+'es'](){return this['data']['numParticl'+'es'];}set['lifetime'](_0x178485){this['_setValue']('lifetime',_0x178485);}get['lifetime'](){return this['data']['lifetime'];}set['rate'](_0x233c73){this['_setValue']('rate',_0x233c73);}get['rate'](){return this['data']['rate'];}set['rate2'](_0x1bff60){this['_setValue']('rate2',_0x1bff60);}get['rate2'](){return this['data']['rate2'];}set['startAngle'](_0x2e67af){this['_setValue']('startAngle',_0x2e67af);}get['startAngle'](){return this['data']['startAngle'];}set['startAngle'+'2'](_0x3c543c){this['_setValue']('startAngle'+'2',_0x3c543c);}get['startAngle'+'2'](){return this['data']['startAngle'+'2'];}set['loop'](_0x5cddc5){this['_setValue']('loop',_0x5cddc5);}get['loop'](){return this['data']['loop'];}set['preWarm'](_0x51f93a){this['_setValue']('preWarm',_0x51f93a);}get['preWarm'](){return this['data']['preWarm'];}set['lighting'](_0x5e0d52){this['_setValue']('lighting',_0x5e0d52);}get['lighting'](){return this['data']['lighting'];}set['halfLamber'+'t'](_0x4b23db){this['_setValue']('halfLamber'+'t',_0x4b23db);}get['halfLamber'+'t'](){return this['data']['halfLamber'+'t'];}set['intensity'](_0x3f7b13){this['_setValue']('intensity',_0x3f7b13);}get['intensity'](){return this['data']['intensity'];}set['depthWrite'](_0x57bcc3){this['_setValue']('depthWrite',_0x57bcc3);}get['depthWrite'](){return this['data']['depthWrite'];}set['noFog'](_0x54b96f){this['_setValue']('noFog',_0x54b96f);}get['noFog'](){return this['data']['noFog'];}set['depthSofte'+'ning'](_0x5e8e84){this['_setValue']('depthSofte'+'ning',_0x5e8e84);}get['depthSofte'+'ning'](){return this['data']['depthSofte'+'ning'];}set['sort'](_0xdad0e5){this['_setValue']('sort',_0xdad0e5);}get['sort'](){return this['data']['sort'];}set['blendType'](_0x37cb1e){this['_setValue']('blendType',_0x37cb1e);}get['blendType'](){return this['data']['blendType'];}set['stretch'](_0x47610b){this['_setValue']('stretch',_0x47610b);}get['stretch'](){return this['data']['stretch'];}set['alignToMot'+'ion'](_0x1f5645){this['_setValue']('alignToMot'+'ion',_0x1f5645);}get['alignToMot'+'ion'](){return this['data']['alignToMot'+'ion'];}set['emitterSha'+'pe'](_0x3f3eec){this['_setValue']('emitterSha'+'pe',_0x3f3eec);}get['emitterSha'+'pe'](){return this['data']['emitterSha'+'pe'];}set['emitterExt'+'ents'](_0xc0d4b6){this['_setValue']('emitterExt'+'ents',_0xc0d4b6);}get['emitterExt'+'ents'](){return this['data']['emitterExt'+'ents'];}set['emitterExt'+'entsInner'](_0x2de633){this['_setValue']('emitterExt'+'entsInner',_0x2de633);}get['emitterExt'+'entsInner'](){return this['data']['emitterExt'+'entsInner'];}set['emitterRad'+'ius'](_0x5be9c3){this['_setValue']('emitterRad'+'ius',_0x5be9c3);}get['emitterRad'+'ius'](){return this['data']['emitterRad'+'ius'];}set['emitterRad'+'iusInner'](_0x352893){this['_setValue']('emitterRad'+'iusInner',_0x352893);}get['emitterRad'+'iusInner'](){return this['data']['emitterRad'+'iusInner'];}set['initialVel'+'ocity'](_0x5c55bc){this['_setValue']('initialVel'+'ocity',_0x5c55bc);}get['initialVel'+'ocity'](){return this['data']['initialVel'+'ocity'];}set['wrap'](_0x26ff97){this['_setValue']('wrap',_0x26ff97);}get['wrap'](){return this['data']['wrap'];}set['wrapBounds'](_0x3b4095){this['_setValue']('wrapBounds',_0x3b4095);}get['wrapBounds'](){return this['data']['wrapBounds'];}set['localSpace'](_0x461083){this['_setValue']('localSpace',_0x461083);}get['localSpace'](){return this['data']['localSpace'];}set['screenSpac'+'e'](_0x1ddf33){this['_setValue']('screenSpac'+'e',_0x1ddf33);}get['screenSpac'+'e'](){return this['data']['screenSpac'+'e'];}set['colorMapAs'+'set'](_0x262420){this['_setValue']('colorMapAs'+'set',_0x262420);}get['colorMapAs'+'set'](){return this['data']['colorMapAs'+'set'];}set['normalMapA'+'sset'](_0x4a3c68){this['_setValue']('normalMapA'+'sset',_0x4a3c68);}get['normalMapA'+'sset'](){return this['data']['normalMapA'+'sset'];}set['mesh'](_0x163628){this['_setValue']('mesh',_0x163628);}get['mesh'](){return this['data']['mesh'];}set['meshAsset'](_0x244c88){this['_setValue']('meshAsset',_0x244c88);}get['meshAsset'](){return this['data']['meshAsset'];}set['renderAsse'+'t'](_0x21972b){this['_setValue']('renderAsse'+'t',_0x21972b);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['orientatio'+'n'](_0x53f030){this['_setValue']('orientatio'+'n',_0x53f030);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['particleNo'+'rmal'](_0x116242){this['_setValue']('particleNo'+'rmal',_0x116242);}get['particleNo'+'rmal'](){return this['data']['particleNo'+'rmal'];}set['localVeloc'+'ityGraph'](_0x8d6710){this['_setValue']('localVeloc'+'ityGraph',_0x8d6710);}get['localVeloc'+'ityGraph'](){return this['data']['localVeloc'+'ityGraph'];}set['localVeloc'+'ityGraph2'](_0x1a674f){this['_setValue']('localVeloc'+'ityGraph2',_0x1a674f);}get['localVeloc'+'ityGraph2'](){return this['data']['localVeloc'+'ityGraph2'];}set['velocityGr'+'aph'](_0xe0ec1e){this['_setValue']('velocityGr'+'aph',_0xe0ec1e);}get['velocityGr'+'aph'](){return this['data']['velocityGr'+'aph'];}set['velocityGr'+'aph2'](_0x40eec3){this['_setValue']('velocityGr'+'aph2',_0x40eec3);}get['velocityGr'+'aph2'](){return this['data']['velocityGr'+'aph2'];}set['rotationSp'+'eedGraph'](_0x42ea7f){this['_setValue']('rotationSp'+'eedGraph',_0x42ea7f);}get['rotationSp'+'eedGraph'](){return this['data']['rotationSp'+'eedGraph'];}set['rotationSp'+'eedGraph2'](_0x407255){this['_setValue']('rotationSp'+'eedGraph2',_0x407255);}get['rotationSp'+'eedGraph2'](){return this['data']['rotationSp'+'eedGraph2'];}set['radialSpee'+'dGraph'](_0x13cd98){this['_setValue']('radialSpee'+'dGraph',_0x13cd98);}get['radialSpee'+'dGraph'](){return this['data']['radialSpee'+'dGraph'];}set['radialSpee'+'dGraph2'](_0x4a1f64){this['_setValue']('radialSpee'+'dGraph2',_0x4a1f64);}get['radialSpee'+'dGraph2'](){return this['data']['radialSpee'+'dGraph2'];}set['scaleGraph'](_0x3baab4){this['_setValue']('scaleGraph',_0x3baab4);}get['scaleGraph'](){return this['data']['scaleGraph'];}set['scaleGraph'+'2'](_0xcf9939){this['_setValue']('scaleGraph'+'2',_0xcf9939);}get['scaleGraph'+'2'](){return this['data']['scaleGraph'+'2'];}set['colorGraph'](_0x50662d){this['_setValue']('colorGraph',_0x50662d);}get['colorGraph'](){return this['data']['colorGraph'];}set['colorGraph'+'2'](_0x4865ad){this['_setValue']('colorGraph'+'2',_0x4865ad);}get['colorGraph'+'2'](){return this['data']['colorGraph'+'2'];}set['alphaGraph'](_0x51ab84){this['_setValue']('alphaGraph',_0x51ab84);}get['alphaGraph'](){return this['data']['alphaGraph'];}set['alphaGraph'+'2'](_0x4d6b8c){this['_setValue']('alphaGraph'+'2',_0x4d6b8c);}get['alphaGraph'+'2'](){return this['data']['alphaGraph'+'2'];}set['colorMap'](_0x8dc080){this['_setValue']('colorMap',_0x8dc080);}get['colorMap'](){return this['data']['colorMap'];}set['normalMap'](_0x51b2ea){this['_setValue']('normalMap',_0x51b2ea);}get['normalMap'](){return this['data']['normalMap'];}set['animTilesX'](_0x55d302){this['_setValue']('animTilesX',_0x55d302);}get['animTilesX'](){return this['data']['animTilesX'];}set['animTilesY'](_0x4e0237){this['_setValue']('animTilesY',_0x4e0237);}get['animTilesY'](){return this['data']['animTilesY'];}set['animStartF'+'rame'](_0x4c29e6){this['_setValue']('animStartF'+'rame',_0x4c29e6);}get['animStartF'+'rame'](){return this['data']['animStartF'+'rame'];}set['animNumFra'+'mes'](_0x26df48){this['_setValue']('animNumFra'+'mes',_0x26df48);}get['animNumFra'+'mes'](){return this['data']['animNumFra'+'mes'];}set['animNumAni'+'mations'](_0x43d246){this['_setValue']('animNumAni'+'mations',_0x43d246);}get['animNumAni'+'mations'](){return this['data']['animNumAni'+'mations'];}set['animIndex'](_0x18c4fa){this['_setValue']('animIndex',_0x18c4fa);}get['animIndex'](){return this['data']['animIndex'];}set['randomizeA'+'nimIndex'](_0x3647a0){this['_setValue']('randomizeA'+'nimIndex',_0x3647a0);}get['randomizeA'+'nimIndex'](){return this['data']['randomizeA'+'nimIndex'];}set['animSpeed'](_0x621b83){this['_setValue']('animSpeed',_0x621b83);}get['animSpeed'](){return this['data']['animSpeed'];}set['animLoop'](_0x1477cd){this['_setValue']('animLoop',_0x1477cd);}get['animLoop'](){return this['data']['animLoop'];}set['layers'](_0x332b57){this['_setValue']('layers',_0x332b57);}get['layers'](){return this['data']['layers'];}set['drawOrder'](_0x1e166a){this['_drawOrder']=_0x1e166a,this['emitter']&&(this['emitter']['drawOrder']=_0x1e166a);}get['drawOrder'](){return this['_drawOrder'];}['_setValue'](_0x36a7e7,_0x5deb55){const _0x3517a4=this['data'],_0x2bcb67=_0x3517a4[_0x36a7e7];_0x3517a4[_0x36a7e7]=_0x5deb55,this['fire']('set',_0x36a7e7,_0x2bcb67,_0x5deb55);}['addMeshIns'+'tanceToLay'+'ers'](){if(this['emitter'])for(let _0x512f1b=0x1f*-0xe3+-0x3fe+0x1f7b;_0x512f1b<this['layers']['length'];_0x512f1b++){const _0x3f121=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x512f1b]);_0x3f121&&(_0x3f121['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]),this['emitter']['_layer']=_0x3f121);}}['removeMesh'+'InstanceFr'+'omLayers'](){if(this['emitter'])for(let _0x1c7c9e=-0x262*0xf+0x537+0x1e87;_0x1c7c9e<this['layers']['length'];_0x1c7c9e++){const _0x2cc247=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x1c7c9e]);_0x2cc247&&_0x2cc247['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}}['onSetLayer'+'s'](_0x1ca581,_0x4c13d7,_0x260c7b){if(this['emitter']){for(let _0x9d72b3=-0x13e4+0x1550+-0x16c;_0x9d72b3<_0x4c13d7['length'];_0x9d72b3++){const _0x442978=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x4c13d7[_0x9d72b3]);_0x442978&&_0x442978['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}if(!(!this['enabled']||!this['entity']['enabled']))for(let _0x390b1a=0x87*0x2c+0xb49+-0x227d;_0x390b1a<_0x260c7b['length'];_0x390b1a++){const _0x56d325=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x260c7b[_0x390b1a]);_0x56d325&&_0x56d325['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}}}['onLayersCh'+'anged'](_0x11095c,_0xacb1ab){this['addMeshIns'+'tanceToLay'+'ers'](),_0x11095c['off']('add',this['onLayerAdd'+'ed'],this),_0x11095c['off']('remove',this['onLayerRem'+'oved'],this),_0xacb1ab['on']('add',this['onLayerAdd'+'ed'],this),_0xacb1ab['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x2bf237){!this['emitter']||this['layers']['indexOf'](_0x2bf237['id'])<-0x1*-0xca3+-0x1036+-0xf*-0x3d||_0x2bf237['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}['onLayerRem'+'oved'](_0x3a5a0d){!this['emitter']||this['layers']['indexOf'](_0x3a5a0d['id'])<-0xde3+0x1756+-0x973||_0x3a5a0d['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}['_bindColor'+'MapAsset'](_0x5ebb6e){if(_0x5ebb6e['on']('load',this['_onColorMa'+'pAssetLoad'],this),_0x5ebb6e['on']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x5ebb6e['on']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x5ebb6e['on']('change',this['_onColorMa'+'pAssetChan'+'ge'],this),_0x5ebb6e['resource'])this['_onColorMa'+'pAssetLoad'](_0x5ebb6e);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x5ebb6e);}}['_unbindCol'+'orMapAsset'](_0x2ca34f){_0x2ca34f['off']('load',this['_onColorMa'+'pAssetLoad'],this),_0x2ca34f['off']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x2ca34f['off']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x2ca34f['off']('change',this['_onColorMa'+'pAssetChan'+'ge'],this);}['_onColorMa'+'pAssetLoad'](_0x5b4b14){this['colorMap']=_0x5b4b14['resource'];}['_onColorMa'+'pAssetUnlo'+'ad'](_0xe4a8a0){this['colorMap']=null;}['_onColorMa'+'pAssetRemo'+'ve'](_0xea4bd1){this['_onColorMa'+'pAssetUnlo'+'ad'](_0xea4bd1);}['_onColorMa'+'pAssetChan'+'ge'](_0x4e80b2){}['onSetColor'+'MapAsset'](_0x300429,_0x30a0c6,_0x3b1f62){const _0x3ef738=this['system']['app']['assets'];if(_0x30a0c6){const _0x4daed6=_0x3ef738['get'](_0x30a0c6);_0x4daed6&&this['_unbindCol'+'orMapAsset'](_0x4daed6);}if(_0x3b1f62){_0x3b1f62 instanceof pe&&(this['data']['colorMapAs'+'set']=_0x3b1f62['id'],_0x3b1f62=_0x3b1f62['id']);const _0x417f14=_0x3ef738['get'](_0x3b1f62);_0x417f14?this['_bindColor'+'MapAsset'](_0x417f14):_0x3ef738['once']('add:'+_0x3b1f62,_0x93a444=>{this['_bindColor'+'MapAsset'](_0x93a444);});}else this['colorMap']=null;}['_bindNorma'+'lMapAsset'](_0x18ac0a){if(_0x18ac0a['on']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x18ac0a['on']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x18ac0a['on']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x18ac0a['on']('change',this['_onNormalM'+'apAssetCha'+'nge'],this),_0x18ac0a['resource'])this['_onNormalM'+'apAssetLoa'+'d'](_0x18ac0a);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x18ac0a);}}['_unbindNor'+'malMapAsse'+'t'](_0x262d30){_0x262d30['off']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x262d30['off']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x262d30['off']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x262d30['off']('change',this['_onNormalM'+'apAssetCha'+'nge'],this);}['_onNormalM'+'apAssetLoa'+'d'](_0x812891){this['normalMap']=_0x812891['resource'];}['_onNormalM'+'apAssetUnl'+'oad'](_0x60291c){this['normalMap']=null;}['_onNormalM'+'apAssetRem'+'ove'](_0x249098){this['_onNormalM'+'apAssetUnl'+'oad'](_0x249098);}['_onNormalM'+'apAssetCha'+'nge'](_0xf924cb){}['onSetNorma'+'lMapAsset'](_0x5007ba,_0x31e6a2,_0x1499db){const _0x2ae6b0=this['system']['app']['assets'];if(_0x31e6a2){const _0x204c69=_0x2ae6b0['get'](_0x31e6a2);_0x204c69&&this['_unbindNor'+'malMapAsse'+'t'](_0x204c69);}if(_0x1499db){_0x1499db instanceof pe&&(this['data']['normalMapA'+'sset']=_0x1499db['id'],_0x1499db=_0x1499db['id']);const _0x140ad8=_0x2ae6b0['get'](_0x1499db);_0x140ad8?this['_bindNorma'+'lMapAsset'](_0x140ad8):_0x2ae6b0['once']('add:'+_0x1499db,_0x2800fb=>{this['_bindNorma'+'lMapAsset'](_0x2800fb);});}else this['normalMap']=null;}['_bindMeshA'+'sset'](_0x4a9b85){if(_0x4a9b85['on']('load',this['_onMeshAss'+'etLoad'],this),_0x4a9b85['on']('unload',this['_onMeshAss'+'etUnload'],this),_0x4a9b85['on']('remove',this['_onMeshAss'+'etRemove'],this),_0x4a9b85['on']('change',this['_onMeshAss'+'etChange'],this),_0x4a9b85['resource'])this['_onMeshAss'+'etLoad'](_0x4a9b85);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x4a9b85);}}['_unbindMes'+'hAsset'](_0x1379c6){_0x1379c6['off']('load',this['_onMeshAss'+'etLoad'],this),_0x1379c6['off']('unload',this['_onMeshAss'+'etUnload'],this),_0x1379c6['off']('remove',this['_onMeshAss'+'etRemove'],this),_0x1379c6['off']('change',this['_onMeshAss'+'etChange'],this);}['_onMeshAss'+'etLoad'](_0xdfccc1){this['_onMeshCha'+'nged'](_0xdfccc1['resource']);}['_onMeshAss'+'etUnload'](_0x561d22){this['mesh']=null;}['_onMeshAss'+'etRemove'](_0x1182df){this['_onMeshAss'+'etUnload'](_0x1182df);}['_onMeshAss'+'etChange'](_0x30de60){}['onSetMeshA'+'sset'](_0x22a360,_0x5c4435,_0x2f5cc4){const _0x39f207=this['system']['app']['assets'];if(_0x5c4435){const _0x1918b9=_0x39f207['get'](_0x5c4435);_0x1918b9&&this['_unbindMes'+'hAsset'](_0x1918b9);}if(_0x2f5cc4){_0x2f5cc4 instanceof pe&&(this['data']['meshAsset']=_0x2f5cc4['id'],_0x2f5cc4=_0x2f5cc4['id']);const _0x2e66d4=_0x39f207['get'](_0x2f5cc4);_0x2e66d4&&this['_bindMeshA'+'sset'](_0x2e66d4);}else this['_onMeshCha'+'nged'](null);}['onSetMesh'](_0xfcce8a,_0x5ca557,_0x43da04){!_0x43da04||_0x43da04 instanceof pe||typeof _0x43da04=='number'?this['meshAsset']=_0x43da04:this['_onMeshCha'+'nged'](_0x43da04);}['_onMeshCha'+'nged'](_0x21843c){_0x21843c&&!(_0x21843c instanceof Ge)&&(_0x21843c['meshInstan'+'ces'][-0x733+0x2362+-0x1c2f]?_0x21843c=_0x21843c['meshInstan'+'ces'][-0x1d9b+-0x13*0x202+0x43c1*0x1]['mesh']:_0x21843c=null),this['data']['mesh']=_0x21843c,this['emitter']&&(this['emitter']['mesh']=_0x21843c,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['onSetRende'+'rAsset'](_0x4bf6cf,_0x45ad1d,_0x3d816c){const _0x2e2302=this['system']['app']['assets'];if(_0x45ad1d){const _0x5ce071=_0x2e2302['get'](_0x45ad1d);_0x5ce071&&this['_unbindRen'+'derAsset'](_0x5ce071);}if(_0x3d816c){_0x3d816c instanceof pe&&(this['data']['renderAsse'+'t']=_0x3d816c['id'],_0x3d816c=_0x3d816c['id']);const _0x149d18=_0x2e2302['get'](_0x3d816c);_0x149d18&&this['_bindRende'+'rAsset'](_0x149d18);}else this['_onRenderC'+'hanged'](null);}['_bindRende'+'rAsset'](_0x3ccf8e){if(_0x3ccf8e['on']('load',this['_onRenderA'+'ssetLoad'],this),_0x3ccf8e['on']('unload',this['_onRenderA'+'ssetUnload'],this),_0x3ccf8e['on']('remove',this['_onRenderA'+'ssetRemove'],this),_0x3ccf8e['resource'])this['_onRenderA'+'ssetLoad'](_0x3ccf8e);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x3ccf8e);}}['_unbindRen'+'derAsset'](_0xd733b1){var _0x4103b2;_0xd733b1['off']('load',this['_onRenderA'+'ssetLoad'],this),_0xd733b1['off']('unload',this['_onRenderA'+'ssetUnload'],this),_0xd733b1['off']('remove',this['_onRenderA'+'ssetRemove'],this),(_0x4103b2=this['_evtSetMes'+'hes'])==null||_0x4103b2['off'](),this['_evtSetMes'+'hes']=null;}['_onRenderA'+'ssetLoad'](_0x1f9e3e){this['_onRenderC'+'hanged'](_0x1f9e3e['resource']);}['_onRenderA'+'ssetUnload'](_0x3b3775){this['_onRenderC'+'hanged'](null);}['_onRenderA'+'ssetRemove'](_0x53de50){this['_onRenderA'+'ssetUnload'](_0x53de50);}['_onRenderC'+'hanged'](_0x124115){var _0x3699c5;if(!_0x124115){this['_onMeshCha'+'nged'](null);return;}(_0x3699c5=this['_evtSetMes'+'hes'])==null||_0x3699c5['off'](),this['_evtSetMes'+'hes']=_0x124115['on']('set:meshes',this['_onRenderS'+'etMeshes'],this),_0x124115['meshes']&&this['_onRenderS'+'etMeshes'](_0x124115['meshes']);}['_onRenderS'+'etMeshes'](_0x2f3b41){this['_onMeshCha'+'nged'](_0x2f3b41&&_0x2f3b41[-0x15da+-0x1df9+-0x1*-0x33d3]);}['onSetLoop'](_0xb1f4fa,_0x1f004c,_0x15e4d4){this['emitter']&&(this['emitter'][_0xb1f4fa]=_0x15e4d4,this['emitter']['resetTime']());}['onSetBlend'+'Type'](_0x38c501,_0x163473,_0x15e9fb){this['emitter']&&(this['emitter'][_0x38c501]=_0x15e9fb,this['emitter']['material']['blendType']=_0x15e9fb,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['_requestDe'+'pth'](){this['_requested'+'Depth']||(Wa||(Wa=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](ps)),Wa&&(Wa['incrementC'+'ounter'](),this['_requested'+'Depth']=!(0x14e*-0x1+-0x295*-0x4+-0x906*0x1)));}['_releaseDe'+'pth'](){this['_requested'+'Depth']&&Wa&&(Wa['decrementC'+'ounter'](),this['_requested'+'Depth']=!(-0x1a0a+0xc6d*0x3+-0x1*0xb3c));}['onSetDepth'+'Softening'](_0x1303ab,_0x3b6474,_0x834458){_0x3b6474!==_0x834458&&(_0x834458?(this['enabled']&&this['entity']['enabled']&&this['_requestDe'+'pth'](),this['emitter']&&(this['emitter'][_0x1303ab]=_0x834458)):(this['enabled']&&this['entity']['enabled']&&this['_releaseDe'+'pth'](),this['emitter']&&(this['emitter'][_0x1303ab]=_0x834458)),this['emitter']&&(this['reset'](),this['emitter']['resetMater'+'ial'](),this['rebuild']()));}['onSetSimpl'+'eProperty'](_0x23e2e9,_0x4d8545,_0x4b25f5){this['emitter']&&(this['emitter'][_0x23e2e9]=_0x4b25f5,this['emitter']['resetMater'+'ial']());}['onSetCompl'+'exProperty'](_0xe75a24,_0xb90a2b,_0xdb9af3){this['emitter']&&(this['emitter'][_0xe75a24]=_0xdb9af3,this['emitter']['resetMater'+'ial'](),this['rebuild'](),this['reset']());}['onSetGraph'+'Property'](_0x4dbc0,_0x52f866,_0x24a334){this['emitter']&&(this['emitter'][_0x4dbc0]=_0x24a334,this['emitter']['rebuildGra'+'phs'](),this['emitter']['resetMater'+'ial']());}['onEnable'](){const _0x19cbed=this['system']['app']['scene'],_0x41fb9e=_0x19cbed['layers'],_0x1a67b0=this['data'];for(let _0x303b9a=0x11*-0x1bb+0x1740+0x1*0x62b,_0x9d421c=uc['length'];_0x303b9a<_0x9d421c;_0x303b9a++){let _0x30c459=_0x1a67b0[uc[_0x303b9a]];if(_0x30c459){if(!(_0x30c459 instanceof pe)){if(parseInt(_0x30c459,-0x68*-0x49+-0x1c7e+-0x120)>=-0x1f6a+0x1e77*0x1+0x3*0x51)_0x30c459=this['system']['app']['assets']['get'](_0x30c459);else continue;}_0x30c459&&!_0x30c459['resource']&&this['system']['app']['assets']['load'](_0x30c459);}}if(!this['system']['app']['graphicsDe'+'vice']['disablePar'+'ticleSyste'+'m']){if(!this['emitter']){let _0x1788d1=_0x1a67b0['mesh'];_0x1788d1 instanceof Ge||(_0x1788d1=null),this['emitter']=new $b(this['system']['app']['graphicsDe'+'vice'],{'numParticles':_0x1a67b0['numParticl'+'es'],'emitterExtents':_0x1a67b0['emitterExt'+'ents'],'emitterExtentsInner':_0x1a67b0['emitterExt'+'entsInner'],'emitterRadius':_0x1a67b0['emitterRad'+'ius'],'emitterRadiusInner':_0x1a67b0['emitterRad'+'iusInner'],'emitterShape':_0x1a67b0['emitterSha'+'pe'],'initialVelocity':_0x1a67b0['initialVel'+'ocity'],'wrap':_0x1a67b0['wrap'],'localSpace':_0x1a67b0['localSpace'],'screenSpace':_0x1a67b0['screenSpac'+'e'],'wrapBounds':_0x1a67b0['wrapBounds'],'lifetime':_0x1a67b0['lifetime'],'rate':_0x1a67b0['rate'],'rate2':_0x1a67b0['rate2'],'orientation':_0x1a67b0['orientatio'+'n'],'particleNormal':_0x1a67b0['particleNo'+'rmal'],'animTilesX':_0x1a67b0['animTilesX'],'animTilesY':_0x1a67b0['animTilesY'],'animStartFrame':_0x1a67b0['animStartF'+'rame'],'animNumFrames':_0x1a67b0['animNumFra'+'mes'],'animNumAnimations':_0x1a67b0['animNumAni'+'mations'],'animIndex':_0x1a67b0['animIndex'],'randomizeAnimIndex':_0x1a67b0['randomizeA'+'nimIndex'],'animSpeed':_0x1a67b0['animSpeed'],'animLoop':_0x1a67b0['animLoop'],'startAngle':_0x1a67b0['startAngle'],'startAngle2':_0x1a67b0['startAngle'+'2'],'scaleGraph':_0x1a67b0['scaleGraph'],'scaleGraph2':_0x1a67b0['scaleGraph'+'2'],'colorGraph':_0x1a67b0['colorGraph'],'colorGraph2':_0x1a67b0['colorGraph'+'2'],'alphaGraph':_0x1a67b0['alphaGraph'],'alphaGraph2':_0x1a67b0['alphaGraph'+'2'],'localVelocityGraph':_0x1a67b0['localVeloc'+'ityGraph'],'localVelocityGraph2':_0x1a67b0['localVeloc'+'ityGraph2'],'velocityGraph':_0x1a67b0['velocityGr'+'aph'],'velocityGraph2':_0x1a67b0['velocityGr'+'aph2'],'rotationSpeedGraph':_0x1a67b0['rotationSp'+'eedGraph'],'rotationSpeedGraph2':_0x1a67b0['rotationSp'+'eedGraph2'],'radialSpeedGraph':_0x1a67b0['radialSpee'+'dGraph'],'radialSpeedGraph2':_0x1a67b0['radialSpee'+'dGraph2'],'colorMap':_0x1a67b0['colorMap'],'normalMap':_0x1a67b0['normalMap'],'loop':_0x1a67b0['loop'],'preWarm':_0x1a67b0['preWarm'],'sort':_0x1a67b0['sort'],'stretch':_0x1a67b0['stretch'],'alignToMotion':_0x1a67b0['alignToMot'+'ion'],'lighting':_0x1a67b0['lighting'],'halfLambert':_0x1a67b0['halfLamber'+'t'],'intensity':_0x1a67b0['intensity'],'depthSoftening':_0x1a67b0['depthSofte'+'ning'],'scene':this['system']['app']['scene'],'mesh':_0x1788d1,'depthWrite':_0x1a67b0['depthWrite'],'noFog':_0x1a67b0['noFog'],'node':this['entity'],'blendType':_0x1a67b0['blendType']}),this['emitter']['meshInstan'+'ce']['node']=this['entity'],this['emitter']['drawOrder']=this['drawOrder'],_0x1a67b0['autoPlay']||(this['pause'](),this['emitter']['meshInstan'+'ce']['visible']=!(0x61*0x4c+0xa4a*0x3+0x6a1*-0x9));}this['emitter']['colorMap']&&this['addMeshIns'+'tanceToLay'+'ers'](),this['_evtLayers'+'Changed']=_0x19cbed['on']('set:layers',this['onLayersCh'+'anged'],this),_0x41fb9e&&(this['_evtLayerA'+'dded']=_0x41fb9e['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x41fb9e['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&_0x1a67b0['depthSofte'+'ning']&&this['_requestDe'+'pth']();}}['onDisable'](){var _0x4ec1f6,_0x3e75d3,_0x4e0a51;const _0x410167=this['system']['app']['scene']['layers'];(_0x4ec1f6=this['_evtLayers'+'Changed'])==null||_0x4ec1f6['off'](),this['_evtLayers'+'Changed']=null,_0x410167&&((_0x3e75d3=this['_evtLayerA'+'dded'])==null||_0x3e75d3['off'](),this['_evtLayerA'+'dded']=null,(_0x4e0a51=this['_evtLayerR'+'emoved'])==null||_0x4e0a51['off'](),this['_evtLayerR'+'emoved']=null),this['emitter']&&(this['removeMesh'+'InstanceFr'+'omLayers'](),this['data']['depthSofte'+'ning']&&this['_releaseDe'+'pth'](),this['emitter']['camera']=null);}['onBeforeRe'+'move'](){this['enabled']&&(this['enabled']=!(-0xa72*-0x1+-0x8c7*-0x2+0x3*-0x955)),this['emitter']&&(this['emitter']['destroy'](),this['emitter']=null);for(let _0x40505b=-0x2*0x11b1+0x12*-0x5d+-0x2*-0x14f6;_0x40505b<uc['length'];_0x40505b++){const _0x57c70a=uc[_0x40505b];this['data'][_0x57c70a]&&(this[_0x57c70a]=null);}this['off']();}['reset'](){this['emitter']&&this['emitter']['reset']();}['stop'](){this['emitter']&&(this['emitter']['loop']=!(0x156b*-0x1+0x80*0x4a+-0xf94),this['emitter']['resetTime'](),this['emitter']['addTime'](-0xa2e+0x2339+0x859*-0x3,!(-0x19cb+-0x2358+-0x6f*-0x8d)));}['pause'](){this['data']['paused']=!(-0x1*0x1d1d+-0xfac+0x2cc9*0x1);}['unpause'](){this['data']['paused']=!(-0x1a39+-0x1d5+-0x1c0f*-0x1);}['play'](){this['data']['paused']=!(0x49*-0xb+0x1602+-0x12de),this['emitter']&&(this['emitter']['meshInstan'+'ce']['visible']=!(-0x23b1*-0x1+-0x3*0x35e+-0x1*0x1997),this['emitter']['loop']=this['data']['loop'],this['emitter']['resetTime']());}['isPlaying'](){return this['data']['paused']?!(0x1*-0x1f6f+0x4*-0x41c+0x2fe0):this['emitter']&&this['emitter']['loop']?!(0x233f+0x13a1*0x1+-0x36e0):Date['now']()<=this['emitter']['endTime'];}['setInTools'](){const {emitter:_0x5c3830}=this;_0x5c3830&&!_0x5c3830['inTools']&&(_0x5c3830['inTools']=!(-0xf83+-0x1f9b+0x2f1e),this['rebuild']());}['rebuild'](){const _0xeb3960=this['enabled'];this['enabled']=!(0x2bb+-0x24cf+-0x2215*-0x1),this['emitter']&&this['emitter']['rebuild'](),this['enabled']=_0xeb3960;}}class yR{constructor(){this['numParticl'+'es']=0x2671+0xd1*-0x4+-0x2*0x1196,this['rate']=-0x1e21+-0x3a*0x61+0x341c,this['rate2']=null,this['startAngle']=0xb+0x8a2+-0x8ad,this['startAngle'+'2']=null,this['lifetime']=0x2c8*0xe+0x1cea+0x8*-0x875,this['emitterExt'+'ents']=new D(),this['emitterExt'+'entsInner']=new D(),this['emitterRad'+'ius']=-0x1*0x1ad1+0xa21*-0x3+0x3934*0x1,this['emitterRad'+'iusInner']=-0x197+-0x14cc+-0x1663*-0x1,this['emitterSha'+'pe']=ai,this['initialVel'+'ocity']=-0x3*0x2e5+0x1*-0x217d+0x2a2c,this['wrap']=!(0x2ef+0x9*-0xbb+0x3a5),this['wrapBounds']=new D(),this['localSpace']=!(-0x1877+0x1eb7+-0x27*0x29),this['screenSpac'+'e']=!(-0x3c1*-0x5+0x1970+-0x2c34),this['colorMap']=null,this['colorMapAs'+'set']=null,this['normalMap']=null,this['normalMapA'+'sset']=null,this['loop']=!(0xd49*0x1+0x26*0x34+0x1501*-0x1),this['preWarm']=!(-0xa29+0x196d+0xf43*-0x1),this['sort']=-0xcb*-0x1+0x623+-0x2*0x377,this['mode']=Ty,this['scene']=null,this['lighting']=!(-0x262*-0x8+-0x7a0*0x3+0x3d1),this['halfLamber'+'t']=!(-0x1*0x2573+0x2*0x182+0x2270),this['intensity']=0x1021*-0x1+-0x1bf3+0xb9*0x3d,this['stretch']=0x1*0x1abb+0x723+-0x10ef*0x2,this['alignToMot'+'ion']=!(-0x2137+-0x8*0x2b4+0x36d8),this['depthSofte'+'ning']=0x2053+-0xb12+0x1*-0x1541,this['renderAsse'+'t']=null,this['meshAsset']=null,this['mesh']=null,this['depthWrite']=!(0x4e+-0x2*-0x1fa+-0x441),this['noFog']=!(0x1*-0xceb+0x972+0x37a),this['orientatio'+'n']=Zc,this['particleNo'+'rmal']=new D(-0x6e3+-0x2f9+0x9dc,0x3*-0x48d+-0x241*-0xf+-0x1427,0x6d8*-0x5+0x11*-0xc3+-0x159*-0x23),this['animTilesX']=-0x3*-0x24e+-0x1*0x118f+0xaa6,this['animTilesY']=0x1a2e+-0xd*0x107+0x1*-0xcd2,this['animStartF'+'rame']=0x113+0x93c+-0xcb*0xd,this['animNumFra'+'mes']=-0x250d+-0x32*0x89+0x4*0xff4,this['animNumAni'+'mations']=-0x6dc+-0x1b3f*-0x1+-0x1462,this['animIndex']=0x7d8*0x1+0x85*0x3b+-0xdb*0x2d,this['randomizeA'+'nimIndex']=!(-0x11cc+0x225e+0x1091*-0x1),this['animSpeed']=0x1e2b+0x3c9+-0x21f3,this['animLoop']=!(0x1bbc+-0x1*-0x20ff+-0x3cbb),this['scaleGraph']=null,this['scaleGraph'+'2']=null,this['colorGraph']=null,this['colorGraph'+'2']=null,this['alphaGraph']=null,this['alphaGraph'+'2']=null,this['localVeloc'+'ityGraph']=null,this['localVeloc'+'ityGraph2']=null,this['velocityGr'+'aph']=null,this['velocityGr'+'aph2']=null,this['rotationSp'+'eedGraph']=null,this['rotationSp'+'eedGraph2']=null,this['radialSpee'+'dGraph']=null,this['radialSpee'+'dGraph2']=null,this['blendType']=Zs,this['enabled']=!(-0xe9*-0xd+0x4*0x1a9+0x1*-0x1279),this['paused']=!(0x232*0x3+-0x268+-0x1*0x42d),this['autoPlay']=!(0x73a+-0x65*-0x8+-0xa62),this['layers']=[Ji];}}const vR='\x0avarying\x20v'+'ec4\x20texCoo'+'rdsAlphaLi'+'fe;\x0a\x0aunifo'+'rm\x20sampler'+'2D\x20colorMa'+'p;\x0auniform'+'\x20sampler2D'+'\x20colorPara'+'m;\x0auniform'+'\x20float\x20gra'+'phSampleSi'+'ze;\x0aunifor'+'m\x20float\x20gr'+'aphNumSamp'+'les;\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0auniform\x20'+'float\x20soft'+'ening;\x0auni'+'form\x20float'+'\x20colorMult'+';\x0a\x0afloat\x20s'+'aturate(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex\x20\x20=\x20tex'+'ture2D(col'+'orMap,\x20vec'+'2(texCoord'+'sAlphaLife'+'.x,\x201.0\x20-\x20'+'texCoordsA'+'lphaLife.y'+'));\x0a\x20\x20\x20\x20ve'+'c4\x20ramp\x20=\x20'+'texture2D('+'colorParam'+',\x20vec2(tex'+'CoordsAlph'+'aLife.w,\x200'+'.0));\x0a\x20\x20\x20\x20'+'ramp.rgb\x20*'+'=\x20colorMul'+'t;\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20+=\x20te'+'xCoordsAlp'+'haLife.z;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'rgb\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'float\x20a\x20\x20='+'\x20tex.a\x20*\x20r'+'amp.a;\x0a',xR='\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0af'+'loat\x20satur'+'ate(float\x20'+'x)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p(x,\x200.0,\x20'+'1.0);\x0a}\x0a\x0av'+'ec4\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(\x20texture2'+'D(tex,tc),'+'\x20texture2D'+'(tex,tc\x20+\x20'+'graphSampl'+'eSize),\x20fr'+'act(tc.x*g'+'raphNumSam'+'ples)\x20);\x0a}'+'\x0a\x0avec4\x20tex'+'1Dlod_lerp'+'(TEXTURE_A'+'CCEPT_HIGH'+'P(tex),\x20ve'+'c2\x20tc,\x20out'+'\x20vec3\x20w)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'a\x20=\x20textur'+'e2D(tex,tc'+');\x0a\x20\x20\x20\x20vec'+'4\x20b\x20=\x20text'+'ure2D(tex,'+'tc\x20+\x20graph'+'SampleSize'+');\x0a\x20\x20\x20\x20flo'+'at\x20c\x20=\x20fra'+'ct(tc.x*gr'+'aphNumSamp'+'les);\x0a\x0a\x20\x20\x20'+'\x20vec3\x20unpa'+'ckedA\x20=\x20un'+'pack3NFloa'+'ts(a.w);\x0a\x20'+'\x20\x20\x20vec3\x20un'+'packedB\x20=\x20'+'unpack3NFl'+'oats(b.w);'+'\x0a\x20\x20\x20\x20w\x20=\x20m'+'ix(unpacke'+'dA,\x20unpack'+'edB,\x20c);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20mix(a,\x20b,'+'\x20c);\x0a}\x0a\x0ave'+'c2\x20rotate('+'vec2\x20quadX'+'Y,\x20float\x20p'+'Rotation,\x20'+'out\x20mat2\x20r'+'otMatrix)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20cos('+'pRotation)'+';\x0a\x20\x20\x20\x20floa'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x0a\x20\x20\x20\x20mat'+'2\x20m\x20=\x20mat2'+'(c,\x20-s,\x20s,'+'\x20c);\x0a\x20\x20\x20\x20r'+'otMatrix\x20='+'\x20m;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20m\x20*\x20'+'quadXY;\x0a}\x0a'+'\x0avec3\x20bill'+'board(vec3'+'\x20InstanceC'+'oords,\x20vec'+'2\x20quadXY)\x20'+'{\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREEN_'+('SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'os\x20=\x20vec3('+'-1,\x200,\x200)\x20'+'*\x20quadXY.x'+'\x20+\x20vec3(0,'+'\x20-1,\x200)\x20*\x20'+'quadXY.y;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20pos;\x0a}\x0a\x0av'+'ec3\x20custom'+'Face(vec3\x20'+'InstanceCo'+'ords,\x20vec2'+'\x20quadXY)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'pos\x20=\x20face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20faceBinor'+'m\x20*\x20quadXY'+'.y;\x0a\x20\x20\x20\x20re'+'turn\x20pos;\x0a'+'}\x0a\x0avec2\x20sa'+'feNormaliz'+'e(vec2\x20v)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20l\x20=\x20leng'+'th(v);\x0a\x20\x20\x20'+'\x20return\x20(l'+'\x20>\x201e-06)\x20'+'?\x20v\x20/\x20l\x20:\x20'+'v;\x0a}\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20meshLoc'+'alPos\x20=\x20pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20flo'+'at\x20id\x20=\x20fl'+'oor(partic'+'le_vertexD'+'ata.w);\x0a\x0a\x20'+'\x20\x20\x20float\x20r'+'ndFactor\x20='+'\x20fract(sin'+'(id\x20+\x201.0\x20'+'+\x20seed));\x0a'+'\x20\x20\x20\x20vec3\x20r'+'ndFactor3\x20'+'=\x20vec3(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20float\x20uv\x20'+'=\x20id\x20/\x20num'+'ParticlesP'+'ot;\x0a\x20\x20\x20\x20re'+'adInput(uv'+');\x0a\x0a#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20inV'+'el\x20=\x20mat3('+'matrix_mod'+'el)\x20*\x20inVe'+'l;\x0a#endif\x0a'+'\x20\x20\x20\x20vec2\x20v'+'elocityV\x20='+'\x20safeNorma'+'lize((mat3'+'(matrix_vi'+'ew)\x20*\x20inVe'+'l).xy);\x20//'+'\x20should\x20be'+'\x20removed\x20b'+'y\x20compiler'+'\x20if\x20align/'+'stretch\x20is'+'\x20not\x20used\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20particleL'+'ifetime\x20=\x20'+'lifetime;\x0a'+'\x0a\x20\x20\x20\x20if\x20(i')+('nLife\x20<=\x200'+'.0\x20||\x20inLi'+'fe\x20>\x20parti'+'cleLifetim'+'e\x20||\x20!inSh'+'ow)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20meshLoca'+'lPos\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20vec2\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20nlife\x20='+'\x20clamp(inL'+'ife\x20/\x20part'+'icleLifeti'+'me,\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20param'+'Div;\x0a\x20\x20\x20\x20v'+'ec4\x20params'+'\x20=\x20tex1Dlo'+'d_lerp(TEX'+'TURE_PASS('+'internalTe'+'x2),\x20vec2('+'nlife,\x200),'+'\x20paramDiv)'+';\x0a\x20\x20\x20\x20floa'+'t\x20scale\x20=\x20'+'params.y;\x0a'+'\x20\x20\x20\x20float\x20'+'scaleDiv\x20='+'\x20paramDiv.'+'x;\x0a\x20\x20\x20\x20flo'+'at\x20alphaDi'+'v\x20=\x20paramD'+'iv.z;\x0a\x0a\x20\x20\x20'+'\x20scale\x20+=\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20scale'+'DivMult\x20*\x20'+'fract(rndF'+'actor*1000'+'0.0);\x0a\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(quadXY'+'\x20*\x20-0.5\x20+\x20'+'0.5,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'alphaDivMu'+'lt\x20*\x20fract'+'(rndFactor'+'*1000.0),\x20'+'nlife);\x0a#e'+'lse\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(partic'+'le_uv,\x20(al'+'phaDiv\x20*\x202'+'.0\x20-\x201.0)\x20'+'*\x20alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePos\x20='+'\x20inPos;\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePosMo'+'ved\x20=\x20vec3'+'(0.0);\x0a\x0a\x20\x20'+'\x20\x20mat2\x20rot'+'Matrix;\x0a'),TR='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20min(flo'+'or(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y)\x20+\x20animT'+'exParams.x'+',\x20animTexP'+'arams.z);\x0a',wR='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20floor(m'+'od(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y\x20+\x20animTe'+'xParams.x,'+'\x20animTexPa'+'rams.z\x20+\x201'+'.0));\x0a',ER='\x0a\x20\x20\x20\x20float'+'\x20animation'+'Index;\x0a\x0a\x20\x20'+'\x20\x20if\x20(anim'+'TexIndexPa'+'rams.y\x20==\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20anima'+'tionIndex\x20'+'=\x20floor((a'+'nimTexPara'+'ms.w\x20+\x201.0'+')\x20*\x20rndFac'+'tor3.z)\x20*\x20'+'(animTexPa'+'rams.z\x20+\x201'+'.0);\x0a\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20animTex'+'IndexParam'+'s.x\x20*\x20(ani'+'mTexParams'+'.z\x20+\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20float\x20at'+'lasX\x20=\x20(an'+'imationInd'+'ex\x20+\x20animF'+'rame)\x20*\x20an'+'imTexTiles'+'Params.x;\x0a'+'\x20\x20\x20\x20float\x20'+'atlasY\x20=\x201'+'.0\x20-\x20floor'+'(atlasX\x20+\x20'+'1.0)\x20*\x20ani'+'mTexTilesP'+'arams.y;\x0a\x20'+'\x20\x20\x20atlasX\x20'+'=\x20fract(at'+'lasX);\x0a\x0a\x20\x20'+'\x20\x20texCoord'+'sAlphaLife'+'.xy\x20*=\x20ani'+'mTexTilesP'+'arams.xy;\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe.xy\x20+=\x20v'+'ec2(atlasX'+',\x20atlasY);'+'\x0a',bR='\x0avoid\x20read'+'Input(floa'+'t\x20uv)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'\x20=\x20texture'+'2D(particl'+'eTexIN,\x20ve'+'c2(uv,\x200.2'+'5));\x0a\x20\x20\x20\x20v'+'ec4\x20tex2\x20='+'\x20texture2D'+'(particleT'+'exIN,\x20vec2'+'(uv,\x200.75)'+');\x0a\x0a\x20\x20\x20\x20in'+'Pos\x20=\x20tex.'+'xyz;\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inAngle\x20='+'\x20(tex.w\x20<\x20'+'0.0?\x20-tex.'+'w\x20:\x20tex.w)'+'\x20-\x201000.0;'+'\x0a\x20\x20\x20\x20inSho'+'w\x20=\x20tex.w\x20'+'>=\x200.0;\x0a\x20\x20'+'\x20\x20inLife\x20='+'\x20tex2.w;\x0a}'+'\x0a',AR='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0a#'+'define\x20PI2'+'\x206.2831853'+'07179586\x0a\x0a'+'uniform\x20ve'+'c3\x20inBound'+'sSize;\x0auni'+'form\x20vec3\x20'+'inBoundsCe'+'nter;\x0a\x0auni'+'form\x20float'+'\x20maxVel;\x0a\x0a'+'float\x20deco'+'deFloatRG('+'vec2\x20rg)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20rg.y\x20*\x20('+'1.0\x20/\x20255.'+'0)\x20+\x20rg.x;'+'\x0a}\x0a\x0afloat\x20'+'decodeFloa'+'tRGBA(\x20vec'+'4\x20rgba\x20)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20dot(rgba'+',\x20vec4(1.0'+',\x201.0\x20/\x2025'+'5.0,\x201.0\x20/'+'\x2065025.0,\x20'+'1.0\x20/\x201605'+'81375.0));'+'\x0a}\x0a\x0avoid\x20r'+'eadInput(f'+'loat\x20uv)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex0\x20=\x20tex'+'ture2D(par'+'ticleTexIN'+',\x20vec2(uv,'+'\x200.125));\x0a'+'\x20\x20\x20\x20vec4\x20t'+'ex1\x20=\x20text'+'ure2D(part'+'icleTexIN,'+'\x20vec2(uv,\x20'+'0.375));\x0a\x20'+'\x20\x20\x20vec4\x20te'+'x2\x20=\x20textu'+'re2D(parti'+'cleTexIN,\x20'+'vec2(uv,\x200'+'.625));\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'3\x20=\x20textur'+'e2D(partic'+'leTexIN,\x20v'+'ec2(uv,\x200.'+'875));\x0a\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'vec3(decod'+'eFloatRG(t'+'ex0.rg),\x20d'+'ecodeFloat'+'RG(tex0.ba'+'),\x20decodeF'+'loatRG(tex'+'1.rg));\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'(inPos\x20-\x20v'+'ec3(0.5))\x20'+'*\x20inBounds'+'Size\x20+\x20inB'+'oundsCente'+'r;\x0a\x0a\x20\x20\x20\x20in'+'Vel\x20=\x20tex2'+'.xyz;\x0a\x20\x20\x20\x20'+'inVel\x20=\x20(i'+'nVel\x20-\x20vec'+'3(0.5))\x20*\x20'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20float\x20max'+'NegLife\x20=\x20'+'max(lifeti'+'me,\x20(numPa'+('rticles\x20-\x20'+'1.0)\x20*\x20(ra'+'te+rateDiv'+'));\x0a\x20\x20\x20\x20fl'+'oat\x20maxPos'+'Life\x20=\x20lif'+'etime+1.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20inLife'+'\x20*\x20(maxNeg'+'Life\x20+\x20max'+'PosLife)\x20-'+'\x20maxNegLif'+'e;\x0a}\x0a'),CR='\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'gl_FragCoo'+'rd.y<1.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'outPos,\x20(o'+'utAngle\x20+\x20'+'1000.0)\x20*\x20'+'visMode);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(outVel,\x20o'+'utLife);\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',PR='\x0auniform\x20v'+'ec3\x20outBou'+'ndsMul;\x0aun'+'iform\x20vec3'+'\x20outBounds'+'Add;\x0a\x0avec2'+'\x20encodeFlo'+'atRG(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec2\x20enc'+'\x20=\x20vec2(1.'+'0,\x20255.0)\x20'+'*\x20v;\x0a\x20\x20\x20\x20e'+'nc\x20=\x20fract'+'(enc);\x0a\x20\x20\x20'+'\x20enc\x20-=\x20en'+'c.yy\x20*\x20vec'+'2(1.0/255.'+'0,\x201.0/255'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20enc;'+'\x0a}\x0a\x0avec4\x20e'+'ncodeFloat'+'RGBA(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20enc'+'\x20=\x20vec4(1.'+'0,\x20255.0,\x20'+'65025.0,\x201'+'60581375.0'+')\x20*\x20v;\x0a\x20\x20\x20'+'\x20enc\x20=\x20fra'+'ct(enc);\x0a\x20'+'\x20\x20\x20enc\x20-=\x20'+'enc.yzww\x20*'+'\x20vec4(1.0/'+'255.0,1.0/'+'255.0,1.0/'+'255.0,0.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20enc;\x0a}\x0a'+'\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20outP'+'os\x20=\x20outPo'+'s\x20*\x20outBou'+'ndsMul\x20+\x20o'+'utBoundsAd'+'d;\x0a\x20\x20\x20\x20out'+'Angle\x20=\x20fr'+'act(outAng'+'le\x20/\x20PI2);'+'\x0a\x0a\x20\x20\x20\x20outV'+'el\x20=\x20(outV'+'el\x20/\x20maxVe'+'l)\x20+\x20vec3('+'0.5);\x20//\x20T'+'ODO:\x20mul\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'maxNegLife'+'\x20=\x20max(lif'+'etime,\x20(nu'+'mParticles'+'\x20-\x201.0)\x20*\x20'+'(rate+rate'+'Div));\x0a\x20\x20\x20'+'\x20float\x20max'+'PosLife\x20=\x20'+'lifetime+1'+'.0;\x0a\x20\x20\x20\x20ou'+'tLife\x20=\x20(o'+'utLife\x20+\x20m'+'axNegLife)'+'\x20/\x20(maxNeg'+'Life\x20+\x20max'+'PosLife);\x0a'+'\x0a\x20\x20\x20\x20if\x20(g'+'l_FragCoor'+'d.y\x20<\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(encodeFlo'+'atRG(outPo'+'s.x),\x20enco'+'deFloatRG('+'outPos.y))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(gl_'+'FragCoord.'+'y\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(e'+'ncodeFloat'+'RG(outPos.'+'z),\x20encode'+'FloatRG(ou'+'tAngle));\x0a'+'\x20\x20\x20\x20}\x20else'+('\x20if\x20(gl_Fr'+'agCoord.y\x20'+'<\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(out'+'Vel,\x20visMo'+'de*0.5+0.5'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20e'+'ncodeFloat'+'RGBA(outLi'+'fe);\x0a\x20\x20\x20\x20}'+'\x0a}\x0a'),MR='\x0auniform\x20m'+'at3\x20spawnB'+'ounds;\x0auni'+'form\x20vec3\x20'+'spawnPosIn'+'nerRatio;\x0a'+'\x0avec3\x20calc'+'SpawnPosit'+'ion(vec3\x20i'+'nBounds,\x20f'+'loat\x20rndFa'+'ctor)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20pos'+'\x20=\x20inBound'+'s\x20-\x20vec3(0'+'.5);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20posAb'+'s\x20=\x20abs(po'+'s);\x0a\x20\x20\x20\x20ve'+'c3\x20maxPos\x20'+'=\x20vec3(max'+'(posAbs.x,'+'\x20max(posAb'+'s.y,\x20posAb'+'s.z)));\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ed'+'ge\x20=\x20maxPo'+'s\x20+\x20(vec3('+'0.5)\x20-\x20max'+'Pos)\x20*\x20spa'+'wnPosInner'+'Ratio;\x0a\x0a\x20\x20'+'\x20\x20pos.x\x20=\x20'+'edge.x\x20*\x20('+'maxPos.x\x20='+'=\x20posAbs.x'+'\x20?\x20sign(po'+'s.x)\x20:\x202.0'+'\x20*\x20pos.x);'+'\x0a\x20\x20\x20\x20pos.y'+'\x20=\x20edge.y\x20'+'*\x20(maxPos.'+'y\x20==\x20posAb'+'s.y\x20?\x20sign'+'(pos.y)\x20:\x20'+'2.0\x20*\x20pos.'+'y);\x0a\x20\x20\x20\x20po'+'s.z\x20=\x20edge'+'.z\x20*\x20(maxP'+'os.z\x20==\x20po'+'sAbs.z\x20?\x20s'+'ign(pos.z)'+'\x20:\x202.0\x20*\x20p'+'os.z);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20return\x20e'+'mitterPos\x20'+'+\x20spawnBou'+'nds\x20*\x20pos;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20sp'+'awnBounds\x20'+'*\x20pos;\x0a#en'+'dif\x0a}\x0a\x0avoi'+'d\x20addIniti'+'alVelocity'+'(inout\x20vec'+'3\x20localVel'+'ocity,\x20vec'+'3\x20inBounds'+')\x20{\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20-=\x20vec3('+'0,\x200,\x20init'+'ialVelocit'+'y);\x0a}\x0a',DR='\x0a\x20\x20\x20\x20write'+'Output();\x0a'+'}\x0a',IR='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20parti'+'cleTexIN;\x0a'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex0;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0aunif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x2;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex3'+';\x0a\x0auniform'+'\x20mat3\x20emit'+'terMatrix;'+'\x0auniform\x20m'+'at3\x20emitte'+'rMatrixInv'+';\x0auniform\x20'+'vec3\x20emitt'+'erScale;\x0a\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Pos;\x0aunifo'+'rm\x20vec3\x20fr'+'ameRandom;'+'\x0auniform\x20v'+'ec3\x20localV'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20vec3\x20v'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20float\x20'+'delta;\x0auni'+'form\x20float'+'\x20rate;\x0auni'+'form\x20float'+'\x20rateDiv;\x0a'+'uniform\x20fl'+'oat\x20lifeti'+'me;\x0aunifor'+'m\x20float\x20nu'+'mParticles'+';\x0auniform\x20'+'float\x20rotS'+'peedDivMul'+'t;\x0auniform'+'\x20float\x20rad'+'ialSpeedDi'+'vMult;\x0auni'+'form\x20float'+'\x20seed;\x0auni'+'form\x20float'+'\x20startAngl'+'e;\x0auniform'+'\x20float\x20sta'+'rtAngle2;\x0a'+'uniform\x20fl'+'oat\x20initia'+'lVelocity;'+'\x0a\x0auniform\x20'+'float\x20grap'+'hSampleSiz'+'e;\x0auniform'+'\x20float\x20gra'+'phNumSampl'+'es;\x0a\x0avec3\x20'+'inPos;\x0avec'+'3\x20inVel;\x0af'+'loat\x20inAng'+'le;\x0abool\x20i'+'nShow;\x0aflo'+'at\x20inLife;'+'\x0afloat\x20vis'+'Mode;\x0a\x0avec'+'3\x20outPos;\x0a'+'vec3\x20outVe'+'l;\x0afloat\x20o'+'utAngle;\x0ab'+'ool\x20outSho'+'w;\x0afloat\x20o'+'utLife;\x0a',LR='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x20-1.0;\x0a\x20\x20\x20'+'\x20}\x0a',RR='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20outLi'+'fe\x20<\x200.0?\x20'+'-1.0:\x20visM'+'ode;\x0a',OR='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20visM'+'ode\x20=\x20outL'+'ife\x20<\x200.0?'+'\x201.0:\x20visM'+'ode;\x0a',FR='\x0auniform\x20f'+'loat\x20spawn'+'BoundsSphe'+'re;\x0aunifor'+'m\x20float\x20sp'+'awnBoundsS'+'phereInner'+'Ratio;\x0a\x0ave'+'c3\x20calcSpa'+'wnPosition'+'(vec3\x20inBo'+'unds,\x20floa'+'t\x20rndFacto'+'r)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20rnd4\x20'+'=\x20fract(rn'+'dFactor\x20*\x20'+'1000.0);\x0a\x20'+'\x20\x20\x20vec3\x20no'+'rm\x20=\x20norma'+'lize(inBou'+'nds.xyz\x20-\x20'+'vec3(0.5))'+';\x0a\x20\x20\x20\x20floa'+'t\x20r\x20=\x20rnd4'+'\x20*\x20(1.0\x20-\x20'+'spawnBound'+'sSphereInn'+'erRatio)\x20+'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio;\x0a'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20return'+'\x20emitterPo'+'s\x20+\x20norm\x20*'+'\x20r\x20*\x20spawn'+'BoundsSphe'+'re;\x0a#else\x0a'+'\x20\x20\x20\x20return'+'\x20norm\x20*\x20r\x20'+'*\x20spawnBou'+'ndsSphere;'+'\x0a#endif\x0a}\x0a'+'\x0avoid\x20addI'+'nitialVelo'+'city(inout'+'\x20vec3\x20loca'+'lVelocity,'+'\x20vec3\x20inBo'+'unds)\x20{\x0a\x20\x20'+'\x20\x20localVel'+'ocity\x20+=\x20n'+'ormalize(i'+'nBounds\x20-\x20'+'vec3(0.5))'+'\x20*\x20initial'+'Velocity;\x0a'+'}\x0a',NR='\x0afloat\x20sat'+'urate(floa'+'t\x20x)\x20{\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(x,\x200.0'+',\x201.0);\x0a}\x0a'+'\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0av'+'ec3\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc,\x20out\x20ve'+'c3\x20w)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20a\x20='+'\x20texture2D'+'(tex,\x20tc);'+'\x0a\x20\x20\x20\x20vec4\x20'+'b\x20=\x20textur'+'e2D(tex,\x20t'+'c\x20+\x20graphS'+'ampleSize)'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20g'+'raphNumSam'+'ples);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20unp'+'ackedA\x20=\x20u'+'npack3NFlo'+'ats(a.w);\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20w\x20=\x20'+'mix(unpack'+'edA,\x20unpac'+'kedB,\x20c);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(a.xy'+'z,\x20b.xyz,\x20'+'c);\x0a}\x0a\x0a#de'+'fine\x20HASHS'+'CALE4\x20vec4'+'(1031,\x20.10'+'30,\x20.0973,'+'\x20.1099)\x0ave'+'c4\x20hash41('+'float\x20p)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'p4\x20=\x20fract'+'(vec4(p)\x20*'+'\x20HASHSCALE'+'4);\x0a\x20\x20\x20\x20p4'+'\x20+=\x20dot(p4'+',\x20p4.wzxy+'+'19.19);\x0a\x20\x20'+'\x20\x20return\x20f'+'ract(vec4('+'(p4.x\x20+\x20p4'+'.y)*p4.z,\x20'+'(p4.x\x20+\x20p4'+'.z)*p4.y,\x20'+'(p4.y\x20+\x20p4'+'.z)*p4.w,\x20'+'(p4.z\x20+\x20p4'+'.w)*p4.x))'+';\x0a}\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(gl_FragCo'+'ord.x\x20>\x20nu'+'mParticles'+')\x20discard;'+'\x0a\x0a\x20\x20\x20\x20read'+'Input(vUv0'+'.x);\x0a\x20\x20\x20\x20v'+'isMode\x20=\x20i'+'nShow?\x201.0'+'\x20:\x20-1.0;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20r'+'ndFactor\x20='+'\x20hash41(gl'+'_FragCoord'+('.x\x20+\x20seed)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eRate\x20=\x20ra'+'te\x20+\x20rateD'+'iv\x20*\x20rndFa'+'ctor.x;\x0a\x0a\x20'+'\x20\x20\x20outLife'+'\x20=\x20inLife\x20'+'+\x20delta;\x0a\x20'+'\x20\x20\x20float\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20lifetim'+'e,\x200.0,\x201.'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localV'+'elocityDiv'+';\x0a\x20\x20\x20\x20vec3'+'\x20velocityD'+'iv;\x0a\x20\x20\x20\x20ve'+'c3\x20paramDi'+'v;\x0a\x20\x20\x20\x20vec'+'3\x20localVel'+'ocity\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex0),\x20'+'vec2(nlife'+',\x200),\x20loca'+'lVelocityD'+'iv);\x0a\x20\x20\x20\x20v'+'ec3\x20veloci'+'ty\x20=\x20\x20\x20\x20\x20\x20'+'tex1Dlod_l'+'erp(TEXTUR'+'E_PASS(int'+'ernalTex1)'+',\x20vec2(nli'+'fe,\x200),\x20ve'+'locityDiv)'+';\x0a\x20\x20\x20\x20vec3'+'\x20params\x20=\x20'+'\x20\x20\x20\x20\x20\x20\x20tex'+'1Dlod_lerp'+'(TEXTURE_P'+'ASS(intern'+'alTex2),\x20v'+'ec2(nlife,'+'\x200),\x20param'+'Div);\x0a\x20\x20\x20\x20'+'float\x20rotS'+'peed\x20=\x20par'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rot'+'SpeedDiv\x20='+'\x20paramDiv.'+'y;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20radialP'+'arams\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex3),\x20'+'vec2(nlife'+',\x200),\x20para'+'mDiv);\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeed\x20='+'\x20radialPar'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeedDi'+'v\x20=\x20radial'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20bool\x20'+'respawn\x20=\x20'+'inLife\x20<=\x20'+'0.0\x20||\x20out'+'Life\x20>=\x20li'+'fetime;\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'respawn\x20?\x20'+'calcSpawnP'+'osition(rn'+'dFactor.xy'+'z,\x20rndFact'+'or.x)\x20:\x20in'+'Pos;\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20r'+'espawn\x20?\x20m'+'ix(startAn'+'gle,\x20start'+'Angle2,\x20rn'+'dFactor.x)'+'\x20:\x20inAngle'+';\x0a\x0a#ifndef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20vec')+('3\x20radialVe'+'l\x20=\x20inPos\x20'+'-\x20emitterP'+'os;\x0a#else\x0a'+'\x20\x20\x20\x20vec3\x20r'+'adialVel\x20='+'\x20inPos;\x0a#e'+'ndif\x0a\x20\x20\x20\x20r'+'adialVel\x20='+'\x20(dot(radi'+'alVel,\x20rad'+'ialVel)\x20>\x20'+'1.0E-8)\x20?\x20'+'radialSpee'+'d\x20*\x20normal'+'ize(radial'+'Vel)\x20:\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20+=\x20(radi'+'alSpeedDiv'+'\x20*\x20vec3(2.'+'0)\x20-\x20vec3('+'1.0))\x20*\x20ra'+'dialSpeedD'+'ivMult\x20*\x20r'+'ndFactor.x'+'yz;\x0a\x0a\x20\x20\x20\x20l'+'ocalVeloci'+'ty\x20+=\x20\x20\x20\x20('+'localVeloc'+'ityDiv\x20*\x20v'+'ec3(2.0)\x20-'+'\x20vec3(1.0)'+')\x20*\x20localV'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20velo'+'city\x20+=\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20(vel'+'ocityDiv\x20*'+'\x20vec3(2.0)'+'\x20-\x20vec3(1.'+'0))\x20*\x20velo'+'cityDivMul'+'t\x20*\x20rndFac'+'tor.xyz;\x0a\x20'+'\x20\x20\x20rotSpee'+'d\x20+=\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(rotSpe'+'edDiv\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20rotSpeedD'+'ivMult\x20*\x20r'+'ndFactor.y'+';\x0a\x0a\x20\x20\x20\x20add'+'InitialVel'+'ocity(loca'+'lVelocity,'+'\x20rndFactor'+'.xyz);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20em'+'itterScale'+';\x0a#else\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20(localVel'+'ocity\x20+\x20ra'+'dialVel)\x20/'+'\x20emitterSc'+'ale\x20+\x20emit'+'terMatrixI'+'nv\x20*\x20veloc'+'ity;\x0a#endi'+'f\x0a\x0a\x20\x20\x20\x20out'+'Pos\x20=\x20inPo'+'s\x20+\x20outVel'+'\x20*\x20delta;\x0a'+'\x20\x20\x20\x20outAng'+'le\x20=\x20inAng'+'le\x20+\x20rotSp'+'eed\x20*\x20delt'+'a;\x0a'),kR='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',UR='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'*=\x20saturat'+'e(gammaCor'+'rectInput('+'max(a,\x200.0'+')));\x0a\x20\x20\x20\x20i'+'f\x20((rgb.r\x20'+'+\x20rgb.g\x20+\x20'+'rgb.b)\x20<\x200'+'.000001)\x20d'+'iscard;\x0a',BR='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3('+'1.0),\x20rgb,'+'\x20vec3(a));'+'\x0a\x20\x20\x20\x20if\x20(r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+'\x20>\x202.99)\x20d'+'iscard;\x0a',zR='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20d'+'iscard;\x0a',VR='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20\x20\x20/'+'/\x20XYZ\x20=\x20wo'+'rld\x20pos,\x20W'+'\x20=\x20life\x0aat'+'tribute\x20ve'+'c4\x20particl'+'e_vertexDa'+'ta2;\x20\x20//\x20X'+'\x20=\x20angle,\x20'+'Y\x20=\x20scale,'+'\x20Z\x20=\x20alpha'+',\x20W\x20=\x20velo'+'city.x\x0aatt'+'ribute\x20vec'+'4\x20particle'+'_vertexDat'+'a3;\x20\x20//\x20XY'+'Z\x20=\x20partic'+'le\x20local\x20p'+'os,\x20W\x20=\x20ve'+'locity.y\x0aa'+'ttribute\x20f'+'loat\x20parti'+'cle_vertex'+'Data4;\x20//\x20'+'particle\x20i'+'d\x0a\x0a//\x20type'+'\x20depends\x20o'+'n\x20useMesh\x20'+'property.\x20'+'Start\x20with'+'\x20X\x20=\x20veloc'+'ity.z,\x20Y\x20='+'\x20particle\x20'+'ID\x20and\x20for'+'\x20mesh\x20part'+'icles\x20proc'+'eeds\x20with\x20'+'Z\x20=\x20mesh\x20U'+'V.x,\x20W\x20=\x20m'+'esh\x20UV.y\x0a/'+'/\x20Note:\x20Th'+'is\x20generat'+'es\x20a\x20dupli'+'cate\x20attri'+'bute\x20warni'+'ng,\x20as\x20the'+'\x20scanning\x20'+'we\x20do\x20is\x20v'+'ery\x20simple'+'.\x0a#ifndef\x20'+'USE_MESH\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec2\x20pa'+'rticle_ver'+'texData5;\x0a'+'#else\x0a\x20\x20\x20\x20'+'attribute\x20'+'vec4\x20parti'+'cle_vertex'+'Data5;\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifndef\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20#define\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a#endif\x0a\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20lifetim'+'e;\x0auniform'+'\x20float\x20str'+'etch;\x0aunif'+'orm\x20float\x20'+'seed;\x0aunif'+'orm\x20vec3\x20w'+'rapBounds;'+'\x0auniform\x20v'+'ec3\x20emitte'+'rScale;\x0aun'+('iform\x20vec3'+'\x20faceTange'+'nt;\x0aunifor'+'m\x20vec3\x20fac'+'eBinorm;\x0a\x0a'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex0'+';\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x1;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex2;\x0a#end'+'if\x0auniform'+'\x20vec3\x20emit'+'terPos;\x0a\x0av'+'arying\x20vec'+'4\x20texCoord'+'sAlphaLife'+';\x0a\x0avec2\x20ro'+'tate(vec2\x20'+'quadXY,\x20fl'+'oat\x20pRotat'+'ion,\x20out\x20m'+'at2\x20rotMat'+'rix)\x0a{\x0a\x20\x20\x20'+'\x20float\x20c\x20='+'\x20cos(pRota'+'tion);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20sin(pRota'+'tion);\x0a\x20\x20\x20'+'\x20//vec4\x20ro'+'tationMatr'+'ix\x20=\x20vec4('+'c,\x20-s,\x20s,\x20'+'c);\x0a\x0a\x20\x20\x20\x20m'+'at2\x20m\x20=\x20ma'+'t2(c,\x20-s,\x20'+'s,\x20c);\x0a\x20\x20\x20'+'\x20rotMatrix'+'\x20=\x20m;\x0a\x0a\x20\x20\x20'+'\x20return\x20m\x20'+'*\x20quadXY;\x0a'+'}\x0a\x0avec3\x20bi'+'llboard(ve'+'c3\x20Instanc'+'eCoords,\x20v'+'ec2\x20quadXY'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20return\x20p'+'os;\x0a}\x0a\x0avec'+'3\x20customFa'+'ce(vec3\x20In'+'stanceCoor'+'ds,\x20vec2\x20q'+'uadXY)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20po'+'s\x20=\x20faceTa'+'ngent\x20*\x20qu'+'adXY.x\x20+\x20f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0avoid\x20main'+'(void)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20pa'+'rticlePos\x20'+'=\x20particle'+'_vertexDat'+'a.xyz;\x0a\x20\x20\x20'+'\x20vec3\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20vec3\x20vert'+'Pos\x20=\x20part'+'icle_verte'+'xData3.xyz'+';\x0a\x20\x20\x20\x20vec3'+'\x20inVel\x20=\x20v'+'ec3(partic'+'le_vertexD'+'ata2.w,\x20pa')+('rticle_ver'+'texData3.w'+',\x20particle'+'_vertexDat'+'a5.x);\x0a\x0a\x20\x20'+'\x20\x20float\x20id'+'\x20=\x20floor(p'+'article_ve'+'rtexData4)'+';\x0a\x20\x20\x20\x20floa'+'t\x20rndFacto'+'r\x20=\x20fract('+'sin(id\x20+\x201'+'.0\x20+\x20seed)'+');\x0a\x20\x20\x20\x20vec'+'3\x20rndFacto'+'r3\x20=\x20vec3('+'rndFactor,'+'\x20fract(rnd'+'Factor*10.'+'0),\x20fract('+'rndFactor*'+'100.0));\x0a\x0a'+'#ifdef\x20LOC'+'AL_SPACE\x0a\x20'+'\x20\x20\x20inVel\x20='+'\x20mat3(matr'+'ix_model)\x20'+'*\x20inVel;\x0a#'+'endif\x0a\x20\x20\x20\x20'+'vec2\x20veloc'+'ityV\x20=\x20nor'+'malize((ma'+'t3(matrix_'+'view)\x20*\x20in'+'Vel).xy);\x20'+'//\x20should\x20'+'be\x20removed'+'\x20by\x20compil'+'er\x20if\x20alig'+'n/stretch\x20'+'is\x20not\x20use'+'d\x0a\x0a\x20\x20\x20\x20vec'+'2\x20quadXY\x20='+'\x20vertPos.x'+'y;\x0a\x0a#ifdef'+'\x20USE_MESH\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe\x20=\x20vec4('+'particle_v'+'ertexData5'+'.zw,\x20parti'+'cle_vertex'+'Data2.z,\x20p'+'article_ve'+'rtexData.w'+');\x0a#else\x0a\x20'+'\x20\x20\x20texCoor'+'dsAlphaLif'+'e\x20=\x20vec4(q'+'uadXY\x20*\x20-0'+'.5\x20+\x200.5,\x20'+'particle_v'+'ertexData2'+'.z,\x20partic'+'le_vertexD'+'ata.w);\x0a#e'+'ndif\x0a\x20\x20\x20\x20m'+'at2\x20rotMat'+'rix;\x0a\x0a\x20\x20\x20\x20'+'float\x20inAn'+'gle\x20=\x20part'+'icle_verte'+'xData2.x;\x0a'+'\x20\x20\x20\x20vec3\x20p'+'articlePos'+'Moved\x20=\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20vec3\x20me'+'shLocalPos'+'\x20=\x20particl'+'e_vertexDa'+'ta3.xyz;\x0a'),GR='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20par'+'ticle_vert'+'exData2.y\x20'+'*\x20emitterS'+'cale;\x0a\x20\x20\x20\x20'+'localPos\x20+'+'=\x20particle'+'Pos;\x0a\x0a\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_viewProje'+'ction\x20*\x20ve'+'c4(localPo'+'s,\x201.0);\x0a',HR='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20quadXY'+');\x0a',WR='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(rgb'+',\x20a);\x0a}\x0a',$R='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20sca'+'le\x20*\x20emitt'+'erScale;\x0a\x20'+'\x20\x20\x20localPo'+'s\x20+=\x20parti'+'clePos;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREEN_SPA'+'CE\x0a\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(loca'+'lPos.x,\x20lo'+'calPos.y,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20vec4(lo'+'calPos.xyz'+',\x201.0);\x0a\x20\x20'+'\x20\x20#endif\x0a',XR='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20normal\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20vec3'+'\x20posNormal'+'\x20=\x20-normal'+'\x20*\x200.5\x20+\x200'+'.5;\x0a\x20\x20\x20\x20ne'+'gNormal\x20*='+'\x20negNormal'+';\x0a\x20\x20\x20\x20posN'+'ormal\x20*=\x20p'+'osNormal;\x0a',qR='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20//\x20'+'XYZ\x20=\x20part'+'icle\x20posit'+'ion,\x20W\x20=\x20p'+'article\x20ID'+'\x20+\x20random\x20'+'factor\x0a\x0a#i'+'f\x20defined('+'USE_MESH)\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(USE_'+'MESH_UV)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20att'+'ribute\x20vec'+'2\x20particle'+'_uv;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mesh'+'\x20UV\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20par'+'ticle_uv\x20='+'\x20vec2(0.0,'+'\x200.0);\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20mat4\x20m'+'atrix_view'+'Projection'+';\x0auniform\x20'+'mat4\x20matri'+'x_model;\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20numPart'+'iclesPot;\x0a'+'uniform\x20fl'+'oat\x20graphS'+'ampleSize;'+'\x0auniform\x20f'+'loat\x20graph'+'NumSamples'+';\x0auniform\x20'+'float\x20stre'+'tch;\x0aunifo'+'rm\x20vec3\x20wr'+'apBounds;\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Scale;\x0auni'+'form\x20vec3\x20'+'emitterPos'+';\x0auniform\x20'+'vec3\x20faceT'+'angent;\x0aun'+'iform\x20vec3'+'\x20faceBinor'+'m;\x0auniform'+'\x20float\x20rat'+'e;\x0auniform'+'\x20float\x20rat'+'eDiv;\x0aunif'+'orm\x20float\x20'+'lifetime;\x0a'+'uniform\x20fl'+'oat\x20deltaR'+'andomnessS'+'tatic;\x0auni'+'form\x20float'+'\x20scaleDivM'+'ult;\x0aunifo'+'rm\x20float\x20a'+'lphaDivMul'+'t;\x0auniform'+'\x20float\x20see'+'d;\x0auniform'+'\x20float\x20del'+'ta;\x0aunifor'+'m\x20sampler2'+'D\x20particle'+'TexOUT;\x0aun'+'iform\x20samp'+('ler2D\x20part'+'icleTexIN;'+'\x0a\x0a#ifdef\x20P'+'ARTICLE_GP'+'U\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x0;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex2;\x0a#e'+'ndif\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0avarying\x20'+'vec4\x20texCo'+'ordsAlphaL'+'ife;\x0a\x0avec3'+'\x20inPos;\x0ave'+'c3\x20inVel;\x0a'+'float\x20inAn'+'gle;\x0abool\x20'+'inShow;\x0afl'+'oat\x20inLife'+';\x0a'),jR='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20max(norm'+'al,\x20vec3(0'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20posNo'+'rmal\x20=\x20max'+'(-normal,\x20'+'vec3(0.0))'+';\x0a',YR='\x0a\x20\x20\x20\x20vec3\x20'+'light\x20=\x20ne'+'gNormal.x*'+'lightCube['+'0]\x20+\x20posNo'+'rmal.x*lig'+'htCube[1]\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20negN'+'ormal.y*li'+'ghtCube[2]'+'\x20+\x20posNorm'+'al.y*light'+'Cube[3]\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20negNor'+'mal.z*ligh'+'tCube[4]\x20+'+'\x20posNormal'+'.z*lightCu'+'be[5];\x0a\x0a\x20\x20'+'\x20\x20rgb\x20*=\x20l'+'ight;\x0a',KR='\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20('+'matrix_mod'+'el\x20*\x20vec4('+'particlePo'+'s,\x201.0)).x'+'yz;\x0a',ZR='\x0a\x20\x20\x20\x20vec3\x20'+'localPos\x20='+'\x20meshLocal'+'Pos;\x0a\x20\x20\x20\x20l'+'ocalPos.xy'+'\x20=\x20rotate('+'localPos.x'+'y,\x20inAngle'+',\x20rotMatri'+'x);\x0a\x20\x20\x20\x20lo'+'calPos.yz\x20'+'=\x20rotate(l'+'ocalPos.yz'+',\x20inAngle,'+'\x20rotMatrix'+');\x0a\x0a\x20\x20\x20\x20bi'+'llboard(pa'+'rticlePos,'+'\x20quadXY);\x0a',QR='\x0a\x20\x20\x20\x20Norma'+'l\x20=\x20normal'+'ize(localP'+'os\x20+\x20matri'+'x_viewInve'+'rse[2].xyz'+');\x0a',JR='\x0a\x20\x20\x20\x20vec3\x20'+'normalMap\x20'+'=\x20normaliz'+'e(texture2'+'D(normalMa'+'p,\x20vec2(te'+'xCoordsAlp'+'haLife.x,\x20'+'1.0\x20-\x20texC'+'oordsAlpha'+'Life.y)).x'+'yz\x20*\x202.0\x20-'+'\x201.0);\x0a\x20\x20\x20'+'\x20vec3\x20norm'+'al\x20=\x20Parti'+'cleMat\x20*\x20n'+'ormalMap;\x0a',e3='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan(veloci'+'tyV.x,\x20vel'+'ocityV.y);'+'\x0a\x0a',t3='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',s3='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vec3\x20No'+'rmal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20lightCu'+'be[6];\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20float\x20vDe'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fogP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'f\x20NORMAL\x20='+'=\x20MAP\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20normalMa'+'p;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22p'+'articlePS\x22'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_softP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20normal\x20'+'=\x20Normal;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalMap'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20HALF_L'+'AMBERT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_ha'+'lflambertP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_la'+'mbertPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_lighting'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20BLEND\x20'+'==\x20NORMAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndNormalPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+('\x20ADDITIVE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndAddPS\x22\x0a\x20'+'\x20\x20\x20#elif\x20B'+'LEND\x20==\x20MU'+'LTIPLICATI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendMulti'+'plyPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endPS\x22\x0a'),i3='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20animTexTi'+'lesParams;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20animTexP'+'arams;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec2\x20an'+'imTexIndex'+'Params;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20NO'+'RMAL\x20==\x20MA'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec3\x20Normal'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20SOFT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'rying\x20floa'+'t\x20vDepth;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_initVS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PA'+'CK8\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleInputR'+'gba8PS\x22\x20\x20\x20'+'\x20\x20//\x20why\x20a'+'re\x20these\x20P'+'S\x20and\x20not\x20'+'VS?\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x20'+'\x22particleI'+'nputFloatP'+'S\x22\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'OFT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22scre'+'enDepthPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleVS\x22\x0a\x0a\x20\x20'+'\x20\x20#else\x20//'+'\x20PARTICLE_'+'CPU\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22scr'+'eenDepthPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_cpuVS'+'\x22\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_local'+'ShiftVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20ANIMT'+'EX_LOOP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('#include\x20\x22'+'particleAn'+'imFrameLoo'+'pVS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particleA'+'nimFrameCl'+'ampVS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleAn'+'imTexVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20wr'+'ap\x20is\x20not\x20'+'used\x20on\x20CP'+'U,\x20it\x20was\x20'+'commented\x20'+'out.\x20TODO:'+'\x20investiga'+'te\x20why\x0a\x20\x20\x20'+'\x20#ifdef\x20PA'+'RTICLE_GPU'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20WRAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_wrapVS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20AL'+'IGN_TO_MOT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_pointAlon'+'gVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20US'+'E_MESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_meshVS'+'\x22\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20CUS'+'TOM_FACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'customFace'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_b'+'illboardVS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalVS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_TBNVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STRETCH\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_str'+'etchVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endVS\x22\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20PARTICLE'+'_CPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_cpu_endV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#')+('ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_so'+'ftVS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20}\x0a'),r3='\x0a\x20\x20\x20\x20float'+'\x20depth\x20=\x20g'+'etLinearSc'+'reenDepth('+');\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eDepth\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20float\x20dep'+'thDiff\x20=\x20s'+'aturate(ab'+'s(particle'+'Depth\x20-\x20de'+'pth)\x20*\x20sof'+'tening);\x0a\x20'+'\x20\x20\x20a\x20*=\x20de'+'pthDiff;\x0a',a3='\x0a\x20\x20\x20\x20vDept'+'h\x20=\x20getLin'+'earDepth(l'+'ocalPos);\x0a',n3='\x0a\x20\x20\x20\x20vec3\x20'+'moveDir\x20=\x20'+'inVel\x20*\x20st'+'retch;\x0a\x20\x20\x20'+'\x20vec3\x20posP'+'rev\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20+=\x20partic'+'lePosMoved'+';\x0a\x0a\x20\x20\x20\x20vec'+'2\x20centerTo'+'VertexV\x20=\x20'+'normalize('+'(mat3(matr'+'ix_view)\x20*'+'\x20localPos)'+'.xy);\x0a\x0a\x20\x20\x20'+'\x20float\x20int'+'erpolation'+'\x20=\x20dot(-ve'+'locityV,\x20c'+'enterToVer'+'texV)\x20*\x200.'+'5\x20+\x200.5;\x0a\x0a'+'\x20\x20\x20\x20partic'+'lePos\x20=\x20mi'+'x(particle'+'Pos,\x20posPr'+'ev,\x20interp'+'olation);\x0a',o3='\x0a\x20\x20\x20\x20mat3\x20'+'rot3\x20=\x20mat'+'3(rotMatri'+'x[0][0],\x20r'+'otMatrix[0'+'][1],\x200.0,'+'\x20rotMatrix'+'[1][0],\x20ro'+'tMatrix[1]'+'[1],\x200.0,\x20'+'0.0,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'ParticleMa'+'t\x20=\x20mat3(-'+'matrix_vie'+'wInverse[0'+'].xyz,\x20-ma'+'trix_viewI'+'nverse[1].'+'xyz,\x20matri'+'x_viewInve'+'rse[2].xyz'+')\x20*\x20rot3;\x0a',l3='\x0a\x20\x20\x20\x20vec3\x20'+'origPartic'+'lePos\x20=\x20pa'+'rticlePos;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20-=\x20'+'matrix_mod'+'el[3].xyz;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20m'+'od(particl'+'ePos,\x20wrap'+'Bounds)\x20-\x20'+'wrapBounds'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20+=\x20mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'PosMoved\x20='+'\x20particleP'+'os\x20-\x20origP'+'articlePos'+';\x0a',c3={'particlePS':vR,'particleVS':xR,'particleAnimFrameClampVS':TR,'particleAnimFrameLoopVS':wR,'particleAnimTexVS':ER,'particleInputFloatPS':bR,'particleInputRgba8PS':AR,'particleOutputFloatPS':CR,'particleOutputRgba8PS':PR,'particleUpdaterAABBPS':MR,'particleUpdaterEndPS':DR,'particleUpdaterInitPS':IR,'particleUpdaterNoRespawnPS':LR,'particleUpdaterOnStopPS':RR,'particleUpdaterRespawnPS':OR,'particleUpdaterSpherePS':FR,'particleUpdaterStartPS':NR,'particle_billboardVS':kR,'particle_blendAddPS':UR,'particle_blendMultiplyPS':BR,'particle_blendNormalPS':zR,'particle_cpuVS':VR,'particle_cpu_endVS':GR,'particle_customFaceVS':HR,'particle_endPS':WR,'particle_endVS':$R,'particle_halflambertPS':XR,'particle_initVS':qR,'particle_lambertPS':jR,'particle_lightingPS':YR,'particle_localShiftVS':KR,'particle_meshVS':ZR,'particle_normalVS':QR,'particle_normalMapPS':JR,'particle_pointAlongVS':e3,'particle_simulationPS':t3,'particle_shaderPS':s3,'particle_shaderVS':i3,'particle_softPS':r3,'particle_softVS':a3,'particle_stretchVS':n3,'particle_TBNVS':o3,'particle_wrapVS':l3},h3='\x0avarying\x20t'+'exCoordsAl'+'phaLife:\x20v'+'ec4f;\x0a\x0avar'+'\x20colorMap:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20colorMap'+'Sampler:\x20s'+'ampler;\x0ava'+'r\x20colorPar'+'am:\x20textur'+'e_2d<f32>;'+'\x0avar\x20color'+'ParamSampl'+'er:\x20sample'+'r;\x0a\x0aunifor'+'m\x20graphSam'+'pleSize:\x20f'+'32;\x0aunifor'+'m\x20graphNum'+'Samples:\x20f'+'32;\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0auniform'+'\x20softening'+':\x20f32;\x0auni'+'form\x20color'+'Mult:\x20f32;'+'\x0a\x0afn\x20satur'+'ate(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(x,'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20tex:\x20v'+'ec4f\x20\x20=\x20te'+'xtureSampl'+'e(colorMap'+',\x20colorMap'+'Sampler,\x20v'+'ec2f(input'+'.texCoords'+'AlphaLife.'+'x,\x201.0\x20-\x20i'+'nput.texCo'+'ordsAlphaL'+'ife.y));\x0a\x20'+'\x20\x20\x20var\x20ram'+'p:\x20vec4f\x20='+'\x20textureSa'+'mple(color'+'Param,\x20col'+'orParamSam'+'pler,\x20vec2'+'f(input.te'+'xCoordsAlp'+'haLife.w,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20ramp\x20=\x20ve'+'c4f(ramp.r'+'gb\x20*\x20unifo'+'rm.colorMu'+'lt,\x20ramp.a'+');\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20=\x20ram'+'p.a\x20+\x20inpu'+'t.texCoord'+'sAlphaLife'+'.z;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20rgb:\x20ve'+'c3f\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'var\x20a:\x20f32'+'\x20=\x20tex.a\x20*'+'\x20ramp.a;\x0a',d3='\x0afn\x20unpack'+'3NFloats(s'+'rc:\x20f32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20r\x20'+'=\x20fract(sr'+'c);\x0a\x20\x20\x20\x20le'+'t\x20g\x20=\x20frac'+'t(src\x20*\x2025'+'6.0);\x0a\x20\x20\x20\x20'+'let\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3f(r,\x20'+'g,\x20b);\x0a}\x0a\x0a'+'fn\x20saturat'+'e(x:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0astruct\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20resu'+'lt:\x20vec4f,'+'\x0a\x20\x20\x20\x20unpac'+'ked:\x20vec3f'+'\x0a}\x0a\x0afn\x20tex'+'1Dlod_lerp'+'_simple(te'+'x:\x20texture'+'_2d<f32>,\x20'+'texSampler'+':\x20sampler,'+'\x20tc:\x20vec2f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20tc_next\x20='+'\x20tc\x20+\x20vec2'+'f(uniform.'+'graphSampl'+'eSize);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(\x20textur'+'eSample(te'+'x,\x20texSamp'+'ler,\x20tc),\x20'+'textureSam'+'ple(tex,\x20t'+'exSampler,'+'\x20tc_next),'+'\x20fract(tc.'+'x\x20*\x20unifor'+'m.graphNum'+'Samples)\x20)'+';\x0a}\x0a\x0afn\x20te'+'x1Dlod_ler'+'p_unpack(t'+'ex:\x20textur'+'e_2d<f32>,'+'\x20texSample'+'r:\x20sampler'+',\x20tc:\x20vec2'+'f)\x20->\x20TexL'+'erpUnpackR'+'esult\x20{\x0a\x20\x20'+'\x20\x20let\x20tc_n'+'ext\x20=\x20tc\x20+'+'\x20vec2f(uni'+'form.graph'+'SampleSize'+');\x0a\x20\x20\x20\x20let'+'\x20a\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20tc,\x200.0);'+'\x0a\x20\x20\x20\x20let\x20b'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'c_next,\x200.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20u'+'niform.gra'+'phNumSampl'+'es);\x0a\x20\x20\x20\x20l'+'et\x20unpacke'+'dA\x20=\x20unpac'+'k3NFloats('+'a.w);\x0a\x20\x20\x20\x20'+'let\x20unpack'+'edB\x20=\x20unpa'+'ck3NFloats'+'(b.w);\x0a\x20\x20\x20'+'\x20let\x20w_out'+('\x20=\x20mix(unp'+'ackedA,\x20un'+'packedB,\x20c'+');\x0a\x20\x20\x20\x20ret'+'urn\x20TexLer'+'pUnpackRes'+'ult(mix(a,'+'\x20b,\x20c),\x20w_'+'out);\x0a}\x0a\x0as'+'truct\x20Rota'+'teResult\x20{'+'\x0a\x20\x20\x20\x20rotat'+'edVec:\x20vec'+'2f,\x0a\x20\x20\x20\x20ma'+'trix:\x20mat2'+'x2f\x0a}\x0a\x0afn\x20'+'rotateWith'+'Matrix(qua'+'dXY:\x20vec2f'+',\x20pRotatio'+'n:\x20f32)\x20->'+'\x20RotateRes'+'ult\x20{\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20co'+'s(pRotatio'+'n);\x0a\x20\x20\x20\x20le'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x20\x20\x20\x20let\x20'+'m\x20=\x20mat2x2'+'f(vec2f(c,'+'\x20s),\x20vec2f'+'(-s,\x20c));\x0a'+'\x20\x20\x20\x20return'+'\x20RotateRes'+'ult(m\x20*\x20qu'+'adXY,\x20m);\x0a'+'}\x0a\x0afn\x20bill'+'board(Inst'+'anceCoords'+':\x20vec3f,\x20q'+'uadXY:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20pos:\x20ve'+'c3f;\x0a\x20\x20\x20\x20#'+'ifdef\x20SCRE'+'EN_SPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pos'+'\x20=\x20vec3f(-'+'1.0,\x200.0,\x20'+'0.0)\x20*\x20qua'+'dXY.x\x20+\x20ve'+'c3f(0.0,\x20-'+'1.0,\x200.0)\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20custom'+'Face(Insta'+'nceCoords:'+'\x20vec3f,\x20qu'+'adXY:\x20vec2'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20pos\x20=\x20un'+'iform.face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20uniform.f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20safeNo'+'rmalize(v:'+'\x20vec2f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20let\x20l\x20='+'\x20length(v)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20select('+'v,\x20v\x20/\x20l,\x20'+'l\x20>\x201e-06)'+';\x0a}\x0a\x0a@vert'+'ex\x0afn\x20vert'+'exMain(inp')+('ut:\x20Vertex'+'Input)\x20->\x20'+'VertexOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20meshLo'+'calPos_in\x20'+'=\x20input.pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20id\x20=\x20floo'+'r(input.pa'+'rticle_ver'+'texData.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20rndFactor'+'\x20=\x20fract(s'+'in(id\x20+\x201.'+'0\x20+\x20unifor'+'m.seed));\x0a'+'\x20\x20\x20\x20let\x20rn'+'dFactor3\x20='+'\x20vec3f(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20let\x20uv\x20=\x20'+'id\x20/\x20unifo'+'rm.numPart'+'iclesPot;\x0a'+'\x20\x20\x20\x20readIn'+'put(uv);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20model'+'Rotation\x20='+'\x20mat3x3f(u'+'niform.mat'+'rix_model['+'0].xyz,\x20un'+'iform.matr'+'ix_model[1'+'].xyz,\x20uni'+'form.matri'+'x_model[2]'+'.xyz);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20inVel'+'\x20=\x20modelRo'+'tation\x20*\x20i'+'nVel;\x0a\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20let\x20viewR'+'otation\x20=\x20'+'mat3x3f(un'+'iform.matr'+'ix_view[0]'+'.xyz,\x20unif'+'orm.matrix'+'_view[1].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[2].xyz'+');\x0a\x20\x20\x20\x20let'+'\x20velocityV'+'\x20=\x20safeNor'+'malize((vi'+'ewRotation'+'\x20*\x20inVel).'+'xy);\x0a\x0a\x20\x20\x20\x20'+'let\x20partic'+'leLifetime'+'\x20=\x20uniform'+'.lifetime;'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'meshLocalP'+'os\x20=\x20meshL'+'ocalPos_in'+';\x0a\x20\x20\x20\x20if\x20('+'inLife\x20<=\x20'+'0.0\x20||\x20inL'+'ife\x20>\x20part'+'icleLifeti'+'me\x20||\x20!inS'+'how)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mesh'+'LocalPos\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20let\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20let'+'\x20nlife\x20=\x20c')+('lamp(inLif'+'e\x20/\x20partic'+'leLifetime'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20lerp_res'+'ult\x20=\x20tex1'+'Dlod_lerp_'+'unpack(int'+'ernalTex2,'+'\x20internalT'+'ex2Sampler'+',\x20vec2f(nl'+'ife,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'params\x20=\x20l'+'erp_result'+'.result;\x0a\x20'+'\x20\x20\x20let\x20par'+'amDiv\x20=\x20le'+'rp_result.'+'unpacked;\x0a'+'\x0a\x20\x20\x20\x20var\x20s'+'cale\x20=\x20par'+'ams.y;\x0a\x20\x20\x20'+'\x20let\x20scale'+'Div\x20=\x20para'+'mDiv.x;\x0a\x20\x20'+'\x20\x20let\x20alph'+'aDiv\x20=\x20par'+'amDiv.z;\x0a\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20scale\x20+\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20unifo'+'rm.scaleDi'+'vMult\x20*\x20fr'+'act(rndFac'+'tor*10000.'+'0);\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20USE'+'_MESH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.texCoords'+'AlphaLife\x20'+'=\x20vec4f(qu'+'adXY\x20*\x20-0.'+'5\x20+\x200.5,\x20('+'alphaDiv\x20*'+'\x202.0\x20-\x201.0'+')\x20*\x20unifor'+'m.alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife\x20=\x20vec4'+'f(particle'+'_uv,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'uniform.al'+'phaDivMult'+'\x20*\x20fract(r'+'ndFactor*1'+'000.0),\x20nl'+'ife);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20var\x20part'+'iclePos\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20var\x20parti'+'clePosMove'+'d\x20=\x20vec3f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20var\x20rotMa'+'trix:\x20mat2'+'x2f;\x0a'),f3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20min('+'floor(inpu'+'t.texCoord'+'sAlphaLife'+'.w\x20*\x20unifo'+'rm.animTex'+'Params.y)\x20'+'+\x20uniform.'+'animTexPar'+'ams.x,\x20uni'+'form.animT'+'exParams.z'+');\x0a',u3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20floo'+'r((output.'+'texCoordsA'+'lphaLife.w'+'\x20*\x20uniform'+'.animTexPa'+'rams.y\x20+\x20u'+'niform.ani'+'mTexParams'+'.x)\x20%\x20(uni'+'form.animT'+'exParams.z'+'\x20+\x201.0));\x20'+'\x20\x20\x20\x0a',p3='\x0a\x20\x20\x20\x20var\x20a'+'nimationIn'+'dex:\x20f32;\x0a'+'\x0a\x20\x20\x20\x20if\x20(u'+'niform.ani'+'mTexIndexP'+'arams.y\x20=='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20floor(('+'uniform.an'+'imTexParam'+'s.w\x20+\x201.0)'+'\x20*\x20rndFact'+'or3.z)\x20*\x20('+'uniform.an'+'imTexParam'+'s.z\x20+\x201.0)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20animati'+'onIndex\x20=\x20'+'uniform.an'+'imTexIndex'+'Params.x\x20*'+'\x20(uniform.'+'animTexPar'+'ams.z\x20+\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20var\x20a'+'tlasX:\x20f32'+'\x20=\x20(animat'+'ionIndex\x20+'+'\x20animFrame'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20atlasY:\x20'+'f32\x20=\x201.0\x20'+'-\x20floor(at'+'lasX\x20+\x201.0'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.y;\x0a\x20\x20\x20\x20at'+'lasX\x20=\x20fra'+'ct(atlasX)'+';\x20//\x20Reass'+'ign\x20atlasX'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'current_tc'+'al_xy\x20=\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.xy;\x0a\x20\x20'+'\x20\x20let\x20scal'+'ed_tcal_xy'+'\x20=\x20current'+'_tcal_xy\x20*'+'\x20uniform.a'+'nimTexTile'+'sParams.xy'+';\x0a\x20\x20\x20\x20let\x20'+'final_tcal'+'_xy\x20=\x20scal'+'ed_tcal_xy'+'\x20+\x20vec2f(a'+'tlasX,\x20atl'+'asY);\x0a\x20\x20\x20\x20'+'output.tex'+'CoordsAlph'+'aLife\x20=\x20ve'+'c4f(final_'+'tcal_xy,\x20o'+'utput.texC'+'oordsAlpha'+'Life.z,\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.w);\x0a',m3='\x0afn\x20readIn'+'put(uv:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex:\x20ve'+'c4f\x20=\x20text'+'ureSampleL'+'evel(parti'+'cleTexIN,\x20'+'particleTe'+'xINSampler'+',\x20vec2f(uv'+',\x200.25),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex2:\x20v'+'ec4f\x20=\x20tex'+'tureSample'+'Level(part'+'icleTexIN,'+'\x20particleT'+'exINSample'+'r,\x20vec2f(u'+'v,\x200.75),\x20'+'0.0);\x0a\x0a\x20\x20\x20'+'\x20inPos\x20=\x20t'+'ex.xyz;\x0a\x20\x20'+'\x20\x20inVel\x20=\x20'+'tex2.xyz;\x0a'+'\x20\x20\x20\x20inAngl'+'e\x20=\x20abs(te'+'x.w)\x20-\x20100'+'0.0;\x0a\x20\x20\x20\x20i'+'nShow\x20=\x20te'+'x.w\x20>=\x200.0'+';\x0a\x20\x20\x20\x20inLi'+'fe\x20=\x20tex2.'+'w;\x0a}\x0a',_3='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0ac'+'onst\x20PI2:\x20'+'f32\x20=\x206.28'+'3185307179'+'586;\x0a\x0aunif'+'orm\x20inBoun'+'dsSize:\x20ve'+'c3f;\x0aunifo'+'rm\x20inBound'+'sCenter:\x20v'+'ec3f;\x0a\x0auni'+'form\x20maxVe'+'l:\x20f32;\x0a\x0af'+'n\x20decodeFl'+'oatRG(rg:\x20'+'vec2f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20rg.'+'y\x20*\x20(1.0\x20/'+'\x20255.0)\x20+\x20'+'rg.x;\x0a}\x0a\x0af'+'n\x20decodeFl'+'oatRGBA(\x20r'+'gba:\x20vec4f'+'\x20)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20dot(rgb'+'a,\x20vec4f(1'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x2065025.0'+',\x201.0\x20/\x2016'+'0581375.0)'+');\x0a}\x0a\x0afn\x20r'+'eadInput(u'+'v:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20let\x20te'+'x0\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.125),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex1\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.37'+'5),\x200.0);\x0a'+'\x20\x20\x20\x20let\x20te'+'x2\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.625),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex3\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.87'+'5),\x200.0);\x0a'+'\x0a\x20\x20\x20\x20inPos'+'\x20=\x20vec3f(d'+'ecodeFloat'+'RG(tex0.rg'+'),\x20decodeF'+'loatRG(tex'+'0.ba),\x20dec'+'odeFloatRG'+'(tex1.rg))'+';\x0a\x20\x20\x20\x20inPo'+'s\x20=\x20(inPos'+'\x20-\x20vec3f(0'+'.5))\x20*\x20uni'+'form.inBou'+'ndsSize\x20+\x20'+'uniform.in'+'BoundsCent'+'er;\x0a\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inVel\x20=\x20('+('inVel\x20-\x20ve'+'c3f(0.5))\x20'+'*\x20uniform.'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20let\x20l'+'ife_decode'+'d\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20let\x20maxNe'+'gLife\x20=\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20(uniform.'+'rate\x20+\x20uni'+'form.rateD'+'iv));\x0a\x20\x20\x20\x20'+'let\x20maxPos'+'Life\x20=\x20uni'+'form.lifet'+'ime\x20+\x201.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20life_d'+'ecoded\x20*\x20('+'maxNegLife'+'\x20+\x20maxPosL'+'ife)\x20-\x20max'+'NegLife;\x0a}'),g3='\x0afn\x20getOut'+'put()\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20if\x20(pcPos'+'ition.y\x20<\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4f(ou'+'tPos,\x20(out'+'Angle\x20+\x2010'+'00.0)\x20*\x20vi'+'sMode);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(outVel,\x20'+'outLife);\x0a'+'\x20\x20\x20\x20}\x0a}\x0a',S3='\x0auniform\x20o'+'utBoundsMu'+'l:\x20vec3f;\x0a'+'uniform\x20ou'+'tBoundsAdd'+':\x20vec3f;\x0a\x0a'+'fn\x20encodeF'+'loatRG(\x20v:'+'\x20f32\x20)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20var\x20enc:'+'\x20vec2f\x20=\x20v'+'ec2f(1.0,\x20'+'255.0)\x20*\x20v'+';\x0a\x20\x20\x20\x20enc\x20'+'=\x20fract(en'+'c);\x0a\x20\x20\x20\x20en'+'c\x20=\x20enc\x20-\x20'+'enc.yy\x20*\x20('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20enc;\x0a'+'}\x0a\x0afn\x20enco'+'deFloatRGB'+'A(\x20v:\x20f32\x20'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20factors\x20='+'\x20vec4f(1.0'+',\x20255.0,\x206'+'5025.0,\x2016'+'0581375.0)'+';\x0a\x20\x20\x20\x20var\x20'+'enc:\x20vec4f'+'\x20=\x20factors'+'\x20*\x20v;\x0a\x20\x20\x20\x20'+'enc\x20=\x20frac'+'t(enc);\x0a\x20\x20'+'\x20\x20enc\x20=\x20en'+'c\x20-\x20enc.yz'+'ww\x20*\x20vec4f'+'(1.0\x20/\x20255'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x20255.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'return\x20enc'+';\x0a}\x0a\x0afn\x20ge'+'tOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20outPo'+'s\x20=\x20outPos'+'\x20*\x20uniform'+'.outBounds'+'Mul\x20+\x20unif'+'orm.outBou'+'ndsAdd;\x0a\x20\x20'+'\x20\x20outAngle'+'\x20=\x20fract(o'+'utAngle\x20/\x20'+'PI2);\x0a\x0a\x20\x20\x20'+'\x20outVel\x20=\x20'+'(outVel\x20/\x20'+'uniform.ma'+'xVel)\x20+\x20ve'+'c3f(0.5);\x20'+'//\x20TODO:\x20m'+'ul\x0a\x0a\x20\x20\x20\x20le'+'t\x20maxNegLi'+'fe\x20=\x20max(u'+'niform.lif'+'etime,\x20(un'+'iform.numP'+'articles\x20-'+'\x201.0)\x20*\x20(u'+'niform.rat'+'e\x20+\x20unifor'+'m.rateDiv)'+');\x0a\x20\x20\x20\x20let'+'\x20maxPosLif'+'e\x20=\x20unifor'+'m.lifetime'+'\x20+\x201.0;\x0a\x20\x20'+'\x20\x20outLife\x20'+'=\x20(outLife'+'\x20+\x20maxNegL'+'ife)\x20/\x20(ma'+'xNegLife\x20+'+'\x20maxPosLif'+'e);\x0a\x0a\x20\x20\x20\x20i'+'f\x20(pcPosit'+'ion.y\x20<\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'vec4f(enco'+'deFloatRG('+'outPos.x),'+'\x20encodeFlo'+'atRG(outPo'+'s.y));\x0a\x20\x20\x20'+('\x20}\x20else\x20if'+'\x20(pcPositi'+'on.y\x20<\x202.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(encod'+'eFloatRG(o'+'utPos.z),\x20'+'encodeFloa'+'tRG(outAng'+'le));\x0a\x20\x20\x20\x20'+'}\x20else\x20if\x20'+'(pcPositio'+'n.y\x20<\x203.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(outVel'+',\x20visMode\x20'+'*\x200.5\x20+\x200.'+'5);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20encodeFl'+'oatRGBA(ou'+'tLife);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),y3='\x0auniform\x20s'+'pawnBounds'+':\x20mat3x3f;'+'\x0auniform\x20s'+'pawnPosInn'+'erRatio:\x20v'+'ec3f;\x0a\x0afn\x20'+'calcSpawnP'+'osition(in'+'Bounds:\x20ve'+'c3f,\x20rndFa'+'ctor:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'pos\x20=\x20inBo'+'unds\x20-\x20vec'+'3f(0.5);\x0a\x0a'+'\x20\x20\x20\x20let\x20po'+'sAbs\x20=\x20abs'+'(pos);\x0a\x20\x20\x20'+'\x20let\x20maxCo'+'mp\x20=\x20max(p'+'osAbs.x,\x20m'+'ax(posAbs.'+'y,\x20posAbs.'+'z));\x0a\x20\x20\x20\x20l'+'et\x20maxPos\x20'+'=\x20vec3f(ma'+'xComp);\x0a\x0a\x20'+'\x20\x20\x20let\x20edg'+'e\x20=\x20maxPos'+'\x20+\x20(vec3f('+'0.5)\x20-\x20max'+'Pos)\x20*\x20uni'+'form.spawn'+'PosInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'pos.x\x20=\x20ed'+'ge.x\x20*\x20sel'+'ect(2.0\x20*\x20'+'pos.x,\x20sig'+'n(pos.x),\x20'+'maxPos.x\x20='+'=\x20posAbs.x'+');\x0a\x20\x20\x20\x20pos'+'.y\x20=\x20edge.'+'y\x20*\x20select'+'(2.0\x20*\x20pos'+'.y,\x20sign(p'+'os.y),\x20max'+'Pos.y\x20==\x20p'+'osAbs.y);\x0a'+'\x20\x20\x20\x20pos.z\x20'+'=\x20edge.z\x20*'+'\x20select(2.'+'0\x20*\x20pos.z,'+'\x20sign(pos.'+'z),\x20maxPos'+'.z\x20==\x20posA'+'bs.z);\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20uni'+'form.emitt'+'erPos\x20+\x20un'+'iform.spaw'+'nBounds\x20*\x20'+'pos;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uniform.sp'+'awnBounds\x20'+'*\x20pos;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20*localV'+'elocity\x20=\x20'+'*localVelo'+'city\x20-\x20vec'+'3f(0.0,\x200.'+'0,\x20uniform'+'.initialVe'+'locity);\x0a}'+'\x0a',v3='\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'getOutput('+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',x3='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20par'+'ticleTexIN'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20particl'+'eTexINSamp'+'ler:\x20sampl'+'er;\x0avar\x20in'+'ternalTex0'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0avar\x20int'+'ernalTex1:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20internal'+'Tex1Sample'+'r:\x20sampler'+';\x0avar\x20inte'+'rnalTex2:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20internalT'+'ex2Sampler'+':\x20sampler;'+'\x0avar\x20inter'+'nalTex3:\x20t'+'exture_2d<'+'f32>;\x0avar\x20'+'internalTe'+'x3Sampler:'+'\x20sampler;\x0a'+'\x0auniform\x20e'+'mitterMatr'+'ix:\x20mat3x3'+'f;\x0auniform'+'\x20emitterMa'+'trixInv:\x20m'+'at3x3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0a\x0aun'+'iform\x20emit'+'terPos:\x20ve'+'c3f;\x0aunifo'+'rm\x20frameRa'+'ndom:\x20vec3'+'f;\x0auniform'+'\x20localVelo'+'cityDivMul'+'t:\x20vec3f;\x0a'+'uniform\x20ve'+'locityDivM'+'ult:\x20vec3f'+';\x0auniform\x20'+'delta:\x20f32'+';\x0auniform\x20'+'rate:\x20f32;'+'\x0auniform\x20r'+'ateDiv:\x20f3'+'2;\x0auniform'+'\x20lifetime:'+'\x20f32;\x0aunif'+'orm\x20numPar'+'ticles:\x20f3'+'2;\x0auniform'+'\x20rotSpeedD'+'ivMult:\x20f3'+'2;\x0auniform'+'\x20radialSpe'+'edDivMult:'+'\x20f32;\x0aunif'+'orm\x20seed:\x20'+'f32;\x0aunifo'+'rm\x20startAn'+'gle:\x20f32;\x0a'+'uniform\x20st'+'artAngle2:'+'\x20f32;\x0aunif'+'orm\x20initia'+'lVelocity:'+'\x20f32;\x0a\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0a\x0ava'+'r<private>'+'\x20inPos:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20in'+'Vel:\x20vec3f'+';\x0avar<priv'+'ate>\x20inAng'+('le:\x20f32;\x0av'+'ar<private'+'>\x20inShow:\x20'+'bool;\x0avar<'+'private>\x20i'+'nLife:\x20f32'+';\x0avar<priv'+'ate>\x20visMo'+'de:\x20f32;\x0a\x0a'+'var<privat'+'e>\x20outPos:'+'\x20vec3f;\x0ava'+'r<private>'+'\x20outVel:\x20v'+'ec3f;\x0avar<'+'private>\x20o'+'utAngle:\x20f'+'32;\x0avar<pr'+'ivate>\x20out'+'Show:\x20bool'+';\x0avar<priv'+'ate>\x20outLi'+'fe:\x20f32;\x0a'),T3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tLife\x20=\x20ou'+'tLife\x20-\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20particleR'+'ate);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20visMod'+'e\x20=\x20-1.0;\x0a'+'\x20\x20\x20\x20}\x0a',w3='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20selec'+'t(visMode,'+'\x20-1.0,\x20out'+'Life\x20<\x200.0'+');\x0a',E3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20subtract'+'Amount\x20=\x20m'+'ax(uniform'+'.lifetime,'+'\x20(uniform.'+'numParticl'+'es\x20-\x201.0)\x20'+'*\x20particle'+'Rate);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outLi'+'fe\x20=\x20outLi'+'fe\x20-\x20subtr'+'actAmount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'isMode\x20=\x201'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20visMod'+'e\x20=\x20select'+'(visMode,\x20'+'1.0,\x20outLi'+'fe\x20<\x200.0);'+'\x0a',b3='\x0auniform\x20s'+'pawnBounds'+'Sphere:\x20f3'+'2;\x0auniform'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio:\x20'+'f32;\x0a\x0afn\x20c'+'alcSpawnPo'+'sition(inB'+'ounds:\x20vec'+'3f,\x20rndFac'+'tor:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'nd4:\x20f32\x20='+'\x20fract(rnd'+'Factor\x20*\x201'+'000.0);\x0a\x20\x20'+'\x20\x20let\x20norm'+':\x20vec3f\x20=\x20'+'normalize('+'inBounds.x'+'yz\x20-\x20vec3f'+'(0.5));\x0a\x20\x20'+'\x20\x20let\x20r:\x20f'+'32\x20=\x20rnd4\x20'+'*\x20(1.0\x20-\x20u'+'niform.spa'+'wnBoundsSp'+'hereInnerR'+'atio)\x20+\x20un'+'iform.spaw'+'nBoundsSph'+'ereInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20unifo'+'rm.emitter'+'Pos\x20+\x20norm'+'\x20*\x20r\x20*\x20uni'+'form.spawn'+'BoundsSphe'+'re;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20n'+'orm\x20*\x20r\x20*\x20'+'uniform.sp'+'awnBoundsS'+'phere;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20ini'+'tialVelOff'+'set:\x20vec3f'+'\x20=\x20normali'+'ze(inBound'+'s\x20-\x20vec3f('+'0.5))\x20*\x20un'+'iform.init'+'ialVelocit'+'y;\x0a\x20\x20\x20\x20*lo'+'calVelocit'+'y\x20=\x20*local'+'Velocity\x20+'+'\x20initialVe'+'lOffset;\x0a}'+'\x0a',A3='\x0afn\x20satura'+'te(x:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(x,\x20'+'0.0,\x201.0);'+'\x0a}\x0a\x0afn\x20unp'+'ack3NFloat'+'s(src:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20r\x20=\x20fract'+'(src);\x0a\x20\x20\x20'+'\x20let\x20g\x20=\x20f'+'ract(src\x20*'+'\x20256.0);\x0a\x20'+'\x20\x20\x20let\x20b\x20='+'\x20fract(src'+'\x20*\x2065536.0'+');\x0a\x20\x20\x20\x20ret'+'urn\x20vec3f('+'r,\x20g,\x20b);\x0a'+'}\x0a\x0a//\x20Stru'+'ct\x20to\x20hand'+'le\x20multipl'+'e\x20return\x20v'+'alues\x20from'+'\x20tex1Dlod_'+'lerp\x0astruc'+'t\x20TexLerpU'+'npackResul'+'t\x20{\x0a\x20\x20\x20\x20re'+'sult:\x20vec3'+'f,\x0a\x20\x20\x20\x20unp'+'acked:\x20vec'+'3f\x0a}\x0a\x0afn\x20t'+'ex1Dlod_le'+'rp(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20tc:\x20'+'vec2f)\x20->\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'tc_next\x20=\x20'+'tc\x20+\x20vec2f'+'(uniform.g'+'raphSample'+'Size);\x0a\x20\x20\x20'+'\x20let\x20a\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20tc,\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20tc_next'+',\x200.0);\x0a\x20\x20'+'\x20\x20let\x20c\x20=\x20'+'fract(tc.x'+'\x20*\x20uniform'+'.graphNumS'+'amples);\x0a\x0a'+'\x20\x20\x20\x20let\x20un'+'packedA\x20=\x20'+'unpack3NFl'+'oats(a.w);'+'\x0a\x20\x20\x20\x20let\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20let\x20'+'w_out\x20=\x20mi'+'x(unpacked'+'A,\x20unpacke'+'dB,\x20c);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'TexLerpUnp'+'ackResult('+'mix(a.xyz,'+'\x20b.xyz,\x20c)'+',\x20w_out);\x0a'+'}\x0a\x0aconst\x20H'+'ASHSCALE4:'+'\x20vec4f\x20=\x20v'+'ec4f(1031.'+'0,\x200.1030,'+'\x200.0973,\x200'+'.1099);\x0afn'+'\x20hash41(p:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20var\x20p4\x20=\x20'+'fract(vec4'+'f(p)\x20*\x20HAS'+('HSCALE4);\x0a'+'\x20\x20\x20\x20p4\x20=\x20p'+'4\x20+\x20dot(p4'+',\x20p4.wzxy\x20'+'+\x2019.19);\x0a'+'\x20\x20\x20\x20return'+'\x20fract(vec'+'4f((p4.x\x20+'+'\x20p4.y)*p4.'+'z,\x20(p4.x\x20+'+'\x20p4.z)*p4.'+'y,\x20(p4.y\x20+'+'\x20p4.z)*p4.'+'w,\x20(p4.z\x20+'+'\x20p4.w)*p4.'+'x));\x0a}\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20if\x20(pc'+'Position.x'+'\x20>\x20uniform'+'.numPartic'+'les)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20re'+'adInput(in'+'put.vUv0.x'+');\x0a\x20\x20\x20\x20vis'+'Mode\x20=\x20sel'+'ect(-1.0,\x20'+'1.0,\x20inSho'+'w);\x0a\x0a\x20\x20\x20\x20l'+'et\x20rndFact'+'or\x20=\x20hash4'+'1(pcPositi'+'on.x\x20+\x20uni'+'form.seed)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20particleR'+'ate\x20=\x20unif'+'orm.rate\x20+'+'\x20uniform.r'+'ateDiv\x20*\x20r'+'ndFactor.x'+';\x0a\x0a\x20\x20\x20\x20out'+'Life\x20=\x20inL'+'ife\x20+\x20unif'+'orm.delta;'+'\x0a\x20\x20\x20\x20let\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20uniform'+'.lifetime,'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t0\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'0,\x20interna'+'lTex0Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20va'+'r\x20localVel'+'ocity\x20=\x20le'+'rpResult0.'+'result;\x0a\x20\x20'+'\x20\x20let\x20loca'+'lVelocityD'+'iv\x20=\x20lerpR'+'esult0.unp'+'acked;\x0a\x0a\x20\x20'+'\x20\x20let\x20lerp'+'Result1\x20=\x20'+'tex1Dlod_l'+'erp(intern'+'alTex1,\x20in'+'ternalTex1'+'Sampler,\x20v'+'ec2f(nlife'+',\x200.0));\x0a\x20'+'\x20\x20\x20var\x20vel'+'ocity\x20=\x20le'+'rpResult1.'+'result;\x0a\x20\x20'+'\x20\x20let\x20velo'+'cityDiv\x20=\x20'+'lerpResult')+('1.unpacked'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t2\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'2,\x20interna'+'lTex2Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20le'+'t\x20params\x20='+'\x20lerpResul'+'t2.result;'+'\x0a\x20\x20\x20\x20let\x20p'+'aramDiv\x20=\x20'+'lerpResult'+'2.unpacked'+';\x0a\x20\x20\x20\x20var\x20'+'rotSpeed\x20='+'\x20params.x;'+'\x0a\x20\x20\x20\x20let\x20r'+'otSpeedDiv'+'\x20=\x20paramDi'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'let\x20lerpRe'+'sult3\x20=\x20te'+'x1Dlod_ler'+'p(internal'+'Tex3,\x20inte'+'rnalTex3Sa'+'mpler,\x20vec'+'2f(nlife,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20let\x20radia'+'lParams\x20=\x20'+'lerpResult'+'3.result;\x0a'+'\x20\x20\x20\x20let\x20ra'+'dialParamD'+'iv\x20=\x20lerpR'+'esult3.unp'+'acked;\x0a\x20\x20\x20'+'\x20let\x20radia'+'lSpeed\x20=\x20r'+'adialParam'+'s.x;\x0a\x20\x20\x20\x20l'+'et\x20radialS'+'peedDiv\x20=\x20'+'radialPara'+'mDiv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20res'+'pawn\x20=\x20inL'+'ife\x20<=\x200.0'+'\x20||\x20outLif'+'e\x20>=\x20unifo'+'rm.lifetim'+'e;\x0a\x20\x20\x20\x20inP'+'os\x20=\x20selec'+'t(inPos,\x20c'+'alcSpawnPo'+'sition(rnd'+'Factor.xyz'+',\x20rndFacto'+'r.x),\x20resp'+'awn);\x0a\x20\x20\x20\x20'+'inAngle\x20=\x20'+'select(inA'+'ngle,\x20mix('+'uniform.st'+'artAngle,\x20'+'uniform.st'+'artAngle2,'+'\x20rndFactor'+'.x),\x20respa'+'wn);\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20radialVe'+'l:\x20vec3f\x20='+'\x20inPos\x20-\x20u'+'niform.emi'+'tterPos;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20radialVel'+':\x20vec3f\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20=\x20select'+'(vec3f(0.0'+'),\x20radialS'+'peed\x20*\x20nor'+'malize(rad'+'ialVel),\x20d'+'ot(radialV'+'el,\x20radial'+'Vel)\x20>\x201.0')+('E-8);\x0a\x20\x20\x20\x20'+'radialVel\x20'+'=\x20radialVe'+'l\x20+\x20(radia'+'lSpeedDiv\x20'+'*\x20vec3f(2.'+'0)\x20-\x20vec3f'+'(1.0))\x20*\x20u'+'niform.rad'+'ialSpeedDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20=\x20localV'+'elocity\x20+\x20'+'(localVelo'+'cityDiv\x20*\x20'+'vec3f(2.0)'+'\x20-\x20vec3f(1'+'.0))\x20*\x20uni'+'form.local'+'VelocityDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x20\x20\x20\x20vel'+'ocity\x20=\x20ve'+'locity\x20+\x20('+'velocityDi'+'v\x20*\x20vec3f('+'2.0)\x20-\x20vec'+'3f(1.0))\x20*'+'\x20uniform.v'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20rotS'+'peed\x20=\x20rot'+'Speed\x20+\x20(r'+'otSpeedDiv'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20unif'+'orm.rotSpe'+'edDivMult\x20'+'*\x20rndFacto'+'r.y;\x0a\x0a\x20\x20\x20\x20'+'addInitial'+'Velocity(&'+'localVeloc'+'ity,\x20rndFa'+'ctor.xyz);'+'\x0a\x0a\x20\x20\x20\x20#ifn'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20outVel'+'\x20=\x20uniform'+'.emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tVel\x20=\x20(lo'+'calVelocit'+'y\x20+\x20radial'+'Vel)\x20/\x20uni'+'form.emitt'+'erScale\x20+\x20'+'uniform.em'+'itterMatri'+'xInv\x20*\x20vel'+'ocity;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20outPos\x20'+'=\x20inPos\x20+\x20'+'outVel\x20*\x20u'+'niform.del'+'ta;\x0a\x20\x20\x20\x20ou'+'tAngle\x20=\x20i'+'nAngle\x20+\x20r'+'otSpeed\x20*\x20'+'uniform.de'+'lta;\x0a'),C3='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20rotated'+'QuadXY);\x0a',P3='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20sa'+'turate(gam'+'maCorrectI'+'nput(max(a'+',\x200.0)));\x0a'+'\x20\x20\x20\x20if\x20((r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+')\x20<\x200.0000'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20}\x20\x20'+'\x20\x20\x0a',M3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3f'+'(1.0),\x20rgb'+',\x20a);\x0a\x20\x20\x20\x20'+'if\x20((rgb.r'+'\x20+\x20rgb.g\x20+'+'\x20rgb.b)\x20>\x20'+'2.99)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a',D3='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20}\x0a',I3='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20\x20'+'\x20//\x20XYZ\x20=\x20'+'world\x20pos,'+'\x20W\x20=\x20life\x0a'+'attribute\x20'+'particle_v'+'ertexData2'+':\x20vec4f;\x20\x20'+'//\x20X\x20=\x20ang'+'le,\x20Y\x20=\x20sc'+'ale,\x20Z\x20=\x20a'+'lpha,\x20W\x20=\x20'+'velocity.x'+'\x0aattribute'+'\x20particle_'+'vertexData'+'3:\x20vec4f;\x20'+'\x20//\x20XYZ\x20=\x20'+'particle\x20l'+'ocal\x20pos,\x20'+'W\x20=\x20veloci'+'ty.y\x0aattri'+'bute\x20parti'+'cle_vertex'+'Data4:\x20f32'+';\x20\x20\x20\x20//\x20pa'+'rticle\x20id\x0a'+'\x0a//\x20type\x20d'+'epends\x20on\x20'+'useMesh\x20pr'+'operty.\x20St'+'art\x20with\x20X'+'\x20=\x20velocit'+'y.z,\x20Y\x20=\x20p'+'article\x20ID'+'\x20and\x20for\x20m'+'esh\x20partic'+'les\x20procee'+'ds\x20with\x20Z\x20'+'=\x20mesh\x20UV.'+'x,\x20W\x20=\x20mes'+'h\x20UV.y\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_ver'+'texData5:\x20'+'vec2f;\x0a#el'+'se\x0a\x20\x20\x20\x20att'+'ribute\x20par'+'ticle_vert'+'exData5:\x20v'+'ec4f;\x0a#end'+'if\x0a\x0aunifor'+'m\x20matrix_v'+'iewProject'+'ion:\x20mat4x'+'4f;\x0aunifor'+'m\x20matrix_m'+'odel:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20ma'+'trix_norma'+'l:\x20mat3x3f'+';\x0auniform\x20'+'matrix_vie'+'wInverse:\x20'+'mat4x4f;\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20lifet'+'ime:\x20f32;\x0a'+'uniform\x20st'+'retch:\x20f32'+';\x0auniform\x20'+'seed:\x20f32;'+'\x0auniform\x20w'+'rapBounds:'+'\x20vec3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0auni'+'form\x20faceT'+'angent:\x20ve'+'c3f;\x0aunifo'+'rm\x20faceBin'+'orm:\x20vec3f'+';\x0a\x0a#ifdef\x20'+('PARTICLE_G'+'PU\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex0:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x0Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex1'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex1S'+'ampler:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20var\x20inter'+'nalTex2:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex2Samp'+'ler:\x20sampl'+'er;\x0a#endif'+'\x0auniform\x20e'+'mitterPos:'+'\x20vec3f;\x0a\x0av'+'arying\x20tex'+'CoordsAlph'+'aLife:\x20vec'+'4f;\x0a\x0astruc'+'t\x20RotateRe'+'sult\x20{\x0a\x20\x20\x20'+'\x20rotatedVe'+'c:\x20vec2f,\x0a'+'\x20\x20\x20\x20matrix'+':\x20mat2x2f\x0a'+'}\x0a\x0afn\x20rota'+'teWithMatr'+'ix(quadXY:'+'\x20vec2f,\x20pR'+'otation:\x20f'+'32)\x20->\x20Rot'+'ateResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'c\x20=\x20cos(pR'+'otation);\x0a'+'\x20\x20\x20\x20let\x20s\x20'+'=\x20sin(pRot'+'ation);\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'mat2x2f(ve'+'c2f(c,\x20s),'+'\x20vec2f(-s,'+'\x20c));\x0a\x20\x20\x20\x20'+'return\x20Rot'+'ateResult('+'m\x20*\x20quadXY'+',\x20m);\x0a}\x0a\x0a\x0a'+'fn\x20billboa'+'rd(Instanc'+'eCoords:\x20v'+'ec3f,\x20quad'+'XY:\x20vec2f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20customF'+'ace(Instan'+'ceCoords:\x20'+'vec3f,\x20qua'+'dXY:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20pos\x20=\x20uni'+'form.faceT'+'angent\x20*\x20q'+'uadXY.x\x20+\x20'+'uniform.fa'+'ceBinorm\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20safeNor'+'malize(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20l\x20=\x20')+('length(v);'+'\x0a\x20\x20\x20\x20retur'+'n\x20select(v'+',\x20v\x20/\x20l,\x20l'+'\x20>\x201e-06);'+'\x0a}\x0a\x0a@verte'+'x\x0afn\x20verte'+'xMain(inpu'+'t:\x20VertexI'+'nput)\x20->\x20V'+'ertexOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'VertexOutp'+'ut;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20particl'+'ePos\x20=\x20inp'+'ut.particl'+'e_vertexDa'+'ta.xyz;\x0a\x20\x20'+'\x20\x20let\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20let\x20vertP'+'os\x20=\x20input'+'.particle_'+'vertexData'+'3.xyz;\x0a\x20\x20\x20'+'\x20var\x20inVel'+'\x20=\x20vec3f(i'+'nput.parti'+'cle_vertex'+'Data2.w,\x20i'+'nput.parti'+'cle_vertex'+'Data3.w,\x20i'+'nput.parti'+'cle_vertex'+'Data5.x);\x0a'+'\x0a\x20\x20\x20\x20let\x20i'+'d\x20=\x20floor('+'input.part'+'icle_verte'+'xData4);\x0a\x20'+'\x20\x20\x20let\x20rnd'+'Factor\x20=\x20f'+'ract(sin(i'+'d\x20+\x201.0\x20+\x20'+'uniform.se'+'ed));\x0a\x20\x20\x20\x20'+'let\x20rndFac'+'tor3\x20=\x20vec'+'3f(rndFact'+'or,\x20fract('+'rndFactor*'+'10.0),\x20fra'+'ct(rndFact'+'or*100.0))'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20mo'+'delRotatio'+'n\x20=\x20mat3x3'+'f(uniform.'+'matrix_mod'+'el[0].xyz,'+'\x20uniform.m'+'atrix_mode'+'l[1].xyz,\x20'+'uniform.ma'+'trix_model'+'[2].xyz);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'Vel\x20=\x20mode'+'lRotation\x20'+'*\x20inVel;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20let\x20ve'+'locityV\x20=\x20'+'safeNormal'+'ize((mat3x'+'3f(uniform'+'.matrix_vi'+'ew[0].xyz,'+'\x20uniform.m'+'atrix_view'+'[1].xyz,\x20u'+'niform.mat'+'rix_view[2'+'].xyz)\x20*\x20i'+'nVel).xy);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'quadXY\x20=\x20v'+'ertPos.xy;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20USE_MES'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.tex'+'CoordsAlph')+('aLife\x20=\x20ve'+'c4f(input.'+'particle_v'+'ertexData5'+'.zw,\x20input'+'.particle_'+'vertexData'+'2.z,\x20input'+'.particle_'+'vertexData'+'.w);\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'texCoordsA'+'lphaLife\x20='+'\x20vec4f(qua'+'dXY\x20*\x20-0.5'+'\x20+\x200.5,\x20in'+'put.partic'+'le_vertexD'+'ata2.z,\x20in'+'put.partic'+'le_vertexD'+'ata.w);\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20var\x20rot'+'Matrix:\x20ma'+'t2x2f;\x0a\x0a\x20\x20'+'\x20\x20var\x20inAn'+'gle\x20=\x20inpu'+'t.particle'+'_vertexDat'+'a2.x;\x0a\x20\x20\x20\x20'+'var\x20partic'+'lePosMoved'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20meshLoc'+'alPos\x20=\x20in'+'put.partic'+'le_vertexD'+'ata3.xyz;\x0a'),L3='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20inp'+'ut.particl'+'e_vertexDa'+'ta2.y\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20localP'+'os\x20=\x20local'+'Pos\x20+\x20part'+'iclePos;\x0a\x0a'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20vec4f('+'localPos,\x20'+'1.0);\x0a',R3='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20rotate'+'dQuadXY);\x0a',O3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(rg'+'b,\x20a);\x0a\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a}\x0a',F3='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20sca'+'le\x20*\x20unifo'+'rm.emitter'+'Scale;\x0a\x20\x20\x20'+'\x20localPos\x20'+'=\x20localPos'+'\x20+\x20particl'+'ePos;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20SC'+'REEN_SPACE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(localPo'+'s.x,\x20local'+'Pos.y,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_v'+'iewProject'+'ion\x20*\x20vec4'+'f(localPos'+'.xyz,\x201.0)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a',N3='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20no'+'rmal\x20*\x200.5'+'\x20+\x200.5;\x0a\x20\x20'+'\x20\x20var\x20posN'+'ormal:\x20vec'+'3f\x20=\x20-norm'+'al\x20*\x200.5\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'negNormal\x20'+'=\x20negNorma'+'l\x20*\x20negNor'+'mal;\x0a\x20\x20\x20\x20p'+'osNormal\x20='+'\x20posNormal'+'\x20*\x20posNorm'+'al;\x0a',k3='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20/'+'/\x20XYZ\x20=\x20pa'+'rticle\x20pos'+'ition,\x20W\x20='+'\x20particle\x20'+'ID\x20+\x20rando'+'m\x20factor\x0a#'+'if\x20defined'+'(USE_MESH)'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(USE'+'_MESH_UV)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_uv:'+'\x20vec2f;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'esh\x20UV\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20pa'+'rticle_uv:'+'\x20vec2f\x20=\x20v'+'ec2f(0.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0aunifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0aunif'+'orm\x20matrix'+'_normal:\x20m'+'at3x3f;\x0aun'+'iform\x20matr'+'ix_viewInv'+'erse:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20numPa'+'rticlesPot'+':\x20f32;\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0auni'+'form\x20stret'+'ch:\x20f32;\x0au'+'niform\x20wra'+'pBounds:\x20v'+'ec3f;\x0aunif'+'orm\x20emitte'+'rScale:\x20ve'+'c3f;\x0aunifo'+'rm\x20emitter'+'Pos:\x20vec3f'+';\x0auniform\x20'+'faceTangen'+'t:\x20vec3f;\x0a'+'uniform\x20fa'+'ceBinorm:\x20'+'vec3f;\x0auni'+'form\x20rate:'+'\x20f32;\x0aunif'+'orm\x20rateDi'+'v:\x20f32;\x0aun'+'iform\x20life'+'time:\x20f32;'+'\x0auniform\x20d'+'eltaRandom'+'nessStatic'+':\x20f32;\x0auni'+'form\x20scale'+'DivMult:\x20f'+'32;\x0aunifor'+'m\x20alphaDiv'+'Mult:\x20f32;'+'\x0auniform\x20s'+'eed:\x20f32;\x0a'+'uniform\x20de'+'lta:\x20f32;\x0a'+'\x0avar\x20parti'+('cleTexOUT:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20particle'+'TexOUTSamp'+'ler:\x20sampl'+'er;\x0avar\x20pa'+'rticleTexI'+'N:\x20texture'+'_2d<f32>;\x0a'+'var\x20partic'+'leTexINSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex0:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex1:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x1Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex2'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex2S'+'ampler:\x20sa'+'mpler;\x0a#en'+'dif\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0avarying'+'\x20texCoords'+'AlphaLife:'+'\x20vec4f;\x0a\x0av'+'ar<private'+'>\x20inPos:\x20v'+'ec3f;\x0avar<'+'private>\x20i'+'nVel:\x20vec3'+'f;\x0avar<pri'+'vate>\x20inAn'+'gle:\x20f32;\x0a'+'var<privat'+'e>\x20inShow:'+'\x20bool;\x0avar'+'<private>\x20'+'inLife:\x20f3'+'2;\x0a'),U3='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20ma'+'x(normal,\x20'+'vec3(0.0))'+';\x0a\x20\x20\x20\x20var\x20'+'posNormal:'+'\x20vec3f\x20=\x20m'+'ax(-normal'+',\x20vec3(0.0'+'));\x0a',B3='\x0a\x20\x20\x20\x20let\x20l'+'ight:\x20vec3'+'f\x20=\x20negNor'+'mal.x\x20*\x20un'+'iform.ligh'+'tCube[0]\x20+'+'\x20posNormal'+'.x\x20*\x20unifo'+'rm.lightCu'+'be[1]\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20negNormal'+'.y\x20*\x20unifo'+'rm.lightCu'+'be[2]\x20+\x20po'+'sNormal.y\x20'+'*\x20uniform.'+'lightCube['+'3]\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ne'+'gNormal.z\x20'+'*\x20uniform.'+'lightCube['+'4]\x20+\x20posNo'+'rmal.z\x20*\x20u'+'niform.lig'+'htCube[5];'+'\x0a\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20li'+'ght;\x0a',z3='\x0aparticleP'+'os\x20=\x20(unif'+'orm.matrix'+'_model\x20*\x20v'+'ec4f(parti'+'clePos,\x201.'+'0)).xyz;\x0a',V3='\x0avar\x20local'+'Pos\x20=\x20mesh'+'LocalPos;\x0a'+'let\x20rotRes'+'ultXY\x20=\x20ro'+'tateWithMa'+'trix(local'+'Pos.xy,\x20in'+'Angle);\x0alo'+'calPos\x20=\x20v'+'ec3f(rotRe'+'sultXY.rot'+'atedVec,\x20l'+'ocalPos.z)'+';\x0arotMatri'+'x\x20=\x20rotRes'+'ultXY.matr'+'ix;\x0a\x0alet\x20r'+'otResultYZ'+'\x20=\x20rotateW'+'ithMatrix('+'localPos.y'+'z,\x20inAngle'+');\x0alocalPo'+'s\x20=\x20vec3f('+'localPos.x'+',\x20rotResul'+'tYZ.rotate'+'dVec);\x0arot'+'Matrix\x20=\x20r'+'otResultYZ'+'.matrix;\x0a\x0a'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',G3='\x0aoutput.No'+'rmal\x20=\x20nor'+'malize(loc'+'alPos\x20+\x20un'+'iform.matr'+'ix_viewInv'+'erse[2].xy'+'z);\x0a',H3='\x0a\x20\x20\x20\x20let\x20s'+'ampledNorm'+'al:\x20vec4f\x20'+'=\x20textureS'+'ample(norm'+'alMap,\x20nor'+'malMapSamp'+'ler,\x20vec2f'+'(input.tex'+'CoordsAlph'+'aLife.x,\x201'+'.0\x20-\x20input'+'.texCoords'+'AlphaLife.'+'y));\x0a\x20\x20\x20\x20l'+'et\x20normalM'+'ap:\x20vec3f\x20'+'=\x20normaliz'+'e(sampledN'+'ormal.xyz\x20'+'*\x202.0\x20-\x201.'+'0);\x0a\x0a\x20\x20\x20\x20l'+'et\x20Particl'+'eMat\x20=\x20mat'+'3x3<f32>(P'+'articleMat'+'0,\x20Particl'+'eMat1,\x20Par'+'ticleMat2)'+';\x0a\x20\x20\x20\x20let\x20'+'normal:\x20ve'+'c3f\x20=\x20Part'+'icleMat\x20*\x20'+'normalMap;'+'\x0a',W3='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan2(veloc'+'ityV.x,\x20ve'+'locityV.y)'+';\x0a',$3='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',X3='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20Normal:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20varying\x20'+'ParticleMa'+'t0:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Particle'+'Mat2:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'Cube:\x20arra'+'y<vec3f,\x206'+'>;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vDe'+'pth:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sc'+'reenDepthP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22fogPS\x22\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'ap:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'apSampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'iclePS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'VERTEX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'ormal:\x20vec'+'3f\x20=\x20Norma'+'l;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20MAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_normal'+'MapPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20!=\x20NON'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20HAL'+'F_LAMBERT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_halflambe'+'rtPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_lambertPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+('#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_light'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20BLE'+'ND\x20==\x20NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendNorma'+'lPS\x22\x0a\x20\x20\x20\x20#'+'elif\x20BLEND'+'\x20==\x20ADDITI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendAddPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+'\x20MULTIPLIC'+'ATIVE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_blendMu'+'ltiplyPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_endPS'+'\x22\x0a'),q3='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20anim'+'TexTilesPa'+'rams:\x20vec2'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20a'+'nimTexPara'+'ms:\x20vec4f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20ani'+'mTexIndexP'+'arams:\x20vec'+'2f;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20Partic'+'leMat0:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20Pa'+'rticleMat2'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20==\x20V'+'ERTEX\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Normal:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vDepth:\x20f'+'32;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_in'+'itVS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20PACK8\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleIn'+'putRgba8PS'+'\x22\x20\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x20\x22parti'+'cleInputFl'+'oatPS\x22\x20\x20\x20\x20'+'//\x20why\x20are'+'\x20these\x20PS\x20'+'and\x20not\x20VS'+'?\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'screenDept'+'hPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'articleVS\x22'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x20//\x20PARTI'+'CLE_CPU\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SOFT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22screenDep'+'thPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_c'+'puVS\x22\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_l'+('ocalShiftV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20ANIM'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20A'+'NIMTEX_LOO'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimFram'+'eLoopVS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleAnimFra'+'meClampVS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimTexV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20wrap\x20is\x20'+'not\x20used\x20o'+'n\x20CPU,\x20it\x20'+'was\x20commen'+'ted\x20out.\x20T'+'ODO:\x20inves'+'tigate\x20why'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'WRAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_wrap'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ALIGN_TO'+'_MOTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_point'+'AlongVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20USE_MESH'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_me'+'shVS\x22\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CUSTOM_FA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_custom'+'FaceVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_billboa'+'rdVS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20VERTEX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_norma'+'lVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20NORMA'+'L\x20==\x20MAP\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_TBNV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STRE'+'TCH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_stretchVS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PART'+'ICLE_GPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_endV')+('S\x22\x0a\x20\x20\x20\x20#el'+'se\x20//\x20PART'+'ICLE_CPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_cpu_'+'endVS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softVS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),j3='\x0a\x20\x20\x20\x20var\x20d'+'epth:\x20f32\x20'+'=\x20getLinea'+'rScreenDep'+'thFrag();\x0a'+'\x20\x20\x20\x20var\x20pa'+'rticleDept'+'h:\x20f32\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20var\x20depth'+'Diff:\x20f32\x20'+'=\x20saturate'+'(abs(parti'+'cleDepth\x20-'+'\x20depth)\x20*\x20'+'uniform.so'+'ftening);\x0a'+'\x20\x20\x20\x20a\x20=\x20a\x20'+'*\x20depthDif'+'f;\x0a',Y3='\x0a\x20\x20\x20\x20outpu'+'t.vDepth\x20='+'\x20getLinear'+'Depth(loca'+'lPos);\x0a',K3='\x0a\x20\x20\x20\x20let\x20m'+'oveDir:\x20ve'+'c3f\x20=\x20inVe'+'l\x20*\x20unifor'+'m.stretch;'+'\x0a\x20\x20\x20\x20var\x20p'+'osPrev:\x20ve'+'c3f\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20=\x20posPrev'+'\x20+\x20particl'+'ePosMoved;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'viewRotati'+'onTemp:\x20ma'+'t3x3f\x20=\x20ma'+'t3x3f(unif'+'orm.matrix'+'_view[0].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[1].xyz'+',\x20uniform.'+'matrix_vie'+'w[2].xyz);'+'\x0a\x20\x20\x20\x20let\x20c'+'enterToVer'+'texV:\x20vec2'+'f\x20=\x20normal'+'ize((viewR'+'otationTem'+'p\x20*\x20localP'+'os).xy);\x0a\x0a'+'\x20\x20\x20\x20let\x20in'+'terpolatio'+'n:\x20f32\x20=\x20d'+'ot(-veloci'+'tyV,\x20cente'+'rToVertexV'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x0a\x20\x20\x20\x20'+'particlePo'+'s\x20=\x20mix(pa'+'rticlePos,'+'\x20posPrev,\x20'+'interpolat'+'ion);\x0a',Z3='\x0a\x20\x20\x20\x20let\x20r'+'ot3\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(r'+'otMatrix[0'+'][0],\x20rotM'+'atrix[1][0'+'],\x200.0),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(rotMatr'+'ix[0][1],\x20'+'rotMatrix['+'1][1],\x200.0'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3f(0.0'+',\x200.0,\x201.0'+')\x0a\x20\x20\x20\x20);\x0a\x0a'+'\x20\x20\x20\x20let\x20vi'+'ewBasis\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20-un'+'iform.matr'+'ix_viewInv'+'erse[0].xy'+'z,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20-uniform.'+'matrix_vie'+'wInverse[1'+'].xyz,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.matrix_'+'viewInvers'+'e[2].xyz\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20tempM'+'at\x20=\x20viewB'+'asis\x20*\x20rot'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20WGSL\x20does'+'\x20not\x20suppo'+'rt\x20matrix\x20'+'varyings,\x20'+'decompose\x20'+'it\x20to\x20vec3'+'s\x0a\x20\x20\x20\x20outp'+'ut.Particl'+'eMat0\x20=\x20te'+'mpMat[0];\x0a'+'\x20\x20\x20\x20output'+'.ParticleM'+'at1\x20=\x20temp'+'Mat[1];\x0a\x20\x20'+'\x20\x20output.P'+'articleMat'+'2\x20=\x20tempMa'+'t[2];\x0a',Q3='\x0a\x20\x20\x20\x20let\x20o'+'rigParticl'+'ePos:\x20vec3'+'f\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20particleP'+'os\x20=\x20parti'+'clePos\x20-\x20u'+'niform.mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20=\x20(par'+'ticlePos\x20%'+'\x20uniform.w'+'rapBounds)'+'\x20-\x20uniform'+'.wrapBound'+'s\x20*\x200.5;\x0a\x20'+'\x20\x20\x20particl'+'ePos\x20=\x20par'+'ticlePos\x20+'+'\x20uniform.m'+'atrix_mode'+'l[3].xyz;\x0a'+'\x20\x20\x20\x20partic'+'lePosMoved'+'\x20=\x20particl'+'ePos\x20-\x20ori'+'gParticleP'+'os;\x0a',J3={'particlePS':h3,'particleVS':d3,'particleAnimFrameClampVS':f3,'particleAnimFrameLoopVS':u3,'particleAnimTexVS':p3,'particleInputFloatPS':m3,'particleInputRgba8PS':_3,'particleOutputFloatPS':g3,'particleOutputRgba8PS':S3,'particleUpdaterAABBPS':y3,'particleUpdaterEndPS':v3,'particleUpdaterInitPS':x3,'particleUpdaterNoRespawnPS':T3,'particleUpdaterOnStopPS':w3,'particleUpdaterRespawnPS':E3,'particleUpdaterSpherePS':b3,'particleUpdaterStartPS':A3,'particle_billboardVS':C3,'particle_blendAddPS':P3,'particle_blendMultiplyPS':M3,'particle_blendNormalPS':D3,'particle_cpuVS':I3,'particle_cpu_endVS':L3,'particle_customFaceVS':R3,'particle_endPS':O3,'particle_endVS':F3,'particle_halflambertPS':N3,'particle_initVS':k3,'particle_lambertPS':U3,'particle_lightingPS':B3,'particle_localShiftVS':z3,'particle_meshVS':V3,'particle_normalVS':G3,'particle_normalMapPS':H3,'particle_pointAlongVS':W3,'particle_simulationPS':$3,'particle_shaderPS':X3,'particle_shaderVS':q3,'particle_softPS':j3,'particle_softVS':Y3,'particle_stretchVS':K3,'particle_TBNVS':Z3,'particle_wrapVS':Q3},eO=['enabled','autoPlay','numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','loop','preWarm','lighting','halfLamber'+'t','intensity','depthWrite','noFog','depthSofte'+'ning','sort','blendType','stretch','alignToMot'+'ion','emitterSha'+'pe','emitterExt'+'ents','emitterExt'+'entsInner','emitterRad'+'ius','emitterRad'+'iusInner','initialVel'+'ocity','wrap','wrapBounds','localSpace','screenSpac'+'e','colorMapAs'+'set','normalMapA'+'sset','mesh','meshAsset','renderAsse'+'t','orientatio'+'n','particleNo'+'rmal','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','velocityGr'+'aph','velocityGr'+'aph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2','scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','colorMap','normalMap','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animSpeed','animLoop','layers'];class tO extends ct{constructor(_0x35e7f3){super(_0x35e7f3),this['id']='particlesy'+'stem',this['ComponentT'+'ype']=SR,this['DataType']=yR,this['schema']=eO,this['propertyTy'+'pes']={'emitterExtents':'vec3','emitterExtentsInner':'vec3','particleNormal':'vec3','wrapBounds':'vec3','localVelocityGraph':'curveset','localVelocityGraph2':'curveset','velocityGraph':'curveset','velocityGraph2':'curveset','colorGraph':'curveset','colorGraph2':'curveset','alphaGraph':'curve','alphaGraph2':'curve','rotationSpeedGraph':'curve','rotationSpeedGraph2':'curve','radialSpeedGraph':'curve','radialSpeedGraph2':'curve','scaleGraph':'curve','scaleGraph2':'curve'},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this),Ce['get'](_0x35e7f3['graphicsDe'+'vice'],Fe)['add'](c3),Ce['get'](_0x35e7f3['graphicsDe'+'vice'],it)['add'](J3);}['initialize'+'ComponentD'+'ata'](_0x227da2,_0x1fb218,_0x58d0b7){const _0x1d6de3={};_0x58d0b7=[];const _0x460950=this['propertyTy'+'pes'];(_0x1fb218['mesh']instanceof pe||typeof _0x1fb218['mesh']=='number')&&(_0x1fb218['meshAsset']=_0x1fb218['mesh'],delete _0x1fb218['mesh']);for(const _0x4014f4 in _0x1fb218){if(_0x1fb218['hasOwnProp'+'erty'](_0x4014f4)&&(_0x58d0b7['push'](_0x4014f4),_0x1d6de3[_0x4014f4]=_0x1fb218[_0x4014f4]),_0x460950[_0x4014f4]==='vec3')Array['isArray'](_0x1d6de3[_0x4014f4])&&(_0x1d6de3[_0x4014f4]=new D(_0x1d6de3[_0x4014f4][0xe8*-0x1+0xa2f+-0x947],_0x1d6de3[_0x4014f4][-0x117*-0x19+-0x18fd*0x1+-0x1*0x241],_0x1d6de3[_0x4014f4][0x24cf*-0x1+0x18e*0xc+0x1229]));else{if(_0x460950[_0x4014f4]==='curve'){if(!(_0x1d6de3[_0x4014f4]instanceof Xs)){const _0x308cd5=_0x1d6de3[_0x4014f4]['type'];_0x1d6de3[_0x4014f4]=new Xs(_0x1d6de3[_0x4014f4]['keys']),_0x1d6de3[_0x4014f4]['type']=_0x308cd5;}}else{if(_0x460950[_0x4014f4]==='curveset'&&!(_0x1d6de3[_0x4014f4]instanceof ta)){const _0x2d192e=_0x1d6de3[_0x4014f4]['type'];_0x1d6de3[_0x4014f4]=new ta(_0x1d6de3[_0x4014f4]['keys']),_0x1d6de3[_0x4014f4]['type']=_0x2d192e;}}}_0x1d6de3['layers']&&Array['isArray'](_0x1d6de3['layers'])&&(_0x1d6de3['layers']=_0x1d6de3['layers']['slice'](-0x122*-0xd+0x221e+-0x30d8));}super['initialize'+'ComponentD'+'ata'](_0x227da2,_0x1d6de3,_0x58d0b7);}['cloneCompo'+'nent'](_0x5b6c07,_0x19d602){const _0x2bdc2c=_0x5b6c07['particlesy'+'stem']['data'],_0x332960=this['schema'],_0x35b2f2={};for(let _0x5976ce=-0x1d2b+0x1ddd+0x59*-0x2,_0x8cbd89=_0x332960['length'];_0x5976ce<_0x8cbd89;_0x5976ce++){const _0x12e324=_0x332960[_0x5976ce];let _0x1e0f9a=_0x2bdc2c[_0x12e324];_0x1e0f9a instanceof D||_0x1e0f9a instanceof Xs||_0x1e0f9a instanceof ta?(_0x1e0f9a=_0x1e0f9a['clone'](),_0x35b2f2[_0x12e324]=_0x1e0f9a):_0x12e324==='layers'?_0x35b2f2['layers']=_0x2bdc2c['layers']['slice'](0x6a3+0x50f*-0x1+-0x4*0x65):_0x1e0f9a!=null&&(_0x35b2f2[_0x12e324]=_0x1e0f9a);}return this['addCompone'+'nt'](_0x19d602,_0x35b2f2);}['onUpdate'](_0x1fd3c1){const _0x292a2c=this['store'],_0x44455e=this['app']['stats']['particles'],_0x545a68=this['app']['scene']['layers'];for(let _0x5bc446=-0x452*-0x1+-0x2333+0x1ee1;_0x5bc446<_0x545a68['layerList']['length'];_0x5bc446++)_0x545a68['layerList'][_0x5bc446]['requiresLi'+'ghtCube']=!(-0x1031+-0x3a0+0x13d2);for(const _0x390501 in _0x292a2c)if(_0x292a2c['hasOwnProp'+'erty'](_0x390501)){const _0x46067b=_0x292a2c[_0x390501],_0x37bdc1=_0x46067b['entity'],_0x315473=_0x46067b['data'];if(_0x315473['enabled']&&_0x37bdc1['enabled']){const _0x113b9d=_0x37bdc1['particlesy'+'stem']['emitter'];if(!(_0x113b9d!=null&&_0x113b9d['meshInstan'+'ce']['visible']))continue;if(_0x113b9d['lighting']){const _0x3d5511=_0x315473['layers'];for(let _0x302d74=-0x165b+-0x102a*0x2+-0x1*-0x36af;_0x302d74<_0x3d5511['length'];_0x302d74++){const _0x2039f7=_0x545a68['getLayerBy'+'Id'](_0x3d5511[_0x302d74]);_0x2039f7&&(_0x2039f7['requiresLi'+'ghtCube']=!(-0x2*0x251+0xbfe+-0x75c));}}if(!_0x315473['paused']){let _0x2f3892=-0xaf2+-0x5*0x449+0x1*0x205f;if(_0x113b9d['simTime']+=_0x1fd3c1,_0x113b9d['simTime']>=_0x113b9d['fixedTimeS'+'tep']&&(_0x2f3892=Math['floor'](_0x113b9d['simTime']/_0x113b9d['fixedTimeS'+'tep']),_0x113b9d['simTime']-=_0x2f3892*_0x113b9d['fixedTimeS'+'tep']),_0x2f3892){_0x2f3892=Math['min'](_0x2f3892,_0x113b9d['maxSubStep'+'s']);for(let _0x5c3580=0x1*-0xf4d+-0x370+0x12bd;_0x5c3580<_0x2f3892;_0x5c3580++)_0x113b9d['addTime'](_0x113b9d['fixedTimeS'+'tep'],!(-0x2*0xc29+-0x1f2d*0x1+-0x40*-0xde));_0x44455e['_updatesPe'+'rFrame']+=_0x2f3892,_0x44455e['_frameTime']+=_0x113b9d['_addTimeTi'+'me'],_0x113b9d['_addTimeTi'+'me']=0xa0*-0x19+-0x43a*0x6+0x28fc;}_0x113b9d['finishFram'+'e']();}}}}['onBeforeRe'+'move'](_0x3ecfef,_0x31a4ce){_0x31a4ce['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class sO extends td{constructor(_0x14bc5e,_0x479cdf){super(),this['skin']=_0x14bc5e,this['skinInstan'+'ce']=_0x479cdf;}}const Vs=class Vs{static['logCachedS'+'kinInstanc'+'es'](){console['log']('CachedSkin'+'Instances'),Vs['_skinInsta'+'nceCache']['forEach']((_0x276f42,_0x4b362f)=>{console['log'](_0x4b362f['name']+':\x20Array('+_0x276f42['length']+')');for(let _0x4f6f92=-0x1eeb+-0x1a17*0x1+-0x1*-0x3902;_0x4f6f92<_0x276f42['length'];_0x4f6f92++)console['log']('\x20\x20'+_0x4f6f92+(':\x20RefCount'+'\x20')+_0x276f42[_0x4f6f92]['refCount']);});}static['createCach'+'edSkinInst'+'ance'](_0x5bf0ab,_0x733e93,_0x3eb1bb){let _0x3b20e9=Vs['getCachedS'+'kinInstanc'+'e'](_0x5bf0ab,_0x733e93);return _0x3b20e9||(_0x3b20e9=new xl(_0x5bf0ab),_0x3b20e9['resolve'](_0x733e93,_0x3eb1bb),Vs['addCachedS'+'kinInstanc'+'e'](_0x5bf0ab,_0x733e93,_0x3b20e9)),_0x3b20e9;}static['getCachedS'+'kinInstanc'+'e'](_0x28d449,_0x48b46a){let _0x3491a6=null;const _0x3f65f9=Vs['_skinInsta'+'nceCache']['get'](_0x48b46a);if(_0x3f65f9){const _0x45fa0c=_0x3f65f9['find'](_0x721f3=>_0x721f3['skin']===_0x28d449);_0x45fa0c&&(_0x45fa0c['incRefCoun'+'t'](),_0x3491a6=_0x45fa0c['skinInstan'+'ce']);}return _0x3491a6;}static['addCachedS'+'kinInstanc'+'e'](_0x48563e,_0x280597,_0x156435){let _0x4c898e=Vs['_skinInsta'+'nceCache']['get'](_0x280597);_0x4c898e||(_0x4c898e=[],Vs['_skinInsta'+'nceCache']['set'](_0x280597,_0x4c898e));let _0x59ac2c=_0x4c898e['find'](_0xcff482=>_0xcff482['skin']===_0x48563e);_0x59ac2c||(_0x59ac2c=new sO(_0x48563e,_0x156435),_0x4c898e['push'](_0x59ac2c)),_0x59ac2c['incRefCoun'+'t']();}static['removeCach'+'edSkinInst'+'ance'](_0xe280e5){if(_0xe280e5){const _0x5c8d9b=_0xe280e5['rootBone'];if(_0x5c8d9b){const _0x198d65=Vs['_skinInsta'+'nceCache']['get'](_0x5c8d9b);if(_0x198d65){const _0x2b2140=_0x198d65['findIndex'](_0x19be35=>_0x19be35['skinInstan'+'ce']===_0xe280e5);if(_0x2b2140>=-0x13*0x130+-0x107d*0x1+0x270d*0x1){const _0x2de90f=_0x198d65[_0x2b2140];_0x2de90f['decRefCoun'+'t'](),_0x2de90f['refCount']===-0x226e+-0x4*-0x4d6+-0x1*-0xf16&&(_0x198d65['splice'](_0x2b2140,-0x21de+-0x1*-0x530+0x1caf),_0x198d65['length']||Vs['_skinInsta'+'nceCache']['delete'](_0x5c8d9b),_0xe280e5&&(_0xe280e5['destroy'](),_0x2de90f['skinInstan'+'ce']=null));}}}}}};h(Vs,'_skinInsta'+'nceCache',new Map());let il=Vs;class rl{constructor(_0x1e32a8,_0x202bc2,_0x146b60,_0x187cd1,_0xbea543){h(this,'_evtLoadBy'+'Id',null),h(this,'_evtUnload'+'ById',null),h(this,'_evtAddByI'+'d',null),h(this,'_evtRemove'+'ById',null),h(this,'_evtLoadBy'+'Url',null),h(this,'_evtAddByU'+'rl',null),h(this,'_evtRemove'+'ByUrl',null),(this['propertyNa'+'me']=_0x1e32a8,this['parent']=_0x202bc2,this['_scope']=_0xbea543,this['_registry']=_0x146b60,this['id']=null,this['url']=null,this['asset']=null,this['_onAssetLo'+'ad']=_0x187cd1['load'],this['_onAssetAd'+'d']=_0x187cd1['add'],this['_onAssetRe'+'move']=_0x187cd1['remove'],this['_onAssetUn'+'load']=_0x187cd1['unload']);}set['id'](_0x571726){if(this['url'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_id']=_0x571726,this['asset']=this['_registry']['get'](this['_id']),this['_bind']();}get['id'](){return this['_id'];}set['url'](_0x4f9509){if(this['id'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_url']=_0x4f9509,this['asset']=this['_registry']['getByUrl'](this['_url']),this['_bind']();}get['url'](){return this['_url'];}['_bind'](){this['id']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Id']=this['_registry']['on']('load:'+this['id'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByI'+'d']=this['_registry']['once']('add:'+this['id'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ById']=this['_registry']['on']('remove:'+this['id'],this['_onRemove'],this)),this['_onAssetUn'+'load']&&(this['_evtUnload'+'ById']=this['_registry']['on']('unload:'+this['id'],this['_onUnload'],this))),this['url']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Url']=this['_registry']['on']('load:url:'+this['url'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByU'+'rl']=this['_registry']['once']('add:url:'+this['url'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ByUrl']=this['_registry']['on']('remove:url'+':'+this['url'],this['_onRemove'],this)));}['_unbind'](){var _0xc36a23,_0x5d7650,_0x448d3a,_0x5cd323,_0x500ccf,_0x5bcaac,_0x46114c;this['id']&&((_0xc36a23=this['_evtLoadBy'+'Id'])==null||_0xc36a23['off'](),this['_evtLoadBy'+'Id']=null,(_0x5d7650=this['_evtAddByI'+'d'])==null||_0x5d7650['off'](),this['_evtAddByI'+'d']=null,(_0x448d3a=this['_evtRemove'+'ById'])==null||_0x448d3a['off'](),this['_evtRemove'+'ById']=null,(_0x5cd323=this['_evtUnload'+'ById'])==null||_0x5cd323['off'](),this['_evtUnload'+'ById']=null),this['url']&&((_0x500ccf=this['_evtLoadBy'+'Url'])==null||_0x500ccf['off'](),this['_evtLoadBy'+'Url']=null,(_0x5bcaac=this['_evtAddByU'+'rl'])==null||_0x5bcaac['off'](),this['_evtAddByU'+'rl']=null,(_0x46114c=this['_evtRemove'+'ByUrl'])==null||_0x46114c['off'](),this['_evtRemove'+'ByUrl']=null);}['_onLoad'](_0x5259dd){this['_onAssetLo'+'ad']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x5259dd);}['_onAdd'](_0x1eb6c4){this['asset']=_0x1eb6c4,this['_onAssetAd'+'d']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x1eb6c4);}['_onRemove'](_0x55805c){this['_onAssetRe'+'move']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x55805c),this['asset']=null;}['_onUnload'](_0x476b33){this['_onAssetUn'+'load']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x476b33);}}class Ev extends we{constructor(_0x224f97,_0x281e72){super(_0x224f97,_0x281e72),h(this,'_type','asset'),h(this,'_castShado'+'ws',!(-0x1e33+0x1999*-0x1+-0x1be6*-0x2)),h(this,'_receiveSh'+'adows',!(0x1a0d+-0x29d*-0xb+-0x36cc)),h(this,'_castShado'+'wsLightmap',!(0xee1*0x1+0x4fc+-0x13dd)),h(this,'_lightmapp'+'ed',!(-0x4*-0x3ce+0x1ae+-0x10e5)),h(this,'_lightmapS'+'izeMultipl'+'ier',-0x4*-0x89+0xd0e+-0x1*0xf31),h(this,'isStatic',!(-0x21*-0x8b+-0x1882*-0x1+-0x2a6c)),h(this,'_batchGrou'+'pId',-(-0x1*-0x1ba7+0x14ac+0x2*-0x1829)),h(this,'_layers',[Ji]),h(this,'_renderSty'+'le',nn),h(this,'_meshInsta'+'nces',[]),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_assetRefe'+'rence'),h(this,'_materialR'+'eferences',[]),h(this,'_material'),h(this,'_rootBone',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['_assetRefe'+'rence']=new rl('asset',this,_0x224f97['app']['assets'],{'add':this['_onRenderA'+'ssetAdded'],'load':this['_onRenderA'+'ssetLoad'],'remove':this['_onRenderA'+'ssetRemove'],'unload':this['_onRenderA'+'ssetUnload']},this),this['_material']=_0x224f97['defaultMat'+'erial'],_0x281e72['on']('remove',this['onRemoveCh'+'ild'],this),_0x281e72['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x281e72['on']('insert',this['onInsertCh'+'ild'],this),_0x281e72['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['renderStyl'+'e'](_0x14360d){this['_renderSty'+'le']!==_0x14360d&&(this['_renderSty'+'le']=_0x14360d,He['_prepareRe'+'nderStyleF'+'orArray'](this['_meshInsta'+'nces'],_0x14360d));}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['customAabb'](_0x474021){this['_customAab'+'b']=_0x474021;const _0x456a8a=this['_meshInsta'+'nces'];if(_0x456a8a){for(let _0xbdfbd5=-0x1*0x5c3+-0x22c9+-0x3*-0xd84;_0xbdfbd5<_0x456a8a['length'];_0xbdfbd5++)_0x456a8a[_0xbdfbd5]['setCustomA'+'abb'](this['_customAab'+'b']);}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x362327){if(this['_type']!==_0x362327&&(this['_area']=null,this['_type']=_0x362327,this['destroyMes'+'hInstances'](),_0x362327!=='asset')){let _0x2fe694=this['_material'];(!_0x2fe694||_0x2fe694===this['system']['defaultMat'+'erial'])&&(_0x2fe694=this['_materialR'+'eferences'][0x1a67+0x23a1*0x1+-0xa*0x634]&&this['_materialR'+'eferences'][0x1e89+-0x420+-0x1a69]['asset']&&this['_materialR'+'eferences'][0xd*0x97+0xb21+-0x12cc]['asset']['resource']);const _0x4b260d=Tv(this['system']['app']['graphicsDe'+'vice'],_0x362327);this['_area']=_0x4b260d['area'],this['meshInstan'+'ces']=[new He(_0x4b260d['mesh'],_0x2fe694||this['system']['defaultMat'+'erial'],this['entity'])];}}get['type'](){return this['_type'];}set['meshInstan'+'ces'](_0x3e97e8){if(w['assert'](Array['isArray'](_0x3e97e8),'MeshInstan'+'ces\x20set\x20to'+'\x20a\x20Render\x20'+'component\x20'+'must\x20be\x20an'+'\x20array.'),this['destroyMes'+'hInstances'](),this['_meshInsta'+'nces']=_0x3e97e8,this['_meshInsta'+'nces']){const _0x4d0845=this['_meshInsta'+'nces'];for(let _0xe6a773=0xadc+0x860+-0x133c;_0xe6a773<_0x4d0845['length'];_0xe6a773++)_0x4d0845[_0xe6a773]['node']||(_0x4d0845[_0xe6a773]['node']=this['entity']),_0x4d0845[_0xe6a773]['castShadow']=this['_castShado'+'ws'],_0x4d0845[_0xe6a773]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x4d0845[_0xe6a773]['renderStyl'+'e']=this['_renderSty'+'le'],_0x4d0845[_0xe6a773]['setLightma'+'pped'](this['_lightmapp'+'ed']),_0x4d0845[_0xe6a773]['setCustomA'+'abb'](this['_customAab'+'b']);this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['meshInstan'+'ces'](){return this['_meshInsta'+'nces'];}set['lightmappe'+'d'](_0x47927a){if(_0x47927a!==this['_lightmapp'+'ed']){this['_lightmapp'+'ed']=_0x47927a;const _0x55f0f5=this['_meshInsta'+'nces'];if(_0x55f0f5){for(let _0x2d831c=-0x23dd+-0x285+0x242*0x11;_0x2d831c<_0x55f0f5['length'];_0x2d831c++)_0x55f0f5[_0x2d831c]['setLightma'+'pped'](_0x47927a);}}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x468379){if(this['_castShado'+'ws']!==_0x468379){const _0x563120=this['_meshInsta'+'nces'];if(_0x563120){const _0x51efcb=this['layers'],_0x135061=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x468379)for(let _0x33452f=0x1d3*0x1+0x2*-0xcdf+0x7f9*0x3;_0x33452f<_0x51efcb['length'];_0x33452f++){const _0x8247f4=_0x135061['layers']['getLayerBy'+'Id'](this['layers'][_0x33452f]);_0x8247f4&&_0x8247f4['removeShad'+'owCasters'](_0x563120);}for(let _0x5600eb=0x1502+-0x1e12+0x244*0x4;_0x5600eb<_0x563120['length'];_0x5600eb++)_0x563120[_0x5600eb]['castShadow']=_0x468379;if(!this['_castShado'+'ws']&&_0x468379)for(let _0x3f478c=0x1*-0x1c0a+-0x3*-0x852+0x314;_0x3f478c<_0x51efcb['length'];_0x3f478c++){const _0x59fa60=_0x135061['layers']['getLayerBy'+'Id'](_0x51efcb[_0x3f478c]);_0x59fa60&&_0x59fa60['addShadowC'+'asters'](_0x563120);}}this['_castShado'+'ws']=_0x468379;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x9666b2){if(this['_receiveSh'+'adows']!==_0x9666b2){this['_receiveSh'+'adows']=_0x9666b2;const _0x4ccb32=this['_meshInsta'+'nces'];if(_0x4ccb32){for(let _0x228729=-0x12a1*0x1+-0x126a+0x250b;_0x228729<_0x4ccb32['length'];_0x228729++)_0x4ccb32[_0x228729]['receiveSha'+'dow']=_0x9666b2;}}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x3d6c5c){this['_castShado'+'wsLightmap']=_0x3d6c5c;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x315094){this['_lightmapS'+'izeMultipl'+'ier']=_0x315094;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x38c50a){const _0x660cfe=this['system']['app']['scene']['layers'];let _0x50dc0d;if(this['_meshInsta'+'nces']){for(let _0x2e4bcb=-0x18d*0xb+-0x2707+0x3816;_0x2e4bcb<this['_layers']['length'];_0x2e4bcb++)_0x50dc0d=_0x660cfe['getLayerBy'+'Id'](this['_layers'][_0x2e4bcb]),_0x50dc0d&&_0x50dc0d['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}this['_layers']['length']=0x1165*0x1+0x3c5*0x3+-0x1cb4;for(let _0x206589=0x70e+-0xb*0x2c2+0x1748;_0x206589<_0x38c50a['length'];_0x206589++)this['_layers'][_0x206589]=_0x38c50a[_0x206589];if(!(!this['enabled']||!this['entity']['enabled']||!this['_meshInsta'+'nces'])){for(let _0x3ff623=-0x2*-0xe42+0x8c7+-0x1*0x254b;_0x3ff623<this['_layers']['length'];_0x3ff623++)_0x50dc0d=_0x660cfe['getLayerBy'+'Id'](this['_layers'][_0x3ff623]),_0x50dc0d&&_0x50dc0d['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x3b7a3b){var _0x1400d6,_0xe9c014;this['_batchGrou'+'pId']!==_0x3b7a3b&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0xe*0x172+-0xa2*0x12+-0x8*0x11b&&((_0x1400d6=this['system']['app']['batcher'])==null||_0x1400d6['remove'](St['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x3b7a3b>=-0x6*-0x331+-0x15a5+0x27f&&((_0xe9c014=this['system']['app']['batcher'])==null||_0xe9c014['insert'](St['RENDER'],_0x3b7a3b,this['entity'])),_0x3b7a3b<0x1*-0x1dc1+-0xa51+0x2812&&this['_batchGrou'+'pId']>=0xc3a*-0x2+0x3*-0x6b1+-0x1*-0x2c87&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s'](),this['_batchGrou'+'pId']=_0x3b7a3b);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['material'](_0x2a3683){if(this['_material']!==_0x2a3683&&(this['_material']=_0x2a3683,this['_meshInsta'+'nces']&&this['_type']!=='asset')){for(let _0x4331e3=-0x129f+-0x1ac+0x144b;_0x4331e3<this['_meshInsta'+'nces']['length'];_0x4331e3++)this['_meshInsta'+'nces'][_0x4331e3]['material']=_0x2a3683;}}get['material'](){return this['_material'];}set['materialAs'+'sets'](_0x488eda=[]){if(this['_materialR'+'eferences']['length']>_0x488eda['length']){for(let _0x1a2f5d=_0x488eda['length'];_0x1a2f5d<this['_materialR'+'eferences']['length'];_0x1a2f5d++)this['_materialR'+'eferences'][_0x1a2f5d]['id']=null;this['_materialR'+'eferences']['length']=_0x488eda['length'];}for(let _0x3389e2=0x1dcf+-0xd*-0xdd+-0x2908;_0x3389e2<_0x488eda['length'];_0x3389e2++)if(this['_materialR'+'eferences'][_0x3389e2]||this['_materialR'+'eferences']['push'](new rl(_0x3389e2,this,this['system']['app']['assets'],{'add':this['_onMateria'+'lAdded'],'load':this['_onMateria'+'lLoad'],'remove':this['_onMateria'+'lRemove'],'unload':this['_onMateria'+'lUnload']},this)),_0x488eda[_0x3389e2]){const _0x33e01d=_0x488eda[_0x3389e2]instanceof pe?_0x488eda[_0x3389e2]['id']:_0x488eda[_0x3389e2];this['_materialR'+'eferences'][_0x3389e2]['id']!==_0x33e01d&&(this['_materialR'+'eferences'][_0x3389e2]['id']=_0x33e01d),this['_materialR'+'eferences'][_0x3389e2]['asset']&&this['_onMateria'+'lAdded'](_0x3389e2,this,this['_materialR'+'eferences'][_0x3389e2]['asset']);}else this['_materialR'+'eferences'][_0x3389e2]['id']=null,this['_meshInsta'+'nces'][_0x3389e2]&&(this['_meshInsta'+'nces'][_0x3389e2]['material']=this['system']['defaultMat'+'erial']);}get['materialAs'+'sets'](){return this['_materialR'+'eferences']['map'](_0x116f84=>_0x116f84['id']);}set['asset'](_0x1e9f80){const _0x52cade=_0x1e9f80 instanceof pe?_0x1e9f80['id']:_0x1e9f80;this['_assetRefe'+'rence']['id']!==_0x52cade&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onRenderA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x52cade,this['_assetRefe'+'rence']['asset']&&this['_onRenderA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['assignAsse'+'t'](_0x3c64e0){const _0x47e5aa=_0x3c64e0 instanceof pe?_0x3c64e0['id']:_0x3c64e0;this['_assetRefe'+'rence']['id']=_0x47e5aa;}set['rootBone'](_0x319814){if(this['_rootBone']!==_0x319814){const _0x1f8cc9=typeof _0x319814=='string';if(this['_rootBone']&&_0x1f8cc9&&this['_rootBone']['getGuid']()===_0x319814)return;this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x319814 instanceof Ie?this['_rootBone']=_0x319814:_0x1f8cc9?(this['_rootBone']=this['system']['app']['getEntityF'+'romIndex'](_0x319814)||null,this['_rootBone']||w['warn']('Failed\x20to\x20'+'find\x20rootB'+'one\x20Entity'+'\x20by\x20GUID')):this['_rootBone']=null,this['_rootBone']&&this['_cloneSkin'+'Instances']();}}get['rootBone'](){return this['_rootBone'];}['destroyMes'+'hInstances'](){const _0x3f0043=this['_meshInsta'+'nces'];if(_0x3f0043){this['removeFrom'+'Layers'](),this['_clearSkin'+'Instances']();for(let _0x11ed93=-0x136*-0x4+0x2ad*0x3+0x293*-0x5;_0x11ed93<_0x3f0043['length'];_0x11ed93++)_0x3f0043[_0x11ed93]['destroy']();this['_meshInsta'+'nces']['length']=-0x1cb+-0x1*-0x49a+-0x1*0x2cf;}}['addToLayer'+'s'](){const _0xd4db8e=this['system']['app']['scene']['layers'];for(let _0x4f517b=0x2e*0xcf+0x1607+0x1*-0x3b39;_0x4f517b<this['_layers']['length'];_0x4f517b++){const _0x47a230=_0xd4db8e['getLayerBy'+'Id'](this['_layers'][_0x4f517b]);_0x47a230&&_0x47a230['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}['removeFrom'+'Layers'](){if(this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']){const _0x4561f3=this['system']['app']['scene']['layers'];for(let _0xfcd41c=0x21a4+-0x2*0x593+-0x167e;_0xfcd41c<this['_layers']['length'];_0xfcd41c++){const _0x2ebd48=_0x4561f3['getLayerBy'+'Id'](this['_layers'][_0xfcd41c]);_0x2ebd48&&_0x2ebd48['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_meshInsta'+'nces']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyMes'+'hInstances'](),this['asset']=null,this['materialAs'+'set']=null,this['_assetRefe'+'rence']['id']=null;for(let _0x473427=0x2*-0xf4f+0x30f*-0x1+-0xe9*-0x25;_0x473427<this['_materialR'+'eferences']['length'];_0x473427++)this['_materialR'+'eferences'][_0x473427]['id']=null;this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0xbba2c9,_0x78b1b5){this['addToLayer'+'s'](),_0xbba2c9['off']('add',this['onLayerAdd'+'ed'],this),_0xbba2c9['off']('remove',this['onLayerRem'+'oved'],this),_0x78b1b5['on']('add',this['onLayerAdd'+'ed'],this),_0x78b1b5['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0xd7b5b6){this['layers']['indexOf'](_0xd7b5b6['id'])<0x1*0x1979+0x12db*-0x2+0xf1*0xd||_0xd7b5b6['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}['onLayerRem'+'oved'](_0x58854f){this['layers']['indexOf'](_0x58854f['id'])<-0xd5f+0x2301+-0x15a2||_0x58854f['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}['onEnable'](){var _0x462c44;const _0x18fb2b=this['system']['app'],_0x18851c=_0x18fb2b['scene'],_0x14b5f9=_0x18851c['layers'];this['_rootBone']&&this['_cloneSkin'+'Instances'](),this['_evtLayers'+'Changed']=_0x18851c['on']('set:layers',this['onLayersCh'+'anged'],this),_0x14b5f9&&(this['_evtLayerA'+'dded']=_0x14b5f9['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x14b5f9['on']('remove',this['onLayerRem'+'oved'],this));const _0x17226e=this['_type']==='asset';this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']?this['addToLayer'+'s']():_0x17226e&&this['asset']&&this['_onRenderA'+'ssetAdded']();for(let _0x4f07dc=0x194*0x12+-0xa*0x369+0x5b2;_0x4f07dc<this['_materialR'+'eferences']['length'];_0x4f07dc++)this['_materialR'+'eferences'][_0x4f07dc]['asset']&&this['system']['app']['assets']['load'](this['_materialR'+'eferences'][_0x4f07dc]['asset']);this['_batchGrou'+'pId']>=0x6ac+0x2359+-0x2a05&&((_0x462c44=_0x18fb2b['batcher'])==null||_0x462c44['insert'](St['RENDER'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x1be335,_0x49db3e,_0x161855,_0x5c0418;const _0x1bb109=this['system']['app'],_0x297073=_0x1bb109['scene']['layers'];(_0x1be335=this['_evtLayers'+'Changed'])==null||_0x1be335['off'](),this['_evtLayers'+'Changed']=null,this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x297073&&((_0x49db3e=this['_evtLayerA'+'dded'])==null||_0x49db3e['off'](),this['_evtLayerA'+'dded']=null,(_0x161855=this['_evtLayerR'+'emoved'])==null||_0x161855['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=0x2*-0x6c+0xb47+0x1*-0xa6f&&((_0x5c0418=_0x1bb109['batcher'])==null||_0x5c0418['remove'](St['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['removeFrom'+'Layers']();}['hide'](){if(this['_meshInsta'+'nces']){for(let _0x3059e0=0x196*-0x17+-0x249f*0x1+0x4919;_0x3059e0<this['_meshInsta'+'nces']['length'];_0x3059e0++)this['_meshInsta'+'nces'][_0x3059e0]['visible']=!(0x7ca+0x645+0x1*-0xe0e);}}['show'](){if(this['_meshInsta'+'nces']){for(let _0x309037=0x44d*0x6+0xf5b+-0x2929;_0x309037<this['_meshInsta'+'nces']['length'];_0x309037++)this['_meshInsta'+'nces'][_0x309037]['visible']=!(0x1*0xd13+-0x18*-0x19d+-0x33cb*0x1);}}['_onRenderA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onRenderA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onRenderA'+'ssetLoad'](){var _0x3a95d2;if(this['destroyMes'+'hInstances'](),this['_assetRefe'+'rence']['asset']){const _0x404a79=this['_assetRefe'+'rence']['asset']['resource'];(_0x3a95d2=this['_evtSetMes'+'hes'])==null||_0x3a95d2['off'](),this['_evtSetMes'+'hes']=_0x404a79['on']('set:meshes',this['_onSetMesh'+'es'],this),_0x404a79['meshes']&&this['_onSetMesh'+'es'](_0x404a79['meshes']);}}['_onSetMesh'+'es'](_0x153a2a){this['_cloneMesh'+'es'](_0x153a2a);}['_clearSkin'+'Instances'](){for(let _0x56a03b=0x17b*0x4+-0x65*0x1+-0x587;_0x56a03b<this['_meshInsta'+'nces']['length'];_0x56a03b++){const _0x2bfa6c=this['_meshInsta'+'nces'][_0x56a03b];il['removeCach'+'edSkinInst'+'ance'](_0x2bfa6c['skinInstan'+'ce']),_0x2bfa6c['skinInstan'+'ce']=null;}}['_cloneSkin'+'Instances'](){if(this['_meshInsta'+'nces']['length']&&this['_rootBone']instanceof Ie)for(let _0x36202e=-0x49*0x2e+0x141a+0xc*-0x95;_0x36202e<this['_meshInsta'+'nces']['length'];_0x36202e++){const _0x3b3cdd=this['_meshInsta'+'nces'][_0x36202e],_0x1066c2=_0x3b3cdd['mesh'];_0x1066c2['skin']&&!_0x3b3cdd['skinInstan'+'ce']&&(_0x3b3cdd['skinInstan'+'ce']=il['createCach'+'edSkinInst'+'ance'](_0x1066c2['skin'],this['_rootBone'],this['entity']));}}['_cloneMesh'+'es'](_0x3805e8){if(_0x3805e8&&_0x3805e8['length']){const _0x5878ce=[];for(let _0x2e2fbd=-0x1f55+0x114c+0xe09;_0x2e2fbd<_0x3805e8['length'];_0x2e2fbd++){const _0x3078fa=_0x3805e8[_0x2e2fbd],_0x1e3e3c=this['_materialR'+'eferences'][_0x2e2fbd]&&this['_materialR'+'eferences'][_0x2e2fbd]['asset']&&this['_materialR'+'eferences'][_0x2e2fbd]['asset']['resource'],_0x303bd4=new He(_0x3078fa,_0x1e3e3c||this['system']['defaultMat'+'erial'],this['entity']);_0x5878ce['push'](_0x303bd4),_0x3078fa['morph']&&(_0x303bd4['morphInsta'+'nce']=new _a(_0x3078fa['morph']));}this['meshInstan'+'ces']=_0x5878ce,this['_cloneSkin'+'Instances']();}}['_onRenderA'+'ssetUnload'](){this['_type']==='asset'&&this['destroyMes'+'hInstances']();}['_onRenderA'+'ssetRemove'](){var _0x46aa19;(_0x46aa19=this['_evtSetMes'+'hes'])==null||_0x46aa19['off'](),this['_evtSetMes'+'hes']=null,this['_onRenderA'+'ssetUnload']();}['_onMateria'+'lAdded'](_0x293631,_0x35dce1,_0x1b1755){_0x1b1755['resource']?this['_onMateria'+'lLoad'](_0x293631,_0x35dce1,_0x1b1755):this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](_0x1b1755);}['_updateMai'+'nMaterial'](_0x5995c5,_0x56b537){_0x5995c5===-0x11a1*-0x1+0x13db+-0x1*0x257c&&(this['material']=_0x56b537);}['_onMateria'+'lLoad'](_0x5943b3,_0x1bf9bc,_0x3239b9){this['_meshInsta'+'nces'][_0x5943b3]&&(this['_meshInsta'+'nces'][_0x5943b3]['material']=_0x3239b9['resource']),this['_updateMai'+'nMaterial'](_0x5943b3,_0x3239b9['resource']);}['_onMateria'+'lRemove'](_0x433166,_0x3a5a75,_0x2090e7){this['_meshInsta'+'nces'][_0x433166]&&(this['_meshInsta'+'nces'][_0x433166]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x433166,this['system']['defaultMat'+'erial']);}['_onMateria'+'lUnload'](_0x1945ba,_0x280d02,_0x3e9566){this['_meshInsta'+'nces'][_0x1945ba]&&(this['_meshInsta'+'nces'][_0x1945ba]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x1945ba,this['system']['defaultMat'+'erial']);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x5801f0,_0x39abc8){_0x5801f0['rootBone']&&(this['rootBone']=_0x39abc8[_0x5801f0['rootBone']['getGuid']()]);}}class iO{constructor(){this['enabled']=!(0xa03+0x5*-0x2ef+0x4a8*0x1);}}const du=['enabled'],Ur=['material','meshInstan'+'ces','asset','materialAs'+'sets','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','renderStyl'+'e','type','layers','isStatic','batchGroup'+'Id','rootBone'];class rO extends ct{constructor(_0x113a31){super(_0x113a31),this['id']='render',this['ComponentT'+'ype']=Ev,this['DataType']=iO,this['schema']=du,this['defaultMat'+'erial']=$n(_0x113a31['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x431df1,_0x4ffefc,_0x1b74f5){(_0x4ffefc['batchGroup'+'Id']===null||_0x4ffefc['batchGroup'+'Id']===void(0x216d+0x55*-0x6+0xd*-0x26b))&&(_0x4ffefc['batchGroup'+'Id']=-(-0xfcc+-0x4d2*-0x5+-0x11*0x7d)),_0x4ffefc['layers']&&_0x4ffefc['layers']['length']&&(_0x4ffefc['layers']=_0x4ffefc['layers']['slice'](0x3*0x16a+0x67*0x4f+0x17*-0x191));for(let _0x89db5d=0x1930+0x5*0x65d+0x1*-0x3901;_0x89db5d<Ur['length'];_0x89db5d++)_0x4ffefc['hasOwnProp'+'erty'](Ur[_0x89db5d])&&(_0x431df1[Ur[_0x89db5d]]=_0x4ffefc[Ur[_0x89db5d]]);_0x4ffefc['aabbCenter']&&_0x4ffefc['aabbHalfEx'+'tents']&&(_0x431df1['customAabb']=new De(new D(_0x4ffefc['aabbCenter']),new D(_0x4ffefc['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x431df1,_0x4ffefc,du);}['cloneCompo'+'nent'](_0x59ba55,_0x23acbc){const _0x427a77={};for(let _0x2fba30=0x3*0x96e+-0xa63*0x2+-0x3c2*0x2;_0x2fba30<Ur['length'];_0x2fba30++)_0x427a77[Ur[_0x2fba30]]=_0x59ba55['render'][Ur[_0x2fba30]];_0x427a77['enabled']=_0x59ba55['render']['enabled'],delete _0x427a77['meshInstan'+'ces'];const _0x401349=this['addCompone'+'nt'](_0x23acbc,_0x427a77),_0x243dc0=_0x59ba55['render']['meshInstan'+'ces'],_0x91778d=_0x243dc0['map'](_0x30779d=>_0x30779d['mesh']);_0x401349['_onSetMesh'+'es'](_0x91778d);for(let _0x285ae3=0x2364+0x3*0xb8d+-0x460b;_0x285ae3<_0x243dc0['length'];_0x285ae3++)_0x401349['meshInstan'+'ces'][_0x285ae3]['material']=_0x243dc0[_0x285ae3]['material'];return _0x59ba55['render']['customAabb']&&(_0x401349['customAabb']=_0x59ba55['render']['customAabb']['clone']()),_0x401349;}['onRemove'](_0x1a5d57,_0x2d184a){_0x2d184a['onRemove']();}}we['_buildAcce'+'ssors'](Ev['prototype'],du);class sf{constructor(_0x2c2bcd,_0x1e539d){h(this,'_construct'+'or'),h(this,'_pool',[]),h(this,'_count',-0x2593+-0x1*0x241a+0x1*0x49ad),(this['_construct'+'or']=_0x2c2bcd,this['_resize'](_0x1e539d));}['_resize'](_0xc9a82b){if(_0xc9a82b>this['_pool']['length']){for(let _0x204c5e=this['_pool']['length'];_0x204c5e<_0xc9a82b;_0x204c5e++)this['_pool'][_0x204c5e]=new this['_construct'+'or']();}}['allocate'](){return this['_count']>=this['_pool']['length']&&this['_resize'](this['_pool']['length']*(0x15ed+0x21*0xe8+0x1*-0x33d3)),this['_pool'][this['_count']++];}['freeAll'](){this['_count']=0x1e49*0x1+0x2d*-0x87+-0x68e;}}let cs,Re,Us,$a;const aO=new le(),nO=new le(),pc=new D();class bs extends we{constructor(){super(...arguments),h(this,'_angularDa'+'mping',-0x17a5*-0x1+0x3*-0xa21+0x6be),h(this,'_angularFa'+'ctor',new D(0x2*-0x5c4+-0x21a6+0x2d2f,0x3*-0xcb3+0x1caa+-0x1*-0x970,0xf39+-0x4a*0x2b+-0x2ca)),h(this,'_angularVe'+'locity',new D()),h(this,'_body',null),h(this,'_friction',0x1*0x8c9+0x14*0xd6+-0x1981+0.5),h(this,'_group',ug),h(this,'_linearDam'+'ping',0x0+0x337+-0x337*0x1),h(this,'_linearFac'+'tor',new D(-0x1*-0x1493+0x10f*0x24+-0x3aae,-0x9d*0x2c+0x1fce+0x3*-0x19b,0x623*0x3+-0x4*0x51b+-0x1*-0x204)),h(this,'_linearVel'+'ocity',new D()),h(this,'_mask',iu),h(this,'_mass',0x19*0xa4+0x4f*0x29+-0x1caa*0x1),h(this,'_restituti'+'on',0x6eb+-0xbe5+-0x1a*-0x31),h(this,'_rollingFr'+'iction',0x21a2+0x5b*-0x61+0xd9),h(this,'_simulatio'+'nEnabled',!(0x1617+-0x120a*0x2+0xdfe)),h(this,'_type',fo);}static['onLibraryL'+'oaded'](){typeof Ammo<'u'&&(cs=new Ammo['btTransfor'+'m'](),Re=new Ammo['btVector3'](),Us=new Ammo['btVector3'](),$a=new Ammo['btQuaterni'+'on']());}static['onAppDestr'+'oy'](){Ammo['destroy'](cs),Ammo['destroy'](Re),Ammo['destroy'](Us),Ammo['destroy']($a),cs=null,Re=null,Us=null,$a=null;}set['angularDam'+'ping'](_0x14ed03){this['_angularDa'+'mping']!==_0x14ed03&&(this['_angularDa'+'mping']=_0x14ed03,this['_body']&&this['_body']['setDamping'](this['_linearDam'+'ping'],_0x14ed03));}get['angularDam'+'ping'](){return this['_angularDa'+'mping'];}set['angularFac'+'tor'](_0x2928e2){this['_angularFa'+'ctor']['equals'](_0x2928e2)||(this['_angularFa'+'ctor']['copy'](_0x2928e2),this['_body']&&this['_type']===Ns&&(Re['setValue'](_0x2928e2['x'],_0x2928e2['y'],_0x2928e2['z']),this['_body']['setAngular'+'Factor'](Re)));}get['angularFac'+'tor'](){return this['_angularFa'+'ctor'];}set['angularVel'+'ocity'](_0x60355b){this['_body']&&this['_type']===Ns&&(this['_body']['activate'](),Re['setValue'](_0x60355b['x'],_0x60355b['y'],_0x60355b['z']),this['_body']['setAngular'+'Velocity'](Re),this['_angularVe'+'locity']['copy'](_0x60355b));}get['angularVel'+'ocity'](){if(this['_body']&&this['_type']===Ns){const _0x520f03=this['_body']['getAngular'+'Velocity']();this['_angularVe'+'locity']['set'](_0x520f03['x'](),_0x520f03['y'](),_0x520f03['z']());}return this['_angularVe'+'locity'];}set['body'](_0x5c0948){this['_body']!==_0x5c0948&&(this['_body']=_0x5c0948,_0x5c0948&&this['_simulatio'+'nEnabled']&&_0x5c0948['activate']());}get['body'](){return this['_body'];}set['friction'](_0x4808d9){this['_friction']!==_0x4808d9&&(this['_friction']=_0x4808d9,this['_body']&&this['_body']['setFrictio'+'n'](_0x4808d9));}get['friction'](){return this['_friction'];}set['group'](_0x58a786){this['_group']!==_0x58a786&&(this['_group']=_0x58a786,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['group'](){return this['_group'];}set['linearDamp'+'ing'](_0x51cd04){this['_linearDam'+'ping']!==_0x51cd04&&(this['_linearDam'+'ping']=_0x51cd04,this['_body']&&this['_body']['setDamping'](_0x51cd04,this['_angularDa'+'mping']));}get['linearDamp'+'ing'](){return this['_linearDam'+'ping'];}set['linearFact'+'or'](_0x375d3b){this['_linearFac'+'tor']['equals'](_0x375d3b)||(this['_linearFac'+'tor']['copy'](_0x375d3b),this['_body']&&this['_type']===Ns&&(Re['setValue'](_0x375d3b['x'],_0x375d3b['y'],_0x375d3b['z']),this['_body']['setLinearF'+'actor'](Re)));}get['linearFact'+'or'](){return this['_linearFac'+'tor'];}set['linearVelo'+'city'](_0x5211a0){this['_body']&&this['_type']===Ns&&(this['_body']['activate'](),Re['setValue'](_0x5211a0['x'],_0x5211a0['y'],_0x5211a0['z']),this['_body']['setLinearV'+'elocity'](Re),this['_linearVel'+'ocity']['copy'](_0x5211a0));}get['linearVelo'+'city'](){if(this['_body']&&this['_type']===Ns){const _0x40bf11=this['_body']['getLinearV'+'elocity']();this['_linearVel'+'ocity']['set'](_0x40bf11['x'](),_0x40bf11['y'](),_0x40bf11['z']());}return this['_linearVel'+'ocity'];}set['mask'](_0x51715c){this['_mask']!==_0x51715c&&(this['_mask']=_0x51715c,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['mask'](){return this['_mask'];}set['mass'](_0x927fb9){if(this['_mass']!==_0x927fb9&&(this['_mass']=_0x927fb9,this['_body']&&this['_type']===Ns)){const _0x4423d8=this['enabled']&&this['entity']['enabled'];_0x4423d8&&this['disableSim'+'ulation'](),this['_body']['getCollisi'+'onShape']()['calculateL'+'ocalInerti'+'a'](_0x927fb9,Re),this['_body']['setMassPro'+'ps'](_0x927fb9,Re),this['_body']['updateIner'+'tiaTensor'](),_0x4423d8&&this['enableSimu'+'lation']();}}get['mass'](){return this['_mass'];}set['restitutio'+'n'](_0x501578){this['_restituti'+'on']!==_0x501578&&(this['_restituti'+'on']=_0x501578,this['_body']&&this['_body']['setRestitu'+'tion'](_0x501578));}get['restitutio'+'n'](){return this['_restituti'+'on'];}set['rollingFri'+'ction'](_0x3d9aee){this['_rollingFr'+'iction']!==_0x3d9aee&&(this['_rollingFr'+'iction']=_0x3d9aee,this['_body']&&this['_body']['setRolling'+'Friction'](_0x3d9aee));}get['rollingFri'+'ction'](){return this['_rollingFr'+'iction'];}set['type'](_0x380886){if(this['_type']!==_0x380886){switch(this['_type']=_0x380886,this['disableSim'+'ulation'](),_0x380886){case Ns:this['_group']=fL,this['_mask']=mg;break;case Ua:this['_group']=uL,this['_mask']=mg;break;case fo:default:this['_group']=ug,this['_mask']=iu;break;}this['createBody']();}}get['type'](){return this['_type'];}['createBody'](){const _0x1f9d45=this['entity'];let _0x3f4caa;if(_0x1f9d45['collision']&&(_0x3f4caa=_0x1f9d45['collision']['shape'],_0x1f9d45['trigger']&&(_0x1f9d45['trigger']['destroy'](),delete _0x1f9d45['trigger'])),_0x3f4caa){this['_body']&&(this['system']['removeBody'](this['_body']),this['system']['destroyBod'+'y'](this['_body']),this['_body']=null);const _0x2dc2dc=this['_type']===Ns?this['_mass']:-0x1*-0xa48+0x240a+0x62*-0x79;this['_getEntity'+'Transform'](cs);const _0x59d7c3=this['system']['createBody'](_0x2dc2dc,_0x3f4caa,cs);if(_0x59d7c3['setRestitu'+'tion'](this['_restituti'+'on']),_0x59d7c3['setFrictio'+'n'](this['_friction']),_0x59d7c3['setRolling'+'Friction'](this['_rollingFr'+'iction']),_0x59d7c3['setDamping'](this['_linearDam'+'ping'],this['_angularDa'+'mping']),this['_type']===Ns){const _0x13aff1=this['_linearFac'+'tor'];Re['setValue'](_0x13aff1['x'],_0x13aff1['y'],_0x13aff1['z']),_0x59d7c3['setLinearF'+'actor'](Re);const _0xa90720=this['_angularFa'+'ctor'];Re['setValue'](_0xa90720['x'],_0xa90720['y'],_0xa90720['z']),_0x59d7c3['setAngular'+'Factor'](Re);}else this['_type']===Ua&&(_0x59d7c3['setCollisi'+'onFlags'](_0x59d7c3['getCollisi'+'onFlags']()|dL),_0x59d7c3['setActivat'+'ionState'](fg));_0x59d7c3['entity']=_0x1f9d45,this['body']=_0x59d7c3,this['enabled']&&_0x1f9d45['enabled']&&this['enableSimu'+'lation']();}}['isActive'](){return this['_body']?this['_body']['isActive']():!(-0x1d*-0x16+-0xcbb+0xa3e);}['activate'](){this['_body']&&this['_body']['activate']();}['enableSimu'+'lation'](){const _0x4691a2=this['entity'];if(_0x4691a2['collision']&&_0x4691a2['collision']['enabled']&&!this['_simulatio'+'nEnabled']){const _0x4e7657=this['_body'];if(_0x4e7657){switch(this['system']['addBody'](_0x4e7657,this['_group'],this['_mask']),this['_type']){case Ns:this['system']['_dynamic']['push'](this),_0x4e7657['forceActiv'+'ationState'](su),this['syncEntity'+'ToBody']();break;case Ua:this['system']['_kinematic']['push'](this),_0x4e7657['forceActiv'+'ationState'](fg);break;case fo:_0x4e7657['forceActiv'+'ationState'](su),this['syncEntity'+'ToBody']();break;}_0x4691a2['collision']['type']==='compound'&&this['system']['_compounds']['push'](_0x4691a2['collision']),_0x4e7657['activate'](),this['_simulatio'+'nEnabled']=!(-0x9c2+0x81b+0x1a7);}}}['disableSim'+'ulation'](){const _0x1bb06b=this['_body'];if(_0x1bb06b&&this['_simulatio'+'nEnabled']){const _0x3e8525=this['system'];let _0xca94c3=_0x3e8525['_compounds']['indexOf'](this['entity']['collision']);_0xca94c3>-(-0x3*-0x5a6+0x442+-0x1533)&&_0x3e8525['_compounds']['splice'](_0xca94c3,-0x13e8+-0xe*-0xde+-0x9*-0xdd),_0xca94c3=_0x3e8525['_dynamic']['indexOf'](this),_0xca94c3>-(-0x1cbd+-0x1d9d+-0x3a5b*-0x1)&&_0x3e8525['_dynamic']['splice'](_0xca94c3,0x25f*-0x4+-0x92e+0x12ab),_0xca94c3=_0x3e8525['_kinematic']['indexOf'](this),_0xca94c3>-(0x760+-0xd26+-0x11*-0x57)&&_0x3e8525['_kinematic']['splice'](_0xca94c3,0x523+-0xe8c+0x96a),_0x3e8525['removeBody'](_0x1bb06b),_0x1bb06b['forceActiv'+'ationState'](uv),this['_simulatio'+'nEnabled']=!(-0x1815+-0x775*0x5+0x3d5f);}}['applyForce'](_0x7090ff,_0x8d6741,_0x26f446,_0x52d941,_0x616137,_0x3ab412){const _0x208adf=this['_body'];_0x208adf&&(_0x208adf['activate'](),_0x7090ff instanceof D?Re['setValue'](_0x7090ff['x'],_0x7090ff['y'],_0x7090ff['z']):Re['setValue'](_0x7090ff,_0x8d6741,_0x26f446),_0x8d6741 instanceof D?Us['setValue'](_0x8d6741['x'],_0x8d6741['y'],_0x8d6741['z']):_0x52d941!==void(0x23a8+-0x20c6+-0x2e2)?Us['setValue'](_0x52d941,_0x616137,_0x3ab412):Us['setValue'](0x2*-0x851+0x8*0x2bc+-0x53e,-0x53*-0x64+-0x6bd+-0x523*0x5,0xc8f+0x32d*-0x5+0xa*0x55),_0x208adf['applyForce'](Re,Us));}['applyTorqu'+'e'](_0x1140e3,_0x47ee12,_0x2cea44){const _0x39f561=this['_body'];_0x39f561&&(_0x39f561['activate'](),_0x1140e3 instanceof D?Re['setValue'](_0x1140e3['x'],_0x1140e3['y'],_0x1140e3['z']):Re['setValue'](_0x1140e3,_0x47ee12,_0x2cea44),_0x39f561['applyTorqu'+'e'](Re));}['applyImpul'+'se'](_0x5f3224,_0x3fa093,_0x548386,_0x159970,_0x2741e2,_0x7a109){const _0x471292=this['_body'];_0x471292&&(_0x471292['activate'](),_0x5f3224 instanceof D?Re['setValue'](_0x5f3224['x'],_0x5f3224['y'],_0x5f3224['z']):Re['setValue'](_0x5f3224,_0x3fa093,_0x548386),_0x3fa093 instanceof D?Us['setValue'](_0x3fa093['x'],_0x3fa093['y'],_0x3fa093['z']):_0x159970!==void(0x1a85+-0x1*0x6a7+-0x13de)?Us['setValue'](_0x159970,_0x2741e2,_0x7a109):Us['setValue'](0x5*-0x269+0x116*0x2+0x9e1,0x659*0x4+0x79*0x3d+-0x295*0x15,-0x10d3+0x192c*-0x1+0x29ff),_0x471292['applyImpul'+'se'](Re,Us));}['applyTorqu'+'eImpulse'](_0x4bd7f3,_0xbaf651,_0x5402ea){const _0x2f8f8c=this['_body'];_0x2f8f8c&&(_0x2f8f8c['activate'](),_0x4bd7f3 instanceof D?Re['setValue'](_0x4bd7f3['x'],_0x4bd7f3['y'],_0x4bd7f3['z']):Re['setValue'](_0x4bd7f3,_0xbaf651,_0x5402ea),_0x2f8f8c['applyTorqu'+'eImpulse'](Re));}['isStatic'](){return this['_type']===fo;}['isStaticOr'+'Kinematic'](){return this['_type']===fo||this['_type']===Ua;}['isKinemati'+'c'](){return this['_type']===Ua;}['_getEntity'+'Transform'](_0x37ab37){const _0xc0192f=this['entity'],_0x4e7142=_0xc0192f['collision'];if(_0x4e7142){const _0x489996=_0x4e7142['getShapePo'+'sition'](),_0x4f268d=_0x4e7142['getShapeRo'+'tation']();Re['setValue'](_0x489996['x'],_0x489996['y'],_0x489996['z']),$a['setValue'](_0x4f268d['x'],_0x4f268d['y'],_0x4f268d['z'],_0x4f268d['w']);}else{const _0x2a9ff8=_0xc0192f['getPositio'+'n'](),_0x1585ce=_0xc0192f['getRotatio'+'n']();Re['setValue'](_0x2a9ff8['x'],_0x2a9ff8['y'],_0x2a9ff8['z']),$a['setValue'](_0x1585ce['x'],_0x1585ce['y'],_0x1585ce['z'],_0x1585ce['w']);}_0x37ab37['setOrigin'](Re),_0x37ab37['setRotatio'+'n']($a);}['syncEntity'+'ToBody'](){const _0xa36503=this['_body'];if(_0xa36503){if(this['_getEntity'+'Transform'](cs),_0xa36503['setWorldTr'+'ansform'](cs),this['_type']===Ua){const _0x21e067=_0xa36503['getMotionS'+'tate']();_0x21e067&&_0x21e067['setWorldTr'+'ansform'](cs);}_0xa36503['activate']();}}['_updateDyn'+'amic'](){const _0x2cbb43=this['_body'];if(_0x2cbb43['isActive']()){const _0x3e0fb9=_0x2cbb43['getMotionS'+'tate']();if(_0x3e0fb9){const _0x586673=this['entity'];_0x3e0fb9['getWorldTr'+'ansform'](cs);const _0x39d9c8=cs['getOrigin'](),_0x4a14b7=cs['getRotatio'+'n'](),_0x35603a=_0x586673['collision'];if(_0x35603a&&_0x35603a['_hasOffset']){const _0x1ad112=_0x35603a['data']['linearOffs'+'et'],_0x1a0ac5=_0x35603a['data']['angularOff'+'set'],_0x2c2d9c=nO['copy'](_0x1a0ac5)['invert'](),_0x40ab9e=aO['set'](_0x4a14b7['x'](),_0x4a14b7['y'](),_0x4a14b7['z'](),_0x4a14b7['w']())['mul'](_0x2c2d9c);_0x40ab9e['transformV'+'ector'](_0x1ad112,pc),_0x586673['setPositio'+'n'](_0x39d9c8['x']()-pc['x'],_0x39d9c8['y']()-pc['y'],_0x39d9c8['z']()-pc['z']),_0x586673['setRotatio'+'n'](_0x40ab9e);}else _0x586673['setPositio'+'n'](_0x39d9c8['x'](),_0x39d9c8['y'](),_0x39d9c8['z']()),_0x586673['setRotatio'+'n'](_0x4a14b7['x'](),_0x4a14b7['y'](),_0x4a14b7['z'](),_0x4a14b7['w']());}}}['_updateKin'+'ematic'](){const _0x29a2ad=this['_body']['getMotionS'+'tate']();_0x29a2ad&&(this['_getEntity'+'Transform'](cs),_0x29a2ad['setWorldTr'+'ansform'](cs));}['teleport'](_0x5984c5,_0x20a178,_0x3ee6d2,_0x3353b5,_0x378e23,_0x344fe5){_0x5984c5 instanceof D?this['entity']['setPositio'+'n'](_0x5984c5):this['entity']['setPositio'+'n'](_0x5984c5,_0x20a178,_0x3ee6d2),_0x20a178 instanceof le?this['entity']['setRotatio'+'n'](_0x20a178):_0x20a178 instanceof D?this['entity']['setEulerAn'+'gles'](_0x20a178):_0x3353b5!==void(0x1*-0xd27+-0x57+0xd7e)&&this['entity']['setEulerAn'+'gles'](_0x3353b5,_0x378e23,_0x344fe5),this['syncEntity'+'ToBody']();}['onEnable'](){this['_body']||this['createBody'](),this['enableSimu'+'lation']();}['onDisable'](){this['disableSim'+'ulation']();}}h(bs,'EVENT_CONT'+'ACT','contact'),h(bs,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(bs,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(bs,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(bs,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve'),h(bs,'order',-(-0x16ff*-0x1+-0x1f2f+0x831));class oO{constructor(){this['enabled']=!(0x22d3+-0x94*0x3e+-0x1*-0x105);}}let Mi,Di;class bg{constructor(_0x15d5f6,_0xb7bc95,_0x30abf1,_0x4f7720){h(this,'entity'),h(this,'point'),h(this,'normal'),h(this,'hitFractio'+'n'),(this['entity']=_0x15d5f6,this['point']=_0xb7bc95,this['normal']=_0x30abf1,this['hitFractio'+'n']=_0x4f7720);}}class lO{constructor(_0x5499a5,_0x59b020,_0xc8e5a4){h(this,'a'),h(this,'b'),h(this,'impulse'),h(this,'localPoint'+'A'),h(this,'localPoint'+'B'),h(this,'pointA'),h(this,'pointB'),h(this,'normal'),arguments['length']!==0x2162+0x509*-0x4+-0xd3e?(this['a']=_0x5499a5,this['b']=_0x59b020,this['impulse']=_0xc8e5a4['impulse'],this['localPoint'+'A']=_0xc8e5a4['localPoint'],this['localPoint'+'B']=_0xc8e5a4['localPoint'+'Other'],this['pointA']=_0xc8e5a4['point'],this['pointB']=_0xc8e5a4['pointOther'],this['normal']=_0xc8e5a4['normal']):(this['a']=null,this['b']=null,this['impulse']=0x1060*-0x2+0x222+0x1e9e,this['localPoint'+'A']=new D(),this['localPoint'+'B']=new D(),this['pointA']=new D(),this['pointB']=new D(),this['normal']=new D());}}class cO{constructor(_0x1510a9=new D(),_0x39599f=new D(),_0x12e894=new D(),_0x159783=new D(),_0x562b6d=new D(),_0x4dc549=0x3b9+0x1f0*0x12+-0xf1*0x29){h(this,'localPoint'),h(this,'localPoint'+'Other'),h(this,'point'),h(this,'pointOther'),h(this,'normal'),h(this,'impulse'),(this['localPoint']=_0x1510a9,this['localPoint'+'Other']=_0x39599f,this['point']=_0x12e894,this['pointOther']=_0x159783,this['normal']=_0x562b6d,this['impulse']=_0x4dc549);}}class hO{constructor(_0x13168e,_0x3a18be){h(this,'other'),h(this,'contacts'),(this['other']=_0x13168e,this['contacts']=_0x3a18be);}}const bv=['enabled'];class Kp extends ct{constructor(_0x83c769){super(_0x83c769),h(this,'maxSubStep'+'s',-0x1*0xd8b+0x2b1*0x5+0x1*0x20),h(this,'fixedTimeS'+'tep',(0x7c3*-0x3+0x1a95+-0x34b)/(0x2312+-0xe57+-0x147f)),h(this,'gravity',new D(-0x20f9*-0x1+0x7f1+0x1475*-0x2,-(-0xf76+-0xd*0x17e+0x22e5*0x1+0.8100000000000005),-0x706+0x7*-0x249+0x1705)),h(this,'_gravityFl'+'oat32',new Float32Array(0x1509+-0x1aed+0x1*0x5e7)),h(this,'_dynamic',[]),h(this,'_kinematic',[]),h(this,'_triggers',[]),h(this,'_compounds',[]),(this['id']='rigidbody',this['_stats']=_0x83c769['stats']['frame'],this['ComponentT'+'ype']=bs,this['DataType']=oO,this['contactPoi'+'ntPool']=null,this['contactRes'+'ultPool']=null,this['singleCont'+'actResultP'+'ool']=null,this['schema']=bv,this['collisions']={},this['frameColli'+'sions']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this));}['onLibraryL'+'oaded'](){if(typeof Ammo<'u'){if(this['collisionC'+'onfigurati'+'on']=new Ammo['btDefaultC'+'ollisionCo'+'nfiguratio'+'n'](),this['dispatcher']=new Ammo['btCollisio'+'nDispatche'+'r'](this['collisionC'+'onfigurati'+'on']),this['overlappin'+'gPairCache']=new Ammo['btDbvtBroa'+'dphase'](),this['solver']=new Ammo['btSequenti'+'alImpulseC'+'onstraintS'+'olver'](),this['dynamicsWo'+'rld']=new Ammo['btDiscrete'+'DynamicsWo'+'rld'](this['dispatcher'],this['overlappin'+'gPairCache'],this['solver'],this['collisionC'+'onfigurati'+'on']),this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']){const _0x25ecaa=Ammo['addFunctio'+'n'](this['_checkForC'+'ollisions']['bind'](this),'vif');this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack'](_0x25ecaa);}else w['warn']('WARNING:\x20T'+'his\x20versio'+'n\x20of\x20ammo.'+'js\x20can\x20pot'+'entially\x20f'+'ail\x20to\x20rep'+'ort\x20contac'+'ts.\x20Please'+'\x20update\x20it'+'\x20to\x20the\x20la'+'test\x20versi'+'on.');Mi=new Ammo['btVector3'](),Di=new Ammo['btVector3'](),bs['onLibraryL'+'oaded'](),this['contactPoi'+'ntPool']=new sf(cO,0x19f3+-0x1b4c+-0x2*-0xad),this['contactRes'+'ultPool']=new sf(hO,0x2228+-0x1*0x248b+0xc*0x33),this['singleCont'+'actResultP'+'ool']=new sf(lO,0x24d8+-0xba2+0x1935*-0x1),this['app']['systems']['on']('update',this['onUpdate'],this);}else this['app']['systems']['off']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x15e53e,_0x129936,_0x5ac25d){const _0x5d2bde=['mass','linearDamp'+'ing','angularDam'+'ping','linearFact'+'or','angularFac'+'tor','friction','rollingFri'+'ction','restitutio'+'n','type','group','mask'];for(const _0x1874ce of _0x5d2bde)if(_0x129936['hasOwnProp'+'erty'](_0x1874ce)){const _0x49c89b=_0x129936[_0x1874ce];Array['isArray'](_0x49c89b)?_0x15e53e[_0x1874ce]=new D(_0x49c89b[0xa*-0x21f+0x142f+0x107],_0x49c89b[0x99a+0xd*0x56+-0xdf7],_0x49c89b[-0x1*0x198b+0xc85*-0x2+0x3297]):_0x15e53e[_0x1874ce]=_0x49c89b;}super['initialize'+'ComponentD'+'ata'](_0x15e53e,_0x129936,['enabled']);}['cloneCompo'+'nent'](_0x5f1412,_0x24dd66){const _0x5e8dac=_0x5f1412['rigidbody'],_0x7412a9={'enabled':_0x5e8dac['enabled'],'mass':_0x5e8dac['mass'],'linearDamping':_0x5e8dac['linearDamp'+'ing'],'angularDamping':_0x5e8dac['angularDam'+'ping'],'linearFactor':[_0x5e8dac['linearFact'+'or']['x'],_0x5e8dac['linearFact'+'or']['y'],_0x5e8dac['linearFact'+'or']['z']],'angularFactor':[_0x5e8dac['angularFac'+'tor']['x'],_0x5e8dac['angularFac'+'tor']['y'],_0x5e8dac['angularFac'+'tor']['z']],'friction':_0x5e8dac['friction'],'rollingFriction':_0x5e8dac['rollingFri'+'ction'],'restitution':_0x5e8dac['restitutio'+'n'],'type':_0x5e8dac['type'],'group':_0x5e8dac['group'],'mask':_0x5e8dac['mask']};return this['addCompone'+'nt'](_0x24dd66,_0x7412a9);}['onBeforeRe'+'move'](_0xac2b05,_0x52dc87){_0x52dc87['enabled']&&(_0x52dc87['enabled']=!(-0x203f+0x1ada+0x1*0x566)),_0x52dc87['body']&&(this['destroyBod'+'y'](_0x52dc87['body']),_0x52dc87['body']=null);}['addBody'](_0x5acf9a,_0x527233,_0x4b4ba1){_0x527233!==void(-0x3b*0x97+0xb26*0x1+0x17a7)&&_0x4b4ba1!==void(0x1e3e+0x1290+-0x1867*0x2)?this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x5acf9a,_0x527233,_0x4b4ba1):this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x5acf9a);}['removeBody'](_0x435754){this['dynamicsWo'+'rld']['removeRigi'+'dBody'](_0x435754);}['createBody'](_0x17d97c,_0x3bdb5c,_0x32f897){const _0x34217f=new Ammo['btVector3'](0xd*-0x112+-0x11d8+0x1fc2,0xa*-0x322+-0x1*0x2333+0x4287,-0x2*-0x77d+-0x3ef*-0x1+-0x12e9);_0x17d97c!==0x23d9+-0x112f+0x2*-0x955&&_0x3bdb5c['calculateL'+'ocalInerti'+'a'](_0x17d97c,_0x34217f);const _0xf91944=new Ammo['btDefaultM'+'otionState'](_0x32f897),_0x36ff92=new Ammo['btRigidBod'+'yConstruct'+'ionInfo'](_0x17d97c,_0xf91944,_0x3bdb5c,_0x34217f),_0x516e25=new Ammo['btRigidBod'+'y'](_0x36ff92);return Ammo['destroy'](_0x36ff92),Ammo['destroy'](_0x34217f),_0x516e25;}['destroyBod'+'y'](_0x42715b){const _0x384a52=_0x42715b['getMotionS'+'tate']();_0x384a52&&Ammo['destroy'](_0x384a52),Ammo['destroy'](_0x42715b);}['raycastFir'+'st'](_0x4058b6,_0xfc02e9,_0x541812={}){if(_0x541812['filterTags']||_0x541812['filterCall'+'back'])return _0x541812['sort']=!(0x1a62+0xc1*-0x1+-0x19a1),this['raycastAll'](_0x4058b6,_0xfc02e9,_0x541812)[0xaad+0x1d0a+-0x27b7]||null;let _0x8418d6=null;Mi['setValue'](_0x4058b6['x'],_0x4058b6['y'],_0x4058b6['z']),Di['setValue'](_0xfc02e9['x'],_0xfc02e9['y'],_0xfc02e9['z']);const _0x4d8f16=new Ammo['ClosestRay'+'ResultCall'+'back'](Mi,Di);if(typeof _0x541812['filterColl'+'isionGroup']=='number'&&_0x4d8f16['set_m_coll'+'isionFilte'+'rGroup'](_0x541812['filterColl'+'isionGroup']),typeof _0x541812['filterColl'+'isionMask']=='number'&&_0x4d8f16['set_m_coll'+'isionFilte'+'rMask'](_0x541812['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](Mi,Di,_0x4d8f16),_0x4d8f16['hasHit']()){const _0x270218=_0x4d8f16['get_m_coll'+'isionObjec'+'t'](),_0xd1d5ac=Ammo['castObject'](_0x270218,Ammo['btRigidBod'+'y']);if(_0xd1d5ac){const _0x5ed9ca=_0x4d8f16['get_m_hitP'+'ointWorld'](),_0x391ce=_0x4d8f16['get_m_hitN'+'ormalWorld']();_0x8418d6=new bg(_0xd1d5ac['entity'],new D(_0x5ed9ca['x'](),_0x5ed9ca['y'](),_0x5ed9ca['z']()),new D(_0x391ce['x'](),_0x391ce['y'](),_0x391ce['z']()),_0x4d8f16['get_m_clos'+'estHitFrac'+'tion']());}}return Ammo['destroy'](_0x4d8f16),_0x8418d6;}['raycastAll'](_0x5dac3b,_0x3ad4a5,_0x22eacc={}){w['assert'](Ammo['AllHitsRay'+'ResultCall'+'back'],'pc.RigidBo'+'dyComponen'+'tSystem#ra'+'ycastAll:\x20'+'Your\x20versi'+'on\x20of\x20ammo'+'.js\x20does\x20n'+'ot\x20expose\x20'+'Ammo.AllHi'+'tsRayResul'+'tCallback.'+'\x20Update\x20it'+'\x20to\x20latest'+'.');const _0xd43d7=[];Mi['setValue'](_0x5dac3b['x'],_0x5dac3b['y'],_0x5dac3b['z']),Di['setValue'](_0x3ad4a5['x'],_0x3ad4a5['y'],_0x3ad4a5['z']);const _0x430aaf=new Ammo['AllHitsRay'+'ResultCall'+'back'](Mi,Di);if(typeof _0x22eacc['filterColl'+'isionGroup']=='number'&&_0x430aaf['set_m_coll'+'isionFilte'+'rGroup'](_0x22eacc['filterColl'+'isionGroup']),typeof _0x22eacc['filterColl'+'isionMask']=='number'&&_0x430aaf['set_m_coll'+'isionFilte'+'rMask'](_0x22eacc['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](Mi,Di,_0x430aaf),_0x430aaf['hasHit']()){const _0x180888=_0x430aaf['get_m_coll'+'isionObjec'+'ts'](),_0x246f4b=_0x430aaf['get_m_hitP'+'ointWorld'](),_0x12bfb0=_0x430aaf['get_m_hitN'+'ormalWorld'](),_0x1129fa=_0x430aaf['get_m_hitF'+'ractions'](),_0x3e0f94=_0x180888['size']();for(let _0x2fe1db=0x1958+0xe49+0x7ed*-0x5;_0x2fe1db<_0x3e0f94;_0x2fe1db++){const _0x27dacc=Ammo['castObject'](_0x180888['at'](_0x2fe1db),Ammo['btRigidBod'+'y']);if(_0x27dacc&&_0x27dacc['entity']){if(_0x22eacc['filterTags']&&!_0x27dacc['entity']['tags']['has'](..._0x22eacc['filterTags'])||_0x22eacc['filterCall'+'back']&&!_0x22eacc['filterCall'+'back'](_0x27dacc['entity']))continue;const _0xd332f4=_0x246f4b['at'](_0x2fe1db),_0xf07228=_0x12bfb0['at'](_0x2fe1db),_0x10b2d7=new bg(_0x27dacc['entity'],new D(_0xd332f4['x'](),_0xd332f4['y'](),_0xd332f4['z']()),new D(_0xf07228['x'](),_0xf07228['y'](),_0xf07228['z']()),_0x1129fa['at'](_0x2fe1db));_0xd43d7['push'](_0x10b2d7);}}_0x22eacc['sort']&&_0xd43d7['sort']((_0x2b624b,_0x42f50e)=>_0x2b624b['hitFractio'+'n']-_0x42f50e['hitFractio'+'n']);}return Ammo['destroy'](_0x430aaf),_0xd43d7;}['_storeColl'+'ision'](_0x5daec4,_0x556258){let _0x1475cc=!(-0x36b+0x1834*-0x1+0x1ba0);const _0x284c43=_0x5daec4['getGuid']();return this['collisions'][_0x284c43]=this['collisions'][_0x284c43]||{'others':[],'entity':_0x5daec4},this['collisions'][_0x284c43]['others']['indexOf'](_0x556258)<-0x1c11+0x1eef+-0x1*0x2de&&(this['collisions'][_0x284c43]['others']['push'](_0x556258),_0x1475cc=!(0x1*-0x716+0x6*-0x61f+0xaf4*0x4)),this['frameColli'+'sions'][_0x284c43]=this['frameColli'+'sions'][_0x284c43]||{'others':[],'entity':_0x5daec4},this['frameColli'+'sions'][_0x284c43]['others']['push'](_0x556258),_0x1475cc;}['_createCon'+'tactPointF'+'romAmmo'](_0xfa6ac9){const _0xed7238=_0xfa6ac9['get_m_loca'+'lPointA'](),_0x31e869=_0xfa6ac9['get_m_loca'+'lPointB'](),_0x371c6b=_0xfa6ac9['getPositio'+'nWorldOnA'](),_0x408508=_0xfa6ac9['getPositio'+'nWorldOnB'](),_0x234610=_0xfa6ac9['get_m_norm'+'alWorldOnB'](),_0x43ac2a=this['contactPoi'+'ntPool']['allocate']();return _0x43ac2a['localPoint']['set'](_0xed7238['x'](),_0xed7238['y'](),_0xed7238['z']()),_0x43ac2a['localPoint'+'Other']['set'](_0x31e869['x'](),_0x31e869['y'](),_0x31e869['z']()),_0x43ac2a['point']['set'](_0x371c6b['x'](),_0x371c6b['y'](),_0x371c6b['z']()),_0x43ac2a['pointOther']['set'](_0x408508['x'](),_0x408508['y'](),_0x408508['z']()),_0x43ac2a['normal']['set'](_0x234610['x'](),_0x234610['y'](),_0x234610['z']()),_0x43ac2a['impulse']=_0xfa6ac9['getApplied'+'Impulse'](),_0x43ac2a;}['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x4321c1){const _0x147436=_0x4321c1['get_m_loca'+'lPointA'](),_0x58f503=_0x4321c1['get_m_loca'+'lPointB'](),_0x3cc7aa=_0x4321c1['getPositio'+'nWorldOnA'](),_0x122af9=_0x4321c1['getPositio'+'nWorldOnB'](),_0x37a0fa=_0x4321c1['get_m_norm'+'alWorldOnB'](),_0x44cde1=this['contactPoi'+'ntPool']['allocate']();return _0x44cde1['localPoint'+'Other']['set'](_0x147436['x'](),_0x147436['y'](),_0x147436['z']()),_0x44cde1['localPoint']['set'](_0x58f503['x'](),_0x58f503['y'](),_0x58f503['z']()),_0x44cde1['pointOther']['set'](_0x3cc7aa['x'](),_0x3cc7aa['y'](),_0x3cc7aa['z']()),_0x44cde1['point']['set'](_0x122af9['x'](),_0x122af9['y'](),_0x122af9['z']()),_0x44cde1['normal']['set'](_0x37a0fa['x'](),_0x37a0fa['y'](),_0x37a0fa['z']()),_0x44cde1['impulse']=_0x4321c1['getApplied'+'Impulse'](),_0x44cde1;}['_createSin'+'gleContact'+'Result'](_0x4e9f79,_0x22a3a7,_0x16522d){const _0x130fdc=this['singleCont'+'actResultP'+'ool']['allocate']();return _0x130fdc['a']=_0x4e9f79,_0x130fdc['b']=_0x22a3a7,_0x130fdc['localPoint'+'A']=_0x16522d['localPoint'],_0x130fdc['localPoint'+'B']=_0x16522d['localPoint'+'Other'],_0x130fdc['pointA']=_0x16522d['point'],_0x130fdc['pointB']=_0x16522d['pointOther'],_0x130fdc['normal']=_0x16522d['normal'],_0x130fdc['impulse']=_0x16522d['impulse'],_0x130fdc;}['_createCon'+'tactResult'](_0x4acab5,_0x57bc45){const _0x31316f=this['contactRes'+'ultPool']['allocate']();return _0x31316f['other']=_0x4acab5,_0x31316f['contacts']=_0x57bc45,_0x31316f;}['_cleanOldC'+'ollisions'](){for(const _0x19d136 in this['collisions'])if(this['collisions']['hasOwnProp'+'erty'](_0x19d136)){const _0x284f4b=this['frameColli'+'sions'][_0x19d136],_0x5a3834=this['collisions'][_0x19d136],_0x1fc280=_0x5a3834['entity'],_0x42bb4f=_0x1fc280['collision'],_0x32dfe8=_0x1fc280['rigidbody'],_0x416571=_0x5a3834['others'];let _0x589794=_0x416571['length'];for(;_0x589794--;){const _0x2715b1=_0x416571[_0x589794];(!_0x284f4b||_0x284f4b['others']['indexOf'](_0x2715b1)<-0xa55+-0x2e0*-0xd+-0x1b0b)&&(_0x416571['splice'](_0x589794,-0x142a+0x253b*-0x1+0x1da*0x1f),_0x1fc280['trigger']?(_0x42bb4f&&_0x42bb4f['fire']('triggerlea'+'ve',_0x2715b1),_0x2715b1['rigidbody']&&_0x2715b1['rigidbody']['fire']('triggerlea'+'ve',_0x1fc280)):_0x2715b1['trigger']||(_0x32dfe8&&_0x32dfe8['fire']('collisione'+'nd',_0x2715b1),_0x42bb4f&&_0x42bb4f['fire']('collisione'+'nd',_0x2715b1)));}_0x416571['length']===0x74*0x9+-0xdb+0xb*-0x4b&&delete this['collisions'][_0x19d136];}}['_hasContac'+'tEvent'](_0x1a3192){const _0x28437f=_0x1a3192['collision'];if(_0x28437f&&(_0x28437f['hasEvent']('collisions'+'tart')||_0x28437f['hasEvent']('collisione'+'nd')||_0x28437f['hasEvent']('contact')))return!(-0x4*-0x309+0x19*-0x5c+0x2*-0x194);const _0x4351f0=_0x1a3192['rigidbody'];return _0x4351f0&&(_0x4351f0['hasEvent']('collisions'+'tart')||_0x4351f0['hasEvent']('collisione'+'nd')||_0x4351f0['hasEvent']('contact'));}['_checkForC'+'ollisions'](_0x3f051e,_0x3737de){const _0x5c98bb=Ammo['wrapPointe'+'r'](_0x3f051e,Ammo['btDynamics'+'World'])['getDispatc'+'her'](),_0x5a692b=_0x5c98bb['getNumMani'+'folds']();this['frameColli'+'sions']={};for(let _0x56a0b8=0x108e+-0x630+-0x2*0x52f;_0x56a0b8<_0x5a692b;_0x56a0b8++){const _0x821c70=_0x5c98bb['getManifol'+'dByIndexIn'+'ternal'](_0x56a0b8),_0x59b30d=_0x821c70['getBody0'](),_0x56960f=_0x821c70['getBody1'](),_0x34aadc=Ammo['castObject'](_0x59b30d,Ammo['btRigidBod'+'y']),_0x557d41=Ammo['castObject'](_0x56960f,Ammo['btRigidBod'+'y']),_0x444f6d=_0x34aadc['entity'],_0x3382ca=_0x557d41['entity'];if(!_0x444f6d||!_0x3382ca)continue;const _0x11263e=_0x34aadc['getCollisi'+'onFlags'](),_0x1c2a55=_0x557d41['getCollisi'+'onFlags'](),_0x601bc4=_0x821c70['getNumCont'+'acts'](),_0x5019ee=[],_0xc3572e=[];let _0x59f33f;if(_0x601bc4>-0x1*0x1+-0x8a5*-0x4+-0x1*0x2293){if(_0x11263e&go||_0x1c2a55&go){const _0x7093ca=_0x444f6d['collision']&&(_0x444f6d['collision']['hasEvent']('triggerent'+'er')||_0x444f6d['collision']['hasEvent']('triggerlea'+'ve')),_0x27d11e=_0x3382ca['collision']&&(_0x3382ca['collision']['hasEvent']('triggerent'+'er')||_0x3382ca['collision']['hasEvent']('triggerlea'+'ve')),_0x1b0283=_0x444f6d['rigidbody']&&(_0x444f6d['rigidbody']['hasEvent']('triggerent'+'er')||_0x444f6d['rigidbody']['hasEvent']('triggerlea'+'ve')),_0x18ad45=_0x3382ca['rigidbody']&&(_0x3382ca['rigidbody']['hasEvent']('triggerent'+'er')||_0x3382ca['rigidbody']['hasEvent']('triggerlea'+'ve'));_0x7093ca&&(_0x59f33f=this['_storeColl'+'ision'](_0x444f6d,_0x3382ca),_0x59f33f&&!(_0x1c2a55&go)&&_0x444f6d['collision']['fire']('triggerent'+'er',_0x3382ca)),_0x27d11e&&(_0x59f33f=this['_storeColl'+'ision'](_0x3382ca,_0x444f6d),_0x59f33f&&!(_0x11263e&go)&&_0x3382ca['collision']['fire']('triggerent'+'er',_0x444f6d)),_0x1b0283&&(_0x59f33f||(_0x59f33f=this['_storeColl'+'ision'](_0x3382ca,_0x444f6d)),_0x59f33f&&_0x444f6d['rigidbody']['fire']('triggerent'+'er',_0x3382ca)),_0x18ad45&&(_0x59f33f||(_0x59f33f=this['_storeColl'+'ision'](_0x444f6d,_0x3382ca)),_0x59f33f&&_0x3382ca['rigidbody']['fire']('triggerent'+'er',_0x444f6d));}else{const _0x1e9263=this['_hasContac'+'tEvent'](_0x444f6d),_0x3e240b=this['_hasContac'+'tEvent'](_0x3382ca),_0x167341=this['hasEvent']('contact');if(_0x167341||_0x1e9263||_0x3e240b){for(let _0x5c089b=-0x3*-0x70a+-0x1f98+0x37e*0x3;_0x5c089b<_0x601bc4;_0x5c089b++){const _0x1154a1=_0x821c70['getContact'+'Point'](_0x5c089b),_0x2b89f3=this['_createCon'+'tactPointF'+'romAmmo'](_0x1154a1);if(_0x1e9263||_0x3e240b){_0x5019ee['push'](_0x2b89f3);const _0x56b338=this['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x1154a1);_0xc3572e['push'](_0x56b338);}if(_0x167341){const _0xbb94eb=this['_createSin'+'gleContact'+'Result'](_0x444f6d,_0x3382ca,_0x2b89f3);this['fire']('contact',_0xbb94eb);}}if(_0x1e9263){const _0xaa393a=this['_createCon'+'tactResult'](_0x3382ca,_0x5019ee);_0x59f33f=this['_storeColl'+'ision'](_0x444f6d,_0x3382ca),_0x444f6d['collision']&&(_0x444f6d['collision']['fire']('contact',_0xaa393a),_0x59f33f&&_0x444f6d['collision']['fire']('collisions'+'tart',_0xaa393a)),_0x444f6d['rigidbody']&&(_0x444f6d['rigidbody']['fire']('contact',_0xaa393a),_0x59f33f&&_0x444f6d['rigidbody']['fire']('collisions'+'tart',_0xaa393a));}if(_0x3e240b){const _0xabfe62=this['_createCon'+'tactResult'](_0x444f6d,_0xc3572e);_0x59f33f=this['_storeColl'+'ision'](_0x3382ca,_0x444f6d),_0x3382ca['collision']&&(_0x3382ca['collision']['fire']('contact',_0xabfe62),_0x59f33f&&_0x3382ca['collision']['fire']('collisions'+'tart',_0xabfe62)),_0x3382ca['rigidbody']&&(_0x3382ca['rigidbody']['fire']('contact',_0xabfe62),_0x59f33f&&_0x3382ca['rigidbody']['fire']('collisions'+'tart',_0xabfe62));}}}}}this['_cleanOldC'+'ollisions'](),this['contactPoi'+'ntPool']['freeAll'](),this['contactRes'+'ultPool']['freeAll'](),this['singleCont'+'actResultP'+'ool']['freeAll']();}['onUpdate'](_0xe448e){let _0x3e24d5,_0x1e7d4e;this['_stats']['physicsSta'+'rt']=de(),this['_gravityFl'+'oat32'][0x19b5*-0x1+-0x1668+0x6d*0x71]=this['gravity']['x'],this['_gravityFl'+'oat32'][-0x58*-0x1f+0x2c*0xad+0x2863*-0x1]=this['gravity']['y'],this['_gravityFl'+'oat32'][-0x27c+-0x4*0x38f+0x10ba]=this['gravity']['z'];const _0x552de5=this['dynamicsWo'+'rld']['getGravity']();(_0x552de5['x']()!==this['_gravityFl'+'oat32'][0x67e+-0x55*-0x2f+-0x1619]||_0x552de5['y']()!==this['_gravityFl'+'oat32'][0x160b+-0xc22+-0x4*0x27a]||_0x552de5['z']()!==this['_gravityFl'+'oat32'][0xfa3+-0x14bc+0x51b*0x1])&&(_0x552de5['setValue'](this['gravity']['x'],this['gravity']['y'],this['gravity']['z']),this['dynamicsWo'+'rld']['setGravity'](_0x552de5));const _0x210405=this['_triggers'];for(_0x3e24d5=0x629+0xd15+-0x133e,_0x1e7d4e=_0x210405['length'];_0x3e24d5<_0x1e7d4e;_0x3e24d5++)_0x210405[_0x3e24d5]['updateTran'+'sform']();const _0x20de46=this['_compounds'];for(_0x3e24d5=0x2*0xadb+0x1*0x707+-0x1cbd,_0x1e7d4e=_0x20de46['length'];_0x3e24d5<_0x1e7d4e;_0x3e24d5++)_0x20de46[_0x3e24d5]['_updateCom'+'pound']();const _0x155a2f=this['_kinematic'];for(_0x3e24d5=0x2e*0x61+0x12d9*-0x2+-0x2*-0xa22,_0x1e7d4e=_0x155a2f['length'];_0x3e24d5<_0x1e7d4e;_0x3e24d5++)_0x155a2f[_0x3e24d5]['_updateKin'+'ematic']();this['dynamicsWo'+'rld']['stepSimula'+'tion'](_0xe448e,this['maxSubStep'+'s'],this['fixedTimeS'+'tep']);const _0x2427c9=this['_dynamic'];for(_0x3e24d5=-0x3a7+0x39*0x9d+-0x1f4e,_0x1e7d4e=_0x2427c9['length'];_0x3e24d5<_0x1e7d4e;_0x3e24d5++)_0x2427c9[_0x3e24d5]['_updateDyn'+'amic']();this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']||this['_checkForC'+'ollisions'](Ammo['getPointer'](this['dynamicsWo'+'rld']),_0xe448e),this['_stats']['physicsTim'+'e']=de()-this['_stats']['physicsSta'+'rt'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),typeof Ammo<'u'&&(Ammo['destroy'](this['dynamicsWo'+'rld']),Ammo['destroy'](this['solver']),Ammo['destroy'](this['overlappin'+'gPairCache']),Ammo['destroy'](this['dispatcher']),Ammo['destroy'](this['collisionC'+'onfigurati'+'on']),Ammo['destroy'](Mi),Ammo['destroy'](Di),this['dynamicsWo'+'rld']=null,this['solver']=null,this['overlappin'+'gPairCache']=null,this['dispatcher']=null,this['collisionC'+'onfigurati'+'on']=null,Mi=null,Di=null,bs['onAppDestr'+'oy']());}}h(Kp,'EVENT_CONT'+'ACT','contact'),we['_buildAcce'+'ssors'](bs['prototype'],bv);const Xa='none',dO='blend',Ag=new te();class Av extends we{constructor(_0x1e38ef,_0x54cce6){super(_0x1e38ef,_0x54cce6),this['_resolutio'+'n']=new J(-0x24b5*-0x1+0x3fd*0x8+-0x421d,0x201b+0x6c9+-0x1b6*0x16),this['_reference'+'Resolution']=new J(-0xd0c+0x18c3+-0x937,-0x1b2b+-0x1*-0x32f+-0x13*-0x154),this['_scaleMode']=Xa,this['scale']=0x800+0x2*-0x7b5+-0x3*-0x279,this['_scaleBlen'+'d']=-0x2*-0x1e9+-0x1*0x1f28+-0xdab*-0x2+0.5,this['_priority']=0x11a5*-0x2+0x16dd+0xc6d,this['_screenSpa'+'ce']=!(0x107*0x8+-0x31*-0x9e+-0x2675),this['cull']=this['_screenSpa'+'ce'],this['_screenMat'+'rix']=new te(),this['_elements']=new Set(),_0x1e38ef['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this);}['syncDrawOr'+'der'](){this['system']['queueDrawO'+'rderSync'](this['entity']['getGuid'](),this['_processDr'+'awOrderSyn'+'c'],this);}['_recurseDr'+'awOrderSyn'+'c'](_0x4a00f1,_0x707b3f){var _0x169078;if(!(_0x4a00f1 instanceof lt))return _0x707b3f;if(_0x4a00f1['element']){const _0x54a032=_0x4a00f1['element']['drawOrder'];_0x4a00f1['element']['drawOrder']=_0x707b3f++,_0x4a00f1['element']['_batchGrou'+'pId']>=0x18f1+-0x175*0x19+0xb7c&&_0x54a032!==_0x4a00f1['element']['drawOrder']&&((_0x169078=this['system']['app']['batcher'])==null||_0x169078['markGroupD'+'irty'](_0x4a00f1['element']['_batchGrou'+'pId']));}_0x4a00f1['particlesy'+'stem']&&(_0x4a00f1['particlesy'+'stem']['drawOrder']=_0x707b3f++);const _0x533ac4=_0x4a00f1['children'];for(let _0x5e7900=-0xa*0x14c+-0x1*0x16f+-0x3*-0x4cd;_0x5e7900<_0x533ac4['length'];_0x5e7900++)_0x707b3f=this['_recurseDr'+'awOrderSyn'+'c'](_0x533ac4[_0x5e7900],_0x707b3f);return _0x707b3f;}['_processDr'+'awOrderSyn'+'c'](){this['_recurseDr'+'awOrderSyn'+'c'](this['entity'],-0x1*-0x1e3b+0x1e5+-0x201f),this['fire']('syncdrawor'+'der');}['_calcProje'+'ctionMatri'+'x'](){const _0x20cf7e=this['_resolutio'+'n']['x']/this['scale'],_0x17a478=this['_resolutio'+'n']['y']/this['scale'],_0x20be57=0xef2+0x2f9+-0x21*0x8b,_0x125a90=_0x20cf7e,_0x44975c=-_0x17a478;this['_screenMat'+'rix']['setOrtho'](_0x20be57,_0x125a90,_0x44975c,0x95*-0xd+-0x11*-0x170+0x269*-0x7,0x177*-0xf+0x2d*0x8b+-0x25*0x11,-(0xb1e+0x11e1+-0x6*0x4d5)),this['_screenSpa'+'ce']||(Ag['setScale']((-0x2*0x232+-0x176d+0x1bd1*0x1+0.5)*_0x20cf7e,(0xd*0x63+0x12e+-0xe3*0x7+0.5)*_0x17a478,-0x1718+0x4a+0x16cf),this['_screenMat'+'rix']['mul2'](Ag,this['_screenMat'+'rix']));}['_updateSca'+'le'](){this['scale']=this['_calcScale'](this['_resolutio'+'n'],this['referenceR'+'esolution']);}['_calcScale'](_0x3cb082,_0x238e9e){const _0x12296a=Math['log2']((_0x3cb082['x']||0x2603+0x2314+-0x4916)/_0x238e9e['x']),_0x142854=Math['log2']((_0x3cb082['y']||-0x650+0x1771+-0x1120)/_0x238e9e['y']);return Math['pow'](-0x11d7+-0x802+0x19db,_0x12296a*(-0xd00*0x1+0x4*-0x79f+0x2b7d-this['_scaleBlen'+'d'])+_0x142854*this['_scaleBlen'+'d']);}['_onResize'](_0x14e7de,_0xc064e8){this['_screenSpa'+'ce']&&(this['_resolutio'+'n']['set'](_0x14e7de,_0xc064e8),this['resolution']=this['_resolutio'+'n']);}['_bindEleme'+'nt'](_0x218058){this['_elements']['add'](_0x218058);}['_unbindEle'+'ment'](_0x23fe55){this['_elements']['delete'](_0x23fe55);}['onRemove'](){this['system']['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['fire']('remove'),this['_elements']['forEach'](_0x5bc7fd=>_0x5bc7fd['_onScreenR'+'emove']()),this['_elements']['clear'](),this['off']();}set['resolution'](_0x4a0d30){this['_screenSpa'+'ce']?this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']):this['_resolutio'+'n']['set'](_0x4a0d30['x'],_0x4a0d30['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:resolu'+'tion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x441460=>_0x441460['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['resolution'](){return this['_resolutio'+'n'];}set['referenceR'+'esolution'](_0x11df3f){this['_reference'+'Resolution']['set'](_0x11df3f['x'],_0x11df3f['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:refere'+'nceresolut'+'ion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x51be33=>_0x51be33['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['referenceR'+'esolution'](){return this['_scaleMode']===Xa?this['_resolutio'+'n']:this['_reference'+'Resolution'];}set['screenSpac'+'e'](_0x2e8ed4){this['_screenSpa'+'ce']=_0x2e8ed4,this['_screenSpa'+'ce']&&this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']),this['resolution']=this['_resolutio'+'n'],this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:screen'+'space',this['_screenSpa'+'ce']),this['_elements']['forEach'](_0x42dce7=>_0x42dce7['_onScreenS'+'paceChange']());}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['scaleMode'](_0x16f4b5){_0x16f4b5!==Xa&&_0x16f4b5!==dO&&(_0x16f4b5=Xa),!this['_screenSpa'+'ce']&&_0x16f4b5!==Xa&&(_0x16f4b5=Xa),this['_scaleMode']=_0x16f4b5,this['resolution']=this['_resolutio'+'n'],this['fire']('set:scalem'+'ode',this['_scaleMode']);}get['scaleMode'](){return this['_scaleMode'];}set['scaleBlend'](_0x13618e){this['_scaleBlen'+'d']=_0x13618e,this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:scaleb'+'lend',this['_scaleBlen'+'d']),this['_elements']['forEach'](_0x926514=>_0x926514['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['scaleBlend'](){return this['_scaleBlen'+'d'];}set['priority'](_0x174397){_0x174397>0x696*0x2+-0x207d+0x41*0x50&&(w['warn']('Clamping\x20s'+'creen\x20prio'+'rity\x20from\x20'+_0x174397+'\x20to\x20255'),_0x174397=-0x3b*-0x93+0x6c+-0x214e),this['_priority']!==_0x174397&&(this['_priority']=_0x174397,this['syncDrawOr'+'der']());}get['priority'](){return this['_priority'];}}class fO{constructor(){this['enabled']=!(-0x6*0x310+-0x156*-0x2+-0xc9*-0x14);}}const fu=['enabled'];class uO extends ct{constructor(_0x5200e5){super(_0x5200e5),this['id']='screen',this['ComponentT'+'ype']=Av,this['DataType']=fO,this['schema']=fu,this['windowReso'+'lution']=new J(),this['_drawOrder'+'SyncQueue']=new D0(),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['initialize'+'ComponentD'+'ata'](_0x1c9611,_0x1b1f71,_0x5d6b57){_0x1b1f71['priority']!==void(0xc*0x20e+-0x133b+-0x56d)&&(_0x1c9611['priority']=_0x1b1f71['priority']),_0x1b1f71['screenSpac'+'e']!==void(-0x1464+0x644+-0x10*-0xe2)&&(_0x1c9611['screenSpac'+'e']=_0x1b1f71['screenSpac'+'e']),_0x1c9611['cull']=_0x1c9611['screenSpac'+'e'],_0x1b1f71['scaleMode']!==void(-0x12b5+-0x1*-0xadd+0x7d8)&&(_0x1c9611['scaleMode']=_0x1b1f71['scaleMode']),_0x1b1f71['scaleBlend']!==void(0x1e94+-0x15*0x133+-0x1*0x565)&&(_0x1c9611['scaleBlend']=_0x1b1f71['scaleBlend']),_0x1b1f71['resolution']!==void(0x2442+-0x1*-0x955+-0x2d97)&&(_0x1b1f71['resolution']instanceof J?_0x1c9611['_resolutio'+'n']['copy'](_0x1b1f71['resolution']):_0x1c9611['_resolutio'+'n']['set'](_0x1b1f71['resolution'][-0x1ccc+-0x2ae*0x8+0x323c],_0x1b1f71['resolution'][0x2124+-0x9*0x62+-0x1db1]),_0x1c9611['resolution']=_0x1c9611['_resolutio'+'n']),_0x1b1f71['referenceR'+'esolution']!==void(0x9*0x5f+-0x4d*0x16+0x1*0x347)&&(_0x1b1f71['referenceR'+'esolution']instanceof J?_0x1c9611['_reference'+'Resolution']['copy'](_0x1b1f71['referenceR'+'esolution']):_0x1c9611['_reference'+'Resolution']['set'](_0x1b1f71['referenceR'+'esolution'][-0xa91+-0x2154+0x11*0x295],_0x1b1f71['referenceR'+'esolution'][-0xa3*0x18+-0x1043+-0x4*-0x7e3]),_0x1c9611['referenceR'+'esolution']=_0x1c9611['_reference'+'Resolution']),_0x1c9611['syncDrawOr'+'der'](),super['initialize'+'ComponentD'+'ata'](_0x1c9611,_0x1b1f71,fu);}['destroy'](){super['destroy'](),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this);}['_onUpdate'](_0x2936a0){const _0x2ba12b=this['store'];for(const _0x179df9 in _0x2ba12b)_0x2ba12b[_0x179df9]['entity']['screen']['update']&&_0x2ba12b[_0x179df9]['entity']['screen']['update'](_0x2936a0);}['_onResize'](_0x3c8fee,_0x4bfbaf){this['windowReso'+'lution']['x']=_0x3c8fee,this['windowReso'+'lution']['y']=_0x4bfbaf;}['cloneCompo'+'nent'](_0x1d0586,_0xbe0031){const _0x56ae70=_0x1d0586['screen'];return this['addCompone'+'nt'](_0xbe0031,{'enabled':_0x56ae70['enabled'],'screenSpace':_0x56ae70['screenSpac'+'e'],'scaleMode':_0x56ae70['scaleMode'],'resolution':_0x56ae70['resolution']['clone'](),'referenceResolution':_0x56ae70['referenceR'+'esolution']['clone']()});}['onRemoveCo'+'mponent'](_0x550dd5,_0x98f776){_0x98f776['onRemove']();}['processDra'+'wOrderSync'+'Queue'](){const _0x3d7fd8=this['_drawOrder'+'SyncQueue']['list']();for(let _0x1517e1=0x3*-0x8f+-0x7*-0x189+0x12*-0x81;_0x1517e1<_0x3d7fd8['length'];_0x1517e1++){const _0x22ef30=_0x3d7fd8[_0x1517e1];_0x22ef30['callback']['call'](_0x22ef30['scope']);}this['_drawOrder'+'SyncQueue']['clear']();}['queueDrawO'+'rderSync'](_0x1cb49a,_0x6f8896,_0x2ef423){this['_drawOrder'+'SyncQueue']['list']()['length']||this['app']['once']('prerender',this['processDra'+'wOrderSync'+'Queue'],this),this['_drawOrder'+'SyncQueue']['has'](_0x1cb49a)||this['_drawOrder'+'SyncQueue']['push'](_0x1cb49a,{'callback':_0x6f8896,'scope':_0x2ef423});}}we['_buildAcce'+'ssors'](Av['prototype'],fu);const or=new J(),Cg=new D(),Br=new wn(),Pg=new _S(),Mg=new D(),uo=new D(),pO=new le(),mO={'x':'y','y':'x'};class Do extends me{constructor(_0x587188,_0x42e9aa){if(super(),!_0x587188||!(_0x587188 instanceof hs))throw new Error('Element\x20wa'+'s\x20null\x20or\x20'+'not\x20an\x20Ele'+'mentCompon'+'ent');if(_0x42e9aa&&_0x42e9aa!=='x'&&_0x42e9aa!=='y')throw new Error('Unrecogniz'+'ed\x20axis:\x20'+_0x42e9aa);this['_element']=_0x587188,this['_app']=_0x587188['system']['app'],this['_axis']=_0x42e9aa||null,this['_enabled']=!(0x1*-0x217+-0x950+0xb67),this['_dragScale']=new D(),this['_dragStart'+'MousePosit'+'ion']=new D(),this['_dragStart'+'HandlePosi'+'tion']=new D(),this['_deltaMous'+'ePosition']=new D(),this['_deltaHand'+'lePosition']=new D(),this['_isDraggin'+'g']=!(0xbf7*-0x1+0x22fb+-0x1703),this['_toggleLif'+'ecycleList'+'eners']('on');}['_toggleLif'+'ecycleList'+'eners'](_0x54780b){this['_element'][_0x54780b]('mousedown',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x54780b]('touchstart',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x54780b]('selectstar'+'t',this['_onMouseDo'+'wnOrTouchS'+'tart'],this);}['_toggleDra'+'gListeners'](_0x49fe3){const _0x4ec383=_0x49fe3==='on';this['_hasDragLi'+'steners']&&_0x4ec383||(this['_app']['mouse']&&(this['_element'][_0x49fe3]('mousemove',this['_onMove'],this),this['_element'][_0x49fe3]('mouseup',this['_onMouseUp'+'OrTouchEnd'],this)),Me['touch']&&(this['_element'][_0x49fe3]('touchmove',this['_onMove'],this),this['_element'][_0x49fe3]('touchend',this['_onMouseUp'+'OrTouchEnd'],this),this['_element'][_0x49fe3]('touchcance'+'l',this['_onMouseUp'+'OrTouchEnd'],this)),this['_element'][_0x49fe3]('selectmove',this['_onMove'],this),this['_element'][_0x49fe3]('selectend',this['_onMouseUp'+'OrTouchEnd'],this),this['_hasDragLi'+'steners']=_0x4ec383);}['_onMouseDo'+'wnOrTouchS'+'tart'](_0x57a2bd){if(this['_element']&&!this['_isDraggin'+'g']&&this['enabled']){this['_dragCamer'+'a']=_0x57a2bd['camera'],this['_calculate'+'DragScale']();const _0x227030=this['_screenToL'+'ocal'](_0x57a2bd);_0x227030&&(this['_toggleDra'+'gListeners']('on'),this['_isDraggin'+'g']=!(-0x2135+0x125f+0x1a6*0x9),this['_dragStart'+'MousePosit'+'ion']['copy'](_0x227030),this['_dragStart'+'HandlePosi'+'tion']['copy'](this['_element']['entity']['getLocalPo'+'sition']()),this['fire']('drag:start'));}}['_onMouseUp'+'OrTouchEnd'](){this['_isDraggin'+'g']&&(this['_isDraggin'+'g']=!(0x1bd1+0x116d*-0x2+0x70a),this['_toggleDra'+'gListeners']('off'),this['fire']('drag:end'));}['_screenToL'+'ocal'](_0x5e226d){return _0x5e226d['inputSourc'+'e']?Br['set'](_0x5e226d['inputSourc'+'e']['getOrigin'](),_0x5e226d['inputSourc'+'e']['getDirecti'+'on']()):(this['_determine'+'InputPosit'+'ion'](_0x5e226d),this['_chooseRay'+'OriginAndD'+'irection']()),Mg['copy'](this['_element']['entity']['forward'])['mulScalar'](-(0x26c6+-0x1647+-0x107e)),Pg['setFromPoi'+'ntNormal'](this['_element']['entity']['getPositio'+'n'](),Mg),Pg['intersects'+'Ray'](Br,uo)?(pO['copy'](this['_element']['entity']['getRotatio'+'n']())['invert']()['transformV'+'ector'](uo,uo),uo['mul'](this['_dragScale']),uo):null;}['_determine'+'InputPosit'+'ion'](_0x2aa964){const _0x526b88=this['_app']['graphicsDe'+'vice']['maxPixelRa'+'tio'];typeof _0x2aa964['x']<'u'&&typeof _0x2aa964['y']<'u'?(or['x']=_0x2aa964['x']*_0x526b88,or['y']=_0x2aa964['y']*_0x526b88):_0x2aa964['changedTou'+'ches']?(or['x']=_0x2aa964['changedTou'+'ches'][0x1484+-0x24a1+-0xa5*-0x19]['x']*_0x526b88,or['y']=_0x2aa964['changedTou'+'ches'][0x53f*0x3+0xd*-0x183+0x3ea]['y']*_0x526b88):console['warn']('Could\x20not\x20'+'determine\x20'+'position\x20f'+'rom\x20input\x20'+'event');}['_chooseRay'+'OriginAndD'+'irection'](){this['_element']['screen']&&this['_element']['screen']['screen']['screenSpac'+'e']?(Br['origin']['set'](or['x'],-or['y'],0xa70+-0x2686*0x1+0x1c16),Br['direction']['copy'](D['FORWARD'])):(Cg['copy'](this['_dragCamer'+'a']['screenToWo'+'rld'](or['x'],or['y'],0x6e3+-0x1679+0xf97)),Br['origin']['copy'](this['_dragCamer'+'a']['entity']['getPositio'+'n']()),Br['direction']['copy'](Cg)['sub'](Br['origin'])['normalize']());}['_calculate'+'DragScale'](){let _0x42edf5=this['_element']['entity']['parent'];const _0x47ee18=this['_element']['screen']&&this['_element']['screen']['screen'],_0x68b9bf=_0x47ee18&&_0x47ee18['screenSpac'+'e'],_0x442831=_0x68b9bf?_0x47ee18['scale']:0x78+0xb*-0x11a+0xba7,_0x4cbd8e=this['_dragScale'];for(_0x4cbd8e['set'](_0x442831,_0x442831,_0x442831);_0x42edf5&&(_0x4cbd8e['mul'](_0x42edf5['getLocalSc'+'ale']()),_0x42edf5=_0x42edf5['parent'],!(_0x68b9bf&&_0x42edf5['screen'])););_0x4cbd8e['x']=(0x3a+-0x1*-0x273+-0x2ac)/_0x4cbd8e['x'],_0x4cbd8e['y']=(-0x2668+-0x1274*-0x2+-0x181*-0x1)/_0x4cbd8e['y'],_0x4cbd8e['z']=-0xd*-0x80+-0x2*-0x9e5+0x1a4a*-0x1;}['_onMove'](_0x1f3813){const {_element:_0x11fe35,_deltaMousePosition:_0xcda22d,_deltaHandlePosition:_0x21b253,_axis:_0x219f7c}=this;if(_0x11fe35&&this['_isDraggin'+'g']&&this['enabled']&&_0x11fe35['enabled']&&_0x11fe35['entity']['enabled']){const _0x140f44=this['_screenToL'+'ocal'](_0x1f3813);if(_0x140f44){if(_0xcda22d['sub2'](_0x140f44,this['_dragStart'+'MousePosit'+'ion']),_0x21b253['add2'](this['_dragStart'+'HandlePosi'+'tion'],_0xcda22d),_0x219f7c){const _0xc57003=_0x11fe35['entity']['getLocalPo'+'sition'](),_0x227845=mO[_0x219f7c];_0x21b253[_0x227845]=_0xc57003[_0x227845];}_0x11fe35['entity']['setLocalPo'+'sition'](_0x21b253),this['fire']('drag:move',_0x21b253);}}}['destroy'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleDra'+'gListeners']('off');}set['enabled'](_0x2a6545){this['_enabled']=_0x2a6545;}get['enabled'](){return this['_enabled'];}get['isDragging'](){return this['_isDraggin'+'g'];}}h(Do,'EVENT_DRAG'+'START','drag:start'),h(Do,'EVENT_DRAG'+'END','drag:end'),h(Do,'EVENT_DRAG'+'MOVE','drag:move');const _O=0x1*-0x1c3+0x201b+-0x1e58,Dg=0x446*-0x1+0x1*0xb9d+-0x6*0x139,gO=0x31*0x98+-0xd09+-0x100d,SO=-0x4ae*-0x2+0x1*0xd21+-0x167d,yO=-0x1*0xffd+0x12ef*0x1+0xfb*-0x3,po=new J();class Cv extends we{constructor(_0x492511,_0x104880){super(_0x492511,_0x104880),h(this,'_viewportE'+'ntity',null),h(this,'_contentEn'+'tity',null),h(this,'_horizonta'+'lScrollbar'+'Entity',null),h(this,'_verticalS'+'crollbarEn'+'tity',null),h(this,'_evtElemen'+'tRemove',null),h(this,'_evtViewpo'+'rtElementR'+'emove',null),h(this,'_evtViewpo'+'rtResize',null),h(this,'_evtConten'+'tEntityEle'+'mentAdd',null),h(this,'_evtConten'+'tElementRe'+'move',null),h(this,'_evtConten'+'tResize',null),h(this,'_evtHorizo'+'ntalScroll'+'barAdd',null),h(this,'_evtHorizo'+'ntalScroll'+'barRemove',null),h(this,'_evtHorizo'+'ntalScroll'+'barValue',null),h(this,'_evtVertic'+'alScrollba'+'rAdd',null),h(this,'_evtVertic'+'alScrollba'+'rRemove',null),h(this,'_evtVertic'+'alScrollba'+'rValue',null),(this['_scrollbar'+'UpdateFlag'+'s']={},this['_scrollbar'+'Entities']={},this['_prevConte'+'ntSizes']={},this['_prevConte'+'ntSizes'][Ae]=null,this['_prevConte'+'ntSizes'][je]=null,this['_scroll']=new J(),this['_velocity']=new D(),this['_dragStart'+'Position']=new D(),this['_disabledC'+'ontentInpu'+'t']=!(-0x7cb+-0xebd+0x1*0x1689),this['_disabledC'+'ontentInpu'+'tEntities']=[],this['_toggleLif'+'ecycleList'+'eners']('on'),this['_toggleEle'+'mentListen'+'ers']('on'));}get['data'](){const _0x5c196c=this['system']['store'][this['entity']['getGuid']()];return _0x5c196c?_0x5c196c['data']:null;}set['enabled'](_0x2905b1){this['_setValue']('enabled',_0x2905b1);}get['enabled'](){return this['data']['enabled'];}set['horizontal'](_0x27cb8e){this['_setValue']('horizontal',_0x27cb8e);}get['horizontal'](){return this['data']['horizontal'];}set['vertical'](_0x12bc5f){this['_setValue']('vertical',_0x12bc5f);}get['vertical'](){return this['data']['vertical'];}set['scrollMode'](_0x4fb987){this['_setValue']('scrollMode',_0x4fb987);}get['scrollMode'](){return this['data']['scrollMode'];}set['bounceAmou'+'nt'](_0x469f13){this['_setValue']('bounceAmou'+'nt',_0x469f13);}get['bounceAmou'+'nt'](){return this['data']['bounceAmou'+'nt'];}set['friction'](_0x584358){this['_setValue']('friction',_0x584358);}get['friction'](){return this['data']['friction'];}set['dragThresh'+'old'](_0x2611dd){this['_setValue']('dragThresh'+'old',_0x2611dd);}get['dragThresh'+'old'](){return this['data']['dragThresh'+'old'];}set['useMouseWh'+'eel'](_0x423e64){this['_setValue']('useMouseWh'+'eel',_0x423e64);}get['useMouseWh'+'eel'](){return this['data']['useMouseWh'+'eel'];}set['mouseWheel'+'Sensitivit'+'y'](_0x4d0995){this['_setValue']('mouseWheel'+'Sensitivit'+'y',_0x4d0995);}get['mouseWheel'+'Sensitivit'+'y'](){return this['data']['mouseWheel'+'Sensitivit'+'y'];}set['horizontal'+'ScrollbarV'+'isibility'](_0x54144a){this['_setValue']('horizontal'+'ScrollbarV'+'isibility',_0x54144a);}get['horizontal'+'ScrollbarV'+'isibility'](){return this['data']['horizontal'+'ScrollbarV'+'isibility'];}set['verticalSc'+'rollbarVis'+'ibility'](_0x3d9d58){this['_setValue']('verticalSc'+'rollbarVis'+'ibility',_0x3d9d58);}get['verticalSc'+'rollbarVis'+'ibility'](){return this['data']['verticalSc'+'rollbarVis'+'ibility'];}set['viewportEn'+'tity'](_0xbcb5f3){if(this['_viewportE'+'ntity']===_0xbcb5f3)return;const _0x307248=typeof _0xbcb5f3=='string';this['_viewportE'+'ntity']&&_0x307248&&this['_viewportE'+'ntity']['getGuid']()===_0xbcb5f3||(this['_viewportE'+'ntity']&&this['_viewportE'+'ntityUnsub'+'scribe'](),_0xbcb5f3 instanceof Ie?this['_viewportE'+'ntity']=_0xbcb5f3:_0x307248?this['_viewportE'+'ntity']=this['system']['app']['getEntityF'+'romIndex'](_0xbcb5f3)||null:this['_viewportE'+'ntity']=null,this['_viewportE'+'ntity']&&this['_viewportE'+'ntitySubsc'+'ribe'](),this['_viewportE'+'ntity']?this['data']['viewportEn'+'tity']=this['_viewportE'+'ntity']['getGuid']():_0x307248&&_0xbcb5f3&&(this['data']['viewportEn'+'tity']=_0xbcb5f3));}get['viewportEn'+'tity'](){return this['_viewportE'+'ntity'];}set['contentEnt'+'ity'](_0xdfa55e){if(this['_contentEn'+'tity']===_0xdfa55e)return;const _0x548a95=typeof _0xdfa55e=='string';this['_contentEn'+'tity']&&_0x548a95&&this['_contentEn'+'tity']['getGuid']()===_0xdfa55e||(this['_contentEn'+'tity']&&this['_contentEn'+'tityUnsubs'+'cribe'](),_0xdfa55e instanceof Ie?this['_contentEn'+'tity']=_0xdfa55e:_0x548a95?this['_contentEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0xdfa55e)||null:this['_contentEn'+'tity']=null,this['_contentEn'+'tity']&&this['_contentEn'+'titySubscr'+'ibe'](),this['_contentEn'+'tity']?this['data']['contentEnt'+'ity']=this['_contentEn'+'tity']['getGuid']():_0x548a95&&_0xdfa55e&&(this['data']['contentEnt'+'ity']=_0xdfa55e));}get['contentEnt'+'ity'](){return this['_contentEn'+'tity'];}set['horizontal'+'ScrollbarE'+'ntity'](_0x5877ac){if(this['_horizonta'+'lScrollbar'+'Entity']===_0x5877ac)return;const _0x327bc1=typeof _0x5877ac=='string';this['_horizonta'+'lScrollbar'+'Entity']&&_0x327bc1&&this['_horizonta'+'lScrollbar'+'Entity']['getGuid']()===_0x5877ac||(this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](),_0x5877ac instanceof Ie?this['_horizonta'+'lScrollbar'+'Entity']=_0x5877ac:_0x327bc1?this['_horizonta'+'lScrollbar'+'Entity']=this['system']['app']['getEntityF'+'romIndex'](_0x5877ac)||null:this['_horizonta'+'lScrollbar'+'Entity']=null,this['_scrollbar'+'Entities'][Ae]=this['_horizonta'+'lScrollbar'+'Entity'],this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](),this['_horizonta'+'lScrollbar'+'Entity']?this['data']['horizontal'+'ScrollbarE'+'ntity']=this['_horizonta'+'lScrollbar'+'Entity']['getGuid']():_0x327bc1&&_0x5877ac&&(this['data']['horizontal'+'ScrollbarE'+'ntity']=_0x5877ac));}get['horizontal'+'ScrollbarE'+'ntity'](){return this['_horizonta'+'lScrollbar'+'Entity'];}set['verticalSc'+'rollbarEnt'+'ity'](_0x31ce83){if(this['_verticalS'+'crollbarEn'+'tity']===_0x31ce83)return;const _0x5797b6=typeof _0x31ce83=='string';this['_verticalS'+'crollbarEn'+'tity']&&_0x5797b6&&this['_verticalS'+'crollbarEn'+'tity']['getGuid']()===_0x31ce83||(this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](),_0x31ce83 instanceof Ie?this['_verticalS'+'crollbarEn'+'tity']=_0x31ce83:_0x5797b6?this['_verticalS'+'crollbarEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x31ce83)||null:this['_verticalS'+'crollbarEn'+'tity']=null,this['_scrollbar'+'Entities'][je]=this['_verticalS'+'crollbarEn'+'tity'],this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](),this['_verticalS'+'crollbarEn'+'tity']?this['data']['verticalSc'+'rollbarEnt'+'ity']=this['_verticalS'+'crollbarEn'+'tity']['getGuid']():_0x5797b6&&_0x31ce83&&(this['data']['verticalSc'+'rollbarEnt'+'ity']=_0x31ce83));}get['verticalSc'+'rollbarEnt'+'ity'](){return this['_verticalS'+'crollbarEn'+'tity'];}set['scroll'](_0x48f151){this['_onSetScro'+'ll'](_0x48f151['x'],_0x48f151['y']);}get['scroll'](){return this['_scroll'];}['_setValue'](_0x43b11c,_0x5e2563){const _0x1c85e9=this['data'],_0x59b518=_0x1c85e9[_0x43b11c];_0x1c85e9[_0x43b11c]=_0x5e2563,this['fire']('set',_0x43b11c,_0x59b518,_0x5e2563);}['_toggleLif'+'ecycleList'+'eners'](_0x1b9fd3){this[_0x1b9fd3]('set_horizo'+'ntal',this['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'],this),this[_0x1b9fd3]('set_vertic'+'al',this['_onSetVert'+'icalScroll'+'ingEnabled'],this),this['entity'][_0x1b9fd3]('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this);}['_toggleEle'+'mentListen'+'ers'](_0x29b1b1){if(this['entity']['element']){if(_0x29b1b1==='on'&&this['_hasElemen'+'tListeners'])return;this['entity']['element'][_0x29b1b1]('resize',this['_syncAll'],this),this['entity']['element'][_0x29b1b1]('mousewheel',this['_onMouseWh'+'eel'],this),this['_hasElemen'+'tListeners']=_0x29b1b1==='on';}}['_onElement'+'ComponentA'+'dd'](_0x5e20cd){this['_evtElemen'+'tRemove']=this['entity']['element']['once']('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['_toggleEle'+'mentListen'+'ers']('on');}['_onElement'+'ComponentR'+'emove'](_0x5c4b80){var _0x431422;(_0x431422=this['_evtElemen'+'tRemove'])==null||_0x431422['off'](),this['_evtElemen'+'tRemove']=null,this['_toggleEle'+'mentListen'+'ers']('off');}['_viewportE'+'ntitySubsc'+'ribe'](){this['_evtViewpo'+'rtEntityEl'+'ementAdd']=this['_viewportE'+'ntity']['on']('element:ad'+'d',this['_onViewpor'+'tElementGa'+'in'],this),this['_viewportE'+'ntity']['element']&&this['_onViewpor'+'tElementGa'+'in']();}['_viewportE'+'ntityUnsub'+'scribe'](){var _0x539be4,_0x458a14;(_0x539be4=this['_evtViewpo'+'rtEntityEl'+'ementAdd'])==null||_0x539be4['off'](),this['_evtViewpo'+'rtEntityEl'+'ementAdd']=null,(_0x458a14=this['_viewportE'+'ntity'])!=null&&_0x458a14['element']&&this['_onViewpor'+'tElementLo'+'se']();}['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](){const _0x155827=this['_viewportE'+'ntity']['element'];this['_evtViewpo'+'rtElementR'+'emove']=_0x155827['once']('beforeremo'+'ve',this['_onViewpor'+'tElementLo'+'se'],this),this['_evtViewpo'+'rtResize']=_0x155827['on']('resize',this['_syncAll'],this);}['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe'](){var _0x3b3dd4,_0x50d1c3;(_0x3b3dd4=this['_evtViewpo'+'rtElementR'+'emove'])==null||_0x3b3dd4['off'](),this['_evtViewpo'+'rtElementR'+'emove']=null,(_0x50d1c3=this['_evtViewpo'+'rtResize'])==null||_0x50d1c3['off'](),this['_evtViewpo'+'rtResize']=null;}['_onViewpor'+'tElementGa'+'in'](){this['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](),this['_syncAll']();}['_onViewpor'+'tElementLo'+'se'](){this['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe']();}['_contentEn'+'titySubscr'+'ibe'](){this['_evtConten'+'tEntityEle'+'mentAdd']=this['_contentEn'+'tity']['on']('element:ad'+'d',this['_onContent'+'ElementGai'+'n'],this),this['_contentEn'+'tity']['element']&&this['_onContent'+'ElementGai'+'n']();}['_contentEn'+'tityUnsubs'+'cribe'](){var _0x12e168,_0x2d2add;(_0x12e168=this['_evtConten'+'tEntityEle'+'mentAdd'])==null||_0x12e168['off'](),this['_evtConten'+'tEntityEle'+'mentAdd']=null,(_0x2d2add=this['_contentEn'+'tity'])!=null&&_0x2d2add['element']&&this['_onContent'+'ElementLos'+'e']();}['_contentEn'+'tityElemen'+'tSubscribe'](){const _0x1ec085=this['_contentEn'+'tity']['element'];this['_evtConten'+'tElementRe'+'move']=_0x1ec085['once']('beforeremo'+'ve',this['_onContent'+'ElementLos'+'e'],this),this['_evtConten'+'tResize']=_0x1ec085['on']('resize',this['_syncAll'],this);}['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](){var _0x13a437,_0x4078e9;(_0x13a437=this['_evtConten'+'tElementRe'+'move'])==null||_0x13a437['off'](),this['_evtConten'+'tElementRe'+'move']=null,(_0x4078e9=this['_evtConten'+'tResize'])==null||_0x4078e9['off'](),this['_evtConten'+'tResize']=null;}['_onContent'+'ElementGai'+'n'](){this['_contentEn'+'tityElemen'+'tSubscribe'](),this['_destroyDr'+'agHelper'](),this['_contentDr'+'agHelper']=new Do(this['_contentEn'+'tity']['element']),this['_contentDr'+'agHelper']['on']('drag:start',this['_onContent'+'DragStart'],this),this['_contentDr'+'agHelper']['on']('drag:end',this['_onContent'+'DragEnd'],this),this['_contentDr'+'agHelper']['on']('drag:move',this['_onContent'+'DragMove'],this),this['_prevConte'+'ntSizes'][Ae]=null,this['_prevConte'+'ntSizes'][je]=null,this['_syncAll']();}['_onContent'+'ElementLos'+'e'](){this['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](),this['_destroyDr'+'agHelper']();}['_onContent'+'DragStart'](){this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&this['_dragStart'+'Position']['copy'](this['_contentEn'+'tity']['getLocalPo'+'sition']());}['_onContent'+'DragEnd'](){this['_prevConte'+'ntDragPosi'+'tion']=null,this['_enableCon'+'tentInput']();}['_onContent'+'DragMove'](_0x10ded6){if(this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&(this['_wasDragge'+'d']=!(-0x1b*0x12a+-0x1535+0x34a3),this['_setScroll'+'FromConten'+'tPosition'](_0x10ded6),this['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x10ded6),!this['_disabledC'+'ontentInpu'+'t'])){const _0x1ed705=_0x10ded6['x']-this['_dragStart'+'Position']['x'],_0x27a22d=_0x10ded6['y']-this['_dragStart'+'Position']['y'];(Math['abs'](_0x1ed705)>this['dragThresh'+'old']||Math['abs'](_0x27a22d)>this['dragThresh'+'old'])&&this['_disableCo'+'ntentInput']();}}['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](){this['_evtHorizo'+'ntalScroll'+'barAdd']=this['_horizonta'+'lScrollbar'+'Entity']['on']('scrollbar:'+'add',this['_onHorizon'+'talScrollb'+'arGain'],this),this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arGain']();}['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](){this['_evtVertic'+'alScrollba'+'rAdd']=this['_verticalS'+'crollbarEn'+'tity']['on']('scrollbar:'+'add',this['_onVertica'+'lScrollbar'+'Gain'],this),this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Gain']();}['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](){var _0x392df6;(_0x392df6=this['_evtHorizo'+'ntalScroll'+'barAdd'])==null||_0x392df6['off'](),this['_evtHorizo'+'ntalScroll'+'barAdd']=null,this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arLose']();}['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](){var _0x1d1df7;(_0x1d1df7=this['_evtVertic'+'alScrollba'+'rAdd'])==null||_0x1d1df7['off'](),this['_evtVertic'+'alScrollba'+'rAdd']=null,this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Lose']();}['_onSetHori'+'zontalScro'+'llbarValue'](_0x43c65b){!this['_scrollbar'+'UpdateFlag'+'s'][Ae]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](_0x43c65b,null);}['_onSetVert'+'icalScroll'+'barValue'](_0xca931c){!this['_scrollbar'+'UpdateFlag'+'s'][je]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](null,_0xca931c);}['_onHorizon'+'talScrollb'+'arGain'](){var _0x32374d;const _0x9bb946=(_0x32374d=this['_horizonta'+'lScrollbar'+'Entity'])==null?void(0x1d01+0x1*-0x106e+-0x431*0x3):_0x32374d['scrollbar'];this['_evtHorizo'+'ntalScroll'+'barRemove']=_0x9bb946['on']('beforeremo'+'ve',this['_onHorizon'+'talScrollb'+'arLose'],this),this['_evtHorizo'+'ntalScroll'+'barValue']=_0x9bb946['on']('set:value',this['_onSetHori'+'zontalScro'+'llbarValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](Ae),this['_syncScrol'+'lbarPositi'+'on'](Ae);}['_onVertica'+'lScrollbar'+'Gain'](){var _0xb17e3c;const _0xf7fa0a=(_0xb17e3c=this['_verticalS'+'crollbarEn'+'tity'])==null?void(0x17e3*0x1+0x1459*-0x1+-0x38a):_0xb17e3c['scrollbar'];this['_evtVertic'+'alScrollba'+'rRemove']=_0xf7fa0a['on']('beforeremo'+'ve',this['_onVertica'+'lScrollbar'+'Lose'],this),this['_evtVertic'+'alScrollba'+'rValue']=_0xf7fa0a['on']('set:value',this['_onSetVert'+'icalScroll'+'barValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](je),this['_syncScrol'+'lbarPositi'+'on'](je);}['_onHorizon'+'talScrollb'+'arLose'](){var _0x996b1b,_0x4eae73;(_0x996b1b=this['_evtHorizo'+'ntalScroll'+'barRemove'])==null||_0x996b1b['off'](),this['_evtHorizo'+'ntalScroll'+'barRemove']=null,(_0x4eae73=this['_evtHorizo'+'ntalScroll'+'barValue'])==null||_0x4eae73['off'](),this['_evtHorizo'+'ntalScroll'+'barValue']=null;}['_onVertica'+'lScrollbar'+'Lose'](){var _0x10685f,_0x187daf;(_0x10685f=this['_evtVertic'+'alScrollba'+'rRemove'])==null||_0x10685f['off'](),this['_evtVertic'+'alScrollba'+'rRemove']=null,(_0x187daf=this['_evtVertic'+'alScrollba'+'rValue'])==null||_0x187daf['off'](),this['_evtVertic'+'alScrollba'+'rValue']=null;}['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'](){this['_syncScrol'+'lbarEnable'+'dState'](Ae);}['_onSetVert'+'icalScroll'+'ingEnabled'](){this['_syncScrol'+'lbarEnable'+'dState'](je);}['_onSetScro'+'ll'](_0x4870f8,_0x340bbd,_0x51fc74){_0x51fc74!==!(-0x1c5f+-0x1*0x1679+-0x3*-0x10f3)&&this['_velocity']['set'](-0x1b57+0x9f7+-0x1*-0x1160,0x9c3+0x6cc+-0x108f,-0x139a+-0x112f+0x24c9);const _0x3f50ed=this['_updateAxi'+'s'](_0x4870f8,'x',Ae),_0x295679=this['_updateAxi'+'s'](_0x340bbd,'y',je);(_0x3f50ed||_0x295679)&&this['fire']('set:scroll',this['_scroll']);}['_updateAxi'+'s'](_0x46d428,_0x1c38c4,_0x51f751){const _0xda393e=_0x46d428!==null&&Math['abs'](_0x46d428-this['_scroll'][_0x1c38c4])>0x223*-0x4+-0x28e+0x196*0x7+0.00001;return(_0xda393e||this['_isDraggin'+'g']()||_0x46d428===0x1a9a*-0x1+0x3*-0x5bb+0x2bcb)&&(this['_scroll'][_0x1c38c4]=this['_determine'+'NewScrollV'+'alue'](_0x46d428,_0x1c38c4,_0x51f751),this['_syncConte'+'ntPosition'](_0x51f751),this['_syncScrol'+'lbarPositi'+'on'](_0x51f751)),_0xda393e;}['_determine'+'NewScrollV'+'alue'](_0x43547f,_0x274e1c,_0x4e0519){if(!this['_getScroll'+'ingEnabled'](_0x4e0519))return this['_scroll'][_0x274e1c];switch(this['scrollMode']){case _O:return Y['clamp'](_0x43547f,0x679*0x1+0x6d4+-0xd4d,this['_getMaxScr'+'ollValue'](_0x4e0519));case Dg:return this['_setVeloci'+'tyFromOver'+'shoot'](_0x43547f,_0x274e1c,_0x4e0519),_0x43547f;case gO:return _0x43547f;default:return console['warn']('Unhandled\x20'+'scroll\x20mod'+'e:'+this['scrollMode']),_0x43547f;}}['_syncAll'](){this['_syncConte'+'ntPosition'](Ae),this['_syncConte'+'ntPosition'](je),this['_syncScrol'+'lbarPositi'+'on'](Ae),this['_syncScrol'+'lbarPositi'+'on'](je),this['_syncScrol'+'lbarEnable'+'dState'](Ae),this['_syncScrol'+'lbarEnable'+'dState'](je);}['_syncConte'+'ntPosition'](_0x53663a){if(!this['_contentEn'+'tity'])return;const _0x36933e=this['_getAxis'](_0x53663a),_0xa11781=this['_getSign'](_0x53663a),_0x5ada05=this['_prevConte'+'ntSizes'][_0x53663a],_0x4937ba=this['_getConten'+'tSize'](_0x53663a);if(_0x5ada05!==null&&Math['abs'](_0x5ada05-_0x4937ba)>0x1c4b+0xd5f+-0x2*0x14d5+0.0001){const _0x254be1=this['_getMaxOff'+'set'](_0x53663a,_0x5ada05),_0x3b4d95=this['_getMaxOff'+'set'](_0x53663a,_0x4937ba);_0x3b4d95===0xffa+-0x93a*0x1+-0x6c0?this['_scroll'][_0x36933e]=-0x1169*-0x1+0x1f99*0x1+-0x3101:this['_scroll'][_0x36933e]=Y['clamp'](this['_scroll'][_0x36933e]*_0x254be1/_0x3b4d95,0x256*-0x1+0x4*0x442+-0x16*0xab,-0xce*-0x1f+0x1960+0x493*-0xb);}const _0x551420=this['_scroll'][_0x36933e]*this['_getMaxOff'+'set'](_0x53663a),_0x1f5c56=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x1f5c56[_0x36933e]=_0x551420*_0xa11781,this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x1f5c56),this['_prevConte'+'ntSizes'][_0x53663a]=_0x4937ba;}['_syncScrol'+'lbarPositi'+'on'](_0x56ed34){const _0x11d1d4=this['_scrollbar'+'Entities'][_0x56ed34];if(!(_0x11d1d4!=null&&_0x11d1d4['scrollbar']))return;const _0x55e55d=this['_getAxis'](_0x56ed34);this['_scrollbar'+'UpdateFlag'+'s'][_0x56ed34]=!(-0xd*-0x2fd+-0x10b5+-0x1624),_0x11d1d4['scrollbar']['value']=this['_scroll'][_0x55e55d],_0x11d1d4['scrollbar']['handleSize']=this['_getScroll'+'barHandleS'+'ize'](_0x55e55d,_0x56ed34),this['_scrollbar'+'UpdateFlag'+'s'][_0x56ed34]=!(-0x53*-0x27+0x3*0x98b+0x841*-0x5);}['_syncScrol'+'lbarEnable'+'dState'](_0x2ed080){const _0x189c7f=this['_scrollbar'+'Entities'][_0x2ed080];if(!_0x189c7f)return;const _0x165e1d=this['_getScroll'+'ingEnabled'](_0x2ed080),_0x1c2352=this['_getScroll'+'barVisibil'+'ity'](_0x2ed080);switch(_0x1c2352){case SO:_0x189c7f['enabled']=_0x165e1d;return;case yO:_0x189c7f['enabled']=_0x165e1d&&this['_contentIs'+'LargerThan'+'Viewport'](_0x2ed080);return;default:console['warn']('Unhandled\x20'+'scrollbar\x20'+'visibility'+':'+_0x1c2352),_0x189c7f['enabled']=_0x165e1d;}}['_contentIs'+'LargerThan'+'Viewport'](_0x7f0403){return this['_getConten'+'tSize'](_0x7f0403)>this['_getViewpo'+'rtSize'](_0x7f0403);}['_contentPo'+'sitionToSc'+'rollValue'](_0x5a8b09){const _0x25467c=this['_getMaxOff'+'set'](Ae),_0x27ac6c=this['_getMaxOff'+'set'](je);return _0x25467c===-0x234c+0x215e+0x1ee?po['x']=-0x1732+-0x2346+0x4*0xe9e:po['x']=_0x5a8b09['x']/_0x25467c,_0x27ac6c===0x9*0x3a1+0xa85*-0x1+0xd*-0x1b4?po['y']=0x4b3*0x1+-0x24b4+0x3*0xaab:po['y']=_0x5a8b09['y']/-_0x27ac6c,po;}['_getMaxOff'+'set'](_0x293a4b,_0xde2a7b){_0xde2a7b=_0xde2a7b===void(0x17ac+0x1358+-0x2b04)?this['_getConten'+'tSize'](_0x293a4b):_0xde2a7b;const _0x44aff4=this['_getViewpo'+'rtSize'](_0x293a4b);return _0xde2a7b<_0x44aff4?-this['_getViewpo'+'rtSize'](_0x293a4b):_0x44aff4-_0xde2a7b;}['_getMaxScr'+'ollValue'](_0xfc1932){return this['_contentIs'+'LargerThan'+'Viewport'](_0xfc1932)?-0x10e3+0x17*0x45+-0x77*-0x17:-0x2cc+0x1b80+-0x18b4;}['_getScroll'+'barHandleS'+'ize'](_0x16537f,_0x1f50d2){const _0x52394e=this['_getViewpo'+'rtSize'](_0x1f50d2),_0x2b7956=this['_getConten'+'tSize'](_0x1f50d2);if(Math['abs'](_0x2b7956)<0x2135+0x132a+-0x345f+0.001)return-0xd*-0x218+0xa2*-0x33+-0x7*-0xb9;const _0x56f150=Math['min'](_0x52394e/_0x2b7956,-0x5*-0x39a+-0x13fc+0x1fb*0x1),_0x4ef4ff=this['_toOversho'+'ot'](this['_scroll'][_0x16537f],_0x1f50d2);return _0x4ef4ff===0x20ef*-0x1+-0x3c*0x4d+-0x1*-0x32fb?_0x56f150:_0x56f150/(-0x21d0+-0x107f*0x2+0x42cf+Math['abs'](_0x4ef4ff));}['_getViewpo'+'rtSize'](_0x1d70b2){return this['_getSize'](_0x1d70b2,this['_viewportE'+'ntity']);}['_getConten'+'tSize'](_0x12c50e){return this['_getSize'](_0x12c50e,this['_contentEn'+'tity']);}['_getSize'](_0x1425ad,_0x91d344){return _0x91d344!=null&&_0x91d344['element']?_0x91d344['element'][this['_getCalcul'+'atedDimens'+'ion'](_0x1425ad)]:-0xa4a+-0x95*-0x2+0x1*0x920;}['_getScroll'+'ingEnabled'](_0x390e63){if(_0x390e63===Ae)return this['horizontal'];if(_0x390e63===je)return this['vertical'];w['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x390e63);}['_getScroll'+'barVisibil'+'ity'](_0x55079e){if(_0x55079e===Ae)return this['horizontal'+'ScrollbarV'+'isibility'];if(_0x55079e===je)return this['verticalSc'+'rollbarVis'+'ibility'];w['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x55079e);}['_getSign'](_0x174948){return _0x174948===Ae?-0x3*0x3ce+-0x196e+-0x24d9*-0x1:-(0x209*-0x7+0x1a47*0x1+-0xc07*0x1);}['_getAxis'](_0x5d2d1c){return _0x5d2d1c===Ae?'x':'y';}['_getCalcul'+'atedDimens'+'ion'](_0x395943){return _0x395943===Ae?'calculated'+'Width':'calculated'+'Height';}['_destroyDr'+'agHelper'](){this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['destroy']();}['onUpdate'](){this['_contentEn'+'tity']&&(this['_updateVel'+'ocity'](),this['_syncScrol'+'lbarEnable'+'dState'](Ae),this['_syncScrol'+'lbarEnable'+'dState'](je));}['_updateVel'+'ocity'](){if(!this['_isDraggin'+'g']()){if(this['scrollMode']===Dg&&(this['_hasOversh'+'oot']('x',Ae)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['x'],'x',Ae),this['_hasOversh'+'oot']('y',je)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['y'],'y',je)),Math['abs'](this['_velocity']['x'])>-0x1*-0xf37+0x21*-0xce+0x1*0xb57+0.0001||Math['abs'](this['_velocity']['y'])>-0xa42+-0x3*0x2c+0xac6+0.0001){const _0x45f84d=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x45f84d['x']+=this['_velocity']['x'],_0x45f84d['y']+=this['_velocity']['y'],this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x45f84d),this['_setScroll'+'FromConten'+'tPosition'](_0x45f84d);}this['_velocity']['x']*=0x2*-0x1063+0x20c9+0x2*-0x1-this['friction'],this['_velocity']['y']*=0xb68+-0x10*0x11c+0x659-this['friction'];}}['_hasOversh'+'oot'](_0x5500d1,_0x227806){return Math['abs'](this['_toOversho'+'ot'](this['scroll'][_0x5500d1],_0x227806))>-0x25ee+0x414+0x21da+0.001;}['_toOversho'+'ot'](_0x3df965,_0x5d352f){const _0x448253=this['_getMaxScr'+'ollValue'](_0x5d352f);return _0x3df965<-0x23e0+-0xa*-0x331+0x3f6?_0x3df965:_0x3df965>_0x448253?_0x3df965-_0x448253:0x1*0x956+0xe01*-0x1+0x4ab;}['_setVeloci'+'tyFromOver'+'shoot'](_0x14eb6c,_0x716d43,_0x138571){const _0x3c613d=this['_toOversho'+'ot'](_0x14eb6c,_0x138571)*this['_getMaxOff'+'set'](_0x138571)*this['_getSign'](_0x138571);Math['abs'](_0x3c613d)>-0x493+0x1dd9+-0x1946&&(this['_velocity'][_0x716d43]=-_0x3c613d/(this['bounceAmou'+'nt']*(0x2306*0x1+0x2b1*-0x6+0x1*-0x12ae)+(-0xa97+-0x1309+0x1da1)));}['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x275bf7){this['_prevConte'+'ntDragPosi'+'tion']?(this['_velocity']['sub2'](_0x275bf7,this['_prevConte'+'ntDragPosi'+'tion']),this['_prevConte'+'ntDragPosi'+'tion']['copy'](_0x275bf7)):(this['_velocity']['set'](0x369+0x172d+-0x1a96,0xcc1+-0x5cb+-0x6*0x129,-0x1f93+-0x27*-0x11+-0x6a*-0x46),this['_prevConte'+'ntDragPosi'+'tion']=_0x275bf7['clone']());}['_setScroll'+'FromConten'+'tPosition'](_0x2e38ea){let _0x3bf312=this['_contentPo'+'sitionToSc'+'rollValue'](_0x2e38ea);this['_isDraggin'+'g']()&&(_0x3bf312=this['_applyScro'+'llValueTen'+'sion'](_0x3bf312)),this['_onSetScro'+'ll'](_0x3bf312['x'],_0x3bf312['y'],!(-0x21d+0x9a8*0x3+-0x1eb*0xe));}['_applyScro'+'llValueTen'+'sion'](_0x339cca){let _0x27b637=this['_getMaxScr'+'ollValue'](Ae),_0x4dd83c=this['_toOversho'+'ot'](_0x339cca['x'],Ae);return _0x4dd83c>0x53*-0x56+-0x2225+0x3e07?_0x339cca['x']=_0x27b637+(0xde2+-0x1955+0xb74)*Math['log10'](0x25dd+-0x1*-0x1cd+0x8f*-0x47+_0x4dd83c):_0x4dd83c<-0x6f1*0x2+-0x66b*0x2+0x1ab8&&(_0x339cca['x']=-(0x1*-0x11d1+0xcfb*0x1+0x19d*0x3)*Math['log10'](-0xbba+-0x13*-0x133+-0x2*0x587-_0x4dd83c)),_0x27b637=this['_getMaxScr'+'ollValue'](je),_0x4dd83c=this['_toOversho'+'ot'](_0x339cca['y'],je),_0x4dd83c>-0x12fd*0x1+0x1706*0x1+0x1*-0x409?_0x339cca['y']=_0x27b637+(0x22a3*0x1+-0x1f5d+-0x345)*Math['log10'](-0x88f+-0x823+-0x13*-0xe1+_0x4dd83c):_0x4dd83c<-0x6*-0x351+0x213f+-0x3525&&(_0x339cca['y']=-(-0x1*-0x1229+0x3b*0x71+0x49*-0x9b)*Math['log10'](0xd*-0x5b+0x1055+-0xbb5-_0x4dd83c)),_0x339cca;}['_isDraggin'+'g'](){return this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['isDragging'];}['_setScroll'+'barCompone'+'ntsEnabled'](_0x125380){var _0x1a0bfa,_0x598772;(_0x1a0bfa=this['_horizonta'+'lScrollbar'+'Entity'])!=null&&_0x1a0bfa['scrollbar']&&(this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']['enabled']=_0x125380),(_0x598772=this['_verticalS'+'crollbarEn'+'tity'])!=null&&_0x598772['scrollbar']&&(this['_verticalS'+'crollbarEn'+'tity']['scrollbar']['enabled']=_0x125380);}['_setConten'+'tDraggingE'+'nabled'](_0xa3c32c){this['_contentDr'+'agHelper']&&(this['_contentDr'+'agHelper']['enabled']=_0xa3c32c);}['_onMouseWh'+'eel'](_0x74efd0){var _0x13efdc;if(!this['useMouseWh'+'eel']||!((_0x13efdc=this['_contentEn'+'tity'])!=null&&_0x13efdc['element']))return;const _0x38900a=_0x74efd0['event'],_0x1ded7a=_0x38900a['deltaX']/this['_contentEn'+'tity']['element']['calculated'+'Width']*this['mouseWheel'+'Sensitivit'+'y']['x'],_0x126958=_0x38900a['deltaY']/this['_contentEn'+'tity']['element']['calculated'+'Height']*this['mouseWheel'+'Sensitivit'+'y']['y'],_0x1ce114=Y['clamp'](this['_scroll']['x']+_0x1ded7a,0x1152+-0x47*-0x2b+0x1*-0x1d3f,this['_getMaxScr'+'ollValue'](Ae)),_0x233f9b=Y['clamp'](this['_scroll']['y']+_0x126958,-0x5*-0x1e9+0x3*0x551+-0x1980,this['_getMaxScr'+'ollValue'](je));this['scroll']=new J(_0x1ce114,_0x233f9b);}['_enableCon'+'tentInput'](){for(;this['_disabledC'+'ontentInpu'+'tEntities']['length'];){const _0x3316bc=this['_disabledC'+'ontentInpu'+'tEntities']['pop']();_0x3316bc['element']&&(_0x3316bc['element']['useInput']=!(-0x85*-0x29+-0x25a5*0x1+0x1058));}this['_disabledC'+'ontentInpu'+'t']=!(0x1dd3+-0xccd+-0x1105);}['_disableCo'+'ntentInput'](){const _0x701c1e=_0x586166=>{_0x586166['element']&&_0x586166['element']['useInput']&&(this['_disabledC'+'ontentInpu'+'tEntities']['push'](_0x586166),_0x586166['element']['useInput']=!(-0x10*0x1af+-0x1*0x791+-0x2*-0x1141));const _0x7ff7bc=_0x586166['children'];for(let _0x769f10=-0x1*0xf1d+0x511+0xa0c,_0x9c5829=_0x7ff7bc['length'];_0x769f10<_0x9c5829;_0x769f10++)_0x701c1e(_0x7ff7bc[_0x769f10]);};if(this['_contentEn'+'tity']){const _0x4d6b28=this['_contentEn'+'tity']['children'];for(let _0x371656=0x18a*-0xd+0x72e+-0x4*-0x335,_0x2840e9=_0x4d6b28['length'];_0x371656<_0x2840e9;_0x371656++)_0x701c1e(_0x4d6b28[_0x371656]);}this['_disabledC'+'ontentInpu'+'t']=!(-0x2*0x113e+0x2234+0x8*0x9);}['onEnable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(0x795+0x1*-0xb4f+0x3ba)),this['_setConten'+'tDraggingE'+'nabled'](!(-0xa2*-0x17+-0x19fa+0x2*0x5b6)),this['_syncAll']();}['onDisable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(0x119d+0x1580+-0x271c)),this['_setConten'+'tDraggingE'+'nabled'](!(0xa97+-0xd9*-0x22+-0x2768));}['onRemove'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleEle'+'mentListen'+'ers']('off'),this['_destroyDr'+'agHelper']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x4c93a0,_0x9c9bb4){_0x4c93a0['viewportEn'+'tity']&&(this['viewportEn'+'tity']=_0x9c9bb4[_0x4c93a0['viewportEn'+'tity']['getGuid']()]),_0x4c93a0['contentEnt'+'ity']&&(this['contentEnt'+'ity']=_0x9c9bb4[_0x4c93a0['contentEnt'+'ity']['getGuid']()]),_0x4c93a0['horizontal'+'ScrollbarE'+'ntity']&&(this['horizontal'+'ScrollbarE'+'ntity']=_0x9c9bb4[_0x4c93a0['horizontal'+'ScrollbarE'+'ntity']['getGuid']()]),_0x4c93a0['verticalSc'+'rollbarEnt'+'ity']&&(this['verticalSc'+'rollbarEnt'+'ity']=_0x9c9bb4[_0x4c93a0['verticalSc'+'rollbarEnt'+'ity']['getGuid']()]);}}h(Cv,'EVENT_SETS'+'CROLL','set:scroll');const vO=0x25c2+-0xc2b*0x1+-0x198d;class xO{constructor(){h(this,'enabled',!(-0x1116+0x2ea*0x1+0xe2c)),h(this,'horizontal'),h(this,'vertical'),h(this,'scrollMode'),h(this,'bounceAmou'+'nt'),h(this,'friction'),h(this,'dragThresh'+'old',vO),h(this,'useMouseWh'+'eel',!(-0xa0a+-0x3*-0x471+-0x349)),h(this,'mouseWheel'+'Sensitivit'+'y',new J(0x529*-0x4+-0xeb9+0x235e,-0x3b*0x2f+-0x1c50*-0x1+-0x117a*0x1)),h(this,'horizontal'+'ScrollbarV'+'isibility',-0xd60+0x169*0x7+0x381),h(this,'verticalSc'+'rollbarVis'+'ibility',0x5*-0x10+-0x73f+0x78f),h(this,'viewportEn'+'tity',null),h(this,'contentEnt'+'ity',null),h(this,'horizontal'+'ScrollbarE'+'ntity',null),h(this,'verticalSc'+'rollbarEnt'+'ity',null);}}const Ig=[{'name':'enabled','type':'boolean'},{'name':'horizontal','type':'boolean'},{'name':'vertical','type':'boolean'},{'name':'scrollMode','type':'number'},{'name':'bounceAmou'+'nt','type':'number'},{'name':'friction','type':'number'},{'name':'dragThresh'+'old','type':'number'},{'name':'useMouseWh'+'eel','type':'boolean'},{'name':'mouseWheel'+'Sensitivit'+'y','type':'vec2'},{'name':'horizontal'+'ScrollbarV'+'isibility','type':'number'},{'name':'verticalSc'+'rollbarVis'+'ibility','type':'number'}],TO=-0xad0+0x1fce+-0x14f4;class wO extends ct{constructor(_0x3a411e){super(_0x3a411e),this['id']='scrollview',this['ComponentT'+'ype']=Cv,this['DataType']=xO,this['schema']=Ig,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x5335f4,_0x4fe953,_0x475486){_0x4fe953['dragThresh'+'old']===void(-0x10c7+-0x9e*0x1+-0x49*-0x3d)&&(_0x4fe953['dragThresh'+'old']=TO),_0x4fe953['useMouseWh'+'eel']===void(-0x42e+-0x21d3+0x2601)&&(_0x4fe953['useMouseWh'+'eel']=!(-0x2641+-0x9a+0x26db)),_0x4fe953['mouseWheel'+'Sensitivit'+'y']===void(0x141f+-0x1219+-0x206)&&(_0x4fe953['mouseWheel'+'Sensitivit'+'y']=new J(-0x1453+0x18f0+-0x49c,-0xb22*-0x3+0x26*0x61+-0x1*0x2fcb)),super['initialize'+'ComponentD'+'ata'](_0x5335f4,_0x4fe953,Ig),_0x5335f4['viewportEn'+'tity']=_0x4fe953['viewportEn'+'tity'],_0x5335f4['contentEnt'+'ity']=_0x4fe953['contentEnt'+'ity'],_0x5335f4['horizontal'+'ScrollbarE'+'ntity']=_0x4fe953['horizontal'+'ScrollbarE'+'ntity'],_0x5335f4['verticalSc'+'rollbarEnt'+'ity']=_0x4fe953['verticalSc'+'rollbarEnt'+'ity'];}['onUpdate'](_0x536796){const _0x897bf3=this['store'];for(const _0x144ab6 in _0x897bf3){const _0x20f6d9=_0x897bf3[_0x144ab6]['entity'],_0x8f1191=_0x20f6d9['scrollview'];_0x8f1191['enabled']&&_0x20f6d9['enabled']&&_0x8f1191['onUpdate']();}}['_onRemoveC'+'omponent'](_0x270242,_0x249668){_0x249668['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class Pv extends we{constructor(_0x1e46b0,_0x35824e){super(_0x1e46b0,_0x35824e),h(this,'_handleEnt'+'ity',null),h(this,'_evtHandle'+'EntityElem'+'entAdd',null),h(this,'_evtHandle'+'EntityChan'+'ges',[]),this['_toggleLif'+'ecycleList'+'eners']('on');}get['data'](){const _0x3bdaea=this['system']['store'][this['entity']['getGuid']()];return _0x3bdaea?_0x3bdaea['data']:null;}set['enabled'](_0x34b04d){this['_setValue']('enabled',_0x34b04d);}get['enabled'](){return this['data']['enabled'];}set['orientatio'+'n'](_0x37ebb5){this['_setValue']('orientatio'+'n',_0x37ebb5);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['value'](_0x2c5437){this['_setValue']('value',_0x2c5437);}get['value'](){return this['data']['value'];}set['handleSize'](_0x9cf0ad){this['_setValue']('handleSize',_0x9cf0ad);}get['handleSize'](){return this['data']['handleSize'];}set['handleEnti'+'ty'](_0x4a5ec7){if(this['_handleEnt'+'ity']===_0x4a5ec7)return;const _0x27acff=typeof _0x4a5ec7=='string';this['_handleEnt'+'ity']&&_0x27acff&&this['_handleEnt'+'ity']['getGuid']()===_0x4a5ec7||(this['_handleEnt'+'ity']&&this['_handleEnt'+'ityUnsubsc'+'ribe'](),_0x4a5ec7 instanceof Ie?this['_handleEnt'+'ity']=_0x4a5ec7:_0x27acff?this['_handleEnt'+'ity']=this['system']['app']['getEntityF'+'romIndex'](_0x4a5ec7)||null:this['_handleEnt'+'ity']=null,this['_handleEnt'+'ity']&&this['_handleEnt'+'itySubscri'+'be'](),this['_handleEnt'+'ity']?this['data']['handleEnti'+'ty']=this['_handleEnt'+'ity']['getGuid']():_0x27acff&&_0x4a5ec7&&(this['data']['handleEnti'+'ty']=_0x4a5ec7));}get['handleEnti'+'ty'](){return this['_handleEnt'+'ity'];}['_setValue'](_0x5dae48,_0x1fbd43){const _0x35c7c4=this['data'],_0x3e4cfe=_0x35c7c4[_0x5dae48];_0x35c7c4[_0x5dae48]=_0x1fbd43,this['fire']('set',_0x5dae48,_0x3e4cfe,_0x1fbd43);}['_toggleLif'+'ecycleList'+'eners'](_0x53983f){this[_0x53983f]('set_value',this['_onSetValu'+'e'],this),this[_0x53983f]('set_handle'+'Size',this['_onSetHand'+'leSize'],this),this[_0x53983f]('set_orient'+'ation',this['_onSetOrie'+'ntation'],this);}['_handleEnt'+'itySubscri'+'be'](){this['_evtHandle'+'EntityElem'+'entAdd']=this['_handleEnt'+'ity']['on']('element:ad'+'d',this['_onHandleE'+'lementGain'],this),this['_handleEnt'+'ity']['element']&&this['_onHandleE'+'lementGain']();}['_handleEnt'+'ityUnsubsc'+'ribe'](){var _0x1f5e51,_0x3762ca;(_0x1f5e51=this['_evtHandle'+'EntityElem'+'entAdd'])==null||_0x1f5e51['off'](),this['_evtHandle'+'EntityElem'+'entAdd']=null,(_0x3762ca=this['_handleEnt'+'ity'])!=null&&_0x3762ca['element']&&this['_onHandleE'+'lementLose']();}['_handleEnt'+'ityElement'+'Subscribe'](){const _0x3489ef=this['_handleEnt'+'ity']['element'],_0x1c3efd=this['_evtHandle'+'EntityChan'+'ges'];_0x1c3efd['push'](_0x3489ef['once']('beforeremo'+'ve',this['_onHandleE'+'lementLose'],this)),_0x1c3efd['push'](_0x3489ef['on']('set:anchor',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x1c3efd['push'](_0x3489ef['on']('set:margin',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x1c3efd['push'](_0x3489ef['on']('set:pivot',this['_onSetHand'+'leAlignmen'+'t'],this));}['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](){for(let _0x1360cc=0x2*0x149+-0x193d+0x16ab;_0x1360cc<this['_evtHandle'+'EntityChan'+'ges']['length'];_0x1360cc++)this['_evtHandle'+'EntityChan'+'ges'][_0x1360cc]['off']();this['_evtHandle'+'EntityChan'+'ges']['length']=-0x211f*-0x1+-0x396*0x5+0xf31*-0x1;}['_onHandleE'+'lementGain'](){this['_handleEnt'+'ityElement'+'Subscribe'](),this['_destroyDr'+'agHelper'](),this['_handleDra'+'gHelper']=new Do(this['_handleEnt'+'ity']['element'],this['_getAxis']()),this['_handleDra'+'gHelper']['on']('drag:move',this['_onHandleD'+'rag'],this),this['_updateHan'+'dlePositio'+'nAndSize']();}['_onHandleE'+'lementLose'](){this['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](),this['_destroyDr'+'agHelper']();}['_onHandleD'+'rag'](_0x56de89){this['_handleEnt'+'ity']&&this['enabled']&&this['entity']['enabled']&&(this['value']=this['_handlePos'+'itionToScr'+'ollValue'](_0x56de89[this['_getAxis']()]));}['_onSetValu'+'e'](_0x4faba2,_0x33367a,_0xec0c52){Math['abs'](_0xec0c52-_0x33367a)>-0xd16+0x638+0x6de+0.00001&&(this['data']['value']=Y['clamp'](_0xec0c52,-0x9*0x1c5+-0x1*0x22ed+-0x17*-0x236,-0x1c4*0x2+0x8f*-0x1d+0x13bc),this['_updateHan'+'dlePositio'+'nAndSize'](),this['fire']('set:value',this['data']['value']));}['_onSetHand'+'leSize'](_0x4275f8,_0x7e7121,_0x50eb53){Math['abs'](_0x50eb53-_0x7e7121)>-0x9a+0x9b*-0x16+-0x4*-0x37b+0.00001&&(this['data']['handleSize']=Y['clamp'](_0x50eb53,-0x445*-0x2+0x1*-0xe09+0x57f,0x1e12+0x3f9+-0x220a),this['_updateHan'+'dlePositio'+'nAndSize']());}['_onSetHand'+'leAlignmen'+'t'](){this['_updateHan'+'dlePositio'+'nAndSize']();}['_onSetOrie'+'ntation'](_0x516d40,_0x8c83e9,_0x5b3f2f){var _0x3a52d9;_0x5b3f2f!==_0x8c83e9&&((_0x3a52d9=this['_handleEnt'+'ity'])!=null&&_0x3a52d9['element'])&&(this['_handleEnt'+'ity']['element'][this['_getOpposi'+'teDimensio'+'n']()]=-0x1c24*0x1+-0xd41+-0x1*-0x2965);}['_updateHan'+'dlePositio'+'nAndSize'](){const _0x527dd1=this['_handleEnt'+'ity'],_0x3956e8=_0x527dd1==null?void(0x3e0+0x5*-0x5c5+-0x853*-0x3):_0x527dd1['element'];if(_0x527dd1){const _0x351a98=_0x527dd1['getLocalPo'+'sition']();_0x351a98[this['_getAxis']()]=this['_getHandle'+'Position'](),_0x527dd1['setLocalPo'+'sition'](_0x351a98);}_0x3956e8&&(_0x3956e8[this['_getDimens'+'ion']()]=this['_getHandle'+'Length']());}['_handlePos'+'itionToScr'+'ollValue'](_0x20cd9c){return _0x20cd9c*this['_getSign']()/this['_getUsable'+'TrackLengt'+'h']();}['_scrollVal'+'ueToHandle'+'Position'](_0x3c7254){return _0x3c7254*this['_getSign']()*this['_getUsable'+'TrackLengt'+'h']();}['_getUsable'+'TrackLengt'+'h'](){return Math['max'](this['_getTrackL'+'ength']()-this['_getHandle'+'Length'](),0x1*-0x1b64+0xadd+0x1087*0x1+0.001);}['_getTrackL'+'ength'](){return this['entity']['element']?this['orientatio'+'n']===Ae?this['entity']['element']['calculated'+'Width']:this['entity']['element']['calculated'+'Height']:0x15d8+-0x14ac+0x4*-0x4b;}['_getHandle'+'Length'](){return this['_getTrackL'+'ength']()*this['handleSize'];}['_getHandle'+'Position'](){return this['_scrollVal'+'ueToHandle'+'Position'](this['value']);}['_getSign'](){return this['orientatio'+'n']===Ae?0x10f*0x1d+-0x1b7e+-0x334:-(-0x1834*-0x1+-0x19e7+0x1b4);}['_getAxis'](){return this['orientatio'+'n']===Ae?'x':'y';}['_getDimens'+'ion'](){return this['orientatio'+'n']===Ae?'width':'height';}['_getOpposi'+'teDimensio'+'n'](){return this['orientatio'+'n']===Ae?'height':'width';}['_destroyDr'+'agHelper'](){this['_handleDra'+'gHelper']&&this['_handleDra'+'gHelper']['destroy']();}['_setHandle'+'DraggingEn'+'abled'](_0x82f761){this['_handleDra'+'gHelper']&&(this['_handleDra'+'gHelper']['enabled']=_0x82f761);}['onEnable'](){this['_setHandle'+'DraggingEn'+'abled'](!(-0x12*-0x75+0x1cdb+-0x2515));}['onDisable'](){this['_setHandle'+'DraggingEn'+'abled'](!(0x83*0x1f+0x3a*0x53+-0x22aa));}['onRemove'](){this['_destroyDr'+'agHelper'](),this['_toggleLif'+'ecycleList'+'eners']('off');}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0xa4f9ad,_0x4d1e0d){_0xa4f9ad['handleEnti'+'ty']&&(this['handleEnti'+'ty']=_0x4d1e0d[_0xa4f9ad['handleEnti'+'ty']['getGuid']()]);}}h(Pv,'EVENT_SETV'+'ALUE','set:value');class EO{constructor(){h(this,'enabled',!(0x18e9+-0x4fc+-0x1*0x13ed)),h(this,'orientatio'+'n',Ae),h(this,'value',-0x9*0x160+0x3*-0xb2f+0x2ded),h(this,'handleSize',-0x4*0x510+0x1ff2+0x3*-0x3e6),h(this,'handleEnti'+'ty',null);}}const Lg=[{'name':'enabled','type':'boolean'},{'name':'orientatio'+'n','type':'number'},{'name':'value','type':'number'},{'name':'handleSize','type':'number'}];class bO extends ct{constructor(_0xa7ac39){super(_0xa7ac39),this['id']='scrollbar',this['ComponentT'+'ype']=Pv,this['DataType']=EO,this['schema']=Lg,this['on']('add',this['_onAddComp'+'onent'],this),this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x2fe683,_0x51d53d,_0x50d956){super['initialize'+'ComponentD'+'ata'](_0x2fe683,_0x51d53d,Lg),_0x2fe683['handleEnti'+'ty']=_0x51d53d['handleEnti'+'ty'];}['_onAddComp'+'onent'](_0x43316f){_0x43316f['fire']('scrollbar:'+'add');}['_onRemoveC'+'omponent'](_0x345e3f,_0x269919){_0x269919['onRemove']();}}const AO={'volume':0x0,'pitch':0x0,'loop':!(-0x25*-0x89+0x62e+0xa*-0x299),'startTime':0x0,'duration':0x0,'position':new D(),'maxDistance':0x0,'refDistance':0x0,'rollOffFactor':0x0,'distanceModel':0x0,'onPlay':null,'onPause':null,'onResume':null,'onStop':null,'onEnd':null};class Vi extends me{constructor(_0x34dda5,_0x301892='Untitled',_0x27da70={}){super(),h(this,'name'),h(this,'instances',[]),(this['_component']=_0x34dda5,this['_assets']=_0x34dda5['system']['app']['assets'],this['_manager']=_0x34dda5['system']['manager'],this['name']=_0x301892,this['_volume']=_0x27da70['volume']!==void(-0xb00+0xa1e+-0xe2*-0x1)?Y['clamp'](Number(_0x27da70['volume'])||-0x20c*-0x7+0x1cbd+-0x2d*0xf5,-0x2*-0x7ed+-0x1cc3+0x5*0x295,0x1daa+-0x806+0x1d*-0xbf):0xd89+-0x164b+0x8c3,this['_pitch']=_0x27da70['pitch']!==void(0x1af9+-0x1a13+-0xe6)?Math['max'](-0x1*0x21a1+0x9b7+0x17ea+0.01,Number(_0x27da70['pitch'])||-0xbb8+0x222f*0x1+-0x1677):-0x685+0x1a2*0x1+0x1*0x4e4,this['_loop']=!!(_0x27da70['loop']!==void(0x5*-0x40d+-0x151*0xa+0x216b)&&_0x27da70['loop']),this['_duration']=_0x27da70['duration']>0xf09+-0xeb*0xf+-0x144?_0x27da70['duration']:null,this['_startTime']=Math['max'](-0x229a+0x9d1+-0xf*-0x1a7,Number(_0x27da70['startTime'])||-0x1002+0x1612+0xc2*-0x8),this['_overlap']=!!_0x27da70['overlap'],this['_autoPlay']=!!_0x27da70['autoPlay'],this['_firstNode']=null,this['_lastNode']=null,this['_asset']=_0x27da70['asset'],this['_asset']instanceof pe&&(this['_asset']=this['_asset']['id']),this['_onInstanc'+'ePlayHandl'+'er']=this['_onInstanc'+'ePlay']['bind'](this),this['_onInstanc'+'ePauseHand'+'ler']=this['_onInstanc'+'ePause']['bind'](this),this['_onInstanc'+'eResumeHan'+'dler']=this['_onInstanc'+'eResume']['bind'](this),this['_onInstanc'+'eStopHandl'+'er']=this['_onInstanc'+'eStop']['bind'](this),this['_onInstanc'+'eEndHandle'+'r']=this['_onInstanc'+'eEnd']['bind'](this));}['play'](_0x5c8a94){if(this['overlap']||this['stop'](),!this['isLoaded']&&!this['_hasAsset']()){w['warn']('Trying\x20to\x20'+'play\x20Sound'+'Slot\x20'+this['name']+('\x20but\x20it\x20is'+'\x20not\x20loade'+'d\x20and\x20does'+'n\x27t\x20have\x20a'+'n\x20asset.'));return;}let _0x1676ca=_0x5c8a94;if(_0x1676ca||(_0x1676ca=this['_createIns'+'tance'](),this['instances']['push'](_0x1676ca)),this['isLoaded'])_0x1676ca['play']();else{const _0x3d11ef=function(_0x306bed){const _0xef5b0c=_0x1676ca['_playWhenL'+'oaded'];_0x1676ca['sound']=_0x306bed,_0xef5b0c&&_0x1676ca['play']();};this['off']('load',_0x3d11ef),this['once']('load',_0x3d11ef),this['load']();}return _0x1676ca;}['pause'](){let _0xe8ab46=!(-0x1b3f+0x17b+0x19c5);const _0x116f23=this['instances'];for(let _0x589317=-0xace+0x2dd*-0xa+-0x277*-0x10,_0x5f228b=_0x116f23['length'];_0x589317<_0x5f228b;_0x589317++)_0x116f23[_0x589317]['pause']()&&(_0xe8ab46=!(-0xd2c+0x2077+-0x134b));return _0xe8ab46;}['resume'](){let _0x41fa59=!(0xd13*-0x2+0x1129+-0x8fe*-0x1);const _0x159338=this['instances'];for(let _0x23b768=-0x19a4+0x1a*0x101+-0x76*0x1,_0x4f81c5=_0x159338['length'];_0x23b768<_0x4f81c5;_0x23b768++)_0x159338[_0x23b768]['resume']()&&(_0x41fa59=!(0x154e+0x5de*0x1+0x1b2c*-0x1));return _0x41fa59;}['stop'](){let _0x2ac4fb=!(-0x883*0x4+0xaf2*0x3+0x137);const _0xd1c53c=this['instances'];let _0x45e61c=_0xd1c53c['length'];for(;_0x45e61c--;)_0xd1c53c[_0x45e61c]['stop'](),_0x2ac4fb=!(0x5*0x565+0x14e*0x1+0x1*-0x1c47);return _0xd1c53c['length']=-0x14f9+-0x1fa3*0x1+0x16c*0x25,_0x2ac4fb;}['load'](){if(!this['_hasAsset']())return;const _0x426b89=this['_assets']['get'](this['_asset']);if(!_0x426b89){this['_assets']['off']('add:'+this['_asset'],this['_onAssetAd'+'d'],this),this['_assets']['once']('add:'+this['_asset'],this['_onAssetAd'+'d'],this);return;}if(_0x426b89['off']('remove',this['_onAssetRe'+'moved'],this),_0x426b89['on']('remove',this['_onAssetRe'+'moved'],this),!_0x426b89['resource']){_0x426b89['off']('load',this['_onAssetLo'+'ad'],this),_0x426b89['once']('load',this['_onAssetLo'+'ad'],this),this['_assets']['load'](_0x426b89);return;}this['fire']('load',_0x426b89['resource']);}['setExterna'+'lNodes'](_0x32477b,_0x3c2a10){if(!_0x32477b){console['error']('The\x20firstN'+'ode\x20must\x20h'+'ave\x20a\x20vali'+'d\x20AudioNod'+'e');return;}if(_0x3c2a10||(_0x3c2a10=_0x32477b),this['_firstNode']=_0x32477b,this['_lastNode']=_0x3c2a10,!this['_overlap']){const _0x7d7fc7=this['instances'];for(let _0x4c4490=0x2231+0x260+-0x2491,_0x2451d7=_0x7d7fc7['length'];_0x4c4490<_0x2451d7;_0x4c4490++)_0x7d7fc7[_0x4c4490]['setExterna'+'lNodes'](_0x32477b,_0x3c2a10);}}['clearExter'+'nalNodes'](){if(this['_firstNode']=null,this['_lastNode']=null,!this['_overlap']){const _0x76256a=this['instances'];for(let _0x556898=-0xb22+-0x7*0x1a5+-0x11*-0x155,_0x5da528=_0x76256a['length'];_0x556898<_0x5da528;_0x556898++)_0x76256a[_0x556898]['clearExter'+'nalNodes']();}}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_hasAsset'](){return this['_asset']!=null;}['_createIns'+'tance'](){let _0x10632a=null;const _0x3defa3=this['_component'];let _0x184b85=null;if(this['_hasAsset']()){const _0x4c242f=this['_assets']['get'](this['_asset']);_0x4c242f&&(_0x184b85=_0x4c242f['resource']);}const _0x26db3e=AO;return _0x26db3e['volume']=this['_volume']*_0x3defa3['volume'],_0x26db3e['pitch']=this['_pitch']*_0x3defa3['pitch'],_0x26db3e['loop']=this['_loop'],_0x26db3e['startTime']=this['_startTime'],_0x26db3e['duration']=this['_duration'],_0x26db3e['onPlay']=this['_onInstanc'+'ePlayHandl'+'er'],_0x26db3e['onPause']=this['_onInstanc'+'ePauseHand'+'ler'],_0x26db3e['onResume']=this['_onInstanc'+'eResumeHan'+'dler'],_0x26db3e['onStop']=this['_onInstanc'+'eStopHandl'+'er'],_0x26db3e['onEnd']=this['_onInstanc'+'eEndHandle'+'r'],_0x3defa3['positional']?(_0x26db3e['position']['copy'](_0x3defa3['entity']['getPositio'+'n']()),_0x26db3e['maxDistanc'+'e']=_0x3defa3['maxDistanc'+'e'],_0x26db3e['refDistanc'+'e']=_0x3defa3['refDistanc'+'e'],_0x26db3e['rollOffFac'+'tor']=_0x3defa3['rollOffFac'+'tor'],_0x26db3e['distanceMo'+'del']=_0x3defa3['distanceMo'+'del'],_0x10632a=new Ya(this['_manager'],_0x184b85,_0x26db3e)):_0x10632a=new As(this['_manager'],_0x184b85,_0x26db3e),this['_firstNode']&&_0x10632a['setExterna'+'lNodes'](this['_firstNode'],this['_lastNode']),_0x10632a;}['_onInstanc'+'ePlay'](_0x3379bd){this['fire']('play',_0x3379bd),this['_component']['fire']('play',this,_0x3379bd);}['_onInstanc'+'ePause'](_0x200998){this['fire']('pause',_0x200998),this['_component']['fire']('pause',this,_0x200998);}['_onInstanc'+'eResume'](_0x5f303e){this['fire']('resume',_0x5f303e),this['_component']['fire']('resume',this,_0x5f303e);}['_onInstanc'+'eStop'](_0xd3b5cc){const _0x19a231=this['instances']['indexOf'](_0xd3b5cc);_0x19a231!==-(-0x2*-0x61f+0x1387+-0x2*0xfe2)&&this['instances']['splice'](_0x19a231,0x44d+0x9*0xb9+-0xacd),this['fire']('stop',_0xd3b5cc),this['_component']['fire']('stop',this,_0xd3b5cc);}['_onInstanc'+'eEnd'](_0x3a3ae6){const _0x5003ff=this['instances']['indexOf'](_0x3a3ae6);_0x5003ff!==-(0x26e5+0x1e0c+-0x44f0)&&this['instances']['splice'](_0x5003ff,0xb4e*-0x2+0x1697*-0x1+0x2d34),this['fire']('end',_0x3a3ae6),this['_component']['fire']('end',this,_0x3a3ae6);}['_onAssetAd'+'d'](_0x5e6b02){this['load']();}['_onAssetLo'+'ad'](_0x4c3924){this['load']();}['_onAssetRe'+'moved'](_0x2e1d8e){_0x2e1d8e['off']('remove',this['_onAssetRe'+'moved'],this),this['_assets']['off']('add:'+_0x2e1d8e['id'],this['_onAssetAd'+'d'],this),this['stop']();}['updatePosi'+'tion'](_0x1280c1){const _0x21e5c3=this['instances'];for(let _0x1d88ac=0x2*-0x935+-0xf91*0x1+0x21fb,_0x2d5ec9=_0x21e5c3['length'];_0x1d88ac<_0x2d5ec9;_0x1d88ac++)_0x21e5c3[_0x1d88ac]['position']=_0x1280c1;}set['asset'](_0x1e0880){const _0x16ad4c=this['_asset'];if(_0x16ad4c){this['_assets']['off']('add:'+_0x16ad4c,this['_onAssetAd'+'d'],this);const _0x5e0bb9=this['_assets']['get'](_0x16ad4c);_0x5e0bb9&&_0x5e0bb9['off']('remove',this['_onAssetRe'+'moved'],this);}this['_asset']=_0x1e0880,this['_asset']instanceof pe&&(this['_asset']=this['_asset']['id']),this['_hasAsset']()&&this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['load']();}get['asset'](){return this['_asset'];}set['autoPlay'](_0x2ce622){this['_autoPlay']=!!_0x2ce622;}get['autoPlay'](){return this['_autoPlay'];}set['duration'](_0x1b0f41){if(this['_duration']=Math['max'](-0x1f1a+-0x1e2*0x5+0x2884,Number(_0x1b0f41)||0x1f*0xdf+0xf*0x1f0+-0x3811)||null,!this['_overlap']){const _0x2f8480=this['instances'];for(let _0xa92f9d=-0x29*-0x56+0x1f3*0x2+-0x11ac,_0x5f5427=_0x2f8480['length'];_0xa92f9d<_0x5f5427;_0xa92f9d++)_0x2f8480[_0xa92f9d]['duration']=this['_duration'];}}get['duration'](){let _0x312592=-0xc91+0x1*0x25f9+-0x1968;if(this['_hasAsset']()){const _0x10423a=this['_assets']['get'](this['_asset']);_0x312592=_0x10423a!=null&&_0x10423a['resource']?_0x10423a['resource']['duration']:0x14*0x71+0x23e6+-0x2cba;}return this['_duration']!=null?this['_duration']%(_0x312592||0x3*-0x43d+0xdf*0x8+0x10*0x5c):_0x312592;}get['isLoaded'](){if(this['_hasAsset']()){const _0x32fba9=this['_assets']['get'](this['_asset']);if(_0x32fba9)return!!_0x32fba9['resource'];}return!(0x1b61+0x2*0x2d5+-0x210a);}get['isPaused'](){const _0x2dd041=this['instances'],_0x33998c=_0x2dd041['length'];if(_0x33998c===-0xe59+-0x78b+0x15e4)return!(-0x17f2+-0x3e3*-0x2+-0x1*-0x102d);for(let _0x2ea5f1=0x4*-0x904+-0x175+0x2585;_0x2ea5f1<_0x33998c;_0x2ea5f1++)if(!_0x2dd041[_0x2ea5f1]['isPaused'])return!(-0x1*-0x43d+-0xfdb*-0x2+-0x23f2);return!(-0x1*-0x217+-0x4*-0x569+0x195*-0xf);}get['isPlaying'](){const _0x2f60b2=this['instances'];for(let _0x35acce=-0x1e53*-0x1+0x27e*-0x2+-0x1957,_0x1e0974=_0x2f60b2['length'];_0x35acce<_0x1e0974;_0x35acce++)if(_0x2f60b2[_0x35acce]['isPlaying'])return!(-0x399+-0x192b+0x1cc4);return!(0x1*-0x2a9+-0x3*-0x96d+-0x199d);}get['isStopped'](){const _0x1a2977=this['instances'];for(let _0x45da96=0x85*-0x7+0xa7+-0x17e*-0x2,_0x6456b5=_0x1a2977['length'];_0x45da96<_0x6456b5;_0x45da96++)if(!_0x1a2977[_0x45da96]['isStopped'])return!(0x8ed*0x3+0x1f91+-0x3a57);return!(-0x10c3*-0x2+0x2414+0x2*-0x22cd);}set['loop'](_0x16177e){this['_loop']=!!_0x16177e;const _0xdd00f5=this['instances'];for(let _0x1f0560=-0xbf*0x16+0x7*-0x26a+0x2150,_0x1ec789=_0xdd00f5['length'];_0x1f0560<_0x1ec789;_0x1f0560++)_0xdd00f5[_0x1f0560]['loop']=this['_loop'];}get['loop'](){return this['_loop'];}set['overlap'](_0x1efd92){this['_overlap']=!!_0x1efd92;}get['overlap'](){return this['_overlap'];}set['pitch'](_0x431cee){if(this['_pitch']=Math['max'](Number(_0x431cee)||0x1326*-0x2+-0x11b3+0x3d*0xeb,-0x1*0x18d1+-0x268c+0x3f5d+0.01),!this['_overlap']){const _0xbe0ead=this['instances'];for(let _0x12e9c4=-0xfd0+0x6*-0x274+-0x2*-0xf44,_0x13bedb=_0xbe0ead['length'];_0x12e9c4<_0x13bedb;_0x12e9c4++)_0xbe0ead[_0x12e9c4]['pitch']=this['pitch']*this['_component']['pitch'];}}get['pitch'](){return this['_pitch'];}set['startTime'](_0x3d9a33){if(this['_startTime']=Math['max'](-0x2b*-0x85+0x1a42+0x179*-0x21,Number(_0x3d9a33)||-0x1e2*-0x13+-0xef3+-0x14d3),!this['_overlap']){const _0x388eec=this['instances'];for(let _0x245852=-0x2c9+0x1*0x2479+-0x21b0,_0x1c34f8=_0x388eec['length'];_0x245852<_0x1c34f8;_0x245852++)_0x388eec[_0x245852]['startTime']=this['_startTime'];}}get['startTime'](){return this['_startTime'];}set['volume'](_0x2356a2){if(this['_volume']=Y['clamp'](Number(_0x2356a2)||-0x339+0x26da*-0x1+0x2a13,0x2*0x301+-0x9fd+0x1*0x3fb,0x185*-0x1+-0x1abb*0x1+-0x96b*-0x3),!this['_overlap']){const _0x183eb4=this['instances'];for(let _0x20a840=0x13*-0xe3+0x6*-0x273+0x1f8b,_0xf5f078=_0x183eb4['length'];_0x20a840<_0xf5f078;_0x20a840++)_0x183eb4[_0x20a840]['volume']=this['_volume']*this['_component']['volume'];}}get['volume'](){return this['_volume'];}}h(Vi,'EVENT_PLAY','play'),h(Vi,'EVENT_PAUS'+'E','pause'),h(Vi,'EVENT_RESU'+'ME','resume'),h(Vi,'EVENT_STOP','stop'),h(Vi,'EVENT_END','end'),h(Vi,'EVENT_LOAD','load');class Xr extends we{constructor(){super(...arguments),h(this,'_volume',-0xa9f*-0x1+-0x889+-0x215),h(this,'_pitch',-0x3d*-0x23+0x2413*-0x1+-0x1*-0x1bbd),h(this,'_positiona'+'l',!(0xa*0x287+0x1c95*0x1+-0x35db*0x1)),h(this,'_refDistan'+'ce',0x2*0x577+0xcff+-0x17ec),h(this,'_maxDistan'+'ce',0x2761+-0x20c*-0x16+-0x37d*0xd),h(this,'_rollOffFa'+'ctor',-0x89a+0x4bc+0x3df),h(this,'_distanceM'+'odel',pp),h(this,'_slots',{}),h(this,'_playingBe'+'foreDisabl'+'e',{});}['_updateSou'+'ndInstance'+'s'](_0xb54c5c,_0x3417ec,_0x439e4e){const _0x4cad98=this['_slots'];for(const _0x290090 in _0x4cad98){const _0x4c0382=_0x4cad98[_0x290090];if(!_0x4c0382['overlap']){const _0x19ab40=_0x4c0382['instances'];for(let _0x1ce50d=0x86f+-0x24e6+0x1c77,_0x38ee39=_0x19ab40['length'];_0x1ce50d<_0x38ee39;_0x1ce50d++)_0x19ab40[_0x1ce50d][_0xb54c5c]=_0x439e4e?_0x4c0382[_0xb54c5c]*_0x3417ec:_0x3417ec;}}}set['distanceMo'+'del'](_0x545819){this['_distanceM'+'odel']=_0x545819,this['_updateSou'+'ndInstance'+'s']('distanceMo'+'del',_0x545819,!(0x3*0x8da+0x10e6+-0x2b73));}get['distanceMo'+'del'](){return this['_distanceM'+'odel'];}set['maxDistanc'+'e'](_0xa35432){this['_maxDistan'+'ce']=_0xa35432,this['_updateSou'+'ndInstance'+'s']('maxDistanc'+'e',_0xa35432,!(-0x1b4d+0x9d5+0x1179));}get['maxDistanc'+'e'](){return this['_maxDistan'+'ce'];}set['refDistanc'+'e'](_0x1dc4aa){this['_refDistan'+'ce']=_0x1dc4aa,this['_updateSou'+'ndInstance'+'s']('refDistanc'+'e',_0x1dc4aa,!(-0x2303+-0x1*0x18f+-0x3*-0xc31));}get['refDistanc'+'e'](){return this['_refDistan'+'ce'];}set['rollOffFac'+'tor'](_0x1cb76b){this['_rollOffFa'+'ctor']=_0x1cb76b,this['_updateSou'+'ndInstance'+'s']('rollOffFac'+'tor',_0x1cb76b,!(-0x13bc*0x1+0x25fa+-0xcb*0x17));}get['rollOffFac'+'tor'](){return this['_rollOffFa'+'ctor'];}set['pitch'](_0x4bb70b){this['_pitch']=_0x4bb70b,this['_updateSou'+'ndInstance'+'s']('pitch',_0x4bb70b,!(0x7*-0x2a1+0x1b3+0x10b4));}get['pitch'](){return this['_pitch'];}set['volume'](_0x3be892){this['_volume']=_0x3be892,this['_updateSou'+'ndInstance'+'s']('volume',_0x3be892,!(-0xf7e+0x1740+-0x7c2));}get['volume'](){return this['_volume'];}set['positional'](_0x299cd2){this['_positiona'+'l']=_0x299cd2;const _0x5ab144=this['_slots'];for(const _0x2bd869 in _0x5ab144){const _0x253354=_0x5ab144[_0x2bd869];if(!_0x253354['overlap']){const _0x47f522=_0x253354['instances'],_0x548f0a=_0x47f522['length'];for(let _0x224563=_0x548f0a-(0x157d+0x1*0xb55+-0x20d1);_0x224563>=-0x7c*0x30+0x14de+0x262;_0x224563--){const _0x2a0795=_0x47f522[_0x224563]['isPlaying']||_0x47f522[_0x224563]['isSuspende'+'d'],_0xa5f06d=_0x47f522[_0x224563]['currentTim'+'e'];_0x2a0795&&_0x47f522[_0x224563]['stop']();const _0x463f11=_0x253354['_createIns'+'tance']();_0x2a0795&&(_0x463f11['play'](),_0x463f11['currentTim'+'e']=_0xa5f06d),_0x47f522['push'](_0x463f11);}}}}get['positional'](){return this['_positiona'+'l'];}set['slots'](_0x4286c3){const _0x157ec0=this['_slots'];if(_0x157ec0){for(const _0x5538c9 in _0x157ec0)_0x157ec0[_0x5538c9]['stop']();}const _0x3e52fe={};for(const _0x4caafd in _0x4286c3)_0x4286c3[_0x4caafd]instanceof Vi?_0x3e52fe[_0x4286c3[_0x4caafd]['name']]=_0x4286c3[_0x4caafd]:_0x4286c3[_0x4caafd]['name']&&(_0x3e52fe[_0x4286c3[_0x4caafd]['name']]=new Vi(this,_0x4286c3[_0x4caafd]['name'],_0x4286c3[_0x4caafd]));this['_slots']=_0x3e52fe,this['enabled']&&this['entity']['enabled']&&this['onEnable']();}get['slots'](){return this['_slots'];}['onEnable'](){if(this['system']['_inTools'])return;const _0x520935=this['_slots'],_0x39567e=this['_playingBe'+'foreDisabl'+'e'];for(const _0x39df41 in _0x520935){const _0x1ebfaf=_0x520935[_0x39df41];_0x1ebfaf['autoPlay']&&_0x1ebfaf['isStopped']?_0x1ebfaf['play']():_0x39567e[_0x39df41]?_0x1ebfaf['resume']():_0x1ebfaf['isLoaded']||_0x1ebfaf['load']();}}['onDisable'](){const _0x271b12=this['_slots'],_0x59f25a={};for(const _0x1ae1f8 in _0x271b12)_0x271b12[_0x1ae1f8]['overlap']||_0x271b12[_0x1ae1f8]['isPlaying']&&(_0x271b12[_0x1ae1f8]['pause'](),_0x59f25a[_0x1ae1f8]=!(-0x3c7*-0x2+-0x765+-0x29));this['_playingBe'+'foreDisabl'+'e']=_0x59f25a;}['onRemove'](){this['off']();}['addSlot'](_0x47ad73,_0x3a2bc5){const _0x340448=this['_slots'];if(_0x340448[_0x47ad73])return w['warn']('A\x20sound\x20sl'+'ot\x20with\x20na'+'me\x20'+_0x47ad73+('\x20already\x20e'+'xists\x20on\x20E'+'ntity\x20')+this['entity']['path']),null;const _0x4dd8e0=new Vi(this,_0x47ad73,_0x3a2bc5);return _0x340448[_0x47ad73]=_0x4dd8e0,_0x4dd8e0['autoPlay']&&this['enabled']&&this['entity']['enabled']&&_0x4dd8e0['play'](),_0x4dd8e0;}['removeSlot'](_0x4611df){const _0xd07b20=this['_slots'];_0xd07b20[_0x4611df]&&(_0xd07b20[_0x4611df]['stop'](),delete _0xd07b20[_0x4611df]);}['slot'](_0x2c476b){return this['_slots'][_0x2c476b];}['_getSlotPr'+'operty'](_0x4a33ca,_0xca034b){if(!this['enabled']||!this['entity']['enabled'])return;const _0x161874=this['_slots'][_0x4a33ca];if(!_0x161874){w['warn']('Trying\x20to\x20'+'get\x20'+_0xca034b+('\x20from\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20')+_0x4a33ca+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}return _0x161874[_0xca034b];}['isPlaying'](_0x4238ef){return this['_getSlotPr'+'operty'](_0x4238ef,'isPlaying')||!(-0x32d*-0x2+-0x2*-0xe65+0x1*-0x2323);}['isLoaded'](_0x3ac541){return this['_getSlotPr'+'operty'](_0x3ac541,'isLoaded')||!(0x244d+0x485+-0x2b*0xf3);}['isPaused'](_0x4ba514){return this['_getSlotPr'+'operty'](_0x4ba514,'isPaused')||!(-0x10*-0x169+0x25*0xcd+-0x14e*0x28);}['isStopped'](_0xb818a7){return this['_getSlotPr'+'operty'](_0xb818a7,'isStopped')||!(-0x4b8+0xc2d+-0x6*0x13e);}['play'](_0x512bbc){if(!this['enabled']||!this['entity']['enabled'])return null;const _0x6cec4c=this['_slots'][_0x512bbc];return _0x6cec4c?_0x6cec4c['play']():(w['warn']('Trying\x20to\x20'+'play\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0x512bbc+('\x20which\x20doe'+'s\x20not\x20exis'+'t')),null);}['pause'](_0x3b0f4e){const _0x4aa468=this['_slots'];if(_0x3b0f4e){const _0x5b478f=_0x4aa468[_0x3b0f4e];if(!_0x5b478f){w['warn']('Trying\x20to\x20'+'pause\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20'+_0x3b0f4e+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x5b478f['pause']();}else{for(const _0x45aab9 in _0x4aa468)_0x4aa468[_0x45aab9]['pause']();}}['resume'](_0x3af305){const _0x5d105f=this['_slots'];if(_0x3af305){const _0x36e059=_0x5d105f[_0x3af305];if(!_0x36e059){w['warn']('Trying\x20to\x20'+'resume\x20sou'+'nd\x20slot\x20wi'+'th\x20name\x20'+_0x3af305+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x36e059['isPaused']&&_0x36e059['resume']();}else{for(const _0x18daaf in _0x5d105f)_0x5d105f[_0x18daaf]['resume']();}}['stop'](_0xa6ae31){const _0x3af393=this['_slots'];if(_0xa6ae31){const _0xe85ccc=_0x3af393[_0xa6ae31];if(!_0xe85ccc){w['warn']('Trying\x20to\x20'+'stop\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0xa6ae31+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0xe85ccc['stop']();}else{for(const _0x373915 in _0x3af393)_0x3af393[_0x373915]['stop']();}}}h(Xr,'EVENT_PLAY','play'),h(Xr,'EVENT_PAUS'+'E','pause'),h(Xr,'EVENT_RESU'+'ME','resume'),h(Xr,'EVENT_STOP','stop'),h(Xr,'EVENT_END','end');class CO{constructor(){this['enabled']=!(0x1*0x1476+-0x17c7+0x351);}}const Mv=['enabled'];class PO extends ct{constructor(_0x2fd837){super(_0x2fd837),this['id']='sound',this['ComponentT'+'ype']=Xr,this['DataType']=CO,this['schema']=Mv,this['manager']=_0x2fd837['soundManag'+'er'],w['assert'](this['manager'],'SoundCompo'+'nentSystem'+'\x20cannot\x20be'+'\x20created\x20w'+'ithout\x20sou'+'nd\x20manager'),this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['volume'](_0x3e9d94){this['manager']['volume']=_0x3e9d94;}get['volume'](){return this['manager']['volume'];}get['context'](){return gl()?this['manager']['context']:(w['warn']('WARNING:\x20A'+'udio\x20conte'+'xt\x20is\x20not\x20'+'supported\x20'+'on\x20this\x20br'+'owser'),null);}['initialize'+'ComponentD'+'ata'](_0x45a80a,_0x1d04a9,_0x355b42){_0x355b42=['volume','pitch','positional','refDistanc'+'e','maxDistanc'+'e','rollOffFac'+'tor','distanceMo'+'del','slots'];for(let _0x5cc3be=0x1*0x14ca+-0x71d+-0xdad;_0x5cc3be<_0x355b42['length'];_0x5cc3be++)_0x1d04a9['hasOwnProp'+'erty'](_0x355b42[_0x5cc3be])&&(_0x45a80a[_0x355b42[_0x5cc3be]]=_0x1d04a9[_0x355b42[_0x5cc3be]]);super['initialize'+'ComponentD'+'ata'](_0x45a80a,_0x1d04a9,['enabled']);}['cloneCompo'+'nent'](_0x46e98a,_0x5ebd79){const _0x1f6c66=_0x46e98a['sound'],_0x509c94=_0x1f6c66['slots'],_0x2baa49={};for(const _0x467cd4 in _0x509c94){const _0x7a51a6=_0x509c94[_0x467cd4];_0x2baa49[_0x467cd4]={'name':_0x7a51a6['name'],'volume':_0x7a51a6['volume'],'pitch':_0x7a51a6['pitch'],'loop':_0x7a51a6['loop'],'duration':_0x7a51a6['duration'],'startTime':_0x7a51a6['startTime'],'overlap':_0x7a51a6['overlap'],'autoPlay':_0x7a51a6['autoPlay'],'asset':_0x7a51a6['asset']};}const _0x4bc122={'distanceModel':_0x1f6c66['distanceMo'+'del'],'enabled':_0x1f6c66['enabled'],'maxDistance':_0x1f6c66['maxDistanc'+'e'],'pitch':_0x1f6c66['pitch'],'positional':_0x1f6c66['positional'],'refDistance':_0x1f6c66['refDistanc'+'e'],'rollOffFactor':_0x1f6c66['rollOffFac'+'tor'],'slots':_0x2baa49,'volume':_0x1f6c66['volume']};return this['addCompone'+'nt'](_0x5ebd79,_0x4bc122);}['onUpdate'](_0x3e8928){const _0x2b6e3b=this['store'];for(const _0x52e6b4 in _0x2b6e3b)if(_0x2b6e3b['hasOwnProp'+'erty'](_0x52e6b4)){const _0xc98b38=_0x2b6e3b[_0x52e6b4]['entity'];if(_0xc98b38['enabled']){const _0x16c8d5=_0xc98b38['sound'];if(_0x16c8d5['enabled']&&_0x16c8d5['positional']){const _0xe70b00=_0xc98b38['getPositio'+'n'](),_0x5327a6=_0x16c8d5['slots'];for(const _0x549e88 in _0x5327a6)_0x5327a6[_0x549e88]['updatePosi'+'tion'](_0xe70b00);}}}}['onBeforeRe'+'move'](_0x69d5b0,_0x5b5263){const _0x4fd2c2=_0x5b5263['slots'];for(const _0x23d7b8 in _0x4fd2c2)_0x4fd2c2[_0x23d7b8]['overlap']||_0x4fd2c2[_0x23d7b8]['stop']();_0x5b5263['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Xr['prototype'],Mv);const Rg='simple',Og='animated';class Gi extends me{constructor(_0x5c9078,_0x170b4c){super(),h(this,'_evtSetMes'+'hes',null),(this['_component']=_0x5c9078,this['_frame']=0x26f*0xd+0x23f7+-0x439a,this['_sprite']=null,this['_spriteAss'+'et']=null,this['spriteAsse'+'t']=_0x170b4c['spriteAsse'+'t'],this['name']=_0x170b4c['name'],this['fps']=_0x170b4c['fps']||-0xe11+0x1f36+0x1*-0x1125,this['loop']=_0x170b4c['loop']||!(-0x1898+-0x1*0x1558+0x2df1),this['_playing']=!(-0x1baa+-0x1*0xeef+-0x85*-0x52),this['_paused']=!(0x2*-0x1336+0x108c+0x15e1),this['_time']=-0x1*-0x16de+-0x1*0xf67+0xd*-0x93);}get['duration'](){if(this['_sprite']){const _0x10ca5e=this['fps']||Number['MIN_VALUE'];return this['_sprite']['frameKeys']['length']/Math['abs'](_0x10ca5e);}return-0x19dc+0x1ff2+-0x616;}set['frame'](_0x2793a4){this['_setFrame'](_0x2793a4);const _0x47fecf=this['fps']||Number['MIN_VALUE'];this['_setTime'](this['_frame']/_0x47fecf);}get['frame'](){return this['_frame'];}get['isPaused'](){return this['_paused'];}get['isPlaying'](){return this['_playing'];}set['sprite'](_0x2e8e7f){var _0x344d21;if(this['_sprite']&&((_0x344d21=this['_evtSetMes'+'hes'])==null||_0x344d21['off'](),this['_evtSetMes'+'hes']=null,this['_sprite']['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['off']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['off']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_sprite']=_0x2e8e7f,this['_sprite']&&(this['_evtSetMes'+'hes']=this['_sprite']['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['on']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['on']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_component']['currentCli'+'p']===this){let _0x1ba840;!_0x2e8e7f||!_0x2e8e7f['atlas']?(_0x1ba840=this['_component']['_meshInsta'+'nce'],_0x1ba840&&(_0x1ba840['deletePara'+'meter']('texture_em'+'issiveMap'),_0x1ba840['deletePara'+'meter']('texture_op'+'acityMap')),this['_component']['_hideModel']()):(_0x2e8e7f['atlas']['texture']&&(_0x1ba840=this['_component']['_meshInsta'+'nce'],_0x1ba840&&(_0x1ba840['setParamet'+'er']('texture_em'+'issiveMap',_0x2e8e7f['atlas']['texture']),_0x1ba840['setParamet'+'er']('texture_op'+'acityMap',_0x2e8e7f['atlas']['texture'])),this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['_component']['_showModel']()),this['time']&&this['fps']?this['time']=this['time']:this['frame']=this['frame']);}}get['sprite'](){return this['_sprite'];}set['spriteAsse'+'t'](_0x23d224){const _0x5b5bf0=this['_component']['system']['app']['assets'];let _0x131ac9=_0x23d224;if(_0x23d224 instanceof pe&&(_0x131ac9=_0x23d224['id']),this['_spriteAss'+'et']!==_0x131ac9){if(this['_spriteAss'+'et']){const _0x45a032=_0x5b5bf0['get'](this['_spriteAss'+'et']);_0x45a032&&this['_unbindSpr'+'iteAsset'](_0x45a032);}if(this['_spriteAss'+'et']=_0x131ac9,this['_spriteAss'+'et']){const _0x162a88=_0x5b5bf0['get'](this['_spriteAss'+'et']);_0x162a88?this['_bindSprit'+'eAsset'](_0x162a88):(this['sprite']=null,_0x5b5bf0['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['time'](_0x302942){this['_setTime'](_0x302942),this['_sprite']?this['frame']=Math['min'](this['_sprite']['frameKeys']['length']-(0x233f+-0x1a41+-0x8fd),Math['floor'](this['_time']*Math['abs'](this['fps']))):this['frame']=-0x22b4*0x1+-0x808+-0x2*-0x155e;}get['time'](){return this['_time'];}['_onSpriteA'+'ssetAdded'](_0xd5e98e){this['_component']['system']['app']['assets']['off']('add:'+_0xd5e98e['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0xd5e98e['id']&&this['_bindSprit'+'eAsset'](_0xd5e98e);}['_bindSprit'+'eAsset'](_0x4601d8){_0x4601d8['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x4601d8['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x4601d8['resource']?this['_onSpriteA'+'ssetLoad'](_0x4601d8):this['_component']['system']['app']['assets']['load'](_0x4601d8);}['_unbindSpr'+'iteAsset'](_0x3b9171){_0x3b9171&&(_0x3b9171['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x3b9171['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x3b9171['resource']&&!_0x3b9171['resource']['atlas']&&this['_component']['system']['app']['assets']['off']('load:'+_0x3b9171['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this));}['_onSpriteA'+'ssetLoad'](_0x3e5898){if(!_0x3e5898['resource'])this['sprite']=null;else{if(_0x3e5898['resource']['atlas'])this['sprite']=_0x3e5898['resource'];else{const _0x4ba6eb=_0x3e5898['data']['textureAtl'+'asAsset'],_0x10a770=this['_component']['system']['app']['assets'];_0x10a770['off']('load:'+_0x4ba6eb,this['_onTexture'+'AtlasLoad'],this),_0x10a770['once']('load:'+_0x4ba6eb,this['_onTexture'+'AtlasLoad'],this);}}}['_onTexture'+'AtlasLoad'](_0xdabcdf){const _0x3898b4=this['_spriteAss'+'et'];_0x3898b4 instanceof pe?this['_onSpriteA'+'ssetLoad'](_0x3898b4):this['_onSpriteA'+'ssetLoad'](this['_component']['system']['app']['assets']['get'](_0x3898b4));}['_onSpriteA'+'ssetRemove'](_0x509a3f){this['sprite']=null;}['_onSpriteM'+'eshesChang'+'e'](){this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['frame']);}['_onSpriteP'+'puChanged'](){this['_component']['currentCli'+'p']===this&&this['sprite']['renderMode']!==ci&&this['_component']['_showFrame'](this['frame']);}['_update'](_0x6a6694){if(this['fps']===0x254c+-0xc57*0x2+-0xc9e||!this['_playing']||this['_paused']||!this['_sprite'])return;const _0x44929a=this['fps']<0x9*-0x28e+-0x4a2+0x1ba0?-(-0x2*-0x676+0x1cb8*0x1+0x1*-0x29a3):-0x1fd7+0xe*0x110+0x10f8,_0x1b33ba=this['_time']+_0x6a6694*this['_component']['speed']*_0x44929a,_0x334579=this['duration'],_0x29f82f=_0x1b33ba>_0x334579||_0x1b33ba<-0x9d2+0x5*0x56b+-0x1*0x1145;this['_setTime'](_0x1b33ba);let _0x2011d3=this['frame'];this['_sprite']?_0x2011d3=Math['floor'](this['_sprite']['frameKeys']['length']*this['_time']/_0x334579):_0x2011d3=0x1*-0x1c36+-0x12c9+-0x35*-0xe3,_0x2011d3!==this['_frame']&&this['_setFrame'](_0x2011d3),_0x29f82f&&(this['loop']?(this['fire']('loop'),this['_component']['fire']('loop',this)):(this['_playing']=!(0x1da4*0x1+0x76d*-0x3+0x3*-0x274),this['_paused']=!(-0x43+-0x218b*0x1+0xf*0x241),this['fire']('end'),this['_component']['fire']('end',this)));}['_setTime'](_0x200115){this['_time']=_0x200115;const _0x18e664=this['duration'];this['_time']<0x1f19+0x20cb+-0x3fe4?this['loop']?this['_time']=this['_time']%_0x18e664+_0x18e664:this['_time']=0x8*-0x90+0xa9c+-0x61c:this['_time']>_0x18e664&&(this['loop']?this['_time']%=_0x18e664:this['_time']=_0x18e664);}['_setFrame'](_0x5b936e){this['_sprite']?this['_frame']=Y['clamp'](_0x5b936e,0x222d+0xa37*0x2+-0x369b,this['_sprite']['frameKeys']['length']-(-0x1cc7+-0x7f*-0x5+-0x1a4d*-0x1)):this['_frame']=_0x5b936e,this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['_frame']);}['_destroy'](){if(this['_spriteAss'+'et']){const _0x1e2ee7=this['_component']['system']['app']['assets'];this['_unbindSpr'+'iteAsset'](_0x1e2ee7['get'](this['_spriteAss'+'et']));}this['_sprite']&&(this['sprite']=null),this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null);}['play'](){this['_playing']||(this['_playing']=!(0x1*-0x32b+0x556*-0x5+0x1dd9),this['_paused']=!(0x1*0x1297+0x993+0x10b*-0x1b),this['frame']=-0x1*-0x1e8c+-0xa*0x388+0x4c4,this['fire']('play'),this['_component']['fire']('play',this));}['pause'](){!this['_playing']||this['_paused']||(this['_paused']=!(-0x1b63+-0xba7+0x270a),this['fire']('pause'),this['_component']['fire']('pause',this));}['resume'](){this['_paused']&&(this['_paused']=!(0x1fbf+-0x17b*-0x2+-0x22b4),this['fire']('resume'),this['_component']['fire']('resume',this));}['stop'](){this['_playing']&&(this['_playing']=!(-0x18d*0xb+-0x23f9*0x1+0x3509*0x1),this['_paused']=!(0x1284+0x21d7+-0x345a),this['_time']=0x1*-0x14ec+0x29*0xad+-0xc1*0x9,this['frame']=0x1b21+0x5*0xc7+-0x1f04,this['fire']('stop'),this['_component']['fire']('stop',this));}}h(Gi,'EVENT_PLAY','play'),h(Gi,'EVENT_PAUS'+'E','pause'),h(Gi,'EVENT_RESU'+'ME','resume'),h(Gi,'EVENT_STOP','stop'),h(Gi,'EVENT_END','end'),h(Gi,'EVENT_LOOP','loop');const Fg='texture_em'+'issiveMap',Ng='texture_op'+'acityMap',kg='material_e'+'missive',Ug='material_o'+'pacity',MO='innerOffse'+'t',DO='outerScale',IO='atlasRect';class cr extends we{constructor(_0x22e9f0,_0x743d4d){super(_0x22e9f0,_0x743d4d),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_type']=Rg,this['_material']=_0x22e9f0['defaultMat'+'erial'],this['_color']=new ie(-0x2002+-0x9e8+0x29eb,0x15a9+0x35*0x4a+-0x24fa,0x235d+0xc1*-0x17+0x7*-0x293,0xcaa*0x1+-0x179b+0xaf2),this['_colorUnif'+'orm']=new Float32Array(-0x8*0x4cf+0x5*-0x6b3+-0xde*-0x53),this['_speed']=-0x1e71*0x1+0x1893+0x9*0xa7,this['_flipX']=!(0x45a+0x75*-0x32+0x1281),this['_flipY']=!(0x1*0x16d3+0x6d9+-0xf5*0x1f),this['_width']=-0x21a+0x33d*-0x8+0x1c03,this['_height']=-0x67*0x26+-0x1485+0x23d0,this['_drawOrder']=-0xfb5+-0xb55+0x1b0a,this['_layers']=[Ji],this['_outerScal'+'e']=new J(-0xb4d*-0x3+0x15d*-0x1+-0x2089,0x2044+0x3*0xa99+-0x400e),this['_outerScal'+'eUniform']=new Float32Array(0x2228+-0x1a12+-0x814),this['_innerOffs'+'et']=new re(),this['_innerOffs'+'etUniform']=new Float32Array(-0x1*-0x487+0x13*0x13a+0x1bd1*-0x1),this['_atlasRect']=new re(),this['_atlasRect'+'Uniform']=new Float32Array(-0x265*-0xb+0x617+0x39a*-0x9),this['_batchGrou'+'pId']=-(-0x13ff+0x4a3+-0xcf*-0x13),this['_batchGrou'+'p']=null,this['_node']=new Ie(),this['_model']=new tr(),this['_model']['graph']=this['_node'],this['_meshInsta'+'nce']=null,_0x743d4d['addChild'](this['_model']['graph']),this['_model']['_entity']=_0x743d4d,this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_addedMode'+'l']=!(0x17d*0x14+0x15d2+0x5*-0xa51),this['_autoPlayC'+'lip']=null,this['_clips']={},this['_defaultCl'+'ip']=new Gi(this,{'name':this['entity']['name'],'fps':0x0,'loop':!(-0x4*-0x667+-0x174c+-0x1*0x24f),'spriteAsset':null}),this['_currentCl'+'ip']=this['_defaultCl'+'ip']);}set['type'](_0x416df2){this['_type']!==_0x416df2&&(this['_type']=_0x416df2,this['_type']===Rg?(this['stop'](),this['_currentCl'+'ip']=this['_defaultCl'+'ip'],this['enabled']&&this['entity']['enabled']&&(this['_currentCl'+'ip']['frame']=this['frame'],this['_currentCl'+'ip']['sprite']?this['_showModel']():this['_hideModel']())):this['_type']===Og&&(this['stop'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_currentCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['enabled']&&this['entity']['enabled']?this['_showModel']():this['_hideModel']()));}get['type'](){return this['_type'];}set['frame'](_0x11f82a){this['_currentCl'+'ip']['frame']=_0x11f82a;}get['frame'](){return this['_currentCl'+'ip']['frame'];}set['spriteAsse'+'t'](_0x53829a){this['_defaultCl'+'ip']['spriteAsse'+'t']=_0x53829a;}get['spriteAsse'+'t'](){return this['_defaultCl'+'ip']['_spriteAss'+'et'];}set['sprite'](_0x4a8974){this['_currentCl'+'ip']['sprite']=_0x4a8974;}get['sprite'](){return this['_currentCl'+'ip']['sprite'];}set['material'](_0x37dc04){this['_material']=_0x37dc04,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=_0x37dc04);}get['material'](){return this['_material'];}set['color'](_0x39b3c5){this['_color']['r']=_0x39b3c5['r'],this['_color']['g']=_0x39b3c5['g'],this['_color']['b']=_0x39b3c5['b'],this['_meshInsta'+'nce']&&(this['_colorUnif'+'orm'][0x162b+-0x21bf*-0x1+-0x37ea]=this['_color']['r'],this['_colorUnif'+'orm'][-0xa*-0x31+0x40c+0x5f5*-0x1]=this['_color']['g'],this['_colorUnif'+'orm'][0x1*0x1a61+-0x479+-0xaf3*0x2]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](kg,this['_colorUnif'+'orm']));}get['color'](){return this['_color'];}set['opacity'](_0x562518){this['_color']['a']=_0x562518,this['_meshInsta'+'nce']&&this['_meshInsta'+'nce']['setParamet'+'er'](Ug,_0x562518);}get['opacity'](){return this['_color']['a'];}set['clips'](_0x4a6f2a){if(!_0x4a6f2a){for(const _0x356040 in this['_clips'])this['removeClip'](_0x356040);return;}for(const _0x54a8bd in this['_clips']){let _0x24860c=!(-0x1780+0x69e*-0x5+0x3897);for(const _0x8d0c6 in _0x4a6f2a)if(_0x4a6f2a[_0x8d0c6]['name']===_0x54a8bd){_0x24860c=!(-0x1fd*0x13+-0x1d0f+0x91*0x76),this['_clips'][_0x54a8bd]['fps']=_0x4a6f2a[_0x8d0c6]['fps'],this['_clips'][_0x54a8bd]['loop']=_0x4a6f2a[_0x8d0c6]['loop'],_0x4a6f2a[_0x8d0c6]['hasOwnProp'+'erty']('sprite')?this['_clips'][_0x54a8bd]['sprite']=_0x4a6f2a[_0x8d0c6]['sprite']:_0x4a6f2a[_0x8d0c6]['hasOwnProp'+'erty']('spriteAsse'+'t')&&(this['_clips'][_0x54a8bd]['spriteAsse'+'t']=_0x4a6f2a[_0x8d0c6]['spriteAsse'+'t']);break;}_0x24860c||this['removeClip'](_0x54a8bd);}for(const _0x2418ea in _0x4a6f2a)this['_clips'][_0x4a6f2a[_0x2418ea]['name']]||this['addClip'](_0x4a6f2a[_0x2418ea]);this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['sprite'])&&this['_hideModel']();}get['clips'](){return this['_clips'];}get['currentCli'+'p'](){return this['_currentCl'+'ip'];}set['speed'](_0x3c3055){this['_speed']=_0x3c3055;}get['speed'](){return this['_speed'];}set['flipX'](_0x2f02ae){this['_flipX']!==_0x2f02ae&&(this['_flipX']=_0x2f02ae,this['_updateTra'+'nsform']());}get['flipX'](){return this['_flipX'];}set['flipY'](_0x325ea3){this['_flipY']!==_0x325ea3&&(this['_flipY']=_0x325ea3,this['_updateTra'+'nsform']());}get['flipY'](){return this['_flipY'];}set['width'](_0x251170){_0x251170!==this['_width']&&(this['_width']=_0x251170,this['_outerScal'+'e']['x']=this['_width'],this['sprite']&&(this['sprite']['renderMode']===Mt||this['sprite']['renderMode']===Pt)&&this['_updateTra'+'nsform']());}get['width'](){return this['_width'];}set['height'](_0x497693){_0x497693!==this['_height']&&(this['_height']=_0x497693,this['_outerScal'+'e']['y']=this['height'],this['sprite']&&(this['sprite']['renderMode']===Mt||this['sprite']['renderMode']===Pt)&&this['_updateTra'+'nsform']());}get['height'](){return this['_height'];}set['batchGroup'+'Id'](_0x2f1dd5){var _0x1c786e,_0x18083d;if(this['_batchGrou'+'pId']===_0x2f1dd5)return;const _0x4e12b4=this['_batchGrou'+'pId'];this['_batchGrou'+'pId']=_0x2f1dd5,this['entity']['enabled']&&_0x4e12b4>=0x1*-0x18b9+0x1c5e*-0x1+0x1*0x3517&&((_0x1c786e=this['system']['app']['batcher'])==null||_0x1c786e['remove'](St['SPRITE'],_0x4e12b4,this['entity'])),this['entity']['enabled']&&_0x2f1dd5>=-0x1a65+-0x2147+0x1*0x3bac?(_0x18083d=this['system']['app']['batcher'])==null||_0x18083d['insert'](St['SPRITE'],_0x2f1dd5,this['entity']):_0x4e12b4>=-0x31c+0x2709*-0x1+0x2a25*0x1&&this['_currentCl'+'ip']&&this['_currentCl'+'ip']['sprite']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['autoPlayCl'+'ip'](_0xd1a527){this['_autoPlayC'+'lip']=_0xd1a527 instanceof Gi?_0xd1a527['name']:_0xd1a527,this['_tryAutoPl'+'ay']();}get['autoPlayCl'+'ip'](){return this['_autoPlayC'+'lip'];}set['drawOrder'](_0x3021b5){this['_drawOrder']=_0x3021b5,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['drawOrder']=_0x3021b5);}get['drawOrder'](){return this['_drawOrder'];}set['layers'](_0x4efdea){this['_addedMode'+'l']&&this['_hideModel'](),this['_layers']=_0x4efdea,this['_meshInsta'+'nce']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['layers'](){return this['_layers'];}get['aabb'](){return this['_meshInsta'+'nce']?this['_meshInsta'+'nce']['aabb']:null;}['onEnable'](){var _0x990507;const _0x1af7b9=this['system']['app'],_0x221590=_0x1af7b9['scene'],_0x10d109=_0x221590['layers'];this['_evtLayers'+'Changed']=_0x221590['on']('set:layers',this['_onLayersC'+'hanged'],this),_0x10d109&&(this['_evtLayerA'+'dded']=_0x10d109['on']('add',this['_onLayerAd'+'ded'],this),this['_evtLayerR'+'emoved']=_0x10d109['on']('remove',this['_onLayerRe'+'moved'],this)),this['_showModel'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_batchGrou'+'pId']>=0x64*0x17+0x1f5b+-0x2857&&((_0x990507=_0x1af7b9['batcher'])==null||_0x990507['insert'](St['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDisable'](){var _0x50f79a,_0x49652e,_0x350c11,_0x385f7b;const _0x5c4c17=this['system']['app'],_0x2938c4=_0x5c4c17['scene']['layers'];(_0x50f79a=this['_evtLayers'+'Changed'])==null||_0x50f79a['off'](),this['_evtLayers'+'Changed']=null,_0x2938c4&&((_0x49652e=this['_evtLayerA'+'dded'])==null||_0x49652e['off'](),this['_evtLayerA'+'dded']=null,(_0x350c11=this['_evtLayerR'+'emoved'])==null||_0x350c11['off'](),this['_evtLayerR'+'emoved']=null),this['stop'](),this['_hideModel'](),this['_batchGrou'+'pId']>=-0x1*-0x1fdb+0x141b*-0x1+-0xbc0&&((_0x385f7b=_0x5c4c17['batcher'])==null||_0x385f7b['remove'](St['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDestroy'](){var _0x5477ef;this['_currentCl'+'ip']=null,this['_defaultCl'+'ip']&&(this['_defaultCl'+'ip']['_destroy'](),this['_defaultCl'+'ip']=null);for(const _0x4e4824 in this['_clips'])this['_clips'][_0x4e4824]['_destroy']();this['_clips']=null,this['_hideModel'](),this['_model']=null,(_0x5477ef=this['_node'])==null||_0x5477ef['remove'](),this['_node']=null,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=null,this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']=null);}['_showModel'](){if(this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x4acd7f=[this['_meshInsta'+'nce']];for(let _0x3afa4f=0x16ae+-0x1ee8+0x83a,_0x3d5584=this['_layers']['length'];_0x3afa4f<_0x3d5584;_0x3afa4f++){const _0x3e0c08=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x3afa4f]);_0x3e0c08&&_0x3e0c08['addMeshIns'+'tances'](_0x4acd7f);}this['_addedMode'+'l']=!(-0x1513*-0x1+0x2bb+-0x17ce);}['_hideModel'](){if(!this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x19be47=[this['_meshInsta'+'nce']];for(let _0x12d520=0x1*-0x83f+0x391+-0x1*-0x4ae,_0x1dcc8e=this['_layers']['length'];_0x12d520<_0x1dcc8e;_0x12d520++){const _0x38be6=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x12d520]);_0x38be6&&_0x38be6['removeMesh'+'Instances'](_0x19be47);}this['_addedMode'+'l']=!(0xb1d+0x44*-0x5b+0xd10);}['_showFrame'](_0x4cbec7){if(!this['sprite'])return;const _0xb91ac1=this['sprite']['meshes'][_0x4cbec7];if(!_0xb91ac1){this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']['visible']=!(0xb*0x315+-0x1274+0x7b9*-0x2));return;}let _0x1f92be;if(this['sprite']['renderMode']===Pt?_0x1f92be=this['system']['default9Sl'+'icedMateri'+'alSlicedMo'+'de']:this['sprite']['renderMode']===Mt?_0x1f92be=this['system']['default9Sl'+'icedMateri'+'alTiledMod'+'e']:_0x1f92be=this['system']['defaultMat'+'erial'],this['_meshInsta'+'nce']||(this['_meshInsta'+'nce']=new He(_0xb91ac1,this['_material'],this['_node']),this['_meshInsta'+'nce']['castShadow']=!(0x1*0x226b+0x1*0x1784+-0x39ee),this['_meshInsta'+'nce']['receiveSha'+'dow']=!(-0x348+0x1*-0x589+0x8d2*0x1),this['_meshInsta'+'nce']['drawOrder']=this['_drawOrder'],this['_model']['meshInstan'+'ces']['push'](this['_meshInsta'+'nce']),this['_colorUnif'+'orm'][0x2*-0x11a1+-0x7f+0x23c1]=this['_color']['r'],this['_colorUnif'+'orm'][0x95*-0x17+0x925*-0x2+0x1fae]=this['_color']['g'],this['_colorUnif'+'orm'][0x7*0x166+-0x17ef+0xe27]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](kg,this['_colorUnif'+'orm']),this['_meshInsta'+'nce']['setParamet'+'er'](Ug,this['_color']['a']),this['enabled']&&this['entity']['enabled']&&this['_showModel']()),this['_meshInsta'+'nce']['material']!==_0x1f92be&&(this['_meshInsta'+'nce']['material']=_0x1f92be),this['_meshInsta'+'nce']['mesh']!==_0xb91ac1&&(this['_meshInsta'+'nce']['mesh']=_0xb91ac1,this['_meshInsta'+'nce']['visible']=!(0x1975+-0x1cf3+-0x2*-0x1bf),this['_meshInsta'+'nce']['_aabbVer']=-(-0x1135+-0xca*0xe+0x1c42)),this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_meshInsta'+'nce']['setParamet'+'er'](Fg,this['sprite']['atlas']['texture']),this['_meshInsta'+'nce']['setParamet'+'er'](Ng,this['sprite']['atlas']['texture'])):(this['_meshInsta'+'nce']['deletePara'+'meter'](Fg),this['_meshInsta'+'nce']['deletePara'+'meter'](Ng)),this['sprite']['atlas']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){this['_meshInsta'+'nce']['_updateAab'+'bFunc']=this['_updateAab'+'bFunc'];const _0x4eb166=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][_0x4cbec7]];if(_0x4eb166){const _0x14e607=(0xe55+0x17b*0x1a+-0x34d1)/_0x4eb166['rect']['z'],_0x4166b4=(-0x5f9+-0x1dc9+-0x28e*-0xe)/_0x4eb166['rect']['w'];this['_innerOffs'+'et']['set'](_0x4eb166['border']['x']*_0x14e607,_0x4eb166['border']['y']*_0x4166b4,_0x4eb166['border']['z']*_0x14e607,_0x4eb166['border']['w']*_0x4166b4);const _0x6dfdf8=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x4eb166['rect']['x']/_0x6dfdf8['width'],_0x4eb166['rect']['y']/_0x6dfdf8['height'],_0x4eb166['rect']['z']/_0x6dfdf8['width'],_0x4eb166['rect']['w']/_0x6dfdf8['height']);}else this['_innerOffs'+'et']['set'](0x1674+-0x2272+0xbfe*0x1,-0x1849+0x11c8+0x22b*0x3,0x19cc+-0x71f+-0x12ad,0x1ce2+0x1*-0x17b1+-0x531);this['_innerOffs'+'etUniform'][0x11de+-0x80*0x35+0x8a2]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][-0x1749*0x1+-0x2636+0x3d80]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][0x11ff+-0x6*0x157+-0x9f3]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][0x1*-0x641+0x208d+-0x1a49]=this['_innerOffs'+'et']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](MO,this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][0x5b5+0x101e*0x2+-0x25f1]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][0x125b+-0x91a+0x8*-0x128]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][-0x9c*-0x2+0x76f+0x1*-0x8a5]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][0x8df+-0x117c*0x1+0x18*0x5c]=this['_atlasRect']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](IO,this['_atlasRect'+'Uniform']);}else this['_meshInsta'+'nce']['_updateAab'+'bFunc']=null;this['_updateTra'+'nsform']();}['_updateTra'+'nsform'](){let _0x28e67c=this['flipX']?-(-0x1d8e+0x18c3+0x4cc):0x573+0x2f5+-0x867,_0x56ab75=this['flipY']?-(-0x2f*0x62+0x1*0x120+0x10df):0x121*-0xd+0x1821+-0x973,_0x305b82=-0x2383*-0x1+-0x2379+-0xa,_0x379828=0x31*0xb+-0x2*0x116d+0x20bf;if(this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){let _0x2d2380=-0x88c+0x206c+-0x17df,_0x3921ba=0x1*-0x713+0x16cf+-0x1*0xfbb;if(this['sprite']['atlas']){const _0x1127e0=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][this['frame']]];_0x1127e0&&(_0x2d2380=_0x1127e0['rect']['z'],_0x3921ba=_0x1127e0['rect']['w'],_0x305b82=(0x99*-0xb+0x21e9+-0x1b56*0x1+0.5-_0x1127e0['pivot']['x'])*this['_width'],_0x379828=(0x3da*-0x7+-0x7ac+0x8f*0x3e+0.5-_0x1127e0['pivot']['y'])*this['_height']);}const _0x218e4f=_0x2d2380/this['sprite']['pixelsPerU'+'nit'],_0x1c8466=_0x3921ba/this['sprite']['pixelsPerU'+'nit'];this['_outerScal'+'e']['set'](Math['max'](this['_width'],this['_innerOffs'+'et']['x']*_0x218e4f),Math['max'](this['_height'],this['_innerOffs'+'et']['y']*_0x1c8466)),_0x28e67c*=_0x218e4f,_0x56ab75*=_0x1c8466,this['_outerScal'+'e']['x']/=_0x218e4f,this['_outerScal'+'e']['y']/=_0x1c8466,_0x28e67c*=Y['clamp'](this['_width']/(this['_innerOffs'+'et']['x']*_0x218e4f),-0x11*-0x187+-0x1b36+-0x1d*-0xb+0.0001,-0x22*0xe5+0x1304*0x2+-0x1*0x79d),_0x56ab75*=Y['clamp'](this['_height']/(this['_innerOffs'+'et']['y']*_0x1c8466),-0xa93*0x1+0x109*-0x5+0xfc0+0.0001,-0x1ba0+-0x2234+-0x3dd5*-0x1),this['_meshInsta'+'nce']&&(this['_outerScal'+'eUniform'][0x24cd+0x1b43+0xa4*-0x64]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][0x22fe+-0x3b*0x4a+-0x1*0x11ef]=this['_outerScal'+'e']['y'],this['_meshInsta'+'nce']['setParamet'+'er'](DO,this['_outerScal'+'eUniform']));}this['_node']['setLocalSc'+'ale'](_0x28e67c,_0x56ab75,0x21e9+0x18c0+-0x3aa8),this['_node']['setLocalPo'+'sition'](_0x305b82,_0x379828,-0x2c+0x3f5*-0x4+-0x800*-0x2);}['_updateAab'+'b'](_0x4eb6bc){return _0x4eb6bc['center']['set'](-0x35*0x95+0x1f03+-0x2*0x15,0x16*-0xe9+-0x9f5*-0x3+-0x9d9,0x3*-0x1a3+-0x27c*0x5+0x1d*0x99),_0x4eb6bc['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(-0x121*-0x9+0x2*-0x639+0x249+0.5),this['_outerScal'+'e']['y']*(-0x1ae4*0x1+0x13*0x26+0x1812+0.5),-0x29a*-0xb+-0x10*-0x75+-0x49*0x7e+0.001),_0x4eb6bc['setFromTra'+'nsformedAa'+'bb'](_0x4eb6bc,this['_node']['getWorldTr'+'ansform']()),_0x4eb6bc;}['_tryAutoPl'+'ay'](){if(!this['_autoPlayC'+'lip']||this['type']!==Og)return;const _0x5b0cac=this['_clips'][this['_autoPlayC'+'lip']];_0x5b0cac&&!_0x5b0cac['isPlaying']&&(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['isPlaying'])&&this['enabled']&&this['entity']['enabled']&&this['play'](_0x5b0cac['name']);}['_onLayersC'+'hanged'](_0x5dc514,_0x3697eb){_0x5dc514['off']('add',this['onLayerAdd'+'ed'],this),_0x5dc514['off']('remove',this['onLayerRem'+'oved'],this),_0x3697eb['on']('add',this['onLayerAdd'+'ed'],this),_0x3697eb['on']('remove',this['onLayerRem'+'oved'],this),this['enabled']&&this['entity']['enabled']&&this['_showModel']();}['_onLayerAd'+'ded'](_0x1ea06c){this['layers']['indexOf'](_0x1ea06c['id'])<0x2099+0x1546+-0x35df*0x1||this['_addedMode'+'l']&&this['enabled']&&this['entity']['enabled']&&this['_meshInsta'+'nce']&&_0x1ea06c['addMeshIns'+'tances']([this['_meshInsta'+'nce']]);}['_onLayerRe'+'moved'](_0x3ee7e1){!this['_meshInsta'+'nce']||this['layers']['indexOf'](_0x3ee7e1['id'])<-0x49*-0x42+-0x365+-0x167*0xb||_0x3ee7e1['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}['removeMode'+'lFromLayer'+'s'](){for(let _0x10dd73=-0x1d32+0xf0+0x1c42;_0x10dd73<this['layers']['length'];_0x10dd73++){const _0x583e7e=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x10dd73]);_0x583e7e&&_0x583e7e['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}}['addClip'](_0x1e75c1){const _0x1590a3=new Gi(this,{'name':_0x1e75c1['name'],'fps':_0x1e75c1['fps'],'loop':_0x1e75c1['loop'],'spriteAsset':_0x1e75c1['spriteAsse'+'t']});return this['_clips'][_0x1e75c1['name']]=_0x1590a3,_0x1590a3['name']&&_0x1590a3['name']===this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),_0x1590a3;}['removeClip'](_0x59d9e8){delete this['_clips'][_0x59d9e8];}['clip'](_0x3af078){return this['_clips'][_0x3af078];}['play'](_0x4519c1){const _0x53af4a=this['_clips'][_0x4519c1],_0xe56ebb=this['_currentCl'+'ip'];return _0xe56ebb&&_0xe56ebb!==_0x53af4a&&(_0xe56ebb['_playing']=!(0x777+-0x1321*-0x2+0x58*-0x85)),this['_currentCl'+'ip']=_0x53af4a,this['_currentCl'+'ip']?(this['_currentCl'+'ip']=_0x53af4a,this['_currentCl'+'ip']['play']()):w['warn']('Trying\x20to\x20'+'play\x20sprit'+'e\x20animatio'+'n\x20'+_0x4519c1+('\x20which\x20doe'+'s\x20not\x20exis'+'t.')),_0x53af4a;}['pause'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['_currentCl'+'ip']['pause']();}['resume'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPaused']&&this['_currentCl'+'ip']['resume']();}['stop'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['stop']();}}h(cr,'EVENT_PLAY','play'),h(cr,'EVENT_PAUS'+'E','pause'),h(cr,'EVENT_RESU'+'ME','resume'),h(cr,'EVENT_STOP','stop'),h(cr,'EVENT_END','end'),h(cr,'EVENT_LOOP','loop');class LO{constructor(){this['enabled']=!(-0x1ecc+-0x1*0x955+0x2821);}}const Dv=['enabled'];class RO extends ct{constructor(_0x134bc3){super(_0x134bc3),this['id']='sprite',this['ComponentT'+'ype']=cr,this['DataType']=LO,this['schema']=Dv,this['_defaultTe'+'xture']=null,this['_defaultMa'+'terial']=null,this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=null,this['_default9S'+'licedMater'+'ialTiledMo'+'de']=null,this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['defaultMat'+'erial'](_0xd4069f){this['_defaultMa'+'terial']=_0xd4069f;}get['defaultMat'+'erial'](){if(!this['_defaultMa'+'terial']){const _0x1e1d23=new _e(this['app']['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':_s,'name':'sprite'}),_0x2c6990=new Uint8Array(_0x1e1d23['lock']());_0x2c6990[0x1*-0x254f+-0x58e*-0x7+-0x193]=_0x2c6990[-0x2112+0x6*-0x33d+0x3481*0x1]=_0x2c6990[0xfb5+-0x1*-0x120d+-0xc*0x2d0]=_0x2c6990[-0xa9f*-0x1+0x641+-0x10dd]=0x11f6+-0x6b7*0x1+-0x40*0x29,_0x1e1d23['unlock']();const _0xd543dc=new Ut();_0xd543dc['diffuse']['set'](0x9*0x22d+-0x2*-0x20e+-0x5*0x4bd,-0x2a5*0x8+0x7e4+0xd44,0x5*0x68f+0x1*-0x1cf7+0x14*-0x31),_0xd543dc['emissive']['set'](0x76b+0xbe0+-0x134a,-0x2*-0xcb3+-0xdfe+-0xb67,0xc11+0x12b1*-0x1+0x6a1),_0xd543dc['emissiveMa'+'p']=_0x1e1d23,_0xd543dc['opacityMap']=_0x1e1d23,_0xd543dc['opacityMap'+'Channel']='a',_0xd543dc['useLightin'+'g']=!(-0xd93*-0x1+-0x13ae+0x61c*0x1),_0xd543dc['useTonemap']=!(-0x1*0x1dc7+0x8b2+0x1516*0x1),_0xd543dc['useFog']=!(-0x950+-0xb3*-0x11+-0x5e*0x7),_0xd543dc['useSkybox']=!(0x1b45+-0x3cb*-0x1+-0x1f0f),_0xd543dc['blendType']=Fn,_0xd543dc['depthWrite']=!(-0x197c+-0x1*-0x268f+0x1*-0xd12),_0xd543dc['pixelSnap']=!(-0x76*0x42+0x88b*-0x4+0x4099),_0xd543dc['cull']=bt,_0xd543dc['update'](),this['_defaultTe'+'xture']=_0x1e1d23,this['_defaultMa'+'terial']=_0xd543dc;}return this['_defaultMa'+'terial'];}set['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](_0x158089){this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x158089;}get['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](){if(!this['_default9S'+'licedMater'+'ialSlicedM'+'ode']){const _0xe13cfb=this['defaultMat'+'erial']['clone']();_0xe13cfb['nineSliced'+'Mode']=Pt,_0xe13cfb['update'](),this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0xe13cfb;}return this['_default9S'+'licedMater'+'ialSlicedM'+'ode'];}set['default9Sl'+'icedMateri'+'alTiledMod'+'e'](_0x54634e){this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x54634e;}get['default9Sl'+'icedMateri'+'alTiledMod'+'e'](){if(!this['_default9S'+'licedMater'+'ialTiledMo'+'de']){const _0x2baf89=this['defaultMat'+'erial']['clone']();_0x2baf89['nineSliced'+'Mode']=Mt,_0x2baf89['update'](),this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x2baf89;}return this['_default9S'+'licedMater'+'ialTiledMo'+'de'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),this['_defaultTe'+'xture']&&(this['_defaultTe'+'xture']['destroy'](),this['_defaultTe'+'xture']=null);}['initialize'+'ComponentD'+'ata'](_0x421fc6,_0x57cb96,_0x349be5){if(_0x57cb96['enabled']!==void(0x8d5+-0x1965+0x1090)&&(_0x421fc6['enabled']=_0x57cb96['enabled']),_0x421fc6['type']=_0x57cb96['type'],_0x57cb96['layers']&&Array['isArray'](_0x57cb96['layers'])&&(_0x421fc6['layers']=_0x57cb96['layers']['slice'](-0x29*-0xcb+0x5*-0x14b+-0xd06*0x2)),_0x57cb96['drawOrder']!==void(-0x18*-0xc1+0x21a8+-0x33c0)&&(_0x421fc6['drawOrder']=_0x57cb96['drawOrder']),_0x57cb96['color']!==void(-0x123*-0xb+0x11a6+-0x1e27)&&(_0x57cb96['color']instanceof ie?_0x421fc6['color']['set'](_0x57cb96['color']['r'],_0x57cb96['color']['g'],_0x57cb96['color']['b'],_0x57cb96['opacity']??0x93a*0x2+0x25*-0x8f+0x238):_0x421fc6['color']['set'](_0x57cb96['color'][-0x1e68*0x1+-0x3ce+-0x3a*-0x97],_0x57cb96['color'][-0x25cf+-0x2b*0x6b+0x37c9],_0x57cb96['color'][0xf31*0x1+-0x1551*0x1+-0x5*-0x13a],_0x57cb96['opacity']??0x13a1+-0x2*-0x833+-0x2406),_0x421fc6['color']=_0x421fc6['color']),_0x57cb96['opacity']!==void(0x12e8+-0x3*-0x4dc+-0x4*0x85f)&&(_0x421fc6['opacity']=_0x57cb96['opacity']),_0x57cb96['flipX']!==void(0x5*0x38b+-0x149*-0x9+-0x1*0x1d48)&&(_0x421fc6['flipX']=_0x57cb96['flipX']),_0x57cb96['flipY']!==void(0x11*-0x15d+0x168c+0xa1)&&(_0x421fc6['flipY']=_0x57cb96['flipY']),_0x57cb96['width']!==void(0x1632+0x265d+-0x3c8f)&&(_0x421fc6['width']=_0x57cb96['width']),_0x57cb96['height']!==void(0x20f4+0x1d5f+-0x3e53)&&(_0x421fc6['height']=_0x57cb96['height']),_0x57cb96['spriteAsse'+'t']!==void(-0x3*0x953+-0x1f91*-0x1+-0x8*0x73)&&(_0x421fc6['spriteAsse'+'t']=_0x57cb96['spriteAsse'+'t']),_0x57cb96['sprite']&&(_0x421fc6['sprite']=_0x57cb96['sprite']),_0x57cb96['frame']!==void(-0x574+0x1ab9*0x1+-0xb*0x1ef)&&(_0x421fc6['frame']=_0x57cb96['frame']),_0x57cb96['clips']){for(const _0x3d4f5b in _0x57cb96['clips'])_0x421fc6['addClip'](_0x57cb96['clips'][_0x3d4f5b]);}_0x57cb96['speed']!==void(0x17a3+0x5a6+-0x1d49)&&(_0x421fc6['speed']=_0x57cb96['speed']),_0x57cb96['autoPlayCl'+'ip']&&(_0x421fc6['autoPlayCl'+'ip']=_0x57cb96['autoPlayCl'+'ip']),_0x421fc6['batchGroup'+'Id']=_0x57cb96['batchGroup'+'Id']===void(-0xb2*0x2b+-0x2*0xce+0x1f82)||_0x57cb96['batchGroup'+'Id']===null?-(-0x400+0x494+0x7*-0x15):_0x57cb96['batchGroup'+'Id'],super['initialize'+'ComponentD'+'ata'](_0x421fc6,_0x57cb96,_0x349be5);}['cloneCompo'+'nent'](_0x4f8af3,_0x17d6b1){const _0x1d2930=_0x4f8af3['sprite'];return this['addCompone'+'nt'](_0x17d6b1,{'enabled':_0x1d2930['enabled'],'type':_0x1d2930['type'],'spriteAsset':_0x1d2930['spriteAsse'+'t'],'sprite':_0x1d2930['sprite'],'width':_0x1d2930['width'],'height':_0x1d2930['height'],'frame':_0x1d2930['frame'],'color':_0x1d2930['color']['clone'](),'opacity':_0x1d2930['opacity'],'flipX':_0x1d2930['flipX'],'flipY':_0x1d2930['flipY'],'speed':_0x1d2930['speed'],'clips':_0x1d2930['clips'],'autoPlayClip':_0x1d2930['autoPlayCl'+'ip'],'batchGroupId':_0x1d2930['batchGroup'+'Id'],'drawOrder':_0x1d2930['drawOrder'],'layers':_0x1d2930['layers']['slice'](0x5*-0x565+0x64+0x1a95)});}['onUpdate'](_0x29416c){const _0xd32af1=this['store'];for(const _0x213cba in _0xd32af1)if(_0xd32af1['hasOwnProp'+'erty'](_0x213cba)){const _0x1d298d=_0xd32af1[_0x213cba];if(_0x1d298d['data']['enabled']&&_0x1d298d['entity']['enabled']){const _0x2e909d=_0x1d298d['entity']['sprite'];_0x2e909d['_currentCl'+'ip']&&_0x2e909d['_currentCl'+'ip']['_update'](_0x29416c);}}}['onBeforeRe'+'move'](_0x1aab0b,_0xb34527){_0xb34527['onDestroy']();}}we['_buildAcce'+'ssors'](cr['prototype'],Dv);class cn extends we{constructor(_0xafb9c6,_0x44cd11){super(_0xafb9c6,_0x44cd11),this['_oldState']=!(0x1464+-0x23dd*0x1+0x11*0xe9),this['_size']=new D(),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['size'](_0x4595d6){_0x4595d6 instanceof D?this['_size']['copy'](_0x4595d6):_0x4595d6 instanceof Array&&_0x4595d6['length']>=0x451*0x3+0x61*0x12+-0x13c2&&this['size']['set'](_0x4595d6[0x178b+0x1*-0x11c9+-0x5c2],_0x4595d6[0x7c4+0xd*0x1af+0x42*-0x73],_0x4595d6[-0x18dc+-0x8c3*0x1+0x21a1]);}get['size'](){return this['_size'];}['onEnable'](){this['_checkStat'+'e']();}['onDisable'](){this['_checkStat'+'e']();}['_onSetEnab'+'led'](_0x291216,_0x4b1538,_0x3f42fd){this['_checkStat'+'e']();}['_checkStat'+'e'](){const _0x44d9d8=this['enabled']&&this['entity']['enabled'];_0x44d9d8!==this['_oldState']&&(this['_oldState']=_0x44d9d8,this['fire']('enable'),this['fire']('state',this['enabled']));}['_onBeforeR'+'emove'](){this['fire']('remove');}}h(cn,'EVENT_ENAB'+'LE','enable'),h(cn,'EVENT_DISA'+'BLE','disable'),h(cn,'EVENT_STAT'+'E','state'),h(cn,'EVENT_REMO'+'VE','remove');class OO{constructor(){this['enabled']=!(-0x1f76+0x14ce+0xf8*0xb);}}const Iv=['enabled'];class FO extends ct{constructor(_0x5c08ec){super(_0x5c08ec),this['id']='zone',this['ComponentT'+'ype']=cn,this['DataType']=OO,this['schema']=Iv,this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this);}['initialize'+'ComponentD'+'ata'](_0x2f288b,_0x4dc2c2,_0xf66641){_0x2f288b['enabled']=_0x4dc2c2['hasOwnProp'+'erty']('enabled')?!!_0x4dc2c2['enabled']:!(0x4*0x886+-0x10ec+-0x112c),_0x4dc2c2['size']&&(_0x4dc2c2['size']instanceof D?_0x2f288b['size']['copy'](_0x4dc2c2['size']):_0x4dc2c2['size']instanceof Array&&_0x4dc2c2['size']['length']>=0x9af*-0x1+-0x30*0x40+0x2*0xad9&&_0x2f288b['size']['set'](_0x4dc2c2['size'][0x497+0x10*0x8e+-0xd77],_0x4dc2c2['size'][-0x10*0x58+0xca2+-0x721],_0x4dc2c2['size'][0xb6b+0xfb9+-0x1b22]));}['cloneCompo'+'nent'](_0x12b060,_0x5bdddd){const _0x55be53={'enabled':_0x12b060['zone']['enabled'],'size':_0x12b060['zone']['size']};return this['addCompone'+'nt'](_0x5bdddd,_0x55be53);}['_onBeforeR'+'emove'](_0x40e768,_0x93be68){_0x93be68['_onBeforeR'+'emove']();}}we['_buildAcce'+'ssors'](cn['prototype'],Iv);class NO{constructor(_0x56afc7,_0x585b63){this['effect']=_0x56afc7,this['inputTarge'+'t']=_0x585b63,this['outputTarg'+'et']=null,this['name']=_0x56afc7['constructo'+'r']['name'];}}class kO{constructor(_0x3e7b55,_0x175afa){this['app']=_0x3e7b55,this['camera']=_0x175afa,this['destinatio'+'nRenderTar'+'get']=null,this['effects']=[],this['enabled']=!(-0x387*-0x2+0x3*-0x279+0x1*0x5e),this['depthTarge'+'t']=null,_0x175afa['on']('set:rect',this['onCameraRe'+'ctChanged'],this);}['_allocateC'+'olorBuffer'](_0x4c4bc7,_0x533efc){const _0x9e6d63=this['camera']['rect'],_0x1ea6e2=this['destinatio'+'nRenderTar'+'get'],_0x51a443=this['app']['graphicsDe'+'vice'],_0x4ac4b2=Math['floor'](_0x9e6d63['z']*((_0x1ea6e2==null?void(0x202*0x7+-0x1893+0xa85):_0x1ea6e2['width'])??_0x51a443['width'])),_0x180ef0=Math['floor'](_0x9e6d63['w']*((_0x1ea6e2==null?void(0x71*0x53+-0x1*-0x1ee9+-0x438c):_0x1ea6e2['height'])??_0x51a443['height']));return new _e(_0x51a443,{'name':_0x533efc,'format':_0x4c4bc7,'width':_0x4ac4b2,'height':_0x180ef0,'mipmaps':!(-0x1a0*0x13+-0x5f*0x1+-0x4*-0x7d0),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});}['_createOff'+'screenTarg'+'et'](_0x368598,_0x1e9adf){const _0x31b02e=this['app']['graphicsDe'+'vice'],_0x15b618=(this['destinatio'+'nRenderTar'+'get']??_0x31b02e['backBuffer'])['isColorBuf'+'ferSrgb'](0x1*0x21a6+0x1747+0x461*-0xd),_0x3c7bd0=(_0x1e9adf&&_0x31b02e['getRendera'+'bleHdrForm'+'at']([nt,Xt],!(0x1bb8+-0xd22+-0x1*0xe96)))??(_0x15b618?_s:Ne),_0x2cf84f=this['camera']['entity']['name']+('-posteffec'+'t-')+this['effects']['length'],_0x541c43=this['_allocateC'+'olorBuffer'](_0x3c7bd0,_0x2cf84f);return new gt({'colorBuffer':_0x541c43,'depth':_0x368598,'stencil':_0x368598&&this['app']['graphicsDe'+'vice']['supportsSt'+'encil'],'samples':_0x368598?_0x31b02e['samples']:0xa57+0x24de+-0x35*0xe4});}['_resizeOff'+'screenTarg'+'et'](_0x1e928b){const _0x3848cb=_0x1e928b['colorBuffe'+'r']['format'],_0x3b8472=_0x1e928b['colorBuffe'+'r']['name'];_0x1e928b['destroyFra'+'meBuffers'](),_0x1e928b['destroyTex'+'tureBuffer'+'s'](),_0x1e928b['_colorBuff'+'er']=this['_allocateC'+'olorBuffer'](_0x3848cb,_0x3b8472),_0x1e928b['_colorBuff'+'ers']=[_0x1e928b['_colorBuff'+'er']];}['_destroyOf'+'fscreenTar'+'get'](_0x5ec4fe){_0x5ec4fe['destroyTex'+'tureBuffer'+'s'](),_0x5ec4fe['destroy']();}['addEffect'](_0x30b18a){const _0x2c0252=this['effects'],_0x35f589=_0x2c0252['length']===0xbb2+0x1*0x215+0x1*-0xdc7,_0x54c683=this['_createOff'+'screenTarg'+'et'](_0x35f589,_0x30b18a['hdr']),_0x48bb0e=new NO(_0x30b18a,_0x54c683);_0x2c0252['push'](_0x48bb0e),this['_sourceTar'+'get']=_0x48bb0e['inputTarge'+'t'],_0x2c0252['length']>-0xd*0x176+-0x108e+0x238d&&(_0x2c0252[_0x2c0252['length']-(-0x2*-0xb42+0x3b5+0x1a37*-0x1)]['outputTarg'+'et']=_0x48bb0e['inputTarge'+'t']),this['_newPostEf'+'fect']=_0x30b18a,_0x30b18a['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap'](),this['enable'](),this['_newPostEf'+'fect']=void(-0xd*0x89+-0x9*-0x373+-0x1816);}['removeEffe'+'ct'](_0x3afaee){let _0x58a670=-(0x1b2c+0x60a+0x2135*-0x1);for(let _0x163b3d=-0x5*-0x49+0x1*-0xec1+0xd54,_0xa6ad17=this['effects']['length'];_0x163b3d<_0xa6ad17;_0x163b3d++)if(this['effects'][_0x163b3d]['effect']===_0x3afaee){_0x58a670=_0x163b3d;break;}_0x58a670>=-0x1bba+0xd*0x1e3+0x333&&(_0x58a670>-0x13*0x209+-0x145a+-0x209*-0x1d?this['effects'][_0x58a670-(0xc17+-0x56*0x1+-0x5e0*0x2)]['outputTarg'+'et']=_0x58a670+(-0x2571+-0x171*0x5+0x2ca7*0x1)<this['effects']['length']?this['effects'][_0x58a670+(-0x1067+0x1*-0x10b3+0x211b)]['inputTarge'+'t']:null:this['effects']['length']>0x1419+0x212f+-0x251*0x17&&(this['effects'][0x1621+-0x1eb2+0x892]['inputTarge'+'t']['_depth']||(this['_destroyOf'+'fscreenTar'+'get'](this['effects'][0xfdd*-0x1+0x23*-0xab+-0xc5*-0x33]['inputTarge'+'t']),this['effects'][0x52*0x1+-0x5*0x329+0xf7c]['inputTarge'+'t']=this['_createOff'+'screenTarg'+'et'](!(0xebe+0x1b15*-0x1+0xc57),this['effects'][-0x1*-0x887+-0xff1+0x9*0xd3]['hdr']),this['_sourceTar'+'get']=this['effects'][-0x1*-0xcb5+0x186e+-0x2522]['inputTarge'+'t']),this['camera']['renderTarg'+'et']=this['effects'][-0x11f2*-0x2+0x21b2+-0x4595]['inputTarge'+'t']),this['_destroyOf'+'fscreenTar'+'get'](this['effects'][_0x58a670]['inputTarge'+'t']),this['effects']['splice'](_0x58a670,-0x9af*0x1+-0x24*-0xe2+0x2c3*-0x8)),this['enabled']&&_0x3afaee['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap'](),this['effects']['length']===-0x233e+-0x10e8+0x4b*0xb2&&this['disable']();}['_requestDe'+'pthMaps'](){for(let _0x11726d=0x2465+0x2557+-0x49bc,_0x4cb8fe=this['effects']['length'];_0x11726d<_0x4cb8fe;_0x11726d++){const _0x4794fc=this['effects'][_0x11726d]['effect'];this['_newPostEf'+'fect']!==_0x4794fc&&_0x4794fc['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap']();}}['_releaseDe'+'pthMaps'](){for(let _0xda3770=0x169*-0xa+-0x1790+0x3*0xc8e,_0x3bc05e=this['effects']['length'];_0xda3770<_0x3bc05e;_0xda3770++)this['effects'][_0xda3770]['effect']['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap']();}['_requestDe'+'pthMap'](){const _0x586dd5=this['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x586dd5&&(_0x586dd5['incrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(0x1*0x423+-0x1794+0x1371)));}['_releaseDe'+'pthMap'](){const _0x41639a=this['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x41639a&&(_0x41639a['decrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(0x1583+-0x31a*-0x1+-0x189c)));}['destroy'](){for(let _0x5ebf25=-0x16*-0x176+-0x917+-0x170d,_0x569225=this['effects']['length'];_0x5ebf25<_0x569225;_0x5ebf25++)this['effects'][_0x5ebf25]['inputTarge'+'t']['destroy']();this['effects']['length']=0xad5*-0x3+-0x205b+0x40da,this['disable']();}['enable'](){!this['enabled']&&this['effects']['length']&&(this['enabled']=!(-0x1aac+0x6dc*0x4+-0xc4),this['_requestDe'+'pthMaps'](),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['destinatio'+'nRenderTar'+'get']=this['camera']['renderTarg'+'et'],this['camera']['renderTarg'+'et']=this['effects'][-0x1a1a+-0x14e2+0x2efc]['inputTarge'+'t'],this['camera']['onPostproc'+'essing']=()=>{if(this['enabled']){let _0x5098c8=null;const _0x75ad41=this['effects']['length'];if(_0x75ad41)for(let _0x172432=0x1bce+-0x1*0x493+-0x173b;_0x172432<_0x75ad41;_0x172432++){const _0x168b4b=this['effects'][_0x172432];let _0x955191=_0x168b4b['outputTarg'+'et'];_0x172432===_0x75ad41-(-0x4*0x66f+-0x5ae+0x1f6b)&&(_0x5098c8=this['camera']['rect'],this['destinatio'+'nRenderTar'+'get']&&(_0x955191=this['destinatio'+'nRenderTar'+'get'])),Q['pushGpuMar'+'ker'](this['app']['graphicsDe'+'vice'],_0x168b4b['name']),_0x168b4b['effect']['render'](_0x168b4b['inputTarge'+'t'],_0x955191,_0x5098c8),Q['popGpuMark'+'er'](this['app']['graphicsDe'+'vice']);}}});}['disable'](){this['enabled']&&(this['enabled']=!(0xb85+-0x7e1+0x3a3*-0x1),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['_releaseDe'+'pthMaps'](),this['_destroyOf'+'fscreenTar'+'get'](this['_sourceTar'+'get']),this['camera']['renderTarg'+'et']=this['destinatio'+'nRenderTar'+'get'],this['camera']['onPostproc'+'essing']=null);}['_onCanvasR'+'esized'](_0x5001db,_0x3399df){const _0x46850e=this['camera']['rect'],_0x15abc1=this['destinatio'+'nRenderTar'+'get'];_0x5001db=(_0x15abc1==null?void(-0x14b3+0x1411+0xa2):_0x15abc1['width'])??_0x5001db,_0x3399df=(_0x15abc1==null?void(-0x2222+-0xa76*0x1+0x8*0x593):_0x15abc1['height'])??_0x3399df,this['camera']['camera']['aspectRati'+'o']=_0x5001db*_0x46850e['z']/(_0x3399df*_0x46850e['w']),this['resizeRend'+'erTargets']();}['resizeRend'+'erTargets'](){const _0x1871ac=this['app']['graphicsDe'+'vice'],_0x36ad27=this['destinatio'+'nRenderTar'+'get'],_0x987ca3=(_0x36ad27==null?void(0x1f*-0x139+0xe3*0x11+0x1*0x16d4):_0x36ad27['width'])??_0x1871ac['width'],_0x3117c8=(_0x36ad27==null?void(0x407*0x1+-0x3f*-0x49+-0x15fe):_0x36ad27['height'])??_0x1871ac['height'],_0x3bb292=this['camera']['rect'],_0x23718f=Math['floor'](_0x3bb292['z']*_0x987ca3),_0x584cb2=Math['floor'](_0x3bb292['w']*_0x3117c8),_0x359e3e=this['effects'];for(let _0x4bce2f=0x20e3*-0x1+-0x1093*-0x1+0x1050,_0x2247f6=_0x359e3e['length'];_0x4bce2f<_0x2247f6;_0x4bce2f++){const _0x343d23=_0x359e3e[_0x4bce2f];(_0x343d23['inputTarge'+'t']['width']!==_0x23718f||_0x343d23['inputTarge'+'t']['height']!==_0x584cb2)&&this['_resizeOff'+'screenTarg'+'et'](_0x343d23['inputTarge'+'t']);}}['onCameraRe'+'ctChanged'](_0x3ff718,_0x4f44e2,_0xef3f58){this['enabled']&&this['resizeRend'+'erTargets']();}}class Cr extends we{constructor(_0x35a68d,_0x5f48b4){super(_0x35a68d,_0x5f48b4),h(this,'onPostproc'+'essing',null),h(this,'_renderSce'+'neDepthMap',0x8d*0x3c+-0xb*-0xf9+-0x2bbf),h(this,'_renderSce'+'neColorMap',-0x1de0+0xb0d*-0x1+-0x1*-0x28ed),h(this,'_sceneDept'+'hMapReques'+'ted',!(-0x1cf4+-0x2531+0x2*0x2113)),h(this,'_sceneColo'+'rMapReques'+'ted',!(-0x108e+-0x1a7c+0x3*0xe59)),h(this,'_priority',0x762+-0x69b+-0x1*0xc7),h(this,'_disablePo'+'stEffectsL'+'ayer',Sl),h(this,'_camera',new Tl()),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_camera']['node']=_0x5f48b4,this['_postEffec'+'ts']=new kO(_0x35a68d['app'],this));}['setShaderP'+'ass'](_0x418bef){const _0x12506b=Si['get'](this['system']['app']['graphicsDe'+'vice']),_0x5c3d61=_0x418bef?_0x12506b['allocate'](_0x418bef,{'isForward':!(0x2*-0x1227+0x168a*-0x1+0x3ad8*0x1)}):null;return this['_camera']['shaderPass'+'Info']=_0x5c3d61,_0x5c3d61['index'];}['getShaderP'+'ass'](){var _0x559b5e;return(_0x559b5e=this['_camera']['shaderPass'+'Info'])==null?void(-0x5d9*-0x6+0x6*-0x269+-0x14a0):_0x559b5e['name'];}set['renderPass'+'es'](_0x4845fb){this['_camera']['renderPass'+'es']=_0x4845fb||[],this['dirtyLayer'+'Compositio'+'nCameras'](),this['system']['app']['scene']['updateShad'+'ers']=!(-0x1829+0x1*-0x15cf+-0x4*-0xb7e);}get['renderPass'+'es'](){return this['_camera']['renderPass'+'es'];}get['shaderPara'+'ms'](){return this['_camera']['shaderPara'+'ms'];}set['gammaCorre'+'ction'](_0x188e1c){this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=_0x188e1c;}get['gammaCorre'+'ction'](){return this['camera']['shaderPara'+'ms']['gammaCorre'+'ction'];}set['toneMappin'+'g'](_0x393d10){this['camera']['shaderPara'+'ms']['toneMappin'+'g']=_0x393d10;}get['toneMappin'+'g'](){return this['camera']['shaderPara'+'ms']['toneMappin'+'g'];}set['fog'](_0x1403b7){this['_camera']['fogParams']=_0x1403b7;}get['fog'](){return this['_camera']['fogParams'];}set['aperture'](_0x343a8b){this['_camera']['aperture']=_0x343a8b;}get['aperture'](){return this['_camera']['aperture'];}set['aspectRati'+'o'](_0x260717){this['_camera']['aspectRati'+'o']=_0x260717;}get['aspectRati'+'o'](){return this['_camera']['aspectRati'+'o'];}set['aspectRati'+'oMode'](_0xd8a14d){this['_camera']['aspectRati'+'oMode']=_0xd8a14d;}get['aspectRati'+'oMode'](){return this['_camera']['aspectRati'+'oMode'];}set['calculateP'+'rojection'](_0x1e593b){this['_camera']['calculateP'+'rojection']=_0x1e593b;}get['calculateP'+'rojection'](){return this['_camera']['calculateP'+'rojection'];}set['calculateT'+'ransform'](_0x40b274){this['_camera']['calculateT'+'ransform']=_0x40b274;}get['calculateT'+'ransform'](){return this['_camera']['calculateT'+'ransform'];}get['camera'](){return this['_camera'];}set['clearColor'](_0x321128){this['_camera']['clearColor']=_0x321128;}get['clearColor'](){return this['_camera']['clearColor'];}set['clearColor'+'Buffer'](_0x32b064){this['_camera']['clearColor'+'Buffer']=_0x32b064,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearColor'+'Buffer'](){return this['_camera']['clearColor'+'Buffer'];}set['clearDepth'+'Buffer'](_0x1b6797){this['_camera']['clearDepth'+'Buffer']=_0x1b6797,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearDepth'+'Buffer'](){return this['_camera']['clearDepth'+'Buffer'];}set['clearStenc'+'ilBuffer'](_0x23ad98){this['_camera']['clearStenc'+'ilBuffer']=_0x23ad98,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearStenc'+'ilBuffer'](){return this['_camera']['clearStenc'+'ilBuffer'];}set['cullFaces'](_0x20f82f){this['_camera']['cullFaces']=_0x20f82f;}get['cullFaces'](){return this['_camera']['cullFaces'];}set['disablePos'+'tEffectsLa'+'yer'](_0x17e77f){this['_disablePo'+'stEffectsL'+'ayer']=_0x17e77f,this['dirtyLayer'+'Compositio'+'nCameras']();}get['disablePos'+'tEffectsLa'+'yer'](){return this['_disablePo'+'stEffectsL'+'ayer'];}set['farClip'](_0x525576){this['_camera']['farClip']=_0x525576;}get['farClip'](){return this['_camera']['farClip'];}set['flipFaces'](_0x532eb3){this['_camera']['flipFaces']=_0x532eb3;}get['flipFaces'](){return this['_camera']['flipFaces'];}set['fov'](_0x338886){this['_camera']['fov']=_0x338886;}get['fov'](){return this['_camera']['fov'];}get['frustum'](){return this['_camera']['frustum'];}set['frustumCul'+'ling'](_0x4b4e0e){this['_camera']['frustumCul'+'ling']=_0x4b4e0e;}get['frustumCul'+'ling'](){return this['_camera']['frustumCul'+'ling'];}set['horizontal'+'Fov'](_0xda8b5f){this['_camera']['horizontal'+'Fov']=_0xda8b5f;}get['horizontal'+'Fov'](){return this['_camera']['horizontal'+'Fov'];}set['layers'](_0x10d731){const _0x51ff60=this['_camera']['layers'],_0x478649=this['system']['app']['scene'];_0x51ff60['forEach'](_0x4feebf=>{const _0x4002b4=_0x478649['layers']['getLayerBy'+'Id'](_0x4feebf);_0x4002b4==null||_0x4002b4['removeCame'+'ra'](this);}),this['_camera']['layers']=_0x10d731,this['enabled']&&this['entity']['enabled']&&_0x10d731['forEach'](_0x544cf6=>{const _0x5a12f9=_0x478649['layers']['getLayerBy'+'Id'](_0x544cf6);_0x5a12f9==null||_0x5a12f9['addCamera'](this);}),this['fire']('set:layers');}get['layers'](){return this['_camera']['layers'];}get['layersSet'](){return this['_camera']['layersSet'];}set['jitter'](_0x2f235d){this['_camera']['jitter']=_0x2f235d;}get['jitter'](){return this['_camera']['jitter'];}set['nearClip'](_0xef1b68){this['_camera']['nearClip']=_0xef1b68;}get['nearClip'](){return this['_camera']['nearClip'];}set['orthoHeigh'+'t'](_0x40c821){this['_camera']['orthoHeigh'+'t']=_0x40c821;}get['orthoHeigh'+'t'](){return this['_camera']['orthoHeigh'+'t'];}get['postEffect'+'s'](){return this['_postEffec'+'ts'];}get['postEffect'+'sEnabled'](){return this['_postEffec'+'ts']['enabled'];}set['priority'](_0xd4e73d){this['_priority']=_0xd4e73d,this['dirtyLayer'+'Compositio'+'nCameras']();}get['priority'](){return this['_priority'];}set['projection'](_0x408ec5){this['_camera']['projection']=_0x408ec5;}get['projection'](){return this['_camera']['projection'];}get['projection'+'Matrix'](){return this['_camera']['projection'+'Matrix'];}set['rect'](_0x3e531a){this['_camera']['rect']=_0x3e531a,this['fire']('set:rect',this['_camera']['rect']);}get['rect'](){return this['_camera']['rect'];}set['renderScen'+'eColorMap'](_0x8baed6){_0x8baed6&&!this['_sceneColo'+'rMapReques'+'ted']?(this['requestSce'+'neColorMap'](!(0x622+0x1b1*0x7+-0x11f9)),this['_sceneColo'+'rMapReques'+'ted']=!(-0x94*-0x4+-0x121*0x21+0x1*0x22f1)):this['_sceneColo'+'rMapReques'+'ted']&&(this['requestSce'+'neColorMap'](!(-0x655+0x186b+0x1*-0x1215)),this['_sceneColo'+'rMapReques'+'ted']=!(-0x2177+-0xe49+0x2fc1));}get['renderScen'+'eColorMap'](){return this['_renderSce'+'neColorMap']>0x1*0x12b7+-0x696*-0x4+-0x903*0x5;}set['renderScen'+'eDepthMap'](_0x503375){_0x503375&&!this['_sceneDept'+'hMapReques'+'ted']?(this['requestSce'+'neDepthMap'](!(0x2556+0x1d3e+0x10a5*-0x4)),this['_sceneDept'+'hMapReques'+'ted']=!(0x2*0xbf8+-0x1a*-0xf7+-0x32*0xfb)):this['_sceneDept'+'hMapReques'+'ted']&&(this['requestSce'+'neDepthMap'](!(-0x98c+0x4cf+0x4be)),this['_sceneDept'+'hMapReques'+'ted']=!(-0xb*-0x6e+-0x805+0x34c));}get['renderScen'+'eDepthMap'](){return this['_renderSce'+'neDepthMap']>-0x2c9+-0x2df+-0x8*-0xb5;}set['renderTarg'+'et'](_0x11f2c4){w['call'](()=>{this['_camera']['renderPass'+'es']['length']>0xf82+0x2*0xe6d+-0x2c5c&&w['warn']('Setting\x20a\x20'+'render\x20tar'+'get\x20on\x20the'+'\x20camera\x20'+this['entity']['name']+('\x20after\x20the'+'\x20render\x20pa'+'sses\x20is\x20no'+'t\x20supporte'+'d,\x20set\x20it\x20'+'up\x20first.'));}),this['_camera']['renderTarg'+'et']=_0x11f2c4,this['dirtyLayer'+'Compositio'+'nCameras']();}get['renderTarg'+'et'](){return this['_camera']['renderTarg'+'et'];}set['scissorRec'+'t'](_0x29f252){this['_camera']['scissorRec'+'t']=_0x29f252;}get['scissorRec'+'t'](){return this['_camera']['scissorRec'+'t'];}set['sensitivit'+'y'](_0x4071b5){this['_camera']['sensitivit'+'y']=_0x4071b5;}get['sensitivit'+'y'](){return this['_camera']['sensitivit'+'y'];}set['shutter'](_0x4d1dc4){this['_camera']['shutter']=_0x4d1dc4;}get['shutter'](){return this['_camera']['shutter'];}get['viewMatrix'](){return this['_camera']['viewMatrix'];}['_enableDep'+'thLayer'](_0x418bf5){if(this['layers']['find'](_0x47ef69=>_0x47ef69===ps)){const _0x5eeca9=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x418bf5?_0x5eeca9==null||_0x5eeca9['incrementC'+'ounter']():_0x5eeca9==null||_0x5eeca9['decrementC'+'ounter']();}else{if(_0x418bf5)return!(-0xc63+-0x139f+0x37*0x95);}return!(-0xc17+0xc5f*0x2+-0xca7);}['requestSce'+'neColorMap'](_0xf902e5){this['_renderSce'+'neColorMap']+=_0xf902e5?0x10*0x10a+-0x464*0x3+-0x1*0x373:-(-0x3*-0x82f+0x1e02+-0x368e),w['assert'](this['_renderSce'+'neColorMap']>=0x531+0xc6c+0x119d*-0x1),this['_enableDep'+'thLayer'](_0xf902e5)||w['warnOnce']('CameraComp'+'onent.requ'+'estSceneCo'+'lorMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassCol'+'orGrab'](this['system']['app']['graphicsDe'+'vice'],this['renderScen'+'eColorMap']),this['system']['app']['scene']['layers']['markDirty']();}['requestSce'+'neDepthMap'](_0x1c14bd){this['_renderSce'+'neDepthMap']+=_0x1c14bd?-0xa6f*0x2+0x411*0x3+0x8ac:-(0x875+-0x6ea+-0x1*0x18a),w['assert'](this['_renderSce'+'neDepthMap']>=-0x95*0x1d+0xbf3+0x4ee),this['_enableDep'+'thLayer'](_0x1c14bd)||w['warnOnce']('CameraComp'+'onent.requ'+'estSceneDe'+'pthMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassDep'+'thGrab'](this['system']['app']['graphicsDe'+'vice'],this['system']['app']['renderer'],this['renderScen'+'eDepthMap']),this['system']['app']['scene']['layers']['markDirty']();}['dirtyLayer'+'Compositio'+'nCameras'](){const _0x3076ce=this['system']['app']['scene']['layers'];_0x3076ce['_dirty']=!(-0xc8*0x25+0x261d+-0x935);}['screenToWo'+'rld'](_0x28a355,_0x4cef7c,_0x5aa8e5,_0x388a8b){const _0x407f75=this['system']['app']['graphicsDe'+'vice'],{width:_0x2a083e,height:_0x25c9aa}=_0x407f75['clientRect'];return this['_camera']['screenToWo'+'rld'](_0x28a355,_0x4cef7c,_0x5aa8e5,_0x2a083e,_0x25c9aa,_0x388a8b);}['worldToScr'+'een'](_0x2d8869,_0x374add){const _0x3cf75e=this['system']['app']['graphicsDe'+'vice'],{width:_0x20270a,height:_0xffbea0}=_0x3cf75e['clientRect'];return this['_camera']['worldToScr'+'een'](_0x2d8869,_0x20270a,_0xffbea0,_0x374add);}['onAppPrere'+'nder'](){this['_camera']['_viewMatDi'+'rty']=!(0x2*0x38a+-0xa86+-0x3f*-0xe),this['_camera']['_viewProjM'+'atDirty']=!(-0x1*-0x1dcf+-0x1*-0x222d+-0x3ffc);}['addCameraT'+'oLayers'](){const _0x22d6af=this['layers'];for(let _0x25f1ef=0x900+-0x209a+0x179a;_0x25f1ef<_0x22d6af['length'];_0x25f1ef++){const _0x27f981=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x22d6af[_0x25f1ef]);_0x27f981&&_0x27f981['addCamera'](this);}}['removeCame'+'raFromLaye'+'rs'](){const _0x282618=this['layers'];for(let _0x265a2e=-0x1154+0x1316+-0x1c2;_0x265a2e<_0x282618['length'];_0x265a2e++){const _0x4d1ac9=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x282618[_0x265a2e]);_0x4d1ac9&&_0x4d1ac9['removeCame'+'ra'](this);}}['onLayersCh'+'anged'](_0x5d46c1,_0x1fdea8){this['addCameraT'+'oLayers'](),_0x5d46c1['off']('add',this['onLayerAdd'+'ed'],this),_0x5d46c1['off']('remove',this['onLayerRem'+'oved'],this),_0x1fdea8['on']('add',this['onLayerAdd'+'ed'],this),_0x1fdea8['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x352b85){this['layers']['indexOf'](_0x352b85['id'])<0xc*0x101+-0x74a+-0x4c2||_0x352b85['addCamera'](this);}['onLayerRem'+'oved'](_0x27d392){this['layers']['indexOf'](_0x27d392['id'])<0x1*-0xcd+-0x1d*-0x59+-0x948||_0x27d392['removeCame'+'ra'](this);}['onEnable'](){var _0x13f574,_0x12ed95,_0x3e98f3;const _0x1ac77e=this['system']['app']['scene'],_0x5a09d0=_0x1ac77e['layers'];this['system']['addCamera'](this),(_0x13f574=this['_evtLayers'+'Changed'])==null||_0x13f574['off'](),this['_evtLayers'+'Changed']=_0x1ac77e['on']('set:layers',this['onLayersCh'+'anged'],this),_0x5a09d0&&((_0x12ed95=this['_evtLayerA'+'dded'])==null||_0x12ed95['off'](),this['_evtLayerA'+'dded']=_0x5a09d0['on']('add',this['onLayerAdd'+'ed'],this),(_0x3e98f3=this['_evtLayerR'+'emoved'])==null||_0x3e98f3['off'](),this['_evtLayerR'+'emoved']=_0x5a09d0['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addCameraT'+'oLayers'](),this['postEffect'+'s']['enable']();}['onDisable'](){var _0x37f65c,_0x59fd2d,_0x2b7a7d;const _0x4e3c2a=this['system']['app']['scene']['layers'];this['postEffect'+'s']['disable'](),this['removeCame'+'raFromLaye'+'rs'](),(_0x37f65c=this['_evtLayers'+'Changed'])==null||_0x37f65c['off'](),this['_evtLayers'+'Changed']=null,_0x4e3c2a&&((_0x59fd2d=this['_evtLayerA'+'dded'])==null||_0x59fd2d['off'](),this['_evtLayerA'+'dded']=null,(_0x2b7a7d=this['_evtLayerR'+'emoved'])==null||_0x2b7a7d['off'](),this['_evtLayerR'+'emoved']=null),this['system']['removeCame'+'ra'](this);}['onRemove'](){this['onDisable'](),this['off'](),this['camera']['destroy']();}['calculateA'+'spectRatio'](_0x3a910b){const _0x49b6c0=this['system']['app']['graphicsDe'+'vice'],_0x4c4284=_0x3a910b?_0x3a910b['width']:_0x49b6c0['width'],_0x109a52=_0x3a910b?_0x3a910b['height']:_0x49b6c0['height'];return _0x4c4284*this['rect']['z']/(_0x109a52*this['rect']['w']);}['frameUpdat'+'e'](_0x4f31c4){this['aspectRati'+'oMode']===kp&&(this['aspectRati'+'o']=this['calculateA'+'spectRatio'](_0x4f31c4));}['startXr'](_0xfd811c,_0x4ef34a,_0x269606){this['system']['app']['xr']['start'](this,_0xfd811c,_0x4ef34a,_0x269606);}['endXr'](_0x1e6e11){if(!this['_camera']['xr']){_0x1e6e11&&_0x1e6e11(new Error('Camera\x20is\x20'+'not\x20in\x20XR'));return;}this['_camera']['xr']['end'](_0x1e6e11);}['copy'](_0x42c8ad){this['aperture']=_0x42c8ad['aperture'],this['aspectRati'+'o']=_0x42c8ad['aspectRati'+'o'],this['aspectRati'+'oMode']=_0x42c8ad['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x42c8ad['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x42c8ad['calculateT'+'ransform'],this['clearColor']=_0x42c8ad['clearColor'],this['clearColor'+'Buffer']=_0x42c8ad['clearColor'+'Buffer'],this['clearDepth'+'Buffer']=_0x42c8ad['clearDepth'+'Buffer'],this['clearStenc'+'ilBuffer']=_0x42c8ad['clearStenc'+'ilBuffer'],this['cullFaces']=_0x42c8ad['cullFaces'],this['disablePos'+'tEffectsLa'+'yer']=_0x42c8ad['disablePos'+'tEffectsLa'+'yer'],this['farClip']=_0x42c8ad['farClip'],this['flipFaces']=_0x42c8ad['flipFaces'],this['fov']=_0x42c8ad['fov'],this['frustumCul'+'ling']=_0x42c8ad['frustumCul'+'ling'],this['horizontal'+'Fov']=_0x42c8ad['horizontal'+'Fov'],this['layers']=_0x42c8ad['layers'],this['nearClip']=_0x42c8ad['nearClip'],this['orthoHeigh'+'t']=_0x42c8ad['orthoHeigh'+'t'],this['priority']=_0x42c8ad['priority'],this['projection']=_0x42c8ad['projection'],this['rect']=_0x42c8ad['rect'],this['renderTarg'+'et']=_0x42c8ad['renderTarg'+'et'],this['scissorRec'+'t']=_0x42c8ad['scissorRec'+'t'],this['sensitivit'+'y']=_0x42c8ad['sensitivit'+'y'],this['shutter']=_0x42c8ad['shutter'];}}class UO{constructor(){this['enabled']=!(-0x459+0x7*0x41+-0x1*-0x292);}}const Lv=['enabled'];class BO extends ct{constructor(_0x2fdd87){super(_0x2fdd87),h(this,'cameras',[]),(this['id']='camera',this['ComponentT'+'ype']=Cr,this['DataType']=UO,this['schema']=Lv,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['on']('prerender',this['onAppPrere'+'nder'],this));}['initialize'+'ComponentD'+'ata'](_0x39e90a,_0x4ca2a0,_0x3ee5c9){_0x3ee5c9=['aspectRati'+'o','aspectRati'+'oMode','calculateP'+'rojection','calculateT'+'ransform','clearColor','clearColor'+'Buffer','clearDepth'+'Buffer','clearStenc'+'ilBuffer','renderScen'+'eColorMap','renderScen'+'eDepthMap','cullFaces','farClip','flipFaces','fog','fov','frustumCul'+'ling','horizontal'+'Fov','layers','renderTarg'+'et','nearClip','orthoHeigh'+'t','projection','priority','rect','scissorRec'+'t','aperture','shutter','sensitivit'+'y','gammaCorre'+'ction','toneMappin'+'g'];for(let _0x3bc07a=-0xc98+0x1*-0xa47+0x16df;_0x3bc07a<_0x3ee5c9['length'];_0x3bc07a++){const _0x9bed86=_0x3ee5c9[_0x3bc07a];if(_0x4ca2a0['hasOwnProp'+'erty'](_0x9bed86)){const _0x4e3993=_0x4ca2a0[_0x9bed86];switch(_0x9bed86){case'rect':case'scissorRec'+'t':Array['isArray'](_0x4e3993)?_0x39e90a[_0x9bed86]=new re(_0x4e3993[0x53*-0x72+-0x72*0x41+0x41e8],_0x4e3993[-0x3*-0x7c3+-0x11af+-0x599],_0x4e3993[-0xb24+-0x19*-0x131+-0xd*0x16f],_0x4e3993[0x1934+0x2cc*-0x4+0x3*-0x4ab]):_0x39e90a[_0x9bed86]=_0x4e3993;break;case'clearColor':Array['isArray'](_0x4e3993)?_0x39e90a[_0x9bed86]=new ie(_0x4e3993[-0x20c3*0x1+-0x8*-0x469+-0x81*0x5],_0x4e3993[0x1002*-0x2+-0xc2b+0x65*0x70],_0x4e3993[-0xfa7*0x1+-0x292*-0xb+-0xc9d],_0x4e3993[0x132d*0x1+-0x3*0x43+0x3ad*-0x5]):_0x39e90a[_0x9bed86]=_0x4e3993;break;default:_0x39e90a[_0x9bed86]=_0x4e3993;break;}}}super['initialize'+'ComponentD'+'ata'](_0x39e90a,_0x4ca2a0,['enabled']);}['cloneCompo'+'nent'](_0x500f1e,_0x3d965f){const _0x376d97=_0x500f1e['camera'];return this['addCompone'+'nt'](_0x3d965f,{'aspectRatio':_0x376d97['aspectRati'+'o'],'aspectRatioMode':_0x376d97['aspectRati'+'oMode'],'calculateProjection':_0x376d97['calculateP'+'rojection'],'calculateTransform':_0x376d97['calculateT'+'ransform'],'clearColor':_0x376d97['clearColor'],'clearColorBuffer':_0x376d97['clearColor'+'Buffer'],'clearDepthBuffer':_0x376d97['clearDepth'+'Buffer'],'clearStencilBuffer':_0x376d97['clearStenc'+'ilBuffer'],'renderSceneDepthMap':_0x376d97['renderScen'+'eDepthMap'],'renderSceneColorMap':_0x376d97['renderScen'+'eColorMap'],'cullFaces':_0x376d97['cullFaces'],'enabled':_0x376d97['enabled'],'farClip':_0x376d97['farClip'],'flipFaces':_0x376d97['flipFaces'],'fov':_0x376d97['fov'],'frustumCulling':_0x376d97['frustumCul'+'ling'],'horizontalFov':_0x376d97['horizontal'+'Fov'],'layers':_0x376d97['layers'],'renderTarget':_0x376d97['renderTarg'+'et'],'nearClip':_0x376d97['nearClip'],'orthoHeight':_0x376d97['orthoHeigh'+'t'],'projection':_0x376d97['projection'],'priority':_0x376d97['priority'],'rect':_0x376d97['rect'],'scissorRect':_0x376d97['scissorRec'+'t'],'aperture':_0x376d97['aperture'],'sensitivity':_0x376d97['sensitivit'+'y'],'shutter':_0x376d97['shutter'],'gammaCorrection':_0x376d97['gammaCorre'+'ction'],'toneMapping':_0x376d97['toneMappin'+'g']});}['onBeforeRe'+'move'](_0x547054,_0x4b5e6a){this['removeCame'+'ra'](_0x4b5e6a),_0x4b5e6a['onRemove']();}['onAppPrere'+'nder'](){for(let _0x155618=-0x2*-0x8f9+-0x1*-0x1cc9+-0x7*0x6ad,_0x102636=this['cameras']['length'];_0x155618<_0x102636;_0x155618++)this['cameras'][_0x155618]['onAppPrere'+'nder']();}['addCamera'](_0x2b667e){this['cameras']['push'](_0x2b667e),el(this['cameras']);}['removeCame'+'ra'](_0xfdbe6){const _0x451478=this['cameras']['indexOf'](_0xfdbe6);_0x451478>=0x117a*0x2+-0x1*0x230d+0x1*0x19&&(this['cameras']['splice'](_0x451478,0x3a8+-0x19df+-0x3b4*-0x6),el(this['cameras']));}['destroy'](){this['app']['off']('prerender',this['onAppPrere'+'nder'],this),super['destroy']();}}we['_buildAcce'+'ssors'](Cr['prototype'],Lv);class Rv{constructor(){h(this,'enabled',!(-0xfca+0x35*-0x8b+0x3*0xedb)),h(this,'light'),h(this,'type','directiona'+'l'),h(this,'color',new ie(0x23b*0x3+-0x1bff+-0x5*-0x443,-0x112d+0x2*-0x10f5+0x3*0x1108,0x5e1*-0x1+0x21*0x3b+-0x7*0x3f)),h(this,'intensity',0xede+0x270c+-0x35e9),h(this,'luminance',-0xc73*-0x2+-0x1afa*-0x1+-0x33e0),h(this,'shape',js),h(this,'affectSpec'+'ularity',!(0x14f*-0x1d+0x1ff7+0x5fc)),h(this,'castShadow'+'s',!(-0x26c3*-0x1+0xee7*0x2+-0x4*0x1124)),h(this,'shadowDist'+'ance',0x1*-0x1b4f+0xe57*0x1+0xd20),h(this,'shadowInte'+'nsity',-0x3*0xc03+0x1057+0x13b3),h(this,'shadowReso'+'lution',-0x2*-0x46e+0xdd*-0x11+0x9d1),h(this,'shadowBias',0xcf+-0xb6f+-0xa*-0x110+0.05),h(this,'numCascade'+'s',0x135+0x5*0x3d2+-0x144e),h(this,'cascadeBle'+'nd',0x10c3+0x11*0x86+0x19a9*-0x1),h(this,'bakeNumSam'+'ples',-0x986*-0x1+-0x15bb*-0x1+0xc8*-0x28),h(this,'bakeArea',0x247a+-0x1ca9+-0x7d1),h(this,'cascadeDis'+'tribution',0xa5*-0xd+-0x10bf+0x1920+0.5),h(this,'normalOffs'+'etBias',-0x182e+-0xad*0xe+0x21a4),h(this,'range',0x2*-0x7f6+0x18ef+-0x8f9),h(this,'innerConeA'+'ngle',-0x25d6+-0x679+0x1*0x2c77),h(this,'outerConeA'+'ngle',0x106d+-0x15d*0x17+0xf1b),h(this,'falloffMod'+'e',bp),h(this,'shadowType',Ws),h(this,'vsmBlurSiz'+'e',0x95*0x25+-0x5*-0x1e2+0x3dd*-0x8),h(this,'vsmBlurMod'+'e',Cp),h(this,'vsmBias',(-0x16*-0xa1+-0xf*-0x1f+-0xfa7+0.01)*(-0xa39+0x1f62+-0x1529+0.25)),h(this,'cookieAsse'+'t',null),h(this,'cookie',null),h(this,'cookieInte'+'nsity',0x11c3*0x2+0xe*0x17f+-0x3877),h(this,'cookieFall'+'off',!(-0xa17+-0x143*0x1b+0x75c*0x6)),h(this,'cookieChan'+'nel','rgb'),h(this,'cookieAngl'+'e',0x1*-0x704+-0xd0d+0x1411),h(this,'cookieScal'+'e',null),h(this,'cookieOffs'+'et',null),h(this,'shadowUpda'+'teMode',Fp),h(this,'mask',0x25d6+-0xc51*-0x1+-0x31*0x106),h(this,'affectDyna'+'mic',!(-0x2b9*0x7+-0x16f7*0x1+0x16*0x1e9)),h(this,'affectLigh'+'tmapped',!(-0x1aae+0x256f+-0xac0)),h(this,'bake',!(0x9e6*-0x1+-0xb5c+0x1543)),h(this,'bakeDir',!(-0x5e1+-0x1543*0x1+0x3*0x90c)),h(this,'isStatic',!(-0x20f6*-0x1+0x8*-0x11d+-0x180d)),h(this,'layers',[Ji]),h(this,'penumbraSi'+'ze',0x1a3e+0x40b*0x1+0x143*-0x18),h(this,'penumbraFa'+'lloff',-0x2365+0x25cd+-0x267),h(this,'shadowSamp'+'les',0x1941+-0x34*0xb+-0x16f5),h(this,'shadowBloc'+'kerSamples',-0x2*-0x83f+-0x150c+0x3*0x18a);}}const Io=Object['keys'](new Rv());class zO extends we{constructor(){super(...arguments),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_cookieAss'+'et',null),h(this,'_cookieAss'+'etId',null),h(this,'_cookieAss'+'etAdd',!(-0x253e+0x1e69+-0xe*-0x7d)),h(this,'_cookieMat'+'rix',null);}get['data'](){const _0x264cc6=this['system']['store'][this['entity']['getGuid']()];return _0x264cc6?_0x264cc6['data']:null;}set['enabled'](_0x5509e9){this['_setValue']('enabled',_0x5509e9,function(_0x4cb972,_0x4a4126){this['onSetEnabl'+'ed'](null,_0x4a4126,_0x4cb972);});}get['enabled'](){return this['data']['enabled'];}set['light'](_0x160078){this['_setValue']('light',_0x160078);}get['light'](){return this['data']['light'];}set['type'](_0x2e7559){this['_setValue']('type',_0x2e7559,function(_0x1cfedc,_0x4bce7a){this['system']['changeType'](this,_0x4bce7a,_0x1cfedc),this['refreshPro'+'perties']();});}get['type'](){return this['data']['type'];}set['color'](_0x410c86){this['_setValue']('color',_0x410c86,function(_0x563168,_0xb7b9a5){this['light']['setColor'](_0x563168);},!(0x346*0x5+0x2169*0x1+0x1*-0x31c7));}get['color'](){return this['data']['color'];}set['intensity'](_0x11398d){this['_setValue']('intensity',_0x11398d,function(_0x553a2a,_0x35051d){this['light']['intensity']=_0x553a2a;});}get['intensity'](){return this['data']['intensity'];}set['luminance'](_0x6b9ea6){this['_setValue']('luminance',_0x6b9ea6,function(_0x1aaf38,_0x5c5b8f){this['light']['luminance']=_0x1aaf38;});}get['luminance'](){return this['data']['luminance'];}set['shape'](_0x339d9b){this['_setValue']('shape',_0x339d9b,function(_0x35a4c0,_0x2e5b2f){this['light']['shape']=_0x35a4c0;});}get['shape'](){return this['data']['shape'];}set['affectSpec'+'ularity'](_0x43b688){this['_setValue']('affectSpec'+'ularity',_0x43b688,function(_0xa5e52,_0x1785ca){this['light']['affectSpec'+'ularity']=_0xa5e52;});}get['affectSpec'+'ularity'](){return this['data']['affectSpec'+'ularity'];}set['castShadow'+'s'](_0x4c128c){this['_setValue']('castShadow'+'s',_0x4c128c,function(_0x3d6b4a,_0x3ec42d){this['light']['castShadow'+'s']=_0x3d6b4a;});}get['castShadow'+'s'](){return this['data']['castShadow'+'s'];}set['shadowDist'+'ance'](_0x134250){this['_setValue']('shadowDist'+'ance',_0x134250,function(_0x28b1d2,_0x36fd86){this['light']['shadowDist'+'ance']=_0x28b1d2;});}get['shadowDist'+'ance'](){return this['data']['shadowDist'+'ance'];}set['shadowInte'+'nsity'](_0x2f23d9){this['_setValue']('shadowInte'+'nsity',_0x2f23d9,function(_0xc2af60,_0x1d15c5){this['light']['shadowInte'+'nsity']=_0xc2af60;});}get['shadowInte'+'nsity'](){return this['data']['shadowInte'+'nsity'];}set['shadowReso'+'lution'](_0x3cc489){this['_setValue']('shadowReso'+'lution',_0x3cc489,function(_0xc33dca,_0x3953ef){this['light']['shadowReso'+'lution']=_0xc33dca;});}get['shadowReso'+'lution'](){return this['data']['shadowReso'+'lution'];}set['shadowBias'](_0x29adc4){this['_setValue']('shadowBias',_0x29adc4,function(_0x250837,_0x1a361a){this['light']['shadowBias']=-(-0x1a22+0x560+0x14c2+0.01)*Y['clamp'](_0x250837,-0x1*-0x6aa+0x9*0x446+0xb48*-0x4,-0x2189+0x842+0x1948);});}get['shadowBias'](){return this['data']['shadowBias'];}set['numCascade'+'s'](_0x2c86c8){this['_setValue']('numCascade'+'s',_0x2c86c8,function(_0x4508c4,_0x264b39){this['light']['numCascade'+'s']=Y['clamp'](Math['floor'](_0x4508c4),-0x2687+-0xb58+0x31e0,-0x15a*-0x4+-0x264b+0x20e7);});}get['numCascade'+'s'](){return this['data']['numCascade'+'s'];}set['cascadeBle'+'nd'](_0x3c0cc6){this['_setValue']('cascadeBle'+'nd',_0x3c0cc6,function(_0x46ffe0,_0x57ca0e){this['light']['cascadeBle'+'nd']=Y['clamp'](_0x46ffe0,0x4a1*0x2+-0x1*0x54d+-0x3f5,-0x99a+-0x14*-0x1d9+-0x1b59);});}get['cascadeBle'+'nd'](){return this['data']['cascadeBle'+'nd'];}set['bakeNumSam'+'ples'](_0x217000){this['_setValue']('bakeNumSam'+'ples',_0x217000,function(_0xa85273,_0x454a85){this['light']['bakeNumSam'+'ples']=Y['clamp'](Math['floor'](_0xa85273),0x2*0xecb+0x131d+-0x30b2,0x6b0*-0x2+0x488*0x4+-0x3c1);});}get['bakeNumSam'+'ples'](){return this['data']['bakeNumSam'+'ples'];}set['bakeArea'](_0x5d96b9){this['_setValue']('bakeArea',_0x5d96b9,function(_0x1ebca1,_0x48c215){this['light']['bakeArea']=Y['clamp'](_0x1ebca1,0x24a+-0x1a02+0x21*0xb8,0x15c6+-0xfa7+0x13*-0x49);});}get['bakeArea'](){return this['data']['bakeArea'];}set['cascadeDis'+'tribution'](_0x46409e){this['_setValue']('cascadeDis'+'tribution',_0x46409e,function(_0x527fcb,_0x32aeae){this['light']['cascadeDis'+'tribution']=Y['clamp'](_0x527fcb,-0x3*0x3b9+-0x124c*0x2+-0x1*-0x2fc3,-0x2e0*-0xb+0x2261*-0x1+-0x2c2*-0x1);});}get['cascadeDis'+'tribution'](){return this['data']['cascadeDis'+'tribution'];}set['normalOffs'+'etBias'](_0x4c6ef6){this['_setValue']('normalOffs'+'etBias',_0x4c6ef6,function(_0x29345a,_0x285b56){this['light']['normalOffs'+'etBias']=Y['clamp'](_0x29345a,-0x1c0d+0x119b+0xa72,0x104b+0xe5c+-0x1ea6);});}get['normalOffs'+'etBias'](){return this['data']['normalOffs'+'etBias'];}set['range'](_0x58e794){this['_setValue']('range',_0x58e794,function(_0x13d1cd,_0x4f00c2){this['light']['attenuatio'+'nEnd']=_0x13d1cd;});}get['range'](){return this['data']['range'];}set['innerConeA'+'ngle'](_0x3fbd2b){this['_setValue']('innerConeA'+'ngle',_0x3fbd2b,function(_0x9e7168,_0x5b8736){this['light']['innerConeA'+'ngle']=_0x9e7168;});}get['innerConeA'+'ngle'](){return this['data']['innerConeA'+'ngle'];}set['outerConeA'+'ngle'](_0x507d6a){this['_setValue']('outerConeA'+'ngle',_0x507d6a,function(_0x5caa19,_0xaf7cfe){this['light']['outerConeA'+'ngle']=_0x5caa19;});}get['outerConeA'+'ngle'](){return this['data']['outerConeA'+'ngle'];}set['falloffMod'+'e'](_0x2de740){this['_setValue']('falloffMod'+'e',_0x2de740,function(_0x23207d,_0x47b0f2){this['light']['falloffMod'+'e']=_0x23207d;});}get['falloffMod'+'e'](){return this['data']['falloffMod'+'e'];}set['shadowType'](_0x7fe53d){this['_setValue']('shadowType',_0x7fe53d,function(_0x52c04e,_0x362aec){this['light']['shadowType']=_0x52c04e;});}get['shadowType'](){return this['data']['shadowType'];}set['vsmBlurSiz'+'e'](_0x4c851d){this['_setValue']('vsmBlurSiz'+'e',_0x4c851d,function(_0x39395d,_0x1c7250){this['light']['vsmBlurSiz'+'e']=_0x39395d;});}get['vsmBlurSiz'+'e'](){return this['data']['vsmBlurSiz'+'e'];}set['vsmBlurMod'+'e'](_0x3b8806){this['_setValue']('vsmBlurMod'+'e',_0x3b8806,function(_0x5c8b45,_0x11cbec){this['light']['vsmBlurMod'+'e']=_0x5c8b45;});}get['vsmBlurMod'+'e'](){return this['data']['vsmBlurMod'+'e'];}set['vsmBias'](_0x1b7041){this['_setValue']('vsmBias',_0x1b7041,function(_0x2a8395,_0x13bd2d){this['light']['vsmBias']=Y['clamp'](_0x2a8395,-0x7*0x2fe+0x18c*-0x15+0x356e,0x146c+0x1c5a+-0x30c5);});}get['vsmBias'](){return this['data']['vsmBias'];}set['cookieAsse'+'t'](_0x5a6770){this['_setValue']('cookieAsse'+'t',_0x5a6770,function(_0x5aab38,_0x39f14e){if(!(this['_cookieAss'+'etId']&&(_0x5aab38 instanceof pe&&_0x5aab38['id']===this['_cookieAss'+'etId']||_0x5aab38===this['_cookieAss'+'etId']))){if(this['onCookieAs'+'setRemove'](),this['_cookieAss'+'etId']=null,_0x5aab38 instanceof pe)this['data']['cookieAsse'+'t']=_0x5aab38['id'],this['_cookieAss'+'etId']=_0x5aab38['id'],this['onCookieAs'+'setAdd'](_0x5aab38);else{if(typeof _0x5aab38=='number'){this['_cookieAss'+'etId']=_0x5aab38;const _0x15df58=this['system']['app']['assets']['get'](_0x5aab38);_0x15df58?this['onCookieAs'+'setAdd'](_0x15df58):(this['_cookieAss'+'etAdd']=!(0x6ae+0xec8+-0x1576*0x1),this['system']['app']['assets']['on']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this));}}}});}get['cookieAsse'+'t'](){return this['data']['cookieAsse'+'t'];}set['cookie'](_0x41b24f){this['_setValue']('cookie',_0x41b24f,function(_0x281c9c,_0x4e1633){this['light']['cookie']=_0x281c9c;});}get['cookie'](){return this['data']['cookie'];}set['cookieInte'+'nsity'](_0x2c243d){this['_setValue']('cookieInte'+'nsity',_0x2c243d,function(_0x25edbe,_0x3620eb){this['light']['cookieInte'+'nsity']=Y['clamp'](_0x25edbe,-0x202d+-0x19ac+0x39d9,-0x5*0x83+-0x54*-0xf+-0x25c);});}get['cookieInte'+'nsity'](){return this['data']['cookieInte'+'nsity'];}set['cookieFall'+'off'](_0x505ff1){this['_setValue']('cookieFall'+'off',_0x505ff1,function(_0xf9ed0e,_0x21b1d3){this['light']['cookieFall'+'off']=_0xf9ed0e;});}get['cookieFall'+'off'](){return this['data']['cookieFall'+'off'];}set['cookieChan'+'nel'](_0x3adc12){this['_setValue']('cookieChan'+'nel',_0x3adc12,function(_0x33ff1b,_0x89d6eb){this['light']['cookieChan'+'nel']=_0x33ff1b;});}get['cookieChan'+'nel'](){return this['data']['cookieChan'+'nel'];}set['cookieAngl'+'e'](_0x403a01){this['_setValue']('cookieAngl'+'e',_0x403a01,function(_0x52af18,_0x2944ac){if(_0x52af18!==0xb42+-0x2262+-0x10*-0x172||this['cookieScal'+'e']!==null){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new re());let _0x391748=0x525+0x2337+-0x285b,_0x216a31=0xac6+0x139*0x1f+-0x2*0x1856;this['cookieScal'+'e']&&(_0x391748=this['cookieScal'+'e']['x'],_0x216a31=this['cookieScal'+'e']['y']);const _0x31210e=Math['cos'](_0x52af18*Y['DEG_TO_RAD']),_0x36ccb5=Math['sin'](_0x52af18*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x31210e/_0x391748,-_0x36ccb5/_0x391748,_0x36ccb5/_0x216a31,_0x31210e/_0x216a31),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;});}get['cookieAngl'+'e'](){return this['data']['cookieAngl'+'e'];}set['cookieScal'+'e'](_0x5a0167){this['_setValue']('cookieScal'+'e',_0x5a0167,function(_0x557346,_0x51d52a){if(_0x557346!==null||this['cookieAngl'+'e']!==-0x1643+-0x2*-0x18a+0x132f){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new re());const _0x4f71eb=_0x557346['x'],_0x351bfd=_0x557346['y'],_0x47cfb5=Math['cos'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']),_0x117641=Math['sin'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x47cfb5/_0x4f71eb,-_0x117641/_0x4f71eb,_0x117641/_0x351bfd,_0x47cfb5/_0x351bfd),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;},!(0x19*-0xeb+0x4f1+0x1202));}get['cookieScal'+'e'](){return this['data']['cookieScal'+'e'];}set['cookieOffs'+'et'](_0x38c8b3){this['_setValue']('cookieOffs'+'et',_0x38c8b3,function(_0x3424d4,_0x4ab6b3){this['light']['cookieOffs'+'et']=_0x3424d4;},!(0x209d*0x1+0x2637+0x179c*-0x3));}get['cookieOffs'+'et'](){return this['data']['cookieOffs'+'et'];}set['shadowUpda'+'teMode'](_0x1d3817){this['_setValue']('shadowUpda'+'teMode',_0x1d3817,function(_0x325270,_0x4cdad9){this['light']['shadowUpda'+'teMode']=_0x325270;},!(-0x3ea+-0x1*-0x977+0x58d*-0x1));}get['shadowUpda'+'teMode'](){return this['data']['shadowUpda'+'teMode'];}set['mask'](_0x2faa06){this['_setValue']('mask',_0x2faa06,function(_0x4fe9ed,_0x55d350){this['light']['mask']=_0x4fe9ed;});}get['mask'](){return this['data']['mask'];}set['affectDyna'+'mic'](_0x1366f3){this['_setValue']('affectDyna'+'mic',_0x1366f3,function(_0x2bca85,_0x44a54b){_0x2bca85?this['light']['mask']|=Ss:this['light']['mask']&=~Ss,this['light']['layersDirt'+'y']();});}get['affectDyna'+'mic'](){return this['data']['affectDyna'+'mic'];}set['affectLigh'+'tmapped'](_0x65f6a1){this['_setValue']('affectLigh'+'tmapped',_0x65f6a1,function(_0x5716da,_0x1d0163){_0x5716da?(this['light']['mask']|=di,this['bake']&&(this['light']['mask']&=~fi)):(this['light']['mask']&=~di,this['bake']&&(this['light']['mask']|=fi));});}get['affectLigh'+'tmapped'](){return this['data']['affectLigh'+'tmapped'];}set['bake'](_0x5574b9){this['_setValue']('bake',_0x5574b9,function(_0x3310fc,_0x3e3403){_0x3310fc?(this['light']['mask']|=fi,this['affectLigh'+'tmapped']&&(this['light']['mask']&=~di)):(this['light']['mask']&=~fi,this['affectLigh'+'tmapped']&&(this['light']['mask']|=di)),this['light']['layersDirt'+'y']();});}get['bake'](){return this['data']['bake'];}set['bakeDir'](_0x510b67){this['_setValue']('bakeDir',_0x510b67,function(_0x57d608,_0x38c625){this['light']['bakeDir']=_0x57d608;});}get['bakeDir'](){return this['data']['bakeDir'];}set['isStatic'](_0x405ba0){this['_setValue']('isStatic',_0x405ba0,function(_0x2e27fe,_0x14d113){this['light']['isStatic']=_0x2e27fe;});}get['isStatic'](){return this['data']['isStatic'];}set['layers'](_0x522a0e){this['_setValue']('layers',_0x522a0e,function(_0x4f10b2,_0x3959b6){for(let _0xb6b92=-0x43d+0x1*-0x17c6+0x1*0x1c03;_0xb6b92<_0x3959b6['length'];_0xb6b92++){const _0x97ce5e=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x3959b6[_0xb6b92]);_0x97ce5e&&(_0x97ce5e['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x97ce5e));}for(let _0xb7b147=-0xa3d+-0x1*0xa9+-0x22e*-0x5;_0xb7b147<_0x4f10b2['length'];_0xb7b147++){const _0x28c131=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x4f10b2[_0xb7b147]);_0x28c131&&this['enabled']&&this['entity']['enabled']&&(_0x28c131['addLight'](this),this['light']['addLayer'](_0x28c131));}});}get['layers'](){return this['data']['layers'];}set['shadowUpda'+'teOverride'+'s'](_0x506e4e){this['light']['shadowUpda'+'teOverride'+'s']=_0x506e4e;}get['shadowUpda'+'teOverride'+'s'](){return this['light']['shadowUpda'+'teOverride'+'s'];}set['shadowSamp'+'les'](_0x4935b2){this['light']['shadowSamp'+'les']=_0x4935b2;}get['shadowSamp'+'les'](){return this['light']['shadowSamp'+'les'];}set['shadowBloc'+'kerSamples'](_0xe0763f){this['light']['shadowBloc'+'kerSamples']=_0xe0763f;}get['shadowBloc'+'kerSamples'](){return this['light']['shadowBloc'+'kerSamples'];}set['penumbraSi'+'ze'](_0x5a987e){this['light']['penumbraSi'+'ze']=_0x5a987e;}get['penumbraSi'+'ze'](){return this['light']['penumbraSi'+'ze'];}set['penumbraFa'+'lloff'](_0x305566){this['light']['penumbraFa'+'lloff']=_0x305566;}get['penumbraFa'+'lloff'](){return this['light']['penumbraFa'+'lloff'];}['_setValue'](_0x1cca91,_0x272ca6,_0x38d4bf,_0x1319a8){const _0x1d987f=this['data'],_0x303a90=_0x1d987f[_0x1cca91];!_0x1319a8&&_0x303a90===_0x272ca6||(_0x1d987f[_0x1cca91]=_0x272ca6,_0x38d4bf&&_0x38d4bf['call'](this,_0x272ca6,_0x303a90));}['addLightTo'+'Layers'](){for(let _0x2c458=0x647+-0x2*-0x1c6+-0x9d3;_0x2c458<this['layers']['length'];_0x2c458++){const _0x4883a1=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x2c458]);_0x4883a1&&(_0x4883a1['addLight'](this),this['light']['addLayer'](_0x4883a1));}}['removeLigh'+'tFromLayer'+'s'](){for(let _0x3dd2d4=-0x1*-0x200f+-0xc98*-0x3+-0x45d7;_0x3dd2d4<this['layers']['length'];_0x3dd2d4++){const _0x5e0bd9=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x3dd2d4]);_0x5e0bd9&&(_0x5e0bd9['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x5e0bd9));}}['onLayersCh'+'anged'](_0x3213df,_0x231088){this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),_0x3213df['off']('add',this['onLayerAdd'+'ed'],this),_0x3213df['off']('remove',this['onLayerRem'+'oved'],this),_0x231088['on']('add',this['onLayerAdd'+'ed'],this),_0x231088['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x4ca6fb){this['layers']['indexOf'](_0x4ca6fb['id'])>=-0x5fe+-0x2*0xd9c+0x589*0x6&&this['enabled']&&this['entity']['enabled']&&(_0x4ca6fb['addLight'](this),this['light']['addLayer'](_0x4ca6fb));}['onLayerRem'+'oved'](_0x352e81){this['layers']['indexOf'](_0x352e81['id'])>=0x2*-0xbf6+-0x3*-0x2ae+0xfe2&&(_0x352e81['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x352e81));}['refreshPro'+'perties'](){for(let _0xc8a498=-0x1d*-0x8e+0x8fb+-0x1911;_0xc8a498<Io['length'];_0xc8a498++){const _0x1c844b=Io[_0xc8a498];this[_0x1c844b]=this[_0x1c844b];}this['enabled']&&this['entity']['enabled']&&this['onEnable']();}['onCookieAs'+'setSet'](){let _0x369980=!(-0x12d7+-0x1171+0x52f*0x7);this['_cookieAss'+'et']['type']==='cubemap'&&!this['_cookieAss'+'et']['loadFaces']&&(this['_cookieAss'+'et']['loadFaces']=!(-0x13ad+0x122a+-0x2b*-0x9),_0x369980=!(0x8b*-0x37+0x1*-0xb6+-0xa31*-0x3)),(!this['_cookieAss'+'et']['resource']||_0x369980)&&this['system']['app']['assets']['load'](this['_cookieAss'+'et']),this['_cookieAss'+'et']['resource']&&this['onCookieAs'+'setLoad']();}['onCookieAs'+'setAdd'](_0x3ffd77){this['_cookieAss'+'etId']===_0x3ffd77['id']&&(this['_cookieAss'+'et']=_0x3ffd77,this['light']['enabled']&&this['onCookieAs'+'setSet'](),this['_cookieAss'+'et']['on']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['on']('remove',this['onCookieAs'+'setRemove'],this));}['onCookieAs'+'setLoad'](){!this['_cookieAss'+'et']||!this['_cookieAss'+'et']['resource']||(this['cookie']=this['_cookieAss'+'et']['resource']);}['onCookieAs'+'setRemove'](){this['_cookieAss'+'etId']&&(this['_cookieAss'+'etAdd']&&(this['system']['app']['assets']['off']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this),this['_cookieAss'+'etAdd']=!(0x1*-0x167b+-0x375*-0x6+0x1be)),this['_cookieAss'+'et']&&(this['_cookieAss'+'et']['off']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['off']('remove',this['onCookieAs'+'setRemove'],this),this['_cookieAss'+'et']=null),this['cookie']=null);}['onEnable'](){const _0xb8f631=this['system']['app']['scene'],_0x38e163=_0xb8f631['layers'];this['light']['enabled']=!(-0xd5f+-0xd3+0x1*0xe32),this['_evtLayers'+'Changed']=_0xb8f631['on']('set:layers',this['onLayersCh'+'anged'],this),_0x38e163&&(this['_evtLayerA'+'dded']=_0x38e163['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x38e163['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),this['_cookieAss'+'et']&&!this['cookie']&&this['onCookieAs'+'setSet']();}['onDisable'](){var _0x328f6f,_0x34c759,_0x222557;const _0x1a1491=this['system']['app']['scene']['layers'];this['light']['enabled']=!(0xfbd*-0x1+-0x308+0x642*0x3),(_0x328f6f=this['_evtLayers'+'Changed'])==null||_0x328f6f['off'](),this['_evtLayers'+'Changed']=null,_0x1a1491&&((_0x34c759=this['_evtLayerA'+'dded'])==null||_0x34c759['off'](),this['_evtLayerA'+'dded']=null,(_0x222557=this['_evtLayerR'+'emoved'])==null||_0x222557['off'](),this['_evtLayerR'+'emoved']=null),this['removeLigh'+'tFromLayer'+'s']();}['onRemove'](){this['onDisable'](),this['light']['destroy'](),this['cookieAsse'+'t']=null;}}class VO extends ct{constructor(_0x3533d5){super(_0x3533d5),this['id']='light',this['ComponentT'+'ype']=zO,this['DataType']=Rv,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x20c588,_0x372078){const _0x38ce94={..._0x372078};_0x38ce94['type']||(_0x38ce94['type']=_0x20c588['data']['type']),_0x20c588['data']['type']=_0x38ce94['type'],_0x38ce94['layers']&&Array['isArray'](_0x38ce94['layers'])&&(_0x38ce94['layers']=_0x38ce94['layers']['slice'](0x1*-0x1269+-0x392+0x15fb)),_0x38ce94['color']&&Array['isArray'](_0x38ce94['color'])&&(_0x38ce94['color']=new ie(_0x38ce94['color'][0x1df*0xa+-0x1ab5+0x7ff],_0x38ce94['color'][0x7d3*-0x4+0x45e*0x4+-0x1*-0xdd5],_0x38ce94['color'][-0xc23+-0x1bc6+0x27eb])),_0x38ce94['cookieOffs'+'et']&&_0x38ce94['cookieOffs'+'et']instanceof Array&&(_0x38ce94['cookieOffs'+'et']=new J(_0x38ce94['cookieOffs'+'et'][-0x422*-0x4+0x59*-0x68+0x4e8*0x4],_0x38ce94['cookieOffs'+'et'][-0x146b+-0x2*-0x1065+0x62f*-0x2])),_0x38ce94['cookieScal'+'e']&&_0x38ce94['cookieScal'+'e']instanceof Array&&(_0x38ce94['cookieScal'+'e']=new J(_0x38ce94['cookieScal'+'e'][-0x133*0x6+-0x2*0x2ab+0x1*0xc88],_0x38ce94['cookieScal'+'e'][0xb61*-0x1+0x782+0x10*0x3e])),_0x38ce94['enable']&&(console['warn']('WARNING:\x20e'+'nable:\x20Pro'+'perty\x20is\x20d'+'eprecated.'+'\x20Set\x20enabl'+'ed\x20propert'+'y\x20instead.'),_0x38ce94['enabled']=_0x38ce94['enable']),_0x38ce94['shape']||(_0x38ce94['shape']=js);const _0x40e17e=new tl(this['app']['graphicsDe'+'vice'],this['app']['scene']['clusteredL'+'ightingEna'+'bled']);_0x40e17e['type']=zf[_0x38ce94['type']],_0x40e17e['_node']=_0x20c588['entity'],_0x20c588['data']['light']=_0x40e17e,super['initialize'+'ComponentD'+'ata'](_0x20c588,_0x38ce94,Io);}['_onRemoveC'+'omponent'](_0x4681db,_0x5cdff8){_0x5cdff8['onRemove']();}['cloneCompo'+'nent'](_0x4b3d0b,_0x2e5a96){const _0x339a13=_0x4b3d0b['light'],_0x12f9bf=[];let _0x28716f;for(let _0x2df8d2=0x1505+0x25b9+-0x3abe;_0x2df8d2<Io['length'];_0x2df8d2++)_0x28716f=Io[_0x2df8d2],_0x28716f!=='light'&&(_0x339a13[_0x28716f]&&_0x339a13[_0x28716f]['clone']?_0x12f9bf[_0x28716f]=_0x339a13[_0x28716f]['clone']():_0x12f9bf[_0x28716f]=_0x339a13[_0x28716f]);return this['addCompone'+'nt'](_0x2e5a96,_0x12f9bf);}['changeType'](_0x59a630,_0x4ed3c2,_0x33b1ea){_0x4ed3c2!==_0x33b1ea&&(_0x59a630['light']['type']=zf[_0x33b1ea]);}}const GO=['x','y','z','w'],HO=[void(0x17f5+0xeb4+-0xce3*0x3),void(0x128b+0x1f9f+-0x322a),J,D,re];function Gn(_0x264d9d,_0xa13a2f,_0x5b1c9e,_0x52bfc8){switch(_0xa13a2f['type']){case'boolean':return!!_0x5b1c9e;case'number':if(typeof _0x5b1c9e=='number')return _0x5b1c9e;if(typeof _0x5b1c9e=='string'){const _0x32b209=parseInt(_0x5b1c9e,-0x1*-0x225b+-0x825+0x14*-0x14f);return isNaN(_0x32b209)?null:_0x32b209;}else{if(typeof _0x5b1c9e=='boolean')return 0x1b*0x13e+0x1a*-0x51+-0x1950+_0x5b1c9e;}return null;case'json':{const _0x1aa555={};if(Array['isArray'](_0xa13a2f['schema'])){(!_0x5b1c9e||typeof _0x5b1c9e!='object')&&(_0x5b1c9e={});for(let _0x546263=-0x18ae+-0x2b7+0x1b65;_0x546263<_0xa13a2f['schema']['length'];_0x546263++){const _0x5247f3=_0xa13a2f['schema'][_0x546263];if(_0x5247f3['name']){if(_0x5247f3['array']){_0x1aa555[_0x5247f3['name']]=[];const _0x4e6eab=Array['isArray'](_0x5b1c9e[_0x5247f3['name']])?_0x5b1c9e[_0x5247f3['name']]:[];for(let _0x2bfd0c=-0xba4+-0x100+-0x2*-0x652;_0x2bfd0c<_0x4e6eab['length'];_0x2bfd0c++)_0x1aa555[_0x5247f3['name']]['push'](Gn(_0x264d9d,_0x5247f3,_0x4e6eab[_0x2bfd0c]));}else{const _0x4cbec2=_0x5b1c9e['hasOwnProp'+'erty'](_0x5247f3['name'])?_0x5b1c9e[_0x5247f3['name']]:_0x5247f3['default'];_0x1aa555[_0x5247f3['name']]=Gn(_0x264d9d,_0x5247f3,_0x4cbec2);}}}}return _0x1aa555;}case'asset':return _0x5b1c9e instanceof pe?_0x5b1c9e:typeof _0x5b1c9e=='number'?_0x264d9d['assets']['get'](_0x5b1c9e)||null:typeof _0x5b1c9e=='string'&&_0x264d9d['assets']['get'](parseInt(_0x5b1c9e,-0x1*-0x11da+0x7b2+-0x51a*0x5))||null;case'entity':return _0x5b1c9e instanceof Ie?_0x5b1c9e:typeof _0x5b1c9e=='string'?_0x264d9d['getEntityF'+'romIndex'](_0x5b1c9e):null;case'rgb':case'rgba':if(_0x5b1c9e instanceof ie)return _0x52bfc8 instanceof ie?(_0x52bfc8['copy'](_0x5b1c9e),_0x52bfc8):_0x5b1c9e['clone']();if(_0x5b1c9e instanceof Array&&_0x5b1c9e['length']>=-0x2321+-0x1b77+-0x1*-0x3e9b&&_0x5b1c9e['length']<=0x1*0x8e9+-0x1*0x1e6b+0x1586){for(let _0x3a86f6=-0x161*0xd+-0x2cf*-0x4+-0x1*-0x6b1;_0x3a86f6<_0x5b1c9e['length'];_0x3a86f6++)if(typeof _0x5b1c9e[_0x3a86f6]!='number')return null;return _0x52bfc8||(_0x52bfc8=new ie()),_0x52bfc8['r']=_0x5b1c9e[0x1853+0x12f*-0x1a+0x7f*0xd],_0x52bfc8['g']=_0x5b1c9e[0xba9*-0x1+-0x8c0+0x146a],_0x52bfc8['b']=_0x5b1c9e[0x1a71+-0xb+-0x6*0x466],_0x52bfc8['a']=_0x5b1c9e['length']===-0x1c27*0x1+0x1*-0x1f3d+0x3b67?-0x13e+0x43*0x86+-0x21d3*0x1:_0x5b1c9e[-0xbc3*-0x3+0x922*0x2+0xb2*-0x4d],_0x52bfc8;}else{if(typeof _0x5b1c9e=='string'&&/#(?:[0-9a-f]{2}){3,4}/i['test'](_0x5b1c9e))return _0x52bfc8||(_0x52bfc8=new ie()),_0x52bfc8['fromString'](_0x5b1c9e),_0x52bfc8;}return null;case'vec2':case'vec3':case'vec4':{const _0x59cc74=parseInt(_0xa13a2f['type']['slice'](0x11*0x77+-0xd5a+0x576),-0x1*0x1b59+-0x72d+0x10*0x229),_0x32ed33=HO[_0x59cc74];if(_0x5b1c9e instanceof _0x32ed33)return _0x52bfc8 instanceof _0x32ed33?(_0x52bfc8['copy'](_0x5b1c9e),_0x52bfc8):_0x5b1c9e['clone']();if(_0x5b1c9e instanceof Array&&_0x5b1c9e['length']===_0x59cc74){for(let _0x19cb6c=-0xf*-0x1ae+0x21d2+-0x1d82*0x2;_0x19cb6c<_0x5b1c9e['length'];_0x19cb6c++)if(typeof _0x5b1c9e[_0x19cb6c]!='number')return null;_0x52bfc8||(_0x52bfc8=new _0x32ed33());for(let _0x550a31=-0x122*-0x19+-0x35*-0x3d+-0x3b9*0xb;_0x550a31<_0x59cc74;_0x550a31++)_0x52bfc8[GO[_0x550a31]]=_0x5b1c9e[_0x550a31];return _0x52bfc8;}return null;}case'curve':if(_0x5b1c9e){let _0x20c2d2;if(_0x5b1c9e instanceof Xs||_0x5b1c9e instanceof ta)_0x20c2d2=_0x5b1c9e['clone']();else{const _0x4f50c4=_0x5b1c9e['keys'][0x262d+-0x6ba*-0x5+-0x47cf]instanceof Array?ta:Xs;_0x20c2d2=new _0x4f50c4(_0x5b1c9e['keys']),_0x20c2d2['type']=_0x5b1c9e['type'];}return _0x20c2d2;}break;}return _0x5b1c9e;}function Ov(_0xca224d,_0x4358b2,_0x4cd100,_0x5c73c6){return _0x4358b2['array']?_0x4cd100['map']((_0x1a41cf,_0x27994d)=>Gn(_0xca224d,_0x4358b2,_0x1a41cf,_0x5c73c6?_0x5c73c6[_0x27994d]:null)):Gn(_0xca224d,_0x4358b2,_0x4cd100,_0x5c73c6);}function Fv(_0x1fabb5,_0x166144,_0x7fd808,_0x338c96){if(_0x7fd808)for(const _0x1fbb40 in _0x166144){const _0x5cf991=_0x166144[_0x1fbb40],_0x113f42=_0x7fd808[_0x1fbb40];_0x113f42!==void(0xf7c*-0x1+0x1900+-0x984)&&(_0x338c96[_0x1fbb40]=Ov(_0x1fabb5,_0x5cf991,_0x113f42,_0x338c96[_0x1fbb40]));}}const fn=class fn{constructor(_0x1bbc89){this['scriptType']=_0x1bbc89,this['index']={};}['add'](_0x5467c7,_0x4cce4e){if(this['index'][_0x5467c7]){w['warn']('attribute\x20'+'\x27'+_0x5467c7+('\x27\x20is\x20alrea'+'dy\x20defined'+'\x20for\x20scrip'+'t\x20type\x20\x27')+this['scriptType']['name']+'\x27');return;}else{if(fn['reservedNa'+'mes']['has'](_0x5467c7)){w['warn']('attribute\x20'+'\x27'+_0x5467c7+('\x27\x20is\x20a\x20res'+'erved\x20attr'+'ibute\x20name'));return;}}this['index'][_0x5467c7]=_0x4cce4e,Object['defineProp'+'erty'](this['scriptType']['prototype'],_0x5467c7,{'get':function(){return this['__attribut'+'es'][_0x5467c7];},'set':function(_0xe736a){const _0x58c990='attr',_0x51d9a4='attr:'+_0x5467c7,_0x4cf37b=this['__attribut'+'es'][_0x5467c7];let _0x50f04f=_0x4cf37b;if(_0x4cf37b&&_0x4cce4e['type']!=='json'&&_0x4cce4e['type']!=='entity'&&_0x4cf37b['clone']&&(this['hasEvent'](_0x58c990)||this['hasEvent'](_0x51d9a4))&&(_0x50f04f=_0x4cf37b['clone']()),_0x4cce4e['array']){if(this['__attribut'+'es'][_0x5467c7]=[],_0xe736a){for(let _0x3c7561=0x204b+0x193*-0x3+0x1*-0x1b92,_0x34e555=_0xe736a['length'];_0x3c7561<_0x34e555;_0x3c7561++)this['__attribut'+'es'][_0x5467c7]['push'](Gn(this['app'],_0x4cce4e,_0xe736a[_0x3c7561],_0x4cf37b?_0x4cf37b[_0x3c7561]:null));}}else this['__attribut'+'es'][_0x5467c7]=Gn(this['app'],_0x4cce4e,_0xe736a,_0x4cf37b);this['fire'](_0x58c990,_0x5467c7,this['__attribut'+'es'][_0x5467c7],_0x50f04f),this['fire'](_0x51d9a4,this['__attribut'+'es'][_0x5467c7],_0x50f04f);}});}['remove'](_0x1721cf){return this['index'][_0x1721cf]?(delete this['index'][_0x1721cf],delete this['scriptType']['prototype'][_0x1721cf],!(0x265*-0x5+0xd*-0x1f1+0x1b1*0x16)):!(-0x1d71+0x25c2+-0x850);}['has'](_0x1f3863){return!!this['index'][_0x1f3863];}['get'](_0x4e3032){return this['index'][_0x4e3032]||null;}};h(fn,'assignAttr'+'ibutesToSc'+'ript',Fv),h(fn,'attributeT'+'oValue',Ov),h(fn,'reservedNa'+'mes',new Set(['app','entity','enabled','_enabled','_enabledOl'+'d','_destroyed','__attribut'+'es','__attribut'+'esRaw','__scriptTy'+'pe','__executio'+'nOrder','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']));let al=fn;const uu='initialize',pu='postInitia'+'lize',WO='update',$O='postUpdate',XO='swap';class ts extends me{constructor(_0x32841c){super(),h(this,'app'),h(this,'entity'),h(this,'_enabled'),h(this,'_enabledOl'+'d'),h(this,'_initializ'+'ed'),h(this,'_postIniti'+'alized'),h(this,'__destroye'+'d'),h(this,'__scriptTy'+'pe'),h(this,'__executio'+'nOrder'),this['initScript'](_0x32841c);}set['enabled'](_0x3fcdd1){this['_enabled']=!!_0x3fcdd1,this['enabled']!==this['_enabledOl'+'d']&&(this['_enabledOl'+'d']=this['enabled'],this['fire'](this['enabled']?'enable':'disable'),this['fire']('state',this['enabled']),!this['_initializ'+'ed']&&this['enabled']&&(this['_initializ'+'ed']=!(0x83*-0x4a+-0x5*0x24f+-0xd*-0x3cd),this['fire']('preInitial'+'ize'),this['initialize']&&this['entity']['script']['_scriptMet'+'hod'](this,uu)),this['_initializ'+'ed']&&!this['_postIniti'+'alized']&&this['enabled']&&!this['entity']['script']['_beingEnab'+'led']&&(this['_postIniti'+'alized']=!(-0x1*-0x17b3+0x191*-0xe+-0x3*0x97),this['postInitia'+'lize']&&this['entity']['script']['_scriptMet'+'hod'](this,pu)));}get['enabled'](){return this['_enabled']&&!this['_destroyed']&&this['entity']['script']['enabled']&&this['entity']['enabled'];}['initScript'](_0x570189){const _0x25ef76=this['constructo'+'r'];w['assert'](_0x570189&&_0x570189['app']&&_0x570189['entity'],'script\x20['+_0x25ef76['__name']+(']\x20has\x20miss'+'ing\x20argume'+'nts\x20in\x20con'+'structor')),this['app']=_0x570189['app'],this['entity']=_0x570189['entity'],this['_enabled']=typeof _0x570189['enabled']=='boolean'?_0x570189['enabled']:!(-0x2069+0x12a3*-0x1+0x330c),this['_enabledOl'+'d']=this['enabled'],this['__destroye'+'d']=!(-0x1ca*-0x5+0x2490+-0x2d81),this['__scriptTy'+'pe']=_0x25ef76,this['__executio'+'nOrder']=-(0x23*-0x8f+-0x1ff8+-0x1*-0x3386);}static get['scriptName'](){return this['__name'];}}h(ts,'EVENT_ENAB'+'LE','enable'),h(ts,'EVENT_DISA'+'BLE','disable'),h(ts,'EVENT_STAT'+'E','state'),h(ts,'EVENT_DEST'+'ROY','destroy'),h(ts,'EVENT_ATTR','attr'),h(ts,'EVENT_ERRO'+'R','error'),h(ts,'__name',null),h(ts,'__getScrip'+'tName',Nv);const qO=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s\/]*)\s*/;function Nv(_0x21011c){if(typeof _0x21011c!='function')return;if(_0x21011c['scriptName'])return _0x21011c['scriptName'];if('name'in Function['prototype'])return _0x21011c['name'];if(_0x21011c===Function||_0x21011c===Function['prototype']['constructo'+'r'])return'Function';const _0x5c8942=(''+_0x21011c)['match'](qO);return _0x5c8942?_0x5c8942[0x1d74+-0x1*-0x3d7+0x214a*-0x1]:void(0x2e0*-0xd+0x271*0x6+0x16ba*0x1);}class Lo extends ts{constructor(_0x4fdcd5){super(_0x4fdcd5),h(this,'__attribut'+'es'),h(this,'__attribut'+'esRaw'),this['initScript'+'Type'](_0x4fdcd5);}static get['attributes'](){return this['hasOwnProp'+'erty']('__attribut'+'es')||(this['__attribut'+'es']=new al(this)),this['__attribut'+'es'];}['initScript'](_0x33bdd3){ts['prototype']['initScript']['call'](this,_0x33bdd3),this['__attribut'+'es']={},this['__attribut'+'esRaw']=_0x33bdd3['attributes']||{};}['initScript'+'Type'](_0x56b540){this['initScript'](_0x56b540);}['__initiali'+'zeAttribut'+'es'](_0x35d617){if(!(!_0x35d617&&!this['__attribut'+'esRaw'])){for(const _0x22a089 in this['__scriptTy'+'pe']['attributes']['index'])this['__attribut'+'esRaw']&&this['__attribut'+'esRaw']['hasOwnProp'+'erty'](_0x22a089)?this[_0x22a089]=this['__attribut'+'esRaw'][_0x22a089]:this['__attribut'+'es']['hasOwnProp'+'erty'](_0x22a089)||(this['__scriptTy'+'pe']['attributes']['index'][_0x22a089]['hasOwnProp'+'erty']('default')?this[_0x22a089]=this['__scriptTy'+'pe']['attributes']['index'][_0x22a089]['default']:this[_0x22a089]=null);this['__attribut'+'esRaw']=null;}}static['extend'](_0x406ffe){for(const _0x20ef93 in _0x406ffe)_0x406ffe['hasOwnProp'+'erty'](_0x20ef93)&&(this['prototype'][_0x20ef93]=_0x406ffe[_0x20ef93]);}}const jO=_0x15d947=>_0x15d947[0x6*-0x447+-0x5e7+-0x1*-0x1f91]['toLowerCas'+'e']()+_0x15d947['substring'](0xb4e+-0x16ed+0xba0);class Ii extends we{constructor(_0xd4e451,_0x5539a1){super(_0xd4e451,_0x5539a1),h(this,'_attribute'+'DataMap',new Map()),(this['_scripts']=[],this['_updateLis'+'t']=new Bc({'sortBy':'__executio'+'nOrder'}),this['_postUpdat'+'eList']=new Bc({'sortBy':'__executio'+'nOrder'}),this['_scriptsIn'+'dex']={},this['_destroyed'+'Scripts']=[],this['_destroyed']=!(0x18b5+-0x1*-0x1fa9+-0x133*0x2f),this['_scriptsDa'+'ta']=null,this['_oldState']=!(-0x1b01+0x134+-0x529*-0x5),this['_enabled']=!(0x1a+-0xab9+0xa9f*0x1),this['_beingEnab'+'led']=!(-0x1*-0xf7f+-0x47*-0x49+-0x7*0x51b),this['_isLooping'+'ThroughScr'+'ipts']=!(0x1d55*-0x1+-0x1*0x1dad+-0x3b03*-0x1),this['_execution'+'Order']=-(-0xec4+0x4e8+0x9dd),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this));}set['scripts'](_0xf31f8f){this['_scriptsDa'+'ta']=_0xf31f8f;for(const _0x49f7d9 in _0xf31f8f){if(!_0xf31f8f['hasOwnProp'+'erty'](_0x49f7d9))continue;const _0x3bcb88=this['_scriptsIn'+'dex'][_0x49f7d9];if(_0x3bcb88){if(typeof _0xf31f8f[_0x49f7d9]['enabled']=='boolean'&&(_0x3bcb88['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x3bcb88);}),_0x3bcb88['enabled']=!!_0xf31f8f[_0x49f7d9]['enabled']),typeof _0xf31f8f[_0x49f7d9]['attributes']=='object'){for(const _0x52e799 in _0xf31f8f[_0x49f7d9]['attributes'])if(!al['reservedNa'+'mes']['has'](_0x52e799)){if(!_0x3bcb88['__attribut'+'es']['hasOwnProp'+'erty'](_0x52e799)){const _0x24dc65=this['system']['app']['scripts']['get'](_0x49f7d9);_0x24dc65&&_0x24dc65['attributes']['add'](_0x52e799,{});}_0x3bcb88[_0x52e799]=_0xf31f8f[_0x49f7d9]['attributes'][_0x52e799];}}}else console['log'](this['order']);}}get['scripts'](){return this['_scripts'];}set['enabled'](_0x1c2032){const _0x18da7f=this['_enabled'];this['_enabled']=_0x1c2032,this['fire']('set','enabled',_0x18da7f,_0x1c2032);}get['enabled'](){return this['_enabled'];}['onEnable'](){this['_beingEnab'+'led']=!(0x4a4+-0xd*-0x269+-0x23f9),this['_checkStat'+'e'](),this['entity']['_beingEnab'+'led']||this['onPostStat'+'eChange'](),this['_beingEnab'+'led']=!(0x330+-0x132b+0xffc);}['onDisable'](){this['_checkStat'+'e']();}['onPostStat'+'eChange'](){const _0xb5be65=this['_beginLoop'+'ing']();for(let _0x8302c9=0x1d3e+0x24e2+-0x4220*0x1,_0x5780d6=this['scripts']['length'];_0x8302c9<_0x5780d6;_0x8302c9++){const _0x2ac38f=this['scripts'][_0x8302c9];_0x2ac38f['_initializ'+'ed']&&!_0x2ac38f['_postIniti'+'alized']&&_0x2ac38f['enabled']&&(_0x2ac38f['_postIniti'+'alized']=!(0x133+-0x1*0x109d+0xf6a),_0x2ac38f['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x2ac38f,pu));}this['_endLoopin'+'g'](_0xb5be65);}['_beginLoop'+'ing'](){const _0x2de17b=this['_isLooping'+'ThroughScr'+'ipts'];return this['_isLooping'+'ThroughScr'+'ipts']=!(0x1d36+-0x3a3+0x1*-0x1993),_0x2de17b;}['_endLoopin'+'g'](_0x3fb972){this['_isLooping'+'ThroughScr'+'ipts']=_0x3fb972,this['_isLooping'+'ThroughScr'+'ipts']||this['_removeDes'+'troyedScri'+'pts']();}['_onSetEnab'+'led'](_0x5c81b0,_0x41fa81,_0x2c54d0){this['_beingEnab'+'led']=!(0x1109+0xb10+-0x1c19),this['_checkStat'+'e'](),this['_beingEnab'+'led']=!(-0x20b4+-0x49c*0x2+0x29ed);}['_checkStat'+'e'](){const _0x14e58d=this['enabled']&&this['entity']['enabled'];if(_0x14e58d===this['_oldState'])return;this['_oldState']=_0x14e58d,this['fire'](_0x14e58d?'enable':'disable'),this['fire']('state',_0x14e58d),_0x14e58d?this['system']['_addCompon'+'entToEnabl'+'ed'](this):this['system']['_removeCom'+'ponentFrom'+'Enabled'](this);const _0x176bc6=this['_beginLoop'+'ing']();for(let _0x4e0ccb=0x17d5*-0x1+-0x2347+0x3b1c,_0x417f6c=this['scripts']['length'];_0x4e0ccb<_0x417f6c;_0x4e0ccb++){const _0x5a8839=this['scripts'][_0x4e0ccb];_0x5a8839['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x5a8839);}),_0x5a8839['enabled']=_0x5a8839['_enabled'];}this['_endLoopin'+'g'](_0x176bc6);}['_onBeforeR'+'emove'](){this['fire']('remove');const _0x434a15=this['_beginLoop'+'ing']();for(let _0x53b906=0x2*0x1269+-0x3f+-0x2493;_0x53b906<this['scripts']['length'];_0x53b906++){const _0x27c8c8=this['scripts'][_0x53b906];_0x27c8c8&&this['destroy'](_0x27c8c8['__scriptTy'+'pe']['__name']);}this['_endLoopin'+'g'](_0x434a15);}['_removeDes'+'troyedScri'+'pts'](){const _0x4f3d5b=this['_destroyed'+'Scripts']['length'];if(_0x4f3d5b){for(let _0x14ed9b=-0x19ab+0x970+-0x1*-0x103b;_0x14ed9b<_0x4f3d5b;_0x14ed9b++){const _0x31f7d5=this['_destroyed'+'Scripts'][_0x14ed9b];this['_removeScr'+'iptInstanc'+'e'](_0x31f7d5);}this['_destroyed'+'Scripts']['length']=0x2b4*-0x8+0x13*-0xdb+-0x1*-0x25e1,this['_resetExec'+'utionOrder'](0x22f7+-0x2593+0x29c,this['_scripts']['length']);}}['_onInitial'+'izeAttribu'+'tes'](){for(let _0x103432=-0x5e+0x57*-0x1+0xb5,_0x1ac29a=this['scripts']['length'];_0x103432<_0x1ac29a;_0x103432++){const _0x3e2f4c=this['scripts'][_0x103432];this['initialize'+'Attributes'](_0x3e2f4c);}}['initialize'+'Attributes'](_0x163f50){var _0x58d122;if(_0x163f50 instanceof Lo)_0x163f50['__initiali'+'zeAttribut'+'es']();else{const _0x452e27=_0x163f50['__scriptTy'+'pe']['__name'],_0x4628f8=this['_attribute'+'DataMap']['get'](_0x452e27);if(!_0x4628f8)return;const _0x4cb90d=(_0x58d122=this['system']['app']['scripts'])==null?void(-0x2251+0x2088*0x1+0x1c9):_0x58d122['getSchema'](_0x452e27);_0x4cb90d||w['warnOnce']('No\x20schema\x20'+'exists\x20for'+'\x20the\x20scrip'+'t\x20\x27'+_0x452e27+('\x27.\x20A\x20schem'+'a\x20must\x20exi'+'st\x20for\x20dat'+'a\x20to\x20be\x20in'+'stantiated'+'\x20on\x20the\x20sc'+'ript.')),Fv(this['system']['app'],_0x4cb90d['attributes'],_0x4628f8,_0x163f50);}}['_scriptMet'+'hod'](_0x1dfece,_0x4ddbcf,_0x5497eb){try{_0x1dfece[_0x4ddbcf](_0x5497eb);}catch(_0x441763){_0x1dfece['enabled']=!(0x1f*-0x50+0x1*0x139d+-0x9ec),_0x1dfece['hasEvent']('error')||(console['warn']('unhandled\x20'+'exception\x20'+'while\x20call'+'ing\x20\x22'+_0x4ddbcf+'\x22\x20for\x20\x22'+_0x1dfece['__scriptTy'+'pe']['__name']+'\x22\x20script:\x20',_0x441763),console['error'](_0x441763)),_0x1dfece['fire']('error',_0x441763,_0x4ddbcf),this['fire']('error',_0x1dfece,_0x441763,_0x4ddbcf);}}['_onInitial'+'ize'](){const _0xab2fb2=this['_scripts'],_0x53ace8=this['_beginLoop'+'ing']();for(let _0x22d1a5=-0x26*0x3+0x3*0x3d5+-0xb0d,_0x5abeba=_0xab2fb2['length'];_0x22d1a5<_0x5abeba;_0x22d1a5++){const _0x551d80=_0xab2fb2[_0x22d1a5];!_0x551d80['_initializ'+'ed']&&_0x551d80['enabled']&&(_0x551d80['_initializ'+'ed']=!(-0x1*-0x1f9a+-0x23fb+0x13*0x3b),_0x551d80['initialize']&&this['_scriptMet'+'hod'](_0x551d80,uu));}this['_endLoopin'+'g'](_0x53ace8);}['_onPostIni'+'tialize'](){this['onPostStat'+'eChange']();}['_onUpdate'](_0x57a201){const _0x51868e=this['_updateLis'+'t'];if(!_0x51868e['length'])return;const _0x363b49=this['_beginLoop'+'ing']();for(_0x51868e['loopIndex']=-0x41*-0x4c+0x255*0xb+-0x2cf3;_0x51868e['loopIndex']<_0x51868e['length'];_0x51868e['loopIndex']++){const _0x8923c8=_0x51868e['items'][_0x51868e['loopIndex']];_0x8923c8['enabled']&&this['_scriptMet'+'hod'](_0x8923c8,WO,_0x57a201);}this['_endLoopin'+'g'](_0x363b49);}['_onPostUpd'+'ate'](_0x56753b){const _0x2586f2=this['_postUpdat'+'eList'];if(!_0x2586f2['length'])return;const _0x276236=this['_beginLoop'+'ing']();for(_0x2586f2['loopIndex']=0x2675*0x1+-0xb47+-0x1b2e;_0x2586f2['loopIndex']<_0x2586f2['length'];_0x2586f2['loopIndex']++){const _0x437c71=_0x2586f2['items'][_0x2586f2['loopIndex']];_0x437c71['enabled']&&this['_scriptMet'+'hod'](_0x437c71,$O,_0x56753b);}this['_endLoopin'+'g'](_0x276236);}['_insertScr'+'iptInstanc'+'e'](_0x4f95f6,_0x1a26d3,_0x352e53){_0x1a26d3===-(-0x3*-0x9ce+0x1c25+0x398e*-0x1)?(this['_scripts']['push'](_0x4f95f6),_0x4f95f6['__executio'+'nOrder']=_0x352e53,_0x4f95f6['update']&&this['_updateLis'+'t']['append'](_0x4f95f6),_0x4f95f6['postUpdate']&&this['_postUpdat'+'eList']['append'](_0x4f95f6)):(this['_scripts']['splice'](_0x1a26d3,-0xae4+0x2403+-0x191f*0x1,_0x4f95f6),_0x4f95f6['__executio'+'nOrder']=_0x1a26d3,this['_resetExec'+'utionOrder'](_0x1a26d3+(-0x8*-0x1df+-0x1509+0x612),_0x352e53+(-0x2d*0xc7+-0xe*-0x229+0x1*0x4be)),_0x4f95f6['update']&&this['_updateLis'+'t']['insert'](_0x4f95f6),_0x4f95f6['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x4f95f6));}['_removeScr'+'iptInstanc'+'e'](_0x2ee94a){const _0x111e1d=this['_scripts']['indexOf'](_0x2ee94a);return _0x111e1d===-(-0x23*0x55+0xf4*0x14+-0x7*0x110)||(this['_scripts']['splice'](_0x111e1d,0xc59*0x1+-0x82a+0xd6*-0x5),_0x2ee94a['update']&&this['_updateLis'+'t']['remove'](_0x2ee94a),_0x2ee94a['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x2ee94a)),_0x111e1d;}['_resetExec'+'utionOrder'](_0x569db6,_0x565a23){for(let _0x5111f5=_0x569db6;_0x5111f5<_0x565a23;_0x5111f5++)this['_scripts'][_0x5111f5]['__executio'+'nOrder']=_0x5111f5;}['_resolveEn'+'tityScript'+'Attribute'](_0x1c6f19,_0x491bc8,_0x41b670,_0x170ca4,_0x176e14,_0x53b028){if(_0x1c6f19['array']){const _0x3024bb=_0x41b670['length'];if(!_0x3024bb)return;const _0x58a140=_0x41b670['slice']();for(let _0x8c0e7=-0x7*0x16a+-0x1f26+0x8e*0x4a;_0x8c0e7<_0x3024bb;_0x8c0e7++){const _0x40ea47=_0x58a140[_0x8c0e7]instanceof lt?_0x58a140[_0x8c0e7]['getGuid']():_0x58a140[_0x8c0e7];_0x53b028[_0x40ea47]&&(_0x58a140[_0x8c0e7]=_0x170ca4?_0x53b028[_0x40ea47]['getGuid']():_0x53b028[_0x40ea47]);}_0x176e14[_0x491bc8]=_0x58a140;}else{if(_0x41b670 instanceof lt)_0x41b670=_0x41b670['getGuid']();else{if(typeof _0x41b670!='string')return;}_0x53b028[_0x41b670]&&(_0x176e14[_0x491bc8]=_0x53b028[_0x41b670]);}}['has'](_0x25bd31){if(typeof _0x25bd31=='string')return!!this['_scriptsIn'+'dex'][_0x25bd31];if(!_0x25bd31)return!(-0x1ca0+-0x4*0x2a+0x9c3*0x3);const _0x5f43aa=_0x25bd31,_0x14ae18=_0x5f43aa['__name'],_0x28078f=this['_scriptsIn'+'dex'][_0x14ae18];return(_0x28078f&&_0x28078f['instance'])instanceof _0x5f43aa;}['get'](_0x3fe8bc){if(typeof _0x3fe8bc=='string'){const _0x2da311=this['_scriptsIn'+'dex'][_0x3fe8bc];return _0x2da311?_0x2da311['instance']:null;}if(!_0x3fe8bc)return null;const _0x2905e1=_0x3fe8bc,_0x493ac8=_0x2905e1['__name'],_0x4239c2=this['_scriptsIn'+'dex'][_0x493ac8],_0x4af365=_0x4239c2&&_0x4239c2['instance'];return _0x4af365 instanceof _0x2905e1?_0x4af365:null;}['create'](_0x24605f,_0x580ce7={}){const _0x46f66e=this;let _0x22c475=_0x24605f,_0x1b23d5=_0x24605f;if(typeof _0x22c475=='string')_0x22c475=this['system']['app']['scripts']['get'](_0x22c475);else{if(_0x22c475){const _0x3708ee=Nv(_0x22c475),_0x1a611a=jO(_0x3708ee);!(_0x22c475['prototype']instanceof Lo)&&!_0x22c475['scriptName']&&w['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x3708ee+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x3708ee+('.scriptNam'+'e\x20=\x20\x22')+_0x1a611a+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.')),_0x22c475['__name']??(_0x22c475['__name']=_0x22c475['scriptName']??_0x1a611a),_0x1b23d5=_0x22c475['__name'];}}if(_0x22c475){if(!this['_scriptsIn'+'dex'][_0x1b23d5]||!this['_scriptsIn'+'dex'][_0x1b23d5]['instance']){const _0x5d5a24=new _0x22c475({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x580ce7['hasOwnProp'+'erty']('enabled')?_0x580ce7['enabled']:!(-0x7e6*-0x2+0x6f8*-0x1+-0x8d4),'attributes':_0x580ce7['attributes']||{}});_0x580ce7['properties']&&typeof _0x580ce7['properties']=='object'&&Object['assign'](_0x5d5a24,_0x580ce7['properties']),_0x5d5a24 instanceof Lo||this['_attribute'+'DataMap']['set'](_0x1b23d5,_0x580ce7['attributes']);const _0xb7d844=this['_scripts']['length'];let _0x552b86=-(0x2282+0x1229*-0x2+0x1d1);return typeof _0x580ce7['ind']=='number'&&_0x580ce7['ind']!==-(-0x21c3+0x5c2+-0x59a*-0x5)&&_0xb7d844>_0x580ce7['ind']&&(_0x552b86=_0x580ce7['ind']),this['_insertScr'+'iptInstanc'+'e'](_0x5d5a24,_0x552b86,_0xb7d844),this['_scriptsIn'+'dex'][_0x1b23d5]={'instance':_0x5d5a24,'onSwap':function(){_0x46f66e['swap'](_0x1b23d5);}},this[_0x1b23d5]=_0x5d5a24,_0x580ce7['preloading']||this['initialize'+'Attributes'](_0x5d5a24),this['fire']('create',_0x1b23d5,_0x5d5a24),this['fire']('create:'+_0x1b23d5,_0x5d5a24),this['system']['app']['scripts']['on']('swap:'+_0x1b23d5,this['_scriptsIn'+'dex'][_0x1b23d5]['onSwap']),_0x580ce7['preloading']||(_0x5d5a24['enabled']&&!_0x5d5a24['_initializ'+'ed']&&(_0x5d5a24['_initializ'+'ed']=!(-0x1*0x2348+0x1a17*0x1+-0x1*-0x931),_0x5d5a24['initialize']&&this['_scriptMet'+'hod'](_0x5d5a24,uu)),_0x5d5a24['enabled']&&!_0x5d5a24['_postIniti'+'alized']&&(_0x5d5a24['_postIniti'+'alized']=!(0x4b1+0xb3*0x1+0x3*-0x1cc),_0x5d5a24['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x5d5a24,pu))),_0x5d5a24;}w['warn']('script\x20\x27'+_0x1b23d5+('\x27\x20is\x20alrea'+'dy\x20added\x20t'+'o\x20entity\x20\x27')+this['entity']['name']+'\x27');}else this['_scriptsIn'+'dex'][_0x1b23d5]={'awaiting':!(0x16f*-0x2+0x1445+0x87*-0x21),'ind':this['_scripts']['length']},w['warn']('script\x20\x27'+_0x1b23d5+('\x27\x20is\x20not\x20f'+'ound,\x20awai'+'ting\x20it\x20to'+'\x20be\x20added\x20'+'to\x20registr'+'y'));return null;}['destroy'](_0x256232){let _0x519d4d=_0x256232,_0x1ccf0a=_0x256232;typeof _0x1ccf0a=='string'?_0x1ccf0a=this['system']['app']['scripts']['get'](_0x1ccf0a):_0x1ccf0a&&(_0x519d4d=_0x1ccf0a['__name']);const _0xe454e1=this['_scriptsIn'+'dex'][_0x519d4d];if(delete this['_scriptsIn'+'dex'][_0x519d4d],!_0xe454e1)return!(0x827+-0x89*0x25+0x13*0x9d);this['_attribute'+'DataMap']['delete'](_0x519d4d);const _0x44d7b5=_0xe454e1['instance'];if(_0x44d7b5&&!_0x44d7b5['_destroyed']){if(_0x44d7b5['enabled']=!(0xa31+0xb3*0xf+-0x14ad),_0x44d7b5['_destroyed']=!(-0x9*-0x1b5+0x1413+0x9*-0x3f0),this['_isLooping'+'ThroughScr'+'ipts'])this['_destroyed'+'Scripts']['push'](_0x44d7b5);else{const _0x47ee2a=this['_removeScr'+'iptInstanc'+'e'](_0x44d7b5);_0x47ee2a>=0x11d9+-0x7e4*-0x3+0x2985*-0x1&&this['_resetExec'+'utionOrder'](_0x47ee2a,this['_scripts']['length']);}}return this['system']['app']['scripts']['off']('swap:'+_0x519d4d,_0xe454e1['onSwap']),delete this[_0x519d4d],this['fire']('destroy',_0x519d4d,_0x44d7b5||null),this['fire']('destroy:'+_0x519d4d,_0x44d7b5||null),_0x44d7b5&&_0x44d7b5['fire']('destroy'),!(-0x12df+0x62c*-0x3+0x2563);}['swap'](_0x39a5c7){let _0x18b051=_0x39a5c7,_0x3c5a47=_0x39a5c7;typeof _0x3c5a47=='string'?_0x3c5a47=this['system']['app']['scripts']['get'](_0x3c5a47):_0x3c5a47&&(_0x18b051=_0x3c5a47['__name']);const _0x51fd8c=this['_scriptsIn'+'dex'][_0x18b051];if(!_0x51fd8c||!_0x51fd8c['instance'])return!(-0x4ee+-0x114+0x603);const _0x4510fe=_0x51fd8c['instance'],_0x49508e=this['_scripts']['indexOf'](_0x4510fe),_0x534769=new _0x3c5a47({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x4510fe['enabled'],'attributes':_0x4510fe['__attribut'+'es']});return _0x534769['swap']?(this['initialize'+'Attributes'](_0x534769),this['_scripts'][_0x49508e]=_0x534769,this['_scriptsIn'+'dex'][_0x18b051]['instance']=_0x534769,this[_0x18b051]=_0x534769,_0x534769['__executio'+'nOrder']=_0x49508e,_0x4510fe['update']&&this['_updateLis'+'t']['remove'](_0x4510fe),_0x4510fe['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x4510fe),_0x534769['update']&&this['_updateLis'+'t']['insert'](_0x534769),_0x534769['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x534769),this['_scriptMet'+'hod'](_0x534769,XO,_0x4510fe),this['fire']('swap',_0x18b051,_0x534769),this['fire']('swap:'+_0x18b051,_0x534769),!(0xb*-0x23c+-0x5e0+-0x2*-0xf3a)):!(-0x5ca+-0x3*-0xbd7+-0x1dba);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x5e9cd0,_0x3b29c8){var _0x4938ec,_0x5bc6ed,_0x1f1daf;const _0x1b7901=this['entity']['script'];for(const _0xfbb5a2 in _0x5e9cd0['_scriptsIn'+'dex']){const _0x1b577b=this['system']['app']['scripts']['get'](_0xfbb5a2);if(!_0x1b577b)continue;const _0x115cfa=_0x5e9cd0['_scriptsIn'+'dex'][_0xfbb5a2];if(!_0x115cfa||!_0x115cfa['instance'])continue;const _0x4e2e98=_0x1b7901[_0xfbb5a2]['__attribut'+'esRaw']??_0x1b7901['_attribute'+'DataMap']['get'](_0xfbb5a2),_0x3e3e8f=_0x1b7901[_0xfbb5a2]['__attribut'+'es'];if(!_0x4e2e98&&!_0x3e3e8f)continue;const _0x28a294=!!_0x4e2e98,_0x48f7d9=_0x115cfa['instance']['__attribut'+'es']??_0x1b7901['_attribute'+'DataMap']['get'](_0xfbb5a2);for(const _0x318a76 in _0x48f7d9){if(!_0x48f7d9[_0x318a76])continue;const _0x570dc2=((_0x4938ec=_0x1b577b['attributes'])==null?void(-0x123e+0x12e*-0x16+0x2c32):_0x4938ec['get'](_0x318a76))??((_0x1f1daf=(_0x5bc6ed=this['system']['app']['scripts']['getSchema'](_0xfbb5a2))==null?void(0x1ec1+0x10b6+-0x1a3*0x1d):_0x5bc6ed['attributes'])==null?void(0x1ac1*0x1+-0x18*-0x142+-0x38f1):_0x1f1daf[_0x318a76]);if(_0x570dc2){if(_0x570dc2['type']==='entity')this['_resolveEn'+'tityScript'+'Attribute'](_0x570dc2,_0x318a76,_0x48f7d9[_0x318a76],_0x28a294,_0x4e2e98||_0x3e3e8f,_0x3b29c8);else{if(_0x570dc2['type']==='json'&&Array['isArray'](_0x570dc2['schema'])){const _0x36b8aa=_0x48f7d9[_0x318a76],_0x2e350a=_0x4e2e98?_0x4e2e98[_0x318a76]:_0x3e3e8f[_0x318a76];for(let _0x10a6d6=0x1db1+-0x7*0x4d2+-0x11*-0x3d;_0x10a6d6<_0x570dc2['schema']['length'];_0x10a6d6++){const _0x4a9448=_0x570dc2['schema'][_0x10a6d6];if(_0x4a9448['type']==='entity'){if(_0x570dc2['array']){for(let _0x174fc8=0xafc+-0x455+0x1*-0x6a7;_0x174fc8<_0x36b8aa['length'];_0x174fc8++)this['_resolveEn'+'tityScript'+'Attribute'](_0x4a9448,_0x4a9448['name'],_0x36b8aa[_0x174fc8][_0x4a9448['name']],_0x28a294,_0x2e350a[_0x174fc8],_0x3b29c8);}else this['_resolveEn'+'tityScript'+'Attribute'](_0x4a9448,_0x4a9448['name'],_0x36b8aa[_0x4a9448['name']],_0x28a294,_0x2e350a,_0x3b29c8);}}}}}}}}['move'](_0x2d4281,_0x18ec80){const _0x427992=this['_scripts']['length'];if(_0x18ec80>=_0x427992||_0x18ec80<-0xa*0x283+0x4*0x2d7+-0xdc2*-0x1)return!(0x1*0x1c3d+0xb*0x8+0x4*-0x725);let _0x421a8c=_0x2d4281,_0x2e16b9=_0x2d4281;typeof _0x2e16b9!='string'?_0x2e16b9=_0x2d4281['__name']:_0x421a8c=null;const _0x51da22=this['_scriptsIn'+'dex'][_0x2e16b9];if(!_0x51da22||!_0x51da22['instance'])return!(-0xf70+0x2006+0x5*-0x351);const _0x4592dd=_0x51da22['instance'];if(_0x421a8c&&!(_0x4592dd instanceof _0x421a8c))return!(-0x19*0x6b+-0x989*0x1+0x13fd);const _0x2dd9cf=this['_scripts']['indexOf'](_0x4592dd);return _0x2dd9cf===-(-0x1b70+-0x15f0+-0x1*-0x3161)||_0x2dd9cf===_0x18ec80?!(0xf7*0x9+-0x2346*-0x1+-0x2bf4):(this['_scripts']['splice'](_0x18ec80,-0x3*0x7fa+0x1*0x13c9+-0x1*-0x425,this['_scripts']['splice'](_0x2dd9cf,0x3*0x446+0x1c4+-0xe95*0x1)[0x35*-0x4a+-0x17e5+0x2737]),this['_resetExec'+'utionOrder'](-0x1*-0x182d+0x68d+0xa3e*-0x3,_0x427992),this['_updateLis'+'t']['sort'](),this['_postUpdat'+'eList']['sort'](),this['fire']('move',_0x2e16b9,_0x4592dd,_0x18ec80,_0x2dd9cf),this['fire']('move:'+_0x2e16b9,_0x4592dd,_0x18ec80,_0x2dd9cf),!(-0x448+-0x1221+0x1669*0x1));}}h(Ii,'EVENT_CREA'+'TE','create'),h(Ii,'EVENT_DEST'+'ROY','destroy'),h(Ii,'EVENT_ENAB'+'LE','enable'),h(Ii,'EVENT_DISA'+'BLE','disable'),h(Ii,'EVENT_REMO'+'VE','remove'),h(Ii,'EVENT_STAT'+'E','state'),h(Ii,'EVENT_MOVE','move'),h(Ii,'EVENT_ERRO'+'R','error');class YO{constructor(){this['enabled']=!(0xe5d*-0x2+0xf1*-0x2+0x1e9c);}}const KO='_onInitial'+'izeAttribu'+'tes',ZO='_onInitial'+'ize',QO='_onPostIni'+'tialize',JO='_onUpdate',eF='_onPostUpd'+'ate';let mc=-0x1909+-0x1*-0x1e23+-0x51a;class tF extends ct{constructor(_0x2ccf2b){super(_0x2ccf2b),this['id']='script',this['ComponentT'+'ype']=Ii,this['DataType']=YO,this['_component'+'s']=new Bc({'sortBy':'_execution'+'Order'}),this['_enabledCo'+'mponents']=new Bc({'sortBy':'_execution'+'Order'}),this['preloading']=!(0x2597+0x1d3d+0x1*-0x42d4),this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this),this['app']['systems']['on']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['on']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x1e0bd4,_0x480bb9){if(_0x1e0bd4['_execution'+'Order']=mc++,this['_component'+'s']['append'](_0x1e0bd4),mc>Number['MAX_SAFE_I'+'NTEGER']&&this['_resetExec'+'utionOrder'](),_0x1e0bd4['enabled']=_0x480bb9['hasOwnProp'+'erty']('enabled')?!!_0x480bb9['enabled']:!(0x1*0x1a11+0x1de*0x14+-0x3f69*0x1),_0x1e0bd4['enabled']&&_0x1e0bd4['entity']['enabled']&&this['_enabledCo'+'mponents']['append'](_0x1e0bd4),_0x480bb9['hasOwnProp'+'erty']('order')&&_0x480bb9['hasOwnProp'+'erty']('scripts')){_0x1e0bd4['_scriptsDa'+'ta']=_0x480bb9['scripts'];for(let _0x52480d=0x7*-0x1d+0x1e*-0x13e+-0x1*-0x260f;_0x52480d<_0x480bb9['order']['length'];_0x52480d++)_0x1e0bd4['create'](_0x480bb9['order'][_0x52480d],{'enabled':_0x480bb9['scripts'][_0x480bb9['order'][_0x52480d]]['enabled'],'attributes':_0x480bb9['scripts'][_0x480bb9['order'][_0x52480d]]['attributes'],'preloading':this['preloading']});}}['cloneCompo'+'nent'](_0x32379f,_0x45ea5e){var _0x196c05;const _0x260c25=[],_0x4de1f7={};for(let _0x2bc845=0x1*-0x1307+-0x37e+0x1685;_0x2bc845<_0x32379f['script']['_scripts']['length'];_0x2bc845++){const _0x33a8d1=_0x32379f['script']['_scripts'][_0x2bc845],_0x573e75=_0x33a8d1['__scriptTy'+'pe']['__name'];_0x260c25['push'](_0x573e75);const _0x349efd=((_0x196c05=_0x32379f['script']['_attribute'+'DataMap'])==null?void(-0x1f*0x139+0x23fd+0x1ea):_0x196c05['get'](_0x573e75))||{};for(const _0x3366b7 in _0x33a8d1['__attribut'+'es'])_0x349efd[_0x3366b7]=_0x33a8d1['__attribut'+'es'][_0x3366b7];_0x4de1f7[_0x573e75]={'enabled':_0x33a8d1['_enabled'],'attributes':_0x349efd};}for(const _0x2d863e in _0x32379f['script']['_scriptsIn'+'dex'])_0x2d863e['awaiting']&&_0x260c25['splice'](_0x2d863e['ind'],-0x283*0x1+-0x322*-0x1+-0x9f,_0x2d863e);const _0xdec530={'enabled':_0x32379f['script']['enabled'],'order':_0x260c25,'scripts':_0x4de1f7};return this['addCompone'+'nt'](_0x45ea5e,_0xdec530);}['_resetExec'+'utionOrder'](){mc=0x1f7+-0x1f*-0x6+0x1*-0x2b1;for(let _0x163efd=0x341*0x2+0xcbc+-0x66a*0x3,_0x44e769=this['_component'+'s']['length'];_0x163efd<_0x44e769;_0x163efd++)this['_component'+'s']['items'][_0x163efd]['_execution'+'Order']=mc++;}['_callCompo'+'nentMethod'](_0xba8a55,_0x191089,_0x4882b7){for(_0xba8a55['loopIndex']=0x1a*-0x145+-0x20*-0x113+-0x15e;_0xba8a55['loopIndex']<_0xba8a55['length'];_0xba8a55['loopIndex']++)_0xba8a55['items'][_0xba8a55['loopIndex']][_0x191089](_0x4882b7);}['_onInitial'+'ize'](){this['preloading']=!(-0x1*0x23d6+-0x9*-0x1e4+0x3d*0x4f),this['_callCompo'+'nentMethod'](this['_component'+'s'],KO),this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],ZO);}['_onPostIni'+'tialize'](){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],QO);}['_onUpdate'](_0x456110){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],JO,_0x456110);}['_onPostUpd'+'ate'](_0x450e11){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],eF,_0x450e11);}['_addCompon'+'entToEnabl'+'ed'](_0x3d4649){this['_enabledCo'+'mponents']['insert'](_0x3d4649);}['_removeCom'+'ponentFrom'+'Enabled'](_0x219ed0){this['_enabledCo'+'mponents']['remove'](_0x219ed0);}['_onBeforeR'+'emove'](_0x1110ca,_0x1d93f5){this['_component'+'s']['items']['indexOf'](_0x1d93f5)>=0x12ad*-0x2+-0x162a+0x3b84&&_0x1d93f5['_onBeforeR'+'emove'](),this['_removeCom'+'ponentFrom'+'Enabled'](_0x1d93f5),this['_component'+'s']['remove'](_0x1d93f5);}['destroy'](){super['destroy'](),this['app']['systems']['off']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['off']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}class kv extends we{constructor(_0x17d3b9,_0x5eca05){super(_0x17d3b9,_0x5eca05),h(this,'_layers',[Ji]),h(this,'_instance',null),h(this,'_materialT'+'mp',null),h(this,'_highQuali'+'tySH',!(0x18f9*-0x1+-0x1*-0x1f35+-0x85*0xc)),h(this,'_customAab'+'b',null),h(this,'_assetRefe'+'rence'),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_castShado'+'ws',!(-0x12c6+-0xbce*0x1+-0x1e95*-0x1)),(this['_assetRefe'+'rence']=new rl('asset',this,_0x17d3b9['app']['assets'],{'add':this['_onGSplatA'+'ssetAdded'],'load':this['_onGSplatA'+'ssetLoad'],'remove':this['_onGSplatA'+'ssetRemove'],'unload':this['_onGSplatA'+'ssetUnload']},this),_0x5eca05['on']('remove',this['onRemoveCh'+'ild'],this),_0x5eca05['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x5eca05['on']('insert',this['onInsertCh'+'ild'],this),_0x5eca05['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['customAabb'](_0x4289ba){var _0x58ad52,_0x2ac2f6;this['_customAab'+'b']=_0x4289ba,(_0x2ac2f6=(_0x58ad52=this['_instance'])==null?void(-0xad8+0x5b9+0x13*0x45):_0x58ad52['meshInstan'+'ce'])==null||_0x2ac2f6['setCustomA'+'abb'](this['_customAab'+'b']);}get['customAabb'](){return this['_customAab'+'b'];}set['instance'](_0x390b57){if(this['destroyIns'+'tance'](),this['_instance']=_0x390b57,this['_instance']){const _0xa70183=this['_instance']['meshInstan'+'ce'];_0xa70183['node']||(_0xa70183['node']=this['entity']),_0xa70183['castShadow']=this['_castShado'+'ws'],_0xa70183['setCustomA'+'abb'](this['_customAab'+'b']),this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['instance'](){return this['_instance'];}set['material'](_0x3e125e){this['_instance']?this['_instance']['material']=_0x3e125e:this['_materialT'+'mp']=_0x3e125e;}get['material'](){var _0x20953b;return((_0x20953b=this['_instance'])==null?void(-0x1*0xdc3+0xa3a+0x389*0x1):_0x20953b['material'])??this['_materialT'+'mp']??null;}set['highQualit'+'ySH'](_0x5eb62d){_0x5eb62d!==this['_highQuali'+'tySH']&&(this['_highQuali'+'tySH']=_0x5eb62d,this['_instance']&&this['_instance']['setHighQua'+'litySH'](_0x5eb62d));}get['highQualit'+'ySH'](){return this['_highQuali'+'tySH'];}set['castShadow'+'s'](_0x41ee4f){var _0x1fe056;if(this['_castShado'+'ws']!==_0x41ee4f){const _0x2bedae=(_0x1fe056=this['instance'])==null?void(0x529*-0x1+0x2*0x109b+-0x1c0d):_0x1fe056['meshInstan'+'ce'];if(_0x2bedae){const _0x84dd01=this['layers'],_0x394192=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x41ee4f)for(let _0x6fd0f=-0x21e3+-0x25a3+-0xa*-0x727;_0x6fd0f<_0x84dd01['length'];_0x6fd0f++){const _0x30ba17=_0x394192['layers']['getLayerBy'+'Id'](this['layers'][_0x6fd0f]);_0x30ba17&&_0x30ba17['removeShad'+'owCasters']([_0x2bedae]);}if(_0x2bedae['castShadow']=_0x41ee4f,!this['_castShado'+'ws']&&_0x41ee4f)for(let _0x31685d=-0x426*-0x2+-0x2*-0x883+0x2*-0xca9;_0x31685d<_0x84dd01['length'];_0x31685d++){const _0x5bd9a2=_0x394192['layers']['getLayerBy'+'Id'](_0x84dd01[_0x31685d]);_0x5bd9a2&&_0x5bd9a2['addShadowC'+'asters']([_0x2bedae]);}}this['_castShado'+'ws']=_0x41ee4f;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['layers'](_0x15beef){this['removeFrom'+'Layers'](),this['_layers']['length']=-0x4*-0x39a+-0x34*0x3d+-0x204;for(let _0x2a602f=0xff+0x1ac*0x15+-0x241b;_0x2a602f<_0x15beef['length'];_0x2a602f++)this['_layers'][_0x2a602f]=_0x15beef[_0x2a602f];!this['enabled']||!this['entity']['enabled']||this['addToLayer'+'s']();}get['layers'](){return this['_layers'];}set['asset'](_0x59da60){const _0x3a9793=_0x59da60 instanceof pe?_0x59da60['id']:_0x59da60;this['_assetRefe'+'rence']['id']!==_0x3a9793&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onGSplatA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x3a9793,this['_assetRefe'+'rence']['asset']&&this['_onGSplatA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['destroyIns'+'tance'](){var _0xb6dcbc;this['_instance']&&(this['removeFrom'+'Layers'](),(_0xb6dcbc=this['_instance'])==null||_0xb6dcbc['destroy'](),this['_instance']=null);}['addToLayer'+'s'](){var _0x148b55,_0xf76a02;const _0x1e7e39=(_0x148b55=this['instance'])==null?void(0xb02+-0x2*0x866+0x5ca):_0x148b55['meshInstan'+'ce'];if(_0x1e7e39){const _0x17c269=this['system']['app']['scene']['layers'];for(let _0x2d1077=-0x2249*0x1+-0x1*0x2309+-0x26*-0x1d3;_0x2d1077<this['_layers']['length'];_0x2d1077++)(_0xf76a02=_0x17c269['getLayerBy'+'Id'](this['_layers'][_0x2d1077]))==null||_0xf76a02['addMeshIns'+'tances']([_0x1e7e39]);}}['removeFrom'+'Layers'](){var _0x15efab,_0x4b44de;const _0x1c1f5e=(_0x15efab=this['instance'])==null?void(-0x3*0x1d9+0x2678+-0x20ed*0x1):_0x15efab['meshInstan'+'ce'];if(_0x1c1f5e){const _0x52bd9a=this['system']['app']['scene']['layers'];for(let _0x1d18f4=0x7*0x2e7+0x1*0x20a1+-0x34f2;_0x1d18f4<this['_layers']['length'];_0x1d18f4++)(_0x4b44de=_0x52bd9a['getLayerBy'+'Id'](this['_layers'][_0x1d18f4]))==null||_0x4b44de['removeMesh'+'Instances']([_0x1c1f5e]);}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_instance']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyIns'+'tance'](),this['asset']=null,this['_assetRefe'+'rence']['id']=null,this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x2e1642,_0x1c06ec){this['addToLayer'+'s'](),_0x2e1642['off']('add',this['onLayerAdd'+'ed'],this),_0x2e1642['off']('remove',this['onLayerRem'+'oved'],this),_0x1c06ec['on']('add',this['onLayerAdd'+'ed'],this),_0x1c06ec['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x2a7384){this['layers']['indexOf'](_0x2a7384['id'])<-0x541+-0x1eb2+0x1*0x23f3||this['_instance']&&_0x2a7384['addMeshIns'+'tances'](this['_instance']['meshInstan'+'ce']);}['onLayerRem'+'oved'](_0x4d57f4){this['layers']['indexOf'](_0x4d57f4['id'])<-0x2536*-0x1+0x146a+-0x2*0x1cd0||this['_instance']&&_0x4d57f4['removeMesh'+'Instances'](this['_instance']['meshInstan'+'ce']);}['onEnable'](){const _0x2729cb=this['system']['app']['scene'],_0x3dba9c=_0x2729cb['layers'];this['_evtLayers'+'Changed']=_0x2729cb['on']('set:layers',this['onLayersCh'+'anged'],this),_0x3dba9c&&(this['_evtLayerA'+'dded']=_0x3dba9c['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x3dba9c['on']('remove',this['onLayerRem'+'oved'],this)),this['_instance']?this['addToLayer'+'s']():this['asset']&&this['_onGSplatA'+'ssetAdded']();}['onDisable'](){var _0x47b568,_0x229bf9,_0x1b14b7;const _0xf58b7c=this['system']['app']['scene']['layers'];(_0x47b568=this['_evtLayers'+'Changed'])==null||_0x47b568['off'](),this['_evtLayers'+'Changed']=null,_0xf58b7c&&((_0x229bf9=this['_evtLayerA'+'dded'])==null||_0x229bf9['off'](),this['_evtLayerA'+'dded']=null,(_0x1b14b7=this['_evtLayerR'+'emoved'])==null||_0x1b14b7['off'](),this['_evtLayerR'+'emoved']=null),this['removeFrom'+'Layers']();}['hide'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(0x18c5+0x2*0xd7f+-0x109*0x32));}['show'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(0x2ad*0x3+0x1df4+-0x3*0xca9));}['_onGSplatA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onGSplatA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onGSplatA'+'ssetLoad'](){this['destroyIns'+'tance']();const _0xaebb1b=this['_assetRefe'+'rence']['asset'];_0xaebb1b&&(this['instance']=_0xaebb1b['resource']['createInst'+'ance'](_0xaebb1b['resource'],{'material':this['_materialT'+'mp'],'highQualitySH':this['_highQuali'+'tySH']}),this['_materialT'+'mp']=null,this['customAabb']=this['instance']['resource']['aabb']['clone']());}['_onGSplatA'+'ssetUnload'](){this['destroyIns'+'tance']();}['_onGSplatA'+'ssetRemove'](){this['_onGSplatA'+'ssetUnload']();}}class sF{constructor(){this['enabled']=!(0x32a*-0x1+0x1961*0x1+-0x1637);}}const mu=['enabled'],mo=['castShadow'+'s','material','highQualit'+'ySH','asset','layers'];class iF extends ct{constructor(_0x129a59){super(_0x129a59),this['id']='gsplat',this['ComponentT'+'ype']=kv,this['DataType']=sF,this['schema']=mu,this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x52d016,_0x152406,_0x22a723){_0x152406['layers']&&_0x152406['layers']['length']&&(_0x152406['layers']=_0x152406['layers']['slice'](-0x13ac+0xb*0x2e+0x11b2));for(let _0x45a1c6=0xd3a+-0xccb+-0x6f;_0x45a1c6<mo['length'];_0x45a1c6++)_0x152406['hasOwnProp'+'erty'](mo[_0x45a1c6])&&(_0x52d016[mo[_0x45a1c6]]=_0x152406[mo[_0x45a1c6]]);_0x152406['aabbCenter']&&_0x152406['aabbHalfEx'+'tents']&&(_0x52d016['customAabb']=new De(new D(_0x152406['aabbCenter']),new D(_0x152406['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x52d016,_0x152406,mu);}['cloneCompo'+'nent'](_0xcc66e0,_0x1159ca){const _0x1e7477=_0xcc66e0['gsplat'],_0x3c6001={};mo['forEach'](_0x457560=>{_0x457560==='material'?_0x3c6001[_0x457560]=_0x1e7477[_0x457560]['clone']():_0x3c6001[_0x457560]=_0x1e7477[_0x457560];}),_0x3c6001['enabled']=_0x1e7477['enabled'];const _0x704fef=this['addCompone'+'nt'](_0x1159ca,_0x3c6001);return _0x1e7477['customAabb']&&(_0x704fef['customAabb']=_0x1e7477['customAabb']['clone']()),_0x704fef;}['onRemove'](_0xeb78a6,_0xea0493){_0xea0493['onRemove']();}}we['_buildAcce'+'ssors'](kv['prototype'],mu);class Zp extends me{constructor(){super(...arguments),h(this,'_meshes',null);}set['meshes'](_0x5d5e39){this['decRefMesh'+'es'](),this['_meshes']=_0x5d5e39,this['incRefMesh'+'es'](),this['fire']('set:meshes',_0x5d5e39);}get['meshes'](){return this['_meshes'];}['destroy'](){this['meshes']=null;}['decRefMesh'+'es'](){var _0x248f38;(_0x248f38=this['_meshes'])==null||_0x248f38['forEach']((_0x29204d,_0x325d7f)=>{_0x29204d&&(_0x29204d['decRefCoun'+'t'](),_0x29204d['refCount']<-0x1550+-0x297+0x22*0xb4&&(_0x29204d['destroy'](),this['_meshes'][_0x325d7f]=null));});}['incRefMesh'+'es'](){var _0x124106;(_0x124106=this['_meshes'])==null||_0x124106['forEach'](_0x40cbef=>{_0x40cbef==null||_0x40cbef['incRefCoun'+'t']();});}}h(Zp,'EVENT_SETM'+'ESHES','set:meshes');function Oc(_0x43a2f3){const _0x44b8df=this;if(!_0x44b8df['resource'])return;const _0x5635db=_0x43a2f3['resource'],_0x1f8888=_0x5635db['renders']&&_0x5635db['renders'][_0x44b8df['data']['renderInde'+'x']];_0x1f8888&&(_0x44b8df['resource']['meshes']=_0x1f8888['resource']['meshes']);}function Bg(_0x2977f6){const _0x5af98c=this;_0x5af98c['registry']['off']('load:'+_0x2977f6['id'],Oc,_0x5af98c),_0x5af98c['registry']['on']('load:'+_0x2977f6['id'],Oc,_0x5af98c),_0x5af98c['registry']['off']('remove:'+_0x2977f6['id'],zg,_0x5af98c),_0x5af98c['registry']['once']('remove:'+_0x2977f6['id'],zg,_0x5af98c),_0x2977f6['resource']?Oc['call'](_0x5af98c,_0x2977f6):_0x5af98c['registry']['load'](_0x2977f6);}function zg(_0x25c04c){const _0x2d376d=this;_0x2d376d['registry']['off']('load:'+_0x25c04c['id'],Oc,_0x2d376d),_0x2d376d['resource']&&_0x2d376d['resource']['destroy']();}class rF extends Qe{constructor(_0x545578){super(_0x545578,'render'),this['_registry']=_0x545578['assets'];}['open'](_0x5273a3,_0x2d5335){return new Zp();}['patch'](_0x109022,_0x468e01){if(!_0x109022['data']['containerA'+'sset'])return;const _0x4facef=_0x468e01['get'](_0x109022['data']['containerA'+'sset']);if(!_0x4facef){_0x468e01['once']('add:'+_0x109022['data']['containerA'+'sset'],Bg,_0x109022);return;}Bg['call'](_0x109022,_0x4facef);}}class Uv{constructor(_0x146f3b,_0x4ef7fb,_0x1321e4,_0x26c634){this['_paths']=_0x146f3b,this['_input']=_0x4ef7fb,this['_output']=_0x1321e4,this['_interpola'+'tion']=_0x26c634;}get['paths'](){return this['_paths'];}get['input'](){return this['_input'];}get['output'](){return this['_output'];}get['interpolat'+'ion'](){return this['_interpola'+'tion'];}}class uh{constructor(_0xc1db47,_0x583ac0){this['_component'+'s']=_0xc1db47,this['_data']=_0x583ac0;}get['components'](){return this['_component'+'s'];}get['data'](){return this['_data'];}}function aF(_0x5047cf,_0x38b9d8){let _0x5edf30;const _0x96c591=(_0x383934,_0x18db2a)=>{switch(_0x18db2a){case _0x5edf30['DT_INT8']:return new Int8Array(_0x383934['buffer'],_0x383934['byteOffset'],_0x383934['byteLength']);case _0x5edf30['DT_INT16']:return new Int16Array(_0x383934['buffer'],_0x383934['byteOffset'],_0x383934['byteLength']/(-0x1c30+0x1e56+0x4*-0x89));case _0x5edf30['DT_INT32']:return new Int32Array(_0x383934['buffer'],_0x383934['byteOffset'],_0x383934['byteLength']/(-0x71*-0x41+0x4d*-0xa+-0x19ab));case _0x5edf30['DT_UINT8']:return new Uint8Array(_0x383934['buffer'],_0x383934['byteOffset'],_0x383934['byteLength']);case _0x5edf30['DT_UINT16']:return new Uint16Array(_0x383934['buffer'],_0x383934['byteOffset'],_0x383934['byteLength']/(-0x2a4+-0x1c68+0x1f0e));case _0x5edf30['DT_UINT32']:return new Uint32Array(_0x383934['buffer'],_0x383934['byteOffset'],_0x383934['byteLength']/(0x1ec8+-0x159f+-0x925));case _0x5edf30['DT_FLOAT32']:return new Float32Array(_0x383934['buffer'],_0x383934['byteOffset'],_0x383934['byteLength']/(0x1bc8+0x127*-0x2+-0x1976));}return null;},_0x5e9e5d=_0x3b46d9=>{switch(_0x3b46d9){case _0x5edf30['DT_INT8']:return-0x5*-0x512+-0x143*0x9+-0xdfe;case _0x5edf30['DT_INT16']:return 0x1*0x997+0xc35+-0x15ca;case _0x5edf30['DT_INT32']:return-0x17ff+-0x1*-0xd35+0xace;case _0x5edf30['DT_UINT8']:return-0x1*-0x14c0+-0x1*0x76f+0x10*-0xd5;case _0x5edf30['DT_UINT16']:return-0x643*-0x3+0xa0*0x29+-0x2c67;case _0x5edf30['DT_UINT32']:return-0x1337*-0x1+0x16b8*-0x1+0x385;case _0x5edf30['DT_FLOAT32']:return 0x1869+0x1d46+-0x35ab;}return-0x2182+-0x1*0x43f+-0xc96*-0x3;},_0x512a8f=_0x5cc595=>_0x5cc595['num_compon'+'ents']()*_0x5e9e5d(_0x5cc595['data_type']()),_0x4a4122={0x0:0x0,0x1:0x1,0x5:0x2,0x2:0x3,0x7:0x4,0x8:0x5,0x4:0x6,0x3:0x7},_0x838137=(_0x46a7be,_0x50768e)=>{const _0x3a21ad=(_0x566179,_0x16d94d,_0x432fcb)=>{_0x566179[-0x20c3+0x84*-0x2+-0x1*-0x21cb]=_0x16d94d[0xaee+0x1*0x18e5+-0x3fb*0x9]-_0x432fcb[0xa*0x1f1+-0xb*0x2e7+0x1*0xc83],_0x566179[-0x110*0x11+0xe45*-0x2+0x61*0x7b]=_0x16d94d[-0xd*-0xd4+-0xe9*0x1+-0x9da]-_0x432fcb[-0x1632+-0x1165+0xe*0x2d4],_0x566179[-0xe43*0x1+-0x47*-0xa+0xb7f]=_0x16d94d[-0x17c7*0x1+0x21d7+0x9*-0x11e]-_0x432fcb[-0x127*-0x13+-0x1408+-0x19*0x13];},_0x4bc63b=(_0x4b3165,_0x15a8ba,_0x2d42b8)=>{_0x4b3165[-0x4e9+-0x2*0x571+-0xfcb*-0x1]=_0x15a8ba[0x29*0x61+0x5f4+-0x64*0x37]*_0x2d42b8[0x136*-0x1c+-0x9b*-0x17+0x13fd]-_0x2d42b8[-0x17*0xa3+-0x5*0x317+-0x73*-0x43]*_0x15a8ba[-0x193+-0x165b*0x1+0x17f0],_0x4b3165[0x10e0+0x2279+-0x3358]=_0x15a8ba[0x4*0x8a0+0x9*0x187+-0x303d]*_0x2d42b8[-0x1065+-0x1*-0xe53+0x212]-_0x2d42b8[0x18*-0x2+0x2428+-0x23f6]*_0x15a8ba[-0x105a*-0x1+-0x11*0x185+0x97b],_0x4b3165[-0x22*-0xcd+-0xa49+-0x11*0xff]=_0x15a8ba[0x4ac*-0x1+-0xb70+-0x407*-0x4]*_0x2d42b8[-0x10e1*-0x1+0x8*-0x470+0x12a0]-_0x2d42b8[0xaba+0x1285+-0x1d3f]*_0x15a8ba[-0x126a*0x1+0x46c*0x5+0x3b1*-0x1];},_0x40e634=(_0xc2c94b,_0x2a84bb)=>{const _0x16915a=_0xc2c94b[_0x2a84bb+(-0x465*0x4+-0x628*0x6+0x3684)],_0x527082=_0xc2c94b[_0x2a84bb+(0xfee*0x2+-0x71f*0x2+0x3*-0x5df)],_0x1df1f5=_0xc2c94b[_0x2a84bb+(-0x59c+-0x3a2*-0x2+-0x1a6)],_0x24814d=(0x781+0x1a80+-0x2200)/Math['sqrt'](_0x16915a*_0x16915a+_0x527082*_0x527082+_0x1df1f5*_0x1df1f5);_0xc2c94b[_0x2a84bb+(0x26*-0x9f+0x1*-0x311+-0x1*-0x1aab)]*=_0x24814d,_0xc2c94b[_0x2a84bb+(-0x197d+0x25e3+0x1*-0xc65)]*=_0x24814d,_0xc2c94b[_0x2a84bb+(0x1819*-0x1+0xf59*0x2+0x7*-0xf1)]*=_0x24814d;},_0x4a9340=(_0xa0f033,_0x5cf293,_0x498496)=>{for(let _0x744da8=-0x20*0x124+-0x1837*0x1+0x3cb7*0x1;_0x744da8<-0x1da5*0x1+0xd*-0x2f9+-0xd*-0x541;++_0x744da8)_0xa0f033[_0x744da8]=_0x5cf293[_0x498496+_0x744da8];},_0xc5ac7=_0x50768e['length']/(-0x1*0x23ea+0x1ff8+-0x3f5*-0x1),_0x32b330=_0x46a7be['length']/(0x2*-0x48d+0x1*0x224b+-0x192e),_0xdfeed2=new Float32Array(_0x46a7be['length']),_0x2ce765=[0xa21*-0x2+0x25c5+-0x1183,-0x12db*-0x1+0x10e7*-0x1+0x32*-0xa,-0x2002*0x1+0x4a2*-0x1+0x24a4],_0x56ad18=[0x3*-0x871+0x446+0x150d,-0x1*0x9da+0x903+0xd7,-0x1d*0x141+-0x1f*0xc2+-0xb*-0x571],_0x30d72d=[0x2*0x8ef+0x16*0xe+0x1*-0x1312,-0x137b+0x16f+-0x39c*-0x5,-0x21*-0x119+0x21d+-0x2656],_0x75d7b6=[-0x1abc+0x1*-0xd69+0xef*0x2b,0xb79*0x1+0x6ef*-0x4+0x1043,0x216d*-0x1+0x1410*-0x1+0x357d],_0x247469=[0x1845+-0x1e67+-0x1*-0x622,-0xe*-0x59+0x1c41+-0x3d*0x8b,0x7c*0x20+0x283*-0x8+-0x498*-0x1],_0x29f7f0=[-0x70e+-0x547+-0xc55*-0x1,-0x208d+-0xd61+0x2dee,0x7*0x4d+-0x1*0xc4f+0xa34];for(let _0x49e302=-0x1bb5*0x1+0x455+0xb*0x220;_0x49e302<_0xc5ac7;++_0x49e302){const _0x3cfc0e=_0x50768e[_0x49e302*(-0x2622+-0x1c95+0xb1f*0x6)+(0xd*-0x175+-0x2e4*-0x5+0x47d)]*(0x1eaa+-0x7b4+-0x16f3),_0x4e1149=_0x50768e[_0x49e302*(0x119*0x8+0x2651+-0x2f16)+(0x131c+0x99*-0x30+0x995)]*(0x51*-0x12+-0x1161*0x1+0x1716),_0x4974fb=_0x50768e[_0x49e302*(-0xdec+-0xc5*0xf+0x197a)+(0x1*-0xe24+-0x21aa+0x2fd0)]*(0x2043*-0x1+0xd*-0x73+0x261d);_0x4a9340(_0x2ce765,_0x46a7be,_0x3cfc0e),_0x4a9340(_0x56ad18,_0x46a7be,_0x4e1149),_0x4a9340(_0x30d72d,_0x46a7be,_0x4974fb),_0x3a21ad(_0x75d7b6,_0x56ad18,_0x2ce765),_0x3a21ad(_0x247469,_0x30d72d,_0x2ce765),_0x4bc63b(_0x29f7f0,_0x75d7b6,_0x247469),_0x40e634(_0x29f7f0,-0xe5*-0x21+0x10e7+0x1*-0x2e6c);for(let _0x23d130=0x5e8*0x4+0xcd1*0x2+0x18a1*-0x2;_0x23d130<-0x1*0x1fc8+0x253*0x7+0xf86;++_0x23d130)_0xdfeed2[_0x3cfc0e+_0x23d130]+=_0x29f7f0[_0x23d130],_0xdfeed2[_0x4e1149+_0x23d130]+=_0x29f7f0[_0x23d130],_0xdfeed2[_0x4974fb+_0x23d130]+=_0x29f7f0[_0x23d130];}for(let _0x5c3d7e=0xe44+-0x4c*0x2a+0x1cc*-0x1;_0x5c3d7e<_0x32b330;++_0x5c3d7e)_0x40e634(_0xdfeed2,_0x5c3d7e*(-0x60e+0x24b+0x3c6));return new Uint8Array(_0xdfeed2['buffer']);},_0x5f487f=_0x3544a5=>{const _0x53365e={},_0x28ae19=new _0x5edf30['DecoderBuf'+'fer']();_0x28ae19['Init'](_0x3544a5,_0x3544a5['length']);const _0x184eb6=new _0x5edf30['Decoder']();if(_0x184eb6['GetEncoded'+'GeometryTy'+'pe'](_0x28ae19)!==_0x5edf30['TRIANGULAR'+'_MESH'])return _0x53365e['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20mesh:\x20n'+'ot\x20a\x20mesh',_0x53365e;const _0x3c7f08=new _0x5edf30['Mesh'](),_0xb7332f=_0x184eb6['DecodeBuff'+'erToMesh'](_0x28ae19,_0x3c7f08);if(!_0xb7332f||!_0xb7332f['ok']()||_0x5edf30['getPointer'](_0x3c7f08)===0x10ea+-0x2085+0xf9b)return _0x53365e['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20asset',_0x53365e;const _0x3b620f=_0x3c7f08['num_faces']()*(0x18*0x45+0x67b+-0x18*0x8a),_0x3e9057=_0x3c7f08['num_points']()<=-0xa*0xbf+0x8793+-0x3ff1*-0x2,_0x46d146=_0x3b620f*(_0x3e9057?0x168f+-0x7c+-0x7*0x327:-0x2*-0x538+-0xa3c+-0x30),_0xe62da8=_0x5edf30['_malloc'](_0x46d146);_0x3e9057?(_0x184eb6['GetTriangl'+'esUInt16Ar'+'ray'](_0x3c7f08,_0x46d146,_0xe62da8),_0x53365e['indices']=new Uint16Array(_0x5edf30['HEAPU16']['buffer'],_0xe62da8,_0x3b620f)['slice']()['buffer']):(_0x184eb6['GetTriangl'+'esUInt32Ar'+'ray'](_0x3c7f08,_0x46d146,_0xe62da8),_0x53365e['indices']=new Uint32Array(_0x5edf30['HEAPU32']['buffer'],_0xe62da8,_0x3b620f)['slice']()['buffer']),_0x5edf30['_free'](_0xe62da8);const _0x477476=[];for(let _0x146579=0x1a2f*-0x1+0x1*-0xfb4+0x29e3;_0x146579<_0x3c7f08['num_attrib'+'utes']();++_0x146579)_0x477476['push'](_0x184eb6['GetAttribu'+'te'](_0x3c7f08,_0x146579));_0x477476['sort']((_0x178652,_0x4ccd12)=>(_0x4a4122[_0x178652['attribute_'+'type']()]??_0x4a4122['length'])-(_0x4a4122[_0x4ccd12['attribute_'+'type']()]??_0x4a4122['length'])),_0x53365e['attributes']=_0x477476['map'](_0x16b4e1=>_0x16b4e1['unique_id']());let _0x194bed=-0x19*0x14f+-0x1c42+0x1453*0x3;const _0x2ac5a1=_0x477476['map'](_0x1f6a56=>{const _0x2a1098=_0x194bed;return _0x194bed+=Math['ceil'](_0x512a8f(_0x1f6a56)/(0x21bd+-0x1*0x5bf+-0x1bfa))*(-0x1fc2+-0x91d*-0x1+0x16a9),_0x2a1098;}),_0x2426d4=_0x477476['some'](_0x2d3d7d=>_0x2d3d7d['attribute_'+'type']()===-0x1*-0x2669+0x1847+-0x9*0x6f7),_0x37792a=_0x2ac5a1[-0x2320+-0x3ca+-0x453*-0x9];if(!_0x2426d4){for(let _0x3f3fe1=-0x3bd*0x3+0x1eb6+-0x3e6*0x5;_0x3f3fe1<_0x2ac5a1['length'];++_0x3f3fe1)_0x2ac5a1[_0x3f3fe1]+=-0x5*0x3fd+-0x108f*0x1+0x248c;_0x194bed+=0x14ae*-0x1+-0x2670+0x1d95*0x2;}_0x53365e['vertices']=new ArrayBuffer(_0x3c7f08['num_points']()*_0x194bed);const _0x1061b8=new Uint8Array(_0x53365e['vertices']);for(let _0x5d45d1=0x101*0x9+-0x1d70+-0x3*-0x6cd;_0x5d45d1<_0x3c7f08['num_attrib'+'utes']();++_0x5d45d1){const _0x9718cf=_0x477476[_0x5d45d1],_0x29c104=_0x512a8f(_0x9718cf),_0x2eeedc=_0x3c7f08['num_points']()*_0x29c104,_0x4834f3=_0x5edf30['_malloc'](_0x2eeedc);_0x184eb6['GetAttribu'+'teDataArra'+'yForAllPoi'+'nts'](_0x3c7f08,_0x9718cf,_0x9718cf['data_type'](),_0x2eeedc,_0x4834f3);const _0xdd32cb=new Uint8Array(_0x5edf30['HEAPU8']['buffer'],_0x4834f3,_0x2eeedc);for(let _0x493db6=-0x68f+-0x4f3+0xb82;_0x493db6<_0x3c7f08['num_points']();++_0x493db6)for(let _0x5b11e5=0x2207+-0x2fd*-0x5+-0x30f8;_0x5b11e5<_0x29c104;++_0x5b11e5)_0x1061b8[_0x493db6*_0x194bed+_0x2ac5a1[_0x5d45d1]+_0x5b11e5]=_0xdd32cb[_0x493db6*_0x29c104+_0x5b11e5];if(!_0x2426d4&&_0x9718cf['attribute_'+'type']()===0x4cc*-0x1+0x20b8+-0x1bec){const _0x587b6b=_0x838137(_0x96c591(_0xdd32cb,_0x9718cf['data_type']()),_0x3e9057?new Uint16Array(_0x53365e['indices']):new Uint32Array(_0x53365e['indices']));for(let _0x536eb2=0x3ce+-0x780+0x3b2;_0x536eb2<_0x3c7f08['num_points']();++_0x536eb2)for(let _0x3fe3fd=0x21e6+-0x24bb*0x1+0x2d5;_0x3fe3fd<0x1a2e+-0x9fc+-0x1026;++_0x3fe3fd)_0x1061b8[_0x536eb2*_0x194bed+_0x37792a+_0x3fe3fd]=_0x587b6b[_0x536eb2*(-0x9ad+-0xf6a+-0xa5*-0x27)+_0x3fe3fd];}_0x5edf30['_free'](_0x4834f3);}return _0x5edf30['destroy'](_0x3c7f08),_0x5edf30['destroy'](_0x184eb6),_0x5edf30['destroy'](_0x28ae19),_0x53365e;},_0x3df110=_0x123bb7=>{const _0x189b7a=_0x5f487f(new Uint8Array(_0x123bb7['buffer']));self['postMessag'+'e']({'jobId':_0x123bb7['jobId'],'error':_0x189b7a['error'],'indices':_0x189b7a['indices'],'vertices':_0x189b7a['vertices'],'attributes':_0x189b7a['attributes']},[_0x189b7a['indices'],_0x189b7a['vertices']]['filter'](_0x1c6634=>_0x1c6634!=null));},_0x1941ca=[];self['onmessage']=_0x35327b=>{const _0x2b1aed=_0x35327b['data'];switch(_0x2b1aed['type']){case'init':self['DracoDecod'+'erModule']({'instantiateWasm':(_0x2d96b2,_0x4bae24)=>(WebAssembly['instantiat'+'e'](_0x2b1aed['module'],_0x2d96b2)['then'](_0x117658=>_0x4bae24(_0x117658))['catch'](_0x3bcfc0=>console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x3bcfc0)),{})})['then'](_0x47df26=>{_0x5edf30=_0x47df26,_0x1941ca['forEach'](_0x471b06=>_0x3df110(_0x471b06));});break;case'decodeMesh':_0x5edf30?_0x3df110(_0x2b1aed):_0x1941ca['push'](_0x2b1aed);break;}};}const Vg=0x2*0xccf+-0x84a+-0x155*0xd;class nF{constructor(){this['workers']=[[],[],[]],this['jobId']=0x1*-0x20f0+-0x3ef*-0x1+0x1d01,this['jobQueue']=[],this['jobCallbac'+'ks']=new Map(),this['run']=(_0x435386,_0x1082df)=>{_0x435386['postMessag'+'e']({'type':'decodeMesh','jobId':_0x1082df['jobId'],'buffer':_0x1082df['buffer']},[_0x1082df['buffer']]);};}['init'](_0x374230){for(_0x374230['forEach'](_0x57a688=>{_0x57a688['addEventLi'+'stener']('message',_0x4c7389=>{const _0x1e5c49=_0x4c7389['data'],_0x412646=this['jobCallbac'+'ks']['get'](_0x1e5c49['jobId']);if(_0x412646&&_0x412646(_0x1e5c49['error'],{'indices':_0x1e5c49['indices'],'vertices':_0x1e5c49['vertices'],'attributes':_0x1e5c49['attributes']}),this['jobCallbac'+'ks']['delete'](_0x1e5c49['jobId']),this['jobQueue']['length']>-0x123e+-0x15ae+0x27ec){const _0x1edfbf=this['jobQueue']['shift']();this['run'](_0x57a688,_0x1edfbf);}else{const _0x331f5c=this['workers'][-0x1*-0x454+-0x1*0x12a7+0xe55]['indexOf'](_0x57a688);if(_0x331f5c!==-(0x1*-0x22b2+-0x23f4+0x46a7))this['workers'][0x1166+0x62c*-0x5+0xd78]['splice'](_0x331f5c,-0x1*0x1245+0x347+0x1*0xeff),this['workers'][0x1270+0x10b*0x2+0x6d7*-0x3]['push'](_0x57a688);else{const _0x15558e=this['workers'][-0x7*0x43b+0x1*0x19ac+0x3f2]['indexOf'](_0x57a688);_0x15558e!==-(0x5*0x623+-0x199b*-0x1+-0x3849)?(this['workers'][-0x1476+-0x1d49+0x18e0*0x2]['splice'](_0x15558e,-0x1f4f+-0x2f9*-0x2+0x195e*0x1),this['workers'][0x4*-0x8e9+0xce7+0x16bd*0x1]['push'](_0x57a688)):w['error']('logical\x20er'+'ror');}}});}),this['workers'][0x1*-0xa15+-0x1b90+-0x25a5*-0x1]=_0x374230;this['jobQueue']['length']&&(this['workers'][0x767+-0x9b3+-0x24c*-0x1]['length']||this['workers'][-0x1886+0x2*0xa2d+0x42d*0x1]['length']);){const _0x3d58b8=this['jobQueue']['shift']();if(this['workers'][0xb32*-0x1+0xda9+-0x277]['length']>0x20*-0xa9+0xe1*0x17+0x1*0xe9){const _0x46b5a8=this['workers'][0x1*-0x15dd+0x869+0xd74]['shift']();this['workers'][0x2*-0x40+-0x6*0x12+0xed]['push'](_0x46b5a8),this['run'](_0x46b5a8,_0x3d58b8);}else{const _0xed0c9=this['workers'][-0x1d8c+-0x5d1*0x2+-0x1*-0x292f]['shift']();this['workers'][0x1a95+0x19*-0xcf+-0x2*0x32e]['push'](_0xed0c9),this['run'](_0xed0c9,_0x3d58b8);}}}['enqueueJob'](_0x35bb98,_0x1d4575){const _0x2e594a={'jobId':this['jobId']++,'buffer':_0x35bb98};if(this['jobCallbac'+'ks']['set'](_0x2e594a['jobId'],_0x1d4575),this['workers'][-0x1a74+-0x1932+0x259*0x16]['length']>-0xc6b+-0x1*0x15bb+0x2226){const _0x287468=this['workers'][0xda4+0xd*0x57+0xc9*-0x17]['shift']();this['workers'][-0xb7d+-0x29*-0x13+0x15*0x67]['push'](_0x287468),this['run'](_0x287468,_0x2e594a);}else{if(this['workers'][0xd9b+0x1a77+-0x2811]['length']>-0x1*0x210a+-0x1*0x194f+0xd*0x47d){const _0x3d5cb8=this['workers'][0x478+-0x1989+0x1512]['shift']();this['workers'][-0x15b*-0xf+-0x19ff+0xc*0x79]['push'](_0x3d5cb8),this['run'](_0x3d5cb8,_0x2e594a);}else this['jobQueue']['push'](_0x2e594a);}}}const oF=_0x1900eb=>new Promise((_0x59cbb3,_0x140c91)=>{const _0x283683={'cache':!(0x1*0x1799+-0xfb5+-0x7e4),'responseType':'text','retry':Vg>-0x18*-0x12c+-0x1ee*0xd+0x30a*-0x1,'maxRetries':Vg};ot['get'](_0x1900eb,_0x283683,(_0x2797d8,_0x5d4d98)=>{_0x2797d8?_0x140c91(_0x2797d8):_0x59cbb3(_0x5d4d98);});}),lF=_0x22e528=>{const _0x4fba21=()=>fetch(_0x22e528)['then'](_0x2dd048=>_0x2dd048['arrayBuffe'+'r']())['then'](_0x385270=>WebAssembly['compile'](_0x385270)),_0x31bd48=()=>WebAssembly['compileStr'+'eaming'](fetch(_0x22e528))['catch'](_0x488e17=>(w['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x22e528+'\x20('+_0x488e17+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x4fba21()));return WebAssembly['compileStr'+'eaming']?_0x31bd48():_0x4fba21();},Gg=-0x266*-0xe+-0x107*-0xd+-0x2eee;let Fc;const cF=_0x5dda81=>{if(Fc)return!(0x12cc*-0x2+-0x858+0x15*0x230);if(!_0x5dda81){const _0x4ecb88=uS['getConfig']('DracoDecod'+'erModule');_0x4ecb88?_0x5dda81={'jsUrl':_0x4ecb88['glueUrl'],'wasmUrl':_0x4ecb88['wasmUrl'],'numWorkers':_0x4ecb88['numWorkers']}:_0x5dda81={'jsUrl':'draco.wasm'+'.js','wasmUrl':'draco.wasm'+'.wasm','numWorkers':Gg};}return!_0x5dda81['jsUrl']||!_0x5dda81['wasmUrl']?!(-0x3d*-0x42+-0xa71*-0x1+-0x1a2a):(Fc=new nF(),Promise['all']([oF(_0x5dda81['jsUrl']),lF(_0x5dda81['wasmUrl'])])['then'](([_0x5e207d,_0x605270])=>{const _0x43451e=['/*\x20draco\x20*'+'/',_0x5e207d,'/*\x20worker\x20'+'*/','(\x0a'+aF['toString']()+'\x0a)()\x0a\x0a']['join']('\x0a'),_0x22b11d=new Blob([_0x43451e],{'type':'applicatio'+'n/javascri'+'pt'}),_0x1cdc1c=URL['createObje'+'ctURL'](_0x22b11d),_0x2075b0=Math['max'](-0xd3*-0x1b+0xe*0x35+0x1926*-0x1,Math['min'](0x1a7a+-0x137*0x2+0x14*-0x133,_0x5dda81['numWorkers']||Gg)),_0x2405e5=[];for(let _0xe0661f=0x44*0x2e+0xb95+0x9*-0x2a5;_0xe0661f<_0x2075b0;++_0xe0661f){const _0x1135c5=new Worker(_0x1cdc1c);_0x1135c5['postMessag'+'e']({'type':'init','module':_0x605270}),_0x2405e5['push'](_0x1135c5);}Fc['init'](_0x2405e5);}),!(-0x6*-0x293+-0x1*-0x2203+-0x3175));},hF=(_0x57c2d9,_0x1b6bf2)=>cF()?(Fc['enqueueJob'](_0x57c2d9,_0x1b6bf2),!(0x15fc+0x2*-0xf29+0x61*0x16)):!(-0x1e95+0x15*-0x1c3+0x4395);class dF{constructor(){h(this,'gltf'),h(this,'nodes'),h(this,'scenes'),h(this,'animations'),h(this,'textures'),h(this,'materials'),h(this,'variants'),h(this,'meshVarian'+'ts'),h(this,'meshDefaul'+'tMaterials'),h(this,'renders'),h(this,'skins'),h(this,'lights'),h(this,'cameras'),h(this,'nodeInstan'+'cingMap');}['destroy'](){this['renders']&&this['renders']['forEach'](_0x198d1b=>{_0x198d1b['meshes']=null;});}}const Bv=_0x552aa4=>/^data:[^\n\r,\u2028\u2029]*,.*$/i['test'](_0x552aa4),fF=_0x4b5825=>_0x4b5825['substring'](_0x4b5825['indexOf'](':')+(-0x3*0x5bb+0x86c+0x1*0x8c6),_0x4b5825['indexOf'](';')),nl=_0x3dd496=>{switch(_0x3dd496){case'SCALAR':return 0x1b36+-0x23bd+-0x1a*-0x54;case'VEC2':return 0x26d7+0x6*0x4fd+-0x44c3;case'VEC3':return-0xad*0x31+-0x13fc+0x3*0x11b4;case'VEC4':return-0x10*-0x106+-0x650+0x283*-0x4;case'MAT2':return 0x1513+0x3d5*-0x2+0x1*-0xd65;case'MAT3':return 0x1*0xd7b+0x1*-0x11cb+0x1*0x459;case'MAT4':return-0x13a8+0x905*-0x3+-0x5*-0x95b;default:return 0xb*-0x51+-0xfb*0x1+-0xe5*-0x5;}},ld=_0x41305d=>{switch(_0x41305d){case-0x10*-0xe0+0x25d0+-0x1fd*0x10:return Hh;case 0x694*-0x1+0xb88+0xf0d:return ia;case 0x54b+0x2450+0x733*-0x3:return Wh;case-0x1d*0x15+0x1f5+0x146f:return _l;case 0x5*0x767+-0x75c+0x1*-0x9a3:return zS;case-0x1*0x854+-0x265f+0x10ae*0x4:return Vo;case-0x179f+0x301+0x28a4:return Ve;default:return-0x3*0x35d+-0x158e+-0x1*-0x1fa5;}},uF=_0x23dde4=>{switch(_0x23dde4){case-0x2072+0x16aa+0x1dc8:return-0x265a+0x1*-0x190f+0x3f6a;case 0x1a9f+0x266b+-0x3*0xf03:return 0x1*0x146f+0x30*-0x60+-0x26e;case-0x16f*0x5+-0xd72+0x289f*0x1:return 0x1*-0x1912+0x7d1+0x1143;case-0x1b62+-0x18bf+0x3cc*0x13:return 0xf50+-0x21d7+-0x41*-0x49;case 0x1*0x2351+0x1883+-0x4fa*0x8:return-0x22a*-0x1+-0x1*-0x18be+0x1*-0x1ae4;case 0x3cf*0x8+-0x385+0x377*-0x2:return 0x13*-0xdb+0x1902+-0x8bd*0x1;case-0x1*-0x1df2+0x1*-0xbbf+0x1d3:return 0x179d+-0x1882+0xe9;default:return 0x5ca+0x76c+-0xd36;}},pF=_0x3feb46=>{switch(_0x3feb46){case-0x1a77+0x15*0x10b+0x1890:return Int8Array;case 0x92*-0x2c+0x105c+0x1cbd:return Uint8Array;case-0xbd5+-0x2bd+0x2294:return Int16Array;case 0x825+0x1*0x547+-0xf1*-0x7:return Uint16Array;case 0x1*0x1b2b+-0x61*0x28+-0x1*-0x801:return Int32Array;case-0x8df+-0x2c*-0x45+0x4*0x442:return Uint32Array;case-0x5*0x52f+-0x4*-0x6ad+0x133d:return Float32Array;default:return null;}},ph={'POSITION':Pe,'NORMAL':gs,'TANGENT':yi,'COLOR_0':Wt,'JOINTS_0':us,'WEIGHTS_0':gi,'TEXCOORD_0':is,'TEXCOORD_1':va,'TEXCOORD_2':hl,'TEXCOORD_3':dl,'TEXCOORD_4':fl,'TEXCOORD_5':ul,'TEXCOORD_6':pl,'TEXCOORD_7':ml},Hg={[Pe]:-0x5*-0x7c7+0x1f22+-0x4605,[gs]:0xde0+0xa*-0x385+0x1553,[yi]:-0x158f+-0x5*-0x133+0xf92,[Wt]:-0x2407+-0x382*-0x8+0x7fa,[us]:-0x3*-0xc51+0x10c0+-0x1*0x35af,[gi]:-0x676*-0x1+-0x3*0xa2e+0x1819,[is]:0x7*-0xc1+0x4*-0x6ee+0x2105*0x1,[va]:0xc4f*0x2+0x2328+-0x3bbf,[hl]:0x3*0x592+0x80c*-0x3+0xa*0xbf,[dl]:-0x1*0x2462+-0x2b*0x1+-0xe*-0x29d,[fl]:0x256*-0x3+0x1b69*-0x1+0x2275,[ul]:0x727*-0x1+0xba4+-0x472,[pl]:-0x5*0x485+0x96c+0xd39,[ml]:-0x2*0xb68+0x6d1*-0x3+-0xe70*-0x3},mF=_0x2d2e24=>{switch(_0x2d2e24){case Hh:return _0x16d9e9=>Math['max'](_0x16d9e9/(-0x19a7+-0x1ac3+0x34e9),-(0x1f*-0xed+0x96*0xd+0x1516));case ia:return _0x14d158=>_0x14d158/(0x65d*-0x5+-0x1d27+0x3df7);case Wh:return _0x179e8e=>Math['max'](_0x179e8e/(0xfde+0x57fe+0x1*0x1823),-(-0x12a*0xe+-0x1*0xb7+-0x12*-0xf2));case _l:return _0x2a4745=>_0x2a4745/(-0xbefb+-0x35b*0x5e+0x2fa64);default:return _0x3150c5=>_0x3150c5;}},_u=(_0x3c85e7,_0x598400,_0x3fea85)=>{const _0x2d6227=mF(_0x3fea85),_0xb9fb8f=_0x598400['length'];for(let _0x534b44=-0x17b9*-0x1+-0xc48+0x1*-0xb71;_0x534b44<_0xb9fb8f;++_0x534b44)_0x3c85e7[_0x534b44]=_0x2d6227(_0x598400[_0x534b44]);return _0x3c85e7;},la=(_0x3ebba2,_0x35f7ac,_0x5c1a9a=!(-0x1bc9+-0x244f+0x4019))=>{const _0x3d9134=nl(_0x3ebba2['type']),_0x10a0ff=pF(_0x3ebba2['componentT'+'ype']);if(!_0x10a0ff)return null;let _0x3eca33;if(_0x3ebba2['sparse']){const _0x83477=_0x3ebba2['sparse'],_0x453f5b={'count':_0x83477['count'],'type':'SCALAR'},_0x315f1c=la(Object['assign'](_0x453f5b,_0x83477['indices']),_0x35f7ac,!(-0xb04*0x3+0x1*-0x1c78+0x3d84)),_0x32db31={'count':_0x83477['count'],'type':_0x3ebba2['type'],'componentType':_0x3ebba2['componentT'+'ype']},_0x7bbf69=la(Object['assign'](_0x32db31,_0x83477['values']),_0x35f7ac,!(0xb7*-0x19+-0x12b*-0xd+0x10*0x2b));if(_0x3ebba2['hasOwnProp'+'erty']('bufferView')){const _0x331f97={'bufferView':_0x3ebba2['bufferView'],'byteOffset':_0x3ebba2['byteOffset'],'componentType':_0x3ebba2['componentT'+'ype'],'count':_0x3ebba2['count'],'type':_0x3ebba2['type']};_0x3eca33=la(_0x331f97,_0x35f7ac,!(-0x198a*-0x1+-0xb*0x4+-0x195e))['slice']();}else _0x3eca33=new _0x10a0ff(_0x3ebba2['count']*_0x3d9134);for(let _0x1f6ab8=0x59*-0x19+-0x3e5*-0x3+-0x17f*0x2;_0x1f6ab8<_0x83477['count'];++_0x1f6ab8){const _0x58860d=_0x315f1c[_0x1f6ab8];for(let _0x5151f2=-0x77e+-0xf67+0x16e5;_0x5151f2<_0x3d9134;++_0x5151f2)_0x3eca33[_0x58860d*_0x3d9134+_0x5151f2]=_0x7bbf69[_0x1f6ab8*_0x3d9134+_0x5151f2];}}else{if(_0x3ebba2['hasOwnProp'+'erty']('bufferView')){const _0x1b561d=_0x35f7ac[_0x3ebba2['bufferView']];if(_0x5c1a9a&&_0x1b561d['hasOwnProp'+'erty']('byteStride')){const _0xbb991d=_0x3d9134*_0x10a0ff['BYTES_PER_'+'ELEMENT'],_0x120fa8=new ArrayBuffer(_0x3ebba2['count']*_0xbb991d),_0xa92c53=new Uint8Array(_0x120fa8);let _0x6d51b7=-0x5*-0x467+-0x1159*0x1+-0x4aa;for(let _0x2a8165=0xbc4+-0x2*0xbb6+0xba8;_0x2a8165<_0x3ebba2['count'];++_0x2a8165){let _0x1d1d75=(_0x3ebba2['byteOffset']||-0x1f5f+0xb3*0xe+-0x41*-0x55)+_0x2a8165*_0x1b561d['byteStride'];for(let _0x577c2d=-0x1*-0x1818+-0x20e3+0x8cb;_0x577c2d<_0xbb991d;++_0x577c2d)_0xa92c53[_0x6d51b7++]=_0x1b561d[_0x1d1d75++];}_0x3eca33=new _0x10a0ff(_0x120fa8);}else _0x3eca33=new _0x10a0ff(_0x1b561d['buffer'],_0x1b561d['byteOffset']+(_0x3ebba2['byteOffset']||-0x196*-0x13+0x1*-0x62b+0x5*-0x4cb),_0x3ebba2['count']*_0x3d9134);}else _0x3eca33=new _0x10a0ff(_0x3ebba2['count']*_0x3d9134);}return _0x3eca33;},xn=(_0x3c0699,_0x8948a7)=>{const _0x961521=la(_0x3c0699,_0x8948a7,!(0x8df+0x39*-0x9e+0x1a4f));if(_0x961521 instanceof Float32Array||!_0x3c0699['normalized'])return _0x961521;const _0x4716fd=new Float32Array(_0x961521['length']);return _u(_0x4716fd,_0x961521,ld(_0x3c0699['componentT'+'ype'])),_0x4716fd;},gu=_0x29c20e=>{let _0x5d55e4=_0x29c20e['min'],_0x2b203e=_0x29c20e['max'];if(!_0x5d55e4||!_0x2b203e)return null;if(_0x29c20e['normalized']){const _0x4308c6=ld(_0x29c20e['componentT'+'ype']);_0x5d55e4=_u([],_0x5d55e4,_0x4308c6),_0x2b203e=_u([],_0x2b203e,_0x4308c6);}return new De(new D((_0x2b203e[-0x1b27*-0x1+-0x7ac+-0x137b]+_0x5d55e4[-0x1*-0x3bc+-0x1*0x3c5+0x3*0x3])*(-0x1*-0x1246+-0x5b*-0x3a+0x4c*-0x83+0.5),(_0x2b203e[0x1ea6+0x15a0*-0x1+-0x905]+_0x5d55e4[0x1e*-0x110+-0x11be+-0x319f*-0x1])*(0x1*0x1904+0x23ca+-0x3cce+0.5),(_0x2b203e[-0x1257*0x2+-0x2*0x84e+0x354c]+_0x5d55e4[-0x13a2+0x1b5c+0x68*-0x13])*(0x1*0x19b2+0x17*0x165+0x17*-0x283+0.5)),new D((_0x2b203e[-0x1*0xed4+-0x1174+-0x2048*-0x1]-_0x5d55e4[-0x547*-0x2+-0x2*-0xaa5+-0x1fd8])*(0xc3e*-0x2+0x7a+0x1802+0.5),(_0x2b203e[0x109c*0x2+0x113f*-0x2+0x147]-_0x5d55e4[-0x195d+0x1*0xa7d+-0x1*-0xee1])*(0x1*0x23b3+-0x1*-0x54e+-0x2901*0x1+0.5),(_0x2b203e[0x1ebc+-0x2b3+-0x1c07]-_0x5d55e4[-0x4ed+0x55*0x5b+-0x1948])*(0x4*0x5d9+0x1a5b+0x1095*-0x3+0.5)));},zv=_0x2c277e=>{if(!_0x2c277e['hasOwnProp'+'erty']('mode'))return qs;switch(_0x2c277e['mode']){case 0x409*-0x2+-0x446+0xc58:return Vh;case 0xecf+0x1177*0x1+-0x2045:return Gh;case-0x65*0x59+-0x10e2+0x3401*0x1:return OS;case 0x1665+0x1*-0x1afb+-0x1*-0x499:return FS;case 0x1*-0x1984+0x45a*-0x2+-0x4*-0x88f:return qs;case-0x437+-0x1548+0x1984:return vr;case 0x2*0x6b1+-0x13a8+0x64c:return sa;default:return qs;}},_F=_0x20875e=>{const _0x59f7b8=new Uint16Array(_0x20875e);for(let _0x1dfaa6=0x2230+0x1dfd+-0x402d*0x1;_0x1dfaa6<_0x20875e;_0x1dfaa6++)_0x59f7b8[_0x1dfaa6]=_0x1dfaa6;return _0x59f7b8;},gF=(_0xd4560e,_0x3e09d0)=>{const _0x255db1=_0xd4560e[Pe];if(!_0x255db1||_0x255db1['components']!==0x253e+0x285*0xd+-0x45fc)return;let _0x2eecbf;if(_0x255db1['size']!==_0x255db1['stride']){const _0x45e21f=_0x255db1['stride']/Eo[_0x255db1['type']],_0x2707da=new _n[_0x255db1['type']](_0x255db1['buffer'],_0x255db1['offset'],_0x255db1['count']*_0x45e21f);_0x2eecbf=new _n[_0x255db1['type']](_0x255db1['count']*(-0x11*-0xc5+-0x1e82+-0x117*-0x10));for(let _0x20fbaa=-0x1fdb*0x1+0x1a84+0x557*0x1;_0x20fbaa<_0x255db1['count'];++_0x20fbaa)_0x2eecbf[_0x20fbaa*(0x1e9+0x1a4d+0x1*-0x1c33)+(0x1f9e+-0xa37*0x1+-0x1567)]=_0x2707da[_0x20fbaa*_0x45e21f+(-0x8dd*-0x1+0xed6+-0x1*0x17b3)],_0x2eecbf[_0x20fbaa*(-0x2703+-0xe5*0x7+0x2d49)+(-0x476*-0x1+-0x3*-0x14b+-0x856)]=_0x2707da[_0x20fbaa*_0x45e21f+(-0x103c*-0x2+0x4f9+-0x10*0x257)],_0x2eecbf[_0x20fbaa*(-0xef*-0x1d+0x13*0xef+-0x2ccd)+(-0x7*0x21b+0xc05*0x2+-0xb7*0xd)]=_0x2707da[_0x20fbaa*_0x45e21f+(-0x2592+0x1*-0x16cf+0x3c63)];}else _0x2eecbf=new _n[_0x255db1['type']](_0x255db1['buffer'],_0x255db1['offset'],_0x255db1['count']*(0xab*-0x2+0x3fd+-0x1a*0x1a));const _0x5c3ab7=_0x255db1['count'];_0x3e09d0||(_0x3e09d0=_F(_0x5c3ab7));const _0x2587b0=Yy(_0x2eecbf,_0x3e09d0),_0x142f0b=new Float32Array(_0x2587b0['length']);_0x142f0b['set'](_0x2587b0),_0xd4560e[gs]={'buffer':_0x142f0b['buffer'],'size':0xc,'offset':0x0,'stride':0xc,'count':_0x5c3ab7,'components':0x3,'type':Ve};},SF=_0x1553d3=>{const _0xfdaa7e=_0x5391ad=>{const _0x37b224=[];for(let _0xa022c0=-0xc0*-0x1+0x1*0x1ed+-0x89*0x5;_0xa022c0<_0x5391ad['_levels']['length'];++_0xa022c0){let _0x43ee7a=[];if(_0x5391ad['cubemap']){for(let _0x42d9fb=-0x1*-0x152f+-0x1954+0x425;_0x42d9fb<0x1d*0xad+0x1c9*-0x1+0xb*-0x19e;++_0x42d9fb)_0x43ee7a['push'](_0x5391ad['_levels'][_0xa022c0][_0x42d9fb]);}else _0x43ee7a=_0x5391ad['_levels'][_0xa022c0];_0x37b224['push'](_0x43ee7a);}return _0x37b224;},_0x288387=new _e(_0x1553d3['device'],_0x1553d3);return _0x288387['_levels']=_0xfdaa7e(_0x1553d3),_0x288387;},yF=_0x259a69=>{const _0x5d9465=new pe(_0x259a69['name']+'_clone',_0x259a69['type'],_0x259a69['file'],_0x259a69['data'],_0x259a69['options']);return _0x5d9465['loaded']=!(0x4cd*0x2+-0x29*-0xde+-0x2d28),_0x5d9465['resource']=SF(_0x259a69['resource']),_0x259a69['registry']['add'](_0x5d9465),_0x5d9465;},vF=(_0x28c621,_0x5ac509)=>{const _0x120c17=_0x5ac509[Pe];if(!_0x120c17)return null;const _0x311bcb=_0x120c17['count'],_0x5f1f22=[];for(const _0x8e7c75 in _0x5ac509)if(_0x5ac509['hasOwnProp'+'erty'](_0x8e7c75)){const _0x46fdb9={'semantic':_0x8e7c75,'components':_0x5ac509[_0x8e7c75]['components'],'type':_0x5ac509[_0x8e7c75]['type'],'normalize':!!_0x5ac509[_0x8e7c75]['normalize']};kt['isElementV'+'alid'](_0x28c621,_0x46fdb9)||_0x46fdb9['components']++,_0x5f1f22['push'](_0x46fdb9);}_0x5f1f22['sort']((_0x5dfea,_0x381d38)=>Hg[_0x5dfea['semantic']]-Hg[_0x381d38['semantic']]);let _0x3f87d1,_0x23040e,_0x378d37,_0x1bc467,_0x1d21ee,_0x599d86;const _0x1dcbe2=new kt(_0x28c621,_0x5f1f22);let _0xff44ee=!(-0x2401+-0x1*-0x268d+-0x2*0x146);for(_0x3f87d1=0x4e5+-0x444+0x17*-0x7;_0x3f87d1<_0x1dcbe2['elements']['length'];++_0x3f87d1)if(_0x1d21ee=_0x1dcbe2['elements'][_0x3f87d1],_0x1bc467=_0x5ac509[_0x1d21ee['name']],_0x599d86=_0x1bc467['offset']-_0x120c17['offset'],_0x1bc467['buffer']!==_0x120c17['buffer']||_0x1bc467['stride']!==_0x1d21ee['stride']||_0x1bc467['size']!==_0x1d21ee['size']||_0x599d86!==_0x1d21ee['offset']){_0xff44ee=!(-0x109*-0x11+0x1362+-0x24fa);break;}const _0x7f1b3a=new Ds(_0x28c621,_0x1dcbe2,_0x311bcb),_0x4dd33e=_0x7f1b3a['lock'](),_0x4399c4=new Uint32Array(_0x4dd33e);let _0x2adb87;if(_0xff44ee)_0x2adb87=new Uint32Array(_0x120c17['buffer'],_0x120c17['offset'],_0x311bcb*_0x7f1b3a['format']['size']/(-0x1a8e+0x1*-0x965+0x23f7)),_0x4399c4['set'](_0x2adb87);else{let _0x393827,_0x13f320;for(_0x3f87d1=-0x4f*-0x61+0x2521+-0x4310;_0x3f87d1<_0x7f1b3a['format']['elements']['length'];++_0x3f87d1){_0x1d21ee=_0x7f1b3a['format']['elements'][_0x3f87d1],_0x393827=_0x1d21ee['stride']/(0x23d7+-0x267d+-0x1*-0x2aa),_0x1bc467=_0x5ac509[_0x1d21ee['name']],_0x13f320=_0x1bc467['stride']/(-0xd2*0x2b+-0x15*0x117+0x119*0x35),_0x2adb87=new Uint32Array(_0x1bc467['buffer'],_0x1bc467['offset'],(_0x1bc467['count']-(-0x134b*0x1+-0xd*-0xb3+0xa35))*_0x13f320+(_0x1bc467['size']+(0x1070+0xe*0xa6+-0x1981))/(0x13ab*-0x1+-0xb*0x332+0x36d5));let _0x2f7dac=-0x8df+-0x47*0x7c+0x2b43*0x1,_0x58a491=_0x1d21ee['offset']/(-0x2*0xa1f+-0x22*-0xca+-0x692);const _0x330f7c=Math['floor']((_0x1bc467['size']+(-0x8c*0x36+0xd73*-0x1+0x2afe))/(0x60+-0x2*-0x373+0x1*-0x742));for(_0x23040e=-0x1*-0x161e+-0xa82+0x2*-0x5ce;_0x23040e<_0x311bcb;++_0x23040e){for(_0x378d37=0x66f+-0x1*0x1e20+0x17b1;_0x378d37<_0x330f7c;++_0x378d37)_0x4399c4[_0x58a491+_0x378d37]=_0x2adb87[_0x2f7dac+_0x378d37];_0x2f7dac+=_0x13f320,_0x58a491+=_0x393827;}}}return _0x7f1b3a['unlock'](),_0x7f1b3a;},xF=(_0x5f1dcc,_0x2ca2c1,_0x113440,_0x412d52,_0x20e74b,_0x1a2a15)=>{const _0x59ed9c={},_0x1d3bbf=[];for(const _0x5c9a14 in _0x2ca2c1)_0x2ca2c1['hasOwnProp'+'erty'](_0x5c9a14)&&ph['hasOwnProp'+'erty'](_0x5c9a14)&&(_0x59ed9c[_0x5c9a14]=_0x2ca2c1[_0x5c9a14],_0x1d3bbf['push'](_0x5c9a14+':'+_0x2ca2c1[_0x5c9a14]));_0x1d3bbf['sort']();const _0x3e5a71=_0x1d3bbf['join']();let _0x352e38=_0x1a2a15[_0x3e5a71];if(!_0x352e38){const _0x4fe36e={};for(const _0x1dde77 in _0x59ed9c){const _0x1add3b=_0x412d52[_0x2ca2c1[_0x1dde77]],_0x40bf12=la(_0x1add3b,_0x20e74b),_0x2a15ae=_0x20e74b[_0x1add3b['bufferView']],_0xb8618c=ph[_0x1dde77],_0x468863=nl(_0x1add3b['type'])*uF(_0x1add3b['componentT'+'ype']),_0x2ea0fd=_0x2a15ae&&_0x2a15ae['hasOwnProp'+'erty']('byteStride')?_0x2a15ae['byteStride']:_0x468863;_0x4fe36e[_0xb8618c]={'buffer':_0x40bf12['buffer'],'size':_0x468863,'offset':_0x40bf12['byteOffset'],'stride':_0x2ea0fd,'count':_0x1add3b['count'],'components':nl(_0x1add3b['type']),'type':ld(_0x1add3b['componentT'+'ype']),'normalize':_0x1add3b['normalized']};}_0x4fe36e['hasOwnProp'+'erty'](gs)||gF(_0x4fe36e,_0x113440),_0x352e38=vF(_0x5f1dcc,_0x4fe36e),_0x1a2a15[_0x3e5a71]=_0x352e38;}return _0x352e38;},TF=(_0x19730a,_0x1a4178,_0x202db9,_0x1cd9c9,_0x15d502,_0x32c0cd)=>{let _0x120829,_0x116f91,_0x36af48;const _0x242a8a=_0x1a4178['joints'],_0x3d7ad9=_0x242a8a['length'],_0x4de316=[];if(_0x1a4178['hasOwnProp'+'erty']('inverseBin'+'dMatrices')){const _0x31cb3c=_0x1a4178['inverseBin'+'dMatrices'],_0x1792ed=la(_0x202db9[_0x31cb3c],_0x1cd9c9,!(-0x1*0xf85+0xdfd+0x188)),_0x2d094a=[];for(_0x120829=0x520+-0x1*0x2c2+-0x3*0xca;_0x120829<_0x3d7ad9;_0x120829++){for(_0x116f91=-0x140a+0x2243+0x1*-0xe39;_0x116f91<0x8*0x445+0x2*0xba5+-0x235*0x1a;_0x116f91++)_0x2d094a[_0x116f91]=_0x1792ed[_0x120829*(-0xd9*-0x2+0xc2e+0xdd*-0x10)+_0x116f91];_0x36af48=new te(),_0x36af48['set'](_0x2d094a),_0x4de316['push'](_0x36af48);}}else{for(_0x120829=0x9*-0xdd+0x2a9*-0x5+0x706*0x3;_0x120829<_0x3d7ad9;_0x120829++)_0x36af48=new te(),_0x4de316['push'](_0x36af48);}const _0x590def=[];for(_0x120829=0x49+-0x2*0xc2+0x5*0x3f;_0x120829<_0x3d7ad9;_0x120829++)_0x590def[_0x120829]=_0x15d502[_0x242a8a[_0x120829]]['name'];const _0x15a843=_0x590def['join']('#');let _0x10c01f=_0x32c0cd['get'](_0x15a843);return _0x10c01f||(_0x10c01f=new Ky(_0x19730a,_0x4de316,_0x590def),_0x32c0cd['set'](_0x15a843,_0x10c01f)),_0x10c01f;},wF=(_0x3ede89,_0xd61c0b,_0x597280,_0x5cfd39,_0x53a1f0,_0x9a4bb9,_0x1dd4ee)=>{var _0x792bff;const _0xcb90f1=new Ge(_0x3ede89);_0xcb90f1['aabb']=gu(_0x597280[_0xd61c0b['attributes']['POSITION']]);const _0x57a196=[];for(const [_0x1395bb,_0x2c80c8]of Object['entries'](_0xd61c0b['attributes'])){const _0x4d6916=_0x597280[_0x2c80c8],_0x1a5f43=ph[_0x1395bb],_0x3d0778=ld(_0x4d6916['componentT'+'ype']);_0x57a196['push']({'semantic':_0x1a5f43,'components':nl(_0x4d6916['type']),'type':_0x3d0778,'normalize':_0x4d6916['normalized']??(_0x1a5f43===Wt&&(_0x3d0778===ia||_0x3d0778===_l))});}if(_0x1dd4ee['push'](new Promise((_0x39fd6c,_0xb204ce)=>{const _0x5f5c29=_0xd61c0b['extensions']['KHR_draco_'+'mesh_compr'+'ession'];hF(_0x5cfd39[_0x5f5c29['bufferView']]['slice']()['buffer'],(_0x44f8ca,_0xf845ac)=>{var _0x4e39c7;if(_0x44f8ca)console['log'](_0x44f8ca),_0xb204ce(_0x44f8ca);else{const _0x515154={};for(const [_0xa1236b,_0x595448]of Object['entries'](_0x5f5c29['attributes']))_0x515154[ph[_0xa1236b]]=_0xf845ac['attributes']['indexOf'](_0x595448);_0x57a196['sort']((_0x3b7ca9,_0x24ad4a)=>_0x515154[_0x3b7ca9['semantic']]-_0x515154[_0x24ad4a['semantic']]),(_0x4e39c7=_0xd61c0b['attributes'])!=null&&_0x4e39c7['NORMAL']||_0x57a196['splice'](-0x1525+0x7f3*0x3+-0x1*0x2b3,-0x156f+-0x2308+0x3877,{'semantic':'NORMAL','components':0x3,'type':Ve});const _0x3603a0=new kt(_0x3ede89,_0x57a196),_0x2bc9f6=_0xf845ac['vertices']['byteLength']/_0x3603a0['size'],_0x196b68=_0x2bc9f6<=0x18f6e+0x1*0x2ce1+-0xbc50?ji:yr,_0x37cc40=_0xf845ac['indices']['byteLength']/(_0x2bc9f6<=0xed2e*-0x2+0x13*0x1189+0x18d30?0x367+-0xe7d*-0x1+-0x11e2:-0x17*0x42+0x1*-0x12af+0x18a1);w['call'](()=>{_0x2bc9f6!==_0x597280[_0xd61c0b['attributes']['POSITION']]['count']&&w['warn']('mesh\x20has\x20i'+'nvalid\x20ver'+'tex\x20count'),_0x37cc40!==_0x597280[_0xd61c0b['indices']]['count']&&w['warn']('mesh\x20has\x20i'+'nvalid\x20ind'+'ex\x20count');});const _0x72794c=new Ds(_0x3ede89,_0x3603a0,_0x2bc9f6,{'data':_0xf845ac['vertices']}),_0x101177=new xr(_0x3ede89,_0x196b68,_0x37cc40,ms,_0xf845ac['indices']);_0xcb90f1['vertexBuff'+'er']=_0x72794c,_0xcb90f1['indexBuffe'+'r'][0x23ad*-0x1+-0x1*0x9d9+0x2d86]=_0x101177,_0xcb90f1['primitive'][-0x2*0x209+0x15fd+-0x21*0x8b]['type']=zv(_0xd61c0b),_0xcb90f1['primitive'][-0x359+0x156c+-0x1*0x1213]['base']=0x2421+-0x1eee+-0x79*0xb,_0xcb90f1['primitive'][0x1bee+-0x80+-0x1b6e]['count']=_0x101177?_0x37cc40:_0x2bc9f6,_0xcb90f1['primitive'][-0x1303*0x1+0xbae*0x3+-0x1007]['indexed']=!!_0x101177,_0x39fd6c();}});})),(_0x792bff=_0xd61c0b==null?void(0xee6+0x8f*-0x30+-0x3d*-0x32):_0xd61c0b['extensions'])!=null&&_0x792bff['KHR_materi'+'als_varian'+'ts']){const _0x2752be=_0xd61c0b['extensions']['KHR_materi'+'als_varian'+'ts'],_0x3d6718={};_0x2752be['mappings']['forEach'](_0x28f23e=>{_0x28f23e['variants']['forEach'](_0x4e4de6=>{_0x3d6718[_0x4e4de6]=_0x28f23e['material'];});}),_0x53a1f0[_0xcb90f1['id']]=_0x3d6718;}return _0x9a4bb9[_0xcb90f1['id']]=_0xd61c0b['material'],_0xcb90f1;},EF=(_0x59f273,_0x3fc7fa,_0x2626af,_0x35ca28,_0x380a65,_0x12e214,_0xeaab61,_0x467aad,_0x5ec558)=>{const _0x97b06b=[];return _0x3fc7fa['primitives']['forEach'](_0x306612=>{var _0x4427d6;if((_0x4427d6=_0x306612['extensions'])!=null&&_0x4427d6['KHR_draco_'+'mesh_compr'+'ession'])_0x97b06b['push'](wF(_0x59f273,_0x306612,_0x2626af,_0x35ca28,_0x12e214,_0xeaab61,_0x5ec558));else{let _0x389961=_0x306612['hasOwnProp'+'erty']('indices')?la(_0x2626af[_0x306612['indices']],_0x35ca28,!(0x8*0x77+-0x20e0+0x1d28)):null;const _0x58dd69=xF(_0x59f273,_0x306612['attributes'],_0x389961,_0x2626af,_0x35ca28,_0x380a65),_0xa3974=zv(_0x306612),_0x49e7e0=new Ge(_0x59f273);if(_0x49e7e0['vertexBuff'+'er']=_0x58dd69,_0x49e7e0['primitive'][0xa75*-0x1+0x2*-0x3f2+0x1259]['type']=_0xa3974,_0x49e7e0['primitive'][0x1bf9+0x28*-0x1+-0x1bd1]['base']=0x2126*0x1+-0xec2+-0x1264,_0x49e7e0['primitive'][-0x15*-0x119+0x544*0x1+0x1c51*-0x1]['indexed']=_0x389961!==null,_0x389961!==null){let _0x13fd0e;_0x389961 instanceof Uint8Array?_0x13fd0e=yf:_0x389961 instanceof Uint16Array?_0x13fd0e=ji:_0x13fd0e=yr,_0x13fd0e===yf&&_0x59f273['isWebGPU']&&(_0x13fd0e=ji,_0x389961=new Uint16Array(_0x389961));const _0x5b1608=new xr(_0x59f273,_0x13fd0e,_0x389961['length'],ms,_0x389961);_0x49e7e0['indexBuffe'+'r'][0x1271*-0x2+0x153*0xe+-0x24b*-0x8]=_0x5b1608,_0x49e7e0['primitive'][0x3fb+-0x16fa+0x12ff]['count']=_0x389961['length'];}else _0x49e7e0['primitive'][0x15de+-0x4da*0x8+0x10f2]['count']=_0x58dd69['numVertice'+'s'];if(_0x306612['hasOwnProp'+'erty']('extensions')&&_0x306612['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts')){const _0x473a31=_0x306612['extensions']['KHR_materi'+'als_varian'+'ts'],_0x1daab8={};_0x473a31['mappings']['forEach'](_0x5c3736=>{_0x5c3736['variants']['forEach'](_0x5b10b6=>{_0x1daab8[_0x5b10b6]=_0x5c3736['material'];});}),_0x12e214[_0x49e7e0['id']]=_0x1daab8;}_0xeaab61[_0x49e7e0['id']]=_0x306612['material'];let _0x2d390e=_0x2626af[_0x306612['attributes']['POSITION']];if(_0x49e7e0['aabb']=gu(_0x2d390e),_0x306612['hasOwnProp'+'erty']('targets')){const _0x4a071b=[];_0x306612['targets']['forEach']((_0x4049c5,_0x5949c7)=>{const _0x4205d2={};_0x4049c5['hasOwnProp'+'erty']('POSITION')&&(_0x2d390e=_0x2626af[_0x4049c5['POSITION']],_0x4205d2['deltaPosit'+'ions']=xn(_0x2d390e,_0x35ca28),_0x4205d2['aabb']=gu(_0x2d390e)),_0x4049c5['hasOwnProp'+'erty']('NORMAL')&&(_0x2d390e=_0x2626af[_0x4049c5['NORMAL']],_0x4205d2['deltaNorma'+'ls']=xn(_0x2d390e,_0x35ca28)),_0x3fc7fa['hasOwnProp'+'erty']('extras')&&_0x3fc7fa['extras']['hasOwnProp'+'erty']('targetName'+'s')?_0x4205d2['name']=_0x3fc7fa['extras']['targetName'+'s'][_0x5949c7]:_0x4205d2['name']=_0x5949c7['toString'](-0x2*-0xb7d+-0x1c39+0x7b*0xb),_0x3fc7fa['hasOwnProp'+'erty']('weights')&&(_0x4205d2['defaultWei'+'ght']=_0x3fc7fa['weights'][_0x5949c7]),_0x4205d2['preserveDa'+'ta']=_0x467aad['morphPrese'+'rveData'],_0x4a071b['push'](new od(_0x4205d2));}),_0x49e7e0['morph']=new Gp(_0x4a071b,_0x59f273,{'preferHighPrecision':_0x467aad['morphPrefe'+'rHighPreci'+'sion']});}_0x97b06b['push'](_0x49e7e0);}}),_0x97b06b;},Dt=(_0x4afced,_0x5abe6b,_0x21572a)=>{var _0x43055f;let _0x11d74a;const _0x5d319e=_0x4afced['texCoord'];if(_0x5d319e){for(_0x11d74a=-0x1*0x416+-0x6*-0x4b+0x1*0x254;_0x11d74a<_0x21572a['length'];++_0x11d74a)_0x5abe6b[_0x21572a[_0x11d74a]+'MapUv']=_0x5d319e;}const _0x3426bd=[-0x3*0x145+-0xe*0x52+-0x84b*-0x1,0x10e3+0x19f3*0x1+-0x2ad6],_0x263813=[-0x1f2f+-0x160b+0x1*0x353b,0x1*0x464+-0x5b5*0x5+0x1826],_0x2bd4dd=(_0x43055f=_0x4afced['extensions'])==null?void(-0x17f3*-0x1+0x1b8d+-0x80*0x67):_0x43055f['KHR_textur'+'e_transfor'+'m'];if(_0x2bd4dd){const _0x20bd93=_0x2bd4dd['offset']||_0x3426bd,_0x525bf8=_0x2bd4dd['scale']||_0x263813,_0x3416e5=_0x2bd4dd['rotation']?-_0x2bd4dd['rotation']*Y['RAD_TO_DEG']:-0x1fd*0x5+-0x3*-0xc87+-0x1ba4,_0x3e3148=new J(_0x525bf8[0x24*-0x2e+0x53*-0x35+-0x23*-0xad],_0x525bf8[0xe7c+0x103a+0x1*-0x1eb5]),_0x7f8046=new J(_0x20bd93[0x1ce6+0x1*0x18e6+-0x35cc],-0x7*0x2a5+-0x1365*-0x2+0xf*-0x15a-_0x525bf8[0x1ce8+0x2e*0x83+-0x3471]-_0x20bd93[0x136*-0x13+-0x1f3d+0x3640]);for(_0x11d74a=-0x1259*0x2+-0xeaf+-0x757*-0x7;_0x11d74a<_0x21572a['length'];++_0x11d74a)_0x5abe6b[_0x21572a[_0x11d74a]+'MapTiling']=_0x3e3148,_0x5abe6b[_0x21572a[_0x11d74a]+'MapOffset']=_0x7f8046,_0x5abe6b[_0x21572a[_0x11d74a]+('MapRotatio'+'n')]=_0x3416e5;}},bF=(_0x5edf29,_0x54ce1c,_0x56b159)=>{let _0x39cf3a,_0x4ed111;if(_0x5edf29['hasOwnProp'+'erty']('diffuseFac'+'tor')?(_0x39cf3a=_0x5edf29['diffuseFac'+'tor'],_0x54ce1c['diffuse']['set'](Math['pow'](_0x39cf3a[-0x188b+0x1*-0xd99+0x2624],(-0x1*-0x14da+-0xc5a+-0x87f)/(-0xb*0x212+-0x4*-0x628+-0x1*0x1d8+0.20000000000000018)),Math['pow'](_0x39cf3a[-0xad*-0xe+-0xb*0x269+0x110e],(-0x1ec4+0x1*-0x2075+0x1f9d*0x2)/(0x2cb*0x1+0x217d+-0x2446+0.20000000000000018)),Math['pow'](_0x39cf3a[-0x11ab+-0x2cf+0x147c],(0x880*0x2+0x531+-0x8*0x2c6)/(0x15b2+0x223b+0x7*-0x7fd+0.20000000000000018))),_0x54ce1c['opacity']=_0x39cf3a[-0xb*0x232+-0x1*0xacb+0x22f4]):(_0x54ce1c['diffuse']['set'](0x1e2+0x265*0x1+-0x2*0x223,-0x840+-0xe72*-0x1+0x1*-0x631,0x189+0x7a5+0x1*-0x92d),_0x54ce1c['opacity']=0x2510+-0x368*-0x2+0xb*-0x3fd),_0x5edf29['hasOwnProp'+'erty']('diffuseTex'+'ture')){const _0x2dbd36=_0x5edf29['diffuseTex'+'ture'];_0x4ed111=_0x56b159[_0x2dbd36['index']],_0x54ce1c['diffuseMap']=_0x4ed111,_0x54ce1c['diffuseMap'+'Channel']='rgb',_0x54ce1c['opacityMap']=_0x4ed111,_0x54ce1c['opacityMap'+'Channel']='a',Dt(_0x2dbd36,_0x54ce1c,['diffuse','opacity']);}if(_0x54ce1c['useMetalne'+'ss']=!(0x26c7+-0x1627+0x1*-0x109f),_0x5edf29['hasOwnProp'+'erty']('specularFa'+'ctor')?(_0x39cf3a=_0x5edf29['specularFa'+'ctor'],_0x54ce1c['specular']['set'](Math['pow'](_0x39cf3a[0x2362*0x1+-0x3d9+0x27*-0xcf],(-0x23bd+-0x1*0x1df0+0x41ae)/(-0x26ac+0x4e1*-0x8+0x2ae*0x1d+0.20000000000000018)),Math['pow'](_0x39cf3a[0x6a5+0x542+-0xbe6],(-0x15*0x139+0xda9+-0xc05*-0x1)/(0xe03*-0x1+-0x24c0+-0x1*-0x32c5+0.20000000000000018)),Math['pow'](_0x39cf3a[0x511*-0x1+0x5dc+-0x3*0x43],(0x1677+0x30*0xa+-0x1856)/(0x0+0x1329+0x1*-0x1327+0.20000000000000018)))):_0x54ce1c['specular']['set'](0x1f7b*-0x1+0x1*-0x2265+0x41e1,-0x349*-0xb+0x5e*-0x1b+-0x1a38,0x59*0x8+0x255f+-0x2826),_0x5edf29['hasOwnProp'+'erty']('glossiness'+'Factor')?_0x54ce1c['gloss']=_0x5edf29['glossiness'+'Factor']:_0x54ce1c['gloss']=0x717+-0x15e5*-0x1+0x3*-0x9a9,_0x5edf29['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x1802f2=_0x5edf29['specularGl'+'ossinessTe'+'xture'];_0x54ce1c['specularMa'+'p']=_0x54ce1c['glossMap']=_0x56b159[_0x1802f2['index']],_0x54ce1c['specularMa'+'pChannel']='rgb',_0x54ce1c['glossMapCh'+'annel']='a',Dt(_0x1802f2,_0x54ce1c,['gloss','metalness']);}},AF=(_0x400184,_0x47d9b2,_0xb6765b)=>{if(_0x400184['hasOwnProp'+'erty']('clearcoatF'+'actor')?_0x47d9b2['clearCoat']=_0x400184['clearcoatF'+'actor']*(-0xdc7+-0x61*-0x59+-0x1*0x13f2+0.25):_0x47d9b2['clearCoat']=0x1*-0x425+0x109*0x1+0x31c,_0x400184['hasOwnProp'+'erty']('clearcoatT'+'exture')){const _0x2cfa62=_0x400184['clearcoatT'+'exture'];_0x47d9b2['clearCoatM'+'ap']=_0xb6765b[_0x2cfa62['index']],_0x47d9b2['clearCoatM'+'apChannel']='r',Dt(_0x2cfa62,_0x47d9b2,['clearCoat']);}if(_0x400184['hasOwnProp'+'erty']('clearcoatR'+'oughnessFa'+'ctor')?_0x47d9b2['clearCoatG'+'loss']=_0x400184['clearcoatR'+'oughnessFa'+'ctor']:_0x47d9b2['clearCoatG'+'loss']=-0x5*-0x2f9+-0x68a+0x1*-0x853,_0x400184['hasOwnProp'+'erty']('clearcoatR'+'oughnessTe'+'xture')){const _0x1c27ef=_0x400184['clearcoatR'+'oughnessTe'+'xture'];_0x47d9b2['clearCoatG'+'lossMap']=_0xb6765b[_0x1c27ef['index']],_0x47d9b2['clearCoatG'+'lossMapCha'+'nnel']='g',Dt(_0x1c27ef,_0x47d9b2,['clearCoatG'+'loss']);}if(_0x400184['hasOwnProp'+'erty']('clearcoatN'+'ormalTextu'+'re')){const _0x54a810=_0x400184['clearcoatN'+'ormalTextu'+'re'];_0x47d9b2['clearCoatN'+'ormalMap']=_0xb6765b[_0x54a810['index']],Dt(_0x54a810,_0x47d9b2,['clearCoatN'+'ormal']),_0x54a810['hasOwnProp'+'erty']('scale')?_0x47d9b2['clearCoatB'+'umpiness']=_0x54a810['scale']:_0x47d9b2['clearCoatB'+'umpiness']=0x2*0x1272+-0x9e*0x33+-0x569;}_0x47d9b2['clearCoatG'+'lossInvert']=!(-0x1*-0xe34+0xfca+-0x1dfe);},CF=(_0x4971b0,_0x579197,_0x1291fd)=>{_0x579197['useLightin'+'g']=!(-0x254b+0x1*0x1087+0x14c5),_0x579197['emissive']['copy'](_0x579197['diffuse']),_0x579197['emissiveMa'+'p']=_0x579197['diffuseMap'],_0x579197['emissiveMa'+'pUv']=_0x579197['diffuseMap'+'Uv'],_0x579197['emissiveMa'+'pTiling']['copy'](_0x579197['diffuseMap'+'Tiling']),_0x579197['emissiveMa'+'pOffset']['copy'](_0x579197['diffuseMap'+'Offset']),_0x579197['emissiveMa'+'pRotation']=_0x579197['diffuseMap'+'Rotation'],_0x579197['emissiveMa'+'pChannel']=_0x579197['diffuseMap'+'Channel'],_0x579197['emissiveVe'+'rtexColor']=_0x579197['diffuseVer'+'texColor'],_0x579197['emissiveVe'+'rtexColorC'+'hannel']=_0x579197['diffuseVer'+'texColorCh'+'annel'],_0x579197['useLightin'+'g']=!(-0x14f0+-0x1611+0x2b02),_0x579197['useSkybox']=!(0x10+-0xd14+0xd05),_0x579197['diffuse']['set'](0xfa6+-0x1*0x1cfb+-0x472*-0x3,0x449*-0x8+0x1baf+-0x82*-0xd,-0x1557+0x1ff7+0x1*-0xa9f),_0x579197['diffuseMap']=null,_0x579197['diffuseVer'+'texColor']=!(-0x10d*0x1b+-0x5*0x5f5+0x3a29);},PF=(_0x56c42d,_0x2aeb4a,_0x5afdf3)=>{if(_0x2aeb4a['useMetalne'+'ssSpecular'+'Color']=!(0x358*0x2+-0x81c+0xb6*0x2),_0x56c42d['hasOwnProp'+'erty']('specularCo'+'lorTexture')&&(_0x2aeb4a['specularMa'+'p']=_0x5afdf3[_0x56c42d['specularCo'+'lorTexture']['index']],_0x2aeb4a['specularMa'+'pChannel']='rgb',Dt(_0x56c42d['specularCo'+'lorTexture'],_0x2aeb4a,['specular'])),_0x56c42d['hasOwnProp'+'erty']('specularCo'+'lorFactor')){const _0x39173d=_0x56c42d['specularCo'+'lorFactor'];_0x2aeb4a['specular']['set'](Math['pow'](_0x39173d[0x335*-0x3+0x10+0x98f],(0x3*-0x797+-0x152*0x4+0x1c0e)/(-0x1a*-0x1+-0x146d+0x15b*0xf+0.20000000000000018)),Math['pow'](_0x39173d[0x777*-0x5+-0x1833+0x13*0x33d],(0x2*-0x107e+-0x7*0x477+0x156a*0x3)/(0x1*-0x99a+0x1e11+0x1*-0x1475+0.20000000000000018)),Math['pow'](_0x39173d[0x1f0c+-0x2b*0x55+0x7*-0x265],(-0x15c6+-0x3a*-0x34+0x9ff)/(-0x1*0x26d7+-0x619+0x2cf2+0.20000000000000018)));}else _0x2aeb4a['specular']['set'](0x1*0x1051+0x1b81+-0x1*0x2bd1,0x2201+-0x327*0x1+0x95*-0x35,-0x1e8d+0xb*-0x147+0x2c9b);_0x56c42d['hasOwnProp'+'erty']('specularFa'+'ctor')?_0x2aeb4a['specularit'+'yFactor']=_0x56c42d['specularFa'+'ctor']:_0x2aeb4a['specularit'+'yFactor']=-0x488*-0x2+-0x1*-0x16db+-0x1fea,_0x56c42d['hasOwnProp'+'erty']('specularTe'+'xture')&&(_0x2aeb4a['specularit'+'yFactorMap'+'Channel']='a',_0x2aeb4a['specularit'+'yFactorMap']=_0x5afdf3[_0x56c42d['specularTe'+'xture']['index']],Dt(_0x56c42d['specularTe'+'xture'],_0x2aeb4a,['specularit'+'yFactor']));},MF=(_0x3d6722,_0x19bc18,_0x5a26be)=>{_0x3d6722['hasOwnProp'+'erty']('ior')&&(_0x19bc18['refraction'+'Index']=(0x787+0x11b7+0x7*-0x39b)/_0x3d6722['ior']);},DF=(_0x4bf884,_0x1b29a4,_0xe62bd3)=>{_0x4bf884['hasOwnProp'+'erty']('dispersion')&&(_0x1b29a4['dispersion']=_0x4bf884['dispersion']);},IF=(_0x2ab319,_0x3d163a,_0x6fdc32)=>{_0x3d163a['blendType']=Zs,_0x3d163a['useDynamic'+'Refraction']=!(0xb8*-0x15+0x16b6+-0x79e),_0x2ab319['hasOwnProp'+'erty']('transmissi'+'onFactor')&&(_0x3d163a['refraction']=_0x2ab319['transmissi'+'onFactor']),_0x2ab319['hasOwnProp'+'erty']('transmissi'+'onTexture')&&(_0x3d163a['refraction'+'MapChannel']='r',_0x3d163a['refraction'+'Map']=_0x6fdc32[_0x2ab319['transmissi'+'onTexture']['index']],Dt(_0x2ab319['transmissi'+'onTexture'],_0x3d163a,['refraction']));},LF=(_0x18363e,_0x1878e0,_0x5cd557)=>{if(_0x1878e0['useSheen']=!(0x13b*-0xe+-0x52a+-0x1664*-0x1),_0x18363e['hasOwnProp'+'erty']('sheenColor'+'Factor')){const _0x57b71f=_0x18363e['sheenColor'+'Factor'];_0x1878e0['sheen']['set'](Math['pow'](_0x57b71f[0xd63+0x23b*0x1+0xf9e*-0x1],(0x1702+0x2f*0x75+0x3*-0xed4)/(-0xca1+-0x1fdf+-0x1641*-0x2+0.20000000000000018)),Math['pow'](_0x57b71f[0x1b4*0xe+0x1*-0x15+0x1*-0x17c2],(-0xf51+0x16b1+-0x75f)/(0x177+0x4e5+-0x65a+0.20000000000000018)),Math['pow'](_0x57b71f[-0x1fbb+-0x2330+0x42ed],(-0x98e+-0x2447+-0x2dd6*-0x1)/(-0x14bb+-0x3*-0x6d3+0x44+0.20000000000000018)));}else _0x1878e0['sheen']['set'](-0x2*0xac1+0x2a5*0xe+-0xf83,-0x323*0xb+-0x4*0x199+0x28e6,0x236f*-0x1+-0x1c85+0x3ff5*0x1);_0x18363e['hasOwnProp'+'erty']('sheenColor'+'Texture')&&(_0x1878e0['sheenMap']=_0x5cd557[_0x18363e['sheenColor'+'Texture']['index']],Dt(_0x18363e['sheenColor'+'Texture'],_0x1878e0,['sheen'])),_0x1878e0['sheenGloss']=_0x18363e['hasOwnProp'+'erty']('sheenRough'+'nessFactor')?_0x18363e['sheenRough'+'nessFactor']:-0x738+-0x25b9+0x2cf1,_0x18363e['hasOwnProp'+'erty']('sheenRough'+'nessTextur'+'e')&&(_0x1878e0['sheenGloss'+'Map']=_0x5cd557[_0x18363e['sheenRough'+'nessTextur'+'e']['index']],_0x1878e0['sheenGloss'+'MapChannel']='a',Dt(_0x18363e['sheenRough'+'nessTextur'+'e'],_0x1878e0,['sheenGloss'])),_0x1878e0['sheenGloss'+'Invert']=!(0xb*0xfb+-0x19eb+0xf22);},RF=(_0xe79a85,_0xf362aa,_0x430e35)=>{if(_0xf362aa['blendType']=Zs,_0xf362aa['useDynamic'+'Refraction']=!(0x328*-0x8+-0x2b3*-0xa+-0x1be),_0xe79a85['hasOwnProp'+'erty']('thicknessF'+'actor')&&(_0xf362aa['thickness']=_0xe79a85['thicknessF'+'actor']),_0xe79a85['hasOwnProp'+'erty']('thicknessT'+'exture')&&(_0xf362aa['thicknessM'+'ap']=_0x430e35[_0xe79a85['thicknessT'+'exture']['index']],_0xf362aa['thicknessM'+'apChannel']='g',Dt(_0xe79a85['thicknessT'+'exture'],_0xf362aa,['thickness'])),_0xe79a85['hasOwnProp'+'erty']('attenuatio'+'nDistance')&&(_0xf362aa['attenuatio'+'nDistance']=_0xe79a85['attenuatio'+'nDistance']),_0xe79a85['hasOwnProp'+'erty']('attenuatio'+'nColor')){const _0x521e25=_0xe79a85['attenuatio'+'nColor'];_0xf362aa['attenuatio'+'n']['set'](Math['pow'](_0x521e25[-0x7*0x288+0x817+-0x1ed*-0x5],(-0x2*-0xc63+-0x654*-0x3+0x2bc1*-0x1)/(0xd47+0xd*-0x194+0x109*0x7+0.20000000000000018)),Math['pow'](_0x521e25[-0x1c22+0xe5e+-0x1*-0xdc5],(-0x2231+-0x347+-0x2579*-0x1)/(0x3c6*0xa+-0x7a7*0x1+-0x1e13+0.20000000000000018)),Math['pow'](_0x521e25[-0x5c6+0xbd8+-0x610],(-0x1cdc+-0x12e7+0x3fb*0xc)/(0x3b3*-0x7+0xf5*0x26+0x13*-0x8d+0.20000000000000018)));}},OF=(_0x29d824,_0x5d764e,_0x4b1415)=>{_0x29d824['hasOwnProp'+'erty']('emissiveSt'+'rength')&&(_0x5d764e['emissiveIn'+'tensity']=_0x29d824['emissiveSt'+'rength']);},FF=(_0x2a8ff6,_0x577bba,_0x47cf6a)=>{_0x577bba['useIridesc'+'ence']=!(-0x20e+-0x1715*0x1+-0x507*-0x5),_0x2a8ff6['hasOwnProp'+'erty']('iridescenc'+'eFactor')&&(_0x577bba['iridescenc'+'e']=_0x2a8ff6['iridescenc'+'eFactor']),_0x2a8ff6['hasOwnProp'+'erty']('iridescenc'+'eTexture')&&(_0x577bba['iridescenc'+'eMapChanne'+'l']='r',_0x577bba['iridescenc'+'eMap']=_0x47cf6a[_0x2a8ff6['iridescenc'+'eTexture']['index']],Dt(_0x2a8ff6['iridescenc'+'eTexture'],_0x577bba,['iridescenc'+'e'])),_0x2a8ff6['hasOwnProp'+'erty']('iridescenc'+'eIor')&&(_0x577bba['iridescenc'+'eRefractio'+'nIndex']=_0x2a8ff6['iridescenc'+'eIor']),_0x2a8ff6['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Minimum')&&(_0x577bba['iridescenc'+'eThickness'+'Min']=_0x2a8ff6['iridescenc'+'eThickness'+'Minimum']),_0x2a8ff6['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Maximum')&&(_0x577bba['iridescenc'+'eThickness'+'Max']=_0x2a8ff6['iridescenc'+'eThickness'+'Maximum']),_0x2a8ff6['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Texture')&&(_0x577bba['iridescenc'+'eThickness'+'MapChannel']='g',_0x577bba['iridescenc'+'eThickness'+'Map']=_0x47cf6a[_0x2a8ff6['iridescenc'+'eThickness'+'Texture']['index']],Dt(_0x2a8ff6['iridescenc'+'eThickness'+'Texture'],_0x577bba,['iridescenc'+'eThickness']));},NF=(_0x3c8361,_0x340f39,_0x55b0f4)=>{if(_0x340f39['enableGGXS'+'pecular']=!(0xe5f+0x9*0x228+-0x21c7),_0x3c8361['hasOwnProp'+'erty']('anisotropy'+'Strength')?_0x340f39['anisotropy'+'Intensity']=_0x3c8361['anisotropy'+'Strength']:_0x340f39['anisotropy'+'Intensity']=0x1f55+0x109*0x1f+0x1ec*-0x21,_0x3c8361['hasOwnProp'+'erty']('anisotropy'+'Texture')){const _0x20cbb1=_0x3c8361['anisotropy'+'Texture'];_0x340f39['anisotropy'+'Map']=_0x55b0f4[_0x20cbb1['index']],Dt(_0x20cbb1,_0x340f39,['anisotropy']);}_0x3c8361['hasOwnProp'+'erty']('anisotropy'+'Rotation')?_0x340f39['anisotropy'+'Rotation']=_0x3c8361['anisotropy'+'Rotation']*Y['RAD_TO_DEG']:_0x340f39['anisotropy'+'Rotation']=0x93*0x26+0x2558+-0x3b2a*0x1;},Vv=(_0x1dbbb4,_0x259191)=>{const _0x4e4659=new Ut();_0x1dbbb4['hasOwnProp'+'erty']('name')&&(_0x4e4659['name']=_0x1dbbb4['name']),_0x4e4659['occludeSpe'+'cular']=id,_0x4e4659['diffuseVer'+'texColor']=!(0xea5+0x1645+-0x7e*0x4b),_0x4e4659['specularTi'+'nt']=!(0xcf7+-0x3b3+-0x944),_0x4e4659['specularVe'+'rtexColor']=!(-0x6*-0x601+-0x8a5*0x4+-0x172),_0x4e4659['specular']['set'](-0x2044+0x2429+-0x53*0xc,0x1*0x1c8d+0xc*-0x13e+-0x61*0x24,-0x1337+-0x17d5+0x2b0d*0x1),_0x4e4659['gloss']=-0xb87*0x1+0x2238+-0x16b0,_0x4e4659['glossInver'+'t']=!(0x16b1+0x1d83+0x34*-0x101),_0x4e4659['useMetalne'+'ss']=!(-0x38d*-0x4+-0x11e6+0x3b2*0x1);let _0x231ec4,_0xc17c0b;if(_0x1dbbb4['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x56a9df=_0x1dbbb4['pbrMetalli'+'cRoughness'];if(_0x56a9df['hasOwnProp'+'erty']('baseColorF'+'actor')&&(_0x231ec4=_0x56a9df['baseColorF'+'actor'],_0x4e4659['diffuse']['set'](Math['pow'](_0x231ec4[0x83*0x2d+0x1*-0x17b3+0xac],(-0x2658+0x10e7*-0x1+0x3740)/(0x1*-0x1b+-0x92a+-0x5*-0x1db+0.20000000000000018)),Math['pow'](_0x231ec4[0x1835*-0x1+-0xc*0x12a+0x262e],(-0x15d4*-0x1+0x4dc+0x2f7*-0x9)/(0x3*-0xb72+-0x162f+0x3887+0.20000000000000018)),Math['pow'](_0x231ec4[-0x442*0x5+0x1927+-0x2f*0x15],(-0x1829*0x1+0x3*-0x121+0x1b8d)/(0xa2a*-0x1+0xc9*0x16+-0x71a+0.20000000000000018))),_0x4e4659['opacity']=_0x231ec4[-0xce8+-0xd6*-0x17+-0x1*0x64f]),_0x56a9df['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x120d0b=_0x56a9df['baseColorT'+'exture'];_0xc17c0b=_0x259191[_0x120d0b['index']],_0x4e4659['diffuseMap']=_0xc17c0b,_0x4e4659['diffuseMap'+'Channel']='rgb',_0x4e4659['opacityMap']=_0xc17c0b,_0x4e4659['opacityMap'+'Channel']='a',Dt(_0x120d0b,_0x4e4659,['diffuse','opacity']);}if(_0x56a9df['hasOwnProp'+'erty']('metallicFa'+'ctor')&&(_0x4e4659['metalness']=_0x56a9df['metallicFa'+'ctor']),_0x56a9df['hasOwnProp'+'erty']('roughnessF'+'actor')&&(_0x4e4659['gloss']=_0x56a9df['roughnessF'+'actor']),_0x56a9df['hasOwnProp'+'erty']('metallicRo'+'ughnessTex'+'ture')){const _0x16c279=_0x56a9df['metallicRo'+'ughnessTex'+'ture'];_0x4e4659['metalnessM'+'ap']=_0x4e4659['glossMap']=_0x259191[_0x16c279['index']],_0x4e4659['metalnessM'+'apChannel']='b',_0x4e4659['glossMapCh'+'annel']='g',Dt(_0x16c279,_0x4e4659,['gloss','metalness']);}}if(_0x1dbbb4['hasOwnProp'+'erty']('normalText'+'ure')){const _0x1b1741=_0x1dbbb4['normalText'+'ure'];_0x4e4659['normalMap']=_0x259191[_0x1b1741['index']],Dt(_0x1b1741,_0x4e4659,['normal']),_0x1b1741['hasOwnProp'+'erty']('scale')&&(_0x4e4659['bumpiness']=_0x1b1741['scale']);}if(_0x1dbbb4['hasOwnProp'+'erty']('occlusionT'+'exture')){const _0x3310ee=_0x1dbbb4['occlusionT'+'exture'];_0x4e4659['aoMap']=_0x259191[_0x3310ee['index']],_0x4e4659['aoMapChann'+'el']='r',Dt(_0x3310ee,_0x4e4659,['ao']);}if(_0x1dbbb4['hasOwnProp'+'erty']('emissiveFa'+'ctor')&&(_0x231ec4=_0x1dbbb4['emissiveFa'+'ctor'],_0x4e4659['emissive']['set'](Math['pow'](_0x231ec4[0x3*0xb15+0x12d9+-0x3418],(0x6*-0x49+-0x771+0x125*0x8)/(-0x1027*-0x2+-0x257d*-0x1+0xdf5*-0x5+0.20000000000000018)),Math['pow'](_0x231ec4[-0x47*0x69+-0x920+-0x99*-0x40],(0x1*-0xcbb+-0x19*0x1f+0x3*0x541)/(0x1*0x2a7+0x2400+-0x2f9*0xd+0.20000000000000018)),Math['pow'](_0x231ec4[0x1faf+0xb65+-0x2b12],(0xee5+0x1*0x201e+0xb*-0x446)/(0x347*-0x1+-0x19c+-0x1*-0x4e5+0.20000000000000018)))),_0x1dbbb4['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x3f6c1b=_0x1dbbb4['emissiveTe'+'xture'];_0x4e4659['emissiveMa'+'p']=_0x259191[_0x3f6c1b['index']],Dt(_0x3f6c1b,_0x4e4659,['emissive']);}if(_0x1dbbb4['hasOwnProp'+'erty']('alphaMode'))switch(_0x1dbbb4['alphaMode']){case'MASK':_0x4e4659['blendType']=Cs,_0x1dbbb4['hasOwnProp'+'erty']('alphaCutof'+'f')?_0x4e4659['alphaTest']=_0x1dbbb4['alphaCutof'+'f']:_0x4e4659['alphaTest']=0x1d65+0x67d*-0x6+0x989+0.5;break;case'BLEND':_0x4e4659['blendType']=Zs,_0x4e4659['depthWrite']=!(0x1e31+0x739*-0x5+0x5ed);break;default:case'OPAQUE':_0x4e4659['blendType']=Cs;break;}else _0x4e4659['blendType']=Cs;_0x1dbbb4['hasOwnProp'+'erty']('doubleSide'+'d')?(_0x4e4659['twoSidedLi'+'ghting']=_0x1dbbb4['doubleSide'+'d'],_0x4e4659['cull']=_0x1dbbb4['doubleSide'+'d']?bt:ca):(_0x4e4659['twoSidedLi'+'ghting']=!(0x1*0x1186+-0x1*-0x2385+0x49*-0xba),_0x4e4659['cull']=ca);const _0x39c056={'KHR_materials_clearcoat':AF,'KHR_materials_emissive_strength':OF,'KHR_materials_ior':MF,'KHR_materials_dispersion':DF,'KHR_materials_iridescence':FF,'KHR_materials_pbrSpecularGlossiness':bF,'KHR_materials_sheen':LF,'KHR_materials_specular':PF,'KHR_materials_transmission':IF,'KHR_materials_unlit':CF,'KHR_materials_volume':RF,'KHR_materials_anisotropy':NF};if(_0x1dbbb4['hasOwnProp'+'erty']('extensions'))for(const _0x53bd1d in _0x1dbbb4['extensions']){const _0x48311b=_0x39c056[_0x53bd1d];_0x48311b!==void(-0x2*-0x133f+-0xaa6+-0x1bd8)&&_0x48311b(_0x1dbbb4['extensions'][_0x53bd1d],_0x4e4659,_0x259191);}return _0x4e4659['update'](),_0x4e4659;},kF=(_0xe9528,_0x369aeb,_0x35ad8c,_0x116740,_0x3f6339,_0x1ba978,_0xee2c39)=>{const _0x17a088=_0x4d9c45=>new uh(nl(_0x4d9c45['type']),xn(_0x4d9c45,_0x116740)),_0x58a27e={'STEP':iv,'LINEAR':Xf,'CUBICSPLINE':qf},_0x16e96d={},_0x556a41={},_0x1c9409={};let _0x77fe42=-0x20b7+0xf4e+0x116a,_0x4142dc;for(_0x4142dc=0x243b+0x1c1+-0x25fc;_0x4142dc<_0xe9528['samplers']['length'];++_0x4142dc){const _0x336ce1=_0xe9528['samplers'][_0x4142dc];_0x16e96d['hasOwnProp'+'erty'](_0x336ce1['input'])||(_0x16e96d[_0x336ce1['input']]=_0x17a088(_0x35ad8c[_0x336ce1['input']])),_0x556a41['hasOwnProp'+'erty'](_0x336ce1['output'])||(_0x556a41[_0x336ce1['output']]=_0x17a088(_0x35ad8c[_0x336ce1['output']]));const _0x4cc7b1=_0x336ce1['hasOwnProp'+'erty']('interpolat'+'ion')&&_0x58a27e['hasOwnProp'+'erty'](_0x336ce1['interpolat'+'ion'])?_0x58a27e[_0x336ce1['interpolat'+'ion']]:Xf,_0x2d4020={'paths':[],'input':_0x336ce1['input'],'output':_0x336ce1['output'],'interpolation':_0x4cc7b1};_0x1c9409[_0x4142dc]=_0x2d4020;}const _0x27c4c3=[],_0x57aa6c={'translation':'localPosit'+'ion','rotation':'localRotat'+'ion','scale':'localScale'},_0x59cebc=_0x512941=>{const _0x281a21=[];for(;_0x512941;)_0x281a21['unshift'](_0x512941['name']),_0x512941=_0x512941['parent'];return _0x281a21;},_0x49f2ab=(_0x305888,_0x5a45db,_0x61e65)=>{const _0x57379e=_0x556a41[_0x305888['output']];if(!_0x57379e){w['warn']('glb-parser'+':\x20No\x20outpu'+'t\x20data\x20is\x20'+'available\x20'+'for\x20the\x20mo'+'rph\x20target'+'\x20curve\x20('+_0x61e65+('/graph/wei'+'ghts).\x20Ski'+'pping.'));return;}let _0x44fe4e;if(_0x1ba978&&_0x1ba978[_0x5a45db['mesh']]){const _0x2f6f64=_0x1ba978[_0x5a45db['mesh']];_0x2f6f64['hasOwnProp'+'erty']('extras')&&_0x2f6f64['extras']['hasOwnProp'+'erty']('targetName'+'s')&&(_0x44fe4e=_0x2f6f64['extras']['targetName'+'s']);}const _0x5f2368=_0x57379e['data'],_0x3141bb=_0x5f2368['length']/_0x16e96d[_0x305888['input']]['data']['length'],_0x47ef47=_0x5f2368['length']/_0x3141bb,_0x396dd0=_0x47ef47*(0xb65*-0x3+-0x1925+0x13c8*0x3),_0x58b391=new ArrayBuffer(_0x396dd0*_0x3141bb);for(let _0x4d37b8=0x1f03+0xc23+-0x7*0x62a;_0x4d37b8<_0x3141bb;_0x4d37b8++){const _0x211889=new Float32Array(_0x58b391,_0x396dd0*_0x4d37b8,_0x47ef47);for(let _0x8c3389=0x13d*0x5+0x1*-0x176f+0x113e*0x1;_0x8c3389<_0x47ef47;_0x8c3389++)_0x211889[_0x8c3389]=_0x5f2368[_0x8c3389*_0x3141bb+_0x4d37b8];const _0x2f1da4=new uh(-0xa33+-0x3*-0x85+0x8a5,_0x211889),_0x1d9421=_0x44fe4e!=null&&_0x44fe4e[_0x4d37b8]?'name.'+_0x44fe4e[_0x4d37b8]:_0x4d37b8;_0x556a41[-_0x77fe42]=_0x2f1da4;const _0x2dc25e={'paths':[{'entityPath':_0x61e65,'component':'graph','propertyPath':['weight.'+_0x1d9421]}],'input':_0x305888['input'],'output':-_0x77fe42,'interpolation':_0x305888['interpolat'+'ion']};_0x77fe42++,_0x1c9409['morphCurve'+'-'+_0x4142dc+'-'+_0x4d37b8]=_0x2dc25e;}};for(_0x4142dc=-0x1cae+0xbda*-0x2+-0x53d*-0xa;_0x4142dc<_0xe9528['channels']['length'];++_0x4142dc){const _0xf6c76=_0xe9528['channels'][_0x4142dc],_0x37e14c=_0xf6c76['target'],_0x391805=_0x1c9409[_0xf6c76['sampler']],_0x4201ae=_0x3f6339[_0x37e14c['node']],_0x1c80af=_0xee2c39[_0x37e14c['node']],_0x554878=_0x59cebc(_0x4201ae);_0x37e14c['path']['startsWith']('weights')?(_0x49f2ab(_0x391805,_0x1c80af,_0x554878),_0x1c9409[_0xf6c76['sampler']]['morphCurve']=!(0x612+0x48d*-0x5+-0x1*-0x10af)):_0x391805['paths']['push']({'entityPath':_0x554878,'component':'graph','propertyPath':[_0x57aa6c[_0x37e14c['path']]]});}const _0x1af542=[],_0x5278e1=[],_0x2f7a6d=[];for(const _0x527247 in _0x16e96d)_0x1af542['push'](_0x16e96d[_0x527247]),_0x16e96d[_0x527247]=_0x1af542['length']-(0x1*-0x23e3+-0x1385+0x3769);for(const _0x417067 in _0x556a41)_0x5278e1['push'](_0x556a41[_0x417067]),_0x556a41[_0x417067]=_0x5278e1['length']-(0x26b0+-0x15f4+-0x10bb);for(const _0x4f03e5 in _0x1c9409){const _0x544bd5=_0x1c9409[_0x4f03e5];_0x544bd5['morphCurve']||(_0x2f7a6d['push'](new Uv(_0x544bd5['paths'],_0x16e96d[_0x544bd5['input']],_0x556a41[_0x544bd5['output']],_0x544bd5['interpolat'+'ion'])),_0x544bd5['paths']['length']>0x8e*-0x9+-0x13ab+0x18a9&&_0x544bd5['paths'][-0x69a*-0x1+-0x1259+0xbbf]['propertyPa'+'th'][-0x11eb+-0x1*-0x883+-0x4b4*-0x2]==='localRotat'+'ion'&&_0x544bd5['interpolat'+'ion']!==qf&&_0x27c4c3['push'](_0x2f7a6d[_0x2f7a6d['length']-(0x35*-0x8f+-0x1ea1+0x3c3d)]['output']));}_0x27c4c3['sort']();let _0x35accb=null,_0x41d077;for(_0x4142dc=0x1d6b+-0x2d2*-0xd+0x1607*-0x3;_0x4142dc<_0x27c4c3['length'];++_0x4142dc){const _0x48b5f3=_0x27c4c3[_0x4142dc];if(_0x4142dc===-0x1dae+0x3*-0x9+-0x1*-0x1dc9||_0x48b5f3!==_0x35accb){if(_0x41d077=_0x5278e1[_0x48b5f3],_0x41d077['components']===-0x1e1d+-0x1b43+0x2*0x1cb2){const _0x5da2ff=_0x41d077['data'],_0x4fdb1d=_0x5da2ff['length']-(0xfcc+-0x1e2f+-0x3*-0x4cd);for(let _0xbc5280=0x122b+0xc0e+0xa13*-0x3;_0xbc5280<_0x4fdb1d;_0xbc5280+=-0x190e*0x1+0x61a+0x4*0x4be)_0x5da2ff[_0xbc5280+(-0x15ae+-0x78d*0x1+0x1*0x1d3b)]*_0x5da2ff[_0xbc5280+(0x223*-0x4+0x5f9*-0x1+0xe89*0x1)]+_0x5da2ff[_0xbc5280+(-0x2618+0x18f8+0xd21)]*_0x5da2ff[_0xbc5280+(-0xbb6+-0x1ee5+-0xb0*-0x3e)]+_0x5da2ff[_0xbc5280+(0x2*0xaa3+-0x1*0x751+-0xdf3*0x1)]*_0x5da2ff[_0xbc5280+(-0xd*-0x202+0x2*-0x503+-0x100e)]+_0x5da2ff[_0xbc5280+(0x1c1f+0x1*-0x12a+0x1af2*-0x1)]*_0x5da2ff[_0xbc5280+(-0x1f61+0x21a2+0xa*-0x39)]<-0x724+0xd1+0x1*0x653&&(_0x5da2ff[_0xbc5280+(-0x242f+0x20c8+0x36b)]*=-(0x1*0x1835+-0x5a1*-0x2+0x6*-0x5e9),_0x5da2ff[_0xbc5280+(-0x23d6+0x126c+0x116f)]*=-(0x1bad+-0x32*0xba+0x8a8*0x1),_0x5da2ff[_0xbc5280+(-0x5*-0x503+-0x25be+0xcb5*0x1)]*=-(-0x22cc+0x1821+0xaac),_0x5da2ff[_0xbc5280+(0x39c+0x22c5+-0x2*0x132d)]*=-(0x1*0x2433+-0xd7*-0x10+-0x31a2));}_0x35accb=_0x48b5f3;}}let _0x1ab84e=-0x1499+-0x1b8f+0x3028;for(_0x4142dc=-0x1837*-0x1+0x980+0x4d1*-0x7;_0x4142dc<_0x1af542['length'];_0x4142dc++)_0x41d077=_0x1af542[_0x4142dc]['_data'],_0x1ab84e=Math['max'](_0x1ab84e,_0x41d077['length']===0x1cea+-0x25d8+-0x3*-0x2fa?-0x1ac7*-0x1+0x716+-0x21dd*0x1:_0x41d077[_0x41d077['length']-(0x241*0x7+-0x11*-0x213+0x5*-0xa35)]);return new Zi(_0xe9528['hasOwnProp'+'erty']('name')?_0xe9528['name']:'animation_'+_0x369aeb,_0x1ab84e,_0x1af542,_0x5278e1,_0x2f7a6d);},_c=new te(),qa=new D(),UF=(_0x3bd546,_0x57b926,_0x6f8983)=>{const _0x3fdc0b=new Ie();if(_0x3bd546['hasOwnProp'+'erty']('name')&&_0x3bd546['name']['length']>0x1163+-0x167*0x8+0x62b*-0x1?_0x3fdc0b['name']=_0x3bd546['name']:_0x3fdc0b['name']='node_'+_0x57b926,_0x3bd546['hasOwnProp'+'erty']('matrix')&&(_c['data']['set'](_0x3bd546['matrix']),_c['getTransla'+'tion'](qa),_0x3fdc0b['setLocalPo'+'sition'](qa),_c['getEulerAn'+'gles'](qa),_0x3fdc0b['setLocalEu'+'lerAngles'](qa),_c['getScale'](qa),_0x3fdc0b['setLocalSc'+'ale'](qa)),_0x3bd546['hasOwnProp'+'erty']('rotation')){const _0x390f45=_0x3bd546['rotation'];_0x3fdc0b['setLocalRo'+'tation'](_0x390f45[-0x18f+0xefe*-0x1+-0x13*-0xdf],_0x390f45[0x33f+-0x4*0x15a+-0x2*-0x115],_0x390f45[-0xc1*0x4+0x1*-0x3d1+0x6d7],_0x390f45[-0x713+0x8*-0x403+0x272e]);}if(_0x3bd546['hasOwnProp'+'erty']('translatio'+'n')){const _0x22773c=_0x3bd546['translatio'+'n'];_0x3fdc0b['setLocalPo'+'sition'](_0x22773c[-0xc35*-0x1+0x1697+-0x22cc],_0x22773c[-0x130*0x17+0x1971+0x1e0],_0x22773c[-0xa7c*0x2+0x7d0+0xd2a]);}if(_0x3bd546['hasOwnProp'+'erty']('scale')){const _0x49e4a3=_0x3bd546['scale'];_0x3fdc0b['setLocalSc'+'ale'](_0x49e4a3[-0x2252+-0x1b09+0x8b*0x71],_0x49e4a3[-0x1*-0x1f69+0x1d02+-0x57e*0xb],_0x49e4a3[-0x42*-0x1f+0x720+-0xf1c]);}return _0x3bd546['hasOwnProp'+'erty']('extensions')&&_0x3bd546['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']&&_0x6f8983['set'](_0x3bd546,{'ext':_0x3bd546['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']}),_0x3fdc0b;},BF=(_0x791f3,_0x1a5bbf)=>{const _0x28eb1c=_0x791f3['type']==='orthograph'+'ic'?gn:ni,_0x4e4c21=_0x28eb1c===gn?_0x791f3['orthograph'+'ic']:_0x791f3['perspectiv'+'e'],_0x45b1b5={'enabled':!(0x1837*0x1+0xc*0x98+-0x2*0xfab),'projection':_0x28eb1c,'nearClip':_0x4e4c21['znear'],'aspectRatioMode':kp};_0x4e4c21['zfar']&&(_0x45b1b5['farClip']=_0x4e4c21['zfar']),_0x28eb1c===gn?(_0x45b1b5['orthoHeigh'+'t']=(-0x1a*0x87+-0x5*0x79c+0x33c2+0.5)*_0x4e4c21['ymag'],_0x4e4c21['ymag']&&(_0x45b1b5['aspectRati'+'oMode']=Nf,_0x45b1b5['aspectRati'+'o']=_0x4e4c21['xmag']/_0x4e4c21['ymag'])):(_0x45b1b5['fov']=_0x4e4c21['yfov']*Y['RAD_TO_DEG'],_0x4e4c21['aspectRati'+'o']&&(_0x45b1b5['aspectRati'+'oMode']=Nf,_0x45b1b5['aspectRati'+'o']=_0x4e4c21['aspectRati'+'o']));const _0x4fecd2=new lt(_0x791f3['name']);return _0x4fecd2['addCompone'+'nt']('camera',_0x45b1b5),_0x4fecd2;},zF=(_0x14505f,_0x2849f6)=>{const _0x5074e6={'enabled':!(0x55c*-0x3+-0xd*-0x171+-0x2a8),'type':_0x14505f['type']==='point'?'omni':_0x14505f['type'],'color':_0x14505f['hasOwnProp'+'erty']('color')?new ie(_0x14505f['color']):ie['WHITE'],'range':_0x14505f['hasOwnProp'+'erty']('range')?_0x14505f['range']:0x290+0x4002+-0x1b83*0x1,'falloffMode':Sy,'intensity':_0x14505f['hasOwnProp'+'erty']('intensity')?Y['clamp'](_0x14505f['intensity'],0x1531*0x1+0x240b+-0x393c,0xe20+0x1dcc*-0x1+0xfae):-0x185+0x173b+-0x15b5};_0x14505f['hasOwnProp'+'erty']('spot')&&(_0x5074e6['innerConeA'+'ngle']=_0x14505f['spot']['hasOwnProp'+'erty']('innerConeA'+'ngle')?_0x14505f['spot']['innerConeA'+'ngle']*Y['RAD_TO_DEG']:0x2466+0x21b3*0x1+0x1e5*-0x25,_0x5074e6['outerConeA'+'ngle']=_0x14505f['spot']['hasOwnProp'+'erty']('outerConeA'+'ngle')?_0x14505f['spot']['outerConeA'+'ngle']*Y['RAD_TO_DEG']:Math['PI']/(0x1b80+0xb3e+-0x1*0x26ba)),_0x14505f['hasOwnProp'+'erty']('intensity')&&(_0x5074e6['luminance']=_0x14505f['intensity']*tl['getLightUn'+'itConversi'+'on'](zf[_0x5074e6['type']],_0x5074e6['outerConeA'+'ngle'],_0x5074e6['innerConeA'+'ngle']));const _0x3fe5f5=new lt(_0x2849f6['name']);return _0x3fe5f5['rotateLoca'+'l'](-0x1be7*-0x1+-0x93+-0x1afa,-0x2*-0x4ee+0x1*0xbe2+-0x1*0x15be,0x17f*0x3+0x5ab*0x6+-0x267f),_0x3fe5f5['addCompone'+'nt']('light',_0x5074e6),_0x3fe5f5;},VF=(_0x394ff3,_0x36f6ec,_0x41bdf0,_0x1535d3)=>{if(!_0x36f6ec['hasOwnProp'+'erty']('skins')||_0x36f6ec['skins']['length']===0x1bf6+-0x12f*0x1e+-0x2e*-0x2a)return[];const _0x2aa44e=new Map();return _0x36f6ec['skins']['map'](_0xc9cd64=>TF(_0x394ff3,_0xc9cd64,_0x36f6ec['accessors'],_0x1535d3,_0x41bdf0,_0x2aa44e));},GF=(_0x579c67,_0x52aa86,_0x42b5d8,_0x4dfcbc)=>{var _0x117349,_0x147902,_0x372789;const _0x337323={},_0x452f29={},_0x196a29={},_0x4f3f32=[];return{'meshes':!_0x4dfcbc['skipMeshes']&&((_0x117349=_0x52aa86==null?void(-0x4*0x425+-0x73*-0x1+0x1*0x1021):_0x52aa86['meshes'])==null?void(0xc*0x53+-0x170c+0x2*0x994):_0x117349['length'])&&((_0x147902=_0x52aa86==null?void(0x1c7d+-0x1cf0*-0x1+-0x1*0x396d):_0x52aa86['accessors'])==null?void(-0xb51*-0x2+-0x2e*0x52+-0x7e6):_0x147902['length'])&&((_0x372789=_0x52aa86==null?void(0x2*0x2dc+0x242e+-0x29e6):_0x52aa86['bufferView'+'s'])==null?void(0x92a+0x1*-0xe2f+0x101*0x5):_0x372789['length'])?_0x52aa86['meshes']['map'](_0x564a24=>EF(_0x579c67,_0x564a24,_0x52aa86['accessors'],_0x42b5d8,_0x337323,_0x452f29,_0x196a29,_0x4dfcbc,_0x4f3f32)):[],'meshVariants':_0x452f29,'meshDefaultMaterials':_0x196a29,'promises':_0x4f3f32};},HF=(_0x410bbe,_0x44866a,_0x18ae44)=>{var _0x2790ad,_0x387d13,_0x1e10b2;if(!_0x410bbe['hasOwnProp'+'erty']('materials')||_0x410bbe['materials']['length']===0x1e03+0x1*-0xdd1+0x2*-0x819)return[];const _0xd1ccf3=(_0x2790ad=_0x18ae44==null?void(-0x4*-0x5e7+0x978+-0x2114):_0x18ae44['material'])==null?void(0x13d6+-0x359*0x6+-0x4*-0x10):_0x2790ad['preprocess'],_0x8c8141=((_0x387d13=_0x18ae44==null?void(-0x1c9*-0x7+-0x528+-0x757):_0x18ae44['material'])==null?void(-0x2*-0x1169+0x4*-0x966+0xa*0x47):_0x387d13['process'])??Vv,_0x306cf4=(_0x1e10b2=_0x18ae44==null?void(0x2*0x841+-0x1e1e+0xd9c*0x1):_0x18ae44['material'])==null?void(-0x3*-0x867+-0x13fb+-0x2*0x29d):_0x1e10b2['postproces'+'s'];return _0x410bbe['materials']['map'](_0x3c972f=>{_0xd1ccf3&&_0xd1ccf3(_0x3c972f);const _0x46c546=_0x8c8141(_0x3c972f,_0x44866a);return _0x306cf4&&_0x306cf4(_0x3c972f,_0x46c546),_0x46c546;});},WF=_0x4ef95e=>{if(!_0x4ef95e['hasOwnProp'+'erty']('extensions')||!_0x4ef95e['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts'))return null;const _0x2ba4c2=_0x4ef95e['extensions']['KHR_materi'+'als_varian'+'ts']['variants'],_0xba84e5={};for(let _0x46e7b3=-0x146*-0xb+0x270e*0x1+-0x3510;_0x46e7b3<_0x2ba4c2['length'];_0x46e7b3++)_0xba84e5[_0x2ba4c2[_0x46e7b3]['name']]=_0x46e7b3;return _0xba84e5;},$F=(_0x535eb7,_0xf27201,_0x1333c1,_0x13943f)=>{var _0x4c0f9d,_0x425ee2;if(!_0x535eb7['hasOwnProp'+'erty']('animations')||_0x535eb7['animations']['length']===-0x2701+-0x260a+0x701*0xb)return[];const _0xc7fadf=(_0x4c0f9d=_0x13943f==null?void(-0x1c06+0x106a+0xb9c):_0x13943f['animation'])==null?void(-0x89f*-0x4+0x41*0x67+-0x2b*0x169):_0x4c0f9d['preprocess'],_0x55460c=(_0x425ee2=_0x13943f==null?void(0x150*-0xf+-0xf39+0x1*0x22e9):_0x13943f['animation'])==null?void(-0x1*-0xe01+-0x349*-0x9+-0x21*0x152):_0x425ee2['postproces'+'s'];return _0x535eb7['animations']['map']((_0x37c730,_0x17ef45)=>{_0xc7fadf&&_0xc7fadf(_0x37c730);const _0x4cb45d=kF(_0x37c730,_0x17ef45,_0x535eb7['accessors'],_0x1333c1,_0xf27201,_0x535eb7['meshes'],_0x535eb7['nodes']);return _0x55460c&&_0x55460c(_0x37c730,_0x4cb45d),_0x4cb45d;});},XF=(_0x9ad350,_0x3c6d67,_0x188904,_0x405add)=>{const _0x48b692=_0x3c6d67['accessors'];_0x188904['forEach']((_0x34b3b3,_0x2ceff4)=>{const _0x12dea1=_0x34b3b3['ext']['attributes'];let _0x3d5ad2;if(_0x12dea1['hasOwnProp'+'erty']('TRANSLATIO'+'N')){const _0x4d1007=_0x48b692[_0x12dea1['TRANSLATIO'+'N']];_0x3d5ad2=xn(_0x4d1007,_0x405add);}let _0x42571c;if(_0x12dea1['hasOwnProp'+'erty']('ROTATION')){const _0x541eca=_0x48b692[_0x12dea1['ROTATION']];_0x42571c=xn(_0x541eca,_0x405add);}let _0x3ecedd;if(_0x12dea1['hasOwnProp'+'erty']('SCALE')){const _0x5a953d=_0x48b692[_0x12dea1['SCALE']];_0x3ecedd=xn(_0x5a953d,_0x405add);}const _0x50f2c2=(_0x3d5ad2?_0x3d5ad2['length']/(0x1040+0x7*-0x8b+-0x10*0xc7):0x1de0+-0x1c4+-0x404*0x7)||(_0x42571c?_0x42571c['length']/(0x28d*-0x3+-0x96a*0x1+0x1115*0x1):0xaaa+0x1263+-0x1d0d)||(_0x3ecedd?_0x3ecedd['length']/(-0x9a9*0x1+-0x1914+-0x458*-0x8):0x2fb*0x7+-0x7d*0x1c+-0x731);if(_0x50f2c2){const _0x24e8ff=new Float32Array(_0x50f2c2*(0x43e*0x6+-0x42b+-0x1539)),_0x2bb810=new D(),_0x39a740=new le(),_0x8fab4c=new D(0x16ec+0xd86+0x1eb*-0x13,0x138e*-0x1+0x217a+-0xdeb,-0xa6c+0x28f*-0xd+-0xc*-0x3a4),_0x24ec46=new te();let _0x788400=-0x12f2*-0x2+0xea3+-0x3487*0x1;for(let _0x53d136=0x65*-0x7+-0x1ab3*0x1+0x9*0x346;_0x53d136<_0x50f2c2;_0x53d136++){const _0x5a20b1=_0x53d136*(-0x1*0xa46+0x112*0x21+-0x1909);if(_0x3d5ad2&&_0x2bb810['set'](_0x3d5ad2[_0x5a20b1],_0x3d5ad2[_0x5a20b1+(0x29+-0x9*0xbc+0x674)],_0x3d5ad2[_0x5a20b1+(-0x1*0x10de+0x190b+-0x82b)]),_0x42571c){const _0x132fbc=_0x53d136*(0x7*-0x4bb+-0x2201+0x4322);_0x39a740['set'](_0x42571c[_0x132fbc],_0x42571c[_0x132fbc+(-0x36d*-0x9+-0x1a40*0x1+-0x494)],_0x42571c[_0x132fbc+(-0x1a*0x82+0x121c+0x21*-0x26)],_0x42571c[_0x132fbc+(-0x114e+-0x3*0x5+0x22c*0x8)]);}_0x3ecedd&&_0x8fab4c['set'](_0x3ecedd[_0x5a20b1],_0x3ecedd[_0x5a20b1+(0x27*-0x24+-0xb6a+0x1*0x10e7)],_0x3ecedd[_0x5a20b1+(-0x1*0x35+-0x802+0x839)]),_0x24ec46['setTRS'](_0x2bb810,_0x39a740,_0x8fab4c);for(let _0x5429fc=0x3*-0x1f3+-0x2*-0xb01+-0x1029;_0x5429fc<-0x154f+-0xc2b+0x218a;_0x5429fc++)_0x24e8ff[_0x788400++]=_0x24ec46['data'][_0x5429fc];}_0x34b3b3['matrices']=_0x24e8ff;}});},qF=(_0x4420bc,_0x57bd37,_0x371189)=>{var _0x3caca5,_0x435453,_0x553a5e;if(!_0x4420bc['hasOwnProp'+'erty']('nodes')||_0x4420bc['nodes']['length']===-0x3fd*-0x3+-0xcd8+-0x3*-0x4b)return[];const _0x30d26d=(_0x3caca5=_0x57bd37==null?void(-0x7*0x1ab+0x1*-0x203+0x10*0xdb):_0x57bd37['node'])==null?void(-0xfa9+-0x27f+0x1228):_0x3caca5['preprocess'],_0x42ceca=((_0x435453=_0x57bd37==null?void(-0x1*-0x1b69+-0x1875+-0x6c*0x7):_0x57bd37['node'])==null?void(0xaa2+-0x35a+-0x748*0x1):_0x435453['process'])??UF,_0x55677a=(_0x553a5e=_0x57bd37==null?void(0x4a2+-0x14d+-0x355):_0x57bd37['node'])==null?void(0x165a+0x83*-0x1+-0x15d7):_0x553a5e['postproces'+'s'],_0x351262=_0x4420bc['nodes']['map']((_0x196ae7,_0x51f60f)=>{_0x30d26d&&_0x30d26d(_0x196ae7);const _0x3fd198=_0x42ceca(_0x196ae7,_0x51f60f,_0x371189);return _0x55677a&&_0x55677a(_0x196ae7,_0x3fd198),_0x3fd198;});for(let _0xa74c64=-0x1aea+-0x1a4d+0x3537;_0xa74c64<_0x4420bc['nodes']['length'];++_0xa74c64){const _0x318c4e=_0x4420bc['nodes'][_0xa74c64];if(_0x318c4e['hasOwnProp'+'erty']('children')){const _0x5ae1c2=_0x351262[_0xa74c64],_0x817e3f={};for(let _0x24af80=0x2177+-0x2434+-0x1*-0x2bd;_0x24af80<_0x318c4e['children']['length'];++_0x24af80){const _0x5cbacc=_0x351262[_0x318c4e['children'][_0x24af80]];_0x5cbacc['parent']||(_0x817e3f['hasOwnProp'+'erty'](_0x5cbacc['name'])?_0x5cbacc['name']+=_0x817e3f[_0x5cbacc['name']]++:_0x817e3f[_0x5cbacc['name']]=-0x86*-0x22+-0x115*-0x21+0x2*-0x1ac0,_0x5ae1c2['addChild'](_0x5cbacc));}}}return _0x351262;},jF=(_0x259901,_0x421090)=>{var _0x351236;const _0x13d9a5=[],_0xb061b0=_0x259901['scenes']['length'];if(_0xb061b0===-0x3b*-0x43+0x150+-0x218*0x8&&((_0x351236=_0x259901['scenes'][0x5*-0x5ae+-0x22fd+-0x1*-0x3f63]['nodes'])==null?void(-0x784+-0x1d31*0x1+0x24b5):_0x351236['length'])===0xe95+-0x4*0x95f+0x16e8){const _0x1e6823=_0x259901['scenes'][-0x883+-0x1793+0x2016]['nodes'][-0x13c0+-0x2*-0x2ad+-0x61*-0x26];_0x13d9a5['push'](_0x421090[_0x1e6823]);}else for(let _0x521f0f=0x9*-0x30b+0x4d*0x27+0xfa8;_0x521f0f<_0xb061b0;_0x521f0f++){const _0x2b2d9a=_0x259901['scenes'][_0x521f0f];if(_0x2b2d9a['nodes']){const _0xad48e6=new Ie(_0x2b2d9a['name']);for(let _0x34fd48=0x12e3+-0x12+-0x12d1;_0x34fd48<_0x2b2d9a['nodes']['length'];_0x34fd48++){const _0x175bcf=_0x421090[_0x2b2d9a['nodes'][_0x34fd48]];_0xad48e6['addChild'](_0x175bcf);}_0x13d9a5['push'](_0xad48e6);}}return _0x13d9a5;},YF=(_0x34ffb9,_0x14eada,_0x5f005d)=>{var _0x35a859,_0x48ceba,_0x5c5181;let _0x3ec25b=null;if(_0x34ffb9['hasOwnProp'+'erty']('nodes')&&_0x34ffb9['hasOwnProp'+'erty']('cameras')&&_0x34ffb9['cameras']['length']>-0x1597*0x1+-0x21de+0x3775){const _0x571605=(_0x35a859=_0x5f005d==null?void(0x1972+-0x1e*0xc8+-0x202):_0x5f005d['camera'])==null?void(0x2635*-0x1+0x2c*0xdf+-0x1f*0x1):_0x35a859['preprocess'],_0x58b3e8=((_0x48ceba=_0x5f005d==null?void(-0x916*-0x2+-0x1dcb+0x23*0x55):_0x5f005d['camera'])==null?void(0x295*-0xb+-0x18ed+0x4*0xd55):_0x48ceba['process'])??BF,_0x12d2c1=(_0x5c5181=_0x5f005d==null?void(0x3fd+0x25f*0x3+-0x58d*0x2):_0x5f005d['camera'])==null?void(-0xd35+-0x23*0xec+0x2d79):_0x5c5181['postproces'+'s'];_0x34ffb9['nodes']['forEach']((_0x3e3372,_0xdd9230)=>{if(_0x3e3372['hasOwnProp'+'erty']('camera')){const _0x32197a=_0x34ffb9['cameras'][_0x3e3372['camera']];if(_0x32197a){_0x571605&&_0x571605(_0x32197a);const _0x23d407=_0x58b3e8(_0x32197a,_0x14eada[_0xdd9230]);_0x12d2c1&&_0x12d2c1(_0x32197a,_0x23d407),_0x23d407&&(_0x3ec25b||(_0x3ec25b=new Map()),_0x3ec25b['set'](_0x3e3372,_0x23d407));}}});}return _0x3ec25b;},KF=(_0x2a0447,_0xa341e9,_0x5a3780)=>{var _0xba157c,_0x447494,_0x57421c;let _0x3826f9=null;if(_0x2a0447['hasOwnProp'+'erty']('nodes')&&_0x2a0447['hasOwnProp'+'erty']('extensions')&&_0x2a0447['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x2a0447['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('lights')){const _0x28add5=_0x2a0447['extensions']['KHR_lights'+'_punctual']['lights'];if(_0x28add5['length']){const _0x42cd77=(_0xba157c=_0x5a3780==null?void(0x4eb+0xa54+-0x1*0xf3f):_0x5a3780['light'])==null?void(-0x1*-0x24b+-0x2*0x2a+-0x1f7):_0xba157c['preprocess'],_0x27b0bb=((_0x447494=_0x5a3780==null?void(0x188d+0x346*-0xb+-0x7*-0x1a3):_0x5a3780['light'])==null?void(0xd03*-0x3+-0x27*-0x95+0x1*0x1056):_0x447494['process'])??zF,_0x204129=(_0x57421c=_0x5a3780==null?void(-0x1d3*-0x15+0xc66+-0x10e7*0x3):_0x5a3780['light'])==null?void(-0xfc2*-0x1+0x1*0xd0c+0x4cd*-0x6):_0x57421c['postproces'+'s'];_0x2a0447['nodes']['forEach']((_0x38e28d,_0x1a69af)=>{if(_0x38e28d['hasOwnProp'+'erty']('extensions')&&_0x38e28d['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x38e28d['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('light')){const _0x394ccf=_0x38e28d['extensions']['KHR_lights'+'_punctual']['light'],_0x5cd561=_0x28add5[_0x394ccf];if(_0x5cd561){_0x42cd77&&_0x42cd77(_0x5cd561);const _0xa224e7=_0x27b0bb(_0x5cd561,_0xa341e9[_0x1a69af]);_0x204129&&_0x204129(_0x5cd561,_0xa224e7),_0xa224e7&&(_0x3826f9||(_0x3826f9=new Map()),_0x3826f9['set'](_0x38e28d,_0xa224e7));}}});}}return _0x3826f9;},ZF=(_0x1a8ae2,_0x1168bb,_0x108c42)=>{_0x1a8ae2['nodes']['forEach'](_0x546325=>{_0x546325['hasOwnProp'+'erty']('mesh')&&_0x546325['hasOwnProp'+'erty']('skin')&&_0x1168bb[_0x546325['mesh']]['meshes']['forEach'](_0x44c4e7=>{_0x44c4e7['skin']=_0x108c42[_0x546325['skin']];});});},QF=async(_0x5bd348,_0x2633dd,_0x8dbe4f,_0x4f1a9a,_0x28865d)=>{var _0x158715,_0x26a5de;const _0x515e3a=(_0x158715=_0x28865d==null?void(-0x7f*-0x1d+-0x1358+-0x8d*-0x9):_0x28865d['global'])==null?void(0x1513+-0x1950+-0xd9*-0x5):_0x158715['preprocess'],_0x1292db=(_0x26a5de=_0x28865d==null?void(0xc54+-0x8b7*0x2+0x51a):_0x28865d['global'])==null?void(-0x29*0x36+-0x202a+0x28d*0x10):_0x26a5de['postproces'+'s'];_0x515e3a&&_0x515e3a(_0x2633dd),_0x2633dd['asset']&&_0x2633dd['asset']['generator']==='PlayCanvas'&&w['warn']('glTF\x20model'+'\x20may\x20have\x20'+'been\x20gener'+'ated\x20with\x20'+'flipped\x20UV'+'s.\x20Please\x20'+'reconvert.');const _0x25bf9c=new Map(),_0x1adfc6=qF(_0x2633dd,_0x28865d,_0x25bf9c),_0x523644=jF(_0x2633dd,_0x1adfc6),_0x163d53=KF(_0x2633dd,_0x1adfc6,_0x28865d),_0x9fc915=YF(_0x2633dd,_0x1adfc6,_0x28865d),_0x4524f9=WF(_0x2633dd),_0x36abeb=await Promise['all'](_0x8dbe4f),{meshes:_0x400e8c,meshVariants:_0x14344d,meshDefaultMaterials:_0x4671d7,promises:_0x231a18}=GF(_0x5bd348,_0x2633dd,_0x36abeb,_0x28865d),_0x21bb9=$F(_0x2633dd,_0x1adfc6,_0x36abeb,_0x28865d);XF(_0x5bd348,_0x2633dd,_0x25bf9c,_0x36abeb);const _0x196313=await Promise['all'](_0x4f1a9a),_0x5be2cd=_0x196313['map'](_0x36628d=>_0x36628d['resource']),_0x5eba2d=HF(_0x2633dd,_0x5be2cd,_0x28865d),_0x3cb28d=VF(_0x5bd348,_0x2633dd,_0x1adfc6,_0x36abeb),_0x295535=[];for(let _0x39d36b=0x1323+0x2*-0x158+-0x1073;_0x39d36b<_0x400e8c['length'];_0x39d36b++)_0x295535[_0x39d36b]=new Zp(),_0x295535[_0x39d36b]['meshes']=_0x400e8c[_0x39d36b];ZF(_0x2633dd,_0x295535,_0x3cb28d);const _0x591e4a=new dF();return _0x591e4a['gltf']=_0x2633dd,_0x591e4a['nodes']=_0x1adfc6,_0x591e4a['scenes']=_0x523644,_0x591e4a['animations']=_0x21bb9,_0x591e4a['textures']=_0x196313,_0x591e4a['materials']=_0x5eba2d,_0x591e4a['variants']=_0x4524f9,_0x591e4a['meshVarian'+'ts']=_0x14344d,_0x591e4a['meshDefaul'+'tMaterials']=_0x4671d7,_0x591e4a['renders']=_0x295535,_0x591e4a['skins']=_0x3cb28d,_0x591e4a['lights']=_0x163d53,_0x591e4a['cameras']=_0x9fc915,_0x591e4a['nodeInstan'+'cingMap']=_0x25bf9c,_0x1292db&&_0x1292db(_0x2633dd,_0x591e4a),await Promise['all'](_0x231a18),_0x591e4a;},JF=(_0xb77531,_0x256ce6)=>{const _0x444df7=(_0xeb4204,_0x3857f8)=>{switch(_0xeb4204){case-0x4ba8+-0x7*-0x23d+0x61fd:return Te;case 0x30ba*-0x1+-0x2e3*0x16+-0x1*-0x963d:return vt;case-0x9*0x80f+-0x3147+0xa0ce:return Ph;case-0x4521+-0x4153*-0x1+0x2acf:return Dh;case-0x20*0x223+-0x2db6+-0x1323*-0x8:return Mh;case-0x3*-0x938+-0x337*0x7+0x2*0x10ee:return ha;default:return _0x3857f8;}},_0x3969f8=(_0x1dd0e4,_0x1f6b55)=>{switch(_0x1dd0e4){case 0x8d72+0x22d*-0x18+0xc1*0x35:return ue;case 0x3b2c+0xafe9+-0xa9*0x9d:return Du;case 0x1e10+-0x42ee+-0x5*-0xf93:return yt;default:return _0x1f6b55;}};_0xb77531&&(_0x256ce6=_0x256ce6??{},_0xb77531['minFilter']=_0x444df7(_0x256ce6['minFilter'],ha),_0xb77531['magFilter']=_0x444df7(_0x256ce6['magFilter'],vt),_0xb77531['addressU']=_0x3969f8(_0x256ce6['wrapS'],yt),_0xb77531['addressV']=_0x3969f8(_0x256ce6['wrapT'],yt));};let eN=0x246e+0x1*0x3c5+-0x2833;const Qa=_0x1f6ba8=>{var _0x515569,_0x26b75d,_0x182b0e,_0x37f7c1;return((_0x26b75d=(_0x515569=_0x1f6ba8['extensions'])==null?void(0x237d+-0x4d5+-0x1ea8):_0x515569['KHR_textur'+'e_basisu'])==null?void(-0xbc0+0x275*-0x4+0x1594):_0x26b75d['source'])??((_0x37f7c1=(_0x182b0e=_0x1f6ba8['extensions'])==null?void(0x1*-0x1111+0xab*0x1+0x2*0x833):_0x182b0e['EXT_textur'+'e_webp'])==null?void(-0xaca*0x2+-0x1*-0x19ae+0x23*-0x1e):_0x37f7c1['source'])??_0x1f6ba8['source'];},tN=(_0x3fae58,_0x2f5a98,_0x5f1801,_0x19d59f,_0x5fa0f)=>{var _0x14219b,_0x5a4103,_0x2d9808;if(!_0x3fae58['images']||_0x3fae58['images']['length']===0xbe*-0x26+-0xe*-0x277+-0x21a*0x3)return[];const _0x4b7c70=(_0x14219b=_0x5fa0f==null?void(0x1*-0x1261+-0x46e+0x16cf):_0x5fa0f['image'])==null?void(0x4aa+-0xf9*0x7+0x225):_0x14219b['preprocess'],_0x57c9bd=(_0x5a4103=_0x5fa0f==null?void(0x1*-0x4d5+-0x89*0xd+0xbca):_0x5fa0f['image'])==null?void(-0x2407+0x8f1+-0x1*-0x1b16):_0x5a4103['processAsy'+'nc'],_0x35821f=(_0x2d9808=_0x5fa0f==null?void(0x1a49*0x1+-0x2*0x907+0x12d*-0x7):_0x5fa0f['image'])==null?void(0x1bcb+-0x8f9+-0x12d2):_0x2d9808['postproces'+'s'],_0x57212f={'image/png':'png','image/jpeg':'jpg','image/basis':'basis','image/ktx':'ktx','image/ktx2':'ktx2','image/vnd-ms.dds':'dds'},_0x1322b4=_0x48cf43=>{const _0x2d66e9=new Set();return _0x48cf43['hasOwnProp'+'erty']('materials')&&_0x48cf43['materials']['forEach'](_0x4b3c93=>{if(_0x4b3c93['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x3d3af8=_0x4b3c93['pbrMetalli'+'cRoughness'];if(_0x3d3af8['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x12273e=_0x48cf43['textures'][_0x3d3af8['baseColorT'+'exture']['index']];_0x2d66e9['add'](Qa(_0x12273e));}}if(_0x4b3c93['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x4dc81b=_0x48cf43['textures'][_0x4b3c93['emissiveTe'+'xture']['index']];_0x2d66e9['add'](Qa(_0x4dc81b));}if(_0x4b3c93['hasOwnProp'+'erty']('extensions')){const _0x25c279=_0x4b3c93['extensions']['KHR_materi'+'als_sheen'];if(_0x25c279&&_0x25c279['hasOwnProp'+'erty']('sheenColor'+'Texture')){const _0x14196f=_0x48cf43['textures'][_0x25c279['sheenColor'+'Texture']['index']];_0x2d66e9['add'](Qa(_0x14196f));}const _0x53b9a0=_0x4b3c93['extensions']['KHR_materi'+'als_pbrSpe'+'cularGloss'+'iness'];if(_0x53b9a0&&_0x53b9a0['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x316772=_0x48cf43['textures'][_0x53b9a0['specularGl'+'ossinessTe'+'xture']['index']];_0x2d66e9['add'](Qa(_0x316772));}const _0xf11810=_0x4b3c93['extensions']['KHR_materi'+'als_specul'+'ar'];if(_0xf11810&&_0xf11810['hasOwnProp'+'erty']('specularCo'+'lorTexture')){const _0x53a87a=_0x48cf43['textures'][_0xf11810['specularCo'+'lorTexture']['index']];_0x2d66e9['add'](Qa(_0x53a87a));}}}),_0x2d66e9;},_0x17286d=(_0x9c3e08,_0x59bad3,_0x5b0289,_0x515ccc,_0x356229,_0x15bdcf)=>new Promise((_0x8baac3,_0x4ae250)=>{const _0x5c21fc=_0x1beb1a=>{const _0x57f5e0=(_0x9c3e08['name']||'gltf-textu'+'re')+'-'+eN++,_0x17a3eb={'url':_0x59bad3||_0x57f5e0};if(_0x1beb1a&&(_0x17a3eb['contents']=_0x1beb1a['slice'](0xe75+0x43a+-0x12af*0x1)['buffer']),_0x515ccc){const _0x5bb7ec=_0x57212f[_0x515ccc];_0x5bb7ec&&(_0x17a3eb['filename']=_0x17a3eb['url']+'.'+_0x5bb7ec);}const _0xc9927f={'srgb':_0x15bdcf},_0x5f1ed1=new pe(_0x57f5e0,'texture',_0x17a3eb,_0xc9927f,_0x356229);_0x5f1ed1['on']('load',_0x301808=>_0x8baac3(_0x301808)),_0x5f1ed1['on']('error',_0x3f6266=>_0x4ae250(_0x3f6266)),_0x19d59f['add'](_0x5f1ed1),_0x19d59f['load'](_0x5f1ed1);};_0x5b0289?_0x5b0289['then'](_0x9aa6d3=>_0x5c21fc(_0x9aa6d3)):_0x5c21fc(null);}),_0xf1462b=_0x1322b4(_0x3fae58);return _0x3fae58['images']['map']((_0x278f36,_0x41d1f6)=>{_0x4b7c70&&_0x4b7c70(_0x278f36);let _0x54d32a;return _0x57c9bd?_0x54d32a=new Promise((_0x77f534,_0x712e4d)=>{_0x57c9bd(_0x278f36,(_0x4317f2,_0x32487f)=>{_0x4317f2?_0x712e4d(_0x4317f2):_0x77f534(_0x32487f);});}):_0x54d32a=new Promise(_0x57be40=>{_0x57be40(null);}),_0x54d32a=_0x54d32a['then'](_0x4fa889=>{const _0x49a0dd=_0xf1462b['has'](_0x41d1f6);return _0x4fa889||(_0x278f36['hasOwnProp'+'erty']('uri')?Bv(_0x278f36['uri'])?_0x17286d(_0x278f36,_0x278f36['uri'],null,fF(_0x278f36['uri']),null,_0x49a0dd):_0x17286d(_0x278f36,Vn['test'](_0x278f36['uri'])?_0x278f36['uri']:xe['join'](_0x5f1801,_0x278f36['uri']),null,null,{'crossOrigin':'anonymous'},_0x49a0dd):_0x278f36['hasOwnProp'+'erty']('bufferView')&&_0x278f36['hasOwnProp'+'erty']('mimeType')?_0x17286d(_0x278f36,null,_0x2f5a98[_0x278f36['bufferView']],_0x278f36['mimeType'],null,_0x49a0dd):Promise['reject'](new Error('Invalid\x20im'+'age\x20found\x20'+'in\x20gltf\x20(n'+'either\x20uri'+'\x20or\x20buffer'+'View\x20found'+').\x20index='+_0x41d1f6)));}),_0x35821f&&(_0x54d32a=_0x54d32a['then'](_0x1f8f7f=>(_0x35821f(_0x278f36,_0x1f8f7f),_0x1f8f7f))),_0x54d32a;});},sN=(_0x4e3c11,_0x5852ab,_0x43c1d5)=>{var _0x97d8a8,_0x59f6d8,_0x1cea08,_0x48e263,_0x445fcb;if(!((_0x97d8a8=_0x4e3c11==null?void(0x1b34+-0xb3*0x8+-0xc*0x1cd):_0x4e3c11['images'])!=null&&_0x97d8a8['length'])||!((_0x59f6d8=_0x4e3c11==null?void(0x437*-0x2+0x1c4a+-0x13dc):_0x4e3c11['textures'])!=null&&_0x59f6d8['length']))return[];const _0x8c6c94=(_0x1cea08=_0x43c1d5==null?void(-0x1b3b+0x1b84+-0x1*0x49):_0x43c1d5['texture'])==null?void(0x4f1+-0x45d+-0x2*0x4a):_0x1cea08['preprocess'],_0x559728=(_0x48e263=_0x43c1d5==null?void(0x2633+0x3*-0xb47+-0xd*0x56):_0x43c1d5['texture'])==null?void(-0x1*-0x2441+0x210d*0x1+0x454e*-0x1):_0x48e263['processAsy'+'nc'],_0x1a8152=(_0x445fcb=_0x43c1d5==null?void(-0x1*0x1e94+-0x14dd+-0xd*-0x3f5):_0x43c1d5['texture'])==null?void(-0x40f+-0x130d+0x171c):_0x445fcb['postproces'+'s'],_0x489ea0=new Set();return _0x4e3c11['textures']['map'](_0x510131=>{_0x8c6c94&&_0x8c6c94(_0x510131);let _0x1c9022;return _0x559728?_0x1c9022=new Promise((_0x12c17d,_0xa6f98e)=>{_0x559728(_0x510131,_0x4e3c11['images'],(_0x750077,_0x31f499)=>{_0x750077?_0xa6f98e(_0x750077):_0x12c17d(_0x31f499);});}):_0x1c9022=new Promise(_0x24d2df=>{_0x24d2df(null);}),_0x1c9022=_0x1c9022['then'](_0x2e739c=>{_0x2e739c=_0x2e739c??Qa(_0x510131);const _0x3e462a=_0x489ea0['has'](_0x2e739c);return _0x489ea0['add'](_0x2e739c),_0x5852ab[_0x2e739c]['then'](_0x3266b1=>{const _0x4b228a=_0x3e462a?yF(_0x3266b1):_0x3266b1;return JF(_0x4b228a['resource'],(_0x4e3c11['samplers']??[])[_0x510131['sampler']]),_0x4b228a;});}),_0x1a8152&&(_0x1c9022=_0x1c9022['then'](_0x2df41f=>(_0x1a8152(_0x510131,_0x2df41f),_0x2df41f))),_0x1c9022;});},iN=(_0xde86a1,_0x573ae3,_0x46a2d9,_0x275843)=>{var _0x2bef58,_0x2eeaed,_0x22ae66;if(!_0xde86a1['buffers']||_0xde86a1['buffers']['length']===0x1f91+0x11ce+-0x315f)return[];const _0x1fc244=(_0x2bef58=_0x275843==null?void(-0x6ca+0x1d95+-0x16cb):_0x275843['buffer'])==null?void(0x465*0x1+0x26cb+0x2*-0x1598):_0x2bef58['preprocess'],_0x48af3a=(_0x2eeaed=_0x275843==null?void(0x1e7e+0xaa*-0x2d+0x3*-0x34):_0x275843['buffer'])==null?void(0x114b+-0x1*-0x71d+0x16*-0x11c):_0x2eeaed['processAsy'+'nc'],_0x22f09f=(_0x22ae66=_0x275843==null?void(0x1*-0x227d+-0x1*-0x597+-0x9a2*-0x3):_0x275843['buffer'])==null?void(0x556+0x30*0x5d+0x16*-0x109):_0x22ae66['postproces'+'s'];return _0xde86a1['buffers']['map']((_0xf04c71,_0x10b084)=>{_0x1fc244&&_0x1fc244(_0xf04c71);let _0x404d26;return _0x48af3a?_0x404d26=new Promise((_0x2c1555,_0xf3bfa1)=>{_0x48af3a(_0xf04c71,(_0x417707,_0x3587df)=>{_0x417707?_0xf3bfa1(_0x417707):_0x2c1555(_0x3587df);});}):_0x404d26=new Promise(_0x23bf15=>{_0x23bf15(null);}),_0x404d26=_0x404d26['then'](_0x1d1b69=>{if(_0x1d1b69)return _0x1d1b69;if(_0xf04c71['hasOwnProp'+'erty']('uri')){if(Bv(_0xf04c71['uri'])){const _0x12ff4b=atob(_0xf04c71['uri']['split'](',')[0x131*0x13+-0x220d+0xb6b]),_0x24545d=new Uint8Array(_0x12ff4b['length']);for(let _0x5cd4b4=0x48+-0x1f97+0x1f4f;_0x5cd4b4<_0x12ff4b['length'];_0x5cd4b4++)_0x24545d[_0x5cd4b4]=_0x12ff4b['charCodeAt'](_0x5cd4b4);return _0x24545d;}return new Promise((_0x529dbf,_0x2b4736)=>{ot['get'](Vn['test'](_0xf04c71['uri'])?_0xf04c71['uri']:xe['join'](_0x46a2d9,_0xf04c71['uri']),{'cache':!(-0xa42+-0x105d+0x1*0x1a9f),'responseType':'arraybuffe'+'r','retry':!(-0x11ba*0x1+-0x8a5+0x1a60)},(_0x46b3c6,_0x5d4429)=>{_0x46b3c6?_0x2b4736(_0x46b3c6):_0x529dbf(new Uint8Array(_0x5d4429));});});}return _0x573ae3;}),_0x22f09f&&(_0x404d26=_0x404d26['then'](_0x2c1a1d=>(_0x22f09f(_0xde86a1['buffers'][_0x10b084],_0x2c1a1d),_0x2c1a1d))),_0x404d26;});},rN=(_0x9bde0b,_0x3e52d1)=>{const _0x4a7d3f=JSON['parse']((_0x311807=>{if(typeof TextDecoder<'u')return new TextDecoder()['decode'](_0x311807);let _0x4c5481='';for(let _0x2a424d=0x5*0x2a3+0x425*0x7+0x16*-0x1eb;_0x2a424d<_0x311807['length'];_0x2a424d++)_0x4c5481+=String['fromCharCo'+'de'](_0x311807[_0x2a424d]);return decodeURIComponent(escape(_0x4c5481));})(_0x9bde0b));if(_0x4a7d3f['asset']&&_0x4a7d3f['asset']['version']&&parseFloat(_0x4a7d3f['asset']['version'])<0x22*0x10c+-0x2ef*0x4+-0x17da){_0x3e52d1('Invalid\x20gl'+'tf\x20version'+'.\x20Expected'+'\x20version\x202'+'.0\x20or\x20abov'+'e\x20but\x20foun'+'d\x20version\x20'+'\x27'+_0x4a7d3f['asset']['version']+'\x27.');return;}_0x3e52d1(null,_0x4a7d3f);},aN=(_0x2e4b4b,_0x36d60a)=>{const _0x4556cc=_0x2e4b4b instanceof ArrayBuffer?new DataView(_0x2e4b4b):new DataView(_0x2e4b4b['buffer'],_0x2e4b4b['byteOffset'],_0x2e4b4b['byteLength']),_0x1d01b7=_0x4556cc['getUint32'](0x24a7+-0x92+-0x3*0xc07,!(0x4*0x15f+-0x1*0x176b+0x11ef)),_0x3b061e=_0x4556cc['getUint32'](0x1a+0x1bb4+-0x1bca,!(-0x11*-0x1b2+0x96f+0x577*-0x7)),_0x29d527=_0x4556cc['getUint32'](0x672+-0x15cc+-0x166*-0xb,!(-0x4*-0x32f+-0xcd3+0x17));if(_0x1d01b7!==0x34ce8aa2+0x533d5ed*0x1b+-0x7af1ae3a){_0x36d60a('Invalid\x20ma'+'gic\x20number'+'\x20found\x20in\x20'+'glb\x20header'+'.\x20Expected'+'\x200x46546C6'+'7,\x20found\x200'+'x'+_0x1d01b7['toString'](-0x2*0x3fa+-0x3*-0x6df+-0x4b*0x2b));return;}if(_0x3b061e!==-0x1467+0x1f*0x4b+0xb54){_0x36d60a('Invalid\x20ve'+'rsion\x20numb'+'er\x20found\x20i'+'n\x20glb\x20head'+'er.\x20Expect'+'ed\x202,\x20foun'+'d\x20'+_0x3b061e);return;}if(_0x29d527<=-0xa75+0x21ff+-0x178a||_0x29d527>_0x4556cc['byteLength']){_0x36d60a('Invalid\x20le'+'ngth\x20found'+'\x20in\x20glb\x20he'+'ader.\x20Foun'+'d\x20'+_0x29d527);return;}const _0x1f697a=[];let _0x116b90=0x2120+-0xfca+-0x114a;for(;_0x116b90<_0x29d527;){const _0x136446=_0x4556cc['getUint32'](_0x116b90,!(0x14e8*0x1+0xc91*-0x2+-0x2*-0x21d));_0x116b90+_0x136446+(0x2*0x11d2+-0x193d+-0x213*0x5)>_0x4556cc['byteLength']&&_0x36d60a('Invalid\x20ch'+'unk\x20length'+'\x20found\x20in\x20'+'glb.\x20Found'+'\x20'+_0x136446);const _0x48a6d9=_0x4556cc['getUint32'](_0x116b90+(-0x133*-0x1+0x5*-0x757+-0x2384*-0x1),!(0x392*0x1+0xd7e+-0x1110)),_0x5d7c35=new Uint8Array(_0x4556cc['buffer'],_0x4556cc['byteOffset']+_0x116b90+(0x377+0x1862+-0x1bd1),_0x136446);_0x1f697a['push']({'length':_0x136446,'type':_0x48a6d9,'data':_0x5d7c35}),_0x116b90+=_0x136446+(-0x87f+0x1411+-0x1*0xb8a);}if(_0x1f697a['length']!==-0x2*0x48d+0x1*-0x180d+0x2128&&_0x1f697a['length']!==0x5*0x5c9+-0x4af+-0x183c){_0x36d60a('Invalid\x20nu'+'mber\x20of\x20ch'+'unks\x20found'+'\x20in\x20glb\x20fi'+'le.');return;}if(_0x1f697a[0x2a0+-0x1*0x1539+-0x45*-0x45]['type']!==-0x623d8f74+-0x4c7*0x1e901d+0x1*0x1428f5d49){_0x36d60a('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x4'+'E4F534A,\x20f'+'ound\x200x'+_0x1f697a[0x1b7d+0x4c*0x78+-0x3f1d]['type']['toString'](0x1f91+0x19b0+0x1*-0x3931));return;}if(_0x1f697a['length']>-0x103+0x159f+-0x5*0x41f&&_0x1f697a[-0x1*-0x1039+-0x2408+0x13d0]['type']!==0x95fd8e*-0x1+0x6b3a2*0x9+0xd6*0xc8ed){_0x36d60a('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x0'+'04E4942,\x20f'+'ound\x200x'+_0x1f697a[-0xf97*-0x1+-0x156*-0x17+-0x2*0x1728]['type']['toString'](0x1acf+-0x2361*-0x1+-0x3e20));return;}_0x36d60a(null,{'gltfChunk':_0x1f697a[-0x1*0x1cc9+0x15*-0xb3+-0xade*-0x4]['data'],'binaryChunk':_0x1f697a['length']===-0x1*0x189d+-0x826+0x20c5?_0x1f697a[0x328+0x1adc+-0x1e03]['data']:null});},nN=(_0x5171f5,_0x50bccf,_0x3efac4)=>{const _0x150968=()=>{const _0xe44e1a=new Uint8Array(_0x50bccf);return _0xe44e1a[-0x1*-0xbd5+0x5c*0x49+-0x79d*0x5]===-0x2507+-0x98f+0x2efd&&_0xe44e1a[0x2f8+-0xd*-0xdf+-0xe4a]===-0x50c+0x3*-0x23f+0xc35&&_0xe44e1a[-0x1042+-0x6*-0x58c+-0x1104]===-0x83e*-0x1+-0xcbe+-0xce*-0x6&&_0xe44e1a[-0x1389+-0x7d*0x4+0x1580]===0x5dc+0x784+-0xd1a;};_0x5171f5&&_0x5171f5['toLowerCas'+'e']()['endsWith']('.glb')||_0x150968()?aN(_0x50bccf,_0x3efac4):_0x3efac4(null,{'gltfChunk':_0x50bccf,'binaryChunk':null});},oN=(_0x5505df,_0x5f17f1,_0x18fa63)=>{var _0x4efc70,_0x248aaa,_0x46bc98,_0x1acd49;const _0x3eea2f=[],_0x42f1fb=(_0x4efc70=_0x18fa63==null?void(-0x73d+0xfd0*0x1+-0x893):_0x18fa63['bufferView'])==null?void(0x1278*0x2+-0xd*0xc9+0x8e9*-0x3):_0x4efc70['preprocess'],_0x6e6fa2=(_0x248aaa=_0x18fa63==null?void(-0x5*0x589+-0x1*0x1366+-0x27*-0x135):_0x18fa63['bufferView'])==null?void(0x1366+0xde+-0x1444*0x1):_0x248aaa['processAsy'+'nc'],_0x58dac8=(_0x46bc98=_0x18fa63==null?void(0xbca*0x2+-0xad*-0x24+-0x2fe8):_0x18fa63['bufferView'])==null?void(0x1fc8+0x171+-0x2139):_0x46bc98['postproces'+'s'];if(!((_0x1acd49=_0x5505df['bufferView'+'s'])!=null&&_0x1acd49['length']))return _0x3eea2f;for(let _0x104390=-0x2576+0x115*0x1a+0x2*0x4aa;_0x104390<_0x5505df['bufferView'+'s']['length'];++_0x104390){const _0xffa596=_0x5505df['bufferView'+'s'][_0x104390];_0x42f1fb&&_0x42f1fb(_0xffa596);let _0x3caae8;_0x6e6fa2?_0x3caae8=new Promise((_0xda9cbc,_0xcecbab)=>{_0x6e6fa2(_0xffa596,_0x5f17f1,(_0x352e61,_0x49e465)=>{_0x352e61?_0xcecbab(_0x352e61):_0xda9cbc(_0x49e465);});}):_0x3caae8=new Promise(_0x1a4365=>{_0x1a4365(null);}),_0x3caae8=_0x3caae8['then'](_0x4bb642=>_0x4bb642||_0x5f17f1[_0xffa596['buffer']]['then'](_0x48f85a=>new Uint8Array(_0x48f85a['buffer'],_0x48f85a['byteOffset']+(_0xffa596['byteOffset']||-0x2*0xaeb+-0x70+0x2*0xb23),_0xffa596['byteLength']))),_0xffa596['hasOwnProp'+'erty']('byteStride')&&(_0x3caae8=_0x3caae8['then'](_0x118807=>(_0x118807['byteStride']=_0xffa596['byteStride'],_0x118807))),_0x58dac8&&(_0x3caae8=_0x3caae8['then'](_0x5c8458=>(_0x58dac8(_0xffa596,_0x5c8458),_0x5c8458))),_0x3eea2f['push'](_0x3caae8);}return _0x3eea2f;};class mh{static['parse'](_0x1b1b1d,_0xf00d13,_0x12d938,_0x1b8b10,_0x570e9f,_0x384d75,_0x1c3196){nN(_0x1b1b1d,_0x12d938,(_0x5a9f8f,_0x5bc5b9)=>{if(_0x5a9f8f){_0x1c3196(_0x5a9f8f);return;}rN(_0x5bc5b9['gltfChunk'],(_0x1566c2,_0x1a8f16)=>{if(_0x1566c2){_0x1c3196(_0x1566c2);return;}const _0x392607=iN(_0x1a8f16,_0x5bc5b9['binaryChun'+'k'],_0xf00d13,_0x384d75),_0x3be756=oN(_0x1a8f16,_0x392607,_0x384d75),_0x4627fe=tN(_0x1a8f16,_0x3be756,_0xf00d13,_0x570e9f,_0x384d75),_0xcccf0d=sN(_0x1a8f16,_0x4627fe,_0x384d75);QF(_0x1b8b10,_0x1a8f16,_0x3be756,_0xcccf0d,_0x384d75)['then'](_0xfd3a51=>_0x1c3196(null,_0xfd3a51))['catch'](_0x3aeb4f=>_0x1c3196(_0x3aeb4f));});});}static['createDefa'+'ultMateria'+'l'](){return Vv({'name':'defaultGlb'+'Material'},[]);}}class lN extends Qe{constructor(_0x2969f0){super(_0x2969f0,'animation'),this['device']=_0x2969f0['graphicsDe'+'vice'],this['assets']=_0x2969f0['assets'];}['load'](_0x4314c4,_0x2897fa,_0x456cdc){typeof _0x4314c4=='string'&&(_0x4314c4={'load':_0x4314c4,'original':_0x4314c4});const _0x3c0388={'retry':this['maxRetries']>-0x7*0x83+0xd9d+0x6*-0x1ac,'maxRetries':this['maxRetries']};(_0x4314c4['load']['startsWith']('blob:')||_0x4314c4['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x4314c4['original'])['toLowerCas'+'e']()==='.glb'?_0x3c0388['responseTy'+'pe']=Is['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x3c0388['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x4314c4['load'],_0x3c0388,(_0x1b1c94,_0x26f385)=>{_0x1b1c94?_0x2897fa('Error\x20load'+'ing\x20animat'+'ion\x20resour'+'ce:\x20'+_0x4314c4['original']+'\x20['+_0x1b1c94+']'):xe['getExtensi'+'on'](_0x4314c4['original'])['toLowerCas'+'e']()==='.glb'?mh['parse']('filename.g'+'lb','',_0x26f385,this['device'],this['assets'],(_0x456cdc==null?void(-0x7f7*-0x2+0x5*0x335+-0x1ff7):_0x456cdc['options'])??{},(_0x5d0018,_0x225d93)=>{var _0x2ca8ea;if(_0x5d0018)_0x2897fa(_0x5d0018);else{const _0x533324=_0x225d93['animations'];if((_0x2ca8ea=_0x456cdc==null?void(-0x245f+-0x83*0x46+-0x4831*-0x1):_0x456cdc['data'])!=null&&_0x2ca8ea['events']){for(let _0x3c1dd8=0xa5b*0x2+0x1966+0xe3*-0x34;_0x3c1dd8<_0x533324['length'];_0x3c1dd8++)_0x533324[_0x3c1dd8]['events']=new ov(Object['values'](_0x456cdc['data']['events']));}_0x225d93['destroy'](),_0x2897fa(null,_0x533324);}}):_0x2897fa(null,this['_parseAnim'+'ationV'+_0x26f385['animation']['version']](_0x26f385));});}['open'](_0x997673,_0x452cfe,_0x4c0729){return _0x452cfe;}['_parseAnim'+'ationV3'](_0x2070b1){const _0x3cb4fc=_0x2070b1['animation'],_0x2c58a2=new U_();_0x2c58a2['name']=_0x3cb4fc['name'],_0x2c58a2['duration']=_0x3cb4fc['duration'];for(let _0x59f960=-0xe39+0x17ce+-0x995*0x1;_0x59f960<_0x3cb4fc['nodes']['length'];_0x59f960++){const _0x5b3cbd=new k_(),_0x4cf03d=_0x3cb4fc['nodes'][_0x59f960];_0x5b3cbd['_name']=_0x4cf03d['name'];for(let _0x4cb4db=-0x565*0x5+0xe2+0x1a17;_0x4cb4db<_0x4cf03d['keys']['length'];_0x4cb4db++){const _0x396e8e=_0x4cf03d['keys'][_0x4cb4db],_0x2f868e=_0x396e8e['time'],_0x289a74=_0x396e8e['pos'],_0x2d893b=_0x396e8e['rot'],_0x1309d8=_0x396e8e['scale'],_0x143be2=new D(_0x289a74[0x2e3*-0x1+-0x2709+0xa7b*0x4],_0x289a74[0x800+-0xfa6+-0x1*-0x7a7],_0x289a74[-0x3*-0xc1f+-0xa*-0xd3+-0x2c99]),_0x4f5290=new le()['setFromEul'+'erAngles'](_0x2d893b[0x18d+-0x120a+0x25b*0x7],_0x2d893b[0x43e+0xe22+0x125f*-0x1],_0x2d893b[-0x6ce*-0x1+0x215c+0x505*-0x8]),_0x5b56c3=new D(_0x1309d8[0xf9f+0xb53+-0x1af2],_0x1309d8[0x1c24+-0xa9*0x2c+0xe9],_0x1309d8[-0x1acf+-0x2e*-0xb6+0x89*-0xb]),_0x2597e6=new N_(_0x2f868e,_0x143be2,_0x4f5290,_0x5b56c3);_0x5b3cbd['_keys']['push'](_0x2597e6);}_0x2c58a2['addNode'](_0x5b3cbd);}return _0x2c58a2;}['_parseAnim'+'ationV4'](_0x5189a9){const _0x19fc58=_0x5189a9['animation'],_0x20dafe=new U_();_0x20dafe['name']=_0x19fc58['name'],_0x20dafe['duration']=_0x19fc58['duration'];for(let _0x1c385c=0x26c7+0x79d+-0x2e64;_0x1c385c<_0x19fc58['nodes']['length'];_0x1c385c++){const _0x4c1aa5=new k_(),_0x5987d3=_0x19fc58['nodes'][_0x1c385c];_0x4c1aa5['_name']=_0x5987d3['name'];const _0x23dc52=_0x5987d3['defaults']['p'],_0x739b7f=_0x5987d3['defaults']['r'],_0x148166=_0x5987d3['defaults']['s'];for(let _0xa34701=-0x21e3+-0x6a+-0x1*-0x224d;_0xa34701<_0x5987d3['keys']['length'];_0xa34701++){const _0x11545e=_0x5987d3['keys'][_0xa34701],_0x20b481=_0x11545e['t'],_0x2b85f6=_0x23dc52||_0x11545e['p'],_0x1f4882=_0x739b7f||_0x11545e['r'],_0x395a9c=_0x148166||_0x11545e['s'],_0x56f866=new D(_0x2b85f6[0x929+-0x1f80+0x1657],_0x2b85f6[0x1*0x25fa+-0x1760+-0x25*0x65],_0x2b85f6[0x8d*-0x25+0x1444+0x1f]),_0x5f38c2=new le()['setFromEul'+'erAngles'](_0x1f4882[-0x1f62+-0x74*-0x36+0x3*0x24e],_0x1f4882[-0x5*0x584+0x1a3b+0x15a],_0x1f4882[-0xb30+0x2044+-0x1512]),_0x13ec54=new D(_0x395a9c[-0x1fa7+0x11*0x3a+-0x287*-0xb],_0x395a9c[-0x1069*-0x1+0x1ca7+-0x2d0f],_0x395a9c[-0x139f+-0x8f2+0x85*0x37]),_0x2efd2a=new N_(_0x20b481,_0x56f866,_0x5f38c2,_0x13ec54);_0x4c1aa5['_keys']['push'](_0x2efd2a);}_0x20dafe['addNode'](_0x4c1aa5);}return _0x20dafe;}}class cN extends Qe{constructor(_0x2f79e9){super(_0x2f79e9,'animclip');}['load'](_0x2323d9,_0x344daa){typeof _0x2323d9=='string'&&(_0x2323d9={'load':_0x2323d9,'original':_0x2323d9});const _0x5589aa={'retry':this['maxRetries']>0x6ea+-0x1*0x11fb+0xb11,'maxRetries':this['maxRetries']};_0x2323d9['load']['startsWith']('blob:')&&(_0x5589aa['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x2323d9['load'],_0x5589aa,(_0x4132b4,_0x4726a1)=>{_0x4132b4?_0x344daa('Error\x20load'+'ing\x20animat'+'ion\x20clip\x20r'+'esource:\x20'+_0x2323d9['original']+'\x20['+_0x4132b4+']'):_0x344daa(null,_0x4726a1);});}['open'](_0x2670cb,_0x5341b3){const _0x48c52b=_0x5341b3['name'],_0x59b0f1=_0x5341b3['duration'],_0x1a3e3f=_0x5341b3['inputs']['map'](_0x4be4c7=>new uh(0x10f*0x4+0x9d+-0x4d8,_0x4be4c7)),_0x547f19=_0x5341b3['outputs']['map'](_0x4a0a77=>new uh(_0x4a0a77['components'],_0x4a0a77['data'])),_0x40b3ed=_0x5341b3['curves']['map'](_0x2ca6bb=>new Uv([_0x2ca6bb['path']],_0x2ca6bb['inputIndex'],_0x2ca6bb['outputInde'+'x'],_0x2ca6bb['interpolat'+'ion']));return new Zi(_0x48c52b,_0x59b0f1,_0x1a3e3f,_0x547f19,_0x40b3ed);}}class hN extends Qe{constructor(_0x546758){super(_0x546758,'animstateg'+'raph');}['load'](_0x1e42a2,_0xcd7034){typeof _0x1e42a2=='string'&&(_0x1e42a2={'load':_0x1e42a2,'original':_0x1e42a2});const _0x1dadd2={'retry':this['maxRetries']>-0x1*-0x1bc5+0x16f6+-0x32bb,'maxRetries':this['maxRetries']};_0x1e42a2['load']['startsWith']('blob:')&&(_0x1dadd2['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x1e42a2['load'],_0x1dadd2,(_0x341f0f,_0x139893)=>{_0x341f0f?_0xcd7034('Error\x20load'+'ing\x20animat'+'ion\x20state\x20'+'graph\x20reso'+'urce:\x20'+_0x1e42a2['original']+'\x20['+_0x341f0f+']'):_0xcd7034(null,_0x139893);});}['open'](_0x5d95ce,_0x2569f2){return new Ic(_0x2569f2);}}const rf=(function(){if(typeof window>'u')return!(-0x7*-0x145+-0x6ec+-0x1f6);const _0x1924ae=window['navigator']['userAgent'],_0x49ee56=_0x1924ae['indexOf']('MSIE\x20');if(_0x49ee56>0x1*-0x2203+0x24e8*-0x1+-0x46eb*-0x1)return parseInt(_0x1924ae['substring'](_0x49ee56+(0x1dfb+-0xb6b*0x2+0x13*-0x60),_0x1924ae['indexOf']('.',_0x49ee56)),0x1a44+-0x1e49*-0x1+-0x3883);if(_0x1924ae['indexOf']('Trident/')>0x1995+0x15e4+0x2f79*-0x1){const _0x2e2b49=_0x1924ae['indexOf']('rv:');return parseInt(_0x1924ae['substring'](_0x2e2b49+(-0xd*-0x195+0x1ebc+-0x334a),_0x1924ae['indexOf']('.',_0x2e2b49)),-0x7cd+-0x11d8+0x19af);}return!(-0x13*0x17+-0x1*-0x377+-0x1c1);}()),dN=['.ogg','.mp3','.wav','.mp4a','.m4a','.mp4','.aac','.opus'];class fN extends Qe{constructor(_0x5101ec){super(_0x5101ec,'audio'),this['manager']=_0x5101ec['soundManag'+'er'],w['assert'](this['manager'],'AudioHandl'+'er\x20cannot\x20'+'be\x20created'+'\x20without\x20s'+'ound\x20manag'+'er');}['_isSupport'+'ed'](_0x419181){const _0x361718=xe['getExtensi'+'on'](_0x419181);return dN['indexOf'](_0x361718)>-(0x3*0x33f+-0x142c+0xa70)||_0x419181['startsWith']('blob:');}['load'](_0x3297f7,_0x5dea84){typeof _0x3297f7=='string'&&(_0x3297f7={'load':_0x3297f7,'original':_0x3297f7});const _0x593787=function(_0x2011ae){_0x5dea84(null,new qT(_0x2011ae));},_0x180527=function(_0x399676){let _0x2d8887='Error\x20load'+'ing\x20audio\x20'+'url:\x20'+_0x3297f7['original'];_0x399676&&(_0x2d8887+=':\x20'+(_0x399676['message']||_0x399676)),console['warn'](_0x2d8887),_0x5dea84(_0x2d8887);};if(this['_createSou'+'nd']){if(!this['_isSupport'+'ed'](_0x3297f7['original'])){_0x180527('Audio\x20form'+'at\x20for\x20'+_0x3297f7['original']+('\x20not\x20suppo'+'rted'));return;}this['_createSou'+'nd'](_0x3297f7['load'],_0x593787,_0x180527);}else _0x180527(null);}['_createSou'+'nd'](_0x188d76,_0x4ef027,_0x491f50){if(gl()){const _0x55b326=this['manager'];if(!_0x55b326['context']){_0x491f50('Audio\x20mana'+'ger\x20has\x20no'+'\x20audio\x20con'+'text');return;}const _0x14c9cf={'retry':this['maxRetries']>0x2245+-0x251b+-0x79*-0x6,'maxRetries':this['maxRetries']};(_0x188d76['startsWith']('blob:')||_0x188d76['startsWith']('data:'))&&(_0x14c9cf['responseTy'+'pe']=Is['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']),ot['get'](_0x188d76,_0x14c9cf,(_0x1718d0,_0x56aed5)=>{if(_0x1718d0){_0x491f50(_0x1718d0);return;}_0x55b326['context']['decodeAudi'+'oData'](_0x56aed5,_0x4ef027,_0x491f50);});}else{let _0x5c8b6b=null;try{_0x5c8b6b=new Audio();}catch{_0x491f50('No\x20support'+'\x20for\x20Audio'+'\x20element');return;}rf&&document['body']['appendChil'+'d'](_0x5c8b6b);const _0x57f5be=function(){_0x5c8b6b['removeEven'+'tListener']('canplaythr'+'ough',_0x57f5be),rf&&document['body']['removeChil'+'d'](_0x5c8b6b),_0x4ef027(_0x5c8b6b);};_0x5c8b6b['onerror']=function(){_0x5c8b6b['onerror']=null,rf&&document['body']['removeChil'+'d'](_0x5c8b6b),_0x491f50();},_0x5c8b6b['addEventLi'+'stener']('canplaythr'+'ough',_0x57f5be),_0x5c8b6b['src']=_0x188d76;}}}class uN extends Qe{constructor(_0x12d799){super(_0x12d799,'binary');}['load'](_0x7c5879,_0x163549){typeof _0x7c5879=='string'&&(_0x7c5879={'load':_0x7c5879,'original':_0x7c5879}),ot['get'](_0x7c5879['load'],{'responseType':Is['ResponseTy'+'pe']['ARRAY_BUFF'+'ER'],'retry':this['maxRetries']>-0x295+0x1*0x80f+-0x57a,'maxRetries':this['maxRetries']},(_0x8e4e36,_0x526796)=>{_0x8e4e36?_0x163549('Error\x20load'+'ing\x20binary'+'\x20resource:'+'\x20'+_0x7c5879['original']+'\x20['+_0x8e4e36+']'):_0x163549(null,_0x526796);});}['openBinary'](_0x59ab97){return _0x59ab97['buffer'];}}class mr{constructor(_0x1a4ba9,_0x4b351f,_0x2ec923,_0x510775){const _0x1126ef=function(_0x5b8674,_0x1c8ff3,_0x4a1683){const _0x79e9b8=mr['createAsse'+'t'](_0x4b351f['name'],_0x5b8674,_0x1c8ff3,_0x4a1683);return _0x2ec923['add'](_0x79e9b8),_0x79e9b8;},_0x68b2b7=[];for(let _0x484c9c=-0xd19+0x1ff5+-0x12dc;_0x484c9c<_0x1a4ba9['renders']['length'];++_0x484c9c)_0x68b2b7['push'](_0x1126ef('render',_0x1a4ba9['renders'][_0x484c9c],_0x484c9c));const _0x7eec=[];for(let _0x2edf28=-0x1da1+-0x86d*0x1+0x2*0x1307;_0x2edf28<_0x1a4ba9['materials']['length'];++_0x2edf28)_0x7eec['push'](_0x1126ef('material',_0x1a4ba9['materials'][_0x2edf28],_0x2edf28));const _0x5d4fdc=[];for(let _0x340ac5=0x16f*-0x2+-0x1e1d+0x20fb;_0x340ac5<_0x1a4ba9['animations']['length'];++_0x340ac5)_0x5d4fdc['push'](_0x1126ef('animation',_0x1a4ba9['animations'][_0x340ac5],_0x340ac5));this['data']=_0x1a4ba9,this['_model']=null,this['_assetName']=_0x4b351f['name'],this['_assets']=_0x2ec923,this['_defaultMa'+'terial']=_0x510775,this['renders']=_0x68b2b7,this['materials']=_0x7eec,this['textures']=_0x1a4ba9['textures'],this['animations']=_0x5d4fdc;}get['model'](){if(!this['_model']){const _0x278b00=mr['createMode'+'l'](this['data'],this['_defaultMa'+'terial']),_0x1f7cf0=mr['createAsse'+'t'](this['_assetName'],'model',_0x278b00,-0x1145*0x1+0x1c6f+-0xb2a);this['_assets']['add'](_0x1f7cf0),this['_model']=_0x1f7cf0;}return this['_model'];}static['createAsse'+'t'](_0x2ec2aa,_0x4ffde0,_0x1adcee,_0x3ba378){const _0x566f8a=new pe(_0x2ec2aa+'/'+_0x4ffde0+'/'+_0x3ba378,_0x4ffde0,{'url':''});return _0x566f8a['resource']=_0x1adcee,_0x566f8a['loaded']=!(-0xcaa*-0x1+0x6ca+-0x1374),_0x566f8a;}['instantiat'+'eModelEnti'+'ty'](_0x5bb57f){const _0x5221b4=new lt(void(0x2df*-0x1+-0xae0+-0xdbf*-0x1),this['_assets']['_loader']['_app']);return _0x5221b4['addCompone'+'nt']('model',Object['assign']({'type':'asset','asset':this['model']},_0x5bb57f)),_0x5221b4;}['instantiat'+'eRenderEnt'+'ity'](_0x144e7a){const _0x5c1633=this['_defaultMa'+'terial'],_0x3fb5c1=[],_0x5c5c91=function(_0x19eabb,_0x290d92,_0x3ea8a5,_0x2879f7,_0x126373,_0x45cd93,_0x759c70,_0x35e49a){const _0x44512e=_0x126373[_0x3ea8a5['id']],_0x4df6e9=_0x44512e===void(0x703*0x3+-0x53b*-0x1+0x2*-0xd22)?_0x5c1633:_0x2879f7[_0x44512e],_0x2aa2d2=new He(_0x3ea8a5,_0x4df6e9);_0x3ea8a5['morph']&&(_0x2aa2d2['morphInsta'+'nce']=new _a(_0x3ea8a5['morph'])),_0x759c70['hasOwnProp'+'erty']('skin')&&_0x3fb5c1['push']({'meshInstance':_0x2aa2d2,'rootBone':_0x19eabb,'entity':_0x290d92});const _0x2cf309=_0x35e49a['get'](_0x759c70);if(_0x2cf309){const _0x1860cb=_0x2cf309['matrices'],_0x423add=kt['getDefault'+'Instancing'+'Format'](_0x3ea8a5['device']),_0x5691a8=new Ds(_0x3ea8a5['device'],_0x423add,_0x1860cb['length']/(-0x3fb+-0x25d9+0x1*0x29e4),{'data':_0x1860cb});_0x2aa2d2['setInstanc'+'ing'](_0x5691a8),_0x2aa2d2['instancing'+'Data']['_destroyVe'+'rtexBuffer']=!(0x142a+-0x17a1+-0x377*-0x1);}return _0x2aa2d2;},_0x32ca6f=(_0x404406,_0x48b9e8,_0x5e0267)=>{const _0x24db88=new lt(void(-0x103*0x15+-0x218c*0x1+0x36cb),this['_assets']['_loader']['_app']);_0x48b9e8['_cloneInte'+'rnal'](_0x24db88),_0x404406||(_0x404406=_0x24db88);let _0x50449e=null,_0x30bd2d=null;for(let _0xf0deb1=0x8d*-0x7+0x1323+0x8*-0x1e9;_0xf0deb1<_0x5e0267['nodes']['length'];_0xf0deb1++)if(_0x5e0267['nodes'][_0xf0deb1]===_0x48b9e8){const _0x42b6a8=_0x5e0267['gltf']['nodes'][_0xf0deb1];if(_0x42b6a8['hasOwnProp'+'erty']('mesh')){const _0x1489eb=_0x5e0267['renders'][_0x42b6a8['mesh']]['meshes'];_0x30bd2d=this['renders'][_0x42b6a8['mesh']];for(let _0x1818ea=-0xfa*0x2+-0x26*0xac+-0x2*-0xdbe;_0x1818ea<_0x1489eb['length'];_0x1818ea++){const _0x2b1664=_0x1489eb[_0x1818ea];if(_0x2b1664){const _0x4f53f3=_0x5c5c91(_0x404406,_0x24db88,_0x2b1664,_0x5e0267['materials'],_0x5e0267['meshDefaul'+'tMaterials'],_0x5e0267['skins'],_0x42b6a8,_0x5e0267['nodeInstan'+'cingMap']);_0x50449e||(_0x50449e=[]),_0x50449e['push'](_0x4f53f3);}}}if(_0x5e0267['lights']){const _0x1d963d=_0x5e0267['lights']['get'](_0x42b6a8);_0x1d963d&&_0x24db88['addChild'](_0x1d963d['clone']());}if(_0x5e0267['cameras']){const _0x50eacf=_0x5e0267['cameras']['get'](_0x42b6a8);_0x50eacf&&_0x50eacf['camera']['system']['cloneCompo'+'nent'](_0x50eacf,_0x24db88);}}_0x50449e&&(_0x24db88['addCompone'+'nt']('render',Object['assign']({'type':'asset','meshInstances':_0x50449e},_0x144e7a)),_0x24db88['render']['assignAsse'+'t'](_0x30bd2d));const _0x517836=_0x48b9e8['children'];for(let _0x39b788=-0x198b+-0x6c*0x13+-0x30d*-0xb;_0x39b788<_0x517836['length'];_0x39b788++){const _0x28dd66=_0x32ca6f(_0x404406,_0x517836[_0x39b788],_0x5e0267);_0x24db88['addChild'](_0x28dd66);}return _0x24db88;},_0x674ad5=[];for(const _0x2c5d74 of this['data']['scenes'])_0x674ad5['push'](_0x32ca6f(null,_0x2c5d74,this['data']));return _0x3fb5c1['forEach'](_0x20bae4=>{_0x20bae4['meshInstan'+'ce']['skinInstan'+'ce']=il['createCach'+'edSkinInst'+'ance'](_0x20bae4['meshInstan'+'ce']['mesh']['skin'],_0x20bae4['rootBone'],_0x20bae4['entity']),_0x20bae4['meshInstan'+'ce']['node']['render']['rootBone']=_0x20bae4['rootBone'];}),mr['createScen'+'eHierarchy'](_0x674ad5,lt);}['getMateria'+'lVariants'](){return this['data']['variants']?Object['keys'](this['data']['variants']):[];}['applyMater'+'ialVariant'](_0x5223b4,_0xc168ec){const _0x298fda=_0xc168ec?this['data']['variants'][_0xc168ec]:null;if(_0x298fda===void(-0xb98+0x1259*-0x2+0x304a)){w['warn']('No\x20variant'+'\x20named\x20'+_0xc168ec+('\x20exists\x20in'+'\x20resource'));return;}const _0x590458=_0x5223b4['findCompon'+'ents']('render');for(let _0x9890f0=-0x19f1*0x1+-0xd14+0x2705*0x1;_0x9890f0<_0x590458['length'];_0x9890f0++){const _0x3766b0=_0x590458[_0x9890f0];this['_applyMate'+'rialVarian'+'t'](_0x298fda,_0x3766b0['meshInstan'+'ces']);}}['applyMater'+'ialVariant'+'Instances'](_0x629eb0,_0x237986){const _0x525a9e=_0x237986?this['data']['variants'][_0x237986]:null;if(_0x525a9e===void(0x13bb+0x1e91+-0x324c)){w['warn']('No\x20variant'+'\x20named\x20'+_0x237986+('\x20exists\x20in'+'\x20resource'));return;}this['_applyMate'+'rialVarian'+'t'](_0x525a9e,_0x629eb0);}['_applyMate'+'rialVarian'+'t'](_0x357946,_0x4d7874){_0x4d7874['forEach'](_0x1771fe=>{if(_0x357946===null)_0x1771fe['material']=this['_defaultMa'+'terial'];else{const _0x476aba=this['data']['meshVarian'+'ts'][_0x1771fe['mesh']['id']];_0x476aba&&(_0x1771fe['material']=this['data']['materials'][_0x476aba[_0x357946]]);}w['assert'](_0x1771fe['material']);});}static['createScen'+'eHierarchy'](_0x2c3bdc,_0x4b00a2){let _0x5f354a=null;if(_0x2c3bdc['length']===0x4*-0x2f2+-0x2f2*0xb+0x2c2f)_0x5f354a=_0x2c3bdc[0x8fe+-0x1002+0x382*0x2];else{_0x5f354a=new _0x4b00a2('SceneGroup');for(const _0x5c4226 of _0x2c3bdc)_0x5f354a['addChild'](_0x5c4226);}return _0x5f354a;}static['createMode'+'l'](_0x3c3e4c,_0x140752){const _0x1d7c9e=function(_0x4818b6,_0x35df20,_0x40a1f0,_0x14cabe,_0x346083,_0x1ac9c5,_0x46e937){const _0x985b35=_0x3c3e4c['meshDefaul'+'tMaterials'][_0x35df20['id']],_0xc349b7=_0x985b35===void(0xae8+-0x18d*0x2+-0x7ce)?_0x140752:_0x346083[_0x985b35],_0x482274=new He(_0x35df20,_0xc349b7,_0x1ac9c5);if(_0x35df20['morph']){const _0x2ff103=new _a(_0x35df20['morph']);_0x482274['morphInsta'+'nce']=_0x2ff103,_0x4818b6['morphInsta'+'nces']['push'](_0x2ff103);}if(_0x46e937['hasOwnProp'+'erty']('skin')){const _0x1507b9=_0x46e937['skin'],_0x44dd13=_0x40a1f0[_0x1507b9];_0x35df20['skin']=_0x44dd13;const _0x53c3b6=_0x14cabe[_0x1507b9];_0x482274['skinInstan'+'ce']=_0x53c3b6,_0x4818b6['skinInstan'+'ces']['push'](_0x53c3b6);}_0x4818b6['meshInstan'+'ces']['push'](_0x482274);},_0x3f64f3=new tr(),_0x21e22f=[];for(const _0xe4963d of _0x3c3e4c['skins']){const _0x6e388c=new xl(_0xe4963d);_0x6e388c['bones']=_0xe4963d['bones'],_0x21e22f['push'](_0x6e388c);}_0x3f64f3['graph']=mr['createScen'+'eHierarchy'](_0x3c3e4c['scenes'],Ie);for(let _0x18ae1f=-0x1*-0xf9e+-0x2665+0x16c7;_0x18ae1f<_0x3c3e4c['nodes']['length'];_0x18ae1f++){const _0x1647d6=_0x3c3e4c['nodes'][_0x18ae1f];if(_0x1647d6['root']===_0x3f64f3['graph']){const _0x2fd8e5=_0x3c3e4c['gltf']['nodes'][_0x18ae1f];if(_0x2fd8e5['hasOwnProp'+'erty']('mesh')){const _0x4892ce=_0x3c3e4c['renders'][_0x2fd8e5['mesh']]['meshes'];for(let _0xb835fb=-0x3*0x551+-0xb*-0x317+-0x120a;_0xb835fb<_0x4892ce['length'];_0xb835fb++){const _0x23d4e8=_0x4892ce[_0xb835fb];_0x23d4e8&&_0x1d7c9e(_0x3f64f3,_0x23d4e8,_0x3c3e4c['skins'],_0x21e22f,_0x3c3e4c['materials'],_0x1647d6,_0x2fd8e5);}}}}return _0x3f64f3;}['destroy'](){const _0x57cdd9=this['_assets'],_0x515e2c=function(_0xaf5e28){_0x57cdd9['remove'](_0xaf5e28),_0xaf5e28['unload']();},_0xd66fb2=function(_0x1ed1bc){_0x1ed1bc['forEach'](_0x54a605=>{_0x515e2c(_0x54a605);});};this['animations']&&(_0xd66fb2(this['animations']),this['animations']=null),this['textures']&&(_0xd66fb2(this['textures']),this['textures']=null),this['materials']&&(_0xd66fb2(this['materials']),this['materials']=null),this['renders']&&(_0xd66fb2(this['renders']),this['renders']=null),this['_model']&&(_0x515e2c(this['_model']),this['_model']=null),this['data']=null,this['assets']=null;}}class pN{constructor(_0x31d646,_0x4b213d,_0x44e5e5){this['_device']=_0x31d646,this['_assets']=_0x4b213d,this['_defaultMa'+'terial']=mh['createDefa'+'ultMateria'+'l'](),this['maxRetries']=_0x44e5e5;}['_getUrlWit'+'houtParams'](_0x96cac6){return _0x96cac6['indexOf']('?')>=0x4ba*-0x6+-0x2561+0x41bd?_0x96cac6['split']('?')[-0x131*0x1+0x1*-0x217+0xe*0x3c]:_0x96cac6;}['load'](_0x40ebf3,_0x3a86f8,_0x3ab5f3){pe['fetchArray'+'Buffer'](_0x40ebf3['load'],(_0x5b933c,_0x6cd11e)=>{_0x5b933c?_0x3a86f8(_0x5b933c):mh['parse'](this['_getUrlWit'+'houtParams'](_0x40ebf3['original']),xe['extractPat'+'h'](_0x40ebf3['load']),_0x6cd11e,this['_device'],_0x3ab5f3['registry'],_0x3ab5f3['options'],(_0x26a57b,_0x1773d0)=>{_0x26a57b?_0x3a86f8(_0x26a57b):_0x3a86f8(null,new mr(_0x1773d0,_0x3ab5f3,this['_assets'],this['_defaultMa'+'terial']));});},_0x3ab5f3,this['maxRetries']);}['open'](_0x2af371,_0x37b7ef,_0x53d199){return _0x37b7ef;}['patch'](_0x5127ce,_0x3d6de8){}}class mN extends Qe{constructor(_0x299cd4){super(_0x299cd4,'container'),this['glbContain'+'erParser']=new pN(_0x299cd4['graphicsDe'+'vice'],_0x299cd4['assets'],0x128e+-0x2472+0x11e4),this['parsers']={};}set['maxRetries'](_0x17c4e2){this['glbContain'+'erParser']['maxRetries']=_0x17c4e2;for(const _0x57b226 in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x57b226)&&(this['parsers'][_0x57b226]['maxRetries']=_0x17c4e2);}get['maxRetries'](){return this['glbContain'+'erParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x4c59e4){return _0x4c59e4['indexOf']('?')>=0x1*-0x1dea+0x2696*-0x1+0x1*0x4480?_0x4c59e4['split']('?')[0xc*-0x180+-0x5d*-0x57+0x1b*-0x81]:_0x4c59e4;}['_getParser'](_0x4bd5e7){const _0xc04c57=_0x4bd5e7?xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x4bd5e7))['toLowerCas'+'e']()['replace']('.',''):null;return this['parsers'][_0xc04c57]||this['glbContain'+'erParser'];}['load'](_0x2bf6fd,_0x1359fb,_0x209440){typeof _0x2bf6fd=='string'&&(_0x2bf6fd={'load':_0x2bf6fd,'original':_0x2bf6fd}),this['_getParser'](_0x2bf6fd['original'])['load'](_0x2bf6fd,_0x1359fb,_0x209440);}['open'](_0xc71f3f,_0x55a8f6,_0x250975){return this['_getParser'](_0xc71f3f)['open'](_0xc71f3f,_0x55a8f6,_0x250975);}}class _N extends Qe{constructor(_0x23ab69){super(_0x23ab69,'css'),h(this,'decoder',null);}['load'](_0x266e1d,_0x126db1){typeof _0x266e1d=='string'&&(_0x266e1d={'load':_0x266e1d,'original':_0x266e1d}),ot['get'](_0x266e1d['load'],{'retry':this['maxRetries']>-0x125c+0xd9c+0x4c0,'maxRetries':this['maxRetries']},(_0x72bb2a,_0x264018)=>{_0x72bb2a?_0x126db1('Error\x20load'+'ing\x20css\x20re'+'source:\x20'+_0x266e1d['original']+'\x20['+_0x72bb2a+']'):_0x126db1(null,_0x264018);});}['openBinary'](_0xf9098f){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0xf9098f);}}class gN extends Qe{constructor(_0x234006){super(_0x234006,'cubemap'),this['_device']=_0x234006['graphicsDe'+'vice'],this['_registry']=_0x234006['assets'],this['_loader']=_0x234006['loader'];}['load'](_0x5f518c,_0x4d20aa,_0x555e6f){this['loadAssets'](_0x555e6f,_0x4d20aa);}['open'](_0x4d8ea2,_0x32d5f3,_0x1d36f8){return _0x1d36f8?_0x1d36f8['resource']:null;}['patch'](_0x469821,_0x2dfca4){this['loadAssets'](_0x469821,(_0x4ea53f,_0x51aeca)=>{_0x4ea53f&&(_0x2dfca4['fire']('error',_0x469821),_0x2dfca4['fire']('error:'+_0x469821['id'],_0x4ea53f,_0x469821),_0x469821['fire']('error',_0x469821));});}['getAssetId'+'s'](_0x2f851a){const _0x270eef=[];if(_0x270eef[0x4c*0x39+0x39*0x9f+0x1171*-0x3]=_0x2f851a['file'],(_0x2f851a['loadFaces']||!_0x2f851a['file'])&&_0x2f851a['data']&&_0x2f851a['data']['textures']){for(let _0x1c6001=0x37*-0x49+0x1*-0x23bc+-0x1*-0x336b;_0x1c6001<-0x5dc+-0x1b3d+0x3d*0x8b;++_0x1c6001)_0x270eef[_0x1c6001+(-0x1d6e+-0x53a*0x7+0x4205)]=_0x2f851a['data']['textures'][_0x1c6001];}else _0x270eef[-0x18*0xe2+0x145b+0xd6]=_0x270eef[-0x54*0x6+-0x1*0x1c5d+0x1e57]=_0x270eef[0x2*-0x1d4+-0xe23*-0x2+-0x1*0x189b]=_0x270eef[0x1163*0x2+-0x238d+0xcb*0x1]=_0x270eef[-0x10+-0x3*0x2fc+0x909]=_0x270eef[-0x1371+-0x1d7e+-0x1*-0x30f5]=null;return _0x270eef;}['compareAss'+'etIds'](_0xdbb6a7,_0x4578f2){return _0xdbb6a7&&_0x4578f2?parseInt(_0xdbb6a7,-0xd1e+0x1fef+-0x13*0xfd)===_0xdbb6a7||typeof _0xdbb6a7=='string'?_0xdbb6a7===_0x4578f2:_0xdbb6a7['url']===_0x4578f2['url']:_0xdbb6a7!==null==(_0x4578f2!==null);}['update'](_0xc8fac9,_0x4a2b16,_0x37e7e0){const _0x21887a=_0xc8fac9['data']||{},_0x4b7a41=_0xc8fac9['_handlerSt'+'ate']['assets'],_0x4f3bba=_0xc8fac9['_resources'];let _0x578221,_0x546f1a,_0x501d1e;const _0x41bb90=[null,null,null,null,null,null,null],_0x452451=function(){return _0x21887a['hasOwnProp'+'erty']('type')?_0x21887a['type']:_0x21887a['hasOwnProp'+'erty']('rgbm')?_0x21887a['rgbm']?Ki:Ms:null;};if(!_0xc8fac9['loaded']||_0x37e7e0[-0x233*0x9+-0xf2+0x14bd]!==_0x4b7a41[0xaf*-0x13+0xe3d*-0x1+0x1b3a*0x1]){if(_0x37e7e0[-0x1381+0x11d+-0x2*-0x932]){if(_0x578221=_0x37e7e0[-0xb53+0x1cfa+-0x11a7]['resource'],_0x578221['cubemap']){for(_0x501d1e=0x203d+0x35e+-0x239b;_0x501d1e<-0x136e+0x1e87+-0xb13;++_0x501d1e)_0x41bb90[_0x501d1e+(-0x1c9*0x13+0x1*-0x138b+0x3577)]=new _e(this['_device'],{'name':_0xc8fac9['name']+('_prelitCub'+'emap')+(_0x578221['width']>>_0x501d1e),'cubemap':!(0xe97+0x1334*-0x1+0x49d),'type':_0x452451()||_0x578221['type'],'width':_0x578221['width']>>_0x501d1e,'height':_0x578221['height']>>_0x501d1e,'format':_0x578221['format'],'levels':[_0x578221['_levels'][_0x501d1e]],'addressU':ue,'addressV':ue,'mipmaps':_0x501d1e===0x694*-0x1+0x82+0x6f*0xe});}else _0x41bb90[-0xeff+0xb7d*-0x1+-0x1*-0x1a7d]=_0x578221;}}else _0x41bb90[-0x1*0x2118+0x158*0x1+-0x1fc1*-0x1]=_0x4f3bba[0x1154+-0x1*0x1a62+0x90f]||null,_0x41bb90[-0xd*0xf+-0x1*0x117f+0x1244]=_0x4f3bba[-0x6a*0x1c+0x35a+0x840]||null,_0x41bb90[0x21*-0x8b+-0x35*-0x49+0x2d1]=_0x4f3bba[0x6*0xb+0x3*-0x9b9+0x1cec]||null,_0x41bb90[0x7fc+-0xd7a+0x1e*0x2f]=_0x4f3bba[0x5c5+-0x3db+-0x1e6]||null,_0x41bb90[0x27*-0xd0+0xe77+0x113e]=_0x4f3bba[-0x2*-0xe35+0xd*0x2a7+-0x10*0x3ee]||null,_0x41bb90[0x1634*-0x1+0x265c+0x46*-0x3b]=_0x4f3bba[0x15f5+-0x2e*0xf+-0x133d*0x1]||null;const _0x156736=_0x37e7e0['slice'](0x1*-0x997+-0x2*-0x118d+-0x1982);if(!_0xc8fac9['loaded']||!this['cmpArrays'](_0x156736,_0x4b7a41['slice'](0x2af*0x1+-0x10f*-0x7+-0x29*0x3f))){if(_0x156736['indexOf'](null)===-(-0x1*-0xb4d+-0x21da+0x168e)){const _0xcdf3fd=_0x156736['map'](_0x5dd496=>_0x5dd496['resource']),_0x169626=[];for(_0x546f1a=-0x1498+0x31*-0x11+0x17d9;_0x546f1a<_0xcdf3fd[-0xae1+-0x17*-0x12d+-0x102a]['_levels']['length'];++_0x546f1a)_0x169626['push'](_0xcdf3fd['map'](_0x205c57=>_0x205c57['_levels'][_0x546f1a]));const _0x51228c=_0xcdf3fd[0x117a+-0xcae+-0x4*0x133]['format'],_0x229b59=new _e(this['_device'],{'name':_0xc8fac9['name']+'_faces','cubemap':!(-0xc6*-0x11+-0x7d4+-0xe3*0x6),'type':_0x452451()||_0xcdf3fd[0x102b*0x1+0x4*-0x70+-0xe6b]['type'],'width':_0xcdf3fd[-0x185b+0x9fd*0x2+0x461]['width'],'height':_0xcdf3fd[-0x172*0x1+0x391+-0x21f]['height'],'format':_0x51228c===wr?Ne:_0x51228c,'mipmaps':_0x21887a['mipmaps']??!(-0x1600+-0x2*-0x109d+-0x3*0x3be),'levels':_0x169626,'minFilter':_0x21887a['hasOwnProp'+'erty']('minFilter')?_0x21887a['minFilter']:_0xcdf3fd[-0x1461*-0x1+-0xa*0x193+-0x1*0x4a3]['minFilter'],'magFilter':_0x21887a['hasOwnProp'+'erty']('magFilter')?_0x21887a['magFilter']:_0xcdf3fd[0x241c+-0x32*-0xc6+0x2*-0x2564]['magFilter'],'anisotropy':_0x21887a['hasOwnProp'+'erty']('anisotropy')?_0x21887a['anisotropy']:0x2f*-0x2b+-0x14*0x104+-0x9d*-0x2e,'addressU':ue,'addressV':ue});_0x41bb90[-0x5*-0x22+-0x256d+0x24c3]=_0x229b59;}}else _0x41bb90[0x1cad*-0x1+-0x4*0x8a+0x9*0x36d]=_0x4f3bba[0xe69*0x1+0x1a*-0xbb+-0x11*-0x45]||null;if(!this['cmpArrays'](_0x41bb90,_0x4f3bba)){for(_0xc8fac9['resources']=_0x41bb90,_0xc8fac9['_handlerSt'+'ate']['assetIds']=_0x4a2b16,_0xc8fac9['_handlerSt'+'ate']['assets']=_0x37e7e0,_0x501d1e=0xae1+0xef6+-0x19d7;_0x501d1e<_0x4f3bba['length'];++_0x501d1e)_0x4f3bba[_0x501d1e]!==null&&_0x41bb90['indexOf'](_0x4f3bba[_0x501d1e])===-(-0x227e+0x1697*-0x1+-0x1c8b*-0x2)&&_0x4f3bba[_0x501d1e]['destroy']();}for(_0x501d1e=0x246a+-0x117c+-0x1*0x12ee;_0x501d1e<_0x4b7a41['length'];++_0x501d1e)_0x4b7a41[_0x501d1e]!==null&&_0x37e7e0['indexOf'](_0x4b7a41[_0x501d1e])===-(-0x1b85*0x1+0x24e4+-0x4af*0x2)&&_0x4b7a41[_0x501d1e]['unload']();}['cmpArrays'](_0x106416,_0x368d33){if(_0x106416['length']!==_0x368d33['length'])return!(-0x1b18+0x1a84+0x95);for(let _0x5bccf0=0x1efa+0x1d8e+-0x3c88;_0x5bccf0<_0x106416['length'];++_0x5bccf0)if(_0x106416[_0x5bccf0]!==_0x368d33[_0x5bccf0])return!(0x2d2*-0x4+0x25b4+-0x1a6b*0x1);return!(0xc43*-0x1+0x1d16+-0x10d3);}['resolveId'](_0x35b480){const _0x4282af=parseInt(_0x35b480,0x1df9+0xb*-0x271+0x314*-0x1);return _0x4282af===_0x35b480||_0x4282af['toString']()===_0x35b480?_0x4282af:_0x35b480;}['loadAssets'](_0x1ac07b,_0x3431b7){_0x1ac07b['hasOwnProp'+'erty']('_handlerSt'+'ate')||(_0x1ac07b['_handlerSt'+'ate']={'assetIds':[null,null,null,null,null,null,null],'assets':[null,null,null,null,null,null,null]});const _0x2e56e8=this,_0x568e02=_0x2e56e8['getAssetId'+'s'](_0x1ac07b),_0x371b4f=[null,null,null,null,null,null,null],_0x55f3f0=_0x1ac07b['_handlerSt'+'ate']['assetIds'],_0x32ef79=_0x1ac07b['_handlerSt'+'ate']['assets'],_0x3e7ca2=_0x2e56e8['_registry'];let _0x34208c=-0x9fd*-0x1+0x1fc2+-0x29b8;const _0x1a9447=function(_0x256c48,_0x358a2a){_0x371b4f[_0x256c48]=_0x358a2a,_0x34208c--,_0x34208c===0x4ef*0x6+-0x1*-0x1c13+0x39ad*-0x1&&(_0x2e56e8['update'](_0x1ac07b,_0x568e02,_0x371b4f),_0x3431b7(null,_0x1ac07b['resources']));},_0x510d26=function(_0x41414c,_0x3a1ecd,_0xceed01){_0x3431b7(_0x3a1ecd);},_0x438b35=function(_0x23ff1f,_0x5c614f){_0x5c614f['loaded']?_0x1a9447(_0x23ff1f,_0x5c614f):(_0x3e7ca2['once']('load:'+_0x5c614f['id'],_0x1a9447['bind'](_0x2e56e8,_0x23ff1f)),_0x3e7ca2['once']('error:'+_0x5c614f['id'],_0x510d26['bind'](_0x2e56e8,_0x23ff1f)),_0x5c614f['loading']||_0x3e7ca2['load'](_0x5c614f));};let _0xff77ba;for(let _0x8834cc=-0x23b*-0x11+0x5*-0x29e+0x1*-0x18d5;_0x8834cc<-0x2701+-0x19f3+-0x1*-0x40fb;++_0x8834cc){const _0x345fd2=this['resolveId'](_0x568e02[_0x8834cc]);if(!_0x345fd2)_0x1a9447(_0x8834cc,null);else{if(_0x2e56e8['compareAss'+'etIds'](_0x345fd2,_0x55f3f0[_0x8834cc]))_0x438b35(_0x8834cc,_0x32ef79[_0x8834cc]);else{if(parseInt(_0x345fd2,0x4*0x812+0x1179+0x31b7*-0x1)===_0x345fd2)_0xff77ba=_0x3e7ca2['get'](_0x345fd2),_0xff77ba?_0x438b35(_0x8834cc,_0xff77ba):setTimeout(((_0x488ab3,_0x46e7eb)=>{const _0x17e3a0=_0x3e7ca2['get'](_0x46e7eb);_0x17e3a0?_0x438b35(_0x488ab3,_0x17e3a0):_0x510d26(_0x488ab3,'failed\x20to\x20'+'find\x20depen'+'dent\x20cubem'+'ap\x20asset='+_0x46e7eb);})['bind'](null,_0x8834cc,_0x345fd2));else{const _0x15d17b=typeof _0x345fd2=='string'?{'url':_0x345fd2,'filename':_0x345fd2}:_0x345fd2,_0x18224a=_0x15d17b['url']['search']('.dds')===-(0x105*-0x12+-0x1*-0x1ecb+-0x4*0x31c)?{'type':'rgbp','addressu':'clamp','addressv':'clamp','mipmaps':!(0x256*0xe+-0x416*0x1+0x5*-0x5b9)}:null;_0xff77ba=new pe(_0x1ac07b['name']+'_part_'+_0x8834cc,'texture',_0x15d17b,_0x18224a),_0x3e7ca2['add'](_0xff77ba),_0x438b35(_0x8834cc,_0xff77ba);}}}}}}class SN extends Qe{constructor(_0x427ca1){super(_0x427ca1,'folder');}['load'](_0x18515b,_0x2d22c6){_0x2d22c6(null,null);}}class Wg{constructor(_0x160c5c,_0x4cf93e){this['type']=_0x4cf93e&&_0x4cf93e['type']||dh,this['em']=-0x61*-0x3a+-0x161*-0x2+0x1e7*-0xd,this['textures']=_0x160c5c,this['intensity']=0x1bb0+-0x273+-0x193d,this['_data']=null,this['data']=_0x4cf93e;}set['data'](_0x4e6237){if(this['_data']=_0x4e6237,!!_0x4e6237&&(this['_data']['intensity']!==void(-0xbe+-0x5c+0x8d*0x2)&&(this['intensity']=this['_data']['intensity']),this['_data']['info']||(this['_data']['info']={}),(!this['_data']['version']||this['_data']['version']<-0x1841+0x11*0x5f+-0x2fe*-0x6)&&(this['_data']['info']['maps']=[{'width':this['_data']['info']['width'],'height':this['_data']['info']['height']}],this['_data']['chars']))){for(const _0x279869 in this['_data']['chars'])this['_data']['chars'][_0x279869]['map']=0x1e26+0x1*0x1c77+-0x3a9d;}}get['data'](){return this['_data'];}}function af(_0x26697b){return _0x26697b['version']<-0x5*-0x3af+-0xb66+-0x12b*0x6&&(_0x26697b['version']<0x31d+-0x1c02+0x4fb*0x5&&(_0x26697b['info']['maps']=_0x26697b['info']['maps']||[{'width':_0x26697b['info']['width'],'height':_0x26697b['info']['height']}]),_0x26697b['chars']=Object['keys'](_0x26697b['chars']||{})['reduce']((_0x142a8c,_0x26b76c)=>{const _0x130aea=_0x26697b['chars'][_0x26b76c],_0x17508b=_0x130aea['letter']!==void(0x19fe*-0x1+0x2*-0x735+0x2868)?_0x130aea['letter']:Tc['fromCodePo'+'int'](_0x26b76c);return _0x26697b['version']<-0xaa7+0x49*-0x38+-0x191*-0x11&&(_0x130aea['map']=_0x130aea['map']||-0xb*-0x1e7+0x5*0x14f+-0x1b78),_0x142a8c[_0x17508b]=_0x130aea,_0x142a8c;},{}),_0x26697b['version']=-0x125*-0x16+0x969+-0x2294),_0x26697b;}class yN extends Qe{constructor(_0x57ee34){super(_0x57ee34,'font'),this['_loader']=_0x57ee34['loader'],this['maxRetries']=-0x16ac+0x20c1+-0xa15;}['load'](_0x1fd3c0,_0x3f50a2,_0x1ebc9a){typeof _0x1fd3c0=='string'&&(_0x1fd3c0={'load':_0x1fd3c0,'original':_0x1fd3c0});const _0x5d58e3=this;xe['getExtensi'+'on'](_0x1fd3c0['original'])==='.json'?ot['get'](_0x1fd3c0['load'],{'retry':this['maxRetries']>0x256f+-0x960+-0x28d*0xb,'maxRetries':this['maxRetries']},(_0x152810,_0x11adc6)=>{if(_0x152810)_0x3f50a2('Error\x20load'+'ing\x20font\x20r'+'esource:\x20'+_0x1fd3c0['original']+'\x20['+_0x152810+']');else{const _0x36611b=af(_0x11adc6);_0x5d58e3['_loadTextu'+'res'](_0x1fd3c0['load']['replace']('.json','.png'),_0x36611b,(_0x432ff8,_0x5b29be)=>{_0x432ff8?_0x3f50a2(_0x432ff8):_0x3f50a2(null,{'data':_0x36611b,'textures':_0x5b29be});});}}):(_0x1ebc9a&&_0x1ebc9a['data']&&(_0x1ebc9a['data']=af(_0x1ebc9a['data'])),this['_loadTextu'+'res'](_0x1fd3c0['load'],_0x1ebc9a&&_0x1ebc9a['data'],_0x3f50a2));}['_loadTextu'+'res'](_0x278ff9,_0x20d862,_0x172640){const _0x53b69e=_0x20d862['info']['maps']['length'];let _0x58e250=-0x1ab0+-0x253+0x1d03,_0x6d3969=null;const _0x23cc38=new Array(_0x53b69e),_0x4e4c74=this['_loader'],_0x164286=function(_0x4559f5){const _0x10ae07=function(_0x3333d8,_0x1c1106){if(!_0x6d3969){if(_0x3333d8){_0x6d3969=_0x3333d8,_0x172640(_0x3333d8);return;}_0x1c1106['upload'](),_0x23cc38[_0x4559f5]=_0x1c1106,_0x58e250++,_0x58e250===_0x53b69e&&_0x172640(null,_0x23cc38);}};_0x4559f5===0x14d6+-0x3a1*-0xa+-0x8*0x724?_0x4e4c74['load'](_0x278ff9,'texture',_0x10ae07):_0x4e4c74['load'](_0x278ff9['replace']('.png',_0x4559f5+'.png'),'texture',_0x10ae07);};for(let _0x3d017f=0x27*-0x97+0x231a+-0xc19;_0x3d017f<_0x53b69e;_0x3d017f++)_0x164286(_0x3d017f);}['open'](_0x3668fb,_0x277dbf,_0x28d337){let _0x16bdac;return _0x277dbf['textures']?_0x16bdac=new Wg(_0x277dbf['textures'],_0x277dbf['data']):_0x16bdac=new Wg(_0x277dbf,null),_0x16bdac;}['patch'](_0x54b2ee,_0x493be4){const _0xcf4410=_0x54b2ee['resource'];!_0xcf4410['data']&&_0x54b2ee['data']?_0xcf4410['data']=_0x54b2ee['data']:!_0x54b2ee['data']&&_0xcf4410['data']&&(_0x54b2ee['data']=_0xcf4410['data']),_0x54b2ee['data']&&(_0x54b2ee['data']=af(_0x54b2ee['data']));}}async function vN(){const _0x5a2cc7=0x12c1+0x2a2*0xc+0x3259*-0x1+0.28209479177387814;class _0x3ec8fa{constructor(_0xc007ff,_0x45b872,_0x58d0e8){this['x']=_0xc007ff,this['y']=_0x45b872,this['z']=_0x58d0e8;}}class _0x52a37d{constructor(_0x4de20c,_0x52d220,_0x3967c5,_0x2260f1){this['x']=_0x4de20c,this['y']=_0x52d220,this['z']=_0x3967c5,this['w']=_0x2260f1;}}class _0x3873e3{constructor(_0x17977f,_0x15fb8b,_0x5271eb,_0x5cb431){this['x']=_0x17977f,this['y']=_0x15fb8b,this['z']=_0x5271eb,this['w']=_0x5cb431;}['set'](_0x134fb6,_0x57bc3d,_0x160485,_0x8876eb){this['x']=_0x134fb6,this['y']=_0x57bc3d,this['z']=_0x160485,this['w']=_0x8876eb;}}class _0x4905e6{constructor(_0x227c5b,_0x409b0a,_0x41de9a,_0x41f90e,_0x4d9505,_0x5b5b43,_0x33498b,_0x2f98ee,_0x77e0c6,_0xed1a3d,_0x505be0,_0x1797d4,_0xdcd6ce,_0x3d27a9){const _0x11a45c=(_0x1ce6ef,_0x1fb95e)=>{const _0x20c9e3=(0x3*-0xa44+-0x1d77+0x89c*0x7<<_0x1fb95e)-(0x1ec8+-0x1fd9*-0x1+-0x1f50*0x2);return(_0x1ce6ef&_0x20c9e3)/_0x20c9e3;},_0x126f07=(_0x1f091b,_0x5974ab)=>{_0x1f091b['x']=_0x11a45c(_0x5974ab>>>0x8*-0x1a8+-0x2*0xca4+-0x1*-0x269d,-0x10db+-0x197*-0x17+-0x13ab),_0x1f091b['y']=_0x11a45c(_0x5974ab>>>-0x222f+-0xad9*-0x3+0x1af,0x8b+0x3be*-0x5+0x1235*0x1),_0x1f091b['z']=_0x11a45c(_0x5974ab,0xc*0xb7+-0x8f3+0x6a);},_0x561312=(_0x1eadfa,_0x59ecbf)=>{_0x1eadfa['x']=_0x11a45c(_0x59ecbf>>>-0x1b90+0x13f9*-0x1+0x2fa1,0xe2d*0x1+0x9*0x19e+-0x1cb3),_0x1eadfa['y']=_0x11a45c(_0x59ecbf>>>0x1*0x2612+-0x1f4d+-0x6b5,0x190c+0x2205+-0x3b09),_0x1eadfa['z']=_0x11a45c(_0x59ecbf>>>-0x1f8f+0x125*0xe+0xf91,0x31*-0xad+0x1d12+0x413),_0x1eadfa['w']=_0x11a45c(_0x59ecbf,-0x5*-0x74+0xa85+-0xcc1);},_0x5713e5=(_0x5e2dcb,_0x21238d)=>{const _0x3036a5=(-0xfbb*-0x2+0xb7a+-0x2aef)/(Math['sqrt'](0x2d*-0x7e+-0x1684+-0x6*-0x772)*(0x2*0x1101+-0x23d7+0x1d5+0.5)),_0x9a88fe=(_0x11a45c(_0x21238d>>>-0xac1*0x3+0x1f2f+0x4*0x4a,-0x195b+0x19b5*-0x1+0x331a)-(0x1*-0xede+0xd*0x14f+-0x225+0.5))*_0x3036a5,_0x7f3f27=(_0x11a45c(_0x21238d>>>0x1c24*0x1+0x957+-0x163*0x1b,0x35*-0x5+0xd49+0x412*-0x3)-(-0x37*0x3a+-0x612+-0x4a2*-0x4+0.5))*_0x3036a5,_0x30a602=(_0x11a45c(_0x21238d,-0xc15+0x1acc+-0xead)-(-0x1d6a+-0x6bd+0x2427+0.5))*_0x3036a5,_0x1a7e00=Math['sqrt'](-0x2336+0x1*0x22e7+0x50-(_0x9a88fe*_0x9a88fe+_0x7f3f27*_0x7f3f27+_0x30a602*_0x30a602));switch(_0x21238d>>>0x1518+-0x20a7+-0xbad*-0x1){case-0x2cd*0xd+-0x1*-0xb85+0x18e4:_0x5e2dcb['set'](_0x9a88fe,_0x7f3f27,_0x30a602,_0x1a7e00);break;case 0x23f1+0x8d8*0x1+-0x8*0x599:_0x5e2dcb['set'](_0x1a7e00,_0x7f3f27,_0x30a602,_0x9a88fe);break;case 0xb75+-0x12f9+0x6b*0x12:_0x5e2dcb['set'](_0x7f3f27,_0x1a7e00,_0x30a602,_0x9a88fe);break;case-0x7ed+-0x52c+-0x4*-0x347:_0x5e2dcb['set'](_0x7f3f27,_0x30a602,_0x1a7e00,_0x9a88fe);break;}},_0x97552=(_0x1c99a0,_0x4c0b4c,_0xa274ad)=>_0x1c99a0*(-0x1f78+-0x8*-0x28c+0xb19*0x1-_0xa274ad)+_0x4c0b4c*_0xa274ad,_0x269668=[0x19d8+-0x25*-0xd+-0x1bb6,0x3d1*-0x7+-0x2332+0x3df1,-0x3b3*0x5+-0xe0c+0x209a*0x1][_0x33498b-(0x2b*0xc4+0xd8+-0x21c3)],_0x3de121=-0xdbf+0x2*-0x293+0x12eb;this['read']=_0x4549fb=>{const _0xe7e0d0=Math['floor'](_0x4549fb/(-0x1cf7+-0x8b*0xd+0x1283*0x2))*_0x409b0a;if(_0x2f98ee&&(_0x126f07(_0x2f98ee,_0x41de9a[_0x4549fb*_0x3de121+(-0x1*-0x239f+0x2012+0x1f*-0x22f)]),_0x2f98ee['x']=_0x97552(_0x227c5b[_0xe7e0d0+(0x21a4*0x1+-0xe4e+-0x1356)],_0x227c5b[_0xe7e0d0+(-0x1*-0x16dd+-0xe1*0xb+-0xd2f)],_0x2f98ee['x']),_0x2f98ee['y']=_0x97552(_0x227c5b[_0xe7e0d0+(0x1*-0x2bd+0xa1*0xb+-0x42d)],_0x227c5b[_0xe7e0d0+(0x15ea+0xa6d*-0x3+0x961)],_0x2f98ee['y']),_0x2f98ee['z']=_0x97552(_0x227c5b[_0xe7e0d0+(-0x1d34+-0xaa4+0x27da)],_0x227c5b[_0xe7e0d0+(-0x393+0x26a*-0x5+0xfaa)],_0x2f98ee['z'])),_0x77e0c6&&_0x5713e5(_0x77e0c6,_0x41de9a[_0x4549fb*_0x3de121+(0x259*0x6+0x922+0x351*-0x7)]),_0xed1a3d&&(_0x126f07(_0xed1a3d,_0x41de9a[_0x4549fb*_0x3de121+(-0x1*0x1f15+-0xfa1+0x2eb8)]),_0xed1a3d['x']=_0x97552(_0x227c5b[_0xe7e0d0+(0x260+0x1ca+-0x109*0x4)],_0x227c5b[_0xe7e0d0+(0xc55+0xab6+-0x1702)],_0xed1a3d['x']),_0xed1a3d['y']=_0x97552(_0x227c5b[_0xe7e0d0+(-0x25*-0x1+0x18b9+0x1*-0x18d7)],_0x227c5b[_0xe7e0d0+(-0x1*-0x1291+-0x215a+0xed3)],_0xed1a3d['y']),_0xed1a3d['z']=_0x97552(_0x227c5b[_0xe7e0d0+(-0x3*0x49+0x1*0xe5+-0x2)],_0x227c5b[_0xe7e0d0+(0x92*-0x20+0xc8a+0x5c1)],_0xed1a3d['z'])),_0x505be0&&(_0x561312(_0x505be0,_0x41de9a[_0x4549fb*_0x3de121+(0x157*0x10+0x3*0x6d9+-0x29f8)]),_0x409b0a>0x1*-0x2d9+0x81*-0x5+0x56a&&(_0x505be0['x']=_0x97552(_0x227c5b[_0xe7e0d0+(-0x157c*-0x1+0x89*-0x4+-0x134c*0x1)],_0x227c5b[_0xe7e0d0+(-0x8*-0x241+-0x588+-0xc71)],_0x505be0['x']),_0x505be0['y']=_0x97552(_0x227c5b[_0xe7e0d0+(0xe0f+-0xce7+-0x11b)],_0x227c5b[_0xe7e0d0+(-0x11*0x4b+0x2d2+0x239)],_0x505be0['y']),_0x505be0['z']=_0x97552(_0x227c5b[_0xe7e0d0+(0xe38+0x2430+-0x325a)],_0x227c5b[_0xe7e0d0+(-0x3*-0xb52+-0x2463+0x27e)],_0x505be0['z']))),_0x1797d4&&(_0x126f07(_0x1797d4,_0x41de9a[_0x4549fb*_0x3de121+(-0x1*0x1d62+0xdb1*-0x2+0x5c*0x9e)]),_0x1797d4['x']=_0x97552(_0x227c5b[_0xe7e0d0+(0x2353+-0x8e9+0x2*-0xd2c)],_0x227c5b[_0xe7e0d0+(-0x1450+0x1*0x23ad+-0xf48)],_0x1797d4['x']),_0x1797d4['y']=_0x97552(_0x227c5b[_0xe7e0d0+(0xded+0x166b+-0x2445)],_0x227c5b[_0xe7e0d0+(0x32b*-0x8+-0x6d*0x1a+0x2480)],_0x1797d4['y']),_0x1797d4['z']=_0x97552(_0x227c5b[_0xe7e0d0+(-0x160e+0x209f*-0x1+0x36c1)],_0x227c5b[_0xe7e0d0+(0x1*0x221c+0x1*-0x3b+-0x21ca*0x1)],_0x1797d4['z'])),_0xdcd6ce&&(_0x126f07(_0xdcd6ce,_0x41de9a[_0x4549fb*_0x3de121+(-0x10*0x1bb+0xd26+0xe8f*0x1)]),_0xdcd6ce['x']=_0x97552(_0x227c5b[_0xe7e0d0+(-0x2a3+-0xca+0x385)],_0x227c5b[_0xe7e0d0+(0x1f0*-0x10+0x32*0x55+0xe7f)],_0xdcd6ce['x']),_0xdcd6ce['y']=_0x97552(_0x227c5b[_0xe7e0d0+(0x72a+-0x199b+0x1*0x128b)],_0x227c5b[_0xe7e0d0+(-0x6ba+0x71*0x2+0x5f3*0x1)],_0xdcd6ce['y'])),_0x3d27a9&&_0x33498b>0x1*0x15d7+0xf7f+-0x2*0x12ab){const _0x1b31a4=[_0x41f90e,_0x4d9505,_0x5b5b43];for(let _0x4498c0=0x1*0x2681+0x1f64+-0x45e5;_0x4498c0<-0xa3f+-0x6*-0x391+0x4*-0x2c9;++_0x4498c0)for(let _0x1b6791=-0x44c+-0x8d9+0xd25;_0x1b6791<-0xb*0x3+-0x4*-0x74f+-0x152*0x16;++_0x1b6791)_0x3d27a9[_0x4498c0*(0x13*-0x1d9+0x2167*-0x1+0x4491)+_0x1b6791]=_0x1b6791<_0x269668?_0x1b31a4[_0x4498c0][_0x4549fb*(-0x5d*-0x2e+-0xd80+-0x326)+_0x1b6791]*((-0x1*-0xc09+-0xb63+-0x9e)/(0xaed*0x1+0x3*0x639+-0x1*0x1c99))-(-0x36a+0x2214+-0x1ea6):0x955*0x1+-0x221+-0x39a*0x2;}};}}self['onmessage']=async _0x49be2c=>{const {data:_0x1f781c}=_0x49be2c;switch(_0x1f781c['type']){case'initWorker':break;case'decompress':_0x266fae(_0x1f781c['numSplats'],_0x1f781c['chunkData'],_0x1f781c['chunkSize'],_0x1f781c['vertexData'],_0x1f781c['shData0'],_0x1f781c['shData1'],_0x1f781c['shData2'],_0x1f781c['shBands']);break;}};const _0x266fae=(_0x3c422a,_0x2fcaf7,_0x561cbf,_0x5d0fda,_0x19b1f4,_0x49e0c2,_0x14b6cc,_0x2e125e)=>{const _0x3bd40a=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'];if(_0x2e125e>0x3*0x83d+0x19f*0x11+-0x3446){const _0x5a47ee=[];for(let _0x7b0f37=-0x385+-0x1684+0x5*0x535;_0x7b0f37<0x668+0xfcb+-0xb03*0x2;++_0x7b0f37)_0x5a47ee['push']('f_rest_'+_0x7b0f37);_0x3bd40a['splice'](_0x3bd40a['indexOf']('f_dc_0')+(-0xb1*-0x1+-0x1*-0x1ec1+-0x1f71),-0xb5*0x2+0x1ab1+-0x1947,..._0x5a47ee);}const _0x31e65b={};_0x3bd40a['forEach'](_0xf6b6bf=>{_0x31e65b[_0xf6b6bf]=new Float32Array(_0x3c422a);});const _0x5436c1=new _0x3ec8fa(),_0x41a950=new _0x3873e3(),_0x67cc56=new _0x3ec8fa(),_0x47c3f5=new _0x52a37d(),_0x1a90fc=new _0x3ec8fa(),_0x27d4f6=new _0x3ec8fa(),_0x273e4c=_0x2e125e>0x7*-0x42a+0x1*-0x1685+0x33ab?new Float32Array(-0x1bf7+0x3*-0x2dd+0x24bb):null,_0x631b19=new _0x4905e6(_0x2fcaf7,_0x561cbf,_0x5d0fda,_0x19b1f4,_0x49e0c2,_0x14b6cc,_0x2e125e,_0x5436c1,_0x41a950,_0x67cc56,_0x47c3f5,_0x1a90fc,_0x27d4f6,_0x273e4c);for(let _0x5af434=0x2085+-0x2259+0x1d4;_0x5af434<_0x3c422a;++_0x5af434)if(_0x631b19['read'](_0x5af434),_0x31e65b['x'][_0x5af434]=_0x5436c1['x'],_0x31e65b['y'][_0x5af434]=_0x5436c1['y'],_0x31e65b['z'][_0x5af434]=_0x5436c1['z'],_0x31e65b['rot_1'][_0x5af434]=_0x41a950['x'],_0x31e65b['rot_2'][_0x5af434]=_0x41a950['y'],_0x31e65b['rot_3'][_0x5af434]=_0x41a950['z'],_0x31e65b['rot_0'][_0x5af434]=_0x41a950['w'],_0x31e65b['scale_0'][_0x5af434]=_0x67cc56['x'],_0x31e65b['scale_1'][_0x5af434]=_0x67cc56['y'],_0x31e65b['scale_2'][_0x5af434]=_0x67cc56['z'],_0x31e65b['motion_0'][_0x5af434]=_0x1a90fc['x'],_0x31e65b['motion_1'][_0x5af434]=_0x1a90fc['y'],_0x31e65b['motion_2'][_0x5af434]=_0x1a90fc['z'],_0x31e65b['t_scale'][_0x5af434]=_0x27d4f6['x'],_0x31e65b['t'][_0x5af434]=_0x27d4f6['y'],_0x31e65b['f_dc_0'][_0x5af434]=(_0x47c3f5['x']-(-0x1a6d*0x1+-0x1*-0xac1+0xfac+0.5))/_0x5a2cc7,_0x31e65b['f_dc_1'][_0x5af434]=(_0x47c3f5['y']-(-0x81*-0x49+0x17*-0xf8+0xe81*-0x1+0.5))/_0x5a2cc7,_0x31e65b['f_dc_2'][_0x5af434]=(_0x47c3f5['z']-(0xa2f+0x2*0x722+-0x239*0xb+0.5))/_0x5a2cc7,_0x31e65b['opacity'][_0x5af434]=_0x47c3f5['w']<=-0x9*-0x3f3+-0x21e2*-0x1+-0x7*0x9eb?-(-0x7d8+-0x1*0x2156+-0x2*-0x14ab):_0x47c3f5['w']>=-0x126c+-0x99*-0x23+0x13f*-0x2?0x19be+0x1b0a*0x1+-0x34a0:-Math['log']((0xb*-0x11f+0x1bf5+0x81*-0x1f)/_0x47c3f5['w']-(0x181a+0x1*0x12db+-0x2af4)),_0x273e4c){for(let _0x806a87=0x1dbe+-0x338*-0x4+-0x2a9e;_0x806a87<-0x2b1*0xc+-0x1*0x19dd+0x3a56;++_0x806a87)_0x31e65b['f_rest_'+_0x806a87][_0x5af434]=_0x273e4c[_0x806a87];}let _0x449500={'x':_0x31e65b['x'],'y':_0x31e65b['y'],'z':_0x31e65b['z'],'rot_1':_0x31e65b['rot_1'],'rot_2':_0x31e65b['rot_2'],'rot_3':_0x31e65b['rot_3'],'rot_0':_0x31e65b['rot_0'],'scale_0':_0x31e65b['scale_0'],'scale_1':_0x31e65b['scale_1'],'scale_2':_0x31e65b['scale_2'],'motion_0':_0x31e65b['motion_0'],'motion_1':_0x31e65b['motion_1'],'motion_2':_0x31e65b['motion_2'],'t_scale':_0x31e65b['t_scale'],'t':_0x31e65b['t'],'f_dc_0':_0x31e65b['f_dc_0'],'f_dc_1':_0x31e65b['f_dc_1'],'f_dc_2':_0x31e65b['f_dc_2'],'opacity':_0x31e65b['opacity']};_0x273e4c&&(_0x449500={..._0x449500,'f_rest_0':_0x31e65b['f_rest_0'],'f_rest_1':_0x31e65b['f_rest_1'],'f_rest_2':_0x31e65b['f_rest_2'],'f_rest_3':_0x31e65b['f_rest_3'],'f_rest_4':_0x31e65b['f_rest_4'],'f_rest_5':_0x31e65b['f_rest_5'],'f_rest_6':_0x31e65b['f_rest_6'],'f_rest_7':_0x31e65b['f_rest_7'],'f_rest_8':_0x31e65b['f_rest_8'],'f_rest_9':_0x31e65b['f_rest_9'],'f_rest_10':_0x31e65b['f_rest_10'],'f_rest_11':_0x31e65b['f_rest_11'],'f_rest_12':_0x31e65b['f_rest_12'],'f_rest_13':_0x31e65b['f_rest_13'],'f_rest_14':_0x31e65b['f_rest_14'],'f_rest_15':_0x31e65b['f_rest_15'],'f_rest_16':_0x31e65b['f_rest_16'],'f_rest_17':_0x31e65b['f_rest_17'],'f_rest_18':_0x31e65b['f_rest_18'],'f_rest_19':_0x31e65b['f_rest_19'],'f_rest_20':_0x31e65b['f_rest_20'],'f_rest_21':_0x31e65b['f_rest_21'],'f_rest_22':_0x31e65b['f_rest_22'],'f_rest_23':_0x31e65b['f_rest_23'],'f_rest_24':_0x31e65b['f_rest_24'],'f_rest_25':_0x31e65b['f_rest_25'],'f_rest_26':_0x31e65b['f_rest_26'],'f_rest_27':_0x31e65b['f_rest_27'],'f_rest_28':_0x31e65b['f_rest_28'],'f_rest_29':_0x31e65b['f_rest_29'],'f_rest_30':_0x31e65b['f_rest_30'],'f_rest_31':_0x31e65b['f_rest_31'],'f_rest_32':_0x31e65b['f_rest_32'],'f_rest_33':_0x31e65b['f_rest_33'],'f_rest_34':_0x31e65b['f_rest_34'],'f_rest_35':_0x31e65b['f_rest_35'],'f_rest_36':_0x31e65b['f_rest_36'],'f_rest_37':_0x31e65b['f_rest_37'],'f_rest_38':_0x31e65b['f_rest_38'],'f_rest_39':_0x31e65b['f_rest_39'],'f_rest_40':_0x31e65b['f_rest_40'],'f_rest_41':_0x31e65b['f_rest_41'],'f_rest_42':_0x31e65b['f_rest_42'],'f_rest_43':_0x31e65b['f_rest_43'],'f_rest_44':_0x31e65b['f_rest_44']});const _0x3e5e21=Object['values'](_0x449500)['map'](_0xacc2c6=>_0xacc2c6['buffer']);self['postMessag'+'e']({'type':'decompress'+'ed','data':_0x449500},_0x3e5e21);};}class xN extends me{constructor(){super(),h(this,'worker'),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+vN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x59d489=>{if(!this['worker'])return;const {data:_0x54b0d7}=_0x59d489;switch(_0x54b0d7['type']){case'decompress'+'ed':console['log']('decompress'+'ed'),this['fire']('decompress'+'ed',_0x54b0d7['data']);break;}};}['decompress'](_0x2283cf,_0x2fc7f6,_0x2925eb,_0x5b79d3,_0x1b86c2,_0x123e8b,_0xea6ea5,_0x2306b8){const _0x3bd087=[_0x2fc7f6['buffer'],_0x5b79d3['buffer']];_0x1b86c2&&_0x3bd087['push'](_0x1b86c2['buffer']),_0x123e8b&&_0x3bd087['push'](_0x123e8b['buffer']),_0xea6ea5&&_0x3bd087['push'](_0xea6ea5['buffer']),this['worker']['postMessag'+'e']({'type':'decompress','numSplats':_0x2283cf,'chunkData':_0x2fc7f6,'chunkSize':_0x2925eb,'vertexData':_0x5b79d3,'shData0':_0x1b86c2,'shData1':_0x123e8b,'shData2':_0xea6ea5,'shBands':_0x2306b8},_0x3bd087);}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}class TN{constructor(_0x527efd,_0x449cf2,_0x19dfd7,_0x2a2d68,_0x4ea406,_0x3de079,_0x4dd5bf,_0x1d51dd){const _0x3cfb00=(_0x384d48,_0x1ca897)=>{const _0x4f9987=(-0x13a+-0xa94+0xbcf<<_0x1ca897)-(0x675+0x1180+-0x17f4);return(_0x384d48&_0x4f9987)/_0x4f9987;},_0xee0f5=(_0x114e7b,_0x245c95)=>{_0x114e7b['x']=_0x3cfb00(_0x245c95>>>-0x3*0xac1+0xb*-0x257+0x3a15,-0x10a*-0x22+0x1d1a+-0x4063),_0x114e7b['y']=_0x3cfb00(_0x245c95>>>0x549+-0x149e+-0x30*-0x52,-0x19f7+0x1*0x223c+-0x83b*0x1),_0x114e7b['z']=_0x3cfb00(_0x245c95,0x1828+0x1acb+-0x32e8);},_0x4b2276=(_0xac2d67,_0x2d12cb)=>{_0xac2d67['x']=_0x3cfb00(_0x2d12cb>>>-0x8a7*0x1+0x1375*-0x2+0x2fa9,0x4a*0x3b+0x13*0x13e+0x28*-0x104),_0xac2d67['y']=_0x3cfb00(_0x2d12cb>>>0x6*-0x121+-0x19d0+-0xc7*-0x2a,-0x5cc+-0x23ef+0x29c3),_0xac2d67['z']=_0x3cfb00(_0x2d12cb>>>-0x2597*0x1+-0x1*0xdbb+0x7*0x756,0x2437+0x1f2b+-0x2*0x21ad),_0xac2d67['w']=_0x3cfb00(_0x2d12cb,0x34b*-0xb+-0x198d+0x3dce);},_0x42c4e2=(_0x177296,_0x1a2423)=>{const _0x333a12=(0x1*0x1391+-0xa2*-0x16+-0x85f*0x4)/(Math['sqrt'](0x21+0xebc+0x1*-0xedb)*(0xa44+0x1*0x1e3d+-0x1*0x2881+0.5)),_0xc431de=(_0x3cfb00(_0x1a2423>>>0x1*0xa13+-0x1*0x1f93+0x1594,-0x5d1*-0x5+-0x1*-0x1f12+-0xb*0x577)-(-0x9c0+-0x1*-0xcdf+-0x1*0x31f+0.5))*_0x333a12,_0xf4032b=(_0x3cfb00(_0x1a2423>>>-0x1205+0x1d32+0xb23*-0x1,0xdf0+-0x115+-0xcd1)-(-0x115c+0x1*0x241+0xf1b+0.5))*_0x333a12,_0x3f75d4=(_0x3cfb00(_0x1a2423,0x172d+-0x85*0x4b+0xfd4)-(-0x7f+-0x892*-0x1+-0x813+0.5))*_0x333a12,_0x1d5ccc=Math['sqrt'](-0xb53*-0x2+-0x12*0x94+-0xf1*0xd-(_0xc431de*_0xc431de+_0xf4032b*_0xf4032b+_0x3f75d4*_0x3f75d4));switch(_0x1a2423>>>0x407+-0x5*-0x6b9+-0x2586){case 0x63*0x2c+-0x4*0x291+0x8*-0xd8:_0x177296['set'](_0xc431de,_0xf4032b,_0x3f75d4,_0x1d5ccc);break;case 0xe9f*0x1+-0x1e38+0xf9a:_0x177296['set'](_0x1d5ccc,_0xf4032b,_0x3f75d4,_0xc431de);break;case-0x2e6*-0x1+0x739+-0xa1d:_0x177296['set'](_0xf4032b,_0x1d5ccc,_0x3f75d4,_0xc431de);break;case-0x240e+-0x19f+0x25b0:_0x177296['set'](_0xf4032b,_0x3f75d4,_0x1d5ccc,_0xc431de);break;}},_0x3c69ad=(_0x21de67,_0x36498a,_0x1245cd)=>_0x21de67*(-0x7a9*0x1+-0x74d+0x4fd*0x3-_0x1245cd)+_0x36498a*_0x1245cd,{chunkData:_0x1bd379,chunkSize:_0x1a933f,vertexData:_0x4c6e1e,shData0:_0x3f3f36,shData1:_0x291afb,shData2:_0x2b8e08,shBands:_0x58d1b6}=_0x527efd,_0x30d770=[0x1511+-0x1f31+0x3*0x361,-0x118*-0x1+0x68b+-0x79b,-0x26f1+-0x40*0x18+0x2d00][_0x58d1b6-(-0x1*-0x2549+-0xcf4*0x3+-0x1*-0x194)],_0x4b1b2c=0x3*0x4f4+0x3b*0x61+-0x2531;this['read']=_0x371d3b=>{const _0x23714b=Math['floor'](_0x371d3b/(0x25b6+0x1a15*0x1+-0x283*0x19))*_0x1a933f;if(_0x449cf2&&(_0xee0f5(_0x449cf2,_0x4c6e1e[_0x371d3b*_0x4b1b2c+(-0x1*-0xc6e+-0x1*-0x3b3+-0x1021*0x1)]),_0x449cf2['x']=_0x3c69ad(_0x1bd379[_0x23714b+(-0x21aa+-0x2000+0x41aa)],_0x1bd379[_0x23714b+(0x1f*-0xb9+-0x196d+0x1*0x2fd7)],_0x449cf2['x']),_0x449cf2['y']=_0x3c69ad(_0x1bd379[_0x23714b+(0x2aa+0x2399+-0x2642)],_0x1bd379[_0x23714b+(0x1ca9+0x53+-0x1cf8)],_0x449cf2['y']),_0x449cf2['z']=_0x3c69ad(_0x1bd379[_0x23714b+(0x8*-0xe2+0x6*0x543+-0x1880)],_0x1bd379[_0x23714b+(0x15*0x167+-0xa00+-0x136e)],_0x449cf2['z'])),_0x19dfd7&&_0x42c4e2(_0x19dfd7,_0x4c6e1e[_0x371d3b*_0x4b1b2c+(0x58*-0x71+-0x364+0x2a3d)]),_0x2a2d68&&(_0xee0f5(_0x2a2d68,_0x4c6e1e[_0x371d3b*_0x4b1b2c+(0x1*0x1e01+0x1*-0x1aac+-0x353)]),_0x2a2d68['x']=_0x3c69ad(_0x1bd379[_0x23714b+(-0x1189+-0x61*0x16+0x19e5)],_0x1bd379[_0x23714b+(0x246f+-0xfb+-0x236b)],_0x2a2d68['x']),_0x2a2d68['y']=_0x3c69ad(_0x1bd379[_0x23714b+(0x15a7+-0xe3*0xb+0x1*-0xbdf)],_0x1bd379[_0x23714b+(0x109a+-0x1196*-0x1+-0x2226)],_0x2a2d68['y']),_0x2a2d68['z']=_0x3c69ad(_0x1bd379[_0x23714b+(-0x2aa*-0x2+-0x1c5a+-0x1a*-0xe3)],_0x1bd379[_0x23714b+(-0x257*0x1+0x1ad3+-0x1871)],_0x2a2d68['z'])),_0x4ea406&&(_0x4b2276(_0x4ea406,_0x4c6e1e[_0x371d3b*_0x4b1b2c+(0x23a+0x67c*-0x1+-0x1*-0x445)]),_0x1a933f>0x59f*0x2+-0x820*-0x1+-0x1*0x1352&&(_0x4ea406['x']=_0x3c69ad(_0x1bd379[_0x23714b+(-0x1*-0x266b+0x839*0x2+-0x36d1)],_0x1bd379[_0x23714b+(0xbd+0x15e4+0x3*-0x786)],_0x4ea406['x']),_0x4ea406['y']=_0x3c69ad(_0x1bd379[_0x23714b+(-0x1f92+-0x19fc+-0x1*-0x399b)],_0x1bd379[_0x23714b+(-0xc98*-0x1+-0x1*-0x97f+-0x1607)],_0x4ea406['y']),_0x4ea406['z']=_0x3c69ad(_0x1bd379[_0x23714b+(-0x165d*0x1+0x269a+0x565*-0x3)],_0x1bd379[_0x23714b+(-0x1729*-0x1+-0xc1*-0x15+-0x5*0x7c9)],_0x4ea406['z']))),_0x3de079&&(_0xee0f5(_0x3de079,_0x4c6e1e[_0x371d3b*_0x4b1b2c+(0x10b2+-0xba*-0x1+-0x1168)]),_0x3de079['x']=_0x3c69ad(_0x1bd379[_0x23714b+(0x259c+0x1411+-0x399b)],_0x1bd379[_0x23714b+(0x1*-0x1bc0+0xec3+0xe*0xef)],_0x3de079['x']),_0x3de079['y']=_0x3c69ad(_0x1bd379[_0x23714b+(-0x96c+0x243c*0x1+-0x1abd)],_0x1bd379[_0x23714b+(-0xb0*0x32+0x3e*0x3a+0x146a)],_0x3de079['y']),_0x3de079['z']=_0x3c69ad(_0x1bd379[_0x23714b+(0xe87+-0x1c80+0xe0d)],_0x1bd379[_0x23714b+(0x1*-0x11a7+-0x647*-0x4+0x75e*-0x1)],_0x3de079['z'])),_0x4dd5bf&&(_0xee0f5(_0x4dd5bf,_0x4c6e1e[_0x371d3b*_0x4b1b2c+(-0x1*-0x377+0xa09*-0x1+-0x7*-0xf1)]),_0x4dd5bf['x']=_0x3c69ad(_0x1bd379[_0x23714b+(-0x11*0x8f+-0x2*0x11c8+0x2d27)],_0x1bd379[_0x23714b+(-0x21b4+0xf*0x16b+0xc88)],_0x4dd5bf['x']),_0x4dd5bf['y']=_0x3c69ad(_0x1bd379[_0x23714b+(-0x83d+0x2d9*0x9+-0x2*0x8a5)],_0x1bd379[_0x23714b+(-0xce0+-0x1*-0x4a3+0x858)],_0x4dd5bf['y'])),_0x1d51dd&&_0x58d1b6>-0xaa3+0x13e3+0x94*-0x10){const _0x4f2137=[_0x3f3f36,_0x291afb,_0x2b8e08];for(let _0xce4cd5=0x19f9+0x1cc6+-0x36bf;_0xce4cd5<-0xd*0x251+-0x1eef*-0x1+-0xcf;++_0xce4cd5)for(let _0x3f7803=0x13fc+0x4b1*-0x5+0x379;_0x3f7803<-0x4*0x66e+0x5*-0x395+0x2bb0;++_0x3f7803)_0x1d51dd[_0xce4cd5*(0x5*-0x14d+0xbf0*-0x3+-0x2a6*-0x10)+_0x3f7803]=_0x3f7803<_0x30d770?_0x4f2137[_0xce4cd5][_0x371d3b*(-0x104f+-0x1125+-0xa5*-0x34)+_0x3f7803]*((0x107*0x3+-0xa*-0x38f+-0x26a3)/(-0x2ab*-0x3+-0x23e6+0x1ce4))-(0x4*-0x887+-0xc1*0x2b+0x428b):0x25ec+0x3*0x49b+0x113f*-0x3;}};}}class wN{constructor(){h(this,'numSplats'),h(this,'comments'),h(this,'chunkData'),h(this,'vertexData'),h(this,'is4D'),h(this,'shData0'),h(this,'shData1'),h(this,'shData2'),h(this,'shBands');}['createIter'](_0x7e953a,_0x1ca7fe,_0x5e3801,_0x899759,_0x189849,_0x3e98e0,_0x40c8f1){return new TN(this,_0x7e953a,_0x1ca7fe,_0x5e3801,_0x899759,_0x189849,_0x3e98e0,_0x40c8f1);}['calcAabb'](_0x2c6ac0){const {chunkData:_0x483977,numChunks:_0x1acf55,chunkSize:_0x5d39ff}=this;let _0x46d090=Math['exp'](Math['max'](_0x483977[-0x22+0x12aa*-0x1+-0x1*-0x12d5],_0x483977[0x97d+0xec2+-0x1835],_0x483977[0x3c5*-0x7+0xb*-0x282+-0x4*-0xd81])),_0x2184a3=_0x483977[0x1*-0xf25+-0x5*-0x487+0x89*-0xe]-_0x46d090,_0x586919=_0x483977[-0xb*0x61+0x10cd+0x35*-0x3d]-_0x46d090,_0x590d6c=_0x483977[-0x1da4*0x1+0x1a78+-0x1*-0x32e]-_0x46d090,_0x3b9b5f=_0x483977[-0x68d+0x1e5*0x13+-0x1d6f]+_0x46d090,_0x402988=_0x483977[-0xeb5+0xd*0x1c+0x5*0x2a9]+_0x46d090,_0x36664a=_0x483977[-0x15e2*-0x1+0x54*-0x41+-0x89]+_0x46d090;for(let _0xb9619b=0x1cc7*0x1+-0xc61+-0x1065;_0xb9619b<_0x1acf55;++_0xb9619b){const _0x848704=_0xb9619b*_0x5d39ff;_0x46d090=Math['exp'](Math['max'](_0x483977[_0x848704+(0x475+0x3+-0x46f)],_0x483977[_0x848704+(-0x132+-0x1367+0x9*0x24b)],_0x483977[_0x848704+(-0x1625+0x16bf+0x8f*-0x1)])),_0x2184a3=Math['min'](_0x2184a3,_0x483977[_0x848704+(-0x1e4f+-0xbe*0xf+0x2971)]-_0x46d090),_0x586919=Math['min'](_0x586919,_0x483977[_0x848704+(-0x4f+-0x59e*-0x4+-0x2*0xb14)]-_0x46d090),_0x590d6c=Math['min'](_0x590d6c,_0x483977[_0x848704+(0x28a+0x631*-0x6+0x15*0x1a6)]-_0x46d090),_0x3b9b5f=Math['max'](_0x3b9b5f,_0x483977[_0x848704+(-0x212c+0xcf1+0x143e*0x1)]+_0x46d090),_0x402988=Math['max'](_0x402988,_0x483977[_0x848704+(0xbc3+-0x22e2+0x1723)]+_0x46d090),_0x36664a=Math['max'](_0x36664a,_0x483977[_0x848704+(0x1a96+0x21*0xd8+-0x1*0x3669)]+_0x46d090);}return _0x2c6ac0['center']['set']((_0x2184a3+_0x3b9b5f)*(-0xa*0x1bd+0x12a9+-0x147+0.5),(_0x586919+_0x402988)*(0x1*0x235b+-0xc8f+-0x16cc+0.5),(_0x590d6c+_0x36664a)*(-0x241f+0xd88+0x1697+0.5)),_0x2c6ac0['halfExtent'+'s']['set']((_0x3b9b5f-_0x2184a3)*(-0x94f+-0x6d2+0x1021+0.5),(_0x402988-_0x586919)*(-0x28c*0xe+0xea*-0x7+0x2a0e+0.5),(_0x36664a-_0x590d6c)*(0x79+0x1208*0x2+-0x2489*0x1+0.5)),!(-0x47b*-0x1+0x4de+-0x959);}['getCenters'](_0x2aabdb){const {vertexData:_0x1ca71f,chunkData:_0x4171c0,numChunks:_0x20dcac,chunkSize:_0x27591c}=this;let _0x571b44,_0x3383da,_0x304b9a,_0x35470f,_0xe77255,_0x3b870c;for(let _0x9fd0dd=-0x85+-0x61a+0x69f;_0x9fd0dd<_0x20dcac;++_0x9fd0dd){const _0x458d99=_0x9fd0dd*_0x27591c;_0x571b44=_0x4171c0[_0x458d99+(0x5*-0x2f7+0x7c2*0x3+-0x873)],_0x3383da=_0x4171c0[_0x458d99+(-0x8*-0x2d4+-0x3*0x269+-0xf64)],_0x304b9a=_0x4171c0[_0x458d99+(-0x16b*0xd+0x1a75+0x26*-0x36)],_0x35470f=_0x4171c0[_0x458d99+(0x753+0x1*-0x118d+0xa3d)],_0xe77255=_0x4171c0[_0x458d99+(0x773+-0x10*-0x119+-0x18ff)],_0x3b870c=_0x4171c0[_0x458d99+(-0x11*-0x10a+0x1955*0x1+-0x1*0x2afa)];const _0x5b302e=Math['min'](this['numSplats'],(_0x9fd0dd+(-0x5*0xbc+0x197f+-0x15d2))*(0x1e20+0x19*0x175+-0x418d));for(let _0x4a5d71=_0x9fd0dd*(-0x9*0x231+-0x11f8+-0x7bd*-0x5);_0x4a5d71<_0x5b302e;++_0x4a5d71){const _0x42727a=_0x1ca71f[_0x4a5d71*(-0x34d+-0x3*-0x59c+-0x3*0x481)],_0x492ff1=(_0x42727a>>>0x10d4*0x2+-0x21ab+0x18)/(-0x395+-0x175*-0x9+-0x1*0x189),_0x19d57b=(_0x42727a>>>0x71*-0x21+0x7f*0x25+-0x3bf*0x1&0x1*-0x25+-0x2b+0x1*0x44f)/(-0x609+-0x1*0xc3d+0x1645),_0x53d564=(_0x42727a&0xd*-0x249+-0xb9b*-0x3+0x2e3*0x1)/(0x2096+-0x219e+0x907);_0x2aabdb[_0x4a5d71*(-0x1a5f+0x2*-0x40f+0x1140*0x2)+(-0x1*0x128f+0x5*-0x704+0xc7*0x45)]=(-0x207b+-0x15eb+0x3667-_0x492ff1)*_0x571b44+_0x492ff1*_0x35470f,_0x2aabdb[_0x4a5d71*(-0x3*0x5de+0xa05+-0x18*-0x51)+(-0xe59*-0x1+0x1137+-0x1f8f)]=(-0x162e+-0x1*-0x1f8d+-0x16*0x6d-_0x19d57b)*_0x3383da+_0x19d57b*_0xe77255,_0x2aabdb[_0x4a5d71*(0x3*-0x128+-0xd*-0xd5+0x6*-0x139)+(-0x7*0x22a+-0x4ac+0x13d4)]=(0x31*0x1+0x13e7+-0x8b*0x25-_0x53d564)*_0x304b9a+_0x53d564*_0x3b870c;}}}['getChunks'](_0x41900d){const {chunkData:_0x35b6b5,numChunks:_0x1cd742,chunkSize:_0x17ed00}=this;let _0x31e95b,_0x19b8d9,_0x44356f,_0x34c2e9,_0x2d2caf,_0x41d293;for(let _0x32c682=-0x74*0x4a+-0x4f9*0x1+0x2681;_0x32c682<_0x1cd742;++_0x32c682){const _0x2fc06a=_0x32c682*_0x17ed00;_0x31e95b=_0x35b6b5[_0x2fc06a+(-0xbc1+-0x1f*-0x99+0x3*-0x242)],_0x19b8d9=_0x35b6b5[_0x2fc06a+(0x34c*0x6+-0x3*-0x14d+-0x17ae)],_0x44356f=_0x35b6b5[_0x2fc06a+(-0x2*-0x5a1+0x86*0x4+-0xd58)],_0x34c2e9=_0x35b6b5[_0x2fc06a+(0xb63*0x1+-0xc02+0xa2)],_0x2d2caf=_0x35b6b5[_0x2fc06a+(0x13f3+-0x179a+0x3ab)],_0x41d293=_0x35b6b5[_0x2fc06a+(-0x2333+-0x1*0x266c+0x188c*0x3)],_0x41900d[_0x32c682*(0x132c+0x1faa+0x43c*-0xc)+(-0x177d+-0x150c+0x2c89)]=_0x31e95b,_0x41900d[_0x32c682*(-0xc8d+0x22ac+-0x1619)+(0x67*-0x3+-0x226a+0x23a0)]=_0x19b8d9,_0x41900d[_0x32c682*(0x14f3+-0x23f4+0xf07)+(0x22b+0x8b2+-0xadb)]=_0x44356f,_0x41900d[_0x32c682*(0x12c0+-0xb36+-0x784)+(0x209*-0xc+0x8*0x8b+0x1417*0x1)]=_0x34c2e9,_0x41900d[_0x32c682*(0x36*-0x92+-0x10d5+0xb*0x455)+(-0xb49+0x1efb+-0x1*0x13ae)]=_0x2d2caf,_0x41900d[_0x32c682*(-0x1*-0x1055+0x5*-0x5cb+0xca8)+(0x8a5*0x3+-0x1*0x1d86+0x39c)]=_0x41d293;}}['calcFocalP'+'oint'](_0x63c1f){const {chunkData:_0x184744,numChunks:_0x289b81,chunkSize:_0x54d27f}=this;_0x63c1f['x']=0x1a18+0x8*-0x2dd+-0x330,_0x63c1f['y']=-0x1404+-0x12f*-0x3+0x1077,_0x63c1f['z']=0x224d+0x1924+-0x3b71*0x1;for(let _0x56c637=-0x245+-0x21*-0xed+-0x1c48;_0x56c637<_0x289b81;++_0x56c637){const _0x3a870f=_0x56c637*_0x54d27f;_0x63c1f['x']+=_0x184744[_0x3a870f+(-0x1f84+0x2*-0x91b+0x31ba)]+_0x184744[_0x3a870f+(0x118b*-0x2+-0x2042+0x435b)],_0x63c1f['y']+=_0x184744[_0x3a870f+(0x1*0x100f+-0x1c*0xe9+-0x8e*-0x11)]+_0x184744[_0x3a870f+(-0xf1+-0x287*0xc+0x1*0x1f49)],_0x63c1f['z']+=_0x184744[_0x3a870f+(-0x852*0x3+-0x1*-0x1279+0x1*0x67f)]+_0x184744[_0x3a870f+(0x127f+0x1ced+-0x2f67)];}_0x63c1f['mulScalar']((-0x1*-0x623+-0xc01+0x5de+0.5)/_0x289b81);}get['isCompress'+'ed'](){return!(-0x166+-0x1d42+0x1ea8);}get['numChunks'](){return Math['ceil'](this['numSplats']/(0x2025+0x340*0xa+0x1*-0x3fa5));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}async['decompress'](){const _0x39c728=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'],{shBands:_0x38caf3}=this;if(_0x38caf3>0x2247+-0x1e2*0x9+0x99*-0x1d){const _0x3c49c0=[];for(let _0x5a96ff=0x91*-0x11+-0x10c9*-0x1+-0x1ca*0x4;_0x5a96ff<-0x952+0x925+0x5a;++_0x5a96ff)_0x3c49c0['push']('f_rest_'+_0x5a96ff);_0x39c728['splice'](_0x39c728['indexOf']('f_dc_0')+(0x2a8+0x1eaf+-0x10ab*0x2),-0x3*0x7d2+-0x44b*0x5+0x2ced,..._0x3c49c0);}const _0x714b37=new xN();return _0x714b37['decompress'](this['numSplats'],this['chunkData'],this['chunkSize'],this['vertexData'],this['shData0'],this['shData1'],this['shData2'],this['shBands']),new Promise((_0x4345d,_0x2db23c)=>{_0x714b37['on']('decompress'+'ed',_0x306e75=>{_0x714b37['destroy'](),_0x4345d(new zn([{'name':'vertex','count':this['numSplats'],'properties':_0x39c728['map'](_0x458af3=>({'type':'float','name':_0x458af3,'storage':_0x306e75[_0x458af3],'byteSize':0x4}))}],this['comments']));});});}}async function EN(){const _0x20e4fc='super4d-ca'+'che-v1',_0x4b7f06={'maxAge':0x9a7ec800,'maxSize':0x280000000},_0x1cddd6=new Uint8Array([0x211*-0x7+-0x17*-0x77+0x436,0x499+-0x21b3+0x1d86,0x1a3*0x1+-0x1cff*-0x1+-0x1e29,0x1601+-0x183+0x51d*-0x4]),_0x520ed5=new Uint8Array([-0x2629*-0x1+0xb11*0x2+-0x3c41,0x1*-0x341+-0x266*0xd+0x1*0x22d4,0x1*-0x220f+-0x242d+-0x1*-0x46aa,-0x1f1b+0x66a+0x1915,-0xac4+0x107*0x19+-0xe8c,0x1156*0x1+-0x22a9+0x59*0x33,-0x402*-0x3+0x82+0xc23*-0x1,-0xc49+0x26b5+-0x1a0b,0x61*0x43+0x272+-0x1b71,0x11a2+-0x25c+-0xee1,-0x5*0x641+-0xc92+-0x3*-0xec3,-0x173c+-0xcbb+0x2401]),_0x8f4ab2=0x2438*0x1+0xb2e+-0x2f66+0.28209479177387814,_0x2637f2=new Map([['char',Int8Array],['uchar',Uint8Array],['short',Int16Array],['ushort',Uint16Array],['int',Int32Array],['uint',Uint32Array],['float',Float32Array],['double',Float64Array]]);class _0x459c76{constructor(_0x1ffa5f={}){this['options']={..._0x4b7f06,..._0x1ffa5f},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=-0xa*0x27b+-0x1b11+-0x1*-0x33df,this['initialize'+'d']=!(-0x1dc5+0xd55*0x1+0x1071);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x20e4fc);const _0x2ff650=await this['cache']['keys'](),_0x52de39=[];for(const _0x39a429 of _0x2ff650){const _0x3ef4fb=_0x39a429['url'],_0x1d7cd2=await this['cache']['match'](_0x3ef4fb);if(_0x1d7cd2){const _0x454e83=(await _0x1d7cd2['blob']())['size'],_0x3f4ed0=_0x1d7cd2['headers']['get']('x-cache-ti'+'me');_0x3f4ed0&&_0x52de39['push']({'url':_0x3ef4fb,'size':_0x454e83,'cacheTime':parseInt(_0x3f4ed0)});}}_0x52de39['sort']((_0x1147b6,_0x47dc74)=>_0x1147b6['cacheTime']-_0x47dc74['cacheTime']);for(const _0x609eaa of _0x52de39)this['cacheSizes']['set'](_0x609eaa['url'],_0x609eaa['size']),this['currentSiz'+'e']+=_0x609eaa['size'],this['lruList']['push'](_0x609eaa['url']);}catch(_0x1f95b1){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x1f95b1);}this['initialize'+'d']=!(-0x10b+0x1fbd+-0x1eb2);}}async['get'](_0x15840a){if(await this['init'](),!this['cache'])return null;try{const _0x862736=await this['cache']['match'](_0x15840a);if(!_0x862736)return null;const _0x3bf8a8=_0x862736['headers']['get']('x-cache-ti'+'me');return _0x3bf8a8&&Date['now']()-parseInt(_0x3bf8a8)>this['options']['maxAge']?(await this['delete'](_0x15840a),null):(this['updateLRU'](_0x15840a),_0x862736);}catch{return null;}}async['set'](_0x33a366,_0x1a2dd1){if(!(!this['cache']||_0x33a366['startsWith']('blob:')))try{const _0x32d90a=_0x1a2dd1['clone'](),_0x206255=await _0x32d90a['blob'](),_0x59da52=_0x206255['size'];this['currentSiz'+'e']+_0x59da52>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x59da52);const _0x3fbb22=new Headers(_0x32d90a['headers']);_0x3fbb22['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x321e3c=new Response(_0x206255,{'status':_0x32d90a['status'],'statusText':_0x32d90a['statusText'],'headers':_0x3fbb22});await this['cache']['put'](_0x33a366,_0x321e3c),this['cacheSizes']['set'](_0x33a366,_0x59da52),this['currentSiz'+'e']+=_0x59da52,this['updateLRU'](_0x33a366);}catch(_0x5df627){console['error']('Cache\x20set\x20'+'error:',_0x5df627);}}['updateLRU'](_0x523184){const _0x5cc4c7=this['lruList']['indexOf'](_0x523184);_0x5cc4c7>-(-0x1832+0x4f5+-0x335*-0x6)&&this['lruList']['splice'](_0x5cc4c7,0x13ad+-0xf*0x14b+-0x47*0x1),this['lruList']['push'](_0x523184);}async['cleanupSpa'+'ce'](_0x57e6ee){const _0x3bda03=this['options']['maxSize']*(0x2191*-0x1+0xa*-0x2d7+-0x3df7*-0x1+0.9);if(!(this['currentSiz'+'e']<=_0x3bda03))for(;this['lruList']['length']>-0x2295*0x1+0x537*-0x1+0x27cc&&this['currentSiz'+'e']>_0x3bda03;){const _0x3288ca=this['lruList']['shift']();_0x3288ca&&await this['delete'](_0x3288ca);}}async['delete'](_0x32c29a){if(this['cache'])try{await this['cache']['delete'](_0x32c29a);const _0x4ff679=this['cacheSizes']['get'](_0x32c29a)||-0x1*-0x254d+0x18a4+-0x3df1;this['currentSiz'+'e']-=_0x4ff679,this['cacheSizes']['delete'](_0x32c29a);const _0x966cf1=this['lruList']['indexOf'](_0x32c29a);_0x966cf1>-(0x1*-0xc07+0x9cb+-0xbf*-0x3)&&this['lruList']['splice'](_0x966cf1,-0x93e+-0x40f+-0xd4e*-0x1);}catch(_0x2bb4bc){console['error']('Cache\x20dele'+'te\x20error:',_0x2bb4bc);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x156577=>Promise['all'](_0x156577['map'](_0x3380ec=>{var _0x10918b;return(_0x10918b=this['cache'])==null?void(-0x1*0x2163+-0xb80+-0x1*-0x2ce3):_0x10918b['delete'](_0x3380ec);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x1565*0x1+-0xd*-0x1ab+0x25*-0x2;}catch(_0x2d8a76){console['error']('Cache\x20clea'+'r\x20error:',_0x2d8a76);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x1034+0x1a9*0xd+-0x561;}}class _0x4b99ba{constructor(_0x4bf198=[],_0x5d2b5f={}){this['cacheManag'+'er']=new _0x459c76(_0x5d2b5f['cache']),this['retryCount']=_0x5d2b5f['retryCount']||0x1*0xf86+0x2c7*0x8+-0x25bb,this['retryDelay']=_0x5d2b5f['retryDelay']||0x1*0x1381+0xcf0+0xdf*-0x23,this['maxConcurr'+'ency']=_0x5d2b5f['maxConcurr'+'ency']||-0x258d+0xf5+0xa*0x3a9,this['downloadQu'+'eue']=_0x4bf198,this['isProcessi'+'ngDownload'+'Queue']=!(-0x416*0x1+-0x4c*-0x6b+-0xd*0x221),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(-0x9*0x21f+-0x1d13+0x302a);this['downloadQu'+'eue']['length']>0x1*-0x83+-0x186f+-0x18f2*-0x1;)try{const _0x2ac243=this['downloadQu'+'eue']['splice'](0x43*-0x5+-0x1*-0x1cc9+-0x1b7a,this['maxConcurr'+'ency'])['map'](_0x5503c3=>{if(!this['pendingRes'+'ponses']['has'](_0x5503c3)){const _0x48997e=this['download'](_0x5503c3);return this['pendingRes'+'ponses']['set'](_0x5503c3,_0x48997e),_0x48997e['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x5503c3);});}return Promise['resolve']();});await Promise['all'](_0x2ac243);}catch(_0x4b1203){console['error']('Download\x20e'+'rror:',_0x4b1203);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(-0x1f42+0x2c5*0x5+0x116a);}}}async['fetch'](_0x4f37fa,_0x1dad7c={}){if(this['pendingRes'+'ponses']['has'](_0x4f37fa))return this['pendingRes'+'ponses']['get'](_0x4f37fa);const {forceRefresh:_0x1d9de3=!(-0x6a1*-0x3+0x82d+0xb*-0x28d),..._0x2cbf9c}=_0x1dad7c;this['pendingRes'+'ponses']['set'](_0x4f37fa,this['download'](_0x4f37fa,_0x2cbf9c));const _0x1c6f76=await this['pendingRes'+'ponses']['get'](_0x4f37fa);return this['pendingRes'+'ponses']['delete'](_0x4f37fa),_0x1c6f76;}async['download'](_0x5c3213,_0x373adb={}){var _0x5ad39f;await((_0x5ad39f=this['cacheManag'+'er'])==null?void(0x1295*-0x2+-0x44b+-0x2975*-0x1):_0x5ad39f['init']());const {forceRefresh:_0xb0c513=!(0x2*-0x887+-0x29c*0x6+0x19*0x14f),..._0x281263}=_0x373adb;_0xb0c513&&await this['cacheManag'+'er']['delete'](_0x5c3213);const _0x16c678=await this['cacheManag'+'er']['get'](_0x5c3213);if(_0x16c678)return _0x16c678;let _0x1739d4;for(let _0x3fbe0c=0x13eb*-0x1+0x1*0x647+0xda4;_0x3fbe0c<this['retryCount'];_0x3fbe0c++)try{const _0x5185ef=await fetch(_0x5c3213,_0x281263);if(!_0x5185ef['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x5185ef['status']);return await this['cacheManag'+'er']['set'](_0x5c3213,_0x5185ef),_0x5185ef;}catch(_0x1d837e){console['error']('Download\x20e'+'rror:',_0x1d837e),_0x1739d4=_0x1d837e,_0x3fbe0c<this['retryCount']-(-0x10b+-0xcde+0x1*0xdea)&&await new Promise(_0x5c5b07=>setTimeout(_0x5c5b07,this['retryDelay']*(_0x3fbe0c+(-0x15a8+-0xf77*0x1+0x20*0x129))));}throw _0x1739d4;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){this['cacheManag'+'er']['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(0x3*-0x86f+-0x18c+-0x1eb*-0xe),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x28c90e{constructor(){this['numSplats']=0x1*0x1ca3+-0x24*-0x50+-0x27e3,this['comments']=[],this['chunkData']=new Float32Array(-0x14cf+0x75c+0xd73),this['vertexData']=new Uint32Array(0x2357+0x1*-0x247d+0x126),this['is4D']=!(0x24ce+-0x1bba+-0x914),this['shBands']=0x14ea*-0x1+-0x1*0xfe6+0x24d*0x10,this['shData0']=new Uint8Array(-0x3*-0x699+0x123*-0x2+0x5d7*-0x3),this['shData1']=new Uint8Array(-0x1*0x147d+-0xb9a+-0x109*-0x1f),this['shData2']=new Uint8Array(-0x1f75*0x1+0x6a7*0x1+0x18ce),this['elements']=[],this['isCompress'+'ed']=!(0x1*0x1df9+0x1104+0x20b*-0x17);}get['numChunks'](){return Math['ceil'](this['numSplats']/(0x4*-0x330+-0x11b5+0x1f75));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}}class _0x4d27a4{constructor(_0x510520,_0x1af07d=[]){this['elements']=_0x510520,this['comments']=_0x1af07d,this['isCompress'+'ed']=!(0xb*-0x19a+0x3dd*-0x7+0x2caa*0x1);}}class _0x269285{constructor(_0x4a97f5,_0x116292){this['reader']=_0x4a97f5,this['progressFu'+'nc']=_0x116292,this['head']=0x1*0x1a56+-0x2336+-0x8e*-0x10,this['tail']=-0x1949+-0x21*0x127+0x7ea*0x8;}async['read'](){var _0x4126f6;const {value:_0x4b6e64,done:_0x3fbe0d}=await this['reader']['read']();if(_0x3fbe0d)throw new Error('Stream\x20fin'+'ished\x20befo'+'re\x20end\x20of\x20'+'header');this['push'](_0x4b6e64),(_0x4126f6=this['progressFu'+'nc'])==null||_0x4126f6['call'](this,_0x4b6e64['byteLength']);}['push'](_0x32714f){if(!this['data'])this['data']=_0x32714f,this['view']=new DataView(this['data']['buffer']),this['tail']=_0x32714f['length'];else{const _0x2ef79a=this['tail']-this['head'],_0x263be9=_0x2ef79a+_0x32714f['length'];if(this['data']['length']>=_0x263be9)this['head']>-0x125*-0x12+-0xd*0x223+0x72d?(this['data']['copyWithin'](-0xa*0x5e+0x21f4+0x143*-0x18,this['head'],this['tail']),this['data']['set'](_0x32714f,_0x2ef79a),this['head']=-0xbe*-0x34+0x213f+0x1*-0x47d7,this['tail']=_0x263be9):(this['data']['set'](_0x32714f,this['tail']),this['tail']+=_0x32714f['length']);else{const _0x3b0043=new Uint8Array(_0x263be9);this['head']>-0xc*0x1a5+0x13f*-0x11+0x28eb*0x1||this['tail']<this['data']['length']?_0x3b0043['set'](this['data']['subarray'](this['head'],this['tail']),-0x10b1+0x17f+0xf32):_0x3b0043['set'](this['data'],-0x1979+0xf84+0x9f5),_0x3b0043['set'](_0x32714f,_0x2ef79a),this['data']=_0x3b0043,this['view']=new DataView(this['data']['buffer']),this['head']=0x1357+-0x644*0x1+-0xd13,this['tail']=_0x263be9;}}}['compact'](){this['head']>-0x193+0x17c7+-0x1634&&(this['data']['copyWithin'](-0x1*-0x8c0+-0x16af+0xdef,this['head'],this['tail']),this['tail']-=this['head'],this['head']=-0x92d+0x71*0x43+-0x1466);}get['remaining'](){return this['tail']-this['head'];}['getInt8'](){const _0x28a15f=this['view']['getInt8'](this['head']);return this['head']++,_0x28a15f;}['getUint8'](){const _0xd8b9be=this['view']['getUint8'](this['head']);return this['head']++,_0xd8b9be;}['getInt16'](){const _0x3f45a9=this['view']['getInt16'](this['head'],!(-0x1702+0xf19+0x7e9));return this['head']+=0x2439+-0x16d2+0x477*-0x3,_0x3f45a9;}['getUint16'](){const _0x33bef3=this['view']['getUint16'](this['head'],!(0x1*-0xd6c+-0x1966+0x1369*0x2));return this['head']+=-0x1e5a+-0x14*-0x18b+-0x80,_0x33bef3;}['getInt32'](){const _0x4bd5b6=this['view']['getInt32'](this['head'],!(-0xc*-0x327+-0xb*0x31f+-0x37f));return this['head']+=-0x2101+-0x1198*-0x1+0xf6d,_0x4bd5b6;}['getUint32'](){const _0x57be74=this['view']['getUint32'](this['head'],!(0x14bf+-0x3*0x9a5+0x830));return this['head']+=-0x153c+0x2505+-0xb*0x16f,_0x57be74;}['getFloat32'](){const _0x6c2ca0=this['view']['getFloat32'](this['head'],!(0x5*-0x1f1+0x1aa4+-0x10ef));return this['head']+=-0x20b6+-0x6*0x3f+0x2234,_0x6c2ca0;}['getFloat64'](){const _0x1b5239=this['view']['getFloat64'](this['head'],!(0x1dbc+-0x1521*0x1+-0x89b));return this['head']+=-0x506*0x6+-0xa*0x15d+-0xe9a*-0x3,_0x1b5239;}}class _0x4ecd2a{constructor(_0x5dbe6e,_0x80edbd,_0x43b4e5){this['x']=_0x5dbe6e,this['y']=_0x80edbd,this['z']=_0x43b4e5;}}class _0x1661a4{constructor(_0x83e312,_0x2077ea,_0x5ddcf6,_0x92296f){this['x']=_0x83e312,this['y']=_0x2077ea,this['z']=_0x5ddcf6,this['w']=_0x92296f;}}class _0xab379d{constructor(_0x5a2949,_0x11ee3a,_0x5e6ed6,_0x3a7527){this['x']=_0x5a2949,this['y']=_0x11ee3a,this['z']=_0x5e6ed6,this['w']=_0x3a7527;}['set'](_0x504266,_0xd42ac9,_0x198a61,_0x4278e6){this['x']=_0x504266,this['y']=_0xd42ac9,this['z']=_0x198a61,this['w']=_0x4278e6;}}class _0x397212{constructor(_0x297939,_0x5c78b7,_0x466cf1,_0x4ba48a,_0x587c72,_0x42dbaf,_0x1e963c,_0x22193b,_0x5b756a,_0x38d576,_0x365c79,_0x2b6239,_0x2c58cd,_0x358650){const _0x2140d2=(_0x2d798c,_0x26cdf3)=>{const _0x538945=(-0xaac*0x1+-0x1*0x1a03+0x24b0<<_0x26cdf3)-(-0x9a9+0x6*-0x3d9+0x20c0);return(_0x2d798c&_0x538945)/_0x538945;},_0xb73e82=(_0x1af546,_0x1cb57c)=>{_0x1af546['x']=_0x2140d2(_0x1cb57c>>>-0x2d3+-0x1*-0x1aa3+0xf3*-0x19,0xf3f+-0x1615*0x1+0x1*0x6e1),_0x1af546['y']=_0x2140d2(_0x1cb57c>>>-0x26*0xce+-0xee*-0x1a+0x673,-0x16a6+-0x161*0x1+0x1811),_0x1af546['z']=_0x2140d2(_0x1cb57c,-0x4*0x305+-0x1246+0x1e65);},_0x32c1b6=(_0x267953,_0x500a5c)=>{_0x267953['x']=_0x2140d2(_0x500a5c>>>-0x3c3*0x4+-0x5*0x242+-0x22*-0xc7,0x841+0x22db+-0x2b14),_0x267953['y']=_0x2140d2(_0x500a5c>>>0x172c+-0x22fb+-0x3f5*-0x3,0x13e8+-0x1662+-0xd6*-0x3),_0x267953['z']=_0x2140d2(_0x500a5c>>>0x4+-0x10*-0x191+0xe*-0x1ca,-0x52*0x7+0x4b6+-0x30*0xd),_0x267953['w']=_0x2140d2(_0x500a5c,-0xeff+-0x13bf+-0x1*-0x22c6);},_0x80daf4=(_0x5bf047,_0x5db757)=>{const _0x2e2d92=(-0xd30+-0x8b*-0x1d+0xda*-0x3)/(Math['sqrt'](-0x1ca3+0xc38+0x106d)*(-0x176c+0x1336+0x436+0.5)),_0x50b94f=(_0x2140d2(_0x5db757>>>0xe71*0x2+-0x1*-0x1949+0xe3*-0x3d,0x1db7*-0x1+-0x1*0x10b+0x1ecc)-(0x3*-0x713+-0x2f*0x6b+-0x2*-0x146f+0.5))*_0x2e2d92,_0x2659d3=(_0x2140d2(_0x5db757>>>-0x19f7+-0x1*0x18f1+0x2*0x1979,-0x6e*0xb+0x2*-0x10a6+0x2610)-(-0x23db+-0x1*-0x189a+0xb41+0.5))*_0x2e2d92,_0x3469fb=(_0x2140d2(_0x5db757,0x2383*-0x1+-0x1dc4+0x4151*0x1)-(-0x1f*-0xc9+-0xebe+-0xbd*0xd+0.5))*_0x2e2d92,_0x544159=Math['sqrt'](-0x1*-0x1855+0x18c6+0x9d2*-0x5-(_0x50b94f*_0x50b94f+_0x2659d3*_0x2659d3+_0x3469fb*_0x3469fb));switch(_0x5db757>>>0x1889*0x1+-0x281*-0xf+-0x3dfa*0x1){case-0x26e0+0xdb1+0x865*0x3:_0x5bf047['set'](_0x50b94f,_0x2659d3,_0x3469fb,_0x544159);break;case-0x17c5+0x241*-0x2+0x1c48:_0x5bf047['set'](_0x544159,_0x2659d3,_0x3469fb,_0x50b94f);break;case 0x1*-0x2250+-0x337+0x2589*0x1:_0x5bf047['set'](_0x2659d3,_0x544159,_0x3469fb,_0x50b94f);break;case 0x3*0x971+-0x2647+0x9f7:_0x5bf047['set'](_0x2659d3,_0x3469fb,_0x544159,_0x50b94f);break;}},_0x3168d0=(_0x25eaf9,_0x4fcdfd,_0x4bfa24)=>_0x25eaf9*(0x2545+-0x1*0x16e6+-0xe5e-_0x4bfa24)+_0x4fcdfd*_0x4bfa24,_0x478320=[0x115*0xa+0xeb*-0x27+0x18fe,0x1d3*0x2+-0x5ca+0x22c,-0x22a*0x2+-0xe4b*-0x2+-0x1833][_0x1e963c-(-0x16a0+0x188e+-0x1ed*0x1)],_0x415bcc=-0x1cdb+-0x3*0x200+-0x22e1*-0x1;this['read']=_0x25f4a7=>{const _0x293faa=Math['floor'](_0x25f4a7/(-0x1d90+0x1508+0x988))*_0x5c78b7;if(_0x22193b&&(_0xb73e82(_0x22193b,_0x466cf1[_0x25f4a7*_0x415bcc+(0xb5*-0x1d+0x7c*-0x4+0x5*0x47d)]),_0x22193b['x']=_0x3168d0(_0x297939[_0x293faa+(-0x24ab*0x1+-0x8c8+0x2d73)],_0x297939[_0x293faa+(-0x1448+0x4*0x2ec+0x89b*0x1)],_0x22193b['x']),_0x22193b['y']=_0x3168d0(_0x297939[_0x293faa+(0xdbd*-0x1+0x4*-0x206+0x15d6)],_0x297939[_0x293faa+(0x1*-0x2485+-0x1643+0x3acc)],_0x22193b['y']),_0x22193b['z']=_0x3168d0(_0x297939[_0x293faa+(-0x1030+0xa61+-0x1*-0x5d1)],_0x297939[_0x293faa+(0x1*0xe6b+0x1d7*0x1+-0x103d)],_0x22193b['z'])),_0x5b756a&&_0x80daf4(_0x5b756a,_0x466cf1[_0x25f4a7*_0x415bcc+(0x1*0x1997+-0x1*0x1cd+-0x17c9)]),_0x38d576&&(_0xb73e82(_0x38d576,_0x466cf1[_0x25f4a7*_0x415bcc+(-0x1*-0xf6d+0x281*-0xd+-0x81*-0x22)]),_0x38d576['x']=_0x3168d0(_0x297939[_0x293faa+(0x21a0+-0x1e95+-0x305)],_0x297939[_0x293faa+(0x94f*-0x4+-0x655+0x2b9a)],_0x38d576['x']),_0x38d576['y']=_0x3168d0(_0x297939[_0x293faa+(-0x1*-0x75d+-0x13d2+0xc7c)],_0x297939[_0x293faa+(0x26be+-0x2*-0x1a9+0x1503*-0x2)],_0x38d576['y']),_0x38d576['z']=_0x3168d0(_0x297939[_0x293faa+(-0x1c3c+0x1*0xe05+-0x209*-0x7)],_0x297939[_0x293faa+(-0x1ac9+0x103a+-0xa9a*-0x1)],_0x38d576['z'])),_0x365c79&&(_0x32c1b6(_0x365c79,_0x466cf1[_0x25f4a7*_0x415bcc+(-0x49*0x73+0x1e65+0x269)]),_0x5c78b7>0x111a+-0x199e+0x1*0x890&&(_0x365c79['x']=_0x3168d0(_0x297939[_0x293faa+(0x58a+0x53a+-0xab8)],_0x297939[_0x293faa+(-0xd*-0x1eb+0x8d0+-0x4d*0x70)],_0x365c79['x']),_0x365c79['y']=_0x3168d0(_0x297939[_0x293faa+(0x69a*-0x1+-0x42f*-0x9+-0x1f0*0x10)],_0x297939[_0x293faa+(0x21f9+0x2374+-0x455d)],_0x365c79['y']),_0x365c79['z']=_0x3168d0(_0x297939[_0x293faa+(-0x101e+0x1*0x269e+-0x1672)],_0x297939[_0x293faa+(0x127f+-0x4b*0x83+0x13f3)],_0x365c79['z']))),_0x2b6239&&(_0xb73e82(_0x2b6239,_0x466cf1[_0x25f4a7*_0x415bcc+(-0x56*-0x1c+-0x139a+-0x1*-0xa36)]),_0x2b6239['x']=_0x3168d0(_0x297939[_0x293faa+(0x2*-0x2ce+-0x1782+-0x10*-0x1d3)],_0x297939[_0x293faa+(-0x1e35*0x1+-0xceb+0x2b35)],_0x2b6239['x']),_0x2b6239['y']=_0x3168d0(_0x297939[_0x293faa+(0xebd+0x1673*0x1+-0xc5f*0x3)],_0x297939[_0x293faa+(-0x1976+-0x1*-0x6c3+0x12c9)],_0x2b6239['y']),_0x2b6239['z']=_0x3168d0(_0x297939[_0x293faa+(-0x5*0x3fd+0x10e4+0x321)],_0x297939[_0x293faa+(-0x200d+-0x3*0x6fb+0x1*0x3515)],_0x2b6239['z'])),_0x2c58cd&&(_0xb73e82(_0x2c58cd,_0x466cf1[_0x25f4a7*_0x415bcc+(0x67*-0x3b+0x1*-0x21e2+0xe*0x41e)]),_0x2c58cd['x']=_0x3168d0(_0x297939[_0x293faa+(-0x137e+0x12f2+-0xa4*-0x1)],_0x297939[_0x293faa+(0x2*0x5e6+0xfa5+-0x1b58)],_0x2c58cd['x']),_0x2c58cd['y']=_0x3168d0(_0x297939[_0x293faa+(-0x1db8+0x3ee+0xcf2*0x2)],_0x297939[_0x293faa+(0x22ca+-0x503*-0x1+-0x27b2)],_0x2c58cd['y'])),_0x358650&&_0x1e963c>0x19fb+0x2ab*0x1+-0x1ca6){const _0x4c252e=[_0x4ba48a,_0x587c72,_0x42dbaf];for(let _0x1db629=-0x8*-0x45c+0x239b*0x1+-0x467b*0x1;_0x1db629<0x2*0x126a+-0x1af3+-0x9de;++_0x1db629)for(let _0x9800a4=0xbe9+0x97a+-0x1563;_0x9800a4<0x1*-0x856+-0x914+-0x1f1*-0x9;++_0x9800a4)_0x358650[_0x1db629*(-0x182c+-0xe*-0x1e8+-0x275)+_0x9800a4]=_0x9800a4<_0x478320?_0x4c252e[_0x1db629][_0x25f4a7*(-0xc*-0x15d+0x7*-0x16e+-0x46*0x17)+_0x9800a4]*((0x147*0xf+-0x13f2+0x13*0xb)/(0x1*-0xf85+0x2582*-0x1+0x3606))-(0xa*-0x14+-0x1080+-0x1ec*-0x9):0x2620+-0x2413*-0x1+0x83*-0x91;}};}}self['onmessage']=async _0x7f9901=>{var _0x3b61d8,_0x49aa23,_0x39ab61;const {data:_0x3f705c}=_0x7f9901;switch(_0x3f705c['type']){case'initWorker':globalThis['loadUrlLis'+'t']=_0x3f705c['loadUrlLis'+'t'],globalThis['fetchWorke'+'r']=new _0x4b99ba(globalThis['loadUrlLis'+'t']);break;case'destroyWor'+'ker':(_0x3b61d8=globalThis['fetchWorke'+'r'])==null||_0x3b61d8['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['loadUrlLis'+'t']=[];break;case'loadPly':const {url:_0x28f796,decompress:_0x551359}=_0x3f705c;try{globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x4b99ba(globalThis['loadUrlLis'+'t']));const _0x5d9202=await globalThis['fetchWorke'+'r']['fetch'](_0x28f796);if(!_0x5d9202||!_0x5d9202['body'])self['postMessag'+'e']({'type':'error','data':'Error\x20load'+'ing\x20resour'+'ce','url':_0x28f796});else{const _0x1b0c8a=parseInt(_0x5d9202['headers']['get']('content-le'+'ngth')??'0',-0xd*-0x287+0x24cb+-0x459c);self['postMessag'+'e']({'type':'totalLengt'+'h','totalLength':_0x1b0c8a,'bytes':0x0,'url':_0x28f796});let _0x5e7d2f=await _0x3aa70c(_0x5d9202['body']['getReader'](),_0x54ecef=>{self['postMessag'+'e']({'type':'progress','bytes':_0x54ecef,'totalLength':_0x1b0c8a,'url':_0x28f796});});if(_0x551359&&_0x5e7d2f['isCompress'+'ed']){const _0x51e93b=_0x37ba1a(_0x5e7d2f),_0x3742be=(_0x49aa23=_0x51e93b==null?void(-0x2639+0x1d+0x130e*0x2):_0x51e93b['elements'][-0x15e7+-0x238d*-0x1+-0xda6*0x1])==null?void(0x6*0x25b+-0x9b6+-0x46c):_0x49aa23['properties']['map'](_0x4394da=>_0x4394da['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x51e93b,'url':_0x28f796},_0x3742be);}else{if(_0x5e7d2f['isCompress'+'ed']){const _0x2918c1=['chunkData','vertexData'];_0x5e7d2f['shData0']&&_0x2918c1['push']('shData0','shData1','shData2');const _0x2c8b37=_0x2918c1['map'](_0x270277=>{var _0x461146;return(_0x461146=_0x5e7d2f[_0x270277])==null?void(-0x236f+0x6*-0x53+0x2561):_0x461146['buffer'];});self['postMessag'+'e']({'type':'splatData','data':_0x5e7d2f,'url':_0x28f796},_0x2c8b37);}else{_0x5e7d2f=_0x1d2d55(_0x5e7d2f);const _0x20f641=(_0x39ab61=_0x5e7d2f==null?void(0x1814+0x1036+-0x284a):_0x5e7d2f['elements'][0x1f21+0x18bf+-0x37e0])==null?void(0x1d68+0x2ee+0x2056*-0x1):_0x39ab61['properties']['map'](_0x33e892=>_0x33e892['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x5e7d2f,'url':_0x28f796},_0x20f641);}}}}catch(_0x4bdd03){self['postMessag'+'e']({'type':'error','data':_0x4bdd03['message'],'url':_0x28f796});}break;}};const _0x1d2d55=_0x120f39=>{var _0x5775da;const _0x28d11a=(_0x5775da=_0x120f39==null?void(-0x1*0x1445+-0x1a91+0x176b*0x2):_0x120f39['elements'][-0x9c5*-0x1+0x1068+-0x1a2d])==null?void(0x6af+0x86f+0x183*-0xa):_0x5775da['properties']['find'](_0x33f981=>_0x33f981['name']==='opacity');if(_0x28d11a){for(let _0x35c813=-0x47*0x65+-0x45*0x3+0x20f*0xe;_0x35c813<_0x28d11a['storage']['length'];_0x35c813++)_0x28d11a['storage'][_0x35c813]=(-0x14f7+-0x10e*0x1f+0x35aa)/(-0x1e*-0x8a+0x1b6+-0x11e1+Math['exp'](-_0x28d11a['storage'][_0x35c813]));}return _0x120f39;},_0x512024=_0xe0fdcc=>{const _0x43b8c6=[],_0x52c302=[];let _0x3a5632;for(let _0x256f36=0x29*-0xe6+-0x21c+0x26f3;_0x256f36<_0xe0fdcc['length'];++_0x256f36){const _0x2d0681=_0xe0fdcc[_0x256f36]['split']('\x20');switch(_0x2d0681[-0xba2+-0x2*0x70b+0x19b8]){case'comment':_0x52c302['push'](_0x2d0681['slice'](0x2*0x993+0x63*-0x6+-0x10d3)['join']('\x20'));break;case'format':_0x3a5632=_0x2d0681[0xcb1*-0x2+0x1c0*0xd+0x2a3];break;case'element':_0x43b8c6['push']({'name':_0x2d0681[-0xd25*0x1+-0x2233+0x2c9*0x11],'count':parseInt(_0x2d0681[0x1*0x1f85+-0x2*0xc48+0x3*-0x251],0x10d7+-0xc21+-0x4ac),'properties':[]});break;case'property':{if(!_0x2637f2['has'](_0x2d0681[0xf70+-0xd8e+0x25*-0xd]))throw new Error('Unrecogniz'+'ed\x20propert'+'y\x20data\x20typ'+'e\x20\x27'+_0x2d0681[0x11*0x243+0x15a4+-0x3c16]+('\x27\x20in\x20ply\x20h'+'eader'));_0x43b8c6[_0x43b8c6['length']-(-0x16fb*0x1+0x823*0x1+0xed9)]['properties']['push']({'type':_0x2d0681[-0x5*0x73+0x5f*-0x1f+0xdc1],'name':_0x2d0681[0x1e57+-0xa02+-0x2b*0x79],'storage':null,'byteSize':_0x2637f2['get'](_0x2d0681[0x1d7c+-0x12e9*0x1+0x3*-0x386])['BYTES_PER_'+'ELEMENT']});break;}default:throw new Error('Unrecogniz'+'ed\x20header\x20'+'value\x20\x27'+_0x2d0681[-0x1b28+-0xe7e+0x3*0xde2]+('\x27\x20in\x20ply\x20h'+'eader'));}}return{'elements':_0x43b8c6,'format':_0x3a5632,'comments':_0x52c302};},_0x4fe70b=_0x2712fb=>{const _0x2677c4=['min_x','min_y','min_z','max_x','max_y','max_z','min_scale_'+'x','min_scale_'+'y','min_scale_'+'z','max_scale_'+'x','max_scale_'+'y','max_scale_'+'z','min_r','min_g','min_b','max_r','max_g','max_b','min_motion'+'_x','min_motion'+'_y','min_motion'+'_z','max_motion'+'_x','max_motion'+'_y','max_motion'+'_z','min_time_s'+'cale','max_time_s'+'cale','min_time','max_time'],_0x54a639=['packed_pos'+'ition','packed_rot'+'ation','packed_sca'+'le','packed_col'+'or','packed_mot'+'ion','packed_tim'+'e'],_0x514ee6=new Array(-0x23d9+-0x1281+0x3687)['fill']('')['map']((_0x9d70d2,_0x51ae9e)=>'f_rest_'+_0x51ae9e),_0x28ba58=()=>_0x2712fb[0x3*-0x2c5+0x239+0x616]['name']==='chunk'&&_0x2712fb[0x394*-0x1+0x193a+-0x15a6]['properties']['every']((_0x69aa3f,_0x3014d1)=>_0x69aa3f['name']===_0x2677c4[_0x3014d1]&&_0x69aa3f['type']==='float')&&_0x2712fb[0x47a*-0x2+0xd7d*0x1+0x244*-0x2]['name']==='vertex'&&_0x2712fb[0x15d*-0x3+0x94e+-0x536]['properties']['every']((_0x232430,_0x3b7ba1)=>_0x232430['name']===_0x54a639[_0x3b7ba1]&&_0x232430['type']==='uint'),_0x4ecda8=()=>_0x2712fb[0x124b+0x1*-0x24df+0x1296]['name']==='sh'&&[-0x1b13+-0x1e32+0x1*0x394e,-0x214*-0x7+0x491*0x3+-0x1c27,0xc81+-0xb*0x28c+0xfb0*0x1]['indexOf'](_0x2712fb[0x7c*0x2+0xa3*0x27+-0x1f*0xd5]['properties']['length'])!==-(0x17a2+0x19b3+-0x3154)&&_0x2712fb[0x11ef+-0x275+-0xf78]['properties']['every']((_0x11d55c,_0x5d982b)=>_0x11d55c['name']===_0x514ee6[_0x5d982b]&&_0x11d55c['type']==='uchar');return _0x2712fb['length']===0x5*0x518+-0x247b+0xb05*0x1&&_0x28ba58()||_0x2712fb['length']===-0x1a1c+0x10b+0xa*0x282&&_0x28ba58()&&_0x4ecda8();},_0x303bfc=_0x201ad5=>_0x201ad5['length']===0xe4d+0x1*-0xf69+0x5*0x39&&_0x201ad5[0x128a*-0x2+-0x1386+0x7e*0x73]['name']==='vertex'&&_0x201ad5[-0x92d+-0x23c6+0x2cf3]['properties']['every'](_0x151c29=>_0x151c29['type']==='float'),_0x3c09bf=async(_0x372b2d,_0xf41339,_0x164589)=>{const _0x22ad31=new _0x28c90e();_0x22ad31['comments']=_0x164589;const _0x558e5f=_0xf41339[-0xbc7+0x1af*-0x17+0x3280]['count'],_0x1bd596=_0xf41339[0x1120+-0x7*-0x3b9+-0x2b2f]['properties']['length'],_0x16dff2=_0xf41339[-0xa*-0x1cd+-0x517*-0x1+-0x1718]['count'],_0x489282=_0xf41339[0x1*0x201f+-0x3*-0x38f+0x88f*-0x5]['properties']['some'](_0x1a3756=>_0x1a3756['name']==='packed_tim'+'e'),_0x3923e6=(_0x3d5c12=>{const _0x46a28d=Math['ceil'](Math['sqrt'](_0x3d5c12)),_0x1e87b9=Math['ceil'](_0x3d5c12/_0x46a28d);return _0x46a28d*_0x1e87b9;})(_0x16dff2);_0x22ad31['numSplats']=_0x16dff2,_0x22ad31['is4D']=_0x489282,_0x22ad31['chunkData']=new Float32Array(_0x558e5f*_0x1bd596),_0x22ad31['vertexData']=new Uint32Array(_0x3923e6*(-0x1*0x1e7+0x24b*-0xe+0x2207));const _0x59f55c=async(_0x5995c4,_0x1d3d73)=>{const _0x444db3=new Uint8Array(_0x5995c4);let _0x5e48c9=-0x657*-0x3+0x8be+-0x1bc3;for(;_0x5e48c9<_0x1d3d73;){for(;_0x372b2d['remaining']===0x2*-0x4f9+0x22*-0x2+0x2*0x51b;)await _0x372b2d['read']();const _0x5d13d4=Math['min'](_0x1d3d73-_0x5e48c9,_0x372b2d['remaining']),_0x205a3c=_0x372b2d['data'];for(let _0x5aae57=0x1407+0x26b6+-0x1*0x3abd;_0x5aae57<_0x5d13d4;++_0x5aae57)_0x444db3[_0x5e48c9++]=_0x205a3c[_0x372b2d['head']++];}};if(await _0x59f55c(_0x22ad31['chunkData']['buffer'],_0x558e5f*_0x1bd596*(-0x1827+-0x1156+-0x1*-0x2981)),await _0x59f55c(_0x22ad31['vertexData']['buffer'],_0x16dff2*(-0x1*-0x23e5+-0x8b3+0x5e*-0x4a)*(-0x6*0xbc+0x120c+-0xda0)),_0xf41339['length']===0x16eb*0x1+0x1c8c+0x2*-0x19ba){const _0x32b133=_0x3923e6*(-0x1*-0x1718+-0x8*0x4ba+0xec8),_0x4db95a=new Uint8Array(_0x32b133),_0xda3072=new Uint8Array(_0x32b133),_0x344fc8=new Uint8Array(_0x32b133),_0x23f862=-0x162f*-0x1+-0xca*-0x14+-0x21f7,_0x28c924=_0xf41339[-0x1e56*-0x1+0xa3f+-0x2893*0x1]['properties']['length']/(0x1f19*0x1+0x106+-0x6*0x55a),_0x5a0f6b=new Uint8Array(_0x23f862*_0x28c924*(-0x755*0x3+0x6c0+0x2*0x7a1));for(let _0xe09ad1=0x3c8+-0xc6b+0x8a3;_0xe09ad1<_0x22ad31['numSplats'];_0xe09ad1+=_0x23f862){const _0x5534b4=Math['min'](_0x23f862,_0x22ad31['numSplats']-_0xe09ad1);await _0x59f55c(_0x5a0f6b['buffer'],_0x5534b4*_0x28c924*(0x1*-0xf1+-0x9a*0x10+0xa94));for(let _0x16a40c=-0x7cf*-0x2+-0x1*0x26a9+-0x15b*-0x11;_0x16a40c<_0x5534b4;++_0x16a40c)for(let _0x2c492f=-0x99*0x30+-0x6b*0x45+0x3987*0x1;_0x2c492f<0x23b5+-0x4aa*0x3+-0x15a8;++_0x2c492f){const _0x158938=(_0xe09ad1+_0x16a40c)*(0x106a+-0x571*0x7+0x69*0x35)+_0x2c492f;_0x2c492f<_0x28c924?(_0x4db95a[_0x158938]=_0x5a0f6b[(_0x16a40c*(-0x199*0x7+0x2*-0x31+0x3*0x3dc)+(-0x196*-0x13+0x92b*0x2+-0x3078))*_0x28c924+_0x2c492f],_0xda3072[_0x158938]=_0x5a0f6b[(_0x16a40c*(-0x3*-0x455+-0x1*0x2543+-0x37*-0x71)+(-0xdf*-0xb+0xdd2+0xa*-0x257))*_0x28c924+_0x2c492f],_0x344fc8[_0x158938]=_0x5a0f6b[(_0x16a40c*(-0x21*-0x3b+0x15f5+-0x1d8d)+(-0x1*0xc9d+-0x24d1+0xe*0x388))*_0x28c924+_0x2c492f]):(_0x4db95a[_0x158938]=-0x7b+-0x25e4+-0x3e3*-0xa,_0xda3072[_0x158938]=-0xf92*0x2+-0x259d*0x1+0x4540,_0x344fc8[_0x158938]=0x3*-0x63a+0xcdb+0x652);}}_0x22ad31['shData0']=_0x4db95a,_0x22ad31['shData1']=_0xda3072,_0x22ad31['shData2']=_0x344fc8,_0x22ad31['shBands']={0x3:0x1,0x8:0x2,0xf:0x3}[_0x28c924];}else _0x22ad31['shBands']=-0xb5f*-0x3+-0x2c*-0x7f+-0x37f1*0x1;return _0x22ad31;},_0x14115d=async(_0x276d81,_0x523bce,_0x3cdc1b)=>{const _0x533be3=_0x523bce[-0x227d+0x101b+-0x16a*-0xd],_0x534288=_0x533be3['properties'],_0x300937=_0x534288['length'],_0x57b8e8=_0x534288['map'](_0x6881ce=>_0x6881ce['storage']),_0x4a9b9=_0x534288['reduce']((_0x58785c,_0x3a0213)=>_0x58785c+_0x3a0213['byteSize'],-0x1fa0+-0x1de+0x217e);let _0x1d2d2c=-0x25dd+0x131c+0x12c1*0x1,_0x517c4a;const _0x40bb16=()=>{const _0x449f7e=_0x276d81['data']['buffer'];(_0x517c4a==null?void(0x74+0x52d+-0x5a1*0x1):_0x517c4a['buffer'])!==_0x449f7e&&(_0x517c4a=new Float32Array(_0x449f7e,0x1*-0x1d97+-0xd06*-0x1+-0x1091*-0x1,_0x449f7e['byteLength']/(-0x45*0x2d+0x1*-0xdcd+0x453*0x6)));};for(_0x40bb16();_0x1d2d2c<_0x533be3['count'];){for(;_0x276d81['remaining']<_0x4a9b9;)await _0x276d81['read'](),_0x40bb16();const _0x4244bb=Math['min'](_0x533be3['count']-_0x1d2d2c,Math['floor'](_0x276d81['remaining']/_0x4a9b9));for(let _0x38271d=-0x1532+-0x962+-0x1e94*-0x1;_0x38271d<_0x300937;++_0x38271d){const _0x5b83dc=_0x57b8e8[_0x38271d];for(let _0x276f2b=0x335+0x16a3+-0x676*0x4;_0x276f2b<_0x4244bb;++_0x276f2b)_0x5b83dc[_0x276f2b+_0x1d2d2c]=_0x517c4a[_0x276f2b*_0x300937+_0x38271d];}_0x1d2d2c+=_0x4244bb,_0x276d81['head']+=_0x4244bb*_0x4a9b9;}return new _0x4d27a4(_0x523bce,_0x3cdc1b);},_0x4a0897=async(_0x22caaa,_0x5205ad,_0x2b6f6e)=>{for(let _0x241050=-0xeed+0x32b*0x1+0xbc2;_0x241050<_0x5205ad['length'];++_0x241050){const _0x144148=_0x5205ad[_0x241050],_0x21c1ce=_0x144148['properties']['reduce']((_0x5c9fba,_0x852de2)=>_0x5c9fba+_0x852de2['byteSize'],-0x9*0x3c7+-0x243*-0x1+0x1fbc),_0x5a47ff=_0x144148['properties']['map'](_0x586b98=>{if(_0x586b98['storage'])switch(_0x586b98['type']){case'char':return(_0xbfed26,_0x5b8a09)=>{_0x586b98['storage'][_0x5b8a09]=_0xbfed26['getInt8']();};case'uchar':return(_0x5a89a2,_0x408a0e)=>{_0x586b98['storage'][_0x408a0e]=_0x5a89a2['getUint8']();};case'short':return(_0x4950d7,_0x54320b)=>{_0x586b98['storage'][_0x54320b]=_0x4950d7['getInt16']();};case'ushort':return(_0x1f427a,_0x272a97)=>{_0x586b98['storage'][_0x272a97]=_0x1f427a['getUint16']();};case'int':return(_0x24ffab,_0x84c49d)=>{_0x586b98['storage'][_0x84c49d]=_0x24ffab['getInt32']();};case'uint':return(_0x472df2,_0x4d5218)=>{_0x586b98['storage'][_0x4d5218]=_0x472df2['getUint32']();};case'float':return(_0x4ca107,_0x451230)=>{_0x586b98['storage'][_0x451230]=_0x4ca107['getFloat32']();};case'double':return(_0x4efbb2,_0x508e50)=>{_0x586b98['storage'][_0x508e50]=_0x4efbb2['getFloat64']();};default:throw new Error('Unsupporte'+'d\x20property'+'\x20data\x20type'+'\x20\x27'+_0x586b98['type']+('\x27\x20in\x20ply\x20h'+'eader'));}else return _0x4966cf=>{_0x4966cf['head']+=_0x586b98['byteSize'];};});let _0x4dd671=-0x26d3+-0x6f5+0x2dc8;for(;_0x4dd671<_0x144148['count'];){for(;_0x22caaa['remaining']<_0x21c1ce;)await _0x22caaa['read']();const _0x3e057c=Math['min'](_0x144148['count']-_0x4dd671,Math['floor'](_0x22caaa['remaining']/_0x21c1ce));for(let _0x336eaf=-0xd*0x16a+0x3*-0x556+0x8e*0x3e;_0x336eaf<_0x3e057c;++_0x336eaf){for(let _0x341a80=-0x7b7+-0xa9*0x29+0x22c8;_0x341a80<_0x144148['properties']['length'];++_0x341a80)_0x5a47ff[_0x341a80](_0x22caaa,_0x4dd671);_0x4dd671++;}}}return new _0x4d27a4(_0x5205ad,_0x2b6f6e);},_0x3aa70c=async(_0x25b336,_0x20f3e5=null)=>{const _0x6dcd48=(_0x44a183,_0x468564)=>{const _0x49230b=_0x44a183['length']-_0x468564['length'];let _0x3431c4,_0x3deeea;for(_0x3431c4=-0x2357+-0x853*0x1+-0x4da*-0x9;_0x3431c4<=_0x49230b;++_0x3431c4){for(_0x3deeea=-0x1*0x13d5+0x1321+0xb4;_0x3deeea<_0x468564['length']&&_0x44a183[_0x3431c4+_0x3deeea]===_0x468564[_0x3deeea];++_0x3deeea);if(_0x3deeea===_0x468564['length'])return _0x3431c4;}return-(0x1a9f+-0x128f*0x1+0x1*-0x80f);},_0x1e384d=(_0x16fd21,_0x9177df)=>{if(_0x16fd21['length']<_0x9177df['length'])return!(-0x18c7+0x132+0x1796*0x1);for(let _0x2e2a95=-0x1969+0x1ee3+-0x57a;_0x2e2a95<_0x9177df['length'];++_0x2e2a95)if(_0x16fd21[_0x2e2a95]!==_0x9177df[_0x2e2a95])return!(0xb1a+-0x1c7b+0x1162);return!(0x110b*0x1+0x1*-0x26f6+0x15eb);},_0x97e530=new _0x269285(_0x25b336,_0x20f3e5);let _0x19e017;for(;;){if(await _0x97e530['read'](),_0x97e530['tail']>=_0x1cddd6['length']&&!_0x1e384d(_0x97e530['data'],_0x1cddd6))throw new Error('Invalid\x20pl'+'y\x20header');if(_0x19e017=_0x6dcd48(_0x97e530['data'],_0x520ed5),_0x19e017!==-(0xc5a+-0x31*0x5c+0x1*0x543))break;}const _0x55889b=new TextDecoder('ascii')['decode'](_0x97e530['data']['subarray'](-0x5a9*-0x4+0x1*-0x211f+0x1*0xa7b,_0x19e017))['split']('\x0a'),{elements:_0x118a3d,format:_0x14a323,comments:_0x4fcd06}=_0x512024(_0x55889b);if(_0x14a323!=='binary_lit'+'tle_endian')throw new Error('Unsupporte'+'d\x20ply\x20form'+'at');return _0x97e530['head']=_0x19e017+_0x520ed5['length'],_0x97e530['compact'](),await((async()=>_0x4fe70b(_0x118a3d)?await _0x3c09bf(_0x97e530,_0x118a3d,_0x4fcd06):(_0x118a3d['forEach'](_0x3b5e07=>{_0x3b5e07['properties']['forEach'](_0x20c8a7=>{const _0x17f614=_0x2637f2['get'](_0x20c8a7['type']);if(_0x17f614){const _0x36cdc5=new _0x17f614(_0x3b5e07['count']);_0x20c8a7['storage']=_0x36cdc5;}});}),_0x303bfc(_0x118a3d)?await _0x14115d(_0x97e530,_0x118a3d,_0x4fcd06):await _0x4a0897(_0x97e530,_0x118a3d,_0x4fcd06)))());},_0x37ba1a=_0x19a970=>{const {numSplats:_0x5e0bea,chunkData:_0x438c62,chunkSize:_0x36df36,vertexData:_0x5ccc79,shData0:_0xa1d1d5,shData1:_0xd58cc5,shData2:_0x235256,shBands:_0x7fd68e,comments:_0x2aef92,is4D:_0xe2988f}=_0x19a970,_0x3cb2ac=['x','y','z','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','f_dc_0','f_dc_1','f_dc_2','opacity'];if(_0xe2988f&&_0x3cb2ac['push']('t','t_scale','motion_0','motion_1','motion_2'),_0x7fd68e>0xb8*0x3+0x1032*0x2+-0xb*0x324){const _0x275f96=[];for(let _0x1330c5=-0x94*0x2+0x22df+-0x21b7;_0x1330c5<-0x1*0x1162+-0x70c+0x189b;++_0x1330c5)_0x275f96['push']('f_rest_'+_0x1330c5);_0x3cb2ac['splice'](_0x3cb2ac['indexOf']('f_dc_0')+(0x2*-0x993+-0x1058+0x237f),-0x1602+-0x5af+0x1bb1,..._0x275f96);}const _0x1f77ba={};_0x3cb2ac['forEach'](_0x20b927=>{_0x1f77ba[_0x20b927]=new Float32Array(_0x5e0bea);});const _0x19d25d=new _0x4ecd2a(),_0x1a9f13=new _0xab379d(),_0x1533da=new _0x4ecd2a(),_0x526eb3=new _0x1661a4(),_0xa8b4=new _0x4ecd2a(),_0x35baf2=new _0x4ecd2a(),_0x532079=_0x7fd68e>-0x1*-0x19c+0x2f*0x61+-0x3*0x679?new Float32Array(-0x788+-0x15b*0xb+0x1e*0xc1):null,_0x548d39=new _0x397212(_0x438c62,_0x36df36,_0x5ccc79,_0xa1d1d5,_0xd58cc5,_0x235256,_0x7fd68e,_0x19d25d,_0x1a9f13,_0x1533da,_0x526eb3,_0xa8b4,_0x35baf2,_0x532079);for(let _0x95636e=0xa53+-0x4*0x2e9+0x151;_0x95636e<_0x5e0bea;++_0x95636e){_0x548d39['read'](_0x95636e),_0x1f77ba['x'][_0x95636e]=_0x19d25d['x'],_0x1f77ba['y'][_0x95636e]=_0x19d25d['y'],_0x1f77ba['z'][_0x95636e]=_0x19d25d['z'],_0x1f77ba['rot_1'][_0x95636e]=_0x1a9f13['x'],_0x1f77ba['rot_2'][_0x95636e]=_0x1a9f13['y'],_0x1f77ba['rot_3'][_0x95636e]=_0x1a9f13['z'],_0x1f77ba['rot_0'][_0x95636e]=_0x1a9f13['w'],_0x1f77ba['scale_0'][_0x95636e]=_0x1533da['x'],_0x1f77ba['scale_1'][_0x95636e]=_0x1533da['y'],_0x1f77ba['scale_2'][_0x95636e]=_0x1533da['z'],_0x1f77ba['motion_0'][_0x95636e]=_0xa8b4['x'],_0x1f77ba['motion_1'][_0x95636e]=_0xa8b4['y'],_0x1f77ba['motion_2'][_0x95636e]=_0xa8b4['z'],_0x1f77ba['t_scale'][_0x95636e]=_0x35baf2['x'],_0x1f77ba['t'][_0x95636e]=_0x35baf2['y'],_0x1f77ba['f_dc_0'][_0x95636e]=(_0x526eb3['x']-(-0x1d8b+0x1*-0x1433+0x31be+0.5))/_0x8f4ab2,_0x1f77ba['f_dc_1'][_0x95636e]=(_0x526eb3['y']-(0x9fe+-0xf65+0x3*0x1cd+0.5))/_0x8f4ab2,_0x1f77ba['f_dc_2'][_0x95636e]=(_0x526eb3['z']-(-0x1*-0x129e+0x4*0x65b+-0x2c0a+0.5))/_0x8f4ab2;const _0x459700=_0x526eb3['w']<=0x1e5e+0x692+0x2*-0x1278?-(-0x3*0xbff+0x455*0x1+-0x1fd0*-0x1):_0x526eb3['w']>=-0x8e1*0x1+0x1dc5+-0x14e3?-0x5*0x5a1+-0x3*-0x441+0xf8a:-Math['log']((-0xe05+0x1bd1+-0xdcb)/_0x526eb3['w']-(0x620+0x13ae*0x1+-0x19cd));if(_0x1f77ba['opacity'][_0x95636e]=(-0x65d*0x1+-0x5a0+0xbfe)/(0x16*-0xfb+-0x6b*-0x56+-0xe5f+Math['exp'](-_0x459700)),_0x532079){for(let _0x518493=-0x797*-0x1+-0xe6*0x19+0xedf;_0x518493<-0x1*0x563+-0x131f+0x59*0x47;++_0x518493)_0x1f77ba['f_rest_'+_0x518493][_0x95636e]=_0x532079[_0x518493];}}const _0x192e18=[{'count':_0x5e0bea,'name':'vertex','properties':_0x3cb2ac['map'](_0x341fe7=>({'byteSize':0x4,'name':_0x341fe7,'type':'float','storage':_0x1f77ba[_0x341fe7]}))}];return new _0x4d27a4(_0x192e18,_0x2aef92);};}class bN extends me{constructor(_0x117d8c){super(),h(this,'worker'),h(this,'loadUrlLis'+'t'),(this['loadUrlLis'+'t']=_0x117d8c,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+EN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','loadUrlList':this['loadUrlLis'+'t']});}['loadPly'](_0x345149,_0x70e2c1,_0x4bf782=(_0x55ae6b,_0x1db70a)=>{},_0x5d8b63=(_0x5d476b,_0xfb87d6,_0x1792a7)=>{},_0x541748=(_0x5843f2,_0x37cc92)=>{}){var _0x273542;return(_0x273542=this['worker'])==null||_0x273542['postMessag'+'e']({'type':'loadPly','url':_0x345149,'decompress':_0x70e2c1}),new Promise((_0x262215,_0x451351)=>{if(!this['worker']){_0x451351(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x3e13c7=>{if(!this['worker'])return;const {data:_0x2c545a}=_0x3e13c7;if(_0x345149===_0x2c545a['url'])switch(_0x2c545a['type']){case'totalLengt'+'h':_0x4bf782==null||_0x4bf782(_0x2c545a['totalLengt'+'h'],_0x2c545a['url']);break;case'progress':_0x5d8b63==null||_0x5d8b63(_0x2c545a['bytes'],_0x2c545a['totalLengt'+'h'],_0x2c545a['url']);break;case'splatData':_0x262215(_0x2c545a['data']);break;case'error':_0x541748==null||_0x541748(_0x2c545a['data'],_0x2c545a['url']);break;}};});}['destroy'](){this['loadUrl']='',this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(0x7*0x1a+-0x14ff+0x1449));}}class AN{constructor(_0x1f8962,_0xa8ea34){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'readWorker'),(console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','Register\x20P'+'lyParser.c'+'onstructor'),this['app']=_0x1f8962,this['maxRetries']=_0xa8ea34,this['urlList']=[],this['gsplatReso'+'urce']=null,this['readWorker']=null,this['totalRecei'+'ved']=0x223+0x29*-0x53+-0x38*-0x33);}async['load'](_0x98f01,_0x1e863f,_0x4666f0){var _0x6ffbb6,_0x515c57,_0x15ecb8;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','PlyParser.'+'load'),this['urlList']=[],_0x98f01['load']['includes'](',')?this['urlList']=_0x98f01['load']['split'](','):this['urlList']['push'](_0x98f01['load']);const _0x48cef6=_0x4666f0['data']['createTime']!==((_0x515c57=(_0x6ffbb6=this['onlyOneAss'+'et'])==null?void(-0x1414+-0xfa+0x1ea*0xb):_0x6ffbb6['data'])==null?void(0x1c65+0x264a+-0x1*0x42af):_0x515c57['createTime']);(!this['readWorker']||_0x48cef6)&&((_0x15ecb8=this['readWorker'])==null||_0x15ecb8['destroy'](),this['readWorker']=new bN(this['urlList']));const _0x359c3e=_0x4666f0['data']['loadIndex']>=0x69f*-0x3+0x15bb+-0x1de?_0x4666f0['data']['loadIndex']:0x6d9*0x3+-0x1*-0xc89+-0x2114,_0x32c5be=_0x4666f0['data']['loadMode']==='all'?this['urlList']['length']-_0x359c3e:_0x359c3e+(-0x1db1+-0xc2*0x29+-0x3cc4*-0x1),_0x48500a=_0x4666f0['data']['timeOption'],_0x41d1b1=_0x4666f0['data']['events'];for(let _0x5aaba4=_0x359c3e;_0x5aaba4<_0x32c5be;_0x5aaba4++)await this['loadGsplat'+'Data'](this['urlList'],_0x1e863f,_0x4666f0,_0x5aaba4,_0x48500a,_0x41d1b1,_0x32c5be);_0x41d1b1['fire']('loadAllAss'+'etsDone');}async['loadGsplat'+'Data'](_0x4c5a77,_0x4077df,_0x328a0f,_0x504572,_0xb8027d,_0x2906e8,_0x437ed2){var _0x186a91,_0x3693ca,_0xb37f0f;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','loadGsplat'+'Data',_0x4c5a77[_0x504572]['trim'](),_0x504572);const _0x1d3073=_0xb8027d[(0x114a+-0x1b4b*-0x1+-0x2c93)*_0x504572]+_0xb8027d[(0xad3+-0xd27+-0x1a*-0x17)*_0x504572+(0x1*0x1933+0x1*0x162f+-0x2f61)],_0x1ff1ec=_0x4c5a77[_0x504572]['trim']();globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('loadTime','=========='+'=========='+'=========='+'=========='+'=========='+'====='),console['log']('loadTime','start\x20load'+'\x20ply\x20data',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(0x24ef+0x7ef*-0x3+0x666))['toFixed'](-0x1d*0x6d+0x59*0x50+-0xf75));try{const _0x172298=await((_0x186a91=this['readWorker'])==null?void(0x18b7+-0x45*0x21+-0xfd2):_0x186a91['loadPly'](_0x1ff1ec,_0x328a0f['data']['decompress'],()=>{this['totalRecei'+'ved']=-0x1e90+-0x2247+0xb*0x5e5;},(_0x1a4e88,_0xcb5650)=>{this['totalRecei'+'ved']+=_0x1a4e88,_0x328a0f&&_0x2906e8['fire']('progress',_0xcb5650*_0x504572/_0x437ed2+this['totalRecei'+'ved']/_0x437ed2,_0xcb5650);},(_0xc7ba5b,_0x1f4fc3)=>{debugger;console['warn']('ERROE\x20Load'+'\x20Ply',_0x1f4fc3,_0xc7ba5b);}));let _0x1690e8;console['log']('loadTime','load\x20ply\x20d'+'ata\x20done',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(-0x1*0x1b7f+0x1b*0xbf+-0x1f*-0xde))['toFixed'](-0x1d8f+-0x1381+0x3112)),_0x172298['isCompress'+'ed']?(_0x1690e8=new wN(),_0x1690e8['comments']=_0x172298['comments'],_0x1690e8['numSplats']=_0x172298['numSplats'],_0x1690e8['is4D']=_0x172298['is4D'],_0x1690e8['chunkData']=_0x172298['chunkData'],_0x1690e8['vertexData']=_0x172298['vertexData'],_0x1690e8['shData0']=_0x172298['shData0'],_0x1690e8['shData1']=_0x172298['shData1'],_0x1690e8['shData2']=_0x172298['shData2'],_0x1690e8['shBands']=_0x172298['shBands']):_0x1690e8=new zn(_0x172298['elements'],_0x172298['comments']),_0x328a0f['fire']('load:data',_0x1690e8),_0x1690e8['isCompress'+'ed']||_0x328a0f['data']['reorder'];const _0xe44c6c=_0x328a0f['data']['createTime']!==((_0xb37f0f=(_0x3693ca=this['onlyOneAss'+'et'])==null?void(0x22f2+0x7*-0x1a3+-0x177d*0x1):_0x3693ca['data'])==null?void(-0x22a2+-0x1f19+-0x41bb*-0x1):_0xb37f0f['createTime']);this['gsplatReso'+'urce']&&!_0xe44c6c?this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x1690e8['isCompress'+'ed']?await _0x1690e8['decompress']():_0x1690e8,_0xb8027d,_0x1d3073,_0x328a0f,_0x2906e8):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),this['gsplatReso'+'urce']=new GA(this['app']['graphicsDe'+'vice'],_0x1690e8['isCompress'+'ed']?await _0x1690e8['decompress']():_0x1690e8),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0xb8027d,this['onlyOneAss'+'et']=_0x328a0f),_0x4077df(null,this['gsplatReso'+'urce']);}catch(_0x4b45a7){_0x4077df(_0x4b45a7,null);}}['open'](_0x49135c,_0x8af68f){return _0x8af68f;}}async function CN(){const _0x1c7c58='super4d-ca'+'che-v1',_0x335d14={'maxAge':0x202fbf000,'maxSize':0x280000000},_0x23cdca=0x12fb*0x1+0x13d2+-0x26cd+0.28209479177387814;class _0x1956eb{constructor(_0x253d69={}){this['options']={..._0x335d14,..._0x253d69},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=0x1*-0x1042+-0x181c*-0x1+-0x7da*0x1,this['initialize'+'d']=!(-0xd3e+0xa+0xd35);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x1c7c58);const _0x526aaf=await this['cache']['keys'](),_0x15a009=[];for(const _0x2a87d1 of _0x526aaf){const _0x1be6ff=_0x2a87d1['url'],_0x2e5e23=await this['cache']['match'](_0x1be6ff);if(_0x2e5e23){const _0x3d1791=(await _0x2e5e23['blob']())['size'],_0x3bb82f=_0x2e5e23['headers']['get']('x-cache-ti'+'me');_0x3bb82f&&_0x15a009['push']({'url':_0x1be6ff,'size':_0x3d1791,'cacheTime':parseInt(_0x3bb82f)});}}_0x15a009['sort']((_0x1793c0,_0x178f6)=>_0x1793c0['cacheTime']-_0x178f6['cacheTime']);for(const _0x2e4e05 of _0x15a009)this['cacheSizes']['set'](_0x2e4e05['url'],_0x2e4e05['size']),this['currentSiz'+'e']+=_0x2e4e05['size'],this['lruList']['push'](_0x2e4e05['url']);}catch(_0x1dcc49){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x1dcc49);}this['initialize'+'d']=!(0x30e+0x2*0x9c4+-0x33a*0x7);}}async['get'](_0x5ae65b){if(await this['init'](),!this['cache'])return null;try{const _0x4320ca=await this['cache']['match'](_0x5ae65b);if(!_0x4320ca)return null;const _0x3781d3=_0x4320ca['headers']['get']('x-cache-ti'+'me');return _0x3781d3&&Date['now']()-parseInt(_0x3781d3)>this['options']['maxAge']?(await this['delete'](_0x5ae65b),null):(this['updateLRU'](_0x5ae65b),_0x4320ca);}catch{return null;}}async['set'](_0x2f776b,_0x5f5cc4){if(!(!this['cache']||_0x2f776b['startsWith']('blob:')))try{const _0xcceef1=_0x5f5cc4['clone'](),_0x4cb3eb=await _0xcceef1['blob'](),_0x3055f6=_0x4cb3eb['size'];this['currentSiz'+'e']+_0x3055f6>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x3055f6);const _0x2c912b=new Headers(_0xcceef1['headers']);_0x2c912b['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x475092=new Response(_0x4cb3eb,{'status':_0xcceef1['status'],'statusText':_0xcceef1['statusText'],'headers':_0x2c912b});await this['cache']['put'](_0x2f776b,_0x475092),this['cacheSizes']['set'](_0x2f776b,_0x3055f6),this['currentSiz'+'e']+=_0x3055f6,this['updateLRU'](_0x2f776b);}catch(_0x13ecb6){console['error']('Cache\x20set\x20'+'error:',_0x13ecb6);}}['updateLRU'](_0xe78f06){const _0x16dec2=this['lruList']['indexOf'](_0xe78f06);_0x16dec2>-(-0x1c9+-0x7f7*-0x2+-0xe24)&&this['lruList']['splice'](_0x16dec2,-0x21fd+-0x35*0xf+0x2519),this['lruList']['push'](_0xe78f06);}async['cleanupSpa'+'ce'](_0x2cf11c){const _0x59bf68=this['options']['maxSize']*(-0x2351+0x1*0xc14+0x173d+0.9);if(!(this['currentSiz'+'e']<=_0x59bf68))for(;this['lruList']['length']>0x292+0x1214+-0x6*0x371&&this['currentSiz'+'e']>_0x59bf68;){const _0x6dc65a=this['lruList']['shift']();_0x6dc65a&&await this['delete'](_0x6dc65a);}}async['delete'](_0x4adf24){if(this['cache'])try{await this['cache']['delete'](_0x4adf24);const _0x574d91=this['cacheSizes']['get'](_0x4adf24)||-0x1c2+0x14d2+0x988*-0x2;this['currentSiz'+'e']-=_0x574d91,this['cacheSizes']['delete'](_0x4adf24);const _0xaa7f2a=this['lruList']['indexOf'](_0x4adf24);_0xaa7f2a>-(0x1a03*-0x1+-0x2400+0x3e04)&&this['lruList']['splice'](_0xaa7f2a,-0x14f5*0x1+0x97d+0xb79);}catch(_0x2eeae5){console['error']('Cache\x20dele'+'te\x20error:',_0x2eeae5);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0xddd10=>Promise['all'](_0xddd10['map'](_0x46c2a4=>{var _0x11e507;return(_0x11e507=this['cache'])==null?void(0x25e+0x247a+-0x26d8):_0x11e507['delete'](_0x46c2a4);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x4*0x349+-0x2313+0x15ef;}catch(_0x220ef2){console['error']('Cache\x20clea'+'r\x20error:',_0x220ef2);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x1384+-0xf7b*-0x1+0x22ff*-0x1;}}class _0x4d5d7e{constructor(_0x2bf113=[],_0x189fc7={}){this['cacheManag'+'er']=new _0x1956eb(_0x189fc7['cache']),this['retryCount']=_0x189fc7['retryCount']||-0x4e4+0xdea*-0x2+-0x18f*-0x15,this['retryDelay']=_0x189fc7['retryDelay']||-0x2609+0x799+0x2064,this['maxConcurr'+'ency']=_0x189fc7['maxConcurr'+'ency']||-0x1b94+0x17*0x51+0x1453,this['downloadQu'+'eue']=_0x2bf113,this['isProcessi'+'ngDownload'+'Queue']=!(-0x12c8*-0x2+0x179f*0x1+0x3d2e*-0x1),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(0x167*0x2+-0xae5*-0x2+-0x1898);this['downloadQu'+'eue']['length']>-0x2a*-0x4d+0x2595+-0x3237;)try{const _0x395e14=this['downloadQu'+'eue']['splice'](-0xa4a+-0x25*0x6+0xb28,this['maxConcurr'+'ency'])['map'](_0x3c5ddb=>{if(!this['pendingRes'+'ponses']['has'](_0x3c5ddb)){const _0x1bd18a=this['download'](_0x3c5ddb);return this['pendingRes'+'ponses']['set'](_0x3c5ddb,_0x1bd18a),_0x1bd18a['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x3c5ddb);});}return Promise['resolve']();});await Promise['all'](_0x395e14);}catch(_0x5b2fa3){console['error']('Download\x20e'+'rror:',_0x5b2fa3);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(0x1e8b+-0x5*0x590+-0x1*0x2ba);}}}async['fetch'](_0x42cc65,_0x268d7b={}){if(this['pendingRes'+'ponses']['has'](_0x42cc65))return this['pendingRes'+'ponses']['get'](_0x42cc65);const {forceRefresh:_0x412522=!(-0x160a+0x1e07+-0x124*0x7),..._0x59e627}=_0x268d7b;this['pendingRes'+'ponses']['set'](_0x42cc65,this['download'](_0x42cc65,_0x59e627));const _0x3ddc62=await this['pendingRes'+'ponses']['get'](_0x42cc65);return this['pendingRes'+'ponses']['delete'](_0x42cc65),_0x3ddc62;}async['download'](_0x92992,_0x451ceb={}){var _0xfdfca7;await((_0xfdfca7=this['cacheManag'+'er'])==null?void(0x104+-0x1381+-0x1*-0x127d):_0xfdfca7['init']());const {forceRefresh:_0x3358f1=!(0x7cd*-0x1+0x21c4+-0x19f6),..._0x55e8f8}=_0x451ceb;_0x3358f1&&await this['cacheManag'+'er']['delete'](_0x92992);const _0x244c04=await this['cacheManag'+'er']['get'](_0x92992);if(_0x244c04)return _0x244c04;let _0x41b65d;for(let _0xc4a946=-0x27*0xc8+0x20b*0x8+0x1*0xe20;_0xc4a946<this['retryCount'];_0xc4a946++)try{const _0x25b3da=await fetch(_0x92992,_0x55e8f8);if(!_0x25b3da['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x25b3da['status']);return await this['cacheManag'+'er']['set'](_0x92992,_0x25b3da),_0x25b3da;}catch(_0x5a3dfc){console['error']('Download\x20e'+'rror:',_0x5a3dfc),_0x41b65d=_0x5a3dfc,_0xc4a946<this['retryCount']-(0x1*-0xef9+0x7ad+0x26f*0x3)&&await new Promise(_0x5001e4=>setTimeout(_0x5001e4,this['retryDelay']*(_0xc4a946+(-0x1fea+0x1edb*-0x1+0x3ec6))));}throw _0x41b65d;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){var _0x29ebaa;(_0x29ebaa=this['cacheManag'+'er'])==null||_0x29ebaa['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(-0x169a+0x25c5+-0xf2a),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x491bf7{constructor(_0x3c6587,_0x4d3e8e=[]){this['elements']=_0x3c6587,this['comments']=_0x4d3e8e,this['isCompress'+'ed']=!(0x887*-0x2+-0xa5e+0x7*0x3eb);}}class _0x34ccf0{constructor(_0x444b8c){this['url']=_0x444b8c;}async['readFragme'+'nt'](){globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x4d5d7e(globalThis['downloadQu'+'eueUrlList']));const _0x30af69=await globalThis['fetchWorke'+'r']['fetch'](this['url']);if(!_0x30af69['ok'])throw new Error('Failed\x20to\x20'+'fetch\x20'+this['url']+':\x20'+_0x30af69['statusText']);const _0x281d28=await _0x30af69['arrayBuffe'+'r'](),_0x42252b=new Uint8Array(_0x281d28);let _0x4e82a4=0x1*-0x16d5+-0xbbf*0x3+-0x1d09*-0x2,{size:_0x1d9106,type:_0x537055}=this['_readBoxHe'+'ader'](_0x42252b,_0x4e82a4);if(_0x537055!=='moof')throw new Error('Not\x20a\x20moof');_0x4e82a4+=0x1*-0x1975+-0x2467*-0x1+-0xaea;const _0x22c8db=_0x4e82a4+_0x1d9106-(-0x60*-0x2b+0x155c+-0x2574);let _0x1a7aaf=null;for(;_0x4e82a4<_0x22c8db;){const {size:_0x484c51,type:_0x353ed8}=this['_readBoxHe'+'ader'](_0x42252b,_0x4e82a4);_0x4e82a4+=0x269a+0x588+-0x2c1a;const _0x14307b=_0x42252b['slice'](_0x4e82a4,_0x4e82a4+_0x484c51-(-0x23e4+0x1*0x1cc9+0x723));_0x4e82a4+=_0x484c51-(0x5b*-0x65+0x4f0+0x1eff),_0x353ed8==='emsg'&&(_0x1a7aaf=this['_parseEmsg'](_0x14307b));}if(!_0x1a7aaf)throw new Error('Incomplete'+'\x20moof');const {size:_0x41232f,type:_0x5f44bf}=this['_readBoxHe'+'ader'](_0x42252b,_0x4e82a4);if(_0x5f44bf!=='mdat')throw new Error('Expected\x20m'+'dat\x20box\x20af'+'ter\x20moof');_0x4e82a4+=0xb71+-0x20f*0x5+-0x11e;const _0x29765a=_0x42252b['slice'](_0x4e82a4,_0x4e82a4+(_0x41232f-(-0x1f3d+0x3*-0xc99+0x374*0x14)));return{'metadata':_0x1a7aaf,'segmentData':_0x29765a};}['_readBoxHe'+'ader'](_0x48e36b,_0x305fb0){if(_0x305fb0+(0x2535+-0x285+-0x22a8)>_0x48e36b['length'])throw new Error('EOF');const _0xacf19d=_0x48e36b[_0x305fb0]<<0x2f*-0x6d+-0x1f74+0x338f|_0x48e36b[_0x305fb0+(0x1*0x143a+0x1671+0x2b*-0xfe)]<<-0x3*0x1b4+-0x17b1+0x1cdd|_0x48e36b[_0x305fb0+(-0x1*0x887+0x10ad+-0x4*0x209)]<<0xf31+-0xd73+-0x1b6|_0x48e36b[_0x305fb0+(0xc*0x25b+-0x105b*0x1+-0xbe6)],_0x2f844b=String['fromCharCo'+'de'](_0x48e36b[_0x305fb0+(-0x2124+-0x1*-0x479+-0x1caf*-0x1)],_0x48e36b[_0x305fb0+(0x125e*-0x2+-0xd84+0x3245)],_0x48e36b[_0x305fb0+(-0x1af3+-0x14e1+-0xfa*-0x31)],_0x48e36b[_0x305fb0+(0x533*-0x5+0x211a+-0x714)]);return{'size':_0xacf19d,'type':_0x2f844b};}['_parseEmsg'](_0x48d88b){let _0x2f2f2c=-0x125c+-0xfbd+0x2219*0x1;_0x2f2f2c=_0x48d88b['indexOf'](0xe95+0xc58+-0x1aed,_0x2f2f2c)+(0x1f4+-0xafb*0x2+0x1403),_0x2f2f2c=_0x48d88b['indexOf'](-0x1*-0xbf+-0xc7*-0x1+0x1a*-0xf,_0x2f2f2c)+(-0x1d04+0x109b+-0x2*-0x635),_0x2f2f2c+=-0xd5*-0x25+-0xf94+-0xf25;const _0x450c03=_0x48d88b['slice'](_0x2f2f2c);return globalThis['CBOR']['decode'](_0x450c03);}}class _0x5982c8{constructor(_0x1ab6cb=0x2657+-0x1fdd+-0x67a,_0x31dbda=0x15c6+0x1*-0xa4d+-0xb79,_0x226870=-0x1*0x259d+0xc*-0x32d+0x5*0xf25,_0x2d4903=-0x1ed8+-0xd7*0x19+0x33d8){this['x']=_0x1ab6cb,this['y']=_0x31dbda,this['z']=_0x226870,this['w']=_0x2d4903;}['set'](_0x319bda,_0x51e303,_0x462732,_0x5e10c5){return this['x']=_0x319bda,this['y']=_0x51e303,this['z']=_0x462732,this['w']=_0x5e10c5,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x49aab3=this){let _0x43890a=_0x49aab3['length']();return _0x43890a===-0x1cbe+0x7f*-0x3+-0x1e3b*-0x1?(this['x']=this['y']=this['z']=0x4e*0x65+-0x9c1*-0x3+-0x3c09,this['w']=-0x1d*-0x48+0xe99+0x7*-0x340):(_0x43890a=(0x24b7+0x1*0xaba+-0x2f70)/_0x43890a,this['x']=_0x49aab3['x']*_0x43890a,this['y']=_0x49aab3['y']*_0x43890a,this['z']=_0x49aab3['z']*_0x43890a,this['w']=_0x49aab3['w']*_0x43890a),this;}['mulScalar'](_0x16dea6,_0xc36cb1=this){return this['x']=_0xc36cb1['x']*_0x16dea6,this['y']=_0xc36cb1['y']*_0x16dea6,this['z']=_0xc36cb1['z']*_0x16dea6,this['w']=_0xc36cb1['w']*_0x16dea6,this;}}self['onmessage']=async _0x2039ac=>{var _0x2aa902,_0xa14863;const {data:_0x3d6538}=_0x2039ac;switch(_0x3d6538['type']){case'initWorker':importScripts(_0x3d6538['cborXUrl']);break;case'destroyWor'+'ker':_0x38ba39();break;case'loadGsdMan'+'ifest':const {manifestUrl:_0x486c8a,loadRepresentation:_0x46f9e3}=_0x3d6538,_0xbbf4d0=await _0x5c5650(_0x486c8a,_0x46f9e3);globalThis['manifestUr'+'l']=_0x486c8a,globalThis['manifest']=_0xbbf4d0,globalThis['resentatio'+'n']=_0xbbf4d0['representa'+'tion'],globalThis['downloadQu'+'eueUrlList']=_0x4fe7a6(),globalThis['fetchWorke'+'r']=new _0x4d5d7e(globalThis['downloadQu'+'eueUrlList']),self['postMessag'+'e']({'type':'onloadMani'+'fest','data':_0xbbf4d0,'url':_0x486c8a,'representation':_0x46f9e3});break;case'loadGsdSeg'+'ments':try{const _0x3d10b9=_0x3ae35a(globalThis['manifest'],globalThis['resentatio'+'n']),_0x81c70=await _0xb4e05a(globalThis['manifest'],_0x3d10b9),_0x2762fe=(_0x2aa902=_0x81c70==null?void(0x14ea+0x1459+-0x2943):_0x81c70['elements'][-0x662+-0x101e+0x1680])==null?void(0x161c+0xc31+-0x224d):_0x2aa902['properties']['map'](_0x34f289=>_0x34f289['storage']['buffer']);self['postMessag'+'e']({'type':'loadGsdSeg'+'mentsDone','data':_0x81c70,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0x2762fe);}catch(_0x2adc48){console['error']('Error\x20load'+'ing\x20GSD:',_0x2adc48),self['postMessag'+'e']({'type':'error','data':_0x2adc48['message'],'url':globalThis['manifestUr'+'l']});}break;case'loadTimeli'+'neIndexSeg'+'ments':const {timelineIndexs:_0x32d9a0}=_0x3d6538;try{const _0x467776=_0x3ae35a(globalThis['manifest'],globalThis['resentatio'+'n']),_0x364833=await _0x451f5e(globalThis['manifest'],_0x467776,_0x32d9a0),_0x52c7a2=(_0xa14863=_0x364833==null?void(0x1ea4+0x1*0xd8d+-0x1*0x2c31):_0x364833['elements'][0x142b+-0x2a*-0x76+0xd2d*-0x3])==null?void(-0x21d9+0x1*0x12e8+0xef1):_0xa14863['properties']['map'](_0x155655=>_0x155655['storage']['buffer']);self['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'mentsDone','data':_0x364833,'timelineIndexs':_0x32d9a0,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0x52c7a2);}catch(_0x532457){console['error']('Error\x20load'+'ing\x20GSD:',_0x532457),self['postMessag'+'e']({'type':'error','data':_0x532457['message'],'url':globalThis['manifestUr'+'l']});}break;}};const _0x38ba39=()=>{var _0x5f4e19;globalThis['manifestUr'+'l']=null,globalThis['manifest']=null,globalThis['resentatio'+'n']=null,(_0x5f4e19=globalThis['fetchWorke'+'r'])==null||_0x5f4e19['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['downloadQu'+'eueUrlList']=[],globalThis['loadedSegm'+'ents']=[],globalThis['currentLoa'+'dSg']=null;},_0x4fe7a6=()=>{const _0x141687=new Set(),_0x4adc32=_0x3ae35a(globalThis['manifest'],globalThis['resentatio'+'n']),_0x1dad73=globalThis['manifest']['baseUrl'],_0x1ee9d9=_0x4adc32['segmentTem'+'plate'][0x4*-0xcd+-0x1c88+0x2a5*0xc];for(const _0xed6d86 of _0x1ee9d9['segmentTim'+'eline'])for(const _0x3eda71 of _0xed6d86['nl']){const _0x228816=''+_0x1dad73+_0x1ee9d9['media']['replace']('$SegGroupI'+'ndex$',String(_0xed6d86['sg']))['replace']('$NodeIndex'+'$',String(_0x3eda71));_0x141687['add'](_0x228816);}return Array['from'](_0x141687);},_0x5c5650=async(_0x102bf6,_0x56ab73)=>{const _0x18c6bf=await(await fetch(_0x102bf6))['text'](),_0x1dd060=JSON['parse'](_0x18c6bf);_0x1dd060['baseUrl']=_0x102bf6['replace'](/\/[^\/]*$/,'/');const {schemas:_0x1f0e51,gsiUrl:_0x3bc98b,repId:_0x305cd6}=await _0x2811b6(_0x1dd060,_0x56ab73);return _0x1dd060['schemas']=_0x1f0e51,_0x1dd060['gsiUrl']=_0x3bc98b,_0x1dd060['representa'+'tion']=_0x305cd6,_0x1dd060;},_0x2811b6=async(_0x1df60a,_0x47fa80)=>{let _0x459ef5=null,_0x49da35=null;for(const _0x68dcbd of _0x1df60a['adaptation'+'Sets'])if(_0x68dcbd['contentTyp'+'e']==='4dgs'){_0x49da35=_0x68dcbd;for(const _0x43bb66 of _0x68dcbd['representa'+'tions'])if(_0x43bb66['id']===_0x47fa80){_0x459ef5=_0x43bb66;break;}break;}_0x459ef5||(_0x459ef5=_0x49da35['representa'+'tions'][0x12e4+-0xd*-0x2b6+-0x3622],console['warn']('Representa'+'tion\x20\x27'+_0x47fa80+('\x27\x20not\x20foun'+'d,\x20use\x20the'+'\x20first\x20rep'+'resentatio'+'n\x20instead')));const _0xd9a18b=_0x459ef5['id'],_0x36c1fb=_0x1df60a['baseUrl']+_0xd9a18b+('/init.gsi.'+'json'),_0x23a011=await(await fetch(_0x36c1fb))['text'](),_0x2cfaa8=JSON['parse'](_0x23a011),_0x51391f={};return _0x51391f[_0xd9a18b]=_0x2cfaa8,{'schemas':_0x51391f,'gsiUrl':_0x36c1fb,'repId':_0xd9a18b};},_0x3ae35a=(_0x45eccf,_0x1d9668='high-quant'+'ized')=>{let _0xa08cf3=null;for(const _0x5be2a1 of _0x45eccf['adaptation'+'Sets'])if(_0x5be2a1['contentTyp'+'e']==='4dgs'){for(const _0x545ffa of _0x5be2a1['representa'+'tions'])if(_0x545ffa['id']===_0x1d9668){_0xa08cf3=_0x545ffa;break;}break;}if(!_0xa08cf3)throw new Error('Representa'+'tion\x20\x27'+_0x1d9668+('\x27\x20not\x20foun'+'d'));return _0xa08cf3;},_0xb4e05a=async(_0x224c65,_0x1a2169)=>{const _0x27689e=_0x1a2169['id'],_0x3fdf43=_0x224c65['schemas'][_0x27689e]['attributes'],_0x24b13f=_0x1a2169['segmentTem'+'plate'][0xa68+0x34d+-0xb*0x13f];globalThis['loadedSegm'+'ents']=[];const _0x946d58=[],_0x54718f=[];for(const _0x1ed66c of _0x24b13f['segmentTim'+'eline'])for(const _0x3376f4 of _0x1ed66c['nl']){if(globalThis['loadedSegm'+'ents']['includes'](_0x1ed66c['sg']+'_'+_0x3376f4))continue;globalThis['loadedSegm'+'ents']['push'](_0x1ed66c['sg']+'_'+_0x3376f4);const _0xfbf865=await _0x56cac7(_0x224c65,_0x1a2169,_0x3fdf43,_0x1ed66c['sg'],_0x3376f4);_0x54718f['push'](_0xfbf865['decoded']),_0x946d58['push'](_0xfbf865['metadata']);}return _0x52cc05(_0x54718f,_0x3fdf43,_0x224c65['comments']);},_0x451f5e=async(_0x49532b,_0x3ef476,_0x261f1a)=>{if(!_0x261f1a||_0x261f1a['length']===-0x1ef4+0x183f+0x65*0x11)return{'decoded':[],'metadata':[]};const _0xce1649=_0x3ef476['id'],_0x2ed44d=_0x49532b['schemas'][_0xce1649]['attributes'],_0x26083f=_0x3ef476['segmentTem'+'plate'][0x2*0x1af+0x6c2*-0x1+0x364];globalThis['loadedSegm'+'ents']||(globalThis['loadedSegm'+'ents']=[]);const _0x5a6be9=_0x26083f['segmentTim'+'eline'][_0x261f1a[-0x10*-0x83+0x98a+-0x11ba]];globalThis['currentLoa'+'dSg']!==_0x5a6be9['sg']&&(globalThis['loadedSegm'+'ents']=globalThis['loadedSegm'+'ents']['filter'](_0x57e6c2=>!_0x57e6c2['startsWith'](globalThis['currentLoa'+'dSg'])),globalThis['currentLoa'+'dSg']=_0x5a6be9['sg']);let _0x1aaaa2;const _0xf11c54=[];for(const _0x25db11 of _0x261f1a){_0x1aaaa2=_0x26083f['segmentTim'+'eline'][_0x25db11];for(const _0xa3796e of _0x1aaaa2['nl'])globalThis['loadedSegm'+'ents']['includes'](_0x1aaaa2['sg']+'_'+_0xa3796e)||(globalThis['loadedSegm'+'ents']['push'](_0x1aaaa2['sg']+'_'+_0xa3796e),_0xf11c54['push'](_0xa3796e));}const _0x2f2ff7=await _0x56cac7(_0x49532b,_0x3ef476,_0x2ed44d,_0x1aaaa2['sg'],_0xf11c54);_0x2f2ff7['metadata'];const _0x1f7042=_0x2f2ff7['decoded'];return _0x52cc05(_0x1f7042,_0x2ed44d,_0x49532b['comments']);},_0x56cac7=async(_0x5306e3,_0x10794c,_0x4a3013,_0x59e3f3,_0x3eba7b)=>{const _0x20d945=_0x5306e3['baseUrl'],_0x25cf13=_0x10794c['segmentTem'+'plate'][-0xa6b+-0x562*0x7+-0x3019*-0x1]['media'],_0x3b6184=_0x3eba7b['map'](_0x3bc02b=>''+_0x20d945+_0x25cf13['replace']('$SegGroupI'+'ndex$',String(_0x59e3f3))['replace']('$NodeIndex'+'$',String(_0x3bc02b))),_0x9f5792=await Promise['all'](_0x3b6184['map'](async _0x540960=>{const _0x206358=await _0xe9ace5(_0x540960),_0x3aa438=_0x206358['metadata'],_0x3e41ce=_0x206358['segmentDat'+'a'],_0x4d181e=_0x3aa438['gaussianCo'+'unt'];console['log']('loadSegmen'+'t\x20'+_0x540960),console['log']('loadSegmen'+'t\x20timeStar'+'t:',_0x3aa438['timeStart'],'segment\x20ti'+'meEnd:',_0x3aa438['timeEnd'],'segment\x20ga'+'ussianCoun'+'t:',_0x4d181e);let _0x4fd691;if(_0x10794c['id']['includes']('quantized')){const _0x5b516c=_0x3aa438['chunk_boun'+'ds'];_0x4fd691=_0x191463(_0x3e41ce,_0x4d181e,_0x4a3013,_0x59e3f3,_0x5b516c);}else _0x4fd691=_0x536896(_0x3e41ce,_0x4d181e,_0x4a3013,_0x59e3f3);return{'decoded':_0x4fd691,'metadata':_0x3aa438};})),_0x58c515=_0x9f5792['map'](_0xe4602d=>_0xe4602d['decoded']),_0x3bd1fb=_0x9f5792['map'](_0x551e57=>_0x551e57['metadata']);return{'decoded':_0x58c515,'metadata':_0x3bd1fb};},_0x52cc05=(_0x445443,_0x399808,_0x4ae318)=>{if(_0x445443['length']===-0x1735+0x623*-0x5+0x1*0x35e4)return new _0x491bf7([{'name':'vertex','count':0x0,'properties':[{'name':'position','type':'float','storage':new Float32Array(0x2c9*-0x1+-0x1063*-0x2+-0x3*0x9ff),'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':new Uint16Array(0x1f70+0x740+-0x1358*0x2),'byteSize':0x2},{'name':'t','type':'float','storage':new Float32Array(0x2551+-0x11*-0x1b3+-0x4234*0x1),'byteSize':0x4},{'name':'t_scale','type':'float','storage':new Float32Array(-0x2360+0xd*-0x25d+0x4219),'byteSize':0x4},{'name':'cutoff','type':'float','storage':new Float32Array(-0x549+-0x234b+0x62*0x6a),'byteSize':0x4},{'name':'motion','type':'float','storage':new Float32Array(0x3*0x97c+0xf70+-0x2be4),'byteSize':0x4},{'name':'rotation','type':'float','storage':new Float32Array(-0x26b6+-0x250a+-0x25e*-0x20),'byteSize':0x4},{'name':'scale','type':'uint16','storage':new Uint16Array(-0x53d*0x7+-0x8cf+-0x2*-0x16bd),'byteSize':0x2},{'name':'time_index','type':'float','storage':new Float32Array(-0xf5f*0x1+0x7d*-0x35+0x2940),'byteSize':0x4}]}],_0x4ae318);const _0x317330=_0x55f32c(_0x445443),[_0x4ae0b7,_0x1f39d3,_0x595a17]=_0x443af7(_0x317330['lifecycle'],-0x1f*-0x94+0x1b9+-0x7*0x2ce,Float32Array),_0x4d1a4a=_0x317330['time_index'],_0x2c21e5=_0x399808['find'](_0x1be792=>_0x1be792['name']==='feature_re'+'st'),_0x57e44a=[];if(_0x2c21e5&&_0x317330['feature_re'+'st']){const _0x43e48e=_0x2c21e5['dataType']['split'](',')[0x1*-0x1eb2+-0x18*-0x53+0x16eb*0x1]['trim']()['replace']('>',''),_0x465c38=_0x443af7(_0x317330['feature_re'+'st'],0xe*0x1d8+-0x99b*0x3+0x304,Float32Array);for(const _0x58f228 of _0x465c38){const _0xea86f4=_0x443af7(_0x58f228,_0x43e48e/(-0x25*-0x22+-0x514+0xf*0x3),Float32Array);for(let _0x706a8e=-0xabb*0x2+0x1a56+-0x20*0x27;_0x706a8e<_0xea86f4['length'];_0x706a8e++)_0x57e44a['push']({'name':'f_rest_'+_0x706a8e,'type':'float','storage':_0xea86f4[_0x706a8e],'byteSize':0x4});}}return new _0x491bf7([{'name':'vertex','count':_0x317330['position']['length']/(0x21d*0xe+0x1a9*0x1+-0x2*0xf9e),'properties':[{'name':'position','type':'float','storage':_0x317330['position'],'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':_0x317330['color_opac'+'ity'],'byteSize':0x2},{'name':'t','type':'float','storage':_0x1f39d3,'byteSize':0x4},{'name':'t_scale','type':'float','storage':_0x4ae0b7,'byteSize':0x4},{'name':'cutoff','type':'float','storage':_0x595a17,'byteSize':0x4},{'name':'motion','type':'float','storage':_0x317330['motion'],'byteSize':0x4},{'name':'rotation','type':'float','storage':_0x317330['rotation'],'byteSize':0x4},{'name':'scale','type':'uint16','storage':_0x317330['scale'],'byteSize':0x2},{'name':'time_index','type':'float','storage':_0x4d1a4a,'byteSize':0x4},..._0x57e44a]}],_0x4ae318);},_0x443af7=(_0x1f5737,_0x4a83f5,_0x53d9e6)=>{const _0x25417e=new Array(_0x4a83f5),_0x5a1c73=Math['floor'](_0x1f5737['length']/_0x4a83f5),_0x2c569b=_0x1f5737['length']%_0x4a83f5;for(let _0x1eea02=0x1e*-0xd3+-0x23a2*0x1+-0x1*-0x3c5c;_0x1eea02<_0x4a83f5;_0x1eea02++){const _0xcd6cf8=_0x1eea02<_0x2c569b?_0x5a1c73+(-0x4ff+0x4f*-0x37+0x2d*0x7d):_0x5a1c73;_0x25417e[_0x1eea02]=new _0x53d9e6(_0xcd6cf8);}for(let _0x2c8152=0x1*0x1051+-0x10c7+0x76;_0x2c8152<_0x1f5737['length'];_0x2c8152++){const _0x131c1c=_0x2c8152%_0x4a83f5,_0x3cf8b2=Math['floor'](_0x2c8152/_0x4a83f5);_0x25417e[_0x131c1c][_0x3cf8b2]=_0x1f5737[_0x2c8152];}return _0x25417e;},_0xe9ace5=async _0x511e87=>{const _0x36af61=new _0x34ccf0(_0x511e87),{metadata:_0x3205c7,segmentData:_0x39941d}=await _0x36af61['readFragme'+'nt']();return{'metadata':_0x3205c7,'segmentData':_0x39941d};},_0x4bae60=(_0x1d2151,_0x47fe16)=>{let _0x3c7b8c,_0x28334a,_0x5bcf07=-(-0x1f9*-0x13+-0x2112+-0x468);if(_0x1d2151['encoding']){const _0xc8463b=_0x1d2151['encoding']['storageTyp'+'e'];if(_0xc8463b==='uint32')_0x28334a=Uint32Array,_0x3c7b8c=Uint32Array['BYTES_PER_'+'ELEMENT'];else{if(_0xc8463b['startsWith']('array<ucha'+'r')){_0x28334a=Uint8Array;const _0x38a14c=_0xc8463b['split'](',')[0x4be*-0x2+0x1*-0x18bb+0x2238]['trim']()['replace']('>','');_0x5bcf07=parseInt(_0x38a14c),_0x3c7b8c=_0x5bcf07*Uint8Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20storage\x20'+'type:\x20'+_0xc8463b);}}else{if(_0x28334a=Float32Array,_0x1d2151['dataType']==='vec3f')_0x3c7b8c=(-0xb2+0x223+-0x16e)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x1d2151['dataType']==='vec4f')_0x3c7b8c=(0x803+0x590*0x2+0xb*-0x1bd)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x1d2151['dataType']==='vec2f')_0x3c7b8c=(-0x189*-0xa+-0x1126+0x1ce)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x1d2151['dataType']['startsWith']('array<floa'+'t')){const _0x432bfc=_0x1d2151['dataType']['split'](',')[0x3*-0xa35+0x7*0x47c+0x1c*-0x7]['trim']()['replace']('>','');_0x5bcf07=parseInt(_0x432bfc),_0x3c7b8c=_0x5bcf07*Float32Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x1d2151['dataType']);}}}}return{'dataSize':_0x47fe16*_0x3c7b8c,'datatype':_0x28334a,'arraySize':_0x5bcf07};},_0x42e1c6=(_0x5d1af8,_0x10d43e)=>{const _0x306a93=(0x481+0x4*0x10a+-0x8a8<<_0x10d43e)-(-0x1*-0x1532+0x2*0xec6+0x1a3*-0x1f);return(_0x5d1af8&_0x306a93)/_0x306a93;},_0x20d6ed=_0x28d340=>{const _0x566a6d=new Float32Array(_0x28d340['length']*(0x24c+-0x1df*-0x3+-0x7e6));for(let _0x92a8bc=-0xcc7+0x1f56*0x1+0x128f*-0x1;_0x92a8bc<_0x28d340['length'];_0x92a8bc++)_0x566a6d[_0x92a8bc*(-0x19ac+0x1d*0x67+0xe04)]=_0x42e1c6(_0x28d340[_0x92a8bc]>>>-0x134c+0x3ec+0x1*0xf75,-0xe0f+0x1877+0xa5d*-0x1),_0x566a6d[_0x92a8bc*(-0x95e+-0xf73+0x18d4)+(-0x1088+-0xb30+0x1bb9)]=_0x42e1c6(_0x28d340[_0x92a8bc]>>>-0x1*0x26ce+-0xa*0x1d3+0x25*0x18b,0x1620+0x1748+-0x2d5e),_0x566a6d[_0x92a8bc*(0x16b4*0x1+0x12d2+-0x2983)+(0x1b4b+0x913+0x245c*-0x1)]=_0x42e1c6(_0x28d340[_0x92a8bc],0xe43+0x1d3+-0x100b*0x1);return _0x566a6d;},_0x5cb235=_0x14816d=>{const _0x4f1006=new Float32Array(_0x14816d['length']*(0x8ad*0x1+-0x748+-0x161*0x1));for(let _0x4dc45c=-0x1dd9+-0x4*0x478+0x2fb9;_0x4dc45c<_0x14816d['length'];_0x4dc45c++)_0x4f1006[_0x4dc45c*(0x8d*-0x13+0x1*-0x9f1+0x146c)]=_0x42e1c6(_0x14816d[_0x4dc45c]>>>-0x5a7*0x6+0x160f*-0x1+0x3811,0x4*-0x811+-0x1378+0x33c4),_0x4f1006[_0x4dc45c*(-0x617*0x1+0xdf9+-0x7de)+(-0x252+-0x17c6*0x1+0x1a19)]=_0x42e1c6(_0x14816d[_0x4dc45c]>>>0x1f5d+0x1*-0x1390+0xbbd*-0x1,-0x15eb*-0x1+-0x21e+-0x2d3*0x7),_0x4f1006[_0x4dc45c*(-0x212d+-0x638*-0x1+0x1af9)+(0x120b*-0x1+0x1*0xc37+0x5d6)]=_0x42e1c6(_0x14816d[_0x4dc45c]>>>-0x16bd+0x1f8c+0x15*-0x6b,-0xd1d*-0x2+-0x1a29+-0x9),_0x4f1006[_0x4dc45c*(-0xa4e+-0xe90+0x18e2)+(0x11*0xcd+0x15f9+-0x2393)]=_0x42e1c6(_0x14816d[_0x4dc45c],-0x2133+0x1*0xb12+0x1629);return _0x4f1006;},_0x345fa5=_0x97974b=>{const _0x428597=new Float32Array(_0x97974b['length']*(0xb59+0x134+0x1e*-0x6b)),_0x26e700=(0x2*0x895+-0x260d+0x14e4)/(Math['sqrt'](0x78d*0x4+0x1*-0x1281+-0x1*0xbb1)*(0xf*0x18d+0x17b9+-0x61*0x7c+0.5));for(let _0x3e634f=0xa7*-0x2c+-0x1e4+0x1e98;_0x3e634f<_0x97974b['length'];_0x3e634f++){const _0x4c1923=(_0x42e1c6(_0x97974b[_0x3e634f]>>>0x6cb*-0x2+0x21c1+-0x1417,0x189*0x1+0x1bb7+-0x1d36)-(-0x1b9b*0x1+-0xad4+0x266f+0.5))*_0x26e700,_0x199935=(_0x42e1c6(_0x97974b[_0x3e634f]>>>-0x1edd*-0x1+0x455+-0x2328,0x11c*-0x6+0x94f*0x4+-0x1e8a)-(0x1*-0x20b3+0x2443*0x1+0x18*-0x26+0.5))*_0x26e700,_0x9a5703=(_0x42e1c6(_0x97974b[_0x3e634f],-0x182e+0x1*-0x23ea+0x2b*0x166)-(0x1a*-0x1f+-0x793+0xab9+0.5))*_0x26e700,_0x12dcb7=Math['sqrt'](-0x1*-0xce3+-0xc*-0x259+-0x290e-(_0x4c1923*_0x4c1923+_0x199935*_0x199935+_0x9a5703*_0x9a5703));let _0x3e17a4=0x38c*0x2+-0x641*-0x6+0x1*-0x2c9e,_0x5ee239=0x1f1*-0xa+0x14f*-0x1b+-0x1*-0x36bf,_0x1a96c5=-0x69d*0x4+-0x49*0xf+-0x1*-0x1ebb,_0x57401e=-0x1bfe*-0x1+-0x41*-0x5+-0x1d43;switch(_0x97974b[_0x3e634f]>>>-0x2ec*0x3+0x1*0x230e+-0x1a2c){case-0xe77+-0xcab+0x97*0x2e:_0x3e17a4=_0x12dcb7,_0x5ee239=_0x4c1923,_0x1a96c5=_0x199935,_0x57401e=_0x9a5703;break;case 0x216d+0x1c*-0xe5+-0x860:_0x3e17a4=_0x12dcb7,_0x5ee239=_0x199935,_0x1a96c5=_0x9a5703,_0x57401e=_0x4c1923;break;case-0x22ef+-0x1f9e+0x428f:_0x3e17a4=_0x199935,_0x5ee239=_0x12dcb7,_0x1a96c5=_0x9a5703,_0x57401e=_0x4c1923;break;case-0x1*-0xf2f+-0x1*0xdf7+-0x135:_0x3e17a4=_0x199935,_0x5ee239=_0x9a5703,_0x1a96c5=_0x12dcb7,_0x57401e=_0x4c1923;break;}const _0x38d979=_0x3f0982(_0x3e17a4,_0x5ee239,_0x1a96c5,_0x57401e);_0x428597[_0x3e634f*(0x1788*0x1+0x26*0xf1+-0x3b4b)]=_0x38d979['x'],_0x428597[_0x3e634f*(-0x1*-0x18ee+0x1e*0x70+-0x260b)+(0x4b6+-0x26bb+0x2206)]=_0x38d979['y'],_0x428597[_0x3e634f*(-0x1*0x1765+-0x139+0x18a1)+(0x141b+-0x1*-0xf31+-0x234a*0x1)]=_0x38d979['z'];}return _0x428597;},_0x13f0c8=(_0x4f6f0f,_0x1ee585,_0x448339)=>{const _0x4ec9a7=_0x448339-_0x1ee585,_0x256f41=new Float32Array(_0x4f6f0f['length']);for(let _0x2f13ec=0xe*-0x119+0x1*0xe9e+0xc0;_0x2f13ec<_0x4f6f0f['length'];_0x2f13ec++)_0x256f41[_0x2f13ec]=_0x4f6f0f[_0x2f13ec]/(-0x22d9+-0x265c+0x4a34)*_0x4ec9a7+_0x1ee585;return _0x256f41;},_0x382a70=new Float32Array(-0xd*-0x10f+0xa7a+-0x183c),_0x4c248c=new Int32Array(_0x382a70['buffer']),_0x127770=_0x4d7c3d=>{_0x382a70[-0x205b+0x21e5+-0x18a*0x1]=_0x4d7c3d;const _0x1ed448=_0x4c248c[-0x5bf*-0x3+0x1*-0x25d9+0x149c];let _0x3c775a=_0x1ed448>>0x267a+0x22b8+0x2e*-0x197&-0xbab1+-0xe1+0x13b92,_0x2ce0ae=_0x1ed448>>0x1188+-0x1*0x8de+-0x44f*0x2&-0x1ab9*0x1+0x54c*0x3+0x12d4;const _0x114826=_0x1ed448>>-0x3*-0x2c5+0x1*-0xf5c+-0x1*-0x724&0x1b4d*0x1+-0x1ea1+0x3*0x171;return _0x114826<-0x113*0x7+-0x538*0x1+0xd24?_0x3c775a:_0x114826>0xbe*-0x2c+0x36e*-0x3+-0x57*-0x80?(_0x3c775a|=0xda0b*-0x1+-0x2729*0x3+0x1cb86,_0x3c775a|=(_0x114826===-0x1066+0x1f07+-0xda2?-0x19f*-0x1+0x14ec+-0x168b:0x1*0x10c1+0x2*0xb5f+-0x151*0x1e)&&_0x1ed448&0x1*-0xc7088c+-0x5d9c73+0x1a4a4fe,_0x3c775a):_0x114826<0x2045+-0x209d+0xc9?(_0x2ce0ae|=0x228a+-0x1b89+-0x3*-0x55,_0x3c775a|=(_0x2ce0ae>>0x1f1*-0xf+0x733+0x332*0x7-_0x114826)+(_0x2ce0ae>>0xd*-0xd1+0x1cbd+-0x11af-_0x114826&0xe*0xb5+0x22f9+-0x2cde),_0x3c775a):(_0x3c775a|=_0x114826-(0x247b*-0x1+0x21ba+0x331)<<0x22e4+0x253f*-0x1+0x1*0x265|_0x2ce0ae>>0x4a9*-0x5+-0x1032+0x2780,_0x3c775a+=_0x2ce0ae&0x1a9+0x1846+-0x19ee,_0x3c775a);},_0x295dec=_0xb8edae=>{const _0x81df17=new Uint16Array(_0xb8edae['length']);for(let _0x3b8b6b=0x629+-0xf06+-0x1*-0x8dd;_0x3b8b6b<_0xb8edae['length']/(-0x4f*-0x2+-0xc26+-0x5c6*-0x2);++_0x3b8b6b)_0x81df17[_0x3b8b6b*(0x1f*0x10f+0x29*0x43+-0x2b88)]=_0x127770(_0xb8edae[_0x3b8b6b*(-0x4c*-0x7d+0x148f+-0x1*0x39a7)]*_0x23cdca+(-0x171f+0x104e+0x6d1+0.5)),_0x81df17[_0x3b8b6b*(-0x5f*0xd+0x1*-0xe2f+-0x983*-0x2)+(-0x1d93+0xb*0x81+0x1809)]=_0x127770(_0xb8edae[_0x3b8b6b*(-0x1cef+-0xf*-0x1f1+-0xb*0x4)+(0x24d7*0x1+-0x908*-0x2+0x36e6*-0x1)]*_0x23cdca+(0x1e5a*-0x1+0x7e9+0x1671+0.5)),_0x81df17[_0x3b8b6b*(-0x2e5*-0x2+0x2f5*-0x7+-0x1*-0xeed)+(0x5*-0x1b5+0x560*0x2+-0x71*0x5)]=_0x127770(_0xb8edae[_0x3b8b6b*(0x2*0x3f7+-0x48b*0x3+0x1*0x5b7)+(0xab8+-0x1136+0x680)]*_0x23cdca+(0x3*0x623+-0xc68*0x1+-0x601+0.5)),_0x81df17[_0x3b8b6b*(-0x1afb+-0x251d+0x401c)+(-0x1ff3*-0x1+-0x3b0+0x4*-0x710)]=_0x127770(_0xb8edae[_0x3b8b6b*(-0xb*-0x273+-0x3*-0x6a2+-0x2ed3*0x1)+(-0x198*0x14+0x2*-0x338+0x2653)]);return _0x81df17;},_0x323fc3=new _0x5982c8(-0xde7*-0x1+0x2578+0x335f*-0x1,-0x418*-0x2+0x1*0xbc+0x23b*-0x4,-0x3cb*0xa+0x1*0xbbe+-0x346*-0x8,-0x1555+0x3d7+-0x8bf*-0x2),_0x3f0982=(_0x16f11a,_0x2a426f,_0x1378df,_0x4a370e)=>(_0x323fc3['set'](_0x2a426f,_0x1378df,_0x4a370e,_0x16f11a),_0x323fc3['normalize'](),_0x323fc3['w']<0xe24+-0x59e*-0x5+-0x2*0x151d&&_0x323fc3['mulScalar'](-(-0x11bd+-0xfd*0x3+0x14b5*0x1)),_0x323fc3);function _0x191463(_0x3bf5e1,_0x37ab58,_0x182f82,_0x5c3a3b,_0x5d29de){const _0x5d7b56=_0x5d29de[Object['keys'](_0x5d29de)[0x1*-0x9f+-0x25dc+0x267b]]['length'],_0x340d0f=0x1eee+-0x2095+-0x1*-0x2a7;let _0x133e64=[],_0x5a65ef=_0x37ab58;for(let _0x2374ec=-0x1da8+0xd65+0x1043;_0x2374ec<_0x5d7b56;_0x2374ec++){const _0x56720f=Math['min'](_0x340d0f,_0x5a65ef);_0x133e64['push'](_0x56720f),_0x5a65ef-=_0x56720f;}let _0x36be2d=0x2*0x24b+-0x2622+-0x4*-0x863,_0x173a05={};for(let _0x4e8c5c of _0x182f82){const _0x31de60=_0x4e8c5c['name'],{dataSize:_0x1659ca,datatype:_0xa30630}=_0x4bae60(_0x4e8c5c,_0x37ab58);let _0x125c90=_0x3bf5e1['buffer']['slice'](_0x36be2d,_0x36be2d+_0x1659ca),_0x4efed2=new _0xa30630(_0x125c90);_0x173a05[_0x31de60]=_0x4efed2,_0x36be2d+=_0x1659ca;}let _0x3adc90=[],_0x3c6ed6=0x7*-0x197+0x5*-0x796+0x310f;for(let _0x557952=0x1*0x419+0x457*-0x7+0x1d*0xe8;_0x557952<_0x5d7b56;_0x557952++){const _0x4ea2dc=_0x24dcf3(_0x173a05,_0x5d29de,_0x557952,_0x133e64,_0x3c6ed6,_0x182f82),_0x1eaa63=_0x4ea2dc['chunkDecom'+'pressed'];_0x3adc90['push'](_0x1eaa63),_0x3c6ed6=_0x4ea2dc['chunkStart'+'Idx'];}let _0x53ef78={};for(let _0x2e2ab7 of Object['keys'](_0x3adc90[-0x1759*-0x1+-0x23c9*0x1+0xc70])){let _0x3efba9=-0x36*0x84+0x11f5*0x1+-0x9e3*-0x1;for(let _0x438213=0x1*0xff4+0xb7f+0x1b73*-0x1;_0x438213<_0x3adc90['length'];_0x438213++)_0x3efba9+=_0x3adc90[_0x438213][_0x2e2ab7]['length'];_0x2e2ab7==='color_opac'+'ity'||_0x2e2ab7==='scale'?_0x53ef78[_0x2e2ab7]=new Uint16Array(_0x3efba9):_0x53ef78[_0x2e2ab7]=new Float32Array(_0x3efba9);let _0x3c3684=0xe95*0x1+0x1a*-0x10+0x6b*-0x1f;for(let _0x5a23da=0xd3a+-0x1f1b+0x1*0x11e1;_0x5a23da<_0x3adc90['length'];_0x5a23da++)_0x53ef78[_0x2e2ab7]['set'](_0x3adc90[_0x5a23da][_0x2e2ab7],_0x3c3684),_0x3c3684+=_0x3adc90[_0x5a23da][_0x2e2ab7]['length'];}return _0x182f82['some'](_0x3272b8=>_0x3272b8['name']==='feature_re'+'st')&&(_0x53ef78['feature_re'+'st']=_0x34909a(_0x173a05,_0x182f82)),_0x53ef78['time_index']=new Float32Array(_0x37ab58),_0x53ef78['time_index']['fill'](_0x5c3a3b-(-0x22d+0x2*0x447+-0x220*0x3)),_0x53ef78;}const _0x24dcf3=(_0x14f12e,_0x4170dc,_0x20b39c,_0x44362,_0x55e0b9,_0x55a855)=>{const _0x458994=_0x44362[_0x20b39c],_0x3c56cd=_0x55e0b9+_0x458994,_0x4eeb23=(_0x252c60,_0x1ede10,_0x3b006f)=>_0x252c60*(-0x11b*0xf+0x512+0xb84-_0x3b006f)+_0x1ede10*_0x3b006f;let _0x1cd0ad={};for(let _0x3e6d66 of _0x55a855){const _0x1a2975=_0x3e6d66['name'],_0x9cd2e7=_0x3e6d66['encoding']['codec'],_0xeb6cc9=_0x14f12e[_0x1a2975]['slice'](_0x55e0b9,_0x3c56cd);if(_0x9cd2e7==='pack_11_10'+'_11'){if(_0x1a2975==='scale'){const _0x1bb108=_0x4170dc['min_scales'][_0x20b39c],_0x1c3b4d=_0x4170dc['max_scales'][_0x20b39c],_0x923153=_0x20d6ed(_0xeb6cc9),_0x35b04b=_0x923153['length'],_0x5b2707=new Uint16Array(_0x35b04b);for(let _0x46e3f3=0xc1a*-0x1+-0xb*0x1+0xc25;_0x46e3f3<_0x35b04b;_0x46e3f3++)_0x5b2707[_0x46e3f3]=_0x127770(Math['exp'](_0x4eeb23(_0x1bb108[_0x46e3f3%(0x29*-0xc4+-0x1d0c+-0xc17*-0x5)],_0x1c3b4d[_0x46e3f3%(-0x21a2+-0x1c85+-0x1f15*-0x2)],_0x923153[_0x46e3f3])));_0x1cd0ad[_0x1a2975]=_0x5b2707;}else{const _0x1735b3=_0x20d6ed(_0xeb6cc9);let _0x3c8112,_0x33ed94;if(_0x1a2975==='position')_0x3c8112=_0x4170dc['min_means'][_0x20b39c],_0x33ed94=_0x4170dc['max_means'][_0x20b39c];else{if(_0x1a2975==='motion')_0x3c8112=_0x4170dc['min_motion'][_0x20b39c],_0x33ed94=_0x4170dc['max_motion'][_0x20b39c];else{if(_0x1a2975==='lifecycle'){const _0x1bbfba=_0x4170dc['min_t_scal'+'e'][_0x20b39c],_0x151bf8=_0x4170dc['max_t_scal'+'e'][_0x20b39c],_0x54af83=_0x4170dc['min_time'][_0x20b39c],_0x163acd=_0x4170dc['max_time'][_0x20b39c],_0x59b866=_0x4170dc['min_cutoff'][_0x20b39c],_0x4cd3f6=_0x4170dc['max_cutoff'][_0x20b39c];_0x3c8112=[_0x1bbfba[0x4f8+-0x1df9*-0x1+0x22f1*-0x1],_0x54af83[0x1ec7+-0x1ea2+-0x25],_0x59b866[0x2d8+0x45c+-0x734]],_0x33ed94=[_0x151bf8[-0x1a32+0x26ed*-0x1+0x411f],_0x163acd[0x12*0x117+0xe8d+-0x222b],_0x4cd3f6[-0xe*0x130+0xf56+0x14a]];}else throw new Error('Unknown\x20at'+'tribute\x20fo'+'r\x20pack_11_'+'10_11:\x20'+_0x1a2975);}}for(let _0x299f6c=0xa3*-0x20+-0x1548+0x29a8;_0x299f6c<_0x1735b3['length'];_0x299f6c++)_0x1735b3[_0x299f6c]=_0x4eeb23(_0x3c8112[_0x299f6c%(-0x369+-0x115*0x10+-0x1*-0x14bc)],_0x33ed94[_0x299f6c%(0x19c+-0x1135+-0x1b*-0x94)],_0x1735b3[_0x299f6c]);_0x1cd0ad[_0x1a2975]=_0x1735b3;}}else{if(_0x9cd2e7==='pack_8888'){let _0x111e84=_0x5cb235(_0xeb6cc9);const _0x2868f5=_0x4170dc['min_colors'][_0x20b39c],_0x180adf=_0x4170dc['max_colors'][_0x20b39c],_0x411cf2=new Uint16Array(_0x111e84['length']);for(let _0x13c546=0x2539+-0x390*-0x4+-0x3379;_0x13c546<_0x111e84['length'];_0x13c546++){const _0x3a8d97=_0x13c546*(0x162c+-0x1583*0x1+-0x5*0x21);_0x411cf2[_0x3a8d97]=_0x127770(_0x4eeb23(_0x2868f5[0x24*-0x84+-0x13c3+-0x2653*-0x1],_0x180adf[-0x1ded+0x99*-0x15+0x2a7a],_0x111e84[_0x3a8d97])),_0x411cf2[_0x3a8d97+(0x1e23*0x1+-0x123*0x20+0x63e)]=_0x127770(_0x4eeb23(_0x2868f5[0x728+-0x21b7*0x1+-0x110*-0x19],_0x180adf[0xe85*-0x1+0x1*0x3c7+-0xabf*-0x1],_0x111e84[_0x3a8d97+(-0x25bc+-0xd42*-0x1+0x829*0x3)])),_0x411cf2[_0x3a8d97+(-0x14ea+-0xd8a+0x2276)]=_0x127770(_0x4eeb23(_0x2868f5[0x17*0xed+0x3*-0x33d+0x2*-0x5c9],_0x180adf[-0x14+0x7*0xca+0x30*-0x1d],_0x111e84[_0x3a8d97+(-0x13ea+-0x1a7*-0x6+0xa02)])),_0x411cf2[_0x3a8d97+(-0x7cf+0x5*-0x74b+-0x2c49*-0x1)]=_0x127770(_0x111e84[_0x3a8d97+(-0x2358+0xc77*-0x1+0x2*0x17e9)]);}_0x1cd0ad[_0x1a2975]=_0x411cf2;}else{if(_0x9cd2e7==='pack_rotat'+'ion_32'){const _0x505fb1=_0x345fa5(_0xeb6cc9);_0x1cd0ad[_0x1a2975]=_0x505fb1;}else{if(_0x9cd2e7==='range_quan'+'t_u8'){if(_0x1a2975==='feature_re'+'st')continue;throw new Error('Unknown\x20co'+'dec:\x20'+_0x9cd2e7);}}}}}return{'chunkDecompressed':_0x1cd0ad,'chunkStartIdx':_0x3c56cd};},_0x34909a=(_0x20496c,_0xa62580)=>{const _0x4e4f8b='feature_re'+'st',_0x1919a4=_0xa62580['find'](_0x26b658=>_0x26b658['name']===_0x4e4f8b);let _0x217e84;const _0x518abd=_0x1919a4['encoding']['codec'],_0x724698=_0x20496c[_0x4e4f8b];if(_0x518abd==='range_quan'+'t_u8'){const [_0x515e31,_0x12db1f]=_0x1919a4['encoding']['range'];_0x217e84=_0x13f0c8(_0x724698,_0x515e31,_0x12db1f);}else throw new Error('Unknown\x20co'+'dec:\x20'+_0x518abd);return _0x217e84;},_0x536896=(_0x2a76a5,_0xee1342,_0x15a84d,_0x310655)=>{let _0x1f5518=-0x1*0x1009+-0x1*-0x2d1+-0x34e*-0x4;const _0x338e93={};for(const _0x6a0c65 of _0x15a84d){const {dataSize:_0x199dcd}=_0x4bae60(_0x6a0c65,_0xee1342);if(['vec3f','vec4f','vec2f']['includes'](_0x6a0c65['dataType']))_0x338e93[_0x6a0c65['name']]=new Float32Array(_0x2a76a5['buffer']['slice'](_0x1f5518,_0x1f5518+_0x199dcd));else{if(_0x6a0c65['dataType']['startsWith']('array<floa'+'t'))_0x338e93[_0x6a0c65['name']]=new Float32Array(_0x2a76a5['buffer']['slice'](_0x1f5518,_0x1f5518+_0x199dcd));else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x6a0c65['dataType']);}_0x1f5518+=_0x199dcd;}const _0x46817a=new Uint16Array(_0x338e93['scale']['length']);for(let _0x2d72e4=-0x17*-0x9c+-0x5d1*0x5+-0x7*-0x227;_0x2d72e4<_0x338e93['scale']['length'];_0x2d72e4++)_0x46817a[_0x2d72e4]=_0x127770(Math['exp'](_0x338e93['scale'][_0x2d72e4]));_0x338e93['scale']=_0x46817a;const _0x5d4334=_0x338e93['rotation']['length']/(-0xf28+-0x26fe+0x362a),_0x50b391=new Float32Array(_0x5d4334*(0x2c7+-0x387*-0x9+-0x11d*0x1f));for(let _0x5611c5=-0x1f1b+0x3e0+0x1*0x1b3b;_0x5611c5<_0x5d4334;_0x5611c5++){const _0x42359e=_0x3f0982(_0x338e93['rotation'][_0x5611c5*(0xcd*0x12+0x4a5*0x7+-0x2ee9)],_0x338e93['rotation'][_0x5611c5*(0x187b+-0x4b+-0xe*0x1ba)+(0x14a9+-0x1936*0x1+0x48e)],_0x338e93['rotation'][_0x5611c5*(-0x1*0x1a0b+-0x1*0x1bdb+-0xce*-0x43)+(0x4fd*-0x7+0x6*0x53f+-0x1*-0x373)],_0x338e93['rotation'][_0x5611c5*(0x1589+0x1d47+-0x32cc)+(-0x3e*0x25+-0x3*-0xc40+0x223*-0xd)]);_0x50b391[_0x5611c5*(0x451*-0x4+-0x1*0x224f+0x3*0x1132)]=_0x42359e['x'],_0x50b391[_0x5611c5*(0x1*-0x9af+0x12b*-0x4+0xe5e)+(0xe9+0x1181*0x1+-0x1269*0x1)]=_0x42359e['y'],_0x50b391[_0x5611c5*(-0x12da+-0x89b*0x2+-0x5*-0x737)+(0x18f*0x1+-0x24de+-0x2351*-0x1)]=_0x42359e['z'];}return _0x338e93['rotation']=_0x50b391,_0x338e93['color_opac'+'ity']=_0x295dec(_0x338e93['color_opac'+'ity']),_0x338e93['time_index']=new Float32Array(_0xee1342),_0x338e93['time_index']['fill'](_0x310655-(0x6b4*0x1+0x51*-0x61+-0x25*-0xa6)),_0x338e93;},_0x55f32c=(_0x651064,_0x5a36f3)=>{const _0x274362={};if(_0x651064['length']===-0xd2b+0x1038+0x27*-0x14)return _0x651064[0x1f83*0x1+-0x1*-0x22d9+-0x3e*0x112];for(const _0x47e526 of Object['keys'](_0x651064[-0x4d*0x67+-0x185*-0x2+0x1bf1]))if(_0x651064[-0x18*-0x18d+0x24c9+-0x3*0x18ab][_0x47e526]instanceof Float32Array||_0x651064[0x2*0x531+0x22d+-0xc8f][_0x47e526]instanceof Uint16Array){const _0x391aa4=_0x651064['reduce']((_0x2a8da1,_0x12b4ab)=>_0x2a8da1+_0x12b4ab[_0x47e526]['length'],-0x1e50+0x198b+0x4c5);let _0x42262d;_0x651064[0x79a+-0x59+-0x741][_0x47e526]instanceof Uint16Array?_0x42262d=new Uint16Array(_0x391aa4):_0x42262d=new Float32Array(_0x391aa4);let _0x8bd43f=-0x1171+0x211+0xf60;for(const _0x13b7b4 of _0x651064)_0x42262d['set'](_0x13b7b4[_0x47e526],_0x8bd43f),_0x8bd43f+=_0x13b7b4[_0x47e526]['length'];_0x274362[_0x47e526]=_0x42262d;}else Array['isArray'](_0x651064[-0xfc6*0x2+0x1*0xcc5+0x12c7][_0x47e526])?_0x274362[_0x47e526]=_0x651064['flatMap'](_0x42da19=>Array['from'](_0x42da19[_0x47e526])):_0x274362[_0x47e526]=_0x651064['map'](_0x58caab=>_0x58caab[_0x47e526])['flat']();return _0x274362;};}class PN extends me{constructor(_0x46cfc2){super(),h(this,'manifestUr'+'l'),h(this,'worker'),(this['manifestUr'+'l']=_0x46cfc2,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+CN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','cborXUrl':'https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/cbor-x@1'+'.6.0.min.j'+'s'});}['loadGsdMan'+'ifest'](_0x11a6b7){var _0x5d9115;return(_0x5d9115=this['worker'])==null||_0x5d9115['postMessag'+'e']({'type':'loadGsdMan'+'ifest','manifestUrl':this['manifestUr'+'l'],'loadRepresentation':_0x11a6b7}),new Promise((_0x173bcb,_0x32fe9f)=>{if(!this['worker']){_0x32fe9f(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x13c06b=>{if(!this['worker'])return;const {data:_0x435965}=_0x13c06b;if(this['manifestUr'+'l']===_0x435965['url'])switch(_0x435965['type']){case'onloadMani'+'fest':_0x173bcb({'manifest':_0x435965['data'],'url':_0x435965['url'],'representation':_0x435965['representa'+'tion']});break;case'error':_0x32fe9f(_0x435965['data']);break;}};});}['loadGsdSeg'+'ments'](_0x29bff4,_0x37802e){var _0x38aa44;return(_0x38aa44=this['worker'])==null||_0x38aa44['postMessag'+'e']({'type':'loadGsdSeg'+'ments'}),new Promise((_0xf52ca1,_0x9a675f)=>{if(!this['worker']){_0x9a675f(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x2eb745=>{if(!this['worker'])return;const {data:_0x16de2f}=_0x2eb745;if(this['manifestUr'+'l']===_0x16de2f['url'])switch(_0x16de2f['type']){case'progress':_0x29bff4==null||_0x29bff4(_0x16de2f['bytes'],_0x16de2f['totalLengt'+'h'],_0x16de2f['url']);break;case'loadGsdSeg'+'mentsDone':_0xf52ca1(_0x16de2f['data']);break;case'error':_0x37802e==null||_0x37802e(_0x16de2f['data'],_0x16de2f['url']);break;}};});}['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x2e0e2a,_0x2e7db5,_0x3997d5){var _0x1c20da;return(_0x1c20da=this['worker'])==null||_0x1c20da['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'ments','timelineIndexs':_0x2e0e2a}),new Promise((_0x332dcc,_0x4a77a1)=>{if(!this['worker']){_0x4a77a1(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x1c185d=>{if(!this['worker'])return;const {data:_0x55e24c}=_0x1c185d;if(this['manifestUr'+'l']===_0x55e24c['url'])switch(_0x55e24c['type']){case'progress':_0x2e7db5==null||_0x2e7db5(_0x55e24c['bytes'],_0x55e24c['totalLengt'+'h'],_0x55e24c['url']);break;case'loadTimeli'+'neIndexSeg'+'mentsDone':_0x332dcc(_0x55e24c);break;case'error':_0x3997d5==null||_0x3997d5(_0x55e24c['data'],_0x55e24c['url']);break;}};});}['destroy'](){this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(-0x2*0xe0b+0x16bf*-0x1+0x32d5));}}const Eh=class Eh{constructor(_0x501bbd,_0x43c4b6,_0x395470){h(this,'lastLoadIn'+'dex',0x7d+-0x70b*-0x4+-0x1d*0xfd),h(this,'gsdAssetPa'+'rser'),(this['manifest']=_0x501bbd,this['representa'+'tion']=_0x43c4b6,this['gsdAssetPa'+'rser']=_0x395470,this['segmentTim'+'elines']=this['getSegment'+'Timeline'](_0x501bbd,_0x43c4b6));}['getSegment'+'Timeline'](_0x26f80c,_0x95a9b8){let _0x22d406=null;for(const _0x4190c6 of _0x26f80c['adaptation'+'Sets'])if(_0x4190c6['contentTyp'+'e']==='4dgs'){for(const _0x64027e of _0x4190c6['representa'+'tions'])if(_0x64027e['id']===_0x95a9b8){_0x22d406=_0x64027e;break;}break;}if(!_0x22d406)throw new Error('Representa'+'tion\x20\x27'+_0x95a9b8+('\x27\x20not\x20foun'+'d'));return _0x22d406['segmentTem'+'plate'][-0x1e2a+-0x8b9*0x1+0x26e3]['segmentTim'+'eline'];}['onTimeChan'+'ged'](_0x7ffc8a){const _0x32fb27=this['findSegmen'+'tTimeline'](_0x7ffc8a);if(!_0x32fb27)return;const _0x546bfe=_0x32fb27['timelineIn'+'dex']<this['segmentTim'+'elines']['length']-(0x1588+-0x1db9+0x419*0x2)?_0x32fb27['timelineIn'+'dex']+(0x57f+0x5*-0x8+0x1*-0x556):0x15dd+0x22ab*0x1+-0x3888;this['lastLoadIn'+'dex']!==_0x546bfe&&(this['lastLoadIn'+'dex']=_0x546bfe,this['loadNextSe'+'gment'](_0x546bfe));}async['loadNextSe'+'gment'](_0x386c22){const _0x31c1b4=[];for(let _0x1db0af=0x10*0xcb+0xcb*0x20+-0xae*0x38;_0x1db0af<Eh['CACHE_COUN'+'T'];_0x1db0af++)_0x31c1b4['push']((_0x386c22+_0x1db0af)%this['segmentTim'+'elines']['length']);const _0x3c9bf3=_0x31c1b4[_0x31c1b4['length']-(-0x52*-0xb+-0x5e1+-0x25c*-0x1)],_0x41569c=this['segmentTim'+'elines'][_0x3c9bf3]['t']+this['segmentTim'+'elines'][_0x3c9bf3]['d'];this['gsdAssetPa'+'rser']['appendload'+'DataTask'](_0x31c1b4,_0x41569c);}['findSegmen'+'tTimeline'](_0x1a1dec){let _0x57a052=0x7*0x130+-0x790+-0x1*0xc0,_0x2ea250=this['segmentTim'+'elines']['length']-(-0x1*-0x12e7+0xcf8*0x1+-0x1fde);for(;_0x57a052<=_0x2ea250;){const _0x32fb3d=_0x57a052+_0x2ea250>>-0xf*0x151+0x2*-0x12c1+0x98b*0x6,{t:_0x37a7c4,d:_0x1dd7d2}=this['segmentTim'+'elines'][_0x32fb3d];if(_0x1a1dec<_0x37a7c4)_0x2ea250=_0x32fb3d-(-0xf*0x1d3+0xf38+0xc26);else{if(_0x1a1dec>=_0x37a7c4+_0x1dd7d2)_0x57a052=_0x32fb3d+(-0x93*0x39+-0x426+0x24e2);else return{'timeline':this['segmentTim'+'elines'][_0x32fb3d],'timelineIndex':_0x32fb3d};}}return null;}};h(Eh,'CACHE_COUN'+'T',0x1691+0x263c+0x1*-0x3cc7);let Su=Eh;class MN{constructor(_0x29a835,_0x56b3bc){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'manifest'),h(this,'schedule'),h(this,'readWorker'),h(this,'loadDataTa'+'skQueue',[]),h(this,'isProcessi'+'ngLoadTask'+'Queue',!(-0x109+0x1960+-0x1856)),(console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','Register\x20G'+'sdParser.c'+'onstructor'),this['app']=_0x29a835,this['maxRetries']=_0x56b3bc,this['urlList']=[],this['gsplatReso'+'urce']=null,this['totalRecei'+'ved']=0x49*-0x2f+0x15e6+-0x5*0x1b3,this['manifest']={});}async['load'](_0x3e1751,_0x48e0dd,_0x48d51c){console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','GsdParser.'+'load',_0x3e1751['load']);const _0x5439db=_0x48d51c['data']['events'];this['events']=_0x5439db,this['asset']=_0x48d51c,this['callback']=_0x48e0dd,this['timeOption']=_0x48d51c['data']['timeOption'];let _0x5c0d8e=_0x48d51c['data']['representa'+'tion']||'high-raw';this['readWorker']=new PN(_0x3e1751['load']);const _0x53dc4f=await this['readWorker']['loadGsdMan'+'ifest'](_0x5c0d8e);this['manifest']=_0x53dc4f['manifest'],_0x5c0d8e=_0x53dc4f['manifest']['representa'+'tion']||_0x5c0d8e,this['schedule']=new Su(this['manifest'],_0x5c0d8e,this),this['totalRecei'+'vedCount']=-0x5*0x6da+0x3b*0x29+0x18cf;const _0xc502c3=this['getSegment'+'Timeline'](this['manifest'],_0x5c0d8e),_0x5d38ad=_0xc502c3[0x2590+-0x9c4+-0x2*0xde6]['t']+_0xc502c3[-0x1a43+0xb8e+0x5*0x2f1]['d'];this['appendload'+'DataTask']([0x26c6+0xe3*0x15+0x3965*-0x1,0x15*0x19+-0x1*-0xc69+0x1*-0xe75],_0x5d38ad),_0x5439db['on']('timeChange'+'d',_0x273005=>{var _0x211988;(_0x211988=this['schedule'])==null||_0x211988['onTimeChan'+'ged'](_0x273005);});}['getSegment'+'Timeline'](_0x23e406,_0x1144a7){let _0x5cd64a=null;for(const _0x129db1 of _0x23e406['adaptation'+'Sets'])if(_0x129db1['contentTyp'+'e']==='4dgs'){for(const _0x3892cc of _0x129db1['representa'+'tions'])if(_0x3892cc['id']===_0x1144a7){_0x5cd64a=_0x3892cc;break;}break;}if(!_0x5cd64a)throw new Error('Representa'+'tion\x20\x27'+_0x1144a7+('\x27\x20not\x20foun'+'d'));return _0x5cd64a['segmentTem'+'plate'][-0x1*-0x1dc9+-0x1d*-0x4d+0xcd6*-0x3]['segmentTim'+'eline'];}['appendload'+'DataTask'](_0x10a8f9,_0x8c93fe){this['loadDataTa'+'skQueue']['push']({'segmentIndexs':_0x10a8f9,'loadedTime':_0x8c93fe}),this['isProcessi'+'ngLoadTask'+'Queue']||Promise['resolve']()['then'](()=>this['processLoa'+'dQueue']());}async['processLoa'+'dQueue'](){if(!this['isProcessi'+'ngLoadTask'+'Queue']){this['isProcessi'+'ngLoadTask'+'Queue']=!(-0x295*0x4+0x1*0x563+0x4f1);try{for(;this['loadDataTa'+'skQueue']['length']>0x492+-0x1061+0xbcf;){const _0x2391b8=this['loadDataTa'+'skQueue']['shift']();await this['loadGsplat'+'Data'](_0x2391b8);}}finally{this['isProcessi'+'ngLoadTask'+'Queue']=!(0x223e+-0x2*-0x5+0xe1*-0x27);}}}async['loadGsplat'+'Data'](_0x1b28dc){var _0x4dcc1a,_0x28c046;const {segmentIndexs:_0x440fd5,loadedTime:_0xc48cb0}=_0x1b28dc,_0x36fddd=this['events'],_0x38fa90=this['asset'],_0x415d91=this['callback'],_0x430bd1=this['timeOption'];globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('____loadTi'+'me','gsd\x20======'+'=========='+'=========='+'=========='+'=========='+'========='),console['log']('____loadTi'+'me','gsd\x20start\x20'+'loadGsplat'+'Data',_0x440fd5,(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](0x4*-0x7ef+-0x15d7*-0x1+0x9e7*0x1));try{const _0x35bf3a=await this['readWorker']['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x440fd5,(_0xa7faa0,_0x52829b)=>{this['totalRecei'+'ved']+=_0xa7faa0,_0x38fa90&&_0x36fddd['fire']('progress',this['totalRecei'+'ved'],_0x52829b);},(_0x22cbcd,_0x41dde1)=>{debugger;console['warn']('ERROE\x20Load'+'\x20GSD',_0x41dde1,_0x22cbcd);});console['log']('____loadTi'+'me','gsd\x20end\x20lo'+'adGsplatDa'+'ta',(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](-0x21*0x52+0x2557+-0x1ac3),_0x35bf3a['data']['elements'][-0xd01+0x2106+0x19*-0xcd]['count'],((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/_0x35bf3a['data']['elements'][0x112f+-0x1a3*-0x9+-0x1fea]['count']*(-0x1a7a*-0x2+0x3*-0xd13+0x1955))['toFixed'](-0x2629+0x88+0x25a3));const _0x2ab509=_0x35bf3a['data'];if(_0x2ab509['elements'][0x1d0+-0x1a1d+0x184d]['count']===0x1ab+0x132a+-0x14d5)return;this['totalRecei'+'vedCount']+=_0x2ab509['elements'][-0x1*0x1f4b+0x2105+-0x1ba]['count'];const _0x53eba8=new xA(_0x2ab509['elements'],_0x2ab509['comments']);_0x38fa90['fire']('load:data',_0x53eba8);const _0x50197d=_0x38fa90['data']['createTime']!==((_0x28c046=(_0x4dcc1a=this['onlyOneAss'+'et'])==null?void(-0x208c+0x1496+-0x1*-0xbf6):_0x4dcc1a['data'])==null?void(-0x2677*-0x1+0x2005+-0x2b6*0x1a):_0x28c046['createTime']);this['gsplatReso'+'urce']&&!_0x50197d?(console['log']('____\x20ENGIN'+'E\x20IVAN','appendGSpl'+'atDecodedR'+'esource'),this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x53eba8,_0x430bd1,_0xc48cb0,_0x38fa90)):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'DecodedRes'+'ource'),this['gsplatReso'+'urce']=new $A(this['app']['graphicsDe'+'vice'],_0x53eba8),this['gsplatReso'+'urce']['setSceneIn'+'fo'](this['manifest']['sceneInfo']),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x430bd1,this['onlyOneAss'+'et']=_0x38fa90,_0x415d91&&_0x415d91(null,this['gsplatReso'+'urce']),_0x36fddd['fire']('loadAllAss'+'etsDone'));}catch(_0x5e4a7e){console['error']('loadGsplat'+'Data','error',_0x5e4a7e),_0x415d91&&_0x415d91(_0x5e4a7e,null);}}['open'](_0x970e11,_0x5b7134){return _0x5b7134;}}class DN extends Qe{constructor(_0x56991b){console['log']('____\x20ENGIN'+'E\x20IVAN','Register\x20G'+'SplatHandl'+'er.constru'+'ctor\x20by\x20ap'+'plication\x20'+'addResourc'+'eHandles'),super(_0x56991b,'gsplat'),this['parsers']={'ply':new AN(_0x56991b,0xee7+-0x81a+-0x6ca*0x1),'json':new MN(_0x56991b,-0x20d*0x10+0x14d1*-0x1+0xd69*0x4)};}['_getUrlWit'+'houtParams'](_0x13c9ef){return _0x13c9ef['indexOf']('?')>=-0x38*-0x5+-0x1*-0x2429+-0x2541?_0x13c9ef['split']('?')[0xb*-0xf4+-0x103d*0x1+0x1*0x1ab9]:_0x13c9ef;}['_getParser'](_0x32012b){const _0x745264=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x32012b))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x745264]||this['parsers']['ply'];}['load'](_0x3c13a0,_0x41b6cf,_0x588301){console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.load'),typeof _0x3c13a0=='string'&&(_0x3c13a0={'load':_0x3c13a0,'original':_0x3c13a0}),this['_getParser'](_0x3c13a0['original'])['load'](_0x3c13a0,_0x41b6cf,_0x588301);}['open'](_0x2f9279,_0x27869a,_0x3feb5e){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.open'),_0x27869a;}}class yu{static['setCompres'+'sedPRS'](_0x35ac8f,_0x22ac7d,_0x10732a){const _0x2fc0eb=_0x10732a['singleVecs'];let _0x3b724d,_0x44c690;const _0x5ca825=_0x22ac7d['___1'];_0x5ca825||(_0x3b724d=_0x10732a['tripleVecs'],_0x44c690=_0x22ac7d['___2']);let _0x225fc8=_0x5ca825?_0x5ca825[0x1*-0x2031+0x49*-0x35+0x46*0xad]:_0x3b724d[_0x44c690];_0x35ac8f['setLocalPo'+'sition'](_0x2fc0eb[_0x225fc8],_0x2fc0eb[_0x225fc8+(0x133d+0x9eb*-0x3+0x1*0xa85)],_0x2fc0eb[_0x225fc8+(0x38e+-0x18b3+0x1527)]),_0x225fc8=_0x5ca825?_0x5ca825[0x1af6+0x7f*0x2b+0x6e6*-0x7]:_0x3b724d[_0x44c690+(-0xcd6+0x1409*0x1+-0x732)],_0x35ac8f['setLocalEu'+'lerAngles'](_0x2fc0eb[_0x225fc8],_0x2fc0eb[_0x225fc8+(-0x55*0x4a+0x2*0x1092+-0x891)],_0x2fc0eb[_0x225fc8+(0x1566+-0x1515+0x1*-0x4f)]),_0x225fc8=_0x5ca825?_0x5ca825[-0x607+0x311+-0x2f8*-0x1]:_0x3b724d[_0x44c690+(-0x18fe+-0x16a1+0x1*0x2fa1)],_0x35ac8f['setLocalSc'+'ale'](_0x2fc0eb[_0x225fc8],_0x2fc0eb[_0x225fc8+(0x2*-0x1345+-0x1e7*0x14+0x4c97)],_0x2fc0eb[_0x225fc8+(0x36a*-0x3+0x1*-0x1335+-0x1*-0x1d75)]);}static['oneCharToK'+'ey'](_0x49343c,_0x238b2){const _0x152436=_0x49343c['charCodeAt'](0x883*0x4+-0x6df+0x305*-0x9)-_0x238b2['fieldFirst'+'Code'];return _0x238b2['fieldArray'][_0x152436];}static['multCharTo'+'Key'](_0x5dc8ff,_0x3511e2){let _0x43dff1=0xe82+0x1*0x7b0+-0x1632;for(let _0x49ce1c=-0x1034+0x12b5+-0x1*0x281;_0x49ce1c<_0x5dc8ff['length'];_0x49ce1c++)_0x43dff1=_0x43dff1*_0x3511e2['fieldCodeB'+'ase']+_0x5dc8ff['charCodeAt'](_0x49ce1c)-_0x3511e2['fieldFirst'+'Code'];return _0x3511e2['fieldArray'][_0x43dff1];}}class _h{constructor(_0x5b7faf,_0x31c7fa){this['_node']=_0x5b7faf,this['_data']=_0x31c7fa;}['run'](){const _0x53f58c=Object['prototype']['toString']['call'](this['_node']);return _0x53f58c==='[object\x20Ob'+'ject]'?this['_handleMap']():_0x53f58c==='[object\x20Ar'+'ray]'?this['_handleArr'+'ay']():this['_result']=this['_node'],this['_result'];}['_handleMap'](){this['_result']={},Object['keys'](this['_node'])['forEach'](this['_handleKey'],this);}['_handleKey'](_0x5dbce3){let _0x379d51=_0x5dbce3;const _0x182568=_0x5dbce3['length'];_0x182568===0x26fe+-0x143*-0x16+-0x42bf?_0x379d51=yu['oneCharToK'+'ey'](_0x5dbce3,this['_data']):_0x182568===0x28c+0x2*0x89d+-0x13c4&&(_0x379d51=yu['multCharTo'+'Key'](_0x5dbce3,this['_data'])),this['_result'][_0x379d51]=new _h(this['_node'][_0x5dbce3],this['_data'])['run']();}['_handleArr'+'ay'](){this['_result']=[],this['_node']['forEach'](this['_handleArE'+'lt'],this);}['_handleArE'+'lt'](_0x571aef){const _0x5d1771=new _h(_0x571aef,this['_data'])['run']();this['_result']['push'](_0x5d1771);}}class Qp{constructor(_0x28e7f7,_0x405764){this['_app']=_0x28e7f7,this['_isTemplat'+'e']=_0x405764;}['parse'](_0x26b483){const _0x27cdab={};let _0x558e44=null;const _0x2a43bf=_0x26b483['compressed'+'Format'];_0x2a43bf&&!_0x26b483['entDecompr'+'essed']&&(_0x26b483['entDecompr'+'essed']=!(-0xcfb+0x50c+0x7ef*0x1),_0x26b483['entities']=new _h(_0x26b483['entities'],_0x2a43bf)['run']());for(const _0xecbc08 in _0x26b483['entities']){const _0x1f5995=_0x26b483['entities'][_0xecbc08],_0x37e715=this['_createEnt'+'ity'](_0x1f5995,_0x2a43bf);_0x27cdab[_0xecbc08]=_0x37e715,_0x1f5995['parent']===null&&(_0x558e44=_0x37e715);}for(const _0x49df0d in _0x26b483['entities']){const _0x49adee=_0x27cdab[_0x49df0d],_0x2c3d32=_0x26b483['entities'][_0x49df0d]['children'],_0x42d8ac=_0x2c3d32['length'];for(let _0x101e91=0x2*-0x10df+0x1*-0xeb1+-0x1*-0x306f;_0x101e91<_0x42d8ac;_0x101e91++){const _0x39924b=_0x27cdab[_0x2c3d32[_0x101e91]];_0x39924b&&_0x49adee['addChild'](_0x39924b);}}return this['_openCompo'+'nentData'](_0x558e44,_0x26b483['entities']),_0x558e44;}['_createEnt'+'ity'](_0x1346b9,_0x2d53c8){const _0x2a505d=new lt(_0x1346b9['name'],this['_app']);if(_0x2a505d['setGuid'](_0x1346b9['resource_i'+'d']),this['_setPosRot'+'Scale'](_0x2a505d,_0x1346b9,_0x2d53c8),_0x2a505d['_enabled']=_0x1346b9['enabled']??!(0x1*0x2e7+0x20*0x8b+-0x1d*0xb3),this['_isTemplat'+'e']?_0x2a505d['_template']=!(0x1*-0x1cc8+0x126e*-0x1+0x2f36):_0x2a505d['_enabledIn'+'Hierarchy']=_0x2a505d['_enabled'],_0x2a505d['template']=_0x1346b9['template'],_0x1346b9['tags']){for(let _0x5b68b0=-0x15e1+-0x3b+-0xa*-0x236;_0x5b68b0<_0x1346b9['tags']['length'];_0x5b68b0++)_0x2a505d['tags']['add'](_0x1346b9['tags'][_0x5b68b0]);}return _0x2a505d;}['_setPosRot'+'Scale'](_0x7e41e2,_0x55462b,_0xce18ca){if(_0xce18ca)yu['setCompres'+'sedPRS'](_0x7e41e2,_0x55462b,_0xce18ca);else{const _0x47e62d=_0x55462b['position'],_0x5e1172=_0x55462b['rotation'],_0x1eea9e=_0x55462b['scale'];_0x7e41e2['setLocalPo'+'sition'](_0x47e62d[0x522*-0x1+-0xfa3*-0x2+0x689*-0x4],_0x47e62d[-0x1c67+0x2298+-0x630],_0x47e62d[0x37+-0x28*0x6c+0x10ab*0x1]),_0x7e41e2['setLocalEu'+'lerAngles'](_0x5e1172[0x4*-0x88a+-0x1702+0x392a],_0x5e1172[0xe98+-0x298+-0xbff],_0x5e1172[-0xd20*-0x2+0xfaa+-0x29e8]),_0x7e41e2['setLocalSc'+'ale'](_0x1eea9e[-0x9*-0x243+0x2e7*0x1+-0x1742],_0x1eea9e[0x2*0x94b+-0x416+-0xe7f],_0x1eea9e[-0x97c+0xad3+-0x155]);}}['_openCompo'+'nentData'](_0x5e888f,_0x133bf0){const _0x19893a=this['_app']['systems']['list'];let _0x321742=_0x19893a['length'];const _0x41821b=_0x133bf0[_0x5e888f['getGuid']()];for(let _0x31093d=0x1*0x210e+-0x26e9+-0x5db*-0x1;_0x31093d<_0x321742;_0x31093d++){const _0x2cd855=_0x19893a[_0x31093d],_0x4a1d2e=_0x41821b['components'][_0x2cd855['id']];_0x4a1d2e&&_0x2cd855['addCompone'+'nt'](_0x5e888f,_0x4a1d2e);}_0x321742=_0x41821b['children']['length'];const _0x48847e=_0x5e888f['_children'];for(let _0x47aaaf=-0x697*-0x1+-0x6*0xaa+0x1d*-0x17;_0x47aaaf<_0x321742;_0x47aaaf++)_0x48847e[_0x47aaaf]?_0x48847e[_0x47aaaf]=this['_openCompo'+'nentData'](_0x48847e[_0x47aaaf],_0x133bf0):w['warn']('Scene\x20data'+'\x20is\x20invali'+'d\x20where\x20a\x20'+'child\x20unde'+'r\x20\x22'+_0x5e888f['name']+('\x22\x20Entity\x20d'+'oesn\x27t\x20exi'+'st.\x20Please'+'\x20check\x20the'+'\x20scene\x20dat'+'a.'));return _0x5e888f;}}class Gv{static['load'](_0xfc998d,_0x3db01d,_0x4834a0){typeof _0xfc998d=='string'&&(_0xfc998d={'load':_0xfc998d,'original':_0xfc998d}),ot['get'](_0xfc998d['load'],{'retry':_0x3db01d>-0x536*0x1+-0x1080+0x15b6,'maxRetries':_0x3db01d},(_0x1d7aa0,_0x17d314)=>{if(!_0x1d7aa0)_0x4834a0(_0x1d7aa0,_0x17d314);else{let _0x5bb8d1='Error\x20whil'+'e\x20loading\x20'+'scene\x20JSON'+'\x20'+_0xfc998d['original'];_0x1d7aa0['message']?(_0x5bb8d1+=':\x20'+_0x1d7aa0['message'],_0x1d7aa0['stack']&&(_0x5bb8d1+='\x0a'+_0x1d7aa0['stack'])):_0x5bb8d1+=':\x20'+_0x1d7aa0,_0x4834a0(_0x5bb8d1);}});}}class IN extends Qe{constructor(_0x349d2b){super(_0x349d2b,'hierarchy');}['load'](_0x17f574,_0x2637a4){Gv['load'](_0x17f574,this['maxRetries'],_0x2637a4);}['open'](_0x239dae,_0x119866){this['_app']['systems']['script']['preloading']=!(-0x2345+0x1b8a+0x7bb);const _0x49cb62=new Qp(this['_app'],!(0xc*-0x5a+0x1*0x1e2b+-0x19f2))['parse'](_0x119866);return this['_app']['systems']['script']['preloading']=!(0x2578+0x189+0x4e0*-0x8),_0x49cb62;}}class LN extends Qe{constructor(_0x28b1ce){super(_0x28b1ce,'html'),h(this,'decoder',null);}['load'](_0x1fb4ba,_0x1748e1){typeof _0x1fb4ba=='string'&&(_0x1fb4ba={'load':_0x1fb4ba,'original':_0x1fb4ba}),ot['get'](_0x1fb4ba['load'],{'retry':this['maxRetries']>0x1f54+0x2d1+-0x2225,'maxRetries':this['maxRetries']},(_0x209ae5,_0x267bfc)=>{_0x209ae5?_0x1748e1('Error\x20load'+'ing\x20html\x20r'+'esource:\x20'+_0x1fb4ba['original']+'\x20['+_0x209ae5+']'):_0x1748e1(null,_0x267bfc);});}['openBinary'](_0x104522){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x104522);}}class RN extends Qe{constructor(_0x5bc932){super(_0x5bc932,'json'),h(this,'decoder',null);}['load'](_0x1e9165,_0x5c31ee){typeof _0x1e9165=='string'&&(_0x1e9165={'load':_0x1e9165,'original':_0x1e9165});const _0x38295b={'retry':this['maxRetries']>-0x1*-0xa8b+0x1*-0x16a+-0x921,'maxRetries':this['maxRetries']};_0x1e9165['load']['startsWith']('blob:')&&(_0x38295b['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x1e9165['load'],_0x38295b,(_0x3b142b,_0x2dc2c6)=>{_0x3b142b?_0x5c31ee('Error\x20load'+'ing\x20JSON\x20r'+'esource:\x20'+_0x1e9165['original']+'\x20['+_0x3b142b+']'):_0x5c31ee(null,_0x2dc2c6);});}['openBinary'](_0x211f6a){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),JSON['parse'](this['decoder']['decode'](_0x211f6a));}}class ON{constructor(){this['removeInva'+'lid']=!(0x132b+-0x1dd3+0xaa8),this['valid']=!(0x425+0x16fd+-0x1b22),this['enumValida'+'tors']={'occludeSpecular':this['_createEnu'+'mValidator']([Ay,id,Cy]),'cull':this['_createEnu'+'mValidator']([bt,ca,wo,W0]),'blendType':this['_createEnu'+'mValidator']([mp,_p,Zs,Cs,Fn,gp,sd,Sp,yp,vp,xp]),'depthFunc':this['_createEnu'+'mValidator']([$0,Gc,Hc,Sf,X0,q0,j0,Hi])};}['setInvalid'](_0x1b24ab,_0x296067){this['valid']=!(0xf3+0xa51+-0xb43),w['warn']('Ignoring\x20i'+'nvalid\x20Sta'+'ndardMater'+'ial\x20proper'+'ty:\x20'+_0x1b24ab,_0x296067[_0x1b24ab]),this['removeInva'+'lid']&&delete _0x296067[_0x1b24ab];}['validate'](_0x4008cd){const _0x266d68=Un,_0x1933af=FE,_0x36d781=_0x4008cd['mappingFor'+'mat']==='path';for(const _0x25916 in _0x4008cd){const _0x571c90=_0x266d68[_0x25916];if(!_0x571c90){_0x1933af[_0x25916]?delete _0x4008cd[_0x25916]:(w['warnOnce']('Ignoring\x20u'+'nsupported'+'\x20input\x20pro'+'perty\x20to\x20s'+'tandard\x20ma'+'terial:\x20'+_0x25916),this['valid']=!(0x1139+0x1d*-0x2c+-0x36*0x3a));continue;}if(_0x571c90['startsWith']('enum')){const _0x56c4ac=_0x571c90['split'](':')[0x18de+0x1*-0x981+-0xf5c];this['enumValida'+'tors'][_0x56c4ac]&&(this['enumValida'+'tors'][_0x56c4ac](_0x4008cd[_0x25916])||this['setInvalid'](_0x25916,_0x4008cd));}else{if(_0x571c90==='number')typeof _0x4008cd[_0x25916]!='number'&&this['setInvalid'](_0x25916,_0x4008cd);else{if(_0x571c90==='boolean')typeof _0x4008cd[_0x25916]!='boolean'&&this['setInvalid'](_0x25916,_0x4008cd);else{if(_0x571c90==='string')typeof _0x4008cd[_0x25916]!='string'&&this['setInvalid'](_0x25916,_0x4008cd);else{if(_0x571c90==='vec2')_0x4008cd[_0x25916]instanceof Array&&_0x4008cd[_0x25916]['length']===0x115d+-0x26*-0x107+-0x3865||this['setInvalid'](_0x25916,_0x4008cd);else{if(_0x571c90==='rgb')_0x4008cd[_0x25916]instanceof Array&&_0x4008cd[_0x25916]['length']===0x14e7*0x1+0x42b*-0x1+0x10b9*-0x1||this['setInvalid'](_0x25916,_0x4008cd);else{if(_0x571c90==='texture')_0x36d781?typeof _0x4008cd[_0x25916]=='string'||_0x4008cd[_0x25916]===null||_0x4008cd[_0x25916]instanceof _e||this['setInvalid'](_0x25916,_0x4008cd):typeof _0x4008cd[_0x25916]=='number'||_0x4008cd[_0x25916]===null||_0x4008cd[_0x25916]instanceof _e||this['setInvalid'](_0x25916,_0x4008cd);else{if(_0x571c90==='boundingbo'+'x')_0x4008cd[_0x25916]['center']&&_0x4008cd[_0x25916]['center']instanceof Array&&_0x4008cd[_0x25916]['center']['length']===-0x8bc+0x3c1*0x6+0x1*-0xdc7||this['setInvalid'](_0x25916,_0x4008cd),_0x4008cd[_0x25916]['halfExtent'+'s']&&_0x4008cd[_0x25916]['halfExtent'+'s']instanceof Array&&_0x4008cd[_0x25916]['halfExtent'+'s']['length']===0xf*-0x229+-0x29f+0x2309||this['setInvalid'](_0x25916,_0x4008cd);else{if(_0x571c90==='cubemap')typeof _0x4008cd[_0x25916]=='number'||_0x4008cd[_0x25916]===null||_0x4008cd[_0x25916]===void(-0x11cb+-0x5*0x273+0x1e0a)||_0x4008cd[_0x25916]instanceof _e&&_0x4008cd[_0x25916]['cubemap']||this['setInvalid'](_0x25916,_0x4008cd);else{if(_0x571c90==='chunks'){const _0x515467=Object['keys'](_0x4008cd[_0x25916]);for(let _0x124e02=0x96b*-0x1+-0x2355+0x2cc0;_0x124e02<_0x515467['length'];_0x124e02++)typeof _0x4008cd[_0x25916][_0x515467[_0x124e02]]!='string'&&this['setInvalid'](_0x515467[_0x124e02],_0x4008cd[_0x25916]);}else console['error']('Unknown\x20ma'+'terial\x20typ'+'e:\x20'+_0x571c90);}}}}}}}}}}return _0x4008cd['validated']=!(0xf3e*-0x1+0x25*0xe2+0x8b6*-0x2),this['valid'];}['_createEnu'+'mValidator'](_0x41e76e){return function(_0x270a10){return _0x41e76e['indexOf'](_0x270a10)>=-0x3ad*-0x7+-0xaf0+-0xecb;};}}class FN{constructor(){this['_validator']=null;}['parse'](_0x4f423b){const _0x1f05ba=this['migrate'](_0x4f423b),_0xe60662=this['_validate'](_0x1f05ba),_0x2f0d59=new Ut();return this['initialize'](_0x2f0d59,_0xe60662),_0x2f0d59;}['initialize'](_0x6b2b60,_0x6f2442){if(_0x6f2442['validated']||(_0x6f2442=this['_validate'](_0x6f2442)),_0x6f2442['chunks']&&_0x6f2442['chunks']&&Object['keys'](_0x6f2442['chunks'])['length']>-0x1f1e+-0x11*0x1cf+-0x1*-0x3ddd){const _0x8de762=_0x6b2b60['shaderChun'+'ks']['glsl'];Object['entries'](_0x6f2442['chunks'])['forEach'](([_0x241238,_0x171371])=>_0x8de762['set'](_0x241238,_0x171371));}for(const _0x4e4be6 in _0x6f2442){const _0x5e624d=Un[_0x4e4be6],_0x5b34d5=_0x6f2442[_0x4e4be6];if(_0x5e624d==='vec2')_0x6b2b60[_0x4e4be6]=new J(_0x5b34d5[-0x10db+-0x29*0x59+0x1f1c],_0x5b34d5[0x4dc*-0x2+0x9fb*-0x3+0x27aa]);else{if(_0x5e624d==='rgb')_0x6b2b60[_0x4e4be6]=new ie(_0x5b34d5[-0x1*-0x12e7+0x214d*0x1+-0xd*0x404],_0x5b34d5[-0x1787+0x2065+-0x8dd*0x1],_0x5b34d5[0x7*-0x193+0x1090+-0x589]);else{if(_0x5e624d==='texture')_0x5b34d5 instanceof _e?_0x6b2b60[_0x4e4be6]=_0x5b34d5:_0x6b2b60[_0x4e4be6]instanceof _e&&typeof _0x5b34d5=='number'&&_0x5b34d5>-0x2043*-0x1+-0x1*0x1d4b+-0x13*0x28||(_0x6b2b60[_0x4e4be6]=null);else{if(_0x5e624d==='cubemap')_0x5b34d5 instanceof _e?_0x6b2b60[_0x4e4be6]=_0x5b34d5:_0x6b2b60[_0x4e4be6]instanceof _e&&typeof _0x5b34d5=='number'&&_0x5b34d5>-0x1*0xe59+-0xff7*0x1+0x1e50||(_0x6b2b60[_0x4e4be6]=null),_0x4e4be6==='cubeMap'&&!_0x5b34d5&&(_0x6b2b60['prefiltere'+'dCubemaps']=null);else{if(_0x5e624d==='boundingbo'+'x'){const _0x14b17b=new D(_0x5b34d5['center'][0x153f+0x84a+-0x1d89],_0x5b34d5['center'][-0x76*-0x26+0xa26+-0x1ba9],_0x5b34d5['center'][0x1fd5+0x1*0x156a+-0x4d7*0xb]),_0x4bc083=new D(_0x5b34d5['halfExtent'+'s'][0x226e+-0x1a71+-0x7fd],_0x5b34d5['halfExtent'+'s'][0x23c4+-0x11e0+-0x11e3],_0x5b34d5['halfExtent'+'s'][-0x1758+0xabc+0xc9e]);_0x6b2b60[_0x4e4be6]=new De(_0x14b17b,_0x4bc083);}else _0x6b2b60[_0x4e4be6]=_0x6f2442[_0x4e4be6];}}}}}_0x6b2b60['update']();}['migrate'](_0xd78adf){_0xd78adf['shader']&&delete _0xd78adf['shader'],_0xd78adf['mapping_fo'+'rmat']&&(_0xd78adf['mappingFor'+'mat']=_0xd78adf['mapping_fo'+'rmat'],delete _0xd78adf['mapping_fo'+'rmat']);let _0x35312f;const _0x5473a4=[['bumpMapFac'+'tor','bumpiness'],['aoUvSet','aoMapUv'],['aoMapVerte'+'xColor','aoVertexCo'+'lor'],['diffuseMap'+'VertexColo'+'r','diffuseVer'+'texColor'],['emissiveMa'+'pVertexCol'+'or','emissiveVe'+'rtexColor'],['specularMa'+'pVertexCol'+'or','specularVe'+'rtexColor'],['metalnessM'+'apVertexCo'+'lor','metalnessV'+'ertexColor'],['opacityMap'+'VertexColo'+'r','opacityVer'+'texColor'],['glossMapVe'+'rtexColor','glossVerte'+'xColor'],['lightMapVe'+'rtexColor','lightVerte'+'xColor'],['specularMa'+'pTint','specularTi'+'nt'],['metalnessM'+'apTint','metalnessT'+'int'],['clearCoatG'+'lossiness','clearCoatG'+'loss']];for(_0x35312f=0xa66+-0xb3b+0x47*0x3;_0x35312f<_0x5473a4['length'];_0x35312f++){const _0x14203c=_0x5473a4[_0x35312f][-0x7*-0x106+-0x2*-0x877+-0x1818],_0x9905ce=_0x5473a4[_0x35312f][0x13*-0xad+-0x1*0x3c7+0x109f];_0xd78adf[_0x14203c]!==void(-0x11*0x216+-0x1d08+0x1a*0x27b)&&(_0xd78adf[_0x9905ce]===void(0x5ea*0x1+-0xbe*-0x7+-0xb1c)&&(_0xd78adf[_0x9905ce]=_0xd78adf[_0x14203c]),delete _0xd78adf[_0x14203c]);}const _0x1ca953=['fresnelFac'+'tor','shadowSamp'+'leType'];for(_0x35312f=0xa*-0x89+0x3b*0x23+-0x2b7;_0x35312f<_0x1ca953['length'];_0x35312f++){const _0x27fa49=_0x1ca953[_0x35312f];_0xd78adf['hasOwnProp'+'erty'](_0x27fa49)&&delete _0xd78adf[_0x27fa49];}return _0xd78adf;}['_validate'](_0x4fd868){return _0x4fd868['validated']||(this['_validator']||(this['_validator']=new ON()),this['_validator']['validate'](_0x4fd868)),_0x4fd868;}}const NN={'aoMap':'white','aoDetailMap':'white','diffuseMap':'gray','diffuseDetailMap':'gray','specularMap':'gray','specularityFactorMap':'white','metalnessMap':'black','glossMap':'gray','sheenMap':'black','sheenGlossMap':'gray','clearCoatMap':'black','clearCoatGlossMap':'gray','clearCoatNormalMap':'normal','refractionMap':'white','emissiveMap':'gray','normalMap':'normal','normalDetailMap':'normal','heightMap':'gray','opacityMap':'gray','sphereMap':'gray','lightMap':'white','thicknessMap':'black','iridescenceMap':'black','iridescenceThicknessMap':'black','envAtlas':'black','anisotropyMap':'black'};class kN extends Qe{constructor(_0x77a0cf){super(_0x77a0cf,'material'),this['_assets']=_0x77a0cf['assets'],this['_device']=_0x77a0cf['graphicsDe'+'vice'],this['_parser']=new FN();}['load'](_0x4f51f7,_0x4b80c6){typeof _0x4f51f7=='string'&&(_0x4f51f7={'load':_0x4f51f7,'original':_0x4f51f7}),ot['get'](_0x4f51f7['load'],{'retry':this['maxRetries']>0x1*-0x26b7+-0x21d5+0x4*0x1223,'maxRetries':this['maxRetries']},(_0x10cd09,_0xb6d4bf)=>{_0x10cd09?_0x4b80c6&&_0x4b80c6('Error\x20load'+'ing\x20materi'+'al:\x20'+_0x4f51f7['original']+'\x20['+_0x10cd09+']'):_0x4b80c6&&(_0xb6d4bf['_engine']=!(0x1dc5+-0x12d9+0x2*-0x576),_0x4b80c6(null,_0xb6d4bf));});}['open'](_0x3602f7,_0x225987){const _0x5a7bc1=this['_parser']['parse'](_0x225987);return _0x225987['_engine']&&(_0x5a7bc1['_data']=_0x225987,delete _0x225987['_engine']),_0x5a7bc1;}['patch'](_0x3fbf00,_0x1c3078){_0x3fbf00['resource']['_data']&&(_0x3fbf00['_data']=_0x3fbf00['resource']['_data'],delete _0x3fbf00['resource']['_data']),_0x3fbf00['data']['name']=_0x3fbf00['name'],_0x3fbf00['resource']['name']=_0x3fbf00['name'],this['_bindAndAs'+'signAssets'](_0x3fbf00,_0x1c3078),_0x3fbf00['off']('unload',this['_onAssetUn'+'load'],this),_0x3fbf00['on']('unload',this['_onAssetUn'+'load'],this);}['_onAssetUn'+'load'](_0x3b23fe){delete _0x3b23fe['data']['parameters'],delete _0x3b23fe['data']['chunks'],delete _0x3b23fe['data']['name'];}['_assignTex'+'ture'](_0x4f6c35,_0x557f19,_0x33937c){_0x557f19['resource'][_0x4f6c35]=_0x33937c;}['_getPlaceh'+'olderTextu'+'re'](_0x35c939){const _0x5d45ca=NN[_0x35c939];return w['assert'](_0x5d45ca,'No\x20placeho'+'lder\x20textu'+'re\x20found\x20f'+'or\x20paramet'+'er:\x20'+_0x35c939),oa(this['_device'],_0x5d45ca);}['_assignPla'+'ceholderTe'+'xture'](_0x244278,_0x4a73ad){_0x4a73ad['resource'][_0x244278]=this['_getPlaceh'+'olderTextu'+'re'](_0x244278);}['_onTexture'+'Load'](_0x5dc207,_0x172310,_0x2b2192){this['_assignTex'+'ture'](_0x5dc207,_0x172310,_0x2b2192['resource']),_0x172310['resource']['update']();}['_onTexture'+'Add'](_0x24d9a2,_0x57e7bc,_0x5af89d){this['_assets']['load'](_0x5af89d);}['_onTexture'+'RemoveOrUn'+'load'](_0x11e425,_0x84d0d4,_0x4d8052){const _0x3b9d4f=_0x84d0d4['resource'];_0x3b9d4f&&_0x84d0d4['resource'][_0x11e425]===_0x4d8052['resource']&&(this['_assignPla'+'ceholderTe'+'xture'](_0x11e425,_0x84d0d4),_0x3b9d4f['update']());}['_assignCub'+'emap'](_0xc844e5,_0x4939bb,_0x514fcb){if(_0x4939bb['resource'][_0xc844e5]=_0x514fcb[0x170f+0x200d+-0x371c],_0xc844e5==='cubeMap'){const _0x4c37c4=_0x514fcb['slice'](-0xf03+-0xcf*0x6+0x1*0x13de);_0x4c37c4['every'](_0xddd5ba=>_0xddd5ba)?_0x4939bb['resource']['prefiltere'+'dCubemaps']=_0x4c37c4:_0x4c37c4[-0x1490+0x3*0x2b+-0x41*-0x4f]&&(_0x4939bb['resource']['envAtlas']=_0x4c37c4[0x33e*0xc+0x1*0x9b4+-0x309c]);}}['_onCubemap'+'Load'](_0x2feab3,_0x314d26,_0x484fff){this['_assignCub'+'emap'](_0x2feab3,_0x314d26,_0x484fff['resources']),this['_parser']['initialize'](_0x314d26['resource'],_0x314d26['data']);}['_onCubemap'+'Add'](_0x19c16f,_0x56856f,_0x122f4e){this['_assets']['load'](_0x122f4e);}['_onCubemap'+'RemoveOrUn'+'load'](_0x873605,_0x22f257,_0x12c914){const _0x4b6688=_0x22f257['resource'];_0x22f257['data']['prefiltere'+'dCubeMap12'+'8']===_0x12c914['resources'][-0x2*0x93c+0x1d*-0x25+0x16aa]&&(this['_assignCub'+'emap'](_0x873605,_0x22f257,[null,null,null,null,null,null,null]),_0x4b6688['update']());}['_bindAndAs'+'signAssets'](_0x3a6b82,_0x5c589){const _0xc20ac0=this['_parser']['migrate'](_0x3a6b82['data']),_0x1a5778=_0x3a6b82['resource'],_0x3b243b=_0xc20ac0['mappingFor'+'mat']==='path',_0x10221f=ad;let _0x54e95a,_0x2cf711,_0x59ce4e;for(_0x54e95a=-0x1*0xd8a+0xe57*0x1+0x29*-0x5;_0x54e95a<_0x10221f['length'];_0x54e95a++){_0x2cf711=_0x10221f[_0x54e95a],_0x59ce4e=_0x1a5778['_assetRefe'+'rences'][_0x2cf711];const _0x54a871=_0xc20ac0[_0x2cf711],_0x49d6ca=_0x1a5778[_0x2cf711],_0x19e32e=_0x49d6ca===this['_getPlaceh'+'olderTextu'+'re'](_0x2cf711),_0x5e785e=_0xc20ac0['validated'];_0x54a871&&(!_0x49d6ca||!_0x5e785e||_0x19e32e)?(_0x59ce4e||(_0x59ce4e=new rl(_0x2cf711,_0x3a6b82,_0x5c589,{'load':this['_onTexture'+'Load'],'add':this['_onTexture'+'Add'],'remove':this['_onTexture'+'RemoveOrUn'+'load'],'unload':this['_onTexture'+'RemoveOrUn'+'load']},this),_0x1a5778['_assetRefe'+'rences'][_0x2cf711]=_0x59ce4e),_0x3b243b?_0x59ce4e['url']=_0x3a6b82['getAbsolut'+'eUrl'](_0x54a871):_0x59ce4e['id']=_0x54a871,_0x59ce4e['asset']&&(_0x59ce4e['asset']['resource']?this['_assignTex'+'ture'](_0x2cf711,_0x3a6b82,_0x59ce4e['asset']['resource']):this['_assignPla'+'ceholderTe'+'xture'](_0x2cf711,_0x3a6b82),_0x5c589['load'](_0x59ce4e['asset']))):_0x59ce4e&&(_0x3b243b?_0x59ce4e['url']=null:_0x59ce4e['id']=null);}const _0x2949df=Bp;for(_0x54e95a=0x1774+-0x1098+-0x1b7*0x4;_0x54e95a<_0x2949df['length'];_0x54e95a++)_0x2cf711=_0x2949df[_0x54e95a],_0x59ce4e=_0x1a5778['_assetRefe'+'rences'][_0x2cf711],_0xc20ac0[_0x2cf711]&&!_0x3a6b82['data']['prefiltere'+'dCubeMap12'+'8']&&(_0x59ce4e||(_0x59ce4e=new rl(_0x2cf711,_0x3a6b82,_0x5c589,{'load':this['_onCubemap'+'Load'],'add':this['_onCubemap'+'Add'],'remove':this['_onCubemap'+'RemoveOrUn'+'load'],'unload':this['_onCubemap'+'RemoveOrUn'+'load']},this),_0x1a5778['_assetRefe'+'rences'][_0x2cf711]=_0x59ce4e),_0x3b243b?_0x59ce4e['url']=_0xc20ac0[_0x2cf711]:_0x59ce4e['id']=_0xc20ac0[_0x2cf711],_0x59ce4e['asset']&&(_0x59ce4e['asset']['loaded']&&this['_assignCub'+'emap'](_0x2cf711,_0x3a6b82,_0x59ce4e['asset']['resources']),_0x5c589['load'](_0x59ce4e['asset'])));this['_parser']['initialize'](_0x1a5778,_0xc20ac0);}}class UN{constructor(_0x18caaa){this['_device']=_0x18caaa['device'],this['_defaultMa'+'terial']=_0x18caaa['defaultMat'+'erial'],this['_assets']=_0x18caaa['assets'];}['parse'](_0x8ce0d2,_0x5c7c3f,_0x36d40d){mh['parse']('filename.g'+'lb','',_0x8ce0d2,this['_device'],this['_assets'],(_0x36d40d==null?void(-0x11*-0x1a7+-0x4dc*-0x2+-0x1*0x25cf):_0x36d40d['options'])??{},(_0x441b80,_0xbaae99)=>{if(_0x441b80)_0x5c7c3f(_0x441b80);else{const _0x43bb8f=mr['createMode'+'l'](_0xbaae99,this['_defaultMa'+'terial']);_0xbaae99['destroy'](),_0x5c7c3f(null,_0x43bb8f);}});}}const BN={'points':Vh,'lines':Gh,'lineloop':OS,'linestrip':FS,'triangles':qs,'trianglestrip':vr,'trianglefan':sa},zN={'int8':Hh,'uint8':ia,'int16':Wh,'uint16':_l,'int32':zS,'uint32':Vo,'float32':Ve};class VN{constructor(_0x1d75bf){this['_device']=_0x1d75bf['device'],this['_defaultMa'+'terial']=_0x1d75bf['defaultMat'+'erial'];}['parse'](_0x4c46b7,_0x4d1450){const _0x3f050a=_0x4c46b7['model'];if(!_0x3f050a){_0x4d1450(null,null);return;}if(_0x3f050a['version']<=0x564+0xe56+-0x13b9){_0x4d1450('JsonModelP'+'arser#pars'+'e:\x20Trying\x20'+'to\x20parse\x20u'+'nsupported'+'\x20model\x20for'+'mat.');return;}const _0x28bb8b=this['_parseNode'+'s'](_0x4c46b7),_0x78a360=this['_parseSkin'+'s'](_0x4c46b7,_0x28bb8b),_0xdd1d7e=this['_parseVert'+'exBuffers'](_0x4c46b7),_0x2a6e90=this['_parseInde'+'xBuffers'](_0x4c46b7,_0xdd1d7e),_0x4261e9=this['_parseMorp'+'hs'](_0x4c46b7,_0x28bb8b,_0xdd1d7e),_0x190394=this['_parseMesh'+'es'](_0x4c46b7,_0x78a360['skins'],_0x4261e9['morphs'],_0xdd1d7e,_0x2a6e90['buffer'],_0x2a6e90['data']),_0x3eb2c1=this['_parseMesh'+'Instances'](_0x4c46b7,_0x28bb8b,_0x190394,_0x78a360['skins'],_0x78a360['instances'],_0x4261e9['morphs'],_0x4261e9['instances']),_0x279044=new tr();_0x279044['graph']=_0x28bb8b[0x86d*-0x3+-0x30*0x91+0x197*0x21],_0x279044['meshInstan'+'ces']=_0x3eb2c1,_0x279044['skinInstan'+'ces']=_0x78a360['instances'],_0x279044['morphInsta'+'nces']=_0x4261e9['instances'],_0x279044['getGraph']()['syncHierar'+'chy'](),_0x4d1450(null,_0x279044);}['_parseNode'+'s'](_0x27fc7e){const _0x5d0621=_0x27fc7e['model'],_0x3f9fed=[];let _0x2e7607;for(_0x2e7607=-0x1de9+0xba6+0x1243;_0x2e7607<_0x5d0621['nodes']['length'];_0x2e7607++){const _0x917bc7=_0x5d0621['nodes'][_0x2e7607],_0x1f147c=new Ie(_0x917bc7['name']);_0x1f147c['setLocalPo'+'sition'](_0x917bc7['position'][-0x1b40+0x5*0x6b+0x863*0x3],_0x917bc7['position'][0xe59*0x1+0x211d+-0x1*0x2f75],_0x917bc7['position'][0x20b2+0xbf*0x17+-0x31d9]),_0x1f147c['setLocalEu'+'lerAngles'](_0x917bc7['rotation'][0x669*-0x6+0x319+0x235d],_0x917bc7['rotation'][-0x139d*0x1+0x1196+0x208*0x1],_0x917bc7['rotation'][-0x1b1*-0x10+-0x92d+-0x11e1]),_0x1f147c['setLocalSc'+'ale'](_0x917bc7['scale'][0xfe2*-0x1+0x20a5*-0x1+0x3087],_0x917bc7['scale'][0x2c9*-0x7+0x89f+0x1*0xae1],_0x917bc7['scale'][0x23c4+-0x243e+0x7c]),_0x1f147c['scaleCompe'+'nsation']=!!_0x917bc7['scaleCompe'+'nsation'],_0x3f9fed['push'](_0x1f147c);}for(_0x2e7607=-0x3d5*-0x8+-0x743+-0x1764;_0x2e7607<_0x5d0621['parents']['length'];_0x2e7607++)_0x3f9fed[_0x5d0621['parents'][_0x2e7607]]['addChild'](_0x3f9fed[_0x2e7607]);return _0x3f9fed;}['_parseSkin'+'s'](_0x49be49,_0xb681e9){const _0x5d7b9a=_0x49be49['model'],_0x56d261=[],_0x25a8e8=[];let _0x2d3410,_0x21682c;for(_0x2d3410=0x14*-0x9e+-0x4a6+0x10fe;_0x2d3410<_0x5d7b9a['skins']['length'];_0x2d3410++){const _0x21e3df=_0x5d7b9a['skins'][_0x2d3410],_0x3d4bd9=[];for(_0x21682c=-0xccb+-0x5f*0x2b+-0x1*-0x1cc0;_0x21682c<_0x21e3df['inverseBin'+'dMatrices']['length'];_0x21682c++){const _0x50afa6=_0x21e3df['inverseBin'+'dMatrices'][_0x21682c];_0x3d4bd9[_0x21682c]=new te()['set'](_0x50afa6);}const _0x4bdbad=new Ky(this['_device'],_0x3d4bd9,_0x21e3df['boneNames']);_0x56d261['push'](_0x4bdbad);const _0xb9f19e=new xl(_0x4bdbad),_0x4e8aff=[];for(_0x21682c=0x7e*-0x12+0x1ce1+-0x29*0x7d;_0x21682c<_0x4bdbad['boneNames']['length'];_0x21682c++){const _0x42b737=_0x4bdbad['boneNames'][_0x21682c],_0x589d0b=_0xb681e9[0x8d*0x33+-0x13*0x25+-0x1958]['findByName'](_0x42b737);_0x4e8aff['push'](_0x589d0b);}_0xb9f19e['bones']=_0x4e8aff,_0x25a8e8['push'](_0xb9f19e);}return{'skins':_0x56d261,'instances':_0x25a8e8};}['_getMorphV'+'ertexCount'](_0x3fa9e5,_0x52fc98,_0x588229){for(let _0xa95019=-0xf90+0x1858+-0x8c8;_0xa95019<_0x3fa9e5['meshes']['length'];_0xa95019++){const _0x4bcec6=_0x3fa9e5['meshes'][_0xa95019];if(_0x4bcec6['morph']===_0x52fc98)return _0x588229[_0x4bcec6['vertices']]['numVertice'+'s'];}}['_parseMorp'+'hs'](_0x4ece71,_0x2ef07d,_0x483820){const _0x2d436c=_0x4ece71['model'],_0xd2eb07=[],_0x194f5a=[];let _0xc3d072,_0x3be24f,_0x47de03,_0x40ce9e,_0x4993c3,_0x378abd;if(_0x2d436c['morphs']){const _0x46d8b3=function(_0x437171,_0x2131e,_0x1381f9){const _0x4c2369=new Float32Array(_0x1381f9*(-0x3*-0x6c5+0x545*0x2+0x1*-0x1ed6));for(let _0x1c987a=0x1334+0x1c64+-0x2f98;_0x1c987a<_0x2131e['length'];_0x1c987a++){const _0x51405a=_0x2131e[_0x1c987a]*(-0x2c*-0x49+-0x140b+-0x1f*-0x3e);_0x4c2369[_0x51405a]=_0x437171[_0x1c987a*(-0xd7c*-0x2+-0x1ff+0x2*-0xc7b)],_0x4c2369[_0x51405a+(-0x189b+0x1553*0x1+-0x349*-0x1)]=_0x437171[_0x1c987a*(0x5f8*-0x2+-0x1abb+0x1357*0x2)+(-0x1813+0x21c3+-0x43*0x25)],_0x4c2369[_0x51405a+(-0x521+0x1dda+0x83d*-0x3)]=_0x437171[_0x1c987a*(-0x777*0x1+-0x8*0x1e9+0x16c2)+(-0x2220+0xe21+0x1401)];}return _0x4c2369;};for(_0xc3d072=-0x3*0x32b+0x4*-0x9aa+0x3029;_0xc3d072<_0x2d436c['morphs']['length'];_0xc3d072++){for(_0x40ce9e=_0x2d436c['morphs'][_0xc3d072]['targets'],_0x378abd=[],_0x47de03=this['_getMorphV'+'ertexCount'](_0x2d436c,_0xc3d072,_0x483820),_0x3be24f=0x2*0xeca+-0x1*0x1ddf+0x4b;_0x3be24f<_0x40ce9e['length'];_0x3be24f++){const _0xb72ca8=_0x40ce9e[_0x3be24f]['aabb'],_0x143f9e=_0xb72ca8['min'],_0x5cff0d=_0xb72ca8['max'],_0x3403f1=new De(new D((_0x5cff0d[-0x1d*-0x4b+0x15e7+-0x6*0x511]+_0x143f9e[-0x1*0x1f53+0x1874+0x6df*0x1])*(0x1*-0xcab+-0x785+-0x98*-0x22+0.5),(_0x5cff0d[-0x1*-0x1a43+-0x1049+-0x45*0x25]+_0x143f9e[0x1e94+-0x4*-0x990+-0x44d3])*(0x2*-0x189+0x2eb+0x3*0xd+0.5),(_0x5cff0d[0x1*0x20a7+-0x50*-0x16+-0x2785]+_0x143f9e[0x6db+0x5*-0x48b+0x3*0x54a])*(0x3c9*0x4+-0x33*0x99+0xf57+0.5)),new D((_0x5cff0d[-0x267*-0xd+0x1dee*-0x1+-0x14d]-_0x143f9e[-0x216d+0x1c13*-0x1+0x52*0xc0])*(-0x565*-0x6+0x18a*-0x1+0x7b5*-0x4+0.5),(_0x5cff0d[-0x22*-0x67+0xf0d*-0x1+0x160]-_0x143f9e[0x1f*0x11d+0x8*0x410+0x1*-0x4302])*(-0x88+0x58*0x17+-0x3b*0x20+0.5),(_0x5cff0d[-0x1854+0x20b7*-0x1+-0x17*-0x27b]-_0x143f9e[-0x3*-0x2eb+0x2106+0x11*-0x275])*(-0x28*0x8c+0x1fa3+-0x11*0x93+0.5))),_0xe6a8b8=_0x40ce9e[_0x3be24f]['indices'];let _0x2fd817=_0x40ce9e[_0x3be24f]['deltaPosit'+'ions'],_0x4af991=_0x40ce9e[_0x3be24f]['deltaNorma'+'ls'];_0xe6a8b8&&(_0x2fd817=_0x46d8b3(_0x2fd817,_0xe6a8b8,_0x47de03),_0x4af991=_0x46d8b3(_0x4af991,_0xe6a8b8,_0x47de03)),_0x4993c3=new od({'deltaPositions':_0x2fd817,'deltaNormals':_0x4af991,'name':_0x40ce9e[_0x3be24f]['name'],'aabb':_0x3403f1}),_0x378abd['push'](_0x4993c3);}const _0x5751d0=new Gp(_0x378abd,this['_device']);_0xd2eb07['push'](_0x5751d0);const _0xf3106f=new _a(_0x5751d0);_0x194f5a['push'](_0xf3106f);}}return{'morphs':_0xd2eb07,'instances':_0x194f5a};}['_parseVert'+'exBuffers'](_0x2e261f){const _0x54e8e3=_0x2e261f['model'],_0x2affd5=[],_0x323782={'position':Pe,'normal':gs,'tangent':yi,'blendWeight':gi,'blendIndices':us,'color':Wt,'texCoord0':is,'texCoord1':va,'texCoord2':hl,'texCoord3':dl,'texCoord4':fl,'texCoord5':ul,'texCoord6':pl,'texCoord7':ml};for(let _0x21644a=0xf5e*-0x2+-0x16e5+0x1*0x35a1;_0x21644a<_0x54e8e3['vertices']['length'];_0x21644a++){const _0x469643=_0x54e8e3['vertices'][_0x21644a],_0x21e142=[];for(const _0x4bf055 in _0x469643){const _0x4f0267=_0x469643[_0x4bf055];_0x21e142['push']({'semantic':_0x323782[_0x4bf055],'components':_0x4f0267['components'],'type':zN[_0x4f0267['type']],'normalize':_0x323782[_0x4bf055]===Wt});}const _0x596779=new kt(this['_device'],_0x21e142),_0x3e3ef5=_0x469643['position']['data']['length']/_0x469643['position']['components'],_0x56a78b=new Ds(this['_device'],_0x596779,_0x3e3ef5),_0x541bc2=new Ao(_0x56a78b);for(let _0x20c5e8=-0x1*-0x1d53+-0x774+-0x1fd*0xb;_0x20c5e8<_0x3e3ef5;_0x20c5e8++){for(const _0x4a2257 in _0x469643){const _0x3a8f28=_0x469643[_0x4a2257];switch(_0x3a8f28['components']){case-0xe21+-0x195+-0x1*-0xfb7:_0x541bc2['element'][_0x323782[_0x4a2257]]['set'](_0x3a8f28['data'][_0x20c5e8]);break;case 0x1c1*-0x9+-0x93*-0x9+0xa0*0x11:_0x541bc2['element'][_0x323782[_0x4a2257]]['set'](_0x3a8f28['data'][_0x20c5e8*(-0x21ef+0xcd*-0x11+0xfda*0x3)],0x317*0x2+0x3f1*0x9+0x1*-0x29a6-_0x3a8f28['data'][_0x20c5e8*(-0x48a*-0x1+0x4*-0x6dc+-0x2*-0xb74)+(0xdb*-0x9+-0x1379+0x1*0x1b2d)]);break;case-0x152+-0x17c0+0x1915:_0x541bc2['element'][_0x323782[_0x4a2257]]['set'](_0x3a8f28['data'][_0x20c5e8*(0x1*-0xe99+0x56*-0x1c+0xc02*0x2)],_0x3a8f28['data'][_0x20c5e8*(0x15b9*-0x1+0x139d*0x1+0x21f)+(0x45a*0x2+-0x17e9+-0x76*-0x21)],_0x3a8f28['data'][_0x20c5e8*(0x116b+-0x4*-0x691+-0x2bac)+(-0xe62+-0xa67+0x18cb)]);break;case-0xb5a+-0x22b9+0x9*0x51f:_0x541bc2['element'][_0x323782[_0x4a2257]]['set'](_0x3a8f28['data'][_0x20c5e8*(-0x1538+-0x2194+-0x36d*-0x10)],_0x3a8f28['data'][_0x20c5e8*(-0x1dc7+-0x800*-0x1+0x31d*0x7)+(0xdb2+0x1195*0x1+-0x1f46)],_0x3a8f28['data'][_0x20c5e8*(0x118c+0x1*0x2319+-0x34a1)+(0x205b+0xc6d*-0x1+0x352*-0x6)],_0x3a8f28['data'][_0x20c5e8*(-0xdee+0x261b*0x1+-0x1829)+(0x1*-0x607+0x60a+0x0)]);break;}}_0x541bc2['next']();}_0x541bc2['end'](),_0x2affd5['push'](_0x56a78b);}return _0x2affd5;}['_parseInde'+'xBuffers'](_0x259bbd,_0x34b193){const _0x32a245=_0x259bbd['model'];let _0x17c969=null,_0x32649e=null,_0x20e30f,_0x5867e2=-0x17*0x99+-0x8*0x216+0x1e6f;for(_0x20e30f=0x1078+-0x5*-0x3fa+-0x34e*0xb;_0x20e30f<_0x32a245['meshes']['length'];_0x20e30f++){const _0x5191a5=_0x32a245['meshes'][_0x20e30f];_0x5191a5['indices']!==void(-0xa*-0x244+0x1bb5+-0x325d)&&(_0x5867e2+=_0x5191a5['indices']['length']);}let _0x5abb7b=-0x993+-0x1da0+0x3*0xd11;for(_0x20e30f=-0x1f1+0x2f3+-0x102*0x1;_0x20e30f<_0x34b193['length'];_0x20e30f++)_0x5abb7b=Math['max'](_0x5abb7b,_0x34b193[_0x20e30f]['numVertice'+'s']);return _0x5867e2>0x6a*0x25+-0x1d*-0x25+-0x1383&&(_0x5abb7b>0x1b24a*0x1+-0x1dd7d*-0x1+-0x8328*0x5?(_0x17c969=new xr(this['_device'],yr,_0x5867e2),_0x32649e=new Uint32Array(_0x17c969['lock']())):(_0x17c969=new xr(this['_device'],ji,_0x5867e2),_0x32649e=new Uint16Array(_0x17c969['lock']()))),{'buffer':_0x17c969,'data':_0x32649e};}['_parseMesh'+'es'](_0x500af9,_0x462afc,_0x2ae18d,_0x1b5a6c,_0x264630,_0x52c651){const _0x313423=_0x500af9['model'],_0x4f3188=[];let _0x164abb=-0x2b0+0x1ec1+0xf*-0x1df;for(let _0x296057=0x512+-0x26aa+-0xc8*-0x2b;_0x296057<_0x313423['meshes']['length'];_0x296057++){const _0x2dfee6=_0x313423['meshes'][_0x296057],_0x1a6979=_0x2dfee6['aabb'],_0x1a3a69=_0x1a6979['min'],_0x14ac5b=_0x1a6979['max'],_0x5833ad=new De(new D((_0x14ac5b[0x2a*-0x97+0x21da+0x914*-0x1]+_0x1a3a69[-0x62e*0x2+0x17cb*-0x1+0x73b*0x5])*(-0x17e+-0xfcc+0x114a+0.5),(_0x14ac5b[-0x63c+-0x118+0x755]+_0x1a3a69[0x1dbe+-0x1*-0x2357+-0x4114])*(0x1715+0x25a6+0x1*-0x3cbb+0.5),(_0x14ac5b[-0x1*0x1a57+-0x7*0x112+0x21d7]+_0x1a3a69[-0x2*0xb30+0x79c*-0x1+-0x1*-0x1dfe])*(0x1c13+-0x170b+-0x508+0.5)),new D((_0x14ac5b[-0x1815+-0x139c+0x8bd*0x5]-_0x1a3a69[-0xc87+0x4db*0x2+0x7*0x67])*(0x779+-0x210b+0x1992+0.5),(_0x14ac5b[-0x2248+-0x5*-0x456+0xc9b]-_0x1a3a69[-0x1af*-0x1+0x535*0x1+-0x6e3])*(0x1fb1+0x4fd+-0x24ae+0.5),(_0x14ac5b[0x1*0x51a+0x17c0+-0x1cd8]-_0x1a3a69[-0x756+0x1*0x1+0x757])*(0xce7+0xcc9+-0x19b0+0.5))),_0xbb171b=_0x2dfee6['indices']!==void(-0x1552+0x2*-0x1bd+0x18cc),_0x3802d7=new Ge(this['_device']);_0x3802d7['vertexBuff'+'er']=_0x1b5a6c[_0x2dfee6['vertices']],_0x3802d7['indexBuffe'+'r'][0x3c*-0x2d+-0x26b*0x1+0xcf7]=_0xbb171b?_0x264630:null,_0x3802d7['primitive'][-0x13*-0xf9+0x133*0xa+-0x1e79]['type']=BN[_0x2dfee6['type']],_0x3802d7['primitive'][-0xf*-0x89+0x1322+-0x11*0x199]['base']=_0xbb171b?_0x2dfee6['base']+_0x164abb:_0x2dfee6['base'],_0x3802d7['primitive'][-0x1750+-0x1782+0x2ed2]['count']=_0x2dfee6['count'],_0x3802d7['primitive'][0x1*0x1233+-0x14a2+-0x1*-0x26f]['indexed']=_0xbb171b,_0x3802d7['skin']=_0x2dfee6['skin']!==void(-0x1f91*0x1+0x2a9*-0xb+-0x3cd4*-0x1)?_0x462afc[_0x2dfee6['skin']]:null,_0x3802d7['morph']=_0x2dfee6['morph']!==void(-0x26af+0x7*0x141+-0x3a*-0x84)?_0x2ae18d[_0x2dfee6['morph']]:null,_0x3802d7['aabb']=_0x5833ad,_0xbb171b&&(_0x52c651['set'](_0x2dfee6['indices'],_0x164abb),_0x164abb+=_0x2dfee6['indices']['length']),_0x4f3188['push'](_0x3802d7);}return _0x264630!==null&&_0x264630['unlock'](),_0x4f3188;}['_parseMesh'+'Instances'](_0x26ee16,_0x49fc39,_0x482e91,_0x1d7c76,_0x27c532,_0x145352,_0x241bde){const _0x5c55d6=_0x26ee16['model'],_0x3c5939=[];let _0x286a8f;for(_0x286a8f=0x1e2d+0x767+0x12ca*-0x2;_0x286a8f<_0x5c55d6['meshInstan'+'ces']['length'];_0x286a8f++){const _0x4aef2a=_0x5c55d6['meshInstan'+'ces'][_0x286a8f],_0x14b9c8=_0x49fc39[_0x4aef2a['node']],_0x1d05c8=_0x482e91[_0x4aef2a['mesh']],_0x204034=new He(_0x1d05c8,this['_defaultMa'+'terial'],_0x14b9c8);if(_0x1d05c8['skin']){const _0x4a7ceb=_0x1d7c76['indexOf'](_0x1d05c8['skin']);if(_0x4a7ceb===-(-0x4*-0x829+-0x36e*0x7+0x1*-0x8a1))throw new Error('Mesh\x27s\x20ski'+'n\x20does\x20not'+'\x20appear\x20in'+'\x20skin\x20arra'+'y.');_0x204034['skinInstan'+'ce']=_0x27c532[_0x4a7ceb];}if(_0x1d05c8['morph']){const _0x434da7=_0x145352['indexOf'](_0x1d05c8['morph']);if(_0x434da7===-(-0x3c1+-0x1*0x85f+0xc21))throw new Error('Mesh\x27s\x20mor'+'ph\x20does\x20no'+'t\x20appear\x20i'+'n\x20morph\x20ar'+'ray.');_0x204034['morphInsta'+'nce']=_0x241bde[_0x434da7];}_0x3c5939['push'](_0x204034);}return _0x3c5939;}}class GN extends Qe{constructor(_0x1dfd80){super(_0x1dfd80,'model'),this['_parsers']=[],this['device']=_0x1dfd80['graphicsDe'+'vice'],this['assets']=_0x1dfd80['assets'],this['defaultMat'+'erial']=$n(this['device']),this['addParser'](new VN(this),(_0x13546d,_0x2b7caf)=>xe['getExtensi'+'on'](_0x13546d)==='.json'),this['addParser'](new UN(this),(_0x4f269b,_0x39179f)=>xe['getExtensi'+'on'](_0x4f269b)==='.glb');}['load'](_0x3a4a73,_0x3e2491,_0x987a14){typeof _0x3a4a73=='string'&&(_0x3a4a73={'load':_0x3a4a73,'original':_0x3a4a73});const _0x3258f3={'retry':this['maxRetries']>0x9f+-0x9b9+-0x91a*-0x1,'maxRetries':this['maxRetries']};(_0x3a4a73['load']['startsWith']('blob:')||_0x3a4a73['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x3a4a73['original'])['toLowerCas'+'e']()==='.glb'?_0x3258f3['responseTy'+'pe']=Is['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x3258f3['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x3a4a73['load'],_0x3258f3,(_0x7bec92,_0x9ea8b2)=>{if(_0x3e2491){if(_0x7bec92)_0x3e2491('Error\x20load'+'ing\x20model:'+'\x20'+_0x3a4a73['original']+'\x20['+_0x7bec92+']');else{for(let _0x2be2f3=-0x277*0x1+0x11fb*-0x2+-0x445*-0x9;_0x2be2f3<this['_parsers']['length'];_0x2be2f3++){const _0x12e8c9=this['_parsers'][_0x2be2f3];if(_0x12e8c9['decider'](_0x3a4a73['original'],_0x9ea8b2)){_0x12e8c9['parser']['parse'](_0x9ea8b2,(_0x43c56f,_0x28279f)=>{_0x43c56f?_0x3e2491(_0x43c56f):_0x3e2491(null,_0x28279f);},_0x987a14);return;}}_0x3e2491('No\x20parsers'+'\x20found');}}});}['open'](_0x4ac6a1,_0x3d814c){return _0x3d814c;}['patch'](_0x2c7306,_0x268136){if(!_0x2c7306['resource'])return;const _0x10057d=_0x2c7306['data'],_0xcd2046=this;_0x2c7306['resource']['meshInstan'+'ces']['forEach']((_0x3398a1,_0x2a2034)=>{if(_0x10057d['mapping']){const _0x455c1e=function(_0xae71a7){_0xae71a7['resource']?_0x3398a1['material']=_0xae71a7['resource']:(_0xae71a7['once']('load',_0x455c1e),_0x268136['load'](_0xae71a7)),_0xae71a7['once']('remove',_0x28a997=>{_0x3398a1['material']===_0x28a997['resource']&&(_0x3398a1['material']=_0xcd2046['defaultMat'+'erial']);});};if(!_0x10057d['mapping'][_0x2a2034]){_0x3398a1['material']=_0xcd2046['defaultMat'+'erial'];return;}const _0x67543a=_0x10057d['mapping'][_0x2a2034]['material'],_0xa335b7=_0x10057d['mapping'][_0x2a2034]['path'];let _0x451585;if(_0x67543a!==void(0xb*0x344+0x102*0x12+0x5*-0xad0))_0x67543a?(_0x451585=_0x268136['get'](_0x67543a),_0x451585?_0x455c1e(_0x451585):_0x268136['once']('add:'+_0x67543a,_0x455c1e)):_0x3398a1['material']=_0xcd2046['defaultMat'+'erial'];else{if(_0xa335b7){const _0x25c654=_0x2c7306['getAbsolut'+'eUrl'](_0x10057d['mapping'][_0x2a2034]['path']);_0x451585=_0x268136['getByUrl'](_0x25c654),_0x451585?_0x455c1e(_0x451585):_0x268136['once']('add:url:'+_0x25c654,_0x455c1e);}}}});}['addParser'](_0x4ff7c4,_0x2d3a2c){this['_parsers']['push']({'parser':_0x4ff7c4,'decider':_0x2d3a2c});}}class HN extends Qe{constructor(_0x3ab083){super(_0x3ab083,'scene');}['load'](_0x54f422,_0x177c0d){Gv['load'](_0x54f422,this['maxRetries'],_0x177c0d);}['open'](_0x124678,_0x5b5250){this['_app']['systems']['script']['preloading']=!(-0x21b0+-0x1a5*0x1+0x2355);const _0x299225=new Qp(this['_app'],!(-0x476+-0x75d+0xbd4*0x1))['parse'](_0x5b5250),_0xcd2a2c=this['_app']['scene'];return _0xcd2a2c['root']=_0x299225,this['_app']['applyScene'+'Settings'](_0x5b5250['settings']),this['_app']['systems']['script']['preloading']=!(0x1a40+-0x65+-0x89e*0x3),_0xcd2a2c;}}const bh=class bh{static['push'](_0x1b6f1d){bh['_types']['push'](_0x1b6f1d);}};h(bh,'_types',[]);let ea=bh;const WN=new Set(['system','entity','create','destroy','swap','move','data','scripts','_scripts','_scriptsIn'+'dex','_scriptsDa'+'ta','enabled','_oldState','onEnable','onDisable','onPostStat'+'eChange','_onSetEnab'+'led','_checkStat'+'e','_onBeforeR'+'emove','_onInitial'+'izeAttribu'+'tes','_onInitial'+'ize','_onPostIni'+'tialize','_onUpdate','_onPostUpd'+'ate','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']),$N={};al['reservedNa'+'mes']['forEach']((_0x3839d9,_0x36c2f1,_0x3bd074)=>{$N[_0x3839d9]=0x635+0x658+-0xc8c;});function XN(_0x345f46,_0x112b00,_0x1a035e){if(typeof _0x345f46!='function')throw new Error('script\x20cla'+'ss:\x20\x27'+_0x345f46+('\x27\x20must\x20be\x20'+'a\x20construc'+'tor\x20functi'+'on\x20(i.e.\x20c'+'lass).'));if(!(_0x345f46['prototype']instanceof ts))throw new Error('script\x20cla'+'ss:\x20\x27'+Lo['__getScrip'+'tName'](_0x345f46)+('\x27\x20does\x20not'+'\x20extend\x20pc'+'.Script.'));if(_0x112b00=_0x112b00||_0x345f46['__name']||Lo['__getScrip'+'tName'](_0x345f46),WN['has'](_0x112b00))throw new Error('script\x20nam'+'e:\x20\x27'+_0x112b00+('\x27\x20is\x20reser'+'ved,\x20pleas'+'e\x20change\x20s'+'cript\x20name'));_0x345f46['__name']=_0x112b00,Ks['getApplica'+'tion']()['scripts']['add'](_0x345f46),ea['push'](_0x345f46);}const qN=_0x2da6d6=>_0x2da6d6[-0x7a2*0x1+0x26d5*-0x1+0x2e77]['toLowerCas'+'e']()+_0x2da6d6['substring'](-0x17f3+0x193a*0x1+-0x146);class jN extends Qe{constructor(_0xe153f2){super(_0xe153f2,'script'),this['_scripts']={},this['_cache']={};}['clearCache'](){for(const _0x18f92f in this['_cache']){const _0x51b503=this['_cache'][_0x18f92f],_0x3b1c45=_0x51b503['parentNode'];_0x3b1c45&&_0x3b1c45['removeChil'+'d'](_0x51b503);}this['_cache']={};}['load'](_0x47b456,_0x238954){typeof _0x47b456=='string'&&(_0x47b456={'load':_0x47b456,'original':_0x47b456});const _0x5a9ee8=this;this['_app'];const _0x5c2d05=(_0x47b456['load'],(_0x45d1fb,_0x13559b,_0x16e6b1)=>{if(_0x45d1fb)_0x238954(_0x45d1fb);else{const _0x3a8b7e={};for(let _0x41972f=-0x258b*0x1+0x1*-0x17e1+0x3d6c*0x1;_0x41972f<ea['_types']['length'];_0x41972f++)_0x3a8b7e[ea['_types'][_0x41972f]['name']]=ea['_types'][_0x41972f];ea['_types']['length']=-0x1585+0x1*0x19ab+0x3b*-0x12,_0x238954(null,_0x3a8b7e,_0x16e6b1);const _0x210fbb=_0x13559b['split']('&hash=')[0xb51+0x16*0x20+-0x1*0xe11];delete _0x5a9ee8['_loader']['_cache'][vn['makeKey'](_0x210fbb,'script')];}}),[_0x55d2e7]=_0x47b456['load']['split']('?');_0x55d2e7['endsWith']('.mjs')?this['_loadModul'+'e'](_0x55d2e7,_0x5c2d05):this['_loadScrip'+'t'](_0x47b456['load'],_0x5c2d05);}['open'](_0x2b9295,_0x123b87){return _0x123b87;}['patch'](_0x3d4025,_0x10840a){}['_loadScrip'+'t'](_0x5a538e,_0x471fb2){const _0x5ef176=document['head'],_0x98945b=document['createElem'+'ent']('script');this['_cache'][_0x5a538e]=_0x98945b,_0x98945b['async']=!(0x3*-0xa6f+-0xfe8+0x2f36),_0x98945b['addEventLi'+'stener']('error',_0x4b01e3=>{_0x471fb2('Script:\x20'+_0x4b01e3['target']['src']+('\x20failed\x20to'+'\x20load'));},!(-0x231e+0x5*0x4d9+0xae2));let _0x567172=!(-0x7df+0x137e+-0xb9e);_0x98945b['onload']=_0x98945b['onreadysta'+'techange']=function(){!_0x567172&&(!this['readyState']||this['readyState']==='loaded'||this['readyState']==='complete')&&(_0x567172=!(0x1b58+-0xed+-0x1a6b),_0x471fb2(null,_0x5a538e,_0x98945b));},_0x98945b['src']=_0x5a538e,_0x5ef176['appendChil'+'d'](_0x98945b);}['_loadModul'+'e'](_0x24b780,_0xd47a35){const _0x4afde4=Me['browser']&&window['location']['origin']!=='null'?window['location']['origin']+window['location']['pathname']:import.meta['url'],_0x2a8eb6=new URL(_0x24b780,_0x4afde4);import(_0x2a8eb6['toString']())['then'](_0x30650c=>{var _0x5549c3,_0x455813;const _0x53de3a=_0x2a8eb6['pathname']['split']('/')['pop'](),_0x3cb326=(_0x455813=(_0x5549c3=this['_app']['assets']['find'](_0x53de3a,'script'))==null?void(0x17e4+-0x188f*0x1+-0x3*-0x39):_0x5549c3['data'])==null?void(0x74+0xbfb*0x1+-0xc6f):_0x455813['scripts'];for(const _0x26e9fd in _0x30650c){const _0x51986b=_0x30650c[_0x26e9fd];if(_0x51986b['prototype']instanceof ts){const _0x4e2c39=qN(_0x51986b['name']);_0x51986b['scriptName']||w['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x51986b['name']+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x51986b['name']+('.scriptNam'+'e\x20=\x20\x22')+_0x4e2c39+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.'));const _0x518b7f=_0x51986b['scriptName']??_0x4e2c39;XN(_0x51986b,_0x518b7f),_0x3cb326&&this['_app']['scripts']['addSchema'](_0x518b7f,_0x3cb326[_0x518b7f]);}}_0xd47a35(null,_0x24b780,null);})['catch'](_0x21c55e=>{_0xd47a35(_0x21c55e);});}}class YN extends Qe{constructor(_0x5744a4){super(_0x5744a4,'shader'),h(this,'decoder',null);}['load'](_0x11d326,_0x3300ed){typeof _0x11d326=='string'&&(_0x11d326={'load':_0x11d326,'original':_0x11d326}),ot['get'](_0x11d326['load'],{'retry':this['maxRetries']>0xce*-0x29+-0x1a09+0x3b07,'maxRetries':this['maxRetries']},(_0x12fff3,_0xaec3cf)=>{_0x12fff3?_0x3300ed('Error\x20load'+'ing\x20shader'+'\x20resource:'+'\x20'+_0x11d326['original']+'\x20['+_0x12fff3+']'):_0x3300ed(null,_0xaec3cf);});}['openBinary'](_0x253e3f){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x253e3f);}}function nf(_0x481ef1){const _0x248507=this;_0x248507['resource']&&(_0x248507['resource']['atlas']=_0x481ef1['resource']);}function of(_0x48866e){this['registry']['load'](_0x48866e);}class KN extends Qe{constructor(_0xa9937c){super(_0xa9937c,'sprite'),this['_assets']=_0xa9937c['assets'],this['_device']=_0xa9937c['graphicsDe'+'vice'];}['load'](_0x3097ea,_0x2b4767){typeof _0x3097ea=='string'&&(_0x3097ea={'load':_0x3097ea,'original':_0x3097ea}),xe['getExtensi'+'on'](_0x3097ea['original'])==='.json'&&ot['get'](_0x3097ea['load'],{'retry':this['maxRetries']>-0x2*-0x115b+0x19b*-0xe+-0x3a*0x36,'maxRetries':this['maxRetries']},(_0x11760c,_0x31c97b)=>{_0x11760c?_0x2b4767(_0x11760c):_0x2b4767(null,_0x31c97b);});}['open'](_0x412800,_0x2308da){const _0x519895=new iA(this['_device']);return _0x412800&&(_0x519895['__data']=_0x2308da),_0x519895;}['patch'](_0xa39738,_0x2bce64){const _0x2f46c9=_0xa39738['resource'];if(_0x2f46c9['__data']&&(_0xa39738['data']['pixelsPerU'+'nit']=_0x2f46c9['__data']['pixelsPerU'+'nit'],_0xa39738['data']['renderMode']=_0x2f46c9['__data']['renderMode'],_0xa39738['data']['frameKeys']=_0x2f46c9['__data']['frameKeys'],_0x2f46c9['__data']['textureAtl'+'asAsset'])){const _0x16a0cf=_0x2bce64['getByUrl'](_0x2f46c9['__data']['textureAtl'+'asAsset']);_0x16a0cf?_0xa39738['data']['textureAtl'+'asAsset']=_0x16a0cf['id']:console['warn']('Could\x20not\x20'+'find\x20textu'+'reatlas\x20wi'+'th\x20url:\x20'+_0x2f46c9['__data']['textureAtl'+'asAsset']);}_0x2f46c9['startUpdat'+'e'](),_0x2f46c9['renderMode']=_0xa39738['data']['renderMode'],_0x2f46c9['pixelsPerU'+'nit']=_0xa39738['data']['pixelsPerU'+'nit'],_0x2f46c9['frameKeys']=_0xa39738['data']['frameKeys'],this['_updateAtl'+'as'](_0xa39738),_0x2f46c9['endUpdate'](),_0xa39738['off']('change',this['_onAssetCh'+'ange'],this),_0xa39738['on']('change',this['_onAssetCh'+'ange'],this);}['_updateAtl'+'as'](_0x2323ff){const _0x8d42fd=_0x2323ff['resource'];if(!_0x2323ff['data']['textureAtl'+'asAsset']){_0x8d42fd['atlas']=null;return;}this['_assets']['off']('load:'+_0x2323ff['data']['textureAtl'+'asAsset'],nf,_0x2323ff),this['_assets']['on']('load:'+_0x2323ff['data']['textureAtl'+'asAsset'],nf,_0x2323ff);const _0x3f2bb0=this['_assets']['get'](_0x2323ff['data']['textureAtl'+'asAsset']);_0x3f2bb0&&_0x3f2bb0['resource']?_0x8d42fd['atlas']=_0x3f2bb0['resource']:_0x3f2bb0?this['_assets']['load'](_0x3f2bb0):(this['_assets']['off']('add:'+_0x2323ff['data']['textureAtl'+'asAsset'],of,_0x2323ff),this['_assets']['on']('add:'+_0x2323ff['data']['textureAtl'+'asAsset'],of,_0x2323ff));}['_onAssetCh'+'ange'](_0x2e6018,_0x980b6c,_0x3dd63c,_0x1a58db){_0x980b6c==='data'&&_0x3dd63c&&_0x3dd63c['textureAtl'+'asAsset']&&_0x1a58db&&_0x3dd63c['textureAtl'+'asAsset']!==_0x1a58db['textureAtl'+'asAsset']&&(this['_assets']['off']('load:'+_0x1a58db['textureAtl'+'asAsset'],nf,_0x2e6018),this['_assets']['off']('add:'+_0x1a58db['textureAtl'+'asAsset'],of,_0x2e6018));}}class $g{constructor(_0xa69975,_0x5ba1ed){h(this,'_app'),h(this,'_data'),h(this,'_templateR'+'oot',null),(this['_app']=_0xa69975,this['_data']=_0x5ba1ed);}['instantiat'+'e'](){return this['_templateR'+'oot']||this['_parseTemp'+'late'](),this['_templateR'+'oot']['clone']();}['_parseTemp'+'late'](){const _0x23a328=new Qp(this['_app'],!(0x20a*0x3+-0x3a*-0x6d+-0x1ed0));this['_templateR'+'oot']=_0x23a328['parse'](this['_data']);}}class ZN extends Qe{constructor(_0x52daba){super(_0x52daba,'template'),h(this,'decoder',null);}['load'](_0xb27dad,_0x2590dc){typeof _0xb27dad=='string'&&(_0xb27dad={'load':_0xb27dad,'original':_0xb27dad});const _0x3a5a45={'retry':this['maxRetries']>0x12fb+0x6d4*0x3+-0x2777,'maxRetries':this['maxRetries']};ot['get'](_0xb27dad['load'],_0x3a5a45,(_0x49fbbd,_0x2257e9)=>{_0x49fbbd?_0x2590dc('Error\x20requ'+'esting\x20tem'+'plate:\x20'+_0xb27dad['original']):_0x2590dc(_0x49fbbd,_0x2257e9);});}['open'](_0x39cb3a,_0x43e213){return new $g(this['_app'],_0x43e213);}['openBinary'](_0x4030e8){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),new $g(this['_app'],JSON['parse'](this['decoder']['decode'](_0x4030e8)));}}class QN extends Qe{constructor(_0x4b8953){super(_0x4b8953,'text'),h(this,'decoder',null);}['load'](_0x2d6284,_0xb73cd7){typeof _0x2d6284=='string'&&(_0x2d6284={'load':_0x2d6284,'original':_0x2d6284}),ot['get'](_0x2d6284['load'],{'retry':this['maxRetries']>-0x1ea+-0x1*-0xae7+0x27*-0x3b,'maxRetries':this['maxRetries']},(_0x11c4a2,_0x2af138)=>{_0x11c4a2?_0xb73cd7('Error\x20load'+'ing\x20text\x20r'+'esource:\x20'+_0x2d6284['original']+'\x20['+_0x11c4a2+']'):_0xb73cd7(null,_0x2af138);});}['openBinary'](_0x168157){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x168157);}}const gc={'repeat':yt,'clamp':ue,'mirror':Du},Sc={'nearest':Te,'linear':vt,'nearest_mip_nearest':Ph,'linear_mip_nearest':Dh,'nearest_mip_linear':Mh,'linear_mip_linear':ha},JN=/^data\.frames\.(\d+)$/;class ek extends Qe{constructor(_0x26b9d1){super(_0x26b9d1,'textureatl'+'as'),this['_loader']=_0x26b9d1['loader'];}['load'](_0x4196f5,_0x3660d4){typeof _0x4196f5=='string'&&(_0x4196f5={'load':_0x4196f5,'original':_0x4196f5});const _0x20c1a0=this,_0x4c7291=this['_loader']['getHandler']('texture');xe['getExtensi'+'on'](_0x4196f5['original'])==='.json'?ot['get'](_0x4196f5['load'],{'retry':this['maxRetries']>0x19b7+0x1f8e+-0x3945,'maxRetries':this['maxRetries']},(_0x174667,_0x37970d)=>{if(_0x174667)_0x3660d4(_0x174667);else{const _0x44eb2d=_0x4196f5['original']['replace']('.json','.png');_0x20c1a0['_loader']['load'](_0x44eb2d,'texture',(_0x1fa10a,_0x1b807c)=>{_0x1fa10a?_0x3660d4(_0x1fa10a):_0x3660d4(null,{'data':_0x37970d,'texture':_0x1b807c});});}}):_0x4c7291['load'](_0x4196f5,_0x3660d4);}['open'](_0x5c65d1,_0x179a6f,_0x1afe50){const _0x5b7853=new rA();if(_0x179a6f['texture']&&_0x179a6f['data'])_0x5b7853['texture']=_0x179a6f['texture'],_0x5b7853['__data']=_0x179a6f['data'];else{const _0x1696ac=this['_loader']['getHandler']('texture')['open'](_0x5c65d1,_0x179a6f,_0x1afe50);if(!_0x1696ac)return null;_0x5b7853['texture']=_0x1696ac;}return _0x5b7853;}['patch'](_0x4976a5,_0x4b1091){if(!_0x4976a5['resource'])return;_0x4976a5['resource']['__data']&&(_0x4976a5['resource']['__data']['minfilter']!==void(-0x7*0xc1+0x25ea*0x1+-0x20a3)&&(_0x4976a5['data']['minfilter']=_0x4976a5['resource']['__data']['minfilter']),_0x4976a5['resource']['__data']['magfilter']!==void(-0xf14+0x92b*0x1+0x5e9)&&(_0x4976a5['data']['magfilter']=_0x4976a5['resource']['__data']['magfilter']),_0x4976a5['resource']['__data']['addressu']!==void(-0xee4+0xef9*0x1+-0x15)&&(_0x4976a5['data']['addressu']=_0x4976a5['resource']['__data']['addressu']),_0x4976a5['resource']['__data']['addressv']!==void(0x1282+0x156c+-0x27ee)&&(_0x4976a5['data']['addressv']=_0x4976a5['resource']['__data']['addressv']),_0x4976a5['resource']['__data']['mipmaps']!==void(0x1*0x16bd+-0x21c6+-0x1*-0xb09)&&(_0x4976a5['data']['mipmaps']=_0x4976a5['resource']['__data']['mipmaps']),_0x4976a5['resource']['__data']['anisotropy']!==void(-0xe*0xda+0x17f2+-0x72*0x1b)&&(_0x4976a5['data']['anisotropy']=_0x4976a5['resource']['__data']['anisotropy']),_0x4976a5['resource']['__data']['rgbm']!==void(0x12a8+-0x245*-0xb+-0x35b*0xd)&&(_0x4976a5['data']['rgbm']=!!_0x4976a5['resource']['__data']['rgbm']),_0x4976a5['data']['frames']=_0x4976a5['resource']['__data']['frames'],delete _0x4976a5['resource']['__data']);const _0x572dc0=_0x4976a5['resource']['texture'];if(_0x572dc0&&(_0x572dc0['name']=_0x4976a5['name'],_0x4976a5['data']['hasOwnProp'+'erty']('minfilter')&&_0x572dc0['minFilter']!==Sc[_0x4976a5['data']['minfilter']]&&(_0x572dc0['minFilter']=Sc[_0x4976a5['data']['minfilter']]),_0x4976a5['data']['hasOwnProp'+'erty']('magfilter')&&_0x572dc0['magFilter']!==Sc[_0x4976a5['data']['magfilter']]&&(_0x572dc0['magFilter']=Sc[_0x4976a5['data']['magfilter']]),_0x4976a5['data']['hasOwnProp'+'erty']('addressu')&&_0x572dc0['addressU']!==gc[_0x4976a5['data']['addressu']]&&(_0x572dc0['addressU']=gc[_0x4976a5['data']['addressu']]),_0x4976a5['data']['hasOwnProp'+'erty']('addressv')&&_0x572dc0['addressV']!==gc[_0x4976a5['data']['addressv']]&&(_0x572dc0['addressV']=gc[_0x4976a5['data']['addressv']]),_0x4976a5['data']['hasOwnProp'+'erty']('mipmaps')&&_0x572dc0['mipmaps']!==_0x4976a5['data']['mipmaps']&&(_0x572dc0['mipmaps']=_0x4976a5['data']['mipmaps']),_0x4976a5['data']['hasOwnProp'+'erty']('anisotropy')&&_0x572dc0['anisotropy']!==_0x4976a5['data']['anisotropy']&&(_0x572dc0['anisotropy']=_0x4976a5['data']['anisotropy']),_0x4976a5['data']['hasOwnProp'+'erty']('rgbm'))){const _0xf74f1c=_0x4976a5['data']['rgbm']?Ki:Ms;_0x572dc0['type']!==_0xf74f1c&&(_0x572dc0['type']=_0xf74f1c);}_0x4976a5['resource']['texture']=_0x572dc0;const _0x5f01ae={};for(const _0x474504 in _0x4976a5['data']['frames']){const _0x5670d1=_0x4976a5['data']['frames'][_0x474504];_0x5f01ae[_0x474504]={'rect':new re(_0x5670d1['rect']),'pivot':new J(_0x5670d1['pivot']),'border':new re(_0x5670d1['border'])};}_0x4976a5['resource']['frames']=_0x5f01ae,_0x4976a5['off']('change',this['_onAssetCh'+'ange'],this),_0x4976a5['on']('change',this['_onAssetCh'+'ange'],this);}['_onAssetCh'+'ange'](_0x28f900,_0x50babe,_0x15906b){let _0x3b2c82;if(_0x50babe==='data'||_0x50babe==='data.frame'+'s'){const _0x12092c={};for(const _0x56d324 in _0x15906b['frames'])_0x3b2c82=_0x15906b['frames'][_0x56d324],_0x12092c[_0x56d324]={'rect':new re(_0x3b2c82['rect']),'pivot':new J(_0x3b2c82['pivot']),'border':new re(_0x3b2c82['border'])};_0x28f900['resource']['frames']=_0x12092c;}else{const _0x261f92=_0x50babe['match'](JN);if(_0x261f92){const _0x55dc40=_0x261f92[0x17bd+0x4d5*0x3+-0x1*0x263b];_0x15906b?(_0x28f900['resource']['frames'][_0x55dc40]?(_0x3b2c82=_0x28f900['resource']['frames'][_0x55dc40],_0x3b2c82['rect']['set'](_0x15906b['rect'][-0x126e*0x1+-0x1*0x26f9+0x3967],_0x15906b['rect'][0x20a5+-0x162+0xfa1*-0x2],_0x15906b['rect'][-0x2170*0x1+0x1b2a+0x648],_0x15906b['rect'][-0x23cb+0x1831+0xb9d]),_0x3b2c82['pivot']['set'](_0x15906b['pivot'][0x3*0x3bf+0x2394+-0x11*0x2c1],_0x15906b['pivot'][0x18d*-0x6+-0x8a8+0x7*0x291]),_0x3b2c82['border']['set'](_0x15906b['border'][0x1a51+-0x13f*0x1+0x1*-0x1912],_0x15906b['border'][0x52*-0x49+0x7*0x1d5+0xa90],_0x15906b['border'][0x1eb9+-0x253*0x5+-0x1318],_0x15906b['border'][0x1*0x23cf+-0x2*-0xeb7+0xf2*-0x45])):_0x28f900['resource']['frames'][_0x55dc40]={'rect':new re(_0x15906b['rect']),'pivot':new J(_0x15906b['pivot']),'border':new re(_0x15906b['border'])},_0x28f900['resource']['fire']('set:frame',_0x55dc40,_0x28f900['resource']['frames'][_0x55dc40])):_0x28f900['resource']['frames'][_0x55dc40]&&(delete _0x28f900['resource']['frames'][_0x55dc40],_0x28f900['resource']['fire']('remove:fra'+'me',_0x55dc40));}}}}function tk(){const _0x2e07ae={'cTFETC1':0x0,'cTFETC2':0x1,'cTFBC1':0x2,'cTFBC3':0x3,'cTFPVRTC1_4_RGB':0x8,'cTFPVRTC1_4_RGBA':0x9,'cTFASTC_4x4':0xa,'cTFATC_RGB':0xb,'cTFATC_RGBA_INTERPOLATED_ALPHA':0xc,'cTFRGBA32':0xd,'cTFRGB565':0xe,'cTFRGBA4444':0x10},_0x409247={'astc':_0x2e07ae['cTFASTC_4x'+'4'],'dxt':_0x2e07ae['cTFBC1'],'etc1':_0x2e07ae['cTFETC1'],'etc2':_0x2e07ae['cTFETC1'],'pvr':_0x2e07ae['cTFPVRTC1_'+'4_RGB'],'atc':_0x2e07ae['cTFATC_RGB'],'none':_0x2e07ae['cTFRGB565']},_0x39594c={'astc':_0x2e07ae['cTFASTC_4x'+'4'],'dxt':_0x2e07ae['cTFBC3'],'etc1':_0x2e07ae['cTFRGBA444'+'4'],'etc2':_0x2e07ae['cTFETC2'],'pvr':_0x2e07ae['cTFPVRTC1_'+'4_RGBA'],'atc':_0x2e07ae['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA'],'none':_0x2e07ae['cTFRGBA444'+'4']},_0x40c8c0={'ETC1':0x15,'ETC2_RGB':0x16,'ETC2_RGBA':0x17,'DXT1':0x8,'DXT5':0xa,'PVRTC_4BPP_RGB_1':0x1a,'PVRTC_4BPP_RGBA_1':0x1b,'ASTC_4x4':0x1c,'ATC_RGB':0x1d,'ATC_RGBA':0x1e,'R8_G8_B8_A8':0x7,'R5_G6_B5':0x3,'R4_G4_B4_A4':0x5},_0x251eb6=(_0x11cca4,_0x564910)=>{switch(_0x11cca4){case _0x2e07ae['cTFETC1']:return _0x564910['formats']['etc2']?_0x40c8c0['ETC2_RGB']:_0x40c8c0['ETC1'];case _0x2e07ae['cTFETC2']:return _0x40c8c0['ETC2_RGBA'];case _0x2e07ae['cTFBC1']:return _0x40c8c0['DXT1'];case _0x2e07ae['cTFBC3']:return _0x40c8c0['DXT5'];case _0x2e07ae['cTFPVRTC1_'+'4_RGB']:return _0x40c8c0['PVRTC_4BPP'+'_RGB_1'];case _0x2e07ae['cTFPVRTC1_'+'4_RGBA']:return _0x40c8c0['PVRTC_4BPP'+'_RGBA_1'];case _0x2e07ae['cTFASTC_4x'+'4']:return _0x40c8c0['ASTC_4x4'];case _0x2e07ae['cTFATC_RGB']:return _0x40c8c0['ATC_RGB'];case _0x2e07ae['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return _0x40c8c0['ATC_RGBA'];case _0x2e07ae['cTFRGBA32']:return _0x40c8c0['R8_G8_B8_A'+'8'];case _0x2e07ae['cTFRGB565']:return _0x40c8c0['R5_G6_B5'];case _0x2e07ae['cTFRGBA444'+'4']:return _0x40c8c0['R4_G4_B4_A'+'4'];}},_0x5810cf=_0x1dfdb6=>{const _0x5b6a9b=function(_0xbf95db,_0x45466a){const _0x554d2d=_0xbf95db*(-0x1*0xeca+0xb98*-0x1+0x133*0x16+0.00784313725490196)-(-0x24e+0x48d*0x4+0xfe5*-0x1),_0x333082=_0x45466a*((0x1*-0x10af+-0x1*-0x17b1+-0x700)/(-0x170b+-0x2*-0xe8a+-0x1*0x50a))-(-0x267b*-0x1+0x860+-0x2eda),_0x2ef40b=Math['sqrt'](0x2523+-0x4d3*-0x1+-0x29f5-Math['min'](0x1419+0x186b+-0x2c83,_0x554d2d*_0x554d2d+_0x333082*_0x333082));return Math['max'](-0x11+0x5*-0x6a9+0x215e,Math['min'](-0x1814+-0x2664+-0x7*-0x911,Math['floor']((_0x2ef40b+(0x2*-0xf52+0x393*-0x5+0x3084))*(-0x1dfd+-0xcc8+0x2ac5+0.5)*(0xc2*-0x5+0x12b+0x1cf*0x2))));};for(let _0x272515=0x17c0+0x6*-0x438+0x190;_0x272515<_0x1dfdb6['length'];_0x272515+=-0x5bf*0x2+0xe3b*-0x1+0x1*0x19bd){const _0x222aac=_0x1dfdb6[_0x272515+(-0x2*0x9af+0x1427+-0xc6)],_0x577b69=_0x1dfdb6[_0x272515+(-0x10b*-0x8+0x1f7f+-0x27d6*0x1)];_0x1dfdb6[_0x272515+(-0x98*-0xc+0x4*0x24+-0x7b0)]=_0x222aac,_0x1dfdb6[_0x272515+(0x1*0x1007+0x6*-0xf4+-0xa4d)]=_0x5b6a9b(_0x222aac,_0x577b69),_0x1dfdb6[_0x272515+(0x26fa+0x2*0xe34+-0x3*0x1675)]=0x1*-0x15c3+-0xad9*0x3+0x79*0x75;}return _0x1dfdb6;},_0x4276d7=_0x378519=>{const _0x4709c3=new Uint16Array(_0x378519['length']/(0x1ef0+0xc45+-0x2b31));for(let _0x274b5d=0xcb2+0x2297+0x2f49*-0x1;_0x274b5d<_0x378519['length'];_0x274b5d+=-0x1*0x1dc6+-0x1c*-0x7d+-0x101e*-0x1){const _0x298d0d=_0x378519[_0x274b5d+(-0x20a8+0x2*0xd54+0x4*0x180)],_0x174854=_0x378519[_0x274b5d+(0x102a+0x1*-0x5bb+0x6*-0x1bd)],_0x2e63be=_0x378519[_0x274b5d+(0x655*-0x1+-0x2024*-0x1+-0x19cd*0x1)];_0x4709c3[_0x274b5d/(0x1f68+-0x1945+-0x61f)]=(_0x298d0d&0x208b+0x1*0xdc7+0x183*-0x1e)<<0x1635+0x1a7f*0x1+0x14*-0x26f|(_0x174854&0x1dc1+0xe45*-0x1+0x8*-0x1d0)<<0x4*-0x652+-0x1*0xe8f+0x27da|_0x2e63be>>0xb48*0x2+0x8*-0x7d+0x1*-0x12a5;}return _0x4709c3;},_0x3a26cd=(_0x44aa1b,_0x46d43a)=>(_0x44aa1b&_0x44aa1b-(0xb14+0x1*0x2017+-0x82*0x55))===0x2388+-0x11c*0x1f+-0x92*0x2&&(_0x46d43a&_0x46d43a-(-0x24*0xa2+-0x1de7+-0x696*-0x8))===0x3*-0x53a+-0x1*0x159b+0x2549,_0x5bd0d6=()=>typeof performance<'u'?performance['now']():-0x1a6d+0x2*-0x5f5+-0x5*-0x7ab;let _0x10c82d,_0x1a62ec,_0x64f64c;const _0x1a8bca=(_0x4fa1d6,_0x5985b8,_0x16e9f4)=>{if(_0x16e9f4){if(_0x4fa1d6['formats']['astc'])return'astc';}else{if(_0x5985b8){if(_0x4fa1d6['formats']['etc2'])return'etc2';}else{if(_0x4fa1d6['formats']['etc2'])return'etc2';if(_0x4fa1d6['formats']['etc1'])return'etc1';}}return(_0x4eb7ef=>{for(let _0x1c6672=-0xcba+0x2096*0x1+-0x13dc;_0x1c6672<_0x4eb7ef['length'];++_0x1c6672){const _0x4cd5f2=_0x4eb7ef[_0x1c6672];if(_0x4fa1d6['formats'][_0x4cd5f2])return _0x4cd5f2;}return'none';})(_0x5985b8?_0x64f64c:_0x1a62ec);},_0x8bf674=(_0x4e7113,_0x577de0,_0x55f187)=>{switch(_0x55f187){case _0x2e07ae['cTFETC1']:case _0x2e07ae['cTFETC2']:return!(-0xbba+0x25*-0x6b+-0x1*-0x1b31);case _0x2e07ae['cTFBC1']:case _0x2e07ae['cTFBC3']:return(_0x4e7113&0x565+-0x6b3+-0x1*-0x151)===-0x2c9+-0x8*-0x274+-0x10d7&&(_0x577de0&-0xd*0x23a+-0x304*-0x5+-0x143*-0xb)===-0x1*0x102b+-0xf0f+-0x23b*-0xe;case _0x2e07ae['cTFPVRTC1_'+'4_RGB']:case _0x2e07ae['cTFPVRTC1_'+'4_RGBA']:return _0x3a26cd(_0x4e7113,_0x577de0);case _0x2e07ae['cTFASTC_4x'+'4']:return!(-0x1a*0x17f+-0xf5a+0x3640);case _0x2e07ae['cTFATC_RGB']:case _0x2e07ae['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return!(0x1e63+-0x1*-0x1bfa+-0x1*0x3a5d);}return!(-0xa53+0x138e+-0x93a);},_0x5a047a=(_0x432c17,_0xe23590,_0x12c035)=>{if(!_0x10c82d['KTX2File'])throw new Error('Basis\x20tran'+'scoder\x20mod'+'ule\x20does\x20n'+'ot\x20include'+'\x20support\x20f'+'or\x20KTX2.');const _0x31e78b=_0x5bd0d6(),_0x2dc100=new _0x10c82d['KTX2File'](new Uint8Array(_0xe23590)),_0x2404d5=_0x2dc100['getWidth'](),_0x1ed44f=_0x2dc100['getHeight'](),_0x150856=_0x2dc100['getLevels'](),_0x28e585=!!_0x2dc100['getHasAlph'+'a'](),_0x1c0013=_0x2dc100['isUASTC']&&_0x2dc100['isUASTC']();if(!_0x2404d5||!_0x1ed44f||!_0x150856)throw _0x2dc100['close'](),_0x2dc100['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x432c17+'\x20width='+_0x2404d5+'\x20height='+_0x1ed44f+'\x20levels='+_0x150856);const _0x538970=_0x1a8bca(_0x12c035['deviceDeta'+'ils'],_0x28e585,_0x1c0013),_0x37aad8=!!_0x12c035['isGGGR']&&_0x538970==='pvr';let _0x3d4639;if(_0x37aad8?_0x3d4639=_0x2e07ae['cTFRGBA32']:(_0x3d4639=_0x28e585?_0x39594c[_0x538970]:_0x409247[_0x538970],_0x8bf674(_0x2404d5,_0x1ed44f,_0x3d4639)||(_0x3d4639=_0x28e585?_0x2e07ae['cTFRGBA32']:_0x2e07ae['cTFRGB565'])),!_0x2dc100['startTrans'+'coding']())throw _0x2dc100['close'](),_0x2dc100['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x432c17);let _0x40a5ff;const _0x1d9776=[];for(let _0x5a9ac0=0xaf9*0x3+-0x26ab+0x5c0;_0x5a9ac0<_0x150856;++_0x5a9ac0){const _0x511eb5=_0x2dc100['getImageTr'+'anscodedSi'+'zeInBytes'](_0x5a9ac0,-0x1ff5+0x145d+0xb98,0xb1a+0x1*0x1d1b+-0x2835,_0x3d4639),_0x49a108=new Uint8Array(_0x511eb5);if(!_0x2dc100['transcodeI'+'mage'](_0x49a108,_0x5a9ac0,0x156a*0x1+0x219*0xd+-0x30af,0x2*-0x502+0x7*0x234+-0x568,_0x3d4639,0x1492+0x1906+-0x1*0x2d98,-(-0x22ac+0xe9d+0x1410),-(0x5*0x146+0x2*0x3a1+-0xd9f)))throw _0x2dc100['close'](),_0x2dc100['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x432c17);const _0x297421=_0x3d4639===_0x2e07ae['cTFRGB565']||_0x3d4639===_0x2e07ae['cTFRGBA444'+'4'];_0x1d9776['push'](_0x297421?new Uint16Array(_0x49a108['buffer']):_0x49a108);}if(_0x2dc100['close'](),_0x2dc100['delete'](),_0x37aad8){for(_0x3d4639=_0x2e07ae['cTFRGB565'],_0x40a5ff=0x2254+-0x44d*0x6+0x886*-0x1;_0x40a5ff<_0x1d9776['length'];++_0x40a5ff)_0x1d9776[_0x40a5ff]=_0x4276d7(_0x5810cf(_0x1d9776[_0x40a5ff]));}return{'format':_0x251eb6(_0x3d4639,_0x12c035['deviceDeta'+'ils']),'width':_0x2404d5,'height':_0x1ed44f,'levels':_0x1d9776,'cubemap':!(-0x246c+0x256e*0x1+-0x101),'transcodeTime':_0x5bd0d6()-_0x31e78b,'url':_0x432c17,'unswizzledGGGR':_0x37aad8};},_0x2a282f=(_0x5b5d6e,_0x51f385,_0x4abe1f)=>{const _0x1ca8ab=_0x5bd0d6(),_0x2850b2=new _0x10c82d['BasisFile'](new Uint8Array(_0x51f385)),_0x4d9eac=_0x2850b2['getImageWi'+'dth'](0x6*-0x23b+0x16fc+0x4cd*-0x2,-0x1bde+-0x35f*-0x2+0x1520),_0x5cb8e7=_0x2850b2['getImageHe'+'ight'](0x14b0+0xe3e+0x22*-0x107,0x573+0x2*0x1c+0x5ab*-0x1),_0x210df8=_0x2850b2['getNumImag'+'es'](),_0x80c345=_0x2850b2['getNumLeve'+'ls'](-0x2*-0x41f+0x19*-0x139+0x27b*0x9),_0x43ff0a=!!_0x2850b2['getHasAlph'+'a'](),_0x40f8e9=_0x2850b2['isUASTC']&&_0x2850b2['isUASTC']();if(!_0x4d9eac||!_0x5cb8e7||!_0x210df8||!_0x80c345)throw _0x2850b2['close'](),_0x2850b2['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x5b5d6e+'\x20width='+_0x4d9eac+'\x20height='+_0x5cb8e7+'\x20images='+_0x210df8+'\x20levels='+_0x80c345);const _0xa369a4=_0x1a8bca(_0x4abe1f['deviceDeta'+'ils'],_0x43ff0a,_0x40f8e9),_0x504996=!!_0x4abe1f['isGGGR']&&_0xa369a4==='pvr';let _0x57376e;if(_0x504996?_0x57376e=_0x2e07ae['cTFRGBA32']:(_0x57376e=_0x43ff0a?_0x39594c[_0xa369a4]:_0x409247[_0xa369a4],_0x8bf674(_0x4d9eac,_0x5cb8e7,_0x57376e)||(_0x57376e=_0x43ff0a?_0x2e07ae['cTFRGBA32']:_0x2e07ae['cTFRGB565'])),!_0x2850b2['startTrans'+'coding']())throw _0x2850b2['close'](),_0x2850b2['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x5b5d6e);let _0x4a1196;const _0x45f41d=[];for(let _0x3097a5=0x196b+0x1*-0x1871+-0xfa;_0x3097a5<_0x80c345;++_0x3097a5){const _0x128218=_0x2850b2['getImageTr'+'anscodedSi'+'zeInBytes'](-0x7*0x445+0x2*-0xb3e+0x345f,_0x3097a5,_0x57376e),_0x1946c4=new Uint8Array(_0x128218);if(!_0x2850b2['transcodeI'+'mage'](_0x1946c4,-0x5*0x38c+0x18bf+0x703*-0x1,_0x3097a5,_0x57376e,0x1e40+0x1bbd+0x1*-0x39fd,0x2044+0xb88+-0x2bcc)){if(_0x3097a5===_0x80c345-(0x1270+-0x11ed+-0x82*0x1)&&_0x128218===_0x45f41d[_0x3097a5-(0x197*-0x17+0x7e*0x11+0x1c34)]['buffer']['byteLength'])_0x1946c4['set'](new Uint8Array(_0x45f41d[_0x3097a5-(0x1e67+-0x6b+-0x1dfb)]['buffer'])),console['warn']('Failed\x20to\x20'+'transcode\x20'+'last\x20mipma'+'p\x20level,\x20u'+'sing\x20previ'+'ous\x20level\x20'+'instead\x20ur'+'l='+_0x5b5d6e);else throw _0x2850b2['close'](),_0x2850b2['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x5b5d6e);}const _0x25e583=_0x57376e===_0x2e07ae['cTFRGB565']||_0x57376e===_0x2e07ae['cTFRGBA444'+'4'];_0x45f41d['push'](_0x25e583?new Uint16Array(_0x1946c4['buffer']):_0x1946c4);}if(_0x2850b2['close'](),_0x2850b2['delete'](),_0x504996){for(_0x57376e=_0x2e07ae['cTFRGB565'],_0x4a1196=0x167+0x1*-0x264+0xfd;_0x4a1196<_0x45f41d['length'];++_0x4a1196)_0x45f41d[_0x4a1196]=_0x4276d7(_0x5810cf(_0x45f41d[_0x4a1196]));}return{'format':_0x251eb6(_0x57376e,_0x4abe1f['deviceDeta'+'ils']),'width':_0x4d9eac,'height':_0x5cb8e7,'levels':_0x45f41d,'cubemap':!(-0x59c*0x4+0x4ed+0x2*0x8c2),'transcodeTime':_0x5bd0d6()-_0x1ca8ab,'url':_0x5b5d6e,'unswizzledGGGR':_0x504996};},_0x52ac75=(_0x8456dd,_0x48493b,_0x336618)=>_0x336618['isKTX2']?_0x5a047a(_0x8456dd,_0x48493b,_0x336618):_0x2a282f(_0x8456dd,_0x48493b,_0x336618),_0x2514d4=(_0x4b3113,_0x38fbf0,_0x2a87b6)=>{try{const _0x182a4a=_0x52ac75(_0x4b3113,_0x38fbf0,_0x2a87b6);_0x182a4a['levels']=_0x182a4a['levels']['map'](_0x15cdd2=>_0x15cdd2['buffer']),self['postMessag'+'e']({'url':_0x4b3113,'data':_0x182a4a},_0x182a4a['levels']);}catch(_0x3d09ca){self['postMessag'+'e']({'url':_0x4b3113,'err':_0x3d09ca},null);}},_0x44171c=(_0x56f788,_0x354b19)=>{const _0x5bd000=(_0x58c924,_0x42a250)=>(WebAssembly['instantiat'+'e'](_0x56f788['module'],_0x58c924)['then'](_0x55d08a=>{_0x42a250(_0x55d08a);})['catch'](_0x48df8d=>{console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x48df8d);}),{});self['BASIS'](_0x56f788['module']?{'instantiateWasm':_0x5bd000}:null)['then'](_0x27416d=>{_0x27416d['initialize'+'Basis'](),_0x10c82d=_0x27416d,_0x1a62ec=_0x56f788['rgbPriorit'+'y'],_0x64f64c=_0x56f788['rgbaPriori'+'ty'],_0x354b19(null);});},_0x22c31a=[];self['onmessage']=_0x31653f=>{const _0x745e66=_0x31653f['data'];switch(_0x745e66['type']){case'init':_0x44171c(_0x745e66['config'],()=>{for(let _0xb58b9a=-0x1*-0x8c6+-0x2*-0x8ad+0xb0*-0x26;_0xb58b9a<_0x22c31a['length'];++_0xb58b9a)_0x2514d4(_0x22c31a[_0xb58b9a]['url'],_0x22c31a[_0xb58b9a]['data'],_0x22c31a[_0xb58b9a]['options']);_0x22c31a['length']=0x247c+-0x64*0xe+-0x1f04;});break;case'transcode':_0x10c82d?_0x2514d4(_0x745e66['url'],_0x745e66['data'],_0x745e66['options']):_0x22c31a['push'](_0x745e66);break;}};}const sk=_0x42fadc=>({'astc':!!_0x42fadc['extCompres'+'sedTexture'+'ASTC'],'atc':!!_0x42fadc['extCompres'+'sedTexture'+'ATC'],'dxt':!!_0x42fadc['extCompres'+'sedTexture'+'S3TC'],'etc1':!!_0x42fadc['extCompres'+'sedTexture'+'ETC1'],'etc2':!!_0x42fadc['extCompres'+'sedTexture'+'ETC'],'pvr':!!_0x42fadc['extCompres'+'sedTexture'+'PVRTC']}),ik=(_0x3f86aa,_0x3d8c27)=>{const _0x105b48=_0x4807fd=>{const _0x33e89f=['/*\x20basis\x20*'+'/',_0x4807fd,'','('+tk['toString']()+')()\x0a\x0a']['join']('\x0a');return new Blob([_0x33e89f],{'type':'applicatio'+'n/javascri'+'pt'});},_0x3cca2c=()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x5a61d1=new WebAssembly['Module'](Uint8Array['of'](-0x8dc+-0xf3*0x26+0x2cee,-0x58c+0xe64+-0x877,-0x11cd+0x1*0x12a5+0x1*-0x65,0x7*0x4a1+-0xe2*0x29+-0x168*-0x3,0x2f*0x40+0x1*0x9c7+-0x1586,0x1*0x157e+0x5d3+0x3f*-0x6f,-0xc3d*0x3+-0xbd9+0x3090,0x1*-0x1a35+-0x7be*0x4+0x392d));if(_0x5a61d1 instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x5a61d1)instanceof WebAssembly['Instance'];}}catch{}return!(0x10f+-0xe*0x2b3+0x24bc);},_0x51a4df=(_0x267a76,_0x3517b7)=>{_0x3d8c27(null,{'workerUrl':URL['createObje'+'ctURL'](_0x105b48(_0x267a76)),'module':_0x3517b7,'rgbPriority':_0x3f86aa['rgbPriorit'+'y'],'rgbaPriority':_0x3f86aa['rgbaPriori'+'ty']});},_0x41dd4d={'cache':!(-0x1*-0x867+-0x6f*-0x41+-0x2*0x124b),'responseType':'text','retry':_0x3f86aa['maxRetries']>0x1a87*0x1+0x8*0x20f+-0x2aff,'maxRetries':_0x3f86aa['maxRetries']};if(_0x3f86aa['glueUrl']&&_0x3f86aa['wasmUrl']&&_0x3cca2c()){let _0x371876=null,_0x44be63=null;ot['get'](_0x3f86aa['glueUrl'],_0x41dd4d,(_0x47b6ea,_0x2e8eaf)=>{_0x47b6ea?_0x3d8c27(_0x47b6ea):_0x44be63?_0x51a4df(_0x2e8eaf,_0x44be63):_0x371876=_0x2e8eaf;});const _0x11f0d3=fetch(_0x3f86aa['wasmUrl']),_0x4babb6=()=>{_0x11f0d3['then'](_0x2a5c01=>_0x2a5c01['arrayBuffe'+'r']())['then'](_0x53ae7d=>WebAssembly['compile'](_0x53ae7d))['then'](_0x4e6a7e=>{_0x371876?_0x51a4df(_0x371876,_0x4e6a7e):_0x44be63=_0x4e6a7e;})['catch'](_0x293ffa=>{_0x3d8c27(_0x293ffa,null);});};WebAssembly['compileStr'+'eaming']?WebAssembly['compileStr'+'eaming'](_0x11f0d3)['then'](_0x5e4e37=>{_0x371876?_0x51a4df(_0x371876,_0x5e4e37):_0x44be63=_0x5e4e37;})['catch'](_0x53e1a8=>{w['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x3f86aa['wasmUrl']+'\x20('+_0x53e1a8+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x4babb6();}):_0x4babb6();}else ot['get'](_0x3f86aa['fallbackUr'+'l'],_0x41dd4d,(_0x48ef8c,_0x1679cc)=>{_0x48ef8c?_0x3d8c27(_0x48ef8c,null):_0x51a4df(_0x1679cc,null);});};class rk{constructor(){this['callbacks']={},this['queue']=[],this['clients']=[];}['enqueueJob'](_0x27155c,_0x379917,_0x5bafa0,_0x1180b5){if(this['callbacks']['hasOwnProp'+'erty'](_0x27155c))this['callbacks'][_0x27155c]['push'](_0x5bafa0);else{this['callbacks'][_0x27155c]=[_0x5bafa0];const _0x160544={'url':_0x27155c,'data':_0x379917,'options':_0x1180b5};this['clients']['length']>0x1475+-0x7d3+-0xca2?this['clients']['shift']()['run'](_0x160544):this['queue']['push'](_0x160544);}}['enqueueCli'+'ent'](_0x373c79){this['queue']['length']>0x1fc4*-0x1+-0x173d+-0x1*-0x3701?_0x373c79['run'](this['queue']['shift']()):this['clients']['push'](_0x373c79);}['handleResp'+'onse'](_0x4fc0fa,_0x9d74c2,_0x5130c4){const _0x11e735=this['callbacks'][_0x4fc0fa];if(_0x9d74c2){for(let _0x4e1449=-0xf3*0x3+0x4c+-0x1*-0x28d;_0x4e1449<_0x11e735['length'];++_0x4e1449)_0x11e735[_0x4e1449](_0x9d74c2);}else{_0x5130c4['format']===Ih||_0x5130c4['format']===Lh?_0x5130c4['levels']=_0x5130c4['levels']['map'](_0x8c71f4=>new Uint16Array(_0x8c71f4)):_0x5130c4['levels']=_0x5130c4['levels']['map'](_0x38730c=>new Uint8Array(_0x38730c));for(let _0x38a3fd=-0x2*0x140+0x26*-0x45+0xcbe;_0x38a3fd<_0x11e735['length'];++_0x38a3fd)_0x11e735[_0x38a3fd](null,_0x5130c4);}delete this['callbacks'][_0x4fc0fa];}}class ak{constructor(_0x2d39ac,_0x3f469b,_0x430407){this['queue']=_0x2d39ac,this['worker']=new Worker(_0x3f469b['workerUrl']),this['worker']['addEventLi'+'stener']('message',_0x28605d=>{const _0x1d785f=_0x28605d['data'];this['queue']['handleResp'+'onse'](_0x1d785f['url'],_0x1d785f['err'],_0x1d785f['data']),this['eager']||this['queue']['enqueueCli'+'ent'](this);}),this['worker']['postMessag'+'e']({'type':'init','config':_0x3f469b}),this['eager']=_0x430407;}['run'](_0x574923){const _0xfb1e34=[];_0x574923['data']instanceof ArrayBuffer&&_0xfb1e34['push'](_0x574923['data']),this['worker']['postMessag'+'e']({'type':'transcode','url':_0x574923['url'],'format':_0x574923['format'],'data':_0x574923['data'],'options':_0x574923['options']},_0xfb1e34),this['eager']&&this['queue']['enqueueCli'+'ent'](this);}}const nk=0x131d+0x1249+-0x2565*0x1,ok=['etc2','etc1','astc','dxt','pvr','atc'],lk=['astc','dxt','etc2','pvr','atc'],ck=-0x56c*-0x7+-0xac5+-0x1b2a*0x1,vu=new rk();let Xg=null,xu=!(0x1*0xef+-0x26d8+0x12f5*0x2);function hk(_0x45e12f){if(!xu){if(!_0x45e12f)_0x45e12f=Xg||{};else{if(_0x45e12f['lazyInit']){Xg=_0x45e12f;return;}}if(!_0x45e12f['glueUrl']||!_0x45e12f['wasmUrl']||!_0x45e12f['fallbackUr'+'l']){const _0x24486a=uS['getConfig']('BASIS');_0x24486a&&(_0x45e12f={'glueUrl':_0x24486a['glueUrl'],'wasmUrl':_0x24486a['wasmUrl'],'fallbackUrl':_0x24486a['fallbackUr'+'l'],'numWorkers':_0x24486a['numWorkers']});}if(_0x45e12f['glueUrl']||_0x45e12f['wasmUrl']||_0x45e12f['fallbackUr'+'l']){xu=!(0x62f+-0xf69+0x93a);const _0x2de049=Math['max'](-0x2a*-0x34+-0x1952+0x10cb,Math['min'](0x856+-0x2613*0x1+-0x1*-0x1dcd,_0x45e12f['numWorkers']||nk)),_0x5ef4ff=_0x45e12f['numWorkers']===0xe9+0x2508+-0x25f0||(_0x45e12f['hasOwnProp'+'erty']('eagerWorke'+'rs')?_0x45e12f['eagerWorke'+'rs']:!(-0x1b3d+0x103+0x1a3a));_0x45e12f['rgbPriorit'+'y']=_0x45e12f['rgbPriorit'+'y']||ok,_0x45e12f['rgbaPriori'+'ty']=_0x45e12f['rgbaPriori'+'ty']||lk,_0x45e12f['maxRetries']=_0x45e12f['hasOwnProp'+'erty']('maxRetries')?_0x45e12f['maxRetries']:ck,ik(_0x45e12f,(_0x204199,_0x15d8c3)=>{if(_0x204199)console['error']('failed\x20to\x20'+'initialize'+'\x20basis\x20wor'+'ker:\x20'+_0x204199);else{for(let _0x2359ee=0x2569*-0x1+-0x1*-0x20a+-0x713*-0x5;_0x2359ee<_0x2de049;++_0x2359ee)vu['enqueueCli'+'ent'](new ak(vu,_0x15d8c3,_0x5ef4ff));}});}}}let lf=null;function Hv(_0x3136a0,_0x4cb362,_0x294f90,_0x1e9ffe,_0x3496cb){return hk(),lf||(lf={'formats':sk(_0x3136a0)}),vu['enqueueJob'](_0x4cb362,_0x294f90,_0x1e9ffe,{'deviceDetails':lf,'isGGGR':!!(_0x3496cb!=null&&_0x3496cb['isGGGR']),'isKTX2':!!(_0x3496cb!=null&&_0x3496cb['isKTX2'])}),xu;}class qn{['load'](_0x1830fd,_0x43e53d,_0x4ee0f6){throw new Error('not\x20implem'+'ented');}['open'](_0x17b764,_0xfd6432,_0x2f71b9){throw new Error('not\x20implem'+'ented');}}class dk extends qn{constructor(_0x2ecac7,_0xd11e5c){super(),this['device']=_0xd11e5c,this['maxRetries']=-0x7e3+0x55b*-0x1+0xd3e;}['load'](_0x1a60bb,_0x53a0ad,_0x2de5b2){const _0x542b2d=this['device'],_0x1448bc=_0x20fc76=>{var _0x175116,_0x32a26f,_0x4521b0;Hv(_0x542b2d,_0x1a60bb['load'],_0x20fc76,_0x53a0ad,{'isGGGR':(((_0x4521b0=(_0x32a26f=(_0x175116=_0x2de5b2==null?void(0x32*-0xc5+0xf3c+0x173e):_0x2de5b2['file'])==null?void(-0xd47+-0x2ac+0x1*0xff3):_0x175116['variants'])==null?void(-0x1e5*-0x7+-0x19e*-0x7+-0x1d*0xd9):_0x32a26f['basis'])==null?void(-0x113*-0x9+0x1d1b*-0x1+0x1370):_0x4521b0['opt'])&-0x1*0x3f1+0x1e28+-0x1a2f*0x1)!==0x419*-0x6+-0x1*0x15ff+0x2e95})||_0x53a0ad('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x2de5b2['name']+']('+_0x2de5b2['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.'));};pe['fetchArray'+'Buffer'](_0x1a60bb['load'],(_0x5241a7,_0x1c6f02)=>{_0x5241a7?_0x53a0ad(_0x5241a7):_0x1448bc(_0x1c6f02);},_0x2de5b2,this['maxRetries']);}['open'](_0x5e1a83,_0x316344,_0x17a231,_0x1b3ea1={}){const _0x2a9b21=_0x1b3ea1['srgb']?zh(_0x316344['format']):_0x316344['format'],_0x1de39d=new _e(_0x17a231,{'name':_0x5e1a83,'profilerHint':Er,'addressU':_0x316344['cubemap']?ue:yt,'addressV':_0x316344['cubemap']?ue:yt,'width':_0x316344['width'],'height':_0x316344['height'],'format':_0x2a9b21,'cubemap':_0x316344['cubemap'],'levels':_0x316344['levels'],..._0x1b3ea1});return _0x1de39d['upload'](),_0x1de39d;}}const Wv=new Uint8Array([-0x9b+0x106c+0x28c*-0x6,-0x2392+-0xad5+-0x1*-0x2eb7,0x632*0x1+0xb6d+-0x1*0x1151,0x245b*-0x1+-0x1*0x64f+0x2af1*0x1,-0x1*-0x1945+0x4*-0x90a+0x230*0x5,-0x209*-0xe+0x1*0x22ab+-0x1*0x3f1f,-0xd3b+0x25f6+-0x5*0x4ed,-0x2*-0xce5+-0x9*-0x9d+-0x1f45,0x3*-0x307+-0x5*0xcc+0xd11,0x9*-0x1a5+0xb*-0x305+0x3004,0x1f*-0x13d+0x1d*-0x116+-0x45e1*-0x1,-0x27b*0xe+-0x12fd*-0x1+0xfca,0x236a*-0x1+-0x1e91+0x4244,0x16e*-0x7+0x1279*0x1+-0x82f,0x94*0x1+0xa37+0xb*-0xf5,-0x1ac3+0x1f20+0x5*-0xcf,0xf6c+0x110b*0x1+-0x2077,-0xee7+-0xc*0xfe+0x1acf,0x198+-0x124d+0x2f*0x5b,0x1*-0xf0e+-0x2271+0xc6*0x40,-0x12f2+0x1cc0+-0x9ce,-0x1*-0x9f4+-0x180f+0x17*0x9d,0x35b*-0xa+-0x106+-0x2294*-0x1,0x1ba4+-0x2573*-0x1+-0x4116,0x1869*-0x1+0xf*-0x281+-0x7c0*-0x8,-0x1*0x23bc+0x769+0x1c59,-0x210b+-0x1a85+-0x8*-0x772,0x12a6+-0x1115+0x1*-0x191,0xced+0x397*-0xa+0x1*0x16f9,0x1655+-0x20e8+0xab2,0x23e7+0x1*0x1f07+0x42d9*-0x1,0x427+-0x99b*-0x2+-0x1699*0x1,0x2684+0x21b8+-0xe57*0x5,-0x23ac+-0x13*-0x4a+0x1e2e,-0x19d9+-0x22e4+-0x47*-0xdb,-0xa*-0x9e+0x230c+-0x527*0x8,0x20d*0x1+-0x1d6f+0x1b6f,-0x1*0xedf+0xc*-0x2eb+0x322c,0x1*-0x11bd+0x1d12+-0xb11,0x317+0x1e72+0x4*-0x852,0x1c7e+-0x185f+0x1*-0x3cb,0x1*0xb35+0xab8+-0x1*0x1575,0x1625+0x25cc+-0x3b17*0x1,0x2*0xfb3+-0x45e*-0x1+-0x1*0x2361,0x1*0x1e33+-0x2*-0x11fc+-0x15ed*0x3,0x14f7+0x1b*-0x76+-0x821,0x34f+-0x1*0x17ab+-0xa5f*-0x2,-0x1*-0x35f+0x1*0x9b9+-0xc62,-0x47*0x59+-0x1*-0x2149+-0x893*0x1,0x45*-0x3+-0x269e+0x276d*0x1,-0x26ae+0xeff+-0x17af*-0x1,-0x1*0x373+-0x2f*0x9+0x573,0x1*-0xb68+-0x83b*-0x1+0x32d,0xcc4+0x1*-0xaab+-0x1d2,-0x9*0x3b3+0x24b*-0x9+0x3631*0x1,0x250f+-0x2b*0xb5+-0x623,-0x66*-0x42+-0xc07+0xdb1*-0x1,-0xcb2+0x5e8+-0x19*-0x4f,-0x1a63+-0x22e3+0x3d46,-0x161*0x3+-0x83*0x1a+0x1171,0x66a*0x3+-0x41a+0x66*-0x26,-0x11c2+0x3*-0x447+0x29*0xbf,-0x143*0x1e+-0x1*-0x788+0x1e9b*0x1,-0xf2a+0x2*-0x2b5+-0x14d9*-0x1,-0xb*-0x7c+-0x26a9+0x6d*0x4f,-0x25d9+0x41c+0x2201,-0x6b*-0xc+-0x1*0x1c7f+0x1829,-0x1565*-0x1+-0x1404+-0x11f,-0x1*-0x3a1+-0x1132+0xdf1,-0x4*-0x259+-0x7*0x48f+0x1*0x1707]),$v=(_0x23521a,_0x27feed)=>{const _0x15a223=new _e(_0x23521a,{'width':0x1,'height':0x1,'format':Ne,'mipmaps':!(-0x1f84+-0x1d3+0x2158*0x1),'levels':[_0x27feed]}),_0x1dc522=new gt({'colorBuffer':_0x15a223,'depth':!(-0x447*-0x3+0x1*0x99b+-0x166f)});_0x23521a['setFramebu'+'ffer'](_0x1dc522['impl']['_glFrameBu'+'ffer']),_0x23521a['initRender'+'Target'](_0x1dc522);const _0x928a17=new Uint8ClampedArray(-0x14c7+-0x2e*-0xd6+0x19b*-0xb);return _0x23521a['gl']['readPixels'](-0x13e4+0x24f7+0x1*-0x1113,-0x149b+0x6*-0x430+0x1*0x2dbb,-0x236*-0xc+0x2567+-0x3fee,-0x1e4*-0xe+0x27*0x6a+-0x2a9d,_0x23521a['gl']['RGBA'],_0x23521a['gl']['UNSIGNED_B'+'YTE'],_0x928a17),_0x1dc522['destroy'](),_0x15a223['destroy'](),_0x928a17[-0x9dd+-0x3*-0xacf+0x1*-0x1690]===0x13e0*-0x1+-0x2*0x10f1+-0x1*-0x35c3&&_0x928a17[0x979+-0x71f*0x3+0xf*0xcb]===0x11*-0xb8+0xde9+-0x1af&&_0x928a17[0xbfa+0x4f9+-0x10f1]===-0xb8*0x26+-0x826*-0x1+0x132d*0x1&&_0x928a17[0x13*-0x11b+0x1529*-0x1+0xb1*0x3d]===-0x1c1d+0x12e+0x1b2e;},fk=_0x5e20ca=>createImageBitmap(new Blob([Wv],{'type':'image/png'}),{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0x46ec2f=>$v(_0x5e20ca,_0x46ec2f))['catch'](_0x27fbf9=>!(-0x1aa4+0x2f0*0x5+0x1*0xbf5)),uk=_0x598a47=>new Promise((_0x53f1c2,_0x1d0c42)=>{const _0x151722=new Image();_0x151722['src']=URL['createObje'+'ctURL'](new Blob([Wv])),_0x151722['onload']=()=>{_0x53f1c2($v(_0x598a47,_0x151722));};});class pk{static['run'](_0x14983d){fk(_0x14983d)['then'](_0x1349ac=>{console['log']('imageBitma'+'pIsCorrect'+'='+_0x1349ac);}),uk(_0x14983d)['then'](_0x27c581=>{console['log']('imgElement'+'IsCorrect='+_0x27c581);});}}class mk extends qn{constructor(_0x31b9be,_0x5254ed){super(),this['crossOrigi'+'n']=_0x31b9be['prefix']?'anonymous':null,this['maxRetries']=-0x1b74+-0x1dbd*-0x1+-0x249,this['device']=_0x5254ed,mi['get']('IMG_ALPHA_'+'TEST')&&pk['run'](this['device']);}['load'](_0x505ec4,_0xcff6a4,_0x40417c){var _0x2218f5;const _0x541404=!!((_0x2218f5=_0x40417c==null?void(0xd65+0x17b*-0x19+-0xbcf*-0x2):_0x40417c['file'])!=null&&_0x2218f5['contents']);if(_0x541404){if(this['device']['supportsIm'+'ageBitmap']){this['_loadImage'+'BitmapFrom'+'Blob'](new Blob([_0x40417c['file']['contents']]),_0xcff6a4);return;}_0x505ec4={'load':URL['createObje'+'ctURL'](new Blob([_0x40417c['file']['contents']])),'original':_0x505ec4['original']};}const _0x38e77=(_0x1ca8d5,_0x1a7e85)=>{_0x541404&&URL['revokeObje'+'ctURL'](_0x505ec4['load']),_0xcff6a4(_0x1ca8d5,_0x1a7e85);};let _0xf97aee;_0x40417c&&_0x40417c['options']&&_0x40417c['options']['hasOwnProp'+'erty']('crossOrigi'+'n')?_0xf97aee=_0x40417c['options']['crossOrigi'+'n']:Vn['test'](_0x505ec4['load'])&&(_0xf97aee=this['crossOrigi'+'n']),this['device']['supportsIm'+'ageBitmap']?this['_loadImage'+'Bitmap'](_0x505ec4['load'],_0x505ec4['original'],_0xf97aee,_0x38e77,_0x40417c):this['_loadImage'](_0x505ec4['load'],_0x505ec4['original'],_0xf97aee,_0x38e77);}['open'](_0x382de4,_0x4dd689,_0x569dc3,_0x5927bb={}){const _0x4999f9=new _e(_0x569dc3,{'name':_0x382de4,'profilerHint':Er,'width':_0x4dd689['width'],'height':_0x4dd689['height'],'format':_0x5927bb['srgb']?_s:Ne,..._0x5927bb});return _0x4999f9['setSource'](_0x4dd689),_0x4999f9;}['_loadImage'](_0xf98e93,_0x30dc8a,_0x343d03,_0x1f2e11){const _0x1ec4e8=new Image();_0x343d03&&(_0x1ec4e8['crossOrigi'+'n']=_0x343d03);let _0x2fbfd0=-0x1*0x1445+-0x193f+0x16c2*0x2;const _0x283c93=this['maxRetries'];let _0x471e25;_0x1ec4e8['onload']=function(){_0x1f2e11(null,_0x1ec4e8);},_0x1ec4e8['onerror']=function(){if(!_0x471e25){if(_0x283c93>0x95+0x15*-0x125+0x1774&&++_0x2fbfd0<=_0x283c93){const _0x13f421=Math['pow'](-0x5*0x1ed+0x24c7+0x4*-0x6c9,_0x2fbfd0)*(0x146*0xb+-0x1*0xe75+0xd7);console['log']('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0x30dc8a+('\x27\x20-\x20Retryi'+'ng\x20in\x20')+_0x13f421+'ms...');const _0x41b610=_0xf98e93['indexOf']('?')>=-0x2602+0x1876+0xd8c?'&':'?';_0x471e25=setTimeout(()=>{_0x1ec4e8['src']=_0xf98e93+_0x41b610+'retry='+Date['now'](),_0x471e25=null;},_0x13f421);}else _0x1f2e11('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0x30dc8a+'\x27');}},_0x1ec4e8['src']=_0xf98e93;}['_loadImage'+'Bitmap'](_0x26a609,_0x3e9497,_0x2dc0c8,_0x859cb4,_0x31b698){const _0x2ee196={'cache':!(0xf92*0x1+-0x4f7*0x3+-0xad),'responseType':'blob','retry':this['maxRetries']>0x26e6+0x8d2+-0x8*0x5f7,'maxRetries':this['maxRetries'],'progress':_0x31b698};ot['get'](_0x26a609,_0x2ee196,(_0x5a1822,_0x3833f7)=>{_0x5a1822?_0x859cb4(_0x5a1822):this['_loadImage'+'BitmapFrom'+'Blob'](_0x3833f7,_0x859cb4);});}['_loadImage'+'BitmapFrom'+'Blob'](_0x18c2e9,_0x1335d3){createImageBitmap(_0x18c2e9,{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0x2fdc52=>_0x1335d3(null,_0x2fdc52))['catch'](_0x4d2fbe=>_0x1335d3(_0x4d2fbe));}}const cf=[-0x11364*0x3c63+0x1f*0x47885f5+0xeb202ac,0x1adccd55*-0x5+-0x48f5ef73+0x18a77233c,0x3e83*0x6ec+-0x23ac25e+0xaa419a7],_k={0x83f0:Rh,0x83f2:Ou,0x83f3:ol,0x8d64:Fh,0x9274:Nu,0x9278:ku,0x8c00:Nh,0x8c01:ll,0x8c02:kh,0x8c03:cl,0x8051:wr,0x8058:Ne,0x8c41:Fu,0x8c43:_s,0x8c3a:En,0x881b:ui,0x881a:nt};function gk(_0xf550d4,_0x29185a,_0x256b1,_0xa00d27){return _0xf550d4===En?new Uint32Array(_0x29185a,_0x256b1,_0xa00d27/(0x296*-0x2+-0x92b+-0x4b*-0x31)):new Uint8Array(_0x29185a,_0x256b1,_0xa00d27);}class Sk extends qn{constructor(_0x5e5e5a){super(),this['maxRetries']=0x180d*0x1+0x10c5+0x13*-0x226;}['load'](_0x39e682,_0x515a55,_0x3d3ffe){pe['fetchArray'+'Buffer'](_0x39e682['load'],_0x515a55,_0x3d3ffe,this['maxRetries']);}['open'](_0x11e381,_0x1d7141,_0x59ca60,_0x1ffe17={}){const _0x1d3fcc=this['parse'](_0x1d7141);if(!_0x1d3fcc)return null;const _0xcf0f5a=_0x1ffe17['srgb']?zh(_0x1d3fcc['format']):_0x1d3fcc['format'],_0x437d19=new _e(_0x59ca60,{'name':_0x11e381,'profilerHint':Er,'addressU':_0x1d3fcc['cubemap']?ue:yt,'addressV':_0x1d3fcc['cubemap']?ue:yt,'width':_0x1d3fcc['width'],'height':_0x1d3fcc['height'],'format':_0xcf0f5a,'cubemap':_0x1d3fcc['cubemap'],'levels':_0x1d3fcc['levels'],..._0x1ffe17});return _0x437d19['upload'](),_0x437d19;}['parse'](_0x28ab4a){const _0x8f5d97=new Uint32Array(_0x28ab4a);if(cf[0x2*-0x724+0x1*-0x11f+0x1*0xf67]!==_0x8f5d97[0x13e+-0x80*-0x2b+-0x16be]||cf[0x1e3a+-0x1*-0x876+0x3*-0xce5]!==_0x8f5d97[-0x21a6+-0x381+0x4*0x94a]||cf[-0x1609+-0x1309*-0x2+0x1*-0x1007]!==_0x8f5d97[0x10c+0xaec+-0xbf6])return w['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX\x20f'+'ile.\x20Expec'+'ted\x200xAB4B'+'5458,\x200x20'+'3131BB,\x200x'+'0D0A1A0A'),null;const _0x14e7e3={'endianness':_0x8f5d97[0x1f9*-0xd+0x2*-0x62f+0x2606],'glType':_0x8f5d97[-0x12c5+-0x3*-0xcf7+-0x141c],'glTypeSize':_0x8f5d97[0xcbc+-0x211*0x4+-0x473],'glFormat':_0x8f5d97[-0x88f+0x52+0x843],'glInternalFormat':_0x8f5d97[0x568*0x7+0x1*0xc5f+-0x3230],'glBaseInternalFormat':_0x8f5d97[-0x2*0xd9+0x3*0x112+-0x17c],'pixelWidth':_0x8f5d97[0x1c74+-0x301+-0x196a],'pixelHeight':_0x8f5d97[0x443+-0x29*0xad+0x177c],'pixelDepth':_0x8f5d97[-0x4*0x737+0x27b*-0xe+0x3fa1],'numberOfArrayElements':_0x8f5d97[0x150f+-0x699*0x2+-0x7d1],'numberOfFaces':_0x8f5d97[-0x1155+-0x292+0x13f4],'numberOfMipmapLevels':_0x8f5d97[0x8dd*-0x1+0x1fd0+-0x16e5],'bytesOfKeyValueData':_0x8f5d97[-0x1*0x9d3+-0x1e7*-0x14+-0x23*0xce]};if(_0x14e7e3['pixelDepth']>0xe*0xd9+0x262b+-0x3208)return w['warn']('More\x20than\x20'+'1\x20pixel\x20de'+'pth\x20not\x20su'+'pported!'),null;if(_0x14e7e3['numberOfAr'+'rayElement'+'s']!==0x9*-0x416+-0x9*0x1f+-0x3*-0xc9f)return w['warn']('Array\x20text'+'ure\x20not\x20su'+'pported!'),null;const _0x58657d=_k[_0x14e7e3['glInternal'+'Format']];if(_0x58657d===void(-0x2a3+-0xf38+0x11db))return w['warn']('Unknown\x20gl'+'InternalFo'+'rmat:\x20'+_0x14e7e3['glInternal'+'Format']),null;let _0xf3b5ee=-0x1bd2+-0x1740+0x74e*0x7+_0x14e7e3['bytesOfKey'+'ValueData']/(0x3*-0x10d+-0xe*0x50+-0x1*-0x78b);const _0x147ae2=_0x14e7e3['numberOfFa'+'ces']>0x3*-0x3e+0x2e3*-0x4+0x1c1*0x7,_0x2ede81=[];for(let _0x45a710=0x257c+-0x12*0x12d+-0x1052;_0x45a710<(_0x14e7e3['numberOfMi'+'pmapLevels']||0x25*-0x94+-0x248+0x17ad);_0x45a710++){const _0x158d57=_0x8f5d97[_0xf3b5ee++];_0x147ae2&&_0x2ede81['push']([]);const _0x25979e=_0x147ae2?_0x2ede81[_0x45a710]:_0x2ede81;for(let _0x268851=-0x268d+0x1*0x6da+0x1fb3;_0x268851<(_0x147ae2?-0xb*-0x31d+-0x1*-0xfde+-0x3217:-0xdf*-0x1e+0x223b+-0x3c5c);++_0x268851)_0x25979e['push'](gk(_0x58657d,_0x28ab4a,_0xf3b5ee*(0x2313+-0x79*0xa+-0x1e55),_0x158d57)),_0xf3b5ee+=_0x158d57+(0xf1f*0x2+0x27d*0x4+-0x9*0x477)>>-0xf73+0x34*0x32+0x54d;}return{'format':_0x58657d,'width':_0x14e7e3['pixelWidth'],'height':_0x14e7e3['pixelHeigh'+'t'],'levels':_0x2ede81,'cubemap':_0x147ae2};}}const yk={'KHR_DF_MODEL_UASTC':0xa6};class vk extends qn{constructor(_0x3c1273,_0x29ffac){super(),this['maxRetries']=0x259a+-0x11ca+-0x13d0,this['device']=_0x29ffac;}['load'](_0x12211c,_0x3eca7e,_0x25c967){pe['fetchArray'+'Buffer'](_0x12211c['load'],(_0x3a997c,_0x42f949)=>{_0x3a997c?_0x3eca7e(_0x3a997c,_0x42f949):this['parse'](_0x42f949,_0x12211c,_0x3eca7e,_0x25c967);},_0x25c967,this['maxRetries']);}['open'](_0x47e377,_0xa2c98a,_0x3042c2,_0x107b45={}){const _0x351aae=_0x107b45['srgb']?zh(_0xa2c98a['format']):_0xa2c98a['format'],_0x33f427=new _e(_0x3042c2,{'name':_0x47e377,'profilerHint':Er,'addressU':_0xa2c98a['cubemap']?ue:yt,'addressV':_0xa2c98a['cubemap']?ue:yt,'width':_0xa2c98a['width'],'height':_0xa2c98a['height'],'format':_0x351aae,'cubemap':_0xa2c98a['cubemap'],'levels':_0xa2c98a['levels'],..._0x107b45});return _0x33f427['upload'](),_0x33f427;}['parse'](_0x25ed9f,_0x4bb9fb,_0x3b8bac,_0x107be8){var _0x56c83d,_0x26ac17,_0x3d163b;const _0x25b6e8=new pS(_0x25ed9f),_0x146208=[_0x25b6e8['readU32be'](),_0x25b6e8['readU32be'](),_0x25b6e8['readU32be']()];if(_0x146208[0x3*0x5d6+-0x3*0xbcb+0x11df]!==0x2236c7*-0x4b2+0xb97b7b*-0x1be+0x28f15a700||_0x146208[-0xe03+-0x1842+0x2646]!==0x863fe0*-0x27+0x1a041356+-0x3d1*-0x6fa75||_0x146208[-0x152a*0x1+-0x581+0x1*0x1aad]!==0x166269a*-0x11+-0xca7b670+0x317a60b4)return w['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX2\x20'+'file.\x20Expe'+'cted\x200xAB4'+'B5458,\x200x2'+'03131BB,\x200'+'x0D0A1A0A'),null;const _0x4295a3={'vkFormat':_0x25b6e8['readU32'](),'typeSize':_0x25b6e8['readU32'](),'pixelWidth':_0x25b6e8['readU32'](),'pixelHeight':_0x25b6e8['readU32'](),'pixelDepth':_0x25b6e8['readU32'](),'layerCount':_0x25b6e8['readU32'](),'faceCount':_0x25b6e8['readU32'](),'levelCount':_0x25b6e8['readU32'](),'supercompressionScheme':_0x25b6e8['readU32']()},_0x573f84={'dfdByteOffset':_0x25b6e8['readU32'](),'dfdByteLength':_0x25b6e8['readU32'](),'kvdByteOffset':_0x25b6e8['readU32'](),'kvdByteLength':_0x25b6e8['readU32'](),'sgdByteOffset':_0x25b6e8['readU64'](),'sgdByteLength':_0x25b6e8['readU64']()},_0x5d410f=[];for(let _0x3eb593=-0x8*-0x11+-0x6*-0x515+-0xf83*0x2;_0x3eb593<Math['max'](-0xbd5*-0x3+-0x61b*-0x1+-0x2999,_0x4295a3['levelCount']);++_0x3eb593)_0x5d410f['push']({'byteOffset':_0x25b6e8['readU64'](),'byteLength':_0x25b6e8['readU64'](),'uncompressedByteLength':_0x25b6e8['readU64']()});if(_0x25b6e8['readU32']()!==_0x573f84['kvdByteOff'+'set']-_0x573f84['dfdByteOff'+'set'])return w['warn']('Invalid\x20fi'+'le\x20data\x20en'+'countered.'),null;_0x25b6e8['skip'](0x47*-0x67+-0xa71+0x270a);const _0x298d97=_0x25b6e8['readU8']();_0x25b6e8['skip'](_0x573f84['dfdByteLen'+'gth']-(0x1*0x943+-0x1*0xc83+0x349*0x1)),_0x25b6e8['skip'](_0x573f84['kvdByteLen'+'gth']),_0x4295a3['supercompr'+'essionSche'+'me']===-0x607*0x5+0x5a+-0x1*-0x1dca||_0x298d97===yk['KHR_DF_MOD'+'EL_UASTC']?Hv(this['device'],_0x4bb9fb['load'],_0x25ed9f,_0x3b8bac,{'isGGGR':(((_0x3d163b=(_0x26ac17=(_0x56c83d=_0x107be8==null?void(-0x2d5*-0x5+-0x1e61+0x3*0x568):_0x107be8['file'])==null?void(-0x8*-0x4af+-0xb*-0x2ef+-0x173f*0x3):_0x56c83d['variants'])==null?void(-0xe*0x1f7+0x7*0x38f+-0x1*-0x299):_0x26ac17['basis'])==null?void(-0xa99*-0x1+-0x790+-0x309):_0x3d163b['opt'])&0x5*0x64+-0x7*0x9+-0x27*0xb)!==0x21d9+0x4af+-0x2688,'isKTX2':!(-0x2525*0x1+-0x5*0x241+0x1*0x306a)})||_0x3b8bac('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x107be8['name']+']('+_0x107be8['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.')):_0x3b8bac('unsupporte'+'d\x20KTX2\x20pix'+'el\x20format');}}class xk extends qn{constructor(_0x139a73){super(),this['maxRetries']=0x11c6+0x1e02+0x8*-0x5f9;}['load'](_0x2dd4da,_0x1d15b9,_0x58d5a6){pe['fetchArray'+'Buffer'](_0x2dd4da['load'],_0x1d15b9,_0x58d5a6,this['maxRetries']);}['open'](_0xfd07e7,_0xa6a230,_0x44f5eb,_0x399faf={}){const _0x5c84b7=new Uint32Array(_0xa6a230,-0x35*-0x1+0x2*0x5c9+-0xbc7,-0x229b+-0x1*0x937+0x2bf2),_0x46054c=_0x5c84b7[-0xabd*-0x1+-0x2e1*-0x1+0x1*-0xd9a],_0x332688=_0x5c84b7[0x65f+0x1*-0x671+0x15],_0x272ee4=Math['max'](_0x5c84b7[0x86*0x1+0xaba+-0xb39],0x1214+0x6d0+-0x18e3),_0x3da7da=_0x5c84b7[-0x2f*0xb+0x2013+-0x1dfa]===-0xb3+0x1279+-0x8e1*0x2,_0xdb1840=_0x5c84b7[0x1ffc+0x2*-0x23b+-0x1b71],_0x5ea891=_0x5c84b7[0x2ef+-0x24f6+0x221d],_0x1feaae=_0x5c84b7[0x21d9+0x141b+-0x35d8]===-0x1d*0xbd+0x1*0xf961+-0x11*-0x188,_0x16b6b2=-0x6098e536+-0x613ca37+0x1*0x980107b1,_0x240adf=-0x1*0x17933c9f+0x526e3e0e+-0x586a92b,_0x5be9c8=0x175*-0xe+-0x71*-0x28+0x32f,_0x1bb0e2=-0x2*0x6e6+-0x1*-0x1b35+-0xcf5,_0x539d0b=-0x5c664e6c+-0x4c892458+-0xcd5cf79*-0x11,_0x2cf7af=-0x4dd68c1c+-0x51f3ca15+0xd0fd8881,_0x142b9b=0x1894d7d0+0x17dfa802+0xbfb27e,_0x302dae=0x57d6bf5a+0x1*-0x299eca36+0x19710a*0x1e,_0x29d22a=-0x7843346+0x1e9*-0x6ad64+0x45799b9a;let _0x5ea74e=!(-0x165f+-0x2db*-0x4+0xaf4),_0x2b1cab=!(0x14e4*-0x1+-0x1f*-0x12f+-0xfcc),_0x4cee42=!(-0x12f2+0x21fa+-0xf07*0x1),_0xab2311=!(0x1d*-0xa7+-0x1a93+0x2d7f),_0x2f3595=null,_0xaf7314=0x1*0xd98+-0xb45+0x63*-0x6,_0xe058a7;if(_0x3da7da?_0xdb1840===_0x16b6b2?(_0x2f3595=Rh,_0x5ea74e=!(0xc4d+0x27d+-0xeca)):_0xdb1840===_0x240adf?(_0x2f3595=ol,_0x5ea74e=!(0x1ad7*0x1+-0x1*0x1e5f+0x388)):_0xdb1840===_0x5be9c8?(_0x2f3595=nt,_0xaf7314=-0x1*-0x22b3+0x477*-0x8+0x107):_0xdb1840===_0x1bb0e2?(_0x2f3595=Xt,_0xaf7314=-0x150a+-0x1*0x1c1f+-0x1*-0x312d):_0xdb1840===_0x539d0b?(_0x2f3595=Fh,_0x5ea74e=!(-0x1712+-0x3*0x271+0xfb*0x1f),_0x2b1cab=!(0x14f9+0xe2*0x7+-0x1b27)):_0xdb1840===_0x2cf7af||_0xdb1840===_0x142b9b?(_0x2f3595=_0xdb1840===_0x2cf7af?ll:cl,_0x5ea74e=!(-0x1*0x2306+0x17*-0x6a+0x2c8c),_0x4cee42=!(-0x18e*0x1+-0x267d+0x25b*0x11)):(_0xdb1840===_0x302dae||_0xdb1840===_0x29d22a)&&(_0x2f3595=_0xdb1840===_0x302dae?Nh:kh,_0x5ea74e=!(0x18bb+0x1*0x4c1+-0x1d7c),_0xab2311=!(-0x139+-0x239*-0x5+-0x9e4)):_0x5ea891===-0x992+0x48e*-0x3+0xe6*0x1a&&(_0x2f3595=Ne),!_0x2f3595)return w['error']('This\x20DDS\x20p'+'ixel\x20forma'+'t\x20is\x20curre'+'ntly\x20unsup'+'ported.\x20Em'+'pty\x20textur'+'e\x20will\x20be\x20'+'created\x20in'+'stead\x20of\x20'+_0xfd07e7+'.'),_0xe058a7=new _e(_0x44f5eb,{'width':0x4,'height':0x4,'format':wr,'name':'dds-legacy'+'-empty'}),_0xe058a7;_0xe058a7=new _e(_0x44f5eb,{'name':_0xfd07e7,'profilerHint':Er,'addressU':_0x1feaae?ue:yt,'addressV':_0x1feaae?ue:yt,'width':_0x46054c,'height':_0x332688,'format':_0x2f3595,'cubemap':_0x1feaae,'mipmaps':_0x272ee4>-0x35f*0x7+0x1*-0x1af3+0x328d,..._0x399faf});let _0xfd9cf5=0x1*-0x1654+0x1b8d+-0x1f*0x27;const _0x1d4dbf=_0x1feaae?-0x91f*-0x1+0x67f*0x1+-0xf98:-0x379*-0x6+-0x4d4+0x11*-0xf1;let _0x476cb8;const _0x6d82de=-0x1864+0x1492+0x3d6,_0x1ba1e2=-0x231e+0x1369+0x23f*0x7,_0x3d0e8b=_0xdb1840===_0x16b6b2?0x31*0xa5+0x1*-0x1e13+-0x17a:0x2*0xdf+-0x1f86+-0x14*-0x17e;let _0x3cd3c6,_0x1866b1,_0x5dd32f;for(let _0x3f55f8=-0x3*-0x6fb+-0x62*0x4e+0x8eb;_0x3f55f8<_0x1d4dbf;_0x3f55f8++){let _0x423aa8=_0x46054c,_0x31233a=_0x332688;for(let _0x536e1b=0x83*0x47+-0x1a82+-0x9d3*0x1;_0x536e1b<_0x272ee4;_0x536e1b++){_0x5ea74e?_0x2b1cab?_0x476cb8=Math['floor']((_0x423aa8+(-0x192f+0x10f*0x22+-0xacc))/(0x1*0x1056+-0x476*0x1+-0xbdc))*Math['floor']((_0x31233a+(-0x23ab+-0x2176*-0x1+0x238))/(0x1e80+0x6e6+-0x2562))*(0x8*0x213+-0x1*-0x893+-0x1923):_0x4cee42?_0x476cb8=Math['max'](_0x423aa8,0x7*-0x223+-0x1f51+0x526*0x9)*Math['max'](_0x31233a,0x3*0xb25+-0xcfe+-0x1469)/(0x2b*-0x2f+-0x5e4+0xdcd):_0xab2311?_0x476cb8=Math['max'](_0x423aa8,0x2*-0x557+0x114e+0x8*-0xd3)*Math['max'](_0x31233a,0x3d*-0x34+0x1d*0x91+0x1*-0x401)/(0x2218+-0x62a+-0x1bec):(_0x3cd3c6=Math['floor']((_0x423aa8+_0x6d82de-(0x2470+0x5*0x6fe+0xa33*-0x7))/_0x6d82de),_0x1866b1=Math['floor']((_0x31233a+_0x1ba1e2-(-0xa9f*0x1+-0x209c*0x1+0x159e*0x2))/_0x1ba1e2),_0x5dd32f=_0x3cd3c6*_0x1866b1,_0x476cb8=_0x5dd32f*_0x3d0e8b):_0x476cb8=_0x423aa8*_0x31233a*(0x1d86+0x1*0x2109+-0x3e8b);const _0x2fdfdd=_0x2f3595===Xt?new Float32Array(_0xa6a230,_0xfd9cf5,_0x476cb8):_0x2f3595===nt?new Uint16Array(_0xa6a230,_0xfd9cf5,_0x476cb8):new Uint8Array(_0xa6a230,_0xfd9cf5,_0x476cb8);_0x1feaae?(_0xe058a7['_levels'][_0x536e1b]||(_0xe058a7['_levels'][_0x536e1b]=[]),_0xe058a7['_levels'][_0x536e1b][_0x3f55f8]=_0x2fdfdd):_0xe058a7['_levels'][_0x536e1b]=_0x2fdfdd,_0xfd9cf5+=_0x476cb8*_0xaf7314,_0x423aa8=Math['max'](_0x423aa8*(-0x195e+0x20d7+-0x779*0x1+0.5),-0x1a3*0xf+-0x8db*-0x3+-0x203),_0x31233a=Math['max'](_0x31233a*(0x1*-0x43+-0x599+-0xf*-0x64+0.5),0x811*-0x3+-0x1*0x2638+0x3e6c);}}return _0xe058a7['upload'](),_0xe058a7;}}class Tk extends qn{constructor(_0x4e439b){super(),this['maxRetries']=0x4a*0x2f+0x17f*-0x11+0xbd9;}['load'](_0x463592,_0x239fb5,_0x4578d6){pe['fetchArray'+'Buffer'](_0x463592['load'],_0x239fb5,_0x4578d6,this['maxRetries']),_0x4578d6['data']&&!_0x4578d6['data']['type']&&(_0x4578d6['data']['type']=qc);}['open'](_0x4881eb,_0x56b896,_0x4e04dc,_0x587ab7={}){const _0x57afa5=this['parse'](_0x56b896);if(!_0x57afa5)return null;const _0x51fecc=new _e(_0x4e04dc,{'name':_0x4881eb,'profilerHint':Er,'addressU':yt,'addressV':ue,'minFilter':Te,'magFilter':Te,'width':_0x57afa5['width'],'height':_0x57afa5['height'],'levels':_0x57afa5['levels'],'format':Ne,'type':qc,'mipmaps':!(-0x19b6+-0x9d1+-0x3*-0xbd8),..._0x587ab7});return _0x51fecc['upload'](),_0x51fecc;}['parse'](_0x4ac1bf){const _0x349356=new pS(_0x4ac1bf);if(!_0x349356['readLine']()['startsWith']('#?RADIANCE'))return w['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20ma'+'gic'),null;const _0x4dbc5c={};for(;;){const _0x39f4bb=_0x349356['readLine']();if(_0x39f4bb['length']===0x53*0xe+-0x50b*0x3+-0x1*-0xa97)break;{const _0xbe33a2=_0x39f4bb['split']('=');_0xbe33a2['length']===0x1471*0x1+0x52b+0x1d*-0xe2&&(_0x4dbc5c[_0xbe33a2[-0x729+-0x5*-0x6d5+-0x900*0x3]]=_0xbe33a2[-0xd2a+-0x1044+0x1d6f]);}}if(!_0x4dbc5c['hasOwnProp'+'erty']('FORMAT'))return w['error']('radiance\x20h'+'eader\x20miss'+'ing\x20FORMAT'+'\x20variable'),null;const _0x42a71e=_0x349356['readLine']()['split']('\x20');if(_0x42a71e['length']!==0x1*-0xc2+0x2d*0x3+0x7*0x9)return w['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20re'+'solution'),null;const _0x49b42f=parseInt(_0x42a71e[0x1*0x244d+-0x30b+0x2141*-0x1],0xd*0x1+-0x23f1+0x23ee),_0x55ea21=parseInt(_0x42a71e[0x70c+0x244c+-0x2b55],0x25d*0xf+0x5c2+-0x292b),_0x3fce96=this['_readPixel'+'s'](_0x349356,_0x55ea21,_0x49b42f,_0x42a71e[-0xd2e+0x1f96+-0x4c*0x3e]==='-Y');return _0x3fce96?{'width':_0x55ea21,'height':_0x49b42f,'levels':[_0x3fce96]}:null;}['_readPixel'+'s'](_0x5edd2d,_0x5949c9,_0x1b5c16,_0x49819b){if(_0x5949c9<-0x52f*-0x4+-0x693+-0xe21*0x1||_0x5949c9>0x442*-0x1d+-0x39ee+0x67*0x301)return this['_readPixel'+'sFlat'](_0x5edd2d,_0x5949c9,_0x1b5c16);const _0x17ce34=[0xd02+0x18f+0xb*-0x153,-0x21d5+-0x2e7*0x7+0x3626,0x2e4+0x1cd4+-0x1fb8,-0x15*0x1db+-0x1207+0x38fe];if(_0x5edd2d['readArray'](_0x17ce34),_0x17ce34[-0x2143*-0x1+-0x1ef1+0xc6*-0x3]!==-0x3*-0xbee+0x5*-0x365+0x2d*-0x6b||_0x17ce34[-0xd59+-0x3*-0x647+-0x57b]!==-0x6c3+-0x2586+0x187*0x1d||(_0x17ce34[0x2*-0x121a+0x1*-0x531+0x2967*0x1]&-0x1*-0x1caa+-0x1e*-0x137+-0x409c)!==0x7*0x474+-0x4*-0x8e7+-0x859*0x8)return _0x5edd2d['skip'](-(0x6d9*-0x1+-0x7*-0x257+-0x984)),this['_readPixel'+'sFlat'](_0x5edd2d,_0x5949c9,_0x1b5c16);const _0x55e906=new ArrayBuffer(_0x5949c9*_0x1b5c16*(-0x20+-0xdd*0x3+-0x2bb*-0x1)),_0x194109=new Uint8Array(_0x55e906);let _0x2b77f4=_0x49819b?-0x1270+0x5*0x3b3+0x1*-0xf:_0x5949c9*(0x72a+0x27*0xd6+0xc*-0x350)*(_0x1b5c16-(0x1cfc+-0x291+0x62*-0x45)),_0x405ed5,_0x20ad06,_0x9e03,_0x5c7e8c,_0x4a7d62,_0x1036a2;for(_0x20ad06=0x1030+-0x2e7*0x6+0x13a;_0x20ad06<_0x1b5c16;++_0x20ad06){if(_0x20ad06&&_0x5edd2d['readArray'](_0x17ce34),(_0x17ce34[0x26*-0x3d+0x11fb*-0x1+0x1b0b]<<-0x13a3+0x989+0xa22)+_0x17ce34[-0xa24+0xc48*0x2+0x7*-0x20f]!==_0x5949c9)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'width'),null;for(_0x5c7e8c=0x8fd+0x673+0x68*-0x26;_0x5c7e8c<-0x1cfb+0x2*0x22b+0x18a9;++_0x5c7e8c)for(_0x405ed5=-0x1*0x595+0x23ef+-0x1e5a;_0x405ed5<_0x5949c9;)if(_0x4a7d62=_0x5edd2d['readU8'](),_0x4a7d62>0x3*-0x903+0x1115+0xa74){if(_0x4a7d62-=-0x61d+-0xc77+0x1314,_0x405ed5+_0x4a7d62>_0x5949c9)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x1036a2=_0x5edd2d['readU8'](),_0x9e03=-0x1*-0xb9b+0xca2+-0x16d*0x11;_0x9e03<_0x4a7d62;++_0x9e03)_0x194109[_0x2b77f4+_0x5c7e8c+(-0x1702+-0xd53+0x2459*0x1)*_0x405ed5++]=_0x1036a2;}else{if(_0x4a7d62===0x1c*-0x11b+-0x39*0x1+0x1f2d||_0x405ed5+_0x4a7d62>_0x5949c9)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x9e03=-0x261d+0x26f*0xd+0x67a*0x1;_0x9e03<_0x4a7d62;++_0x9e03)_0x194109[_0x2b77f4+_0x5c7e8c+(-0x1*0x1f97+-0x1644+0x35df)*_0x405ed5++]=_0x5edd2d['readU8']();}_0x2b77f4+=_0x5949c9*(0xb*-0x28e+0x5*0x5a+0x1a5c)*(_0x49819b?-0x1*0x1ff7+-0xc9b+0x1*0x2c93:-(-0x11eb+0x577+0xc75*0x1));}return _0x194109;}['_readPixel'+'sFlat'](_0x4bbda7,_0x53275a,_0xf2162c){return _0x4bbda7['remainingB'+'ytes']===_0x53275a*_0xf2162c*(0x1f2b+0x192+0x1*-0x20b9)?new Uint8Array(_0x4bbda7['arraybuffe'+'r'],_0x4bbda7['offset']):null;}}const qg={'repeat':yt,'clamp':ue,'mirror':Du},jg={'nearest':Te,'linear':vt,'nearest_mip_nearest':Ph,'linear_mip_nearest':Dh,'nearest_mip_linear':Mh,'linear_mip_linear':ha},wk={'default':Ms,'rgbm':Ki,'rgbe':qc,'rgbp':Bo,'swizzleGGGR':zo},Ek=function(_0x4ba9b8){const _0x3eece1=$i['calcMipLev'+'elsCount'](_0x4ba9b8['_width'],_0x4ba9b8['_height']),_0x303d5d=function(_0x14c893){return _0x14c893 instanceof HTMLCanvasElement||_0x14c893 instanceof HTMLImageElement||_0x14c893 instanceof HTMLVideoElement;};if(!(_0x4ba9b8['_format']===Ne||_0x4ba9b8['_format']===Xt)||_0x4ba9b8['_volume']||_0x4ba9b8['_compresse'+'d']||_0x4ba9b8['_levels']['length']===0x3a9*-0x1+0xdd2*0x1+-0xa28||_0x4ba9b8['_levels']['length']===_0x3eece1||_0x303d5d(_0x4ba9b8['_cubemap']?_0x4ba9b8['_levels'][0x16bf+-0x4*0x62c+0x47*0x7][0x2262+0x1c6b+-0x1*0x3ecd]:_0x4ba9b8['_levels'][-0x3*0x741+0x18ad*-0x1+-0x1*-0x2e70]))return;const _0x9d0c0b=function(_0x2e39d4,_0x1ca87b,_0x4c38ba){const _0x2c59c3=Math['max'](-0x1fdc+-0x4*0x789+0x3e01,_0x2e39d4>>0x229c+-0xd*-0x65+-0x27bc),_0x3010b4=Math['max'](-0x1167+0x5d5*-0x1+0x173d,_0x1ca87b>>-0x1171+-0x371*-0x5+-0x1*-0x3d),_0x4317c2=new _0x4c38ba['constructo'+'r'](_0x2c59c3*_0x3010b4*(-0x4e3+0x15fa+-0x1113)),_0x5e37e2=Math['floor'](_0x2e39d4/_0x2c59c3),_0x57e470=Math['floor'](_0x1ca87b/_0x3010b4),_0x2aca6e=_0x5e37e2*_0x57e470;for(let _0x368bf8=-0x26a*0x5+0x11*0x12e+-0x7fc;_0x368bf8<_0x3010b4;++_0x368bf8)for(let _0x1d4102=-0xa19*0x1+0xf05+-0x4ec;_0x1d4102<_0x2c59c3;++_0x1d4102)for(let _0x3497ea=-0x115f+-0x20f2+0x3251;_0x3497ea<0xa7c*0x3+0x1740+-0x6d6*0x8;++_0x3497ea){let _0x1f2c7a=-0xaa+0xf17+0xe6d*-0x1;for(let _0x51b31c=-0x1*-0x19f1+0xb0*0x9+-0x2021;_0x51b31c<_0x57e470;++_0x51b31c)for(let _0x5bd8b6=0x55*-0x19+0x1a82+-0x1235;_0x5bd8b6<_0x5e37e2;++_0x5bd8b6)_0x1f2c7a+=_0x4c38ba[(_0x1d4102*_0x5e37e2+_0x5bd8b6+(_0x368bf8*_0x57e470+_0x51b31c)*_0x2e39d4)*(0x2*0xa9f+0x35b*0x3+0x1f4b*-0x1)+_0x3497ea];_0x4317c2[(_0x1d4102+_0x368bf8*_0x2c59c3)*(-0x240b+-0x8*0x1e8+0x334f)+_0x3497ea]=_0x1f2c7a/_0x2aca6e;}return _0x4317c2;};for(let _0x16615d=_0x4ba9b8['_levels']['length'];_0x16615d<_0x3eece1;++_0x16615d){const _0x98f5ca=Math['max'](-0x1*0x913+0x2*-0x11db+0x7e*0x5b,_0x4ba9b8['_width']>>_0x16615d-(0x20a0+-0x236c+0x3*0xef)),_0x26e61b=Math['max'](-0x163f+-0x44+-0x2c*-0x83,_0x4ba9b8['_height']>>_0x16615d-(-0x4b+-0x27a+0x2c6));if(_0x4ba9b8['_cubemap']){const _0x396365=[];for(let _0x3dfc8a=-0x1d53+0x1fd4+-0x281;_0x3dfc8a<0x631+0xda8+0xaf*-0x1d;++_0x3dfc8a)_0x396365['push'](_0x9d0c0b(_0x98f5ca,_0x26e61b,_0x4ba9b8['_levels'][_0x16615d-(-0xf3f+0x2003*0x1+-0x10c3)][_0x3dfc8a]));_0x4ba9b8['_levels']['push'](_0x396365);}else _0x4ba9b8['_levels']['push'](_0x9d0c0b(_0x98f5ca,_0x26e61b,_0x4ba9b8['_levels'][_0x16615d-(0x42e+-0x31*0x16+0x9)]));}_0x4ba9b8['_levelsUpd'+'ated']=_0x4ba9b8['_cubemap']?[[!(0x4*0x7db+0x2*0x64f+-0x2c0a),!(-0x1d16+-0x67+0x1d7d),!(0x149*0x17+0x245a+-0x41e9*0x1),!(0x455*0x4+-0x1fd+0x165*-0xb),!(0x56*-0x55+0x13f2+0x89c),!(0x6*0x377+-0xebf+-0x60b)]]:[!(-0xd3*-0x29+-0x1f*-0xd1+0x1*-0x3b1a)];};class bk extends Qe{constructor(_0x141b0c){super(_0x141b0c,'texture');const _0x27aa88=_0x141b0c['assets'],_0x2b94a1=_0x141b0c['graphicsDe'+'vice'];this['_device']=_0x2b94a1,this['_assets']=_0x27aa88,this['imgParser']=new mk(_0x27aa88,_0x2b94a1),this['parsers']={'dds':new xk(_0x27aa88),'ktx':new Sk(_0x27aa88),'ktx2':new vk(_0x27aa88,_0x2b94a1),'basis':new dk(_0x27aa88,_0x2b94a1),'hdr':new Tk(_0x27aa88)};}set['crossOrigi'+'n'](_0x5a3720){this['imgParser']['crossOrigi'+'n']=_0x5a3720;}get['crossOrigi'+'n'](){return this['imgParser']['crossOrigi'+'n'];}set['maxRetries'](_0x1559ef){this['imgParser']['maxRetries']=_0x1559ef;for(const _0x5d6b98 in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x5d6b98)&&(this['parsers'][_0x5d6b98]['maxRetries']=_0x1559ef);}get['maxRetries'](){return this['imgParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x2b7416){return _0x2b7416['indexOf']('?')>=-0x806*-0x1+-0x2609+-0xd*-0x24f?_0x2b7416['split']('?')[-0xde7*0x2+0x2*-0x4a9+-0x24*-0x108]:_0x2b7416;}['_getParser'](_0x264f69){const _0x21dd88=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x264f69))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x21dd88]||this['imgParser'];}['_getTextur'+'eOptions'](_0x335fe4){var _0x5ce0fa;const _0x46096b={'profilerHint':Er};if(_0x335fe4){((_0x5ce0fa=_0x335fe4['name'])==null?void(-0xb02+0x3*0x2a7+0x30d):_0x5ce0fa['length'])>0x799+0xd5e+-0x14f7*0x1&&(_0x46096b['name']=_0x335fe4['name']);const _0x13a475=_0x335fe4['data'];_0x13a475['hasOwnProp'+'erty']('minfilter')&&(_0x46096b['minFilter']=jg[_0x13a475['minfilter']]),_0x13a475['hasOwnProp'+'erty']('magfilter')&&(_0x46096b['magFilter']=jg[_0x13a475['magfilter']]),_0x13a475['hasOwnProp'+'erty']('addressu')&&(_0x46096b['addressU']=qg[_0x13a475['addressu']]),_0x13a475['hasOwnProp'+'erty']('addressv')&&(_0x46096b['addressV']=qg[_0x13a475['addressv']]),_0x13a475['hasOwnProp'+'erty']('mipmaps')&&(_0x46096b['mipmaps']=_0x13a475['mipmaps']),_0x13a475['hasOwnProp'+'erty']('anisotropy')&&(_0x46096b['anisotropy']=_0x13a475['anisotropy']),_0x13a475['hasOwnProp'+'erty']('flipY')&&(_0x46096b['flipY']=!!_0x13a475['flipY']),_0x13a475['hasOwnProp'+'erty']('srgb')&&(_0x46096b['srgb']=!!_0x13a475['srgb']),_0x46096b['type']=Ms,_0x13a475['hasOwnProp'+'erty']('type')?_0x46096b['type']=wk[_0x13a475['type']]:_0x13a475['hasOwnProp'+'erty']('rgbm')&&_0x13a475['rgbm']?_0x46096b['type']=Ki:_0x335fe4['file']&&(_0x335fe4['file']['opt']&0x78c+-0x4f*0x2b+-0x3*-0x1eb)!==-0x1a47+-0x22f4+0x273*0x19&&(_0x46096b['type']=zo);}return _0x46096b;}['load'](_0xcc8413,_0x45132f,_0x354983){typeof _0xcc8413=='string'&&(_0xcc8413={'load':_0xcc8413,'original':_0xcc8413}),this['_getParser'](_0xcc8413['original'])['load'](_0xcc8413,_0x45132f,_0x354983);}['open'](_0xdf9597,_0x41a995,_0x45bac5){if(!_0xdf9597)return;const _0x1f4557=this['_getTextur'+'eOptions'](_0x45bac5);let _0x4cac16=this['_getParser'](_0xdf9597)['open'](_0xdf9597,_0x41a995,this['_device'],_0x1f4557);return _0x4cac16===null?_0x4cac16=new _e(this['_device'],{'width':0x4,'height':0x4,'format':wr}):(Ek(_0x4cac16),_0x41a995['unswizzled'+'GGGR']&&(_0x45bac5['file']['variants']['basis']['opt']&=-(0xfd0*-0x2+-0x2109+0x40b2))),_0x4cac16;}['patch'](_0x5043c0,_0x10478b){const _0x5e0aac=_0x5043c0['resource'];if(!_0x5e0aac)return;const _0x44b6b3=this['_getTextur'+'eOptions'](_0x5043c0);for(const _0x12b157 of Object['keys'](_0x44b6b3))_0x5e0aac[_0x12b157]=_0x44b6b3[_0x12b157];}}const Ak='inline',Ck='immersive-'+'vr',Ro='immersive-'+'ar',Yg='viewer',Pk='left',Mk='cpu-optimi'+'zed',Xv='gpu-optimi'+'zed',qv='luminance-'+'alpha',jv='unsigned-s'+'hort',Yv='float32';class Dk{constructor(_0x1d333c){h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRDOMOverl'+'ayState']),h(this,'_root',null),this['_manager']=_0x1d333c;}get['supported'](){return this['_supported'];}get['available'](){return this['_supported']&&this['_manager']['active']&&this['_manager']['_session']['domOverlay'+'State']!==null;}get['state'](){return!this['_supported']||!this['_manager']['active']||!this['_manager']['_session']['domOverlay'+'State']?null:this['_manager']['_session']['domOverlay'+'State']['type'];}set['root'](_0x52b924){!this['_supported']||this['_manager']['active']||(this['_root']=_0x52b924);}get['root'](){return this['_root'];}}const yc=[],Kg=[];class Tu extends me{constructor(_0x3e82fe,_0x3332d8,_0x37fddc,_0x571b21=null){super(),h(this,'manager'),h(this,'_xrHitTest'+'Source'),h(this,'_transient'),h(this,'_inputSour'+'ce'),(this['manager']=_0x3e82fe,this['_xrHitTest'+'Source']=_0x3332d8,this['_transient']=_0x37fddc,this['_inputSour'+'ce']=_0x571b21);}['remove'](){if(!this['_xrHitTest'+'Source'])return;const _0xf8b15d=this['manager']['hitTest']['sources'],_0x55ed84=_0xf8b15d['indexOf'](this);_0x55ed84!==-(0x257c+-0x9ed+-0x1b8e)&&_0xf8b15d['splice'](_0x55ed84,-0x1101+0x7*0x86+0xd58),this['onStop']();}['onStop'](){this['_xrHitTest'+'Source']['cancel'](),this['_xrHitTest'+'Source']=null,this['fire']('remove'),this['manager']['hitTest']['fire']('remove',this);}['update'](_0x4b32a4){if(this['_transient']){const _0x4ba048=_0x4b32a4['getHitTest'+'ResultsFor'+'TransientI'+'nput'](this['_xrHitTest'+'Source']);for(let _0x2ab0bf=0x7*-0x161+0xe77+0x1c*-0x2c;_0x2ab0bf<_0x4ba048['length'];_0x2ab0bf++){const _0x24934f=_0x4ba048[_0x2ab0bf];if(!_0x24934f['results']['length'])continue;let _0x1b2431;_0x24934f['inputSourc'+'e']&&(_0x1b2431=this['manager']['input']['_getByInpu'+'tSource'](_0x24934f['inputSourc'+'e'])),this['updateHitR'+'esults'](_0x24934f['results'],_0x1b2431);}}else{const _0xd6bf07=_0x4b32a4['getHitTest'+'Results'](this['_xrHitTest'+'Source']);if(!_0xd6bf07['length'])return;this['updateHitR'+'esults'](_0xd6bf07);}}['updateHitR'+'esults'](_0x39ac19,_0xfcc0b6){if(this['_inputSour'+'ce']&&this['_inputSour'+'ce']!==_0xfcc0b6)return;const _0x5dda38=yc['pop']()??new D();_0xfcc0b6?_0x5dda38['copy'](_0xfcc0b6['getOrigin']()):_0x5dda38['copy'](this['manager']['camera']['getPositio'+'n']());let _0x48e403=(-0x9e*0x4+0xdb*0x6+-0x2a9)/(-0x4d4+-0x148d*-0x1+-0xfb9),_0x52241f=null;const _0x4380cb=yc['pop']()??new D(),_0x431211=Kg['pop']()??new le();for(let _0x26efff=0x1cfd+-0x222d*0x1+0x530*0x1;_0x26efff<_0x39ac19['length'];_0x26efff++){const _0x5fe299=_0x39ac19[_0x26efff]['getPose'](this['manager']['_reference'+'Space']),_0x464ae5=_0x5dda38['distance'](_0x5fe299['transform']['position']);_0x464ae5>=_0x48e403||(_0x48e403=_0x464ae5,_0x52241f=_0x39ac19[_0x26efff],_0x4380cb['copy'](_0x5fe299['transform']['position']),_0x431211['copy'](_0x5fe299['transform']['orientatio'+'n']));}this['fire']('result',_0x4380cb,_0x431211,_0xfcc0b6||this['_inputSour'+'ce'],_0x52241f),this['manager']['hitTest']['fire']('result',this,_0x4380cb,_0x431211,_0xfcc0b6||this['_inputSour'+'ce'],_0x52241f),yc['push'](_0x5dda38),yc['push'](_0x4380cb),Kg['push'](_0x431211);}}h(Tu,'EVENT_REMO'+'VE','remove'),h(Tu,'EVENT_RESU'+'LT','result');class Wr extends me{constructor(_0x2cc2a3){super(),h(this,'manager'),h(this,'_supported',Me['browser']&&!!(window['XRSession']&&window['XRSession']['prototype']['requestHit'+'TestSource'])),h(this,'_available',!(0xfd9+-0x45*-0x7d+-0x3189)),h(this,'_checkingA'+'vailabilit'+'y',!(0x3*0x56e+0x8fb*-0x1+-0xb*0xaa)),h(this,'sources',[]),(this['manager']=_0x2cc2a3,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){if(this['manager']['session']['enabledFea'+'tures']){const _0x204d3e=this['manager']['session']['enabledFea'+'tures']['indexOf']('hit-test')!==-(-0xa98+-0x126b+0x1d04);if(!_0x204d3e)return;this['_available']=_0x204d3e,this['fire']('available');}else this['_checkingA'+'vailabilit'+'y']||(this['_checkingA'+'vailabilit'+'y']=!(-0x1b6b*-0x1+0x1*-0x1ade+0x3*-0x2f),this['manager']['session']['requestRef'+'erenceSpac'+'e'](Yg)['then'](_0x219b50=>{this['manager']['session']['requestHit'+'TestSource']({'space':_0x219b50})['then'](_0xec71ea=>{_0xec71ea['cancel'](),this['manager']['active']&&(this['_available']=!(0x15f0+-0x1f99+0x9a9),this['fire']('available'));})['catch'](()=>{});})['catch'](()=>{}));}['_onSession'+'End'](){if(this['_available']){this['_available']=!(0x1e58+-0x1227*-0x1+-0x307e);for(let _0x1be091=-0xb8d*0x1+0xd65+-0x1d8;_0x1be091<this['sources']['length'];_0x1be091++)this['sources'][_0x1be091]['onStop']();this['sources']=[],this['fire']('unavailabl'+'e');}}['start'](_0x236471={}){var _0x1f6716,_0x2f3a25;if(!this['_supported']){(_0x1f6716=_0x236471['callback'])==null||_0x1f6716['call'](_0x236471,new Error('XR\x20HitTest'+'\x20is\x20not\x20su'+'pported'),null);return;}if(!this['_available']){(_0x2f3a25=_0x236471['callback'])==null||_0x2f3a25['call'](_0x236471,new Error('XR\x20HitTest'+'\x20is\x20not\x20av'+'ailable'),null);return;}!_0x236471['profile']&&!_0x236471['spaceType']&&(_0x236471['spaceType']=Yg);let _0x5918c3;const _0x15fd1e=_0x236471['offsetRay'];if(_0x15fd1e){const _0x4f5d06=new DOMPoint(_0x15fd1e['origin']['x'],_0x15fd1e['origin']['y'],_0x15fd1e['origin']['z'],0x1342*-0x2+-0x84e+-0x2ed3*-0x1),_0x3c1db9=new DOMPoint(_0x15fd1e['direction']['x'],_0x15fd1e['direction']['y'],_0x15fd1e['direction']['z'],-0x1231*0x1+-0xd1f*-0x2+-0x80d);_0x5918c3=new XRRay(_0x4f5d06,_0x3c1db9);}const _0x23c670=_0x236471['callback'];_0x236471['spaceType']?this['manager']['session']['requestRef'+'erenceSpac'+'e'](_0x236471['spaceType'])['then'](_0x166b77=>{if(!this['manager']['session']){const _0xe3c12c=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(2)');_0x23c670&&_0x23c670(_0xe3c12c),this['fire']('error',_0xe3c12c);return;}this['manager']['session']['requestHit'+'TestSource']({'space':_0x166b77,'entityTypes':_0x236471['entityType'+'s']||void(0x17*-0x146+-0x1a*0x7a+-0x14d7*-0x2),'offsetRay':_0x5918c3})['then'](_0x14ba93=>{this['_onHitTest'+'Source'](_0x14ba93,!(-0x131b+0x21aa+-0xe8e),_0x236471['inputSourc'+'e'],_0x23c670);})['catch'](_0x3aed65=>{_0x23c670&&_0x23c670(_0x3aed65),this['fire']('error',_0x3aed65);});})['catch'](_0x47d159=>{_0x23c670&&_0x23c670(_0x47d159),this['fire']('error',_0x47d159);}):this['manager']['session']['requestHit'+'TestSource'+'ForTransie'+'ntInput']({'profile':_0x236471['profile'],'entityTypes':_0x236471['entityType'+'s']||void(0x25ef+-0x2445+-0x6*0x47),'offsetRay':_0x5918c3})['then'](_0xf5cd72=>{this['_onHitTest'+'Source'](_0xf5cd72,!(0x7*-0x2ea+0x1*-0x1f84+0x33ea),_0x236471['inputSourc'+'e'],_0x23c670);})['catch'](_0x10d177=>{_0x23c670&&_0x23c670(_0x10d177),this['fire']('error',_0x10d177);});}['_onHitTest'+'Source'](_0x526642,_0x144a9b,_0x38d96f,_0xe8d61){if(!this['manager']['session']){_0x526642['cancel']();const _0x2be3f4=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(3)');_0xe8d61&&_0xe8d61(_0x2be3f4),this['fire']('error',_0x2be3f4);return;}const _0xe4fc99=new Tu(this['manager'],_0x526642,_0x144a9b,_0x38d96f??null);this['sources']['push'](_0xe4fc99),_0xe8d61&&_0xe8d61(null,_0xe4fc99),this['fire']('add',_0xe4fc99);}['update'](_0x57145d){if(this['_available']){for(let _0x2c610a=0x1*-0x6d+-0xa7c+0xae9;_0x2c610a<this['sources']['length'];_0x2c610a++)this['sources'][_0x2c610a]['update'](_0x57145d);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}}h(Wr,'EVENT_AVAI'+'LABLE','available'),h(Wr,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Wr,'EVENT_ADD','add'),h(Wr,'EVENT_REMO'+'VE','remove'),h(Wr,'EVENT_RESU'+'LT','result'),h(Wr,'EVENT_ERRO'+'R','error');class wu extends me{constructor(_0x4c713e,_0x5e3c60){super(),h(this,'_image'),h(this,'_width'),h(this,'_bitmap',null),h(this,'_measuredW'+'idth',0x2181+0x957+-0x2ad8),h(this,'_trackable',!(0x3*0x543+-0x2*0x1166+0x1304)),h(this,'_tracking',!(0x15c0+0x6*-0x23+-0x14ed)),h(this,'_emulated',!(-0xb*-0x24f+0x23ce+-0x1*0x3d32)),h(this,'_pose',null),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_image']=_0x4c713e,this['_width']=_0x5e3c60);}get['image'](){return this['_image'];}set['width'](_0x4f290f){this['_width']=_0x4f290f;}get['width'](){return this['_width'];}get['trackable'](){return this['_trackable'];}get['tracking'](){return this['_tracking'];}get['emulated'](){return this['_emulated'];}['prepare'](){return this['_bitmap']?{'image':this['_bitmap'],'widthInMeters':this['_width']}:createImageBitmap(this['_image'])['then'](_0x5bbf1c=>(this['_bitmap']=_0x5bbf1c,{'image':this['_bitmap'],'widthInMeters':this['_width']}));}['destroy'](){this['_image']=null,this['_pose']=null,this['_bitmap']&&(this['_bitmap']['close'](),this['_bitmap']=null);}['getPositio'+'n'](){return this['_pose']&&this['_position']['copy'](this['_pose']['transform']['position']),this['_position'];}['getRotatio'+'n'](){return this['_pose']&&this['_rotation']['copy'](this['_pose']['transform']['orientatio'+'n']),this['_rotation'];}}h(wu,'EVENT_TRAC'+'KED','tracked'),h(wu,'EVENT_UNTR'+'ACKED','untracked');class Kv extends me{constructor(_0x48459f){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRImageTra'+'ckingResul'+'t']),h(this,'_available',!(0x177a+-0x12ec+-0x48d)),h(this,'_images',[]),(this['_manager']=_0x48459f,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['add'](_0x1eeff6,_0x811385){if(!this['_supported']||this['_manager']['active'])return null;const _0x3d2d58=new wu(_0x1eeff6,_0x811385);return this['_images']['push'](_0x3d2d58),_0x3d2d58;}['remove'](_0x2d5f4b){if(this['_manager']['active'])return;const _0x434d96=this['_images']['indexOf'](_0x2d5f4b);_0x434d96!==-(-0xa31*-0x3+-0x556+0x17c*-0x11)&&(_0x2d5f4b['destroy'](),this['_images']['splice'](_0x434d96,0xddb*-0x1+0x2330+-0x1554));}['_onSession'+'Start'](){this['_manager']['session']['getTracked'+'ImageScore'+'s']()['then'](_0x5dcff7=>{this['_available']=!(-0x2074+-0x67*0x1f+0x2ced);for(let _0x2c75e3=0x1b9c+0x19fa+0x26*-0x169;_0x2c75e3<_0x5dcff7['length'];_0x2c75e3++)this['_images'][_0x2c75e3]['_trackable']=_0x5dcff7[_0x2c75e3]==='trackable';})['catch'](_0x247341=>{this['_available']=!(0x1*0xe39+-0xe*0x277+0x2e6*0x7),this['fire']('error',_0x247341);});}['_onSession'+'End'](){this['_available']=!(-0x17cf+-0x238a+-0x1dad*-0x2);for(let _0x13332e=0x1*0x175+0x43*0x1b+-0x886;_0x13332e<this['_images']['length'];_0x13332e++){const _0x413f64=this['_images'][_0x13332e];_0x413f64['_pose']=null,_0x413f64['_measuredW'+'idth']=-0x201e*0x1+0x1001+0x101d,_0x413f64['_tracking']&&(_0x413f64['_tracking']=!(0x1*0x3db+-0xe*0xe1+0x874),_0x413f64['fire']('untracked'));}}['prepareIma'+'ges'](_0x5ae76f){this['_images']['length']?Promise['all'](this['_images']['map'](_0xf72c64=>_0xf72c64['prepare']()))['then'](_0x5b3b9f=>{_0x5ae76f(null,_0x5b3b9f);})['catch'](_0x2e6f21=>{_0x5ae76f(_0x2e6f21,null);}):_0x5ae76f(null,null);}['update'](_0x191d33){if(!this['_available'])return;const _0x15136e=_0x191d33['getImageTr'+'ackingResu'+'lts'](),_0x12f3f0={};for(let _0x2c76c1=0xa4d+-0x24*-0x72+-0x1a55;_0x2c76c1<_0x15136e['length'];_0x2c76c1++){_0x12f3f0[_0x15136e[_0x2c76c1]['index']]=_0x15136e[_0x2c76c1];const _0xf6764a=this['_images'][_0x15136e[_0x2c76c1]['index']];_0xf6764a['_emulated']=_0x15136e[_0x2c76c1]['trackingSt'+'ate']==='emulated',_0xf6764a['_measuredW'+'idth']=_0x15136e[_0x2c76c1]['measuredWi'+'dthInMeter'+'s'],_0xf6764a['_pose']=_0x191d33['getPose'](_0x15136e[_0x2c76c1]['imageSpace'],this['_manager']['_reference'+'Space']);}for(let _0x1b232c=0x2197+0x15*0x77+0x2b5a*-0x1;_0x1b232c<this['_images']['length'];_0x1b232c++)this['_images'][_0x1b232c]['_tracking']&&!_0x12f3f0[_0x1b232c]?(this['_images'][_0x1b232c]['_tracking']=!(-0x38d+0x1eb0+-0x1b22),this['_images'][_0x1b232c]['fire']('untracked')):!this['_images'][_0x1b232c]['_tracking']&&_0x12f3f0[_0x1b232c]&&(this['_images'][_0x1b232c]['_tracking']=!(0x2a*-0x8+-0x13e4+-0x54d*-0x4),this['_images'][_0x1b232c]['fire']('tracked'));}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['images'](){return this['_images'];}}h(Kv,'EVENT_ERRO'+'R','error');class Ik{constructor(_0x3c8a4b,_0x5241bf){h(this,'_index'),h(this,'_hand'),h(this,'_joints',[]),h(this,'_tip',null),(this['_index']=_0x3c8a4b,this['_hand']=_0x5241bf,this['_hand']['_fingers']['push'](this));}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['joints'](){return this['_joints'];}get['tip'](){return this['_tip'];}}const Zg=Me['browser']&&window['XRHand']?['thumb-tip','index-fing'+'er-tip','middle-fin'+'ger-tip','ring-finge'+'r-tip','pinky-fing'+'er-tip']:[],Zv={};for(let l=0x2007+-0x1d04+0x3*-0x101;l<Zg['length'];l++)Zv[Zg[l]]=!(-0xaa8+0x25*-0x10d+0x9*0x581);class Qg{constructor(_0xbe1348,_0x5bb26e,_0x3948dc,_0x2400f8=null){h(this,'_index'),h(this,'_id'),h(this,'_hand'),h(this,'_finger'),h(this,'_wrist'),h(this,'_tip'),h(this,'_radius',null),h(this,'_localTran'+'sform',new te()),h(this,'_worldTran'+'sform',new te()),h(this,'_localPosi'+'tion',new D()),h(this,'_localRota'+'tion',new le()),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_dirtyLoca'+'l',!(-0x1056+0x168+-0x31*-0x4e)),(this['_index']=_0xbe1348,this['_id']=_0x5bb26e,this['_hand']=_0x3948dc,this['_finger']=_0x2400f8,this['_wrist']=_0x5bb26e==='wrist',this['_tip']=this['_finger']&&!!Zv[_0x5bb26e]);}['update'](_0x3e6403){this['_dirtyLoca'+'l']=!(0x6a*-0x1f+-0x15ae+0x2284),this['_radius']=_0x3e6403['radius'],this['_localPosi'+'tion']['copy'](_0x3e6403['transform']['position']),this['_localRota'+'tion']['copy'](_0x3e6403['transform']['orientatio'+'n']);}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(-0x23*0x93+0x3*0x29b+-0x25*-0x55),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],D['ONE']));const _0x161c87=this['_hand']['_manager']['camera']['parent'];_0x161c87?this['_worldTran'+'sform']['mul2'](_0x161c87['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['getPositio'+'n'](){return this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position'];}['getRotatio'+'n'](){return this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation'];}get['id'](){return this['_id'];}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['finger'](){return this['_finger'];}get['wrist'](){return this['_wrist'];}get['tip'](){return this['_tip'];}get['radius'](){return this['_radius']||0x635*0x3+-0x71*0x32+0x373+0.005;}}let Nc=[];const zr=new D(),vc=new D(),Jg=new D();Me['browser']&&window['XRHand']&&(Nc=[['thumb-meta'+'carpal','thumb-phal'+'anx-proxim'+'al','thumb-phal'+'anx-distal','thumb-tip'],['index-fing'+'er-metacar'+'pal','index-fing'+'er-phalanx'+'-proximal','index-fing'+'er-phalanx'+'-intermedi'+'ate','index-fing'+'er-phalanx'+'-distal','index-fing'+'er-tip'],['middle-fin'+'ger-metaca'+'rpal','middle-fin'+'ger-phalan'+'x-proximal','middle-fin'+'ger-phalan'+'x-intermed'+'iate','middle-fin'+'ger-phalan'+'x-distal','middle-fin'+'ger-tip'],['ring-finge'+'r-metacarp'+'al','ring-finge'+'r-phalanx-'+'proximal','ring-finge'+'r-phalanx-'+'intermedia'+'te','ring-finge'+'r-phalanx-'+'distal','ring-finge'+'r-tip'],['pinky-fing'+'er-metacar'+'pal','pinky-fing'+'er-phalanx'+'-proximal','pinky-fing'+'er-phalanx'+'-intermedi'+'ate','pinky-fing'+'er-phalanx'+'-distal','pinky-fing'+'er-tip']]);class Eu extends me{constructor(_0x188346){super(),h(this,'_manager'),h(this,'_inputSour'+'ce'),h(this,'_tracking',!(0x1*0x2593+0x1a1c+-0x42*0xf7)),h(this,'_fingers',[]),h(this,'_joints',[]),h(this,'_jointsByI'+'d',{}),h(this,'_tips',[]),h(this,'_wrist',null);const _0x406666=_0x188346['_xrInputSo'+'urce']['hand'];if(this['_manager']=_0x188346['_manager'],this['_inputSour'+'ce']=_0x188346,_0x406666['get']('wrist')){const _0x5b176a=new Qg(-0x15*0xb8+-0x1b76+0x2a8e,'wrist',this,null);this['_wrist']=_0x5b176a,this['_joints']['push'](_0x5b176a),this['_jointsByI'+'d']['wrist']=_0x5b176a;}for(let _0x56b1a4=0x55b*0x1+0x1fd3+-0x252e;_0x56b1a4<Nc['length'];_0x56b1a4++){const _0x27f37a=new Ik(_0x56b1a4,this);for(let _0x5dcb47=-0x254c+-0x10f4+0x3640;_0x5dcb47<Nc[_0x56b1a4]['length'];_0x5dcb47++){const _0x3b9d87=Nc[_0x56b1a4][_0x5dcb47];if(!_0x406666['get'](_0x3b9d87))continue;const _0x2ca75c=new Qg(_0x5dcb47,_0x3b9d87,this,_0x27f37a);this['_joints']['push'](_0x2ca75c),this['_jointsByI'+'d'][_0x3b9d87]=_0x2ca75c,_0x2ca75c['tip']&&(this['_tips']['push'](_0x2ca75c),_0x27f37a['_tip']=_0x2ca75c),_0x27f37a['_joints']['push'](_0x2ca75c);}}}['update'](_0xee6123){const _0x3a226a=this['_inputSour'+'ce']['_xrInputSo'+'urce'];for(let _0x583b37=-0x50*0x8+0x9*0x14+0x1cc;_0x583b37<this['_joints']['length'];_0x583b37++){const _0x937724=this['_joints'][_0x583b37],_0x1d3bb5=_0x3a226a['hand']['get'](_0x937724['_id']);if(_0x1d3bb5){let _0x415b60;if(_0xee6123['session']['visibility'+'State']!=='hidden'&&(_0x415b60=_0xee6123['getJointPo'+'se'](_0x1d3bb5,this['_manager']['_reference'+'Space'])),_0x415b60)_0x937724['update'](_0x415b60),_0x937724['wrist']&&!this['_tracking']&&(this['_tracking']=!(-0x542*0x1+0x1*-0x103f+0x16f*0xf),this['fire']('tracking'));else{if(_0x937724['wrist']){this['_tracking']&&(this['_tracking']=!(0x2234+-0xb3*0x2f+-0x156),this['fire']('trackinglo'+'st'));break;}}}}const _0x47559d=this['_jointsByI'+'d']['thumb-meta'+'carpal'],_0x103aff=this['_jointsByI'+'d']['thumb-tip'],_0x3474ce=this['_jointsByI'+'d']['index-fing'+'er-phalanx'+'-proximal'],_0x116988=this['_jointsByI'+'d']['index-fing'+'er-tip'],_0x3d1080=this['_jointsByI'+'d']['ring-finge'+'r-phalanx-'+'proximal'],_0x16ec7d=this['_jointsByI'+'d']['pinky-fing'+'er-phalanx'+'-proximal'];if(_0x47559d&&_0x103aff&&_0x3474ce&&_0x116988&&_0x3d1080&&_0x16ec7d){this['_inputSour'+'ce']['_dirtyRay']=!(0x217*-0x5+0x1b01*0x1+-0x108e),this['_inputSour'+'ce']['_rayLocal']['origin']['lerp'](_0x103aff['_localPosi'+'tion'],_0x116988['_localPosi'+'tion'],-0xc56+0x5*0x6cf+-0x15b5+0.5);let _0x3a86bc=_0x47559d,_0x54947e=_0x16ec7d;if(this['_inputSour'+'ce']['handedness']===Pk){const _0x15b319=_0x3a86bc;_0x3a86bc=_0x54947e,_0x54947e=_0x15b319;}zr['sub2'](_0x3a86bc['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),vc['sub2'](_0x54947e['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),Jg['cross'](zr,vc)['normalize'](),zr['lerp'](_0x3474ce['_localPosi'+'tion'],_0x3d1080['_localPosi'+'tion'],-0x15f*0x6+-0x1546+-0x80*-0x3b+0.5),zr['sub'](this['_wrist']['_localPosi'+'tion'])['normalize'](),this['_inputSour'+'ce']['_rayLocal']['direction']['lerp'](Jg,zr,0x2260+0x2141*-0x1+0x1*-0x11f+0.5)['normalize']();}this['_fingerIsC'+'losed'](-0x2185+0x1f86+0x200)&&this['_fingerIsC'+'losed'](-0x1ce5+0x2*0x11d7+0x15b*-0x5)&&this['_fingerIsC'+'losed'](0x4*-0x709+0x7*0x347+0x536)&&this['_fingerIsC'+'losed'](-0x2*0x109a+-0x11d3+-0x330b*-0x1)?this['_inputSour'+'ce']['_squeezing']||(this['_inputSour'+'ce']['_squeezing']=!(-0x11*-0xf2+-0x3e6*-0x9+-0x3328),this['_inputSour'+'ce']['fire']('squeezesta'+'rt'),this['_manager']['input']['fire']('squeezesta'+'rt',this['_inputSour'+'ce'])):this['_inputSour'+'ce']['_squeezing']&&(this['_inputSour'+'ce']['_squeezing']=!(0x1af+-0x266+0xb8),this['_inputSour'+'ce']['fire']('squeeze'),this['_manager']['input']['fire']('squeeze',this['_inputSour'+'ce']),this['_inputSour'+'ce']['fire']('squeezeend'),this['_manager']['input']['fire']('squeezeend',this['_inputSour'+'ce']));}['_fingerIsC'+'losed'](_0x3bc942){const _0x2f5914=this['_fingers'][_0x3bc942];return zr['sub2'](_0x2f5914['joints'][0x98a+0x16d7+-0x399*0x9]['_localPosi'+'tion'],_0x2f5914['joints'][-0xa0a+0xaf8+-0xed]['_localPosi'+'tion'])['normalize'](),vc['sub2'](_0x2f5914['joints'][-0x2538+-0x6c1*-0x1+0x1e79]['_localPosi'+'tion'],_0x2f5914['joints'][0x469*0x5+0x123b*-0x1+0x3*-0x145]['_localPosi'+'tion'])['normalize'](),zr['dot'](vc)<-(0x2*0x3ca+-0x208c+0x18f8+0.8);}['getJointBy'+'Id'](_0x2d7867){return this['_jointsByI'+'d'][_0x2d7867]||null;}get['fingers'](){return this['_fingers'];}get['joints'](){return this['_joints'];}get['tips'](){return this['_tips'];}get['wrist'](){return this['_wrist'];}get['tracking'](){return this['_tracking'];}}h(Eu,'EVENT_TRAC'+'KING','tracking'),h(Eu,'EVENT_TRAC'+'KINGLOST','trackinglo'+'st');const eS=new D(),tS=new le();let Lk=-0xeef*0x2+-0x281*-0x9+0x755*0x1;class Qt extends me{constructor(_0x42087b,_0x58a7c3){super(),h(this,'_id'),h(this,'_manager'),h(this,'_xrInputSo'+'urce'),h(this,'_ray',new wn()),h(this,'_rayLocal',new wn()),h(this,'_grip',!(-0x22*0x7d+0x6af+0x9ec)),h(this,'_hand',null),h(this,'_velocitie'+'sAvailable',!(0x50+-0x1*-0x1c3d+-0x1c8c)),h(this,'_velocitie'+'sTimestamp',de()),h(this,'_localTran'+'sform',null),h(this,'_worldTran'+'sform',null),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_localPosi'+'tion',null),h(this,'_localPosi'+'tionLast',null),h(this,'_localRota'+'tion',null),h(this,'_linearVel'+'ocity',null),h(this,'_dirtyLoca'+'l',!(0x62*0x60+0x58c+0xa93*-0x4)),h(this,'_dirtyRay',!(0x103f+0x4*0x9a2+-0x36c6)),h(this,'_selecting',!(-0x75*0xb+0x150b+-0x1003)),h(this,'_squeezing',!(-0x1*-0x7eb+0x19a1+-0x115*0x1f)),h(this,'_elementIn'+'put',!(0x8a4+-0x7*-0x110+-0x2a*0x62)),h(this,'_elementEn'+'tity',null),h(this,'_hitTestSo'+'urces',[]),(this['_id']=++Lk,this['_manager']=_0x42087b,this['_xrInputSo'+'urce']=_0x58a7c3,_0x58a7c3['hand']&&(this['_hand']=new Eu(this)));}get['id'](){return this['_id'];}get['inputSourc'+'e'](){return this['_xrInputSo'+'urce'];}get['targetRayM'+'ode'](){return this['_xrInputSo'+'urce']['targetRayM'+'ode'];}get['handedness'](){return this['_xrInputSo'+'urce']['handedness'];}get['profiles'](){return this['_xrInputSo'+'urce']['profiles'];}get['grip'](){return this['_grip'];}get['hand'](){return this['_hand'];}get['gamepad'](){return this['_xrInputSo'+'urce']['gamepad']||null;}get['selecting'](){return this['_selecting'];}get['squeezing'](){return this['_squeezing'];}set['elementInp'+'ut'](_0x27a8b9){this['_elementIn'+'put']!==_0x27a8b9&&(this['_elementIn'+'put']=_0x27a8b9,this['_elementIn'+'put']||(this['_elementEn'+'tity']=null));}get['elementInp'+'ut'](){return this['_elementIn'+'put'];}get['elementEnt'+'ity'](){return this['_elementEn'+'tity'];}get['hitTestSou'+'rces'](){return this['_hitTestSo'+'urces'];}['update'](_0x49dcaa){if(this['_hand'])this['_hand']['update'](_0x49dcaa);else{const _0x323f20=this['_xrInputSo'+'urce']['gripSpace'];if(_0x323f20){const _0x482616=_0x49dcaa['getPose'](_0x323f20,this['_manager']['_reference'+'Space']);if(_0x482616){this['_grip']||(this['_grip']=!(0x72c+0x1556*-0x1+-0xe*-0x103),this['_localTran'+'sform']=new te(),this['_worldTran'+'sform']=new te(),this['_localPosi'+'tionLast']=new D(),this['_localPosi'+'tion']=new D(),this['_localRota'+'tion']=new le(),this['_linearVel'+'ocity']=new D());const _0x53fe09=de(),_0x414383=(_0x53fe09-this['_velocitie'+'sTimestamp'])/(0x1851+-0x1ff*-0x1+-0x1668);this['_velocitie'+'sTimestamp']=_0x53fe09,this['_dirtyLoca'+'l']=!(0x1fc*0x2+-0x117d*-0x1+0x1*-0x1575),this['_localPosi'+'tionLast']['copy'](this['_localPosi'+'tion']),this['_localPosi'+'tion']['copy'](_0x482616['transform']['position']),this['_localRota'+'tion']['copy'](_0x482616['transform']['orientatio'+'n']),this['_velocitie'+'sAvailable']=!(-0x6be*-0x4+-0xfa8+-0xb50),this['_manager']['input']['velocities'+'Supported']&&_0x482616['linearVelo'+'city']?this['_linearVel'+'ocity']['copy'](_0x482616['linearVelo'+'city']):_0x414383>-0x3*-0x58+-0xf29+0xe21&&(eS['sub2'](this['_localPosi'+'tion'],this['_localPosi'+'tionLast'])['divScalar'](_0x414383),this['_linearVel'+'ocity']['lerp'](this['_linearVel'+'ocity'],eS,0x298*-0xc+0x14*-0x24+-0x16a*-0x18+0.15));}else this['_velocitie'+'sAvailable']=!(-0xee0+0x477+0xa6a);}const _0x331336=_0x49dcaa['getPose'](this['_xrInputSo'+'urce']['targetRayS'+'pace'],this['_manager']['_reference'+'Space']);_0x331336&&(this['_dirtyRay']=!(-0xd*-0x16d+0x1555+-0x27de),this['_rayLocal']['origin']['copy'](_0x331336['transform']['position']),this['_rayLocal']['direction']['set'](0x316+0x42d*-0x4+0xd9e*0x1,-0x23ac+-0x21da+-0x16*-0x329,-(-0x2*-0x19+-0x22d2*-0x1+0x1*-0x2303)),tS['copy'](_0x331336['transform']['orientatio'+'n']),tS['transformV'+'ector'](this['_rayLocal']['direction'],this['_rayLocal']['direction']));}}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(-0x1db9+0x21c1*0x1+-0x407*0x1),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],D['ONE']));const _0x343ed8=this['_manager']['camera']['parent'];_0x343ed8?this['_worldTran'+'sform']['mul2'](_0x343ed8['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['_updateRay'+'Transforms'](){const _0x53736a=this['_dirtyRay'];if(this['_dirtyRay']=!(0x19d6+-0xf1d*0x1+-0xab8),this['_manager']['camera']['parent']){const _0x320531=this['_manager']['camera']['parent']['getWorldTr'+'ansform']();_0x320531['getTransla'+'tion'](this['_position']),this['_rotation']['setFromMat'+'4'](_0x320531),this['_rotation']['transformV'+'ector'](this['_rayLocal']['origin'],this['_ray']['origin']),this['_ray']['origin']['add'](this['_position']),this['_rotation']['transformV'+'ector'](this['_rayLocal']['direction'],this['_ray']['direction']);}else _0x53736a&&(this['_ray']['origin']['copy'](this['_rayLocal']['origin']),this['_ray']['direction']['copy'](this['_rayLocal']['direction']));}['getPositio'+'n'](){return this['_position']?(this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position']):null;}['getLocalPo'+'sition'](){return this['_localPosi'+'tion'];}['getRotatio'+'n'](){return this['_rotation']?(this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation']):null;}['getLocalRo'+'tation'](){return this['_localRota'+'tion'];}['getLinearV'+'elocity'](){return this['_velocitie'+'sAvailable']?this['_linearVel'+'ocity']:null;}['getOrigin'](){return this['_updateRay'+'Transforms'](),this['_ray']['origin'];}['getDirecti'+'on'](){return this['_updateRay'+'Transforms'](),this['_ray']['direction'];}['hitTestSta'+'rt'](_0x788d60={}){_0x788d60['inputSourc'+'e']=this,_0x788d60['profile']=this['_xrInputSo'+'urce']['profiles'][0x33b*0x1+0x18eb+-0x1c26];const _0x44cdc7=_0x788d60['callback'];_0x788d60['callback']=(_0x117677,_0xafe41)=>{_0xafe41&&this['onHitTestS'+'ourceAdd'](_0xafe41),_0x44cdc7&&_0x44cdc7(_0x117677,_0xafe41);},this['_manager']['hitTest']['start'](_0x788d60);}['onHitTestS'+'ourceAdd'](_0x1fb036){this['_hitTestSo'+'urces']['push'](_0x1fb036),this['fire']('hittest:ad'+'d',_0x1fb036),_0x1fb036['on']('result',(_0x11dcb2,_0x45d8bc,_0x586ed8,_0x17969e)=>{_0x586ed8===this&&this['fire']('hittest:re'+'sult',_0x1fb036,_0x11dcb2,_0x45d8bc,_0x17969e);}),_0x1fb036['once']('remove',()=>{this['onHitTestS'+'ourceRemov'+'e'](_0x1fb036),this['fire']('hittest:re'+'move',_0x1fb036);});}['onHitTestS'+'ourceRemov'+'e'](_0x57d181){const _0x2f3dfa=this['_hitTestSo'+'urces']['indexOf'](_0x57d181);_0x2f3dfa!==-(-0x1c5c+-0x8e8*0x4+0x3ffd)&&this['_hitTestSo'+'urces']['splice'](_0x2f3dfa,-0x11f7+-0x1ff9+0x31f1);}}h(Qt,'EVENT_REMO'+'VE','remove'),h(Qt,'EVENT_SELE'+'CT','select'),h(Qt,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Qt,'EVENT_SELE'+'CTEND','selectend'),h(Qt,'EVENT_SQUE'+'EZE','squeeze'),h(Qt,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Qt,'EVENT_SQUE'+'EZEEND','squeezeend'),h(Qt,'EVENT_HITT'+'ESTADD','hittest:ad'+'d'),h(Qt,'EVENT_HITT'+'ESTREMOVE','hittest:re'+'move'),h(Qt,'EVENT_HITT'+'ESTRESULT','hittest:re'+'sult');class Li extends me{constructor(_0x1c633b){var _0x30a99f,_0x159a3d;super(),h(this,'manager'),h(this,'_inputSour'+'ces',[]),h(this,'_onInputSo'+'urcesChang'+'eEvt'),h(this,'velocities'+'Supported',!(-0x72d+-0x3de*0x8+0xee*0x29)),(this['manager']=_0x1c633b,this['velocities'+'Supported']=!!(Me['browser']&&((_0x159a3d=(_0x30a99f=window['XRPose'])==null?void(-0x2443*-0x1+-0xaa0+-0x19a3):_0x30a99f['prototype'])!=null&&_0x159a3d['hasOwnProp'+'erty']('linearVelo'+'city'))),this['_onInputSo'+'urcesChang'+'eEvt']=_0x300225=>{this['_onInputSo'+'urcesChang'+'e'](_0x300225);},this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){const _0x17fc4f=this['manager']['session'];_0x17fc4f['addEventLi'+'stener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']),_0x17fc4f['addEventLi'+'stener']('select',_0xd4626b=>{const _0x205ca4=this['_getByInpu'+'tSource'](_0xd4626b['inputSourc'+'e']);_0x205ca4['update'](_0xd4626b['frame']),_0x205ca4['fire']('select',_0xd4626b),this['fire']('select',_0x205ca4,_0xd4626b);}),_0x17fc4f['addEventLi'+'stener']('selectstar'+'t',_0x46438c=>{const _0x1be7ba=this['_getByInpu'+'tSource'](_0x46438c['inputSourc'+'e']);_0x1be7ba['_selecting']||(_0x1be7ba['update'](_0x46438c['frame']),_0x1be7ba['_selecting']=!(-0x68*0x3a+-0xd18*0x1+0x24a8),_0x1be7ba['fire']('selectstar'+'t',_0x46438c),this['fire']('selectstar'+'t',_0x1be7ba,_0x46438c));}),_0x17fc4f['addEventLi'+'stener']('selectend',_0xe1128d=>{const _0x573822=this['_getByInpu'+'tSource'](_0xe1128d['inputSourc'+'e']);_0x573822['update'](_0xe1128d['frame']),_0x573822['_selecting']=!(-0x4*-0x713+-0x1*-0x1bc4+-0x380f*0x1),_0x573822['fire']('selectend',_0xe1128d),this['fire']('selectend',_0x573822,_0xe1128d);}),_0x17fc4f['addEventLi'+'stener']('squeeze',_0x33f661=>{const _0x115eda=this['_getByInpu'+'tSource'](_0x33f661['inputSourc'+'e']);_0x115eda['update'](_0x33f661['frame']),_0x115eda['fire']('squeeze',_0x33f661),this['fire']('squeeze',_0x115eda,_0x33f661);}),_0x17fc4f['addEventLi'+'stener']('squeezesta'+'rt',_0x13e283=>{const _0x135aea=this['_getByInpu'+'tSource'](_0x13e283['inputSourc'+'e']);_0x135aea['update'](_0x13e283['frame']),_0x135aea['_squeezing']=!(0x1*0x25b7+-0xd8c*0x2+-0xa9f),_0x135aea['fire']('squeezesta'+'rt',_0x13e283),this['fire']('squeezesta'+'rt',_0x135aea,_0x13e283);}),_0x17fc4f['addEventLi'+'stener']('squeezeend',_0x12fe52=>{const _0x3b40c8=this['_getByInpu'+'tSource'](_0x12fe52['inputSourc'+'e']);_0x3b40c8['update'](_0x12fe52['frame']),_0x3b40c8['_squeezing']=!(0x19e6+0x1fa5*0x1+0xb82*-0x5),_0x3b40c8['fire']('squeezeend',_0x12fe52),this['fire']('squeezeend',_0x3b40c8,_0x12fe52);});const _0x5d7be0=_0x17fc4f['inputSourc'+'es'];for(let _0x3141d3=0x17fb+0x1*0xa8b+-0x2286;_0x3141d3<_0x5d7be0['length'];_0x3141d3++)this['_addInputS'+'ource'](_0x5d7be0[_0x3141d3]);}['_onSession'+'End'](){let _0x57dc78=this['_inputSour'+'ces']['length'];for(;_0x57dc78--;){const _0x3669fe=this['_inputSour'+'ces'][_0x57dc78];this['_inputSour'+'ces']['splice'](_0x57dc78,-0x224f+-0x1721+-0x5*-0xb7d),_0x3669fe['fire']('remove'),this['fire']('remove',_0x3669fe);}this['fire']('removeall'),this['manager']['session']['removeEven'+'tListener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']);}['_onInputSo'+'urcesChang'+'e'](_0xbf5169){for(let _0x50edfa=-0x19f5+0xdaa+0x3*0x419;_0x50edfa<_0xbf5169['removed']['length'];_0x50edfa++)this['_removeInp'+'utSource'](_0xbf5169['removed'][_0x50edfa]);for(let _0x3424ed=0x229e+0x1*-0xcf7+-0x15a7;_0x3424ed<_0xbf5169['added']['length'];_0x3424ed++)this['_addInputS'+'ource'](_0xbf5169['added'][_0x3424ed]);}['_getByInpu'+'tSource'](_0x357309){for(let _0x4a6663=-0x1*-0x6cc+0x1df5+0x24c1*-0x1;_0x4a6663<this['_inputSour'+'ces']['length'];_0x4a6663++)if(this['_inputSour'+'ces'][_0x4a6663]['inputSourc'+'e']===_0x357309)return this['_inputSour'+'ces'][_0x4a6663];return null;}['_removeApp'+'Entity'](_0x68327b){const _0x445258=this['manager']['app']['root']['findByName']('Armature_'+_0x68327b);_0x445258&&this['manager']['app']['root']['removeChil'+'d'](_0x445258);}['_addInputS'+'ource'](_0xc2cd6){if(this['_removeApp'+'Entity'](_0xc2cd6['handedness']),this['_getByInpu'+'tSource'](_0xc2cd6))return;const _0x539826=new Qt(this['manager'],_0xc2cd6);this['_inputSour'+'ces']['push'](_0x539826),this['fire']('add',_0x539826);}['_removeInp'+'utSource'](_0x540079){for(let _0x20fb1a=-0x1bc7+0x1997+0x28*0xe;_0x20fb1a<this['_inputSour'+'ces']['length'];_0x20fb1a++){if(this['_inputSour'+'ces'][_0x20fb1a]['inputSourc'+'e']!==_0x540079)continue;const _0x157777=this['_inputSour'+'ces'][_0x20fb1a];this['_inputSour'+'ces']['splice'](_0x20fb1a,-0x580+-0xa83+-0x14*-0xcd);let _0x44d65c=_0x157777['hitTestSou'+'rces']['length'];for(;_0x44d65c--;)_0x157777['hitTestSou'+'rces'][_0x44d65c]['remove']();this['_removeApp'+'Entity'](_0x157777['handedness']),_0x157777['fire']('remove'),this['fire']('remove',_0x157777);return;}}['update'](_0xe8eff6){for(let _0x31b155=-0x1*-0xd15+0x1*0x2249+-0x6*0x7e5;_0x31b155<this['_inputSour'+'ces']['length'];_0x31b155++)this['_inputSour'+'ces'][_0x31b155]['update'](_0xe8eff6);}get['inputSourc'+'es'](){return this['_inputSour'+'ces'];}}h(Li,'EVENT_ADD','add'),h(Li,'EVENT_REMO'+'VE','remove'),h(Li,'EVENT_SELE'+'CT','select'),h(Li,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Li,'EVENT_SELE'+'CTEND','selectend'),h(Li,'EVENT_SQUE'+'EZE','squeeze'),h(Li,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Li,'EVENT_SQUE'+'EZEEND','squeezeend');const ja=new D(),sS=new D(),hf=new te(),iS=new te();class bu extends me{constructor(_0x2c6b56){super(),h(this,'_manager'),h(this,'_supported',!(0x181b+-0x1979+0x15f)),h(this,'_available',!(0x1844+-0x3d1+-0x1*0x1472)),h(this,'_lightProb'+'eRequested',!(-0x1*-0x94f+0x21b7+-0x2b05*0x1)),h(this,'_lightProb'+'e',null),h(this,'_intensity',-0x1fb0+0x1*-0x15ac+0x355c),h(this,'_rotation',new le()),h(this,'_color',new ie()),h(this,'_spherical'+'Harmonics',new Float32Array(0x1f30+0x14b2+-0x33c7)),(this['_manager']=_0x2c6b56,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){this['_manager']['session']['requestLig'+'htProbe']&&(this['_supported']=!(-0x4*0x9b9+0x23ce*0x1+0x316));}['_onSession'+'End'](){this['_supported']=!(-0xf*0x88+0x13fa+-0xc01),this['_available']=!(0x147b+-0x20ec+0xc72*0x1),this['_lightProb'+'eRequested']=!(-0xb4b*0x2+-0x273*0x5+-0x4fa*-0x7),this['_lightProb'+'e']=null;}['start'](){let _0x28c8f4;if(this['_manager']['session']||(_0x28c8f4=new Error('XR\x20session'+'\x20is\x20not\x20ru'+'nning')),!_0x28c8f4&&this['_manager']['type']!==Ro&&(_0x28c8f4=new Error('XR\x20session'+'\x20type\x20is\x20n'+'ot\x20AR')),!_0x28c8f4&&!this['_supported']&&(_0x28c8f4=new Error('light-esti'+'mation\x20is\x20'+'not\x20suppor'+'ted')),(!_0x28c8f4&&this['_lightProb'+'e']||this['_lightProb'+'eRequested'])&&(_0x28c8f4=new Error('light\x20esti'+'mation\x20is\x20'+'already\x20re'+'quested')),_0x28c8f4){this['fire']('error',_0x28c8f4);return;}this['_lightProb'+'eRequested']=!(-0x147d*0x1+0x2f6*0xd+-0x1201),this['_manager']['session']['requestLig'+'htProbe']()['then'](_0x7e85c8=>{const _0x3cfca1=this['_lightProb'+'eRequested'];this['_lightProb'+'eRequested']=!(0xdc5+-0x15*-0x1d8+0x1a3e*-0x2),this['_manager']['active']?_0x3cfca1&&(this['_lightProb'+'e']=_0x7e85c8):this['fire']('error',new Error('XR\x20session'+'\x20is\x20not\x20ac'+'tive'));})['catch'](_0x3e4cbd=>{this['_lightProb'+'eRequested']=!(0x32a+-0x14d2+0x11a9),this['fire']('error',_0x3e4cbd);});}['end'](){this['_lightProb'+'eRequested']=!(0x21*0x97+-0x59*0x37+-0x3*0x1d),this['_lightProb'+'e']=null,this['_available']=!(-0x14dd+-0x1085+0x2563);}['update'](_0x2f937d){if(!this['_lightProb'+'e'])return;const _0x5429a5=_0x2f937d['getLightEs'+'timate'](this['_lightProb'+'e']);if(!_0x5429a5)return;this['_available']||(this['_available']=!(-0x20f*-0xf+-0x1979+0x568*-0x1),this['fire']('available'));const _0x3c928c=_0x5429a5['primaryLig'+'htIntensit'+'y'];this['_intensity']=Math['max'](0x130*-0x16+-0x1861+-0x1e*-0x1af,Math['max'](_0x3c928c['x'],Math['max'](_0x3c928c['y'],_0x3c928c['z']))),ja['copy'](_0x3c928c)['mulScalar']((-0x1b2b+-0x2e9*0x3+-0x65*-0x5b)/this['_intensity']),this['_color']['set'](ja['x'],ja['y'],ja['z']),ja['set'](0x2295+-0x7*0x545+0x24e,0x3c7+0xe53+-0x121a,0x2*-0x7fd+-0x25*-0x47+-0x85*-0xb),sS['copy'](_0x5429a5['primaryLig'+'htDirectio'+'n']),hf['setLookAt'](sS,ja,D['UP']),iS['setFromAxi'+'sAngle'](D['RIGHT'],-0x1*0x2a2+-0x25ff+0x28fb),hf['mul'](iS),this['_rotation']['setFromMat'+'4'](hf),this['_spherical'+'Harmonics']['set'](_0x5429a5['sphericalH'+'armonicsCo'+'efficients']);}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['intensity'](){return this['_available']?this['_intensity']:null;}get['color'](){return this['_available']?this['_color']:null;}get['rotation'](){return this['_available']?this['_rotation']:null;}get['sphericalH'+'armonics'](){return this['_available']?this['_spherical'+'Harmonics']:null;}}h(bu,'EVENT_AVAI'+'LABLE','available'),h(bu,'EVENT_ERRO'+'R','error');let Rk=0xedf+-0x121f*-0x2+-0x331d;class Au extends me{constructor(_0x2a041c,_0x1f3872){super(),h(this,'_id'),h(this,'_planeDete'+'ction'),h(this,'_xrPlane'),h(this,'_lastChang'+'edTime'),h(this,'_orientati'+'on'),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_id']=++Rk,this['_planeDete'+'ction']=_0x2a041c,this['_xrPlane']=_0x1f3872,this['_lastChang'+'edTime']=_0x1f3872['lastChange'+'dTime'],this['_orientati'+'on']=_0x1f3872['orientatio'+'n']);}['destroy'](){this['_xrPlane']&&(this['_xrPlane']=null,this['fire']('remove'));}['update'](_0xb3a24f){const _0x1fc7ae=this['_planeDete'+'ction']['_manager'],_0xe8eb6b=_0xb3a24f['getPose'](this['_xrPlane']['planeSpace'],_0x1fc7ae['_reference'+'Space']);_0xe8eb6b&&(this['_position']['copy'](_0xe8eb6b['transform']['position']),this['_rotation']['copy'](_0xe8eb6b['transform']['orientatio'+'n'])),this['_lastChang'+'edTime']!==this['_xrPlane']['lastChange'+'dTime']&&(this['_lastChang'+'edTime']=this['_xrPlane']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}get['id'](){return this['_id'];}get['orientatio'+'n'](){return this['_orientati'+'on'];}get['points'](){return this['_xrPlane']['polygon'];}get['label'](){return this['_xrPlane']['semanticLa'+'bel']||'';}}h(Au,'EVENT_REMO'+'VE','remove'),h(Au,'EVENT_CHAN'+'GE','change');class yo extends me{constructor(_0x15cf5f){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRPlane']),h(this,'_available',!(-0x547+-0xc7*-0x5+0x165)),h(this,'_planesInd'+'ex',new Map()),h(this,'_planes',[]),(this['_manager']=_0x15cf5f,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){this['_manager']['session']['enabledFea'+'tures']&&this['_manager']['session']['enabledFea'+'tures']['indexOf']('plane-dete'+'ction')!==-(-0x107d+-0x51a*-0x5+-0x904)&&(this['_available']=!(-0x1165*-0x2+-0x1d7f+-0x54b),this['fire']('available'));}['_onSession'+'End'](){for(let _0x2a0d10=0x1100+-0x26a6+0x11*0x146;_0x2a0d10<this['_planes']['length'];_0x2a0d10++)this['_planes'][_0x2a0d10]['destroy'](),this['fire']('remove',this['_planes'][_0x2a0d10]);this['_planesInd'+'ex']['clear'](),this['_planes']['length']=-0x1f9f+-0x14af+0x344e,this['_available']&&(this['_available']=!(-0xa68+0x731+0x4*0xce),this['fire']('unavailabl'+'e'));}['update'](_0x5e9f5d){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x5e9f5d['detectedPl'+'anes']['size'])this['_available']=!(0x1e9b+-0x24*-0x105+-0x434f),this['fire']('available');else return;}const _0x18b292=_0x5e9f5d['detectedPl'+'anes'];for(const [_0x117ac0,_0x3ed2f0]of this['_planesInd'+'ex'])_0x18b292['has'](_0x117ac0)||(this['_planesInd'+'ex']['delete'](_0x117ac0),this['_planes']['splice'](this['_planes']['indexOf'](_0x3ed2f0),0x23ed*-0x1+-0x1*-0x20ad+0x341),_0x3ed2f0['destroy'](),this['fire']('remove',_0x3ed2f0));for(const _0x104bc9 of _0x18b292){let _0x459960=this['_planesInd'+'ex']['get'](_0x104bc9);_0x459960?_0x459960['update'](_0x5e9f5d):(_0x459960=new Au(this,_0x104bc9),this['_planesInd'+'ex']['set'](_0x104bc9,_0x459960),this['_planes']['push'](_0x459960),_0x459960['update'](_0x5e9f5d),this['fire']('add',_0x459960));}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['planes'](){return this['_planes'];}}h(yo,'EVENT_AVAI'+'LABLE','available'),h(yo,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(yo,'EVENT_ADD','add'),h(yo,'EVENT_REMO'+'VE','remove');class vo extends me{constructor(_0x4d431b,_0x495974,_0x1300a2=null){super(),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_uuid',null),h(this,'_uuidReque'+'sts',null),(this['_anchors']=_0x4d431b,this['_xrAnchor']=_0x495974,this['_uuid']=_0x1300a2);}['destroy'](){if(!this['_xrAnchor'])return;const _0x4195dd=this['_xrAnchor'];this['_xrAnchor']['delete'](),this['_xrAnchor']=null,this['fire']('destroy',_0x4195dd,this);}['update'](_0x425261){if(!this['_xrAnchor'])return;const _0x3cd274=_0x425261['getPose'](this['_xrAnchor']['anchorSpac'+'e'],this['_anchors']['manager']['_reference'+'Space']);if(_0x3cd274){if(this['_position']['equals'](_0x3cd274['transform']['position'])&&this['_rotation']['equals'](_0x3cd274['transform']['orientatio'+'n']))return;this['_position']['copy'](_0x3cd274['transform']['position']),this['_rotation']['copy'](_0x3cd274['transform']['orientatio'+'n']),this['fire']('change');}}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}['persist'](_0x4c4bc4){if(!this['_anchors']['persistenc'+'e']){_0x4c4bc4==null||_0x4c4bc4(new Error('Persistent'+'\x20Anchors\x20a'+'re\x20not\x20sup'+'ported'),null);return;}if(this['_uuid']){_0x4c4bc4==null||_0x4c4bc4(null,this['_uuid']);return;}if(this['_uuidReque'+'sts']){_0x4c4bc4&&this['_uuidReque'+'sts']['push'](_0x4c4bc4);return;}this['_uuidReque'+'sts']=[],this['_xrAnchor']['requestPer'+'sistentHan'+'dle']()['then'](_0x599e25=>{this['_uuid']=_0x599e25,this['_anchors']['_indexByUu'+'id']['set'](this['_uuid'],this),_0x4c4bc4==null||_0x4c4bc4(null,_0x599e25);for(const _0x937760 of this['_uuidReque'+'sts'])_0x937760(null,_0x599e25);this['_uuidReque'+'sts']=null,this['fire']('persist',_0x599e25);})['catch'](_0x121e38=>{_0x4c4bc4==null||_0x4c4bc4(_0x121e38,null);for(const _0x4daf99 of this['_uuidReque'+'sts'])_0x4daf99(_0x121e38,null);this['_uuidReque'+'sts']=null;});}['forget'](_0x3d34be){if(!this['_uuid']){_0x3d34be==null||_0x3d34be(new Error('Anchor\x20is\x20'+'not\x20persis'+'tent'));return;}this['_anchors']['forget'](this['_uuid'],_0x505787=>{this['_uuid']=null,_0x3d34be==null||_0x3d34be(_0x505787),this['fire']('forget');});}get['uuid'](){return this['_uuid'];}get['persistent'](){return!!this['_uuid'];}}h(vo,'EVENT_DEST'+'ROY','destroy'),h(vo,'EVENT_CHAN'+'GE','change'),h(vo,'EVENT_PERS'+'IST','persist'),h(vo,'EVENT_FORG'+'ET','forget');var aS;class Ja extends me{constructor(_0x4a1e90){super(),h(this,'manager'),h(this,'_supported',Me['browser']&&!!window['XRAnchor']),h(this,'_available',!(-0x46b+0x1b*0x47+-0x311)),h(this,'_checkingA'+'vailabilit'+'y',!(0x2*-0x5da+0x3fb*0x8+-0x1423)),h(this,'_persisten'+'ce',Me['browser']&&!!((aS=window==null?void(0x1*0xa3a+-0x60*-0x3b+0x1*-0x205a):window['XRSession'])!=null&&aS['prototype']['restorePer'+'sistentAnc'+'hor'])),h(this,'_creationQ'+'ueue',[]),h(this,'_index',new Map()),h(this,'_indexByUu'+'id',new Map()),h(this,'_list',[]),h(this,'_callbacks'+'Anchors',new Map()),(this['manager']=_0x4a1e90,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){var _0x30b522;const _0x2a644e=((_0x30b522=this['manager']['session']['enabledFea'+'tures'])==null?void(0x1*0x1b44+-0x95*-0x1d+-0x2c25):_0x30b522['indexOf']('anchors'))>=0x1f86+-0x110*0x1+-0x1e76;_0x2a644e&&(this['_available']=_0x2a644e,this['fire']('available'));}['_onSession'+'End'](){if(!this['_available'])return;this['_available']=!(-0x1*0x1cb7+0x5*-0x5bb+0x395f);for(let _0x27e90b=0x1a51*0x1+-0x9cb*0x3+0x310;_0x27e90b<this['_creationQ'+'ueue']['length'];_0x27e90b++)this['_creationQ'+'ueue'][_0x27e90b]['callback']&&this['_creationQ'+'ueue'][_0x27e90b]['callback'](new Error('session\x20en'+'ded'),null);this['_creationQ'+'ueue']['length']=-0x7*0x32c+-0xd1f+0x1*0x2353,this['_index']['clear'](),this['_indexByUu'+'id']['clear']();let _0x42ba76=this['_list']['length'];for(;_0x42ba76--;)this['_list'][_0x42ba76]['destroy']();this['_list']['length']=-0x1da8+0x108*0x8+0x1568,this['fire']('unavailabl'+'e');}['_createAnc'+'hor'](_0x3f9fcb,_0x4df76f=null){const _0x136a2e=new vo(this,_0x3f9fcb,_0x4df76f);return this['_index']['set'](_0x3f9fcb,_0x136a2e),_0x4df76f&&this['_indexByUu'+'id']['set'](_0x4df76f,_0x136a2e),this['_list']['push'](_0x136a2e),_0x136a2e['once']('destroy',this['_onAnchorD'+'estroy'],this),_0x136a2e;}['_onAnchorD'+'estroy'](_0x180824,_0x3ce42d){this['_index']['delete'](_0x180824),_0x3ce42d['uuid']&&this['_indexByUu'+'id']['delete'](_0x3ce42d['uuid']);const _0x3b9052=this['_list']['indexOf'](_0x3ce42d);_0x3b9052!==-(-0x1*0x10cf+0x1ba5+-0xad5)&&this['_list']['splice'](_0x3b9052,-0x48c+0x7a5+0xb*-0x48),this['fire']('destroy',_0x3ce42d);}['create'](_0x43bf2d,_0x1a5632,_0xcc149b){if(!this['_available']){_0xcc149b==null||_0xcc149b(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(window['XRHitTestR'+'esult']&&_0x43bf2d instanceof XRHitTestResult){const _0x309dc0=_0x43bf2d;if(_0xcc149b=_0x1a5632,!this['_supported']){_0xcc149b==null||_0xcc149b(new Error('Anchors\x20AP'+'I\x20is\x20not\x20s'+'upported'),null);return;}if(!_0x309dc0['createAnch'+'or']){_0xcc149b==null||_0xcc149b(new Error('Creating\x20A'+'nchor\x20from'+'\x20Hit\x20Test\x20'+'is\x20not\x20sup'+'ported'),null);return;}_0x309dc0['createAnch'+'or']()['then'](_0x3ea867=>{const _0x2ec387=this['_createAnc'+'hor'](_0x3ea867);_0xcc149b==null||_0xcc149b(null,_0x2ec387),this['fire']('add',_0x2ec387);})['catch'](_0x2faa4d=>{_0xcc149b==null||_0xcc149b(_0x2faa4d,null),this['fire']('error',_0x2faa4d);});}else this['_creationQ'+'ueue']['push']({'transform':new XRRigidTransform(_0x43bf2d,_0x1a5632),'callback':_0xcc149b});}['restore'](_0x4ca347,_0x515642){if(!this['_available']){_0x515642==null||_0x515642(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(!this['_persisten'+'ce']){_0x515642==null||_0x515642(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'),null);return;}if(!this['manager']['active']){_0x515642==null||_0x515642(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'),null);return;}this['manager']['session']['restorePer'+'sistentAnc'+'hor'](_0x4ca347)['then'](_0x135bf1=>{const _0x186eb4=this['_createAnc'+'hor'](_0x135bf1,_0x4ca347);_0x515642==null||_0x515642(null,_0x186eb4),this['fire']('add',_0x186eb4);})['catch'](_0xbf5cf7=>{_0x515642==null||_0x515642(_0xbf5cf7,null),this['fire']('error',_0xbf5cf7);});}['forget'](_0x48f665,_0x4c642c){if(!this['_available']){_0x4c642c==null||_0x4c642c(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'));return;}if(!this['_persisten'+'ce']){_0x4c642c==null||_0x4c642c(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'));return;}if(!this['manager']['active']){_0x4c642c==null||_0x4c642c(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'));return;}this['manager']['session']['deletePers'+'istentAnch'+'or'](_0x48f665)['then'](()=>{_0x4c642c==null||_0x4c642c(null);})['catch'](_0x4c0771=>{_0x4c642c==null||_0x4c642c(_0x4c0771),this['fire']('error',_0x4c0771);});}['update'](_0x2ab3b8){if(!this['_available']){!this['manager']['session']['enabledFea'+'tures']&&!this['_checkingA'+'vailabilit'+'y']&&(this['_checkingA'+'vailabilit'+'y']=!(-0x1*-0x152b+0xbfd+-0x2128),_0x2ab3b8['createAnch'+'or'](new XRRigidTransform(),this['manager']['_reference'+'Space'])['then'](_0x3ed758=>{_0x3ed758['delete'](),this['manager']['active']&&(this['_available']=!(0x12b4+0x1d16+-0x2fca),this['fire']('available'));})['catch'](()=>{}));return;}if(this['_creationQ'+'ueue']['length']){for(let _0x5baa4d=0x115f+0xe*0x71+-0x178d;_0x5baa4d<this['_creationQ'+'ueue']['length'];_0x5baa4d++){const _0x4169ee=this['_creationQ'+'ueue'][_0x5baa4d];_0x2ab3b8['createAnch'+'or'](_0x4169ee['transform'],this['manager']['_reference'+'Space'])['then'](_0x3b9689=>{_0x4169ee['callback']&&this['_callbacks'+'Anchors']['set'](_0x3b9689,_0x4169ee['callback']);})['catch'](_0x2cdf06=>{_0x4169ee['callback']&&_0x4169ee['callback'](_0x2cdf06,null),this['fire']('error',_0x2cdf06);});}this['_creationQ'+'ueue']['length']=-0x2*0x18b+0x1476+0x8b0*-0x2;}for(const [_0x15da08,_0x4575bf]of this['_index'])_0x2ab3b8['trackedAnc'+'hors']['has'](_0x15da08)||(this['_index']['delete'](_0x15da08),_0x4575bf['destroy']());for(let _0x4ac387=-0x20f0*-0x1+-0x2205+0x115;_0x4ac387<this['_list']['length'];_0x4ac387++)this['_list'][_0x4ac387]['update'](_0x2ab3b8);for(const _0x2c0481 of _0x2ab3b8['trackedAnc'+'hors']){if(this['_index']['has'](_0x2c0481))continue;try{const _0x250789=_0x2c0481['anchorSpac'+'e'];}catch{continue;}const _0x5a68d8=this['_createAnc'+'hor'](_0x2c0481);_0x5a68d8['update'](_0x2ab3b8);const _0x1205c3=this['_callbacks'+'Anchors']['get'](_0x2c0481);_0x1205c3&&(this['_callbacks'+'Anchors']['delete'](_0x2c0481),_0x1205c3(null,_0x5a68d8)),this['fire']('add',_0x5a68d8);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['persistenc'+'e'](){return this['_persisten'+'ce'];}get['uuids'](){return!this['_available']||!this['_persisten'+'ce']||!this['manager']['active']?null:this['manager']['session']['persistent'+'Anchors'];}get['list'](){return this['_list'];}}h(Ja,'EVENT_AVAI'+'LABLE','available'),h(Ja,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Ja,'EVENT_ERRO'+'R','error'),h(Ja,'EVENT_ADD','add'),h(Ja,'EVENT_DEST'+'ROY','destroy');class Cu extends me{constructor(_0x41fa27,_0x54c3c9){super(),h(this,'_meshDetec'+'tion'),h(this,'_xrMesh'),h(this,'_lastChang'+'ed',0x140c+-0x3*-0xc10+-0x383c),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_meshDetec'+'tion']=_0x41fa27,this['_xrMesh']=_0x54c3c9,this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime']);}get['xrMesh'](){return this['_xrMesh'];}get['label'](){return this['_xrMesh']['semanticLa'+'bel']||'';}get['vertices'](){return this['_xrMesh']['vertices'];}get['indices'](){return this['_xrMesh']['indices'];}['destroy'](){this['_xrMesh']&&(this['_xrMesh']=null,this['fire']('remove'));}['update'](_0x5733be){const _0x2ef83e=this['_meshDetec'+'tion']['_manager'],_0x60f5ac=_0x5733be['getPose'](this['_xrMesh']['meshSpace'],_0x2ef83e['_reference'+'Space']);_0x60f5ac&&(this['_position']['copy'](_0x60f5ac['transform']['position']),this['_rotation']['copy'](_0x60f5ac['transform']['orientatio'+'n'])),this['_lastChang'+'ed']!==this['_xrMesh']['lastChange'+'dTime']&&(this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}}h(Cu,'EVENT_REMO'+'VE','remove'),h(Cu,'EVENT_CHAN'+'GE','change');class xo extends me{constructor(_0x5d2e29){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRMesh']),h(this,'_available',!(-0x1904+0x11d2+0x733)),h(this,'_index',new Map()),h(this,'_list',[]),(this['_manager']=_0x5d2e29,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['update'](_0x2e56ab){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x2e56ab['detectedMe'+'shes']['size'])this['_available']=!(0x5*-0x69d+-0x17*-0x8e+0x144f),this['fire']('available');else return;}for(const _0x442580 of _0x2e56ab['detectedMe'+'shes']){let _0x9930da=this['_index']['get'](_0x442580);_0x9930da?_0x9930da['update'](_0x2e56ab):(_0x9930da=new Cu(this,_0x442580),this['_index']['set'](_0x442580,_0x9930da),this['_list']['push'](_0x9930da),_0x9930da['update'](_0x2e56ab),this['fire']('add',_0x9930da));}for(const _0x4a5fb1 of this['_index']['values']())_0x2e56ab['detectedMe'+'shes']['has'](_0x4a5fb1['xrMesh'])||this['_removeMes'+'h'](_0x4a5fb1);}['_removeMes'+'h'](_0x347621){this['_index']['delete'](_0x347621['xrMesh']),this['_list']['splice'](this['_list']['indexOf'](_0x347621),-0x20d6+-0x4c*-0x7f+-0x4dd),_0x347621['destroy'](),this['fire']('remove',_0x347621);}['_onSession'+'Start'](){if(this['_manager']['session']['enabledFea'+'tures']){const _0x530c28=this['_manager']['session']['enabledFea'+'tures']['indexOf']('mesh-detec'+'tion')!==-(-0x1cab*-0x1+0x48c*0x3+0x1*-0x2a4e);if(!_0x530c28)return;this['_available']=_0x530c28,this['fire']('available');}}['_onSession'+'End'](){if(this['_available']){this['_available']=!(0x835+0x2*-0x84b+0x862);for(const _0x1f3c75 of this['_index']['values']())this['_removeMes'+'h'](_0x1f3c75);this['fire']('unavailabl'+'e');}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['meshes'](){return this['_list'];}}h(xo,'EVENT_AVAI'+'LABLE','available'),h(xo,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(xo,'EVENT_ADD','add'),h(xo,'EVENT_REMO'+'VE','remove');class Qv extends me{constructor(_0x4ff35a,_0x2148dd,_0x3ba8a0){super(),h(this,'_manager'),h(this,'_xrView'),h(this,'_positionD'+'ata',new Float32Array(0x23b*0xc+-0x1*-0x99f+-0x2460)),h(this,'_viewport',new re()),h(this,'_projMat',new te()),h(this,'_projViewO'+'ffMat',new te()),h(this,'_viewMat',new te()),h(this,'_viewOffMa'+'t',new te()),h(this,'_viewMat3',new _i()),h(this,'_viewInvMa'+'t',new te()),h(this,'_viewInvOf'+'fMat',new te()),h(this,'_xrCamera',null),h(this,'_textureCo'+'lor',null),h(this,'_textureDe'+'pth',null),h(this,'_depthInfo',null),h(this,'_emptyDept'+'hBuffer',new Uint8Array(0x54+0x1e4+-0x218)),h(this,'_depthMatr'+'ix',new te()),(this['_manager']=_0x4ff35a,this['_xrView']=_0x2148dd);const _0x1e168c=this['_manager']['app']['graphicsDe'+'vice'];if(this['_manager']['views']['supportedC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera'],this['_manager']['views']['availableC'+'olor']&&this['_xrCamera']&&(this['_textureCo'+'lor']=new _e(_0x1e168c,{'format':wr,'mipmaps':!(0x14e6+-0x5*-0x52b+-0x2ebc),'addressU':ue,'addressV':ue,'minFilter':vt,'magFilter':vt,'width':this['_xrCamera']['width'],'height':this['_xrCamera']['height'],'name':'XrView-'+this['_xrView']['eye']+'-Color'}))),this['_manager']['views']['supportedD'+'epth']&&this['_manager']['views']['availableD'+'epth']){const _0x4584c5=this['_manager']['views']['depthGpuOp'+'timized']?Te:vt;this['_textureDe'+'pth']=new _e(_0x1e168c,{'format':this['_manager']['views']['depthPixel'+'Format'],'arrayLength':_0x3ba8a0===0x31*-0x52+0x1057+-0x52*0x2?0x1a*0x115+0x18d0+-0x1b*0x1f6:_0x3ba8a0,'mipmaps':!(-0x7a*-0x4c+-0x731+0xe83*-0x2),'addressU':ue,'addressV':ue,'minFilter':_0x4584c5,'magFilter':_0x4584c5,'width':0x4,'height':0x4,'name':'XrView-'+this['_xrView']['eye']+'-Depth'});for(let _0x1cdc11=-0x1db3+0x83*0x11+-0x2a*-0x80;_0x1cdc11<this['_textureDe'+'pth']['_levels']['length'];_0x1cdc11++)this['_textureDe'+'pth']['_levels'][_0x1cdc11]=this['_emptyDept'+'hBuffer'];this['_textureDe'+'pth']['upload']();}(this['_textureCo'+'lor']||this['_textureDe'+'pth'])&&_0x1e168c['on']('devicelost',this['_onDeviceL'+'ost'],this);}get['textureCol'+'or'](){return this['_textureCo'+'lor'];}get['textureDep'+'th'](){return this['_textureDe'+'pth'];}get['depthUvMat'+'rix'](){return this['_depthMatr'+'ix'];}get['depthValue'+'ToMeters'](){var _0x3f3ac6;return((_0x3f3ac6=this['_depthInfo'])==null?void(-0x2478+-0x5ab*0x3+0x3579):_0x3f3ac6['rawValueTo'+'Meters'])||-0x9b2+0xb3f*0x3+-0x180b;}get['eye'](){return this['_xrView']['eye'];}get['viewport'](){return this['_viewport'];}get['projMat'](){return this['_projMat'];}get['projViewOf'+'fMat'](){return this['_projViewO'+'ffMat'];}get['viewOffMat'](){return this['_viewOffMa'+'t'];}get['viewInvOff'+'Mat'](){return this['_viewInvOf'+'fMat'];}get['viewMat3'](){return this['_viewMat3'];}get['positionDa'+'ta'](){return this['_positionD'+'ata'];}['update'](_0xb3863,_0x471663){this['_xrView']=_0x471663,this['_manager']['views']['availableC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera']);const _0xcda001=_0xb3863['session']['renderStat'+'e']['baseLayer']['getViewpor'+'t'](this['_xrView']);this['_viewport']['x']=_0xcda001['x'],this['_viewport']['y']=_0xcda001['y'],this['_viewport']['z']=_0xcda001['width'],this['_viewport']['w']=_0xcda001['height'],this['_projMat']['set'](this['_xrView']['projection'+'Matrix']),this['_viewMat']['set'](this['_xrView']['transform']['inverse']['matrix']),this['_viewInvMa'+'t']['set'](this['_xrView']['transform']['matrix']),this['_updateTex'+'tureColor'](),this['_updateDep'+'th'](_0xb3863);}['_updateTex'+'tureColor'](){if(!this['_manager']['views']['availableC'+'olor']||!this['_xrCamera']||!this['_textureCo'+'lor'])return;const _0x1e9c88=this['_manager']['webglBindi'+'ng'];if(!_0x1e9c88)return;const _0x369323=_0x1e9c88['getCameraI'+'mage'](this['_xrCamera']);if(!_0x369323)return;const _0x1e7def=this['_manager']['app']['graphicsDe'+'vice'],_0x497a10=_0x1e7def['gl'];if(!this['_frameBuff'+'erSource'])this['_frameBuff'+'erSource']=_0x497a10['createFram'+'ebuffer'](),this['_frameBuff'+'er']=_0x497a10['createFram'+'ebuffer']();else{const _0x3db1ba=_0x497a10['COLOR_ATTA'+'CHMENT0'],_0x1d8d9c=this['_xrCamera']['width'],_0xc6559e=this['_xrCamera']['height'];_0x1e7def['setFramebu'+'ffer'](this['_frameBuff'+'erSource']),_0x497a10['framebuffe'+'rTexture2D'](_0x497a10['FRAMEBUFFE'+'R'],_0x3db1ba,_0x497a10['TEXTURE_2D'],_0x369323,-0x83b+-0x127b+0x1ab6),_0x1e7def['setFramebu'+'ffer'](this['_frameBuff'+'er']),_0x497a10['framebuffe'+'rTexture2D'](_0x497a10['FRAMEBUFFE'+'R'],_0x3db1ba,_0x497a10['TEXTURE_2D'],this['_textureCo'+'lor']['impl']['_glTexture'],0x26be+0xc03*-0x1+-0x3*0x8e9),_0x497a10['bindFrameb'+'uffer'](_0x497a10['READ_FRAME'+'BUFFER'],this['_frameBuff'+'erSource']),_0x497a10['bindFrameb'+'uffer'](_0x497a10['DRAW_FRAME'+'BUFFER'],this['_frameBuff'+'er']),_0x497a10['blitFrameb'+'uffer'](0x88b+-0x23*-0x2b+-0xe6c,_0xc6559e,_0x1d8d9c,-0x1*-0x14b7+-0x1*-0xe92+-0x3*0xbc3,0x12c7*-0x1+0x1c9*-0x11+-0xc48*-0x4,0xa*-0x34b+0x243b+-0x34d,_0x1d8d9c,_0xc6559e,_0x497a10['COLOR_BUFF'+'ER_BIT'],_0x497a10['NEAREST']);}}['_updateDep'+'th'](_0x1cf35f){var _0x1c9261,_0x1732ee;if(!this['_manager']['views']['availableD'+'epth']||!this['_textureDe'+'pth'])return;const _0x4ec380=this['_manager']['views']['depthGpuOp'+'timized'],_0x3618a5=_0x4ec380?this['_manager']['webglBindi'+'ng']:_0x1cf35f;if(!_0x3618a5){this['_depthInfo']=null;return;}const _0x781bb5=_0x3618a5['getDepthIn'+'formation'](this['_xrView']);if(!_0x781bb5){this['_depthInfo']=null;return;}let _0x48f4cf=!this['_depthInfo']!=!_0x781bb5;this['_depthInfo']=_0x781bb5;const _0x3bd318=((_0x1c9261=this['_depthInfo'])==null?void(0x6d1*0x2+-0x6*0x627+0x5*0x4a8):_0x1c9261['width'])||0x163*0x19+-0x1142+-0x1165,_0x2c20aa=((_0x1732ee=this['_depthInfo'])==null?void(-0x148f*-0x1+0x1adf+0x1d3*-0x1a):_0x1732ee['height'])||-0x1*0x15f2+0x793*-0x1+0x1d89;let _0x363ae5=!(0xaed+0xe9*-0x27+0x1893);if((this['_textureDe'+'pth']['width']!==_0x3bd318||this['_textureDe'+'pth']['height']!==_0x2c20aa)&&(this['_textureDe'+'pth']['_width']=_0x3bd318,this['_textureDe'+'pth']['_height']=_0x2c20aa,_0x48f4cf=!(-0x13*0x95+0x2220+0x49d*-0x5),_0x363ae5=!(-0x1a0c+-0x263b*0x1+0x4047)),_0x48f4cf&&(this['_depthInfo']?this['_depthMatr'+'ix']['data']['set'](this['_depthInfo']['normDepthB'+'ufferFromN'+'ormView']['matrix']):this['_depthMatr'+'ix']['setIdentit'+'y']()),this['_depthInfo']){if(_0x4ec380){if(this['_depthInfo']['texture']){const _0x38640d=this['_manager']['app']['graphicsDe'+'vice']['gl'];switch(this['_textureDe'+'pth']['impl']['_glTexture']=this['_depthInfo']['texture'],this['_depthInfo']['textureTyp'+'e']==='texture-ar'+'ray'?this['_textureDe'+'pth']['impl']['_glTarget']=_0x38640d['TEXTURE_2D'+'_ARRAY']:this['_textureDe'+'pth']['impl']['_glTarget']=_0x38640d['TEXTURE_2D'],this['_manager']['views']['depthPixel'+'Format']){case Qi:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x38640d['R32F'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x38640d['FLOAT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x38640d['RED'];break;case Wi:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x38640d['DEPTH_COMP'+'ONENT16'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x38640d['UNSIGNED_S'+'HORT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x38640d['DEPTH_COMP'+'ONENT'];break;}this['_textureDe'+'pth']['impl']['_glCreated']=!(0x39*0x9f+0x22fd+-0x154*0x35);}}else this['_textureDe'+'pth']['_levels'][-0x283*-0x1+-0x2*-0xcdb+-0x1c39]=new Uint8Array(this['_depthInfo']['data']),this['_textureDe'+'pth']['upload']();}else this['_textureDe'+'pth']['_levels'][0x14f8+-0x1ce9+0x7f1]=this['_emptyDept'+'hBuffer'],this['_textureDe'+'pth']['upload']();_0x363ae5&&this['fire']('depth:resi'+'ze',_0x3bd318,_0x2c20aa);}['updateTran'+'sforms'](_0x89ff6f){_0x89ff6f?(this['_viewInvOf'+'fMat']['mul2'](_0x89ff6f,this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewInvOf'+'fMat'])['invert']()):(this['_viewInvOf'+'fMat']['copy'](this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewMat'])),this['_viewMat3']['setFromMat'+'4'](this['_viewOffMa'+'t']),this['_projViewO'+'ffMat']['mul2'](this['_projMat'],this['_viewOffMa'+'t']),this['_positionD'+'ata'][-0x11fd+-0xc0d*-0x2+-0x61d]=this['_viewInvOf'+'fMat']['data'][0x6e5+-0x10*-0xa4+-0x1*0x1119],this['_positionD'+'ata'][0x26bd+0xef2*-0x1+-0x17ca]=this['_viewInvOf'+'fMat']['data'][-0x1dfb+-0x82c*0x1+0xa3*0x3c],this['_positionD'+'ata'][-0x5*0x2d3+0x26dc+-0x18bb]=this['_viewInvOf'+'fMat']['data'][0x3ca+0x12ff*-0x1+-0xf43*-0x1];}['_onDeviceL'+'ost'](){this['_frameBuff'+'erSource']=null,this['_frameBuff'+'er']=null,this['_depthInfo']=null;}['getDepth'](_0x10aab9,_0x51e306){var _0x9cc9d1;return this['_manager']['views']['depthGpuOp'+'timized']?null:((_0x9cc9d1=this['_depthInfo'])==null?void(-0x12*-0xb2+-0x1a3e+0xdba):_0x9cc9d1['getDepthIn'+'Meters'](_0x10aab9,_0x51e306))??null;}['destroy'](){if(this['_depthInfo']=null,this['_textureCo'+'lor']&&(this['_textureCo'+'lor']['destroy'](),this['_textureCo'+'lor']=null),this['_textureDe'+'pth']&&(this['_textureDe'+'pth']['destroy'](),this['_textureDe'+'pth']=null),this['_frameBuff'+'erSource']){const _0x5bd974=this['_manager']['app']['graphicsDe'+'vice']['gl'];_0x5bd974['deleteFram'+'ebuffer'](this['_frameBuff'+'erSource']),this['_frameBuff'+'erSource']=null,_0x5bd974['deleteFram'+'ebuffer'](this['_frameBuff'+'er']),this['_frameBuff'+'er']=null;}}}h(Qv,'EVENT_DEPT'+'HRESIZE','depth:resi'+'ze');class gh extends me{constructor(_0x3aaf36){super(),h(this,'_manager'),h(this,'_index',new Map()),h(this,'_indexTmp',new Map()),h(this,'_list',[]),h(this,'_supported'+'Color',Me['browser']&&!!window['XRCamera']&&!!window['XRWebGLBin'+'ding']),h(this,'_supported'+'Depth',Me['browser']&&!!window['XRDepthInf'+'ormation']),h(this,'_available'+'Color',!(-0x2549*-0x1+0x52*-0x20+-0x4*0x6c2)),h(this,'_available'+'Depth',!(-0x1bf7*0x1+-0x287*0x1+-0x1e7f*-0x1)),h(this,'_depthUsag'+'e',''),h(this,'_depthForm'+'at',''),h(this,'_depthForm'+'ats',{[qv]:Lu,[jv]:Wi,[Yv]:Qi}),(this['_manager']=_0x3aaf36,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}get['list'](){return this['_list'];}get['supportedC'+'olor'](){return this['_supported'+'Color'];}get['supportedD'+'epth'](){return this['_supported'+'Depth'];}get['availableC'+'olor'](){return this['_available'+'Color'];}get['availableD'+'epth'](){return this['_available'+'Depth'];}get['depthUsage'](){return this['_depthUsag'+'e'];}get['depthGpuOp'+'timized'](){return this['_depthUsag'+'e']===Xv;}get['depthForma'+'t'](){return this['_depthForm'+'at'];}get['depthPixel'+'Format'](){return this['_depthForm'+'ats'][this['_depthForm'+'at']]??null;}['update'](_0x344671,_0x5513c3){for(let _0x22d026=0x1c3c+0x1616+-0x3252;_0x22d026<_0x5513c3['length'];_0x22d026++)this['_indexTmp']['set'](_0x5513c3[_0x22d026]['eye'],_0x5513c3[_0x22d026]);for(const [_0xd2ffc,_0x1ccd90]of this['_indexTmp']){let _0x309e09=this['_index']['get'](_0xd2ffc);_0x309e09?_0x309e09['update'](_0x344671,_0x1ccd90):(_0x309e09=new Qv(this['_manager'],_0x1ccd90,_0x5513c3['length']),this['_index']['set'](_0xd2ffc,_0x309e09),this['_list']['push'](_0x309e09),_0x309e09['update'](_0x344671,_0x1ccd90),this['fire']('add',_0x309e09));}for(const [_0x18446a,_0x45b45f]of this['_index']){if(this['_indexTmp']['has'](_0x18446a))continue;_0x45b45f['destroy'](),this['_index']['delete'](_0x18446a);const _0x557a2c=this['_list']['indexOf'](_0x45b45f);_0x557a2c!==-(0x520+0x9d3*-0x2+0xe87)&&this['_list']['splice'](_0x557a2c,-0x6*0x1e7+0x1*0x1a3f+-0x1*0xed4),this['fire']('remove',_0x45b45f);}this['_indexTmp']['clear']();}['get'](_0x4f4840){return this['_index']['get'](_0x4f4840)||null;}['_onSession'+'Start'](){if(this['_manager']['type']===Ro&&this['_manager']['session']['enabledFea'+'tures']&&(this['_available'+'Color']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('camera-acc'+'ess')!==-(0x12*0x9+0x6dd*0x2+0x15*-0xaf),this['_available'+'Depth']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('depth-sens'+'ing')!==-(-0x181d+-0xa1c+0x223a),this['_available'+'Depth'])){const _0x17b1e6=this['_manager']['session'];this['_depthUsag'+'e']=_0x17b1e6['depthUsage'],this['_depthForm'+'at']=_0x17b1e6['depthDataF'+'ormat'];}}['_onSession'+'End'](){for(const _0x6f2974 of this['_index']['values']())_0x6f2974['destroy']();this['_index']['clear'](),this['_available'+'Color']=!(-0xe5+-0x21e9+0x22cf),this['_available'+'Depth']=!(0x18e4+0x2139+0x3a1c*-0x1),this['_depthUsag'+'e']='',this['_depthForm'+'at']='',this['_list']['length']=0x22e7*-0x1+-0xef*0x9+0x2b4e;}}h(gh,'EVENT_ADD','add'),h(gh,'EVENT_REMO'+'VE','remove');class en extends me{constructor(_0x4c4159){super(),h(this,'app'),h(this,'_supported',Me['browser']&&!!navigator['xr']),h(this,'_available',{}),h(this,'_type',null),h(this,'_spaceType',null),h(this,'_session',null),h(this,'_baseLayer',null),h(this,'webglBindi'+'ng',null),h(this,'_reference'+'Space',null),h(this,'domOverlay'),h(this,'hitTest'),h(this,'imageTrack'+'ing'),h(this,'planeDetec'+'tion'),h(this,'meshDetect'+'ion'),h(this,'input'),h(this,'lightEstim'+'ation'),h(this,'views'),h(this,'anchors'),h(this,'_camera',null),h(this,'_localPosi'+'tion',new D()),h(this,'_localRota'+'tion',new le()),h(this,'_depthNear',-0x5*-0x19a+0x24a2+-0x2ca4+0.1),h(this,'_depthFar',-0xb0f*0x2+0x15c*0xf+0xe*0x67),h(this,'_supported'+'FrameRates',null),h(this,'_width',-0x7*0x1eb+0xce6+0x87),h(this,'_height',0x26e8+0x9f5+-0x30dd),h(this,'_framebuff'+'erScaleFac'+'tor',0x197d+0xf*0x20c+0x1c18*-0x2),(this['app']=_0x4c4159,this['_available'][Ak]=!(0x2*-0x1211+0x2398+0x1*0x8b),this['_available'][Ck]=!(-0x24f0+-0xf4c+0x343d),this['_available'][Ro]=!(-0x1*0x3be+-0x2025*0x1+0x1*0x23e4),this['views']=new gh(this),this['domOverlay']=new Dk(this),this['hitTest']=new Wr(this),this['imageTrack'+'ing']=new Kv(this),this['planeDetec'+'tion']=new yo(this),this['meshDetect'+'ion']=new xo(this),this['input']=new Li(this),this['lightEstim'+'ation']=new bu(this),this['anchors']=new Ja(this),this['views']=new gh(this),this['_supported']&&(navigator['xr']['addEventLi'+'stener']('devicechan'+'ge',()=>{this['_deviceAva'+'ilabilityC'+'heck']();}),this['_deviceAva'+'ilabilityC'+'heck'](),this['app']['graphicsDe'+'vice']['on']('devicelost',this['_onDeviceL'+'ost'],this),this['app']['graphicsDe'+'vice']['on']('devicerest'+'ored',this['_onDeviceR'+'estored'],this)),this['isPC']=r0());}['destroy'](){}['start'](_0x21a323,_0x2dcd33,_0x4d3e3c,_0x8b53fd){let _0x536f16=_0x8b53fd;if(typeof _0x8b53fd=='object'&&(_0x536f16=_0x8b53fd['callback']),!this['_available'][_0x2dcd33]){_0x536f16&&_0x536f16(new Error('XR\x20is\x20not\x20'+'available'));return;}if(this['_session']){_0x536f16&&_0x536f16(new Error('XR\x20session'+'\x20is\x20alread'+'y\x20started'));return;}this['_camera']=_0x21a323,this['_camera']['camera']['xr']=this,this['_type']=_0x2dcd33,this['_spaceType']=_0x4d3e3c,this['_framebuff'+'erScaleFac'+'tor']=(_0x8b53fd==null?void(0x25d7+0x633+-0x1*0x2c0a):_0x8b53fd['framebuffe'+'rScaleFact'+'or'])??0x688+-0x1cdc+-0x1655*-0x1,this['_setClipPl'+'anes'](_0x21a323['nearClip'],_0x21a323['farClip']);const _0x17f143={'requiredFeatures':[_0x4d3e3c],'optionalFeatures':[]},_0x9a8ee4=this['app']['graphicsDe'+'vice'];_0x9a8ee4!=null&&_0x9a8ee4['isWebGPU']&&_0x17f143['requiredFe'+'atures']['push']('webgpu');const _0x9fc9d9=_0x9a8ee4==null?void(-0x1*0x93a+0x71*0x1+-0xd*-0xad):_0x9a8ee4['isWebGL2'];if(_0x2dcd33===Ro){if(_0x17f143['optionalFe'+'atures']['push']('light-esti'+'mation'),_0x17f143['optionalFe'+'atures']['push']('hit-test'),_0x8b53fd&&(_0x8b53fd['imageTrack'+'ing']&&this['imageTrack'+'ing']['supported']&&_0x17f143['optionalFe'+'atures']['push']('image-trac'+'king'),_0x8b53fd['planeDetec'+'tion']&&_0x17f143['optionalFe'+'atures']['push']('plane-dete'+'ction'),_0x8b53fd['meshDetect'+'ion']&&_0x17f143['optionalFe'+'atures']['push']('mesh-detec'+'tion')),this['domOverlay']['supported']&&this['domOverlay']['root']&&(_0x17f143['optionalFe'+'atures']['push']('dom-overla'+'y'),_0x17f143['domOverlay']={'root':this['domOverlay']['root']}),_0x8b53fd&&_0x8b53fd['anchors']&&this['anchors']['supported']&&_0x17f143['optionalFe'+'atures']['push']('anchors'),_0x8b53fd&&_0x8b53fd['depthSensi'+'ng']&&this['views']['supportedD'+'epth']){_0x17f143['optionalFe'+'atures']['push']('depth-sens'+'ing');const _0x18b6b2=[],_0x240c40=[];if(_0x18b6b2['push'](Xv,Mk),_0x240c40['push'](Yv,qv,jv),_0x8b53fd['depthSensi'+'ng']['usagePrefe'+'rence']){const _0x54ce07=_0x18b6b2['indexOf'](_0x8b53fd['depthSensi'+'ng']['usagePrefe'+'rence']);_0x54ce07!==-(0x1c4+0x5*0x4e+0x1d*-0x1d)&&_0x18b6b2['splice'](_0x54ce07,-0x44d+-0xca7*0x1+0x10f5),_0x18b6b2['unshift'](_0x8b53fd['depthSensi'+'ng']['usagePrefe'+'rence']);}if(_0x8b53fd['depthSensi'+'ng']['dataFormat'+'Preference']){const _0x36a64c=_0x240c40['indexOf'](_0x8b53fd['depthSensi'+'ng']['dataFormat'+'Preference']);_0x36a64c!==-(-0x2*-0x1d8+0x1047+-0x13f6)&&_0x240c40['splice'](_0x36a64c,0x214a+-0x359*0x9+-0xca*0x4),_0x240c40['unshift'](_0x8b53fd['depthSensi'+'ng']['dataFormat'+'Preference']);}_0x17f143['depthSensi'+'ng']={'usagePreference':_0x18b6b2,'dataFormatPreference':_0x240c40};}_0x9fc9d9&&_0x8b53fd&&_0x8b53fd['cameraColo'+'r']&&this['views']['supportedC'+'olor']&&_0x17f143['optionalFe'+'atures']['push']('camera-acc'+'ess');}_0x17f143['optionalFe'+'atures']['push']('hand-track'+'ing'),_0x8b53fd&&_0x8b53fd['optionalFe'+'atures']&&(_0x17f143['optionalFe'+'atures']=_0x17f143['optionalFe'+'atures']['concat'](_0x8b53fd['optionalFe'+'atures'])),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['images']['length']?this['imageTrack'+'ing']['prepareIma'+'ges']((_0x4c092f,_0x323baf)=>{if(_0x4c092f){_0x536f16&&_0x536f16(_0x4c092f),this['fire']('error',_0x4c092f);return;}_0x323baf!==null&&(_0x17f143['trackedIma'+'ges']=_0x323baf),this['_onStartOp'+'tionsReady'](_0x2dcd33,_0x4d3e3c,_0x17f143,_0x536f16);}):this['_onStartOp'+'tionsReady'](_0x2dcd33,_0x4d3e3c,_0x17f143,_0x536f16);}['_onStartOp'+'tionsReady'](_0x65b3d2,_0xa51f8c,_0x5019bb,_0x469e23){const _0x4083cf=this['isPC']?{'requiredFeatures':['local-floo'+'r']}:_0x5019bb;navigator['xr']['requestSes'+'sion'](_0x65b3d2,_0x4083cf)['then'](_0x14dd09=>{this['_onSession'+'Start'](_0x14dd09,_0xa51f8c,_0x469e23);})['catch'](_0x3d9112=>{this['_camera']['camera']['xr']=null,this['_camera']=null,this['_type']=null,this['_spaceType']=null,_0x469e23&&_0x469e23(_0x3d9112),this['fire']('error',_0x3d9112);});}['end'](_0x9b79ba){if(!this['_session']){_0x9b79ba&&_0x9b79ba(new Error('XR\x20Session'+'\x20is\x20not\x20in'+'itialized'));return;}this['webglBindi'+'ng']=null,_0x9b79ba&&this['once']('end',_0x9b79ba),this['_session']['end']();}['isAvailabl'+'e'](_0x119485){return this['_available'][_0x119485];}['_deviceAva'+'ilabilityC'+'heck'](){for(const _0x50a347 in this['_available'])this['_sessionSu'+'pportCheck'](_0x50a347);}['initiateRo'+'omCapture'](_0x38cc71){if(!this['_session']){_0x38cc71(new Error('Session\x20is'+'\x20not\x20activ'+'e'));return;}if(!this['_session']['initiateRo'+'omCapture']){_0x38cc71(new Error('Session\x20do'+'es\x20not\x20sup'+'port\x20manua'+'l\x20room\x20cap'+'ture'));return;}this['_session']['initiateRo'+'omCapture']()['then'](()=>{_0x38cc71&&_0x38cc71(null);})['catch'](_0x51ca7b=>{_0x38cc71&&_0x38cc71(_0x51ca7b);});}['updateTarg'+'etFrameRat'+'e'](_0x9a1c84,_0x3f478f){var _0x4e360b;if(!((_0x4e360b=this['_session'])!=null&&_0x4e360b['updateTarg'+'etFrameRat'+'e'])){_0x3f478f==null||_0x3f478f(new Error('unable\x20to\x20'+'update\x20fra'+'meRate'));return;}this['_session']['updateTarg'+'etFrameRat'+'e'](_0x9a1c84)['then'](()=>{_0x3f478f==null||_0x3f478f();})['catch'](_0x1c9661=>{_0x3f478f==null||_0x3f478f(_0x1c9661);});}['_sessionSu'+'pportCheck'](_0xcea021){navigator['xr']['isSessionS'+'upported'](_0xcea021)['then'](_0x8492d4=>{this['_available'][_0xcea021]!==_0x8492d4&&(this['_available'][_0xcea021]=_0x8492d4,this['fire']('available',_0xcea021,_0x8492d4),this['fire']('available:'+_0xcea021,_0x8492d4));})['catch'](_0x46a5d0=>{this['fire']('error',_0x46a5d0);});}['_onSession'+'Start'](_0x5b9227,_0x891913,_0x1887da){let _0x9cb668=!(0x25c8*-0x1+-0x7db*-0x2+0x1613);this['_session']=_0x5b9227;const _0x804de1=()=>{this['fire']('visibility'+':change',_0x5b9227['visibility'+'State']);},_0x27cc3d=()=>{this['_setClipPl'+'anes'](this['_camera']['nearClip'],this['_camera']['farClip']);},_0x4051de=()=>{this['_camera']&&(this['_camera']['off']('set_nearCl'+'ip',_0x27cc3d),this['_camera']['off']('set_farCli'+'p',_0x27cc3d),this['_camera']['camera']['xr']=null,this['_camera']=null),_0x5b9227['removeEven'+'tListener']('end',_0x4051de),_0x5b9227['removeEven'+'tListener']('visibility'+'change',_0x804de1),_0x9cb668||this['fire']('end'),this['_session']=null,this['_reference'+'Space']=null,this['_width']=-0x20b9+0x36d*0x3+0x1672,this['_height']=-0x2544+0x230d*0x1+0x237,this['_type']=null,this['_spaceType']=null,this['app']['systems']&&this['app']['tick']();};_0x5b9227['addEventLi'+'stener']('end',_0x4051de),_0x5b9227['addEventLi'+'stener']('visibility'+'change',_0x804de1),this['_camera']['on']('set_nearCl'+'ip',_0x27cc3d),this['_camera']['on']('set_farCli'+'p',_0x27cc3d),w['assert'](window,'window\x20is\x20'+'needed\x20to\x20'+'scale\x20the\x20'+'XR\x20framebu'+'ffer.\x20Are\x20'+'you\x20runnin'+'g\x20XR\x20headl'+'ess?'),this['_createBas'+'eLayer'](),this['session']['supportedF'+'rameRates']?this['_supported'+'FrameRates']=Array['from'](this['session']['supportedF'+'rameRates']):this['_supported'+'FrameRates']=null,this['_session']['addEventLi'+'stener']('frameratec'+'hange',()=>{var _0xcc03b2;this['fire']('frameratec'+'hange',(_0xcc03b2=this['_session'])==null?void(0x4*0x671+0x1d*-0xe3+-0xd):_0xcc03b2['frameRate']);}),_0x5b9227['requestRef'+'erenceSpac'+'e'](_0x891913)['then'](_0x178c6e=>{this['_reference'+'Space']=_0x178c6e,this['app']['tick'](),_0x1887da&&_0x1887da(null),this['fire']('start');})['catch'](_0x8b036c=>{_0x9cb668=!(0x58a*-0x2+-0x187d+0x1*0x2391),_0x5b9227['end'](),_0x1887da&&_0x1887da(_0x8b036c),this['fire']('error',_0x8b036c);});}['_setClipPl'+'anes'](_0x5b6274,_0x326acc){this['_depthNear']===_0x5b6274&&this['_depthFar']===_0x326acc||(this['_depthNear']=_0x5b6274,this['_depthFar']=_0x326acc,this['_session']&&this['_session']['updateRend'+'erState']({'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_createBas'+'eLayer'](){const _0x3baa66=this['app']['graphicsDe'+'vice'],_0x2c0681=_0x3baa66['maxPixelRa'+'tio']/window['devicePixe'+'lRatio']*this['_framebuff'+'erScaleFac'+'tor'];if(this['_baseLayer']=new XRWebGLLayer(this['_session'],_0x3baa66['gl'],{'alpha':!(0x29*-0x5+-0x924+-0x9f1*-0x1),'depth':!(-0x265c+-0x4*-0x380+0x185c),'stencil':!(-0x1663+0x994+0xccf),'framebufferScaleFactor':_0x2c0681,'antialias':!(0x1*0x1c55+0x8a*0xd+0x2*-0x11ab)}),_0x3baa66!=null&&_0x3baa66['isWebGL2']&&window['XRWebGLBin'+'ding'])try{this['webglBindi'+'ng']=new XRWebGLBinding(this['_session'],_0x3baa66['gl']);}catch(_0xf748c3){this['fire']('error',_0xf748c3);}this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']});}['_onDeviceL'+'ost'](){this['_session']&&(this['webglBindi'+'ng']&&(this['webglBindi'+'ng']=null),this['_baseLayer']=null,this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_onDeviceR'+'estored'](){this['_session']&&setTimeout(()=>{this['app']['graphicsDe'+'vice']['gl']['makeXRComp'+'atible']()['then'](()=>{this['_createBas'+'eLayer']();})['catch'](_0x31163a=>{this['fire']('error',_0x31163a);});},0x10c0+0x1b9+-0x1279);}['update'](_0x410b93){if(!this['_session'])return!(-0x3a*0x8f+0x4f0+-0x1b77*-0x1);const _0x1193bc=_0x410b93['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rWidth'],_0xb49ddc=_0x410b93['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rHeight'];(this['_width']!==_0x1193bc||this['_height']!==_0xb49ddc)&&(this['_width']=_0x1193bc,this['_height']=_0xb49ddc,this['app']['graphicsDe'+'vice']['setResolut'+'ion'](_0x1193bc,_0xb49ddc));const _0x3a3523=_0x410b93['getViewerP'+'ose'](this['_reference'+'Space']);if(!_0x3a3523)return!(-0x2*0x812+-0x4f*-0x3b+-0x210);const _0x2ffd8d=this['views']['list']['length'];this['views']['update'](_0x410b93,_0x3a3523['views']);const _0x5b80fb=_0x3a3523['transform']['position'],_0x530eb2=_0x3a3523['transform']['orientatio'+'n'];if(this['_localPosi'+'tion']['set'](_0x5b80fb['x'],_0x5b80fb['y'],_0x5b80fb['z']),this['_localRota'+'tion']['set'](_0x530eb2['x'],_0x530eb2['y'],_0x530eb2['z'],_0x530eb2['w']),_0x2ffd8d===-0x1ef*0x8+-0x2f*0xbd+0x322b&&this['views']['list']['length']>0x62*-0xa+-0x1*-0x15df+0x1*-0x120b){const _0x54d50e=new te(),_0xa077fa=this['views']['list'][-0x2*0x1371+-0x102d*-0x1+0x16b5];_0x54d50e['copy'](_0xa077fa['projMat']);const _0x3af5d9=_0x54d50e['data'],_0x3ce7b3=(-0x2251+0xd*-0x1e4+0x3ae7)*Math['atan']((0xcfa+-0x11*0x19+-0xb50)/_0x3af5d9[0xd39+-0x74a+0x1*-0x5ea])*(0xdba+0x1*0x102b+-0x1d31)/Math['PI'],_0x303b46=_0x3af5d9[-0x58*-0x45+0x5d*0x39+-0x38*0xcb]/_0x3af5d9[0x7ba+-0x24bf+-0x143*-0x17],_0x53c3fd=_0x3af5d9[0x1d9c+-0x685+-0x1709*0x1]/(_0x3af5d9[-0xcff+-0x95e+0x1667]+(0x1*0x64e+0x2099+-0xd*0x2fe)),_0xbacce8=_0x3af5d9[-0x21*-0x1d+0x1e67*-0x1+0x1ab8]/(_0x3af5d9[-0x2229+0x1*0x2566+0x27*-0x15]-(0x1870+-0x1204+-0x1*0x66b));this['_camera']['camera']['setXrPrope'+'rties']({'aspectRatio':_0x303b46,'farClip':_0x53c3fd,'fov':_0x3ce7b3,'horizontalFov':!(-0xe1e+0x331*0x6+-0x507),'nearClip':_0xbacce8});}return this['_camera']['camera']['_node']['setLocalPo'+'sition'](this['_localPosi'+'tion']),this['_camera']['camera']['_node']['setLocalRo'+'tation'](this['_localRota'+'tion']),this['input']['update'](_0x410b93),this['_type']===Ro&&(this['hitTest']['supported']&&this['hitTest']['update'](_0x410b93),this['lightEstim'+'ation']['supported']&&this['lightEstim'+'ation']['update'](_0x410b93),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['update'](_0x410b93),this['anchors']['supported']&&this['anchors']['update'](_0x410b93),this['planeDetec'+'tion']['supported']&&this['planeDetec'+'tion']['update'](_0x410b93),this['meshDetect'+'ion']['supported']&&this['meshDetect'+'ion']['update'](_0x410b93)),this['fire']('update',_0x410b93),!(0x2513+0x62*0x1+-0x2575);}get['supported'](){return this['_supported'];}get['active'](){return!!this['_session'];}get['type'](){return this['_type'];}get['spaceType'](){return this['_spaceType'];}get['session'](){return this['_session'];}get['frameRate'](){var _0x463243;return((_0x463243=this['_session'])==null?void(-0x1d3b+0x7a0+0x1*0x159b):_0x463243['frameRate'])??null;}get['supportedF'+'rameRates'](){return this['_supported'+'FrameRates'];}get['framebuffe'+'rScaleFact'+'or'](){return this['_framebuff'+'erScaleFac'+'tor'];}set['fixedFovea'+'tion'](_0x4971d6){var _0x5af113;(((_0x5af113=this['_baseLayer'])==null?void(0x171*0x18+0x105a+-0x32f2):_0x5af113['fixedFovea'+'tion'])??null)!==null&&(this['app']['graphicsDe'+'vice']['samples']>-0x1*-0xc51+-0x2f*0x6a+0x726&&w['warn']('Fixed\x20Fove'+'ation\x20is\x20i'+'gnored.\x20Di'+'sable\x20anti'+'-aliasing\x20'+'for\x20it\x20to\x20'+'be\x20effecti'+'ve.'),this['_baseLayer']['fixedFovea'+'tion']=_0x4971d6);}get['fixedFovea'+'tion'](){var _0xaea4ce;return((_0xaea4ce=this['_baseLayer'])==null?void(-0x27*0xf3+-0xb51*0x1+0x3056):_0xaea4ce['fixedFovea'+'tion'])??null;}get['camera'](){return this['_camera']?this['_camera']['entity']:null;}get['visibility'+'State'](){return this['_session']?this['_session']['visibility'+'State']:null;}}h(en,'EVENT_AVAI'+'LABLE','available'),h(en,'EVENT_STAR'+'T','start'),h(en,'EVENT_END','end'),h(en,'EVENT_UPDA'+'TE','update'),h(en,'EVENT_ERRO'+'R','error');class cU extends Ks{constructor(_0x4f8527,_0x4b6908={}){super(_0x4f8527),h(this,'rotateArou'+'ndEl');const _0x1ca57d=new yI();_0x1ca57d['graphicsDe'+'vice']=_0x4b6908['graphicsDe'+'vice']??this['createDevi'+'ce'](_0x4f8527,_0x4b6908),this['addCompone'+'ntSystems'](_0x1ca57d),this['addResourc'+'eHandles'](_0x1ca57d),_0x1ca57d['elementInp'+'ut']=_0x4b6908['elementInp'+'ut'],_0x1ca57d['keyboard']=_0x4b6908['keyboard'],_0x1ca57d['mouse']=_0x4b6908['mouse'],_0x1ca57d['touch']=_0x4b6908['touch'],_0x1ca57d['gamepads']=_0x4b6908['gamepads'],_0x1ca57d['scriptPref'+'ix']=_0x4b6908['scriptPref'+'ix'],_0x1ca57d['assetPrefi'+'x']=_0x4b6908['assetPrefi'+'x'],_0x1ca57d['scriptsOrd'+'er']=_0x4b6908['scriptsOrd'+'er'],_0x1ca57d['soundManag'+'er']=new XT(),_0x1ca57d['lightmappe'+'r']=LI,_0x1ca57d['batchManag'+'er']=Yw,_0x1ca57d['xr']=en,this['init'](_0x1ca57d);}['createDevi'+'ce'](_0x4c8fc7,_0xf168e6){return _0xf168e6['graphicsDe'+'viceOption'+'s']||(_0xf168e6['graphicsDe'+'viceOption'+'s']={}),Me['browser']&&navigator['xr']&&(_0xf168e6['graphicsDe'+'viceOption'+'s']['xrCompatib'+'le']=!(-0x12e*-0x16+-0x50+-0x2*0xcd2)),_0xf168e6['graphicsDe'+'viceOption'+'s']['alpha']=_0xf168e6['graphicsDe'+'viceOption'+'s']['alpha']||!(0x1292+-0x2*-0xef9+-0x3083),new wT(_0x4c8fc7,_0xf168e6['graphicsDe'+'viceOption'+'s']);}['addCompone'+'ntSystems'](_0x11e612){_0x11e612['componentS'+'ystems']=[Kp,EL,eR,ZI,iL,pR,rO,BO,VO,tF,PO,aL,tO,uO,KL,cL,wO,bO,RO,hR,sR,FO,iF];}['addResourc'+'eHandles'](_0x17dbd5){_0x17dbd5['resourceHa'+'ndlers']=[rF,lN,cN,hN,GN,kN,bk,QN,RN,fN,jN,HN,gN,LN,_N,YN,IN,SN,yN,uN,ek,KN,ZN,mN,DN];}}class hU extends me{constructor(_0xcaae1d,_0x4f46c1){super(),h(this,'_assets',new Set()),h(this,'_loadingAs'+'sets',new Set()),h(this,'_waitingAs'+'sets',new Set()),h(this,'_loading',!(-0x2*-0x1313+0x14c3+-0x3ae8)),h(this,'_loaded',!(-0x1ae1+0x196a+0x4*0x5e)),h(this,'_failed',[]),(this['_registry']=_0x4f46c1,_0xcaae1d['forEach'](_0x3fb418=>{if(_0x3fb418 instanceof pe)_0x3fb418['registry']||(_0x3fb418['registry']=_0x4f46c1),this['_assets']['add'](_0x3fb418);else{const _0x10e001=_0x4f46c1['get'](_0x3fb418);_0x10e001?this['_assets']['add'](_0x10e001):this['_waitForAs'+'set'](_0x3fb418);}}));}['destroy'](){this['_registry']['off']('load',this['_onLoad']),this['_registry']['off']('error',this['_onError']),this['_waitingAs'+'sets']['forEach'](_0x491619=>{this['_registry']['off']('add:'+_0x491619,this['_onAddAsse'+'t']);}),this['off']('progress'),this['off']('load');}['_assetHasD'+'ependencie'+'s'](_0x409177){var _0x593d1a;return _0x409177['type']==='model'&&((_0x593d1a=_0x409177['file'])==null?void(-0x1265*0x2+-0x1be6*-0x1+0x8e4):_0x593d1a['url'])&&_0x409177['file']['url']&&_0x409177['file']['url']['match'](/.json$/g);}['load'](_0x2170d1,_0x5c1bc4){if(this['_loading']){console['debug']('AssetListL'+'oader:\x20Loa'+'d\x20function'+'\x20called\x20mu'+'ltiple\x20tim'+'es.');return;}this['_loading']=!(-0xf7+-0x12ab+0x1*0x13a2),this['_callback']=_0x2170d1,this['_scope']=_0x5c1bc4,this['_registry']['on']('load',this['_onLoad'],this),this['_registry']['on']('error',this['_onError'],this);let _0x532818=!(0x22c*0x4+-0x264b*0x1+-0x5*-0x5ec);this['_assets']['forEach'](_0x3bfff5=>{_0x3bfff5['loaded']||(_0x532818=!(-0x1*-0x10a5+-0xbdc+-0x4c9),this['_assetHasD'+'ependencie'+'s'](_0x3bfff5)&&this['_registry']['loadFromUr'+'l'](_0x3bfff5['file']['url'],_0x3bfff5['type'],(_0x114945,_0x3602fe)=>{if(_0x114945){this['_onError'](_0x114945,_0x3bfff5);return;}this['_onLoad'](_0x3bfff5);}),this['_loadingAs'+'sets']['add'](_0x3bfff5),this['_registry']['add'](_0x3bfff5));}),this['_loadingAs'+'sets']['forEach'](_0x17758a=>{this['_assetHasD'+'ependencie'+'s'](_0x17758a)||this['_registry']['load'](_0x17758a);}),!_0x532818&&this['_waitingAs'+'sets']['size']===-0x230+-0x335*-0x4+-0xaa4&&this['_loadingCo'+'mplete']();}['ready'](_0x4b1137,_0x119c47=this){this['_loaded']?_0x4b1137['call'](_0x119c47,Array['from'](this['_assets'])):this['once']('load',_0x212447=>{_0x4b1137['call'](_0x119c47,_0x212447);});}['_loadingCo'+'mplete'](){this['_loaded']||(this['_loaded']=!(-0x5*0x763+0x1*0x12d0+0x121f),this['_registry']['off']('load',this['_onLoad'],this),this['_registry']['off']('error',this['_onError'],this),this['_failed']['length']?(this['_callback']&&this['_callback']['call'](this['_scope'],'Failed\x20to\x20'+'load\x20some\x20'+'assets',this['_failed']),this['fire']('error',this['_failed'])):(this['_callback']&&this['_callback']['call'](this['_scope']),this['fire']('load',Array['from'](this['_assets']))));}['_onLoad'](_0x4eb723){this['_loadingAs'+'sets']['has'](_0x4eb723)&&(this['fire']('progress',_0x4eb723),this['_loadingAs'+'sets']['delete'](_0x4eb723)),this['_loadingAs'+'sets']['size']===-0x162a+-0x42e+0x1a58&&setTimeout(()=>{this['_loadingCo'+'mplete']();},0x21aa+0x1*0x1a17+-0x1*0x3bc1);}['_onError'](_0x3b3bf0,_0x335750){this['_loadingAs'+'sets']['has'](_0x335750)&&(this['_failed']['push'](_0x335750),this['_loadingAs'+'sets']['delete'](_0x335750)),this['_loadingAs'+'sets']['size']===0x2d1+-0x1373+0x10a2&&setTimeout(()=>{this['_loadingCo'+'mplete']();},0x104b+0x1c5c+-0x2ca7);}['_onAddAsse'+'t'](_0x3b0edc){this['_waitingAs'+'sets']['delete'](_0x3b0edc),this['_assets']['add'](_0x3b0edc),_0x3b0edc['loaded']||(this['_loadingAs'+'sets']['add'](_0x3b0edc),this['_registry']['load'](_0x3b0edc));}['_waitForAs'+'set'](_0x3e47f3){this['_waitingAs'+'sets']['add'](_0x3e47f3),this['_registry']['once']('add:'+_0x3e47f3,this['_onAddAsse'+'t'],this);}}const xc=[],Ok=[[],[],[]];class Fk extends ys{constructor(_0x30faea,_0x113412){super(_0x30faea),h(this,'viewBindGr'+'oups',[]),this['renderer']=_0x113412;}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x909705=>{_0x909705['defaultUni'+'formBuffer']['destroy'](),_0x909705['destroy']();}),this['viewBindGr'+'oups']['length']=-0x2530+0x7*0x67+-0xb75*-0x3;}['update'](_0x533f12,_0x43ded8,_0x2788cb,_0x34fde0){this['camera']=_0x533f12,this['scene']=_0x43ded8,this['layers']=_0x2788cb,this['mapping']=_0x34fde0;}['execute'](){const _0x3dc357=this['device'],{renderer:_0x3bb405,camera:_0x1dc90a,scene:_0x467292,layers:_0x3c9ed1,mapping:_0x2649c5,renderTarget:_0xcc26b2}=this,_0x14ef03=_0x467292['layers']['layerList'],_0x50993e=_0x467292['layers']['subLayerEn'+'abled'],_0x2d9922=_0x467292['layers']['subLayerLi'+'st'];for(let _0x1b79be=0x7*0x4d7+-0x7*-0x55+-0x2434;_0x1b79be<_0x14ef03['length'];_0x1b79be++){const _0x20d1ee=_0x14ef03[_0x1b79be];if(!(_0x3c9ed1&&_0x3c9ed1['indexOf'](_0x20d1ee)<0x243e+0xea*0x2a+0xe9*-0x52)&&_0x20d1ee['enabled']&&_0x50993e[_0x1b79be]&&_0x20d1ee['camerasSet']['has'](_0x1dc90a['camera'])){const _0x231d05=_0x2d9922[_0x1b79be];Q['pushGpuMar'+'ker'](_0x3dc357,_0x20d1ee['name']+'('+(_0x231d05?'TRANSP':'OPAQUE')+')'),_0x20d1ee['_clearDept'+'hBuffer']&&_0x3bb405['clear'](_0x1dc90a['camera'],!(0xec*-0x20+0x268*-0x6+0x2bf1),!(-0xfa0+0x4*-0x95+0x11f4),!(0x9ab+-0xb68+0x2*0xdf));const _0x5754d6=_0x20d1ee['meshInstan'+'ces'];for(let _0x3a3d36=0x2686+0xf18+0x1*-0x359e;_0x3a3d36<_0x5754d6['length'];_0x3a3d36++){const _0x139fd4=_0x5754d6[_0x3a3d36];_0x139fd4['pick']&&_0x139fd4['transparen'+'t']===_0x231d05&&(xc['push'](_0x139fd4),_0x2649c5['set'](_0x139fd4['id'],_0x139fd4));}xc['length']>-0x1534+0x65c+0xed8&&(_0x467292['clusteredL'+'ightingEna'+'bled']&&_0x3bb405['worldClust'+'ersAllocat'+'or']['empty']['activate'](),_0x3bb405['setCameraU'+'niforms'](_0x1dc90a['camera'],_0xcc26b2),_0x3dc357['supportsUn'+'iformBuffe'+'rs']&&_0x3bb405['setupViewU'+'niformBuff'+'ers'](this['viewBindGr'+'oups'],_0x3bb405['viewUnifor'+'mFormat'],_0x3bb405['viewBindGr'+'oupFormat'],null),_0x3bb405['renderForw'+'ard'](_0x1dc90a['camera'],_0xcc26b2,xc,Ok,Wn,_0x4ffbd0=>{_0x3dc357['setBlendSt'+'ate'](pt['NOBLEND']);}),xc['length']=0x25a8+-0x8a*-0x29+-0x3bc2),Q['popGpuMark'+'er'](_0x3dc357);}}}}const df=new Set(),Nk=new re();let dU=class{constructor(_0x1a6331,_0x3fff01,_0xec35ed){h(this,'renderTarg'+'et',null),h(this,'mapping',new Map()),h(this,'deviceVali'+'d',!(0x11e1+-0x26bb+0x14da)),(w['assert'](_0x1a6331),this['renderer']=_0x1a6331['renderer'],this['device']=_0x1a6331['graphicsDe'+'vice'],this['renderPass']=new Fk(this['device'],_0x1a6331['renderer']),this['width']=0x1c13+-0x78*0x46+0x4bd*0x1,this['height']=0x1e30+-0x614*-0x5+0x1*-0x3c94,this['resize'](_0x3fff01,_0xec35ed),this['device']['on']('destroy',()=>{this['deviceVali'+'d']=!(0xd15+-0xb4c+-0x1c8);}));}['getSelecti'+'on'](_0x5ef7d4,_0x1d3236,_0x3048c3=0x26a*0x6+-0x28b+0x4*-0x2fc,_0x52f8e0=0x25c+-0x24b*0x1+-0x2*0x8){const _0x3eae1b=this['device'];if(_0x3eae1b['isWebGPU'])return w['errorOnce']('pc.Picker#'+'getSelecti'+'on\x20is\x20not\x20'+'supported\x20'+'on\x20WebGPU,'+'\x20use\x20pc.Pi'+'cker#getSe'+'lectionAsy'+'nc\x20instead'+'.'),[];w['assert'](typeof _0x5ef7d4!='object','Picker.get'+'Selection:'+'param\x20\x27rec'+'t\x27\x20is\x20depr'+'ecated,\x20us'+'e\x20\x27x,\x20y,\x20w'+'idth,\x20heig'+'ht\x27\x20instea'+'d.'),_0x1d3236=this['renderTarg'+'et']['height']-(_0x1d3236+_0x52f8e0);const _0x10b0be=this['sanitizeRe'+'ct'](_0x5ef7d4,_0x1d3236,_0x3048c3,_0x52f8e0);_0x3eae1b['setRenderT'+'arget'](this['renderTarg'+'et']),_0x3eae1b['updateBegi'+'n']();const _0x1e9b71=new Uint8Array((-0x93e+-0x42*-0x72+-0x1422)*_0x10b0be['z']*_0x10b0be['w']);return _0x3eae1b['readPixels'](_0x10b0be['x'],_0x10b0be['y'],_0x10b0be['z'],_0x10b0be['w'],_0x1e9b71),_0x3eae1b['updateEnd'](),this['decodePixe'+'ls'](_0x1e9b71,this['mapping']);}['getSelecti'+'onAsync'](_0x28e91e,_0x406f45,_0x4a7fcc=-0x1*0xfe+-0x1592+0x1691,_0x415101=0x1*0xb15+0x42*-0x52+0xb8*0xe){var _0x220778;(_0x220778=this['device'])!=null&&_0x220778['isWebGL2']&&(_0x406f45=this['renderTarg'+'et']['height']-(_0x406f45+_0x415101));const _0x32d9aa=this['sanitizeRe'+'ct'](_0x28e91e,_0x406f45,_0x4a7fcc,_0x415101);return this['renderTarg'+'et']['colorBuffe'+'r']['read'](_0x32d9aa['x'],_0x32d9aa['y'],_0x32d9aa['z'],_0x32d9aa['w'],{'renderTarget':this['renderTarg'+'et'],'immediate':!(-0x8e4*-0x1+-0x171+-0x1*0x773)})['then'](_0x49ee3c=>this['decodePixe'+'ls'](_0x49ee3c,this['mapping']));}['sanitizeRe'+'ct'](_0x3df34e,_0x2ea3e5,_0x2bf374,_0x157bdc){const _0x4c2dee=this['renderTarg'+'et']['width'],_0x182540=this['renderTarg'+'et']['height'];return _0x3df34e=Y['clamp'](Math['floor'](_0x3df34e),0x207f+-0x1*-0x21d5+-0x4254,_0x4c2dee-(-0x1233+-0x27d*0xb+0x2d93)),_0x2ea3e5=Y['clamp'](Math['floor'](_0x2ea3e5),-0x1c9a+-0x9*0xc7+0x2399,_0x182540-(-0x186*-0xd+0x1f2f+0x197e*-0x2)),_0x2bf374=Math['floor'](Math['max'](_0x2bf374,0x555+0x3*0x4c6+-0xa*0x1f7)),_0x2bf374=Math['min'](_0x2bf374,_0x4c2dee-_0x3df34e),_0x157bdc=Math['floor'](Math['max'](_0x157bdc,-0x23b3+0xa9*0x11+0x187b)),_0x157bdc=Math['min'](_0x157bdc,_0x182540-_0x2ea3e5),Nk['set'](_0x3df34e,_0x2ea3e5,_0x2bf374,_0x157bdc);}['decodePixe'+'ls'](_0x17a1e7,_0x3fec67){const _0x3eee0e=[];if(this['deviceVali'+'d']){const _0x57b43f=_0x17a1e7['length'];for(let _0x358b20=0x2*0xb02+0x1727+0x1f*-0x175;_0x358b20<_0x57b43f;_0x358b20+=0x1*0x175+0x1032+0x11a3*-0x1){const _0x55a84a=_0x17a1e7[_0x358b20+(-0x1108+0xff6+-0x2*-0x89)],_0x233648=_0x17a1e7[_0x358b20+(-0xc1b+0xa*-0xdb+-0x5*-0x422)],_0x475d1f=_0x17a1e7[_0x358b20+(-0x1ba1*-0x1+0xfa2+0x1*-0x2b41)],_0x31ac41=(_0x17a1e7[_0x358b20+(-0x39*0x68+-0x79*0xd+-0x86*-0x38)]<<0x1*-0xf99+-0x13f6+0x23a7|_0x55a84a<<0x15e*-0x10+-0x9f2+0x1fe2|_0x233648<<0x63*-0xd+0x4d0+-0x15*-0x3|_0x475d1f)>>>-0x11e9*-0x1+-0x26be+-0x14d5*-0x1;_0x31ac41!==0xf1cef8db+-0x1905ef*0xc11+0x13c21a003&&df['add'](_0x3fec67['get'](_0x31ac41));}df['forEach'](_0x4b5e2b=>{_0x4b5e2b&&_0x3eee0e['push'](_0x4b5e2b);}),df['clear']();}return _0x3eee0e;}['allocateRe'+'nderTarget'](){const _0x1346d6=new _e(this['device'],{'format':Ne,'width':this['width'],'height':this['height'],'mipmaps':!(0x1*0xfaf+0x1*0x283+-0x1*0x1231),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':'pick'});this['renderTarg'+'et']=new gt({'colorBuffer':_0x1346d6,'depth':!(-0x1*-0x599+0x1000+-0x13*0x123)});}['releaseRen'+'derTarget'](){this['renderTarg'+'et']&&(this['renderTarg'+'et']['destroyTex'+'tureBuffer'+'s'](),this['renderTarg'+'et']['destroy'](),this['renderTarg'+'et']=null);}['prepare'](_0x2ab32e,_0x2cc2b4,_0x3514a4){_0x3514a4 instanceof Ot&&(_0x3514a4=[_0x3514a4]),(!this['renderTarg'+'et']||this['width']!==this['renderTarg'+'et']['width']||this['height']!==this['renderTarg'+'et']['height'])&&(this['releaseRen'+'derTarget'](),this['allocateRe'+'nderTarget']()),this['mapping']['clear']();const _0x248bd0=this['renderPass'];_0x248bd0['init'](this['renderTarg'+'et']),_0x248bd0['colorOps']['clearValue']=ie['WHITE'],_0x248bd0['colorOps']['clear']=!(0x1*-0xb29+-0x25f9+-0x3122*-0x1),_0x248bd0['depthStenc'+'ilOps']['clearDepth']=!(-0x16ba+-0x711+0x1dcb),_0x248bd0['update'](_0x2ab32e,_0x2cc2b4,_0x3514a4,this['mapping']),_0x248bd0['render']();}['resize'](_0x150bf1,_0x23585f){this['width']=Math['floor'](_0x150bf1),this['height']=Math['floor'](_0x23585f);}};new D(),new D();const kk=new wn(),Uk=new wn(),Bk=new wn();kk['end']=new D(),Uk['end']=new D(),Bk['end']=new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new re(),J['prototype']['scale']=J['prototype']['mulScalar'],D['prototype']['scale']=D['prototype']['mulScalar'],re['prototype']['scale']=re['prototype']['mulScalar'],new re();function uU(_0x50c258,_0x24ea60){return w['deprecated']('pc.createS'+'phere\x20is\x20d'+'eprecated.'+'\x20Use\x20\x27pc.M'+'esh.fromGe'+'ometry(dev'+'ice,\x20new\x20S'+'phereGeome'+'try(option'+'s);\x27\x20forma'+'t\x20instead.'),Ge['fromGeomet'+'ry'](_0x50c258,new Hp(_0x24ea60));}Object['defineProp'+'erties'](gt['prototype'],{'_glFrameBuffer':{'get':function(){return w['deprecated']('pc.RenderT'+'arget#_glF'+'rameBuffer'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RenderT'+'arget.impl'+'#_glFrameB'+'uffer\x20inst'+'ead.'),this['impl']['_glFrameBu'+'ffer'];},'set':function(_0x4de109){w['deprecated']('pc.RenderT'+'arget#_glF'+'rameBuffer'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RenderT'+'arget.impl'+'#_glFrameB'+'uffer\x20inst'+'ead.');}}}),Object['defineProp'+'erty'](kt,'defaultIns'+'tancingFor'+'mat',{'get':function(){return w['assert']('pc.VertexF'+'ormat.defa'+'ultInstanc'+'ingFormat\x20'+'is\x20depreca'+'ted,\x20use\x20p'+'c.VertexFo'+'rmat.getDe'+'faultInsta'+'ncingForma'+'t(graphics'+'Device).'),null;}}),Object['defineProp'+'erties'](_e['prototype'],{'rgbm':{'get':function(){return w['deprecated']('pc.Texture'+'#rgbm\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Te'+'xture#type'+'\x20instead.'),this['type']===Ki;},'set':function(_0x478171){w['deprecated']('pc.Texture'+'#rgbm\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Te'+'xture#type'+'\x20instead.'),this['type']=_0x478171?Ki:Ms;}},'swizzleGGGR':{'get':function(){return w['deprecated']('pc.Texture'+'#swizzleGG'+'GR\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Textu'+'re#type\x20in'+'stead.'),this['type']===zo;},'set':function(_0x59bb9c){w['deprecated']('pc.Texture'+'#swizzleGG'+'GR\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Textu'+'re#type\x20in'+'stead.'),this['type']=_0x59bb9c?zo:Ms;}},'_glTexture':{'get':function(){return w['deprecated']('pc.Texture'+'#_glTextur'+'e\x20is\x20no\x20lo'+'nger\x20avail'+'able,\x20use\x20'+'Use\x20pc.Tex'+'ture.impl.'+'_glTexture'+'\x20instead.'),this['impl']['_glTexture'];}}}),Object['defineProp'+'erty']($e['prototype'],'boneLimit',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#bo'+'neLimit\x20is'+'\x20deprecate'+'d\x20and\x20the\x20'+'limit\x20has\x20'+'been\x20remov'+'ed.'),-0x17a0+0x93b+-0x115*-0x11;}}),Object['defineProp'+'erty']($e['prototype'],'webgl2',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#we'+'bgl2\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e#isWebGL2'+'\x20instead.'),this['isWebGL2'];}}),Object['defineProp'+'erty']($e['prototype'],'textureFlo'+'atHighPrec'+'ision',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureFloat'+'HighPrecis'+'ion\x20is\x20dep'+'recated\x20an'+'d\x20always\x20r'+'eturns\x20tru'+'e.'),!(0x1429+0x66+-0x13*0x115);}}),Object['defineProp'+'erty']($e['prototype'],'extBlendMi'+'nmax',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tBlendMinm'+'ax\x20is\x20depr'+'ecated\x20as\x20'+'it\x20is\x20alwa'+'ys\x20true.'),!(0x3*-0xce7+-0x1da+-0xd85*-0x3);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'HalfFloat',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureHa'+'lfFloat\x20is'+'\x20deprecate'+'d\x20as\x20it\x20is'+'\x20always\x20tr'+'ue.'),!(0x749*-0x5+0x1*-0x933+0x920*0x5);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'Lod',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureLo'+'d\x20is\x20depre'+'cated\x20as\x20i'+'t\x20is\x20alway'+'s\x20true.'),!(-0x16*0xc2+0xb*-0x13b+0x1e35);}}),Object['defineProp'+'erty']($e['prototype'],'textureHal'+'fFloatFilt'+'erable',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureHalfF'+'loatFilter'+'able\x20is\x20de'+'precated\x20a'+'s\x20it\x20is\x20al'+'ways\x20true.'),!(0x17d7+-0xca0*0x2+0x169);}}),Object['defineProp'+'erty']($e['prototype'],'supportsMr'+'t',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsMrt\x20'+'is\x20depreca'+'ted\x20as\x20it\x20'+'is\x20always\x20'+'true.'),!(-0x260*-0x1+-0x1822+-0x22d*-0xa);}}),Object['defineProp'+'erty']($e['prototype'],'supportsVo'+'lumeTextur'+'es',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsVolu'+'meTextures'+'\x20is\x20deprec'+'ated\x20as\x20it'+'\x20is\x20always'+'\x20true.'),!(-0x5d1*-0x6+-0x2441+0x15b*0x1);}}),Object['defineProp'+'erty']($e['prototype'],'supportsIn'+'stancing',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsInst'+'ancing\x20is\x20'+'deprecated'+'\x20as\x20it\x20is\x20'+'always\x20tru'+'e.'),!(-0x125c+-0x14f9+-0x2755*-0x1);}}),Object['defineProp'+'erty']($e['prototype'],'textureHal'+'fFloatUpda'+'table',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureHalfF'+'loatUpdata'+'ble\x20is\x20dep'+'recated\x20as'+'\x20it\x20is\x20alw'+'ays\x20true.'),!(0x23*-0x32+-0x11a6+-0x1*-0x187c);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'Float',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureFl'+'oat\x20is\x20dep'+'recated\x20as'+'\x20it\x20is\x20alw'+'ays\x20true'),!(-0x16cf+-0x2150+0x381f);}}),Object['defineProp'+'erty']($e['prototype'],'extStandar'+'dDerivativ'+'es',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tStandardD'+'erivatives'+'\x20is\x20deprec'+'ated\x20as\x20it'+'\x20is\x20always'+'\x20true.'),!(-0x26ac+-0x157e+-0x97*-0x66);}}),pt['DEFAULT']=Object['freeze'](new pt());const ut=new pt(),qi=new Yt();$e['prototype']['setBlendFu'+'nction']=function(_0x5d0e49,_0x50e6c4){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendFunc'+'tion\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e.setBlend'+'State\x20inst'+'ead.');const _0x2d46dc=this['blendState'];ut['copy'](_0x2d46dc),ut['setColorBl'+'end'](_0x2d46dc['colorOp'],_0x5d0e49,_0x50e6c4),ut['setAlphaBl'+'end'](_0x2d46dc['alphaOp'],_0x5d0e49,_0x50e6c4),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendFu'+'nctionSepa'+'rate']=function(_0x29e72e,_0x5d977b,_0x513a9e,_0x440c56){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendFunc'+'tionSepara'+'te\x20is\x20depr'+'ecated,\x20us'+'e\x20pc.Graph'+'icsDevice.'+'setBlendSt'+'ate\x20instea'+'d.');const _0x630ab1=this['blendState'];ut['copy'](_0x630ab1),ut['setColorBl'+'end'](_0x630ab1['colorOp'],_0x29e72e,_0x5d977b),ut['setAlphaBl'+'end'](_0x630ab1['alphaOp'],_0x513a9e,_0x440c56),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendEq'+'uation']=function(_0x29a26e){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendEqua'+'tion\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e.setBlend'+'State\x20inst'+'ead.');const _0x4f9d82=this['blendState'];ut['copy'](_0x4f9d82),ut['setColorBl'+'end'](_0x29a26e,_0x4f9d82['colorSrcFa'+'ctor'],_0x4f9d82['colorDstFa'+'ctor']),ut['setAlphaBl'+'end'](_0x29a26e,_0x4f9d82['alphaSrcFa'+'ctor'],_0x4f9d82['alphaDstFa'+'ctor']),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendEq'+'uationSepa'+'rate']=function(_0x57847f,_0x1da462){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendEqua'+'tionSepara'+'te\x20is\x20depr'+'ecated,\x20us'+'e\x20pc.Graph'+'icsDevice.'+'setBlendSt'+'ate\x20instea'+'d.');const _0x36effe=this['blendState'];ut['copy'](_0x36effe),ut['setColorBl'+'end'](_0x57847f,_0x36effe['colorSrcFa'+'ctor'],_0x36effe['colorDstFa'+'ctor']),ut['setAlphaBl'+'end'](_0x1da462,_0x36effe['alphaSrcFa'+'ctor'],_0x36effe['alphaDstFa'+'ctor']),this['setBlendSt'+'ate'](ut);},$e['prototype']['setColorWr'+'ite']=function(_0x5c06ba,_0x16a36f,_0x56d02f,_0xe24ca6){w['deprecated']('pc.Graphic'+'sDevice#se'+'tColorWrit'+'e\x20is\x20depre'+'cated,\x20use'+'\x20pc.Graphi'+'csDevice.s'+'etBlendSta'+'te\x20instead'+'.');const _0x484c38=this['blendState'];ut['copy'](_0x484c38),ut['setColorWr'+'ite'](_0x5c06ba,_0x16a36f,_0x56d02f,_0xe24ca6),this['setBlendSt'+'ate'](ut);},$e['prototype']['getBlendin'+'g']=function(){return this['blendState']['blend'];},$e['prototype']['setBlendin'+'g']=function(_0x49afe9){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlending\x20'+'is\x20depreca'+'ted,\x20use\x20p'+'c.Graphics'+'Device.set'+'BlendState'+'\x20instead.'),ut['copy'](this['blendState']),ut['blend']=_0x49afe9,this['setBlendSt'+'ate'](ut);},$e['prototype']['setDepthWr'+'ite']=function(_0x5be491){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthWrit'+'e\x20is\x20depre'+'cated,\x20use'+'\x20pc.Graphi'+'csDevice.s'+'etDepthSta'+'te\x20instead'+'.'),qi['copy'](this['depthState']),qi['write']=_0x5be491,this['setDepthSt'+'ate'](qi);},$e['prototype']['setDepthFu'+'nc']=function(_0x5c9f5e){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthFunc'+'\x20is\x20deprec'+'ated,\x20use\x20'+'pc.Graphic'+'sDevice.se'+'tDepthStat'+'e\x20instead.'),qi['copy'](this['depthState']),qi['func']=_0x5c9f5e,this['setDepthSt'+'ate'](qi);},$e['prototype']['setDepthTe'+'st']=function(_0xcc24c0){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthTest'+'\x20is\x20deprec'+'ated,\x20use\x20'+'pc.Graphic'+'sDevice.se'+'tDepthStat'+'e\x20instead.'),qi['copy'](this['depthState']),qi['test']=_0xcc24c0,this['setDepthSt'+'ate'](qi);},$e['prototype']['getCullMod'+'e']=function(){return this['cullMode'];},new Proxy({},{'get'(_0x5cf027,_0x5ddccd){return w['deprecated']('Using\x20pc.s'+'haderChunk'+'s\x20to\x20acces'+'s\x20global\x20s'+'hader\x20chun'+'ks\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Shade'+'rChunks.ge'+'t\x20instead,'+'\x20for\x20examp'+'le:\x20pc.Sha'+'derChunks.'+'get(this.a'+'pp.graphic'+'sDevice,\x20p'+'c.SHADERLA'+'NGUAGE_GLS'+'L).get(\x27'+_0x5ddccd+'\x27);'),Ce['get'](Ys()['graphicsDe'+'vice'],Fe)['get'](_0x5ddccd);},'set'(_0x18434e,_0x166bb9,_0x306ef2){return w['deprecated']('Using\x20pc.s'+'haderChunk'+'s\x20to\x20overr'+'ide\x20global'+'\x20shader\x20ch'+'unks\x20is\x20de'+'precated.\x20'+'Use\x20pc.Sha'+'derChunks.'+'get\x20instea'+'d,\x20for\x20exa'+'mple:\x20pc.S'+'haderChunk'+'s.get(this'+'.app.graph'+'icsDevice,'+'\x20pc.SHADER'+'LANGUAGE_G'+'LSL).set(\x27'+_0x166bb9+'\x27);'),Ce['get'](Ys()['graphicsDe'+'vice'],Fe)['set'](_0x166bb9,_0x306ef2),!(0xac0+0x2296+0x33d*-0xe);}}),Object['defineProp'+'erty'](Et['prototype'],'defaultMat'+'erial',{'get':function(){return w['deprecated']('pc.Scene#d'+'efaultMate'+'rial\x20is\x20de'+'precated.'),$n(Ys()['graphicsDe'+'vice']);}}),Object['defineProp'+'erty'](Et['prototype'],'fogColor',{'set':function(_0x28cefe){w['deprecated']('Scene#fogC'+'olor\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.color\x20'+'instead.'),this['fog']['color']=_0x28cefe;},'get':function(){return w['deprecated']('Scene#fogC'+'olor\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.color\x20'+'instead.'),this['fog']['color'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogEnd',{'set':function(_0x32202c){w['deprecated']('Scene#fogE'+'nd\x20is\x20depr'+'ecated.\x20Us'+'e\x20Scene#fo'+'g.end\x20inst'+'ead.'),this['fog']['end']=_0x32202c;},'get':function(){return w['deprecated']('Scene#fogE'+'nd\x20is\x20depr'+'ecated.\x20Us'+'e\x20Scene#fo'+'g.end\x20inst'+'ead.'),this['fog']['end'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogStart',{'set':function(_0x54deed){w['deprecated']('Scene#fogS'+'tart\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.start\x20'+'instead.'),this['fog']['start']=_0x54deed;},'get':function(){return w['deprecated']('Scene#fogS'+'tart\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.start\x20'+'instead.'),this['fog']['start'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogDensity',{'set':function(_0x5001a7){w['deprecated']('Scene#fogD'+'ensity\x20is\x20'+'deprecated'+'.\x20Use\x20Scen'+'e#fog.dens'+'ity\x20instea'+'d.'),this['fog']['density']=_0x5001a7;},'get':function(){return w['deprecated']('Scene#fogD'+'ensity\x20is\x20'+'deprecated'+'.\x20Use\x20Scen'+'e#fog.dens'+'ity\x20instea'+'d.'),this['fog']['density'];}}),Object['defineProp'+'erty'](Et['prototype'],'toneMappin'+'g',{'set':function(_0x2f446b){w['removed']('Scene#tone'+'Mapping\x20is'+'\x20removed.\x20'+'Use\x20Camera'+'Component#'+'toneMappin'+'g\x20instead.');},'get':function(){w['removed']('Scene#tone'+'Mapping\x20is'+'\x20removed.\x20'+'Use\x20Camera'+'Component#'+'toneMappin'+'g\x20instead.');}}),Object['defineProp'+'erty'](Et['prototype'],'gammaCorre'+'ction',{'set':function(_0x241e6d){w['removed']('Scene#gamm'+'aCorrectio'+'n\x20is\x20remov'+'ed.\x20Use\x20Ca'+'meraCompon'+'ent#gammaC'+'orrection\x20'+'instead.');},'get':function(){w['removed']('Scene#gamm'+'aCorrectio'+'n\x20is\x20remov'+'ed.\x20Use\x20Ca'+'meraCompon'+'ent#gammaC'+'orrection\x20'+'instead.');}}),Object['defineProp'+'erty'](Et['prototype'],'rendering',{'set':function(_0x461ed0){w['removed']('Scene#rend'+'ering\x20is\x20r'+'emoved.\x20Us'+'e\x20Scene#fo'+'g\x20or\x20Camer'+'aComponent'+'#gammaCorr'+'ection\x20or\x20'+'CameraComp'+'onent#tone'+'Mapping\x20in'+'stead.');},'get':function(){w['removed']('Scene#rend'+'ering\x20is\x20r'+'emoved.\x20Us'+'e\x20Scene#fo'+'g\x20or\x20Camer'+'aComponent'+'#gammaCorr'+'ection\x20or\x20'+'CameraComp'+'onent#tone'+'Mapping\x20in'+'stead.');}}),Object['defineProp'+'erty'](Bf['prototype'],'_meshInsta'+'nces',{'get':function(){return w['deprecated']('pc.LayerCo'+'mposition#'+'_meshInsta'+'nces\x20is\x20de'+'precated.'),null;}}),Object['defineProp'+'erty'](Et['prototype'],'drawCalls',{'get':function(){return w['deprecated']('pc.Scene#d'+'rawCalls\x20i'+'s\x20deprecat'+'ed\x20and\x20no\x20'+'longer\x20pro'+'vides\x20mesh'+'\x20instances'+'.'),null;}}),['128','64','32','16','8','4']['forEach']((_0x558fde,_0x3c4e31)=>{Object['defineProp'+'erty'](Et['prototype'],'skyboxPref'+'iltered'+_0x558fde,{'get':function(){return w['deprecated']('pc.Scene#s'+'kyboxPrefi'+'ltered'+_0x558fde+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Scene#p'+'refiltered'+'Cubemaps\x20i'+'nstead.')),this['_prefilter'+'edCubemaps'][_0x3c4e31];},'set':function(_0x7ae6d1){w['deprecated']('pc.Scene#s'+'kyboxPrefi'+'ltered'+_0x558fde+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Scene#p'+'refiltered'+'Cubemaps\x20i'+'nstead.')),this['_prefilter'+'edCubemaps'][_0x3c4e31]=_0x7ae6d1,this['updateShad'+'ers']=!(-0x7*0x12c+0x11e9*-0x2+-0x17*-0x1ea);}});}),Object['defineProp'+'erty'](Et['prototype'],'models',{'get':function(){return this['_models']||(this['_models']=[]),this['_models'];}});function Bt(_0x79a37a,_0x537492,_0x291605=''){Object['defineProp'+'erty'](_0x79a37a['prototype'],_0x537492,{'set':function(_0x5a6c50){w['errorOnce'](_0x79a37a['name']+'#'+_0x537492+('\x20has\x20been\x20'+'removed.\x20')+_0x291605);},'get':function(){w['errorOnce'](_0x79a37a['name']+'#'+_0x537492+('\x20has\x20been\x20'+'removed.\x20')+_0x291605);}});}Bt(Ot,'renderTarg'+'et'),Bt(Ot,'onPreCull'),Bt(Ot,'onPreRende'+'r'),Bt(Ot,'onPreRende'+'rOpaque'),Bt(Ot,'onPreRende'+'rTranspare'+'nt'),Bt(Ot,'onPostCull'),Bt(Ot,'onPostRend'+'er'),Bt(Ot,'onPostRend'+'erOpaque'),Bt(Ot,'onPostRend'+'erTranspar'+'ent'),Bt(Ot,'onDrawCall'),Bt(Ot,'layerRefer'+'ence'),Bt(Cr,'onPreCull','Use\x20Scene#'+'EVENT_PREC'+'ULL\x20event\x20'+'instead.'),Bt(Cr,'onPostCull','Use\x20Scene#'+'EVENT_POST'+'CULL\x20event'+'\x20instead.'),Bt(Cr,'onPreRende'+'r','Use\x20Scene#'+'EVENT_PRER'+'ENDER\x20even'+'t\x20instead.'),Bt(Cr,'onPostRend'+'er','Use\x20Scene#'+'EVENT_POST'+'RENDER\x20eve'+'nt\x20instead'+'.'),Bt(Cr,'onPreRende'+'rLayer','Use\x20Scene#'+'EVENT_PRER'+'ENDER_LAYE'+'R\x20event\x20in'+'stead.'),Bt(Cr,'onPostRend'+'erLayer','Use\x20Scene#'+'EVENT_POST'+'RENDER_LAY'+'ER\x20event\x20i'+'nstead.'),Jo['prototype']['renderComp'+'osition']=function(_0x17a24b){w['deprecated']('pc.Forward'+'Renderer#r'+'enderCompo'+'sition\x20is\x20'+'deprecated'+'.\x20Use\x20pc.A'+'ppBase.ren'+'derComposi'+'tion\x20inste'+'ad.'),Ys()['renderComp'+'osition'](_0x17a24b);},He['prototype']['syncAabb']=function(){w['deprecated']('pc.MeshIns'+'tance#sync'+'Aabb\x20is\x20de'+'precated.');},Gp['prototype']['getTarget']=function(_0x1a3b3d){return w['deprecated']('pc.Morph#g'+'etTarget\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.Morph#tar'+'gets\x20inste'+'ad.'),this['targets'][_0x1a3b3d];},Ie['prototype']['getChildre'+'n']=function(){return w['deprecated']('pc.GraphNo'+'de#getChil'+'dren\x20is\x20de'+'precated.\x20'+'Use\x20pc.Gra'+'phNode#chi'+'ldren\x20inst'+'ead.'),this['children'];},Ie['prototype']['getName']=function(){return w['deprecated']('pc.GraphNo'+'de#getName'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#name\x20in'+'stead.'),this['name'];},Ie['prototype']['getPath']=function(){return w['deprecated']('pc.GraphNo'+'de#getPath'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#path\x20in'+'stead.'),this['path'];},Ie['prototype']['getRoot']=function(){return w['deprecated']('pc.GraphNo'+'de#getRoot'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#root\x20in'+'stead.'),this['root'];},Ie['prototype']['getParent']=function(){return w['deprecated']('pc.GraphNo'+'de#getPare'+'nt\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Graph'+'Node#paren'+'t\x20instead.'),this['parent'];},Ie['prototype']['setName']=function(_0xfba59){w['deprecated']('pc.GraphNo'+'de#setName'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#name\x20in'+'stead.'),this['name']=_0xfba59;},Object['defineProp'+'erty'](er['prototype'],'shader',{'set':function(_0x2ae4b0){w['deprecated']('pc.Materia'+'l#shader\x20i'+'s\x20deprecat'+'ed,\x20use\x20pc'+'.ShaderMat'+'erial\x20inst'+'ead.');},'get':function(){return w['deprecated']('pc.Materia'+'l#shader\x20i'+'s\x20deprecat'+'ed,\x20use\x20pc'+'.ShaderMat'+'erial\x20inst'+'ead.'),null;}}),Object['defineProp'+'erty'](er['prototype'],'blend',{'set':function(_0x31ef79){w['deprecated']('pc.Materia'+'l#blend\x20is'+'\x20deprecate'+'d,\x20use\x20pc.'+'Material.b'+'lendState.'),this['blendState']['blend']=_0x31ef79;},'get':function(){return this['blendState']['blend'];}}),Object['defineProp'+'erty'](Ut['prototype'],'shininess',{'get':function(){return this['gloss']*(-0xef6+-0xbd4*-0x3+-0xa11*0x2);},'set':function(_0x3c9e28){this['gloss']=_0x3c9e28*(-0x30*0x5d+-0x25b7+-0x3727*-0x1+0.01);}}),Object['defineProp'+'erty'](Ut['prototype'],'useGammaTo'+'nemap',{'get':function(){return this['useTonemap'];},'set':function(_0x43984e){this['useTonemap']=_0x43984e;}}),Object['defineProp'+'erty'](Ut['prototype'],'anisotropy',{'get':function(){w['deprecated']('pc.Standar'+'dMaterial#'+'anisotropy'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#'+'anisotropy'+'Intensity\x20'+'and\x20pc.Sta'+'ndardMater'+'ial#anisot'+'ropyRotati'+'on\x20instead'+'.');const _0x5b8cbd=Math['sign'](Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']*(0x89*0x31+0x1599+0x550*-0x9)));return this['anisotropy'+'Intensity']*_0x5b8cbd;},'set':function(_0x16dff9){w['deprecated']('pc.Standar'+'dMaterial#'+'anisotropy'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#'+'anisotropy'+'Intensity\x20'+'and\x20pc.Sta'+'ndardMater'+'ial#anisot'+'ropyRotati'+'on\x20instead'+'.'),this['anisotropy'+'Intensity']=Math['abs'](_0x16dff9),_0x16dff9>=0x9b*0x35+0xc14*-0x2+0x7ef*-0x1?this['anisotropy'+'Rotation']=-0x1741*0x1+-0x553+0x1c94:this['anisotropy'+'Rotation']=0x2604+-0x2551+-0x1*0x59;}});function Qs(_0x4781b0,_0xc59876){Object['defineProp'+'erty'](Ut['prototype'],_0xc59876,{'get':function(){return w['deprecated']('pc.Standar'+'dMaterial#'+_0xc59876+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#')+_0x4781b0+'\x20instead.'),this[_0x4781b0];},'set':function(_0x9993c3){w['deprecated']('pc.Standar'+'dMaterial#'+_0xc59876+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#')+_0x4781b0+'\x20instead.'),this[_0x4781b0]=_0x9993c3;}});}function cd(_0x54b64e){Object['defineProp'+'erty'](Ut['prototype'],_0x54b64e,{'get':function(){return w['deprecated']('pc.Standar'+'dMaterial#'+_0x54b64e+('\x20is\x20deprec'+'ated,\x20and\x20'+'the\x20behavi'+'our\x20is\x20as\x20'+'if\x20')+_0x54b64e+('\x20was\x20alway'+'s\x20true')),!(-0xe99+0x1f7d+0x2f*-0x5c);},'set':function(_0x320f2e){w['deprecated']('pc.Standar'+'dMaterial#'+_0x54b64e+('\x20is\x20deprec'+'ated,\x20and\x20'+'the\x20behavi'+'our\x20is\x20as\x20'+'if\x20')+_0x54b64e+('\x20was\x20alway'+'s\x20true'));}});}cd('sheenTint'),cd('diffuseTin'+'t'),cd('emissiveTi'+'nt'),cd('ambientTin'+'t'),Qs('specularTi'+'nt','specularMa'+'pTint'),Qs('aoVertexCo'+'lor','aoMapVerte'+'xColor'),Qs('diffuseVer'+'texColor','diffuseMap'+'VertexColo'+'r'),Qs('specularVe'+'rtexColor','specularMa'+'pVertexCol'+'or'),Qs('emissiveVe'+'rtexColor','emissiveMa'+'pVertexCol'+'or'),Qs('metalnessV'+'ertexColor','metalnessM'+'apVertexCo'+'lor'),Qs('glossVerte'+'xColor','glossMapVe'+'rtexColor'),Qs('opacityVer'+'texColor','opacityMap'+'VertexColo'+'r'),Qs('lightVerte'+'xColor','lightMapVe'+'rtexColor'),Qs('sheenGloss','sheenGloss'+'iess'),Qs('clearCoatG'+'loss','clearCostG'+'lossiness');function Jv(_0x29091e,_0x1fd6c4){_0x29091e!=='pass'&&Object['defineProp'+'erty'](Qo['prototype'],_0x29091e,{'get':function(){return w['deprecated']('Getting\x20pc'+'.Options#'+_0x29091e+('\x20has\x20been\x20'+'deprecated'+'\x20as\x20the\x20pr'+'operty\x20has'+'\x20been\x20move'+'d\x20to\x20pc.Op'+'tions.LitS'+'haderOptio'+'ns#')+(_0x1fd6c4||_0x29091e)+'.'),this['litOptions'][_0x1fd6c4||_0x29091e];},'set':function(_0x80ed9a){w['deprecated']('Setting\x20pc'+'.Options#'+_0x29091e+('\x20has\x20been\x20'+'deprecated'+'\x20as\x20the\x20pr'+'operty\x20has'+'\x20been\x20move'+'d\x20to\x20pc.Op'+'tions.LitS'+'haderOptio'+'ns#')+(_0x1fd6c4||_0x29091e)+'.'),this['litOptions'][_0x1fd6c4||_0x29091e]=_0x80ed9a;}});}Jv('refraction','useRefract'+'ion');const zk=new Vy(),rS=Object['getOwnProp'+'ertyNames'](zk);for(const l in rS)Jv(rS[l]);ln['prototype']['getAssetBy'+'Id']=function(_0x491eb3){return w['deprecated']('pc.AssetRe'+'gistry#get'+'AssetById\x20'+'is\x20depreca'+'ted.\x20Use\x20p'+'c.AssetReg'+'istry#get\x20'+'instead.'),this['get'](_0x491eb3);},Object['defineProp'+'erty'](Qt['prototype'],'ray',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#ray'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.XrInput'+'Source#get'+'Origin\x20and'+'\x20pc.XrInpu'+'tSource#ge'+'tDirection'+'\x20instead.'),this['_rayLocal'];}}),Object['defineProp'+'erty'](Qt['prototype'],'position',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#pos'+'ition\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Xr'+'InputSourc'+'e#getLocal'+'Position\x20i'+'nstead.'),this['_localPosi'+'tion'];}}),Object['defineProp'+'erty'](Qt['prototype'],'rotation',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#rot'+'ation\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Xr'+'InputSourc'+'e#getLocal'+'Rotation\x20i'+'nstead.'),this['_localRota'+'tion'];}}),Object['defineProp'+'erty'](Zr['prototype'],'wheel',{'get':function(){return this['wheelDelta']*-(-0x265f+-0x1*0x29d+0x28fe);}}),Ks['prototype']['isFullscre'+'en']=function(){return w['deprecated']('pc.AppBase'+'#isFullscr'+'een\x20is\x20dep'+'recated.\x20U'+'se\x20the\x20Ful'+'lscreen\x20AP'+'I\x20directly'+'.'),!!document['fullscreen'+'Element'];},Ks['prototype']['enableFull'+'screen']=function(_0x58113a,_0x4ed6ff,_0x2de737){w['deprecated']('pc.AppBase'+'#enableFul'+'lscreen\x20is'+'\x20deprecate'+'d.\x20Use\x20the'+'\x20Fullscree'+'n\x20API\x20dire'+'ctly.'),_0x58113a=_0x58113a||this['graphicsDe'+'vice']['canvas'];const _0x166f8c=function(){_0x4ed6ff(),document['removeEven'+'tListener']('fullscreen'+'change',_0x166f8c);},_0x40d644=function(){_0x2de737(),document['removeEven'+'tListener']('fullscreen'+'error',_0x40d644);};_0x4ed6ff&&document['addEventLi'+'stener']('fullscreen'+'change',_0x166f8c,!(0x8ab+-0x15ef+0xd45)),_0x2de737&&document['addEventLi'+'stener']('fullscreen'+'error',_0x40d644,!(0x20b6*0x1+0xcc8*-0x1+-0x13ed)),_0x58113a['requestFul'+'lscreen']?_0x58113a['requestFul'+'lscreen'](Element['ALLOW_KEYB'+'OARD_INPUT']):_0x2de737();},Ks['prototype']['disableFul'+'lscreen']=function(_0x31df13){w['deprecated']('pc.AppBase'+'#disableFu'+'llscreen\x20i'+'s\x20deprecat'+'ed.\x20Use\x20th'+'e\x20Fullscre'+'en\x20API\x20dir'+'ectly.');const _0xedad5e=function(){_0x31df13(),document['removeEven'+'tListener']('fullscreen'+'change',_0xedad5e);};_0x31df13&&document['addEventLi'+'stener']('fullscreen'+'change',_0xedad5e,!(0x25f1+-0x1*0x1e23+-0x7cd)),document['exitFullsc'+'reen']();},Ks['prototype']['getSceneUr'+'l']=function(_0x2f5f9a){w['deprecated']('pc.AppBase'+'#getSceneU'+'rl\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.AppBa'+'se#scenes\x20'+'and\x20pc.Sce'+'neRegistry'+'#find\x20inst'+'ead.');const _0x54aff1=this['scenes']['find'](_0x2f5f9a);return _0x54aff1?_0x54aff1['url']:null;},Ks['prototype']['loadScene']=function(_0x3d16f2,_0x2ec5f1){w['deprecated']('pc.AppBase'+'#loadScene'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.AppBase'+'#scenes\x20an'+'d\x20pc.Scene'+'Registry#l'+'oadScene\x20i'+'nstead.'),this['scenes']['loadScene'](_0x3d16f2,_0x2ec5f1);},Ks['prototype']['loadSceneH'+'ierarchy']=function(_0x49872a,_0x53a14e){w['deprecated']('pc.AppBase'+'#loadScene'+'Hierarchy\x20'+'is\x20depreca'+'ted.\x20Use\x20p'+'c.AppBase#'+'scenes\x20and'+'\x20pc.SceneR'+'egistry#lo'+'adSceneHie'+'rarchy\x20ins'+'tead.'),this['scenes']['loadSceneH'+'ierarchy'](_0x49872a,_0x53a14e);},Ks['prototype']['loadSceneS'+'ettings']=function(_0x5195f5,_0xaa293c){w['deprecated']('pc.AppBase'+'#loadScene'+'Settings\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.AppBase#s'+'cenes\x20and\x20'+'pc.SceneRe'+'gistry#loa'+'dSceneSett'+'ings\x20inste'+'ad.'),this['scenes']['loadSceneS'+'ettings'](_0x5195f5,_0xaa293c);},Yp['prototype']['setVisible']=function(_0x495730){w['deprecated']('pc.ModelCo'+'mponent#se'+'tVisible\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.ModelComp'+'onent#enab'+'led\x20instea'+'d.'),this['enabled']=_0x495730;},Object['defineProp'+'erty'](bs['prototype'],'bodyType',{'get':function(){return w['deprecated']('pc.RigidBo'+'dyComponen'+'t#bodyType'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RigidBo'+'dyComponen'+'t#type\x20ins'+'tead.'),this['type'];},'set':function(_0x17d7ce){w['deprecated']('pc.RigidBo'+'dyComponen'+'t#bodyType'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RigidBo'+'dyComponen'+'t#type\x20ins'+'tead.'),this['type']=_0x17d7ce;}}),bs['prototype']['syncBodyTo'+'Entity']=function(){w['deprecated']('pc.RigidBo'+'dyComponen'+'t#syncBody'+'ToEntity\x20i'+'s\x20not\x20publ'+'ic\x20API\x20and'+'\x20should\x20no'+'t\x20be\x20used.'),this['_updateDyn'+'amic']();},Kp['prototype']['setGravity']=function(){w['deprecated']('pc.RigidBo'+'dyComponen'+'tSystem#se'+'tGravity\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.RigidBody'+'ComponentS'+'ystem#grav'+'ity\x20instea'+'d.'),arguments['length']===-0x5f*-0x68+-0x171b+-0xf7c?this['gravity']['copy'](arguments[-0x2f7+-0x27*0xde+0x24c9]):this['gravity']['set'](arguments[-0x1cb8+0x2*-0x53e+0x2734],arguments[0x1e58+-0xff9+-0xe5e],arguments[-0x9d5*-0x2+0x1e34+0xc77*-0x4]);};class Vk{constructor(_0x4829af){this['_frameInde'+'x']=-0x1355+0x1a07*0x1+-0x359*0x2,this['_frameTimi'+'ngs']=[],this['_timings']=[],this['_prevTimin'+'gs']=[],this['unitsName']='ms',this['decimalPla'+'ces']=-0x9e+-0xab*0x3+0x38*0xc,this['enabled']=!(-0x8c+-0x3*0x47f+0xe09),_0x4829af['on']('frameupdat'+'e',this['begin']['bind'](this,'update')),_0x4829af['on']('framerende'+'r',this['mark']['bind'](this,'render')),_0x4829af['on']('frameend',this['mark']['bind'](this,'other'));}['begin'](_0x16bfa0){if(!this['enabled'])return;this['_frameInde'+'x']<this['_frameTimi'+'ngs']['length']&&this['_frameTimi'+'ngs']['splice'](this['_frameInde'+'x']);const _0x1cdaf7=this['_prevTimin'+'gs'];this['_prevTimin'+'gs']=this['_timings'],this['_timings']=this['_frameTimi'+'ngs'],this['_frameTimi'+'ngs']=_0x1cdaf7,this['_frameInde'+'x']=-0x3*-0x903+-0x2e2*-0x7+0x11*-0x2c7,this['mark'](_0x16bfa0);}['mark'](_0x5ae989){if(!this['enabled'])return;const _0x101bc0=de();if(this['_frameInde'+'x']>0xca0+-0x2*-0xa81+-0x21a2){const _0x18b098=this['_frameTimi'+'ngs'][this['_frameInde'+'x']-(0x1655+-0x22dd+0x1*0xc89)];_0x18b098[0xbf*-0x1d+0x24c6+-0x1*0xf22]=_0x101bc0-_0x18b098[0x694+-0xe2a+0x797];}else{if(this['_timings']['length']>0x1e68+-0x1d46+-0x122){const _0x4114cb=this['_timings'][this['_timings']['length']-(0x301*0x1+0xa21+-0xd21)];_0x4114cb[0x1*-0x2515+-0xb*-0x89+0x1f33*0x1]=_0x101bc0-_0x4114cb[0x4bc*0x2+-0x1*-0x259b+-0x2f12];}}if(this['_frameInde'+'x']>=this['_frameTimi'+'ngs']['length'])this['_frameTimi'+'ngs']['push']([_0x5ae989,_0x101bc0]);else{const _0x31e936=this['_frameTimi'+'ngs'][this['_frameInde'+'x']];_0x31e936[-0x66a+0x2ba*-0xe+-0x164b*-0x2]=_0x5ae989,_0x31e936[-0x2128+-0x1*-0x187e+0x8ab]=_0x101bc0;}this['_frameInde'+'x']++;}get['timings'](){return this['_timings']['slice'](0xfb5*0x2+-0x2*-0x7e5+-0x13e*0x26,-(-0x1a09+0x3*0x416+0xdc8))['map'](_0x4bb476=>_0x4bb476[-0x1*0xa27+-0x173c+0x2164]);}}class Gk{constructor(_0x561e8f){this['device']=_0x561e8f,_0x561e8f['gpuProfile'+'r']['enabled']=!(0xc29+0x180*-0x7+0x1*-0x1a9),this['enabled']=!(-0x2429+0x65e*0x3+-0xb*-0x18d),this['unitsName']='ms',this['decimalPla'+'ces']=-0x20bc+-0x1*0x2489+0x4546,this['_timings']=[];}get['timings'](){return this['_timings'][0xa4c+-0x1ef0+0x14a4]=this['device']['gpuProfile'+'r']['_frameTime'],this['_timings'];}}class Hk{constructor(_0x41145f,_0x25822d,_0x59254f,_0x22c1fe,_0x386bc1){this['app']=_0x41145f,this['values']=[],this['statNames']=_0x25822d,this['statNames']['length']>-0x1a18+-0x815*0x2+0x2a45&&(this['statNames']['length']=0x3*-0xa97+-0x504+-0x933*-0x4),this['unitsName']=_0x22c1fe,this['decimalPla'+'ces']=_0x59254f,this['multiplier']=_0x386bc1||0x22b5+-0x16e1+-0x3f1*0x3;const _0x468ffd=(_0x36a916,_0x55c63d)=>_0x36a916['split']('.')['reduce']((_0x59bb77,_0x4bf44c)=>_0x59bb77?_0x59bb77[_0x4bf44c]:null,_0x55c63d||this);_0x41145f['on']('frameupdat'+'e',_0x2ffc16=>{for(let _0x485b4f=-0xd9c+-0x4b*0xf+0x1a3*0xb;_0x485b4f<this['statNames']['length'];_0x485b4f++)this['values'][_0x485b4f]=_0x468ffd(this['statNames'][_0x485b4f],this['app']['stats'])*this['multiplier'];});}get['timings'](){return this['values'];}}class ff{constructor(_0x11c673,_0x3452aa,_0x121be7,_0x19ea65,_0x35c9f6){this['app']=_0x3452aa,this['name']=_0x11c673,this['device']=_0x3452aa['graphicsDe'+'vice'],this['timer']=_0x35c9f6,this['watermark']=_0x121be7,this['enabled']=!(-0x2660+-0x1d15+0x4376),this['textRefres'+'hRate']=_0x19ea65,this['avgTotal']=0x9c5+0xd76*0x1+-0x173b,this['avgTimer']=0x195+0x159b+-0x1730*0x1,this['avgCount']=0x89e+-0x1*0x24d3+-0x53*-0x57,this['timingText']='',this['texture']=null,this['yOffset']=-0x19a8+0xb*-0x7d+0x1f07,this['cursor']=-0x1297+0xdcb+0x4cc,this['sample']=new Uint8ClampedArray(-0x111e+-0x1c82+0x2da4),this['sample']['set']([-0x1f*-0x41+0x67d+-0x397*0x4,-0xc87+-0x116*-0x6+0x603,-0x321+0x314*0x4+-0x92f*0x1,0x2*-0x803+0x10ee+0x17]),this['counter']=-0x635*0x5+-0xaa2+0x29ab,this['app']['on']('frameupdat'+'e',this['update'],this);}['destroy'](){this['app']['off']('frameupdat'+'e',this['update'],this);}['loseContex'+'t'](){this['timer']&&typeof this['timer']['loseContex'+'t']=='function'&&this['timer']['loseContex'+'t']();}['update'](_0x1db386){const _0x320684=this['timer']['timings'],_0x1dc535=_0x320684['reduce']((_0x4718ef,_0x372aae)=>_0x4718ef+_0x372aae,-0x2060+-0x1877+-0x38d7*-0x1);if(this['avgTotal']+=_0x1dc535,this['avgTimer']+=_0x1db386,this['avgCount']++,this['avgTimer']>this['textRefres'+'hRate']&&(this['timingText']=(this['avgTotal']/this['avgCount'])['toFixed'](this['timer']['decimalPla'+'ces']),this['avgTimer']=0x1c*0x83+0x6d*0x12+-0x1*0x15fe,this['avgTotal']=-0xa*-0x38f+-0xf55+-0x131*0x11,this['avgCount']=-0x61*0x3b+0x2*0x1091+0x1f*-0x59),this['enabled']){let _0x4ca70c=-0x1*0x1d09+-0x342*0x1+0x204b;const _0xc60a8d=(0x22ab+0x1dd7+0x4081*-0x1+0.5)*this['watermark'];for(let _0xecf8b3=0x2704+0x6f7*0x1+-0x2dfb;_0xecf8b3<_0x320684['length'];++_0xecf8b3)_0x4ca70c+=Math['floor'](_0x320684[_0xecf8b3]/_0xc60a8d*(0x1658+-0x4ee*0x2+-0xb7d)),this['sample'][_0xecf8b3]=_0x4ca70c;this['sample'][0x18f0+0x2366+-0x3c53]=this['watermark']/_0xc60a8d*(-0x2*0x2d8+-0x2ae*-0x4+-0x409),this['texture']['lock']()['set'](this['sample'],(this['cursor']+this['yOffset']*this['texture']['width'])*(-0x1a14+0x20*0x79+0xd8*0xd)),this['texture']['unlock'](),this['cursor']++,this['cursor']===this['texture']['width']&&(this['cursor']=0xa71+0x2*-0x2a5+-0x527);}}['render'](_0x3c04e2,_0x4a7dcf,_0x20706b,_0x90dff,_0x560241){_0x3c04e2['quad'](_0x4a7dcf+_0x90dff,_0x20706b,-_0x90dff,_0x560241,this['enabled']?this['cursor']:-0x1a65*0x1+-0x9e9*-0x1+0x1a6*0xa,this['enabled']?-0x7*-0x2e7+-0x11fa+-0x257+0.5+this['yOffset']:this['texture']['height']-(0x2*0x50e+0x227e+-0x2c99),-_0x90dff,-0x2076+0xf90*-0x1+-0x801*-0x6,this['texture'],0x369+-0x418*-0x4+-0x13c9);}}class Wk{constructor(_0x280e37,_0x196a2e){const _0x3c3172=_0xfe6f9d=>{_0xfe6f9d['font']='10px\x20\x22Luci'+'da\x20Console'+'\x22,\x20Monaco,'+'\x20monospace',_0xfe6f9d['textAlign']='left',_0xfe6f9d['textBaseli'+'ne']='alphabetic';},_0x3213c3=_0x462ddf=>_0x462ddf==='.'||_0x462ddf['length']===0x1348+0x180c+-0x2b53*0x1&&_0x462ddf['charCodeAt'](0x26cb+0xcaa+-0x3375)>=-0xb1+0x2*0x39+0x6f&&_0x462ddf['charCodeAt'](-0x43*-0x5b+0x392*-0x5+0x1*-0x5f7)<=-0x7cb+0x32d*-0x1+0xb31,_0x249c44=document['createElem'+'ent']('canvas'),_0x388eb8=_0x249c44['getContext']('2d',{'alpha':!(-0x2*-0x1384+-0x11fb+-0x11*0x13d)});_0x3c3172(_0x388eb8);const _0x2ec679=new Map(),_0x511ba4=0x1c5*0x1+0xa7f+-0xa5*0x13,_0x16200c=-0x1c25+0x7b*-0x4+-0x2011*-0x1;let _0x16561c=_0x511ba4,_0x259fdd=_0x511ba4;_0x196a2e['forEach'](_0x546665=>{const _0x366fe8=_0x388eb8['measureTex'+'t'](_0x546665),_0x42e49a=Math['ceil'](-_0x366fe8['actualBoun'+'dingBoxLef'+'t']),_0x375c6c=Math['ceil'](_0x366fe8['actualBoun'+'dingBoxRig'+'ht']),_0xe7900f=Math['ceil'](_0x366fe8['actualBoun'+'dingBoxAsc'+'ent']),_0x14a1b4=Math['ceil'](_0x366fe8['actualBoun'+'dingBoxDes'+'cent']),_0x4c9b82=_0x42e49a+_0x375c6c,_0xb7357c=_0xe7900f+_0x14a1b4;_0x16561c+_0x4c9b82+_0x511ba4>=_0x16200c&&(_0x16561c=_0x511ba4,_0x259fdd+=0x3*-0xb87+-0xe9*-0x19+0xbe4),_0x2ec679['set'](_0x546665,{'l':_0x42e49a,'r':_0x375c6c,'a':_0xe7900f,'d':_0x14a1b4,'w':_0x4c9b82,'h':_0xb7357c,'x':_0x16561c,'y':_0x259fdd}),_0x16561c+=_0x4c9b82+_0x511ba4;}),_0x249c44['width']=0x1c39+0x224e+-0x3c87,_0x249c44['height']=Y['nextPowerO'+'fTwo'](_0x259fdd+(-0x7*0x2de+0x12ec+0x1f*0xa)+_0x511ba4),_0x3c3172(_0x388eb8),_0x388eb8['fillStyle']='rgb(0,\x200,\x20'+'0)',_0x388eb8['fillRect'](-0x155e+-0xe*-0x28d+-0xe58,0x1*0x3b+-0x1218+0x11dd,_0x249c44['width'],_0x249c44['height']),_0x2ec679['forEach']((_0x3073b0,_0x3a163c)=>{_0x388eb8['fillStyle']=_0x3213c3(_0x3a163c)?'rgb(255,\x202'+'55,\x20255)':'rgb(170,\x201'+'70,\x20170)',_0x388eb8['fillText'](_0x3a163c,_0x3073b0['x']-_0x3073b0['l'],_0x3073b0['y']+_0x3073b0['a']);}),this['placements']=_0x2ec679;const _0x49005d=_0x388eb8['getImageDa'+'ta'](-0x1142+-0x1e0b*-0x1+0xcc9*-0x1,-0x1366+0xe4b+0x1*0x51b,_0x249c44['width'],_0x249c44['height'])['data'];for(let _0x532eb8=-0x19d6+-0x1755+0x312b*0x1;_0x532eb8<_0x49005d['length'];_0x532eb8+=0x17d*0x12+0x12*-0x72+-0x62*0x31)_0x49005d[_0x532eb8+(0x1046+0x6d3*0x3+-0x4*0x92f)]=_0x49005d[_0x532eb8+(0x8da+0x1*0x21e2+0x2abc*-0x1)],_0x49005d[_0x532eb8+(-0xb*0x13d+-0x1a34+0x7f7*0x5)]=0x91*0x1f+0x757+0x1*-0x17e7,_0x49005d[_0x532eb8+(-0x2*-0xd4e+-0xcf7*-0x1+0x1*-0x2792)]=0xd86+-0x18f5+0xc6e,_0x49005d[_0x532eb8+(0x12f9*-0x1+-0x1fb3+0x32ae)]=0xa*-0x335+0x57e*-0x3+0x318b;this['texture']=new _e(_0x280e37,{'name':'mini-stats'+'-word-atla'+'s','width':_0x249c44['width'],'height':_0x249c44['height'],'mipmaps':!(-0x4fd*-0x5+0x1351+-0x2c41),'minFilter':Te,'magFilter':Te,'levels':[_0x49005d]});}['destroy'](){this['texture']['destroy'](),this['texture']=null;}['render'](_0x3a651b,_0x52f5e2,_0x22a686,_0xe1cef9){const _0xf5e037=this['placements']['get'](_0x52f5e2);return _0xf5e037?(_0x3a651b['quad'](_0x22a686+_0xf5e037['l']-(-0x1*0x1898+-0x12ed*-0x1+0x5ac*0x1),_0xe1cef9-_0xf5e037['d']+(0x2270+-0x132f+0x8*-0x1e8),_0xf5e037['w']+(0x1*-0x1a59+0x1bfc+0x3*-0x8b),_0xf5e037['h']+(-0x1*0xc69+0x264f*0x1+-0x19e4),_0xf5e037['x']-(0x2b*-0xbb+0x731+-0x35*-0x75),this['texture']['height']-_0xf5e037['y']-_0xf5e037['h']-(0x8*0x157+0x4e*-0x8+-0xd*0xa3),void(0x4*0x2a5+-0x110d+-0x679*-0x1),void(0x1924+-0xa81+-0x4e1*0x3),this['texture'],-0x1d16+-0xa1*0x17+0x2b8e),_0xf5e037['w']):0x707+0x15d2+0x5c5*-0x5;}}const $k='\x0a\x20\x20\x20\x20attri'+'bute\x20vec3\x20'+'vertex_pos'+'ition;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20un'+'normalized'+'\x20xy,\x20word\x20'+'flag\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_texCoord0'+';\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20unnormal'+'ized\x20textu'+'re\x20space\x20u'+'v,\x20normali'+'zed\x20uv\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec4\x20uv0;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20float\x20wo'+'rdFlag;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion.xy\x20*\x202'+'.0\x20-\x201.0,\x20'+'0.5,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20verte'+'x_texCoord'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20wordFlag\x20'+'=\x20vertex_p'+'osition.z;'+'\x0a\x20\x20\x20\x20}\x0a',Xk='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec3f;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'unnormaliz'+'ed\x20xy,\x20wor'+'d\x20flag\x0a\x20\x20\x20'+'\x20attribute'+'\x20vertex_te'+'xCoord0:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20unno'+'rmalized\x20t'+'exture\x20spa'+'ce\x20uv,\x20nor'+'malized\x20uv'+'\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'varying\x20wo'+'rdFlag:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x20fn\x20v'+'ertexMain('+'input\x20:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output\x20:\x20'+'VertexOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4(input'+'.vertex_po'+'sition.xy\x20'+'*\x202.0\x20-\x201.'+'0,\x200.5,\x201.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.u'+'v0\x20=\x20input'+'.vertex_te'+'xCoord0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.wordFl'+'ag\x20=\x20input'+'.vertex_po'+'sition.z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',qk='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20uv'+'0;\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20wordFlag;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'lr;\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20grap'+'hTex;\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20wo'+'rdsTex;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in\x20(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20graph'+'Sample\x20=\x20t'+'exture2D(g'+'raphTex,\x20u'+'v0.xy);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20graph;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv0.w\x20<\x20g'+'raphSample'+'.r)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20grap'+'h\x20=\x20vec4(0'+'.7,\x200.2,\x200'+'.2,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20graph\x20=\x20'+'vec4(0.2,\x20'+'0.7,\x200.2,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20else\x20i'+'f\x20(uv0.w\x20<'+'\x20graphSamp'+'le.b)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gr'+'aph\x20=\x20vec4'+'(0.2,\x200.2,'+'\x200.7,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20gra'+'ph\x20=\x20vec4('+'0.0,\x200.0,\x20'+'0.0,\x201.0\x20-'+'\x200.25\x20*\x20si'+'n(uv0.w\x20*\x20'+'3.14159));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20words'+'\x20=\x20texture'+'2D(wordsTe'+'x,\x20vec2(uv'+'0.x,\x201.0\x20-'+'\x20uv0.y));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20mix(gr'+'aph,\x20words'+',\x20wordFlag'+')\x20*\x20clr;\x0a\x20'+'\x20\x20\x20}\x0a',jk='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c4f;\x0a\x20\x20\x20\x20v'+'arying\x20wor'+'dFlag:\x20f32'+';\x0a\x0a\x20\x20\x20\x20uni'+'form\x20clr:\x20'+'vec4f;\x0a\x0a\x20\x20'+'\x20\x20var\x20grap'+'hTex\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20graphTex'+'_sampler\x20:'+'\x20sampler;\x0a'+'\x0a\x20\x20\x20\x20var\x20w'+'ordsTex\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20words'+'Tex_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20u'+'v0:\x20vec4f\x20'+'=\x20input.uv'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20graph'+'Sample:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'graphTex,\x20'+'graphTex_s'+'ampler,\x20uv'+'0.xy);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'graph:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(uv0.'+'w\x20<\x20graphS'+'ample.r)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20graph\x20='+'\x20vec4f(0.7'+',\x200.2,\x200.2'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20graph\x20'+'=\x20vec4f(0.'+'2,\x200.7,\x200.'+'2,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(uv'+'0.w\x20<\x20grap'+'hSample.b)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20graph'+'\x20=\x20vec4f(0'+'.2,\x200.2,\x200'+'.7,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'raph\x20=\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x201.'+'0\x20-\x200.25\x20*'+'\x20sin(uv0.w'+'\x20*\x203.14159'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20wor'+'ds:\x20vec4f\x20'+'=\x20textureS'+'ample(word'+'sTex,\x20word'+'sTex_sampl'+'er,\x20vec2f('+'uv0.x,\x201.0'+'\x20-\x20uv0.y))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20mix(grap'+'h,\x20words,\x20'+'input.word'+('Flag)\x20*\x20un'+'iform.clr;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a');class Yk{constructor(_0x46f1c8,_0x3cc155=0xb*-0x73+-0x218e+0x1*0x287f){const _0x3f8904=new kt(_0x46f1c8,[{'semantic':Pe,'components':0x3,'type':Ve},{'semantic':is,'components':0x4,'type':Ve}]),_0x3021a6=new Uint16Array(_0x3cc155*(0xd*-0x22f+-0x1d04+0x396d));for(let _0x9413a9=-0x76*-0xb+-0x2ab*-0x1+0x7*-0x11b;_0x9413a9<_0x3cc155;++_0x9413a9)_0x3021a6[_0x9413a9*(0xa0a*0x1+-0xcd*-0x2e+-0x6*0x7cf)+(-0xc39+0x266*0xe+0xb*-0x1f1)]=_0x9413a9*(0x849+-0x1e51+0x44*0x53),_0x3021a6[_0x9413a9*(0x3dd*0x8+0x13fe+-0x32e0)+(-0x2341+-0x3*-0x53d+0x138b)]=_0x9413a9*(-0x1bb0+-0x663+0x2217)+(-0x2138+0x1*0x24cb+0x392*-0x1),_0x3021a6[_0x9413a9*(-0x3*0x513+-0xe24+0x1d63)+(-0x924*0x2+-0x9a9*-0x3+-0x1*0xab1)]=_0x9413a9*(0x21ad+-0x5d*0x5d+-0x1*-0x20)+(-0x1e83+-0x242+0x20c7),_0x3021a6[_0x9413a9*(0x12*-0x137+0x9c5+-0x1d*-0x6b)+(-0x209c+0x3b*-0x2+-0x2115*-0x1)]=_0x9413a9*(0x1537*0x1+0x1*-0x1e12+-0x3*-0x2f5),_0x3021a6[_0x9413a9*(-0x25e1+0x13cd+-0x14b*-0xe)+(-0x2407*-0x1+0x24a8+-0x48ab)]=_0x9413a9*(-0x140b*0x1+0x15d*-0x18+0x34c7)+(-0xa1d+-0xa*0x371+0x2c89),_0x3021a6[_0x9413a9*(-0x21b1*0x1+0x3*-0x927+-0x3c*-0x105)+(0x351*-0x3+0x15cf+-0xbd7*0x1)]=_0x9413a9*(0xb*0x9+-0x1e9b+0x183*0x14)+(-0x5*0x21d+0x7b*0x1f+-0x451*0x1);this['device']=_0x46f1c8,this['buffer']=new Ds(_0x46f1c8,_0x3f8904,_0x3cc155*(-0x118d+-0x1fc8+0x3159),{'usage':SS}),this['data']=new Float32Array(this['buffer']['numBytes']/(-0x1*0x765+-0x5c0+0xd29)),this['indexBuffe'+'r']=new xr(_0x46f1c8,ji,_0x3cc155*(-0xcd*0x2b+0x1fea+0x28b),ms,_0x3021a6),this['prim']={'type':qs,'indexed':!(-0x53*-0x2b+0x2160+0x2f51*-0x1),'base':0x0,'baseVertex':0x0,'count':0x0},this['quads']=-0x7*0x95+0x1b01+-0x16ee,this['mesh']=new Ge(_0x46f1c8),this['mesh']['vertexBuff'+'er']=this['buffer'],this['mesh']['indexBuffe'+'r'][0x2445+-0xa50+-0x19f5]=this['indexBuffe'+'r'],this['mesh']['primitive']=[this['prim']];const _0x509ee2=new Bn({'uniqueName':'MiniStats','vertexGLSL':$k,'fragmentGLSL':qk,'vertexWGSL':Xk,'fragmentWGSL':jk,'attributes':{'vertex_position':Pe,'vertex_texCoord0':is}});this['material']=_0x509ee2,_0x509ee2['cull']=bt,_0x509ee2['depthState']=Yt['NODEPTH'],_0x509ee2['blendState']=new pt(!(0x1*-0xf97+0x15db+-0x644),fs,Ah,Ch,fs,Ft,Ft),_0x509ee2['update'](),this['meshInstan'+'ce']=new He(this['mesh'],_0x509ee2,new Ie('MiniStatsM'+'esh')),this['uniforms']={'clr':new Float32Array(0x433*-0x2+-0x2702+0x2f6c)},this['targetSize']={'width':_0x46f1c8['width'],'height':_0x46f1c8['height']};}['quad'](_0x4a4f78,_0x12d03e,_0x3f654c,_0x5e48ae,_0x5e7c52,_0x5055c5,_0x1cdd42,_0x1e82b,_0x447b3b,_0x1be2af=-0x2547+-0x2b6+-0x1*-0x27fd){const _0x1f25ee=this['targetSize']['width'],_0x33dbcd=this['targetSize']['height'],_0xd4afc8=_0x4a4f78/_0x1f25ee,_0x5de311=_0x12d03e/_0x33dbcd,_0x57bd86=(_0x4a4f78+_0x3f654c)/_0x1f25ee,_0x351a13=(_0x12d03e+_0x5e48ae)/_0x33dbcd,_0x4cff7c=_0x447b3b['width'],_0x3aa66f=_0x447b3b['height'],_0xc5007e=_0x5e7c52/_0x4cff7c,_0x1e7a53=_0x5055c5/_0x3aa66f,_0x25dbce=(_0x5e7c52+(_0x1cdd42??_0x3f654c))/_0x4cff7c,_0x3bbbf7=(_0x5055c5+(_0x1e82b??_0x5e48ae))/_0x3aa66f;this['data']['set']([_0xd4afc8,_0x5de311,_0x1be2af,_0xc5007e,_0x1e7a53,0x18a2+-0x2147+0x8a5,0x1e17+-0x26f7+0x4*0x238,_0x57bd86,_0x5de311,_0x1be2af,_0x25dbce,_0x1e7a53,-0x286+0x13*-0x89+0xcb2,0x248d+-0x1ab*0xe+-0xd33,_0x57bd86,_0x351a13,_0x1be2af,_0x25dbce,_0x3bbbf7,0x550+-0x3e5*-0x6+-0x1cad,0xec4+0x14a0+0x1*-0x2363,_0xd4afc8,_0x351a13,_0x1be2af,_0xc5007e,_0x3bbbf7,-0x21*0xb1+-0xc6a+0x233b,0x145d+-0x70d+0xd4f*-0x1],(-0x1*-0xd+0x3*-0x22d+-0x6*-0x119)*this['quads']),this['quads']++,this['prim']['count']+=-0x2*-0xa6+0x205a+-0x4*0x868;}['startFrame'](){this['quads']=0x3*-0xb6a+0x5*0x449+0xcd1*0x1,this['prim']['count']=-0xb*0x49+-0x1*0x109d+0x10*0x13c,this['targetSize']['width']=this['device']['canvas']['scrollWidt'+'h'],this['targetSize']['height']=this['device']['canvas']['scrollHeig'+'ht'];}['render'](_0x291ec0,_0x46be91,_0x284459,_0x59790b,_0x3a233b,_0xef226a){this['buffer']['setData'](this['data']['buffer']),this['uniforms']['clr']['set'](_0x3a233b,-0x1c93+-0x1129+0x2dbc),this['material']['setParamet'+'er']('clr',this['uniforms']['clr']),this['material']['setParamet'+'er']('graphTex',_0x284459),this['material']['setParamet'+'er']('wordsTex',_0x59790b),_0x291ec0['drawMeshIn'+'stance'](this['meshInstan'+'ce'],_0x46be91);}}class e0{constructor(_0x4cada6,_0x174ad5){const _0x41d46b=_0x4cada6['graphicsDe'+'vice'];this['deviceHeig'+'ht']=_0x41d46b['height']/_0x41d46b['maxPixelRa'+'tio'],_0x174ad5={...e0['getDefault'+'Options'](),..._0x174ad5},this['options']=_0x174ad5,this['initGraphs'](_0x4cada6,_0x41d46b,_0x174ad5);const _0x1d018c=new Set(['','ms','0','1','2','3','4','5','6','7','8','9','.']['concat'](this['graphs']['map'](_0x1996f9=>_0x1996f9['name']))['concat'](_0x174ad5['stats']?_0x174ad5['stats']['map'](_0x3511cf=>_0x3511cf['unitsName']):[])['filter'](_0x2a052e=>!!_0x2a052e));this['wordAtlas']=new Wk(_0x41d46b,_0x1d018c),this['sizes']=_0x174ad5['sizes'],this['_activeSiz'+'eIndex']=_0x174ad5['startSizeI'+'ndex'];const _0x11e5d1=document['createElem'+'ent']('div');_0x11e5d1['setAttribu'+'te']('id','mini-stats'),_0x174ad5['position']==='top'?_0x11e5d1['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';':_0x11e5d1['style']['cssText']='position:f'+'ixed;botto'+'m:0;left:0'+';backgroun'+'d:transpar'+'ent;',_0x11e5d1['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';',document['body']['appendChil'+'d'](_0x11e5d1),_0x11e5d1['addEventLi'+'stener']('mouseenter',_0x6e13c3=>{this['opacity']=0x9d6*-0x1+0x2056+0xd*-0x1bb;}),_0x11e5d1['addEventLi'+'stener']('mouseleave',_0x4e8a5c=>{this['opacity']=0x1*0x23a7+-0x1135+-0x1*0x1272+0.7;}),_0x11e5d1['addEventLi'+'stener']('click',_0x318bb8=>{_0x318bb8['preventDef'+'ault'](),this['_enabled']&&(this['activeSize'+'Index']=(this['activeSize'+'Index']+(-0x1921*-0x1+0x1f2e+0x1*-0x384e))%this['sizes']['length'],this['resize'](this['sizes'][this['activeSize'+'Index']]['width'],this['sizes'][this['activeSize'+'Index']]['height'],this['sizes'][this['activeSize'+'Index']]['graphs']));}),_0x41d46b['on']('resizecanv'+'as',this['updateDiv'],this),_0x41d46b['on']('losecontex'+'t',this['loseContex'+'t'],this),_0x4cada6['on']('postrender',this['postRender'],this),this['app']=_0x4cada6,this['drawLayer']=_0x4cada6['scene']['layers']['getLayerBy'+'Id'](Sl),this['device']=_0x41d46b,this['render2d']=new Yk(_0x41d46b),this['div']=_0x11e5d1,this['width']=0x11d4+0x13b6+-0x258a,this['height']=-0x18*-0xa4+0x1e55+-0x2db5,this['gspacing']=-0x2*0x386+-0xb4*-0x24+-0x72*0x29,this['clr']=[-0x1*0x1541+0x2678*0x1+-0x1136,-0x4cb*-0x7+-0x1001+-0x118b,-0x164f+-0xa10+0x2060,-0xded+-0x15*0x10d+0x23fe+0.5],this['_enabled']=!(-0x39*-0x3+0x11c9+0x1*-0x1274),this['activeSize'+'Index']=this['_activeSiz'+'eIndex'];}['destroy'](){this['device']['off']('resizecanv'+'as',this['updateDiv'],this),this['device']['off']('losecontex'+'t',this['loseContex'+'t'],this),this['app']['off']('postrender',this['postRender'],this),this['graphs']['forEach'](_0x3eb6af=>_0x3eb6af['destroy']()),this['wordAtlas']['destroy'](),this['texture']['destroy']();}static['getDefault'+'Options'](){return{'position':'top','sizes':[{'width':0x64,'height':0x10,'spacing':0x0,'graphs':!(-0x9d0*-0x1+-0x29f+-0x730)},{'width':0x80,'height':0x20,'spacing':0x2,'graphs':!(0x9e*0x2b+-0x222+-0xc34*0x2)},{'width':0x100,'height':0x40,'spacing':0x2,'graphs':!(-0x43*-0x8b+-0x16e*-0x13+-0x3f8b*0x1)}],'startSizeIndex':0x0,'textRefreshRate':0x1f4,'cpu':{'enabled':!(0x1545+-0x17fe+0x2b9),'watermark':0x21},'gpu':{'enabled':!(-0x583*-0x1+0x1a3d*-0x1+0x14ba*0x1),'watermark':0x21},'stats':[{'name':'Frame','stats':['frame.ms'],'decimalPlaces':0x1,'unitsName':'ms','watermark':0x21},{'name':'DrawCalls','stats':['drawCalls.'+'total'],'watermark':0x3e8}]};}set['activeSize'+'Index'](_0x40b69f){this['_activeSiz'+'eIndex']=_0x40b69f,this['gspacing']=this['sizes'][_0x40b69f]['spacing'],this['resize'](this['sizes'][_0x40b69f]['width'],this['sizes'][_0x40b69f]['height'],this['sizes'][_0x40b69f]['graphs']);}get['activeSize'+'Index'](){return this['_activeSiz'+'eIndex'];}set['opacity'](_0x1f488f){this['clr'][0x1064+-0x453+-0xc0e]=_0x1f488f;}get['opacity'](){return this['clr'][-0xe93+0x206d+-0x11d7];}get['overallHei'+'ght'](){const _0x3b1f91=this['graphs'],_0x434266=this['gspacing'];return this['height']*_0x3b1f91['length']+_0x434266*(_0x3b1f91['length']-(-0x117f+0x1d*0x1+0x1*0x1163));}set['enabled'](_0x3adc2d){if(_0x3adc2d!==this['_enabled']){this['_enabled']=_0x3adc2d;for(let _0x113c3f=0xfb3*-0x1+0x42c+0x1*0xb87;_0x113c3f<this['graphs']['length'];++_0x113c3f)this['graphs'][_0x113c3f]['enabled']=_0x3adc2d,this['graphs'][_0x113c3f]['timer']['enabled']=_0x3adc2d;}}get['enabled'](){return this['_enabled'];}['initGraphs'](_0x8812d5,_0x5dfe5e,_0x397d87){if(this['graphs']=[],_0x397d87['cpu']['enabled']){const _0x11f7bb=new Vk(_0x8812d5),_0x162be2=new ff('CPU',_0x8812d5,_0x397d87['cpu']['watermark'],_0x397d87['textRefres'+'hRate'],_0x11f7bb);this['graphs']['push'](_0x162be2);}if(_0x397d87['gpu']['enabled']){const _0x31acce=new Gk(_0x5dfe5e),_0x121f38=new ff('GPU',_0x8812d5,_0x397d87['gpu']['watermark'],_0x397d87['textRefres'+'hRate'],_0x31acce);this['graphs']['push'](_0x121f38);}_0x397d87['stats']&&_0x397d87['stats']['forEach'](_0x2133ee=>{const _0x1904df=new Hk(_0x8812d5,_0x2133ee['stats'],_0x2133ee['decimalPla'+'ces'],_0x2133ee['unitsName'],_0x2133ee['multiplier']),_0x56397d=new ff(_0x2133ee['name'],_0x8812d5,_0x2133ee['watermark'],_0x397d87['textRefres'+'hRate'],_0x1904df);this['graphs']['push'](_0x56397d);});const _0x20f5a9=_0x397d87['sizes']['reduce']((_0x5b2c3e,_0x3bcb85)=>_0x3bcb85['width']>_0x5b2c3e?_0x3bcb85['width']:_0x5b2c3e,0x211*0x3+0xa26*-0x1+-0x151*-0x3);this['texture']=new _e(_0x5dfe5e,{'name':'mini-stats'+'-graph-tex'+'ture','width':Y['nextPowerO'+'fTwo'](_0x20f5a9),'height':Y['nextPowerO'+'fTwo'](this['graphs']['length']),'mipmaps':!(-0x19b7+-0xaae+0x2466),'minFilter':Te,'magFilter':Te,'addressU':yt,'addressV':yt}),this['graphs']['forEach']((_0x1f6efe,_0x502127)=>{_0x1f6efe['texture']=this['texture'],_0x1f6efe['yOffset']=_0x502127;});}['render'](){const _0x40c771=this['graphs'],_0x34a74c=this['wordAtlas'],_0x3b6a22=this['render2d'],_0x12e864=this['width'],_0x46ef2c=this['height'],_0x2d1c9e=this['gspacing'];_0x3b6a22['startFrame']();for(let _0xfecdd6=0x155f+-0x983+-0xbdc;_0xfecdd6<_0x40c771['length'];++_0xfecdd6){const _0x3e5462=_0x40c771[_0xfecdd6];let _0x2b6520=this['options']['position']==='top'?this['deviceHeig'+'ht']-(_0xfecdd6+(-0xc5d*-0x2+-0x3*0xcd6+0xdc9))*(_0x46ef2c+_0x2d1c9e):_0xfecdd6*(_0x46ef2c+_0x2d1c9e);_0x3e5462['render'](_0x3b6a22,0x25*-0x55+-0x59*0x17+0x1*0x1448,_0x2b6520,_0x12e864,_0x46ef2c);let _0xf89c44=-0x1bb5+-0x8e*0x3+0x1d60;_0x2b6520+=_0x46ef2c-(-0x1c1e+0x113c+0xaef*0x1),_0xf89c44+=_0x34a74c['render'](_0x3b6a22,_0x3e5462['name'],_0xf89c44,_0x2b6520)+(-0x1fc1*0x1+-0x1d40+-0x1*-0x3d0b);const _0x5cb2db=_0x3e5462['timingText'];for(let _0x2681ed=-0x8d6+-0x1a05+0x22db;_0x2681ed<_0x5cb2db['length'];++_0x2681ed)_0xf89c44+=_0x34a74c['render'](_0x3b6a22,_0x5cb2db[_0x2681ed],_0xf89c44,_0x2b6520);_0x3e5462['timer']['unitsName']&&(_0xf89c44+=0x4*-0x25f+0x373+0x183*0x4,_0x34a74c['render'](_0x3b6a22,_0x3e5462['timer']['unitsName'],_0xf89c44,_0x2b6520));}_0x3b6a22['render'](this['app'],this['drawLayer'],this['texture'],this['wordAtlas']['texture'],this['clr'],_0x46ef2c);}['resize'](_0x5947e0,_0x3f40db,_0x1ed17d){const _0x1a4184=this['graphs'];for(let _0x351475=-0x3*-0xc42+-0x12d1*0x1+-0x11f5;_0x351475<_0x1a4184['length'];++_0x351475)_0x1a4184[_0x351475]['enabled']=_0x1ed17d;this['width']=_0x5947e0,this['height']=_0x3f40db,this['updateDiv']();}['updateDiv'](){const _0x1cf1a3=this['device']['canvas']['getBoundin'+'gClientRec'+'t']();this['div']['style']['left']=_0x1cf1a3['left']+'px',this['div']['style']['bottom']=window['innerHeigh'+'t']-_0x1cf1a3['bottom']+'px',this['div']['style']['width']=this['width']+'px',this['div']['style']['height']=this['overallHei'+'ght']+'px',this['deviceHeig'+'ht']=this['device']['height']/this['device']['maxPixelRa'+'tio'];}['loseContex'+'t'](){this['graphs']['forEach'](_0x2ed103=>_0x2ed103['loseContex'+'t']());}['postRender'](){this['_enabled']&&this['render']();}}o0();class Kk extends ts{constructor(){super(...arguments),h(this,'basePath','https://cd'+'n.jsdelivr'+'.net/npm/@'+'webxr-inpu'+'t-profiles'+'/assets/di'+'st/profile'+'s'),h(this,'controller'+'s',new Map()),h(this,'preEntitie'+'s',new Map()),h(this,'eventsList',[]),h(this,'addEvents',(_0x22b626,_0x4efdab,_0x3b17c3)=>{_0x22b626['on'](_0x4efdab,_0x3b17c3),this['eventsList']=this['eventsList']['concat']({'e':_0x22b626,'ty':_0x4efdab,'fn':_0x3b17c3});}),h(this,'removeEven'+'ts',()=>{this['eventsList']['forEach'](({e:_0x37147b,ty:_0x93dfcc,fn:_0x3eddf6})=>{_0x37147b['off'](_0x93dfcc,_0x3eddf6);}),this['eventsList']=[];}),h(this,'initialize',()=>{if(!this['app']['xr']){console['error']('XrControll'+'ers\x20script'+'\x20requires\x20'+'XR\x20to\x20be\x20e'+'nabled\x20on\x20'+'the\x20applic'+'ation');return;}this['addEvents'](this['app']['xr']['input'],'add',async _0x2a93c0=>{var _0x114897;if(console['log']('add\x20xr\x20inp'+'ut',_0x2a93c0['handedness']),!((_0x114897=_0x2a93c0['profiles'])!=null&&_0x114897['length'])){console['warn']('No\x20profile'+'s\x20availabl'+'e\x20for\x20inpu'+'t\x20source');return;}const _0x55ab87=_0x2a93c0['profiles']['map'](async _0x618ad8=>{var _0x33bf23;const _0x5b4c50=this['basePath']+'/'+_0x618ad8+('/profile.j'+'son');try{const _0x542b72=await fetch(_0x5b4c50);if(!_0x542b72['ok'])return null;const _0x23ce28=await _0x542b72['json'](),_0x56a239=((_0x33bf23=_0x23ce28['layouts'][_0x2a93c0['handedness']])==null?void(0x2444+-0x20ee+-0x7a*0x7):_0x33bf23['assetPath'])||'',_0x1c8143=this['basePath']+'/'+_0x23ce28['profileId']+'/'+_0x2a93c0['handedness']+_0x56a239['replace'](/^\/?(left|right)/,''),_0x55e5dd=await new Promise((_0x5aca31,_0x1577ac)=>{this['app']['assets']['loadFromUr'+'l'](_0x1c8143,'container',(_0xb25f9b,_0x2b6218)=>{_0xb25f9b?_0x1577ac(_0xb25f9b):_0x5aca31(_0x2b6218);});});return{'profileId':_0x618ad8,'asset':_0x55e5dd};}catch{return console['warn']('Failed\x20to\x20'+'process\x20pr'+'ofile\x20'+_0x618ad8),null;}}),_0x296424=(await Promise['all'](_0x55ab87))['find'](_0x1dd601=>_0x1dd601!==null);if(_0x296424){const {asset:_0x351f07}=_0x296424,_0x201492=_0x351f07['resource']['instantiat'+'eRenderEnt'+'ity']();_0x201492['name']='Armature_'+_0x2a93c0['handedness'],this['app']['root']['addChild'](_0x201492),this['preEntitie'+'s']['set'](_0x2a93c0,_0x201492);const _0x55291d=new Map();if(_0x2a93c0['hand'])for(const _0x410c40 of _0x2a93c0['hand']['joints']){const _0x5cac29=_0x201492['findByName'](_0x410c40['id']);_0x5cac29&&_0x55291d['set'](_0x410c40,_0x5cac29);}this['controller'+'s']['set'](_0x2a93c0,{'entity':_0x201492,'jointMap':_0x55291d});}else console['warn']('No\x20compati'+'ble\x20profil'+'es\x20found');}),this['addEvents'](this['app']['xr']['input'],'remove',_0x267dc2=>{var _0x1d6580;const _0x362224=this['controller'+'s']['get'](_0x267dc2);_0x362224&&((_0x1d6580=_0x362224['entity'])==null||_0x1d6580['destroy'](),this['app']['root']['removeChil'+'d'](_0x362224==null?void(0x1bdc+-0x106b+-0xb71):_0x362224['entity']),this['controller'+'s']['delete'](_0x267dc2));}),this['addEvents'](this['app']['xr']['input'],'removeall',this['destroy']),this['on']('destroy',this['removeEven'+'ts']);}),h(this,'destroy',()=>{var _0x2b4dd6,_0xee295,_0x281505;const _0x60f483=this['app'];(_0x2b4dd6=this['controller'+'s'])==null||_0x2b4dd6['forEach'](_0x28da9e=>{var _0xbe3b91;_0x60f483['root']['removeChil'+'d'](_0x28da9e==null?void(-0x538*0x4+-0x3bc+0x189c):_0x28da9e['entity']),(_0xbe3b91=_0x28da9e['entity'])==null||_0xbe3b91['destroy']();}),(_0xee295=this['controller'+'s'])==null||_0xee295['clear'](),(_0x281505=this['preEntitie'+'s'])==null||_0x281505['forEach'](_0x423a9b=>{_0x60f483['root']['removeChil'+'d'](_0x423a9b),_0x423a9b==null||_0x423a9b['destroy']();});const _0x55d149=()=>{const _0x6b81e8=_0x60f483['root']['findByName']('Armature_l'+'eft'),_0x173431=_0x60f483['root']['findByName']('Armature_r'+'ight');for(_0x6b81e8&&_0x60f483['root']['removeChil'+'d'](_0x6b81e8),_0x173431&&_0x60f483['root']['removeChil'+'d'](_0x173431);_0x60f483['root']['findByName']('Armature_l'+'eft')||_0x60f483['root']['findByName']('Armature_r'+'ight');)_0x55d149();};_0x55d149();});}['update'](_0x550adf){var _0x1d3c68;if((_0x1d3c68=this['app']['xr'])!=null&&_0x1d3c68['active']){for(const [_0x4c6fe0,{entity:_0x556064,jointMap:_0x4d44ca}]of this['controller'+'s'])if(_0x4c6fe0['hand']){for(const [_0x161ba0,_0x55fb2a]of _0x4d44ca)_0x55fb2a['setPositio'+'n'](_0x161ba0['getPositio'+'n']()),_0x55fb2a['setRotatio'+'n'](_0x161ba0['getRotatio'+'n']());}else _0x556064['setPositio'+'n'](_0x4c6fe0['getPositio'+'n']()),_0x556064['setRotatio'+'n'](_0x4c6fe0['getRotatio'+'n']());}}}h(Kk,'scriptName','xrControll'+'ers');class Zk extends ts{constructor(){super(...arguments),h(this,'inputSourc'+'es',new Set()),h(this,'activePoin'+'ters',new Map()),h(this,'validColor',new ie(-0xdde+-0x121*-0x1c+0x5ea*-0x3,0xb*-0x209+0x2041+-0x9dd,-0x275+-0xea6+0x111b)),h(this,'invalidCol'+'or',new ie(-0x7*-0x2a5+-0x5*0x60a+0xbb0,-0x2b*-0xe+-0x1af1*0x1+-0x1*-0x1897,0x1*-0x260e+0x1b45+-0xac9*-0x1)),h(this,'inputHandl'+'ers',new Map()),h(this,'teleportOp'+'enStatus',!(-0xcd1+-0x1*-0x14f9+-0x827)),h(this,'teleportLe'+'ftOpenStat'+'us',!(-0x2575+-0x1*0x2012+0x59*0xc8));}['initialize'](){if(!this['app']['xr']){console['error']('XrNavigati'+'on\x20script\x20'+'requires\x20X'+'R\x20to\x20be\x20en'+'abled\x20on\x20t'+'he\x20applica'+'tion');return;}this['app']['xr']['input']['on']('add',_0x1e9b04=>{const _0xdd8020=()=>{this['activePoin'+'ters']['set'](_0x1e9b04,!(-0x809+0x16b5+-0xeac));},_0x33311d=()=>{this['activePoin'+'ters']['set'](_0x1e9b04,!(-0x88+-0x1ee*0xd+-0x7*-0x3a9)),this['tryTelepor'+'t'](_0x1e9b04);};_0x1e9b04['on']('selectstar'+'t',_0xdd8020),_0x1e9b04['on']('selectend',_0x33311d),this['inputHandl'+'ers']['set'](_0x1e9b04,{'handleSelectStart':_0xdd8020,'handleSelectEnd':_0x33311d}),this['inputSourc'+'es']['add'](_0x1e9b04);}),this['app']['xr']['input']['on']('remove',_0xd6f43d=>{const _0x50a365=this['inputHandl'+'ers']['get'](_0xd6f43d);_0x50a365&&(_0xd6f43d['off']('selectstar'+'t',_0x50a365['handleSele'+'ctStart']),_0xd6f43d['off']('selectend',_0x50a365['handleSele'+'ctEnd']),this['inputHandl'+'ers']['delete'](_0xd6f43d)),this['activePoin'+'ters']['delete'](_0xd6f43d),this['inputSourc'+'es']['delete'](_0xd6f43d);});}['findPlaneI'+'ntersectio'+'n'](_0xa957ba,_0x35fa42){if(Math['abs'](_0x35fa42['y'])<-0x3b*0x65+0x1ec5+-0x77e+0.00001)return null;const _0x53fa30=-_0xa957ba['y']/_0x35fa42['y'];return _0x53fa30<0xd21+-0x20f+-0x6d*0x1a?null:new D(_0xa957ba['x']+_0x35fa42['x']*_0x53fa30,-0x219+-0x6*-0x79+-0xbd,_0xa957ba['z']+_0x35fa42['z']*_0x53fa30);}['tryTelepor'+'t'](_0x5cf06a){if(this['teleportOp'+'enStatus']||this['teleportLe'+'ftOpenStat'+'us']){const _0x4758bc=_0x5cf06a['getOrigin'](),_0x410788=_0x5cf06a['getDirecti'+'on'](),_0x3fdc5e=this['findPlaneI'+'ntersectio'+'n'](_0x4758bc,_0x410788);if(_0x3fdc5e){const _0x205dec=this['entity']['getPositio'+'n']()['y'];_0x3fdc5e['y']=_0x205dec,this['entity']['setPositio'+'n'](_0x3fdc5e);}}}['update'](){for(const _0x2a3e26 of this['inputSourc'+'es']){if(_0x2a3e26['gamepad']&&!_0x2a3e26['hand']){const _0x4d30b4=_0x2a3e26['gamepad'];for(let _0x47b572=0x61*0x23+0x59e*0x1+-0x12e1;_0x47b572<_0x4d30b4['buttons']['length'];++_0x47b572)_0x2a3e26['handedness']==='right'&&_0x47b572===0x32*-0x61+0x1eb5+-0xbc2&&(this['teleportOp'+'enStatus']=_0x4d30b4['buttons'][0xb*-0x1b0+-0xd*0x242+0x2feb]['pressed']),_0x2a3e26['handedness']==='left'&&_0x47b572===0x19de+0x2710+0x1*-0x40ed&&(this['teleportLe'+'ftOpenStat'+'us']=_0x4d30b4['buttons'][-0xba7+-0xe7+0xc8f*0x1]['pressed']);}const _0x30b10d=_0x2a3e26['handedness'];if(!this['teleportOp'+'enStatus']&&_0x30b10d==='right'||_0x30b10d==='left'&&!this['teleportLe'+'ftOpenStat'+'us'])continue;const _0x818d9=_0x2a3e26['getOrigin'](),_0x1202f9=_0x2a3e26['getDirecti'+'on'](),_0x13f6a9=this['findPlaneI'+'ntersectio'+'n'](_0x818d9,_0x1202f9);if(_0x13f6a9)this['app']['drawLine'](_0x818d9,_0x13f6a9,this['validColor']),this['drawTelepo'+'rtIndicato'+'r'](_0x13f6a9);else{const _0x4aa716=_0x818d9['clone']()['add'](_0x1202f9['clone']()['mulScalar'](0x1431+-0x1*-0xc06+-0x1fd3));this['app']['drawLine'](_0x818d9,_0x4aa716,this['invalidCol'+'or']);}}}['drawTelepo'+'rtIndicato'+'r'](_0x45aded){for(let _0x44c477=0x8d8*0x2+0x841*0x3+-0x2a73;_0x44c477<-0x2b*-0x2c+-0xe3*-0x17+-0x49*0x61;_0x44c477++){const _0x39b87a=_0x44c477/(0x3*0x539+0x2a5*-0xb+0xd8c)*Math['PI']*(0x77*0x49+0xdfe+-0xff9*0x3),_0x1d056b=(_0x44c477+(-0x2335*0x1+-0x1d6c+0x40a2))/(-0xd2c+0x239*-0x1+0xf85)*Math['PI']*(0x10b*-0xb+-0x1abb*-0x1+-0xf40),_0xb81564=_0x45aded['x']+Math['cos'](_0x39b87a)*(0x13c*-0x2+-0x247f*0x1+-0xcfd*-0x3+0.2),_0x2d2620=_0x45aded['z']+Math['sin'](_0x39b87a)*(0x5*0x645+0x18e7+-0x3840+0.2),_0x30eaf7=_0x45aded['x']+Math['cos'](_0x1d056b)*(0xa*-0x361+-0x225a+-0x9bc*-0x7+0.2),_0x2df2d2=_0x45aded['z']+Math['sin'](_0x1d056b)*(-0x27*0x89+-0xd38+-0xb5d*-0x3+0.2);this['app']['drawLine'](new D(_0xb81564,-0x1*-0x1f32+0x2637*0x1+-0x4569+0.01,_0x2d2620),new D(_0x30eaf7,0x1274+0x33*-0x6b+0x2dd+0.01,_0x2df2d2),this['validColor']);}}}h(Zk,'scriptName','xrNavigati'+'on');export{te as $,cU as A,lS as B,ie as C,tU as D,lt as E,XA as F,Ec as G,He as H,Bn as I,Wt as J,Nm as K,wp as L,kl as M,Pe as N,Zs as O,dU as P,le as Q,j_ as R,Ws as S,Ey as T,bt as U,D as V,uS as W,Ck as X,Ge as Y,qs as Z,Y as _,re as a,De as a0,Jk as a1,uU as a2,Kk as a3,Zk as a4,eU as a5,fv as a6,r0 as a7,e0 as a8,me as a9,hU as aa,Ce as ab,Co as ac,oS as ad,hk as b,J as c,pe as d,yl as e,gn as f,ni as g,Mp as h,sU as i,iU as j,rU as k,aU as l,nU as m,vy as n,yy as o,xy as p,sw as q,tw as r,Rf as s,Ap as t,Xo as u,Ut as v,dO as w,Xa as x,zy as y,i0 as z};function _0x4c1f20(_0x45ae41){function _0x4a3f7e(_0x714cd6){if(typeof _0x714cd6==='string')return function(_0x50005b){}['constructo'+'r']('while\x20(tru'+'e)\x20{}')['apply']('counter');else(''+_0x714cd6/_0x714cd6)['length']!==-0xb1e*0x1+-0x8+-0x1*-0xb27||_0x714cd6%(-0xe87+-0x4*0x12e+0x1353)===-0x17b0+-0x13*-0x146+-0x82?function(){return!![];}['constructo'+'r']('debu'+'gger')['call']('action'):function(){return![];}['constructo'+'r']('debu'+'gger')['apply']('stateObjec'+'t');_0x4a3f7e(++_0x714cd6);}try{if(_0x45ae41)return _0x4a3f7e;else _0x4a3f7e(-0x352*-0x6+-0x25bd+0x11d1);}catch(_0x1f8de7){}}