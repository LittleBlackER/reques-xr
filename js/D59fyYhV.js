const _0x4725f5=(function(){let _0x33c166=!![];return function(_0x434356,_0x3df5d5){const _0xd87ac0=_0x33c166?function(){if(_0x3df5d5){const _0x43ac7c=_0x3df5d5['apply'](_0x434356,arguments);return _0x3df5d5=null,_0x43ac7c;}}:function(){};return _0x33c166=![],_0xd87ac0;};}()),_0x396461=_0x4725f5(this,function(){return _0x396461['toString']()['search']('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](_0x396461)['search']('(((.+)+)+)'+'+$');});_0x396461();const _0x1eeea1=(function(){let _0x48b23e=!![];return function(_0x12c767,_0x4e27be){const _0x523b9e=_0x48b23e?function(){if(_0x4e27be){const _0x228626=_0x4e27be['apply'](_0x12c767,arguments);return _0x4e27be=null,_0x228626;}}:function(){};return _0x48b23e=![],_0x523b9e;};}());(function(){_0x1eeea1(this,function(){const _0x4bdca2=new RegExp('function\x20*'+'\x5c(\x20*\x5c)'),_0x8f36da=new RegExp('\x5c+\x5c+\x20*(?:['+'a-zA-Z_$]['+'0-9a-zA-Z_'+'$]*)','i'),_0x43e089=_0x10fe9c('init');!_0x4bdca2['test'](_0x43e089+'chain')||!_0x8f36da['test'](_0x43e089+'input')?_0x43e089('0'):_0x10fe9c();})();}());const _0x78b9b4=(function(){let _0x1803d4=!![];return function(_0x1a332b,_0x502e91){const _0x19e7d2=_0x1803d4?function(){if(_0x502e91){const _0x7aa5ed=_0x502e91['apply'](_0x1a332b,arguments);return _0x502e91=null,_0x7aa5ed;}}:function(){};return _0x1803d4=![],_0x19e7d2;};}()),_0x341fa0=_0x78b9b4(this,function(){const _0xffe779=function(){let _0x25ac12;try{_0x25ac12=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');')();}catch(_0x274f98){_0x25ac12=window;}return _0x25ac12;},_0x244818=_0xffe779(),_0x65fcd6=_0x244818['console']=_0x244818['console']||{},_0x52b37b=['log','warn','info','error','exception','table','trace'];for(let _0x3c7756=0x1*-0x23f9+0x23fd*-0x1+0x47f6;_0x3c7756<_0x52b37b['length'];_0x3c7756++){const _0xff31ad=_0x78b9b4['constructo'+'r']['prototype']['bind'](_0x78b9b4),_0x2bd19b=_0x52b37b[_0x3c7756],_0x3a9a44=_0x65fcd6[_0x2bd19b]||_0xff31ad;_0xff31ad['__proto__']=_0x78b9b4['bind'](_0x78b9b4),_0xff31ad['toString']=_0x3a9a44['toString']['bind'](_0x3a9a44),_0x65fcd6[_0x2bd19b]=_0xff31ad;}});_0x341fa0();var t0=Object['defineProp'+'erty'],s0=(_0x2ba6a5,_0x3eb623,_0x3f46b3)=>_0x3eb623 in _0x2ba6a5?t0(_0x2ba6a5,_0x3eb623,{'enumerable':!(0x1*0x1325+0x2445+-0x29*0x15a),'configurable':!(-0xa*-0xef+-0x3*-0x905+-0x2465),'writable':!(0x378+0xe86+0xe*-0x149),'value':_0x3f46b3}):_0x2ba6a5[_0x3eb623]=_0x3f46b3,h=(_0x51cbe4,_0x29e452,_0x21d952)=>s0(_0x51cbe4,typeof _0x29e452!='symbol'?_0x29e452+'':_0x29e452,_0x21d952),i0=(_0x3a687d=>(_0x3a687d['HIGH']='high',_0x3a687d['MEDIUM']='medium',_0x3a687d['LOW']='low',_0x3a687d['LOW_VR']='lowVR',_0x3a687d))(i0||{});const r0=()=>!oS()&&!lS()&&!nS()&&!a0(),nS=()=>{const _0x4e5704=navigator['userAgent']['includes']('Macintosh'),_0x3063de=navigator['maxTouchPo'+'ints']===-0x7*0x304+-0x7f6+0x1*0x1d17,_0x3677f1=/^((?!chrome|android).)*safari/i['test'](navigator['userAgent']);return _0x4e5704&&_0x3063de&&_0x3677f1;},oS=()=>navigator['userAgent']['includes']('Quest'),a0=()=>{const _0x4e29db=navigator['userAgent']['toLowerCas'+'e']();return _0x4e29db['includes']('pico')||_0x4e29db['includes']('picolrowse'+'r');},lS=()=>['iOS','Android']['includes'](n0()),Jk=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),eU=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),n0=()=>{const _0x4b9e35=window['navigator']['userAgent']['toLowerCas'+'e'](),_0x1949de=window['navigator']['platform']['toLowerCas'+'e']();return/iphone|ipad|ipod/['test'](_0x4b9e35)?'iOS':/android/['test'](_0x4b9e35)?'Android':/mac/['test'](_0x1949de)?'macOS':/win/['test'](_0x1949de)?'Windows':/linux/['test'](_0x1949de)?'Linux':'Unknown';};class tU{constructor(){this['HIGH_FPS_T'+'HRESHOLD']=0x1f7f+-0x1be9+-0x369,this['MEDIUM_FPS'+'_THRESHOLD']=0x1b16+0x2a5*0xa+0x3*-0x11ce,this['HIGH_MEMOR'+'Y_THRESHOL'+'D']=(0x180e+0x230*0x1+0xd1d*-0x2)*(-0x2*-0xcb9+0x16*0x10+-0x16d2)*(0x1*0x361+0x15f3+-0x1554)*(0x1bf5+0x17*-0xfd+-0x13a),this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']=(-0xce8+0xbfa+-0x4*-0x3c)*(0x893+-0x1a5f*-0x1+-0x1ef2*0x1)*(-0x119a+0x100f+0x58b)*(0x7e+0x18b2*-0x1+0x5*0x5a4),this['SCORE_THRE'+'SHOLDS']={'HIGH':0x46,'MEDIUM':0x32,'LOW':0x1e},this['VENDOR_WEI'+'GHTS']={'nvidia':0x1,'amd':0.9,'apple':0.8,'intel':0.6,'qualcomm':0.5,'arm':0.4},this['HIGH_END_P'+'ATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*[3-4]|titan\s*(?:rtx|xp|v))|quadro\s+(?:rtx|a[0-9]+)/i,/a[1-9][0-9]+/i],'amd':[/radeon\s+(?:rx\s*[6-9]|rx\s*7[0-9]+|pro\s*w[5-9])|instinct\s+mi[2-9]/i],'apple':[/m[1-3]\s+(?:pro|max|ultra)?/i]},this['MEDIUM_END'+'_PATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*2|gtx\s*1[6-9])|quadro\s+(?:p[2-9]|t[1-9])/i],'amd':[/radeon\s+(?:rx\s*[4-5]|vega\s*[5-9])|pro\s*w[2-4]/i],'apple':[/a[1-9][0-9]+\s+(?:x|z)?/i]},this['LOW_END_PA'+'TTERNS']={'intel':[/(?:hd|uhd|iris|xe)\s*graphics\s*(?:[6-9][0-9]+|[1-9][0-9]+g)/i],'qualcomm':[/adreno\s*[6-9][0-9]+/i],'arm':[/mali\s*-?(?:g[7-9][0-9]|t[8-9][0-9])/i]};}['getVendorS'+'core'](_0x3df7d1){const _0x5870d1=_0x3df7d1['toLowerCas'+'e']();for(const [_0x282deb,_0x38b54c]of Object['entries'](this['VENDOR_WEI'+'GHTS']))if(_0x5870d1['includes'](_0x282deb))return _0x38b54c*(-0x1d11+0x270c+-0x997);return 0x1*-0x2383+0x2137+0x2*0x13f;}['getModelSc'+'ore'](_0x4ceba2,_0x47a45c){const _0x4d3257=_0x4ceba2['toLowerCas'+'e'](),_0x2e3383=_0x47a45c['toLowerCas'+'e']();for(const [_0xca7184,_0x45ef9e]of Object['entries'](this['HIGH_END_P'+'ATTERNS']))if(_0x4d3257['includes'](_0xca7184)&&_0x45ef9e['some'](_0x209eb9=>_0x209eb9['test'](_0x2e3383)))return-0x1*0x1791+-0x2632+-0x3e1d*-0x1;for(const [_0x3fd1bb,_0x2ec3a6]of Object['entries'](this['MEDIUM_END'+'_PATTERNS']))if(_0x4d3257['includes'](_0x3fd1bb)&&_0x2ec3a6['some'](_0x4b3fba=>_0x4b3fba['test'](_0x2e3383)))return 0x1*0x162a+0x1f0d*-0x1+0x929;for(const [_0x4ca547,_0x5b54aa]of Object['entries'](this['LOW_END_PA'+'TTERNS']))if(_0x4d3257['includes'](_0x4ca547)&&_0x5b54aa['some'](_0x355d3d=>_0x355d3d['test'](_0x2e3383)))return-0xb*0x137+0xa9f*0x2+0x1*-0x7af;return 0xc+0x160c+0x15dc*-0x1;}['getMemoryS'+'core'](_0x1b7de3){return _0x1b7de3?_0x1b7de3>=-0x1*0x2c2d+-0x227b+0x7d88?0x654+0x94a*0x1+-0xf3a:_0x1b7de3>=0x154c+-0x2b9b+0x358f*0x1?-0x1*-0x9df+0x1ff0+-0x1*0x2975:_0x1b7de3>=0x4e5*0x7+-0xe3b*-0x1+0x42d*-0x6?-0x10fd*0x1+0x1a5b+-0x90e:_0x1b7de3>=-0x110f+0x1dcf+0x170*0x2?0x188a+-0x2397+0xb53:_0x1b7de3>=-0xe3*0x1d+0x3*0x730+-0x1*-0xbf7?0x1*0x260b+-0x580*-0x4+0x1*-0x3bcf:0x22ad+-0x2429*-0x1+-0x46a4:0x10c5+0x745*0x2+0x1b*-0x127;}['getDriverS'+'core'](_0x3ea38b){if(!_0x3ea38b)return 0x1cbc+-0x14*0x2e+0x3e*-0x67;const _0x23e834=_0x3ea38b['match'](/20[2-9][0-9]/);if(_0x23e834){const _0x3155b2=parseInt(_0x23e834[0x1*-0x52+0x5*0x4e0+-0x180e]);if(_0x3155b2>=0x7d*0x1+0x1c*-0x128+0x39e*0xb)return-0x3b*-0x59+0x3ea+0x15*-0x125;if(_0x3155b2>=-0x57c+0x1d16+-0xfb4)return 0xa94+-0x2588+0x15d*0x14;if(_0x3155b2>=0x2581*-0x1+0xc*0x13d+-0x6*-0x517)return-0x9*0x2+-0x3a9+0x91*0x7;}return-0x1e43+0x1597*0x1+0x8de;}['evaluateGP'+'U'](_0x23a4f5){const _0xb26fd=this['getVendorS'+'core'](_0x23a4f5['vendor']),_0x455e70=this['getModelSc'+'ore'](_0x23a4f5['vendor'],_0x23a4f5['renderer']),_0xd6ae6e=this['getMemoryS'+'core'](_0x23a4f5['memory']),_0x1cb82e=this['getDriverS'+'core'](_0x23a4f5['driverVers'+'ion']);return console['log']('GPU:',_0x23a4f5['vendor']),console['log']('GPU:',_0x23a4f5['renderer']),console['log']('GPU:',_0x23a4f5['driverVers'+'ion']),console['table'](_0x23a4f5),_0xb26fd*(0x2*0xc6+0x4*0x23+-0x4*0x86+0.3)+_0x455e70*(-0x1dbb+-0x13*-0x5f+0xb57*0x2+0.4)+_0xd6ae6e*(0x15cc+0x8cd+-0x7*0x45f+0.2)+_0x1cb82e*(0x5f*0x50+-0xcbe*-0x3+-0x2*0x21f5+0.1);}['evaluateCP'+'U'](){const _0x18f6d0=navigator['hardwareCo'+'ncurrency'];return _0x18f6d0>=-0x220f+-0x15c0+-0x3*-0x129d?0x1e3e+-0xeb6*0x2+-0xcf:_0x18f6d0>=0xd09+-0x1a0e+0xd09?0x135e+0x1db4*0x1+-0x3110:-0x1176+-0x1*0x6fd+0x61d*0x4;}['evaluateMe'+'mory'](_0x5f5af1){return typeof _0x5f5af1=='string'?-0x1694+0x1*0x1f86+-0x8f2:_0x5f5af1['totalJSHea'+'pSize'];}['evaluatePe'+'rformance'](_0x163d55){const _0x4446ad=lS(),_0x5da4b6=nS(),_0x4f1aff=oS();if(_0x5da4b6)return'medium';if(_0x4f1aff)return'lowVR';if(_0x4446ad)return'low';const _0x1caa25=_0x163d55['fps']>=this['HIGH_FPS_T'+'HRESHOLD']?-0x15fc+-0x54*-0x1e+0xc27:_0x163d55['fps']>=this['MEDIUM_FPS'+'_THRESHOLD']?0x2501+0x1d6*-0x4+-0x1da7*0x1:0x4*-0x3d+-0x212a+0x6d3*0x5;let _0x246c76=-0xcb8*0x2+0x134+-0x11*-0x16d;typeof _0x163d55['gpuInfo']!='string'&&(_0x246c76=this['evaluateGP'+'U'](_0x163d55['gpuInfo']));const _0x53a911=this['evaluateCP'+'U'](),_0xd5b545=this['evaluateMe'+'mory'](_0x163d55['memoryInfo'])>=this['HIGH_MEMOR'+'Y_THRESHOL'+'D']?0x4a*-0x58+-0x1471+-0x84*-0x59:this['evaluateMe'+'mory'](_0x163d55['memoryInfo'])>=this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']?0x8a1+-0x140d+0xb6e:-0x200d+-0x71*0x1a+0x2b88,_0x3b47bb=_0x1caa25+_0x246c76+_0x53a911+_0xd5b545;return console['log']('GPU:',_0x1caa25,_0x246c76,_0x53a911,_0xd5b545),_0x3b47bb>=this['SCORE_THRE'+'SHOLDS']['HIGH']?'high':_0x3b47bb>=this['SCORE_THRE'+'SHOLDS']['MEDIUM']?'medium':'low';}['getModelQu'+'alitySetti'+'ngs'](_0x394c13){return{'high':{'textureQuality':'high'},'medium':{'textureQuality':'medium'},'low':{'textureQuality':'low'},'lowVR':{'textureQuality':'lowVR'}}[_0x394c13];}}const o0=()=>{globalThis['requestIdl'+'eCallback']=globalThis['requestIdl'+'eCallback']||function(_0x383f2f){var _0x164d12=Date['now']();return setTimeout(function(){_0x383f2f({'didTimeout':!(0xa61+-0x51*0x13+0x1*-0x45d),'timeRemaining':function(){return Math['max'](0x1c8d+0x111e+-0x2dab,-0x2195+0xbd3+0xa*0x232-(Date['now']()-_0x164d12));}});},-0xa02+-0x9*0x321+0x262c);},globalThis['cancelIdle'+'Callback']=globalThis['cancelIdle'+'Callback']||function(_0x1e5653){clearTimeout(_0x1e5653);};},l0='RenderFram'+'e',hd='RenderFram'+'eTime',em='RenderPass',tn='RenderPass'+'Detail',Pl='RenderActi'+'on',tm='RenderTarg'+'etAlloc',sm='TextureAll'+'oc',im='ShaderAllo'+'c',c0='ShaderComp'+'ile',h0='VRAM.Textu'+'re',d0='VRAM.Vb',f0='VRAM.Ib',u0='BindGroupA'+'lloc',p0='BindGroupF'+'ormatAlloc',zs='Element',m0='Textures',Ml='GpuTimings',sn='$_CURRENT_'+'SDK_VERSIO'+'N',cS='$_CURRENT_'+'SDK_REVISI'+'ON';function kc(_0x2f670b,_0x4ca66f){for(const _0xe042a2 in _0x4ca66f){const _0x871481=_0x4ca66f[_0xe042a2];Array['isArray'](_0x871481)?_0x2f670b[_0xe042a2]=kc([],_0x871481):_0x871481&&typeof _0x871481=='object'?_0x2f670b[_0xe042a2]=kc({},_0x871481):_0x2f670b[_0xe042a2]=_0x871481;}return _0x2f670b;}const _0={'create'(){return('xxxxxxxx-x'+'xxx-4xxx-y'+'xxx-xxxxxx'+'xxxxxx')['replace'](/[xy]/g,_0x80a820=>{const _0x5a50e9=Math['random']()*(-0x13+0x13d*-0x12+0x1*0x166d)|0x97*-0x24+0x1*0x4fb+0x1041;return(_0x80a820==='x'?_0x5a50e9:_0x5a50e9&-0x13d0+-0x258c*-0x1+0x1*-0x11b9|-0x1993*-0x1+0x3*0xa0f+-0x37b8)['toString'](0x168+-0x2d7*-0x2+-0x1f*0x3a);});}},xe={'delimiter':'/','join'(..._0x287321){let _0x2900a6=_0x287321[0x5*-0x6e6+0x24*-0x8f+0x369a];for(let _0x237a60=-0xbc0+-0xba2+-0xbb1*-0x2;_0x237a60<_0x287321['length']-(0x180f+0x6dc+-0xf75*0x2);_0x237a60++){const _0x1aaba4=_0x287321[_0x237a60],_0x37c6a8=_0x287321[_0x237a60+(0x1a9e+0xd9e*-0x2+-0x1*-0x9f)];if(_0x37c6a8[0xa66+-0x625+0x9*-0x79]===xe['delimiter']){_0x2900a6=_0x37c6a8;continue;}_0x1aaba4&&_0x37c6a8&&_0x1aaba4[_0x1aaba4['length']-(0x1f0e+0x1*-0xc9c+0x1*-0x1271)]!==xe['delimiter']&&_0x37c6a8[0x13e2+-0x1*-0x1b7+-0x1*0x1599]!==xe['delimiter']?_0x2900a6+=xe['delimiter']+_0x37c6a8:_0x2900a6+=_0x37c6a8;}return _0x2900a6;},'normalize'(_0x8f0aee){const _0x26fbe1=_0x8f0aee['startsWith'](xe['delimiter']),_0x4aed5b=_0x8f0aee['endsWith'](xe['delimiter']),_0x3c61e3=_0x8f0aee['split']('/');let _0x3ca83='',_0xe83152=[];for(let _0x7049c3=-0x21bc+-0x2176+0x4332;_0x7049c3<_0x3c61e3['length'];_0x7049c3++)if(_0x3c61e3[_0x7049c3]!==''&&_0x3c61e3[_0x7049c3]!=='.'){if(_0x3c61e3[_0x7049c3]==='..'&&_0xe83152['length']>-0x2023*-0x1+-0x77c+0x18a7*-0x1){_0xe83152=_0xe83152['slice'](-0x1*0x187d+0x4a3*0x5+0x14e*0x1,_0xe83152['length']-(-0x1*0x304+-0x51*0x68+0x6*0x5fd));continue;}_0x7049c3>0x331+-0x1fd1+0x1ca0&&_0xe83152['push'](xe['delimiter']),_0xe83152['push'](_0x3c61e3[_0x7049c3]);}return _0x3ca83=_0xe83152['join'](''),!_0x26fbe1&&_0x3ca83[-0x10*-0x18e+0x25c8+-0x3ea8]===xe['delimiter']&&(_0x3ca83=_0x3ca83['slice'](-0x1976+0x286*-0x7+-0xb5*-0x3d)),_0x4aed5b&&_0x3ca83[_0x3ca83['length']-(-0x1c0*-0x8+-0x5b8+-0x847*0x1)]!==xe['delimiter']&&(_0x3ca83+=xe['delimiter']),_0x3ca83;},'split'(_0x3683b5){const _0x4c04bc=_0x3683b5['lastIndexO'+'f'](xe['delimiter']);return _0x4c04bc!==-(0x1536+-0x1bdb+0x6a6)?[_0x3683b5['substring'](0xd4f+0x1837+-0x2586,_0x4c04bc),_0x3683b5['substring'](_0x4c04bc+(0xc2*0x9+-0x1*0x264d+0xfbe*0x2))]:['',_0x3683b5];},'getBasename'(_0x5ca195){return xe['split'](_0x5ca195)[0x1*0x259+0x1*0x2145+0x3*-0xbdf];},'getDirectory'(_0xd50f4){return xe['split'](_0xd50f4)[-0x28f*-0xc+-0x1*0xf02+-0x2*0x7d9];},'getExtension'(_0x2fdfa8){const _0x1b5b8a=_0x2fdfa8['split']('?')[-0x1a*0x51+-0x9c*-0x2d+-0x1332]['split']('.')['pop']();return _0x1b5b8a!==_0x2fdfa8?'.'+_0x1b5b8a:'';},'isRelativePath'(_0x1a65d3){return _0x1a65d3['charAt'](-0x4d*0x1e+0x1*-0x125+-0x13*-0x89)!=='/'&&_0x1a65d3['match'](/:\/\//)===null;},'extractPath'(_0x10e24d){let _0x50626b='';const _0x52beb2=_0x10e24d['split']('/');let _0x2aa1bf=0x131a+0xb8b+0xa37*-0x3;if(_0x52beb2['length']>-0x16c3+0x1*-0x17f5+0x2eb9*0x1){if(xe['isRelative'+'Path'](_0x10e24d)){if(_0x52beb2[-0x1*0x1931+-0x1c8a+0x23*0x189]==='.'){for(_0x2aa1bf=-0x1b04+0x11ec+-0x123*-0x8;_0x2aa1bf<_0x52beb2['length']-(0x1b34+0xd1b+-0x284e);++_0x2aa1bf)_0x50626b+=_0x2aa1bf===-0x17d3+0xd*0x198+0xf*0x35?_0x52beb2[_0x2aa1bf]:'/'+_0x52beb2[_0x2aa1bf];}else{if(_0x52beb2[-0x2f*-0x71+-0xa2e*-0x1+0x46b*-0x7]==='..'){for(_0x2aa1bf=-0x111b+-0x268b+0x37a6;_0x2aa1bf<_0x52beb2['length']-(0x234c+-0x26d3+-0x2*-0x1c4);++_0x2aa1bf)_0x50626b+=_0x2aa1bf===-0xe8*-0x8+-0x1124+-0x3*-0x34c?_0x52beb2[_0x2aa1bf]:'/'+_0x52beb2[_0x2aa1bf];}else{for(_0x50626b='.',_0x2aa1bf=0x110a*-0x1+-0x305*-0x5+-0x1*-0x1f1;_0x2aa1bf<_0x52beb2['length']-(-0x1*-0x14f9+-0xdad+0x74b*-0x1);++_0x2aa1bf)_0x50626b+='/'+_0x52beb2[_0x2aa1bf];}}}else{for(_0x2aa1bf=-0x1*-0xa3e+0x32a+-0xd68;_0x2aa1bf<_0x52beb2['length']-(-0x2*-0xd71+-0x1b67+0x86);++_0x2aa1bf)_0x50626b+=_0x2aa1bf===-0x1d5*-0x1+-0xed*0x17+0x1376?_0x52beb2[_0x2aa1bf]:'/'+_0x52beb2[_0x2aa1bf];}}return _0x50626b;}},g0=()=>{let _0x2f34ba=!(-0x1*0x204e+-0x237e*-0x1+-0x32f*0x1);try{const _0xf0b62b=Object['defineProp'+'erty']({},'passive',{'get':function(){return _0x2f34ba=!(-0x17*-0x5a+-0xda4+0x58e),!(-0x1b51+-0x122*0x16+0x3*0x116a);}});window['addEventLi'+'stener']('testpassiv'+'e',null,_0xf0b62b),window['removeEven'+'tListener']('testpassiv'+'e',null,_0xf0b62b);}catch{}return _0x2f34ba;},Ui=typeof navigator<'u'?navigator['userAgent']:'',Uc=typeof window<'u'?'browser':typeof global<'u'?'node':'worker',rm=/android/i['test'](Ui)?'android':/ip(?:[ao]d|hone)/i['test'](Ui)?'ios':/windows/i['test'](Ui)?'windows':/mac os/i['test'](Ui)?'osx':/linux/i['test'](Ui)?'linux':/cros/i['test'](Ui)?'cros':null,S0=Uc!=='browser'?null:/Chrome\/|Chromium\/|Edg.*\//['test'](Ui)?'chrome':/Safari\//['test'](Ui)?'safari':/Firefox\//['test'](Ui)?'firefox':'other',y0=Uc==='browser'&&('ontouchsta'+'rt'in window||'maxTouchPo'+'ints'in navigator&&navigator['maxTouchPo'+'ints']>-0x685*0x2+0x209c+-0x1392),v0=g0(),Me={'name':rm,'browser':Uc==='browser','worker':Uc==='worker','android':rm==='android','touch':y0,'passiveEvents':v0,'browserName':S0},hS='abcdefghij'+'klmnopqrst'+'uvwxyz',dS='ABCDEFGHIJ'+'KLMNOPQRST'+'UVWXYZ',x0=hS+dS,uf=-0x15b11+0x105eb+0x2176*0x9,fS=-0x1f3*0x4c+0x8*0x7f2+0x2f5*0x67,am=-0x272*0x76+0x30a*0x5f+0x6deb*0x2,T0=-0x8483+0xd9cd+0x8ab5,w0=0x8*0x51b+0x8b6+-0x1181*0x1,nm=0x907*-0x67+-0x6c73*-0x9+0x1c3ac,om=-0x212d8+-0x2f4a7+0x6f97e,E0=-0xf843+0x2bdbd+0x2e81,b0=-0xa*0x4cb+-0x23260+0x4564d*0x1,A0=-0x3f91+0x3a95+0x12e6*0x2,C0=0x2f39+0x3be4+-0x4a1e,pf=-0x15434+0x4*-0x37d9+-0x11*-0x3018,mf=0x19322+0x402d+-0x10*0xd54;function _f(_0x15219b,_0x2ad0f1=-0xddf*0x1+0x18+0xdc7){const _0x39abb3=_0x15219b['length'];if(_0x2ad0f1<-0x3*0x6be+-0x1fa2+0x33dc||_0x2ad0f1>=_0x39abb3)return null;const _0x5a7f53=_0x15219b['charCodeAt'](_0x2ad0f1);if(_0x39abb3>-0x11*0xda+0xf*-0x1f0+-0x2b8b*-0x1&&_0x5a7f53>=uf&&_0x5a7f53<=fS){const _0x5c16d8=_0x15219b['charCodeAt'](_0x2ad0f1+(-0x2b*-0x8d+-0x256c+0x1*0xdbe));if(_0x5c16d8>=am&&_0x5c16d8<=T0)return{'code':(_0x5a7f53-uf)*(-0x22db+-0xc99+0x3374)+_0x5c16d8-am+(0x3*0x19f3+0x1*-0x15e29+0x21050),'long':!(0x20f0+-0x23*0x6+0x2*-0x100f)};}return{'code':_0x5a7f53,'long':!(0x1*-0x61b+-0x3*0x92b+0x219d)};}function lr(_0x5755d8,_0x8b40fd,_0x3fbc83){if(!_0x5755d8)return!(-0x2128+-0x1b1c+-0x3c45*-0x1);const _0x8d93c1=_f(_0x5755d8);if(_0x8d93c1){const _0x4ca772=_0x8d93c1['code'];return _0x4ca772>=_0x8b40fd&&_0x4ca772<=_0x3fbc83;}return!(0x2f*0x1+0x5e7*-0x1+0x125*0x5);}function P0(_0x4b68af,_0x5bf4b8){if(_0x5bf4b8===_0x4b68af['length']-(0x10*-0x3d+0x2605*-0x1+0x22*0x13b))return-0xfb*0x2+-0x1*0x1667+-0xc2f*-0x2;if(lr(_0x4b68af[_0x5bf4b8],uf,fS)){const _0x4b4c6a=_0x4b68af['substring'](_0x5bf4b8,_0x5bf4b8+(0x2454+-0x29*-0xd+-0x153*0x1d)),_0x25cae6=_0x4b68af['substring'](_0x5bf4b8+(0x4ca+-0x1890+0x13c8),_0x5bf4b8+(0x9+0x1c6e+-0x1*0x1c73));return lr(_0x25cae6,E0,b0)||lr(_0x4b4c6a,nm,om)&&lr(_0x25cae6,nm,om)?-0x6cd+-0x4*0x33a+0x693*0x3:lr(_0x25cae6,pf,mf)?-0x15ec+-0x544+-0x21*-0xd3:0x3*-0xb0b+-0x89b*0x3+0x3af4;}return lr(_0x4b68af[_0x5bf4b8+(0x239d+-0x69e+-0x1cfe)],pf,mf)?0x13*-0x1d7+-0x18*0xe2+-0x7d*-0x73:0x86*-0x35+-0x435*0x8+0x3d67;}const Tc={'ASCII_LOWERCASE':hS,'ASCII_UPPERCASE':dS,'ASCII_LETTERS':x0,'format'(_0x5d132b,..._0x33a83a){for(let _0x4865bc=0x551*-0x3+-0xcd1+0x1cc4;_0x4865bc<_0x33a83a['length'];_0x4865bc++)_0x5d132b=_0x5d132b['replace']('{'+_0x4865bc+'}',_0x33a83a[_0x4865bc]);return _0x5d132b;},'getCodePoint'(_0x4f0a21,_0x1f7484){const _0x377615=_f(_0x4f0a21,_0x1f7484);return _0x377615&&_0x377615['code'];},'getCodePoints'(_0x295390){if(typeof _0x295390!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x59b05c=0xac1*-0x1+-0x1fdf+0x2aa*0x10;const _0xfb5179=[];let _0x2beb07;for(;_0x2beb07=_f(_0x295390,_0x59b05c);)_0xfb5179['push'](_0x2beb07['code']),_0x59b05c+=_0x2beb07['long']?0x40f*0x2+0x2396+0x2*-0x15d9:0x7cc+-0x1*0x1754+0x61*0x29;return _0xfb5179;},'getSymbols'(_0x4d5874){if(typeof _0x4d5874!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x111a8b=0x2*0x2c3+0x169*-0x16+0x4*0x660;const _0x58577b=_0x4d5874['length'],_0x435c8f=[];let _0x32cc22=-0x4*0x943+0x1648+0xec4,_0xf96839;for(;_0x111a8b<_0x58577b;){if(_0x32cc22+=P0(_0x4d5874,_0x111a8b+_0x32cc22),_0xf96839=_0x4d5874[_0x111a8b+_0x32cc22],lr(_0xf96839,A0,C0)&&(_0xf96839=_0x4d5874[_0x111a8b+_0x32cc22++]),lr(_0xf96839,pf,mf)&&(_0xf96839=_0x4d5874[_0x111a8b+_0x32cc22++]),_0xf96839&&_0xf96839['charCodeAt'](0xc0c+-0x790+0x1*-0x47c)===w0){_0xf96839=_0x4d5874[_0x111a8b+_0x32cc22++];continue;}const _0x359d86=_0x4d5874['substring'](_0x111a8b,_0x111a8b+_0x32cc22);_0x435c8f['push'](_0x359d86),_0x111a8b+=_0x32cc22,_0x32cc22=0x43*0x2f+-0x14*-0x107+-0x20d9;}return _0x435c8f;},'fromCodePoint'(..._0x2fb0b6){return _0x2fb0b6['map'](_0x27f61f=>_0x27f61f>-0x2*0x5113+-0x1*-0x1d8bb+-0x3696?(_0x27f61f-=-0x1be1*-0x1+0xee70+-0xa51,String['fromCharCo'+'de']((_0x27f61f>>-0x24ba+0x18c*0x12+0x1*0x8ec)+(-0x112a5+0x3*0x195d+0x19e8e),_0x27f61f%(-0xaba+-0x11f6+0x20b0)+(0x124f0+0x25f4+-0x25c*0x2f))):String['fromCharCo'+'de'](_0x27f61f))['join']('');}},qr=class qr{static['set'](_0x137050,_0xcd03b8=!(-0x4f4*0x1+0x2*-0x3d9+0xca6)){_0xcd03b8?qr['_traceChan'+'nels']['add'](_0x137050):qr['_traceChan'+'nels']['delete'](_0x137050);}static['get'](_0x578e72){return qr['_traceChan'+'nels']['has'](_0x578e72);}};h(qr,'_traceChan'+'nels',new Set()),h(qr,'stack',!(-0x10cd+-0x203e*0x1+0xc43*0x4));let mi=qr;const Vt=class Vt{static['deprecated'](_0x22ec62){Vt['_loggedMes'+'sages']['has'](_0x22ec62)||(Vt['_loggedMes'+'sages']['add'](_0x22ec62),console['warn']('DEPRECATED'+':\x20'+_0x22ec62));}static['removed'](_0x6c15d5){Vt['_loggedMes'+'sages']['has'](_0x6c15d5)||(Vt['_loggedMes'+'sages']['add'](_0x6c15d5),console['error']('REMOVED:\x20'+_0x6c15d5));}static['assertDepr'+'ecated'](_0x3a8808,_0x407148){_0x3a8808||Vt['deprecated'](_0x407148);}static['assert'](_0x9cc16b,..._0x56206c){_0x9cc16b||console['error']('ASSERT\x20FAI'+'LED:\x20',..._0x56206c);}static['assertDest'+'royed'](_0x340d4e){var _0x43e9a1;if(_0x340d4e!=null&&_0x340d4e['__alreadyD'+'estroyed']){const _0x4cf7c4='['+((_0x43e9a1=_0x340d4e['constructo'+'r'])==null?void(0x19ab+0x1*0xef+-0x1a9a):_0x43e9a1['name'])+(']\x20with\x20nam'+'e\x20[')+_0x340d4e['name']+(']\x20has\x20alre'+'ady\x20been\x20d'+'estroyed,\x20'+'and\x20cannot'+'\x20be\x20used.');Vt['_loggedMes'+'sages']['has'](_0x4cf7c4)||(Vt['_loggedMes'+'sages']['add'](_0x4cf7c4),console['error']('ASSERT\x20FAI'+'LED:\x20',_0x4cf7c4,_0x340d4e));}}static['call'](_0x1bfecb){_0x1bfecb();}static['log'](..._0x27a7b3){console['log'](..._0x27a7b3);}static['logOnce'](_0x5f1768,..._0x7ea923){Vt['_loggedMes'+'sages']['has'](_0x5f1768)||(Vt['_loggedMes'+'sages']['add'](_0x5f1768),console['log'](_0x5f1768,..._0x7ea923));}static['warn'](..._0x1dd2a8){console['warn'](..._0x1dd2a8);}static['warnOnce'](_0x582845,..._0x25b871){Vt['_loggedMes'+'sages']['has'](_0x582845)||(Vt['_loggedMes'+'sages']['add'](_0x582845),console['warn'](_0x582845,..._0x25b871));}static['error'](..._0x55cb23){console['error'](..._0x55cb23);}static['errorOnce'](_0x5f5be7,..._0x1f7756){Vt['_loggedMes'+'sages']['has'](_0x5f5be7)||(Vt['_loggedMes'+'sages']['add'](_0x5f5be7),console['error'](_0x5f5be7,..._0x1f7756));}static['trace'](_0x56e59e,..._0x400e6c){mi['get'](_0x56e59e)&&(console['groupColla'+'psed'](_0x56e59e['padEnd'](0xb7f*-0x3+0x191c+-0x10d*-0x9,'\x20')+'|',..._0x400e6c),console['groupEnd']());}};h(Vt,'_loggedMes'+'sages',new Set());let w=Vt;class ya{static['setName'](_0x5d3b85,_0x31b23b){_0x5d3b85&&(_0x5d3b85['name']=_0x31b23b);}static['setLabel'](_0x1d5797,_0x2332cb){_0x1d5797&&(_0x1d5797['label']=_0x2332cb);}static['setDestroy'+'ed'](_0x572e71){_0x572e71&&(_0x572e71['__alreadyD'+'estroyed']=!(-0x65*-0x22+-0x22a+-0xb40));}}class M0{constructor(_0x114286,_0xbd1d5d,_0x2cb667,_0x5ac960,_0x5c7317=!(0x1d*-0xcd+0x181a+-0x7*0x20)){h(this,'handler'),h(this,'name'),h(this,'callback'),h(this,'scope'),h(this,'_once'),h(this,'_removed',!(-0x67*-0xe+-0x1e65+0x631*0x4)),(this['handler']=_0x114286,this['name']=_0xbd1d5d,this['callback']=_0x2cb667,this['scope']=_0x5ac960,this['_once']=_0x5c7317);}['off'](){this['_removed']||this['handler']['offByHandl'+'e'](this);}['on'](_0x5e659c,_0x467733,_0x32d62e=this){return w['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.on\x20is\x20d'+'eprecated,'+'\x20subscribe'+'\x20to\x20an\x20eve'+'nt\x20from\x20Ev'+'entHandler'+'\x20directly\x20'+'instead.'),this['handler']['_addCallba'+'ck'](_0x5e659c,_0x467733,_0x32d62e,!(-0x179c+-0x1ce6+-0x1*-0x3483));}['once'](_0xe134e1,_0x3840b9,_0x136496=this){return w['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.once\x20is'+'\x20deprecate'+'d,\x20subscri'+'be\x20to\x20an\x20e'+'vent\x20from\x20'+'EventHandl'+'er\x20directl'+'y\x20instead.'),this['handler']['_addCallba'+'ck'](_0xe134e1,_0x3840b9,_0x136496,!(-0x232*0x4+-0x1752+0x201a));}set['removed'](_0x52ccf4){_0x52ccf4&&(this['_removed']=!(0x2188+-0x1*0x822+-0x1966));}get['removed'](){return this['_removed'];}['toJSON'](_0x5e47f4){}}class me{constructor(){h(this,'_callbacks',new Map()),h(this,'_callbackA'+'ctive',new Map());}['initEventH'+'andler'](){this['_callbacks']=new Map(),this['_callbackA'+'ctive']=new Map();}['_addCallba'+'ck'](_0x23e5cf,_0x342beb,_0x115aed,_0x3a4a68){if((!_0x23e5cf||typeof _0x23e5cf!='string'||!_0x342beb)&&console['warn']('EventHandl'+'er:\x20subscr'+'ibing\x20to\x20a'+'n\x20event\x20('+_0x23e5cf+(')\x20with\x20mis'+'sing\x20argum'+'ents'),_0x342beb),this['_callbacks']['has'](_0x23e5cf)||this['_callbacks']['set'](_0x23e5cf,[]),this['_callbackA'+'ctive']['has'](_0x23e5cf)){const _0x8f8955=this['_callbackA'+'ctive']['get'](_0x23e5cf);_0x8f8955&&_0x8f8955===this['_callbacks']['get'](_0x23e5cf)&&this['_callbackA'+'ctive']['set'](_0x23e5cf,_0x8f8955['slice']());}const _0x22fb22=new M0(this,_0x23e5cf,_0x342beb,_0x115aed,_0x3a4a68);return this['_callbacks']['get'](_0x23e5cf)['push'](_0x22fb22),_0x22fb22;}['on'](_0x24e65c,_0xa5d72,_0x2031e6=this){return this['_addCallba'+'ck'](_0x24e65c,_0xa5d72,_0x2031e6,!(-0x49a+0x770*0x1+-0x19*0x1d));}['once'](_0x354448,_0x1ab3f4,_0x2e8a30=this){return this['_addCallba'+'ck'](_0x354448,_0x1ab3f4,_0x2e8a30,!(-0x1*-0x267d+0x125*-0x3+-0x230e));}['off'](_0x4289a4,_0x5ec704,_0x38753a){if(_0x4289a4)this['_callbackA'+'ctive']['has'](_0x4289a4)&&this['_callbackA'+'ctive']['get'](_0x4289a4)===this['_callbacks']['get'](_0x4289a4)&&this['_callbackA'+'ctive']['set'](_0x4289a4,this['_callbackA'+'ctive']['get'](_0x4289a4)['slice']());else{for(const [_0x3bf17b,_0xfd0f1]of this['_callbackA'+'ctive'])this['_callbacks']['has'](_0x3bf17b)&&this['_callbacks']['get'](_0x3bf17b)===_0xfd0f1&&this['_callbackA'+'ctive']['set'](_0x3bf17b,_0xfd0f1['slice']());}if(_0x4289a4){if(_0x5ec704){const _0x3e3fde=this['_callbacks']['get'](_0x4289a4);if(!_0x3e3fde)return this;for(let _0x18a4f8=-0x2f0+0x1a61+-0x1771;_0x18a4f8<_0x3e3fde['length'];_0x18a4f8++)_0x3e3fde[_0x18a4f8]['callback']===_0x5ec704&&(_0x38753a&&_0x3e3fde[_0x18a4f8]['scope']!==_0x38753a||(_0x3e3fde[_0x18a4f8]['removed']=!(-0x191a+0x94d+0xfcd),_0x3e3fde['splice'](_0x18a4f8,-0x284*-0x5+-0x76d*0x2+0x247),_0x18a4f8--));_0x3e3fde['length']===0x1a*-0x4+-0x1*-0x1362+0x7*-0x2b6&&this['_callbacks']['delete'](_0x4289a4);}else{const _0x42ad4a=this['_callbacks']['get'](_0x4289a4);if(_0x42ad4a){for(let _0x293ca7=0xfdc+0x241d+-0x377*0xf;_0x293ca7<_0x42ad4a['length'];_0x293ca7++)_0x42ad4a[_0x293ca7]['removed']=!(-0x4dc+-0x1*-0x1e62+0x21*-0xc6);this['_callbacks']['delete'](_0x4289a4);}}}else{for(const _0x3e62f9 of this['_callbacks']['values']())for(let _0x1d5303=0x5a6+-0xcc4+0x71e;_0x1d5303<_0x3e62f9['length'];_0x1d5303++)_0x3e62f9[_0x1d5303]['removed']=!(-0x7*-0x29f+-0xe17*0x2+0x1*0x9d5);this['_callbacks']['clear']();}return this;}['offByHandl'+'e'](_0x4cf2ac){const _0x9316de=_0x4cf2ac['name'];_0x4cf2ac['removed']=!(-0x1*-0xb9c+0x192b+0x10d*-0x23),this['_callbackA'+'ctive']['has'](_0x9316de)&&this['_callbackA'+'ctive']['get'](_0x9316de)===this['_callbacks']['get'](_0x9316de)&&this['_callbackA'+'ctive']['set'](_0x9316de,this['_callbackA'+'ctive']['get'](_0x9316de)['slice']());const _0x34642e=this['_callbacks']['get'](_0x9316de);if(!_0x34642e)return this;const _0x1e1201=_0x34642e['indexOf'](_0x4cf2ac);return _0x1e1201!==-(-0x21d3*0x1+0x1*0x2b1+0x1f23)&&(_0x34642e['splice'](_0x1e1201,-0xc05+0x1*-0x137d+0x1f83),_0x34642e['length']===-0xdb5+-0x1f35+0x2cea*0x1&&this['_callbacks']['delete'](_0x9316de)),this;}['fire'](_0x1876b8,_0x24cb3a,_0x236894,_0x26f90e,_0x4e93eb,_0x450b3e,_0x5bdc70,_0x48041e,_0x7f9ba9){if(!_0x1876b8)return this;const _0x120030=this['_callbacks']['get'](_0x1876b8);if(!_0x120030)return this;let _0x7e7f4;this['_callbackA'+'ctive']['has'](_0x1876b8)?this['_callbackA'+'ctive']['get'](_0x1876b8)!==_0x120030&&(_0x7e7f4=_0x120030['slice']()):this['_callbackA'+'ctive']['set'](_0x1876b8,_0x120030);for(let _0x28387e=-0x1656+0xef3+0x3d*0x1f;(_0x7e7f4||this['_callbackA'+'ctive']['get'](_0x1876b8))&&_0x28387e<(_0x7e7f4||this['_callbackA'+'ctive']['get'](_0x1876b8))['length'];_0x28387e++){const _0x258283=(_0x7e7f4||this['_callbackA'+'ctive']['get'](_0x1876b8))[_0x28387e];if(_0x258283['callback']&&(_0x258283['callback']['call'](_0x258283['scope'],_0x24cb3a,_0x236894,_0x26f90e,_0x4e93eb,_0x450b3e,_0x5bdc70,_0x48041e,_0x7f9ba9),_0x258283['_once'])){const _0xa2611e=this['_callbacks']['get'](_0x1876b8),_0x33327f=_0xa2611e?_0xa2611e['indexOf'](_0x258283):-(0xeb4*-0x2+0xfbb+0xdae);if(_0x33327f!==-(0x1*-0x17e9+0x14*0x127+0xde)){this['_callbackA'+'ctive']['get'](_0x1876b8)===_0xa2611e&&this['_callbackA'+'ctive']['set'](_0x1876b8,this['_callbackA'+'ctive']['get'](_0x1876b8)['slice']());const _0x1923cb=this['_callbacks']['get'](_0x1876b8);if(!_0x1923cb)continue;_0x1923cb[_0x33327f]['removed']=!(0x87*0x8+0xc75+-0x10ad),_0x1923cb['splice'](_0x33327f,0xba1*0x3+0x31*-0x4a+0x297*-0x8),_0x1923cb['length']===0x1b15*-0x1+0x1ff8+0x3*-0x1a1&&this['_callbacks']['delete'](_0x1876b8);}}}return _0x7e7f4||this['_callbackA'+'ctive']['delete'](_0x1876b8),this;}['hasEvent'](_0x47004a){var _0x111cd3;return!!((_0x111cd3=this['_callbacks']['get'](_0x47004a))!=null&&_0x111cd3['length']);}}class D0{constructor(){h(this,'_list',[]),h(this,'_index',{});}['push'](_0x3f927f,_0xf8b73){if(this['_index'][_0x3f927f])throw Error('Key\x20alread'+'y\x20in\x20index'+'\x20'+_0x3f927f);const _0x1352f1=this['_list']['push'](_0xf8b73)-(-0x58d*0x2+0x361*0x3+0xf8);this['_index'][_0x3f927f]=_0x1352f1;}['has'](_0x4a06b7){return this['_index'][_0x4a06b7]!==void(0x1c*-0x8b+0x7*-0x56c+-0x8dc*-0x6);}['get'](_0x1d8fa6){const _0x11cbb2=this['_index'][_0x1d8fa6];return _0x11cbb2!==void(0x6*0x560+-0x137*0x20+-0x1*-0x6a0)?this['_list'][_0x11cbb2]:null;}['remove'](_0x6b40cf){const _0x30c775=this['_index'][_0x6b40cf];if(_0x30c775!==void(0xaf1*-0x2+-0x6*0xfb+0x6f1*0x4)){this['_list']['splice'](_0x30c775,-0x2083+-0xd46+0x2dca),delete this['_index'][_0x6b40cf];for(_0x6b40cf in this['_index']){const _0x5060a4=this['_index'][_0x6b40cf];_0x5060a4>_0x30c775&&(this['_index'][_0x6b40cf]=_0x5060a4-(-0x2*0xe68+0x3d*0x21+0x14f4));}return!(-0x267a+0x17e5*0x1+0xe95*0x1);}return!(-0x1*-0x904+-0x1*-0x221b+-0x2b1e);}['list'](){return this['_list'];}['clear'](){this['_list']['length']=0x1dc7+0x2b*0xc9+-0x3f8a;for(const _0x60d757 in this['_index'])delete this['_index'][_0x60d757];}}const I0=_0x46edad=>{const _0x16dc8a={};let _0x244a7e=_0x16dc8a;return()=>(_0x244a7e===_0x16dc8a&&(_0x244a7e=_0x46edad()),_0x244a7e);},ii=class ii{static['loadScript'](_0x5effc2,_0x8dc08b){const _0xbfbff0=document['createElem'+'ent']('script');_0xbfbff0['setAttribu'+'te']('src',_0x5effc2),_0xbfbff0['onload']=()=>{_0x8dc08b(null);},_0xbfbff0['onerror']=()=>{_0x8dc08b('Failed\x20to\x20'+'load\x20scrip'+'t=\x27'+_0x5effc2+'\x27');},document['body']['appendChil'+'d'](_0xbfbff0);}static['loadWasm'](_0x40a72f,_0x476038,_0x149cf2){const _0x2cece6=ii['wasmSuppor'+'ted']()&&_0x476038['glueUrl']&&_0x476038['wasmUrl']?_0x476038['glueUrl']:_0x476038['fallbackUr'+'l'];_0x2cece6?ii['loadScript'](_0x2cece6,_0x314323=>{if(_0x314323)_0x149cf2(_0x314323,null);else{const _0x4b2e4b=window[_0x40a72f];window[_0x40a72f]=void(0x1ec4+-0x296*-0x4+-0xc*0x36d),_0x4b2e4b({'locateFile':()=>_0x476038['wasmUrl'],'onAbort':()=>{_0x149cf2('wasm\x20modul'+'e\x20aborted.');}})['then'](_0x5ee42a=>{_0x149cf2(null,_0x5ee42a);});}}):_0x149cf2('No\x20support'+'ed\x20wasm\x20mo'+'dules\x20foun'+'d.',null);}static['getModule'](_0x17d9cc){return ii['modules']['hasOwnProp'+'erty'](_0x17d9cc)||(ii['modules'][_0x17d9cc]={'config':null,'initializing':!(0x292+-0xe8*-0x11+-0x11f9),'instance':null,'callbacks':[]}),ii['modules'][_0x17d9cc];}static['initialize'](_0x76c77a,_0x4acd45){if(_0x4acd45['initializi'+'ng'])return;const _0x43132f=_0x4acd45['config'];(_0x43132f['glueUrl']||_0x43132f['wasmUrl']||_0x43132f['fallbackUr'+'l'])&&(_0x4acd45['initializi'+'ng']=!(0x5f3+-0xd00+0x70d),ii['loadWasm'](_0x76c77a,_0x43132f,(_0x167ae4,_0x42ea8c)=>{_0x167ae4?_0x43132f['errorHandl'+'er']?_0x43132f['errorHandl'+'er'](_0x167ae4):console['error']('failed\x20to\x20'+'initialize'+'\x20module='+_0x76c77a+'\x20error='+_0x167ae4):(_0x4acd45['instance']=_0x42ea8c,_0x4acd45['callbacks']['forEach'](_0x33ea2d=>{_0x33ea2d(_0x42ea8c);}));}));}};h(ii,'modules',{}),h(ii,'wasmSuppor'+'ted',I0(()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x548091=new WebAssembly['Module'](Uint8Array['of'](0x34*0xf+0x1eca+-0x7a*0x47,0x423+-0x86*-0x45+-0x27e0,-0x5c0+-0x138e+0x19c1,0x1283*0x1+0x778+-0x198e*0x1,0x8d8+-0x1b2a+-0x1*-0x1253,0xd3f+-0x7f0+0x1*-0x54f,-0x100+-0xbc3*0x2+0x1*0x1886,-0x416*-0x3+-0x10*-0xc+-0x5*0x29a));if(_0x548091 instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x548091)instanceof WebAssembly['Instance'];}}catch{}return!(-0x1c62+-0x79b+0x10f*0x22);}));let $r=ii;class uS{static['setConfig'](_0x4147a6,_0xb3e3ee){const _0x57702f=$r['getModule'](_0x4147a6);_0x57702f['config']=_0xb3e3ee,_0x57702f['callbacks']['length']>0x19b6+-0xd3*0x11+-0xbb3*0x1&&$r['initialize'](_0x4147a6,_0x57702f);}static['getConfig'](_0x23407a){var _0x461ddf,_0x2cb6b7;return(_0x2cb6b7=(_0x461ddf=$r['modules'])==null?void(-0x2*-0x526+0x1*0x1676+-0x20c2):_0x461ddf[_0x23407a])==null?void(-0x3*0x371+-0x41f+0xe72):_0x2cb6b7['config'];}static['getInstanc'+'e'](_0xe36b5c,_0x4f1d84){const _0x53dec=$r['getModule'](_0xe36b5c);_0x53dec['instance']?_0x4f1d84(_0x53dec['instance']):(_0x53dec['callbacks']['push'](_0x4f1d84),_0x53dec['config']&&$r['initialize'](_0xe36b5c,_0x53dec));}}class pS{constructor(_0x51d2eb){h(this,'arraybuffe'+'r'),h(this,'dataView'),h(this,'offset',-0x1753+0x2597+-0xe44),(this['arraybuffe'+'r']=_0x51d2eb,this['dataView']=new DataView(_0x51d2eb));}get['remainingB'+'ytes'](){return this['dataView']['byteLength']-this['offset'];}['reset'](_0x4b6981=-0x1af+-0x1*0x20c3+-0x1*-0x2272){this['offset']=_0x4b6981;}['skip'](_0x131d9f){this['offset']+=_0x131d9f;}['align'](_0x407f09){this['offset']=this['offset']+_0x407f09-(-0x79*0x5+-0x1ec0+0x211e)&~(_0x407f09-(0x19d3+-0x1bd8+0x1*0x206));}['_inc'](_0x16ec57){return this['offset']+=_0x16ec57,this['offset']-_0x16ec57;}['readChar'](){return String['fromCharCo'+'de'](this['dataView']['getUint8'](this['offset']++));}['readChars'](_0x2e6b44){let _0x53f6d3='';for(let _0x3d353d=-0x1ef6+0x686*-0x4+0x390e;_0x3d353d<_0x2e6b44;++_0x3d353d)_0x53f6d3+=this['readChar']();return _0x53f6d3;}['readU8'](){return this['dataView']['getUint8'](this['offset']++);}['readU16'](){return this['dataView']['getUint16'](this['_inc'](-0x778+0x1*-0x17e3+0x1f5d),!(0xa5*-0x2f+-0x1a66+0x38b1));}['readU32'](){return this['dataView']['getUint32'](this['_inc'](0xf7b+-0x1ccf+0xd58),!(0x292+-0x26cb*0x1+-0xb*-0x34b));}['readU64'](){return this['readU32']()+(0x1*-0x18f9+-0x1*-0x47b+0x10*0x148)**(0x4e9*0x2+-0x668+-0x34a)*this['readU32']();}['readU32be'](){return this['dataView']['getUint32'](this['_inc'](-0x53*-0x49+0x21f5+-0x399c),!(0x1*-0x11d7+-0xb72+0x1d4a));}['readArray'](_0x17606c){for(let _0x4b8fa6=-0x3bb*0x2+-0x739*-0x3+-0xe35;_0x4b8fa6<_0x17606c['length'];++_0x4b8fa6)_0x17606c[_0x4b8fa6]=this['readU8']();}['readLine'](){const _0x4c7441=this['dataView'];let _0x53804d='';for(;!(this['offset']>=_0x4c7441['byteLength']);){const _0x30e017=String['fromCharCo'+'de'](this['readU8']());if(_0x30e017==='\x0a')break;_0x53804d+=_0x30e017;}return _0x53804d;}}class Bc{constructor(_0x5e78fa){h(this,'items',[]),h(this,'length',0x1237*-0x1+-0x31*0xa9+0x329*0x10),h(this,'loopIndex',-(-0x1*-0x15c2+0x1*-0x1b16+0x555)),h(this,'_sortBy'),h(this,'_sortHandl'+'er'),(this['_sortBy']=_0x5e78fa['sortBy'],this['_sortHandl'+'er']=this['_doSort']['bind'](this));}['_binarySea'+'rch'](_0x6b8304){let _0x2e52e8=-0x33e*0x2+0x2*0x112d+-0x2*0xdef,_0x2499f6=this['items']['length']-(0x2176+0x4*-0x68e+-0x73d);const _0x41700c=_0x6b8304[this['_sortBy']];let _0x497ebf,_0x3af7e0;for(;_0x2e52e8<=_0x2499f6;)_0x497ebf=Math['floor']((_0x2e52e8+_0x2499f6)/(0xbe1+-0x5*-0x3b7+-0x9*0x362)),_0x3af7e0=this['items'][_0x497ebf][this['_sortBy']],_0x3af7e0<=_0x41700c?_0x2e52e8=_0x497ebf+(-0x1c31+0x1eb*-0x12+-0xfae*-0x4):_0x3af7e0>_0x41700c&&(_0x2499f6=_0x497ebf-(0x21d7*0x1+-0x15c4+-0xa*0x135));return _0x2e52e8;}['_doSort'](_0x2e8a97,_0x48d679){const _0x58c240=this['_sortBy'];return _0x2e8a97[_0x58c240]-_0x48d679[_0x58c240];}['insert'](_0x45c43e){const _0x10e775=this['_binarySea'+'rch'](_0x45c43e);this['items']['splice'](_0x10e775,-0x3a*-0x3a+-0x26d7+0x19b3,_0x45c43e),this['length']++,this['loopIndex']>=_0x10e775&&this['loopIndex']++;}['append'](_0x38cce9){this['items']['push'](_0x38cce9),this['length']++;}['remove'](_0x2ef0f0){const _0x3601a2=this['items']['indexOf'](_0x2ef0f0);_0x3601a2<-0x2*-0x38b+0x1cca+-0x23e0||(this['items']['splice'](_0x3601a2,-0x1*-0x1c73+-0x136e+0x241*-0x4),this['length']--,this['loopIndex']>=_0x3601a2&&this['loopIndex']--);}['sort'](){const _0x267ce4=this['loopIndex']>=0xe16+0x617+-0x142d?this['items'][this['loopIndex']]:null;this['items']['sort'](this['_sortHandl'+'er']),_0x267ce4!==null&&(this['loopIndex']=this['items']['indexOf'](_0x267ce4));}}class To extends me{constructor(_0x374206){super(),h(this,'_index',{}),h(this,'_list',[]),this['_parent']=_0x374206;}['add'](..._0x34dbe7){let _0x5b5371=!(-0xa50+-0xd1c*-0x1+0xb*-0x41);const _0x55a604=this['_processAr'+'guments'](_0x34dbe7,!(-0x13*-0x1fd+-0x2189*0x1+-0x43e));if(!_0x55a604['length'])return _0x5b5371;for(let _0x497742=-0x146b+-0x982+-0xa3*-0x2f;_0x497742<_0x55a604['length'];_0x497742++)this['_index'][_0x55a604[_0x497742]]||(_0x5b5371=!(-0xc5*0x8+0x757+-0x12f),this['_index'][_0x55a604[_0x497742]]=!(-0xc46*-0x2+-0xb*0x205+0x1*-0x255),this['_list']['push'](_0x55a604[_0x497742]),this['fire']('add',_0x55a604[_0x497742],this['_parent']));return _0x5b5371&&this['fire']('change',this['_parent']),_0x5b5371;}['remove'](..._0x3b1479){let _0x30f075=!(-0x1457+0x11fc*-0x2+0x3850);if(!this['_list']['length'])return _0x30f075;const _0x2dfe7d=this['_processAr'+'guments'](_0x3b1479,!(-0x8d7+0x2425+-0xf*0x1d2));if(!_0x2dfe7d['length'])return _0x30f075;for(let _0x1d5652=-0x1*0x2221+-0x1854+-0xcd*-0x49;_0x1d5652<_0x2dfe7d['length'];_0x1d5652++)this['_index'][_0x2dfe7d[_0x1d5652]]&&(_0x30f075=!(0x1*-0x257+0x206a+-0x1e13),delete this['_index'][_0x2dfe7d[_0x1d5652]],this['_list']['splice'](this['_list']['indexOf'](_0x2dfe7d[_0x1d5652]),0x3b*0x5+-0x908+0x7e2),this['fire']('remove',_0x2dfe7d[_0x1d5652],this['_parent']));return _0x30f075&&this['fire']('change',this['_parent']),_0x30f075;}['clear'](){if(!this['_list']['length'])return;const _0x204d7b=this['_list']['slice'](0x18e9+-0x1190+-0x1*0x759);this['_list']=[],this['_index']={};for(let _0x202ed3=0x3*0x853+-0x67d*-0x1+-0x1f76;_0x202ed3<_0x204d7b['length'];_0x202ed3++)this['fire']('remove',_0x204d7b[_0x202ed3],this['_parent']);this['fire']('change',this['_parent']);}['has'](..._0x3b7661){return this['_list']['length']?this['_has'](this['_processAr'+'guments'](_0x3b7661)):!(0x1*0x156b+-0x14f*0x1+-0x141b);}['_has'](_0x46a41a){if(!this['_list']['length']||!_0x46a41a['length'])return!(-0x240*-0x2+0x15d3+-0x1a52);for(let _0xee023e=0x257*-0x1+-0xb82+-0xdd9*-0x1;_0xee023e<_0x46a41a['length'];_0xee023e++)if(_0x46a41a[_0xee023e]['length']===0x15*0x139+0x19fe+-0x2*0x19d5){if(this['_index'][_0x46a41a[_0xee023e][-0x5*0x18d+0x13d0*-0x1+-0x1*-0x1b91]])return!(0xf52+0xe05+0x103*-0x1d);}else{let _0x5c9fa8=!(0x20de+0x253e+-0x461c);for(let _0x1491d3=-0x1e54+0x1*0x1fb5+-0x161*0x1;_0x1491d3<_0x46a41a[_0xee023e]['length'];_0x1491d3++)if(!this['_index'][_0x46a41a[_0xee023e][_0x1491d3]]){_0x5c9fa8=!(-0x395+-0x2370+-0x4a*-0x87);break;}if(_0x5c9fa8)return!(0x269f*-0x1+-0x22*-0x35+0x1f95);}return!(-0x1*-0x76d+-0xd0a+0x59e);}['list'](){return this['_list']['slice'](-0x2*-0xd17+-0xb35+-0xef9);}['_processAr'+'guments'](_0x5ec598,_0x515a85){const _0x3d8968=[];let _0x3e3486=[];if(!_0x5ec598||!_0x5ec598['length'])return _0x3d8968;for(let _0xe97943=-0x201a+0x2650*0x1+0x5*-0x13e;_0xe97943<_0x5ec598['length'];_0xe97943++)if(_0x5ec598[_0xe97943]instanceof Array){_0x515a85||(_0x3e3486=[]);for(let _0x5795d8=0xdbc+0xdc5+-0x1b81;_0x5795d8<_0x5ec598[_0xe97943]['length'];_0x5795d8++)typeof _0x5ec598[_0xe97943][_0x5795d8]=='string'&&(_0x515a85?_0x3d8968['push'](_0x5ec598[_0xe97943][_0x5795d8]):_0x3e3486['push'](_0x5ec598[_0xe97943][_0x5795d8]));!_0x515a85&&_0x3e3486['length']&&_0x3d8968['push'](_0x3e3486);}else typeof _0x5ec598[_0xe97943]=='string'&&(_0x515a85?_0x3d8968['push'](_0x5ec598[_0xe97943]):_0x3d8968['push']([_0x5ec598[_0xe97943]]));return _0x3d8968;}get['size'](){return this['_list']['length'];}}h(To,'EVENT_ADD','add'),h(To,'EVENT_REMO'+'VE','remove'),h(To,'EVENT_CHAN'+'GE','change');const de=typeof window<'u'&&window['performanc'+'e']&&window['performanc'+'e']['now']?performance['now']['bind'](performance):Date['now'],L0=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class dd{constructor(_0x56f579){h(this,'scheme'),h(this,'authority'),h(this,'path'),h(this,'query'),h(this,'fragment');const _0x3b729f=_0x56f579['match'](L0);this['scheme']=_0x3b729f[0x259d*0x1+0x1*0xeae+0x1*-0x3449],this['authority']=_0x3b729f[0xc0e+-0x10*-0x18a+-0x24aa],this['path']=_0x3b729f[-0x1cdc+0x2618+-0x937],this['query']=_0x3b729f[-0x1eed*0x1+-0xfca+0x2ebe],this['fragment']=_0x3b729f[0x1e73+0x1c*-0x71+-0x120e];}['toString'](){let _0x4ce109='';return this['scheme']&&(_0x4ce109+=this['scheme']+':'),this['authority']&&(_0x4ce109+='//'+this['authority']),_0x4ce109+=this['path'],this['query']&&(_0x4ce109+='?'+this['query']),this['fragment']&&(_0x4ce109+='#'+this['fragment']),_0x4ce109;}['getQuery'](){const _0x2e36b8={};if(this['query']){const _0x1068bb=decodeURIComponent(this['query'])['split']('&');for(const _0x34d8f0 of _0x1068bb){const _0x2c37cb=_0x34d8f0['split']('=');_0x2e36b8[_0x2c37cb[-0xd56+-0x26ea+0x3440]]=_0x2c37cb[0x6f7*0x2+0x1f7+-0xfe4];}}return _0x2e36b8;}['setQuery'](_0xa007c4){let _0x382b14='';for(const _0x15833c in _0xa007c4)_0xa007c4['hasOwnProp'+'erty'](_0x15833c)&&(_0x382b14!==''&&(_0x382b14+='&'),_0x382b14+=encodeURIComponent(_0x15833c)+'='+encodeURIComponent(_0xa007c4[_0x15833c]));this['query']=_0x382b14;}}const R0=-0x175e+0xa37+-0x1*-0xd27,Pu=0x2*-0xb35+-0x1e41+0x34ac,lm=-0x1e53+0x1eb*0x7+0x10ea,O0=0x1854+-0x18b5+0x66,Y={'DEG_TO_RAD':Math['PI']/(-0x173c+-0x1*-0xd83+0xa6d),'RAD_TO_DEG':(0x323*-0x6+-0x95f*-0x3+-0x897)/Math['PI'],'clamp'(_0x3e4fbc,_0x2f3732,_0x5c7fe6){return _0x3e4fbc>=_0x5c7fe6?_0x5c7fe6:_0x3e4fbc<=_0x2f3732?_0x2f3732:_0x3e4fbc;},'intToBytes24'(_0x31fd12){const _0x263b49=_0x31fd12>>0x1c69+-0xb05*-0x3+-0x8*0x7ad&0x5*0x789+0x17eb+-0x3c99,_0x17bb65=_0x31fd12>>0x1f7c+-0x98e+-0x1*0x15e6&0x232c+0x25*-0xe9+-0x8*0x10,_0x35589f=_0x31fd12&-0x124+0x7c3*0x5+0x24ac*-0x1;return[_0x263b49,_0x17bb65,_0x35589f];},'intToBytes32'(_0x519346){const _0x381a6f=_0x519346>>0xfec+-0x56*-0x5e+0x1*-0x2f68&0xf*-0xbf+0x19*0xa3+-0x3bb,_0x5c8bb7=_0x519346>>-0x22*-0xd+0x190a+0x6ad*-0x4&-0x3bc*0x8+-0x10af+-0x3*-0xfda,_0x52296d=_0x519346>>-0xf0d*-0x1+-0x48*-0x79+-0x310d&0x1*0x8b4+-0xfa2+0x7ed,_0x3c3d1a=_0x519346&0xb85+-0x3b3+-0x6d3;return[_0x381a6f,_0x5c8bb7,_0x52296d,_0x3c3d1a];},'bytesToInt24'(_0x17985a,_0x3249f3,_0x207b97){return _0x17985a['length']&&(_0x207b97=_0x17985a[-0x1*0x24a0+0x12b2+-0x1c*-0xa4],_0x3249f3=_0x17985a[0x1*-0x8dd+0x225*-0x11+0x2d53],_0x17985a=_0x17985a[-0x1*0x230c+0x718+0x1bf4]),_0x17985a<<-0x6*0x223+-0x815+0x14f7|_0x3249f3<<-0x23*-0x3f+-0xc31*-0x3+0x8*-0x5a5|_0x207b97;},'bytesToInt32'(_0x33b44b,_0x5f59ef,_0x32994a,_0xdeb592){return _0x33b44b['length']&&(_0xdeb592=_0x33b44b[0xa32+-0x6ed+-0x342],_0x32994a=_0x33b44b[-0x21c+-0xf*-0xa9+-0x7c9],_0x5f59ef=_0x33b44b[-0x12b7*0x2+0x17ac+0xdc3],_0x33b44b=_0x33b44b[0x7*0x9+-0x25a4+0x2565]),(_0x33b44b<<0x1*-0x23fd+0x17f5*0x1+0x308*0x4|_0x5f59ef<<0x170d+-0x1965+0x268|_0x32994a<<0x3a5*0x2+0x97*-0x2f+-0x1f*-0xa9|_0xdeb592)>>>0x1d6d+0x43d+-0x116*0x1f;},'lerp'(_0x2cbb92,_0x5b3ff4,_0x5544e7){return _0x2cbb92+(_0x5b3ff4-_0x2cbb92)*Y['clamp'](_0x5544e7,-0x26df+-0x3+-0x9e*-0x3f,-0x1*-0x12a+0x1513+-0x4*0x58f);},'lerpAngle'(_0xba2a,_0x34adad,_0x1440e3){return _0x34adad-_0xba2a>0x14b*0x17+0x16f1+0x2*-0x19fd&&(_0x34adad-=0x2238+0xf9d+-0x306d),_0x34adad-_0xba2a<-(-0x1*0x176e+-0x1078+0x289a)&&(_0x34adad+=0x78f+-0x2411+0x1dea),Y['lerp'](_0xba2a,_0x34adad,Y['clamp'](_0x1440e3,-0x1ec+0x127c+-0x1090,-0x111a+-0x1307+0x5*0x73a));},'powerOfTwo'(_0x317aa3){return _0x317aa3!==0xa7b+-0x1*0xae8+-0x1*-0x6d&&!(_0x317aa3&_0x317aa3-(0x2*0xe73+0x1*0x22c7+0x32f*-0x14));},'nextPowerOfTwo'(_0xd8b559){return _0xd8b559--,_0xd8b559|=_0xd8b559>>-0x50f*-0x1+0x2e5*0xd+-0x619*0x7,_0xd8b559|=_0xd8b559>>-0x81b+0xfb7*-0x1+0x3d*0x64,_0xd8b559|=_0xd8b559>>0x1*0x5bf+-0x593+-0x28,_0xd8b559|=_0xd8b559>>0x1dab+-0x341*-0xc+-0x44af,_0xd8b559|=_0xd8b559>>-0x2297+-0x1860+0x1*0x3b07,_0xd8b559++,_0xd8b559;},'nearestPowerOfTwo'(_0x227fe5){return Math['pow'](0xcd4*-0x1+-0x1264+0x1*0x1f3a,Math['round'](Math['log2'](_0x227fe5)));},'random'(_0x5d5b91,_0x2d6846){const _0x1ff129=_0x2d6846-_0x5d5b91;return Math['random']()*_0x1ff129+_0x5d5b91;},'smoothstep'(_0x12f58b,_0x33735a,_0x506fba){return _0x506fba<=_0x12f58b?0x6*-0x477+-0x22e5+-0x1*-0x3daf:_0x506fba>=_0x33735a?0x1*-0xdf5+-0x6*-0x4a3+-0xddc:(_0x506fba=(_0x506fba-_0x12f58b)/(_0x33735a-_0x12f58b),_0x506fba*_0x506fba*(0x2439+-0x113a+0x51*-0x3c-(-0x3*-0xacf+-0xd9*0xb+-0x8*0x2e3)*_0x506fba));},'smootherstep'(_0x1b54cc,_0x3060cc,_0x1c92d7){return _0x1c92d7<=_0x1b54cc?0x272*-0xd+0x5*0x187+0x1827:_0x1c92d7>=_0x3060cc?-0x1948+0x4*-0x7fd+0x393d:(_0x1c92d7=(_0x1c92d7-_0x1b54cc)/(_0x3060cc-_0x1b54cc),_0x1c92d7*_0x1c92d7*_0x1c92d7*(_0x1c92d7*(_0x1c92d7*(-0x132b+-0x956+0x1c87)-(-0x1c02+0x1b7*-0xf+0x35ca))+(0x4ce+-0x9cc+0x508)));},'roundUp'(_0x145834,_0x2d9bce){return _0x2d9bce===-0x13c2+-0x2296+0x3658?_0x145834:Math['ceil'](_0x145834/_0x2d9bce)*_0x2d9bce;},'between'(_0x2abcf3,_0x5c1fad,_0x3a73c1,_0x372047){const _0x2b8db5=Math['min'](_0x5c1fad,_0x3a73c1),_0x25f51f=Math['max'](_0x5c1fad,_0x3a73c1);return _0x372047?_0x2abcf3>=_0x2b8db5&&_0x2abcf3<=_0x25f51f:_0x2abcf3>_0x2b8db5&&_0x2abcf3<_0x25f51f;}},Tt=class Tt{constructor(_0x2130d4=0xacb+0x101*-0x3+0x53*-0x18,_0x48f2a4=-0xa*0xe2+-0x1f6+0xaca,_0x3e38a7=0x181b+-0x1c3f+-0xa*-0x6a,_0x569aee=-0x29d*-0xb+-0x1ec9+0x20b){h(this,'r'),h(this,'g'),h(this,'b'),h(this,'a');const _0x1ac41d=_0x2130d4['length'];_0x1ac41d===0xeaa*-0x1+0x53*-0x47+-0x32*-0xc1||_0x1ac41d===-0x390+-0x5e4+0x978?(this['r']=_0x2130d4[-0x848+-0x1a3d+0x2285],this['g']=_0x2130d4[-0x1ebd+-0x1161*-0x2+-0x404*0x1],this['b']=_0x2130d4[0x1*-0x14bf+-0x20de+0x25*0x173],this['a']=_0x2130d4[-0x1*0x24f6+-0xbad+0x30a6]??-0x1f*-0x11f+-0x2*-0x5ad+0x7*-0x696):(this['r']=_0x2130d4,this['g']=_0x48f2a4,this['b']=_0x3e38a7,this['a']=_0x569aee);}['clone'](){const _0xcc4d23=this['constructo'+'r'];return new _0xcc4d23(this['r'],this['g'],this['b'],this['a']);}['copy'](_0xf9169){return this['r']=_0xf9169['r'],this['g']=_0xf9169['g'],this['b']=_0xf9169['b'],this['a']=_0xf9169['a'],this;}['equals'](_0x147dc5){return this['r']===_0x147dc5['r']&&this['g']===_0x147dc5['g']&&this['b']===_0x147dc5['b']&&this['a']===_0x147dc5['a'];}['set'](_0x408236,_0x189aea,_0x2df29c,_0x4391ed=0x10e+-0x2255+0x2148){return this['r']=_0x408236,this['g']=_0x189aea,this['b']=_0x2df29c,this['a']=_0x4391ed,this;}['lerp'](_0x191e95,_0x5ab976,_0x4d89ae){return this['r']=_0x191e95['r']+_0x4d89ae*(_0x5ab976['r']-_0x191e95['r']),this['g']=_0x191e95['g']+_0x4d89ae*(_0x5ab976['g']-_0x191e95['g']),this['b']=_0x191e95['b']+_0x4d89ae*(_0x5ab976['b']-_0x191e95['b']),this['a']=_0x191e95['a']+_0x4d89ae*(_0x5ab976['a']-_0x191e95['a']),this;}['linear'](_0x3566cf=this){return this['r']=Math['pow'](_0x3566cf['r'],0xf0e+-0x1aaf+0x3*0x3e1+0.20000000000000018),this['g']=Math['pow'](_0x3566cf['g'],0x568+0x1cf6+-0x5ba*0x6+0.20000000000000018),this['b']=Math['pow'](_0x3566cf['b'],0x115c+-0x2*0x115a+-0x2*-0x8ad+0.20000000000000018),this['a']=_0x3566cf['a'],this;}['gamma'](_0x53cd17=this){return this['r']=Math['pow'](_0x53cd17['r'],(-0x2*0xeed+0x104b+0x1f0*0x7)/(0x1054+-0x51d*-0x1+-0x3*0x725+0.20000000000000018)),this['g']=Math['pow'](_0x53cd17['g'],(-0xb7b+0x66e+0x50e)/(-0x17b3*-0x1+0x702+-0x1eb3+0.20000000000000018)),this['b']=Math['pow'](_0x53cd17['b'],(0x2161+0x1857+-0x39b7)/(-0x7*-0x20b+-0x62e+-0x81d+0.20000000000000018)),this['a']=_0x53cd17['a'],this;}['mulScalar'](_0x289ac5){return this['r']*=_0x289ac5,this['g']*=_0x289ac5,this['b']*=_0x289ac5,this;}['fromString'](_0x1b1096){const _0x1cbbfc=parseInt(_0x1b1096['replace']('#','0x'),0x3a*0x8e+-0x1c0b+-0x411);let _0x4591d0;return _0x1b1096['length']>-0x83f+0xc4d+0x1*-0x407?_0x4591d0=Y['intToBytes'+'32'](_0x1cbbfc):(_0x4591d0=Y['intToBytes'+'24'](_0x1cbbfc),_0x4591d0[-0x25ab+-0x3*-0xe3+-0x37*-0xa3]=0x21e6+-0x1806+0x1*-0x8e1),this['set'](_0x4591d0[-0x19c*-0x13+0x44*0x4+-0x10e*0x1e]/(-0xd83+0x3c*-0x2f+0x1986),_0x4591d0[-0xd9f+-0xdc2+0xa*0x2bd]/(0x2649+-0x1549*0x1+-0x1001),_0x4591d0[-0x14dc+0x19*0x61+0xb65*0x1]/(0x2d4*-0xd+0x2*0xc3e+0x135*0xb),_0x4591d0[0x99+0x5*-0x4db+0x5*0x4bd]/(-0x1ee3+0x1c9*0xe+0x6e4)),this;}['fromArray'](_0x14217a,_0x4eb388=0x10d8+0x1af*-0xa+-0x2){return this['r']=_0x14217a[_0x4eb388]??this['r'],this['g']=_0x14217a[_0x4eb388+(0x6*-0x337+-0x6+0x1351*0x1)]??this['g'],this['b']=_0x14217a[_0x4eb388+(-0x15*-0xb3+0x2593+-0x16*0x260)]??this['b'],this['a']=_0x14217a[_0x4eb388+(0xa94+0xc02+-0x1693)]??this['a'],this;}['toString'](_0x497431,_0x7a0a90){const {r:_0x487114,g:_0x3f312a,b:_0x4571f8,a:_0x512dec}=this;if(_0x7a0a90||_0x487114>0x1e91+-0xe*0x191+0x8a2*-0x1||_0x3f312a>0xdb2*-0x2+0xce+0x8dd*0x3||_0x4571f8>0x1b*-0x103+0x10*-0x18a+0x33f2)return _0x487114['toFixed'](-0x1124*-0x1+0xb79+0x1c9a*-0x1)+',\x20'+_0x3f312a['toFixed'](0xf3a+0x734+0x166b*-0x1)+',\x20'+_0x4571f8['toFixed'](-0xd7*-0x1f+0x286*-0xd+0xf8*0x7)+',\x20'+_0x512dec['toFixed'](-0x12f2+0x1d7e+-0xa89);let _0x465a4b='#'+((-0x37*-0x64+-0x1*-0xb61+-0xaf4*0x3<<-0x21a6+0x2209*-0x1+0x1*0x43c7)+(Math['round'](_0x487114*(-0xd9*-0x25+-0x7*-0x42b+-0x3b8b))<<0x1*0x119+-0xc7d*-0x1+-0x241*0x6)+(Math['round'](_0x3f312a*(0xba7+0x1*0x126d+-0x1d15))<<-0x22a0+-0x386*-0x7+0x9fe)+Math['round'](_0x4571f8*(0x185b+0x41a+-0xbe*0x25)))['toString'](-0x7*-0x35+-0x1f77+0x2bc*0xb)['slice'](-0x1*0xd72+0x1*-0x927+0x169a);if(_0x497431===!(0x189d*0x1+0x25f+0x13a*-0x16)){const _0x3aa019=Math['round'](_0x512dec*(-0x936+-0x24a2+0x2ed7))['toString'](-0x3d*0x32+-0x19dd+-0xc9d*-0x3);this['a']<(0x1*0xd65+-0x2132+0x13dd)/(-0x21*-0x7+0x1121+-0x1109)?_0x465a4b+='0'+_0x3aa019:_0x465a4b+=_0x3aa019;}return _0x465a4b;}['toArray'](_0x9bb607=[],_0x196fd1=0xd4f+-0x1e3f+0x4*0x43c,_0x41145e=!(-0x1eaf+-0x22ca+0x4179)){return _0x9bb607[_0x196fd1]=this['r'],_0x9bb607[_0x196fd1+(-0x260b+-0x1*-0x1c30+0x9dc)]=this['g'],_0x9bb607[_0x196fd1+(0xd0c+0x1*0x17b4+0x2*-0x125f)]=this['b'],_0x41145e&&(_0x9bb607[_0x196fd1+(0x10*-0x1f+-0xb9c+0xd8f)]=this['a']),_0x9bb607;}};h(Tt,'BLACK',Object['freeze'](new Tt(-0x94f+-0x1e2f+0x277e,0xcba+-0x13*0x4f+-0x6dd*0x1,0x33*-0x12+-0x9*-0x139+-0x279*0x3,-0x25b4+0x1da6+0x1*0x80f))),h(Tt,'BLUE',Object['freeze'](new Tt(-0x2621*0x1+-0x10*0x1b8+-0x35*-0x13d,0x8e5+-0x135*0x17+0xe*0x159,0x863*0x4+0x1*-0x1568+0xc23*-0x1,0x19d8+-0x772*0x1+0x1265*-0x1))),h(Tt,'CYAN',Object['freeze'](new Tt(0x133+-0xd06*0x1+0xbd3,-0x22a4+-0xf8b*0x2+0x15e9*0x3,-0x1a3d+0xe5*-0x7+0x2081,-0x1*-0x3b+0x2*-0x75f+0xe84))),h(Tt,'GRAY',Object['freeze'](new Tt(0x2088+0x262*0x7+-0x3136+0.5,-0xb7b+-0x20f7+0x1639*0x2+0.5,-0x1*-0x1c9b+-0x229b+0x600+0.5,0x1292+0x12c0+-0x2551*0x1))),h(Tt,'GREEN',Object['freeze'](new Tt(-0x2301+0x1d2*-0xd+0x1*0x3aab,-0x103e+0xdfd+-0x2*-0x121,-0xa1*0x35+0xaff*-0x2+-0x1271*-0x3,0x1c5d*-0x1+-0x164a+0x8*0x655))),h(Tt,'MAGENTA',Object['freeze'](new Tt(-0x17fc+0x3*0x2e6+0x1*0xf4b,-0x95b+0x4c*0x60+0x1*-0x1325,-0x863+0x14c0+0x7*-0x1c4,-0x1faa+-0x4*0x49+0x20cf))),h(Tt,'RED',Object['freeze'](new Tt(-0x19a7+-0x1*0x1bb9+0x3561,-0x4*0x61f+-0x26*-0xea+-0xa40,-0x1c32+-0xf1*-0x5+0x177d,0x1188+0x10b4+0x1*-0x223b))),h(Tt,'WHITE',Object['freeze'](new Tt(-0x182+0x25d7+-0x2454,0x26e*-0x1+-0x2008*0x1+0x2277,0x22b1+0x2ef*0x5+-0x315b,-0x263b+0x5*0x591+-0xa67*-0x1))),h(Tt,'YELLOW',Object['freeze'](new Tt(0x2586+-0x13*-0xbb+-0x3366,-0x16*0x185+0x3*-0xabf+0x41ac,0x86e*-0x4+0x10cc+-0x39*-0x4c,-0x55+0xf5f+-0xf09)));let ie=Tt;class mS{constructor(_0x1bce2e,_0x1c4261=0x1259+-0x69*-0x46+0x1*-0x2f0f){h(this,'_curve'),h(this,'_left',-(0x1574+0xa*-0x32f+-0xa63*-0x1)/(-0x3*-0x541+0x731*0x2+-0x1e25)),h(this,'_right',(-0x649*0x3+0x1c4f+-0x973)/(0x36*0x87+0xb1a+-0x254*0x11)),h(this,'_recip',-0x1638+-0xe16+0x244e),h(this,'_p0',0x1087*-0x1+-0x22a1+0x3328),h(this,'_p1',0x177a+-0x363*-0x3+-0x1*0x21a3),h(this,'_m0',-0x22dc+-0x108d+0x3*0x1123),h(this,'_m1',0x706+-0x1*0x17ab+0x1*0x10a5),(this['_curve']=_0x1bce2e,this['_reset'](_0x1c4261));}['evaluate'](_0x119125,_0x282078=!(0x15a5+-0x13d+-0x1*0x1467)){(_0x282078||_0x119125<this['_left']||_0x119125>=this['_right'])&&this['_reset'](_0x119125);let _0x2e04cd;const _0x2fd0aa=this['_curve']['type'];if(_0x2fd0aa===O0)_0x2e04cd=this['_p0'];else{const _0x3d95ad=this['_recip']===-0x361+0x236f+-0x200e?0x40a+0xeac*-0x1+-0x2*-0x551:(_0x119125-this['_left'])*this['_recip'];_0x2fd0aa===R0?_0x2e04cd=Y['lerp'](this['_p0'],this['_p1'],_0x3d95ad):_0x2fd0aa===Pu?_0x2e04cd=Y['lerp'](this['_p0'],this['_p1'],_0x3d95ad*_0x3d95ad*(0x18af+0x1f7b+-0x3827-(-0xba*0x2+-0x20ed*0x1+0x2263)*_0x3d95ad)):_0x2e04cd=this['_evaluateH'+'ermite'](this['_p0'],this['_p1'],this['_m0'],this['_m1'],_0x3d95ad);}return _0x2e04cd;}['_reset'](_0x2c97c1){const _0xd03ae5=this['_curve']['keys'],_0x223096=_0xd03ae5['length'];if(!_0x223096)this['_left']=-(0x17*0x62+-0xa1*-0x2+0x203*-0x5)/(0xaf0+-0x2a7+-0x849),this['_right']=(0xdb4+0xd9*0x19+0xcb*-0x2c)/(0xb*0x192+-0x9*-0x2d1+-0x2a9f*0x1),this['_recip']=0x1ea*0xd+0x10d2*-0x2+0x8c2,this['_p0']=this['_p1']=this['_m0']=this['_m1']=0x1001+-0x25ef+0x15ee;else{if(_0x2c97c1<_0xd03ae5[-0x257*0xe+-0x343*-0x2+0x1a3c][0x1f96+-0xb4a+-0x6c4*0x3])this['_left']=-(-0x236e*-0x1+0x20e5+0x37*-0x13e)/(0x1*0x217d+-0x1*0xa7d+-0x170*0x10),this['_right']=_0xd03ae5[0x2113*-0x1+-0x1*-0x246e+-0x1*0x35b][-0x472*0x4+0x17f5+-0x62d],this['_recip']=-0x1ca8+0x1*0x1d72+0xca*-0x1,this['_p0']=this['_p1']=_0xd03ae5[-0x7a*0xe+-0x1d57+0x7*0x525][0x1383+0x2*-0x775+0x1c*-0x2a],this['_m0']=this['_m1']=-0x1*0x2c7+0x1b5*0x1+0x2*0x89;else{if(_0x2c97c1>=_0xd03ae5[_0x223096-(-0x1f65+0x50c+0x1*0x1a5a)][-0xd2b*0x1+0x884+-0x18d*-0x3])this['_left']=_0xd03ae5[_0x223096-(-0xccb+-0x2*-0xb6b+-0xa0a)][-0x12fd+-0x2*-0x2f2+0x7*0x1df],this['_right']=(-0x26dc+-0xe3e+0x351b)/(-0x4b4+-0x29*-0x2f+-0x2d3),this['_recip']=0xec1+-0x1839+0x328*0x3,this['_p0']=this['_p1']=_0xd03ae5[_0x223096-(0x1*-0x17d2+-0x1a7e+0x3251)][-0x1b8b+0xbb1*0x1+0xfdb],this['_m0']=this['_m1']=0x126+0x267d+-0x27a3;else{let _0x51350d=-0x1fc*-0x11+0x13af+-0x1*0x356b;for(;_0x2c97c1>=_0xd03ae5[_0x51350d+(-0x1105+-0x138b+-0x17*-0x197)][-0xe2c+0x1dfa+-0xfce];)_0x51350d++;this['_left']=_0xd03ae5[_0x51350d][-0x1bca+-0x53c*-0x1+0xb47*0x2],this['_right']=_0xd03ae5[_0x51350d+(-0x3c*0x4+0xf78+-0xe87)][0x1a6b+0x1*-0xb51+-0xf1a];const _0x29d86f=(0x1f8f+-0x19ab+-0x5e3)/(this['_right']-this['_left']);this['_recip']=isFinite(_0x29d86f)?_0x29d86f:0x1*0x47a+-0x870+0x152*0x3,this['_p0']=_0xd03ae5[_0x51350d][0x364*-0x4+-0x1b78+0xbf*0x37],this['_p1']=_0xd03ae5[_0x51350d+(-0x2*0xbb7+0x2640+0x1*-0xed1)][-0x19e2+-0x20*0x53+0x2443],this['_curve']['type']===lm&&this['_calcTange'+'nts'](_0xd03ae5,_0x51350d);}}}}['_calcTange'+'nts'](_0x8d25ed,_0x148bdf){let _0x4c122e;const _0x386f63=_0x8d25ed[_0x148bdf],_0xffe84e=_0x8d25ed[_0x148bdf+(0x1*0x2dd+-0x1*0x128f+-0x1*-0xfb3)];let _0x1afdb7;if(_0x148bdf===0x310+0x1b63*0x1+0x5*-0x617?_0x4c122e=[_0x8d25ed[0x1*0x16cb+-0x233*0x1+-0x2*0xa4c][0x3*0xc0d+0x10d4+0x63*-0x89]+(_0x8d25ed[-0xd9f+-0x1*0x1fbb+0x2d5a][-0x11*-0x3b+-0x14c0+-0x1f*-0x8b]-_0x8d25ed[-0x26a6+0x3*0x91f+-0x5*-0x242][-0x1e5e+0x6*0x400+0x65e]),_0x8d25ed[-0x21*0x6a+0x1b7f+-0xdd5][0x1df0+-0x2*-0x79b+-0x7*0x673]+(_0x8d25ed[0x31*0x1+-0x5*0x4fd+-0x3*-0x840][-0x8*0x2ea+0x209a+0x1*-0x949]-_0x8d25ed[-0x1531+-0xf5d+-0x7*-0x539][0xacf*0x1+-0x989+0x19*-0xd])]:_0x4c122e=_0x8d25ed[_0x148bdf-(-0xe95+0x1013+-0x17d)],_0x148bdf===_0x8d25ed['length']-(0xe8a*0x2+-0x1586+0xa1*-0xc)?_0x1afdb7=[_0x8d25ed[_0x148bdf+(-0x53*-0x6f+0x92e+0x7b*-0x5e)][0x8bb+-0x1679*-0x1+-0xf9a*0x2]+(_0x8d25ed[_0x148bdf+(-0x15b*-0x1b+-0x13cc+-0x10cc)][-0x58a*-0x1+0x1223+-0x17ad*0x1]-_0x8d25ed[_0x148bdf][0x1810+0x53+-0x1863]),_0x8d25ed[_0x148bdf+(0x4*0xfb+0x13bc+-0x17a7*0x1)][0x26*0x1+0x1*0x1917+-0x193c]+(_0x8d25ed[_0x148bdf+(-0x504*-0x1+0x1*0x2231+0x34*-0xc1)][0x3*-0xb93+0x4b4+0x1e06]-_0x8d25ed[_0x148bdf][0x1c05+-0x6*0x48c+-0x2f*0x4])]:_0x1afdb7=_0x8d25ed[_0x148bdf+(-0xa6*-0x1+-0x1217+0x1173)],this['_curve']['type']===lm){const _0x11aac6=(-0x1e95*0x1+-0x9dc+-0x817*-0x5)*(_0xffe84e[-0x811+-0x11f9*-0x1+-0x4*0x27a]-_0x386f63[-0x22d*-0xd+-0x1183*0x1+0x563*-0x2])/(_0xffe84e[0x165f+-0x35*-0x16+-0x1aed]-_0x4c122e[0xb34+-0x202c+0x16*0xf4]),_0x4b20d6=(-0x1*0x1a17+0xbb5+-0x2*-0x732)*(_0xffe84e[-0xa46+0x884+0x1c2]-_0x386f63[0x2282*-0x1+0x3*0x2fb+0x1991])/(_0x1afdb7[-0x805*0x1+0x102b*-0x1+0x1830]-_0x386f63[0x5*0x54a+0x2*-0x6f1+0x4*-0x324]);this['_m0']=this['_curve']['tension']*(isFinite(_0x11aac6)?_0x11aac6:0x2533+0x19df+0x9*-0x702)*(_0xffe84e[0x16a4+-0x1a38+0x395]-_0x4c122e[0xa*-0x1a2+0x3d*-0x59+-0x2*-0x12c5]),this['_m1']=this['_curve']['tension']*(isFinite(_0x4b20d6)?_0x4b20d6:-0x5d*-0x63+-0x2*0x103f+-0x379*0x1)*(_0x1afdb7[-0xb5d*0x1+0xaa7+0xb7]-_0x386f63[0x1f97*-0x1+-0x123e+0x31d6]);}else{const _0x43cf1f=(_0xffe84e[-0x14c2+-0x10a*-0x11+0x318]-_0x386f63[-0x15bb+0x1b66+-0x5ab])/(_0x386f63[0x4*-0x886+0x1*0x9d5+0x1843]-_0x4c122e[0xf9+-0x1429+-0x2*-0x998]),_0x72554f=(_0xffe84e[0xa22+0x75*0x47+-0x3df*0xb]-_0x386f63[-0xfc1*0x2+-0x244d+0x43cf*0x1])/(_0x1afdb7[-0x672+0x7a*0xa+0x1ae]-_0xffe84e[-0x523+-0x1cbb+0x21de]),_0x1fbd96=_0x386f63[-0x7c1+0x1*0x473+0x34f]+(_0x4c122e[0xbee+-0xb1*0x1a+-0x60d*-0x1]-_0x386f63[-0x15c8+-0x452+0x1*0x1a1b])*(isFinite(_0x43cf1f)?_0x43cf1f:0x5*-0x517+0x1*0x161+-0x27*-0x9e),_0x39a710=_0xffe84e[0x3*-0xb51+-0x71c+0x2910]+(_0x1afdb7[0x1a15*-0x1+0x85+-0x253*-0xb]-_0xffe84e[-0x97*-0x2c+0x172d+-0x83*0x60])*(isFinite(_0x72554f)?_0x72554f:-0x1745*-0x1+0x5*0x64d+-0x36c6),_0x366fce=this['_curve']['tension'];this['_m0']=_0x366fce*(_0xffe84e[-0xe*0x6f+-0x153e+-0x14d*-0x15]-_0x1fbd96),this['_m1']=_0x366fce*(_0x39a710-_0x386f63[0x1*0xc67+0x1*-0x449+-0x81d]);}}['_evaluateH'+'ermite'](_0x39860a,_0x2736c4,_0x4bd288,_0x4a233c,_0x11b84b){const _0x36471b=_0x11b84b*_0x11b84b,_0x228a5e=_0x11b84b+_0x11b84b,_0x24dd13=0x2638+0x671*-0x1+-0x1fc6-_0x11b84b,_0x5963eb=_0x24dd13*_0x24dd13;return _0x39860a*((-0x52f*0x1+-0x258f+0x2abf+_0x228a5e)*_0x5963eb)+_0x4bd288*(_0x11b84b*_0x5963eb)+_0x2736c4*(_0x36471b*(-0x407+-0x7ae*0x3+0x6c5*0x4-_0x228a5e))+_0x4a233c*(_0x36471b*(_0x11b84b-(0x2397*0x1+0x6*-0x311+-0x50*0x37)));}}class Xs{constructor(_0x4f7c2c){h(this,'keys',[]),h(this,'type',Pu),h(this,'tension',0xa63*-0x1+0xc88+-0x3*0xb7+0.5),h(this,'_eval',new mS(this));if(_0x4f7c2c){for(let _0x2c4245=0x9d9*0x1+0x1bbf*-0x1+0x11e6;_0x2c4245<_0x4f7c2c['length']-(0x1b7+0x311*0x9+-0x1*0x1d4f);_0x2c4245+=0x1f9f+0x150d+-0x34aa)this['keys']['push']([_0x4f7c2c[_0x2c4245],_0x4f7c2c[_0x2c4245+(0x143f*-0x1+-0x1*0x2483+-0x1*-0x38c3)]]);}this['sort']();}get['length'](){return this['keys']['length'];}['add'](_0x2c5164,_0x1fb1bf){const _0x452b69=this['keys'],_0x3d5346=_0x452b69['length'];let _0x1597df=-0x12ee*-0x1+-0x9*-0x10f+-0x1f*0xeb;for(;_0x1597df<_0x3d5346&&!(_0x452b69[_0x1597df][0x8d9+0xbe0+0x14b9*-0x1]>_0x2c5164);_0x1597df++);const _0x2ac21e=[_0x2c5164,_0x1fb1bf];return this['keys']['splice'](_0x1597df,0x192*-0x1+-0x1946+0x1ad8,_0x2ac21e),_0x2ac21e;}['get'](_0x43a97c){return this['keys'][_0x43a97c];}['sort'](){this['keys']['sort']((_0x131238,_0x2b221d)=>_0x131238[-0xa57+-0x1*0xac8+0x1*0x151f]-_0x2b221d[0x3ac*-0x5+0xb6c+0x2*0x378]);}['value'](_0xc1a731){return this['_eval']['evaluate'](_0xc1a731,!(-0xabf*0x1+0x252f+-0x1a70));}['closest'](_0x35051a){const _0x5dbdca=this['keys'],_0x1da796=_0x5dbdca['length'];let _0xc33ade=0x9d*-0xc+-0x1*-0x521+0x3*0xbf,_0x21e4b0=null;for(let _0x4db659=0x210e*0x1+-0x2176+0x68*0x1;_0x4db659<_0x1da796;_0x4db659++){const _0x428c56=Math['abs'](_0x35051a-_0x5dbdca[_0x4db659][0x26c9*0x1+-0x2*-0x1309+0x19*-0x313]);if(_0xc33ade>=_0x428c56)_0xc33ade=_0x428c56,_0x21e4b0=_0x5dbdca[_0x4db659];else break;}return _0x21e4b0;}['clone'](){const _0x5bf147=new this['constructo'+'r']();return _0x5bf147['keys']=this['keys']['map'](_0x2769f5=>[..._0x2769f5]),_0x5bf147['type']=this['type'],_0x5bf147['tension']=this['tension'],_0x5bf147;}['quantize'](_0x5d10e0){_0x5d10e0=Math['max'](_0x5d10e0,0x1c78+0xa94+-0x26*0x107);const _0x560c5f=new Float32Array(_0x5d10e0),_0x15ffcc=(-0xfb*-0x21+-0x2516+-0x2*-0x25e)/(_0x5d10e0-(0xa*0x233+0x2571+-0x3b6e*0x1));_0x560c5f[-0x1100+-0x51f*0x1+-0x329*-0x7]=this['_eval']['evaluate'](-0x39*0x7f+0x138a+0x8bd,!(-0x1*0x119f+-0x850+0x19ef));for(let _0x3868bb=0x1*-0x1d41+-0x3b3*-0x5+0xac3;_0x3868bb<_0x5d10e0;_0x3868bb++)_0x560c5f[_0x3868bb]=this['_eval']['evaluate'](_0x15ffcc*_0x3868bb);return _0x560c5f;}['quantizeCl'+'amped'](_0x419b7a,_0x39c195,_0x473529){const _0x390c66=this['quantize'](_0x419b7a);for(let _0x3f921a=-0x1eed+0x15d3*0x1+0x91a;_0x3f921a<_0x390c66['length'];++_0x3f921a)_0x390c66[_0x3f921a]=Math['min'](_0x473529,Math['max'](_0x39c195,_0x390c66[_0x3f921a]));return _0x390c66;}}class ta{constructor(..._0x168c13){h(this,'curves',[]),h(this,'_type',Pu);if(_0x168c13['length']>-0x902+-0x2413+0x2d16){for(let _0x294c49=0x22b8+-0x258e+-0x42*-0xb;_0x294c49<_0x168c13['length'];_0x294c49++)this['curves']['push'](new Xs(_0x168c13[_0x294c49]));}else{if(_0x168c13['length']===-0x2*-0xc63+-0x89*0x1e+0x1f*-0x48)this['curves']['push'](new Xs());else{const _0xc0b810=_0x168c13[-0x5b*0x4+-0x5fb+0x767];if(typeof _0xc0b810=='number'){for(let _0x1222dd=-0x1*-0x14fd+0x1cdc*-0x1+0x1*0x7df;_0x1222dd<_0xc0b810;_0x1222dd++)this['curves']['push'](new Xs());}else{for(let _0x3e4c06=0x955+-0x571+0x1*-0x3e4;_0x3e4c06<_0xc0b810['length'];_0x3e4c06++)this['curves']['push'](new Xs(_0xc0b810[_0x3e4c06]));}}}}get['length'](){return this['curves']['length'];}set['type'](_0x5554d7){this['_type']=_0x5554d7;for(let _0x478795=-0x8c9*-0x3+0x1373*0x1+-0x2dce;_0x478795<this['curves']['length'];_0x478795++)this['curves'][_0x478795]['type']=_0x5554d7;}get['type'](){return this['_type'];}['get'](_0x56bc3d){return this['curves'][_0x56bc3d];}['value'](_0x1f21dd,_0x27ddf6=[]){const _0x941486=this['curves']['length'];_0x27ddf6['length']=_0x941486;for(let _0x39fc1e=-0x1*-0x1bbd+0x614+-0x21d1;_0x39fc1e<_0x941486;_0x39fc1e++)_0x27ddf6[_0x39fc1e]=this['curves'][_0x39fc1e]['value'](_0x1f21dd);return _0x27ddf6;}['clone'](){const _0x381d0d=new this['constructo'+'r']();_0x381d0d['curves']=[];for(let _0x326f76=0x1*0x1de3+0x185b+-0x363e;_0x326f76<this['curves']['length'];_0x326f76++)_0x381d0d['curves']['push'](this['curves'][_0x326f76]['clone']());return _0x381d0d['_type']=this['_type'],_0x381d0d;}['quantize'](_0x2f853f){_0x2f853f=Math['max'](_0x2f853f,0x19d5+-0x137e+-0x655);const _0x51717f=this['curves']['length'],_0x44df56=new Float32Array(_0x2f853f*_0x51717f),_0x306045=(-0x1df*0xf+-0x209d+-0x5*-0xc23)/(_0x2f853f-(0x24d1*-0x1+-0xc48+-0xf*-0x346));for(let _0x43f969=-0x187a+-0x201c+-0x2*-0x1c4b;_0x43f969<_0x51717f;_0x43f969++){const _0x1c4411=new mS(this['curves'][_0x43f969]);for(let _0x5e5ae9=-0x18e7+-0x1*-0x8+0x18df;_0x5e5ae9<_0x2f853f;_0x5e5ae9++)_0x44df56[_0x5e5ae9*_0x51717f+_0x43f969]=_0x1c4411['evaluate'](_0x306045*_0x5e5ae9);}return _0x44df56;}['quantizeCl'+'amped'](_0x1cdb9a,_0x170243,_0x8238d6){const _0x4072e9=this['quantize'](_0x1cdb9a);for(let _0x20b0e8=-0xe5a+-0x1b1*-0x4+0x796;_0x20b0e8<_0x4072e9['length'];++_0x20b0e8)_0x4072e9[_0x20b0e8]=Math['min'](_0x8238d6,Math['max'](_0x170243,_0x4072e9[_0x20b0e8]));return _0x4072e9;}}const gf=new Float32Array(0xd1*-0x26+0x26a*-0x2+-0x23db*-0x1),cm=new Int32Array(gf['buffer']);class Tn{static['float2Half'](_0x55d66d){gf[-0x19*-0x106+-0x4*0x193+-0x6*0x337]=_0x55d66d;const _0xf83935=cm[-0x3d*-0x2e+-0x1*0x96c+-0x18a];let _0x24830f=_0xf83935>>-0x1*0x3cc+0x935+-0x559&0x2c3f+-0x964d+0xea0e,_0x2166ed=_0xf83935>>-0x2*-0x1a1+-0x63*-0x8+-0x64e&0x2650+-0x19a3*-0x1+-0x37f4;const _0x4f426e=_0xf83935>>-0x3*0x4a9+-0x5*0xe8+-0x129a*-0x1&0x5*0xbd+-0x198b+0x16d9;return _0x4f426e<-0x1ef0+0x1181+0xdd6?_0x24830f:_0x4f426e>-0x631*0x5+-0x1*-0x1f42+-0x1*-0x41?(_0x24830f|=0x2*0x3+0xa2e5+-0x26eb,_0x24830f|=(_0x4f426e===0x10d2+-0x1bbb+0x2fa*0x4?0x19d8+0xa13*-0x1+0x16f*-0xb:0xcf3+0x2265+0x1*-0x2f57)&&_0xf83935&0x95d126+-0x86b1c0+0x70e099,_0x24830f):_0x4f426e<0x6*-0x51+0x24e*0x10+0x1a5*-0x15?(_0x2166ed|=0x1b5a+-0x303+-0x59*0x2f,_0x24830f|=(_0x2166ed>>-0x3f2*0x1+0x2*0x359+-0xa*0x3b-_0x4f426e)+(_0x2166ed>>-0x14*0xa3+0xac*-0xd+0x15e9-_0x4f426e&-0xc9*-0x23+0x55*0x2+-0x4*0x709),_0x24830f):(_0x24830f|=_0x4f426e-(-0x395+-0xc5*-0xb+0x239*-0x2)<<0x1364+0x1f5e+-0xc*0x43a|_0x2166ed>>-0x9*-0x287+-0x1a59+-0x39b*-0x1,_0x24830f+=_0x2166ed&-0x1953+0x223e+-0x8ea,_0x24830f);}static['float2RGBA'+'8'](_0x48ffaf,_0x5df5cb){gf[-0x2*-0xb83+0x23a7*-0x1+0xca1*0x1]=_0x48ffaf;const _0x21bd7d=cm[-0x4c1+-0x19c5+-0x1e86*-0x1];_0x5df5cb['r']=(_0x21bd7d>>-0x1*0xe01+0xf9*0x25+0x579*-0x4&0x2d8+-0xaf7*0x1+0x6*0x185)/(-0x1*0x491+-0x1b5*0xb+0x1857*0x1),_0x5df5cb['g']=(_0x21bd7d>>0x6*-0x2ff+-0x1e4f*0x1+0x1*0x3059&0x76f+-0x2532+0x1ec2)/(0x859+0x20cb+-0x2825),_0x5df5cb['b']=(_0x21bd7d>>-0xd31*0x2+0x11d0+0x89a&0xe2+0x2a2*-0x6+0xfe9)/(-0x1b6d+0xd27+0xf45),_0x5df5cb['a']=(_0x21bd7d&0x3b*0x25+-0x49a+-0x2ee)/(-0x3*-0x218+0x2347+-0x3b0*0xb);}}const wt=class wt{constructor(_0x12b4e9=-0x1317+0x20*0xbc+-0x469,_0x51beb6=0x197*0x2+0xd*-0x2b9+-0x3*-0xabd,_0x57a78a=0x248f+-0x18e*-0x19+-0x1*0x4b6d){h(this,'x'),h(this,'y'),h(this,'z'),_0x12b4e9['length']===0x2*0x3b7+-0x29d+0xf6*-0x5?(this['x']=_0x12b4e9[-0x34*-0x98+-0x5*0x645+0xb*0xb],this['y']=_0x12b4e9[-0x6*0x4dc+-0x1785+0x4ca*0xb],this['z']=_0x12b4e9[-0x1766+-0x1cf4+0x345c]):(this['x']=_0x12b4e9,this['y']=_0x51beb6,this['z']=_0x57a78a);}['add'](_0x594585){return this['x']+=_0x594585['x'],this['y']+=_0x594585['y'],this['z']+=_0x594585['z'],this;}['add2'](_0x1c6a6b,_0x2ee0fc){return this['x']=_0x1c6a6b['x']+_0x2ee0fc['x'],this['y']=_0x1c6a6b['y']+_0x2ee0fc['y'],this['z']=_0x1c6a6b['z']+_0x2ee0fc['z'],this;}['addScalar'](_0x35d643){return this['x']+=_0x35d643,this['y']+=_0x35d643,this['z']+=_0x35d643,this;}['addScaled'](_0x45ef9c,_0x155417){return this['x']+=_0x45ef9c['x']*_0x155417,this['y']+=_0x45ef9c['y']*_0x155417,this['z']+=_0x45ef9c['z']*_0x155417,this;}['clone'](){const _0x184841=this['constructo'+'r'];return new _0x184841(this['x'],this['y'],this['z']);}['copy'](_0x433d26){return this['x']=_0x433d26['x'],this['y']=_0x433d26['y'],this['z']=_0x433d26['z'],this;}['cross'](_0x383947,_0x2516d4){const _0x4ac1ae=_0x383947['x'],_0x4f124b=_0x383947['y'],_0x45919c=_0x383947['z'],_0x2c85e9=_0x2516d4['x'],_0x470334=_0x2516d4['y'],_0x369fd9=_0x2516d4['z'];return this['x']=_0x4f124b*_0x369fd9-_0x470334*_0x45919c,this['y']=_0x45919c*_0x2c85e9-_0x369fd9*_0x4ac1ae,this['z']=_0x4ac1ae*_0x470334-_0x2c85e9*_0x4f124b,this;}['distance'](_0x12c394){const _0x425c59=this['x']-_0x12c394['x'],_0xe8d81e=this['y']-_0x12c394['y'],_0x5ae731=this['z']-_0x12c394['z'];return Math['sqrt'](_0x425c59*_0x425c59+_0xe8d81e*_0xe8d81e+_0x5ae731*_0x5ae731);}['div'](_0x445c12){return this['x']/=_0x445c12['x'],this['y']/=_0x445c12['y'],this['z']/=_0x445c12['z'],this;}['div2'](_0x20a168,_0x1405c0){return this['x']=_0x20a168['x']/_0x1405c0['x'],this['y']=_0x20a168['y']/_0x1405c0['y'],this['z']=_0x20a168['z']/_0x1405c0['z'],this;}['divScalar'](_0x353d7d){return this['x']/=_0x353d7d,this['y']/=_0x353d7d,this['z']/=_0x353d7d,this;}['dot'](_0x1462bf){return this['x']*_0x1462bf['x']+this['y']*_0x1462bf['y']+this['z']*_0x1462bf['z'];}['equals'](_0x3c25b5){return this['x']===_0x3c25b5['x']&&this['y']===_0x3c25b5['y']&&this['z']===_0x3c25b5['z'];}['equalsAppr'+'ox'](_0x5cf2c,_0x46bc54=0xb*0x56+-0x40d+-0x5b*-0x1+0.000001){return Math['abs'](this['x']-_0x5cf2c['x'])<_0x46bc54&&Math['abs'](this['y']-_0x5cf2c['y'])<_0x46bc54&&Math['abs'](this['z']-_0x5cf2c['z'])<_0x46bc54;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z'];}['lerp'](_0x39fc2a,_0x45346b,_0x837e89){return this['x']=_0x39fc2a['x']+_0x837e89*(_0x45346b['x']-_0x39fc2a['x']),this['y']=_0x39fc2a['y']+_0x837e89*(_0x45346b['y']-_0x39fc2a['y']),this['z']=_0x39fc2a['z']+_0x837e89*(_0x45346b['z']-_0x39fc2a['z']),this;}['mul'](_0x4b8a77){return this['x']*=_0x4b8a77['x'],this['y']*=_0x4b8a77['y'],this['z']*=_0x4b8a77['z'],this;}['mul2'](_0x414343,_0x34e575){return this['x']=_0x414343['x']*_0x34e575['x'],this['y']=_0x414343['y']*_0x34e575['y'],this['z']=_0x414343['z']*_0x34e575['z'],this;}['mulScalar'](_0x30b8b1){return this['x']*=_0x30b8b1,this['y']*=_0x30b8b1,this['z']*=_0x30b8b1,this;}['normalize'](_0x2456fd=this){const _0x2c06bd=_0x2456fd['x']*_0x2456fd['x']+_0x2456fd['y']*_0x2456fd['y']+_0x2456fd['z']*_0x2456fd['z'];if(_0x2c06bd>0x10*0x207+-0x186a+0x806*-0x1){const _0x150068=(-0xb15*0x3+-0x24c*-0x5+-0xc7*-0x1c)/Math['sqrt'](_0x2c06bd);this['x']=_0x2456fd['x']*_0x150068,this['y']=_0x2456fd['y']*_0x150068,this['z']=_0x2456fd['z']*_0x150068;}return this;}['floor'](_0x9e06f6=this){return this['x']=Math['floor'](_0x9e06f6['x']),this['y']=Math['floor'](_0x9e06f6['y']),this['z']=Math['floor'](_0x9e06f6['z']),this;}['ceil'](_0x559b41=this){return this['x']=Math['ceil'](_0x559b41['x']),this['y']=Math['ceil'](_0x559b41['y']),this['z']=Math['ceil'](_0x559b41['z']),this;}['round'](_0x46ae9f=this){return this['x']=Math['round'](_0x46ae9f['x']),this['y']=Math['round'](_0x46ae9f['y']),this['z']=Math['round'](_0x46ae9f['z']),this;}['min'](_0x4a0933){return _0x4a0933['x']<this['x']&&(this['x']=_0x4a0933['x']),_0x4a0933['y']<this['y']&&(this['y']=_0x4a0933['y']),_0x4a0933['z']<this['z']&&(this['z']=_0x4a0933['z']),this;}['max'](_0x4aab2d){return _0x4aab2d['x']>this['x']&&(this['x']=_0x4aab2d['x']),_0x4aab2d['y']>this['y']&&(this['y']=_0x4aab2d['y']),_0x4aab2d['z']>this['z']&&(this['z']=_0x4aab2d['z']),this;}['project'](_0x40a1b8){const _0x3d759d=this['x']*_0x40a1b8['x']+this['y']*_0x40a1b8['y']+this['z']*_0x40a1b8['z'],_0x1d1e52=_0x40a1b8['x']*_0x40a1b8['x']+_0x40a1b8['y']*_0x40a1b8['y']+_0x40a1b8['z']*_0x40a1b8['z'],_0x549de6=_0x3d759d/_0x1d1e52;return this['x']=_0x40a1b8['x']*_0x549de6,this['y']=_0x40a1b8['y']*_0x549de6,this['z']=_0x40a1b8['z']*_0x549de6,this;}['set'](_0x466751,_0x1bc356,_0x18bdb8){return this['x']=_0x466751,this['y']=_0x1bc356,this['z']=_0x18bdb8,this;}['sub'](_0x284a09){return this['x']-=_0x284a09['x'],this['y']-=_0x284a09['y'],this['z']-=_0x284a09['z'],this;}['sub2'](_0x1feecf,_0x47abbf){return this['x']=_0x1feecf['x']-_0x47abbf['x'],this['y']=_0x1feecf['y']-_0x47abbf['y'],this['z']=_0x1feecf['z']-_0x47abbf['z'],this;}['subScalar'](_0xba6946){return this['x']-=_0xba6946,this['y']-=_0xba6946,this['z']-=_0xba6946,this;}['fromArray'](_0x2dbc06,_0x1afa8b=-0x5*0x12a+-0x1*0xe6b+0x143d){return this['x']=_0x2dbc06[_0x1afa8b]??this['x'],this['y']=_0x2dbc06[_0x1afa8b+(-0x9c*-0x4+-0x1*0x26fe+0x248f)]??this['y'],this['z']=_0x2dbc06[_0x1afa8b+(-0x1*-0x2037+0x1c70+-0x3ca5)]??this['z'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+']';}['toArray'](_0x2f079a=[],_0x39ba63=0x4d3*-0x1+-0x1fb5+-0x29c*-0xe){return _0x2f079a[_0x39ba63]=this['x'],_0x2f079a[_0x39ba63+(0x46*0x8+0x157c+-0x17ab)]=this['y'],_0x2f079a[_0x39ba63+(-0x1*0x1687+0x63d*-0x3+0xc0*0x37)]=this['z'],_0x2f079a;}};h(wt,'ZERO',Object['freeze'](new wt(-0x81*-0x23+0x1*-0x1c8d+-0x2*-0x575,0xad6*-0x2+-0x455*0x7+0x33ff,-0x996*0x1+-0x29d+0xc33))),h(wt,'HALF',Object['freeze'](new wt(-0xd*-0x20b+0x18b*-0xe+0x4f5*-0x1+0.5,0x2ef+0x26db+-0x29ca+0.5,0x4*0x4a2+0x100d*0x1+0x2295*-0x1+0.5))),h(wt,'ONE',Object['freeze'](new wt(0x4f*0x31+0x1d30+-0x2c4e,0x23b5*0x1+-0x1*0xd85+0x162f*-0x1,0xa7e+-0x4e*0x31+0x471))),h(wt,'UP',Object['freeze'](new wt(-0xab*-0x1+0x1c*0xef+-0x1acf,-0x1*-0x161b+0x1*0x15ea+-0x2c04,-0x3*0x671+-0x11f7+-0x6*-0x637))),h(wt,'DOWN',Object['freeze'](new wt(0x13c*0x1+-0x1af*-0x17+-0x27f5,-(0x2300+0x1364+-0x3663),-0x77*-0x4d+0x158e+-0x115*0x35))),h(wt,'RIGHT',Object['freeze'](new wt(0x18f+-0x1*-0x17db+-0x1969,-0x21ed+0xfc9+-0x489*-0x4,-0x99b*0x3+0x12*-0x60+0x2391))),h(wt,'LEFT',Object['freeze'](new wt(-(-0x1*0x172f+0x13c5+0x36b),-0x2088+-0x1*0x1af3+0x3b7b,0x1363+0x399+0x16fc*-0x1))),h(wt,'FORWARD',Object['freeze'](new wt(0x3*-0xb7a+-0x12e7+0x3555,0xa01+-0x5f9+-0x408,-(0x26f*-0xa+0x1*-0xc92+0x24e9)))),h(wt,'BACK',Object['freeze'](new wt(-0x703+-0x1a9e*-0x1+0xef*-0x15,0x25*0x43+0xf1e+-0x18cd,0x199*-0x13+0x25da+-0x77e)));let D=wt;const hn=class hn{constructor(){h(this,'data',new Float32Array(-0x1*-0x59a+0xd76+-0x1307*0x1)),this['data'][-0x26b0+0x468+0x2248]=this['data'][-0x7*-0x33d+0xf03+-0x25aa]=this['data'][0x2d2+0x47*0x35+-0x117d*0x1]=0x608+0xa72+-0x1079;}['clone'](){const _0x2a6266=this['constructo'+'r'];return new _0x2a6266()['copy'](this);}['copy'](_0x21966d){const _0x158ea5=_0x21966d['data'],_0x41840d=this['data'];return _0x41840d[0x2*-0x11b1+0x4f*-0x9+0x2629]=_0x158ea5[-0x1*0x64d+-0x1fde+0x262b],_0x41840d[-0x1983+0xc59+0xd2b]=_0x158ea5[-0xea3*-0x1+-0x108b+0x1e9],_0x41840d[0x27*-0x75+0xc4d+-0x3*-0x1d8]=_0x158ea5[0x1dee+-0x129b+-0xb51],_0x41840d[0x15a*0x11+-0x658+-0x5*0x353]=_0x158ea5[-0x9a1*0x4+-0x807+0x2*0x1747],_0x41840d[-0x75d+0x2*0x74a+-0x733]=_0x158ea5[-0x127e+-0x1411+-0x1*-0x2693],_0x41840d[0x22a*0x5+-0x7*0x39e+-0x9*-0x19d]=_0x158ea5[-0x1639+-0x521+-0x1b5f*-0x1],_0x41840d[-0x1*0x11a1+0xff0+-0x1b7*-0x1]=_0x158ea5[0x1*0x1a11+-0x240d*-0x1+0xf86*-0x4],_0x41840d[0x8dd+0x1b7c+-0x2452]=_0x158ea5[-0x210f+-0x1ef3*0x1+0x1*0x4009],_0x41840d[0x24f3+-0x19a7*0x1+-0xb44]=_0x158ea5[-0xd13+-0x1255+0x1f70],this;}['set'](_0x171d4d){const _0x17a1ad=this['data'];return _0x17a1ad[0x12ba+-0x7e6*-0x4+-0x3252]=_0x171d4d[0x23c6+0x215c+-0x1*0x4522],_0x17a1ad[0xf9a+-0x291+-0xd08]=_0x171d4d[-0x851*0x1+-0x1b*0x110+0x2502],_0x17a1ad[0x6a*-0x17+0x1167+-0x41*0x1f]=_0x171d4d[-0x188f+-0x4*-0x61f+-0x1*-0x15],_0x17a1ad[0x3d3*-0x5+-0x2*-0x851+0x280]=_0x171d4d[-0x25c9+-0xd01+0x32cd],_0x17a1ad[0x1018+-0xd4d+-0x2c7]=_0x171d4d[-0xcb4+0x20c+0xaac],_0x17a1ad[0x10ee+-0x7cf*-0x2+-0x2087]=_0x171d4d[0x1d1f+0x45*-0x56+-0x4*0x17b],_0x17a1ad[-0xc7f+0x1301+-0x1*0x67c]=_0x171d4d[-0x13*-0x10b+0x244f+-0x381a],_0x17a1ad[-0x3*0x1bb+-0x4*0x7aa+0x10*0x23e]=_0x171d4d[-0xafd+-0x1*0xfa6+-0xd55*-0x2],_0x17a1ad[0x4f7+-0x3*-0xb82+-0x27*0x103]=_0x171d4d[0x1b6d+-0x1da7+0x242],this;}['getX'](_0xd5f1f7=new D()){return _0xd5f1f7['set'](this['data'][0x8bd+-0x15*0xe5+0xa0c],this['data'][0x2*-0xe8f+0xee0+0xe3f],this['data'][-0x5*0x29+-0x1b05+0x1*0x1bd4]);}['getY'](_0x171880=new D()){return _0x171880['set'](this['data'][-0xef1+0x1*0x269b+-0x361*0x7],this['data'][0x17c+0x19ef*-0x1+0x1*0x1877],this['data'][0xe1a+-0xdf*0xf+-0x104]);}['getZ'](_0x3b26cc=new D()){return _0x3b26cc['set'](this['data'][0x1d*-0x37+-0x175d+0x1d9e],this['data'][0x21a3+0x425+-0x25c1],this['data'][0x1c47+-0x124f+0x3*-0x350]);}['equals'](_0x3cfdea){const _0x551af6=this['data'],_0x51f73e=_0x3cfdea['data'];return _0x551af6[0x7*-0x1a0+-0x1e2*-0x1+-0x1e*-0x51]===_0x51f73e[-0xaae+-0x6d7+-0x3*-0x5d7]&&_0x551af6[-0x190c+0x1*-0x105b+-0xc8*-0x35]===_0x51f73e[-0x344*-0x8+-0x4c4+-0x155b]&&_0x551af6[-0xe+0x488+0x68*-0xb]===_0x51f73e[0x1d0f*-0x1+-0x21f1*-0x1+-0x4e0]&&_0x551af6[0x62e*-0x6+-0x1d6b+-0x2141*-0x2]===_0x51f73e[0x625+0x1*0xf63+-0x1585]&&_0x551af6[0x15ba*-0x1+-0x21e6*-0x1+-0x614*0x2]===_0x51f73e[0x1*0x15+-0x49*-0x25+-0xa9e]&&_0x551af6[-0x4df+0x9a3+-0x4bf]===_0x51f73e[-0x1a+0x62a+-0x7*0xdd]&&_0x551af6[-0x1aa7+0xc64*0x1+0x1*0xe49]===_0x51f73e[-0x1310+0x6*-0x542+-0x2*-0x1951]&&_0x551af6[0xea1+0x220c+-0x3be*0xd]===_0x51f73e[-0x3ca+-0x2*0x7b0+-0x121*-0x11]&&_0x551af6[-0x812*0x1+-0x74*0x42+0x7*0x56e]===_0x51f73e[-0xfe5+0x1067+-0x7a];}['isIdentity'](){const _0x3c736f=this['data'];return _0x3c736f[0x19*0xd1+0x48d*0x1+-0xf*0x1aa]===0x1319+-0xcd*0x2b+0xf57&&_0x3c736f[-0x5*0x282+0x1ce2+-0x1057]===-0x2261+-0x1d45+0x3fa6&&_0x3c736f[0xcd8+-0x2*-0x74f+-0x4*0x6dd]===0x1d85+0x1526+-0x32ab&&_0x3c736f[0xf9c+-0x21a8+-0xc9*-0x17]===-0x104d+0x2b*0x53+-0x12e*-0x2&&_0x3c736f[-0x1109+-0x106d*0x1+0x6b2*0x5]===-0x166*-0xc+0x8c6*0x4+-0x33df&&_0x3c736f[-0x8*0x4bd+-0xe8d+0x347a]===0x1938+-0x2703+0xdcb&&_0x3c736f[-0x16e+-0x11b8+0x132c]===0x19*-0x12d+0xd5a+0x100b&&_0x3c736f[-0x19e8+-0x116a+0x2b59]===-0x1fd*-0x3+0x3*0xc59+-0x2b02&&_0x3c736f[-0x1128+0x1101+0x1*0x2f]===-0x238*-0xc+-0x19a4+-0x1*0xfb;}['setIdentit'+'y'](){const _0x1ec953=this['data'];return _0x1ec953[-0x4c*-0x78+-0x5*0x11a+0x6*-0x505]=-0x1145+0x72d*-0x1+0xb*0x239,_0x1ec953[-0x21a6+0xf59+-0x47*-0x42]=-0x25*-0x9d+-0x4*-0x76c+-0x3461,_0x1ec953[-0x2221*0x1+-0x2466+0x4689]=-0x196a+0x824+0x1146,_0x1ec953[-0x244c+-0xa2b+0x2e7a]=-0xf95+-0xbc9+-0x71*-0x3e,_0x1ec953[0xb68+0x2086+-0x7*0x646]=0x2223+-0x1*-0x14ed+0x5*-0xb03,_0x1ec953[0x7*0x3b2+-0x107*-0xc+-0x262d]=-0x19e0+-0x1*0xbc3+-0x5*-0x787,_0x1ec953[-0x1*-0x17ab+-0x751+-0x1054]=0x1*-0x1f75+-0xfc3+-0x2f38*-0x1,_0x1ec953[-0xd87*0x2+-0xe26+0x83f*0x5]=0x29*-0xbc+-0x2198+0x3fb4,_0x1ec953[-0x3e*-0x15+-0xe3*0x1+0x42b*-0x1]=0x13*-0x29+0x6ef+-0x3e3,this;}['toString'](){return'['+this['data']['join'](',\x20')+']';}['transpose'](_0x3b34cc=this){const _0x3393d2=_0x3b34cc['data'],_0x3c2ec0=this['data'];if(_0x3393d2===_0x3c2ec0){let _0x54f455;_0x54f455=_0x3393d2[0x7*-0x51d+-0x1961+-0x3d2d*-0x1],_0x3c2ec0[0x1*0x17a7+-0x247f+0x8f*0x17]=_0x3393d2[0x2*-0xf67+-0xc3b+0x91*0x4c],_0x3c2ec0[0x7*0x51a+-0xb5*0x1d+-0xf32]=_0x54f455,_0x54f455=_0x3393d2[-0x11e1+-0x13e7+0x25ca*0x1],_0x3c2ec0[-0xb2*-0x1c+-0x1953+0x13*0x4f]=_0x3393d2[-0x14a9+0x1*0x1835+0x386*-0x1],_0x3c2ec0[0xe56+-0x2*-0x479+-0x1742]=_0x54f455,_0x54f455=_0x3393d2[-0x1*-0x783+-0x1170+0x86*0x13],_0x3c2ec0[0x14cf+-0x168a+0x1c0]=_0x3393d2[-0x128*0x8+-0x2179+0x2ac*0x10],_0x3c2ec0[0x6b*0x40+0x18f4+-0x33ad]=_0x54f455;}else _0x3c2ec0[0x7*-0x124+-0x869*0x2+0x18ce]=_0x3393d2[-0x5ca+-0x6fb*-0x2+-0x82c],_0x3c2ec0[0x136b+-0x1b16+-0x3d6*-0x2]=_0x3393d2[0x2696+-0x9*-0x30d+0x4*-0x1082],_0x3c2ec0[0x1f82+0x1055+-0x2fd5]=_0x3393d2[-0x3*-0x36c+-0x15bf+-0x1*-0xb81],_0x3c2ec0[0xf37+-0x2f*-0xc4+-0x750*0x7]=_0x3393d2[-0xce2+-0x299+-0x1*-0xf7c],_0x3c2ec0[-0xed4+0x2111+-0x1239]=_0x3393d2[-0x2173+-0x2222+0x4399],_0x3c2ec0[-0x7cf*-0x4+-0x2*0x1193+0x13*0x35]=_0x3393d2[-0x1473+-0x2284*0x1+0x1b7f*0x2],_0x3c2ec0[0x21bf+-0x199+-0x2020]=_0x3393d2[0x63+0xa30+-0x21d*0x5],_0x3c2ec0[-0x1*-0x2023+0x1020+-0x303c]=_0x3393d2[-0x1aaa+0x1*0x1c8b+0x2*-0xee],_0x3c2ec0[0x1318*0x2+0x1*0x7d3+-0x1*0x2dfb]=_0x3393d2[0xa34*-0x2+0x5*-0x218+0x1ee8];return this;}['setFromMat'+'4'](_0x165281){const _0x4dd815=_0x165281['data'],_0x4f0932=this['data'];return _0x4f0932[-0x1a07+-0x146e+-0x2e75*-0x1]=_0x4dd815[0x1*-0x2467+0x78e+0x1cd9],_0x4f0932[-0xd4*-0x1+0x1*0x2b7+-0x38a]=_0x4dd815[0x1*0x1bef+-0x11*-0x22+-0x228*0xe],_0x4f0932[-0x155b+-0xba7*0x3+0x3852]=_0x4dd815[-0x118c*-0x1+-0x1663*-0x1+0xd4f*-0x3],_0x4f0932[-0x22*0xb3+0x11*0x131+0x388]=_0x4dd815[-0x21c+-0xfa1*0x1+0x3*0x5eb],_0x4f0932[0x3b*-0x66+-0xbca+-0x14*-0x1c4]=_0x4dd815[0xc0e*0x1+0x1022+0x1c2b*-0x1],_0x4f0932[-0x1*0x1a51+0x65d+-0x1*-0x13f9]=_0x4dd815[-0x2*-0xa61+0x6d1*-0x5+-0xc9*-0x11],_0x4f0932[-0x1a*-0x107+0x61*0x45+-0x19*0x21d]=_0x4dd815[0xf9d+-0x1*0xf12+-0x83],_0x4f0932[-0x996+-0xaa4+-0x5*-0x40d]=_0x4dd815[0x77d+-0x45*-0x65+-0x22ad],_0x4f0932[0x2b*0x1f+0x1766+-0x1c93]=_0x4dd815[-0x2041*0x1+-0x419*0x1+0x2464*0x1],this;}['setFromQua'+'t'](_0x5d7ae8){const _0x12b950=_0x5d7ae8['x'],_0x55d5de=_0x5d7ae8['y'],_0x3d2628=_0x5d7ae8['z'],_0x380a30=_0x5d7ae8['w'],_0x339f06=_0x12b950+_0x12b950,_0x11925f=_0x55d5de+_0x55d5de,_0xaa2b63=_0x3d2628+_0x3d2628,_0x13a5fa=_0x12b950*_0x339f06,_0x3714f8=_0x12b950*_0x11925f,_0x586571=_0x12b950*_0xaa2b63,_0x147c95=_0x55d5de*_0x11925f,_0x240a56=_0x55d5de*_0xaa2b63,_0x855b2c=_0x3d2628*_0xaa2b63,_0x4dac12=_0x380a30*_0x339f06,_0x42fefa=_0x380a30*_0x11925f,_0x47ee38=_0x380a30*_0xaa2b63,_0x2b3187=this['data'];return _0x2b3187[-0xed5+-0x1c4*0x1+0x1099]=0x245c+-0x1*0x1a66+-0x9f5*0x1-(_0x147c95+_0x855b2c),_0x2b3187[0x2167+0x257*0x1+-0x23bd*0x1]=_0x3714f8+_0x47ee38,_0x2b3187[-0x923+0x8*0x2c9+-0x1*0xd23]=_0x586571-_0x42fefa,_0x2b3187[0x2*-0x979+-0x1056+0x234b]=_0x3714f8-_0x47ee38,_0x2b3187[-0x1381*-0x1+-0x571+-0xe0c]=-0xac0*-0x2+0x1a65*-0x1+0x4e6-(_0x13a5fa+_0x855b2c),_0x2b3187[-0x70d*-0x2+-0x43*-0xe+0x289*-0x7]=_0x240a56+_0x4dac12,_0x2b3187[-0x3d9*0x8+-0x9*0x239+0x32cf]=_0x586571+_0x42fefa,_0x2b3187[-0x21*-0x87+0x1871*0x1+-0x29d1]=_0x240a56-_0x4dac12,_0x2b3187[0x2440+0x1a18+-0x3e50]=-0x16e0+0x21*0x51+0xc70-(_0x13a5fa+_0x147c95),this;}['invertMat4'](_0x53b258){const _0x2eb569=_0x53b258['data'],_0x291ee7=_0x2eb569[-0x1*-0x1db3+-0x3*0xb25+0x3bc*0x1],_0x4d415a=_0x2eb569[0xe06+0x12bf+-0x20c4],_0x287431=_0x2eb569[0x15b+-0x2239+0x20e0],_0x5c86ea=_0x2eb569[-0x1*-0x22a3+0x158+-0x1f*0x129],_0x384c16=_0x2eb569[0x111c+0x8*-0xd1+-0xa8f],_0x469c21=_0x2eb569[0x10c1*-0x1+0x2020+-0xf59],_0x9c2959=_0x2eb569[-0x1e88+-0x187+0x2017],_0x40d298=_0x2eb569[0x2*0x11b+0x2206+-0xc11*0x3],_0x4afbcc=_0x2eb569[-0x1204+-0x4*-0x509+-0x216],_0x16ada7=_0x4afbcc*_0x384c16-_0x469c21*_0x40d298,_0x4bd741=-_0x4afbcc*_0x4d415a+_0x287431*_0x40d298,_0xa2ca5c=_0x469c21*_0x4d415a-_0x287431*_0x384c16,_0x5110d6=-_0x4afbcc*_0x5c86ea+_0x469c21*_0x9c2959,_0x13a8f7=_0x4afbcc*_0x291ee7-_0x287431*_0x9c2959,_0x4c5d9d=-_0x469c21*_0x291ee7+_0x287431*_0x5c86ea,_0x1a87ca=_0x40d298*_0x5c86ea-_0x384c16*_0x9c2959,_0x7dcc35=-_0x40d298*_0x291ee7+_0x4d415a*_0x9c2959,_0x4929af=_0x384c16*_0x291ee7-_0x4d415a*_0x5c86ea,_0x2f139c=_0x291ee7*_0x16ada7+_0x4d415a*_0x5110d6+_0x287431*_0x1a87ca;if(_0x2f139c===-0x12b5+-0x1de*-0x11+-0xd09)this['setIdentit'+'y']();else{const _0x479bd7=(0x1755+0x174b+0x1*-0x2e9f)/_0x2f139c,_0x3682cb=this['data'];_0x3682cb[0xdb*-0x25+0x992+0x1615*0x1]=_0x16ada7*_0x479bd7,_0x3682cb[0x1b76+-0x41*-0x8b+-0xfb0*0x4]=_0x4bd741*_0x479bd7,_0x3682cb[-0x1d69+0x1*0x1483+0x8e8]=_0xa2ca5c*_0x479bd7,_0x3682cb[-0x1*-0x12f6+0x11ce+0x24c1*-0x1]=_0x5110d6*_0x479bd7,_0x3682cb[-0x17eb+-0x1f7e*0x1+0x376d*0x1]=_0x13a8f7*_0x479bd7,_0x3682cb[0xd46+-0x250a+0x17c9*0x1]=_0x4c5d9d*_0x479bd7,_0x3682cb[-0x1a43+-0x6a2+-0x35*-0x9f]=_0x1a87ca*_0x479bd7,_0x3682cb[-0x357+-0x363*-0x5+-0x17*0x97]=_0x7dcc35*_0x479bd7,_0x3682cb[0x1155+0x3*0x251+-0x1840]=_0x4929af*_0x479bd7;}return this;}['transformV'+'ector'](_0x4c8658,_0x558ba0=new D()){const _0x5ec38d=this['data'],{x:_0x519060,y:_0x124525,z:_0x429aaf}=_0x4c8658;return _0x558ba0['x']=_0x519060*_0x5ec38d[-0x1d9e*0x1+-0x9b0+0x274e]+_0x124525*_0x5ec38d[-0x12e3+0x141*-0x1d+0x2b*0x149]+_0x429aaf*_0x5ec38d[-0x229a*-0x1+-0x2*-0xe67+-0x10a*0x3d],_0x558ba0['y']=_0x519060*_0x5ec38d[-0x50a*0x1+0x8c5*0x3+-0x1544]+_0x124525*_0x5ec38d[-0x15d9+-0xc22+0x21ff]+_0x429aaf*_0x5ec38d[-0x2156+0x24f+0x5*0x636],_0x558ba0['z']=_0x519060*_0x5ec38d[0xb63+-0x6*0x162+-0x315*0x1]+_0x124525*_0x5ec38d[0xb1*-0x17+-0x1ebe+0x6*0x7c7]+_0x429aaf*_0x5ec38d[-0x1e5*0x11+0x23*-0xd3+-0xe*-0x45d],_0x558ba0;}};h(hn,'IDENTITY',Object['freeze'](new hn())),h(hn,'ZERO',Object['freeze'](new hn()['set']([-0x13*0x1c9+0x1*-0x1d0f+0x2*0x1f7d,0xa77+-0x17a5*0x1+0x1*0xd2e,-0x1280+0x19b2+-0x732*0x1,-0xa9*-0x13+0x6e4+0x1*-0x136f,-0x1*0x20f6+0x2*-0xe5f+0x3db4,0x2*-0x1169+0x1c1f+0x6b3,-0x5dd+-0x792+0xd6f,0x2294+-0xdb*-0x9+-0x2a47,-0xef2+-0x216*0xd+0x2a10])));let _i=hn;const Gt=class Gt{constructor(_0x40876d=-0x2675+0xc62+0x1a13,_0x54684c=-0x239d+0x150b*-0x1+0x25*0x188){h(this,'x'),h(this,'y'),_0x40876d['length']===-0x22c1+-0x1*-0x243e+0x1*-0x17b?(this['x']=_0x40876d[0x133*-0x11+-0x55f+0x1d7*0xe],this['y']=_0x40876d[0x1706+0xcf*-0xc+0x1e7*-0x7]):(this['x']=_0x40876d,this['y']=_0x54684c);}['add'](_0x3a92e3){return this['x']+=_0x3a92e3['x'],this['y']+=_0x3a92e3['y'],this;}['add2'](_0x3f4a8a,_0x459b3a){return this['x']=_0x3f4a8a['x']+_0x459b3a['x'],this['y']=_0x3f4a8a['y']+_0x459b3a['y'],this;}['addScalar'](_0x49c816){return this['x']+=_0x49c816,this['y']+=_0x49c816,this;}['addScaled'](_0x28bce6,_0x16da39){return this['x']+=_0x28bce6['x']*_0x16da39,this['y']+=_0x28bce6['y']*_0x16da39,this;}['clone'](){const _0x4ff00e=this['constructo'+'r'];return new _0x4ff00e(this['x'],this['y']);}['copy'](_0x41ef13){return this['x']=_0x41ef13['x'],this['y']=_0x41ef13['y'],this;}['cross'](_0x39d390){return this['x']*_0x39d390['y']-this['y']*_0x39d390['x'];}['distance'](_0x2adcc8){const _0xb69595=this['x']-_0x2adcc8['x'],_0x146caa=this['y']-_0x2adcc8['y'];return Math['sqrt'](_0xb69595*_0xb69595+_0x146caa*_0x146caa);}['div'](_0x1e1ba0){return this['x']/=_0x1e1ba0['x'],this['y']/=_0x1e1ba0['y'],this;}['div2'](_0xac681c,_0x88e5fc){return this['x']=_0xac681c['x']/_0x88e5fc['x'],this['y']=_0xac681c['y']/_0x88e5fc['y'],this;}['divScalar'](_0x7045b8){return this['x']/=_0x7045b8,this['y']/=_0x7045b8,this;}['dot'](_0x2ae6bb){return this['x']*_0x2ae6bb['x']+this['y']*_0x2ae6bb['y'];}['equals'](_0x469ce8){return this['x']===_0x469ce8['x']&&this['y']===_0x469ce8['y'];}['equalsAppr'+'ox'](_0x18bbd3,_0x239243=0x6*0x579+0x4*0x67e+-0x3ace+0.000001){return Math['abs'](this['x']-_0x18bbd3['x'])<_0x239243&&Math['abs'](this['y']-_0x18bbd3['y'])<_0x239243;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y'];}['lerp'](_0x222efc,_0x2d58de,_0x2bcb6c){return this['x']=_0x222efc['x']+_0x2bcb6c*(_0x2d58de['x']-_0x222efc['x']),this['y']=_0x222efc['y']+_0x2bcb6c*(_0x2d58de['y']-_0x222efc['y']),this;}['mul'](_0x172d86){return this['x']*=_0x172d86['x'],this['y']*=_0x172d86['y'],this;}['mul2'](_0x460ae2,_0x261ff8){return this['x']=_0x460ae2['x']*_0x261ff8['x'],this['y']=_0x460ae2['y']*_0x261ff8['y'],this;}['mulScalar'](_0x17602b){return this['x']*=_0x17602b,this['y']*=_0x17602b,this;}['normalize'](_0x1fecb7=this){const _0x2f386e=_0x1fecb7['x']*_0x1fecb7['x']+_0x1fecb7['y']*_0x1fecb7['y'];if(_0x2f386e>0x9c3+0x1ffc+-0x1*0x29bf){const _0x3c3ac6=(0x14fb+-0x1b4*0x3+-0x3*0x54a)/Math['sqrt'](_0x2f386e);this['x']=_0x1fecb7['x']*_0x3c3ac6,this['y']=_0x1fecb7['y']*_0x3c3ac6;}return this;}['rotate'](_0x1179f6){const _0xc352b7=Math['atan2'](this['x'],this['y'])+_0x1179f6*Y['DEG_TO_RAD'],_0x5bad3a=Math['sqrt'](this['x']*this['x']+this['y']*this['y']);return this['x']=Math['sin'](_0xc352b7)*_0x5bad3a,this['y']=Math['cos'](_0xc352b7)*_0x5bad3a,this;}['angle'](){return Math['atan2'](this['x'],this['y'])*Y['RAD_TO_DEG'];}['angleTo'](_0x531b74){return Math['atan2'](this['x']*_0x531b74['y']+this['y']*_0x531b74['x'],this['x']*_0x531b74['x']+this['y']*_0x531b74['y'])*Y['RAD_TO_DEG'];}['floor'](_0x81b4e9=this){return this['x']=Math['floor'](_0x81b4e9['x']),this['y']=Math['floor'](_0x81b4e9['y']),this;}['ceil'](_0x1d9888=this){return this['x']=Math['ceil'](_0x1d9888['x']),this['y']=Math['ceil'](_0x1d9888['y']),this;}['round'](_0x2c1edf=this){return this['x']=Math['round'](_0x2c1edf['x']),this['y']=Math['round'](_0x2c1edf['y']),this;}['min'](_0x281fbb){return _0x281fbb['x']<this['x']&&(this['x']=_0x281fbb['x']),_0x281fbb['y']<this['y']&&(this['y']=_0x281fbb['y']),this;}['max'](_0x49fd15){return _0x49fd15['x']>this['x']&&(this['x']=_0x49fd15['x']),_0x49fd15['y']>this['y']&&(this['y']=_0x49fd15['y']),this;}['set'](_0x6a948e,_0x30cfda){return this['x']=_0x6a948e,this['y']=_0x30cfda,this;}['sub'](_0x168901){return this['x']-=_0x168901['x'],this['y']-=_0x168901['y'],this;}['sub2'](_0x6e9ea9,_0x22ee63){return this['x']=_0x6e9ea9['x']-_0x22ee63['x'],this['y']=_0x6e9ea9['y']-_0x22ee63['y'],this;}['subScalar'](_0x3c390a){return this['x']-=_0x3c390a,this['y']-=_0x3c390a,this;}['fromArray'](_0x45d6a2,_0x3b0f1b=-0x9cc+0x3a4+0x628){return this['x']=_0x45d6a2[_0x3b0f1b]??this['x'],this['y']=_0x45d6a2[_0x3b0f1b+(0x301*-0x1+0xd71*-0x1+0x1073)]??this['y'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+']';}['toArray'](_0x3a876c=[],_0xf55886=0x23d4*-0x1+0x1c0*0xd+-0x6*-0x22e){return _0x3a876c[_0xf55886]=this['x'],_0x3a876c[_0xf55886+(-0x1*-0x1edd+-0xb72+-0x136a*0x1)]=this['y'],_0x3a876c;}static['angleRad'](_0x495d8b,_0x1115f1){return Math['atan2'](_0x495d8b['x']*_0x1115f1['y']-_0x495d8b['y']*_0x1115f1['x'],_0x495d8b['x']*_0x1115f1['x']+_0x495d8b['y']*_0x1115f1['y']);}};h(Gt,'ZERO',Object['freeze'](new Gt(-0x44b+0x22c*0x5+-0x691,0x148a+0x1664+-0x2aee))),h(Gt,'HALF',Object['freeze'](new Gt(0x1020+0x1c*-0x6c+-0x450+0.5,0x1c4a+-0x2272+0x2*0x314+0.5))),h(Gt,'ONE',Object['freeze'](new Gt(0x9*-0xc1+0x2280+0xddb*-0x2,-0x1bb0+-0x588+0x2139))),h(Gt,'UP',Object['freeze'](new Gt(0x15b9+0xb5f+0x161*-0x18,-0x1*0x1342+0x63*0x29+0x368))),h(Gt,'DOWN',Object['freeze'](new Gt(-0xb4e+-0x3d1*-0x9+-0x170b,-(0x14*0x199+-0x633+-0x338*0x8)))),h(Gt,'RIGHT',Object['freeze'](new Gt(0x2471+0x98f+-0x2dff,-0x1cec+-0x1*-0x248d+0x1f*-0x3f))),h(Gt,'LEFT',Object['freeze'](new Gt(-(0x1*-0x97a+0x2096+0x23*-0xa9),0x2357+-0x2217*-0x1+-0x456e)));let J=Gt;const hr=class hr{constructor(_0x16ad26=0x1bf*-0xd+-0x1509+-0xaef*-0x4,_0x4eec5a=-0x1a14+-0x1980+0x3394,_0x461fa1=0x1722+-0x25e1+0xebf,_0xd5909d=-0x301+-0x40b+0x70c){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x16ad26['length']===0x175*-0xd+0x118e*-0x2+0x3611?(this['x']=_0x16ad26[0x1ebb+-0xf*-0x291+0x2*-0x229d],this['y']=_0x16ad26[0x221a+0xa2e+0x1*-0x2c47],this['z']=_0x16ad26[-0x1d7f+-0x195c+-0x35*-0x109],this['w']=_0x16ad26[-0x9*0x4a+-0x2331+0x25ce]):(this['x']=_0x16ad26,this['y']=_0x4eec5a,this['z']=_0x461fa1,this['w']=_0xd5909d);}['add'](_0x2236a9){return this['x']+=_0x2236a9['x'],this['y']+=_0x2236a9['y'],this['z']+=_0x2236a9['z'],this['w']+=_0x2236a9['w'],this;}['add2'](_0x42c210,_0x509391){return this['x']=_0x42c210['x']+_0x509391['x'],this['y']=_0x42c210['y']+_0x509391['y'],this['z']=_0x42c210['z']+_0x509391['z'],this['w']=_0x42c210['w']+_0x509391['w'],this;}['addScalar'](_0x36759a){return this['x']+=_0x36759a,this['y']+=_0x36759a,this['z']+=_0x36759a,this['w']+=_0x36759a,this;}['addScaled'](_0x4d6ccf,_0x3a4982){return this['x']+=_0x4d6ccf['x']*_0x3a4982,this['y']+=_0x4d6ccf['y']*_0x3a4982,this['z']+=_0x4d6ccf['z']*_0x3a4982,this['w']+=_0x4d6ccf['w']*_0x3a4982,this;}['clone'](){const _0x163225=this['constructo'+'r'];return new _0x163225(this['x'],this['y'],this['z'],this['w']);}['copy'](_0x3aa957){return this['x']=_0x3aa957['x'],this['y']=_0x3aa957['y'],this['z']=_0x3aa957['z'],this['w']=_0x3aa957['w'],this;}['div'](_0x49715f){return this['x']/=_0x49715f['x'],this['y']/=_0x49715f['y'],this['z']/=_0x49715f['z'],this['w']/=_0x49715f['w'],this;}['div2'](_0x2f43e6,_0x37e5b){return this['x']=_0x2f43e6['x']/_0x37e5b['x'],this['y']=_0x2f43e6['y']/_0x37e5b['y'],this['z']=_0x2f43e6['z']/_0x37e5b['z'],this['w']=_0x2f43e6['w']/_0x37e5b['w'],this;}['divScalar'](_0x17fd1c){return this['x']/=_0x17fd1c,this['y']/=_0x17fd1c,this['z']/=_0x17fd1c,this['w']/=_0x17fd1c,this;}['dot'](_0x55cd13){return this['x']*_0x55cd13['x']+this['y']*_0x55cd13['y']+this['z']*_0x55cd13['z']+this['w']*_0x55cd13['w'];}['equals'](_0x10a202){return this['x']===_0x10a202['x']&&this['y']===_0x10a202['y']&&this['z']===_0x10a202['z']&&this['w']===_0x10a202['w'];}['equalsAppr'+'ox'](_0x53c81a,_0x33939d=-0x1e0a*0x1+-0x1*0xfa6+0x2db0+0.000001){return Math['abs'](this['x']-_0x53c81a['x'])<_0x33939d&&Math['abs'](this['y']-_0x53c81a['y'])<_0x33939d&&Math['abs'](this['z']-_0x53c81a['z'])<_0x33939d&&Math['abs'](this['w']-_0x53c81a['w'])<_0x33939d;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x4c4d8a,_0x74497c,_0x56268b){return this['x']=_0x4c4d8a['x']+_0x56268b*(_0x74497c['x']-_0x4c4d8a['x']),this['y']=_0x4c4d8a['y']+_0x56268b*(_0x74497c['y']-_0x4c4d8a['y']),this['z']=_0x4c4d8a['z']+_0x56268b*(_0x74497c['z']-_0x4c4d8a['z']),this['w']=_0x4c4d8a['w']+_0x56268b*(_0x74497c['w']-_0x4c4d8a['w']),this;}['mul'](_0x37bd06){return this['x']*=_0x37bd06['x'],this['y']*=_0x37bd06['y'],this['z']*=_0x37bd06['z'],this['w']*=_0x37bd06['w'],this;}['mul2'](_0x2032d8,_0x234a4e){return this['x']=_0x2032d8['x']*_0x234a4e['x'],this['y']=_0x2032d8['y']*_0x234a4e['y'],this['z']=_0x2032d8['z']*_0x234a4e['z'],this['w']=_0x2032d8['w']*_0x234a4e['w'],this;}['mulScalar'](_0x28eece){return this['x']*=_0x28eece,this['y']*=_0x28eece,this['z']*=_0x28eece,this['w']*=_0x28eece,this;}['normalize'](_0x3b38e1=this){const _0xa52eee=_0x3b38e1['x']*_0x3b38e1['x']+_0x3b38e1['y']*_0x3b38e1['y']+_0x3b38e1['z']*_0x3b38e1['z']+_0x3b38e1['w']*_0x3b38e1['w'];if(_0xa52eee>-0xfe9*-0x2+-0x22d4+-0x4d*-0xa){const _0x9abd6f=(0x58+-0x1*-0x12a4+-0x2b*0x71)/Math['sqrt'](_0xa52eee);this['x']=_0x3b38e1['x']*_0x9abd6f,this['y']=_0x3b38e1['y']*_0x9abd6f,this['z']=_0x3b38e1['z']*_0x9abd6f,this['w']=_0x3b38e1['w']*_0x9abd6f;}return this;}['floor'](_0xe187df=this){return this['x']=Math['floor'](_0xe187df['x']),this['y']=Math['floor'](_0xe187df['y']),this['z']=Math['floor'](_0xe187df['z']),this['w']=Math['floor'](_0xe187df['w']),this;}['ceil'](_0x29506c=this){return this['x']=Math['ceil'](_0x29506c['x']),this['y']=Math['ceil'](_0x29506c['y']),this['z']=Math['ceil'](_0x29506c['z']),this['w']=Math['ceil'](_0x29506c['w']),this;}['round'](_0xc0fe49=this){return this['x']=Math['round'](_0xc0fe49['x']),this['y']=Math['round'](_0xc0fe49['y']),this['z']=Math['round'](_0xc0fe49['z']),this['w']=Math['round'](_0xc0fe49['w']),this;}['min'](_0x35639d){return _0x35639d['x']<this['x']&&(this['x']=_0x35639d['x']),_0x35639d['y']<this['y']&&(this['y']=_0x35639d['y']),_0x35639d['z']<this['z']&&(this['z']=_0x35639d['z']),_0x35639d['w']<this['w']&&(this['w']=_0x35639d['w']),this;}['max'](_0x2d84f2){return _0x2d84f2['x']>this['x']&&(this['x']=_0x2d84f2['x']),_0x2d84f2['y']>this['y']&&(this['y']=_0x2d84f2['y']),_0x2d84f2['z']>this['z']&&(this['z']=_0x2d84f2['z']),_0x2d84f2['w']>this['w']&&(this['w']=_0x2d84f2['w']),this;}['set'](_0x2f0cf4,_0x5095b7,_0x3059fb,_0x649b83){return this['x']=_0x2f0cf4,this['y']=_0x5095b7,this['z']=_0x3059fb,this['w']=_0x649b83,this;}['sub'](_0x1751ca){return this['x']-=_0x1751ca['x'],this['y']-=_0x1751ca['y'],this['z']-=_0x1751ca['z'],this['w']-=_0x1751ca['w'],this;}['sub2'](_0x1262cf,_0x588de7){return this['x']=_0x1262cf['x']-_0x588de7['x'],this['y']=_0x1262cf['y']-_0x588de7['y'],this['z']=_0x1262cf['z']-_0x588de7['z'],this['w']=_0x1262cf['w']-_0x588de7['w'],this;}['subScalar'](_0x454cfe){return this['x']-=_0x454cfe,this['y']-=_0x454cfe,this['z']-=_0x454cfe,this['w']-=_0x454cfe,this;}['fromArray'](_0x4c90bf,_0x5632c0=-0x1980+0x1*0x1d95+0x1*-0x415){return this['x']=_0x4c90bf[_0x5632c0]??this['x'],this['y']=_0x4c90bf[_0x5632c0+(0x400+0x37*0x4+-0x4db)]??this['y'],this['z']=_0x4c90bf[_0x5632c0+(-0x148a+-0x1*0x1bc5+-0x6e7*-0x7)]??this['z'],this['w']=_0x4c90bf[_0x5632c0+(-0x185b+0x18d+-0xb1*-0x21)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x3aba10=[],_0x589b2c=0x2061+-0x10b8+-0xfa9){return _0x3aba10[_0x589b2c]=this['x'],_0x3aba10[_0x589b2c+(0x17*0x25+-0x2336+0x1fe4)]=this['y'],_0x3aba10[_0x589b2c+(0x6*0x617+-0x36*-0xe+0x1c*-0x169)]=this['z'],_0x3aba10[_0x589b2c+(-0x2b9+-0x192f+-0x1*-0x1beb)]=this['w'],_0x3aba10;}};h(hr,'ZERO',Object['freeze'](new hr(0xe91+-0xcb7+-0x1da,-0x2130*-0x1+0x1862+-0x3992,0x1e34*-0x1+0x1d4c+0x1*0xe8,-0x1b84+0x17b5+0x3cf))),h(hr,'HALF',Object['freeze'](new hr(-0x1a51+0x5a5+0x14ac+0.5,0x1e83+0x1a7d*-0x1+-0x406+0.5,0x8*-0x43+0xc1a+-0xa02+0.5,0x1607*0x1+0x2043*-0x1+0xa*0x106+0.5))),h(hr,'ONE',Object['freeze'](new hr(-0x3*-0xab1+-0x324+0x1*-0x1cee,-0xf6+0x129c+-0x11a5*0x1,-0x1d07+0x23d0+0x4*-0x1b2,-0x16d0+-0x19*0x1f+-0x19d8*-0x1)));let re=hr;const jn=new J(),Rs=new D(),Js=new D(),ei=new D(),Dl=new D(),jr=class jr{constructor(){h(this,'data',new Float32Array(0x24fb*0x1+-0x1*-0x1cae+-0x4199)),this['data'][0x1723*-0x1+0xa10+-0x1*-0xd13]=this['data'][0x5*0x31d+0x10c+-0x1098]=this['data'][0x6d9*-0x3+0x5*0x1a2+0xc6b]=this['data'][0x22ce+-0x91e+-0x19a1]=-0x1102*-0x1+0x495+-0x1596;}static['_getPerspe'+'ctiveHalfS'+'ize'](_0x12f703,_0x5999ba,_0x5b198b,_0x1a3d3a,_0x2cf197){_0x2cf197?(_0x12f703['x']=_0x1a3d3a*Math['tan'](_0x5999ba*Math['PI']/(0x569*0x1+-0x1567+0x1166)),_0x12f703['y']=_0x12f703['x']/_0x5b198b):(_0x12f703['y']=_0x1a3d3a*Math['tan'](_0x5999ba*Math['PI']/(-0x9*-0x130+0x21c6+-0x16*0x1f5)),_0x12f703['x']=_0x12f703['y']*_0x5b198b);}['add2'](_0x34aa5e,_0x18e304){const _0x7012e3=_0x34aa5e['data'],_0x364fd3=_0x18e304['data'],_0x4dacda=this['data'];return _0x4dacda[-0x1d21*0x1+0x3*-0x11e+0x207b]=_0x7012e3[0x670+0xb*0x95+-0xcd7]+_0x364fd3[0x11af+0x29*0x7+-0x12ce],_0x4dacda[-0x1763*-0x1+0x2e5+0x1a47*-0x1]=_0x7012e3[0xcd1+0x1c72+0x14a1*-0x2]+_0x364fd3[-0x1fd3*-0x1+0x1f*-0x141+-0x1*-0x70d],_0x4dacda[-0x17df+-0x8fc+0x20dd]=_0x7012e3[0x1966*0x1+-0x2117+0x7b3]+_0x364fd3[0x1*0x5c9+0x21d7+-0x279e*0x1],_0x4dacda[0x6ab+-0xe05*-0x2+0x2*-0x1159]=_0x7012e3[0xb4e+-0x3*0x2f5+-0x26c]+_0x364fd3[-0xaa8+-0x347*-0x5+-0x5b8],_0x4dacda[0x2a2+-0x951+0x6b3]=_0x7012e3[0x190b*0x1+0x8*-0x98+-0x1447]+_0x364fd3[-0xc15+0xb86+0x15*0x7],_0x4dacda[0x1*0x1d2a+0x10*-0xca+-0x1085*0x1]=_0x7012e3[0x18*-0x80+-0x562+0x1167]+_0x364fd3[-0xab7+-0x268f+0x314b],_0x4dacda[-0x54b*-0x7+0xa85*0x1+-0x2f8c]=_0x7012e3[-0x1e11+-0x2*-0x12d5+0x1*-0x793]+_0x364fd3[-0xaec+-0xa93*0x1+-0x1585*-0x1],_0x4dacda[-0x81b+0x1144+-0x922]=_0x7012e3[-0x135d*-0x1+-0x11b*0x7+-0x1*0xb99]+_0x364fd3[0x2213*-0x1+0x3d8*0x8+-0x3*-0x11e],_0x4dacda[-0x1f53+0x20+0x1f3b]=_0x7012e3[-0x112c+0x13c4+-0x290]+_0x364fd3[-0x1071*-0x2+0x1*0x12cf+-0x1*0x33a9],_0x4dacda[0x3d2*-0x8+0x239a+-0x501]=_0x7012e3[0x190+-0x1fe6*-0x1+-0x216d]+_0x364fd3[-0x1787+-0x5*0x296+0x247e],_0x4dacda[-0x1a09+0x49*0x19+-0x1*-0x12f2]=_0x7012e3[0xbfb*-0x1+0x1c39+-0x40d*0x4]+_0x364fd3[0x9a6+-0x2*-0x95c+-0xe2a*0x2],_0x4dacda[0x75*0x19+0x1a7a+-0x25dc]=_0x7012e3[-0x65a*-0x5+0x307*-0x1+-0x1cb0]+_0x364fd3[-0x1d25+-0xf47+0x2c77],_0x4dacda[-0x1*0x907+-0xb22+0x1435]=_0x7012e3[0x9*0x195+-0x238f+0x446*0x5]+_0x364fd3[0x1f92+0x153*0x13+-0x38af],_0x4dacda[-0xe02+-0x1b0d+0x291c*0x1]=_0x7012e3[0x1a5d+-0x745+0x5*-0x3cf]+_0x364fd3[-0x232a+-0x180d*0x1+-0x1*-0x3b44],_0x4dacda[0x1738+-0x2*0x1f2+0x1*-0x1346]=_0x7012e3[-0x115*-0x12+0x165a+-0x29c6]+_0x364fd3[-0x3*0x371+0x13a7+-0x946],_0x4dacda[0x3*-0x58b+-0x10+-0x86*-0x20]=_0x7012e3[0xc7b+-0x222c+0x15c0]+_0x364fd3[-0x9cc+-0x95*0x25+0x1f64],this;}['add'](_0x420c0a){return this['add2'](this,_0x420c0a);}['clone'](){const _0x473d36=this['constructo'+'r'];return new _0x473d36()['copy'](this);}['copy'](_0x5eb04d){const _0x4c9595=_0x5eb04d['data'],_0x310d87=this['data'];return _0x310d87[-0x2ad+0x240b+0x10af*-0x2]=_0x4c9595[0x210e+-0x8a*0x10+-0x6a*0x3b],_0x310d87[0xba9+0x10cd+-0x1c75]=_0x4c9595[-0x167d+-0x5cb*-0x1+0x10b3],_0x310d87[0x295+-0x104a+0xdb7]=_0x4c9595[-0x1*0x1d8+0x8c6+-0x376*0x2],_0x310d87[-0x30*0xbe+0x101*0x16+0xd8d]=_0x4c9595[0x220a*0x1+0x1*-0xf5f+-0x12a8],_0x310d87[-0xdd9*0x2+0x202*-0x11+0x3dd8]=_0x4c9595[-0x19fc*0x1+0x1e72+-0x472],_0x310d87[-0x22c3+0x14e1+-0xde7*-0x1]=_0x4c9595[0x14d4+-0x417*0x1+0x1*-0x10b8],_0x310d87[0x1*-0x75f+-0x1395+0x1afa]=_0x4c9595[0x23bc+0x1bb*-0x1+-0x21fb],_0x310d87[0x21*-0x1d+-0x1*-0x4e5+-0x121*0x1]=_0x4c9595[-0x53*0xa+0x2411+-0x20cc],_0x310d87[0x1*0x17b9+0x1*-0x14f4+-0x2bd]=_0x4c9595[0x1*0x1baa+0xf*-0xc1+-0x1053],_0x310d87[0x64+-0x2456+-0x23fb*-0x1]=_0x4c9595[0xc11+0x18aa+-0x24b2],_0x310d87[0x176e+0x1*-0x1c19+0x4b5]=_0x4c9595[0x2493+-0x283*0xd+0x47*-0xe],_0x310d87[-0x972+-0x1968+-0x22e5*-0x1]=_0x4c9595[0x1213+-0xb14+-0x4*0x1bd],_0x310d87[0xd32+-0x1f16+-0x47c*-0x4]=_0x4c9595[0x20fd+-0x1a*-0x59+0xb*-0x3d1],_0x310d87[-0x30b+-0x3*0xb7+-0x9*-0x95]=_0x4c9595[-0x17ff+-0x1652+0x1*0x2e5e],_0x310d87[0xaaa*0x3+0x1977*-0x1+-0x679]=_0x4c9595[0x8d4*0x4+0x71e+-0xe2*0x30],_0x310d87[0x190e+0x281*-0xd+0x78e]=_0x4c9595[0x1bc3+0x1190+-0x2d44],this;}['equals'](_0x1eb9ae){const _0x7761cc=this['data'],_0x424af7=_0x1eb9ae['data'];return _0x7761cc[0xeb9*0x1+-0x141*0x17+0x1a*0x8b]===_0x424af7[-0x1763+0xa*0x2d2+-0x4d1]&&_0x7761cc[-0x79+-0x20db+0x2155]===_0x424af7[-0x26d8+0x48d+0x1126*0x2]&&_0x7761cc[0x606*-0x1+0x679*0x1+-0x71]===_0x424af7[-0x840+0x9fe*0x1+0x1*-0x1bc]&&_0x7761cc[-0xb52+-0x1c86+0x27db]===_0x424af7[0x644*-0x1+0x1*-0xf31+-0xc*-0x1ca]&&_0x7761cc[-0x1*0x3a1+0x81b+-0x23b*0x2]===_0x424af7[0x1700+-0x68*-0x13+-0x4*0x7ad]&&_0x7761cc[-0x4e1*-0x2+0x141d+-0x1dda*0x1]===_0x424af7[-0x1*-0x1517+0x12ef+-0x2801]&&_0x7761cc[-0x1326+-0x1a5*0x3+-0x231*-0xb]===_0x424af7[-0x2bd+0x1*-0x472+0x171*0x5]&&_0x7761cc[0x565*0x1+0x1ef5+-0x2453]===_0x424af7[0x6*-0x232+0x12e1+-0x5ae]&&_0x7761cc[0xe29+0x2004+0x1*-0x2e25]===_0x424af7[-0x1bb8*-0x1+0x864+0x2*-0x120a]&&_0x7761cc[-0x1c0e+-0x10a9+0x2cc0]===_0x424af7[0xca3+-0x2013+0x1379]&&_0x7761cc[-0x1739+-0x8*0x45d+-0x1*-0x3a2b]===_0x424af7[0x2405+0xa83+0x21d*-0x16]&&_0x7761cc[0x23af+-0x11*0x11b+-0x10d9]===_0x424af7[-0x1382+0xe3a*0x1+0x1*0x553]&&_0x7761cc[0x1410+-0x1*-0x1de5+0x31e9*-0x1]===_0x424af7[0x2504*-0x1+0x1f*-0x2+0x254e]&&_0x7761cc[-0x1*0x1e37+-0x2666+0x2*0x2255]===_0x424af7[0x495+-0x1*-0x1320+-0x17a8]&&_0x7761cc[-0xf2*-0x2+0x189d+0x1a73*-0x1]===_0x424af7[0x10dc+-0x1*-0x2263+0x5*-0xa3d]&&_0x7761cc[-0x6d*-0xf+0x1f29+-0x257d]===_0x424af7[-0x25e1*-0x1+-0x209d+-0x2b*0x1f];}['isIdentity'](){const _0x32b221=this['data'];return _0x32b221[0x19a1+0xf0d+-0x28ae]===0x21b3+0x38d+-0x1*0x253f&&_0x32b221[0x313*-0x2+0x52*0x31+-0x98b]===-0x1*0x347+-0x17*-0x1f+0x7e&&_0x32b221[0x7d*0x20+0x9b*-0x1+-0xf03*0x1]===-0x1c*-0x65+0x2*0x11d2+-0x2eb0&&_0x32b221[0x1307+0x123a+-0xe*0x2a9]===-0x182b*0x1+-0x1d3f+0x356a&&_0x32b221[0x983+-0x2625+0x2*0xe53]===-0x1503+0x2039*0x1+-0xb36&&_0x32b221[-0x12cc+0x1d46+-0xa75]===0x1012*0x1+-0x1e8f*0x1+0x2*0x73f&&_0x32b221[-0xd1e+0x1bd*-0x11+-0xe3b*-0x3]===-0x11*-0x13+0x11c*-0x11+0x1199&&_0x32b221[-0x65b*-0x2+-0x217c+0x14cd]===0x1*-0x6d+-0x4*-0x282+-0x99b*0x1&&_0x32b221[0x208b*-0x1+-0x5*0x37c+0x31ff]===-0x8b6+-0x65*0x59+0x2bd3&&_0x32b221[0x1d48+0xb*0x4+-0x1d6b]===0x1*0xaa3+0x2375+-0x2e18&&_0x32b221[0x1019*-0x1+-0xe31+-0x6*-0x50e]===0xa02+-0x1*0xe39+0x438&&_0x32b221[0x5f7+-0x1283+0x1*0xc97]===-0x1072+0x67*0x1d+-0x4c7*-0x1&&_0x32b221[-0x21f5+-0xc76+0x2e77]===-0x38d+0x1*0x5b2+0x3*-0xb7&&_0x32b221[0x4*0x6b+-0x5*-0x5ed+-0xa0*0x32]===-0x2*0x1084+-0x1*0xae3+-0x2beb*-0x1&&_0x32b221[0xb3*0x32+0x7f*-0x1+-0x2269]===-0x1e0f+-0x848+0x2657&&_0x32b221[0x54b*0x1+0x2e6*-0xb+0x1aa6]===-0xf*0x12b+0xa41+0x745;}['mul2'](_0x1d9428,_0x33fea0){const _0x5dda81=_0x1d9428['data'],_0x10a1eb=_0x33fea0['data'],_0x56a817=this['data'],_0x5c7990=_0x5dda81[-0xe91+0x1*0x10af+0x10f*-0x2],_0xd37f5=_0x5dda81[0x9ed+0x209f+-0x2a8b],_0x31df34=_0x5dda81[0x119d*0x2+0x1898+-0x3bd0],_0x57ed5d=_0x5dda81[0x2316+0x1*0x7c3+0x2ad6*-0x1],_0x1b210b=_0x5dda81[0x552*0x5+-0x18a2+-0x1f4],_0x35841c=_0x5dda81[0xd9f+0x15b4+-0x234e],_0x4e7bd6=_0x5dda81[0x100a+0xa03+-0x1a07],_0x54996b=_0x5dda81[0x1dbd+0x24af+-0x4265],_0x220731=_0x5dda81[-0x304*-0x3+-0x1ea7+0x1*0x15a3],_0xfdcff1=_0x5dda81[-0xf1*0xc+-0x194+0xce9*0x1],_0x3c580d=_0x5dda81[0x1*-0xce7+0x8dc+0x13*0x37],_0x248341=_0x5dda81[0x1de1+-0x1*0x1b75+-0xcb*0x3],_0x22b0e9=_0x5dda81[-0x1cc1+0x11f*0x22+0x9f*-0xf],_0x57acf0=_0x5dda81[0x1fe0+0x2e3*-0xd+0x5b4],_0x2b2fc2=_0x5dda81[0x2474+-0x4d*-0x1a+-0x2c38],_0x8b6dd4=_0x5dda81[0x1a49+0x1231*0x1+-0x2c6b*0x1];let _0x321144,_0x29f4ef,_0x4aa244,_0x24adc9;return _0x321144=_0x10a1eb[-0xcf+0x24*0xa+-0x1*0x99],_0x29f4ef=_0x10a1eb[-0x492+-0x3*-0xa3e+-0x1a27],_0x4aa244=_0x10a1eb[0x15*0xb7+-0x1*0x10fd+0x1fc],_0x24adc9=_0x10a1eb[-0xe*0x131+0x4*0x25b+-0x1*-0x745],_0x56a817[0x375+0x23b7*-0x1+0x2042]=_0x5c7990*_0x321144+_0x1b210b*_0x29f4ef+_0x220731*_0x4aa244+_0x22b0e9*_0x24adc9,_0x56a817[0x3*-0x2aa+-0x1*0x19e9+-0xa*-0x364]=_0xd37f5*_0x321144+_0x35841c*_0x29f4ef+_0xfdcff1*_0x4aa244+_0x57acf0*_0x24adc9,_0x56a817[0x16db+0x24a1+-0x3b7a]=_0x31df34*_0x321144+_0x4e7bd6*_0x29f4ef+_0x3c580d*_0x4aa244+_0x2b2fc2*_0x24adc9,_0x56a817[-0x1fce+0x23fc*-0x1+0x43cd]=_0x57ed5d*_0x321144+_0x54996b*_0x29f4ef+_0x248341*_0x4aa244+_0x8b6dd4*_0x24adc9,_0x321144=_0x10a1eb[0x2566+-0x2431+-0x3d*0x5],_0x29f4ef=_0x10a1eb[0x1f04+-0x70f+-0x17f0],_0x4aa244=_0x10a1eb[-0xd71+0x1193+-0x41c],_0x24adc9=_0x10a1eb[0x19b6+0x8e5+-0x2294],_0x56a817[0x21*-0xe5+0x1*0x952+-0x19*-0xcf]=_0x5c7990*_0x321144+_0x1b210b*_0x29f4ef+_0x220731*_0x4aa244+_0x22b0e9*_0x24adc9,_0x56a817[0x12*0x65+0x2*-0xf45+0x1775]=_0xd37f5*_0x321144+_0x35841c*_0x29f4ef+_0xfdcff1*_0x4aa244+_0x57acf0*_0x24adc9,_0x56a817[-0x36*0x40+0x380*0xa+-0x157a*0x1]=_0x31df34*_0x321144+_0x4e7bd6*_0x29f4ef+_0x3c580d*_0x4aa244+_0x2b2fc2*_0x24adc9,_0x56a817[-0x8d1*0x1+-0x2337+0x2c0f*0x1]=_0x57ed5d*_0x321144+_0x54996b*_0x29f4ef+_0x248341*_0x4aa244+_0x8b6dd4*_0x24adc9,_0x321144=_0x10a1eb[-0x17ba+0x11*-0xbe+0x2460],_0x29f4ef=_0x10a1eb[0xe6*0x7+0xf*0xc6+0x1*-0x11db],_0x4aa244=_0x10a1eb[-0x235f+0xdae+0x15bb],_0x24adc9=_0x10a1eb[-0x407*0x5+-0x177d+0x2bab],_0x56a817[-0x1b*-0x116+0xfab+0x2cf5*-0x1]=_0x5c7990*_0x321144+_0x1b210b*_0x29f4ef+_0x220731*_0x4aa244+_0x22b0e9*_0x24adc9,_0x56a817[-0x1b53+0x71*0x1+-0x1*-0x1aeb]=_0xd37f5*_0x321144+_0x35841c*_0x29f4ef+_0xfdcff1*_0x4aa244+_0x57acf0*_0x24adc9,_0x56a817[0x1*-0x1b02+0x3fa*0x7+-0x65*0x2]=_0x31df34*_0x321144+_0x4e7bd6*_0x29f4ef+_0x3c580d*_0x4aa244+_0x2b2fc2*_0x24adc9,_0x56a817[-0x22b2+-0x1d1b+-0xe3*-0x48]=_0x57ed5d*_0x321144+_0x54996b*_0x29f4ef+_0x248341*_0x4aa244+_0x8b6dd4*_0x24adc9,_0x321144=_0x10a1eb[0x90f*-0x4+-0x1c*-0x101+0x416*0x2],_0x29f4ef=_0x10a1eb[0x105d*0x1+0x68*0x8+-0x1390],_0x4aa244=_0x10a1eb[-0x21d+-0x1076+0x12a1],_0x24adc9=_0x10a1eb[0x2345+-0x1039+-0x12fd],_0x56a817[-0xe82+-0x17ba*-0x1+0x2*-0x496]=_0x5c7990*_0x321144+_0x1b210b*_0x29f4ef+_0x220731*_0x4aa244+_0x22b0e9*_0x24adc9,_0x56a817[-0x1*-0x19ab+0xf2*-0x25+0x4*0x257]=_0xd37f5*_0x321144+_0x35841c*_0x29f4ef+_0xfdcff1*_0x4aa244+_0x57acf0*_0x24adc9,_0x56a817[0x1e*-0xd2+0x25f6+-0xd4c]=_0x31df34*_0x321144+_0x4e7bd6*_0x29f4ef+_0x3c580d*_0x4aa244+_0x2b2fc2*_0x24adc9,_0x56a817[0xa91*-0x1+0x1929+-0xe89]=_0x57ed5d*_0x321144+_0x54996b*_0x29f4ef+_0x248341*_0x4aa244+_0x8b6dd4*_0x24adc9,this;}['mulAffine2'](_0x5d1b88,_0xce4192){const _0x374273=_0x5d1b88['data'],_0xadff5a=_0xce4192['data'],_0x31357f=this['data'],_0x3f44d6=_0x374273[0x20d0+0x21ac+-0x427c],_0x17d9e8=_0x374273[-0xb8b+0x13a9*0x1+-0x43*0x1f],_0x501405=_0x374273[0x1875+0x243a+-0x3cad],_0x25ef6d=_0x374273[0x22d+0x156e+-0x1797],_0x51fb8c=_0x374273[-0x1*0x169d+-0xa15+-0x43*-0x7d],_0x531c5d=_0x374273[0x4*0x88+0x60c+-0x826],_0x437301=_0x374273[0x1553+0x4d4+-0x1a1f],_0x14838b=_0x374273[0x6*-0x74+-0x3d6*-0x4+0xb*-0x125],_0x1c4de3=_0x374273[-0xf4f*0x1+0x7*0x1f7+0x198],_0x62e012=_0x374273[0x1*-0x9bb+-0x158a+0x1f51],_0x47a004=_0x374273[0x419*-0x3+0x1bb+0xa9d*0x1],_0x127039=_0x374273[0x1ec6*0x1+-0xaa*0x34+0x4*0xf4];let _0x226627,_0x26ff33,_0x22e948;return _0x226627=_0xadff5a[0x138e+-0x99f*-0x3+-0x306b],_0x26ff33=_0xadff5a[-0x48d*-0x3+-0x3ce+-0xa8*0xf],_0x22e948=_0xadff5a[-0x1d*0xdf+-0x1b3f+0x3484],_0x31357f[0x1548+0x1*0x11df+-0x101*0x27]=_0x3f44d6*_0x226627+_0x25ef6d*_0x26ff33+_0x437301*_0x22e948,_0x31357f[-0x1*0x170f+-0x89f+0x1*0x1faf]=_0x17d9e8*_0x226627+_0x51fb8c*_0x26ff33+_0x14838b*_0x22e948,_0x31357f[0x6db*0x3+-0x9ba+-0xad5]=_0x501405*_0x226627+_0x531c5d*_0x26ff33+_0x1c4de3*_0x22e948,_0x31357f[0x195e+0x1109+0xa99*-0x4]=-0x8f6*-0x1+-0x960+0x6a,_0x226627=_0xadff5a[0xc3f+0x2*-0x10ac+0x151d],_0x26ff33=_0xadff5a[0x2462*0x1+0x870+0x1*-0x2ccd],_0x22e948=_0xadff5a[-0x3a*-0x3a+-0xcb6+-0xd*0x8],_0x31357f[-0xa0*-0x2+0x22c7+-0x1*0x2403]=_0x3f44d6*_0x226627+_0x25ef6d*_0x26ff33+_0x437301*_0x22e948,_0x31357f[0x60e+0x6f5+-0x2*0x67f]=_0x17d9e8*_0x226627+_0x51fb8c*_0x26ff33+_0x14838b*_0x22e948,_0x31357f[-0xa2f+-0x1470+-0x1*-0x1ea5]=_0x501405*_0x226627+_0x531c5d*_0x26ff33+_0x1c4de3*_0x22e948,_0x31357f[-0x5e1+-0x6*0x446+0x2a1*0xc]=-0x526*0x1+0xdaf+0x73*-0x13,_0x226627=_0xadff5a[0x2bd+0x131b*-0x2+-0x3d*-0x95],_0x26ff33=_0xadff5a[0xbc*-0x11+-0xaea+0x1*0x176f],_0x22e948=_0xadff5a[0xff7+-0x11b*0x14+0x62f],_0x31357f[0x1f9e+-0x1*0x19fd+-0x599]=_0x3f44d6*_0x226627+_0x25ef6d*_0x26ff33+_0x437301*_0x22e948,_0x31357f[-0x1ec1+-0x4a5*-0x2+0x2*0xac0]=_0x17d9e8*_0x226627+_0x51fb8c*_0x26ff33+_0x14838b*_0x22e948,_0x31357f[-0x2053+0x164c+-0x35b*-0x3]=_0x501405*_0x226627+_0x531c5d*_0x26ff33+_0x1c4de3*_0x22e948,_0x31357f[0x1fe4+0x1fc7+-0x3fa0]=0x1633*0x1+0x1b1+-0x17e4,_0x226627=_0xadff5a[0x64d*-0x6+-0x1*-0x21eb+0x3ef],_0x26ff33=_0xadff5a[-0x1c*0x6c+0x7*-0x20b+0x22*0xc5],_0x22e948=_0xadff5a[-0x5*-0x97+0x31*-0x57+0xdc2],_0x31357f[-0x26fc+0x2*0x283+0x6*0x5ab]=_0x3f44d6*_0x226627+_0x25ef6d*_0x26ff33+_0x437301*_0x22e948+_0x62e012,_0x31357f[-0x520+-0x17d5*-0x1+0x31c*-0x6]=_0x17d9e8*_0x226627+_0x51fb8c*_0x26ff33+_0x14838b*_0x22e948+_0x47a004,_0x31357f[0x1dcb+-0x2*-0x22c+-0x2215]=_0x501405*_0x226627+_0x531c5d*_0x26ff33+_0x1c4de3*_0x22e948+_0x127039,_0x31357f[0x686+0xe26+0x3*-0x6df]=-0x1acb+0x22bc*0x1+-0x3f8*0x2,this;}['mul'](_0x34caa8){return this['mul2'](this,_0x34caa8);}['transformP'+'oint'](_0xf78a69,_0x4d14b8=new D()){const _0x3aa89a=this['data'],{x:_0x47e6c3,y:_0x396043,z:_0x687c29}=_0xf78a69;return _0x4d14b8['x']=_0x47e6c3*_0x3aa89a[-0x6d7+0x16ff+-0x1028]+_0x396043*_0x3aa89a[-0x572*-0x1+-0x2407+0x1e99]+_0x687c29*_0x3aa89a[-0x253*-0x3+-0x1d*0xb2+0xd39]+_0x3aa89a[-0x3dc*0x8+-0x16a*-0xb+0xf5e],_0x4d14b8['y']=_0x47e6c3*_0x3aa89a[-0x1f91+-0x949*-0x3+-0x3*-0x13d]+_0x396043*_0x3aa89a[-0x1a74+-0xdfe+0x2877]+_0x687c29*_0x3aa89a[-0x2219+0x14*0x173+0x526]+_0x3aa89a[0xb35*0x2+0x2445+-0x3aa2],_0x4d14b8['z']=_0x47e6c3*_0x3aa89a[0x128*0x2+0xd5d+-0x15*0xbf]+_0x396043*_0x3aa89a[0xbd+-0xde6+-0x4b*-0x2d]+_0x687c29*_0x3aa89a[0xcb0+-0x234b*0x1+0x16a5]+_0x3aa89a[-0xe34+-0x2*-0xa0d+-0x5d8],_0x4d14b8;}['transformV'+'ector'](_0x1a8cd4,_0x1daff0=new D()){const _0x2655a3=this['data'],{x:_0x23f436,y:_0x185c1c,z:_0x32d1f1}=_0x1a8cd4;return _0x1daff0['x']=_0x23f436*_0x2655a3[-0xc23*-0x3+-0x177a*0x1+0x1*-0xcef]+_0x185c1c*_0x2655a3[0x2*-0x103+0x1d55+-0x1b4b]+_0x32d1f1*_0x2655a3[0x5ce+-0x1b6d+0x15a7],_0x1daff0['y']=_0x23f436*_0x2655a3[-0x6a3*-0x4+-0x1ecb*-0x1+-0x3956]+_0x185c1c*_0x2655a3[-0xa7b+-0x1752*-0x1+0xcd2*-0x1]+_0x32d1f1*_0x2655a3[-0x2605+0x2*-0xa7+0x275c],_0x1daff0['z']=_0x23f436*_0x2655a3[0xa8b+0x5*-0x4ef+0x192*0x9]+_0x185c1c*_0x2655a3[-0x1c5e+-0xa1*-0x3a+-0x5*0x19e]+_0x32d1f1*_0x2655a3[0x2*-0x299+-0x4*-0x755+-0x1818],_0x1daff0;}['transformV'+'ec4'](_0x59052e,_0x26cb5e=new re()){const _0x322532=this['data'],{x:_0x216206,y:_0x7b5ba,z:_0x36d0cf,w:_0x23ad03}=_0x59052e;return _0x26cb5e['x']=_0x216206*_0x322532[-0x38b+-0x241a+0x27a5]+_0x7b5ba*_0x322532[-0x1*-0x1a0f+0xafd*-0x1+-0xf0e]+_0x36d0cf*_0x322532[0x25e8+-0x214c+-0x4*0x125]+_0x23ad03*_0x322532[-0xfaa+-0xa38*0x2+-0xe*-0x295],_0x26cb5e['y']=_0x216206*_0x322532[-0x1100*0x2+-0x99b*0x1+0x2b9c]+_0x7b5ba*_0x322532[-0x320*0xa+-0x1b7*0xa+-0xb9*-0x43]+_0x36d0cf*_0x322532[0xe97+0x1bf2+-0x2a80]+_0x23ad03*_0x322532[-0x1fd8+0xb*0x28+0x1e2d],_0x26cb5e['z']=_0x216206*_0x322532[0xfcc+-0x12a8+0x2de]+_0x7b5ba*_0x322532[0x6ad*-0x5+0x1680+0xae7]+_0x36d0cf*_0x322532[-0x242d+0x6d*-0x7+0x1*0x2732]+_0x23ad03*_0x322532[-0x5*0x765+0x7d0+0x1d37*0x1],_0x26cb5e['w']=_0x216206*_0x322532[0x1ac4+-0x2*0x395+0x3b*-0x55]+_0x7b5ba*_0x322532[-0x169a+0x1*-0x43b+0x3*0x8f4]+_0x36d0cf*_0x322532[-0x920+-0x3b*0x35+0x1562]+_0x23ad03*_0x322532[-0x3*0xad0+0xa2+0x1fdd],_0x26cb5e;}['setLookAt'](_0x3943cf,_0x424486,_0x354f9d){ei['sub2'](_0x3943cf,_0x424486)['normalize'](),Js['copy'](_0x354f9d)['normalize'](),Rs['cross'](Js,ei)['normalize'](),Js['cross'](ei,Rs);const _0xf05981=this['data'];return _0xf05981[-0x1eba+0xada+0x13e0]=Rs['x'],_0xf05981[-0x9a9*-0x4+0xbb1+-0x3254]=Rs['y'],_0xf05981[0x2*-0x818+0x1*-0x2ef+0x1321]=Rs['z'],_0xf05981[0x13a1+-0x1*-0xaf7+-0x1e95]=0x2*-0xfa6+0xc22+0x16*0xdf,_0xf05981[-0x25b4+-0x17b+-0x3*-0xd11]=Js['x'],_0xf05981[0x5*-0x782+-0x8d1*-0x1+0x1cbe]=Js['y'],_0xf05981[-0x2574+0xf5a+0x1620]=Js['z'],_0xf05981[0x112*0x11+-0x1d1d+0xaf2]=-0x1f7e+0x1c98+0x2*0x173,_0xf05981[0xb4b+0x2fc+-0xe3f]=ei['x'],_0xf05981[-0x1*-0x84a+0x1361*-0x1+-0x59*-0x20]=ei['y'],_0xf05981[-0x1*-0xa65+0x16ca+0x6a1*-0x5]=ei['z'],_0xf05981[0x14*-0x17b+0x1a72+0x335]=-0x60c+0x20bb+-0x1aaf,_0xf05981[0x16cd+-0x2b*-0xc4+0x1*-0x37ad]=_0x3943cf['x'],_0xf05981[0xb*-0x21e+-0x147c+0x2bd3]=_0x3943cf['y'],_0xf05981[0x2dd*0xb+0x8ef+-0x88*0x4c]=_0x3943cf['z'],_0xf05981[-0x1f55+0xe87*-0x1+-0x92f*-0x5]=0x2502+-0xf*0x20e+-0x62f,this;}['setFrustum'](_0x5d5d02,_0x1af08f,_0x4822b4,_0x48b731,_0x4bc132,_0x4e0b99){const _0x3e2f30=(-0x9*0x7+0x13f*-0x3+0x3fe)*_0x4bc132,_0x5eae15=_0x1af08f-_0x5d5d02,_0x3ef01c=_0x48b731-_0x4822b4,_0x16d9be=_0x4e0b99-_0x4bc132,_0x5561a5=this['data'];return _0x5561a5[-0xb69+0x1a51+-0xee8]=_0x3e2f30/_0x5eae15,_0x5561a5[-0x223b+0x98c+0x18b0]=0x3f3*-0x6+-0xf70+0x2722,_0x5561a5[-0x21e7+-0x1be1+0x3dca]=-0x13d*0xe+0x2309+-0x17*0xc5,_0x5561a5[0xf9b+-0x810+-0x788]=0x1e*-0x79+0x24fa+-0x16cc,_0x5561a5[-0x1ea2+0x1bbe+0x2e8]=0x1bb+-0x896+0x6db,_0x5561a5[0x51b*0x7+-0x1ff3+-0x3c5]=_0x3e2f30/_0x3ef01c,_0x5561a5[-0x1f1b+-0x1*0xc2+0x3*0xaa1]=-0x69d+-0x5fb*0x3+0x188e,_0x5561a5[-0x1516+-0x647+0x1b64]=0x23ad*0x1+0x215c+0x1703*-0x3,_0x5561a5[0x27b*0xf+0x1f*0xc2+-0x3cab]=(_0x1af08f+_0x5d5d02)/_0x5eae15,_0x5561a5[-0x10*-0x22a+-0xd62+-0x1535]=(_0x48b731+_0x4822b4)/_0x3ef01c,_0x5561a5[0xac6*-0x3+-0xec8+0x2f24]=(-_0x4e0b99-_0x4bc132)/_0x16d9be,_0x5561a5[0x1214+0x171d*0x1+-0x1*0x2926]=-(0x1e7*0xc+0x13*0x11f+-0x2c20),_0x5561a5[0x1346*0x1+-0x69d+-0xc9d*0x1]=-0x1*-0x470+-0x1b*-0x69+-0xf83,_0x5561a5[-0x1111+-0xb64+0x1c82]=-0x23f+-0x1b*-0xd+0xe0,_0x5561a5[-0x1ef7*-0x1+0xe02+-0x1*0x2ceb]=-_0x3e2f30*_0x4e0b99/_0x16d9be,_0x5561a5[-0x514+-0x788*0x5+0x139*0x23]=-0xc09+0x1ae*-0x2+-0x7*-0x233,this;}['setPerspec'+'tive'](_0x5d8bd4,_0x248291,_0x7bb06a,_0x179386,_0x1364b7){return jr['_getPerspe'+'ctiveHalfS'+'ize'](jn,_0x5d8bd4,_0x248291,_0x7bb06a,_0x1364b7),this['setFrustum'](-jn['x'],jn['x'],-jn['y'],jn['y'],_0x7bb06a,_0x179386);}['setOrtho'](_0x29dc0c,_0x45379d,_0x253038,_0x38b2c3,_0x33f03e,_0x2e6630){const _0x42b800=this['data'];return _0x42b800[-0x893*-0x1+-0xdff+0x56c]=(0x9fb*-0x3+-0x5*-0x64a+-0x17f)/(_0x45379d-_0x29dc0c),_0x42b800[0xc1b+-0x4f*0x10+-0x72a]=0x1*-0x5d8+0x1357+-0x1*0xd7f,_0x42b800[-0xe*0x15+0x1*-0x785+-0x8ad*-0x1]=-0x1fc+-0xc0*0x22+-0x1*-0x1b7c,_0x42b800[-0x4e1+-0x202d+0x1*0x2511]=0x2*0xa0a+-0xd7f+-0x695,_0x42b800[0x551*0x2+0x29f*0xb+-0x2773]=-0x8cc+0x12da+-0xa0e,_0x42b800[0x1a05+0x50f+-0x1f0f*0x1]=(-0x4e4*0x1+0x1ae9+-0x7*0x325)/(_0x38b2c3-_0x253038),_0x42b800[0x201+-0x6*-0x412+-0x1a67]=0xf49+0x2*-0x11c+-0xd11,_0x42b800[0x27a+0x1be*0xb+-0x159d]=0x95d+-0x11ce+0x871,_0x42b800[-0x7ba*-0x1+0x1*0x1786+-0x1f38]=0x3c1+-0x25cf*-0x1+-0x2990,_0x42b800[-0xd*-0x22c+0x2b7+-0x1eea]=0x19ac+-0x6b*-0x52+-0x3bf2,_0x42b800[-0x235b+0x1*0x13a2+0xfc3]=-(0x19a4+0x24f7+0x281*-0x19)/(_0x2e6630-_0x33f03e),_0x42b800[0x10f*0x5+0x9a9+0x15b*-0xb]=-0x1*-0x15ca+0x23*0x2f+-0x1*0x1c37,_0x42b800[0x1c21+0x1bb9+-0x37ce]=-(_0x45379d+_0x29dc0c)/(_0x45379d-_0x29dc0c),_0x42b800[0x1*-0x509+0x2687+-0x2171]=-(_0x38b2c3+_0x253038)/(_0x38b2c3-_0x253038),_0x42b800[0xc*-0x270+-0x1a*0x3d+0x2380*0x1]=-(_0x2e6630+_0x33f03e)/(_0x2e6630-_0x33f03e),_0x42b800[0x448*-0x2+-0x14cb*-0x1+0xa4*-0x13]=-0x15*0x6e+0x224d+-0x1946,this;}['setFromAxi'+'sAngle'](_0x2f7215,_0x34369d){_0x34369d*=Y['DEG_TO_RAD'];const {x:_0xf4b39c,y:_0x3d8992,z:_0x2e3905}=_0x2f7215,_0x2575a3=Math['cos'](_0x34369d),_0x420a99=Math['sin'](_0x34369d),_0xd49638=0x1106+-0x1edc+0x49d*0x3-_0x2575a3,_0xaa4bb3=_0xd49638*_0xf4b39c,_0x17be9c=_0xd49638*_0x3d8992,_0x5475e7=this['data'];return _0x5475e7[0x261c+0xf33*0x1+-0x354f]=_0xaa4bb3*_0xf4b39c+_0x2575a3,_0x5475e7[0xf45+-0xce1*-0x1+-0x1c25]=_0xaa4bb3*_0x3d8992+_0x420a99*_0x2e3905,_0x5475e7[-0x1*0x977+0x20f9+-0xbc*0x20]=_0xaa4bb3*_0x2e3905-_0x420a99*_0x3d8992,_0x5475e7[-0x1fd5+0x1be4+0x3f4]=0xbe*0xf+-0x9dd+-0x145,_0x5475e7[0x11aa+-0x1696+0x4*0x13c]=_0xaa4bb3*_0x3d8992-_0x420a99*_0x2e3905,_0x5475e7[0x277+-0xe81+0xc0f]=_0x17be9c*_0x3d8992+_0x2575a3,_0x5475e7[-0x2e*-0x9+-0x3c0+0x2*0x114]=_0x17be9c*_0x2e3905+_0x420a99*_0xf4b39c,_0x5475e7[0xd22+0x26e3+-0x33fe]=0x2*-0x8ed+-0x24c5*0x1+0x369f,_0x5475e7[0x3*0x5c9+-0x5d3*0x6+0x119f]=_0xaa4bb3*_0x2e3905+_0x420a99*_0x3d8992,_0x5475e7[0x24e8+-0x1468+0x1077*-0x1]=_0x17be9c*_0x2e3905-_0xf4b39c*_0x420a99,_0x5475e7[0x1d9e+0x10d2+-0x2e66]=_0xd49638*_0x2e3905*_0x2e3905+_0x2575a3,_0x5475e7[0x24b9+-0x3ca+-0x839*0x4]=0x20*-0x8e+0xa52*-0x1+0xe09*0x2,_0x5475e7[0x1a07+0x1*-0x235d+0x2*0x4b1]=-0x91e+-0x21e3+0x2b01,_0x5475e7[0xf1+-0x10*0xc+-0x24]=-0x11c*-0x1d+-0xa4e+-0x15de,_0x5475e7[-0x10*-0x1a6+0x1889+-0x32db]=-0x1*-0x13ed+0x62*0x64+-0x3a35,_0x5475e7[-0x11db+-0x5*0x368+-0x2a*-0xd5]=-0x98d+-0x1087*0x1+0x1a15,this;}['setTransla'+'te'](_0x542aeb,_0x25e995,_0xc2c82c){const _0xbe6a87=this['data'];return _0xbe6a87[-0x55d*0x5+0x1ec7+-0x3f6]=-0x1*0x974+-0x1*0x8ea+0x125f,_0xbe6a87[0x97a+-0x653*-0x2+0x1*-0x161f]=0x1*-0x2521+-0x3a2+-0x28c3*-0x1,_0xbe6a87[-0x94*0x1d+-0x918+0x9a*0x2b]=0x1*0x1cf6+0x6a6*-0x5+0x448,_0xbe6a87[0x3*-0x52d+-0x517*-0x1+0xa73]=-0x1*0x142a+-0x24c4+0x38ee,_0xbe6a87[0x1056+-0x14*0x153+0xa2a]=-0x2558+-0x2380+0x48d8,_0xbe6a87[0x1975+0x2*0xf32+-0x37d4]=0x2*-0xdb7+-0x2445+-0xc*-0x54f,_0xbe6a87[0x47f+-0xfc9+0xb50]=-0x1953+-0x1*-0x3f+0x6b*0x3c,_0xbe6a87[-0xabb+-0x2*-0x5a7+0xe*-0xa]=-0x1c2d+-0x532+0x215f*0x1,_0xbe6a87[0x2f*0x3d+0xb*0x281+-0x26b6]=0x1530+-0x36*0xc+0x954*-0x2,_0xbe6a87[0x1*-0x9a9+-0xb4f*0x2+0x58*0x5e]=0x6ca*-0x1+0x9*-0x329+-0x233b*-0x1,_0xbe6a87[-0x3b*0x76+0x641+0x14fb]=-0x698+0xd1f*-0x2+-0x1*-0x20d7,_0xbe6a87[-0x1352+-0x1591+0x28ee]=0x1bb*-0x16+-0x22f0+0x4902,_0xbe6a87[-0x5*0x525+0x4*-0x2a2+-0x244d*-0x1]=_0x542aeb,_0xbe6a87[-0x1daa+-0xfc2+0x2d79]=_0x25e995,_0xbe6a87[-0x2*0x1256+0x19*0x31+0x1ff1]=_0xc2c82c,_0xbe6a87[-0x115e+-0x6b5+0x1822]=-0x1d1d+-0x6*0x31b+0x2fc0*0x1,this;}['setScale'](_0x79a4a6,_0x33e9d2,_0x1bb4eb){const _0x30be36=this['data'];return _0x30be36[-0x1d4b*-0x1+0x173b+-0x12*0x2eb]=_0x79a4a6,_0x30be36[-0x60a+-0x1f9a+0x25a5*0x1]=-0x1800+0x951+0x219*0x7,_0x30be36[-0x1*-0x4ba+-0x1f6+0x2c2*-0x1]=0x5c8+0x1f*-0x125+-0x1db3*-0x1,_0x30be36[0x33*-0x2f+0x156d+-0xc0d]=0x1*-0x219e+-0x8dd+0x2a7b,_0x30be36[-0xe8c+-0x1*0x1f39+-0xf43*-0x3]=-0x2479+-0x17c5+-0xb*-0x57a,_0x30be36[0x9*0x29+0xaaf*0x2+-0x16ca]=_0x33e9d2,_0x30be36[-0x5*0x751+0x941+0x1b5a]=0x2*-0x822+-0xaf0+0x1b34,_0x30be36[-0x1ddc+-0x202*-0xa+-0x1*-0x9cf]=-0x29*-0xc9+0x3b*0x3b+-0x2dca,_0x30be36[0x2b6*-0x4+0x256f+-0x1a8f]=0x976+-0x2*-0x54e+-0x1412,_0x30be36[0x1*0x2627+-0xb2+0x5*-0x77c]=0x6*-0x390+0x1*-0x186b+0x2dcb,_0x30be36[-0x1*0x1bfe+0x1c1*0x1+0x1a47*0x1]=_0x1bb4eb,_0x30be36[-0x1623+-0xdf7+-0x1e7*-0x13]=-0x3*0x2ae+0xb8f+-0x385,_0x30be36[-0x263f+-0x215*0xd+0x4*0x1057]=0x464*0x2+0x897*-0x3+0x10fd,_0x30be36[-0x84*-0x19+-0x2292*0x1+0x1*0x15bb]=-0x23ae+-0x6cd+-0x5*-0x87f,_0x30be36[-0x19d7+0x1ba4+-0x1bf]=0x1811*-0x1+0x1e2a+0xdf*-0x7,_0x30be36[-0xfa0+0x36e*-0x3+-0x19f9*-0x1]=0xbe3+0x1*-0x15f2+0xa10,this;}['setViewpor'+'t'](_0xe83e7,_0x16db61,_0x3a26a1,_0x8df662){const _0x4e7869=this['data'];return _0x4e7869[-0xa*0x2bd+-0x1*0x2227+0x3d89]=_0x3a26a1*(0x48b*0x2+-0x788+-0x18e+0.5),_0x4e7869[0x254c+-0x2cf*-0x2+0xa9*-0x41]=0x13a3+-0x1*0x2449+-0x10a6*-0x1,_0x4e7869[0x1*-0xab0+0x1906+0x2*-0x72a]=-0x2629*-0x1+0x506+-0x2b2f,_0x4e7869[-0x22d6+0x133*-0x5+0x28d8]=-0x1ae4+0x265f+-0xb7b,_0x4e7869[0x1caa+0x1*0x4ed+0x3bb*-0x9]=0x2*0x16+-0x33*0x87+-0x1ab9*-0x1,_0x4e7869[0x1*0xd55+0x179c+-0x24ec]=_0x8df662*(0x19e8+-0x7bb*-0x1+0x1*-0x21a3+0.5),_0x4e7869[-0xadb+0x195a+-0xe79]=0x1*-0x2317+0x1*0x9e5+0x1932,_0x4e7869[0x1*0x415+0xbc*-0x13+0x2*0x4f3]=-0x481*0x4+-0x75*-0x3d+-0x1*0x9dd,_0x4e7869[0x46*0x7a+-0x1*0x561+-0x2d*0x9f]=-0x23cf+-0x2586+0x4955,_0x4e7869[-0x125*0xb+0x7f*0x19+0x39]=0x3b*-0x1+0x1a4b+-0x1a10,_0x4e7869[0x2*0x2c9+0x31*0x13+0x92b*-0x1]=-0x88a*0x4+-0xc7*-0x26+0x49e+0.5,_0x4e7869[0x3*-0xb9b+0x2*-0x211+0x26fe]=-0xaa6*-0x2+0x6fa*0x1+-0x1c46,_0x4e7869[-0x1fe0+-0x74f+-0xb*-0x391]=_0xe83e7+_0x3a26a1*(0x12e5*-0x1+-0xecd+0x21b2*0x1+0.5),_0x4e7869[0x1*-0x21a4+-0x2*0xa4d+-0x3*-0x1219]=_0x16db61+_0x8df662*(0x1720+-0x1501+-0x21f+0.5),_0x4e7869[-0xfa7+-0x9*0x379+0x2ef6]=-0x57*0xf+-0x2f*-0x8b+0x1*-0x146c+0.5,_0x4e7869[-0x1*0x1877+0x150e+0x378]=-0x1cc3+0x1702+0x5c2,this;}['setReflect'+'ion'](_0x418119,_0x92c016){const _0x40a661=_0x418119['x'],_0x19025f=_0x418119['y'],_0x3d989e=_0x418119['z'],_0xfb392c=this['data'];return _0xfb392c[0xb*-0x86+-0x7*0x1e1+0x12e9]=-0xa41+-0x2ab*-0x8+-0xb16-(0x890+-0x337*0x1+-0x557)*_0x40a661*_0x40a661,_0xfb392c[0x52*0x39+-0x6*0x23e+0x4cd*-0x1]=-(-0x1376+0x4*-0x498+0x25d8)*_0x40a661*_0x19025f,_0xfb392c[-0x1a02+0xc4*-0x4+0x1d14]=-(-0x26cc+0xb*-0x1f7+0x1*0x3c6b)*_0x40a661*_0x3d989e,_0xfb392c[0x1*0xf5b+0x80d+0x71*-0x35]=0x210b+-0x4*0x8d0+-0x71*-0x5,_0xfb392c[0x154a+0x1f29+-0x346f]=-(0x146c*0x1+-0x53e*0x4+0x2*0x47)*_0x40a661*_0x19025f,_0xfb392c[-0xa40*-0x1+-0x2435+-0x1*-0x19fa]=-0x1ada+-0x1*-0xd4f+-0x4*-0x363-(-0x47*-0x2+-0x20d1+0x2ef*0xb)*_0x19025f*_0x19025f,_0xfb392c[-0x5d8+0xd71*0x2+-0x1504]=-(-0x21*-0x109+-0xe59+0x1*-0x13ce)*_0x19025f*_0x3d989e,_0xfb392c[0x1a8b+-0x50*0x1+-0x1a34]=-0x1*-0xabe+-0x25*-0xb+-0xc55,_0xfb392c[-0x1*0x443+0x1*-0x1f03+0x234e]=-(-0x22*-0xa9+-0x2a9*0x5+0x1*-0x923)*_0x40a661*_0x3d989e,_0xfb392c[-0xa47+0x1b41+-0x1*0x10f1]=-(0x6ff*-0x3+0x1efc+-0x9fd)*_0x19025f*_0x3d989e,_0xfb392c[0xb6*-0x12+-0x1d39+0x123*0x25]=-0x7*-0x24d+0xd10+-0x1d2a-(0x20af*0x1+0x19cb+-0x3a78)*_0x3d989e*_0x3d989e,_0xfb392c[-0x5*0x50b+-0x4f2*0x6+-0x9e*-0x59]=0x20c4+0x2487+-0x454b,_0xfb392c[-0x26b1+0x1d8c+0x1*0x931]=-(-0x541*-0x4+0x147+-0x1*0x1649)*_0x40a661*_0x92c016,_0xfb392c[0x1*-0x1697+0x1b56+-0x2*0x259]=-(-0x9*0x397+-0x52*-0x47+0x13*0x81)*_0x19025f*_0x92c016,_0xfb392c[-0x1823*0x1+0x2133+-0x902*0x1]=-(0xc65+0x5*0x1b7+0xa7b*-0x2)*_0x3d989e*_0x92c016,_0xfb392c[-0x48e+-0xed*0xd+0x10a6]=0x3*-0x205+-0x178*-0x12+-0x1460,this;}['invert'](_0x184de7=this){const _0x1b8c10=_0x184de7['data'],_0x4d0a26=_0x1b8c10[-0x18a2+0x1343*0x1+-0x5*-0x113],_0x363ef2=_0x1b8c10[0x2*-0x2ee+-0x1e97*0x1+-0x1*-0x2474],_0x1f9bc8=_0x1b8c10[0x151*0x5+0xb*-0x3d+-0x3f4],_0x145758=_0x1b8c10[0x9be*-0x4+0x2507+-0x5*-0x64],_0x3fe662=_0x1b8c10[-0x1230*-0x2+-0xa7e+0x3b2*-0x7],_0x8553f6=_0x1b8c10[0x7*0x224+0x8*0x1de+-0x5fb*0x5],_0xc8a1bf=_0x1b8c10[-0x3cd*0x7+0x2fd*0x1+0x17a4],_0x7ea890=_0x1b8c10[-0x53f+0xb*0x6e+0x8c],_0x1447e8=_0x1b8c10[0x2e3*-0x6+-0x1*0xb2b+0x1c85],_0x40116b=_0x1b8c10[0x9*0xc2+-0x95f+0x296],_0x4505f4=_0x1b8c10[-0x3d1*0x1+0x2704+-0x2329],_0x1a78ce=_0x1b8c10[0x172b+0x183c+-0x2f5c],_0x43d5b4=_0x1b8c10[0x1283+-0x47*0x3b+-0x2*0x10d],_0x4e48aa=_0x1b8c10[0xf80+0x1*-0x1772+-0x7ff*-0x1],_0x6ff16a=_0x1b8c10[0x252*-0xe+-0x89c+-0x2926*-0x1],_0x171aea=_0x1b8c10[0x202e+-0x388+-0x1*0x1c97],_0x593db3=_0x4d0a26*_0x8553f6-_0x363ef2*_0x3fe662,_0x1cd36b=_0x4d0a26*_0xc8a1bf-_0x1f9bc8*_0x3fe662,_0x3486a7=_0x4d0a26*_0x7ea890-_0x145758*_0x3fe662,_0x3a3b5c=_0x363ef2*_0xc8a1bf-_0x1f9bc8*_0x8553f6,_0x1bd055=_0x363ef2*_0x7ea890-_0x145758*_0x8553f6,_0x55b337=_0x1f9bc8*_0x7ea890-_0x145758*_0xc8a1bf,_0x188aa9=_0x1447e8*_0x4e48aa-_0x40116b*_0x43d5b4,_0x533a49=_0x1447e8*_0x6ff16a-_0x4505f4*_0x43d5b4,_0x21b925=_0x1447e8*_0x171aea-_0x1a78ce*_0x43d5b4,_0x22255f=_0x40116b*_0x6ff16a-_0x4505f4*_0x4e48aa,_0x5d5c2d=_0x40116b*_0x171aea-_0x1a78ce*_0x4e48aa,_0x5db051=_0x4505f4*_0x171aea-_0x1a78ce*_0x6ff16a,_0x27e23f=_0x593db3*_0x5db051-_0x1cd36b*_0x5d5c2d+_0x3486a7*_0x22255f+_0x3a3b5c*_0x21b925-_0x1bd055*_0x533a49+_0x55b337*_0x188aa9;if(_0x27e23f===0x1432+0x1f*0x12c+0x5a7*-0xa)this['setIdentit'+'y']();else{const _0x4a88f8=(0x15*-0xb6+-0x1981*0x1+0x2870)/_0x27e23f,_0x4700da=this['data'];_0x4700da[0x62b*-0x2+0x3*-0x296+0x1418]=(_0x8553f6*_0x5db051-_0xc8a1bf*_0x5d5c2d+_0x7ea890*_0x22255f)*_0x4a88f8,_0x4700da[0xd6f+0x2503+-0x3271]=(-_0x363ef2*_0x5db051+_0x1f9bc8*_0x5d5c2d-_0x145758*_0x22255f)*_0x4a88f8,_0x4700da[0x58c+-0xf80+0x9f6]=(_0x4e48aa*_0x55b337-_0x6ff16a*_0x1bd055+_0x171aea*_0x3a3b5c)*_0x4a88f8,_0x4700da[-0x2*-0x73d+0x1a1*-0xa+0x1d3]=(-_0x40116b*_0x55b337+_0x4505f4*_0x1bd055-_0x1a78ce*_0x3a3b5c)*_0x4a88f8,_0x4700da[0xd91+0x2*0x65e+-0x1a49]=(-_0x3fe662*_0x5db051+_0xc8a1bf*_0x21b925-_0x7ea890*_0x533a49)*_0x4a88f8,_0x4700da[-0xcf7+-0x1*0x184b+0xc6d*0x3]=(_0x4d0a26*_0x5db051-_0x1f9bc8*_0x21b925+_0x145758*_0x533a49)*_0x4a88f8,_0x4700da[-0x58a*0x3+0x7*0x527+0x1*-0x136d]=(-_0x43d5b4*_0x55b337+_0x6ff16a*_0x3486a7-_0x171aea*_0x1cd36b)*_0x4a88f8,_0x4700da[-0xd08+0x1218+-0x509]=(_0x1447e8*_0x55b337-_0x4505f4*_0x3486a7+_0x1a78ce*_0x1cd36b)*_0x4a88f8,_0x4700da[0x1*0x1954+0x1*0xaf7+0x1*-0x2443]=(_0x3fe662*_0x5d5c2d-_0x8553f6*_0x21b925+_0x7ea890*_0x188aa9)*_0x4a88f8,_0x4700da[-0xcb*-0xa+-0xf*0x290+-0x1*-0x1e8b]=(-_0x4d0a26*_0x5d5c2d+_0x363ef2*_0x21b925-_0x145758*_0x188aa9)*_0x4a88f8,_0x4700da[-0x19bb*0x1+-0x1a4f+0x3414]=(_0x43d5b4*_0x1bd055-_0x4e48aa*_0x3486a7+_0x171aea*_0x593db3)*_0x4a88f8,_0x4700da[-0xc40+0x1*0x11c7+-0x9c*0x9]=(-_0x1447e8*_0x1bd055+_0x40116b*_0x3486a7-_0x1a78ce*_0x593db3)*_0x4a88f8,_0x4700da[-0x48b*-0x1+0x3*-0xc29+0x1ffc]=(-_0x3fe662*_0x22255f+_0x8553f6*_0x533a49-_0xc8a1bf*_0x188aa9)*_0x4a88f8,_0x4700da[-0xf5a+0x131c+-0x49*0xd]=(_0x4d0a26*_0x22255f-_0x363ef2*_0x533a49+_0x1f9bc8*_0x188aa9)*_0x4a88f8,_0x4700da[-0x2c4*-0xb+-0xc08+-0x1256]=(-_0x43d5b4*_0x3a3b5c+_0x4e48aa*_0x1cd36b-_0x6ff16a*_0x593db3)*_0x4a88f8,_0x4700da[-0x1*-0x2de+0x1*0xf77+0x1*-0x1246]=(_0x1447e8*_0x3a3b5c-_0x40116b*_0x1cd36b+_0x4505f4*_0x593db3)*_0x4a88f8;}return this;}['set'](_0x80d0a4){const _0x4e05ad=this['data'];return _0x4e05ad[-0x1*0x1297+-0x938+-0x1bcf*-0x1]=_0x80d0a4[0xcf2+0x7a2*0x1+-0x3*0x6dc],_0x4e05ad[0x181b+-0x144b+-0x3cf]=_0x80d0a4[-0x11b3+0x1ca8*0x1+-0xaf4],_0x4e05ad[0x3*-0x18a+-0x3*0xa66+0xe*0x28f]=_0x80d0a4[-0x1435+-0x14a3+0x9*0x48a],_0x4e05ad[-0xef3+0x1e*0x5+0xe60]=_0x80d0a4[-0x2*-0xa03+0x160d*0x1+-0x2a10],_0x4e05ad[-0x851+-0x11ff+0x1a54]=_0x80d0a4[-0x2349+0x47*-0x6d+0x20c4*0x2],_0x4e05ad[0x26ba*-0x1+0x257e+0x6b*0x3]=_0x80d0a4[-0x2207+0x2*0x806+0x1200],_0x4e05ad[-0x7d9*0x4+0x363*0x3+0x1541]=_0x80d0a4[-0x20c6+0xa7f*0x3+-0x43*-0x5],_0x4e05ad[0x2595+-0x639+-0x1f55]=_0x80d0a4[-0x5*-0x232+-0x9ee+-0x105],_0x4e05ad[-0x2*0x729+-0x6d*0x18+-0x5*-0x4ea]=_0x80d0a4[-0x1f36+-0x1948+0xb4e*0x5],_0x4e05ad[0x18de+-0x5*-0x166+-0x1fd3]=_0x80d0a4[-0xb0*-0x5+0x128f+-0x15f6*0x1],_0x4e05ad[0x270a+-0x1*0x1915+-0xdeb*0x1]=_0x80d0a4[0x10b9+-0x176*-0x4+-0x1687*0x1],_0x4e05ad[0x1866+0x4*-0x39+0x1*-0x1777]=_0x80d0a4[-0x10fb+-0x11f6+0x1*0x22fc],_0x4e05ad[-0x2b*0x2a+0x74f*-0x1+0x77*0x1f]=_0x80d0a4[0xb5d*-0x1+0x1afa+-0xf91],_0x4e05ad[-0xae*-0xd+-0xa1d+0x154]=_0x80d0a4[-0x1dd9+-0x1*-0xc25+0x38d*0x5],_0x4e05ad[-0xa6b*-0x3+-0x17ea+-0x1*0x749]=_0x80d0a4[0x194f+-0x335*0xa+-0x5*-0x15d],_0x4e05ad[0x8f8*-0x2+0x25da+-0x13db]=_0x80d0a4[-0x1d5d*-0x1+-0x94*0x2+0x1c26*-0x1],this;}['setIdentit'+'y'](){const _0x1d2a86=this['data'];return _0x1d2a86[-0x386+0x502*0x5+0x3*-0x72c]=0x1b*-0x90+0x1*-0x1bbf+0x2af0,_0x1d2a86[-0x9*0x1b7+0x1f46+-0xfd6*0x1]=0x1*0x8f6+0x1*-0x902+0xc,_0x1d2a86[0x48+0x101f+0x3*-0x577]=0x59*0x9+-0xbe3*-0x2+-0x1ae7*0x1,_0x1d2a86[-0x2318+0x2399+-0x3*0x2a]=-0x1586+0x2*0x8ca+0x3f2,_0x1d2a86[-0xf1a+0x8df*0x2+0xa8*-0x4]=-0xc8*-0x10+-0x1672+-0x4f9*-0x2,_0x1d2a86[-0x9*-0x2a5+-0x182a+-0x62*-0x1]=0xf*-0xf1+-0x1bf7+0x2a17,_0x1d2a86[-0x84f+-0x742+0xf97]=0x1f*0xe1+0x20c*-0x9+-0x1*0x8d3,_0x1d2a86[0x1b02+-0x30a*0x1+-0x1b*0xe3]=-0x80*0x1d+-0x2*0x79d+0x1dba,_0x1d2a86[-0x203d+-0x1*0x192e+0xb*0x539]=0x64*-0x62+-0xfbe+0x3606,_0x1d2a86[-0x73c+0x1*-0x1bff+-0x11a2*-0x2]=-0x1df4+0x1e*0xc2+0x84*0xe,_0x1d2a86[-0x19b5*0x1+-0x1*-0x2c2+0x16fd]=0x189f+0xee*0x5+0x1d44*-0x1,_0x1d2a86[-0x1f87+-0x1350+0x32e2]=0x1521+0x1d9b+-0x32bc,_0x1d2a86[-0x23e*-0x2+-0x107b+-0xc0b*-0x1]=-0x1495+0x1*0xb0f+0x986,_0x1d2a86[0xb9b+0x18*-0x93+-0xa*-0x39]=-0x3*-0x4e2+-0x181d+0x977,_0x1d2a86[-0x2*0x2c+-0xf8d+-0x1*-0xff3]=-0x2*-0x50a+-0x1*0xe6d+0x459,_0x1d2a86[-0xc3d+-0xbf*0x19+0x1ef3]=-0xa8a+0xcd1*-0x1+-0x4ac*-0x5,this;}['setTRS'](_0x23b0ba,_0x1ddfbb,_0x2ae6ea){const _0x1ecade=_0x1ddfbb['x'],_0x4b5aa4=_0x1ddfbb['y'],_0x13393f=_0x1ddfbb['z'],_0x5241f0=_0x1ddfbb['w'],_0x1e92aa=_0x2ae6ea['x'],_0x31786e=_0x2ae6ea['y'],_0x596a14=_0x2ae6ea['z'],_0x420a74=_0x1ecade+_0x1ecade,_0x4752b0=_0x4b5aa4+_0x4b5aa4,_0x2f5fc5=_0x13393f+_0x13393f,_0xb6820a=_0x1ecade*_0x420a74,_0x35c107=_0x1ecade*_0x4752b0,_0x40ac27=_0x1ecade*_0x2f5fc5,_0x5e77fa=_0x4b5aa4*_0x4752b0,_0x1cd9d3=_0x4b5aa4*_0x2f5fc5,_0x487df8=_0x13393f*_0x2f5fc5,_0x3315ff=_0x5241f0*_0x420a74,_0x211521=_0x5241f0*_0x4752b0,_0x1377c5=_0x5241f0*_0x2f5fc5,_0x3a5589=this['data'];return _0x3a5589[0x1c3f+0x26e2+-0x5*0xd6d]=(-0x4d*-0x1b+0x2*0xa3e+-0x1c9a-(_0x5e77fa+_0x487df8))*_0x1e92aa,_0x3a5589[-0x4f*0x3d+-0xea5+0x2179]=(_0x35c107+_0x1377c5)*_0x1e92aa,_0x3a5589[0x7*0x38b+-0xead+0x25*-0x46]=(_0x40ac27-_0x211521)*_0x1e92aa,_0x3a5589[0x1ef6+-0x16fe+-0x7f5]=0xb*0xb2+0xf7+-0x89d,_0x3a5589[0x22c6+-0x24f5*-0x1+-0x47b7]=(_0x35c107-_0x1377c5)*_0x31786e,_0x3a5589[-0x48*-0x2f+0x641+-0x1374]=(0x9*0x27+-0x1c60+0x1b02-(_0xb6820a+_0x487df8))*_0x31786e,_0x3a5589[0x1*0xc12+-0x1d94+-0x1*-0x1188]=(_0x1cd9d3+_0x3315ff)*_0x31786e,_0x3a5589[0x3*-0x521+-0x5e8+-0x1552*-0x1]=-0x165d+-0x2*0x327+0x1cab*0x1,_0x3a5589[0x1496+0x2*0xb7c+-0x2b86]=(_0x40ac27+_0x211521)*_0x596a14,_0x3a5589[-0x1*0x16e5+0x52*0x6f+-0xca0]=(_0x1cd9d3-_0x3315ff)*_0x596a14,_0x3a5589[-0x145e+0x6*-0x95+-0x85*-0x2e]=(0x1cb1+0xe2+-0x1d92*0x1-(_0xb6820a+_0x5e77fa))*_0x596a14,_0x3a5589[0x24bf+0x1*-0xd94+-0x1720]=0x1a0f+-0x13*0x1fa+0x3d5*0x3,_0x3a5589[0x4dc+0x1*-0x2117+0x1c47]=_0x23b0ba['x'],_0x3a5589[0x1091+-0x488*0x2+-0x774]=_0x23b0ba['y'],_0x3a5589[0x6ff+0x2*0x101f+0x7*-0x599]=_0x23b0ba['z'],_0x3a5589[-0x9*-0x365+0xb1a+-0x14cc*0x2]=-0x1600+0x1*-0xcc4+0x22c5,this;}['transpose'](_0x293e1d=this){const _0x5ccbb7=_0x293e1d['data'],_0x144fe6=this['data'];if(_0x5ccbb7===_0x144fe6){let _0x3c1259;_0x3c1259=_0x5ccbb7[-0x10dd*-0x1+-0x5f9+-0xae3],_0x144fe6[0x102*-0x21+0x174e+0x9f5]=_0x5ccbb7[-0x1*0x1be1+0x216d+-0xec*0x6],_0x144fe6[-0x2266+0x1810+0xa5a]=_0x3c1259,_0x3c1259=_0x5ccbb7[-0xdc8+-0x1*-0x17f6+-0xa2c],_0x144fe6[0x65c+0x1199+-0x17f3*0x1]=_0x5ccbb7[-0x1*-0x1e33+0x24fb+-0x4326],_0x144fe6[0x1e7*0x7+-0x3*0x1e6+0x1d*-0x43]=_0x3c1259,_0x3c1259=_0x5ccbb7[-0x3*-0x363+-0xba2*-0x1+-0xae4*0x2],_0x144fe6[-0x254*0x10+-0x69*0xb+0x29c6]=_0x5ccbb7[0xbff+-0x250e+0x191b*0x1],_0x144fe6[-0x1863+-0x72b+0x5*0x652]=_0x3c1259,_0x3c1259=_0x5ccbb7[-0x5dd*0x5+0xaf3*0x3+-0x382],_0x144fe6[0x148c+-0x263c+0x11b6]=_0x5ccbb7[0x1590+0x225b+-0x2e*0x137],_0x144fe6[-0x14ed+-0x1f0f+0x3405]=_0x3c1259,_0x3c1259=_0x5ccbb7[0x20c8+-0x1*0xd15+-0x13ac],_0x144fe6[-0x394*0x1+0x138d+-0xff2]=_0x5ccbb7[-0xb6f+0x10*-0x114+-0x1cbc*-0x1],_0x144fe6[-0x2396*-0x1+-0x1ce0+-0x6a9]=_0x3c1259,_0x3c1259=_0x5ccbb7[0x2*0xb9e+-0x8f*0x10+-0xe41],_0x144fe6[-0x17fe+0xc84+0xb85]=_0x5ccbb7[0x28f*-0x1+-0x1a*-0x101+0x1*-0x177d],_0x144fe6[0x7f*0x6+-0x41*0x5e+0xe*0x17f]=_0x3c1259;}else _0x144fe6[-0x2*-0x4fd+0x251b+-0x2f15]=_0x5ccbb7[-0xd3d+-0xf*-0x116+0x47*-0xb],_0x144fe6[-0x775*-0x5+-0x118a+-0x1*0x13be]=_0x5ccbb7[-0x49*-0x53+0x1b7c+-0x2b1*0x13],_0x144fe6[-0xb74+-0x95*0x4+0x1*0xdca]=_0x5ccbb7[-0x99*-0x28+-0xe8d*0x1+-0x7*0x155],_0x144fe6[0x3*-0x737+-0x1*-0x132b+0x27d]=_0x5ccbb7[0x2c3+0x5*-0x274+0x98d],_0x144fe6[0x22e9+0x236d*-0x1+0x88]=_0x5ccbb7[0x1*-0x331+-0x1*0xdb0+0x2*0x871],_0x144fe6[-0x77*-0x31+0x1f38+-0x35fa]=_0x5ccbb7[0x792*0x4+0x1d20+-0x3b63],_0x144fe6[0x1a*-0x127+0x5*0x6b0+-0x22*0x1a]=_0x5ccbb7[0x26c9*0x1+-0xb51*0x2+-0x101e],_0x144fe6[-0x2*-0x34e+0xa43+-0x10d8]=_0x5ccbb7[0x1ad1*0x1+-0x2*0xdd0+0xdc],_0x144fe6[0x23f+-0x2*-0x745+-0x10c1]=_0x5ccbb7[0xc28*-0x1+0x2*0x5c+0xb72],_0x144fe6[-0x1247*-0x2+-0x1579*-0x1+-0x39fe]=_0x5ccbb7[-0xfd5+0x1*0x21e1+-0x1206],_0x144fe6[0x15ec+-0x1*0x13e7+-0xa9*0x3]=_0x5ccbb7[-0xde*0x27+-0x203f+0x421b],_0x144fe6[-0x1493+-0x209a+0x3538]=_0x5ccbb7[0x20c+-0xa*0x252+0xb5*0x1e],_0x144fe6[-0xe45+-0x23ac+0x31fd]=_0x5ccbb7[-0x1eb3+0x1*-0x472+0x96*0x3c],_0x144fe6[-0x85*-0x23+-0x5d*-0x43+-0x2a79]=_0x5ccbb7[-0x155b+-0x12*0x12e+0x2a9e],_0x144fe6[-0x1*0x2425+0x4*0x430+0xd*0x17f]=_0x5ccbb7[0x1fe7*0x1+0x7*0x1bb+-0x1*0x2bf9],_0x144fe6[-0xe80+-0x2537+0x33c6]=_0x5ccbb7[0x265f*0x1+0xbf9*-0x2+-0x6*0x265];return this;}['getTransla'+'tion'](_0x32bdbd=new D()){return _0x32bdbd['set'](this['data'][0xaa+0x17*0xe3+-0x1503],this['data'][-0x809*-0x4+0x419*-0x9+0x4ca],this['data'][0xf0e*0x1+0x25ca*-0x1+0xb65*0x2]);}['getX'](_0x4f4d74=new D()){return _0x4f4d74['set'](this['data'][0x210+0x346*0x7+-0x18fa],this['data'][0x59*-0x14+0xe80+-0x78b],this['data'][-0xb91*0x3+0x2399*-0x1+0x464e]);}['getY'](_0x2037f3=new D()){return _0x2037f3['set'](this['data'][-0x1*-0x8ca+-0x2*0x1ff+-0x4c8],this['data'][-0x1*-0x261f+-0x1d*-0xef+-0x412d],this['data'][-0x22b8+0x6ba+0x28c*0xb]);}['getZ'](_0x1c2bf3=new D()){return _0x1c2bf3['set'](this['data'][-0x1*0x16b7+-0x3*-0x322+0xd59],this['data'][-0x1146+-0x13*0x1bb+-0x16*-0x248],this['data'][0x119c+0x9a8+0x52*-0x55]);}['getScale'](_0x20b206=new D()){return this['getX'](Rs),this['getY'](Js),this['getZ'](ei),_0x20b206['set'](Rs['length'](),Js['length'](),ei['length']()),_0x20b206;}get['scaleSign'](){return this['getX'](Rs),this['getY'](Js),this['getZ'](ei),Rs['cross'](Rs,Js),Rs['dot'](ei)<-0x1720+0x124*-0x14+-0x8c*-0x54?-(-0x169*0x1b+0xd1+0x1*0x2543):0x10c1*-0x2+-0x1*-0x19+0x263*0xe;}['setFromEul'+'erAngles'](_0x11094f,_0x1a8d5c,_0x58cac8){_0x11094f*=Y['DEG_TO_RAD'],_0x1a8d5c*=Y['DEG_TO_RAD'],_0x58cac8*=Y['DEG_TO_RAD'];const _0x54eed3=Math['sin'](-_0x11094f),_0x42908c=Math['cos'](-_0x11094f),_0xe203b8=Math['sin'](-_0x1a8d5c),_0x553574=Math['cos'](-_0x1a8d5c),_0x424ca9=Math['sin'](-_0x58cac8),_0x2cf961=Math['cos'](-_0x58cac8),_0x112184=this['data'];return _0x112184[-0xe0*0x17+0x1aa+0x1*0x1276]=_0x553574*_0x2cf961,_0x112184[-0x1733*-0x1+0x1*0x1418+-0x2b4a]=-_0x553574*_0x424ca9,_0x112184[0x1*0x27f+-0x1d11+0x1a94]=_0xe203b8,_0x112184[-0x2069*-0x1+0x138c+-0x33f2]=0x21aa+-0x10*0x4c+-0x1cea,_0x112184[0x9*-0x19c+0x377*0x5+-0x2d3*0x1]=_0x42908c*_0x424ca9+_0x2cf961*_0x54eed3*_0xe203b8,_0x112184[-0x86*-0x1f+0x1269+-0x229e]=_0x42908c*_0x2cf961-_0x54eed3*_0xe203b8*_0x424ca9,_0x112184[-0x1*-0x2326+0x1*0x1863+-0x3b83]=-_0x553574*_0x54eed3,_0x112184[0x1*-0x221d+-0xc7d+0x1*0x2ea1]=-0x1bc5+-0x1*-0x1976+0xc5*0x3,_0x112184[-0x15c8+-0x1*0x4c5+0x1a95]=_0x54eed3*_0x424ca9-_0x42908c*_0x2cf961*_0xe203b8,_0x112184[0x1*0xd6a+0x5e5*0x1+-0x1346]=_0x2cf961*_0x54eed3+_0x42908c*_0xe203b8*_0x424ca9,_0x112184[0x1*-0x1ddb+0xe77+0xf6e]=_0x42908c*_0x553574,_0x112184[-0x1b*-0x73+-0x211b+0x1505]=-0x183b+-0xab+0x18e6,_0x112184[-0x1*-0xd0a+0x1fb1*-0x1+0x12b3]=-0x205c*-0x1+-0x764+-0x18f8,_0x112184[0x25c6+0x9e5+0x2f9e*-0x1]=-0x1410+-0x7ab+0x1bbb,_0x112184[0x3*0x3ad+-0x2cd+-0x82c]=-0x2458+0xdb*-0x3+-0x58f*-0x7,_0x112184[-0x13ff+-0x281*-0xd+-0xc7f]=0x1aec+0x11*0xb3+-0x2*0x1367,this;}['getEulerAn'+'gles'](_0x3c0907=new D()){this['getScale'](Dl);const _0x29da93=Dl['x'],_0x4b3c36=Dl['y'],_0x19e893=Dl['z'];if(_0x29da93===-0x1*0x129a+-0x91*0x1d+0x2307||_0x4b3c36===-0x1d16+0xf00+0xe16||_0x19e893===0x1d*-0xc5+-0x19f5+0x4a*0xa7)return _0x3c0907['set'](0x4*-0x783+0x3db+0x1a31,-0x18ef+-0x1171+0x153*0x20,-0x148+-0x1bd6+-0x1*-0x1d1e);const _0x4f1bea=this['data'],_0x34fc67=Math['asin'](-_0x4f1bea[-0xb5*0x11+-0x330+0xf37]/_0x29da93),_0x17b6e6=Math['PI']*(-0x1a85+0x25c5+-0x48*0x28+0.5);let _0x5619eb,_0x3ab3c7;return _0x34fc67<_0x17b6e6?_0x34fc67>-_0x17b6e6?(_0x5619eb=Math['atan2'](_0x4f1bea[-0x1bae+0x1039+-0xb7b*-0x1]/_0x4b3c36,_0x4f1bea[-0x39*-0x4+-0x1ef5+0x3*0xa09]/_0x19e893),_0x3ab3c7=Math['atan2'](_0x4f1bea[-0x1*0x17cf+-0x1c78+0x3448]/_0x29da93,_0x4f1bea[0x128c+-0x1d93+-0x1*-0xb07]/_0x29da93)):(_0x3ab3c7=0xd*0x20e+0x24e+-0x3*0x9ac,_0x5619eb=-Math['atan2'](_0x4f1bea[0xd06+-0x1*0x2d5+-0xa2d]/_0x4b3c36,_0x4f1bea[-0xd14+0x1*-0x656+0x136f]/_0x4b3c36)):(_0x3ab3c7=0x89b+-0x1*-0x11c5+0x1a60*-0x1,_0x5619eb=Math['atan2'](_0x4f1bea[0x17*-0x10f+0x22af*0x1+-0xa52]/_0x4b3c36,_0x4f1bea[-0x1457+-0xb0e+0x1f6a*0x1]/_0x4b3c36)),_0x3c0907['set'](_0x5619eb,_0x34fc67,_0x3ab3c7)['mulScalar'](Y['RAD_TO_DEG']);}['toString'](){return'['+this['data']['join'](',\x20')+']';}};h(jr,'IDENTITY',Object['freeze'](new jr())),h(jr,'ZERO',Object['freeze'](new jr()['set']([-0x2500+-0x235f+0x485f,0x585*-0x4+-0x1047+0xcc9*0x3,0x1276+-0x25d+-0x1019,0xc01*0x2+-0xe63+-0x99f,0x296*-0x4+0x4*0x4e1+-0x92c,-0x1959+-0x1*0x6f1+0x1*0x204a,0x21af+-0x1071+0x1*-0x113e,-0x26ab*0x1+0x853*-0x1+0x2efe,-0xfbb*-0x1+0x1deb*0x1+-0x2da6,0x16b5+-0x740+-0xf75,-0x2fa*-0x7+-0x1*0x1e1d+0x13*0x7d,0x2*-0xe15+0x116*-0x11+0x2ea0,0x1*0x1841+-0x7*0xc7+-0x12d0,0x94*-0x39+-0x8*-0x353+0x65c,0x575*0x2+-0x2276+0x16*0x112,-0x227b+-0x1e25*0x1+0x20*0x205])));let te=jr;const dn=class dn{constructor(_0x53f8c7=0xc0*-0x8+0x1fdf+0x25*-0xb3,_0x113487=0x1*0x25c9+-0x2623+0x6*0xf,_0x2113b6=-0x41*-0x2e+-0x3*-0x159+-0xfb9,_0x41abee=-0x1*0xa63+-0x2200+0x1632*0x2){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x53f8c7['length']===0x1*-0x1769+0x39d+0x13d0?(this['x']=_0x53f8c7[-0x14de*0x1+-0x32*-0x1f+-0x1*-0xed0],this['y']=_0x53f8c7[-0x20c0*0x1+0x6cd*0x5+0x20*-0xa],this['z']=_0x53f8c7[0xd8a*0x1+0x239c+-0x22*0x172],this['w']=_0x53f8c7[0x1250+-0xcfa*0x3+0x1*0x14a1]):(this['x']=_0x53f8c7,this['y']=_0x113487,this['z']=_0x2113b6,this['w']=_0x41abee);}['clone'](){const _0xd07c29=this['constructo'+'r'];return new _0xd07c29(this['x'],this['y'],this['z'],this['w']);}['conjugate'](_0x589c94=this){return this['x']=_0x589c94['x']*-(0x4cd+0x10ac+0xc*-0x1ca),this['y']=_0x589c94['y']*-(0x8*-0x2a5+-0x2671*0x1+0x9ef*0x6),this['z']=_0x589c94['z']*-(0x881*-0x4+-0xf58*-0x2+0x1*0x355),this['w']=_0x589c94['w'],this;}['copy'](_0x52370d){return this['x']=_0x52370d['x'],this['y']=_0x52370d['y'],this['z']=_0x52370d['z'],this['w']=_0x52370d['w'],this;}['dot'](_0x2fb90f){return this['x']*_0x2fb90f['x']+this['y']*_0x2fb90f['y']+this['z']*_0x2fb90f['z']+this['w']*_0x2fb90f['w'];}['equals'](_0x42e2bd){return this['x']===_0x42e2bd['x']&&this['y']===_0x42e2bd['y']&&this['z']===_0x42e2bd['z']&&this['w']===_0x42e2bd['w'];}['equalsAppr'+'ox'](_0x13899c,_0x550fde=-0x2296+0x1b9e+0x6f8+0.000001){return Math['abs'](this['x']-_0x13899c['x'])<_0x550fde&&Math['abs'](this['y']-_0x13899c['y'])<_0x550fde&&Math['abs'](this['z']-_0x13899c['z'])<_0x550fde&&Math['abs'](this['w']-_0x13899c['w'])<_0x550fde;}['getAxisAng'+'le'](_0x22a133){let _0x319927=Math['acos'](this['w'])*(-0x1754+0x2fe*0xd+0x6*-0x298);const _0x4de1ec=Math['sin'](_0x319927/(0x1021+0x17fb*-0x1+0x7dc));return _0x4de1ec!==-0xcc0+0x860+-0xa0*-0x7?(_0x22a133['x']=this['x']/_0x4de1ec,_0x22a133['y']=this['y']/_0x4de1ec,_0x22a133['z']=this['z']/_0x4de1ec,(_0x22a133['x']<0x1189*-0x1+0x1*-0x25ac+0x7*0x7e3||_0x22a133['y']<-0x1ac1+-0xf1a*-0x1+-0x13*-0x9d||_0x22a133['z']<-0x3a*0x8f+0x1cac*0x1+-0x3*-0x13e)&&(_0x22a133['x']*=-(-0x1143*-0x1+0x8*0x2ab+-0x269a),_0x22a133['y']*=-(0x83d+0x23b+-0x1*0xa77),_0x22a133['z']*=-(0xda*-0x5+0x2c*-0x54+0x1*0x12b3),_0x319927*=-(-0x1a3a+-0x144b+-0x7c1*-0x6))):(_0x22a133['x']=-0x113+-0x1166+0x127a,_0x22a133['y']=-0x106d+-0x1*-0x1097+-0x2a,_0x22a133['z']=-0x7*0x1f5+0x1355+0x7*-0xce),_0x319927*Y['RAD_TO_DEG'];}['getEulerAn'+'gles'](_0x1ed650=new D()){let _0xe42f8f,_0x36d3a7,_0x4a6958;const _0xc73ba6=this['x'],_0x43742b=this['y'],_0x526ce1=this['z'],_0x1fc67d=this['w'],_0x248b3e=(0x5b*-0x1+-0xb12+0xb6f)*(_0x1fc67d*_0x43742b-_0xc73ba6*_0x526ce1);return _0x248b3e<=-(0xc86+0x2595+-0x65*0x7f+0.99999)?(_0xe42f8f=(-0xa88+-0xa57+0x14e1)*Math['atan2'](_0xc73ba6,_0x1fc67d),_0x36d3a7=-Math['PI']/(-0x125f*-0x1+-0x9d3*-0x1+-0xb0*0x29),_0x4a6958=-0xf9c+0x1*-0x2350+0x32ec):_0x248b3e>=-0xb*-0x363+-0x1*0x24b3+0x2*-0x47+0.99999?(_0xe42f8f=(0x17d8+0xb+-0x17e1)*Math['atan2'](_0xc73ba6,_0x1fc67d),_0x36d3a7=Math['PI']/(-0x1a40+-0x142f*0x1+0x2e71),_0x4a6958=-0xa3f+-0x1f8a+0x29c9):(_0xe42f8f=Math['atan2']((-0x1a*0xe7+-0x25ac*0x1+-0x1c*-0x22f)*(_0x1fc67d*_0xc73ba6+_0x43742b*_0x526ce1),0xe23+-0x15f7+-0x5*-0x191-(-0x32f+0x2289+-0x11*0x1d8)*(_0xc73ba6*_0xc73ba6+_0x43742b*_0x43742b)),_0x36d3a7=Math['asin'](_0x248b3e),_0x4a6958=Math['atan2']((-0x3*-0xc69+0x1fb4*0x1+-0x44ed)*(_0x1fc67d*_0x526ce1+_0xc73ba6*_0x43742b),0x42+0x17d5+-0x1816-(0x1078+0x771+0xd3*-0x1d)*(_0x43742b*_0x43742b+_0x526ce1*_0x526ce1))),_0x1ed650['set'](_0xe42f8f,_0x36d3a7,_0x4a6958)['mulScalar'](Y['RAD_TO_DEG']);}['invert'](_0x4f2a80=this){return this['conjugate'](_0x4f2a80)['normalize']();}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x219ce2,_0x248cd6,_0x1e3802){const _0x2f1d25=(-0x241*0x11+-0x5*0x38f+0x381d-_0x1e3802)*(_0x219ce2['dot'](_0x248cd6)<-0x1*-0xeac+-0x388+-0xb24?-(0x1e*0x9f+0x8d7+-0x1b78):-0x5*-0x615+-0x4d1*0x1+0x1*-0x1997);return this['x']=_0x219ce2['x']*_0x2f1d25+_0x248cd6['x']*_0x1e3802,this['y']=_0x219ce2['y']*_0x2f1d25+_0x248cd6['y']*_0x1e3802,this['z']=_0x219ce2['z']*_0x2f1d25+_0x248cd6['z']*_0x1e3802,this['w']=_0x219ce2['w']*_0x2f1d25+_0x248cd6['w']*_0x1e3802,this['normalize']();}['mul'](_0x374582){const _0x4f7890=this['x'],_0x48346b=this['y'],_0x1490b0=this['z'],_0x404cc5=this['w'],_0x583a64=_0x374582['x'],_0x593d73=_0x374582['y'],_0x3b96f6=_0x374582['z'],_0x56e91e=_0x374582['w'];return this['x']=_0x404cc5*_0x583a64+_0x4f7890*_0x56e91e+_0x48346b*_0x3b96f6-_0x1490b0*_0x593d73,this['y']=_0x404cc5*_0x593d73+_0x48346b*_0x56e91e+_0x1490b0*_0x583a64-_0x4f7890*_0x3b96f6,this['z']=_0x404cc5*_0x3b96f6+_0x1490b0*_0x56e91e+_0x4f7890*_0x593d73-_0x48346b*_0x583a64,this['w']=_0x404cc5*_0x56e91e-_0x4f7890*_0x583a64-_0x48346b*_0x593d73-_0x1490b0*_0x3b96f6,this;}['mulScalar'](_0xb0cb69,_0x301465=this){return this['x']=_0x301465['x']*_0xb0cb69,this['y']=_0x301465['y']*_0xb0cb69,this['z']=_0x301465['z']*_0xb0cb69,this['w']=_0x301465['w']*_0xb0cb69,this;}['mul2'](_0x1ab25e,_0xeed1a){const _0x95e92c=_0x1ab25e['x'],_0x410fc1=_0x1ab25e['y'],_0x234967=_0x1ab25e['z'],_0x142780=_0x1ab25e['w'],_0x1eb823=_0xeed1a['x'],_0x143ab0=_0xeed1a['y'],_0x3eedde=_0xeed1a['z'],_0x405dce=_0xeed1a['w'];return this['x']=_0x142780*_0x1eb823+_0x95e92c*_0x405dce+_0x410fc1*_0x3eedde-_0x234967*_0x143ab0,this['y']=_0x142780*_0x143ab0+_0x410fc1*_0x405dce+_0x234967*_0x1eb823-_0x95e92c*_0x3eedde,this['z']=_0x142780*_0x3eedde+_0x234967*_0x405dce+_0x95e92c*_0x143ab0-_0x410fc1*_0x1eb823,this['w']=_0x142780*_0x405dce-_0x95e92c*_0x1eb823-_0x410fc1*_0x143ab0-_0x234967*_0x3eedde,this;}['normalize'](_0x184dd1=this){let _0x3a5dec=_0x184dd1['length']();return _0x3a5dec===-0x15a4+0x50f*0x2+0xb86?(this['x']=this['y']=this['z']=0x4*-0x243+0x73*0x41+-0x1427,this['w']=-0x1*-0x17e3+0x184d*-0x1+0x6b):(_0x3a5dec=(-0x1*-0x1586+-0x5de+-0xfa7)/_0x3a5dec,this['x']=_0x184dd1['x']*_0x3a5dec,this['y']=_0x184dd1['y']*_0x3a5dec,this['z']=_0x184dd1['z']*_0x3a5dec,this['w']=_0x184dd1['w']*_0x3a5dec),this;}['set'](_0x22326b,_0x5b3044,_0x529b35,_0x10ed32){return this['x']=_0x22326b,this['y']=_0x5b3044,this['z']=_0x529b35,this['w']=_0x10ed32,this;}['setFromAxi'+'sAngle'](_0x46c46c,_0x7c978b){_0x7c978b*=(0x734*0x3+-0x33*-0x3d+0x21c3*-0x1+0.5)*Y['DEG_TO_RAD'];const _0x2d54b1=Math['sin'](_0x7c978b),_0x45e06e=Math['cos'](_0x7c978b);return this['x']=_0x2d54b1*_0x46c46c['x'],this['y']=_0x2d54b1*_0x46c46c['y'],this['z']=_0x2d54b1*_0x46c46c['z'],this['w']=_0x45e06e,this;}['setFromEul'+'erAngles'](_0xd5c60c,_0x2ce3b9,_0x3d37c8){if(_0xd5c60c instanceof D){const _0x21b5cc=_0xd5c60c;_0xd5c60c=_0x21b5cc['x'],_0x2ce3b9=_0x21b5cc['y'],_0x3d37c8=_0x21b5cc['z'];}const _0x4faacc=(0x3dc+0x26e1+-0x2abd+0.5)*Y['DEG_TO_RAD'];_0xd5c60c*=_0x4faacc,_0x2ce3b9*=_0x4faacc,_0x3d37c8*=_0x4faacc;const _0x26de30=Math['sin'](_0xd5c60c),_0x36dfc2=Math['cos'](_0xd5c60c),_0x1b15a5=Math['sin'](_0x2ce3b9),_0x2651c4=Math['cos'](_0x2ce3b9),_0x56d446=Math['sin'](_0x3d37c8),_0x598d57=Math['cos'](_0x3d37c8);return this['x']=_0x26de30*_0x2651c4*_0x598d57-_0x36dfc2*_0x1b15a5*_0x56d446,this['y']=_0x36dfc2*_0x1b15a5*_0x598d57+_0x26de30*_0x2651c4*_0x56d446,this['z']=_0x36dfc2*_0x2651c4*_0x56d446-_0x26de30*_0x1b15a5*_0x598d57,this['w']=_0x36dfc2*_0x2651c4*_0x598d57+_0x26de30*_0x1b15a5*_0x56d446,this;}['setFromMat'+'4'](_0x979f6e){const _0x46c44b=_0x979f6e['data'];let _0x31fe16=_0x46c44b[0x8*0xc1+0x1e4e+-0x2456],_0x4822b1=_0x46c44b[-0x1b0d+-0x143a+0x2f48],_0xaaa72e=_0x46c44b[-0x13a6+-0x46f*-0x1+0x513*0x3],_0x1b1b7d=_0x46c44b[-0x4f9+0x4b1*-0x4+0x17c1],_0x3e9740=_0x46c44b[0x1*-0x5e4+-0xe15+-0x355*-0x6],_0x3e902b=_0x46c44b[-0xc*-0x6+-0x29*0x8e+-0x4*-0x59f],_0x3d9727=_0x46c44b[-0x97*0x3a+-0x1e68+0x40a6],_0x21beb1=_0x46c44b[-0x3ea+-0xd61+0x1154],_0x93dcc8=_0x46c44b[-0x4*-0x859+0x12ca+-0x3424],_0x58d8b4;return _0x58d8b4=_0x31fe16*_0x31fe16+_0x4822b1*_0x4822b1+_0xaaa72e*_0xaaa72e,_0x58d8b4===-0xa1f+-0x1fe8+0x1*0x2a07?this['set'](0x34c*-0x2+0xbcf+0x1bd*-0x3,-0xa3d+0x172e+0x1*-0xcf1,-0x652*-0x1+-0x3c8+-0x28a,0x1800+-0x107*0x1+-0x16f8):(_0x58d8b4=(-0x2*-0x890+-0xe99+0x13*-0x22)/Math['sqrt'](_0x58d8b4),_0x31fe16*=_0x58d8b4,_0x4822b1*=_0x58d8b4,_0xaaa72e*=_0x58d8b4,_0x58d8b4=_0x1b1b7d*_0x1b1b7d+_0x3e9740*_0x3e9740+_0x3e902b*_0x3e902b,_0x58d8b4===0x494+-0x2092*-0x1+0x2*-0x1293?this['set'](-0x1088+0x1a28+-0x9a0,-0xe*-0x8f+-0xcc3+0x4f1,0xe1b*-0x2+0x3e5+-0xf*-0x19f,-0xe49+0x373*-0x8+-0x6fb*-0x6):(_0x58d8b4=(-0x1*0x4cc+-0xd7c+0x1*0x1249)/Math['sqrt'](_0x58d8b4),_0x1b1b7d*=_0x58d8b4,_0x3e9740*=_0x58d8b4,_0x3e902b*=_0x58d8b4,_0x58d8b4=_0x3d9727*_0x3d9727+_0x21beb1*_0x21beb1+_0x93dcc8*_0x93dcc8,_0x58d8b4===0x15c0+-0x27a+-0x1346?this['set'](-0x4b*0x21+-0x1ed6+0x2881*0x1,-0xb62+-0x12b3*-0x1+0x1*-0x751,-0xfda+0x183b+-0x861,0x1f3e*0x1+0x1a79+-0x39b6):(_0x58d8b4=(0x890*0x3+-0x10*0x8b+-0x10ff*0x1)/Math['sqrt'](_0x58d8b4),_0x3d9727*=_0x58d8b4,_0x21beb1*=_0x58d8b4,_0x93dcc8*=_0x58d8b4,_0x93dcc8<0x63*0x59+-0x1544+-0xd27?_0x31fe16>_0x3e9740?this['set'](-0x1c19+-0x5c6*-0x3+0xac8+_0x31fe16-_0x3e9740-_0x93dcc8,_0x4822b1+_0x1b1b7d,_0x3d9727+_0xaaa72e,_0x3e902b-_0x21beb1):this['set'](_0x4822b1+_0x1b1b7d,-0x1b46*-0x1+0x22e7+0x17*-0x2b4-_0x31fe16+_0x3e9740-_0x93dcc8,_0x3e902b+_0x21beb1,_0x3d9727-_0xaaa72e):_0x31fe16<-_0x3e9740?this['set'](_0x3d9727+_0xaaa72e,_0x3e902b+_0x21beb1,0xf86+-0x14fd*0x1+0x578-_0x31fe16-_0x3e9740+_0x93dcc8,_0x4822b1-_0x1b1b7d):this['set'](_0x3e902b-_0x21beb1,_0x3d9727-_0xaaa72e,_0x4822b1-_0x1b1b7d,0x1493*-0x1+0x1121+0x373+_0x31fe16+_0x3e9740+_0x93dcc8),this['mulScalar']((-0x90+-0x613+0x64*0x11)/this['length']()))));}['setFromDir'+'ections'](_0x583011,_0x5464d8){const _0x3e5ee3=0x1*-0x1fd3+-0x196e+0x3942+_0x583011['dot'](_0x5464d8);return _0x3e5ee3<Number['EPSILON']?Math['abs'](_0x583011['x'])>Math['abs'](_0x583011['y'])?(this['x']=-_0x583011['z'],this['y']=-0x19f8+0x2*-0x6ec+-0xe*-0x2d8,this['z']=_0x583011['x'],this['w']=-0x1c40+-0x1642+-0x3*-0x10d6):(this['x']=-0x1dc0+-0xda5*0x1+0x2b65,this['y']=-_0x583011['z'],this['z']=_0x583011['y'],this['w']=0x1a37+-0x1*0x17d+-0xc5d*0x2):(this['x']=_0x583011['y']*_0x5464d8['z']-_0x583011['z']*_0x5464d8['y'],this['y']=_0x583011['z']*_0x5464d8['x']-_0x583011['x']*_0x5464d8['z'],this['z']=_0x583011['x']*_0x5464d8['y']-_0x583011['y']*_0x5464d8['x'],this['w']=_0x3e5ee3),this['normalize']();}['slerp'](_0x253f81,_0x1563be,_0x1fafab){const _0x2c1682=_0x253f81['x'],_0x1d55c5=_0x253f81['y'],_0x41332a=_0x253f81['z'],_0x14dade=_0x253f81['w'];let _0x1dac88=_0x1563be['x'],_0xd2d6a1=_0x1563be['y'],_0x32d613=_0x1563be['z'],_0x4d339e=_0x1563be['w'],_0xbeae2c=_0x14dade*_0x4d339e+_0x2c1682*_0x1dac88+_0x1d55c5*_0xd2d6a1+_0x41332a*_0x32d613;if(_0xbeae2c<-0x1073*0x1+0x2263+-0x11f0&&(_0x4d339e=-_0x4d339e,_0x1dac88=-_0x1dac88,_0xd2d6a1=-_0xd2d6a1,_0x32d613=-_0x32d613,_0xbeae2c=-_0xbeae2c),Math['abs'](_0xbeae2c)>=0x1a7d+0x8*0x41f+-0x3b74)return this['w']=_0x14dade,this['x']=_0x2c1682,this['y']=_0x1d55c5,this['z']=_0x41332a,this;const _0x4ff55c=Math['acos'](_0xbeae2c),_0x4de0b1=Math['sqrt'](-0x176b+-0x532+0x1c9e-_0xbeae2c*_0xbeae2c);if(Math['abs'](_0x4de0b1)<0x3aa*-0x1+-0x1928+0x1cd2+0.001)return this['w']=_0x14dade*(0x1f2c+0x1604+0x10*-0x353+0.5)+_0x4d339e*(-0xc6b+0x154*-0x5+0x130f+0.5),this['x']=_0x2c1682*(-0xbeb+-0x1cfb+0x1473*0x2+0.5)+_0x1dac88*(-0x98e+0x24c5+-0x1b37+0.5),this['y']=_0x1d55c5*(0x1*0xe51+0x1f28+-0x67f*0x7+0.5)+_0xd2d6a1*(-0x85+-0x24*0xcd+0x1d59+0.5),this['z']=_0x41332a*(0x1*-0x1fdf+-0x224e*-0x1+-0x26f+0.5)+_0x32d613*(0x85*0x11+-0x157e+0x1*0xca9+0.5),this;const _0x2248c2=Math['sin']((0x2d1+-0x571+-0x2a1*-0x1-_0x1fafab)*_0x4ff55c)/_0x4de0b1,_0x236453=Math['sin'](_0x1fafab*_0x4ff55c)/_0x4de0b1;return this['w']=_0x14dade*_0x2248c2+_0x4d339e*_0x236453,this['x']=_0x2c1682*_0x2248c2+_0x1dac88*_0x236453,this['y']=_0x1d55c5*_0x2248c2+_0xd2d6a1*_0x236453,this['z']=_0x41332a*_0x2248c2+_0x32d613*_0x236453,this;}['transformV'+'ector'](_0x1d032a,_0x23a303=new D()){const _0x3b1ced=_0x1d032a['x'],_0x59e067=_0x1d032a['y'],_0x6975e1=_0x1d032a['z'],_0xf907b3=this['x'],_0x45bfe0=this['y'],_0x36e611=this['z'],_0x1d6e49=this['w'],_0x5cf896=_0x1d6e49*_0x3b1ced+_0x45bfe0*_0x6975e1-_0x36e611*_0x59e067,_0xb9f7a7=_0x1d6e49*_0x59e067+_0x36e611*_0x3b1ced-_0xf907b3*_0x6975e1,_0x2b8cb8=_0x1d6e49*_0x6975e1+_0xf907b3*_0x59e067-_0x45bfe0*_0x3b1ced,_0x2a2ae6=-_0xf907b3*_0x3b1ced-_0x45bfe0*_0x59e067-_0x36e611*_0x6975e1;return _0x23a303['x']=_0x5cf896*_0x1d6e49+_0x2a2ae6*-_0xf907b3+_0xb9f7a7*-_0x36e611-_0x2b8cb8*-_0x45bfe0,_0x23a303['y']=_0xb9f7a7*_0x1d6e49+_0x2a2ae6*-_0x45bfe0+_0x2b8cb8*-_0xf907b3-_0x5cf896*-_0x36e611,_0x23a303['z']=_0x2b8cb8*_0x1d6e49+_0x2a2ae6*-_0x36e611+_0x5cf896*-_0x45bfe0-_0xb9f7a7*-_0xf907b3,_0x23a303;}['fromArray'](_0x3360bc,_0x573bcd=-0xf44+0x10f6+-0x1b2){return this['x']=_0x3360bc[_0x573bcd]??this['x'],this['y']=_0x3360bc[_0x573bcd+(0x14f+-0xe9e*0x2+0x1bee)]??this['y'],this['z']=_0x3360bc[_0x573bcd+(0x202f+0x2*-0x132c+-0x62b*-0x1)]??this['z'],this['w']=_0x3360bc[_0x573bcd+(0x1c9+0x1d4e+-0x1f14)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x1efcd4=[],_0x5ebc2d=0x7fb+0x258*0x1+-0xa53){return _0x1efcd4[_0x5ebc2d]=this['x'],_0x1efcd4[_0x5ebc2d+(-0x2460+-0x2290+0x46f1)]=this['y'],_0x1efcd4[_0x5ebc2d+(-0xb51+0x146*-0x8+-0x1*-0x1583)]=this['z'],_0x1efcd4[_0x5ebc2d+(-0x1e9d+-0x224a+0x40ea)]=this['w'],_0x1efcd4;}};h(dn,'IDENTITY',Object['freeze'](new dn(-0x1cae+0xce0+0xfce,0x1512+-0x644+-0xece,-0x3*0x1af+0xf3f+0x3*-0x366,0x19cd*0x1+0x56c+-0x14d*0x18))),h(dn,'ZERO',Object['freeze'](new dn(0xe2*-0x9+0x1133+-0x17*0x67,0x1e61+0x1146+-0x2fa7,-0x1581+-0x2531*-0x1+-0xfb0*0x1,0x379*0x2+0x14d6+-0x7f*0x38)));let le=dn;const wa=new D(),Ea=new D(),hm=new D(),dm=new D(),F0=new D();class De{constructor(_0x4f131a,_0x21c542){h(this,'center',new D()),h(this,'halfExtent'+'s',new D(-0x47*-0x29+-0x1*0xffb+0x49c+0.5,-0x2c5+0x6*0x51e+-0x1bef+0.5,-0x19a1+0x23d5+-0xa34+0.5)),h(this,'_min',new D()),h(this,'_max',new D()),(_0x4f131a&&this['center']['copy'](_0x4f131a),_0x21c542&&this['halfExtent'+'s']['copy'](_0x21c542));}['add'](_0x28990b){const _0x396d69=this['center'],_0x56d780=_0x396d69['x'],_0x24687c=_0x396d69['y'],_0x3b70dc=_0x396d69['z'],_0x3166fc=this['halfExtent'+'s'],_0x8a6f29=_0x3166fc['x'],_0x35eea7=_0x3166fc['y'],_0x35fae9=_0x3166fc['z'];let _0x35c9d2=_0x56d780-_0x8a6f29,_0x3c1aaa=_0x56d780+_0x8a6f29,_0x44b255=_0x24687c-_0x35eea7,_0x4ba7b7=_0x24687c+_0x35eea7,_0x2162b0=_0x3b70dc-_0x35fae9,_0x1bb1c9=_0x3b70dc+_0x35fae9;const _0x41ec7d=_0x28990b['center'],_0x534353=_0x41ec7d['x'],_0x211c32=_0x41ec7d['y'],_0x5c7988=_0x41ec7d['z'],_0x5bd2b2=_0x28990b['halfExtent'+'s'],_0x6d446a=_0x5bd2b2['x'],_0x1a01d0=_0x5bd2b2['y'],_0x5170b6=_0x5bd2b2['z'],_0x49420f=_0x534353-_0x6d446a,_0x329e34=_0x534353+_0x6d446a,_0x156280=_0x211c32-_0x1a01d0,_0xc29a1=_0x211c32+_0x1a01d0,_0x430d82=_0x5c7988-_0x5170b6,_0x375cb9=_0x5c7988+_0x5170b6;_0x49420f<_0x35c9d2&&(_0x35c9d2=_0x49420f),_0x329e34>_0x3c1aaa&&(_0x3c1aaa=_0x329e34),_0x156280<_0x44b255&&(_0x44b255=_0x156280),_0xc29a1>_0x4ba7b7&&(_0x4ba7b7=_0xc29a1),_0x430d82<_0x2162b0&&(_0x2162b0=_0x430d82),_0x375cb9>_0x1bb1c9&&(_0x1bb1c9=_0x375cb9),_0x396d69['x']=(_0x35c9d2+_0x3c1aaa)*(0x217b+-0xa97+-0xa*0x24a+0.5),_0x396d69['y']=(_0x44b255+_0x4ba7b7)*(0x2347+-0x1589*0x1+0x6df*-0x2+0.5),_0x396d69['z']=(_0x2162b0+_0x1bb1c9)*(-0x1811*0x1+-0x1871*-0x1+-0x60+0.5),_0x3166fc['x']=(_0x3c1aaa-_0x35c9d2)*(-0x3e0*0x7+-0x1148+0x196*0x1c+0.5),_0x3166fc['y']=(_0x4ba7b7-_0x44b255)*(-0x1d2c+0x9*-0x6f+-0x1*-0x2113+0.5),_0x3166fc['z']=(_0x1bb1c9-_0x2162b0)*(-0xc8c*-0x2+-0x1*0x89+-0x188f+0.5);}['copy'](_0x5d71e9){this['center']['copy'](_0x5d71e9['center']),this['halfExtent'+'s']['copy'](_0x5d71e9['halfExtent'+'s']);}['clone'](){return new De(this['center'],this['halfExtent'+'s']);}['intersects'](_0x37cebf){const _0x23d4e7=this['getMax'](),_0x823056=this['getMin'](),_0xe52e1d=_0x37cebf['getMax'](),_0x2c9718=_0x37cebf['getMin']();return _0x823056['x']<=_0xe52e1d['x']&&_0x23d4e7['x']>=_0x2c9718['x']&&_0x823056['y']<=_0xe52e1d['y']&&_0x23d4e7['y']>=_0x2c9718['y']&&_0x823056['z']<=_0xe52e1d['z']&&_0x23d4e7['z']>=_0x2c9718['z'];}['_intersect'+'sRay'](_0x32cc6a,_0xef13c9){const _0x2aa73b=wa['copy'](this['getMin']())['sub'](_0x32cc6a['origin']),_0x7d6085=Ea['copy'](this['getMax']())['sub'](_0x32cc6a['origin']),_0x307293=_0x32cc6a['direction'];_0x307293['x']===0x133d+0x1*0x1b0e+-0x2e4b?(_0x2aa73b['x']=_0x2aa73b['x']<-0x75*-0x41+0x1e8*0xc+0x3*-0x1187?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x7d6085['x']=_0x7d6085['x']<-0x1997+-0x1*0x4d+0x19e4?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x2aa73b['x']/=_0x307293['x'],_0x7d6085['x']/=_0x307293['x']),_0x307293['y']===0x2437+-0x8b2+-0x1b85?(_0x2aa73b['y']=_0x2aa73b['y']<0x1697+-0x2*-0x8f3+-0x287d?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x7d6085['y']=_0x7d6085['y']<-0x25*-0x49+0x22ce+0x1*-0x2d5b?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x2aa73b['y']/=_0x307293['y'],_0x7d6085['y']/=_0x307293['y']),_0x307293['z']===-0x422*0x1+-0x26f8+0x2b1a?(_0x2aa73b['z']=_0x2aa73b['z']<0x11d9+0x1a1c+-0x2bf5?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x7d6085['z']=_0x7d6085['z']<-0x17*0x131+0x18cb*-0x1+0x3432?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x2aa73b['z']/=_0x307293['z'],_0x7d6085['z']/=_0x307293['z']);const _0x525d2d=hm['set'](Math['min'](_0x2aa73b['x'],_0x7d6085['x']),Math['min'](_0x2aa73b['y'],_0x7d6085['y']),Math['min'](_0x2aa73b['z'],_0x7d6085['z'])),_0x50a67c=dm['set'](Math['max'](_0x2aa73b['x'],_0x7d6085['x']),Math['max'](_0x2aa73b['y'],_0x7d6085['y']),Math['max'](_0x2aa73b['z'],_0x7d6085['z'])),_0xef84c7=Math['min'](Math['min'](_0x50a67c['x'],_0x50a67c['y']),_0x50a67c['z']),_0x43fa3b=Math['max'](Math['max'](_0x525d2d['x'],_0x525d2d['y']),_0x525d2d['z']),_0x53d13c=_0xef84c7>=_0x43fa3b&&_0x43fa3b>=-0x9bb*0x1+0x21f*-0x3+0x1018*0x1;return _0x53d13c&&_0xef13c9['copy'](_0x32cc6a['direction'])['mulScalar'](_0x43fa3b)['add'](_0x32cc6a['origin']),_0x53d13c;}['_fastInter'+'sectsRay'](_0x172b75){const _0x11b83a=wa,_0x40ec95=Ea,_0x1b1d8f=hm,_0x1f1634=dm,_0x43a6de=F0,_0x54a8a9=_0x172b75['direction'];return _0x11b83a['sub2'](_0x172b75['origin'],this['center']),_0x1f1634['set'](Math['abs'](_0x11b83a['x']),Math['abs'](_0x11b83a['y']),Math['abs'](_0x11b83a['z'])),_0x1b1d8f['mul2'](_0x11b83a,_0x54a8a9),!(_0x1f1634['x']>this['halfExtent'+'s']['x']&&_0x1b1d8f['x']>=-0x12aa+-0x174c+0x29f6||_0x1f1634['y']>this['halfExtent'+'s']['y']&&_0x1b1d8f['y']>=0x1*0xe35+0x51*0x11+0x1396*-0x1||_0x1f1634['z']>this['halfExtent'+'s']['z']&&_0x1b1d8f['z']>=0x98a+-0x954+0x2*-0x1b||(_0x43a6de['set'](Math['abs'](_0x54a8a9['x']),Math['abs'](_0x54a8a9['y']),Math['abs'](_0x54a8a9['z'])),_0x40ec95['cross'](_0x54a8a9,_0x11b83a),_0x40ec95['set'](Math['abs'](_0x40ec95['x']),Math['abs'](_0x40ec95['y']),Math['abs'](_0x40ec95['z'])),_0x40ec95['x']>this['halfExtent'+'s']['y']*_0x43a6de['z']+this['halfExtent'+'s']['z']*_0x43a6de['y'])||_0x40ec95['y']>this['halfExtent'+'s']['x']*_0x43a6de['z']+this['halfExtent'+'s']['z']*_0x43a6de['x']||_0x40ec95['z']>this['halfExtent'+'s']['x']*_0x43a6de['y']+this['halfExtent'+'s']['y']*_0x43a6de['x']);}['intersects'+'Ray'](_0x4ad396,_0x2999a4){return _0x2999a4?this['_intersect'+'sRay'](_0x4ad396,_0x2999a4):this['_fastInter'+'sectsRay'](_0x4ad396);}['setMinMax'](_0x3ddd67,_0x453364){this['center']['add2'](_0x453364,_0x3ddd67)['mulScalar'](0xea*-0x1+0xd*-0xcb+0xb39+0.5),this['halfExtent'+'s']['sub2'](_0x453364,_0x3ddd67)['mulScalar'](-0x13*0x1d8+0x511+-0x9fd*-0x3+0.5);}['getMin'](){return this['_min']['copy'](this['center'])['sub'](this['halfExtent'+'s']);}['getMax'](){return this['_max']['copy'](this['center'])['add'](this['halfExtent'+'s']);}['containsPo'+'int'](_0x174fb0){const _0x576e2c=this['getMin'](),_0x112ec7=this['getMax']();return!(_0x174fb0['x']<_0x576e2c['x']||_0x174fb0['x']>_0x112ec7['x']||_0x174fb0['y']<_0x576e2c['y']||_0x174fb0['y']>_0x112ec7['y']||_0x174fb0['z']<_0x576e2c['z']||_0x174fb0['z']>_0x112ec7['z']);}['setFromTra'+'nsformedAa'+'bb'](_0x92e655,_0x4b3254,_0x572dd8=!(0x7d8+0xf07+-0x2*0xb6f)){const _0xd1da2a=_0x92e655['center'],_0x64573f=_0x92e655['halfExtent'+'s'],_0x53d70e=_0x4b3254['data'];let _0x4562d5=_0x53d70e[0x1*0x236d+-0x4ca+-0x17*0x155],_0x3bd5ac=_0x53d70e[0x1cec+-0xff*-0x23+-0xcc1*0x5],_0x5cc621=_0x53d70e[0x3*0xa03+0x18a8+-0x36a9],_0x222f9b=_0x53d70e[-0x1a0a+0xf82+0x3*0x383],_0x2d29c3=_0x53d70e[0x1092*0x1+0x1d80+-0x1*0x2e0d],_0x24484c=_0x53d70e[-0xa65+-0x2557*0x1+-0x7*-0x6d3],_0x20b515=_0x53d70e[-0x7*-0x281+-0x1*0x490+0x1*-0xcf5],_0x18734a=_0x53d70e[0x58d+-0x2673*-0x1+-0x2bfa],_0x3a623a=_0x53d70e[0x9ec+-0x191*0x5+-0x20d];if(_0x572dd8){let _0x4b2a38=_0x4562d5*_0x4562d5+_0x3bd5ac*_0x3bd5ac+_0x5cc621*_0x5cc621;if(_0x4b2a38>0x1*0xfd1+-0x8*-0x3cf+-0x2e49){const _0x198d0f=(-0x4ee*0x2+-0x12f+0xb0c)/Math['sqrt'](_0x4b2a38);_0x4562d5*=_0x198d0f,_0x3bd5ac*=_0x198d0f,_0x5cc621*=_0x198d0f;}if(_0x4b2a38=_0x222f9b*_0x222f9b+_0x2d29c3*_0x2d29c3+_0x24484c*_0x24484c,_0x4b2a38>-0x110e*0x1+-0xc10*0x1+-0xe8f*-0x2){const _0xf26fd7=(0x19*0x177+-0x1ede*-0x1+-0x437c)/Math['sqrt'](_0x4b2a38);_0x222f9b*=_0xf26fd7,_0x2d29c3*=_0xf26fd7,_0x24484c*=_0xf26fd7;}if(_0x4b2a38=_0x20b515*_0x20b515+_0x18734a*_0x18734a+_0x3a623a*_0x3a623a,_0x4b2a38>0x246b*0x1+0x1a27+-0x3e92){const _0x7a760a=(0xaca+0x1dba+-0x2883)/Math['sqrt'](_0x4b2a38);_0x20b515*=_0x7a760a,_0x18734a*=_0x7a760a,_0x3a623a*=_0x7a760a;}}this['center']['set'](_0x53d70e[0x1d63*-0x1+0x1*-0x241f+0x418e]+_0x4562d5*_0xd1da2a['x']+_0x3bd5ac*_0xd1da2a['y']+_0x5cc621*_0xd1da2a['z'],_0x53d70e[-0x102e+-0x1*-0x2175+-0x113a]+_0x222f9b*_0xd1da2a['x']+_0x2d29c3*_0xd1da2a['y']+_0x24484c*_0xd1da2a['z'],_0x53d70e[-0x22bd+0x209+0x1061*0x2]+_0x20b515*_0xd1da2a['x']+_0x18734a*_0xd1da2a['y']+_0x3a623a*_0xd1da2a['z']),this['halfExtent'+'s']['set'](Math['abs'](_0x4562d5)*_0x64573f['x']+Math['abs'](_0x3bd5ac)*_0x64573f['y']+Math['abs'](_0x5cc621)*_0x64573f['z'],Math['abs'](_0x222f9b)*_0x64573f['x']+Math['abs'](_0x2d29c3)*_0x64573f['y']+Math['abs'](_0x24484c)*_0x64573f['z'],Math['abs'](_0x20b515)*_0x64573f['x']+Math['abs'](_0x18734a)*_0x64573f['y']+Math['abs'](_0x3a623a)*_0x64573f['z']);}static['computeMin'+'Max'](_0x5342bb,_0x583c76,_0x256ad6,_0x5c5758=_0x5342bb['length']/(-0xd6*-0x1+0x102*-0x9+0x83f*0x1)){if(_0x5c5758>-0x2312+0xb44+0x115*0x16){let _0x4c373b=_0x5342bb[-0x1*0x1543+0x9*0x36f+-0x9a4],_0x2a70bc=_0x5342bb[0x2*-0x134b+0x23d5+-0x2*-0x161],_0x569bb9=_0x5342bb[-0x1b4f*-0x1+0x1110+-0x2c5d],_0x11fcf1=_0x4c373b,_0x251cda=_0x2a70bc,_0x3929d9=_0x569bb9;const _0x3193a1=_0x5c5758*(-0x13ad+-0x7d9+0x1b89);for(let _0x4b5ec5=0x5fc+0xb7*0x2e+-0x26db;_0x4b5ec5<_0x3193a1;_0x4b5ec5+=0x167*0x1b+-0x93*-0x3+-0xd31*0x3){const _0x7277c2=_0x5342bb[_0x4b5ec5],_0x17aad9=_0x5342bb[_0x4b5ec5+(0x26d2+-0x7*-0x445+-0x44b4)],_0x365282=_0x5342bb[_0x4b5ec5+(-0x4*-0x9a7+-0x1*-0x1f00+-0x459a)];_0x7277c2<_0x4c373b&&(_0x4c373b=_0x7277c2),_0x17aad9<_0x2a70bc&&(_0x2a70bc=_0x17aad9),_0x365282<_0x569bb9&&(_0x569bb9=_0x365282),_0x7277c2>_0x11fcf1&&(_0x11fcf1=_0x7277c2),_0x17aad9>_0x251cda&&(_0x251cda=_0x17aad9),_0x365282>_0x3929d9&&(_0x3929d9=_0x365282);}_0x583c76['set'](_0x4c373b,_0x2a70bc,_0x569bb9),_0x256ad6['set'](_0x11fcf1,_0x251cda,_0x3929d9);}}['compute'](_0x5eaba4,_0x10f69c){De['computeMin'+'Max'](_0x5eaba4,wa,Ea,_0x10f69c),this['setMinMax'](wa,Ea);}['intersects'+'BoundingSp'+'here'](_0x4ffeb9){return this['_distanceT'+'oBoundingS'+'phereSq'](_0x4ffeb9)<=_0x4ffeb9['radius']*_0x4ffeb9['radius'];}['_distanceT'+'oBoundingS'+'phereSq'](_0x5b6edc){const _0x5ccfda=this['getMin'](),_0x2ba252=this['getMax']();let _0xe0a6a4=0x2*0x11c3+0x2093+0x3*-0x16b3;const _0x3b5b36=['x','y','z'];for(let _0x47cd0c=-0x222b+0x1065*0x2+0x1*0x161;_0x47cd0c<-0x1c24+0x5db*0x1+0x164c;++_0x47cd0c){let _0x16e86=-0x1d52+0xa54+0x12fe;const _0x4d01d6=_0x5b6edc['center'][_0x3b5b36[_0x47cd0c]],_0x120495=_0x5ccfda[_0x3b5b36[_0x47cd0c]],_0x2c6426=_0x2ba252[_0x3b5b36[_0x47cd0c]];let _0x4a15a4=0x19c1+-0x1fb8+0x5f7;_0x4d01d6<_0x120495&&(_0x4a15a4=_0x120495-_0x4d01d6,_0x16e86+=_0x4a15a4*_0x4a15a4),_0x4d01d6>_0x2c6426&&(_0x4a15a4=_0x4d01d6-_0x2c6426,_0x16e86+=_0x4a15a4*_0x4a15a4),_0xe0a6a4+=_0x16e86;}return _0xe0a6a4;}['_expand'](_0x5d4569,_0x530617){wa['add2'](this['getMin'](),_0x5d4569),Ea['add2'](this['getMax'](),_0x530617),this['setMinMax'](wa,Ea);}}const Il=new D(),N0=new D();class Mu{constructor(_0x4f46fd=new D(),_0x96ca0=-0x17d6+0x38*-0x76+0x31a6+0.5){h(this,'center'),h(this,'radius'),(w['assert'](!Object['isFrozen'](_0x4f46fd),'The\x20constr'+'uctor\x20of\x20\x27'+'BoundingSp'+'here\x27\x20does'+'\x20not\x20accep'+'t\x20a\x20consta'+'nt\x20(frozen'+')\x20object\x20a'+'s\x20a\x20\x27cente'+'r\x27\x20paramet'+'er'),this['center']=_0x4f46fd,this['radius']=_0x96ca0);}['containsPo'+'int'](_0x40f2cb){const _0x5d6409=Il['sub2'](_0x40f2cb,this['center'])['lengthSq'](),_0x542aaf=this['radius'];return _0x5d6409<_0x542aaf*_0x542aaf;}['intersects'+'Ray'](_0xd252,_0x3ec148){const _0x3e81b6=Il['copy'](_0xd252['origin'])['sub'](this['center']),_0x31ea17=_0x3e81b6['dot'](N0['copy'](_0xd252['direction'])['normalize']()),_0x75e5c4=_0x3e81b6['dot'](_0x3e81b6)-this['radius']*this['radius'];if(_0x75e5c4>0x110e+0x1*0xb+-0x1119*0x1&&_0x31ea17>-0x2c8*-0xd+-0x7f9+-0xb9*0x27)return!(0x4*0x788+-0x6f1*0x2+-0x103d);const _0x48b466=_0x31ea17*_0x31ea17-_0x75e5c4;if(_0x48b466<-0x3b2+-0x2337+-0x1*-0x26e9)return!(-0x8e5+-0x142c+0x1d12);const _0x1dfe8c=Math['abs'](-_0x31ea17-Math['sqrt'](_0x48b466));return _0x3ec148&&_0x3ec148['copy'](_0xd252['direction'])['mulScalar'](_0x1dfe8c)['add'](_0xd252['origin']),!(-0x1a73+0x2002+-0x58f);}['intersects'+'BoundingSp'+'here'](_0x496be2){Il['sub2'](_0x496be2['center'],this['center']);const _0x323ac4=_0x496be2['radius']+this['radius'];return Il['lengthSq']()<=_0x323ac4*_0x323ac4;}}class _S{constructor(_0x264d78=D['UP'],_0x1ae2da=0x3*-0x56f+0x1f7*-0x2+0x1*0x143b){h(this,'normal',new D()),h(this,'distance'),(this['normal']['copy'](_0x264d78),this['distance']=_0x1ae2da);}['clone'](){const _0x37607d=this['constructo'+'r'];return new _0x37607d()['copy'](this);}['copy'](_0x1e1176){return this['normal']['copy'](_0x1e1176['normal']),this['distance']=_0x1e1176['distance'],this;}['intersects'+'Line'](_0x3b025c,_0x1a2bc4,_0x13eeb7){const _0x442bd6=this['distance'],_0x46b6d0=this['normal']['dot'](_0x3b025c)+_0x442bd6,_0x53afaf=this['normal']['dot'](_0x1a2bc4)+_0x442bd6,_0x4d9427=_0x46b6d0/(_0x46b6d0-_0x53afaf),_0x5bcaf6=_0x4d9427>=-0x2*-0xe1e+-0x1792+-0x4aa&&_0x4d9427<=0x366+0x2334+-0x2699;return _0x5bcaf6&&_0x13eeb7&&_0x13eeb7['lerp'](_0x3b025c,_0x1a2bc4,_0x4d9427),_0x5bcaf6;}['intersects'+'Ray'](_0x2c9f3c,_0x2150e0){const _0x415e22=this['normal']['dot'](_0x2c9f3c['direction']);if(_0x415e22===-0x617*-0x3+0x168e+-0x28d3)return!(0x5*-0x210+0x1e09+-0x4*0x4ee);const _0x1a1928=-(this['normal']['dot'](_0x2c9f3c['origin'])+this['distance'])/_0x415e22;return _0x1a1928>=-0x1*0x101c+-0x1*-0x26f5+-0x16d9*0x1&&_0x2150e0&&_0x2150e0['copy'](_0x2c9f3c['direction'])['mulScalar'](_0x1a1928)['add'](_0x2c9f3c['origin']),_0x1a1928>=0x21d*-0xf+-0x55b*-0x3+0xfa2*0x1;}['normalize'](){const _0x52eb99=(-0x18f4*-0x1+-0x245b*0x1+-0x8*-0x16d)/this['normal']['length']();return this['normal']['mulScalar'](_0x52eb99),this['distance']*=_0x52eb99,this;}['set'](_0x3e99ba,_0xedf20d,_0x2bd79b,_0x19d2d1){return this['normal']['set'](_0x3e99ba,_0xedf20d,_0x2bd79b),this['distance']=_0x19d2d1,this;}['setFromPoi'+'ntNormal'](_0x38c16a,_0x44794f){return this['normal']['copy'](_0x44794f),this['distance']=-this['normal']['dot'](_0x38c16a),this;}}class k0{constructor(){h(this,'planes',[]);for(let _0x4d61db=0x20e6+0x9cb+-0x2ab1;_0x4d61db<-0xb*-0xe5+0x2565+-0x2f36*0x1;_0x4d61db++)this['planes'][_0x4d61db]=new _S();}['clone'](){const _0x42ed7e=this['constructo'+'r'];return new _0x42ed7e()['copy'](this);}['copy'](_0x13e4ec){for(let _0x56fa1a=0xb6b+0xae7*-0x1+-0xb*0xc;_0x56fa1a<0x26fa+-0x19d5+-0xd1f*0x1;_0x56fa1a++)this['planes'][_0x56fa1a]['copy'](_0x13e4ec['planes'][_0x56fa1a]);return this;}['setFromMat'+'4'](_0x595486){const [_0x21a1d2,_0x5c39c3,_0x201e4d,_0x49c084,_0x2ff9da,_0x13fecb,_0x4f4ac1,_0x163c6c,_0x45a25b,_0x1888a6,_0x645b8e,_0xcd8c09,_0x11ee55,_0x57719a,_0x504d06,_0x4a7ddd]=_0x595486['data'],_0x138846=this['planes'];_0x138846[-0xa4e+0x443*0x3+0x5*-0x7f]['set'](_0x49c084-_0x21a1d2,_0x163c6c-_0x2ff9da,_0xcd8c09-_0x45a25b,_0x4a7ddd-_0x11ee55)['normalize'](),_0x138846[-0x223*-0x1+-0x2b*0xba+0x1d1c]['set'](_0x49c084+_0x21a1d2,_0x163c6c+_0x2ff9da,_0xcd8c09+_0x45a25b,_0x4a7ddd+_0x11ee55)['normalize'](),_0x138846[0x10a4+-0xe*0x1e+-0xefe]['set'](_0x49c084+_0x5c39c3,_0x163c6c+_0x13fecb,_0xcd8c09+_0x1888a6,_0x4a7ddd+_0x57719a)['normalize'](),_0x138846[0x1*-0x2426+0x50f*-0x2+0x2e47]['set'](_0x49c084-_0x5c39c3,_0x163c6c-_0x13fecb,_0xcd8c09-_0x1888a6,_0x4a7ddd-_0x57719a)['normalize'](),_0x138846[0x3*-0xec+-0x1*-0x207d+-0x1db5]['set'](_0x49c084-_0x201e4d,_0x163c6c-_0x4f4ac1,_0xcd8c09-_0x645b8e,_0x4a7ddd-_0x504d06)['normalize'](),_0x138846[0x1*-0x698+-0x2157+0x13fa*0x2]['set'](_0x49c084+_0x201e4d,_0x163c6c+_0x4f4ac1,_0xcd8c09+_0x645b8e,_0x4a7ddd+_0x504d06)['normalize']();}['containsPo'+'int'](_0x52fcd7){for(let _0x33e99b=0x1*0x18d1+0x1e1e+-0x1*0x36ef;_0x33e99b<0x1b*-0x14d+0x301+0x2c*0xbb;_0x33e99b++){const {normal:_0x321658,distance:_0x320a78}=this['planes'][_0x33e99b];if(_0x321658['dot'](_0x52fcd7)+_0x320a78<=-0x1*0xbeb+0xe9*0x2a+0xf*-0x1c1)return!(0x1*-0x30b+0x1*0x1492+0x2*-0x8c3);}return!(-0x1d2f+0x18*0xa7+-0x1*-0xd87);}['containsSp'+'here'](_0x47b136){const {center:_0x4abbbd,radius:_0x36b833}=_0x47b136;let _0x9c53f8=-0x1d1+0x15a*-0xe+-0x14bd*-0x1;for(let _0x452853=0x178e+0x4c1*-0x1+-0x12cd;_0x452853<-0x36d*0x8+-0x1973+-0x1*-0x34e1;_0x452853++){const {normal:_0x4f7c02,distance:_0x3b269a}=this['planes'][_0x452853],_0x4f23c8=_0x4f7c02['dot'](_0x4abbbd)+_0x3b269a;if(_0x4f23c8<=-_0x36b833)return 0x3*-0x92c+-0x33*0x20+0x21e4;_0x4f23c8>_0x36b833&&_0x9c53f8++;}return _0x9c53f8===0xeae+-0x25d0+0x1728?0x1*0x270f+-0x20*-0x40+0x323*-0xf:0x8a*0x41+0x2353*-0x1+-0x2*-0x25;}}class wn{constructor(_0x176d9e,_0x3dc01a){h(this,'origin',new D()),h(this,'direction',D['FORWARD']['clone']()),(_0x176d9e&&this['origin']['copy'](_0x176d9e),_0x3dc01a&&this['direction']['copy'](_0x3dc01a));}['set'](_0x245953,_0x155945){return this['origin']['copy'](_0x245953),this['direction']['copy'](_0x155945),this;}['copy'](_0x2f2e97){return this['set'](_0x2f2e97['origin'],_0x2f2e97['direction']);}['clone'](){return new this['constructo'+'r'](this['origin'],this['direction']);}}const yt=-0x1*0x777+-0x22b3+-0x6*-0x707,ue=-0x3b*-0x7c+0x10a5+-0x5a7*0x8,Du=0x2*0xae5+0x623+-0x7*0x3fd,Iu=0x397*-0x2+-0x1*-0x579+0x1b5,Ft=-0x1641+0x22b5+-0x1*0xc73,U0=-0x1*-0x23f7+0x8b8*-0x4+0x1*-0x115,gS=0x1dc8+0x2053+-0x3e17,B0=-0x1aa9+-0x1*0x210d+0x13e9*0x3,Ah=0x1188+0x192a+-0x2aac,Ch=0xf*-0x21f+-0x4b0+0x2489,fs=0x1823+0x3*0x14d+0xc2*-0x25,z0=0x157f*-0x1+-0x1230+0x9*0x469,V0=0x19b2+0x1b6e+-0x1*0x351d,G0=0x5d*0x55+-0x20*0x10a+0x263,ms=-0x1f9a*0x1+0x7d0+0x17ca,zc=0xcde+-0x170*0x19+0x1713*0x1,SS=0x1*-0x1253+0xf9d*0x1+0x2b8,H0=-0xf52*0x1+-0x19fe+0x2953,Fo=0x1*-0x251+-0x1f7d+-0x3*-0xb45,No=0x144b+0xa73*0x1+0x2*-0xf5e,Vc=-0x1877+0xde2+0xa99,bt=0x2400+0x3*-0xb67+-0x1cb,ca=-0x22ed*0x1+0xd64+0x158a,wo=-0x65*-0x62+-0x1*-0x30+-0x1*0x26d8,W0=-0x19eb*0x1+0x75*-0x4b+0x3c35,Te=0x4*0x242+0xcc1+-0xb*0x1fb,vt=0xb73+0x3*-0xb12+0x15c4,Ph=0x20e0+-0x1ce9+0x1*-0x3f5,Mh=-0xd80+0x712+0x11*0x61,Dh=0x1e66+-0xd9*0x1d+-0x5cd,ha=-0x17*-0x67+-0x15*0x17+-0x9*0xd1,$0=0x1*0x24d9+-0xd3a*-0x1+-0x3213*0x1,Gc=-0x2a*0xa2+-0x1*-0x1552+-0x1c1*-0x3,Hc=-0x257*0x3+0x2434*-0x1+0x2b3b,Sf=-0x67*0x38+-0x2532+0x3bbd,X0=-0x14ba+0x19d7+0x91*-0x9,q0=0x2b*0x1b+0xdd*0xd+-0xfbd,j0=0x26a4+-0x19c7*-0x1+-0x4065,Hi=-0x7d9*0x3+0x22d5+-0xb43,yf=0x1800+0x230b+-0x3b0b,ji=-0x1*-0x8+-0x901+0x8fa,yr=0x25*-0x5d+0x15a0+-0x82d,yS=-0x62b+0x2233+-0x4*0x702,vS=0x1*-0x1e79+0x3a*-0x7b+0x74b*0x8,Lu=0xe6+0x130f+-0x1*0x13f3,Ih=0x42c+0xcde+-0x3*0x5ad,Ru=0x1cc9*0x1+0x1*0x3a5+-0x206a,Lh=-0x1*-0x23a2+0x1647+0x39e4*-0x1,wr=0xef7+0x11*-0xc9+0x3*-0x88,Ne=-0x139*-0x14+-0x1922+0xb5,Rh=0x1*-0xe64+0x1c6a+-0xdfe,Ou=-0x1ed8+0xa96*-0x2+-0xa69*-0x5,ol=0xd*0x7a+0x15d8+-0x400*0x7,ui=-0x1231+0xb*0x3d+0xf9d,nt=-0x4*-0x8cb+0x1138+-0x64*0x86,Ye=0x4*-0x2b3+0x2397+-0x18be,Xt=-0x4*-0x154+0x1bb0+-0x20f2,Qi=0x4*0x19f+0x8a0+-0xf0d,Wi=0x12d+-0xa46+0x929,Oh=-0x221b+-0xac1+0x2ced,En=-0x9ad*-0x1+0x22c9+-0x6*0x766,Fu=0x10*-0x258+0xd*0x269+0x63e,_s=-0x3b5+-0x4*0x1d+0x43d,Fh=0xbed*-0x2+-0x1ecf+0x36be,Nu=-0x1a97+0x16ed+0x3c0,ku=0x40*-0x4d+0x1*-0x2485+0x37dc,ll=0x2*-0xe87+-0x124*-0xf+0xc0a,cl=-0x16b7*-0x1+0x13*0xd6+0x268*-0x10,Nh=-0x29*0xa2+0x21df+-0x7d3,kh=0x26b0+-0x153*0x4+0x2149*-0x1,xS=-0x2526+0x1b4f+0x9f3,TS=0x11a2+-0xdfc*0x1+-0x389,wS=0x946+0x5e5*0x5+-0x13f*0x1f,ES=0x7ba+0x1*-0x112+-0x689,Uu=0xc11+0x4*0x85f+-0x2d6d,bS=-0x11bb+-0x8*-0xef+0xe*0xbe,Bu=-0x17*0x190+-0x47*0x79+0x45a1,zu=-0x2458+0x66*0x43+0x3*0x343,Vu=0x143a+0x154*-0xb+0x2*-0x2bd,Yi=-0x1*0xa1a+0x1df7+-0x13b8,Gu=0x85*-0x26+-0xc73*0x1+0x2057,AS=-0x1*-0x3eb+0x2680+-0x2a44,Hu=-0x81*0x8+-0x1*0x20e0+-0x2510*-0x1,Wu=-0x1df7+0xa6*0x2e+0x26*0x2,$u=-0x4bd*-0x1+0x125e*-0x2+0x2029,Xu=0x1cbe+-0x11d3+-0xac0,qu=0x110a+-0x30+0xe*-0x131,CS=-0x90+0x16d4+-0x1617,ju=-0x21d5+-0x2069+-0x51c*-0xd,Uh=-0x87b+-0xd0b+-0x15b5*-0x1,Yu=0x3c7*0x5+0x1c29+-0x2edc,Ue=0x612+-0x2710+0x212f*0x1,Bh=-0x1845+-0x2*-0x6f2+0xa93,Ku=0x181e+0x1b*-0x7b+-0xaf2,Zu=-0x19a3+0x10da+-0x27*-0x3b,Qu=0x22d*-0xd+-0xdad+0x2a2b,vf=-0x437+-0x1e6d+0x22da,xf=-0x15d+0x21ac+-0x2018,Tf=0x92+-0xcac*-0x1+-0x683*0x2,wf=0x2634+-0x1bd7+0x288*-0x4,Ef=0xc0e*-0x3+0x169*0xe+0x10aa,bf=-0x146f+-0x6b5+0x1b63*0x1,PS=0x805+-0xac4*-0x3+0xd*-0x315,MS=-0xf*0x9+0x106c*-0x2+-0x20*-0x10d,DS=-0x526*-0x5+-0x1394+-0xe*0x6c,IS=0x1e4f*-0x1+-0x119a*0x2+0x20e3*0x2,Af=0x131c+0x1f*0x6b+0x1fcd*-0x1,un=-0x13e8+-0x34*-0x2d+0x19*0x71,Nt=new Map([[yS,{'name':'A8','size':0x1,'ldr':!(-0x1644+-0x8b3*-0x1+-0x1*-0xd91)}],[Zu,{'name':'R8','size':0x1,'ldr':!(-0x9d8+-0x1dfe+0x27d6)}],[vS,{'name':'L8','size':0x1,'ldr':!(0x18cc+-0x9d*-0x11+-0x2339)}],[Lu,{'name':'LA8','size':0x2,'ldr':!(-0x2d5*-0x1+0xa71+-0xd46)}],[Qu,{'name':'RG8','size':0x2,'ldr':!(0xde9+0x24e+-0x1037)}],[Ih,{'name':'RGB565','size':0x2,'ldr':!(-0x18f7+0x4a7+-0x190*-0xd)}],[Ru,{'name':'RGBA5551','size':0x2,'ldr':!(-0x1*0x1a9f+-0x7*0x1+0x9*0x2f6)}],[Lh,{'name':'RGBA4','size':0x2,'ldr':!(-0x2e*-0x91+0x93c+-0x1*0x234a)}],[wr,{'name':'RGB8','size':0x4,'ldr':!(0xcf+0x6e*0x3d+-0x1*0x1b05)}],[Ne,{'name':'RGBA8','size':0x4,'ldr':!(-0x1eef*-0x1+0xe*0x90+0x5*-0x7c3),'srgbFormat':_s}],[Bh,{'name':'R16F','size':0x2}],[Ku,{'name':'RG16F','size':0x4}],[ui,{'name':'RGB16F','size':0x8}],[nt,{'name':'RGBA16F','size':0x8}],[Ye,{'name':'RGB32F','size':0x10}],[Xt,{'name':'RGBA32F','size':0x10}],[Qi,{'name':'R32F','size':0x4}],[Wi,{'name':'DEPTH','size':0x4}],[un,{'name':'DEPTH16','size':0x2}],[Oh,{'name':'DEPTHSTENC'+'IL','size':0x4}],[En,{'name':'111110F','size':0x4}],[Fu,{'name':'SRGB8','size':0x4,'ldr':!(0x647*0x5+0xa*0x310+-0x3e03),'srgb':!(-0x3*-0xb1d+-0x174a+0x1*-0xa0d)}],[_s,{'name':'SRGBA8','size':0x4,'ldr':!(0x6ad*-0x2+-0x6*-0x5c9+-0x155c),'srgb':!(0x1a7*0x3+-0x650*0x3+0xdfb)}],[ES,{'name':'BGRA8','size':0x4,'ldr':!(0x8b5+0x1*0xad1+0x2ca*-0x7)}],[PS,{'name':'SBGRA8','size':0x4,'ldr':!(0x139*-0x10+0x1bce+-0xd3*0xa),'srgb':!(0x1*0x49+-0x5e2*-0x3+0x1*-0x11ef)}],[Rh,{'name':'DXT1','blockSize':0x8,'ldr':!(0xb51*0x2+0x1*-0x98f+-0xd13),'srgbFormat':vf}],[Ou,{'name':'DXT3','blockSize':0x10,'ldr':!(0x1feb+-0xec7+-0x2*0x892),'srgbFormat':xf}],[ol,{'name':'DXT5','blockSize':0x10,'ldr':!(-0xb64+0xaae*0x2+-0x9f8),'srgbFormat':Tf}],[Fh,{'name':'ETC1','blockSize':0x8,'ldr':!(-0x770+0x2677*0x1+-0x1f07)}],[Nu,{'name':'ETC2_RGB','blockSize':0x8,'ldr':!(0xd74+0x2*-0x171+-0xf6*0xb),'srgbFormat':wf}],[ku,{'name':'ETC2_RGBA','blockSize':0x10,'ldr':!(0x1*0xc25+0x1823+-0x2448),'srgbFormat':Ef}],[ll,{'name':'PVRTC_2BPP'+'_RGB_1','ldr':!(0x332*0x2+0xba2+0x301*-0x6),'blockSize':0x8}],[cl,{'name':'PVRTC_2BPP'+'_RGBA_1','ldr':!(0x2302+0x11b1*-0x1+0x1151*-0x1),'blockSize':0x8}],[Nh,{'name':'PVRTC_4BPP'+'_RGB_1','ldr':!(-0x23b3+0x45*0x1+0x236e),'blockSize':0x8}],[kh,{'name':'PVRTC_4BPP'+'_RGBA_1','ldr':!(-0x24ed+0x24a8+0x3*0x17),'blockSize':0x8}],[xS,{'name':'ASTC_4x4','blockSize':0x10,'ldr':!(-0xf2b+-0x8*0x227+-0x2063*-0x1),'srgbFormat':bf}],[TS,{'name':'ATC_RGB','blockSize':0x8,'ldr':!(-0x13c*0x1f+-0x5fc+0x2c40)}],[wS,{'name':'ATC_RGBA','blockSize':0x10,'ldr':!(0x4*-0x224+-0xbe5*-0x1+-0x355)}],[MS,{'name':'BC6H_RGBF','blockSize':0x10}],[DS,{'name':'BC6H_RGBUF','blockSize':0x10}],[IS,{'name':'BC7_RGBA','blockSize':0x10,'ldr':!(0x18ad+0x463*0x6+-0x32ff*0x1),'srgbFormat':Af}],[vf,{'name':'DXT1_SRGB','blockSize':0x8,'ldr':!(-0x1457+0x18*0x4c+-0x1*-0xd37),'srgb':!(0x4a*0x36+0x1*0x2702+0x2*-0x1b4f)}],[xf,{'name':'DXT3_SRGBA','blockSize':0x10,'ldr':!(-0x130b*-0x1+-0x57*-0x45+-0x2a7e),'srgb':!(0x1ba1+0x17*-0x6e+-0x11bf)}],[Tf,{'name':'DXT5_SRGBA','blockSize':0x10,'ldr':!(0xd3c+0x37*-0xa7+0x16a5),'srgb':!(0x1*0x1ae6+0x1b12+-0x35f8)}],[wf,{'name':'ETC2_SRGB','blockSize':0x8,'ldr':!(0x16c9+0x7*0x386+-0x2f73),'srgb':!(0xe*0x269+0x1fc3+-0x4181*0x1)}],[Ef,{'name':'ETC2_SRGBA','blockSize':0x10,'ldr':!(-0x469*-0x1+0x1*0x269f+0x33*-0xd8),'srgb':!(-0x4f7*-0x5+-0x514+0x695*-0x3)}],[bf,{'name':'ASTC_4x4_S'+'RGB','blockSize':0x10,'ldr':!(-0x25ab+-0x4fd+-0xe38*-0x3),'srgb':!(-0x4*-0x2e6+-0x2bf+-0x8d9)}],[Af,{'name':'BC7_SRGBA','blockSize':0x10,'ldr':!(-0x474+-0x14fa+0x196e),'srgb':!(-0x12df+0x1*-0x17a3+0x2a82)}],[Uu,{'name':'R8I','size':0x1,'isInt':!(0x24*-0x67+0x1c40*-0x1+0x2abc)}],[bS,{'name':'R8U','size':0x1,'isInt':!(0x289*0x2+0x135f+-0x1871)}],[Bu,{'name':'R16I','size':0x2,'isInt':!(0x11*-0xc7+0x22b6+0x157f*-0x1)}],[zu,{'name':'R16U','size':0x2,'isInt':!(-0x19*-0xb6+0xbcf*0x2+-0x6e6*0x6)}],[Vu,{'name':'R32I','size':0x4,'isInt':!(-0x1*-0x2216+0x1*0x8cb+-0x3*0xe4b)}],[Yi,{'name':'R32U','size':0x4,'isInt':!(0xa0f+0x162a+0x71*-0x49)}],[Gu,{'name':'RG8I','size':0x2,'isInt':!(-0x2*-0x935+-0x11*-0x1a6+-0x2e70)}],[AS,{'name':'RG8U','size':0x2,'isInt':!(0x258b+-0x621+-0x1f6a)}],[Hu,{'name':'RG16I','size':0x4,'isInt':!(0x1*0x1731+-0x2a1+-0x1490)}],[Wu,{'name':'RG16U','size':0x4,'isInt':!(0x6d7+-0x42*-0x3f+-0x1715)}],[$u,{'name':'RG32I','size':0x8,'isInt':!(-0x1d*0x6b+-0x2224+-0x2e43*-0x1)}],[Xu,{'name':'RG32U','size':0x8,'isInt':!(0x12ef+0x1fd0+-0x32bf*0x1)}],[qu,{'name':'RGBA8I','size':0x4,'isInt':!(-0x16*0xb3+0x6fa*0x3+-0x47*0x14)}],[CS,{'name':'RGBA8U','size':0x4,'isInt':!(0x1*0x2702+-0x1a3b+-0xcc7)}],[ju,{'name':'RGBA16I','size':0x8,'isInt':!(0x1aff*0x1+0x136+-0x1c35)}],[Uh,{'name':'RGBA16U','size':0x8,'isInt':!(0x244d*0x1+0x1d73+-0x20e0*0x2)}],[Yu,{'name':'RGBA32I','size':0x10,'isInt':!(0x7*-0x189+-0x178+0xc37)}],[Ue,{'name':'RGBA32U','size':0x10,'isInt':!(0x10f*-0x1+0x1384+-0x1275)}]]),Y0=_0x18cee2=>{var _0xc83162;return((_0xc83162=Nt['get'](_0x18cee2))==null?void(0x151*0x11+0x4*0x6a0+-0x30e1):_0xc83162['blockSize'])!==void(0xb8e+0x73*0x6+-0xe40);},Wc=_0x261ac7=>{var _0x17c444;return((_0x17c444=Nt['get'](_0x261ac7))==null?void(0xb1c+0x1733+-0x1*0x224f):_0x17c444['srgb'])===!(-0x3*-0x91d+0x1*-0x565+-0x15f2);},rn=_0x2e8717=>{var _0x3a6a8c;return((_0x3a6a8c=Nt['get'](_0x2e8717))==null?void(0x3c*0xa0+0x183*0x17+-0x4845):_0x3a6a8c['isInt'])===!(-0x2113*-0x1+0x1581+-0x3694);},zh=_0x56c028=>{var _0x35aa81;return((_0x35aa81=Nt['get'](_0x56c028))==null?void(-0x796*-0x4+0x15f*0x1+-0x1fb7):_0x35aa81['srgbFormat'])||_0x56c028;},K0=_0x4242e2=>{for(const [_0x284538,_0x305ffa]of Nt)if(_0x305ffa['srgbFormat']===_0x4242e2)return _0x284538;return _0x4242e2;},LS=_0x32a25e=>{const _0x292280=Nt['get'](_0x32a25e);return!!(_0x292280!=null&&_0x292280['ldr']&&!(_0x292280!=null&&_0x292280['srgb']));},RS=_0x49dfcd=>{switch(_0x49dfcd){case Qi:case Ye:case Xt:return Float32Array;case Vu:case $u:case Yu:return Int32Array;case Yi:case Xu:case Ue:return Uint32Array;case Bu:case Hu:case ju:return Int16Array;case Qu:case zu:case Wu:case Uh:case Ih:case Ru:case Lh:case Bh:case Ku:case ui:case nt:return Uint16Array;case Uu:case Gu:case qu:return Int8Array;default:return Uint8Array;}},Vh=-0x1bd1+-0x250d+0x40de,Gh=-0xe17*-0x1+-0xacc*-0x1+-0x18e2,OS=0x1cc9+-0xfbb*-0x1+-0x4f2*0x9,FS=-0x1fbb+-0x1e54+0xa*0x635,qs=0x92d+0x859*-0x1+0x4*-0x34,vr=-0x19*-0x127+-0x1*0x65+-0x1c65,sa=0xff1+0xf5f*-0x2+-0x159*-0xb,Pe='POSITION',gs='NORMAL',yi='TANGENT',gi='BLENDWEIGH'+'T',us='BLENDINDIC'+'ES',Wt='COLOR',fm='TEXCOORD',is='TEXCOORD0',va='TEXCOORD1',hl='TEXCOORD2',dl='TEXCOORD3',fl='TEXCOORD4',ul='TEXCOORD5',pl='TEXCOORD6',ml='TEXCOORD7',Cf='ATTR0',$c='ATTR1',Ju='ATTR2',ep='ATTR3',tp='ATTR4',Z0='ATTR5',Q0='ATTR6',J0='ATTR7',ko='ATTR8',Uo='ATTR9',ex='ATTR10',sp='ATTR11',ip='ATTR12',Xc='ATTR13',rp='ATTR14',bn='ATTR15',NS=-0x1eb9+-0x6bf*-0x1+0x17fb,pn=-0x1*-0x1bd+-0x33*-0x63+0x1*-0x1576,tx=0x1ede+0x61f*-0x1+-0x18bd,sx=0x4*-0x82e+0x5*0x259+-0x1*-0x14fe,ix=0xfb*0xc+0x19a2+0x2561*-0x1,Ll=-0xb66*0x1+-0x5d5*0x2+0x1710,kS=0x1*-0x703+0x9*-0x223+0x1a3f,fd=0x2*-0x873+0x3e1*-0x8+0x2ff0,Ms='default',Ki='rgbm',qc='rgbe',Bo='rgbp',zo='swizzleGGG'+'R',Pf=-0x14f4+-0x250d+-0x4b*-0xc6,Er=-0xd*0x8d+-0x1303+0x1a2e,US=0xae*0x10+0x2*-0xceb+0xef9,BS='2d',rx=0x2041*-0x1+0x1dec+0x255,ax='none',Mf='cube',um='equirect',nx='octahedral',Fe='glsl',it='wgsl',Hh=-0x120f+-0x15*0xa+0x12e1,ia=-0x1d3*0xc+-0x1*-0x19df+-0x3fa,Wh=-0x8b*0x3a+0x876+0x6*0x3d7,_l=0x920*0x1+0x1*0x10af+0xd*-0x1fc,zS=0x202c+-0x1293+-0xd95,Vo=0x19c3+-0x3f*0x9+-0x1787,Ve=0x1454+0x2167+-0x3*0x11e7,mn=-0x16+-0x2c2*0x4+0xb1e,da=-0x6*0x83+0xb4e*0x3+-0x1ed7*0x1,$s=0x1fd+0x1ecc+-0x20c7,fa=-0x3*-0x78c+-0x1e86*0x1+0x7e5,ds=0x1fd5+-0x868+-0x1769,An=0x148a+0xe98+-0x231d,ra=-0x20d1+-0xeaa*0x2+-0xf*-0x425,aa=-0x1f6+0x11fe+-0x1001,na=-0x21de+-0x7a*-0x3+0x2078,Go=0x5*0x3b9+-0x3a*0x17+0xd5e*-0x1,Ho=0x232*0x3+-0x842*0x3+-0x1*-0x123a,Wo=0x7*0x2b6+-0xe9*-0x1+-0x13d8,jc=-0xf07+0x1d3*-0x14+0x338f,Cn=0x59*-0x6d+0xc99+-0x15*-0x135,li=-0x248f+0x1314+0x1189,ox=0x13d0+-0xd85*0x1+-0x63c,lx=-0x20e3*-0x1+0x3d+0x2*-0x1088,$h=-0xaf0+0x14d2+-0x9d1,cx=0x2452*0x1+-0x1ffb+-0x445,hx=-0x134f+-0x2163+0x1*0x34c5,dx=0x7*0x13b+0x135d+-0x1be6,Xh=-0xb2*-0xe+0x1*-0x2405+0x1*0x1a5e,qh=-0x7*-0x15b+-0x12*0x121+0xaeb,ap=-0x22*-0x53+-0x2086+0x1597,VS=0x26dd*0x1+-0x75b*-0x1+-0x2e20,fx=0x3f3*-0x5+0x1*0x26ae+-0x12d6,Pn=-0x8*-0x6+-0x2*0xb1e+-0x51*-0x46,Mn=0x259c+0x10d+0x268e*-0x1,Dn=-0x5*0x51b+-0x1ae2+0x5*0xa81,In=-0xa*0x71+-0xa6f+0xef6,Ln=0x4*-0x2e3+-0x5*-0x399+-0x1*0x653,jh=-0x1*0x231a+-0x169*0x5+0x2a46,Yh=-0x18c3*-0x1+-0x5fd*0x5+0xc2*0x7,Rn=0x1*0x1f46+0x2*0x123a+-0x4399,Kh=0x1c35+-0x2249+0x636,Zh=-0x7b4+0x3c2+0x415,On=-0xc*0x1ed+-0x34*-0x59+0x52c,Qh=-0x168f+0x3*0xc3d+0xd3*-0x11,Jh=-0x399*-0x1+-0x1cac+0x1939,Yc=0x1ea2+0x1*-0x10ad+-0xdce,np=-0x2*-0x85f+-0x39*-0x5f+-0x25bd,op=-0x125b+-0xa57+-0x1cdb*-0x1,ux=0x1*0x202a+-0x1*-0x26e1+-0x46e1,px=0x24bd+0x70*0x15+-0x16e1*0x2,mx=-0x196a+-0x3*-0x531+0x1*0xa03,_x=-0x1b93+-0x1f7e+0x3b3e,gx=-0x25be+-0x7*0x10d+0x43*0xad,Sx=0x2e*0x98+-0x1629+-0x4f8,yx=0x1*0x1069+-0x3*0x5fd+0x1be,vx=-0x10*-0x1af+-0xec2+-0xbfd,GS=['bool','int','float','vec2','vec3','vec4','ivec2','ivec3','ivec4','bvec2','bvec3','bvec4','mat2','mat3','mat4','sampler2D','samplerCub'+'e','','sampler2DS'+'hadow','samplerCub'+'eShadow','sampler3D','','','','','sampler2DA'+'rray','uint','uvec2','uvec3','uvec4','','','','','','','','','','','','','isampler2D','usampler2D','isamplerCu'+'be','usamplerCu'+'be','isampler3D','usampler3D','isampler2D'+'Array','usampler2D'+'Array'],xx=[['bool'],['i32'],['f32'],['vec2f','vec2<f32>'],['vec3f','vec3<f32>'],['vec4f','vec4<f32>'],['vec2i','vec2<i32>'],['vec3i','vec3<i32>'],['vec4i','vec4<i32>'],['vec2<bool>'],['vec3<bool>'],['vec4<bool>'],['mat2x2f','mat2x2<f32'+'>'],['mat3x3f','mat3x3<f32'+'>'],['mat4x4f','mat4x4<f32'+'>'],['texture_2d'+'<f32>'],['texture_cu'+'be<f32>'],['array<f32>'],['texture_de'+'pth_2d'],['texture_de'+'pth_cube'],['texture_3d'+'<f32>'],['array<vec2'+'<f32>>'],['array<vec3'+'<f32>>'],['array<vec4'+'<f32>>'],['array<mat4'+'x4<f32>>'],['texture_2d'+'_array<f32'+'>'],['u32'],['vec2u','vec2<u32>'],['vec3u','vec3<u32>'],['vec4u','vec4<u32>'],['array<i32>'],['array<u32>'],['array<bool'+'>'],['array<vec2'+'i>','array<vec2'+'<i32>>'],['array<vec2'+'u>','array<vec2'+'<u32>>'],['array<vec2'+'b>','array<vec2'+'<bool>>'],['array<vec3'+'i>','array<vec3'+'<i32>>'],['array<vec3'+'u>','array<vec3'+'<u32>>'],['array<vec3'+'b>','array<vec3'+'<bool>>'],['array<vec4'+'i>','array<vec4'+'<i32>>'],['array<vec4'+'u>','array<vec4'+'<u32>>'],['array<vec4'+'b>','array<vec4'+'<bool>>'],['texture_2d'+'<i32>'],['texture_2d'+'<u32>'],['texture_cu'+'be<i32>'],['texture_cu'+'be<u32>'],['texture_3d'+'<i32>'],['texture_3d'+'<u32>'],['texture_2d'+'_array<i32'+'>'],['texture_2d'+'_array<u32'+'>']],Tx=new Map();xx['forEach']((_0x3cdfcf,_0x21a4c5)=>{_0x3cdfcf['forEach'](_0x5957ce=>Tx['set'](_0x5957ce,_0x21a4c5));});const wx='webgl2',lp=-0xebd+0x35*-0xa+0x10*0x10d,HS=-0x173c+-0x2146+0xe21*0x4,Ex=-0x3*0xb47+0x55*-0x19+0xd*0x33e,bx='ldr',WS=-0x237b*0x1+-0x1*0x36d+0x1*0x26e9,$S=0x1*-0x51a+-0x11ca+0x16e6,XS=-0x2078+0x2009+-0x17*-0x5,qS=0x1*-0x35+-0x1b61+-0x1f9*-0xe,jS=-0x167d+0x1*-0x38a+-0x1a17*-0x1,YS=-0x657+0x16c3+-0x4*0x413,KS=-0x23a6+-0x2349+-0x472f*-0x1,ZS=-0x19c5+0x23d1+0x5e*-0x1a,Ax=-0xf*0x2f+-0x736+0xaf6,$o=-0x36e+-0x5ba*-0x1+-0xc4*0x3,QS=-0x1983+-0x14*0x1c+-0x3*-0x93c,Df=-0x2e7*0xb+0xd5*0x27+-0x42*0x2,cp='default',_n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Uint16Array],Eo=[0x17*0xb7+0x17c4+0x14c*-0x1f,-0x4*-0x6b3+0x1b1f+-0x35ea,0x2*0xe06+-0x2178+0x2b7*0x2,-0x3*0xe5+-0x1038+0x12e9,-0x1598+-0x9ec+0x1f88,0x194f+-0x13ad+0x2cf*-0x2,0x1b35+-0x3d*0x17+0xe*-0x18d,-0x36e*0x9+0x2622+-0x742],Cx=['INT8','UINT8','INT16','UINT16','INT32','UINT32','FLOAT32','FLOAT16'],Kc=[Uint8Array,Uint16Array,Uint32Array],Px=[0xb00+-0x1367*-0x1+0x1*-0x1e66,0x2398+0x1be8+0x489*-0xe,0x2*-0xc2b+-0xb95+-0x23ef*-0x1],JS=new Map([['float','f32'],['vec2','vec2f'],['vec3','vec3f'],['vec4','vec4f'],['int','i32'],['ivec2','vec2i'],['ivec3','vec3i'],['ivec4','vec4i'],['uint','u32'],['uvec2','vec2u'],['uvec3','vec3u'],['uvec4','vec4u']]),Le={};Le[Pe]=-0x405+0x2196+-0x349*0x9,Le[gs]=-0x227e+0x21bf*0x1+0xc0,Le[gi]=-0x1cf8+0xb5b+0x119f,Le[us]=-0x71*0x3+0x26*-0xbd+-0x344*-0x9,Le[Wt]=0x1*-0xdab+0x1327+0x1*-0x578,Le[is]=-0x1cb1+-0x8f2+-0xf1*-0x28,Le[va]=-0x13*-0x119+0x6c5+0x1b9a*-0x1,Le[hl]=0x129b+0x126e+0x2502*-0x1,Le[dl]=0x6da*0x2+0x1f91+-0x2d3d,Le[fl]=0x2*0x85c+0x1906*0x1+-0x29b5,Le[ul]=0xb1*-0x26+0x1e6b+-0x41b*0x1,Le[pl]=-0x1*-0x1640+-0x3*-0x6+-0x3*0x76d,Le[ml]=-0x18f7+0x1*-0x93b+0x223e,Le[yi]=-0x93d+-0x1b*0x42+0x1040,Le[Cf]=-0x13d2+-0x1a5b*-0x1+-0x689,Le[$c]=-0x22e5+0x20b0+0x11b*0x2,Le[Ju]=-0x466+0x1*0x623+-0x1bb,Le[ep]=-0x1*-0x21a6+-0x3*-0x44a+-0x2e81,Le[tp]=-0x28*-0x7e+0x3*0x8f+-0x1559,Le[Z0]=0x1b5b+0x1eeb+0x9*-0x679,Le[Q0]=0x195e+-0x161*0x1+-0x17f7,Le[J0]=-0xf38*0x2+0x2*0x530+0x1*0x1417,Le[ko]=-0x347*-0x7+0x1e02+-0x34eb,Le[Uo]=-0x17ef*-0x1+-0x2592+-0x7d*-0x1c,Le[ex]=0x12fc+-0x225*-0xb+0x1*-0x2a89,Le[sp]=0x1055+0x5c3+-0x160d,Le[ip]=0x25c8+0x259*0x10+-0x4b4c,Le[Xc]=-0x4*-0x339+-0x8cf+0x3*-0x158,Le[rp]=-0x17f0+-0x395*0x1+-0x21f*-0xd,Le[bn]=-0xd8d*-0x1+-0x9*-0x3af+0x2ea5*-0x1;const dr=class dr{static['clearGpuMa'+'rkers'](){dr['markers']['length']=0x26*-0x43+-0x1*0x19bc+-0x11d7*-0x2;}static['pushGpuMar'+'ker'](_0x5dd2c9,_0x30126c){dr['markers']['push'](_0x30126c),_0x5dd2c9['pushMarker'](_0x30126c);}static['popGpuMark'+'er'](_0x4099df){dr['markers']['length']&&dr['markers']['pop'](),_0x4099df['popMarker']();}static['toString'](){return dr['markers']['join']('\x20|\x20');}};h(dr,'markers',[]);let Q=dr,Mx=-0x1*0x95+0xd3b+-0xca6;class ed{constructor(_0x277e54,_0x152f9a){h(this,'slot',-(-0x18ca+0xe27+0x552*0x2)),h(this,'scopeId',null),(this['name']=_0x277e54,this['visibility']=_0x152f9a);}}class hp extends ed{}class Dx extends ed{constructor(_0x19dba6,_0x40f337,_0x246633=!(0x1*-0x700+-0x42d+0xb2e)){super(_0x19dba6,_0x40f337),h(this,'format',''),(this['readOnly']=_0x246633,w['assert'](_0x246633||!(_0x40f337&lp),'Storage\x20bu'+'ffer\x20can\x20o'+'nly\x20be\x20use'+'d\x20in\x20read-'+'only\x20mode\x20'+'in\x20SHADERS'+'TAGE_VERTE'+'X.'));}}class pm extends ed{constructor(_0xbfdf9a,_0x556eed,_0x35e2cc=BS,_0x583a58=rx,_0x56025f=!(0xc8c+0xbe1+-0x186d),_0xf3f79e=null){super(_0xbfdf9a,_0x556eed),this['textureDim'+'ension']=_0x35e2cc,this['sampleType']=_0x583a58,this['hasSampler']=_0x56025f,this['samplerNam'+'e']=_0xf3f79e??_0xbfdf9a+'_sampler';}}class Ix extends ed{constructor(_0x454e78,_0x2ed39b=Ne,_0x205fed=BS,_0x4c3480=!(0x429*0x3+-0x2a7+-0x9d4),_0xe2dddc=!(-0x13a7+-0x259+0x1601)){super(_0x454e78,Ex),this['format']=_0x2ed39b,this['textureDim'+'ension']=_0x205fed,this['write']=_0x4c3480,this['read']=_0xe2dddc;}}class ey{constructor(_0x37ffd5,_0x5cf48f){h(this,'uniformBuf'+'ferFormats',[]),h(this,'textureFor'+'mats',[]),h(this,'storageTex'+'tureFormat'+'s',[]),h(this,'storageBuf'+'ferFormats',[]),(this['id']=Mx++,ya['setName'](this,'BindGroupF'+'ormat_'+this['id']),w['assert'](_0x5cf48f));let _0x85eb7b=-0x35*0x34+0x259d*0x1+-0x1ad9;_0x5cf48f['forEach'](_0x17d2ed=>{_0x17d2ed['slot']=_0x85eb7b++,_0x17d2ed instanceof pm&&_0x17d2ed['hasSampler']&&_0x85eb7b++,_0x17d2ed instanceof hp?this['uniformBuf'+'ferFormats']['push'](_0x17d2ed):_0x17d2ed instanceof pm?this['textureFor'+'mats']['push'](_0x17d2ed):_0x17d2ed instanceof Ix?this['storageTex'+'tureFormat'+'s']['push'](_0x17d2ed):_0x17d2ed instanceof Dx?this['storageBuf'+'ferFormats']['push'](_0x17d2ed):w['assert']('Invalid\x20bi'+'nd\x20format',_0x17d2ed);}),this['device']=_0x37ffd5;const _0x139177=_0x37ffd5['scope'];this['bufferForm'+'atsMap']=new Map(),this['uniformBuf'+'ferFormats']['forEach']((_0x42ffc6,_0x321201)=>this['bufferForm'+'atsMap']['set'](_0x42ffc6['name'],_0x321201)),this['textureFor'+'matsMap']=new Map(),this['textureFor'+'mats']['forEach']((_0x347ea5,_0x2b1249)=>{this['textureFor'+'matsMap']['set'](_0x347ea5['name'],_0x2b1249),_0x347ea5['scopeId']=_0x139177['resolve'](_0x347ea5['name']);}),this['storageTex'+'tureFormat'+'sMap']=new Map(),this['storageTex'+'tureFormat'+'s']['forEach']((_0x4b27b7,_0x3c905b)=>{this['storageTex'+'tureFormat'+'sMap']['set'](_0x4b27b7['name'],_0x3c905b),_0x4b27b7['scopeId']=_0x139177['resolve'](_0x4b27b7['name']);}),this['storageBuf'+'ferFormats'+'Map']=new Map(),this['storageBuf'+'ferFormats']['forEach']((_0x6d4e3a,_0x105f32)=>{this['storageBuf'+'ferFormats'+'Map']['set'](_0x6d4e3a['name'],_0x105f32),_0x6d4e3a['scopeId']=_0x139177['resolve'](_0x6d4e3a['name']);}),this['impl']=_0x37ffd5['createBind'+'GroupForma'+'tImpl'](this),w['trace'](p0,'Alloc:\x20Id\x20'+this['id']+(',\x20while\x20re'+'ndering\x20[')+Q['toString']()+']',this);}['destroy'](){this['impl']['destroy']();}['getTexture'](_0x7889d4){const _0x3e9b86=this['textureFor'+'matsMap']['get'](_0x7889d4);return _0x3e9b86!==void(0x20e2+-0x17*0x7f+0x17*-0xef)?this['textureFor'+'mats'][_0x3e9b86]:null;}['getStorage'+'Texture'](_0x9d4f29){const _0x4034c6=this['storageTex'+'tureFormat'+'sMap']['get'](_0x9d4f29);return _0x4034c6!==void(-0x9c+0x16d5*-0x1+0x1771)?this['storageTex'+'tureFormat'+'s'][_0x4034c6]:null;}['loseContex'+'t'](){}}class Kt{constructor(){h(this,'_cache',new Map());}['get'](_0x24ad87,_0x532adc){return this['_cache']['has'](_0x24ad87)||(this['_cache']['set'](_0x24ad87,_0x532adc()),_0x24ad87['on']('destroy',()=>{this['remove'](_0x24ad87);}),_0x24ad87['on']('devicelost',()=>{var _0x149dc0,_0xce2287;(_0xce2287=(_0x149dc0=this['_cache']['get'](_0x24ad87))==null?void(-0x1b03*0x1+-0x49*0x13+0x1037*0x2):_0x149dc0['loseContex'+'t'])==null||_0xce2287['call'](_0x149dc0,_0x24ad87);})),this['_cache']['get'](_0x24ad87);}['remove'](_0x1a071b){var _0x3fcf51,_0x278030;(_0x278030=(_0x3fcf51=this['_cache']['get'](_0x1a071b))==null?void(0x904+0x2273*-0x1+0x1*0x196f):_0x3fcf51['destroy'])==null||_0x278030['call'](_0x3fcf51,_0x1a071b),this['_cache']['delete'](_0x1a071b);}}class $i{static['calcLevelD'+'imension'](_0x24e6c8,_0x3ba0bf){return Math['max'](_0x24e6c8>>_0x3ba0bf,0x745+0x1*0x1345+-0x1a89);}static['calcMipLev'+'elsCount'](_0x353a81,_0x312bb7,_0x199c58=-0x10f*-0x1f+-0x23c4+-0x6*-0x7e){return 0x2250+-0x586+-0x1cc9+Math['floor'](Math['log2'](Math['max'](_0x353a81,_0x312bb7,_0x199c58)));}static['calcLevelG'+'puSize'](_0x416541,_0x3f8590,_0xafb555,_0x482103){var _0x1ec9e8;const _0x3f9756=Nt['get'](_0x482103);w['assert'](_0x3f9756!==void(-0xd85+-0x2331+0x30b6),'Invalid\x20pi'+'xel\x20format'+'\x20'+_0x482103);const _0x57cde4=((_0x1ec9e8=Nt['get'](_0x482103))==null?void(0x1272+0x17b*-0x2+-0xf7c):_0x1ec9e8['size'])??-0x7*0x3e5+0x1815+0x2*0x197;if(_0x57cde4>-0x1d*-0x137+0xe14+-0xd*0x3cb)return _0x416541*_0x3f8590*_0xafb555*_0x57cde4;const _0x4a3181=_0x3f9756['blockSize']??-0x246f*0x1+-0x866*0x2+0x353b;let _0x4ed5cb=Math['floor']((_0x416541+(0x1*-0x180f+0x2528+0x2*-0x68b))/(0x1bf2+-0x12c4+-0x2*0x495));const _0x570d21=Math['floor']((_0x3f8590+(-0xd53+0x1d*-0x10a+0x2b78))/(-0x15*-0x46+-0x8a9+0x2ef)),_0x1292b4=Math['floor']((_0xafb555+(-0x236c+-0xf13+0x3282))/(0x1047+0xbb5+-0x1bf8));return(_0x482103===ll||_0x482103===cl)&&(_0x4ed5cb=Math['max'](Math['floor'](_0x4ed5cb/(0x816+-0x1085+0x871)),0x4fa+-0x2*-0x83f+0x44b*-0x5)),_0x4ed5cb*_0x570d21*_0x1292b4*_0x4a3181;}static['calcGpuSiz'+'e'](_0x18b79f,_0x5698f7,_0x441a45,_0xd74e3,_0x5ce904,_0x4d4ac7){let _0x3185d6=0x1*0xe21+0x1a0b+-0x282c;for(;_0x3185d6+=$i['calcLevelG'+'puSize'](_0x18b79f,_0x5698f7,_0x441a45,_0xd74e3),!(!_0x5ce904||_0x18b79f===-0x20cb+-0x5d*-0x3f+0x9e9&&_0x5698f7===0x161c+0x18e6+-0x2f01&&_0x441a45===0x26c0+-0x1*-0x1f2d+0x6fe*-0xa);)_0x18b79f=Math['max'](_0x18b79f>>0x2*0xb9d+0xbe4*-0x1+-0xb55,-0x1460+0x3*-0x99d+-0x189c*-0x2),_0x5698f7=Math['max'](_0x5698f7>>-0x493*-0x7+0x1973+0x3977*-0x1,0x459*-0x2+0x254d+-0x1c9a*0x1),_0x441a45=Math['max'](_0x441a45>>0x77c*0x1+0x1c4b+0x11e3*-0x2,-0x170f+0x706*-0x5+0x3a2e);return _0x3185d6*(_0x4d4ac7?0x1*-0x1777+0x2460+0x1*-0xce3:-0x2*-0x1b3+-0x183b+0x6f2*0x3);}}let Lx=0xb1e+0x1cc3+-0xf9*0x29;class _e{constructor(_0x2a935c,_0x434372={}){h(this,'name'),h(this,'_gpuSize',0x80*0xd+-0xf36+0x8b6),h(this,'id',Lx++),h(this,'_invalid',!(0x1714+-0x10e*-0x13+-0x2b1d)),h(this,'_lockedLev'+'el',-(-0x4d6+-0x234*0x4+-0x5*-0x2bb)),h(this,'_lockedMod'+'e',Ll),h(this,'renderVers'+'ionDirty',0x13f5+-0x4*0x748+0x92b),h(this,'_storage',!(-0x2*-0xbf6+-0x82e+-0xed*0x11)),h(this,'_numLevels',0x9a*0x28+0xd*-0x7e+0x10a*-0x11),h(this,'_numLevels'+'Requested');var _0x4962a5;this['device']=_0x2a935c,w['assert'](this['device'],'Texture\x20co'+'nstructor\x20'+'requires\x20a'+'\x20graphicsD'+'evice\x20to\x20b'+'e\x20valid'),w['assert'](!_0x434372['width']||Number['isInteger'](_0x434372['width']),'Texture\x20wi'+'dth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0x434372),w['assert'](!_0x434372['height']||Number['isInteger'](_0x434372['height']),'Texture\x20he'+'ight\x20must\x20'+'be\x20an\x20inte'+'ger\x20number'+',\x20got',_0x434372),w['assert'](!_0x434372['depth']||Number['isInteger'](_0x434372['depth']),'Texture\x20de'+'pth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0x434372),this['name']=_0x434372['name']??'',this['_width']=Math['floor'](_0x434372['width']??-0x2da*-0x1+-0x1168+0x2*0x749),this['_height']=Math['floor'](_0x434372['height']??-0x1284+0x1013+0x275),this['_format']=_0x434372['format']??Ne,this['_compresse'+'d']=Y0(this['_format']),this['_integerFo'+'rmat']=rn(this['_format']),this['_integerFo'+'rmat']&&(_0x434372['minFilter']=Te,_0x434372['magFilter']=Te),this['_volume']=_0x434372['volume']??!(-0x1d8c+0x2420*-0x1+-0x3dd*-0x11),this['_depth']=Math['floor'](_0x434372['depth']??-0x6*0x5d1+-0x29*-0x9+0x2176),this['_arrayLeng'+'th']=Math['floor'](_0x434372['arrayLengt'+'h']??-0x2*0xa+0x1f6f+0x15d*-0x17),this['_storage']=_0x434372['storage']??!(-0x12b5+-0xb7+0x136d*0x1),this['_cubemap']=_0x434372['cubemap']??!(-0x2*-0x111d+0x1a4*0x9+-0x30fd),this['_flipY']=_0x434372['flipY']??!(0x7ef+0x17*-0x15a+0x1728),this['_premultip'+'lyAlpha']=_0x434372['premultipl'+'yAlpha']??!(0x1231*-0x1+-0x10c5+0x22f7*0x1),this['_mipmaps']=_0x434372['mipmaps']??!(-0x2505+0x17ce+-0xd37*-0x1),this['_numLevels'+'Requested']=_0x434372['numLevels'],_0x434372['numLevels']!==void(0x2598+0x12cd+-0x3865)&&(this['_numLevels']=_0x434372['numLevels']),this['_updateNum'+'Level'](),this['_minFilter']=_0x434372['minFilter']??ha,this['_magFilter']=_0x434372['magFilter']??vt,this['_anisotrop'+'y']=_0x434372['anisotropy']??-0x18d*0x4+-0xe*0x1bb+0x1e6f,this['_addressU']=_0x434372['addressU']??yt,this['_addressV']=_0x434372['addressV']??yt,this['_addressW']=_0x434372['addressW']??yt,this['_compareOn'+'Read']=_0x434372['compareOnR'+'ead']??!(0x1bde+0x486+-0x2063),this['_compareFu'+'nc']=_0x434372['compareFun'+'c']??Gc,this['_type']=_0x434372['type']??Ms,w['assert'](!_0x434372['hasOwnProp'+'erty']('rgbm'),'Use\x20option'+'s.type.'),w['assert'](!_0x434372['hasOwnProp'+'erty']('swizzleGGG'+'R'),'Use\x20option'+'s.type.'),this['projection']=ax,this['_cubemap']?this['projection']=Mf:_0x434372['projection']&&_0x434372['projection']!==Mf&&(this['projection']=_0x434372['projection']),this['profilerHi'+'nt']=_0x434372['profilerHi'+'nt']??0x23*0x2+-0x277*0xb+0x1*0x1ad7,this['_levels']=_0x434372['levels'];const _0x13dd33=!!_0x434372['levels'];this['_levels']||this['_clearLeve'+'ls'](),this['recreateIm'+'pl'](_0x13dd33),_0x2a935c['textures']['push'](this),w['trace'](sm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+'\x20['+((_0x4962a5=Nt['get'](this['format']))==null?void(-0x223*-0x6+0x6*-0x50d+0x117c):_0x4962a5['name'])+']'+(this['cubemap']?'[Cubemap]':'')+(this['volume']?'[Volume]':'')+(this['array']?'[Array]':'')+('[MipLevels'+':')+this['numLevels']+']',this);}['destroy'](){w['trace'](sm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x2de87f=this['device'];if(_0x2de87f){const _0x110f33=_0x2de87f['textures']['indexOf'](this);_0x110f33!==-(0xb7*0xf+-0x1e80+0x4f2*0x4)&&_0x2de87f['textures']['splice'](_0x110f33,-0x1701+0x2022+-0x490*0x2),_0x2de87f['scope']['removeValu'+'e'](this),this['impl']['destroy'](_0x2de87f),this['adjustVram'+'SizeTracki'+'ng'](_0x2de87f['_vram'],-this['_gpuSize']),this['_levels']=null,this['device']=null;}}['recreateIm'+'pl'](_0x42e1ac=!(0x14b1*0x1+0x1*-0x1773+0x2c2)){var _0x408f5a;const {device:_0x596080}=this;(_0x408f5a=this['impl'])==null||_0x408f5a['destroy'](_0x596080),this['impl']=null,this['impl']=_0x596080['createText'+'ureImpl'](this),this['dirtyAll'](),_0x42e1ac&&this['upload']();}['_clearLeve'+'ls'](){this['_levels']=this['_cubemap']?[[null,null,null,null,null,null]]:[null];}['resize'](_0x3f92e1,_0x1318b6,_0x13b8c5=0x222a+0x227d+0x3*-0x16e2){const _0xee4447=this['device'];this['adjustVram'+'SizeTracki'+'ng'](_0xee4447['_vram'],-this['_gpuSize']),this['impl']['destroy'](_0xee4447),this['_clearLeve'+'ls'](),this['_width']=Math['floor'](_0x3f92e1),this['_height']=Math['floor'](_0x1318b6),this['_depth']=Math['floor'](_0x13b8c5),this['_updateNum'+'Level'](),this['impl']=_0xee4447['createText'+'ureImpl'](this),this['dirtyAll']();}['loseContex'+'t'](){this['impl']['loseContex'+'t'](),this['dirtyAll']();}['adjustVram'+'SizeTracki'+'ng'](_0x1bb122,_0x3e2d6c){w['trace'](h0,this['id']+'\x20'+this['name']+'\x20size:\x20'+_0x3e2d6c+('\x20vram.text'+'ure:\x20')+_0x1bb122['tex']+'\x20=>\x20'+(_0x1bb122['tex']+_0x3e2d6c)),_0x1bb122['tex']+=_0x3e2d6c,this['profilerHi'+'nt']===Pf?_0x1bb122['texShadow']+=_0x3e2d6c:this['profilerHi'+'nt']===Er?_0x1bb122['texAsset']+=_0x3e2d6c:this['profilerHi'+'nt']===US&&(_0x1bb122['texLightma'+'p']+=_0x3e2d6c);}['propertyCh'+'anged'](_0x4a1b4f){this['impl']['propertyCh'+'anged'](_0x4a1b4f),this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion'];}['_updateNum'+'Level'](){const _0x4a86a2=this['mipmaps']?$i['calcMipLev'+'elsCount'](this['width'],this['height']):-0x1291*0x2+0x25d1+0x2*-0x57,_0x5407fe=this['_numLevels'+'Requested'];_0x5407fe!==void(0x1d24+0x1b3f+-0x3863)&&_0x5407fe>_0x4a86a2&&w['warn']('Texture#nu'+'mLevels:\x20r'+'equested\x20m'+'ip\x20level\x20c'+'ount\x20is\x20gr'+'eater\x20than'+'\x20the\x20maxim'+'um\x20possibl'+'e,\x20will\x20be'+'\x20clamped\x20t'+'o',_0x4a86a2,this),this['_numLevels']=Math['min'](_0x5407fe??_0x4a86a2,_0x4a86a2),this['_mipmaps']=this['_numLevels']>-0x18c2+-0x16b+0x1a2e;}get['lockedMode'](){return this['_lockedMod'+'e'];}set['minFilter'](_0x406663){this['_minFilter']!==_0x406663&&(rn(this['_format'])?w['warn']('Texture#mi'+'nFilter:\x20m'+'inFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_minFilter']=_0x406663,this['propertyCh'+'anged'](WS)));}get['minFilter'](){return this['_minFilter'];}set['magFilter'](_0x2b1ac1){this['_magFilter']!==_0x2b1ac1&&(rn(this['_format'])?w['warn']('Texture#ma'+'gFilter:\x20m'+'agFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_magFilter']=_0x2b1ac1,this['propertyCh'+'anged']($S)));}get['magFilter'](){return this['_magFilter'];}set['addressU'](_0x23cebb){this['_addressU']!==_0x23cebb&&(this['_addressU']=_0x23cebb,this['propertyCh'+'anged'](XS));}get['addressU'](){return this['_addressU'];}set['addressV'](_0x34f886){this['_addressV']!==_0x34f886&&(this['_addressV']=_0x34f886,this['propertyCh'+'anged'](qS));}get['addressV'](){return this['_addressV'];}set['addressW'](_0x4d01e0){if(!this['_volume']){w['warn']('pc.Texture'+'#addressW:'+'\x20Can\x27t\x20set'+'\x20W\x20address'+'ing\x20mode\x20f'+'or\x20a\x20non-3'+'D\x20texture.');return;}_0x4d01e0!==this['_addressW']&&(this['_addressW']=_0x4d01e0,this['propertyCh'+'anged'](jS));}get['addressW'](){return this['_addressW'];}set['compareOnR'+'ead'](_0x135e84){this['_compareOn'+'Read']!==_0x135e84&&(this['_compareOn'+'Read']=_0x135e84,this['propertyCh'+'anged'](YS));}get['compareOnR'+'ead'](){return this['_compareOn'+'Read'];}set['compareFun'+'c'](_0x6243f5){this['_compareFu'+'nc']!==_0x6243f5&&(this['_compareFu'+'nc']=_0x6243f5,this['propertyCh'+'anged'](KS));}get['compareFun'+'c'](){return this['_compareFu'+'nc'];}set['anisotropy'](_0x19f520){this['_anisotrop'+'y']!==_0x19f520&&(this['_anisotrop'+'y']=_0x19f520,this['propertyCh'+'anged'](ZS));}get['anisotropy'](){return this['_anisotrop'+'y'];}set['mipmaps'](_0x86d1e3){this['_mipmaps']!==_0x86d1e3&&(this['device']['isWebGPU']?w['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20is\x20curr'+'ently\x20not\x20'+'allowed\x20to'+'\x20be\x20change'+'d\x20on\x20WebGP'+'U,\x20create\x20'+'the\x20textur'+'e\x20appropri'+'ately.',this):rn(this['_format'])?w['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20cannot\x20'+'be\x20changed'+'\x20on\x20an\x20int'+'eger\x20textu'+'re,\x20will\x20r'+'emain\x20fals'+'e',this):this['_mipmaps']=_0x86d1e3,_0x86d1e3&&(this['_needsMipm'+'apsUpload']=!(-0x1a5b*0x1+0x10b8+0x9a3)));}get['mipmaps'](){return this['_mipmaps'];}get['numLevels'](){return this['_numLevels'];}get['storage'](){return this['_storage'];}get['width'](){return this['_width'];}get['height'](){return this['_height'];}get['depth'](){return this['_depth'];}get['format'](){return this['_format'];}get['cubemap'](){return this['_cubemap'];}get['gpuSize'](){const _0x5b0703=this['pot']&&this['_mipmaps']&&!(this['_compresse'+'d']&&this['_levels']['length']===-0x165b+-0x2312*-0x1+0xcb6*-0x1);return $i['calcGpuSiz'+'e'](this['_width'],this['_height'],this['_depth'],this['_format'],_0x5b0703,this['_cubemap']);}get['array'](){return this['_arrayLeng'+'th']>0xc09+-0xf4a*0x1+-0x7*-0x77;}get['arrayLengt'+'h'](){return this['_arrayLeng'+'th'];}get['volume'](){return this['_volume'];}set['type'](_0x4f1c28){this['_type']!==_0x4f1c28&&(this['_type']=_0x4f1c28,this['device']['_shadersDi'+'rty']=!(-0x2*0x32b+0x1c3f+-0x15e9));}get['type'](){return this['_type'];}set['srgb'](_0xd9f556){var _0x1ad42e,_0x3e2218,_0x27f23a,_0x2cb1be;const _0x52ec93=Wc(this['format']);if(_0xd9f556!==_0x52ec93){if(_0xd9f556){const _0x1eb197=zh(this['format']);this['_format']!==_0x1eb197&&(w['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20sRGB\x20'+'equivalent'+':\x20')+((_0x1ad42e=Nt['get'](this['format']))==null?void(0x1f02+0x789*0x5+-0x1*0x44af):_0x1ad42e['name'])+'\x20->\x20'+((_0x3e2218=Nt['get'](_0x1eb197))==null?void(-0x1*0x19bd+0x1*-0xaf7+0x15c*0x1b):_0x3e2218['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x1eb197,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(-0x2*0xee6+-0xa1*0x21+0x328d));}else{const _0x2f4e93=K0(this['format']);this['_format']!==_0x2f4e93&&(w['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20linea'+'r\x20equivale'+'nt:\x20')+((_0x27f23a=Nt['get'](this['format']))==null?void(0x239b+-0x88b*-0x3+-0x3d3c):_0x27f23a['name'])+'\x20->\x20'+((_0x2cb1be=Nt['get'](_0x2f4e93))==null?void(0xd59+0xf2b+-0x1c84):_0x2cb1be['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x2f4e93,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(-0x15*0x67+0x394*0xa+-0x1b55));}}}get['srgb'](){return Wc(this['format']);}set['flipY'](_0x18e6e1){this['_flipY']!==_0x18e6e1&&(this['_flipY']=_0x18e6e1,this['_needsUplo'+'ad']=!(-0x19bd+0xcf3+0x665*0x2));}get['flipY'](){return this['_flipY'];}set['premultipl'+'yAlpha'](_0x2afa00){this['_premultip'+'lyAlpha']!==_0x2afa00&&(this['_premultip'+'lyAlpha']=_0x2afa00,this['_needsUplo'+'ad']=!(-0x4*0x277+0x2*0xbe7+-0x23*0x66));}get['premultipl'+'yAlpha'](){return this['_premultip'+'lyAlpha'];}get['pot'](){return Y['powerOfTwo'](this['_width'])&&Y['powerOfTwo'](this['_height']);}get['encoding'](){switch(this['type']){case Ki:return'rgbm';case qc:return'rgbe';case Bo:return'rgbp';}return LS(this['format'])?'srgb':'linear';}['dirtyAll'](){this['_levelsUpd'+'ated']=this['_cubemap']?[[!(-0x129b+-0x5d2+0x186d),!(0x15ce+0x2*-0xb2d+0x7*0x14),!(-0x3a8+0x419*0x7+-0x1907*0x1),!(-0x11*-0x53+0x16ba+-0x1c3d),!(-0x18aa+-0x1e29+0x36d3),!(-0xa7e*0x1+-0x827+0x12a5)]]:[!(-0xe64+-0x4e1+-0x1*-0x1345)],this['_needsUplo'+'ad']=!(-0x15b*0x14+0x9*0x158+0xf04),this['_needsMipm'+'apsUpload']=this['_mipmaps'],this['_mipmapsUp'+'loaded']=!(-0x68e+0x23c8+0x1*-0x1d39),this['propertyCh'+'anged'](Ax);}['lock'](_0xd007a4={}){_0xd007a4['level']??(_0xd007a4['level']=0x38*0xc+0x147*0x11+-0x1f*0xc9),_0xd007a4['face']??(_0xd007a4['face']=-0x529+-0x1*-0x1615+-0x10ec),_0xd007a4['mode']??(_0xd007a4['mode']=fd),w['assert'](this['_lockedMod'+'e']===Ll,'The\x20textur'+'e\x20is\x20alrea'+'dy\x20locked.'+'\x20Call\x20`tex'+'ture.unloc'+'k()`\x20befor'+'e\x20attempti'+'ng\x20to\x20lock'+'\x20again.',this),w['assert'](_0xd007a4['mode']===kS||_0xd007a4['mode']===fd,'Cannot\x20loc'+'k\x20a\x20textur'+'e\x20with\x20TEX'+'TURELOCK_N'+'ONE.\x20To\x20un'+'lock\x20a\x20tex'+'ture,\x20call'+'\x20`texture.'+'unlock()`.',this),this['_lockedMod'+'e']=_0xd007a4['mode'],this['_lockedLev'+'el']=_0xd007a4['level'];const _0xf69392=this['cubemap']?this['_levels'][_0xd007a4['face']]:this['_levels'];if((_0xf69392==null?void(-0xa*0x359+-0x29*-0xdb+-0x199):_0xf69392[_0xd007a4['level']])===null){const _0x57209b=Math['max'](0x1*0x621+0x2*-0xdf6+0x4*0x573,this['_width']>>_0xd007a4['level']),_0x298f50=Math['max'](-0x14*-0x10f+-0x21*-0x71+-0x23bc,this['_height']>>_0xd007a4['level']),_0x53b91c=Math['max'](0x298+-0x83*0x1+-0x214,this['_depth']>>_0xd007a4['level']),_0x2978ea=new ArrayBuffer($i['calcLevelG'+'puSize'](_0x57209b,_0x298f50,_0x53b91c,this['_format']));_0xf69392[_0xd007a4['level']]=new(RS(this['_format']))(_0x2978ea);}return _0xf69392==null?void(0x2578*0x1+-0x19a5+-0x3f1*0x3):_0xf69392[_0xd007a4['level']];}['setSource'](_0x19df4b,_0x3a9e60=0xdf8+-0x3*-0x151+-0x11eb){let _0x156081=!(0x26ae+-0x136b+-0x1342),_0x1eab77,_0x1f63e7;if(this['_cubemap']){if(_0x19df4b[0x2587+0x1*-0x12bf+0x1*-0x12c8]){_0x1eab77=_0x19df4b[-0x69b+0x44d+0x24e]['width']||0x1296+0xd9d+-0x2033,_0x1f63e7=_0x19df4b[0x1*-0xbb1+-0x4e3+0x1094]['height']||-0x2024+-0x2180+0x4*0x1069;for(let _0x26b7af=0xd*0xcd+-0x14bf+0xa56;_0x26b7af<0xb0d+0x7*0x22b+-0x1a34;_0x26b7af++){const _0x2dcf1f=_0x19df4b[_0x26b7af];if(!_0x2dcf1f||_0x2dcf1f['width']!==_0x1eab77||_0x2dcf1f['height']!==_0x1f63e7||!this['device']['_isBrowser'+'Interface'](_0x2dcf1f)){_0x156081=!(-0xaf*0x1f+0x1*0xe95+0x234*0x3);break;}}}else _0x156081=!(0x1*0x1077+0x1e97+0x13*-0x27a);if(!_0x156081){for(let _0x5a2112=-0x332*-0x3+0x1fdf+-0x1*0x2975;_0x5a2112<-0x1b5d+-0xa*-0x5a+-0x7f5*-0x3;_0x5a2112++)this['_levels'][_0x3a9e60][_0x5a2112]!==_0x19df4b[_0x5a2112]&&(this['_levelsUpd'+'ated'][_0x3a9e60][_0x5a2112]=!(0x11*0xe9+-0x5b7+0x1*-0x9c2));}}else this['device']['_isBrowser'+'Interface'](_0x19df4b)||(_0x156081=!(0x19d7+0x13*-0xe9+-0x88c)),_0x156081||(_0x19df4b!==this['_levels'][_0x3a9e60]&&(this['_levelsUpd'+'ated'][_0x3a9e60]=!(0x147c+0x2*-0xbcb+0x1*0x31a)),_0x19df4b instanceof HTMLVideoElement?(_0x1eab77=_0x19df4b['videoWidth'],_0x1f63e7=_0x19df4b['videoHeigh'+'t']):(_0x1eab77=_0x19df4b['width'],_0x1f63e7=_0x19df4b['height']));if(_0x156081){if(this['_width']=-0x588+-0x4f*0x16+0x2*0x62b,this['_height']=-0x14c6*-0x1+0xa27*0x3+-0x7*0x751,this['_cubemap']){for(let _0x121fd0=-0x2*0x3d1+-0x23ec+0x2b8e;_0x121fd0<-0x1*0x102f+-0x77c+0x4bd*0x5;_0x121fd0++)this['_levels'][_0x3a9e60][_0x121fd0]=null,this['_levelsUpd'+'ated'][_0x3a9e60][_0x121fd0]=!(0x20e1+-0x3*0x6e6+-0xc2f*0x1);}else this['_levels'][_0x3a9e60]=null,this['_levelsUpd'+'ated'][_0x3a9e60]=!(-0x1c51+0x26b6*-0x1+0x4307);}else _0x3a9e60===-0x1270+0x1348+0x48*-0x3&&(this['_width']=_0x1eab77,this['_height']=_0x1f63e7),this['_levels'][_0x3a9e60]=_0x19df4b;(this['_invalid']!==_0x156081||!_0x156081)&&(this['_invalid']=_0x156081,this['upload']());}['getSource'](_0xa4b093=0x5*0x63d+-0x2d*0x1e+-0x19eb){return this['_levels'][_0xa4b093];}['unlock'](){this['_lockedMod'+'e']===Ll&&w['warn']('pc.Texture'+'#unlock:\x20A'+'ttempting\x20'+'to\x20unlock\x20'+'a\x20texture\x20'+'that\x20is\x20no'+'t\x20locked.',this),this['_lockedMod'+'e']===fd&&this['upload'](),this['_lockedLev'+'el']=-(0x1b76+-0x1727+-0x44e),this['_lockedMod'+'e']=Ll;}['upload'](){var _0x17fb97,_0x28cc7d;this['_needsUplo'+'ad']=!(0xc3f+0x5cb+0x120a*-0x1),this['_needsMipm'+'apsUpload']=this['_mipmaps'],(_0x28cc7d=(_0x17fb97=this['impl'])['uploadImme'+'diate'])==null||_0x28cc7d['call'](_0x17fb97,this['device'],this);}['read'](_0x2ecdae,_0x22b222,_0x50f02a,_0x5f27ea,_0x56da58={}){var _0xde5654,_0x52c31e;return(_0x52c31e=(_0xde5654=this['impl'])['read'])==null?void(0x1912+0x15*-0x1c+-0x16c6):_0x52c31e['call'](_0xde5654,_0x2ecdae,_0x22b222,_0x50f02a,_0x5f27ea,_0x56da58);}['write'](_0xe8da01,_0x336051,_0xab7622,_0x557828,_0x5171d0){var _0x2d984c,_0x577aa4;return(_0x577aa4=(_0x2d984c=this['impl'])['write'])==null?void(-0x11c0+0x23b8+-0x11f8):_0x577aa4['call'](_0x2d984c,_0xe8da01,_0x336051,_0xab7622,_0x557828,_0x5171d0);}}const Rx={'white':[0x914+0x1*-0x469+-0x2*0x1d6,-0x1032+-0x1*-0x1bcb+-0xa9a,0x2592+-0x76d*0x4+0x1*-0x6df,-0xa57+0x11*0x1ab+-0x1105*0x1],'gray':[-0xca3+0x11*0x7d+0x4d6,-0x2*-0x222+0x62*-0x21+0x8de,-0xc7*0x2c+-0x1322+0x35d6,-0x1fc3+-0x1eed+0x89*0x77],'black':[0x13*0x1fc+0x1*0x2361+-0x1*0x4915,-0x1dc9+-0x25b1*-0x1+-0x2*0x3f4,-0x118a+-0xe4e+0x4*0x7f6,-0x8*0x1+-0x1475+0x157c],'normal':[0x141e+0x24b*-0x5+-0x827,0x12d0+-0x255d*0x1+0x130d,-0x5*-0x2d+-0x30*-0xc4+0x412*-0x9,0x6d*-0x5+-0xc04+0xf24],'pink':[0x1653+0x12d2+-0x2826,0x1e2*-0x7+0x1*-0x1b92+0x2940,-0x1*0x607+-0x47*-0x66+-0x1544,-0x1*-0x1601+0x1d1f*-0x1+0x81d]};class Ox{constructor(){h(this,'map',new Map());}['destroy'](){this['map']['forEach'](_0x33b179=>{_0x33b179['destroy']();});}}const Fx=new Kt(),oa=(_0x1d924e,_0x35990d)=>{const _0xa02263=Fx['get'](_0x1d924e,()=>new Ox());if(!_0xa02263['map']['has'](_0x35990d)){const _0x1e8a0f=new _e(_0x1d924e,{'name':'built-in-t'+'exture-'+_0x35990d,'width':0x1,'height':0x1,'format':Ne}),_0x1a4e55=_0x1e8a0f['lock'](),_0x1bd221=Rx[_0x35990d];w['assert'](_0x1bd221,'Data\x20for\x20b'+'uilt-in\x20te'+'xture\x20\x27'+_0x35990d+('\x27\x20not\x20foun'+'d')),_0x1a4e55['set'](_0x1bd221),_0x1e8a0f['unlock'](),_0xa02263['map']['set'](_0x35990d,_0x1e8a0f);}return _0xa02263['map']['get'](_0x35990d);};let Nx=0xee4+0x4ce*-0x3+-0x7a;class ty{constructor(){h(this,'bindGroup'),h(this,'offsets',[]);}}class dp{constructor(_0x18c3c5,_0x542b1c,_0x51e9d9){h(this,'renderVers'+'ionUpdated',-(-0x12f8+0x14f3+-0x1fa)),h(this,'uniformBuf'+'fers'),h(this,'uniformBuf'+'ferOffsets',[]),(this['id']=Nx++,this['device']=_0x18c3c5,this['format']=_0x542b1c,this['dirty']=!(-0x1*-0x6b+0x116d*0x2+-0x2345*0x1),this['impl']=_0x18c3c5['createBind'+'GroupImpl'](this),this['textures']=[],this['storageTex'+'tures']=[],this['storageBuf'+'fers']=[],this['uniformBuf'+'fers']=[],this['defaultUni'+'formBuffer']=_0x51e9d9,_0x51e9d9&&this['setUniform'+'Buffer'](cp,_0x51e9d9),w['trace'](u0,'Alloc:\x20Id\x20'+this['id'],this,_0x542b1c));}['destroy'](){this['impl']['destroy'](),this['impl']=null,this['format']=null,this['defaultUni'+'formBuffer']=null;}['setUniform'+'Buffer'](_0x24c4de,_0x5642d9){const _0x1dee76=this['format']['bufferForm'+'atsMap']['get'](_0x24c4de);w['assert'](_0x1dee76!==void(0x9c1*0x4+-0xff9+-0x11*0x15b),'Setting\x20a\x20'+'uniform\x20['+_0x24c4de+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['uniformBuf'+'fers'][_0x1dee76]!==_0x5642d9&&(this['uniformBuf'+'fers'][_0x1dee76]=_0x5642d9,this['dirty']=!(0x99d+-0x1ff9+0x9*0x27c));}['setStorage'+'Buffer'](_0x548e21,_0x3874fc){const _0x1ce0f9=this['format']['storageBuf'+'ferFormats'+'Map']['get'](_0x548e21);w['assert'](_0x1ce0f9!==void(0x11*0x15+-0x130b+0x11a6),'Setting\x20a\x20'+'storage\x20bu'+'ffer\x20['+_0x548e21+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageBuf'+'fers'][_0x1ce0f9]!==_0x3874fc&&(this['storageBuf'+'fers'][_0x1ce0f9]=_0x3874fc,this['dirty']=!(0x1ed9*0x1+-0x1e1c*-0x1+-0x3cf5));}['setTexture'](_0x45a7be,_0x537c80){const _0x878996=this['format']['textureFor'+'matsMap']['get'](_0x45a7be);w['assert'](_0x878996!==void(0x1*-0x1a87+0x6*-0x578+-0x565*-0xb),'Setting\x20a\x20'+'texture\x20['+_0x45a7be+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['textures'][_0x878996]!==_0x537c80?(this['textures'][_0x878996]=_0x537c80,this['dirty']=!(-0x1a22+0x1487+0x5*0x11f)):this['renderVers'+'ionUpdated']<_0x537c80['renderVers'+'ionDirty']&&(this['dirty']=!(0x13*0x20e+0x1*0x257f+-0x3f*0x137));}['setStorage'+'Texture'](_0x1099b5,_0x358936){const _0x4597e5=this['format']['storageTex'+'tureFormat'+'sMap']['get'](_0x1099b5);w['assert'](_0x4597e5!==void(-0x3*-0xe3+-0x13d*0x1+-0x16c),'Setting\x20a\x20'+'storage\x20te'+'xture\x20['+_0x1099b5+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageTex'+'tures'][_0x4597e5]!==_0x358936?(this['storageTex'+'tures'][_0x4597e5]=_0x358936,this['dirty']=!(0xfd9+-0xad4+-0x101*0x5)):this['renderVers'+'ionUpdated']<_0x358936['renderVers'+'ionDirty']&&(this['dirty']=!(-0x18f8*0x1+0x388+0xc4*0x1c));}['updateUnif'+'ormBuffers'](){for(let _0x101782=0x17e+0x1f*-0x10d+0x1f15;_0x101782<this['uniformBuf'+'fers']['length'];_0x101782++)this['uniformBuf'+'fers'][_0x101782]['update']();}['update'](){const {textureFormats:_0x44c021,storageTextureFormats:_0x40a1c8,storageBufferFormats:_0x24c822}=this['format'];for(let _0x1f7755=0x75*0x45+-0x1277+0xd12*-0x1;_0x1f7755<_0x44c021['length'];_0x1f7755++){const _0x55d97e=_0x44c021[_0x1f7755];let _0xb508e5=_0x55d97e['scopeId']['value'];_0xb508e5||(_0x55d97e['name']==='uSceneDept'+'hMap'&&(w['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0xb508e5=oa(this['device'],'white')),_0x55d97e['name']==='uSceneColo'+'rMap'&&(w['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0xb508e5=oa(this['device'],'pink')),_0xb508e5||(w['errorOnce']('Texture\x20'+_0x55d97e['name']+('\x20is\x20requir'+'ed\x20for\x20ren'+'dering\x20but'+'\x20was\x20not\x20s'+'et.\x20Render'+'ing\x20[')+Q['toString']()+']'),_0xb508e5=oa(this['device'],'pink'))),this['setTexture'](_0x55d97e['name'],_0xb508e5);}for(let _0xbc1c24=-0x1f2*-0x2+0x1e52+-0x1d*0x12e;_0xbc1c24<_0x40a1c8['length'];_0xbc1c24++){const _0x350869=_0x40a1c8[_0xbc1c24],_0x6bfe20=_0x350869['scopeId']['value'];w['assert'](_0x6bfe20,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20texture\x20s'+'lot\x20['+_0x350869['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Texture'](_0x350869['name'],_0x6bfe20);}for(let _0x137644=0x1d9f+0x9b5+0xc*-0x347;_0x137644<_0x24c822['length'];_0x137644++){const _0x5611d3=_0x24c822[_0x137644],_0x155206=_0x5611d3['scopeId']['value'];w['assert'](_0x155206,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20buffer\x20sl'+'ot\x20['+_0x5611d3['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Buffer'](_0x5611d3['name'],_0x155206);}this['uniformBuf'+'ferOffsets']['length']=this['uniformBuf'+'fers']['length'];for(let _0x31af70=-0x15*0x14+-0x19f*-0xf+-0x16ad;_0x31af70<this['uniformBuf'+'fers']['length'];_0x31af70++){const _0x10f6b2=this['uniformBuf'+'fers'][_0x31af70];this['uniformBuf'+'ferOffsets'][_0x31af70]=_0x10f6b2['offset'],this['renderVers'+'ionUpdated']<_0x10f6b2['renderVers'+'ionDirty']&&(this['dirty']=!(-0xf83*-0x2+-0x5b*0xb+-0x1b1d));}this['dirty']&&(this['dirty']=!(-0xf64+0x5bf*0x6+-0x1315),this['renderVers'+'ionUpdated']=this['device']['renderVers'+'ion'],this['impl']['update'](this));}}const qe={'set'(_0x273398,_0x3b302f,_0x104dbf,_0x56a7ae=0x69*-0x15+-0x1de*-0x8+-0x652){return _0x273398&~(_0x56a7ae<<_0x104dbf)|_0x3b302f<<_0x104dbf;},'get'(_0x23021e,_0x26692b,_0x49d41a=0x145*-0x3+-0xf7+0x4c7){return _0x23021e>>_0x26692b&_0x49d41a;},'all'(_0x3ac809,_0x5218e3,_0xe23c7f=-0x19*0x12e+-0x28*0x23+0x1*0x22f7){const _0x1c0a1a=_0xe23c7f<<_0x5218e3;return(_0x3ac809&_0x1c0a1a)===_0x1c0a1a;},'any'(_0x16c6ab,_0x3b9415,_0x488062=0x1981+-0x150b*0x1+0x7*-0xa3){return(_0x16c6ab&_0x488062<<_0x3b9415)!==-0x94*-0x17+-0x4be*0x5+0xa6a;}},Rl=-0x7*0xd6+0x931+-0x1a8*0x2,sr=-0x227f*0x1+0x60f+0x1c7f,mm=-0x290*0x2+0x19*-0x16f+0x1*0x28f7,_m=0x5*0x17e+-0x1*0x25a5+0x1e32,gm=0x3e3+-0xd90+0x9b4,Sm=-0x35*0xb2+-0x209d+0x52*0xd9,ym=-0x1713*0x1+-0x19c0+0x30e1,vm=0x10*-0x1ed+-0xb53+0x2a35,If=0x1776+0xda0+-0x2500,xm=-0x4eb*-0x1+0x10*0x1c5+0xc*-0x2c3,Tm=-0x1998+0x852+0x6*0x2e5,wm=0x1d2b+0x2ba+-0x1fcc,Em=-0x3*-0x7e7+0xc45+0x23e*-0x10,kx=0xb*0xc7+-0xa17*-0x3+-0x26c3,Ux=If,ri=class ri{constructor(_0x402153=!(-0x1bb3+-0x25ed+-0x13d*-0x35),_0x4a016d=fs,_0x29fb02=Ft,_0x55a3bf=Iu,_0x2f973b,_0xc8ed40,_0x5b80f8,_0x565665=!(0x5d*-0x59+0x1bb5+-0x4*-0x128),_0x5c8374=!(-0x454+0xa86*0x3+-0xd9f*0x2),_0x3b4a15=!(0xfe*-0x26+-0x7e5*-0x4+-0x62*-0x10),_0x4437a7=!(-0x8*-0x1f1+-0x3f5*0x5+0x9*0x79)){h(this,'target0',-0xc*0x11b+0x5*-0x137+-0x1*-0x1357),(this['setColorBl'+'end'](_0x4a016d,_0x29fb02,_0x55a3bf),this['setAlphaBl'+'end'](_0x2f973b??_0x4a016d,_0xc8ed40??_0x29fb02,_0x5b80f8??_0x55a3bf),this['setColorWr'+'ite'](_0x565665,_0x5c8374,_0x3b4a15,_0x4437a7),this['blend']=_0x402153);}set['blend'](_0x5de288){this['target0']=qe['set'](this['target0'],_0x5de288?0x10f6*-0x1+-0x68*-0x6+0xe87:0x2658+0x1c94+-0x42ec,Em);}get['blend'](){return qe['all'](this['target0'],Em);}['setColorBl'+'end'](_0x2b7a6d,_0x252c1f,_0x4b00da){this['target0']=qe['set'](this['target0'],_0x2b7a6d,mm,Rl),this['target0']=qe['set'](this['target0'],_0x252c1f,_m,sr),this['target0']=qe['set'](this['target0'],_0x4b00da,gm,sr);}['setAlphaBl'+'end'](_0x2aa279,_0x5dfc3c,_0xbb7681){this['target0']=qe['set'](this['target0'],_0x2aa279,Sm,Rl),this['target0']=qe['set'](this['target0'],_0x5dfc3c,ym,sr),this['target0']=qe['set'](this['target0'],_0xbb7681,vm,sr);}['setColorWr'+'ite'](_0xc4d211,_0x39d96b,_0x267537,_0x17bcde){this['redWrite']=_0xc4d211,this['greenWrite']=_0x39d96b,this['blueWrite']=_0x267537,this['alphaWrite']=_0x17bcde;}get['colorOp'](){return qe['get'](this['target0'],mm,Rl);}get['colorSrcFa'+'ctor'](){return qe['get'](this['target0'],_m,sr);}get['colorDstFa'+'ctor'](){return qe['get'](this['target0'],gm,sr);}get['alphaOp'](){return qe['get'](this['target0'],Sm,Rl);}get['alphaSrcFa'+'ctor'](){return qe['get'](this['target0'],ym,sr);}get['alphaDstFa'+'ctor'](){return qe['get'](this['target0'],vm,sr);}set['redWrite'](_0x2fa674){this['target0']=qe['set'](this['target0'],_0x2fa674?-0x1*0x5b3+-0x67a*-0x4+0x4*-0x50d:-0x2*-0x3+0x20c7+-0x20cd,If);}get['redWrite'](){return qe['all'](this['target0'],If);}set['greenWrite'](_0x119297){this['target0']=qe['set'](this['target0'],_0x119297?-0x1b1f*-0x1+-0x2a2*0xe+0x9be:0x24d7*-0x1+0x2e*0x67+0x1255,xm);}get['greenWrite'](){return qe['all'](this['target0'],xm);}set['blueWrite'](_0x3a75a2){this['target0']=qe['set'](this['target0'],_0x3a75a2?0x162c+0x4f7+-0x1b22:0x2*-0xf91+0x2*-0x6ab+0x4*0xb1e,Tm);}get['blueWrite'](){return qe['all'](this['target0'],Tm);}set['alphaWrite'](_0x3cf944){this['target0']=qe['set'](this['target0'],_0x3cf944?-0x12d3+0x1a7d+-0x7a9:0x9*-0x198+-0x1*-0x21b5+-0x135d,wm);}get['alphaWrite'](){return qe['all'](this['target0'],wm);}get['allWrite'](){return qe['get'](this['target0'],Ux,kx);}['copy'](_0x3ef2cf){return this['target0']=_0x3ef2cf['target0'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}get['key'](){return this['target0'];}['equals'](_0x521d37){return this['target0']===_0x521d37['target0'];}};h(ri,'NOBLEND',Object['freeze'](new ri())),h(ri,'NOWRITE',Object['freeze'](new ri(void(0x1012+0x6*0x563+-0x3064),void(-0x2293+0x1eaf+-0x1f2*-0x2),void(0x32c+-0x1236+0xf0a),void(0x1a56+-0x45*0x17+-0x1423*0x1),void(-0x1*-0xc1b+-0x2664+0x8c3*0x3),void(0x20f7+0x1451*0x1+-0x3548),void(-0x916*0x1+-0x1f99+-0x5*-0x823),!(-0x1bd2+0x1d1*0x9+0xb7a),!(0x145b+-0x1*-0x1f21+-0x337b),!(0x9*-0x232+0x166d+-0x2aa),!(0x1370+-0x24e1+0x16*0xcb)))),h(ri,'ALPHABLEND',Object['freeze'](new ri(!(0x243c+-0x1*-0x686+-0x2ac2*0x1),fs,Ah,Ch))),h(ri,'ADDBLEND',Object['freeze'](new ri(!(-0x3d2+0xc1*-0x1d+0x5*0x523),fs,Ft,Ft)));let pt=ri;class fp{constructor(){h(this,'map',new Map()),h(this,'id',-0x1*0x231a+-0x1*0x1070+-0x19c5*-0x2);}['get'](_0x3442a2){let _0x45f9f3=this['map']['get'](_0x3442a2);return _0x45f9f3===void(0xa11*0x1+-0x1*0x1387+-0xad*-0xe)&&(_0x45f9f3=this['id']++,this['map']['set'](_0x3442a2,_0x45f9f3)),_0x45f9f3;}}const Bx=new fp(),bm=-0x1941*0x1+0x1d2d+-0x3e5,Am=-0x1bd5+0x233d+-0x768,Cm=-0x480+-0x1fac+0x242f*0x1,fr=class fr{constructor(_0x308cfc=Sf,_0x32df29=!(-0x186+0xd26+-0xba0)){h(this,'data',-0x1*0x1e04+0x60*-0x48+0x1*0x3904),h(this,'_depthBias',-0x11eb+0x153f+-0x354),h(this,'_depthBias'+'Slope',-0x1155+-0xc0+0x3*0x607),h(this,'key',-0xdd1+-0x1c33+0x1*0x2a04),(this['func']=_0x308cfc,this['write']=_0x32df29);}set['test'](_0xbe1d44){this['func']=_0xbe1d44?Sf:Hi,this['updateKey']();}get['test'](){return this['func']!==Hi;}set['write'](_0x9f61af){this['data']=qe['set'](this['data'],_0x9f61af?-0x122d+-0x9f2+-0xb4*-0x28:0x1280+-0x1878+0x5f8,Cm),this['updateKey']();}get['write'](){return qe['all'](this['data'],Cm);}set['func'](_0x4b6d70){this['data']=qe['set'](this['data'],_0x4b6d70,Am,bm),this['updateKey']();}get['func'](){return qe['get'](this['data'],Am,bm);}set['depthBias'](_0x483658){this['_depthBias']=_0x483658,this['updateKey']();}get['depthBias'](){return this['_depthBias'];}set['depthBiasS'+'lope'](_0x2b743b){this['_depthBias'+'Slope']=_0x2b743b,this['updateKey']();}get['depthBiasS'+'lope'](){return this['_depthBias'+'Slope'];}['copy'](_0x2a39eb){return this['data']=_0x2a39eb['data'],this['_depthBias']=_0x2a39eb['_depthBias'],this['_depthBias'+'Slope']=_0x2a39eb['_depthBias'+'Slope'],this['key']=_0x2a39eb['key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['updateKey'](){const {data:_0x4b4f47,_depthBias:_0x2a6f79,_depthBiasSlope:_0x1aa94a}=this,_0x2103f5=_0x4b4f47+'-'+_0x2a6f79+'-'+_0x1aa94a;this['key']=Bx['get'](_0x2103f5);}['equals'](_0x475a45){return this['key']===_0x475a45['key'];}};h(fr,'DEFAULT',Object['freeze'](new fr())),h(fr,'NODEPTH',Object['freeze'](new fr(Hi,!(-0x3*-0x586+0xf22+0xf*-0x21d)))),h(fr,'WRITEDEPTH',Object['freeze'](new fr(Hi,!(-0x159d+-0x522+0x1*0x1abf))));let Yt=fr;class sy{constructor(){h(this,'globalId',0x2*-0x112f+0x3ca*-0x5+0x1*0x3550),h(this,'revision',-0x13af+0x3cf+0xfe0);}['equals'](_0x2814af){return this['globalId']===_0x2814af['globalId']&&this['revision']===_0x2814af['revision'];}['copy'](_0x511488){this['globalId']=_0x511488['globalId'],this['revision']=_0x511488['revision'];}['reset'](){this['globalId']=0x2*0x7cd+0x534+-0x14ce*0x1,this['revision']=-0x187f+-0xc91+-0x4a2*-0x8;}}let Pm=0x14*0x170+-0x2e7*-0xb+-0x1*0x3cad;class zx{constructor(){Pm++,this['version']=new sy(),this['version']['globalId']=Pm;}['increment'](){this['version']['revision']++;}}class Vx{constructor(_0x509f29){this['name']=_0x509f29,this['value']=null,this['versionObj'+'ect']=new zx();}['toJSON'](_0x9504fa){}['setValue'](_0x87c15d){this['value']=_0x87c15d,this['versionObj'+'ect']['increment']();}['getValue'](){return this['value'];}}class Gx{constructor(_0x53167f){this['name']=_0x53167f,this['variables']=new Map();}['resolve'](_0x47c166){return this['variables']['has'](_0x47c166)||this['variables']['set'](_0x47c166,new Vx(_0x47c166)),this['variables']['get'](_0x47c166);}['removeValu'+'e'](_0x44bf2e){for(const _0x206bc3 in this['variables']){const _0x39436d=this['variables'][_0x206bc3];_0x39436d['value']===_0x44bf2e&&(_0x39436d['value']=null);}}}let Hx=-0x2*0xaff+0x10c1+0x1*0x53d;class Ds{constructor(_0x53ba4a,_0x771b63,_0x5a4a6e,_0x4a9279){h(this,'usage',ms),(w['assert'](arguments['length']<=-0xa*-0x144+0xdd3*-0x2+-0x2*-0x781&&(!_0x4a9279||typeof _0x4a9279=='object'),'incorrect\x20'+'arguments'),this['usage']=(_0x4a9279==null?void(0x3*0x81d+-0x312+0x63*-0x37):_0x4a9279['usage'])??ms,this['device']=_0x53ba4a,this['format']=_0x771b63,this['numVertice'+'s']=_0x5a4a6e,this['id']=Hx++,this['impl']=_0x53ba4a['createVert'+'exBufferIm'+'pl'](this,_0x771b63,_0x4a9279),this['numBytes']=_0x771b63['verticesBy'+'teSize']?_0x771b63['verticesBy'+'teSize']:_0x771b63['size']*_0x5a4a6e,this['adjustVram'+'SizeTracki'+'ng'](_0x53ba4a['_vram'],this['numBytes']));const _0x4b40f0=_0x4a9279==null?void(-0x1b17+-0xa*-0x36d+-0x72b):_0x4a9279['data'];_0x4b40f0?this['setData'](_0x4b40f0):this['storage']=new ArrayBuffer(this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x178917=this['device'],_0xe1de51=_0x178917['buffers']['indexOf'](this);_0xe1de51!==-(-0x1127+0x1216+0x11*-0xe)&&_0x178917['buffers']['splice'](_0xe1de51,0xb20*-0x2+0x284+0x13bd),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x178917),this['adjustVram'+'SizeTracki'+'ng'](_0x178917['_vram'],-this['storage']['byteLength'])),this['storage']=null;}['adjustVram'+'SizeTracki'+'ng'](_0x4450da,_0x2c7f3f){w['trace'](d0,this['id']+'\x20size:\x20'+_0x2c7f3f+'\x20vram.vb:\x20'+_0x4450da['vb']+'\x20=>\x20'+(_0x4450da['vb']+_0x2c7f3f)),_0x4450da['vb']+=_0x2c7f3f;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getUsage'](){return this['usage'];}['getNumVert'+'ices'](){return this['numVertice'+'s'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x4a3271){return _0x4a3271['byteLength']!==this['numBytes']?(w['error']('VertexBuff'+'er:\x20wrong\x20'+'initial\x20da'+'ta\x20size:\x20e'+'xpected\x20'+this['numBytes']+',\x20got\x20'+_0x4a3271['byteLength']),!(0x10e7+-0x1873+0x78d)):(this['storage']=_0x4a3271,this['unlock'](),!(-0x268f+-0x109a+0x3729));}}function hi(_0x416a14){if(_0x416a14==null)return 0x1a*-0x32+-0x58*-0x2c+-0xa0c;let _0x3f9ed9=0x1*-0x10c0+-0x1ade+-0x1*-0x2b9e;for(let _0x4b533b=-0x2*0x1029+0x1191*0x2+0x168*-0x2,_0x3623b4=_0x416a14['length'];_0x4b533b<_0x3623b4;_0x4b533b++)_0x3f9ed9=(_0x3f9ed9<<-0xba1*-0x3+-0x10c1+-0x121d*0x1)-_0x3f9ed9+_0x416a14['charCodeAt'](_0x4b533b),_0x3f9ed9|=0x268c+-0x1934+-0xd58;return _0x3f9ed9;}function iy(_0x427bd){let _0x1b3919=-0xb*0x15392395+0x1*-0x2f75fcd2+0xcd0390ff*0x2;for(let _0x5b9b68=-0x131*0x19+0x18ac*0x1+0x51d;_0x5b9b68<_0x427bd['length'];_0x5b9b68++)_0x1b3919^=_0x427bd[_0x5b9b68],_0x1b3919*=-0x1959346+-0x1975fe5+0x42cf4be;return _0x1b3919>>>0x1*-0x184a+0x1*-0x1ede+-0x1b94*-0x2;}const Wx=new fp(),$x=[-0x2369+0x1*-0x1213+0x357e,0x1d4e+-0xde8+-0x16*0xb3,0x8e5*0x3+-0x71*-0x2f+-0x17b3*0x2,-0x152+0x7ec+-0x68e,-0x12e3*0x1+-0x1*-0x9c7+0x4*0x24b],Xx=new Kt();class kt{constructor(_0x1b1c89,_0x3af366,_0x12936d){this['device']=_0x1b1c89,this['_elements']=[],this['hasUv0']=!(0x860+-0x346+0x3*-0x1b3),this['hasUv1']=!(0x89+0x1a*-0xe0+0x1638),this['hasColor']=!(-0xfaf*-0x1+0x6a3+-0x1651),this['hasTangent'+'s']=!(-0x6e8+-0x11f*0x1d+0x276c),this['verticesBy'+'teSize']=-0x32*-0x60+-0xeab*0x1+-0x415*0x1,this['vertexCoun'+'t']=_0x12936d,this['interleave'+'d']=_0x12936d===void(-0x1a91+0x9*0x29c+0x315),this['instancing']=!(0x190e+-0x2*0x4e0+-0xf4d),this['size']=_0x3af366['reduce']((_0x399dee,_0x1a81f5)=>_0x399dee+Math['ceil'](_0x1a81f5['components']*Eo[_0x1a81f5['type']]/(-0xc2e*0x2+-0xe01+0x2661))*(-0x1b65+0x3*0x796+0x4a7),-0x1*0x111d+-0x3*-0x353+0x724);let _0xd0ded8=-0x2*0xfad+0x3*-0xd01+0x465d*0x1,_0x5b4041;for(let _0x456f56=-0x1f94+0xd*-0xc1+0x2961,_0x3e5133=_0x3af366['length'];_0x456f56<_0x3e5133;_0x456f56++){const _0x391857=_0x3af366[_0x456f56];_0x5b4041=_0x391857['components']*Eo[_0x391857['type']],w['assert'](kt['isElementV'+'alid'](_0x1b1c89,_0x391857),'WebGPU\x20doe'+'s\x20not\x20supp'+'ort\x20the\x20fo'+'rmat\x20of\x20ve'+'rtex\x20eleme'+'nt\x20'+_0x391857['semantic']+'\x20:\x20'+Cx[_0x391857['type']]+'\x20x\x20'+_0x391857['components']),_0x12936d&&(_0xd0ded8=Y['roundUp'](_0xd0ded8,_0x5b4041),w['assert'](_0x5b4041%(-0xa*-0x33e+-0xb*0x1f7+0x133*-0x9)===-0x548*0x2+-0x1925*-0x1+-0xe95,'Non-interl'+'eaved\x20vert'+'ex\x20format\x20'+'with\x20eleme'+'nt\x20size\x20no'+'t\x20multiple'+'\x20of\x204\x20can\x20'+'have\x20perfo'+'rmance\x20imp'+'act\x20on\x20som'+'e\x20platform'+'s.\x20Element'+'\x20size:\x20'+_0x5b4041));const _0x2ab330=_0x391857['asInt']??!(0x1*-0x3ab+0x1*0x1b00+0x5d5*-0x4),_0x5f2cbb=_0x2ab330?!(-0x49*0x67+0x1*0x180a+0x556):_0x391857['normalize']??!(0x1d03+0xdbe*-0x2+-0x186),_0x24c902={'name':_0x391857['semantic'],'offset':_0x12936d?_0xd0ded8:_0x391857['hasOwnProp'+'erty']('offset')?_0x391857['offset']:_0xd0ded8,'stride':_0x12936d?_0x5b4041:_0x391857['hasOwnProp'+'erty']('stride')?_0x391857['stride']:this['size'],'dataType':_0x391857['type'],'numComponents':_0x391857['components'],'normalize':_0x5f2cbb,'size':_0x5b4041,'asInt':_0x2ab330};this['_elements']['push'](_0x24c902),_0x12936d?_0xd0ded8+=_0x5b4041*_0x12936d:_0xd0ded8+=Math['ceil'](_0x5b4041/(0xe95*0x1+0x858+-0xff*0x17))*(0x38b+-0x1c94+-0x1*-0x190d),_0x391857['semantic']===is?this['hasUv0']=!(0xee+-0x20cd+-0x1*-0x1fdf):_0x391857['semantic']===va?this['hasUv1']=!(0x175e+0x14a8+0x5*-0x8ce):_0x391857['semantic']===Wt?this['hasColor']=!(-0xcaa*-0x2+0x271*0xe+0x1dc1*-0x2):_0x391857['semantic']===yi&&(this['hasTangent'+'s']=!(-0x25ec*-0x1+-0x139*-0x2+-0x285e));}_0x12936d&&(this['verticesBy'+'teSize']=_0xd0ded8),this['_evaluateH'+'ash']();}get['elements'](){return this['_elements'];}static['getDefault'+'Instancing'+'Format'](_0x43e6e4){return Xx['get'](_0x43e6e4,()=>new kt(_0x43e6e4,[{'semantic':sp,'components':0x4,'type':Ve},{'semantic':ip,'components':0x4,'type':Ve},{'semantic':rp,'components':0x4,'type':Ve},{'semantic':bn,'components':0x4,'type':Ve}]));}static['isElementV'+'alid'](_0xc6b52b,_0x295778){const _0x2fea77=_0x295778['components']*Eo[_0x295778['type']];return!(_0xc6b52b['isWebGPU']&&!$x['includes'](_0x2fea77));}['update'](){w['assert'](!this['device']['isWebGPU'],'VertexForm'+'at#update\x20'+'is\x20not\x20sup'+'ported\x20on\x20'+'WebGPU\x20and'+'\x20VertexFor'+'mat\x20cannot'+'\x20be\x20modifi'+'ed.'),this['_evaluateH'+'ash']();}['_evaluateH'+'ash'](){const _0x336fdd=[],_0x1ef151=[],_0x188385=this['_elements']['length'];for(let _0x5b4af4=0x57*0x4+0x901+-0xa5d;_0x5b4af4<_0x188385;_0x5b4af4++){const {name:_0x153157,dataType:_0x249fdd,numComponents:_0x18a6d9,normalize:_0x15c568,offset:_0x40fb49,stride:_0xb2f1de,size:_0x9100bc,asInt:_0x944bd6}=this['_elements'][_0x5b4af4],_0x1498b5=_0x153157+_0x249fdd+_0x18a6d9+_0x15c568+_0x944bd6;_0x336fdd['push'](_0x1498b5);const _0x1a241b=_0x1498b5+_0x40fb49+_0xb2f1de+_0x9100bc;_0x1ef151['push'](_0x1a241b);}_0x336fdd['sort']();const _0x22f33b=_0x336fdd['join']();this['batchingHa'+'sh']=hi(_0x22f33b),this['shaderProc'+'essingHash'+'String']=_0x22f33b,this['renderingH'+'ashString']=_0x1ef151['join']('_'),this['renderingH'+'ash']=Wx['get'](this['renderingH'+'ashString']);}}const qx=new fp(),Sh=class Sh{constructor(_0x4e4702={}){h(this,'_func'),h(this,'_ref'),h(this,'_fail'),h(this,'_zfail'),h(this,'_zpass'),h(this,'_readMask'),h(this,'_writeMask'),h(this,'_dirty',!(0x389+-0xa1c*-0x2+-0x17c1)),h(this,'_key'),(this['_func']=_0x4e4702['func']??Hi,this['_ref']=_0x4e4702['ref']??-0x1*-0x7+-0x19de+0x19d7,this['_readMask']=_0x4e4702['readMask']??0x1ab1+0x6fd*-0x2+-0xbb8,this['_writeMask']=_0x4e4702['writeMask']??-0x5d*-0x21+0x117f*-0x2+-0x10*-0x180,this['_fail']=_0x4e4702['fail']??pn,this['_zfail']=_0x4e4702['zfail']??pn,this['_zpass']=_0x4e4702['zpass']??pn,this['_evalKey']());}set['func'](_0x5ac01d){this['_func']=_0x5ac01d,this['_dirty']=!(0x1aaf+-0x30*0x71+-0xc9*0x7);}get['func'](){return this['_func'];}set['ref'](_0x4b8d54){this['_ref']=_0x4b8d54,this['_dirty']=!(0x469+-0x1c6e+0xb*0x22f);}get['ref'](){return this['_ref'];}set['fail'](_0x470e95){this['_fail']=_0x470e95,this['_dirty']=!(-0x2*0xce+0x757*-0x4+0x1ef8);}get['fail'](){return this['_fail'];}set['zfail'](_0x25a679){this['_zfail']=_0x25a679,this['_dirty']=!(0x90f+0x1*-0x20eb+0x17dc);}get['zfail'](){return this['_zfail'];}set['zpass'](_0x1d4b02){this['_zpass']=_0x1d4b02,this['_dirty']=!(-0x2449+0x3*-0xbb3+0x4762);}get['zpass'](){return this['_zpass'];}set['readMask'](_0x6a8868){this['_readMask']=_0x6a8868,this['_dirty']=!(0x1373+-0x2070+-0x299*-0x5);}get['readMask'](){return this['_readMask'];}set['writeMask'](_0x5591e8){this['_writeMask']=_0x5591e8,this['_dirty']=!(-0x9*0x23f+0x161b*-0x1+0x1529*0x2);}get['writeMask'](){return this['_writeMask'];}['_evalKey'](){const {_func:_0x331069,_ref:_0x2719dc,_fail:_0x2cde6d,_zfail:_0x258677,_zpass:_0xf15dad,_readMask:_0x28bac9,_writeMask:_0x47f366}=this,_0x4f3e76=_0x331069+','+_0x2719dc+','+_0x2cde6d+','+_0x258677+','+_0xf15dad+','+_0x28bac9+','+_0x47f366;this['_key']=qx['get'](_0x4f3e76),this['_dirty']=!(0x2518+-0x1339+0x1*-0x11de);}get['key'](){return this['_dirty']&&this['_evalKey'](),this['_key'];}['copy'](_0x1f7aef){return this['_func']=_0x1f7aef['_func'],this['_ref']=_0x1f7aef['_ref'],this['_readMask']=_0x1f7aef['_readMask'],this['_writeMask']=_0x1f7aef['_writeMask'],this['_fail']=_0x1f7aef['_fail'],this['_zfail']=_0x1f7aef['_zfail'],this['_zpass']=_0x1f7aef['_zpass'],this['_dirty']=_0x1f7aef['_dirty'],this['_key']=_0x1f7aef['_key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}};h(Sh,'DEFAULT',Object['freeze'](new Sh()));let pi=Sh;const Ol=new Set(),yh=class yh extends me{constructor(_0x386fc8,_0x4ed778){var _0x4362a8,_0x193ae1,_0x17598a,_0x13577f,_0xa1ee6f,_0x2021c3;super(),h(this,'canvas'),h(this,'backBuffer',null),h(this,'backBuffer'+'Size',new J()),h(this,'backBuffer'+'Format'),h(this,'backBuffer'+'Antialias',!(-0x6f*-0x53+-0x2009+0x3*-0x151)),h(this,'isWebGPU',!(-0x21de+-0x2*-0x425+0x1995)),h(this,'isWebGL2',!(-0xd8f*0x2+-0xf*-0x116+0xad5*0x1)),h(this,'isHdr',!(0x658+0x2*0x111d+0x1f*-0x14f)),h(this,'scope'),h(this,'maxIndirec'+'tDrawCount',-0x23a2+-0x14b2+-0x42*-0xea),h(this,'maxAnisotr'+'opy'),h(this,'maxCubeMap'+'Size'),h(this,'maxTexture'+'Size'),h(this,'maxVolumeS'+'ize'),h(this,'maxColorAt'+'tachments',-0x1292+0x108*0x20+-0xe6d),h(this,'precision'),h(this,'samples'),h(this,'maxSamples',-0x713+-0x7f*-0x3d+-0x1*0x172f),h(this,'supportsSt'+'encil'),h(this,'supportsCo'+'mpute',!(0x2*-0x4ea+-0x1a4e+0x2423)),h(this,'supportsSt'+'orageTextu'+'reRead',!(-0x1133+-0x133e+0x2472)),h(this,'renderTarg'+'et',null),h(this,'shaders',[]),h(this,'textures',[]),h(this,'targets',new Set()),h(this,'renderVers'+'ion',-0x93*-0x7+0xaea*0x3+-0x24c3),h(this,'renderPass'+'Index'),h(this,'insideRend'+'erPass',!(-0x11e2+0x62*-0x2f+-0x5*-0x72d)),h(this,'supportsUn'+'iformBuffe'+'rs',!(-0x12b*0x1d+-0x2*-0x4e9+0x180e)),h(this,'supportsCl'+'ipDistance'+'s',!(-0x106f+-0x6b0+0x50*0x4a)),h(this,'textureFlo'+'atRenderab'+'le'),h(this,'textureHal'+'fFloatRend'+'erable'),h(this,'textureRG1'+'1B10Render'+'able',!(-0xbe9+0x343+-0x5*-0x1bb)),h(this,'textureFlo'+'atFilterab'+'le',!(-0xaf1+-0x1a54*-0x1+-0xf62)),h(this,'quadVertex'+'Buffer'),h(this,'blendState',new pt()),h(this,'depthState',new Yt()),h(this,'stencilEna'+'bled',!(0x2156+0x5*0x530+-0x1*0x3b45)),h(this,'stencilFro'+'nt',new pi()),h(this,'stencilBac'+'k',new pi()),h(this,'dynamicBuf'+'fers'),h(this,'gpuProfile'+'r'),h(this,'defaultCle'+'arOptions',{'color':[-0x5*0x245+-0x2*-0x73+0xa73*0x1,0x120+0x3ba+-0x4da,0x4*-0x602+-0x9f3+0x21fb,0x2*0x9bf+-0x1ee2*0x1+-0xb65*-0x1],'depth':0x1,'stencil':0x0,'flags':Fo|No}),h(this,'clientRect',{'width':0x0,'height':0x0}),h(this,'_shadersDi'+'rty',!(0x260a+-0x12*0x123+0x1*-0x1193)),h(this,'capsDefine'+'s',new Map()),h(this,'mapsToClea'+'r',new Set()),(this['canvas']=_0x386fc8,'setAttribu'+'te'in _0x386fc8&&_0x386fc8['setAttribu'+'te']('data-engin'+'e','PlayCanvas'+'\x20'+sn),this['initOption'+'s']={..._0x4ed778},(_0x4362a8=this['initOption'+'s'])['alpha']??(_0x4362a8['alpha']=!(0xb*-0x41+0xd83*0x2+0x183b*-0x1)),(_0x193ae1=this['initOption'+'s'])['depth']??(_0x193ae1['depth']=!(-0x1*-0x23e3+-0x3b1+0x1019*-0x2)),(_0x17598a=this['initOption'+'s'])['stencil']??(_0x17598a['stencil']=!(0x5a2+-0x96+-0x50c)),(_0x13577f=this['initOption'+'s'])['antialias']??(_0x13577f['antialias']=!(-0x1898*0x1+-0xe9a+0x2732)),(_0xa1ee6f=this['initOption'+'s'])['powerPrefe'+'rence']??(_0xa1ee6f['powerPrefe'+'rence']='high-perfo'+'rmance'),(_0x2021c3=this['initOption'+'s'])['displayFor'+'mat']??(_0x2021c3['displayFor'+'mat']=bx),this['_maxPixelR'+'atio']=Me['browser']?Math['min'](0x61e+-0x2*0x6f8+-0x7d3*-0x1,window['devicePixe'+'lRatio']):-0x1c98+-0x10*0x1e7+0x3b09,this['buffers']=[],this['_vram']={'texShadow':0x0,'texAsset':0x0,'texLightmap':0x0,'tex':0x0,'vb':0x0,'ib':0x0,'ub':0x0,'sb':0x0},this['_shaderSta'+'ts']={'vsCompiled':0x0,'fsCompiled':0x0,'linked':0x0,'materialShaders':0x0,'compileTime':0x0},this['initialize'+'ContextCac'+'hes'](),this['_drawCalls'+'PerFrame']=0x474+0x2*-0x515+0x56*0x11,this['_shaderSwi'+'tchesPerFr'+'ame']=0xc25+-0x1*-0xb7d+0xf2*-0x19,this['_primsPerF'+'rame']=[]);for(let _0x124f80=Vh;_0x124f80<=sa;_0x124f80++)this['_primsPerF'+'rame'][_0x124f80]=-0x58e+-0x1e33+0x23c1;this['_renderTar'+'getCreatio'+'nTime']=-0x23b9*-0x1+0xfb6*-0x2+-0x44d,this['scope']=new Gx('Device'),this['textureBia'+'s']=this['scope']['resolve']('textureBia'+'s'),this['textureBia'+'s']['setValue'](0x253a+-0x480+-0x2*0x105d);}['postInit'](){const _0xe7c80e=new kt(this,[{'semantic':Pe,'components':0x2,'type':Ve}]),_0x34ec7c=new Float32Array([-(-0x66d*-0x4+-0x1*0x261a+0xc67),-(-0x1*0x303+0x6*0x599+-0x45e*0x7),0x5*0x337+0x5c2*0x1+0x4*-0x575,-(-0x26f0+0x1f8f+0x762),-(-0xfe1+-0x132b+0x230d),0x11f7+0xf*0x59+-0x172d,0x23dd*-0x1+0x2345+0x99,-0x24db+0x1*-0x1fd+0x26d9]);this['quadVertex'+'Buffer']=new Ds(this,_0xe7c80e,0x1b9f+-0x3*0x9b3+0x17e*0x1,{'data':_0x34ec7c});}['initCapsDe'+'fines'](){const {capsDefines:_0x143d2b}=this;_0x143d2b['clear'](),this['textureFlo'+'atFilterab'+'le']&&_0x143d2b['set']('CAPS_TEXTU'+'RE_FLOAT_F'+'ILTERABLE',''),this['textureFlo'+'atRenderab'+'le']&&_0x143d2b['set']('CAPS_TEXTU'+'RE_FLOAT_R'+'ENDERABLE','');}['destroy'](){var _0x24d7ef,_0xf85a6f,_0x292109;this['fire']('destroy'),(_0x24d7ef=this['quadVertex'+'Buffer'])==null||_0x24d7ef['destroy'](),this['quadVertex'+'Buffer']=null,(_0xf85a6f=this['dynamicBuf'+'fers'])==null||_0xf85a6f['destroy'](),this['dynamicBuf'+'fers']=null,(_0x292109=this['gpuProfile'+'r'])==null||_0x292109['destroy'](),this['gpuProfile'+'r']=null;}['onDestroyS'+'hader'](_0x28220c){this['fire']('destroy:sh'+'ader',_0x28220c);const _0xf6a035=this['shaders']['indexOf'](_0x28220c);_0xf6a035!==-(0x1fb1+-0xdc5+-0x3*0x5f9)&&this['shaders']['splice'](_0xf6a035,-0x351*0x9+-0x131f+0x30f9*0x1);}['postDestro'+'y'](){this['scope']=null,this['canvas']=null;}['loseContex'+'t'](){var _0x3755e6;this['contextLos'+'t']=!(0x1a68+-0x1a90+-0x14*-0x2),this['backBuffer'+'Size']['set'](-(-0x11f2+0xb0e+0x6e5),-(-0xe27*-0x2+-0x1d26+-0x1f*-0x7));for(const _0x38e269 of this['textures'])_0x38e269['loseContex'+'t']();for(const _0x28fcb2 of this['buffers'])_0x28fcb2['loseContex'+'t']();for(const _0x2271ab of this['targets'])_0x2271ab['loseContex'+'t']();(_0x3755e6=this['gpuProfile'+'r'])==null||_0x3755e6['loseContex'+'t']();}['restoreCon'+'text'](){var _0x52af2e,_0x153b7a;this['contextLos'+'t']=!(0x1782+0x1ed3+-0x3654),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes']();for(const _0x10998e of this['buffers'])_0x10998e['unlock']();(_0x153b7a=(_0x52af2e=this['gpuProfile'+'r'])==null?void(0x1d*0x11a+-0xc5*-0x7+-0x13*0x1f7):_0x52af2e['restoreCon'+'text'])==null||_0x153b7a['call'](_0x52af2e);}['toJSON'](_0x241cd2){}['initialize'+'ContextCac'+'hes'](){this['vertexBuff'+'ers']=[],this['shader']=null,this['shaderVali'+'d']=void(0x1*-0x8bd+-0x13b7+-0x4be*-0x6),this['shaderAsyn'+'cCompile']=!(-0xa9*0x2a+0x886+0x95*0x21),this['renderTarg'+'et']=null;}['initialize'+'RenderStat'+'e'](){this['blendState']=new pt(),this['depthState']=new Yt(),this['cullMode']=ca,this['vx']=this['vy']=this['vw']=this['vh']=0x3cb*-0x1+0x19e7+0x1*-0x161c,this['sx']=this['sy']=this['sw']=this['sh']=-0xe07+-0x8e0+0x16e7,this['blendColor']=new ie(0x28a+0x3c+-0x1*0x2c6,0x187*-0x8+0xb3*-0x1+0xceb*0x1,-0x1b64+0xf06+-0x1*-0xc5e,0x120c+0x11*0x7f+-0x1a7b);}['setStencil'+'State'](_0x1cec95,_0x4738e8){w['assert'](!(0x1e06+-0x3a*-0x4+0x3*-0xa4f));}['setBlendSt'+'ate'](_0x2c443b){w['assert'](!(-0x11c4+0x3*-0xcaa+0x37c3*0x1));}['setBlendCo'+'lor'](_0x15f7dd,_0xd3f56e,_0xc1032e,_0x33748e){w['assert'](!(-0x1f91+-0x6df*0x2+-0x488*-0xa));}['setDepthSt'+'ate'](_0x4a0639){w['assert'](!(-0x3da*-0xa+0x1806+-0x3e89));}['setCullMod'+'e'](_0x3d3417){w['assert'](!(0x6b+-0x11*0x13c+0x1492));}['setRenderT'+'arget'](_0xc9914a){this['renderTarg'+'et']=_0xc9914a;}['setVertexB'+'uffer'](_0x516904){_0x516904&&this['vertexBuff'+'ers']['push'](_0x516904);}['clearVerte'+'xBuffer'](){this['vertexBuff'+'ers']['length']=-0x81b+0x803+0x6*0x4;}['getIndirec'+'tDrawSlot'](){return 0x1805+0x121*-0x3+-0x14a2;}get['indirectDr'+'awBuffer'](){return null;}['getRenderT'+'arget'](){return this['renderTarg'+'et'];}['initRender'+'Target'](_0x5ee794){if(_0x5ee794['initialize'+'d'])return;const _0x277891=de();this['fire']('fbo:create',{'timestamp':_0x277891,'target':this}),_0x5ee794['init'](),this['targets']['add'](_0x5ee794),this['_renderTar'+'getCreatio'+'nTime']+=de()-_0x277891;}['draw'](_0x495c19,_0x1f16ce,_0xa410fc,_0x422fdd,_0x32f84a=!(-0x153d+-0x1b9d+0x30da),_0xe303ba=!(-0x2488+-0x35e*0x8+0x3f78)){w['assert'](!(-0x9f3+0xd44+-0x350));}['_isBrowser'+'Interface'](_0x43df7c){return this['_isImageBr'+'owserInter'+'face'](_0x43df7c)||this['_isImageCa'+'nvasInterf'+'ace'](_0x43df7c)||this['_isImageVi'+'deoInterfa'+'ce'](_0x43df7c);}['_isImageBr'+'owserInter'+'face'](_0x20ca4d){return typeof ImageBitmap<'u'&&_0x20ca4d instanceof ImageBitmap||typeof HTMLImageElement<'u'&&_0x20ca4d instanceof HTMLImageElement;}['_isImageCa'+'nvasInterf'+'ace'](_0x14f999){return typeof HTMLCanvasElement<'u'&&_0x14f999 instanceof HTMLCanvasElement;}['_isImageVi'+'deoInterfa'+'ce'](_0x28a948){return typeof HTMLVideoElement<'u'&&_0x28a948 instanceof HTMLVideoElement;}['resizeCanv'+'as'](_0x1d1585,_0x50c6e4){const _0x3b69b0=Math['min'](this['_maxPixelR'+'atio'],Me['browser']?window['devicePixe'+'lRatio']:-0x1*0x6bb+0x85e+-0xd1*0x2),_0x53b527=Math['floor'](_0x1d1585*_0x3b69b0),_0x47cf8d=Math['floor'](_0x50c6e4*_0x3b69b0);(_0x53b527!==this['canvas']['width']||_0x47cf8d!==this['canvas']['height'])&&this['setResolut'+'ion'](_0x53b527,_0x47cf8d);}['setResolut'+'ion'](_0x134ac7,_0x4d93d6){this['canvas']['width']=_0x134ac7,this['canvas']['height']=_0x4d93d6,this['fire'](yh['EVENT_RESI'+'ZE'],_0x134ac7,_0x4d93d6);}['update'](){this['updateClie'+'ntRect']();}['updateClie'+'ntRect'](){if(Me['worker'])this['clientRect']['width']=this['canvas']['width'],this['clientRect']['height']=this['canvas']['height'];else{const _0x4f00f5=this['canvas']['getBoundin'+'gClientRec'+'t']();this['clientRect']['width']=_0x4f00f5['width'],this['clientRect']['height']=_0x4f00f5['height'];}}get['width'](){return this['canvas']['width'];}get['height'](){return this['canvas']['height'];}set['fullscreen'](_0x3c4fd3){w['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.');}get['fullscreen'](){return w['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.'),!(-0x53*0x42+0x6fd*-0x5+0x3858);}set['maxPixelRa'+'tio'](_0x597d39){this['_maxPixelR'+'atio']=_0x597d39;}get['maxPixelRa'+'tio'](){return this['_maxPixelR'+'atio'];}get['deviceType'](){return this['_deviceTyp'+'e'];}['startRende'+'rPass'](_0x510a97){}['endRenderP'+'ass'](_0xefab9){}['startCompu'+'tePass'](_0x1fae99){}['endCompute'+'Pass'](){}['frameStart'](){this['renderPass'+'Index']=0x1*-0x19c7+0x11bd+-0x2a*-0x31,this['renderVers'+'ion']++,w['call'](()=>{if(mi['get'](m0)){const _0x4b43a0=this['textures']['slice']();_0x4b43a0['sort']((_0x558b6d,_0x16b2f1)=>_0x16b2f1['gpuSize']-_0x558b6d['gpuSize']),w['log']('Textures:\x20'+_0x4b43a0['length']);let _0x27981b=-0x1e6d*0x1+-0x561+0x11e7*0x2;_0x4b43a0['forEach']((_0x2e44c6,_0x292733)=>{const _0x1d8940=_0x2e44c6['gpuSize'];_0x27981b+=_0x1d8940,w['log'](_0x292733+'.\x20'+_0x2e44c6['name']+'\x20'+_0x2e44c6['width']+'x'+_0x2e44c6['height']+'\x20VRAM:\x20'+(_0x1d8940/(0x1189+0x1e8d+-0x26*0x129)/(-0x158f+-0x1*-0x13ad+0x5e2))['toFixed'](0x1529+0xecd*-0x1+-0x65a)+'\x20MB');}),w['log']('Total:\x20'+(_0x27981b/(0x1bff*0x1+0x1*-0x156a+0x295*-0x1)/(0x1*-0x24f7+0x3*0x4c5+0x1aa8))['toFixed'](-0x23a2+0x1*0x1331+0x1073)+'MB');}});}['frameEnd'](){this['mapsToClea'+'r']['forEach'](_0x31c75f=>_0x31c75f['clear']()),this['mapsToClea'+'r']['clear']();}['computeDis'+'patch'](_0x5be1e8,_0x139b26='Unnamed'){}['getRendera'+'bleHdrForm'+'at'](_0x169b5d=[En,nt,Xt],_0x236831=!(-0x1*0x16d3+0x1cc8+-0x5f5*0x1),_0x34f5d5=-0xb41+-0x2*0x86e+0x3b*0x7a){for(let _0xc25dca=-0x1416+-0x13a*-0x1+0x12dc;_0xc25dca<_0x169b5d['length'];_0xc25dca++){const _0x112d9e=_0x169b5d[_0xc25dca];switch(_0x112d9e){case En:{if(this['textureRG1'+'1B10Render'+'able'])return _0x112d9e;break;}case nt:if(this['textureHal'+'fFloatRend'+'erable'])return _0x112d9e;break;case Xt:if(this['isWebGPU']&&_0x34f5d5>-0x10be+-0x5*-0x3af+-0x1ac)continue;if(this['textureFlo'+'atRenderab'+'le']&&(!_0x236831||this['textureFlo'+'atFilterab'+'le']))return _0x112d9e;break;}}}['validateAt'+'tributes'](_0x116072,_0x51da14,_0x155114){w['call'](()=>{Ol['clear'](),_0x51da14==null||_0x51da14['elements']['forEach'](_0x1f3667=>Ol['add'](Le[_0x1f3667['name']])),_0x155114==null||_0x155114['elements']['forEach'](_0x578702=>Ol['add'](Le[_0x578702['name']]));for(const [_0x1d9f66,_0x28a0b6]of _0x116072['attributes'])Ol['has'](_0x1d9f66)||w['errorOnce']('Vertex\x20att'+'ribute\x20['+_0x28a0b6+(']\x20at\x20locat'+'ion\x20')+_0x1d9f66+('\x20required\x20'+'by\x20the\x20sha'+'der\x20is\x20not'+'\x20present\x20i'+'n\x20the\x20curr'+'ently\x20assi'+'gned\x20verte'+'x\x20buffers,'+'\x20while\x20ren'+'dering\x20[')+Q['toString']()+']',{'shader':_0x116072,'vb0Format':_0x51da14,'vb1Format':_0x155114});});}};h(yh,'EVENT_RESI'+'ZE','resizecanv'+'as');let $e=yh,jx=-0x6*-0x6d+-0xce3*0x3+0xc09*0x3;class gt{constructor(_0x2bc937={}){h(this,'name'),h(this,'_device'),h(this,'_colorBuff'+'er'),h(this,'_colorBuff'+'ers'),h(this,'_depthBuff'+'er'),h(this,'_depth'),h(this,'_stencil'),h(this,'_samples'),h(this,'autoResolv'+'e'),h(this,'_face'),h(this,'_mipLevel'),h(this,'_mipmaps'),h(this,'flipY');var _0x53c7b5,_0x169989,_0x1f0666,_0x22387c,_0x39fc38,_0x1bb0ec;w['assert'](!(_0x2bc937 instanceof $e),'pc.RenderT'+'arget\x20cons'+'tructor\x20no'+'\x20longer\x20ac'+'cepts\x20Grap'+'hicsDevice'+'\x20parameter'+'.'),this['id']=jx++;const _0x1468a2=((_0x53c7b5=_0x2bc937['colorBuffe'+'r'])==null?void(0x1b08+0x1*-0x1419+-0x6ef):_0x53c7b5['device'])??((_0x169989=_0x2bc937['colorBuffe'+'rs'])==null?void(-0x1b*0x1+0x1194+-0x1179):_0x169989[-0x18ed+0x3*0xb57+-0x4*0x246]['device'])??((_0x1f0666=_0x2bc937['depthBuffe'+'r'])==null?void(0x104e+0x1f14+-0x2f62):_0x1f0666['device'])??_0x2bc937['graphicsDe'+'vice'];w['assert'](_0x1468a2,'Failed\x20to\x20'+'obtain\x20the'+'\x20device,\x20c'+'olorBuffer'+'\x20nor\x20depth'+'Buffer\x20sto'+'re\x20it.'),this['_device']=_0x1468a2;const {maxSamples:_0x750de9}=this['_device'];if(this['_samples']=Math['min'](_0x2bc937['samples']??-0x707*0x5+-0x5*-0x5a4+-0x4a*-0x18,_0x750de9),_0x1468a2['isWebGPU']&&(this['_samples']=this['_samples']>-0x7a+-0x1*-0x3a8+-0x1*0x32d?_0x750de9:-0x3a8+0xb47*0x1+-0x79e),this['_colorBuff'+'er']=_0x2bc937['colorBuffe'+'r'],_0x2bc937['colorBuffe'+'r']&&(this['_colorBuff'+'ers']=[_0x2bc937['colorBuffe'+'r']]),this['_depthBuff'+'er']=_0x2bc937['depthBuffe'+'r'],this['_face']=_0x2bc937['face']??0x1*-0x79d+0x9ac+-0x20f,this['_depthBuff'+'er']){const _0x4883d4=this['_depthBuff'+'er']['_format'];_0x4883d4===Wi||_0x4883d4===un?(this['_depth']=!(0x297+-0x290*-0xe+-0x2677),this['_stencil']=!(-0x16*-0x178+-0x724*-0x2+-0x1*0x2e97)):_0x4883d4===Oh?(this['_depth']=!(0x1a8+0x1930+-0x1ad8*0x1),this['_stencil']=!(0x2*-0x911+0x1869+-0x647)):_0x4883d4===Qi&&this['_depthBuff'+'er']['device']['isWebGPU']&&this['_samples']>0x65*0x13+-0x3c5*0x6+0xf20?(this['_depth']=!(0x1308+0x1*0xb2c+-0x2*0xf1a),this['_stencil']=!(0x1997+-0x781*-0x5+0x703*-0x9)):(w['warn']('Incorrect\x20'+'depthBuffe'+'r\x20format.\x20'+'Must\x20be\x20pc'+'.PIXELFORM'+'AT_DEPTH\x20o'+'r\x20pc.PIXEL'+'FORMAT_DEP'+'THSTENCIL'),this['_depth']=!(-0xea2+0x1*-0x1186+-0x2029*-0x1),this['_stencil']=!(0x9a3+-0x2*-0x124f+-0xb9*0x40));}else this['_depth']=_0x2bc937['depth']??!(-0x2*0x655+-0x1*-0xc97+0x13*0x1),this['_stencil']=_0x2bc937['stencil']??!(0x1264+0x9f3+-0x1c56);_0x2bc937['colorBuffe'+'rs']&&(w['assert'](!this['_colorBuff'+'ers'],'When\x20const'+'ructing\x20Re'+'nderTarget'+'\x20and\x20optio'+'ns.colorBu'+'ffers\x20is\x20u'+'sed,\x20optio'+'ns.colorBu'+'ffer\x20must\x20'+'not\x20be\x20use'+'d.'),this['_colorBuff'+'ers']||(this['_colorBuff'+'ers']=[..._0x2bc937['colorBuffe'+'rs']],this['_colorBuff'+'er']=_0x2bc937['colorBuffe'+'rs'][-0xa*-0xc1+0x1024+0x17ae*-0x1])),this['autoResolv'+'e']=_0x2bc937['autoResolv'+'e']??!(-0x2a2*0x1+-0x8a9+0xb4b),this['name']=_0x2bc937['name'],this['name']||(this['name']=(_0x22387c=this['_colorBuff'+'er'])==null?void(0x7*0x54b+0x1bdf+-0x569*0xc):_0x22387c['name']),this['name']||(this['name']=(_0x39fc38=this['_depthBuff'+'er'])==null?void(0x1b2d+-0x16a4+0x1b*-0x2b):_0x39fc38['name']),this['name']||(this['name']='Untitled'),this['flipY']=_0x2bc937['flipY']??!(0x5c1+0x240f+-0xb*0x3cd),this['_mipLevel']=_0x2bc937['mipLevel']??0x119d+0x1*-0xf7f+-0x21e*0x1,this['_mipLevel']>-0x10b*0x2+0x17a9+-0x7*0x315&&this['_depth']&&(w['error']('Rendering\x20'+'to\x20a\x20mipLe'+'vel\x20is\x20not'+'\x20supported'+'\x20when\x20rend'+'er\x20target\x20'+'uses\x20a\x20dep'+'th\x20buffer.'+'\x20Ignoring\x20'+'mipLevel\x20'+this['_mipLevel']+('\x20for\x20rende'+'r\x20target\x20')+this['name'],{'renderTarget':this,'options':_0x2bc937}),this['_mipLevel']=-0x2320+0x3e0*-0x4+0x32a0),this['_mipmaps']=_0x2bc937['mipLevel']===void(-0x966+0xa5*0x20+-0xb3a),this['validateMr'+'t'](),this['impl']=_0x1468a2['createRend'+'erTargetIm'+'pl'](this),w['trace'](tm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+('\x20[samples:'+'\x20')+this['samples']+']'+((_0x1bb0ec=this['_colorBuff'+'ers'])!=null&&_0x1bb0ec['length']?'[MRT:\x20'+this['_colorBuff'+'ers']['length']+']':'')+(this['colorBuffe'+'r']?'[Color]':'')+(this['depth']?'[Depth]':'')+(this['stencil']?'[Stencil]':'')+'[Face:'+this['face']+']');}['destroy'](){w['trace'](tm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x165707=this['_device'];_0x165707&&(_0x165707['targets']['delete'](this),_0x165707['renderTarg'+'et']===this&&_0x165707['setRenderT'+'arget'](null),this['destroyFra'+'meBuffers']());}['destroyFra'+'meBuffers'](){const _0x440ffc=this['_device'];_0x440ffc&&this['impl']['destroy'](_0x440ffc);}['destroyTex'+'tureBuffer'+'s'](){var _0x263dec,_0x5da777;(_0x263dec=this['_depthBuff'+'er'])==null||_0x263dec['destroy'](),this['_depthBuff'+'er']=null,(_0x5da777=this['_colorBuff'+'ers'])==null||_0x5da777['forEach'](_0x6957c6=>{_0x6957c6['destroy']();}),this['_colorBuff'+'ers']=null,this['_colorBuff'+'er']=null;}['resize'](_0x420d6e,_0x47c009){var _0x14c5da,_0x53ff89;if(this['width']!==_0x420d6e||this['height']!==_0x47c009){if(this['mipLevel']>0x1*0x1999+0x1*0x1fef+0x3988*-0x1){w['warn']('Only\x20a\x20ren'+'der\x20target'+'\x20rendering'+'\x20to\x20mipLev'+'el\x200\x20can\x20b'+'e\x20resized,'+'\x20ignoring.',this);return;}const _0x3975ab=this['_device'];this['destroyFra'+'meBuffers'](),_0x3975ab['renderTarg'+'et']===this&&_0x3975ab['setRenderT'+'arget'](null),(_0x14c5da=this['_depthBuff'+'er'])==null||_0x14c5da['resize'](_0x420d6e,_0x47c009),(_0x53ff89=this['_colorBuff'+'ers'])==null||_0x53ff89['forEach'](_0x2ea8d9=>{_0x2ea8d9['resize'](_0x420d6e,_0x47c009);}),this['validateMr'+'t'](),this['impl']=_0x3975ab['createRend'+'erTargetIm'+'pl'](this);}}['validateMr'+'t'](){w['call'](()=>{if(this['_colorBuff'+'ers']){const {width:_0x4cd4c0,height:_0x2632e0,cubemap:_0x5a957,volume:_0x3bb7f6}=this['_colorBuff'+'ers'][0x1eb5*0x1+-0x3a*-0x8+-0x2085];for(let _0x59daa6=0x10c6+0xd1c+-0x1de1;_0x59daa6<this['_colorBuff'+'ers']['length'];_0x59daa6++){const _0x1ae4f6=this['_colorBuff'+'ers'][_0x59daa6];w['assert'](_0x1ae4f6['width']===_0x4cd4c0,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20width',this),w['assert'](_0x1ae4f6['height']===_0x2632e0,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20height',this),w['assert'](_0x1ae4f6['cubemap']===_0x5a957,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20cubemap\x20s'+'etting',this),w['assert'](_0x1ae4f6['volume']===_0x3bb7f6,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20volume\x20se'+'tting',this);}}});}['init'](){this['impl']['init'](this['_device'],this);}get['initialize'+'d'](){return this['impl']['initialize'+'d'];}get['device'](){return this['_device'];}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['resolve'](_0x206ca6=!(-0x2276+0x67e*0x2+0x157a),_0x57c182=!!this['_depthBuff'+'er']){this['_device']&&this['_samples']>-0xcd8+0x53b+0x79e&&(Q['pushGpuMar'+'ker'](this['_device'],'RESOLVE-RT'+':'+this['name']+':'+(_0x206ca6?'[color]':'')+':'+(_0x57c182?'[depth]':'')),this['impl']['resolve'](this['_device'],this,_0x206ca6,_0x57c182),Q['popGpuMark'+'er'](this['_device']));}['copy'](_0x5f1f73,_0x28f148,_0x617661){if(!this['_device']){if(_0x5f1f73['_device'])this['_device']=_0x5f1f73['_device'];else return w['error']('Render\x20tar'+'gets\x20are\x20n'+'ot\x20initial'+'ized'),!(-0x8ab+-0x2*-0x12df+-0x7a*0x3d);}Q['pushGpuMar'+'ker'](this['_device'],'COPY-RT:'+_0x5f1f73['name']+'->'+this['name']);const _0xb1398a=this['_device']['copyRender'+'Target'](_0x5f1f73,this,_0x28f148,_0x617661);return Q['popGpuMark'+'er'](this['_device']),_0xb1398a;}get['samples'](){return this['_samples'];}get['depth'](){return this['_depth'];}get['stencil'](){return this['_stencil'];}get['colorBuffe'+'r'](){return this['_colorBuff'+'er'];}['getColorBu'+'ffer'](_0x1fceb5){var _0x22d554;return(_0x22d554=this['_colorBuff'+'ers'])==null?void(0x1*0x1853+-0x1*-0x2452+0x73*-0x87):_0x22d554[_0x1fceb5];}get['depthBuffe'+'r'](){return this['_depthBuff'+'er'];}get['face'](){return this['_face'];}get['mipLevel'](){return this['_mipLevel'];}get['mipmaps'](){return this['_mipmaps'];}get['width'](){var _0x11f6a7,_0x4ef994;let _0x22f95c=((_0x11f6a7=this['_colorBuff'+'er'])==null?void(-0x6*-0x361+0x9d9+-0x1e1f):_0x11f6a7['width'])||((_0x4ef994=this['_depthBuff'+'er'])==null?void(-0xcb4+0x1d0d+-0x1059):_0x4ef994['width'])||this['_device']['width'];return this['_mipLevel']>-0xe90+0x30*0xa+-0x3a*-0x38&&(_0x22f95c=$i['calcLevelD'+'imension'](_0x22f95c,this['_mipLevel'])),_0x22f95c;}get['height'](){var _0x785c5f,_0x31d36a;let _0x15d86e=((_0x785c5f=this['_colorBuff'+'er'])==null?void(-0xb96*0x2+-0x3*0x551+0x271f):_0x785c5f['height'])||((_0x31d36a=this['_depthBuff'+'er'])==null?void(0xb76+0xfa8+-0x1b1e):_0x31d36a['height'])||this['_device']['height'];return this['_mipLevel']>0x119f+-0x1496+0x2f7&&(_0x15d86e=$i['calcLevelD'+'imension'](_0x15d86e,this['_mipLevel'])),_0x15d86e;}['isColorBuf'+'ferSrgb'](_0x2f3575=0xe3*0x12+-0x2*0x1235+0x1474){if(this['device']['backBuffer']===this)return Wc(this['device']['backBuffer'+'Format']);const _0x4c585e=this['getColorBu'+'ffer'](_0x2f3575);return _0x4c585e?Wc(_0x4c585e['format']):!(0x1443+0x46*-0x4f+-0x1*-0x158);}}const Yx={'equals'(_0x2a52a0,_0x341163){if(_0x2a52a0['length']!==_0x341163['length'])return!(-0x26c2+0x4f9*0x3+0x17d8);for(let _0x3d9389=-0x4e7+0x3b*-0x1d+0xb96;_0x3d9389<_0x2a52a0['length'];_0x3d9389++)if(_0x2a52a0[_0x3d9389]!==_0x341163[_0x3d9389])return!(0x17a9+-0x1a88+0x2e0);return!(-0x2058+0x1542+0xb16);}};class td{constructor(){h(this,'_refCount',0xa7a+0x9f5*-0x3+0x3*0x677);}['incRefCoun'+'t'](){this['_refCount']++;}['decRefCoun'+'t'](){this['_refCount']--;}get['refCount'](){return this['_refCount'];}}class Kx extends td{constructor(_0x46143e){super(),h(this,'object'),(this['object']=_0x46143e,this['incRefCoun'+'t']());}}class Zx{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach'](_0x129542=>{var _0x25ada7;(_0x25ada7=_0x129542['object'])==null||_0x25ada7['destroy']();}),this['cache']['clear']();}['clear'](){this['cache']['clear']();}['get'](_0x5b4cb6){const _0x1afea4=this['cache']['get'](_0x5b4cb6);return _0x1afea4?(_0x1afea4['incRefCoun'+'t'](),_0x1afea4['object']):null;}['set'](_0x345d28,_0x2ae4cf){w['assert'](!this['cache']['has'](_0x345d28),'RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'put\x20object'+'\x20with\x20key\x20'+'that\x20alrea'+'dy\x20exists\x20'+'in\x20the\x20cac'+'he',{'key':_0x345d28,'object':_0x2ae4cf}),this['cache']['set'](_0x345d28,new Kx(_0x2ae4cf));}['release'](_0x56e041){var _0x541173;const _0x1315c1=this['cache']['get'](_0x56e041);_0x1315c1?(_0x1315c1['decRefCoun'+'t'](),_0x1315c1['refCount']===0x241d*0x1+-0x1*-0x573+-0x2990&&(this['cache']['delete'](_0x56e041),(_0x541173=_0x1315c1['object'])==null||_0x541173['destroy']())):w['warn']('RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'release\x20ob'+'ject\x20that\x20'+'is\x20not\x20in\x20'+'the\x20cache',{'key':_0x56e041});}}class Qx extends Zx{['loseContex'+'t'](_0x4d33eb){this['clear']();}}const Jx=new Kt(),ud=_0x5a6646=>Jx['get'](_0x5a6646,()=>new Qx()),At=[];At[$s]=-0x1*-0x102+-0x924+-0x1*-0x823,At[fa]=-0x1589+0x8b+0x150*0x10,At[ds]=-0x115c+0x2fa*0x7+-0x377*0x1,At[An]=-0x49*0x67+0x7a9*-0x1+0x250c,At[da]=0x103f*0x1+-0x1*-0xe12+0xa*-0x308,At[ra]=0x136b*0x1+-0x1cba+0x951,At[aa]=0x1a05+-0x1a8+-0x81e*0x3,At[na]=-0x1*-0x90a+0x1de6+0xbc*-0x35,At[mn]=-0x1de3*-0x1+0x48*0x71+-0x3daa,At[Go]=-0x2400+0xccf+0x1733,At[Ho]=-0xefe+-0x9c6+0x18c7*0x1,At[Wo]=0xc51+-0xae1+-0x4*0x5b,At[jc]=0xe35+-0x2284+0x7f*0x29,At[Cn]=0x2683+0x1786+0x1*-0x3dfd,At[li]=-0x1df3+0x6*-0x1e9+0x2979,At[Pn]=0x3*-0xbce+-0x2056+0x1*0x43c1,At[Mn]=-0x1e7*0x7+0x6*0x5a7+-0x1497,At[Dn]=-0x156d+-0xdc4*0x1+0x2334,At[In]=-0x5a9*0x2+0x1*-0x179d+0x22f3;class dt{constructor(_0x4fa552,_0x3ad72d,_0x2b50ec=-0x1108+0x151f+0x15d*-0x3){h(this,'name'),h(this,'type'),h(this,'byteSize'),h(this,'offset'),h(this,'scopeId'),h(this,'count'),h(this,'numCompone'+'nts');if(this['shortName']=_0x4fa552,this['name']=_0x2b50ec?_0x4fa552+'[0]':_0x4fa552,this['type']=_0x3ad72d,this['numCompone'+'nts']=At[_0x3ad72d],w['assert'](this['numCompone'+'nts'],'Unhandled\x20'+'uniform\x20fo'+'rmat\x20'+_0x3ad72d+'\x20used\x20for\x20'+_0x4fa552),this['updateType']=_0x3ad72d,_0x2b50ec>0x2419*-0x1+-0x1f1*-0x13+-0xca)switch(_0x3ad72d){case $s:this['updateType']=$h;break;case da:this['updateType']=Ln;break;case Pn:this['updateType']=jh;break;case mn:this['updateType']=Yh;break;case fa:this['updateType']=Xh;break;case ra:this['updateType']=Rn;break;case Mn:this['updateType']=Kh;break;case Go:this['updateType']=Zh;break;case ds:this['updateType']=qh;break;case aa:this['updateType']=On;break;case Dn:this['updateType']=Qh;break;case Ho:this['updateType']=Jh;break;case An:this['updateType']=ap;break;case na:this['updateType']=Yc;break;case In:this['updateType']=np;break;case Wo:this['updateType']=op;break;case li:this['updateType']=VS;break;default:w['error']('Uniform\x20ar'+'ray\x20of\x20typ'+'e\x20'+GS[_0x3ad72d]+('\x20is\x20not\x20su'+'pported\x20wh'+'en\x20process'+'ing\x20unifor'+'m\x20\x27')+_0x4fa552+'\x27.'),w['call'](()=>{this['invalid']=!(-0x1*0x2302+0x22bb*0x1+0x47*0x1);});break;}this['count']=_0x2b50ec,w['assert'](!isNaN(_0x2b50ec),'Unsupporte'+'d\x20uniform:'+'\x20'+_0x4fa552+'['+_0x2b50ec+']'),w['call'](()=>{isNaN(_0x2b50ec)&&(this['invalid']=!(-0x1ac8+0x260a+-0xb42));});let _0x18c510=this['numCompone'+'nts'];_0x2b50ec&&(_0x18c510=Y['roundUp'](_0x18c510,0x1e59+-0x4*0x21f+-0x15d9*0x1)),this['byteSize']=_0x18c510*(-0x156c+0xec1*0x1+0x6af),_0x2b50ec&&(this['byteSize']*=_0x2b50ec),w['assert'](this['byteSize'],'Unknown\x20by'+'te\x20size\x20fo'+'r\x20uniform\x20'+'format\x20'+_0x3ad72d+'\x20used\x20for\x20'+_0x4fa552);}get['isArrayTyp'+'e'](){return this['count']>-0xa36+-0x15da+-0x10*-0x201;}['calculateO'+'ffset'](_0x216638){let _0x1df1e0=this['byteSize']<=-0x3*-0x97a+-0x19b5+-0x2b1*0x1?this['byteSize']:-0x2*-0x1069+0x1*-0xd3b+-0x1387*0x1;this['count']&&(_0x1df1e0=-0x62+0x5*0x556+0x1a3c*-0x1),_0x216638=Y['roundUp'](_0x216638,_0x1df1e0),this['offset']=_0x216638/(0x6*-0x4c1+-0x12af*0x1+0x2f39);}}class ry{constructor(_0x5e603b,_0x30d8a8){h(this,'byteSize',-0x17ca+-0x77*-0x11+0x7*0x245),h(this,'map',new Map()),(this['scope']=_0x5e603b['scope'],this['uniforms']=_0x30d8a8);let _0x29c0c1=0x42*-0x3e+0x1*-0x8a+0x1086;for(let _0x18db61=-0x138a+0x3*-0x6+0x139c;_0x18db61<_0x30d8a8['length'];_0x18db61++){const _0x41d945=_0x30d8a8[_0x18db61];_0x41d945['calculateO'+'ffset'](_0x29c0c1),_0x29c0c1=_0x41d945['offset']*(0x2*0x643+-0xcff+0x7d)+_0x41d945['byteSize'],_0x41d945['scopeId']=this['scope']['resolve'](_0x41d945['name']),this['map']['set'](_0x41d945['name'],_0x41d945);}this['byteSize']=Y['roundUp'](_0x29c0c1,0x1*-0x20c2+-0xa71+0x2b43);}['get'](_0xb1079){return this['map']['get'](_0xb1079);}}const Pr='Preprocess'+'or',Os=/[ \t]*#(ifn?def|if|endif|else|elif|define|undef|extension|include)/g,pd=/define[ \t]+([^\n]+)\r?(?:\n|$)/g,Mm=/extension[ \t]+([\w-]+)[ \t]*:[ \t]*(enable|require)/g,md=/undef[ \t]+([^\n]+)\r?(?:\n|$)/g,_d=/(ifdef|ifndef|if)[ \t]*([^\r\n]+)\r?\n/g,gd=/(endif|else|elif)(?:[ \t]+([^\r\n]*))?\r?\n?/g,Dm=/\{?[\w-]+\}?/,eT=/(!|\s)?defined\(([\w-]+)\)/,tT=/!?defined\s*\([^)]*\)/g,sT=/!?defined\s*$/,iT=/([a-z_]\w*)\s*(==|!=|<|<=|>|>=)\s*([\w"']+)/i,rT=/[+\-]/g,Sd=/include[ \t]+"([\w-]+)(?:\s*,\s*([\w-]+))?"/g,aT=/\{i\}/g,Im=/(pcFragColor[1-8])\b/g,Lt=class Lt{static['run'](_0x374266,_0x15e277=new Map(),_0x43d185={}){Lt['sourceName']=_0x43d185['sourceName'],_0x374266=this['stripComme'+'nts'](_0x374266),_0x374266=_0x374266['split'](/\r?\n/)['map'](_0x2e4983=>_0x2e4983['trimEnd']())['join']('\x0a');const _0x2b0f50=new Map(),_0x10f16b=new Map();if(_0x374266=this['_preproces'+'s'](_0x374266,_0x2b0f50,_0x10f16b,_0x15e277,_0x43d185['stripDefin'+'es']),_0x374266===null)return null;const _0x2b1f7f=new Map();return _0x2b0f50['forEach']((_0x35e45f,_0xe9c1fc)=>{Number['isInteger'](parseFloat(_0x35e45f))&&!_0x35e45f['includes']('.')&&_0x2b1f7f['set'](_0xe9c1fc,_0x35e45f);}),_0x374266=this['stripComme'+'nts'](_0x374266),_0x374266=this['stripUnuse'+'dColorAtta'+'chments'](_0x374266,_0x43d185),_0x374266=this['RemoveEmpt'+'yLines'](_0x374266),_0x374266=this['processArr'+'aySize'](_0x374266,_0x2b1f7f),_0x374266=this['injectDefi'+'nes'](_0x374266,_0x10f16b),_0x374266;}static['stripUnuse'+'dColorAtta'+'chments'](_0x55f98a,_0x177fc6){if(_0x177fc6['stripUnuse'+'dColorAtta'+'chments']){const _0x5beb5a=new Map(),_0x31b62a=_0x55f98a['match'](Im);if(_0x31b62a==null||_0x31b62a['forEach'](_0x4bb57f=>{const _0x7b46e2=parseInt(_0x4bb57f['charAt'](_0x4bb57f['length']-(0x8*-0x8a+-0x179*0x9+0x1192)),0x53f+0x45f*-0x7+0x32*0x82);_0x5beb5a['set'](_0x7b46e2,(_0x5beb5a['get'](_0x7b46e2)??0x221*-0x8+-0x2e2*-0x7+-0xd*0x3e)+(-0x25*0x2a+0x4*-0x38c+0x27*0x85));}),Array['from'](_0x5beb5a['values']())['some'](_0x40beb4=>_0x40beb4===-0x254*-0xa+-0x2d5*-0x5+0x1*-0x2570)){const _0x44e9c5=_0x55f98a['split']('\x0a'),_0x199e0b=[];for(let _0x11d171=0x121*-0x21+-0x4e3+0x706*0x6;_0x11d171<_0x44e9c5['length'];_0x11d171++){const _0x4ff380=_0x44e9c5[_0x11d171]['match'](Im);if(_0x4ff380){const _0x47b52e=parseInt(_0x4ff380[0x21f8+0x2694+0x1223*-0x4]['charAt'](_0x4ff380[0x2*-0x3f8+-0x7ee+-0x2a5*-0x6]['length']-(-0x2478+-0x746+0x2bbf)),0xe1d*-0x2+-0x1a26+0x366a);if(_0x47b52e>0x153e+-0xe1e*-0x1+-0x235c&&_0x5beb5a['get'](_0x47b52e)===0x16ed+-0x26f0+0x1004*0x1)continue;}_0x199e0b['push'](_0x44e9c5[_0x11d171]);}_0x55f98a=_0x199e0b['join']('\x0a');}}return _0x55f98a;}static['stripComme'+'nts'](_0x325eb6){return _0x325eb6['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1');}static['processArr'+'aySize'](_0x5e0962,_0x558f58){return _0x5e0962!==null&&_0x558f58['forEach']((_0x2267ee,_0x1c3022)=>{_0x5e0962=_0x5e0962['replace'](new RegExp('\x5c['+_0x1c3022+'\x5c]','g'),'['+_0x2267ee+']');}),_0x5e0962;}static['injectDefi'+'nes'](_0x2241b8,_0x191ea0){if(_0x2241b8!==null&&_0x191ea0['size']>-0x2dd+0x1005+-0xd28){const _0x2fc3b1=_0x2241b8['split']('\x0a');_0x191ea0['forEach']((_0x15aa21,_0xe2f712)=>{const _0x54c2f5=new RegExp(_0xe2f712,'g');for(let _0x16c51f=0x1a5f*0x1+0x8*0x3a0+-0x1b*0x20d;_0x16c51f<_0x2fc3b1['length'];_0x16c51f++)_0x2fc3b1[_0x16c51f]['includes']('#')||(_0x2fc3b1[_0x16c51f]=_0x2fc3b1[_0x16c51f]['replace'](_0x54c2f5,_0x15aa21));}),_0x2241b8=_0x2fc3b1['join']('\x0a');}return _0x2241b8;}static['RemoveEmpt'+'yLines'](_0x2fb1b3){return _0x2fb1b3!==null&&(_0x2fb1b3=_0x2fb1b3['split'](/\r?\n/)['map'](_0x55e44d=>_0x55e44d['trim']()===''?'':_0x55e44d)['join']('\x0a'),_0x2fb1b3=_0x2fb1b3['replace'](/(\n\n){3,}/g,'\x0a\x0a')),_0x2fb1b3;}static['_preproces'+'s'](_0x3b00ae,_0x224106=new Map(),_0x1a7231,_0x121626,_0x288840){var _0x3f0dc9;const _0x5123a8=_0x3b00ae,_0x4c67bf=[];let _0x1ed386=!(0x9c2+-0x23*0x45+-0x52),_0x65af5b;for(;(_0x65af5b=Os['exec'](_0x3b00ae))!==null&&!_0x1ed386;){const _0x479528=_0x65af5b[-0x117e+0x19b5+-0x2*0x41b];switch(_0x479528){case'define':{pd['lastIndex']=_0x65af5b['index'];const _0x47d0fe=pd['exec'](_0x3b00ae);w['assert'](_0x47d0fe,'Invalid\x20['+_0x479528+']:\x20'+_0x3b00ae['substring'](_0x65af5b['index'],_0x65af5b['index']+(-0x3*-0x73+0x224+0x1*-0x319))+'...'),_0x1ed386||(_0x1ed386=_0x47d0fe===null);const _0x527c67=_0x47d0fe[0x17*-0x1f+-0x37+0x301];Dm['lastIndex']=_0x47d0fe['index'];const _0x399538=Dm['exec'](_0x527c67)[0x11b1*0x1+-0x2483+-0x646*-0x3];let _0x3f7c4c=_0x527c67['substring'](_0x399538['length'])['trim']();_0x3f7c4c===''&&(_0x3f7c4c='true');const _0x5a8dd7=Lt['_keep'](_0x4c67bf);let _0x5b1153=_0x288840;if(_0x5a8dd7){const _0x3f3db4=_0x399538['startsWith']('{')&&_0x399538['endsWith']('}');_0x3f3db4&&(_0x5b1153=!(0x10f*0x7+0xd1f+-0x1488)),_0x3f3db4?_0x1a7231['set'](_0x399538,_0x3f7c4c):_0x224106['set'](_0x399538,_0x3f7c4c),_0x5b1153&&(_0x3b00ae=_0x3b00ae['substring'](-0x998+-0xf6*-0xb+-0xfa,_0x47d0fe['index']-(-0x22a+-0x13a3*-0x1+0x4*-0x45e))+_0x3b00ae['substring'](pd['lastIndex']),Os['lastIndex']=_0x47d0fe['index']-(0xc4d+0x72b+-0x21*0x97));}w['trace'](Pr,_0x479528+':\x20['+_0x399538+']\x20'+_0x3f7c4c+'\x20'+(_0x5a8dd7?'':'IGNORED')),_0x5b1153||(Os['lastIndex']=_0x47d0fe['index']+_0x47d0fe[0x1262+-0x1ba5+0x1*0x943]['length']);break;}case'undef':{md['lastIndex']=_0x65af5b['index'];const _0x55d28f=md['exec'](_0x3b00ae),_0x311c07=_0x55d28f[-0x42*-0x57+-0x12a3*-0x1+0xa44*-0x4]['trim'](),_0x16c6f3=Lt['_keep'](_0x4c67bf);_0x16c6f3&&(_0x224106['delete'](_0x311c07),_0x288840&&(_0x3b00ae=_0x3b00ae['substring'](-0x1bac+-0x35f*0x1+0x1f0b,_0x55d28f['index']-(0x171+0x54d*0x1+-0x6bd))+_0x3b00ae['substring'](md['lastIndex']),Os['lastIndex']=_0x55d28f['index']-(0x160*-0x8+0xc2b+-0x12a))),w['trace'](Pr,_0x479528+':\x20['+_0x311c07+']\x20'+(_0x16c6f3?'':'IGNORED')),_0x288840||(Os['lastIndex']=_0x55d28f['index']+_0x55d28f[0x23*0x53+-0x1189*-0x1+0x1ce2*-0x1]['length']);break;}case'extension':{Mm['lastIndex']=_0x65af5b['index'];const _0x3d7947=Mm['exec'](_0x3b00ae);if(w['assert'](_0x3d7947,'Invalid\x20['+_0x479528+']:\x20'+_0x3b00ae['substring'](_0x65af5b['index'],_0x65af5b['index']+(-0x1*-0x163c+-0xa7*-0x6+-0x19c2))+'...'),_0x1ed386||(_0x1ed386=_0x3d7947===null),_0x3d7947){const _0xb8d08b=_0x3d7947[-0x9*-0x14b+-0x14a9*0x1+0x907],_0x4ca0c2=Lt['_keep'](_0x4c67bf);_0x4ca0c2&&_0x224106['set'](_0xb8d08b,'true'),w['trace'](Pr,_0x479528+':\x20['+_0xb8d08b+']\x20'+(_0x4ca0c2?'':'IGNORED'));}Os['lastIndex']=_0x3d7947['index']+_0x3d7947[0x1ce2*-0x1+0x8*0x418+-0x3de]['length'];break;}case'ifdef':case'ifndef':case'if':{_d['lastIndex']=_0x65af5b['index'];const _0x85d53c=_d['exec'](_0x3b00ae),_0x4b9efa=_0x85d53c[0x1f21+-0x22e2+0x3c3],_0x391332=Lt['evaluate'](_0x4b9efa,_0x224106);_0x1ed386||(_0x1ed386=_0x391332['error']);let _0x450827=_0x391332['result'];_0x479528==='ifndef'&&(_0x450827=!_0x450827),_0x4c67bf['push']({'anyKeep':_0x450827,'keep':_0x450827,'start':_0x65af5b['index'],'end':_d['lastIndex']}),w['trace'](Pr,_0x479528+':\x20['+_0x4b9efa+']\x20=>\x20'+_0x450827),Os['lastIndex']=_0x85d53c['index']+_0x85d53c[-0x1a40+0x95*-0x9+0x1f7d]['length'];break;}case'endif':case'else':case'elif':{gd['lastIndex']=_0x65af5b['index'];const _0x3341ce=gd['exec'](_0x3b00ae),_0x1ded36=_0x4c67bf['pop']();if(!_0x1ded36){console['error']('Shader\x20pre'+'processing'+'\x20encounter'+'ed\x20\x22#'+_0x3341ce[-0x14*-0x1f4+-0x21a+-0x24f5*0x1]+('\x22\x20without\x20'+'a\x20precedin'+'g\x20#if\x20#ifd'+'ef\x20#ifndef'+'\x20while\x20pre'+'processing'+'\x20')+Lt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x3b00ae['substring'](_0x65af5b['index'],_0x65af5b['index']+(-0x87b+0x24e3+-0x1c04))+'...',{'source':_0x5123a8}),_0x1ed386=!(0x135c+-0x119f+-0x1bd);continue;}const _0x1d2ac1=_0x1ded36['keep']?_0x3b00ae['substring'](_0x1ded36['end'],_0x65af5b['index']):'';w['trace'](Pr,_0x479528+(':\x20[previou'+'s\x20block]\x20='+'>\x20')+(_0x1d2ac1!=='')),_0x3b00ae=_0x3b00ae['substring'](-0x2d*0xc1+-0x5*0x2aa+0x2f3f,_0x1ded36['start'])+_0x1d2ac1+_0x3b00ae['substring'](gd['lastIndex']),Os['lastIndex']=_0x1ded36['start']+_0x1d2ac1['length'];const _0xd169ed=_0x3341ce[0x443*-0x1+-0xbe1*0x1+0x1025];if(_0xd169ed==='else'||_0xd169ed==='elif'){let _0x1142b1=!(0x2414+0x1*-0x40d+-0x2006);if(!_0x1ded36['anyKeep']){if(_0xd169ed==='else')_0x1142b1=!_0x1ded36['keep'];else{const _0x465840=Lt['evaluate'](_0x3341ce[-0xbe*0x2e+-0x3ae+-0x10d*-0x24],_0x224106);_0x1142b1=_0x465840['result'],_0x1ed386||(_0x1ed386=_0x465840['error']);}}_0x4c67bf['push']({'anyKeep':_0x1ded36['anyKeep']||_0x1142b1,'keep':_0x1142b1,'start':Os['lastIndex'],'end':Os['lastIndex']}),w['trace'](Pr,_0x479528+':\x20['+_0x3341ce[0xb5*0xd+0x117d+0x1aac*-0x1]+']\x20=>\x20'+_0x1142b1);}break;}case'include':{Sd['lastIndex']=_0x65af5b['index'];const _0xa9504=Sd['exec'](_0x3b00ae);if(_0x1ed386||(_0x1ed386=_0xa9504===null),!_0xa9504){w['assert'](_0xa9504,'Invalid\x20['+_0x479528+(']\x20while\x20pr'+'eprocessin'+'g\x20')+Lt['sourceName']+':\x0a'+_0x3b00ae['substring'](_0x65af5b['index'],_0x65af5b['index']+(-0x6d9*-0x1+0x1*-0x1025+0x8*0x136))+'...'),_0x1ed386=!(0x9ff+-0x1*-0x952+0x1*-0x1351);continue;}const _0x24b642=_0xa9504[-0xc51*0x1+-0xbca+0x181c]['trim'](),_0x548b97=(_0x3f0dc9=_0xa9504[0x1311+0x1d47+-0x3056])==null?void(-0x2*-0x9c5+0x2d7*0x3+-0x1c0f):_0x3f0dc9['trim'](),_0x21d769=Lt['_keep'](_0x4c67bf);if(_0x21d769){let _0x43bf57=_0x121626==null?void(-0x3c3+0xad6+-0x713*0x1):_0x121626['get'](_0x24b642);if(_0x43bf57!==void(0x1*0x92f+0x308*0x1+-0x1*0xc37)){if(_0x43bf57=this['stripComme'+'nts'](_0x43bf57),_0x548b97){const _0x2bfefd=_0x224106['get'](_0x548b97),_0x40f2bb=parseFloat(_0x2bfefd);if(Number['isInteger'](_0x40f2bb)){let _0x4b3a93='';for(let _0x2da1a6=-0xb95+-0x1e70+0x2a05;_0x2da1a6<_0x40f2bb;_0x2da1a6++)_0x4b3a93+=_0x43bf57['replace'](aT,String(_0x2da1a6));_0x43bf57=_0x4b3a93;}else console['error']('Include\x20Co'+'unt\x20identi'+'fier\x20\x22'+_0x548b97+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Lt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x3b00ae['substring'](_0x65af5b['index'],_0x65af5b['index']+(0x1a9c+-0x1c91+0x259*0x1))+'...',{'originalSource':_0x5123a8,'source':_0x3b00ae}),_0x1ed386=!(-0x1ff1+-0x5*-0x265+0x13f8);}_0x3b00ae=_0x3b00ae['substring'](-0xe74+-0x1*-0xc17+0x25d,_0xa9504['index']-(-0xde3+-0x22cd+0x30b1))+_0x43bf57+_0x3b00ae['substring'](Sd['lastIndex']),Os['lastIndex']=_0xa9504['index']-(-0x1*0x231d+-0x13b5+-0x191*-0x23);}else{console['error']('Include\x20\x22'+_0x24b642+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Lt['sourceName'],{'originalSource':_0x5123a8,'source':_0x3b00ae}),_0x1ed386=!(-0x2395+-0x2600+-0x5a9*-0xd);continue;}}w['trace'](Pr,_0x479528+':\x20['+_0x24b642+']\x20'+(_0x21d769?'':'IGNORED'));break;}}}return _0x4c67bf['length']>0xb*-0x20c+0x9*0x36f+-0x13*0x71&&(console['error']('Shader\x20pre'+'processing'+'\x20reached\x20t'+'he\x20end\x20of\x20'+'the\x20file\x20w'+'ithout\x20enc'+'ountering\x20'+'the\x20necess'+'ary\x20#endif'+'\x20to\x20close\x20'+'a\x20precedin'+'g\x20#if,\x20#if'+'def,\x20or\x20#i'+'fndef\x20bloc'+'k.\x20'+Lt['sourceName']),_0x1ed386=!(-0x1449+-0x6*0x18d+0x1d97)),_0x1ed386?(console['error']('Failed\x20to\x20'+'preprocess'+'\x20shader:\x20',{'source':_0x5123a8}),null):_0x3b00ae;}static['_keep'](_0x5d497b){for(let _0xb6c12b=-0xf3*-0x19+-0xe8b+0xe*-0xa8;_0xb6c12b<_0x5d497b['length'];_0xb6c12b++)if(!_0x5d497b[_0xb6c12b]['keep'])return!(0x5b4+-0x493+0x8*-0x24);return!(0xfac+-0x10eb+0x13f);}static['evaluateAt'+'omicExpres'+'sion'](_0x3e1929,_0x5286f9){let _0x49b94b=!(0xc47+-0x15*0x5+-0x1*0xbdd);_0x3e1929=_0x3e1929['trim']();let _0x25d84a=!(0x33*-0x27+0x496*0x8+-0x1cea);if(_0x3e1929==='true')return{'result':!(-0x3af+-0x1fc3+-0x15d*-0x1a),'error':_0x49b94b};if(_0x3e1929==='false')return{'result':!(0xb*-0x2a7+0xa0c+0x1322),'error':_0x49b94b};const _0xe3b0e4=eT['exec'](_0x3e1929);if(_0xe3b0e4){_0x25d84a=_0xe3b0e4[0xed7+0x1*0x21bd+0x3093*-0x1]==='!',_0x3e1929=_0xe3b0e4[0x1e9b+-0x1b4c+-0x34d]['trim']();const _0x4bf00e=_0x5286f9['has'](_0x3e1929);return{'result':_0x25d84a?!_0x4bf00e:_0x4bf00e,'error':_0x49b94b};}const _0x579a45=iT['exec'](_0x3e1929);if(_0x579a45){const _0x349919=_0x5286f9['get'](_0x579a45[-0x1*0x254f+-0x20e7+0x4637]['trim']())??_0x579a45[0x1*0x1123+-0x102c+-0xf6]['trim'](),_0x4f353d=_0x5286f9['get'](_0x579a45[0x6b4+-0x182b*0x1+0x8bd*0x2]['trim']())??_0x579a45[-0xcf1+-0x10f0+-0x2*-0xef2]['trim'](),_0x230950=_0x579a45[-0x1ca0+-0x13d0+0x12*0x2b1]['trim']();let _0x44adb8=!(0xbb2+-0x1*-0x15f1+-0x21a2);switch(_0x230950){case'==':_0x44adb8=_0x349919===_0x4f353d;break;case'!=':_0x44adb8=_0x349919!==_0x4f353d;break;case'<':_0x44adb8=_0x349919<_0x4f353d;break;case'<=':_0x44adb8=_0x349919<=_0x4f353d;break;case'>':_0x44adb8=_0x349919>_0x4f353d;break;case'>=':_0x44adb8=_0x349919>=_0x4f353d;break;default:_0x49b94b=!(0x17b*0x13+0x217c+-0x3d9d);}return{'result':_0x44adb8,'error':_0x49b94b};}return{'result':_0x5286f9['has'](_0x3e1929),'error':_0x49b94b};}static['processPar'+'entheses'](_0x417edb,_0x48a9de){let _0xd2afc8=!(0x43e*-0x2+0xd43+-0x5e*0xd),_0x2032e1=_0x417edb['trim']();for(;_0x2032e1['startsWith']('(')&&_0x2032e1['endsWith'](')');){let _0x295be0=-0x21d*-0xb+0x1bf7+-0x3336,_0x47c2e0=!(0x2*0x113f+-0xcdc+-0xd*0x1aa);for(let _0xfca846=-0x1*0x1003+-0x154+0x1157;_0xfca846<_0x2032e1['length']-(0x1fe8+0x6*0x3a0+-0x35a7);_0xfca846++)if(_0x2032e1[_0xfca846]==='(')_0x295be0++;else{if(_0x2032e1[_0xfca846]===')'&&(_0x295be0--,_0x295be0===0x1cae*-0x1+0x2c*-0x50+0x2a6e)){_0x47c2e0=!(0x2*-0x10a9+0x11d9+-0x7bd*-0x2);break;}}if(_0x47c2e0)_0x2032e1=_0x2032e1['slice'](-0x5*0x679+0x192d+-0x107*-0x7,-(0x24f6+-0x1*0x17b3+-0xd42))['trim']();else break;}for(;;){let _0x3c6557=!(0x2*0xd21+0x23b*0x11+0x100b*-0x4),_0x2ed1e9=-0x12b+-0x2625+0x2750,_0x253de1=-0x21*-0x2e+-0x11cc+0xbde,_0x1e3ecc=-(0x140e+0x1*0x95f+-0x1d6c),_0x5cd350=-(-0x1e69+0x16aa+0x1*0x7c0),_0x47e0fb=-0x171a+0xcf+0x1b7*0xd;for(let _0x40fad2=0x1192+0x3*0x5a7+0x1*-0x2287;_0x40fad2<_0x2032e1['length'];_0x40fad2++)if(_0x2032e1[_0x40fad2]==='('){const _0x5e4249=_0x2032e1['substring'](-0x12b8+-0x199*0x17+0x3777,_0x40fad2);sT['test'](_0x5e4249)?_0x47e0fb++:_0x47e0fb===0x692+0x10f*-0x17+-0x6f*-0x29&&(_0x2ed1e9++,_0x2ed1e9>_0x253de1&&(_0x253de1=_0x2ed1e9,_0x1e3ecc=_0x40fad2),_0x3c6557=!(-0x1723+-0x1e1a+0x353d));}else _0x2032e1[_0x40fad2]===')'&&(_0x47e0fb>0x2*0x115b+0x22d7+-0x458d?_0x47e0fb--:_0x2ed1e9>-0x15c9*0x1+0x20e0+-0xb17&&(_0x2ed1e9===_0x253de1&&_0x1e3ecc!==-(-0x1ff*-0x9+-0x251a+-0x1*-0x1324)&&(_0x5cd350=_0x40fad2),_0x2ed1e9--));if(!_0x3c6557||_0x1e3ecc===-(-0x9e2+0x3*0x97b+0x2*-0x947)||_0x5cd350===-(-0x1*0x33e+0x1*0x56f+-0x8*0x46))break;const _0x59e189=_0x2032e1['substring'](_0x1e3ecc+(0x2483*0x1+0x23*-0xe5+-0x533),_0x5cd350),{result:_0x30690d,error:_0x5e07d6}=Lt['evaluate'](_0x59e189,_0x48a9de);_0xd2afc8=_0xd2afc8||_0x5e07d6,_0x2032e1=_0x2032e1['substring'](0x1b27+0x127*-0x1c+-0xb*-0x77,_0x1e3ecc)+(_0x30690d?'true':'false')+_0x2032e1['substring'](_0x5cd350+(0x10b+-0x1326+-0x90e*-0x2));}return{'expression':_0x2032e1,'error':_0xd2afc8};}static['evaluate'](_0x169dca,_0x360b8){const _0x321b3b=rT['exec'](_0x169dca)===null;w['assert'](_0x321b3b,'Resolving\x20'+'expression'+'\x20like\x20this'+'\x20is\x20not\x20su'+'pported:\x20'+_0x169dca);let _0x47eed4=_0x169dca,_0x5b1a29=!(-0x2398+-0xd57+0x30f0);if(_0x169dca['replace'](tT,'')['indexOf']('(')!==-(0x43e+-0x86f*0x3+0x1*0x1510)){const _0x1d35a1=Lt['processPar'+'entheses'](_0x169dca,_0x360b8);_0x47eed4=_0x1d35a1['expression'],_0x5b1a29=_0x1d35a1['error'];}if(_0x5b1a29)return w['log']('Parenthesi'+'s\x20parsing\x20'+'error\x20in\x20e'+'xpression:'+'\x20\x22'+_0x169dca+'\x22'),{'result':!(-0x4*0x18a+-0xf90+0x15b9),'error':!(-0x2*-0xc6d+0x75b+-0x2035)};const _0x2c5b41=_0x47eed4['split']('||');for(const _0x468039 of _0x2c5b41){const _0x2104b8=_0x468039['split']('&&');let _0x3e2648=!(0x44b+-0x4f*0xd+-0x3*0x18);for(const _0xc03ecc of _0x2104b8){const {result:_0x1a1ca7,error:_0x4ac0e0}=Lt['evaluateAt'+'omicExpres'+'sion'](_0xc03ecc['trim'](),_0x360b8);if(!_0x1a1ca7||_0x4ac0e0){_0x3e2648=!(-0x1b1*0x7+-0x1852+0xc0e*0x3);break;}}if(_0x3e2648)return{'result':!(0x1*0x241+-0x23c7+0x2186),'error':!_0x321b3b};}return{'result':!(0x3e3+0x59*-0x20+-0x67*-0x12),'error':!_0x321b3b};}};h(Lt,'sourceName');let bo=Lt;const ay='\x0a\x0a#ifndef\x20'+'outType_0\x0a'+'#define\x20ou'+'tType_0\x20ve'+'c4\x0a#endif\x0a'+'\x0alayout(lo'+'cation\x20=\x200'+')\x20out\x20high'+'p\x20outType_'+'0\x20pcFragCo'+'lor0;\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_1\x0a'+'layout(loc'+'ation\x20=\x201)'+'\x20out\x20highp'+'\x20outType_1'+'\x20pcFragCol'+'or1;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_2\x0alayo'+'ut(locatio'+'n\x20=\x202)\x20out'+'\x20highp\x20out'+'Type_2\x20pcF'+'ragColor2;'+'\x0a#endif\x0a\x0a#'+'if\x20COLOR_A'+'TTACHMENT_'+'3\x0alayout(l'+'ocation\x20=\x20'+'3)\x20out\x20hig'+'hp\x20outType'+'_3\x20pcFragC'+'olor3;\x0a#en'+'dif\x0a\x0a#if\x20C'+'OLOR_ATTAC'+'HMENT_4\x0ala'+'yout(locat'+'ion\x20=\x204)\x20o'+'ut\x20highp\x20o'+'utType_4\x20p'+'cFragColor'+'4;\x0a#endif\x0a'+'\x0a#if\x20COLOR'+'_ATTACHMEN'+'T_5\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0a#'+'endif\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_6\x0a'+'layout(loc'+'ation\x20=\x206)'+'\x20out\x20highp'+'\x20outType_6'+'\x20pcFragCol'+'or6;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_7\x0alayo'+'ut(locatio'+'n\x20=\x207)\x20out'+'\x20highp\x20out'+'Type_7\x20pcF'+'ragColor7;'+'\x0a#endif\x0a\x0a#'+'define\x20gl_'+'FragColor\x20'+'pcFragColo'+'r0\x0a\x0a#defin'+'e\x20varying\x20'+'in\x0a\x0a#defin'+'e\x20texture2'+'D\x20texture\x0a'+'#define\x20te'+'xture2DBia'+'s\x20texture\x0a'+'#define\x20te'+'xtureCube\x20'+'texture\x0a#d'+'efine\x20text'+'ure2DProj\x20'+'texturePro'+'j\x0a#define\x20'+'texture2DL'+'od\x20texture'+'Lod\x0a#defin'+'e\x20texture2'+'DProjLod\x20t'+'extureProj'+'Lod\x0a#defin'+'e\x20textureC'+'ubeLod\x20tex'+'tureLod\x0a#d'+'efine\x20text'+('ure2DGrad\x20'+'textureGra'+'d\x0a#define\x20'+'texture2DP'+'rojGrad\x20te'+'xtureProjG'+'rad\x0a#defin'+'e\x20textureC'+'ubeGrad\x20te'+'xtureGrad\x0a'+'#define\x20ut'+'exture2D\x20t'+'exture\x0a#de'+'fine\x20itext'+'ure2D\x20text'+'ure\x0a\x0a//\x20de'+'precated\x20d'+'efines\x0a#de'+'fine\x20textu'+'re2DLodEXT'+'\x20texture2D'+'LodEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DLod_ins'+'tead\x0a#defi'+'ne\x20texture'+'2DProjLodE'+'XT\x20texture'+'2DProjLodE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DP'+'rojLod\x0a#de'+'fine\x20textu'+'reCubeLodE'+'XT\x20texture'+'CubeLodEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeL'+'od_instead'+'\x0a#define\x20t'+'exture2DGr'+'adEXT\x20text'+'ure2DGradE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DG'+'rad_instea'+'d\x0a#define\x20'+'texture2DP'+'rojGradEXT'+'\x20texture2D'+'ProjGradEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DPr'+'ojGrad_ins'+'tead\x0a#defi'+'ne\x20texture'+'CubeGradEX'+'T\x20textureC'+'ubeGradEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeG'+'rad_instea'+'d\x0a\x0a//\x20samp'+'le\x20shadows'+'\x20using\x20tex'+'tureGrad\x20t'+'o\x20remove\x20d'+'erivatives'+'\x20in\x20the\x20dy'+'namic\x20loop'+'s\x20(which\x20a'+'re\x20used\x20by'+'\x0a//\x20cluste'+'red\x20lighti'+'ng)\x20-\x20as\x20D'+'irectX\x20sha'+'der\x20compil'+'er\x20tries\x20t'+'o\x20unroll\x20t'+'he\x20loops\x20a'+'nd\x20takes\x20l'+'ong\x20time\x0a/'+'/\x20to\x20compi'+'le\x20the\x20sha'+'der.\x20Using'+'\x20textureLo'+'d\x20would\x20be'+'\x20even\x20bett')+('er,\x20but\x20We'+'bGl\x20does\x20n'+'ot\x20transla'+'te\x20it\x20to\x0a/'+'/\x20lod\x20inst'+'ruction\x20fo'+'r\x20DirectX\x20'+'correctly\x20'+'and\x20uses\x20S'+'ampleCmp\x20i'+'nstead\x20of\x20'+'SampleCmpL'+'evelZero\x20o'+'r\x20similar.'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureG'+'rad(res,\x20u'+'v,\x20vec2(1,'+'\x201),\x20vec2('+'1,\x201))\x0a\x0a//'+'\x20pass\x20/\x20ac'+'cept\x20shado'+'w\x20map\x20or\x20t'+'exture\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20on\x20webgl'+'\x20this\x20is\x20s'+'imply\x20pass'+'ed\x20as\x20is\x0a/'+'/\x20but\x20this'+'\x20is\x20needed'+'\x20for\x20WebGP'+'U\x0a#define\x20'+'SHADOWMAP_'+'PASS(name)'+'\x20name\x0a#def'+'ine\x20SHADOW'+'MAP_ACCEPT'+'(name)\x20sam'+'pler2DShad'+'ow\x20name\x0a#d'+'efine\x20TEXT'+'URE_PASS(n'+'ame)\x20name\x0a'+'#define\x20TE'+'XTURE_ACCE'+'PT(name)\x20s'+'ampler2D\x20n'+'ame\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP(name)\x20h'+'ighp\x20sampl'+'er2D\x20name\x0a'+'\x0a#define\x20G'+'L2\x0a'),ny='\x0a#define\x20a'+'ttribute\x20i'+'n\x0a#define\x20'+'varying\x20ou'+'t\x0a#define\x20'+'texture2D\x20'+'texture\x0a#d'+'efine\x20utex'+'ture2D\x20tex'+'ture\x0a#defi'+'ne\x20itextur'+'e2D\x20textur'+'e\x0a#define\x20'+'GL2\x0a#defin'+'e\x20VERTEXSH'+'ADER\x0a\x0a#def'+'ine\x20TEXTUR'+'E_PASS(nam'+'e)\x20name\x0a#d'+'efine\x20TEXT'+'URE_ACCEPT'+'(name)\x20sam'+'pler2D\x20nam'+'e\x0a#define\x20'+'TEXTURE_AC'+'CEPT_HIGHP'+'(name)\x20hig'+'hp\x20sampler'+'2D\x20name\x0a',oy='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#ifnde'+'f\x20outType_'+'0\x0a#define\x20'+'outType_0\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_1\x0a'+'#define\x20ou'+'tType_1\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_2\x0a#d'+'efine\x20outT'+'ype_2\x20vec4'+'\x0a#endif\x0a#i'+'fndef\x20outT'+'ype_3\x0a#def'+'ine\x20outTyp'+'e_3\x20vec4\x0a#'+'endif\x0a#ifn'+'def\x20outTyp'+'e_4\x0a#defin'+'e\x20outType_'+'4\x20vec4\x0a#en'+'dif\x0a#ifnde'+'f\x20outType_'+'5\x0a#define\x20'+'outType_5\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_6\x0a'+'#define\x20ou'+'tType_6\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_7\x0a#d'+'efine\x20outT'+'ype_7\x20vec4'+'\x0a#endif\x0a\x0al'+'ayout(loca'+'tion\x20=\x200)\x20'+'out\x20highp\x20'+'outType_0\x20'+'pcFragColo'+'r0;\x0alayout'+'(location\x20'+'=\x201)\x20out\x20h'+'ighp\x20outTy'+'pe_1\x20pcFra'+'gColor1;\x0al'+'ayout(loca'+'tion\x20=\x202)\x20'+'out\x20highp\x20'+'outType_2\x20'+'pcFragColo'+'r2;\x0alayout'+'(location\x20'+'=\x203)\x20out\x20h'+'ighp\x20outTy'+'pe_3\x20pcFra'+'gColor3;\x0al'+'ayout(loca'+'tion\x20=\x204)\x20'+'out\x20highp\x20'+'outType_4\x20'+'pcFragColo'+'r4;\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0al'+'ayout(loca'+'tion\x20=\x206)\x20'+'out\x20highp\x20'+'outType_6\x20'+'pcFragColo'+'r6;\x0alayout'+'(location\x20'+'=\x207)\x20out\x20h'+'ighp\x20outTy'+'pe_7\x20pcFra'+'gColor7;\x0a\x0a'+'#define\x20gl'+'_FragColor'+'\x20pcFragCol'+'or0\x0a\x0a#defi'+'ne\x20texture'+'2D(res,\x20uv'+')\x20texture('+'sampler2D('+('res,\x20res\x20#'+'#\x20_sampler'+'),\x20uv)\x0a#de'+'fine\x20textu'+'re2DBias(r'+'es,\x20uv,\x20bi'+'as)\x20textur'+'e(sampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv,\x20b'+'ias)\x0a#defi'+'ne\x20texture'+'2DLod(res,'+'\x20uv,\x20lod)\x20'+'textureLod'+'(sampler2D'+'(res,\x20res\x20'+'##\x20_sample'+'r),\x20uv,\x20lo'+'d)\x0a#define'+'\x20textureCu'+'be(res,\x20uv'+')\x20texture('+'samplerCub'+'e(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a#'+'define\x20tex'+'tureCubeLo'+'d(res,\x20uv,'+'\x20lod)\x20text'+'ureLod(sam'+'plerCube(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x20lod)'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureL'+'od(sampler'+'2DShadow(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x200.0)'+'\x0a#define\x20i'+'texture2D('+'res,\x20uv)\x20t'+'exture(isa'+'mpler2D(re'+'s,\x20res\x20##\x20'+'_sampler),'+'\x20uv)\x0a#defi'+'ne\x20utextur'+'e2D(res,\x20u'+'v)\x20texture'+'(usampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a\x0a'+'//\x20depreca'+'ted\x20define'+'s\x0a#define\x20'+'texture2DL'+'odEXT\x20text'+'ure2DLodEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DLo'+'d_instead\x0a'+'#define\x20te'+'xture2DPro'+'jLodEXT\x20te'+'xture2DPro'+'jLodEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DProjLo'+'d\x0a#define\x20'+'textureCub'+'eLodEXT\x20te'+'xtureCubeL'+'odEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeLod_in'+'stead\x0a#def'+'ine\x20textur'+'e2DGradEXT'+'\x20texture2D'+'GradEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DGrad_i'+'nstead\x0a#de')+('fine\x20textu'+'re2DProjGr'+'adEXT\x20text'+'ure2DProjG'+'radEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DProjGra'+'d_instead\x0a'+'#define\x20te'+'xtureCubeG'+'radEXT\x20tex'+'tureCubeGr'+'adEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeGrad_i'+'nstead\x0a\x0a//'+'\x20TODO:\x20imp'+'lement\x20oth'+'er\x20texture'+'\x20sampling\x20'+'macros\x0a//\x20'+'#define\x20te'+'xture2DPro'+'j\x20textureP'+'roj\x0a//\x20#de'+'fine\x20textu'+'re2DProjLo'+'d\x20textureP'+'rojLod\x0a//\x20'+'#define\x20te'+'xture2DGra'+'d\x20textureG'+'rad\x0a//\x20#de'+'fine\x20textu'+'re2DProjGr'+'ad\x20texture'+'ProjGrad\x0a/'+'/\x20#define\x20'+'textureCub'+'eGrad\x20text'+'ureGrad\x0a\x0a/'+'/\x20pass\x20/\x20a'+'ccept\x20shad'+'ow\x20map\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20passes\x20b'+'oth\x20the\x20te'+'xture\x20as\x20w'+'ell\x20as\x20sam'+'pler\x0a//\x20as'+'\x20the\x20combi'+'ned\x20sample'+'r\x20can\x20be\x20o'+'nly\x20create'+'d\x20at\x20a\x20poi'+'nt\x20of\x20use\x0a'+'#define\x20SH'+'ADOWMAP_PA'+'SS(name)\x20n'+'ame,\x20name\x20'+'##\x20_sample'+'r\x0a#define\x20'+'SHADOWMAP_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'PASS(name)'+'\x20name,\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP\x20TEXTURE'+'_ACCEPT\x0a\x0a#'+'define\x20GL2'+'\x0a#define\x20W'+'EBGPU\x0a'),ly='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#defin'+'e\x20texture2'+'D(res,\x20uv)'+'\x20texture(s'+'ampler2D(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv)\x0a#def'+'ine\x20itextu'+'re2D(res,\x20'+'uv)\x20textur'+'e(isampler'+'2D(res,\x20re'+'s\x20##\x20_samp'+'ler),\x20uv)\x0a'+'#define\x20ut'+'exture2D(r'+'es,\x20uv)\x20te'+'xture(usam'+'pler2D(res'+',\x20res\x20##\x20_'+'sampler),\x20'+'uv)\x0a\x0a#defi'+'ne\x20TEXTURE'+'_PASS(name'+')\x20name,\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT(na'+'me)\x20textur'+'e2D\x20name,\x20'+'sampler\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT_HI'+'GHP\x20TEXTUR'+'E_ACCEPT\x0a\x0a'+'#define\x20GL'+'2\x0a#define\x20'+'WEBGPU\x0a#de'+'fine\x20VERTE'+'XSHADER\x0a#d'+'efine\x20gl_V'+'ertexID\x20gl'+'_VertexInd'+'ex\x0a#define'+'\x20gl_Instan'+'ceID\x20gl_In'+'stanceInde'+'x\x0a',cy='\x0a',hy='\x0a#define\x20V'+'ERTEXSHADE'+'R\x0a',Lm='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20to'+'\x20sample\x20sc'+'ene\x20grab\x20t'+'extures\x0ave'+'c2\x20getGrab'+'ScreenPos('+'vec4\x20clipP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x200.5;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'WEBGPU\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv.y\x20'+'=\x201.0\x20-\x20uv'+'.y;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a\x0a//\x20con'+'vert\x20uv\x20co'+'ordinates\x20'+'to\x20sample\x20'+'image\x20effe'+'ct\x20texture'+'\x20(render\x20t'+'arget\x20text'+'ure\x20render'+'ed\x20without'+'\x0a//\x20forwar'+'d\x20renderer'+'\x20which\x20doe'+'s\x20the\x20flip'+'\x20in\x20the\x20pr'+'ojection\x20m'+'atrix)\x0avec'+'2\x20getImage'+'EffectUV(v'+'ec2\x20uv)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv.y'+'\x20=\x201.0\x20-\x20u'+'v.y;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20uv'+';\x0a}\x0a',Rm='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20fo'+'r\x20sampling'+'\x20scene\x20gra'+'b\x20textures'+'\x0afn\x20getGra'+'bScreenPos'+'(clipPos:\x20'+'vec4<f32>)'+'\x20->\x20vec2<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'var\x20uv:\x20ve'+'c2<f32>\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x20vec2<f3'+'2>(0.5);\x0a\x20'+'\x20\x20\x20uv.y\x20=\x20'+'1.0\x20-\x20uv.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'//\x20convert'+'\x20uv\x20coordi'+'nates\x20to\x20s'+'ample\x20imag'+'e\x20effect\x20t'+'exture\x20(re'+'nder\x20targe'+'t\x20texture\x20'+'rendered\x20w'+'ithout\x0a//\x20'+'forward\x20re'+'nderer\x20whi'+'ch\x20does\x20th'+'e\x20flip\x20in\x20'+'the\x20projec'+'tion\x20matri'+'x)\x0afn\x20getI'+'mageEffect'+'UV(uv:\x20vec'+'2<f32>)\x20->'+'\x20vec2<f32>'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20modifiedU'+'V:\x20vec2<f3'+'2>\x20=\x20uv;\x0a\x20'+'\x20\x20\x20modifie'+'dUV.y\x20=\x201.'+'0\x20-\x20modifi'+'edUV.y;\x0a\x20\x20'+'\x20\x20return\x20m'+'odifiedUV;'+'\x0a}\x0a\x0a//\x20typ'+'es\x20wrapped'+'\x20in\x20size\x20a'+'ligned\x20str'+'uctures\x20to'+'\x20ensure\x20co'+'rrect\x20alig'+'nment\x20in\x20u'+'niform\x20buf'+'fer\x20arrays'+'\x0astruct\x20Wr'+'appedF32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'f32\x20}\x0astru'+'ct\x20Wrapped'+'I32\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20i32\x20}'+'\x0astruct\x20Wr'+'appedU32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'u32\x20}\x0astru'+'ct\x20Wrapped'+'Vec2F\x20{\x20@s'+'ize(16)\x20el'+'ement:\x20vec'+'2f\x20}\x0astruc'+'t\x20WrappedV'+'ec2I\x20{\x20@si'+'ze(16)\x20ele'+'ment:\x20vec2'+'i\x20}\x0astruct'+'\x20WrappedVe'+'c2U\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20vec2u'+'\x20}\x0a',nT={'vertex_position':Pe,'vertex_normal':gs,'vertex_tangent':yi,'vertex_texCoord0':is,'vertex_texCoord1':va,'vertex_texCoord2':hl,'vertex_texCoord3':dl,'vertex_texCoord4':fl,'vertex_texCoord5':ul,'vertex_texCoord6':pl,'vertex_texCoord7':ml,'vertex_color':Wt,'vertex_boneIndices':us,'vertex_boneWeights':gi};class Jt{static['createDefi'+'nition'](_0x624140,_0x38f890){w['assert'](_0x38f890),w['assert'](!_0x38f890['vertexDefi'+'nes']||_0x38f890['vertexDefi'+'nes']instanceof Map),w['assert'](!_0x38f890['vertexIncl'+'udes']||_0x38f890['vertexIncl'+'udes']instanceof Map),w['assert'](!_0x38f890['fragmentDe'+'fines']||_0x38f890['fragmentDe'+'fines']instanceof Map),w['assert'](!_0x38f890['fragmentIn'+'cludes']||_0x38f890['fragmentIn'+'cludes']instanceof Map);const _0x4d5707=_0x3150f3=>{let _0x37615c=_0x3150f3['fragmentOu'+'tputTypes']??'vec4';return Array['isArray'](_0x37615c)||(_0x37615c=[_0x37615c]),_0x37615c;},_0xe57d94=(_0x7af79b,_0x15b2ac,_0x346239,_0x2d1002)=>{const _0x51c949=_0x624140['isWebGPU']?_0x7af79b:_0x15b2ac;let _0x5a0080='';if(!_0x346239){const _0x1f420d=_0x4d5707(_0x2d1002);for(let _0x48fb9b=0x1*-0x65+-0x200e+-0xad1*-0x3;_0x48fb9b<_0x624140['maxColorAt'+'tachments'];_0x48fb9b++){_0x5a0080+='#define\x20CO'+'LOR_ATTACH'+'MENT_'+_0x48fb9b+'\x0a';const _0x175b97=_0x1f420d[_0x48fb9b]??'vec4';_0x5a0080+='#define\x20ou'+'tType_'+_0x48fb9b+'\x20'+_0x175b97+'\x0a';}}return _0x5a0080+_0x51c949;},_0x4937ab=(_0x3dc2fc,_0x19e302)=>{let _0xaeba1e='';if(!_0x3dc2fc){const _0x42e6fa=_0x4d5707(_0x19e302);for(let _0x2d5cf4=-0x1dc1+-0x4*-0x2f1+0x3*0x5ff;_0x2d5cf4<_0x624140['maxColorAt'+'tachments'];_0x2d5cf4++){const _0xb9de39=_0x42e6fa[_0x2d5cf4]??'vec4',_0x5247ef=JS['get'](_0xb9de39);w['assert'](_0x5247ef,'Unknown\x20ou'+'tput\x20type\x20'+'translatio'+'n:\x20'+_0xb9de39+'\x20->\x20'+_0x5247ef),_0xaeba1e+='alias\x20pcOu'+'tType'+_0x2d5cf4+'\x20=\x20'+_0x5247ef+';\x0a';}}return _0xaeba1e;},_0x472959=_0x38f890['name']??'Untitled';let _0xbf10a4,_0x19629d;const _0x467dca=Jt['getDefines'+'Code'](_0x624140,_0x38f890['vertexDefi'+'nes']),_0x2e60b8=Jt['getDefines'+'Code'](_0x624140,_0x38f890['fragmentDe'+'fines']);return _0x38f890['shaderLang'+'uage']===it?(_0xbf10a4='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x4937ab(!(0xa80+-0x1b04+0x97*0x1c),_0x38f890)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+hy+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Rm+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x467dca+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x38f890['vertexCode']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20'),_0x19629d='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x4937ab(!(0x18a*-0xb+0x131+0x326*0x5),_0x38f890)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+cy+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Rm+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x2e60b8+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x38f890['fragmentCo'+'de']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20')):(w['assert'](_0x38f890['vertexCode']),_0xbf10a4=Jt['versionCod'+'e'](_0x624140)+_0xe57d94(ly,ny,!(0x1fe4+-0x4a2*-0x2+0x1494*-0x2),_0x38f890)+_0x467dca+Jt['precisionC'+'ode'](_0x624140)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Lm+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Jt['getShaderN'+'ameCode'](_0x472959)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x38f890['vertexCode'],w['assert'](_0x38f890['fragmentCo'+'de']),_0x19629d=(_0x38f890['fragmentPr'+'eamble']||'')+Jt['versionCod'+'e'](_0x624140)+_0xe57d94(oy,ay,!(-0xaa+-0x489+0x534),_0x38f890)+_0x2e60b8+Jt['precisionC'+'ode'](_0x624140)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Lm+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Jt['getShaderN'+'ameCode'](_0x472959)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x38f890['fragmentCo'+'de']),{'name':_0x472959,'shaderLanguage':_0x38f890['shaderLang'+'uage']??Fe,'attributes':_0x38f890['attributes'],'vshader':_0xbf10a4,'vincludes':_0x38f890['vertexIncl'+'udes'],'fincludes':_0x38f890['fragmentIn'+'cludes'],'fshader':_0x19629d,'useTransformFeedback':_0x38f890['useTransfo'+'rmFeedback'],'meshUniformBufferFormat':_0x38f890['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x38f890['meshBindGr'+'oupFormat']};}static['getDefines'+'Code'](_0x481441,_0x2e1981){let _0x5baeec='';return _0x481441['capsDefine'+'s']['forEach']((_0x2f81aa,_0x17211b)=>{_0x5baeec+='#define\x20'+_0x17211b+'\x20'+_0x2f81aa+'\x0a';}),_0x5baeec+='\x0a',_0x2e1981==null||_0x2e1981['forEach']((_0xabcacb,_0x3a2bf6)=>{_0x5baeec+='#define\x20'+_0x3a2bf6+'\x20'+_0xabcacb+'\x0a';}),_0x5baeec+='\x0a',_0x5baeec;}static['getShaderN'+'ameCode'](_0x5d525c){return'#define\x20SH'+'ADER_NAME\x20'+_0x5d525c+'\x0a';}static['versionCod'+'e'](_0x44b23d){return _0x44b23d['isWebGPU']?'#version\x204'+'50\x0a':'#version\x203'+'00\x20es\x0a';}static['precisionC'+'ode'](_0x43e024,_0x490540){_0x490540&&_0x490540!=='highp'&&_0x490540!=='mediump'&&_0x490540!=='lowp'&&(_0x490540=null),_0x490540&&(_0x490540==='highp'&&_0x43e024['maxPrecisi'+'on']!=='highp'&&(_0x490540='mediump'),_0x490540==='mediump'&&_0x43e024['maxPrecisi'+'on']==='lowp'&&(_0x490540='lowp'));const _0x2dfb95=_0x490540||_0x43e024['precision'];return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20precisi'+'on\x20'+_0x2dfb95+('\x20float;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x2dfb95+('\x20int;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20pr'+'ecision\x20')+_0x2dfb95+('\x20usampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x2dfb95+('\x20isampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x2dfb95+('\x20sampler2D'+'Shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x2dfb95+('\x20samplerCu'+'beShadow;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20precisio'+'n\x20')+_0x2dfb95+('\x20sampler2D'+'Array;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}static['collectAtt'+'ributes'](_0x39c5d5){const _0x4d9a24={};let _0x423517=0x2502+0x12e0+-0x37e2,_0x1087c8=_0x39c5d5['indexOf']('attribute');for(;_0x1087c8>=0xea0+0x996+0xc1b*-0x2&&!(_0x1087c8>0x1f68+0x1*-0x1711+0x857*-0x1&&_0x39c5d5[_0x1087c8-(0xb7*-0x12+-0x1380+0x205f)]==='/');){let _0x15f9d5=!(-0xf*-0x21e+-0x21b+-0x1da6);if(_0x1087c8>0x291*0xe+0x25ce+-0x84*0x8f){let _0x6217d3=_0x39c5d5['lastIndexO'+'f']('\x0a',_0x1087c8);_0x6217d3=_0x6217d3!==-(-0x7c*0x7+-0x1f0d+0x2272)?_0x6217d3+(-0xf4+0x966+0x871*-0x1):-0x617*0x4+0x5f7+-0x115*-0x11,_0x39c5d5['substring'](_0x6217d3,_0x1087c8)['includes']('#')&&(_0x15f9d5=!(-0x1138+0x1b5a+-0xa22));}if(!_0x15f9d5){const _0x1a657b=_0x39c5d5['indexOf'](';',_0x1087c8),_0x1287c1=_0x39c5d5['lastIndexO'+'f']('\x20',_0x1a657b),_0x5d8669=_0x39c5d5['substring'](_0x1287c1+(0xb48+0x817+0x86*-0x25),_0x1a657b);if(_0x4d9a24[_0x5d8669])w['warn']('Attribute\x20'+'['+_0x5d8669+(']\x20already\x20'+'exists\x20whe'+'n\x20extracti'+'ng\x20the\x20att'+'ributes\x20fr'+'om\x20the\x20ver'+'tex\x20shader'+',\x20ignoring'+'.'),{'vsCode':_0x39c5d5});else{const _0x527b95=nT[_0x5d8669];_0x527b95!==void(-0xb3c*-0x2+-0x1*0x1cdf+0x95*0xb)?_0x4d9a24[_0x5d8669]=_0x527b95:(_0x4d9a24[_0x5d8669]='ATTR'+_0x423517,_0x423517++);}}_0x1087c8=_0x39c5d5['indexOf']('attribute',_0x1087c8+(-0x1a7f+0xfdf+0xaa1));}return _0x4d9a24;}}let oT=-0x260d+-0xf07*-0x1+-0x2*-0xb83;class dy{constructor(_0x23f625,_0xf9174f){h(this,'meshUnifor'+'mBufferFor'+'mat'),h(this,'meshBindGr'+'oupFormat'),h(this,'attributes',new Map());if(this['id']=oT++,this['device']=_0x23f625,this['definition']=_0xf9174f,this['name']=_0xf9174f['name']||'Untitled',this['init'](),_0xf9174f['cshader'])w['assert'](_0x23f625['supportsCo'+'mpute'],'Compute\x20sh'+'aders\x20are\x20'+'not\x20suppor'+'ted\x20on\x20thi'+'s\x20device.'),w['assert'](!_0xf9174f['vshader']&&!_0xf9174f['fshader'],'Vertex\x20and'+'\x20fragment\x20'+'shaders\x20ar'+'e\x20not\x20supp'+'orted\x20when'+'\x20creating\x20'+'a\x20compute\x20'+'shader.'),_0xf9174f['cshader']=bo['run'](_0xf9174f['cshader'],_0xf9174f['cincludes'],{'sourceName':'compute\x20sh'+'ader\x20for\x20'+this['label'],'stripDefines':!(-0x443*0x9+0x37a+0x22e1)});else{w['assert'](_0xf9174f['vshader'],'No\x20vertex\x20'+'shader\x20has'+'\x20been\x20spec'+'ified\x20when'+'\x20creating\x20'+'a\x20shader.'),w['assert'](_0xf9174f['fshader'],'No\x20fragmen'+'t\x20shader\x20h'+'as\x20been\x20sp'+'ecified\x20wh'+'en\x20creatin'+'g\x20a\x20shader'+'.'),w['call'](()=>{this['vUnmodifie'+'d']=_0xf9174f['vshader'],this['fUnmodifie'+'d']=_0xf9174f['fshader'];});const _0x46c170=_0xf9174f['shaderLang'+'uage']===it;_0xf9174f['vshader']=bo['run'](_0xf9174f['vshader'],_0xf9174f['vincludes'],{'sourceName':'vertex\x20sha'+'der\x20for\x20'+this['label'],'stripDefines':_0x46c170}),_0xf9174f['shaderLang'+'uage']===Fe&&(_0xf9174f['attributes']??(_0xf9174f['attributes']=Jt['collectAtt'+'ributes'](_0xf9174f['vshader'])));const _0x31b384=_0x23f625['isWebGL2']&&(Me['name']==='osx'||Me['name']==='ios');if(_0xf9174f['fshader']=bo['run'](_0xf9174f['fshader'],_0xf9174f['fincludes'],{'stripUnusedColorAttachments':_0x31b384,'stripDefines':_0x46c170,'sourceName':'fragment\x20s'+'hader\x20for\x20'+this['label']}),!_0xf9174f['vshader']||!_0xf9174f['fshader']){w['error']('Shader:\x20Fa'+'iled\x20to\x20cr'+'eate\x20shade'+'r\x20'+this['label']+('.\x20Vertex\x20o'+'r\x20fragment'+'\x20shader\x20so'+'urce\x20is\x20em'+'pty.'),this),this['failed']=!(-0x1f*0xd1+0x1ce7+0x73*-0x8);return;}}this['impl']=_0x23f625['createShad'+'erImpl'](this),w['trace'](im,'Alloc:\x20'+this['label']+',\x20stack:\x20'+Q['toString'](),{'instance':this});}['init'](){this['ready']=!(-0x1e65+0x140b*0x1+-0x1*-0xa5b),this['failed']=!(0x392+-0x155*0x3+-0xb*-0xa);}get['label'](){return'Shader\x20Id\x20'+this['id']+'\x20('+(this['definition']['shaderLang'+'uage']===it?'WGSL':'GLSL')+')\x20'+this['name'];}['destroy'](){w['trace'](im,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']),this['device']['onDestroyS'+'hader'](this),this['impl']['destroy'](this);}['loseContex'+'t'](){this['init'](),this['impl']['loseContex'+'t']();}['restoreCon'+'text'](){this['impl']['restoreCon'+'text'](this['device'],this);}}class lT{constructor(){h(this,'storage'),h(this,'gpuBuffer'),h(this,'offset');}}const Be=[];Be[$s]=function(_0x6bc868,_0x302ad1,_0x58163e){const _0x39a0d5=_0x6bc868['storageFlo'+'at32'];_0x39a0d5[_0x58163e]=_0x302ad1;},Be[fa]=(_0x4ae389,_0x32dfd2,_0x2f59b6)=>{const _0x4bdd9a=_0x4ae389['storageFlo'+'at32'];_0x4bdd9a[_0x2f59b6]=_0x32dfd2[0xc35+0x6b*-0x51+0x15a6],_0x4bdd9a[_0x2f59b6+(0xd32+0xa2d*-0x1+-0x304)]=_0x32dfd2[0x101+0x3*0x91e+-0x1c5a];},Be[ds]=(_0x29ab20,_0x12236a,_0x500b22)=>{const _0x45976a=_0x29ab20['storageFlo'+'at32'];_0x45976a[_0x500b22]=_0x12236a[0x9*0x2bd+0xb1e+-0x5*0x727],_0x45976a[_0x500b22+(-0x1*-0x23d4+-0x19*-0xb7+-0x4f*0xae)]=_0x12236a[-0xd3a+0xf29+-0x1ee],_0x45976a[_0x500b22+(-0xbcf*0x3+-0xc8a+0x1*0x2ff9)]=_0x12236a[-0x2328+-0x1599+-0x1*-0x38c3];},Be[An]=(_0x58f4fc,_0x484392,_0x174b65)=>{const _0x595c2e=_0x58f4fc['storageFlo'+'at32'];_0x595c2e[_0x174b65]=_0x484392[-0x1*-0x1add+-0x1bf8+0x11b*0x1],_0x595c2e[_0x174b65+(0x7ff+-0x245f+0x1c61)]=_0x484392[-0x1bf4*-0x1+0x23d*0x2+-0x206d],_0x595c2e[_0x174b65+(0x223a+-0xcca*0x2+-0x13c*0x7)]=_0x484392[-0x2f*-0x11+0x60e+-0x92b],_0x595c2e[_0x174b65+(-0x8*0x1ca+-0x21df+0x3032)]=_0x484392[0x180a*-0x1+0x5d5*-0x1+-0x1*-0x1de2];},Be[da]=function(_0x26a99b,_0x24c6a7,_0x28f614){const _0x5b3aef=_0x26a99b['storageInt'+'32'];_0x5b3aef[_0x28f614]=_0x24c6a7;},Be[ra]=function(_0x18324c,_0x30ad0d,_0x3e7218){const _0x997e0c=_0x18324c['storageInt'+'32'];_0x997e0c[_0x3e7218]=_0x30ad0d[-0x185a+-0x7*0x115+0x1fed*0x1],_0x997e0c[_0x3e7218+(0x1e38+0x1*0x1db1+-0x3be8)]=_0x30ad0d[-0x1b0d+0x2577+-0xa69];},Be[aa]=function(_0x3e8784,_0x1396e9,_0x495b61){const _0x161e9f=_0x3e8784['storageInt'+'32'];_0x161e9f[_0x495b61]=_0x1396e9[-0x224+0x149d+-0x1279*0x1],_0x161e9f[_0x495b61+(0x1d7e+0x1717*0x1+-0x14*0x2a1)]=_0x1396e9[0x12c*0x1a+0x20e7+-0x3f5e],_0x161e9f[_0x495b61+(0x2363*0x1+0x8f1*0x3+0x14bc*-0x3)]=_0x1396e9[0xa51*0x2+-0x7b8+-0x1*0xce8];},Be[na]=function(_0x15c2b9,_0x4701b9,_0x36c9b5){const _0x677fce=_0x15c2b9['storageInt'+'32'];_0x677fce[_0x36c9b5]=_0x4701b9[0x301*0x9+-0x3*0x2da+0x1*-0x127b],_0x677fce[_0x36c9b5+(-0x3*0x9a2+0x23d*-0xb+-0x326*-0x11)]=_0x4701b9[-0x116*-0xb+-0x849+-0x12*0x34],_0x677fce[_0x36c9b5+(-0x1703+-0x2*-0x379+0x1013)]=_0x4701b9[0x149c+-0x1*0x2041+0x13*0x9d],_0x677fce[_0x36c9b5+(0x644+-0x3ea+-0x257)]=_0x4701b9[-0x79*-0x24+0x30b+0x140c*-0x1];},Be[jc]=(_0x2cfca4,_0x3e6ce0,_0x4407b2)=>{const _0xb0f940=_0x2cfca4['storageFlo'+'at32'];_0xb0f940[_0x4407b2]=_0x3e6ce0[-0x1a6b+-0x211*-0x11+-0x8b6],_0xb0f940[_0x4407b2+(-0x103+-0xfa8+0x10ac)]=_0x3e6ce0[0x1e2b*0x1+0xde4+-0x2*0x1607],_0xb0f940[_0x4407b2+(-0x23ec+0xc4*0x18+0x4*0x464)]=_0x3e6ce0[-0x15ec*-0x1+0x1*-0x115+-0x14d5],_0xb0f940[_0x4407b2+(-0xa79+-0xb1+-0x7*-0x199)]=_0x3e6ce0[0x1a6+-0x2675+0xc46*0x3],_0xb0f940[_0x4407b2+(-0x8c8+-0x1*0x145a+-0x2*-0xe95)]=_0x3e6ce0[-0x2303+-0x9a9*-0x1+0x195e],_0xb0f940[_0x4407b2+(-0x1929+0x637+0x12fb*0x1)]=_0x3e6ce0[0x155b+-0x1*0x1499+0x7*-0x1b];},Be[Cn]=(_0x4e1763,_0x4c63fe,_0x1c4ff9)=>{const _0x3abbcd=_0x4e1763['storageFlo'+'at32'];_0x3abbcd[_0x1c4ff9]=_0x4c63fe[0x16b4*0x1+0x826+-0x1eda],_0x3abbcd[_0x1c4ff9+(0x7ca*-0x2+0x50b+0xa8a)]=_0x4c63fe[-0x12e+-0x635+0x764],_0x3abbcd[_0x1c4ff9+(-0x84*-0x37+0x2cf+-0x3*0xa63)]=_0x4c63fe[0x2141+0x131+0x2270*-0x1],_0x3abbcd[_0x1c4ff9+(-0x9f2+0x589*0x3+-0x1*0x6a5)]=_0x4c63fe[-0x124a*-0x2+-0x1883+-0xc0e*0x1],_0x3abbcd[_0x1c4ff9+(0x2171*-0x1+-0x4e0+-0x2bd*-0xe)]=_0x4c63fe[-0x247+-0x193c+0x1b87],_0x3abbcd[_0x1c4ff9+(0xa*0x394+0x20f8+-0x39e*0x13)]=_0x4c63fe[-0x24*0xa9+0x60d+0x11bc],_0x3abbcd[_0x1c4ff9+(0x1*-0x17b9+0x2*0x48e+0xea5)]=_0x4c63fe[0x1023+-0x9*0x287+0x6a2],_0x3abbcd[_0x1c4ff9+(-0x9da+-0x1cd2+0x26b5)]=_0x4c63fe[-0x8f6*-0x1+-0x27a*-0x2+-0xde3],_0x3abbcd[_0x1c4ff9+(0x1*-0x131d+-0x229e+0x35c5)]=_0x4c63fe[-0x1da5+0x1ac2*0x1+0x2eb];},Be[$h]=function(_0x5b9e64,_0x1375ab,_0x503060,_0x5bd5a7){const _0x292f2b=_0x5b9e64['storageFlo'+'at32'];for(let _0x3e9a31=0x26dd*0x1+-0x7c9*-0x5+-0x19ee*0x3;_0x3e9a31<_0x5bd5a7;_0x3e9a31++)_0x292f2b[_0x503060+_0x3e9a31*(-0x205+-0x1f97+-0x868*-0x4)]=_0x1375ab[_0x3e9a31];},Be[Xh]=(_0x3b98be,_0x41c03a,_0x28aadd,_0x49687a)=>{const _0x201428=_0x3b98be['storageFlo'+'at32'];for(let _0x7f817f=0x2384+0x2151+0x43*-0x107;_0x7f817f<_0x49687a;_0x7f817f++)_0x201428[_0x28aadd+_0x7f817f*(0x352+0x1*0x118d+0x1*-0x14db)]=_0x41c03a[_0x7f817f*(0xc7*0x2b+-0x12de+0x19*-0x95)],_0x201428[_0x28aadd+_0x7f817f*(-0x1*-0x1f+-0x10*-0x1a5+-0x1a6b)+(-0xcd0+-0x2f*-0x98+-0xf17)]=_0x41c03a[_0x7f817f*(0x11cd+-0x20c1+-0x5*-0x2fe)+(-0x20*-0x78+-0x1717+0x818)];},Be[qh]=(_0x984489,_0x35c961,_0x45b646,_0x3f7717)=>{const _0x4405f4=_0x984489['storageFlo'+'at32'];for(let _0xc61747=0x1ed+-0x11d8*0x2+-0x3*-0xb41;_0xc61747<_0x3f7717;_0xc61747++)_0x4405f4[_0x45b646+_0xc61747*(0x2*-0xc47+-0x1*0x2559+0x3deb)]=_0x35c961[_0xc61747*(-0x279*0x1+-0x1266+0x14e2)],_0x4405f4[_0x45b646+_0xc61747*(-0x1927+0x38f*-0x3+-0x8f6*-0x4)+(0x7aa+0x1b40+-0x22e9)]=_0x35c961[_0xc61747*(0x266*-0x2+-0xfe7*-0x1+-0xb18)+(0x14*0xbb+-0x26*0x43+-0x4a9)],_0x4405f4[_0x45b646+_0xc61747*(0x1972+0x2086+-0x39f4)+(0xd35+-0x2*0x55a+-0x27f)]=_0x35c961[_0xc61747*(0x1*-0x45b+-0x9*-0x1cd+0x1b1*-0x7)+(0x3*0x81a+0x1*-0x8db+0x1*-0xf71)];},Be[Pn]=(_0x5b9b8d,_0x55d887,_0x233f1c,_0x5381b4)=>{const _0x4cac8f=_0x5b9b8d['storageUin'+'t32'];_0x4cac8f[_0x233f1c]=_0x55d887;},Be[Mn]=(_0x28025c,_0x34e883,_0x45f5af,_0x50817e)=>{const _0x470d61=_0x28025c['storageUin'+'t32'];_0x470d61[_0x45f5af]=_0x34e883[-0x1799+0x4*-0x1c9+0x1ebd],_0x470d61[_0x45f5af+(0xce*-0x4+0x47d+-0x6c*0x3)]=_0x34e883[-0xac+-0x9a3*-0x1+0x3e*-0x25];},Be[Dn]=(_0x3fa4bb,_0x222100,_0x1a9606,_0x521a82)=>{const _0xb7f7c=_0x3fa4bb['storageUin'+'t32'];_0xb7f7c[_0x1a9606]=_0x222100[-0xab6+0x1031+0x57b*-0x1],_0xb7f7c[_0x1a9606+(0x54b*0x3+-0xc*-0x129+-0x773*0x4)]=_0x222100[-0x567*-0x1+-0x1ee8*0x1+-0xa*-0x28d],_0xb7f7c[_0x1a9606+(-0x1c66+0x1c04+0x64)]=_0x222100[0x1927+-0x1827+0x1*-0xfe];},Be[In]=(_0x374108,_0x2efdba,_0x2183f7,_0x2a0a6a)=>{const _0x224869=_0x374108['storageUin'+'t32'];_0x224869[_0x2183f7]=_0x2efdba[0x1*-0x1501+0xb*-0x203+0x2b22],_0x224869[_0x2183f7+(-0x1885+-0x125*0xc+0x2642)]=_0x2efdba[0x2187+0x2*0x527+0x37*-0xcc],_0x224869[_0x2183f7+(-0x345+0x9b+0x2ac)]=_0x2efdba[-0x3d*0x36+-0xeb5+0x17*0x133],_0x224869[_0x2183f7+(0x2704+-0x1286*0x1+-0x147b)]=_0x2efdba[0x33*0x39+-0x262e+0x8f2*0x3];},Be[Ln]=function(_0x3b64a0,_0x346c30,_0xea92fe,_0xc190f0){const _0xbf5e50=_0x3b64a0['storageInt'+'32'];for(let _0x33a456=-0xb+-0xc02*0x3+-0x7*-0x527;_0x33a456<_0xc190f0;_0x33a456++)_0xbf5e50[_0xea92fe+_0x33a456*(-0x1548+-0x4*-0x5fb+0x30*-0xe)]=_0x346c30[_0x33a456];},Be[Yh]=Be[Ln],Be[jh]=function(_0x3b4724,_0xa41fbe,_0x2a5069,_0xf75f1){const _0x15e620=_0x3b4724['storageUin'+'t32'];for(let _0x2049e8=-0x2144+-0x2*0x1196+0x4470;_0x2049e8<_0xf75f1;_0x2049e8++)_0x15e620[_0x2a5069+_0x2049e8*(0xc8*0xe+-0x222f+0xf*0x18d)]=_0xa41fbe[_0x2049e8];},Be[Rn]=(_0x571500,_0x59c55d,_0x36e3f5,_0xbc1736)=>{const _0x1a86c5=_0x571500['storageInt'+'32'];for(let _0x4b3d0d=0x9cd+-0xce1*0x2+-0x5*-0x331;_0x4b3d0d<_0xbc1736;_0x4b3d0d++)_0x1a86c5[_0x36e3f5+_0x4b3d0d*(0x2*0x46a+-0xd*-0x106+0x161e*-0x1)]=_0x59c55d[_0x4b3d0d*(0xb1a+0x1*0x24e5+-0x333*0xf)],_0x1a86c5[_0x36e3f5+_0x4b3d0d*(0x17f0+0xc62+0x3*-0xc1a)+(-0x10ec+0x12f5+-0x208)]=_0x59c55d[_0x4b3d0d*(-0x2380+0x17d5+0xbad)+(-0x1f97+0xcf6+0x12a2)];},Be[Zh]=Be[Rn],Be[Kh]=(_0x208d66,_0x4d367c,_0x51522c,_0x14541d)=>{const _0x2d7f1d=_0x208d66['storageUin'+'t32'];for(let _0x1522bf=-0x8bf*0x1+-0x1*-0x652+-0x3*-0xcf;_0x1522bf<_0x14541d;_0x1522bf++)_0x2d7f1d[_0x51522c+_0x1522bf*(-0x52f+0x1fb1*0x1+-0x1a7e)]=_0x4d367c[_0x1522bf*(0x1d33+0x1623+-0xcd5*0x4)],_0x2d7f1d[_0x51522c+_0x1522bf*(0x4*-0x989+-0x2e*-0xa3+0x8de)+(-0xa7b*0x2+0x96b*-0x4+0x3aa3)]=_0x4d367c[_0x1522bf*(-0x92*0x31+-0x21e1+0x59f*0xb)+(-0x205*0x10+0xc55+0x13fc)];},Be[On]=(_0xcfe2f5,_0x565f94,_0xb29cb0,_0x4e0bc5)=>{const _0x38390a=_0xcfe2f5['storageInt'+'32'];for(let _0x5a4050=0x2058+-0x1b21+-0x3*0x1bd;_0x5a4050<_0x4e0bc5;_0x5a4050++)_0x38390a[_0xb29cb0+_0x5a4050*(-0x1c3e+-0x1a80+0x36c2)]=_0x565f94[_0x5a4050*(0x108a+-0x1a*0x143+-0x3*-0x56d)],_0x38390a[_0xb29cb0+_0x5a4050*(-0x6b*-0x1c+0x142f+-0xc7*0x29)+(0x1cac+0x1*-0x148d+0x1*-0x81e)]=_0x565f94[_0x5a4050*(-0x1669+-0x670+0x1cdc*0x1)+(-0x625+0x281+0x3a5)],_0x38390a[_0xb29cb0+_0x5a4050*(-0xf86*0x2+0x877*-0x3+0x95*0x61)+(-0x1a*0xf1+-0xfaf+0x282b)]=_0x565f94[_0x5a4050*(0x1*0xf3a+0xf7*-0x11+0x130)+(0x15f+-0xb4e*0x1+0x9f1)];},Be[Jh]=Be[On],Be[Qh]=(_0x3eee39,_0x1bfae7,_0x5cad6d,_0x4dedc)=>{const _0xf19a3a=_0x3eee39['storageUin'+'t32'];for(let _0x57567c=-0xa99*-0x1+0x137f+-0x1e18;_0x57567c<_0x4dedc;_0x57567c++)_0xf19a3a[_0x5cad6d+_0x57567c*(0x2663+0x85*-0x19+-0x26*0xab)]=_0x1bfae7[_0x57567c*(0x2303*-0x1+-0x20bd+0x43c3)],_0xf19a3a[_0x5cad6d+_0x57567c*(-0xa3b+0x1f52+-0x1513)+(0x1193+0xb13+0x1ca5*-0x1)]=_0x1bfae7[_0x57567c*(-0x16b9*-0x1+0x221c+-0x38d2)+(-0x19f6+0x756+-0x12a1*-0x1)],_0xf19a3a[_0x5cad6d+_0x57567c*(-0x1223+0x1*-0x334+0x155b)+(0x1*-0x24d3+0xc75+0x60*0x41)]=_0x1bfae7[_0x57567c*(0x48a+0x17*-0x192+-0x1f97*-0x1)+(-0x1*0x26dd+-0x837+-0x6*-0x7d9)];};class up{constructor(_0x35474a,_0x3afefd,_0x1fb21c=!(0x2099+0x12d2+0x1*-0x336b)){h(this,'device'),h(this,'persistent'),h(this,'allocation'),h(this,'storageFlo'+'at32'),h(this,'storageInt'+'32'),h(this,'storageUin'+'t32'),h(this,'renderVers'+'ionDirty',-0x2c5+0x1*-0x42b+0x6f0);if(this['device']=_0x35474a,this['format']=_0x3afefd,this['persistent']=_0x1fb21c,w['assert'](_0x3afefd),_0x1fb21c){this['impl']=_0x35474a['createUnif'+'ormBufferI'+'mpl'](this);const _0x503f3a=new ArrayBuffer(_0x3afefd['byteSize']);this['assignStor'+'age'](new Int32Array(_0x503f3a)),_0x35474a['_vram']['ub']+=this['format']['byteSize'];}else this['allocation']=new lT();}['destroy'](){if(this['persistent']){const _0x1812bd=this['device'];this['impl']['destroy'](_0x1812bd),_0x1812bd['_vram']['ub']-=this['format']['byteSize'];}}get['offset'](){return this['persistent']?-0x1*-0x1703+-0x1ec6+0x1*0x7c3:this['allocation']['offset'];}['assignStor'+'age'](_0xd89c88){this['storageInt'+'32']=_0xd89c88,this['storageUin'+'t32']=new Uint32Array(_0xd89c88['buffer'],_0xd89c88['byteOffset'],_0xd89c88['byteLength']/(-0x2f*-0x2e+-0x1077+0x11*0x79)),this['storageFlo'+'at32']=new Float32Array(_0xd89c88['buffer'],_0xd89c88['byteOffset'],_0xd89c88['byteLength']/(0xe9d+-0x129c+0x403));}['loseContex'+'t'](){var _0x3b93bf;(_0x3b93bf=this['impl'])==null||_0x3b93bf['loseContex'+'t']();}['setUniform'](_0x11b260,_0x3c498e){w['assert'](_0x11b260);const _0x281284=_0x11b260['offset'];if(_0x3c498e!=null){const _0x3e8855=Be[_0x11b260['updateType']];_0x3e8855?_0x3e8855(this,_0x3c498e,_0x281284,_0x11b260['count']):this['storageFlo'+'at32']['set'](_0x3c498e,_0x281284);}else w['warnOnce']('Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20to\x20unif'+'orm\x20['+_0x11b260['name']+('],\x20expecte'+'d\x20type\x20')+GS[_0x11b260['type']]+('\x20while\x20ren'+'dering\x20')+Q['toString']());}['set'](_0x31ccbf,_0x4e0161){const _0x38fab1=this['format']['map']['get'](_0x31ccbf);w['assert'](_0x38fab1,'Uniform\x20na'+'me\x20['+_0x31ccbf+(']\x20is\x20not\x20p'+'art\x20of\x20the'+'\x20Uniform\x20b'+'uffer.')),_0x38fab1&&this['setUniform'](_0x38fab1,_0x4e0161);}['startUpdat'+'e'](_0x2c3dca){if(!this['persistent']){const _0x355370=this['allocation'],_0xc8c698=_0x355370['gpuBuffer'];this['device']['dynamicBuf'+'fers']['alloc'](_0x355370,this['format']['byteSize']),this['assignStor'+'age'](_0x355370['storage']),_0x2c3dca&&(_0x2c3dca['bindGroup']=_0x355370['gpuBuffer']['getBindGro'+'up'](this),_0x2c3dca['offsets'][-0x1*0x5e7+-0x5*-0x32b+0x13e*-0x8]=_0x355370['offset']),_0xc8c698!==_0x355370['gpuBuffer']&&(this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion']);}}['endUpdate'](){this['persistent']?this['impl']['unlock'](this):(this['storageFlo'+'at32']=null,this['storageInt'+'32']=null);}['update'](_0x357a5c){this['startUpdat'+'e'](_0x357a5c);const _0x574785=this['format']['uniforms'];for(let _0x2f84c7=-0x2347*0x1+-0x1098+0x33df;_0x2f84c7<_0x574785['length'];_0x2f84c7++){const _0x49407f=_0x574785[_0x2f84c7]['scopeId']['value'];this['setUniform'](_0x574785[_0x2f84c7],_0x49407f);}this['endUpdate']();}}class cT{constructor(){h(this,'frameAlloc'+'ations',[]),h(this,'pastFrameA'+'llocations',new Map()),h(this,'_enabled',!(-0x3*0x30d+0x28a+-0x2*-0x34f)),h(this,'_enableReq'+'uest',!(-0x10e6+0x663*-0x2+0x1*0x1dad)),h(this,'_frameTime',0x5*-0x40f+-0x1*-0x1f49+-0xafe);}['loseContex'+'t'](){this['pastFrameA'+'llocations']['clear']();}set['enabled'](_0x5911bd){this['_enableReq'+'uest']=_0x5911bd;}get['enabled'](){return this['_enableReq'+'uest'];}['processEna'+'bleRequest'](){this['_enableReq'+'uest']!==this['_enabled']&&(this['_enabled']=this['_enableReq'+'uest'],this['_enabled']||(this['_frameTime']=-0x2188+0x1004*-0x1+0x12e*0x2a));}['request'](_0x3cbbf5){this['pastFrameA'+'llocations']['set'](_0x3cbbf5,this['frameAlloc'+'ations']),this['frameAlloc'+'ations']=[];}['report'](_0x33628b,_0x166f15){if(_0x166f15){const _0x3c4c90=this['pastFrameA'+'llocations']['get'](_0x33628b);if(w['assert'](_0x3c4c90['length']===_0x166f15['length']),_0x166f15['length']>-0x942+0x1022+-0x6e0&&(this['_frameTime']=_0x166f15['reduce']((_0x3757b0,_0x30787e)=>_0x3757b0+_0x30787e,-0x29*0x87+0x95b+-0x4*-0x311)),mi['get'](Ml)){w['trace'](Ml,'--\x20GPU\x20tim'+'ings\x20for\x20f'+'rame\x20'+_0x33628b+'\x20--');let _0x21661a=0x25b7+0x1179+0xdcc*-0x4;for(let _0x498807=0x676+-0xec2+0x84c;_0x498807<_0x3c4c90['length'];++_0x498807){const _0x5474a2=_0x3c4c90[_0x498807];_0x21661a+=_0x166f15[_0x498807],w['trace'](Ml,_0x166f15[_0x498807]['toFixed'](-0x5d5*0x5+-0x23d*-0x3+0x1674)+'\x20ms\x20'+_0x5474a2);}w['trace'](Ml,_0x21661a['toFixed'](0x9*-0x241+0xe9*-0x4+0x17ef)+'\x20ms\x20TOTAL');}}this['pastFrameA'+'llocations']['delete'](_0x33628b);}['getSlot'](_0x2341dd){const _0x34e19d=this['frameAlloc'+'ations']['length'];return this['frameAlloc'+'ations']['push'](_0x2341dd),_0x34e19d;}get['slotCount'](){return this['frameAlloc'+'ations']['length'];}}class fy{constructor(){h(this,'bufferId',null);}['destroy'](_0x4c0023){this['bufferId']&&(_0x4c0023['gl']['deleteBuff'+'er'](this['bufferId']),this['bufferId']=null);}get['initialize'+'d'](){return!!this['bufferId'];}['loseContex'+'t'](){this['bufferId']=null;}['unlock'](_0x2c379e,_0x3f0a78,_0x564b19,_0x46faf){const _0x3ffeb8=_0x2c379e['gl'];if(this['bufferId'])_0x3ffeb8['bindBuffer'](_0x564b19,this['bufferId']),_0x3ffeb8['bufferSubD'+'ata'](_0x564b19,0x378+-0x1c94*0x1+-0x2*-0xc8e,_0x46faf);else{let _0x1d3c0;switch(_0x3f0a78){case ms:_0x1d3c0=_0x3ffeb8['STATIC_DRA'+'W'];break;case zc:_0x1d3c0=_0x3ffeb8['DYNAMIC_DR'+'AW'];break;case SS:_0x1d3c0=_0x3ffeb8['STREAM_DRA'+'W'];break;case H0:_0x1d3c0=_0x3ffeb8['DYNAMIC_CO'+'PY'];break;}this['bufferId']=_0x3ffeb8['createBuff'+'er'](),_0x3ffeb8['bindBuffer'](_0x564b19,this['bufferId']),_0x3ffeb8['bufferData'](_0x564b19,_0x46faf,_0x1d3c0);}}}class hT extends fy{constructor(){super(...arguments),h(this,'vao',null);}['destroy'](_0x227974){super['destroy'](_0x227974),_0x227974['unbindVert'+'exArray']();}['loseContex'+'t'](){super['loseContex'+'t'](),this['vao']=null;}['unlock'](_0x1662cd){const _0x2f0348=_0x1662cd['device'];super['unlock'](_0x2f0348,_0x1662cd['usage'],_0x2f0348['gl']['ARRAY_BUFF'+'ER'],_0x1662cd['storage']);}}class dT extends fy{constructor(_0x5d6ad5){super();const _0x14195c=_0x5d6ad5['device']['gl'],_0x35af40=_0x5d6ad5['format'];_0x35af40===yf?this['glFormat']=_0x14195c['UNSIGNED_B'+'YTE']:_0x35af40===ji?this['glFormat']=_0x14195c['UNSIGNED_S'+'HORT']:_0x35af40===yr&&(this['glFormat']=_0x14195c['UNSIGNED_I'+'NT']);}['unlock'](_0x40ba97){const _0x312b37=_0x40ba97['device'];super['unlock'](_0x312b37,_0x40ba97['usage'],_0x312b37['gl']['ELEMENT_AR'+'RAY_BUFFER'],_0x40ba97['storage']);}}class fT{constructor(_0x3dca9f,_0x642f5b,_0x51bc38,_0x1f06df){if(this['locationId']=_0x1f06df,this['scopeId']=_0x3dca9f['scope']['resolve'](_0x642f5b),this['version']=new sy(),_0x642f5b['substring'](_0x642f5b['length']-(-0x6*0x5f0+0x1*0x1421+0xf82))==='[0]')switch(_0x51bc38){case $s:_0x51bc38=$h;break;case da:_0x51bc38=Ln;break;case Pn:_0x51bc38=jh;break;case mn:_0x51bc38=Yh;break;case fa:_0x51bc38=Xh;break;case ra:_0x51bc38=Rn;break;case Mn:_0x51bc38=Kh;break;case Go:_0x51bc38=Zh;break;case ds:_0x51bc38=qh;break;case aa:_0x51bc38=On;break;case Dn:_0x51bc38=Qh;break;case Ho:_0x51bc38=Jh;break;case An:_0x51bc38=ap;break;case na:_0x51bc38=Yc;break;case In:_0x51bc38=np;break;case Wo:_0x51bc38=op;break;}this['dataType']=_0x51bc38,this['value']=[null,null,null,null],this['array']=[];}}let Om=0x294+-0x3*-0x9ff+-0x2091;const uT=new Set(['gl_VertexI'+'D','gl_Instanc'+'eID','gl_DrawID','gl_BaseVer'+'tex','gl_BaseIns'+'tance']);class pT{constructor(){h(this,'map',new Map());}['destroy'](_0x1ab7e9){this['map']['forEach'](_0x1f9cfc=>{_0x1ab7e9['gl']['deleteShad'+'er'](_0x1f9cfc);});}['loseContex'+'t'](_0x1fd750){this['map']['clear']();}}const mT=new Kt(),_T=new Kt();class gT{constructor(_0x23ca63){h(this,'compileDur'+'ation',0x2*-0x5ad+0x2629+-0x1acf),(this['init'](),this['compile'](_0x23ca63['device'],_0x23ca63),this['link'](_0x23ca63['device'],_0x23ca63),_0x23ca63['device']['shaders']['push'](_0x23ca63));}['destroy'](_0x4e26e7){this['glProgram']&&(_0x4e26e7['device']['gl']['deleteProg'+'ram'](this['glProgram']),this['glProgram']=null);}['init'](){this['uniforms']=[],this['samplers']=[],this['attributes']=[],this['glProgram']=null,this['glVertexSh'+'ader']=null,this['glFragment'+'Shader']=null;}['loseContex'+'t'](){this['init']();}['restoreCon'+'text'](_0x39edbd,_0x10a738){this['compile'](_0x39edbd,_0x10a738),this['link'](_0x39edbd,_0x10a738);}['compile'](_0x3e68bf,_0x411c1d){const _0x957179=_0x411c1d['definition'];this['glVertexSh'+'ader']=this['_compileSh'+'aderSource'](_0x3e68bf,_0x957179['vshader'],!(-0x1f20+-0x1aa8*-0x1+-0xd*-0x58)),this['glFragment'+'Shader']=this['_compileSh'+'aderSource'](_0x3e68bf,_0x957179['fshader'],!(0x345*-0x1+-0x819+-0x29*-0x47));}['link'](_0x5cf8f0,_0xd75cec){if(this['glProgram'])return;const _0x4aaff0=_0x5cf8f0['gl'];if(_0x4aaff0['isContextL'+'ost']())return;let _0x1f3c8f=-0x1e4+-0x3*-0x8db+-0x18ad;w['call'](()=>{this['compileDur'+'ation']=-0x27d+0xeb5+-0xc38,_0x1f3c8f=de();});const _0x23c65a=_0x4aaff0['createProg'+'ram']();this['glProgram']=_0x23c65a,_0x4aaff0['attachShad'+'er'](_0x23c65a,this['glVertexSh'+'ader']),_0x4aaff0['attachShad'+'er'](_0x23c65a,this['glFragment'+'Shader']);const _0x587c66=_0xd75cec['definition'],_0x313664=_0x587c66['attributes'];if(_0x587c66['useTransfo'+'rmFeedback']){const _0x3bb829=[];for(const _0x574fb2 in _0x313664)_0x313664['hasOwnProp'+'erty'](_0x574fb2)&&_0x3bb829['push']('out_'+_0x574fb2);_0x4aaff0['transformF'+'eedbackVar'+'yings'](_0x23c65a,_0x3bb829,_0x4aaff0['INTERLEAVE'+'D_ATTRIBS']);}const _0x5e50a2={};for(const _0x1e2d28 in _0x313664)if(_0x313664['hasOwnProp'+'erty'](_0x1e2d28)){const _0xf49ef7=_0x313664[_0x1e2d28],_0x15556d=Le[_0xf49ef7];w['assert'](!_0x5e50a2['hasOwnProp'+'erty'](_0x15556d),'WARNING:\x20T'+'wo\x20attribu'+'tes\x20are\x20ma'+'pped\x20to\x20th'+'e\x20same\x20loc'+'ation\x20in\x20a'+'\x20shader:\x20'+_0x5e50a2[_0x15556d]+'\x20and\x20'+_0x1e2d28),_0x5e50a2[_0x15556d]=_0x1e2d28,_0x4aaff0['bindAttrib'+'Location'](_0x23c65a,_0x15556d,_0x1e2d28);}_0x4aaff0['linkProgra'+'m'](_0x23c65a),w['call'](()=>{this['compileDur'+'ation']=de()-_0x1f3c8f;}),_0x5cf8f0['_shaderSta'+'ts']['linked']++,_0x587c66['tag']===NS&&_0x5cf8f0['_shaderSta'+'ts']['materialSh'+'aders']++;}['_compileSh'+'aderSource'](_0x1edb97,_0x2457f6,_0x31800c){const _0x4264c7=_0x1edb97['gl'];if(_0x4264c7['isContextL'+'ost']())return null;const _0x2ce8de=(_0x31800c?mT:_T)['get'](_0x1edb97,()=>new pT());let _0x442544=_0x2ce8de['map']['get'](_0x2457f6);if(!_0x442544){const _0x101d88=de();_0x1edb97['fire']('shader:com'+'pile:start',{'timestamp':_0x101d88,'target':_0x1edb97}),_0x442544=_0x4264c7['createShad'+'er'](_0x31800c?_0x4264c7['VERTEX_SHA'+'DER']:_0x4264c7['FRAGMENT_S'+'HADER']),_0x4264c7['shaderSour'+'ce'](_0x442544,_0x2457f6),_0x4264c7['compileSha'+'der'](_0x442544),_0x2ce8de['map']['set'](_0x2457f6,_0x442544);const _0x2a2287=de();_0x1edb97['fire']('shader:com'+'pile:end',{'timestamp':_0x2a2287,'target':_0x1edb97}),_0x1edb97['_shaderSta'+'ts']['compileTim'+'e']+=_0x2a2287-_0x101d88,_0x31800c?_0x1edb97['_shaderSta'+'ts']['vsCompiled']++:_0x1edb97['_shaderSta'+'ts']['fsCompiled']++;}return _0x442544;}['finalize'](_0x1f64bc,_0x3a55a3){var _0x1c6fbe,_0x10de7e;const _0x18173c=_0x1f64bc['gl'];if(_0x18173c['isContextL'+'ost']())return!(-0x1aa7+-0x2007+0x3aae);const _0x5e4760=this['glProgram'],_0x16e7c9=_0x3a55a3['definition'],_0x18e03d=de();_0x1f64bc['fire']('shader:lin'+'k:start',{'timestamp':_0x18e03d,'target':_0x1f64bc});let _0x457d20=-0x15a0+0x19e*-0x9+0x242e;if(w['call'](()=>{_0x457d20=de();}),!_0x18173c['getProgram'+'Parameter'](_0x5e4760,_0x18173c['LINK_STATU'+'S'])){if(!this['_isCompile'+'d'](_0x1f64bc,_0x3a55a3,this['glVertexSh'+'ader'],_0x16e7c9['vshader'],'vertex')||!this['_isCompile'+'d'](_0x1f64bc,_0x3a55a3,this['glFragment'+'Shader'],_0x16e7c9['fshader'],'fragment'))return!(-0x16b9+-0x215+0x845*0x3);const _0xe7a870='Failed\x20to\x20'+'link\x20shade'+'r\x20program.'+'\x20Error:\x20'+_0x18173c['getProgram'+'InfoLog'](_0x5e4760);return _0x16e7c9['translated'+'Frag']=(_0x1c6fbe=_0x18173c['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(-0x1*-0x5b6+0x952+-0x1a*0x94):_0x1c6fbe['getTransla'+'tedShaderS'+'ource'](this['glFragment'+'Shader']),_0x16e7c9['translated'+'Vert']=(_0x10de7e=_0x18173c['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(-0x156b+0x1b05*0x1+0x1de*-0x3):_0x10de7e['getTransla'+'tedShaderS'+'ource'](this['glVertexSh'+'ader']),console['error'](_0xe7a870,_0x16e7c9),console['error'](_0xe7a870),!(0x2531*-0x1+-0x39d*0x8+-0x2*-0x210d);}const _0x4d6442=_0x18173c['getProgram'+'Parameter'](_0x5e4760,_0x18173c['ACTIVE_ATT'+'RIBUTES']);_0x3a55a3['attributes']['clear']();for(let _0xe41904=0x1497*-0x1+-0x2061+0x34f8;_0xe41904<_0x4d6442;_0xe41904++){const _0x217e3e=_0x18173c['getActiveA'+'ttrib'](_0x5e4760,_0xe41904),_0x459cad=_0x18173c['getAttribL'+'ocation'](_0x5e4760,_0x217e3e['name']);uT['has'](_0x217e3e['name'])||(_0x16e7c9['attributes'][_0x217e3e['name']]===void(0x1a45+0x4a*0x17+-0x20eb)?(console['error']('Vertex\x20sha'+'der\x20attrib'+'ute\x20\x22'+_0x217e3e['name']+('\x22\x20is\x20not\x20m'+'apped\x20to\x20a'+'\x20semantic\x20'+'in\x20shader\x20'+'definition'+',\x20shader\x20[')+_0x3a55a3['label']+']',_0x3a55a3),_0x3a55a3['failed']=!(-0x24e3*0x1+-0x2*0x997+0x3811*0x1)):_0x3a55a3['attributes']['set'](_0x459cad,_0x217e3e['name']));}const _0x1882b0=_0x1f64bc['_samplerTy'+'pes'],_0x1088cd=_0x18173c['getProgram'+'Parameter'](_0x5e4760,_0x18173c['ACTIVE_UNI'+'FORMS']);for(let _0x5f5b8f=0x185b+0xb2d+0x11c4*-0x2;_0x5f5b8f<_0x1088cd;_0x5f5b8f++){const _0x2baa76=_0x18173c['getActiveU'+'niform'](_0x5e4760,_0x5f5b8f),_0x4ccf0e=_0x18173c['getUniform'+'Location'](_0x5e4760,_0x2baa76['name']),_0x47ff46=new fT(_0x1f64bc,_0x2baa76['name'],_0x1f64bc['pcUniformT'+'ype'][_0x2baa76['type']],_0x4ccf0e);_0x1882b0['has'](_0x2baa76['type'])?this['samplers']['push'](_0x47ff46):this['uniforms']['push'](_0x47ff46);}_0x3a55a3['ready']=!(-0x188+-0x1f1a*-0x1+-0x1d92);const _0x408ff1=de();return _0x1f64bc['fire']('shader:lin'+'k:end',{'timestamp':_0x408ff1,'target':_0x1f64bc}),_0x1f64bc['_shaderSta'+'ts']['compileTim'+'e']+=_0x408ff1-_0x18e03d,w['call'](()=>{const _0x5a5138=de()-_0x457d20;this['compileDur'+'ation']+=_0x5a5138,Om+=this['compileDur'+'ation'],w['trace'](c0,'[id:\x20'+_0x3a55a3['id']+']\x20'+_0x3a55a3['name']+':\x20'+this['compileDur'+'ation']['toFixed'](0x181*-0xe+-0xf4f*-0x2+-0x98f)+('ms,\x20TOTAL:'+'\x20')+Om['toFixed'](-0x29*0xb3+-0xf66+0x2c12)+'ms');}),!(-0x84b+-0x14f0+0x1d3b);}['_isCompile'+'d'](_0xa44231,_0x828f29,_0x157a7c,_0x33b0a1,_0xf16c27){const _0x75e7fd=_0xa44231['gl'];if(!_0x75e7fd['getShaderP'+'arameter'](_0x157a7c,_0x75e7fd['COMPILE_ST'+'ATUS'])){const _0x296a10=_0x75e7fd['getShaderI'+'nfoLog'](_0x157a7c),[_0x4a4f99,_0xf831d5]=this['_processEr'+'ror'](_0x33b0a1,_0x296a10),_0x110a59='Failed\x20to\x20'+'compile\x20'+_0xf16c27+'\x20shader:\x0a\x0a'+_0x296a10+'\x0a'+_0x4a4f99+('\x20while\x20ren'+'dering\x20')+Q['toString']();return _0xf831d5['shader']=_0x828f29,console['error'](_0x110a59,_0xf831d5),console['error'](_0x110a59),!(0x96+0x1b*-0x10d+-0x1bca*-0x1);}return!(0x1e71+0x1*-0x10bf+0x1*-0xdb2);}['isLinked'](_0x251cd6){const {extParallelShaderCompile:_0x507ca9}=_0x251cd6;return _0x507ca9?_0x251cd6['gl']['getProgram'+'Parameter'](this['glProgram'],_0x507ca9['COMPLETION'+'_STATUS_KH'+'R']):!(-0xb08+0x17c6+0xe*-0xe9);}['_processEr'+'ror'](_0x3930a6,_0x152ff9){const _0x185564={};let _0x48ad82='';if(_0x3930a6){const _0x3c9a90=_0x3930a6['split']('\x0a');let _0x456978=-0x2311+0x11*-0x1c9+0x1*0x416a,_0x381e8e=_0x3c9a90['length'];if(_0x152ff9&&_0x152ff9['startsWith']('ERROR:')){const _0x1e05f5=_0x152ff9['match'](/^ERROR:\s(\d+):(\d+):\s*(.+)/);_0x1e05f5&&(_0x185564['message']=_0x1e05f5[0x5*0x555+-0x1*-0xa22+0xd6*-0x2c],_0x185564['line']=parseInt(_0x1e05f5[-0xa36+0xe05*0x2+-0x2*0x8e9],0x9*-0x409+0x1*-0x51b+0x2976),_0x456978=Math['max'](0x77c+0x269d+-0x2e19,_0x185564['line']-(0x20b+0x1c5*0x2+-0x58f)),_0x381e8e=Math['min'](_0x3c9a90['length'],_0x185564['line']+(-0x16e*-0x17+0x1237+0x3314*-0x1)));}for(let _0x29d80d=_0x456978;_0x29d80d<_0x381e8e;_0x29d80d++){const _0x1dd1a0=_0x29d80d+(-0xeff+-0x1b*-0x32+-0x33e*-0x3)===_0x185564['line']?'>\x20':'\x20\x20';_0x48ad82+=''+_0x1dd1a0+(_0x29d80d+(-0x6d*0xb+-0x173f+0x1bef))+':\x09'+_0x3c9a90[_0x29d80d]+'\x0a';}_0x185564['source']=_0x3930a6;}return[_0x48ad82,_0x185564];}}function Fm(_0x104694,_0x4d0e4b){const _0x333f3e=_0x104694['width'],_0xbc367d=_0x104694['height'];if(_0x333f3e>_0x4d0e4b||_0xbc367d>_0x4d0e4b){const _0x4ab931=_0x4d0e4b/Math['max'](_0x333f3e,_0xbc367d),_0x4744ed=Math['floor'](_0x333f3e*_0x4ab931),_0x58140b=Math['floor'](_0xbc367d*_0x4ab931);w['warn']('Image\x20dime'+'nsions\x20lar'+'ger\x20than\x20m'+'ax\x20support'+'ed\x20texture'+'\x20size\x20of\x20'+_0x4d0e4b+('.\x20Resizing'+'\x20from\x20')+_0x333f3e+',\x20'+_0xbc367d+'\x20to\x20'+_0x4744ed+',\x20'+_0x58140b+'.');const _0x2e9600=document['createElem'+'ent']('canvas');return _0x2e9600['width']=_0x4744ed,_0x2e9600['height']=_0x58140b,_0x2e9600['getContext']('2d')['drawImage'](_0x104694,-0x9*-0x3+-0x1*-0xc46+-0xc61,0x21f8+-0x2476*0x1+0x16*0x1d,_0x333f3e,_0xbc367d,-0x1e8a+-0x223*-0xd+0x2c3*0x1,0x2589*-0x1+0x10cb+0x14be,_0x4744ed,_0x58140b),_0x2e9600;}return _0x104694;}class ST{constructor(_0x278ff4){h(this,'_glTexture',null),h(this,'_glTarget'),h(this,'_glFormat'),h(this,'_glInterna'+'lFormat'),h(this,'_glPixelTy'+'pe'),h(this,'_glCreated'),h(this,'dirtyParam'+'eterFlags',0xb47*-0x2+-0x1286+-0xb*-0x3bc),this['texture']=_0x278ff4;}['destroy'](_0x47f9eb){if(this['_glTexture']){for(let _0x502128=-0x4b0+0x101e+-0x9a*0x13;_0x502128<_0x47f9eb['textureUni'+'ts']['length'];_0x502128++){const _0x37a837=_0x47f9eb['textureUni'+'ts'][_0x502128];for(let _0x23c626=0x4*0x53+-0x1928+0x6*0x3fa;_0x23c626<_0x37a837['length'];_0x23c626++)_0x37a837[_0x23c626]===this['_glTexture']&&(_0x37a837[_0x23c626]=null);}_0x47f9eb['gl']['deleteText'+'ure'](this['_glTexture']),this['_glTexture']=null;}}['loseContex'+'t'](){this['_glTexture']=null;}['propertyCh'+'anged'](_0x3c5fdc){this['dirtyParam'+'eterFlags']|=_0x3c5fdc;}['initialize'](_0x53c440,_0x3790cd){const _0xa7db8b=_0x53c440['gl'];switch(this['_glTexture']=_0xa7db8b['createText'+'ure'](),this['_glTarget']=_0x3790cd['_cubemap']?_0xa7db8b['TEXTURE_CU'+'BE_MAP']:_0x3790cd['_volume']?_0xa7db8b['TEXTURE_3D']:_0x3790cd['array']?_0xa7db8b['TEXTURE_2D'+'_ARRAY']:_0xa7db8b['TEXTURE_2D'],_0x3790cd['_format']){case yS:this['_glFormat']=_0xa7db8b['ALPHA'],this['_glInterna'+'lFormat']=_0xa7db8b['ALPHA'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_B'+'YTE'];break;case vS:this['_glFormat']=_0xa7db8b['LUMINANCE'],this['_glInterna'+'lFormat']=_0xa7db8b['LUMINANCE'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_B'+'YTE'];break;case Lu:this['_glFormat']=_0xa7db8b['LUMINANCE_'+'ALPHA'],this['_glInterna'+'lFormat']=_0xa7db8b['LUMINANCE_'+'ALPHA'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_B'+'YTE'];break;case Zu:this['_glFormat']=_0xa7db8b['RED'],this['_glInterna'+'lFormat']=_0xa7db8b['R8'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_B'+'YTE'];break;case Qu:this['_glFormat']=_0xa7db8b['RG'],this['_glInterna'+'lFormat']=_0xa7db8b['RG8'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_B'+'YTE'];break;case Ih:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0xa7db8b['RGB565'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_S'+'HORT_5_6_5'];break;case Ru:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0xa7db8b['RGB5_A1'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_S'+'HORT_5_5_5'+'_1'];break;case Lh:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0xa7db8b['RGBA4'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_S'+'HORT_4_4_4'+'_4'];break;case wr:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0xa7db8b['RGB8'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_B'+'YTE'];break;case Ne:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0xa7db8b['RGBA8'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_B'+'YTE'];break;case ES:case PS:w['error']('BGRA8\x20and\x20'+'SBGRA8\x20tex'+'ture\x20forma'+'ts\x20are\x20not'+'\x20supported'+'\x20by\x20WebGL.');break;case Rh:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGB_S3TC_'+'DXT1_EXT'];break;case Ou:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT3_EXT'];break;case ol:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT5_EXT'];break;case Fh:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'ETC1']['COMPRESSED'+'_RGB_ETC1_'+'WEBGL'];break;case ll:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_2BPPV1_IM'+'G'];break;case cl:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_2BPPV1_I'+'MG'];break;case Nh:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_4BPPV1_IM'+'G'];break;case kh:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_4BPPV1_I'+'MG'];break;case Nu:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGB8_ETC2'];break;case ku:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGBA8_ETC'+'2_EAC'];break;case xS:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_RGBA_ASTC'+'_4x4_KHR'];break;case TS:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGB_ATC_W'+'EBGL'];break;case wS:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGBA_ATC_'+'INTERPOLAT'+'ED_ALPHA_W'+'EBGL'];break;case MS:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0x53c440['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'SIGNED_FLO'+'AT_EXT'];break;case DS:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0x53c440['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'UNSIGNED_F'+'LOAT_EXT'];break;case IS:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0x53c440['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGBA_BPTC'+'_UNORM_EXT'];break;case vf:this['_glFormat']=_0xa7db8b['SRGB'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_S3TC'+'_DXT1_EXT'];break;case xf:this['_glFormat']=_0xa7db8b['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'3_EXT'];break;case Tf:this['_glFormat']=_0xa7db8b['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'5_EXT'];break;case wf:this['_glFormat']=_0xa7db8b['SRGB'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ETC'+'2'];break;case Ef:this['_glFormat']=_0xa7db8b['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ETC2_E'+'AC'];break;case bf:this['_glFormat']=_0xa7db8b['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x53c440['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ASTC_4'+'x4_KHR'];break;case Af:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0x53c440['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_SRGB_ALPH'+'A_BPTC_UNO'+'RM_EXT'];break;case Bh:this['_glFormat']=_0xa7db8b['RED'],this['_glInterna'+'lFormat']=_0xa7db8b['R16F'],this['_glPixelTy'+'pe']=_0xa7db8b['HALF_FLOAT'];break;case Ku:this['_glFormat']=_0xa7db8b['RG'],this['_glInterna'+'lFormat']=_0xa7db8b['RG16F'],this['_glPixelTy'+'pe']=_0xa7db8b['HALF_FLOAT'];break;case ui:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0xa7db8b['RGB16F'],this['_glPixelTy'+'pe']=_0xa7db8b['HALF_FLOAT'];break;case nt:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0xa7db8b['RGBA16F'],this['_glPixelTy'+'pe']=_0xa7db8b['HALF_FLOAT'];break;case Ye:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0xa7db8b['RGB32F'],this['_glPixelTy'+'pe']=_0xa7db8b['FLOAT'];break;case Xt:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0xa7db8b['RGBA32F'],this['_glPixelTy'+'pe']=_0xa7db8b['FLOAT'];break;case Qi:this['_glFormat']=_0xa7db8b['RED'],this['_glInterna'+'lFormat']=_0xa7db8b['R32F'],this['_glPixelTy'+'pe']=_0xa7db8b['FLOAT'];break;case Wi:this['_glFormat']=_0xa7db8b['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0xa7db8b['DEPTH_COMP'+'ONENT32F'],this['_glPixelTy'+'pe']=_0xa7db8b['FLOAT'];break;case un:this['_glFormat']=_0xa7db8b['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0xa7db8b['DEPTH_COMP'+'ONENT16'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_S'+'HORT'];break;case Oh:this['_glFormat']=_0xa7db8b['DEPTH_STEN'+'CIL'],this['_glInterna'+'lFormat']=_0xa7db8b['DEPTH24_ST'+'ENCIL8'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_I'+'NT_24_8'];break;case En:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0xa7db8b['R11F_G11F_'+'B10F'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_I'+'NT_10F_11F'+'_11F_REV'];break;case Fu:this['_glFormat']=_0xa7db8b['RGB'],this['_glInterna'+'lFormat']=_0xa7db8b['SRGB8'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_B'+'YTE'];break;case _s:this['_glFormat']=_0xa7db8b['RGBA'],this['_glInterna'+'lFormat']=_0xa7db8b['SRGB8_ALPH'+'A8'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_B'+'YTE'];break;case Uu:this['_glFormat']=_0xa7db8b['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0xa7db8b['R8I'],this['_glPixelTy'+'pe']=_0xa7db8b['BYTE'];break;case bS:this['_glFormat']=_0xa7db8b['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0xa7db8b['R8UI'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_B'+'YTE'];break;case Bu:this['_glFormat']=_0xa7db8b['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0xa7db8b['R16I'],this['_glPixelTy'+'pe']=_0xa7db8b['SHORT'];break;case zu:this['_glFormat']=_0xa7db8b['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0xa7db8b['R16UI'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_S'+'HORT'];break;case Vu:this['_glFormat']=_0xa7db8b['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0xa7db8b['R32I'],this['_glPixelTy'+'pe']=_0xa7db8b['INT'];break;case Yi:this['_glFormat']=_0xa7db8b['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0xa7db8b['R32UI'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_I'+'NT'];break;case Gu:this['_glFormat']=_0xa7db8b['RG_INTEGER'],this['_glInterna'+'lFormat']=_0xa7db8b['RG8I'],this['_glPixelTy'+'pe']=_0xa7db8b['BYTE'];break;case AS:this['_glFormat']=_0xa7db8b['RG_INTEGER'],this['_glInterna'+'lFormat']=_0xa7db8b['RG8UI'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_B'+'YTE'];break;case Hu:this['_glFormat']=_0xa7db8b['RG_INTEGER'],this['_glInterna'+'lFormat']=_0xa7db8b['RG16I'],this['_glPixelTy'+'pe']=_0xa7db8b['SHORT'];break;case Wu:this['_glFormat']=_0xa7db8b['RG_INTEGER'],this['_glInterna'+'lFormat']=_0xa7db8b['RG16UI'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_S'+'HORT'];break;case $u:this['_glFormat']=_0xa7db8b['RG_INTEGER'],this['_glInterna'+'lFormat']=_0xa7db8b['RG32I'],this['_glPixelTy'+'pe']=_0xa7db8b['INT'];break;case Xu:this['_glFormat']=_0xa7db8b['RG_INTEGER'],this['_glInterna'+'lFormat']=_0xa7db8b['RG32UI'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_I'+'NT'];break;case qu:this['_glFormat']=_0xa7db8b['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0xa7db8b['RGBA8I'],this['_glPixelTy'+'pe']=_0xa7db8b['BYTE'];break;case CS:this['_glFormat']=_0xa7db8b['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0xa7db8b['RGBA8UI'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_B'+'YTE'];break;case ju:this['_glFormat']=_0xa7db8b['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0xa7db8b['RGBA16I'],this['_glPixelTy'+'pe']=_0xa7db8b['SHORT'];break;case Uh:this['_glFormat']=_0xa7db8b['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0xa7db8b['RGBA16UI'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_S'+'HORT'];break;case Yu:this['_glFormat']=_0xa7db8b['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0xa7db8b['RGBA32I'],this['_glPixelTy'+'pe']=_0xa7db8b['INT'];break;case Ue:this['_glFormat']=_0xa7db8b['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0xa7db8b['RGBA32UI'],this['_glPixelTy'+'pe']=_0xa7db8b['UNSIGNED_I'+'NT'];break;}this['_glCreated']=!(0x1b2c+0x128*0x21+-0x4153*0x1);}['upload'](_0x477d58,_0x22928a){w['assert'](_0x22928a['device'],'Attempting'+'\x20to\x20use\x20a\x20'+'texture\x20th'+'at\x20has\x20bee'+'n\x20destroye'+'d.',_0x22928a);const _0x3577a8=_0x477d58['gl'];if(!_0x22928a['_needsUplo'+'ad']&&(_0x22928a['_needsMipm'+'apsUpload']&&_0x22928a['_mipmapsUp'+'loaded']||!_0x22928a['pot']))return;let _0xe1b912=-0x219a+-0x19*0x5d+-0xdf*-0x31,_0x5dfab4,_0x3b2cbb;const _0x50bdb0=_0x22928a['numLevels'];for(_0x22928a['array']&&_0x3577a8['texStorage'+'3D'](_0x3577a8['TEXTURE_2D'+'_ARRAY'],_0x50bdb0,this['_glInterna'+'lFormat'],_0x22928a['_width'],_0x22928a['_height'],_0x22928a['_arrayLeng'+'th']);_0x22928a['_levels'][_0xe1b912]||_0xe1b912===0x163e*-0x1+-0x239*0xd+0x1*0x3323;){if(!_0x22928a['_needsUplo'+'ad']&&_0xe1b912===0xdc7+-0x3d*0x2c+0x119*-0x3){_0xe1b912++;continue;}else{if(_0xe1b912&&(!_0x22928a['_needsMipm'+'apsUpload']||!_0x22928a['_mipmaps']))break;}if(_0x5dfab4=_0x22928a['_levels'][_0xe1b912],_0x3b2cbb=(0x2399*0x1+-0xd*-0x7+-0x23f3)/Math['pow'](-0x16e9+-0x1b80+0x326b,_0xe1b912),_0xe1b912===0x79e+-0x1b6e+0x13d1&&!_0x22928a['_compresse'+'d']&&!_0x22928a['_integerFo'+'rmat']&&_0x22928a['_levels']['length']<_0x50bdb0&&(_0x3577a8['generateMi'+'pmap'](this['_glTarget']),_0x22928a['_mipmapsUp'+'loaded']=!(-0x9e0+-0x1de5*0x1+0x1*0x27c5)),_0x22928a['_cubemap']){let _0xfb0ca4;if(_0x477d58['_isBrowser'+'Interface'](_0x5dfab4[0x5*-0x19d+0xc94+-0xe7*0x5]))for(_0xfb0ca4=-0x4*0x85d+-0x4ab*0x5+-0xd9*-0x43;_0xfb0ca4<0x6*0x2cb+0xe30+-0x1eec;_0xfb0ca4++){if(!_0x22928a['_levelsUpd'+'ated'][-0x201f+0x1*0x1b11+-0x2*-0x287][_0xfb0ca4])continue;let _0x334573=_0x5dfab4[_0xfb0ca4];_0x477d58['_isImageBr'+'owserInter'+'face'](_0x334573)&&(_0x334573['width']>_0x477d58['maxCubeMap'+'Size']||_0x334573['height']>_0x477d58['maxCubeMap'+'Size'])&&(_0x334573=Fm(_0x334573,_0x477d58['maxCubeMap'+'Size']),_0xe1b912===0x1*-0x209+-0x172*0x14+0x1ef1&&(_0x22928a['_width']=_0x334573['width'],_0x22928a['_height']=_0x334573['height'])),_0x477d58['setUnpackF'+'lipY'](!(-0x1630+-0x1*-0xc32+0x9ff)),_0x477d58['setUnpackP'+'remultiply'+'Alpha'](_0x22928a['_premultip'+'lyAlpha']),this['_glCreated']?_0x3577a8['texSubImag'+'e2D'](_0x3577a8['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0xfb0ca4,_0xe1b912,0xc3e+-0x1b32+0x4*0x3bd,0x1*-0x24d+0x28e*-0x1+0x4db,this['_glFormat'],this['_glPixelTy'+'pe'],_0x334573):_0x3577a8['texImage2D'](_0x3577a8['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0xfb0ca4,_0xe1b912,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x334573);}else for(_0x3b2cbb=(0x92*-0x2+0xa5b+0x2*-0x49b)/Math['pow'](-0x735+0x1dfb+0x16c4*-0x1,_0xe1b912),_0xfb0ca4=0x2275*0x1+0xe00+-0x1*0x3075;_0xfb0ca4<-0x268+0x3f*0x6+0xf4;_0xfb0ca4++){if(!_0x22928a['_levelsUpd'+'ated'][0x1555*-0x1+0x4*-0x9a+-0x17bd*-0x1][_0xfb0ca4])continue;const _0x22d1e4=_0x5dfab4[_0xfb0ca4];_0x22928a['_compresse'+'d']?this['_glCreated']&&_0x22d1e4?_0x3577a8['compressed'+'TexSubImag'+'e2D'](_0x3577a8['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0xfb0ca4,_0xe1b912,0x1013+0x2032*-0x1+0x1*0x101f,-0x6a*0x4+-0x29e*0x4+0xc2*0x10,Math['max'](_0x22928a['_width']*_0x3b2cbb,0x10bd*-0x2+0x25b+-0x3*-0xa60),Math['max'](_0x22928a['_height']*_0x3b2cbb,0x18d*0x15+0xf14+0x17d2*-0x2),this['_glInterna'+'lFormat'],_0x22d1e4):_0x3577a8['compressed'+'TexImage2D'](_0x3577a8['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0xfb0ca4,_0xe1b912,this['_glInterna'+'lFormat'],Math['max'](_0x22928a['_width']*_0x3b2cbb,0xf02*-0x1+0x27a+-0xc89*-0x1),Math['max'](_0x22928a['_height']*_0x3b2cbb,-0x117c*0x2+0x453+0x1ea6),0x11b8+-0x2*-0x80f+-0x21d6,_0x22d1e4):(_0x477d58['setUnpackF'+'lipY'](!(-0x1cfb+0x3ae*-0xa+0x41c8)),_0x477d58['setUnpackP'+'remultiply'+'Alpha'](_0x22928a['_premultip'+'lyAlpha']),this['_glCreated']&&_0x22d1e4?_0x3577a8['texSubImag'+'e2D'](_0x3577a8['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0xfb0ca4,_0xe1b912,-0xefb+-0x7*0xac+0x1*0x13af,-0x6cf+-0x8ea+0xfb9,Math['max'](_0x22928a['_width']*_0x3b2cbb,-0x79*0xb+-0xe*-0x37+0x232),Math['max'](_0x22928a['_height']*_0x3b2cbb,-0x16ae+-0xe6f*0x1+0x251e),this['_glFormat'],this['_glPixelTy'+'pe'],_0x22d1e4):_0x3577a8['texImage2D'](_0x3577a8['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0xfb0ca4,_0xe1b912,this['_glInterna'+'lFormat'],Math['max'](_0x22928a['_width']*_0x3b2cbb,-0x8*0x16f+0x1e0*0xb+-0x927*0x1),Math['max'](_0x22928a['_height']*_0x3b2cbb,-0x1e2e+-0x1fe1+0x3e10),-0x1894+-0x1f2b+0x47*0xc9,this['_glFormat'],this['_glPixelTy'+'pe'],_0x22d1e4));}}else{if(_0x22928a['_volume'])_0x22928a['_compresse'+'d']?_0x3577a8['compressed'+'TexImage3D'](_0x3577a8['TEXTURE_3D'],_0xe1b912,this['_glInterna'+'lFormat'],Math['max'](_0x22928a['_width']*_0x3b2cbb,0x291*0xb+-0x1815+-0x425*0x1),Math['max'](_0x22928a['_height']*_0x3b2cbb,-0x731*-0x2+-0xb83+-0x16f*0x2),Math['max'](_0x22928a['_depth']*_0x3b2cbb,-0x9ae*0x3+-0x2*0xbb9+0x117f*0x3),0x2699+-0x1398+-0x1*0x1301,_0x5dfab4):(_0x477d58['setUnpackF'+'lipY'](!(0x1*0xaa1+0x1750+-0x21f0)),_0x477d58['setUnpackP'+'remultiply'+'Alpha'](_0x22928a['_premultip'+'lyAlpha']),_0x3577a8['texImage3D'](_0x3577a8['TEXTURE_3D'],_0xe1b912,this['_glInterna'+'lFormat'],Math['max'](_0x22928a['_width']*_0x3b2cbb,0x6dd+-0x89*0x23+0xbdf),Math['max'](_0x22928a['_height']*_0x3b2cbb,-0x1998+0x1*0xea4+-0x1*-0xaf5),Math['max'](_0x22928a['_depth']*_0x3b2cbb,-0x1977+0x5*-0x587+0x5*0xa9f),0x13*0x76+-0x421*-0x6+-0x431*0x8,this['_glFormat'],this['_glPixelTy'+'pe'],_0x5dfab4));else{if(_0x22928a['array']&&typeof _0x5dfab4=='object'){if(_0x22928a['_arrayLeng'+'th']===_0x5dfab4['length']){if(_0x22928a['_compresse'+'d']){for(let _0x24f1d6=0x2392+0x222e+0x1740*-0x3;_0x24f1d6<_0x22928a['_arrayLeng'+'th'];_0x24f1d6++)_0x3577a8['compressed'+'TexSubImag'+'e3D'](_0x3577a8['TEXTURE_2D'+'_ARRAY'],_0xe1b912,-0x8a1+0x1*0xb2d+-0x28c,0x160d+-0x153+-0x14ba,_0x24f1d6,Math['max'](Math['floor'](_0x22928a['_width']*_0x3b2cbb),-0x1c0b+-0x19a0+0x35ac),Math['max'](Math['floor'](_0x22928a['_height']*_0x3b2cbb),-0x23bd+-0xc9e+0x14*0x26b),-0x110f+-0x1296*0x1+0x23a6,this['_glInterna'+'lFormat'],_0x5dfab4[_0x24f1d6]);}else{for(let _0x4c742c=0x101*0x14+-0x24e3+0x10cf;_0x4c742c<_0x22928a['_arrayLeng'+'th'];_0x4c742c++)_0x3577a8['texSubImag'+'e3D'](_0x3577a8['TEXTURE_2D'+'_ARRAY'],_0xe1b912,0xfae+0xda3+-0x5*0x5dd,0x2623+0x1*0x8b3+-0x2ed6,_0x4c742c,Math['max'](Math['floor'](_0x22928a['_width']*_0x3b2cbb),0x56*0x10+0xe1*-0x2b+0x1036*0x2),Math['max'](Math['floor'](_0x22928a['_height']*_0x3b2cbb),0x20c8+-0x1b7*0xa+-0x1*0xfa1),-0x1*-0x153e+-0x1a7e+0x5*0x10d,this['_glFormat'],this['_glPixelTy'+'pe'],_0x5dfab4[_0x4c742c]);}}}else{if(_0x477d58['_isBrowser'+'Interface'](_0x5dfab4)){_0x477d58['_isImageBr'+'owserInter'+'face'](_0x5dfab4)&&(_0x5dfab4['width']>_0x477d58['maxTexture'+'Size']||_0x5dfab4['height']>_0x477d58['maxTexture'+'Size'])&&(_0x5dfab4=Fm(_0x5dfab4,_0x477d58['maxTexture'+'Size']),_0xe1b912===0x27*-0x29+0xc99*-0x1+-0xc9*-0x18&&(_0x22928a['_width']=_0x5dfab4['width'],_0x22928a['_height']=_0x5dfab4['height']));const _0x2dc09b=_0x5dfab4['width']||_0x5dfab4['videoWidth'],_0xf36621=_0x5dfab4['height']||_0x5dfab4['videoHeigh'+'t'];_0x477d58['setUnpackF'+'lipY'](_0x22928a['_flipY']),_0x477d58['setUnpackP'+'remultiply'+'Alpha'](_0x22928a['_premultip'+'lyAlpha']),this['_glCreated']&&_0x22928a['_width']===_0x2dc09b&&_0x22928a['_height']===_0xf36621&&!_0x477d58['_isImageVi'+'deoInterfa'+'ce'](_0x5dfab4)?_0x3577a8['texSubImag'+'e2D'](_0x3577a8['TEXTURE_2D'],_0xe1b912,0x6*-0x520+-0x1982+0x3842,0x4*-0x381+0x61*0x65+-0x377*0x7,this['_glFormat'],this['_glPixelTy'+'pe'],_0x5dfab4):(_0x3577a8['texImage2D'](_0x3577a8['TEXTURE_2D'],_0xe1b912,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x5dfab4),_0xe1b912===-0x2*-0x148+0x161f+-0x47*0x59&&(_0x22928a['_width']=_0x2dc09b,_0x22928a['_height']=_0xf36621));}else _0x3b2cbb=(-0x1*-0x733+0x6d0*-0x3+0xa*0x153)/Math['pow'](-0xb*0xb9+-0x1*0x8b4+0x10a9,_0xe1b912),_0x22928a['_compresse'+'d']?this['_glCreated']&&_0x5dfab4?_0x3577a8['compressed'+'TexSubImag'+'e2D'](_0x3577a8['TEXTURE_2D'],_0xe1b912,0x96d+-0x2185+0x1818,0x196+0x829*0x1+-0x9bf,Math['max'](Math['floor'](_0x22928a['_width']*_0x3b2cbb),-0x44a*-0x1+-0xcc2*-0x1+-0x110b),Math['max'](Math['floor'](_0x22928a['_height']*_0x3b2cbb),0x20e1+0x1db0+0x23c*-0x1c),this['_glInterna'+'lFormat'],_0x5dfab4):_0x3577a8['compressed'+'TexImage2D'](_0x3577a8['TEXTURE_2D'],_0xe1b912,this['_glInterna'+'lFormat'],Math['max'](Math['floor'](_0x22928a['_width']*_0x3b2cbb),0xa4*-0xf+0x23b7+-0x1a1a),Math['max'](Math['floor'](_0x22928a['_height']*_0x3b2cbb),0x5c1+-0x1b24+0x25*0x94),0x1*0x1d53+-0x13c9+-0xb*0xde,_0x5dfab4):(_0x477d58['setUnpackF'+'lipY'](!(0x2649+-0x1590+-0xa*0x1ac)),_0x477d58['setUnpackP'+'remultiply'+'Alpha'](_0x22928a['_premultip'+'lyAlpha']),this['_glCreated']&&_0x5dfab4?_0x3577a8['texSubImag'+'e2D'](_0x3577a8['TEXTURE_2D'],_0xe1b912,-0x963*-0x2+-0xa1*-0x3c+-0x3882*0x1,-0x1a58+-0x20a8+0x3b00,Math['max'](_0x22928a['_width']*_0x3b2cbb,-0x1fa8*0x1+0x1a32+-0x577*-0x1),Math['max'](_0x22928a['_height']*_0x3b2cbb,-0x15b8+-0x2582+0x1*0x3b3b),this['_glFormat'],this['_glPixelTy'+'pe'],_0x5dfab4):_0x3577a8['texImage2D'](_0x3577a8['TEXTURE_2D'],_0xe1b912,this['_glInterna'+'lFormat'],Math['max'](_0x22928a['_width']*_0x3b2cbb,0x1586+0x1*0x1d36+-0x32bb),Math['max'](_0x22928a['_height']*_0x3b2cbb,0x176a+0x1cb7+-0x1a1*0x20),0xba*-0x27+-0x22d9*0x1+0x1*0x3f2f,this['_glFormat'],this['_glPixelTy'+'pe'],_0x5dfab4));_0xe1b912===-0x1*-0xe19+-0x14a0+0x3*0x22d?_0x22928a['_mipmapsUp'+'loaded']=!(-0x5*-0x595+0x1912*0x1+-0x34fa):_0x22928a['_mipmapsUp'+'loaded']=!(0x21df+0x4bc+-0x269b);}}}_0xe1b912++;}if(_0x22928a['_needsUplo'+'ad']){if(_0x22928a['_cubemap']){for(let _0x2aa3d0=0x1caf+-0x95a+0x65*-0x31;_0x2aa3d0<0x7ac+-0x1*-0x245b+0x3*-0xeab;_0x2aa3d0++)_0x22928a['_levelsUpd'+'ated'][0x17*-0x15a+0x9b0+-0x391*-0x6][_0x2aa3d0]=!(-0x2*0x6ec+-0x1*-0x7cf+0x60a);}else _0x22928a['_levelsUpd'+'ated'][0x1*-0x1c53+-0x264a+0x429d*0x1]=!(-0x229c+0xbd6+0x16c7);}!_0x22928a['_compresse'+'d']&&!_0x22928a['_integerFo'+'rmat']&&_0x22928a['_mipmaps']&&_0x22928a['_needsMipm'+'apsUpload']&&_0x22928a['_levels']['length']===-0x119d+0x4d2*0x8+0x14f2*-0x1&&(_0x3577a8['generateMi'+'pmap'](this['_glTarget']),_0x22928a['_mipmapsUp'+'loaded']=!(0x1*0x89+0x2b9+-0x342*0x1)),_0x22928a['_gpuSize']&&_0x22928a['adjustVram'+'SizeTracki'+'ng'](_0x477d58['_vram'],-_0x22928a['_gpuSize']),_0x22928a['_gpuSize']=_0x22928a['gpuSize'],_0x22928a['adjustVram'+'SizeTracki'+'ng'](_0x477d58['_vram'],_0x22928a['_gpuSize']),this['_glCreated']=!(-0x23d0+0x2166+0x26a);}['read'](_0x2e920c,_0x2a88b5,_0x168b67,_0x273092,_0x585ff0){const _0x24fbe9=this['texture'];return _0x24fbe9['device']['readTextur'+'eAsync'](_0x24fbe9,_0x2e920c,_0x2a88b5,_0x168b67,_0x273092,_0x585ff0);}['write'](_0x4d87ff,_0x4f3cd1,_0x12a138,_0x790eba,_0x199cd7){const {texture:_0x29f654}=this,{device:_0x2c1d08}=_0x29f654;return _0x2c1d08['setTexture'](_0x29f654,-0x250d+-0x16d*-0x5+0x1dec),_0x2c1d08['writeTextu'+'reAsync'](_0x29f654,_0x4d87ff,_0x4f3cd1,_0x12a138,_0x790eba,_0x199cd7);}}class yT{constructor(_0x486a34,_0x40f5c1){h(this,'msaaFB'),h(this,'resolveFB'),(this['msaaFB']=_0x486a34,this['resolveFB']=_0x40f5c1);}['destroy'](_0x15f834){this['msaaFB']&&(_0x15f834['deleteRend'+'erbuffer'](this['msaaFB']),this['msaaFB']=null),this['resolveFB']&&(_0x15f834['deleteRend'+'erbuffer'](this['resolveFB']),this['resolveFB']=null);}}class vT{constructor(){h(this,'_glFrameBu'+'ffer',null),h(this,'_glDepthBu'+'ffer',null),h(this,'_glResolve'+'FrameBuffe'+'r',null),h(this,'colorMrtFr'+'amebuffers',null),h(this,'_glMsaaCol'+'orBuffers',[]),h(this,'_glMsaaDep'+'thBuffer',null),h(this,'msaaDepthB'+'ufferKey'),h(this,'suppliedCo'+'lorFramebu'+'ffer'),h(this,'_isInitial'+'ized',!(-0x1f97+0xe21+-0x1177*-0x1));}['destroy'](_0x43a1cb){var _0x4e0c12;const _0x448b0d=_0x43a1cb['gl'];this['_isInitial'+'ized']=!(-0x1*-0x785+-0x1*-0xe65+-0x15e9),this['_glFrameBu'+'ffer']&&(this['_glFrameBu'+'ffer']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x448b0d['deleteFram'+'ebuffer'](this['_glFrameBu'+'ffer']),this['_glFrameBu'+'ffer']=null),this['_glDepthBu'+'ffer']&&(_0x448b0d['deleteRend'+'erbuffer'](this['_glDepthBu'+'ffer']),this['_glDepthBu'+'ffer']=null),this['_glResolve'+'FrameBuffe'+'r']&&(this['_glResolve'+'FrameBuffe'+'r']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x448b0d['deleteFram'+'ebuffer'](this['_glResolve'+'FrameBuffe'+'r']),this['_glResolve'+'FrameBuffe'+'r']=null),this['_glMsaaCol'+'orBuffers']['forEach'](_0x25e38b=>{_0x448b0d['deleteRend'+'erbuffer'](_0x25e38b);}),this['_glMsaaCol'+'orBuffers']['length']=0x169e+0x25cf+-0x3c6d,(_0x4e0c12=this['colorMrtFr'+'amebuffers'])==null||_0x4e0c12['forEach'](_0x8e6f2d=>{_0x8e6f2d['destroy'](_0x448b0d);}),this['colorMrtFr'+'amebuffers']=null,this['_glMsaaDep'+'thBuffer']&&(this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']&&ud(_0x43a1cb)['release'](this['msaaDepthB'+'ufferKey'])),this['suppliedCo'+'lorFramebu'+'ffer']=void(-0x332*0x2+-0x155a+-0x1*-0x1bbe);}get['initialize'+'d'](){return this['_isInitial'+'ized'];}['init'](_0x4bdba2,_0x21b7eb){var _0x1b491a,_0x5f4076;const _0x5e255d=_0x4bdba2['gl'];w['assert'](!this['_isInitial'+'ized'],'Render\x20tar'+'get\x20alread'+'y\x20initiali'+'zed.'),this['_isInitial'+'ized']=!(0x1d19*-0x1+-0x25f7+0x4310);const _0x506a84=[];if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(-0x1*0x1c95+0x6b*0x18+0x1*0x128d))this['_glFrameBu'+'ffer']=this['suppliedCo'+'lorFramebu'+'ffer'];else{w['call'](()=>{(_0x21b7eb['width']<=0x98e*-0x3+-0x2470+-0x1a*-0x281||_0x21b7eb['height']<=0x3b*0x48+-0xc2c+0x11b*-0x4)&&w['warnOnce']('Invalid\x20re'+'nder\x20targe'+'t\x20size:\x20'+_0x21b7eb['width']+'\x20x\x20'+_0x21b7eb['height'],_0x21b7eb);}),this['_glFrameBu'+'ffer']=_0x5e255d['createFram'+'ebuffer'](),_0x4bdba2['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x3eb092=((_0x1b491a=_0x21b7eb['_colorBuff'+'ers'])==null?void(-0x4*-0x25b+0x2502+0x7*-0x6a2):_0x1b491a['length'])??-0xa1*0xa+0x1*0x1349+0x455*-0x3,_0x530d74=_0x5e255d['COLOR_ATTA'+'CHMENT0'];for(let _0x4a242f=-0xfb*0x4+0x2ef+0x1*0xfd;_0x4a242f<_0x3eb092;++_0x4a242f){const _0x65cc97=_0x21b7eb['getColorBu'+'ffer'](_0x4a242f);_0x65cc97&&(_0x65cc97['impl']['_glTexture']||(_0x65cc97['_width']=Math['min'](_0x65cc97['width'],_0x4bdba2['maxRenderB'+'ufferSize']),_0x65cc97['_height']=Math['min'](_0x65cc97['height'],_0x4bdba2['maxRenderB'+'ufferSize']),_0x4bdba2['setTexture'](_0x65cc97,-0x9*0x328+0x3cb*0x6+0x5a6)),_0x5e255d['framebuffe'+'rTexture2D'](_0x5e255d['FRAMEBUFFE'+'R'],_0x530d74+_0x4a242f,_0x65cc97['_cubemap']?_0x5e255d['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x21b7eb['_face']:_0x5e255d['TEXTURE_2D'],_0x65cc97['impl']['_glTexture'],_0x21b7eb['mipLevel']),_0x506a84['push'](_0x530d74+_0x4a242f));}_0x5e255d['drawBuffer'+'s'](_0x506a84);const _0x1a0b72=_0x21b7eb['_depthBuff'+'er'];if(_0x1a0b72||_0x21b7eb['_depth']){const _0x3747d5=_0x21b7eb['_stencil']?_0x5e255d['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x5e255d['DEPTH_ATTA'+'CHMENT'];if(_0x1a0b72)_0x1a0b72['impl']['_glTexture']||(_0x1a0b72['_width']=Math['min'](_0x1a0b72['width'],_0x4bdba2['maxRenderB'+'ufferSize']),_0x1a0b72['_height']=Math['min'](_0x1a0b72['height'],_0x4bdba2['maxRenderB'+'ufferSize']),_0x4bdba2['setTexture'](_0x1a0b72,0x1*0x1d4e+-0x249f+0x1*0x751)),_0x5e255d['framebuffe'+'rTexture2D'](_0x5e255d['FRAMEBUFFE'+'R'],_0x3747d5,_0x1a0b72['_cubemap']?_0x5e255d['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x21b7eb['_face']:_0x5e255d['TEXTURE_2D'],_0x21b7eb['_depthBuff'+'er']['impl']['_glTexture'],_0x21b7eb['mipLevel']);else{if(!(_0x21b7eb['_samples']>0x1464+-0x394*0x7+0x4a9*0x1)){this['_glDepthBu'+'ffer']||(this['_glDepthBu'+'ffer']=_0x5e255d['createRend'+'erbuffer']());const _0x41e803=_0x21b7eb['_stencil']?_0x5e255d['DEPTH24_ST'+'ENCIL8']:_0x5e255d['DEPTH_COMP'+'ONENT32F'];_0x5e255d['bindRender'+'buffer'](_0x5e255d['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x5e255d['renderbuff'+'erStorage'](_0x5e255d['RENDERBUFF'+'ER'],_0x41e803,_0x21b7eb['width'],_0x21b7eb['height']),_0x5e255d['framebuffe'+'rRenderbuf'+'fer'](_0x5e255d['FRAMEBUFFE'+'R'],_0x3747d5,_0x5e255d['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x5e255d['bindRender'+'buffer'](_0x5e255d['RENDERBUFF'+'ER'],null);}}}w['call'](()=>this['_checkFbo'](_0x4bdba2,_0x21b7eb));}if(_0x21b7eb['_samples']>-0x943*0x3+-0x1555+0x311f*0x1){this['_glResolve'+'FrameBuffe'+'r']=this['_glFrameBu'+'ffer'],this['_glFrameBu'+'ffer']=_0x5e255d['createFram'+'ebuffer'](),_0x4bdba2['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x4b01db=((_0x5f4076=_0x21b7eb['_colorBuff'+'ers'])==null?void(-0x3c7*0x1+0x1378+0x135*-0xd):_0x5f4076['length'])??-0xb9+0x164*-0x1+0x21d;if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(-0x1142*0x2+0x25c1*0x1+0x33d*-0x1)){const _0x3f093f=_0x5e255d['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0x3f093f);const _0x18efb1=_0x4bdba2['backBuffer'+'Format']===Ne?_0x5e255d['RGBA8']:_0x5e255d['RGB8'];_0x5e255d['bindRender'+'buffer'](_0x5e255d['RENDERBUFF'+'ER'],_0x3f093f),_0x5e255d['renderbuff'+'erStorageM'+'ultisample'](_0x5e255d['RENDERBUFF'+'ER'],_0x21b7eb['_samples'],_0x18efb1,_0x21b7eb['width'],_0x21b7eb['height']),_0x5e255d['framebuffe'+'rRenderbuf'+'fer'](_0x5e255d['FRAMEBUFFE'+'R'],_0x5e255d['COLOR_ATTA'+'CHMENT0'],_0x5e255d['RENDERBUFF'+'ER'],_0x3f093f);}else for(let _0xcb5a67=0xa*-0x1b0+-0x115e+-0x9*-0x3ce;_0xcb5a67<_0x4b01db;++_0xcb5a67){const _0x574d37=_0x21b7eb['getColorBu'+'ffer'](_0xcb5a67);if(_0x574d37){const _0x5c505b=_0x5e255d['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0x5c505b),_0x5e255d['bindRender'+'buffer'](_0x5e255d['RENDERBUFF'+'ER'],_0x5c505b),_0x5e255d['renderbuff'+'erStorageM'+'ultisample'](_0x5e255d['RENDERBUFF'+'ER'],_0x21b7eb['_samples'],_0x574d37['impl']['_glInterna'+'lFormat'],_0x21b7eb['width'],_0x21b7eb['height']),_0x5e255d['framebuffe'+'rRenderbuf'+'fer'](_0x5e255d['FRAMEBUFFE'+'R'],_0x5e255d['COLOR_ATTA'+'CHMENT0']+_0xcb5a67,_0x5e255d['RENDERBUFF'+'ER'],_0x5c505b);}}if(_0x21b7eb['_depth']){w['assert'](!this['_glMsaaDep'+'thBuffer']);const _0x1eaf17=_0x21b7eb['_stencil']?_0x5e255d['DEPTH24_ST'+'ENCIL8']:_0x5e255d['DEPTH_COMP'+'ONENT32F'],_0x427b59=_0x21b7eb['_stencil']?_0x5e255d['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x5e255d['DEPTH_ATTA'+'CHMENT'];let _0x19c498;const _0x2f389a=_0x21b7eb['_depthBuff'+'er'];_0x2f389a&&(_0x19c498=_0x2f389a['id']+':'+_0x21b7eb['width']+':'+_0x21b7eb['height']+':'+_0x21b7eb['_samples']+':'+_0x1eaf17+':'+_0x427b59,this['_glMsaaDep'+'thBuffer']=ud(_0x4bdba2)['get'](_0x19c498)),this['_glMsaaDep'+'thBuffer']||(this['_glMsaaDep'+'thBuffer']=_0x5e255d['createRend'+'erbuffer'](),_0x5e255d['bindRender'+'buffer'](_0x5e255d['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']),_0x5e255d['renderbuff'+'erStorageM'+'ultisample'](_0x5e255d['RENDERBUFF'+'ER'],_0x21b7eb['_samples'],_0x1eaf17,_0x21b7eb['width'],_0x21b7eb['height']),this['_glMsaaDep'+'thBuffer']['destroy']=function(){_0x5e255d['deleteRend'+'erbuffer'](this);},_0x2f389a&&ud(_0x4bdba2)['set'](_0x19c498,this['_glMsaaDep'+'thBuffer'])),this['msaaDepthB'+'ufferKey']=_0x19c498,_0x5e255d['framebuffe'+'rRenderbuf'+'fer'](_0x5e255d['FRAMEBUFFE'+'R'],_0x427b59,_0x5e255d['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']);}w['call'](()=>this['_checkFbo'](_0x4bdba2,_0x21b7eb,'MSAA')),_0x4b01db>-0x52*0x3b+0x1a1d+-0x39b*0x2&&(this['_createMsa'+'aMrtFrameb'+'uffers'](_0x4bdba2,_0x21b7eb,_0x4b01db),_0x4bdba2['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']),_0x5e255d['drawBuffer'+'s'](_0x506a84));}}['_createMsa'+'aMrtFrameb'+'uffers'](_0x5cf479,_0x4037e5,_0x43ce6c){const _0xa95789=_0x5cf479['gl'];this['colorMrtFr'+'amebuffers']=[];for(let _0x16f47f=-0x396+-0x1ec*-0x7+-0x9de;_0x16f47f<_0x43ce6c;++_0x16f47f){const _0x59eab2=_0x4037e5['getColorBu'+'ffer'](_0x16f47f),_0x18be24=_0xa95789['createFram'+'ebuffer']();_0x5cf479['setFramebu'+'ffer'](_0x18be24);const _0x458e00=this['_glMsaaCol'+'orBuffers'][_0x16f47f];_0xa95789['bindRender'+'buffer'](_0xa95789['RENDERBUFF'+'ER'],_0x458e00),_0xa95789['renderbuff'+'erStorageM'+'ultisample'](_0xa95789['RENDERBUFF'+'ER'],_0x4037e5['_samples'],_0x59eab2['impl']['_glInterna'+'lFormat'],_0x4037e5['width'],_0x4037e5['height']),_0xa95789['framebuffe'+'rRenderbuf'+'fer'](_0xa95789['FRAMEBUFFE'+'R'],_0xa95789['COLOR_ATTA'+'CHMENT0'],_0xa95789['RENDERBUFF'+'ER'],_0x458e00),_0xa95789['drawBuffer'+'s']([_0xa95789['COLOR_ATTA'+'CHMENT0']]),w['call'](()=>this['_checkFbo'](_0x5cf479,_0x4037e5,'MSAA-MRT-s'+'rc'+_0x16f47f));const _0x523455=_0xa95789['createFram'+'ebuffer']();_0x5cf479['setFramebu'+'ffer'](_0x523455),_0xa95789['framebuffe'+'rTexture2D'](_0xa95789['FRAMEBUFFE'+'R'],_0xa95789['COLOR_ATTA'+'CHMENT0'],_0x59eab2['_cubemap']?_0xa95789['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x4037e5['_face']:_0xa95789['TEXTURE_2D'],_0x59eab2['impl']['_glTexture'],-0x1cae+-0x2019*-0x1+-0x36b),this['colorMrtFr'+'amebuffers'][_0x16f47f]=new yT(_0x18be24,_0x523455),w['call'](()=>this['_checkFbo'](_0x5cf479,_0x4037e5,'MSAA-MRT-d'+'st'+_0x16f47f));}}['_checkFbo'](_0x4dc4c2,_0x616456,_0x48b7f8=''){const _0x5cbbc6=_0x4dc4c2['gl'],_0x32b459=_0x5cbbc6['checkFrame'+'bufferStat'+'us'](_0x5cbbc6['FRAMEBUFFE'+'R']);let _0x10025e;switch(_0x32b459){case _0x5cbbc6['FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT']:_0x10025e='FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT';break;case _0x5cbbc6['FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T']:_0x10025e='FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T';break;case _0x5cbbc6['FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS']:_0x10025e='FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS';break;case _0x5cbbc6['FRAMEBUFFE'+'R_UNSUPPOR'+'TED']:_0x10025e='FRAMEBUFFE'+'R_UNSUPPOR'+'TED';break;}w['assert'](!_0x10025e,'Framebuffe'+'r\x20creation'+'\x20failed\x20wi'+'th\x20error\x20c'+'ode\x20'+_0x10025e+(',\x20render\x20t'+'arget:\x20')+_0x616456['name']+'\x20'+_0x48b7f8,_0x616456);}['loseContex'+'t'](){this['_glFrameBu'+'ffer']=null,this['_glDepthBu'+'ffer']=null,this['_glResolve'+'FrameBuffe'+'r']=null,this['_glMsaaCol'+'orBuffers']['length']=0xb*0x119+-0x19*-0x133+-0x2*0x1507,this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']=void(-0x1f4+0x8*-0x4ca+-0xc*-0x35b),this['colorMrtFr'+'amebuffers']=null,this['suppliedCo'+'lorFramebu'+'ffer']=void(-0xc3b*0x3+0x247*-0x2+0x293f*0x1),this['_isInitial'+'ized']=!(0x2*-0x917+0xa24+0x80b);}['internalRe'+'solve'](_0xa54bfc,_0x2cf9ce,_0x5aa970,_0xc1978f,_0x5ae5b6){w['assert'](_0x2cf9ce!==_0x5aa970,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0xa54bfc['setScissor'](-0x16ff+-0x2102+-0x9*-0x639,0x1e40+0x14b0+-0x32f0,_0xc1978f['width'],_0xc1978f['height']);const _0x2ac491=_0xa54bfc['gl'];_0x2ac491['bindFrameb'+'uffer'](_0x2ac491['READ_FRAME'+'BUFFER'],_0x2cf9ce),_0x2ac491['bindFrameb'+'uffer'](_0x2ac491['DRAW_FRAME'+'BUFFER'],_0x5aa970),_0x2ac491['blitFrameb'+'uffer'](-0x4a0+0x1bd7+-0x7*0x351,-0x11d2*0x2+0x4da+0x1eca,_0xc1978f['width'],_0xc1978f['height'],-0x607+-0x1a5f+0x2066,-0x1cb9+0x7*-0x338+0x3341,_0xc1978f['width'],_0xc1978f['height'],_0x5ae5b6,_0x2ac491['NEAREST']);}['resolve'](_0x3ff0f4,_0x36c9ff,_0xf0bbf7,_0x1bef54){const _0x3ce818=_0x3ff0f4['gl'];if(this['colorMrtFr'+'amebuffers']){if(_0xf0bbf7)for(let _0x51406c=-0x171+0x2708+-0x2597;_0x51406c<this['colorMrtFr'+'amebuffers']['length'];_0x51406c++){const _0x2b4bd1=this['colorMrtFr'+'amebuffers'][_0x51406c];Q['pushGpuMar'+'ker'](_0x3ff0f4,'RESOLVE-MR'+'T'+_0x51406c),this['internalRe'+'solve'](_0x3ff0f4,_0x2b4bd1['msaaFB'],_0x2b4bd1['resolveFB'],_0x36c9ff,_0x3ce818['COLOR_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x3ff0f4);}_0x1bef54&&(Q['pushGpuMar'+'ker'](_0x3ff0f4,'RESOLVE-MR'+'T-DEPTH'),this['internalRe'+'solve'](_0x3ff0f4,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x36c9ff,_0x3ce818['DEPTH_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x3ff0f4));}else Q['pushGpuMar'+'ker'](_0x3ff0f4,'RESOLVE'),this['internalRe'+'solve'](_0x3ff0f4,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x36c9ff,(_0xf0bbf7?_0x3ce818['COLOR_BUFF'+'ER_BIT']:0x852+-0x3*0x245+-0x183)|(_0x1bef54?_0x3ce818['DEPTH_BUFF'+'ER_BIT']:0x2483+0xb*0x2f5+-0x2*0x2285)),Q['popGpuMark'+'er'](_0x3ff0f4);_0x3ce818['bindFrameb'+'uffer'](_0x3ce818['FRAMEBUFFE'+'R'],this['_glFrameBu'+'ffer']);}}class xT{constructor(){h(this,'renderVers'+'ion'),h(this,'queries',[]);}['destroy'](_0x3a566a){this['queries']['forEach'](_0x451c4b=>_0x3a566a['deleteQuer'+'y'](_0x451c4b)),this['queries']=null;}}class TT extends cT{constructor(_0x2432a2){super(),h(this,'device'),h(this,'freeQuerie'+'s',[]),h(this,'frameQueri'+'es',[]),h(this,'previousFr'+'ameQueries',[]),h(this,'timings',[]),(this['device']=_0x2432a2,this['ext']=_0x2432a2['extDisjoin'+'tTimerQuer'+'y']);}['destroy'](){this['freeQuerie'+'s']['forEach'](_0x149542=>this['device']['gl']['deleteQuer'+'y'](_0x149542)),this['frameQueri'+'es']['forEach'](_0xc98ea9=>this['device']['gl']['deleteQuer'+'y'](_0xc98ea9)),this['previousFr'+'ameQueries']['forEach'](_0x12f8e2=>_0x12f8e2['destroy'](this['device']['gl'])),this['freeQuerie'+'s']=null,this['frameQueri'+'es']=null,this['previousFr'+'ameQueries']=null;}['loseContex'+'t'](){super['loseContex'+'t'](),this['freeQuerie'+'s']=[],this['frameQueri'+'es']=[],this['previousFr'+'ameQueries']=[];}['restoreCon'+'text'](){this['ext']=this['device']['extDisjoin'+'tTimerQuer'+'y'];}['getQuery'](){return this['freeQuerie'+'s']['pop']()??this['device']['gl']['createQuer'+'y']();}['start'](_0x1d0b75){if(this['ext']){const _0x20e78d=this['getSlot'](_0x1d0b75),_0x4ea9cb=this['getQuery']();return this['frameQueri'+'es'][_0x20e78d]=_0x4ea9cb,this['device']['gl']['beginQuery'](this['ext']['TIME_ELAPS'+'ED_EXT'],_0x4ea9cb),_0x20e78d;}}['end'](_0x53424e){_0x53424e!==void(-0x74d+0x1770+0x1cb*-0x9)&&this['device']['gl']['endQuery'](this['ext']['TIME_ELAPS'+'ED_EXT']);}['frameStart'](){this['processEna'+'bleRequest'](),this['_enabled']&&(this['frameGPUMa'+'rkerSlot']=this['start']('GpuFrame'));}['frameEnd'](){this['_enabled']&&this['end'](this['frameGPUMa'+'rkerSlot']);}['request'](){if(this['_enabled']){const _0x1b1131=this['ext'],_0x266450=this['device']['gl'],_0x4e1750=this['device']['renderVers'+'ion'],_0x515594=this['frameQueri'+'es'];if(_0x515594['length']>0x2*0xa13+0x948+-0x1d6e){this['frameQueri'+'es']=[];const _0x2ab27b=new xT();_0x2ab27b['queries']=_0x515594,_0x2ab27b['renderVers'+'ion']=_0x4e1750,this['previousFr'+'ameQueries']['push'](_0x2ab27b);}if(this['previousFr'+'ameQueries']['length']>-0x1b*-0x107+0x1694+-0x3251){const _0x577246=this['previousFr'+'ameQueries'][0x2*-0x39e+0xfd9+0x93*-0xf],_0x4d224a=_0x577246['queries'],_0x41dd64=_0x4d224a[_0x4d224a['length']-(0x579+-0x1*0xf8f+-0x7b*-0x15)],_0xe3ca28=_0x266450['getQueryPa'+'rameter'](_0x41dd64,_0x266450['QUERY_RESU'+'LT_AVAILAB'+'LE']),_0x52e2ab=_0x266450['getParamet'+'er'](_0x1b1131['GPU_DISJOI'+'NT_EXT']);if(_0xe3ca28&&!_0x52e2ab){this['previousFr'+'ameQueries']['shift']();const _0x5934e0=this['timings'];_0x5934e0['length']=-0x3f9*-0x5+0x2246+-0x3623*0x1;for(let _0x4f2e9d=-0x1*0xb65+0xb39+0x2c;_0x4f2e9d<_0x4d224a['length'];_0x4f2e9d++){const _0x44343a=_0x4d224a[_0x4f2e9d],_0x22a502=_0x266450['getQueryPa'+'rameter'](_0x44343a,_0x266450['QUERY_RESU'+'LT']);_0x5934e0[_0x4f2e9d]=_0x22a502*(0x2305+0x2497+-0x479c+0.000001),this['freeQuerie'+'s']['push'](_0x44343a);}this['report'](_0x577246['renderVers'+'ion'],_0x5934e0);}_0x52e2ab&&(this['previousFr'+'ameQueries']['forEach'](_0x3d944b=>{this['report'](_0x3d944b['renderVers'+'ion'],null),_0x3d944b['destroy'](_0x266450);}),this['previousFr'+'ameQueries']['length']=-0x1fad+0x77b*-0x2+0x2ea3);}super['request'](_0x4e1750);}}}const ba=[];class wT extends $e{constructor(_0xec9c5,_0x4d265d={}){super(_0xec9c5,_0x4d265d),h(this,'gl'),h(this,'_defaultFr'+'amebuffer',null),h(this,'_defaultFr'+'amebufferC'+'hanged',!(0x1*0x656+0x753*-0x4+0x16f7)),(_0x4d265d=this['initOption'+'s'],this['updateClie'+'ntRect'](),this['initTextur'+'eUnits'](),this['contextLos'+'t']=!(0x1b*-0x86+-0x1*0xd87+0x1baa),this['_contextLo'+'stHandler']=_0xcd6300=>{_0xcd6300['preventDef'+'ault'](),this['loseContex'+'t'](),w['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20lost.'),this['fire']('devicelost');},this['_contextRe'+'storedHand'+'ler']=()=>{w['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20restore'+'d.'),this['restoreCon'+'text'](),this['fire']('devicerest'+'ored');});const _0x5f5691=typeof navigator<'u'&&navigator['userAgent'];if(this['forceDisab'+'leMultisam'+'pling']=_0x5f5691&&_0x5f5691['includes']('AppleWebKi'+'t')&&(_0x5f5691['includes']('15.4')||_0x5f5691['includes']('15_4')),this['forceDisab'+'leMultisam'+'pling']&&(_0x4d265d['antialias']=!(-0xfcb+-0x1732*0x1+0x26fe),w['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'AppleWebKi'+'t\x2015.4')),Me['browserNam'+'e']==='firefox'){const _0x19e82d=(typeof navigator<'u'?navigator['userAgent']:'')['match'](/Firefox\/(\d+(\.\d+)*)/),_0x4976ba=_0x19e82d?_0x19e82d[-0x443*0x1+0xf67*0x2+-0x1a8a*0x1]:null;if(_0x4976ba){const _0x11c580=parseFloat(_0x4976ba);(Me['name']==='windows'&&(_0x11c580>=0x2b1*0x1+0x1c66+-0x1e9f||_0x11c580===0x805*-0x4+-0x10aa+0x3131)||Me['name']==='android'&&_0x11c580>=0x1dfd+0xe*-0x126+-0x3*0x477)&&(_0x4d265d['antialias']=!(0x26e3+-0x1*-0xed8+-0x35ba),w['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'Firefox\x20'+Me['name']+('\x20platform\x20'+'version\x20')+_0x4976ba));}}this['backBuffer'+'Antialias']=_0x4d265d['antialias']??!(0x55*-0x21+0xa6c+0x8a),_0x4d265d['antialias']=!(0x751*-0x3+0x15e*0x1b+0xa*-0x17f);const _0x4b9ce9=_0x4d265d['gl']??_0xec9c5['getContext']('webgl2',_0x4d265d);if(!_0x4b9ce9)throw new Error('WebGL\x20not\x20'+'supported');this['gl']=_0x4b9ce9,this['isWebGL2']=!(-0x34+-0x3d+-0x71*-0x1),this['_deviceTyp'+'e']=wx,this['updateBack'+'bufferForm'+'at'](null);const _0x2f1aea=Me['browserNam'+'e']==='chrome',_0x5610cc=Me['browserNam'+'e']==='safari',_0x4beebb=Me['browser']&&navigator['appVersion']['indexOf']('Mac')!==-(0xb77+0xb2b+-0x16a1);this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']=_0x5610cc,this['_tempMacCh'+'romeBlitFr'+'amebufferW'+'orkaround']=_0x4beebb&&_0x2f1aea&&!_0x4d265d['alpha'],_0xec9c5['addEventLi'+'stener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(0x5*-0x709+-0x9cd*-0x3+0x5c7)),_0xec9c5['addEventLi'+'stener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(-0xf6c+-0x2*-0x3bf+0x3*0x2a5)),this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes'](),this['createBack'+'buffer'](null),this['supportsIm'+'ageBitmap']=!_0x5610cc&&typeof ImageBitmap<'u',this['_samplerTy'+'pes']=new Set([_0x4b9ce9['SAMPLER_2D'],_0x4b9ce9['SAMPLER_CU'+'BE'],_0x4b9ce9['UNSIGNED_I'+'NT_SAMPLER'+'_2D'],_0x4b9ce9['INT_SAMPLE'+'R_2D'],_0x4b9ce9['SAMPLER_2D'+'_SHADOW'],_0x4b9ce9['SAMPLER_CU'+'BE_SHADOW'],_0x4b9ce9['SAMPLER_3D'],_0x4b9ce9['INT_SAMPLE'+'R_3D'],_0x4b9ce9['UNSIGNED_I'+'NT_SAMPLER'+'_3D'],_0x4b9ce9['SAMPLER_2D'+'_ARRAY'],_0x4b9ce9['INT_SAMPLE'+'R_2D_ARRAY'],_0x4b9ce9['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]),this['glAddress']=[_0x4b9ce9['REPEAT'],_0x4b9ce9['CLAMP_TO_E'+'DGE'],_0x4b9ce9['MIRRORED_R'+'EPEAT']],this['glBlendEqu'+'ation']=[_0x4b9ce9['FUNC_ADD'],_0x4b9ce9['FUNC_SUBTR'+'ACT'],_0x4b9ce9['FUNC_REVER'+'SE_SUBTRAC'+'T'],_0x4b9ce9['MIN'],_0x4b9ce9['MAX']],this['glBlendFun'+'ctionColor']=[_0x4b9ce9['ZERO'],_0x4b9ce9['ONE'],_0x4b9ce9['SRC_COLOR'],_0x4b9ce9['ONE_MINUS_'+'SRC_COLOR'],_0x4b9ce9['DST_COLOR'],_0x4b9ce9['ONE_MINUS_'+'DST_COLOR'],_0x4b9ce9['SRC_ALPHA'],_0x4b9ce9['SRC_ALPHA_'+'SATURATE'],_0x4b9ce9['ONE_MINUS_'+'SRC_ALPHA'],_0x4b9ce9['DST_ALPHA'],_0x4b9ce9['ONE_MINUS_'+'DST_ALPHA'],_0x4b9ce9['CONSTANT_C'+'OLOR'],_0x4b9ce9['ONE_MINUS_'+'CONSTANT_C'+'OLOR']],this['glBlendFun'+'ctionAlpha']=[_0x4b9ce9['ZERO'],_0x4b9ce9['ONE'],_0x4b9ce9['SRC_COLOR'],_0x4b9ce9['ONE_MINUS_'+'SRC_COLOR'],_0x4b9ce9['DST_COLOR'],_0x4b9ce9['ONE_MINUS_'+'DST_COLOR'],_0x4b9ce9['SRC_ALPHA'],_0x4b9ce9['SRC_ALPHA_'+'SATURATE'],_0x4b9ce9['ONE_MINUS_'+'SRC_ALPHA'],_0x4b9ce9['DST_ALPHA'],_0x4b9ce9['ONE_MINUS_'+'DST_ALPHA'],_0x4b9ce9['CONSTANT_A'+'LPHA'],_0x4b9ce9['ONE_MINUS_'+'CONSTANT_A'+'LPHA']],this['glComparis'+'on']=[_0x4b9ce9['NEVER'],_0x4b9ce9['LESS'],_0x4b9ce9['EQUAL'],_0x4b9ce9['LEQUAL'],_0x4b9ce9['GREATER'],_0x4b9ce9['NOTEQUAL'],_0x4b9ce9['GEQUAL'],_0x4b9ce9['ALWAYS']],this['glStencilO'+'p']=[_0x4b9ce9['KEEP'],_0x4b9ce9['ZERO'],_0x4b9ce9['REPLACE'],_0x4b9ce9['INCR'],_0x4b9ce9['INCR_WRAP'],_0x4b9ce9['DECR'],_0x4b9ce9['DECR_WRAP'],_0x4b9ce9['INVERT']],this['glClearFla'+'g']=[-0x2b3*0x9+0xc91*-0x1+0x2*0x126e,_0x4b9ce9['COLOR_BUFF'+'ER_BIT'],_0x4b9ce9['DEPTH_BUFF'+'ER_BIT'],_0x4b9ce9['COLOR_BUFF'+'ER_BIT']|_0x4b9ce9['DEPTH_BUFF'+'ER_BIT'],_0x4b9ce9['STENCIL_BU'+'FFER_BIT'],_0x4b9ce9['STENCIL_BU'+'FFER_BIT']|_0x4b9ce9['COLOR_BUFF'+'ER_BIT'],_0x4b9ce9['STENCIL_BU'+'FFER_BIT']|_0x4b9ce9['DEPTH_BUFF'+'ER_BIT'],_0x4b9ce9['STENCIL_BU'+'FFER_BIT']|_0x4b9ce9['COLOR_BUFF'+'ER_BIT']|_0x4b9ce9['DEPTH_BUFF'+'ER_BIT']],this['glCull']=[-0x13c7*-0x1+0x6ff+-0x1ac6,_0x4b9ce9['BACK'],_0x4b9ce9['FRONT'],_0x4b9ce9['FRONT_AND_'+'BACK']],this['glFilter']=[_0x4b9ce9['NEAREST'],_0x4b9ce9['LINEAR'],_0x4b9ce9['NEAREST_MI'+'PMAP_NEARE'+'ST'],_0x4b9ce9['NEAREST_MI'+'PMAP_LINEA'+'R'],_0x4b9ce9['LINEAR_MIP'+'MAP_NEARES'+'T'],_0x4b9ce9['LINEAR_MIP'+'MAP_LINEAR']],this['glPrimitiv'+'e']=[_0x4b9ce9['POINTS'],_0x4b9ce9['LINES'],_0x4b9ce9['LINE_LOOP'],_0x4b9ce9['LINE_STRIP'],_0x4b9ce9['TRIANGLES'],_0x4b9ce9['TRIANGLE_S'+'TRIP'],_0x4b9ce9['TRIANGLE_F'+'AN']],this['glType']=[_0x4b9ce9['BYTE'],_0x4b9ce9['UNSIGNED_B'+'YTE'],_0x4b9ce9['SHORT'],_0x4b9ce9['UNSIGNED_S'+'HORT'],_0x4b9ce9['INT'],_0x4b9ce9['UNSIGNED_I'+'NT'],_0x4b9ce9['FLOAT'],_0x4b9ce9['HALF_FLOAT']],this['pcUniformT'+'ype']={},this['pcUniformT'+'ype'][_0x4b9ce9['BOOL']]=mn,this['pcUniformT'+'ype'][_0x4b9ce9['INT']]=da,this['pcUniformT'+'ype'][_0x4b9ce9['FLOAT']]=$s,this['pcUniformT'+'ype'][_0x4b9ce9['FLOAT_VEC2']]=fa,this['pcUniformT'+'ype'][_0x4b9ce9['FLOAT_VEC3']]=ds,this['pcUniformT'+'ype'][_0x4b9ce9['FLOAT_VEC4']]=An,this['pcUniformT'+'ype'][_0x4b9ce9['INT_VEC2']]=ra,this['pcUniformT'+'ype'][_0x4b9ce9['INT_VEC3']]=aa,this['pcUniformT'+'ype'][_0x4b9ce9['INT_VEC4']]=na,this['pcUniformT'+'ype'][_0x4b9ce9['BOOL_VEC2']]=Go,this['pcUniformT'+'ype'][_0x4b9ce9['BOOL_VEC3']]=Ho,this['pcUniformT'+'ype'][_0x4b9ce9['BOOL_VEC4']]=Wo,this['pcUniformT'+'ype'][_0x4b9ce9['FLOAT_MAT2']]=jc,this['pcUniformT'+'ype'][_0x4b9ce9['FLOAT_MAT3']]=Cn,this['pcUniformT'+'ype'][_0x4b9ce9['FLOAT_MAT4']]=li,this['pcUniformT'+'ype'][_0x4b9ce9['SAMPLER_2D']]=ox,this['pcUniformT'+'ype'][_0x4b9ce9['SAMPLER_CU'+'BE']]=lx,this['pcUniformT'+'ype'][_0x4b9ce9['UNSIGNED_I'+'NT']]=Pn,this['pcUniformT'+'ype'][_0x4b9ce9['UNSIGNED_I'+'NT_VEC2']]=Mn,this['pcUniformT'+'ype'][_0x4b9ce9['UNSIGNED_I'+'NT_VEC3']]=Dn,this['pcUniformT'+'ype'][_0x4b9ce9['UNSIGNED_I'+'NT_VEC4']]=In,this['pcUniformT'+'ype'][_0x4b9ce9['SAMPLER_2D'+'_SHADOW']]=cx,this['pcUniformT'+'ype'][_0x4b9ce9['SAMPLER_CU'+'BE_SHADOW']]=hx,this['pcUniformT'+'ype'][_0x4b9ce9['SAMPLER_2D'+'_ARRAY']]=fx,this['pcUniformT'+'ype'][_0x4b9ce9['SAMPLER_3D']]=dx,this['pcUniformT'+'ype'][_0x4b9ce9['INT_SAMPLE'+'R_2D']]=ux,this['pcUniformT'+'ype'][_0x4b9ce9['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=px,this['pcUniformT'+'ype'][_0x4b9ce9['INT_SAMPLE'+'R_CUBE']]=mx,this['pcUniformT'+'ype'][_0x4b9ce9['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=_x,this['pcUniformT'+'ype'][_0x4b9ce9['INT_SAMPLE'+'R_3D']]=gx,this['pcUniformT'+'ype'][_0x4b9ce9['UNSIGNED_I'+'NT_SAMPLER'+'_3D']]=Sx,this['pcUniformT'+'ype'][_0x4b9ce9['INT_SAMPLE'+'R_2D_ARRAY']]=yx,this['pcUniformT'+'ype'][_0x4b9ce9['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]=vx,this['targetToSl'+'ot']={},this['targetToSl'+'ot'][_0x4b9ce9['TEXTURE_2D']]=-0x2539+-0xdb5+0x32ee,this['targetToSl'+'ot'][_0x4b9ce9['TEXTURE_CU'+'BE_MAP']]=-0x41*-0x80+0x703*0x1+-0x2782,this['targetToSl'+'ot'][_0x4b9ce9['TEXTURE_3D']]=0x14*-0x1b5+0x5*0x567+0x1d*0x3f;let _0x5569aa,_0x51643e,_0x5e97ff,_0x23e772,_0x897132;this['commitFunc'+'tion']=[],this['commitFunc'+'tion'][mn]=function(_0x18e9e9,_0x46073a){_0x18e9e9['value']!==_0x46073a&&(_0x4b9ce9['uniform1i'](_0x18e9e9['locationId'],_0x46073a),_0x18e9e9['value']=_0x46073a);},this['commitFunc'+'tion'][da]=this['commitFunc'+'tion'][mn],this['commitFunc'+'tion'][$s]=function(_0xc7526a,_0x74f469){_0xc7526a['value']!==_0x74f469&&(_0x4b9ce9['uniform1f'](_0xc7526a['locationId'],_0x74f469),_0xc7526a['value']=_0x74f469);},this['commitFunc'+'tion'][fa]=function(_0x289309,_0x4e7a07){_0x897132=_0x289309['value'],_0x5569aa=_0x4e7a07[0x4da+0x4cd+-0x9a7],_0x51643e=_0x4e7a07[0x322+-0x1fca+-0x29b*-0xb],(_0x897132[-0x19f9+0x1e89+-0x490]!==_0x5569aa||_0x897132[0x4f9*0x5+-0x84d+-0x9*0x1d7]!==_0x51643e)&&(_0x4b9ce9['uniform2fv'](_0x289309['locationId'],_0x4e7a07),_0x897132[-0x11cf*-0x1+0x9aa*-0x1+-0x5*0x1a1]=_0x5569aa,_0x897132[-0x2b*0x5+-0x1aee+-0x2d*-0x9e]=_0x51643e);},this['commitFunc'+'tion'][ds]=function(_0x1ef486,_0xdbace3){_0x897132=_0x1ef486['value'],_0x5569aa=_0xdbace3[-0x25f2+0x2690+-0x9e*0x1],_0x51643e=_0xdbace3[-0x525*0x3+0x186f+-0x8ff],_0x5e97ff=_0xdbace3[0x1a8f+0x1aa4*-0x1+0x17],(_0x897132[-0x1149+0x1c97*0x1+-0xb4e]!==_0x5569aa||_0x897132[-0x138b*0x1+-0x206b+0x33f7]!==_0x51643e||_0x897132[-0x32*0x3d+0x13cc+-0x7e0]!==_0x5e97ff)&&(_0x4b9ce9['uniform3fv'](_0x1ef486['locationId'],_0xdbace3),_0x897132[0x61d*-0x3+0x1*0x1492+-0x23b]=_0x5569aa,_0x897132[0x1d8a+0x39f+0x4*-0x84a]=_0x51643e,_0x897132[-0x5e*-0x16+-0x1be8+0x13d6*0x1]=_0x5e97ff);},this['commitFunc'+'tion'][An]=function(_0x3aa21f,_0x4db59b){_0x897132=_0x3aa21f['value'],_0x5569aa=_0x4db59b[0xed3+0x1*-0xe8f+-0x44],_0x51643e=_0x4db59b[-0x219d+0x8c9+0x18d5],_0x5e97ff=_0x4db59b[0x1a5b+0x1b9b+0xd7d*-0x4],_0x23e772=_0x4db59b[-0x101*-0xc+0x47f+-0x1088],(_0x897132[0x5bc+-0x1a*0xf1+-0x95f*-0x2]!==_0x5569aa||_0x897132[0xd10+-0xd85*-0x1+-0x1a94]!==_0x51643e||_0x897132[0x601+-0x6a5*-0x3+-0x1*0x19ee]!==_0x5e97ff||_0x897132[0x34*-0x1a+0x1bd4+0x9*-0x281]!==_0x23e772)&&(_0x4b9ce9['uniform4fv'](_0x3aa21f['locationId'],_0x4db59b),_0x897132[-0x1f02+-0x1*0xdab+-0x2cad*-0x1]=_0x5569aa,_0x897132[-0x5a5+0x7d6+-0x230]=_0x51643e,_0x897132[0x7*-0x125+0x3b*0x7a+-0x15*0xf5]=_0x5e97ff,_0x897132[-0x1*0x35f+-0x949*-0x1+-0x1*0x5e7]=_0x23e772);},this['commitFunc'+'tion'][ra]=function(_0x2a8bf0,_0x3985a9){_0x897132=_0x2a8bf0['value'],_0x5569aa=_0x3985a9[-0x26c1+-0x14c8+-0x3b89*-0x1],_0x51643e=_0x3985a9[-0x1*-0x1d4e+0x24f5+0x21*-0x202],(_0x897132[0x5f3*0x6+0x2219+-0x1*0x45cb]!==_0x5569aa||_0x897132[0x1f2+-0x2467*0x1+0x2*0x113b]!==_0x51643e)&&(_0x4b9ce9['uniform2iv'](_0x2a8bf0['locationId'],_0x3985a9),_0x897132[0x1eb5+0x11*-0x49+-0x19dc]=_0x5569aa,_0x897132[-0x1f*0x94+-0x11e*-0x2+0xfb1]=_0x51643e);},this['commitFunc'+'tion'][Go]=this['commitFunc'+'tion'][ra],this['commitFunc'+'tion'][aa]=function(_0x434d8a,_0x11400a){_0x897132=_0x434d8a['value'],_0x5569aa=_0x11400a[0x1ff1+-0x15f1+0x2*-0x500],_0x51643e=_0x11400a[0x267f+0x1391+-0x3a0f],_0x5e97ff=_0x11400a[0x1123+0x4da*0x7+-0x3317],(_0x897132[0x815*0x1+-0x266e+-0x11*-0x1c9]!==_0x5569aa||_0x897132[-0x5*0x40f+-0x1*-0x20ed+-0xca1]!==_0x51643e||_0x897132[0x5*0x17f+0x1fa6+-0x271f]!==_0x5e97ff)&&(_0x4b9ce9['uniform3iv'](_0x434d8a['locationId'],_0x11400a),_0x897132[-0x1100+0x2*-0x129d+0x363a]=_0x5569aa,_0x897132[0x1b91+0x260d+-0x1fd*0x21]=_0x51643e,_0x897132[0x106+0x1377+-0x147b]=_0x5e97ff);},this['commitFunc'+'tion'][Ho]=this['commitFunc'+'tion'][aa],this['commitFunc'+'tion'][na]=function(_0x254712,_0x3c8dff){_0x897132=_0x254712['value'],_0x5569aa=_0x3c8dff[0x1ee0+-0x22a0+0x3c0],_0x51643e=_0x3c8dff[0x10de+0x1*0x1c81+-0x2d5e],_0x5e97ff=_0x3c8dff[0x2*-0xaf9+-0x2284+0x3878],_0x23e772=_0x3c8dff[-0x1*-0xa79+0xb3e+-0x15b4],(_0x897132[-0xc3b*0x1+0x43a+0x801]!==_0x5569aa||_0x897132[0x46e+0x1923+-0x1d90]!==_0x51643e||_0x897132[0x3*0x883+-0x1e45+0x25f*0x2]!==_0x5e97ff||_0x897132[0x1f85*0x1+0x1*0x17d5+0x1f*-0x1c9]!==_0x23e772)&&(_0x4b9ce9['uniform4iv'](_0x254712['locationId'],_0x3c8dff),_0x897132[-0x2f9*-0xc+0x100*-0x4+-0x7eb*0x4]=_0x5569aa,_0x897132[0x115b+-0x1a71+0x917]=_0x51643e,_0x897132[0x1d1+-0x7*0x317+0x13d2]=_0x5e97ff,_0x897132[-0xef3+-0x2e*-0x7f+0x1*-0x7dc]=_0x23e772);},this['commitFunc'+'tion'][Wo]=this['commitFunc'+'tion'][na],this['commitFunc'+'tion'][jc]=function(_0x46f80e,_0xe1fec7){_0x4b9ce9['uniformMat'+'rix2fv'](_0x46f80e['locationId'],!(-0x71f+0x9*0x8e+-0xb6*-0x3),_0xe1fec7);},this['commitFunc'+'tion'][Cn]=function(_0x1f39cd,_0x45c215){_0x4b9ce9['uniformMat'+'rix3fv'](_0x1f39cd['locationId'],!(-0x1d0a+0x12da+0x1*0xa31),_0x45c215);},this['commitFunc'+'tion'][li]=function(_0x5c5e31,_0xb79724){_0x4b9ce9['uniformMat'+'rix4fv'](_0x5c5e31['locationId'],!(-0x641*0x3+-0x1535+-0x9*-0x471),_0xb79724);},this['commitFunc'+'tion'][$h]=function(_0xc0bc9e,_0x5c6e8b){_0x4b9ce9['uniform1fv'](_0xc0bc9e['locationId'],_0x5c6e8b);},this['commitFunc'+'tion'][Xh]=function(_0x573d0d,_0x1dd64f){_0x4b9ce9['uniform2fv'](_0x573d0d['locationId'],_0x1dd64f);},this['commitFunc'+'tion'][qh]=function(_0xadf20d,_0x14fca7){_0x4b9ce9['uniform3fv'](_0xadf20d['locationId'],_0x14fca7);},this['commitFunc'+'tion'][ap]=function(_0x3f8e15,_0x1272f8){_0x4b9ce9['uniform4fv'](_0x3f8e15['locationId'],_0x1272f8);},this['commitFunc'+'tion'][Pn]=function(_0x349418,_0x14a0ea){_0x349418['value']!==_0x14a0ea&&(_0x4b9ce9['uniform1ui'](_0x349418['locationId'],_0x14a0ea),_0x349418['value']=_0x14a0ea);},this['commitFunc'+'tion'][Mn]=function(_0x202271,_0x2080c9){_0x897132=_0x202271['value'],_0x5569aa=_0x2080c9[0xeb4+-0x55+-0xe5f*0x1],_0x51643e=_0x2080c9[-0xaa2*-0x1+0x1dd2*0x1+-0x2873],(_0x897132[-0x1255+-0x25*-0xc7+-0xa6e]!==_0x5569aa||_0x897132[-0x395*-0x5+-0x44*-0x25+-0x1bbc]!==_0x51643e)&&(_0x4b9ce9['uniform2ui'+'v'](_0x202271['locationId'],_0x2080c9),_0x897132[0x15ba+0x1ed8+-0x6*0x8c3]=_0x5569aa,_0x897132[0x5*-0x3d7+0x26b1+-0x137d]=_0x51643e);},this['commitFunc'+'tion'][Dn]=function(_0x15427c,_0x19ba2e){_0x897132=_0x15427c['value'],_0x5569aa=_0x19ba2e[0x12*-0x34+0x221*0x4+-0x4*0x137],_0x51643e=_0x19ba2e[0x1*0x51a+-0x113+-0x1*0x406],_0x5e97ff=_0x19ba2e[-0x16cb+-0x17cb+0x2e98],(_0x897132[0x22bb+0x1*0xd67+-0x3022]!==_0x5569aa||_0x897132[-0x1a59+-0xaf*0x19+0x2b71*0x1]!==_0x51643e||_0x897132[-0x21d7+0x18bb+0x91e*0x1]!==_0x5e97ff)&&(_0x4b9ce9['uniform3ui'+'v'](_0x15427c['locationId'],_0x19ba2e),_0x897132[0x1*0x1cb3+0x24b5+0x4ac*-0xe]=_0x5569aa,_0x897132[-0xd*0x2fe+-0x1*-0x1b97+0xb50]=_0x51643e,_0x897132[-0x2116+0x465+0x1f*0xed]=_0x5e97ff);},this['commitFunc'+'tion'][In]=function(_0x5f46d6,_0x46dd52){_0x897132=_0x5f46d6['value'],_0x5569aa=_0x46dd52[-0x2235+-0x1c6*0x6+0x10b*0x2b],_0x51643e=_0x46dd52[0x112b+-0x812*0x3+-0x4*-0x1c3],_0x5e97ff=_0x46dd52[-0x12f7+0x1f0e+0x3*-0x407],_0x23e772=_0x46dd52[-0x1f50+0x1dcb+0x188],(_0x897132[-0x178a*0x1+-0x1630+0x2dba]!==_0x5569aa||_0x897132[-0x1e*0xa1+0x1b3e*0x1+-0x85f]!==_0x51643e||_0x897132[0xc85+0x2325+-0x64*0x7a]!==_0x5e97ff||_0x897132[-0x393*0x3+-0x2b*0xa7+0x26c9*0x1]!==_0x23e772)&&(_0x4b9ce9['uniform4ui'+'v'](_0x5f46d6['locationId'],_0x46dd52),_0x897132[0x67*0x35+0x1*0xf25+-0x48f*0x8]=_0x5569aa,_0x897132[0x463+-0x1e1b+0x5*0x525]=_0x51643e,_0x897132[0x1*-0x1e11+-0x1e92+0x1437*0x3]=_0x5e97ff,_0x897132[-0x1e73+-0x1e11*0x1+0x3c87]=_0x23e772);},this['commitFunc'+'tion'][Ln]=function(_0x18ae58,_0x29a73e){_0x4b9ce9['uniform1iv'](_0x18ae58['locationId'],_0x29a73e);},this['commitFunc'+'tion'][jh]=function(_0x716404,_0x26c13f){_0x4b9ce9['uniform1ui'+'v'](_0x716404['locationId'],_0x26c13f);},this['commitFunc'+'tion'][Yh]=this['commitFunc'+'tion'][Ln],this['commitFunc'+'tion'][Rn]=function(_0x435eed,_0x3199c5){_0x4b9ce9['uniform2iv'](_0x435eed['locationId'],_0x3199c5);},this['commitFunc'+'tion'][Kh]=function(_0x31d469,_0x5e9717){_0x4b9ce9['uniform2ui'+'v'](_0x31d469['locationId'],_0x5e9717);},this['commitFunc'+'tion'][Zh]=this['commitFunc'+'tion'][Rn],this['commitFunc'+'tion'][On]=function(_0x54101d,_0x1059a6){_0x4b9ce9['uniform3iv'](_0x54101d['locationId'],_0x1059a6);},this['commitFunc'+'tion'][Qh]=function(_0x13489a,_0x24d975){_0x4b9ce9['uniform3ui'+'v'](_0x13489a['locationId'],_0x24d975);},this['commitFunc'+'tion'][Jh]=this['commitFunc'+'tion'][On],this['commitFunc'+'tion'][Yc]=function(_0x265f64,_0x22c9ef){_0x4b9ce9['uniform4iv'](_0x265f64['locationId'],_0x22c9ef);},this['commitFunc'+'tion'][np]=function(_0x32bd2b,_0x27e975){_0x4b9ce9['uniform4ui'+'v'](_0x32bd2b['locationId'],_0x27e975);},this['commitFunc'+'tion'][op]=this['commitFunc'+'tion'][Yc],this['commitFunc'+'tion'][VS]=function(_0x1ea721,_0x256485){_0x4b9ce9['uniformMat'+'rix4fv'](_0x1ea721['locationId'],!(-0x2011*0x1+-0xb33*-0x1+0x14df),_0x256485);},this['constantTe'+'xSource']=this['scope']['resolve']('source'),this['postInit']();}['postInit'](){super['postInit'](),this['gpuProfile'+'r']=new TT(this);}['destroy'](){super['destroy']();const _0x413fba=this['gl'];this['feedback']&&_0x413fba['deleteTran'+'sformFeedb'+'ack'](this['feedback']),this['clearVerte'+'xArrayObje'+'ctCache'](),this['canvas']['removeEven'+'tListener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(-0x1cfe+0x2598+-0x1*0x899)),this['canvas']['removeEven'+'tListener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(-0x19b8+0xbf*-0x19+0x2c60)),this['_contextLo'+'stHandler']=null,this['_contextRe'+'storedHand'+'ler']=null,this['gl']=null,super['postDestro'+'y']();}['createBack'+'buffer'](_0x42b27f){this['supportsSt'+'encil']=this['initOption'+'s']['stencil'],this['backBuffer']=new gt({'name':'WebglFrame'+'buffer','graphicsDevice':this,'depth':this['initOption'+'s']['depth'],'stencil':this['supportsSt'+'encil'],'samples':this['samples']}),this['backBuffer']['impl']['suppliedCo'+'lorFramebu'+'ffer']=_0x42b27f;}['updateBack'+'bufferForm'+'at'](_0x2fa605){const _0x1e7573=this['gl'];_0x1e7573['bindFrameb'+'uffer'](_0x1e7573['FRAMEBUFFE'+'R'],_0x2fa605);const _0x133a89=this['gl']['getParamet'+'er'](this['gl']['ALPHA_BITS']);this['backBuffer'+'Format']=_0x133a89?Ne:wr;}['updateBack'+'buffer'](){const _0x3ba6bd=this['canvas']['width']!==this['backBuffer'+'Size']['x']||this['canvas']['height']!==this['backBuffer'+'Size']['y'];(this['_defaultFr'+'amebufferC'+'hanged']||_0x3ba6bd)&&(this['_defaultFr'+'amebufferC'+'hanged']&&this['updateBack'+'bufferForm'+'at'](this['_defaultFr'+'amebuffer']),this['_defaultFr'+'amebufferC'+'hanged']=!(0x3b4*0x2+0x25c3+0x11a*-0x29),this['backBuffer'+'Size']['set'](this['canvas']['width'],this['canvas']['height']),this['backBuffer']['destroy'](),this['createBack'+'buffer'](this['_defaultFr'+'amebuffer']));}['createVert'+'exBufferIm'+'pl'](_0x4d92cc,_0x2062b6){return new hT();}['createInde'+'xBufferImp'+'l'](_0x42e69d){return new dT(_0x42e69d);}['createShad'+'erImpl'](_0x92c3b3){return new gT(_0x92c3b3);}['createText'+'ureImpl'](_0x2b59c1){return new ST(_0x2b59c1);}['createRend'+'erTargetIm'+'pl'](_0x2022f4){return new vT();}['pushMarker'](_0x4107b3){if(Me['browser']&&window['spector']){const _0x4c5745=Q['toString']();window['spector']['setMarker'](_0x4c5745+'\x20#');}}['popMarker'](){if(Me['browser']&&window['spector']){const _0x3014fb=Q['toString']();_0x3014fb['length']?window['spector']['setMarker'](_0x3014fb+'\x20#'):window['spector']['clearMarke'+'r']();}}['getPrecisi'+'on'](){const _0x5d8421=this['gl'];let _0x468923='highp';if(_0x5d8421['getShaderP'+'recisionFo'+'rmat']){const _0xb2d2f6=_0x5d8421['getShaderP'+'recisionFo'+'rmat'](_0x5d8421['VERTEX_SHA'+'DER'],_0x5d8421['HIGH_FLOAT']),_0x4e64bb=_0x5d8421['getShaderP'+'recisionFo'+'rmat'](_0x5d8421['VERTEX_SHA'+'DER'],_0x5d8421['MEDIUM_FLO'+'AT']),_0x35589d=_0x5d8421['getShaderP'+'recisionFo'+'rmat'](_0x5d8421['FRAGMENT_S'+'HADER'],_0x5d8421['HIGH_FLOAT']),_0x596364=_0x5d8421['getShaderP'+'recisionFo'+'rmat'](_0x5d8421['FRAGMENT_S'+'HADER'],_0x5d8421['MEDIUM_FLO'+'AT']);if(_0xb2d2f6&&_0x4e64bb&&_0x35589d&&_0x596364){const _0x36e66b=_0xb2d2f6['precision']>-0x1*-0x16fb+-0x11c6*-0x1+-0x28c1&&_0x35589d['precision']>0x238*0x2+-0x1f*0xf7+0x1979*0x1,_0x13ff94=_0x4e64bb['precision']>-0x3d8+-0x7c1+-0xb99*-0x1&&_0x596364['precision']>-0x1d59+0xd*0x282+-0x341;_0x36e66b||(_0x13ff94?(_0x468923='mediump',w['warn']('WARNING:\x20h'+'ighp\x20not\x20s'+'upported,\x20'+'using\x20medi'+'ump')):(_0x468923='lowp',w['warn']('WARNING:\x20h'+'ighp\x20and\x20m'+'ediump\x20not'+'\x20supported'+',\x20using\x20lo'+'wp')));}}return _0x468923;}['getExtensi'+'on'](){for(let _0x4237ce=0x1dbc+-0xc0b*0x2+-0x6*0xf1;_0x4237ce<arguments['length'];_0x4237ce++)if(this['supportedE'+'xtensions']['indexOf'](arguments[_0x4237ce])!==-(-0x69e+0x21*0xa3+-0xe64))return this['gl']['getExtensi'+'on'](arguments[_0x4237ce]);return null;}get['extDisjoin'+'tTimerQuer'+'y'](){return this['_extDisjoi'+'ntTimerQue'+'ry']||(this['_extDisjoi'+'ntTimerQue'+'ry']=this['getExtensi'+'on']('EXT_disjoi'+'nt_timer_q'+'uery_webgl'+'2','EXT_disjoi'+'nt_timer_q'+'uery')),this['_extDisjoi'+'ntTimerQue'+'ry'];}['initialize'+'Extensions'](){const _0x23d670=this['gl'];this['supportedE'+'xtensions']=_0x23d670['getSupport'+'edExtensio'+'ns']()??[],this['_extDisjoi'+'ntTimerQue'+'ry']=null,this['textureRG1'+'1B10Render'+'able']=!(-0x212b+-0xf7b+0x30a6),this['extColorBu'+'fferFloat']=this['getExtensi'+'on']('EXT_color_'+'buffer_flo'+'at'),this['textureFlo'+'atRenderab'+'le']=!!this['extColorBu'+'fferFloat'],this['extColorBu'+'fferHalfFl'+'oat']=this['getExtensi'+'on']('EXT_color_'+'buffer_hal'+'f_float'),this['textureHal'+'fFloatRend'+'erable']=!!this['extColorBu'+'fferHalfFl'+'oat']||!!this['extColorBu'+'fferFloat'],this['extDebugRe'+'ndererInfo']=this['getExtensi'+'on']('WEBGL_debu'+'g_renderer'+'_info'),this['extTexture'+'FloatLinea'+'r']=this['getExtensi'+'on']('OES_textur'+'e_float_li'+'near'),this['textureFlo'+'atFilterab'+'le']=!!this['extTexture'+'FloatLinea'+'r'],this['extFloatBl'+'end']=this['getExtensi'+'on']('EXT_float_'+'blend'),this['extTexture'+'FilterAnis'+'otropic']=this['getExtensi'+'on']('EXT_textur'+'e_filter_a'+'nisotropic','WEBKIT_EXT'+'_texture_f'+'ilter_anis'+'otropic'),this['extParalle'+'lShaderCom'+'pile']=this['getExtensi'+'on']('KHR_parall'+'el_shader_'+'compile'),this['extCompres'+'sedTexture'+'ETC1']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc1'),this['extCompres'+'sedTexture'+'ETC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc'),this['extCompres'+'sedTexture'+'PVRTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_pvrtc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_pvrtc'),this['extCompres'+'sedTexture'+'S3TC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_s3tc'),this['extCompres'+'sedTexture'+'S3TC_SRGB']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc_'+'srgb'),this['extCompres'+'sedTexture'+'ATC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_atc'),this['extCompres'+'sedTexture'+'ASTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_astc'),this['extTexture'+'Compressio'+'nBPTC']=this['getExtensi'+'on']('EXT_textur'+'e_compress'+'ion_bptc');}['initialize'+'Capabiliti'+'es'](){const _0x3bc7da=this['gl'];let _0x2b834c;const _0x2fcf2f=typeof navigator<'u'?navigator['userAgent']:'';this['maxPrecisi'+'on']=this['precision']=this['getPrecisi'+'on']();const _0x1ac254=_0x3bc7da['getContext'+'Attributes']();this['supportsMs'+'aa']=(_0x1ac254==null?void(0x15ca+0x21b3+-0x1*0x377d):_0x1ac254['antialias'])??!(-0x33*-0x67+-0x19ba*0x1+-0x1d*-0x2e),this['supportsSt'+'encil']=(_0x1ac254==null?void(0x39*0x17+-0x65d+0x13e):_0x1ac254['stencil'])??!(-0x5*0x6a+-0x5b3*0x2+0xd79),this['maxTexture'+'Size']=_0x3bc7da['getParamet'+'er'](_0x3bc7da['MAX_TEXTUR'+'E_SIZE']),this['maxCubeMap'+'Size']=_0x3bc7da['getParamet'+'er'](_0x3bc7da['MAX_CUBE_M'+'AP_TEXTURE'+'_SIZE']),this['maxRenderB'+'ufferSize']=_0x3bc7da['getParamet'+'er'](_0x3bc7da['MAX_RENDER'+'BUFFER_SIZ'+'E']),this['maxTexture'+'s']=_0x3bc7da['getParamet'+'er'](_0x3bc7da['MAX_TEXTUR'+'E_IMAGE_UN'+'ITS']),this['maxCombine'+'dTextures']=_0x3bc7da['getParamet'+'er'](_0x3bc7da['MAX_COMBIN'+'ED_TEXTURE'+'_IMAGE_UNI'+'TS']),this['maxVertexT'+'extures']=_0x3bc7da['getParamet'+'er'](_0x3bc7da['MAX_VERTEX'+'_TEXTURE_I'+'MAGE_UNITS']),this['vertexUnif'+'ormsCount']=_0x3bc7da['getParamet'+'er'](_0x3bc7da['MAX_VERTEX'+'_UNIFORM_V'+'ECTORS']),this['fragmentUn'+'iformsCoun'+'t']=_0x3bc7da['getParamet'+'er'](_0x3bc7da['MAX_FRAGME'+'NT_UNIFORM'+'_VECTORS']),this['maxColorAt'+'tachments']=_0x3bc7da['getParamet'+'er'](_0x3bc7da['MAX_COLOR_'+'ATTACHMENT'+'S']),this['maxVolumeS'+'ize']=_0x3bc7da['getParamet'+'er'](_0x3bc7da['MAX_3D_TEX'+'TURE_SIZE']),_0x2b834c=this['extDebugRe'+'ndererInfo'],this['unmaskedRe'+'nderer']=_0x2b834c?_0x3bc7da['getParamet'+'er'](_0x2b834c['UNMASKED_R'+'ENDERER_WE'+'BGL']):'',this['unmaskedVe'+'ndor']=_0x2b834c?_0x3bc7da['getParamet'+'er'](_0x2b834c['UNMASKED_V'+'ENDOR_WEBG'+'L']):'';const _0x1e698e=/\bMali-G52+/,_0x5563b4=/SM-[a-zA-Z0-9]+/;this['supportsGp'+'uParticles']=!(this['unmaskedVe'+'ndor']==='ARM'&&_0x2fcf2f['match'](_0x5563b4))&&!this['unmaskedRe'+'nderer']['match'](_0x1e698e),_0x2b834c=this['extTexture'+'FilterAnis'+'otropic'],this['maxAnisotr'+'opy']=_0x2b834c?_0x3bc7da['getParamet'+'er'](_0x2b834c['MAX_TEXTUR'+'E_MAX_ANIS'+'OTROPY_EXT']):-0x515*-0x5+0xb02+0x4f*-0x76;const _0x9083cc=!this['forceDisab'+'leMultisam'+'pling'];this['maxSamples']=_0x9083cc?_0x3bc7da['getParamet'+'er'](_0x3bc7da['MAX_SAMPLE'+'S']):-0x773+-0xac0+0x1234,this['maxSamples']=Math['min'](this['maxSamples'],-0x1072*0x2+0x21c0+-0x8*0x1b),this['samples']=_0x9083cc&&this['backBuffer'+'Antialias']?this['maxSamples']:0x9e*0x21+-0x1921+-0xf4*-0x5,this['supportsAr'+'eaLights']=!Me['android'],this['maxTexture'+'s']<=0x313*0x1+0x1967+-0x1c72&&(this['supportsAr'+'eaLights']=!(-0x7*0x1ca+0xb*0xe7+0x29a)),this['initCapsDe'+'fines']();}['initialize'+'RenderStat'+'e'](){super['initialize'+'RenderStat'+'e']();const _0x5387da=this['gl'];_0x5387da['disable'](_0x5387da['BLEND']),_0x5387da['blendFunc'](_0x5387da['ONE'],_0x5387da['ZERO']),_0x5387da['blendEquat'+'ion'](_0x5387da['FUNC_ADD']),_0x5387da['colorMask'](!(-0x1cb6+-0x1*-0xced+-0x1c1*-0x9),!(-0x1*0x269b+-0x11*0x167+0x3e72),!(0x16*-0xca+-0x1c3b+0xb*0x425),!(-0x6a4+-0x1b*-0x3+0x653)),_0x5387da['blendColor'](-0x1*0x185d+0x9*0x3a+0x1653,0x219a+-0x1*0x167+-0x2033,0xe*-0x26f+-0x528*0x1+0x2*0x139d,0x2390+0x8c0+-0x2c50*0x1),_0x5387da['enable'](_0x5387da['CULL_FACE']),this['cullFace']=_0x5387da['BACK'],_0x5387da['cullFace'](_0x5387da['BACK']),_0x5387da['enable'](_0x5387da['DEPTH_TEST']),_0x5387da['depthFunc'](_0x5387da['LEQUAL']),_0x5387da['depthMask'](!(0x1902+-0x1969+0x67)),this['stencil']=!(-0x10e1+0x40f+0x31*0x43),_0x5387da['disable'](_0x5387da['STENCIL_TE'+'ST']),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=Hi,this['stencilRef'+'Front']=this['stencilRef'+'Back']=-0x1677+-0x1*-0x8b5+0xdc2,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=0x163d*0x1+0x1189+-0x26c7,_0x5387da['stencilFun'+'c'](_0x5387da['ALWAYS'],-0x19b+-0xfed+0x1188,-0xa1a+0xadd*0x1+0x3c),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=pn,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=pn,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=pn,this['stencilWri'+'teMaskFron'+'t']=0xe2*0x1c+-0xa7e+-0x469*0x3,this['stencilWri'+'teMaskBack']=0x11c7+-0x5*0x547+0x1*0x99b,_0x5387da['stencilOp'](_0x5387da['KEEP'],_0x5387da['KEEP'],_0x5387da['KEEP']),_0x5387da['stencilMas'+'k'](0x2bd*-0xd+-0x1694+-0x874*-0x7),this['alphaToCov'+'erage']=!(-0x1a04+-0x1b61+-0x557*-0xa),this['raster']=!(0x9f2+0x116f*0x2+-0x59a*0x8),_0x5387da['disable'](_0x5387da['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']),_0x5387da['disable'](_0x5387da['RASTERIZER'+'_DISCARD']),this['depthBiasE'+'nabled']=!(-0xa*0x33d+0x210d+-0x11*0xa),_0x5387da['disable'](_0x5387da['POLYGON_OF'+'FSET_FILL']),this['clearDepth']=-0x1da0+-0x77e+-0x1*-0x251f,_0x5387da['clearDepth'](0x4a3*0x1+0x1d05+-0x21a7),this['clearColor']=new ie(0x1a7d+-0xa7a*-0x1+-0x1*0x24f7,-0x175a+-0x12e1+0x2a3b,0x1*0x106c+-0x8f9+0x1*-0x773,0x1509+-0x1fd5+-0x2b3*-0x4),_0x5387da['clearColor'](0x1*0x79c+0x1*0x1de8+-0x12c2*0x2,0x232b+0x2280+0x7b*-0x91,0x1371+-0x45*0x1d+-0x2e8*0x4,0x56*0x1a+-0x24f8+0x1c3c),this['clearStenc'+'il']=0x872*-0x2+-0x1cad*-0x1+-0xbc9,_0x5387da['clearStenc'+'il'](-0x154*0x2+-0x26*-0x6f+0xdd2*-0x1),_0x5387da['hint'](_0x5387da['FRAGMENT_S'+'HADER_DERI'+'VATIVE_HIN'+'T'],_0x5387da['NICEST']),_0x5387da['enable'](_0x5387da['SCISSOR_TE'+'ST']),_0x5387da['pixelStore'+'i'](_0x5387da['UNPACK_COL'+'ORSPACE_CO'+'NVERSION_W'+'EBGL'],_0x5387da['NONE']),this['unpackFlip'+'Y']=!(-0xb14*0x1+0x3*0x6bb+-0x91c),_0x5387da['pixelStore'+'i'](_0x5387da['UNPACK_FLI'+'P_Y_WEBGL'],!(0xe9b+0x1e38+-0x2cd2)),this['unpackPrem'+'ultiplyAlp'+'ha']=!(-0x6*-0x178+0x3b5+0xc84*-0x1),_0x5387da['pixelStore'+'i'](_0x5387da['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],!(0x304*-0x2+-0x10e8+0x16f1*0x1)),_0x5387da['pixelStore'+'i'](_0x5387da['UNPACK_ALI'+'GNMENT'],0x249a*-0x1+-0xcdb+0x3176);}['initTextur'+'eUnits'](_0x328433=-0x47*0x6e+0x9*-0x8f+0x2399){this['textureUni'+'ts']=[];for(let _0x5b31f3=-0x18*-0xac+-0x17*0x59+-0x821*0x1;_0x5b31f3<_0x328433;_0x5b31f3++)this['textureUni'+'ts']['push']([null,null,null]);}['initialize'+'ContextCac'+'hes'](){super['initialize'+'ContextCac'+'hes'](),this['_vaoMap']=new Map(),this['boundVao']=null,this['activeFram'+'ebuffer']=null,this['feedback']=null,this['transformF'+'eedbackBuf'+'fer']=null,this['textureUni'+'t']=-0x165+0x1869+0x7ac*-0x3,this['initTextur'+'eUnits'](this['maxCombine'+'dTextures']);}['loseContex'+'t'](){super['loseContex'+'t']();for(const _0x4abe6b of this['shaders'])_0x4abe6b['loseContex'+'t']();}['restoreCon'+'text'](){this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),super['restoreCon'+'text']();for(const _0x3c475b of this['shaders'])_0x3c475b['restoreCon'+'text']();}['setViewpor'+'t'](_0x463ce7,_0x284f53,_0x19e951,_0x43824e){(this['vx']!==_0x463ce7||this['vy']!==_0x284f53||this['vw']!==_0x19e951||this['vh']!==_0x43824e)&&(this['gl']['viewport'](_0x463ce7,_0x284f53,_0x19e951,_0x43824e),this['vx']=_0x463ce7,this['vy']=_0x284f53,this['vw']=_0x19e951,this['vh']=_0x43824e);}['setScissor'](_0x13a972,_0x5889bf,_0x5865fb,_0x1aeadb){(this['sx']!==_0x13a972||this['sy']!==_0x5889bf||this['sw']!==_0x5865fb||this['sh']!==_0x1aeadb)&&(this['gl']['scissor'](_0x13a972,_0x5889bf,_0x5865fb,_0x1aeadb),this['sx']=_0x13a972,this['sy']=_0x5889bf,this['sw']=_0x5865fb,this['sh']=_0x1aeadb);}['setFramebu'+'ffer'](_0x1bcd72){if(this['activeFram'+'ebuffer']!==_0x1bcd72){const _0x2ff7e6=this['gl'];_0x2ff7e6['bindFrameb'+'uffer'](_0x2ff7e6['FRAMEBUFFE'+'R'],_0x1bcd72),this['activeFram'+'ebuffer']=_0x1bcd72;}}['copyRender'+'Target'](_0x4e18c8,_0x3baf55,_0x1dde71,_0x5d3b22){var _0x156d54,_0x1a1322;const _0x13bc8e=this['gl'];if(_0x4e18c8===this['backBuffer']&&(_0x4e18c8=null),_0x1dde71){if(_0x3baf55){if(_0x4e18c8){if(!_0x4e18c8['_colorBuff'+'er']||!_0x3baf55['_colorBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20color\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(0x7*-0x33d+0xc3+0x15e9);if(_0x4e18c8['_colorBuff'+'er']['_format']!==_0x3baf55['_colorBuff'+'er']['_format'])return w['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20c'+'olor\x20forma'+'ts'),!(0x116*-0x18+-0x2131+0x3b42);}}else{if(!_0x4e18c8['_colorBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20empty\x20col'+'or\x20buffer\x20'+'to\x20backbuf'+'fer'),!(-0x1*-0x955+0x68b+-0xfdf);}}if(_0x5d3b22&&_0x4e18c8&&!_0x4e18c8['_depth']){if(!_0x4e18c8['_depthBuff'+'er']||!_0x3baf55['_depthBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20depth\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(-0xe95+0x1643+-0x1*0x7ad);if(_0x4e18c8['_depthBuff'+'er']['_format']!==_0x3baf55['_depthBuff'+'er']['_format'])return w['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20d'+'epth\x20forma'+'ts'),!(0x2*0x3a3+-0xc6d*-0x1+-0x13b2);}Q['pushGpuMar'+'ker'](this,'COPY-RT');const _0x4b332f=this['renderTarg'+'et'];this['renderTarg'+'et']=_0x3baf55,this['updateBegi'+'n']();const _0x307f71=_0x4e18c8?_0x4e18c8['impl']['_glFrameBu'+'ffer']:(_0x156d54=this['backBuffer'])==null?void(-0x2*-0x778+-0xb31+0x7*-0x89):_0x156d54['impl']['_glFrameBu'+'ffer'],_0x526bd4=_0x3baf55?_0x3baf55['impl']['_glFrameBu'+'ffer']:(_0x1a1322=this['backBuffer'])==null?void(-0x365+0x3e6*0x5+0x1019*-0x1):_0x1a1322['impl']['_glFrameBu'+'ffer'];w['assert'](_0x307f71!==_0x526bd4,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0x13bc8e['bindFrameb'+'uffer'](_0x13bc8e['READ_FRAME'+'BUFFER'],_0x307f71),_0x13bc8e['bindFrameb'+'uffer'](_0x13bc8e['DRAW_FRAME'+'BUFFER'],_0x526bd4);const _0x251886=_0x4e18c8?_0x4e18c8['width']:_0x3baf55?_0x3baf55['width']:this['width'],_0x10e6de=_0x4e18c8?_0x4e18c8['height']:_0x3baf55?_0x3baf55['height']:this['height'];return _0x13bc8e['blitFrameb'+'uffer'](-0xc4e+0x83a+0xc*0x57,-0x1e02+-0xa65+0x2867,_0x251886,_0x10e6de,0x20d0+0x1d*-0x66+0x1*-0x1542,0x1cc9+0x9*0x1e7+-0x34*0xe2,_0x251886,_0x10e6de,(_0x1dde71?_0x13bc8e['COLOR_BUFF'+'ER_BIT']:0xf+0x53e*0x2+0xa8b*-0x1)|(_0x5d3b22?_0x13bc8e['DEPTH_BUFF'+'ER_BIT']:-0x1*-0x107+-0x14da+0x13d3),_0x13bc8e['NEAREST']),this['renderTarg'+'et']=_0x4b332f,_0x13bc8e['bindFrameb'+'uffer'](_0x13bc8e['FRAMEBUFFE'+'R'],_0x4b332f?_0x4b332f['impl']['_glFrameBu'+'ffer']:null),Q['popGpuMark'+'er'](this),!(-0x2*-0x1085+-0xe5c+-0x12ae);}['frameStart'](){super['frameStart'](),this['updateBack'+'buffer'](),this['gpuProfile'+'r']['frameStart']();}['frameEnd'](){super['frameEnd'](),this['gpuProfile'+'r']['frameEnd'](),this['gpuProfile'+'r']['request']();}['startRende'+'rPass'](_0xe075a0){const _0x4f06d8=_0xe075a0['renderTarg'+'et']??this['backBuffer'];this['renderTarg'+'et']=_0x4f06d8,w['assert'](_0x4f06d8),Q['pushGpuMar'+'ker'](this,'Pass:'+_0xe075a0['name']+'\x20RT:'+_0x4f06d8['name']),Q['pushGpuMar'+'ker'](this,'START-PASS'),this['updateBegi'+'n']();const {width:_0x538cbc,height:_0x4d8933}=_0x4f06d8;this['setViewpor'+'t'](-0x74+0x6a3+0x1*-0x62f,-0x5fd+-0x4*0x300+0x11fd,_0x538cbc,_0x4d8933),this['setScissor'](0x19db+0x174c+-0x3127,-0x1*-0x1c83+-0x174e+-0x535,_0x538cbc,_0x4d8933);const _0x3d9d7c=_0xe075a0['colorOps'],_0x4a2569=_0xe075a0['depthStenc'+'ilOps'];if(_0x3d9d7c!=null&&_0x3d9d7c['clear']||_0x4a2569['clearDepth']||_0x4a2569['clearStenc'+'il']){let _0x2155fd=-0x1eae+0x1*0x216e+0x2c*-0x10;const _0x498be6={};_0x3d9d7c!=null&&_0x3d9d7c['clear']&&(_0x2155fd|=Fo,_0x498be6['color']=[_0x3d9d7c['clearValue']['r'],_0x3d9d7c['clearValue']['g'],_0x3d9d7c['clearValue']['b'],_0x3d9d7c['clearValue']['a']]),_0x4a2569['clearDepth']&&(_0x2155fd|=No,_0x498be6['depth']=_0x4a2569['clearDepth'+'Value']),_0x4a2569['clearStenc'+'il']&&(_0x2155fd|=Vc,_0x498be6['stencil']=_0x4a2569['clearStenc'+'ilValue']),_0x498be6['flags']=_0x2155fd,this['clear'](_0x498be6);}w['call'](()=>{this['insideRend'+'erPass']&&w['errorOnce']('RenderPass'+'\x20cannot\x20be'+'\x20started\x20w'+'hile\x20insid'+'e\x20another\x20'+'render\x20pas'+'s.');}),this['insideRend'+'erPass']=!(0x1274+0x1*-0xce5+-0x58f),Q['popGpuMark'+'er'](this);}['endRenderP'+'ass'](_0x1e5e84){var _0x5d0e0d;Q['pushGpuMar'+'ker'](this,'END-PASS'),this['unbindVert'+'exArray']();const _0x255600=this['renderTarg'+'et'],_0x3bd44c=_0x1e5e84['colorArray'+'Ops']['length'];if(_0x255600){ba['length']=-0xb*-0x206+0x20ad+-0x1*0x36ef;const _0xc2ddde=this['gl'];for(let _0x52e1c7=-0x13c+-0x13f2+-0x2*-0xa97;_0x52e1c7<_0x3bd44c;_0x52e1c7++){const _0x368b94=_0x1e5e84['colorArray'+'Ops'][_0x52e1c7];_0x368b94['store']||_0x368b94['resolve']||ba['push'](_0xc2ddde['COLOR_ATTA'+'CHMENT0']+_0x52e1c7);}_0x255600!==this['backBuffer']&&(_0x1e5e84['depthStenc'+'ilOps']['storeDepth']||ba['push'](_0xc2ddde['DEPTH_ATTA'+'CHMENT']),_0x1e5e84['depthStenc'+'ilOps']['storeStenc'+'il']||ba['push'](_0xc2ddde['STENCIL_AT'+'TACHMENT'])),ba['length']>0x146*-0x15+-0x16cf+0x318d&&_0x1e5e84['fullSizeCl'+'earRect']&&_0xc2ddde['invalidate'+'Framebuffe'+'r'](_0xc2ddde['DRAW_FRAME'+'BUFFER'],ba),_0x3bd44c&&((_0x5d0e0d=_0x1e5e84['colorOps'])!=null&&_0x5d0e0d['resolve'])&&_0x1e5e84['samples']>0x24bb*0x1+-0xdb4+-0xe*0x1a5&&_0x255600['autoResolv'+'e']&&_0x255600['resolve'](!(-0x3a*-0x77+-0x1566+-0x590),!(0xe6b+0x1dfe+0x8*-0x58d)),_0x255600['depthBuffe'+'r']&&_0x1e5e84['depthStenc'+'ilOps']['resolveDep'+'th']&&_0x1e5e84['samples']>0x280+-0x61f+0x20*0x1d&&_0x255600['autoResolv'+'e']&&_0x255600['resolve'](!(0x1*-0x189f+-0x270*0x1+0x1b10),!(-0x1*-0x2125+-0x1c4c+0x11*-0x49));for(let _0x17446a=0x1*0x1e3e+0x2*-0xc11+-0x61c;_0x17446a<_0x3bd44c;_0x17446a++)if(_0x1e5e84['colorArray'+'Ops'][_0x17446a]['genMipmaps']){const _0x4aab96=_0x255600['_colorBuff'+'ers'][_0x17446a];_0x4aab96&&_0x4aab96['impl']['_glTexture']&&_0x4aab96['mipmaps']&&(Q['pushGpuMar'+'ker'](this,'MIPS'+_0x17446a),this['activeText'+'ure'](this['maxCombine'+'dTextures']-(0x1bb*0x11+-0xf*-0x7c+-0xc3a*0x3)),this['bindTextur'+'e'](_0x4aab96),this['gl']['generateMi'+'pmap'](_0x4aab96['impl']['_glTarget']),Q['popGpuMark'+'er'](this));}}this['insideRend'+'erPass']=!(-0x1*0x1e23+0x11b1+-0xc73*-0x1),Q['popGpuMark'+'er'](this),Q['popGpuMark'+'er'](this);}set['defaultFra'+'mebuffer'](_0x244312){this['_defaultFr'+'amebuffer']!==_0x244312&&(this['_defaultFr'+'amebuffer']=_0x244312,this['_defaultFr'+'amebufferC'+'hanged']=!(0x7e2*0x4+-0x1984+-0x604*0x1));}get['defaultFra'+'mebuffer'](){return this['_defaultFr'+'amebuffer'];}['updateBegi'+'n'](){if(Q['pushGpuMar'+'ker'](this,'UPDATE-BEG'+'IN'),this['boundVao']=null,this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']){for(let _0x202def=0x2105+0x547*0x7+-0x3*0x1752;_0x202def<this['textureUni'+'ts']['length'];++_0x202def)for(let _0x307bad=-0x255+-0x1700+0x1955;_0x307bad<-0xb72+-0x136f+-0x526*-0x6;++_0x307bad)this['textureUni'+'ts'][_0x202def][_0x307bad]=null;}const _0x4f9f30=this['renderTarg'+'et']??this['backBuffer'];w['assert'](_0x4f9f30);const _0x4d36f8=_0x4f9f30['impl'];_0x4d36f8['initialize'+'d']||this['initRender'+'Target'](_0x4f9f30),this['setFramebu'+'ffer'](_0x4d36f8['_glFrameBu'+'ffer']),Q['popGpuMark'+'er'](this);}['updateEnd'](){Q['pushGpuMar'+'ker'](this,'UPDATE-END'),this['unbindVert'+'exArray']();const _0x4d1530=this['renderTarg'+'et'];if(_0x4d1530&&_0x4d1530!==this['backBuffer']){_0x4d1530['_samples']>0x219+-0x5d8+-0x4*-0xf0&&_0x4d1530['autoResolv'+'e']&&_0x4d1530['resolve']();const _0x4cded8=_0x4d1530['_colorBuff'+'er'];_0x4cded8&&_0x4cded8['impl']['_glTexture']&&_0x4cded8['mipmaps']&&(this['activeText'+'ure'](this['maxCombine'+'dTextures']-(-0xcf4+0x6*0x47+-0x3b*-0x31)),this['bindTextur'+'e'](_0x4cded8),this['gl']['generateMi'+'pmap'](_0x4cded8['impl']['_glTarget']));}Q['popGpuMark'+'er'](this);}['setUnpackF'+'lipY'](_0x4e80e2){if(this['unpackFlip'+'Y']!==_0x4e80e2){this['unpackFlip'+'Y']=_0x4e80e2;const _0x6fef33=this['gl'];_0x6fef33['pixelStore'+'i'](_0x6fef33['UNPACK_FLI'+'P_Y_WEBGL'],_0x4e80e2);}}['setUnpackP'+'remultiply'+'Alpha'](_0x5cccfb){if(this['unpackPrem'+'ultiplyAlp'+'ha']!==_0x5cccfb){this['unpackPrem'+'ultiplyAlp'+'ha']=_0x5cccfb;const _0x439c28=this['gl'];_0x439c28['pixelStore'+'i'](_0x439c28['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],_0x5cccfb);}}['activeText'+'ure'](_0x41f1c4){this['textureUni'+'t']!==_0x41f1c4&&(this['gl']['activeText'+'ure'](this['gl']['TEXTURE0']+_0x41f1c4),this['textureUni'+'t']=_0x41f1c4);}['bindTextur'+'e'](_0x429498){const _0x28ef25=_0x429498['impl'],_0x30547e=_0x28ef25['_glTarget'],_0x12d39e=_0x28ef25['_glTexture'],_0x3c3d5c=this['textureUni'+'t'],_0x4347b3=this['targetToSl'+'ot'][_0x30547e];this['textureUni'+'ts'][_0x3c3d5c][_0x4347b3]!==_0x12d39e&&(this['gl']['bindTextur'+'e'](_0x30547e,_0x12d39e),this['textureUni'+'ts'][_0x3c3d5c][_0x4347b3]=_0x12d39e);}['bindTextur'+'eOnUnit'](_0x32786a,_0x27967a){const _0x17f004=_0x32786a['impl'],_0x1123fa=_0x17f004['_glTarget'],_0x3c22d1=_0x17f004['_glTexture'],_0x682179=this['targetToSl'+'ot'][_0x1123fa];this['textureUni'+'ts'][_0x27967a][_0x682179]!==_0x3c22d1&&(this['activeText'+'ure'](_0x27967a),this['gl']['bindTextur'+'e'](_0x1123fa,_0x3c22d1),this['textureUni'+'ts'][_0x27967a][_0x682179]=_0x3c22d1);}['setTexture'+'Parameters'](_0x4244aa){const _0x7516c2=this['gl'],_0x5da747=_0x4244aa['impl']['dirtyParam'+'eterFlags'],_0x5ca30d=_0x4244aa['impl']['_glTarget'];if(_0x5da747&WS){let _0x203a7e=_0x4244aa['_minFilter'];(!_0x4244aa['_mipmaps']||_0x4244aa['_compresse'+'d']&&_0x4244aa['_levels']['length']===-0x6f6+0x1070+-0x979)&&(_0x203a7e===Ph||_0x203a7e===Mh?_0x203a7e=Te:(_0x203a7e===Dh||_0x203a7e===ha)&&(_0x203a7e=vt)),_0x7516c2['texParamet'+'eri'](_0x5ca30d,_0x7516c2['TEXTURE_MI'+'N_FILTER'],this['glFilter'][_0x203a7e]);}if(_0x5da747&$S&&_0x7516c2['texParamet'+'eri'](_0x5ca30d,_0x7516c2['TEXTURE_MA'+'G_FILTER'],this['glFilter'][_0x4244aa['_magFilter']]),_0x5da747&XS&&_0x7516c2['texParamet'+'eri'](_0x5ca30d,_0x7516c2['TEXTURE_WR'+'AP_S'],this['glAddress'][_0x4244aa['_addressU']]),_0x5da747&qS&&_0x7516c2['texParamet'+'eri'](_0x5ca30d,_0x7516c2['TEXTURE_WR'+'AP_T'],this['glAddress'][_0x4244aa['_addressV']]),_0x5da747&jS&&_0x7516c2['texParamet'+'eri'](_0x5ca30d,_0x7516c2['TEXTURE_WR'+'AP_R'],this['glAddress'][_0x4244aa['_addressW']]),_0x5da747&YS&&_0x7516c2['texParamet'+'eri'](_0x5ca30d,_0x7516c2['TEXTURE_CO'+'MPARE_MODE'],_0x4244aa['_compareOn'+'Read']?_0x7516c2['COMPARE_RE'+'F_TO_TEXTU'+'RE']:_0x7516c2['NONE']),_0x5da747&KS&&_0x7516c2['texParamet'+'eri'](_0x5ca30d,_0x7516c2['TEXTURE_CO'+'MPARE_FUNC'],this['glComparis'+'on'][_0x4244aa['_compareFu'+'nc']]),_0x5da747&ZS){const _0xe94c79=this['extTexture'+'FilterAnis'+'otropic'];_0xe94c79&&_0x7516c2['texParamet'+'erf'](_0x5ca30d,_0xe94c79['TEXTURE_MA'+'X_ANISOTRO'+'PY_EXT'],Y['clamp'](Math['round'](_0x4244aa['_anisotrop'+'y']),0xf*0x7f+0x67b+-0xdeb,this['maxAnisotr'+'opy']));}}['setTexture'](_0x5d6fd5,_0x4836ce){const _0x53e35f=_0x5d6fd5['impl'];_0x53e35f['_glTexture']||_0x53e35f['initialize'](this,_0x5d6fd5),_0x53e35f['dirtyParam'+'eterFlags']>-0xb*-0xc+-0x14*-0x2+0x2b*-0x4||_0x5d6fd5['_needsUplo'+'ad']||_0x5d6fd5['_needsMipm'+'apsUpload']?(this['activeText'+'ure'](_0x4836ce),this['bindTextur'+'e'](_0x5d6fd5),_0x53e35f['dirtyParam'+'eterFlags']&&(this['setTexture'+'Parameters'](_0x5d6fd5),_0x53e35f['dirtyParam'+'eterFlags']=-0x9*-0x32+-0x1d*0xdf+0x1781),(_0x5d6fd5['_needsUplo'+'ad']||_0x5d6fd5['_needsMipm'+'apsUpload'])&&(_0x53e35f['upload'](this,_0x5d6fd5),_0x5d6fd5['_needsUplo'+'ad']=!(0x4*0x160+0x245*0x4+-0xe93),_0x5d6fd5['_needsMipm'+'apsUpload']=!(0x6f6+-0x1cd*0x13+0x1b42))):this['bindTextur'+'eOnUnit'](_0x5d6fd5,_0x4836ce);}['createVert'+'exArray'](_0x2234bb){let _0x102c7c,_0x5d466b;const _0x5267ce=_0x2234bb['length']>-0x1ba8+-0x1a3f*-0x1+0x16a;if(_0x5267ce){_0x102c7c='';for(let _0x5b80b8=0x4b0+-0x3*0x1b3+0x69;_0x5b80b8<_0x2234bb['length'];_0x5b80b8++){const _0x427928=_0x2234bb[_0x5b80b8];_0x102c7c+=_0x427928['id']+_0x427928['format']['renderingH'+'ash'];}_0x5d466b=this['_vaoMap']['get'](_0x102c7c);}if(!_0x5d466b){const _0x6dc963=this['gl'];_0x5d466b=_0x6dc963['createVert'+'exArray'](),_0x6dc963['bindVertex'+'Array'](_0x5d466b),_0x6dc963['bindBuffer'](_0x6dc963['ELEMENT_AR'+'RAY_BUFFER'],null);let _0x247550=!(0x6*-0xb+0x16a*-0x8+0xb93);for(let _0x5e0471=-0x1ee0+0xd08+0x11d8;_0x5e0471<_0x2234bb['length'];_0x5e0471++){const _0x13233f=_0x2234bb[_0x5e0471];_0x6dc963['bindBuffer'](_0x6dc963['ARRAY_BUFF'+'ER'],_0x13233f['impl']['bufferId']);const _0x241d14=_0x13233f['format']['elements'];for(let _0x5038c0=-0x34*-0x37+-0xa9e+-0x1*0x8e;_0x5038c0<_0x241d14['length'];_0x5038c0++){const _0x5f383d=_0x241d14[_0x5038c0],_0x2596a7=Le[_0x5f383d['name']];_0x2596a7===-0x285+0x297*0x1+-0x12&&(_0x247550=!(-0x83+-0x13*0x17+0x238)),_0x5f383d['asInt']?_0x6dc963['vertexAttr'+'ibIPointer'](_0x2596a7,_0x5f383d['numCompone'+'nts'],this['glType'][_0x5f383d['dataType']],_0x5f383d['stride'],_0x5f383d['offset']):_0x6dc963['vertexAttr'+'ibPointer'](_0x2596a7,_0x5f383d['numCompone'+'nts'],this['glType'][_0x5f383d['dataType']],_0x5f383d['normalize'],_0x5f383d['stride'],_0x5f383d['offset']),_0x6dc963['enableVert'+'exAttribAr'+'ray'](_0x2596a7),_0x13233f['format']['instancing']&&_0x6dc963['vertexAttr'+'ibDivisor'](_0x2596a7,0x22e8+-0x61*0x2e+-0x1179);}}_0x6dc963['bindVertex'+'Array'](null),_0x6dc963['bindBuffer'](_0x6dc963['ARRAY_BUFF'+'ER'],null),_0x5267ce&&this['_vaoMap']['set'](_0x102c7c,_0x5d466b),_0x247550||w['warn']('No\x20vertex\x20'+'attribute\x20'+'is\x20mapped\x20'+'to\x20locatio'+'n\x200,\x20which'+'\x20might\x20cau'+'se\x20compati'+'bility\x20iss'+'ues\x20on\x20Saf'+'ari\x20on\x20Mac'+'OS\x20-\x20pleas'+'e\x20use\x20attr'+'ibute\x20SEMA'+'NTIC_POSIT'+'ION\x20or\x20SEM'+'ANTIC_ATTR'+'15');}return _0x5d466b;}['unbindVert'+'exArray'](){this['boundVao']&&(this['boundVao']=null,this['gl']['bindVertex'+'Array'](null));}['setBuffers'](_0x3ad84a){const _0x815942=this['gl'];let _0x27ece7;if(this['vertexBuff'+'ers']['length']===0x111a*-0x1+0x66b+-0x39*-0x30){const _0x5c57ed=this['vertexBuff'+'ers'][0x254+0x13*-0x82+0x752];w['assert'](_0x5c57ed['device']===this,'The\x20Vertex'+'Buffer\x20was'+'\x20not\x20creat'+'ed\x20using\x20c'+'urrent\x20Gra'+'phicsDevic'+'e'),_0x5c57ed['impl']['vao']||(_0x5c57ed['impl']['vao']=this['createVert'+'exArray'](this['vertexBuff'+'ers'])),_0x27ece7=_0x5c57ed['impl']['vao'];}else _0x27ece7=this['createVert'+'exArray'](this['vertexBuff'+'ers']);this['boundVao']!==_0x27ece7&&(this['boundVao']=_0x27ece7,_0x815942['bindVertex'+'Array'](_0x27ece7));const _0x186775=_0x3ad84a?_0x3ad84a['impl']['bufferId']:null;_0x815942['bindBuffer'](_0x815942['ELEMENT_AR'+'RAY_BUFFER'],_0x186775);}['draw'](_0x35ae25,_0x30833d,_0x1a7a62,_0x398396,_0xfb7424=!(0x25f7*0x1+-0xaa*-0x4+-0x289f),_0x3171b6=!(-0xa7*-0x6+0x23c0+-0x13d5*0x2)){const _0x49be96=this['shader'];if(_0x49be96&&(this['activateSh'+'ader'](),this['shaderVali'+'d'])){const _0x39b3b0=this['gl'];_0xfb7424&&(w['call'](()=>{var _0x1bddbc,_0x468688;return this['validateAt'+'tributes'](this['shader'],(_0x1bddbc=this['vertexBuff'+'ers'][-0x815+0x1ad8+-0x12c3])==null?void(0x1b67+-0x21cd+0x666):_0x1bddbc['format'],(_0x468688=this['vertexBuff'+'ers'][0x1a5*-0x13+-0x5*-0x577+0x3ed])==null?void(0x23e0+0xcaf*-0x3+-0x22d*-0x1):_0x468688['format']);}),this['setBuffers'](_0x30833d));let _0x13760b=0x1*-0x449+-0x1*0x628+0xa71;const _0x37c150=_0x49be96['impl']['samplers'];for(let _0x3b400a=-0x1e*-0x112+0x8*-0x36d+-0xac*0x7,_0x3be0ac=_0x37c150['length'];_0x3b400a<_0x3be0ac;_0x3b400a++){const _0x4b9786=_0x37c150[_0x3b400a];let _0x2c4461=_0x4b9786['scopeId']['value'];if(!_0x2c4461){const _0x2fff40=_0x4b9786['scopeId']['name'];w['assert'](_0x2fff40!=='texture_gr'+'abPass','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27texture'+'_grabPass\x27'+'\x20is\x20not\x20lo'+'nger\x20suppo'+'rted,\x20use\x20'+'\x27uSceneCol'+'orMap\x27\x20ins'+'tead'),w['assert'](_0x2fff40!=='uDepthMap','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27uDepthM'+'ap\x27\x20is\x20not'+'\x20longer\x20su'+'pported,\x20u'+'se\x20\x27uScene'+'DepthMap\x27\x20'+'instead'),_0x2fff40==='uSceneDept'+'hMap'&&(w['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x2c4461=oa(this,'white')),_0x2fff40==='uSceneColo'+'rMap'&&(w['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x2c4461=oa(this,'pink')),_0x2c4461||(w['errorOnce']('Shader\x20'+_0x49be96['name']+'\x20requires\x20'+_0x2fff40+('\x20texture\x20w'+'hich\x20was\x20n'+'ot\x20set.\x20Re'+'ndering\x20[')+Q['toString']()+']',_0x49be96),_0x2c4461=oa(this,'pink'));}if(_0x2c4461 instanceof _e){const _0x5b2081=_0x2c4461;this['setTexture'](_0x5b2081,_0x13760b),this['renderTarg'+'et']&&this['renderTarg'+'et']['_samples']<-0x1733*-0x1+-0x2155+-0x4*-0x289&&(this['renderTarg'+'et']['colorBuffe'+'r']&&this['renderTarg'+'et']['colorBuffe'+'r']===_0x5b2081?w['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20color\x20b'+'uffer\x20as\x20a'+'\x20texture',{'renderTarget':this['renderTarg'+'et'],'texture':_0x5b2081}):this['renderTarg'+'et']['depthBuffe'+'r']&&this['renderTarg'+'et']['depthBuffe'+'r']===_0x5b2081&&w['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20depth\x20b'+'uffer\x20as\x20a'+'\x20texture',{'texture':_0x5b2081})),_0x4b9786['slot']!==_0x13760b&&(_0x39b3b0['uniform1i'](_0x4b9786['locationId'],_0x13760b),_0x4b9786['slot']=_0x13760b),_0x13760b++;}else{_0x4b9786['array']['length']=-0x117d+-0x5d9*0x1+0x1756*0x1;const _0x18f0af=_0x2c4461['length'];for(let _0xece54a=-0x20a8+0x2572*-0x1+0x461a;_0xece54a<_0x18f0af;_0xece54a++){const _0x4a2e3f=_0x2c4461[_0xece54a];this['setTexture'](_0x4a2e3f,_0x13760b),_0x4b9786['array'][_0xece54a]=_0x13760b,_0x13760b++;}_0x39b3b0['uniform1iv'](_0x4b9786['locationId'],_0x4b9786['array']);}}const _0x1851d2=_0x49be96['impl']['uniforms'];for(let _0x5c0e8b=0xd*0x22c+0x218a+-0x3dc6,_0x36eabe=_0x1851d2['length'];_0x5c0e8b<_0x36eabe;_0x5c0e8b++){const _0x30a185=_0x1851d2[_0x5c0e8b],_0x192eff=_0x30a185['scopeId'],_0x91932a=_0x30a185['version'],_0x4aa000=_0x192eff['versionObj'+'ect']['version'];if(_0x91932a['globalId']!==_0x4aa000['globalId']||_0x91932a['revision']!==_0x4aa000['revision']){_0x91932a['globalId']=_0x4aa000['globalId'],_0x91932a['revision']=_0x4aa000['revision'];const _0x1abda8=_0x192eff['value'];_0x1abda8!=null?this['commitFunc'+'tion'][_0x30a185['dataType']](_0x30a185,_0x1abda8):w['warnOnce']('Shader\x20['+_0x49be96['label']+(']\x20requires'+'\x20uniform\x20[')+_0x30a185['scopeId']['name']+(']\x20which\x20ha'+'s\x20not\x20been'+'\x20set,\x20whil'+'e\x20renderin'+'g\x20[')+Q['toString']()+']');}}this['transformF'+'eedbackBuf'+'fer']&&(_0x39b3b0['bindBuffer'+'Base'](_0x39b3b0['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],0x201a+0x419*0x7+-0x3cc9,this['transformF'+'eedbackBuf'+'fer']['impl']['bufferId']),_0x39b3b0['beginTrans'+'formFeedba'+'ck'](_0x39b3b0['POINTS']));const _0x1f736c=this['glPrimitiv'+'e'][_0x35ae25['type']],_0x5d9002=_0x35ae25['count'];if(_0x35ae25['indexed']){w['assert'](_0x30833d['device']===this,'The\x20IndexB'+'uffer\x20was\x20'+'not\x20create'+'d\x20using\x20cu'+'rrent\x20Grap'+'hicsDevice');const _0x1408bc=_0x30833d['impl']['glFormat'],_0x38df9c=_0x35ae25['base']*_0x30833d['bytesPerIn'+'dex'];_0x1a7a62>-0x9e3*-0x3+-0x3*0xa66+0x189?_0x39b3b0['drawElemen'+'tsInstance'+'d'](_0x1f736c,_0x5d9002,_0x1408bc,_0x38df9c,_0x1a7a62):_0x39b3b0['drawElemen'+'ts'](_0x1f736c,_0x5d9002,_0x1408bc,_0x38df9c);}else{const _0x5ea7bc=_0x35ae25['base'];_0x1a7a62>0x9*0x331+0x54a+-0x1*0x2203?_0x39b3b0['drawArrays'+'Instanced'](_0x1f736c,_0x5ea7bc,_0x5d9002,_0x1a7a62):_0x39b3b0['drawArrays'](_0x1f736c,_0x5ea7bc,_0x5d9002);}this['transformF'+'eedbackBuf'+'fer']&&(_0x39b3b0['endTransfo'+'rmFeedback'](),_0x39b3b0['bindBuffer'+'Base'](_0x39b3b0['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],0x6e4+0x2f*-0xcd+0x1ebf,null)),this['_drawCalls'+'PerFrame']++,this['_primsPerF'+'rame'][_0x35ae25['type']]+=_0x35ae25['count']*(_0x1a7a62>0x876+-0x189f+-0x815*-0x2?_0x1a7a62:-0x1*-0x150e+0xf0c+-0x2419);}_0x3171b6&&this['clearVerte'+'xBuffer']();}['clear'](_0x2545f3){const _0x76e0cb=this['defaultCle'+'arOptions'];_0x2545f3=_0x2545f3||_0x76e0cb;const _0xe85f0e=_0x2545f3['flags']??_0x76e0cb['flags'];if(_0xe85f0e!==-0x11fe+0x1b14+0x48b*-0x2){const _0x4a8430=this['gl'];if(_0xe85f0e&Fo){const _0x32784e=_0x2545f3['color']??_0x76e0cb['color'],_0x2f1832=_0x32784e[0x3*-0x3ed+0x790+-0x437*-0x1],_0x197d3e=_0x32784e[-0x5a8+-0x1cc2+0x226b],_0x69bcae=_0x32784e[0x3b9*0x3+0x196e+-0x2497],_0x8dca27=_0x32784e[-0x594+0x5*-0x795+-0xae*-0x40],_0x494f5e=this['clearColor'];(_0x2f1832!==_0x494f5e['r']||_0x197d3e!==_0x494f5e['g']||_0x69bcae!==_0x494f5e['b']||_0x8dca27!==_0x494f5e['a'])&&(this['gl']['clearColor'](_0x2f1832,_0x197d3e,_0x69bcae,_0x8dca27),this['clearColor']['set'](_0x2f1832,_0x197d3e,_0x69bcae,_0x8dca27)),this['setBlendSt'+'ate'](pt['NOBLEND']);}if(_0xe85f0e&No){const _0x20a5cc=_0x2545f3['depth']??_0x76e0cb['depth'];_0x20a5cc!==this['clearDepth']&&(this['gl']['clearDepth'](_0x20a5cc),this['clearDepth']=_0x20a5cc),this['setDepthSt'+'ate'](Yt['WRITEDEPTH']);}if(_0xe85f0e&Vc){const _0x10d68f=_0x2545f3['stencil']??_0x76e0cb['stencil'];_0x10d68f!==this['clearStenc'+'il']&&(this['gl']['clearStenc'+'il'](_0x10d68f),this['clearStenc'+'il']=_0x10d68f),_0x4a8430['stencilMas'+'k'](-0x2*-0x8f9+0x95*0x2a+-0x2965*0x1),this['stencilWri'+'teMaskFron'+'t']=-0xb79+-0x252f+0x31a7,this['stencilWri'+'teMaskBack']=-0x1*0x511+0x198c+-0x137c;}_0x4a8430['clear'](this['glClearFla'+'g'][_0xe85f0e]);}}['submit'](){this['gl']['flush']();}['readPixels'](_0xab2b47,_0x43fab7,_0x469b07,_0x31967b,_0x581bf7){const _0x112074=this['gl'];_0x112074['readPixels'](_0xab2b47,_0x43fab7,_0x469b07,_0x31967b,_0x112074['RGBA'],_0x112074['UNSIGNED_B'+'YTE'],_0x581bf7);}['clientWait'+'Async'](_0xada06f,_0x3766c7){const _0x5e43cb=this['gl'],_0x5c462c=_0x5e43cb['fenceSync'](_0x5e43cb['SYNC_GPU_C'+'OMMANDS_CO'+'MPLETE'],0x1a07+-0x25ab+-0x12a*-0xa);return this['submit'](),new Promise((_0x102d7c,_0x565a5b)=>{function _0x386799(){const _0x29dca1=_0x5e43cb['clientWait'+'Sync'](_0x5c462c,_0xada06f,-0x1*-0x2105+0x203e+-0x4143);_0x29dca1===_0x5e43cb['TIMEOUT_EX'+'PIRED']?setTimeout(_0x386799,_0x3766c7):(_0x5e43cb['deleteSync'](_0x5c462c),_0x29dca1===_0x5e43cb['WAIT_FAILE'+'D']?_0x565a5b(new Error('webgl\x20clie'+'ntWaitSync'+'\x20sync\x20fail'+'ed')):_0x102d7c());}_0x386799();});}async['readPixels'+'Async'](_0x2ae2aa,_0x53f32e,_0x26898d,_0x43bb31,_0x73967f){var _0x4b682f;const _0xaa2f3a=this['gl'],_0x282d5b=(_0x4b682f=this['renderTarg'+'et']['colorBuffe'+'r'])==null?void(0x131a+0x1c1b+0x5*-0x971):_0x4b682f['impl'],_0x5afc4a=(_0x282d5b==null?void(0x1fbd+-0xee5+-0x10d8):_0x282d5b['_glFormat'])??_0xaa2f3a['RGBA'],_0x57cb64=(_0x282d5b==null?void(-0x20f+-0x1*0x1d87+0x1f96):_0x282d5b['_glPixelTy'+'pe'])??_0xaa2f3a['UNSIGNED_B'+'YTE'],_0x39a743=_0xaa2f3a['createBuff'+'er']();return _0xaa2f3a['bindBuffer'](_0xaa2f3a['PIXEL_PACK'+'_BUFFER'],_0x39a743),_0xaa2f3a['bufferData'](_0xaa2f3a['PIXEL_PACK'+'_BUFFER'],_0x73967f['byteLength'],_0xaa2f3a['STREAM_REA'+'D']),_0xaa2f3a['readPixels'](_0x2ae2aa,_0x53f32e,_0x26898d,_0x43bb31,_0x5afc4a,_0x57cb64,0x1774+-0x3d*-0x75+-0x3355),_0xaa2f3a['bindBuffer'](_0xaa2f3a['PIXEL_PACK'+'_BUFFER'],null),await this['clientWait'+'Async'](0x18a5+0x1*0x24e6+-0x3d8b,-0x1a5f+0xbdc*0x3+-0x1*0x925),_0xaa2f3a['bindBuffer'](_0xaa2f3a['PIXEL_PACK'+'_BUFFER'],_0x39a743),_0xaa2f3a['getBufferS'+'ubData'](_0xaa2f3a['PIXEL_PACK'+'_BUFFER'],0x8*0x410+0xb*-0x31a+0x19e,_0x73967f),_0xaa2f3a['bindBuffer'](_0xaa2f3a['PIXEL_PACK'+'_BUFFER'],null),_0xaa2f3a['deleteBuff'+'er'](_0x39a743),_0x73967f;}['readTextur'+'eAsync'](_0x237a5c,_0x4785c5,_0x45a598,_0x114ec6,_0x14d441,_0x45b085){const _0x54c659=_0x45b085['face']??0x1ee1+0x10a4+-0x2f85,_0x28ba2f=_0x45b085['renderTarg'+'et']??new gt({'colorBuffer':_0x237a5c,'depth':!(-0x1db7*0x1+-0x1*-0x1309+-0x223*-0x5),'face':_0x54c659});w['assert'](_0x28ba2f['colorBuffe'+'r']===_0x237a5c);const _0x40304c=new ArrayBuffer($i['calcLevelG'+'puSize'](_0x114ec6,_0x14d441,-0x257*-0x6+-0x1a*0x127+0x97*0x1b,_0x237a5c['_format'])),_0x26fb4f=_0x45b085['data']??new(RS(_0x237a5c['_format']))(_0x40304c);return this['setRenderT'+'arget'](_0x28ba2f),this['initRender'+'Target'](_0x28ba2f),new Promise((_0x479c97,_0x427f8c)=>{this['readPixels'+'Async'](_0x4785c5,_0x45a598,_0x114ec6,_0x14d441,_0x26fb4f)['then'](_0x38627b=>{_0x45b085['renderTarg'+'et']||_0x28ba2f['destroy'](),_0x479c97(_0x38627b);})['catch'](_0x427f8c);});}async['writeTextu'+'reAsync'](_0x1dc928,_0x2cbce4,_0x3f81fb,_0xdeef65,_0x9491dd,_0x61eefb){const _0x4d02b8=this['gl'],_0x57f5e0=_0x1dc928['impl'],_0x4d6487=(_0x57f5e0==null?void(0x1fa+0x3b1+0x1*-0x5ab):_0x57f5e0['_glFormat'])??_0x4d02b8['RGBA'],_0x2400cb=(_0x57f5e0==null?void(0xa71+-0x22f0+0x1*0x187f):_0x57f5e0['_glPixelTy'+'pe'])??_0x4d02b8['UNSIGNED_B'+'YTE'],_0x585156=_0x4d02b8['createBuff'+'er']();_0x4d02b8['bindBuffer'](_0x4d02b8['PIXEL_UNPA'+'CK_BUFFER'],_0x585156),_0x4d02b8['bufferData'](_0x4d02b8['PIXEL_UNPA'+'CK_BUFFER'],_0x61eefb,_0x4d02b8['STREAM_DRA'+'W']),_0x4d02b8['bindTextur'+'e'](_0x4d02b8['TEXTURE_2D'],_0x57f5e0['_glTexture']),_0x4d02b8['texSubImag'+'e2D'](_0x4d02b8['TEXTURE_2D'],0xe*0x252+0xe19+-0x1dd*0x19,_0x2cbce4,_0x3f81fb,_0xdeef65,_0x9491dd,_0x4d6487,_0x2400cb,0x1*0x118d+-0x2*0xfcc+0xe0b*0x1),_0x4d02b8['bindBuffer'](_0x4d02b8['PIXEL_UNPA'+'CK_BUFFER'],null),_0x1dc928['_needsUplo'+'ad']=!(0x1*-0x5ba+-0x7ec+0xf*0xe9),_0x1dc928['_mipmapsUp'+'loaded']=!(0x9e+0x2*-0x4a5+-0x8ad*-0x1),await this['clientWait'+'Async'](0x9d+-0x1930+0x831*0x3,0x2267+-0xa7*0x1d+-0xf6c);}['setAlphaTo'+'Coverage'](_0x371f62){this['alphaToCov'+'erage']!==_0x371f62&&(this['alphaToCov'+'erage']=_0x371f62,_0x371f62?this['gl']['enable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']):this['gl']['disable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']));}['setTransfo'+'rmFeedback'+'Buffer'](_0xb28740){if(this['transformF'+'eedbackBuf'+'fer']!==_0xb28740){this['transformF'+'eedbackBuf'+'fer']=_0xb28740;const _0x33b21d=this['gl'];_0xb28740?(this['feedback']||(this['feedback']=_0x33b21d['createTran'+'sformFeedb'+'ack']()),_0x33b21d['bindTransf'+'ormFeedbac'+'k'](_0x33b21d['TRANSFORM_'+'FEEDBACK'],this['feedback'])):_0x33b21d['bindTransf'+'ormFeedbac'+'k'](_0x33b21d['TRANSFORM_'+'FEEDBACK'],null);}}['setRaster'](_0x3bec60){this['raster']!==_0x3bec60&&(this['raster']=_0x3bec60,_0x3bec60?this['gl']['disable'](this['gl']['RASTERIZER'+'_DISCARD']):this['gl']['enable'](this['gl']['RASTERIZER'+'_DISCARD']));}['setStencil'+'Test'](_0x42fe59){if(this['stencil']!==_0x42fe59){const _0xf9ae9e=this['gl'];_0x42fe59?_0xf9ae9e['enable'](_0xf9ae9e['STENCIL_TE'+'ST']):_0xf9ae9e['disable'](_0xf9ae9e['STENCIL_TE'+'ST']),this['stencil']=_0x42fe59;}}['setStencil'+'Func'](_0xa6666a,_0x232ae6,_0x472f55){(this['stencilFun'+'cFront']!==_0xa6666a||this['stencilRef'+'Front']!==_0x232ae6||this['stencilMas'+'kFront']!==_0x472f55||this['stencilFun'+'cBack']!==_0xa6666a||this['stencilRef'+'Back']!==_0x232ae6||this['stencilMas'+'kBack']!==_0x472f55)&&(this['gl']['stencilFun'+'c'](this['glComparis'+'on'][_0xa6666a],_0x232ae6,_0x472f55),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=_0xa6666a,this['stencilRef'+'Front']=this['stencilRef'+'Back']=_0x232ae6,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=_0x472f55);}['setStencil'+'FuncFront'](_0x5ef929,_0x57f841,_0x97a6c6){if(this['stencilFun'+'cFront']!==_0x5ef929||this['stencilRef'+'Front']!==_0x57f841||this['stencilMas'+'kFront']!==_0x97a6c6){const _0x3c0e9f=this['gl'];_0x3c0e9f['stencilFun'+'cSeparate'](_0x3c0e9f['FRONT'],this['glComparis'+'on'][_0x5ef929],_0x57f841,_0x97a6c6),this['stencilFun'+'cFront']=_0x5ef929,this['stencilRef'+'Front']=_0x57f841,this['stencilMas'+'kFront']=_0x97a6c6;}}['setStencil'+'FuncBack'](_0x629742,_0x19b739,_0x2575c5){if(this['stencilFun'+'cBack']!==_0x629742||this['stencilRef'+'Back']!==_0x19b739||this['stencilMas'+'kBack']!==_0x2575c5){const _0x310568=this['gl'];_0x310568['stencilFun'+'cSeparate'](_0x310568['BACK'],this['glComparis'+'on'][_0x629742],_0x19b739,_0x2575c5),this['stencilFun'+'cBack']=_0x629742,this['stencilRef'+'Back']=_0x19b739,this['stencilMas'+'kBack']=_0x2575c5;}}['setStencil'+'Operation'](_0x5c2766,_0x266453,_0x1c646a,_0x5d6382){(this['stencilFai'+'lFront']!==_0x5c2766||this['stencilZfa'+'ilFront']!==_0x266453||this['stencilZpa'+'ssFront']!==_0x1c646a||this['stencilFai'+'lBack']!==_0x5c2766||this['stencilZfa'+'ilBack']!==_0x266453||this['stencilZpa'+'ssBack']!==_0x1c646a)&&(this['gl']['stencilOp'](this['glStencilO'+'p'][_0x5c2766],this['glStencilO'+'p'][_0x266453],this['glStencilO'+'p'][_0x1c646a]),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=_0x5c2766,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=_0x266453,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=_0x1c646a),(this['stencilWri'+'teMaskFron'+'t']!==_0x5d6382||this['stencilWri'+'teMaskBack']!==_0x5d6382)&&(this['gl']['stencilMas'+'k'](_0x5d6382),this['stencilWri'+'teMaskFron'+'t']=_0x5d6382,this['stencilWri'+'teMaskBack']=_0x5d6382);}['setStencil'+'OperationF'+'ront'](_0x29c1a9,_0x22344d,_0x38cb6c,_0x134122){(this['stencilFai'+'lFront']!==_0x29c1a9||this['stencilZfa'+'ilFront']!==_0x22344d||this['stencilZpa'+'ssFront']!==_0x38cb6c)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['FRONT'],this['glStencilO'+'p'][_0x29c1a9],this['glStencilO'+'p'][_0x22344d],this['glStencilO'+'p'][_0x38cb6c]),this['stencilFai'+'lFront']=_0x29c1a9,this['stencilZfa'+'ilFront']=_0x22344d,this['stencilZpa'+'ssFront']=_0x38cb6c),this['stencilWri'+'teMaskFron'+'t']!==_0x134122&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['FRONT'],_0x134122),this['stencilWri'+'teMaskFron'+'t']=_0x134122);}['setStencil'+'OperationB'+'ack'](_0x242b6c,_0x2a7c78,_0xe34374,_0x4e097c){(this['stencilFai'+'lBack']!==_0x242b6c||this['stencilZfa'+'ilBack']!==_0x2a7c78||this['stencilZpa'+'ssBack']!==_0xe34374)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['BACK'],this['glStencilO'+'p'][_0x242b6c],this['glStencilO'+'p'][_0x2a7c78],this['glStencilO'+'p'][_0xe34374]),this['stencilFai'+'lBack']=_0x242b6c,this['stencilZfa'+'ilBack']=_0x2a7c78,this['stencilZpa'+'ssBack']=_0xe34374),this['stencilWri'+'teMaskBack']!==_0x4e097c&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['BACK'],_0x4e097c),this['stencilWri'+'teMaskBack']=_0x4e097c);}['setBlendSt'+'ate'](_0xf8fbce){const _0x5820e7=this['blendState'];if(!_0x5820e7['equals'](_0xf8fbce)){const _0x132646=this['gl'],{blend:_0x3415a0,colorOp:_0x4f9d41,alphaOp:_0x22f5f2,colorSrcFactor:_0x5b67d8,colorDstFactor:_0x2b26dd,alphaSrcFactor:_0x31e934,alphaDstFactor:_0x1cdafc}=_0xf8fbce;if(_0x5820e7['blend']!==_0x3415a0&&(_0x3415a0?_0x132646['enable'](_0x132646['BLEND']):_0x132646['disable'](_0x132646['BLEND'])),_0x5820e7['colorOp']!==_0x4f9d41||_0x5820e7['alphaOp']!==_0x22f5f2){const _0x523d97=this['glBlendEqu'+'ation'];_0x132646['blendEquat'+'ionSeparat'+'e'](_0x523d97[_0x4f9d41],_0x523d97[_0x22f5f2]);}(_0x5820e7['colorSrcFa'+'ctor']!==_0x5b67d8||_0x5820e7['colorDstFa'+'ctor']!==_0x2b26dd||_0x5820e7['alphaSrcFa'+'ctor']!==_0x31e934||_0x5820e7['alphaDstFa'+'ctor']!==_0x1cdafc)&&_0x132646['blendFuncS'+'eparate'](this['glBlendFun'+'ctionColor'][_0x5b67d8],this['glBlendFun'+'ctionColor'][_0x2b26dd],this['glBlendFun'+'ctionAlpha'][_0x31e934],this['glBlendFun'+'ctionAlpha'][_0x1cdafc]),_0x5820e7['allWrite']!==_0xf8fbce['allWrite']&&this['gl']['colorMask'](_0xf8fbce['redWrite'],_0xf8fbce['greenWrite'],_0xf8fbce['blueWrite'],_0xf8fbce['alphaWrite']),_0x5820e7['copy'](_0xf8fbce);}}['setBlendCo'+'lor'](_0x5d80b5,_0x53c721,_0x383341,_0x90819){const _0x9dc7da=this['blendColor'];(_0x5d80b5!==_0x9dc7da['r']||_0x53c721!==_0x9dc7da['g']||_0x383341!==_0x9dc7da['b']||_0x90819!==_0x9dc7da['a'])&&(this['gl']['blendColor'](_0x5d80b5,_0x53c721,_0x383341,_0x90819),_0x9dc7da['set'](_0x5d80b5,_0x53c721,_0x383341,_0x90819));}['setStencil'+'State'](_0x109580,_0x24236b){_0x109580||_0x24236b?(this['setStencil'+'Test'](!(0x1ecf+0x1422+0x3f*-0xcf)),_0x109580===_0x24236b?(this['setStencil'+'Func'](_0x109580['func'],_0x109580['ref'],_0x109580['readMask']),this['setStencil'+'Operation'](_0x109580['fail'],_0x109580['zfail'],_0x109580['zpass'],_0x109580['writeMask'])):(_0x109580??(_0x109580=pi['DEFAULT']),this['setStencil'+'FuncFront'](_0x109580['func'],_0x109580['ref'],_0x109580['readMask']),this['setStencil'+'OperationF'+'ront'](_0x109580['fail'],_0x109580['zfail'],_0x109580['zpass'],_0x109580['writeMask']),_0x24236b??(_0x24236b=pi['DEFAULT']),this['setStencil'+'FuncBack'](_0x24236b['func'],_0x24236b['ref'],_0x24236b['readMask']),this['setStencil'+'OperationB'+'ack'](_0x24236b['fail'],_0x24236b['zfail'],_0x24236b['zpass'],_0x24236b['writeMask']))):this['setStencil'+'Test'](!(0xd*-0x15a+0xff2+0x8b*0x3));}['setDepthSt'+'ate'](_0x3a65b3){const _0x38f87e=this['depthState'];if(!_0x38f87e['equals'](_0x3a65b3)){const _0x58e404=this['gl'],_0x5031f2=_0x3a65b3['write'];_0x38f87e['write']!==_0x5031f2&&_0x58e404['depthMask'](_0x5031f2);let {func:_0x583c7b,test:_0xe1f5d}=_0x3a65b3;!_0xe1f5d&&_0x5031f2&&(_0xe1f5d=!(0x1c00+0x23d2+-0x3fd2),_0x583c7b=Hi),_0x38f87e['func']!==_0x583c7b&&_0x58e404['depthFunc'](this['glComparis'+'on'][_0x583c7b]),_0x38f87e['test']!==_0xe1f5d&&(_0xe1f5d?_0x58e404['enable'](_0x58e404['DEPTH_TEST']):_0x58e404['disable'](_0x58e404['DEPTH_TEST']));const {depthBias:_0x3256a2,depthBiasSlope:_0x326139}=_0x3a65b3;_0x3256a2||_0x326139?(this['depthBiasE'+'nabled']||(this['depthBiasE'+'nabled']=!(0xd*-0x1eb+0x9db*-0x1+0x22ca),this['gl']['enable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0x58e404['polygonOff'+'set'](_0x326139,_0x3256a2)):this['depthBiasE'+'nabled']&&(this['depthBiasE'+'nabled']=!(0x1dfd+0xded+0xea3*-0x3),this['gl']['disable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0x38f87e['copy'](_0x3a65b3);}}['setCullMod'+'e'](_0x4b452d){if(this['cullMode']!==_0x4b452d){if(_0x4b452d===bt)this['gl']['disable'](this['gl']['CULL_FACE']);else{this['cullMode']===bt&&this['gl']['enable'](this['gl']['CULL_FACE']);const _0x33e92b=this['glCull'][_0x4b452d];this['cullFace']!==_0x33e92b&&(this['gl']['cullFace'](_0x33e92b),this['cullFace']=_0x33e92b);}this['cullMode']=_0x4b452d;}}['setShader'](_0x4247f2,_0x9571f8=!(-0x4ff*-0x2+0x3a*0xb+-0xc7b)){_0x4247f2!==this['shader']&&(this['shader']=_0x4247f2,this['shaderAsyn'+'cCompile']=_0x9571f8,this['shaderVali'+'d']=void(-0x26b*0x10+0x2b7*0x6+-0x7a*-0x2f),this['_shaderSwi'+'tchesPerFr'+'ame']++);}['activateSh'+'ader'](){const {shader:_0x4dcc1d}=this,{impl:_0x3b6938}=_0x4dcc1d;this['shaderVali'+'d']===void(-0x26*0x93+0x14e3+0xef)&&(_0x4dcc1d['failed']?this['shaderVali'+'d']=!(0x1a39+-0x14c*-0xf+0x2*-0x16d6):_0x4dcc1d['ready']||(this['shaderAsyn'+'cCompile']?_0x3b6938['isLinked'](this)?_0x3b6938['finalize'](this,_0x4dcc1d)||(_0x4dcc1d['failed']=!(-0xc2d+-0xd7+0x341*0x4),this['shaderVali'+'d']=!(-0x9b5+-0xde2+0x1798)):this['shaderVali'+'d']=!(0xb1b+0x3e9+0x9*-0x1ab):_0x3b6938['finalize'](this,_0x4dcc1d)||(_0x4dcc1d['failed']=!(-0x1*-0x122b+-0x1b4f*-0x1+-0x2d7a),this['shaderVali'+'d']=!(0x2169+0x2b*0xc9+-0xd6f*0x5)))),this['shaderVali'+'d']===void(0x1*-0x1318+0x1836+0x5*-0x106)&&(this['gl']['useProgram'](_0x3b6938['glProgram']),this['shaderVali'+'d']=!(0x1532+0x48b*0x1+-0x19bd));}['clearVerte'+'xArrayObje'+'ctCache'](){const _0x40290f=this['gl'];this['_vaoMap']['forEach']((_0x5ed1da,_0x77f25a,_0x2bb895)=>{_0x40290f['deleteVert'+'exArray'](_0x5ed1da);}),this['_vaoMap']['clear']();}set['fullscreen'](_0x181ba3){_0x181ba3?this['gl']['canvas']['requestFul'+'lscreen']():document['exitFullsc'+'reen']();}get['fullscreen'](){return!!document['fullscreen'+'Element'];}['debugLoseC'+'ontext'](_0x4fd147=-0x4be*0x7+0x4*0x6ac+0x6e6){const _0x587c99=this['gl']['getExtensi'+'on']('WEBGL_lose'+'_context');_0x587c99['loseContex'+'t'](),setTimeout(()=>_0x587c99['restoreCon'+'text'](),_0x4fd147);}}let ET=0x1*-0x2074+0x5e*-0x14+-0x351*-0xc;class xr{constructor(_0x14e78e,_0x46fe0d,_0x45adc7,_0x5f15bf=ms,_0x1fadc1,_0x139796){this['device']=_0x14e78e,this['format']=_0x46fe0d,this['numIndices']=_0x45adc7,this['usage']=_0x5f15bf,this['id']=ET++,this['impl']=_0x14e78e['createInde'+'xBufferImp'+'l'](this,_0x139796);const _0x40c1dc=Px[_0x46fe0d];this['bytesPerIn'+'dex']=_0x40c1dc,this['numBytes']=this['numIndices']*_0x40c1dc,_0x1fadc1?this['setData'](_0x1fadc1):this['storage']=new ArrayBuffer(this['numBytes']),this['adjustVram'+'SizeTracki'+'ng'](_0x14e78e['_vram'],this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x1f0188=this['device'],_0x22c539=_0x1f0188['buffers']['indexOf'](this);_0x22c539!==-(0x905+-0x205*-0x5+-0x131d)&&_0x1f0188['buffers']['splice'](_0x22c539,0x9d5*0x2+0x10bd+-0x2466),this['device']['indexBuffe'+'r']===this&&(this['device']['indexBuffe'+'r']=null),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x1f0188),this['adjustVram'+'SizeTracki'+'ng'](_0x1f0188['_vram'],-this['storage']['byteLength']));}['adjustVram'+'SizeTracki'+'ng'](_0x1b8408,_0x6be56e){w['trace'](f0,this['id']+'\x20size:\x20'+_0x6be56e+'\x20vram.ib:\x20'+_0x1b8408['ib']+'\x20=>\x20'+(_0x1b8408['ib']+_0x6be56e)),_0x1b8408['ib']+=_0x6be56e;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getNumIndi'+'ces'](){return this['numIndices'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x1cae54){return _0x1cae54['byteLength']!==this['numBytes']?(w['error']('IndexBuffe'+'r:\x20wrong\x20i'+'nitial\x20dat'+'a\x20size:\x20ex'+'pected\x20'+this['numBytes']+',\x20got\x20'+_0x1cae54['byteLength']),!(0x7c8*0x2+0x3*0xc7e+0x3509*-0x1)):(this['storage']=_0x1cae54,this['unlock'](),!(0x8*-0x4e0+0x419+-0x1*-0x22e7));}['_lockTyped'+'Array'](){const _0x7fb40d=this['lock']();return this['format']===yr?new Uint32Array(_0x7fb40d):this['format']===ji?new Uint16Array(_0x7fb40d):new Uint8Array(_0x7fb40d);}['writeData'](_0x180916,_0x45cf69){const _0x1f7f63=this['_lockTyped'+'Array']();if(_0x180916['length']>_0x45cf69){if(ArrayBuffer['isView'](_0x180916))_0x180916=_0x180916['subarray'](0x18*0xa6+0x615+-0x15a5,_0x45cf69),_0x1f7f63['set'](_0x180916);else{for(let _0x4a26f3=-0x2313+-0x1a78+-0x3d8b*-0x1;_0x4a26f3<_0x45cf69;_0x4a26f3++)_0x1f7f63[_0x4a26f3]=_0x180916[_0x4a26f3];}}else _0x1f7f63['set'](_0x180916);this['unlock']();}['readData'](_0x1d5317){const _0x291ad2=this['_lockTyped'+'Array'](),_0x2604f4=this['numIndices'];if(ArrayBuffer['isView'](_0x1d5317))_0x1d5317['set'](_0x291ad2);else{_0x1d5317['length']=-0x270a+0x145d+0x1*0x12ad;for(let _0x43ed8f=-0x6f6+-0x183e+0x1f34;_0x43ed8f<_0x2604f4;_0x43ed8f++)_0x1d5317[_0x43ed8f]=_0x291ad2[_0x43ed8f];}return _0x2604f4;}}class bT{constructor(){h(this,'clearValue',new ie(-0x1f2+-0x12*0xc0+0xf72,-0x59*-0x29+0x16e8*0x1+-0x2529,0x1*-0x1003+0x6b4+-0x94f*-0x1,-0x184+-0xd*0xc2+0xb5f)),h(this,'clearValue'+'Linear',new ie(-0x1139+0xa*-0x7f+0x162f,0x1ebd+-0x2043+0x186,-0x1817+0x26cf+-0x4*0x3ae,-0xe34+-0x43*-0x47+-0x460)),h(this,'clear',!(0x23d+0x14a4+-0x16e0*0x1)),h(this,'store',!(-0x10bc+-0x73e+0x36d*0x7)),h(this,'resolve',!(0x220+-0x79*-0x13+0xb1b*-0x1)),h(this,'genMipmaps',!(-0x26c1+-0x1*0x9c1+0x3083));}}class AT{constructor(){h(this,'clearDepth'+'Value',0x59c+0x4f3*0x5+-0x50f*0x6),h(this,'clearStenc'+'ilValue',-0xfb5*0x2+-0xe5*0x29+0x1*0x4417),h(this,'clearDepth',!(0x964*-0x4+-0x30d+-0x3*-0xd8a)),h(this,'clearStenc'+'il',!(0x7*-0x15b+0xc86*-0x1+0x1604)),h(this,'storeDepth',!(-0xc28+0x2fc*-0xb+0x2cfd)),h(this,'resolveDep'+'th',!(-0x2278+0x41*-0x53+0x378c)),h(this,'storeStenc'+'il',!(-0x4b5*0x5+-0x1*0x220c+0x15f*0x2a));}}class ys{constructor(_0x10d6ee){h(this,'_name'),h(this,'device'),h(this,'_enabled',!(0xd05*0x2+0x9ce+-0x23d8)),h(this,'_skipStart',!(0x36b*-0x2+0x15b6+-0xedf)),h(this,'_skipEnd',!(-0x162e+-0x2*-0x3a1+0xeed*0x1)),h(this,'executeEna'+'bled',!(-0x907+0x14d4*0x1+-0xbcd)),h(this,'renderTarg'+'et'),h(this,'_options'),h(this,'samples',-0x7*0x4d5+-0xa*-0x243+-0x97*-0x13),h(this,'colorArray'+'Ops',[]),h(this,'depthStenc'+'ilOps'),h(this,'requiresCu'+'bemaps',!(0x38a+-0x19*0x3f+0x29d*0x1)),h(this,'fullSizeCl'+'earRect',!(0x2211+0x20be+-0x42cf)),h(this,'beforePass'+'es',[]),h(this,'afterPasse'+'s',[]),(w['assert'](_0x10d6ee),this['device']=_0x10d6ee);}get['colorOps'](){return this['colorArray'+'Ops'][0x202f+0x89*-0x19+-0x12ce*0x1];}set['name'](_0xa8006f){this['_name']=_0xa8006f;}get['name'](){return this['_name']||(this['_name']=this['constructo'+'r']['name']),this['_name'];}set['scaleX'](_0x5e23fb){w['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleX']=_0x5e23fb;}get['scaleX'](){return this['_options']['scaleX'];}set['scaleY'](_0x83c2fc){w['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleY']=_0x83c2fc;}get['scaleY'](){return this['_options']['scaleY'];}set['options'](_0x4b0726){this['_options']=_0x4b0726,_0x4b0726&&(this['scaleX']=this['scaleX']??0xb50+0x14b7+-0x2*0x1003,this['scaleY']=this['scaleY']??-0x562*0x1+0x1202+0x9*-0x167);}get['options'](){return this['_options'];}['init'](_0x1e128=null,_0x30eec9){this['options']=_0x30eec9,this['renderTarg'+'et']=_0x1e128,this['samples']=Math['max'](this['renderTarg'+'et']?this['renderTarg'+'et']['samples']:this['device']['samples'],0x22a+0xb95+-0xdbe),this['allocateAt'+'tachments'](),this['postInit']();}['allocateAt'+'tachments'](){var _0x202555,_0x2eb0d8,_0x709621,_0x354d9f;const _0x116ad7=this['renderTarg'+'et'];this['depthStenc'+'ilOps']=new AT(),_0x116ad7!=null&&_0x116ad7['depthBuffe'+'r']&&(this['depthStenc'+'ilOps']['storeDepth']=!(0x133e+0x32*0x59+-0x24a0));const _0x123d0d=_0x116ad7?((_0x202555=_0x116ad7['_colorBuff'+'ers'])==null?void(-0x7b*-0x21+-0x4*0x7f4+-0x13*-0xd7):_0x202555['length'])??-0x1*0xc8f+0x1dd2+0x1143*-0x1:-0x26ab*0x1+0xfc3+0x16e9;this['colorArray'+'Ops']['length']=0x1bd7+-0x2174+0x3*0x1df;for(let _0x3a76b6=0x7b3+-0x1f85+-0x17d2*-0x1;_0x3a76b6<_0x123d0d;_0x3a76b6++){const _0x149a73=new bT();this['colorArray'+'Ops'][_0x3a76b6]=_0x149a73,this['samples']===0x10c4+-0x3c+-0x1*0x1087&&(_0x149a73['store']=!(0x87*-0x10+-0x20f9+0x2969*0x1),_0x149a73['resolve']=!(0xb34+-0x8*0x119+-0x26b));const _0x4db7f3=(_0x709621=(_0x2eb0d8=this['renderTarg'+'et'])==null?void(-0x1dfa+-0xa*-0x2ba+-0x15b*-0x2):_0x2eb0d8['_colorBuff'+'ers'])==null?void(0xb45+-0x30d+-0x2*0x41c):_0x709621[_0x3a76b6];if((_0x354d9f=this['renderTarg'+'et'])!=null&&_0x354d9f['mipmaps']&&(_0x4db7f3!=null&&_0x4db7f3['mipmaps'])){const _0x3f4eaa=rn(_0x4db7f3['_format']);_0x149a73['genMipmaps']=!_0x3f4eaa;}}}['destroy'](){}['postInit'](){}['frameUpdat'+'e'](){if(this['_options']&&this['renderTarg'+'et']){const _0x483113=this['_options']['resizeSour'+'ce']??this['device']['backBuffer'],_0xa3ea24=Math['floor'](_0x483113['width']*this['scaleX']),_0x48e426=Math['floor'](_0x483113['height']*this['scaleY']);this['renderTarg'+'et']['resize'](_0xa3ea24,_0x48e426);}}['before'](){}['execute'](){}['after'](){}['onEnable'](){}['onDisable'](){}set['enabled'](_0x4f8b59){this['_enabled']!==_0x4f8b59&&(this['_enabled']=_0x4f8b59,_0x4f8b59?this['onEnable']():this['onDisable']());}get['enabled'](){return this['_enabled'];}['setClearCo'+'lor'](_0x37fdec){const _0x52e3d7=this['colorArray'+'Ops']['length'];for(let _0x3f0d29=0x123*-0x1+0x45b*0x1+-0x338;_0x3f0d29<_0x52e3d7;_0x3f0d29++){const _0x2d1171=this['colorArray'+'Ops'][_0x3f0d29];_0x37fdec&&(_0x2d1171['clearValue']['copy'](_0x37fdec),_0x2d1171['clearValue'+'Linear']['linear'](_0x37fdec)),_0x2d1171['clear']=!!_0x37fdec;}}['setClearDe'+'pth'](_0x1c8f1a){_0x1c8f1a&&(this['depthStenc'+'ilOps']['clearDepth'+'Value']=_0x1c8f1a),this['depthStenc'+'ilOps']['clearDepth']=_0x1c8f1a!==void(-0xa9*0x17+0x12d6+-0x3a7);}['setClearSt'+'encil'](_0x1ec73a){_0x1ec73a&&(this['depthStenc'+'ilOps']['clearStenc'+'ilValue']=_0x1ec73a),this['depthStenc'+'ilOps']['clearStenc'+'il']=_0x1ec73a!==void(-0x915+0x7a7+0x16e);}['render'](){if(this['enabled']){const _0x177970=this['device'],_0x39a9fa=this['renderTarg'+'et']!==void(-0x2e*0x16+-0x9cf+0x10f*0xd);w['call'](()=>{this['log'](_0x177970,_0x177970['renderPass'+'Index']);}),this['before'](),this['executeEna'+'bled']&&(_0x39a9fa&&!this['_skipStart']&&_0x177970['startRende'+'rPass'](this),this['execute'](),_0x39a9fa&&!this['_skipEnd']&&_0x177970['endRenderP'+'ass'](this)),this['after'](),_0x177970['renderPass'+'Index']++;}}['log'](_0x2dcfc5,_0x12d856=-0x26f6+-0x2e0+0x29d6){var _0x16f164,_0x14d160,_0x5717d0;if(mi['get'](em)||mi['get'](tn)){const _0x48987d=this['renderTarg'+'et']??(this['renderTarg'+'et']===null?_0x2dcfc5['backBuffer']:null),_0x1552cc=!!(_0x48987d!=null&&_0x48987d['impl']['assignedCo'+'lorTexture'])||(_0x48987d==null?void(-0x35*0x5d+-0x3*-0x2e0+0x38b*0x3):_0x48987d['impl']['suppliedCo'+'lorFramebu'+'ffer'])!==void(-0x1bf+-0xab6*-0x2+-0x17*0xdb),_0x1978d6=((_0x16f164=_0x48987d==null?void(0x169+-0xae4+0x97b):_0x48987d['_colorBuff'+'ers'])==null?void(0x238e+0x265+0x91*-0x43):_0x16f164['length'])??(_0x1552cc?-0xba0+0x3*0x283+0x418:-0x4e9*0x6+-0x84*-0x16+0x60a*0x3),_0x19ce49=_0x48987d==null?void(-0x13f4+-0x1af2+-0x105*-0x2e):_0x48987d['depth'],_0x26e8fe=_0x48987d==null?void(0x1136+0xe92*0x1+0x1fc8*-0x1):_0x48987d['stencil'],_0x98ef30=_0x48987d==null?void(-0x1f6f+-0x1149+0x8*0x617):_0x48987d['mipLevel'],_0x3e0b65=_0x48987d?'\x20RT:\x20'+(_0x48987d?_0x48987d['name']:'NULL')+'\x20'+(_0x1978d6>0x14*0xdf+-0x47*0x6b+0xc41?'[Color'+(_0x1978d6>-0x204d+-0x2*-0x10be+-0x12e?'\x20x\x20'+_0x1978d6:'')+']':'')+(_0x19ce49?'[Depth]':'')+(_0x26e8fe?'[Stencil]':'')+'\x20'+_0x48987d['width']+'\x20x\x20'+_0x48987d['height']+(this['samples']>-0x102*0xd+-0x4*-0x246+0x402?'\x20samples:\x20'+this['samples']:'')+(_0x98ef30>0x6+0xd*0x301+0x595*-0x7?'\x20mipLevel:'+'\x20'+_0x98ef30:''):'',_0x363ea4=this['_skipStart']?'++':_0x12d856['toString']()['padEnd'](-0x3*-0x86+0x27*-0xfd+-0x1*-0x24fb,'\x20');w['trace'](em,_0x363ea4+':\x20'+this['name']['padEnd'](0xd0e+0x1cc9+0x1*-0x29c3,'\x20')+(this['executeEna'+'bled']?'':'\x20DISABLED\x20')+_0x3e0b65['padEnd'](0x365*0x7+0x1*0xbab+-0x2350));for(let _0x1b0cd4=-0xa*-0x1f+-0x1300+0x11ca;_0x1b0cd4<_0x1978d6;_0x1b0cd4++){const _0x35d7da=this['colorArray'+'Ops'][_0x1b0cd4],_0x16676f=(_0x14d160=Nt['get'](_0x1552cc?_0x2dcfc5['backBuffer'+'Format']:_0x48987d['getColorBu'+'ffer'](_0x1b0cd4)['format']))==null?void(-0x8*0x32b+-0x955+0x22ad):_0x14d160['name'];w['trace'](tn,'\x20\x20\x20\x20color['+_0x1b0cd4+']:\x20'+(_0x35d7da['clear']?'clear':'load')+'->'+(_0x35d7da['store']?'store':'discard')+'\x20'+(_0x35d7da['resolve']?'resolve\x20':'')+(_0x35d7da['genMipmaps']?'mipmaps\x20':'')+'\x20[format:\x20'+_0x16676f+']\x20'+(_0x35d7da['clear']?'[clear:\x20'+_0x35d7da['clearValue']['toString'](!(-0x4e6*0x4+0xa9c+-0x1*-0x8fc),!(0xf73+-0x12dd*-0x1+0x3d*-0x90))+']':''));}if(this['depthStenc'+'ilOps']){const _0x217c28=''+(_0x48987d['depthBuffe'+'r']?'\x20[format:\x20'+((_0x5717d0=Nt['get'](_0x48987d['depthBuffe'+'r']['format']))==null?void(0xcf4+-0xa55+0x29f*-0x1):_0x5717d0['name'])+']':'');_0x19ce49&&w['trace'](tn,'\x20\x20\x20\x20depthO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearDepth']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeDepth']?'store':'discard')+(this['depthStenc'+'ilOps']['resolveDep'+'th']?'\x20resolve':'')+_0x217c28+(this['depthStenc'+'ilOps']['clearDepth']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearDepth'+'Value']+']':'')),_0x26e8fe&&w['trace'](tn,'\x20\x20\x20\x20stencO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeStenc'+'il']?'store':'discard')+_0x217c28+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearStenc'+'ilValue']+']':''));}}}}function CT(_0x39dfe8){this['array'][this['index']]=_0x39dfe8;}function PT(_0xd14002,_0x272ace){this['array'][this['index']]=_0xd14002,this['array'][this['index']+(0x260+0x171d+-0x197c)]=_0x272ace;}function MT(_0xe18b15,_0x1653fe,_0x17877f){this['array'][this['index']]=_0xe18b15,this['array'][this['index']+(0x3d3*-0x2+-0x3bf*-0x4+-0x755)]=_0x1653fe,this['array'][this['index']+(0x619+-0xc20+0xf*0x67)]=_0x17877f;}function DT(_0x4a4bb4,_0x338be0,_0x3c94db,_0x30b8d9){this['array'][this['index']]=_0x4a4bb4,this['array'][this['index']+(-0x1*-0x4c5+-0x1*0x949+0x485)]=_0x338be0,this['array'][this['index']+(0xecb*-0x2+0x1*0x17d4+-0x9*-0xa4)]=_0x3c94db,this['array'][this['index']+(-0x44e*-0x2+0xc1*-0x2+0xf*-0x79)]=_0x30b8d9;}function IT(_0x3f0709,_0x40e782,_0x1ba7c0){this['array'][_0x3f0709]=_0x40e782[_0x1ba7c0];}function LT(_0x5dfa1f,_0x16ec76,_0x2f6c1f){this['array'][_0x5dfa1f]=_0x16ec76[_0x2f6c1f],this['array'][_0x5dfa1f+(0x58c+0x29*0x6b+0xb57*-0x2)]=_0x16ec76[_0x2f6c1f+(-0x60b+-0xf0*-0x15+-0xda4)];}function RT(_0x352f16,_0x589797,_0x59dbbc){this['array'][_0x352f16]=_0x589797[_0x59dbbc],this['array'][_0x352f16+(0x1356+0x242c+0xd*-0x445)]=_0x589797[_0x59dbbc+(-0x1*-0x821+-0xb14+-0x6c*-0x7)],this['array'][_0x352f16+(0x12ca+-0x2031+0xd69)]=_0x589797[_0x59dbbc+(0x4c0*0x5+0x3ba*0x5+0x2a6*-0x10)];}function OT(_0x5f1779,_0x244ea1,_0x4b27cf){this['array'][_0x5f1779]=_0x244ea1[_0x4b27cf],this['array'][_0x5f1779+(-0x1825+0x9c1+0xb*0x14f)]=_0x244ea1[_0x4b27cf+(-0x24bf+-0x1117+0x35d7)],this['array'][_0x5f1779+(-0x1*0x8e4+-0x583+0xe69)]=_0x244ea1[_0x4b27cf+(0x167f+-0x72d+-0xf50*0x1)],this['array'][_0x5f1779+(-0x1c5*0x5+-0x531*0x2+-0x133e*-0x1)]=_0x244ea1[_0x4b27cf+(-0x1dbc+-0x76c*0x4+0x1*0x3b6f)];}function FT(_0x29ea38,_0x5cf817,_0x4a7852){_0x5cf817[_0x4a7852]=this['array'][_0x29ea38];}function NT(_0x3be8e2,_0x231530,_0x57791e){_0x231530[_0x57791e]=this['array'][_0x3be8e2],_0x231530[_0x57791e+(0x184*-0x11+0x1b92+0x1*-0x1cd)]=this['array'][_0x3be8e2+(0x2b3*0x1+-0x25a8+0x22f6)];}function kT(_0x1012e4,_0x2a073b,_0x163537){_0x2a073b[_0x163537]=this['array'][_0x1012e4],_0x2a073b[_0x163537+(0x855+-0x1*0x1f45+0x16f1)]=this['array'][_0x1012e4+(0x7*-0x30b+-0xba9+-0x20f7*-0x1)],_0x2a073b[_0x163537+(0x1*0x1e4d+-0xf*0x17c+0xf*-0x89)]=this['array'][_0x1012e4+(0x16f0+0x1*0x1972+-0x3060)];}function UT(_0x96fcb4,_0x56d4ee,_0x135eb5){_0x56d4ee[_0x135eb5]=this['array'][_0x96fcb4],_0x56d4ee[_0x135eb5+(-0x65a+0x1fd3+-0xa3*0x28)]=this['array'][_0x96fcb4+(-0xe5*0x21+-0x2*-0x545+0x3cc*0x5)],_0x56d4ee[_0x135eb5+(0x2*-0x9a8+0x197f+-0x62d)]=this['array'][_0x96fcb4+(-0x70b+0x377+0x1cb*0x2)],_0x56d4ee[_0x135eb5+(0x1*0xa82+-0x1f*-0x118+0x2c67*-0x1)]=this['array'][_0x96fcb4+(-0x1647+-0x1*-0x1b47+-0x4fd)];}class BT{constructor(_0x261cc1,_0x20fdb0,_0x1d1987){switch(this['index']=-0xe*-0x245+0xf2*-0x20+-0x186,this['numCompone'+'nts']=_0x20fdb0['numCompone'+'nts'],_0x1d1987['interleave'+'d']?this['array']=new _n[_0x20fdb0['dataType']](_0x261cc1,_0x20fdb0['offset']):this['array']=new _n[_0x20fdb0['dataType']](_0x261cc1,_0x20fdb0['offset'],_0x1d1987['vertexCoun'+'t']*_0x20fdb0['numCompone'+'nts']),this['stride']=_0x20fdb0['stride']/this['array']['constructo'+'r']['BYTES_PER_'+'ELEMENT'],_0x20fdb0['numCompone'+'nts']){case-0x1*-0x1024+-0x417*-0x1+0xa1d*-0x2:this['set']=CT,this['getToArray']=FT,this['setFromArr'+'ay']=IT;break;case 0x410+0x2*0x24e+-0x8aa:this['set']=PT,this['getToArray']=NT,this['setFromArr'+'ay']=LT;break;case-0x20c6+0x243c+-0x373:this['set']=MT,this['getToArray']=kT,this['setFromArr'+'ay']=RT;break;case-0x3*-0x595+0x1e50+-0x1*0x2f0b:this['set']=DT,this['getToArray']=UT,this['setFromArr'+'ay']=OT;break;}}['get'](_0x44bfa6){return this['array'][this['index']+_0x44bfa6];}['set'](_0x7114cb,_0x37e1d3,_0xb638f7,_0x40f78f){}['getToArray'](_0x3bef26,_0x18c5a8,_0x136a29){}['setFromArr'+'ay'](_0x1ec04a,_0xad5821,_0x18dc75){}}class Ao{constructor(_0x1174de){this['vertexBuff'+'er']=_0x1174de,this['vertexForm'+'atSize']=_0x1174de['getFormat']()['size'],this['buffer']=this['vertexBuff'+'er']['lock'](),this['accessors']=[],this['element']={};const _0x4f026c=this['vertexBuff'+'er']['getFormat']();for(let _0x38275b=0x14c+-0x165b+0x150f;_0x38275b<_0x4f026c['elements']['length'];_0x38275b++){const _0x7a55be=_0x4f026c['elements'][_0x38275b];this['accessors'][_0x38275b]=new BT(this['buffer'],_0x7a55be,_0x4f026c),this['element'][_0x7a55be['name']]=this['accessors'][_0x38275b];}}['next'](_0x2735be=-0x19cf+-0x4b*0xa+0x1cbe){let _0x365ea6=0xda3*0x2+-0x1ebd+-0x1*-0x377;const _0x889872=this['accessors'],_0xf67649=this['accessors']['length'];for(;_0x365ea6<_0xf67649;){const _0x3ec79c=_0x889872[_0x365ea6++];_0x3ec79c['index']+=_0x2735be*_0x3ec79c['stride'];}}['end'](){this['vertexBuff'+'er']['unlock']();}['writeData'](_0x21816e,_0x3c958c,_0x2ca970){const _0x2635d8=this['element'][_0x21816e];if(_0x2635d8){_0x2ca970>this['vertexBuff'+'er']['numVertice'+'s']&&(w['error']('NumVertice'+'s\x20provided'+'\x20to\x20setDat'+'a:\x20'+_0x2ca970+('\x20is\x20larger'+'\x20than\x20spac'+'e\x20in\x20Verte'+'xBuffer:\x20')+this['vertexBuff'+'er']['numVertice'+'s']),_0x2ca970=this['vertexBuff'+'er']['numVertice'+'s']);const _0x2874f4=_0x2635d8['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){let _0x1bfab1=0x547+-0x5df*-0x1+-0xb26;for(let _0xd581c8=0x11a1+-0xd7*-0x6+-0x16ab;_0xd581c8<_0x2ca970;_0xd581c8++)_0x2635d8['setFromArr'+'ay'](_0x1bfab1,_0x3c958c,_0xd581c8*_0x2874f4),_0x1bfab1+=_0x2635d8['stride'];}else{if(_0x3c958c['length']>_0x2ca970*_0x2874f4){const _0x4f0c76=_0x2ca970*_0x2874f4;if(ArrayBuffer['isView'](_0x3c958c))_0x3c958c=_0x3c958c['subarray'](-0x324+0x1feb*0x1+-0x1cc7*0x1,_0x4f0c76),_0x2635d8['array']['set'](_0x3c958c);else{for(let _0x4232e4=0x1*-0x461+-0x14fc+0x195d*0x1;_0x4232e4<_0x4f0c76;_0x4232e4++)_0x2635d8['array'][_0x4232e4]=_0x3c958c[_0x4232e4];}}else _0x2635d8['array']['set'](_0x3c958c);}}}['readData'](_0x426355,_0x39da3d){const _0x437d2f=this['element'][_0x426355];let _0x1b6b47=0x6b9*0x2+-0x17b6+0x92*0x12;if(_0x437d2f){_0x1b6b47=this['vertexBuff'+'er']['numVertice'+'s'];let _0x403784;const _0x20d424=_0x437d2f['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){Array['isArray'](_0x39da3d)&&(_0x39da3d['length']=-0x1eca+-0x82b+0x26f5),_0x437d2f['index']=-0x1*0x1da7+0x157*0x15+-0x1*-0x184;let _0x45473a=0x1*-0x916+-0xb88+0x149e;for(_0x403784=0x8b*0x1d+-0x17c+-0xe43;_0x403784<_0x1b6b47;_0x403784++)_0x437d2f['getToArray'](_0x45473a,_0x39da3d,_0x403784*_0x20d424),_0x45473a+=_0x437d2f['stride'];}else{if(ArrayBuffer['isView'](_0x39da3d))_0x39da3d['set'](_0x437d2f['array']);else{_0x39da3d['length']=-0x16*0x5d+0x74b*0x4+0xa97*-0x2;const _0x3ae959=_0x1b6b47*_0x20d424;for(_0x403784=-0xc*0xe9+-0x330*0xc+0x312c;_0x403784<_0x3ae959;_0x403784++)_0x39da3d[_0x403784]=_0x437d2f['array'][_0x403784];}}}return _0x1b6b47;}}const zT=-(-0x1249*0x1+0xb35+0x715);class VT{constructor(_0x3a445e,_0x254b3d){h(this,'key',null),h(this,'element',null),h(this,'event',null),_0x254b3d&&(this['key']=_0x254b3d['keyCode'],this['element']=_0x254b3d['target'],this['event']=_0x254b3d);}}const Fl=new VT();function yd(_0x4abc83){return Fl['key']=_0x4abc83['keyCode'],Fl['element']=_0x4abc83['target'],Fl['event']=_0x4abc83,Fl;}function Nl(_0x4f9a01){return typeof _0x4f9a01=='string'?_0x4f9a01['toUpperCas'+'e']()['charCodeAt'](-0x7f3+0x211*-0x12+0x1*0x2d25):_0x4f9a01;}const GT={0x9:'Tab',0xd:'Enter',0x10:'Shift',0x11:'Control',0x12:'Alt',0x1b:'Escape',0x25:'Left',0x26:'Up',0x27:'Right',0x28:'Down',0x2e:'Delete',0x5b:'Win'};class Nm extends me{constructor(_0x84d9f6,_0x33fe53={}){super(),h(this,'_element',null),h(this,'_keymap',{}),h(this,'_lastmap',{}),(this['_keyDownHa'+'ndler']=this['_handleKey'+'Down']['bind'](this),this['_keyUpHand'+'ler']=this['_handleKey'+'Up']['bind'](this),this['_keyPressH'+'andler']=this['_handleKey'+'Press']['bind'](this),this['_visibilit'+'yChangeHan'+'dler']=this['_handleVis'+'ibilityCha'+'nge']['bind'](this),this['_windowBlu'+'rHandler']=this['_handleWin'+'dowBlur']['bind'](this),_0x84d9f6&&this['attach'](_0x84d9f6),this['preventDef'+'ault']=_0x33fe53['preventDef'+'ault']||!(0x67*-0x4f+-0x115*0x1f+0x4155),this['stopPropag'+'ation']=_0x33fe53['stopPropag'+'ation']||!(0x19b8+0x1e9+-0x1ba0));}['attach'](_0x71c89f){this['_element']&&this['detach'](),this['_element']=_0x71c89f,this['_element']['addEventLi'+'stener']('keydown',this['_keyDownHa'+'ndler'],!(0x2*-0x5c1+0x6cd*0x4+0x27*-0x67)),this['_element']['addEventLi'+'stener']('keypress',this['_keyPressH'+'andler'],!(0x219+-0x88e*-0x3+-0x1bc2)),this['_element']['addEventLi'+'stener']('keyup',this['_keyUpHand'+'ler'],!(-0x8aa+0x19bf+0x445*-0x4)),document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0xd69+-0x43*0x63+0x2753)),window['addEventLi'+'stener']('blur',this['_windowBlu'+'rHandler'],!(-0x2*-0x9a4+-0x24ba+0x5d1*0x3));}['detach'](){if(!this['_element']){w['warn']('Unable\x20to\x20'+'detach\x20key'+'board.\x20It\x20'+'is\x20not\x20att'+'ached\x20to\x20a'+'n\x20element.');return;}this['_element']['removeEven'+'tListener']('keydown',this['_keyDownHa'+'ndler']),this['_element']['removeEven'+'tListener']('keypress',this['_keyPressH'+'andler']),this['_element']['removeEven'+'tListener']('keyup',this['_keyUpHand'+'ler']),this['_element']=null,document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x5cb+0xf74+0x8*-0x135)),window['removeEven'+'tListener']('blur',this['_windowBlu'+'rHandler'],!(0x3*-0x2ba+0x1a*0xb+0x711));}['toKeyIdent'+'ifier'](_0x2370f5){_0x2370f5=Nl(_0x2370f5);const _0x2bd2f6=GT[_0x2370f5['toString']()];if(_0x2bd2f6)return _0x2bd2f6;let _0x55cdc2=_0x2370f5['toString'](0x25fd+-0x1f21+-0xae*0xa)['toUpperCas'+'e']();const _0x4b2a34=_0x55cdc2['length'];for(let _0xfc3912=-0xce*-0xd+-0x2687*0x1+0x1c11;_0xfc3912<0x20f2+0x8*0x40+-0x1177*0x2-_0x4b2a34;_0xfc3912++)_0x55cdc2='0'+_0x55cdc2;return'U+'+_0x55cdc2;}['_handleKey'+'Down'](_0x21e634){const _0x4552dc=_0x21e634['keyCode']||_0x21e634['charCode'];if(_0x4552dc===void(0x1*-0x16ef+0x1604+0x2f*0x5))return;const _0x159637=this['toKeyIdent'+'ifier'](_0x4552dc);this['_keymap'][_0x159637]=!(-0x1c*-0x3b+-0x801*0x3+0x1*0x118f),this['fire']('keydown',yd(_0x21e634)),this['preventDef'+'ault']&&_0x21e634['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x21e634['stopPropag'+'ation']();}['_handleKey'+'Up'](_0x2f2d73){const _0x5906a1=_0x2f2d73['keyCode']||_0x2f2d73['charCode'];if(_0x5906a1===void(-0x6e6+-0x7e3+0xec9))return;const _0x1c33c7=this['toKeyIdent'+'ifier'](_0x5906a1);delete this['_keymap'][_0x1c33c7],this['fire']('keyup',yd(_0x2f2d73)),this['preventDef'+'ault']&&_0x2f2d73['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x2f2d73['stopPropag'+'ation']();}['_handleKey'+'Press'](_0x36bd1b){this['fire']('keypress',yd(_0x36bd1b)),this['preventDef'+'ault']&&_0x36bd1b['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x36bd1b['stopPropag'+'ation']();}['_handleVis'+'ibilityCha'+'nge'](){document['visibility'+'State']==='hidden'&&this['_handleWin'+'dowBlur']();}['_handleWin'+'dowBlur'](){this['_keymap']={},this['_lastmap']={};}['update'](){for(const _0x42acb5 in this['_lastmap'])delete this['_lastmap'][_0x42acb5];for(const _0x18c2c6 in this['_keymap'])this['_keymap']['hasOwnProp'+'erty'](_0x18c2c6)&&(this['_lastmap'][_0x18c2c6]=this['_keymap'][_0x18c2c6]);}['isPressed'](_0x4615f5){const _0x16503a=Nl(_0x4615f5),_0x4b1a33=this['toKeyIdent'+'ifier'](_0x16503a);return!!this['_keymap'][_0x4b1a33];}['wasPressed'](_0x5165e2){const _0xe7d75a=Nl(_0x5165e2),_0xc6c4f6=this['toKeyIdent'+'ifier'](_0xe7d75a);return!!this['_keymap'][_0xc6c4f6]&&!this['_lastmap'][_0xc6c4f6];}['wasRelease'+'d'](_0x3672e2){const _0x13caf1=Nl(_0x3672e2),_0x4077a7=this['toKeyIdent'+'ifier'](_0x13caf1);return!this['_keymap'][_0x4077a7]&&!!this['_lastmap'][_0x4077a7];}}h(Nm,'EVENT_KEYD'+'OWN','keydown'),h(Nm,'EVENT_KEYU'+'P','keyup');function Lf(){return!!(document['pointerLoc'+'kElement']||document['mozPointer'+'LockElemen'+'t']||document['webkitPoin'+'terLockEle'+'ment']);}class Zr{constructor(_0x5034ac,_0x52161a){h(this,'x',-0x607*0x5+0x2455*-0x1+0x4278),h(this,'y',-0x1*0x145f+0x6b5+0xdaa),h(this,'dx',-0x4d5+-0x159*-0x8+-0x5f3),h(this,'dy',0x260b+-0x1*-0x1555+0x14*-0x2f8),h(this,'button',zT),h(this,'wheelDelta',-0x1*-0x1b22+-0xcd3+-0x6f*0x21),h(this,'element'),h(this,'ctrlKey',!(-0x266d+0x83*0x42+0x4a8)),h(this,'altKey',!(-0x64*-0x17+0xbef+0xa75*-0x2)),h(this,'shiftKey',!(0xfa0+0x1d8f+-0x1697*0x2)),h(this,'metaKey',!(0x135a*-0x1+-0x58a*-0x7+-0x136b)),h(this,'event');let _0x418a77={'x':0x0,'y':0x0};if(_0x52161a){if(_0x52161a instanceof Zr)throw Error('Expected\x20M'+'ouseEvent');_0x418a77=_0x5034ac['_getTarget'+'Coords'](_0x52161a);}else _0x52161a={};if(_0x418a77)this['x']=_0x418a77['x'],this['y']=_0x418a77['y'];else{if(Lf())this['x']=-0x352*0x8+0x12a*-0xb+0x275e,this['y']=-0xa6*0x29+0x1*-0x65c+0x20f2;else return;}_0x52161a['type']==='wheel'&&(_0x52161a['deltaY']>0xb*0xe5+0x1*0x225f+0x2*-0x161b?this['wheelDelta']=-0x1*0x105f+0xa60+0x30*0x20:_0x52161a['deltaY']<-0xe5*-0x9+-0xd84+0x577&&(this['wheelDelta']=-(-0xb32+0xb*-0x35+0xd7a))),Lf()?(this['dx']=_0x52161a['movementX']||_0x52161a['webkitMove'+'mentX']||_0x52161a['mozMovemen'+'tX']||-0x255*0xe+0x24f2+-0x44c,this['dy']=_0x52161a['movementY']||_0x52161a['webkitMove'+'mentY']||_0x52161a['mozMovemen'+'tY']||-0x766*-0x1+0x24ad+0xeb1*-0x3):(this['dx']=this['x']-_0x5034ac['_lastX'],this['dy']=this['y']-_0x5034ac['_lastY']),(_0x52161a['type']==='mousedown'||_0x52161a['type']==='mouseup')&&(this['button']=_0x52161a['button']),this['buttons']=_0x5034ac['_buttons']['slice'](0x25e7+-0x2*-0x158+-0x2897),this['element']=_0x52161a['target'],this['ctrlKey']=_0x52161a['ctrlKey']??!(0x8a9*0x2+0x1*-0x25a5+0x1454),this['altKey']=_0x52161a['altKey']??!(0x1a09+-0x23d5+0x9cd),this['shiftKey']=_0x52161a['shiftKey']??!(0x128a*0x1+-0x16b8+0x3*0x165),this['metaKey']=_0x52161a['metaKey']??!(-0x1a7f+0x178b+0x2f5),this['event']=_0x52161a;}}class kl extends me{constructor(_0x21e74c){super(),h(this,'_lastX',0xd*0x101+-0xd*0x1b5+0x1*0x924),h(this,'_lastY',0x62e+0x148+0x5*-0x17e),h(this,'_buttons',[!(-0x22af+-0x2*0x63+-0x2*-0x11bb),!(0x1*0x846+-0x1545+0x1a*0x80),!(0x86f+0x56*0x8+-0xb1e)]),h(this,'_lastbutto'+'ns',[!(0x1*0x10cb+-0x21d*-0x1+-0x12e7),!(0x1*0x6c5+0x23a3+-0x2a67),!(0x1455+-0x1be*0x13+-0x147*-0xa)]),h(this,'_target',null),h(this,'_attached',!(-0x676*0x1+-0x29*0x51+0x26e*0x8)),(this['_upHandler']=this['_handleUp']['bind'](this),this['_downHandl'+'er']=this['_handleDow'+'n']['bind'](this),this['_moveHandl'+'er']=this['_handleMov'+'e']['bind'](this),this['_wheelHand'+'ler']=this['_handleWhe'+'el']['bind'](this),this['_contextMe'+'nuHandler']=_0x270862=>{_0x270862['preventDef'+'ault']();},this['attach'](_0x21e74c));}static['isPointerL'+'ocked'](){return Lf();}['attach'](_0x41c374){if(this['_target']=_0x41c374,this['_attached'])return;this['_attached']=!(-0xc61+0x2120+0x1*-0x14bf);const _0x3b8950={'passive':!(-0x1*-0x2231+0x1*-0xac1+-0x176f)},_0x57e88b=Me['passiveEve'+'nts']?_0x3b8950:!(0xa33*0x2+0x40f+-0x1874);window['addEventLi'+'stener']('mouseup',this['_upHandler'],_0x57e88b),window['addEventLi'+'stener']('mousedown',this['_downHandl'+'er'],_0x57e88b),window['addEventLi'+'stener']('mousemove',this['_moveHandl'+'er'],_0x57e88b),window['addEventLi'+'stener']('wheel',this['_wheelHand'+'ler'],_0x57e88b);}['detach'](){if(!this['_attached'])return;this['_attached']=!(-0x2628+-0x10f8+0x3721),this['_target']=null;const _0x53c25d={'passive':!(0xeb*-0xa+-0x2*-0xcf+-0x95*-0xd)},_0x333a0e=Me['passiveEve'+'nts']?_0x53c25d:!(0x6c5*-0x1+-0x110c+0x17d2);window['removeEven'+'tListener']('mouseup',this['_upHandler'],_0x333a0e),window['removeEven'+'tListener']('mousedown',this['_downHandl'+'er'],_0x333a0e),window['removeEven'+'tListener']('mousemove',this['_moveHandl'+'er'],_0x333a0e),window['removeEven'+'tListener']('wheel',this['_wheelHand'+'ler'],_0x333a0e);}['disableCon'+'textMenu'](){this['_target']&&this['_target']['addEventLi'+'stener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enableCont'+'extMenu'](){this['_target']&&this['_target']['removeEven'+'tListener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enablePoin'+'terLock'](_0xeafb8d,_0x58b369){if(!document['body']['requestPoi'+'nterLock']){_0x58b369&&_0x58b369();return;}const _0x3b14c7=()=>{_0xeafb8d(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x3b14c7);},_0xcf16b2=()=>{_0x58b369(),document['removeEven'+'tListener']('pointerloc'+'kerror',_0xcf16b2);};_0xeafb8d&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x3b14c7,!(0x4e2+-0x69*-0x25+0x140e*-0x1)),_0x58b369&&document['addEventLi'+'stener']('pointerloc'+'kerror',_0xcf16b2,!(0x13*0x1d1+-0x25a*-0x7+0x65f*-0x8)),document['body']['requestPoi'+'nterLock']();}['disablePoi'+'nterLock'](_0x10d063){if(!document['exitPointe'+'rLock'])return;const _0x1b0e36=()=>{_0x10d063(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x1b0e36);};_0x10d063&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x1b0e36,!(-0x170c+0x1*-0x109f+-0x27ac*-0x1)),document['exitPointe'+'rLock']();}['update'](){this['_lastbutto'+'ns'][-0x23c3+0x1*0x1f0d+0x4b6]=this['_buttons'][0x122*-0x1f+0x3ed+0x1f31],this['_lastbutto'+'ns'][-0x1b64+-0x197c+0x34e1]=this['_buttons'][-0x1efd+0x1e4e+0xb0*0x1],this['_lastbutto'+'ns'][0x1*-0x1a49+-0x26f0+0x413b]=this['_buttons'][0x1a02*0x1+0x371+-0x1d71];}['isPressed'](_0x41d1f4){return this['_buttons'][_0x41d1f4];}['wasPressed'](_0xd32fea){return this['_buttons'][_0xd32fea]&&!this['_lastbutto'+'ns'][_0xd32fea];}['wasRelease'+'d'](_0x45a23e){return!this['_buttons'][_0x45a23e]&&this['_lastbutto'+'ns'][_0x45a23e];}['_handleUp'](_0x5c6680){this['_buttons'][_0x5c6680['button']]=!(-0xb*0x12e+-0x13ed*-0x1+-0x6f2);const _0x46b158=new Zr(this,_0x5c6680);_0x46b158['event']&&this['fire']('mouseup',_0x46b158);}['_handleDow'+'n'](_0x4d1a9f){this['_buttons'][_0x4d1a9f['button']]=!(-0x20b*-0xb+0x2c9*0xa+0xd*-0x3df);const _0x473390=new Zr(this,_0x4d1a9f);_0x473390['event']&&this['fire']('mousedown',_0x473390);}['_handleMov'+'e'](_0x1721b7){const _0x1628fd=new Zr(this,_0x1721b7);_0x1628fd['event']&&(this['fire']('mousemove',_0x1628fd),this['_lastX']=_0x1628fd['x'],this['_lastY']=_0x1628fd['y']);}['_handleWhe'+'el'](_0x3e2c7c){const _0x4f976a=new Zr(this,_0x3e2c7c);_0x4f976a['event']&&this['fire']('mousewheel',_0x4f976a);}['_getTarget'+'Coords'](_0x2bd407){const _0x4105bf=this['_target']['getBoundin'+'gClientRec'+'t'](),_0x35d769=Math['floor'](_0x4105bf['left']),_0x498121=Math['floor'](_0x4105bf['top']);return _0x2bd407['clientX']<_0x35d769||_0x2bd407['clientX']>=_0x35d769+this['_target']['clientWidt'+'h']||_0x2bd407['clientY']<_0x498121||_0x2bd407['clientY']>=_0x498121+this['_target']['clientHeig'+'ht']?null:{'x':_0x2bd407['clientX']-_0x35d769,'y':_0x2bd407['clientY']-_0x498121};}}h(kl,'EVENT_MOUS'+'EMOVE','mousemove'),h(kl,'EVENT_MOUS'+'EDOWN','mousedown'),h(kl,'EVENT_MOUS'+'EUP','mouseup'),h(kl,'EVENT_MOUS'+'EWHEEL','mousewheel');const Oe=class Oe{['get'](_0x45832d,_0x13b584,_0x30383b){typeof _0x13b584=='function'&&(_0x30383b=_0x13b584,_0x13b584={});const _0x1e45ce=this['request']('GET',_0x45832d,_0x13b584,_0x30383b),{progress:_0x159c88}=_0x13b584;if(_0x159c88){const _0x1e5bbe=_0x562a95=>{_0x562a95['lengthComp'+'utable']&&_0x159c88['fire']('progress',_0x562a95['loaded'],_0x562a95['total']);},_0x526d8c=_0x1e3806=>{_0x1e5bbe(_0x1e3806),_0x1e45ce['removeEven'+'tListener']('loadstart',_0x1e5bbe),_0x1e45ce['removeEven'+'tListener']('progress',_0x1e5bbe),_0x1e45ce['removeEven'+'tListener']('loadend',_0x526d8c);};_0x1e45ce['addEventLi'+'stener']('loadstart',_0x1e5bbe),_0x1e45ce['addEventLi'+'stener']('progress',_0x1e5bbe),_0x1e45ce['addEventLi'+'stener']('loadend',_0x526d8c);}return _0x1e45ce;}['post'](_0x4eb2fb,_0x3f7164,_0x3265ef,_0x52fc91){return typeof _0x3265ef=='function'&&(_0x52fc91=_0x3265ef,_0x3265ef={}),_0x3265ef['postdata']=_0x3f7164,this['request']('POST',_0x4eb2fb,_0x3265ef,_0x52fc91);}['put'](_0x550493,_0x5d760f,_0x34f378,_0x1660d9){return typeof _0x34f378=='function'&&(_0x1660d9=_0x34f378,_0x34f378={}),_0x34f378['postdata']=_0x5d760f,this['request']('PUT',_0x550493,_0x34f378,_0x1660d9);}['del'](_0x41aaa9,_0x5ea957,_0x3782b7){return typeof _0x5ea957=='function'&&(_0x3782b7=_0x5ea957,_0x5ea957={}),this['request']('DELETE',_0x41aaa9,_0x5ea957,_0x3782b7);}['request'](_0x4af44e,_0x259dbf,_0x5574bf,_0x4262c6){let _0x3507c5,_0x57d4f7,_0x3c1c1d,_0x236455=!(0x1*0xd8a+-0x15ab+0x2*0x411);if(typeof _0x5574bf=='function'&&(_0x4262c6=_0x5574bf,_0x5574bf={}),_0x5574bf['retry']&&(_0x5574bf=Object['assign']({'retries':0x0,'maxRetries':0x5},_0x5574bf)),_0x5574bf['callback']=_0x4262c6,_0x5574bf['async']==null&&(_0x5574bf['async']=!(-0x6*-0x1e6+-0xa34+-0x130)),_0x5574bf['headers']==null&&(_0x5574bf['headers']={}),_0x5574bf['postdata']!=null){if(_0x5574bf['postdata']instanceof Document)_0x3c1c1d=_0x5574bf['postdata'];else{if(_0x5574bf['postdata']instanceof FormData)_0x3c1c1d=_0x5574bf['postdata'];else{if(_0x5574bf['postdata']instanceof Object){let _0x4dd347=_0x5574bf['headers']['Content-Ty'+'pe'];switch(_0x4dd347===void(0x1db2+0x35*-0x45+-0x107*0xf)&&(_0x5574bf['headers']['Content-Ty'+'pe']=Oe['ContentTyp'+'e']['FORM_URLEN'+'CODED'],_0x4dd347=_0x5574bf['headers']['Content-Ty'+'pe']),_0x4dd347){case Oe['ContentTyp'+'e']['FORM_URLEN'+'CODED']:{_0x3c1c1d='';let _0x2ed21f=!(-0x2428+0x7f5+0x1c33);for(const _0x351cac in _0x5574bf['postdata'])if(_0x5574bf['postdata']['hasOwnProp'+'erty'](_0x351cac)){_0x2ed21f?_0x2ed21f=!(0xb1+0x19e*-0x3+0x42a):_0x3c1c1d+='&';const _0x15ccf2=encodeURIComponent(_0x351cac),_0x385b13=encodeURIComponent(_0x5574bf['postdata'][_0x351cac]);_0x3c1c1d+=_0x15ccf2+'='+_0x385b13;}break;}default:case Oe['ContentTyp'+'e']['JSON']:_0x4dd347==null&&(_0x5574bf['headers']['Content-Ty'+'pe']=Oe['ContentTyp'+'e']['JSON']),_0x3c1c1d=JSON['stringify'](_0x5574bf['postdata']);break;}}else _0x3c1c1d=_0x5574bf['postdata'];}}}if(_0x5574bf['cache']===!(-0x24b3+0x13*-0x97+0x2fe9)){const _0x3c66f9=de();_0x3507c5=new dd(_0x259dbf),_0x3507c5['query']?_0x3507c5['query']=_0x3507c5['query']+'&ts='+_0x3c66f9:_0x3507c5['query']='ts='+_0x3c66f9,_0x259dbf=_0x3507c5['toString']();}_0x5574bf['query']&&(_0x3507c5=new dd(_0x259dbf),_0x57d4f7=kc(_0x3507c5['getQuery'](),_0x5574bf['query']),_0x3507c5['setQuery'](_0x57d4f7),_0x259dbf=_0x3507c5['toString']());const _0x3fe9f1=new XMLHttpRequest();_0x3fe9f1['open'](_0x4af44e,_0x259dbf,_0x5574bf['async']),_0x3fe9f1['withCreden'+'tials']=_0x5574bf['withCreden'+'tials']!==void(0x1a*0x3+-0x3*0x6a1+0x1395)?_0x5574bf['withCreden'+'tials']:!(0x1723+-0x251*-0x6+-0xc*0x316),_0x3fe9f1['responseTy'+'pe']=_0x5574bf['responseTy'+'pe']||this['_guessResp'+'onseType'](_0x259dbf);for(const _0x8a6bbe in _0x5574bf['headers'])_0x5574bf['headers']['hasOwnProp'+'erty'](_0x8a6bbe)&&_0x3fe9f1['setRequest'+'Header'](_0x8a6bbe,_0x5574bf['headers'][_0x8a6bbe]);_0x3fe9f1['onreadysta'+'techange']=()=>{this['_onReadySt'+'ateChange'](_0x4af44e,_0x259dbf,_0x5574bf,_0x3fe9f1);},_0x3fe9f1['onerror']=()=>{this['_onError'](_0x4af44e,_0x259dbf,_0x5574bf,_0x3fe9f1),_0x236455=!(-0x7dc+-0x3b*0x3a+-0x1*-0x153a);};try{_0x3fe9f1['send'](_0x3c1c1d);}catch(_0x5ab2fe){_0x236455||_0x5574bf['error'](_0x3fe9f1['status'],_0x3fe9f1,_0x5ab2fe);}return _0x3fe9f1;}['_guessResp'+'onseType'](_0x159d39){const _0x1829e4=new dd(_0x159d39),_0x5434cf=xe['getExtensi'+'on'](_0x1829e4['path'])['toLowerCas'+'e']();return Oe['binaryExte'+'nsions']['indexOf'](_0x5434cf)>=0xb88+0x3aa+-0xf32?Oe['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x5434cf==='.json'?Oe['ResponseTy'+'pe']['JSON']:_0x5434cf==='.xml'?Oe['ResponseTy'+'pe']['DOCUMENT']:Oe['ResponseTy'+'pe']['TEXT'];}['_isBinaryC'+'ontentType'](_0x5c1b08){return[Oe['ContentTyp'+'e']['BASIS'],Oe['ContentTyp'+'e']['BIN'],Oe['ContentTyp'+'e']['DDS'],Oe['ContentTyp'+'e']['GLB'],Oe['ContentTyp'+'e']['MP3'],Oe['ContentTyp'+'e']['MP4'],Oe['ContentTyp'+'e']['OGG'],Oe['ContentTyp'+'e']['OPUS'],Oe['ContentTyp'+'e']['WAV']]['indexOf'](_0x5c1b08)>=-0x16e2+-0x716+-0x38*-0x89;}['_isBinaryR'+'esponseTyp'+'e'](_0x30ab80){return _0x30ab80===Oe['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']||_0x30ab80===Oe['ResponseTy'+'pe']['BLOB']||_0x30ab80===Oe['ResponseTy'+'pe']['JSON'];}['_onReadySt'+'ateChange'](_0x15f40d,_0x4f6a78,_0x3d4b8e,_0x18bb56){if(_0x18bb56['readyState']===0x1ca9*-0x1+-0xb2*-0x31+-0x1*0x565)switch(_0x18bb56['status']){case-0x4*0x5f2+0xbff*0x1+0xbc9:{_0x18bb56['responseUR'+'L']&&_0x18bb56['responseUR'+'L']['startsWith']('file:///')?this['_onSuccess'](_0x15f40d,_0x4f6a78,_0x3d4b8e,_0x18bb56):this['_onError'](_0x15f40d,_0x4f6a78,_0x3d4b8e,_0x18bb56);break;}case-0x1703+0xb7e*-0x2+-0x2ec7*-0x1:case 0xf72*0x1+-0x257d+0x1e7*0xc:case 0x4f*0x3e+0x2281*0x1+0x19*-0x21d:case-0x645+-0x11*-0x1b1+-0x154c:{this['_onSuccess'](_0x15f40d,_0x4f6a78,_0x3d4b8e,_0x18bb56);break;}default:{this['_onError'](_0x15f40d,_0x4f6a78,_0x3d4b8e,_0x18bb56);break;}}}['_onSuccess'](_0x5953dc,_0x47adfe,_0x342289,_0xc0d184){let _0x4855e5,_0x1f294b;const _0x4d9b40=_0xc0d184['getRespons'+'eHeader']('Content-Ty'+'pe');_0x4d9b40&&(_0x1f294b=_0x4d9b40['split'](';')[-0xef8+0xd4*-0xb+-0x1*-0x1814]['trim']());try{this['_isBinaryC'+'ontentType'](_0x1f294b)||this['_isBinaryR'+'esponseTyp'+'e'](_0xc0d184['responseTy'+'pe'])?_0x4855e5=_0xc0d184['response']:_0x1f294b===Oe['ContentTyp'+'e']['JSON']||_0x47adfe['split']('?')[0x2676+0x1*-0x2c+-0x264a]['endsWith']('.json')?_0x4855e5=JSON['parse'](_0xc0d184['responseTe'+'xt']):_0xc0d184['responseTy'+'pe']===Oe['ResponseTy'+'pe']['DOCUMENT']||_0x1f294b===Oe['ContentTyp'+'e']['XML']?_0x4855e5=_0xc0d184['responseXM'+'L']:_0x4855e5=_0xc0d184['responseTe'+'xt'],_0x342289['callback'](null,_0x4855e5);}catch(_0x572ab7){_0x342289['callback'](_0x572ab7);}}['_onError'](_0x462de7,_0xf86407,_0x18f12d,_0x57e831){if(!_0x18f12d['retrying']){if(_0x18f12d['retry']&&_0x18f12d['retries']<_0x18f12d['maxRetries']){_0x18f12d['retries']++,_0x18f12d['retrying']=!(-0x1e69+0xe43*-0x1+-0x3*-0xee4);const _0x48a35e=Y['clamp'](Math['pow'](-0x4bd*-0x2+-0x3ec+-0x58c,_0x18f12d['retries'])*Oe['retryDelay'],0x9*0x3fd+-0x1*0x1ea+-0x21fb,_0x18f12d['maxRetryDe'+'lay']||-0x18dd+0x1ce1+-0xc*-0x14b);console['log'](_0x462de7+':\x20'+_0xf86407+'\x20-\x20Error\x20'+_0x57e831['status']+('.\x20Retrying'+'\x20in\x20')+_0x48a35e+'\x20ms'),setTimeout(()=>{_0x18f12d['retrying']=!(-0x1f88+-0xa25+0xc2*0x37),this['request'](_0x462de7,_0xf86407,_0x18f12d,_0x18f12d['callback']);},_0x48a35e);}else _0x18f12d['callback'](_0x57e831['status']===-0x1*-0x1cb8+0x3*-0xb89+0x5e3*0x1?'Network\x20er'+'ror':_0x57e831['status'],null);}}};h(Oe,'ContentTyp'+'e',{'AAC':'audio/aac','BASIS':'image/basi'+'s','BIN':'applicatio'+'n/octet-st'+'ream','DDS':'image/dds','FORM_URLENCODED':'applicatio'+'n/x-www-fo'+'rm-urlenco'+'ded','GIF':'image/gif','GLB':'model/gltf'+'-binary','JPEG':'image/jpeg','JSON':'applicatio'+'n/json','MP3':'audio/mpeg','MP4':'audio/mp4','OGG':'audio/ogg','OPUS':'audio/ogg;'+'\x20codecs=\x22o'+'pus\x22','PNG':'image/png','TEXT':'text/plain','WAV':'audio/x-wa'+'v','XML':'applicatio'+'n/xml'}),h(Oe,'ResponseTy'+'pe',{'TEXT':'text','ARRAY_BUFFER':'arraybuffe'+'r','BLOB':'blob','DOCUMENT':'document','JSON':'json'}),h(Oe,'binaryExte'+'nsions',['.model','.wav','.ogg','.mp3','.mp4','.m4a','.aac','.dds','.basis','.glb','.opus']),h(Oe,'retryDelay',0xd55+-0x6d4+-0x61d);let Is=Oe;const ot=new Is(),pp='linear',HT='inverse',WT='exponentia'+'l';class $T{constructor(_0x451986){h(this,'_manager'),h(this,'position',new D()),h(this,'orientatio'+'n',new te()),this['_manager']=_0x451986;}['getPositio'+'n'](){return this['position'];}['setPositio'+'n'](_0x13e71c){this['position']['copy'](_0x13e71c);const _0x85897a=this['listener'];_0x85897a&&('positionX'in _0x85897a?(_0x85897a['positionX']['value']=_0x13e71c['x'],_0x85897a['positionY']['value']=_0x13e71c['y'],_0x85897a['positionZ']['value']=_0x13e71c['z']):_0x85897a['setPositio'+'n']&&_0x85897a['setPositio'+'n'](_0x13e71c['x'],_0x13e71c['y'],_0x13e71c['z']));}['setOrienta'+'tion'](_0x107440){this['orientatio'+'n']['copy'](_0x107440);const _0x3bf554=this['listener'];if(_0x3bf554){const _0x23b83a=_0x107440['data'];'forwardX'in _0x3bf554?(_0x3bf554['forwardX']['value']=-_0x23b83a[0x2*-0xc65+0x1041*0x2+-0x7b0],_0x3bf554['forwardY']['value']=-_0x23b83a[0x6*0x22+0xabb+-0xb7e],_0x3bf554['forwardZ']['value']=-_0x23b83a[-0x5*0x2fe+0x18ba+-0x9ba],_0x3bf554['upX']['value']=_0x23b83a[-0x48d*-0x1+0x42*-0x4a+0xe8b],_0x3bf554['upY']['value']=_0x23b83a[0x11ec*0x2+-0x123*0x6+0x87*-0x37],_0x3bf554['upZ']['value']=_0x23b83a[-0x5e2+-0x20a7+0x268f]):_0x3bf554['setOrienta'+'tion']&&_0x3bf554['setOrienta'+'tion'](-_0x23b83a[0xc63+0x25*-0xd3+0x1224],-_0x23b83a[-0x17b+0x1398+0x4*-0x485],-_0x23b83a[0x12*-0xad+-0x1279*0x1+0x1ead],_0x23b83a[0x235*-0xf+0x2d*0x65+0x232*0x7],_0x23b83a[0x2*-0x1091+0x1*0x529+0x1bfe],_0x23b83a[0x10d9+-0x6*0x473+0x7*0x169]);}}['getOrienta'+'tion'](){return this['orientatio'+'n'];}get['listener'](){const _0x79be78=this['_manager']['context'];return _0x79be78?_0x79be78['listener']:null;}}const Ul='running',km=['click','touchstart','mousedown'];class XT extends me{constructor(){super(),this['_context']=null,this['AudioConte'+'xt']=typeof AudioContext<'u'&&AudioContext||typeof webkitAudioContext<'u'&&webkitAudioContext,this['AudioConte'+'xt']||w['warn']('No\x20support'+'\x20for\x203D\x20au'+'dio\x20found'),this['_unlockHan'+'dlerFunc']=this['_unlockHan'+'dler']['bind'](this),this['_userSuspe'+'nded']=!(-0x114a*0x1+0xee5+0x266),this['listener']=new $T(this),this['_volume']=-0x1*-0xafd+-0x2*-0x1093+-0x2c22*0x1;}set['volume'](_0x2a1c20){_0x2a1c20=Y['clamp'](_0x2a1c20,0x268e*0x1+0x1d05+-0x4393,0x2*0xf29+0x1676+-0x34c7),this['_volume']=_0x2a1c20,this['fire']('volumechan'+'ge',_0x2a1c20);}get['volume'](){return this['_volume'];}get['suspended'](){return this['_userSuspe'+'nded'];}get['context'](){return!this['_context']&&this['AudioConte'+'xt']&&(this['_context']=new this['AudioConte'+'xt'](),this['_context']['state']!==Ul&&this['_registerU'+'nlockListe'+'ners']()),this['_context'];}['suspend'](){this['_userSuspe'+'nded']||(this['_userSuspe'+'nded']=!(0x22cc+-0x5e9*-0x1+-0x28b5),this['_context']&&this['_context']['state']===Ul&&this['_suspend']());}['resume'](){this['_userSuspe'+'nded']&&(this['_userSuspe'+'nded']=!(0x24f*-0x9+0x295*-0x7+0x26db),this['_context']&&this['_context']['state']!==Ul&&this['_resume']());}['destroy'](){var _0x10df40;this['fire']('destroy'),this['_context']&&(this['_removeUnl'+'ockListene'+'rs'](),(_0x10df40=this['_context'])==null||_0x10df40['close'](),this['_context']=null);}['_resume'](){this['_context']['resume']()['then'](()=>{const _0x5858c5=this['_context']['createBuff'+'erSource']();_0x5858c5['buffer']=this['_context']['createBuff'+'er'](0x3*-0x2b3+-0x1*0x1763+0x1f7d,0xa*-0x1e7+-0x4ff+-0x2*-0xc03,this['_context']['sampleRate']),_0x5858c5['connect'](this['_context']['destinatio'+'n']),_0x5858c5['start'](0x1191+0x80b*0x2+-0x21a7),_0x5858c5['onended']=_0x2823af=>{_0x5858c5['disconnect'](-0x854+0x17f+0x6d5),this['fire']('resume');};},_0x5bce8d=>{w['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20it\x20'+'was\x20reject'+'ed\x20'+_0x5bce8d);})['catch'](_0x184f7b=>{w['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20thr'+'ew\x20an\x20exce'+'ption\x20'+_0x184f7b);});}['_suspend'](){this['_context']['suspend']()['then'](()=>{this['fire']('suspend');},_0x192c1c=>{w['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20i'+'t\x20was\x20reje'+'cted\x20'+_0x192c1c);})['catch'](_0x4ae811=>{w['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20t'+'hrew\x20an\x20ex'+'ception\x20'+_0x4ae811);});}['_unlockHan'+'dler'](){this['_removeUnl'+'ockListene'+'rs'](),!this['_userSuspe'+'nded']&&this['_context']['state']!==Ul&&this['_resume']();}['_registerU'+'nlockListe'+'ners'](){km['forEach'](_0x2f9b3b=>{window['addEventLi'+'stener'](_0x2f9b3b,this['_unlockHan'+'dlerFunc'],!(0x87*-0x1+-0xf1*-0x16+-0x142e));});}['_removeUnl'+'ockListene'+'rs'](){km['forEach'](_0x1cb209=>{window['removeEven'+'tListener'](_0x1cb209,this['_unlockHan'+'dlerFunc'],!(0x3e*-0x4c+0x48*0x79+-0xf9f));});}}class qT{constructor(_0x268e76){h(this,'audio'),h(this,'buffer'),_0x268e76 instanceof Audio?this['audio']=_0x268e76:this['buffer']=_0x268e76;}get['duration'](){let _0x3daa2d=-0x20f4+0x181c+0x8*0x11b;return this['buffer']?_0x3daa2d=this['buffer']['duration']:this['audio']&&(_0x3daa2d=this['audio']['duration']),_0x3daa2d||-0x187c*0x1+0x1135*0x2+-0x9ee;}}function gl(){return typeof AudioContext<'u'||typeof webkitAudioContext<'u';}const Zt=0x314*-0x7+-0xa7*0x1+-0x1633*-0x1,an=0x1ecd+-0x1*-0x2033+0x3eff*-0x1,Gs=0x3*-0x3c7+-0xb*0x6f+-0x2*-0x80e;function es(_0x28af71,_0x4aedee){return _0x28af71%_0x4aedee||0x19c0+-0x24e6+-0x1*-0xb26;}class As extends me{constructor(_0xc0056f,_0x181e50,_0x46034e){super(),h(this,'source',null),(this['_manager']=_0xc0056f,this['_volume']=_0x46034e['volume']!==void(0x7*-0x1f3+-0x1*0xb57+0x854*0x3)?Y['clamp'](Number(_0x46034e['volume'])||-0x1981+0x8d9+0x10a8,0xd9*-0x2+0xd4*0xc+-0x5*0x1a6,0x1973+0x172*-0x5+-0x1238):-0x3*-0xb1b+-0x190d+-0x843,this['_pitch']=_0x46034e['pitch']!==void(-0x48e*0x5+0x818+0xeae)?Math['max'](-0x11*-0xae+0x13*-0x101+0x785+0.01,Number(_0x46034e['pitch'])||0x1f3+0x136*0xd+-0x11b1):0x13e3+-0x1737*0x1+-0x355*-0x1,this['_loop']=!!(_0x46034e['loop']!==void(-0x1*0x2135+-0x493*0x5+-0x94*-0x61)&&_0x46034e['loop']),this['_sound']=_0x181e50,this['_state']=Gs,this['_suspended']=!(-0x9ed*0x1+0x62e+-0xa*-0x60),this['_suspendEn'+'dEvent']=0xb5+0x1732*0x1+-0x17e7,this['_suspendIn'+'stanceEven'+'ts']=!(0x1*0x2409+-0x1019+-0x13ef),this['_playWhenL'+'oaded']=!(-0xc5d+-0x194e+0x1*0x25ab),this['_startTime']=Math['max'](0x211e+-0x7e+0x24*-0xe8,Number(_0x46034e['startTime'])||0x22a+-0x11a6+0x1*0xf7c),this['_duration']=Math['max'](0x112f+0x2356*0x1+-0x3485,Number(_0x46034e['duration'])||-0x106*0x1b+0x1*-0x228e+0x3e30),this['_startOffs'+'et']=null,this['_onPlayCal'+'lback']=_0x46034e['onPlay'],this['_onPauseCa'+'llback']=_0x46034e['onPause'],this['_onResumeC'+'allback']=_0x46034e['onResume'],this['_onStopCal'+'lback']=_0x46034e['onStop'],this['_onEndCall'+'back']=_0x46034e['onEnd'],gl()?(this['_startedAt']=-0x2403+-0x1*-0xc51+-0x7e6*-0x3,this['_currentTi'+'me']=0x1021*0x2+-0x467+-0x1bdb*0x1,this['_currentOf'+'fset']=0xa5b+-0x1*0x1b64+0x1109,this['_inputNode']=null,this['_connector'+'Node']=null,this['_firstNode']=null,this['_lastNode']=null,this['_waitingCo'+'ntextSuspe'+'nsion']=!(0x8d5+0xea*0x22+0x9fa*-0x4),this['_initializ'+'eNodes'](),this['_endedHand'+'ler']=this['_onEnded']['bind'](this)):(this['_isReady']=!(-0x1f4b+-0x554+0x24a0),this['_loadedMet'+'adataHandl'+'er']=this['_onLoadedM'+'etadata']['bind'](this),this['_timeUpdat'+'eHandler']=this['_onTimeUpd'+'ate']['bind'](this),this['_endedHand'+'ler']=this['_onEnded']['bind'](this),this['_createSou'+'rce']()));}set['currentTim'+'e'](_0x4af511){if(!(_0x4af511<-0x2*-0x57+0xcc0+-0x47a*0x3)){if(this['_state']===Zt){const _0x3c2b5d=this['_suspendIn'+'stanceEven'+'ts'];this['_suspendIn'+'stanceEven'+'ts']=!(-0xc59*0x3+-0x257*-0x7+0x14aa),this['stop'](),this['_startOffs'+'et']=_0x4af511,this['play'](),this['_suspendIn'+'stanceEven'+'ts']=_0x3c2b5d;}else this['_startOffs'+'et']=_0x4af511,this['_currentTi'+'me']=_0x4af511;}}get['currentTim'+'e'](){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===an?this['_currentTi'+'me']:this['_state']===Gs||!this['source']?-0x1542+-0x25c8+0x3b0a:(this['_updateCur'+'rentTime'](),this['_currentTi'+'me']);}set['duration'](_0x288933){this['_duration']=Math['max'](0x416*0x8+0x7dd*-0x3+0x11*-0x89,Number(_0x288933)||-0x221f+0x2286+0x67*-0x1);const _0x12fc3d=this['_state']===Zt;this['stop'](),_0x12fc3d&&this['play']();}get['duration'](){return this['_sound']?this['_duration']?es(this['_duration'],this['_sound']['duration']):this['_sound']['duration']:-0x2252+-0xd0e+-0x10*-0x2f6;}get['isPaused'](){return this['_state']===an;}get['isPlaying'](){return this['_state']===Zt;}get['isStopped'](){return this['_state']===Gs;}get['isSuspende'+'d'](){return this['_suspended'];}set['loop'](_0x1c1d26){this['_loop']=!!_0x1c1d26,this['source']&&(this['source']['loop']=this['_loop']);}get['loop'](){return this['_loop'];}set['pitch'](_0x1f8101){this['_currentOf'+'fset']=this['currentTim'+'e'],this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_pitch']=Math['max'](Number(_0x1f8101)||-0x3*-0x4a1+-0x1*0x11f3+0x410,-0x9b4+-0x5*-0x47+0x851+0.01),this['source']&&(this['source']['playbackRa'+'te']['value']=this['_pitch']);}get['pitch'](){return this['_pitch'];}set['sound'](_0x64ebdf){this['_sound']=_0x64ebdf,this['_state']!==Gs?this['stop']():this['_createSou'+'rce']();}get['sound'](){return this['_sound'];}set['startTime'](_0x311689){this['_startTime']=Math['max'](0x21b*0x2+0x1e4e+0x5e*-0x5e,Number(_0x311689)||0x11*0xcd+-0x1e11*0x1+0x1074);const _0x1dcb3d=this['_state']===Zt;this['stop'](),_0x1dcb3d&&this['play']();}get['startTime'](){return this['_startTime'];}set['volume'](_0x375dea){_0x375dea=Y['clamp'](_0x375dea,0x1b98+0x106c*-0x1+-0xb2c,-0x2537+-0xa*-0x3d7+-0x97*0x2),this['_volume']=_0x375dea,this['gain']&&(this['gain']['gain']['value']=_0x375dea*this['_manager']['volume']);}get['volume'](){return this['_volume'];}['_onPlay'](){this['fire']('play'),this['_onPlayCal'+'lback']&&this['_onPlayCal'+'lback'](this);}['_onPause'](){this['fire']('pause'),this['_onPauseCa'+'llback']&&this['_onPauseCa'+'llback'](this);}['_onResume'](){this['fire']('resume'),this['_onResumeC'+'allback']&&this['_onResumeC'+'allback'](this);}['_onStop'](){this['fire']('stop'),this['_onStopCal'+'lback']&&this['_onStopCal'+'lback'](this);}['_onEnded'](){if(this['_suspendEn'+'dEvent']>0x1*-0x22+-0x3ad+0x3cf){this['_suspendEn'+'dEvent']--;return;}this['fire']('end'),this['_onEndCall'+'back']&&this['_onEndCall'+'back'](this),this['stop']();}['_onManager'+'VolumeChan'+'ge'](){this['volume']=this['_volume'];}['_onManager'+'Suspend'](){this['_state']===Zt&&!this['_suspended']&&(this['_suspended']=!(0x1be+-0x289+0xcb),this['pause']());}['_onManager'+'Resume'](){this['_suspended']&&(this['_suspended']=!(-0x1a1*-0x9+0x33*0x33+-0x1*0x18d1),this['resume']());}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['_inputNode']=this['gain'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}['play'](){return this['_state']!==Gs&&this['stop'](),this['_state']=Zt,this['_playWhenL'+'oaded']=!(0x1*-0x19e5+0x193c+0xaa),this['_waitingCo'+'ntextSuspe'+'nsion']?!(0x5*-0x6ca+0x1035+0x11be):this['_manager']['suspended']?(this['_manager']['once']('resume',this['_playAudio'+'Immediate'],this),this['_waitingCo'+'ntextSuspe'+'nsion']=!(0x20da+0x267f+-0x4759),!(-0x1641+0x16ba+-0x3*0x28)):(this['_playAudio'+'Immediate'](),!(-0x5ad*0x1+-0x35*-0x93+-0x18c2));}['_playAudio'+'Immediate'](){if(this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0xdca+0x203a+-0x79*0x27),this['_state']!==Zt)return;this['source']||this['_createSou'+'rce']();let _0x46d54a=es(this['_startOffs'+'et'],this['duration']);_0x46d54a=es(this['_startTime']+_0x46d54a,this['_sound']['duration']),this['_startOffs'+'et']=null,this['_duration']?this['source']['start'](0x243b+-0x1618*0x1+-0xe23,_0x46d54a,this['_duration']):this['source']['start'](-0x7e*-0x12+-0x1ab0+-0x8ea*-0x2,_0x46d54a),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentTi'+'me']=0x17f*0x5+-0x1774+0x3*0x553,this['_currentOf'+'fset']=_0x46d54a,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay']();}['pause'](){return this['_playWhenL'+'oaded']=!(0x79*-0x2+0x81*0x13+-0x8a0),this['_state']!==Zt?!(0x16e*-0x2+0xc3+0x21a):(this['_state']=an,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_updateCur'+'rentTime'](),this['_suspendEn'+'dEvent']++,this['source']['stop'](0x1ae4*-0x1+0x3de+-0xb83*-0x2),this['source']=null,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause']()),!(-0x11e5*-0x1+0x1e*0xda+-0x3*0xe7b));}['resume'](){if(this['_state']!==an)return!(-0x1*-0x609+-0xda5+-0x79d*-0x1);let _0x4fde05=this['currentTim'+'e'];return this['_state']=Zt,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['source']||this['_createSou'+'rce'](),this['_startOffs'+'et']!==null&&(_0x4fde05=es(this['_startOffs'+'et'],this['duration']),_0x4fde05=es(this['_startTime']+_0x4fde05,this['_sound']['duration']),this['_startOffs'+'et']=null),this['_duration']?this['source']['start'](-0x123e*-0x2+-0x8d3+-0x1ba9,_0x4fde05,this['_duration']):this['source']['start'](0x1615*-0x1+-0xc*0x14b+-0x23*-0x113,_0x4fde05),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentOf'+'fset']=_0x4fde05,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_playWhenL'+'oaded']=!(-0x4a*-0x62+-0x7df*0x2+0xc95*-0x1),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(-0x2070+0x26f+-0x1*-0x1e01);}['stop'](){if(this['_playWhenL'+'oaded']=!(0x1716+-0x63e+-0x1df*0x9),this['_state']===Gs)return!(-0x16d4+0x4*0xb5+0x1401);const _0x94e4c9=this['_state']===Zt;return this['_state']=Gs,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_startedAt']=0x2*0x1+0x2085+0xb*-0x2f5,this['_currentTi'+'me']=-0x14*0xea+-0x127c+0x24c4,this['_currentOf'+'fset']=-0x18ea+0x833*0x3+0x51,this['_startOffs'+'et']=null,this['_suspendEn'+'dEvent']++,_0x94e4c9&&this['source']&&this['source']['stop'](0xd7f*-0x2+0x1fe6+-0x4e8),this['source']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop']()),!(0x1bf7*0x1+0x614+-0x15*0x19f);}['setExterna'+'lNodes'](_0x18897c,_0x5e42cd){if(!_0x18897c){console['error']('The\x20firstN'+'ode\x20must\x20b'+'e\x20a\x20valid\x20'+'Audio\x20Node');return;}_0x5e42cd||(_0x5e42cd=_0x18897c);const _0x8984e2=this['_manager']['context']['destinatio'+'n'];this['_firstNode']!==_0x18897c&&(this['_firstNode']?this['_connector'+'Node']['disconnect'](this['_firstNode']):this['_connector'+'Node']['disconnect'](_0x8984e2),this['_firstNode']=_0x18897c,this['_connector'+'Node']['connect'](_0x18897c)),this['_lastNode']!==_0x5e42cd&&(this['_lastNode']&&this['_lastNode']['disconnect'](_0x8984e2),this['_lastNode']=_0x5e42cd,this['_lastNode']['connect'](_0x8984e2));}['clearExter'+'nalNodes'](){const _0x516449=this['_manager']['context']['destinatio'+'n'];this['_firstNode']&&(this['_connector'+'Node']['disconnect'](this['_firstNode']),this['_firstNode']=null),this['_lastNode']&&(this['_lastNode']['disconnect'](_0x516449),this['_lastNode']=null),this['_connector'+'Node']['connect'](_0x516449);}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_createSou'+'rce'](){if(!this['_sound'])return null;const _0x8c2af0=this['_manager']['context'];return this['_sound']['buffer']&&(this['source']=_0x8c2af0['createBuff'+'erSource'](),this['source']['buffer']=this['_sound']['buffer'],this['source']['connect'](this['_inputNode']),this['source']['onended']=this['_endedHand'+'ler'],this['source']['loopStart']=es(this['_startTime'],this['source']['buffer']['duration']),this['_duration']&&(this['source']['loopEnd']=Math['max'](this['source']['loopStart'],es(this['_startTime']+this['_duration'],this['source']['buffer']['duration'])))),this['source'];}['_updateCur'+'rentTime'](){this['_currentTi'+'me']=es((this['_manager']['context']['currentTim'+'e']-this['_startedAt'])*this['_pitch']+this['_currentOf'+'fset'],this['duration']);}['_onManager'+'Destroy'](){this['source']&&this['_state']===Zt&&(this['source']['stop'](0x7e1*0x3+-0x16*-0x162+-0x7b9*0x7),this['source']=null);}}h(As,'EVENT_PLAY','play'),h(As,'EVENT_PAUS'+'E','pause'),h(As,'EVENT_RESU'+'ME','resume'),h(As,'EVENT_STOP','stop'),h(As,'EVENT_END','end'),gl()||(Object['assign'](As['prototype'],{'play':function(){return this['_state']!==Gs&&this['stop'](),!this['source']&&!this['_createSou'+'rce']()?!(0xcad+-0x18a4+-0x1*-0xbf8):(this['volume']=this['_volume'],this['pitch']=this['_pitch'],this['loop']=this['_loop'],this['source']['play'](),this['_state']=Zt,this['_playWhenL'+'oaded']=!(0x35f+0x92e+-0xc8c),this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_manager']['suspended']&&this['_onManager'+'Suspend'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay'](),!(0x2579+0x2603+-0x12df*0x4));},'pause':function(){return!this['source']||this['_state']!==Zt?!(0x2c*-0xe3+0x1eaf+0x856):(this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(-0xb*0x244+0x2*-0xdb+0x1aa3),this['_state']=an,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause'](),!(-0x2510+-0x1da0+0x42b0));},'resume':function(){return!this['source']||this['_state']!==an?!(-0x1*0xf7f+-0x2*-0x4d4+0x5d8):(this['_state']=Zt,this['_playWhenL'+'oaded']=!(0x1070+0x1*0x155e+-0x25cd),this['source']['paused']&&(this['source']['play'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(-0x77*0x3d+-0xc0*-0xb+0x141b));},'stop':function(){return!this['source']||this['_state']===Gs?!(-0x170*-0x17+-0x2*0x815+-0x10e5):(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(-0xf08+0x2*-0x61f+-0x1*-0x1b47),this['_state']=Gs,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop'](),!(-0x1050+-0x1431+0x7*0x537));},'setExternalNodes':function(){},'clearExternalNodes':function(){},'getExternalNodes':function(){return[null,null];},'_onLoadedMetadata':function(){this['source']['removeEven'+'tListener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['_isReady']=!(0x1*0x188d+0x1*-0xa06+0xe87*-0x1);let _0xa42a1e=es(this['_startOffs'+'et'],this['duration']);_0xa42a1e=es(this['_startTime']+_0xa42a1e,this['_sound']['duration']),this['_startOffs'+'et']=null,this['source']['currentTim'+'e']=_0xa42a1e;},'_createSource':function(){return this['_sound']&&this['_sound']['audio']&&(this['_isReady']=!(-0x1*0x2340+0x169a+0xca7),this['source']=this['_sound']['audio']['cloneNode'](!(0x1*0x109+0x1118*-0x1+0x100f)),this['source']['addEventLi'+'stener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['source']['addEventLi'+'stener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['onended']=this['_endedHand'+'ler']),this['source'];},'_onTimeUpdate':function(){this['_duration']&&this['source']['currentTim'+'e']>es(this['_startTime']+this['_duration'],this['source']['duration'])&&(this['loop']?this['source']['currentTim'+'e']=es(this['_startTime'],this['source']['duration']):(this['source']['removeEven'+'tListener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['pause'](),this['_onEnded']()));},'_onManagerDestroy':function(){this['source']&&this['source']['pause']();}}),Object['defineProp'+'erty'](As['prototype'],'volume',{'get':function(){return this['_volume'];},'set':function(_0x3ccc5a){_0x3ccc5a=Y['clamp'](_0x3ccc5a,-0x255c+0x13fc+0x20*0x8b,-0x2082+0x73c+0x1947),this['_volume']=_0x3ccc5a,this['source']&&(this['source']['volume']=_0x3ccc5a*this['_manager']['volume']);}}),Object['defineProp'+'erty'](As['prototype'],'pitch',{'get':function(){return this['_pitch'];},'set':function(_0x1f8eb0){this['_pitch']=Math['max'](Number(_0x1f8eb0)||0x183d+0x110f+0x1*-0x294c,-0xb23*0x1+-0x4*0x371+0x7d*0x33+0.01),this['source']&&(this['source']['playbackRa'+'te']=this['_pitch']);}}),Object['defineProp'+'erty'](As['prototype'],'sound',{'get':function(){return this['_sound'];},'set':function(_0x1923d4){this['stop'](),this['_sound']=_0x1923d4;}}),Object['defineProp'+'erty'](As['prototype'],'currentTim'+'e',{'get':function(){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===Gs||!this['source']?0xa29+0x22b+-0xc54:this['source']['currentTim'+'e']-this['_startTime'];},'set':function(_0x5e9edb){_0x5e9edb<-0x1*-0xefe+-0x125c+-0x35e*-0x1||(this['_startOffs'+'et']=_0x5e9edb,this['source']&&this['_isReady']&&(this['source']['currentTim'+'e']=es(this['_startTime']+es(_0x5e9edb,this['duration']),this['_sound']['duration']),this['_startOffs'+'et']=null));}}));const jT=-0x5b6+0xc9d*0x5+-0x124b*0x1;class Ya extends As{constructor(_0x3b4eaf,_0x22d00b,_0x516f92={}){super(_0x3b4eaf,_0x22d00b,_0x516f92),h(this,'_position',new D()),h(this,'_velocity',new D()),(_0x516f92['position']&&(this['position']=_0x516f92['position']),this['maxDistanc'+'e']=_0x516f92['maxDistanc'+'e']!==void(0x21dc+-0x1a81+-0x75b)?Number(_0x516f92['maxDistanc'+'e']):jT,this['refDistanc'+'e']=_0x516f92['refDistanc'+'e']!==void(-0x13a+-0x1*-0x190a+-0x18*0xfe)?Number(_0x516f92['refDistanc'+'e']):0x23e3+0x9f1*0x2+-0x37c4,this['rollOffFac'+'tor']=_0x516f92['rollOffFac'+'tor']!==void(-0x1fdb*-0x1+-0xc9*-0x1+-0x20a4)?Number(_0x516f92['rollOffFac'+'tor']):-0x5*0x55e+0x1c65+0xc7*-0x2,this['distanceMo'+'del']=_0x516f92['distanceMo'+'del']!==void(-0x2*-0x89c+0x36*-0x15+-0xcca)?_0x516f92['distanceMo'+'del']:pp);}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['panner']=this['_manager']['context']['createPann'+'er'](),this['panner']['connect'](this['gain']),this['_inputNode']=this['panner'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}set['position'](_0x5e1f6f){this['_position']['copy'](_0x5e1f6f);const _0x53ff08=this['panner'];'positionX'in _0x53ff08?(_0x53ff08['positionX']['value']=_0x5e1f6f['x'],_0x53ff08['positionY']['value']=_0x5e1f6f['y'],_0x53ff08['positionZ']['value']=_0x5e1f6f['z']):_0x53ff08['setPositio'+'n']&&_0x53ff08['setPositio'+'n'](_0x5e1f6f['x'],_0x5e1f6f['y'],_0x5e1f6f['z']);}get['position'](){return this['_position'];}set['velocity'](_0x4637b8){w['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity']['copy'](_0x4637b8);}get['velocity'](){return w['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity'];}set['maxDistanc'+'e'](_0x52533a){this['panner']['maxDistanc'+'e']=_0x52533a;}get['maxDistanc'+'e'](){return this['panner']['maxDistanc'+'e'];}set['refDistanc'+'e'](_0x23e0c1){this['panner']['refDistanc'+'e']=_0x23e0c1;}get['refDistanc'+'e'](){return this['panner']['refDistanc'+'e'];}set['rollOffFac'+'tor'](_0x1c873e){this['panner']['rolloffFac'+'tor']=_0x1c873e;}get['rollOffFac'+'tor'](){return this['panner']['rolloffFac'+'tor'];}set['distanceMo'+'del'](_0x3d78fe){this['panner']['distanceMo'+'del']=_0x3d78fe;}get['distanceMo'+'del'](){return this['panner']['distanceMo'+'del'];}}if(!gl()){let l=new D();const t=function(_0x385392,_0x5517c5,_0x575eb8,_0x151e6f,_0x49aaf7,_0x35bd1b){l=l['sub2'](_0x385392,_0x5517c5);const _0xe916fc=l['length']();if(_0xe916fc<_0x575eb8)return-0x1*-0xd0a+-0x2031+0x1328;if(_0xe916fc>_0x151e6f)return-0xcbe+-0x2*-0x1115+0x392*-0x6;let _0x12ca43=0x46*-0x86+-0x7ac+-0x10*-0x2c5;return _0x35bd1b===pp?_0x12ca43=-0x129*0xe+0x862+-0x1*-0x7dd-_0x49aaf7*(_0xe916fc-_0x575eb8)/(_0x151e6f-_0x575eb8):_0x35bd1b===HT?_0x12ca43=_0x575eb8/(_0x575eb8+_0x49aaf7*(_0xe916fc-_0x575eb8)):_0x35bd1b===WT&&(_0x12ca43=Math['pow'](_0xe916fc/_0x575eb8,-_0x49aaf7)),Y['clamp'](_0x12ca43,0x12d*0x11+0xaf2+-0x1*0x1eef,0x1e69+-0x1077+0x1*-0xdf1);};Object['defineProp'+'erty'](Ya['prototype'],'position',{'get':function(){return this['_position'];},'set':function(_0xfc90ce){if(this['_position']['copy'](_0xfc90ce),this['source']){const _0x5507e9=this['_manager']['listener']['getPositio'+'n'](),_0x113fa4=t(_0x5507e9,this['_position'],this['refDistanc'+'e'],this['maxDistanc'+'e'],this['rollOffFac'+'tor'],this['distanceMo'+'del']),_0x543003=this['volume'];this['source']['volume']=_0x543003*_0x113fa4*this['_manager']['volume'];}}}),Object['defineProp'+'erty'](Ya['prototype'],'maxDistanc'+'e',{'get':function(){return this['_maxDistan'+'ce'];},'set':function(_0x3de2e8){this['_maxDistan'+'ce']=_0x3de2e8;}}),Object['defineProp'+'erty'](Ya['prototype'],'refDistanc'+'e',{'get':function(){return this['_refDistan'+'ce'];},'set':function(_0x4cfdc6){this['_refDistan'+'ce']=_0x4cfdc6;}}),Object['defineProp'+'erty'](Ya['prototype'],'rollOffFac'+'tor',{'get':function(){return this['_rollOffFa'+'ctor'];},'set':function(_0x3549e3){this['_rollOffFa'+'ctor']=_0x3549e3;}}),Object['defineProp'+'erty'](Ya['prototype'],'distanceMo'+'del',{'get':function(){return this['_distanceM'+'odel'];},'set':function(_0x3c90bb){this['_distanceM'+'odel']=_0x3c90bb;}});}const mp=0x3ff+-0x10d1+-0x6*-0x223,_p=0x2d*0x17+-0x2*0xb1e+0x1232,Zs=-0x1629+0x526+0x1105,Cs=-0x143e*-0x1+0xb85+-0x1fc0*0x1,Fn=0x4d*-0x35+-0x1*0x25ac+0x35a1,gp=0xaed*-0x3+-0x14b8+0x3584,sd=0x1ff9+-0x16b0+-0x943,Sp=-0x1992+-0x9a5*0x3+0x6d1*0x8,yp=-0x90f+0x9e9*0x1+-0xd2,vp=0x6bf+0x354*0x4+-0xe9*0x16,xp=0x4*0x2fc+0x2433*0x1+-0x3019,uy={[mp]:'SUBTRACTIV'+'E',[_p]:'ADDITIVE',[Zs]:'NORMAL',[Cs]:'NONE',[Fn]:'PREMULTIPL'+'IED',[gp]:'MULTIPLICA'+'TIVE',[sd]:'ADDITIVEAL'+'PHA',[Sp]:'MULTIPLICA'+'TIVE2X',[yp]:'SCREEN',[vp]:'MIN',[xp]:'MAX'},Hn='none',YT='linear',KT=-0x1*-0xbb6+-0x1*-0xb6f+0x1*-0x1725,Tp=-0x2d*0x25+0x164b+-0xfc8,ZT={[KT]:'NONE',[Tp]:'SCHLICK'},QT=-0x1fdb+-0x1*-0x22b5+-0x2*0x16d,py=0x22de+0x1a*-0x17f+0x417,Ji=0x1382+0x1*0x1d6b+0x104f*-0x3,ps=0x7*-0x313+-0x65*-0x11+0xed1,wp=-0xf16+0x1*-0x2391+0x3*0x10e3,Ep=-0x4f2+-0x21*-0x5f+-0x74a,Sl=-0x1270+-0x19ad+0x2c21,ve=-0x22d4+0x1afa+0x7da,Ke=0x7f*-0x13+-0x1cad+-0x1*-0x261b,Ze=0x22c*-0x8+0x6*0x635+-0x1*0x13dc,Um={[ve]:'DIRECTIONA'+'L',[Ke]:'OMNI',[Ze]:'SPOT'},wc=-0x5*0x3d+0x89*-0x21+0x66a*0x3,js=0x6d+-0xd65+-0x53*-0x28,my=-0x17ee+0x12cd+0x522,_y=-0x16f9+-0xc4b+0x5e1*0x6,gy=0x17ce+0x18b0+-0x307b,JT={[js]:'PUNCTUAL',[my]:'RECT',[_y]:'DISK',[gy]:'SPHERE'},bp=-0x984+0x1d*0x68+-0x244,Sy=0x4ac*-0x1+0x2*0x125d+0xaaf*-0x3,ew={[bp]:'LINEAR',[Sy]:'INVERSESQU'+'ARED'},Ws=0x1c06+0x479*-0x2+-0x1314,Rf=-0x147b+0x79f*0x1+0xcde,Ap=-0x106d+-0x8*-0x136+-0x24*-0x30,tw=0x1cb3+0x3*-0xa9f+0x32e,yy=0x1aa8+-0xd46+-0xb*0x137,Xo=0x62f+-0x44b*-0x7+0x26a*-0xf,vy=0xd69*0x2+0x664+0x5*-0x6a3,xy=-0x260e+-0x26d8+-0x1*-0x4cee,sw=-0x8bc+0xa6*-0x18+0x1855,Xi=new Map([[yy,{'name':'PCF1_32F','kind':'PCF1','format':Wi,'pcf':!(-0x1ca*-0x4+-0x2c*0xd+0x3*-0x1a4)}],[Ws,{'name':'PCF3_32F','kind':'PCF3','format':Wi,'pcf':!(-0x1*0x1af0+0x1*0x12aa+0x6*0x161)}],[tw,{'name':'PCF5_32F','kind':'PCF5','format':Wi,'pcf':!(-0x89a+0x39*0x85+0x21*-0xa3)}],[vy,{'name':'PCF1_16F','kind':'PCF1','format':un,'pcf':!(-0x1915+-0x58e+-0x155*-0x17)}],[xy,{'name':'PCF3_16F','kind':'PCF3','format':un,'pcf':!(-0x17d2+-0x1511+-0x2ce3*-0x1)}],[sw,{'name':'PCF5_16F','kind':'PCF5','format':un,'pcf':!(-0x683+0x175d*0x1+-0x10da)}],[Rf,{'name':'VSM_16F','kind':'VSM','format':nt,'vsm':!(-0x14d3+0x21f5+-0xd22)}],[Ap,{'name':'VSM_32F','kind':'VSM','format':Xt,'vsm':!(-0x17*0x31+-0x1*-0x143+0x6*0x86)}],[Xo,{'name':'PCSS_32F','kind':'PCSS','format':Qi,'pcss':!(0x57*0x3b+-0x3de+0x102f*-0x1)}]]),iw=-0xa20+-0x5*-0x10f+0x5d4,Cp=-0x15*-0x54+0x5e*-0x3b+0xec7,Of=0x4c1*-0x7+0x1e25+-0x191*-0x2,Ty=0x221f+0x1c75+-0x3e94,ai=0x1*0x14df+-0x64f*-0x1+0xe*-0x1f1,rw=0x2dd*-0x2+0x4*-0x53d+0x17*0x129,Zc=0x1e9*0x7+-0x7a*-0x39+-0x2889,aw=-0x5*0xb+-0x1d24+-0x2*-0xeae,ni=-0x110+0xa58+-0x948,gn=-0xd7*0x27+-0x22da+0x10e7*0x4,nn=0x208+-0x6ed*-0x1+-0x8f5,Vr=-0xb90+0x34a+0x847,Bl=0x14*-0x1eb+-0xeeb+-0x3549*-0x1,Pp=0x1997+0x71*-0x25+0x4f*-0x1e,wy=-0x1a69+-0x102b+-0xb*-0x3df,nw={[Pp]:'NONE',[wy]:'BOX'},Bm='mul',yl=-0xe16+-0x2391+0x31a7,Ec=-0x2*0xbf6+-0x37*0x2f+-0x82*-0x43,ow={[yl]:'NONE',[Ec]:'SRGB'},Mp=-0x1700+0x6*-0x502+0x2*0x1a86,sU=0x23a4+0xeb7+-0x2*0x192d,iU=-0x1*-0x258d+-0x19a7*-0x1+-0x1f99*0x2,rU=0x2*-0xa5e+0x6a*-0xa+0x18e3,aU=0x23d6+0x2487+0x1*-0x4859,nU=-0x7ca+-0x6d1+0x9c*0x18,Ey=0x26fa*-0x1+-0xaf*0x24+-0x3*-0x1534,by=['LINEAR','FILMIC','HEJL','ACES','ACES2','NEUTRAL','NONE'],Ay=-0x1*-0x1bfe+0x1e70+-0x3a6e,id=-0x1215+0x4*0x28+0x1176,Cy=0xdef+-0xbd4*-0x1+-0x19c1,lw={[Ay]:'NONE',[id]:'AO',[Cy]:'GLOSSDEPEN'+'DENT'},_r='none',Qc='envAtlas',Jc='envAtlasHQ',eh='cubeMap',Py='sphereMap',cw={[_r]:'NONE',[Qc]:'ENVATLAS',[Jc]:'ENVATLASHQ',[eh]:'CUBEMAP',[Py]:'SPHEREMAP'},Dp='ambientSH',Ip='envAtlas',Lp='constant',hw={[Dp]:'AMBIENTSH',[Ip]:'ENVALATLAS',[Lp]:'CONSTANT'},th=0x1f5d+0x224d+-0x41a9,qo=0x4d*0x6e+0x8ad+-0x29c1,Rp=0xa*-0xd0+-0x3ba+0xbde,My=-0x592+0x1a2b+-0x1b*0xc3,Dy=-0x130b+0x1d2f+0x81*-0x14,jo=-0x136e*0x2+0x8c+0x2670,Ff=0xd2d*-0x1+0x171+-0x76*-0x1a,Iy=-0x1*0x313+-0x22a6*-0x1+-0x1f13,sh=-0xdc4*-0x1+0x1bf*-0x11+0x10eb,Op=0x1fec+-0x2066+0x27a,Yo=-0x283*0x1+0x78c*-0x2+-0x159b*-0x1,Ko=-0x20cc*-0x1+0x82*-0x46+0x158*0x8,Ly=-0x323+-0x1b10+0x2e33,Zo=0x1*0x2185+-0x2d10+0x1*0x2b8b,bc=0x1cf4*0x4+-0x1c79*-0x3+-0x1*0x893b,Ps=-0x9fa+0x2*0x12b6+-0x1b72,gr=-0x1*-0x10a3+-0x748*0x1+-0x95a,Fp=0x1*-0x4fd+0x18aa+-0x13ab,Ss=0xa45+-0x1d7d+0x7*0x2bf,di=-0x305*-0x1+0x1*0x14d3+-0x17d6,fi=-0xa3b+-0x6*-0x47d+-0x10af*0x1,xa=0x1*-0x5f3+-0x4a8+-0xb5*-0xf,vl=0x1f6e*-0x1+-0x30b*0x1+-0x2*-0x113d,Np=0xb6*-0x29+-0x35b*0x8+0x1c00*0x2,Wn=-0x1ea0+-0xd9+0x34*0x9b,ci=0x219*-0x4+0x3e6*0x7+0x3b*-0x52,Pt=0x1*-0x1cd3+-0xca*0x25+0x1*0x3a06,Mt=0x15f1+-0x1927+0x338,dw={[ci]:'SIMPLE',[Pt]:'SLICED',[Mt]:'TILED'},Ac=0x103e+-0x2388*0x1+0x134b,zl=-0x3b*-0x80+0xf6b+-0x2ceb,Cc=-0x138b+-0x1628+0x29b3,fw=0x1b*0x6b+-0x3f3+-0x755,uw=0x15*-0xc0+0x1*-0x6d8+0x169a,zm=0x2*-0xaee+0x315+-0x1a*-0xb9,pw=-0x9bb*-0x1+-0x1af0+0x1139,mw=-0x20a2*0x1+0x2477+-0x1e8*0x2,kp=-0x1d19+-0x1728+-0xd*-0x405,Nf=0x1790+-0xf7*0x1+-0x1698,Ae=0xc2f*-0x1+0x13e5+0x292*-0x3,je=-0x243*-0x11+-0xc4f+-0x1*0x1a23,Co='infinite',_w='box',gw='dome',ua='none',Sw='bayer8',yw='bluenoise',vw='ignnoise',xw={[ua]:'NONE',[Sw]:'BAYER8',[yw]:'BLUENOISE',[vw]:'IGNNOISE'},Tw='prerender',ww='postrender',Ew='prerender:'+'layer',bw='postrender'+':layer',Ry='precull',Oy='postcull',Aw='cull:end';class rd{constructor(_0x191c22,_0x2ac25f,_0x2d5344){h(this,'uniformFor'+'mats',[]),h(this,'bindGroupF'+'ormats',[]),h(this,'vertexForm'+'at'),(this['uniformFor'+'mats'][$o]=_0x191c22,this['bindGroupF'+'ormats'][$o]=_0x2ac25f,this['vertexForm'+'at']=_0x2d5344);}['hasUniform'](_0x1a2555){for(let _0x56ed88=-0x1*0x151f+0xe4b+0x13*0x5c;_0x56ed88<this['uniformFor'+'mats']['length'];_0x56ed88++){const _0x61a49c=this['uniformFor'+'mats'][_0x56ed88];if(_0x61a49c!=null&&_0x61a49c['get'](_0x1a2555))return!(0x2e3*0x4+0x1d7*-0x3+-0x607);}return!(0x1*0x2607+0x1287+-0x388d);}['hasTexture'](_0x31a580){for(let _0x5c574c=-0x1a*-0x6b+-0x22dd+0x17ff;_0x5c574c<this['bindGroupF'+'ormats']['length'];_0x5c574c++){const _0x179eb6=this['bindGroupF'+'ormats'][_0x5c574c];if(_0x179eb6!=null&&_0x179eb6['getTexture'](_0x31a580))return!(-0x2*0x3f1+0xc*0x21d+-0x117a);}return!(0x1*-0x953+0x1efb+0x15a7*-0x1);}['getVertexE'+'lement'](_0x4c250c){var _0x4e8229;return(_0x4e8229=this['vertexForm'+'at'])==null?void(0x4*-0xe5+-0x1031+0x697*0x3):_0x4e8229['elements']['find'](_0x464f86=>_0x464f86['name']===_0x4c250c);}['generateKe'+'y'](_0x1c7168){var _0x446d09;let _0x6e239c=JSON['stringify'](this['uniformFor'+'mats'])+JSON['stringify'](this['bindGroupF'+'ormats']);return _0x1c7168['isWebGPU']&&(_0x6e239c+=(_0x446d09=this['vertexForm'+'at'])==null?void(-0x1615*-0x1+-0x91d+-0xcf8):_0x446d09['shaderProc'+'essingHash'+'String']),_0x6e239c;}}const Fy=new Kt();function Nn(_0x11bd51){const _0x5f524a=Fy['get'](_0x11bd51);return w['assert'](_0x5f524a),_0x5f524a;}function Cw(_0x382711,_0x257070){w['assert'](_0x257070),Fy['get'](_0x382711,()=>_0x257070);}class pa{static['definesHas'+'h'](_0x565390){const _0x26014e=Array['from'](_0x565390)['sort']((_0xfd55d3,_0x42aced)=>_0xfd55d3[0x13f*-0x16+0x1bfc+-0x2*0x49]>_0x42aced[0xe5+0x1453+-0x1538]?0xc1d+0x2*-0x48b+0x3*-0x102:-(0x5a5*-0x2+-0x1f*-0x43+0x32e));return hi(JSON['stringify'](_0x26014e));}}const Pw=new Kt();class Mw{constructor(_0x2bae1b,_0x109cad,_0x1a58f9={}){h(this,'index'),h(this,'name'),h(this,'defines',new Map()),(w['assert'](/^[a-z]\w*$/i['test'](_0x2bae1b),'ShaderPass'+'\x20name\x20can\x20'+'only\x20conta'+'in\x20letters'+',\x20numbers\x20'+'and\x20unders'+'cores\x20and\x20'+'start\x20with'+'\x20a\x20letter:'+'\x20'+_0x2bae1b),this['name']=_0x2bae1b,this['index']=_0x109cad,Object['assign'](this,_0x1a58f9),this['buildShade'+'rDefines']());}['buildShade'+'rDefines'](){let _0x35a8f9;this['isShadow']?_0x35a8f9='SHADOW':this['isForward']?_0x35a8f9='FORWARD':this['index']===Wn&&(_0x35a8f9='PICK'),this['defines']['set'](_0x35a8f9+'_PASS',''),this['defines']['set'](this['name']['toUpperCas'+'e']()+'_PASS','');}}class Si{constructor(){h(this,'passesName'+'d',new Map()),h(this,'passesInde'+'xed',[]),h(this,'nextIndex',-0xeb5*-0x1+0x1e6*-0x3+-0x903);const _0x37b975=(_0x7e9ff,_0x1365f6,_0x2a0f7e)=>{const _0x2c875e=this['allocate'](_0x7e9ff,_0x2a0f7e);w['assert'](_0x2c875e['index']===_0x1365f6);};_0x37b975('forward',xa,{'isForward':!(-0x14c*0xc+-0x25cf*0x1+-0xd*-0x41b)}),_0x37b975('prepass',vl),_0x37b975('shadow',Np),_0x37b975('pick',Wn);}static['get'](_0x35eb0e){return w['assert'](_0x35eb0e),Pw['get'](_0x35eb0e,()=>new Si());}['allocate'](_0x5a326d,_0x6e5b84){let _0x3486f2=this['passesName'+'d']['get'](_0x5a326d);return _0x3486f2===void(-0x1*0x26f5+0x3e*0x91+-0x3d7*-0x1)&&(_0x3486f2=new Mw(_0x5a326d,this['nextIndex'],_0x6e5b84),this['passesName'+'d']['set'](_0x3486f2['name'],_0x3486f2),this['passesInde'+'xed'][_0x3486f2['index']]=_0x3486f2,this['nextIndex']++),_0x3486f2;}['getByIndex'](_0xf25494){const _0x1487be=this['passesInde'+'xed'][_0xf25494];return w['assert'](_0x1487be),_0x1487be;}['getByName'](_0x5ccfb6){return this['passesName'+'d']['get'](_0x5ccfb6);}}class Vm extends Map{constructor(){super(...arguments),h(this,'_keyDirty',!(0x0+0x2c6+-0x1*0x2c5)),h(this,'_key','');}['set'](_0x4d9bca,_0x5624d2){return(!this['has'](_0x4d9bca)||this['get'](_0x4d9bca)!==_0x5624d2)&&this['markDirty'](),super['set'](_0x4d9bca,_0x5624d2);}['add'](_0x249afa){for(const [_0xd37088,_0x358545]of Object['entries'](_0x249afa))this['set'](_0xd37088,_0x358545);return this;}['delete'](_0x3fb262){const _0x5a48b6=this['has'](_0x3fb262),_0x2fafe3=super['delete'](_0x3fb262);return _0x5a48b6&&_0x2fafe3&&this['markDirty'](),_0x2fafe3;}['clear'](){this['size']>0x112d+0x2390+-0x1*0x34bd&&this['markDirty'](),super['clear']();}['markDirty'](){this['_dirty']=!(0x1fbf+-0x1712+-0x1*0x8ad),this['_keyDirty']=!(0xf*-0x4a+0x2*0x1218+-0x9*0x38a);}['isDirty'](){return this['_dirty'];}['resetDirty'](){this['_dirty']=!(0x2464+0x200*0x12+-0x9*0x80b);}get['key'](){return this['_keyDirty']&&(this['_keyDirty']=!(0x1dfc+0x8e2+-0x1*0x26dd),this['_key']=Array['from'](this['entries']())['sort'](([_0x4d3fe5],[_0x4dacf6])=>_0x4d3fe5<_0x4dacf6?-(0x3*-0xc92+0x1*0x47e+0x2139):_0x4d3fe5>_0x4dacf6?0x943*-0x2+0x1159*-0x1+0x8*0x47c:0x297*-0xb+-0x1*-0x278+0x1a05)['map'](([_0x5ce3ff,_0x1eb6df])=>_0x5ce3ff+'='+hi(_0x1eb6df))['join'](',')),this['_key'];}['copy'](_0x85bfde){this['clear']();for(const [_0x30c4f6,_0x2d339a]of _0x85bfde)this['set'](_0x30c4f6,_0x2d339a);return this;}}const Dw=new Kt();class Ce{constructor(){h(this,'glsl',new Vm()),h(this,'wgsl',new Vm()),h(this,'version','');}static['get'](_0x558954,_0x604f1a=Fe){const _0x2158b9=Dw['get'](_0x558954,()=>new Ce());return _0x604f1a===Fe?_0x2158b9['glsl']:_0x2158b9['wgsl'];}get['useWGSL'](){return this['glsl']['size']===-0x13fb*0x1+0x1d2f+-0x934||this['wgsl']['size']>-0x2f*0x6a+0x25*-0xd+0x71d*0x3;}get['key'](){return'GLSL:'+this['glsl']['key']+'|WGSL:'+this['wgsl']['key']+'|API:'+this['version'];}['isDirty'](){return this['glsl']['isDirty']()||this['wgsl']['isDirty']();}['resetDirty'](){this['glsl']['resetDirty'](),this['wgsl']['resetDirty']();}['copy'](_0x5e6c53){return this['version']=_0x5e6c53['version'],this['glsl']['copy'](_0x5e6c53['glsl']),this['wgsl']['copy'](_0x5e6c53['wgsl']),this;}}class ih{static['merge'](..._0x24d16f){const _0x4605ad=new Map(_0x24d16f[0x207*-0x7+0xdec+-0x1*-0x45]??[]);for(let _0x5c2be7=0xc10+-0x29d*-0xd+0x3d6*-0xc;_0x5c2be7<_0x24d16f['length'];_0x5c2be7++){const _0x4ae8aa=_0x24d16f[_0x5c2be7];if(_0x4ae8aa){for(const [_0x46169a,_0x22589d]of _0x4ae8aa)_0x4605ad['set'](_0x46169a,_0x22589d);}}return _0x4605ad;}}class Iw extends pa{constructor(_0x495e90,_0x158ae9){super(),this['key']=_0x495e90,this['shaderDefi'+'nition']=_0x158ae9;}['generateKe'+'y'](_0x471674){return this['key'];}['createShad'+'erDefiniti'+'on'](_0x57e649,_0x13be5c){return this['shaderDefi'+'nition'];}}class $t{static['createShad'+'er'](_0x3f6cf6,_0x4a1530){const _0x4b2e16=Nn(_0x3f6cf6);let _0x1d0fbf=_0x4b2e16['getCachedS'+'hader'](_0x4a1530['uniqueName']);if(!_0x1d0fbf){const _0x58bd91=_0x3f6cf6['isWebGPU']&&(!!_0x4a1530['vertexWGSL']||!!_0x4a1530['vertexChun'+'k'])&&(!!_0x4a1530['fragmentWG'+'SL']||!!_0x4a1530['fragmentCh'+'unk']),_0x50051c=Ce['get'](_0x3f6cf6,_0x58bd91?it:Fe),_0x421728=_0x4a1530['vertexChun'+'k']?_0x50051c['get'](_0x4a1530['vertexChun'+'k']):_0x58bd91?_0x4a1530['vertexWGSL']:_0x4a1530['vertexGLSL'],_0x41735b=_0x4a1530['fragmentCh'+'unk']?_0x50051c['get'](_0x4a1530['fragmentCh'+'unk']):_0x58bd91?_0x4a1530['fragmentWG'+'SL']:_0x4a1530['fragmentGL'+'SL'];w['assert'](_0x421728,'ShaderUtil'+'s.createSh'+'ader:\x20vert'+'ex\x20shader\x20'+'code\x20not\x20p'+'rovided',_0x4a1530),w['assert'](_0x41735b,'ShaderUtil'+'s.createSh'+'ader:\x20frag'+'ment\x20shade'+'r\x20code\x20not'+'\x20provided',_0x4a1530);const _0x58bc98=ih['merge'](_0x50051c,_0x4a1530['fragmentIn'+'cludes']),_0x169c07=ih['merge'](_0x50051c,_0x4a1530['vertexIncl'+'udes']);_0x1d0fbf=new dy(_0x3f6cf6,Jt['createDefi'+'nition'](_0x3f6cf6,{'name':_0x4a1530['uniqueName'],'shaderLanguage':_0x58bd91?it:Fe,'attributes':_0x4a1530['attributes'],'vertexCode':_0x421728,'fragmentCode':_0x41735b,'useTransformFeedback':_0x4a1530['useTransfo'+'rmFeedback'],'vertexIncludes':_0x169c07,'vertexDefines':_0x4a1530['vertexDefi'+'nes'],'fragmentIncludes':_0x58bc98,'fragmentDefines':_0x4a1530['fragmentDe'+'fines'],'fragmentOutputTypes':_0x4a1530['fragmentOu'+'tputTypes']})),_0x4b2e16['setCachedS'+'hader'](_0x4a1530['uniqueName'],_0x1d0fbf);}return _0x1d0fbf;}static['getCoreDef'+'ines'](_0x5da623,_0x184843){const _0x50c8ee=new Map(_0x5da623['defines']);return _0x184843['cameraShad'+'erParams']['defines']['forEach']((_0x1bb1f9,_0x318984)=>_0x50c8ee['set'](_0x318984,_0x1bb1f9)),Si['get'](_0x184843['device'])['getByIndex'](_0x184843['pass'])['defines']['forEach']((_0x38ea97,_0x3e7a4e)=>_0x50c8ee['set'](_0x3e7a4e,_0x38ea97)),_0x50c8ee;}static['processSha'+'der'](_0x4aa7e8,_0x5dd386){w['assert'](_0x4aa7e8);const _0x4df57c=_0x4aa7e8['definition'],_0x53b8a9=(_0x4df57c['name']??'shader')+'-id-'+_0x4aa7e8['id'],_0x26350f=new Iw(_0x53b8a9,_0x4df57c),_0x49fca0='shader',_0x5ea404=Nn(_0x4aa7e8['device']);w['assert'](!_0x5ea404['isRegister'+'ed'](_0x49fca0)),_0x5ea404['register'](_0x49fca0,_0x26350f);const _0x5925c9=_0x5ea404['getProgram'](_0x49fca0,{},_0x5dd386);return _0x5ea404['unregister'](_0x49fca0),_0x5925c9;}static['addScreenD'+'epthChunkD'+'efines'](_0x4baa43,_0x8f74a8,_0x108e76){_0x8f74a8['sceneDepth'+'MapLinear']&&_0x108e76['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',''),_0x4baa43['textureFlo'+'atRenderab'+'le']&&_0x108e76['set']('SCENE_DEPT'+'HMAP_FLOAT','');}}const Lw={'type':vr,'base':0x0,'baseVertex':0x0,'count':0x4,'indexed':!(-0x155*0x19+0x14*0xf6+0xe16)},Yn=new re(),Kn=new re(),vd=new ty();class rh{constructor(_0x288132){h(this,'uniformBuf'+'fer'),h(this,'bindGroup');const _0xac0579=_0x288132['device'];if(this['shader']=_0x288132,w['assert'](_0x288132),_0xac0579['supportsUn'+'iformBuffe'+'rs']){const _0x5faaba=new rd();this['shader']=$t['processSha'+'der'](_0x288132,_0x5faaba);const _0x395cb3=this['shader']['meshUnifor'+'mBufferFor'+'mat'];_0x395cb3&&(this['uniformBuf'+'fer']=new up(_0xac0579,_0x395cb3,!(0x490+0xc55+-0x10e4)));const _0x1dc79e=this['shader']['meshBindGr'+'oupFormat'];w['assert'](_0x1dc79e),this['bindGroup']=new dp(_0xac0579,_0x1dc79e),ya['setName'](this['bindGroup'],'QuadRender'+'-MeshBindG'+'roup_'+this['bindGroup']['id']);}}['destroy'](){var _0x1bc488,_0x588186;(_0x1bc488=this['uniformBuf'+'fer'])==null||_0x1bc488['destroy'](),this['uniformBuf'+'fer']=null,(_0x588186=this['bindGroup'])==null||_0x588186['destroy'](),this['bindGroup']=null;}['render'](_0x25a95f,_0xc35f04){const _0x3dbc8a=this['shader']['device'];Q['pushGpuMar'+'ker'](_0x3dbc8a,'QuadRender'),_0x25a95f&&(Yn['set'](_0x3dbc8a['vx'],_0x3dbc8a['vy'],_0x3dbc8a['vw'],_0x3dbc8a['vh']),Kn['set'](_0x3dbc8a['sx'],_0x3dbc8a['sy'],_0x3dbc8a['sw'],_0x3dbc8a['sh']),_0xc35f04=_0xc35f04??_0x25a95f,_0x3dbc8a['setViewpor'+'t'](_0x25a95f['x'],_0x25a95f['y'],_0x25a95f['z'],_0x25a95f['w']),_0x3dbc8a['setScissor'](_0xc35f04['x'],_0xc35f04['y'],_0xc35f04['z'],_0xc35f04['w'])),_0x3dbc8a['setVertexB'+'uffer'](_0x3dbc8a['quadVertex'+'Buffer'],-0x16*0x44+0xd*-0x2e9+-0xe8f*-0x3);const _0x5938a0=this['shader'];if(_0x3dbc8a['setShader'](_0x5938a0),_0x3dbc8a['supportsUn'+'iformBuffe'+'rs']){_0x3dbc8a['setBindGro'+'up']($o,_0x3dbc8a['emptyBindG'+'roup']);const _0x5071be=this['bindGroup'];_0x5071be['update'](),_0x3dbc8a['setBindGro'+'up'](QS,_0x5071be);const _0x446738=this['uniformBuf'+'fer'];_0x446738?(_0x446738['update'](vd),_0x3dbc8a['setBindGro'+'up'](Df,vd['bindGroup'],vd['offsets'])):_0x3dbc8a['setBindGro'+'up'](Df,_0x3dbc8a['emptyBindG'+'roup']);}_0x3dbc8a['draw'](Lw),_0x25a95f&&(_0x3dbc8a['setViewpor'+'t'](Yn['x'],Yn['y'],Yn['z'],Yn['w']),_0x3dbc8a['setScissor'](Kn['x'],Kn['y'],Kn['z'],Kn['w'])),Q['popGpuMark'+'er'](_0x3dbc8a);}}class Rw extends ys{constructor(_0x8bba47,_0x403741,_0x410775,_0x4a0b19){super(_0x8bba47),this['quad']=_0x403741,this['rect']=_0x410775,this['scissorRec'+'t']=_0x4a0b19;}['execute'](){const {device:_0x28c1ba}=this;Q['pushGpuMar'+'ker'](_0x28c1ba,this['name']+':'+this['quad']['shader']['name']),_0x28c1ba['setCullMod'+'e'](bt),_0x28c1ba['setDepthSt'+'ate'](Yt['NODEPTH']),_0x28c1ba['setStencil'+'State'](null,null),this['quad']['render'](this['rect'],this['scissorRec'+'t']),Q['popGpuMark'+'er'](_0x28c1ba);}}const Ow=new re();function Tr(_0x348c95,_0x6b7acf,_0x58cba4,_0x37aff3,_0x4101fb){w['assert'](_0x6b7acf!==void(-0xfeb*-0x1+0xb5d*0x1+0x123*-0x18));const _0x468031=arguments[-0x29*0x99+0x12dd+0x5a9*0x1];w['call'](()=>{_0x468031!==void(0x7e0+-0x179d+0xed*0x11)&&w['warnOnce']('pc.drawQua'+'dWithShade'+'r\x20no\x20longe'+'r\x20accepts\x20'+'useBlend\x20p'+'arameter,\x20'+'and\x20blendi'+'ng\x20state\x20n'+'eeds\x20to\x20be'+'\x20set\x20up\x20us'+'ing\x20Graphi'+'csDevice.s'+'etBlendSta'+'te.');});const _0x1549a8=new rh(_0x58cba4);_0x37aff3||(_0x37aff3=Ow,_0x37aff3['x']=0x14a6+0x1955+0x2dfb*-0x1,_0x37aff3['y']=0x1966+-0xd1*0x10+-0x2*0x62b,_0x37aff3['z']=_0x6b7acf?_0x6b7acf['width']:_0x348c95['width'],_0x37aff3['w']=_0x6b7acf?_0x6b7acf['height']:_0x348c95['height']);const _0x3de71f=new Rw(_0x348c95,_0x1549a8,_0x37aff3,_0x4101fb);_0x3de71f['init'](_0x6b7acf),_0x3de71f['colorOps']['clear']=!(-0x1f59+0x42d*0x8+-0x20e),_0x3de71f['depthStenc'+'ilOps']['clearDepth']=!(0x1103+-0xf79*0x2+0x10*0xdf),_0x348c95['isWebGPU']&&_0x6b7acf===null&&_0x348c95['samples']>0x1ea9+0x6d*0x17+-0x5f*0x6d&&(_0x3de71f['colorOps']['store']=!(-0xd5a+0x2372+0x1*-0x1618)),_0x3de71f['render'](),_0x1549a8['destroy']();}class Gm{constructor(_0x358820,_0x379ab7,_0x277f2b){h(this,'_aabb',new De()),h(this,'origMeshIn'+'stances'),h(this,'meshInstan'+'ce',null),h(this,'dynamic'),h(this,'batchGroup'+'Id'),(this['origMeshIn'+'stances']=_0x358820,this['dynamic']=_0x379ab7,this['batchGroup'+'Id']=_0x277f2b);}['destroy'](_0x42b179,_0x2b13e3){this['meshInstan'+'ce']&&(this['removeFrom'+'Layers'](_0x42b179,_0x2b13e3),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}['addToLayer'+'s'](_0x1c3d61,_0x3568c9){for(let _0x85014e=-0xe4a*0x2+0xf20+0x15*0xa4;_0x85014e<_0x3568c9['length'];_0x85014e++){const _0x457cea=_0x1c3d61['layers']['getLayerBy'+'Id'](_0x3568c9[_0x85014e]);_0x457cea&&_0x457cea['addMeshIns'+'tances']([this['meshInstan'+'ce']]);}}['removeFrom'+'Layers'](_0x3ad05b,_0x499c27){for(let _0x522751=-0x1f4+-0x96d+0xb61;_0x522751<_0x499c27['length'];_0x522751++){const _0x49c7b9=_0x3ad05b['layers']['getLayerBy'+'Id'](_0x499c27[_0x522751]);_0x49c7b9&&_0x49c7b9['removeMesh'+'Instances']([this['meshInstan'+'ce']]);}}['updateBoun'+'dingBox'](){this['_aabb']['copy'](this['origMeshIn'+'stances'][-0x1*0x26b2+0x2493*0x1+0x21f*0x1]['aabb']);for(let _0x296e0b=0x1906+0x99+-0x199e;_0x296e0b<this['origMeshIn'+'stances']['length'];_0x296e0b++)this['_aabb']['add'](this['origMeshIn'+'stances'][_0x296e0b]['aabb']);this['meshInstan'+'ce']['aabb']=this['_aabb'],this['meshInstan'+'ce']['_aabbVer']=0x25f0+0x3e1+-0x29d1;}get['model'](){w['removed']('pc.Batch#m'+'odel\x20was\x20r'+'emoved.\x20Us'+'e\x20pc.Batch'+'#meshInsta'+'nce\x20to\x20acc'+'ess\x20batche'+'d\x20mesh\x20ins'+'tead.');}}class St{constructor(_0x2079bf,_0x19776f,_0x180b4f,_0x1b5085,_0x15c683=[Ji]){h(this,'_ui',!(-0x5c+0xfe4+0x3*-0x52d)),h(this,'_sprite',!(0x193a*-0x1+0x1d23*-0x1+-0x365e*-0x1)),h(this,'_obj',{'model':[],'element':[],'sprite':[],'render':[]}),h(this,'id'),h(this,'name'),h(this,'dynamic'),h(this,'maxAabbSiz'+'e'),h(this,'layers'),(this['id']=_0x2079bf,this['name']=_0x19776f,this['dynamic']=_0x180b4f,this['maxAabbSiz'+'e']=_0x1b5085,this['layers']=_0x15c683);}}h(St,'MODEL','model'),h(St,'ELEMENT','element'),h(St,'SPRITE','sprite'),h(St,'RENDER','render');const Hm=new te();class xl{constructor(_0x4e2735){h(this,'bones'),(this['_dirty']=!(-0x11fb+0x799*0x1+0xa62),this['_rootBone']=null,this['_skinUpdat'+'eIndex']=-(-0x1360+0x3f1+0xf7*0x10),this['_updateBef'+'oreCull']=!(-0x7*0xfb+0x147f+0x1*-0xda2),_0x4e2735&&this['initSkin'](_0x4e2735));}set['rootBone'](_0x49bb1a){this['_rootBone']=_0x49bb1a;}get['rootBone'](){return this['_rootBone'];}['init'](_0xbd90d9,_0x32be88){const _0xce27ad=_0x32be88*(0x1*0x51+0x1682+0x10*-0x16d);let _0x243682=Math['ceil'](Math['sqrt'](_0xce27ad));_0x243682=Y['roundUp'](_0x243682,-0x21e+-0x13c1+0x15e2);const _0x3cebf9=Math['ceil'](_0xce27ad/_0x243682);this['boneTextur'+'e']=new _e(_0xbd90d9,{'width':_0x243682,'height':_0x3cebf9,'format':Xt,'mipmaps':!(0x14af+-0x11ff+0xe5*-0x3),'minFilter':Te,'magFilter':Te,'name':'skin'}),this['matrixPale'+'tte']=this['boneTextur'+'e']['lock']({'mode':kS}),this['boneTextur'+'e']['unlock']();}['destroy'](){this['boneTextur'+'e']&&(this['boneTextur'+'e']['destroy'](),this['boneTextur'+'e']=null);}['resolve'](_0xcaae37,_0x19de8f){this['rootBone']=_0xcaae37;const _0x380660=this['skin'],_0x57aebb=[];for(let _0x208d30=-0x1494+0x1201+-0x293*-0x1;_0x208d30<_0x380660['boneNames']['length'];_0x208d30++){const _0x54e78e=_0x380660['boneNames'][_0x208d30];let _0x124925=_0xcaae37['findByName'](_0x54e78e);_0x124925||(w['error']('Failed\x20to\x20'+'find\x20bone\x20'+'['+_0x54e78e+(']\x20in\x20the\x20e'+'ntity\x20hier'+'archy,\x20Ren'+'derCompone'+'nt\x20on\x20')+_0x19de8f['name']+(',\x20rootBone'+':\x20')+_0xcaae37['name']),_0x124925=_0x19de8f),_0x57aebb['push'](_0x124925);}this['bones']=_0x57aebb;}['initSkin'](_0x47d15f){this['skin']=_0x47d15f,this['bones']=[];const _0xebc2ad=_0x47d15f['inverseBin'+'dPose']['length'];this['init'](_0x47d15f['device'],_0xebc2ad),this['matrices']=[];for(let _0x5462d0=0x1*-0x1239+-0x2307+-0xc0*-0x47;_0x5462d0<_0xebc2ad;_0x5462d0++)this['matrices'][_0x5462d0]=new te();}['uploadBone'+'s'](_0x31c012){this['boneTextur'+'e']['upload']();}['_updateMat'+'rices'](_0x10f53a,_0x4ec551){if(this['_skinUpdat'+'eIndex']!==_0x4ec551){this['_skinUpdat'+'eIndex']=_0x4ec551,Hm['copy'](_0x10f53a['getWorldTr'+'ansform']())['invert']();for(let _0x481429=this['bones']['length']-(0x2f3+0x821+-0xb13);_0x481429>=-0x18df+0x563*-0x2+-0x19*-0x16d;_0x481429--)this['matrices'][_0x481429]['mulAffine2'](Hm,this['bones'][_0x481429]['getWorldTr'+'ansform']()),this['matrices'][_0x481429]['mulAffine2'](this['matrices'][_0x481429],this['skin']['inverseBin'+'dPose'][_0x481429]);}}['updateMatr'+'ices'](_0xc3e487,_0x1cd517){this['_updateBef'+'oreCull']&&this['_updateMat'+'rices'](_0xc3e487,_0x1cd517);}['updateMatr'+'ixPalette'](_0x53b099,_0x46815d){this['_updateMat'+'rices'](_0x53b099,_0x46815d);const _0x4a2440=this['matrixPale'+'tte'],_0x2f9a8e=this['bones']['length'];for(let _0x246114=0x137e*-0x1+-0x1ad5+0x2e53;_0x246114<_0x2f9a8e;_0x246114++){const _0x4f2e92=this['matrices'][_0x246114]['data'],_0x1ad83f=_0x246114*(-0x891+0x235e+-0x1ac1);_0x4a2440[_0x1ad83f]=_0x4f2e92[0x417+-0x2*0x1198+0x1f19],_0x4a2440[_0x1ad83f+(0x3*-0x4cd+0x1*0x2247+-0x13df)]=_0x4f2e92[0x2*0x367+0x240b*0x1+-0x2ad5],_0x4a2440[_0x1ad83f+(0x127*0x1d+-0x2*0x1127+0xe5*0x1)]=_0x4f2e92[-0x7*-0x3b3+-0x1*0x14b3+-0x52a],_0x4a2440[_0x1ad83f+(0x5fa*-0x2+0x9*0x16+0x23d*0x5)]=_0x4f2e92[0x3*-0x78b+-0x19f7+0x30a4],_0x4a2440[_0x1ad83f+(0x667+-0xde7+0x4a*0x1a)]=_0x4f2e92[-0x1*0x24ab+0x2679+-0x1cd],_0x4a2440[_0x1ad83f+(-0xa66*0x1+0x1*-0xa61+0xf2*0x16)]=_0x4f2e92[0x9*0xc5+-0x810+-0x4*-0x4a],_0x4a2440[_0x1ad83f+(-0x7*-0x367+-0x5f+-0x4*0x5db)]=_0x4f2e92[0x2687+-0x3b*0x25+0x3*-0x9fd],_0x4a2440[_0x1ad83f+(0x1*-0x2510+-0x1613*0x1+-0x3b2a*-0x1)]=_0x4f2e92[-0x1d51+-0x3b*0x8f+-0x1*-0x3e53],_0x4a2440[_0x1ad83f+(0x17b5+0x1*-0x26fb+-0x7a7*-0x2)]=_0x4f2e92[0x592+0x2*0x975+-0x187a],_0x4a2440[_0x1ad83f+(-0x12de+-0x2f+0x1316)]=_0x4f2e92[0xb*0x1d3+-0x9c5+-0xa46],_0x4a2440[_0x1ad83f+(0x25e2+-0xaed*-0x3+-0x469f*0x1)]=_0x4f2e92[0x2487+0x254b+0x8*-0x939],_0x4a2440[_0x1ad83f+(0x1d0c+-0xeb5*-0x2+-0x3a6b)]=_0x4f2e92[0x19c6*0x1+-0xbe7*0x3+0x9fd*0x1];}this['uploadBone'+'s'](this['skin']['device']);}}class Wm extends xl{constructor(_0xac5ba1,_0x5360eb,_0x2e2b8d){super();const _0x132019=_0x5360eb['length'];this['init'](_0xac5ba1,_0x132019),this['device']=_0xac5ba1,this['rootNode']=_0x2e2b8d,this['bones']=_0x5360eb;}['updateMatr'+'ices'](_0x5775b2,_0x129a53){}['updateMatr'+'ixPalette'](_0x2958da,_0x487057){const _0x800742=this['matrixPale'+'tte'],_0x66caa5=this['bones']['length'];for(let _0x81140=-0x1*-0x26b9+0x24c9+-0x4b82;_0x81140<_0x66caa5;_0x81140++){const _0x4b20b8=this['bones'][_0x81140]['getWorldTr'+'ansform']()['data'],_0x1b16af=_0x81140*(-0xa2e+-0x1941+0x237b);_0x800742[_0x1b16af]=_0x4b20b8[0x156b*0x1+-0x2f*-0xb5+-0x1*0x36a6],_0x800742[_0x1b16af+(-0x1*0x661+0x237d*0x1+0x1*-0x1d1b)]=_0x4b20b8[0x337+0x1151*0x2+-0x25d5],_0x800742[_0x1b16af+(0xb3b+-0x3*-0x18d+-0xfe0)]=_0x4b20b8[0x4d*0x17+-0x1*-0x1f87+-0x266a*0x1],_0x800742[_0x1b16af+(0x25d1+-0x2423+0x1*-0x1ab)]=_0x4b20b8[0x113c*0x2+0x1829+-0x3a95],_0x800742[_0x1b16af+(0x13d5+-0x57*0x39+-0x6*0x13)]=_0x4b20b8[-0x1486+0x883*0x3+-0x2*0x281],_0x800742[_0x1b16af+(0x1a11+0x1ff+-0x1c0b)]=_0x4b20b8[0x3*-0x72a+-0x61*-0x39+-0x16],_0x800742[_0x1b16af+(-0x2665+-0x123+-0x7a*-0x53)]=_0x4b20b8[-0x6b*-0x4f+0x4f*-0x79+-0x5*-0xdf],_0x800742[_0x1b16af+(0x251*-0xa+-0x8c9+0x1ffa)]=_0x4b20b8[-0x1d01+0xbe8+0x1126],_0x800742[_0x1b16af+(-0x1f2b+0x61f+0x42e*0x6)]=_0x4b20b8[0x21ea+0x1*0x2481+-0x4669],_0x800742[_0x1b16af+(0x41c*-0x2+0x1*-0x7c5+0x1006)]=_0x4b20b8[0xe4e+-0xa2f+-0x419],_0x800742[_0x1b16af+(0x1*0x7ed+-0x9cf*-0x1+-0x6*0x2f3)]=_0x4b20b8[0x432+0x7cd+-0xbf5],_0x800742[_0x1b16af+(0x26f2+-0x14*-0x119+-0x3cdb)]=_0x4b20b8[0x5*0x1cb+-0x23a5+-0x4*-0x6af];}this['uploadBone'+'s'](this['device']);}}let Fw=0x1335+0x6ea+-0x1a1f;class oi{constructor(){this['initDefaul'+'ts']();}['initDefaul'+'ts'](){this['recreate']=!(0x2*0x123e+-0x6*-0x4ca+-0x4137),this['verticesUs'+'age']=ms,this['indicesUsa'+'ge']=ms,this['maxVertice'+'s']=-0x263a+-0x5*-0x24e+0xd5a*0x2,this['maxIndices']=-0x1f64+-0x52*0x2c+0x2d7c,this['vertexCoun'+'t']=0xf5*-0x7+-0x49*0x4+0x7d7,this['indexCount']=-0x237c+-0x36e*-0x4+0xc7*0x1c,this['vertexStre'+'amsUpdated']=!(-0xa*0x237+-0x1b93+-0x4f9*-0xa),this['indexStrea'+'mUpdated']=!(-0x1*-0xb6b+-0xe6c*0x2+-0xc2*-0x17),this['vertexStre'+'amDictiona'+'ry']={},this['indices']=null;}['_changeVer'+'texCount'](_0x389c0e,_0x55d796){this['vertexCoun'+'t']?w['assert'](this['vertexCoun'+'t']===_0x389c0e,'Vertex\x20str'+'eam\x20'+_0x55d796+'\x20has\x20'+_0x389c0e+('\x20vertices,'+'\x20which\x20doe'+'s\x20not\x20matc'+'h\x20already\x20'+'set\x20stream'+'s\x20with\x20')+this['vertexCoun'+'t']+'\x20vertices.'):this['vertexCoun'+'t']=_0x389c0e;}}h(oi,'DEFAULT_CO'+'MPONENTS_P'+'OSITION',0x24cf+-0x3*0xd0+0x225c*-0x1),h(oi,'DEFAULT_CO'+'MPONENTS_N'+'ORMAL',-0x106f+-0x1ac5+0x2b37),h(oi,'DEFAULT_CO'+'MPONENTS_U'+'V',-0x21dd+-0x8e7*-0x3+0x72a),h(oi,'DEFAULT_CO'+'MPONENTS_C'+'OLORS',-0xb1c+0x1*-0x12ad+-0x1*-0x1dcd);class Nw{constructor(_0x246b53,_0x2b80e8,_0x54e5f8,_0x3c5379,_0x3f2dd5){this['data']=_0x246b53,this['componentC'+'ount']=_0x2b80e8,this['dataType']=_0x54e5f8,this['dataTypeNo'+'rmalize']=_0x3c5379,this['asInt']=_0x3f2dd5;}}class Ge extends td{constructor(_0x313fc6,_0x51403f){super(),h(this,'indexBuffe'+'r',[null]),h(this,'vertexBuff'+'er',null),h(this,'primitive',[{'type':0x0,'base':0x0,'baseVertex':0x0,'count':0x0}]),h(this,'skin',null),h(this,'boneAabb',null),h(this,'_aabbVer',-0x8b*0x2c+-0x1e6d*0x1+0x121b*0x3),h(this,'_aabb',new De()),h(this,'_geometryD'+'ata',null),h(this,'_morph',null),h(this,'_storageIn'+'dex',!(0x1461+-0x1e26+0x4e3*0x2)),h(this,'_storageVe'+'rtex',!(0xc9a+0x15bf+-0x2258)),(this['id']=Fw++,w['assert'](_0x313fc6,'Mesh\x20const'+'ructor\x20tak'+'es\x20a\x20Graph'+'icsDevice\x20'+'as\x20a\x20param'+'eter,\x20and\x20'+'it\x20was\x20not'+'\x20provided.'),this['device']=_0x313fc6,this['_storageIn'+'dex']=(_0x51403f==null?void(-0x99b+0x16b3+0x2*-0x68c):_0x51403f['storageInd'+'ex'])||!(-0x2193+0x235d*-0x1+0x25*0x1dd),this['_storageVe'+'rtex']=(_0x51403f==null?void(0xe94+-0x1*0x155a+0x6c6):_0x51403f['storageVer'+'tex'])||!(0x1*-0x116e+0x226e+-0x10ff));}static['fromGeomet'+'ry'](_0x21f527,_0x36eb7b,_0x3c7205={}){const _0x338c97=new Ge(_0x21f527,_0x3c7205),{positions:_0x3f0297,normals:_0x6d15ee,tangents:_0x32cf5a,colors:_0x974f18,uvs:_0x35c789,uvs1:_0x26022b,blendIndices:_0x239b92,blendWeights:_0x103a52,indices:_0x5e268a}=_0x36eb7b;return _0x3f0297&&_0x338c97['setPositio'+'ns'](_0x3f0297),_0x6d15ee&&_0x338c97['setNormals'](_0x6d15ee),_0x32cf5a&&_0x338c97['setVertexS'+'tream'](yi,_0x32cf5a,-0x14a2+0x1*-0x21fb+0x36a1),_0x974f18&&_0x338c97['setColors3'+'2'](_0x974f18),_0x35c789&&_0x338c97['setUvs'](0xe0f+-0x1*-0xd87+0x1*-0x1b96,_0x35c789),_0x26022b&&_0x338c97['setUvs'](-0x1*0x1e4a+0x2*-0xcd5+-0x3bb*-0xf,_0x26022b),_0x239b92&&_0x338c97['setVertexS'+'tream'](us,_0x239b92,-0x919+-0x20c9+0x29e6,_0x239b92['length']/(-0x1954+-0x213+0x1b6b),ia),_0x103a52&&_0x338c97['setVertexS'+'tream'](gi,_0x103a52,0xdeb+0xe87*-0x1+0xa0),_0x5e268a&&_0x338c97['setIndices'](_0x5e268a),_0x338c97['update'](),_0x338c97;}set['morph'](_0x34eeda){_0x34eeda!==this['_morph']&&(this['_morph']&&this['_morph']['decRefCoun'+'t'](),this['_morph']=_0x34eeda,_0x34eeda&&_0x34eeda['incRefCoun'+'t']());}get['morph'](){return this['_morph'];}set['aabb'](_0x1d9869){this['_aabb']=_0x1d9869,this['_aabbVer']++;}get['aabb'](){return this['_aabb'];}['destroy'](){const _0x1d9d5e=this['morph'];_0x1d9d5e&&(this['morph']=null,_0x1d9d5e['refCount']<-0x1ee6+-0x27*0x59+0x163b*0x2&&_0x1d9d5e['destroy']()),this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);for(let _0x5a49f0=0xe7*-0x21+-0x1*0x23b1+0x4178;_0x5a49f0<this['indexBuffe'+'r']['length'];_0x5a49f0++)this['_destroyIn'+'dexBuffer'](_0x5a49f0);this['indexBuffe'+'r']['length']=-0x3*0xb5d+0x3*0x394+0x3*0x7c9,this['_geometryD'+'ata']=null;}['_destroyIn'+'dexBuffer'](_0xb47b3a){this['indexBuffe'+'r'][_0xb47b3a]&&(this['indexBuffe'+'r'][_0xb47b3a]['destroy'](),this['indexBuffe'+'r'][_0xb47b3a]=null);}['_initBoneA'+'abbs'](_0x53501){this['boneAabb']=[],this['boneUsed']=[];let _0x304dc8,_0x1f046a,_0x3c1a7f,_0x213ccc,_0x352d20;const _0x460d8b=[],_0x715920=[],_0xb2a516=this['boneUsed'],_0x38ccbd=this['skin']['boneNames']['length'];let _0x446beb,_0x3b247e,_0x486304;for(let _0x258624=0x1d86+0x1240+-0x5*0x98e;_0x258624<_0x38ccbd;_0x258624++)_0x460d8b[_0x258624]=new D(Number['MAX_VALUE'],Number['MAX_VALUE'],Number['MAX_VALUE']),_0x715920[_0x258624]=new D(-Number['MAX_VALUE'],-Number['MAX_VALUE'],-Number['MAX_VALUE']);const _0x5a17ba=new Ao(this['vertexBuff'+'er']),_0x589924=_0x5a17ba['element'][Pe],_0x13d537=_0x5a17ba['element'][gi],_0x59cdd0=_0x5a17ba['element'][us],_0x49289b=this['vertexBuff'+'er']['numVertice'+'s'];for(let _0x4013f9=0x404*-0x3+0x40a*-0x6+0x24*0x102;_0x4013f9<_0x49289b;_0x4013f9++){for(let _0x1e6dbe=0xe75+0x50b*-0x1+0x4b5*-0x2;_0x1e6dbe<0x9b4+0x2*-0x5ba+-0x2*-0xe2;_0x1e6dbe++)if(_0x13d537['array'][_0x13d537['index']+_0x1e6dbe]>0x1*-0x6b+-0xcd1*0x2+0x1a0d){const _0xa9d87f=_0x59cdd0['array'][_0x59cdd0['index']+_0x1e6dbe];if(_0xb2a516[_0xa9d87f]=!(-0x47*0x13+0xf1*-0x1c+0x1fa1),_0x304dc8=_0x589924['array'][_0x589924['index']],_0x1f046a=_0x589924['array'][_0x589924['index']+(0x1f4c+0x1dbf+0x1a*-0x259)],_0x3c1a7f=_0x589924['array'][_0x589924['index']+(-0x65*-0x4b+0x582+-0x2b3*0xd)],_0x213ccc=_0x715920[_0xa9d87f],_0x352d20=_0x460d8b[_0xa9d87f],_0x352d20['x']>_0x304dc8&&(_0x352d20['x']=_0x304dc8),_0x352d20['y']>_0x1f046a&&(_0x352d20['y']=_0x1f046a),_0x352d20['z']>_0x3c1a7f&&(_0x352d20['z']=_0x3c1a7f),_0x213ccc['x']<_0x304dc8&&(_0x213ccc['x']=_0x304dc8),_0x213ccc['y']<_0x1f046a&&(_0x213ccc['y']=_0x1f046a),_0x213ccc['z']<_0x3c1a7f&&(_0x213ccc['z']=_0x3c1a7f),_0x53501){let _0x11dd00=_0x446beb=_0x304dc8,_0x3f39a9=_0x3b247e=_0x1f046a,_0x1ce2cc=_0x486304=_0x3c1a7f;for(let _0x40461f=0x5cb+-0x265*0x9+0xfc2;_0x40461f<_0x53501['length'];_0x40461f++){const _0x5be2f2=_0x53501[_0x40461f],_0x28681b=_0x5be2f2['deltaPosit'+'ions'][_0x4013f9*(0xea4+0x2da*-0x5+-0x5f)],_0x343faa=_0x5be2f2['deltaPosit'+'ions'][_0x4013f9*(0x4a0+-0x12ab+-0x1*-0xe0e)+(0x1230+0x1*-0x15ff+0x3d0)],_0x438fa7=_0x5be2f2['deltaPosit'+'ions'][_0x4013f9*(0xd1*0x29+-0x1e41+-0x335)+(-0x17*0x123+-0x2432+0xb*0x5ab)];_0x28681b<-0x371+0x497*0x1+-0x126?_0x11dd00+=_0x28681b:_0x446beb+=_0x28681b,_0x343faa<-0x8c*0x16+0x63*0x2e+-0x43*0x16?_0x3f39a9+=_0x343faa:_0x3b247e+=_0x343faa,_0x438fa7<0x1*-0xdef+-0xd5*0x3+0x106e?_0x1ce2cc+=_0x438fa7:_0x486304+=_0x438fa7;}_0x352d20['x']>_0x11dd00&&(_0x352d20['x']=_0x11dd00),_0x352d20['y']>_0x3f39a9&&(_0x352d20['y']=_0x3f39a9),_0x352d20['z']>_0x1ce2cc&&(_0x352d20['z']=_0x1ce2cc),_0x213ccc['x']<_0x446beb&&(_0x213ccc['x']=_0x446beb),_0x213ccc['y']<_0x3b247e&&(_0x213ccc['y']=_0x3b247e),_0x213ccc['z']<_0x486304&&(_0x213ccc['z']=_0x486304);}}_0x5a17ba['next']();}const _0x22b864=this['vertexBuff'+'er']['getFormat']()['elements']['find'](_0x467a5d=>_0x467a5d['name']===Pe);if(_0x22b864&&_0x22b864['normalize']){const _0x55e402=((()=>{switch(_0x22b864['dataType']){case Hh:return _0x14c678=>Math['max'](_0x14c678/(0x867*-0x1+-0x4a*0x15+0x77c*0x2),-(-0x1*-0x2bd+0x8ad+-0xb69));case ia:return _0x1c08fd=>_0x1c08fd/(0x13d*0x1+-0x1cdd+0x1*0x1c9f);case Wh:return _0x5e2d87=>Math['max'](_0x5e2d87/(-0xe6fd+0xd489*-0x1+0x1*0x23b85),-(-0xa8d*-0x1+0x1b66+-0x1*0x25f2));case _l:return _0x4026b9=>_0x4026b9/(0x241*0xe3+-0x16b22+0x6b7e);default:return _0x14740d=>_0x14740d;}})());for(let _0x3e5e84=-0x1*0x20b9+-0xc3b+0x1c*0x19b;_0x3e5e84<_0x38ccbd;_0x3e5e84++)if(_0xb2a516[_0x3e5e84]){const _0x232c95=_0x460d8b[_0x3e5e84],_0x17cfd4=_0x715920[_0x3e5e84];_0x232c95['set'](_0x55e402(_0x232c95['x']),_0x55e402(_0x232c95['y']),_0x55e402(_0x232c95['z'])),_0x17cfd4['set'](_0x55e402(_0x17cfd4['x']),_0x55e402(_0x17cfd4['y']),_0x55e402(_0x17cfd4['z']));}}for(let _0x21d771=0x996+-0x1ca5+0x130f*0x1;_0x21d771<_0x38ccbd;_0x21d771++){const _0x3aa3a6=new De();_0x3aa3a6['setMinMax'](_0x460d8b[_0x21d771],_0x715920[_0x21d771]),this['boneAabb']['push'](_0x3aa3a6);}}['_initGeome'+'tryData'](){this['_geometryD'+'ata']||(this['_geometryD'+'ata']=new oi(),this['vertexBuff'+'er']&&(this['_geometryD'+'ata']['vertexCoun'+'t']=this['vertexBuff'+'er']['numVertice'+'s'],this['_geometryD'+'ata']['maxVertice'+'s']=this['vertexBuff'+'er']['numVertice'+'s']),this['indexBuffe'+'r']['length']>-0x1*-0x1053+-0xcb2+0x1*-0x3a1&&this['indexBuffe'+'r'][-0x1dfc+0x1*-0x1303+0x30ff]&&(this['_geometryD'+'ata']['indexCount']=this['indexBuffe'+'r'][-0x1c7e+-0x296*-0x7+0xa64]['numIndices'],this['_geometryD'+'ata']['maxIndices']=this['indexBuffe'+'r'][0x1*-0x1745+0xea5+0x8a0]['numIndices']));}['clear'](_0x2724d2,_0x482fb9,_0x2d0784=-0x163b+0x1*0x14f5+-0x2*-0xa3,_0x30fe41=-0xe27*-0x1+0x3*0xd3+-0x70*0x26){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['initDefaul'+'ts'](),this['_geometryD'+'ata']['recreate']=!(-0x8db*0x4+-0x1112+-0x347e*-0x1),this['_geometryD'+'ata']['maxVertice'+'s']=_0x2d0784,this['_geometryD'+'ata']['maxIndices']=_0x30fe41,this['_geometryD'+'ata']['verticesUs'+'age']=_0x2724d2?ms:zc,this['_geometryD'+'ata']['indicesUsa'+'ge']=_0x482fb9?ms:zc;}['setVertexS'+'tream'](_0x4f902e,_0x3f48af,_0xc395f6,_0x4a45c6,_0x346ee7=Ve,_0x5efd76=!(-0x130b*-0x1+0x9a*0x1a+-0x22ae),_0x566bce=!(-0x1c9*0xd+-0x13f3+-0x57*-0x7f)){this['_initGeome'+'tryData']();const _0x3d9e4e=_0x4a45c6||_0x3f48af['length']/_0xc395f6;this['_geometryD'+'ata']['_changeVer'+'texCount'](_0x3d9e4e,_0x4f902e),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(-0x11db+0x9*0x97+0xc8c),this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x4f902e]=new Nw(_0x3f48af,_0xc395f6,_0x346ee7,_0x5efd76,_0x566bce);}['getVertexS'+'tream'](_0x53a768,_0x44bb6f){let _0x3ecbec=-0x14cf+-0x466+0x1935,_0x12476c=!(-0x12ee*0x1+-0x37e+0x166d*0x1);if(this['_geometryD'+'ata']){const _0x2c0938=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x53a768];_0x2c0938&&(_0x12476c=!(-0x545+-0x14fb+0x1a40),_0x3ecbec=this['_geometryD'+'ata']['vertexCoun'+'t'],ArrayBuffer['isView'](_0x44bb6f)?_0x44bb6f['set'](_0x2c0938['data']):(_0x44bb6f['length']=0xc*0xa7+0x17+-0x7eb,_0x44bb6f['push'](_0x2c0938['data'])));}return _0x12476c||this['vertexBuff'+'er']&&(_0x3ecbec=new Ao(this['vertexBuff'+'er'])['readData'](_0x53a768,_0x44bb6f)),_0x3ecbec;}['setPositio'+'ns'](_0x14432a,_0x434e90=oi['DEFAULT_CO'+'MPONENTS_P'+'OSITION'],_0x347bea){this['setVertexS'+'tream'](Pe,_0x14432a,_0x434e90,_0x347bea,Ve,!(-0x22*-0xa9+0x1104+-0x25*0x111));}['setNormals'](_0x42ea68,_0xd8c632=oi['DEFAULT_CO'+'MPONENTS_N'+'ORMAL'],_0x173d5f){this['setVertexS'+'tream'](gs,_0x42ea68,_0xd8c632,_0x173d5f,Ve,!(-0x1767+-0x1c38+-0x1c*-0x1d8));}['setUvs'](_0x58b32a,_0x32ec00,_0x489d1b=oi['DEFAULT_CO'+'MPONENTS_U'+'V'],_0x3daf39){this['setVertexS'+'tream'](fm+_0x58b32a,_0x32ec00,_0x489d1b,_0x3daf39,Ve,!(-0x949*0x2+-0x1bfb+-0x1747*-0x2));}['setColors'](_0x16897e,_0x1f2f65=oi['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x39a2aa){this['setVertexS'+'tream'](Wt,_0x16897e,_0x1f2f65,_0x39a2aa,Ve,!(-0x2063+0x8*-0x373+0x3bfc));}['setColors3'+'2'](_0x4aa544,_0x4d334b){this['setVertexS'+'tream'](Wt,_0x4aa544,oi['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x4d334b,ia,!(0x20ff+-0xac5+-0x163a));}['setIndices'](_0x259796,_0x43c539){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(-0x9b6+0x2267*0x1+-0x18b1),this['_geometryD'+'ata']['indices']=_0x259796,this['_geometryD'+'ata']['indexCount']=_0x43c539||_0x259796['length'];}['getPositio'+'ns'](_0x3f758e){return this['getVertexS'+'tream'](Pe,_0x3f758e);}['getNormals'](_0x3c6328){return this['getVertexS'+'tream'](gs,_0x3c6328);}['getUvs'](_0x17a375,_0x2014f8){return this['getVertexS'+'tream'](fm+_0x17a375,_0x2014f8);}['getColors'](_0x2451cc){return this['getVertexS'+'tream'](Wt,_0x2451cc);}['getIndices'](_0x4f525b){let _0x11d160=0xfd4+0x235d+-0x3331;if(this['_geometryD'+'ata']&&this['_geometryD'+'ata']['indices']){const _0x3b76ef=this['_geometryD'+'ata']['indices'];if(_0x11d160=this['_geometryD'+'ata']['indexCount'],ArrayBuffer['isView'](_0x4f525b))_0x4f525b['set'](_0x3b76ef);else{_0x4f525b['length']=-0xbac+-0x2185+0x2d31;for(let _0x436111=-0x1f78+0x5a4*0x1+0x19d4,_0x314c14=_0x3b76ef['length'];_0x436111<_0x314c14;_0x436111++)_0x4f525b['push'](_0x3b76ef[_0x436111]);}}else this['indexBuffe'+'r']['length']>-0x750+0x22c3+-0x1b73&&this['indexBuffe'+'r'][-0x6a+-0x5*0x6d+0x7*0x5d]&&(_0x11d160=this['indexBuffe'+'r'][-0x15b1+0x200e+-0xa5d]['readData'](_0x4f525b));return _0x11d160;}['update'](_0x74dd63=qs,_0x56b6f7=!(-0x26a9*0x1+0x9*0x367+0x80a)){if(this['_geometryD'+'ata']){if(_0x56b6f7){const _0x11c02f=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][Pe];_0x11c02f&&_0x11c02f['componentC'+'ount']===0x163*-0x14+0xb15*-0x1+0x11c*0x23&&(this['_aabb']['compute'](_0x11c02f['data'],this['_geometryD'+'ata']['vertexCoun'+'t']),this['_aabbVer']++);}let _0x5c7497=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['vertexCoun'+'t']>this['_geometryD'+'ata']['maxVertice'+'s']&&(_0x5c7497=!(0xfd*0x5+-0x733+0x242),this['_geometryD'+'ata']['maxVertice'+'s']=this['_geometryD'+'ata']['vertexCoun'+'t']),_0x5c7497&&this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);let _0x4fce58=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['indexCount']>this['_geometryD'+'ata']['maxIndices']&&(_0x4fce58=!(0x24b5*-0x1+0x6b6+-0x1*-0x1dff),this['_geometryD'+'ata']['maxIndices']=this['_geometryD'+'ata']['indexCount']),_0x4fce58&&this['indexBuffe'+'r']['length']>0x89*-0x5+0x1*0x2485+-0x10ec*0x2&&this['indexBuffe'+'r'][-0x229*-0x12+-0xaf9+0x5*-0x595]&&(this['indexBuffe'+'r'][-0x147e+-0x1*0x1bbe+0x303c]['destroy'](),this['indexBuffe'+'r'][-0x1*0x193b+0x87+-0x83c*-0x3]=null),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&this['_updateVer'+'texBuffer'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&this['_updateInd'+'exBuffer'](),this['primitive'][0x92b+-0x8*0x25c+0x9b5]['type']=_0x74dd63,this['indexBuffe'+'r']['length']>0x14*0x1eb+-0x1*0x40d+-0x224f&&this['indexBuffe'+'r'][-0x2d7*0x8+-0x107e+-0x1de*-0x15]?this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&(this['primitive'][0x1d85+0x63*0x49+0x1ce*-0x20]['count']=this['_geometryD'+'ata']['indexCount'],this['primitive'][0x179*-0x4+-0x2465+0x2a49]['indexed']=!(-0x1*-0x1baf+0x67*0xc+0xcb*-0x29)):this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&(this['primitive'][-0x5*0x34f+-0x18a*-0x9+0x2b1]['count']=this['_geometryD'+'ata']['vertexCoun'+'t'],this['primitive'][-0x13*0x118+-0x1*-0x17ab+-0x2e3]['indexed']=!(0x1dcb+-0x21a2+0x3d8)),this['_geometryD'+'ata']['vertexCoun'+'t']=-0x7*0x5+-0x1*0x23a7+0x23ca,this['_geometryD'+'ata']['indexCount']=0xff0+-0xc*-0x97+-0x1704,this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(-0x3*-0xa63+-0x1*-0x1a43+0x396b*-0x1),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(-0x2233+-0xa*0x1ec+0x356c),this['_geometryD'+'ata']['recreate']=!(0x1793+0x74a*-0x3+-0x1b4),this['updateRend'+'erStates']();}}['_buildVert'+'exFormat'](_0x52657d){const _0x18fd2d=[];for(const _0xf27ff in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x36fad7=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0xf27ff];_0x18fd2d['push']({'semantic':_0xf27ff,'components':_0x36fad7['componentC'+'ount'],'type':_0x36fad7['dataType'],'normalize':_0x36fad7['dataTypeNo'+'rmalize'],'asInt':_0x36fad7['asInt']});}return new kt(this['device'],_0x18fd2d,_0x52657d);}['_updateVer'+'texBuffer'](){if(!this['vertexBuff'+'er']){const _0xa213f2=this['_geometryD'+'ata']['maxVertice'+'s'],_0x2cdfd5=this['_buildVert'+'exFormat'](_0xa213f2);this['vertexBuff'+'er']=new Ds(this['device'],_0x2cdfd5,_0xa213f2,{'usage':this['_geometryD'+'ata']['verticesUs'+'age'],'storage':this['_storageVe'+'rtex']});}const _0x4c0afb=new Ao(this['vertexBuff'+'er']),_0x4cf90a=this['_geometryD'+'ata']['vertexCoun'+'t'];for(const _0x443622 in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x2fc1d3=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x443622];_0x4c0afb['writeData'](_0x443622,_0x2fc1d3['data'],_0x4cf90a),delete this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x443622];}_0x4c0afb['end']();}['_updateInd'+'exBuffer'](){if(this['indexBuffe'+'r']['length']<=0x255*-0x7+-0x1b*-0x3d+0x9e4||!this['indexBuffe'+'r'][0x18f5+0x1cec+-0x425*0xd]){const _0x469d6c=this['_geometryD'+'ata']['maxVertice'+'s'],_0x55a850=_0x469d6c>0x56d6+0xed*0x153+-0x90ae||_0x469d6c===0xbda*-0x1+-0x2198+0x2d72?yr:ji,_0x221034=this['_storageIn'+'dex']?{'storage':!(-0x1a4b+-0x255b+0x1fd3*0x2)}:void(0x906+-0x1180+-0x7*-0x136);this['indexBuffe'+'r'][-0x7eb+0x24de+0x1cf3*-0x1]=new xr(this['device'],_0x55a850,this['_geometryD'+'ata']['maxIndices'],this['_geometryD'+'ata']['indicesUsa'+'ge'],void(-0x1b9d+-0xdeb+-0x2*-0x14c4),_0x221034);}const _0x21391f=this['_geometryD'+'ata']['indices'];_0x21391f&&(this['indexBuffe'+'r'][-0x849+0xa21+0x8*-0x3b]['writeData'](_0x21391f,this['_geometryD'+'ata']['indexCount']),this['_geometryD'+'ata']['indices']=null);}['prepareRen'+'derState'](_0xa88b3e){_0xa88b3e===Vr?this['generateWi'+'reframe']():_0xa88b3e===Bl&&(this['primitive'][Bl]={'type':Vh,'base':0x0,'baseVertex':0x0,'count':this['vertexBuff'+'er']?this['vertexBuff'+'er']['numVertice'+'s']:-0x1fcf+0x15cb+0x1*0xa04,'indexed':!(0x18d5+-0x2*0xc21+0x92*-0x1)});}['updateRend'+'erStates'](){this['primitive'][Bl]&&this['prepareRen'+'derState'](Bl),this['primitive'][Vr]&&this['prepareRen'+'derState'](Vr);}['generateWi'+'reframe'](){this['_destroyIn'+'dexBuffer'](Vr);const _0x166830=this['vertexBuff'+'er']['numVertice'+'s'],_0x2a4cbe=[];let _0x205659;if(this['indexBuffe'+'r']['length']>0x21*0x15+-0x2ae*0xb+0x1ac5&&this['indexBuffe'+'r'][0xd8e+0x8f4*0x2+-0x2*0xfbb]){const _0x1cb15a=[[0xcdb+-0xc2+0xa3*-0x13,0xa4*-0x16+0x25*-0x99+0x67*0x5a],[0x1e7*-0x9+0x99d*0x3+-0xbb7,-0x1*-0x12db+-0x1*-0x22c3+0x2*-0x1ace],[0x24*-0x94+0x20c5*0x1+0x7*-0x1b5,0x1c6a+0x19*-0x11c+0x3*-0x3a]],_0x57255f=this['primitive'][nn]['base'],_0x4381a2=this['primitive'][nn]['count'],_0x1984dc=this['primitive'][nn]['baseVertex']||0x3*-0x64b+-0x1c5*0x1+-0x3*-0x6e2,_0x3f75d4=this['indexBuffe'+'r'][nn],_0x57ad20=new Kc[_0x3f75d4['format']](_0x3f75d4['storage']),_0x36db88=new Set();for(let _0x4a14b1=_0x57255f;_0x4a14b1<_0x57255f+_0x4381a2;_0x4a14b1+=-0x4af+-0xaad+0x1*0xf5f)for(let _0x3fd09f=-0x2363*0x1+-0x2f+0x11c9*0x2;_0x3fd09f<-0x1ddd*-0x1+0x5*0x1d2+-0xcfc*0x3;_0x3fd09f++){const _0x37ad28=_0x57ad20[_0x4a14b1+_0x1cb15a[_0x3fd09f][-0x2*0xd10+-0x13d*0x15+0x3421]]+_0x1984dc,_0x17f4b6=_0x57ad20[_0x4a14b1+_0x1cb15a[_0x3fd09f][-0x26c0+-0x799+0x2e5a]]+_0x1984dc,_0x5577d2=_0x37ad28>_0x17f4b6?_0x17f4b6*_0x166830+_0x37ad28:_0x37ad28*_0x166830+_0x17f4b6;_0x36db88['has'](_0x5577d2)||(_0x36db88['add'](_0x5577d2),_0x2a4cbe['push'](_0x37ad28,_0x17f4b6));}_0x205659=_0x3f75d4['format'];}else{for(let _0x3a3daa=0xfb7+-0x969+-0x64e;_0x3a3daa<_0x166830;_0x3a3daa+=-0x3b5*-0x3+0x1d4e+0xe*-0x2e3)_0x2a4cbe['push'](_0x3a3daa,_0x3a3daa+(-0x3*0xbc4+-0x1*-0x26dd+0x390*-0x1),_0x3a3daa+(-0x481*0x1+0x1177*-0x1+0x3*0x753),_0x3a3daa+(0x26c9*-0x1+-0x1*-0x379+0x2352),_0x3a3daa+(0x107c+0x5*-0x4a6+-0x1*-0x6c4),_0x3a3daa);_0x205659=_0x2a4cbe['length']>0x12db5*0x1+0x2*0x69f8+-0x101a6?yr:ji;}const _0x1c9617=new xr(this['vertexBuff'+'er']['device'],_0x205659,_0x2a4cbe['length']);new Kc[_0x1c9617['format']](_0x1c9617['storage'])['set'](_0x2a4cbe),_0x1c9617['unlock'](),this['primitive'][Vr]={'type':Gh,'base':0x0,'baseVertex':0x0,'count':_0x2a4cbe['length'],'indexed':!(0x1729+-0xdab+0xf*-0xa2)},this['indexBuffe'+'r'][Vr]=_0x1c9617;}}const $m=new te(),xd=new D(),Xm=new le(),Td=new le(),qm=new D(),jm=new D(),kw=new te(),Uw=new le(),rs=new D(),Zn=new te(),as=new le(),Aa=new le(),Ym=new te(),wd=new D(),Vl=new D();function Km(_0x234a94,_0x257a37){return _0x234a94 instanceof Function?_0x234a94:_0x28ac06=>{let _0x263ac7=_0x28ac06[_0x234a94];return _0x263ac7 instanceof Function&&(_0x263ac7=_0x263ac7()),_0x263ac7===_0x257a37;};}function Ny(_0x411772,_0x3b15e9){if(_0x3b15e9(_0x411772))return _0x411772;const _0x452601=_0x411772['_children'],_0x6459a3=_0x452601['length'];for(let _0x42fc00=0x13e7+0x15b0+0x27*-0x111;_0x42fc00<_0x6459a3;++_0x42fc00){const _0x1c9b89=Ny(_0x452601[_0x42fc00],_0x3b15e9);if(_0x1c9b89)return _0x1c9b89;}return null;}class Ie extends me{constructor(_0x456bfa='Untitled'){super(),h(this,'name'),h(this,'tags',new To(this)),h(this,'localPosit'+'ion',new D()),h(this,'localRotat'+'ion',new le()),h(this,'localScale',new D(0x17a8+0x1155+-0x28fc,-0x1*-0x26f5+-0x1a1b*-0x1+-0x410f,0x2*0x466+0x2669+-0x2f34)),h(this,'localEuler'+'Angles',new D()),h(this,'position',new D()),h(this,'rotation',new le()),h(this,'eulerAngle'+'s',new D()),h(this,'_scale',null),h(this,'localTrans'+'form',new te()),h(this,'_dirtyLoca'+'l',!(0x2*0x272+0x17ad+-0x1c90)),h(this,'_aabbVer',0x1*-0xff2+0x1*-0x13a9+0x239b),h(this,'_frozen',!(-0x14*-0x185+-0xddf+0x1c*-0x97)),h(this,'worldTrans'+'form',new te()),h(this,'_dirtyWorl'+'d',!(-0x729*-0x3+0x241b+-0x3995)),h(this,'_worldScal'+'eSign',0x1*-0x15b2+0x1203+-0x1*-0x3af),h(this,'_normalMat'+'rix',new _i()),h(this,'_dirtyNorm'+'al',!(-0x17*0x1a3+-0xc*0x49+-0x2911*-0x1)),h(this,'_right',null),h(this,'_up',null),h(this,'_forward',null),h(this,'_parent',null),h(this,'_children',[]),h(this,'_graphDept'+'h',-0x1*-0x34f+0x18e8+0xe9*-0x1f),h(this,'_enabled',!(-0x542+0x24f6+-0x1fb4*0x1)),h(this,'_enabledIn'+'Hierarchy',!(-0x603+-0x589+0x1*0xb8d)),h(this,'scaleCompe'+'nsation',!(0x7*0x4c6+-0xac9+-0x16a0)),this['name']=_0x456bfa;}get['right'](){return this['_right']||(this['_right']=new D()),this['getWorldTr'+'ansform']()['getX'](this['_right'])['normalize']();}get['up'](){return this['_up']||(this['_up']=new D()),this['getWorldTr'+'ansform']()['getY'](this['_up'])['normalize']();}get['forward'](){return this['_forward']||(this['_forward']=new D()),this['getWorldTr'+'ansform']()['getZ'](this['_forward'])['normalize']()['mulScalar'](-(0x506+-0x49b+0x6a*-0x1));}get['normalMatr'+'ix'](){const _0x5a2d9f=this['_normalMat'+'rix'];return this['_dirtyNorm'+'al']&&(_0x5a2d9f['invertMat4'](this['getWorldTr'+'ansform']())['transpose'](),this['_dirtyNorm'+'al']=!(0x217b+-0x1*-0x1401+0x1*-0x357b)),_0x5a2d9f;}set['enabled'](_0x40429a){var _0x457977;this['_enabled']!==_0x40429a&&(this['_enabled']=_0x40429a,(_0x40429a&&((_0x457977=this['_parent'])!=null&&_0x457977['enabled'])||!_0x40429a)&&this['_notifyHie'+'rarchyStat'+'eChanged'](this,_0x40429a));}get['enabled'](){return this['_enabled']&&this['_enabledIn'+'Hierarchy'];}get['parent'](){return this['_parent'];}get['path'](){let _0x21e04c=this['_parent'];if(!_0x21e04c)return'';let _0x31b016=this['name'];for(;_0x21e04c&&_0x21e04c['_parent'];)_0x31b016=_0x21e04c['name']+'/'+_0x31b016,_0x21e04c=_0x21e04c['_parent'];return _0x31b016;}get['root'](){let _0x785499=this;for(;_0x785499['_parent'];)_0x785499=_0x785499['_parent'];return _0x785499;}get['children'](){return this['_children'];}get['graphDepth'](){return this['_graphDept'+'h'];}['_notifyHie'+'rarchyStat'+'eChanged'](_0x1604f4,_0x5b3151){_0x1604f4['_onHierarc'+'hyStateCha'+'nged'](_0x5b3151);const _0x8c63ec=_0x1604f4['_children'];for(let _0x5d2fca=-0x1*0xd13+0x2475+0x1*-0x1762,_0x5b7098=_0x8c63ec['length'];_0x5d2fca<_0x5b7098;_0x5d2fca++)_0x8c63ec[_0x5d2fca]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x8c63ec[_0x5d2fca],_0x5b3151);}['_onHierarc'+'hyStateCha'+'nged'](_0x1a6586){this['_enabledIn'+'Hierarchy']=_0x1a6586,_0x1a6586&&!this['_frozen']&&this['_unfreezeP'+'arentToRoo'+'t']();}['_cloneInte'+'rnal'](_0x1bcd09){_0x1bcd09['name']=this['name'];const _0x1b61c2=this['tags']['_list'];_0x1bcd09['tags']['clear']();for(let _0x550d28=0x14c5+-0x2*0x55b+-0xa0f;_0x550d28<_0x1b61c2['length'];_0x550d28++)_0x1bcd09['tags']['add'](_0x1b61c2[_0x550d28]);_0x1bcd09['localPosit'+'ion']['copy'](this['localPosit'+'ion']),_0x1bcd09['localRotat'+'ion']['copy'](this['localRotat'+'ion']),_0x1bcd09['localScale']['copy'](this['localScale']),_0x1bcd09['localEuler'+'Angles']['copy'](this['localEuler'+'Angles']),_0x1bcd09['position']['copy'](this['position']),_0x1bcd09['rotation']['copy'](this['rotation']),_0x1bcd09['eulerAngle'+'s']['copy'](this['eulerAngle'+'s']),_0x1bcd09['localTrans'+'form']['copy'](this['localTrans'+'form']),_0x1bcd09['_dirtyLoca'+'l']=this['_dirtyLoca'+'l'],_0x1bcd09['worldTrans'+'form']['copy'](this['worldTrans'+'form']),_0x1bcd09['_dirtyWorl'+'d']=this['_dirtyWorl'+'d'],_0x1bcd09['_dirtyNorm'+'al']=this['_dirtyNorm'+'al'],_0x1bcd09['_aabbVer']=this['_aabbVer']+(-0x1*0x1f91+0x27*0x41+0x3*0x739),_0x1bcd09['_enabled']=this['_enabled'],_0x1bcd09['scaleCompe'+'nsation']=this['scaleCompe'+'nsation'],_0x1bcd09['_enabledIn'+'Hierarchy']=!(0x1*0x2272+-0x1*0x16f+-0x2102);}['clone'](){const _0xf7eae=new this['constructo'+'r']();return this['_cloneInte'+'rnal'](_0xf7eae),_0xf7eae;}['copy'](_0x2bdb32){return _0x2bdb32['_cloneInte'+'rnal'](this),this;}['destroy'](){this['remove']();const _0x1dec20=this['_children'];for(;_0x1dec20['length'];){const _0x4c1e11=_0x1dec20['pop']();_0x4c1e11['_parent']=null,_0x4c1e11['destroy']();}this['fire']('destroy',this),this['off']();}['find'](_0x4142b4,_0x5910bd){const _0x405c0a=[],_0x2352e1=Km(_0x4142b4,_0x5910bd);return this['forEach'](_0x4711d5=>{_0x2352e1(_0x4711d5)&&_0x405c0a['push'](_0x4711d5);}),_0x405c0a;}['findOne'](_0x58f0d1,_0x4414f4){const _0xa4f141=Km(_0x58f0d1,_0x4414f4);return Ny(this,_0xa4f141);}['findByTag'](..._0x591b04){const _0x2e3752=[],_0x5477c3=(_0x368eb8,_0x2c33b4)=>{_0x2c33b4&&_0x368eb8['tags']['has'](..._0x591b04)&&_0x2e3752['push'](_0x368eb8);for(let _0x20432f=0x4e*-0x13+0x1*0x1f67+-0x199d;_0x20432f<_0x368eb8['_children']['length'];_0x20432f++)_0x5477c3(_0x368eb8['_children'][_0x20432f],!(-0x23aa+-0x67a*0x2+-0x6f2*-0x7));};return _0x5477c3(this,!(0x55*-0x1+0x1195*0x2+-0x22d4)),_0x2e3752;}['findByName'](_0x1d6633){return this['findOne']('name',_0x1d6633);}['findByPath'](_0x21d2ee){const _0x369c00=Array['isArray'](_0x21d2ee)?_0x21d2ee:_0x21d2ee['split']('/');let _0x664339=this;for(let _0xef2f01=0x36f+0x2*0x132+-0x5d3,_0x17a163=_0x369c00['length'];_0xef2f01<_0x17a163;++_0xef2f01)if(_0x664339=_0x664339['children']['find'](_0xcde943=>_0xcde943['name']===_0x369c00[_0xef2f01]),!_0x664339)return null;return _0x664339;}['forEach'](_0x378d96,_0xd973c7){_0x378d96['call'](_0xd973c7,this);const _0x5bb345=this['_children'],_0x2274a9=_0x5bb345['length'];for(let _0x29c970=-0x1c27+0x1183*-0x1+0x2daa;_0x29c970<_0x2274a9;++_0x29c970)_0x5bb345[_0x29c970]['forEach'](_0x378d96,_0xd973c7);}['isDescenda'+'ntOf'](_0x224ea8){let _0x5163bc=this['_parent'];for(;_0x5163bc;){if(_0x5163bc===_0x224ea8)return!(0x35*0xb5+0x1ff6+0x9*-0x7b7);_0x5163bc=_0x5163bc['_parent'];}return!(0x19a1+0x6d8+-0x2078);}['isAncestor'+'Of'](_0x2c8cf4){return _0x2c8cf4['isDescenda'+'ntOf'](this);}['getEulerAn'+'gles'](){return this['getWorldTr'+'ansform']()['getEulerAn'+'gles'](this['eulerAngle'+'s']),this['eulerAngle'+'s'];}['getLocalEu'+'lerAngles'](){return this['localRotat'+'ion']['getEulerAn'+'gles'](this['localEuler'+'Angles']),this['localEuler'+'Angles'];}['getLocalPo'+'sition'](){return this['localPosit'+'ion'];}['getLocalRo'+'tation'](){return this['localRotat'+'ion'];}['getLocalSc'+'ale'](){return this['localScale'];}['getLocalTr'+'ansform'](){return this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(0x1fbd+0x1a06+-0x39c2)),this['localTrans'+'form'];}['getPositio'+'n'](){return this['getWorldTr'+'ansform']()['getTransla'+'tion'](this['position']),this['position'];}['getRotatio'+'n'](){return this['rotation']['setFromMat'+'4'](this['getWorldTr'+'ansform']()),this['rotation'];}['getScale'](){return this['_scale']||(this['_scale']=new D()),this['getWorldTr'+'ansform']()['getScale'](this['_scale']);}['getWorldTr'+'ansform'](){return!this['_dirtyLoca'+'l']&&!this['_dirtyWorl'+'d']?this['worldTrans'+'form']:(this['_parent']&&this['_parent']['getWorldTr'+'ansform'](),this['_sync'](),this['worldTrans'+'form']);}get['worldScale'+'Sign'](){return this['_worldScal'+'eSign']===-0x1688+0x1f3*-0xd+-0x5*-0x993&&(this['_worldScal'+'eSign']=this['getWorldTr'+'ansform']()['scaleSign']),this['_worldScal'+'eSign'];}['remove'](){var _0x260436;(_0x260436=this['_parent'])==null||_0x260436['removeChil'+'d'](this);}['reparent'](_0x2343be,_0x577235){this['remove'](),_0x2343be&&(_0x577235>=-0x12fc+0x567*-0x2+0x1dca?_0x2343be['insertChil'+'d'](this,_0x577235):_0x2343be['addChild'](this));}['setLocalEu'+'lerAngles'](_0x2bf1e6,_0xfe0f15,_0x3cc462){this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x2bf1e6,_0xfe0f15,_0x3cc462),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalPo'+'sition'](_0x524a08,_0xe2cadb,_0x2deb9e){_0x524a08 instanceof D?this['localPosit'+'ion']['copy'](_0x524a08):this['localPosit'+'ion']['set'](_0x524a08,_0xe2cadb,_0x2deb9e),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalRo'+'tation'](_0x46ddbe,_0x2d3933,_0x39418f,_0x5c99fe){_0x46ddbe instanceof le?this['localRotat'+'ion']['copy'](_0x46ddbe):this['localRotat'+'ion']['set'](_0x46ddbe,_0x2d3933,_0x39418f,_0x5c99fe),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalSc'+'ale'](_0xb7cbdc,_0x2c4417,_0x199f1c){_0xb7cbdc instanceof D?this['localScale']['copy'](_0xb7cbdc):this['localScale']['set'](_0xb7cbdc,_0x2c4417,_0x199f1c),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_dirtifyLo'+'cal'](){this['_dirtyLoca'+'l']||(this['_dirtyLoca'+'l']=!(0xd52+-0x2*0x33+-0xcec),this['_dirtyWorl'+'d']||this['_dirtifyWo'+'rld']());}['_unfreezeP'+'arentToRoo'+'t'](){let _0xcc316e=this['_parent'];for(;_0xcc316e;)_0xcc316e['_frozen']=!(-0x11c6*-0x1+0x1*-0x2656+0x5*0x41d),_0xcc316e=_0xcc316e['_parent'];}['_dirtifyWo'+'rld'](){this['_dirtyWorl'+'d']||this['_unfreezeP'+'arentToRoo'+'t'](),this['_dirtifyWo'+'rldInterna'+'l']();}['_dirtifyWo'+'rldInterna'+'l'](){if(!this['_dirtyWorl'+'d']){this['_frozen']=!(0x598+0x1*-0x1eaf+0x92*0x2c),this['_dirtyWorl'+'d']=!(-0x16fd+0x944+0xdb9);for(let _0x459be2=-0x936+0x18b*-0x3+0xdd7;_0x459be2<this['_children']['length'];_0x459be2++)this['_children'][_0x459be2]['_dirtyWorl'+'d']||this['_children'][_0x459be2]['_dirtifyWo'+'rldInterna'+'l']();}this['_dirtyNorm'+'al']=!(0x1dd3+0x7a5+-0x2578),this['_worldScal'+'eSign']=-0x1*-0x25a7+0x6b*-0x2f+0x39a*-0x5,this['_aabbVer']++;}['setPositio'+'n'](_0x177740,_0x222af2,_0x6d2b5e){_0x177740 instanceof D?rs['copy'](_0x177740):rs['set'](_0x177740,_0x222af2,_0x6d2b5e),this['_parent']===null?this['localPosit'+'ion']['copy'](rs):(Zn['copy'](this['_parent']['getWorldTr'+'ansform']())['invert'](),Zn['transformP'+'oint'](rs,this['localPosit'+'ion'])),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setRotatio'+'n'](_0x56eb33,_0x459227,_0x27e800,_0x55722e){if(_0x56eb33 instanceof le?as['copy'](_0x56eb33):as['set'](_0x56eb33,_0x459227,_0x27e800,_0x55722e),this['_parent']===null)this['localRotat'+'ion']['copy'](as);else{const _0x3dbfd9=this['_parent']['getRotatio'+'n']();Aa['copy'](_0x3dbfd9)['invert'](),this['localRotat'+'ion']['copy'](Aa)['mul'](as);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setPositio'+'nAndRotati'+'on'](_0xa92821,_0x46499b){if(this['_parent']===null)this['localPosit'+'ion']['copy'](_0xa92821),this['localRotat'+'ion']['copy'](_0x46499b);else{const _0x3576f3=this['_parent']['getWorldTr'+'ansform']();Zn['copy'](_0x3576f3)['invert'](),Zn['transformP'+'oint'](_0xa92821,this['localPosit'+'ion']),this['localRotat'+'ion']['setFromMat'+'4'](Zn)['mul'](_0x46499b);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setEulerAn'+'gles'](_0x2d4481,_0x4ef02d,_0x23e25e){if(this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x2d4481,_0x4ef02d,_0x23e25e),this['_parent']!==null){const _0x5ba23a=this['_parent']['getRotatio'+'n']();Aa['copy'](_0x5ba23a)['invert'](),this['localRotat'+'ion']['mul2'](Aa,this['localRotat'+'ion']);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['addChild'](_0x47b53f){this['_prepareIn'+'sertChild'](_0x47b53f),this['_children']['push'](_0x47b53f),this['_onInsertC'+'hild'](_0x47b53f);}['addChildAn'+'dSaveTrans'+'form'](_0x20c948){const _0x406d92=_0x20c948['getPositio'+'n'](),_0x1135f6=_0x20c948['getRotatio'+'n']();this['_prepareIn'+'sertChild'](_0x20c948),_0x20c948['setPositio'+'n'](kw['copy'](this['worldTrans'+'form'])['invert']()['transformP'+'oint'](_0x406d92)),_0x20c948['setRotatio'+'n'](Uw['copy'](this['getRotatio'+'n']())['invert']()['mul'](_0x1135f6)),this['_children']['push'](_0x20c948),this['_onInsertC'+'hild'](_0x20c948);}['insertChil'+'d'](_0x3be383,_0xf358d7){this['_prepareIn'+'sertChild'](_0x3be383),this['_children']['splice'](_0xf358d7,0xc9*0x2b+0x1d84+-0x3f47,_0x3be383),this['_onInsertC'+'hild'](_0x3be383);}['_prepareIn'+'sertChild'](_0x559eba){_0x559eba['remove'](),w['assert'](_0x559eba!==this,'GraphNode\x20'+(_0x559eba==null?void(-0xf34+0x2238+0x1*-0x1304):_0x559eba['name'])+('\x20cannot\x20be'+'\x20a\x20child\x20o'+'f\x20itself')),w['assert'](!this['isDescenda'+'ntOf'](_0x559eba),'GraphNode\x20'+(_0x559eba==null?void(-0xc33+-0xac3+0x16f6):_0x559eba['name'])+('\x20cannot\x20ad'+'d\x20an\x20ances'+'tor\x20as\x20a\x20c'+'hild'));}['_fireOnHie'+'rarchy'](_0x146bea,_0x19394a,_0x126158){this['fire'](_0x146bea,_0x126158);for(let _0x5e9fe2=0x15b+-0x1e93*-0x1+-0x1fee;_0x5e9fe2<this['_children']['length'];_0x5e9fe2++)this['_children'][_0x5e9fe2]['_fireOnHie'+'rarchy'](_0x19394a,_0x19394a,_0x126158);}['_onInsertC'+'hild'](_0x307b94){_0x307b94['_parent']=this;const _0x4c29e0=_0x307b94['_enabled']&&this['enabled'];_0x307b94['_enabledIn'+'Hierarchy']!==_0x4c29e0&&(_0x307b94['_enabledIn'+'Hierarchy']=_0x4c29e0,_0x307b94['_notifyHie'+'rarchyStat'+'eChanged'](_0x307b94,_0x4c29e0)),_0x307b94['_updateGra'+'phDepth'](),_0x307b94['_dirtifyWo'+'rld'](),this['_frozen']&&_0x307b94['_unfreezeP'+'arentToRoo'+'t'](),_0x307b94['_fireOnHie'+'rarchy']('insert','inserthier'+'archy',this),this['fire']&&this['fire']('childinser'+'t',_0x307b94);}['_updateGra'+'phDepth'](){this['_graphDept'+'h']=this['_parent']?this['_parent']['_graphDept'+'h']+(0x2c*0xcf+0x1fc*0x11+-0x454f):-0xeae+-0x1a87*-0x1+-0xbd9*0x1;for(let _0x20d4d8=-0x698*-0x2+-0x12dd+0x5ad,_0x4d9bf0=this['_children']['length'];_0x20d4d8<_0x4d9bf0;_0x20d4d8++)this['_children'][_0x20d4d8]['_updateGra'+'phDepth']();}['removeChil'+'d'](_0x47713f){const _0x107c4d=this['_children']['indexOf'](_0x47713f);_0x107c4d!==-(-0x1328*-0x1+0x1*-0x24af+-0x44*-0x42)&&(this['_children']['splice'](_0x107c4d,0x4*-0x564+-0x2278+0x3809*0x1),_0x47713f['_parent']=null,_0x47713f['_fireOnHie'+'rarchy']('remove','removehier'+'archy',this),this['fire']('childremov'+'e',_0x47713f));}['_sync'](){if(this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(0x1*-0xfad+-0x5*-0x567+-0xb55)),this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['scaleCompe'+'nsation']){let _0x5a3535;const _0x36c4e0=this['_parent'];let _0x35c82a=this['localScale'],_0x142741=_0x36c4e0;if(_0x142741){for(;_0x142741&&_0x142741['scaleCompe'+'nsation'];)_0x142741=_0x142741['_parent'];_0x142741&&(_0x142741=_0x142741['_parent'],_0x142741&&(_0x5a3535=_0x142741['worldTrans'+'form']['getScale'](),qm['mul2'](_0x5a3535,this['localScale']),_0x35c82a=qm));}Td['setFromMat'+'4'](_0x36c4e0['worldTrans'+'form']),Xm['mul2'](Td,this['localRotat'+'ion']);let _0x4d307f=_0x36c4e0['worldTrans'+'form'];_0x36c4e0['scaleCompe'+'nsation']&&(jm['mul2'](_0x5a3535,_0x36c4e0['getLocalSc'+'ale']()),$m['setTRS'](_0x36c4e0['worldTrans'+'form']['getTransla'+'tion'](xd),Td,jm),_0x4d307f=$m),_0x4d307f['transformP'+'oint'](this['localPosit'+'ion'],xd),this['worldTrans'+'form']['setTRS'](xd,Xm,_0x35c82a);}else this['worldTrans'+'form']['mulAffine2'](this['_parent']['worldTrans'+'form'],this['localTrans'+'form']);}this['_dirtyWorl'+'d']=!(-0x1a4f*-0x1+-0x150b+-0x543);}}['syncHierar'+'chy'](){if(!this['_enabled']||this['_frozen'])return;this['_frozen']=!(-0x13*-0x199+-0x7d*-0x32+0x7*-0x7d3),(this['_dirtyLoca'+'l']||this['_dirtyWorl'+'d'])&&this['_sync']();const _0x3c6b0f=this['_children'];for(let _0x10a02e=-0x11*-0x124+-0x6*0x139+-0xc0e,_0x2caa9b=_0x3c6b0f['length'];_0x10a02e<_0x2caa9b;_0x10a02e++)_0x3c6b0f[_0x10a02e]['syncHierar'+'chy']();}['lookAt'](_0x543d9c,_0x5b7ed9,_0x292354,_0x33a138=0x9d0+-0x97*-0x5+-0xcc3,_0x3fe99a=0x1*0x20a1+-0x6*-0xb3+-0x2*0x1269,_0x2f5c32=-0x1*0x254f+-0x215b+0x46aa){if(_0x543d9c instanceof D)wd['copy'](_0x543d9c),_0x5b7ed9 instanceof D?Vl['copy'](_0x5b7ed9):Vl['copy'](D['UP']);else{if(_0x292354===void(-0x2*-0xd03+-0x189e+-0x168))return;wd['set'](_0x543d9c,_0x5b7ed9,_0x292354),Vl['set'](_0x33a138,_0x3fe99a,_0x2f5c32);}Ym['setLookAt'](this['getPositio'+'n'](),wd,Vl),as['setFromMat'+'4'](Ym),this['setRotatio'+'n'](as);}['translate'](_0x7404ef,_0x14dacd,_0x2cd803){_0x7404ef instanceof D?rs['copy'](_0x7404ef):rs['set'](_0x7404ef,_0x14dacd,_0x2cd803),rs['add'](this['getPositio'+'n']()),this['setPositio'+'n'](rs);}['translateL'+'ocal'](_0x3bd283,_0x282d27,_0x16fe2e){_0x3bd283 instanceof D?rs['copy'](_0x3bd283):rs['set'](_0x3bd283,_0x282d27,_0x16fe2e),this['localRotat'+'ion']['transformV'+'ector'](rs,rs),this['localPosit'+'ion']['add'](rs),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotate'](_0x5789b7,_0x8026d3,_0x32b2f3){if(as['setFromEul'+'erAngles'](_0x5789b7,_0x8026d3,_0x32b2f3),this['_parent']===null)this['localRotat'+'ion']['mul2'](as,this['localRotat'+'ion']);else{const _0xeba91e=this['getRotatio'+'n'](),_0x6dfa56=this['_parent']['getRotatio'+'n']();Aa['copy'](_0x6dfa56)['invert'](),as['mul2'](Aa,as),this['localRotat'+'ion']['mul2'](as,_0xeba91e);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotateLoca'+'l'](_0x3d858f,_0x51c0f2,_0x33525e){as['setFromEul'+'erAngles'](_0x3d858f,_0x51c0f2,_0x33525e),this['localRotat'+'ion']['mul'](as),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}}const ky=new Kt();function $n(_0x428955){const _0x4332f9=ky['get'](_0x428955);return w['assert'](_0x4332f9),_0x4332f9;}function Bw(_0x3939ec,_0x522b13){w['assert'](_0x522b13),ky['get'](_0x3939ec,()=>_0x522b13);}class zw{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach']((_0x370103,_0x4a8d7b)=>{_0x4a8d7b['destroy']();}),this['cache']['clear']();}['incRef'](_0x1696e2){const _0x3e68ce=(this['cache']['get'](_0x1696e2)||0x83*0x3d+-0x521*0x2+-0x14f5)+(0x149a+0xfc4+0xc1f*-0x3);this['cache']['set'](_0x1696e2,_0x3e68ce);}['decRef'](_0x10460c){if(_0x10460c){let _0x58ca20=this['cache']['get'](_0x10460c);_0x58ca20&&(_0x58ca20--,_0x58ca20===0x1e*-0x91+-0x1bb*-0x7+0x4e1*0x1?(this['cache']['delete'](_0x10460c),_0x10460c['destroy']()):this['cache']['set'](_0x10460c,_0x58ca20));}}}class Bi{static['incRef'](_0x4b9342){this['cache']['incRef'](_0x4b9342);}static['decRef'](_0x41c6fe){this['cache']['decRef'](_0x41c6fe);}static['destroy'](){this['cache']['destroy']();}}h(Bi,'cache',new zw());let Vw=-0x16*0x107+0x7c3+0xed7;const Gw=new De(),Gl=new De(),Ed=new Mu(),bd=new Set(),Mr=new Uint32Array(0x1d24*0x1+-0x1aed+-0x1*0x233);class Hw{constructor(_0x5407ea){h(this,'vertexBuff'+'er',null),h(this,'_destroyVe'+'rtexBuffer',!(0xf2+-0x567+-0x2*-0x23b)),this['count']=_0x5407ea;}['destroy'](){var _0x3e1021;this['_destroyVe'+'rtexBuffer']&&((_0x3e1021=this['vertexBuff'+'er'])==null||_0x3e1021['destroy']()),this['vertexBuff'+'er']=null;}}class Ww{constructor(){h(this,'map',new Map()),h(this,'meshMetaDa'+'ta',new Int32Array(0x43+-0x10d2+0x1093*0x1));}['get'](_0xa03872){return this['map']['get'](_0xa03872)??this['map']['get'](null);}}class $w{constructor(){h(this,'shader'),h(this,'bindGroup',null),h(this,'uniformBuf'+'fer',null),h(this,'hashes');}['getBindGro'+'up'](_0x3134ab){if(!this['bindGroup']){const _0x1d0292=this['shader'];w['assert'](_0x1d0292);const _0x37facb=_0x1d0292['meshBindGr'+'oupFormat'];w['assert'](_0x37facb),this['bindGroup']=new dp(_0x3134ab,_0x37facb),ya['setName'](this['bindGroup'],'MeshBindGr'+'oup_'+this['bindGroup']['id']);}return this['bindGroup'];}['getUniform'+'Buffer'](_0x52a98c){if(!this['uniformBuf'+'fer']){const _0x2a8ecc=this['shader'];w['assert'](_0x2a8ecc);const _0x5242c1=_0x2a8ecc['meshUnifor'+'mBufferFor'+'mat'];w['assert'](_0x5242c1),this['uniformBuf'+'fer']=new up(_0x52a98c,_0x5242c1,!(-0x1aed+0x1*0x15c5+0x529*0x1));}return this['uniformBuf'+'fer'];}['destroy'](){var _0x45a25f,_0x24cfe6;(_0x45a25f=this['bindGroup'])==null||_0x45a25f['destroy'](),this['bindGroup']=null,(_0x24cfe6=this['uniformBuf'+'fer'])==null||_0x24cfe6['destroy'](),this['uniformBuf'+'fer']=null;}}const Yr=class Yr{constructor(_0x754f0d,_0x220a08,_0x26af16=null){h(this,'castShadow',!(-0x12d9*0x1+0x12e3+-0x9)),h(this,'shadowCasc'+'adeMask',iw),h(this,'cull',!(-0x1e84+-0x939*0x1+0x1*0x27bd)),h(this,'drawOrder',-0x1ace+-0x48b*-0x1+0x1643),h(this,'_drawBucke'+'t',-0x24ca+0x139b+-0x11ae*-0x1),h(this,'node'),h(this,'visible',!(0x1043*-0x1+-0x2eb+0x132e)),h(this,'visibleThi'+'sFrame',!(-0x8*-0xcf+0x6c*-0x26+0x991*0x1)),h(this,'flipFacesF'+'actor',-0x36e*0xa+-0x1167+0x4*0xced),h(this,'gsplatInst'+'ance',null),h(this,'id',Vw++),h(this,'isVisibleF'+'unc',null),h(this,'instancing'+'Data',null),h(this,'indirectDa'+'ta',null),h(this,'parameters',{}),h(this,'pick',!(0x11bb+0x5*0x6dc+0x13*-0x2bd)),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'transparen'+'t',!(-0x4d*-0x21+-0x3d9*-0x1+-0xdc5)),h(this,'_aabb',new De()),h(this,'_aabbVer',-(0x106b+-0x2193+0xbf*0x17)),h(this,'_aabbMeshV'+'er',-(-0x2510+-0x17e5+-0x33*-0x132)),h(this,'_customAab'+'b',null),h(this,'_updateAab'+'b',!(-0x5f7+0x5*-0x376+0x1745)),h(this,'_updateAab'+'bFunc',null),h(this,'_sortKeySh'+'adow',0x4c7*0x5+0x1bf0+-0x33d3*0x1),h(this,'_sortKeyFo'+'rward',-0x1*0x1427+0x1108+0x31f),h(this,'_sortKeyDy'+'namic',-0x1d8b+-0x3a*-0x26+0x1*0x14ef),h(this,'_layer',py),h(this,'_material',null),h(this,'_skinInsta'+'nce',null),h(this,'_morphInst'+'ance',null),h(this,'_receiveSh'+'adow',!(0x48d*-0x3+0x1*-0x19db+0x2782)),h(this,'_renderSty'+'le',nn),h(this,'_screenSpa'+'ce',!(-0xafb+0x6f1+-0x1*-0x40b)),h(this,'_shaderCac'+'he',new Map()),h(this,'_shaderDef'+'s',Ss<<0x1691+0x17fc+-0x2e7d),h(this,'_calculate'+'SortDistan'+'ce',null);if(w['assert'](!(_0x754f0d instanceof Ie),'Incorrect\x20'+'parameters'+'\x20for\x20MeshI'+'nstance\x27s\x20'+'constructo'+'r.\x20Use\x20new'+'\x20MeshInsta'+'nce(mesh,\x20'+'material,\x20'+'node)'),this['node']=_0x26af16,this['_mesh']=_0x754f0d,_0x754f0d['incRefCoun'+'t'](),this['material']=_0x220a08,_0x754f0d['vertexBuff'+'er']){const _0x2f9de7=_0x754f0d['vertexBuff'+'er']['format'];this['_shaderDef'+'s']|=_0x2f9de7['hasUv0']?Rp:0x564+0x2021+-0x2585,this['_shaderDef'+'s']|=_0x2f9de7['hasUv1']?My:0xd49+0x23ef+-0x4ec*0xa,this['_shaderDef'+'s']|=_0x2f9de7['hasColor']?Dy:-0x8*-0x157+-0x26dd+0x1c25,this['_shaderDef'+'s']|=_0x2f9de7['hasTangent'+'s']?Op:0x1343*0x1+0x1*0x1539+-0x287c;}this['updateKey']();}set['drawBucket'](_0x364ad7){this['_drawBucke'+'t']=Math['floor'](_0x364ad7)&0x5*0x3ad+0x1*-0x11a5+0x43*0x1,this['updateKey']();}get['drawBucket'](){return this['_drawBucke'+'t'];}set['renderStyl'+'e'](_0x16c738){this['_renderSty'+'le']=_0x16c738,this['mesh']['prepareRen'+'derState'](_0x16c738);}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['mesh'](_0x8e97ea){_0x8e97ea!==this['_mesh']&&(this['_mesh']&&this['_mesh']['decRefCoun'+'t'](),this['_mesh']=_0x8e97ea,_0x8e97ea&&_0x8e97ea['incRefCoun'+'t']());}get['mesh'](){return this['_mesh'];}set['aabb'](_0x54e3cf){this['_aabb']=_0x54e3cf;}get['aabb'](){if(!this['_updateAab'+'b'])return this['_aabb'];if(this['_updateAab'+'bFunc'])return this['_updateAab'+'bFunc'](this['_aabb']);let _0x472387=this['_customAab'+'b'],_0xa0edb1=!!_0x472387;if(!_0x472387){if(_0x472387=Gw,this['skinInstan'+'ce']){if(!this['mesh']['boneAabb']){const _0x1da0d9=this['_morphInst'+'ance']?this['_morphInst'+'ance']['morph']['_targets']:null;this['mesh']['_initBoneA'+'abbs'](_0x1da0d9);}const _0x7fae0f=this['mesh']['boneUsed'];let _0x188543=!(-0x211a+0x1b72+0x16a*0x4);for(let _0x21fb44=0x1c5*0xe+0xa7e+0x94*-0x3d;_0x21fb44<this['mesh']['boneAabb']['length'];_0x21fb44++)_0x7fae0f[_0x21fb44]&&(Gl['setFromTra'+'nsformedAa'+'bb'](this['mesh']['boneAabb'][_0x21fb44],this['skinInstan'+'ce']['matrices'][_0x21fb44]),_0x188543?(_0x188543=!(0x1*-0x955+-0x16*0x10b+0x2048),_0x472387['center']['copy'](Gl['center']),_0x472387['halfExtent'+'s']['copy'](Gl['halfExtent'+'s'])):_0x472387['add'](Gl));_0xa0edb1=!(0x1*0x653+-0x1afb+0x295*0x8);}else{if(this['node']['_aabbVer']!==this['_aabbVer']||this['mesh']['_aabbVer']!==this['_aabbMeshV'+'er']){if(this['mesh']?(_0x472387['center']['copy'](this['mesh']['aabb']['center']),_0x472387['halfExtent'+'s']['copy'](this['mesh']['aabb']['halfExtent'+'s'])):(_0x472387['center']['set'](0x234c+-0x1865+-0xae7,-0x15fb+-0x2*-0x133b+-0x1*0x107b,0x705+0x213d+-0x2842),_0x472387['halfExtent'+'s']['set'](0x1776+-0x1306+-0x1*0x470,0x20cc*0x1+0x9*0x3f1+0x1*-0x4445,-0x11*-0xb3+0x58f+0x8b9*-0x2)),this['mesh']&&this['mesh']['morph']){const _0xee43ce=this['mesh']['morph']['aabb'];_0x472387['_expand'](_0xee43ce['getMin'](),_0xee43ce['getMax']());}_0xa0edb1=!(0xce9+0x26e3+-0xff*0x34),this['_aabbVer']=this['node']['_aabbVer'],this['_aabbMeshV'+'er']=this['mesh']['_aabbVer'];}}}return _0xa0edb1&&this['_aabb']['setFromTra'+'nsformedAa'+'bb'](_0x472387,this['node']['getWorldTr'+'ansform']()),this['_aabb'];}['clearShade'+'rs'](){this['_shaderCac'+'he']['forEach'](_0x3339a5=>{_0x3339a5['destroy']();}),this['_shaderCac'+'he']['clear']();}['getShaderI'+'nstance'](_0xa7d839,_0x803602,_0x5e756b,_0x27ca97,_0x5a6e2,_0x122b7e,_0x35259d){var _0x5982aa;const _0x388c1f=this['_shaderDef'+'s'];Mr[-0x1dbc*-0x1+-0xa*-0x342+-0x3e50]=_0xa7d839,Mr[0xc*0x2cf+-0x1*0x831+-0x1982]=_0x803602,Mr[-0x13c4+-0x1f4+-0x3*-0x73e]=_0x388c1f,Mr[0x22bc+0x1ddb+-0x4094]=_0x27ca97['hash'];const _0x519e92=iy(Mr);let _0x879ba8=this['_shaderCac'+'he']['get'](_0x519e92);if(!_0x879ba8){const _0x58d1cd=this['_material'];if(_0x879ba8=new $w(),_0x879ba8['shader']=_0x58d1cd['variants']['get'](_0x519e92),_0x879ba8['hashes']=new Uint32Array(Mr),!_0x879ba8['shader']){Q['pushGpuMar'+'ker'](this['mesh']['device'],'Node:\x20'+this['node']['name']);const _0x201d35=_0x58d1cd['getShaderV'+'ariant']({'device':this['mesh']['device'],'scene':_0x5e756b,'objDefs':_0x388c1f,'cameraShaderParams':_0x27ca97,'pass':_0xa7d839,'sortedLights':_0x35259d,'viewUniformFormat':_0x5a6e2,'viewBindGroupFormat':_0x122b7e,'vertexFormat':(_0x5982aa=this['mesh']['vertexBuff'+'er'])==null?void(-0x10bf+-0x1*0xc43+0x1d02*0x1):_0x5982aa['format']});Q['popGpuMark'+'er'](this['mesh']['device']),_0x58d1cd['variants']['set'](_0x519e92,_0x201d35),_0x879ba8['shader']=_0x201d35;}this['_shaderCac'+'he']['set'](_0x519e92,_0x879ba8);}return w['call'](()=>{Yx['equals'](_0x879ba8['hashes'],Mr)||w['errorOnce']('Hash\x20colli'+'sion\x20in\x20th'+'e\x20shader\x20c'+'ache\x20for\x20m'+'esh\x20instan'+'ce.\x20This\x20i'+'s\x20very\x20unl'+'ikely\x20but\x20'+'still\x20poss'+'ible.\x20Plea'+'se\x20report\x20'+'this\x20issue'+'.');}),_0x879ba8;}set['material'](_0x9a1b1c){this['clearShade'+'rs']();const _0x1e20fd=this['_material'];_0x1e20fd&&_0x1e20fd['removeMesh'+'InstanceRe'+'f'](this),this['_material']=_0x9a1b1c,_0x9a1b1c&&(_0x9a1b1c['addMeshIns'+'tanceRef'](this),this['transparen'+'t']=_0x9a1b1c['transparen'+'t'],this['updateKey']());}get['material'](){return this['_material'];}['_updateSha'+'derDefs'](_0x25f0e5){_0x25f0e5!==this['_shaderDef'+'s']&&(this['_shaderDef'+'s']=_0x25f0e5,this['clearShade'+'rs']());}set['calculateS'+'ortDistanc'+'e'](_0x1463f3){this['_calculate'+'SortDistan'+'ce']=_0x1463f3;}get['calculateS'+'ortDistanc'+'e'](){return this['_calculate'+'SortDistan'+'ce'];}set['receiveSha'+'dow'](_0x2aca55){this['_receiveSh'+'adow']!==_0x2aca55&&(this['_receiveSh'+'adow']=_0x2aca55,this['_updateSha'+'derDefs'](_0x2aca55?this['_shaderDef'+'s']&~th:this['_shaderDef'+'s']|th));}get['receiveSha'+'dow'](){return this['_receiveSh'+'adow'];}set['batching'](_0x1dfa3b){this['_updateSha'+'derDefs'](_0x1dfa3b?this['_shaderDef'+'s']|bc:this['_shaderDef'+'s']&~bc);}get['batching'](){return(this['_shaderDef'+'s']&bc)!==-0x1*-0x1101+-0xb8a*-0x2+-0x2815;}set['skinInstan'+'ce'](_0x4a8a2a){this['_skinInsta'+'nce']=_0x4a8a2a,this['_updateSha'+'derDefs'](_0x4a8a2a?this['_shaderDef'+'s']|qo:this['_shaderDef'+'s']&~qo),this['_setupSkin'+'Update']();}get['skinInstan'+'ce'](){return this['_skinInsta'+'nce'];}set['morphInsta'+'nce'](_0xcf08fc){var _0x416e4f;(_0x416e4f=this['_morphInst'+'ance'])==null||_0x416e4f['destroy'](),this['_morphInst'+'ance']=_0xcf08fc;let _0x38e285=this['_shaderDef'+'s'];_0x38e285=_0xcf08fc&&_0xcf08fc['morph']['morphPosit'+'ions']?_0x38e285|Yo:_0x38e285&~Yo,_0x38e285=_0xcf08fc&&_0xcf08fc['morph']['morphNorma'+'ls']?_0x38e285|Ko:_0x38e285&~Ko,_0x38e285=_0xcf08fc&&_0xcf08fc['morph']['intRenderF'+'ormat']?_0x38e285|Zo:_0x38e285&~Zo,this['_updateSha'+'derDefs'](_0x38e285);}get['morphInsta'+'nce'](){return this['_morphInst'+'ance'];}set['screenSpac'+'e'](_0x5e9550){this['_screenSpa'+'ce']!==_0x5e9550&&(this['_screenSpa'+'ce']=_0x5e9550,this['_updateSha'+'derDefs'](_0x5e9550?this['_shaderDef'+'s']|sh:this['_shaderDef'+'s']&~sh));}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['key'](_0x4fb2ea){this['_sortKeyFo'+'rward']=_0x4fb2ea;}get['key'](){return this['_sortKeyFo'+'rward'];}set['mask'](_0x4f6c00){const _0x2eeadf=this['_shaderDef'+'s']&0x67*-0x327+-0xba6f+-0x21d*-0x16b;this['_updateSha'+'derDefs'](_0x2eeadf|_0x4f6c00<<0x212*-0x5+0x4*0x435+-0x335*0x2);}get['mask'](){return this['_shaderDef'+'s']>>0x56*-0x7+-0x1*-0x213d+0x25f*-0xd;}set['instancing'+'Count'](_0x4d0fa5){this['instancing'+'Data']&&(this['instancing'+'Data']['count']=_0x4d0fa5);}get['instancing'+'Count'](){return this['instancing'+'Data']?this['instancing'+'Data']['count']:-0x1c38+0x1*0xdf3+0xe45;}['destroy'](){var _0x5c477e,_0x5b64f3,_0x1c1ffc;const _0xb0e80e=this['mesh'];_0xb0e80e&&(this['mesh']=null,_0xb0e80e['refCount']<-0x899+-0x201a+-0xa2d*-0x4&&_0xb0e80e['destroy']()),this['setRealtim'+'eLightmap'](Yr['lightmapPa'+'ramNames'][0xc26+0x122b+-0x1e51],null),this['setRealtim'+'eLightmap'](Yr['lightmapPa'+'ramNames'][-0x86*-0x1+0x2*0x85d+-0x113f],null),(_0x5c477e=this['_skinInsta'+'nce'])==null||_0x5c477e['destroy'](),this['_skinInsta'+'nce']=null,(_0x5b64f3=this['morphInsta'+'nce'])==null||_0x5b64f3['destroy'](),this['morphInsta'+'nce']=null,this['clearShade'+'rs'](),this['material']=null,(_0x1c1ffc=this['instancing'+'Data'])==null||_0x1c1ffc['destroy']();}static['_prepareRe'+'nderStyleF'+'orArray'](_0x6be5af,_0x459668){if(_0x6be5af){for(let _0x19a81e=-0xd64+0x11*0x112+-0x267*0x2;_0x19a81e<_0x6be5af['length'];_0x19a81e++){_0x6be5af[_0x19a81e]['_renderSty'+'le']=_0x459668;const _0x1463ed=_0x6be5af[_0x19a81e]['mesh'];bd['has'](_0x1463ed)||(bd['add'](_0x1463ed),_0x1463ed['prepareRen'+'derState'](_0x459668));}bd['clear']();}}['_isVisible'](_0x160155){return this['visible']?this['isVisibleF'+'unc']?this['isVisibleF'+'unc'](_0x160155):(Ed['center']=this['aabb']['center'],Ed['radius']=this['_aabb']['halfExtent'+'s']['length'](),_0x160155['frustum']['containsSp'+'here'](Ed)>0x15d2+0x2*0x1292+-0x1*0x3af6):!(0x1*0x1c66+0xef*-0x25+0x313*0x2);}['updateKey'](){const {material:_0x2c5064}=this;this['_sortKeyFo'+'rward']=this['_drawBucke'+'t']<<0x182a+-0x4*-0x916+-0x3c6b|(_0x2c5064['alphaToCov'+'erage']||_0x2c5064['alphaTest']?0x1c*-0x2af86+-0x3*0x2656a9+0x39*0x475bb:0x142c+0xd*0x1d7+0x1*-0x2c17)|_0x2c5064['id']&0x73a7fd+0x7dfaab+-0xb1a2a9;}['setInstanc'+'ing'](_0x431a69,_0x3e5656=!(0x1d76+-0x1506+-0x86f)){_0x431a69?(this['instancing'+'Data']=new Hw(_0x431a69['numVertice'+'s']),this['instancing'+'Data']['vertexBuff'+'er']=_0x431a69,_0x431a69['format']['instancing']=!(-0x1b16*0x1+0x3*-0xb6+0x1d38),this['cull']=_0x3e5656):(this['instancing'+'Data']=null,this['cull']=!(0x585+-0xad5+0x550)),this['_updateSha'+'derDefs'](_0x431a69?this['_shaderDef'+'s']|jo:this['_shaderDef'+'s']&~jo);}['setIndirec'+'t'](_0x497388,_0x47cbb2){this['_allocIndi'+'rectData'](),this['indirectDa'+'ta']['map']['set']((_0x497388==null?void(-0x8db*-0x1+-0x5*-0x6d9+-0x2b18):_0x497388['camera'])??null,_0x47cbb2),this['mesh']['device']['mapsToClea'+'r']['add'](this['indirectDa'+'ta']['map']);}['getIndirec'+'tMetaData'](){var _0x4287d8;this['_allocIndi'+'rectData']();const _0x24bf12=(_0x4287d8=this['mesh'])==null?void(0xf3d+0x1*0x1aff+-0xc*0x385):_0x4287d8['primitive'][this['renderStyl'+'e']],_0x34bc8a=this['indirectDa'+'ta']['meshMetaDa'+'ta'];return _0x34bc8a[-0x1093*0x1+0x1b61+0xace*-0x1]=_0x24bf12['count'],_0x34bc8a[-0x7*0x28a+0x3*-0x591+0x227a]=_0x24bf12['base'],_0x34bc8a[0xf1*0x13+0x27d*0x4+-0x1bd5]=_0x24bf12['baseVertex'],_0x34bc8a;}['_allocIndi'+'rectData'](){this['indirectDa'+'ta']||(this['indirectDa'+'ta']=new Ww());}['ensureMate'+'rial'](_0x1dd89){this['material']||(w['warn']('Mesh\x20attac'+'hed\x20to\x20ent'+'ity\x20\x27'+this['node']['name']+('\x27\x20does\x20not'+'\x20have\x20a\x20ma'+'terial,\x20us'+'ing\x20a\x20defa'+'ult\x20one.')),this['material']=$n(_0x1dd89));}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['getParamet'+'er'](_0x47c8aa){return this['parameters'][_0x47c8aa];}['setParamet'+'er'](_0x548b7f,_0x230ada,_0x3b6c24=0x1*0x1dc5d94fb+-0x184e6f1*0x107+0xb32bac9b){const _0x43f659=this['parameters'][_0x548b7f];_0x43f659?(_0x43f659['data']=_0x230ada,_0x43f659['passFlags']=_0x3b6c24):this['parameters'][_0x548b7f]={'scopeId':null,'data':_0x230ada,'passFlags':_0x3b6c24};}['setRealtim'+'eLightmap'](_0x4d2df8,_0x17641b){const _0x1abf3a=this['getParamet'+'er'](_0x4d2df8);_0x1abf3a!==_0x17641b&&(_0x1abf3a&&Bi['decRef'](_0x1abf3a['data']),_0x17641b?(Bi['incRef'](_0x17641b),this['setParamet'+'er'](_0x4d2df8,_0x17641b)):this['deletePara'+'meter'](_0x4d2df8));}['deletePara'+'meter'](_0x27ae09){this['parameters'][_0x27ae09]&&delete this['parameters'][_0x27ae09];}['setParamet'+'ers'](_0x4b0b15,_0x1e7466){const _0x95c8e7=this['parameters'];for(const _0x5e197d in _0x95c8e7){const _0x328ced=_0x95c8e7[_0x5e197d];_0x328ced['passFlags']&_0x1e7466&&(_0x328ced['scopeId']||(_0x328ced['scopeId']=_0x4b0b15['scope']['resolve'](_0x5e197d)),_0x328ced['scopeId']['setValue'](_0x328ced['data']));}}['setLightma'+'pped'](_0x1465c4){_0x1465c4?this['mask']=(this['mask']|di)&-(0xf0e+-0xd3*-0x13+0x369*-0x9):(this['setRealtim'+'eLightmap'](Yr['lightmapPa'+'ramNames'][0x67c*0x1+0xc91+-0x130d*0x1],null),this['setRealtim'+'eLightmap'](Yr['lightmapPa'+'ramNames'][-0x211+-0xa42+-0xc*-0x107],null),this['_shaderDef'+'s']&=-(0xc55+0x1ae2+-0x1676),this['mask']=(this['mask']|Ss)&-(0x1*0x193d+0x20cb+-0x3a01));}['setCustomA'+'abb'](_0x10c557){_0x10c557?this['_customAab'+'b']?this['_customAab'+'b']['copy'](_0x10c557):this['_customAab'+'b']=_0x10c557['clone']():(this['_customAab'+'b']=null,this['_aabbVer']=-(-0x801*0x1+0x458+0x3aa)),this['_setupSkin'+'Update']();}['_setupSkin'+'Update'](){this['_skinInsta'+'nce']&&(this['_skinInsta'+'nce']['_updateBef'+'oreCull']=!this['_customAab'+'b']);}};h(Yr,'lightmapPa'+'ramNames',['texture_li'+'ghtMap','texture_di'+'rLightMap']);let He=Yr;const Xw=[-0x9d*0x3a+0x1da3+0x5ef,0x5*-0x1b7+0x13*-0x9e+0x144e,-0x3b8*-0x4+-0x23*-0x65+-0x1cac,-0x1902+-0x283+0x1b87,0xe0d+-0xd*-0x147+-0x1ea5*0x1,-0x48*0x7a+-0x3f1*-0x1+0x1e60],qw=[0x191f+0x1650+0x2f6f*-0x1,0x6*0x5ec+-0x2133+0x12a*-0x2,0x16d3*0x1+-0xc0a+-0xac6,0x2*-0x27a+0x13e3+-0xeef,0x22e1*-0x1+0x75f+0x1*0x1b85,-0x1*-0x20e3+-0x2*-0x557+0x9*-0x4d7],Zm=new _i();function Qm(_0x303855,_0x47e3c2){if(_0x303855&&!_0x47e3c2||!_0x303855&&_0x47e3c2)return!(-0x11ee+0x1731+0x2a1*-0x2);if(_0x303855=_0x303855['data'],_0x47e3c2=_0x47e3c2['data'],_0x303855===_0x47e3c2)return!(-0x13df+-0x3*-0x989+-0x56*0x1a);if(_0x303855 instanceof Float32Array&&_0x47e3c2 instanceof Float32Array){if(_0x303855['length']!==_0x47e3c2['length'])return!(-0xcee+0x1b8b+-0xe9c);for(let _0x4eccf2=-0x3e7+-0x1e59+0x2240;_0x4eccf2<_0x303855['length'];_0x4eccf2++)if(_0x303855[_0x4eccf2]!==_0x47e3c2[_0x4eccf2])return!(0x2439+-0x5*0x41c+-0xfac);return!(-0x1323+0xcc8+0x65b);}return!(0x2*-0x5d7+-0x29*-0xad+-0x1006);}function jw(_0x45cd05,_0x185966){for(const _0x216337 in _0x45cd05)if(_0x45cd05['hasOwnProp'+'erty'](_0x216337)&&!Qm(_0x45cd05[_0x216337],_0x185966[_0x216337]))return!(0x235f+0x1*-0x262d+-0x1*-0x2cf);for(const _0x1f179b in _0x185966)if(_0x185966['hasOwnProp'+'erty'](_0x1f179b)&&!Qm(_0x185966[_0x1f179b],_0x45cd05[_0x1f179b]))return!(0x1d97+-0x7f*-0x1a+-0x2a7c*0x1);return!(0x2*0x1216+0xb7e+-0x2faa);}function Ad(_0x1d9125){return _0x1d9125['node']['worldTrans'+'form']['scaleSign'];}class Yw{constructor(_0x4fdfe4,_0x889b06,_0x59c548){this['device']=_0x4fdfe4,this['rootNode']=_0x889b06,this['scene']=_0x59c548,this['_init']=!(-0x26bb+0x1e1b+0x8a1),this['_batchGrou'+'ps']={},this['_batchGrou'+'pCounter']=0x147+-0x25*0x43+0x868,this['_batchList']=[],this['_dirtyGrou'+'ps']=[],this['_stats']={'createTime':0x0,'updateLastFrameTime':0x0};}['destroy'](){this['device']=null,this['rootNode']=null,this['scene']=null,this['_batchGrou'+'ps']={},this['_batchList']=[],this['_dirtyGrou'+'ps']=[];}['addGroup'](_0x36c391,_0x2d723b,_0x42bebf,_0x3f201f,_0x3d5271){if(_0x3f201f===void(-0xbaa*0x2+0x3*-0x91b+-0x1*-0x32a5)&&(_0x3f201f=this['_batchGrou'+'pCounter'],this['_batchGrou'+'pCounter']++),this['_batchGrou'+'ps'][_0x3f201f]){w['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x3f201f+('\x20already\x20e'+'xists.'));return;}const _0x3ff64f=new St(_0x3f201f,_0x36c391,_0x2d723b,_0x42bebf,_0x3d5271);return this['_batchGrou'+'ps'][_0x3f201f]=_0x3ff64f,_0x3ff64f;}['removeGrou'+'p'](_0x1f4535){if(!this['_batchGrou'+'ps'][_0x1f4535]){w['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x1f4535+('\x20doesn\x27t\x20e'+'xist.'));return;}const _0x38360d=[];for(let _0x2cf306=0x1c43+-0x1371+0x2*-0x469;_0x2cf306<this['_batchList']['length'];_0x2cf306++)this['_batchList'][_0x2cf306]['batchGroup'+'Id']===_0x1f4535?this['destroyBat'+'ch'](this['_batchList'][_0x2cf306]):_0x38360d['push'](this['_batchList'][_0x2cf306]);this['_batchList']=_0x38360d,this['_removeMod'+'elsFromBat'+'chGroup'](this['rootNode'],_0x1f4535),delete this['_batchGrou'+'ps'][_0x1f4535];}['markGroupD'+'irty'](_0x563bbb){this['_dirtyGrou'+'ps']['indexOf'](_0x563bbb)<0x5*0x11b+-0x16da+0x1*0x1153&&this['_dirtyGrou'+'ps']['push'](_0x563bbb);}['getGroupBy'+'Name'](_0x5b8b65){const _0x183f3a=this['_batchGrou'+'ps'];for(const _0x3babf6 in _0x183f3a)if(_0x183f3a['hasOwnProp'+'erty'](_0x3babf6)&&_0x183f3a[_0x3babf6]['name']===_0x5b8b65)return _0x183f3a[_0x3babf6];return null;}['getBatches'](_0x298e9e){const _0x51676d=[],_0x14c4d7=this['_batchList']['length'];for(let _0x895079=-0x1bb3+-0x4ae+0x2061;_0x895079<_0x14c4d7;_0x895079++){const _0x3e55c4=this['_batchList'][_0x895079];_0x3e55c4['batchGroup'+'Id']===_0x298e9e&&_0x51676d['push'](_0x3e55c4);}return _0x51676d;}['_removeMod'+'elsFromBat'+'chGroup'](_0x7712c2,_0x463ce8){if(_0x7712c2['enabled']){_0x7712c2['model']&&_0x7712c2['model']['batchGroup'+'Id']===_0x463ce8&&(_0x7712c2['model']['batchGroup'+'Id']=-(-0x62*0x1c+0x4d9+0x5e0)),_0x7712c2['render']&&_0x7712c2['render']['batchGroup'+'Id']===_0x463ce8&&(_0x7712c2['render']['batchGroup'+'Id']=-(-0x1*0x449+-0x64*0x56+0x25e2)),_0x7712c2['element']&&_0x7712c2['element']['batchGroup'+'Id']===_0x463ce8&&(_0x7712c2['element']['batchGroup'+'Id']=-(-0x3*0x79f+0x12f1+0x3ed)),_0x7712c2['sprite']&&_0x7712c2['sprite']['batchGroup'+'Id']===_0x463ce8&&(_0x7712c2['sprite']['batchGroup'+'Id']=-(-0x1f91+0x6ce+0xa*0x27a));for(let _0x1f354e=-0x16f7+0x2*-0x11a1+-0x54b*-0xb;_0x1f354e<_0x7712c2['_children']['length'];_0x1f354e++)this['_removeMod'+'elsFromBat'+'chGroup'](_0x7712c2['_children'][_0x1f354e],_0x463ce8);}}['insert'](_0x7d01f5,_0x340ce2,_0xa6b924){const _0x4c0d2b=this['_batchGrou'+'ps'][_0x340ce2];w['assert'](_0x4c0d2b,'Invalid\x20ba'+'tch\x20'+_0x340ce2+'\x20insertion'),_0x4c0d2b&&_0x4c0d2b['_obj'][_0x7d01f5]['indexOf'](_0xa6b924)<0xcab+-0x1*-0x1f32+-0x2bdd&&(_0x4c0d2b['_obj'][_0x7d01f5]['push'](_0xa6b924),this['markGroupD'+'irty'](_0x340ce2));}['remove'](_0x303b52,_0x1a44df,_0x50215e){const _0x2a302d=this['_batchGrou'+'ps'][_0x1a44df];if(w['assert'](_0x2a302d,'Invalid\x20ba'+'tch\x20'+_0x1a44df+'\x20insertion'),_0x2a302d){const _0x33dbd4=_0x2a302d['_obj'][_0x303b52]['indexOf'](_0x50215e);_0x33dbd4>=-0x89f*0x1+-0x2114+-0x3d*-0xaf&&(_0x2a302d['_obj'][_0x303b52]['splice'](_0x33dbd4,-0x1612+0x4b3+0x8b0*0x2),this['markGroupD'+'irty'](_0x1a44df));}}['_extractRe'+'nder'](_0x3f8bfa,_0x2df072,_0x55ab60,_0xada7f3){return _0x3f8bfa['render']&&(_0x2df072=_0xada7f3[_0x3f8bfa['render']['batchGroup'+'Id']]=_0x2df072['concat'](_0x3f8bfa['render']['meshInstan'+'ces']),_0x3f8bfa['render']['removeFrom'+'Layers']()),_0x2df072;}['_extractMo'+'del'](_0x4bc9fa,_0x360f0a,_0x44a674,_0x2f9368){return _0x4bc9fa['model']&&_0x4bc9fa['model']['model']&&(_0x360f0a=_0x2f9368[_0x4bc9fa['model']['batchGroup'+'Id']]=_0x360f0a['concat'](_0x4bc9fa['model']['meshInstan'+'ces']),_0x4bc9fa['model']['removeMode'+'lFromLayer'+'s'](),_0x4bc9fa['model']['_batchGrou'+'p']=_0x44a674),_0x360f0a;}['_extractEl'+'ement'](_0x4008c4,_0x49dd2e,_0x514992){if(!_0x4008c4['element'])return;let _0x438a55=!(-0x23c9+0x6*0x33+0x2298);_0x4008c4['element']['_text']&&_0x4008c4['element']['_text']['_model']['meshInstan'+'ces']['length']>-0x2309*-0x1+-0x17*0x17f+-0xa0?(_0x49dd2e['push'](_0x4008c4['element']['_text']['_model']['meshInstan'+'ces'][0x2212+0x60d*-0x5+-0x3d1]),_0x4008c4['element']['removeMode'+'lFromLayer'+'s'](_0x4008c4['element']['_text']['_model']),_0x438a55=!(0x2324+0x15b2+0xc2*-0x4b)):_0x4008c4['element']['_image']&&(_0x49dd2e['push'](_0x4008c4['element']['_image']['_renderabl'+'e']['meshInstan'+'ce']),_0x4008c4['element']['removeMode'+'lFromLayer'+'s'](_0x4008c4['element']['_image']['_renderabl'+'e']['model']),_0x4008c4['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']&&(_0x49dd2e['push'](_0x4008c4['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']),(!_0x4008c4['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']||!_0x4008c4['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k'])&&(_0x4008c4['element']['_dirtifyMa'+'sk'](),_0x4008c4['element']['_onPrerend'+'er']())),_0x438a55=!(-0xbc*0x29+0xa*0x298+0x42c)),_0x438a55&&(_0x514992['_ui']=!(-0x3f5+-0x1*0x22e1+0x26d6*0x1),_0x4008c4['element']['_batchGrou'+'p']=_0x514992);}['_collectAn'+'dRemoveMes'+'hInstances'](_0x1c09f6,_0x5696b4){for(let _0x3754da=-0x1f8d+-0x80d+0x279a;_0x3754da<_0x5696b4['length'];_0x3754da++){const _0x26ce30=_0x5696b4[_0x3754da],_0x2b8af4=this['_batchGrou'+'ps'][_0x26ce30];if(!_0x2b8af4)continue;let _0x2a8580=_0x1c09f6[_0x26ce30];_0x2a8580||(_0x2a8580=_0x1c09f6[_0x26ce30]=[]);for(let _0x34aa31=-0x1*0x25ea+0x83b+-0x1bf*-0x11;_0x34aa31<_0x2b8af4['_obj']['model']['length'];_0x34aa31++)_0x2a8580=this['_extractMo'+'del'](_0x2b8af4['_obj']['model'][_0x34aa31],_0x2a8580,_0x2b8af4,_0x1c09f6);for(let _0x56da70=-0x24b9+-0x209f+0x4558;_0x56da70<_0x2b8af4['_obj']['render']['length'];_0x56da70++)_0x2a8580=this['_extractRe'+'nder'](_0x2b8af4['_obj']['render'][_0x56da70],_0x2a8580,_0x2b8af4,_0x1c09f6);for(let _0x4c492a=0x7f5+0x1*-0x841+-0x4*-0x13;_0x4c492a<_0x2b8af4['_obj']['element']['length'];_0x4c492a++)this['_extractEl'+'ement'](_0x2b8af4['_obj']['element'][_0x4c492a],_0x2a8580,_0x2b8af4);for(let _0x26b3d8=-0x8*0x158+-0x155*-0x1+0x96b*0x1;_0x26b3d8<_0x2b8af4['_obj']['sprite']['length'];_0x26b3d8++){const _0x1c0bde=_0x2b8af4['_obj']['sprite'][_0x26b3d8];_0x1c0bde['sprite']&&_0x1c0bde['sprite']['_meshInsta'+'nce']&&(_0x2b8af4['dynamic']||_0x1c0bde['sprite']['sprite']['_renderMod'+'e']===ci)&&(_0x2a8580['push'](_0x1c0bde['sprite']['_meshInsta'+'nce']),_0x1c0bde['sprite']['removeMode'+'lFromLayer'+'s'](),_0x2b8af4['_sprite']=!(-0x2175+0x4f1*0x3+0x31b*0x6),_0x1c0bde['sprite']['_batchGrou'+'p']=_0x2b8af4);}}}['generate'](_0x1be09d){const _0x29c332={};_0x1be09d||(_0x1be09d=Object['keys'](this['_batchGrou'+'ps']));const _0x5bfaef=[];for(let _0x171192=-0xd55*-0x2+0x23d2+0xac*-0x5d;_0x171192<this['_batchList']['length'];_0x171192++){if(_0x1be09d['indexOf'](this['_batchList'][_0x171192]['batchGroup'+'Id'])<0x83f*-0x1+0x2502+-0x1cc3){_0x5bfaef['push'](this['_batchList'][_0x171192]);continue;}this['destroyBat'+'ch'](this['_batchList'][_0x171192]);}if(this['_batchList']=_0x5bfaef,this['_collectAn'+'dRemoveMes'+'hInstances'](_0x29c332,_0x1be09d),_0x1be09d===this['_dirtyGrou'+'ps'])this['_dirtyGrou'+'ps']['length']=0x8bc+0x1a3e*0x1+-0xb*0x32e;else{const _0x51658e=[];for(let _0x2930e2=-0x10*0x1+0x2548+0x8*-0x4a7;_0x2930e2<this['_dirtyGrou'+'ps']['length'];_0x2930e2++)_0x1be09d['indexOf'](this['_dirtyGrou'+'ps'][_0x2930e2])<-0x115e+0x14de+0x40*-0xe&&_0x51658e['push'](this['_dirtyGrou'+'ps'][_0x2930e2]);this['_dirtyGrou'+'ps']=_0x51658e;}let _0x463908,_0x27d17d,_0xcc0f52,_0x1bb6b5;for(const _0xcc1072 in _0x29c332)if(_0x29c332['hasOwnProp'+'erty'](_0xcc1072)){if(_0x463908=_0x29c332[_0xcc1072],_0xcc0f52=this['_batchGrou'+'ps'][_0xcc1072],!_0xcc0f52){w['error']('batch\x20grou'+'p\x20'+_0xcc1072+'\x20not\x20found');continue;}_0x27d17d=this['prepare'](_0x463908,_0xcc0f52['dynamic'],_0xcc0f52['maxAabbSiz'+'e'],_0xcc0f52['_ui']||_0xcc0f52['_sprite']);for(let _0x10b431=0x2120+-0x2645+0x525;_0x10b431<_0x27d17d['length'];_0x10b431++)_0x1bb6b5=this['create'](_0x27d17d[_0x10b431],_0xcc0f52['dynamic'],parseInt(_0xcc1072,-0x1*0x16f+0x13f*0x1d+-0x22aa)),_0x1bb6b5&&_0x1bb6b5['addToLayer'+'s'](this['scene'],_0xcc0f52['layers']);}}['prepare'](_0x24f5e4,_0x235235,_0x28ff5b=Number['POSITIVE_I'+'NFINITY'],_0x5eff20){if(_0x24f5e4['length']===-0x921+0x68*0x4e+-0x168f)return[];const _0x30901c=_0x28ff5b*(0x5*0x61f+0xb1b*-0x2+0x7*-0x133+0.5),_0x3760e0=-0x1381+0x1e69+-0x6e8,_0x1e435b=-0x2c0c7*-0x3120+-0x9a18a3c+-0x1a13dedf*-0x5,_0x331a95=new De(),_0x289491=new De();let _0x13d063=null,_0x209f06;const _0xe703a3=[];let _0x2d979f=-0x1*0xe7f+0x1740+0x8c1*-0x1;_0x5eff20&&_0x24f5e4['sort']((_0x24e9f6,_0x27643b)=>_0x24e9f6['drawOrder']-_0x27643b['drawOrder']);let _0x1c51ed=_0x24f5e4,_0x1723fa;const _0x331b88=_0x5eff20?function(_0x5592f6){_0x13d063?_0x13d063['add'](_0x5592f6['aabb']):_0x13d063=_0x5592f6['aabb']['clone'](),_0x1723fa['push'](_0x5592f6);}:function(_0xd05082){_0x1723fa['push'](_0xd05082);};for(;_0x1c51ed['length']>-0x1*0xcaf+0x103b+-0x38c;){_0xe703a3[_0x2d979f]=[_0x1c51ed[-0x6e6*-0x1+-0x4a*0x5d+-0x2*-0x9fe]],_0x1723fa=[];const _0x2b0032=_0x1c51ed[0xea5*0x1+0x2a*-0x49+-0x2ab*0x1]['material'],_0x2b9e38=_0x1c51ed[-0x2634+-0x7*0x26e+0x3736]['layer'],_0x3350db=_0x1c51ed[-0x2626+0x1*0x1c3f+0xf*0xa9]['_shaderDef'+'s'],_0x3f1cec=_0x1c51ed[0x14a4+0x1365+-0x25*0x115]['parameters'],_0x128a72=_0x1c51ed[-0x12*0x18b+0x1f53+-0x38d]['stencilFro'+'nt'];let _0x297e80=_0x1c51ed[-0x75+-0x80*-0x28+-0x138b]['mesh']['vertexBuff'+'er']['getNumVert'+'ices']();const _0x1ddbb3=_0x1c51ed[0x193f*-0x1+0x1acf+-0x190]['drawOrder'];_0x331a95['copy'](_0x1c51ed[0x3b*0x7f+-0x1b*-0xda+0x3443*-0x1]['aabb']);const _0x3f8fe4=Ad(_0x1c51ed[-0x1*0x628+0x23fe+0x1*-0x1dd6]),_0x50b738=_0x1c51ed[0x2*-0x6b2+0x3*0x9b9+-0xfc7*0x1]['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh'],_0x568f18=_0x1c51ed[0xf*-0x292+0x630+0x205e]['mesh']['primitive'][0xc5e+0x25a8+0x1*-0x3206]['indexed'];_0x13d063=null;for(let _0x31adfe=-0x12d*-0x1f+0xdda+-0x324c;_0x31adfe<_0x1c51ed['length'];_0x31adfe++){const _0x552436=_0x1c51ed[_0x31adfe];if(_0x235235&&_0xe703a3[_0x2d979f]['length']>=_0x3760e0){_0x1723fa=_0x1723fa['concat'](_0x1c51ed['slice'](_0x31adfe));break;}if(_0x2b0032!==_0x552436['material']||_0x2b9e38!==_0x552436['layer']||_0x50b738!==_0x552436['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh']||_0x568f18!==_0x552436['mesh']['primitive'][0x1919+-0x121b+-0x6fe]['indexed']||_0x3350db!==_0x552436['_shaderDef'+'s']||_0x297e80+_0x552436['mesh']['vertexBuff'+'er']['getNumVert'+'ices']()>_0x1e435b){_0x331b88(_0x552436);continue;}if(_0x289491['copy'](_0x331a95),_0x289491['add'](_0x552436['aabb']),_0x289491['halfExtent'+'s']['x']>_0x30901c||_0x289491['halfExtent'+'s']['y']>_0x30901c||_0x289491['halfExtent'+'s']['z']>_0x30901c){_0x331b88(_0x552436);continue;}if(_0x128a72&&(!(_0x209f06=_0x552436['stencilFro'+'nt'])||_0x128a72['func']!==_0x209f06['func']||_0x128a72['zpass']!==_0x209f06['zpass'])){_0x331b88(_0x552436);continue;}if(_0x3f8fe4!==Ad(_0x552436)){_0x331b88(_0x552436);continue;}if(!jw(_0x3f1cec,_0x552436['parameters'])){_0x331b88(_0x552436);continue;}if(_0x5eff20&&_0x13d063&&_0x13d063['intersects'](_0x552436['aabb'])&&_0x552436['drawOrder']!==_0x1ddbb3){_0x331b88(_0x552436);continue;}_0x331a95['add'](_0x552436['aabb']),_0x297e80+=_0x552436['mesh']['vertexBuff'+'er']['getNumVert'+'ices'](),_0xe703a3[_0x2d979f]['push'](_0x552436);}_0x2d979f++,_0x1c51ed=_0x1723fa;}return _0xe703a3;}['collectBat'+'chedMeshDa'+'ta'](_0x476c3b,_0xf13818){let _0x26623b=null,_0x6e205b=-0x1*-0x5e+-0x1*-0x15fb+-0x1659,_0x376d01=0x1*0x33b+0x10*-0x188+0x1*0x1545,_0x36ea2d=null;for(let _0x15d050=0x2d6+-0x1*-0x1b0f+-0x9f7*0x3;_0x15d050<_0x476c3b['length'];_0x15d050++)if(_0x476c3b[_0x15d050]['visible']){const _0x3c0b2a=_0x476c3b[_0x15d050]['mesh'],_0x2afa30=_0x3c0b2a['vertexBuff'+'er']['numVertice'+'s'];if(_0x6e205b+=_0x2afa30,_0x3c0b2a['primitive'][0x1*-0x2c5+0x1e7c+-0x1bb7]['indexed'])_0x376d01+=_0x3c0b2a['primitive'][-0x4*0x13+-0xc33+-0xc7f*-0x1]['count'];else{const _0x388929=_0x3c0b2a['primitive'][-0x1d7b+0x2*0x371+0x1699]['type'];(_0x388929===sa||_0x388929===vr)&&_0x3c0b2a['primitive'][-0xa*0x188+0x1a71+-0x7*0x197]['count']===0x19f2+-0xbed+-0x2cd*0x5&&(_0x376d01+=-0x89f*0x2+-0x544+0xe*0x19c);}if(!_0x26623b){_0x36ea2d=_0x476c3b[_0x15d050]['material'],_0x26623b={};const _0x2df431=_0x3c0b2a['vertexBuff'+'er']['format']['elements'];for(let _0x2ef17b=-0xd30+0x1093*-0x1+0x191*0x13;_0x2ef17b<_0x2df431['length'];_0x2ef17b++){const _0x577c98=_0x2df431[_0x2ef17b]['name'];_0x26623b[_0x577c98]={'numComponents':_0x2df431[_0x2ef17b]['numCompone'+'nts'],'dataType':_0x2df431[_0x2ef17b]['dataType'],'normalize':_0x2df431[_0x2ef17b]['normalize'],'count':0x0};}_0xf13818&&(_0x26623b[us]={'numComponents':0x1,'dataType':Ve,'normalize':!(0x18f5+-0x1*0x13ed+-0x507),'count':0x0});}}return{'streams':_0x26623b,'batchNumVerts':_0x6e205b,'batchNumIndices':_0x376d01,'material':_0x36ea2d};}['create'](_0x469a60,_0xe17b3,_0x30f5d3){const _0x485420=de();this['_init']||(this['vertexForm'+'ats']={},this['_init']=!(-0x35*-0x2b+0x1d*0xbe+-0x1e6d));let _0x309b60=null,_0x6402b0,_0x5973dd,_0x36babc,_0x21a985=null;const _0x6b8a1b=this['collectBat'+'chedMeshDa'+'ta'](_0x469a60,_0xe17b3);if(_0x6b8a1b['streams']){const _0x2ce529=_0x6b8a1b['streams'];let _0x4a2865=_0x6b8a1b['material'];const _0x39d83d=_0x6b8a1b['batchNumVe'+'rts'],_0x1899e0=_0x6b8a1b['batchNumIn'+'dices'];_0x21a985=new Gm(_0x469a60,_0xe17b3,_0x30f5d3),this['_batchList']['push'](_0x21a985);let _0x16fe1f,_0x1c9e74,_0x23c80f,_0x496155,_0xc17747=0x10*0x250+-0x31e+-0x21e2*0x1,_0x5747bf=-0x213c*-0x1+0x29*-0x99+-0x1*0x8bb,_0x379bf8;const _0x68c557=_0x39d83d<=-0x2*-0x115f+0x2*-0xada9+0xd39*0x2b?Uint16Array:Uint32Array,_0x429cec=new _0x68c557(_0x1899e0);for(_0x6402b0 in _0x2ce529)_0x309b60=_0x2ce529[_0x6402b0],_0x309b60['typeArrayT'+'ype']=_n[_0x309b60['dataType']],_0x309b60['elementByt'+'eSize']=Eo[_0x309b60['dataType']],_0x309b60['buffer']=new _0x309b60['typeArrayT'+'ype'](_0x39d83d*_0x309b60['numCompone'+'nts']);for(let _0x3e4f6f=0x4d9+-0x2212+0x1d39;_0x3e4f6f<_0x469a60['length'];_0x3e4f6f++)if(_0x469a60[_0x3e4f6f]['visible']){_0x5973dd=_0x469a60[_0x3e4f6f]['mesh'],_0x36babc=_0x5973dd['vertexBuff'+'er']['numVertice'+'s'],_0xe17b3||(_0x379bf8=_0x469a60[_0x3e4f6f]['node']['getWorldTr'+'ansform']());for(_0x6402b0 in _0x2ce529)if(_0x6402b0!==us){_0x309b60=_0x2ce529[_0x6402b0];const _0x58f6c9=new _0x309b60['typeArrayT'+'ype'](_0x309b60['buffer']['buffer'],_0x309b60['elementByt'+'eSize']*_0x309b60['count']),_0x3a04cf=_0x5973dd['getVertexS'+'tream'](_0x6402b0,_0x58f6c9)*_0x309b60['numCompone'+'nts'];if(_0x309b60['count']+=_0x3a04cf,!_0xe17b3&&_0x309b60['numCompone'+'nts']>=0x1e97+-0x22d*-0x8+0x53*-0x94){if(_0x6402b0===Pe){const _0x1aeaa9=_0x379bf8['data'],_0x18af1e=_0x1aeaa9[-0x745*-0x2+0xf6d*0x1+-0x1df7],_0x16b516=_0x1aeaa9[-0xf54+-0x116*-0x2+0x3*0x463],_0x3a1d8d=_0x1aeaa9[0x12e*-0x1a+0x884+0x162a],_0x30e18c=_0x1aeaa9[-0x17*0x175+-0x1e7+0x236e],_0x6c6105=_0x1aeaa9[-0x15c5*-0x1+-0x26f0+0x8*0x226],_0x1d613e=_0x1aeaa9[0x102f*0x1+0x6*0xd4+0x70b*-0x3],_0x1068dd=_0x1aeaa9[-0x84+-0x158b+0x1617],_0x51384c=_0x1aeaa9[-0x1aff*-0x1+-0xb52+-0xfa4],_0x4d37f3=_0x1aeaa9[-0x894+0x177b+-0xedd],_0x42830a=_0x1aeaa9[-0x1887+0x30c*-0xa+0x370b],_0x5d6d91=_0x1aeaa9[0x136f+-0x1*0x699+-0xcc9],_0x5dfe66=_0x1aeaa9[-0xf7c+-0xbdc+0x1b66];let _0x466407,_0x47c5d5,_0x24bcb4;for(let _0x5cdda8=-0x5b2*0x2+-0x22a1+0x2e05;_0x5cdda8<_0x3a04cf;_0x5cdda8+=_0x309b60['numCompone'+'nts'])_0x466407=_0x58f6c9[_0x5cdda8],_0x47c5d5=_0x58f6c9[_0x5cdda8+(0x20fc+-0x731+-0x19ca)],_0x24bcb4=_0x58f6c9[_0x5cdda8+(-0xd1+-0x133*-0x11+-0x1390*0x1)],_0x58f6c9[_0x5cdda8]=_0x466407*_0x18af1e+_0x47c5d5*_0x30e18c+_0x24bcb4*_0x1068dd+_0x42830a,_0x58f6c9[_0x5cdda8+(0xbd0+0x85a*0x3+0x24dd*-0x1)]=_0x466407*_0x16b516+_0x47c5d5*_0x6c6105+_0x24bcb4*_0x51384c+_0x5d6d91,_0x58f6c9[_0x5cdda8+(0x7*-0x4ca+-0x251*-0x2+0x9a2*0x3)]=_0x466407*_0x3a1d8d+_0x47c5d5*_0x1d613e+_0x24bcb4*_0x4d37f3+_0x5dfe66;}else{if(_0x6402b0===gs||_0x6402b0===yi){Zm['invertMat4'](_0x379bf8)['transpose']();const [_0x2ee66f,_0x17cba9,_0x258a99,_0x4a5d8a,_0x2150b5,_0x5eb7ec,_0x9b8d74,_0x5c31aa,_0x4a72cf]=Zm['data'];let _0x2977b9,_0x4d8dc3,_0x421a8c;for(let _0x1a3fca=-0x1*0x2267+0x53+-0x2d7*-0xc;_0x1a3fca<_0x3a04cf;_0x1a3fca+=_0x309b60['numCompone'+'nts'])_0x2977b9=_0x58f6c9[_0x1a3fca],_0x4d8dc3=_0x58f6c9[_0x1a3fca+(-0xb*-0x8f+0x162*0xe+-0x1980)],_0x421a8c=_0x58f6c9[_0x1a3fca+(-0x346*-0x3+-0x21d3+0x1803)],_0x58f6c9[_0x1a3fca]=_0x2977b9*_0x2ee66f+_0x4d8dc3*_0x4a5d8a+_0x421a8c*_0x9b8d74,_0x58f6c9[_0x1a3fca+(0x1*-0xf8e+-0x8b+0x101a)]=_0x2977b9*_0x17cba9+_0x4d8dc3*_0x2150b5+_0x421a8c*_0x5c31aa,_0x58f6c9[_0x1a3fca+(0x1db8+0x20b*0x7+-0x251*0x13)]=_0x2977b9*_0x258a99+_0x4d8dc3*_0x5eb7ec+_0x421a8c*_0x4a72cf;}}}}if(_0xe17b3){_0x309b60=_0x2ce529[us];for(let _0xa04d86=-0x6ef+-0x120b+-0xc7d*-0x2;_0xa04d86<_0x36babc;_0xa04d86++)_0x309b60['buffer'][_0x309b60['count']++]=_0x3e4f6f;}if(_0x5973dd['primitive'][0x2d9*-0x5+-0x277+0x10b4]['indexed']){_0x16fe1f=_0x5973dd['primitive'][0x1e21+0x252b+-0x2*0x21a6]['base'],_0x1c9e74=_0x5973dd['primitive'][-0x91*0x19+-0xe*0x203+0x2a53]['baseVertex']||-0x20fe+-0x12e9+0x33e7,_0x23c80f=_0x5973dd['primitive'][-0x1e20+0x14b6+0x96a]['count'];const _0x5ed1dd=_0x5973dd['indexBuffe'+'r'][0x1e20+0x1b0f+-0x392f]['getFormat']();_0x496155=new Kc[_0x5ed1dd](_0x5973dd['indexBuffe'+'r'][-0x13bc+-0x34e+0x170a]['storage']);}else{_0x1c9e74=0x51*-0x61+-0x2614+0x23*0x1f7;const _0x58cfe1=_0x5973dd['primitive'][-0x2299+-0xc8c+0x2f25]['type'];if(_0x58cfe1===sa||_0x58cfe1===vr){if(_0x5973dd['primitive'][-0x1e7f+-0x20a9+0x3f28]['count']===-0x916+0x1a72+0x3c*-0x4a)_0x16fe1f=-0xa*-0x359+-0x2*0x1036+-0x10e,_0x23c80f=-0xf5*-0x11+0x1c04+-0x1*0x2c43,_0x496155=_0x58cfe1===sa?Xw:qw;else{_0x23c80f=-0x75*0x3+0x124e+-0x10ef;continue;}}}for(let _0x44fc75=-0xba7+0x1c68+-0x10c1;_0x44fc75<_0x23c80f;_0x44fc75++)_0x429cec[_0x44fc75+_0x5747bf]=_0x496155[_0x16fe1f+_0x44fc75]+_0x1c9e74+_0xc17747;_0x5747bf+=_0x23c80f,_0xc17747+=_0x36babc;}_0x5973dd=new Ge(this['device']);for(_0x6402b0 in _0x2ce529)_0x309b60=_0x2ce529[_0x6402b0],_0x5973dd['setVertexS'+'tream'](_0x6402b0,_0x309b60['buffer'],_0x309b60['numCompone'+'nts'],void(-0x34e+-0x13c1+0x170f),_0x309b60['dataType'],_0x309b60['normalize']);_0x429cec['length']>-0x3*0x569+0x232e+-0x12f3&&_0x5973dd['setIndices'](_0x429cec),_0x5973dd['update'](qs,!(0x24a3+0x47*0x7f+-0x47db)),_0xe17b3&&(_0x4a2865=_0x4a2865['clone'](),_0x4a2865['update']());const _0x358fa8=new He(_0x5973dd,_0x4a2865,this['rootNode']);_0x358fa8['castShadow']=_0x21a985['origMeshIn'+'stances'][0x14*0x181+0x23c*-0xd+-0x6*0x2c]['castShadow'],_0x358fa8['parameters']=_0x21a985['origMeshIn'+'stances'][-0x1*-0xebf+0x2217+0x7*-0x6fa]['parameters'],_0x358fa8['layer']=_0x21a985['origMeshIn'+'stances'][-0x1*0x163d+0x206d*0x1+0x10*-0xa3]['layer'],_0x358fa8['_shaderDef'+'s']=_0x21a985['origMeshIn'+'stances'][0x426+0x92e+-0xd54]['_shaderDef'+'s'],_0x358fa8['batching']=!(0x5*-0x1c8+0x11*-0xfb+-0x1993*-0x1),_0x358fa8['cull']=_0x21a985['origMeshIn'+'stances'][0x23e7+-0x2*0x10e1+-0xb7*0x3]['cull'];const _0x394234=this['_batchGrou'+'ps'][_0x30f5d3];if(_0x394234&&_0x394234['_ui']&&(_0x358fa8['cull']=!(-0x2321+-0xbaf*0x1+0x2ed1)),_0xe17b3){const _0x23e17b=[];for(let _0x36cdb8=-0x11a*0x23+-0xf5f+0x35ed;_0x36cdb8<_0x21a985['origMeshIn'+'stances']['length'];_0x36cdb8++)_0x23e17b['push'](_0x21a985['origMeshIn'+'stances'][_0x36cdb8]['node']);_0x358fa8['skinInstan'+'ce']=new Wm(this['device'],_0x23e17b,this['rootNode']);}_0x358fa8['_updateAab'+'b']=!(-0x2fc*-0x5+0xb05+-0x19f0*0x1),_0x358fa8['drawOrder']=_0x21a985['origMeshIn'+'stances'][-0xd82+0x1*0x52a+0x858]['drawOrder'],_0x358fa8['stencilFro'+'nt']=_0x21a985['origMeshIn'+'stances'][-0x76c+-0x991+0x10fd]['stencilFro'+'nt'],_0x358fa8['stencilBac'+'k']=_0x21a985['origMeshIn'+'stances'][-0x18a7+0xb29*-0x3+0x3a22]['stencilBac'+'k'],_0x358fa8['flipFacesF'+'actor']=Ad(_0x21a985['origMeshIn'+'stances'][-0x1d89+0x16c2+0x15b*0x5]),_0x358fa8['castShadow']=_0x21a985['origMeshIn'+'stances'][-0x43f*-0x2+0x1*0x124d+-0x1acb]['castShadow'],_0x21a985['meshInstan'+'ce']=_0x358fa8,_0x21a985['updateBoun'+'dingBox']();}return this['_stats']['createTime']+=de()-_0x485420,_0x21a985;}['updateAll'](){this['_dirtyGrou'+'ps']['length']>0xb9*0xd+-0x657+0x22*-0x17&&this['generate'](this['_dirtyGrou'+'ps']);const _0x5665c8=de();for(let _0xe42e77=-0x7be+-0x1*0x189b+-0x5b*-0x5b;_0xe42e77<this['_batchList']['length'];_0xe42e77++)this['_batchList'][_0xe42e77]['dynamic']&&this['_batchList'][_0xe42e77]['updateBoun'+'dingBox']();this['_stats']['updateLast'+'FrameTime']=de()-_0x5665c8;}['clone'](_0x5898ea,_0x386ada){const _0x3f7c3c=new Gm(_0x386ada,_0x5898ea['dynamic'],_0x5898ea['batchGroup'+'Id']);this['_batchList']['push'](_0x3f7c3c);const _0x32abc5=[];for(let _0x163bae=0x2389+0xeb4+-0x323d;_0x163bae<_0x386ada['length'];_0x163bae++)_0x32abc5['push'](_0x386ada[_0x163bae]['node']);return _0x3f7c3c['meshInstan'+'ce']=new He(_0x5898ea['meshInstan'+'ce']['mesh'],_0x5898ea['meshInstan'+'ce']['material'],_0x5898ea['meshInstan'+'ce']['node']),_0x3f7c3c['meshInstan'+'ce']['_updateAab'+'b']=!(-0x15fa*-0x1+-0x2689*-0x1+-0x3c82*0x1),_0x3f7c3c['meshInstan'+'ce']['parameters']=_0x386ada[0x1707+0xb6b*-0x1+0x2e7*-0x4]['parameters'],_0x3f7c3c['meshInstan'+'ce']['cull']=_0x386ada[-0x102*-0xd+0x85e+-0x1578]['cull'],_0x3f7c3c['meshInstan'+'ce']['layer']=_0x386ada[0x2411*0x1+-0x16a*-0x1+-0x257b]['layer'],_0x5898ea['dynamic']&&(_0x3f7c3c['meshInstan'+'ce']['skinInstan'+'ce']=new Wm(this['device'],_0x32abc5,this['rootNode'])),_0x3f7c3c['meshInstan'+'ce']['castShadow']=_0x5898ea['meshInstan'+'ce']['castShadow'],_0x3f7c3c;}['destroyBat'+'ch'](_0x3e41c2){_0x3e41c2['destroy'](this['scene'],this['_batchGrou'+'ps'][_0x3e41c2['batchGroup'+'Id']]['layers']);}}const Jm='uSceneColo'+'rMap';class Kw extends ys{constructor(){super(...arguments),h(this,'colorRende'+'rTarget',null),h(this,'source',null);}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']);}['shouldReal'+'locate'](_0x4a447a,_0x1bdab4,_0x3acff2){if((_0x4a447a==null?void(0x2208+-0x32*-0xc8+-0x4918*0x1):_0x4a447a['colorBuffe'+'r']['format'])!==_0x3acff2)return!(-0x2ea+-0x548+-0x832*-0x1);const _0x118051=(_0x1bdab4==null?void(-0x1*-0x1359+0xb*0x135+-0x20a0):_0x1bdab4['width'])||this['device']['width'],_0x235503=(_0x1bdab4==null?void(0x997+0x2db+-0xc72):_0x1bdab4['height'])||this['device']['height'];return!_0x4a447a||_0x118051!==_0x4a447a['width']||_0x235503!==_0x4a447a['height'];}['allocateRe'+'nderTarget'](_0x4cc1f9,_0x2f4f3a,_0x3e2c85,_0x589a6a){const _0x42e079=new _e(_0x3e2c85,{'name':Jm,'format':_0x589a6a,'width':_0x2f4f3a?_0x2f4f3a['colorBuffe'+'r']['width']:_0x3e2c85['width'],'height':_0x2f4f3a?_0x2f4f3a['colorBuffe'+'r']['height']:_0x3e2c85['height'],'mipmaps':!(-0x3*-0x669+0x1*0xb76+-0x1eb1),'minFilter':ha,'magFilter':vt,'addressU':ue,'addressV':ue});return _0x4cc1f9?(_0x4cc1f9['destroyFra'+'meBuffers'](),_0x4cc1f9['_colorBuff'+'er']=_0x42e079,_0x4cc1f9['_colorBuff'+'ers']=[_0x42e079]):_0x4cc1f9=new gt({'name':'ColorGrabR'+'T','colorBuffer':_0x42e079,'depth':!(0x10d9+-0x2247*0x1+-0x1*-0x116f),'stencil':!(-0x9*-0x38a+0x2*0xc22+0x34d*-0x11),'autoResolve':!(-0x16b*-0x6+-0x24e8+0x1c67)}),_0x4cc1f9;}['releaseRen'+'derTarget'](_0x124ded){_0x124ded&&(_0x124ded['destroyTex'+'tureBuffer'+'s'](),_0x124ded['destroy']());}['frameUpdat'+'e'](){const _0x454978=this['device'],_0x3947c0=this['source'],_0x3ae1e6=(_0x3947c0==null?void(0x14fd+0x1b27+-0x3024):_0x3947c0['colorBuffe'+'r']['format'])??this['device']['backBuffer'+'Format'];this['shouldReal'+'locate'](this['colorRende'+'rTarget'],_0x3947c0==null?void(0x76b*-0x3+0xb*-0x2e+0x183b):_0x3947c0['colorBuffe'+'r'],_0x3ae1e6)&&(this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']),this['colorRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['colorRende'+'rTarget'],_0x3947c0,_0x454978,_0x3ae1e6));const _0x50108f=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x454978['scope']['resolve'](Jm)['setValue'](_0x50108f);}['execute'](){const _0x37b1a5=this['device'];Q['pushGpuMar'+'ker'](_0x37b1a5,'GRAB-COLOR');const _0x45a57a=this['source'],_0x2aa82b=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x37b1a5['isWebGPU']?(_0x37b1a5['copyRender'+'Target'](_0x45a57a,this['colorRende'+'rTarget'],!(-0x117*0xb+-0x184e+-0x1e9*-0x13),!(-0xb00+-0x1*-0x2089+-0x1588)),_0x37b1a5['mipmapRend'+'erer']['generate'](this['colorRende'+'rTarget']['colorBuffe'+'r']['impl'])):(_0x37b1a5['copyRender'+'Target'](_0x45a57a,this['colorRende'+'rTarget'],!(-0x8f7+0x1*0x3f+-0x3e*-0x24),!(0x1*0xe19+-0xc7*-0xe+-0x18fa)),_0x37b1a5['activeText'+'ure'](_0x37b1a5['maxCombine'+'dTextures']-(0xf53+0x4*0x610+-0x2792)),_0x37b1a5['bindTextur'+'e'](_0x2aa82b),_0x37b1a5['gl']['generateMi'+'pmap'](_0x2aa82b['impl']['_glTarget'])),Q['popGpuMark'+'er'](_0x37b1a5);}}const e_='uSceneDept'+'hMap';class Zw extends ys{constructor(_0xa196b4,_0x388676){super(_0xa196b4),h(this,'depthRende'+'rTarget',null),h(this,'camera',null),this['camera']=_0x388676;}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']);}['shouldReal'+'locate'](_0x223922,_0x56f476){const _0x27db15=(_0x56f476==null?void(0x3cc+-0x3*0x16f+0x1*0x81):_0x56f476['width'])||this['device']['width'],_0x523798=(_0x56f476==null?void(0x17*-0x10d+0x65*-0x10+0xa29*0x3):_0x56f476['height'])||this['device']['height'];return!_0x223922||_0x27db15!==_0x223922['width']||_0x523798!==_0x223922['height'];}['allocateRe'+'nderTarget'](_0x1ebb21,_0x1ed1a5,_0x3cdbde,_0x4323cc,_0x4e3463){const _0x472990=new _e(_0x3cdbde,{'name':e_,'format':_0x4323cc,'width':_0x1ed1a5?_0x1ed1a5['colorBuffe'+'r']['width']:_0x3cdbde['width'],'height':_0x1ed1a5?_0x1ed1a5['colorBuffe'+'r']['height']:_0x3cdbde['height'],'mipmaps':!(-0x2*-0x102a+0x2480+0x15*-0x347),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});return _0x1ebb21?(_0x1ebb21['destroyFra'+'meBuffers'](),_0x4e3463?_0x1ebb21['_depthBuff'+'er']=_0x472990:(_0x1ebb21['_colorBuff'+'er']=_0x472990,_0x1ebb21['_colorBuff'+'ers']=[_0x472990])):_0x1ebb21=new gt({'name':'DepthGrabR'+'T','colorBuffer':_0x4e3463?null:_0x472990,'depthBuffer':_0x4e3463?_0x472990:null,'depth':!_0x4e3463,'stencil':_0x3cdbde['supportsSt'+'encil'],'autoResolve':!(-0x15ee+0x13*-0x10b+-0xa70*-0x4)}),_0x1ebb21;}['releaseRen'+'derTarget'](_0x3c4493){_0x3c4493&&(_0x3c4493['destroyTex'+'tureBuffer'+'s'](),_0x3c4493['destroy']());}['before'](){var _0x387f82,_0xcf9b84;const _0x32ea71=this['camera'],_0x4e2d95=this['device'],_0x4d301b=(_0x32ea71==null?void(-0x1*-0x3c2+-0x10f*0x1b+0x29*0x9b):_0x32ea71['renderTarg'+'et'])??_0x4e2d95['backBuffer'];let _0x250f69=!(0x19a+-0x2681*0x1+0x3*0xc4d),_0x164d81=_0x4d301b['stencil']?Oh:Wi;_0x4e2d95['isWebGPU']&&_0x4d301b['samples']>-0xb*-0x12d+-0x1c7*-0xc+-0x1121*0x2&&(_0x164d81=Qi,_0x250f69=!(0x2381*-0x1+0x729+0x1c59));const _0x3db9ab=((_0x387f82=_0x32ea71['renderTarg'+'et'])==null?void(0x6c4*-0x4+0x19a7+0x169):_0x387f82['depthBuffe'+'r'])??((_0xcf9b84=_0x32ea71['renderTarg'+'et'])==null?void(0x12b1+-0x10b2+-0x1ff):_0xcf9b84['colorBuffe'+'r']);this['shouldReal'+'locate'](this['depthRende'+'rTarget'],_0x3db9ab)&&(this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']),this['depthRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['depthRende'+'rTarget'],_0x32ea71['renderTarg'+'et'],_0x4e2d95,_0x164d81,_0x250f69));const _0x3d4770=_0x250f69?this['depthRende'+'rTarget']['depthBuffe'+'r']:this['depthRende'+'rTarget']['colorBuffe'+'r'];_0x4e2d95['scope']['resolve'](e_)['setValue'](_0x3d4770);}['execute'](){const _0x5301ff=this['device'];if(Q['pushGpuMar'+'ker'](_0x5301ff,'GRAB-DEPTH'),_0x5301ff['isWebGL2']&&_0x5301ff['renderTarg'+'et']['samples']>-0x12fa*-0x1+-0xf02*-0x1+-0x21fb){const _0x2f9f55=_0x5301ff['renderTarg'+'et']['impl']['_glFrameBu'+'ffer'],_0x38c733=this['depthRende'+'rTarget'];_0x5301ff['renderTarg'+'et']=_0x38c733,_0x5301ff['updateBegi'+'n'](),this['depthRende'+'rTarget']['impl']['internalRe'+'solve'](_0x5301ff,_0x2f9f55,_0x38c733['impl']['_glFrameBu'+'ffer'],this['depthRende'+'rTarget'],_0x5301ff['gl']['DEPTH_BUFF'+'ER_BIT']);}else _0x5301ff['copyRender'+'Target'](_0x5301ff['renderTarg'+'et'],this['depthRende'+'rTarget'],!(0x201*0x3+-0x18a+-0x2c*0x1a),!(-0x1*0x1e0d+-0x1197+-0x2*-0x17d2));Q['popGpuMark'+'er'](_0x5301ff);}}class Uy{constructor(){h(this,'_gammaCorr'+'ection',Ec),h(this,'_toneMappi'+'ng',Mp),h(this,'_srgbRende'+'rTarget',!(-0x1*0x137e+0x272+0x110d)),h(this,'_ssaoEnabl'+'ed',!(0xd*-0x25f+0x1*0xbc+0x1e18)),h(this,'_fog',Hn),h(this,'_sceneDept'+'hMapLinear',!(-0x6*-0x668+-0x2d7+-0x2398*0x1)),h(this,'_hash'),h(this,'_defines',new Map()),h(this,'_definesDi'+'rty',!(0x9*-0x18d+-0x1*-0xb45+0x2b0));}get['hash'](){if(this['_hash']===void(0x2b*-0x2d+0x25*-0xf1+0x2a64)){const _0x403538=this['gammaCorre'+'ction']+'_'+this['toneMappin'+'g']+'_'+this['srgbRender'+'Target']+'_'+this['fog']+'_'+this['ssaoEnable'+'d']+'_'+this['sceneDepth'+'MapLinear'];this['_hash']=hi(_0x403538);}return this['_hash'];}get['defines'](){const _0x392299=this['_defines'];return this['_definesDi'+'rty']&&(this['_definesDi'+'rty']=!(0x89*0x29+0x9e2+-0x1*0x1fd2),_0x392299['clear'](),this['_sceneDept'+'hMapLinear']&&_0x392299['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',!(-0xa6*-0x2c+0x18*-0x148+-0x2*-0x11c)),_0x392299['set']('FOG',this['_fog']['toUpperCas'+'e']()),_0x392299['set']('TONEMAP',by[this['_toneMappi'+'ng']]),_0x392299['set']('GAMMA',ow[this['shaderOutp'+'utGamma']])),_0x392299;}['markDirty'](){this['_hash']=void(0x265*-0x6+-0x1726+0x2584),this['_definesDi'+'rty']=!(0x4*0x90d+-0x2395+-0x9f);}set['fog'](_0x974859){this['_fog']!==_0x974859&&(this['_fog']=_0x974859,this['markDirty']());}get['fog'](){return this['_fog'];}set['ssaoEnable'+'d'](_0x3c3f15){this['_ssaoEnabl'+'ed']!==_0x3c3f15&&(this['_ssaoEnabl'+'ed']=_0x3c3f15,this['markDirty']());}get['ssaoEnable'+'d'](){return this['_ssaoEnabl'+'ed'];}set['gammaCorre'+'ction'](_0x2e8e01){this['_gammaCorr'+'ectionAssi'+'gned']=!(0x22dc+-0x32*-0x73+0xfd*-0x3a),this['_gammaCorr'+'ection']!==_0x2e8e01&&(this['_gammaCorr'+'ection']=_0x2e8e01,this['markDirty']());}get['gammaCorre'+'ction'](){return this['_gammaCorr'+'ection'];}set['toneMappin'+'g'](_0x382e19){this['_toneMappi'+'ng']!==_0x382e19&&(this['_toneMappi'+'ng']=_0x382e19,this['markDirty']());}get['toneMappin'+'g'](){return this['_toneMappi'+'ng'];}set['srgbRender'+'Target'](_0x506faf){this['_srgbRende'+'rTarget']!==_0x506faf&&(this['_srgbRende'+'rTarget']=_0x506faf,this['markDirty']());}get['srgbRender'+'Target'](){return this['_srgbRende'+'rTarget'];}set['sceneDepth'+'MapLinear'](_0x16d503){this['_sceneDept'+'hMapLinear']!==_0x16d503&&(this['_sceneDept'+'hMapLinear']=_0x16d503,this['markDirty']());}get['sceneDepth'+'MapLinear'](){return this['_sceneDept'+'hMapLinear'];}get['shaderOutp'+'utGamma'](){return this['_gammaCorr'+'ection']===Ec&&!this['_srgbRende'+'rTarget']?Ec:yl;}}const Ca=new D(),Qn=new D(),t_=new D(),s_=new te(),Qw=[new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D()];class Tl{constructor(){h(this,'shaderPass'+'Info',null),h(this,'renderPass'+'ColorGrab',null),h(this,'renderPass'+'DepthGrab',null),h(this,'fogParams',null),h(this,'shaderPara'+'ms',new Uy()),h(this,'renderPass'+'es',[]),h(this,'jitter',0x5*-0x5aa+-0x1abd+0x370f),(this['_aspectRat'+'io']=(-0x4c*0x60+0x2*-0x75a+0x2b44)/(0x2b*-0x47+-0x2e*-0x77+-0x96c),this['_aspectRat'+'ioMode']=kp,this['_calculate'+'Projection']=null,this['_calculate'+'Transform']=null,this['_clearColo'+'r']=new ie(0x50e+0x4a7*-0x3+0x8e7+0.75,0x30*0x66+-0x335*-0x1+-0x1655+0.75,0x17af+0x1a3*-0x17+0xdf6+0.75,-0x1b61+-0x71c+-0x6e6*-0x5),this['_clearColo'+'rBuffer']=!(-0x1a24+0x213e+-0x6*0x12f),this['_clearDept'+'h']=0xb0a+0xb31+-0x163a,this['_clearDept'+'hBuffer']=!(-0x1*0x1343+-0x271*0x1+0x15b4*0x1),this['_clearSten'+'cil']=-0xf6f+0x1*-0x743+0x16b2,this['_clearSten'+'cilBuffer']=!(-0x1263+0x1*-0x25bc+-0x3*-0x12b5),this['_cullFaces']=!(-0x2*-0xe8f+0x1*0x18d1+-0x35ef),this['_farClip']=-0x2667+-0x1909+0x4358,this['_flipFaces']=!(0x9e0+-0x1653*-0x1+-0x2032),this['_fov']=-0x17d3+0xfc1+0x83f,this['_frustumCu'+'lling']=!(-0x525*0x1+-0x1511+0x5*0x53e),this['_horizonta'+'lFov']=!(0x12b*0x1+0x1527*0x1+-0xc5*0x1d),this['_layers']=[Ji,ps,wp,Sl,Ep],this['_layersSet']=new Set(this['_layers']),this['_nearClip']=-0x11ef*-0x1+-0x139*0x8+0x827*-0x1+0.1,this['_node']=null,this['_orthoHeig'+'ht']=0x379+0x187f+-0x6e*0x41,this['_projectio'+'n']=ni,this['_rect']=new re(-0x31*0x7c+-0x13b9+0x2b75,0x741*-0x3+0x141d+0x1a6,0x762+-0xbc*-0x1+-0x81d,-0x1*-0x24c9+-0x2b*-0x1+-0x24f3*0x1),this['_renderTar'+'get']=null,this['_scissorRe'+'ct']=new re(-0xc9*0xe+0x10*-0x18f+0x23ee,0x5f*0x35+-0x1*0x761+-0xc4a,-0xfd3+0x181e+-0x84a,0x179c+0x1d5+0x32e*-0x8),this['_scissorRe'+'ctClear']=!(-0x2651+-0x1eb*0x1+0x283d),this['_aperture']=0x18b9+0x13bb+-0x2c64,this['_shutter']=(0x2223+0x23fc+0x703*-0xa)/(-0x9d0+-0x2*-0x8ff+-0x446),this['_sensitivi'+'ty']=-0x1*0x8e7+0x859+0x476,this['_projMat']=new te(),this['_projMatDi'+'rty']=!(0x22a*-0x2+-0x897*0x2+-0xac1*-0x2),this['_projMatSk'+'ybox']=new te(),this['_viewMat']=new te(),this['_viewMatDi'+'rty']=!(-0xc77+0x23fc+0x9*-0x29d),this['_viewProjM'+'at']=new te(),this['_viewProjM'+'atDirty']=!(-0x5*0x556+-0x14f*0x14+0x34da),this['_shaderMat'+'ricesVersi'+'on']=0xbc1+-0x9*-0x287+-0x450*0x8,this['_viewProjI'+'nverse']=new te(),this['_viewProjC'+'urrent']=null,this['_viewProjP'+'revious']=new te(),this['_jitters']=[-0x2*-0x520+-0x267*-0xf+-0x2e49,0x26db+-0xb*0xb2+-0x1f35,0x30f*0x9+-0x1d67+0xc*0x28,-0x24ab+0xa48+0x7*0x3c5],this['frustum']=new k0(),this['_xr']=null,this['_xrPropert'+'ies']={'horizontalFov':this['_horizonta'+'lFov'],'fov':this['_fov'],'aspectRatio':this['_aspectRat'+'io'],'farClip':this['_farClip'],'nearClip':this['_nearClip']});}['destroy'](){var _0x2953de,_0x4dacae;(_0x2953de=this['renderPass'+'ColorGrab'])==null||_0x2953de['destroy'](),this['renderPass'+'ColorGrab']=null,(_0x4dacae=this['renderPass'+'DepthGrab'])==null||_0x4dacae['destroy'](),this['renderPass'+'DepthGrab']=null,this['renderPass'+'es']['length']=0x1d62+-0x43*0x13+-0x1869;}['_storeShad'+'erMatrices'](_0xa9736b,_0x4bf212,_0x32cd91,_0x32c23a){this['_shaderMat'+'ricesVersi'+'on']!==_0x32c23a&&(this['_shaderMat'+'ricesVersi'+'on']=_0x32c23a,this['_viewProjP'+'revious']['copy'](this['_viewProjC'+'urrent']??_0xa9736b),this['_viewProjC'+'urrent']??(this['_viewProjC'+'urrent']=new te()),this['_viewProjC'+'urrent']['copy'](_0xa9736b),this['_viewProjI'+'nverse']['invert'](_0xa9736b),this['_jitters'][-0x692+0x1431+-0xd9d]=this['_jitters'][-0x4*0x96c+0x11b5*-0x1+0x3765],this['_jitters'][-0x1b*-0x88+-0x305*0xb+0x2*0x971]=this['_jitters'][0x121e*0x1+0xf1*0xd+-0x1e5a],this['_jitters'][-0x2b3*0x2+-0xc4d*0x3+0x11*0x27d]=_0x4bf212,this['_jitters'][-0xd3*-0x2f+0x1a03+-0x1*0x40bf]=_0x32cd91);}get['fullSizeCl'+'earRect'](){const _0x3e2d82=this['_scissorRe'+'ctClear']?this['scissorRec'+'t']:this['_rect'];return _0x3e2d82['x']===-0x11cd+-0x237*-0x7+0x24c&&_0x3e2d82['y']===0x1*0x19dd+0x55*-0x22+0xe93*-0x1&&_0x3e2d82['z']===0x2699+-0xcb2+0xc3*-0x22&&_0x3e2d82['w']===0x1884+-0x3d*0x35+0x12*-0xa9;}set['aspectRati'+'o'](_0x52aa21){this['_aspectRat'+'io']!==_0x52aa21&&(this['_aspectRat'+'io']=_0x52aa21,this['_projMatDi'+'rty']=!(0xe75*0x2+0x1499*0x1+-0x3183));}get['aspectRati'+'o'](){var _0x521405;return(_0x521405=this['xr'])!=null&&_0x521405['active']?this['_xrPropert'+'ies']['aspectRati'+'o']:this['_aspectRat'+'io'];}set['aspectRati'+'oMode'](_0x2a1b4b){this['_aspectRat'+'ioMode']!==_0x2a1b4b&&(this['_aspectRat'+'ioMode']=_0x2a1b4b,this['_projMatDi'+'rty']=!(0x25c9+0xc0f+0x8*-0x63b));}get['aspectRati'+'oMode'](){return this['_aspectRat'+'ioMode'];}set['calculateP'+'rojection'](_0x33ca86){this['_calculate'+'Projection']=_0x33ca86,this['_projMatDi'+'rty']=!(0x2*-0x9c7+0x1b3a+-0x7ac);}get['calculateP'+'rojection'](){return this['_calculate'+'Projection'];}set['calculateT'+'ransform'](_0x1e8e44){this['_calculate'+'Transform']=_0x1e8e44;}get['calculateT'+'ransform'](){return this['_calculate'+'Transform'];}set['clearColor'](_0x23766c){this['_clearColo'+'r']['copy'](_0x23766c);}get['clearColor'](){return this['_clearColo'+'r'];}set['clearColor'+'Buffer'](_0x3fb030){this['_clearColo'+'rBuffer']=_0x3fb030;}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'](_0x53e21a){this['_clearDept'+'h']=_0x53e21a;}get['clearDepth'](){return this['_clearDept'+'h'];}set['clearDepth'+'Buffer'](_0x32f5ce){this['_clearDept'+'hBuffer']=_0x32f5ce;}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'il'](_0x1b9d58){this['_clearSten'+'cil']=_0x1b9d58;}get['clearStenc'+'il'](){return this['_clearSten'+'cil'];}set['clearStenc'+'ilBuffer'](_0x1c8c3b){this['_clearSten'+'cilBuffer']=_0x1c8c3b;}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}set['cullFaces'](_0xf81f28){this['_cullFaces']=_0xf81f28;}get['cullFaces'](){return this['_cullFaces'];}set['farClip'](_0x4c1e0b){this['_farClip']!==_0x4c1e0b&&(this['_farClip']=_0x4c1e0b,this['_projMatDi'+'rty']=!(0x1*-0x13fc+-0x289*-0xd+-0xcf9));}get['farClip'](){var _0x21b938;return(_0x21b938=this['xr'])!=null&&_0x21b938['active']?this['_xrPropert'+'ies']['farClip']:this['_farClip'];}set['flipFaces'](_0x2984be){this['_flipFaces']=_0x2984be;}get['flipFaces'](){return this['_flipFaces'];}set['fov'](_0x310ffb){this['_fov']!==_0x310ffb&&(this['_fov']=_0x310ffb,this['_projMatDi'+'rty']=!(-0x293*0x3+-0x1f*-0x3e+0x5*0xb));}get['fov'](){var _0x4378fe;return(_0x4378fe=this['xr'])!=null&&_0x4378fe['active']?this['_xrPropert'+'ies']['fov']:this['_fov'];}set['frustumCul'+'ling'](_0x1c5158){this['_frustumCu'+'lling']=_0x1c5158;}get['frustumCul'+'ling'](){return this['_frustumCu'+'lling'];}set['horizontal'+'Fov'](_0x200a9f){this['_horizonta'+'lFov']!==_0x200a9f&&(this['_horizonta'+'lFov']=_0x200a9f,this['_projMatDi'+'rty']=!(-0x1*-0xd11+0x1f35+-0x2c46));}get['horizontal'+'Fov'](){var _0x44b99f;return(_0x44b99f=this['xr'])!=null&&_0x44b99f['active']?this['_xrPropert'+'ies']['horizontal'+'Fov']:this['_horizonta'+'lFov'];}set['layers'](_0x101971){this['_layers']=_0x101971['slice'](-0x202*0x5+-0x1694+0x209e),this['_layersSet']=new Set(this['_layers']);}get['layers'](){return this['_layers'];}get['layersSet'](){return this['_layersSet'];}set['nearClip'](_0x4a8ce1){this['_nearClip']!==_0x4a8ce1&&(this['_nearClip']=_0x4a8ce1,this['_projMatDi'+'rty']=!(-0x257f+0x3*0xc17+-0x9d*-0x2));}get['nearClip'](){var _0x551114;return(_0x551114=this['xr'])!=null&&_0x551114['active']?this['_xrPropert'+'ies']['nearClip']:this['_nearClip'];}set['node'](_0x79e51b){this['_node']=_0x79e51b;}get['node'](){return this['_node'];}set['orthoHeigh'+'t'](_0x39e59e){this['_orthoHeig'+'ht']!==_0x39e59e&&(this['_orthoHeig'+'ht']=_0x39e59e,this['_projMatDi'+'rty']=!(-0x1ba3+-0x392+-0x1*-0x1f35));}get['orthoHeigh'+'t'](){return this['_orthoHeig'+'ht'];}set['projection'](_0x4ed609){this['_projectio'+'n']!==_0x4ed609&&(this['_projectio'+'n']=_0x4ed609,this['_projMatDi'+'rty']=!(0x2071+0x218e*0x1+0x41ff*-0x1));}get['projection'](){return this['_projectio'+'n'];}get['projection'+'Matrix'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMat'];}set['rect'](_0x29349d){this['_rect']['copy'](_0x29349d);}get['rect'](){return this['_rect'];}set['renderTarg'+'et'](_0x335a20){this['_renderTar'+'get']=_0x335a20;}get['renderTarg'+'et'](){return this['_renderTar'+'get'];}set['scissorRec'+'t'](_0x1eba10){this['_scissorRe'+'ct']['copy'](_0x1eba10);}get['scissorRec'+'t'](){return this['_scissorRe'+'ct'];}get['viewMatrix'](){if(this['_viewMatDi'+'rty']){const _0x3c73c7=this['_node']['getWorldTr'+'ansform']();this['_viewMat']['copy'](_0x3c73c7)['invert'](),this['_viewMatDi'+'rty']=!(0x1*-0x15b9+-0x1a9*-0x4+-0x78b*-0x2);}return this['_viewMat'];}set['aperture'](_0x510769){this['_aperture']=_0x510769;}get['aperture'](){return this['_aperture'];}set['sensitivit'+'y'](_0xcfbeb9){this['_sensitivi'+'ty']=_0xcfbeb9;}get['sensitivit'+'y'](){return this['_sensitivi'+'ty'];}set['shutter'](_0x4d678c){this['_shutter']=_0x4d678c;}get['shutter'](){return this['_shutter'];}set['xr'](_0x32faab){this['_xr']!==_0x32faab&&(this['_xr']=_0x32faab,this['_projMatDi'+'rty']=!(-0x1dda*-0x1+0x3c*-0x1+-0x1d9e));}get['xr'](){return this['_xr'];}['clone'](){return new Tl()['copy'](this);}['copy'](_0x1fe0db){return this['_aspectRat'+'io']=_0x1fe0db['_aspectRat'+'io'],this['_farClip']=_0x1fe0db['_farClip'],this['_fov']=_0x1fe0db['_fov'],this['_horizonta'+'lFov']=_0x1fe0db['_horizonta'+'lFov'],this['_nearClip']=_0x1fe0db['_nearClip'],this['_xrPropert'+'ies']['aspectRati'+'o']=_0x1fe0db['_xrPropert'+'ies']['aspectRati'+'o'],this['_xrPropert'+'ies']['farClip']=_0x1fe0db['_xrPropert'+'ies']['farClip'],this['_xrPropert'+'ies']['fov']=_0x1fe0db['_xrPropert'+'ies']['fov'],this['_xrPropert'+'ies']['horizontal'+'Fov']=_0x1fe0db['_xrPropert'+'ies']['horizontal'+'Fov'],this['_xrPropert'+'ies']['nearClip']=_0x1fe0db['_xrPropert'+'ies']['nearClip'],this['aspectRati'+'oMode']=_0x1fe0db['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x1fe0db['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x1fe0db['calculateT'+'ransform'],this['clearColor']=_0x1fe0db['clearColor'],this['clearColor'+'Buffer']=_0x1fe0db['clearColor'+'Buffer'],this['clearDepth']=_0x1fe0db['clearDepth'],this['clearDepth'+'Buffer']=_0x1fe0db['clearDepth'+'Buffer'],this['clearStenc'+'il']=_0x1fe0db['clearStenc'+'il'],this['clearStenc'+'ilBuffer']=_0x1fe0db['clearStenc'+'ilBuffer'],this['cullFaces']=_0x1fe0db['cullFaces'],this['flipFaces']=_0x1fe0db['flipFaces'],this['frustumCul'+'ling']=_0x1fe0db['frustumCul'+'ling'],this['layers']=_0x1fe0db['layers'],this['orthoHeigh'+'t']=_0x1fe0db['orthoHeigh'+'t'],this['projection']=_0x1fe0db['projection'],this['rect']=_0x1fe0db['rect'],this['renderTarg'+'et']=_0x1fe0db['renderTarg'+'et'],this['scissorRec'+'t']=_0x1fe0db['scissorRec'+'t'],this['aperture']=_0x1fe0db['aperture'],this['shutter']=_0x1fe0db['shutter'],this['sensitivit'+'y']=_0x1fe0db['sensitivit'+'y'],this['shaderPass'+'Info']=_0x1fe0db['shaderPass'+'Info'],this['jitter']=_0x1fe0db['jitter'],this['_projMatDi'+'rty']=!(0x1fca+-0x25f1+0x627),this;}['_enableRen'+'derPassCol'+'orGrab'](_0x49c145,_0x242b69){var _0x5c9444;_0x242b69?this['renderPass'+'ColorGrab']||(this['renderPass'+'ColorGrab']=new Kw(_0x49c145)):((_0x5c9444=this['renderPass'+'ColorGrab'])==null||_0x5c9444['destroy'](),this['renderPass'+'ColorGrab']=null);}['_enableRen'+'derPassDep'+'thGrab'](_0x32c22b,_0xcffa40,_0x2c35d7){var _0x43143d;_0x2c35d7?this['renderPass'+'DepthGrab']||(this['renderPass'+'DepthGrab']=new Zw(_0x32c22b,this)):((_0x43143d=this['renderPass'+'DepthGrab'])==null||_0x43143d['destroy'](),this['renderPass'+'DepthGrab']=null);}['_updateVie'+'wProjMat'](){(this['_projMatDi'+'rty']||this['_viewMatDi'+'rty']||this['_viewProjM'+'atDirty'])&&(this['_viewProjM'+'at']['mul2'](this['projection'+'Matrix'],this['viewMatrix']),this['_viewProjM'+'atDirty']=!(-0x1*-0x1c4+-0x3ef+0x8b*0x4));}['worldToScr'+'een'](_0x2c567a,_0x4e72c4,_0x13ec1f,_0x2773e5=new D()){this['_updateVie'+'wProjMat'](),this['_viewProjM'+'at']['transformP'+'oint'](_0x2c567a,_0x2773e5);const _0x3da2a7=this['_viewProjM'+'at']['data'],_0x48469c=_0x2c567a['x']*_0x3da2a7[-0x107b+-0x1a18+0x2a96*0x1]+_0x2c567a['y']*_0x3da2a7[-0x233*-0x7+0x1*0x26f0+-0x364e]+_0x2c567a['z']*_0x3da2a7[0x5b6+0x63d*-0x4+0x1349*0x1]+(-0x1*-0x1bfd+-0x2339+0x73d)*_0x3da2a7[0x1*0x75b+0xd7e+-0x14ca];_0x2773e5['x']=(_0x2773e5['x']/_0x48469c+(-0x17a+0x1*0x169+-0x12*-0x1))*(-0x8fd*-0x3+0x1fec+-0x2d*0x14f+0.5),_0x2773e5['y']=(-0x235*0xb+0x1ec4+-0x4*0x19f-_0x2773e5['y']/_0x48469c)*(-0x103e*0x2+0x2380+-0x304+0.5);const {x:_0x2b743e,y:_0x4a47e5,z:_0x3bcb4c,w:_0x1d804c}=this['_rect'];return _0x2773e5['x']=_0x2773e5['x']*_0x3bcb4c*_0x4e72c4+_0x2b743e*_0x4e72c4,_0x2773e5['y']=_0x2773e5['y']*_0x1d804c*_0x13ec1f+(0x351+-0x103d+0xced-_0x4a47e5-_0x1d804c)*_0x13ec1f,_0x2773e5;}['screenToWo'+'rld'](_0x425003,_0x1dfa04,_0x1b5127,_0x33213d,_0x35e2a7,_0x18b86e=new D()){const {x:_0x4cc3e2,y:_0x4a8660,z:_0x55d4c6,w:_0x1a09b1}=this['_rect'],_0x52fcd5=this['farClip']-this['nearClip'];if(Ca['set']((_0x425003-_0x4cc3e2*_0x33213d)/(_0x55d4c6*_0x33213d),0x20*0xe4+-0x1*0x26c3+-0x1*-0xa44-(_0x1dfa04-(0x21b6+-0x1ad5+0x6e0*-0x1-_0x4a8660-_0x1a09b1)*_0x35e2a7)/(_0x1a09b1*_0x35e2a7),_0x1b5127/_0x52fcd5),Ca['mulScalar'](0xe3*0x7+0x100*-0x1f+0x18cd),Ca['sub'](D['ONE']),this['_projectio'+'n']===ni){te['_getPerspe'+'ctiveHalfS'+'ize'](Qn,this['fov'],this['aspectRati'+'o'],this['nearClip'],this['horizontal'+'Fov']),Qn['x']*=Ca['x'],Qn['y']*=Ca['y'];const _0x4cff8f=this['_node']['getWorldTr'+'ansform']();Qn['z']=-this['nearClip'],_0x4cff8f['transformP'+'oint'](Qn,t_);const _0x1cb488=this['_node']['getPositio'+'n']();_0x18b86e['sub2'](t_,_0x1cb488),_0x18b86e['normalize'](),_0x18b86e['mulScalar'](_0x1b5127),_0x18b86e['add'](_0x1cb488);}else this['_updateVie'+'wProjMat'](),s_['copy'](this['_viewProjM'+'at'])['invert'](),s_['transformP'+'oint'](Ca,_0x18b86e);return _0x18b86e;}['_evaluateP'+'rojectionM'+'atrix'](){if(this['_projMatDi'+'rty']){if(this['_projectio'+'n']===ni)this['_projMat']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip'],this['horizontal'+'Fov']),this['_projMatSk'+'ybox']['copy'](this['_projMat']);else{const _0x1f7181=this['_orthoHeig'+'ht'],_0x20bdb4=_0x1f7181*this['aspectRati'+'o'];this['_projMat']['setOrtho'](-_0x20bdb4,_0x20bdb4,-_0x1f7181,_0x1f7181,this['nearClip'],this['farClip']),this['_projMatSk'+'ybox']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip']);}this['_projMatDi'+'rty']=!(0x67*-0x56+-0x4b*-0x32+0x13f5);}}['getProject'+'ionMatrixS'+'kybox'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMatSk'+'ybox'];}['getExposur'+'e'](){const _0x23083f=Math['log2'](this['_aperture']*this['_aperture']/this['_shutter']*(-0x17b5+-0x245a+0x3c73*0x1)/this['_sensitivi'+'ty']);return(0x1e9e*-0x1+-0x520+-0x23bf*-0x1)/(Math['pow'](-0x16db+0x253b+-0x6*0x265,_0x23083f)*(-0x16a*-0xf+0x4*0x4c7+-0x2851+0.19999999999999996));}['getScreenS'+'ize'](_0x294549){if(this['_projectio'+'n']===ni){const _0x2995d0=this['_node']['getPositio'+'n']()['distance'](_0x294549['center']);if(_0x2995d0<_0x294549['radius'])return 0x200d+0x2*0xd54+-0x3ab4;const _0x57e3fa=Math['asin'](_0x294549['radius']/_0x2995d0),_0x4a9dda=Math['tan'](_0x57e3fa),_0x52a8b2=Math['tan'](this['fov']/(0x2491+-0x239*0x4+0x313*-0x9)*Y['DEG_TO_RAD']);return Math['min'](_0x4a9dda/_0x52a8b2,0x1e1e+0x26d*-0x5+-0x2*0x8fe);}return Y['clamp'](_0x294549['radius']/this['_orthoHeig'+'ht'],0x7c1+0x23fd+-0x2bbe,-0x893+-0x1*-0x19c7+-0x275*0x7);}['getFrustum'+'Corners'](_0x2c62f5=this['nearClip'],_0x30f69c=this['farClip']){const _0x5e4958=this['fov']*Math['PI']/(-0xae5+-0x1d*-0xc1+-0x124*0x9);let _0x395ee0,_0x50f313;this['projection']===ni?this['horizontal'+'Fov']?(_0x395ee0=_0x2c62f5*Math['tan'](_0x5e4958/(0x814+0x247d+-0xbb*0x3d)),_0x50f313=_0x395ee0/this['aspectRati'+'o']):(_0x50f313=_0x2c62f5*Math['tan'](_0x5e4958/(-0x144b+-0x1297+0x26e4)),_0x395ee0=_0x50f313*this['aspectRati'+'o']):(_0x50f313=this['_orthoHeig'+'ht'],_0x395ee0=_0x50f313*this['aspectRati'+'o']);const _0x4ea08d=Qw;return _0x4ea08d[0x23d2+0x1006+0x8a4*-0x6]['x']=_0x395ee0,_0x4ea08d[0xd*-0x207+-0x1698+0x30f3]['y']=-_0x50f313,_0x4ea08d[0x7a*0x11+-0x11db*-0x1+-0x19f5]['z']=-_0x2c62f5,_0x4ea08d[-0x1*0x1c39+-0x910+0x254a]['x']=_0x395ee0,_0x4ea08d[-0xc3f+-0x1*-0x2209+-0x15c9]['y']=_0x50f313,_0x4ea08d[0x146+0x19*-0x31+0x384]['z']=-_0x2c62f5,_0x4ea08d[-0x33*0x28+0x8*-0x2c8+0xf1d*0x2]['x']=-_0x395ee0,_0x4ea08d[-0x1b27+-0xd11+0x283a]['y']=_0x50f313,_0x4ea08d[0xe80+-0x14d6+-0x74*-0xe]['z']=-_0x2c62f5,_0x4ea08d[-0x142e+-0x5e4*0x3+0x25dd]['x']=-_0x395ee0,_0x4ea08d[-0x20c0+-0xe3c+-0x35*-0xe3]['y']=-_0x50f313,_0x4ea08d[-0x1*0xc55+-0x2*0xf9e+0x2b94]['z']=-_0x2c62f5,this['_projectio'+'n']===ni&&(this['horizontal'+'Fov']?(_0x395ee0=_0x30f69c*Math['tan'](_0x5e4958/(-0xf6*0x9+-0x1*0x11a7+0x1a4f)),_0x50f313=_0x395ee0/this['aspectRati'+'o']):(_0x50f313=_0x30f69c*Math['tan'](_0x5e4958/(0x1*0x194d+0x2*0x5fb+0x3*-0xc6b)),_0x395ee0=_0x50f313*this['aspectRati'+'o'])),_0x4ea08d[0xc4e+0x1158+-0x1*0x1da2]['x']=_0x395ee0,_0x4ea08d[0xcd*0xf+0xff4+-0x1bf3]['y']=-_0x50f313,_0x4ea08d[0x9*0x1a5+-0x2c4+-0x11*0xb5]['z']=-_0x30f69c,_0x4ea08d[0x35*0x99+-0x16d7+-0x1*0x8d1]['x']=_0x395ee0,_0x4ea08d[-0x65f+0xb1*0x2+-0x2*-0x281]['y']=_0x50f313,_0x4ea08d[-0x243*0x4+-0x1c4d+0x255e]['z']=-_0x30f69c,_0x4ea08d[-0x1d0*0x5+0x17d5*-0x1+0x20eb]['x']=-_0x395ee0,_0x4ea08d[0x16*-0x13+-0x2*0x628+-0x4a8*-0x3]['y']=_0x50f313,_0x4ea08d[0x18eb+-0x18c8+-0x1d]['z']=-_0x30f69c,_0x4ea08d[0xb57*-0x2+0x2702+-0x104d]['x']=-_0x395ee0,_0x4ea08d[0xa2f+0x135*0xd+-0x19d9]['y']=-_0x50f313,_0x4ea08d[-0x714+0x4*0x7d0+-0x7*0x373]['z']=-_0x30f69c,_0x4ea08d;}['setXrPrope'+'rties'](_0x10c311){Object['assign'](this['_xrPropert'+'ies'],_0x10c311),this['_projMatDi'+'rty']=!(-0x1bef*0x1+-0xc*0x320+0x416f);}}const i_=new te(),r_=new te(),a_=new te(),ur=class ur{static['create'](_0x6ce1df,_0x465035,_0x44b60e){const _0x329636=new Tl();switch(_0x329636['node']=new Ie(_0x6ce1df),_0x329636['aspectRati'+'o']=-0x2*-0x12db+-0x1182+0x1*-0x1433,_0x329636['aspectRati'+'oMode']=Nf,_0x329636['_scissorRe'+'ctClear']=!(0xa*0x3d+0x226f+-0x24d1),_0x465035){case Ke:_0x329636['node']['setRotatio'+'n'](ur['pointLight'+'Rotations'][_0x44b60e]),_0x329636['fov']=-0x1*-0x1a12+0x1bd4+0x17*-0x254,_0x329636['projection']=ni;break;case Ze:_0x329636['projection']=ni;break;case ve:_0x329636['projection']=gn;break;}return _0x329636;}static['evalSpotCo'+'okieMatrix'](_0x19fc0c){let _0x56fbbf=ur['_spotCooki'+'eCamera'];_0x56fbbf||(_0x56fbbf=ur['create']('SpotCookie'+'Camera',Ze),ur['_spotCooki'+'eCamera']=_0x56fbbf),_0x56fbbf['fov']=_0x19fc0c['_outerCone'+'Angle']*(0x25*0x95+-0x1c3*-0x1+-0x174a);const _0x44ad9d=_0x56fbbf['_node'];_0x44ad9d['setPositio'+'n'](_0x19fc0c['_node']['getPositio'+'n']()),_0x44ad9d['setRotatio'+'n'](_0x19fc0c['_node']['getRotatio'+'n']()),_0x44ad9d['rotateLoca'+'l'](-(0x12b0+-0x3*-0xc89+-0x37f1),-0x1da+0x15c5+-0x13eb,0x58*-0x34+0x1b9c+-0x7*0x164),i_['setTRS'](_0x44ad9d['getPositio'+'n'](),_0x44ad9d['getRotatio'+'n'](),D['ONE'])['invert'](),r_['mul2'](_0x56fbbf['projection'+'Matrix'],i_);const _0x245cb5=_0x19fc0c['cookieMatr'+'ix'],_0x30ff62=_0x19fc0c['atlasViewp'+'ort'];return a_['setViewpor'+'t'](_0x30ff62['x'],_0x30ff62['y'],_0x30ff62['z'],_0x30ff62['w']),_0x245cb5['mul2'](a_,r_),_0x245cb5;}};h(ur,'pointLight'+'Rotations',[new le()['setFromEul'+'erAngles'](-0x2*0x1150+0x117*-0xd+-0x1*-0x30cb,0x495*0x7+0x1cd*-0x1+0x1dec*-0x1,-0x3*0x6c9+0x6f3*0x5+-0xdb0),new le()['setFromEul'+'erAngles'](-0x482*0x3+-0x302+0x1088,-(-0x5f3+0xef7+-0x8aa),0x4*-0x346+-0x142f*-0x1+-0x663),new le()['setFromEul'+'erAngles'](-0x19e6+-0x1c1f*-0x1+-0x1df*0x1,-0x1559+0xb92+-0x1*-0x9c7,0x1*-0xcbd+0x46*0x45+-0x20b*0x3),new le()['setFromEul'+'erAngles'](-(-0x190+0x7d1+-0x5e7),-0x20e7+0xaa6+0x1641,0x9e3*0x1+0x3*0xb19+0x2b2e*-0x1),new le()['setFromEul'+'erAngles'](-0x1d0c+-0x119*-0x1+-0xf*-0x1dd,-0x2135+-0x773*0x5+-0x17*-0x318,-0x9af+-0x685+0x10e8),new le()['setFromEul'+'erAngles'](0x3*-0x319+0xa19+0x2*-0x67,0x2562+-0x2*0xd73+-0xa7c*0x1,-0x11*-0x6a+-0x2197+-0x1*-0x1b41)]),h(ur,'_spotCooki'+'eCamera',null);let kn=ur;const vs=new D(),Dr=new Float32Array(-0x281+0x1*-0x20b9+-0x8d*-0x40),Jw=new D(-(0x1*0x1487+0x2221+-0x36a8+0.5),-0x12fd+0x1*-0x1619+0x2916,-0x2678+-0x1fe5+-0x465d*-0x1),eE=new D(-0x1f13+-0x2*-0x65a+0x125f*0x1,-0x14f2+0x4*0x39e+0x33d*0x2,0xc*-0xc5+0x200+0x1cf*0x4+0.5),at={'POSITION_RANGE':0x0,'DIRECTION_FLAGS':0x1,'COLOR_ANGLES_BIAS':0x2,'PROJ_MAT_0':0x3,'ATLAS_VIEWPORT':0x3,'PROJ_MAT_1':0x4,'PROJ_MAT_2':0x5,'PROJ_MAT_3':0x6,'AREA_DATA_WIDTH':0x7,'AREA_DATA_HEIGHT':0x8,'COUNT':0x9},tE={'LIGHTSHAPE_PUNCTUAL':js+'u','LIGHTSHAPE_RECT':my+'u','LIGHTSHAPE_DISK':_y+'u','LIGHTSHAPE_SPHERE':gy+'u','LIGHT_COLOR_DIVIDER':wc+'.0'},n_=(_0x42c142,_0x513254)=>Object['keys'](_0x42c142)['map'](_0x71cb56=>'#define\x20{'+_0x513254+_0x71cb56+'}\x20'+_0x42c142[_0x71cb56])['join']('\x0a'),o_='\x0a\x0a\x20\x20\x20\x20'+n_(at,'CLUSTER_TE'+'XTURE_')+'\x0a\x20\x20\x20\x20'+n_(tE,'')+'\x0a';class sE{constructor(_0x127ace){h(this,'areaLights'+'Enabled',!(0x577*0x2+0x1bc+-0xca9*0x1)),(this['device']=_0x127ace,Ce['get'](_0x127ace,Fe)['set']('lightBuffe'+'rDefinesPS',o_),Ce['get'](_0x127ace,it)['set']('lightBuffe'+'rDefinesPS',o_),this['cookiesEna'+'bled']=!(0x1*0x377+-0xa9*-0x25+-0x1be3),this['shadowsEna'+'bled']=!(-0x21c2+-0x181+-0x94*-0x3d),this['areaLights'+'Enabled']=!(-0xfd8+-0x3*-0x4c9+0x17e),this['maxLights']=-0x92e+0x15e7+-0xbba);const _0x1da489=at['COUNT'];this['lightsFloa'+'t']=new Float32Array((0x195a*0x1+-0x9b*-0xa+0x23e*-0xe)*_0x1da489*this['maxLights']),this['lightsUint']=new Uint32Array(this['lightsFloa'+'t']['buffer']),this['lightsText'+'ure']=this['createText'+'ure'](this['device'],_0x1da489,this['maxLights'],Xt,'LightsText'+'ure'),this['_lightsTex'+'tureId']=this['device']['scope']['resolve']('lightsText'+'ure'),this['invMaxColo'+'rValue']=0x2664+-0xf52+-0x1712,this['invMaxAtte'+'nuation']=0x1c*0x162+-0x1*0x2149+-0x56f,this['boundsMin']=new D(),this['boundsDelt'+'a']=new D();}['destroy'](){var _0x5ca5a5;(_0x5ca5a5=this['lightsText'+'ure'])==null||_0x5ca5a5['destroy'](),this['lightsText'+'ure']=null;}['createText'+'ure'](_0x208a09,_0x2e8359,_0x273fbb,_0x3da3b4,_0x122eff){return new _e(_0x208a09,{'name':_0x122eff,'width':_0x2e8359,'height':_0x273fbb,'mipmaps':!(0x1*-0x75d+-0x4*0x293+-0x85*-0x22),'format':_0x3da3b4,'addressU':ue,'addressV':ue,'type':Ms,'magFilter':Te,'minFilter':Te,'anisotropy':0x1});}['setBounds'](_0x258f85,_0x44e9cd){this['boundsMin']['copy'](_0x258f85),this['boundsDelt'+'a']['copy'](_0x44e9cd);}['uploadText'+'ures'](){this['lightsText'+'ure']['lock']()['set'](this['lightsFloa'+'t']),this['lightsText'+'ure']['unlock']();}['updateUnif'+'orms'](){this['_lightsTex'+'tureId']['setValue'](this['lightsText'+'ure']);}['getSpotDir'+'ection'](_0x42205a,_0x23de92){_0x23de92['_node']['getWorldTr'+'ansform']()['getY'](_0x42205a)['mulScalar'](-(-0x1*0x137e+-0x2192+-0x1*-0x3511)),_0x42205a['normalize']();}['getLightAr'+'eaSizes'](_0x5a2f7c){const _0x310641=_0x5a2f7c['_node']['getWorldTr'+'ansform']();return _0x310641['transformV'+'ector'](Jw,vs),Dr[0x1824+0x3f9*0x2+-0x2016]=vs['x'],Dr[-0x74e+0x1fe4+-0x1*0x1895]=vs['y'],Dr[-0xddd+-0xbd9+0x19b8]=vs['z'],_0x310641['transformV'+'ector'](eE,vs),Dr[0x10*-0x106+-0x1084+0x1*0x20e7]=vs['x'],Dr[0x12d*-0x7+-0x21a*0xd+0x2391]=vs['y'],Dr[0x37a+0x24fa+-0x286f]=vs['z'],Dr;}['addLightDa'+'ta'](_0x5450b6,_0x5b4388){const _0x472d3e=_0x5450b6['_type']===Ze,_0x3e8d26=_0x5450b6['atlasViewp'+'ortAllocat'+'ed'],_0x332142=this['cookiesEna'+'bled']&&!!_0x5450b6['_cookie']&&_0x3e8d26,_0x3ba9bc=this['areaLights'+'Enabled']&&_0x5450b6['shape']!==js,_0x11c763=this['shadowsEna'+'bled']&&_0x5450b6['castShadow'+'s']&&_0x3e8d26,_0x45a79b=_0x5450b6['_node']['getPositio'+'n']();let _0xaf65f0=null,_0xa11a80=null;_0x472d3e?_0x11c763?_0xaf65f0=_0x5450b6['getRenderD'+'ata'](null,-0x1bb6*-0x1+-0x12ae+-0x1*0x908)['shadowMatr'+'ix']:_0x332142&&(_0xaf65f0=kn['evalSpotCo'+'okieMatrix'](_0x5450b6)):(_0x11c763||_0x332142)&&(_0xa11a80=_0x5450b6['atlasViewp'+'ort']);const _0x3292c3=this['lightsFloa'+'t'],_0x224ae0=this['lightsUint'],_0x405f9e=_0x5b4388*this['lightsText'+'ure']['width']*(0x3*-0x8a0+0x1bd7+-0x1f3);_0x3292c3[_0x405f9e+(-0x13*-0x72+-0xb67*-0x3+-0x1*0x2aa7)*at['POSITION_R'+'ANGE']+(-0x17d2+0x26be+-0x2*0x776)]=_0x45a79b['x'],_0x3292c3[_0x405f9e+(-0x8f6+-0x1*0x20b0+0x29aa)*at['POSITION_R'+'ANGE']+(-0x1ce1+-0xd5c+-0x151f*-0x2)]=_0x45a79b['y'],_0x3292c3[_0x405f9e+(0x2cf+-0x49*0x88+0x53*0x6f)*at['POSITION_R'+'ANGE']+(0xf47+-0x384+-0xbc1)]=_0x45a79b['z'],_0x3292c3[_0x405f9e+(-0x107c+-0x1938*-0x1+0x8b8*-0x1)*at['POSITION_R'+'ANGE']+(-0x509*-0x6+-0x7c*0x2f+0xb*-0xad)]=_0x5450b6['attenuatio'+'nEnd'];const _0x4e5b04=_0x5450b6['clusteredD'+'ata'];if(_0x224ae0[_0x405f9e+(0x23e9+-0x6b1*-0x1+-0x2a96)*at['COLOR_ANGL'+'ES_BIAS']+(0xa76+0x12d8+-0x1d4e)]=_0x4e5b04[-0x80*0x47+-0x267a+0x45a*0x11],_0x224ae0[_0x405f9e+(-0x40*-0x46+-0x23a2+0x1226)*at['COLOR_ANGL'+'ES_BIAS']+(0x25f9+-0x1*-0x1705+-0x1*0x3cfd)]=_0x4e5b04[0x287*-0xb+0x9da+0x11f4],_0x224ae0[_0x405f9e+(-0x6*0x3f3+0x24cb+-0xd15)*at['COLOR_ANGL'+'ES_BIAS']+(-0x13*-0x1d3+-0x1e07+-0x4a0)]=_0x4e5b04[0x155a+-0x529+-0x102f],_0x5450b6['castShadow'+'s']){const _0x3d368a=_0x5450b6['getRenderD'+'ata'](null,-0x7*0x200+0x1bfe+-0xdfe),_0x15730f=_0x5450b6['_getUnifor'+'mBiasValue'+'s'](_0x3d368a),_0x212ada=Tn['float2Half'](_0x15730f['bias']),_0x735aa9=Tn['float2Half'](_0x15730f['normalBias']);_0x224ae0[_0x405f9e+(0x16d5+0x11*-0x20+-0x14b1)*at['COLOR_ANGL'+'ES_BIAS']+(0x1f57+-0x26ad*0x1+0x759)]=_0x212ada|_0x735aa9<<0x260d+-0x1b16+-0xae7;}if(_0x472d3e&&(this['getSpotDir'+'ection'](vs,_0x5450b6),_0x3292c3[_0x405f9e+(0x2*0x75b+0x1612+-0x24c4)*at['DIRECTION_'+'FLAGS']+(0x20e*-0x6+-0x5f6+0x124a)]=vs['x'],_0x3292c3[_0x405f9e+(-0x13*-0xb3+0x2*0x1211+-0x3167)*at['DIRECTION_'+'FLAGS']+(-0x596+0x1*0x1229+-0xc92)]=vs['y'],_0x3292c3[_0x405f9e+(-0x78b+-0x17f*-0x9+0x1f8*-0x3)*at['DIRECTION_'+'FLAGS']+(-0x10ea+-0x23bc+0x34a8)]=vs['z']),_0x224ae0[_0x405f9e+(-0x29f*-0xb+-0x7*0x2e6+-0x887)*at['DIRECTION_'+'FLAGS']+(-0x193c+-0x840+0x217f)]=_0x5450b6['getCluster'+'edFlags'](_0x11c763,_0x332142),_0xaf65f0){const _0x918f29=_0xaf65f0['data'];for(let _0x5dbb43=0xed1+0xa45+-0x1916;_0x5dbb43<-0x1ff3+-0x2329+0x3*0x1664;_0x5dbb43++)_0x3292c3[_0x405f9e+(-0x9*0x449+0x1a21+0xc74)*at['PROJ_MAT_0']+_0x5dbb43]=_0x918f29[_0x5dbb43];}if(_0xa11a80&&(_0x3292c3[_0x405f9e+(-0xc47*-0x1+-0xf53+-0x70*-0x7)*at['ATLAS_VIEW'+'PORT']+(-0x2284+-0x5*-0x640+-0x1*-0x344)]=_0xa11a80['x'],_0x3292c3[_0x405f9e+(-0x1304+0x2*-0x944+0x2590*0x1)*at['ATLAS_VIEW'+'PORT']+(0x105e+0x1b57+-0x4*0xaed)]=_0xa11a80['y'],_0x3292c3[_0x405f9e+(-0xf39*0x1+0x1c68+-0x1*0xd2b)*at['ATLAS_VIEW'+'PORT']+(-0x761*0x1+0x1c00+-0x149d)]=_0xa11a80['z']/(-0x1310+0x60*-0x43+0x2c33)),_0x3ba9bc){const _0x58447b=this['getLightAr'+'eaSizes'](_0x5450b6);_0x3292c3[_0x405f9e+(0x4*-0x14f+0x20c3+-0x1b83)*at['AREA_DATA_'+'WIDTH']+(0x512+0x3*-0x5e5+0xc9d)]=_0x58447b[0xc73+0x6dd+-0x1350],_0x3292c3[_0x405f9e+(0x57c+0x4*-0x16a+-0x18*-0x2)*at['AREA_DATA_'+'WIDTH']+(-0x17f9+0x205b+-0x861)]=_0x58447b[0x5*0x94+-0xb4b*-0x3+0x34*-0xb5],_0x3292c3[_0x405f9e+(0x72e+-0x12e6+-0x5de*-0x2)*at['AREA_DATA_'+'WIDTH']+(-0xad*-0x4+0x24fd+0x27af*-0x1)]=_0x58447b[-0xeda+-0x1885+0x2761],_0x3292c3[_0x405f9e+(0x1*0x655+0x1961+-0x1fb2)*at['AREA_DATA_'+'HEIGHT']+(-0x186c+-0x1ee*-0x13+0x61f*-0x2)]=_0x58447b[0x1c8+0x4*0x668+-0x1b65],_0x3292c3[_0x405f9e+(0x269*-0xd+0x1647+0x912)*at['AREA_DATA_'+'HEIGHT']+(0x1e9+0xa81*-0x1+0x899*0x1)]=_0x58447b[-0x3*-0x45+-0x7*0x157+0x896],_0x3292c3[_0x405f9e+(0x1583*-0x1+0x1*-0xef2+0x2479*0x1)*at['AREA_DATA_'+'HEIGHT']+(-0x557+-0xbbc+0x1115*0x1)]=_0x58447b[-0x167f+-0x157b+0x2bff];}}}const Hl=new D(),Wl=new D(),$l=new D(),Cd=new De(),l_=0x4bd*0x5+-0x1*0x1c81+0x14d0;class c_{constructor(){this['light']=null,this['min']=new D(),this['max']=new D();}}class kf{constructor(_0x5de239){h(this,'clusterTex'+'ture'),(this['device']=_0x5de239,this['name']='Untitled',this['reportCoun'+'t']=0x899*-0x4+-0xe*-0x25a+0x178,this['boundsMin']=new D(),this['boundsMax']=new D(),this['boundsDelt'+'a']=new D(),this['_cells']=new D(-0xdb3+0x2*0x94+0xc8c,0x1d9*0x11+-0x2009+-0x1*-0xa1,0x1*-0x2062+0x7cd*-0x3+0x1be5*0x2),this['_cellsLimi'+'t']=new D(),this['cells']=this['_cells'],this['maxCellLig'+'htCount']=-0xf07*-0x2+-0x3*-0x452+-0xac0*0x4,this['_usedLight'+'s']=[],this['_usedLight'+'s']['push'](new c_()),this['lightsBuff'+'er']=new sE(_0x5de239),this['registerUn'+'iforms'](_0x5de239));}set['maxCellLig'+'htCount'](_0x593e17){_0x593e17!==this['_maxCellLi'+'ghtCount']&&(this['_maxCellLi'+'ghtCount']=_0x593e17,this['_cellsDirt'+'y']=!(0x1*0x136d+0x34b*-0x9+-0xa36*-0x1));}get['maxCellLig'+'htCount'](){return this['_maxCellLi'+'ghtCount'];}set['cells'](_0x150319){Hl['copy'](_0x150319)['floor'](),this['_cells']['equals'](Hl)||(this['_cells']['copy'](Hl),this['_cellsLimi'+'t']['copy'](Hl)['sub'](D['ONE']),this['_cellsDirt'+'y']=!(-0xa51*0x1+0x16af*0x1+-0xc5e));}get['cells'](){return this['_cells'];}['destroy'](){this['lightsBuff'+'er']['destroy'](),this['releaseClu'+'sterTextur'+'e']();}['releaseClu'+'sterTextur'+'e'](){this['clusterTex'+'ture']&&(this['clusterTex'+'ture']['destroy'](),this['clusterTex'+'ture']=null);}['registerUn'+'iforms'](_0x58f3e2){this['_clusterSk'+'ipId']=_0x58f3e2['scope']['resolve']('clusterSki'+'p'),this['_clusterMa'+'xCellsId']=_0x58f3e2['scope']['resolve']('clusterMax'+'Cells'),this['_clusterWo'+'rldTexture'+'Id']=_0x58f3e2['scope']['resolve']('clusterWor'+'ldTexture'),this['_clusterTe'+'xtureSizeI'+'d']=_0x58f3e2['scope']['resolve']('clusterTex'+'tureSize'),this['_clusterTe'+'xtureSizeD'+'ata']=new Float32Array(-0x213a+0x1d03+0x43a),this['_clusterBo'+'undsMinId']=_0x58f3e2['scope']['resolve']('clusterBou'+'ndsMin'),this['_clusterBo'+'undsMinDat'+'a']=new Float32Array(0x14bc+0x3*-0x517+-0x574),this['_clusterBo'+'undsDeltaI'+'d']=_0x58f3e2['scope']['resolve']('clusterBou'+'ndsDelta'),this['_clusterBo'+'undsDeltaD'+'ata']=new Float32Array(-0x2627*0x1+0x2*-0x250+0x2*0x1565),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']=_0x58f3e2['scope']['resolve']('clusterCel'+'lsCountByB'+'oundsSize'),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']=new Float32Array(0x3c2+-0x58a+0x1cb),this['_clusterCe'+'llsDotId']=_0x58f3e2['scope']['resolve']('clusterCel'+'lsDot'),this['_clusterCe'+'llsDotData']=new Float32Array(0x2c5+0x45e+-0x720),this['_clusterCe'+'llsMaxId']=_0x58f3e2['scope']['resolve']('clusterCel'+'lsMax'),this['_clusterCe'+'llsMaxData']=new Float32Array(0x317+0x187*0x11+-0x1d0b);}['updatePara'+'ms'](_0x3780a1){_0x3780a1&&(this['cells']=_0x3780a1['cells'],this['maxCellLig'+'htCount']=_0x3780a1['maxLightsP'+'erCell'],this['lightsBuff'+'er']['cookiesEna'+'bled']=_0x3780a1['cookiesEna'+'bled'],this['lightsBuff'+'er']['shadowsEna'+'bled']=_0x3780a1['shadowsEna'+'bled'],this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x3780a1['areaLights'+'Enabled']);}['updateCell'+'s'](){if(this['_cellsDirt'+'y']){this['_cellsDirt'+'y']=!(0x49+0x7*0x4cf+0x21f1*-0x1);const _0x1d8660=this['_cells']['x'],_0x1efbf6=this['_cells']['y'],_0x2108af=this['_cells']['z'],_0x4e4e6c=_0x1d8660*_0x1efbf6*_0x2108af,_0x4282d5=this['maxCellLig'+'htCount']*_0x4e4e6c;let _0x24186c=Math['ceil'](Math['sqrt'](_0x4282d5));_0x24186c=Y['roundUp'](_0x24186c,this['maxCellLig'+'htCount']);const _0x3d8e5b=Math['ceil'](_0x4282d5/_0x24186c);w['assert'](_0x24186c<=l_&&_0x3d8e5b<=l_,'Clustered\x20'+'lights\x20par'+'ameters\x20ca'+'use\x20the\x20te'+'xture\x20size'+'\x20to\x20be\x20ove'+'r\x20the\x20limi'+'t,\x20please\x20'+'adjust\x20the'+'m.'),this['_clusterCe'+'llsMaxData'][-0xfa1*-0x1+0x1c7d+-0x2c1e]=_0x1d8660,this['_clusterCe'+'llsMaxData'][0x1d91+-0x269d+0x90d]=_0x1efbf6,this['_clusterCe'+'llsMaxData'][0x1ca9+0x214b+-0x3df2]=_0x2108af,this['_clusterCe'+'llsDotData'][-0x2696+0x13f1*-0x1+0x1*0x3a87]=this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][-0x483+0xb84+0x1c*-0x40]=_0x1d8660*_0x2108af*this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][0x7*-0x103+0x186a+-0x1153]=_0x1d8660*this['maxCellLig'+'htCount'],this['clusters']=new Uint8ClampedArray(_0x4282d5),this['counts']=new Int32Array(_0x4e4e6c),this['_clusterTe'+'xtureSizeD'+'ata'][-0xc2e+0x259*0xa+-0x1e2*0x6]=_0x24186c,this['_clusterTe'+'xtureSizeD'+'ata'][-0x94e*-0x1+-0x4*0x62+0x297*-0x3]=(0x9e1+0xa6*0x1d+-0x1cae)/_0x24186c,this['_clusterTe'+'xtureSizeD'+'ata'][-0x120a*0x2+-0x8*0x3e9+-0x1*-0x435e]=(0x92b*0x4+0x1*-0x1068+-0x1443*0x1)/_0x3d8e5b,this['releaseClu'+'sterTextur'+'e'](),this['clusterTex'+'ture']=this['lightsBuff'+'er']['createText'+'ure'](this['device'],_0x24186c,_0x3d8e5b,Zu,'ClusterTex'+'ture');}}['uploadText'+'ures'](){this['clusterTex'+'ture']['lock']()['set'](this['clusters']),this['clusterTex'+'ture']['unlock'](),this['lightsBuff'+'er']['uploadText'+'ures']();}['updateUnif'+'orms'](){this['_clusterSk'+'ipId']['setValue'](this['_usedLight'+'s']['length']>-0x1*-0x17b5+-0x203c+0x888?0x2582*0x1+0x157*0x19+0x1*-0x4701:0x1f35+0x2d*-0x73+-0xafd),this['lightsBuff'+'er']['updateUnif'+'orms'](),this['_clusterWo'+'rldTexture'+'Id']['setValue'](this['clusterTex'+'ture']),this['_clusterMa'+'xCellsId']['setValue'](this['maxCellLig'+'htCount']);const _0x2ec9cb=this['boundsDelt'+'a'];this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][0x1115*-0x1+0x1473+-0x35e]=this['_cells']['x']/_0x2ec9cb['x'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][0x3*-0x551+-0x223*0x9+0x1*0x232f]=this['_cells']['y']/_0x2ec9cb['y'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][-0x2ec+-0x10b0+-0x2*-0x9cf]=this['_cells']['z']/_0x2ec9cb['z'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']['setValue'](this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']),this['_clusterBo'+'undsMinDat'+'a'][0x1*0x14f1+-0x1ed1+0x9e0]=this['boundsMin']['x'],this['_clusterBo'+'undsMinDat'+'a'][-0x1*0x16cd+0x181a*-0x1+0x2ee8]=this['boundsMin']['y'],this['_clusterBo'+'undsMinDat'+'a'][0x2*-0x7e0+0x988*0x1+0x63a]=this['boundsMin']['z'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x66b*-0x5+-0xa*-0x355+-0x5*0xd15]=_0x2ec9cb['x'],this['_clusterBo'+'undsDeltaD'+'ata'][0x9*-0x37f+-0x1447+0x33bf]=_0x2ec9cb['y'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x831+0x803+-0xc*-0x4]=_0x2ec9cb['z'],this['_clusterTe'+'xtureSizeI'+'d']['setValue'](this['_clusterTe'+'xtureSizeD'+'ata']),this['_clusterBo'+'undsMinId']['setValue'](this['_clusterBo'+'undsMinDat'+'a']),this['_clusterBo'+'undsDeltaI'+'d']['setValue'](this['_clusterBo'+'undsDeltaD'+'ata']),this['_clusterCe'+'llsDotId']['setValue'](this['_clusterCe'+'llsDotData']),this['_clusterCe'+'llsMaxId']['setValue'](this['_clusterCe'+'llsMaxData']);}['evalLightC'+'ellMinMax'](_0xb9f8f9,_0x484693,_0x1023c6){_0x484693['copy'](_0xb9f8f9['min']),_0x484693['sub'](this['boundsMin']),_0x484693['div'](this['boundsDelt'+'a']),_0x484693['mul2'](_0x484693,this['cells']),_0x484693['floor'](),_0x1023c6['copy'](_0xb9f8f9['max']),_0x1023c6['sub'](this['boundsMin']),_0x1023c6['div'](this['boundsDelt'+'a']),_0x1023c6['mul2'](_0x1023c6,this['cells']),_0x1023c6['ceil'](),_0x484693['max'](D['ZERO']),_0x1023c6['min'](this['_cellsLimi'+'t']);}['collectLig'+'hts'](_0x4264a2){const _0x105160=this['lightsBuff'+'er']['maxLights'],_0x1c91bf=this['_usedLight'+'s'];let _0x2e2716=-0x11*0x21d+-0x226d+0x465b;_0x4264a2['forEach'](_0x1a0662=>{const _0x2c8861=!!(_0x1a0662['mask']&(Ss|di)),_0x387236=_0x1a0662['type']===Ze&&_0x1a0662['_outerCone'+'Angle']===-0x275+0x20a9+-0x1e34;if(_0x1a0662['enabled']&&_0x1a0662['type']!==ve&&_0x1a0662['visibleThi'+'sFrame']&&_0x1a0662['intensity']>-0x1274+0x17d4+-0x20*0x2b&&_0x2c8861&&!_0x387236){if(_0x2e2716<_0x105160){let _0x2706b7;_0x2e2716<_0x1c91bf['length']?_0x2706b7=_0x1c91bf[_0x2e2716]:(_0x2706b7=new c_(),_0x1c91bf['push'](_0x2706b7)),_0x2706b7['light']=_0x1a0662,_0x1a0662['getBoundin'+'gBox'](Cd),_0x2706b7['min']['copy'](Cd['getMin']()),_0x2706b7['max']['copy'](Cd['getMax']()),_0x2e2716++;}else w['warnOnce']('Clustered\x20'+'lighting:\x20'+'more\x20than\x20'+(_0x105160-(-0x1b5e+-0x1e6a+0x39c9))+('\x20lights\x20in'+'\x20the\x20frame'+',\x20ignoring'+'\x20some.'));}}),_0x1c91bf['length']=_0x2e2716;}['evaluateBo'+'unds'](){const _0x2d9bf1=this['_usedLight'+'s'],_0x5e00f5=this['boundsMin'],_0x521ec3=this['boundsMax'];if(_0x2d9bf1['length']>0x1*0x1b46+-0x238c+0x847*0x1){_0x5e00f5['copy'](_0x2d9bf1[-0x13e1+0xef*0x10+-0x2*-0x279]['min']),_0x521ec3['copy'](_0x2d9bf1[-0x114b*-0x1+-0x173e+-0xfe*-0x6]['max']);for(let _0x2078db=0xd3*0xa+0x13*-0x8+-0x1e9*0x4;_0x2078db<_0x2d9bf1['length'];_0x2078db++)_0x5e00f5['min'](_0x2d9bf1[_0x2078db]['min']),_0x521ec3['max'](_0x2d9bf1[_0x2078db]['max']);}else _0x5e00f5['set'](0x405*-0x7+-0x24b*0x10+-0x5*-0xcf7,-0x2*-0xab8+0x9b*-0x3e+0x101a,-0x283+-0x18bd+0x1b4*0x10),_0x521ec3['set'](-0x1*0x10bf+-0x4*0x4cc+0x23f0,0x1bb3+0x47*-0x30+0xe62*-0x1,0x9cd+-0xf94+0x5c8);this['boundsDelt'+'a']['sub2'](_0x521ec3,_0x5e00f5),this['lightsBuff'+'er']['setBounds'](_0x5e00f5,this['boundsDelt'+'a']);}['updateClus'+'ters'](_0x4ddee6){this['counts']['fill'](0x1*-0x212b+0x1333+0xdf8),this['clusters']['fill'](0x1048+-0x2171+0xbf*0x17),this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x4ddee6?_0x4ddee6['areaLights'+'Enabled']:!(0x177*0x6+0x1962*-0x1+0x1099);const _0x14c43b=this['_cells']['x'],_0xd33078=this['_cells']['z'],_0x1f2dff=this['counts'],_0x36d27c=this['_maxCellLi'+'ghtCount'],_0xa4bb22=this['clusters'],_0x1a501f=this['maxCellLig'+'htCount'];let _0xa60712=!(0x4d4+-0x1*0x2438+0x1a7*0x13);const _0x30e8c6=this['_usedLight'+'s'];for(let _0x6f4d96=-0xae9+-0x838+0x1322;_0x6f4d96<_0x30e8c6['length'];_0x6f4d96++){const _0x494f69=_0x30e8c6[_0x6f4d96],_0x4570a2=_0x494f69['light'];this['lightsBuff'+'er']['addLightDa'+'ta'](_0x4570a2,_0x6f4d96),this['evalLightC'+'ellMinMax'](_0x494f69,Wl,$l);const _0x36f9ad=Wl['x'],_0x507bb5=$l['x'],_0x3f5ee1=Wl['y'],_0x3ba567=$l['y'],_0x5370b0=Wl['z'],_0x23a878=$l['z'];for(let _0x4485f4=_0x36f9ad;_0x4485f4<=_0x507bb5;_0x4485f4++)for(let _0x241311=_0x5370b0;_0x241311<=_0x23a878;_0x241311++)for(let _0xb6c192=_0x3f5ee1;_0xb6c192<=_0x3ba567;_0xb6c192++){const _0x62c67d=_0x4485f4+_0x14c43b*(_0x241311+_0xb6c192*_0xd33078),_0x2591b5=_0x1f2dff[_0x62c67d];_0x2591b5<_0x36d27c?(_0xa4bb22[_0x1a501f*_0x62c67d+_0x2591b5]=_0x6f4d96,_0x1f2dff[_0x62c67d]=_0x2591b5+(0x234d+0x1fa7+-0x42f3)):_0xa60712=!(-0x560+-0x255f+-0x1*-0x2abf);}}_0xa60712&&this['reportCoun'+'t']<0x24dd*0x1+0x6b*-0x52+-0x149*0x2&&(console['warn']('Too\x20many\x20l'+'ights\x20in\x20l'+'ight\x20clust'+'er\x20'+this['name']+(',\x20please\x20a'+'djust\x20para'+'meters.')+(this['reportCoun'+'t']===-0x23a2*-0x1+-0x1*-0x94f+-0x2ced?'\x20Giving\x20up'+'\x20on\x20report'+'ing\x20it.':'')),this['reportCoun'+'t']++);}['update'](_0x74cfaf,_0x1900e7=null){this['updatePara'+'ms'](_0x1900e7),this['updateCell'+'s'](),this['collectLig'+'hts'](_0x74cfaf),this['evaluateBo'+'unds'](),this['updateClus'+'ters'](_0x1900e7),this['uploadText'+'ures']();}['activate'](){this['updateUnif'+'orms']();}}const h_=-0x1e8*-0x8+0x6*0x665+-0x359c+0.39996322972865306,wl={'circlePoint'(_0x308eb4){const _0x36318f=Math['sqrt'](Math['random']()),_0x29c6f6=Math['random']()*(-0x1ede+0x493+-0x1a4d*-0x1)*Math['PI'];_0x308eb4['x']=_0x36318f*Math['cos'](_0x29c6f6),_0x308eb4['y']=_0x36318f*Math['sin'](_0x29c6f6);},'circlePointDeterministic'(_0x7cb7b6,_0x550904,_0x46b0f4){const _0x2bda41=_0x550904*h_,_0x1a2008=Math['sqrt'](_0x550904)/Math['sqrt'](_0x46b0f4);_0x7cb7b6['x']=_0x1a2008*Math['cos'](_0x2bda41),_0x7cb7b6['y']=_0x1a2008*Math['sin'](_0x2bda41);},'spherePointDeterministic'(_0x269d50,_0x33d938,_0xff3015,_0x1b7be8=-0x1*0x1549+-0x25ae+-0x1*-0x3af7,_0x13bcaa=0x193d+-0x1f4b+0x21*0x2f){_0x1b7be8=0x1*-0x20d8+-0xd*0x43+0x122*0x20-(-0x2*0x6c7+0x2669*-0x1+0x1153*0x3)*_0x1b7be8,_0x13bcaa=0x2*0x732+0x365+-0x239*0x8-(0x1*0xd42+-0x222f*-0x1+-0x2f6f)*_0x13bcaa;const _0x3e87d4=Y['lerp'](_0x1b7be8,_0x13bcaa,_0x33d938/_0xff3015),_0x44de3c=Math['sqrt'](0x7*-0x39d+-0x1c8b+0x35d7-_0x3e87d4*_0x3e87d4),_0x121a64=h_*_0x33d938;_0x269d50['x']=Math['cos'](_0x121a64)*_0x44de3c,_0x269d50['y']=_0x3e87d4,_0x269d50['z']=Math['sin'](_0x121a64)*_0x44de3c;},'radicalInverse'(_0x2d5a82){let _0x25e878=(_0x2d5a82<<-0x35b*0x2+0x1b*0x16d+-0x1*0x1fb9|_0x2d5a82>>>0xc57+0x5e4+0x122b*-0x1)>>>-0x26ed*0x1+-0x1a0a+0x1*0x40f7;return _0x25e878=((_0x25e878&0x21de22e5*0x5+0x1c*0x2427407+-0x934609e8)<<0x17*-0xe5+-0x189f+0x2d33|(_0x25e878&-0xa4339*-0x9f5+-0x12bf17345+-0x7212a*-0x33ad)>>>0x204a+-0x2128+-0xdf*-0x1)>>>0x1d5b+-0x614+-0x1747,_0x25e878=((_0x25e878&0x51*-0x10856cb+0x5e91bd5a+0x2844ec14)<<-0xeeb+0x1c5d+-0xd70|(_0x25e878&0x5423af5*0x4c+-0xb1b*-0x8f077+-0x126232d7d)>>>-0x1*0x1e24+-0x124c*0x2+0x42be)>>>0x1223+0x228+0x40f*-0x5,_0x25e878=((_0x25e878&0x1*-0x1c685d5b+0xe78411b+0x1cff2b4f)<<-0x6a7*-0x2+-0x1*-0x219b+0xf5*-0x31|(_0x25e878&0x19e6*-0x1daab+-0x1efa8df*-0x2f+-0x21f19d*-0x5d5)>>>0x959*0x1+-0x1a05+0x10b0)>>>0x2*0x1196+-0x180b*-0x1+0x3*-0x13bd,_0x25e878=((_0x25e878&0x1932f72+-0xc975c3+-0x48f0*-0xbb)<<0x1451+0x232*0x4+0x427*-0x7|(_0x25e878&-0x4e31*0x26e3f+-0x102ce6*-0x169d+0x4f47fe01)>>>-0x4*0x99a+0x819+-0x9*-0x35f)>>>0x22*0x95+-0x1288+-0x142,_0x25e878*(-0xc65+0x195a+-0xcf5+2.3283064365386963e-10);}},iE={'linear':'decodeLine'+'ar','srgb':'decodeGamm'+'a','rgbm':'decodeRGBM','rgbe':'decodeRGBE','rgbp':'decodeRGBP','xy':'unpackNorm'+'alXY','xyz':'unpackNorm'+'alXYZ'},rE={'linear':'encodeLine'+'ar','srgb':'encodeGamm'+'a','rgbm':'encodeRGBM','rgbe':'encodeRGBE','rgbp':'encodeRGBP'};class Sr{static['decodeFunc'](_0x2c0896){return iE[_0x2c0896]??'decodeGamm'+'a';}static['encodeFunc'](_0x3ab436){return rE[_0x3ab436]??'encodeGamm'+'a';}}const d_=_0x4569bc=>{switch(_0x4569bc){case Mf:return'Cubemap';case nx:return'Octahedral';default:return'Equirect';}},Xl=(_0x2eacab,_0x14882b,_0x5b0d85)=>{if(_0x2eacab<=0x1125+0x1c7d+-0x2da2)_0x14882b[_0x5b0d85+(0x18b+-0xd01+0xb76)]=-0x21da+0x185f*-0x1+0x1*0x3a39,_0x14882b[_0x5b0d85+(-0x26e0+0x2407+0x2da)]=-0x53*0x13+-0x1b*-0xf1+0x2*-0x9a1,_0x14882b[_0x5b0d85+(-0x2*0xe46+-0x986+0x130a*0x2)]=-0x25*-0x23+0xb91+-0x10a0,_0x14882b[_0x5b0d85+(0x10a+0x1fd1+-0x20d8)]=-0x471*-0x3+-0x1fda+0x1287;else{if(_0x2eacab>=0x16+-0x155c+0xd*0x1a3)_0x14882b[_0x5b0d85+(-0x349*-0x1+-0x803+0x4ba)]=0x13*-0xe9+-0x3d3+0x161d,_0x14882b[_0x5b0d85+(-0x1*0x16c+-0xc+0xd*0x1d)]=-0x1d4c+0x7a2+0x15aa,_0x14882b[_0x5b0d85+(-0x31e+-0x15ed*-0x1+-0x12cd)]=0x7*0x40c+-0x162f+0xd*-0x79,_0x14882b[_0x5b0d85+(-0x21a*0x7+0x1f00+0x3*-0x56d)]=0x3*0x81e+-0x3fd*0x1+0x191*-0xd;else{let _0x237655=(0x1*0x4fd+-0x2217+0x1d1b)*_0x2eacab%(-0x1*-0x2fb+-0x1*0x18bc+0x15c2),_0x29abec=(-0x22ca+0x17f+0x224a)*_0x2eacab%(-0x17a*0x9+-0x118f+0x1eda*0x1),_0xbf910e=(0x14b77+0x11*-0xf21+0x139*0x93)*_0x2eacab%(-0xe63*0x2+0x2320+0x5*-0x145);const _0x8aad25=(-0x2*0x4a915e+-0x2f0f40+-0x2b8b*-0xa51)*_0x2eacab%(-0x8*0x33e+-0xf1d+-0x1487*-0x2);_0x237655-=_0x29abec/(-0x1298+0x17b6+0x1*-0x41f),_0x29abec-=_0xbf910e/(0x26*0x55+-0x1076*-0x2+-0x2c8b),_0xbf910e-=_0x8aad25/(-0x1b26+-0x11*-0xfd+0xb58),_0x14882b[_0x5b0d85+(0x236c+0x1*0x1789+-0x1*0x3af5)]=Math['min'](-0x88c*0x2+-0x3c9+0x15e0,Math['floor'](_0x237655*(0x4d*0x5+0x1fc3+-0x8c*0x3b))),_0x14882b[_0x5b0d85+(-0x1d*0xc7+0x8*0x17b+0x89*0x14)]=Math['min'](-0xc*0x59+0x10d1+0x1*-0xba6,Math['floor'](_0x29abec*(0x2410+-0x15a0*0x1+0x28*-0x56))),_0x14882b[_0x5b0d85+(0x1c16+0x73*-0x4f+-0x1*-0x769)]=Math['min'](-0x792+-0x2*-0xd85+-0x1279,Math['floor'](_0xbf910e*(-0x47*0xd+0x1*-0x2309+0x9e9*0x4))),_0x14882b[_0x5b0d85+(-0x1b*-0x52+-0x1f*0xa3+0xb1a)]=Math['min'](-0xf3*-0x7+0x1a19+0x1b*-0x12d,Math['floor'](_0x8aad25*(0x4*0x357+-0x267e+0x1a22)));}}},aE=_0x595024=>{const _0x906d1c=_0x595024['length'],_0x53678a=Math['min'](_0x906d1c,-0x1*-0x1cd+0x1*-0x157a+0x15ad),_0x2e6154=Math['ceil'](_0x906d1c/_0x53678a),_0x27a254=new Uint8Array(_0x53678a*_0x2e6154*(0x84f+0x9ad+-0x64*0x2e));let _0x500ce6=-0x3d7+-0x161b*-0x1+-0xa7*0x1c;for(let _0xec7bbc=-0x1846+0x1*0x4d2+0x1374;_0xec7bbc<_0x906d1c;_0xec7bbc+=-0x1*0x5e7+-0x1*-0x162a+0x1*-0x103f)Xl(_0x595024[_0xec7bbc+(-0x2122+0x1081+-0x1d9*-0x9)]*(-0x1*-0x90b+0x1fc8+-0x28d3+0.5)+(-0x229*0xf+0x1020+0x3*0x56d+0.5),_0x27a254,_0x500ce6+(-0xe2f+-0x1e43+0x2c72)),Xl(_0x595024[_0xec7bbc+(-0x2097+-0x12fe+-0x6*-0x899)]*(-0x1b0c+0x5f5+-0x1*-0x1517+0.5)+(-0x455*0x2+-0x1*0x3eb+-0x1*-0xc95+0.5),_0x27a254,_0x500ce6+(-0xa8+-0x1b00+0x1bac)),Xl(_0x595024[_0xec7bbc+(-0x748+-0x236f*0x1+-0x2ab9*-0x1)]*(0x2*-0x1a6+-0x11*0x1a5+0xa6b*0x3+0.5)+(-0x1a5*-0x5+0x47*-0x61+-0x12ae*-0x1+0.5),_0x27a254,_0x500ce6+(0x26cb+-0x1d67*-0x1+-0x442a*0x1)),Xl(_0x595024[_0xec7bbc+(-0x1d41+0x1ae7+-0xb*-0x37)]/(-0x1e5d*-0x1+-0x8da+-0x157b),_0x27a254,_0x500ce6+(-0x590*-0x7+-0x1a6a*0x1+-0x1*0xc7a)),_0x500ce6+=0x1736*0x1+-0x60f+0x5*-0x36b;return{'width':_0x53678a,'height':_0x2e6154,'data':_0x27a254};},nE=(_0x5b728f,_0x1809aa,_0x563d89,_0x4acd84)=>{const _0x56f2da=_0x563d89*(-0x2196+-0x1*0xe0b+-0x2d*-0x10f)*Math['PI'],_0x57b483=Math['pow'](0x2025+0x12be+0x3*-0x10f6-_0x1809aa,(-0x251c+0x1572+0xfab)/(_0x4acd84+(0x18a0+-0xd*-0x18e+0x17*-0x1f3))),_0x4be3c6=Math['sqrt'](0x115f*-0x1+-0x9*0x7b+0x15b3*0x1-_0x57b483*_0x57b483);_0x5b728f['set'](Math['cos'](_0x56f2da)*_0x4be3c6,Math['sin'](_0x56f2da)*_0x4be3c6,_0x57b483)['normalize']();},oE=(_0x5dbb07,_0x1a2d8,_0x3e46fe)=>{const _0x7ba584=_0x3e46fe*(-0x56a*0x3+0x105a+0xd*-0x2)*Math['PI'],_0x2e144d=Math['sqrt'](-0x29*-0xef+0xe9+-0x272f-_0x1a2d8),_0x30bca8=Math['sqrt'](_0x1a2d8);_0x5dbb07['set'](Math['cos'](_0x7ba584)*_0x30bca8,Math['sin'](_0x7ba584)*_0x30bca8,_0x2e144d)['normalize']();},lE=(_0x229cc6,_0x35b6dc,_0x152437,_0x2a9a96)=>{const _0x52daa9=_0x152437*(0x1*0x19a9+0xb05+-0x2*0x1256)*Math['PI'],_0x36b4e2=Math['sqrt']((-0x40e*0x2+0xea3+-0x686-_0x35b6dc)/(-0x4cd+-0x9*-0x3e6+-0x1e48+(_0x2a9a96*_0x2a9a96-(-0xa99*0x2+-0x79*-0x11+-0xa*-0x151))*_0x35b6dc)),_0x445de4=Math['sqrt'](-0x20c*0x4+-0x2372+0x2ba3-_0x36b4e2*_0x36b4e2);_0x229cc6['set'](Math['cos'](_0x52daa9)*_0x445de4,Math['sin'](_0x52daa9)*_0x445de4,_0x36b4e2)['normalize']();},cE=(_0x10c83b,_0x36b7a3)=>{const _0x22a099=_0x10c83b*_0x36b7a3,_0x587b6c=_0x36b7a3/(-0x1a1f+-0x3b*-0x53+-0x1*-0x6ff-_0x10c83b*_0x10c83b+_0x22a099*_0x22a099);return _0x587b6c*_0x587b6c*((0x83*0x6+0x261a*-0x1+0x2309*0x1)/Math['PI']);},hE=(_0x58256b,_0x4b9d41)=>{const _0x41d35f=new D(),_0x39828c=[];for(let _0xde0b03=0x982+-0xe7f+-0x1*-0x4fd;_0xde0b03<_0x58256b;++_0xde0b03)nE(_0x41d35f,_0xde0b03/_0x58256b,wl['radicalInv'+'erse'](_0xde0b03),_0x4b9d41),_0x39828c['push'](_0x41d35f['x'],_0x41d35f['y'],_0x41d35f['z'],0xa4*0x11+-0xa*-0x2a5+-0x2556);return _0x39828c;},dE=(_0x36db02,_0x427fbc)=>{const _0x83b55f=_0x427fbc/_0x36db02,_0xa89ae5=new D(),_0x540fa5=[];for(let _0x171649=0xd02+-0x3cd*-0x1+-0x10cf*0x1;_0x171649<_0x36db02;++_0x171649){oE(_0xa89ae5,_0x171649/_0x36db02,wl['radicalInv'+'erse'](_0x171649));const _0xeaefdf=_0xa89ae5['z']/Math['PI'],_0x2fc1b3=(0x2*-0x574+-0x80f*-0x1+-0x1*-0x2d9+0.5)*Math['log2'](_0x83b55f/_0xeaefdf);_0x540fa5['push'](_0xa89ae5['x'],_0xa89ae5['y'],_0xa89ae5['z'],_0x2fc1b3);}return _0x540fa5;},fE={0x10:{0x2:0x1a,0x8:0x14,0x20:0x11,0x80:0x10,0x200:0x10},0x20:{0x2:0x35,0x8:0x28,0x20:0x22,0x80:0x20,0x200:0x20},0x80:{0x2:0xd6,0x8:0xa3,0x20:0x8b,0x80:0x82,0x200:0x80},0x400:{0x2:0x6ba,0x8:0x51e,0x20:0x45a,0x80:0x411,0x200:0x401}},uE=(_0x219fd2,_0xe78e50)=>{const _0x2ca972=fE[_0x219fd2];return _0x2ca972&&_0x2ca972[_0xe78e50]||_0x219fd2;},pE=(_0x371d69,_0x28f3e9,_0x53fb29)=>{const _0xae51c9=_0x53fb29/_0x371d69,_0x2ba9b0=0x5f6+-0x261f+0x1*0x202a-Math['log2'](_0x28f3e9)/(0x893+-0x25c2+0x1d3a),_0x131c3d=_0x2ba9b0*_0x2ba9b0,_0x499fef=new D(),_0xc0e29f=new D(),_0x36b0f6=new D(-0x1942+0x68a+0x4*0x4ae,0x1a5e+-0x2147+0x6e9,-0xf*-0x9d+0x6a+0x1ec*-0x5),_0x1589b8=[],_0x427714=uE(_0x371d69,_0x28f3e9);for(let _0x506ed6=0x1a49+0x13bc+0x2b5*-0x11;_0x506ed6<_0x427714;++_0x506ed6){lE(_0x499fef,_0x506ed6/_0x427714,wl['radicalInv'+'erse'](_0x506ed6),_0x131c3d);const _0x1393cc=_0x499fef['z'];if(_0xc0e29f['set'](_0x499fef['x'],_0x499fef['y'],_0x499fef['z'])['mulScalar']((-0x212f+-0x1273+0x33a4)*_0x1393cc)['sub'](_0x36b0f6),_0xc0e29f['z']>0xa57*-0x1+-0x1a3d*-0x1+-0xfe6*0x1){const _0x3d1c69=cE(Math['min'](0x131e+0x1769+-0x1*0x2a86,_0x1393cc),_0x131c3d)/(0x14f8+0x9a3*0x2+-0x10f*0x26)+(-0x774+0xdba+-0x646*0x1+0.001),_0x2ed2b1=(-0xdb3+0x1a98+-0xce5+0.5)*Math['log2'](_0xae51c9/_0x3d1c69);_0x1589b8['push'](_0xc0e29f['x'],_0xc0e29f['y'],_0xc0e29f['z'],_0x2ed2b1);}}for(;_0x1589b8['length']<_0x371d69*(-0x3d1*-0x4+-0x1bed+0xcad);)_0x1589b8['push'](0x95b+0x6c*-0x4c+0x16b5*0x1,-0x3*-0x4a8+-0xa9b*-0x2+0x13*-0x1da,-0x86*-0x2b+0x3ee*0x6+-0x2e16,-0x2e*-0x9e+0x6*0x57f+0x1eaf*-0x2);return _0x1589b8;},mE=(_0x4e570e,_0x33849a,_0x169de4)=>{const _0x520d1=aE(_0x169de4);return new _e(_0x4e570e,{'name':_0x33849a,'width':_0x520d1['width'],'height':_0x520d1['height'],'mipmaps':!(0x711+-0x1*-0x44d+-0xb5d*0x1),'minFilter':Te,'magFilter':Te,'levels':[_0x520d1['data']]});};class By{constructor(_0x3ca2b8=!(-0x1d2b+-0x9a0+0x26cb)){h(this,'map',new Map()),this['destroyCon'+'tent']=_0x3ca2b8;}['destroy'](){this['destroyCon'+'tent']&&this['map']['forEach']((_0x2218fc,_0x33642f)=>{_0x2218fc['destroy']();});}['get'](_0xd0fe06,_0x362f6d){if(!this['map']['has'](_0xd0fe06)){const _0x5007e5=_0x362f6d();return this['map']['set'](_0xd0fe06,_0x5007e5),_0x5007e5;}return this['map']['get'](_0xd0fe06);}}const _E=new By(!(0x859+-0x28d+-0x5cb*0x1)),gE=new Kt(),Up=(_0x2b7504,_0x371c1a,_0x3f0a7c)=>gE['get'](_0x2b7504,()=>new By())['get'](_0x371c1a,()=>mE(_0x2b7504,_0x371c1a,_E['get'](_0x371c1a,_0x3f0a7c))),SE=(_0x25f640,_0x1a51ef,_0x37abcc)=>{const _0x1b6ec7='lambert-sa'+'mples-'+_0x1a51ef+'-'+_0x37abcc;return Up(_0x25f640,_0x1b6ec7,()=>dE(_0x1a51ef,_0x37abcc));},yE=(_0x3ed0ed,_0x18cad1,_0x130a9f)=>{const _0x1aa8a3='phong-samp'+'les-'+_0x18cad1+'-'+_0x130a9f;return Up(_0x3ed0ed,_0x1aa8a3,()=>hE(_0x18cad1,_0x130a9f));},vE=(_0x2870e8,_0x458bef,_0x302386,_0x177e1d)=>{const _0x295274='ggx-sample'+'s-'+_0x458bef+'-'+_0x302386+'-'+_0x177e1d;return Up(_0x2870e8,_0x295274,()=>pE(_0x458bef,_0x302386,_0x177e1d));};function vi(_0x8b5f83,_0x199b00,_0x262972={}){var _0x163892,_0x44294a;w['assert'](_0x8b5f83 instanceof _e&&_0x199b00 instanceof _e,'source\x20and'+'\x20target\x20mu'+'st\x20be\x20text'+'ures');const _0x2e23eb=_0x262972['seamPixels']??0x137f+0x1756+-0x2ad5,_0x279298=(((_0x163892=_0x262972['rect'])==null?void(-0x1cd3+-0x1f17+-0x1df5*-0x2):_0x163892['z'])??_0x199b00['width'])-_0x2e23eb*(0x1*0x19a3+-0x132*0x17+-0x9*-0x35),_0x2431a3=(((_0x44294a=_0x262972['rect'])==null?void(0x20e2+0xc65+-0x2d47):_0x44294a['w'])??_0x199b00['height'])-_0x2e23eb*(0x1f6*-0x1+0x5ca+0x146*-0x3);if(_0x279298<-0xa82+-0x541*-0x2+-0x1*-0x1||_0x2431a3<-0x14e7+0x21be+-0xcd6)return!(0x7d*-0x4f+0x2b*0x3b+0x1cab);const _0x49098c={'none':'reproject','lambert':'prefilterS'+'amplesUnwe'+'ighted','phong':'prefilterS'+'amplesUnwe'+'ighted','ggx':'prefilterS'+'amples'},_0x3357c7=_0x262972['hasOwnProp'+'erty']('specularPo'+'wer')?_0x262972['specularPo'+'wer']:-0x1c1*0x16+0x2499*-0x1+-0xc*-0x644,_0x47ce93=_0x262972['hasOwnProp'+'erty']('face')?_0x262972['face']:null,_0x2061cd=_0x262972['hasOwnProp'+'erty']('distributi'+'on')?_0x262972['distributi'+'on']:_0x3357c7===0xe64*0x1+0x22ad+-0x3110?'none':'phong',_0x50a70b=_0x49098c[_0x2061cd]||'reproject',_0x42f634=_0x50a70b['startsWith']('prefilterS'+'amples'),_0x36e7ef=Sr['decodeFunc'](_0x8b5f83['encoding']),_0x2edd14=Sr['encodeFunc'](_0x199b00['encoding']),_0x4432f5='sample'+d_(_0x8b5f83['projection']),_0x19dc93='getDirecti'+'on'+d_(_0x199b00['projection']),_0x40ea5d=_0x262972['hasOwnProp'+'erty']('numSamples')?_0x262972['numSamples']:-0x2341+0x3*-0xac+0x2945,_0x10a860='ReprojectS'+'hader:'+_0x50a70b+'_'+_0x36e7ef+'_'+_0x2edd14+'_'+_0x4432f5+'_'+_0x19dc93+'_'+_0x40ea5d,_0x32a2a4=_0x8b5f83['device'];let _0x3efb57=Nn(_0x32a2a4)['getCachedS'+'hader'](_0x10a860);if(!_0x3efb57){const _0x2b0892=new Map();_0x42f634&&_0x2b0892['set']('USE_SAMPLE'+'S_TEX',''),_0x8b5f83['cubemap']&&_0x2b0892['set']('CUBEMAP_SO'+'URCE',''),_0x2b0892['set']('{PROCESS_F'+'UNC}',_0x50a70b),_0x2b0892['set']('{DECODE_FU'+'NC}',_0x36e7ef),_0x2b0892['set']('{ENCODE_FU'+'NC}',_0x2edd14),_0x2b0892['set']('{SOURCE_FU'+'NC}',_0x4432f5),_0x2b0892['set']('{TARGET_FU'+'NC}',_0x19dc93),_0x2b0892['set']('{NUM_SAMPL'+'ES}',_0x40ea5d),_0x2b0892['set']('{NUM_SAMPL'+'ES_SQRT}',Math['round'](Math['sqrt'](_0x40ea5d))['toFixed'](0x1374+-0x1847+0x67*0xc));const _0x42330c=_0x32a2a4['isWebGPU'],_0x223cfe=Ce['get'](_0x32a2a4,_0x42330c?it:Fe),_0xfc8fd8=new Map();_0xfc8fd8['set']('decodePS',_0x223cfe['get']('decodePS')),_0xfc8fd8['set']('encodePS',_0x223cfe['get']('encodePS')),_0x3efb57=$t['createShad'+'er'](_0x32a2a4,{'uniqueName':_0x10a860,'attributes':{'vertex_position':Pe},'vertexChunk':'reprojectV'+'S','fragmentChunk':'reprojectP'+'S','fragmentIncludes':_0xfc8fd8,'fragmentDefines':_0x2b0892});}Q['pushGpuMar'+'ker'](_0x32a2a4,'ReprojectT'+'exture'),_0x32a2a4['setBlendSt'+'ate'](pt['NOBLEND']);const _0x4bb301=_0x32a2a4['scope']['resolve'](_0x8b5f83['cubemap']?'sourceCube':'sourceTex');w['assert'](_0x4bb301),_0x4bb301['setValue'](_0x8b5f83);const _0xf72c94=_0x32a2a4['scope']['resolve']('params'),_0x3138fe=_0x32a2a4['scope']['resolve']('uvMod');_0x2e23eb>0xe1b*-0x1+-0x730+0x4f*0x45?_0x3138fe['setValue']([(_0x279298+_0x2e23eb*(0xd0e+0x559+-0x1*0x1265))/_0x279298,(_0x2431a3+_0x2e23eb*(0x1b53*0x1+-0x1f0f+-0x1df*-0x2))/_0x2431a3,-_0x2e23eb/_0x279298,-_0x2e23eb/_0x2431a3]):_0x3138fe['setValue']([0xed4*-0x1+0xfd3+-0xfe*0x1,-0xda*0x1d+0xdb*0x22+0x463*-0x1,-0x1c90+0x469*0x7+-0xc5*0x3,-0x52f+0x1666+0x1*-0x1137]);const _0x59a411=[-0x23c6+0xe57+0x156f,_0x199b00['width']*_0x199b00['height']*(_0x199b00['cubemap']?0x1a94+0x20de+-0x2*0x1db6:0x8*-0x38f+0x95f*0x4+0x903*-0x1),_0x8b5f83['width']*_0x8b5f83['height']*(_0x8b5f83['cubemap']?0x126f*-0x1+-0x1e1a+0x1*0x308f:-0x1bd5+0x20b*-0x13+-0x97*-0x71)];if(_0x42f634){const _0x16637f=_0x8b5f83['width']*_0x8b5f83['height']*(_0x8b5f83['cubemap']?-0x1d4b*0x1+-0x589+-0x22da*-0x1:0x1d7+0x8fd*-0x2+0x1024),_0x564110=_0x2061cd==='ggx'?vE(_0x32a2a4,_0x40ea5d,_0x3357c7,_0x16637f):_0x2061cd==='lambert'?SE(_0x32a2a4,_0x40ea5d,_0x16637f):yE(_0x32a2a4,_0x40ea5d,_0x3357c7);_0x32a2a4['scope']['resolve']('samplesTex')['setValue'](_0x564110),_0x32a2a4['scope']['resolve']('samplesTex'+'InverseSiz'+'e')['setValue']([(-0x10b9+0xa7*0x1d+-0x33*0xb)/_0x564110['width'],(-0x383*0xb+-0x1c67+-0x4309*-0x1)/_0x564110['height']]);}for(let _0x424a23=0x1043+0xd*0x185+-0x2404;_0x424a23<(_0x199b00['cubemap']?-0x1fef+0x1cab*-0x1+-0x10*-0x3ca:-0xe7*-0x9+0x155f+0x1*-0x1d7d);_0x424a23++)if(_0x47ce93===null||_0x424a23===_0x47ce93){const _0x201fcf=new gt({'colorBuffer':_0x199b00,'face':_0x424a23,'depth':!(-0x35c*0x1+-0x1*0x16d3+0x1a30),'flipY':_0x32a2a4['isWebGPU']});_0x59a411[-0x1044+-0x2*0x893+0x216a]=_0x424a23,_0xf72c94['setValue'](_0x59a411),Tr(_0x32a2a4,_0x201fcf,_0x3efb57,_0x262972==null?void(0x9*-0x176+0x1d4f+-0x1029):_0x262972['rect']),_0x201fcf['destroy']();}return Q['popGpuMark'+'er'](_0x32a2a4),!(-0x583+0x3*0x9+0x568);}const Pd=(_0x21a2af,_0x59722e=0x52*-0x2c+-0x264a+0x6*0x8bb)=>-0x9f2*0x1+0x152c+0xd*-0xdd+Math['floor'](Math['log2'](Math['max'](_0x21a2af,_0x59722e))),xE=_0x229789=>_0x229789['textureHal'+'fFloatRend'+'erable'],TE=_0x28f49a=>_0x28f49a['textureFlo'+'atRenderab'+'le'],wE=_0x247d9a=>xE(_0x247d9a)?nt:TE(_0x247d9a)?Xt:Ne,EE=_0x2b029c=>Ne,bE=(_0x3fc356,_0x3334c4,_0x51d47c,_0x1552c)=>new _e(_0x3fc356,{'name':'lighting-'+_0x3334c4,'cubemap':!(0x1*-0x62b+0xb47*0x1+-0x51c),'width':_0x3334c4,'height':_0x3334c4,'format':_0x51d47c,'type':Bo,'addressU':ue,'addressV':ue,'mipmaps':!(-0x1*0x8b7+0x85*-0x35+0x2441)});class zy{static['generateSk'+'yboxCubema'+'p'](_0xd11790,_0x3fccae){const _0xbd42ac=_0xd11790['device'];Q['pushGpuMar'+'ker'](_0xbd42ac,'genSkyboxC'+'ubemap');const _0x2f59c6=bE(_0xbd42ac,_0x3fccae||(_0xd11790['cubemap']?_0xd11790['width']:_0xd11790['width']/(0xe6e*-0x1+-0x13a7+-0x12d*-0x1d)),Ne);return vi(_0xd11790,_0x2f59c6,{'numSamples':0x400}),Q['popGpuMark'+'er'](_0xbd42ac),_0x2f59c6;}static['generateLi'+'ghtingSour'+'ce'](_0x5db204,_0x2aeb7e){const _0x321a1a=_0x5db204['device'];Q['pushGpuMar'+'ker'](_0x321a1a,'genLightin'+'gSource');const _0x3e71d4=wE(_0x321a1a),_0x3c3cfe=(_0x2aeb7e==null?void(-0xbcb*0x1+-0x216d*-0x1+-0xd5*0x1a):_0x2aeb7e['target'])||new _e(_0x321a1a,{'name':'lighting-s'+'ource','cubemap':!(0x45f+0x455*-0x5+0x114a),'width':(_0x2aeb7e==null?void(-0x950+-0x2*0xc73+0x2236):_0x2aeb7e['size'])||-0x7b4+0x1ff5+-0x7eb*0x3,'height':(_0x2aeb7e==null?void(-0x4f*0x69+0x87*-0x25+0x33ea):_0x2aeb7e['size'])||0xdcf+-0x3f*0x43+0xb*0x4a,'format':_0x3e71d4,'type':_0x3e71d4===Ne?Bo:Ms,'addressU':ue,'addressV':ue,'mipmaps':!(-0x19c*-0x3+-0x287*-0x6+-0x13fe)});return vi(_0x5db204,_0x3c3cfe,{'numSamples':_0x5db204['mipmaps']?-0x1*0x241+0x1608+-0x13c6:-0x1*-0x194e+0x1*0x162a+-0x2b78}),Q['popGpuMark'+'er'](_0x321a1a),_0x3c3cfe;}static['generateAt'+'las'](_0x32f747,_0x18b8ea){const _0x33895b=_0x32f747['device'],_0x196232=EE();Q['pushGpuMar'+'ker'](_0x33895b,'genAtlas');const _0x54d315=(_0x18b8ea==null?void(-0x1833+-0x2f*-0x1e+0x12b1):_0x18b8ea['target'])||new _e(_0x33895b,{'name':'envAtlas','width':(_0x18b8ea==null?void(0x14b*-0x11+0x5c*0x31+0x45f):_0x18b8ea['size'])||-0x2345+0x6db+0x11*0x1ca,'height':(_0x18b8ea==null?void(-0x13ec+-0xcc4+-0x1*-0x20b0):_0x18b8ea['size'])||0x224*-0x11+-0xac0+0x3124,'format':_0x196232,'type':Bo,'projection':um,'addressU':ue,'addressV':ue,'mipmaps':!(0x4bf*-0x7+0xf95+0x11a5)});Q['pushGpuMar'+'ker'](_0x33895b,'mipmaps');const _0x4c86bb=_0x54d315['width']/(0x4e7*-0x2+0x14f*0x5+0x543),_0x1a97bc=new re(0x19cc+0x7*-0x8a+-0x1606,-0x1f7a+-0x252b+0x1*0x44a5,(-0x2302+0x1e*0x11b+0x52*0xc)*_0x4c86bb,(-0x476+0x25f+-0x317*-0x1)*_0x4c86bb),_0x448840=Pd(-0x22e1+0x717+0x1cca)-Pd(-0x1*0x1ae9+-0x7*0x22d+0x2a28);for(let _0x481e1e=-0x1a80+0x13bf+0x6c1;_0x481e1e<_0x448840;++_0x481e1e)vi(_0x32f747,_0x54d315,{'numSamples':0x1,'rect':_0x1a97bc,'seamPixels':_0x4c86bb}),_0x1a97bc['x']+=_0x1a97bc['w'],_0x1a97bc['y']+=_0x1a97bc['w'],_0x1a97bc['z']=Math['max'](-0x7f7+0x28a+-0x56e*-0x1,Math['floor'](_0x1a97bc['z']*(-0x2150+-0x1*-0x270d+0x1*-0x5bd+0.5))),_0x1a97bc['w']=Math['max'](0x1a*-0x179+-0xc2e+-0x3*-0x10d3,Math['floor'](_0x1a97bc['w']*(-0x1dc2+0xf16*0x1+0x4*0x3ab+0.5)));Q['popGpuMark'+'er'](_0x33895b),Q['pushGpuMar'+'ker'](_0x33895b,'reflection'+'s'),_0x1a97bc['set'](-0xe17+0x1*0x106d+-0xd*0x2e,(-0x80b+0xc2e+-0x323)*_0x4c86bb,(0x6b5+0xd7a+0x3*-0x665)*_0x4c86bb,(0x260d+0x12*-0x112+-0x1249)*_0x4c86bb);for(let _0x117ac7=0x238c+0x7*0x445+0x29e*-0x19;_0x117ac7<0x2436+-0x133*0x1d+0x3*-0x78;++_0x117ac7)vi(_0x32f747,_0x54d315,{'numSamples':(_0x18b8ea==null?void(-0xc02+-0x2524+0x3126):_0x18b8ea['numReflect'+'ionSamples'])||0x1d85+0xe04+-0x2789,'distribution':(_0x18b8ea==null?void(0x16ac+0x19c*0xd+-0x2b98):_0x18b8ea['distributi'+'on'])||'ggx','specularPower':Math['max'](-0x8*0xd+-0x1934+0x53*0x4f,-0x1ae8+0x231c*0x1+-0x34>>_0x117ac7*(-0x18d*0x8+0x9*-0x1c6+0x1c60)),'rect':_0x1a97bc,'seamPixels':_0x4c86bb}),_0x1a97bc['y']+=_0x1a97bc['w'],_0x1a97bc['z']=Math['max'](0x453+-0x1752+0x1300,Math['floor'](_0x1a97bc['z']*(-0x1*0x6a1+0x1*0xac7+-0x426+0.5))),_0x1a97bc['w']=Math['max'](0x15*0x168+0x1fd*-0xf+-0x13*-0x4,Math['floor'](_0x1a97bc['w']*(-0x1219*-0x1+0x18d3+-0x1576*0x2+0.5)));return Q['popGpuMark'+'er'](_0x33895b),Q['pushGpuMar'+'ker'](_0x33895b,'ambient'),_0x1a97bc['set']((0x62b*0x2+-0xe63+-0x1*-0x28d)*_0x4c86bb,(0xdce+0x3eb*0x3+-0x180f)*_0x4c86bb,(0x12b*0x1b+0x2077+0x18*-0x2a8)*_0x4c86bb,(-0x20f*-0xb+-0x2041+0x9bc)*_0x4c86bb),vi(_0x32f747,_0x54d315,{'numSamples':(_0x18b8ea==null?void(-0x259c+-0x16ec+0x3c88):_0x18b8ea['numAmbient'+'Samples'])||0xacb*-0x1+0x23c0+0x10f5*-0x1,'distribution':'lambert','rect':_0x1a97bc,'seamPixels':_0x4c86bb}),Q['popGpuMark'+'er'](_0x33895b),Q['popGpuMark'+'er'](_0x33895b),_0x54d315;}static['generatePr'+'efilteredA'+'tlas'](_0x366a6f,_0x416f6b){const _0x300ebe=_0x366a6f[0x921+-0x3*0x279+-0x1b6]['device'],_0x3a8a62=_0x366a6f[0x18d3+-0x255+-0x167e]['format'],_0x5f96ad=_0x366a6f[0x755*0x1+-0x272*-0x1+-0x1*0x9c7]['type'];Q['pushGpuMar'+'ker'](_0x300ebe,'genPrefilt'+'eredAtlas');const _0x15a960=(_0x416f6b==null?void(-0x133*0x11+0x1*0x240b+0x1*-0xfa8):_0x416f6b['target'])||new _e(_0x300ebe,{'name':'envPrefilt'+'eredAtlas','width':(_0x416f6b==null?void(-0x150*-0x9+-0xc4*0x15+0x6*0xb6):_0x416f6b['size'])||-0x1*-0x1749+-0x3*-0x4d5+-0x23c8,'height':(_0x416f6b==null?void(-0x1d63+-0x1*-0x55+0x1d0e):_0x416f6b['size'])||0x1*-0x9be+-0x1*-0x185a+0x4*-0x327,'format':_0x3a8a62,'type':_0x5f96ad,'projection':um,'addressU':ue,'addressV':ue,'mipmaps':!(-0xb6a*-0x1+-0xbab+0x42)});Q['pushGpuMar'+'ker'](_0x300ebe,'mipmaps');const _0x417aea=_0x15a960['width']/(0x220e+-0x1*0x10e1+0x15*-0xb9),_0x49a5b4=new re(-0x1*-0x14a1+0xe01+-0x22a2,0x1d*-0xdf+0x195d+-0xd*0x2,(-0x11d*-0x1c+-0x19fe+-0x32e)*_0x417aea,(-0x6f+0xfe7*-0x1+0x13d*0xe)*_0x417aea),_0x2a7d1b=Pd(0x3*-0x257+0x151b+-0xc16);for(let _0x560d16=-0x269d+-0x114c+0x37e9*0x1;_0x560d16<_0x2a7d1b;++_0x560d16)vi(_0x366a6f[-0x56*0xb+-0x26f2+0x2aa4],_0x15a960,{'numSamples':0x1,'rect':_0x49a5b4,'seamPixels':_0x417aea}),_0x49a5b4['x']+=_0x49a5b4['w'],_0x49a5b4['y']+=_0x49a5b4['w'],_0x49a5b4['z']=Math['max'](0x317*-0x7+-0x44*0x93+0x3cae,Math['floor'](_0x49a5b4['z']*(0x2030+-0x1*-0x8ad+-0x28dd+0.5))),_0x49a5b4['w']=Math['max'](0x1989+0x5*-0x355+0x8df*-0x1,Math['floor'](_0x49a5b4['w']*(0xe7e+-0x1ff2+0x1174+0.5)));Q['popGpuMark'+'er'](_0x300ebe),Q['pushGpuMar'+'ker'](_0x300ebe,'reflection'+'s'),_0x49a5b4['set'](-0x21b7+-0x86*0x37+0x3e81*0x1,(0x3d*-0x87+0x1*0x1c85+0x46*0x11)*_0x417aea,(0x63*-0x37+0x124c*-0x1+-0x43*-0x9b)*_0x417aea,(0x1b08+0x22b9+-0x3d41)*_0x417aea);for(let _0x4ea7e3=0x881*-0x1+0x1848+-0xfc6;_0x4ea7e3<_0x366a6f['length'];++_0x4ea7e3)vi(_0x366a6f[_0x4ea7e3],_0x15a960,{'numSamples':0x1,'rect':_0x49a5b4,'seamPixels':_0x417aea}),_0x49a5b4['y']+=_0x49a5b4['w'],_0x49a5b4['z']=Math['max'](-0x15c9*-0x1+-0x71*-0x2f+-0x2a87*0x1,Math['floor'](_0x49a5b4['z']*(0x16*-0xa7+0x135*0xd+-0x157+0.5))),_0x49a5b4['w']=Math['max'](-0x2*-0xc70+-0x765+-0x117a,Math['floor'](_0x49a5b4['w']*(0xd3e+0x2584+-0x32c2+0.5)));return Q['popGpuMark'+'er'](_0x300ebe),Q['pushGpuMar'+'ker'](_0x300ebe,'ambient'),_0x49a5b4['set']((0x212c+0x105d+-0x3109)*_0x417aea,(0x91b+-0x2018+0x187d)*_0x417aea,(-0x24*-0x89+0x2c*0xc5+-0x34e0)*_0x417aea,(-0x25b0+-0x555+0x2b25)*_0x417aea),_0x416f6b!=null&&_0x416f6b['legacyAmbi'+'ent']?vi(_0x366a6f[-0x1a*0x4f+-0xc49*0x2+0xadf*0x3],_0x15a960,{'numSamples':0x1,'rect':_0x49a5b4,'seamPixels':_0x417aea}):vi(_0x366a6f[-0x193+0x2*-0x52d+0xbed],_0x15a960,{'numSamples':(_0x416f6b==null?void(0xed0*-0x2+-0x7f*-0x29+0x949):_0x416f6b['numSamples'])||0x1461+0x1*0x2509+-0x316a,'distribution':'lambert','rect':_0x49a5b4,'seamPixels':_0x417aea}),Q['popGpuMark'+'er'](_0x300ebe),Q['popGpuMark'+'er'](_0x300ebe),_0x15a960;}}const AE={'aoPS':'1.57','clearCoatPS':'1.57','clearCoatGlossPS':'1.60','clearCoatNormalPS':'1.57','diffusePS':'1.57','emissivePS':'1.57','glossPS':'1.60','metalnessPS':'1.57','normalMapPS':'1.57','opacityPS':'1.57','parallaxPS':'1.57','sheenPS':'1.57','sheenGlossPS':'1.60','specularPS':'1.57','specularityFactorPS':'1.57','thicknessPS':'1.57','transmissionPS':'1.57','normalVertexPS':'1.55','aoDiffuseOccPS':'1.62','aoSpecOccPS':'2.6','clusteredLightPS':'1.62','clusteredLightShadowPS':'1.62','combinePS':'1.62','falloffInvSquaredPS':'1.62','falloffLinearPS':'1.62','lightDiffuseLambertPS':'1.62','lightSheenPS':'1.62','lightSpecularAnisoGGXPS':'1.62','lightSpecularBlinnPS':'1.62','ltcPS':'1.62','reflDirPS':'1.62','reflDirAnisoPS':'1.62','reflectionCCPS':'1.62','reflectionCubePS':'2.6','reflectionEnvPS':'2.6','reflectionEnvHQPS':'2.6','reflectionSpherePS':'2.6','reflectionSheenPS':'1.62','shadowCommonPS':'1.62','shadowCoordPS':'1.62','shadowCoordPerspZBufferPS':'1.62','shadowEVSMPS':'1.62','spotPS':'1.62','TBNPS':'1.62','endPS':'1.65','metalnessModulatePS':'1.65','outputAlphaPS':'1.65','outputAlphaPremulPS':'1.65','fresnelSchlickPS':'1.65','iridescenceDiffractionPS':'1.65','lightmapAddPS':'1.65','refractionCubePS':'1.70','refractionDynamicPS':'1.70'},f_={'ambientPrefilteredCubePS':'1.51','ambientPrefilteredCubeLodPS':'1.51','dpAtlasQuadPS':'1.51','genParaboloidPS':'1.51','prefilterCubemapPS':'1.51','reflectionDpAtlasPS':'1.51','reflectionPrefilteredCubePS':'1.51','reflectionPrefilteredCubeLodPS':'1.51','refractionPS':'1.56','combineClearCoatPS':'1.56','combineDiffusePS':'1.56','combineDiffuseSpecularPS':'1.56','combineDiffuseSpecularNoReflPS':'1.56','combineDiffuseSpecularNoReflSeparateAmbientPS':'1.56','combineDiffuseSpecularOldPS':'1.56','lightmapSingleVertPS':'1.55','normalMapFastPS':'1.55','specularAaNonePS':'1.55','specularAaToksvigPS':'1.55','specularAaToksvigFastPS':'1.55','skyboxEnvPS':'2.1','skyboxHDRPS':'2.1','shadowVSM8PS':'2.3','fogExpPS':'2.5','fogExp2PS':'2.5','fogLinearPS':'2.5','fogNonePS':'2.5','gamma1_0PS':'2.5','gamma2_2PS':'2.5','storeEVSMPS':'2.6','shadowEVSMnPS':'2.6','shadowVSM_commonPS':'2.6','shadowStandardPS':'2.6','shadowStandardGL2PS':'2.6','startVS':'2.6','endVS':'2.6','baseVS':'2.6','baseNineSlicedVS':'2.6','viewNormalVS':'2.6','lightmapDirAddPS':'2.6','TBNObjectSpacePS':'2.6','TBNderivativePS':'2.6','startPS':'2.6','outputAlphaOpaque':'2.6','outputAlphaPremul':'2.6','cubeMapProjectBoxPS':'2.6','cubeMapProjectNonePS':'2.6','envMultiplyPS':'2.6','envConstPS':'2.6','aoSpecOccConstPS':'2.6','aoSpecOccConstSimplePS':'2.6','aoSpecOccSimplePS':'2.6','ambientConstantPS':'2.6','ambientEnvPS':'2.6','ambientSHPS':'2.6','shadowSampleCoordPS':'2.6','diffuseDetailMapPS':'2.7','normalDetailMapPS':'2.7','normalXYPS':'2.7','normalXYZPS':'2.7','aoDetailMapPS':'2.7','lightmapDirPS':'2.7','lightmapSinglePS':'2.7','tangentBinormalVS':'2.7'},CE=(_0x118c98,_0x1741a1)=>{const _0x5a68e5=_0x118c98['split']('.')['map'](_0x4c2a91=>parseInt(_0x4c2a91,-0x136d+-0x1*0x1aad+0x2e24)),_0x32cde2=_0x1741a1['split']('.')['map'](_0x272bb8=>parseInt(_0x272bb8,-0x1*0xf4d+0x24f0+0x61*-0x39));return _0x5a68e5[0x1265*0x1+-0x1*0x24eb+-0x2*-0x943]<_0x32cde2[0xac8+-0x87d*0x1+-0x24b]||_0x5a68e5[0x5*-0x157+0xb99*-0x1+0x1*0x124c]===_0x32cde2[0xbc6*0x1+0x57a*-0x7+0x1a90]&&_0x5a68e5[0x229e+0x1244+-0x34e1]<_0x32cde2[-0x1dec+-0x21d8+-0x19*-0x28d];},PE=(_0x34dece,_0x1485d0)=>{for(const _0x16c136 of _0x34dece['keys']())if(f_['hasOwnProp'+'erty'](_0x16c136)){const _0x345533=f_[_0x16c136];w['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x16c136+('\x27\x20was\x20remo'+'ved\x20in\x20API'+'\x20')+_0x345533+('\x20and\x20is\x20no'+'\x20longer\x20su'+'pported.'));}else{const _0x126339=AE[_0x16c136];_0x126339&&(!_0x1485d0||CE(_0x1485d0,_0x126339))&&w['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x16c136+('\x27\x20is\x20API\x20v'+'ersion\x20')+_0x126339+(',\x20but\x20the\x20'+'supplied\x20c'+'hunk\x20is\x20ve'+'rsion\x20')+(_0x1485d0||'undefined')+('.\x20Please\x20u'+'pdate\x20to\x20t'+'he\x20latest\x20'+'API:\x20https'+'://develop'+'er.playcan'+'vas.com/us'+'er-manual/'+'graphics/s'+'hader-chun'+'k-migratio'+'ns/'));}},Md={'vertex_normal':gs,'vertex_tangent':yi,'vertex_texCoord0':is,'vertex_texCoord1':va,'vertex_color':Wt,'vertex_boneWeights':gi,'vertex_boneIndices':us};class ME{constructor(_0x2cc190,_0x419c93,_0x384011=!(-0x616+0x43*0x2+0x164*0x4)){h(this,'varyingsCo'+'de',''),h(this,'device'),h(this,'options'),h(this,'shaderLang'+'uage'),h(this,'vDefines',new Map()),h(this,'fDefines',new Map()),h(this,'includes',new Map()),h(this,'chunks',null),(this['device']=_0x2cc190,this['options']=_0x419c93);const _0x2bdd13=_0x419c93['shaderChun'+'ks'];if(this['shaderLang'+'uage']=_0x2cc190['isWebGPU']&&_0x384011&&(_0x2bdd13!=null&&_0x2bdd13['useWGSL'])?it:Fe,this['attributes']={'vertex_position':Pe},_0x419c93['userAttrib'+'utes']){for(const [_0x49ed38,_0x4c865f]of Object['entries'](_0x419c93['userAttrib'+'utes']))this['attributes'][_0x4c865f]=_0x49ed38;}const _0x4caa0c=Ce['get'](_0x2cc190,this['shaderLang'+'uage']);if(this['chunks']=new Map(_0x4caa0c),_0x2bdd13){const _0x4cbc3c=this['shaderLang'+'uage']===Fe?_0x2bdd13['glsl']:_0x2bdd13['wgsl'];w['call'](()=>{PE(_0x4cbc3c,_0x2bdd13['version']);}),_0x4cbc3c['forEach']((_0x44dc7e,_0x82e0d9)=>{for(const _0x3b5681 in Md)Md['hasOwnProp'+'erty'](_0x3b5681)&&_0x44dc7e['indexOf'](_0x3b5681)>=-0x6de*0x4+-0x2708*0x1+0x4280&&(this['attributes'][_0x3b5681]=Md[_0x3b5681]);this['chunks']['set'](_0x82e0d9,_0x44dc7e);});}this['shaderPass'+'Info']=Si['get'](this['device'])['getByIndex'](_0x419c93['pass']),this['shadowPass']=this['shaderPass'+'Info']['isShadow'],this['lighting']=_0x419c93['lights']['length']>-0x1d*-0x9+0x73+0x2f*-0x8||_0x419c93['dirLightMa'+'pEnabled']||_0x419c93['clusteredL'+'ightingEna'+'bled'],this['reflection'+'s']=_0x419c93['reflection'+'Source']!==_r,this['needsNorma'+'l']=this['lighting']||this['reflection'+'s']||_0x419c93['useSpecula'+'r']||_0x419c93['ambientSH']||_0x419c93['useHeights']||_0x419c93['enableGGXS'+'pecular']||_0x419c93['clusteredL'+'ightingEna'+'bled']&&!this['shadowPass']||_0x419c93['useClearCo'+'atNormals'],this['needsNorma'+'l']=this['needsNorma'+'l']&&!this['shadowPass'],this['needsScene'+'Color']=_0x419c93['useDynamic'+'Refraction'],this['needsScree'+'nSize']=_0x419c93['useDynamic'+'Refraction'],this['needsTrans'+'forms']=_0x419c93['useDynamic'+'Refraction'],this['vshader']=null,this['fshader']=null;}['fDefineSet'](_0x32f3a5,_0x957f7c,_0x419fa9=''){_0x32f3a5&&this['fDefines']['set'](_0x957f7c,_0x419fa9);}['generateVe'+'rtexShader'](_0x595fc6,_0x5a7777,_0x336c33){const {options:_0x58e5fb,vDefines:_0x1fda47,attributes:_0x32a7fe}=this,_0x2952ce=new Map();if(_0x2952ce['set']('vPositionW','vec3'),(_0x58e5fb['nineSliced'+'Mode']===Pt||_0x58e5fb['nineSliced'+'Mode']===Mt)&&_0x1fda47['set']('NINESLICED',!(0x2f*-0xcd+-0x1cde+0x4281)),this['options']['linearDept'+'h']&&(_0x1fda47['set']('LINEAR_DEP'+'TH',!(-0xa53*-0x2+-0x108e+0x20c*-0x2)),_0x2952ce['set']('vLinearDep'+'th','float')),this['needsNorma'+'l']&&_0x1fda47['set']('NORMALS',!(0x75*0x25+-0xf13*0x1+-0x5*0x5e)),this['options']['useInstanc'+'ing']){const _0x1691e1=Ce['get'](this['device'],this['shaderLang'+'uage']);this['chunks']['get']('transformI'+'nstancingV'+'S')===_0x1691e1['get']('transformI'+'nstancingV'+'S')&&(_0x32a7fe['instance_l'+'ine1']=sp,_0x32a7fe['instance_l'+'ine2']=ip,_0x32a7fe['instance_l'+'ine3']=rp,_0x32a7fe['instance_l'+'ine4']=bn);}this['needsNorma'+'l']&&(_0x32a7fe['vertex_nor'+'mal']=gs,_0x2952ce['set']('vNormalW','vec3'),_0x58e5fb['hasTangent'+'s']&&(_0x58e5fb['useHeights']||_0x58e5fb['useNormals']||_0x58e5fb['useClearCo'+'atNormals']||_0x58e5fb['enableGGXS'+'pecular'])?(_0x1fda47['set']('TANGENTS',!(0x1936+-0x614*-0x5+-0x379a)),_0x32a7fe['vertex_tan'+'gent']=yi,_0x2952ce['set']('vTangentW','vec3'),_0x2952ce['set']('vBinormalW','vec3')):_0x58e5fb['enableGGXS'+'pecular']&&(_0x1fda47['set']('GGX_SPECUL'+'AR',!(-0xa*0x21b+-0xb3*-0x36+-0x10b4)),_0x2952ce['set']('vObjectSpa'+'ceUpW','vec3')));const _0x11b8e7=-0x1378+0x16bf+-0x345;for(let _0x18c052=0x156*0x3+0x2*-0x52c+0x656;_0x18c052<_0x11b8e7;_0x18c052++)_0x595fc6[_0x18c052]&&(_0x1fda47['set']('UV'+_0x18c052,!(0x6*-0x166+0x3*-0x5c0+0xc*0x223)),_0x32a7fe['vertex_tex'+'Coord'+_0x18c052]='TEXCOORD'+_0x18c052),_0x5a7777[_0x18c052]&&(_0x1fda47['set']('UV'+_0x18c052+('_UNMODIFIE'+'D'),!(-0x768+0xb99*-0x1+0x1301)),_0x2952ce['set']('vUv'+_0x18c052,'vec2'));let _0x3befab=0x1607*0x1+0x11*0x46+-0x1aad;const _0x52ad6e=new Set();_0x336c33['forEach'](_0x2ca3ce=>{const {id:_0x1bfd4c,uv:_0x4b0a1d,name:_0x3ab60d}=_0x2ca3ce,_0x4f741d=_0x1bfd4c+_0x4b0a1d*(0x7*-0xe+0x1*0x21d3+-0x210d);if(!_0x52ad6e['has'](_0x4f741d)){_0x52ad6e['add'](_0x4f741d),_0x2952ce['set']('vUV'+_0x4b0a1d+'_'+_0x1bfd4c,'vec2');const _0x1b976a='texture_'+_0x3ab60d+('MapTransfo'+'rm');_0x1fda47['set']('{TRANSFORM'+'_NAME_'+_0x3befab+'}',_0x1b976a),_0x1fda47['set']('{TRANSFORM'+'_UV_'+_0x3befab+'}',_0x4b0a1d),_0x1fda47['set']('{TRANSFORM'+'_ID_'+_0x3befab+'}',_0x1bfd4c),_0x3befab++;}}),_0x1fda47['set']('UV_TRANSFO'+'RMS_COUNT',_0x3befab),_0x58e5fb['vertexColo'+'rs']&&(_0x32a7fe['vertex_col'+'or']=Wt,_0x1fda47['set']('VERTEX_COL'+'OR',!(0x19ec+-0xc4d+-0xd9f)),_0x2952ce['set']('vVertexCol'+'or','vec4')),_0x58e5fb['useMsdf']&&_0x58e5fb['msdfTextAt'+'tribute']&&(_0x32a7fe['vertex_out'+'lineParame'+'ters']=ko,_0x32a7fe['vertex_sha'+'dowParamet'+'ers']=Uo,_0x1fda47['set']('MSDF',!(0x1233+0x6e3*-0x1+-0xb50))),(_0x58e5fb['useMorphPo'+'sition']||_0x58e5fb['useMorphNo'+'rmal'])&&(_0x1fda47['set']('MORPHING',!(-0x2f*-0x16+0x3*0x5dd+-0x15a1)),_0x58e5fb['useMorphTe'+'xtureBased'+'Int']&&_0x1fda47['set']('MORPHING_I'+'NT',!(0x7cb+0x1901+0x4*-0x833)),_0x58e5fb['useMorphPo'+'sition']&&_0x1fda47['set']('MORPHING_P'+'OSITION',!(0x4f3+0x2*-0xb2e+0x1169)),_0x58e5fb['useMorphNo'+'rmal']&&_0x1fda47['set']('MORPHING_N'+'ORMAL',!(0x3e9*0x5+0x749+-0x1ad6)),_0x32a7fe['morph_vert'+'ex_id']=bn),_0x58e5fb['skin']&&(_0x32a7fe['vertex_bon'+'eIndices']=us,_0x58e5fb['batch']?_0x1fda47['set']('BATCH',!(-0x1*0x1241+-0x20b*0x11+0x1*0x34fc)):(_0x32a7fe['vertex_bon'+'eWeights']=gi,_0x1fda47['set']('SKIN',!(-0x238d+0x13*-0x12+0x24e3)))),_0x58e5fb['useInstanc'+'ing']&&_0x1fda47['set']('INSTANCING',!(-0x78f+0x2c*-0x91+0x207b)),_0x58e5fb['screenSpac'+'e']&&_0x1fda47['set']('SCREENSPAC'+'E',!(0x731+0x1e1c+-0x254d*0x1)),_0x58e5fb['pixelSnap']&&_0x1fda47['set']('PIXELSNAP',!(-0x1*-0x18e1+0x410*0x2+-0x7*0x4b7)),_0x2952ce['forEach']((_0x1078cc,_0x47c9d3)=>{this['varyingsCo'+'de']+='#define\x20VA'+'RYING_'+_0x47c9d3['toUpperCas'+'e']()+'\x0a',this['varyingsCo'+'de']+=this['shaderLang'+'uage']===it?'varying\x20'+_0x47c9d3+':\x20'+JS['get'](_0x1078cc)+';\x0a':'varying\x20'+_0x1078cc+'\x20'+_0x47c9d3+';\x0a';}),this['includes']['set']('varyingsVS',this['varyingsCo'+'de']),this['includes']['set']('varyingsPS',this['varyingsCo'+'de']),this['vshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}['_setupLigh'+'tingDefine'+'s'](_0x5ba3b2,_0x3883f0){const _0x394517=this['fDefines'],_0x3a61c7=this['options'];if(this['fDefines']['set']('LIGHT_COUN'+'T',_0x3a61c7['lights']['length']),_0x5ba3b2&&_0x394517['set']('AREA_LIGHT'+'S',!(-0xb*0x27+0x23bd*-0x1+0x1*0x256a)),_0x3883f0&&this['lighting']&&(_0x394517['set']('LIT_CLUSTE'+'RED_LIGHTS',!(0x8b*-0x3e+-0x1*0x782+0x292c)),_0x3a61c7['clusteredL'+'ightingCoo'+'kiesEnable'+'d']&&_0x394517['set']('CLUSTER_CO'+'OKIES',!(0x197*0x17+-0x157d*-0x1+-0x135a*0x3)),_0x3a61c7['clusteredL'+'ightingAre'+'aLightsEna'+'bled']&&_0x394517['set']('CLUSTER_AR'+'EALIGHTS',!(-0x35b+-0x1223+-0x2a*-0x83)),_0x3a61c7['lightMaskD'+'ynamic']&&_0x394517['set']('CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS',!(0x1eec+-0x248*-0x5+-0x2a54)),_0x3a61c7['clusteredL'+'ightingSha'+'dowsEnable'+'d']&&!_0x3a61c7['noShadow'])){const _0x2671c1=Xi['get'](_0x3a61c7['clusteredL'+'ightingSha'+'dowType']);_0x394517['set']('CLUSTER_SH'+'ADOWS',!(0x1fc6*-0x1+-0xecb+0x2e91)),_0x394517['set']('SHADOW_KIN'+'D_'+_0x2671c1['kind'],!(0x162e+0x1d6f+-0x339d)),_0x394517['set']('CLUSTER_SH'+'ADOW_TYPE_'+_0x2671c1['kind'],!(0xa3*-0xf+0x13*-0x107+0x1d12));}for(let _0x4c2deb=-0x10de+-0x151a+-0x3c*-0xa2;_0x4c2deb<_0x3a61c7['lights']['length'];_0x4c2deb++){const _0x3b6107=_0x3a61c7['lights'][_0x4c2deb],_0x3839d9=_0x3b6107['_type'];if(_0x3883f0&&_0x3839d9!==ve)continue;const _0x2c4f63=_0x5ba3b2&&_0x3b6107['_shape']?_0x3b6107['_shape']:js,_0x585350=_0x3b6107['_shadowTyp'+'e'],_0x4ed6b0=_0x3b6107['castShadow'+'s']&&!_0x3a61c7['noShadow'],_0x3e8066=Xi['get'](_0x585350);w['assert'](_0x3e8066),_0x394517['set']('LIGHT'+_0x4c2deb,!(-0x836*-0x1+-0x1*0x1ce3+0x14ad)),_0x394517['set']('LIGHT'+_0x4c2deb+'TYPE',''+Um[_0x3839d9]),_0x394517['set']('LIGHT'+_0x4c2deb+'SHADOWTYPE',''+_0x3e8066['name']),_0x394517['set']('LIGHT'+_0x4c2deb+'SHAPE',''+JT[_0x2c4f63]),_0x394517['set']('LIGHT'+_0x4c2deb+'FALLOFF',''+ew[_0x3b6107['_falloffMo'+'de']]),_0x3b6107['affectSpec'+'ularity']&&_0x394517['set']('LIGHT'+_0x4c2deb+('AFFECT_SPE'+'CULARITY'),!(-0x1a50+-0xf5a+0x29aa)),_0x3b6107['_cookie']&&(_0x3839d9===Ze&&!_0x3b6107['_cookie']['_cubemap']||_0x3839d9===Ke&&_0x3b6107['_cookie']['_cubemap'])&&(_0x394517['set']('LIGHT'+_0x4c2deb+'COOKIE',!(0xbaf*0x1+-0x1*-0xdcd+-0x197c)),_0x394517['set']('{LIGHT'+_0x4c2deb+('COOKIE_CHA'+'NNEL}'),_0x3b6107['_cookieCha'+'nnel']),_0x3839d9===Ze&&(_0x3b6107['_cookieTra'+'nsform']&&_0x394517['set']('LIGHT'+_0x4c2deb+('COOKIE_TRA'+'NSFORM'),!(0x760*-0x4+0x17ff+0x581)),_0x3b6107['_cookieFal'+'loff']&&_0x394517['set']('LIGHT'+_0x4c2deb+('COOKIE_FAL'+'LOFF'),!(-0x161*-0xd+-0x1b55*-0x1+0x1*-0x2d42)))),_0x4ed6b0&&(_0x394517['set']('LIGHT'+_0x4c2deb+'CASTSHADOW',!(0x11*0x191+0x5*-0x217+-0x1*0x102e)),_0x3e8066['pcf']&&_0x394517['set']('LIGHT'+_0x4c2deb+'SHADOW_PCF',!(-0x9*-0x2d5+0xef*-0x16+-0x4f3)),_0x3b6107['_normalOff'+'setBias']&&!_0x3b6107['_isVsm']&&_0x394517['set']('LIGHT'+_0x4c2deb+('_SHADOW_SA'+'MPLE_NORMA'+'L_OFFSET'),!(-0x14*0x3b+-0x6f*-0x27+0x1*-0xc4d)),_0x3839d9===ve&&(_0x394517['set']('LIGHT'+_0x4c2deb+('_SHADOW_SA'+'MPLE_ORTHO'),!(0x2130+-0x250d+0x2b*0x17)),_0x3b6107['cascadeBle'+'nd']>0x1*0x389+-0x16c*0x13+0x177b&&_0x394517['set']('LIGHT'+_0x4c2deb+('_SHADOW_CA'+'SCADE_BLEN'+'D'),!(-0x2670+0x253c+0x134)),_0x3b6107['numCascade'+'s']>-0x1*-0x1d9f+-0xc3a+-0x1164&&_0x394517['set']('LIGHT'+_0x4c2deb+('_SHADOW_CA'+'SCADES'),!(-0x6*0x79+-0x13ef+0x16c5))),(_0x3e8066['pcf']||_0x3e8066['pcss']||this['device']['isWebGPU'])&&_0x394517['set']('LIGHT'+_0x4c2deb+('_SHADOW_SA'+'MPLE_SOURC'+'E_ZBUFFER'),!(-0x165a*-0x1+-0x76b*0x3+-0x19)),_0x3839d9===Ke&&_0x394517['set']('LIGHT'+_0x4c2deb+('_SHADOW_SA'+'MPLE_POINT'),!(-0x3b*0x11+0x71b+-0x330))),_0x4ed6b0&&(_0x394517['set']('SHADOW_KIN'+'D_'+_0x3e8066['kind'],!(-0x1941+-0x598*0x5+-0x221*-0x19)),_0x3839d9===ve&&_0x394517['set']('SHADOW_DIR'+'ECTIONAL',!(-0x3*0xb1b+-0x18db+0x3a2c)));}}['prepareFor'+'wardPass'](_0xc2a18d){const {options:_0x16743a}=this,_0x307ee3=_0x16743a['clusteredL'+'ightingEna'+'bled']&&_0x16743a['clusteredL'+'ightingAre'+'aLightsEna'+'bled']||_0x16743a['lights']['some'](_0x14a3ed=>_0x14a3ed['_shape']&&_0x14a3ed['_shape']!==js),_0x290d96=!_0x16743a['lightMapEn'+'abled']||_0x16743a['lightMapWi'+'thoutAmbie'+'nt'],_0x2ffccb=this['needsNorma'+'l']&&(_0x16743a['useNormals']||_0x16743a['useClearCo'+'atNormals']||_0x16743a['enableGGXS'+'pecular']&&!_0x16743a['useHeights']);_0x16743a['useSpecula'+'r']&&(this['fDefineSet'](!(0x3*0xb11+-0x7*-0x251+-0x316a),'LIT_SPECUL'+'AR'),this['fDefineSet'](this['reflection'+'s'],'LIT_REFLEC'+'TIONS'),this['fDefineSet'](_0x16743a['useClearCo'+'at'],'LIT_CLEARC'+'OAT'),this['fDefineSet'](_0x16743a['fresnelMod'+'el']>-0xb23+-0xe95+0x4*0x66e,'LIT_SPECUL'+'AR_FRESNEL'),this['fDefineSet'](_0x16743a['useSheen'],'LIT_SHEEN'),this['fDefineSet'](_0x16743a['useIridesc'+'ence'],'LIT_IRIDES'+'CENCE')),this['fDefineSet'](this['lighting']&&_0x16743a['useSpecula'+'r']||this['reflection'+'s'],'LIT_SPECUL'+'AR_OR_REFL'+'ECTION'),this['fDefineSet'](this['needsScene'+'Color'],'LIT_SCENE_'+'COLOR'),this['fDefineSet'](this['needsScree'+'nSize'],'LIT_SCREEN'+'_SIZE'),this['fDefineSet'](this['needsTrans'+'forms'],'LIT_TRANSF'+'ORMS'),this['fDefineSet'](this['needsNorma'+'l'],'LIT_NEEDS_'+'NORMAL'),this['fDefineSet'](this['lighting'],'LIT_LIGHTI'+'NG'),this['fDefineSet'](_0x16743a['useMetalne'+'ss'],'LIT_METALN'+'ESS'),this['fDefineSet'](_0x16743a['enableGGXS'+'pecular'],'LIT_GGX_SP'+'ECULAR'),this['fDefineSet'](_0x16743a['useSpecula'+'rityFactor'],'LIT_SPECUL'+'ARITY_FACT'+'OR'),this['fDefineSet'](_0x16743a['useCubeMap'+'Rotation'],'CUBEMAP_RO'+'TATION'),this['fDefineSet'](_0x16743a['occludeSpe'+'cularFloat'],'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT'),this['fDefineSet'](_0x16743a['separateAm'+'bient'],'LIT_SEPARA'+'TE_AMBIENT'),this['fDefineSet'](_0x16743a['twoSidedLi'+'ghting'],'LIT_TWO_SI'+'DED_LIGHTI'+'NG'),this['fDefineSet'](_0x16743a['lightMapEn'+'abled'],'LIT_LIGHTM'+'AP'),this['fDefineSet'](_0x16743a['dirLightMa'+'pEnabled'],'LIT_DIR_LI'+'GHTMAP'),this['fDefineSet'](_0x16743a['skyboxInte'+'nsity']>0x6e3+0x1*-0x1655+0xf72,'LIT_SKYBOX'+'_INTENSITY'),this['fDefineSet'](_0x16743a['clusteredL'+'ightingSha'+'dowsEnable'+'d'],'LIT_CLUSTE'+'RED_SHADOW'+'S'),this['fDefineSet'](_0x16743a['clusteredL'+'ightingAre'+'aLightsEna'+'bled'],'LIT_CLUSTE'+'RED_AREA_L'+'IGHTS'),this['fDefineSet'](_0x2ffccb,'LIT_TBN'),this['fDefineSet'](_0x290d96,'LIT_ADD_AM'+'BIENT'),this['fDefineSet'](_0x16743a['hasTangent'+'s'],'LIT_TANGEN'+'TS'),this['fDefineSet'](_0x16743a['useNormals'],'LIT_USE_NO'+'RMALS'),this['fDefineSet'](_0x16743a['useClearCo'+'atNormals'],'LIT_USE_CL'+'EARCOAT_NO'+'RMALS'),this['fDefineSet'](_0x16743a['useRefract'+'ion'],'LIT_REFRAC'+'TION'),this['fDefineSet'](_0x16743a['useDynamic'+'Refraction'],'LIT_DYNAMI'+'C_REFRACTI'+'ON'),this['fDefineSet'](_0x16743a['dispersion'],'LIT_DISPER'+'SION'),this['fDefineSet'](_0x16743a['useHeights'],'LIT_HEIGHT'+'S'),this['fDefineSet'](_0x16743a['opacityFad'+'esSpecular'],'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR'),this['fDefineSet'](_0x16743a['alphaToCov'+'erage'],'LIT_ALPHA_'+'TO_COVERAG'+'E'),this['fDefineSet'](_0x16743a['alphaTest'],'LIT_ALPHA_'+'TEST'),this['fDefineSet'](_0x16743a['useMsdf'],'LIT_MSDF'),this['fDefineSet'](_0x16743a['ssao'],'LIT_SSAO'),this['fDefineSet'](_0x16743a['useAo'],'LIT_AO'),this['fDefineSet'](_0x16743a['occludeDir'+'ect'],'LIT_OCCLUD'+'E_DIRECT'),this['fDefineSet'](_0x16743a['msdfTextAt'+'tribute'],'LIT_MSDF_T'+'EXT_ATTRIB'+'UTE'),this['fDefineSet'](_0x16743a['diffuseMap'+'Enabled'],'LIT_DIFFUS'+'E_MAP'),this['fDefineSet'](_0x16743a['shadowCatc'+'her'],'LIT_SHADOW'+'_CATCHER'),this['fDefineSet'](!(-0xa02+0xaf5*0x2+0x5f4*-0x2),'LIT_FRESNE'+'L_MODEL',ZT[_0x16743a['fresnelMod'+'el']]),this['fDefineSet'](!(-0x3ff*0x5+0x1*-0x30e+0x1709*0x1),'LIT_NONE_S'+'LICE_MODE',dw[_0x16743a['nineSliced'+'Mode']]),this['fDefineSet'](!(0x2155+0x285+-0x23da),'LIT_BLEND_'+'TYPE',uy[_0x16743a['blendType']]),this['fDefineSet'](!(-0x507+-0x2007+0x250e),'LIT_CUBEMA'+'P_PROJECTI'+'ON',nw[_0x16743a['cubeMapPro'+'jection']]),this['fDefineSet'](!(0x2267*0x1+0x407*0x4+-0x1*0x3283),'LIT_OCCLUD'+'E_SPECULAR',lw[_0x16743a['occludeSpe'+'cular']]),this['fDefineSet'](!(0x403*-0x3+0xfef+-0x3e6),'LIT_REFLEC'+'TION_SOURC'+'E',cw[_0x16743a['reflection'+'Source']]),this['fDefineSet'](!(0xf4+-0x226c+0xc*0x2ca),'LIT_AMBIEN'+'T_SOURCE',hw[_0x16743a['ambientSou'+'rce']]),this['fDefineSet'](!(0x1eb5+0x440+-0x22f5),'{lightingU'+'v}',_0xc2a18d??''),this['fDefineSet'](!(0x1347+-0x25c0+-0x1279*-0x1),'{reflectio'+'nDecode}',Sr['decodeFunc'](_0x16743a['reflection'+'Encoding'])),this['fDefineSet'](!(-0x10d2+0x1e*0x27+0xc40),'{reflectio'+'nCubemapDe'+'code}',Sr['decodeFunc'](_0x16743a['reflection'+'CubemapEnc'+'oding'])),this['fDefineSet'](!(-0x1dc*-0xb+0x1d28*0x1+-0x319c),'{ambientDe'+'code}',Sr['decodeFunc'](_0x16743a['ambientEnc'+'oding'])),this['_setupLigh'+'tingDefine'+'s'](_0x307ee3,_0x16743a['clusteredL'+'ightingEna'+'bled']);}['prepareSha'+'dowPass'](){const {options:_0x51cf16}=this,_0x5527a2=this['shaderPass'+'Info']['lightType'],_0x504658=this['shaderPass'+'Info']['shadowType'],_0xbcf91b=Xi['get'](_0x504658);w['assert'](_0xbcf91b);const _0x475a9a=_0x5527a2===ve||!_0xbcf91b['vsm']&&_0x5527a2===Ze;this['fDefineSet'](_0x475a9a,'PERSPECTIV'+'E_DEPTH'),this['fDefineSet'](!(0x815*0x3+0x58*0x61+-0x1*0x3997),'LIGHT_TYPE',''+Um[_0x5527a2]),this['fDefineSet'](!(-0x2a2*-0x2+-0x2ef+-0x255),'SHADOW_TYP'+'E',''+_0xbcf91b['name']),this['fDefineSet'](_0x51cf16['alphaTest'],'LIT_ALPHA_'+'TEST');}['generateFr'+'agmentShad'+'er'](_0x1fa9bf,_0xed8c3c,_0x26de1e){const _0x23a15d=this['options'];this['includes']['set']('frontendDe'+'clPS',_0x1fa9bf??''),this['includes']['set']('frontendCo'+'dePS',_0xed8c3c??''),_0x23a15d['pass']===Wn||_0x23a15d['pass']===vl||(this['shadowPass']?this['prepareSha'+'dowPass']():this['prepareFor'+'wardPass'](_0x26de1e)),this['fshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}}class Vy{constructor(){h(this,'hasTangent'+'s',!(-0xd8d+-0x1d5a+0x2ae8)),h(this,'shaderChun'+'ks',null),h(this,'pass',-0x51b*-0x6+0xb0e*0x1+0xb8*-0x3a),h(this,'alphaTest',!(-0xa*0xa5+0x2433+-0x1dc0)),h(this,'blendType',Cs),h(this,'separateAm'+'bient',!(-0x14b2+-0x1083+0x2536)),h(this,'screenSpac'+'e',!(0xbca*0x1+-0x35*-0x6d+-0x225a)),h(this,'skin',!(-0x891+0x1288+-0x9f6)),h(this,'batch',!(0x1*0x823+-0xece+-0x2*-0x356)),h(this,'useInstanc'+'ing',!(-0x20b2+0x102b*-0x2+-0x4109*-0x1)),h(this,'useMorphPo'+'sition',!(-0x218c+0x1010+0x117d)),h(this,'useMorphNo'+'rmal',!(-0x2*-0xd0f+0x1*-0x15c1+0xba*-0x6)),h(this,'useMorphTe'+'xtureBased'+'Int',!(0x11a1*-0x1+-0x1ca1+0x38f*0xd)),h(this,'nineSliced'+'Mode',-0x2*0x1327+0x2325*0x1+0x329*0x1),h(this,'clusteredL'+'ightingEna'+'bled',!(0x9b8*-0x3+-0x224f*0x1+0x3f77)),h(this,'clusteredL'+'ightingCoo'+'kiesEnable'+'d',!(-0x2652+-0x12e1+0x416*0xe)),h(this,'clusteredL'+'ightingSha'+'dowsEnable'+'d',!(0x111a+0x3*-0xb9b+-0xa8*-0x1b)),h(this,'clusteredL'+'ightingSha'+'dowType',0xbb1*0x3+0x2336+0x4649*-0x1),h(this,'clusteredL'+'ightingAre'+'aLightsEna'+'bled',!(0x1839+-0x1bd+0x47f*-0x5)),h(this,'vertexColo'+'rs',!(-0x3*0x45e+0x204a*-0x1+0x2d65)),h(this,'lightMapEn'+'abled',!(-0x123e+0x9f*0xb+0x6*0x1e7)),h(this,'dirLightMa'+'pEnabled',!(-0x1f10+-0xf1*0x19+0x369a)),h(this,'useHeights',!(0x1*-0x1415+0x21a1+-0xd8b*0x1)),h(this,'useNormals',!(0x3c3+-0x61f*-0x5+-0x225d)),h(this,'useClearCo'+'atNormals',!(0x2463+0x97*0xb+0x19*-0x1b7)),h(this,'useAo',!(-0x1e27+-0x1510*0x1+-0x8*-0x667)),h(this,'diffuseMap'+'Enabled',!(0x17*0x15a+-0x1*-0xc32+0x4cf*-0x9)),h(this,'pixelSnap',!(0x4*0x4bf+-0x24af+0x11b4)),h(this,'ambientSH',!(-0x24ad+0xb04+0x19aa)),h(this,'ssao',!(0x494+-0xa7*-0x2b+-0x105*0x20)),h(this,'twoSidedLi'+'ghting',!(-0x1a49*0x1+0x131f*0x1+0x1*0x72b)),h(this,'occludeDir'+'ect',!(-0x1044+0x72*-0x12+0x1849)),h(this,'occludeSpe'+'cular',-0x91c+-0x67a*-0x1+-0x1*-0x2a2),h(this,'occludeSpe'+'cularFloat',!(-0x6a6*0x1+0xe99+-0x7f2)),h(this,'useMsdf',!(-0x9d0+0x48b+0x546)),h(this,'msdfTextAt'+'tribute',!(-0xac2+0x1b9b+0x7*-0x268)),h(this,'alphaToCov'+'erage',!(-0x1297*0x1+-0x685+0x1*0x191d)),h(this,'opacityFad'+'esSpecular',!(0xe93*-0x2+0x7*-0x565+0x42ea)),h(this,'opacityDit'+'her',ua),h(this,'opacitySha'+'dowDither',ua),h(this,'cubeMapPro'+'jection',0x2328+0x1dd6+-0x40fe),h(this,'useSpecula'+'r',!(-0xb27+-0x4*-0x7cd+-0x140c*0x1)),h(this,'useSpecula'+'rityFactor',!(-0x427+0x582+-0x15a)),h(this,'enableGGXS'+'pecular',!(-0x1810+0x206+0x160b)),h(this,'fresnelMod'+'el',0x15*-0x40+0x35f*0x5+0xb9b*-0x1),h(this,'useRefract'+'ion',!(-0x24a5+-0xb33+0x2fd9)),h(this,'useClearCo'+'at',!(-0x11f4+-0xc5*0x1+0x12ba)),h(this,'useSheen',!(-0x1b7f*-0x1+-0x7*0xff+-0x11*0x135)),h(this,'useIridesc'+'ence',!(-0x19ca+0x2a4+0x1727)),h(this,'useMetalne'+'ss',!(-0x402+-0xfaf+0x13b2)),h(this,'useDynamic'+'Refraction',!(-0x144*-0x8+-0x5*0x15+-0x9b6)),h(this,'dispersion',!(-0xc77+0x22*-0x10c+0x301*0x10)),h(this,'fog',Hn),h(this,'gamma',yl),h(this,'toneMap',-(-0x21a0*-0x1+0x4dd*-0x5+-0x94e)),h(this,'reflection'+'Source',_r),h(this,'reflection'+'Encoding',null),h(this,'reflection'+'CubemapEnc'+'oding',null),h(this,'ambientSou'+'rce','constant'),h(this,'ambientEnc'+'oding',null),h(this,'skyboxInte'+'nsity',-0x96*-0x31+0x16b7+-0x336c),h(this,'useCubeMap'+'Rotation',!(0xb7+-0x65*0x2b+0x1041)),h(this,'lightMapWi'+'thoutAmbie'+'nt',!(0x3*0x76e+-0x1b7*0xd+0x1*0x2)),h(this,'lights',[]),h(this,'noShadow',!(0x11e3*-0x1+-0x220*0xf+0xc71*0x4)),h(this,'lightMaskD'+'ynamic',0x2267*0x1+-0x489+0xeef*-0x2),h(this,'userAttrib'+'utes',{}),h(this,'linearDept'+'h',!(0x2444+-0x5b2+-0x1*0x1e91)),h(this,'shadowCatc'+'her',!(0x260+-0x1d16+0x1ab7));}}class Qo{constructor(){h(this,'defines',new Map()),h(this,'forceUv1',!(0x1380*-0x1+0x1f0f+-0x6*0x1ed)),h(this,'specularTi'+'nt',!(0x1*0x1af3+-0x1*0x8cd+-0x1225)),h(this,'metalnessT'+'int',!(0x1a89+-0x204b+0x5c3*0x1)),h(this,'glossTint',!(0x13fe+0x21f+-0x161c)),h(this,'emissiveEn'+'coding','linear'),h(this,'lightMapEn'+'coding','linear'),h(this,'packedNorm'+'al',!(-0x6*-0x300+0x1d*-0xbb+0x198*0x2)),h(this,'normalDeta'+'ilPackedNo'+'rmal',!(-0x3*-0xc0f+-0x1d24+-0xb4*0xa)),h(this,'clearCoatP'+'ackedNorma'+'l',!(0x28*0xd1+0x16a9*0x1+-0x3750)),h(this,'glossInver'+'t',!(0x12e3*-0x1+-0x225a*0x1+-0x2f*-0x122)),h(this,'sheenGloss'+'Invert',!(-0x2663+0x52e*0x1+0x2136)),h(this,'clearCoatG'+'lossInvert',!(0x1a18+-0x1*-0x96d+-0x2384*0x1)),h(this,'useAO',!(-0x43e+-0x4eb*0x3+0x1300)),h(this,'litOptions',new Vy());}get['pass'](){return this['litOptions']['pass'];}}const Gy={'generateKey'(_0x56734d){return'lit'+Object['keys'](_0x56734d)['sort']()['map'](_0x5d9ad3=>{var _0x124123;return _0x5d9ad3==='shaderChun'+'ks'?((_0x124123=_0x56734d['shaderChun'+'ks'])==null?void(0x1*-0xf53+-0x23ed+-0x28*-0x148):_0x124123['key'])??'':_0x5d9ad3==='lights'?Gy['generateLi'+'ghtsKey'](_0x56734d):_0x5d9ad3+_0x56734d[_0x5d9ad3];})['join']('\x0a');},'generateLightsKey'(_0x452399){return'lights:'+_0x452399['lights']['map'](_0x899dcd=>!_0x452399['clusteredL'+'ightingEna'+'bled']||_0x899dcd['_type']===ve?_0x899dcd['key']+',':'')['join']('');}},Sn=[],Dd=_0x4544fa=>Object['keys'](_0x4544fa)['filter'](_0x2af19a=>_0x2af19a!=='litOptions')['sort']();class DE extends pa{constructor(){super(...arguments),h(this,'optionsCon'+'text',new Qo()),h(this,'optionsCon'+'textMin',new Qo());}['generateKe'+'y'](_0x5e1ea0){let _0x383cb0;return _0x5e1ea0===this['optionsCon'+'textMin']?(this['propsMin']||(this['propsMin']=Dd(_0x5e1ea0)),_0x383cb0=this['propsMin']):_0x5e1ea0===this['optionsCon'+'text']?(this['props']||(this['props']=Dd(_0x5e1ea0)),_0x383cb0=this['props']):_0x383cb0=Dd(_0x5e1ea0),'standard:\x0a'+pa['definesHas'+'h'](_0x5e1ea0['defines'])+'\x0a'+_0x383cb0['map'](_0x2a3bc8=>_0x2a3bc8+_0x5e1ea0[_0x2a3bc8])['join']('\x0a')+Gy['generateKe'+'y'](_0x5e1ea0['litOptions']);}['_getUvSour'+'ceExpressi'+'on'](_0x4b168e,_0x625cf,_0x4d3c66){const _0xe8d80c=_0x4d3c66[_0x4b168e],_0x5b2f91=_0x4d3c66[_0x625cf],_0x3ae597=_0x4d3c66['litOptions']['pass']===xa;let _0x170bf3;return _0x3ae597&&_0x4d3c66['litOptions']['nineSliced'+'Mode']===Pt||_0x3ae597&&_0x4d3c66['litOptions']['nineSliced'+'Mode']===Mt?_0x170bf3='nineSliced'+'Uv':(_0xe8d80c===0x7*-0xbc+-0xc9*-0x1c+-0x10d8?_0x170bf3='vUv'+_0x5b2f91:_0x170bf3='vUV'+_0x5b2f91+'_'+_0xe8d80c,_0x4d3c66['heightMap']&&_0x4b168e!=='heightMapT'+'ransform'&&(_0x170bf3+='\x20+\x20dUvOffs'+'et')),_0x170bf3;}['_validateM'+'apChunk'](_0x1022dd,_0x58e38a,_0x3d981d){w['call'](()=>{const _0x5a1caf=_0x3d981d['get'](_0x58e38a)['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1'),_0x5d9e62=[],_0x205518=(_0x4c0f20,_0x164964)=>{_0x5a1caf['includes'](_0x4c0f20)&&_0x5d9e62['push']('\x20\x20'+_0x4c0f20+'\x20->\x20'+_0x164964);};[['$UV','{STD_'+_0x1022dd+('_TEXTURE_U'+'V}')],['$CH','{STD_'+_0x1022dd+('_TEXTURE_C'+'HANNEL}')],['$SAMPLER','{STD_'+_0x1022dd+('_TEXTURE_N'+'AME}')],['$DECODE','{STD_'+_0x1022dd+('_TEXTURE_D'+'ECODE}')],['$VC','{STD_'+_0x1022dd+('_VERTEX_CH'+'ANNEL}')],['$DETAILMOD'+'E','{STD_'+_0x1022dd+('_DETAILMOD'+'E}')],['unpackNorm'+'al(','{STD_'+_0x1022dd+('_TEXTURE_D'+'ECODE}(')]]['forEach'](([_0x5900ab,_0x14f7b8])=>_0x205518(_0x5900ab,_0x14f7b8)),[['MAPFLOAT','STD_'+_0x1022dd+'_CONSTANT'],['MAPCOLOR','STD_'+_0x1022dd+'_CONSTANT'],['MAPVERTEX','STD_'+_0x1022dd+'_VERTEX'],['MAPTEXTURE','STD_'+_0x1022dd+'_TEXTURE'],['MAPINVERT','STD_'+_0x1022dd+'_INVERT']]['forEach'](([_0x31db64,_0x27dc69])=>_0x205518(_0x31db64,_0x27dc69)),_0x5a1caf['includes']('$texture2D'+'SAMPLE')&&_0x205518('$texture2D'+'SAMPLE','(Macro\x20no\x20'+'longer\x20sup'+'ported\x20-\x20r'+'emove/refa'+'ctor)'),_0x5d9e62['length']>-0xcc7*-0x1+-0x571*-0x6+0x1*-0x2d6d&&w['errorOnce']('Shader\x20chu'+'nk\x20'+_0x58e38a+('\x20is\x20in\x20no\x20'+'longer\x20com'+'patible\x20fo'+'rmat.\x20Plea'+'se\x20make\x20th'+'ese\x20replac'+'ements\x20to\x20'+'bring\x20it\x20t'+'o\x20the\x20curr'+'ent\x20versio'+'n:\x0a')+_0x5d9e62['join']('\x0a'),{'code':_0x5a1caf});});}['_addMapDef'+'ines'](_0x49e791,_0x13835d,_0x21d8ea,_0x39c42f,_0x5664ee,_0x2c3aaa,_0x53966e=null){const _0x4191e3=_0x13835d+'Map',_0x23974c=_0x13835d['toUpperCas'+'e'](),_0x2c5f55=_0x4191e3+'Uv',_0x60f2d7=_0x4191e3+'Identifier',_0xd99d8b=_0x4191e3+'Transform',_0x4647cd=_0x4191e3+'Channel',_0x2aa312=_0x13835d+('VertexColo'+'rChannel'),_0x5aa75e=_0x13835d+'Tint',_0x304277=_0x13835d+('VertexColo'+'r'),_0x8e60fa=_0x13835d+'Mode',_0x491bfd=_0x13835d+'Invert',_0x2aea27=_0x39c42f[_0x5aa75e],_0x266c69=_0x39c42f[_0x304277],_0xed6f56=_0x39c42f[_0x4191e3],_0x371be6=_0x39c42f[_0x60f2d7],_0x283da6=_0x39c42f[_0x8e60fa],_0x5b3ce8=_0x5664ee['get'](_0x21d8ea);if(w['assert'](_0x5b3ce8,'Shader\x20chu'+'nk\x20'+_0x21d8ea+('\x20not\x20found'+'.')),w['call'](()=>{_0x5b3ce8&&this['_validateM'+'apChunk'](_0x23974c,_0x21d8ea,_0x5664ee);}),_0xed6f56){_0x49e791['set']('STD_'+_0x23974c+'_TEXTURE','');const _0x59759f=this['_getUvSour'+'ceExpressi'+'on'](_0xd99d8b,_0x2c5f55,_0x39c42f);_0x49e791['set']('{STD_'+_0x23974c+('_TEXTURE_U'+'V}'),_0x59759f),_0x49e791['set']('{STD_'+_0x23974c+('_TEXTURE_C'+'HANNEL}'),_0x39c42f[_0x4647cd]);const _0x4708cd='{STD_'+_0x23974c+('_TEXTURE_N'+'AME}');if(_0x5b3ce8['includes'](_0x4708cd)){let _0x3fd7f6='texture_'+_0x4191e3;const _0x3b38eb=_0x2c3aaa[_0x371be6];_0x3b38eb?_0x3fd7f6=_0x3b38eb:(_0x2c3aaa[_0x371be6]=_0x3fd7f6,_0x49e791['set']('STD_'+_0x23974c+('_TEXTURE_A'+'LLOCATE'),'')),_0x49e791['set'](_0x4708cd,_0x3fd7f6);}if(_0x53966e){const _0x5539dc=_0x39c42f[_0x4647cd]==='aaa'?'passThroug'+'h':Sr['decodeFunc'](_0x53966e);_0x49e791['set']('{STD_'+_0x23974c+('_TEXTURE_D'+'ECODE}'),_0x5539dc);}}_0x266c69&&(_0x49e791['set']('STD_'+_0x23974c+'_VERTEX',''),_0x49e791['set']('{STD_'+_0x23974c+('_VERTEX_CH'+'ANNEL}'),_0x39c42f[_0x2aa312])),_0x283da6&&_0x49e791['set']('{STD_'+_0x23974c+('_DETAILMOD'+'E}'),_0x283da6),_0x2aea27&&_0x49e791['set']('STD_'+_0x23974c+'_CONSTANT',''),_0x39c42f[_0x491bfd]&&_0x49e791['set']('STD_'+_0x23974c+'_INVERT','');}['_correctCh'+'annel'](_0x458646,_0xe1552f,_0xc376be){if(_0xc376be[_0x458646]>-0x506+0x1583+-0x9*0x1d5){if(_0xc376be[_0x458646]<_0xe1552f['length'])return _0xe1552f['substring'](-0x1*-0x232+0x1*0x17b2+-0x19e4,_0xc376be[_0x458646]);if(_0xc376be[_0x458646]>_0xe1552f['length']){let _0x4c222b=_0xe1552f;const _0x302236=_0x4c222b['charAt'](_0x4c222b['length']-(0x326+-0x2246+-0x1*-0x1f21)),_0xf9ef7b=_0xc376be[_0x458646]-_0x4c222b['length'];for(let _0x535f58=0x48b*0x6+0x3*-0xc11+0x1*0x8f1;_0x535f58<_0xf9ef7b;_0x535f58++)_0x4c222b+=_0x302236;return _0x4c222b;}return _0xe1552f;}}['createVert'+'exShader'](_0x2b3586,_0x524347){const _0x1e6c9c=[],_0x136f86=[],_0x58d64c=[];for(const _0x454f1b in Sn){const _0x181cda=_0x454f1b+'Map';if(_0x524347[_0x454f1b+('VertexColo'+'r')]){const _0x322efc=_0x454f1b+('VertexColo'+'rChannel');_0x524347[_0x322efc]=this['_correctCh'+'annel'](_0x454f1b,_0x524347[_0x322efc],Sn);}if(_0x524347[_0x181cda]){const _0x2dddb9=_0x181cda+'Channel',_0x2f78eb=_0x181cda+'Transform',_0x233ec0=_0x181cda+'Uv';_0x524347[_0x233ec0]=Math['min'](_0x524347[_0x233ec0],-0x13a*0x5+0x15ac+0x29*-0x61),_0x524347[_0x2dddb9]=this['_correctCh'+'annel'](_0x454f1b,_0x524347[_0x2dddb9],Sn);const _0x50d45f=_0x524347[_0x233ec0];_0x1e6c9c[_0x50d45f]=!(-0x1e55+-0x3ec+0x2241),_0x136f86[_0x50d45f]=_0x136f86[_0x50d45f]||_0x524347[_0x181cda]&&!_0x524347[_0x2f78eb],_0x524347[_0x2f78eb]&&_0x58d64c['push']({'name':_0x454f1b,'id':_0x524347[_0x2f78eb],'uv':_0x524347[_0x233ec0]});}}_0x524347['forceUv1']&&(_0x1e6c9c[-0xde0+-0x16b1+0x2*0x1249]=!(-0x1eb7+-0x5e0+-0x13*-0x1ed),_0x136f86[0x1*-0xc05+-0xa97*-0x3+-0x13bf]=_0x136f86[-0x2a2*0x4+0x23df+-0x1956]!==void(0x9*-0x3+-0x1a5*-0x2+-0x1*0x32f)?_0x136f86[0x3*-0x1c6+-0xb43+0x1096]:!(-0x1*0x1908+0x1*-0x1115+0x2a1d)),_0x2b3586['generateVe'+'rtexShader'](_0x1e6c9c,_0x136f86,_0x58d64c);}['prepareFra'+'gmentDefin'+'es'](_0x166390,_0x5e04b7,_0x4106cf){const _0x4b22ae=(_0x57e3f5,_0x2fb556,_0xe2051b='')=>{_0x57e3f5&&_0x5e04b7['set'](_0x2fb556,_0xe2051b);};_0x4b22ae(_0x166390['lightMap'],'STD_LIGHTM'+'AP',''),_0x4b22ae(_0x166390['lightVerte'+'xColor'],'STD_LIGHT_'+'VERTEX_COL'+'OR',''),_0x4b22ae(_0x166390['dirLightMa'+'p']&&_0x166390['litOptions']['useSpecula'+'r'],'STD_LIGHTM'+'AP_DIR',''),_0x4b22ae(_0x166390['heightMap'],'STD_HEIGHT'+'_MAP',''),_0x4b22ae(_0x166390['useSpecula'+'rColor'],'STD_SPECUL'+'AR_COLOR',''),_0x4b22ae(_0x166390['aoMap']||_0x166390['aoVertexCo'+'lor']||_0x166390['useAO'],'STD_AO',''),_0x4b22ae(!(0x25f2+0xd5a+-0x334c),'STD_OPACIT'+'Y_DITHER',xw[_0x4106cf['isForward']?_0x166390['litOptions']['opacityDit'+'her']:_0x166390['litOptions']['opacitySha'+'dowDither']]);}['createShad'+'erDefiniti'+'on'](_0x4df512,_0xad4ad8){const _0xd4f6f9=Si['get'](_0x4df512)['getByIndex'](_0xad4ad8['litOptions']['pass']),_0xaf1bb2=_0xd4f6f9['isForward'],_0x33b334=new ME(_0x4df512,_0xad4ad8['litOptions']);this['createVert'+'exShader'](_0x33b334,_0xad4ad8);const _0xac67e2={};_0xad4ad8['litOptions']['fresnelMod'+'el']=_0xad4ad8['litOptions']['fresnelMod'+'el']===0xdd3+-0x1*0x1a5c+0x1*0xc89?Tp:_0xad4ad8['litOptions']['fresnelMod'+'el'];const _0x54475f=_0x33b334['fDefines'];this['prepareFra'+'gmentDefin'+'es'](_0xad4ad8,_0x54475f,_0xd4f6f9);let _0x423fb0='';if(_0xaf1bb2){if(_0xad4ad8['heightMap']&&this['_addMapDef'+'ines'](_0x54475f,'height','parallaxPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2),(_0xad4ad8['litOptions']['blendType']!==Cs||_0xad4ad8['litOptions']['alphaTest']||_0xad4ad8['litOptions']['alphaToCov'+'erage']||_0xad4ad8['litOptions']['opacityDit'+'her']!==ua)&&this['_addMapDef'+'ines'](_0x54475f,'opacity','opacityPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2),_0x33b334['needsNorma'+'l']){if((_0xad4ad8['normalMap']||_0xad4ad8['clearCoatN'+'ormalMap'])&&!_0xad4ad8['litOptions']['hasTangent'+'s']){const _0x299d7c=_0xad4ad8['normalMap']?'normalMap':'clearCoatN'+'ormalMap';_0x423fb0=this['_getUvSour'+'ceExpressi'+'on'](_0x299d7c+'Transform',_0x299d7c+'Uv',_0xad4ad8);}this['_addMapDef'+'ines'](_0x54475f,'normalDeta'+'il','normalMapP'+'S',_0xad4ad8,_0x33b334['chunks'],_0xac67e2,_0xad4ad8['normalDeta'+'ilPackedNo'+'rmal']?'xy':'xyz'),this['_addMapDef'+'ines'](_0x54475f,'normal','normalMapP'+'S',_0xad4ad8,_0x33b334['chunks'],_0xac67e2,_0xad4ad8['packedNorm'+'al']?'xy':'xyz');}_0xad4ad8['diffuseDet'+'ail']&&this['_addMapDef'+'ines'](_0x54475f,'diffuseDet'+'ail','diffusePS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2,_0xad4ad8['diffuseDet'+'ailEncodin'+'g']),this['_addMapDef'+'ines'](_0x54475f,'diffuse','diffusePS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2,_0xad4ad8['diffuseEnc'+'oding']),_0xad4ad8['litOptions']['useRefract'+'ion']&&(this['_addMapDef'+'ines'](_0x54475f,'refraction','transmissi'+'onPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2),this['_addMapDef'+'ines'](_0x54475f,'thickness','thicknessP'+'S',_0xad4ad8,_0x33b334['chunks'],_0xac67e2)),_0xad4ad8['litOptions']['useIridesc'+'ence']&&(this['_addMapDef'+'ines'](_0x54475f,'iridescenc'+'e','iridescenc'+'ePS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2),this['_addMapDef'+'ines'](_0x54475f,'iridescenc'+'eThickness','iridescenc'+'eThickness'+'PS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2)),(_0x33b334['lighting']&&_0xad4ad8['litOptions']['useSpecula'+'r']||_0x33b334['reflection'+'s'])&&(_0xad4ad8['litOptions']['useSheen']&&(this['_addMapDef'+'ines'](_0x54475f,'sheen','sheenPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2,_0xad4ad8['sheenEncod'+'ing']),this['_addMapDef'+'ines'](_0x54475f,'sheenGloss','sheenGloss'+'PS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2)),_0xad4ad8['litOptions']['useMetalne'+'ss']&&(this['_addMapDef'+'ines'](_0x54475f,'metalness','metalnessP'+'S',_0xad4ad8,_0x33b334['chunks'],_0xac67e2),this['_addMapDef'+'ines'](_0x54475f,'ior','iorPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2)),_0xad4ad8['litOptions']['useSpecula'+'rityFactor']&&this['_addMapDef'+'ines'](_0x54475f,'specularit'+'yFactor','specularit'+'yFactorPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2),_0xad4ad8['useSpecula'+'rColor']&&this['_addMapDef'+'ines'](_0x54475f,'specular','specularPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2,_0xad4ad8['specularEn'+'coding']),this['_addMapDef'+'ines'](_0x54475f,'gloss','glossPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2)),_0xad4ad8['aoDetail']&&this['_addMapDef'+'ines'](_0x54475f,'aoDetail','aoPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2),(_0xad4ad8['aoMap']||_0xad4ad8['aoVertexCo'+'lor']||_0xad4ad8['useAO'])&&this['_addMapDef'+'ines'](_0x54475f,'ao','aoPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2),this['_addMapDef'+'ines'](_0x54475f,'emissive','emissivePS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2,_0xad4ad8['emissiveEn'+'coding']),_0xad4ad8['litOptions']['useClearCo'+'at']&&(this['_addMapDef'+'ines'](_0x54475f,'clearCoat','clearCoatP'+'S',_0xad4ad8,_0x33b334['chunks'],_0xac67e2),this['_addMapDef'+'ines'](_0x54475f,'clearCoatG'+'loss','clearCoatG'+'lossPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2),this['_addMapDef'+'ines'](_0x54475f,'clearCoatN'+'ormal','clearCoatN'+'ormalPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2,_0xad4ad8['clearCoatP'+'ackedNorma'+'l']?'xy':'xyz')),_0xad4ad8['litOptions']['enableGGXS'+'pecular']&&this['_addMapDef'+'ines'](_0x54475f,'anisotropy','anisotropy'+'PS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2),(_0xad4ad8['lightMap']||_0xad4ad8['lightVerte'+'xColor'])&&this['_addMapDef'+'ines'](_0x54475f,'light','lightmapPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2,_0xad4ad8['lightMapEn'+'coding']);}else{const _0x1663b8=_0xad4ad8['litOptions']['opacitySha'+'dowDither'];(_0xad4ad8['litOptions']['alphaTest']||_0x1663b8)&&this['_addMapDef'+'ines'](_0x54475f,'opacity','opacityPS',_0xad4ad8,_0x33b334['chunks'],_0xac67e2);}_0x33b334['generateFr'+'agmentShad'+'er'](_0x33b334['chunks']['get']('stdDeclara'+'tionPS'),_0x33b334['chunks']['get']('stdFrontEn'+'dPS'),_0x423fb0);const _0x1856a6=ih['merge'](_0x33b334['chunks'],_0x33b334['includes']),_0x5d4245=_0x33b334['vDefines'];_0xad4ad8['defines']['forEach']((_0xcdfab9,_0x143dcf)=>_0x5d4245['set'](_0x143dcf,_0xcdfab9)),_0xad4ad8['defines']['forEach']((_0x2df1a5,_0x31651f)=>_0x54475f['set'](_0x31651f,_0x2df1a5));const _0x25ee70=Jt['createDefi'+'nition'](_0x4df512,{'name':'StandardSh'+'ader','attributes':_0x33b334['attributes'],'shaderLanguage':_0x33b334['shaderLang'+'uage'],'vertexCode':_0x33b334['vshader'],'fragmentCode':_0x33b334['fshader'],'vertexIncludes':_0x1856a6,'fragmentIncludes':_0x1856a6,'fragmentDefines':_0x54475f,'vertexDefines':_0x5d4245});return _0x33b334['shaderPass'+'Info']['isForward']&&(_0x25ee70['tag']=NS),_0x25ee70;}}const Id=new DE(),ss=[];ss[mp]={'src':Ft,'dst':Ft,'op':z0},ss[Cs]={'src':Ft,'dst':Iu,'op':fs},ss[Zs]={'src':Ah,'dst':Ch,'op':fs,'alphaSrc':Ft},ss[Fn]={'src':Ft,'dst':Ch,'op':fs},ss[_p]={'src':Ft,'dst':Ft,'op':fs},ss[sd]={'src':Ah,'dst':Ft,'op':fs},ss[Sp]={'src':gS,'dst':U0,'op':fs},ss[yp]={'src':B0,'dst':Ft,'op':fs},ss[gp]={'src':gS,'dst':Iu,'op':fs},ss[vp]={'src':Ft,'dst':Ft,'op':V0},ss[xp]={'src':Ft,'dst':Ft,'op':G0};let IE=-0x251*-0x1+-0x2*-0xafe+-0x184d;class er{constructor(){h(this,'meshInstan'+'ces',[]),h(this,'name','Untitled'),h(this,'userId',''),h(this,'id',IE++),h(this,'variants',new Map()),h(this,'defines',new Map()),h(this,'_definesDi'+'rty',!(0x38e+-0x1da*-0xf+-0x1f53)),h(this,'parameters',{}),h(this,'alphaTest',0x102b*-0x1+-0xe*0x7+-0x108d*-0x1),h(this,'alphaToCov'+'erage',!(0xa7b+-0x1*-0x20b1+-0x2b2b)),h(this,'_blendStat'+'e',new pt()),h(this,'_depthStat'+'e',new Yt()),h(this,'cull',ca),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'_shaderChu'+'nks',null),h(this,'_oldChunks',{}),h(this,'_dirtyShad'+'er',!(-0xda8+0x1*-0x1d23+0x5*0x88f)),h(this,'_shaderVer'+'sion',-0x227b+0x2067+0x214),h(this,'_scene',null),h(this,'dirty',!(0x7*0x6d+-0x1ed9*0x1+0x1bde)),new.target===er&&w['error']('Material\x20c'+'lass\x20canno'+'t\x20be\x20insta'+'ntiated,\x20u'+'se\x20ShaderM'+'aterial\x20in'+'stead');}get['hasShaderC'+'hunks'](){return this['_shaderChu'+'nks']!=null;}get['shaderChun'+'ks'](){return this['_shaderChu'+'nks']||(this['_shaderChu'+'nks']=new Ce()),this['_shaderChu'+'nks'];}['getShaderC'+'hunks'](_0x4cf183=Fe){const _0x46287c=this['shaderChun'+'ks'];return _0x4cf183===Fe?_0x46287c['glsl']:_0x46287c['wgsl'];}set['shaderChun'+'ksVersion'](_0x576ac1){this['shaderChun'+'ks']['version']=_0x576ac1;}get['shaderChun'+'ksVersion'](){return this['shaderChun'+'ks']['version'];}set['chunks'](_0x3a022a){w['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),this['_oldChunks']=_0x3a022a;}get['chunks'](){return w['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),Object['assign'](this['_oldChunks'],Object['fromEntrie'+'s'](this['shaderChun'+'ks']['glsl'])),this['_oldChunks'];}set['depthBias'](_0x1f9d8){this['_depthStat'+'e']['depthBias']=_0x1f9d8;}get['depthBias'](){return this['_depthStat'+'e']['depthBias'];}set['slopeDepth'+'Bias'](_0x4cf345){this['_depthStat'+'e']['depthBiasS'+'lope']=_0x4cf345;}get['slopeDepth'+'Bias'](){return this['_depthStat'+'e']['depthBiasS'+'lope'];}set['redWrite'](_0x2e63b5){this['_blendStat'+'e']['redWrite']=_0x2e63b5;}get['redWrite'](){return this['_blendStat'+'e']['redWrite'];}set['greenWrite'](_0x2f3a06){this['_blendStat'+'e']['greenWrite']=_0x2f3a06;}get['greenWrite'](){return this['_blendStat'+'e']['greenWrite'];}set['blueWrite'](_0x5ef16c){this['_blendStat'+'e']['blueWrite']=_0x5ef16c;}get['blueWrite'](){return this['_blendStat'+'e']['blueWrite'];}set['alphaWrite'](_0x5c0308){this['_blendStat'+'e']['alphaWrite']=_0x5c0308;}get['alphaWrite'](){return this['_blendStat'+'e']['alphaWrite'];}get['transparen'+'t'](){return this['_blendStat'+'e']['blend'];}['_updateTra'+'nsparency'](){const _0x1e2614=this['transparen'+'t'],_0x4c3558=this['meshInstan'+'ces'];for(let _0x2f10ee=0xdf+-0x1*0x121f+0x1140;_0x2f10ee<_0x4c3558['length'];_0x2f10ee++)_0x4c3558[_0x2f10ee]['transparen'+'t']=_0x1e2614;}set['blendState'](_0x2d0b63){this['_blendStat'+'e']['copy'](_0x2d0b63),this['_updateTra'+'nsparency']();}get['blendState'](){return this['_blendStat'+'e'];}set['blendType'](_0x4dd926){const _0x3c376f=ss[_0x4dd926];w['assert'](_0x3c376f,'Unknown\x20bl'+'end\x20mode\x20'+_0x4dd926),this['_blendStat'+'e']['setColorBl'+'end'](_0x3c376f['op'],_0x3c376f['src'],_0x3c376f['dst']),this['_blendStat'+'e']['setAlphaBl'+'end'](_0x3c376f['alphaOp']??_0x3c376f['op'],_0x3c376f['alphaSrc']??_0x3c376f['src'],_0x3c376f['alphaDst']??_0x3c376f['dst']);const _0x2b9319=_0x4dd926!==Cs;this['_blendStat'+'e']['blend']!==_0x2b9319&&(this['_blendStat'+'e']['blend']=_0x2b9319,this['_updateTra'+'nsparency']()),this['_updateMes'+'hInstanceK'+'eys']();}get['blendType'](){if(!this['transparen'+'t'])return Cs;const {colorOp:_0x5e0975,colorSrcFactor:_0x3f3558,colorDstFactor:_0x43416d,alphaOp:_0x30e998,alphaSrcFactor:_0x10048e,alphaDstFactor:_0x1a3d97}=this['_blendStat'+'e'];for(let _0x35f0e1=-0x20ae+-0x2*-0x2df+0x1af0;_0x35f0e1<ss['length'];_0x35f0e1++){const _0x13c7e3=ss[_0x35f0e1];if(_0x13c7e3['src']===_0x3f3558&&_0x13c7e3['dst']===_0x43416d&&_0x13c7e3['op']===_0x5e0975&&_0x13c7e3['src']===_0x10048e&&_0x13c7e3['dst']===_0x1a3d97&&_0x13c7e3['op']===_0x30e998)return _0x35f0e1;}return Zs;}set['depthState'](_0x31ef92){this['_depthStat'+'e']['copy'](_0x31ef92);}get['depthState'](){return this['_depthStat'+'e'];}set['depthTest'](_0x402beb){this['_depthStat'+'e']['test']=_0x402beb;}get['depthTest'](){return this['_depthStat'+'e']['test'];}set['depthFunc'](_0x229abf){this['_depthStat'+'e']['func']=_0x229abf;}get['depthFunc'](){return this['_depthStat'+'e']['func'];}set['depthWrite'](_0x423843){this['_depthStat'+'e']['write']=_0x423843;}get['depthWrite'](){return this['_depthStat'+'e']['write'];}['copy'](_0x202146){var _0x4f7de7,_0x5e3b11;this['name']=_0x202146['name'],this['alphaTest']=_0x202146['alphaTest'],this['alphaToCov'+'erage']=_0x202146['alphaToCov'+'erage'],this['_blendStat'+'e']['copy'](_0x202146['_blendStat'+'e']),this['_depthStat'+'e']['copy'](_0x202146['_depthStat'+'e']),this['cull']=_0x202146['cull'],this['stencilFro'+'nt']=(_0x4f7de7=_0x202146['stencilFro'+'nt'])==null?void(-0x213a+0x2b*-0x29+-0x281d*-0x1):_0x4f7de7['clone'](),_0x202146['stencilBac'+'k']&&(this['stencilBac'+'k']=_0x202146['stencilFro'+'nt']===_0x202146['stencilBac'+'k']?this['stencilFro'+'nt']:_0x202146['stencilBac'+'k']['clone']()),this['clearParam'+'eters']();for(const _0x33969e in _0x202146['parameters'])_0x202146['parameters']['hasOwnProp'+'erty'](_0x33969e)&&this['_setParame'+'terSimple'](_0x33969e,_0x202146['parameters'][_0x33969e]['data']);return this['defines']['clear'](),_0x202146['defines']['forEach']((_0x22f7c7,_0x5797b3)=>this['defines']['set'](_0x5797b3,_0x22f7c7)),this['_shaderChu'+'nks']=_0x202146['hasShaderC'+'hunks']?new Ce():null,(_0x5e3b11=this['_shaderChu'+'nks'])==null||_0x5e3b11['copy'](_0x202146['_shaderChu'+'nks']),this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['_updateMes'+'hInstanceK'+'eys'](){const _0x388bdc=this['meshInstan'+'ces'];for(let _0x3219db=0x11b*-0x1a+0x11c5*0x2+-0x1b3*0x4;_0x3219db<_0x388bdc['length'];_0x3219db++)_0x388bdc[_0x3219db]['updateKey']();}['updateUnif'+'orms'](_0x5e2411,_0x11aa74){this['_dirtyShad'+'er']&&this['clearVaria'+'nts']();}['getShaderV'+'ariant'](_0x211f11){w['assert'](!(-0x26f3*-0x1+-0x1*0x11d5+-0x151d),'Not\x20implem'+'ented');}['update'](){var _0x45f3b3,_0x567767;if(Object['keys'](this['_oldChunks'])['length']>-0x14c2+-0x66*-0x5d+-0x104c*0x1){for(const [_0x20c685,_0x5939bd]of Object['entries'](this['_oldChunks']))this['shaderChun'+'ks']['glsl']['set'](_0x20c685,_0x5939bd),delete this['_oldChunks'][_0x20c685];}(this['_definesDi'+'rty']||(_0x45f3b3=this['_shaderChu'+'nks'])!=null&&_0x45f3b3['isDirty']())&&(this['_definesDi'+'rty']=!(-0xb44+-0x19a7+0x24ec),(_0x567767=this['_shaderChu'+'nks'])==null||_0x567767['resetDirty'](),this['clearVaria'+'nts']()),this['dirty']=!(-0x1de9+-0xefa+0x2ce3);}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['clearVaria'+'nts'](){this['variants']['clear']();const _0x3a7fa9=this['meshInstan'+'ces'],_0xb56b5=_0x3a7fa9['length'];for(let _0x1c7bf5=0x26fb+-0x1c96+-0xa65;_0x1c7bf5<_0xb56b5;_0x1c7bf5++)_0x3a7fa9[_0x1c7bf5]['clearShade'+'rs']();}['getParamet'+'er'](_0x2d822b){return this['parameters'][_0x2d822b];}['_setParame'+'terSimple'](_0x53d4b1,_0x533c54){w['call'](()=>{_0x533c54===void(0x14b8+0x7b*-0xc+0x13f*-0xc)&&w['warnOnce']('Material#s'+'etParamete'+'r:\x20Attempt'+'ing\x20to\x20set'+'\x20undefined'+'\x20data\x20for\x20'+'parameter\x20'+'\x22'+_0x53d4b1+('\x22,\x20this\x20is'+'\x20likely\x20no'+'t\x20expected'+'.'),this);});const _0x111f1d=this['parameters'][_0x53d4b1];_0x111f1d?_0x111f1d['data']=_0x533c54:this['parameters'][_0x53d4b1]={'scopeId':null,'data':_0x533c54};}['setParamet'+'er'](_0x33100a,_0x366d97){if(_0x366d97===void(-0x4*0x3+0xdfd+-0x53*0x2b)&&typeof _0x33100a=='object'){const _0x585cc8=_0x33100a;if(_0x585cc8['length']){for(let _0xe6e819=0x1*0x75b+-0x733*-0x1+-0xe8e;_0xe6e819<_0x585cc8['length'];_0xe6e819++)this['setParamet'+'er'](_0x585cc8[_0xe6e819]);return;}_0x33100a=_0x585cc8['name'],_0x366d97=_0x585cc8['value'];}this['_setParame'+'terSimple'](_0x33100a,_0x366d97);}['deletePara'+'meter'](_0x468990){this['parameters'][_0x468990]&&delete this['parameters'][_0x468990];}['setParamet'+'ers'](_0x311503,_0xebf9ea){const _0x76868e=this['parameters'];_0xebf9ea===void(-0x1777+0x7*0x2e1+0x350)&&(_0xebf9ea=_0x76868e);for(const _0x56533c in _0xebf9ea){const _0x5402eb=_0x76868e[_0x56533c];_0x5402eb&&(_0x5402eb['scopeId']||(_0x5402eb['scopeId']=_0x311503['scope']['resolve'](_0x56533c)),_0x5402eb['scopeId']['setValue'](_0x5402eb['data']));}}['setDefine'](_0x2a0e0f,_0x2e5b3c){let _0x2cbd66=!(-0xfc1+-0x1eba+-0x55*-0x8c);const {defines:_0x40d246}=this;_0x2e5b3c!==void(-0x2053+0x6f3*-0x3+0x1*0x352c)&&_0x2e5b3c!==!(0x2289+-0x17cf+-0xab9)?(_0x2cbd66=!_0x40d246['has'](_0x2a0e0f)||_0x40d246['get'](_0x2a0e0f)!==_0x2e5b3c,_0x40d246['set'](_0x2a0e0f,_0x2e5b3c)):(_0x2cbd66=_0x40d246['has'](_0x2a0e0f),_0x40d246['delete'](_0x2a0e0f)),this['_definesDi'+'rty']||(this['_definesDi'+'rty']=_0x2cbd66);}['getDefine'](_0x19e4cf){return this['defines']['has'](_0x19e4cf);}['destroy'](){this['variants']['clear']();for(let _0x571924=-0x12+0x2a2+0x148*-0x2;_0x571924<this['meshInstan'+'ces']['length'];_0x571924++){const _0x3fe06=this['meshInstan'+'ces'][_0x571924];if(_0x3fe06['clearShade'+'rs'](),_0x3fe06['_material']=null,_0x3fe06['mesh']){const _0x206ec0=$n(_0x3fe06['mesh']['device']);this!==_0x206ec0&&(_0x3fe06['material']=_0x206ec0);}else w['warn']('pc.Materia'+'l:\x20MeshIns'+'tance.mesh'+'\x20is\x20null,\x20'+'default\x20ma'+'terial\x20can'+'not\x20be\x20ass'+'igned\x20to\x20t'+'he\x20MeshIns'+'tance');}this['meshInstan'+'ces']['length']=-0x3*-0xa8d+0x23f3+-0x21cd*0x2;}['addMeshIns'+'tanceRef'](_0x54d397){this['meshInstan'+'ces']['push'](_0x54d397);}['removeMesh'+'InstanceRe'+'f'](_0x46fe7b){const _0x382c39=this['meshInstan'+'ces'],_0x52889d=_0x382c39['indexOf'](_0x46fe7b);_0x52889d!==-(0xb29*-0x3+0x18fc+0x880)&&_0x382c39['splice'](_0x52889d,0x302+-0x3*0x434+0x99b);}}class Hs{static['update'](_0x92b041,_0x35ba00,_0x5819a2,_0x298431,_0x18f4fe,_0x309378,_0x397b86){Hs['updateShar'+'edOptions'](_0x92b041,_0x35ba00,_0x5819a2,_0x18f4fe,_0x309378),Hs['updateMate'+'rialOption'+'s'](_0x92b041,_0x35ba00),Hs['updateEnvO'+'ptions'](_0x92b041,_0x35ba00,_0x5819a2,_0x298431),Hs['updateLigh'+'tingOption'+'s'](_0x92b041,_0x35ba00,_0x5819a2,_0x18f4fe,_0x397b86);}static['updateShar'+'edOptions'](_0x2cd8ec,_0x160560,_0xa798fd,_0x2414c5,_0x1f3060){_0x2cd8ec['shaderChun'+'ks']=_0x160560['shaderChun'+'ks'],_0x2cd8ec['pass']=_0x1f3060,_0x2cd8ec['alphaTest']=_0x160560['alphaTest']>-0x527*0x7+-0x26*-0xf1+0x5*0xf,_0x2cd8ec['blendType']=_0x160560['blendType'],_0x2cd8ec['screenSpac'+'e']=_0x2414c5&&(_0x2414c5&sh)!==-0x9fb+0x683+0x378,_0x2cd8ec['skin']=_0x2414c5&&(_0x2414c5&qo)!==-0xc*0x74+-0x4*0x60f+-0x24*-0xd3,_0x2cd8ec['useInstanc'+'ing']=_0x2414c5&&(_0x2414c5&jo)!==0xa9d*0x3+-0x1d4d*-0x1+-0x3d24,_0x2cd8ec['useMorphPo'+'sition']=_0x2414c5&&(_0x2414c5&Yo)!==-0xdb*-0xd+-0x266d+0x48d*0x6,_0x2cd8ec['useMorphNo'+'rmal']=_0x2414c5&&(_0x2414c5&Ko)!==0xc3+0x352*-0xa+-0x97*-0x37,_0x2cd8ec['useMorphTe'+'xtureBased'+'Int']=_0x2414c5&&(_0x2414c5&Zo)!==-0x1b4+-0x1d0*0x9+-0x902*-0x2,_0x2cd8ec['hasTangent'+'s']=_0x2414c5&&(_0x2414c5&Op)!==-0x4*-0x312+-0x11*0xe3+-0x8f*-0x5,_0x2cd8ec['nineSliced'+'Mode']=_0x160560['nineSliced'+'Mode']||ci,_0x160560['useLightin'+'g']&&_0xa798fd['clusteredL'+'ightingEna'+'bled']?(_0x2cd8ec['clusteredL'+'ightingEna'+'bled']=!(0x5e7+0x3*-0x742+0x11*0xef),_0x2cd8ec['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0xa798fd['lighting']['cookiesEna'+'bled'],_0x2cd8ec['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0xa798fd['lighting']['shadowsEna'+'bled'],_0x2cd8ec['clusteredL'+'ightingSha'+'dowType']=_0xa798fd['lighting']['shadowType'],_0x2cd8ec['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0xa798fd['lighting']['areaLights'+'Enabled']):(_0x2cd8ec['clusteredL'+'ightingEna'+'bled']=!(0x1c7d+-0x166e+0x1*-0x60e),_0x2cd8ec['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(-0xd1+-0x1986+0x1a58),_0x2cd8ec['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(-0xe1d+0x7d*0x28+-0x56a),_0x2cd8ec['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(-0x3f6+0x6c9+-0x26*0x13));}static['updateMate'+'rialOption'+'s'](_0x1fe4d0,_0x2f5d1c){_0x1fe4d0['separateAm'+'bient']=!(0x2*0xf21+0x1*-0x158+-0x1ce9),_0x1fe4d0['pixelSnap']=_0x2f5d1c['pixelSnap'],_0x1fe4d0['ambientSH']=_0x2f5d1c['ambientSH'],_0x1fe4d0['twoSidedLi'+'ghting']=_0x2f5d1c['twoSidedLi'+'ghting'],_0x1fe4d0['occludeDir'+'ect']=_0x2f5d1c['occludeDir'+'ect'],_0x1fe4d0['occludeSpe'+'cular']=_0x2f5d1c['occludeSpe'+'cular'],_0x1fe4d0['occludeSpe'+'cularFloat']=_0x2f5d1c['occludeSpe'+'cularInten'+'sity']!==0x3e*0x70+-0x1b*-0xfb+-0x1*0x3598,_0x1fe4d0['useMsdf']=!(0x5*0x377+0x25ae+0x370*-0x10),_0x1fe4d0['msdfTextAt'+'tribute']=!(0xd9e+-0x1896+0xaf9),_0x1fe4d0['alphaToCov'+'erage']=_0x2f5d1c['alphaToCov'+'erage'],_0x1fe4d0['opacityFad'+'esSpecular']=_0x2f5d1c['opacityFad'+'esSpecular'],_0x1fe4d0['opacityDit'+'her']=_0x2f5d1c['opacityDit'+'her'],_0x1fe4d0['cubeMapPro'+'jection']=Pp,_0x1fe4d0['useSpecula'+'r']=_0x2f5d1c['hasSpecula'+'r'],_0x1fe4d0['useSpecula'+'rityFactor']=_0x2f5d1c['hasSpecula'+'rityFactor'],_0x1fe4d0['enableGGXS'+'pecular']=_0x2f5d1c['ggxSpecula'+'r'],_0x1fe4d0['fresnelMod'+'el']=_0x2f5d1c['fresnelMod'+'el'],_0x1fe4d0['useRefract'+'ion']=_0x2f5d1c['hasRefract'+'ion'],_0x1fe4d0['useClearCo'+'at']=_0x2f5d1c['hasClearCo'+'at'],_0x1fe4d0['useSheen']=_0x2f5d1c['hasSheen'],_0x1fe4d0['useIridesc'+'ence']=_0x2f5d1c['hasIrrides'+'cence'],_0x1fe4d0['useMetalne'+'ss']=_0x2f5d1c['hasMetalne'+'ss'],_0x1fe4d0['useDynamic'+'Refraction']=_0x2f5d1c['dynamicRef'+'raction'],_0x1fe4d0['dispersion']=_0x2f5d1c['dispersion']>0x1*-0x2269+0x2*-0x12a5+-0x5*-0xe57,_0x1fe4d0['vertexColo'+'rs']=!(0xf1*0x1f+0x1fea+-0xc38*0x5),_0x1fe4d0['lightMapEn'+'abled']=_0x2f5d1c['hasLightin'+'g'],_0x1fe4d0['dirLightMa'+'pEnabled']=_0x2f5d1c['dirLightMa'+'p'],_0x1fe4d0['useHeights']=_0x2f5d1c['hasHeights'],_0x1fe4d0['useNormals']=_0x2f5d1c['hasNormals'],_0x1fe4d0['useClearCo'+'atNormals']=_0x2f5d1c['hasClearCo'+'atNormals'],_0x1fe4d0['useAo']=_0x2f5d1c['hasAo'],_0x1fe4d0['diffuseMap'+'Enabled']=_0x2f5d1c['hasDiffuse'+'Map'];}static['updateEnvO'+'ptions'](_0x459e58,_0x48aeb6,_0x1402a5,_0x25985b){_0x459e58['fog']=_0x48aeb6['useFog']?_0x25985b['fog']:Hn,_0x459e58['gamma']=_0x25985b['shaderOutp'+'utGamma'],_0x459e58['toneMap']=_0x48aeb6['useTonemap']?_0x25985b['toneMappin'+'g']:Ey,_0x48aeb6['useSkybox']&&_0x1402a5['envAtlas']&&_0x1402a5['skybox']?(_0x459e58['reflection'+'Source']=Jc,_0x459e58['reflection'+'Encoding']=_0x1402a5['envAtlas']['encoding'],_0x459e58['reflection'+'CubemapEnc'+'oding']=_0x1402a5['skybox']['encoding']):_0x48aeb6['useSkybox']&&_0x1402a5['envAtlas']?(_0x459e58['reflection'+'Source']=Qc,_0x459e58['reflection'+'Encoding']=_0x1402a5['envAtlas']['encoding']):_0x48aeb6['useSkybox']&&_0x1402a5['skybox']?(_0x459e58['reflection'+'Source']=eh,_0x459e58['reflection'+'Encoding']=_0x1402a5['skybox']['encoding']):(_0x459e58['reflection'+'Source']=_r,_0x459e58['reflection'+'Encoding']=null),_0x48aeb6['ambientSH']?(_0x459e58['ambientSou'+'rce']=Dp,_0x459e58['ambientEnc'+'oding']=null):_0x459e58['reflection'+'Source']!==_r&&_0x1402a5['envAtlas']?(_0x459e58['ambientSou'+'rce']=Ip,_0x459e58['ambientEnc'+'oding']=_0x1402a5['envAtlas']['encoding']):(_0x459e58['ambientSou'+'rce']=Lp,_0x459e58['ambientEnc'+'oding']=null);const _0x48c812=_0x459e58['reflection'+'Source']!==_r;_0x459e58['skyboxInte'+'nsity']=_0x48c812,_0x459e58['useCubeMap'+'Rotation']=_0x48c812&&_0x1402a5['_skyboxRot'+'ationShade'+'rInclude'];}static['updateLigh'+'tingOption'+'s'](_0x3b5513,_0x49764e,_0x510513,_0xcb8e77,_0x398b78){if(_0x3b5513['lightMapWi'+'thoutAmbie'+'nt']=!(0x1fc7+0x103*-0x8+-0x17ae*0x1),_0x49764e['useLightin'+'g']){const _0x82f12e=[],_0x466e66=_0xcb8e77?_0xcb8e77>>0x26a0+-0x1*-0x14b9+0x13c3*-0x3:Ss;_0x3b5513['lightMaskD'+'ynamic']=!!(_0x466e66&Ss),_0x3b5513['lightMapWi'+'thoutAmbie'+'nt']=!(0x994+0x8*-0x50+0x1*-0x713),_0x398b78&&(Hs['collectLig'+'hts'](ve,_0x398b78[ve],_0x82f12e,_0x466e66),_0x510513['clusteredL'+'ightingEna'+'bled']||(Hs['collectLig'+'hts'](Ke,_0x398b78[Ke],_0x82f12e,_0x466e66),Hs['collectLig'+'hts'](Ze,_0x398b78[Ze],_0x82f12e,_0x466e66))),_0x3b5513['lights']=_0x82f12e;}else _0x3b5513['lights']=[];(_0x3b5513['lights']['length']===-0x30a+-0xb3c*-0x1+-0x832&&!_0x510513['clusteredL'+'ightingEna'+'bled']||(_0xcb8e77&th)!==0x266b+0x97*0x4+-0x28c7)&&(_0x3b5513['noShadow']=!(-0x190a+-0x15f5+0x35*0xe3));}static['collectLig'+'hts'](_0x373b89,_0x3ae8c2,_0x16024e,_0x2a9bdc){for(let _0xfc8bbc=0x1*0x6e0+-0xd1+0x2f*-0x21;_0xfc8bbc<_0x3ae8c2['length'];_0xfc8bbc++){const _0x4689e6=_0x3ae8c2[_0xfc8bbc];_0x4689e6['enabled']&&_0x4689e6['mask']&_0x2a9bdc&&_0x16024e['push'](_0x4689e6);}}}const u_=(_0x4b8e95,_0x3ff024)=>{if(_0x4b8e95['length']!==_0x3ff024['length'])return!(-0x24ff+-0x167*-0xe+0x115e);for(let _0x3e3783=0x172e+0xb32*-0x1+-0xbfc;_0x3e3783<_0x4b8e95['length'];++_0x3e3783)if(_0x4b8e95[_0x3e3783]!==_0x3ff024[_0x3e3783])return!(0x65*-0x5e+-0x1168+0x367f);return!(-0x19bd*-0x1+0x240d+-0x3dca);},LE=_0x1ba047=>_0x1ba047['r']!==-0x5*0x5e3+0x2030+-0x2c0||_0x1ba047['g']!==0x121*0x7+0x179*0x6+-0x1*0x10bc||_0x1ba047['b']!==-0x833*-0x1+0x1584+-0x1*0x1db6,RE=_0x31a8ee=>_0x31a8ee['r']!==0x1*-0x142f+-0x234c+0x377b||_0x31a8ee['g']!==-0xd7*-0xb+-0x611+-0x32c||_0x31a8ee['b']!==-0x214a+0x25*0x101+-0x3db;class OE{constructor(){this['_mapXForms']=null;}['updateMinR'+'ef'](_0x1d7bd5,_0x5c05d1,_0x5709df,_0x16f6b1,_0x4464e8,_0xeaa72c){this['_updateSha'+'redOptions'](_0x1d7bd5,_0x5c05d1,_0x5709df,_0x16f6b1,_0x4464e8),this['_updateMin'+'Options'](_0x1d7bd5,_0x5709df,_0x4464e8),this['_updateUVO'+'ptions'](_0x1d7bd5,_0x5709df,_0x16f6b1,!(-0x2618+-0xf5*-0xe+-0xc59*-0x2));}['updateRef'](_0x361ce8,_0x3ae604,_0x3599e8,_0x51cb78,_0xaac7f2,_0x103352,_0x573bc7){this['_updateSha'+'redOptions'](_0x361ce8,_0x3ae604,_0x51cb78,_0xaac7f2,_0x103352),this['_updateEnv'+'Options'](_0x361ce8,_0x51cb78,_0x3ae604,_0x3599e8),this['_updateMat'+'erialOptio'+'ns'](_0x361ce8,_0x51cb78,_0x3ae604),_0x361ce8['litOptions']['hasTangent'+'s']=_0xaac7f2&&(_0xaac7f2&Op)!==0xba1+0x1d9d+-0x293e,this['_updateLig'+'htOptions'](_0x361ce8,_0x3ae604,_0x51cb78,_0xaac7f2,_0x573bc7),this['_updateUVO'+'ptions'](_0x361ce8,_0x51cb78,_0xaac7f2,!(-0x198e+0x1d2*0x6+-0x4e1*-0x3),_0x3599e8);}['_updateSha'+'redOptions'](_0x3d653d,_0x2940be,_0x18f667,_0xf258b2,_0x9b5a0a){_0x3d653d['forceUv1']=_0x18f667['forceUv1'],_0x18f667['userAttrib'+'utes']&&(_0x3d653d['litOptions']['userAttrib'+'utes']=Object['fromEntrie'+'s'](_0x18f667['userAttrib'+'utes']['entries']())),_0x3d653d['litOptions']['shaderChun'+'ks']=_0x18f667['shaderChun'+'ks'],_0x3d653d['litOptions']['pass']=_0x9b5a0a,_0x3d653d['litOptions']['alphaTest']=_0x18f667['alphaTest']>-0x2ee+-0x1fc+0x4ea,_0x3d653d['litOptions']['blendType']=_0x18f667['blendType'],_0x3d653d['litOptions']['screenSpac'+'e']=_0xf258b2&&(_0xf258b2&sh)!==0x18aa+0x1654*0x1+-0x2efe,_0x3d653d['litOptions']['skin']=_0xf258b2&&(_0xf258b2&qo)!==-0x3e1*-0x1+0x38*0x43+0x3b5*-0x5,_0x3d653d['litOptions']['batch']=_0xf258b2&&(_0xf258b2&bc)!==-0xa0d+0x90*0x1d+-0x643,_0x3d653d['litOptions']['useInstanc'+'ing']=_0xf258b2&&(_0xf258b2&jo)!==-0x1779+0x5*0x5d1+-0x59c,_0x3d653d['litOptions']['useMorphPo'+'sition']=_0xf258b2&&(_0xf258b2&Yo)!==0x304*-0x5+0x1df7*-0x1+0x2d0b,_0x3d653d['litOptions']['useMorphNo'+'rmal']=_0xf258b2&&(_0xf258b2&Ko)!==-0x7*-0x2ce+-0xd7a+-0x628,_0x3d653d['litOptions']['useMorphTe'+'xtureBased'+'Int']=_0xf258b2&&(_0xf258b2&Zo)!==-0x1a6e+-0x164b+0x30b9,_0x3d653d['litOptions']['nineSliced'+'Mode']=_0x18f667['nineSliced'+'Mode']||0x675+0x181a+-0x1e8f,_0x2940be['clusteredL'+'ightingEna'+'bled']&&_0x18f667['useLightin'+'g']?(_0x3d653d['litOptions']['clusteredL'+'ightingEna'+'bled']=!(-0x2345+0x102f*-0x1+0x94*0x59),_0x3d653d['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x2940be['lighting']['cookiesEna'+'bled'],_0x3d653d['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x2940be['lighting']['shadowsEna'+'bled'],_0x3d653d['litOptions']['clusteredL'+'ightingSha'+'dowType']=_0x2940be['lighting']['shadowType'],_0x3d653d['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x2940be['lighting']['areaLights'+'Enabled']):(_0x3d653d['litOptions']['clusteredL'+'ightingEna'+'bled']=!(-0x38*-0xb1+0x1c66*-0x1+-0xa51),_0x3d653d['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(0xe1d*-0x2+-0x1e9*0x1+0x1e24),_0x3d653d['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(0x14eb+-0x278+-0x1272),_0x3d653d['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(-0x1*0x445+-0x579+0x1*0x9bf));}['_updateUVO'+'ptions'](_0x521f74,_0x26fc91,_0x4c5007,_0x23da00,_0x4724ee){let _0x3fe584=!(0x1b43*0x1+-0x8*-0x15e+0x2*-0x1319),_0x8e3855=!(0x1439+0xeec+-0xad*0x34),_0x221939=!(0x4f1+0x132+-0x622);_0x4c5007&&(_0x3fe584=(_0x4c5007&Rp)!==0x26f3+0x13dd+-0x3ad0,_0x8e3855=(_0x4c5007&My)!==-0x1d49+-0x197+0x1a0*0x13,_0x221939=(_0x4c5007&Dy)!==0x8*-0x371+-0x23f4+0x3f7c),_0x521f74['litOptions']['vertexColo'+'rs']=!(-0x190c+-0xd*-0x1e2+0x93),this['_mapXForms']=[];const _0x388f0f={};for(const _0xef9b15 in Sn)this['_updateTex'+'Options'](_0x521f74,_0x26fc91,_0xef9b15,_0x3fe584,_0x8e3855,_0x221939,_0x23da00,_0x388f0f);this['_mapXForms']=null,_0x521f74['litOptions']['ssao']=_0x4724ee==null?void(-0x438+0x89*-0x11+0xd51):_0x4724ee['ssaoEnable'+'d'],_0x521f74['useAO']=_0x521f74['litOptions']['ssao'],_0x521f74['litOptions']['lightMapEn'+'abled']=_0x521f74['lightMap'],_0x521f74['litOptions']['dirLightMa'+'pEnabled']=_0x521f74['dirLightMa'+'p'],_0x521f74['litOptions']['useHeights']=_0x521f74['heightMap'],_0x521f74['litOptions']['useNormals']=_0x521f74['normalMap'],_0x521f74['litOptions']['useClearCo'+'atNormals']=_0x521f74['clearCoatN'+'ormalMap'],_0x521f74['litOptions']['useAo']=_0x521f74['aoMap']||_0x521f74['aoVertexCo'+'lor']||_0x521f74['litOptions']['ssao'],_0x521f74['litOptions']['diffuseMap'+'Enabled']=_0x521f74['diffuseMap'];}['_updateTex'+'Options'](_0x42eae2,_0x1fc124,_0x190fae,_0x42b498,_0x1ef165,_0x4fde57,_0x50828b,_0x9d9f09){const _0x1f2dce=_0x190fae==='opacity';if(!_0x50828b||_0x1f2dce){const _0x1dc2e6=_0x190fae+'Map',_0x151599=_0x190fae+('VertexColo'+'r'),_0x8c472c=_0x190fae+('VertexColo'+'rChannel'),_0x107791=_0x1dc2e6+'Channel',_0xf6afe7=_0x1dc2e6+'Transform',_0x12f229=_0x1dc2e6+'Uv',_0x2b1f0b=_0x1dc2e6+'Identifier';if(_0x190fae!=='light'&&(_0x42eae2[_0x1dc2e6]=!(0x54f*-0x4+-0x1*-0x1981+-0x2*0x222),_0x42eae2[_0x2b1f0b]=void(0xde+0x2*0xd83+-0x1be4),_0x42eae2[_0x107791]='',_0x42eae2[_0xf6afe7]=-0xa19+0x5d*-0x13+0x1100,_0x42eae2[_0x12f229]=-0x2022+0x1b*0x3b+0xb*0x25b),_0x42eae2[_0x151599]=!(0x949*-0x4+-0x13c3+0xc*0x4be),_0x42eae2[_0x8c472c]='',_0x1f2dce&&_0x1fc124['blendType']===Cs&&_0x1fc124['alphaTest']===-0x1a5a+0xe94+0xbc6*0x1&&!_0x1fc124['alphaToCov'+'erage']&&_0x1fc124['opacityDit'+'her']===ua)return;if(_0x190fae!=='height'&&_0x1fc124[_0x151599]&&_0x4fde57&&(_0x42eae2[_0x151599]=_0x1fc124[_0x151599],_0x42eae2[_0x8c472c]=_0x1fc124[_0x8c472c],_0x42eae2['litOptions']['vertexColo'+'rs']=!(-0x1bbc+0x491*0x4+0x978)),_0x1fc124[_0x1dc2e6]){let _0x5d0945=!(-0x3*-0x47f+0x2a5*-0xc+-0x207*-0x9);if(_0x1fc124[_0x12f229]===-0x13a0+0xcf1*-0x2+0x48d*0xa&&!_0x42b498&&(_0x5d0945=!(-0x1935+-0x1*0x4a8+0x1dde)),_0x1fc124[_0x12f229]===-0xa7*-0xf+0xdae+-0x1776&&!_0x1ef165&&(_0x5d0945=!(-0x3*-0xbad+-0x25ef+-0x95*-0x5)),_0x5d0945){const _0x131a69=_0x1fc124[_0x1dc2e6]['id'];let _0x4fbc2d=_0x9d9f09[_0x131a69];_0x4fbc2d===void(-0xa02+-0x101+0xb03)&&(_0x9d9f09[_0x131a69]=_0x190fae,_0x4fbc2d=_0x190fae),_0x42eae2[_0x1dc2e6]=!!_0x1fc124[_0x1dc2e6],_0x42eae2[_0x2b1f0b]=_0x4fbc2d,_0x42eae2[_0xf6afe7]=this['_getMapTra'+'nsformID'](_0x1fc124['getUniform'](_0xf6afe7),_0x1fc124[_0x12f229]),_0x42eae2[_0x107791]=_0x1fc124[_0x107791],_0x42eae2[_0x12f229]=_0x1fc124[_0x12f229];}}}}['_updateMin'+'Options'](_0x45969e,_0x353007,_0x4848f8){const _0x3e1373=_0x4848f8===vl;_0x45969e['litOptions']['opacitySha'+'dowDither']=_0x3e1373?_0x353007['opacityDit'+'her']:_0x353007['opacitySha'+'dowDither'],_0x45969e['litOptions']['linearDept'+'h']=_0x3e1373,_0x45969e['litOptions']['lights']=[];}['_updateMat'+'erialOptio'+'ns'](_0x50a53e,_0x4e4981,_0x5cb078){var _0x407558,_0x428927,_0x94834e,_0x2fc865,_0xdbe1c9,_0x21686b;const _0x2ac734=!!(_0x4e4981['useMetalne'+'ss']||_0x4e4981['specularMa'+'p']||_0x4e4981['sphereMap']||_0x4e4981['cubeMap']||RE(_0x4e4981['specular'])||_0x4e4981['specularit'+'yFactor']>-0x2243+-0xbec+-0x3*-0xf65&&_0x4e4981['useMetalne'+'ss']||_0x4e4981['enableGGXS'+'pecular']||_0x4e4981['clearCoat']>-0xf61+0x167*0x7+0x164*0x4),_0x1a20ec=!_0x4e4981['useMetalne'+'ss']||_0x4e4981['useMetalne'+'ssSpecular'+'Color'],_0x51957c=_0x2ac734&&(_0x4e4981['specularTi'+'nt']||!_0x4e4981['specularMa'+'p']&&!_0x4e4981['specularVe'+'rtexColor'])&&LE(_0x4e4981['specular']),_0x541ee5=_0x2ac734&&_0x4e4981['useMetalne'+'ssSpecular'+'Color']&&(_0x4e4981['specularit'+'yFactorTin'+'t']||_0x4e4981['specularit'+'yFactor']<-0x189*-0x5+0xc9a+-0x1446&&!_0x4e4981['specularit'+'yFactorMap']),_0x4bc0e4=_0x297733=>_0x297733?_0x297733['format']===ol||_0x297733['type']===zo:!(-0x38b+0x26ff*0x1+0x4b*-0x79),_0x3f30c5=(_0x5f5d73,_0x57b298)=>Math['abs'](_0x5f5d73-_0x57b298)<-0x1d*0x2f+-0x1d0*-0xb+-0xe9d+0.0001;_0x50a53e['specularTi'+'nt']=_0x51957c,_0x50a53e['specularit'+'yFactorTin'+'t']=_0x541ee5,_0x50a53e['metalnessT'+'int']=_0x4e4981['useMetalne'+'ss']&&_0x4e4981['metalness']<0xe1c+0x2*0x1066+-0x1*0x2ee7,_0x50a53e['glossTint']=!(-0x5*0x257+-0x26cf+0x3282),_0x50a53e['diffuseEnc'+'oding']=(_0x407558=_0x4e4981['diffuseMap'])==null?void(-0x1df6+0x3*-0x76b+-0x1*-0x3437):_0x407558['encoding'],_0x50a53e['diffuseDet'+'ailEncodin'+'g']=(_0x428927=_0x4e4981['diffuseDet'+'ailMap'])==null?void(0x22d9+0x1a65+-0x3d3e):_0x428927['encoding'],_0x50a53e['emissiveEn'+'coding']=(_0x94834e=_0x4e4981['emissiveMa'+'p'])==null?void(-0x1f*-0xa+-0x11e7+0x10b1):_0x94834e['encoding'],_0x50a53e['lightMapEn'+'coding']=(_0x2fc865=_0x4e4981['lightMap'])==null?void(-0x25b5+-0x112*-0x16+0x1*0xe29):_0x2fc865['encoding'],_0x50a53e['packedNorm'+'al']=_0x4bc0e4(_0x4e4981['normalMap']),_0x50a53e['refraction'+'Tint']=_0x3f30c5(_0x4e4981['refraction'],-0x484+-0x48b+0x910),_0x50a53e['refraction'+'IndexTint']=_0x3f30c5(_0x4e4981['refraction'+'Index'],(-0x1*0x42a+-0x20d3+-0x1*-0x24fe)/(0x1523+0xd40+-0x2262+0.5)),_0x50a53e['thicknessT'+'int']=_0x4e4981['useDynamic'+'Refraction']&&_0x4e4981['thickness']!==0x87a*-0x1+-0x1*-0x11bd+-0xa*0xed,_0x50a53e['specularEn'+'coding']=(_0xdbe1c9=_0x4e4981['specularMa'+'p'])==null?void(-0x27*0xcb+-0x16b3+-0x8f*-0x60):_0xdbe1c9['encoding'],_0x50a53e['sheenEncod'+'ing']=(_0x21686b=_0x4e4981['sheenMap'])==null?void(0x1*-0x21fa+0x10*-0xfc+0x31ba):_0x21686b['encoding'],_0x50a53e['aoMapUv']=_0x4e4981['aoUvSet'],_0x50a53e['aoDetail']=!!_0x4e4981['aoDetailMa'+'p'],_0x50a53e['diffuseDet'+'ail']=!!_0x4e4981['diffuseDet'+'ailMap'],_0x50a53e['normalDeta'+'il']=!!_0x4e4981['normalMap'],_0x50a53e['normalDeta'+'ilPackedNo'+'rmal']=_0x4bc0e4(_0x4e4981['normalDeta'+'ilMap']),_0x50a53e['diffuseDet'+'ailMode']=_0x4e4981['diffuseDet'+'ailMode'],_0x50a53e['aoDetailMo'+'de']=_0x4e4981['aoDetailMo'+'de'],_0x50a53e['clearCoatG'+'loss']=!!_0x4e4981['clearCoatG'+'loss'],_0x50a53e['clearCoatP'+'ackedNorma'+'l']=_0x4bc0e4(_0x4e4981['clearCoatN'+'ormalMap']),_0x50a53e['iorTint']=_0x3f30c5(_0x4e4981['refraction'+'Index'],(0x9*-0xb+0x585+-0xd*0x65)/(-0x237a+-0x36d+0x1*0x26e8+0.5)),_0x5cb078['forcePassT'+'hroughSpec'+'ular']&&(_0x50a53e['specularEn'+'coding']='linear',_0x50a53e['sheenEncod'+'ing']='linear'),_0x50a53e['iridescenc'+'eTint']=_0x4e4981['iridescenc'+'e']!==0x2ed*-0x9+-0xa*-0x1bb+0x908,_0x50a53e['glossInver'+'t']=_0x4e4981['glossInver'+'t'],_0x50a53e['sheenGloss'+'Invert']=_0x4e4981['sheenGloss'+'Invert'],_0x50a53e['clearCoatG'+'lossInvert']=_0x4e4981['clearCoatG'+'lossInvert'],_0x50a53e['useSpecula'+'rColor']=_0x1a20ec,_0x50a53e['litOptions']['separateAm'+'bient']=!(-0x1*-0x355+0x1*-0x1f31+0x1bdd),_0x50a53e['litOptions']['pixelSnap']=_0x4e4981['pixelSnap'],_0x50a53e['litOptions']['ambientSH']=!!_0x4e4981['ambientSH'],_0x50a53e['litOptions']['twoSidedLi'+'ghting']=_0x4e4981['twoSidedLi'+'ghting'],_0x50a53e['litOptions']['occludeSpe'+'cular']=_0x4e4981['occludeSpe'+'cular'],_0x50a53e['litOptions']['occludeSpe'+'cularFloat']=_0x4e4981['occludeSpe'+'cularInten'+'sity']!==0x84*-0x47+0x487*0x1+0x559*0x6,_0x50a53e['litOptions']['useMsdf']=!!_0x4e4981['msdfMap'],_0x50a53e['litOptions']['msdfTextAt'+'tribute']=!!_0x4e4981['msdfTextAt'+'tribute'],_0x50a53e['litOptions']['alphaToCov'+'erage']=_0x4e4981['alphaToCov'+'erage'],_0x50a53e['litOptions']['opacityFad'+'esSpecular']=_0x4e4981['opacityFad'+'esSpecular'],_0x50a53e['litOptions']['opacityDit'+'her']=_0x4e4981['opacityDit'+'her'],_0x50a53e['litOptions']['cubeMapPro'+'jection']=_0x4e4981['cubeMapPro'+'jection'],_0x50a53e['litOptions']['occludeDir'+'ect']=_0x4e4981['occludeDir'+'ect'],_0x50a53e['litOptions']['useSpecula'+'r']=_0x2ac734,_0x50a53e['litOptions']['useSpecula'+'rityFactor']=(_0x541ee5||!!_0x4e4981['specularit'+'yFactorMap'])&&_0x4e4981['useMetalne'+'ssSpecular'+'Color'],_0x50a53e['litOptions']['enableGGXS'+'pecular']=_0x4e4981['enableGGXS'+'pecular'],_0x50a53e['litOptions']['fresnelMod'+'el']=_0x4e4981['fresnelMod'+'el'],_0x50a53e['litOptions']['useRefract'+'ion']=(_0x4e4981['refraction']||!!_0x4e4981['refraction'+'Map'])&&(_0x4e4981['useDynamic'+'Refraction']||_0x50a53e['litOptions']['reflection'+'Source']!==_r),_0x50a53e['litOptions']['useClearCo'+'at']=!!_0x4e4981['clearCoat'],_0x50a53e['litOptions']['useSheen']=_0x4e4981['useSheen'],_0x50a53e['litOptions']['useIridesc'+'ence']=_0x4e4981['useIridesc'+'ence']&&_0x4e4981['iridescenc'+'e']!==-0x2*-0x1d3+0x238c+-0x1*0x2732,_0x50a53e['litOptions']['useMetalne'+'ss']=_0x4e4981['useMetalne'+'ss'],_0x50a53e['litOptions']['useDynamic'+'Refraction']=_0x4e4981['useDynamic'+'Refraction'],_0x50a53e['litOptions']['dispersion']=_0x4e4981['dispersion']>-0x1*0x1a30+-0x49*0x45+-0x2ddd*-0x1,_0x50a53e['litOptions']['shadowCatc'+'her']=_0x4e4981['shadowCatc'+'her'];}['_updateEnv'+'Options'](_0x1fb1d3,_0x28b69d,_0x18a915,_0x36d441){_0x1fb1d3['litOptions']['fog']=_0x28b69d['useFog']?_0x36d441['fog']:Hn,_0x1fb1d3['litOptions']['gamma']=_0x36d441['shaderOutp'+'utGamma'],_0x1fb1d3['litOptions']['toneMap']=_0x28b69d['useTonemap']?_0x36d441['toneMappin'+'g']:Ey;let _0x1a2dc3=!(0x15dc+-0x227a+-0x3*-0x435);if(_0x28b69d['envAtlas']&&_0x28b69d['cubeMap']?(_0x1fb1d3['litOptions']['reflection'+'Source']=Jc,_0x1fb1d3['litOptions']['reflection'+'Encoding']=_0x28b69d['envAtlas']['encoding'],_0x1fb1d3['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x28b69d['cubeMap']['encoding']):_0x28b69d['envAtlas']?(_0x1fb1d3['litOptions']['reflection'+'Source']=Qc,_0x1fb1d3['litOptions']['reflection'+'Encoding']=_0x28b69d['envAtlas']['encoding']):_0x28b69d['cubeMap']?(_0x1fb1d3['litOptions']['reflection'+'Source']=eh,_0x1fb1d3['litOptions']['reflection'+'Encoding']=_0x28b69d['cubeMap']['encoding']):_0x28b69d['sphereMap']?(_0x1fb1d3['litOptions']['reflection'+'Source']=Py,_0x1fb1d3['litOptions']['reflection'+'Encoding']=_0x28b69d['sphereMap']['encoding']):_0x28b69d['useSkybox']&&_0x18a915['envAtlas']&&_0x18a915['skybox']?(_0x1fb1d3['litOptions']['reflection'+'Source']=Jc,_0x1fb1d3['litOptions']['reflection'+'Encoding']=_0x18a915['envAtlas']['encoding'],_0x1fb1d3['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x18a915['skybox']['encoding'],_0x1a2dc3=!(0x6*-0x277+0x195+0xa1*0x15)):_0x28b69d['useSkybox']&&_0x18a915['envAtlas']?(_0x1fb1d3['litOptions']['reflection'+'Source']=Qc,_0x1fb1d3['litOptions']['reflection'+'Encoding']=_0x18a915['envAtlas']['encoding'],_0x1a2dc3=!(-0x24db+-0x1*-0x1c41+-0x1*-0x89a)):_0x28b69d['useSkybox']&&_0x18a915['skybox']?(_0x1fb1d3['litOptions']['reflection'+'Source']=eh,_0x1fb1d3['litOptions']['reflection'+'Encoding']=_0x18a915['skybox']['encoding'],_0x1a2dc3=!(-0x2e6+-0x7b*0x2e+0x1900)):(_0x1fb1d3['litOptions']['reflection'+'Source']=_r,_0x1fb1d3['litOptions']['reflection'+'Encoding']=null),_0x28b69d['ambientSH'])_0x1fb1d3['litOptions']['ambientSou'+'rce']=Dp,_0x1fb1d3['litOptions']['ambientEnc'+'oding']=null;else{const _0x1cbd14=_0x28b69d['envAtlas']||(_0x28b69d['useSkybox']&&_0x18a915['envAtlas']?_0x18a915['envAtlas']:null);_0x1cbd14&&!_0x28b69d['sphereMap']?(_0x1fb1d3['litOptions']['ambientSou'+'rce']=Ip,_0x1fb1d3['litOptions']['ambientEnc'+'oding']=_0x1cbd14['encoding']):(_0x1fb1d3['litOptions']['ambientSou'+'rce']=Lp,_0x1fb1d3['litOptions']['ambientEnc'+'oding']=null);}_0x1fb1d3['litOptions']['skyboxInte'+'nsity']=_0x1a2dc3,_0x1fb1d3['litOptions']['useCubeMap'+'Rotation']=_0x1a2dc3&&_0x18a915['_skyboxRot'+'ationShade'+'rInclude'];}['_updateLig'+'htOptions'](_0x5584cd,_0xec3858,_0x23aa9a,_0x4cf6cc,_0x440189){if(_0x5584cd['lightMap']=!(0x1a3f+-0x5b2+-0x148c),_0x5584cd['lightMapCh'+'annel']='',_0x5584cd['lightMapUv']=0x1446+-0x2*-0x46a+0x19*-0x12a,_0x5584cd['lightMapTr'+'ansform']=0x312+0x626*-0x3+0xf60,_0x5584cd['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0x1322+0x16ed*0x1+-0x2a0e),_0x5584cd['dirLightMa'+'p']=!(-0x26cd+-0x22bd+0x498b),_0x4cf6cc&&(_0x5584cd['litOptions']['noShadow']=(_0x4cf6cc&th)!==0x2*-0x103c+0x1062+0x1016,(_0x4cf6cc&Ff)!==-0x26f7+0xaac+0x1c4b*0x1&&(_0x5584cd['lightMapEn'+'coding']=_0xec3858['lightmapPi'+'xelFormat']===Ne?'rgbm':'linear',_0x5584cd['lightMap']=!(0x1*0x1f85+-0x13b5+0x36*-0x38),_0x5584cd['lightMapCh'+'annel']='rgb',_0x5584cd['lightMapUv']=0x52*0x74+0x337+-0x285e,_0x5584cd['lightMapTr'+'ansform']=-0x25de+0x1679+0x1*0xf65,_0x5584cd['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!_0x23aa9a['lightMap'],(_0x4cf6cc&Iy)!==0x23e2+-0x339+-0x20a9&&(_0x5584cd['dirLightMa'+'p']=!(-0x1338+-0x4e*-0x1a+0xb4c)),(_0x4cf6cc&Ly)!==0x1ae5+-0x115*0x18+0x1*-0xed&&(_0x5584cd['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0xa1*-0x2+0x15b4*0x1+-0x1471)))),_0x23aa9a['useLightin'+'g']){const _0x5216b5=[],_0x412e49=_0x4cf6cc?_0x4cf6cc>>-0x22b9*-0x1+-0x3fd*-0x9+-0x2*0x2347:Ss;_0x5584cd['litOptions']['lightMaskD'+'ynamic']=!!(_0x412e49&Ss),_0x440189&&(Hs['collectLig'+'hts'](ve,_0x440189[ve],_0x5216b5,_0x412e49),_0xec3858['clusteredL'+'ightingEna'+'bled']||(Hs['collectLig'+'hts'](Ke,_0x440189[Ke],_0x5216b5,_0x412e49),Hs['collectLig'+'hts'](Ze,_0x440189[Ze],_0x5216b5,_0x412e49))),_0x5584cd['litOptions']['lights']=_0x5216b5;}else _0x5584cd['litOptions']['lights']=[];_0x5584cd['litOptions']['lights']['length']===0x14b9+0x1c6d+-0x1b*0x1d2&&!_0xec3858['clusteredL'+'ightingEna'+'bled']&&(_0x5584cd['litOptions']['noShadow']=!(0xa85+0x87c+0x3cd*-0x5));}['_getMapTra'+'nsformID'](_0x4c46aa,_0x5e87d3){if(!_0x4c46aa)return 0x22e8+-0x17*-0xe2+-0x3736;let _0x1bba79=this['_mapXForms'][_0x5e87d3];_0x1bba79||(_0x1bba79=[],this['_mapXForms'][_0x5e87d3]=_0x1bba79);for(let _0x5ec009=0x2b7+0x559+0x1*-0x810;_0x5ec009<_0x1bba79['length'];_0x5ec009++)if(u_(_0x1bba79[_0x5ec009][-0x6*0x425+-0x8c1*-0x2+0x75c]['value'],_0x4c46aa[0x1629+-0x26e4*0x1+0x10bb]['value'])&&u_(_0x1bba79[_0x5ec009][-0x2450+0x6*-0x426+0x6cd*0x9]['value'],_0x4c46aa[-0x1*-0xbdc+-0x1611+0x51b*0x2]['value']))return _0x5ec009+(-0x74*0x4+-0x2*-0x5cb+-0x9c5);return _0x1bba79['push'](_0x4c46aa);}}function rt(_0x21fd2a,_0x1a6659=!(-0x8*0x303+-0x74a+0x1f62),_0x27dc10=!(-0x125*-0x8+-0xadf+0x1b7)){const _0x1431a1={};return _0x1431a1[_0x21fd2a+'Map']='texture',_0x1431a1[_0x21fd2a+'MapTiling']='vec2',_0x1431a1[_0x21fd2a+'MapOffset']='vec2',_0x1431a1[_0x21fd2a+('MapRotatio'+'n')]='number',_0x1431a1[_0x21fd2a+'MapUv']='number',_0x1a6659&&(_0x1431a1[_0x21fd2a+'MapChannel']='string',_0x27dc10&&(_0x1431a1[_0x21fd2a+('VertexColo'+'r')]='boolean',_0x1431a1[_0x21fd2a+('VertexColo'+'rChannel')]='string')),_0x1431a1;}const Un={'name':'string','chunks':'chunks','mappingFormat':'string','_engine':'boolean','ambient':'rgb',...rt('ao'),...rt('aoDetail',!(-0x4c+0x1c3c+-0x1bf0),!(0x18c2+0x26a1+0x356*-0x13)),'aoDetailMode':'string','aoIntensity':'number','diffuse':'rgb',...rt('diffuse'),...rt('diffuseDet'+'ail',!(0x6*-0x10f+0x1f46*0x1+0x27e*-0xa),!(0x130*-0x8+0x1*-0xd9a+0x171b)),'diffuseDetailMode':'string','specular':'rgb','specularTint':'boolean',...rt('specular'),'occludeSpecular':'enum:occlu'+'deSpecular','specularityFactor':'number','specularityFactorTint':'boolean',...rt('specularit'+'yFactor'),'useMetalness':'boolean','metalness':'number','enableGGXSpecular':'boolean','metalnessTint':'boolean',...rt('metalness'),'useMetalnessSpecularColor':'boolean','anisotropyIntensity':'number','anisotropyRotation':'number',...rt('anisotropy'),'shininess':'number','gloss':'number','glossInvert':'boolean',...rt('gloss'),'clearCoat':'number',...rt('clearCoat'),'clearCoatGloss':'number','clearCoatGlossInvert':'boolean',...rt('clearCoatG'+'loss'),'clearCoatBumpiness':'number',...rt('clearCoatN'+'ormal',!(-0x50*0x6d+0xa6f*-0x2+-0x157*-0x29)),'useSheen':'boolean','sheen':'rgb',...rt('sheen'),'sheenGloss':'number','sheenGlossInvert':'boolean',...rt('sheenGloss'),'fresnelModel':'number','emissive':'rgb',...rt('emissive'),'emissiveIntensity':'number',...rt('normal',!(-0x2*-0xd1f+0x26ee+-0x412b)),'bumpiness':'number',...rt('normalDeta'+'il',!(0xda*0x7+0x25*-0x73+-0x5b*-0x1e)),'normalDetailMapBumpiness':'number',...rt('height',!(0x4c*0x56+0x31*0xd+0x1*-0x1c05),!(-0x6b9+0x1d14+0xb2d*-0x2)),'heightMapFactor':'number','alphaToCoverage':'boolean','alphaTest':'number','alphaFade':'number','opacity':'number',...rt('opacity'),'opacityFadesSpecular':'boolean','opacityDither':'string','opacityShadowDither':'string','reflectivity':'number','refraction':'number','refractionTint':'boolean',...rt('refraction'),'refractionIndex':'number','dispersion':'number','thickness':'number','thicknessTint':'boolean',...rt('thickness'),'attenuation':'rgb','attenuationDistance':'number','useDynamicRefraction':'boolean','sphereMap':'texture','cubeMap':'cubemap','cubeMapProjection':'number','cubeMapProjectionBox':'boundingbo'+'x','useIridescence':'boolean','iridescence':'number','iridescenceTint':'boolean',...rt('iridescenc'+'e'),'iridescenceThicknessTint':'boolean','iridescenceThicknessMin':'number','iridescenceThicknessMax':'number','iridescenceRefractionIndex':'number',...rt('iridescenc'+'eThickness'),...rt('light'),'depthTest':'boolean','depthFunc':'enum:depth'+'Func','depthWrite':'boolean','depthBias':'number','slopeDepthBias':'number','cull':'enum:cull','blendType':'enum:blend'+'Type','useFog':'boolean','useLighting':'boolean','useSkybox':'boolean','useTonemap':'boolean','envAtlas':'texture','twoSidedLighting':'boolean','shadowCatcher':'boolean'},ad=[];for(const l in Un)Un[l]==='texture'&&ad['push'](l);const Bp=[];for(const l in Un)Un[l]==='cubemap'&&Bp['push'](l);const FE={'aoMapVertexColor':'boolean','diffuseMapTint':'boolean','diffuseMapVertexColor':'boolean','emissiveMapTint':'boolean','emissiveMapVertexColor':'boolean','glossMapVertexColor':'boolean','metalnessMapVertexColor':'boolean','opacityMapVertexColor':'boolean','specularAntialias':'boolean','specularMapTint':'boolean','specularMapVertexColor':'boolean','ambientTint':'boolean','emissiveTint':'boolean','diffuseTint':'boolean','sheenTint':'boolean','conserveEnergy':'boolean','useGamma':'boolean','useGammaTonemap':'boolean','sheenGlossTint':'boolean','anisotropy':'boolean'},Pc={},Hy={};let Jn=new Set();const ql=new ie();class Ut extends er{constructor(){super(),h(this,'userAttrib'+'utes',new Map()),h(this,'onUpdateSh'+'ader'),(this['_assetRefe'+'rences']={},this['_activePar'+'ams']=new Set(),this['_activeLig'+'htingParam'+'s']=new Set(),this['shaderOptB'+'uilder']=new OE(),this['reset']());}['reset'](){Object['keys'](Pc)['forEach'](_0x1d12e9=>{this['_'+_0x1d12e9]=Pc[_0x1d12e9]['value']();}),this['_uniformCa'+'che']={};}['copy'](_0x1247b7){return super['copy'](_0x1247b7),Object['keys'](Pc)['forEach'](_0x53d6a4=>{this[_0x53d6a4]=_0x1247b7[_0x53d6a4];}),this['userAttrib'+'utes']=new Map(_0x1247b7['userAttrib'+'utes']),this;}['setAttribu'+'te'](_0x186920,_0x3ef64d){this['userAttrib'+'utes']['set'](_0x3ef64d,_0x186920);}['_setParame'+'ter'](_0x4dc532,_0x5c921d){Jn['add'](_0x4dc532),this['setParamet'+'er'](_0x4dc532,_0x5c921d);}['_setParame'+'ters'](_0x5bd3dc){_0x5bd3dc['forEach'](_0x15d06a=>{this['_setParame'+'ter'](_0x15d06a['name'],_0x15d06a['value']);});}['_processPa'+'rameters'](_0x30f8a3){const _0x213b2b=this[_0x30f8a3];_0x213b2b['forEach'](_0x14a45e=>{Jn['has'](_0x14a45e)||delete this['parameters'][_0x14a45e];}),this[_0x30f8a3]=Jn,Jn=_0x213b2b,Jn['clear']();}['_updateMap'](_0x54e15a){const _0x159c96=_0x54e15a+'Map',_0x1b0d4e=this[_0x159c96];if(_0x1b0d4e){this['_setParame'+'ter']('texture_'+_0x159c96,_0x1b0d4e);const _0x4d52ee=_0x159c96+'Transform',_0x1e7a55=this['getUniform'](_0x4d52ee);_0x1e7a55&&this['_setParame'+'ters'](_0x1e7a55);}}['_allocUnif'+'orm'](_0x479339,_0x320e5f){let _0x130efb=this['_uniformCa'+'che'][_0x479339];return _0x130efb||(_0x130efb=_0x320e5f(),this['_uniformCa'+'che'][_0x479339]=_0x130efb),_0x130efb;}['getUniform'](_0x3573a6,_0x181d6d,_0x273dc5){return Hy[_0x3573a6](this,_0x181d6d,_0x273dc5);}['updateUnif'+'orms'](_0x4d2a2d,_0xffbdfa){const _0x264816=_0xb58e55=>this['getUniform'](_0xb58e55,_0x4d2a2d,_0xffbdfa);this['_setParame'+'ter']('material_a'+'mbient',_0x264816('ambient')),this['_setParame'+'ter']('material_d'+'iffuse',_0x264816('diffuse')),this['_setParame'+'ter']('material_a'+'oIntensity',this['aoIntensit'+'y']),this['useMetalne'+'ss']?((!this['metalnessM'+'ap']||this['metalness']<0x12d4+-0x2*0x36d+-0x265*0x5)&&this['_setParame'+'ter']('material_m'+'etalness',this['metalness']),(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x264816('specular')),(!this['specularit'+'yFactorMap']||this['specularit'+'yFactorTin'+'t'])&&this['_setParame'+'ter']('material_s'+'pecularity'+'Factor',this['specularit'+'yFactor']),this['_setParame'+'ter']('material_s'+'heen',_0x264816('sheen')),this['_setParame'+'ter']('material_s'+'heenGloss',this['sheenGloss']),this['_setParame'+'ter']('material_r'+'efractionI'+'ndex',this['refraction'+'Index'])):(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x264816('specular')),this['enableGGXS'+'pecular']&&(this['_setParame'+'ter']('material_a'+'nisotropyI'+'ntensity',this['anisotropy'+'Intensity']),this['_setParame'+'ter']('material_a'+'nisotropyR'+'otation',[Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']),Math['sin'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD'])])),this['clearCoat']>-0xc07*-0x1+-0x10f*-0x3+-0xf34&&(this['_setParame'+'ter']('material_c'+'learCoat',this['clearCoat']),this['_setParame'+'ter']('material_c'+'learCoatGl'+'oss',this['clearCoatG'+'loss']),this['_setParame'+'ter']('material_c'+'learCoatBu'+'mpiness',this['clearCoatB'+'umpiness'])),this['_setParame'+'ter']('material_g'+'loss',this['gloss']),w['call'](()=>{this['emissiveMa'+'p']&&this['emissive']['r']===0xdce*0x1+0xd38+0x2*-0xd83&&this['emissive']['g']===0x819*0x3+-0x1*-0x1f30+-0x377b&&this['emissive']['b']===-0x55*0xd+0x239+-0x2*-0x10c&&w['warnOnce']('Emissive\x20m'+'ap\x20is\x20set\x20'+'but\x20emissi'+'ve\x20color\x20i'+'s\x20black,\x20m'+'aking\x20the\x20'+'map\x20invisi'+'ble.\x20Set\x20e'+'missive\x20co'+'lor\x20to\x20whi'+'te\x20to\x20make'+'\x20the\x20map\x20v'+'isible.\x20Re'+'ndering\x20['+Q['toString']()+']',this);}),this['_setParame'+'ter']('material_e'+'missive',_0x264816('emissive')),this['_setParame'+'ter']('material_e'+'missiveInt'+'ensity',this['emissiveIn'+'tensity']),this['refraction']>0xe91*0x1+-0x166c+0x7db&&this['_setParame'+'ter']('material_r'+'efraction',this['refraction']),this['dispersion']>-0x1*0x10a5+-0x16b*-0x5+-0x1*-0x98e&&this['_setParame'+'ter']('material_d'+'ispersion',this['dispersion']),this['useDynamic'+'Refraction']&&(this['_setParame'+'ter']('material_t'+'hickness',this['thickness']),this['_setParame'+'ter']('material_a'+'ttenuation',_0x264816('attenuatio'+'n')),this['_setParame'+'ter']('material_i'+'nvAttenuat'+'ionDistanc'+'e',this['attenuatio'+'nDistance']===0x557*-0x7+-0x12*-0xa9+0x197f?-0x1576+-0x211+-0x13*-0x13d:(0x238f+0x1*0x4cc+0x409*-0xa)/this['attenuatio'+'nDistance'])),this['useIridesc'+'ence']&&(this['_setParame'+'ter']('material_i'+'ridescence',this['iridescenc'+'e']),this['_setParame'+'ter']('material_i'+'ridescence'+'Refraction'+'Index',this['iridescenc'+'eRefractio'+'nIndex']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'in',this['iridescenc'+'eThickness'+'Min']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'ax',this['iridescenc'+'eThickness'+'Max'])),this['_setParame'+'ter']('material_o'+'pacity',this['opacity']),this['opacityFad'+'esSpecular']===!(0x13*0x1b5+-0x1*-0x193b+-0x39a9)&&this['_setParame'+'ter']('material_a'+'lphaFade',this['alphaFade']),this['occludeSpe'+'cular']&&this['_setParame'+'ter']('material_o'+'ccludeSpec'+'ularIntens'+'ity',this['occludeSpe'+'cularInten'+'sity']),this['cubeMapPro'+'jection']===wy&&this['_setParame'+'ter'](_0x264816('cubeMapPro'+'jectionBox'));for(const _0x3f1171 in Sn)this['_updateMap'](_0x3f1171);this['ambientSH']&&this['_setParame'+'ter']('ambientSH['+'0]',this['ambientSH']),this['normalMap']&&this['_setParame'+'ter']('material_b'+'umpiness',this['bumpiness']),this['normalMap']&&this['normalDeta'+'ilMap']&&this['_setParame'+'ter']('material_n'+'ormalDetai'+'lMapBumpin'+'ess',this['normalDeta'+'ilMapBumpi'+'ness']),this['heightMap']&&this['_setParame'+'ter']('material_h'+'eightMapFa'+'ctor',_0x264816('heightMapF'+'actor')),this['envAtlas']&&this['cubeMap']?(this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap'])):this['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']):this['cubeMap']?this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap']):this['sphereMap']&&this['_setParame'+'ter']('texture_sp'+'hereMap',this['sphereMap']),this['_setParame'+'ter']('material_r'+'eflectivit'+'y',this['reflectivi'+'ty']),this['_processPa'+'rameters']('_activePar'+'ams'),super['updateUnif'+'orms'](_0x4d2a2d,_0xffbdfa);}['updateEnvU'+'niforms'](_0x11ecf4,_0x17b3a0){!(this['envAtlas']||this['cubeMap']||this['sphereMap'])&&this['useSkybox']&&(_0x17b3a0['envAtlas']&&_0x17b3a0['skybox']?(this['_setParame'+'ter']('texture_en'+'vAtlas',_0x17b3a0['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',_0x17b3a0['skybox'])):_0x17b3a0['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',_0x17b3a0['envAtlas']):_0x17b3a0['skybox']&&this['_setParame'+'ter']('texture_cu'+'beMap',_0x17b3a0['skybox'])),this['_processPa'+'rameters']('_activeLig'+'htingParam'+'s');}['getShaderV'+'ariant'](_0x3c2ba6){const {device:_0x5ec6b9,scene:_0x113341,pass:_0x2a2686,objDefs:_0x3bc372,sortedLights:_0x4c08e8,cameraShaderParams:_0x48265d}=_0x3c2ba6;this['updateEnvU'+'niforms'](_0x5ec6b9,_0x113341);const _0x20aee8=Si['get'](_0x5ec6b9)['getByIndex'](_0x2a2686),_0x1b0c10=_0x2a2686===Wn||_0x2a2686===vl||_0x20aee8['isShadow'];let _0x238fb5=_0x1b0c10?Id['optionsCon'+'textMin']:Id['optionsCon'+'text'];_0x238fb5['defines']=$t['getCoreDef'+'ines'](this,_0x3c2ba6),_0x1b0c10?this['shaderOptB'+'uilder']['updateMinR'+'ef'](_0x238fb5,_0x113341,this,_0x3bc372,_0x2a2686,_0x4c08e8):this['shaderOptB'+'uilder']['updateRef'](_0x238fb5,_0x113341,_0x48265d,this,_0x3bc372,_0x2a2686,_0x4c08e8),this['useFog']||_0x238fb5['defines']['set']('FOG','NONE'),_0x238fb5['defines']['set']('TONEMAP',by[_0x238fb5['litOptions']['toneMap']]),this['onUpdateSh'+'ader']&&(_0x238fb5=this['onUpdateSh'+'ader'](_0x238fb5));const _0x5f3f83=new rd(_0x3c2ba6['viewUnifor'+'mFormat'],_0x3c2ba6['viewBindGr'+'oupFormat'],_0x3c2ba6['vertexForm'+'at']),_0x3e16cf=Nn(_0x5ec6b9);_0x3e16cf['register']('standard',Id);const _0x4412c8=_0x3e16cf['getProgram']('standard',_0x238fb5,_0x5f3f83,this['userId']);return this['_dirtyShad'+'er']=!(-0x287*-0x1+-0x6a*-0x7+-0x56c),_0x4412c8;}['destroy'](){for(const _0x4fd5a3 in this['_assetRefe'+'rences'])this['_assetRefe'+'rences'][_0x4fd5a3]['_unbind']();this['_assetRefe'+'rences']=null,super['destroy']();}}h(Ut,'TEXTURE_PA'+'RAMETERS',ad),h(Ut,'CUBEMAP_PA'+'RAMETERS',Bp);const nd=(_0xbba9f6,_0x582d03)=>{Hy[_0xbba9f6]=_0x582d03;},zp=(_0x4180c1,_0x1219a3,_0x4a4584,_0xd60c11)=>{Object['defineProp'+'erty'](Ut['prototype'],_0x4180c1,{'get':_0xd60c11||function(){return this['_'+_0x4180c1];},'set':_0x4a4584}),Pc[_0x4180c1]={'value':_0x1219a3};},NE=_0x5bd59c=>{const _0x38fc74='_'+_0x5bd59c['name'],_0x2ecada=_0x5bd59c['dirtyShade'+'rFunc']||(()=>!(0x3b*-0x5e+-0x69*-0x53+-0xc61)),_0x108bf3=function(_0x23cfe6){const _0x14034c=this[_0x38fc74];_0x14034c!==_0x23cfe6&&(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x2ecada(_0x14034c,_0x23cfe6),this[_0x38fc74]=_0x23cfe6);};zp(_0x5bd59c['name'],()=>_0x5bd59c['defaultVal'+'ue'],_0x108bf3,_0x5bd59c['getterFunc']);},kE=_0x1c47dc=>{const _0x54206c='_'+_0x1c47dc['name'],_0x55ed79=_0x1c47dc['dirtyShade'+'rFunc']||(()=>!(0x1361+0x1*0xc2e+-0x1f8f)),_0x2fc767=function(_0x4f2242){const _0x3cdcc8=this[_0x54206c];_0x3cdcc8['equals'](_0x4f2242)||(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x55ed79(_0x3cdcc8,_0x4f2242),this[_0x54206c]=_0x3cdcc8['copy'](_0x4f2242));};zp(_0x1c47dc['name'],()=>_0x1c47dc['defaultVal'+'ue']['clone'](),_0x2fc767,_0x1c47dc['getterFunc']);},Es=_0x35f69f=>_0x35f69f['defaultVal'+'ue']&&_0x35f69f['defaultVal'+'ue']['clone']?kE(_0x35f69f):NE(_0x35f69f);function et(_0x5d1f63,_0x6f6a60='rgb',_0x71d555=!(0xcf2+0xb6a+-0x185c),_0x3da177=0xae8+-0xc5e+0x16*0x11){Sn[_0x5d1f63]=_0x6f6a60['length']||-(-0x9af*-0x1+-0x914+0xb*-0xe),Es({'name':_0x5d1f63+'Map','defaultValue':null,'dirtyShaderFunc':(_0x4d87b7,_0x4365ff)=>!!_0x4d87b7!=!!_0x4365ff||_0x4d87b7&&(_0x4d87b7['type']!==_0x4365ff['type']||_0x4d87b7['format']!==_0x4365ff['format'])}),Es({'name':_0x5d1f63+'MapTiling','defaultValue':new J(-0x2218+0x155*-0x1b+0x4610,0x6b7+0x24bc+0xa6*-0x43)}),Es({'name':_0x5d1f63+'MapOffset','defaultValue':new J(-0x1b4c+0x587*-0x2+0x265a,-0xbe7+0x10*0x1f+0x9f7)}),Es({'name':_0x5d1f63+('MapRotatio'+'n'),'defaultValue':0x0}),Es({'name':_0x5d1f63+'MapUv','defaultValue':_0x3da177}),_0x6f6a60&&(Es({'name':_0x5d1f63+'MapChannel','defaultValue':_0x6f6a60}),_0x71d555&&(Es({'name':_0x5d1f63+('VertexColo'+'r'),'defaultValue':!(0xb*-0x13f+0x1*-0x2268+0x301e)}),Es({'name':_0x5d1f63+('VertexColo'+'rChannel'),'defaultValue':_0x6f6a60})));const _0x27a5e2=_0x5d1f63+'MapTiling',_0x2c97d2=_0x5d1f63+'MapOffset',_0x161eaa=_0x5d1f63+('MapRotatio'+'n'),_0x16c1de=_0x5d1f63+('MapTransfo'+'rm');nd(_0x16c1de,(_0x45d66f,_0xcc6f1d,_0x4968d8)=>{const _0x5546f0=_0x45d66f[_0x27a5e2],_0x9083ee=_0x45d66f[_0x2c97d2],_0x2d8dcc=_0x45d66f[_0x161eaa];if(_0x5546f0['x']===0x203d*0x1+-0x1194+-0xea8&&_0x5546f0['y']===-0x269c+-0x2398+0x4a35&&_0x9083ee['x']===-0x23a3*0x1+-0x1e22+0x95*0x71&&_0x9083ee['y']===-0x19c3+-0x959*-0x1+0x835*0x2&&_0x2d8dcc===0xb71*0x3+0x31a*0x3+0x33*-0xdb)return null;const _0x1e591a=_0x45d66f['_allocUnif'+'orm'](_0x16c1de,()=>[{'name':'texture_'+_0x16c1de+'0','value':new Float32Array(-0x1ed1+-0x1911+0x37e5)},{'name':'texture_'+_0x16c1de+'1','value':new Float32Array(0x24ca+-0x63f+-0x1e88)}]),_0x3e7d78=Math['cos'](_0x2d8dcc*Y['DEG_TO_RAD']),_0x454098=Math['sin'](_0x2d8dcc*Y['DEG_TO_RAD']),_0x19ac98=_0x1e591a[0x2*-0x583+-0x2b6+0xdbc]['value'];_0x19ac98[-0x10a3+-0x3a*-0x88+0xbf*-0x13]=_0x3e7d78*_0x5546f0['x'],_0x19ac98[-0x17b2+0x127+0x168c]=-_0x454098*_0x5546f0['y'],_0x19ac98[-0x791*-0x2+0x1b77+0x1*-0x2a97]=_0x9083ee['x'];const _0x9117eb=_0x1e591a[0x11*0x23b+-0x370+-0x227a]['value'];return _0x9117eb[0x162b+0xab5*0x1+-0x20e0]=_0x454098*_0x5546f0['x'],_0x9117eb[-0x12a9*0x1+-0x16e6+-0x4*-0xa64]=_0x3e7d78*_0x5546f0['y'],_0x9117eb[0x2*0x6b+-0x10d*0x1f+-0xa95*-0x3]=-0x1eb6+-0x496*0x5+0x1*0x35a5-_0x5546f0['y']-_0x9083ee['y'],_0x1e591a;});}function Pa(_0x53a4cd,_0x4e4e17){Es({'name':_0x53a4cd,'defaultValue':_0x4e4e17,'getterFunc':function(){return this['_dirtyShad'+'er']=!(-0x1174+0x212c+-0xfb8),this['_'+_0x53a4cd];}}),nd(_0x53a4cd,(_0x274fed,_0x5e9986,_0x5450a3)=>{const _0x2a4bf9=_0x274fed['_allocUnif'+'orm'](_0x53a4cd,()=>new Float32Array(-0x1e2d+-0x1bc7+0x39f7)),_0x8e609b=_0x274fed[_0x53a4cd];return ql['linear'](_0x8e609b),_0x2a4bf9[-0x8*0x9+0xc*-0x2f+0x27c]=ql['r'],_0x2a4bf9[-0x1a6b+-0x394*-0x2+0x1344]=ql['g'],_0x2a4bf9[0xa85+0x1e9d*-0x1+0xa0d*0x2]=ql['b'],_0x2a4bf9;});}function ze(_0x305c30,_0x8f738b,_0x182c97){Es({'name':_0x305c30,'defaultValue':_0x8f738b,'dirtyShaderFunc':(_0x19b9da,_0x46e4e7)=>(_0x19b9da===-0x178f+0x1*-0x1c81+0x3410||_0x19b9da===-0x26d7+-0x1daf*0x1+0x4487)!=(_0x46e4e7===0xf94+0x1fbb+-0x16f*0x21||_0x46e4e7===0x1*0xa39+-0x717+-0x3*0x10b)}),nd(_0x305c30,_0x182c97);}function eo(_0x2630ad,_0x5b77bb){Es({'name':_0x2630ad,'defaultValue':null,'dirtyShaderFunc':(_0x54cee9,_0x1c2be4)=>!!_0x54cee9==!!_0x1c2be4}),nd(_0x2630ad,_0x5b77bb);}function ke(_0x227855,_0x1acbf5){Es({'name':_0x227855,'defaultValue':_0x1acbf5});}function UE(){Pa('ambient',new ie(0x1a03+-0x12*0x110+-0x6e2,0x11f3+-0x1e7f+0x165*0x9,0x5e4+-0x1a3c+0x1459)),Pa('diffuse',new ie(-0xc2c*-0x1+-0x1cf8+0x10cd,0xeca+-0x2ab*0x7+0x3e4,0x14f2+-0x725+-0xdcc)),Pa('specular',new ie(-0x1620+0x155f+0xc1,0x13d1+-0x13d5*-0x1+0x3a*-0xaf,-0xe6+-0x126*0x4+0x57e)),Pa('emissive',new ie(-0xb89*-0x2+0x1ae*0x5+-0x1a8*0x13,-0x1*-0xb2b+0x1223+0x1*-0x1d4e,0x1*-0x5bf+0x426+0x199)),Pa('sheen',new ie(-0x5*-0x557+-0x575+-0x153d,-0xe95+0x1778+-0x8e2,-0x21*-0x17+-0x2415+-0x3d*-0x8b)),Pa('attenuatio'+'n',new ie(0x2cd*-0x2+-0x1*-0x17e3+-0x1248,0x13a*-0x8+0x11+0x9c0,-0x1*-0x9b3+-0x70d*0x5+0x198f)),ze('emissiveIn'+'tensity',0x10fe+0x7*-0x3d3+0x9c8),ze('specularit'+'yFactor',-0x1ef2+-0xb3*-0x16+-0x31d*-0x5),ze('sheenGloss',0x1*0x72+-0xb7b+0x19*0x71),ze('gloss',-0x1a33+-0x1b09+0x353c+0.25),ze('aoIntensit'+'y',0x1*0x903+-0x2d8+-0x62a),ze('heightMapF'+'actor',-0xb*0x249+-0x24a1+0x1*0x3dc5,(_0x408c9f,_0x27b04e,_0x586348)=>_0x408c9f['heightMapF'+'actor']*(0x211c+0x1*-0x1bf7+-0x525+0.025)),ze('opacity',-0x2*-0xae7+0x1*-0x937+-0x3*0x432),ze('alphaFade',0x13*-0x1df+-0x1*-0xbfe+0x1790),ze('alphaTest',0x1eea+0x14*-0x7a+0x187*-0xe),ze('bumpiness',0x308+-0x1113+0xe0c),ze('normalDeta'+'ilMapBumpi'+'ness',-0x3e1+0x1*0x2512+-0x2130),ze('reflectivi'+'ty',0x424*-0x7+-0x4*0x8e9+0x40a1),ze('occludeSpe'+'cularInten'+'sity',0x6ca+0x141*-0x11+0xe88),ze('refraction',-0x26cc+0x49*-0x3+0x27a7),ze('refraction'+'Index',(0x90d+0xbff+0x1*-0x150b)/(-0x6c8+0x231a+-0x1c51+0.5)),ze('dispersion',0x1112+0x1*0x1b8+0xa*-0x1e1),ze('thickness',0x251+0x86b*-0x1+0x61a),ze('attenuatio'+'nDistance',-0x2f*-0x83+-0xd5f+-0x2*0x557),ze('metalness',0x193e*0x1+-0xd*-0x20c+-0x33d9),ze('anisotropy'+'Intensity',-0x1c85+-0x1999+0x361e),ze('anisotropy'+'Rotation',-0x6c1+0x2ce+0x3f3),ze('clearCoat',0x1b53+0x418+-0x1f6b),ze('clearCoatG'+'loss',0x22a7*0x1+0x23d5+-0x467b),ze('clearCoatB'+'umpiness',-0x829*-0x2+0x11*0xdb+0xf6e*-0x2),ze('aoUvSet',-0x1ff4+-0xb3+0x20a7,null),ze('iridescenc'+'e',0x1*-0x7f+0x16*-0x61+-0x77*-0x13),ze('iridescenc'+'eRefractio'+'nIndex',(0x2*-0xc04+0x11cf+0x63a)/(-0x1f69+-0x1*-0x1ad7+0x493+0.5)),ze('iridescenc'+'eThickness'+'Min',0x1*-0x40c+-0x26a7+0x2ab3),ze('iridescenc'+'eThickness'+'Max',0xe9*0x2+-0x125*-0x17+-0x1c25),eo('ambientSH'),eo('cubeMapPro'+'jectionBox',(_0x4b9dad,_0x2f6418,_0x2d739f)=>{const _0x5e3df7=_0x4b9dad['_allocUnif'+'orm']('cubeMapPro'+'jectionBox',()=>[{'name':'envBoxMin','value':new Float32Array(0x16*0x46+0x1*-0x1a5f+0x9e*0x21)},{'name':'envBoxMax','value':new Float32Array(0x1b0d+0x1b51+-0x4f1*0xb)}]),_0x50a298=_0x4b9dad['cubeMapPro'+'jectionBox']['getMin'](),_0x43a1e9=_0x5e3df7[0x1efd+0x1fd6+-0x3ed3]['value'];_0x43a1e9[-0x5e6+0x11ea*-0x1+0x17d0]=_0x50a298['x'],_0x43a1e9[-0xead+0x249+0xc65]=_0x50a298['y'],_0x43a1e9[-0x4b8+-0xe82+0x133c]=_0x50a298['z'];const _0x30ae69=_0x4b9dad['cubeMapPro'+'jectionBox']['getMax'](),_0x492ba3=_0x5e3df7[0x1f6b+-0x1210*-0x1+-0x317a]['value'];return _0x492ba3[0x1e53+-0x12fd*-0x1+-0x3150]=_0x30ae69['x'],_0x492ba3[-0x12e1+-0x2ef*-0x4+0xa*0xb7]=_0x30ae69['y'],_0x492ba3[-0x2*-0xcf5+-0xc4e+-0xd9a]=_0x30ae69['z'],_0x5e3df7;}),ke('specularTi'+'nt',!(0x1*0x25b3+-0x257*-0xa+0x17*-0x2a8)),ke('specularit'+'yFactorTin'+'t',!(-0x1af+0x11d3+-0x9*0x1cb)),ke('useMetalne'+'ss',!(0xd9f+-0x167*-0x11+-0x2575)),ke('useMetalne'+'ssSpecular'+'Color',!(-0x1af1+0x12e*0x15+0x2*0x116)),ke('useSheen',!(0xa71+0x1*-0x301+-0x76f)),ke('enableGGXS'+'pecular',!(0x6df*-0x3+0x1809+0x5*-0xaf)),ke('occludeDir'+'ect',!(-0x281*-0x4+0xed8+-0x18db)),ke('opacityFad'+'esSpecular',!(0x55e+0x20b4*-0x1+0xdab*0x2)),ke('occludeSpe'+'cular',id),ke('fresnelMod'+'el',Tp),ke('useDynamic'+'Refraction',!(0xcf5+-0xc56*0x2+-0x19*-0x78)),ke('cubeMapPro'+'jection',Pp),ke('useFog',!(0xbf9*0x1+0x964+0x3*-0x71f)),ke('useLightin'+'g',!(0x29b*0x1+0x12dd*-0x1+0x1042)),ke('useTonemap',!(-0x179d+-0x1f1*-0x14+-0x30b*0x5)),ke('useSkybox',!(-0x114e+0x19a8*0x1+-0x42d*0x2)),ke('forceUv1',!(0x1f2f+0x2*-0xdc7+-0xe8*0x4)),ke('pixelSnap',!(-0x18b5+-0xb*0x22d+-0x7*-0x6f3)),ke('twoSidedLi'+'ghting',!(-0x13f*-0x7+-0x2*-0x397+-0xfe6)),ke('nineSliced'+'Mode',void(-0x5af*0x1+-0x46f*0x3+0x12fc)),ke('msdfTextAt'+'tribute',!(0x119+0x1*0x1f89+-0x20a1*0x1)),ke('useIridesc'+'ence',!(-0xc95*0x2+0x873+0x10b8)),ke('glossInver'+'t',!(-0x8b3*0x3+0xcbc+0xd5e)),ke('sheenGloss'+'Invert',!(-0x1*-0x1915+0x1ab*-0x17+0xd49)),ke('clearCoatG'+'lossInvert',!(0x666+0x3bc*-0xa+-0x8b*-0x39)),ke('opacityDit'+'her',ua),ke('opacitySha'+'dowDither',ua),ke('shadowCatc'+'her',!(-0x759+0x259d+-0x1e43)),et('diffuse'),et('specular'),et('emissive'),et('thickness','g'),et('specularit'+'yFactor','g'),et('normal',''),et('metalness','g'),et('gloss','g'),et('opacity','a'),et('refraction','g'),et('height','g',!(0x96*-0x18+-0x2012+0x2e23)),et('ao','g'),et('light','rgb',!(0x75*-0x1+0x4a2+-0x42d*0x1),-0xc7c+-0x1af*0x1+0xe2c),et('msdf',''),et('diffuseDet'+'ail','rgb',!(0x1*0x16f6+0x269c+-0x3d91)),et('normalDeta'+'il',''),et('aoDetail','g',!(0x208c+0x5dd+0x2668*-0x1)),et('clearCoat','g'),et('clearCoatG'+'loss','g'),et('clearCoatN'+'ormal',''),et('sheen','rgb'),et('sheenGloss','g'),et('iridescenc'+'e','g'),et('iridescenc'+'eThickness','g'),et('anisotropy',''),ke('diffuseDet'+'ailMode',Bm),ke('aoDetailMo'+'de',Bm),eo('cubeMap'),eo('sphereMap'),eo('envAtlas');const _0x97fc3d=function(){return this['_prefilter'+'edCubemaps'];},_0x2ef625=function(_0x18e675){const _0x580e21=this['_prefilter'+'edCubemaps'];_0x18e675=_0x18e675||[];let _0x1d5d58=!(0x21dd+0x1091*-0x2+-0xba),_0x5f534b=!(0x10c0+0x419*-0x1+-0x29*0x4f);for(let _0xe0d145=-0x1095+-0x11*0xe+-0x1183*-0x1;_0xe0d145<-0xd9c+-0x13dd+0x217f;++_0xe0d145){const _0x56613c=_0x18e675[_0xe0d145]||null;_0x580e21[_0xe0d145]!==_0x56613c&&(_0x580e21[_0xe0d145]=_0x56613c,_0x1d5d58=!(-0x9cf+0x8*0x6f+-0x657*-0x1)),_0x5f534b=_0x5f534b&&!!_0x580e21[_0xe0d145];}_0x1d5d58&&(_0x5f534b?this['envAtlas']=zy['generatePr'+'efilteredA'+'tlas'](_0x580e21,{'target':this['envAtlas']}):this['envAtlas']&&(this['envAtlas']['destroy'](),this['envAtlas']=null),this['_dirtyShad'+'er']=!(-0x1cab*-0x1+-0x30f+-0x199c));},_0x54d1e7=[null,null,null,null,null,null];zp('prefiltere'+'dCubemaps',()=>_0x54d1e7['slice'](),_0x2ef625,_0x97fc3d);}UE();const Rt=class Rt{static['render'](_0x4b50a8,_0x1657a3){const _0x3c820a=_0x1657a3['device'],_0x1d9875=_0x4b50a8['cells'],_0x3c5f0e=_0x4b50a8['lightsBuff'+'er'],_0x26e70c=_0x3c5f0e['boundsMin'],_0x58eb2c=_0x3c5f0e['boundsDelt'+'a'],_0x1fc183=_0x26e70c['clone']()['add'](_0x58eb2c),_0x33a7d0=_0x3c5f0e['boundsDelt'+'a']['clone']()['div'](_0x1d9875),_0x5437f6=Rt['gridPositi'+'ons'],_0x3e5cf2=Rt['gridColors'],_0x42884f=new ie(0x1*0x613+-0x66*0x1d+0x57b+0.3,-0x58+-0x3ca*-0x2+-0x4*0x1cf+0.3,0x1276+-0x1a5*-0x1+-0x1*0x141b+0.3),_0x3e6232=(_0x42d58f,_0x1015a1,_0x43618d,_0x468a36,_0x42ca71,_0x288a8a,_0x2abee6,_0x1813e6,_0x55159b)=>{for(let _0x4e90ac=0x905*-0x1+-0x6*-0x403+-0xf0d;_0x4e90ac<=_0x42d58f;_0x4e90ac++)for(let _0x4fd056=-0x17bc+0x1*-0x16ca+-0xf*-0x31a;_0x4fd056<=_0x1015a1;_0x4fd056++){const _0x267527=_0x43618d+_0x4e90ac*_0x468a36,_0x3dad19=_0x42ca71+_0x4fd056*_0x288a8a;_0x55159b===-0x1119+-0x1cad+0x2dc6?_0x5437f6['push'](_0x267527,_0x2abee6,_0x3dad19,_0x267527,_0x1813e6,_0x3dad19):_0x55159b===0xbd9+0x74c+-0x62*0x32?_0x5437f6['push'](_0x267527,_0x3dad19,_0x2abee6,_0x267527,_0x3dad19,_0x1813e6):_0x55159b===0x11d9*0x1+-0x2354+-0x117d*-0x1&&_0x5437f6['push'](_0x2abee6,_0x267527,_0x3dad19,_0x1813e6,_0x267527,_0x3dad19);}};if(_0x3e6232(_0x1d9875['x'],_0x1d9875['z'],_0x26e70c['x'],_0x33a7d0['x'],_0x26e70c['z'],_0x33a7d0['z'],_0x26e70c['y'],_0x1fc183['y'],-0x1135+0x2*-0xacf+0x1*0x26d3),_0x3e6232(_0x1d9875['x'],_0x1d9875['y'],_0x26e70c['x'],_0x33a7d0['x'],_0x26e70c['y'],_0x33a7d0['y'],_0x26e70c['z'],_0x1fc183['z'],0x7*0x556+-0xce*0x5+-0x1*0x2153),_0x3e6232(_0x1d9875['y'],_0x1d9875['z'],_0x26e70c['y'],_0x33a7d0['y'],_0x26e70c['z'],_0x33a7d0['z'],_0x26e70c['x'],_0x1fc183['x'],0x25*0xe3+0x2*0x48b+-0x1*0x29e3),_0x5437f6['length']){const _0x5e1499=_0x5437f6['length']/(0x116f*-0x2+-0xa4b+0x2d2c);if(_0x5e1499!==_0x3e5cf2['length']/(-0x14b6+0x5*-0x4b7+-0x2c4d*-0x1)){_0x3e5cf2['length']=0x434*0x7+0xd45+-0x1*0x2ab1;for(let _0x4e8f9a=0x3cd+-0x769+0x54*0xb;_0x4e8f9a<_0x5e1499;_0x4e8f9a++)_0x3e5cf2['push'](_0x42884f['r'],_0x42884f['g'],_0x42884f['b'],_0x42884f['a']);}_0x1657a3['drawLineAr'+'rays'](_0x5437f6,_0x3e5cf2),_0x5437f6['length']=0x2*0x5b7+-0x2*-0x11f9+-0x2f60;}let _0x33618d=Rt['mesh'];_0x33618d||(_0x33618d=new Ge(_0x3c820a),_0x33618d['clear'](!(0xd3*-0x3+-0x1*-0x1c05+-0x198c),!(0x1fe1*0x1+-0x1*-0xbca+-0x2bab)),Rt['mesh']=_0x33618d);const _0x1a6383=[],_0x530e0e=[],_0x33d3bb=[],_0x231109=_0x4b50a8['_cells']['x'],_0x283f27=_0x4b50a8['_cells']['z'],_0x104223=_0x4b50a8['counts'],_0x6fd2fe=_0x4b50a8['_maxCellLi'+'ghtCount'],_0x5414f8=new D(),_0x5274ee=new D(),_0x3c25dc=new D(),_0x3947a0=_0x58eb2c['clone']()['div'](_0x1d9875);let _0x4c1cc2=0x1c6a+0x25b2+0x1*-0x421c;for(let _0x37f1d5=0x76e+-0x1e03*-0x1+-0x2571;_0x37f1d5<_0x1d9875['x'];_0x37f1d5++)for(let _0x274f12=-0x58+0x2359*-0x1+0x23b1*0x1;_0x274f12<_0x1d9875['z'];_0x274f12++)for(let _0x399714=-0x11a0+-0x129a*-0x2+-0x1394;_0x399714<_0x1d9875['y'];_0x399714++){const _0x170905=_0x37f1d5+_0x231109*(_0x274f12+_0x399714*_0x283f27),_0x3e1528=_0x104223[_0x170905];if(_0x3e1528>0x1659+-0xb19*-0x1+-0x2172){_0x5414f8['x']=_0x26e70c['x']+_0x3947a0['x']*_0x37f1d5,_0x5414f8['y']=_0x26e70c['y']+_0x3947a0['y']*_0x399714,_0x5414f8['z']=_0x26e70c['z']+_0x3947a0['z']*_0x274f12,_0x5274ee['add2'](_0x5414f8,_0x3947a0),_0x1a6383['push'](_0x5414f8['x'],_0x5414f8['y'],_0x5274ee['z']),_0x1a6383['push'](_0x5274ee['x'],_0x5414f8['y'],_0x5274ee['z']),_0x1a6383['push'](_0x5274ee['x'],_0x5274ee['y'],_0x5274ee['z']),_0x1a6383['push'](_0x5414f8['x'],_0x5274ee['y'],_0x5274ee['z']),_0x1a6383['push'](_0x5274ee['x'],_0x5414f8['y'],_0x5414f8['z']),_0x1a6383['push'](_0x5414f8['x'],_0x5414f8['y'],_0x5414f8['z']),_0x1a6383['push'](_0x5414f8['x'],_0x5274ee['y'],_0x5414f8['z']),_0x1a6383['push'](_0x5274ee['x'],_0x5274ee['y'],_0x5414f8['z']),_0x3c25dc['lerp'](Rt['colorLow'],Rt['colorHigh'],_0x3e1528/_0x6fd2fe)['round']();for(let _0xa191cf=-0x1ef0*-0x1+0x24cf+0x3*-0x1695;_0xa191cf<-0x3*-0x199+-0x1*0x1aaa+-0x7*-0x321;_0xa191cf++)_0x530e0e['push'](_0x3c25dc['x'],_0x3c25dc['y'],_0x3c25dc['z'],0x1*0x15fb+-0x1c1b+0x621);_0x33d3bb['push'](_0x4c1cc2*(-0x136c+-0xc1b+0x1f8f)+(0xe3*0x7+0xd75+-0x13aa),_0x4c1cc2*(-0x22e+-0x2e*-0x1f+0x14*-0x2b)+(-0x20b*0x5+0x7f6+-0x22*-0x11),_0x4c1cc2*(0x4f*0x42+0x295+0x16eb*-0x1)+(0xa9+-0x2*0xfc3+0x7b8*0x4)),_0x33d3bb['push'](_0x4c1cc2*(-0x3f0+0x1bd1+0xb*-0x22b)+(0x279+-0xd4d+-0x5*-0x22b),_0x4c1cc2*(0x2263*-0x1+-0x1b65+0x3dd0)+(0xe7d+-0x85e+0x1*-0x61e),_0x4c1cc2*(-0x1d*-0x105+-0x5bb*0x3+-0x14*0x9e)+(0x1dd7+-0x8b*-0x12+-0x279b)),_0x33d3bb['push'](_0x4c1cc2*(0x3d*-0x7f+0x20e6+-0x17*0x1d)+(0x1052+-0x669*-0x5+-0x305b),_0x4c1cc2*(-0xd2a+0x1*-0x150a+0x223c)+(0x12*-0x6d+-0x30f*0xb+0x211*0x14),_0x4c1cc2*(-0x254a+-0x1d2*0x13+0x5fe*0xc)+(0x4*0x78e+-0x1dec+-0x45)),_0x33d3bb['push'](_0x4c1cc2*(-0x10c6+0x2698+-0x15ca*0x1)+(-0xd*0x29b+0x22e3+-0xfd),_0x4c1cc2*(0x11c5+-0x21c8+0x100b)+(0x2*0x631+0x3*0x59d+-0x4*0x74d),_0x4c1cc2*(0xdac+-0x1*-0x1305+-0x20a9)+(0x3*-0x1dd+-0xef8*-0x2+-0x1853)),_0x33d3bb['push'](_0x4c1cc2*(-0x1ad9+-0xbd0+0x26b1)+(0x6*0x544+-0x240e+0x479),_0x4c1cc2*(-0x1dba+0x432*0x7+-0x1*-0x64)+(-0x13a4+0x39*-0x5c+0x1*0x2822),_0x4c1cc2*(-0x22*0x23+0x1*-0x14ad+0x195b)+(-0x100a+-0xe6e+-0x3*-0xa2a)),_0x33d3bb['push'](_0x4c1cc2*(-0x1a63+0x18f1*-0x1+0x2*0x19ae)+(0x1*0x1b84+-0x1d0e+0x18c),_0x4c1cc2*(-0x649*-0x1+0x17*-0x6b+0x35c)+(-0x2451+-0x1031+0x3489),_0x4c1cc2*(-0x2438+-0x4e2*0x4+0x6f9*0x8)+(-0x26f9+0x86*-0x30+-0x1d5*-0x23)),_0x33d3bb['push'](_0x4c1cc2*(-0x16f*-0x19+0x1*0xbe9+-0x2fb8)+(-0xbd1+0x282+0x950),_0x4c1cc2*(0x11b9+0x8fd*-0x2+0x49*0x1)+(0x1a3d+-0x1c39+0x1fc),_0x4c1cc2*(0x665*-0x6+-0x2c0*0x1+0x2926)+(0x9bc+0x93d+-0xd3*0x17)),_0x33d3bb['push'](_0x4c1cc2*(-0x198f+-0x1694+-0x461*-0xb)+(-0x135b*-0x1+-0xd*-0x163+-0x42*0x91),_0x4c1cc2*(-0xe3a+-0xbbf+0x1a01)+(-0x8a9*-0x3+-0x15f2+-0x404),_0x4c1cc2*(-0x1*-0x13f7+-0x8cd*-0x1+-0x4ca*0x6)+(0xaa+-0x375*0x3+-0x1*-0x9b9)),_0x33d3bb['push'](_0x4c1cc2*(0x786+0xf72+-0x16f0)+(-0xd6a*0x2+-0xd8b+-0x1430*-0x2),_0x4c1cc2*(-0x2055+0x7fc+0x1861)+(0x712+0x58a+-0x3e*0x34),_0x4c1cc2*(-0xd*-0x301+0xa1*-0x5+0x1*-0x23e0)+(-0x1dbd+0x24d1+-0x712*0x1)),_0x33d3bb['push'](_0x4c1cc2*(-0x1d2c+-0x3f6*-0x7+0x17a)+(0xe+-0x1*-0xb32+0x2cf*-0x4),_0x4c1cc2*(-0x1*0x1193+0x34*-0x95+-0x39*-0xd7)+(0x1e76+-0x2011*-0x1+-0x3e80),_0x4c1cc2*(0xbae+-0x175*0xe+0x8c0)+(0x170d+0x311*0x1+0x687*-0x4)),_0x33d3bb['push'](_0x4c1cc2*(0x20b1*-0x1+-0xf07+0x2fc0)+(-0x77e+-0x26e+-0x5*-0x1fd),_0x4c1cc2*(-0x3d1+0xb23+0x74a*-0x1)+(0x13d2+0x1c1f+-0x2ff1*0x1),_0x4c1cc2*(-0x2cd+0x1ca*0x4+0x7b*-0x9)+(0x2e9*-0xd+-0x8*0x494+0x4a7b)),_0x33d3bb['push'](_0x4c1cc2*(0x18*-0xe3+0x1364*-0x2+-0xf06*-0x4)+(0xa50+0x15*0x191+0x3*-0xe67),_0x4c1cc2*(0x2549+0x1d*-0xcb+-0xe42)+(-0x36*-0x8a+0x3*0x6b1+0x3*-0x1064),_0x4c1cc2*(-0x1*0xc42+0x1d7b+-0x1b*0xa3)+(0x9*-0x3a7+0xa71+-0x59d*-0x4)),_0x4c1cc2++;}}if(_0x4c1cc2){if(_0x33618d['setPositio'+'ns'](_0x1a6383),_0x33618d['setNormals'](new Float32Array(_0x1a6383['length'])),_0x33618d['setColors3'+'2'](_0x530e0e),_0x33618d['setIndices'](_0x33d3bb),_0x33618d['update'](qs,!(0x789+-0x1e56+0x2*0xb67)),!Rt['meshInstan'+'ce']){const _0x81f446=new Ut();_0x81f446['useLightin'+'g']=!(-0x4*0x8e+-0x23fe+0x2637),_0x81f446['emissive']=new ie(-0x1414+-0x3*0x7bb+0x2b46,0xca*-0x11+0xa89+0x2e2,-0x20b5+0x805+-0x12d*-0x15),_0x81f446['emissiveVe'+'rtexColor']=!(-0x2683+-0x262f+-0x2*-0x2659),_0x81f446['blendType']=sd,_0x81f446['depthWrite']=!(-0x37*-0xa9+-0x68*-0xe+-0x29fe),_0x81f446['update']();const _0x11d621=new Ie('WorldClust'+'ersDebug');_0x11d621['worldTrans'+'form']=te['IDENTITY'],_0x11d621['_dirtyWorl'+'d']=_0x11d621['_dirtyNorm'+'al']=!(0x595*-0x1+-0x2b*-0x4c+0x1*-0x72e),Rt['meshInstan'+'ce']=new He(_0x33618d,_0x81f446,_0x11d621),Rt['meshInstan'+'ce']['cull']=!(0xf01+0xc8e+0x1b8e*-0x1);}const _0x19f344=Rt['meshInstan'+'ce'];_0x1657a3['immediate']['drawMesh'](_0x19f344['material'],_0x19f344['node']['worldTrans'+'form'],null,_0x19f344,_0x1657a3['defaultDra'+'wLayer']);}}};h(Rt,'gridPositi'+'ons',[]),h(Rt,'gridColors',[]),h(Rt,'mesh',null),h(Rt,'meshInstan'+'ce',null),h(Rt,'colorLow',new D(0xd4e+0x4*-0x28d+-0x319,0x1bb7+-0x18a0+-0x316,-0x24*0xf4+0x1*-0x4ba+-0x1*-0x270b)),h(Rt,'colorHigh',new D(-0x13b0+-0x28*0xb3+0x2fd0,0x471*-0x6+0x22e5+-0x83f,-0x2180+0x1*-0x709+0xd83*0x3));let Uf=Rt;const BE='muPIHORMLN'+'DCz4DxVR/Z'+'vYfAUVEFR4'+'7KRIC4nwAA'+'AAAP7WxlhD'+'6Ci+2HCe7B'+'F8jRAPZwdH'+'2UPpI5PdLC'+'JdkvG4UTaN'+'DJ/0crAzne'+'71GCrb4kbd'+'MjjCEGzdX6'+'fNxDMLJq5x'+'keoIVTdfiZ'+'kodEeArmZm'+'p/FQzFjD4x'+'8iOW7Dg64n'+'+3mWqyEwLx'+'XT8zoJXfbw'+'8QJKDCaarU'+'YyTlMzNFHb'+'gUe9IQV7g4'+'YOgtSKpIFZ'+'J0qERm7u4P'+'pmiF89ktHW'+'CywaGmD6h+'+'hfh2/Zd8KY'+'lKqqo4Cem4'+'T42bT/Z9Fp'+'CQF1hhSjfB'+'zZ5XFn/y3j'+'egWC6u86Ku'+'ELRundQS/1'+'Rp+XuKKGIg'+'Rv3CvP5y74'+'9yqLlFO495'+'JOT3+f2CXg'+'d71npU0/Kj'+'jpkZucbJ5m'+'78IVyuSrSo'+'zc9jgBUhDr'+'z0hFsyb7LF'+'UH9//wJbBg'+'LdNWJZObfK'+'xrNt8TliLA'+'9w9sXFv6g2'+'6iXpf6r/Bq'+'cAusj/QzGB'+'ZuoUGeEtw8'+'BCXCZ3jUiw'+'4hvM18ZVql'+'UD3C40LAFX'+'W6FRjuAZGR'+'Nstb0/qVk4'+'skwyT+MHrv'+'RorI4rKHVM'+'WZmKyAkzL/'+'78u/9pMQuX'+'14pZN50b2P'+'Hn6fRxeaCQ'+'LsfT4dpvIk'+'WWFuFVENZI'+'h+8xgR6lU+'+'85W0PPdAu1'+'j99kcCG40J'+'BQa4JMyRzq'+'6qriOBLtqF'+'87vpCJan0W'+'EduVr/mOYk'+'S00urVA0mA'+'6M3031+GmG'+'mW48PaJDYO'+'EIb3bIXWPa'+'LoAOEinX1T'+'N3+/vwhG6n'+'qJu0TdHped'+'S7QsGZIoxH'+'3nQYYjQP1j'+'mbahlbNngw'+'5ogsGk1y50'+'XZyUmQBY+/'+'JBJ3Unu4dA'+'pm+WmPwHPU'+'9gLb+4mHh4'+'BiY6M86pq+'+'WeTyWdI3s0'+'CXPEtHGXZ8'+'zMZgUoyRom'+'Bi1VdazzuN'+'+WOmQ9Pa0Z'+'0tlNopUi8A'+'J4x2Xn4mmO'+'KEbXLxlbVs'+'Wu8XhuDGYF'+'OGCRVdSqDP'+'XrHU5SDdUl'+'ti3k5///SB'+'wzTMwK3L4a'+'1H7w4lnpEa'+'s6////AfX8'+('asyIBfeFXV'+'J3tgvxQ/bl'+'ZuUKyIODIf'+'r/UzdWNu7p'+'ciLBpdZRZ4'+'pIfZ1R6szq'+'+XNxkGG///'+'8EZFpu7VHA'+'hFWqHEOrB9'+'unw+YQa5o8'+'/9IR/V5/zq'+'+986rJSyfg'+'JKt2u9hxU1'+'wzyQWPjJGv'+'zG9+eWWxGF'+'OHVKqI4jBQ'+'ALwZZswesn'+'vZ2UmmkEXd'+'iRpz8B+oWE'+'7PY70ZTMnd'+'isYSXg2Tqo'+'I+3y9BxbnY'+'2Y4EfbdcRh'+'AvG59NqDEN'+'NYbxKvK5HJ'+'fPG5M+Wi2A'+'cpLVJrD6ca'+'iEOzgSoVNS'+'gQK8fm2M3z'+'GcF4xtClv/'+'8Hs9oD7C3j'+'itTATYNQxm'+'KqKf1LhIxz'+'f1bmfiNn7U'+'KFmcJu4sLq'+'VLwxGSue3t'+'aBEyknkw5h'+'XTsUCvqmmL'+'/f8n/w0giR'+'7Hu/9EHvpk'+'z3yuu64Tio'+'MkzdTJ30i0'+'+hFnQqW1+v'+'9mMwq+z9qG'+'X0UFu9Momv'+'VG2xod6vc1'+'2AAAAACq7s'+'Ga5qptFR0j'+'F3nQt/D+7P'+'ibKYahaxP3'+'hEixPbGi9n'+'wNf2LAa7Lk'+'EZRKxzXeCD'+'64Xpii5n+8'+'Kpg8eHIv7A'+'WXZltgMoGl'+'tmoJ0XGdOC'+'L8WkzphvR9'+'N2o3ARSZ42'+'l5e5Pe4B58'+'MCRlP3EKv+'+'mcloknH+ft'+'o5BWsmEutW'+'6KvjOVsznF'+'CktkSczVk4'+'aGvj9VXlRc'+'LeDoKG8RkB'+'gdcNG2bf8H'+'UL4MT2DM+a'+'r7NImJhKpx'+'akX4Vk0CnP'+'+/XNhl5UsP'+'0lXgeZXPoD'+'BMSW5An+DX'+'lTCO5FQGwS'+'PYwHLKYVIi'+'mEdAoVe49r'+'QLaaNcye5L'+'xU2/c5TijT'+'gJtD5eQQIe'+'1snxauj5jZ'+'sxJBUJdoP/'+'zqpjqv8qBr'+'uoPsVsP8N4'+'4PCUW5Dd0D'+'zqjSS/Dl5m'+'I9cn1w2ndN'+'/0KAEm1QAA'+'AACwu6KM/0'+'83IBbH5bPa'+'/9oHUwcU8I'+'9v3j6/v18Q'+'Yammrf+P6V'+'L///8BrpuM'+'3fOLCxaLNO'+'FNF1zPbPYT'+'P65ni6njft'+'4eVcyrVXRQ'+'Frs52tr35S'+'tiSp55edVD')+('CBC0H5rIfa'+'c6nzUwxQSt'+'7y15QoKb+5'+'zebEQUmVbr'+'PjXuUa19Ey'+'7sqXMiSUKH'+'aw72PJKDdr'+'utJoQr3u6l'+'EYJ8K0MakW'+'Kj9zjTFi4X'+'94TsKYco0G'+'rLeB60M6D8'+'M/80rhXUW8'+'iMequg8y5F'+'838WI0+gp3'+'GBN5Kj/xIO'+'xTWQuUaPV/'+'LwvARr1VH9'+'3BFgGZR1MF'+'W0Ua30GbYm'+'dnAgo9VWy8'+'SQtpDUgGE2'+'r2zq2eTEMC'+'L7sMKmE1hc'+'hVhuF/TCq9'+'iXKEm86kzO'+'f3Rp9ZnCxb'+'pDUj+FKNxV'+'yXe6pVZkRX'+'v/m95SnB/E'+'B8aME29N85'+'MtAcDoXWlo'+'r8De2Q5Dg1'+'tar+8wgiZu'+'fbMam81j//'+'ASUohoR/zS'+'h2KG4bvT6m'+'kIPz6C5/98'+'DC3LaWlaEZ'+'1zA5JORZRu'+'6J/a0GY285'+'sEYzw71YqO'+'T1ihAG0z5S'+'Dt1xNiDQWZ'+'dFpndArp6x'+'WhqSDkRb4k'+'SJEHb9liPv'+'w7uLV/6i5M'+'Vf//A9Qjr8'+'xkAEUh+KDI'+'+zdtJ68d6M'+'BOktg1iyp/'+'SCq8O9f5pb'+'amn1VVVQPR'+'TWqNBvhQKa'+'07s6P0lc9L'+'uu/3gw4Hey'+'OUfz8MxMwV'+'4UQhua+t9c'+'r4bz/nIB2w'+'nDSK1K7I94'+'M+s6C84hta'+'X/CNlMQUSs'+'2KJO+yaebf'+'TbkNX5yWcq'+'EJevo0vbKU'+'iETuFXiL01'+'9A3E+lmsyZ'+'MwXrXLLiQA'+'Z5t9+jI3Jo'+'bhJTMiDH5Z'+'OQ+8Jau555'+'5NMjHSscP9'+'qCVaa40doh'+'+1a3Ukf6jq'+'BmLddgh79/'+'fwTfCyqiul'+'dNkUoy+nUp'+'+4nerwg0Oj'+'tGv2x485PJ'+'OJvUEokNhY'+'IdWjpx7BWk'+'0VZGWOp3jS'+'FTJ2bnu6KC'+'duZtG/UcBC'+'9RZ3W/jMSf'+'SMw4Etr/Do'+'D/XYP2V5Ov'+'w+YoM3F5g2'+'dGLdvuG6Zk'+'VGLE6Dk5Zr'+'+sdSyGliJP'+'1y2OFf/KFO'+'0RWO+3gsGh'+'esTnfZVpTd'+'8/HwgO216g'+'waqo+vY3Tl'+'jfJWowY+i0'+'p0Os4SLn/1'+'wLqDHMlszg')+('gmT/D8MRFz'+'s+pLv6LNJS'+'sNZ/r41mWi'+'/rF6ZcKp/y'+'zJdK0VU44h'+'skq3RGpgO6'+'mIpJDsf/mZ'+'kFrz0yYOML'+'buaj/wp1v7'+'JMFM5eqvBh'+'mTd7U8frQA'+'tHtys4zgpj'+'ZmzUhOVTfN'+'NLifElGXAD'+'lqHGKrkBT/'+'nYwX8ZRm3R'+'jvyPvjKyEq'+'EGKUpVnvOG'+'x+NKPHiWM/'+'/ZDpDVGvvr'+'jmk8RPF/wi'+'YZD3+Us8YC'+'XjrVOfjdd1'+'UPAfjLp8jg'+'Sn4me7DPTp'+'z1Ggy9XL80'+'guFO7ECT10'+'AvILKfD18Q'+'x+KY/f8aRq'+'u0oOO8hfKR'+'FZa9PUJwCs'+'p6VdZz6LFk'+'m2b9Pl2LIi'+'fCwzRy7Tpd'+'G2uAtOxP2O'+'emY26bJMa9'+'ZGSLIRlMsg'+'pDpnDJwd0o'+'a5pQ13x1hr'+'Hf52HpulUW'+'onGWsfXZbS'+'QYKu9bnEN7'+'6ciQih0opN'+'3deDVrbrxo'+'rfVlnCmL1R'+'9zq3ePGWIv'+'21c7pW8kEi'+'FTM5JX8dAw'+'867s/60cf7'+'9/BH+MDFCZ'+'BHlz1L+qGO'+'Jf/1txhhmr'+'f3//As+RIJ'+'wevDb+fgNX'+'VeHw67QptZ'+'egayhrEwr5'+'Gy+EPo1RLa'+'MtPbqOZYoV'+'zXzwzjMFWZ'+'xyUG9YUIf6'+'////AQWy84'+'iAygLk9COt'+'Xt92+0mT/x'+'g0zMzMBeLk'+'b8y9SL2TDX'+'gSX422hDgp'+'GNLJyuPioA'+'+YJ91G8znr'+'pNqHkwYysc'+'aJDEc9Vc+j'+'4cXle3hvcd'+'2JqDQH2lBZ'+'xDn6mUTs0b'+'75raMvbs72'+'7codX01Anj'+'8f3wir9P2x'+'QaQ22v/TxC'+'MglKDFoTja'+'P01XTLgxnT'+'vPv02JgEUr'+'W6UDgOnobF'+'pLdvKdlypg'+'IzPcq14fgX'+'U5tvVW0FEs'+'7VRlsG1IyA'+'69fN4n+awH'+'hT34cE+xUv'+'dj86C8LgAs'+'FheTjI9Ht9'+'EyYAAAAAAV'+'BVKRx2wLgU'+'TI0/2QfyJo'+'2riRw3JDqz'+'EShmx/Lifo'+'6mRkQVbS7X'+'53t+EvKxcX'+'ogtdts31e9'+'MRHdcHgsA8'+'rt4/mt2unl'+'zQ/wsU8Gu7')+('+W6Oj7eD8E'+'QdDp5XlCsV'+'aS/AV/t5Zp'+'POHR3rGpyA'+'Je9IPV+xMr'+'BL1Oz/8MQh'+'Fs31h0N1cV'+'nq371uqIJY'+'HyafKH1jte'+'AK3VpMXBcu'+'C+yt0ZeKyR'+'UY4QhdrJJ4'+'tJ1wg3Hu6k'+'DsbovxupTM'+'kGdRrm8oZS'+'oYPbJ+PwH/'+'xotgTdkA12'+'05vUEfnqkI'+'04T/fnnd1f'+'iZW5AwNcgg'+'d7fi4j5zas'+'mcntZexIxq'+'FZQMzMJpfn'+'dmI5jn17cg'+'n5EV5t9XN0'+'C///8Q9wlJ'+'pMGXdoiaMT'+'G2sVyHQsn8'+'mWRISCLNG7'+'77S0OuDRP2'+'GlLcJ2UeOg'+'7Fo8hTNPeJ'+'//iTJhyqxh'+'KRUntdXOih'+'q2wfKfH///'+'8B0GGrwT+f'+'SOQRdctKxj'+'jGCSS11d6B'+'lQ9BDfE0J6'+'Z25FaNTKGp'+'FKNCMr2G/0'+'41KpWwBLVe'+'1k08vncseQ'+'bKZdXi8x1t'+'9XA45U/Wd4'+'3D9wAh3Tal'+'0aiLVzGPus'+'OZ1F+W3TWo'+'qlX/A95+dN'+'ef11TsuGfu'+'l+ctGssldk'+'3fqpfqh+43'+'XTxL42+leS'+'HoF/dWHYGX'+'6maqUEuLX7'+'UB+r/6Llr4'+'LKocbVIeu+'+'hB9QTPfz9f'+'CP8RyWmX4S'+'mbhMFsNtCi'+'jV7lVcwejL'+'Klvl0GfCnd'+'nWV7/39VBr'+'tTRuUx92ok'+'e3GBgKkC5f'+'dGK0YvNK+x'+'enKaDmsHDj'+'NFUM3NMz3Z'+'iXXFuLgojo'+'sPVCDEl2W5'+'BjX3Ms+j0G'+'SqACHmh0+R'+'PWyuNm/Qe8'+'vFf9AW7N1u'+'RaxWirrUyt'+'qEJnJ4/Flm'+'8hSoiZ2NQB'+'sS6w/yQlC4'+'gCaFo8q4ny'+'Y6AFdo4hiw'+'hBXzbNKKvZ'+'vktCjSCukR'+'R/BbYVbNwZ'+'i2Yh3hGodE'+'acLW8qijiW'+'JODf0P2bhf'+'aiPspPT4lY'+'JBgi/KfcFw'+'CfvyUIgkJO'+'v///8CG/JE'+'epRBLaMFE+'+'2TgrqsJXOV'+'OWHt6g/bFw'+'VLLMVBsMR5'+'0dis/39/Al'+'BX+/rMTJkU'+'QrnlxpR2iu'+'0Tp8tATkRY'+'GmDIrcAiRP'+'8PjoWIlb7/')+('0ecTdSCE9Y'+'58+a+n/Fov'+'JQTVF4F2jA'+'xMZhTgrM/K'+'VS5BQu6bVb'+'kWY5HXnxRs'+'hks3urDdW4'+'RkWp4M4TeL'+'mFK5KF/uHk'+'kiO5Kv96Ri'+'oH984v/CSD'+'BnG+BwlnU9'+'B+o7Y+0X0N'+'ob+0pLsStx'+'jvPXMy2eCp'+'zhOWV4XbOb'+'BHN4UE2sLQ'+'/DIqXhOzxV'+'f38GlTi6aG'+'7EnePO7TRJ'+'m9yOfUUcqq'+'1I2iQHrVDq'+'n3TUNRi/lM'+'w8KbMW/3/n'+'qCz/Ef8PoW'+'5Qxcz2yHR/'+'f78EPB2Stb'+'d+ZFmfNTUY'+'ILzsb9YNhp'+'aHcaymYrBi'+'NHmFE3Y4cc'+'YJ25Prqm7z'+'HobGHED8/9'+'3ZNlWro9vc'+'KivGZs31Ui'+'K1k5zjUhex'+'UgbqJb+fUT'+'jxce/7Zly8'+'a5KMC1fX5n'+'fjPgibdvzb'+'XV1jRT2asX'+'vmSAusaLdq'+'1TSIJ8fXIN'+'k5AtT34EWP'+'AsfP9IFQqM'+'5K11O6saoH'+'JA==');let zi=null;const Wy=()=>{if(!zi){const _0x42b0a2=atob(BE);zi=Uint8Array['from'](_0x42b0a2,_0x411af7=>_0x411af7['charCodeAt'](-0x19af+-0x209+-0x1*-0x1bb8));}},zE=()=>(Wy(),zi);class VE{constructor(_0x100af9=0x1*0x201a+-0x9ed+-0x162d){h(this,'seed',0x845*-0x3+0xa88+0xe47),(this['seed']=_0x100af9*(-0xfc8+-0xc45+0x1c11),Wy());}['_next'](){this['seed']=(this['seed']+(-0x2659*0x1+-0xd3d*0x1+0x339a))%zi['length'];}['value'](){return this['_next'](),zi[this['seed']]/(-0x47*0x9+-0x35*-0x3d+-0x923*0x1);}['vec4'](_0x530734=new re()){return this['_next'](),_0x530734['set'](zi[this['seed']],zi[this['seed']+(0x8d5+0x1*-0x24a0+0x1bcc)],zi[this['seed']+(0x1de0+0x10e5+-0x2ec3*0x1)],zi[this['seed']+(0xc3+0x9*-0x418+0x6e*0x54)])['mulScalar']((-0x4ac+-0x1935+-0x55*-0x5a)/(-0x1b21+0x5*-0xf1+0x20d5*0x1));}}const GE=[new D(-(-0x1e36+-0x1427+0x865*0x6),0x97*0x30+0x23bd+0x400d*-0x1,0x11c4+-0x7*-0x314+-0x2750),new D(-0x408*-0x2+0x1c9b*0x1+-0x1ee*0x13,-0x1a68+-0xb50+0x25b8,0x2*-0xffb+-0x21dd*0x1+0x41d3),new D(-0xe8f*0x1+-0x818+0x16a7,-(0x24ae+0x1*-0x177e+-0x9*0x177),-0xb99+-0x39f*-0x9+-0x14fe),new D(-0x239f+0x4de+0x1ec1,-0x24*0x79+0x4*-0x6bc+0x2bf5,0xfd+0x7*-0x26b+0xff0),new D(0x21db+0x6*-0x28a+-0x129f,0x26*0x101+0x4f4*0x6+0x49*-0xee,-(0x76*0x50+-0x20b4+-0x42b*0x1)),new D(0xb8c*0x1+0xf31+-0x1abd,0x1ba9+-0x9a*0x1f+0x3*-0x301,-0x14*0x1e3+0x12e3+0x12da)];class HE{constructor(){h(this,'colors',new Float32Array(-0x1cd*0x11+-0x73*0x2d+0x32e6));}['update'](_0x119955,_0x36d20c){const _0xcee405=this['colors'],{r:_0x3852e1,g:_0xbccb54,b:_0x48592c}=_0x119955;for(let _0x1398f6=-0x23ef+0x1*-0x261e+0x4a0d;_0x1398f6<0x1cdd+-0x587*-0x1+-0x225e;_0x1398f6++)_0xcee405[_0x1398f6*(0x33*-0x2b+0x1bcc+-0x1338)]=_0x3852e1,_0xcee405[_0x1398f6*(0x188f+-0x16*0x3f+-0x1322)+(0x6*0x54b+0x18cd+0x388e*-0x1)]=_0xbccb54,_0xcee405[_0x1398f6*(-0x5f+-0x7*-0x40f+-0x1c07)+(0x2077+0x4*0x771+-0x1*0x3e39)]=_0x48592c;for(let _0x3ad296=-0x22bb+0x2263*-0x1+-0x3*-0x170a;_0x3ad296<_0x36d20c['length'];_0x3ad296++){const _0x4c1268=_0x36d20c[_0x3ad296];if(_0x4c1268['_type']===ve)for(let _0x32ffe2=0x184a+0x1d*0x106+0xd7e*-0x4;_0x32ffe2<0x92e+0x32*0x93+-0x25de;_0x32ffe2++){const _0x3e7668=Math['max'](GE[_0x32ffe2]['dot'](_0x4c1268['_direction']),-0x147e+-0x261c+0x3a9a)*_0x4c1268['_intensity'],_0xc01d1=_0x4c1268['_color'];_0xcee405[_0x32ffe2*(-0x157e+0xe75*0x2+0x769*-0x1)]+=_0xc01d1['r']*_0x3e7668,_0xcee405[_0x32ffe2*(0x1d19+-0x8b5+-0x25*0x8d)+(0x1ecf*-0x1+-0x1e73+0x3d43*0x1)]+=_0xc01d1['g']*_0x3e7668,_0xcee405[_0x32ffe2*(-0x1*-0x1043+0x133+-0x1173)+(0x6a3*-0x5+-0x1c40+-0x3d71*-0x1)]+=_0xc01d1['b']*_0x3e7668;}}}}const WE=(_0x71593b,_0x54316b,_0x2bc3c3,_0xbb3e54)=>{const _0x5e76a3=new _e(_0x71593b,{'name':''+_0x54316b+_0x2bc3c3,'width':_0x2bc3c3,'height':_0x2bc3c3,'format':Ne,'addressU':yt,'addressV':yt,'type':Ms,'magFilter':Te,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(-0x1503+0x1b47+0x643*-0x1)});return _0x5e76a3['lock']()['set'](_0xbb3e54),_0x5e76a3['unlock'](),_0x5e76a3;},$E=new Kt(),XE=_0x53be46=>$E['get'](_0x53be46,()=>{const _0x1da51c=zE(),_0x351519=Math['sqrt'](_0x1da51c['length']/(-0x1fe3*-0x1+-0x2*-0x62e+-0x367*0xd));return WE(_0x53be46,'BlueNoise',_0x351519,_0x1da51c);});class ma{constructor(_0x5a2247,_0x1f287c){this['texture']=_0x5a2247,this['cached']=!(-0x5ac+0x7cc+-0x21f*0x1),this['renderTarg'+'ets']=_0x1f287c;}['destroy'](){this['texture']&&(this['texture']['destroy'](),this['texture']=null);const _0xe28bbc=this['renderTarg'+'ets'];for(let _0xd1ff9f=-0x7b4+-0x11e*0x1+0x469*0x2;_0xd1ff9f<_0xe28bbc['length'];_0xd1ff9f++)_0xe28bbc[_0xd1ff9f]['destroy']();this['renderTarg'+'ets']['length']=0x604+0xf2c+-0x1c4*0xc;}static['create'](_0x4febe4,_0x482d95){let _0x45c2df=null;return _0x482d95['_type']===Ke?_0x45c2df=this['createCube'+'map'](_0x4febe4,_0x482d95['_shadowRes'+'olution'],_0x482d95['_shadowTyp'+'e']):_0x45c2df=this['create2dMa'+'p'](_0x4febe4,_0x482d95['_shadowRes'+'olution'],_0x482d95['_shadowTyp'+'e']),_0x45c2df;}static['createAtla'+'s'](_0x2d6272,_0xdecf56,_0x348b5a){const _0xad4dc8=this['create2dMa'+'p'](_0x2d6272,_0xdecf56,_0x348b5a),_0x44dc0e=_0xad4dc8['renderTarg'+'ets'],_0x28aeba=_0x44dc0e[0x1*0x263f+-0x126a*0x2+-0x1*0x16b];for(let _0x6d0e57=-0x2b8+0x96e+-0x1*0x6b6;_0x6d0e57<0x1*-0x2531+0xdc+0x245a;_0x6d0e57++)_0x44dc0e['push'](_0x28aeba);return _0xad4dc8;}static['create2dMa'+'p'](_0x21d326,_0x48ebb3,_0x667e4e){var _0x1cf283;const _0x3d3f52=Xi['get'](_0x667e4e);w['assert'](_0x3d3f52);let _0x3b9540=_0x3d3f52['format'];_0x3b9540===Qi&&!_0x21d326['textureFlo'+'atRenderab'+'le']&&_0x21d326['textureHal'+'fFloatRend'+'erable']&&(_0x3b9540=Bh);const _0x5281a4=(_0x1cf283=Nt['get'](_0x3b9540))==null?void(0xc69+-0x1ca2+0x1039):_0x1cf283['name'];let _0x4dd39c=vt;_0x667e4e===Ap&&(_0x4dd39c=_0x21d326['extTexture'+'FloatLinea'+'r']?vt:Te),_0x667e4e===Xo&&(_0x4dd39c=Te);const _0x519fdc=new _e(_0x21d326,{'profilerHint':Pf,'format':_0x3b9540,'width':_0x48ebb3,'height':_0x48ebb3,'mipmaps':!(-0x1*0x1ee5+0x2*-0x899+0x3018),'minFilter':_0x4dd39c,'magFilter':_0x4dd39c,'addressU':ue,'addressV':ue,'name':'ShadowMap2'+'D_'+_0x5281a4});let _0x508968=null;return _0x3d3f52!=null&&_0x3d3f52['pcf']?(_0x519fdc['compareOnR'+'ead']=!(-0x1*0x18f2+-0xb5*0x35+0x1d*0x227),_0x519fdc['compareFun'+'c']=Gc,_0x508968=new gt({'depthBuffer':_0x519fdc})):_0x508968=new gt({'colorBuffer':_0x519fdc,'depth':!(0x1*0x1e6f+-0x264e+0x7df)}),_0x21d326['isWebGPU']&&(_0x508968['flipY']=!(-0x7*-0x8+0x2477+-0x1*0x24af)),new ma(_0x519fdc,[_0x508968]);}static['createCube'+'map'](_0x1b66f4,_0x5db9ec,_0x2b77ac){var _0x26a807;const _0x2da3f7=Xi['get'](_0x2b77ac);w['assert'](_0x2da3f7);const _0x24c7a7=(_0x26a807=Nt['get'](_0x2da3f7['format']))==null?void(0x4e5+0xd*-0x103+0x842):_0x26a807['name'],_0x4365a3=_0x2b77ac===Xo,_0x1c678f=_0x4365a3?Te:vt,_0xf56ccb=new _e(_0x1b66f4,{'profilerHint':Pf,'format':_0x2da3f7==null?void(0x42d*-0x7+0x23c1+-0x686):_0x2da3f7['format'],'width':_0x5db9ec,'height':_0x5db9ec,'cubemap':!(-0x3c7+-0x14dc+0x18a3),'mipmaps':!(0x10a*0x5+-0x1951+0x1420),'minFilter':_0x1c678f,'magFilter':_0x1c678f,'addressU':ue,'addressV':ue,'name':'ShadowMapC'+'ube_'+_0x24c7a7});_0x4365a3||(_0xf56ccb['compareOnR'+'ead']=!(0x4*-0x14b+0x25cc+-0x20a0),_0xf56ccb['compareFun'+'c']=Gc);const _0x39c1d2=[];for(let _0x13611c=0x1*0x1b43+-0x2545+0xa02;_0x13611c<0x2*0x247+0x21b5*-0x1+0x1d2d;_0x13611c++)_0x4365a3?_0x39c1d2['push'](new gt({'colorBuffer':_0xf56ccb,'face':_0x13611c,'depth':!(-0x2e7*0x3+0x258+0x65d)})):_0x39c1d2['push'](new gt({'depthBuffer':_0xf56ccb,'face':_0x13611c}));return new ma(_0xf56ccb,_0x39c1d2);}}const qE=[],jE=[],xi=new re(),Ld=new re();class Rd{constructor(_0x4a3555){this['size']=Math['floor'](_0x4a3555['w']*(-0x21e9*-0x1+0x500+-0x22e9*0x1)),this['used']=!(0xeee+-0x1c39+0xd4c),this['lightId']=-(0xbf*-0x10+0x1919+0x8*-0x1a5),this['rect']=_0x4a3555;}}class YE{constructor(_0x8c5dae){this['device']=_0x8c5dae,this['version']=0x207*-0xf+0x4*0xd9+0x1b06,this['shadowAtla'+'sResolutio'+'n']=0x13ec+-0x193d+0xd51*0x1,this['shadowAtla'+'s']=null,this['shadowEdge'+'Pixels']=-0x4*-0x92b+0xfd8*-0x1+-0x1*0x14d1,this['cookieAtla'+'sResolutio'+'n']=0x2166+0x11*-0x15a+0xc*-0xde,this['cookieAtla'+'s']=new _e(this['device'],{'name':'CookieAtla'+'s','width':this['cookieAtla'+'sResolutio'+'n'],'height':this['cookieAtla'+'sResolutio'+'n'],'format':_s,'cubemap':!(-0x7cd+-0x1e07+0x25d5),'mipmaps':!(0x1cee+0xef*0x25+-0x3f78),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue}),this['cookieRend'+'erTarget']=new gt({'colorBuffer':this['cookieAtla'+'s'],'depth':!(-0x201a+0xb*0xa3+0x191a),'flipY':!(-0x11c7+0x2418+-0x1251)}),this['slots']=[],this['atlasSplit']=[],this['cubeSlotsO'+'ffsets']=[new J(0x29*-0xbc+0xf74+0xea8,0x18e3+-0x3*0x9c2+0x463),new J(-0x240f*0x1+0x20af+0x360,0x1ce1+0x6d*0x25+-0x2ca1),new J(-0x219b+0xb8*0x5+-0x22*-0xe2,-0xaa1+0x15a+-0x1*-0x947),new J(-0x238d+0x1970+0xa1e,0x1fd4+0x49*0x1b+-0x2*0x13c3),new J(-0x1*-0x50d+-0x626+0x11b,0xacb*-0x1+-0x1bc3+0x268e),new J(-0x37*0x1+-0xb3b+0x5ba*0x2,0xaa*-0x37+0x627+0x1b0*0x12)],this['scissorVec']=new re(),this['allocateSh'+'adowAtlas'](0x1b45+-0x2*-0x61f+0x1*-0x2782),this['allocateCo'+'okieAtlas'](0x2024+0x195d+-0x3980),this['allocateUn'+'iforms']();}['destroy'](){this['destroySha'+'dowAtlas'](),this['destroyCoo'+'kieAtlas']();}['destroySha'+'dowAtlas'](){var _0x19582d;(_0x19582d=this['shadowAtla'+'s'])==null||_0x19582d['destroy'](),this['shadowAtla'+'s']=null;}['destroyCoo'+'kieAtlas'](){var _0x37b4b6,_0x3acb22;(_0x37b4b6=this['cookieAtla'+'s'])==null||_0x37b4b6['destroy'](),this['cookieAtla'+'s']=null,(_0x3acb22=this['cookieRend'+'erTarget'])==null||_0x3acb22['destroy'](),this['cookieRend'+'erTarget']=null;}['allocateSh'+'adowAtlas'](_0x1e99ea,_0x1628da=Ws){var _0x7c8d56;const _0x2a829b=(_0x7c8d56=this['shadowAtla'+'s'])==null?void(-0x225*-0x7+0x75*-0x5+-0xcba):_0x7c8d56['texture']['format'],_0x13f99c=Xi['get'](_0x1628da)['format'];if(!this['shadowAtla'+'s']||this['shadowAtla'+'s']['texture']['width']!==_0x1e99ea||_0x2a829b!==_0x13f99c){this['version']++,this['destroySha'+'dowAtlas'](),this['shadowAtla'+'s']=ma['createAtla'+'s'](this['device'],_0x1e99ea,_0x1628da),this['shadowAtla'+'s']['cached']=!(-0xfb3*-0x1+0x1*-0xf13+0x1*-0xa0);const _0x1be80a=(-0x3*-0x2e3+0x262e*-0x1+0x1d89)/this['shadowAtla'+'sResolutio'+'n'];this['scissorVec']['set'](_0x1be80a,_0x1be80a,-(-0x11b1+-0x196+0x1349*0x1)*_0x1be80a,-(-0x1e7b+0x1661+-0xc*-0xad)*_0x1be80a);}}['allocateCo'+'okieAtlas'](_0x1a9e2d){this['cookieAtla'+'s']['width']!==_0x1a9e2d&&(this['cookieRend'+'erTarget']['resize'](_0x1a9e2d,_0x1a9e2d),this['version']++);}['allocateUn'+'iforms'](){this['_shadowAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('shadowAtla'+'sTexture'),this['_shadowAtl'+'asParamsId']=this['device']['scope']['resolve']('shadowAtla'+'sParams'),this['_shadowAtl'+'asParams']=new Float32Array(0x256b+-0x8d7*0x3+0x4*-0x2b9),this['_cookieAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('cookieAtla'+'sTexture');}['updateUnif'+'orms'](){const _0x4171fc=this['shadowAtla'+'s']['renderTarg'+'ets'][0xc07*-0x1+-0x30*-0x78+-0xa79]['depthBuffe'+'r'];this['_shadowAtl'+'asTextureI'+'d']['setValue'](_0x4171fc),this['_shadowAtl'+'asParams'][-0x11ba*-0x2+-0x3*0x8cd+-0x90d]=this['shadowAtla'+'sResolutio'+'n'],this['_shadowAtl'+'asParams'][0xbc9*0x3+0x1c6*-0x3+-0x1e08]=this['shadowEdge'+'Pixels'],this['_shadowAtl'+'asParamsId']['setValue'](this['_shadowAtl'+'asParams']),this['_cookieAtl'+'asTextureI'+'d']['setValue'](this['cookieAtla'+'s']);}['subdivide'](_0x5c3fcd,_0x152780){let _0x146959=_0x152780['atlasSplit'];if(!_0x146959){const _0x9a431a=Math['ceil'](Math['sqrt'](_0x5c3fcd));_0x146959=jE,_0x146959[0x206a*0x1+0xa4*-0x7+-0x226*0xd]=_0x9a431a,_0x146959['length']=0xddb*0x2+0x82b+-0x2*0x11f0;}if(!((_0x460c46,_0x3f2e3a)=>_0x460c46['length']===_0x3f2e3a['length']&&_0x460c46['every']((_0x539da2,_0x4fbafa)=>_0x539da2===_0x3f2e3a[_0x4fbafa]))(_0x146959,this['atlasSplit'])){this['version']++,this['slots']['length']=-0x1*0xf07+0x1ce*-0x7+0x49*0x61,this['atlasSplit']['length']=0x1*-0x377+0x5*-0x4b5+0x1b00,this['atlasSplit']['push'](..._0x146959);const _0x206fcd=this['atlasSplit'][-0x1*-0x121+-0x1817+0x16f6];if(_0x206fcd>0x1a8e+0x1389+-0x22*0x15b){const _0x321702=(-0x2c8+0x17b3*0x1+-0x14ea)/_0x206fcd;for(let _0x3e56d0=0x12*-0xfb+-0x25f+0x1405;_0x3e56d0<_0x206fcd;_0x3e56d0++)for(let _0x5ccadb=0x14ac+0x19ee+-0x2e9a;_0x5ccadb<_0x206fcd;_0x5ccadb++){const _0x30b606=new re(_0x3e56d0*_0x321702,_0x5ccadb*_0x321702,_0x321702,_0x321702),_0x41f168=this['atlasSplit'][0x1596+0x12e3+0x38*-0xb9+_0x3e56d0*_0x206fcd+_0x5ccadb];if(_0x41f168>0x322*0x6+-0x1f*-0x71+0x2*-0x103d){for(let _0xed61fe=-0x129c+0x22f2+0x6*-0x2b9;_0xed61fe<_0x41f168;_0xed61fe++)for(let _0x29d079=-0xac8+-0x1*0x13e3+0x1eab*0x1;_0x29d079<_0x41f168;_0x29d079++){const _0x2dc0dc=_0x321702/_0x41f168,_0xed622d=new re(_0x30b606['x']+_0xed61fe*_0x2dc0dc,_0x30b606['y']+_0x29d079*_0x2dc0dc,_0x2dc0dc,_0x2dc0dc);this['slots']['push'](new Rd(_0xed622d));}}else this['slots']['push'](new Rd(_0x30b606));}}else this['slots']['push'](new Rd(new re(-0x200d+0x838*-0x4+0x40ed,0x1*0x1934+0x1c7a+-0x35ae,-0x956*-0x1+0x77*-0x49+0x5e*0x43,-0x2545*-0x1+-0x49*0x7d+-0x19f)));this['slots']['sort']((_0x28e5f3,_0xb9d5fb)=>_0xb9d5fb['size']-_0x28e5f3['size']);}}['collectLig'+'hts'](_0x3687ea,_0x5ed419){const _0x3e492d=_0x5ed419['cookiesEna'+'bled'],_0x190909=_0x5ed419['shadowsEna'+'bled'];let _0x415143=!(-0x1*-0x159+0x1eba+-0x2012),_0x1b9b34=!(0x83*0x13+0x3*0x503+-0x18c1);const _0x9a62ee=qE;return _0x9a62ee['length']=0x5*0x33b+0x1*0x1dde+0x231*-0x15,(_0x3e492d||_0x190909)&&(_0x39b22a=>{for(let _0x1a9032=0x1*0x1c36+-0x12ac*0x1+0x3*-0x32e;_0x1a9032<_0x39b22a['length'];_0x1a9032++){const _0x3142c4=_0x39b22a[_0x1a9032];if(_0x3142c4['visibleThi'+'sFrame']){const _0x221244=_0x190909&&_0x3142c4['castShadow'+'s'],_0x3a8a49=_0x3e492d&&!!_0x3142c4['cookie'];_0x415143||(_0x415143=_0x221244),_0x1b9b34||(_0x1b9b34=_0x3a8a49),(_0x221244||_0x3a8a49)&&_0x9a62ee['push'](_0x3142c4);}}})(_0x3687ea),_0x9a62ee['sort']((_0x114564,_0x4281d1)=>_0x4281d1['maxScreenS'+'ize']-_0x114564['maxScreenS'+'ize']),_0x415143&&this['allocateSh'+'adowAtlas'](this['shadowAtla'+'sResolutio'+'n'],_0x5ed419['shadowType']),_0x1b9b34&&this['allocateCo'+'okieAtlas'](this['cookieAtla'+'sResolutio'+'n']),(_0x415143||_0x1b9b34)&&this['subdivide'](_0x9a62ee['length'],_0x5ed419),_0x9a62ee;}['setupSlot'](_0x244b95,_0x1830ca){_0x244b95['atlasViewp'+'ort']['copy'](_0x1830ca);const _0x363d60=_0x244b95['numShadowF'+'aces'];for(let _0x4c5b5a=0x1*0x2f1+-0xc77*0x1+0x17*0x6a;_0x4c5b5a<_0x363d60;_0x4c5b5a++)if(_0x244b95['castShadow'+'s']||_0x244b95['_cookie']){if(xi['copy'](_0x1830ca),Ld['copy'](_0x1830ca),_0x244b95['_type']===Ze&&xi['add'](this['scissorVec']),_0x244b95['_type']===Ke){const _0x483696=xi['z']/(0x2*0x136c+-0xd*0x1fc+-0xd09*0x1),_0x14956c=this['cubeSlotsO'+'ffsets'][_0x4c5b5a];xi['x']+=_0x483696*_0x14956c['x'],xi['y']+=_0x483696*_0x14956c['y'],xi['z']=_0x483696,xi['w']=_0x483696,Ld['copy'](xi);}if(_0x244b95['castShadow'+'s']){const _0x58ecde=_0x244b95['getRenderD'+'ata'](null,_0x4c5b5a);_0x58ecde['shadowView'+'port']['copy'](xi),_0x58ecde['shadowScis'+'sor']['copy'](Ld);}}}['assignSlot'](_0x1f7fc3,_0x22c7a8,_0x30cf77){_0x1f7fc3['atlasViewp'+'ortAllocat'+'ed']=!(-0x4*-0x338+0x5*-0x1ed+-0x33f);const _0x1e66b0=this['slots'][_0x22c7a8];_0x1e66b0['lightId']=_0x1f7fc3['id'],_0x1e66b0['used']=!(0x1*-0x2441+-0x1d65+0x41a6),_0x30cf77&&(_0x1f7fc3['atlasSlotU'+'pdated']=!(-0x18cc+-0x1ed0+0x379c),_0x1f7fc3['atlasVersi'+'on']=this['version'],_0x1f7fc3['atlasSlotI'+'ndex']=_0x22c7a8);}['update'](_0x3fb170,_0x55cd55){this['shadowAtla'+'sResolutio'+'n']=_0x55cd55['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0x55cd55['cookieAtla'+'sResolutio'+'n'];const _0x3bd420=this['collectLig'+'hts'](_0x3fb170,_0x55cd55);if(_0x3bd420['length']>-0x944+-0x2*0x123+0xb8a){const _0xfdab99=this['slots'];for(let _0x137f50=0x1*0x1175+0x14f+-0x12c4;_0x137f50<_0xfdab99['length'];_0x137f50++)_0xfdab99[_0x137f50]['used']=!(-0x5*0x73c+-0x6fd+0x5*0x8a2);const _0x38f195=Math['min'](_0x3bd420['length'],_0xfdab99['length']);for(let _0x59f2b8=-0x12aa+0x2*0x6fb+0x1c*0x2b;_0x59f2b8<_0x38f195;_0x59f2b8++){const _0x4d86ee=_0x3bd420[_0x59f2b8];_0x4d86ee['castShadow'+'s']&&(_0x4d86ee['_shadowMap']=this['shadowAtla'+'s']);const _0x42b8cd=_0xfdab99[_0x4d86ee['atlasSlotI'+'ndex']];if(_0x4d86ee['atlasVersi'+'on']===this['version']&&_0x4d86ee['id']===(_0x42b8cd==null?void(-0x2*-0x12ae+0xd89+-0x10f7*0x3):_0x42b8cd['lightId'])){const _0x2999b4=_0xfdab99[_0x4d86ee['atlasSlotI'+'ndex']];_0x2999b4['size']===_0xfdab99[_0x59f2b8]['size']&&!_0x2999b4['used']&&this['assignSlot'](_0x4d86ee,_0x4d86ee['atlasSlotI'+'ndex'],!(0xbab+-0x2108+0x155e));}}let _0x221dc0=-0xd3d+-0x12d*0xe+0x1db3;for(let _0x3ae116=0xa9*0x33+0xf9a*-0x2+-0x277;_0x3ae116<_0x38f195;_0x3ae116++){for(;_0x221dc0<_0xfdab99['length']&&_0xfdab99[_0x221dc0]['used'];)_0x221dc0++;const _0x53a371=_0x3bd420[_0x3ae116];_0x53a371['atlasViewp'+'ortAllocat'+'ed']||this['assignSlot'](_0x53a371,_0x221dc0,!(0x1*0x13df+0x7eb*-0x3+0x7*0x8e));const _0x322a29=_0xfdab99[_0x53a371['atlasSlotI'+'ndex']];this['setupSlot'](_0x53a371,_0x322a29['rect']);}}this['updateUnif'+'orms']();}}class KE{constructor(){this['cache']=new Map();}['destroy'](){this['clear'](),this['cache']=null;}['clear'](){this['cache']['forEach'](_0x35238b=>{_0x35238b['forEach'](_0x51fac5=>{_0x51fac5['destroy']();});}),this['cache']['clear']();}['getKey'](_0x5b44f8){const _0x455230=_0x5b44f8['_type']===Ke,_0x3c76a8=_0x5b44f8['_shadowTyp'+'e'],_0x216dc3=_0x5b44f8['_shadowRes'+'olution'];return _0x455230+'-'+_0x3c76a8+'-'+_0x216dc3;}['get'](_0x3b58dc,_0x146b0b){const _0x4fa9d3=this['getKey'](_0x146b0b),_0x5ac329=this['cache']['get'](_0x4fa9d3);if(_0x5ac329&&_0x5ac329['length'])return _0x5ac329['pop']();const _0x5532fe=ma['create'](_0x3b58dc,_0x146b0b);return _0x5532fe['cached']=!(-0xe4*-0x27+0x7d2+0x1a3*-0x1a),_0x5532fe;}['add'](_0x5f40bf,_0xd83012){const _0x550634=this['getKey'](_0x5f40bf),_0x598ad2=this['cache']['get'](_0x550634);_0x598ad2?_0x598ad2['push'](_0xd83012):this['cache']['set'](_0x550634,[_0xd83012]);}}class ZE extends ys{constructor(_0x180e87,_0x66855a,_0x2c76d0,_0x55ef1e,_0x2f89bf){super(_0x180e87),ya['setName'](this,this['name']+'-'+_0x2c76d0['_node']['name']),this['requiresCu'+'bemaps']=!(0x2397+0x172f+-0x3ac5),this['shadowRend'+'erer']=_0x66855a,this['light']=_0x2c76d0,this['face']=_0x55ef1e,this['applyVsm']=_0x2f89bf,this['shadowCame'+'ra']=_0x66855a['prepareFac'+'e'](_0x2c76d0,null,_0x55ef1e),_0x66855a['setupRende'+'rPass'](this,this['shadowCame'+'ra'],!(0x209*0x12+-0xd*-0x2e3+-0x4a29));}['execute'](){this['shadowRend'+'erer']['renderFace'](this['light'],null,this['face'],!(-0x1*-0x186f+0xc9*0x1d+-0x2f33));}['after'](){this['applyVsm']&&this['shadowRend'+'erer']['renderVsm'](this['light'],this['shadowCame'+'ra']);}}class QE{constructor(_0xc29d7b,_0x50742d){h(this,'shadowLigh'+'ts',[]),h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0xc29d7b,this['shadowRend'+'erer']=_0x50742d,this['device']=_0xc29d7b['device']);}['cull'](_0xd23a9,_0x1e3a05,_0x3359d5=null){const _0x505618=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled'];_0xd23a9['visibleThi'+'sFrame']=!(0x783+-0x6*0x127+-0x3*0x33),_0x505618||_0xd23a9['_shadowMap']||(_0xd23a9['_shadowMap']=ma['create'](this['device'],_0xd23a9));const _0x5e0d7a=_0xd23a9['_type'],_0x82d7ef=_0x5e0d7a===Ze?0x13*-0x18d+-0x18bf+0x3637:0x10b4+0x159a+-0x2648;for(let _0x3fb405=0x1e06+-0x237*-0x1+-0x203d;_0x3fb405<_0x82d7ef;_0x3fb405++){const _0x40442f=_0xd23a9['getRenderD'+'ata'](null,_0x3fb405),_0x2464de=_0x40442f['shadowCame'+'ra'];_0x2464de['nearClip']=_0xd23a9['attenuatio'+'nEnd']/(-0x2*0x2bd+0x1*0x1997+-0x1035*0x1),_0x2464de['farClip']=_0xd23a9['attenuatio'+'nEnd'];const _0x379e28=_0x2464de['_node'],_0x11e814=_0xd23a9['_node'];if(_0x379e28['setPositio'+'n'](_0x11e814['getPositio'+'n']()),_0x5e0d7a===Ze)_0x2464de['fov']=_0xd23a9['_outerCone'+'Angle']*(-0x2*0x135d+0xaa+0x2612),_0x379e28['setRotatio'+'n'](_0x11e814['getRotatio'+'n']()),_0x379e28['rotateLoca'+'l'](-(0x1a*0x4f+-0x83*0x41+0x1997),-0x1*0x2519+0x56e*-0x2+0x1*0x2ff5,0x15cd+0x21ad+-0x9*0x62a);else{if(_0x5e0d7a===Ke){if(_0x505618){const _0xb3d774=(-0xce2+-0x2b*-0x44+0x178)/(this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowAtla'+'sResolutio'+'n']*_0xd23a9['atlasViewp'+'ort']['z']/(-0x1970+-0xa5+0x1a18))*this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowEdge'+'Pixels'];_0x2464de['fov']=Math['atan'](0x12f1+-0x1*-0xb6b+-0x1e5b+_0xb3d774)*Y['RAD_TO_DEG']*(-0x3*-0x3a+0x3bc*-0x2+0x6cc);}else _0x2464de['fov']=0x723+-0x32*-0x60+0x3*-0x883;}}this['renderer']['updateCame'+'raFrustum'](_0x2464de),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x1e3a05,_0xd23a9,_0x40442f['visibleCas'+'ters'],_0x2464de,_0x3359d5);}}['prepareLig'+'hts'](_0x187ce7,_0x370dd3){let _0x1eed72;for(let _0x4b82e6=-0xd0f*0x2+-0x586+0x1fa4;_0x4b82e6<_0x370dd3['length'];_0x4b82e6++){const _0x2b2d6f=_0x370dd3[_0x4b82e6];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x2b2d6f)&&_0x2b2d6f['atlasViewp'+'ortAllocat'+'ed']){_0x187ce7['push'](_0x2b2d6f);for(let _0xc4a13d=0x1*-0x2345+0x1*0x1a67+0x1*0x8de;_0xc4a13d<_0x2b2d6f['numShadowF'+'aces'];_0xc4a13d++)_0x1eed72=this['shadowRend'+'erer']['prepareFac'+'e'](_0x2b2d6f,null,_0xc4a13d);}}return _0x1eed72;}['buildNonCl'+'usteredRen'+'derPasses'](_0xe83c92,_0x459a07){for(let _0x5b0f19=-0x701+0x22fa+-0x1bf9;_0x5b0f19<_0x459a07['length'];_0x5b0f19++){const _0x1ebe2b=_0x459a07[_0x5b0f19];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x1ebe2b)){const _0x1c83ed=_0x1ebe2b['_type']===Ze,_0xbf9114=_0x1ebe2b['numShadowF'+'aces'];for(let _0x1b23ce=0x24ec+0x20a7*-0x1+-0x445;_0x1b23ce<_0xbf9114;_0x1b23ce++){const _0x443df8=new ZE(this['device'],this['shadowRend'+'erer'],_0x1ebe2b,_0x1b23ce,_0x1c83ed);_0xe83c92['addRenderP'+'ass'](_0x443df8);}}}}}class JE extends ys{constructor(_0x26c9bf,_0x5b6faa,_0x16c995,_0x216365,_0x34111c){super(_0x26c9bf),ya['setName'](this,this['name']+'-'+_0x16c995['_node']['name']),this['shadowRend'+'erer']=_0x5b6faa,this['light']=_0x16c995,this['camera']=_0x216365,this['allCascade'+'sRendering']=_0x34111c;}['execute'](){const {light:_0x289c92,camera:_0x32d952,shadowRenderer:_0x4c1b6f,allCascadesRendering:_0x52e39e}=this,_0x37c481=_0x289c92['numShadowF'+'aces'],_0x5bfcba=_0x289c92['shadowUpda'+'teOverride'+'s'];for(let _0x2959a8=0xb75+0x23f8*-0x1+-0xfb*-0x19;_0x2959a8<_0x37c481;_0x2959a8++)(_0x5bfcba==null?void(-0x12e7+-0x11*-0x2b+0x9e*0x1a):_0x5bfcba[_0x2959a8])!==Ps&&_0x4c1b6f['renderFace'](_0x289c92,_0x32d952,_0x2959a8,!_0x52e39e),(_0x5bfcba==null?void(-0x149c+0xa89+0xa13):_0x5bfcba[_0x2959a8])===gr&&(_0x5bfcba[_0x2959a8]=Ps);}['after'](){this['shadowRend'+'erer']['renderVsm'](this['light'],this['camera']);}}const jl=new De(),Ti=new D(),p_=new te(),Xe=[new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D()],Od={'min':0x0,'max':0x0};function eb(_0x22e638,_0x4e1b4e,_0x4baf2e){Xe[0x22a9+-0x1172+-0x1137]['x']=Xe[0x8a+-0x137*-0x3+-0x42e]['x']=Xe[0xa12+0x3e4+-0x2*0x6fa]['x']=Xe[0x1*-0x136f+0xfcb*-0x1+-0x233d*-0x1]['x']=_0x4e1b4e['x'],Xe[0x21ec+0xa*-0x23d+-0xb89*0x1]['y']=Xe[0x19d*0x1+-0x212e+0xac*0x2f]['y']=Xe[-0x4f*-0x26+0x3d*-0x3c+0x299]['y']=Xe[-0x6*0x295+-0x8ce+0x1*0x1851]['y']=_0x4e1b4e['y'],Xe[-0x2027+0x903+0xb93*0x2]['z']=Xe[-0x3*-0x435+-0xbcc+-0xd0]['z']=Xe[-0x1*0xfce+0x27e*0x8+-0x41c]['z']=Xe[-0x1*0xae5+-0xbd7+0x16c3*0x1]['z']=_0x4e1b4e['z'],Xe[-0x1e75+0x296+0x1be3]['x']=Xe[-0x189d+-0x32f*-0x1+-0x1*-0x1573]['x']=Xe[-0x1*0x962+0x744+0x224]['x']=Xe[-0x156c+0x15e6+-0x17*0x5]['x']=_0x4baf2e['x'],Xe[-0xf19+0xb8*-0x2+0x1089]['y']=Xe[0x1d9+0x2018+-0x1ff*0x11]['y']=Xe[-0x2463+-0x13fb+0x3862*0x1]['y']=Xe[-0x21da+0x15b*0x2+-0x2*-0xf95]['y']=_0x4baf2e['y'],Xe[0x2b*-0x3a+-0x5*0x32d+-0x7*-0x3a9]['z']=Xe[-0x43*-0x62+-0x21ea+0x845]['z']=Xe[0x11d*-0x1f+0x1*0x5db+0x1cac]['z']=Xe[0x22fa+0x2f1+-0x25e6]['z']=_0x4baf2e['z'];let _0x353246=0x3b9438f88+0x3e7fb7476+-0x54d331fff,_0x3a2adf=-(0x2913aed21+-0x393475602+0x356184ce0);for(let _0x29e540=-0x7*0x459+-0x1376+0x31e5;_0x29e540<-0xfd3+-0x127e*-0x1+-0x2a3;++_0x29e540){_0x22e638['transformP'+'oint'](Xe[_0x29e540],Xe[_0x29e540]);const _0x4ad1d1=Xe[_0x29e540]['z'];_0x4ad1d1<_0x353246&&(_0x353246=_0x4ad1d1),_0x4ad1d1>_0x3a2adf&&(_0x3a2adf=_0x4ad1d1);}return Od['min']=_0x353246,Od['max']=_0x3a2adf,Od;}class tb{constructor(_0x23dad4,_0x27ed6a){h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x23dad4,this['shadowRend'+'erer']=_0x27ed6a,this['device']=_0x23dad4['device']);}['cull'](_0x8f3a5b,_0x3bc7d5,_0x24e4ce,_0x5181bb=null){_0x8f3a5b['visibleThi'+'sFrame']=!(0x9e1*-0x3+0x1*0x20+0x5e7*0x5),_0x8f3a5b['_shadowMap']||(_0x8f3a5b['_shadowMap']=ma['create'](this['device'],_0x8f3a5b));const _0x15566a=_0x24e4ce['_nearClip'];this['generateSp'+'litDistanc'+'es'](_0x8f3a5b,_0x15566a,Math['min'](_0x24e4ce['_farClip'],_0x8f3a5b['shadowDist'+'ance']));const _0x57fcff=_0x8f3a5b['shadowUpda'+'teOverride'+'s'];for(let _0x1d9b49=-0xfc5+-0x1*-0x1a82+-0x1*0xabd;_0x1d9b49<_0x8f3a5b['numCascade'+'s']&&(_0x57fcff==null?void(0xd*-0x281+0x4d2+0xe5*0x1f):_0x57fcff[_0x1d9b49])!==Ps;_0x1d9b49++){const _0x470522=_0x8f3a5b['getRenderD'+'ata'](_0x24e4ce,_0x1d9b49),_0x5f0aaa=_0x470522['shadowCame'+'ra'];_0x5f0aaa['renderTarg'+'et']=_0x8f3a5b['_shadowMap']['renderTarg'+'ets'][-0x1b1*0xb+0xb0b+0x790],_0x470522['shadowView'+'port']['copy'](_0x8f3a5b['cascades'][_0x1d9b49]),_0x470522['shadowScis'+'sor']['copy'](_0x8f3a5b['cascades'][_0x1d9b49]);const _0x5b5fb4=_0x5f0aaa['_node'],_0x5c5429=_0x8f3a5b['_node'];_0x5b5fb4['setPositio'+'n'](_0x5c5429['getPositio'+'n']()),_0x5b5fb4['setRotatio'+'n'](_0x5c5429['getRotatio'+'n']()),_0x5b5fb4['rotateLoca'+'l'](-(0x2007+0x1*-0x2189+0x1dc),-0x1bc+0x5*0x93+-0x123,0xe48+0x1e9*-0x3+0x88d*-0x1);const _0x1df370=_0x1d9b49===-0x1*-0x131e+0xd*0x6b+0x188d*-0x1?_0x15566a:_0x8f3a5b['_shadowCas'+'cadeDistan'+'ces'][_0x1d9b49-(-0x1ace+0x2399+-0x8ca)],_0x61704=_0x8f3a5b['_shadowCas'+'cadeDistan'+'ces'][_0x1d9b49],_0x4f8b61=_0x24e4ce['getFrustum'+'Corners'](_0x1df370,_0x61704);Ti['set'](-0x1*-0x63d+-0x29*0x41+0x6*0xb2,-0x2239+-0x8*0x489+0x4681,-0x78c*-0x4+0x156e+0x2*-0x19cf);const _0x580de3=_0x24e4ce['node']['getWorldTr'+'ansform']();for(let _0xe192db=-0x3*0xcb+0x2379+-0x2118;_0xe192db<-0x13*-0xc9+-0x35d*-0x1+-0x248*0x8;_0xe192db++)_0x580de3['transformP'+'oint'](_0x4f8b61[_0xe192db],_0x4f8b61[_0xe192db]),Ti['add'](_0x4f8b61[_0xe192db]);Ti['mulScalar']((0x4e7*-0x7+0xc9f+0x15b3)/(-0x43*-0x4f+0x254d+-0x39f2));let _0x5c65b3=0x10a3*-0x1+0x4d0+-0x3*-0x3f1;for(let _0x22d583=-0x2ba*-0x3+-0x11f6+0x9c8;_0x22d583<-0x2126+-0x142*0x16+0x3cda;_0x22d583++){const _0x5292c1=_0x4f8b61[_0x22d583]['sub'](Ti)['length']();_0x5292c1>_0x5c65b3&&(_0x5c65b3=_0x5292c1);}const _0x202648=_0x5b5fb4['right'],_0x1c55b1=_0x5b5fb4['up'],_0x2ad06e=_0x5b5fb4['forward'],_0x564da9=(0x1*0x1b01+0x1*0x22f8+0x5f*-0xa7+0.25)*_0x8f3a5b['_shadowRes'+'olution']/_0x5c65b3,_0x412fa1=Math['ceil'](Ti['dot'](_0x1c55b1)*_0x564da9)/_0x564da9,_0x1437eb=Math['ceil'](Ti['dot'](_0x202648)*_0x564da9)/_0x564da9,_0xe784d4=_0x1c55b1['mulScalar'](_0x412fa1),_0x26b638=_0x202648['mulScalar'](_0x1437eb),_0x5bc89c=Ti['dot'](_0x2ad06e),_0x3b0538=_0x2ad06e['mulScalar'](_0x5bc89c);Ti['add2'](_0xe784d4,_0x26b638)['add'](_0x3b0538),_0x5b5fb4['setPositio'+'n'](Ti),_0x5b5fb4['translateL'+'ocal'](-0x1f3b*0x1+0x2a*0xe7+-0x6ab,-0x3d*-0x11+-0x1087+0xc7a,0x9d12*0x29+-0x2070e+-0x7de94),_0x5f0aaa['nearClip']=-0x17ab+0x143*0x11+-0x238*-0x1+0.01,_0x5f0aaa['farClip']=0x37c2e*-0x3+0xb70be+0xec426*0x2,_0x5f0aaa['orthoHeigh'+'t']=_0x5c65b3,this['renderer']['updateCame'+'raFrustum'](_0x5f0aaa),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x3bc7d5,_0x8f3a5b,_0x470522['visibleCas'+'ters'],_0x5f0aaa,_0x5181bb);const _0x6d0aa2=0x10*0x68+0x2*0xdee+-0x225b<<_0x1d9b49,_0x59f9e6=_0x470522['visibleCas'+'ters'],_0x2ceb21=_0x59f9e6['length'];let _0x1c7c63=0x1202+0x13da*-0x1+-0x2*-0xec;for(let _0x13eb44=-0x42*-0x11+-0x1827*0x1+0x13c5;_0x13eb44<_0x2ceb21;_0x13eb44++){const _0x13e052=_0x59f9e6[_0x13eb44];_0x13e052['shadowCasc'+'adeMask']&_0x6d0aa2&&(_0x59f9e6[_0x1c7c63++]=_0x13e052,_0x1c7c63===0x8cd*0x1+-0x4*0xdf+-0x5*0x110?jl['copy'](_0x13e052['aabb']):jl['add'](_0x13e052['aabb']));}_0x2ceb21!==_0x1c7c63&&(_0x59f9e6['length']=_0x1c7c63),p_['copy'](_0x5b5fb4['getWorldTr'+'ansform']())['invert']();const _0x5d56e8=eb(p_,jl['getMin'](),jl['getMax']());_0x5b5fb4['translateL'+'ocal'](-0x1901+-0x1f*0x61+0x24c0,0x225f+0x18d8+-0x3b37,_0x5d56e8['max']+(0x19*0x82+-0x218+-0xa9a*0x1+0.1)),_0x5f0aaa['farClip']=_0x5d56e8['max']-_0x5d56e8['min']+(-0x93d+0xc57+-0x1*0x31a+0.2),_0x470522['projection'+'Compensati'+'on']=_0x5c65b3;}}['generateSp'+'litDistanc'+'es'](_0x1d1c0d,_0xa347d2,_0x23512c){_0x1d1c0d['_shadowCas'+'cadeDistan'+'ces']['fill'](_0x23512c);for(let _0x382f23=0x1*-0x1683+-0x3d+0x16c1;_0x382f23<_0x1d1c0d['numCascade'+'s'];_0x382f23++){const _0x13775f=_0x382f23/_0x1d1c0d['numCascade'+'s'],_0x22380c=_0xa347d2+(_0x23512c-_0xa347d2)*_0x13775f,_0x46a338=_0xa347d2*(_0x23512c/_0xa347d2)**_0x13775f,_0x1a931d=Y['lerp'](_0x22380c,_0x46a338,_0x1d1c0d['cascadeDis'+'tribution']);_0x1d1c0d['_shadowCas'+'cadeDistan'+'ces'][_0x382f23-(-0x14bf*-0x1+0x1cdd+-0x319b)]=_0x1a931d;}}['getLightRe'+'nderPass'](_0xdff167,_0x564233){w['assert'](_0xdff167&&_0xdff167['_type']===ve);let _0x49363c=null;if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0xdff167)){const _0x24f2dd=_0xdff167['numShadowF'+'aces'],_0x51a133=_0xdff167['shadowUpda'+'teOverride'+'s'];let _0x4037d0=!(-0x22ad+-0x9*0x315+-0xa67*-0x6),_0x52371a;for(let _0x4a4c77=0x24cd*-0x1+-0x1*0xe7d+0x1a*0x1f9;_0x4a4c77<_0x24f2dd;_0x4a4c77++)(_0x51a133==null?void(-0xbb*-0xf+-0x2fa*0x7+0x9e1):_0x51a133[_0x4a4c77])===Ps&&(_0x4037d0=!(-0x2*0xf6b+0x244*-0x10+0x4317)),_0x52371a=this['shadowRend'+'erer']['prepareFac'+'e'](_0xdff167,_0x564233,_0x4a4c77);_0x49363c=new JE(this['device'],this['shadowRend'+'erer'],_0xdff167,_0x564233,_0x4037d0),this['shadowRend'+'erer']['setupRende'+'rPass'](_0x49363c,_0x52371a,_0x4037d0);}return _0x49363c;}}const Fd=new Set(),m_=new te(),__=new te(),Ir=new Float32Array(0xfd*0x3+0x92*0x4+0x53d*-0x1),to=new re(0x95*0xd+0xb20+-0x34*0x5c,0xee9+-0x1*0xd01+-0x1e7,0x26fc+-0x86f+-0x1e8d,-0x1a44+0x747*0x3+-0xe3*-0x5),g_=new te();function sb(_0x276419,_0x48f4be){return Math['exp'](-(_0x276419*_0x276419)/((-0x12a*-0x1b+0x7a4+-0x2710)*_0x48f4be*_0x48f4be));}function ib(_0x577fca){const _0x539c3f=(_0x577fca-(-0x1*0x24fa+0x1*0x24fb+0x0))/(0x92*0x42+-0x13*-0xd2+0x6*-0x8de),_0x348841=(_0x577fca-(-0x81*0x1+0x1*0x1cc1+-0x1c3f))*(0x765*0x1+0x9*0x270+0x9c7*-0x3+0.5),_0x187e54=new Array(_0x577fca);let _0x16acb3=0x1250+0x1627+-0x2877;for(let _0x3d5eba=-0x1e9e+-0x284+0x2122;_0x3d5eba<_0x577fca;++_0x3d5eba)_0x187e54[_0x3d5eba]=sb(_0x3d5eba-_0x348841,_0x539c3f),_0x16acb3+=_0x187e54[_0x3d5eba];for(let _0x4fc856=-0x2390+0x51e+0x1e72;_0x4fc856<_0x577fca;++_0x4fc856)_0x187e54[_0x4fc856]/=_0x16acb3;return _0x187e54;}class $y{constructor(_0xcdc615,_0x2cf7aa){h(this,'shadowPass'+'Cache',[]),(this['device']=_0xcdc615['device'],this['renderer']=_0xcdc615,this['lightTextu'+'reAtlas']=_0x2cf7aa);const _0x931f72=this['device']['scope'];this['sourceId']=_0x931f72['resolve']('source'),this['pixelOffse'+'tId']=_0x931f72['resolve']('pixelOffse'+'t'),this['weightId']=_0x931f72['resolve']('weight[0]'),this['blurVsmSha'+'der']=[{},{}],this['blurVsmWei'+'ghts']={},this['shadowMapL'+'ightRadius'+'Id']=_0x931f72['resolve']('light_radi'+'us'),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['blendState'+'Write']=new pt(),this['blendState'+'NoWrite']=new pt(),this['blendState'+'NoWrite']['setColorWr'+'ite'](!(-0x155e+0x167*0x19+-0x1*0xdb0),!(0x1*-0x21ee+0x1*-0x92b+0x3*0xe5e),!(-0x1*-0xe8f+-0x20f+-0xc7f),!(0x2414+-0x1f*-0x7d+-0x3336));}static['createShad'+'owCamera'](_0x461b29,_0x4b563b,_0x5169f6){const _0x334636=kn['create']('ShadowCame'+'ra',_0x4b563b,_0x5169f6),_0x1ed50f=Xi['get'](_0x461b29);w['assert'](_0x1ed50f);const _0x2c7ead=(_0x1ed50f==null?void(0x665*0x6+0xc06+-0xd7*0x3c):_0x1ed50f['vsm'])??!(0x1*-0x1d1e+0x2406+-0x6e7),_0x177159=(_0x1ed50f==null?void(-0x5e+-0x423*-0x3+0xc0b*-0x1):_0x1ed50f['pcf'])??!(0x8e*-0x2d+-0xe7d*0x1+0x2774);return _0x2c7ead?_0x334636['clearColor']=new ie(-0xbbd+0x1132*-0x2+0x2e21,0x40f*0x1+-0x14ca+0x10bb,0x1e7f+0x3ad*-0x3+0x4de*-0x4,0x1257+-0x95d*-0x1+-0x1bb4):_0x334636['clearColor']=new ie(0x1e18+-0x8*-0x6b+-0x3b7*0x9,-0x5*0x1aa+-0xea4+0x16f7,-0x252b+-0x1e*-0x126+0x2*0x15c,-0x2e7+-0x1*0x2647+0xd*0x32b),_0x334636['clearDepth'+'Buffer']=!(0x2c*0x7+0x96b*0x3+0x1d75*-0x1),_0x334636['clearStenc'+'ilBuffer']=!(-0x17c7+0x1*-0x224b+0x3a13),_0x334636['clearColor'+'Buffer']=!_0x177159,_0x334636;}['_cullShado'+'wCastersIn'+'ternal'](_0x5085bb,_0x1738fe,_0x52df0b){const _0x3d8df5=_0x5085bb['length'];for(let _0x22f7e3=-0x1*-0x493+-0x61*0x40+0x13ad;_0x22f7e3<_0x3d8df5;_0x22f7e3++){const _0x2cf9dc=_0x5085bb[_0x22f7e3];_0x2cf9dc['castShadow']&&(!_0x2cf9dc['cull']||_0x2cf9dc['_isVisible'](_0x52df0b))&&(_0x2cf9dc['visibleThi'+'sFrame']=!(-0x2*-0x8e9+-0x1c1c+0xa4a),_0x1738fe['push'](_0x2cf9dc));}}['cullShadow'+'Casters'](_0x4ea82e,_0x16403c,_0x11dc1f,_0x5b7b72,_0x25d29a){var _0x4f1b1d,_0x5effb0;if((_0x4f1b1d=this['renderer']['scene'])==null||_0x4f1b1d['fire'](Ry,_0x5b7b72),_0x11dc1f['length']=-0x239f+-0x23*0x110+0x48cf,_0x25d29a)this['_cullShado'+'wCastersIn'+'ternal'](_0x25d29a,_0x11dc1f,_0x5b7b72);else{const _0x54f1bf=_0x4ea82e['layerList'],_0x55ac30=_0x54f1bf['length'];for(let _0x2f6f6c=0x1*-0x3a5+0x8fc+-0x1*0x557;_0x2f6f6c<_0x55ac30;_0x2f6f6c++){const _0x3ae236=_0x54f1bf[_0x2f6f6c];_0x3ae236['_lightsSet']['has'](_0x16403c)&&(Fd['has'](_0x3ae236)||(Fd['add'](_0x3ae236),this['_cullShado'+'wCastersIn'+'ternal'](_0x3ae236['shadowCast'+'ers'],_0x11dc1f,_0x5b7b72)));}Fd['clear']();}_0x11dc1f['sort'](this['sortCompar'+'eShader']),(_0x5effb0=this['renderer']['scene'])==null||_0x5effb0['fire'](Oy,_0x5b7b72);}['sortCompar'+'eShader'](_0x33515b,_0x379e99){const _0x3d8df8=_0x33515b['_sortKeySh'+'adow'],_0xda68a2=_0x379e99['_sortKeySh'+'adow'];return _0x3d8df8===_0xda68a2?_0x379e99['mesh']['id']-_0x33515b['mesh']['id']:_0xda68a2-_0x3d8df8;}['setupRende'+'rState'](_0x3524d9,_0x370ffa){const _0x1d149e=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']?_0x370ffa['_isPcf']:_0x370ffa['_isPcf']&&_0x370ffa['_type']!==Ke;_0x3524d9['setBlendSt'+'ate'](_0x1d149e?this['blendState'+'NoWrite']:this['blendState'+'Write']),_0x3524d9['setDepthSt'+'ate'](_0x370ffa['shadowDept'+'hState']),_0x3524d9['setStencil'+'State'](null,null);}['dispatchUn'+'iforms'](_0x36b0ba,_0x4dd04c,_0x57580c,_0x5d25d4){const _0xbd2bcf=_0x4dd04c['_node'];_0x36b0ba['_type']!==ve&&(this['renderer']['dispatchVi'+'ewPos'](_0xbd2bcf['getPositio'+'n']()),this['shadowMapL'+'ightRadius'+'Id']['setValue'](_0x36b0ba['attenuatio'+'nEnd'])),m_['setTRS'](_0xbd2bcf['getPositio'+'n'](),_0xbd2bcf['getRotatio'+'n'](),D['ONE'])['invert'](),__['mul2'](_0x4dd04c['projection'+'Matrix'],m_);const _0x3175bb=_0x57580c['shadowView'+'port'];_0x4dd04c['rect']=_0x3175bb,_0x4dd04c['scissorRec'+'t']=_0x57580c['shadowScis'+'sor'],g_['setViewpor'+'t'](_0x3175bb['x'],_0x3175bb['y'],_0x3175bb['z'],_0x3175bb['w']),_0x57580c['shadowMatr'+'ix']['mul2'](g_,__),_0x36b0ba['_type']===ve&&_0x36b0ba['_shadowMat'+'rixPalette']['set'](_0x57580c['shadowMatr'+'ix']['data'],_0x5d25d4*(-0x3*0x3e6+-0x45e+0x10*0x102));}['getShadowP'+'ass'](_0x22d71d){var _0x19b520;const _0x4ce0c1=_0x22d71d['_type'],_0x47225b=_0x22d71d['_shadowTyp'+'e'];let _0x552a52=(_0x19b520=this['shadowPass'+'Cache'][_0x4ce0c1])==null?void(0xd*0x161+0x1*0x1381+0xc7a*-0x3):_0x19b520[_0x47225b];if(!_0x552a52){const _0x15ce9e='ShadowPass'+'_'+_0x4ce0c1+'_'+_0x47225b;_0x552a52=Si['get'](this['device'])['allocate'](_0x15ce9e,{'isShadow':!(-0x506*0x4+0xc29+0x7ef),'lightType':_0x4ce0c1,'shadowType':_0x47225b}),this['shadowPass'+'Cache'][_0x4ce0c1]||(this['shadowPass'+'Cache'][_0x4ce0c1]=[]),this['shadowPass'+'Cache'][_0x4ce0c1][_0x47225b]=_0x552a52;}return _0x552a52['index'];}['submitCast'+'ers'](_0x86b460,_0x34c4f9,_0x49b88b){var _0x2171ee;const _0xf94938=this['device'],_0x29c55e=this['renderer'],_0x75e615=_0x29c55e['scene'],_0x4a3232=-0x1adb+-0x1*-0x22da+-0x7fe<<Np,_0x2169c1=this['getShadowP'+'ass'](_0x34c4f9),_0x5a8aa7=_0x49b88b['shaderPara'+'ms'],_0x5cb425=_0x49b88b['renderTarg'+'et']['flipY']?-(0x24e+0x11f5+-0x1442):0x1*0x1b6d+-0x2c*-0x83+-0xc7c*0x4,_0x20138f=_0x86b460['length'];for(let _0x2b5c57=-0x4*-0x5f+0x102a+-0x11a6;_0x2b5c57<_0x20138f;_0x2b5c57++){const _0x42255b=_0x86b460[_0x2b5c57],_0x2036a5=_0x42255b['mesh'],_0x80bb2a=_0x42255b['instancing'+'Data'];if(_0x80bb2a&&_0x80bb2a['count']<=0x1b5c*-0x1+0x1a0d+0x14f)continue;_0x42255b['ensureMate'+'rial'](_0xf94938);const _0xac1c0d=_0x42255b['material'];Q['pushGpuMar'+'ker'](_0xf94938,'Node:\x20'+_0x42255b['node']['name']+(',\x20Material'+':\x20')+_0xac1c0d['name']),_0x29c55e['setBaseCon'+'stants'](_0xf94938,_0xac1c0d),_0x29c55e['setSkinnin'+'g'](_0xf94938,_0x42255b),_0xac1c0d['dirty']&&(_0xac1c0d['updateUnif'+'orms'](_0xf94938,_0x75e615),_0xac1c0d['dirty']=!(-0xb*0x22d+0x15*-0xf8+-0x1a*-0x1b4)),_0x29c55e['setupCullM'+'ode'](!(-0x1ed6+0x1*-0x2117+0x3fed),_0x5cb425,_0x42255b),_0xac1c0d['setParamet'+'ers'](_0xf94938),_0x42255b['setParamet'+'ers'](_0xf94938,_0x4a3232);const _0x5bbf96=_0x42255b['getShaderI'+'nstance'](_0x2169c1,-0x3d*0x49+0x365+-0x4*-0x380,_0x75e615,_0x5a8aa7,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat']),_0x51cd0a=_0x5bbf96['shader'];if(w['assert'](_0x51cd0a,'no\x20shader\x20'+'for\x20pass\x20'+_0x2169c1,_0xac1c0d),_0x51cd0a['failed'])continue;_0x42255b['_sortKeySh'+'adow']=_0x51cd0a['id'],_0xf94938['setShader'](_0x51cd0a),_0x29c55e['setVertexB'+'uffers'](_0xf94938,_0x2036a5),_0x29c55e['setMorphin'+'g'](_0xf94938,_0x42255b['morphInsta'+'nce']),_0x80bb2a&&_0xf94938['setVertexB'+'uffer'](_0x80bb2a['vertexBuff'+'er']),_0x29c55e['setMeshIns'+'tanceMatri'+'ces'](_0x42255b),_0x29c55e['setupMeshU'+'niformBuff'+'ers'](_0x5bbf96);const _0x51ffa2=_0x42255b['renderStyl'+'e'],_0x363791=(_0x2171ee=_0x42255b['indirectDa'+'ta'])==null?void(-0xd66*0x2+0x1693+0x439):_0x2171ee['get'](_0x49b88b);_0xf94938['draw'](_0x2036a5['primitive'][_0x51ffa2],_0x2036a5['indexBuffe'+'r'][_0x51ffa2],_0x80bb2a==null?void(0x257b+0x9*0x28f+-0x3c82):_0x80bb2a['count'],_0x363791),_0x29c55e['_shadowDra'+'wCalls']++,_0x80bb2a&&_0x29c55e['_instanced'+'DrawCalls']++,Q['popGpuMark'+'er'](_0xf94938);}}['needsShado'+'wRendering'](_0x41bc40){const _0x3f8475=_0x41bc40['enabled']&&_0x41bc40['castShadow'+'s']&&_0x41bc40['shadowUpda'+'teMode']!==Ps&&_0x41bc40['visibleThi'+'sFrame'];return _0x41bc40['shadowUpda'+'teMode']===gr&&(_0x41bc40['shadowUpda'+'teMode']=Ps),_0x3f8475&&(this['renderer']['_shadowMap'+'Updates']+=_0x41bc40['numShadowF'+'aces']),_0x3f8475;}['getLightRe'+'nderData'](_0x366638,_0x4e264f,_0xb63c37){return _0x366638['getRenderD'+'ata'](_0x366638['_type']===ve?_0x4e264f:null,_0xb63c37);}['setupRende'+'rPass'](_0x2a3427,_0x10a520,_0x26cd07){const _0x1bb282=_0x10a520['renderTarg'+'et'];_0x2a3427['init'](_0x1bb282),_0x2a3427['depthStenc'+'ilOps']['clearDepth'+'Value']=0x33b+-0x101*-0x17+0x1a51*-0x1,_0x2a3427['depthStenc'+'ilOps']['clearDepth']=_0x26cd07,_0x1bb282['depthBuffe'+'r']?_0x2a3427['depthStenc'+'ilOps']['storeDepth']=!(-0xd1+0x1c4c+-0x1b7b):(_0x2a3427['colorOps']['clearValue']['copy'](_0x10a520['clearColor']),_0x2a3427['colorOps']['clear']=_0x26cd07,_0x2a3427['depthStenc'+'ilOps']['storeDepth']=!(0xdab+0xa3d*-0x1+0x36d*-0x1)),_0x2a3427['requiresCu'+'bemaps']=!(-0x7*-0x31f+-0x5f4+-0xfe4);}['prepareFac'+'e'](_0x4f96e3,_0x1b71a7,_0x1e4422){const _0x377fab=_0x4f96e3['_type'],_0x67ea3f=this['getLightRe'+'nderData'](_0x4f96e3,_0x1b71a7,_0x1e4422)['shadowCame'+'ra'],_0x4470df=_0x377fab===ve?0x946+0xfba+-0x1900:_0x1e4422;return _0x67ea3f['renderTarg'+'et']=_0x4f96e3['_shadowMap']['renderTarg'+'ets'][_0x4470df],_0x67ea3f;}['renderFace'](_0x396f2b,_0x4e7fc5,_0x334f36,_0x95b90d,_0x3d206b=!(0x535+-0x146*-0x1c+-0xd9f*0x3)){const _0x80db36=this['device'],_0x4d48c1=de();Q['pushGpuMar'+'ker'](_0x80db36,'SHADOW\x20'+_0x396f2b['_node']['name']+'\x20FACE\x20'+_0x334f36);const _0x226e58=this['getLightRe'+'nderData'](_0x396f2b,_0x4e7fc5,_0x334f36),_0x543da1=_0x226e58['shadowCame'+'ra'];this['dispatchUn'+'iforms'](_0x396f2b,_0x543da1,_0x226e58,_0x334f36);const _0x6424ee=_0x543da1['renderTarg'+'et'],_0x48a8d7=this['renderer'];_0x48a8d7['setCameraU'+'niforms'](_0x543da1,_0x6424ee),_0x80db36['supportsUn'+'iformBuffe'+'rs']&&_0x48a8d7['setupViewU'+'niformBuff'+'ers'](_0x226e58['viewBindGr'+'oups'],this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],null),_0x3d206b?(_0x48a8d7['setupViewp'+'ort'](_0x543da1,_0x6424ee),_0x95b90d&&_0x48a8d7['clear'](_0x543da1)):_0x48a8d7['clearView'](_0x543da1,_0x6424ee,!(-0x23f2+-0x1de8+0x41da),!(-0x13*-0x1db+0x1369*0x2+0x1*-0x4a12)),this['setupRende'+'rState'](_0x80db36,_0x396f2b),this['submitCast'+'ers'](_0x226e58['visibleCas'+'ters'],_0x396f2b,_0x543da1),Q['popGpuMark'+'er'](_0x80db36),_0x48a8d7['_shadowMap'+'Time']+=de()-_0x4d48c1;}['render'](_0x3a63a2,_0x2990d0,_0x2d8052=!(-0x562+0x20b3+0x1*-0x1b51)){if(this['needsShado'+'wRendering'](_0x3a63a2)){const _0x4826ab=_0x3a63a2['numShadowF'+'aces'];for(let _0x56dffc=0x52b+-0x1f61+0x1a36;_0x56dffc<_0x4826ab;_0x56dffc++)this['prepareFac'+'e'](_0x3a63a2,_0x2990d0,_0x56dffc),this['renderFace'](_0x3a63a2,_0x2990d0,_0x56dffc,!(-0x1a9*-0x2+-0x6*-0x44f+-0x1d2c),_0x2d8052);this['renderVsm'](_0x3a63a2,_0x2990d0);}}['renderVsm'](_0x1d5ed0,_0x308648){_0x1d5ed0['_isVsm']&&_0x1d5ed0['_vsmBlurSi'+'ze']>0x1657+-0x908+-0xd4e&&(!this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']||_0x1d5ed0['_type']===ve)&&this['applyVsmBl'+'ur'](_0x1d5ed0,_0x308648);}['getVsmBlur'+'Shader'](_0x14ea45,_0x11fa2a){const _0x39fa50=this['blurVsmSha'+'der'];let _0x41de99=_0x39fa50[_0x14ea45][_0x11fa2a];if(!_0x41de99){this['blurVsmWei'+'ghts'][_0x11fa2a]=ib(_0x11fa2a);const _0x13fc99=new Map();_0x13fc99['set']('{SAMPLES}',_0x11fa2a),_0x14ea45===0x8ed+-0x10*0xa6+0x174&&_0x13fc99['set']('GAUSS',''),_0x41de99=$t['createShad'+'er'](this['device'],{'uniqueName':'blurVsm'+_0x14ea45+_0x11fa2a,'attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'blurVSMPS','fragmentDefines':_0x13fc99}),_0x39fa50[_0x14ea45][_0x11fa2a]=_0x41de99;}return _0x41de99;}['applyVsmBl'+'ur'](_0x8c6a6a,_0x1e83cf){const _0x3f83c7=this['device'];Q['pushGpuMar'+'ker'](_0x3f83c7,'VSM\x20'+_0x8c6a6a['_node']['name']),_0x3f83c7['setBlendSt'+'ate'](pt['NOBLEND']);const _0x1efb69=_0x8c6a6a['getRenderD'+'ata'](_0x8c6a6a['_type']===ve?_0x1e83cf:null,0x815+-0xf09+-0x37a*-0x2)['shadowCame'+'ra']['renderTarg'+'et'],_0x7d47ef=this['renderer']['shadowMapC'+'ache']['get'](_0x3f83c7,_0x8c6a6a),_0x3462be=_0x7d47ef['renderTarg'+'ets'][-0x5c*-0x61+0x81c*-0x1+-0xd60*0x2],_0x3e3589=_0x8c6a6a['vsmBlurMod'+'e'],_0x1bde1f=_0x8c6a6a['_vsmBlurSi'+'ze'],_0x4e31f5=this['getVsmBlur'+'Shader'](_0x3e3589,_0x1bde1f);to['z']=_0x8c6a6a['_shadowRes'+'olution']-(0x1*0xe39+-0x19*-0x4e+-0x15d5),to['w']=to['z'],this['sourceId']['setValue'](_0x1efb69['colorBuffe'+'r']),Ir[0x5f4+0x3*-0x9ef+0x17d9]=(-0xc92*0x2+0x1e06+-0x4e1)/_0x8c6a6a['_shadowRes'+'olution'],Ir[-0x2133+0xcd4+0x1460]=0x1d73+-0x69*0x55+0x56a,this['pixelOffse'+'tId']['setValue'](Ir),_0x3e3589===Cp&&this['weightId']['setValue'](this['blurVsmWei'+'ghts'][_0x1bde1f]),Tr(_0x3f83c7,_0x3462be,_0x4e31f5,null,to),this['sourceId']['setValue'](_0x3462be['colorBuffe'+'r']),Ir[-0x23cc*-0x1+-0x92d+-0x1a9e]=Ir[-0x2*-0x12b9+-0x2*-0x7a2+0x8c9*-0x6],Ir[-0x12b5*-0x2+-0x170*-0xf+-0x3afa]=0x10b2*-0x1+-0x125*0x2+0x10e*0x12,this['pixelOffse'+'tId']['setValue'](Ir),Tr(_0x3f83c7,_0x1efb69,_0x4e31f5,null,to),this['renderer']['shadowMapC'+'ache']['add'](_0x8c6a6a,_0x7d47ef),Q['popGpuMark'+'er'](_0x3f83c7);}['initViewBi'+'ndGroupFor'+'mat'](){this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']&&(this['viewUnifor'+'mFormat']=new ry(this['device'],[new dt('matrix_vie'+'wProjectio'+'n',li)]),this['viewBindGr'+'oupFormat']=new ey(this['device'],[new hp(cp,lp|HS)]));}['frameUpdat'+'e'](){this['initViewBi'+'ndGroupFor'+'mat']();}}const Yl=[];class rb{constructor(_0x50868b){h(this,'_empty',null),h(this,'_allocated',[]),h(this,'_clusters',new Map()),this['device']=_0x50868b;}['destroy'](){this['_empty']&&(this['_empty']['destroy'](),this['_empty']=null),this['_allocated']['forEach'](_0x334643=>{_0x334643['destroy']();}),this['_allocated']['length']=-0x126*0x7+0x26f7+-0x7*0x46b;}get['count'](){return this['_allocated']['length'];}get['empty'](){if(!this['_empty']){const _0x299cc2=new kf(this['device']);_0x299cc2['name']='ClusterEmp'+'ty',_0x299cc2['update']([]),this['_empty']=_0x299cc2;}return this['_empty'];}['assign'](_0x410692){const _0x3f3848=this['empty'];Yl['push'](...this['_allocated']),this['_allocated']['length']=0x2*0x4ff+0xa1b*-0x3+-0x79*-0x2b,this['_clusters']['clear']();const _0x2e3f6b=_0x410692['length'];for(let _0xed0199=0x3*-0x1e1+0xc3c+-0x699;_0xed0199<_0x2e3f6b;_0xed0199++){const _0x1533f8=_0x410692[_0xed0199]['renderActi'+'ons'];if(_0x1533f8){const _0x2e47fb=_0x1533f8['length'];for(let _0x9b1cf1=-0x1ab7*-0x1+-0xad6*0x3+0x1*0x5cb;_0x9b1cf1<_0x2e47fb;_0x9b1cf1++){const _0x273d04=_0x1533f8[_0x9b1cf1];_0x273d04['lightClust'+'ers']=null;const _0x18a00e=_0x273d04['layer'];if(_0x18a00e['hasCluster'+'edLights']&&_0x18a00e['meshInstan'+'ces']['length']){const _0x4a5cfb=_0x18a00e['getLightId'+'Hash'](),_0x483a4=this['_clusters']['get'](_0x4a5cfb);let _0x11775a=_0x483a4==null?void(-0x3*-0x5cf+0x23bf+0x1a96*-0x2):_0x483a4['lightClust'+'ers'];_0x11775a||(_0x11775a=Yl['pop']()??new kf(this['device']),ya['setName'](_0x11775a,'Cluster-'+this['_allocated']['length']),this['_allocated']['push'](_0x11775a),this['_clusters']['set'](_0x4a5cfb,_0x273d04)),_0x273d04['lightClust'+'ers']=_0x11775a;}_0x273d04['lightClust'+'ers']||(_0x273d04['lightClust'+'ers']=_0x3f3848);}}}Yl['forEach'](_0x4540d0=>_0x4540d0['destroy']()),Yl['length']=-0x7a5*0x1+-0x1003+0x17a8;}['update'](_0x37e345,_0x46aae3){this['assign'](_0x37e345),this['_clusters']['forEach'](_0x3b518e=>{const _0x55d621=_0x3b518e['layer'];_0x3b518e['lightClust'+'ers']['update'](_0x55d621['clusteredL'+'ightsSet'],_0x46aae3);});}}const ir=new re(),Nd=[];class Vp extends ys{constructor(_0x11fd5e,_0xacc5dd){super(_0x11fd5e),h(this,'_quadRende'+'rer2D',null),h(this,'_quadRende'+'rerCube',null),h(this,'_filteredL'+'ights',[]),h(this,'_forceCopy',!(-0x13e*0xa+0x1cdb+0x837*-0x2)),h(this,'_evtDevice'+'Restored',null),(this['_cubeSlots'+'Offsets']=_0xacc5dd,this['requiresCu'+'bemaps']=!(0x2*0x67+0xa93+-0x5b0*0x2),this['blitTextur'+'eId']=_0x11fd5e['scope']['resolve']('blitTextur'+'e'),this['invViewPro'+'jId']=_0x11fd5e['scope']['resolve']('invViewPro'+'j'),this['_evtDevice'+'Restored']=_0x11fd5e['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this));}['destroy'](){var _0x54a3bb,_0x5439e6,_0xdabead;(_0x54a3bb=this['_quadRende'+'rer2D'])==null||_0x54a3bb['destroy'](),this['_quadRende'+'rer2D']=null,(_0x5439e6=this['_quadRende'+'rerCube'])==null||_0x5439e6['destroy'](),this['_quadRende'+'rerCube']=null,(_0xdabead=this['_evtDevice'+'Restored'])==null||_0xdabead['off'](),this['_evtDevice'+'Restored']=null;}static['create'](_0x24bb3c,_0x4b138c){w['assert'](_0x24bb3c);const _0x3f4ac4=new Vp(_0x24bb3c['device'],_0x4b138c);return _0x3f4ac4['init'](_0x24bb3c),_0x3f4ac4['colorOps']['clear']=!(-0x12b6+-0x97+0x134e),_0x3f4ac4['depthStenc'+'ilOps']['clearDepth']=!(-0x21b*-0x11+0x1887+-0x3*0x141b),_0x3f4ac4;}['onDeviceRe'+'stored'](){this['_forceCopy']=!(0x26f6+-0x7c3*-0x5+-0x4dc5);}['update'](_0x30abc9){const _0x575a29=this['_filteredL'+'ights'];this['filter'](_0x30abc9,_0x575a29),this['executeEna'+'bled']=_0x575a29['length']>0x7*0x62+0x22f4+-0x25a2;}['filter'](_0x50c07c,_0x5aa638){for(let _0x116aac=-0x25de+0x27*0x99+0xe8f;_0x116aac<_0x50c07c['length'];_0x116aac++){const _0x262f08=_0x50c07c[_0x116aac];_0x262f08['_type']!==ve&&_0x262f08['atlasViewp'+'ortAllocat'+'ed']&&(!_0x262f08['atlasSlotU'+'pdated']&&!this['_forceCopy']||_0x262f08['enabled']&&_0x262f08['cookie']&&_0x262f08['visibleThi'+'sFrame']&&_0x5aa638['push'](_0x262f08));}this['_forceCopy']=!(-0x143*-0x1+0x209f+0x4d7*-0x7);}['initInvVie'+'wProjMatri'+'ces'](){if(!Nd['length'])for(let _0xdb6e18=0x1*0x172e+-0x27b+-0x14b3;_0xdb6e18<-0x1eeb*-0x1+0x6df*-0x1+-0x1806;_0xdb6e18++){const _0x4537ad=kn['create'](null,Ke,_0xdb6e18),_0x163a18=_0x4537ad['projection'+'Matrix'],_0x110a2b=_0x4537ad['node']['getLocalTr'+'ansform']()['clone']()['invert']();Nd[_0xdb6e18]=new te()['mul2'](_0x163a18,_0x110a2b)['invert']();}}get['quadRender'+'er2D'](){if(!this['_quadRende'+'rer2D']){const _0x1720f9=$t['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'erer2d','attributes':{'vertex_position':Pe},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'2DPS'});this['_quadRende'+'rer2D']=new rh(_0x1720f9);}return this['_quadRende'+'rer2D'];}get['quadRender'+'erCube'](){if(!this['_quadRende'+'rerCube']){const _0x22e792=$t['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'ererCube','attributes':{'vertex_position':Pe},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'CubePS'});this['_quadRende'+'rerCube']=new rh(_0x22e792);}return this['_quadRende'+'rerCube'];}['execute'](){const _0xcb6ba0=this['device'];_0xcb6ba0['setBlendSt'+'ate'](pt['NOBLEND']),_0xcb6ba0['setCullMod'+'e'](bt),_0xcb6ba0['setDepthSt'+'ate'](Yt['NODEPTH']),_0xcb6ba0['setStencil'+'State']();const _0x5165e0=this['renderTarg'+'et']['colorBuffe'+'r']['width'],_0x3f0069=this['_cubeSlots'+'Offsets'],_0x33de32=this['_filteredL'+'ights'];for(let _0x4d3351=-0x4fa*0x2+0x387*-0x5+-0x1*-0x1b97;_0x4d3351<_0x33de32['length'];_0x4d3351++){const _0x4ff910=_0x33de32[_0x4d3351];Q['pushGpuMar'+'ker'](this['device'],'COOKIE\x20'+_0x4ff910['_node']['name']);const _0x63f425=_0x4ff910['numShadowF'+'aces'],_0x1b66d3=_0x63f425>-0x1e1d+-0x1fa3+0x3dc1?this['quadRender'+'erCube']:this['quadRender'+'er2D'];_0x63f425>-0x23dc+0x1212+0x11cb&&this['initInvVie'+'wProjMatri'+'ces'](),this['blitTextur'+'eId']['setValue'](_0x4ff910['cookie']);for(let _0x29f38a=-0x23b*0x1+0x163c+0x1401*-0x1;_0x29f38a<_0x63f425;_0x29f38a++){if(ir['copy'](_0x4ff910['atlasViewp'+'ort']),_0x63f425>0xc31+0x6*-0x48c+-0x5c*-0x2a){const _0x426465=ir['z']/(0x6c3+-0x228b+0x1bcb),_0x141782=_0x3f0069[_0x29f38a];ir['x']+=_0x426465*_0x141782['x'],ir['y']+=_0x426465*_0x141782['y'],ir['z']=_0x426465,ir['w']=_0x426465,this['invViewPro'+'jId']['setValue'](Nd[_0x29f38a]['data']);}ir['mulScalar'](_0x5165e0),_0x1b66d3['render'](ir);}Q['popGpuMark'+'er'](_0xcb6ba0);}_0x33de32['length']=-0x24d3+0x2*0xda+0x1*0x231f;}}class ab extends ys{constructor(_0x341a73,_0x7b7a3d,_0x31ff4a){super(_0x341a73),this['requiresCu'+'bemaps']=!(0x48b*0x7+0x1b27+-0x3af3),this['shadowRend'+'erer']=_0x7b7a3d,this['shadowRend'+'ererLocal']=_0x31ff4a;}['update'](_0xaeb92b){const _0x3b4358=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x1f1265=this['shadowRend'+'ererLocal']['prepareLig'+'hts'](_0x3b4358,_0xaeb92b),_0x23177a=_0x3b4358['length'];this['enabled']=_0x23177a>-0x2369+0x1335+-0x81a*-0x2,_0x23177a&&this['shadowRend'+'erer']['setupRende'+'rPass'](this,_0x1f1265,!(0x1517+-0x1*-0x1876+0xa*-0x48e));}['execute'](){const _0x399c79=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x2473ec=_0x399c79['length'];for(let _0x25aa12=-0x2cc*0x5+-0xd*0x14b+-0x1*-0x1ecb;_0x25aa12<_0x2473ec;_0x25aa12++){const _0x59c05e=_0x399c79[_0x25aa12];for(let _0x13e376=-0x11b7*-0x2+0x35b*0x1+-0x26c9;_0x13e376<_0x59c05e['numShadowF'+'aces'];_0x13e376++)this['shadowRend'+'erer']['renderFace'](_0x59c05e,null,_0x13e376,!(-0x919+0x123a+-0x921));}_0x399c79['length']=-0x9b*0x3a+-0x10f+0x1b*0x157;}}class nb extends ys{constructor(_0x150459,_0x49b05c,_0x362684,_0x23c15c,_0x18f0c6){super(_0x150459),this['renderer']=_0x49b05c,this['frameGraph']=null,this['cookiesRen'+'derPass']=Vp['create'](_0x18f0c6['cookieRend'+'erTarget'],_0x18f0c6['cubeSlotsO'+'ffsets']),this['beforePass'+'es']['push'](this['cookiesRen'+'derPass']),this['shadowRend'+'erPass']=new ab(_0x150459,_0x362684,_0x23c15c),this['beforePass'+'es']['push'](this['shadowRend'+'erPass']);}['update'](_0x4aa810,_0x472587,_0x5ae1b8,_0x1ca05e,_0x30af54){this['frameGraph']=_0x4aa810,this['cookiesRen'+'derPass']['enabled']=_0x5ae1b8,_0x5ae1b8&&this['cookiesRen'+'derPass']['update'](_0x1ca05e),this['shadowRend'+'erPass']['enabled']=_0x472587,_0x472587&&this['shadowRend'+'erPass']['update'](_0x30af54);}['destroy'](){this['cookiesRen'+'derPass']['destroy'](),this['cookiesRen'+'derPass']=null;}['execute'](){const _0x320a6c=de(),{renderer:_0x2b7717}=this,{scene:_0x1674bf}=_0x2b7717;_0x2b7717['worldClust'+'ersAllocat'+'or']['update'](this['frameGraph']['renderPass'+'es'],_0x1674bf['lighting']),_0x2b7717['_lightClus'+'tersTime']+=de()-_0x320a6c,_0x2b7717['_lightClus'+'ters']=_0x2b7717['worldClust'+'ersAllocat'+'or']['count'];}}let kd=-0x24fb*0x1+-0x2*-0xcb9+-0xb89*-0x1;const rr=new te(),ar=new te(),Ma=new te(),S_=new _i(),Ud=new Mu(),y_=new te()['setScale'](-0x112*0x19+0x6b*0x5d+-0xc1c,-(0x2107+-0x1e5b+-0x1*0x2ab),0xb2b*0x1+0x21ce+-0x2cf8*0x1),Bd=new Set(),zd=new Set(),Vd=new ty(),v_=new te()['set']([-0x15f0+0x1828+0x51*-0x7,0x44*0x35+0x1d89+-0x2b9d,-0x725+-0x204f+0x2774,-0x7ad+0x16b1*-0x1+-0xf2f*-0x2,0xe8+0x5b6+0x79*-0xe,-0x1b03+-0x1f64+0x3a68,0x172d+0xe6e*0x1+-0x259b,0x16d+0x254c+-0x1*0x26b9,-0x151d+0x67e*-0x1+0x1b9b,-0x1*0x265f+0x22c1+0x39e,-0x1a7*-0xe+0x1*-0xa36+-0xcec+0.5,-0x70*0x33+0x3*-0x69d+0x6d*0x63,-0x3b7*-0x6+0x299*0x1+-0x18e3,-0x2*0x8e2+0x1d90+-0xbcc,0x44+-0x23a4+0x20*0x11b+0.5,-0x6df+-0x132e+0x1a0e]),x_=[new J(0x5*-0x233+0x12*0x2e+0x7c3+0.5,0x1c97+0x17fc+0x139*-0x2b+0.333333),new J(-0xa8d*-0x1+-0x952+-0x2d*0x7+0.25,0x1699+-0x66a*-0x1+-0x1*0x1d03+0.666667),new J(0x1161*-0x2+0x2*-0x11d1+0x1199*0x4+0.75,-0x2*0xbe6+-0x76d*-0x1+0x7f*0x21+0.111111),new J(0x3*0xbd3+-0x437*0x2+-0x1b0b+0.125,-0x3bc*0x4+0x8*-0x122+0x100*0x18+0.444444),new J(0xb4a+0xa*-0x191+0xe0*0x5+0.625,-0x77c+0x1e7*0xe+-0x1326+0.777778),new J(0x13cf*0x1+-0x1931*0x1+0x562+0.375,0x171a+-0x1024+-0x42*0x1b+0.222222),new J(0xcd8+0x3*0x44f+-0x2dd*0x9+0.875,-0x1*0x1ec3+-0x2689+0x454c+0.555556),new J(0x1d95+0x1*-0x1dfc+0x1*0x67+0.0625,0x1*-0x2149+0x16cc+0xa7d+0.888889),new J(-0x13*0x2e+-0x45*0x4+-0x5*-0xe6+0.5625,0xbcb*0x1+-0xd*-0x1f7+-0x2556+0.037037),new J(0x1*0x84f+-0x817+-0x38+0.3125,0x5e1+0x1f*-0x28+-0x5*0x35+0.37037),new J(0x16dd*-0x1+-0x461+0x1b3e+0.8125,0x4*-0x5d+-0x1bce+0x1d42+0.703704),new J(0x1823+-0x1b7+-0x59b*0x4+0.1875,-0x7d0+0x1423+0x1*-0xc53+0.148148),new J(0x3f5*-0x2+-0x43a+0xc24+0.6875,0x1db6+-0x86*0x25+-0xa58+0.481481),new J(-0x24*0x54+-0x3b*0x97+0x2e9d+0.4375,0x1dc3+0x53+0x1e16*-0x1+0.814815),new J(0x6f+0x3f*-0x99+0x2538+0.9375,-0xc84+-0x1059*-0x1+-0x3*0x147+0.259259),new J(-0x1*0x8b3+-0x20d9+0x298c+0.03125,-0x1405+0x13*-0x175+-0x1*-0x2fb4+0.592593)],ob=new te(),lb=new te(),cb=new te(),hb=new te(),db=new te(),fb=new te(),Da=new Set(),Gd=[],Hd=[];class ub{constructor(_0xf7d350){h(this,'clustersDe'+'bugRendere'+'d',!(-0x101*-0x5+0x3*-0x17c+-0x90)),h(this,'processing'+'MeshInstan'+'ces',new Set()),h(this,'worldClust'+'ersAllocat'+'or'),h(this,'lights',[]),h(this,'localLight'+'s',[]),h(this,'cameraDirS'+'hadowLight'+'s',new Map()),h(this,'dirLightSh'+'adows',new Map()),h(this,'blueNoise',new VE(-0x9*-0x407+-0x932+-0x1*0x1a92)),(this['device']=_0xf7d350,this['scene']=null,this['worldClust'+'ersAllocat'+'or']=new rb(_0xf7d350),this['lightTextu'+'reAtlas']=new YE(_0xf7d350),this['shadowMapC'+'ache']=new KE(),this['shadowRend'+'erer']=new $y(this,this['lightTextu'+'reAtlas']),this['_shadowRen'+'dererLocal']=new QE(this,this['shadowRend'+'erer']),this['_shadowRen'+'dererDirec'+'tional']=new tb(this,this['shadowRend'+'erer']),this['_renderPas'+'sUpdateClu'+'stered']=new nb(this['device'],this,this['shadowRend'+'erer'],this['_shadowRen'+'dererLocal'],this['lightTextu'+'reAtlas']),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['_skinTime']=-0xb2*-0x13+-0x1d4+-0xb62,this['_morphTime']=-0xf19+-0xa6*0x17+0x1e03,this['_cullTime']=-0xe9f+0x419*0x1+0xa86,this['_shadowMap'+'Time']=-0x9*0x12d+0x96c+-0x1*-0x129,this['_lightClus'+'tersTime']=0x1*-0x85+-0x5e*-0x1+0x3*0xd,this['_layerComp'+'ositionUpd'+'ateTime']=-0x25c0+-0xe74+0x3434,this['_shadowDra'+'wCalls']=0x25*-0x10d+0x1672+0x106f,this['_skinDrawC'+'alls']=-0x10a1+-0x28+0x10c9,this['_instanced'+'DrawCalls']=-0x1*0x171e+0xa2+0x4*0x59f,this['_shadowMap'+'Updates']=0x1*-0x146f+0x2*-0xabe+0x29eb,this['_numDrawCa'+'llsCulled']=0x5*0x1eb+-0x7*0x2eb+0x26*0x49,this['_camerasRe'+'ndered']=-0x26ec+0x15b*0x1+0x2591,this['_lightClus'+'ters']=-0x362+0xdd7+-0x1*0xa75);const _0x59696f=_0xf7d350['scope'];this['boneTextur'+'eId']=_0x59696f['resolve']('texture_po'+'seMap'),this['modelMatri'+'xId']=_0x59696f['resolve']('matrix_mod'+'el'),this['normalMatr'+'ixId']=_0x59696f['resolve']('matrix_nor'+'mal'),this['viewInvId']=_0x59696f['resolve']('matrix_vie'+'wInverse'),this['viewPos']=new Float32Array(-0x2*0x515+0x195b+-0xf2e),this['viewPosId']=_0x59696f['resolve']('view_posit'+'ion'),this['projId']=_0x59696f['resolve']('matrix_pro'+'jection'),this['projSkybox'+'Id']=_0x59696f['resolve']('matrix_pro'+'jectionSky'+'box'),this['viewId']=_0x59696f['resolve']('matrix_vie'+'w'),this['viewId3']=_0x59696f['resolve']('matrix_vie'+'w3'),this['viewProjId']=_0x59696f['resolve']('matrix_vie'+'wProjectio'+'n'),this['flipYId']=_0x59696f['resolve']('projection'+'FlipY'),this['tbnBasis']=_0x59696f['resolve']('tbnBasis'),this['nearClipId']=_0x59696f['resolve']('camera_nea'+'r'),this['farClipId']=_0x59696f['resolve']('camera_far'),this['cameraPara'+'ms']=new Float32Array(-0x162*0x5+0x4*0x4af+-0xbce*0x1),this['cameraPara'+'msId']=_0x59696f['resolve']('camera_par'+'ams'),this['viewIndexI'+'d']=_0x59696f['resolve']('view_index'),this['viewIndexI'+'d']['setValue'](-0x1b8d+0x1f9a+-0x40d),this['blueNoiseJ'+'itterVersi'+'on']=0xf6f+-0x19ab+-0x2*-0x51e,this['blueNoiseJ'+'itterVec']=new re(),this['blueNoiseJ'+'itterData']=new Float32Array(0x17b9+0x5*0x6d9+-0x39f2),this['blueNoiseJ'+'itterId']=_0x59696f['resolve']('blueNoiseJ'+'itter'),this['blueNoiseT'+'extureId']=_0x59696f['resolve']('blueNoiseT'+'ex32'),this['alphaTestI'+'d']=_0x59696f['resolve']('alpha_ref'),this['opacityMap'+'Id']=_0x59696f['resolve']('texture_op'+'acityMap'),this['exposureId']=_0x59696f['resolve']('exposure'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']=_0x59696f['resolve']('twoSidedLi'+'ghtingNegS'+'caleFactor'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](-0x1*-0x2447+-0x3a5+-0x20a2),this['morphPosit'+'ionTex']=_0x59696f['resolve']('morphPosit'+'ionTex'),this['morphNorma'+'lTex']=_0x59696f['resolve']('morphNorma'+'lTex'),this['morphTexPa'+'rams']=_0x59696f['resolve']('morph_tex_'+'params'),this['lightCube']=new HE(),this['constantLi'+'ghtCube']=_0x59696f['resolve']('lightCube['+'0]');}['destroy'](){this['shadowRend'+'erer']=null,this['_shadowRen'+'dererLocal']=null,this['_shadowRen'+'dererDirec'+'tional']=null,this['shadowMapC'+'ache']['destroy'](),this['shadowMapC'+'ache']=null,this['_renderPas'+'sUpdateClu'+'stered']['destroy'](),this['_renderPas'+'sUpdateClu'+'stered']=null,this['lightTextu'+'reAtlas']['destroy'](),this['lightTextu'+'reAtlas']=null;}['setupViewp'+'ort'](_0x552d0c,_0x286019){const _0x3dfea1=this['device'],_0x4a7cc5=_0x286019?_0x286019['width']:_0x3dfea1['width'],_0x238985=_0x286019?_0x286019['height']:_0x3dfea1['height'],_0x411f87=_0x552d0c['rect'];let _0x3e394d=Math['floor'](_0x411f87['x']*_0x4a7cc5),_0x1e4f38=Math['floor'](_0x411f87['y']*_0x238985),_0x21ec13=Math['floor'](_0x411f87['z']*_0x4a7cc5),_0x561602=Math['floor'](_0x411f87['w']*_0x238985);if(_0x3dfea1['setViewpor'+'t'](_0x3e394d,_0x1e4f38,_0x21ec13,_0x561602),_0x552d0c['_scissorRe'+'ctClear']){const _0x21f47a=_0x552d0c['scissorRec'+'t'];_0x3e394d=Math['floor'](_0x21f47a['x']*_0x4a7cc5),_0x1e4f38=Math['floor'](_0x21f47a['y']*_0x238985),_0x21ec13=Math['floor'](_0x21f47a['z']*_0x4a7cc5),_0x561602=Math['floor'](_0x21f47a['w']*_0x238985);}_0x3dfea1['setScissor'](_0x3e394d,_0x1e4f38,_0x21ec13,_0x561602);}['setCameraU'+'niforms'](_0x1707fe,_0x373c4e){var _0xd6513b,_0x20f404;const _0x2b2dba=_0x373c4e==null?void(0x2111+0x2d*-0x5b+-0x1112):_0x373c4e['flipY'];let _0x4fd424=null;if(_0x1707fe['xr']&&_0x1707fe['xr']['session']){const _0x22b197=((_0x20f404=(_0xd6513b=_0x1707fe['_node'])==null?void(0x13b2+0xe8*-0x7+-0x6ad*0x2):_0xd6513b['parent'])==null?void(0x1*-0x15ce+-0x1f8+0x22*0xb3):_0x20f404['getWorldTr'+'ansform']())||null;_0x4fd424=_0x1707fe['xr']['views']['list'];for(let _0x2f4269=-0x1*0x93c+-0x116*-0x1b+0xa0b*-0x2;_0x2f4269<_0x4fd424['length'];_0x2f4269++){const _0x543ced=_0x4fd424[_0x2f4269];_0x543ced['updateTran'+'sforms'](_0x22b197),_0x1707fe['frustum']['setFromMat'+'4'](_0x543ced['projViewOf'+'fMat']);}}else{let _0x4813fc=_0x1707fe['projection'+'Matrix'];_0x1707fe['calculateP'+'rojection']&&_0x1707fe['calculateP'+'rojection'](_0x4813fc,zl);let _0x5d49ea=_0x1707fe['getProject'+'ionMatrixS'+'kybox']();_0x2b2dba&&(_0x4813fc=ob['mul2'](y_,_0x4813fc),_0x5d49ea=lb['mul2'](y_,_0x5d49ea)),this['device']['isWebGPU']&&(_0x4813fc=cb['mul2'](v_,_0x4813fc),_0x5d49ea=hb['mul2'](v_,_0x5d49ea));const {jitter:_0x38de29}=_0x1707fe;let _0x3c70ee=0x147*-0x2+0x1*-0x669+0x8f7,_0x302ffc=0xe28+-0xfdb+0x1b3*0x1;if(_0x38de29>-0x262e+-0x1b98*-0x1+0x54b*0x2){const _0x202075=_0x373c4e?_0x373c4e['width']:this['device']['width'],_0x350110=_0x373c4e?_0x373c4e['height']:this['device']['height'],_0x56e5af=x_[this['device']['renderVers'+'ion']%x_['length']];_0x3c70ee=_0x38de29*(_0x56e5af['x']*(0xa8*0x7+-0x2b*0x53+0x95b)-(-0x1f90+-0xd36+-0xeed*-0x3))/_0x202075,_0x302ffc=_0x38de29*(_0x56e5af['y']*(0x1*-0x1115+0x9d*0x3d+-0x9*0x242)-(-0x1*-0x247b+0x182e+-0xc*0x50e))/_0x350110,_0x4813fc=db['copy'](_0x4813fc),_0x4813fc['data'][0x176*-0x18+-0x656*0x5+-0x1*-0x42c6]=_0x3c70ee,_0x4813fc['data'][-0x5*0x5c2+-0x1*0x18e5+-0x18*-0x23d]=_0x302ffc,_0x5d49ea=fb['copy'](_0x5d49ea),_0x5d49ea['data'][0x979*0x1+-0x1*-0x2355+0x16*-0x209]=_0x3c70ee,_0x5d49ea['data'][0x1f55+0x1dd*0x1+0x1*-0x2129]=_0x302ffc,this['blueNoiseJ'+'itterVersi'+'on']!==this['device']['renderVers'+'ion']&&(this['blueNoiseJ'+'itterVersi'+'on']=this['device']['renderVers'+'ion'],this['blueNoise']['vec4'](this['blueNoiseJ'+'itterVec']));}const _0x3fee5e=_0x38de29>0x4a7+-0x8d0+0xd5*0x5?this['blueNoiseJ'+'itterVec']:re['ZERO'];if(this['blueNoiseJ'+'itterData'][-0xb2d*0x1+-0x39*-0x82+-0x11c5]=_0x3fee5e['x'],this['blueNoiseJ'+'itterData'][0x477*0x3+0x1*-0x1ebf+0x3*0x5c9]=_0x3fee5e['y'],this['blueNoiseJ'+'itterData'][-0x7d0*-0x4+-0x143a+-0x5*0x234]=_0x3fee5e['z'],this['blueNoiseJ'+'itterData'][-0x2666+0x116b+0x14fe]=_0x3fee5e['w'],this['blueNoiseJ'+'itterId']['setValue'](this['blueNoiseJ'+'itterData']),this['projId']['setValue'](_0x4813fc['data']),this['projSkybox'+'Id']['setValue'](_0x5d49ea['data']),_0x1707fe['calculateT'+'ransform'])_0x1707fe['calculateT'+'ransform'](ar,zl);else{const _0xd40faf=_0x1707fe['_node']['getPositio'+'n'](),_0x2dc911=_0x1707fe['_node']['getRotatio'+'n']();ar['setTRS'](_0xd40faf,_0x2dc911,D['ONE']);}this['viewInvId']['setValue'](ar['data']),Ma['copy'](ar)['invert'](),this['viewId']['setValue'](Ma['data']),S_['setFromMat'+'4'](Ma),this['viewId3']['setValue'](S_['data']),rr['mul2'](_0x4813fc,Ma),this['viewProjId']['setValue'](rr['data']),_0x1707fe['_storeShad'+'erMatrices'](rr,_0x3c70ee,_0x302ffc,this['device']['renderVers'+'ion']),this['flipYId']['setValue'](_0x2b2dba?-(0x993*0x4+-0x261f+-0x2c):0x1ec4+0xb9e*0x2+-0x35ff),this['dispatchVi'+'ewPos'](_0x1707fe['_node']['getPositio'+'n']()),_0x1707fe['frustum']['setFromMat'+'4'](rr);}this['tbnBasis']['setValue'](_0x2b2dba?-(-0x1cec+-0x1*-0x1453+-0x16f*-0x6):0x1*-0x637+0xa*-0x171+0x14a2);const _0x3dc090=_0x1707fe['_nearClip'],_0x3133ec=_0x1707fe['_farClip'];return this['nearClipId']['setValue'](_0x3dc090),this['farClipId']['setValue'](_0x3133ec),this['cameraPara'+'ms'][-0xc9a+0x33*-0x47+0x1*0x1abf]=(-0x92d+0x229*-0xd+0x1*0x2543)/_0x3133ec,this['cameraPara'+'ms'][-0x98*0x24+-0x2*-0x122e+-0xefb]=_0x3133ec,this['cameraPara'+'ms'][0x5c*0x43+-0x1*0x1e38+-0x313*-0x2]=_0x3dc090,this['cameraPara'+'ms'][-0x1*0x2521+-0x851+0x2d75]=_0x1707fe['projection']===gn?0x1cbc+-0xb5*0x1d+-0x51*0x1a:0xdb*0xf+0x1823+0xa9*-0x38,this['cameraPara'+'msId']['setValue'](this['cameraPara'+'ms']),this['exposureId']['setValue'](this['scene']['physicalUn'+'its']?_0x1707fe['getExposur'+'e']():this['scene']['exposure']),_0x4fd424;}['clear'](_0x1260a1,_0x54d898,_0x3ee567,_0x336a43){const _0x2c701c=(_0x54d898??_0x1260a1['_clearColo'+'rBuffer']?Fo:-0x366+-0x190b+0x1c71)|(_0x3ee567??_0x1260a1['_clearDept'+'hBuffer']?No:-0xbde+0x8e6+-0x5f*-0x8)|(_0x336a43??_0x1260a1['_clearSten'+'cilBuffer']?Vc:0x165*-0xa+-0x2e*0x4c+0x1b9a);if(_0x2c701c){const _0x1557a5=this['device'];Q['pushGpuMar'+'ker'](_0x1557a5,'CLEAR'),_0x1557a5['clear']({'color':[_0x1260a1['_clearColo'+'r']['r'],_0x1260a1['_clearColo'+'r']['g'],_0x1260a1['_clearColo'+'r']['b'],_0x1260a1['_clearColo'+'r']['a']],'depth':_0x1260a1['_clearDept'+'h'],'stencil':_0x1260a1['_clearSten'+'cil'],'flags':_0x2c701c}),Q['popGpuMark'+'er'](_0x1557a5);}}['setCamera'](_0x555a3b,_0x5cece0,_0x52ab10,_0x4917b9=null){this['setCameraU'+'niforms'](_0x555a3b,_0x5cece0),this['clearView'](_0x555a3b,_0x5cece0,_0x52ab10,!(0x11f9*0x1+-0x1cba+-0xac2*-0x1));}['clearView'](_0x577ad9,_0x40dc65,_0x5846b2,_0x419a81){const _0x4c663a=this['device'];if(Q['pushGpuMar'+'ker'](_0x4c663a,'CLEAR-VIEW'),_0x4c663a['setRenderT'+'arget'](_0x40dc65),_0x4c663a['updateBegi'+'n'](),_0x419a81&&(_0x4c663a['setColorWr'+'ite'](!(-0x1f0a+0x1a28+0x4e2),!(0x1*0xcfb+-0x148+-0x1*0xbb3),!(-0x3*0x7cd+0x661*0x2+-0x19*-0x6d),!(-0x6ef+-0x72b*0x2+0x1545)),_0x4c663a['setDepthWr'+'ite'](!(-0x1ad7*0x1+-0x3e*-0x86+0x1df*-0x3))),this['setupViewp'+'ort'](_0x577ad9,_0x40dc65),_0x5846b2){const _0x585b94=_0x577ad9['_clearOpti'+'ons'];_0x4c663a['clear'](_0x585b94||{'color':[_0x577ad9['_clearColo'+'r']['r'],_0x577ad9['_clearColo'+'r']['g'],_0x577ad9['_clearColo'+'r']['b'],_0x577ad9['_clearColo'+'r']['a']],'depth':_0x577ad9['_clearDept'+'h'],'flags':(_0x577ad9['_clearColo'+'rBuffer']?Fo:-0x24*-0x61+-0x207*-0xb+-0x1*0x23f1)|(_0x577ad9['_clearDept'+'hBuffer']?No:-0x4*-0xb5+-0x20b*-0x7+-0x1121*0x1)|(_0x577ad9['_clearSten'+'cilBuffer']?Vc:-0xe2d+0x1*0x63a+0x7f3),'stencil':_0x577ad9['_clearSten'+'cil']});}Q['popGpuMark'+'er'](_0x4c663a);}['setupCullM'+'ode'](_0x489ad2,_0x13beb6,_0x2b361e){const _0x257d2d=_0x2b361e['material'];let _0x48494b=bt;if(_0x489ad2){let _0x369ba3=0x227a+-0x2250+-0x29*0x1;(_0x257d2d['cull']===wo||_0x257d2d['cull']===ca)&&(_0x369ba3=_0x13beb6*_0x2b361e['flipFacesF'+'actor']*_0x2b361e['node']['worldScale'+'Sign']),_0x369ba3<0x101*-0x11+-0x111e+0x222f?_0x48494b=_0x257d2d['cull']===wo?ca:wo:_0x48494b=_0x257d2d['cull'];}this['device']['setCullMod'+'e'](_0x48494b),_0x48494b===bt&&_0x257d2d['cull']===bt&&this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](_0x2b361e['node']['worldScale'+'Sign']);}['updateCame'+'raFrustum'](_0x451981){if(_0x451981['xr']&&_0x451981['xr']['views']['list']['length']){const _0x409cd6=_0x451981['xr']['views']['list'][-0x35*-0xb1+0xddc+-0x3281];rr['mul2'](_0x409cd6['projMat'],_0x409cd6['viewOffMat']),_0x451981['frustum']['setFromMat'+'4'](rr);return;}const _0x2ce77b=_0x451981['projection'+'Matrix'];if(_0x451981['calculateP'+'rojection']&&_0x451981['calculateP'+'rojection'](_0x2ce77b,zl),_0x451981['calculateT'+'ransform'])_0x451981['calculateT'+'ransform'](ar,zl);else{const _0x29f9ff=_0x451981['_node']['getPositio'+'n'](),_0x2a132f=_0x451981['_node']['getRotatio'+'n']();ar['setTRS'](_0x29f9ff,_0x2a132f,D['ONE']),this['viewInvId']['setValue'](ar['data']);}Ma['copy'](ar)['invert'](),rr['mul2'](_0x2ce77b,Ma),_0x451981['frustum']['setFromMat'+'4'](rr);}['setBaseCon'+'stants'](_0x37400e,_0x143227){_0x37400e['setCullMod'+'e'](_0x143227['cull']),_0x143227['opacityMap']&&this['opacityMap'+'Id']['setValue'](_0x143227['opacityMap']),(_0x143227['opacityMap']||_0x143227['alphaTest']>0x1a39+-0x1a8f*-0x1+-0x34c8)&&this['alphaTestI'+'d']['setValue'](_0x143227['alphaTest']);}['updateCpuS'+'kinMatrice'+'s'](_0xbc1e2d){kd++;const _0x495412=_0xbc1e2d['length'];if(_0x495412===-0x8b5*-0x2+0x8c*0x43+-0x4a*0xbb)return;const _0x5ababd=de();for(let _0x44bc24=-0x2fb*-0x3+-0x1915*0x1+0x1024;_0x44bc24<_0x495412;_0x44bc24++){const _0x4715d7=_0xbc1e2d[_0x44bc24]['skinInstan'+'ce'];_0x4715d7&&(_0x4715d7['updateMatr'+'ices'](_0xbc1e2d[_0x44bc24]['node'],kd),_0x4715d7['_dirty']=!(0xa*0x116+0x157f+-0x205b*0x1));}this['_skinTime']+=de()-_0x5ababd;}['updateGpuS'+'kinMatrice'+'s'](_0x3fdee7){const _0x22f25b=de();for(const _0x1547f3 of _0x3fdee7){const _0x1683d4=_0x1547f3['skinInstan'+'ce'];_0x1683d4&&_0x1683d4['_dirty']&&(_0x1683d4['updateMatr'+'ixPalette'](_0x1547f3['node'],kd),_0x1683d4['_dirty']=!(-0xcd8+-0x1f5c+0x2c35));}this['_skinTime']+=de()-_0x22f25b;}['updateMorp'+'hing'](_0x2719c1){const _0x5abff4=de();for(const _0x2ff8da of _0x2719c1){const _0x567add=_0x2ff8da['morphInsta'+'nce'];_0x567add&&_0x567add['_dirty']&&_0x567add['update']();}this['_morphTime']+=de()-_0x5abff4;}['updateGSpl'+'ats'](_0x462498){var _0x22842f;for(const _0x25917b of _0x462498)(_0x22842f=_0x25917b['gsplatInst'+'ance'])==null||_0x22842f['update']();}['gpuUpdate'](_0x415ca8){this['updateGpuS'+'kinMatrice'+'s'](_0x415ca8),this['updateMorp'+'hing'](_0x415ca8),this['updateGSpl'+'ats'](_0x415ca8);}['setVertexB'+'uffers'](_0x51ee05,_0x37357a){_0x51ee05['setVertexB'+'uffer'](_0x37357a['vertexBuff'+'er']);}['setMorphin'+'g'](_0x2a497e,_0x33bcac){_0x33bcac&&(_0x33bcac['prepareRen'+'dering'](_0x2a497e),_0x2a497e['setVertexB'+'uffer'](_0x33bcac['morph']['vertexBuff'+'erIds']),this['morphPosit'+'ionTex']['setValue'](_0x33bcac['texturePos'+'itions']),this['morphNorma'+'lTex']['setValue'](_0x33bcac['textureNor'+'mals']),this['morphTexPa'+'rams']['setValue'](_0x33bcac['_texturePa'+'rams']));}['setSkinnin'+'g'](_0x4d03c8,_0x4a8e72){const _0x7a2fad=_0x4a8e72['skinInstan'+'ce'];if(_0x7a2fad){this['_skinDrawC'+'alls']++;const _0x895e1=_0x7a2fad['boneTextur'+'e'];this['boneTextur'+'eId']['setValue'](_0x895e1);}}['dispatchVi'+'ewPos'](_0x2d313c){const _0x10a181=this['viewPos'];_0x10a181[-0x11af+0x8ce+0x8e1*0x1]=_0x2d313c['x'],_0x10a181[-0xaa3+0x1d00+-0x125c]=_0x2d313c['y'],_0x10a181[-0x14c4+0x1e88+0x1*-0x9c2]=_0x2d313c['z'],this['viewPosId']['setValue'](_0x10a181);}['initViewBi'+'ndGroupFor'+'mat'](_0x48702a){if(this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']){const _0x2bff9e=[new dt('matrix_vie'+'w',li),new dt('matrix_vie'+'wInverse',li),new dt('matrix_pro'+'jection',li),new dt('matrix_pro'+'jectionSky'+'box',li),new dt('matrix_vie'+'wProjectio'+'n',li),new dt('matrix_vie'+'w3',Cn),new dt('cubeMapRot'+'ationMatri'+'x',Cn),new dt('view_posit'+'ion',ds),new dt('skyboxInte'+'nsity',$s),new dt('exposure',$s),new dt('textureBia'+'s',$s),new dt('view_index',$s)];_0x48702a&&_0x2bff9e['push'](new dt('clusterCel'+'lsCountByB'+'oundsSize',ds),new dt('clusterTex'+'tureSize',ds),new dt('clusterBou'+'ndsMin',ds),new dt('clusterBou'+'ndsDelta',ds),new dt('clusterCel'+'lsDot',ds),new dt('clusterCel'+'lsMax',ds),new dt('shadowAtla'+'sParams',fa),new dt('clusterMax'+'Cells',da),new dt('clusterSki'+'p',$s)),this['viewUnifor'+'mFormat']=new ry(this['device'],_0x2bff9e);const _0x2f9705=[new hp(cp,lp|HS)];this['viewBindGr'+'oupFormat']=new ey(this['device'],_0x2f9705);}}['setupViewU'+'niforms'](_0x3c1789,_0x257056){this['projId']['setValue'](_0x3c1789['projMat']['data']),this['projSkybox'+'Id']['setValue'](_0x3c1789['projMat']['data']),this['viewId']['setValue'](_0x3c1789['viewOffMat']['data']),this['viewInvId']['setValue'](_0x3c1789['viewInvOff'+'Mat']['data']),this['viewId3']['setValue'](_0x3c1789['viewMat3']['data']),this['viewProjId']['setValue'](_0x3c1789['projViewOf'+'fMat']['data']),this['viewPosId']['setValue'](_0x3c1789['positionDa'+'ta']),this['viewIndexI'+'d']['setValue'](_0x257056);}['setupViewU'+'niformBuff'+'ers'](_0x32a1cf,_0x5ec1a2,_0x3da426,_0x3014fc){w['assert'](Array['isArray'](_0x32a1cf),'viewBindGr'+'oups\x20must\x20'+'be\x20an\x20arra'+'y');const {device:_0x2d3a5c}=this,_0x32de7c=(_0x3014fc==null?void(-0x82+-0x906+0x988):_0x3014fc['length'])??-0x1*0x169c+-0x21*0x9e+0x2afb;for(;_0x32a1cf['length']<_0x32de7c;){const _0x3b3780=new up(_0x2d3a5c,_0x5ec1a2,!(-0x1*-0x14bd+-0x18d2+-0x1*-0x416)),_0x2d36a1=new dp(_0x2d3a5c,_0x3da426,_0x3b3780);ya['setName'](_0x2d36a1,'ViewBindGr'+'oup_'+_0x2d36a1['id']),_0x32a1cf['push'](_0x2d36a1);}if(_0x3014fc)for(let _0x371d6f=-0x2446*-0x1+0xfc8+0x115a*-0x3;_0x371d6f<_0x32de7c;_0x371d6f++){const _0x190d12=_0x3014fc[_0x371d6f];this['setupViewU'+'niforms'](_0x190d12,_0x371d6f);const _0x2390f4=_0x32a1cf[_0x371d6f];_0x2390f4['defaultUni'+'formBuffer']['update'](),_0x2390f4['update']();}else{const _0x2a7c7a=_0x32a1cf[0x542*0x1+-0x441+-0x101*0x1];_0x2a7c7a['defaultUni'+'formBuffer']['update'](),_0x2a7c7a['update']();}_0x3014fc||_0x2d3a5c['setBindGro'+'up']($o,_0x32a1cf[0xe84+0x1987*-0x1+0xb03*0x1]);}['setupMeshU'+'niformBuff'+'ers'](_0x520c55){const _0x18637b=this['device'];if(_0x18637b['supportsUn'+'iformBuffe'+'rs']){const _0x10dbde=_0x520c55['getBindGro'+'up'](_0x18637b);_0x10dbde['update'](),_0x18637b['setBindGro'+'up'](QS,_0x10dbde),_0x520c55['getUniform'+'Buffer'](_0x18637b)['update'](Vd),_0x18637b['setBindGro'+'up'](Df,Vd['bindGroup'],Vd['offsets']);}}['setMeshIns'+'tanceMatri'+'ces'](_0x1ade37,_0x4e7ce0=!(0x260b+-0x21b4*-0x1+-0x47be)){const _0x893c69=_0x1ade37['node']['worldTrans'+'form'];this['modelMatri'+'xId']['setValue'](_0x893c69['data']),_0x4e7ce0&&this['normalMatr'+'ixId']['setValue'](_0x1ade37['node']['normalMatr'+'ix']['data']);}['cull'](_0x5c3c07,_0x4c802e,_0x237cbd){const _0x597c71=de(),_0x3615c9=_0x237cbd['opaque'];_0x3615c9['length']=-0xefc*-0x1+0x1*0xee9+-0x9f7*0x3;const _0x38a723=_0x237cbd['transparen'+'t'];_0x38a723['length']=-0xb6a+0x2461+-0x18f7;const _0x29b70f=_0x5c3c07['frustumCul'+'ling'],_0x2ca705=_0x4c802e['length'];for(let _0x17da95=0x1*0x1b5b+-0x60*-0xe+-0x1eb*0x11;_0x17da95<_0x2ca705;_0x17da95++){const _0x370f58=_0x4c802e[_0x17da95];_0x370f58['visible']&&(!_0x29b70f||!_0x370f58['cull']||_0x370f58['_isVisible'](_0x5c3c07))&&(_0x370f58['visibleThi'+'sFrame']=!(-0x1*0x1efd+0x1*-0xaab+0x29a8),(_0x370f58['transparen'+'t']?_0x38a723:_0x3615c9)['push'](_0x370f58),(_0x370f58['skinInstan'+'ce']||_0x370f58['morphInsta'+'nce']||_0x370f58['gsplatInst'+'ance'])&&(this['processing'+'MeshInstan'+'ces']['add'](_0x370f58),_0x370f58['gsplatInst'+'ance']&&_0x370f58['gsplatInst'+'ance']['cameras']['push'](_0x5c3c07)));}this['_cullTime']+=de()-_0x597c71,this['_numDrawCa'+'llsCulled']+=_0x29b70f?_0x2ca705:-0xd6*0x21+-0x180d+0x33a3*0x1;}['collectLig'+'hts'](_0x2f3c95){this['lights']['length']=0x2b*-0x3+0x1ce2+-0x1c61,this['localLight'+'s']['length']=-0x122a+0x350+0xeda;const _0x124107=this['scene']['_stats'];_0x124107['dynamicLig'+'hts']=0xfbb*0x2+-0x1d3e+-0x238,_0x124107['bakedLight'+'s']=-0x1*0x2e7+-0x2*0x5bc+0xe5f;const _0x50ffc5=_0x2f3c95['layerList']['length'];for(let _0x1a3ddd=0xbc*-0x6+0x15a5+0x5bf*-0x3;_0x1a3ddd<_0x50ffc5;_0x1a3ddd++){const _0x51275d=_0x2f3c95['layerList'][_0x1a3ddd];if(!zd['has'](_0x51275d)){zd['add'](_0x51275d);const _0x1a74e1=_0x51275d['_lights'];for(let _0x4eea90=-0xb38+0x1816+0x16e*-0x9;_0x4eea90<_0x1a74e1['length'];_0x4eea90++){const _0x110b3a=_0x1a74e1[_0x4eea90];Bd['has'](_0x110b3a)||(Bd['add'](_0x110b3a),this['lights']['push'](_0x110b3a),_0x110b3a['_type']!==ve&&this['localLight'+'s']['push'](_0x110b3a),(_0x110b3a['mask']&Ss||_0x110b3a['mask']&di)&&_0x124107['dynamicLig'+'hts']++,_0x110b3a['mask']&fi&&_0x124107['bakedLight'+'s']++);}}}_0x124107['lights']=this['lights']['length'],Bd['clear'](),zd['clear']();}['cullLights'](_0x11d9c2,_0x35b78b){const _0xaa310f=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x1688d8=this['scene']['physicalUn'+'its'];for(let _0x5da634=0xd08+0x1*0xabf+-0x17c7;_0x5da634<_0x35b78b['length'];_0x5da634++){const _0x2f5aee=_0x35b78b[_0x5da634];if(_0x2f5aee['enabled']){if(_0x2f5aee['_type']!==ve){if(_0x2f5aee['getBoundin'+'gSphere'](Ud),_0x11d9c2['frustum']['containsSp'+'here'](Ud)){_0x2f5aee['visibleThi'+'sFrame']=!(-0x2fd+0x71e+-0x97*0x7),_0x2f5aee['usePhysica'+'lUnits']=_0x1688d8;const _0x362692=_0x11d9c2['getScreenS'+'ize'](Ud);_0x2f5aee['maxScreenS'+'ize']=Math['max'](_0x2f5aee['maxScreenS'+'ize'],_0x362692);}else _0xaa310f||_0x2f5aee['castShadow'+'s']&&!_0x2f5aee['shadowMap']&&(_0x2f5aee['visibleThi'+'sFrame']=!(-0x1c7*0x6+0x1d24+0xd7*-0x16));}else _0x2f5aee['usePhysica'+'lUnits']=this['scene']['physicalUn'+'its'];}}}['cullShadow'+'maps'](_0x13f46e){const _0x14d798=this['scene']['clusteredL'+'ightingEna'+'bled'];for(let _0x51d8ad=0xa96+0xee*0x4+-0xe4e;_0x51d8ad<this['localLight'+'s']['length'];_0x51d8ad++){const _0x446176=this['localLight'+'s'][_0x51d8ad];_0x446176['_type']!==ve&&(_0x14d798?_0x446176['atlasSlotU'+'pdated']&&_0x446176['shadowUpda'+'teMode']===Ps&&(_0x446176['shadowUpda'+'teMode']=gr):_0x446176['shadowUpda'+'teMode']===Ps&&_0x446176['castShadow'+'s']&&(_0x446176['getRenderD'+'ata'](null,-0xb6f+0x4*-0x1b3+0x1*0x123b)['shadowCame'+'ra']['renderTarg'+'et']||(_0x446176['shadowUpda'+'teMode']=gr)),_0x446176['visibleThi'+'sFrame']&&_0x446176['castShadow'+'s']&&_0x446176['shadowUpda'+'teMode']!==Ps&&this['_shadowRen'+'dererLocal']['cull'](_0x446176,_0x13f46e));}this['cameraDirS'+'hadowLight'+'s']['clear']();const _0x47dfa8=_0x13f46e['cameras'];for(let _0x5559b7=-0x161*-0x6+0xa*0x125+-0x13b8*0x1;_0x5559b7<_0x47dfa8['length'];_0x5559b7++){const _0x142f63=_0x47dfa8[_0x5559b7];if(_0x142f63['enabled']){const _0x2384a8=_0x142f63['camera'];let _0x33c3fd;const _0x3db60e=_0x2384a8['layers'];for(let _0x3263c8=-0x1d*-0xa6+-0x23e6+0x1118;_0x3263c8<_0x3db60e['length'];_0x3263c8++){const _0xf15773=_0x13f46e['getLayerBy'+'Id'](_0x3db60e[_0x3263c8]);if(_0xf15773){const _0xcfee78=_0xf15773['splitLight'+'s'][ve];for(let _0x482558=0x2202+-0x464+-0x1d9e;_0x482558<_0xcfee78['length'];_0x482558++){const _0x25c37b=_0xcfee78[_0x482558];_0x25c37b['castShadow'+'s']&&!Da['has'](_0x25c37b)&&(Da['add'](_0x25c37b),_0x33c3fd=_0x33c3fd??[],_0x33c3fd['push'](_0x25c37b),this['_shadowRen'+'dererDirec'+'tional']['cull'](_0x25c37b,_0x13f46e,_0x2384a8));}}}_0x33c3fd&&this['cameraDirS'+'hadowLight'+'s']['set'](_0x2384a8,_0x33c3fd),Da['clear']();}}}['cullCompos'+'ition'](_0x4f7427){const _0x52ce47=de(),{scene:_0x26dd0d}=this;this['processing'+'MeshInstan'+'ces']['clear']();const _0x107f6f=_0x4f7427['cameras']['length'];this['_camerasRe'+'ndered']+=_0x107f6f;for(let _0x310e45=0xca9*0x1+0xe4b*-0x1+-0xd1*-0x2;_0x310e45<_0x107f6f;_0x310e45++){const _0x266993=_0x4f7427['cameras'][_0x310e45];_0x26dd0d==null||_0x26dd0d['fire'](Ry,_0x266993);const _0x4c5eac=_0x266993['renderTarg'+'et'];_0x266993['frameUpdat'+'e'](_0x4c5eac),this['updateCame'+'raFrustum'](_0x266993['camera']);const _0x35c85f=_0x266993['layers'];for(let _0x2ba03e=0x164*-0x3+-0xe5*-0x6+-0x22*0x9;_0x2ba03e<_0x35c85f['length'];_0x2ba03e++){const _0x3518be=_0x4f7427['getLayerBy'+'Id'](_0x35c85f[_0x2ba03e]);if(_0x3518be&&_0x3518be['enabled']){this['cullLights'](_0x266993['camera'],_0x3518be['_lights']);const _0x2be157=_0x3518be['getCulledI'+'nstances'](_0x266993['camera']);this['cull'](_0x266993['camera'],_0x3518be['meshInstan'+'ces'],_0x2be157);}}_0x26dd0d==null||_0x26dd0d['fire'](Oy,_0x266993);}_0x26dd0d['clusteredL'+'ightingEna'+'bled']&&this['updateLigh'+'tTextureAt'+'las'](),this['cullShadow'+'maps'](_0x4f7427),_0x26dd0d==null||_0x26dd0d['fire'](Aw),this['_cullTime']+=de()-_0x52ce47;}['updateShad'+'ers'](_0x32a524,_0x298b97){const _0xb91eb6=_0x32a524['length'];for(let _0x58b4bc=-0x16*-0x3+-0x71d+0xd*0x87;_0x58b4bc<_0xb91eb6;_0x58b4bc++){const _0x53fa3b=_0x32a524[_0x58b4bc]['material'];if(_0x53fa3b&&!Da['has'](_0x53fa3b)&&(Da['add'](_0x53fa3b),_0x53fa3b['getShaderV'+'ariant']!==er['prototype']['getShaderV'+'ariant'])){if(_0x298b97&&(!_0x53fa3b['useLightin'+'g']||_0x53fa3b['emitter']&&!_0x53fa3b['emitter']['lighting']))continue;_0x53fa3b['clearVaria'+'nts']();}}Da['clear']();}['updateFram'+'eUniforms'](){this['blueNoiseT'+'extureId']['setValue'](XE(this['device']));}['beginFrame'](_0x6a363e){const _0x50e7cf=this['scene'],_0x18d3c9=_0x50e7cf['updateShad'+'ers']||this['device']['_shadersDi'+'rty'];let _0x57d07d=0x1fda+0x3*-0xcde+-0x24*-0x30;const _0x1e76a0=_0x6a363e['layerList'],_0x313ae0=_0x1e76a0['length'];for(let _0x565e72=0x443*0x7+-0x11ee+0xbe7*-0x1;_0x565e72<_0x313ae0;_0x565e72++){const _0x5f4d6d=_0x1e76a0[_0x565e72]['meshInstan'+'ces'],_0xc35624=_0x5f4d6d['length'];_0x57d07d+=_0xc35624;for(let _0x174ba1=-0x194*0x1+-0x4f*0x5+0x31f;_0x174ba1<_0xc35624;_0x174ba1++){const _0x1d05f4=_0x5f4d6d[_0x174ba1];_0x1d05f4['visibleThi'+'sFrame']=!(-0x18c3+0x19b+0x1729),_0x18d3c9&&Gd['push'](_0x1d05f4),_0x1d05f4['skinInstan'+'ce']&&Hd['push'](_0x1d05f4);}}if(_0x50e7cf['_stats']['meshInstan'+'ces']=_0x57d07d,_0x18d3c9){const _0x3e850b=!_0x50e7cf['updateShad'+'ers']||!this['device']['_shadersDi'+'rty'];this['updateShad'+'ers'](Gd,_0x3e850b),_0x50e7cf['updateShad'+'ers']=!(0xf8*-0x16+-0x83f+-0x58*-0x56),this['device']['_shadersDi'+'rty']=!(0x1a23*0x1+-0x1*0x1d86+0x1f*0x1c),_0x50e7cf['_shaderVer'+'sion']++;}this['updateFram'+'eUniforms'](),this['updateCpuS'+'kinMatrice'+'s'](Hd),Gd['length']=-0x164*0x2+0x25c0+-0x4*0x8be,Hd['length']=-0x89e+0x25e1+-0x21*0xe3;const _0x3cc81a=this['lights'],_0x3dd4dd=_0x3cc81a['length'];for(let _0x1722ce=-0x71*0x2f+0x1d*0x10b+-0x13*0x80;_0x1722ce<_0x3dd4dd;_0x1722ce++)_0x3cc81a[_0x1722ce]['beginFrame']();}['updateLigh'+'tTextureAt'+'las'](){this['lightTextu'+'reAtlas']['update'](this['localLight'+'s'],this['scene']['lighting']);}['updateLaye'+'rCompositi'+'on'](_0x3f73e0){const _0x33b473=de(),_0x57c939=_0x3f73e0['layerList']['length'],_0x4863f3=this['scene']['_shaderVer'+'sion'];for(let _0x2fea0e=-0x16*-0x175+0xb*-0x10b+-0x1495;_0x2fea0e<_0x57c939;_0x2fea0e++){const _0x200d86=_0x3f73e0['layerList'][_0x2fea0e];_0x200d86['_shaderVer'+'sion']=_0x4863f3,_0x200d86['_skipRende'+'rCounter']=-0x242f+-0x1*0x2658+0x4a87*0x1,_0x200d86['_forwardDr'+'awCalls']=0x12ba+-0x17ff+0x545,_0x200d86['_shadowDra'+'wCalls']=-0x268d+-0x31*0x7b+0x1*0x3e18,_0x200d86['_renderTim'+'e']=-0x2*0x140+-0x13f8+0x1678;}_0x3f73e0['_update'](),this['_layerComp'+'ositionUpd'+'ateTime']+=de()-_0x33b473;}['frameUpdat'+'e'](){this['clustersDe'+'bugRendere'+'d']=!(-0x1de2+0x16f8+-0x1*-0x6eb),this['initViewBi'+'ndGroupFor'+'mat'](this['scene']['clusteredL'+'ightingEna'+'bled']),this['dirLightSh'+'adows']['clear']();}}class Xy{constructor(){h(this,'camera',null),(this['layer']=null,this['transparen'+'t']=!(0xd45*0x1+0x19*-0xfc+-0x21*-0x58),this['renderTarg'+'et']=null,this['lightClust'+'ers']=null,this['clearColor']=!(-0x2*-0x2b+0x1621+0x1*-0x1676),this['clearDepth']=!(0x12*-0xc4+0xac7+0x302),this['clearStenc'+'il']=!(0x643*0x1+0x24d*-0xc+0x3*0x71e),this['triggerPos'+'tprocess']=!(0x1d47+-0x269b+-0x1*-0x955),this['firstCamer'+'aUse']=!(-0x1f3*0x8+-0xe3*0x13+0x2072),this['lastCamera'+'Use']=!(0x1f*0xf4+0x1897+-0x2*0x1b11),this['viewBindGr'+'oups']=[],this['useCameraP'+'asses']=!(0x1000+0xb1e*-0x1+-0x4e1));}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x352dff=>{_0x352dff['defaultUni'+'formBuffer']['destroy'](),_0x352dff['destroy']();}),this['viewBindGr'+'oups']['length']=0x8ac+0x1*0xda2+-0x164e;}['setupClear'+'s'](_0x291d71,_0x3e6f94){this['clearColor']=(_0x291d71==null?void(0x15e5+0x6df*0x4+-0x1*0x3161):_0x291d71['clearColor'+'Buffer'])||_0x3e6f94['clearColor'+'Buffer'],this['clearDepth']=(_0x291d71==null?void(0x7fc+0xc6f*-0x3+-0x1*-0x1d51):_0x291d71['clearDepth'+'Buffer'])||_0x3e6f94['clearDepth'+'Buffer'],this['clearStenc'+'il']=(_0x291d71==null?void(-0x461*-0x1+0x2096+0x1*-0x24f7):_0x291d71['clearStenc'+'ilBuffer'])||_0x3e6f94['clearStenc'+'ilBuffer'];}}class pb extends ys{constructor(_0x6a0771,_0x5f50dd,_0x50623a,_0x457b73){super(_0x6a0771),h(this,'layerCompo'+'sition'),h(this,'scene'),h(this,'renderer'),h(this,'renderActi'+'ons',[]),h(this,'gammaCorre'+'ction'),h(this,'toneMappin'+'g'),h(this,'noDepthCle'+'ar',!(-0x1cb3+0xdff+-0x2f1*-0x5)),(this['layerCompo'+'sition']=_0x5f50dd,this['scene']=_0x50623a,this['renderer']=_0x457b73);}get['rendersAny'+'thing'](){return this['renderActi'+'ons']['length']>0x22d8+-0x1bae+-0x72a*0x1;}['addRenderA'+'ction'](_0x22f424){this['renderActi'+'ons']['push'](_0x22f424);}['addLayer'](_0x403802,_0x4f3e73,_0x3c1edf,_0x4ea982=!(0x3*-0x131+-0x1107+0x6*0x36f)){w['assert'](_0x403802),w['assert'](this['renderTarg'+'et']!==void(0x2440+-0x481*-0x5+-0x3*0x1397),'Render\x20pas'+'s\x20needs\x20to'+'\x20be\x20initia'+'lized\x20befo'+'re\x20adding\x20'+'layers'),w['assert'](_0x403802['camera']['layersSet']['has'](_0x4f3e73['id']),'Camera\x20'+_0x403802['entity']['name']+('\x20does\x20not\x20'+'render\x20lay'+'er\x20')+_0x4f3e73['name']+'.');const _0x112b4e=new Xy();if(_0x112b4e['renderTarg'+'et']=this['renderTarg'+'et'],_0x112b4e['camera']=_0x403802,_0x112b4e['layer']=_0x4f3e73,_0x112b4e['transparen'+'t']=_0x3c1edf,_0x4ea982){const _0x370070=this['renderActi'+'ons']['length']===0x1abd+-0x204d+-0x10*-0x59;_0x112b4e['setupClear'+'s'](_0x370070?_0x403802:void(-0xdd3*-0x1+-0x4c5+-0x90e),_0x4f3e73);}this['addRenderA'+'ction'](_0x112b4e);}['addLayers'](_0x28178a,_0x2efa7b,_0x2ae783,_0x13e911,_0x476db8,_0x4b6462=!(-0x3d9*-0x9+0x1e1*-0x1+-0x2*0x1060)){const {layerList:_0x502b24,subLayerList:_0x4601e5}=_0x28178a;let _0x5d6ab7=_0x13e911,_0x3c3670=_0x2ae783;for(;_0x3c3670<_0x502b24['length'];){const _0x909511=_0x502b24[_0x3c3670],_0x204eb2=_0x4601e5[_0x3c3670];if(_0x2efa7b['camera']['layersSet']['has'](_0x909511['id'])&&(this['addLayer'](_0x2efa7b,_0x909511,_0x204eb2,_0x5d6ab7),_0x5d6ab7=!(0xb*-0x257+-0xdd*-0x28+0x1c2*-0x5)),_0x3c3670++,_0x909511['id']===_0x476db8&&_0x204eb2===_0x4b6462)break;}return _0x3c3670;}['updateDire'+'ctionalSha'+'dows'](){const {renderer:_0xe6e6d,renderActions:_0x49cd4c}=this;for(let _0x445ba3=-0xd5*0x1+-0x29d+-0x3*-0x126;_0x445ba3<_0x49cd4c['length'];_0x445ba3++){const _0x54f3af=_0x49cd4c[_0x445ba3]['camera']['camera'],_0x1927ee=this['renderer']['cameraDirS'+'hadowLight'+'s']['get'](_0x54f3af);if(_0x1927ee)for(let _0x471034=-0x1594+0xf*-0x24a+-0x2*-0x1bf5;_0x471034<_0x1927ee['length'];_0x471034++){const _0x55cdc9=_0x1927ee[_0x471034];if(_0xe6e6d['dirLightSh'+'adows']['get'](_0x55cdc9)!==_0x54f3af){_0xe6e6d['dirLightSh'+'adows']['set'](_0x55cdc9,_0x54f3af);const _0x3e6cd3=_0xe6e6d['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x55cdc9,_0x54f3af);_0x3e6cd3&&this['beforePass'+'es']['push'](_0x3e6cd3);}}}}['updateClea'+'rs'](){const _0x4fa04b=this['renderActi'+'ons'][-0xbb7+-0x2c7+0xe7e];if(_0x4fa04b){const _0x2d84f0=_0x4fa04b['camera']['camera'],_0x2707a2=_0x2d84f0['fullSizeCl'+'earRect'];this['setClearCo'+'lor'](_0x2707a2&&_0x4fa04b['clearColor']?_0x2d84f0['clearColor']:void(0x2643+-0x8b1*0x1+-0x1*0x1d92)),this['setClearDe'+'pth'](_0x2707a2&&_0x4fa04b['clearDepth']&&!this['noDepthCle'+'ar']?_0x2d84f0['clearDepth']:void(-0x1721+0x5f+0x1*0x16c2)),this['setClearSt'+'encil'](_0x2707a2&&_0x4fa04b['clearStenc'+'il']?_0x2d84f0['clearStenc'+'il']:void(0x1*0x12f6+-0x1*0xe17+0x1*-0x4df));}}['frameUpdat'+'e'](){super['frameUpdat'+'e'](),this['updateDire'+'ctionalSha'+'dows'](),this['updateClea'+'rs']();}['before'](){const {renderActions:_0x54ab2a}=this;for(let _0x47b94a=0xcf3+0x6cc+-0x13bf;_0x47b94a<_0x54ab2a['length'];_0x47b94a++){const _0x421501=_0x54ab2a[_0x47b94a];_0x421501['firstCamer'+'aUse']&&this['scene']['fire'](Tw,_0x421501['camera']);}}['execute'](){const {layerComposition:_0xf8ca26,renderActions:_0x357940}=this;for(let _0x4cfa3b=0x3*0x537+-0x1a31+0x1*0xa8c;_0x4cfa3b<_0x357940['length'];_0x4cfa3b++){const _0x1896da=_0x357940[_0x4cfa3b],_0x6d31d9=_0x1896da['layer'];w['call'](()=>{_0xf8ca26['getLayerBy'+'Name'](_0x6d31d9['name'])||w['warnOnce']('Layer\x20'+_0x6d31d9['name']+('\x20is\x20not\x20fo'+'und\x20in\x20the'+'\x20scene\x20and'+'\x20will\x20not\x20'+'be\x20rendere'+'d.\x20Your\x20re'+'nder\x20pass\x20'+'setup\x20migh'+'t\x20need\x20to\x20'+'be\x20updated'+'.'));}),_0xf8ca26['isEnabled'](_0x6d31d9,_0x1896da['transparen'+'t'])&&this['renderRend'+'erAction'](_0x1896da,_0x4cfa3b===0x13*0x12e+0x17e7+-0x2e51);}}['after'](){for(let _0x5947be=0x1a6f+0x18f5*-0x1+-0x17a;_0x5947be<this['renderActi'+'ons']['length'];_0x5947be++){const _0x499538=this['renderActi'+'ons'][_0x5947be];_0x499538['lastCamera'+'Use']&&this['scene']['fire'](ww,_0x499538['camera']);}this['beforePass'+'es']['length']=-0x7*0x57e+-0xb3*0x5+0x29f1;}['renderRend'+'erAction'](_0x34f41f,_0x573a7d){var _0x48dac6;const {renderer:_0xc9b81d,scene:_0x2fc8e1}=this,_0x5b7a3b=_0xc9b81d['device'],{layer:_0x2d3dc6,transparent:_0x4b18b1,camera:_0x27b3b1}=_0x34f41f;Q['pushGpuMar'+'ker'](this['device'],'Camera:\x20'+(_0x27b3b1?_0x27b3b1['entity']['name']:'Unnamed')+',\x20Layer:\x20'+_0x2d3dc6['name']+'('+(_0x4b18b1?'TRANSP':'OPAQUE')+')');const _0x365485=de();if(_0x27b3b1){const _0x2b4432=_0x27b3b1['gammaCorre'+'ction'],_0x1594ae=_0x27b3b1['toneMappin'+'g'];this['gammaCorre'+'ction']!==void(0x5*0x1a9+0xeda+-0x1727)&&(_0x27b3b1['gammaCorre'+'ction']=this['gammaCorre'+'ction']),this['toneMappin'+'g']!==void(-0x1aa2+0x56*-0x2d+-0x40*-0xa7)&&(_0x27b3b1['toneMappin'+'g']=this['toneMappin'+'g']),_0x2fc8e1['fire'](Ew,_0x27b3b1,_0x2d3dc6,_0x4b18b1);const _0x325361={'lightClusters':_0x34f41f['lightClust'+'ers']},_0x43b423=((_0x48dac6=_0x27b3b1['camera']['shaderPass'+'Info'])==null?void(-0x1ea2+0x1*0x23e4+-0x542):_0x48dac6['index'])??xa;(!_0x573a7d||!_0x27b3b1['camera']['fullSizeCl'+'earRect'])&&(_0x325361['clearColor']=_0x34f41f['clearColor'],_0x325361['clearDepth']=_0x34f41f['clearDepth'],_0x325361['clearStenc'+'il']=_0x34f41f['clearStenc'+'il']);const _0x4e7569=_0x34f41f['renderTarg'+'et']??_0x5b7a3b['backBuffer'];_0xc9b81d['renderForw'+'ardLayer'](_0x27b3b1['camera'],_0x4e7569,_0x2d3dc6,_0x4b18b1,_0x43b423,_0x34f41f['viewBindGr'+'oups'],_0x325361),_0x5b7a3b['setBlendSt'+'ate'](pt['NOBLEND']),_0x5b7a3b['setStencil'+'State'](null,null),_0x5b7a3b['setAlphaTo'+'Coverage'](!(-0x325*-0xb+-0x307*-0x1+0x259d*-0x1)),_0x2fc8e1['fire'](bw,_0x27b3b1,_0x2d3dc6,_0x4b18b1),this['gammaCorre'+'ction']!==void(0x6*0x39d+0x13*0xbb+-0x238f)&&(_0x27b3b1['gammaCorre'+'ction']=_0x2b4432),this['toneMappin'+'g']!==void(0x11ae+-0xfef+-0x1bf)&&(_0x27b3b1['toneMappin'+'g']=_0x1594ae);}Q['popGpuMark'+'er'](this['device']),_0x2d3dc6['_renderTim'+'e']+=de()-_0x365485;}['log'](_0x377a53,_0x91dd7){if(super['log'](_0x377a53,_0x91dd7),mi['get'](tn)){const {layerComposition:_0xf38152}=this;this['renderActi'+'ons']['forEach']((_0x496e29,_0x533ef5)=>{const _0x382a2c=_0x496e29['layer'],_0x5c9df8=_0x382a2c['enabled']&&_0xf38152['isEnabled'](_0x382a2c,_0x496e29['transparen'+'t']),_0x1e045b=_0x496e29['camera'];w['trace'](tn,'\x20\x20\x20\x20'+_0x533ef5+':'+('\x20Cam:\x20'+(_0x1e045b?_0x1e045b['entity']['name']:'-'))['padEnd'](-0xb1+-0x479*-0x4+-0x111d,'\x20')+('\x20Lay:\x20'+_0x382a2c['name'])['padEnd'](-0xcec*0x1+0x5a+0xca8,'\x20')+(_0x496e29['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x5c9df8?'\x20ENABLED':'\x20DISABLED')+('\x20Meshes:\x20'+_0x382a2c['meshInstan'+'ces']['length'])['padEnd'](0x1883+-0x16ba*-0x1+0x8*-0x5e7,'\x20'));});}}}class mb extends ys{constructor(_0x41e1b3,_0x44ef23,_0x245544){super(_0x41e1b3),this['renderer']=_0x44ef23,this['renderActi'+'on']=_0x245544,this['requiresCu'+'bemaps']=!(-0x1*0x2253+0x250e+-0x2ba);}['execute'](){const _0x34cc79=this['renderActi'+'on'],_0x4eef4a=_0x34cc79['camera'];w['assert'](_0x34cc79['triggerPos'+'tprocess']&&_0x4eef4a['onPostproc'+'essing']),_0x4eef4a['onPostproc'+'essing']();}}const _b=[[],[],[]],nr=new ie(),Lr={'drawCalls':[],'shaderInstances':[],'isNewMaterial':[],'lightMaskChanged':[],'clear':function(){this['drawCalls']['length']=-0x718+-0x19e*-0x6+0x14e*-0x2,this['shaderInst'+'ances']['length']=0x1*-0xa94+-0x1160+0x1bf4,this['isNewMater'+'ial']['length']=-0x617*0x3+-0x1*-0x19b8+-0x773,this['lightMaskC'+'hanged']['length']=-0x1648+0x157*0xa+0x8e2;}};function gb(_0x495e01){const _0x36c25b=[];for(let _0x29a329=0xc8e+-0x9d+-0xbf1;_0x29a329<_0x495e01;++_0x29a329){const _0x40bb92=Math['sqrt'](_0x29a329+(-0x22e*0x3+-0x253c+0x1*0x2bc6+0.5))/Math['sqrt'](_0x495e01);_0x36c25b['push'](_0x40bb92);}return _0x36c25b;}function Sb(_0x284c1d){const _0x5174f4=[];for(let _0x21daa7=0x1*0x1aac+-0x1*0x1327+-0x785;_0x21daa7<_0x284c1d;_0x21daa7++){const _0x644483=_0x21daa7/_0x284c1d,_0xc9a0e4=Math['sqrt'](_0x644483*_0x644483);_0x5174f4['push'](_0xc9a0e4);}return _0x5174f4;}const Fi=class Fi extends ub{constructor(_0x2008dd){super(_0x2008dd);const _0x8b9199=this['device'];this['_forwardDr'+'awCalls']=-0x1a0a+0x42e+0xaee*0x2,this['_materialS'+'witches']=-0x2374+0x1846+0x597*0x2,this['_depthMapT'+'ime']=-0x1a52+-0xf*-0x1cb+0x7*-0x15,this['_forwardTi'+'me']=0x6f*0x1f+-0x803+-0x56e,this['_sortTime']=-0x1*0x11b3+-0x258b+0x935*0x6;const _0x29953a=_0x8b9199['scope'];this['fogColorId']=_0x29953a['resolve']('fog_color'),this['fogStartId']=_0x29953a['resolve']('fog_start'),this['fogEndId']=_0x29953a['resolve']('fog_end'),this['fogDensity'+'Id']=_0x29953a['resolve']('fog_densit'+'y'),this['ambientId']=_0x29953a['resolve']('light_glob'+'alAmbient'),this['skyboxInte'+'nsityId']=_0x29953a['resolve']('skyboxInte'+'nsity'),this['cubeMapRot'+'ationMatri'+'xId']=_0x29953a['resolve']('cubeMapRot'+'ationMatri'+'x'),this['pcssDiskSa'+'mplesId']=_0x29953a['resolve']('pcssDiskSa'+'mples[0]'),this['pcssSphere'+'SamplesId']=_0x29953a['resolve']('pcssSphere'+'Samples[0]'),this['lightColor'+'Id']=[],this['lightDir']=[],this['lightDirId']=[],this['lightShado'+'wMapId']=[],this['lightShado'+'wMatrixId']=[],this['lightShado'+'wParamsId']=[],this['lightShado'+'wIntensity']=[],this['lightRadiu'+'sId']=[],this['lightPos']=[],this['lightPosId']=[],this['lightWidth']=[],this['lightWidth'+'Id']=[],this['lightHeigh'+'t']=[],this['lightHeigh'+'tId']=[],this['lightInAng'+'leId']=[],this['lightOutAn'+'gleId']=[],this['lightCooki'+'eId']=[],this['lightCooki'+'eIntId']=[],this['lightCooki'+'eMatrixId']=[],this['lightCooki'+'eOffsetId']=[],this['lightShado'+'wSearchAre'+'aId']=[],this['lightCamer'+'aParamsId']=[],this['lightSoftS'+'hadowParam'+'sId']=[],this['shadowMatr'+'ixPaletteI'+'d']=[],this['shadowCasc'+'adeDistanc'+'esId']=[],this['shadowCasc'+'adeCountId']=[],this['shadowCasc'+'adeBlendId']=[],this['screenSize'+'Id']=_0x29953a['resolve']('uScreenSiz'+'e'),this['_screenSiz'+'e']=new Float32Array(0x513+0x1c0e+0x31*-0xad),this['fogColor']=new Float32Array(0x2431+0x1dcc+-0x466*0xf),this['ambientCol'+'or']=new Float32Array(-0x1517+0x15*-0xda+0x26fc),this['pcssDiskSa'+'mples']=gb(-0x2622+0x1b91+0xaa1*0x1),this['pcssSphere'+'Samples']=Sb(0x8*-0x81+0x9*-0x28f+0x1b1f);}['destroy'](){super['destroy']();}['dispatchGl'+'obalLights'](_0x1c2ac0){const _0x3d79e6=this['ambientCol'+'or'];if(nr['linear'](_0x1c2ac0['ambientLig'+'ht']),_0x3d79e6[-0x2b*-0x71+0x1348*0x1+-0x2643]=nr['r'],_0x3d79e6[-0x124a+-0x1947+0x2b92]=nr['g'],_0x3d79e6[-0x49*-0x56+0x4*-0x5d7+-0x128]=nr['b'],_0x1c2ac0['physicalUn'+'its']){for(let _0x2ee7ba=0x485*0x5+-0x18a6+0x20d;_0x2ee7ba<0x1*0xf43+0x2494+-0x1f*0x1ac;_0x2ee7ba++)_0x3d79e6[_0x2ee7ba]*=_0x1c2ac0['ambientLum'+'inance'];}this['ambientId']['setValue'](_0x3d79e6),this['skyboxInte'+'nsityId']['setValue'](_0x1c2ac0['physicalUn'+'its']?_0x1c2ac0['skyboxLumi'+'nance']:_0x1c2ac0['skyboxInte'+'nsity']),this['cubeMapRot'+'ationMatri'+'xId']['setValue'](_0x1c2ac0['_skyboxRot'+'ationMat3']['data']);}['_resolveLi'+'ght'](_0xcfeba1,_0x55993e){const _0x26da34='light'+_0x55993e;this['lightColor'+'Id'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+'_color'),this['lightDir'][_0x55993e]=new Float32Array(0xd4*-0x2f+0x13a7*0x1+0x1348),this['lightDirId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+'_direction'),this['lightShado'+'wMapId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+'_shadowMap'),this['lightShado'+'wMatrixId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_shadowMat'+'rix')),this['lightShado'+'wParamsId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_shadowPar'+'ams')),this['lightShado'+'wIntensity'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_shadowInt'+'ensity')),this['lightShado'+'wSearchAre'+'aId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_shadowSea'+'rchArea')),this['lightRadiu'+'sId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+'_radius'),this['lightPos'][_0x55993e]=new Float32Array(-0x2353+-0x1a73+0x3dc9),this['lightPosId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+'_position'),this['lightWidth'][_0x55993e]=new Float32Array(-0x19b*-0x8+0x1fa1+-0x2c76),this['lightWidth'+'Id'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+'_halfWidth'),this['lightHeigh'+'t'][_0x55993e]=new Float32Array(0x11a7*0x1+-0x1*0x19b7+0x813),this['lightHeigh'+'tId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_halfHeigh'+'t')),this['lightInAng'+'leId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_innerCone'+'Angle')),this['lightOutAn'+'gleId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_outerCone'+'Angle')),this['lightCooki'+'eId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+'_cookie'),this['lightCooki'+'eIntId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_cookieInt'+'ensity')),this['lightCooki'+'eMatrixId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_cookieMat'+'rix')),this['lightCooki'+'eOffsetId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_cookieOff'+'set')),this['lightCamer'+'aParamsId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_cameraPar'+'ams')),this['lightSoftS'+'hadowParam'+'sId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_softShado'+'wParams')),this['shadowMatr'+'ixPaletteI'+'d'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_shadowMat'+'rixPalette'+'[0]')),this['shadowCasc'+'adeDistanc'+'esId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_shadowCas'+'cadeDistan'+'ces')),this['shadowCasc'+'adeCountId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_shadowCas'+'cadeCount')),this['shadowCasc'+'adeBlendId'][_0x55993e]=_0xcfeba1['resolve'](_0x26da34+('_shadowCas'+'cadeBlend'));}['setLTCDire'+'ctionalLig'+'ht'](_0xb2427e,_0x265eb4,_0xf20cef,_0x3bbf20,_0x102128){this['lightPos'][_0x265eb4][0x57a*0x1+0x1bd4+-0x214e]=_0x3bbf20['x']-_0xf20cef['x']*_0x102128,this['lightPos'][_0x265eb4][0x26aa+-0x825+-0x15*0x174]=_0x3bbf20['y']-_0xf20cef['y']*_0x102128,this['lightPos'][_0x265eb4][0x1*-0x1a87+0x2*-0xec5+-0xa5*-0x57]=_0x3bbf20['z']-_0xf20cef['z']*_0x102128,this['lightPosId'][_0x265eb4]['setValue'](this['lightPos'][_0x265eb4]);const _0x20267c=_0xb2427e['transformV'+'ector'](new D(-(0x6*-0x527+0xb51*0x1+0xad*0x1d+0.5),0x122d+-0x21a8+0xf7b,0xeec+0x632*0x4+0x27b4*-0x1));this['lightWidth'][_0x265eb4][-0x11*-0x20f+-0x1040*-0x2+0x1*-0x437f]=_0x20267c['x']*_0x102128,this['lightWidth'][_0x265eb4][-0xc80+-0x20ee+0x2d6f]=_0x20267c['y']*_0x102128,this['lightWidth'][_0x265eb4][-0x30b*-0xa+-0x1*-0x671+-0x1*0x24dd]=_0x20267c['z']*_0x102128,this['lightWidth'+'Id'][_0x265eb4]['setValue'](this['lightWidth'][_0x265eb4]);const _0x14811a=_0xb2427e['transformV'+'ector'](new D(0x7f6+0x2b6*0xb+-0x138*0x1f,-0x1109+-0x26d7+0x37e0,-0x3*0x3af+-0x283*0x1+-0x70*-0x1f+0.5));this['lightHeigh'+'t'][_0x265eb4][-0xdd+-0x1e37+0x6*0x52e]=_0x14811a['x']*_0x102128,this['lightHeigh'+'t'][_0x265eb4][0x57a*-0x7+-0x7*-0x39d+0x5*0x29c]=_0x14811a['y']*_0x102128,this['lightHeigh'+'t'][_0x265eb4][-0x269b+0x4a*-0x4d+-0x3cdf*-0x1]=_0x14811a['z']*_0x102128,this['lightHeigh'+'tId'][_0x265eb4]['setValue'](this['lightHeigh'+'t'][_0x265eb4]);}['dispatchDi'+'rectLights'](_0xfeecbd,_0x2ae307,_0x3cb9ac){let _0x1ba5f5=0x23b*-0x7+0x1d*0x19+0x1*0xcc8;const _0x42415b=this['device']['scope'];for(let _0x4518a4=0x9fe+0xde7+-0x17e5;_0x4518a4<_0xfeecbd['length'];_0x4518a4++){if(!(_0xfeecbd[_0x4518a4]['mask']&_0x2ae307))continue;const _0x1d67e0=_0xfeecbd[_0x4518a4],_0x5261e3=_0x1d67e0['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x1ba5f5]||this['_resolveLi'+'ght'](_0x42415b,_0x1ba5f5),this['lightColor'+'Id'][_0x1ba5f5]['setValue'](_0x1d67e0['_colorLine'+'ar']),_0x5261e3['getY'](_0x1d67e0['_direction'])['mulScalar'](-(-0x15f3+-0x1bae+-0x31a2*-0x1)),_0x1d67e0['_direction']['normalize'](),this['lightDir'][_0x1ba5f5][0x304*-0x8+0x442+0x13de]=_0x1d67e0['_direction']['x'],this['lightDir'][_0x1ba5f5][-0x782+0xa14+-0x291]=_0x1d67e0['_direction']['y'],this['lightDir'][_0x1ba5f5][0x2545+0x22bd*0x1+-0x4800]=_0x1d67e0['_direction']['z'],this['lightDirId'][_0x1ba5f5]['setValue'](this['lightDir'][_0x1ba5f5]),_0x1d67e0['shape']!==js&&this['setLTCDire'+'ctionalLig'+'ht'](_0x5261e3,_0x1ba5f5,_0x1d67e0['_direction'],_0x3cb9ac['_node']['getPositio'+'n'](),_0x3cb9ac['farClip']),_0x1d67e0['castShadow'+'s']){const _0x1da254=_0x1d67e0['getRenderD'+'ata'](_0x3cb9ac,-0x1*0xfba+-0x3ba*-0x5+0xc*-0x3e),_0xa9f234=_0x1d67e0['_getUnifor'+'mBiasValue'+'s'](_0x1da254);this['lightShado'+'wMapId'][_0x1ba5f5]['setValue'](_0x1da254['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x1ba5f5]['setValue'](_0x1da254['shadowMatr'+'ix']['data']),this['shadowMatr'+'ixPaletteI'+'d'][_0x1ba5f5]['setValue'](_0x1d67e0['_shadowMat'+'rixPalette']),this['shadowCasc'+'adeDistanc'+'esId'][_0x1ba5f5]['setValue'](_0x1d67e0['_shadowCas'+'cadeDistan'+'ces']),this['shadowCasc'+'adeCountId'][_0x1ba5f5]['setValue'](_0x1d67e0['numCascade'+'s']),this['shadowCasc'+'adeBlendId'][_0x1ba5f5]['setValue'](-0x1486*-0x1+-0x27*0x73+-0x300-_0x1d67e0['cascadeBle'+'nd']),this['lightShado'+'wIntensity'][_0x1ba5f5]['setValue'](_0x1d67e0['shadowInte'+'nsity']),this['lightSoftS'+'hadowParam'+'sId'][_0x1ba5f5]['setValue'](_0x1d67e0['_softShado'+'wParams']),_0x1da254['shadowCame'+'ra']['renderTarg'+'et']&&this['lightShado'+'wSearchAre'+'aId'][_0x1ba5f5]['setValue'](_0x1d67e0['penumbraSi'+'ze']/_0x1da254['shadowCame'+'ra']['renderTarg'+'et']['width']*_0x1da254['projection'+'Compensati'+'on']);const _0x46fd9b=_0x1d67e0['_shadowCam'+'eraParams'];_0x46fd9b['length']=0xbe0+-0x153*-0x9+-0x7ed*0x3,_0x46fd9b[0x837*0x1+0x23e9+-0x2c20]=0xc83+0x1e76+-0x2af9,_0x46fd9b[0x133+-0x5*-0x6aa+-0x2284]=_0x1da254['shadowCame'+'ra']['_farClip'],_0x46fd9b[0x9e0+-0x1*-0xd0f+-0x1*0x16ed]=_0x1da254['shadowCame'+'ra']['_nearClip'],_0x46fd9b[0x21d*0x2+-0xd27+0xb*0xd0]=-0xfe*-0x3+-0xcb2+0x9b9,this['lightCamer'+'aParamsId'][_0x1ba5f5]['setValue'](_0x46fd9b);const _0x50da55=_0x1d67e0['_shadowRen'+'derParams'];_0x50da55['length']=0x1cf5*0x1+0x124*-0x1d+-0x161*-0x3,_0x50da55[-0x1824+0x7*0x2a3+0x5af]=_0x1d67e0['_shadowRes'+'olution'],_0x50da55[0xb*-0xe3+0x19f9+0x251*-0x7]=_0xa9f234['normalBias'],_0x50da55[-0x3dd*-0x1+-0x2*-0xc20+-0x5*0x59f]=_0xa9f234['bias'],_0x50da55[0x3*0x509+0x134*0x1d+-0x31fc]=-0x25ec+-0x27b*0x7+0x3749,this['lightShado'+'wParamsId'][_0x1ba5f5]['setValue'](_0x50da55);}_0x1ba5f5++;}return _0x1ba5f5;}['setLTCPosi'+'tionalLigh'+'t'](_0x57e265,_0x47ed58){const _0x7fc008=_0x57e265['transformV'+'ector'](new D(-(0x1b26+0x72*0x4d+-0x3d70+0.5),-0x1*-0x2279+-0x1b57+0x16*-0x53,0xc00+0x18f0+-0x30*0xc5));this['lightWidth'][_0x47ed58][0xbe8+-0x3*0x95f+-0x1cd*-0x9]=_0x7fc008['x'],this['lightWidth'][_0x47ed58][-0x1e73+-0x844+0x26b8]=_0x7fc008['y'],this['lightWidth'][_0x47ed58][-0x63d+0x17b1+-0x1172]=_0x7fc008['z'],this['lightWidth'+'Id'][_0x47ed58]['setValue'](this['lightWidth'][_0x47ed58]);const _0x1ef7ac=_0x57e265['transformV'+'ector'](new D(0x8d1+-0x73e+-0x193,-0x24ef+0x663+0x1e8c,-0x57*-0x9+0xa*0x125+-0xe81+0.5));this['lightHeigh'+'t'][_0x47ed58][-0x8*-0x1ac+-0x19e4*0x1+0xc84]=_0x1ef7ac['x'],this['lightHeigh'+'t'][_0x47ed58][-0x21c*-0xa+-0x407+-0x1110]=_0x1ef7ac['y'],this['lightHeigh'+'t'][_0x47ed58][-0x1b0*0xf+0x1*-0x1de9+0x373b]=_0x1ef7ac['z'],this['lightHeigh'+'tId'][_0x47ed58]['setValue'](this['lightHeigh'+'t'][_0x47ed58]);}['dispatchOm'+'niLight'](_0x1cb2e8,_0x38cafe,_0x5c2fda){const _0x94541c=_0x38cafe['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x5c2fda]||this['_resolveLi'+'ght'](_0x1cb2e8,_0x5c2fda),this['lightRadiu'+'sId'][_0x5c2fda]['setValue'](_0x38cafe['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x5c2fda]['setValue'](_0x38cafe['_colorLine'+'ar']),_0x94541c['getTransla'+'tion'](_0x38cafe['_position']),this['lightPos'][_0x5c2fda][0x1*0xa75+0x4*0x55f+0x11*-0x1e1]=_0x38cafe['_position']['x'],this['lightPos'][_0x5c2fda][-0x25f+0x42f*-0x8+0x23d8]=_0x38cafe['_position']['y'],this['lightPos'][_0x5c2fda][-0xe5*-0x29+-0x715+-0x1d96*0x1]=_0x38cafe['_position']['z'],this['lightPosId'][_0x5c2fda]['setValue'](this['lightPos'][_0x5c2fda]),_0x38cafe['shape']!==js&&this['setLTCPosi'+'tionalLigh'+'t'](_0x94541c,_0x5c2fda),_0x38cafe['castShadow'+'s']){const _0x10285e=_0x38cafe['getRenderD'+'ata'](null,-0x1c37+-0x1*-0x98f+0x12a8);this['lightShado'+'wMapId'][_0x5c2fda]['setValue'](_0x10285e['shadowBuff'+'er']);const _0x14f47a=_0x38cafe['_getUnifor'+'mBiasValue'+'s'](_0x10285e),_0x1eae0b=_0x38cafe['_shadowRen'+'derParams'];_0x1eae0b['length']=0x36*0xab+0x136a+0x32*-0x11c,_0x1eae0b[-0x35*0xd+0x551+0x18*-0x1c]=_0x38cafe['_shadowRes'+'olution'],_0x1eae0b[0x19b6+-0x13d+-0x1878]=_0x14f47a['normalBias'],_0x1eae0b[0x7*0x571+0x554+-0x2b69]=_0x14f47a['bias'],_0x1eae0b[0x1*0x158a+-0x1*0x2021+-0x54d*-0x2]=(0x173d+-0x4*0x30b+-0xb10)/_0x38cafe['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x5c2fda]['setValue'](_0x1eae0b),this['lightShado'+'wIntensity'][_0x5c2fda]['setValue'](_0x38cafe['shadowInte'+'nsity']);const _0x461a7d=_0x38cafe['penumbraSi'+'ze']/_0x10285e['shadowCame'+'ra']['renderTarg'+'et']['width'];this['lightShado'+'wSearchAre'+'aId'][_0x5c2fda]['setValue'](_0x461a7d);const _0x40d672=_0x38cafe['_shadowCam'+'eraParams'];_0x40d672['length']=-0xd79+0x1*0x25b1+-0x1834,_0x40d672[0x1f6*-0x1+0x19a5+-0x17af]=-0x512+-0x7a9+0xcbb,_0x40d672[0xf*-0x218+-0x17*0x14+0x2135]=_0x10285e['shadowCame'+'ra']['_farClip'],_0x40d672[-0x697+-0x2199+0x2832]=_0x10285e['shadowCame'+'ra']['_nearClip'],_0x40d672[0x1*0x2308+-0x1*-0x215b+-0x1118*0x4]=0x1480+-0x1*-0x7bb+0x63*-0x49,this['lightCamer'+'aParamsId'][_0x5c2fda]['setValue'](_0x40d672);}_0x38cafe['_cookie']&&(this['lightCooki'+'eId'][_0x5c2fda]['setValue'](_0x38cafe['_cookie']),this['lightShado'+'wMatrixId'][_0x5c2fda]['setValue'](_0x94541c['data']),this['lightCooki'+'eIntId'][_0x5c2fda]['setValue'](_0x38cafe['cookieInte'+'nsity']));}['dispatchSp'+'otLight'](_0x2f6f4b,_0x310dec,_0x19b6ae){const _0x274b01=_0x310dec['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x19b6ae]||this['_resolveLi'+'ght'](_0x2f6f4b,_0x19b6ae),this['lightInAng'+'leId'][_0x19b6ae]['setValue'](_0x310dec['_innerCone'+'AngleCos']),this['lightOutAn'+'gleId'][_0x19b6ae]['setValue'](_0x310dec['_outerCone'+'AngleCos']),this['lightRadiu'+'sId'][_0x19b6ae]['setValue'](_0x310dec['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x19b6ae]['setValue'](_0x310dec['_colorLine'+'ar']),_0x274b01['getTransla'+'tion'](_0x310dec['_position']),this['lightPos'][_0x19b6ae][-0x125d+0x47*0x43+-0x38]=_0x310dec['_position']['x'],this['lightPos'][_0x19b6ae][-0x72b*0x5+-0x1e*-0x4c+-0x1af*-0x10]=_0x310dec['_position']['y'],this['lightPos'][_0x19b6ae][0x8a*0x11+-0x1*0xf7b+0x1*0x653]=_0x310dec['_position']['z'],this['lightPosId'][_0x19b6ae]['setValue'](this['lightPos'][_0x19b6ae]),_0x310dec['shape']!==js&&this['setLTCPosi'+'tionalLigh'+'t'](_0x274b01,_0x19b6ae),_0x274b01['getY'](_0x310dec['_direction'])['mulScalar'](-(0x4*0x327+0x2065*-0x1+0x13ca)),_0x310dec['_direction']['normalize'](),this['lightDir'][_0x19b6ae][-0x1284+0x4bb*0x8+-0x1354]=_0x310dec['_direction']['x'],this['lightDir'][_0x19b6ae][0x392+-0x1a3b+0x16aa]=_0x310dec['_direction']['y'],this['lightDir'][_0x19b6ae][-0x22b0+0xd*-0xc7+0x2ccd*0x1]=_0x310dec['_direction']['z'],this['lightDirId'][_0x19b6ae]['setValue'](this['lightDir'][_0x19b6ae]),_0x310dec['castShadow'+'s']){const _0x5c449c=_0x310dec['getRenderD'+'ata'](null,0x1*-0x73d+-0x3e*-0x97+-0x1*0x1d55);this['lightShado'+'wMapId'][_0x19b6ae]['setValue'](_0x5c449c['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x19b6ae]['setValue'](_0x5c449c['shadowMatr'+'ix']['data']);const _0x1c55bf=_0x310dec['_getUnifor'+'mBiasValue'+'s'](_0x5c449c),_0x1cce14=_0x310dec['_shadowRen'+'derParams'];_0x1cce14['length']=0x26bf+-0x1*-0xe8d+0xa*-0x554,_0x1cce14[-0x1ee6+-0x416*0x2+0x2712]=_0x310dec['_shadowRes'+'olution'],_0x1cce14[0x1b8f+-0x1cd6*0x1+-0x148*-0x1]=_0x1c55bf['normalBias'],_0x1cce14[-0x181a+0x33*0xa3+0x1*-0x85d]=_0x1c55bf['bias'],_0x1cce14[-0x1b8e+-0x2bd*-0x3+0x135a]=(0x1*0x1142+0x13*0x17e+-0x2d9b)/_0x310dec['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x19b6ae]['setValue'](_0x1cce14),this['lightShado'+'wIntensity'][_0x19b6ae]['setValue'](_0x310dec['shadowInte'+'nsity']);const _0x52e0ac=_0x310dec['penumbraSi'+'ze']/_0x5c449c['shadowCame'+'ra']['renderTarg'+'et']['width'],_0x192e8e=_0x5c449c['shadowCame'+'ra']['_fov']*Math['PI']/(-0x145a+-0x97c+0x1e8a),_0x4db4a8=(0xaf1+0xc96+-0x1*0x1786)/Math['tan'](_0x192e8e/(-0xfc5+-0x8ec+-0x18b3*-0x1));this['lightShado'+'wSearchAre'+'aId'][_0x19b6ae]['setValue'](_0x52e0ac*_0x4db4a8);const _0x56fca2=_0x310dec['_shadowCam'+'eraParams'];_0x56fca2['length']=-0x61*0xb+0x1a34+-0x1605,_0x56fca2[0x1743+0xfcd+-0x2710]=-0x1*0x3d8+-0xb*-0x137+-0x1*0x985,_0x56fca2[-0x163*-0x12+-0x16d4+0x6d*-0x5]=_0x5c449c['shadowCame'+'ra']['_farClip'],_0x56fca2[-0xb9b+-0x1*0x1f75+0x2b12]=_0x5c449c['shadowCame'+'ra']['_nearClip'],_0x56fca2[0x26*0x105+0x9a9*-0x1+-0x1d12]=0x3f*-0x93+0x1*-0x24bc+0x48e9,this['lightCamer'+'aParamsId'][_0x19b6ae]['setValue'](_0x56fca2);}if(_0x310dec['_cookie']){if(!_0x310dec['castShadow'+'s']){const _0x39c35a=kn['evalSpotCo'+'okieMatrix'](_0x310dec);this['lightShado'+'wMatrixId'][_0x19b6ae]['setValue'](_0x39c35a['data']);}this['lightCooki'+'eId'][_0x19b6ae]['setValue'](_0x310dec['_cookie']),this['lightCooki'+'eIntId'][_0x19b6ae]['setValue'](_0x310dec['cookieInte'+'nsity']),_0x310dec['_cookieTra'+'nsform']&&(_0x310dec['_cookieTra'+'nsformUnif'+'orm'][0x5*-0x6cd+0x36*0x9d+-0xe3*-0x1]=_0x310dec['_cookieTra'+'nsform']['x'],_0x310dec['_cookieTra'+'nsformUnif'+'orm'][-0x213e+0x6f1*0x1+0xd27*0x2]=_0x310dec['_cookieTra'+'nsform']['y'],_0x310dec['_cookieTra'+'nsformUnif'+'orm'][-0x56+-0x1c9*0x3+-0x1*-0x5b3]=_0x310dec['_cookieTra'+'nsform']['z'],_0x310dec['_cookieTra'+'nsformUnif'+'orm'][0x1*0x243d+-0x699*-0x2+0x316c*-0x1]=_0x310dec['_cookieTra'+'nsform']['w'],this['lightCooki'+'eMatrixId'][_0x19b6ae]['setValue'](_0x310dec['_cookieTra'+'nsformUnif'+'orm']),_0x310dec['_cookieOff'+'setUniform'][0x25*0x67+0xca*-0xa+0x9*-0xc7]=_0x310dec['_cookieOff'+'set']['x'],_0x310dec['_cookieOff'+'setUniform'][0x26ba*-0x1+0x19e2+0xcd9]=_0x310dec['_cookieOff'+'set']['y'],this['lightCooki'+'eOffsetId'][_0x19b6ae]['setValue'](_0x310dec['_cookieOff'+'setUniform']));}}['dispatchLo'+'calLights'](_0x38fa72,_0x5a8380,_0x44b2da){let _0x2e7681=_0x44b2da;const _0x2c4f58=this['device']['scope'],_0x31a4b9=_0x38fa72[Ke],_0x14a3df=_0x31a4b9['length'];for(let _0x5ed7fc=0x25af*-0x1+0xb87*0x3+0x31a;_0x5ed7fc<_0x14a3df;_0x5ed7fc++){const _0x20f28f=_0x31a4b9[_0x5ed7fc];_0x20f28f['mask']&_0x5a8380&&(this['dispatchOm'+'niLight'](_0x2c4f58,_0x20f28f,_0x2e7681),_0x2e7681++);}const _0x182363=_0x38fa72[Ze],_0x4af725=_0x182363['length'];for(let _0x10a4cc=0x19*-0x10f+-0xad9*0x1+0x2550;_0x10a4cc<_0x4af725;_0x10a4cc++){const _0x3b44be=_0x182363[_0x10a4cc];_0x3b44be['mask']&_0x5a8380&&(this['dispatchSp'+'otLight'](_0x2c4f58,_0x3b44be,_0x2e7681),_0x2e7681++);}}['renderForw'+'ardPrepare'+'Materials'](_0x3e4855,_0x3239db,_0x56f8c6,_0x36ebcc,_0xd927db,_0x15dfc8){const _0xd17fa2=_0x3e4855['fogParams']??this['scene']['fog'],_0xcd6ef6=_0x3e4855['shaderPara'+'ms'];_0xcd6ef6['fog']=_0xd17fa2['type'],_0xcd6ef6['srgbRender'+'Target']=(_0x3239db==null?void(-0x18f8+-0x17f1+-0x13*-0x293):_0x3239db['isColorBuf'+'ferSrgb'](0x1420+-0x260b+0x11eb))??!(-0x11d7*0x2+0x349*-0x4+0x30d3*0x1);const _0x1d3ac4=(_0x5377ba,_0x574e08,_0x27c866,_0x244585)=>{Lr['drawCalls']['push'](_0x5377ba),Lr['shaderInst'+'ances']['push'](_0x574e08),Lr['isNewMater'+'ial']['push'](_0x27c866),Lr['lightMaskC'+'hanged']['push'](_0x244585);};Lr['clear']();const _0x520ca1=this['device'],_0x49dc5f=this['scene'],_0x32c4ab=_0x49dc5f['clusteredL'+'ightingEna'+'bled'],_0x586f58=(_0xd927db==null?void(0x218+-0xff*0x1b+-0x38b*-0x7):_0xd927db['getLightHa'+'sh'](_0x32c4ab))??-0xf21*0x1+0x1b30+0x3f*-0x31;let _0x15ff08=null,_0x5455ad,_0x34db9c;const _0x385bc1=_0x56f8c6['length'];for(let _0x43d349=-0x5b*0x58+-0xac6+0x2a0e;_0x43d349<_0x385bc1;_0x43d349++){const _0x5d195d=_0x56f8c6[_0x43d349];if(_0x3e4855===Fi['skipRender'+'Camera']){if(Fi['_skipRende'+'rCounter']>=Fi['skipRender'+'After'])continue;Fi['_skipRende'+'rCounter']++;}if(_0xd927db){if(_0xd927db['_skipRende'+'rCounter']>=_0xd927db['skipRender'+'After'])continue;_0xd927db['_skipRende'+'rCounter']++;}const _0x2ef47f=_0x5d195d['instancing'+'Data'];if(_0x2ef47f&&_0x2ef47f['count']<=0xbcb+0x263a+0xa01*-0x5)continue;_0x5d195d['ensureMate'+'rial'](_0x520ca1);const _0x3c7ecb=_0x5d195d['material'],_0x214931=_0x5d195d['_shaderDef'+'s'],_0x329acf=_0x5d195d['mask'];_0x3c7ecb&&_0x3c7ecb===_0x15ff08&&_0x214931!==_0x5455ad&&(_0x15ff08=null),_0x3c7ecb!==_0x15ff08&&(this['_materialS'+'witches']++,_0x3c7ecb['_scene']=_0x49dc5f,_0x3c7ecb['dirty']&&(Q['pushGpuMar'+'ker'](_0x520ca1,'Node:\x20'+_0x5d195d['node']['name']+(',\x20Material'+':\x20')+_0x3c7ecb['name']),_0x3c7ecb['updateUnif'+'orms'](_0x520ca1,_0x49dc5f),_0x3c7ecb['dirty']=!(0x3*-0x2c4+0x1fb6+-0x1769),Q['popGpuMark'+'er'](_0x520ca1)));const _0x1fe4b7=_0x5d195d['getShaderI'+'nstance'](_0x15dfc8,_0x586f58,_0x49dc5f,_0xcd6ef6,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x36ebcc);_0x1d3ac4(_0x5d195d,_0x1fe4b7,_0x3c7ecb!==_0x15ff08,!_0x15ff08||_0x329acf!==_0x34db9c),_0x15ff08=_0x3c7ecb,_0x5455ad=_0x214931,_0x34db9c=_0x329acf;}return Lr;}['renderForw'+'ardInterna'+'l'](_0x48d474,_0x1a8516,_0x163af3,_0x12cbbd,_0x5b0c60,_0x1cc47f,_0x1fe91d){var _0x478661,_0x567543;const _0x4ec3de=this['device'],_0xf4c9a3=this['scene'],_0x12e38d=-0x19e6+0x5*0x217+0xf74<<_0x12cbbd,_0x170d0a=_0x1cc47f?-(0x1*0x1e86+0x79a+-0x261f):0x204e+-0x1*0x2638+-0x5eb*-0x1,_0x2a9ac0=_0xf4c9a3['clusteredL'+'ightingEna'+'bled'],_0x2cf82f=(_0x478661=_0x48d474['xr'])!=null&&_0x478661['session']&&_0x48d474['xr']['views']['list']['length']?_0x48d474['xr']['views']['list']:null,_0x26a7a3=_0x1a8516['drawCalls']['length'];for(let _0x311f0b=-0x1c5a+0xbb6+-0x2c6*-0x6;_0x311f0b<_0x26a7a3;_0x311f0b++){const _0x947f6f=_0x1a8516['drawCalls'][_0x311f0b],_0x153105=_0x1a8516['isNewMater'+'ial'][_0x311f0b],_0xf506f1=_0x1a8516['lightMaskC'+'hanged'][_0x311f0b],_0x1be3ca=_0x1a8516['shaderInst'+'ances'][_0x311f0b],_0x459af3=_0x947f6f['material'],_0x3734e5=_0x947f6f['mask'];if(_0x1be3ca['shader']['failed'])continue;if(_0x153105){if(_0x4ec3de['setShader'](_0x1be3ca['shader'],!(-0x161*0x5+-0x1324+-0x12f*-0x16)),_0x459af3['setParamet'+'ers'](_0x4ec3de),_0xf506f1){const _0x20bbde=this['dispatchDi'+'rectLights'](_0x163af3[ve],_0x3734e5,_0x48d474);_0x2a9ac0||this['dispatchLo'+'calLights'](_0x163af3,_0x3734e5,_0x20bbde);}this['alphaTestI'+'d']['setValue'](_0x459af3['alphaTest']),_0x4ec3de['setBlendSt'+'ate'](_0x459af3['blendState']),_0x4ec3de['setDepthSt'+'ate'](_0x459af3['depthState']),_0x4ec3de['setAlphaTo'+'Coverage'](_0x459af3['alphaToCov'+'erage']);}Q['pushGpuMar'+'ker'](_0x4ec3de,'Node:\x20'+_0x947f6f['node']['name']+(',\x20Material'+':\x20')+_0x459af3['name']),this['setupCullM'+'ode'](_0x48d474['_cullFaces'],_0x170d0a,_0x947f6f);const _0x1859a6=_0x947f6f['stencilFro'+'nt']??_0x459af3['stencilFro'+'nt'],_0x249672=_0x947f6f['stencilBac'+'k']??_0x459af3['stencilBac'+'k'];_0x4ec3de['setStencil'+'State'](_0x1859a6,_0x249672),_0x947f6f['setParamet'+'ers'](_0x4ec3de,_0x12e38d),_0x4ec3de['scope']['resolve']('meshInstan'+'ceId')['setValue'](_0x947f6f['id']);const _0x170520=_0x947f6f['mesh'];this['setVertexB'+'uffers'](_0x4ec3de,_0x170520),this['setMorphin'+'g'](_0x4ec3de,_0x947f6f['morphInsta'+'nce']),this['setSkinnin'+'g'](_0x4ec3de,_0x947f6f);const _0x15315f=_0x947f6f['instancing'+'Data'];_0x15315f&&_0x4ec3de['setVertexB'+'uffer'](_0x15315f['vertexBuff'+'er']),this['setMeshIns'+'tanceMatri'+'ces'](_0x947f6f,!(-0x4*0x54e+0x8b*-0x1+0x15c3)),this['setupMeshU'+'niformBuff'+'ers'](_0x1be3ca);const _0x3eff13=_0x947f6f['renderStyl'+'e'],_0x7a1a98=_0x170520['indexBuffe'+'r'][_0x3eff13];_0x5b0c60==null||_0x5b0c60(_0x947f6f,_0x311f0b);const _0x372cb6=(_0x567543=_0x947f6f['indirectDa'+'ta'])==null?void(0x18*0x5e+-0x1a23*0x1+0x1153):_0x567543['get'](_0x48d474);if(_0x2cf82f)for(let _0x2ac076=0x12be+0x1*-0x1e09+-0x31*-0x3b;_0x2ac076<_0x2cf82f['length'];_0x2ac076++){const _0x5b78ae=_0x2cf82f[_0x2ac076];if(_0x4ec3de['setViewpor'+'t'](_0x5b78ae['viewport']['x'],_0x5b78ae['viewport']['y'],_0x5b78ae['viewport']['z'],_0x5b78ae['viewport']['w']),_0x4ec3de['supportsUn'+'iformBuffe'+'rs']){const _0x25f0a9=_0x1fe91d[_0x2ac076];_0x4ec3de['setBindGro'+'up']($o,_0x25f0a9);}else this['setupViewU'+'niforms'](_0x5b78ae,_0x2ac076);const _0x4fdc23=_0x2ac076===-0x7a1+0x250c*-0x1+-0x1*-0x2cad,_0x2d9cd0=_0x2ac076===_0x2cf82f['length']-(0x2*-0x950+0x9a+0x39b*0x5);_0x4ec3de['draw'](_0x170520['primitive'][_0x3eff13],_0x7a1a98,_0x15315f==null?void(-0x1873+0x19db+0x4*-0x5a):_0x15315f['count'],_0x372cb6,_0x4fdc23,_0x2d9cd0),this['_forwardDr'+'awCalls']++,_0x947f6f['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;}else _0x4ec3de['draw'](_0x170520['primitive'][_0x3eff13],_0x7a1a98,_0x15315f==null?void(-0xd32+0x115+-0x1bb*-0x7):_0x15315f['count'],_0x372cb6),this['_forwardDr'+'awCalls']++,_0x947f6f['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;_0x311f0b<_0x26a7a3-(0x11*0x21d+0x1847+0x3c33*-0x1)&&!_0x1a8516['isNewMater'+'ial'][_0x311f0b+(0x14d3+-0x159f+0xcd)]&&_0x459af3['setParamet'+'ers'](_0x4ec3de,_0x947f6f['parameters']),Q['popGpuMark'+'er'](_0x4ec3de);}}['renderForw'+'ard'](_0x1d84a0,_0x5254b5,_0xe4b5cd,_0x3e3fa3,_0x2ca22f,_0x4b835c,_0x48e81c,_0x3ce4d7,_0x850dab){const _0x3c03d5=de(),_0x3018b0=this['renderForw'+'ardPrepare'+'Materials'](_0x1d84a0,_0x5254b5,_0xe4b5cd,_0x3e3fa3,_0x48e81c,_0x2ca22f);this['renderForw'+'ardInterna'+'l'](_0x1d84a0,_0x3018b0,_0x3e3fa3,_0x2ca22f,_0x4b835c,_0x3ce4d7,_0x850dab),Lr['clear'](),this['_forwardTi'+'me']+=de()-_0x3c03d5;}['renderForw'+'ardLayer'](_0x53ebfe,_0x40fdd9,_0xb2c6b7,_0x53453a,_0x3f8498,_0x362db9,_0x1e2e0e={}){const {scene:_0x16db48,device:_0x31e00d}=this,_0x16f6fc=_0x16db48['clusteredL'+'ightingEna'+'bled'];this['setupViewp'+'ort'](_0x53ebfe,_0x40fdd9);let _0x1bb5bc,_0x137754;if(_0xb2c6b7){const _0x1f33f1=de();_0xb2c6b7['sortVisibl'+'e'](_0x53ebfe,_0x53453a),this['_sortTime']+=de()-_0x1f33f1;const _0x36a3e0=_0xb2c6b7['getCulledI'+'nstances'](_0x53ebfe);_0x1bb5bc=_0x53453a?_0x36a3e0['transparen'+'t']:_0x36a3e0['opaque'],_0x16db48['immediate']['onPreRende'+'rLayer'](_0xb2c6b7,_0x1bb5bc,_0x53453a),_0xb2c6b7['requiresLi'+'ghtCube']&&(this['lightCube']['update'](_0x16db48['ambientLig'+'ht'],_0xb2c6b7['_lights']),this['constantLi'+'ghtCube']['setValue'](this['lightCube']['colors'])),_0x137754=_0xb2c6b7['splitLight'+'s'];}else _0x1bb5bc=_0x1e2e0e['meshInstan'+'ces'],_0x137754=_0x1e2e0e['splitLight'+'s']??_b;if(w['assert'](_0x1bb5bc,'Either\x20lay'+'er\x20or\x20opti'+'ons.meshIn'+'stances\x20mu'+'st\x20be\x20prov'+'ided'),_0x16f6fc){const _0x199da3=_0x1e2e0e['lightClust'+'ers']??this['worldClust'+'ersAllocat'+'or']['empty'];_0x199da3['activate'](),_0xb2c6b7&&!this['clustersDe'+'bugRendere'+'d']&&_0x16db48['lighting']['debugLayer']===_0xb2c6b7['id']&&(this['clustersDe'+'bugRendere'+'d']=!(-0x1203+0x34*-0x3+0x1*0x129f),Uf['render'](_0x199da3,this['scene']));}_0x16db48['_activeCam'+'era']=_0x53ebfe;const _0x38dbf7=_0x53ebfe['fogParams']??this['scene']['fog'];this['setFogCons'+'tants'](_0x38dbf7);const _0x193515=this['setCameraU'+'niforms'](_0x53ebfe,_0x40fdd9);_0x31e00d['supportsUn'+'iformBuffe'+'rs']&&this['setupViewU'+'niformBuff'+'ers'](_0x362db9,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x193515);const _0x313fb2=_0x1e2e0e['clearColor']??!(-0x2208+-0x27*0x79+0x49*0xb8),_0x563a2d=_0x1e2e0e['clearDepth']??!(0x1*-0x68f+-0x1d3d+-0x3*-0xbef),_0x56d4b5=_0x1e2e0e['clearStenc'+'il']??!(0x16*-0x197+-0x5*-0xa9+-0x1fae*-0x1);(_0x313fb2||_0x563a2d||_0x56d4b5)&&this['clear'](_0x53ebfe,_0x313fb2,_0x563a2d,_0x56d4b5);const _0x58f3cc=!!(_0x53ebfe['_flipFaces']^(_0x40fdd9==null?void(0x8*-0x1af+-0x1bc7+0x293f*0x1):_0x40fdd9['flipY'])),_0x59f010=this['_forwardDr'+'awCalls'];this['renderForw'+'ard'](_0x53ebfe,_0x40fdd9,_0x1bb5bc,_0x137754,_0x3f8498,null,_0xb2c6b7,_0x58f3cc,_0x362db9),_0xb2c6b7&&(_0xb2c6b7['_forwardDr'+'awCalls']+=this['_forwardDr'+'awCalls']-_0x59f010);}['setFogCons'+'tants'](_0x157e69){if(_0x157e69['type']!==Hn){nr['linear'](_0x157e69['color']);const _0x435731=this['fogColor'];_0x435731[-0x686*-0x1+0x1*-0x2415+-0x1d8f*-0x1]=nr['r'],_0x435731[-0x3*0x7b8+-0x16b3+0x2ddc]=nr['g'],_0x435731[-0x435*0x2+0x1e90+-0xb12*0x2]=nr['b'],this['fogColorId']['setValue'](_0x435731),_0x157e69['type']===YT?(this['fogStartId']['setValue'](_0x157e69['start']),this['fogEndId']['setValue'](_0x157e69['end'])):this['fogDensity'+'Id']['setValue'](_0x157e69['density']);}}['setSceneCo'+'nstants'](){const _0xf835a9=this['scene'];this['dispatchGl'+'obalLights'](_0xf835a9);const _0x37411a=this['device'];this['_screenSiz'+'e'][0x7e4+0x1e71+-0x2655]=_0x37411a['width'],this['_screenSiz'+'e'][-0x1*0xbaf+0x1*0x2511+0x1*-0x1961]=_0x37411a['height'],this['_screenSiz'+'e'][-0x1817+0x1*-0x2b9+0x1ad2]=(0x24*-0x25+0x1*-0x14e7+0x1a1c)/_0x37411a['width'],this['_screenSiz'+'e'][-0x15ff+0x240c+-0xe0a]=(-0x133f+-0x21c2+0x3502*0x1)/_0x37411a['height'],this['screenSize'+'Id']['setValue'](this['_screenSiz'+'e']),this['pcssDiskSa'+'mplesId']['setValue'](this['pcssDiskSa'+'mples']),this['pcssSphere'+'SamplesId']['setValue'](this['pcssSphere'+'Samples']);}['buildFrame'+'Graph'](_0x25a242,_0x26908a){const _0x1aff65=this['scene'];if(_0x25a242['reset'](),_0x1aff65['clusteredL'+'ightingEna'+'bled']){const {shadowsEnabled:_0x12e651,cookiesEnabled:_0x19c1d2}=_0x1aff65['lighting'];this['_renderPas'+'sUpdateClu'+'stered']['update'](_0x25a242,_0x12e651,_0x19c1d2,this['lights'],this['localLight'+'s']),_0x25a242['addRenderP'+'ass'](this['_renderPas'+'sUpdateClu'+'stered']);}else this['_shadowRen'+'dererLocal']['buildNonCl'+'usteredRen'+'derPasses'](_0x25a242,this['localLight'+'s']);let _0x236cfd=-0x2528+-0x6e6*0x5+0x47a6,_0xd33c03=!(0x24eb+-0x20e8+-0x403),_0x186549=null;const _0x38a8e5=_0x26908a['_renderAct'+'ions'];for(let _0x21f04c=_0x236cfd;_0x21f04c<_0x38a8e5['length'];_0x21f04c++){const _0x16125a=_0x38a8e5[_0x21f04c],{layer:_0x11aa33,camera:_0x466f74}=_0x16125a;if(_0x16125a['useCameraP'+'asses'])w['call'](()=>{_0x466f74['postEffect'+'s']['effects']['length']>0x1b15+0x49*0x15+-0x3*0xb06&&w['warnOnce']('Camera\x20\x27'+_0x466f74['entity']['name']+('\x27\x20uses\x20ren'+'der\x20passes'+',\x20which\x20ar'+'e\x20not\x20comp'+'atible\x20wit'+'h\x20post-eff'+'ects\x20scrip'+'ts.\x20Render'+'ing\x20of\x20the'+'\x20post-effe'+'cts\x20is\x20ign'+'ored,\x20but\x20'+'they\x20shoul'+'d\x20not\x20be\x20a'+'ttached\x20to'+'\x20the\x20camer'+'a.'));}),_0x466f74['camera']['renderPass'+'es']['forEach'](_0x3d08b5=>{_0x25a242['addRenderP'+'ass'](_0x3d08b5);});else{const _0x599ee8=_0x11aa33['id']===ps,_0x43a24e=_0x599ee8&&(_0x466f74['renderScen'+'eColorMap']||_0x466f74['renderScen'+'eDepthMap']);_0xd33c03&&(_0xd33c03=!(-0x7fa*0x4+-0x4*-0x2ce+-0x1*-0x14b1),_0x236cfd=_0x21f04c,_0x186549=_0x16125a['renderTarg'+'et']);const _0x29ed78=_0x38a8e5[_0x21f04c+(0x1*-0x71b+-0xc71+0x138d)],_0x52f70d=(_0x29ed78?!_0x29ed78['useCameraP'+'asses']&&_0x29ed78['layer']['id']===ps:!(-0x17af+-0x1ef+0x199f))&&(_0x466f74['renderScen'+'eColorMap']||_0x466f74['renderScen'+'eDepthMap']),_0x2943a8=_0x29ed78?_0x29ed78['firstCamer'+'aUse']&&this['cameraDirS'+'hadowLight'+'s']['has'](_0x29ed78['camera']['camera']):!(0x1d2+0x3*0x74b+0x2*-0xbd9);if(!_0x29ed78||_0x29ed78['renderTarg'+'et']!==_0x186549||_0x2943a8||_0x52f70d||_0x43a24e){if(_0x599ee8&&_0x236cfd===_0x21f04c||this['addMainRen'+'derPass'](_0x25a242,_0x26908a,_0x186549,_0x236cfd,_0x21f04c),_0x599ee8){if(_0x466f74['renderScen'+'eColorMap']){const _0x14edcd=_0x466f74['camera']['renderPass'+'ColorGrab'];_0x14edcd['source']=_0x466f74['renderTarg'+'et'],_0x25a242['addRenderP'+'ass'](_0x14edcd);}_0x466f74['renderScen'+'eDepthMap']&&_0x25a242['addRenderP'+'ass'](_0x466f74['camera']['renderPass'+'DepthGrab']);}if(_0x16125a['triggerPos'+'tprocess']&&(_0x466f74!=null&&_0x466f74['onPostproc'+'essing'])){const _0x2a9d5e=new mb(this['device'],this,_0x16125a);_0x25a242['addRenderP'+'ass'](_0x2a9d5e);}_0xd33c03=!(-0xc2a+0x2577*0x1+-0x194d*0x1);}}}}['addMainRen'+'derPass'](_0x2291d0,_0x197cf1,_0x5c0231,_0x69ad68,_0x1d77d7){const _0x174385=new pb(this['device'],_0x197cf1,this['scene'],this);_0x174385['init'](_0x5c0231);const _0x205109=_0x197cf1['_renderAct'+'ions'];for(let _0x36eac7=_0x69ad68;_0x36eac7<=_0x1d77d7;_0x36eac7++)_0x174385['addRenderA'+'ction'](_0x205109[_0x36eac7]);_0x2291d0['addRenderP'+'ass'](_0x174385);}['update'](_0x572cd8){this['frameUpdat'+'e'](),this['shadowRend'+'erer']['frameUpdat'+'e'](),this['scene']['_updateSky'+'Mesh'](),this['updateLaye'+'rCompositi'+'on'](_0x572cd8),this['collectLig'+'hts'](_0x572cd8),this['beginFrame'](_0x572cd8),this['setSceneCo'+'nstants'](),this['cullCompos'+'ition'](_0x572cd8),this['gpuUpdate'](this['processing'+'MeshInstan'+'ces']);}};h(Fi,'skipRender'+'Camera',null),h(Fi,'_skipRende'+'rCounter',-0x1*-0x1763+-0x1153*0x1+-0x610),h(Fi,'skipRender'+'After',0x35*0x6d+-0x24ef+0xe5e);let Jo=Fi,Wd=0x1*-0x1ece+0x1b4c+-0x1*-0x382;const so=[],Kl=new Set();function yb(_0x3162e3,_0x18e77f){return _0x3162e3['drawOrder']-_0x18e77f['drawOrder'];}function vb(_0x24c7ce,_0x2eaa15){const _0x58caf3=_0x24c7ce['_sortKeyFo'+'rward'],_0x493ddb=_0x2eaa15['_sortKeyFo'+'rward'];return _0x58caf3===_0x493ddb?_0x2eaa15['mesh']['id']-_0x24c7ce['mesh']['id']:_0x493ddb-_0x58caf3;}function xb(_0x126b76,_0x4ccb3b){return _0x4ccb3b['_sortKeyDy'+'namic']-_0x126b76['_sortKeyDy'+'namic'];}function Tb(_0xa8e6cf,_0x7ce02a){return _0xa8e6cf['_sortKeyDy'+'namic']-_0x7ce02a['_sortKeyDy'+'namic'];}const wb=[null,yb,vb,xb,Tb];class Eb{constructor(){h(this,'opaque',[]),h(this,'transparen'+'t',[]);}}class Ot{constructor(_0x5c6347={}){h(this,'meshInstan'+'ces',[]),h(this,'meshInstan'+'cesSet',new Set()),h(this,'shadowCast'+'ers',[]),h(this,'shadowCast'+'ersSet',new Set()),h(this,'_visibleIn'+'stances',new WeakMap()),h(this,'_lights',[]),h(this,'_lightsSet',new Set()),h(this,'_clustered'+'LightsSet',new Set()),h(this,'_splitLigh'+'ts',[[],[],[]]),h(this,'_splitLigh'+'tsDirty',!(-0x447+0x21a*0xb+0x1*-0x12d7)),h(this,'requiresLi'+'ghtCube',!(-0x11*-0xb5+-0x75c+-0x4a8)),h(this,'cameras',[]),h(this,'camerasSet',new Set()),h(this,'_dirtyComp'+'osition',!(-0x22a*-0xa+-0x18d*0x13+0x3*0x29c)),(_0x5c6347['id']!==void(-0xef*0x11+0x612*-0x3+-0x15d*-0x19)?(this['id']=_0x5c6347['id'],Wd=Math['max'](this['id']+(-0x1412+-0x1a87+0x2e9a),Wd)):this['id']=Wd++,this['name']=_0x5c6347['name'],this['_enabled']=_0x5c6347['enabled']??!(0x18d7+0x1*-0x24b3+0xbdc),this['_refCounte'+'r']=this['_enabled']?0x690*0x4+0x2*0x9c1+-0xdd*0x35:0x119b*-0x1+0x3*0x1a1+0xcb8,this['opaqueSort'+'Mode']=_0x5c6347['opaqueSort'+'Mode']??uw,this['transparen'+'tSortMode']=_0x5c6347['transparen'+'tSortMode']??zm,_0x5c6347['renderTarg'+'et']&&(this['renderTarg'+'et']=_0x5c6347['renderTarg'+'et']),this['_clearColo'+'rBuffer']=!!_0x5c6347['clearColor'+'Buffer'],this['_clearDept'+'hBuffer']=!!_0x5c6347['clearDepth'+'Buffer'],this['_clearSten'+'cilBuffer']=!!_0x5c6347['clearStenc'+'ilBuffer'],this['onEnable']=_0x5c6347['onEnable'],this['onDisable']=_0x5c6347['onDisable'],this['_enabled']&&this['onEnable']&&this['onEnable'](),this['customSort'+'Callback']=null,this['customCalc'+'ulateSortV'+'alues']=null,this['_lightHash']=0x5*-0x683+0x6*0x1e9+0x1519,this['_lightHash'+'Dirty']=!(0x2656+0x15f3+0x18*-0x283),this['_lightIdHa'+'sh']=-0x2568+-0x1108*-0x1+-0x4*-0x518,this['_lightIdHa'+'shDirty']=!(0x1043+-0x1196+0x154),this['skipRender'+'After']=Number['MAX_VALUE'],this['_skipRende'+'rCounter']=-0x149e+-0x1*-0x7b9+0x1*0xce5,this['_renderTim'+'e']=-0x16bd*0x1+0x1c5d+-0x5a0,this['_forwardDr'+'awCalls']=0x188f*-0x1+0x4*-0x280+0x1*0x228f,this['_shadowDra'+'wCalls']=0x47*-0x1+-0x22f+0x276,this['_shaderVer'+'sion']=-(0x261a+-0xf0a+0x170f*-0x1));}set['enabled'](_0xf21e10){_0xf21e10!==this['_enabled']&&(this['_dirtyComp'+'osition']=!(0x3*-0x5b9+0xf0a+0x5*0x6d),this['_enabled']=_0xf21e10,_0xf21e10?(this['incrementC'+'ounter'](),this['onEnable']&&this['onEnable']()):(this['decrementC'+'ounter'](),this['onDisable']&&this['onDisable']()));}get['enabled'](){return this['_enabled'];}set['clearColor'+'Buffer'](_0x37f26a){this['_clearColo'+'rBuffer']=_0x37f26a,this['_dirtyComp'+'osition']=!(-0xf59+-0xd01+-0x17e*-0x13);}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'+'Buffer'](_0x17f2c1){this['_clearDept'+'hBuffer']=_0x17f2c1,this['_dirtyComp'+'osition']=!(-0x51b+0x2*-0x8d2+0x16bf*0x1);}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'ilBuffer'](_0x4edb32){this['_clearSten'+'cilBuffer']=_0x4edb32,this['_dirtyComp'+'osition']=!(0x24d5+0x96b*-0x1+-0xb*0x27e);}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}get['hasCluster'+'edLights'](){return this['_clustered'+'LightsSet']['size']>-0x1241*0x1+0x9*-0x71+0x163a;}get['clusteredL'+'ightsSet'](){return this['_clustered'+'LightsSet'];}['incrementC'+'ounter'](){this['_refCounte'+'r']===0x53*0xc+0x1d7*-0x5+0x54f*0x1&&(this['_enabled']=!(0xbf6+0x2579+-0x316f),this['onEnable']&&this['onEnable']()),this['_refCounte'+'r']++;}['decrementC'+'ounter'](){if(this['_refCounte'+'r']===0x15ed+-0xc81+-0x1*0x96b)this['_enabled']=!(0x2287*-0x1+0x35*-0xf+0x25a3),this['onDisable']&&this['onDisable']();else{if(this['_refCounte'+'r']===-0x3e0*-0x8+0x5e4+-0x24e4){w['warn']('Trying\x20to\x20'+'decrement\x20'+'layer\x20coun'+'ter\x20below\x20'+'0');return;}}this['_refCounte'+'r']--;}['addMeshIns'+'tances'](_0x44a1ec,_0x43274c){const _0x213477=this['meshInstan'+'ces'],_0x75b82f=this['meshInstan'+'cesSet'];for(let _0x2a980b=0x1*0x26e7+-0x5*0x629+-0x81a;_0x2a980b<_0x44a1ec['length'];_0x2a980b++){const _0x1d2750=_0x44a1ec[_0x2a980b];_0x75b82f['has'](_0x1d2750)||(_0x213477['push'](_0x1d2750),_0x75b82f['add'](_0x1d2750),Kl['add'](_0x1d2750['material']));}if(_0x43274c||this['addShadowC'+'asters'](_0x44a1ec),Kl['size']>-0x1080+0x3fb*-0x6+0x2862){const _0x4b2e7f=this['_shaderVer'+'sion'];Kl['forEach'](_0x576995=>{_0x4b2e7f>=-0x2083+-0x17d3+0x2*0x1c2b&&_0x576995['_shaderVer'+'sion']!==_0x4b2e7f&&(_0x576995['getShaderV'+'ariant']!==er['prototype']['getShaderV'+'ariant']&&_0x576995['clearVaria'+'nts'](),_0x576995['_shaderVer'+'sion']=_0x4b2e7f);}),Kl['clear']();}}['removeMesh'+'Instances'](_0x283b8e,_0x358cc7){const _0x3a7e71=this['meshInstan'+'ces'],_0x1033d5=this['meshInstan'+'cesSet'];for(let _0x49dc49=0x1e1f+-0x1c1d+-0x202;_0x49dc49<_0x283b8e['length'];_0x49dc49++){const _0x411679=_0x283b8e[_0x49dc49];if(_0x1033d5['has'](_0x411679)){_0x1033d5['delete'](_0x411679);const _0x54b553=_0x3a7e71['indexOf'](_0x411679);_0x54b553>=-0x6f*0x2d+0x440+-0x1*-0xf43&&_0x3a7e71['splice'](_0x54b553,0x797*0x1+-0x5*-0x574+-0x22da);}}_0x358cc7||this['removeShad'+'owCasters'](_0x283b8e);}['addShadowC'+'asters'](_0x446680){const _0x9b6cec=this['shadowCast'+'ers'],_0x565faf=this['shadowCast'+'ersSet'];for(let _0x1e369f=-0x85a*-0x2+-0x7*-0x392+-0x29b2;_0x1e369f<_0x446680['length'];_0x1e369f++){const _0x426eb4=_0x446680[_0x1e369f];_0x426eb4['castShadow']&&!_0x565faf['has'](_0x426eb4)&&(_0x565faf['add'](_0x426eb4),_0x9b6cec['push'](_0x426eb4));}}['removeShad'+'owCasters'](_0x30db34){const _0x108bf4=this['shadowCast'+'ers'],_0x4d426a=this['shadowCast'+'ersSet'];for(let _0x1caaad=-0x274+-0x61*-0x49+-0x1935;_0x1caaad<_0x30db34['length'];_0x1caaad++){const _0x5a501f=_0x30db34[_0x1caaad];if(_0x4d426a['has'](_0x5a501f)){_0x4d426a['delete'](_0x5a501f);const _0x5afd34=_0x108bf4['indexOf'](_0x5a501f);_0x5afd34>=-0x33c*-0xc+0x20ae+-0x477e&&_0x108bf4['splice'](_0x5afd34,-0x7*0x419+-0x11df+0x2e8f);}}}['clearMeshI'+'nstances'](_0x48858d=!(0x20ad+-0x1b19*0x1+0x593*-0x1)){this['meshInstan'+'ces']['length']=0x1*0x16ed+0x160+-0x184d,this['meshInstan'+'cesSet']['clear'](),_0x48858d||(this['shadowCast'+'ers']['length']=0x1db4*-0x1+0x74a+0x1*0x166a,this['shadowCast'+'ersSet']['clear']());}['markLights'+'Dirty'](){this['_lightHash'+'Dirty']=!(-0x1e61*-0x1+-0x1e26+0x3b*-0x1),this['_lightIdHa'+'shDirty']=!(0x1b1c+-0x6a*-0x10+-0xfe*0x22),this['_splitLigh'+'tsDirty']=!(0x1*0x3e6+-0x92d+0x547);}['hasLight'](_0x44c36b){return this['_lightsSet']['has'](_0x44c36b);}['addLight'](_0x50a37f){const _0x144f39=_0x50a37f['light'];this['_lightsSet']['has'](_0x144f39)||(this['_lightsSet']['add'](_0x144f39),this['_lights']['push'](_0x144f39),this['markLights'+'Dirty']()),_0x144f39['type']!==ve&&this['_clustered'+'LightsSet']['add'](_0x144f39);}['removeLigh'+'t'](_0x191799){const _0xb182aa=_0x191799['light'];this['_lightsSet']['has'](_0xb182aa)&&(this['_lightsSet']['delete'](_0xb182aa),this['_lights']['splice'](this['_lights']['indexOf'](_0xb182aa),-0x4b1*0x3+-0x224e+0x1831*0x2),this['markLights'+'Dirty']()),_0xb182aa['type']!==ve&&this['_clustered'+'LightsSet']['delete'](_0xb182aa);}['clearLight'+'s'](){this['_lightsSet']['forEach'](_0x2173e8=>_0x2173e8['removeLaye'+'r'](this)),this['_lightsSet']['clear'](),this['_clustered'+'LightsSet']['clear'](),this['_lights']['length']=0x1eb6+-0x7ce*-0x5+-0x45bc,this['markLights'+'Dirty']();}get['splitLight'+'s'](){if(this['_splitLigh'+'tsDirty']){this['_splitLigh'+'tsDirty']=!(-0x2*-0xa01+-0x11e9+-0x218);const _0x2cdb49=this['_splitLigh'+'ts'];for(let _0x16b347=-0x1*0x258d+0x85*-0x46+0x49eb;_0x16b347<_0x2cdb49['length'];_0x16b347++)_0x2cdb49[_0x16b347]['length']=0x579+-0x16*0x18e+-0x1cbb*-0x1;const _0x1a4e1d=this['_lights'];for(let _0x1e32b5=0x41d*0x7+0x1619*0x1+-0x32e4*0x1;_0x1e32b5<_0x1a4e1d['length'];_0x1e32b5++){const _0x2ec30f=_0x1a4e1d[_0x1e32b5];_0x2ec30f['enabled']&&_0x2cdb49[_0x2ec30f['_type']]['push'](_0x2ec30f);}for(let _0x150b0e=0xa9+0x1f*-0x102+0x1e95;_0x150b0e<_0x2cdb49['length'];_0x150b0e++)_0x2cdb49[_0x150b0e]['sort']((_0xc2c489,_0x42ef0b)=>_0xc2c489['key']-_0x42ef0b['key']);}return this['_splitLigh'+'ts'];}['evaluateLi'+'ghtHash'](_0x2f3c47,_0x213ad1,_0x2eb927){let _0x578a75=-0x871*0x1+0xf*0x215+-0x16ca;const _0x55b305=this['_lights'];for(let _0x34ae43=0xf42+0xdaa+-0x1cec;_0x34ae43<_0x55b305['length'];_0x34ae43++){const _0x34b2fc=_0x55b305[_0x34ae43]['type']!==ve;(_0x2f3c47&&_0x34b2fc||_0x213ad1&&!_0x34b2fc)&&so['push'](_0x2eb927?_0x55b305[_0x34ae43]['id']:_0x55b305[_0x34ae43]['key']);}return so['length']>0x57*0x4f+-0x234a+0x871&&(so['sort'](),_0x578a75=iy(so),so['length']=0x1aab*0x1+-0xa88+-0x1023),_0x578a75;}['getLightHa'+'sh'](_0x628d8f){return this['_lightHash'+'Dirty']&&(this['_lightHash'+'Dirty']=!(0x1ca*0x14+-0x37*-0x3b+0x7*-0x6ec),this['_lightHash']=this['evaluateLi'+'ghtHash'](!_0x628d8f,!(-0x1133+-0x1*0x86f+0x19a2),!(0x96d+-0x1*0x1087+0x71b))),this['_lightHash'];}['getLightId'+'Hash'](){return this['_lightIdHa'+'shDirty']&&(this['_lightIdHa'+'shDirty']=!(0x1*0x1c29+-0x2*0x422+-0x13e4),this['_lightIdHa'+'sh']=this['evaluateLi'+'ghtHash'](!(0x26aa+-0x1*-0x19fd+-0x40a7),!(0x201e+0x1e0b+-0x14b8*0x3),!(-0x2*0x490+-0x7*0x44a+0x2726))),this['_lightIdHa'+'sh'];}['addCamera'](_0x1d4997){this['camerasSet']['has'](_0x1d4997['camera'])||(this['camerasSet']['add'](_0x1d4997['camera']),this['cameras']['push'](_0x1d4997),this['_dirtyComp'+'osition']=!(-0x43f*0x1+0x178c+-0x134d));}['removeCame'+'ra'](_0x57ddf0){if(this['camerasSet']['has'](_0x57ddf0['camera'])){this['camerasSet']['delete'](_0x57ddf0['camera']);const _0x456d16=this['cameras']['indexOf'](_0x57ddf0);this['cameras']['splice'](_0x456d16,0x1abb*-0x1+-0xa31+-0x1*-0x24ed),this['_dirtyComp'+'osition']=!(0x14c+0x4f2*0x4+-0x1514);}}['clearCamer'+'as'](){this['cameras']['length']=0x2ce*0x2+0x1f*-0x9e+0xd86,this['camerasSet']['clear'](),this['_dirtyComp'+'osition']=!(-0x12b*0x19+-0x13cd+0x3100);}['_calculate'+'SortDistan'+'ces'](_0x37c676,_0x2975d3,_0x345ef9){const _0x2d079b=_0x37c676['length'],{x:_0x211535,y:_0x222291,z:_0x42fe16}=_0x2975d3,{x:_0x5c6050,y:_0x539cf0,z:_0xa37c96}=_0x345ef9;for(let _0x53294f=-0x1e5b*0x1+-0x148d+0x32e8;_0x53294f<_0x2d079b;_0x53294f++){const _0xd5b3e4=_0x37c676[_0x53294f];let _0x39ab0f;if(_0xd5b3e4['calculateS'+'ortDistanc'+'e'])_0x39ab0f=_0xd5b3e4['calculateS'+'ortDistanc'+'e'](_0xd5b3e4,_0x2975d3,_0x345ef9);else{const _0x3ad7ff=_0xd5b3e4['aabb']['center'];_0x39ab0f=(_0x3ad7ff['x']-_0x211535)*_0x5c6050+(_0x3ad7ff['y']-_0x222291)*_0x539cf0+(_0x3ad7ff['z']-_0x42fe16)*_0xa37c96;}const _0x272747=_0xd5b3e4['_drawBucke'+'t']*(-0x37796feb+0x3241c488+-0x41*-0xff4ca3);_0xd5b3e4['_sortKeyDy'+'namic']=_0x272747+_0x39ab0f;}}['getCulledI'+'nstances'](_0x40b730){let _0x1febc8=this['_visibleIn'+'stances']['get'](_0x40b730);return _0x1febc8||(_0x1febc8=new Eb(),this['_visibleIn'+'stances']['set'](_0x40b730,_0x1febc8)),_0x1febc8;}['sortVisibl'+'e'](_0x1b326c,_0x3e6013){const _0x250902=_0x3e6013?this['transparen'+'tSortMode']:this['opaqueSort'+'Mode'];if(_0x250902===Cc)return;const _0x1e34ac=this['getCulledI'+'nstances'](_0x1b326c),_0x565ac6=_0x3e6013?_0x1e34ac['transparen'+'t']:_0x1e34ac['opaque'],_0x2d3783=_0x1b326c['node'];if(_0x250902===mw){const _0x447800=_0x2d3783['getPositio'+'n'](),_0x561049=_0x2d3783['forward'];this['customCalc'+'ulateSortV'+'alues']&&this['customCalc'+'ulateSortV'+'alues'](_0x565ac6,_0x565ac6['length'],_0x447800,_0x561049),this['customSort'+'Callback']&&_0x565ac6['sort'](this['customSort'+'Callback']);}else{if(_0x250902===zm||_0x250902===pw){const _0x1f884c=_0x2d3783['getPositio'+'n'](),_0x34e32e=_0x2d3783['forward'];this['_calculate'+'SortDistan'+'ces'](_0x565ac6,_0x1f884c,_0x34e32e);}_0x565ac6['sort'](wb[_0x250902]);}}}const bb=(_0x7d93d6,_0x39c3ed)=>_0x7d93d6['priority']-_0x39c3ed['priority'],el=_0x20186a=>_0x20186a['sort'](bb);class Bf extends me{constructor(_0x2ad50d='Untitled'){super(),h(this,'layerList',[]),h(this,'layerIdMap',new Map()),h(this,'layerNameM'+'ap',new Map()),h(this,'layerOpaqu'+'eIndexMap',new Map()),h(this,'layerTrans'+'parentInde'+'xMap',new Map()),h(this,'subLayerLi'+'st',[]),h(this,'subLayerEn'+'abled',[]),h(this,'cameras',[]),h(this,'_renderAct'+'ions',[]),h(this,'_dirty',!(-0x2115+0x543+0x1bd3)),(this['name']=_0x2ad50d,this['_opaqueOrd'+'er']={},this['_transpare'+'ntOrder']={});}['destroy'](){this['destroyRen'+'derActions']();}['destroyRen'+'derActions'](){this['_renderAct'+'ions']['forEach'](_0x1da0c9=>_0x1da0c9['destroy']()),this['_renderAct'+'ions']['length']=0x1b9c+-0x92*0x2f+-0xce;}['markDirty'](){this['_dirty']=!(0x71d*0x2+-0x1*-0x823+-0x165d);}['_update'](){const _0x683eee=this['layerList']['length'];if(!this['_dirty']){for(let _0x5ded4c=-0x2405+0x138f+0x1076;_0x5ded4c<_0x683eee;_0x5ded4c++)if(this['layerList'][_0x5ded4c]['_dirtyComp'+'osition']){this['_dirty']=!(0x6c5*-0x2+-0x23*-0x31+0x6d7);break;}}if(this['_dirty']){this['_dirty']=!(-0x1*-0x207b+-0x19e9+-0x1*0x691),this['cameras']['length']=-0x2*0x131+-0x1ed*0x2+0x63c;for(let _0x7da584=-0x14cd+0x26*-0x2b+-0x1b2f*-0x1;_0x7da584<_0x683eee;_0x7da584++){const _0x5cafaa=this['layerList'][_0x7da584];_0x5cafaa['_dirtyComp'+'osition']=!(0xa47*-0x1+0x1*0x9d+0x21*0x4b);for(let _0x1464c7=-0x8*0x3ca+-0x1b9+0x2009;_0x1464c7<_0x5cafaa['cameras']['length'];_0x1464c7++){const _0x2d5d49=_0x5cafaa['cameras'][_0x1464c7];this['cameras']['indexOf'](_0x2d5d49)<0x5e*-0x59+-0x2147*-0x1+0x11*-0x9&&this['cameras']['push'](_0x2d5d49);}}this['cameras']['length']>0xdef+0x87f+0x1*-0x166d&&el(this['cameras']);let _0x48a3d7=-0x246+-0x187a+0x1*0x1ac0;this['destroyRen'+'derActions']();for(let _0x206f33=0x2*0x963+0x3d7*-0x5+-0x1*-0x6d;_0x206f33<this['cameras']['length'];_0x206f33++){const _0x1b67ba=this['cameras'][_0x206f33];if(_0x1b67ba['camera']['renderPass'+'es']['length']>-0x2535+0x19*-0x10f+0x3fac){this['addDummyRe'+'nderAction'](_0x48a3d7,_0x1b67ba),_0x48a3d7++;continue;}let _0x28b294=!(-0x1be9+0xa*0x1e1+0x5*0x1d3);const _0x5dea53=_0x48a3d7;let _0x6ab76a=null,_0x4e6890=!(0x1a69+-0x1*-0x22fc+-0x3d64*0x1);for(let _0x201d1c=-0x4*0x257+0x43a*-0x1+0xd96;_0x201d1c<_0x683eee;_0x201d1c++){const _0x125dda=this['layerList'][_0x201d1c];if(_0x125dda['enabled']&&this['subLayerEn'+'abled'][_0x201d1c]&&_0x125dda['cameras']['length']>-0x251c+-0xfb4+0x34d0&&_0x1b67ba['layers']['indexOf'](_0x125dda['id'])>=-0x1*0x403+0x1421+0x80f*-0x2){!_0x4e6890&&_0x125dda['id']===_0x1b67ba['disablePos'+'tEffectsLa'+'yer']&&(_0x4e6890=!(0x1*0x155a+-0x11cc+-0x7*0x82),_0x6ab76a&&(_0x6ab76a['triggerPos'+'tprocess']=!(-0x3*0xb75+0x8*0x389+0x1*0x617)));const _0x2bd775=this['subLayerLi'+'st'][_0x201d1c];_0x6ab76a=this['addRenderA'+'ction'](_0x48a3d7,_0x125dda,_0x2bd775,_0x1b67ba,_0x28b294,_0x4e6890),_0x48a3d7++,_0x28b294=!(-0x16af+-0x44f*-0x7+-0x779);}}_0x5dea53<_0x48a3d7&&(_0x6ab76a['lastCamera'+'Use']=!(-0x24d2+-0x5*-0xbd+0x2121)),!_0x4e6890&&_0x6ab76a&&(_0x6ab76a['triggerPos'+'tprocess']=!(0x209*-0x11+-0x5c3+0x285c)),_0x1b67ba['renderTarg'+'et']&&_0x1b67ba['postEffect'+'sEnabled']&&this['propagateR'+'enderTarge'+'t'](_0x5dea53-(-0x3*0x3f5+0x93*-0xc+0x962*0x2),_0x1b67ba);}this['_logRender'+'Actions']();}}['getNextRen'+'derAction'](_0x4c478a){w['assert'](this['_renderAct'+'ions']['length']===_0x4c478a);const _0x48e182=new Xy();return this['_renderAct'+'ions']['push'](_0x48e182),_0x48e182;}['addDummyRe'+'nderAction'](_0x305ccb,_0x405717){const _0x304f5b=this['getNextRen'+'derAction'](_0x305ccb);_0x304f5b['camera']=_0x405717,_0x304f5b['useCameraP'+'asses']=!(0x24e7+0x51*-0x53+0x2a9*-0x4);}['addRenderA'+'ction'](_0x56c8b7,_0x3178fc,_0x2d3a03,_0x31317b,_0x4f3bf7,_0x563598){let _0x4e6b36=_0x3178fc['id']!==ps?_0x31317b['renderTarg'+'et']:null,_0x4ed2df=!(0x24d9+0x13*0x1c+-0x4*0x9bb);const _0xf186e6=this['_renderAct'+'ions'];for(let _0x20451a=_0x56c8b7-(0x12*0x20b+0x17a3*-0x1+-0xd22);_0x20451a>=-0x766*-0x3+0x5e6+-0x4*0x706;_0x20451a--)if(_0xf186e6[_0x20451a]['camera']===_0x31317b&&_0xf186e6[_0x20451a]['renderTarg'+'et']===_0x4e6b36){_0x4ed2df=!(0x1e66+-0x1e64+0x2*-0x1);break;}_0x563598&&_0x31317b['postEffect'+'sEnabled']&&(_0x4e6b36=null);const _0x53250=this['getNextRen'+'derAction'](_0x56c8b7);_0x53250['triggerPos'+'tprocess']=!(-0x2*0x354+0x258c+-0x1ee3),_0x53250['layer']=_0x3178fc,_0x53250['transparen'+'t']=_0x2d3a03,_0x53250['camera']=_0x31317b,_0x53250['renderTarg'+'et']=_0x4e6b36,_0x53250['firstCamer'+'aUse']=_0x4f3bf7,_0x53250['lastCamera'+'Use']=!(-0x4bf*0x7+-0x2*0x63d+-0xd*-0x384);const _0x3d7e44=_0x4f3bf7||!_0x4ed2df,_0x505880=_0x3178fc['clearColor'+'Buffer']||_0x3178fc['clearDepth'+'Buffer']||_0x3178fc['clearStenc'+'ilBuffer'];return(_0x3d7e44||_0x505880)&&_0x53250['setupClear'+'s'](_0x3d7e44?_0x31317b:void(0x5f*-0x4+-0x10a6+0x1222),_0x3178fc),_0x53250;}['propagateR'+'enderTarge'+'t'](_0x559cad,_0x434ce8){for(let _0x512b4e=_0x559cad;_0x512b4e>=-0x1*0x98+-0x1d7*-0x1+-0x13f;_0x512b4e--){const _0xb4c597=this['_renderAct'+'ions'][_0x512b4e],_0x562ca7=_0xb4c597['layer'];if(_0xb4c597['renderTarg'+'et']&&_0x562ca7['id']!==ps)break;if(_0x562ca7['id']===ps)continue;if(_0xb4c597['useCameraP'+'asses'])break;const _0x50034c=_0xb4c597==null?void(0x11b6*-0x1+0x25a1+-0x13eb):_0xb4c597['camera']['camera'];if(_0x50034c&&(!_0x434ce8['camera']['rect']['equals'](_0x50034c['rect'])||!_0x434ce8['camera']['scissorRec'+'t']['equals'](_0x50034c['scissorRec'+'t'])))break;_0xb4c597['renderTarg'+'et']=_0x434ce8['renderTarg'+'et'];}}['_logRender'+'Actions'](){if(mi['get'](Pl)){w['trace'](Pl,'Render\x20Act'+'ions\x20for\x20c'+'omposition'+':\x20'+this['name']);for(let _0x55df14=0x2089*0x1+-0x1*0x22db+0x129*0x2;_0x55df14<this['_renderAct'+'ions']['length'];_0x55df14++){const _0x1fa267=this['_renderAct'+'ions'][_0x55df14],_0x5ecc23=_0x1fa267['camera'];if(_0x1fa267['useCameraP'+'asses'])w['trace'](Pl,_0x55df14+('CustomPass'+'es\x20Cam:\x20')+(_0x5ecc23?_0x5ecc23['entity']['name']:'-'));else{const _0x3f6869=_0x1fa267['layer'],_0x2944e4=_0x3f6869['enabled']&&this['isEnabled'](_0x3f6869,_0x1fa267['transparen'+'t']),_0x35be25=(_0x1fa267['clearColor']?'Color\x20':'.....\x20')+(_0x1fa267['clearDepth']?'Depth\x20':'.....\x20')+(_0x1fa267['clearStenc'+'il']?'Stencil':'.......');w['trace'](Pl,_0x55df14+('\x20Cam:\x20'+(_0x5ecc23?_0x5ecc23['entity']['name']:'-'))['padEnd'](-0x2af*-0x6+-0x9c1+-0x1*0x643,'\x20')+('\x20Lay:\x20'+_0x3f6869['name'])['padEnd'](-0x61*-0x59+-0x172f+-0xdf*0xc,'\x20')+(_0x1fa267['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x2944e4?'\x20ENABLED\x20':'\x20DISABLED')+('\x20RT:\x20'+(_0x1fa267['renderTarg'+'et']?_0x1fa267['renderTarg'+'et']['name']:'-'))['padEnd'](-0x3fb*-0x9+-0x505+-0x1eb0,'\x20')+'\x20Clear:\x20'+_0x35be25+(_0x1fa267['firstCamer'+'aUse']?'\x20CAM-FIRST':'')+(_0x1fa267['lastCamera'+'Use']?'\x20CAM-LAST':'')+(_0x1fa267['triggerPos'+'tprocess']?'\x20POSTPROCE'+'SS':''));}}}}['_isLayerAd'+'ded'](_0x196f08){const _0x52c727=this['layerIdMap']['get'](_0x196f08['id'])===_0x196f08;return w['assert'](!_0x52c727,'Layer\x20is\x20a'+'lready\x20add'+'ed:\x20'+_0x196f08['name']),_0x52c727;}['_isSublaye'+'rAdded'](_0x293693,_0x1ce019){return(_0x1ce019?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['get'](_0x293693)!==void(-0x10d4+-0x133*-0x6+-0x2*-0x4d1)?(w['error']('Sublayer\x20'+_0x293693['name']+(',\x20transpar'+'ent:\x20')+_0x1ce019+('\x20is\x20alread'+'y\x20added.')),!(-0x114a+0x833+-0xb3*-0xd)):!(0x1153*0x2+0x4*-0x29f+-0x1829);}['push'](_0x93547c){this['_isLayerAd'+'ded'](_0x93547c)||(this['layerList']['push'](_0x93547c),this['layerList']['push'](_0x93547c),this['_opaqueOrd'+'er'][_0x93547c['id']]=this['subLayerLi'+'st']['push'](!(0x1*-0x1899+0x1d2f+-0x33*0x17))-(0x528+0x1*-0x1a8a+0x19*0xdb),this['_transpare'+'ntOrder'][_0x93547c['id']]=this['subLayerLi'+'st']['push'](!(-0x1935+-0x1*0x1a7b+0x33b0))-(-0x3*-0x761+0x3*-0x547+-0x64d),this['subLayerEn'+'abled']['push'](!(0x1ad*-0xd+-0x8e3+-0x1a*-0x12e)),this['subLayerEn'+'abled']['push'](!(-0x2f*-0x6c+0x2446+0xa7*-0x56)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x7cf*0x5+0x10d7+-0x37e2),this['fire']('add',_0x93547c));}['insert'](_0xece3e0,_0x484f54){if(this['_isLayerAd'+'ded'](_0xece3e0))return;this['layerList']['splice'](_0x484f54,-0x6b8+0x651+-0x1*-0x67,_0xece3e0,_0xece3e0),this['subLayerLi'+'st']['splice'](_0x484f54,0xdbf+-0x452+-0x7f*0x13,!(0x3*-0x425+-0x26ff+0x2b5*0x13),!(0x220b+0x2277+-0x4482));const _0x427d49=this['layerList']['length'];this['_updateOpa'+'queOrder'](_0x484f54,_0x427d49-(0x1392+-0x1bd4+0x2c1*0x3)),this['_updateTra'+'nsparentOr'+'der'](_0x484f54,_0x427d49-(-0x5d*-0x29+-0x1d2*-0x13+-0x317a)),this['subLayerEn'+'abled']['splice'](_0x484f54,0x1f6f+-0x7e1+0xc9*-0x1e,!(0x10e1+-0x1*0x79+0x2a*-0x64),!(-0xefb+-0x2329+-0x1912*-0x2)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x1dd1+-0x61*0x19+0x274a),this['fire']('add',_0xece3e0);}['remove'](_0x192b6b){let _0x585c6e=this['layerList']['indexOf'](_0x192b6b);for(delete this['_opaqueOrd'+'er'][_0x585c6e],delete this['_transpare'+'ntOrder'][_0x585c6e];_0x585c6e>=-0xe*0xb+-0x9d3+0xa6d;)this['layerList']['splice'](_0x585c6e,0x18e1+-0x1b35+0x255),this['subLayerLi'+'st']['splice'](_0x585c6e,-0x115*-0x1f+0x26*-0xd3+-0x238),this['subLayerEn'+'abled']['splice'](_0x585c6e,0x1d6*0xb+0x1*0x5d0+-0x1a01),_0x585c6e=this['layerList']['indexOf'](_0x192b6b),this['_dirty']=!(0x227*-0x9+0x15b2+-0x253),this['fire']('remove',_0x192b6b);const _0x375ebe=this['layerList']['length'];this['_updateOpa'+'queOrder'](0x4df+0x163e+-0x1b1d*0x1,_0x375ebe-(-0xa03+0xed0+-0x4*0x133)),this['_updateTra'+'nsparentOr'+'der'](-0xb51+-0x142+-0x431*-0x3,_0x375ebe-(-0x137*-0x8+0xd*-0x2fb+0x1d08)),this['_updateLay'+'erMaps']();}['pushOpaque'](_0xf7a55a){this['_isSublaye'+'rAdded'](_0xf7a55a,!(-0x2*-0x8c2+0x82*-0x1+-0x5ab*0x3))||(this['layerList']['push'](_0xf7a55a),this['_opaqueOrd'+'er'][_0xf7a55a['id']]=this['subLayerLi'+'st']['push'](!(-0x7*0x506+0x1*-0x1190+0x34bb*0x1))-(-0xe3+-0x943*0x3+0x98f*0x3),this['subLayerEn'+'abled']['push'](!(-0x23e9+0x159*0x1+0x1148*0x2)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0xf43+0x1bec+0x2e1*-0xf),this['fire']('add',_0xf7a55a));}['insertOpaq'+'ue'](_0x157af4,_0x28ada6){if(this['_isSublaye'+'rAdded'](_0x157af4,!(0x333+-0x629+0xb*0x45)))return;this['layerList']['splice'](_0x28ada6,-0x1ffb+0x1b7*-0xd+-0x3646*-0x1,_0x157af4),this['subLayerLi'+'st']['splice'](_0x28ada6,0x661+0x1377+-0x19d8,!(-0x8*0x161+0x1a3*-0x11+0x26dc*0x1));const _0x5bc8a7=this['subLayerLi'+'st']['length'];this['_updateOpa'+'queOrder'](_0x28ada6,_0x5bc8a7-(0xa51+-0x1177+-0x1*-0x727)),this['subLayerEn'+'abled']['splice'](_0x28ada6,-0x19ab+0x815*0x1+-0x1*-0x1196,!(-0x10f2+0x228e+-0xa1*0x1c)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x120d+-0x1*-0x1613+-0xd60*0x3),this['fire']('add',_0x157af4);}['removeOpaq'+'ue'](_0x11aee0){for(let _0x5060d2=0x1*0xb1f+-0xc85+-0x166*-0x1,_0x61c66c=this['layerList']['length'];_0x5060d2<_0x61c66c;_0x5060d2++)if(this['layerList'][_0x5060d2]===_0x11aee0&&!this['subLayerLi'+'st'][_0x5060d2]){this['layerList']['splice'](_0x5060d2,0x22e3+0x15a*0x1a+0x4606*-0x1),this['subLayerLi'+'st']['splice'](_0x5060d2,-0x1b80+0x21d3+-0x652),_0x61c66c--,this['_updateOpa'+'queOrder'](_0x5060d2,_0x61c66c-(0x1c07+0x2478+-0x407e)),this['subLayerEn'+'abled']['splice'](_0x5060d2,-0x28*0x7b+-0x588+0x18c1),this['_dirty']=!(-0x4e8*-0x5+-0x2330+0xaa8),this['layerList']['indexOf'](_0x11aee0)<-0x1a71+-0x187*-0x11+-0x2*-0x3d&&this['fire']('remove',_0x11aee0);break;}this['_updateLay'+'erMaps']();}['pushTransp'+'arent'](_0x18d9a3){this['_isSublaye'+'rAdded'](_0x18d9a3,!(0x1b21+-0x24b7+0x996))||(this['layerList']['push'](_0x18d9a3),this['_transpare'+'ntOrder'][_0x18d9a3['id']]=this['subLayerLi'+'st']['push'](!(-0x1*-0x1c75+-0x10d5+-0x5d*0x20))-(0x3*0x8cb+0xb51+-0x25b1),this['subLayerEn'+'abled']['push'](!(0x26ad*0x1+0x1fff+-0x46ac)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x609+0x1633+0xd*-0x22c),this['fire']('add',_0x18d9a3));}['insertTran'+'sparent'](_0x5dd912,_0x11bce1){if(this['_isSublaye'+'rAdded'](_0x5dd912,!(0x233d*-0x1+-0x53*0xf+-0x6af*-0x6)))return;this['layerList']['splice'](_0x11bce1,-0x229a+0x373*-0x1+0x260d,_0x5dd912),this['subLayerLi'+'st']['splice'](_0x11bce1,0x237f*-0x1+0x2*-0x134f+0x4a1d,!(-0x1d96+-0xbd0+-0x2f5*-0xe));const _0x2822ef=this['subLayerLi'+'st']['length'];this['_updateTra'+'nsparentOr'+'der'](_0x11bce1,_0x2822ef-(0x293+0x2459+-0x26eb)),this['subLayerEn'+'abled']['splice'](_0x11bce1,-0x40*-0x3f+-0x2634+0x1674,!(0x2*-0x868+0x3*-0x4df+0x1f6d)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x620+-0x712+0x79*0x2),this['fire']('add',_0x5dd912);}['removeTran'+'sparent'](_0xc0f775){for(let _0x2990e8=-0xac7*0x1+-0x6d*0x29+0x34*0x8b,_0x4dc0cf=this['layerList']['length'];_0x2990e8<_0x4dc0cf;_0x2990e8++)if(this['layerList'][_0x2990e8]===_0xc0f775&&this['subLayerLi'+'st'][_0x2990e8]){this['layerList']['splice'](_0x2990e8,-0x4a*0x40+-0xe*0x136+0x2375),this['subLayerLi'+'st']['splice'](_0x2990e8,-0xa81*-0x1+0x477*-0x1+-0x609),_0x4dc0cf--,this['_updateTra'+'nsparentOr'+'der'](_0x2990e8,_0x4dc0cf-(-0x1e9e+-0xc5*0x4+0x1*0x21b3)),this['subLayerEn'+'abled']['splice'](_0x2990e8,-0x6*-0x2f3+-0xe*-0x119+-0x210f),this['_dirty']=!(-0x1a*-0x5+-0x1*-0x1ce1+0x1*-0x1d63),this['layerList']['indexOf'](_0xc0f775)<-0x2623+0x64d*0x5+0x6a2&&this['fire']('remove',_0xc0f775);break;}this['_updateLay'+'erMaps']();}['getOpaqueI'+'ndex'](_0x52e78a){return this['layerOpaqu'+'eIndexMap']['get'](_0x52e78a)??-(0x25ab+-0x821+-0x1d89);}['getTranspa'+'rentIndex'](_0x3d0aaf){return this['layerTrans'+'parentInde'+'xMap']['get'](_0x3d0aaf)??-(-0x8*-0x34b+0x1f95+-0x39ec);}['isEnabled'](_0x2a0725,_0x1194ba){if(_0x2a0725['enabled']){const _0x3c5c24=_0x1194ba?this['getTranspa'+'rentIndex'](_0x2a0725):this['getOpaqueI'+'ndex'](_0x2a0725);if(_0x3c5c24>=0x12dd+0x14cb+-0x27a8)return this['subLayerEn'+'abled'][_0x3c5c24];}return!(0x671+-0x1*-0x1143+-0x1*0x17b3);}['_updateLay'+'erMaps'](){this['layerIdMap']['clear'](),this['layerNameM'+'ap']['clear'](),this['layerOpaqu'+'eIndexMap']['clear'](),this['layerTrans'+'parentInde'+'xMap']['clear']();for(let _0x473aef=0xcf*-0x8+-0x461+0x1*0xad9;_0x473aef<this['layerList']['length'];_0x473aef++){const _0x1a88f7=this['layerList'][_0x473aef];this['layerIdMap']['set'](_0x1a88f7['id'],_0x1a88f7),this['layerNameM'+'ap']['set'](_0x1a88f7['name'],_0x1a88f7),(this['subLayerLi'+'st'][_0x473aef]?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['set'](_0x1a88f7,_0x473aef);}}['getLayerBy'+'Id'](_0x2e2d0e){return this['layerIdMap']['get'](_0x2e2d0e)??null;}['getLayerBy'+'Name'](_0x3844d2){return this['layerNameM'+'ap']['get'](_0x3844d2)??null;}['_updateOpa'+'queOrder'](_0x146857,_0x5a215a){for(let _0x569ca3=_0x146857;_0x569ca3<=_0x5a215a;_0x569ca3++)this['subLayerLi'+'st'][_0x569ca3]===!(0x9e9*0x1+-0x9f*-0x13+0x15b5*-0x1)&&(this['_opaqueOrd'+'er'][this['layerList'][_0x569ca3]['id']]=_0x569ca3);}['_updateTra'+'nsparentOr'+'der'](_0x33ca28,_0x5a004b){for(let _0x5952ec=_0x33ca28;_0x5952ec<=_0x5a004b;_0x5952ec++)this['subLayerLi'+'st'][_0x5952ec]===!(0x1e1*-0x1+0x7e1+-0x3*0x200)&&(this['_transpare'+'ntOrder'][this['layerList'][_0x5952ec]['id']]=_0x5952ec);}['_sortLayer'+'sDescendin'+'g'](_0x31c190,_0x373e59,_0x32778c){let _0x1c9719=-(0xbe*-0x13+0x45a+-0xe3*-0xb),_0x4ccf15=-(-0x99*-0x10+0x1221+-0x1bb0);for(let _0x4bf3f3=0xf66+-0xe14*-0x2+0x15c7*-0x2,_0x2a74a3=_0x31c190['length'];_0x4bf3f3<_0x2a74a3;_0x4bf3f3++){const _0x217e3c=_0x31c190[_0x4bf3f3];_0x32778c['hasOwnProp'+'erty'](_0x217e3c)&&(_0x1c9719=Math['max'](_0x1c9719,_0x32778c[_0x217e3c]));}for(let _0x5d62a0=-0x3*-0x1bb+-0x1b8b+0xb2d*0x2,_0x538a3d=_0x373e59['length'];_0x5d62a0<_0x538a3d;_0x5d62a0++){const _0x49ad00=_0x373e59[_0x5d62a0];_0x32778c['hasOwnProp'+'erty'](_0x49ad00)&&(_0x4ccf15=Math['max'](_0x4ccf15,_0x32778c[_0x49ad00]));}return _0x1c9719===-(0x2e1+-0x2*0xaf1+-0x6*-0x32b)&&_0x4ccf15!==-(0x15aa+0xe27*0x1+-0x23d0)?0x1e39*0x1+0x10e6+-0x1*0x2f1e:_0x4ccf15===-(0xf9*0x17+-0xe07+-0x857)&&_0x1c9719!==-(-0x22c8*-0x1+-0x505*0x2+0x1*-0x18bd)?-(-0xf9*0x9+0x1*0x1f43+-0x1681):_0x4ccf15-_0x1c9719;}['sortTransp'+'arentLayer'+'s'](_0x496032,_0x5ea4cd){return this['_sortLayer'+'sDescendin'+'g'](_0x496032,_0x5ea4cd,this['_transpare'+'ntOrder']);}['sortOpaque'+'Layers'](_0x24b14c,_0x222f79){return this['_sortLayer'+'sDescendin'+'g'](_0x24b14c,_0x222f79,this['_opaqueOrd'+'er']);}}const Zl=new D(),wi={'bias':0x0,'normalBias':0x0},io=new ie(),$d={'r':0x0,'g':0x1,'b':0x2,'a':0x3},zf={'directional':ve,'omni':Ke,'point':Ke,'spot':Ze},Ab=[[new re(0x1*0xc91+0x41c+-0x58f*0x3,0xcd5+0xb2*0x37+0x20b*-0x19,0x1ec0+0x2*0xf2b+-0x337*0x13,0x1a3*0xa+-0x2259+-0x11fc*-0x1)],[new re(0x14f1*-0x1+0x351+0x11a0,0x115b+0x8b3+-0x1a0e,-0x216f+0x1*-0x22e5+0x4454+0.5,0x2*0x2e9+-0x84b*0x1+0x279+0.5),new re(-0x1f88+-0x1*0x16a0+0x3628,-0xb*0xdf+0x2c7+-0x86*-0xd+0.5,-0x24e4+0x23f*0xb+0xc2f+0.5,0x1fce+0x1ee5+-0x8f5*0x7+0.5)],[new re(-0xc2e+-0xd2b*0x1+0x1959,0x1*0x599+0x1ada+-0x2073,0x1*0x35+0x19b7+-0x19ec+0.5,-0xa*0x185+-0x1b19+-0x1*-0x2a4b+0.5),new re(0x1d4*0x9+0xfe*-0x2+-0xe78,0x190+-0x1b9*0x3+-0x39b*-0x1+0.5,-0xc2a+-0xa2e+-0x2cb*-0x8+0.5,0x263d+-0x545+-0x20f8+0.5),new re(0x3*0xaf+0x1*0x1477+0x5a1*-0x4+0.5,-0x31*-0x6e+-0x2436+-0x1*-0xf28,-0x111*0x24+-0x29*0xbf+0x44fb+0.5,0xe2d+-0x10*0xb0+-0x32d+0.5)],[new re(0x158d+0x1773+0x2d0*-0x10,-0x11f7+-0xcee+0x2cf*0xb,0x1915+-0x1212+-0x703+0.5,-0x4*-0x7ed+0x2238+-0x41ec+0.5),new re(0x1e9e*0x1+0x22ad+-0x414b,-0x13d*0x5+0x203d*-0x1+0x266e+0.5,0x121+0x3b5*-0x9+0x203c+0.5,0x4b*0x5+0xa2d+-0x2*0x5d2+0.5),new re(-0xa15*0x1+0x685+-0x39*-0x10+0.5,0x2485*0x1+-0x54d*-0x3+-0x5*0xa7c,0xb6a+-0x3ee+0x77c*-0x1+0.5,-0x144c+0x11*-0x10b+0x2607+0.5),new re(0xc1*-0x23+0x3*-0x287+0x8*0x43f+0.5,0x613*0x6+-0x9aa+0x359*-0x8+0.5,-0x52a+0x1286+0xa*-0x156+0.5,-0x9dc*-0x1+-0x22*0xa5+0xc0e+0.5)]],Cb={'rrr':0x1,'ggg':0x2,'bbb':0x4,'aaa':0x8,'rgb':0x7};let Pb=-0x1167+0x7ba*-0x1+-0x1*-0x1921;class Mb{constructor(_0x479cce,_0x3db2ff,_0x5c1728){this['light']=_0x5c1728,this['camera']=_0x479cce,this['shadowCame'+'ra']=$y['createShad'+'owCamera'](_0x5c1728['_shadowTyp'+'e'],_0x5c1728['_type'],_0x3db2ff),this['shadowMatr'+'ix']=new te(),this['shadowView'+'port']=new re(-0xd*-0x5b+0x3*-0x6d1+-0xfd4*-0x1,0x2477+0x192c+-0x3da3,0x269c+0x1538+-0x3*0x13f1,0xe2f*0x1+0x73+-0xea1),this['shadowScis'+'sor']=new re(-0x1*-0x1625+-0x2290+0xb*0x121,-0xb*0x2b5+0xc24+-0x23*-0x81,0x2105+0x3b*0x1a+-0x2702,-0x4f*0x5b+-0xa9b+0x11b*0x23),this['projection'+'Compensati'+'on']=0x3fd*-0x7+-0x9ac+0x1*0x2597,this['face']=_0x3db2ff,this['visibleCas'+'ters']=[],this['viewBindGr'+'oups']=[];}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x1f134a=>{_0x1f134a['defaultUni'+'formBuffer']['destroy'](),_0x1f134a['destroy']();}),this['viewBindGr'+'oups']['length']=0x1bea+0x9d*0x11+-0x2657;}get['shadowBuff'+'er'](){const _0x28bb4a=this['shadowCame'+'ra']['renderTarg'+'et'];return _0x28bb4a?this['light']['_isPcf']?_0x28bb4a['depthBuffe'+'r']:_0x28bb4a['colorBuffe'+'r']:null;}}class tl{constructor(_0x540fe9,_0x450ce0){h(this,'layers',new Set()),h(this,'clusteredL'+'ighting'),h(this,'shadowDept'+'hState',Yt['DEFAULT']['clone']()),h(this,'clusteredF'+'lags',0x14fe+-0x1*-0x240a+-0x3908),h(this,'clusteredD'+'ata',new Uint32Array(0x91e*-0x2+0x2*-0x386+-0xaf*-0x25)),h(this,'clusteredD'+'ata16',new Uint16Array(this['clusteredD'+'ata']['buffer'])),h(this,'_evtDevice'+'Restored',null),(this['device']=_0x540fe9,this['clusteredL'+'ighting']=_0x450ce0,this['id']=Pb++,this['_evtDevice'+'Restored']=_0x540fe9['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this),this['_type']=ve,this['_color']=new ie(0x525+-0x5*0x5fd+0x8a*0x2e+0.8,0x4c8+0xe8*-0x16+0xf28+0.8,0x29d+0x124d+-0x2*0xa75+0.8),this['_intensity']=-0x1085+-0x1*-0x20eb+-0x1*0x1065,this['_affectSpe'+'cularity']=!(-0x7*-0x4e6+-0x670+0x2c9*-0xa),this['_luminance']=0x1*-0x94d+0x7e*-0xd+0xfb3,this['_castShado'+'ws']=!(0x118b+-0x1858+-0x6ce*-0x1),this['_enabled']=!(-0x19a2+-0xb*0x11+0x1a5e),this['_mask']=Ss,this['isStatic']=!(-0x1*0x8e1+0x2641+-0x1d5f*0x1),this['key']=0x1080+-0xf08+-0x178,this['bakeDir']=!(-0x9*0x1fd+-0x1888+0x2a6d),this['bakeNumSam'+'ples']=-0xba4+0xe5+0x2b0*0x4,this['bakeArea']=0x2184+-0x1c61+-0x523,this['attenuatio'+'nStart']=0x44*0x11+-0x1fff*-0x1+-0x2479,this['attenuatio'+'nEnd']=0x16*0x1c4+0xb*0x11e+-0x3318,this['_falloffMo'+'de']=bp,this['_shadowTyp'+'e']=Ws,this['_vsmBlurSi'+'ze']=0x1bb3*-0x1+-0x1ca*0x2+0x1f52,this['vsmBlurMod'+'e']=Cp,this['vsmBias']=(-0x1f3b+-0xc74+-0x2baf*-0x1+0.01)*(-0x290*0x6+0x17d*0x9+-0x1*-0x1fb+0.25),this['_cookie']=null,this['cookieInte'+'nsity']=-0xa*0x12+0x6e1+-0x62c,this['_cookieFal'+'loff']=!(0xb*-0x233+0xdb*0x2+0x5*0x47f),this['_cookieCha'+'nnel']='rgb',this['_cookieTra'+'nsform']=null,this['_cookieTra'+'nsformUnif'+'orm']=new Float32Array(-0x251*0x4+0x1b65+-0x121d),this['_cookieOff'+'set']=null,this['_cookieOff'+'setUniform']=new Float32Array(-0xd4d+-0xe17+0x1b66),this['_cookieTra'+'nsformSet']=!(-0x1963+-0xd*0x28+-0x82*-0x36),this['_cookieOff'+'setSet']=!(-0x2115+0x1*-0x180e+-0xd4*-0x45),this['_innerCone'+'Angle']=0x2002+0x3d*-0x5+-0x1*0x1ea9,this['_outerCone'+'Angle']=0x137c+0x1e51*-0x1+0xb02,this['cascades']=null,this['_shadowMat'+'rixPalette']=null,this['_shadowCas'+'cadeDistan'+'ces']=null,this['numCascade'+'s']=0x6*-0x136+0x720+0x1*0x25,this['_cascadeBl'+'end']=-0x1*-0x153b+0x13*-0x39+-0x8*0x220,this['cascadeDis'+'tribution']=0x2*-0xda5+0x116b+-0x9df*-0x1+0.5,this['_shape']=js,this['_colorLine'+'ar']=new Float32Array(0x42e+-0x4e3+0xb8),this['_updateLin'+'earColor'](),this['_position']=new D(-0xd*0x6c+-0x12f6+-0x826*-0x3,-0x2*0x10f5+-0x1*-0x1dcf+0x41b,-0x9*-0xbc+0x2643+-0x7*0x669),this['_direction']=new D(-0x15ae+0xc1*0x15+0x1f3*0x3,-0x22a6*0x1+-0x218b+0x2f7*0x17,-0x14*-0x10+0x1e91+-0x1fd1),this['_innerCone'+'AngleCos']=Math['cos'](this['_innerCone'+'Angle']*Math['PI']/(0x1*-0x260b+0xb87+0x1b38)),this['_updateOut'+'erAngle'](this['_outerCone'+'Angle']),this['_usePhysic'+'alUnits']=void(-0x147+-0x1*0x12d1+-0x283*-0x8),this['_shadowMap']=null,this['_shadowRen'+'derParams']=[],this['_shadowCam'+'eraParams']=[],this['shadowDist'+'ance']=-0x202*-0x6+0x3*0x87b+-0x2555*0x1,this['_shadowRes'+'olution']=-0x2292*0x1+0x2*-0x239+-0x1*-0x2b04,this['_shadowBia'+'s']=-(0x1*-0x25d9+0x3a2*-0xa+-0x1*-0x4a2d+0.0005),this['_shadowInt'+'ensity']=0x24be+0x4eb*-0x1+-0x1fd2,this['_normalOff'+'setBias']=-0x46c*-0x1+-0x2*0x11a1+0x1ed6,this['shadowUpda'+'teMode']=Fp,this['shadowUpda'+'teOverride'+'s']=null,this['_isVsm']=!(-0x40f+0x9b3+0x6f*-0xd),this['_isPcf']=!(0xd*-0x225+-0x15be+0x319f),this['_softShado'+'wParams']=new Float32Array(-0x26b5*-0x1+0x361+-0x2a12),this['shadowSamp'+'les']=0x1489+-0x11db+0x86*-0x5,this['shadowBloc'+'kerSamples']=0x2123+0x1d6+-0xba3*0x3,this['penumbraSi'+'ze']=0x60b+-0xc9*0x7+0x1*-0x8b,this['penumbraFa'+'lloff']=0x727+-0xd*0xee+0x4f0,this['_cookieMat'+'rix']=null,this['_atlasView'+'port']=null,this['atlasViewp'+'ortAllocat'+'ed']=!(-0x7ea+0x1db2+-0x1*0x15c7),this['atlasVersi'+'on']=0x1610+0x1f3*0xb+0x637*-0x7,this['atlasSlotI'+'ndex']=0xfed+-0x264+0xa5*-0x15,this['atlasSlotU'+'pdated']=!(-0x2*0x5ab+0x165b+0x14*-0x8d),this['_node']=null,this['_renderDat'+'a']=[],this['visibleThi'+'sFrame']=!(-0x195+-0x1702+-0x8*-0x313),this['maxScreenS'+'ize']=-0x2364+0xfeb+0x1379,this['_updateSha'+'dowBias']());}['destroy'](){var _0x25b627;(_0x25b627=this['_evtDevice'+'Restored'])==null||_0x25b627['off'](),this['_evtDevice'+'Restored']=null,this['_destroySh'+'adowMap'](),this['releaseRen'+'derData'](),this['_renderDat'+'a']=null;}['onDeviceRe'+'stored'](){this['shadowUpda'+'teMode']===Ps&&(this['shadowUpda'+'teMode']=gr);}['releaseRen'+'derData'](){if(this['_renderDat'+'a']){for(let _0x47e314=-0x1f4a+-0x1d*0x4f+-0x1*-0x283d;_0x47e314<this['_renderDat'+'a']['length'];_0x47e314++)this['_renderDat'+'a'][_0x47e314]['destroy']();this['_renderDat'+'a']['length']=0xd16+0xe7e+-0x1b94;}}['addLayer'](_0x1c637b){this['layers']['add'](_0x1c637b);}['removeLaye'+'r'](_0x14a1f5){this['layers']['delete'](_0x14a1f5);}set['shadowSamp'+'les'](_0x22e20c){this['_softShado'+'wParams'][-0x1541*-0x1+-0x506*0x6+0x8e3]=_0x22e20c;}get['shadowSamp'+'les'](){return this['_softShado'+'wParams'][0x25f7+-0x1*0x1565+0x586*-0x3];}set['shadowBloc'+'kerSamples'](_0x2baca3){this['_softShado'+'wParams'][0x5*-0x3d+-0x773*-0x2+0x36d*-0x4]=_0x2baca3;}get['shadowBloc'+'kerSamples'](){return this['_softShado'+'wParams'][0x61d*0x3+-0x1889+0x633];}set['shadowBias'](_0x5219ec){this['_shadowBia'+'s']!==_0x5219ec&&(this['_shadowBia'+'s']=_0x5219ec,this['_updateSha'+'dowBias']());}get['shadowBias'](){return this['_shadowBia'+'s'];}set['numCascade'+'s'](_0x3c0216){(!this['cascades']||this['numCascade'+'s']!==_0x3c0216)&&(this['cascades']=Ab[_0x3c0216-(0x57d+-0xd*0x301+-0x1*-0x2191)],this['_shadowMat'+'rixPalette']=new Float32Array(0x9b*0x8+-0x1d99+0x1901),this['_shadowCas'+'cadeDistan'+'ces']=new Float32Array(0x1137+-0x2ae+-0xe85),this['_destroySh'+'adowMap'](),this['updateKey']());}get['numCascade'+'s'](){return this['cascades']['length'];}set['cascadeBle'+'nd'](_0x41db91){this['_cascadeBl'+'end']!==_0x41db91&&(this['_cascadeBl'+'end']=_0x41db91,this['updateKey']());}get['cascadeBle'+'nd'](){return this['_cascadeBl'+'end'];}set['shadowMap'](_0x899db4){this['_shadowMap']!==_0x899db4&&(this['_destroySh'+'adowMap'](),this['_shadowMap']=_0x899db4);}get['shadowMap'](){return this['_shadowMap'];}set['mask'](_0x3e8b33){this['_mask']!==_0x3e8b33&&(this['_mask']=_0x3e8b33,this['updateKey'](),this['updateClus'+'teredFlags']());}get['mask'](){return this['_mask'];}get['numShadowF'+'aces'](){const _0x497713=this['_type'];return _0x497713===ve?this['numCascade'+'s']:_0x497713===Ke?0xa*0x13e+-0x1*0xd32+0xcc:-0x2f*0x8d+0x3d*-0x13+0x1e6b;}set['type'](_0x2f32b9){if(this['_type']===_0x2f32b9)return;this['_type']=_0x2f32b9,this['_destroySh'+'adowMap'](),this['_updateSha'+'dowBias'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0xe9e310=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowUpda'+'teOverride'+'s']=null,this['shadowType']=_0xe9e310;}get['type'](){return this['_type'];}set['shape'](_0x3a46b8){if(this['_shape']===_0x3a46b8)return;this['_shape']=_0x3a46b8,this['_destroySh'+'adowMap'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x494294=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowType']=_0x494294;}get['shape'](){return this['_shape'];}set['usePhysica'+'lUnits'](_0x4dfef0){this['_usePhysic'+'alUnits']!==_0x4dfef0&&(this['_usePhysic'+'alUnits']=_0x4dfef0,this['_updateLin'+'earColor']());}get['usePhysica'+'lUnits'](){return this['_usePhysic'+'alUnits'];}set['shadowType'](_0x2bb45b){if(this['_shadowTyp'+'e']===_0x2bb45b)return;let _0x4e3b9c=Xi['get'](_0x2bb45b);_0x4e3b9c||(_0x2bb45b=Ws);const _0x508d37=this['device'];_0x2bb45b===Xo&&!_0x508d37['textureFlo'+'atRenderab'+'le']&&!_0x508d37['textureHal'+'fFloatRend'+'erable']&&(_0x2bb45b=Ws),this['_type']===Ke&&_0x2bb45b!==yy&&_0x2bb45b!==Ws&&_0x2bb45b!==vy&&_0x2bb45b!==xy&&_0x2bb45b!==Xo&&(_0x2bb45b=Ws),_0x2bb45b===Ap&&(!_0x508d37['textureFlo'+'atRenderab'+'le']||!_0x508d37['textureFlo'+'atFilterab'+'le'])&&(_0x2bb45b=Rf),_0x2bb45b===Rf&&!_0x508d37['textureHal'+'fFloatRend'+'erable']&&(_0x2bb45b=Ws),_0x4e3b9c=Xi['get'](_0x2bb45b),this['_isVsm']=(_0x4e3b9c==null?void(0x2164+0x175*0x10+-0xe2d*0x4):_0x4e3b9c['vsm'])??!(0x175f+-0x2627+-0x5*-0x2f5),this['_isPcf']=(_0x4e3b9c==null?void(0x210+0x2b9+-0x4c9):_0x4e3b9c['pcf'])??!(0xf38+0x1*0x1460+-0x2397*0x1),this['_shadowTyp'+'e']=_0x2bb45b,this['_destroySh'+'adowMap'](),this['updateKey']();}get['shadowType'](){return this['_shadowTyp'+'e'];}set['enabled'](_0x295277){this['_enabled']!==_0x295277&&(this['_enabled']=_0x295277,this['layersDirt'+'y']());}get['enabled'](){return this['_enabled'];}set['castShadow'+'s'](_0x13a554){this['_castShado'+'ws']!==_0x13a554&&(this['_castShado'+'ws']=_0x13a554,this['_destroySh'+'adowMap'](),this['layersDirt'+'y'](),this['updateKey']());}get['castShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']!==fi&&this['_mask']!==0x3*-0xc8e+-0xc5e*-0x2+-0x5*-0x296;}set['shadowInte'+'nsity'](_0x38f808){this['_shadowInt'+'ensity']!==_0x38f808&&(this['_shadowInt'+'ensity']=_0x38f808,this['updateKey']());}get['shadowInte'+'nsity'](){return this['_shadowInt'+'ensity'];}get['bakeShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']===fi;}set['shadowReso'+'lution'](_0x48ed0f){this['_shadowRes'+'olution']!==_0x48ed0f&&(this['_type']===Ke?_0x48ed0f=Math['min'](_0x48ed0f,this['device']['maxCubeMap'+'Size']):_0x48ed0f=Math['min'](_0x48ed0f,this['device']['maxTexture'+'Size']),this['_shadowRes'+'olution']=_0x48ed0f,this['_destroySh'+'adowMap']());}get['shadowReso'+'lution'](){return this['_shadowRes'+'olution'];}set['vsmBlurSiz'+'e'](_0x5507e1){this['_vsmBlurSi'+'ze']!==_0x5507e1&&(_0x5507e1%(0x7fc+0x4f*0x4a+-0x1ed0)===-0x6d3+0x35d*-0x1+0x8*0x146&&_0x5507e1++,this['_vsmBlurSi'+'ze']=_0x5507e1);}get['vsmBlurSiz'+'e'](){return this['_vsmBlurSi'+'ze'];}set['normalOffs'+'etBias'](_0x15abca){if(this['_normalOff'+'setBias']!==_0x15abca){const _0x2bd5c8=!this['_normalOff'+'setBias']&&_0x15abca||this['_normalOff'+'setBias']&&!_0x15abca;this['_normalOff'+'setBias']=_0x15abca,_0x2bd5c8&&this['updateKey']();}}get['normalOffs'+'etBias'](){return this['_normalOff'+'setBias'];}set['falloffMod'+'e'](_0x549e10){this['_falloffMo'+'de']!==_0x549e10&&(this['_falloffMo'+'de']=_0x549e10,this['updateKey'](),this['updateClus'+'teredFlags']());}get['falloffMod'+'e'](){return this['_falloffMo'+'de'];}set['innerConeA'+'ngle'](_0x31cf20){this['_innerCone'+'Angle']!==_0x31cf20&&(this['_innerCone'+'Angle']=_0x31cf20,this['_innerCone'+'AngleCos']=Math['cos'](_0x31cf20*Math['PI']/(-0x6*-0x3be+-0xf37+-0x689)),this['updateClus'+'terData'](!(0x80*-0x49+-0x7*0x3d6+0x3f5b),!(-0xb*-0x2b0+-0x1159+-0xc37)),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['innerConeA'+'ngle'](){return this['_innerCone'+'Angle'];}set['outerConeA'+'ngle'](_0x5499b9){this['_outerCone'+'Angle']!==_0x5499b9&&(this['_outerCone'+'Angle']=_0x5499b9,this['_updateOut'+'erAngle'](_0x5499b9),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['outerConeA'+'ngle'](){return this['_outerCone'+'Angle'];}set['penumbraSi'+'ze'](_0xa7b7eb){this['_penumbraS'+'ize']=_0xa7b7eb,this['_softShado'+'wParams'][0x2*-0x10f7+-0x2*-0x905+0x25*0x6e]=_0xa7b7eb;}get['penumbraSi'+'ze'](){return this['_penumbraS'+'ize'];}set['penumbraFa'+'lloff'](_0x5d3d05){this['_softShado'+'wParams'][0x26d*0xc+-0x4d3+0x1846*-0x1]=_0x5d3d05;}get['penumbraFa'+'lloff'](){return this['_softShado'+'wParams'][-0x25a+-0x2467+0x6*0x676];}['_updateOut'+'erAngle'](_0x2a6f07){const _0x12cb0c=_0x2a6f07*Math['PI']/(0x1*0x1cf5+-0x2*0xf75+0x2a9);this['_outerCone'+'AngleCos']=Math['cos'](_0x12cb0c),this['_outerCone'+'AngleSin']=Math['sin'](_0x12cb0c),this['updateClus'+'terData'](!(0x1afb+0x2040+-0x3b3a),!(-0x8d8+-0x3*-0xa1b+-0x17*0xef));}set['intensity'](_0x3eddfb){this['_intensity']!==_0x3eddfb&&(this['_intensity']=_0x3eddfb,this['_updateLin'+'earColor']());}get['intensity'](){return this['_intensity'];}set['affectSpec'+'ularity'](_0xf54258){this['_type']===ve&&(this['_affectSpe'+'cularity']=_0xf54258,this['updateKey']());}get['affectSpec'+'ularity'](){return this['_affectSpe'+'cularity'];}set['luminance'](_0x1a1c3a){this['_luminance']!==_0x1a1c3a&&(this['_luminance']=_0x1a1c3a,this['_updateLin'+'earColor']());}get['luminance'](){return this['_luminance'];}get['cookieMatr'+'ix'](){return this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new te()),this['_cookieMat'+'rix'];}get['atlasViewp'+'ort'](){return this['_atlasView'+'port']||(this['_atlasView'+'port']=new re(0x16c5+0x1e4e+-0x3513,-0x14d0+-0x11fb*-0x1+0x2d5,-0x3*-0x73c+0x816+0x5*-0x5f5,-0x13ab+-0x2de*0xc+0x3614)),this['_atlasView'+'port'];}set['cookie'](_0x55cbd2){this['_cookie']!==_0x55cbd2&&(this['_cookie']=_0x55cbd2,this['updateKey']());}get['cookie'](){return this['_cookie'];}set['cookieFall'+'off'](_0x7f39fc){this['_cookieFal'+'loff']!==_0x7f39fc&&(this['_cookieFal'+'loff']=_0x7f39fc,this['updateKey']());}get['cookieFall'+'off'](){return this['_cookieFal'+'loff'];}set['cookieChan'+'nel'](_0x55ab6e){if(this['_cookieCha'+'nnel']!==_0x55ab6e){if(_0x55ab6e['length']<-0x6ed*-0x1+-0x225e+-0x1c*-0xfb){const _0x3d56a4=_0x55ab6e['charAt'](_0x55ab6e['length']-(-0x45*0x41+0x1bdc+-0xa56)),_0x4fdb26=0x5*-0x481+-0x419*-0x2+0x2de*0x5-_0x55ab6e['length'];for(let _0x49f054=0x19*-0x119+0x22c8+-0x757;_0x49f054<_0x4fdb26;_0x49f054++)_0x55ab6e+=_0x3d56a4;}this['_cookieCha'+'nnel']=_0x55ab6e,this['updateKey'](),this['updateClus'+'teredFlags']();}}get['cookieChan'+'nel'](){return this['_cookieCha'+'nnel'];}set['cookieTran'+'sform'](_0x166b1e){this['_cookieTra'+'nsform']!==_0x166b1e&&(this['_cookieTra'+'nsform']=_0x166b1e,this['_cookieTra'+'nsformSet']=!!_0x166b1e,_0x166b1e&&!this['_cookieOff'+'set']&&(this['cookieOffs'+'et']=new J(),this['_cookieOff'+'setSet']=!(0x7d2+-0x57*0x6b+0x1c8c)),this['updateKey']());}get['cookieTran'+'sform'](){return this['_cookieTra'+'nsform'];}set['cookieOffs'+'et'](_0x3d3c2b){if(this['_cookieOff'+'set']===_0x3d3c2b)return;!!(this['_cookieTra'+'nsformSet']||_0x3d3c2b)&&!_0x3d3c2b&&this['_cookieOff'+'set']?this['_cookieOff'+'set']['set'](-0x19c*-0xe+-0x3*-0x4ce+-0x24f2,-0x1746+0x1*0x14e8+-0x12f*-0x2):this['_cookieOff'+'set']=_0x3d3c2b,this['_cookieOff'+'setSet']=!!_0x3d3c2b,_0x3d3c2b&&!this['_cookieTra'+'nsform']&&(this['cookieTran'+'sform']=new re(-0xdf5+0x16e8+-0x479*0x2,0x5a*0x4f+0x2502+0xa1*-0x67,0x10d+0x170e+0x1*-0x181b,-0x1*-0x8e9+-0x214b+-0x1862*-0x1),this['_cookieTra'+'nsformSet']=!(0x31d+-0x46*0x60+0x1724)),this['updateKey']();}get['cookieOffs'+'et'](){return this['_cookieOff'+'set'];}['beginFrame'](){this['visibleThi'+'sFrame']=this['_type']===ve&&this['_enabled'],this['maxScreenS'+'ize']=-0xd09*0x2+-0x3*0x347+0x23e7,this['atlasViewp'+'ortAllocat'+'ed']=!(0x191d+0x2*-0xbb6+-0x1b0),this['atlasSlotU'+'pdated']=!(0x581+0x7*0x4a0+0x978*-0x4);}['_destroySh'+'adowMap'](){if(this['releaseRen'+'derData'](),this['_shadowMap']&&(this['_shadowMap']['cached']||this['_shadowMap']['destroy'](),this['_shadowMap']=null),this['shadowUpda'+'teMode']===Ps&&(this['shadowUpda'+'teMode']=gr),this['shadowUpda'+'teOverride'+'s']){for(let _0x2b0cd6=-0x2683*-0x1+0x1305+-0x3988;_0x2b0cd6<this['shadowUpda'+'teOverride'+'s']['length'];_0x2b0cd6++)this['shadowUpda'+'teOverride'+'s'][_0x2b0cd6]===Ps&&(this['shadowUpda'+'teOverride'+'s'][_0x2b0cd6]=gr);}}['getRenderD'+'ata'](_0x1cb67d,_0x55cfbe){for(let _0x1c9526=-0x1*-0x2629+-0x7f*-0x17+-0x3192;_0x1c9526<this['_renderDat'+'a']['length'];_0x1c9526++){const _0x55a60f=this['_renderDat'+'a'][_0x1c9526];if(_0x55a60f['camera']===_0x1cb67d&&_0x55a60f['face']===_0x55cfbe)return _0x55a60f;}const _0x232c9d=new Mb(_0x1cb67d,_0x55cfbe,this);return this['_renderDat'+'a']['push'](_0x232c9d),_0x232c9d;}['clone'](){const _0x151160=new tl(this['device'],this['clusteredL'+'ighting']);return _0x151160['type']=this['_type'],_0x151160['setColor'](this['_color']),_0x151160['intensity']=this['_intensity'],_0x151160['affectSpec'+'ularity']=this['_affectSpe'+'cularity'],_0x151160['luminance']=this['_luminance'],_0x151160['castShadow'+'s']=this['castShadow'+'s'],_0x151160['_enabled']=this['_enabled'],_0x151160['attenuatio'+'nStart']=this['attenuatio'+'nStart'],_0x151160['attenuatio'+'nEnd']=this['attenuatio'+'nEnd'],_0x151160['falloffMod'+'e']=this['_falloffMo'+'de'],_0x151160['shadowType']=this['_shadowTyp'+'e'],_0x151160['vsmBlurSiz'+'e']=this['_vsmBlurSi'+'ze'],_0x151160['vsmBlurMod'+'e']=this['vsmBlurMod'+'e'],_0x151160['vsmBias']=this['vsmBias'],_0x151160['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x151160['mask']=this['mask'],this['shadowUpda'+'teOverride'+'s']&&(_0x151160['shadowUpda'+'teOverride'+'s']=this['shadowUpda'+'teOverride'+'s']['slice']()),_0x151160['innerConeA'+'ngle']=this['_innerCone'+'Angle'],_0x151160['outerConeA'+'ngle']=this['_outerCone'+'Angle'],_0x151160['numCascade'+'s']=this['numCascade'+'s'],_0x151160['cascadeDis'+'tribution']=this['cascadeDis'+'tribution'],_0x151160['cascadeBle'+'nd']=this['_cascadeBl'+'end'],_0x151160['shape']=this['_shape'],_0x151160['shadowDept'+'hState']['copy'](this['shadowDept'+'hState']),_0x151160['shadowBias']=this['shadowBias'],_0x151160['normalOffs'+'etBias']=this['_normalOff'+'setBias'],_0x151160['shadowReso'+'lution']=this['_shadowRes'+'olution'],_0x151160['shadowDist'+'ance']=this['shadowDist'+'ance'],_0x151160['shadowInte'+'nsity']=this['shadowInte'+'nsity'],_0x151160['shadowSamp'+'les']=this['shadowSamp'+'les'],_0x151160['shadowBloc'+'kerSamples']=this['shadowBloc'+'kerSamples'],_0x151160['penumbraSi'+'ze']=this['penumbraSi'+'ze'],_0x151160['penumbraFa'+'lloff']=this['penumbraFa'+'lloff'],_0x151160;}static['getLightUn'+'itConversi'+'on'](_0x27446e,_0x25c3ff=Math['PI']/(0x144a+0x16c1*-0x1+0x7f*0x5),_0x80f373=-0x2*-0xa34+-0x971*0x3+-0x7eb*-0x1){switch(_0x27446e){case Ze:{const _0x50c205=Math['cos'](_0x25c3ff),_0x3ad77d=Math['cos'](_0x80f373);return(0x6f6+-0x35d+-0x1*0x397)*Math['PI']*(0x53*-0x74+-0x57*-0x3d+0x10e2-_0x3ad77d+(_0x3ad77d-_0x50c205)/(0x1fa4+-0x1f82+-0x20));}case Ke:return(0x1fc1+-0x35+0x2*-0xfc4)*Math['PI'];case ve:return 0x18d5+-0x1658+-0x27c;}}['_getUnifor'+'mBiasValue'+'s'](_0x285ab2){const _0x2aeb93=_0x285ab2['shadowCame'+'ra']['_farClip'];switch(this['_type']){case Ke:wi['bias']=this['shadowBias'],wi['normalBias']=this['_normalOff'+'setBias'];break;case Ze:this['_isVsm']?wi['bias']=-(0x6*-0x17c+0x184c+-0xf64+0.00001)*(-0x1*0x2069+-0x7*-0x4df+-0x19c):wi['bias']=this['shadowBias']*(0x963+-0x236d+0xd0f*0x2),wi['normalBias']=this['_isVsm']?this['vsmBias']/(this['attenuatio'+'nEnd']/(-0x212+0x43a*-0x1+0x653)):this['_normalOff'+'setBias'];break;case ve:this['_isVsm']?wi['bias']=-(-0x1e36+0xa69*-0x3+0x147b*0x3+0.00001)*(-0x107+-0x147b+0x1596):wi['bias']=this['shadowBias']/_0x2aeb93*(-0xbba+0x18*0x22+-0x6*-0x17d),wi['normalBias']=this['_isVsm']?this['vsmBias']/(_0x2aeb93/(0x1bcd+0x11d*-0x6+-0x12c*0x12)):this['_normalOff'+'setBias'];break;}return wi;}['getColor'](){return this['_color'];}['getBoundin'+'gSphere'](_0x200d7a){if(this['_type']===Ze){const _0x2d58d5=this['attenuatio'+'nEnd'],_0x3704ad=this['_outerCone'+'Angle'],_0x52243f=this['_outerCone'+'AngleCos'],_0xabc693=this['_node'];Zl['copy'](_0xabc693['up']),_0x3704ad>-0x1*-0x15da+0xa15+-0x1fc2?(_0x200d7a['radius']=_0x2d58d5*this['_outerCone'+'AngleSin'],Zl['mulScalar'](-_0x2d58d5*_0x52243f)):(_0x200d7a['radius']=_0x2d58d5/((0x1cb5*-0x1+-0x155c+-0x3*-0x10b1)*_0x52243f),Zl['mulScalar'](-_0x200d7a['radius'])),_0x200d7a['center']['add2'](_0xabc693['getPositio'+'n'](),Zl);}else this['_type']===Ke&&(_0x200d7a['center']=this['_node']['getPositio'+'n'](),_0x200d7a['radius']=this['attenuatio'+'nEnd']);}['getBoundin'+'gBox'](_0x550c4d){if(this['_type']===Ze){const _0x9e55c2=this['attenuatio'+'nEnd'],_0x10874c=this['_outerCone'+'Angle'],_0x39a92d=this['_node'],_0x2ceaf4=Math['abs'](Math['sin'](_0x10874c*Y['DEG_TO_RAD'])*_0x9e55c2);_0x550c4d['center']['set'](-0x12f4+-0x2287+0x357b,-_0x9e55c2*(0x1*0x2352+-0x245c+0x10a*0x1+0.5),0x1*0x26a+-0xb86+-0x1*-0x91c),_0x550c4d['halfExtent'+'s']['set'](_0x2ceaf4,_0x9e55c2*(-0x3ec*-0x1+-0x10da+0xcee+0.5),_0x2ceaf4),_0x550c4d['setFromTra'+'nsformedAa'+'bb'](_0x550c4d,_0x39a92d['getWorldTr'+'ansform'](),!(0x3ef*0x4+0x90*-0x40+-0x2*-0xa22));}else this['_type']===Ke&&(_0x550c4d['center']['copy'](this['_node']['getPositio'+'n']()),_0x550c4d['halfExtent'+'s']['set'](this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd']));}['_updateSha'+'dowBias'](){if(this['_type']===Ke&&!this['clusteredL'+'ighting'])this['shadowDept'+'hState']['depthBias']=0xae*0x8+-0x13d*0x4+-0x7c,this['shadowDept'+'hState']['depthBiasS'+'lope']=0x714+-0x1b87+0x1473;else{const _0x125a85=this['shadowBias']*-(0x26*0xd5+-0x3*-0x93a+0x1bb2*-0x2);this['shadowDept'+'hState']['depthBias']=_0x125a85,this['shadowDept'+'hState']['depthBiasS'+'lope']=_0x125a85;}}['_updateLin'+'earColor'](){let _0xdad908=this['_intensity'];this['_usePhysic'+'alUnits']&&(_0xdad908=this['_luminance']/tl['getLightUn'+'itConversi'+'on'](this['_type'],this['_outerCone'+'Angle']*Y['DEG_TO_RAD'],this['_innerCone'+'Angle']*Y['DEG_TO_RAD']));const _0x300e7f=this['_color'],_0x474554=this['_colorLine'+'ar'];_0xdad908>=0x89*0x8+-0x2365+0x1f1e?io['linear'](_0x300e7f)['mulScalar'](_0xdad908):io['copy'](_0x300e7f)['mulScalar'](_0xdad908)['linear'](),_0x474554[-0x1102+-0xf7b+0x207d]=io['r'],_0x474554[0x171c+0xb7*0x9+-0x1d8a]=io['g'],_0x474554[0xf4b+-0xaf8+0xdd*-0x5]=io['b'],this['updateClus'+'terData'](!(-0x1*0xc3d+0x215e+-0x70b*0x3));}['setColor'](){arguments['length']===-0x1*-0x141+-0x11af*0x2+0x2*0x110f?this['_color']['set'](arguments[0x681*-0x2+0x26c7+-0x19c5]['r'],arguments[-0x2470+0x7b2+0x1cbe]['g'],arguments[0x258b+0x1*0x1571+-0x3afc]['b']):arguments['length']===-0x1*0x2629+0xb*-0xf5+0x30b3&&this['_color']['set'](arguments[-0xfcf+-0x6d3+0x16a2],arguments[-0x5e*0x3e+-0x65b*0x5+0x368c],arguments[-0x1dd*-0x9+0x8ec+-0x19af]),this['_updateLin'+'earColor']();}['layersDirt'+'y'](){this['layers']['forEach'](_0x4f455e=>{_0x4f455e['hasLight'](this)&&_0x4f455e['markLights'+'Dirty']();});}['updateKey'](){let _0x1b7d2d=this['_type']<<0x7b*-0x39+0x3f2+-0x7da*-0x3|this['_shadowTyp'+'e']<<0x1*0x15db+-0x229*0x11+0xef7|this['_falloffMo'+'de']<<-0x2*-0x60b+0x11e5+0x779*-0x4|(this['_normalOff'+'setBias']!==-0x16d4+0x5*-0x43a+-0x1*-0x2bf6?0xc9c*0x2+0xcf*-0x5+-0x152c:0x7*-0x4b1+-0xe*0x266+0x1*0x426b)<<-0x6be+0x126c*-0x2+0x2bac|(this['_cookie']?-0x2197*-0x1+-0x3b1+0x1*-0x1de5:-0x511+0x311+0x40*0x8)<<-0x1d79+0x1913+0x47b|(this['_cookieFal'+'loff']?0x7*0x175+0xf0d*-0x2+-0xb6*-0x1c:0x1af4+-0x710+-0x13e4)<<-0xb*-0xad+-0x6*-0x2d+-0x869|$d[this['_cookieCha'+'nnel']['charAt'](0x218e+0x84f+-0x29dd)]<<0x2623+-0x234f+0x1*-0x2c2|(this['_cookieTra'+'nsform']?0xc72+0xa*0x22c+-0x2229:-0x24f+0x567+-0x318)<<0x996*-0x1+-0x2*0x851+0x1a44|this['_shape']<<0x1*0x622+-0x25*-0xef+0x1*-0x28a3|(this['numCascade'+'s']>-0xd0f*0x2+0x1f51+-0x533?0x914+-0x21e5*-0x1+-0xfa*0x2c:0x16dd+-0x1839+0x15c)<<0x56c+-0x2*-0x1b4+-0x8cb|(this['_cascadeBl'+'end']>-0xf9e+0x4f*-0x1b+0x17f3?-0xe8f*-0x1+-0x1605+0x31*0x27:0x1a*-0x1a+0x3*0x20d+-0x383)<<0x395*-0x2+0x600+0x132|(this['affectSpec'+'ularity']?-0x2277+-0x1dca+0x4042:-0x10c*-0x8+0x1e36+-0x2696)<<-0x2c*-0xcd+-0x2316+-0x1f|this['mask']<<-0x7*0x529+0x1100+0x1*0x1325|(this['_castShado'+'ws']?0x1c2+-0x1bbe+0x19fd:0xf85*0x1+0x2*-0xa48+0x1*0x50b)<<-0x905*0x2+-0x15f3+-0x28*-0x100;this['_cookieCha'+'nnel']['length']===-0x26ea+-0x1*0x14d3+0x40*0xef&&(_0x1b7d2d|=$d[this['_cookieCha'+'nnel']['charAt'](0x9*-0x39c+-0x1d02+0x3d7f)]<<-0x1707+-0x103e*0x1+0x2755*0x1,_0x1b7d2d|=$d[this['_cookieCha'+'nnel']['charAt'](0x1585+-0xcc1*-0x1+-0x2244)]<<0x160e*-0x1+0xb*-0x26e+0x30d6),_0x1b7d2d!==this['key']&&this['layersDirt'+'y'](),this['key']=_0x1b7d2d;}['updateClus'+'teredFlags'](){const _0x451636=!!(this['mask']&Ss),_0xf6dc0c=!!(this['mask']&di);this['clusteredF'+'lags']=(this['type']===Ze?-0x2*-0x63e+-0x12a+-0xb51*0x1:-0x1511*-0x1+0x7c1+-0x1cd2)<<0x4*0x6fc+0xb*-0x89+-0x463*0x5|(this['_shape']&-0x104*-0x12+-0x6c6*-0x5+0x1161*-0x3)<<0x240+-0xa*0x287+0x1722|(this['_falloffMo'+'de']&0x6fc+0x2494+-0x2b8f)<<-0x720+0x1660+-0xf25|(Cb[this['_cookieCha'+'nnel']]??0x25*0x61+0xef4+0x1*-0x1cf9)<<-0x1c18+0x2*-0x85f+-0x35*-0xd9|(_0x451636?0x121*0xb+0xc29*-0x1+-0x41:0x2188+0x1892+-0x25*0x192)<<-0x51d+-0xd2e+-0x3ad*-0x5|(_0xf6dc0c?0x1069*-0x1+0x260c+-0x736*0x3:-0xbcd+-0x1d07*-0x1+-0x113a)<<0x1164+-0x3dc*-0x6+-0x2877;}['getCluster'+'edFlags'](_0x95700d,_0x2f23a0){return this['clusteredF'+'lags']|((_0x95700d?Math['floor'](this['shadowInte'+'nsity']*(-0x21b3+0x388+-0x1f2a*-0x1)):-0x2*-0x71+0x351+-0x1*0x433)&-0x2008+-0x7b4+0x28bb)<<-0x7c*-0x20+0x1*0x5a2+0x2*-0xa91|((_0x2f23a0?Math['floor'](this['cookieInte'+'nsity']*(0x3*0x188+-0x16*0x9f+0xa11)):-0xd63+0x22d0+-0x156d)&0x2*-0xfb1+-0x1d2d+0x3d8e)<<-0xd7*-0x9+0xc7*0x17+-0x1968;}['updateClus'+'terData'](_0x237026,_0x28e80c){const {clusteredData16:_0x44d43e}=this,_0x127f87=Tn['float2Half'];_0x237026&&(_0x44d43e[0x4*-0x133+0x1f87+0x1abb*-0x1]=_0x127f87(Y['clamp'](this['_colorLine'+'ar'][0x1*-0x9ef+-0x33c*-0x7+-0x1*0xcb5]/wc,0x16b*-0xa+-0x1969+-0x5*-0x7eb,-0x3ad*0x6a+-0x69eb+-0x983*-0x4f)),_0x44d43e[0x38a*-0x4+-0x1*0x1e5a+0x2c83]=_0x127f87(Y['clamp'](this['_colorLine'+'ar'][-0x2221+-0x21a1*-0x1+-0x3*-0x2b]/wc,-0x97d+-0x9bf+0x99e*0x2,-0x6761+0x7de9+0xe958)),_0x44d43e[-0x77b*-0x2+-0xbdb+0xd*-0x3d]=_0x127f87(Y['clamp'](this['_colorLine'+'ar'][-0x1aa8+-0x8ef*0x3+0x3577*0x1]/wc,-0x491+0x139f+-0xf0e,-0x3*-0x6d7f+0x3a3d*0x1+-0x82da))),_0x28e80c&&(_0x44d43e[-0x12ab+-0x1*-0x572+0xd3d*0x1]=_0x127f87(this['_innerCone'+'AngleCos']),_0x44d43e[0x21f6+-0x177e*0x1+0x217*-0x5]=_0x127f87(this['_outerCone'+'AngleCos']));}}class qy{constructor(_0x2b1bd9,_0x42de5d,_0x4cf83f){h(this,'_areaLight'+'sEnabled',!(0x1f5e+0x2380+-0x42dd)),h(this,'_cells',new D(-0x1a03+0x3*-0xafb+0x3afe,0x36d*-0x4+0x66e+0x749,0x3fe+0x1491+-0x1885*0x1)),h(this,'_maxLights'+'PerCell',-0x19*-0x7d+-0xd40+0x20a),h(this,'_shadowsEn'+'abled',!(-0x3d3*0x9+-0x16c4+0x392f)),h(this,'_shadowTyp'+'e',Ws),h(this,'_shadowAtl'+'asResoluti'+'on',0x1*-0x9a7+0x657*-0x5+0x1*0x315a),h(this,'_cookiesEn'+'abled',!(-0x1e2*0x13+0x25e4+0x21d*-0x1)),h(this,'_cookieAtl'+'asResoluti'+'on',-0x19ae+0x611*-0x6+0x381*0x14),h(this,'debugLayer'),h(this,'atlasSplit',null),(this['_supportsA'+'reaLights']=_0x2b1bd9,this['_maxTextur'+'eSize']=_0x42de5d,this['_dirtyLigh'+'tsFnc']=_0x4cf83f);}['applySetti'+'ngs'](_0x26b997){this['shadowsEna'+'bled']=_0x26b997['lightingSh'+'adowsEnabl'+'ed']??this['shadowsEna'+'bled'],this['cookiesEna'+'bled']=_0x26b997['lightingCo'+'okiesEnabl'+'ed']??this['cookiesEna'+'bled'],this['areaLights'+'Enabled']=_0x26b997['lightingAr'+'eaLightsEn'+'abled']??this['areaLights'+'Enabled'],this['shadowAtla'+'sResolutio'+'n']=_0x26b997['lightingSh'+'adowAtlasR'+'esolution']??this['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0x26b997['lightingCo'+'okieAtlasR'+'esolution']??this['cookieAtla'+'sResolutio'+'n'],this['maxLightsP'+'erCell']=_0x26b997['lightingMa'+'xLightsPer'+'Cell']??this['maxLightsP'+'erCell'],this['shadowType']=_0x26b997['lightingSh'+'adowType']??this['shadowType'],_0x26b997['lightingCe'+'lls']&&(this['cells']=new D(_0x26b997['lightingCe'+'lls']));}set['cells'](_0x511850){this['_cells']['copy'](_0x511850);}get['cells'](){return this['_cells'];}set['maxLightsP'+'erCell'](_0x339335){this['_maxLights'+'PerCell']=Y['clamp'](_0x339335,-0xe29+-0x1178+0x1*0x1fa2,-0x2304+-0x169*-0x5+0x151*0x16);}get['maxLightsP'+'erCell'](){return this['_maxLights'+'PerCell'];}set['cookieAtla'+'sResolutio'+'n'](_0x1dba6f){this['_cookieAtl'+'asResoluti'+'on']=Y['clamp'](_0x1dba6f,-0xbae*-0x1+0x1c2a+-0x27b8,this['_maxTextur'+'eSize']);}get['cookieAtla'+'sResolutio'+'n'](){return this['_cookieAtl'+'asResoluti'+'on'];}set['shadowAtla'+'sResolutio'+'n'](_0x4f728d){this['_shadowAtl'+'asResoluti'+'on']=Y['clamp'](_0x4f728d,0x1df9+-0x2*0x4f9+-0x13e7,this['_maxTextur'+'eSize']);}get['shadowAtla'+'sResolutio'+'n'](){return this['_shadowAtl'+'asResoluti'+'on'];}set['shadowType'](_0x382832){this['_shadowTyp'+'e']!==_0x382832&&(this['_shadowTyp'+'e']=_0x382832,this['_dirtyLigh'+'tsFnc']());}get['shadowType'](){return this['_shadowTyp'+'e'];}set['cookiesEna'+'bled'](_0x342102){this['_cookiesEn'+'abled']!==_0x342102&&(this['_cookiesEn'+'abled']=_0x342102,this['_dirtyLigh'+'tsFnc']());}get['cookiesEna'+'bled'](){return this['_cookiesEn'+'abled'];}set['areaLights'+'Enabled'](_0x5d7a8f){this['_supportsA'+'reaLights']&&this['_areaLight'+'sEnabled']!==_0x5d7a8f&&(this['_areaLight'+'sEnabled']=_0x5d7a8f,this['_dirtyLigh'+'tsFnc']());}get['areaLights'+'Enabled'](){return this['_areaLight'+'sEnabled'];}set['shadowsEna'+'bled'](_0x49e36b){this['_shadowsEn'+'abled']!==_0x49e36b&&(this['_shadowsEn'+'abled']=_0x49e36b,this['_dirtyLigh'+'tsFnc']());}get['shadowsEna'+'bled'](){return this['_shadowsEn'+'abled'];}}class _a{constructor(_0x48202b){this['morph']=_0x48202b,_0x48202b['incRefCoun'+'t'](),this['device']=_0x48202b['device'];const _0x47f6e3=_0x48202b['_targets']['length'];this['shader']=this['_createSha'+'der'](_0x47f6e3),this['_weights']=[],this['_weightMap']=new Map();for(let _0x3a8d4e=-0x58+-0xe5+0x13d;_0x3a8d4e<_0x48202b['_targets']['length'];_0x3a8d4e++){const _0x4d7a0e=_0x48202b['_targets'][_0x3a8d4e];_0x4d7a0e['name']&&this['_weightMap']['set'](_0x4d7a0e['name'],_0x3a8d4e),this['setWeight'](_0x3a8d4e,_0x4d7a0e['defaultWei'+'ght']);}this['_shaderMor'+'phWeights']=new Float32Array(_0x47f6e3),this['_shaderMor'+'phIndex']=new Uint32Array(_0x47f6e3);const _0x202e79=(_0x3a1256,_0x275316)=>(this[_0x275316]=_0x48202b['_createTex'+'ture'](_0x3a1256,_0x48202b['_renderTex'+'tureFormat']),new gt({'colorBuffer':this[_0x275316],'depth':!(0x19fd*0x1+0x3c1*-0x3+0x1*-0xeb9)}));_0x48202b['morphPosit'+'ions']&&(this['rtPosition'+'s']=_0x202e79('MorphRTPos','texturePos'+'itions')),_0x48202b['morphNorma'+'ls']&&(this['rtNormals']=_0x202e79('MorphRTNrm','textureNor'+'mals')),this['_texturePa'+'rams']=new Float32Array([_0x48202b['morphTextu'+'reWidth'],_0x48202b['morphTextu'+'reHeight']]);const _0x324a45=_0x48202b['aabb']['halfExtent'+'s'];this['_aabbSize']=new Float32Array([_0x324a45['x']*(0x144a+-0x232d+0x6d*0x23),_0x324a45['y']*(0x149+0x1*0x2405+-0x56*0x6f),_0x324a45['z']*(-0x2c*0xc6+0xc76+-0x6*-0x399)]);const _0x16af63=_0x48202b['aabb']['getMin']();this['_aabbMin']=new Float32Array([_0x16af63['x']*(0x61*0x1a+0x1361*-0x1+0x989*0x1),_0x16af63['y']*(-0x1dc6+-0x1f3c+-0x1*-0x3d04),_0x16af63['z']*(-0x9b*0x23+-0x18ed*0x1+-0x12*-0x290)]),this['_aabbNrmSi'+'ze']=new Float32Array([0x9e0+-0x434*-0x9+-0x2fb2,-0x1*0x1b46+-0x16ef+0x3237*0x1,0x2645+-0x30a*-0x8+0x53*-0xc1]),this['_aabbNrmMi'+'n']=new Float32Array([-(0x9e8+-0x455*-0x7+-0x283a),-(-0x1a8e+0x1b7c+-0xed),-(-0x19cc+-0x1f96+-0x1*-0x3963)]),this['aabbSizeId']=this['device']['scope']['resolve']('aabbSize'),this['aabbMinId']=this['device']['scope']['resolve']('aabbMin'),this['morphTextu'+'reId']=this['device']['scope']['resolve']('morphTextu'+'re'),this['morphFacto'+'r']=this['device']['scope']['resolve']('morphFacto'+'r[0]'),this['morphIndex']=this['device']['scope']['resolve']('morphIndex'+'[0]'),this['countId']=this['device']['scope']['resolve']('count'),this['zeroTextur'+'es']=!(-0x5*0x5c1+-0x43*0x67+-0xb*-0x511);}['destroy'](){var _0x43c8f5,_0x250659,_0x14c4aa,_0x31bd41;this['shader']=null;const _0x4042ce=this['morph'];_0x4042ce&&(this['morph']=null,_0x4042ce['decRefCoun'+'t'](),_0x4042ce['refCount']<0x1fd1+0x207e*0x1+-0x2027*0x2&&_0x4042ce['destroy']()),(_0x43c8f5=this['rtPosition'+'s'])==null||_0x43c8f5['destroy'](),this['rtPosition'+'s']=null,(_0x250659=this['texturePos'+'itions'])==null||_0x250659['destroy'](),this['texturePos'+'itions']=null,(_0x14c4aa=this['rtNormals'])==null||_0x14c4aa['destroy'](),this['rtNormals']=null,(_0x31bd41=this['textureNor'+'mals'])==null||_0x31bd41['destroy'](),this['textureNor'+'mals']=null;}['clone'](){return new _a(this['morph']);}['_getWeight'+'Index'](_0x177b36){if(typeof _0x177b36=='string'){const _0x1e0d91=this['_weightMap']['get'](_0x177b36);return _0x1e0d91===void(0x135*0x3+-0x705+0x366)&&w['errorOnce']('Cannot\x20fin'+'d\x20morph\x20ta'+'rget\x20with\x20'+'name:\x20'+_0x177b36+'.'),_0x1e0d91;}return _0x177b36;}['getWeight'](_0x4f99a2){const _0x3bc543=this['_getWeight'+'Index'](_0x4f99a2);return this['_weights'][_0x3bc543];}['setWeight'](_0x5738d6,_0x906b4e){const _0x469bba=this['_getWeight'+'Index'](_0x5738d6);w['assert'](_0x469bba>=0x3*0x66+-0xee6+0x4*0x36d&&_0x469bba<this['morph']['_targets']['length']),this['_weights'][_0x469bba]=_0x906b4e,this['_dirty']=!(-0x674+-0x17f*0x8+0x126c);}['_createSha'+'der'](_0xabd062){const _0x59f6e8=new Map();_0x59f6e8['set']('{MORPH_TEX'+'TURE_MAX_C'+'OUNT}',_0xabd062),this['morph']['intRenderF'+'ormat']&&_0x59f6e8['set']('MORPH_INT','');const _0x142943=this['morph']['intRenderF'+'ormat']?'uvec4':'vec4';return $t['createShad'+'er'](this['device'],{'uniqueName':'TextureMor'+'phShader_'+_0xabd062+'-'+(this['morph']['intRenderF'+'ormat']?'int':'float'),'attributes':{'vertex_position':Pe},'vertexChunk':'morphVS','fragmentChunk':'morphPS','fragmentDefines':_0x59f6e8,'fragmentOutputTypes':[_0x142943]});}['_updateTex'+'tureRender'+'Target'](_0x54aadc,_0x544503,_0x2ba3c9){const {morph:_0xfd1de8,device:_0x4690d7}=this;this['setAabbUni'+'forms'](_0x2ba3c9),this['morphTextu'+'reId']['setValue'](_0x2ba3c9?_0xfd1de8['targetsTex'+'turePositi'+'ons']:_0xfd1de8['targetsTex'+'tureNormal'+'s']),_0x4690d7['setBlendSt'+'ate'](pt['NOBLEND']),this['countId']['setValue'](_0x544503),this['morphFacto'+'r']['setValue'](this['_shaderMor'+'phWeights']),this['morphIndex']['setValue'](this['_shaderMor'+'phIndex']),Tr(_0x4690d7,_0x54aadc,this['shader']);}['_updateTex'+'tureMorph'](_0x1e59eb){const _0x4371ed=this['device'];Q['pushGpuMar'+'ker'](_0x4371ed,'MorphUpdat'+'e'),(_0x1e59eb>0x1*0xfab+0x45b*0x1+0xa03*-0x2||!this['zeroTextur'+'es'])&&(this['rtPosition'+'s']&&this['_updateTex'+'tureRender'+'Target'](this['rtPosition'+'s'],_0x1e59eb,!(0x7d5*0x4+0x1572+-0xa8e*0x5)),this['rtNormals']&&this['_updateTex'+'tureRender'+'Target'](this['rtNormals'],_0x1e59eb,!(0xec3*0x1+0xe70*-0x1+-0x29*0x2)),this['zeroTextur'+'es']=_0x1e59eb===-0x2093*0x1+-0x1762+0x37f5),Q['popGpuMark'+'er'](_0x4371ed);}['setAabbUni'+'forms'](_0x2d5a29=!(-0x1*0x5ff+0x1b03*0x1+-0x1504)){this['aabbSizeId']['setValue'](_0x2d5a29?this['_aabbSize']:this['_aabbNrmSi'+'ze']),this['aabbMinId']['setValue'](_0x2d5a29?this['_aabbMin']:this['_aabbNrmMi'+'n']);}['prepareRen'+'dering'](_0x51de12){this['setAabbUni'+'forms']();}['update'](){this['_dirty']=!(0x2399+-0x2158+-0x240);const _0x370ff6=this['morph']['_targets'],_0x2b07fc=0x7*0x3b3+0x2*-0x28d+-0x14cb*0x1+0.00001,_0x1f94b9=this['_shaderMor'+'phWeights'],_0x28cc0c=this['_shaderMor'+'phIndex'];let _0x22845c=-0x1d8c+0x112*-0x13+-0x9fa*-0x5;for(let _0x1a26e5=-0x2605+-0xe4d+-0x25*-0x16a;_0x1a26e5<_0x370ff6['length'];_0x1a26e5++)Math['abs'](this['getWeight'](_0x1a26e5))>_0x2b07fc&&(_0x1f94b9[_0x22845c]=this['getWeight'](_0x1a26e5),_0x28cc0c[_0x22845c]=_0x1a26e5,_0x22845c++);this['_updateTex'+'tureMorph'](_0x22845c);}}class tr{constructor(){h(this,'graph',null),h(this,'meshInstan'+'ces',[]),h(this,'skinInstan'+'ces',[]),h(this,'morphInsta'+'nces',[]),(this['cameras']=[],this['lights']=[],this['_shadersVe'+'rsion']=-0x2062+-0x17b3+0x3815,this['_immutable']=!(-0x32*-0x8e+-0x20ca+0x7*0xb9));}['getGraph'](){return this['graph'];}['setGraph'](_0x55f3e8){this['graph']=_0x55f3e8;}['getCameras'](){return this['cameras'];}['setCameras'](_0x2fb385){this['cameras']=_0x2fb385;}['getLights'](){return this['lights'];}['setLights'](_0x156292){this['lights']=_0x156292;}['getMateria'+'ls'](){const _0x23ed7d=[];for(let _0x58bb86=0x1*-0x1009+0x1874+-0x86b;_0x58bb86<this['meshInstan'+'ces']['length'];_0x58bb86++){const _0x9c279f=this['meshInstan'+'ces'][_0x58bb86];_0x23ed7d['indexOf'](_0x9c279f['material'])===-(0x20b8+-0x1b18+-0x59f*0x1)&&_0x23ed7d['push'](_0x9c279f['material']);}return _0x23ed7d;}['clone'](){const _0x4384e8=[],_0x15daf6=[],_0x1cb5e7=function(_0x9de424){const _0x11c2ad=_0x9de424['clone']();_0x4384e8['push'](_0x9de424),_0x15daf6['push'](_0x11c2ad);for(let _0x1a9481=0x937+0x6fa+-0x1031;_0x1a9481<_0x9de424['_children']['length'];_0x1a9481++)_0x11c2ad['addChild'](_0x1cb5e7(_0x9de424['_children'][_0x1a9481]));return _0x11c2ad;},_0x23e60e=_0x1cb5e7(this['graph']),_0x6737a4=[],_0x1f92dd=[],_0x446abe=[];for(let _0x4af379=0x1ad2*0x1+-0x2*0x6c5+-0xd48;_0x4af379<this['skinInstan'+'ces']['length'];_0x4af379++){const _0x1db2f6=this['skinInstan'+'ces'][_0x4af379]['skin'],_0x58d520=new xl(_0x1db2f6),_0x2ca5ba=[];for(let _0xb1fae1=0x4c3+0x6b*0x22+-0x12f9;_0xb1fae1<_0x1db2f6['boneNames']['length'];_0xb1fae1++){const _0x387933=_0x1db2f6['boneNames'][_0xb1fae1],_0x36309a=_0x23e60e['findByName'](_0x387933);_0x2ca5ba['push'](_0x36309a);}_0x58d520['bones']=_0x2ca5ba,_0x1f92dd['push'](_0x58d520);}for(let _0x1413f5=-0x1ca6+-0x13a5+0x304b;_0x1413f5<this['morphInsta'+'nces']['length'];_0x1413f5++){const _0x1ab95f=this['morphInsta'+'nces'][_0x1413f5]['morph'],_0x1212e4=new _a(_0x1ab95f);_0x446abe['push'](_0x1212e4);}for(let _0x108b45=-0xa8a+-0x1962+-0x4*-0x8fb;_0x108b45<this['meshInstan'+'ces']['length'];_0x108b45++){const _0x3f16fe=this['meshInstan'+'ces'][_0x108b45],_0x459a99=_0x4384e8['indexOf'](_0x3f16fe['node']),_0x21839d=new He(_0x3f16fe['mesh'],_0x3f16fe['material'],_0x15daf6[_0x459a99]);if(_0x3f16fe['skinInstan'+'ce']){const _0xbb6227=this['skinInstan'+'ces']['indexOf'](_0x3f16fe['skinInstan'+'ce']);_0x21839d['skinInstan'+'ce']=_0x1f92dd[_0xbb6227];}if(_0x3f16fe['morphInsta'+'nce']){const _0x17059e=this['morphInsta'+'nces']['indexOf'](_0x3f16fe['morphInsta'+'nce']);_0x21839d['morphInsta'+'nce']=_0x446abe[_0x17059e];}_0x6737a4['push'](_0x21839d);}const _0x40db90=new tr();return _0x40db90['graph']=_0x23e60e,_0x40db90['meshInstan'+'ces']=_0x6737a4,_0x40db90['skinInstan'+'ces']=_0x1f92dd,_0x40db90['morphInsta'+'nces']=_0x446abe,_0x40db90['getGraph']()['syncHierar'+'chy'](),_0x40db90;}['destroy'](){const _0x555b28=this['meshInstan'+'ces'];for(let _0xc4125f=-0x9d*-0x15+0x5*-0x51b+-0x2*-0x653;_0xc4125f<_0x555b28['length'];_0xc4125f++)_0x555b28[_0xc4125f]['destroy']();this['meshInstan'+'ces']['length']=-0x585+0x9cf+-0x12*0x3d;}['generateWi'+'reframe'](){He['_prepareRe'+'nderStyleF'+'orArray'](this['meshInstan'+'ces'],Vr);}}class Gp extends td{constructor(_0x55f06e,_0x1360b9,{preferHighPrecision:_0x2b8278=!(0x660+-0x77c*-0x1+-0xddb*0x1)}={}){super(),h(this,'_aabb'),h(this,'preferHigh'+'Precision'),(w['assert'](_0x1360b9,'Morph\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x1360b9);const _0x9e8a15=_0x1360b9;this['preferHigh'+'Precision']=_0x2b8278,w['assert'](_0x55f06e['every'](_0x846334=>!_0x846334['used']),'A\x20specifie'+'d\x20target\x20h'+'as\x20already'+'\x20been\x20used'+'\x20to\x20create'+'\x20a\x20Morph,\x20'+'use\x20its\x20cl'+'one\x20instea'+'d.'),this['_targets']=_0x55f06e['slice']();const _0x143fbb=_0x9e8a15['textureHal'+'fFloatRend'+'erable']?nt:void(0x766*0x2+-0x15a3+0x6d7),_0x1c48a1=_0x9e8a15['textureFlo'+'atRenderab'+'le']?Xt:void(0x2100+0x17b+-0x227b);this['_renderTex'+'tureFormat']=this['preferHigh'+'Precision']?_0x1c48a1??_0x143fbb:_0x143fbb??_0x1c48a1,this['_renderTex'+'tureFormat']=this['_renderTex'+'tureFormat']??Uh,this['intRenderF'+'ormat']=rn(this['_renderTex'+'tureFormat']),this['_textureFo'+'rmat']=this['preferHigh'+'Precision']?Xt:nt,this['_init'](),this['_updateMor'+'phFlags']();}['destroy'](){var _0x597483,_0x5b7cd3,_0x293f29;(_0x597483=this['vertexBuff'+'erIds'])==null||_0x597483['destroy'](),this['vertexBuff'+'erIds']=null,(_0x5b7cd3=this['targetsTex'+'turePositi'+'ons'])==null||_0x5b7cd3['destroy'](),this['targetsTex'+'turePositi'+'ons']=null,(_0x293f29=this['targetsTex'+'tureNormal'+'s'])==null||_0x293f29['destroy'](),this['targetsTex'+'tureNormal'+'s']=null;}get['aabb'](){if(!this['_aabb']){const _0x1319c1=new D(),_0x260e37=new D();for(let _0x5a1dcc=0x1a77+0x19*0x1a+-0x1d01;_0x5a1dcc<this['_targets']['length'];_0x5a1dcc++){const _0x3b9a4b=this['_targets'][_0x5a1dcc]['aabb'];_0x1319c1['min'](_0x3b9a4b['getMin']()),_0x260e37['max'](_0x3b9a4b['getMax']());}this['_aabb']=new De(),this['_aabb']['setMinMax'](_0x1319c1,_0x260e37);}return this['_aabb'];}get['morphPosit'+'ions'](){return this['_morphPosi'+'tions'];}get['morphNorma'+'ls'](){return this['_morphNorm'+'als'];}['_init'](){this['_initTextu'+'reBased']();for(let _0x5d0053=0x1738+0x1842+-0x2f7a;_0x5d0053<this['_targets']['length'];_0x5d0053++)this['_targets'][_0x5d0053]['_postInit']();}['_findSpars'+'eSet'](_0x439fa6,_0x242cb9,_0x19cebd){let _0x5aa0f3=0x25f4*-0x1+-0xe96+-0x1*-0x348b;const _0x55fe6a=_0x439fa6[0x1dd7+0x26*0x27+-0x23a1]['length'];for(let _0x293bcc=-0x2424+-0x3*0x960+0x4044;_0x293bcc<_0x55fe6a;_0x293bcc+=-0x1a1*-0x1+0x1*0x1204+-0x2ce*0x7){let _0x4c6811=!(0x1*0xd55+-0x22d2*0x1+-0x395*-0x6);for(let _0x5d7a7=-0x2699+0x179*-0x13+-0x4*-0x10a5;_0x5d7a7<_0x439fa6['length'];_0x5d7a7++){const _0x3bf8b9=_0x439fa6[_0x5d7a7];if(_0x3bf8b9[_0x293bcc]!==-0x4*0x7ed+0x22da+-0x326||_0x3bf8b9[_0x293bcc+(-0x8*-0x7a+0x1d*0x13a+-0x251*0x11)]!==-0xb9d+0x115*0x5+0x634||_0x3bf8b9[_0x293bcc+(-0x5f6+-0x56b*0x7+0x2be5)]!==-0x1b7*-0xa+0x5*0x4b1+-0x63*0x69){_0x4c6811=!(-0x1b*-0x24+-0x1995+0x15c9);break;}}_0x4c6811?(_0x242cb9['push'](_0x5aa0f3),_0x19cebd['push'](_0x293bcc/(-0x13*-0xa+-0x202c+0x1*0x1f71)),_0x5aa0f3++):_0x242cb9['push'](0x1216+0x9*0x3c3+0x33f1*-0x1);}return _0x5aa0f3;}['_initTextu'+'reBased'](){const _0x40c20a=[],_0xa42778=[],_0x4007e5=this['_targets'];for(let _0x1912b4=0x5*-0x321+0x307+0x143*0xa;_0x1912b4<_0x4007e5['length'];_0x1912b4++){const _0x16c577=_0x4007e5[_0x1912b4];_0x16c577['options']['deltaPosit'+'ions']&&(_0x40c20a['push'](_0x16c577['options']['deltaPosit'+'ions']),_0xa42778['push'](!(-0x4*0x8e0+0x1400+-0x7c*-0x20))),_0x16c577['options']['deltaNorma'+'ls']&&(_0x40c20a['push'](_0x16c577['options']['deltaNorma'+'ls']),_0xa42778['push'](!(-0x1*0x2d5+0x3*0x468+-0x376*0x3)));}const _0x33614d=[],_0x4bb92a=[],_0x941447=this['_findSpars'+'eSet'](_0x40c20a,_0x33614d,_0x4bb92a),_0x18834f=this['device']['maxTexture'+'Size'];let _0x2c4bf3=Math['ceil'](Math['sqrt'](_0x941447));_0x2c4bf3=Math['min'](_0x2c4bf3,_0x18834f);const _0x16848c=Math['ceil'](_0x941447/_0x2c4bf3);if(_0x16848c>_0x18834f){w['warnOnce']('Morph\x20targ'+'et\x20data\x20is'+'\x20too\x20large'+'\x20to\x20fit\x20in'+'to\x20a\x20textu'+'re\x20array.\x20'+'Required\x20t'+'exture\x20siz'+'e:\x20'+_0x2c4bf3+'x'+_0x16848c+(',\x20max\x20text'+'ure\x20size:\x20')+_0x18834f+'x'+_0x18834f+'.');return;}this['morphTextu'+'reWidth']=_0x2c4bf3,this['morphTextu'+'reHeight']=_0x16848c;let _0x377a17=!(-0x207d*0x1+0x2e*0x83+0x8f4);const _0x4105fb=Tn['float2Half'];this['_textureFo'+'rmat']===nt&&(_0x377a17=!(0xbf2+0xea5+-0x8dd*0x3));const _0x233730=[],_0xc0bff6=[],_0x289091=_0x2c4bf3*_0x16848c*(0x2fa+-0x76f+0xe5*0x5);for(let _0x418cb4=-0x24ee+-0x3*-0xcc7+0x167*-0x1;_0x418cb4<_0x40c20a['length'];_0x418cb4++){const _0x4ecd11=_0x40c20a[_0x418cb4],_0x24e24e=this['_textureFo'+'rmat']===nt?new Uint16Array(_0x289091):new Float32Array(_0x289091);if((_0xa42778[_0x418cb4]?_0x233730:_0xc0bff6)['push'](_0x24e24e),_0x377a17)for(let _0x602ab3=0x1283+-0xd8*-0x2e+-0x3953;_0x602ab3<_0x4bb92a['length'];_0x602ab3++){const _0xfe1c52=_0x4bb92a[_0x602ab3]*(-0xa4e+-0x3b+-0x1*-0xa8c),_0x94d5b9=_0x602ab3*(-0x1aec*0x1+-0x1956+0x3446)+(-0x2480+0x2586+-0x56*0x3);_0x24e24e[_0x94d5b9]=_0x4105fb(_0x4ecd11[_0xfe1c52]),_0x24e24e[_0x94d5b9+(0x3a0*-0x8+-0xd3+0x775*0x4)]=_0x4105fb(_0x4ecd11[_0xfe1c52+(-0x18c7*0x1+0x3*0xd6+0x2*0xb23)]),_0x24e24e[_0x94d5b9+(-0xd58+-0x2125+0x2e7f)]=_0x4105fb(_0x4ecd11[_0xfe1c52+(-0xf27+-0xc39+0x1b62)]);}else for(let _0x3a19cc=0x13a+0x55f+0x233*-0x3;_0x3a19cc<_0x4bb92a['length'];_0x3a19cc++){const _0x1688a9=_0x4bb92a[_0x3a19cc]*(-0x1015+-0x17*-0xaf+0x5f),_0xf34eae=_0x3a19cc*(0x1324+-0xb47+-0x7d9)+(0x1*-0x18fb+0x1*0x623+0x12dc);_0x24e24e[_0xf34eae]=_0x4ecd11[_0x1688a9],_0x24e24e[_0xf34eae+(-0x1d98+-0x1f14+0x8ab*0x7)]=_0x4ecd11[_0x1688a9+(-0xd52+0x1aa6+-0xd53)],_0x24e24e[_0xf34eae+(0xcfe+0x21a0+-0x2e9c)]=_0x4ecd11[_0x1688a9+(-0x12c7+0x48f+0xe3a)];}}_0x233730['length']>-0x25ce+-0xd10+0x32de&&(this['targetsTex'+'turePositi'+'ons']=this['_createTex'+'ture']('MorphPosit'+'ionsTextur'+'e',this['_textureFo'+'rmat'],_0x4007e5['length'],[_0x233730]),this['targetsTex'+'turePositi'+'ons']['upload']()),_0xc0bff6['length']>-0x4b4+0x2*0x113e+-0x1*0x1dc8&&(this['targetsTex'+'tureNormal'+'s']=this['_createTex'+'ture']('MorphNorma'+'lsTexture',this['_textureFo'+'rmat'],_0x4007e5['length'],[_0xc0bff6]),this['targetsTex'+'tureNormal'+'s']['upload']());const _0x174fb4=[{'semantic':bn,'components':0x1,'type':Vo,'asInt':!(0x2cc*0x2+0x1a6*0x17+-0x2b82)}];return this['vertexBuff'+'erIds']=new Ds(this['device'],new kt(this['device'],_0x174fb4,_0x33614d['length']),_0x33614d['length'],{'data':new Uint32Array(_0x33614d)}),!(-0x1f3b+0x1c63*-0x1+0x1*0x3b9e);}get['targets'](){return this['_targets'];}['_updateMor'+'phFlags'](){this['_morphPosi'+'tions']=!(-0x3*-0x2ed+0x108e+0x1*-0x1954),this['_morphNorm'+'als']=!(-0x18b8+-0xa3b+0x22f4);for(let _0x26738f=-0x2*-0x34+0xb21+0xb89*-0x1;_0x26738f<this['_targets']['length'];_0x26738f++){const _0x215c62=this['_targets'][_0x26738f];_0x215c62['morphPosit'+'ions']&&(this['_morphPosi'+'tions']=!(-0x24d1+-0x21e2+0x46b3)),_0x215c62['morphNorma'+'ls']&&(this['_morphNorm'+'als']=!(-0x12b2+0x2*0x337+0xc44));}}['_createTex'+'ture'](_0x4e49e4,_0x4f62bb,_0x49361b,_0x98513f){return new _e(this['device'],{'levels':_0x98513f,'arrayLength':_0x49361b,'width':this['morphTextu'+'reWidth'],'height':this['morphTextu'+'reHeight'],'format':_0x4f62bb,'cubemap':!(-0x1a9a+-0x1477+0x2f12),'mipmaps':!(0x5b*-0x21+-0xd3*-0x5+0x79d),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x4e49e4});}}class od{constructor(_0x3ed119){h(this,'used',!(0xcac*-0x1+-0xc1*0x15+0x1c82)),(w['assert'](arguments['length']===-0xae1*-0x2+0x1442+-0x2a03),this['options']=_0x3ed119,this['_name']=_0x3ed119['name'],this['_defaultWe'+'ight']=_0x3ed119['defaultWei'+'ght']||-0x3*-0xc22+0x1*0x4d5+-0x293b,this['_aabb']=_0x3ed119['aabb'],this['deltaPosit'+'ions']=_0x3ed119['deltaPosit'+'ions'],this['morphPosit'+'ions']=!!_0x3ed119['deltaPosit'+'ions'],this['morphNorma'+'ls']=!!_0x3ed119['deltaNorma'+'ls']);}get['name'](){return this['_name'];}get['defaultWei'+'ght'](){return this['_defaultWe'+'ight'];}get['aabb'](){return this['_aabb']||(this['_aabb']=new De(),this['deltaPosit'+'ions']&&this['_aabb']['compute'](this['deltaPosit'+'ions'])),this['_aabb'];}['clone'](){return w['assert'](this['options'],'MorphTarge'+'t\x20cannot\x20b'+'e\x20cloned,\x20'+'was\x20it\x20cre'+'ated\x20with\x20'+'a\x20preserve'+'Data\x20optio'+'n?'),new od(this['options']);}['_postInit'](){this['options']['preserveDa'+'ta']||(this['options']=null),this['used']=!(-0x1211+-0x2*0xbca+0x5f3*0x7);}}let Ei,T_=-0xc5b*0x1+0x2*-0x805+0x1c66;const ce=-0x1*0xe6f+-0x235d+0x31d0,Xd=new te(),qd=new te(),ti=new D(),tt=new D(),Fs=new D(),Ia=new D(),ns=new D(),_t=new D(),La=new D(),Ra=new D(),ro=new D(),w_=new D(),zt=new D(),Ql=new D(),Rr=new D();function on(_0x160ad4){return _0x160ad4-Math['floor'](_0x160ad4);}function Db(_0x28f85b){return Math['max'](Math['min'](_0x28f85b,0x1*0xfd+-0x187a+0x177e*0x1),-0x2141*0x1+0x654+0x1aed);}function jd(_0x1c9f0d,_0x2de981){return _0x1c9f0d-_0x2de981*Math['floor'](_0x1c9f0d/_0x2de981);}function Ib(_0x507624){let _0x3d7b13=on(_0x507624),_0x2836ed=on((0x83a+-0x110+-0x62b)*_0x507624),_0x27516f=on((-0x64a*-0x20+-0x54f7+0x4*0x226e)*_0x507624),_0x3c970=on((0x10573bf6+-0x110b1247+0x16*0x778cf8)*_0x507624);return _0x3d7b13-=_0x2836ed/(-0x1b73+0x20b7+0x445*-0x1),_0x2836ed-=_0x27516f/(0x1*0x1c9d+-0x57*0x4b+-0x221),_0x27516f-=_0x3c970/(0x892+-0x7*-0x2c3+0x15*-0x148),_0x3c970-=_0x3c970/(-0x7da+-0x1f*0x4d+0x122c),[_0x3d7b13,_0x2836ed,_0x27516f,_0x3c970];}function Jl(_0x55feb4){let _0x41a50f=on(_0x55feb4),_0x33d91d=on((-0x1*0x1fc3+0x22f6*0x1+-0x234)*_0x55feb4);return _0x41a50f-=_0x33d91d/(0x122f+-0x7db*0x1+-0x955),_0x33d91d-=_0x33d91d/(-0x23a5+0xf6a+-0xf7*-0x16),[_0x41a50f,_0x33d91d];}class Lb{constructor(_0x379d6d){this['_emitter']=_0x379d6d;}['calcSpawnP'+'osition'](_0x423689,_0xd62563,_0x433448,_0xfae318,_0x1d0e21){const _0x219512=this['_emitter'],_0x10933d=Math['random'](),_0x106971=Math['random'](),_0x3e0f54=Math['random'](),_0x6096f1=Math['random']();if(_0x219512['useCpu']&&(_0x423689[_0x1d0e21*ce+(-0x1*-0x1a3f+0x1*0x6dd+-0x211c)+_0x219512['numParticl'+'esPot']*(-0x2600+-0x2a3+0x28a5*0x1)*ce]=_0x10933d,_0x423689[_0x1d0e21*ce+(0x7a*0x25+0x3*0x7b9+-0x28cc)+_0x219512['numParticl'+'esPot']*(-0x2085+0x4f*0x3e+-0xd65*-0x1)*ce]=_0x106971,_0x423689[_0x1d0e21*ce+(-0xa03+-0x1b28+0x252d)+_0x219512['numParticl'+'esPot']*(0x5*0x33e+0x5*-0x512+-0x493*-0x2)*ce]=_0x3e0f54),tt['x']=_0x10933d-(0x6b5*-0x1+-0x1*0x1af2+0x21a7+0.5),tt['y']=_0x106971-(0x17fe+-0x2d*-0xbb+-0x38dd+0.5),tt['z']=_0x3e0f54-(-0xcb*0x23+0x1e17*0x1+-0x2*0x12b+0.5),_0x219512['emitterSha'+'pe']===ai){const _0x354c15=Math['max'](Math['abs'](tt['x']),Math['max'](Math['abs'](tt['y']),Math['abs'](tt['z']))),_0x2ebfdf=_0x354c15+(0x1*0x26fb+-0x15*0x1c5+-0x2*0xe9+0.5-_0x354c15)*_0x433448[0x16d3+-0x593*-0x2+-0x21f9],_0x58457b=_0x354c15+(0x1c0*-0x7+-0x1a5b+0x269b+0.5-_0x354c15)*_0x433448[0xb60+0x21fa+-0x2d59],_0x5e2f87=_0x354c15+(-0x2*0x84+0x1*-0x737+0x83f+0.5-_0x354c15)*_0x433448[-0x1fd+0x11f7+-0xff8];tt['x']=_0x2ebfdf*(_0x354c15===Math['abs'](tt['x'])?Math['sign'](tt['x']):(-0x3e5*-0x1+0xd98+-0x117b)*tt['x']),tt['y']=_0x58457b*(_0x354c15===Math['abs'](tt['y'])?Math['sign'](tt['y']):(0x253a+-0x6d3*-0x2+-0x17f*0x22)*tt['y']),tt['z']=_0x5e2f87*(_0x354c15===Math['abs'](tt['z'])?Math['sign'](tt['z']):(-0x1*0x177f+0x348+0x1439)*tt['z']),_0x219512['localSpace']?ti['copy'](_0xd62563['transformP'+'oint'](tt)):ti['copy'](_0xfae318)['add'](_0xd62563['transformP'+'oint'](tt));}else{tt['normalize']();const _0x205764=_0x219512['emitterRad'+'ius']===-0x1*-0x2037+0xbae+0x11*-0x295?0x6*-0x332+0x17b4+0x74*-0xa:_0x219512['emitterRad'+'iusInner']/_0x219512['emitterRad'+'ius'],_0x103b6c=_0x6096f1*(0x529*-0x3+0x228a*0x1+0x21e*-0x9-_0x205764)+_0x205764;_0x219512['localSpace']?ti['copy'](tt['mulScalar'](_0x103b6c*_0x219512['emitterRad'+'ius'])):ti['copy'](_0xfae318)['add'](tt['mulScalar'](_0x103b6c*_0x219512['emitterRad'+'ius']));}let _0x3942ca=-Y['lerp'](_0x219512['rate'],_0x219512['rate2'],_0x10933d)*_0x1d0e21;if(_0x219512['pack8']){const _0x111cb3=(ti['x']-_0x219512['worldBound'+'s']['center']['x'])/_0x219512['worldBound'+'sSize']['x']+(0x2516+0xc41*0x1+0x2e7*-0x11+0.5),_0x52387e=(ti['y']-_0x219512['worldBound'+'s']['center']['y'])/_0x219512['worldBound'+'sSize']['y']+(0x1bf1+-0x1116+-0x1*0xadb+0.5),_0x477530=(ti['z']-_0x219512['worldBound'+'s']['center']['z'])/_0x219512['worldBound'+'sSize']['z']+(-0x701+-0x1433+0x1b34+0.5);let _0x388629=Y['lerp'](_0x219512['startAngle']*Y['DEG_TO_RAD'],_0x219512['startAngle'+'2']*Y['DEG_TO_RAD'],_0x10933d);_0x388629=_0x388629%(Math['PI']*(0x5*-0x5e3+0x158c+-0x2b*-0x2f))/(Math['PI']*(0xc*-0x2de+-0x9d3+0x19*0x1c5));const _0x26c106=Jl(_0x111cb3);_0x423689[_0x1d0e21*ce]=_0x26c106[-0x1574+-0x4f*-0x7+0xb*0x1c1],_0x423689[_0x1d0e21*ce+(0x3a*-0x67+-0x9ea+0x1*0x2141)]=_0x26c106[0x819*0x1+-0x1acf+0x63d*0x3];const _0x530f57=Jl(_0x52387e);_0x423689[_0x1d0e21*ce+(-0x1377+-0x15ba+-0x1*-0x2933)]=_0x530f57[0x163d+-0x1660+0x5*0x7],_0x423689[_0x1d0e21*ce+(0x1dad+0x70*0x1a+0x2*-0x1485)]=_0x530f57[0x2e*0x6+-0x2261+0x57*0x62];const _0x5118fb=Jl(_0x477530);_0x423689[_0x1d0e21*ce+(-0x1e45+-0x20*0x12c+0x43c5)+_0x219512['numParticl'+'esPot']*ce]=_0x5118fb[-0x595+-0x19b0*0x1+0x1f45],_0x423689[_0x1d0e21*ce+(-0x1*0x2bf+-0xfc+0x3bc)+_0x219512['numParticl'+'esPot']*ce]=_0x5118fb[-0x81+-0x98a+0xa0c];const _0x52f2c2=Jl(_0x388629);_0x423689[_0x1d0e21*ce+(0x1511+-0x1cc*0x15+0x10ad)+_0x219512['numParticl'+'esPot']*ce]=_0x52f2c2[0x6*-0x486+0xa1*0x13+-0x1*-0xf31],_0x423689[_0x1d0e21*ce+(0x11*0x115+-0x1a5*-0x3+-0x1751)+_0x219512['numParticl'+'esPot']*ce]=_0x52f2c2[0x1b25+0x1*0xde1+-0x2905];const _0x1fd846=0x1*-0x1c4a+0x1*-0x1267+0x1*0x2eb2;_0x423689[_0x1d0e21*ce+(0x17a7+-0x1c9e+0x4fa)+_0x219512['numParticl'+'esPot']*ce*(-0x16a8+0x1024+0x686)]=_0x1fd846;const _0x2f9fce=Math['max'](_0x219512['lifetime'],(_0x219512['numParticl'+'es']-(-0x1*0xab7+-0x7d5+-0x1*-0x128d))*Math['max'](_0x219512['rate'],_0x219512['rate2'])),_0x25f6a7=_0x219512['lifetime']+(0x77b+-0xc86+0x50c);_0x3942ca=(_0x3942ca+_0x2f9fce)/(_0x2f9fce+_0x25f6a7);const _0x479ff5=Ib(_0x3942ca);_0x423689[_0x1d0e21*ce+(-0x1*0x1fea+-0x65f*0x2+0xb2a*0x4)+_0x219512['numParticl'+'esPot']*ce*(0x22*0x77+0x71d*-0x5+0x9e3*0x2)]=_0x479ff5[-0xd5*-0x1b+-0x1*0xa3f+0x30e*-0x4],_0x423689[_0x1d0e21*ce+(0x13ea+-0x39f+0xa*-0x1a1)+_0x219512['numParticl'+'esPot']*ce*(0x3fc*-0x1+-0x4b*-0xe+-0x1*0x1b)]=_0x479ff5[-0x10e7*0x1+-0x2*0x130f+0x1b83*0x2],_0x423689[_0x1d0e21*ce+(0xe5*-0x27+0x1d*0x11+0x20f8)+_0x219512['numParticl'+'esPot']*ce*(-0x19f5+-0x1*-0x148d+0x56b)]=_0x479ff5[-0x4b*-0x34+0x27f+-0x1*0x11b9],_0x423689[_0x1d0e21*ce+(0x24f8+0x505+-0x29fa)+_0x219512['numParticl'+'esPot']*ce*(-0xde5*-0x2+-0x1*-0x865+0x39e*-0xa)]=_0x479ff5[-0x142*-0x7+0xa7b*-0x3+0x16a6];}else _0x423689[_0x1d0e21*ce]=ti['x'],_0x423689[_0x1d0e21*ce+(-0x524*0x6+0x1c37+0x2a2)]=ti['y'],_0x423689[_0x1d0e21*ce+(0x873+-0xfa5+0x734)]=ti['z'],_0x423689[_0x1d0e21*ce+(-0x1*-0x10d0+0xaed+-0x222*0xd)]=Y['lerp'](_0x219512['startAngle']*Y['DEG_TO_RAD'],_0x219512['startAngle'+'2']*Y['DEG_TO_RAD'],_0x10933d),_0x423689[_0x1d0e21*ce+(0x19cf+0x2675+-0x4041)+_0x219512['numParticl'+'esPot']*ce]=_0x3942ca;}['update'](_0x2607af,_0x5c73fa,_0x12e0ba,_0xaa73ca,_0x591e90,_0x3fc89d,_0x282a3e,_0x1479c4){let _0x367955,_0x1a505a,_0x5b20ed;const _0x34a47a=this['_emitter'];if(_0x34a47a['meshInstan'+'ce']['node']){const _0x3714af=_0x34a47a['meshInstan'+'ce']['node']['worldTrans'+'form'];for(let _0xbbc5e9=-0xbaf+-0x19a3+-0x1*-0x2552;_0xbbc5e9<-0x197a+0xd5*-0x22+0x6ba*0x8;_0xbbc5e9++)Xd['data'][_0xbbc5e9]=_0x3714af['data'][_0xbbc5e9];qd['copy'](Xd),qd['invert'](),Ei=_0x34a47a['meshInstan'+'ce']['node']['localScale'],T_=Math['max'](Math['max'](Ei['x'],Ei['y']),Ei['z']);}_0x3fc89d=_0x34a47a['meshInstan'+'ce']['node']===null||_0x34a47a['localSpace']?D['ZERO']:_0x34a47a['meshInstan'+'ce']['node']['getPositio'+'n']();const _0x42ba51=_0x34a47a['camera']?_0x34a47a['camera']['_node']['getPositio'+'n']():D['ZERO'],_0x3c91b0=_0x34a47a['useMesh']?-0x2640+-0x23a9+0x49fa:0x42*0x64+-0x5*-0x5c5+0x2*-0x1b49;let _0x31aa2c,_0x203885,_0x5ad6cb,_0x477858,_0x5925e8,_0x37e588,_0x451b74,_0x4e5894,_0x2dc2cc;const _0x4ff47a=_0x34a47a['precision']-(-0x1269+0x1c02+-0x2*0x4cc);for(let _0x5c4473=-0x1*-0x1ed5+0xba0+-0xe27*0x3;_0x5c4473<_0x34a47a['numParticl'+'es'];_0x5c4473++){const _0x3b692d=Math['floor'](_0x34a47a['vbCPU'][_0x5c4473*_0x34a47a['numParticl'+'eVerts']*(_0x34a47a['useMesh']?-0x1352+-0xe8a+0x1*0x21e2:-0x15e6+-0xa48+0x13d*0x1a)+(-0xf4*0x1f+-0x23d3+0x1*0x4162)]),_0x1c0043=_0x12e0ba[_0x3b692d*ce+(-0xcdc+-0x1d5e+-0x1*-0x2a3a)+_0x34a47a['numParticl'+'esPot']*(0x29*0x9b+-0x1a1f+-0xa7*-0x2)*ce];Fs['x']=_0x1c0043,Fs['y']=_0x12e0ba[_0x3b692d*ce+(-0xa*0x3d1+0x247f+0x6b*0x4)+_0x34a47a['numParticl'+'esPot']*(-0x2*-0x559+0x551*0x3+-0x1aa3)*ce],Fs['z']=_0x12e0ba[_0x3b692d*ce+(-0x2*-0xe01+0x1742+-0x3342)+_0x34a47a['numParticl'+'esPot']*(0x155a+0x176*-0x11+0x12a*0x3)*ce];const _0x300b8d=_0x34a47a['rate']+(_0x34a47a['rate2']-_0x34a47a['rate'])*_0x1c0043,_0x4b289f=_0x34a47a['lifetime'];let _0x3ae502=_0x12e0ba[_0x3b692d*ce+(-0x2429*0x1+-0x1149+0x3575)+_0x34a47a['numParticl'+'esPot']*ce]+_0x282a3e;const _0x606023=Db(_0x3ae502/_0x4b289f);let _0x51e4b3=0x1a0*0xc+0x1ee5+0x3265*-0x1,_0x11d676=0x11*-0x129+-0x20d2+-0x1*-0x348b;const _0x5eb9a2=-0x182*0x1+0x1011+0xe8f*-0x1;(_0x3ae502-_0x282a3e<=0x10fd+-0x1*0x2539+0x143c||_0x3ae502>=_0x4b289f)&&this['calcSpawnP'+'osition'](_0x12e0ba,_0xaa73ca,_0x591e90,_0x3fc89d,_0x3b692d);let _0x388dfb=_0x3ae502>0x58*-0x6a+-0x2b*0x1d+0x294f&&_0x3ae502<_0x4b289f;_0x388dfb&&(_0x5b20ed=_0x606023*_0x4ff47a,_0x31aa2c=Math['floor'](_0x5b20ed),_0x203885=Math['ceil'](_0x5b20ed),_0x5b20ed%=0x1417+-0x18e7+-0x4d1*-0x1,_0x367955=_0x34a47a['qRotSpeed'][_0x31aa2c],_0x1a505a=_0x34a47a['qRotSpeed'][_0x203885],_0x5ad6cb=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qRotSpeed2'][_0x31aa2c],_0x1a505a=_0x34a47a['qRotSpeed2'][_0x203885],_0x477858=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qScale'][_0x31aa2c],_0x1a505a=_0x34a47a['qScale'][_0x203885],_0x51e4b3=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qScale2'][_0x31aa2c],_0x1a505a=_0x34a47a['qScale2'][_0x203885],_0x5925e8=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qAlpha'][_0x31aa2c],_0x1a505a=_0x34a47a['qAlpha'][_0x203885],_0x37e588=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qAlpha2'][_0x31aa2c],_0x1a505a=_0x34a47a['qAlpha2'][_0x203885],_0x451b74=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qRadialSpe'+'ed'][_0x31aa2c],_0x1a505a=_0x34a47a['qRadialSpe'+'ed'][_0x203885],_0x4e5894=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qRadialSpe'+'ed2'][_0x31aa2c],_0x1a505a=_0x34a47a['qRadialSpe'+'ed2'][_0x203885],_0x2dc2cc=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x4e5894+=(_0x2dc2cc-_0x4e5894)*(_0x1c0043*(0x1a25+0xb2b*-0x1+-0xe96)%(0x1db0+-0x59f*-0x3+-0xba3*0x4)),Ia['x']=_0x12e0ba[_0x3b692d*ce],Ia['y']=_0x12e0ba[_0x3b692d*ce+(0x3*0x3c1+-0x276+-0x1*0x8cc)],Ia['z']=_0x12e0ba[_0x3b692d*ce+(0x2275+-0x25d*0x2+0x1*-0x1db9)],_0x34a47a['localSpace']?ro['copy'](Ia):ro['copy'](Ia)['sub'](_0x3fc89d),ro['normalize']()['mulScalar'](_0x4e5894),_0x31aa2c*=0x2314+0x11*-0x3d+-0x18d*0x14,_0x203885*=0x13*0xa7+0x27e*-0x8+0x78e,_0x367955=_0x34a47a['qLocalVelo'+'city'][_0x31aa2c],_0x1a505a=_0x34a47a['qLocalVelo'+'city'][_0x203885],_t['x']=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qLocalVelo'+'city'][_0x31aa2c+(-0xbc*-0x10+0x1a43+-0x2602)],_0x1a505a=_0x34a47a['qLocalVelo'+'city'][_0x203885+(0x2216*0x1+0x773*-0x3+-0xbbc)],_t['y']=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qLocalVelo'+'city'][_0x31aa2c+(-0x56*0x4f+0xdcc+0x220*0x6)],_0x1a505a=_0x34a47a['qLocalVelo'+'city'][_0x203885+(0xe*0x218+-0xfb5+-0xd99*0x1)],_t['z']=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qLocalVelo'+'city2'][_0x31aa2c],_0x1a505a=_0x34a47a['qLocalVelo'+'city2'][_0x203885],Ra['x']=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qLocalVelo'+'city2'][_0x31aa2c+(0x2682+-0x454*0x2+0x1*-0x1dd9)],_0x1a505a=_0x34a47a['qLocalVelo'+'city2'][_0x203885+(-0x1*-0xc9d+0x1678+-0x2314)],Ra['y']=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qLocalVelo'+'city2'][_0x31aa2c+(-0xaf9*-0x1+-0x2424+0x192d)],_0x1a505a=_0x34a47a['qLocalVelo'+'city2'][_0x203885+(-0x27*-0xd9+-0xad+-0x2060)],Ra['z']=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qVelocity'][_0x31aa2c],_0x1a505a=_0x34a47a['qVelocity'][_0x203885],ns['x']=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qVelocity'][_0x31aa2c+(-0x35*0x34+0x1e2*0xf+0xd5*-0x15)],_0x1a505a=_0x34a47a['qVelocity'][_0x203885+(-0x14f1+-0x1*-0x9f5+-0x61*-0x1d)],ns['y']=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qVelocity'][_0x31aa2c+(0x12bf+0x366+-0x1623)],_0x1a505a=_0x34a47a['qVelocity'][_0x203885+(-0x1660+0x139a*-0x1+0x29fc)],ns['z']=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qVelocity2'][_0x31aa2c],_0x1a505a=_0x34a47a['qVelocity2'][_0x203885],La['x']=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qVelocity2'][_0x31aa2c+(-0xdcd*-0x2+0x2121+-0x1*0x3cba)],_0x1a505a=_0x34a47a['qVelocity2'][_0x203885+(0x267a+-0x6c7+-0x1fb2)],La['y']=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_0x367955=_0x34a47a['qVelocity2'][_0x31aa2c+(-0x3b7*-0x7+-0x1*-0x1693+-0x3092)],_0x1a505a=_0x34a47a['qVelocity2'][_0x203885+(0x1*-0xa04+0x25*-0xa5+0x21df)],La['z']=_0x367955+(_0x1a505a-_0x367955)*_0x5b20ed,_t['x']+=(Ra['x']-_t['x'])*Fs['x'],_t['y']+=(Ra['y']-_t['y'])*Fs['y'],_t['z']+=(Ra['z']-_t['z'])*Fs['z'],_0x34a47a['initialVel'+'ocity']>0x1250*-0x2+-0x239*-0x11+-0x129&&(_0x34a47a['emitterSha'+'pe']===rw?(tt['copy'](Fs)['mulScalar'](-0x77b*-0x1+0x1edb+-0xdf*0x2c)['sub'](D['ONE'])['normalize'](),_t['add'](tt['mulScalar'](_0x34a47a['initialVel'+'ocity']))):_t['add'](D['FORWARD']['mulScalar'](_0x34a47a['initialVel'+'ocity']))),ns['x']+=(La['x']-ns['x'])*Fs['x'],ns['y']+=(La['y']-ns['y'])*Fs['y'],ns['z']+=(La['z']-ns['z'])*Fs['z'],_0x5ad6cb+=(_0x477858-_0x5ad6cb)*Fs['y'],_0x51e4b3=(_0x51e4b3+(_0x5925e8-_0x51e4b3)*(_0x1c0043*(-0xce6*0x2+-0x41e7*0x1+0x82c3)%(-0x1c6+-0x3*0xd03+0x28d0)))*T_,_0x11d676=(_0x451b74-_0x37e588)*(_0x1c0043*(-0x50e+0x2002+-0x170c)%(0x11c9+0x74*-0x19+0x674*-0x1)),_0x34a47a['meshInstan'+'ce']['node']&&(_0x34a47a['localSpace']?(_t['x']/=Ei['x'],_t['y']/=Ei['y'],_t['z']/=Ei['z']):Xd['transformP'+'oint'](_t,_t)),_0x34a47a['localSpace']?(qd['transformP'+'oint'](ns,ns),_t['add'](ns)['add'](ro)):(_t['add'](ns['mul'](Ei)),_t['add'](ro['mul'](Ei))),Ql['copy'](_t),w_['copy'](Ia)['add'](_t['mulScalar'](_0x282a3e)),zt['copy'](w_),_0x12e0ba[_0x3b692d*ce]=zt['x'],_0x12e0ba[_0x3b692d*ce+(-0x1*-0x73d+-0x25d6+0x1e9a)]=zt['y'],_0x12e0ba[_0x3b692d*ce+(0x26a7*-0x1+0x24b7+0x1f2)]=zt['z'],_0x12e0ba[_0x3b692d*ce+(-0x4cc*0x4+-0x1*0xc37+0x1f6a)]+=_0x5ad6cb*_0x282a3e,_0x34a47a['wrap']&&_0x34a47a['wrapBounds']&&(_0x34a47a['localSpace']||zt['sub'](_0x3fc89d),zt['x']=jd(zt['x'],_0x34a47a['wrapBounds']['x'])-_0x34a47a['wrapBounds']['x']*(0x1*-0x15e3+0x9fd+0xbe6+0.5),zt['y']=jd(zt['y'],_0x34a47a['wrapBounds']['y'])-_0x34a47a['wrapBounds']['y']*(0x1034+0x1e7c+-0x2eb0+0.5),zt['z']=jd(zt['z'],_0x34a47a['wrapBounds']['z'])-_0x34a47a['wrapBounds']['z']*(0xbc5+0x8a1*-0x1+-0x4*0xc9+0.5),_0x34a47a['localSpace']||zt['add'](_0x3fc89d)),_0x34a47a['sort']>-0x1454+0x1043+0x411&&(_0x34a47a['sort']===-0xe7a+0x1f*-0x4+0x4fd*0x3?(Rr['copy'](zt)['sub'](_0x42ba51),_0x34a47a['particleDi'+'stance'][_0x3b692d]=-(Rr['x']*Rr['x']+Rr['y']*Rr['y']+Rr['z']*Rr['z'])):_0x34a47a['sort']===-0x1cf6+-0x1*0x1675+0x336d?_0x34a47a['particleDi'+'stance'][_0x3b692d]=_0x3ae502:_0x34a47a['sort']===-0x468+-0x557*-0x3+-0xb9a&&(_0x34a47a['particleDi'+'stance'][_0x3b692d]=-_0x3ae502))),_0x1479c4?_0x3ae502<0x4d6+0x1030+-0x3*0x702&&(_0x12e0ba[_0x3b692d*ce+(0x63+-0xeef*0x1+0xe8f)+_0x34a47a['numParticl'+'esPot']*(0x17ea+-0xb08+-0xce0)*ce]=-(-0x1*-0x2113+0x2*0xac5+0x3*-0x1234)):(_0x3ae502>=_0x4b289f&&(_0x3ae502-=Math['max'](_0x4b289f,(_0x34a47a['numParticl'+'es']-(0x49f*-0x5+0xe21+0x8fb*0x1))*_0x300b8d),_0x12e0ba[_0x3b692d*ce+(-0x137a+-0x162b*0x1+0x7c*0x56)+_0x34a47a['numParticl'+'esPot']*(-0x142+-0x6d1*0x5+0x2359)*ce]=_0x34a47a['loop']?-0x1*0x2185+-0x1aa5+0x3c2b:-(0x2*-0x1247+0x3e7*-0x1+0x2876)),_0x3ae502<0x76e*-0x1+0xa38+-0x2ca&&_0x34a47a['loop']&&(_0x12e0ba[_0x3b692d*ce+(-0x8*-0x2c8+-0x1*0x23ce+0xd91)+_0x34a47a['numParticl'+'esPot']*(-0x176+0x9f5*-0x1+0x75*0x19)*ce]=-0x1*-0x196a+-0xf7c+-0x9ed)),_0x12e0ba[_0x3b692d*ce+(-0x125a+0x49*-0x11+0x1736)+_0x34a47a['numParticl'+'esPot']*(0x448+0x161d+-0x1a63)*ce]<-0x2*-0x38f+-0xf36+-0x40c*-0x2&&(_0x388dfb=!(0x1aa5*-0x1+-0x208e+-0x1*-0x3b34)),_0x12e0ba[_0x3b692d*ce+(-0x2169+0x21a2+-0x36)+_0x34a47a['numParticl'+'esPot']*ce]=_0x3ae502;for(let _0x3041fc=0x1*0x4e9+0x5*0x14b+-0xb60;_0x3041fc<_0x34a47a['numParticl'+'eVerts'];_0x3041fc++){const _0x4e0b75=(_0x5c4473*_0x34a47a['numParticl'+'eVerts']+_0x3041fc)*(_0x34a47a['useMesh']?0x4f*-0x79+-0x1387*-0x1+-0x5f2*-0x3:0x3*0x74c+-0x15b6+-0x2a);let _0x53e035=_0x34a47a['vbCPU'][_0x4e0b75],_0x28dbd3=_0x34a47a['vbCPU'][_0x4e0b75+(0x1dcf+0x22cc+0x2*-0x204d)],_0x46c603=_0x34a47a['vbCPU'][_0x4e0b75+(0x17*0x91+0x96b+0x2*-0xb38)];_0x388dfb||(_0x53e035=_0x28dbd3=_0x46c603=0x206d+-0xba*-0x1+-0x2127);const _0x2a6f65=_0x5c4473*_0x34a47a['numParticl'+'eVerts']*_0x3c91b0+_0x3041fc*_0x3c91b0;_0x2607af[_0x2a6f65]=zt['x'],_0x2607af[_0x2a6f65+(0x1f86+0x1*-0xf2+-0xa31*0x3)]=zt['y'],_0x2607af[_0x2a6f65+(0x241f+-0x4*0x5fb+-0xc31)]=zt['z'],_0x2607af[_0x2a6f65+(0xb2*0x1+-0x7a*-0x31+0x15*-0x125)]=_0x606023,_0x2607af[_0x2a6f65+(0x1fb2+0xdc*-0x2+-0xefb*0x2)]=_0x34a47a['alignToMot'+'ion']?_0x5eb9a2:_0x12e0ba[_0x3b692d*ce+(0x222a+-0x16d6+-0xb51)],_0x2607af[_0x2a6f65+(-0x1*0x23c5+-0x1*-0x84b+0x1b7f)]=_0x51e4b3,_0x2607af[_0x2a6f65+(-0x1389+0x1d33+-0x9a4)]=_0x11d676,_0x2607af[_0x2a6f65+(-0x74*0x38+0x3af+-0x15b8*-0x1)]=Ql['x'],_0x2607af[_0x2a6f65+(-0x1*-0x2113+0x4fb+-0x3e*0x9d)]=_0x53e035,_0x2607af[_0x2a6f65+(-0x606+0x81*0x43+-0x1bb4)]=_0x28dbd3,_0x2607af[_0x2a6f65+(-0x88e+-0x3e*-0x6+0x2*0x392)]=_0x46c603,_0x2607af[_0x2a6f65+(-0x1655+-0x180+0x17e0)]=Ql['y'],_0x2607af[_0x2a6f65+(0x201c+0x20a3*0x1+-0x1*0x40b3)]=_0x3b692d,_0x2607af[_0x2a6f65+(0x9ae+-0x8b7*-0x1+0x4*-0x496)]=Ql['z'],_0x2607af[_0x2a6f65+(-0x1ac7*0x1+-0x2046*-0x1+0x7*-0xc7)]=_0x34a47a['vbCPU'][_0x4e0b75+(0x63*-0x35+-0x2d1*-0x1+0x7*0x287)],_0x34a47a['useMesh']&&(_0x2607af[_0x2a6f65+(-0x1f0f+0x869*-0x1+0x3*0xd2d)]=_0x34a47a['vbCPU'][_0x4e0b75+(-0x24ad+0x250*0x8+-0x1231*-0x1)],_0x2607af[_0x2a6f65+(-0x1a40+-0x69c+0x20ec)]=_0x34a47a['vbCPU'][_0x4e0b75+(-0x4f*0x4f+0x1*-0x842+0x20a8)]);}}if(_0x34a47a['sort']>Of&&_0x34a47a['camera']){const _0x180732=_0x34a47a['useMesh']?-0x2619+-0x117d+0x379c:-0x1fdc+-0x1*-0x22b4+-0x2d4,_0x2662d5=_0x34a47a['particleDi'+'stance'];for(let _0x5395b6=-0x1*0x25f5+0x7*-0x40f+0x425e*0x1;_0x5395b6<_0x34a47a['numParticl'+'es'];_0x5395b6++)_0x5c73fa[_0x5395b6][-0x1*0x1683+0x709*0x4+0x1*-0x5a1]=_0x5395b6,_0x5c73fa[_0x5395b6][-0x1b5d+0x2*0x3d+0x2*0xd72]=_0x2662d5[Math['floor'](_0x34a47a['vbCPU'][_0x5395b6*_0x34a47a['numParticl'+'eVerts']*_0x180732+(0x11a2+0xd08+-0x1ea7)])];_0x34a47a['vbOld']['set'](_0x34a47a['vbCPU']),_0x5c73fa['sort']((_0x463575,_0xa0556c)=>_0x463575[-0x2141+0xc07*-0x1+0x2d49*0x1]-_0xa0556c[-0x1b55+-0x1*0x12eb+0x2e41]);for(let _0x1c007c=-0x150+-0x244b+-0x259b*-0x1;_0x1c007c<_0x34a47a['numParticl'+'es'];_0x1c007c++){const _0x24803d=_0x5c73fa[_0x1c007c][-0x1e83+-0x59c+0x241f*0x1]*_0x34a47a['numParticl'+'eVerts']*_0x180732,_0x163c73=_0x1c007c*_0x34a47a['numParticl'+'eVerts']*_0x180732;for(let _0xc6a369=-0x24fd+0x1*-0x15ff+0x3afc;_0xc6a369<_0x34a47a['numParticl'+'eVerts']*_0x180732;_0xc6a369++)_0x34a47a['vbCPU'][_0x163c73+_0xc6a369]=_0x34a47a['vbOld'][_0x24803d+_0xc6a369];}}}}const E_=new _i(),b_=new _i(),A_=new _i();class Rb{constructor(_0x63d0c3,_0x4fbd87){this['_emitter']=_0x63d0c3,this['frameRando'+'mUniform']=new Float32Array(-0x1c89+-0x180d+0x3499),this['emitterPos'+'Uniform']=new Float32Array(0x122c+-0x2*0x253+0x3*-0x481),this['emitterSca'+'leUniform']=new Float32Array([-0x1b59*-0x1+0x1676+0x55*-0x96,0x14*-0x10b+-0x112*0x8+0x1d6d,0x379+0x168b+-0x1a03]),this['worldBound'+'sMulUnifor'+'m']=new Float32Array(-0x13b3+0xad1+0x8e5),this['worldBound'+'sAddUnifor'+'m']=new Float32Array(-0x1212+0xaa9*-0x1+0x1cbe),this['inBoundsSi'+'zeUniform']=new Float32Array(-0xa*0x43+0xdbe+-0x239*0x5),this['inBoundsCe'+'nterUnifor'+'m']=new Float32Array(-0x1da9+0x3a1*0x3+-0x7*-0x2af),this['constantPa'+'rticleTexI'+'N']=_0x4fbd87['scope']['resolve']('particleTe'+'xIN'),this['constantPa'+'rticleTexO'+'UT']=_0x4fbd87['scope']['resolve']('particleTe'+'xOUT'),this['constantEm'+'itterPos']=_0x4fbd87['scope']['resolve']('emitterPos'),this['constantEm'+'itterScale']=_0x4fbd87['scope']['resolve']('emitterSca'+'le'),this['constantSp'+'awnBounds']=_0x4fbd87['scope']['resolve']('spawnBound'+'s'),this['constantSp'+'awnPosInne'+'rRatio']=_0x4fbd87['scope']['resolve']('spawnPosIn'+'nerRatio'),this['constantSp'+'awnBoundsS'+'phere']=_0x4fbd87['scope']['resolve']('spawnBound'+'sSphere'),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']=_0x4fbd87['scope']['resolve']('spawnBound'+'sSphereInn'+'erRatio'),this['constantIn'+'itialVeloc'+'ity']=_0x4fbd87['scope']['resolve']('initialVel'+'ocity'),this['constantFr'+'ameRandom']=_0x4fbd87['scope']['resolve']('frameRando'+'m'),this['constantDe'+'lta']=_0x4fbd87['scope']['resolve']('delta'),this['constantRa'+'te']=_0x4fbd87['scope']['resolve']('rate'),this['constantRa'+'teDiv']=_0x4fbd87['scope']['resolve']('rateDiv'),this['constantLi'+'fetime']=_0x4fbd87['scope']['resolve']('lifetime'),this['constantGr'+'aphSampleS'+'ize']=_0x4fbd87['scope']['resolve']('graphSampl'+'eSize'),this['constantGr'+'aphNumSamp'+'les']=_0x4fbd87['scope']['resolve']('graphNumSa'+'mples'),this['constantIn'+'ternalTex0']=_0x4fbd87['scope']['resolve']('internalTe'+'x0'),this['constantIn'+'ternalTex1']=_0x4fbd87['scope']['resolve']('internalTe'+'x1'),this['constantIn'+'ternalTex2']=_0x4fbd87['scope']['resolve']('internalTe'+'x2'),this['constantIn'+'ternalTex3']=_0x4fbd87['scope']['resolve']('internalTe'+'x3'),this['constantEm'+'itterMatri'+'x']=_0x4fbd87['scope']['resolve']('emitterMat'+'rix'),this['constantEm'+'itterMatri'+'xInv']=_0x4fbd87['scope']['resolve']('emitterMat'+'rixInv'),this['constantNu'+'mParticles']=_0x4fbd87['scope']['resolve']('numParticl'+'es'),this['constantNu'+'mParticles'+'Pot']=_0x4fbd87['scope']['resolve']('numParticl'+'esPot'),this['constantLo'+'calVelocit'+'yDivMult']=_0x4fbd87['scope']['resolve']('localVeloc'+'ityDivMult'),this['constantVe'+'locityDivM'+'ult']=_0x4fbd87['scope']['resolve']('velocityDi'+'vMult'),this['constantRo'+'tSpeedDivM'+'ult']=_0x4fbd87['scope']['resolve']('rotSpeedDi'+'vMult'),this['constantSe'+'ed']=_0x4fbd87['scope']['resolve']('seed'),this['constantSt'+'artAngle']=_0x4fbd87['scope']['resolve']('startAngle'),this['constantSt'+'artAngle2']=_0x4fbd87['scope']['resolve']('startAngle'+'2'),this['constantOu'+'tBoundsMul']=_0x4fbd87['scope']['resolve']('outBoundsM'+'ul'),this['constantOu'+'tBoundsAdd']=_0x4fbd87['scope']['resolve']('outBoundsA'+'dd'),this['constantIn'+'BoundsSize']=_0x4fbd87['scope']['resolve']('inBoundsSi'+'ze'),this['constantIn'+'BoundsCent'+'er']=_0x4fbd87['scope']['resolve']('inBoundsCe'+'nter'),this['constantMa'+'xVel']=_0x4fbd87['scope']['resolve']('maxVel'),this['constantFa'+'ceTangent']=_0x4fbd87['scope']['resolve']('faceTangen'+'t'),this['constantFa'+'ceBinorm']=_0x4fbd87['scope']['resolve']('faceBinorm');}['_setInputB'+'ounds'](){this['inBoundsSi'+'zeUniform'][0x1*0x1915+-0xfbb*0x1+-0x3*0x31e]=this['_emitter']['prevWorldB'+'oundsSize']['x'],this['inBoundsSi'+'zeUniform'][-0x62f+-0x26b8+-0x2ce8*-0x1]=this['_emitter']['prevWorldB'+'oundsSize']['y'],this['inBoundsSi'+'zeUniform'][-0x1c03*-0x1+0x15ed+-0x4d*0xa6]=this['_emitter']['prevWorldB'+'oundsSize']['z'],this['constantIn'+'BoundsSize']['setValue'](this['inBoundsSi'+'zeUniform']),this['inBoundsCe'+'nterUnifor'+'m'][-0x2375*-0x1+-0x11+-0x2364]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['x'],this['inBoundsCe'+'nterUnifor'+'m'][-0x1c16+0x1912+0x1*0x305]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['y'],this['inBoundsCe'+'nterUnifor'+'m'][-0x1334+0x576*0x7+0x982*-0x2]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['z'],this['constantIn'+'BoundsCent'+'er']['setValue'](this['inBoundsCe'+'nterUnifor'+'m']);}['randomize'](){this['frameRando'+'mUniform'][0x65*0x52+-0x1fc*0x13+-0x112*-0x5]=Math['random'](),this['frameRando'+'mUniform'][0x197*-0xf+0x41a+0x13c0]=Math['random'](),this['frameRando'+'mUniform'][-0xd36+0x2cf*-0x1+0x1007]=Math['random']();}['update'](_0xe2e8f3,_0x3c2fd2,_0x4922ba,_0x3e5578,_0x112a90){Q['pushGpuMar'+'ker'](_0xe2e8f3,'ParticleGP'+'U');const _0x3461d3=this['_emitter'];_0xe2e8f3['setBlendSt'+'ate'](pt['NOBLEND']),_0xe2e8f3['setDepthSt'+'ate'](Yt['NODEPTH']),_0xe2e8f3['setCullMod'+'e'](bt),this['randomize'](),this['constantGr'+'aphSampleS'+'ize']['setValue']((-0xcd*-0x1+-0x1*-0x13f9+-0x14c5)/_0x3461d3['precision']),this['constantGr'+'aphNumSamp'+'les']['setValue'](_0x3461d3['precision']),this['constantNu'+'mParticles']['setValue'](_0x3461d3['numParticl'+'es']),this['constantNu'+'mParticles'+'Pot']['setValue'](_0x3461d3['numParticl'+'esPot']),this['constantIn'+'ternalTex0']['setValue'](_0x3461d3['internalTe'+'x0']),this['constantIn'+'ternalTex1']['setValue'](_0x3461d3['internalTe'+'x1']),this['constantIn'+'ternalTex2']['setValue'](_0x3461d3['internalTe'+'x2']),this['constantIn'+'ternalTex3']['setValue'](_0x3461d3['internalTe'+'x3']);const _0x334cb7=_0x3461d3['meshInstan'+'ce']['node'],_0x5cf738=_0x334cb7===null?D['ONE']:_0x334cb7['localScale'];if(_0x3461d3['pack8']){this['worldBound'+'sMulUnifor'+'m'][-0x16*0x1b2+-0xbad+0x1053*0x3]=_0x3461d3['worldBound'+'sMul']['x'],this['worldBound'+'sMulUnifor'+'m'][0x58f*0x1+0x1a5b+-0x1fe9]=_0x3461d3['worldBound'+'sMul']['y'],this['worldBound'+'sMulUnifor'+'m'][-0x1a*-0x35+-0xb*0x2e7+0x1a8d]=_0x3461d3['worldBound'+'sMul']['z'],this['constantOu'+'tBoundsMul']['setValue'](this['worldBound'+'sMulUnifor'+'m']),this['worldBound'+'sAddUnifor'+'m'][-0x1139*0x1+-0xecf+0x2008]=_0x3461d3['worldBound'+'sAdd']['x'],this['worldBound'+'sAddUnifor'+'m'][0x49*0x29+-0xc*-0x101+0x3e*-0x62]=_0x3461d3['worldBound'+'sAdd']['y'],this['worldBound'+'sAddUnifor'+'m'][-0x20cd+0x80f*-0x1+0x2*0x146f]=_0x3461d3['worldBound'+'sAdd']['z'],this['constantOu'+'tBoundsAdd']['setValue'](this['worldBound'+'sAddUnifor'+'m']),this['_setInputB'+'ounds']();let _0x592981=_0x3461d3['maxVel']*Math['max'](Math['max'](_0x5cf738['x'],_0x5cf738['y']),_0x5cf738['z']);_0x592981=Math['max'](_0x592981,-0x2648+0xee2+-0x1767*-0x1),this['constantMa'+'xVel']['setValue'](_0x592981);}const _0x33528e=_0x334cb7===null||_0x3461d3['localSpace']?D['ZERO']:_0x334cb7['getPositio'+'n'](),_0x337c5c=_0x334cb7===null?te['IDENTITY']:_0x334cb7['getWorldTr'+'ansform']();_0x3461d3['emitterSha'+'pe']===ai?(E_['setFromMat'+'4'](_0x3c2fd2),this['constantSp'+'awnBounds']['setValue'](E_['data']),this['constantSp'+'awnPosInne'+'rRatio']['setValue'](_0x4922ba)):(this['constantSp'+'awnBoundsS'+'phere']['setValue'](_0x3461d3['emitterRad'+'ius']),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']['setValue'](_0x3461d3['emitterRad'+'ius']===0x3*0xa9f+-0xc32+-0x13ab?-0x8ce+-0x23ad+0x2c7b:_0x3461d3['emitterRad'+'iusInner']/_0x3461d3['emitterRad'+'ius'])),this['constantIn'+'itialVeloc'+'ity']['setValue'](_0x3461d3['initialVel'+'ocity']),b_['setFromMat'+'4'](_0x337c5c),A_['invertMat4'](_0x337c5c),this['emitterPos'+'Uniform'][-0x4*0x9aa+0xebe+0xbf5*0x2]=_0x33528e['x'],this['emitterPos'+'Uniform'][-0x1eb+0x744+-0x156*0x4]=_0x33528e['y'],this['emitterPos'+'Uniform'][0x1b5*-0x11+0x1a35*-0x1+-0xdcf*-0x4]=_0x33528e['z'],this['constantEm'+'itterPos']['setValue'](this['emitterPos'+'Uniform']),this['constantFr'+'ameRandom']['setValue'](this['frameRando'+'mUniform']),this['constantDe'+'lta']['setValue'](_0x3e5578),this['constantRa'+'te']['setValue'](_0x3461d3['rate']),this['constantRa'+'teDiv']['setValue'](_0x3461d3['rate2']-_0x3461d3['rate']),this['constantSt'+'artAngle']['setValue'](_0x3461d3['startAngle']*Y['DEG_TO_RAD']),this['constantSt'+'artAngle2']['setValue'](_0x3461d3['startAngle'+'2']*Y['DEG_TO_RAD']),this['constantSe'+'ed']['setValue'](_0x3461d3['seed']),this['constantLi'+'fetime']['setValue'](_0x3461d3['lifetime']),this['emitterSca'+'leUniform'][-0x21f8+-0xa*0x36f+-0x4e1*-0xe]=_0x5cf738['x'],this['emitterSca'+'leUniform'][0x50b+-0x1d97+0x188d]=_0x5cf738['y'],this['emitterSca'+'leUniform'][-0x1d*0x55+-0x1766+0xb03*0x3]=_0x5cf738['z'],this['constantEm'+'itterScale']['setValue'](this['emitterSca'+'leUniform']),this['constantEm'+'itterMatri'+'x']['setValue'](b_['data']),this['constantEm'+'itterMatri'+'xInv']['setValue'](A_['data']),this['constantLo'+'calVelocit'+'yDivMult']['setValue'](_0x3461d3['localVeloc'+'ityUMax']),this['constantVe'+'locityDivM'+'ult']['setValue'](_0x3461d3['velocityUM'+'ax']),this['constantRo'+'tSpeedDivM'+'ult']['setValue'](_0x3461d3['rotSpeedUM'+'ax'][-0x11dc+0x511*-0x1+0x16ed]);let _0x363896=_0x3461d3['swapTex']?_0x3461d3['particleTe'+'xOUT']:_0x3461d3['particleTe'+'xIN'];_0x363896=_0x3461d3['beenReset']?_0x3461d3['particleTe'+'xStart']:_0x363896;const _0x816f5c=_0x3461d3['swapTex']?_0x3461d3['particleTe'+'xIN']:_0x3461d3['particleTe'+'xOUT'];this['constantPa'+'rticleTexI'+'N']['setValue'](_0x363896),Tr(_0xe2e8f3,_0x3461d3['swapTex']?_0x3461d3['rtParticle'+'TexIN']:_0x3461d3['rtParticle'+'TexOUT'],_0x112a90?_0x3461d3['shaderPart'+'icleUpdate'+'OnStop']:_0x3461d3['loop']?_0x3461d3['shaderPart'+'icleUpdate'+'Respawn']:_0x3461d3['shaderPart'+'icleUpdate'+'NoRespawn']),_0x3461d3['material']['setParamet'+'er']('particleTe'+'xOUT',_0x363896),_0x3461d3['material']['setParamet'+'er']('particleTe'+'xIN',_0x816f5c),_0x3461d3['beenReset']=!(0x2*0xb06+-0x398+-0x1273),_0x3461d3['swapTex']=!_0x3461d3['swapTex'],_0x3461d3['prevWorldB'+'oundsSize']['copy'](_0x3461d3['worldBound'+'sSize']),_0x3461d3['prevWorldB'+'oundsCente'+'r']['copy'](_0x3461d3['worldBound'+'s']['center']),_0x3461d3['pack8']&&this['_setInputB'+'ounds'](),Q['popGpuMark'+'er'](_0xe2e8f3);}}const C_=['NONE','VERTEX','MAP'];class Ob extends pa{['generateKe'+'y'](_0x1e66f3){let _0x1ae259='particle_'+pa['definesHas'+'h'](_0x1e66f3['defines'])+'_';for(const _0x3a7ca in _0x1e66f3)_0x1e66f3['hasOwnProp'+'erty'](_0x3a7ca)&&(_0x1ae259+=_0x1e66f3[_0x3a7ca]);return _0x1ae259;}['createVert'+'exDefines'](_0x2bfe39,_0x469baf){const _0x13261c=new Map(_0x2bfe39['defines']);return _0x2bfe39['mesh']&&_0x13261c['set']('USE_MESH',''),_0x2bfe39['meshUv']&&_0x13261c['set']('USE_MESH_U'+'V',''),_0x2bfe39['localSpace']&&_0x13261c['set']('LOCAL_SPAC'+'E',''),_0x2bfe39['screenSpac'+'e']&&_0x13261c['set']('SCREEN_SPA'+'CE',''),_0x2bfe39['animTex']&&_0x13261c['set']('ANIMTEX',''),_0x2bfe39['soft']>0x1*-0x2048+0x1835+-0x9f*-0xd&&_0x13261c['set']('SOFT',''),_0x2bfe39['stretch']>0x222a+0x1377+-0x35a1&&_0x13261c['set']('STRETCH',''),_0x2bfe39['customFace']&&_0x13261c['set']('CUSTOM_FAC'+'E',''),_0x2bfe39['pack8']&&_0x13261c['set']('PACK8',''),_0x2bfe39['localSpace']&&_0x13261c['set']('LOCAL_SPAC'+'E',''),_0x2bfe39['animTexLoo'+'p']&&_0x13261c['set']('ANIMTEX_LO'+'OP',''),_0x2bfe39['wrap']&&_0x13261c['set']('WRAP',''),_0x2bfe39['alignToMot'+'ion']&&_0x13261c['set']('ALIGN_TO_M'+'OTION',''),_0x13261c['set']('NORMAL',C_[_0x2bfe39['normal']]),_0x469baf['particle_v'+'ertexData']=Pe,_0x2bfe39['mesh']&&_0x2bfe39['meshUv']&&(_0x469baf['particle_u'+'v']=is),_0x2bfe39['useCpu']&&(_0x469baf['particle_v'+'ertexData2']=$c,_0x469baf['particle_v'+'ertexData3']=Ju,_0x469baf['particle_v'+'ertexData4']=ep,_0x469baf['particle_v'+'ertexData5']=tp),_0x13261c;}['createFrag'+'mentDefine'+'s'](_0x57d1cb){const _0x3cd563=new Map(_0x57d1cb['defines']);return _0x57d1cb['soft']>0x26e1+0x9*0x1eb+-0x3824&&_0x3cd563['set']('SOFT',''),_0x57d1cb['halflamber'+'t']&&_0x3cd563['set']('HALF_LAMBE'+'RT',''),_0x3cd563['set']('NORMAL',C_[_0x57d1cb['normal']]),_0x3cd563['set']('BLEND',uy[_0x57d1cb['blend']]),_0x3cd563;}['createShad'+'erDefiniti'+'on'](_0x3184c9,_0x18f550){const _0x1b022a=_0x3184c9['isWebGPU']?it:Fe,_0x1dddec=Ce['get'](_0x3184c9,_0x1b022a),_0xc88aff={},_0x52ab2b=this['createVert'+'exDefines'](_0x18f550,_0xc88aff),_0x26c370=this['createFrag'+'mentDefine'+'s'](_0x18f550),_0x31cf93='PARTICLE_'+(_0x18f550['useCpu']?'CPU':'GPU')+'\x0a';_0x52ab2b['set'](_0x31cf93,''),_0x26c370['set'](_0x31cf93,'');const _0x4c3ec0=new Map(_0x1dddec);return Jt['createDefi'+'nition'](_0x3184c9,{'name':'ParticleSh'+'ader','shaderLanguage':_0x1b022a,'attributes':_0xc88aff,'vertexCode':_0x1dddec['get']('particle_s'+'haderVS'),'fragmentCode':_0x1dddec['get']('particle_s'+'haderPS'),'fragmentDefines':_0x26c370,'fragmentIncludes':_0x4c3ec0,'vertexIncludes':_0x4c3ec0,'vertexDefines':_0x52ab2b});}}const Fb=new Ob();class Nb extends er{constructor(_0x8789ac){super(),h(this,'emitter',null),(this['emitter']=_0x8789ac,w['assert'](_0x8789ac));}['getShaderV'+'ariant'](_0x18d578){const {device:_0x1a661a,scene:_0x116960,cameraShaderParams:_0x44a420,objDefs:_0x7f0056}=_0x18d578,{emitter:_0x1f6ace}=this,_0x3ecf49={'defines':$t['getCoreDef'+'ines'](this,_0x18d578),'pass':xa,'useCpu':this['emitter']['useCpu'],'normal':_0x1f6ace['lighting']?_0x1f6ace['normalMap']!==null?-0x183*-0x6+0xd75+-0x481*0x5:0x1763+0x1*-0x593+0x61*-0x2f:-0x223+0xad*-0xb+-0x2*-0x4c9,'halflambert':this['emitter']['halfLamber'+'t'],'stretch':this['emitter']['stretch'],'alignToMotion':this['emitter']['alignToMot'+'ion'],'soft':this['emitter']['depthSofte'+'ning'],'mesh':this['emitter']['useMesh'],'meshUv':_0x7f0056&Rp,'gamma':(_0x44a420==null?void(0x5c0+-0x1*-0x1d1b+-0x1*0x22db):_0x44a420['shaderOutp'+'utGamma'])??yl,'toneMap':(_0x44a420==null?void(-0x1bfa*0x1+0x1962+0x2*0x14c):_0x44a420['toneMappin'+'g'])??Mp,'fog':_0x116960&&!this['emitter']['noFog']?_0x116960['fog']['type']:'none','wrap':this['emitter']['wrap']&&this['emitter']['wrapBounds'],'localSpace':this['emitter']['localSpace'],'screenSpace':_0x1f6ace['inTools']?!(0x15c4+0x266e+0x1*-0x3c31):this['emitter']['screenSpac'+'e'],'blend':this['emitter']['blendType'],'animTex':this['emitter']['_isAnimate'+'d'](),'animTexLoop':this['emitter']['animLoop'],'pack8':this['emitter']['pack8'],'customFace':this['emitter']['orientatio'+'n']!==Zc},_0xf7b533=new rd(_0x18d578['viewUnifor'+'mFormat'],_0x18d578['viewBindGr'+'oupFormat'],_0x18d578['vertexForm'+'at']),_0x1cc8e1=Nn(_0x1a661a);return _0x1cc8e1['register']('particle',Fb),_0x1cc8e1['getProgram']('particle',_0x3ecf49,_0xf7b533,this['userId']);}}const P_=[[-(0x1*-0x110f+-0x2*0x2+0x1114),-(0x3*-0x151+0x149f+-0x10ab)],[-0xa66+0x1*0x1cbb+-0x1254,-(0x93*0x33+-0x1*-0x845+0x1*-0x258d)],[0x1b55*0x1+-0x1*-0x1ecd+-0x3a21,-0x3d*0x43+0x8ef*0x3+-0xad5*0x1],[-(-0x1250+0x45d*-0x8+-0x5*-0xaa5),0xb78+0x2001+-0xd6*0x34]];function xs(_0x4ba800,_0x2941f6,_0x14cf51,_0x28d3f5,_0x3be6cf=Xt,_0x1e1f43,_0x355ae3){let _0x8e903b=Te;_0x355ae3&&(_0x3be6cf===Ne||_0x3be6cf===_s)&&(_0x8e903b=vt);const _0x499e27=new _e(_0x4ba800,{'width':_0x2941f6,'height':_0x14cf51,'format':_0x3be6cf,'cubemap':!(0x43+0x1*-0x2617+0x25d5),'mipmaps':!(0x2b7+0x35f*-0x8+0x10e*0x17),'minFilter':_0x8e903b,'magFilter':_0x8e903b,'addressU':ue,'addressV':ue,'name':'ParticleSy'+'stemTextur'+'e'}),_0x5dc24f=_0x499e27['lock']();if(_0x3be6cf===Ne||_0x3be6cf===_s){const _0x1fa59c=new Uint8Array(_0x28d3f5['length']);for(let _0x944b0=0x2*0x7c+-0xb3d+0xa45;_0x944b0<_0x28d3f5['length'];_0x944b0++)_0x1fa59c[_0x944b0]=_0x28d3f5[_0x944b0]*_0x1e1f43*(-0x10b6+-0x2022+0x3*0x109d);_0x28d3f5=_0x1fa59c;}return _0x5dc24f['set'](_0x28d3f5),_0x499e27['unlock'](),_0x499e27;}function M_(_0x4f996c){return Math['max'](Math['min'](_0x4f996c,0x1512+0x7*0x3e5+-0x182a*0x2),0x2337+0x5ce+-0x1*0x2905);}const D_=new Xs([0x1*-0x19fb+-0xa*-0x1f5+-0x3*-0x223,0x129a+-0x3a7+-0x59*0x2b,-0x2219*0x1+-0x1*0x2187+0x255*0x1d,-0x25*-0xfb+-0x224d*0x1+0x1fa*-0x1]),I_=new Xs([-0x180e+-0x1001*-0x1+0x80d,-0x3cb*0x2+-0x822+0xfb9,0x1a5*0x2+0x1a15*-0x1+0x16cc,0x67*-0x18+0x249d+-0x114*0x19]),L_=new ta([-0x1b11+-0x151f+-0x18*-0x202,-0x64e*-0x3+0x1ebf+0x1*-0x31a9,0x252*-0xd+-0x83*0x9+0x22c6,-0x1ec6+0x5e*-0x2+0x1f82],[-0x6a1+-0x10fe+0x1*0x179f,0x7*-0x241+-0x349+0x1310,-0x228a+0x23da+-0x43*0x5,-0x189d+0x14d0+-0x1*-0x3cd],[-0x2037*0x1+-0x1*0x2162+0x4199,-0x1*0x2d3+-0x39+-0x104*-0x3,-0x1744*0x1+0x3e3*0x7+-0x1*0x3f0,-0x1f5b+-0x1735+0x3690]),kb=new ta([-0x15*-0x59+-0x6c4*-0x2+-0x1*0x14d5,0xac5+0x41b+-0xedf,-0xb3*0x17+-0x17a5+0x27bb,0x1*0x1766+0x1c2c+-0x133*0x2b],[0x12c+-0x274*-0xa+-0x19b4,0x1565+0x7*-0x2f+-0x141b,-0x8eb*0x1+0x23c9*0x1+0x1*-0x1add,-0x11d4+-0x26*0xc5+0x2f13],[-0x1fbf+0x7ac+0x1813,-0x183b+-0x418*0x7+0x34e4,0x266b+-0x1f07+-0x763,-0x2*-0xb84+-0x10cd+-0x63a]);let bi=0x1082+-0x7c0+-0x8c0;const ec=0x48e+0x2559+-0x29e3*0x1,Ai=new Float32Array(0x745*-0x3+-0x28*-0x3e+0x2*0x611),Or=new te(),R_=new D(),tc=new D(),sc=new D();let Vf,Mc;function he(_0x4de88e,_0x9650fe){Mc[_0x4de88e]!==void(0x1135+0x2314+0x3449*-0x1)&&Mc[_0x4de88e]!==null?Vf[_0x4de88e]=Mc[_0x4de88e]:Vf[_0x4de88e]=_0x9650fe;}function jy(_0x3cb56b,_0x2d060c,_0x221475){return(_0x3cb56b*(0x1*0x25e1+-0x6ca*0x5+-0x2f0)<<-0x1*0x425+-0x33*-0x59+-0x2*0x6c3|_0x2d060c*(-0x687+0x2053+-0x1*0x18cd)<<0x5*0x5a5+-0xcda+-0xf57|_0x221475*(-0x2b7*-0xb+0xabd*0x1+-0x279b))/(0x13*-0xe5+-0xed4+0xc2*0x2a<<0xba*-0x19+-0x9fd+0x1c3f);}function O_(_0x23b7bf,_0x39bc71){const _0x3beb6f=_0x23b7bf['length']/(0x1*-0x427+-0x7ca+0xbf4),_0xadef1f=new Array(_0x3beb6f*(-0x11b6+0x17de+-0x624));for(let _0xb9753a=-0x283*0x1+0x1*0x23d6+0x13*-0x1c1;_0xb9753a<_0x3beb6f;_0xb9753a++)_0xadef1f[_0xb9753a*(0x73a+0x2106+-0x283c)]=_0x23b7bf[_0xb9753a*(0x66a+0xd7*-0x21+0x1550)],_0xadef1f[_0xb9753a*(0x23f6+-0xf46+-0x14ac)+(-0x66d+0x4a*0xa+0x6*0x97)]=_0x23b7bf[_0xb9753a*(-0x1093+-0x2281*0x1+0x3317)+(-0x14d+0x2c5*0xd+-0x22b3)],_0xadef1f[_0xb9753a*(0x155b*-0x1+0x15*0xdf+0x314)+(-0x22b1+-0xb20+0x2dd3)]=_0x23b7bf[_0xb9753a*(-0x186*0xc+0x1f*0x35+0x10*0xbe)+(0xfdb+-0x1d11*0x1+0xd38)],_0xadef1f[_0xb9753a*(0x235+0x63b*-0x5+0xe7b*0x2)+(0x11e*0xe+0xf1*0x2+-0x1183)]=jy(_0x39bc71[_0xb9753a*(0x1888+-0x13bd+0x88*-0x9)],_0x39bc71[_0xb9753a*(-0x5*0x655+-0x23*0x5+0x205b)+(-0xa27+-0x11*0x41+0xe79)],_0x39bc71[_0xb9753a*(-0x1df2*-0x1+0x25cd*0x1+0x3*-0x1694)+(-0xf9b+-0x1c*0xbb+-0x1*-0x2411)]);return _0xadef1f;}function Ub(_0x54bbb9,_0x558e91){const _0x56934c=new Array(_0x558e91['length']*(-0x26e3+0x2b*-0x5d+0x3686));for(let _0x51ac7a=-0x37*0x5a+-0x1*0x1c9b+0x2ff1;_0x51ac7a<_0x558e91['length'];_0x51ac7a++)_0x56934c[_0x51ac7a*(-0x87e*0x3+-0x58c+0xf85*0x2)]=_0x54bbb9[_0x51ac7a*(-0x502+0xb10+0xdd*-0x7)],_0x56934c[_0x51ac7a*(-0x1*-0x4ae+-0x530+0x86)+(0x1043+0x2f*0x1+-0x1071)]=_0x54bbb9[_0x51ac7a*(-0x338*-0x4+-0x17b*0xf+-0x2e*-0x34)+(0xc5a+0x1*-0x5a7+-0x2*0x359)],_0x56934c[_0x51ac7a*(0x1797+-0xc12+0x1*-0xb81)+(-0x1b95+-0x157*0x11+0x6*0x865)]=_0x54bbb9[_0x51ac7a*(0x1490+0x1e72+-0x32ff)+(-0xab3+-0x1c54+0x2709)],_0x56934c[_0x51ac7a*(-0x24d3+-0x1*-0xa22+0x2b*0x9f)+(-0x1407+-0x3*-0xc54+-0x10f2)]=_0x558e91[_0x51ac7a];return _0x56934c;}function Bb(_0x2781c8,_0x21df4b,_0x95f208,_0x23c351,_0x2aeb64){const _0x499673=new Array(_0x2781c8['length']*(0x18d4+0x2*0xd2e+-0x14*0x28f));for(let _0x3a3809=-0x8b7+-0x1*-0x1a5a+-0x11a3;_0x3a3809<_0x2781c8['length'];_0x3a3809++)_0x499673[_0x3a3809*(0x18ec+0x1*-0x1193+-0x1*0x755)]=_0x2781c8[_0x3a3809],_0x499673[_0x3a3809*(0x1e75+-0x17*-0x14f+-0x52*0xbd)+(-0x1*0x197e+0x26e1*-0x1+0xa*0x670)]=_0x21df4b[_0x3a3809],_0x499673[_0x3a3809*(-0x4e5+-0x175*0x17+0x266c)+(-0x68f*0x1+0x1a44+-0x13b3)]=0x13ee*-0x1+0x2084+-0x3*0x432,_0x499673[_0x3a3809*(-0x13df+0x89+0x135a)+(0x2533+-0x1bb4+-0x97c)]=jy(_0x95f208[_0x3a3809],_0x23c351[_0x3a3809],_0x2aeb64[_0x3a3809]);return _0x499673;}function zb(_0xe32196,_0xa73a47){const _0x43fe03=new Array(_0xe32196['length']*(-0x9ed+-0xe0*0x23+0x9b*0x43));for(let _0x5be4dd=0x2*-0x127e+0x135a+0x2*0x8d1;_0x5be4dd<_0xe32196['length'];_0x5be4dd++)_0x43fe03[_0x5be4dd*(0x2*0x788+-0x1*-0xe2f+-0x1d3b)]=_0xe32196[_0x5be4dd],_0x43fe03[_0x5be4dd*(-0x1*-0x8ad+0x1*-0x19d1+-0x9*-0x1e8)+(-0x1*0xf5f+-0x10*0x104+0x1fa0)]=_0xa73a47[_0x5be4dd],_0x43fe03[_0x5be4dd*(0x23ce*0x1+0x1*-0x1eb7+-0x1b1*0x3)+(-0x25f5+-0x35*-0x6a+0x1005)]=-0x19c9+-0xd44+0x270d*0x1,_0x43fe03[_0x5be4dd*(0x4*-0x969+0x2485*-0x1+0x4a2d)+(0x56*-0x1f+-0x3b1*-0x9+0xb66*-0x2)]=-0x1ada*-0x1+-0xa*0x22a+-0x536;return _0x43fe03;}function Vb(_0x286b63){const _0x23bc47=Math['max'](_0x286b63['rate'],_0x286b63['rate2'])*_0x286b63['numParticl'+'es']+_0x286b63['lifetime'];return Date['now']()+_0x23bc47*(-0x17c+0xdf6+0x2*-0x449);}function Gb(_0x4e42ba,_0xd23032){const _0x167430=new Float32Array(_0x4e42ba['length']);for(let _0x10762e=0xd61*-0x1+-0x72*-0x13+0x1*0x4eb;_0x10762e<_0x4e42ba['length'];_0x10762e++)_0x167430[_0x10762e]=_0x4e42ba[_0x10762e]-_0xd23032[_0x10762e];return _0x167430;}function Gr(_0x2a0a3d,_0x2cca7b){const _0x5dc561=_0x2cca7b['length'],_0x5c1254=_0x2a0a3d['length']/_0x5dc561;for(let _0x247328=0x1722+0x178e*0x1+-0x2eb0;_0x247328<_0x5c1254;_0x247328++)for(let _0x5dc24c=-0x2b7*-0xe+-0xc*0x1de+0x7cd*-0x2;_0x5dc24c<_0x5dc561;_0x5dc24c++){const _0x49efda=Math['abs'](_0x2a0a3d[_0x247328*_0x5dc561+_0x5dc24c]);_0x2cca7b[_0x5dc24c]=Math['max'](_0x2cca7b[_0x5dc24c],_0x49efda);}}function Hb(_0x363462,_0x23bd81){const _0x3b67d0=_0x23bd81['length'],_0x3e297b=_0x363462['length']/_0x3b67d0;for(let _0x890e90=0x15e1+0x2*0x689+0x22f3*-0x1;_0x890e90<_0x3e297b;_0x890e90++)for(let _0x4ccf21=0x5*0x33d+0x2*-0x33b+-0x9bb;_0x4ccf21<_0x3b67d0;_0x4ccf21++)_0x363462[_0x890e90*_0x3b67d0+_0x4ccf21]/=_0x23bd81[_0x4ccf21]===0x776*0x1+-0x1ca*0x9+0x8a4?-0x16*-0x9c+-0x1779+0xa12:_0x23bd81[_0x4ccf21],_0x363462[_0x890e90*_0x3b67d0+_0x4ccf21]*=-0x1*-0x1fc7+-0xa0f+-0x15b8+0.5,_0x363462[_0x890e90*_0x3b67d0+_0x4ccf21]+=-0x4*-0x19b+-0xcb+-0x5a1+0.5;}function Fr(_0x11879b,_0x5ebebb,_0x2637dc){const _0x38890c=Gb(_0x5ebebb,_0x11879b);return Gr(_0x38890c,_0x2637dc),Hb(_0x38890c,_0x2637dc),_0x38890c;}const Wb=new Kt();class $b{constructor(_0x3c874e,_0x1c8168){h(this,'material',null),h(this,'internalTe'+'x0',null),h(this,'internalTe'+'x1',null),h(this,'internalTe'+'x2',null),h(this,'colorParam',null),this['graphicsDe'+'vice']=_0x3c874e;const _0x466f38=_0x3c874e,_0x36ee61=0x7*0x42d+0xbf1+-0x290c;this['precision']=_0x36ee61,this['_addTimeTi'+'me']=-0x1*0x10d0+-0x18*0x12d+-0xb*-0x418,Vf=this,Mc=_0x1c8168,he('numParticl'+'es',0x1*-0x991+0x1*0xfc9+0x1*-0x637),this['numParticl'+'es']>_0x3c874e['maxTexture'+'Size']&&(w['warn']('WARNING:\x20c'+'an\x27t\x20creat'+'e\x20more\x20tha'+'n\x20'+_0x3c874e['maxTexture'+'Size']+('\x20particles'+'\x20on\x20this\x20d'+'evice.')),this['numParticl'+'es']=_0x3c874e['maxTexture'+'Size']),he('rate',0x18bc+0x1aaa+-0x3365),he('rate2',this['rate']),he('lifetime',0xbc*0x5+-0x9*0x353+0x1a71),he('emitterExt'+'ents',new D(-0x9d0+-0x6*0x4ab+0x25d2,0x1185*0x2+0x6be+0xe*-0x2fc,0x20e0+0x3*-0x4+-0x20d4)),he('emitterExt'+'entsInner',new D(0x17f6+-0x1969*0x1+0x173,-0x298+-0xb9*0x20+0x19b8,0x267*-0x9+-0x2281+0x704*0x8)),he('emitterRad'+'ius',-0x18ee+-0x176e+0x305c),he('emitterRad'+'iusInner',0x8b7+-0x40*-0x16+0x1*-0xe37),he('emitterSha'+'pe',ai),he('initialVel'+'ocity',0xc9c*-0x3+0xa6d+-0x6da*-0x4),he('wrap',!(-0x17f5+-0x1*0x18bd+0x30b3)),he('localSpace',!(-0x1992+0x1b*0x95+-0x1*-0x9dc)),he('screenSpac'+'e',!(0x3ad+-0x17*0x8+-0x2f4)),he('wrapBounds',null),he('colorMap',this['defaultPar'+'amTexture']),he('normalMap',null),he('loop',!(0x25*0xa+0x1cdf+-0x1e51)),he('preWarm',!(-0x108d+-0x16bd*-0x1+-0x62f*0x1)),he('sort',Of),he('mode',Ty),he('scene',null),he('lighting',!(-0x21d0+0x1*-0x1bd6+0x3da7)),he('halfLamber'+'t',!(-0x1f84+0x60*-0x16+0x27c5)),he('intensity',-0x39*0x1+0x1*-0x1d61+0x35*0x8f),he('stretch',-0xa62+0xb5a*0x2+-0xc52),he('alignToMot'+'ion',!(0x199+0x8*0x97+-0x650)),he('depthSofte'+'ning',-0xa5*-0x5+-0x4db*0x7+0x1ec4),he('mesh',null),he('particleNo'+'rmal',new D(-0x192a+-0xaed+0x1*0x2417,0x7*0x266+-0x4*-0xa4+-0x3*0x673,-0x1611+0x25a2+-0xf91)),he('orientatio'+'n',Zc),he('depthWrite',!(0xf11+-0x264c+0x173c*0x1)),he('noFog',!(-0x1792+-0x1d9a+-0x1*-0x352d)),he('blendType',Zs),he('node',null),he('startAngle',-0x2271+0x1*0x2205+-0x2*-0x36),he('startAngle'+'2',this['startAngle']),he('animTilesX',0x2027*-0x1+0x11a0+0xe88),he('animTilesY',0x353*-0x5+-0x2247+0x32e7),he('animStartF'+'rame',0x99f+0x1*-0x2199+-0x2*-0xbfd),he('animNumFra'+'mes',0x1321+-0x71*0xf+-0x61*0x21),he('animNumAni'+'mations',0x2ba*0x7+-0x1aae*-0x1+0xb*-0x429),he('animIndex',0x130c+0x69f+0x19ab*-0x1),he('randomizeA'+'nimIndex',!(-0x2393+0x19c6+-0x5*-0x1f6)),he('animSpeed',-0x18f4+-0x33*0x3f+0x12c1*0x2),he('animLoop',!(-0x6a*-0x43+0x5*0x35b+0x2c85*-0x1)),this['_gpuUpdate'+'r']=new Rb(this,_0x466f38),this['_cpuUpdate'+'r']=new Lb(this),this['emitterPos'+'Uniform']=new Float32Array(0x4*-0x1f1+-0x174a+0x1f11),this['wrapBounds'+'Uniform']=new Float32Array(-0x1861+0xd4f*0x2+-0x23a),this['emitterSca'+'leUniform']=new Float32Array([-0x19*0x2d+0x38*-0xa3+0x1407*0x2,0x157+-0x19b3+0x185d,0x15e+0x1e38+-0x1f95]),he('colorGraph',kb),he('colorGraph'+'2',this['colorGraph']),he('scaleGraph',I_),he('scaleGraph'+'2',this['scaleGraph']),he('alphaGraph',I_),he('alphaGraph'+'2',this['alphaGraph']),he('localVeloc'+'ityGraph',L_),he('localVeloc'+'ityGraph2',this['localVeloc'+'ityGraph']),he('velocityGr'+'aph',L_),he('velocityGr'+'aph2',this['velocityGr'+'aph']),he('rotationSp'+'eedGraph',D_),he('rotationSp'+'eedGraph2',this['rotationSp'+'eedGraph']),he('radialSpee'+'dGraph',D_),he('radialSpee'+'dGraph2',this['radialSpee'+'dGraph']),this['animTilesP'+'arams']=new Float32Array(0x106b+0x15f0+-0x2659),this['animParams']=new Float32Array(0x2507+0x11ea*0x1+-0x81*0x6d),this['animIndexP'+'arams']=new Float32Array(0x2e*-0x65+-0x2398+0x56*0xa0),this['vbToSort']=null,this['vbOld']=null,this['particleDi'+'stance']=null,this['camera']=null,this['swapTex']=!(-0x108b+-0x17b5+0x2841),this['useMesh']=!(0x32*0x67+0x161*0x14+-0x6f*0x6e),this['useCpu']=!_0x3c874e['supportsGp'+'uParticles'],this['pack8']=!(-0x8*0xb0+-0x2*0x67a+0x1274*0x1),this['localBound'+'s']=new De(),this['worldBound'+'sNoTrail']=new De(),this['worldBound'+'sTrail']=[new De(),new De()],this['worldBound'+'s']=new De(),this['worldBound'+'sSize']=new D(),this['prevWorldB'+'oundsSize']=new D(),this['prevWorldB'+'oundsCente'+'r']=new D(),this['prevEmitte'+'rExtents']=this['emitterExt'+'ents'],this['prevEmitte'+'rRadius']=this['emitterRad'+'ius'],this['worldBound'+'sMul']=new D(),this['worldBound'+'sAdd']=new D(),this['timeToSwit'+'chBounds']=-0x7c5+-0x2*-0x137d+-0x1f35,this['shaderPart'+'icleUpdate'+'Respawn']=null,this['shaderPart'+'icleUpdate'+'NoRespawn']=null,this['shaderPart'+'icleUpdate'+'OnStop']=null,this['numParticl'+'eVerts']=-0x1ccb+-0x1*-0x2203+-0x538,this['numParticl'+'eIndices']=0x7d5+0xad2+-0xbf*0x19,this['material']=null,this['meshInstan'+'ce']=null,this['drawOrder']=-0xd*0x2e5+-0x1*0x1411+0x39b2,this['seed']=Math['random'](),this['fixedTimeS'+'tep']=(-0xfb5+-0x3*0x639+0x2261)/(-0x1cc6+0x249*0x5+0x1*0x1195),this['maxSubStep'+'s']=-0x78d+-0x8fe*-0x2+-0x3*0x377,this['simTime']=-0x7e*-0x1c+-0x16d+-0xc5b,this['simTimeTot'+'al']=0x10+-0x6*-0x367+0xa3d*-0x2,this['beenReset']=!(0x29e*-0xa+-0x25e6+0x4013*0x1),this['_layer']=null,this['rebuild']();}get['defaultPar'+'amTexture'](){return w['assert'](this['graphicsDe'+'vice']),Wb['get'](this['graphicsDe'+'vice'],()=>{const _0x4cafb6=new Float32Array(-0xd2e+-0x151*-0x1+0xfdd);for(let _0x54a5f6=-0x1f26+-0x1698+-0x3*-0x11ea;_0x54a5f6<0x2*0x5e0+-0x16e0+0xb3*0x10;_0x54a5f6++)for(let _0xb6fa69=0xfdd*-0x2+-0x11*0x1db+0x3f45;_0xb6fa69<-0x2271+-0x1301*0x1+-0x8eb*-0x6;_0xb6fa69++){const _0x302c93=_0xb6fa69+(0xada+-0x5c1*-0x2+0x61*-0x3b)-(0x7*-0x3b3+-0x1363+-0x5aa*-0x8+0.5),_0x508543=_0x54a5f6+(0x1*-0x2db+-0x1a09+0x1ce5)-(-0x1fd1+-0x1da9+-0x3d82*-0x1+0.5),_0x32381f=M_(-0x2*-0x231+0x6ce*-0x4+0x3*0x79d-M_(Math['sqrt'](_0x302c93*_0x302c93+_0x508543*_0x508543)/(0x26bf+-0x120a*0x2+-0x1d*0x17))-(-0x11a2+-0x87*0x39+0x1d*0x1a5+0.5)),_0x2923e3=_0x54a5f6*(0x187*0xb+-0x1435+0x378)+_0xb6fa69;_0x4cafb6[_0x2923e3*(-0x810+0x6f+0x7a5)]=-0x168c+-0x1*-0x16d2+-0x1*0x45,_0x4cafb6[_0x2923e3*(-0x9de+0x12f9+-0x917)+(-0xc99+-0xb7a*-0x3+0x16*-0xfe)]=0x5*-0x551+-0x575*0x3+0x623*0x7,_0x4cafb6[_0x2923e3*(0x2683*-0x1+0x1279+0x12e*0x11)+(-0x26e*-0x5+0x1b95*0x1+0x27b9*-0x1)]=0x1631+-0x63a+-0xff6,_0x4cafb6[_0x2923e3*(0x3*0x14f+0x2*0x113c+0x19*-0x189)+(-0x1e9c+0xa*-0x9d+0x24c1)]=_0x32381f;}const _0x2a86c1=xs(this['graphicsDe'+'vice'],-0xb6b+-0x2*-0x95+0xa51,-0x859+0x22cd+0x699*-0x4,_0x4cafb6,_s,0x1317+0x2*-0xb4e+0xb*0x52,!(0x127*-0xb+0x1*-0x1605+0x1159*0x2));return _0x2a86c1['minFilter']=vt,_0x2a86c1['magFilter']=vt,_0x2a86c1;});}['onChangeCa'+'mera'](){this['resetMater'+'ial']();}['calculateB'+'oundsMad'](){this['worldBound'+'sMul']['x']=(-0x13a*0x6+0x3*-0x2b1+-0x2*-0x7b8)/this['worldBound'+'sSize']['x'],this['worldBound'+'sMul']['y']=(-0x1ab*-0x7+-0x121d+-0x61*-0x11)/this['worldBound'+'sSize']['y'],this['worldBound'+'sMul']['z']=(0x184+0xa91+-0xc14)/this['worldBound'+'sSize']['z'],this['worldBound'+'sAdd']['copy'](this['worldBound'+'s']['center'])['mul'](this['worldBound'+'sMul'])['mulScalar'](-(0x1c87+-0x22e6+0x660)),this['worldBound'+'sAdd']['x']+=-0x10bd+0x3e+-0x29*-0x67+0.5,this['worldBound'+'sAdd']['y']+=-0x24eb+-0x35a+-0xa9*-0x3d+0.5,this['worldBound'+'sAdd']['z']+=-0x1*-0x18f9+-0x1687*-0x1+0x4*-0xbe0+0.5;}['calculateW'+'orldBounds'](){if(!this['node'])return;if(this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),!this['useCpu']){let _0x5ac1d4=!(-0x1*0x26ae+-0x2039*0x1+0x46e8);this['emitterSha'+'pe']===ai?_0x5ac1d4=!this['emitterExt'+'ents']['equals'](this['prevEmitte'+'rExtents']):_0x5ac1d4=this['emitterRad'+'ius']!==this['prevEmitte'+'rRadius'],_0x5ac1d4&&this['calculateL'+'ocalBounds']();}const _0x2f8d9f=this['node']['getWorldTr'+'ansform']();this['localSpace']?this['worldBound'+'sNoTrail']['copy'](this['localBound'+'s']):this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],_0x2f8d9f),this['worldBound'+'sTrail'][-0x747+-0x3ed*0x3+0x12*0x10f]['add'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][-0x1118+0x50f+0xc0a]['add'](this['worldBound'+'sNoTrail']);const _0x2f39f4=this['simTimeTot'+'al'];_0x2f39f4>=this['timeToSwit'+'chBounds']&&(this['worldBound'+'sTrail'][-0x1f22+-0x1279+0x319b]['copy'](this['worldBound'+'sTrail'][-0xda5+0xad3*-0x2+0x6*0x5e2]),this['worldBound'+'sTrail'][-0x24b9+0x1*0x20b9+0x401]['copy'](this['worldBound'+'sNoTrail']),this['timeToSwit'+'chBounds']=_0x2f39f4+this['lifetime']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][0x1d09+-0xd2b+-0xfde]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0x839+0x1bb1+-0x23e8),this['localSpace']?(this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x2f8d9f),this['meshInstan'+'ce']['mesh']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x2f8d9f)):(this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['mesh']['aabb']['copy'](this['worldBound'+'s'])),this['meshInstan'+'ce']['_aabbVer']=-0x23a0+-0x52*0x52+0x3de5-this['meshInstan'+'ce']['_aabbVer'],this['pack8']&&this['calculateB'+'oundsMad']();}['resetWorld'+'Bounds'](){this['node']&&(this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][0xefc*-0x2+0xb*0x1eb+0x8df]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][0x1*0x1271+-0x4d9+0x31*-0x47]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][0xda4+-0x2192+0x13ee]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0x128*0x4+0xb*0x239+0x427*-0x7),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['simTimeTot'+'al']=-0x11*-0x225+0x3*0x6a3+-0x385e,this['timeToSwit'+'chBounds']=-0x219d+0x1ef8+0x2a5*0x1);}['calculateL'+'ocalBounds'](){let _0x2637a9=Number['MAX_VALUE'],_0x51e74e=Number['MAX_VALUE'],_0x238315=Number['MAX_VALUE'],_0x5ae936=-Number['MAX_VALUE'],_0x3eab98=-Number['MAX_VALUE'],_0x207931=-Number['MAX_VALUE'],_0x1a4b92=0x340+-0x1*0x5b9+0x1*0x279,_0x1a4ccb=0xa3e+-0x26be+0x1c80;const _0x46e8c3=this['lifetime']/this['precision'],_0x1b65d8=[this['qVelocity'],this['qVelocity2']],_0x315e10=[this['qLocalVelo'+'city'],this['qLocalVelo'+'city2']],_0x46de19=[-0x5b*0x39+-0x1*-0x16ab+-0x1c*0x16,-0x7c5+-0x118a+-0x24d*-0xb],_0x5a6de1=[-0xe*0x209+0x4*-0x951+0x41c2,-0x1*-0x2615+-0xdba+0x4df*-0x5],_0x5e013a=[0x2053+-0x21bf+0x34*0x7,0x1059+-0x9a2+-0x6b7],_0x2289aa=[-0x24c3+0x24f9+-0x9*0x6,-0x38*-0x18+-0x253c*-0x1+0xa9f*-0x4],_0x352b2c=[0x15*-0x2c+0x43c+0x20*-0x5,0x2f9*0x7+0x80+-0x5*0x443];let _0x3cf372,_0x4112f3,_0x4805b7;for(let _0x1d0bb1=0x809*0x4+-0x23fd+0x5*0xc5;_0x1d0bb1<this['precision']+(0x1*-0x6aa+-0x2187+-0xd66*-0x3);_0x1d0bb1++){const _0x552a5f=Math['min'](_0x1d0bb1,this['precision']-(-0x1b84+0xa10+0x1175));for(let _0x24c524=-0x239*-0x1+-0xb51+0x918;_0x24c524<0x43*-0x30+0x1246+-0x5b4;_0x24c524++)_0x3cf372=_0x315e10[_0x24c524][_0x552a5f*(-0x21d8+-0x1bde+-0x2af*-0x17)+(0x49*0x71+0x8b*-0x47+-0x3c*-0x1b)]*_0x46e8c3+_0x46de19[_0x24c524],_0x4112f3=_0x315e10[_0x24c524][_0x552a5f*(0x19ca+0xfde+-0x5f3*0x7)+(-0x1183*0x1+0x1b+-0x1169*-0x1)]*_0x46e8c3+_0x5a6de1[_0x24c524],_0x4805b7=_0x315e10[_0x24c524][_0x552a5f*(0x9b0+0x1c3b+-0x12f4*0x2)+(-0x228c+0x17c4+0xaca)]*_0x46e8c3+_0x5e013a[_0x24c524],_0x2637a9=Math['min'](_0x3cf372,_0x2637a9),_0x51e74e=Math['min'](_0x4112f3,_0x51e74e),_0x238315=Math['min'](_0x4805b7,_0x238315),_0x5ae936=Math['max'](_0x3cf372,_0x5ae936),_0x3eab98=Math['max'](_0x4112f3,_0x3eab98),_0x207931=Math['max'](_0x4805b7,_0x207931),_0x46de19[_0x24c524]=_0x3cf372,_0x5a6de1[_0x24c524]=_0x4112f3,_0x5e013a[_0x24c524]=_0x4805b7;for(let _0x3d605a=-0x4*0x54c+-0xaf4+0x2024;_0x3d605a<-0xce*-0x25+0x8e9*0x4+-0x4168;_0x3d605a++)_0x352b2c[_0x3d605a]+=_0x46e8c3*Math['sqrt'](_0x1b65d8[_0x3d605a][_0x552a5f*(-0xd*0x139+0x1*0x260a+-0x1622)+(-0x25*0x6b+0x592*-0x5+0x2b51)]*_0x1b65d8[_0x3d605a][_0x552a5f*(-0x398*0x4+-0x1df*-0x12+-0x1c1*0xb)+(0x4*-0x74b+0x1928+0x404)]+_0x1b65d8[_0x3d605a][_0x552a5f*(0x25dd+-0x43e+-0x219c)+(0x3*-0x105+0xc83+0x29*-0x3b)]*_0x1b65d8[_0x3d605a][_0x552a5f*(0x5c7*-0x5+-0x3b5*0xa+0x20fc*0x2)+(-0x53*0x29+0x278+-0x2a*-0x42)]+_0x1b65d8[_0x3d605a][_0x552a5f*(0x2036+0x11ff*-0x1+-0x1*0xe34)+(0xf00+0xa7*0x6+0x1*-0x12e8)]*_0x1b65d8[_0x3d605a][_0x552a5f*(-0x1e2+0xe74+-0xc8f*0x1)+(-0x1eb+0x119d+-0x4*0x3ec)]);_0x2289aa[0x74b*0x4+-0x2130+0x404]+=this['qRadialSpe'+'ed'][_0x552a5f]*_0x46e8c3,_0x2289aa[-0x1e17+-0xb0d+0x3*0xdb7]+=this['qRadialSpe'+'ed2'][_0x552a5f]*_0x46e8c3,_0x1a4b92=Math['max'](_0x1a4b92,Math['max'](Math['abs'](_0x2289aa[-0x770+0xb8e+-0x41e]),Math['abs'](_0x2289aa[0x89e+-0x99+0x72*-0x12]))),_0x1a4ccb=Math['max'](_0x1a4ccb,this['qScale'][_0x552a5f]);}this['emitterSha'+'pe']===ai?(_0x3cf372=this['emitterExt'+'ents']['x']*(-0x25b6+-0x22cf+-0x2f*-0x18b+0.5),_0x4112f3=this['emitterExt'+'ents']['y']*(0x20ed+-0x862+-0x188b+0.5),_0x4805b7=this['emitterExt'+'ents']['z']*(-0x420+-0x17d9+-0x15*-0x155+0.5)):(_0x3cf372=this['emitterRad'+'ius'],_0x4112f3=this['emitterRad'+'ius'],_0x4805b7=this['emitterRad'+'ius']);const _0x5726be=Math['max'](_0x352b2c[-0x1*0xb45+0x1439+0xc*-0xbf],_0x352b2c[0xb29*-0x2+-0xc9a+-0x22ed*-0x1]);tc['x']=_0x2637a9-_0x1a4ccb-_0x3cf372-_0x1a4b92-_0x5726be,tc['y']=_0x51e74e-_0x1a4ccb-_0x4112f3-_0x1a4b92-_0x5726be,tc['z']=_0x238315-_0x1a4ccb-_0x4805b7-_0x1a4b92-_0x5726be,sc['x']=_0x5ae936+_0x1a4ccb+_0x3cf372+_0x1a4b92+_0x5726be,sc['y']=_0x3eab98+_0x1a4ccb+_0x4112f3+_0x1a4b92+_0x5726be,sc['z']=_0x207931+_0x1a4ccb+_0x4805b7+_0x1a4b92+_0x5726be,this['localBound'+'s']['setMinMax'](tc,sc);}['rebuild'](){const _0x473361=this['graphicsDe'+'vice'];this['colorMap']===null&&(this['colorMap']=this['defaultPar'+'amTexture']),this['spawnBound'+'s']=this['emitterSha'+'pe']===ai?this['emitterExt'+'ents']:this['emitterRad'+'ius'],this['useCpu']=this['useCpu']||this['sort']>Of||_0x473361['maxVertexT'+'extures']<=0x176+0x8d0+-0xa45||_0x473361['fragmentUn'+'iformsCoun'+'t']<0x1108+0x171a+0x7fa*-0x5||_0x473361['forceCpuPa'+'rticles'],this['_destroyRe'+'sources'](),this['pack8']=(this['pack8']||!_0x473361['textureFlo'+'atRenderab'+'le'])&&!this['useCpu'],bi=this['useCpu']||this['pack8']?0x2244+-0x6d2+-0x1b6e:-0x1fba+-0x2543*-0x1+-0x587,this['useMesh']=!!this['mesh'],this['numParticl'+'esPot']=Y['nextPowerO'+'fTwo'](this['numParticl'+'es']),this['rebuildGra'+'phs'](),this['calculateL'+'ocalBounds'](),this['resetWorld'+'Bounds'](),this['node']&&(this['worldBound'+'s']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][-0x656*0x1+0x134b*0x1+-0xcf5]['copy'](this['worldBound'+'s']),this['worldBound'+'sTrail'][0x1*0x1399+-0x163*-0xd+0x259f*-0x1]['copy'](this['worldBound'+'s']),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0xea4+-0x2147+-0x2b*-0x6f),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['pack8']&&this['calculateB'+'oundsMad']()),this['vbToSort']=new Array(this['numParticl'+'es']);for(let _0x5781d3=-0x943*-0x1+-0x4bf+0x2*-0x242;_0x5781d3<this['numParticl'+'es'];_0x5781d3++)this['vbToSort'][_0x5781d3]=[0x1*-0x185f+0x61f+0x1240,0x1acc+0x24a9+0x2d*-0x169];this['particleDi'+'stance']=new Float32Array(this['numParticl'+'es']),this['_gpuUpdate'+'r']['randomize'](),this['particleTe'+'x']=new Float32Array(this['numParticl'+'esPot']*bi*ec);const _0x4a8212=this['node']===null||this['localSpace']?D['ZERO']:this['node']['getPositio'+'n']();this['emitterSha'+'pe']===ai&&(this['node']===null||this['localSpace']?Or['setTRS'](D['ZERO'],le['IDENTITY'],this['spawnBound'+'s']):Or['setTRS'](D['ZERO'],this['node']['getRotatio'+'n'](),R_['copy'](this['spawnBound'+'s'])['mul'](this['node']['localScale'])),Ai[-0x1d27*-0x1+0x120c+-0x2f33]=this['emitterExt'+'ents']['x']!==-0x2102+0x1*0xe43+-0x12bf*-0x1?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:-0x2*0x55+0x2666*-0x1+0x19*0x190,Ai[0x15d1+0x3c5*-0x8+0x858]=this['emitterExt'+'ents']['y']!==0x48f*0x5+0xa*-0x25+-0x1*0x1559?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:0xf*-0x189+-0x1b2d+-0x1*-0x3234,Ai[-0x19b2+-0x1313+0x1*0x2cc7]=this['emitterExt'+'ents']['z']!==-0x1926*0x1+-0x1*-0x23e+-0x4*-0x5ba?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:-0x1d7+-0x11fa+0x13d1);for(let _0x4ef3fe=0x1*-0x8a5+0x1*-0x2501+0x16d3*0x2;_0x4ef3fe<this['numParticl'+'es'];_0x4ef3fe++)this['_cpuUpdate'+'r']['calcSpawnP'+'osition'](this['particleTe'+'x'],Or,Ai,_0x4a8212,_0x4ef3fe),this['useCpu']&&(this['particleTe'+'x'][_0x4ef3fe*ec+(0x10ab+0x1664+-0x270c)+this['numParticl'+'esPot']*(0x1f3a+-0x2b*0x7+-0x1e0b*0x1)*ec]=-0x2645+0x17*-0x7f+-0x4f*-0xa1);this['particleTe'+'xStart']=new Float32Array(this['numParticl'+'esPot']*bi*ec);for(let _0x414a6e=0x2310+0x5*0x3d7+0x3643*-0x1;_0x414a6e<this['particleTe'+'xStart']['length'];_0x414a6e++)this['particleTe'+'xStart'][_0x414a6e]=this['particleTe'+'x'][_0x414a6e];this['useCpu']||(this['pack8']?(this['particleTe'+'xIN']=xs(_0x473361,this['numParticl'+'esPot'],bi,this['particleTe'+'x'],Ne,-0xc2c+-0x559*-0x1+0x6d4,!(-0x1*0xf76+-0x1247+-0x10df*-0x2)),this['particleTe'+'xOUT']=xs(_0x473361,this['numParticl'+'esPot'],bi,this['particleTe'+'x'],Ne,-0x3b0*-0x2+0xb54+-0x12b3,!(0x220+0x1bc*-0x16+-0xe1*-0x29)),this['particleTe'+'xStart']=xs(_0x473361,this['numParticl'+'esPot'],bi,this['particleTe'+'xStart'],Ne,0x55+-0x22b1+-0x225d*-0x1,!(0x646+0xc7d+-0x12c2))):(this['particleTe'+'xIN']=xs(_0x473361,this['numParticl'+'esPot'],bi,this['particleTe'+'x']),this['particleTe'+'xOUT']=xs(_0x473361,this['numParticl'+'esPot'],bi,this['particleTe'+'x']),this['particleTe'+'xStart']=xs(_0x473361,this['numParticl'+'esPot'],bi,this['particleTe'+'xStart'])),this['rtParticle'+'TexIN']=new gt({'colorBuffer':this['particleTe'+'xIN'],'depth':!(-0x626*-0x2+0x3a*-0x3e+0x1c1)}),this['rtParticle'+'TexOUT']=new gt({'colorBuffer':this['particleTe'+'xOUT'],'depth':!(-0x2*0xc7f+-0xb7f+0x247e)}),this['swapTex']=!(0x1d8e+-0x199*0x1+-0x1bf4));const _0x266ca2=new Map();this['localSpace']&&_0x266ca2['set']('LOCAL_SPAC'+'E',''),this['pack8']&&_0x266ca2['set']('PACK8',''),this['emitterSha'+'pe']===ai&&_0x266ca2['set']('EMITTERSHA'+'PE_BOX','');const _0xa8e3d0='Shape:'+this['emitterSha'+'pe']+'-Pack:'+this['pack8']+'-Local:'+this['localSpace'],_0x25d08c=Ce['get'](_0x473361,_0x473361['isWebGPU']?it:Fe),_0x3b92f2=new Map(_0x25d08c),_0x3a82d4={'attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'particle_s'+'imulationP'+'S','fragmentDefines':_0x266ca2,'fragmentIncludes':_0x3b92f2};_0x3a82d4['uniqueName']='ParticleUp'+'dateRespaw'+'n-'+_0xa8e3d0,_0x266ca2['set']('RESPAWN',''),this['shaderPart'+'icleUpdate'+'Respawn']=$t['createShad'+'er'](_0x473361,_0x3a82d4),_0x266ca2['delete']('RESPAWN'),_0x3a82d4['uniqueName']='ParticleUp'+'dateNoResp'+'awn-'+_0xa8e3d0,_0x266ca2['set']('NO_RESPAWN',''),this['shaderPart'+'icleUpdate'+'NoRespawn']=$t['createShad'+'er'](_0x473361,_0x3a82d4),_0x266ca2['delete']('NO_RESPAWN'),_0x3a82d4['uniqueName']='ParticleUp'+'dateStop-'+_0xa8e3d0,_0x266ca2['set']('ON_STOP',''),this['shaderPart'+'icleUpdate'+'OnStop']=$t['createShad'+'er'](_0x473361,_0x3a82d4),this['numParticl'+'eVerts']=this['useMesh']?this['mesh']['vertexBuff'+'er']['numVertice'+'s']:0x1*-0x2042+-0x7c4+0x32*0xcd,this['numParticl'+'eIndices']=this['useMesh']?this['mesh']['indexBuffe'+'r'][0xab+-0x1d2a+-0x1*-0x1c7f]['numIndices']:-0xe55+-0xc36+-0x1*-0x1a91,this['_allocate'](this['numParticl'+'es']);const _0x26d5bc=new Ge(_0x473361);_0x26d5bc['vertexBuff'+'er']=this['vertexBuff'+'er'],_0x26d5bc['indexBuffe'+'r'][-0x1*-0xa02+0xbda+-0xaee*0x2]=this['indexBuffe'+'r'],_0x26d5bc['primitive'][-0x1c11+-0x140c+0x301d*0x1]['type']=qs,_0x26d5bc['primitive'][-0xa9*0x10+0x505*-0x7+0x2db3]['base']=0x1f34+0x11d0+-0x3104,_0x26d5bc['primitive'][0xf2*0xb+-0x122f+0x1*0x7c9]['count']=this['numParticl'+'es']*this['numParticl'+'eIndices'],_0x26d5bc['primitive'][0x67a*-0x3+-0x922+0x1c90]['indexed']=!(0x1*0x1abf+0x10bf*0x1+0x2*-0x15bf),this['material']=this['_createMat'+'erial'](),this['resetMater'+'ial']();const _0x5ca8a3=this['meshInstan'+'ce']?this['meshInstan'+'ce']['visible']:!(0x1a53+0x16b*-0x1b+0xbf6);this['meshInstan'+'ce']=new He(_0x26d5bc,this['material'],this['node']),this['meshInstan'+'ce']['pick']=!(0x2387+-0x2*-0x878+-0x3476),this['meshInstan'+'ce']['updateKey'](),this['meshInstan'+'ce']['cull']=!(-0x4fe+-0x2151*-0x1+-0x1c53),this['localSpace']?this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],this['node']['getWorldTr'+'ansform']()):this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['_updateAab'+'b']=!(-0x15b4+-0x1*0x1e6b+0x3420),this['meshInstan'+'ce']['visible']=_0x5ca8a3,this['_setMateri'+'alTextures'](),this['resetTime'](),this['addTime'](0x233+0x1aee+0x1*-0x1d21,!(0x22f6+0x1555*0x1+-0x384a)),this['preWarm']&&this['prewarm'](this['lifetime']);}['_isAnimate'+'d'](){return this['animNumFra'+'mes']>=0x2241+-0x1509*-0x1+0x3749*-0x1&&(this['animTilesX']>0x1a48+0xff0+-0x2a37||this['animTilesY']>-0xbe3+-0xdd8+-0x7a*-0x36)&&(this['colorMap']&&this['colorMap']!==this['defaultPar'+'amTexture']||this['normalMap']);}['rebuildGra'+'phs'](){const _0x119ea0=this['precision'],_0x4157fc=this['graphicsDe'+'vice'];this['qLocalVelo'+'city']=this['localVeloc'+'ityGraph']['quantize'](_0x119ea0),this['qVelocity']=this['velocityGr'+'aph']['quantize'](_0x119ea0),this['qColor']=this['colorGraph']['quantizeCl'+'amped'](_0x119ea0,0x1*0xd2b+-0x1d0b+0xfe0,-0x1576+0x2073+-0xafc),this['qRotSpeed']=this['rotationSp'+'eedGraph']['quantize'](_0x119ea0),this['qScale']=this['scaleGraph']['quantize'](_0x119ea0),this['qAlpha']=this['alphaGraph']['quantize'](_0x119ea0),this['qRadialSpe'+'ed']=this['radialSpee'+'dGraph']['quantize'](_0x119ea0),this['qLocalVelo'+'city2']=this['localVeloc'+'ityGraph2']['quantize'](_0x119ea0),this['qVelocity2']=this['velocityGr'+'aph2']['quantize'](_0x119ea0),this['qColor2']=this['colorGraph'+'2']['quantizeCl'+'amped'](_0x119ea0,-0x3eb*-0x1+0x7a5*-0x1+-0x1*-0x3ba,-0x15ed+-0x21be+0x37ac),this['qRotSpeed2']=this['rotationSp'+'eedGraph2']['quantize'](_0x119ea0),this['qScale2']=this['scaleGraph'+'2']['quantize'](_0x119ea0),this['qAlpha2']=this['alphaGraph'+'2']['quantize'](_0x119ea0),this['qRadialSpe'+'ed2']=this['radialSpee'+'dGraph2']['quantize'](_0x119ea0);for(let _0x2706c1=0x48e+0x1935+-0x1dc3;_0x2706c1<_0x119ea0;_0x2706c1++)this['qRotSpeed'][_0x2706c1]*=Y['DEG_TO_RAD'],this['qRotSpeed2'][_0x2706c1]*=Y['DEG_TO_RAD'];if(this['localVeloc'+'ityUMax']=new Float32Array(0x14*-0x18d+-0x19be+0x38c5),this['velocityUM'+'ax']=new Float32Array(0x14cb+0x1*-0x12d1+-0x1f7),this['colorUMax']=new Float32Array(-0xa9*0x1a+0x1f9c+-0xe6f),this['rotSpeedUM'+'ax']=[0x24e9+-0xa1c+-0x1acd],this['scaleUMax']=[0x245a+0x13*0x8e+-0x1*0x2ee4],this['alphaUMax']=[0x196e*0x1+-0x65*-0x26+-0x286c],this['radialSpee'+'dUMax']=[-0x1026+-0x17*0x53+-0x1*-0x179b],this['qLocalVelo'+'cityDiv']=Fr(this['qLocalVelo'+'city'],this['qLocalVelo'+'city2'],this['localVeloc'+'ityUMax']),this['qVelocityD'+'iv']=Fr(this['qVelocity'],this['qVelocity2'],this['velocityUM'+'ax']),this['qColorDiv']=Fr(this['qColor'],this['qColor2'],this['colorUMax']),this['qRotSpeedD'+'iv']=Fr(this['qRotSpeed'],this['qRotSpeed2'],this['rotSpeedUM'+'ax']),this['qScaleDiv']=Fr(this['qScale'],this['qScale2'],this['scaleUMax']),this['qAlphaDiv']=Fr(this['qAlpha'],this['qAlpha2'],this['alphaUMax']),this['qRadialSpe'+'edDiv']=Fr(this['qRadialSpe'+'ed'],this['qRadialSpe'+'ed2'],this['radialSpee'+'dUMax']),this['pack8']){const _0x5f464d=[-0x1213+-0x3df+0x15f2,0x36b+0x1*-0x1acf+0x1764,0x40*0x84+-0x1984+-0x77c];Gr(this['qVelocity'],_0x5f464d);const _0x16b1e8=[0x1a41+0x2159+-0x3b9a,0x1bbe+0x18d7*-0x1+-0x2e7,0xaa9+0x1*0x147a+-0x1*0x1f23];Gr(this['qVelocity2'],_0x16b1e8);const _0x67b5b8=[-0x26c4*0x1+-0x1*0x578+-0x2c3c*-0x1,-0x1*-0x481+-0x2*0x6a1+0x8c1,-0x1865+-0x222a+-0x315*-0x13];Gr(this['qLocalVelo'+'city'],_0x67b5b8);const _0x3f2a37=[-0x1171+-0x1855+0x2*0x14e3,0x1*0x613+0x100f+-0xb11*0x2,-0xe1e+-0x5*0x154+0x14c2];Gr(this['qLocalVelo'+'city2'],_0x3f2a37);const _0x2f82d5=[0x1070+0x662*-0x3+0x2b6];Gr(this['qRadialSpe'+'ed'],_0x2f82d5);const _0x42c059=[0x7de+0x1*-0x18c8+0x10ea*0x1];Gr(this['qRadialSpe'+'ed2'],_0x42c059);let _0x34619a=Math['max'](_0x5f464d[-0x2173+0xf1*-0x17+0x371a*0x1],_0x16b1e8[-0x647+-0x2bc+0x903]);_0x34619a=Math['max'](_0x34619a,_0x5f464d[0x1*0x3bd+0xe97+-0x1253]),_0x34619a=Math['max'](_0x34619a,_0x16b1e8[0xaa+-0x1*0x34b+-0x2*-0x151]),_0x34619a=Math['max'](_0x34619a,_0x5f464d[-0x59d*-0x1+-0x2*0x110+0x51*-0xb]),_0x34619a=Math['max'](_0x34619a,_0x16b1e8[-0x2284+-0x1e66+0x40ec]);let _0x2adf37=Math['max'](_0x67b5b8[-0x23ac+-0x2*0x56f+-0x2e8a*-0x1],_0x3f2a37[-0x15*0x25+0x1bb3+-0x1c3*0xe]);_0x2adf37=Math['max'](_0x2adf37,_0x67b5b8[0xd4f+0x217c+-0x2eca]),_0x2adf37=Math['max'](_0x2adf37,_0x3f2a37[-0x1def+0x9b*0x3f+-0x1*0x835]),_0x2adf37=Math['max'](_0x2adf37,_0x67b5b8[-0x7*-0x3ed+-0x78*-0x43+0x1*-0x3ae1]),_0x2adf37=Math['max'](_0x2adf37,_0x3f2a37[0x1f2b*-0x1+-0x256c+-0x1*-0x4499]);const _0x598249=Math['max'](_0x2f82d5[0xa6e+0x3*0xb69+-0x2ca9],_0x42c059[0x23c4+0x1*0x1125+-0x13b*0x2b]);this['maxVel']=_0x34619a+_0x2adf37+_0x598249;}this['useCpu']||(this['internalTe'+'x0']=xs(_0x4157fc,_0x119ea0,-0x1*0x8bd+-0x2b8*0x1+0xb76,O_(this['qLocalVelo'+'city'],this['qLocalVelo'+'cityDiv'])),this['internalTe'+'x1']=xs(_0x4157fc,_0x119ea0,-0x24a+-0xba2*0x2+-0x198f*-0x1,O_(this['qVelocity'],this['qVelocityD'+'iv'])),this['internalTe'+'x2']=xs(_0x4157fc,_0x119ea0,-0xe93+-0x1bbe+0x2a52,Bb(this['qRotSpeed'],this['qScale'],this['qScaleDiv'],this['qRotSpeedD'+'iv'],this['qAlphaDiv'])),this['internalTe'+'x3']=xs(_0x4157fc,_0x119ea0,-0x1fab+0x1f*0xa3+0xbef,zb(this['qRadialSpe'+'ed'],this['qRadialSpe'+'edDiv']))),this['colorParam']=xs(_0x4157fc,_0x119ea0,0x1*0x1ecf+0x1*-0x444+0x56*-0x4f,Ub(this['qColor'],this['qAlpha']),_s,-0xb82+0x3c4*-0x1+0x1*0xf47,!(-0x20ec+0xab4+0x58e*0x4));}['_setMateri'+'alTextures'](){this['colorMap']&&(w['call'](()=>{LS(this['colorMap']['format'])&&w['warnOnce']('ParticleEm'+'itter:\x20col'+'orMap\x20text'+'ure\x20['+this['colorMap']['name']+(']\x20is\x20not\x20u'+'sing\x20sRGB\x20'+'format.\x20Pl'+'ease\x20corre'+'ct\x20it\x20for\x20'+'the\x20correc'+'t\x20renderin'+'g.'),this['colorMap']);}),this['material']['setParamet'+'er']('colorMap',this['colorMap']),this['lighting']&&this['normalMap']&&this['material']['setParamet'+'er']('normalMap',this['normalMap']));}['_createMat'+'erial'](){const _0x2f267b=new Nb(this);return _0x2f267b['name']='EmitterMat'+'erial:'+this['node']['name'],_0x2f267b['cull']=bt,_0x2f267b['alphaWrite']=!(0xb28+-0x24b8+0x77*0x37),_0x2f267b['blendType']=this['blendType'],_0x2f267b['depthWrite']=this['depthWrite'],_0x2f267b;}['resetMater'+'ial'](){const _0x574dbe=this['material'];_0x574dbe['setParamet'+'er']('stretch',this['stretch']),this['_isAnimate'+'d']()&&(_0x574dbe['setParamet'+'er']('animTexTil'+'esParams',this['animTilesP'+'arams']),_0x574dbe['setParamet'+'er']('animTexPar'+'ams',this['animParams']),_0x574dbe['setParamet'+'er']('animTexInd'+'exParams',this['animIndexP'+'arams'])),_0x574dbe['setParamet'+'er']('colorMult',this['intensity']),this['useCpu']||(_0x574dbe['setParamet'+'er']('internalTe'+'x0',this['internalTe'+'x0']),_0x574dbe['setParamet'+'er']('internalTe'+'x1',this['internalTe'+'x1']),_0x574dbe['setParamet'+'er']('internalTe'+'x2',this['internalTe'+'x2']),_0x574dbe['setParamet'+'er']('internalTe'+'x3',this['internalTe'+'x3'])),_0x574dbe['setParamet'+'er']('colorParam',this['colorParam']),_0x574dbe['setParamet'+'er']('numParticl'+'es',this['numParticl'+'es']),_0x574dbe['setParamet'+'er']('numParticl'+'esPot',this['numParticl'+'esPot']),_0x574dbe['setParamet'+'er']('lifetime',this['lifetime']),_0x574dbe['setParamet'+'er']('rate',this['rate']),_0x574dbe['setParamet'+'er']('rateDiv',this['rate2']-this['rate']),_0x574dbe['setParamet'+'er']('seed',this['seed']),_0x574dbe['setParamet'+'er']('scaleDivMu'+'lt',this['scaleUMax'][0x9*0x1af+0x1811+-0x3ec*0xa]),_0x574dbe['setParamet'+'er']('alphaDivMu'+'lt',this['alphaUMax'][0x123*-0x9+-0x269b+0x30d6]),_0x574dbe['setParamet'+'er']('radialSpee'+'dDivMult',this['radialSpee'+'dUMax'][0x20e+0x2321*0x1+0x39*-0xa7]),_0x574dbe['setParamet'+'er']('graphNumSa'+'mples',this['precision']),_0x574dbe['setParamet'+'er']('graphSampl'+'eSize',(0x49*-0x44+0x1771+-0x40c)/this['precision']),_0x574dbe['setParamet'+'er']('emitterSca'+'le',new Float32Array([0x114c+-0x2*0x175+-0xe61,0x3ae+-0x253+-0x15a,0x99b*0x1+0x1bb*0x8+-0x1772])),this['pack8']&&(this['_gpuUpdate'+'r']['_setInputB'+'ounds'](),_0x574dbe['setParamet'+'er']('inBoundsSi'+'ze',this['_gpuUpdate'+'r']['inBoundsSi'+'zeUniform']),_0x574dbe['setParamet'+'er']('inBoundsCe'+'nter',this['_gpuUpdate'+'r']['inBoundsCe'+'nterUnifor'+'m']),_0x574dbe['setParamet'+'er']('maxVel',this['maxVel'])),this['wrap']&&this['wrapBounds']&&(this['wrapBounds'+'Uniform'][0x1*-0x2122+-0xe51*0x1+0xfd1*0x3]=this['wrapBounds']['x'],this['wrapBounds'+'Uniform'][-0x22e8+0x3e*0x5d+-0x15*-0x97]=this['wrapBounds']['y'],this['wrapBounds'+'Uniform'][-0x50b+-0x2163+0x2670]=this['wrapBounds']['z'],_0x574dbe['setParamet'+'er']('wrapBounds',this['wrapBounds'+'Uniform'])),this['_setMateri'+'alTextures'](),this['depthSofte'+'ning']>-0x1020+0xb5f*-0x1+0x1b7f&&_0x574dbe['setParamet'+'er']('softening',(-0x456*-0x5+-0x1a1b+-0x46e*-0x1)/(this['depthSofte'+'ning']*this['depthSofte'+'ning']*(0x3*0xb33+-0x2587+-0x229*-0x2))),this['stretch']>-0x9*0x191+0x224b+-0x40a*0x5&&(_0x574dbe['cull']=bt),this['_compParti'+'cleFacePar'+'ams']();}['_compParti'+'cleFacePar'+'ams'](){let _0x5cf82a,_0x2ee7b7;if(this['orientatio'+'n']===Zc)_0x5cf82a=new Float32Array([-0xed*-0x7+0x23b1*0x1+-0x2a2b,-0xca7+0xf1*0x1c+-0xdb5,0x111f+0x25e5+0x2*-0x1b82]),_0x2ee7b7=new Float32Array([0x11*-0x1d7+0x1640+0x907,-0x18eb*0x1+-0x1e66+0x341*0x11,-0x574*-0x5+0x1afb+-0x83*0x6a]);else{let _0x4eac75;this['orientatio'+'n']===aw?_0x4eac75=this['particleNo'+'rmal']['normalize']():_0x4eac75=(this['node']===null?te['IDENTITY']:this['node']['getWorldTr'+'ansform']())['transformV'+'ector'](this['particleNo'+'rmal'])['normalize']();const _0x4baade=new D(-0xa99*-0x2+0x82*-0x1+0x161*-0xf,0x74+-0x240b+0x2397,0x15c0+-0x16d*-0x17+-0x368b*0x1);Math['abs'](_0x4baade['dot'](_0x4eac75))===-0x2326+-0x45b+0x2782&&_0x4baade['set'](0x1*-0x20a3+0x213+0x1e90,-0x5ed+-0x145b+-0x8*-0x349,-0x81f+-0x9c5*-0x2+-0xb6a);const _0x5472b7=new D()['cross'](_0x4eac75,_0x4baade)['normalize']();_0x4baade['cross'](_0x5472b7,_0x4eac75)['normalize'](),_0x5cf82a=new Float32Array([_0x4baade['x'],_0x4baade['y'],_0x4baade['z']]),_0x2ee7b7=new Float32Array([_0x5472b7['x'],_0x5472b7['y'],_0x5472b7['z']]);}this['material']['setParamet'+'er']('faceTangen'+'t',_0x5cf82a),this['material']['setParamet'+'er']('faceBinorm',_0x2ee7b7);}['getVertexI'+'nfo'](){const _0x4e07f4=[];return this['useCpu']?_0x4e07f4['push']({'semantic':Cf,'components':0x4,'type':Ve},{'semantic':$c,'components':0x4,'type':Ve},{'semantic':Ju,'components':0x4,'type':Ve},{'semantic':ep,'components':0x1,'type':Ve},{'semantic':tp,'components':this['useMesh']?0x1*-0x141f+0x1f*-0x91+0x25b2:-0x7a5*0x5+-0x19*0x132+0x441d,'type':Ve}):(_0x4e07f4['push']({'semantic':Cf,'components':0x4,'type':Ve}),this['useMesh']&&_0x4e07f4['push']({'semantic':$c,'components':0x2,'type':Ve})),_0x4e07f4;}['_allocate'](_0xd87f3e){const _0x78fbb0=_0xd87f3e*this['numParticl'+'eVerts'],_0xb66802=_0xd87f3e*this['numParticl'+'eIndices'];if(this['vertexBuff'+'er']===void(0x9*-0x3d6+-0x2cf+-0x1*-0x2555)||this['vertexBuff'+'er']['getNumVert'+'ices']()!==_0x78fbb0){const _0x327b85=this['getVertexI'+'nfo'](),_0x43bdff=new kt(this['graphicsDe'+'vice'],_0x327b85);this['vertexBuff'+'er']=new Ds(this['graphicsDe'+'vice'],_0x43bdff,_0x78fbb0,{'usage':zc}),this['indexBuffe'+'r']=new xr(this['graphicsDe'+'vice'],yr,_0xb66802);const _0x2268ce=new Float32Array(this['vertexBuff'+'er']['lock']());let _0x4338c9,_0x4273b4,_0x55e3a9;if(this['useMesh']){_0x4338c9=new Float32Array(this['mesh']['vertexBuff'+'er']['lock']()),_0x4273b4=_0x4338c9['length']/this['mesh']['vertexBuff'+'er']['numVertice'+'s'];for(let _0x5859c1=-0xfcf+-0x1deb+-0x6*-0x79f;_0x5859c1<this['mesh']['vertexBuff'+'er']['format']['elements']['length'];_0x5859c1++)if(this['mesh']['vertexBuff'+'er']['format']['elements'][_0x5859c1]['name']===is){_0x55e3a9=this['mesh']['vertexBuff'+'er']['format']['elements'][_0x5859c1]['offset']/(-0x55*0x23+0x59*-0x35+0xd0*0x25);break;}}for(let _0x589cc7=-0x1*0xecd+-0x2503+0x33d0;_0x589cc7<_0x78fbb0;_0x589cc7++){const _0x162635=Math['floor'](_0x589cc7/this['numParticl'+'eVerts']);if(this['useMesh']){const _0xa8fd1f=_0x589cc7%this['numParticl'+'eVerts'];_0x2268ce[_0x589cc7*(0x1223*0x1+0x20b6+-0x10f1*0x3)]=_0x4338c9[_0xa8fd1f*_0x4273b4],_0x2268ce[_0x589cc7*(-0xa*0x233+0x6ac+0xf58)+(-0x1*0x1a89+-0x15f9+0x3083)]=_0x4338c9[_0xa8fd1f*_0x4273b4+(0x7*-0x1fa+-0x7*0x372+-0xed*-0x29)],_0x2268ce[_0x589cc7*(-0x2038+0x435+0x1c09*0x1)+(-0x440*0x5+0x5*-0x76+0x3a*0x68)]=_0x4338c9[_0xa8fd1f*_0x4273b4+(-0x187+0x3*-0x539+-0x2de*-0x6)],_0x2268ce[_0x589cc7*(-0x757*0x5+0x24d1+-0x18)+(-0xfc9+0x7*-0x577+0x360d)]=_0x162635,_0x2268ce[_0x589cc7*(0x1*0x1847+-0x4c*-0x2+-0x18d9*0x1)+(-0xcb3+0x60f*0x6+-0x17a3*0x1)]=_0x4338c9[_0xa8fd1f*_0x4273b4+_0x55e3a9+(-0xb9*-0xb+0x1*-0x647+-0x1ac)],_0x2268ce[_0x589cc7*(0x16c3*-0x1+-0x268*-0x7+0x5f1)+(0x23ec+-0x3ac*-0x9+-0x44f3)]=0x156a+0x21b3+-0x371c-_0x4338c9[_0xa8fd1f*_0x4273b4+_0x55e3a9+(-0x2224+-0x25e9+0x480e)];}else{const _0x4a39d2=_0x589cc7%(-0x2512+0x223d+0x2d9);_0x2268ce[_0x589cc7*(0xa85+0xa59+-0x22*0x9d)]=P_[_0x4a39d2][-0x21e*0x4+0x1a78+-0x1*0x1200],_0x2268ce[_0x589cc7*(0x77*-0x49+0x1*0x107d+-0xa*-0x1bf)+(0x10ee+-0x1b24+0xa37)]=P_[_0x4a39d2][0x1da*0x13+0x38d*-0xb+0x3e2],_0x2268ce[_0x589cc7*(-0xaab+-0x664*0x4+-0x9*-0x407)+(0x1d36+-0x137f+0x7*-0x163)]=-0xe2f*-0x1+0x1a36+-0x2865,_0x2268ce[_0x589cc7*(0x2231*-0x1+0x8a+0x21ab)+(0x24fe+0x1*0x21b5+0x15c*-0x34)]=_0x162635;}}this['useCpu']&&(this['vbCPU']=new Float32Array(_0x2268ce),this['vbOld']=new Float32Array(this['vbCPU']['length'])),this['vertexBuff'+'er']['unlock'](),this['useMesh']&&this['mesh']['vertexBuff'+'er']['unlock']();let _0x1fce54=0x22*-0x23+0x1141+-0x1*0xc9b;const _0x13225e=new Uint32Array(this['indexBuffe'+'r']['lock']());if(this['useMesh']){const _0x355845=this['mesh']['indexBuffe'+'r'][0x143f*-0x1+-0x121f*-0x2+-0xf*0x111];_0x4338c9=new Kc[_0x355845['format']](_0x355845['lock']());}for(let _0x5a6f0a=-0x170b+0x10c7+0x644;_0x5a6f0a<_0xd87f3e;_0x5a6f0a++)if(this['useMesh']){for(let _0x146260=0x143a+0x3*-0xfe+-0x5c*0x30;_0x146260<this['numParticl'+'eIndices'];_0x146260++)_0x13225e[_0x5a6f0a*this['numParticl'+'eIndices']+_0x146260]=_0x4338c9[_0x146260]+_0x5a6f0a*this['numParticl'+'eVerts'];}else{const _0x12dc8f=_0x5a6f0a*(0xa4c+-0x1*0x2503+0x1abb);_0x13225e[_0x1fce54++]=_0x12dc8f,_0x13225e[_0x1fce54++]=_0x12dc8f+(0x657*-0x1+-0xbf*-0x11+-0x657),_0x13225e[_0x1fce54++]=_0x12dc8f+(0x643+-0x1*-0xe81+-0x1*0x14c2),_0x13225e[_0x1fce54++]=_0x12dc8f,_0x13225e[_0x1fce54++]=_0x12dc8f+(-0x47*0x15+-0x2036+0x260b),_0x13225e[_0x1fce54++]=_0x12dc8f+(0x8b7*-0x4+0x17ab+0xb34);}this['indexBuffe'+'r']['unlock'](),this['useMesh']&&this['mesh']['indexBuffe'+'r'][0x1*-0x19c7+0x9c4*-0x4+-0x1*-0x40d7]['unlock']();}}['reset'](){if(this['beenReset']=!(0xf2b+-0x3db+-0xb50),this['seed']=Math['random'](),this['material']['setParamet'+'er']('seed',this['seed']),this['useCpu']){for(let _0x38398b=0x1*0x35f+-0x921*0x2+-0xee3*-0x1;_0x38398b<this['particleTe'+'xStart']['length'];_0x38398b++)this['particleTe'+'x'][_0x38398b]=this['particleTe'+'xStart'][_0x38398b];}else this['_setMateri'+'alTextures']();this['resetWorld'+'Bounds'](),this['resetTime']();const _0x279840=this['loop'];this['loop']=!(-0xea0+-0x38*-0x59+-0x4d8),this['addTime'](-0x245f*-0x1+0xe85+-0x32e4,!(0x18d2+-0xdf*0x29+0xae6)),this['loop']=_0x279840,this['preWarm']&&this['prewarm'](this['lifetime']);}['prewarm'](_0x4f96f0){const _0x2c2861=_0x4f96f0/this['lifetime'],_0x3ba10f=Math['min'](Math['floor'](_0x2c2861*this['precision']),this['precision']),_0x4dca04=_0x4f96f0/_0x3ba10f;for(let _0x7e0582=-0x6d2*0x3+-0x49c+-0xc89*-0x2;_0x7e0582<_0x3ba10f;_0x7e0582++)this['addTime'](_0x4dca04,!(0x34c+-0x278+-0x1*0xd3));}['resetTime'](){this['endTime']=Vb(this);}['finishFram'+'e'](){this['useCpu']&&this['vertexBuff'+'er']['unlock']();}['addTime'](_0x102a82,_0x118753){const _0x434100=this['graphicsDe'+'vice'],_0x4a1810=de();if(this['simTimeTot'+'al']+=_0x102a82,this['calculateW'+'orldBounds'](),this['_isAnimate'+'d']()){const _0x36e7e6=this['animTilesP'+'arams'];_0x36e7e6[0x4e3*-0x1+-0xa5f+-0x7*-0x22e]=(-0x1*-0x1413+-0x2238+-0x2*-0x713)/this['animTilesX'],_0x36e7e6[-0x1e74+0x1*0xae1+0x4e5*0x4]=(-0x2065+-0x11b+0x2181)/this['animTilesY'];const _0x1b191a=this['animParams'];_0x1b191a[0x68d+0xfe1+-0xae*0x21]=this['animStartF'+'rame'],_0x1b191a[-0x34e+-0x8e4+0x1*0xc33]=this['animNumFra'+'mes']*this['animSpeed'],_0x1b191a[0x1b5b+0x25b7+-0x4110]=this['animNumFra'+'mes']-(0x1f7*-0xd+0x322*-0x1+0x1cae*0x1),_0x1b191a[0x7c0+-0x26f1+0x1f34]=this['animNumAni'+'mations']-(-0x1787*0x1+0x21b0+-0xa28);const _0x54b910=this['animIndexP'+'arams'];_0x54b910[-0x1*0x264a+0x21a7+0x1*0x4a3]=this['animIndex'],_0x54b910[-0x2609+-0xd*-0x2fb+-0xb5*0x1]=this['randomizeA'+'nimIndex'];}this['scene']&&this['camera']!==this['scene']['_activeCam'+'era']&&(this['camera']=this['scene']['_activeCam'+'era'],this['onChangeCa'+'mera']()),this['emitterSha'+'pe']===ai&&(Ai[-0x9d4+-0x1b31+0x27*0xf3]=this['emitterExt'+'ents']['x']!==-0x758+-0x1*-0x2603+-0x1*0x1eab?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:-0x7*0x46+0x5*0x6e6+-0x2094,Ai[0xd*0x16f+-0x1083+-0x1*0x21f]=this['emitterExt'+'ents']['y']!==0x1*0xd72+-0x1da9+0x1037?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:0xc9d+0x66c+0x1*-0x1309,Ai[0x1f25+0x1d00+-0x3c23]=this['emitterExt'+'ents']['z']!==0x87b+0x25cf*-0x1+0x755*0x4?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:-0x88a*0x1+-0x176a+0x1ff4,this['meshInstan'+'ce']['node']===null?Or['setTRS'](D['ZERO'],le['IDENTITY'],this['emitterExt'+'ents']):Or['setTRS'](D['ZERO'],this['meshInstan'+'ce']['node']['getRotatio'+'n'](),R_['copy'](this['emitterExt'+'ents'])['mul'](this['meshInstan'+'ce']['node']['localScale'])));let _0x5a0844;const _0x1ae029=this['meshInstan'+'ce']['node']===null?D['ONE']:this['meshInstan'+'ce']['node']['localScale'];if(this['emitterSca'+'leUniform'][0x2*0x82a+-0x2531+0x14dd]=_0x1ae029['x'],this['emitterSca'+'leUniform'][-0x172*0x6+0x6c2*0x4+-0x125b]=_0x1ae029['y'],this['emitterSca'+'leUniform'][0x75b+-0x1*-0xd65+-0x3*0x6ea]=_0x1ae029['z'],this['material']['setParamet'+'er']('emitterSca'+'le',this['emitterSca'+'leUniform']),this['localSpace']&&this['meshInstan'+'ce']['node']&&(_0x5a0844=this['meshInstan'+'ce']['node']['getPositio'+'n'](),this['emitterPos'+'Uniform'][0x17dd*0x1+-0x1442*0x1+0xd*-0x47]=_0x5a0844['x'],this['emitterPos'+'Uniform'][-0x1*0xa9f+0x453*-0x9+0x1*0x318b]=_0x5a0844['y'],this['emitterPos'+'Uniform'][0x1760+-0x263*-0xd+-0x3665]=_0x5a0844['z'],this['material']['setParamet'+'er']('emitterPos',this['emitterPos'+'Uniform'])),this['_compParti'+'cleFacePar'+'ams'](),!this['useCpu'])this['_gpuUpdate'+'r']['update'](_0x434100,Or,Ai,_0x102a82,_0x118753);else{const _0xb27510=new Float32Array(this['vertexBuff'+'er']['lock']());this['_cpuUpdate'+'r']['update'](_0xb27510,this['vbToSort'],this['particleTe'+'x'],Or,Ai,_0x5a0844,_0x102a82,_0x118753);}this['loop']||Date['now']()>this['endTime']&&(this['onFinished']&&this['onFinished'](),this['meshInstan'+'ce']['visible']=!(-0x11dd+0x1*-0x14fb+0x26d9)),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['drawOrder']=this['drawOrder']),this['_addTimeTi'+'me']+=de()-_0x4a1810;}['_destroyRe'+'sources'](){var _0x1fd3f5,_0x35cbc5,_0x120d5a,_0x5ad7d6,_0x2fa2ff,_0x156f77,_0x2dd26b,_0x4b156d,_0x5473f6,_0x20f2fb,_0x54af71,_0x4412b5;(_0x1fd3f5=this['particleTe'+'xIN'])==null||_0x1fd3f5['destroy'](),this['particleTe'+'xIN']=null,(_0x35cbc5=this['particleTe'+'xOUT'])==null||_0x35cbc5['destroy'](),this['particleTe'+'xOUT']=null,this['particleTe'+'xStart']&&this['particleTe'+'xStart']['destroy']&&(this['particleTe'+'xStart']['destroy'](),this['particleTe'+'xStart']=null),(_0x120d5a=this['rtParticle'+'TexIN'])==null||_0x120d5a['destroy'](),this['rtParticle'+'TexIN']=null,(_0x5ad7d6=this['rtParticle'+'TexOUT'])==null||_0x5ad7d6['destroy'](),this['rtParticle'+'TexOUT']=null,(_0x2fa2ff=this['internalTe'+'x0'])==null||_0x2fa2ff['destroy'](),this['internalTe'+'x0']=null,(_0x156f77=this['internalTe'+'x1'])==null||_0x156f77['destroy'](),this['internalTe'+'x1']=null,(_0x2dd26b=this['internalTe'+'x2'])==null||_0x2dd26b['destroy'](),this['internalTe'+'x2']=null,(_0x4b156d=this['internalTe'+'x3'])==null||_0x4b156d['destroy'](),this['internalTe'+'x3']=null,(_0x5473f6=this['colorParam'])==null||_0x5473f6['destroy'](),this['colorParam']=null,(_0x20f2fb=this['vertexBuff'+'er'])==null||_0x20f2fb['destroy'](),this['vertexBuff'+'er']=void(-0x2159*0x1+-0x224e+0x17*0x2f1),(_0x54af71=this['indexBuffe'+'r'])==null||_0x54af71['destroy'](),this['indexBuffe'+'r']=void(0xb7b+0x24e2+0x305d*-0x1),(_0x4412b5=this['material'])==null||_0x4412b5['destroy'](),this['material']=null;}['destroy'](){this['camera']=null,this['_destroyRe'+'sources']();}}class Xb extends pa{['generateKe'+'y'](_0x37b51e){var _0x56c5bd;const _0x743be0=_0x37b51e['shaderDesc'],_0xc30c12=_0x743be0['vertexGLSL']?hi(_0x743be0['vertexGLSL']):-0x1*0x132b+-0x1dd*0x3+0x18c2,_0xe9d96e=_0x743be0['fragmentGL'+'SL']?hi(_0x743be0['fragmentGL'+'SL']):-0x1*-0x11d9+-0x1*0x12d5+0x3f*0x4,_0x3f54a8=_0x743be0['vertexWGSL']?hi(_0x743be0['vertexWGSL']):-0x13ca+-0x3*-0x78c+-0x2da*0x1,_0x553669=_0x743be0['fragmentWG'+'SL']?hi(_0x743be0['fragmentWG'+'SL']):-0x1a3*-0x1+0x5af+-0x752,_0x207c51=pa['definesHas'+'h'](_0x37b51e['defines']),_0x274187=((_0x56c5bd=_0x37b51e['shaderChun'+'ks'])==null?void(-0x5cf*-0x5+-0x2*0xe98+0x25*0x1):_0x56c5bd['key'])??'';let _0x2359d7=_0x743be0['uniqueName']+'_'+_0x207c51+'_'+_0xc30c12+'_'+_0xe9d96e+'_'+_0x3f54a8+'_'+_0x553669+'_'+_0x274187;return _0x37b51e['skin']&&(_0x2359d7+='_skin'),_0x37b51e['useInstanc'+'ing']&&(_0x2359d7+='_inst'),_0x37b51e['useMorphPo'+'sition']&&(_0x2359d7+='_morphp'),_0x37b51e['useMorphNo'+'rmal']&&(_0x2359d7+='_morphn'),_0x37b51e['useMorphTe'+'xtureBased'+'Int']&&(_0x2359d7+='_morphi'),_0x2359d7;}['createAttr'+'ibutesDefi'+'nition'](_0x315b85,_0x1d7714){const _0x51cfc5=_0x1d7714['shaderDesc']['attributes'],_0x4c9ac1=_0x51cfc5?{..._0x51cfc5}:void(0xf39*0x1+0x7f0+0x34f*-0x7);_0x1d7714['skin']&&(_0x4c9ac1['vertex_bon'+'eWeights']=gi,_0x4c9ac1['vertex_bon'+'eIndices']=us),(_0x1d7714['useMorphPo'+'sition']||_0x1d7714['useMorphNo'+'rmal'])&&(_0x4c9ac1['morph_vert'+'ex_id']=bn),_0x315b85['attributes']=_0x4c9ac1;}['createVert'+'exDefiniti'+'on'](_0x44899a,_0x1d0207,_0x40addd,_0x45f8a4){const _0x17da27=_0x1d0207['shaderDesc'],_0x474d6f=new Map(_0x40addd);_0x474d6f['set']('transformI'+'nstancingV'+'S','');const _0xade2e2=new Map(_0x1d0207['defines']);_0x1d0207['skin']&&_0xade2e2['set']('SKIN',!(0x1ad7+0x1*-0x1c4c+0x1*0x175)),_0x1d0207['useInstanc'+'ing']&&_0xade2e2['set']('INSTANCING',!(-0x1799+0x1bbd+-0x424)),(_0x1d0207['useMorphPo'+'sition']||_0x1d0207['useMorphNo'+'rmal'])&&(_0xade2e2['set']('MORPHING',!(-0x2*0xb96+-0xbba+-0x22e6*-0x1)),_0x1d0207['useMorphTe'+'xtureBased'+'Int']&&_0xade2e2['set']('MORPHING_I'+'NT',!(-0x126b*-0x2+-0x1c8d*-0x1+-0x4163)),_0x1d0207['useMorphPo'+'sition']&&_0xade2e2['set']('MORPHING_P'+'OSITION',!(-0x42+0x1cbb+-0x1*0x1c79)),_0x1d0207['useMorphNo'+'rmal']&&_0xade2e2['set']('MORPHING_N'+'ORMAL',!(-0x1e5*-0xf+-0x1*0x18c1+0x1d5*-0x2))),_0x44899a['vertexCode']=_0x45f8a4?_0x17da27['vertexWGSL']:_0x17da27['vertexGLSL'],_0x44899a['vertexIncl'+'udes']=_0x474d6f,_0x44899a['vertexDefi'+'nes']=_0xade2e2;}['createFrag'+'mentDefini'+'tion'](_0x5e3d8d,_0x62f077,_0x3d6a97,_0x262d2d){const _0x68f7ca=_0x62f077['shaderDesc'],_0x2e6193=new Map(_0x3d6a97),_0x37f816=new Map(_0x62f077['defines']);_0x5e3d8d['fragmentCo'+'de']=_0x262d2d?_0x68f7ca['fragmentWG'+'SL']:_0x68f7ca['fragmentGL'+'SL'],_0x5e3d8d['fragmentIn'+'cludes']=_0x2e6193,_0x5e3d8d['fragmentDe'+'fines']=_0x37f816;}['createShad'+'erDefiniti'+'on'](_0x30cb99,_0x31b030){var _0x265512;const _0x4454ff=_0x31b030['shaderDesc'],_0x237a13=_0x30cb99['isWebGPU']&&!!_0x4454ff['vertexWGSL']&&!!_0x4454ff['fragmentWG'+'SL']&&(((_0x265512=_0x31b030['shaderChun'+'ks'])==null?void(-0x22ed+-0x3*-0xa52+-0x3f7*-0x1):_0x265512['useWGSL'])??!(-0x1042+-0x2255+-0x59f*-0x9)),_0x358b67={'name':'ShaderMate'+'rial-'+_0x4454ff['uniqueName'],'shaderLanguage':_0x237a13?it:Fe,'fragmentOutputTypes':_0x4454ff['fragmentOu'+'tputTypes'],'meshUniformBufferFormat':_0x4454ff['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x4454ff['meshBindGr'+'oupFormat']},_0x481cb1=_0x237a13?it:Fe,_0x377d36=ih['merge'](Ce['get'](_0x30cb99,_0x481cb1),_0x31b030['shaderChun'+'ks'][_0x481cb1]);return this['createAttr'+'ibutesDefi'+'nition'](_0x358b67,_0x31b030),this['createVert'+'exDefiniti'+'on'](_0x358b67,_0x31b030,_0x377d36,_0x237a13),this['createFrag'+'mentDefini'+'tion'](_0x358b67,_0x31b030,_0x377d36,_0x237a13),Jt['createDefi'+'nition'](_0x30cb99,_0x358b67);}}const qb=new Xb();class Bn extends er{constructor(_0x981486){super(),h(this,'_shaderDes'+'c'),this['shaderDesc']=_0x981486;}set['shaderDesc'](_0x54fe43){if(this['_shaderDes'+'c']=void(0x2e5*-0x4+-0x77*0x26+0x1d3e),_0x54fe43&&(this['_shaderDes'+'c']={'uniqueName':_0x54fe43['uniqueName'],'attributes':_0x54fe43['attributes'],'fragmentOutputTypes':_0x54fe43['fragmentOu'+'tputTypes'],'vertexGLSL':_0x54fe43['vertexGLSL'],'fragmentGLSL':_0x54fe43['fragmentGL'+'SL'],'vertexWGSL':_0x54fe43['vertexWGSL'],'fragmentWGSL':_0x54fe43['fragmentWG'+'SL']},_0x54fe43['vertexCode']||_0x54fe43['fragmentCo'+'de']||_0x54fe43['shaderLang'+'uage'])){w['deprecated']('ShaderMate'+'rial\x20['+_0x54fe43['uniqueName']+(']:\x20vertexC'+'ode,\x20fragm'+'entCode\x20an'+'d\x20shaderLa'+'nguage\x20pro'+'perties\x20of'+'\x20ShaderDes'+'c\x20is\x20depre'+'cated.\x20Use'+'\x20vertexGLS'+'L,\x20fragmen'+'tGLSL,\x20ver'+'texWGSL\x20or'+'\x20fragmentW'+'GSL\x20instea'+'d.'));const _0x3c3aad=_0x54fe43['shaderLang'+'uage']??Fe;_0x3c3aad===Fe?(this['_shaderDes'+'c']['vertexGLSL']=_0x54fe43['vertexCode'],this['_shaderDes'+'c']['fragmentGL'+'SL']=_0x54fe43['fragmentCo'+'de']):_0x3c3aad===it&&(this['_shaderDes'+'c']['vertexWGSL']=_0x54fe43['vertexCode'],this['_shaderDes'+'c']['fragmentWG'+'SL']=_0x54fe43['fragmentCo'+'de']);}this['clearVaria'+'nts']();}get['shaderDesc'](){return this['_shaderDes'+'c'];}['copy'](_0x11ddfb){return super['copy'](_0x11ddfb),this['shaderDesc']=_0x11ddfb['shaderDesc'],this;}['getShaderV'+'ariant'](_0x3207be){const {objDefs:_0x56b6a9}=_0x3207be,_0x5ac971={'defines':$t['getCoreDef'+'ines'](this,_0x3207be),'skin':(_0x56b6a9&qo)!==0x1c31*0x1+-0xaad+-0x1184,'useInstancing':(_0x56b6a9&jo)!==-0x93*-0x1f+-0x2*-0x93f+0x244b*-0x1,'useMorphPosition':(_0x56b6a9&Yo)!==-0x1*-0x81a+0xc6d*0x3+0x1*-0x2d61,'useMorphNormal':(_0x56b6a9&Ko)!==-0x2b*-0x7f+0x31d*-0x5+-0x9*0xa4,'useMorphTextureBasedInt':(_0x56b6a9&Zo)!==-0x16fe+-0x13d*-0x11+0x1f1,'pass':_0x3207be['pass'],'gamma':_0x3207be['cameraShad'+'erParams']['shaderOutp'+'utGamma'],'toneMapping':_0x3207be['cameraShad'+'erParams']['toneMappin'+'g'],'fog':_0x3207be['cameraShad'+'erParams']['fog'],'shaderDesc':this['shaderDesc'],'shaderChunks':this['shaderChun'+'ks']},_0x14543c=new rd(_0x3207be['viewUnifor'+'mFormat'],_0x3207be['viewBindGr'+'oupFormat'],_0x3207be['vertexForm'+'at']),_0x24e68b=Nn(_0x3207be['device']);return _0x24e68b['register']('shader-mat'+'erial',qb),_0x24e68b['getProgram']('shader-mat'+'erial',_0x5ac971,_0x14543c,this['userId']);}}const Yy=(_0x2ff1d7,_0x3aecf6)=>{const _0x551f8b=_0x3aecf6['length']/(-0x1*-0x19f1+-0x232*0xd+0x29c),_0xd9bd8c=_0x2ff1d7['length']/(-0x1*0x156c+0x1939+0x5*-0xc2),_0x233dc4=new D(),_0x2309e0=new D(),_0x2b8b93=new D(),_0x37b8fc=new D(),_0x47f234=new D(),_0x3d9c00=new D(),_0x48e51d=[];for(let _0x35927f=-0x2333+0x9a*-0xd+0x2b05;_0x35927f<_0x2ff1d7['length'];_0x35927f++)_0x48e51d[_0x35927f]=0x52d*0x5+0xb*-0xf2+0x529*-0x3;for(let _0x16699f=-0x3bc+0x84a+-0x48e;_0x16699f<_0x551f8b;_0x16699f++){const _0x4bb086=_0x3aecf6[_0x16699f*(-0x1c7*0x1+-0xb3e+-0x8*-0x1a1)],_0x4643f0=_0x3aecf6[_0x16699f*(-0x1a*-0x107+-0x1*-0x2596+-0x4049)+(-0x11*-0x1+0x1f0d+-0x1f1d)],_0x3b3483=_0x3aecf6[_0x16699f*(0x425*0x2+0xe19+-0x598*0x4)+(0x1aa3+0x1*0x7cd+0x6*-0x5bd)];_0x233dc4['set'](_0x2ff1d7[_0x4bb086*(-0x179+-0x60b+-0x29*-0x2f)],_0x2ff1d7[_0x4bb086*(0x1ade+-0x1730+0x3*-0x139)+(-0x10cf*-0x1+-0x1ef7*0x1+0xe29*0x1)],_0x2ff1d7[_0x4bb086*(-0xb7a+0xa7*-0x8+-0x7*-0x263)+(0x1*0x2468+-0xf91+-0x1*0x14d5)]),_0x2309e0['set'](_0x2ff1d7[_0x4643f0*(0x1836+-0x2097+0x864)],_0x2ff1d7[_0x4643f0*(-0x470+-0x33f*0x1+0x7b2)+(0xde*0x12+-0x5*0x589+0x2*0x609)],_0x2ff1d7[_0x4643f0*(-0x1*0x184d+-0x1*-0xbb9+0xb*0x125)+(0x1*0xa1f+-0x59*0x5+-0x860)]),_0x2b8b93['set'](_0x2ff1d7[_0x3b3483*(0x11d6*0x1+-0x7*-0x32b+-0x2800)],_0x2ff1d7[_0x3b3483*(-0x215d+0x14f7+0x423*0x3)+(-0x13ad+0x82+0x132c)],_0x2ff1d7[_0x3b3483*(0x17e2*-0x1+-0xb42*0x1+-0x2327*-0x1)+(-0xb87+-0x20e3*0x1+0x1636*0x2)]),_0x37b8fc['sub2'](_0x2309e0,_0x233dc4),_0x47f234['sub2'](_0x2b8b93,_0x233dc4),_0x3d9c00['cross'](_0x37b8fc,_0x47f234)['normalize'](),_0x48e51d[_0x4bb086*(0x1*-0xafb+-0x269b+0x3199)]+=_0x3d9c00['x'],_0x48e51d[_0x4bb086*(0x1085+-0x580+0x2*-0x581)+(0x324+-0x1d1c+0x19f9)]+=_0x3d9c00['y'],_0x48e51d[_0x4bb086*(0x13b2*0x1+-0x24e*0x1+-0x1161)+(-0xe07+0xd1a+-0x1*-0xef)]+=_0x3d9c00['z'],_0x48e51d[_0x4643f0*(0x5*0x6ce+-0x107d+-0x1186)]+=_0x3d9c00['x'],_0x48e51d[_0x4643f0*(0x20*0xc+0x763+0x2*-0x470)+(0x1*0x210a+0xa*0x12c+-0x2cc1)]+=_0x3d9c00['y'],_0x48e51d[_0x4643f0*(0x17*-0xb3+0xca0*0x2+-0x928)+(0x1*0xd44+-0x1*0x1235+-0xb5*-0x7)]+=_0x3d9c00['z'],_0x48e51d[_0x3b3483*(0x1*0x1419+-0x445+-0xfd1)]+=_0x3d9c00['x'],_0x48e51d[_0x3b3483*(-0x1eac+-0x12d6+-0x3185*-0x1)+(0x2*-0x5f7+-0x148*-0x19+0xf*-0x157)]+=_0x3d9c00['y'],_0x48e51d[_0x3b3483*(0x195*0x2+0x3ad+-0x6d4)+(-0x22de+0x28*-0xe6+0x2368*0x2)]+=_0x3d9c00['z'];}for(let _0x278bc3=0xaf7+0x49*0x75+-0x162a*0x2;_0x278bc3<_0xd9bd8c;_0x278bc3++){const _0x35ade1=_0x48e51d[_0x278bc3*(0x9d7*0x2+0x3db*-0x1+-0x7e8*0x2)],_0x5d5732=_0x48e51d[_0x278bc3*(-0x18f1+-0x1a1d+0x3311)+(0xb7+-0x82d+-0x3*-0x27d)],_0x81dce2=_0x48e51d[_0x278bc3*(0x776+-0x11*0x189+0x12a6)+(0x1*-0x20a2+0x1bc1+0x1*0x4e3)],_0x186d8e=(-0x103*0x10+0x264b+-0x161a*0x1)/Math['sqrt'](_0x35ade1*_0x35ade1+_0x5d5732*_0x5d5732+_0x81dce2*_0x81dce2);_0x48e51d[_0x278bc3*(0x1300+0xe12+-0x5d*0x5b)]*=_0x186d8e,_0x48e51d[_0x278bc3*(0x1e3+-0x22+-0x1be)+(0xb25+-0x54b*0x1+-0x5d9)]*=_0x186d8e,_0x48e51d[_0x278bc3*(0x3*-0x5cf+0x1c64*-0x1+0x2dd4)+(-0x1175+-0x1b*-0xa9+-0x1*0x5c)]*=_0x186d8e;}return _0x48e51d;},br=(_0x5b042a,_0x148c2c,_0xeda7e0,_0x13a8ea)=>{const _0xb151a5=_0x13a8ea['length']/(-0x17b9+-0x2*0xede+0x1d*0x1d8),_0x17299a=_0x5b042a['length']/(-0x176e+0x1*0x1687+-0xd*-0x12),_0x58b92e=new D(),_0x2c5a3d=new D(),_0x191977=new D(),_0x1ed982=new J(),_0x294996=new J(),_0x403d64=new J(),_0x5a52f2=new D(),_0x27b517=new D(),_0x32516f=new Float32Array(_0x17299a*(-0x53+0x1*-0x10cf+0x1125)),_0x16bcf9=new Float32Array(_0x17299a*(-0xa7*0x28+-0x3cd*-0x2+0x1281)),_0xdaa78=[];for(let _0x3e62ce=-0x1244+0x10f5*-0x2+-0x2*-0x1a17;_0x3e62ce<_0xb151a5;_0x3e62ce++){const _0x25d76e=_0x13a8ea[_0x3e62ce*(0x2705+-0x1e23*-0x1+-0x4525)],_0x3f3dd1=_0x13a8ea[_0x3e62ce*(-0x1*0x95+-0xcb2+0xd4a)+(0x1*-0x142d+0x329+0x1105)],_0x52c58a=_0x13a8ea[_0x3e62ce*(-0x2*-0x4e+-0x191c+0x1883)+(0x738+0x2*0x1235+-0xae8*0x4)];_0x58b92e['set'](_0x5b042a[_0x25d76e*(0x1*0x397+0x3*0xa3f+-0x2251)],_0x5b042a[_0x25d76e*(0x15df+0xf70+-0x254c)+(-0x1bc1+0xc4d+0xf75)],_0x5b042a[_0x25d76e*(0x128a+0x8c0+-0x1b47)+(-0x1b06+0x77c*0x2+0x304*0x4)]),_0x2c5a3d['set'](_0x5b042a[_0x3f3dd1*(0xb*0x345+0x7c0*0x3+-0x3b34)],_0x5b042a[_0x3f3dd1*(0x5*0x437+-0x1fb7+0xaa7)+(0x2*0xc2a+-0x21de+-0x98b*-0x1)],_0x5b042a[_0x3f3dd1*(-0x1591*0x1+-0xeb5+0x2449)+(0x492+-0x1*-0x1085+0x1515*-0x1)]),_0x191977['set'](_0x5b042a[_0x52c58a*(-0x1d*-0xbf+-0x15a2+0x2)],_0x5b042a[_0x52c58a*(0x10aa+-0x1018+-0x8f)+(-0x998+0xb9+0x8e0)],_0x5b042a[_0x52c58a*(0x5e7*-0x1+-0x572*-0x1+-0x1*-0x78)+(-0xaf1*0x2+-0x1*-0x9ae+0xc36)]),_0x1ed982['set'](_0xeda7e0[_0x25d76e*(-0x11c5+-0x11c5+0x238c)],_0xeda7e0[_0x25d76e*(0x1047+0x1*0x2697+-0x36dc)+(0x19a0+-0x16f*-0x5+-0x20ca)]),_0x294996['set'](_0xeda7e0[_0x3f3dd1*(0x22*-0xb8+-0x2*-0xfe6+-0x75a)],_0xeda7e0[_0x3f3dd1*(0xf*-0xb6+0x261c*-0x1+0x1be*0x1c)+(0xba6+-0x156+-0xa4f)]),_0x403d64['set'](_0xeda7e0[_0x52c58a*(0xceb+0x269e+-0x3387)],_0xeda7e0[_0x52c58a*(0x1933*0x1+-0x4a*-0x6b+-0x381f*0x1)+(-0x1f*-0x35+-0xb*0x251+0x1311)]);const _0xe934bb=_0x2c5a3d['x']-_0x58b92e['x'],_0x14e9a8=_0x191977['x']-_0x58b92e['x'],_0x2dc6f8=_0x2c5a3d['y']-_0x58b92e['y'],_0x430af2=_0x191977['y']-_0x58b92e['y'],_0x3e3d03=_0x2c5a3d['z']-_0x58b92e['z'],_0x40b16f=_0x191977['z']-_0x58b92e['z'],_0x261143=_0x294996['x']-_0x1ed982['x'],_0x55d309=_0x403d64['x']-_0x1ed982['x'],_0x54c073=_0x294996['y']-_0x1ed982['y'],_0x48183d=_0x403d64['y']-_0x1ed982['y'],_0x38150d=_0x261143*_0x48183d-_0x55d309*_0x54c073;if(_0x38150d===0x9a7+0x2433+-0x2dda)_0x5a52f2['set'](-0x3*0xb91+-0x1fa2+-0x1*-0x4255,0x2*0x248+0x675+-0xb04,0x23bd+0x1d1+-0x258e),_0x27b517['set'](-0x195f+-0x159*-0xd+0x1*0x7db,-0xad*0x22+-0xa88+-0x10c1*-0x2,-0xcc6+0x1*0xbce+0xf8);else{const _0x2ad97b=(-0x71*-0x50+0x7*0x2c5+-0x36b2)/_0x38150d;_0x5a52f2['set']((_0x48183d*_0xe934bb-_0x54c073*_0x14e9a8)*_0x2ad97b,(_0x48183d*_0x2dc6f8-_0x54c073*_0x430af2)*_0x2ad97b,(_0x48183d*_0x3e3d03-_0x54c073*_0x40b16f)*_0x2ad97b),_0x27b517['set']((_0x261143*_0x14e9a8-_0x55d309*_0xe934bb)*_0x2ad97b,(_0x261143*_0x430af2-_0x55d309*_0x2dc6f8)*_0x2ad97b,(_0x261143*_0x40b16f-_0x55d309*_0x3e3d03)*_0x2ad97b);}_0x32516f[_0x25d76e*(0x4e4*0x6+0x6*0x5c6+0x35*-0x135)+(-0x25f3+-0xa8b*0x2+0x3b09)]+=_0x5a52f2['x'],_0x32516f[_0x25d76e*(0x1*0xa8f+0x186e+-0x1*0x22fa)+(-0x1050+0x105e*-0x1+-0x1*-0x20af)]+=_0x5a52f2['y'],_0x32516f[_0x25d76e*(0x1*-0x19db+-0xa*-0x37+0x17b8)+(-0x974+-0x194*-0x2+0x64e*0x1)]+=_0x5a52f2['z'],_0x32516f[_0x3f3dd1*(-0x116a*-0x1+-0x3c*0xa1+-0xf*-0x15b)+(0x1*-0x110c+0xe55+0x2b7)]+=_0x5a52f2['x'],_0x32516f[_0x3f3dd1*(0x2a*-0x4b+-0x1*0x2cf+0xf20)+(0xca*0x4+-0x257a+0x2253)]+=_0x5a52f2['y'],_0x32516f[_0x3f3dd1*(0x83f+0x67*0x29+0x18bb*-0x1)+(0x23cb+-0x9d*0x38+-0x171)]+=_0x5a52f2['z'],_0x32516f[_0x52c58a*(-0x1a4+0x1*0x1b83+0x4*-0x677)+(0xd84+0x1dda+-0x356*0xd)]+=_0x5a52f2['x'],_0x32516f[_0x52c58a*(-0x1013*0x2+-0x22e2+0x773*0x9)+(0x7*-0x4d4+0x11e3+-0x7*-0x246)]+=_0x5a52f2['y'],_0x32516f[_0x52c58a*(0xb52+-0x1*0x1c4b+0x1*0x10fc)+(0x22e2*0x1+-0x77c*0x4+-0x4f0)]+=_0x5a52f2['z'],_0x16bcf9[_0x25d76e*(0x5*-0x49d+0x3fa*0x2+0xf20)+(0x19fe+0xfc2*0x2+-0x3982)]+=_0x27b517['x'],_0x16bcf9[_0x25d76e*(-0x2e3*0x8+0x21*0x3d+0xf3e*0x1)+(0xc87+-0x1*0xb7+-0xbcf)]+=_0x27b517['y'],_0x16bcf9[_0x25d76e*(-0x25b4+-0x1*0x14a1+0x3a58)+(-0x559*-0x1+-0x4a*0x7+0x11b*-0x3)]+=_0x27b517['z'],_0x16bcf9[_0x3f3dd1*(0x1062+0xf1d+-0x1f7c)+(0x315+0x1db+-0x2*0x278)]+=_0x27b517['x'],_0x16bcf9[_0x3f3dd1*(0x4b3*0x1+-0x1f2b+0x1a7b)+(-0x63*0x1f+-0x7b2*0x1+0x150*0xf)]+=_0x27b517['y'],_0x16bcf9[_0x3f3dd1*(-0x17e1+0x1221+0x5c3)+(0x2662+-0x2621+-0x3f)]+=_0x27b517['z'],_0x16bcf9[_0x52c58a*(0x133*0x14+0x2617+0x1*-0x3e10)+(-0x1877+-0x26d7+0x3*0x151a)]+=_0x27b517['x'],_0x16bcf9[_0x52c58a*(0x142f*-0x1+0x1f*0x9d+0x12f)+(-0xf1*0x2+0x2344+-0x2161)]+=_0x27b517['y'],_0x16bcf9[_0x52c58a*(0x1c9*-0x13+-0x195f+0x3b4d)+(-0x1*-0x25e3+-0x111*0x19+-0xb38)]+=_0x27b517['z'];}const _0x4f44f6=new D(),_0x6b3add=new D(),_0x3fc73f=new D(),_0x30e975=new D();for(let _0x519da6=-0x4a0+0x5*0x1a3+-0x1*0x38f;_0x519da6<_0x17299a;_0x519da6++){_0x3fc73f['set'](_0x148c2c[_0x519da6*(0x2071*-0x1+-0x1*0x537+0x25ab)],_0x148c2c[_0x519da6*(-0x21be+-0xdbf*-0x2+0x643)+(-0xa*0x133+-0x3dd*-0x4+0x1*-0x375)],_0x148c2c[_0x519da6*(0x273*-0x5+-0x1c*-0xc5+-0x94a)+(0x121+-0x125b*0x1+0x44f*0x4)]),_0x4f44f6['set'](_0x32516f[_0x519da6*(0x151*0x1d+0x182c+-0x3e56)],_0x32516f[_0x519da6*(-0x869*-0x2+0x1*-0x1d1b+0xc4c*0x1)+(-0xd7*0xd+-0x1655+0x2141)],_0x32516f[_0x519da6*(-0x29*0xe3+0x3*-0x6cd+0x38c5)+(0x5*0x12b+-0x1*-0x1123+-0x16f8)]),_0x6b3add['set'](_0x16bcf9[_0x519da6*(0xb69*0x3+0x1031+-0x3269)],_0x16bcf9[_0x519da6*(-0x49+0x7c6+-0x77a)+(0x1e0c+0x28d*-0x7+-0x9c*0x14)],_0x16bcf9[_0x519da6*(0x2108+-0xbc2*0x1+0x1*-0x1543)+(0x2*-0x49f+0x7*-0x15a+0x12b6)]);const _0x4c6cc7=_0x3fc73f['dot'](_0x4f44f6);_0x30e975['copy'](_0x3fc73f)['mulScalar'](_0x4c6cc7),_0x30e975['sub2'](_0x4f44f6,_0x30e975)['normalize'](),_0xdaa78[_0x519da6*(0x7*-0x565+0x1*-0x98b+0x2*0x17a9)]=_0x30e975['x'],_0xdaa78[_0x519da6*(-0xdf4+-0x20e0+-0x2*-0x176c)+(0x114+0xa8a+0x1*-0xb9d)]=_0x30e975['y'],_0xdaa78[_0x519da6*(-0x116*0x10+-0x36f+-0x3*-0x6f1)+(-0x1228+0x11*-0x1b1+0x2eeb)]=_0x30e975['z'],_0x30e975['cross'](_0x3fc73f,_0x4f44f6),_0xdaa78[_0x519da6*(0x1b70+0x1a5*0x16+-0x48b*0xe)+(-0x78f+0x1ffc+-0x186a)]=_0x30e975['dot'](_0x6b3add)<0x1a96+0x1744*-0x1+0x19*-0x22?-(-0x5*-0x3fa+0x42*-0x6+0x13*-0xf7):0xa2d+-0x120b*0x2+0x19ea;}return _0xdaa78;};class ga{constructor(){h(this,'positions'),h(this,'normals'),h(this,'colors'),h(this,'uvs'),h(this,'uvs1'),h(this,'blendIndic'+'es'),h(this,'blendWeigh'+'ts'),h(this,'tangents'),h(this,'indices');}['calculateN'+'ormals'](){w['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),w['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['normals']=Yy(this['positions'],this['indices']);}['calculateT'+'angents'](){w['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),w['assert'](this['normals'],'Geometry\x20m'+'ust\x20have\x20n'+'ormals\x20set'),w['assert'](this['uvs'],'Geometry\x20m'+'ust\x20have\x20u'+'vs\x20set'),w['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['tangents']=br(this['positions'],this['normals'],this['uvs'],this['indices']);}}const Gf=(0x17*-0x6b+-0xa78+0x157*0xf)/(0xa1*-0x15+-0x2238+-0x989*-0x5),F_=0x1f78+0xfe4+-0x2f5b-Gf*(0x12e3*-0x1+0x2510+-0x122b);class Hf extends ga{constructor(_0xf046d6={}){super();const _0x11d7f9=_0xf046d6['halfExtent'+'s']??new D(-0x10*-0x21+0x9be+-0x2*0x5e7+0.5,-0x16a6*-0x1+0x42*0x1a+-0x1d5a+0.5,0x14f+-0x1b1d+0x19ce+0.5),_0x360db5=_0xf046d6['widthSegme'+'nts']??0x4f9*-0x3+-0x1*0xc77+-0x7b*-0x39,_0xf8f490=_0xf046d6['lengthSegm'+'ents']??0x1347+-0x524*0x6+0xb92,_0x4313bd=_0xf046d6['heightSegm'+'ents']??-0xe5d+0x3*0xb7+0xc39,_0x179992=_0xf046d6['yOffset']??-0x31d*-0x7+-0x25*-0xf9+-0x39c8,_0x5e3c0b=-_0x11d7f9['y']+_0x179992,_0x46cdef=_0x11d7f9['y']+_0x179992,_0x2d9c96=[new D(-_0x11d7f9['x'],_0x5e3c0b,_0x11d7f9['z']),new D(_0x11d7f9['x'],_0x5e3c0b,_0x11d7f9['z']),new D(_0x11d7f9['x'],_0x46cdef,_0x11d7f9['z']),new D(-_0x11d7f9['x'],_0x46cdef,_0x11d7f9['z']),new D(_0x11d7f9['x'],_0x5e3c0b,-_0x11d7f9['z']),new D(-_0x11d7f9['x'],_0x5e3c0b,-_0x11d7f9['z']),new D(-_0x11d7f9['x'],_0x46cdef,-_0x11d7f9['z']),new D(_0x11d7f9['x'],_0x46cdef,-_0x11d7f9['z'])],_0x1e0cd8=[[0x2b*0x2+0xb*0x53+-0x3e7,-0x1a0b*0x1+0xbd+0x194f,-0x139f+0x1*0xad3+0x8cf],[0x1e16+0x16*-0xc2+-0xd66,-0xd71+0x735+0x641*0x1,-0x4*0x7a7+-0xfb0*-0x2+-0xbd],[0x2554+-0x1*0x105c+-0x14f5,0x1ebc*0x1+0x12b9*-0x1+-0x1b7*0x7,-0x12*0x139+0x1116+0x3*0x1a6],[-0x1*-0x1fb3+-0x1b*0x3+-0x1*0x1f61,-0x4f*0x49+-0x910+0x1f97*0x1,0x1370+0x1*-0x232d+0xfc1],[-0x21e5+-0xf*0xa8+0x2bbe,-0x1*-0x1543+-0x70*0x25+-0x50f,0x6dd*0x1+-0xe01+0x726],[0xda1+-0x1c09+0xe6d,-0x20be+-0xbaf*-0x2+0xc8*0xc,-0x4*-0x836+0x1e21+-0x125*0x37]],_0xe9336=[[-0x47*0x1f+0x6c3+0x1d6,0x1ca*-0xf+0x25ee+-0xa*0x11c,-0x370+-0x224d+0x25be],[-0xc8d+0x11*0x44+0xbb*0xb,0x117*-0x1+-0x1bf2+0x1d09,-(0x4fe+0xf83+0x20*-0xa4)],[-0x2*-0x6d0+0x16fa+-0x249a,-0x19*0x4+0x1d9*0x7+0xc8a*-0x1,-0x23b0+-0x213d+0x44ed],[-0x293*-0x3+0x1c4a+-0x2403,-(0x9ce+-0x6c7+0x1*-0x306),0x26e5+0xb*-0x12b+-0x1a0c],[0x27*-0x2e+0x2b*0x27+-0x76*-0x1,-0xf3c+0x25a6*-0x1+0x34e2,0x1*-0x230f+0x3b*-0x3b+0x30a8],[-(0x27a+-0x14d8+0x125f),0x16b4+0x29*0x47+-0x2213,0x2248+0x30f+-0x2557]],_0xbb1387={'FRONT':0x0,'BACK':0x1,'TOP':0x2,'BOTTOM':0x3,'RIGHT':0x4,'LEFT':0x5},_0x2fcda2=[],_0x16339f=[],_0x2a2117=[],_0x17abcd=[];let _0xe95d4b=-0x413*0x9+0xe*-0x1dc+-0x8f5*-0x7;const _0x3f859f=(_0x23fdc0,_0x14207e,_0x58e82c)=>{const _0x153127=new D(),_0x19c38a=new D(),_0xc3ea44=new D(),_0x3b9d01=new D();for(let _0x4e5baa=-0x2*0x40f+-0xca*-0x6+0x362*0x1;_0x4e5baa<=_0x14207e;_0x4e5baa++)for(let _0x415575=0x386*-0x9+0x674*0x3+0x6*0x20f;_0x415575<=_0x58e82c;_0x415575++){_0x153127['lerp'](_0x2d9c96[_0x1e0cd8[_0x23fdc0][-0xe*-0x55+-0x1e8d+0x1*0x19e7]],_0x2d9c96[_0x1e0cd8[_0x23fdc0][-0x1c08+0x3*-0x8+0x13*0x17b]],_0x4e5baa/_0x14207e),_0x19c38a['lerp'](_0x2d9c96[_0x1e0cd8[_0x23fdc0][0x22ca+-0x1d50+-0x1*0x57a]],_0x2d9c96[_0x1e0cd8[_0x23fdc0][0x177+-0x16e7+0x12*0x131]],_0x415575/_0x58e82c),_0xc3ea44['sub2'](_0x19c38a,_0x2d9c96[_0x1e0cd8[_0x23fdc0][-0x1572+0x1b92+-0x620]]),_0x3b9d01['add2'](_0x153127,_0xc3ea44);let _0x3403bb=_0x4e5baa/_0x14207e,_0x366648=_0x415575/_0x58e82c;_0x2fcda2['push'](_0x3b9d01['x'],_0x3b9d01['y'],_0x3b9d01['z']),_0x16339f['push'](_0xe9336[_0x23fdc0][-0x2f*0x94+-0x1aed*0x1+-0x1*-0x3619],_0xe9336[_0x23fdc0][-0x1*0xfa+-0x1be7*-0x1+-0x1aec],_0xe9336[_0x23fdc0][0x6b*0x11+0x1916+-0x6b*0x4d]),_0x2a2117['push'](_0x3403bb,-0x3*0x79d+-0x1a1*-0x7+0xb71-_0x366648),_0x3403bb=_0x3403bb*F_+Gf,_0x366648=_0x366648*F_+Gf,_0x3403bb/=0x8d9+0xf65+-0x183b,_0x366648/=-0x145e*-0x1+0x1645+-0x2aa0,_0x3403bb+=_0x23fdc0%(-0x1*-0x1d5c+0x1e29+-0x3b82)/(-0x2fa*0x1+-0x1cdb+0x7f6*0x4),_0x366648+=Math['floor'](_0x23fdc0/(-0x16aa+0x1dae+-0x701))/(-0x6b*-0x11+-0x1915+0x399*0x5),_0x4e5baa<_0x14207e&&_0x415575<_0x58e82c&&(_0x17abcd['push'](_0xe95d4b+_0x58e82c+(0xfb*-0x12+-0x15*-0x33+0xd78),_0xe95d4b+(-0x1186*-0x2+-0x254b*-0x1+-0x2f*0x18a),_0xe95d4b),_0x17abcd['push'](_0xe95d4b+_0x58e82c+(-0xcd*0x5+-0x1473+-0x3*-0x827),_0xe95d4b+_0x58e82c+(0x1863+0x1db5+0x3dd*-0xe),_0xe95d4b+(0x1c11+0x2560+-0x105c*0x4))),_0xe95d4b++;}};_0x3f859f(_0xbb1387['FRONT'],_0x360db5,_0x4313bd),_0x3f859f(_0xbb1387['BACK'],_0x360db5,_0x4313bd),_0x3f859f(_0xbb1387['TOP'],_0x360db5,_0xf8f490),_0x3f859f(_0xbb1387['BOTTOM'],_0x360db5,_0xf8f490),_0x3f859f(_0xbb1387['RIGHT'],_0xf8f490,_0x4313bd),_0x3f859f(_0xbb1387['LEFT'],_0xf8f490,_0x4313bd),this['positions']=_0x2fcda2,this['normals']=_0x16339f,this['uvs']=_0x2a2117,this['uvs1']=_0x2a2117,this['indices']=_0x17abcd,_0xf046d6['calculateT'+'angents']&&(this['tangents']=br(_0x2fcda2,_0x16339f,_0x2a2117,_0x17abcd));}}class Hp extends ga{constructor(_0x19e0c9={}){super();const _0x548802=_0x19e0c9['radius']??0x1633*-0x1+-0xda9+0x23dc+0.5,_0x2383da=_0x19e0c9['latitudeBa'+'nds']??-0x25f1+0x20a6+0x55b,_0x1ce71=_0x19e0c9['longitudeB'+'ands']??-0xea+-0x1ac9+0x1bc3,_0x4ab202=[],_0x3ccbe6=[],_0x4512ba=[],_0x5788d8=[];for(let _0x589165=-0x3*0xa51+0x2*0xe13+-0x2cd*-0x1;_0x589165<=_0x2383da;_0x589165++){const _0x477a8e=_0x589165*Math['PI']/_0x2383da,_0x45db25=Math['sin'](_0x477a8e),_0x4db9da=Math['cos'](_0x477a8e);for(let _0x11d63b=-0x64d*-0x3+0x189e+-0x2b85;_0x11d63b<=_0x1ce71;_0x11d63b++){const _0x218f1a=_0x11d63b*(-0x1f6*0xb+-0x164f+0x2be3)*Math['PI']/_0x1ce71-Math['PI']/(0x1be8+-0x3d4+-0x4e*0x4f),_0x4ee7b3=Math['sin'](_0x218f1a),_0x4219bb=Math['cos'](_0x218f1a)*_0x45db25,_0x1b39e7=_0x4db9da,_0x4b777d=_0x4ee7b3*_0x45db25,_0x48bed9=-0x17*-0x139+-0x2*0xcee+-0x242-_0x11d63b/_0x1ce71,_0x71ea0d=-0x7*0x5b+0x1ddd+-0x1b5f-_0x589165/_0x2383da;_0x4ab202['push'](_0x4219bb*_0x548802,_0x1b39e7*_0x548802,_0x4b777d*_0x548802),_0x3ccbe6['push'](_0x4219bb,_0x1b39e7,_0x4b777d),_0x4512ba['push'](_0x48bed9,-0x1*-0x44d+-0x2e3+-0x169-_0x71ea0d);}}for(let _0xee14ea=0x56*-0x51+0x1*0x2665+-0xb2f;_0xee14ea<_0x2383da;++_0xee14ea)for(let _0x47b975=0x1d3e+-0x2*-0x580+-0x283e;_0x47b975<_0x1ce71;++_0x47b975){const _0x3d9b18=_0xee14ea*(_0x1ce71+(-0x53*0x71+-0x14*-0x166+-0x6*-0x172))+_0x47b975,_0x29910a=_0x3d9b18+_0x1ce71+(0x41b*0x8+0x4e1*-0x5+0x2e*-0x2f);_0x5788d8['push'](_0x3d9b18+(-0x306*-0x7+0x65c+-0x1b85*0x1),_0x29910a,_0x3d9b18),_0x5788d8['push'](_0x3d9b18+(0x135a+-0x16d3+0x2*0x1bd),_0x29910a+(0x1*-0xf6b+-0x2*-0xeff+-0xe92),_0x29910a);}this['positions']=_0x4ab202,this['normals']=_0x3ccbe6,this['uvs']=_0x4512ba,this['uvs1']=_0x4512ba,this['indices']=_0x5788d8,_0x19e0c9['calculateT'+'angents']&&(this['tangents']=br(_0x4ab202,_0x3ccbe6,_0x4512ba,_0x5788d8));}}class jb extends Hp{constructor(_0x3d0144={}){const _0x3a81c8=_0x3d0144['latitudeBa'+'nds']??0x21f6+-0xe04+-0x13e2,_0x4376d6=_0x3d0144['longitudeB'+'ands']??-0x23fe+0x2125+-0x2e9*-0x1;super({'radius':0.5,'latitudeBands':_0x3a81c8,'longitudeBands':_0x4376d6});const _0x253448=0xa1c*-0x3+-0x1172+0x2fc6+0.1,_0x2172a9=0xe27*0x2+-0x1*-0x19ed+0x363b*-0x1+0.95,_0x462a64=_0x2172a9*_0x2172a9,_0x476132=this['positions'];for(let _0x1e1f73=-0xfd*0x1f+0x1331*-0x1+0x31d4;_0x1e1f73<_0x476132['length'];_0x1e1f73+=-0x2650*-0x1+0x610*0x1+-0x2c5d){const _0x21fb34=_0x476132[_0x1e1f73]/(0xc01*0x2+0x20*-0x61+0xbe2*-0x1+0.5);let _0x1f63d5=_0x476132[_0x1e1f73+(0x2*-0x11c2+-0x1*-0x213f+-0x246*-0x1)]/(-0x8*0x50+-0x154d+0x17cd*0x1+0.5);const _0x3c9600=_0x476132[_0x1e1f73+(0x1*-0x4b5+-0xbe7*0x3+0x1436*0x2)]/(0x1d*-0xbc+-0x16a3+-0x3*-0xea5+0.5);_0x1f63d5<-0x1*0x1f57+0x5ee+0x515*0x5&&(_0x1f63d5*=0x1cd4+-0xc74+0x106*-0x10+0.3,_0x21fb34*_0x21fb34+_0x3c9600*_0x3c9600<_0x462a64&&(_0x1f63d5=-_0x253448)),_0x1f63d5+=_0x253448,_0x1f63d5*=-0x3*0xc7b+0x1*-0x1d3b+0x42ac+0.5,_0x476132[_0x1e1f73+(-0x1*-0x1b2d+0xe*-0x241+0x462)]=_0x1f63d5;}}}class Po{static['create'](_0x4291c0,_0xceadc0){switch(_0xceadc0){case _w:return Po['box'](_0x4291c0);case gw:return Po['dome'](_0x4291c0);}return w['assert'](_0xceadc0===Co,'Unsupporte'+'d\x20sky\x20geom'+'etry\x20type\x20'+_0xceadc0),Po['infinite'](_0x4291c0);}static['infinite'](_0x47c5c8){return Ge['fromGeomet'+'ry'](_0x47c5c8,new Hf(_0x47c5c8));}static['box'](_0xd38469){return Ge['fromGeomet'+'ry'](_0xd38469,new Hf({'yOffset':0.5}));}static['dome'](_0x1d33f2){const _0x4153a6=new jb({'latitudeBands':0x32,'longitudeBands':0x32});return _0x4153a6['normals']=void(-0x1*0x2437+-0x1*0x112d+0x3564),_0x4153a6['uvs']=void(-0x1*-0x981+-0x674+-0x30d),Ge['fromGeomet'+'ry'](_0x1d33f2,_0x4153a6);}}class Yb{constructor(_0x143331,_0x725002,_0x409379,_0x290870,_0x50bb6f){h(this,'meshInstan'+'ce',null),h(this,'_depthWrit'+'e',!(0x295*-0xb+-0x4f6+0x215e));const _0x30644b=new Bn({'uniqueName':'SkyMateria'+'l','vertexGLSL':Ce['get'](_0x143331,Fe)['get']('skyboxVS'),'fragmentGLSL':Ce['get'](_0x143331,Fe)['get']('skyboxPS'),'vertexWGSL':Ce['get'](_0x143331,it)['get']('skyboxVS'),'fragmentWGSL':Ce['get'](_0x143331,it)['get']('skyboxPS'),'attributes':{'aPosition':Pe}});_0x30644b['setDefine']('{SKYBOX_DE'+'CODE_FNC}',Sr['decodeFunc'](_0x290870['encoding'])),_0x50bb6f!==Co&&_0x30644b['setDefine']('SKYMESH',''),_0x290870['cubemap']&&_0x30644b['setDefine']('SKY_CUBEMA'+'P',''),_0x30644b['setParamet'+'er']('skyboxHigh'+'lightMulti'+'plier',_0x725002['skyboxHigh'+'lightMulti'+'plier']),_0x290870['cubemap']?_0x30644b['setParamet'+'er']('texture_cu'+'beMap',_0x290870):(_0x30644b['setParamet'+'er']('texture_en'+'vAtlas',_0x290870),_0x30644b['setParamet'+'er']('mipLevel',_0x725002['skyboxMip'])),_0x30644b['cull']=wo,_0x30644b['depthWrite']=this['_depthWrit'+'e'];const _0x165d7b=_0x725002['layers']['getLayerBy'+'Id'](wp);if(_0x165d7b){const _0x2bd7f0=Po['create'](_0x143331,_0x50bb6f),_0x16dc33=new He(_0x2bd7f0,_0x30644b,_0x409379);this['meshInstan'+'ce']=_0x16dc33,_0x16dc33['cull']=!(-0x8be+0x1468+-0x255*0x5),_0x16dc33['pick']=!(0xd4d+-0x2ea*0x7+0x65*0x12),_0x165d7b['addMeshIns'+'tances']([_0x16dc33]),this['skyLayer']=_0x165d7b;}}['destroy'](){this['meshInstan'+'ce']&&(this['skyLayer']&&this['skyLayer']['removeMesh'+'Instances']([this['meshInstan'+'ce']]),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}set['depthWrite'](_0x29bec1){this['_depthWrit'+'e']=_0x29bec1,this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']['depthWrite']=_0x29bec1);}get['depthWrite'](){return this['_depthWrit'+'e'];}}class Kb{constructor(_0x2c160d){h(this,'_type',Co),h(this,'_center',new D(0xcd*0x15+0x46c*-0x3+-0x38d,0x1*0x1d8c+-0x1c0d*0x1+0x2*-0xbf,0x1395+-0x24e2+-0x1*-0x114d)),h(this,'skyMesh',null),h(this,'_depthWrit'+'e',!(0xb87+-0x11a5+0x61f*0x1)),h(this,'node',new Ie('SkyMeshNod'+'e')),(this['device']=_0x2c160d['device'],this['scene']=_0x2c160d,this['center']=new D(0x233f*0x1+0x23ad+0xc*-0x5e9,-0x300+-0x1*0x18b9+0x152*0x15,0x1b1*0xd+0x31*-0x28+-0xe55),this['centerArra'+'y']=new Float32Array(0xf1f+0x38*-0x6+0x2*-0x6e6),this['projectedS'+'kydomeCent'+'erId']=this['device']['scope']['resolve']('projectedS'+'kydomeCent'+'er'));}['applySetti'+'ngs'](_0xe988fa){this['type']=_0xe988fa['skyType']??Co,this['node']['setLocalPo'+'sition'](new D(_0xe988fa['skyMeshPos'+'ition']??[-0x1*0xe63+-0x1e7+-0x825*-0x2,-0x3*0x606+-0x13db+0x1*0x25ed,-0x2101*-0x1+0x1923+0x2*-0x1d12])),this['node']['setLocalEu'+'lerAngles'](new D(_0xe988fa['skyMeshRot'+'ation']??[0x124c+-0x1d37+0x2b*0x41,0x7f*-0x1d+-0xdde+0x1c41,-0x1fc1+0x4*0x49a+0xd59])),this['node']['setLocalSc'+'ale'](new D(_0xe988fa['skyMeshSca'+'le']??[-0x25*0x83+-0x46*-0x1+0x2*0x955,-0x13d1+0x1152+0x280*0x1,0x3b*0xa6+0x67d*0x6+0x1*-0x4d2f])),_0xe988fa['skyCenter']&&(this['_center']=new D(_0xe988fa['skyCenter']));}set['type'](_0x427213){this['_type']!==_0x427213&&(this['_type']=_0x427213,this['scene']['updateShad'+'ers']=!(0x5cb*-0x4+0x5e*0x23+-0xa52*-0x1),this['updateSkyM'+'esh']());}get['type'](){return this['_type'];}set['center'](_0x2d0f2b){this['_center']['copy'](_0x2d0f2b);}get['center'](){return this['_center'];}set['depthWrite'](_0x15106c){this['_depthWrit'+'e']!==_0x15106c&&(this['_depthWrit'+'e']=_0x15106c,this['skyMesh']&&(this['skyMesh']['depthWrite']=_0x15106c));}get['depthWrite'](){return this['_depthWrit'+'e'];}['updateSkyM'+'esh'](){const _0x78294c=this['scene']['_getSkybox'+'Tex']();_0x78294c&&(this['resetSkyMe'+'sh'](),this['skyMesh']=new Yb(this['device'],this['scene'],this['node'],_0x78294c,this['type']),this['skyMesh']['depthWrite']=this['_depthWrit'+'e'],this['scene']['fire']('set:skybox',_0x78294c));}['resetSkyMe'+'sh'](){var _0x4552ab;(_0x4552ab=this['skyMesh'])==null||_0x4552ab['destroy'](),this['skyMesh']=null;}['update'](){if(this['type']!==Co){const {center:_0x5dbc58,centerArray:_0x3741b2}=this,_0x1e02c8=new D();this['node']['getWorldTr'+'ansform']()['transformP'+'oint'](_0x5dbc58,_0x1e02c8),_0x3741b2[-0x4a4+-0xc1*0x13+0x12f7]=_0x1e02c8['x'],_0x3741b2[0x2*-0xa36+-0xe2+-0x5*-0x443]=_0x1e02c8['y'],_0x3741b2[-0x596+-0xc86+0x121e]=_0x1e02c8['z'],this['projectedS'+'kydomeCent'+'erId']['setValue'](_0x3741b2);}}}const ah=new Ie();ah['worldTrans'+'form']=te['IDENTITY'],ah['_dirtyWorl'+'d']=ah['_dirtyNorm'+'al']=!(-0x1a90+-0x143a*0x1+-0xb*-0x441);class Zb{constructor(_0x1d8155,_0x54d7c6,_0x3e3821){this['material']=_0x54d7c6,this['layer']=_0x3e3821,this['positions']=[],this['colors']=[],this['mesh']=new Ge(_0x1d8155),this['meshInstan'+'ce']=null;}['addLines'](_0x1b7998,_0x1125c4){const _0x4290ec=this['positions'],_0x869c3e=_0x1b7998['length'];for(let _0x44377d=0x1ef9*0x1+0x1*0x2261+-0x415a;_0x44377d<_0x869c3e;_0x44377d++){const _0x21ca52=_0x1b7998[_0x44377d];_0x4290ec['push'](_0x21ca52['x'],_0x21ca52['y'],_0x21ca52['z']);}const _0x30cf30=this['colors'];if(_0x1125c4['length'])for(let _0x3dbd76=-0x2*0x112a+-0x3*-0xb5d+0x1*0x3d;_0x3dbd76<_0x869c3e;_0x3dbd76++){const _0x161a6a=_0x1125c4[_0x3dbd76];_0x30cf30['push'](_0x161a6a['r'],_0x161a6a['g'],_0x161a6a['b'],_0x161a6a['a']);}else{for(let _0x4b1919=0x6d*0x11+-0x14c4+-0x1*-0xd87;_0x4b1919<_0x869c3e;_0x4b1919++)_0x30cf30['push'](_0x1125c4['r'],_0x1125c4['g'],_0x1125c4['b'],_0x1125c4['a']);}}['addLinesAr'+'rays'](_0x40c318,_0x126fe1){const _0x51c26a=this['positions'];for(let _0x43f5a9=-0x13*0x7f+-0xefb+-0x238*-0xb;_0x43f5a9<_0x40c318['length'];_0x43f5a9+=0x1ccf+0x72b*0x1+0x345*-0xb)_0x51c26a['push'](_0x40c318[_0x43f5a9],_0x40c318[_0x43f5a9+(0xa03*0x1+0x1d*0x10f+-0x265*0x11)],_0x40c318[_0x43f5a9+(-0xb56+-0x72*-0x10+-0xf*-0x48)]);const _0x4fe9ab=this['colors'];if(_0x126fe1['length']){for(let _0x222401=-0x2*-0xaa0+0x176f+-0x29*0x117;_0x222401<_0x126fe1['length'];_0x222401+=0xc90+-0x25d2+0x1*0x1946)_0x4fe9ab['push'](_0x126fe1[_0x222401],_0x126fe1[_0x222401+(-0x18a7+0x342*0x2+0xac*0x1b)],_0x126fe1[_0x222401+(-0x1be2+-0xc91*-0x1+-0xf53*-0x1)],_0x126fe1[_0x222401+(-0x773+0x22af+-0x1b39)]);}else{const _0x19c9f0=_0x40c318['length']/(-0x16*0xc7+0x1*-0xe5d+0x11*0x1da);for(let _0x5eaca0=0x1df9+0x2b5*-0x8+0x851*-0x1;_0x5eaca0<_0x19c9f0;_0x5eaca0++)_0x4fe9ab['push'](_0x126fe1['r'],_0x126fe1['g'],_0x126fe1['b'],_0x126fe1['a']);}}['onPreRende'+'r'](_0x298cd5,_0xd99486){this['positions']['length']>0x1e4c+-0xef*0xb+-0x1407&&this['material']['transparen'+'t']===_0xd99486&&(this['mesh']['setPositio'+'ns'](this['positions']),this['mesh']['setColors'](this['colors']),this['mesh']['update'](Gh,!(-0x24a+-0x1*0x11bb+-0xe9*-0x16)),this['meshInstan'+'ce']||(this['meshInstan'+'ce']=new He(this['mesh'],this['material'],ah)),_0x298cd5['push'](this['meshInstan'+'ce']));}['clear'](){this['positions']['length']=0x5*-0x39d+-0x29c*0x4+0x1c81,this['colors']['length']=0x5b*0x23+0x2*0x106d+0x90f*-0x5;}}class Qb{constructor(_0x39e159){this['device']=_0x39e159,this['map']=new Map();}['getBatch'](_0xb1862c,_0x321210){let _0x5b7722=this['map']['get'](_0xb1862c);return _0x5b7722||(_0x5b7722=new Zb(this['device'],_0xb1862c,_0x321210),this['map']['set'](_0xb1862c,_0x5b7722)),_0x5b7722;}['onPreRende'+'r'](_0x5d2a5e,_0x15ef48){this['map']['forEach'](_0x30e996=>{_0x30e996['onPreRende'+'r'](_0x5d2a5e,_0x15ef48);});}['clear'](){this['map']['forEach'](_0x189695=>_0x189695['clear']());}}const Ts=[],Oa=new D();class Jb{constructor(_0x5565db){h(this,'shaderDesc'+'s',new Map()),(this['device']=_0x5565db,this['quadMesh']=null,this['textureSha'+'der']=null,this['depthTextu'+'reShader']=null,this['cubeLocalP'+'os']=null,this['cubeWorldP'+'os']=null,this['batchesMap']=new Map(),this['allBatches']=new Set(),this['updatedLay'+'ers']=new Set(),this['_materialD'+'epth']=null,this['_materialN'+'oDepth']=null,this['layerMeshI'+'nstances']=new Map());}['createMate'+'rial'](_0x2c0884){const _0x295ad3=new Bn({'uniqueName':'ImmediateL'+'ine','vertexGLSL':Ce['get'](this['device'],Fe)['get']('immediateL'+'ineVS'),'fragmentGLSL':Ce['get'](this['device'],Fe)['get']('immediateL'+'inePS'),'vertexWGSL':Ce['get'](this['device'],it)['get']('immediateL'+'ineVS'),'fragmentWGSL':Ce['get'](this['device'],it)['get']('immediateL'+'inePS'),'attributes':{'vertex_position':Pe,'vertex_color':Wt}});return _0x295ad3['blendType']=Zs,_0x295ad3['depthTest']=_0x2c0884,_0x295ad3['update'](),_0x295ad3;}get['materialDe'+'pth'](){return this['_materialD'+'epth']||(this['_materialD'+'epth']=this['createMate'+'rial'](!(-0x267*-0xd+-0x1e5*0x1+-0x1d56))),this['_materialD'+'epth'];}get['materialNo'+'Depth'](){return this['_materialN'+'oDepth']||(this['_materialN'+'oDepth']=this['createMate'+'rial'](!(0x1450+-0x74b+-0xd04))),this['_materialN'+'oDepth'];}['getBatch'](_0x2885d7,_0x30ebc7){let _0x15feff=this['batchesMap']['get'](_0x2885d7);_0x15feff||(_0x15feff=new Qb(this['device']),this['batchesMap']['set'](_0x2885d7,_0x15feff)),this['allBatches']['add'](_0x15feff);const _0x2c7365=_0x30ebc7?this['materialDe'+'pth']:this['materialNo'+'Depth'];return _0x15feff['getBatch'](_0x2c7365,_0x2885d7);}['getShaderD'+'esc'](_0x4b8435,_0x376444,_0x213d3f){return this['shaderDesc'+'s']['has'](_0x4b8435)||this['shaderDesc'+'s']['set'](_0x4b8435,{'uniqueName':'DebugShade'+'r:'+_0x4b8435,'vertexGLSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20matr'+'ix_model;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ve'+'c2\x20uv0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_model\x20*\x20v'+'ec4(vertex'+'_position,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uv0\x20=\x20ve'+'rtex_posit'+'ion.xy\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20','vertexWGSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20@ver'+'tex\x20fn\x20ver'+'texMain(in'+'put:\x20Verte'+'xInput)\x20->'+'\x20VertexOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20un'+'iform.matr'+'ix_model\x20*'+'\x20vec4f(inp'+'ut.vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.uv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20+\x20vec2f'+'(0.5);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20','fragmentGLSL':_0x376444,'fragmentWGSL':_0x213d3f,'attributes':{'vertex_position':Pe}}),this['shaderDesc'+'s']['get'](_0x4b8435);}['getTexture'+'ShaderDesc'](_0x36a425){const _0x3df00c=Sr['decodeFunc'](_0x36a425);return this['getShaderD'+'esc']('textureSha'+'der-'+_0x36a425,'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20vec2\x20uv0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20colorMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20linear'+'Color\x20=\x20'+_0x3df00c+('(texture2D'+'(colorMap,'+'\x20uv0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(linearC'+'olor),\x201);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'),'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20colorMa'+'pSampler:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20@fragment'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output:\x20Fr'+'agmentOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20sample'+'dTex\x20=\x20tex'+'tureSample'+'(colorMap,'+'\x20colorMapS'+'ampler,\x20in'+'put.uv0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'linearColo'+'r:\x20vec3f\x20='+'\x20'+_0x3df00c+('(sampledTe'+'x);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(gammaCorr'+'ectOutput('+'linearColo'+'r),\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'));}['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](){return this['getShaderD'+'esc']('textureSha'+'derUnfilte'+'rable','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vec2\x20uv0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20highp\x20sam'+'pler2D\x20col'+'orMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'oid\x20main\x20('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'uv\x20=\x20ivec2'+'(uv0\x20*\x20tex'+'tureSize(c'+'olorMap,\x200'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'texelFetch'+'(colorMap,'+'\x20uv,\x200).xy'+'z,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<uff>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20@'+'fragment\x20f'+'n\x20fragment'+'Main(input'+'\x20:\x20Fragmen'+'tInput)\x20->'+'\x20FragmentO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'nput.uv0\x20*'+'\x20vec2f(tex'+'tureDimens'+'ions(color'+'Map,\x200)));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20fetchedCo'+'lor\x20:\x20vec4'+'f\x20=\x20textur'+'eLoad(colo'+'rMap,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(fetchedCo'+'lor.xyz,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20');}['getDepthTe'+'xtureShade'+'rDesc'](){return this['getShaderD'+'esc']('depthTextu'+'reShader','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20void\x20main'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x20getLi'+'nearScreen'+'Depth(getI'+'mageEffect'+'UV(uv0))\x20*'+'\x20camera_pa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(vec3(de'+'pth)),\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20u'+'v0:\x20vec2f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20@fragme'+'nt\x20fn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20depth'+':\x20f32\x20=\x20ge'+'tLinearScr'+'eenDepth(g'+'etImageEff'+'ectUV(inpu'+'t.uv0))\x20*\x20'+'uniform.ca'+'mera_param'+'s.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(vec3f(dep'+'th)),\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}['getQuadMes'+'h'](){return this['quadMesh']||(this['quadMesh']=new Ge(this['device']),this['quadMesh']['setPositio'+'ns']([-(-0x9cd*-0x2+0x923+-0x1cbd+0.5),-(0x55b+-0x6*0x17c+0x38d+0.5),-0x6b7*-0x3+-0x255c+0x1137,-0x1c0+0x1d9f+0x593*-0x5+0.5,-(0x4*0xdf+0x9b1+-0xd2d*0x1+0.5),0x1f5d+-0x266d+0x710,-(-0x7ac+0x10d0+0xa*-0xea+0.5),-0x1*0x11d1+-0x1*-0x1ca+0x1007+0.5,0x4ab+0x1a08+0x10f*-0x1d,-0x1*-0x1886+0x20*-0x7c+-0xf*0x9a+0.5,0xd8d+0x99c+-0x21b*0xb+0.5,0x3c0+-0x3bb*0x7+0x479*0x5]),this['quadMesh']['update'](vr)),this['quadMesh'];}['drawMesh'](_0x17a54a,_0x24ecc9,_0x22e63c,_0x1d7cac,_0x526cbf){if(!_0x1d7cac){const _0x550647=this['getGraphNo'+'de'](_0x24ecc9);_0x1d7cac=new He(_0x22e63c,_0x17a54a,_0x550647);}let _0x1e4227=this['layerMeshI'+'nstances']['get'](_0x526cbf);_0x1e4227||(_0x1e4227=[],this['layerMeshI'+'nstances']['set'](_0x526cbf,_0x1e4227)),_0x1e4227['push'](_0x1d7cac);}['drawWireAl'+'ignedBox'](_0x3859b9,_0x2cdf52,_0x26f19a,_0x5ade7f,_0x16b70d,_0x183bb2){if(_0x183bb2){const _0x97345=(_0x26508b,_0x3bbf82,_0xffcddb)=>{Oa['set'](_0x26508b,_0x3bbf82,_0xffcddb),_0x183bb2['transformP'+'oint'](Oa,Oa),Ts['push'](Oa['x'],Oa['y'],Oa['z']);};_0x97345(_0x3859b9['x'],_0x3859b9['y'],_0x3859b9['z']),_0x97345(_0x3859b9['x'],_0x2cdf52['y'],_0x3859b9['z']),_0x97345(_0x3859b9['x'],_0x2cdf52['y'],_0x3859b9['z']),_0x97345(_0x2cdf52['x'],_0x2cdf52['y'],_0x3859b9['z']),_0x97345(_0x2cdf52['x'],_0x2cdf52['y'],_0x3859b9['z']),_0x97345(_0x2cdf52['x'],_0x3859b9['y'],_0x3859b9['z']),_0x97345(_0x2cdf52['x'],_0x3859b9['y'],_0x3859b9['z']),_0x97345(_0x3859b9['x'],_0x3859b9['y'],_0x3859b9['z']),_0x97345(_0x3859b9['x'],_0x3859b9['y'],_0x2cdf52['z']),_0x97345(_0x3859b9['x'],_0x2cdf52['y'],_0x2cdf52['z']),_0x97345(_0x3859b9['x'],_0x2cdf52['y'],_0x2cdf52['z']),_0x97345(_0x2cdf52['x'],_0x2cdf52['y'],_0x2cdf52['z']),_0x97345(_0x2cdf52['x'],_0x2cdf52['y'],_0x2cdf52['z']),_0x97345(_0x2cdf52['x'],_0x3859b9['y'],_0x2cdf52['z']),_0x97345(_0x2cdf52['x'],_0x3859b9['y'],_0x2cdf52['z']),_0x97345(_0x3859b9['x'],_0x3859b9['y'],_0x2cdf52['z']),_0x97345(_0x3859b9['x'],_0x3859b9['y'],_0x3859b9['z']),_0x97345(_0x3859b9['x'],_0x3859b9['y'],_0x2cdf52['z']),_0x97345(_0x3859b9['x'],_0x2cdf52['y'],_0x3859b9['z']),_0x97345(_0x3859b9['x'],_0x2cdf52['y'],_0x2cdf52['z']),_0x97345(_0x2cdf52['x'],_0x2cdf52['y'],_0x3859b9['z']),_0x97345(_0x2cdf52['x'],_0x2cdf52['y'],_0x2cdf52['z']),_0x97345(_0x2cdf52['x'],_0x3859b9['y'],_0x3859b9['z']),_0x97345(_0x2cdf52['x'],_0x3859b9['y'],_0x2cdf52['z']);}else Ts['push'](_0x3859b9['x'],_0x3859b9['y'],_0x3859b9['z'],_0x3859b9['x'],_0x2cdf52['y'],_0x3859b9['z'],_0x3859b9['x'],_0x2cdf52['y'],_0x3859b9['z'],_0x2cdf52['x'],_0x2cdf52['y'],_0x3859b9['z'],_0x2cdf52['x'],_0x2cdf52['y'],_0x3859b9['z'],_0x2cdf52['x'],_0x3859b9['y'],_0x3859b9['z'],_0x2cdf52['x'],_0x3859b9['y'],_0x3859b9['z'],_0x3859b9['x'],_0x3859b9['y'],_0x3859b9['z'],_0x3859b9['x'],_0x3859b9['y'],_0x2cdf52['z'],_0x3859b9['x'],_0x2cdf52['y'],_0x2cdf52['z'],_0x3859b9['x'],_0x2cdf52['y'],_0x2cdf52['z'],_0x2cdf52['x'],_0x2cdf52['y'],_0x2cdf52['z'],_0x2cdf52['x'],_0x2cdf52['y'],_0x2cdf52['z'],_0x2cdf52['x'],_0x3859b9['y'],_0x2cdf52['z'],_0x2cdf52['x'],_0x3859b9['y'],_0x2cdf52['z'],_0x3859b9['x'],_0x3859b9['y'],_0x2cdf52['z'],_0x3859b9['x'],_0x3859b9['y'],_0x3859b9['z'],_0x3859b9['x'],_0x3859b9['y'],_0x2cdf52['z'],_0x3859b9['x'],_0x2cdf52['y'],_0x3859b9['z'],_0x3859b9['x'],_0x2cdf52['y'],_0x2cdf52['z'],_0x2cdf52['x'],_0x2cdf52['y'],_0x3859b9['z'],_0x2cdf52['x'],_0x2cdf52['y'],_0x2cdf52['z'],_0x2cdf52['x'],_0x3859b9['y'],_0x3859b9['z'],_0x2cdf52['x'],_0x3859b9['y'],_0x2cdf52['z']);this['getBatch'](_0x16b70d,_0x5ade7f)['addLinesAr'+'rays'](Ts,_0x26f19a),Ts['length']=-0x108*0x8+-0x1945+0x2185;}['drawWireSp'+'here'](_0x5e3287,_0x452f4e,_0x25143f,_0xd9c99e,_0x443582,_0x3cc6a3){const _0x51266e=(-0x1f0c+0x1c9c+-0x139*-0x2)*Math['PI']/_0xd9c99e;let _0x2909ee=0x151b+0x4f*0x67+0xa*-0x54a;for(let _0x298b80=0x518*0x4+0xb54+-0x2*0xfda;_0x298b80<_0xd9c99e;_0x298b80++){const _0x30d83a=Math['sin'](_0x2909ee),_0x44be0c=Math['cos'](_0x2909ee);_0x2909ee+=_0x51266e;const _0x4a867b=Math['sin'](_0x2909ee),_0x143d62=Math['cos'](_0x2909ee);Ts['push'](_0x5e3287['x']+_0x452f4e*_0x30d83a,_0x5e3287['y'],_0x5e3287['z']+_0x452f4e*_0x44be0c),Ts['push'](_0x5e3287['x']+_0x452f4e*_0x4a867b,_0x5e3287['y'],_0x5e3287['z']+_0x452f4e*_0x143d62),Ts['push'](_0x5e3287['x']+_0x452f4e*_0x30d83a,_0x5e3287['y']+_0x452f4e*_0x44be0c,_0x5e3287['z']),Ts['push'](_0x5e3287['x']+_0x452f4e*_0x4a867b,_0x5e3287['y']+_0x452f4e*_0x143d62,_0x5e3287['z']),Ts['push'](_0x5e3287['x'],_0x5e3287['y']+_0x452f4e*_0x30d83a,_0x5e3287['z']+_0x452f4e*_0x44be0c),Ts['push'](_0x5e3287['x'],_0x5e3287['y']+_0x452f4e*_0x4a867b,_0x5e3287['z']+_0x452f4e*_0x143d62);}this['getBatch'](_0x3cc6a3,_0x443582)['addLinesAr'+'rays'](Ts,_0x25143f),Ts['length']=-0xf8a+-0x1b2b+0x2ab5;}['getGraphNo'+'de'](_0x507854){const _0x91e745=new Ie('ImmediateD'+'ebug');return _0x91e745['worldTrans'+'form']=_0x507854,_0x91e745['_dirtyWorl'+'d']=_0x91e745['_dirtyNorm'+'al']=!(-0x1c6f*-0x1+0x2*-0xb4d+-0x2*0x2ea),_0x91e745;}['onPreRende'+'rLayer'](_0x164cc5,_0x42246f,_0x19e900){if(this['batchesMap']['forEach']((_0x26d9e3,_0xeda898)=>{_0xeda898===_0x164cc5&&_0x26d9e3['onPreRende'+'r'](_0x42246f,_0x19e900);}),!this['updatedLay'+'ers']['has'](_0x164cc5)){this['updatedLay'+'ers']['add'](_0x164cc5);const _0x49bbcb=this['layerMeshI'+'nstances']['get'](_0x164cc5);if(_0x49bbcb){for(let _0x5a7d0d=0x2a8+-0x8d*0x1+0xb*-0x31;_0x5a7d0d<_0x49bbcb['length'];_0x5a7d0d++)_0x42246f['push'](_0x49bbcb[_0x5a7d0d]);_0x49bbcb['length']=0x214*0x3+0x190c+-0x23c*0xe;}}}['onPostRend'+'er'](){this['allBatches']['forEach'](_0x259633=>_0x259633['clear']()),this['allBatches']['clear'](),this['updatedLay'+'ers']['clear']();}}class eA{constructor(){h(this,'type',Hn),h(this,'color',new ie(-0xe50+-0x2e3+0x1133,-0x1475+-0x14f0+-0x1*-0x2965,0xff4+0x7*-0x547+0x3*0x6ff)),h(this,'density',-0x7*0x383+-0x26cd+0x3f62),h(this,'start',-0x7*0x3d3+-0xdb5+0x287b),h(this,'end',0x259d+-0x9fd+-0x17b8);}}class Et extends me{constructor(_0x5ce5fe){super(),h(this,'ambientBak'+'e',!(-0x1b1d*0x1+-0x1817+0x3335)),h(this,'ambientBak'+'eOcclusion'+'Brightness',-0x1b9d+-0x244f+0x3fec*0x1),h(this,'ambientBak'+'eOcclusion'+'Contrast',-0x7*-0x279+-0xaf0+-0x1*0x65f),h(this,'ambientLig'+'ht',new ie(-0xa88+-0x1cd+0xc55,-0x224f+0xb*-0x2f0+-0x471*-0xf,-0x65b+0x1203+-0xba8)),h(this,'ambientLum'+'inance',-0x3*-0xb4d+-0x117*0x1b+-0x3*0x17e),h(this,'exposure',0x18b*0x13+-0x43*0x19+0x1d*-0xc9),h(this,'lightmapSi'+'zeMultipli'+'er',0x1d*-0xe7+-0x209*0x4+0x2250),h(this,'lightmapMa'+'xResolutio'+'n',-0x1*0x7ac+-0x1ee2+0x2e8e),h(this,'lightmapMo'+'de',Ac),h(this,'lightmapFi'+'lterEnable'+'d',!(-0x24c3+-0x1*-0x1a69+0xa5b)),h(this,'lightmapHD'+'R',!(-0x159c+-0x3*-0x657+0x298*0x1)),h(this,'root',null),h(this,'physicalUn'+'its',!(-0xc*0x208+-0x1*0x6d7+0x94*0x36)),h(this,'_envAtlas',null),h(this,'_skyboxCub'+'eMap',null),h(this,'_fogParams',new eA()),h(this,'forcePassT'+'hroughSpec'+'ular',!(-0x2*-0x4be+0x1*0xd28+-0x16a3)),(w['assert'](_0x5ce5fe,'Scene\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x5ce5fe,this['_gravity']=new D(-0x15cc+0xd*0xa3+0xd85,-(-0x341+0x102b*-0x1+0x1375+0.8000000000000007),-0xaee+-0x3d5+0xec3),this['_layers']=null,this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']=null,this['_skyboxInt'+'ensity']=-0xa*0x5+-0x25bc+-0x2eb*-0xd,this['_skyboxLum'+'inance']=0x2d6*0xc+-0x123d+-0x1*0xfcb,this['_skyboxMip']=-0x7f2+-0x588*0x7+0x2eaa,this['_skyboxHig'+'hlightMult'+'iplier']=-0x334*-0x1+-0x1bf7*0x1+-0x5*-0x4f4,this['_skyboxRot'+'ationShade'+'rInclude']=!(-0x1*0x1193+-0x14fa*0x1+0x5*0x7b6),this['_skyboxRot'+'ation']=new le(),this['_skyboxRot'+'ationMat3']=new _i(),this['_skyboxRot'+'ationMat4']=new te(),this['_ambientBa'+'keNumSampl'+'es']=-0x1d29+0x281*-0x7+-0x2eb1*-0x1,this['_ambientBa'+'keSpherePa'+'rt']=-0x7*0x457+0x7f9*0x4+-0x81*0x3+0.4,this['_lightmapF'+'ilterRange']=0x3b*0x68+-0x5e*0x5e+0xa96,this['_lightmapF'+'ilterSmoot'+'hness']=0x251*0x1+-0x8*-0x38c+-0x1eb1+0.2,this['_clustered'+'LightingEn'+'abled']=!(0x9d*0x35+-0x1682+0x9ff*-0x1),this['_lightingP'+'arams']=new qy(this['device']['supportsAr'+'eaLights'],this['device']['maxTexture'+'Size'],()=>{this['updateShad'+'ers']=!(-0x47*-0x25+-0x53*0x4+-0x8f7);}),this['_sky']=new Kb(this),this['_stats']={'meshInstances':0x0,'lights':0x0,'dynamicLights':0x0,'bakedLights':0x0,'updateShadersTime':0x0},this['updateShad'+'ers']=!(0x7ee+0x8a7+-0x1095),this['_shaderVer'+'sion']=-0x2cf*0x7+0x33*0x71+-0x2da,this['immediate']=new Jb(this['device']));}get['defaultDra'+'wLayer'](){return this['layers']['getLayerBy'+'Id'](Ep);}set['ambientBak'+'eNumSample'+'s'](_0x325abe){this['_ambientBa'+'keNumSampl'+'es']=Y['clamp'](Math['floor'](_0x325abe),0x2c5+0x800+-0x34*0x35,-0x34*-0xb2+0xf02*0x1+0x9*-0x593);}get['ambientBak'+'eNumSample'+'s'](){return this['_ambientBa'+'keNumSampl'+'es'];}set['ambientBak'+'eSpherePar'+'t'](_0x40531b){this['_ambientBa'+'keSpherePa'+'rt']=Y['clamp'](_0x40531b,-0x34*-0x89+0x99*-0x9+-0x1673+0.001,-0x216f+-0x8cb+-0x239*-0x13);}get['ambientBak'+'eSpherePar'+'t'](){return this['_ambientBa'+'keSpherePa'+'rt'];}set['clusteredL'+'ightingEna'+'bled'](_0x3a29fb){if(this['device']['isWebGPU']&&!_0x3a29fb){w['warnOnce']('WebGPU\x20cur'+'rently\x20onl'+'y\x20supports'+'\x20clustered'+'\x20lighting,'+'\x20and\x20this\x20'+'cannot\x20be\x20'+'disabled.');return;}if(!this['_clustered'+'LightingEn'+'abled']&&_0x3a29fb){console['error']('Turning\x20on'+'\x20disabled\x20'+'clustered\x20'+'lighting\x20i'+'s\x20not\x20curr'+'ently\x20supp'+'orted');return;}this['_clustered'+'LightingEn'+'abled']=_0x3a29fb;}get['clusteredL'+'ightingEna'+'bled'](){return this['_clustered'+'LightingEn'+'abled'];}set['envAtlas'](_0x574af2){_0x574af2!==this['_envAtlas']&&(this['_envAtlas']=_0x574af2,_0x574af2&&(_0x574af2['addressU']=ue,_0x574af2['addressV']=ue,_0x574af2['minFilter']=vt,_0x574af2['magFilter']=vt,_0x574af2['mipmaps']=!(0xa75*-0x1+-0x144f+-0x1ec5*-0x1)),this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_resetSkyM'+'esh']());}get['envAtlas'](){return this['_envAtlas'];}set['layers'](_0x19b359){const _0x43b03b=this['_layers'];this['_layers']=_0x19b359,this['fire']('set:layers',_0x43b03b,_0x19b359);}get['layers'](){return this['_layers'];}get['sky'](){return this['_sky'];}get['lighting'](){return this['_lightingP'+'arams'];}get['fog'](){return this['_fogParams'];}set['lightmapFi'+'lterRange'](_0x5ce7e0){this['_lightmapF'+'ilterRange']=Math['max'](_0x5ce7e0,0xebd+-0x1eb6+0x57*0x2f+0.001);}get['lightmapFi'+'lterRange'](){return this['_lightmapF'+'ilterRange'];}set['lightmapFi'+'lterSmooth'+'ness'](_0x1cafe6){this['_lightmapF'+'ilterSmoot'+'hness']=Math['max'](_0x1cafe6,-0x107c+-0x103b+-0x68b*-0x5+0.001);}get['lightmapFi'+'lterSmooth'+'ness'](){return this['_lightmapF'+'ilterSmoot'+'hness'];}set['prefiltere'+'dCubemaps'](_0xb0bb14){_0xb0bb14=_0xb0bb14||[];const _0x581a02=this['_prefilter'+'edCubemaps'];(_0x581a02['length']!==_0xb0bb14['length']||_0x581a02['some']((_0x6d36b1,_0x5715df)=>_0x6d36b1!==_0xb0bb14[_0x5715df]))&&(_0xb0bb14['length']===-0xe8c+0x2*0x9bf+-0x4ec&&_0xb0bb14['every'](_0x9188ff=>!!_0x9188ff)?(this['_internalE'+'nvAtlas']=zy['generatePr'+'efilteredA'+'tlas'](_0xb0bb14,{'target':this['_internalE'+'nvAtlas']}),this['_envAtlas']=this['_internalE'+'nvAtlas']):(this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_envAtlas']=null),this['_prefilter'+'edCubemaps']=_0xb0bb14['slice'](),this['_resetSkyM'+'esh']());}get['prefiltere'+'dCubemaps'](){return this['_prefilter'+'edCubemaps'];}set['skybox'](_0x5466cf){_0x5466cf!==this['_skyboxCub'+'eMap']&&(this['_skyboxCub'+'eMap']=_0x5466cf,this['_resetSkyM'+'esh']());}get['skybox'](){return this['_skyboxCub'+'eMap'];}set['skyboxInte'+'nsity'](_0x165443){_0x165443!==this['_skyboxInt'+'ensity']&&(this['_skyboxInt'+'ensity']=_0x165443,this['_resetSkyM'+'esh']());}get['skyboxInte'+'nsity'](){return this['_skyboxInt'+'ensity'];}set['skyboxLumi'+'nance'](_0x18fd4a){_0x18fd4a!==this['_skyboxLum'+'inance']&&(this['_skyboxLum'+'inance']=_0x18fd4a,this['_resetSkyM'+'esh']());}get['skyboxLumi'+'nance'](){return this['_skyboxLum'+'inance'];}set['skyboxMip'](_0x5c2372){_0x5c2372!==this['_skyboxMip']&&(this['_skyboxMip']=_0x5c2372,this['_resetSkyM'+'esh']());}get['skyboxMip'](){return this['_skyboxMip'];}set['skyboxHigh'+'lightMulti'+'plier'](_0x1e2cd1){_0x1e2cd1!==this['_skyboxHig'+'hlightMult'+'iplier']&&(this['_skyboxHig'+'hlightMult'+'iplier']=_0x1e2cd1,this['_resetSkyM'+'esh']());}get['skyboxHigh'+'lightMulti'+'plier'](){return this['_skyboxHig'+'hlightMult'+'iplier'];}set['skyboxRota'+'tion'](_0x357887){if(!this['_skyboxRot'+'ation']['equals'](_0x357887)){const _0x37ca66=_0x357887['equals'](le['IDENTITY']);this['_skyboxRot'+'ation']['copy'](_0x357887),_0x37ca66?this['_skyboxRot'+'ationMat3']['setIdentit'+'y']():(this['_skyboxRot'+'ationMat4']['setTRS'](D['ZERO'],_0x357887,D['ONE']),this['_skyboxRot'+'ationMat3']['invertMat4'](this['_skyboxRot'+'ationMat4'])),!this['_skyboxRot'+'ationShade'+'rInclude']&&!_0x37ca66&&(this['_skyboxRot'+'ationShade'+'rInclude']=!(0xed9+-0x17f1+0x18*0x61),this['_resetSkyM'+'esh']());}}get['skyboxRota'+'tion'](){return this['_skyboxRot'+'ation'];}['destroy'](){this['_resetSkyM'+'esh'](),this['root']=null,this['off']();}['drawLine'](_0x6c8529,_0xc19593,_0x4cd38d=ie['WHITE'],_0x1f82ab=!(0x1*-0xf19+0x8c+0xe8d),_0x1c9406=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x1c9406,_0x1f82ab)['addLines']([_0x6c8529,_0xc19593],[_0x4cd38d,_0x4cd38d]);}['drawLines'](_0x1e0958,_0x4d55a9,_0x747c3=!(0x58*-0x6d+0xaee*-0x3+0x2321*0x2),_0x26629d=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x26629d,_0x747c3)['addLines'](_0x1e0958,_0x4d55a9);}['drawLineAr'+'rays'](_0x127d14,_0x368037,_0x30005f=!(0x1*-0x226c+0x417+-0x1e55*-0x1),_0x1fa6de=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x1fa6de,_0x30005f)['addLinesAr'+'rays'](_0x127d14,_0x368037);}['applySetti'+'ngs'](_0x54661e){const _0x118ac9=_0x54661e['physics'],_0x592940=_0x54661e['render'];this['_gravity']['set'](_0x118ac9['gravity'][-0x1a96*0x1+-0x1a7e+0x3514],_0x118ac9['gravity'][-0x2b*0x3b+-0x4c*-0x3e+-0x87e],_0x118ac9['gravity'][-0x3*-0xacf+-0xc5c+0x1*-0x140f]),this['ambientLig'+'ht']['set'](_0x592940['global_amb'+'ient'][0x1956+-0x688+0x2*-0x967],_0x592940['global_amb'+'ient'][-0xdc3+0x2676+-0x18b2],_0x592940['global_amb'+'ient'][-0x3d*-0x76+-0xcc9*-0x1+0x1*-0x28e5]),this['ambientLum'+'inance']=_0x592940['ambientLum'+'inance'],this['fog']['type']=_0x592940['fog'],this['fog']['color']['set'](_0x592940['fog_color'][0x2240+-0x1*-0x26d1+0x4911*-0x1],_0x592940['fog_color'][0x1073+0x1689+-0x26fb],_0x592940['fog_color'][0x1*-0x18e5+0x2c+-0x1*-0x18bb]),this['fog']['start']=_0x592940['fog_start'],this['fog']['end']=_0x592940['fog_end'],this['fog']['density']=_0x592940['fog_densit'+'y'],this['lightmapSi'+'zeMultipli'+'er']=_0x592940['lightmapSi'+'zeMultipli'+'er'],this['lightmapMa'+'xResolutio'+'n']=_0x592940['lightmapMa'+'xResolutio'+'n'],this['lightmapMo'+'de']=_0x592940['lightmapMo'+'de'],this['exposure']=_0x592940['exposure'],this['_skyboxInt'+'ensity']=_0x592940['skyboxInte'+'nsity']??-0xa10+-0x4ec+-0x4ff*-0x3,this['_skyboxLum'+'inance']=_0x592940['skyboxLumi'+'nance']??-0x3a6*-0xe+-0xa4b+-0x1*-0x2557,this['_skyboxMip']=_0x592940['skyboxMip']??0xf*-0xd+0x21f5+-0x1*0x2132,_0x592940['skyboxRota'+'tion']&&(this['skyboxRota'+'tion']=new le()['setFromEul'+'erAngles'](_0x592940['skyboxRota'+'tion'][-0x22f2+0xacb+0x1827],_0x592940['skyboxRota'+'tion'][0x1*0x1e4a+0x116c+-0x45*0xb1],_0x592940['skyboxRota'+'tion'][0xc17+-0x245a+-0x13*-0x147])),this['sky']['applySetti'+'ngs'](_0x592940),this['clusteredL'+'ightingEna'+'bled']=_0x592940['clusteredL'+'ightingEna'+'bled']??!(0x376*0x7+0x8b+-0x18c4),this['lighting']['applySetti'+'ngs'](_0x592940),['lightmapFi'+'lterEnable'+'d','lightmapFi'+'lterRange','lightmapFi'+'lterSmooth'+'ness','ambientBak'+'e','ambientBak'+'eNumSample'+'s','ambientBak'+'eSpherePar'+'t','ambientBak'+'eOcclusion'+'Brightness','ambientBak'+'eOcclusion'+'Contrast']['forEach'](_0x5c6a10=>{_0x592940['hasOwnProp'+'erty'](_0x5c6a10)&&(this[_0x5c6a10]=_0x592940[_0x5c6a10]);}),this['_resetSkyM'+'esh']();}['_getSkybox'+'Tex'](){const _0x45883e=this['_prefilter'+'edCubemaps'];return this['_skyboxMip']?_0x45883e[[0x37*-0x43+-0xd34+0x1b99,0x2*0x584+-0x46*-0x1f+0x1381*-0x1,0x16c2+0x4*-0x9f+-0x1443,-0x117a+0xe87*-0x1+0x2005,-0x15aa+-0x119*-0x1b+0x7f4*-0x1,-0x544*-0x3+-0x1d*0x139+0x13af][this['_skyboxMip']]]||this['_envAtlas']||_0x45883e[-0x391*-0x6+0x1cf7+0x1*-0x325d]||this['_skyboxCub'+'eMap']:this['_skyboxCub'+'eMap']||_0x45883e[0x1*-0xaa3+0x22da+0x1837*-0x1]||this['_envAtlas'];}['_updateSky'+'Mesh'](){this['sky']['skyMesh']||this['sky']['updateSkyM'+'esh'](),this['sky']['update']();}['_resetSkyM'+'esh'](){this['sky']['resetSkyMe'+'sh'](),this['updateShad'+'ers']=!(0x176b+0xea0+-0x1*0x260b);}['setSkybox'](_0x4ebd6d){_0x4ebd6d?(this['skybox']=_0x4ebd6d[-0xa*0x377+0x19a9*0x1+0x8fd*0x1]||null,_0x4ebd6d[-0x1ead+0x1*-0x223e+-0x67e*-0xa]&&!_0x4ebd6d[-0xfd4*0x2+0x205e+-0xb5]['cubemap']?this['envAtlas']=_0x4ebd6d[-0x133c*-0x1+0x21c4*-0x1+0x3d*0x3d]:this['prefiltere'+'dCubemaps']=_0x4ebd6d['slice'](-0xf88+0x15*-0xfb+0x11*0x220)):(this['skybox']=null,this['envAtlas']=null);}get['lightmapPi'+'xelFormat'](){return this['lightmapHD'+'R']&&this['device']['getRendera'+'bleHdrForm'+'at']()||Ne;}}h(Et,'EVENT_SETL'+'AYERS','set:layers'),h(Et,'EVENT_SETS'+'KYBOX','set:skybox'),h(Et,'EVENT_PRER'+'ENDER','prerender'),h(Et,'EVENT_POST'+'RENDER','postrender'),h(Et,'EVENT_PRER'+'ENDER_LAYE'+'R','prerender:'+'layer'),h(Et,'EVENT_POST'+'RENDER_LAY'+'ER','postrender'+':layer'),h(Et,'EVENT_PREC'+'ULL','precull'),h(Et,'EVENT_POST'+'CULL','postcull');class Ky{constructor(_0x38ad5e,_0x2ded69,_0x432464){this['device']=_0x38ad5e,this['inverseBin'+'dPose']=_0x2ded69,this['boneNames']=_0x432464;}}const tA=[0x144+-0x241b+0x22d7,-0x2*-0x107+0x137b+0x25*-0x95,0xc*-0x1d5+0x1d30+-0x733,-0x7f8+-0x11bd*-0x1+-0x9c5*0x1,-0xee*-0x7+-0x1b5e+0x14dc,-0x125f*-0x2+0x132*-0x3+0x17*-0x171,-0x1777*-0x1+-0x924+-0xe53,-0x1*0xc9b+0x17*0xa3+-0x20a,-0x2373+0x4d5+0x1e9f,-0x1f2b+-0x265+0x2190,0x1*-0x25ff+0x11da*0x1+0x23d*0x9,-0x1b56+-0xd*-0x190+0x707],sA=[0x2*-0x482+-0xd82+0x5d*0x3e,-0xa0b*0x2+-0x1c*0xf2+-0x2e8f*-0x1,0x3*-0x31a+0x2297+-0x1946,0x1e52*-0x1+0x1393+0xac1*0x1,0x33d+0xa*0x257+-0x1aa0,-0x25b4+-0x2*-0x1e4+0x21ed];class iA extends me{constructor(_0xd39298,_0x5f3002){super(),this['_device']=_0xd39298,this['_pixelsPer'+'Unit']=_0x5f3002&&_0x5f3002['pixelsPerU'+'nit']!==void(0xd16*-0x2+-0x267c+0x40a8)?_0x5f3002['pixelsPerU'+'nit']:-0x13d*0x1d+-0x1145+0x352f,this['_renderMod'+'e']=_0x5f3002&&_0x5f3002['renderMode']!==void(0x26*-0xad+-0x70c+-0x1*-0x20ba)?_0x5f3002['renderMode']:ci,this['_atlas']=_0x5f3002&&_0x5f3002['atlas']!==void(-0x18*-0x156+0x741*-0x1+0x845*-0x3)?_0x5f3002['atlas']:null,this['_frameKeys']=_0x5f3002&&_0x5f3002['frameKeys']!==void(-0x10e9+-0x2*-0x298+-0xbb9*-0x1)?_0x5f3002['frameKeys']:null,this['_meshes']=[],this['_updatingP'+'roperties']=!(0xf17+-0xe3*-0x6+-0x8*0x28d),this['_meshesDir'+'ty']=!(-0xa3a+0x439*0x2+-0x1c9*-0x1),this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes']();}set['frameKeys'](_0x1a54fb){this['_frameKeys']=_0x1a54fb,this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x133f+0x1*0x644+0xcfb):this['_createMes'+'hes']()),this['fire']('set:frameK'+'eys',_0x1a54fb);}get['frameKeys'](){return this['_frameKeys'];}set['atlas'](_0x10a2ec){_0x10a2ec!==this['_atlas']&&(this['_atlas']&&(this['_atlas']['off']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['off']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['off']('remove:fra'+'me',this['_onFrameRe'+'moved'],this)),this['_atlas']=_0x10a2ec,this['_atlas']&&this['_frameKeys']&&(this['_atlas']['on']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['on']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['on']('remove:fra'+'me',this['_onFrameRe'+'moved'],this),this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x1b67*0x1+-0xfe4+-0x7*0x1a5):this['_createMes'+'hes']()),this['fire']('set:atlas',_0x10a2ec));}get['atlas'](){return this['_atlas'];}set['pixelsPerU'+'nit'](_0x32cf06){this['_pixelsPer'+'Unit']!==_0x32cf06&&(this['_pixelsPer'+'Unit']=_0x32cf06,this['fire']('set:pixels'+'PerUnit',_0x32cf06),this['_atlas']&&this['_frameKeys']&&this['renderMode']===ci&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x1*-0x562+0x2206+-0x2768):this['_createMes'+'hes']()));}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}set['renderMode'](_0x36d7aa){if(this['_renderMod'+'e']===_0x36d7aa)return;const _0x51803d=this['_renderMod'+'e'];this['_renderMod'+'e']=_0x36d7aa,this['fire']('set:render'+'Mode',_0x36d7aa),(_0x51803d===ci||_0x36d7aa===ci)&&this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x11bd+0x25dd+0x379a*-0x1):this['_createMes'+'hes']());}get['renderMode'](){return this['_renderMod'+'e'];}get['meshes'](){return this['_meshes'];}['_createMes'+'hes'](){const _0x5d0ebe=this['_meshes']['length'];for(let _0x4af033=0xf53+-0x1816+0x8c3;_0x4af033<_0x5d0ebe;_0x4af033++){const _0x4f6ddd=this['_meshes'][_0x4af033];_0x4f6ddd&&_0x4f6ddd['destroy']();}const _0x3cdcd0=this['_frameKeys']['length'];this['_meshes']=new Array(_0x3cdcd0);const _0xf374f9=this['renderMode']===Pt||this['_renderMod'+'e']===Mt?this['_create9Sl'+'iceMesh']:this['_createSim'+'pleMesh'];for(let _0x4649c1=0x21b9*-0x1+-0x772*-0x5+-0x381;_0x4649c1<_0x3cdcd0;_0x4649c1++){const _0x40e208=this['_atlas']['frames'][this['_frameKeys'][_0x4649c1]];this['_meshes'][_0x4649c1]=_0x40e208?_0xf374f9['call'](this,_0x40e208):null;}this['fire']('set:meshes');}['_createSim'+'pleMesh'](_0x5c8c83){const _0xa4242f=_0x5c8c83['rect'],_0x8774d6=this['_atlas']['texture']['width'],_0x4a5ca6=this['_atlas']['texture']['height'],_0x2b09ac=_0xa4242f['z']/this['_pixelsPer'+'Unit'],_0x46c191=_0xa4242f['w']/this['_pixelsPer'+'Unit'],_0x27c47b=_0x5c8c83['pivot']['x'],_0x143d31=_0x5c8c83['pivot']['y'],_0x50f25a=[-_0x27c47b*_0x2b09ac,-_0x143d31*_0x46c191,-0x15ae+0x8e6+0xcc8,(0x1e31+-0x11b*0x16+-0x5de-_0x27c47b)*_0x2b09ac,-_0x143d31*_0x46c191,-0x2*-0x1257+-0xfdd*-0x1+0x348b*-0x1,(-0x6b*0x2f+0x2603*-0x1+0x39a9*0x1-_0x27c47b)*_0x2b09ac,(-0x21f2+-0x1345*0x1+0x3538-_0x143d31)*_0x46c191,-0x1029*-0x2+-0x621*0x1+-0x1a31,-_0x27c47b*_0x2b09ac,(-0xeab+-0x5*0x6cd+0x11*0x2dd-_0x143d31)*_0x46c191,-0x16d9+0x1*-0x19ee+0x30c7],_0x20ccad=_0xa4242f['x']/_0x8774d6,_0x466b37=-0xb64+0x31c*-0x4+0x17d5-_0xa4242f['y']/_0x4a5ca6,_0x4c9417=(_0xa4242f['x']+_0xa4242f['z'])/_0x8774d6,_0x1608d8=0x306+-0x2*0x12a8+-0x1*-0x224b-(_0xa4242f['y']+_0xa4242f['w'])/_0x4a5ca6,_0x144341=[_0x20ccad,_0x466b37,_0x4c9417,_0x466b37,_0x4c9417,_0x1608d8,_0x20ccad,_0x1608d8],_0x5d6db9=new ga();return _0x5d6db9['positions']=_0x50f25a,_0x5d6db9['normals']=tA,_0x5d6db9['uvs']=_0x144341,_0x5d6db9['indices']=sA,Ge['fromGeomet'+'ry'](this['_device'],_0x5d6db9);}['_create9Sl'+'iceMesh'](){const _0x2f9bba=J['ONE'],_0x478566=-0x2b2+-0x1*-0x75c+-0x4a7,_0x2bb99b=-0x1f95*0x1+-0x1*-0x18ec+0xf4*0x7,_0x21a56e=[],_0x465dd4=[],_0x1b5076=[],_0x2692fa=[];let _0x5ce591=0x1072+-0x1*-0x25be+0x1210*-0x3;for(let _0x19e9f4=0x5a7*0x5+0x127a+-0x1*0x2ebd;_0x19e9f4<=_0x478566;_0x19e9f4++){const _0x5d2d26=_0x19e9f4===0xbce*0x1+-0x3f1*0x7+0x1*0xfc9||_0x19e9f4===_0x478566?-0x17d+-0x16b0+-0x3*-0x80f:0x1222+0xb18+-0x1d39*0x1;for(let _0x5b49e5=-0x5*-0x63d+-0x4c3+-0x1a6e;_0x5b49e5<=_0x2bb99b;_0x5b49e5++){const _0x4256b4=-_0x2f9bba['x']+(0x1*0x97+-0xac5+0xa30*0x1)*_0x2f9bba['x']*(_0x19e9f4<=-0x1435+-0x160f+0x2a45?0x270e+-0x277*0x7+-0x15cd:-0x42f+0x1*0x11d2+-0xda*0x10)/_0x478566,_0x4bc1ae=0x31+0x6f6+0x727*-0x1,_0x39eabe=-(-_0x2f9bba['y']+(-0x6a8+-0x11f0+0x189a)*_0x2f9bba['y']*(_0x5b49e5<=-0xb5*0x17+-0x17fa+0x283e?0x142*-0x4+-0xb84+0x108c:-0xcca*-0x1+0x227*0x2+-0x1115)/_0x2bb99b),_0x2b872c=_0x5b49e5===-0x5*-0x761+-0x1398+0x1*-0x114d||_0x5b49e5===_0x2bb99b?-0x1*-0x1d42+0x59*-0x52+-0xc*0x10:0xb*-0x381+0x1aee+0xb9e;_0x21a56e['push'](-_0x4256b4,_0x4bc1ae,_0x39eabe),_0x465dd4['push'](0x148+0x1*-0xdfb+0xcb3,0x13*0x124+0x6ae+-0x1c59,-0x2209+0xc34+-0x1*-0x15d5),_0x1b5076['push'](_0x5d2d26,_0x2b872c),_0x19e9f4<_0x478566&&_0x5b49e5<_0x2bb99b&&(_0x2692fa['push'](_0x5ce591+_0x2bb99b+(-0x257*-0x3+-0x551*-0x2+-0x11a6),_0x5ce591+(-0x1fed*-0x1+-0x1bea+-0x13*0x36),_0x5ce591),_0x2692fa['push'](_0x5ce591+_0x2bb99b+(0x1*0x5f+0xf6e+0x6*-0x2a2),_0x5ce591+_0x2bb99b+(-0x19af+-0x2477+-0xa5c*-0x6),_0x5ce591+(0xc46+0x12c1+-0x1f06))),_0x5ce591++;}}const _0x1bbd1a=new ga();return _0x1bbd1a['positions']=_0x21a56e,_0x1bbd1a['normals']=_0x465dd4,_0x1bbd1a['uvs']=_0x1b5076,_0x1bbd1a['indices']=_0x2692fa,Ge['fromGeomet'+'ry'](this['_device'],_0x1bbd1a);}['_onSetFram'+'es'](_0x1c7cf9){this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x120+-0x177d+0x189d*0x1):this['_createMes'+'hes']();}['_onFrameCh'+'anged'](_0x1f09ea,_0x3efa50){const _0x47b96f=this['_frameKeys']['indexOf'](_0x1f09ea);_0x47b96f<0x48*0x58+0x35e+-0x1c1e||(_0x3efa50?this['renderMode']===ci&&(this['_meshes'][_0x47b96f]=this['_createSim'+'pleMesh'](_0x3efa50)):this['_meshes'][_0x47b96f]=null,this['fire']('set:meshes'));}['_onFrameRe'+'moved'](_0x45fa7c){const _0x4c05a0=this['_frameKeys']['indexOf'](_0x45fa7c);_0x4c05a0<0x13*-0x1e+0xae8*-0x1+0x691*0x2||(this['_meshes'][_0x4c05a0]=null,this['fire']('set:meshes'));}['startUpdat'+'e'](){this['_updatingP'+'roperties']=!(-0x1dec+0xc65+0x7*0x281),this['_meshesDir'+'ty']=!(-0x4*0x5cc+0x2*0xef+0x1553*0x1);}['endUpdate'](){this['_updatingP'+'roperties']=!(-0x258a+0xb3*0xd+0x3*0x97c),this['_meshesDir'+'ty']&&this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes'](),this['_meshesDir'+'ty']=!(0x1e8*0x1+-0x1825+0x163e);}['destroy'](){for(const _0x52e07b of this['_meshes'])_0x52e07b&&_0x52e07b['destroy']();this['_meshes']['length']=-0x22e4+-0x12fb+0x3*0x11f5;}}class rA extends me{constructor(){super(),this['_texture']=null,this['_frames']=null;}set['texture'](_0x227ad6){this['_texture']=_0x227ad6,this['fire']('set:textur'+'e',_0x227ad6);}get['texture'](){return this['_texture'];}set['frames'](_0x5334be){this['_frames']=_0x5334be,this['fire']('set:frames',_0x5334be);}get['frames'](){return this['_frames'];}['setFrame'](_0x3f730d,_0xb08552){let _0x4b56a3=this['_frames'][_0x3f730d];_0x4b56a3?(_0x4b56a3['rect']['copy'](_0xb08552['rect']),_0x4b56a3['pivot']['copy'](_0xb08552['pivot']),_0x4b56a3['border']['copy'](_0xb08552['border'])):(_0x4b56a3={'rect':_0xb08552['rect']['clone'](),'pivot':_0xb08552['pivot']['clone'](),'border':_0xb08552['border']['clone']()},this['_frames'][_0x3f730d]=_0x4b56a3),this['fire']('set:frame',_0x3f730d['toString'](),_0x4b56a3);}['removeFram'+'e'](_0x310f28){const _0x13ab0b=this['_frames'][_0x310f28];_0x13ab0b&&(delete this['_frames'][_0x310f28],this['fire']('remove:fra'+'me',_0x310f28['toString'](),_0x13ab0b));}['destroy'](){this['_texture']&&this['_texture']['destroy']();}}class N_{constructor(_0x3b3992,_0xc888e6,_0x21b886,_0x4ecdff){this['time']=_0x3b3992,this['position']=_0xc888e6,this['rotation']=_0x21b886,this['scale']=_0x4ecdff;}}class k_{constructor(){this['_name']='',this['_keys']=[];}}class U_{constructor(){h(this,'name',''),h(this,'duration',-0x18f7+-0x1*-0x135b+0x59c),(this['_nodes']=[],this['_nodeDict']={});}['getNode'](_0xe7d9f){return this['_nodeDict'][_0xe7d9f];}['addNode'](_0x3d95ac){this['_nodes']['push'](_0x3d95ac),this['_nodeDict'][_0x3d95ac['_name']]=_0x3d95ac;}get['nodes'](){return this['_nodes'];}}class aA{constructor(){this['_written']=!(0x2364*-0x1+-0x1685+0x39ea),this['_name']='',this['_keyFrames']=[],this['_quat']=new le(),this['_pos']=new D(),this['_scale']=new D(),this['_targetNod'+'e']=null;}['getTarget'](){return this['_targetNod'+'e'];}['setTarget'](_0x47a9f5){this['_targetNod'+'e']=_0x47a9f5;}}class Yd{constructor(_0x2785f9){h(this,'looping',!(0xe7e+0x1*0x187d+0x26fb*-0x1)),(this['_animation']=null,this['_time']=-0x21e*-0x7+0x1fb*-0xb+0x6f7,this['_interpola'+'tedKeys']=[],this['_interpola'+'tedKeyDict']={},this['_currKeyIn'+'dices']={},this['graph']=null);const _0x4fea80=_0x32a0c3=>{const _0x535cae=new aA();_0x535cae['_name']=_0x32a0c3['name'],this['_interpola'+'tedKeys']['push'](_0x535cae),this['_interpola'+'tedKeyDict'][_0x32a0c3['name']]=_0x535cae,this['_currKeyIn'+'dices'][_0x32a0c3['name']]=-0x1b17+-0x626+0x213d;for(let _0x1a4845=-0x11ab*-0x1+-0x24c3*0x1+0x1318;_0x1a4845<_0x32a0c3['_children']['length'];_0x1a4845++)_0x4fea80(_0x32a0c3['_children'][_0x1a4845]);};_0x4fea80(_0x2785f9);}set['animation'](_0x38b1cf){this['_animation']=_0x38b1cf,this['currentTim'+'e']=0x1709+0x1*-0x1ebf+0x7b6;}get['animation'](){return this['_animation'];}set['currentTim'+'e'](_0x4d4091){this['_time']=_0x4d4091;const _0x1873a1=this['_interpola'+'tedKeys']['length'];for(let _0x387d6f=0x1*-0xc31+-0x2363+0x54*0x91;_0x387d6f<_0x1873a1;_0x387d6f++){const _0x4619e0=this['_interpola'+'tedKeys'][_0x387d6f]['_name'];this['_currKeyIn'+'dices'][_0x4619e0]=0x1*-0x1f73+-0x65f*-0x4+0x5f7*0x1;}this['addTime'](0x1a77+-0x164e+-0x429),this['updateGrap'+'h']();}get['currentTim'+'e'](){return this['_time'];}get['numNodes'](){return this['_interpola'+'tedKeys']['length'];}['addTime'](_0x174c29){if(this['_animation']!==null){const _0x20df87=this['_animation']['_nodes'],_0x543ef1=this['_animation']['duration'];if(this['_time']===_0x543ef1&&!this['looping'])return;if(this['_time']+=_0x174c29,this['_time']>_0x543ef1){this['_time']=this['looping']?-0x166b+-0x1b5+-0x608*-0x4:_0x543ef1;for(let _0x2df2ff=0xd72+-0x16*-0x1a9+0x52*-0x9c;_0x2df2ff<_0x20df87['length'];_0x2df2ff++){const _0x5d194e=_0x20df87[_0x2df2ff]['_name'];this['_currKeyIn'+'dices'][_0x5d194e]=-0xf6e+0x2*0x9c2+-0x416;}}else{if(this['_time']<0x2135+0x19b9+-0x3aee){this['_time']=this['looping']?_0x543ef1:0x2667+-0x903+-0x26*0xc6;for(let _0x1dfae7=0x12*-0x7c+0x10*0x202+0xe*-0x1ac;_0x1dfae7<_0x20df87['length'];_0x1dfae7++){const _0x3df438=_0x20df87[_0x1dfae7],_0xbe7f67=_0x3df438['_name'];this['_currKeyIn'+'dices'][_0xbe7f67]=_0x3df438['_keys']['length']-(-0xe5*-0x1b+-0x1ac9*0x1+0x2a4);}}}const _0x37f992=_0x174c29>=0x4*-0x2dd+-0x986+0x14fa?0x9eb+-0x747+-0x2a3:-(-0x2fe+0x1*-0x17cf+0x1ace);for(let _0x5d5d8d=0x1*0x1e65+0x10b5+-0x178d*0x2;_0x5d5d8d<_0x20df87['length'];_0x5d5d8d++){const _0x2287e1=_0x20df87[_0x5d5d8d],_0x1ed769=_0x2287e1['_name'],_0x276dab=_0x2287e1['_keys'],_0x2fbfea=this['_interpola'+'tedKeyDict'][_0x1ed769];if(_0x2fbfea===void(-0x1*-0x977+0x1d5e+-0x26d5)){w['warn']('Unknown\x20sk'+'eleton\x20nod'+'e\x20name:\x20'+_0x1ed769);continue;}let _0xf69d31=!(0x165f+-0x4fd+-0x3*0x5cb);if(_0x276dab['length']!==0x11e*-0x11+-0x1*0x2348+0x3647)for(let _0x4de4e6=this['_currKeyIn'+'dices'][_0x1ed769];_0x4de4e6<_0x276dab['length']-(-0xd*-0x115+0x1525+-0x2335)&&_0x4de4e6>=0x4dd*-0x7+0x1ae0+0x72b;_0x4de4e6+=_0x37f992){const _0x2c5f74=_0x276dab[_0x4de4e6],_0x359bab=_0x276dab[_0x4de4e6+(-0x29*-0x47+0x20b9+-0x1*0x2c17)];if(_0x2c5f74['time']<=this['_time']&&_0x359bab['time']>=this['_time']){const _0x40a201=(this['_time']-_0x2c5f74['time'])/(_0x359bab['time']-_0x2c5f74['time']);_0x2fbfea['_pos']['lerp'](_0x2c5f74['position'],_0x359bab['position'],_0x40a201),_0x2fbfea['_quat']['slerp'](_0x2c5f74['rotation'],_0x359bab['rotation'],_0x40a201),_0x2fbfea['_scale']['lerp'](_0x2c5f74['scale'],_0x359bab['scale'],_0x40a201),_0x2fbfea['_written']=!(-0x1d01+-0x2*0x95c+-0x283*-0x13),this['_currKeyIn'+'dices'][_0x1ed769]=_0x4de4e6,_0xf69d31=!(-0x1ee0+0x1*-0x1a51+0x1*0x3931);break;}}(_0x276dab['length']===-0x104c*-0x1+-0x179f*-0x1+-0x27ea||!_0xf69d31&&this['_time']===-0x143f+-0x1b0a*-0x1+-0x6cb&&this['looping'])&&(_0x2fbfea['_pos']['copy'](_0x276dab[0x1aad+0xe59*-0x1+0x41c*-0x3]['position']),_0x2fbfea['_quat']['copy'](_0x276dab[-0xf6b*0x1+-0x1*0xd0a+0x1c75]['rotation']),_0x2fbfea['_scale']['copy'](_0x276dab[0x52a*0x6+-0x5*-0x17b+-0x2663]['scale']),_0x2fbfea['_written']=!(-0x3*0xae7+0x1455+0xc60));}}}['blend'](_0x3ad0b0,_0x23aedf,_0x1085fe){const _0x4204ae=this['_interpola'+'tedKeys']['length'];for(let _0x34e91d=-0x239*0x7+-0x50*-0xd+0x1b*0x6d;_0x34e91d<_0x4204ae;_0x34e91d++){const _0x23f29a=_0x3ad0b0['_interpola'+'tedKeys'][_0x34e91d],_0x33eb96=_0x23aedf['_interpola'+'tedKeys'][_0x34e91d],_0x20dc19=this['_interpola'+'tedKeys'][_0x34e91d];_0x23f29a['_written']&&_0x33eb96['_written']?(_0x20dc19['_quat']['slerp'](_0x23f29a['_quat'],_0x23aedf['_interpola'+'tedKeys'][_0x34e91d]['_quat'],_0x1085fe),_0x20dc19['_pos']['lerp'](_0x23f29a['_pos'],_0x23aedf['_interpola'+'tedKeys'][_0x34e91d]['_pos'],_0x1085fe),_0x20dc19['_scale']['lerp'](_0x23f29a['_scale'],_0x33eb96['_scale'],_0x1085fe),_0x20dc19['_written']=!(0x1e8c+0x6*-0x248+0x2*-0x86e)):_0x23f29a['_written']?(_0x20dc19['_quat']['copy'](_0x23f29a['_quat']),_0x20dc19['_pos']['copy'](_0x23f29a['_pos']),_0x20dc19['_scale']['copy'](_0x23f29a['_scale']),_0x20dc19['_written']=!(-0x1d08+0x1c+0x269*0xc)):_0x33eb96['_written']&&(_0x20dc19['_quat']['copy'](_0x33eb96['_quat']),_0x20dc19['_pos']['copy'](_0x33eb96['_pos']),_0x20dc19['_scale']['copy'](_0x33eb96['_scale']),_0x20dc19['_written']=!(-0xbff*0x3+0x35*-0x22+0x1*0x2b07));}}['setGraph'](_0x271ede){if(this['graph']=_0x271ede,_0x271ede)for(let _0x2308d8=0xfa2+-0x1*0xa61+0x10d*-0x5;_0x2308d8<this['_interpola'+'tedKeys']['length'];_0x2308d8++){const _0x4479b0=this['_interpola'+'tedKeys'][_0x2308d8],_0x5ca191=_0x271ede['findByName'](_0x4479b0['_name']);this['_interpola'+'tedKeys'][_0x2308d8]['setTarget'](_0x5ca191);}else{for(let _0x223979=0x9*0x183+0x22b1+0x1826*-0x2;_0x223979<this['_interpola'+'tedKeys']['length'];_0x223979++)this['_interpola'+'tedKeys'][_0x223979]['setTarget'](null);}}['updateGrap'+'h'](){if(this['graph'])for(let _0x3c2429=0x1f32+-0xbe*-0xe+-0x2996;_0x3c2429<this['_interpola'+'tedKeys']['length'];_0x3c2429++){const _0x817b66=this['_interpola'+'tedKeys'][_0x3c2429];if(_0x817b66['_written']){const _0x280a53=_0x817b66['getTarget']();_0x280a53['localPosit'+'ion']['copy'](_0x817b66['_pos']),_0x280a53['localRotat'+'ion']['copy'](_0x817b66['_quat']),_0x280a53['localScale']['copy'](_0x817b66['_scale']),_0x280a53['_dirtyLoca'+'l']||_0x280a53['_dirtifyLo'+'cal'](),_0x817b66['_written']=!(0x23cf+-0xaf5+-0x18d9);}}}}const Bs=(0x9*0x68+-0x1a65+0x16c1)/(0x10e0+0xb9c+-0x1c3c),si=-0x3*0x631+-0xc0+0x4*0x4d5-Bs*(0xb0f*0x3+0x25d*0x5+-0x167e*0x2);class Wp extends ga{constructor(_0xf24c0e,_0x56e893,_0x53a349,_0x1367b4,_0x348765,_0x1a992b){super();const _0xe42bcc=new D(),_0x5408c6=new D(),_0x57564d=new D(),_0x3b253a=new D(),_0x570edc=new D(),_0x5ce8bc=new D(),_0x44e11e=[],_0x2f5fa3=[],_0x1aef0b=[],_0x20a305=[],_0x207607=[];let _0x503153;if(_0x53a349>0x1*0x13c1+-0x26*0x7a+-0x1a5){for(let _0x3865d7=0xd4d*0x1+-0x3*0xb35+0x66*0x33;_0x3865d7<=_0x1367b4;_0x3865d7++)for(let _0x21ec9b=0xa45+0x1e9c*-0x1+-0x7f*-0x29;_0x21ec9b<=_0x348765;_0x21ec9b++){const _0x2d1765=_0x21ec9b/_0x348765*(0x2183*-0x1+0x1237*0x1+-0xf4e*-0x1)*Math['PI']-Math['PI'],_0x2e37e5=Math['sin'](_0x2d1765),_0x8bcd4=Math['cos'](_0x2d1765);_0x570edc['set'](_0x2e37e5*_0xf24c0e,-_0x53a349/(0x1dcb+0x4d6+-0x229f),_0x8bcd4*_0xf24c0e),_0x3b253a['set'](_0x2e37e5*_0x56e893,_0x53a349/(-0xd8c+0x904+0x1*0x48a),_0x8bcd4*_0x56e893),_0xe42bcc['lerp'](_0x570edc,_0x3b253a,_0x3865d7/_0x1367b4),_0x5408c6['sub2'](_0x3b253a,_0x570edc)['normalize'](),_0x5ce8bc['set'](_0x8bcd4,0x8dd+-0x2ea+-0x5f3*0x1,-_0x2e37e5),_0x57564d['cross'](_0x5ce8bc,_0x5408c6)['normalize'](),_0x44e11e['push'](_0xe42bcc['x'],_0xe42bcc['y'],_0xe42bcc['z']),_0x2f5fa3['push'](_0x57564d['x'],_0x57564d['y'],_0x57564d['z']);let _0x6a2e15=_0x21ec9b/_0x348765,_0x292b75=_0x3865d7/_0x1367b4;_0x1aef0b['push'](_0x6a2e15,0x1d08*-0x1+0x1*-0xd5+-0x1*-0x1dde-_0x292b75);const _0x283c52=_0x292b75;if(_0x292b75=_0x6a2e15,_0x6a2e15=_0x283c52,_0x6a2e15=_0x6a2e15*si+Bs,_0x292b75=_0x292b75*si+Bs,_0x6a2e15/=0x1b39+-0x153b+-0x5fb,_0x20a305['push'](_0x6a2e15,0x57*0x4d+-0x1695+-0x395-_0x292b75),_0x3865d7<_0x1367b4&&_0x21ec9b<_0x348765){const _0x181ee5=_0x3865d7*(_0x348765+(0x1429+0x47e+-0x18a6))+_0x21ec9b,_0x429b01=_0x3865d7*(_0x348765+(-0xf*-0x22a+-0x382*-0xa+-0x71*0x99))+(_0x21ec9b+(-0xa25+0x14a4+0x2*-0x53f)),_0x1204e9=(_0x3865d7+(0xd*-0x6a+-0xf02+0x1465))*(_0x348765+(-0xcaa+-0x2*0x38f+0x5*0x3f5))+_0x21ec9b,_0x853a2a=(_0x3865d7+(-0x1*0x849+-0x1497+-0x1*-0x1ce1))*(_0x348765+(-0x1e24+0x9dc*-0x3+0x3bb9))+(_0x21ec9b+(0xd*-0xf0+-0x14*0x5f+0x1*0x139d));_0x207607['push'](_0x181ee5,_0x429b01,_0x1204e9),_0x207607['push'](_0x429b01,_0x853a2a,_0x1204e9);}}}if(_0x1a992b){const _0x3e7a12=Math['floor'](_0x348765/(-0xf39+0x4b7+0xa84)),_0x2b6238=_0x348765,_0x50ad4a=_0x53a349/(0x248c+0x1ed*-0x5+0x53*-0x53);for(let _0xc7766c=0x6*0x4bf+-0x3*-0x943+-0x3843;_0xc7766c<=_0x3e7a12;_0xc7766c++){const _0x5a3957=_0xc7766c*Math['PI']*(-0x2701+-0xbf*-0x19+0x145a+0.5)/_0x3e7a12,_0xfc002e=Math['sin'](_0x5a3957),_0x3df7a0=Math['cos'](_0x5a3957);for(let _0x542e5f=0x1034+-0xd05+-0x32f;_0x542e5f<=_0x2b6238;_0x542e5f++){const _0x13f13c=_0x542e5f*(0x1cb*-0x10+-0xa0+-0x342*-0x9)*Math['PI']/_0x2b6238-Math['PI']/(-0x2f6+-0x1c3d+0x1f35),_0x3ef4b7=Math['sin'](_0x13f13c),_0x25d772=Math['cos'](_0x13f13c)*_0xfc002e,_0x26980f=_0x3df7a0,_0x5d19f6=_0x3ef4b7*_0xfc002e;let _0x214aec=-0x4d+0x2357+-0x2309*0x1-_0x542e5f/_0x2b6238,_0x4788b0=0x18f4+0x1869+0x6c*-0x75-_0xc7766c/_0x3e7a12;_0x44e11e['push'](_0x25d772*_0x56e893,_0x26980f*_0x56e893+_0x50ad4a,_0x5d19f6*_0x56e893),_0x2f5fa3['push'](_0x25d772,_0x26980f,_0x5d19f6),_0x1aef0b['push'](_0x214aec,0x1482+0x260e+0x13*-0x315-_0x4788b0),_0x214aec=_0x214aec*si+Bs,_0x4788b0=_0x4788b0*si+Bs,_0x214aec/=-0x6dc+-0x1e52+0x2531,_0x4788b0/=-0x264+-0x1192*0x1+0x13f9,_0x214aec+=(0x1a73+-0x5b*-0x1+-0x3*0x8ef)/(-0x1*-0xc83+-0x2*-0x64d+-0x6*0x42f),_0x20a305['push'](_0x214aec,0x39c+0x15eb+-0x1986-_0x4788b0);}}_0x503153=(_0x1367b4+(-0x21b4+-0x19a+0x234f))*(_0x348765+(0x121e+-0x25f*0xd+0xcb6));for(let _0x252314=-0x1dfc+-0x871+0x266d;_0x252314<_0x3e7a12;++_0x252314)for(let _0x512a4f=-0x5*0x79+0x100a+0x48f*-0x3;_0x512a4f<_0x2b6238;++_0x512a4f){const _0x2db128=_0x252314*(_0x2b6238+(0x6eb+0xc7*-0x1e+0x2*0x834))+_0x512a4f,_0x5295ef=_0x2db128+_0x2b6238+(0x1a*-0xe3+-0x3b*0x7b+0x3368);_0x207607['push'](_0x503153+_0x2db128+(0x20f3+-0xd2b+-0x13c7),_0x503153+_0x5295ef,_0x503153+_0x2db128),_0x207607['push'](_0x503153+_0x2db128+(0x1d*-0x13c+-0xae9+-0x3*-0xf92),_0x503153+_0x5295ef+(0x961+-0x2120+0x17c0),_0x503153+_0x5295ef);}for(let _0xdf2290=-0x1*-0x1643+0xfdc+-0x3*0xcb5;_0xdf2290<=_0x3e7a12;_0xdf2290++){const _0x1ea143=Math['PI']*(-0x1421*0x1+-0x1*0xbc3+-0x13a*-0x1a+0.5)+_0xdf2290*Math['PI']*(-0x3b*-0x10+0x4*-0x94f+0x1*0x218c+0.5)/_0x3e7a12,_0x134c98=Math['sin'](_0x1ea143),_0xa895b5=Math['cos'](_0x1ea143);for(let _0x3fc39a=-0x856+-0x1bd8+0xb*0x34a;_0x3fc39a<=_0x2b6238;_0x3fc39a++){const _0x15bfd8=_0x3fc39a*(-0xc*-0x2f+-0x9*-0x8f+-0x739)*Math['PI']/_0x2b6238-Math['PI']/(-0x18f6+0xbe5*-0x3+0x3ca7),_0x3b2dfa=Math['sin'](_0x15bfd8),_0x147fed=Math['cos'](_0x15bfd8)*_0x134c98,_0x38bcf3=_0xa895b5,_0x307bb7=_0x3b2dfa*_0x134c98;let _0x1162e6=0x4ca+-0x49*-0x4f+-0x1b50-_0x3fc39a/_0x2b6238,_0x4efd07=0x75+0xa3*0x1+-0x117-_0xdf2290/_0x3e7a12;_0x44e11e['push'](_0x147fed*_0x56e893,_0x38bcf3*_0x56e893-_0x50ad4a,_0x307bb7*_0x56e893),_0x2f5fa3['push'](_0x147fed,_0x38bcf3,_0x307bb7),_0x1aef0b['push'](_0x1162e6,-0x2700+-0x14fc+0x3bfd-_0x4efd07),_0x1162e6=_0x1162e6*si+Bs,_0x4efd07=_0x4efd07*si+Bs,_0x1162e6/=0x12b0+0x1afc+-0x2da9,_0x4efd07/=-0x1ee4+-0x111d+0x3004,_0x1162e6+=(0x877+-0x1*-0x630+0x17*-0xa3)/(-0xa*0x325+-0x1e8f+-0x372*-0x12),_0x20a305['push'](_0x1162e6,0xc4c+0x9*-0xb9+-0x39*0x1a-_0x4efd07);}}_0x503153=(_0x1367b4+(0x1869+0xcc0+-0x2528))*(_0x348765+(-0x46c+-0x224d+0x135d*0x2))+(_0x2b6238+(0x4bd*-0x1+0x1b22+-0x1664))*(_0x3e7a12+(-0x1*-0x23ea+-0x187d*0x1+0x4*-0x2db));for(let _0x188f06=-0xb7a+0x1756+-0x2e*0x42;_0x188f06<_0x3e7a12;++_0x188f06)for(let _0x3a5b90=-0x20ff+0x21dc+0x11*-0xd;_0x3a5b90<_0x2b6238;++_0x3a5b90){const _0x38f9e0=_0x188f06*(_0x2b6238+(-0x76e+0xe5*-0x2b+0x2de6))+_0x3a5b90,_0x251e1c=_0x38f9e0+_0x2b6238+(-0xd33*-0x1+0x1a66+0x5a8*-0x7);_0x207607['push'](_0x503153+_0x38f9e0+(0xd31*-0x1+-0x1b92+-0x4*-0xa31),_0x503153+_0x251e1c,_0x503153+_0x38f9e0),_0x207607['push'](_0x503153+_0x38f9e0+(-0x1*-0x1ba9+0x1bf8+-0x37a0),_0x503153+_0x251e1c+(-0x2481+-0x1233+0x36b5*0x1),_0x503153+_0x251e1c);}}else{if(_0x503153=(_0x1367b4+(-0x25*-0x6d+-0xe33+-0x18d))*(_0x348765+(0x82c+-0x10c2+0x897*0x1)),_0xf24c0e>-0xa2c+0x97*-0x1d+-0x1b47*-0x1)for(let _0x192f92=0xa*-0x35+-0x209*0xb+0x1875;_0x192f92<_0x348765;_0x192f92++){const _0xc34046=_0x192f92/_0x348765*(-0x1b49+-0x2e0+-0x1e2b*-0x1)*Math['PI'],_0x5132a8=Math['sin'](_0xc34046),_0x3039cd=-_0x53a349/(0x1*0x4fd+-0x3*0xc1b+0x1f56),_0x376bbc=Math['cos'](_0xc34046);let _0x386652=-0xf*0xa5+0x21*-0xe3+0x26ef-(_0x5132a8+(0x13f6+0x191*0x9+-0x220e))/(0x235*-0x4+-0x13*0x46+0x4*0x382),_0x4d53ac=(_0x376bbc+(0x1d64+0x8*-0x3dc+0x17d))/(0x151c+-0x1*0x105d+-0x1*0x4bd);_0x44e11e['push'](_0x5132a8*_0xf24c0e,_0x3039cd,_0x376bbc*_0xf24c0e),_0x2f5fa3['push'](0x21cb+0x7*-0x339+-0xb3c,-(-0x1b*-0x161+0x14fa+0x2*-0x1d1a),0xda9+0x4d1+-0x127a),_0x1aef0b['push'](_0x386652,-0x213d+-0x574+-0x1359*-0x2-_0x4d53ac),_0x386652=_0x386652*si+Bs,_0x4d53ac=_0x4d53ac*si+Bs,_0x386652/=-0xeba+-0x3*0x234+0x1559,_0x4d53ac/=0x264d+-0x931+0x23d*-0xd,_0x386652+=(-0x2e8+-0xa88+0xd71)/(-0xa48+0x25*0xc0+-0x1175),_0x20a305['push'](_0x386652,-0x908+-0xd90+-0x1699*-0x1-_0x4d53ac),_0x192f92>-0x1489+-0x7d5+0x9*0x327&&_0x207607['push'](_0x503153,_0x503153+_0x192f92,_0x503153+_0x192f92-(-0x1cc6+-0x1723+-0xa62*-0x5));}if(_0x503153+=_0x348765,_0x56e893>-0xb82+-0xd9*0x15+-0x3*-0x9c5)for(let _0x59afce=0x99f*0x3+0xcb9*0x3+-0x4308;_0x59afce<_0x348765;_0x59afce++){const _0x55e8c7=_0x59afce/_0x348765*(-0x2*0xc83+0x111b+0x1*0x7ed)*Math['PI'],_0x29b9aa=Math['sin'](_0x55e8c7),_0x4ef460=_0x53a349/(-0x1e36+-0x20b5+0x3eed),_0x2157d5=Math['cos'](_0x55e8c7);let _0x25bc7c=0x21d7+-0x6*-0x2a6+0xbe*-0x43-(_0x29b9aa+(-0x1*0x95+0x2129+-0x2093))/(-0x1f29+-0x22d*-0x1+0x2*0xe7f),_0x3aa12c=(_0x2157d5+(-0xd2b+-0x9ac*-0x1+0x7*0x80))/(0xe07*0x1+-0x101f+0x21a*0x1);_0x44e11e['push'](_0x29b9aa*_0x56e893,_0x4ef460,_0x2157d5*_0x56e893),_0x2f5fa3['push'](-0x868+0x1*0xc48+0x1*-0x3e0,-0x7*-0x36+-0x2*0x129a+0x23bb,0x1693*-0x1+-0x1f35+0x35c8),_0x1aef0b['push'](_0x25bc7c,-0xb7*-0x5+-0x1dd2+0x1a40-_0x3aa12c),_0x25bc7c=_0x25bc7c*si+Bs,_0x3aa12c=_0x3aa12c*si+Bs,_0x25bc7c/=-0x1afb+-0x1d5c*-0x1+0x1*-0x25e,_0x3aa12c/=0x1f60+0x65*-0x21+-0x1258,_0x25bc7c+=(0x56*0x13+0x2*0x32+0x4*-0x1b1)/(0x1b6c+-0x1c06+0x1*0x9d),_0x20a305['push'](_0x25bc7c,0x157c+-0x266d+-0x2*-0x879-_0x3aa12c),_0x59afce>0x20a9+0x4cf*-0x1+-0x1bd9&&_0x207607['push'](_0x503153,_0x503153+_0x59afce-(0x2*0x74d+0xc*0x309+-0x3305),_0x503153+_0x59afce);}}this['positions']=_0x44e11e,this['normals']=_0x2f5fa3,this['uvs']=_0x1aef0b,this['uvs1']=_0x20a305,this['indices']=_0x207607;}}class nA extends Wp{constructor(_0x431bce={}){const _0x254b2c=_0x431bce['radius']??0x2428+-0x892+-0x1b96*0x1+0.3,_0x9ec715=_0x431bce['height']??-0x1*-0xfb6+0x2*0x5fd+0x175*-0x13,_0x27dad4=_0x431bce['heightSegm'+'ents']??-0x130f+-0x171b+-0x5*-0x86f,_0x3249aa=_0x431bce['sides']??-0x1d44+0x1779+0x3*0x1f5;super(_0x254b2c,_0x254b2c,_0x9ec715-(0x32d*0x5+0x1a*0xa9+-0x2109)*_0x254b2c,_0x27dad4,_0x3249aa,!(-0xd*0x182+0x1*0x1459+-0xbf)),_0x431bce['calculateT'+'angents']&&(this['tangents']=br(this['positions'],this['normals'],this['uvs'],this['indices']));}}class oA extends Wp{constructor(_0x378242={}){const _0x753a6a=_0x378242['baseRadius']??-0x146*-0x10+-0x1*-0x179b+-0x2bfb+0.5,_0x28944f=_0x378242['peakRadius']??0x12db*0x1+0x3d0*-0x1+0xf0b*-0x1,_0x473f78=_0x378242['height']??0x2f*0x46+-0x6bf+-0x61a,_0x152a56=_0x378242['heightSegm'+'ents']??0x7*0x251+0xb*0x11b+-0x1c5b,_0x4e89ee=_0x378242['capSegment'+'s']??0x49b+-0x26e0+-0x1*-0x2257;super(_0x753a6a,_0x28944f,_0x473f78,_0x152a56,_0x4e89ee,!(-0x1d6c+0x144d+0x920)),_0x378242['calculateT'+'angents']&&(this['tangents']=br(this['positions'],this['normals'],this['uvs'],this['indices']));}}class lA extends Wp{constructor(_0x17213d={}){const _0x5294c9=_0x17213d['radius']??0x7df+0xde1+0x1*-0x15c0+0.5,_0x25ff13=_0x17213d['height']??-0x5*-0x43c+0x22e8+-0xa5*0x57,_0x3fbf98=_0x17213d['heightSegm'+'ents']??0x572+-0x2e7*0xa+0x1799,_0x58c5d2=_0x17213d['capSegment'+'s']??-0xdd8*0x1+0xa3+0xd49;super(_0x5294c9,_0x5294c9,_0x25ff13,_0x3fbf98,_0x58c5d2,!(0x5b*0x43+-0x12e6+-0x4ea*0x1)),_0x17213d['calculateT'+'angents']&&(this['tangents']=br(this['positions'],this['normals'],this['uvs'],this['indices']));}}class cA extends ga{constructor(_0x404992={}){super();const _0x34785c=_0x404992['halfExtent'+'s']??new J(0x1f2b+0x1b93+-0x3abe+0.5,-0x24a2+-0x1721+0x3bc3*0x1+0.5),_0x433918=_0x404992['widthSegme'+'nts']??0x1671+-0x1f70+-0x904*-0x1,_0x3f20b6=_0x404992['lengthSegm'+'ents']??0x1305*0x1+-0x4*-0x3b3+-0x21cc,_0x5b74b=[],_0x5bc769=[],_0x51a7cc=[],_0xcff3cc=[];let _0x988d27=0x3a*-0x19+-0x846+0xdf0;for(let _0x3629b6=-0x1123+0x586*0x7+-0x1587;_0x3629b6<=_0x433918;_0x3629b6++)for(let _0x36d8aa=0xbaa*0x1+0x129e+-0x1e48;_0x36d8aa<=_0x3f20b6;_0x36d8aa++){const _0x3cd15b=-_0x34785c['x']+(-0x1ad4+-0x1*0x9f4+0x24ca)*_0x34785c['x']*_0x3629b6/_0x433918,_0x1b9e26=-0x3d*0xa1+-0x8f0*-0x1+-0x5d*-0x51,_0x9a1dfa=-(-_0x34785c['y']+(0x211e+-0x5ce*-0x2+0x3ba*-0xc)*_0x34785c['y']*_0x36d8aa/_0x3f20b6),_0x259114=_0x3629b6/_0x433918,_0x5400fb=_0x36d8aa/_0x3f20b6;_0x5b74b['push'](_0x3cd15b,_0x1b9e26,_0x9a1dfa),_0x5bc769['push'](-0x1*0x15b9+0x2*-0x2dd+0x1b73*0x1,-0x1a4a+-0x1*-0x1b9b+-0x15*0x10,-0x1e6d+0x6b*0x3d+0x2*0x277),_0x51a7cc['push'](_0x259114,-0x4ee*0x2+0x677+0x366-_0x5400fb),_0x3629b6<_0x433918&&_0x36d8aa<_0x3f20b6&&(_0xcff3cc['push'](_0x988d27+_0x3f20b6+(-0xa96+-0x161c+0xb*0x2f9),_0x988d27+(-0x1be8+-0x1*-0x1993+-0x12b*-0x2),_0x988d27),_0xcff3cc['push'](_0x988d27+_0x3f20b6+(-0x41f*0x8+-0x2*0x686+0x2e05),_0x988d27+_0x3f20b6+(0x1cf+0x1d37+-0x1f04),_0x988d27+(-0xe*-0x1+-0x377+0x36a))),_0x988d27++;}this['positions']=_0x5b74b,this['normals']=_0x5bc769,this['uvs']=_0x51a7cc,this['uvs1']=_0x51a7cc,this['indices']=_0xcff3cc,_0x404992['calculateT'+'angents']&&(this['tangents']=br(_0x5b74b,_0x5bc769,_0x51a7cc,_0xcff3cc));}}class hA extends ga{constructor(_0x41460f={}){super();const _0x1c90b0=_0x41460f['tubeRadius']??-0x195e+0x196f+-0x1*0x11+0.2,_0x571cf4=_0x41460f['ringRadius']??0x1535+-0x159+-0x13dc+0.3,_0x1e9a1c=(_0x41460f['sectorAngl'+'e']??-0x4de+-0xe9*-0x27+-0x1d39)*Y['DEG_TO_RAD'],_0x45088a=_0x41460f['segments']??-0x2*0xa3f+-0x91*0x10+0x1dac,_0x1e2c11=_0x41460f['sides']??0xb9*-0xd+-0xd0f*-0x1+0x33*-0x12,_0x5f3e99=[],_0x38659f=[],_0x47717e=[],_0x1626a7=[];for(let _0x356f2c=-0x189b+0x12ca+0x5d1;_0x356f2c<=_0x1e2c11;_0x356f2c++)for(let _0x4e64eb=-0x1b80+0x27f*-0x5+0x73*0x59;_0x4e64eb<=_0x45088a;_0x4e64eb++){const _0x473992=Math['cos'](_0x1e9a1c*_0x4e64eb/_0x45088a)*(_0x571cf4+_0x1c90b0*Math['cos']((-0x1c76+-0xca5+0x291d)*Math['PI']*_0x356f2c/_0x1e2c11)),_0x40cd3a=Math['sin']((0x3*0xb50+0x2*-0x1217+0x240)*Math['PI']*_0x356f2c/_0x1e2c11)*_0x1c90b0,_0x44818b=Math['sin'](_0x1e9a1c*_0x4e64eb/_0x45088a)*(_0x571cf4+_0x1c90b0*Math['cos']((0x81b*-0x2+0x7bc+0x3*0x2d4)*Math['PI']*_0x356f2c/_0x1e2c11)),_0x11dbfd=Math['cos'](_0x1e9a1c*_0x4e64eb/_0x45088a)*Math['cos']((0x2245+0x20a5+-0x42e8)*Math['PI']*_0x356f2c/_0x1e2c11),_0x497908=Math['sin']((0x28c*0xe+-0x5d*-0x55+0x4287*-0x1)*Math['PI']*_0x356f2c/_0x1e2c11),_0x4665ae=Math['sin'](_0x1e9a1c*_0x4e64eb/_0x45088a)*Math['cos']((-0x2*0x1233+0x1e7a+-0x2*-0x2f7)*Math['PI']*_0x356f2c/_0x1e2c11),_0x1cad76=_0x356f2c/_0x1e2c11,_0x48fe47=0x1*-0x4a6+-0xb5+0x55c-_0x4e64eb/_0x45088a;if(_0x5f3e99['push'](_0x473992,_0x40cd3a,_0x44818b),_0x38659f['push'](_0x11dbfd,_0x497908,_0x4665ae),_0x47717e['push'](_0x1cad76,-0x12a0+-0x1*-0x1831+-0x10*0x59-_0x48fe47),_0x356f2c<_0x1e2c11&&_0x4e64eb<_0x45088a){const _0x41cbf6=_0x356f2c*(_0x45088a+(0x791*0x1+0xdf*0x1d+-0x20d3))+_0x4e64eb,_0x4b32e1=(_0x356f2c+(-0x21b+0x1*0x16cf+-0x14b3))*(_0x45088a+(0x10*-0x9+0x1e69+-0x1dd8*0x1))+_0x4e64eb,_0x575d76=_0x356f2c*(_0x45088a+(0xb0f+-0x1*0x1a4b+0xf3d))+(_0x4e64eb+(0x4*-0x611+-0x1e6a+0x36af)),_0x4f0d2e=(_0x356f2c+(0x90b+-0x1885*-0x1+-0x218f*0x1))*(_0x45088a+(0x4*0x364+-0x1ae8+0xd59))+(_0x4e64eb+(0x3fe*-0x4+-0x1690+-0x1*-0x2689));_0x1626a7['push'](_0x41cbf6,_0x4b32e1,_0x575d76),_0x1626a7['push'](_0x4b32e1,_0x4f0d2e,_0x575d76);}}this['positions']=_0x5f3e99,this['normals']=_0x38659f,this['uvs']=_0x47717e,this['uvs1']=_0x47717e,this['indices']=_0x1626a7,_0x41460f['calculateT'+'angents']&&(this['tangents']=br(_0x5f3e99,_0x38659f,_0x47717e,_0x1626a7));}}class dA{constructor(_0x1c7966,_0x413e09){h(this,'processedC'+'ache',new Map()),h(this,'definition'+'sCache',new Map()),h(this,'_generator'+'s',new Map()),(this['_device']=_0x1c7966,this['_isClearin'+'gCache']=!(-0x1*-0x225+-0x1908+-0x125*-0x14),this['_precached']=!(0xeb4+-0x1edc*-0x1+-0x6b*0x6d),this['_programsC'+'ollection']=[],this['_defaultSt'+'dMatOption']=new Qo(),this['_defaultSt'+'dMatOption'+'Min']=new Qo());const _0xafa239=new Uy();_0x413e09['shaderOptB'+'uilder']['updateRef'](this['_defaultSt'+'dMatOption'],{},_0xafa239,_0x413e09,null,[],xa,null),_0x413e09['shaderOptB'+'uilder']['updateMinR'+'ef'](this['_defaultSt'+'dMatOption'+'Min'],{},_0x413e09,null,Np,null),_0x1c7966['on']('destroy:sh'+'ader',_0x3bd73e=>{this['removeFrom'+'Cache'](_0x3bd73e);});}['destroy'](){this['clearCache']();}['register'](_0x7bdd4,_0x39f757){this['_generator'+'s']['has'](_0x7bdd4)||this['_generator'+'s']['set'](_0x7bdd4,_0x39f757);}['unregister'](_0x1f8a1e){this['_generator'+'s']['has'](_0x1f8a1e)&&this['_generator'+'s']['delete'](_0x1f8a1e);}['isRegister'+'ed'](_0x163b2a){return this['_generator'+'s']['has'](_0x163b2a);}['generateSh'+'aderDefini'+'tion'](_0x56de0a,_0x21ec24,_0xb1351a,_0x2eb315){var _0x3d52e6,_0x477dcd;let _0x1e2269=this['definition'+'sCache']['get'](_0xb1351a);if(!_0x1e2269){let _0x10ed0d;(_0x3d52e6=_0x2eb315['litOptions'])!=null&&_0x3d52e6['lights']&&(_0x10ed0d=_0x2eb315['litOptions']['lights'],_0x2eb315['litOptions']['lights']=_0x10ed0d['map'](_0x2d40e0=>{const _0x1a43db=_0x2d40e0['clone']?_0x2d40e0['clone']():_0x2d40e0;return _0x1a43db['key']=_0x2d40e0['key'],_0x1a43db;})),this['storeNewPr'+'ogram'](_0x21ec24,_0x2eb315),(_0x477dcd=_0x2eb315['litOptions'])!=null&&_0x477dcd['lights']&&(_0x2eb315['litOptions']['lights']=_0x10ed0d),this['_precached']&&w['log']('ProgramLib'+'rary#getPr'+'ogram:\x20Cac'+'he\x20miss\x20fo'+'r\x20shader\x20'+_0x21ec24+'\x20key\x20'+_0xb1351a+('\x20after\x20sha'+'ders\x20preca'+'ching'));const _0x315a1e=this['_device'];_0x1e2269=_0x56de0a['createShad'+'erDefiniti'+'on'](_0x315a1e,_0x2eb315),_0x1e2269['name']=_0x1e2269['name']??(_0x2eb315['pass']?_0x21ec24+'-pass:'+_0x2eb315['pass']:_0x21ec24),this['definition'+'sCache']['set'](_0xb1351a,_0x1e2269);}return _0x1e2269;}['getCachedS'+'hader'](_0x2dbd45){return this['processedC'+'ache']['get'](_0x2dbd45);}['setCachedS'+'hader'](_0x9a4b8f,_0x21c6dc){this['processedC'+'ache']['set'](_0x9a4b8f,_0x21c6dc);}['getProgram'](_0x155bef,_0x568003,_0x13f047,_0x3c15ca){const _0x4c6b95=this['_generator'+'s']['get'](_0x155bef);if(!_0x4c6b95)return w['warn']('ProgramLib'+'rary#getPr'+'ogram:\x20No\x20'+'program\x20li'+'brary\x20func'+'tions\x20regi'+'stered\x20for'+':\x20'+_0x155bef),null;const _0x1df08c=_0x4c6b95['generateKe'+'y'](_0x568003),_0x12db94=hi(_0x1df08c),_0x5e60c3=_0x13f047['generateKe'+'y'](this['_device']),_0x944ba9=hi(_0x5e60c3),_0xa1b2cf=_0x12db94+'#'+_0x944ba9;let _0x5fab32=this['getCachedS'+'hader'](_0xa1b2cf);if(!_0x5fab32){const _0x5f53ad=this['generateSh'+'aderDefini'+'tion'](_0x4c6b95,_0x155bef,_0x12db94,_0x568003);w['assert'](_0x5f53ad);let _0x504dec='',_0x42d4e1;_0x568003['pass']!==void(0x23ee+-0x7*0x44d+-0x5d3)&&(_0x42d4e1=Si['get'](this['_device'])['getByIndex'](_0x568003['pass']),_0x504dec='-'+_0x42d4e1['name']),this['_device']['fire']('shader:gen'+'erate',{'userMaterialId':_0x3c15ca,'shaderPassInfo':_0x42d4e1,'definition':_0x5f53ad});const _0x3c4e34={'name':''+_0x5f53ad['name']+_0x504dec+'-proc','attributes':_0x5f53ad['attributes'],'vshader':_0x5f53ad['vshader'],'vincludes':_0x5f53ad['vincludes'],'fincludes':_0x5f53ad['fincludes'],'fshader':_0x5f53ad['fshader'],'processingOptions':_0x13f047,'shaderLanguage':_0x5f53ad['shaderLang'+'uage'],'meshUniformBufferFormat':_0x5f53ad['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x5f53ad['meshBindGr'+'oupFormat']};_0x5fab32=new dy(this['_device'],_0x3c4e34),w['call'](()=>{_0x5fab32['_generatio'+'nKey']=_0x1df08c,_0x5fab32['_processin'+'gKey']=_0x5e60c3;}),this['setCachedS'+'hader'](_0xa1b2cf,_0x5fab32);}return _0x5fab32;}['storeNewPr'+'ogram'](_0x34f448,_0x3094f3){let _0xae5141={};if(_0x34f448==='standard'){const _0x289518=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x3094f3['pass']);for(const _0x2ddb90 in _0x3094f3)(_0x3094f3['hasOwnProp'+'erty'](_0x2ddb90)&&_0x289518[_0x2ddb90]!==_0x3094f3[_0x2ddb90]||_0x2ddb90==='pass')&&(_0xae5141[_0x2ddb90]=_0x3094f3[_0x2ddb90]);for(const _0xaf089f in _0x3094f3['litOptions'])_0xae5141[_0xaf089f]=_0x3094f3['litOptions'][_0xaf089f];}else _0xae5141=_0x3094f3;this['_programsC'+'ollection']['push'](JSON['stringify']({'name':_0x34f448,'options':_0xae5141}));}['dumpProgra'+'ms'](){let _0xecc821='let\x20device'+'\x20=\x20pc.app\x20'+'?\x20pc.app.g'+'raphicsDev'+'ice\x20:\x20pc.A'+'pplication'+'.getApplic'+'ation().gr'+'aphicsDevi'+'ce;\x0a';_0xecc821+='let\x20shader'+'s\x20=\x20[',this['_programsC'+'ollection'][-0x4a1+0xa03*0x2+-0xf65]&&(_0xecc821+='\x0a\x09'+this['_programsC'+'ollection'][-0x2*0x1183+0x56*0x31+-0xb0*-0x1b]);for(let _0x5a6e00=0x7f*0x8+-0x801+0x40a;_0x5a6e00<this['_programsC'+'ollection']['length'];++_0x5a6e00)_0xecc821+=',\x0a\x09'+this['_programsC'+'ollection'][_0x5a6e00];_0xecc821+='\x0a];\x0a',_0xecc821+='pc.getProg'+'ramLibrary'+'(device).p'+'recompile('+'shaders);\x0a',_0xecc821+='if\x20(pc.ver'+'sion\x20!=\x20\x22'+sn+('\x22\x20||\x20pc.re'+'vision\x20!=\x20'+'\x22')+cS+'\x22)\x0a',_0xecc821+='\x09console.w'+'arn(\x22preco'+'mpile-shad'+'ers.js:\x20en'+'gine\x20versi'+'on\x20mismatc'+'h,\x20rebuild'+'\x20shaders\x20l'+'ib\x20with\x20cu'+'rrent\x20engi'+'ne\x22);';const _0x374c8c=document['createElem'+'ent']('a');_0x374c8c['setAttribu'+'te']('href','data:text/'+'plain;char'+'set=utf-8,'+encodeURIComponent(_0xecc821)),_0x374c8c['setAttribu'+'te']('download','precompile'+'-shaders.j'+'s'),_0x374c8c['style']['display']='none',document['body']['appendChil'+'d'](_0x374c8c),_0x374c8c['click'](),document['body']['removeChil'+'d'](_0x374c8c);}['clearCache'](){this['_isClearin'+'gCache']=!(0xc9a+-0x19d7+0xd3d),this['processedC'+'ache']['forEach'](_0x23a86a=>{_0x23a86a['destroy']();}),this['processedC'+'ache']['clear'](),this['_isClearin'+'gCache']=!(-0xdbc+0xbb*0x19+-0x486);}['removeFrom'+'Cache'](_0x3443ce){this['_isClearin'+'gCache']||this['processedC'+'ache']['forEach']((_0x1f4f5b,_0x34c3e6)=>{_0x3443ce===_0x1f4f5b&&this['processedC'+'ache']['delete'](_0x34c3e6);});}['_getDefaul'+'tStdMatOpt'+'ions'](_0x4a5903){const _0x1d6f51=Si['get'](this['_device'])['getByIndex'](_0x4a5903);return _0x4a5903===Wn||_0x4a5903===vl||_0x1d6f51['isShadow']?this['_defaultSt'+'dMatOption'+'Min']:this['_defaultSt'+'dMatOption'];}['precompile'](_0x2fd179){if(_0x2fd179){const _0x6600fc=new Array(_0x2fd179['length']);for(let _0x36cf79=-0xbfa+-0x1a8e+0x2688;_0x36cf79<_0x2fd179['length'];_0x36cf79++){if(_0x2fd179[_0x36cf79]['name']==='standard'){const _0x35562a=_0x2fd179[_0x36cf79]['options'],_0x4be38d=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x35562a['pass']);for(const _0x20273f in _0x4be38d)_0x4be38d['hasOwnProp'+'erty'](_0x20273f)&&_0x35562a[_0x20273f]===void(0x1*-0xb5d+0x4e8*-0x2+0x152d)&&(_0x35562a[_0x20273f]=_0x4be38d[_0x20273f]);}_0x6600fc[_0x36cf79]=this['getProgram'](_0x2fd179[_0x36cf79]['name'],_0x2fd179[_0x36cf79]['options']);}}this['_precached']=!(-0x1f3c+0x3c3+0x1b79);}}async function fA(){const _0x125809=new Float32Array(0x552+0x1a8d+-0x1fde),_0x34a429=new Int32Array(_0x125809['buffer']);let _0x58f9c9=0xd*-0x12d+0xf5b*0x1+-0x12,_0x58e1e2={};self['onmessage']=async _0x445b36=>{const {data:_0x3baca2}=_0x445b36;switch(_0x3baca2['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x238714(_0x3baca2['properties'],_0x3baca2['timeIndex'],_0x3baca2['timeOption']);break;case'releaseSeq'+'Data':_0x33e5ff(_0x3baca2['index']);break;case'releaseAll'+'SeqData':_0x288259();break;case'destroyWor'+'ker':_0x1ff445();break;}};class _0x54ce3b{constructor(_0x5af11b=-0x70b*0x1+0x7fa*0x2+-0x8e9,_0x147a2c=-0xaba+-0x1f5*-0x5+0xf1,_0x3d4601=-0x1887+0x22ba+0xa33*-0x1,_0x54a937=0xb36*-0x1+0xfef*0x1+0x4*-0x12e){this['x']=_0x5af11b,this['y']=_0x147a2c,this['z']=_0x3d4601,this['w']=_0x54a937;}['set'](_0x13fcf9,_0x199ed7,_0x6ac68e,_0x37bec8){return this['x']=_0x13fcf9,this['y']=_0x199ed7,this['z']=_0x6ac68e,this['w']=_0x37bec8,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x36d049=this){let _0x43b016=_0x36d049['length']();return _0x43b016===0x1715+-0x2c*-0xb+-0x853*0x3?(this['x']=this['y']=this['z']=-0x1e33+0xa91*-0x2+0x3355,this['w']=0x8c2*0x3+0x48*0x33+-0x289d):(_0x43b016=(0x185+-0x16a1+0x151d)/_0x43b016,this['x']=_0x36d049['x']*_0x43b016,this['y']=_0x36d049['y']*_0x43b016,this['z']=_0x36d049['z']*_0x43b016,this['w']=_0x36d049['w']*_0x43b016),this;}['mulScalar'](_0x33d75b,_0x43a70b=this){return this['x']=_0x43a70b['x']*_0x33d75b,this['y']=_0x43a70b['y']*_0x33d75b,this['z']=_0x43a70b['z']*_0x33d75b,this['w']=_0x43a70b['w']*_0x33d75b,this;}}const _0x26d61f=_0x3717d3=>{_0x125809[-0x1b9+0x41c+0x2f*-0xd]=_0x3717d3;const _0x2ded2b=_0x34a429[-0x1780+-0x6*0x4ff+-0x1*-0x357a];let _0xe41c0e=_0x2ded2b>>-0x2152+-0x1*0x99d+0x3*0xe55&0x29*-0x1af+-0x921d+0x55c9*0x4,_0x51cf69=_0x2ded2b>>0x267b+0x254c+-0x4bbb&0x2c2*-0x1+-0x1cf4+0x27b5;const _0x23a493=_0x2ded2b>>-0x1a00+-0xc8d*0x2+-0x5*-0xa3d&-0xecd+-0x1694*-0x1+-0x6c8;return _0x23a493<0x13d0+0x1e*-0xa1+-0x8b?_0xe41c0e:_0x23a493>-0x150b+0x2683*0x1+-0xa*0x1b1?(_0xe41c0e|=-0xe92d*0x1+-0x14*0xc00+0x2552d,_0xe41c0e|=(_0x23a493===-0x13a1+0x2*0x20e+0x1084?0x1*-0x1a51+0x2*0x8b5+0x8e7:0x1*-0x13b+-0x1*-0x2405+-0x22c9)&&_0x2ded2b&-0xe6d974+-0x1bf0a*0x13+0x11f*0x15daf,_0xe41c0e):_0x23a493<0x23dc+-0x1*-0x16e+-0x24d9*0x1?(_0x51cf69|=-0x583+0x265*0x5+-0x1*-0x18a,_0xe41c0e|=(_0x51cf69>>0x1a4a+0x1fa1+-0x3979-_0x23a493)+(_0x51cf69>>-0x7e2*-0x2+0x609+0x557*-0x4-_0x23a493&-0xca0+0x12f7*0x1+-0x656),_0xe41c0e):(_0xe41c0e|=_0x23a493-(-0xcfd+-0x362*-0x1+-0x1*-0xa0b)<<-0x5f*-0x3b+0x2413+0x5*-0xb96|_0x51cf69>>-0x2*-0xbbf+0x8*0x49d+-0x3c65,_0xe41c0e+=_0x51cf69&-0x103b*0x1+-0x1c0f+-0x11*-0x29b,_0xe41c0e);},_0x315f61=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x27367e=-0x32*-0x38+0xc3d+-0x172d;_0x27367e<0x6db+-0x139a+0x33b*0x4;++_0x27367e)if(!_0x58e1e2['f_rest_'+_0x27367e])return _0x27367e;return 0x1a07+-0x1f90+0x5b6;})())]??0xb*0x1c1+0x2388+-0x36d3),_0x238714=(_0x4b2492,_0xbf956a,_0x4a67d3)=>{const _0x50dc6f=!!_0x4b2492['time_index'];_0x50dc6f||(_0x4b2492['time_index']=new Float32Array(-0x701*0x5+-0x1*-0xc9f+0x1*0x1666)),_0x58f9c9+=_0x4b2492['x']['length']??-0x77d+0x14*-0xa0+0x13fd;const _0x2664cc=Object['keys'](_0x4b2492);for(let _0x5df647=0x21a1+0xb3b+0xae*-0x42;_0x5df647<_0x2664cc['length'];_0x5df647++){const _0x4d5613=_0x2664cc[_0x5df647],_0x1ca014=_0x4b2492[_0x4d5613],_0x1526d3=_0x58e1e2[_0x4d5613]??new Float32Array(0x7f2+-0x2e*0x82+0xf6a);if(!_0x50dc6f&&_0x4d5613==='time_index'){const _0x1ea66a=new Float32Array(_0x58f9c9);_0x1ea66a['fill'](_0xbf956a),_0x1ea66a['set'](_0x1526d3,0xa17+-0x1b*0x5+-0x990),_0x58e1e2[_0x4d5613]=_0x1ea66a;}else{if(!_0x50dc6f&&_0x1ca014&&_0x4d5613==='t'){const _0xdbe77d=new Float32Array(_0x58f9c9);if(_0xdbe77d['set'](_0x1526d3,0x1*0x19a9+0xeb9+-0x2862),_0x4a67d3){for(let _0x4c53fa=_0x1526d3['length'];_0x4c53fa<_0x58f9c9;_0x4c53fa++)_0x1ca014[_0x4c53fa-_0x1526d3['length']]>-(-0x1462+-0x5c*-0x3e+-0x1e1)?_0xdbe77d[_0x4c53fa]=_0x1ca014[_0x4c53fa-_0x1526d3['length']]+_0x4a67d3[(-0x2*0x936+-0xaa9*0x3+0x3269)*_0xbf956a]:_0xdbe77d[_0x4c53fa]=_0x1ca014[_0x4c53fa-_0x1526d3['length']];}_0x58e1e2[_0x4d5613]=_0xdbe77d;}else{if(_0x1ca014){const _0x4b8d45=new Float32Array(_0x58f9c9);_0x4b8d45['set'](_0x1526d3,0x1f3a+0x20b5*0x1+-0x3fef),_0x4b8d45['set'](_0x1ca014,_0x1526d3['length']),_0x58e1e2[_0x4d5613]=_0x4b8d45;}}}}const _0xcde125={};Object['keys'](_0x58e1e2)['forEach'](_0x37ad2b=>{_0xcde125[_0x37ad2b]=new Float32Array(_0x58e1e2[_0x37ad2b]['buffer']['slice']());});const _0x52d374=Object['keys'](_0xcde125)['map'](_0x2e85e1=>_0xcde125[_0x2e85e1]['buffer']),_0x1d88ef=_0x45e06d(),_0x33c4a5=Object['keys'](_0x1d88ef)['map'](_0x47c993=>_0x1d88ef[_0x47c993]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0xcde125,'transformData':_0x1d88ef},_0x52d374['concat'](_0x33c4a5));},_0x45e06d=()=>{const _0x39177e=_0x58e1e2['x']['length'],_0x52e814=_0x58e1e2['x'],_0x277d39=_0x58e1e2['y'],_0x48f9f0=_0x58e1e2['z'],_0x29533f=_0x58e1e2['scale_0'],_0x2161c9=_0x58e1e2['scale_1'],_0x341d6f=_0x58e1e2['scale_2'],_0x3b88a6=_0x58e1e2['rot_1'],_0x495c4d=_0x58e1e2['rot_2'],_0x5ceb53=_0x58e1e2['rot_3'],_0x1a79aa=_0x58e1e2['rot_0'],_0x4d0d88=_0x58e1e2['motion_0'],_0x4e3293=_0x58e1e2['motion_1'],_0x45fd67=_0x58e1e2['motion_2'],_0x25d3d4=_0x58e1e2['t'],_0xbe26d0=_0x58e1e2['t_scale'],_0x11592d=_0x58e1e2['time_index'],_0xca3fe6=_0x58e1e2['f_dc_0'],_0x2ea936=_0x58e1e2['f_dc_1'],_0x4db568=_0x58e1e2['f_dc_2'],_0x181cb5=_0x58e1e2['opacity'],_0x5bad1b=(_0x25d3d4==null?void(0x97a+0x1*-0x45d+0x77*-0xb):_0x25d3d4['length'])>0x200*-0x1+0x344+-0x144,_0x56080d=new Float32Array(_0x39177e*(-0xf2f*0x1+0x26e3+0x1*-0x17b1)),_0x389e02=new Float32Array(_0x39177e*(0xb2a+-0x1*0x21fe+0x79d*0x3)),_0x213d3a=new Uint16Array(_0x39177e*(-0x1*-0x143d+0x1211+-0x264b)),_0x9bb33f=new Float32Array(_0x39177e*(0x259*0x8+-0x186a+-0x1*-0x5a5));let _0x1e50b2=null,_0x51c68c=null,_0x20228a=null,_0x3275d7=null;_0x5bad1b&&(_0x1e50b2=new Float32Array(_0x39177e*(-0x173b+-0x9d5+0x2113*0x1)),_0x51c68c=new Float32Array(_0x39177e*(-0x1*0x21b5+-0x252a*0x1+0x56*0xd3)),_0x20228a=new Float32Array(_0x39177e*(0x1564+0x3a*0x6c+0x1*-0x2dd9)),_0x3275d7=new Float32Array(_0x39177e));const _0x3f1b80=new _0x54ce3b(0x1ef2+-0x2*-0xccf+-0x389*0x10,-0x6f*-0x25+-0x1dfb+-0x2*-0x6f8,0x7e4+-0x100*-0x1f+-0x26e4,0x15dd*0x1+-0xaf6+-0xae7);let _0x38afa7=-0x95*-0x3e+0xbb*-0x29+-0x1*0x623,_0x47338e=-0x1c70+0x1ea8+0x8e*-0x4,_0x287116=-0x1237+-0x804+-0x18b*-0x11,_0xc414a7=-0x19a0+0x6*-0x34c+0x2d68,_0xd28f6a=-0x2*-0xa09+-0x178d+0x37b,_0x485c82=-0x2391+0x424+0x1f6d,_0x4f10e9=!(-0x1*0x2146+0x5f*0x23+0x1449);const _0x59b988=new Float32Array(0x1bf8+0x7d4*-0x2+-0xc4d),_0x43f930=new Float32Array(0x876*-0x4+0x223b+0x1*-0x60),_0x52546c=new Uint16Array(_0x39177e*(0x3*-0xa41+0x580+0x1947)),_0x332620=-0x56*0xd+0x3ae*0xa+0x1037*-0x2+0.28209479177387814;for(let _0x1e5dd6=0xbb9*-0x2+0x1*0x1b4e+0x3dc*-0x1;_0x1e5dd6<_0x39177e;++_0x1e5dd6){const _0x473cb5=_0xca3fe6[_0x1e5dd6]*_0x332620+(-0x86a*-0x4+0x1bbc+-0x3d64*0x1+0.5),_0x1f382b=_0x2ea936[_0x1e5dd6]*_0x332620+(0x3*-0x24d+-0xa78+-0x115f*-0x1+0.5),_0x5ab573=_0x4db568[_0x1e5dd6]*_0x332620+(-0xf75+-0x2*-0x6c8+0x1e5+0.5),_0x482f79=_0x181cb5[_0x1e5dd6];_0x52546c[_0x1e5dd6*(-0x80e+0x16e7+0xed5*-0x1)+(-0x6*-0x511+0x12d8+-0x313e)]=_0x26d61f(_0x473cb5),_0x52546c[_0x1e5dd6*(-0x1*0x427+0x1*0x1444+-0x1019)+(-0x1*-0x36d+0x1*0x10c7+-0x1433)]=_0x26d61f(_0x1f382b),_0x52546c[_0x1e5dd6*(0xb23+-0x1*0x1e93+-0x9ba*-0x2)+(0x1*-0x1867+0x3*0x629+-0x6*-0xfd)]=_0x26d61f(_0x5ab573),_0x52546c[_0x1e5dd6*(-0x28*0xb3+-0x141d+0x3019)+(-0x1*-0x970+0xa*0x217+0x1*-0x1e53)]=_0x26d61f(_0x482f79);const _0xe5be92=_0x52e814[_0x1e5dd6],_0x268e7b=_0x277d39[_0x1e5dd6],_0x4575bd=_0x48f9f0[_0x1e5dd6],_0xe0b1a=Math['max'](_0x29533f[_0x1e5dd6],_0x2161c9[_0x1e5dd6],_0x341d6f[_0x1e5dd6]);if(isFinite(_0xe5be92)&&isFinite(_0x268e7b)&&isFinite(_0x4575bd)&&isFinite(_0xe0b1a)){const _0x308bdb=(-0x1*0x85d+-0xc*0xd2+0x1237)*Math['exp'](_0xe0b1a);_0x4f10e9?(_0x4f10e9=!(-0xd6a+0x9*0x234+-0x669),_0x38afa7=_0xe5be92-_0x308bdb,_0x47338e=_0x268e7b-_0x308bdb,_0x287116=_0x4575bd-_0x308bdb,_0xc414a7=_0xe5be92+_0x308bdb,_0xd28f6a=_0x268e7b+_0x308bdb,_0x485c82=_0x4575bd+_0x308bdb):(_0x38afa7=Math['min'](_0x38afa7,_0xe5be92-_0x308bdb),_0x47338e=Math['min'](_0x47338e,_0x268e7b-_0x308bdb),_0x287116=Math['min'](_0x287116,_0x4575bd-_0x308bdb),_0xc414a7=Math['max'](_0xc414a7,_0xe5be92+_0x308bdb),_0xd28f6a=Math['max'](_0xd28f6a,_0x268e7b+_0x308bdb),_0x485c82=Math['max'](_0x485c82,_0x4575bd+_0x308bdb));}_0x3f1b80['set'](_0x3b88a6[_0x1e5dd6],_0x495c4d[_0x1e5dd6],_0x5ceb53[_0x1e5dd6],_0x1a79aa[_0x1e5dd6]),_0x3f1b80['normalize'](),_0x3f1b80['w']<0x24a+-0xc51+0xa07&&_0x3f1b80['mulScalar'](-(-0x7*0x19f+-0x6*-0xf9+0x584)),_0x389e02[_0x1e5dd6*(0xc84+-0x14f6+-0x875*-0x1)+(-0x1811+-0x2*-0x1083+0x1*-0x8f5)]=_0x52e814[_0x1e5dd6],_0x389e02[_0x1e5dd6*(-0x1310+0x4bc+-0x1*-0xe57)+(-0x2446+0x1*0x579+0x1ece)]=_0x277d39[_0x1e5dd6],_0x389e02[_0x1e5dd6*(0x1faa+0x16a*0x11+-0x37b1)+(-0x1*-0x742+0x251+-0x991)]=_0x48f9f0[_0x1e5dd6],_0x56080d[_0x1e5dd6*(0x3*-0x4e8+0x1d30+-0xe75)+(-0x26c+-0x1*0xf2c+-0x233*-0x8)]=_0x52e814[_0x1e5dd6],_0x56080d[_0x1e5dd6*(0x20+0x2*0x1251+-0x199*0x17)+(0x10*0x1b8+0xdf*0x1f+0x6d*-0x80)]=_0x277d39[_0x1e5dd6],_0x56080d[_0x1e5dd6*(-0x27a+0x6*-0x44+-0x5f*-0xb)+(0x4*-0x93e+-0xf29+0x3423)]=_0x48f9f0[_0x1e5dd6],_0x213d3a[_0x1e5dd6*(-0x49*-0x6b+-0x1719+-0x17b*0x5)+(0x6da+-0x3e*0x59+-0x1*-0xeb4)]=_0x26d61f(Math['exp'](_0x29533f[_0x1e5dd6])),_0x213d3a[_0x1e5dd6*(0x2261+0x1*-0x1f4e+0x31*-0x10)+(-0xf75+-0x3de+0x1354)]=_0x26d61f(Math['exp'](_0x2161c9[_0x1e5dd6])),_0x213d3a[_0x1e5dd6*(0x3*-0x8e+-0xc6*0x2e+-0x1*-0x2541)+(-0x167f*0x1+-0xe*0x15b+0x297b)]=_0x26d61f(Math['exp'](_0x341d6f[_0x1e5dd6])),_0x9bb33f[_0x1e5dd6*(-0x911+-0xe09*-0x2+-0x12fe)+(0x3*-0x1e1+0xb1f+-0xd*0x6c)]=_0x3f1b80['x'],_0x9bb33f[_0x1e5dd6*(-0x117c+-0x13c7+0x2546)+(0xb98+0xedc+-0x3d*0x6f)]=_0x3f1b80['y'],_0x9bb33f[_0x1e5dd6*(0x9b1+0xee*-0xe+-0x356*-0x1)+(0x1*0x18ae+0x22a9*-0x1+-0x1*-0x9fd)]=_0x3f1b80['z'],_0x5bad1b&&_0x1e50b2&&_0x51c68c&&_0x20228a&&_0x3275d7&&(_0x1e50b2[_0x1e5dd6*(-0x97+-0x1773+0x1*0x180d)+(-0xe94+-0x3e*-0x8+0xca4)]=_0x4d0d88[_0x1e5dd6],_0x1e50b2[_0x1e5dd6*(0x1f*-0x11f+-0x14b*0x1d+0x1*0x4843)+(-0xd02+0x20c3+-0x13c0)]=_0x4e3293[_0x1e5dd6],_0x1e50b2[_0x1e5dd6*(-0x1a*0xe5+0x86d+-0x64*-0x26)+(-0x1fff+0x1bb8+-0x1*-0x449)]=_0x45fd67[_0x1e5dd6],_0x20228a[_0x1e5dd6*(0x47e+0x87f+-0x2*0x67d)+(0x16fe+-0x3*0xb0b+-0xad*-0xf)]=_0x4d0d88[_0x1e5dd6],_0x20228a[_0x1e5dd6*(-0x1*0x314+-0x1a95+0x1dac)+(0x1cd7+-0x2c*0x4c+-0xfc6)]=_0x4e3293[_0x1e5dd6],_0x20228a[_0x1e5dd6*(0x1*-0xff5+0x1fb9+-0xfc1)+(-0x204e+-0x685*0x1+0x26d5*0x1)]=_0x45fd67[_0x1e5dd6],_0x3275d7[_0x1e5dd6]=_0xbe26d0?Math['exp'](_0xbe26d0[_0x1e5dd6]):-0x4*0x24e+0x2*-0x37a+-0x12*-0xe6,_0x51c68c[_0x1e5dd6*(0x1b8e+0x14*0x176+-0x38c3)+(0x1*0x2047+-0x150e+-0xd*0xdd)]=_0x25d3d4?_0x25d3d4[_0x1e5dd6]:-0x1a0+0xf9b*0x2+0x43a*-0x7,_0x51c68c[_0x1e5dd6*(0xf5+0xf3b*0x1+-0x102d)+(0xd10+-0x2608+0x18f9)]=_0x3275d7[_0x1e5dd6]);}_0x4f10e9||(_0x59b988[0x18bd+0x1f8*-0xe+0x2d3*0x1]=(_0x38afa7+_0xc414a7)*(-0x624+-0x269*0xc+0x2310+0.5),_0x59b988[-0x1*0x2203+-0x9ab+0x35*0xd3]=(_0x47338e+_0xd28f6a)*(-0x1104+-0x1aae*-0x1+-0x9aa+0.5),_0x59b988[0x2a5+0xe83+-0x2*0x893]=(_0x287116+_0x485c82)*(0x24df+0x1e81+-0x4360+0.5),_0x43f930[-0x1706+0xcad+0xa59]=(_0xc414a7-_0x38afa7)*(-0x3a5+0x1a9+0x1fc*0x1+0.5),_0x43f930[0x3c7*-0x2+0x1145+-0x9b6]=(_0xd28f6a-_0x47338e)*(0xbd8+-0x19f0+-0x52*-0x2c+0.5),_0x43f930[-0x135d*-0x1+-0x1b6a+0x80f]=(_0x485c82-_0x287116)*(-0x91*0x3b+0x6f5+-0x2*-0xd3b+0.5));const _0x17e8f7=_0x3f63ce();let _0x240f7e={'dataColor':_0x52546c,'center':_0x59b988,'halfExtents':_0x43f930,'dataCenters':_0x56080d,'dataPosition':_0x389e02,'dataScale':_0x213d3a,'dataRotation':_0x9bb33f,..._0x17e8f7};return _0x5bad1b&&(_0x240f7e={..._0x240f7e,'dataMotion':_0x1e50b2,'dataTime':_0x51c68c,'motion':_0x20228a,'tScaleArray':_0x3275d7,'muT':new Float32Array(_0x25d3d4),'timeIndex':new Float32Array(_0x11592d)}),_0x240f7e;},_0x4a1283=_0x5499d2=>{const _0x35c2cc=[];for(let _0xe84f7b=0xb*-0x2f+0x1577*0x1+-0x1372;_0xe84f7b<_0x5499d2;++_0xe84f7b)_0x35c2cc['push'](_0x58e1e2['f_rest_'+_0xe84f7b]);return _0x35c2cc;},_0x3f63ce=()=>{const _0x39d034=_0x315f61();if(_0x39d034<=-0x17cd*0x1+0x1*-0x1963+0x3130)return{};const _0x1520d4=_0x58e1e2['x']['length'],_0x1587a2=new Uint32Array(_0x1520d4*(0x43d*-0x5+0x4*-0x57b+-0x1*-0x2b21)),_0x294e55=new Uint32Array(_0x1520d4*(-0x4*-0x447+-0x2494*0x1+-0x1d*-0xac)),_0x2dd0e7=new Uint32Array(_0x1520d4*(0x719*0x1+-0x1173*0x1+0xa5e)),_0x3fa84c=new Uint32Array(_0x1520d4*(-0x1825+-0x68*-0x2f+0x511)),_0x53211e={0x1:0x3,0x2:0x8,0x3:0xf}[_0x39d034],_0x5e308e=_0x4a1283(_0x53211e*(0x21d6+-0x1323+-0x5*0x2f0)),_0x594774=0x7*-0x467+0x14c6+0x120a,_0x198836=-0x1eb*-0xd+-0xbc4+0x4*-0x24b,_0x19264f=new Float32Array(-0x1f67+-0x7ab*0x1+0x2713),_0x6f5e72=new Uint32Array(_0x19264f['buffer']),_0x4ac5ee=new Array(_0x53211e*(0x1*-0x20ab+-0x1723+-0x3*-0x129b))['fill'](0x172f+-0x2*-0x1371+-0x1*0x3e11);for(let _0x4ee645=0x7a7+0x15c1+-0x1d68;_0x4ee645<_0x1520d4;++_0x4ee645){for(let _0x103b94=0xa15+0x267*0x1+-0xc7c;_0x103b94<_0x53211e;++_0x103b94)_0x4ac5ee[_0x103b94*(0xa1*0x15+0x1b83*0x1+0x1*-0x28b5)]=_0x5e308e[_0x103b94][_0x4ee645],_0x4ac5ee[_0x103b94*(0x1*-0x180b+0x2435+-0xc27)+(-0x690+0x19e0+-0x134f)]=_0x5e308e[_0x103b94+_0x53211e][_0x4ee645],_0x4ac5ee[_0x103b94*(0x1ba5+-0x1edf+0x33d*0x1)+(-0xef1+0x35b+0xb98)]=_0x5e308e[_0x103b94+_0x53211e*(-0x246*0x5+-0xf7*0x1+-0xd*-0xf3)][_0x4ee645];let _0x245269=_0x4ac5ee[-0xaf8+-0x1*0x6b5+-0x1*-0x11ad];for(let _0x456839=0x18e6+0x3*0x5c1+0x4c*-0x8e;_0x456839<_0x53211e*(-0x1eba+0x1*0x144d+-0x8*-0x14e);++_0x456839)_0x245269=Math['max'](_0x245269,Math['abs'](_0x4ac5ee[_0x456839]));if(_0x245269!==-0x6ea+-0x1ad1+-0x37*-0x9d){for(let _0x55855c=0x1*0x1525+-0x8a5*0x3+0x4ca;_0x55855c<_0x53211e;++_0x55855c)_0x4ac5ee[_0x55855c*(-0x14dd+-0x1257*-0x1+0x289)+(0x1459+-0x2565+0x110c)]=Math['max'](-0x2649+-0x2*-0xaca+0x5b*0x2f,Math['min'](_0x594774,Math['floor']((_0x4ac5ee[_0x55855c*(-0x244b+0x225*0xf+0x423)+(0x26ba*0x1+-0x13a3+-0x1317)]/_0x245269*(0xa79*-0x3+-0x2*0xae+0x20c7+0.5)+(0x33*-0x8c+-0x457+0x203b+0.5))*_0x594774+(0x1*0x2347+0xcbd*0x3+0x24bf*-0x2+0.5)))),_0x4ac5ee[_0x55855c*(-0x13ba+-0x267b*-0x1+-0x12be*0x1)+(0x1*-0x239d+0x10c4+0x12da)]=Math['max'](0x1c4d+-0x10ad+-0xba0,Math['min'](_0x198836,Math['floor']((_0x4ac5ee[_0x55855c*(0x4*0x4c+0xe0+-0xaf*0x3)+(0x2021+-0x2*-0x11da+-0x43d4)]/_0x245269*(0x9*0x149+0x952*0x3+0x2787*-0x1+0.5)+(-0x5*0x2dd+-0xc*0x156+0x1c9*0x11+0.5))*_0x198836+(0x1e86+-0x242b+0x5a5+0.5)))),_0x4ac5ee[_0x55855c*(0x7d8+-0xccb+0x4f6)+(0xd1e+0x461+0x25*-0x79)]=Math['max'](-0x12fc+-0x5e7*0x2+0x1eca,Math['min'](_0x594774,Math['floor']((_0x4ac5ee[_0x55855c*(0x9d*-0x39+-0x5f1*0x1+0x28e9*0x1)+(0xb3a+0x44d*0x7+-0x2953)]/_0x245269*(0x479+0x4*0x24+-0x509*0x1+0.5)+(-0x1b1d+-0x573+-0x2090*-0x1+0.5))*_0x594774+(-0x1*-0x103+0x1*0x147f+-0x2*0xac1+0.5))));_0x19264f[0x415*0x1+0x47*0x19+0x3c*-0x2f]=_0x245269,_0x1587a2[_0x4ee645*(0x1*0x731+0xb22+0x124f*-0x1)+(-0x43*0x55+-0xb4e+0x15*0x199)]=_0x6f5e72[0x377*-0x6+-0x1*-0x149a+-0x3*-0x10],_0x1587a2[_0x4ee645*(-0xea2+-0x13*-0x185+-0xe39)+(-0x12a3*-0x1+-0x2118+0xe76)]=_0x4ac5ee[0x117e+-0x1424+0x2a6]<<0x10e8+-0x580*0x3+-0x1*0x53|_0x4ac5ee[-0x282*-0xb+0x5f*0x4b+-0x15a*0x29]<<-0xd*0x5f+-0xdbe+0x4a7*0x4|_0x4ac5ee[0x1048*-0x1+0x3b2+0xc98],_0x1587a2[_0x4ee645*(0x1cde+0x1aec+-0x2*0x1be3)+(-0x530+0x46f*0x7+-0x19d7)]=_0x4ac5ee[-0x1*-0x269+0x9*0x29c+-0x2*0xcf1]<<-0x1d57+0xc82+-0x1b1*-0xa|_0x4ac5ee[-0x1*-0x1e4f+0x855+-0x26a0]<<-0x3*-0x531+-0x159b+0x613|_0x4ac5ee[0x2c8+0x10f*-0xb+0x8e2],_0x1587a2[_0x4ee645*(-0x322*0x5+-0x172c+0x26da)+(-0x749*0x1+0x1*0x148a+-0xd3e)]=_0x4ac5ee[-0x1635*0x1+-0x1186+0x27c1]<<-0x1347+-0x4d8+-0x1834*-0x1|_0x4ac5ee[0x226f+-0x1*-0x42d+0x11*-0x245]<<-0x91b+-0x3e8+0xd0e|_0x4ac5ee[0x36+0xf*0x19+-0x1a5],_0x39d034>-0x1c*0x28+0x2615+-0x21b4&&(_0x294e55[_0x4ee645*(0x457+0xbc6+-0x1019)+(0x1*-0x1523+-0x121d+0x2740)]=_0x4ac5ee[0x3a1*0x7+0x2508+-0x3e66*0x1]<<0xdce+0x13d9*-0x1+0x620|_0x4ac5ee[0xf40+0xb56*-0x2+0xbf*0xa]<<-0x2001+-0xac3+0x2acf|_0x4ac5ee[0x2127+0x11c8+-0x32e4],_0x294e55[_0x4ee645*(0x1109+0x57c+-0x1681)+(-0x2*0x124c+-0xce0*0x1+0x3179)]=_0x4ac5ee[0x1*-0xa52+0x215*-0x9+0x1d1b]<<-0x1cc0+0x189d+-0x3c*-0x12|_0x4ac5ee[0x1857+0x1*-0x1eb7+0x66d]<<-0x169c*0x1+0x55c+0x114b|_0x4ac5ee[-0x2*-0x8ca+-0x167d*-0x1+-0x2803*0x1],_0x294e55[_0x4ee645*(-0x4a*0x17+-0x17*0xbb+0x1777)+(0x1751+0xbb*0x29+-0x3542)]=_0x4ac5ee[-0x1f91+0x9*-0x3b+0x1*0x21b3]<<-0x1*-0xf90+0xc4d*0x1+-0x1bc8|_0x4ac5ee[-0xb3*0x32+-0x14d+0x11*0x223]<<0x92*0x2f+-0x1*0xe62+0xc61*-0x1|_0x4ac5ee[-0x11e1+0x2*0xca4+-0x756],_0x294e55[_0x4ee645*(-0x14*-0xce+0x741+-0x1755)+(-0x14d*-0x1b+0x171a+-0x3a36)]=_0x4ac5ee[0x14*0x123+0x1*0x1577+0x8f*-0x4f]<<0x2bd+0x19fe+-0x1ca6|_0x4ac5ee[0x4*0x4c6+0x6*-0xea+-0xd89]<<-0x1bfe+0x391+0x1878|_0x4ac5ee[0xfd0+-0x1be5*0x1+0xc29],_0x39d034>0x1*-0x84f+-0x4a0+0xcf1?(_0x2dd0e7[_0x4ee645*(-0x7*-0x2a5+-0x2243+0xfc4)+(0x1f17+0x11b6*-0x2+0x455)]=_0x4ac5ee[-0x2cf*-0xc+-0x7c5+-0x19da]<<-0xba2+-0x1e3a+0x4a9*0x9|_0x4ac5ee[-0x13d*-0x1d+-0x7e9+-0x1bea*0x1]<<0x1d3d+0x1c4f+0x2bd*-0x15|_0x4ac5ee[-0x153*0x19+0xdac+0x77*0x2a],_0x2dd0e7[_0x4ee645*(0x4*-0x33e+0xca7+-0x11*-0x5)+(-0x1*0x1f5d+-0x287*-0x8+-0x593*-0x2)]=_0x4ac5ee[0x2d*-0x3+0xbff*-0x3+0x249c]<<0x2*-0x117a+-0x961*0x2+0x35cb|_0x4ac5ee[-0x1a75+-0x845+0x6f7*0x5]<<0x82*-0x34+0x11*0x1b7+-0x2b4|_0x4ac5ee[0x35*0xb3+-0xe45+-0x16b0],_0x2dd0e7[_0x4ee645*(0x1e7f+-0xb*0x14d+-0x2d*0x5c)+(-0xbdf+0xb41*-0x1+0x2*0xb91)]=_0x4ac5ee[-0x1*-0x6cd+-0x231*-0xa+-0x1c9c]<<-0xa0d+0x8*-0x3fd+0x2a0a|_0x4ac5ee[-0x1def+-0x1*0x466+0x2271]<<-0x1358*0x2+0x120b+0x14b0|_0x4ac5ee[0x1b29+-0x9d0+0x2*-0x89e],_0x2dd0e7[_0x4ee645*(0x529*-0x1+-0xc0f+0x1*0x113c)+(0x194a+-0x2*0xbac+-0x1ef)]=_0x4ac5ee[-0x11a9+0x155c*0x1+-0x395]<<0x1*0x10fd+0x1b7*0x11+-0x2e0f*0x1|_0x4ac5ee[0x334*-0x4+-0x151e+0x220d]<<0x146+-0x17*-0x3b+-0x688|_0x4ac5ee[0x5*0x631+-0xc62+-0x1273],_0x3fa84c[_0x4ee645*(-0x26a8+0xe25+0x1887)+(0x202*-0x4+-0x525*-0x2+-0x242)]=_0x4ac5ee[0x1ed1+-0x2*-0xb29+0x3502*-0x1]<<-0x49b+0x2a*-0x2e+-0x30f*-0x4|_0x4ac5ee[-0x27a*-0xb+0x2*0xe0f+-0x373a]<<0x8c9+-0x515*0x1+0x3a9*-0x1|_0x4ac5ee[0x15d0+0x1579+0x20e*-0x15],_0x3fa84c[_0x4ee645*(-0x1e9a+0x112f*0x1+-0xd6f*-0x1)+(-0x1*-0x1027+-0x1a90+0xa6a)]=_0x4ac5ee[0x3d*0x7+0x1bc5+-0x9c4*0x3]<<-0x1721*-0x1+0x1d67+-0x3473|_0x4ac5ee[-0x68e*-0x1+0x9*0x393+-0x2*0x134a]<<-0x251d*0x1+0x857+0x1cd1|_0x4ac5ee[-0xdfb+0x2*0xa0d+-0x5f9],_0x3fa84c[_0x4ee645*(0x1bc8+0x1d35*-0x1+0x171)+(0x2465+-0x4*-0x17+-0x17*0x199)]=_0x4ac5ee[-0x1*-0xd3d+-0x3e2+-0x2*0x49a]<<-0x13*0x1d2+-0x3*-0x7f9+0x20*0x56|_0x4ac5ee[0x2d9+-0x5e5+0x334]<<0x1ad8*0x1+0x5*0x621+-0x3972|_0x4ac5ee[-0xeb4+0x2*-0x47f+0x17db],_0x3fa84c[_0x4ee645*(0x1a99+0x9*0x1c1+-0x2a5e)+(0x1*0x1c7c+-0xd3*0x29+0x552)]=_0x4ac5ee[-0x1030+-0x655*0x2+-0x26b*-0xc]<<0x26b*0x2+-0x2066+0x1ba5|_0x4ac5ee[0xa35+0x1cfa*-0x1+0x4bc*0x4]<<0x2*-0x131+-0xda*0x23+0x203b|_0x4ac5ee[0x1b8e+-0x5*-0x43f+0x28f*-0x13]):_0x2dd0e7[_0x4ee645]=_0x4ac5ee[-0x201b*0x1+-0xb50+0x2b80]<<0x2692+-0x1ade*0x1+0x55*-0x23|_0x4ac5ee[0x1*-0x62a+-0x1e2b*0x1+0x246b*0x1]<<0x24fb+0x231+-0x597*0x7|_0x4ac5ee[0xddd+0xad5+0x189b*-0x1]);}}return{'sh1to3Data':_0x1587a2,'sh4to7Data':_0x294e55,'sh8to11Data':_0x2dd0e7,'sh12to15Data':_0x3fa84c};},_0x33e5ff=_0x25f549=>{if(!_0x58e1e2['time_index'])return;const _0xadfc39=_0x58e1e2['time_index']['findIndex'](_0x482d36=>_0x482d36===_0x25f549);let _0x52cce0=_0x58e1e2['time_index']['findIndex']((_0x1c9e04,_0x343e54)=>_0x1c9e04!==_0x25f549&&_0x343e54>_0xadfc39);if(_0x52cce0===-(0x10*-0x22c+-0x20e*0x8+0x3331)&&_0xadfc39===-(-0x1401+0x1a9a+-0x8*0xd3))return;_0x52cce0===-(-0x9a2*-0x2+0x7c3*0x1+-0x1b06)&&_0xadfc39!==-(-0x128d*-0x1+0x1*-0x1b96+-0xb2*-0xd)&&(_0x52cce0=_0x58e1e2['time_index']['length']),_0x58f9c9-=_0x52cce0-_0xadfc39;const _0x28f7de=Object['keys'](_0x58e1e2);for(let _0x41e70d=0x23c4+-0x656+-0x1d6e;_0x41e70d<_0x28f7de['length'];_0x41e70d++){const _0x331fd8=_0x28f7de[_0x41e70d],_0x267829=_0x58e1e2[_0x331fd8];if(_0x267829){const _0x23feca=new Float32Array(_0x58f9c9);_0xadfc39>-0x1*0x1ead+-0x906*-0x1+-0xf1*-0x17?(_0x23feca['set'](_0x267829['subarray'](0x2604+-0x210b+0x43*-0x13,_0xadfc39),0x9b8*-0x3+0x20+-0x2*-0xe84),_0x23feca['set'](_0x267829['subarray'](_0x52cce0),_0xadfc39)):_0x23feca['set'](_0x267829['subarray'](_0x52cce0),-0x1b20+-0x30*-0x29+0x1370),_0x58e1e2[_0x331fd8]=_0x23feca;}}},_0x288259=()=>{const _0x2e5ad2=Object['keys'](_0x58e1e2);for(let _0x3fe5ba=-0x1ff7+-0x40d+0x1202*0x2;_0x3fe5ba<_0x2e5ad2['length'];_0x3fe5ba++){const _0x46c7d4=_0x2e5ad2[_0x3fe5ba];_0x58e1e2[_0x46c7d4]&&(_0x58e1e2[_0x46c7d4]=[]);}},_0x1ff445=()=>{_0x58e1e2={},_0x58f9c9=-0xc*0x2ad+0x2390+-0x1a*0x22;};}class uA extends me{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+fA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x4207be,_0x2c9391,_0x1e3d66,_0x35d1d5=!(-0x1a47+0x975+0x10d3)){var _0x31b576,_0x182604;const _0x5b779d={};return _0x4207be['elements'][-0x11a*-0x1+-0x2a5+-0x1*-0x18b]['properties']['forEach'](_0x3f6171=>{_0x5b779d[_0x3f6171['name']]=_0x3f6171['storage'];}),_0x35d1d5?(_0x31b576=this['worker'])==null||_0x31b576['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x5b779d,'timeIndex':_0x2c9391,'timeOption':_0x1e3d66},_0x4207be['elements'][-0x8d+0x677+-0x5ea]['properties']['map'](_0x580409=>_0x580409['storage']['buffer'])):(_0x182604=this['worker'])==null||_0x182604['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x5b779d,'timeIndex':_0x2c9391,'timeOption':_0x1e3d66}),new Promise(_0x2b1de9=>{this['worker']['onmessage']=_0x46e9aa=>{if(!this['worker'])return;const {data:_0x46f21f}=_0x46e9aa;_0x46f21f['type']==='newAppendD'+'ata'&&_0x2b1de9(_0x46f21f);};});}async['releaseSeq'+'Data'](_0x4ca64b){var _0x9310e5;(_0x9310e5=this['worker'])==null||_0x9310e5['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x4ca64b});}async['releaseAll'+'SeqData'](){var _0x85d687;(_0x85d687=this['worker'])==null||_0x85d687['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x5ba55a;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x5ba55a=this['worker'])==null||_0x5ba55a['terminate'](),this['worker']=null);}}const Fa=new te(),B_=new le(),Kd=new De(),z_=new De(),pA=new ie(0xce+0x25f*-0x4+0x2e5*0x3,-0x3*-0x9b+-0x3*0x46d+0xb77,0x1d2e+0x1*-0x160f+-0x71f,-0xeb6+0x1b0+0xd06+0.4),Zd=0x594+0x17*0x13+0x175*-0x5+0.28209479177387814,Qd=-0x2a9*-0x4f+0x5f9ec+-0x3bed3;let mA=class{constructor(_0x47fa9f,_0x150b8f,_0x50b25b,_0x5f23b3,_0x3d276e,_0xd7dad0){const _0x474006=_0x47fa9f['getProp']('x'),_0x250d85=_0x47fa9f['getProp']('y'),_0x2d25dc=_0x47fa9f['getProp']('z'),_0x73b654=_0x47fa9f['getProp']('rot_1'),_0x198e01=_0x47fa9f['getProp']('rot_2'),_0x3561e2=_0x47fa9f['getProp']('rot_3'),_0x56ebab=_0x47fa9f['getProp']('rot_0'),_0x3e2a7e=_0x47fa9f['getProp']('motion_0'),_0xb242fe=_0x47fa9f['getProp']('motion_1'),_0xed9d82=_0x47fa9f['getProp']('motion_2'),_0x562f18=_0x47fa9f['getProp']('scale_0'),_0x1cd36a=_0x47fa9f['getProp']('scale_1'),_0x21726b=_0x47fa9f['getProp']('scale_2'),_0xf65233=_0x47fa9f['getProp']('f_dc_0'),_0x4b1d0b=_0x47fa9f['getProp']('f_dc_1'),_0x1de293=_0x47fa9f['getProp']('f_dc_2'),_0x489f34=_0x47fa9f['getProp']('opacity');this['read']=_0x170bf1=>{_0x150b8f&&(_0x150b8f['x']=_0x474006[_0x170bf1],_0x150b8f['y']=_0x250d85[_0x170bf1],_0x150b8f['z']=_0x2d25dc[_0x170bf1]),_0x50b25b&&_0x50b25b['set'](_0x73b654[_0x170bf1],_0x198e01[_0x170bf1],_0x3561e2[_0x170bf1],_0x56ebab[_0x170bf1]),_0x5f23b3&&_0x5f23b3['set'](Math['exp'](_0x562f18[_0x170bf1]),Math['exp'](_0x1cd36a[_0x170bf1]),Math['exp'](_0x21726b[_0x170bf1])),_0xd7dad0&&_0x3e2a7e&&_0xd7dad0['set'](_0x3e2a7e[_0x170bf1],_0xb242fe[_0x170bf1],_0xed9d82[_0x170bf1]),_0x3d276e&&_0x3d276e['set'](0x227+-0x20c6+-0xd*-0x25b+0.5+_0xf65233[_0x170bf1]*Zd,0xea9+0x6*0x14d+0x1677*-0x1+0.5+_0x4b1d0b[_0x170bf1]*Zd,0x1433*0x1+0x26c3+-0x3af6*0x1+0.5+_0x1de293[_0x170bf1]*Zd,_0x489f34[_0x170bf1]);};}};const V_=(_0x3be6d7,_0x3a70c8,_0xe79a76)=>{B_['set'](_0xe79a76['x'],_0xe79a76['y'],_0xe79a76['z'],_0xe79a76['w'])['normalize'](),_0x3be6d7['setTRS'](_0x3a70c8,B_,D['ONE']);};class zn{constructor(_0x3f29c7,_0x228bd7=[]){h(this,'elements'),h(this,'numSplats',0x1255+0x41*0x4f+-0xc*0x333),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x394cd1;(_0x394cd1=this['dataWorker'])==null||_0x394cd1['destroy'](),this['dataWorker']=null;});var _0x5ea618,_0x5310ee,_0x10d933;this['elements']=_0x3f29c7,this['numSplats']=((_0x5ea618=this['getElement']('vertex'))==null?void(-0x1bf2+-0x1*-0x4ca+0x1728):_0x5ea618['count'])??0x1b52+-0x3*0x78b+-0x4b1*0x1,this['comments']=_0x228bd7,this['is4D']=!!((_0x10d933=(_0x5310ee=this['getElement']('vertex'))==null?void(0xc36*0x1+0xca8+0xc6f*-0x2):_0x5310ee['properties']['find'](_0x5dcc27=>_0x5dcc27['name']==='t'))!=null&&_0x10d933['storage']);}async['appendGSpl'+'atData'](_0x167b32,_0xcb92f2,_0x5c2457){var _0x4c2fcc;let _0x512d60=0x1*-0xde5+0x8*-0x80+0x11e5;for(let _0xbbb77c=0x5*0x5c5+0x1352+-0x302b;_0xbbb77c<_0x5c2457['length']&&_0xcb92f2>_0x5c2457[_0xbbb77c];_0xbbb77c+=-0x9c0+0xe41+0x47f*-0x1)_0x512d60=_0xbbb77c/(0x264c+-0x19cf*-0x1+0x10d*-0x3d);console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData',_0x512d60),this['dataWorker']||(this['dataWorker']=new uA(),await this['dataWorker']['appendGSpl'+'atData'](this,0x11a6+0x1*0xbc3+-0x1d69*0x1,_0x5c2457));const _0x14530c=this['getElement']('vertex');_0x14530c&&(_0x14530c['count']=this['numSplats']);const _0x2a8f0b=await this['dataWorker']['appendGSpl'+'atData'](_0x167b32,_0x512d60,_0x5c2457,!(-0xf1f+0x676+0x8a9)),_0x359c27=_0x2a8f0b['properties'],_0x35ce54=((_0x4c2fcc=this['getElement']('vertex'))==null?void(0x251*-0x7+0x13bb+-0x384):_0x4c2fcc['properties'])??[];for(const _0x5db209 in _0x359c27){const _0x1de257=_0x35ce54['find'](_0x1d83c3=>_0x1d83c3['name']===_0x5db209);_0x1de257?_0x1de257['storage']=_0x359c27[_0x5db209]:_0x35ce54['push']({'type':'float','name':_0x5db209,'storage':_0x359c27[_0x5db209],'byteSize':0x4});}this['transformD'+'ata']=_0x2a8f0b['transformD'+'ata'],this['numSplats']=_0x359c27['x']['length'],console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData\x20nu'+'mSplats',this['numSplats']);}async['releaseSeq'+'Data'](_0x38d0a4){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20releaseSe'+'qData',_0x38d0a4),this['dataWorker']['releaseSeq'+'Data'](_0x38d0a4),this;}async['releaseAll'+'SeqData'](){var _0xc52f49;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20release\x20a'+'ll\x20SeqData'),(_0xc52f49=this['dataWorker'])==null||_0xc52f49['releaseAll'+'SeqData'](),this;}static['calcSplatA'+'abb'](_0x45c585,_0x24fad2,_0x7641a8,_0x1a91c8){V_(Fa,_0x24fad2,_0x7641a8),Kd['center']['set'](0xcb*-0x1+-0x2572+0xfb*0x27,-0x1af6*0x1+0x1c74+-0x17e,-0x2*0x1255+0x234a+-0x4*-0x58),Kd['halfExtent'+'s']['set'](_0x1a91c8['x']*(-0x61c+-0x329*-0x1+0x2f5*0x1),_0x1a91c8['y']*(-0xbbb+-0xcb+0xc88),_0x1a91c8['z']*(0x1*-0x158c+0x92f+-0x1*-0xc5f)),_0x45c585['setFromTra'+'nsformedAa'+'bb'](Kd,Fa);}['getProp'](_0x2df18f,_0x3adfc4='vertex'){var _0x3009c4,_0x4b287d;return(_0x4b287d=(_0x3009c4=this['getElement'](_0x3adfc4))==null?void(-0x1800+-0x1523*-0x1+0x1*0x2dd):_0x3009c4['properties']['find'](_0x32dac2=>_0x32dac2['name']===_0x2df18f))==null?void(0x1151+-0x2444*-0x1+-0x3595):_0x4b287d['storage'];}['getElement'](_0x186797){return this['elements']['find'](_0x1350fe=>_0x1350fe['name']===_0x186797);}['addProp'](_0x25f43a,_0x1af909){this['getElement']('vertex')['properties']['push']({'type':'float','name':_0x25f43a,'storage':_0x1af909,'byteSize':0x4});}['createIter'](_0x2a0a39,_0x34317c,_0x5e6c62,_0x46b1f0,_0x3d5ca8){return new mA(this,_0x2a0a39,_0x34317c,_0x5e6c62,_0x46b1f0,_0x3d5ca8);}async['calcAabbAs'+'ync'](_0x2e9cff,_0xbd4fa7){var _0x4519ec,_0x8fbdc0;if((_0x4519ec=this['transformD'+'ata'])!=null&&_0x4519ec['center']&&((_0x8fbdc0=this['transformD'+'ata'])!=null&&_0x8fbdc0['halfExtent'+'s'])){_0x2e9cff['center']['set'](this['transformD'+'ata']['center'][-0x6*0x217+-0x3a8+0x2*0x819],this['transformD'+'ata']['center'][0xaa6+-0x1bde+-0x1139*-0x1],this['transformD'+'ata']['center'][0x3*0xbce+-0x1e8d+0x4db*-0x1]),_0x2e9cff['halfExtent'+'s']['set'](this['transformD'+'ata']['halfExtent'+'s'][0x1a56+0x1fe7+-0x3a3d],this['transformD'+'ata']['halfExtent'+'s'][-0x42f*0x7+0x5*0xd7+0x1917],this['transformD'+'ata']['halfExtent'+'s'][-0x1b6e+0x76b+0x1405*0x1]);return;}const _0x28932e=this['getProp']('x'),_0x26c5c6=this['getProp']('y'),_0x3654b7=this['getProp']('z'),_0x2fac3f=this['getProp']('scale_0'),_0x5a7aeb=this['getProp']('scale_1'),_0x81163e=this['getProp']('scale_2'),_0x41d67d=await(_0xbd4fa7==null?void(-0x249c+0x15b7+0xee5):_0xbd4fa7['calcAabb'](this['numSplats'],_0x28932e,_0x26c5c6,_0x3654b7,_0x2fac3f,_0x5a7aeb,_0x81163e));_0x2e9cff['center']['set'](_0x41d67d['center'][0x1*0xdc7+-0x7a4+-0x1*0x623],_0x41d67d['center'][0x340*-0x8+-0xda+0x1adb],_0x41d67d['center'][-0x1f5*-0xb+0xb96*0x3+-0x3847]),_0x2e9cff['halfExtent'+'s']['set'](_0x41d67d['halfExtent'+'s'][0x1*-0x25cf+-0x2*0x72d+0x3429],_0x41d67d['halfExtent'+'s'][-0x13bd+-0x1865+0x2c23*0x1],_0x41d67d['halfExtent'+'s'][0x1f92+0x798*-0x2+-0x1060]);}['calcAabb'](_0x4d2d6c,_0x7d4e57){let _0x260114,_0x22ac2a,_0x3ccc46,_0x5c0b15,_0x158aea,_0x21df69,_0x5cb9a6=!(-0x593+0x13e5+-0x2*0x729);const _0x15835d=this['getProp']('x'),_0x138ef2=this['getProp']('y'),_0x10ce3b=this['getProp']('z'),_0x50a0b1=this['getProp']('scale_0'),_0x325b7e=this['getProp']('scale_1'),_0x301010=this['getProp']('scale_2');for(let _0x518641=-0x134*0x1d+0xde*0x1a+0x316*0x4;_0x518641<this['numSplats'];++_0x518641){if(_0x7d4e57&&!_0x7d4e57(_0x518641))continue;const _0x470992=_0x15835d[_0x518641],_0xdfb0d1=_0x138ef2[_0x518641],_0x201d6c=_0x10ce3b[_0x518641],_0x43d5cb=Math['max'](_0x50a0b1[_0x518641],_0x325b7e[_0x518641],_0x301010[_0x518641]);if(!isFinite(_0x470992)||!isFinite(_0xdfb0d1)||!isFinite(_0x201d6c)||!isFinite(_0x43d5cb))continue;const _0x1504dd=(-0x1ada+-0x21fd+0x3cd9)*Math['exp'](_0x43d5cb);_0x5cb9a6?(_0x5cb9a6=!(-0x14e+0xa18+-0x8c9),_0x260114=_0x470992-_0x1504dd,_0x22ac2a=_0xdfb0d1-_0x1504dd,_0x3ccc46=_0x201d6c-_0x1504dd,_0x5c0b15=_0x470992+_0x1504dd,_0x158aea=_0xdfb0d1+_0x1504dd,_0x21df69=_0x201d6c+_0x1504dd):(_0x260114=Math['min'](_0x260114,_0x470992-_0x1504dd),_0x22ac2a=Math['min'](_0x22ac2a,_0xdfb0d1-_0x1504dd),_0x3ccc46=Math['min'](_0x3ccc46,_0x201d6c-_0x1504dd),_0x5c0b15=Math['max'](_0x5c0b15,_0x470992+_0x1504dd),_0x158aea=Math['max'](_0x158aea,_0xdfb0d1+_0x1504dd),_0x21df69=Math['max'](_0x21df69,_0x201d6c+_0x1504dd));}return _0x5cb9a6||(_0x4d2d6c['center']['set']((_0x260114+_0x5c0b15)*(0x437*-0x1+-0x3*0x107+0x74c+0.5),(_0x22ac2a+_0x158aea)*(-0xf*-0x261+-0xda8*-0x2+-0x3eff+0.5),(_0x3ccc46+_0x21df69)*(0x2153+-0x3*0x657+-0xe4e+0.5)),_0x4d2d6c['halfExtent'+'s']['set']((_0x5c0b15-_0x260114)*(0x29*-0x5e+-0x23b2+0x32c0+0.5),(_0x158aea-_0x22ac2a)*(0x5a5+0x532+0xf*-0xb9+0.5),(_0x21df69-_0x3ccc46)*(-0x5d+0xb2b*0x2+-0x4b*0x4b+0.5))),!_0x5cb9a6;}['yieldToMai'+'n'](){var _0x1edbee;return(_0x1edbee=globalThis['scheduler'])!=null&&_0x1edbee['yield']?globalThis['scheduler']['yield']():new Promise(_0x4b4196=>{setTimeout(_0x4b4196,0x3*0x7a4+0x243b+-0x3b27);});}['calcAabbEx'+'act'](_0x24c5db,_0x27a931){const _0x5d6702=new D(),_0x5bb2e8=new le(),_0x4f089c=new D(),_0x5ec529=this['createIter'](_0x5d6702,_0x5bb2e8,_0x4f089c);let _0x1bd1eb=!(-0x77e+-0x462+0xbe*0x10);for(let _0x57ac25=0x22ce+0x1549*-0x1+-0xd85*0x1;_0x57ac25<this['numSplats'];++_0x57ac25)_0x27a931&&!_0x27a931(_0x57ac25)||(_0x5ec529['read'](_0x57ac25),_0x1bd1eb?(_0x1bd1eb=!(-0x1b*-0xdf+-0x1b*-0x73+-0x1*0x23a5),zn['calcSplatA'+'abb'](_0x24c5db,_0x5d6702,_0x5bb2e8,_0x4f089c)):(zn['calcSplatA'+'abb'](z_,_0x5d6702,_0x5bb2e8,_0x4f089c),_0x24c5db['add'](z_)));return!_0x1bd1eb;}async['getCenters'](_0x471588){const _0x26b58c=this['getProp']('x'),_0x37b5fb=this['getProp']('y'),_0x5905cd=this['getProp']('z');for(let _0x72ba3=0x4a9*0x4+0x1*-0x8a+-0x121a;_0x72ba3<this['numSplats'];++_0x72ba3)_0x471588[_0x72ba3*(-0x7bf+0x1*0x1552+-0xd90)+(0x4b1*0x2+-0x2392+-0x1a30*-0x1)]=_0x26b58c[_0x72ba3],_0x471588[_0x72ba3*(-0xb8d*0x1+0x720+0x470)+(-0x3a3+-0x921+-0xcc5*-0x1)]=_0x37b5fb[_0x72ba3],_0x471588[_0x72ba3*(-0xd1*-0xc+0xf*-0xa3+0x4*-0xf)+(-0x1*0x269d+0x1006+0x1699)]=_0x5905cd[_0x72ba3],_0x72ba3%Qd===0x17f*-0x9+0xc33*-0x1+-0x3*-0x88e&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x5d82b9;if((_0x5d82b9=this['transformD'+'ata'])!=null&&_0x5d82b9['muT'])return this['transformD'+'ata']['muT'];const _0x531560=this['getProp']('t');return _0x531560?new Float32Array(_0x531560):void(-0x44*0x8b+0x17d7+0x1*0xd15);}async['getTScale'](){const _0x513b63=this['getProp']('t_scale');if(!_0x513b63)return;const _0x5c93e9=new Float32Array(this['numSplats']);for(let _0x2a029c=-0x1eda+0x1d3e+0x19c;_0x2a029c<this['numSplats'];++_0x2a029c)_0x5c93e9[_0x2a029c]=Math['exp'](_0x513b63[_0x2a029c]),_0x2a029c%Qd===-0x1f3b+0x3*0x711+0xa08&&await this['yieldToMai'+'n']();return _0x5c93e9;}async['getMotion'](_0x1b6cae){const _0x67d2b7=this['getProp']('motion_0'),_0x2987f3=this['getProp']('motion_1'),_0x436bbb=this['getProp']('motion_2');if(!(!_0x67d2b7||!_0x2987f3||!_0x436bbb)){for(let _0x3d916d=-0xd0*0xe+0x2567+-0x1a07;_0x3d916d<this['numSplats'];++_0x3d916d)_0x1b6cae[_0x3d916d*(-0x1715*0x1+-0x10c1+-0x1*-0x27d9)+(-0x514+-0x4*-0x563+-0x88*0x1f)]=_0x67d2b7[_0x3d916d],_0x1b6cae[_0x3d916d*(0xebd+0x2*-0xf86+0x2*0x829)+(0xb*0x74+0x2af+0x6*-0x147)]=_0x2987f3[_0x3d916d],_0x1b6cae[_0x3d916d*(0x1bfc+-0xa93*0x1+0x11*-0x106)+(-0x38*-0x11+0x16c*0xc+-0x14c6)]=_0x436bbb[_0x3d916d],_0x3d916d%Qd===-0x26bc+0x83*-0x2f+0x3ec9&&await this['yieldToMai'+'n']();}}['getTimeInd'+'ex'](){var _0x640ecc;if((_0x640ecc=this['transformD'+'ata'])!=null&&_0x640ecc['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x1bc74e=this['getProp']('time_index');if(_0x1bc74e)return new Float32Array(_0x1bc74e);}['calcFocalP'+'oint'](_0x19f46d,_0x547f37){const _0x549cd1=this['getProp']('x'),_0x3d349f=this['getProp']('y'),_0x59da9c=this['getProp']('z'),_0x4815e4=this['getProp']('scale_0'),_0x17dc13=this['getProp']('scale_1'),_0x3f1b46=this['getProp']('scale_2');_0x19f46d['x']=-0x1762+-0xe82+0x25e4,_0x19f46d['y']=0x1ca+-0x779+0x5af,_0x19f46d['z']=0x25dd+-0x91e+-0x1cbf;let _0xb935dc=-0xb65*-0x1+0x7b5*0x1+-0x131a;for(let _0x805fd4=0x39*-0xe+-0x297*0x1+-0x1e7*-0x3;_0x805fd4<this['numSplats'];++_0x805fd4){if(_0x547f37&&!_0x547f37(_0x805fd4))continue;const _0x54f129=_0x549cd1[_0x805fd4],_0x27f3d6=_0x3d349f[_0x805fd4],_0x4cda3b=_0x59da9c[_0x805fd4];if(!isFinite(_0x54f129)||!isFinite(_0x27f3d6)||!isFinite(_0x4cda3b))continue;const _0x5e161c=(0xeca+0x15*-0x31+0xac4*-0x1)/(0x105b+0x171b+-0x2775+Math['exp'](Math['max'](_0x4815e4[_0x805fd4],_0x17dc13[_0x805fd4],_0x3f1b46[_0x805fd4])));_0x19f46d['x']+=_0x54f129*_0x5e161c,_0x19f46d['y']+=_0x27f3d6*_0x5e161c,_0x19f46d['z']+=_0x4cda3b*_0x5e161c,_0xb935dc+=_0x5e161c;}_0x19f46d['mulScalar']((-0x7c*0x1f+-0x1*0x1471+0x2376)/_0xb935dc);}['renderWire'+'frameBound'+'s'](_0x24ac7d,_0x25c5a1){const _0xdba681=new D(),_0x5a4f65=new le(),_0x7ce2ae=new D(),_0x35eb5f=new D(),_0x5c5cdc=new D(),_0x237489=this['createIter'](_0xdba681,_0x5a4f65,_0x7ce2ae);for(let _0x3457da=-0x8e6+-0x13e9+0x5c3*0x5;_0x3457da<this['numSplats'];++_0x3457da)_0x237489['read'](_0x3457da),V_(Fa,_0xdba681,_0x5a4f65),Fa['mul2'](_0x25c5a1,Fa),_0x35eb5f['set'](_0x7ce2ae['x']*-(-0x16ef+0x1de0*-0x1+-0x1*-0x34d1),_0x7ce2ae['y']*-(-0x1f33+0x5b3+0x1982*0x1),_0x7ce2ae['z']*-(0x2*-0xd76+0x377+0x1777)),_0x5c5cdc['set'](_0x7ce2ae['x']*(-0xbfb*-0x1+-0x1376*-0x1+-0x1f6f),_0x7ce2ae['y']*(-0x2*-0x469+0x205a+0x292a*-0x1),_0x7ce2ae['z']*(0xf76*-0x1+0x167*-0x3+-0xdb*-0x17)),_0x24ac7d['immediate']['drawWireAl'+'ignedBox'](_0x35eb5f,_0x5c5cdc,pA,!(0x12e5+-0x10ee+-0x1f7),_0x24ac7d['defaultDra'+'wLayer'],Fa);}get['isCompress'+'ed'](){return!(0x89*0x1+0x1f9*0x5+0x377*-0x3);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x3f6912=0x4fd*0x5+-0x15e3+0x30e*-0x1;_0x3f6912<-0xc77*-0x3+0x3ca+0x2*-0x1481;++_0x3f6912)if(!this['getProp']('f_rest_'+_0x3f6912))return _0x3f6912;return-0xa01+-0xfa7+0x1*0x19d5;})())]??0x1154+-0x1463+0x9*0x57;}['calcMorton'+'Order'](){const _0xd0d410=_0x49926f=>{let _0x355b1d=_0x49926f[-0x5b*0x27+0x5b3*-0x2+0x1943],_0x288b5e=_0x49926f[0xc87+-0x1eba+0x1233];for(let _0x290884=0x59f+-0x1e46+0x18a8;_0x290884<_0x49926f['length'];_0x290884++)_0x49926f[_0x290884]<_0x355b1d&&(_0x355b1d=_0x49926f[_0x290884]),_0x49926f[_0x290884]>_0x288b5e&&(_0x288b5e=_0x49926f[_0x290884]);return{'min':_0x355b1d,'max':_0x288b5e};},_0x3225b4=(_0x1eaa06,_0x4a368a,_0x5a3794)=>{const _0x432251=_0x2c39da=>(_0x2c39da&=-0x12ca+0x1e68+-0x79f,_0x2c39da=(_0x2c39da^_0x2c39da<<-0x1d49*-0x1+0xeb0+-0x2be9)&-0x21fc7*-0x870a+0xd8ba877a+-0xf891b541,_0x2c39da=(_0x2c39da^_0x2c39da<<0x1805+-0x16a+0x1693*-0x1)&-0x42590d+0xc22d5*-0xf+0x3f95397,_0x2c39da=(_0x2c39da^_0x2c39da<<0x20ad+0xcdc+-0x2d85)&0x4*0x1627977+0x2163be6*0x1+-0x4fdb*0xead,_0x2c39da=(_0x2c39da^_0x2c39da<<0xb38+-0x421*0x2+-0x54*0x9)&-0x534dffa+-0x16c97a7*-0xa+-0x1b85bd*-0x1,_0x2c39da);return(_0x432251(_0x5a3794)<<0x10*-0x1f4+0xda*-0xa+0x27c6)+(_0x432251(_0x4a368a)<<0x2272+0x1*0x1d5f+-0xff4*0x4)+_0x432251(_0x1eaa06);},_0x1fda55=this['getProp']('x'),_0x4a866c=this['getProp']('y'),_0x52d427=this['getProp']('z'),{min:_0x4a3986,max:_0x57bacc}=_0xd0d410(_0x1fda55),{min:_0x294d42,max:_0x2e274f}=_0xd0d410(_0x4a866c),{min:_0x3ed032,max:_0x69dc1c}=_0xd0d410(_0x52d427),_0x290b68=_0x4a3986===_0x57bacc?0x1*-0x1001+-0x13af+0x23b0:(-0xc85+0x2411+-0x138c)/(_0x57bacc-_0x4a3986),_0x56afa1=_0x294d42===_0x2e274f?0x1fbc+-0x25+-0x1f97:(0x1bf2+-0x989*0x1+-0xe69)/(_0x2e274f-_0x294d42),_0xca92a2=_0x3ed032===_0x69dc1c?0x191e+-0xb2c+0xee*-0xf:(-0x54a*-0x4+0x64*0x12+-0x48*0x56)/(_0x69dc1c-_0x3ed032),_0x17f70f=new Map();for(let _0x12b9ad=0xa7d+-0x1dd2+0x31*0x65;_0x12b9ad<this['numSplats'];_0x12b9ad++){const _0xccb954=Math['min'](0x3*-0x4a0+0xca9+-0x536*-0x1,Math['floor']((_0x1fda55[_0x12b9ad]-_0x4a3986)*_0x290b68)),_0x543e28=Math['min'](-0x267*-0x1+-0x163e+0x17d6,Math['floor']((_0x4a866c[_0x12b9ad]-_0x294d42)*_0x56afa1)),_0x4d7b08=Math['min'](0x243a*0x1+-0x1*0x6e7+-0x1954,Math['floor']((_0x52d427[_0x12b9ad]-_0x3ed032)*_0xca92a2)),_0xd25cc4=_0x3225b4(_0xccb954,_0x543e28,_0x4d7b08),_0x330284=_0x17f70f['get'](_0xd25cc4);_0x330284?_0x330284['push'](_0x12b9ad):_0x17f70f['set'](_0xd25cc4,[_0x12b9ad]);}const _0x5818ae=Array['from'](_0x17f70f['keys']())['sort']((_0x25b42e,_0x1ea14f)=>_0x25b42e-_0x1ea14f),_0x5e458c=new Uint32Array(this['numSplats']);let _0x5d3ed8=0xce*0xb+-0x1eb5+-0x5*-0x45f;for(let _0x5b73e0=-0x6b*-0x3a+-0x2416+0xbd8;_0x5b73e0<_0x5818ae['length'];++_0x5b73e0){const _0xef2c2e=_0x17f70f['get'](_0x5818ae[_0x5b73e0]);for(let _0xc5683a=0x9*0x349+0x2*0x11d9+-0x4143;_0xc5683a<_0xef2c2e['length'];++_0xc5683a)_0x5e458c[_0x5d3ed8++]=_0xef2c2e[_0xc5683a];}return _0x5e458c;}['reorder'](_0x2929c5){const _0xe855=new Map(),_0x396acd=_0x312ddf=>{if(_0xe855['has'](_0x312ddf)){const _0x5cba16=_0xe855['get'](_0x312ddf);return _0xe855['delete'](_0x312ddf),_0x5cba16;}return new ArrayBuffer(_0x312ddf);},_0x118316=_0x252b26=>{_0xe855['set'](_0x252b26['byteLength'],_0x252b26);},_0x5a2c45=_0x492456=>{const _0x13ec17=new _0x492456['constructo'+'r'](_0x396acd(_0x492456['byteLength']));for(let _0x37f584=-0x7*0x4d2+0x9*0x26b+-0xbfb*-0x1;_0x37f584<_0x2929c5['length'];_0x37f584++)_0x13ec17[_0x37f584]=_0x492456[_0x2929c5[_0x37f584]];return _0x118316(_0x492456['buffer']),_0x13ec17;};this['elements']['forEach'](_0x2fd9ee=>{_0x2fd9ee['properties']['forEach'](_0x41c16e=>{_0x41c16e['storage']&&(_0x41c16e['storage']=_0x5a2c45(_0x41c16e['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}async function _A(){const _0x449fa8=new Float32Array(-0x509+-0x2*-0x844+-0xb7e);new Int32Array(_0x449fa8['buffer']);let _0x34b0d2=-0x1*-0x6f0+0x2db*0x5+0x1537*-0x1,_0x2f6ac3={};self['onmessage']=async _0x2e45f3=>{const {data:_0x22425d}=_0x2e45f3;switch(_0x22425d['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x8679c0(_0x22425d['properties'],_0x22425d['timeIndex'],_0x22425d['timeOption']);break;case'releaseSeq'+'Data':_0x5b0b63(_0x22425d['index']);break;case'releaseAll'+'SeqData':_0x5d5d41();break;case'destroyWor'+'ker':_0x2c2523();break;}};const _0x33dc95=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x543c56=-0xa49*0x3+0x9db+-0x10*-0x150;_0x543c56<0x1*0x1be7+0x191b*-0x1+-0x29f;++_0x543c56)if(!_0x2f6ac3['f_rest_'+_0x543c56])return _0x543c56;return 0xde5+0xa*-0x15d+-0x16;})())]??-0x1*-0xe7d+0x61*0x25+-0xe41*0x2),_0x8679c0=(_0x5c2cd4,_0x4ba8a1,_0x3f4db3)=>{var _0xdcd740,_0x1f6ad0;_0x34b0d2+=(((_0xdcd740=_0x5c2cd4['position'])==null?void(0x44*0x13+-0x1cbf+0x17b3):_0xdcd740['length'])??0x1500+0x2055+0x7b*-0x6f)/(-0x19*0xe6+-0xbb9+0x2232),console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20append'+'GSplatData'+'\x20numSplats',_0x34b0d2,(((_0x1f6ad0=_0x5c2cd4['position'])==null?void(0x5a7+-0x4*-0x868+-0x2747):_0x1f6ad0['length'])??0x112d+0xeee+-0x201b)/(-0x1e0+0x25f1+0x2*-0x1207));const _0x2900aa=Object['keys'](_0x5c2cd4);for(let _0x10b89c=0x447+-0x2*0x74+0x35f*-0x1;_0x10b89c<_0x2900aa['length'];_0x10b89c++){const _0x10ed7d=_0x2900aa[_0x10b89c],_0x3f8861=_0x5c2cd4[_0x10ed7d],_0xf81e9c=_0x2f6ac3[_0x10ed7d]??new Float32Array(0x1*0x1105+-0x2f6*-0xc+0x4c7*-0xb);if(_0x3f8861){let _0x286fe5=null;switch(_0x10ed7d){case'position':_0x286fe5=new Float32Array(_0x34b0d2*(-0x571+-0x26fd+0x2c71*0x1));break;case'color_opac'+'ity':_0x286fe5=new Uint16Array(_0x34b0d2*(-0x23cf+-0x1*-0x21c1+-0x2*-0x109));break;case'scale':_0x286fe5=new Uint16Array(_0x34b0d2*(-0xacf+-0xa3d*0x1+-0x1*-0x150f));break;case'motion':_0x286fe5=new Float32Array(_0x34b0d2*(0xc36+-0xc87+-0xe*-0x6));break;case'rotation':_0x286fe5=new Float32Array(_0x34b0d2*(0x82b+-0x1*-0x8db+-0x1103));break;default:_0x286fe5=new Float32Array(_0x34b0d2);break;}_0x286fe5['set'](_0xf81e9c,0x1693+-0x23ad*0x1+0xd1a),_0x286fe5['set'](_0x3f8861,_0xf81e9c['length']),_0x2f6ac3[_0x10ed7d]=_0x286fe5;}}const _0x967b72={};Object['keys'](_0x2f6ac3)['forEach'](_0x190a83=>{_0x190a83==='scale'||_0x190a83==='color_opac'+'ity'?_0x967b72[_0x190a83]=new Uint16Array(_0x2f6ac3[_0x190a83]['buffer']['slice']()):_0x967b72[_0x190a83]=new Float32Array(_0x2f6ac3[_0x190a83]['buffer']['slice']());});const _0x2411f3=Object['keys'](_0x967b72)['map'](_0x4d366f=>_0x967b72[_0x4d366f]['buffer']),_0x3492f7=_0xac47fb(),_0x341a97=Object['keys'](_0x3492f7)['map'](_0x212baf=>_0x3492f7[_0x212baf]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x967b72,'transformData':_0x3492f7},_0x2411f3['concat'](_0x341a97));},_0xac47fb=()=>{const _0x396d07=_0x2f6ac3['position']['length']/(0xc5*-0x22+0x2*-0x280+0x1f2d),_0x40355c=_0x2f6ac3['position'],_0x1919cf=_0x2f6ac3['scale'],_0x23a844=_0x2f6ac3['rotation'],_0x16dcd2=_0x2f6ac3['motion'],_0x516b9c=_0x2f6ac3['t'],_0x54da86=_0x2f6ac3['t_scale'],_0x259a4f=_0x2f6ac3['time_index'],_0xa160d5=_0x2f6ac3['color_opac'+'ity'],_0x3ed97=(_0x516b9c==null?void(-0x4c7*-0x5+-0x1b53+-0x10*-0x37):_0x516b9c['length'])>-0x21*-0x99+0x2*-0x602+-0x7b5;let _0x1db8e3=null,_0x536eae=null,_0x79761f=null,_0x55cf35=null;_0x3ed97&&(_0x536eae=new Float32Array(_0x396d07*(0x5*-0x1fa+0x1*0x1cec+-0x1307)),_0x55cf35=new Float32Array(_0x396d07),_0x1db8e3=new Float32Array(_0x16dcd2['buffer']['slice']()),_0x79761f=new Float32Array(_0x16dcd2['buffer']['slice']()));const _0x382976=new Float32Array(_0x40355c['buffer']['slice']()),_0x27b782=new Float32Array(_0x40355c['buffer']['slice']()),_0x354ab4=new Uint16Array(_0xa160d5['buffer']['slice']()),_0x4844bd=new Uint16Array(_0x1919cf['buffer']['slice']()),_0x5e0618=new Float32Array(_0x23a844['buffer']['slice']());for(let _0x42a5e0=-0x5b9*-0x1+-0x15a7+0xfee*0x1;_0x42a5e0<_0x396d07;++_0x42a5e0)_0x3ed97&&_0x536eae&&_0x55cf35&&(_0x55cf35[_0x42a5e0]=_0x54da86?Math['exp'](_0x54da86[_0x42a5e0]):-0x1*-0x215b+-0x138d*-0x1+-0x34e8,_0x536eae[_0x42a5e0*(-0x3*0x74b+-0x1f5b+-0x1*-0x353f)+(-0xb9a+-0x1*-0xc25+-0x8b)]=_0x516b9c?_0x516b9c[_0x42a5e0]:-0x95b+0x16b3+-0xd58,_0x536eae[_0x42a5e0*(0x2*-0xca9+-0x427*-0x8+-0x7e3)+(0x254c+0x159b*0x1+0x3*-0x13a2)]=_0x55cf35[_0x42a5e0]);const _0xd5951c=_0x4ed8d5();let _0x9a5eeb={'dataColor':_0x354ab4,'dataCenters':_0x27b782,'dataPosition':_0x382976,'dataScale':_0x4844bd,'dataRotation':_0x5e0618,..._0xd5951c};return _0x3ed97&&(_0x9a5eeb={..._0x9a5eeb,'dataMotion':_0x1db8e3,'dataTime':_0x536eae,'motion':_0x79761f,'tScaleArray':_0x55cf35,'muT':new Float32Array(_0x516b9c),'timeIndex':new Float32Array(_0x259a4f)}),_0x9a5eeb;},_0x271753=_0x7d08b3=>{const _0x43dd53=[];for(let _0x5392af=-0x1ebc+0x1f94+0x6c*-0x2;_0x5392af<_0x7d08b3;++_0x5392af)_0x43dd53['push'](_0x2f6ac3['f_rest_'+_0x5392af]);return _0x43dd53;},_0x4ed8d5=()=>{const _0x2cef49=_0x33dc95();if(_0x2cef49<=0x4c*0x50+0xb2+-0x15*0x12a)return{};const _0x5865d9=_0x2f6ac3['x']['length'],_0x99d9e1=new Uint32Array(_0x5865d9*(0x111+-0x10f0+0xfe3)),_0x3d621f=new Uint32Array(_0x5865d9*(0x7*-0x107+-0x3*-0x79d+-0xfa2)),_0x30f5a9=new Uint32Array(_0x5865d9*(-0x2670+-0x211*-0x4+0xb8*0x2a)),_0x306ca4=new Uint32Array(_0x5865d9*(-0x12d7+-0x14e8+0x57*0x75)),_0x45c2ac={0x1:0x3,0x2:0x8,0x3:0xf}[_0x2cef49],_0xc094cf=_0x271753(_0x45c2ac*(0x5f3+-0x29*0x68+0xab8)),_0x525c63=0x267a+-0x875*-0x1+-0x8*0x4de,_0x2e6fec=0x969+-0x1619+0x1*0x10af,_0x5f1166=new Float32Array(0x3*0x53d+-0x3*0x8fd+0xb41),_0x40945d=new Uint32Array(_0x5f1166['buffer']),_0x2ec2f1=new Array(_0x45c2ac*(-0x1*0x1669+-0xbf*0x11+0xd1*0x2b))['fill'](0x151*0x4+-0x1396+0xe52);for(let _0x3040c9=-0x13*-0x1c7+-0x10be+-0x1107;_0x3040c9<_0x5865d9;++_0x3040c9){for(let _0x3b50ef=-0x1c89+-0x5d5*-0x2+0x10df;_0x3b50ef<_0x45c2ac;++_0x3b50ef)_0x2ec2f1[_0x3b50ef*(-0x3c*-0x17+-0x12*-0x77+0x99*-0x17)]=_0xc094cf[_0x3b50ef][_0x3040c9],_0x2ec2f1[_0x3b50ef*(-0x4d9+0x902+-0x426)+(0x26e5+-0x17eb+0x1*-0xef9)]=_0xc094cf[_0x3b50ef+_0x45c2ac][_0x3040c9],_0x2ec2f1[_0x3b50ef*(0xab0+0x2570+-0x1*0x301d)+(-0x3*0x150+-0x7c8+0x13*0x9e)]=_0xc094cf[_0x3b50ef+_0x45c2ac*(-0x1*-0xae5+-0x11b+-0x8*0x139)][_0x3040c9];let _0x2dfe2d=_0x2ec2f1[0x162+-0x1a*0x30+0x37e];for(let _0x1739b4=0x2fd+0x752+-0xa4e;_0x1739b4<_0x45c2ac*(0x21ce+-0x1*0x7cf+-0x19fc);++_0x1739b4)_0x2dfe2d=Math['max'](_0x2dfe2d,Math['abs'](_0x2ec2f1[_0x1739b4]));if(_0x2dfe2d!==-0xd2a+-0x1c49+0x2973){for(let _0x2bc773=0x834+-0x1*0x16f7+0xec3;_0x2bc773<_0x45c2ac;++_0x2bc773)_0x2ec2f1[_0x2bc773*(-0x4*0x527+-0x1661+0x2b00)+(0x1161+0x472+-0x1*0x15d3)]=Math['max'](-0x1e64+-0xc*-0x19c+0xb14,Math['min'](_0x525c63,Math['floor']((_0x2ec2f1[_0x2bc773*(0xe87+0x2671+-0x1*0x34f5)+(0x212a+0x1748+-0x352*0x11)]/_0x2dfe2d*(0x630+0x2113*0x1+-0x2743*0x1+0.5)+(-0x10b1+-0x1*0xd8b+-0x183*-0x14+0.5))*_0x525c63+(0xdda+0x1*-0xdee+-0x1*-0x14+0.5)))),_0x2ec2f1[_0x2bc773*(-0x21*0xe8+-0x18ca*-0x1+0x521)+(-0x49d*0x7+0x173f+0x90d)]=Math['max'](-0x1*0x1408+-0x15f7+0x29ff*0x1,Math['min'](_0x2e6fec,Math['floor']((_0x2ec2f1[_0x2bc773*(0xc67+0x3*-0x5ff+0x599)+(-0xab5+0x2*0x287+0x5a8*0x1)]/_0x2dfe2d*(-0x17c9*-0x1+-0x1e37+-0x66e*-0x1+0.5)+(-0x1cd5+-0x1cfa+-0x1*-0x39cf+0.5))*_0x2e6fec+(-0x35f*-0x1+-0x25ae+0x224f+0.5)))),_0x2ec2f1[_0x2bc773*(0x4f*0x50+0x3*-0x75c+-0x299)+(0x19b+0x1*0x361+0xb6*-0x7)]=Math['max'](-0x119d+-0x8a8+-0x1*-0x1a45,Math['min'](_0x525c63,Math['floor']((_0x2ec2f1[_0x2bc773*(0x6f*0x26+0x1069+-0x20e0)+(0x1913+0x1057+-0x14*0x212)]/_0x2dfe2d*(-0x8ed*0x1+-0x1ea5+-0x2*-0x13c9+0.5)+(-0x1614+-0x1*0xb9d+0x21b1+0.5))*_0x525c63+(0x14*-0xe2+-0xce2+-0xf45*-0x2+0.5))));_0x5f1166[0x1225+0x59*0x1+-0x3*0x62a]=_0x2dfe2d,_0x99d9e1[_0x3040c9*(-0x1d2d+-0x602*0x3+-0x11*-0x2c7)+(0x1*-0x241d+-0x205+0x2622)]=_0x40945d[0x2629+-0xa69+-0x1bc0],_0x99d9e1[_0x3040c9*(0x11b3+-0x736*0x4+0xb29)+(-0x10fd+0x3*-0x31d+-0x141*-0x15)]=_0x2ec2f1[0x405*-0x3+-0x102d+0x1c3c]<<0x1*0x1762+-0xcdd+0x29c*-0x4|_0x2ec2f1[-0xba5+0xb*-0x354+-0x1*-0x3042]<<0x1aa4*0x1+0x21fb*-0x1+-0xd2*-0x9|_0x2ec2f1[0x1*0x281+-0x19c4+-0xa1*-0x25],_0x99d9e1[_0x3040c9*(0x119*0xd+-0x196e+0xb2d*0x1)+(-0x237c+0x18f2+-0x10e*-0xa)]=_0x2ec2f1[0x1ba*0xd+0x1711+0x2d8*-0x10]<<0x31*0x7a+0xc9f+0x8f9*-0x4|_0x2ec2f1[0x8*0x2e6+-0x2403+-0xcd7*-0x1]<<-0x1*0x1be9+-0xb*-0x273+0x103|_0x2ec2f1[0x1*-0xfec+-0x3*0x364+0x3bb*0x7],_0x99d9e1[_0x3040c9*(-0x1616*-0x1+0x12ac*0x1+-0x28be)+(0x1ab2+-0x6*0x541+0x1*0x4d7)]=_0x2ec2f1[-0x1097+-0x1f4b+0x2fe8]<<-0x1*-0x15a2+0x2658+-0x3be5|_0x2ec2f1[-0xa*-0x33b+-0x430*0x2+-0x17e7]<<0x1*-0x20ef+0x1*0xb47+0x15b3|_0x2ec2f1[0x10b*-0x7+-0x227d+-0x65*-0x6a],_0x2cef49>-0x1d+-0x2db*0x4+0xe*0xd3&&(_0x3d621f[_0x3040c9*(-0xb*-0x32b+-0x1*-0x25af+-0x9c*0x77)+(0x137b+0x12b2+-0x262d)]=_0x2ec2f1[0x265a+0x1c09+-0x39*0x12a]<<0x1cf0*0x1+-0x8c0+-0x141b|_0x2ec2f1[-0x3*0xb32+0x11d1*0x1+-0x3*-0x545]<<0xf6b+0x454+0x34*-0x61|_0x2ec2f1[0xde0+-0x118d+0x11*0x38],_0x3d621f[_0x3040c9*(-0xf9*0x14+0x25fd+-0x1285)+(-0x1*-0x172b+0x1f*0x67+-0x23a3)]=_0x2ec2f1[-0x18e*0x7+0x1952+-0xe64]<<0x14e2+-0x212*0x1+-0x12bb|_0x2ec2f1[-0x2235*0x1+0x91*-0x13+0x2d05]<<-0x23ab+0xcc4*0x1+0x16f2*0x1|_0x2ec2f1[0x5a*0xc+0x1*-0xe96+0xa6c],_0x3d621f[_0x3040c9*(-0x139f+0x10ca+0x2d9)+(0x1*0x132b+0x733+-0x1a5c)]=_0x2ec2f1[0x157f+0xacc*0x1+0x101e*-0x2]<<-0x4d*0x3e+-0x17c7+-0x1*-0x2a82|_0x2ec2f1[0xdf4+0x181f+-0x2603]<<0x1*0x12ad+-0x1961*-0x1+-0x2c03|_0x2ec2f1[-0xe0e+-0x23f*0x2+0x129d],_0x3d621f[_0x3040c9*(0x35a*-0x4+0x226b*0x1+-0x1*0x14ff)+(0x5b8+-0xd*-0x2db+0x2ad4*-0x1)]=_0x2ec2f1[-0x144*-0xf+0x4b2+-0x179c]<<-0xf*0x1b1+0x1c30+-0x2bc|_0x2ec2f1[-0x278*0x6+-0xa89+0x196c*0x1]<<0x2466+0x5*0x551+-0x3ef0|_0x2ec2f1[0x13e4+0x173c+-0x5f*0x74],_0x2cef49>0x1*-0x177b+0x26eb+0x1*-0xf6e?(_0x30f5a9[_0x3040c9*(0x25aa+0x1fa+-0x27a0)+(-0x18c4+0x47*0x76+0x7f6*-0x1)]=_0x2ec2f1[-0x12f6+0x1*0xdd5+0x536]<<0xa*0x2f1+-0x3*-0x36c+-0x2799|_0x2ec2f1[-0x23b7+0x1*0x692+-0x1d3b*-0x1]<<0x1*0x2581+0x8a6+0x1c6*-0x1a|_0x2ec2f1[-0x129b*0x1+0x7d7*-0x3+0x2a37*0x1],_0x30f5a9[_0x3040c9*(-0xbde*-0x2+-0x166*0x17+0x872)+(0x1af4+-0x3*0x33f+-0x1136)]=_0x2ec2f1[0xc*-0x2cb+-0x40b+0x25a7]<<0x167c+0x23bd+-0x2*0x1d12|_0x2ec2f1[-0x2073+0x4*0x4+0x207c]<<0x1*0x1f85+0x14b*-0x12+-0x834|_0x2ec2f1[-0x8e2*-0x3+-0x1*0xf8f+-0xafd],_0x30f5a9[_0x3040c9*(-0x1bb3*0x1+0x1*-0x1ec5+0x3a7c)+(-0x36*-0x17+-0x1*-0x260e+-0x2ae6)]=_0x2ec2f1[-0x9dc*-0x1+0x2e6*-0x8+0xd6f]<<-0x1*0x141b+-0x15c2+0xe*0x2ff|_0x2ec2f1[0x199e+-0x756*0x1+-0x1*0x122c]<<0x1c7*0xb+-0x71f*-0x4+-0x2ffe|_0x2ec2f1[0x16cc+0x2*-0xfa3+-0x897*-0x1],_0x30f5a9[_0x3040c9*(0x1*-0xfe5+0x2373+-0x29*0x7a)+(0x1912*-0x1+0xff*-0x19+0x31fc)]=_0x2ec2f1[-0x1*-0x19ae+-0x1cdd+-0xa9*-0x5]<<0x15b*-0x19+-0x1bf6+0x3dee|_0x2ec2f1[0x1c3c+0x269d+0x92*-0x75]<<-0x4*-0x6bb+0x151f*0x1+-0x3000|_0x2ec2f1[-0x1436*0x1+-0x1*0x1bb+-0x327*-0x7],_0x306ca4[_0x3040c9*(0x1eca+-0x17ad+-0x1*0x719)+(0x5*-0x14c+0x1d31+-0x16b5)]=_0x2ec2f1[-0x5d1*0x2+-0x2294+0x2e57]<<0x1761+0xfb3*0x1+-0x26ff|_0x2ec2f1[0x1*-0x579+0x2*0x35+0x531]<<0x94a*-0x2+-0x1188+0x2427|_0x2ec2f1[-0x1c2f+0x1706+0x54c],_0x306ca4[_0x3040c9*(-0x22a*-0x11+-0x246a+0x4*-0x17)+(-0x1e3+0x20e+-0x2a)]=_0x2ec2f1[0x3*0x77b+-0x11c6+-0x487]<<-0x1*0x77f+-0x1016+0x2*0xbd5|_0x2ec2f1[0x499+0xc9a+-0x110e]<<-0x1*-0x1f6a+-0x21ee+0x28f|_0x2ec2f1[0x157c+-0x1429+-0x12d],_0x306ca4[_0x3040c9*(0x17e1*0x1+0xe2+0x5*-0x4f3)+(-0x24fa+-0x910+-0x7*-0x694)]=_0x2ec2f1[-0x151*0xd+-0x85f+0x19a3]<<-0x1adf+-0x1*-0x39+-0x8e9*-0x3|_0x2ec2f1[0x311+-0x1*0x837+0x54e]<<0x2e*0x43+0x2546+-0x3145|_0x2ec2f1[-0x5cc*0x2+0x1cc2+0x1*-0x1101],_0x306ca4[_0x3040c9*(0x14e*0xd+0x27*-0x72+0x6c)+(0xdea+-0xa65*-0x1+-0x14*0x137)]=_0x2ec2f1[0x1*-0xaf5+-0x156*-0x17+-0x139b]<<0x2474+0x991+-0x16f8*0x2|_0x2ec2f1[-0x1617+0x20a8+-0xa66]<<0x4*0x2cf+-0xe*-0x255+-0x2bd7|_0x2ec2f1[-0xda*-0x1a+-0x37a+-0x127e]):_0x30f5a9[_0x3040c9]=_0x2ec2f1[0x18*0x6c+0x137*-0xb+0x352]<<0xff8+-0x83d+-0x3d3*0x2|_0x2ec2f1[-0x1*0x257+-0x1*0x15c1+0x182e]<<-0x11b8+0xcdf+0x4e4|_0x2ec2f1[0xa1d+-0x138b+-0x1*-0x985]);}}return{'sh1to3Data':_0x99d9e1,'sh4to7Data':_0x3d621f,'sh8to11Data':_0x30f5a9,'sh12to15Data':_0x306ca4};},_0x5b0b63=_0x4974aa=>{if(!_0x2f6ac3['time_index'])return;const _0x4e3497=_0x2f6ac3['time_index']['findIndex'](_0x4b69d4=>_0x4b69d4===_0x4974aa);let _0x32f6ad=_0x2f6ac3['time_index']['findIndex']((_0x18f1af,_0x4c02b4)=>_0x18f1af!==_0x4974aa&&_0x4c02b4>_0x4e3497);if(_0x32f6ad===-(-0x3*0x27e+0x1ab1+-0x1336)&&_0x4e3497===-(-0x1b4*-0x8+0x211d+0xbaf*-0x4))return;_0x32f6ad===-(0x2*0x41+0x821*-0x2+-0x1*-0xfc1)&&_0x4e3497!==-(-0x1992+0x25a3+-0xc10)&&(_0x32f6ad=_0x2f6ac3['time_index']['length']),_0x34b0d2-=_0x32f6ad-_0x4e3497,console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20releas'+'eSeqData\x20n'+'umSplats',_0x34b0d2,_0x32f6ad-_0x4e3497);const _0x590376=Object['keys'](_0x2f6ac3);for(let _0x3cad19=-0x1*-0x248f+0x12e1+-0x1bb8*0x2;_0x3cad19<_0x590376['length'];_0x3cad19++){const _0x34b579=_0x590376[_0x3cad19],_0x210ee6=_0x2f6ac3[_0x34b579];if(_0x210ee6){let _0x378210=-0x531*-0x1+-0x153+0x2b*-0x17;switch(_0x34b579){case'position':_0x378210=-0x517*-0x5+0x188d+-0x31fd;break;case'color_opac'+'ity':_0x378210=-0x2374+-0x159c+-0x3914*-0x1;break;case'scale':_0x378210=-0x21e1+-0x1d3*0x1+0x23b7;break;case'motion':_0x378210=-0x3b*0x15+-0x29d*-0x3+-0x2fd;break;case'rotation':_0x378210=-0x2c4+-0xf7d+0x491*0x4;break;default:_0x378210=0x4f1+-0x25b9+-0x1*-0x20c9;break;}const _0x5c89bc=new Float32Array(_0x34b0d2*_0x378210);_0x4e3497>-0x1*-0x207b+0xe8*0x5+-0x2503?(_0x5c89bc['set'](_0x210ee6['subarray'](0x8b8+-0x2665*0x1+0x1dad,_0x4e3497*_0x378210),0x14d3+-0x2*0x1275+0x55d*0x3),_0x5c89bc['set'](_0x210ee6['subarray'](_0x32f6ad*_0x378210),_0x4e3497*_0x378210)):_0x5c89bc['set'](_0x210ee6['subarray'](_0x32f6ad*_0x378210),0x1c26+-0x210a+0x4e4),_0x2f6ac3[_0x34b579]=_0x5c89bc;}}},_0x5d5d41=()=>{const _0x35205d=Object['keys'](_0x2f6ac3);for(let _0x4da653=-0x26b*0x1+-0x34d*-0x7+0x8*-0x296;_0x4da653<_0x35205d['length'];_0x4da653++){const _0x374f07=_0x35205d[_0x4da653];_0x2f6ac3[_0x374f07]&&(_0x2f6ac3[_0x374f07]=[]);}},_0x2c2523=()=>{_0x2f6ac3={},_0x34b0d2=0xb10*-0x1+-0x1*-0x1039+-0x529;};}class gA extends me{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+_A['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x446fbd,_0x446660,_0x2b3c7f,_0x13e9d6=!(-0x14ad*-0x1+-0x2668+0x11bc)){var _0x14224c,_0x5545fb;const _0xe956f4={};return _0x446fbd['elements'][-0xe68+-0x505+-0x136d*-0x1]['properties']['forEach'](_0x2eb3fc=>{_0xe956f4[_0x2eb3fc['name']]=_0x2eb3fc['storage'];}),_0x13e9d6?(_0x14224c=this['worker'])==null||_0x14224c['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0xe956f4,'timeIndex':_0x446660,'timeOption':_0x2b3c7f},_0x446fbd['elements'][-0x1*-0x16cb+-0x1084+0x647*-0x1]['properties']['map'](_0x5dbcae=>_0x5dbcae['storage']['buffer'])):(_0x5545fb=this['worker'])==null||_0x5545fb['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0xe956f4,'timeIndex':_0x446660,'timeOption':_0x2b3c7f}),new Promise(_0x39918e=>{this['worker']['onmessage']=_0x3fe34e=>{if(!this['worker'])return;const {data:_0x10ca4f}=_0x3fe34e;_0x10ca4f['type']==='newAppendD'+'ata'&&_0x39918e(_0x10ca4f);};});}async['releaseSeq'+'Data'](_0x204e59){var _0x2caa05;(_0x2caa05=this['worker'])==null||_0x2caa05['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x204e59});}async['releaseAll'+'SeqData'](){var _0x59033c;(_0x59033c=this['worker'])==null||_0x59033c['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x5746fd;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x5746fd=this['worker'])==null||_0x5746fd['terminate'](),this['worker']=null);}}const ic=new te(),G_=new le(),SA=new ie(0x473*-0x3+-0x4f*0x11+0xcf*0x17,0xcc1*0x2+-0x7*0x1c5+-0x17*0x92,-0x8cf+0x17*0x26+-0x1*-0x565,-0x78a*-0x5+-0x61c+-0x1f96+0.4),H_=-0x152af+-0x4b47b+-0x9146a*-0x1;class yA{constructor(_0x39aa79,_0xcda204,_0x38ed87,_0x38cec7,_0x46ceba,_0x50c2f5){const _0x35c41f=_0x39aa79['getProp']('position'),_0x2edbda=_0x39aa79['getProp']('color_opac'+'ity'),_0x11dc80=_0x39aa79['getProp']('scale'),_0x3beda8=_0x39aa79['getProp']('motion'),_0x298325=_0x39aa79['getProp']('rotation');this['read']=_0x431a82=>{_0xcda204&&_0xcda204['set'](_0x35c41f[_0x431a82*(0x148*-0x15+0x46*-0x28+0x25db)+(0x540+0x1283+-0x17c3)],_0x35c41f[_0x431a82*(-0x18d9*-0x1+0xbfb*0x3+0x3cc7*-0x1)+(0x219*0x1+-0xdfc+0xbe4)],_0x35c41f[_0x431a82*(-0x30f*0x2+0x1a*0xd+0x4cf)+(-0x52d+0x12e4+-0xdb5)]),_0x38ed87&&_0x38ed87['set'](_0x298325[_0x431a82*(0x261f*0x1+-0x7b*-0xf+-0x509*0x9)+(-0x19d4+0x1445+0x58f)],_0x298325[_0x431a82*(0xe*-0x35+0x1f73+-0x1c8a)+(0x631*0x3+0xb*0x343+-0x1*0x3673)],_0x298325[_0x431a82*(0xd17*-0x2+-0x57+0x1a88)+(0x3*-0x9b3+0x1*-0x1a3c+-0x3757*-0x1)]),_0x38cec7&&_0x38cec7['set'](_0x11dc80[_0x431a82*(0x272*0x9+-0x1336*-0x1+0x7*-0x5e3)+(-0x1*0x1b83+-0x1*-0x10db+0xaa8*0x1)],_0x11dc80[_0x431a82*(0xeb8+-0x11f*0x8+-0x5bd)+(0x1b90+-0x1835*0x1+0x1ad*-0x2)],_0x11dc80[_0x431a82*(0x8*-0xab+-0x1b45+0x20a0)+(-0xcb8+0x5*-0x51b+0x2641)]),_0x50c2f5&&_0x3beda8&&_0x50c2f5['set'](_0x3beda8[_0x431a82*(-0xab3*-0x1+0x77d+-0x122d)+(-0x1d*-0x7a+0x77*-0x3a+0x74*0x1d)],_0x3beda8[_0x431a82*(0x102*0x11+0x131+-0x24a*0x8)+(0x1797+-0x98*0x3b+0x1*0xb72)],_0x3beda8[_0x431a82*(0x1db7+-0x65*-0x56+0x12*-0x389)+(-0x2339*-0x1+0xe2*0x3+-0x25dd)]),_0x46ceba&&_0x46ceba['set'](_0x2edbda[_0x431a82*(-0x343+0x2b9+0x2*0x47)+(-0x26d0+-0x2582+0x4c52)],_0x2edbda[_0x431a82*(0x2*0x481+0x8*0x284+-0x2*0xe8f)+(0x9a0*0x1+0x1*0x254f+0x1777*-0x2)],_0x2edbda[_0x431a82*(0x16f5*0x1+-0xc5b+-0xa96)+(0x2*0xd33+0x1*-0x248a+-0x2*-0x513)],_0x2edbda[_0x431a82*(-0x255+-0x49*0x24+0x1*0xc9d)+(-0x2d1+0xf1a+-0xc46)]);};}}const vA=(_0x1c432a,_0x33de5e,_0x5412a6)=>{G_['set'](_0x5412a6['x'],_0x5412a6['y'],_0x5412a6['z'],_0x5412a6['w'])['normalize'](),_0x1c432a['setTRS'](_0x33de5e,G_,D['ONE']);};class xA{constructor(_0x446bce,_0x251079=[],_0x5bbff1=[]){h(this,'elements'),h(this,'properties'),h(this,'numSplats',0xf*0x73+0xbb*0x11+0x4ca*-0x4),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x539344;(_0x539344=this['dataWorker'])==null||_0x539344['destroy'](),this['dataWorker']=null;});var _0x38440e,_0x28a891,_0x415f35;this['elements']=_0x446bce,this['properties']=_0x5bbff1,this['numSplats']=((_0x38440e=this['getElement']('vertex'))==null?void(0x1f8d+0x35d+-0x22ea):_0x38440e['count'])??-0x1ed2+-0x1*0x13e0+-0x32b2*-0x1,this['comments']=_0x251079,this['is4D']=!!((_0x415f35=(_0x28a891=this['getElement']('vertex'))==null?void(-0x1d7f+0x894+0x14eb):_0x28a891['properties']['find'](_0x3111a2=>_0x3111a2['name']==='t'))!=null&&_0x415f35['storage']);}async['appendGSpl'+'atData'](_0x18dccd,_0x39a9bf,_0xe7c0f9){var _0x19401d;let _0x4d4ebf=0x1bd6+-0x1dd+-0x19f9;for(let _0x453347=0x1ea+0x152f*-0x1+0x1345;_0x453347<_0xe7c0f9['length']&&_0x39a9bf>_0xe7c0f9[_0x453347];_0x453347+=0x5e1*-0x1+0x1138+0x3*-0x3c7)_0x4d4ebf=_0x453347/(0x1640*0x1+0x1810+-0x2e4e);this['dataWorker']||(this['dataWorker']=new gA(),await this['dataWorker']['appendGSpl'+'atData'](this,-0xa87+-0x43d+0xec4,_0xe7c0f9));const _0x8fde8b=this['getElement']('vertex');_0x8fde8b&&(_0x8fde8b['count']=this['numSplats']);const _0x4975e9=await this['dataWorker']['appendGSpl'+'atData'](_0x18dccd,_0x4d4ebf,_0xe7c0f9,!(0x27+-0x6aa+-0x683*-0x1)),_0x2227af=_0x4975e9['properties'],_0x2ccdd5=((_0x19401d=this['getElement']('vertex'))==null?void(0x2289+-0x2647*0x1+0x3be):_0x19401d['properties'])??[];for(const _0x30e97c in _0x2227af){const _0xaf081e=_0x2ccdd5['find'](_0x307d12=>_0x307d12['name']===_0x30e97c);_0xaf081e?_0xaf081e['storage']=_0x2227af[_0x30e97c]:_0x2ccdd5['push']({'type':'float','name':_0x30e97c,'storage':_0x2227af[_0x30e97c],'byteSize':0x4});}this['transformD'+'ata']=_0x4975e9['transformD'+'ata'],this['numSplats']=_0x2227af['position']['length']/(0x2623+0x49c*-0x2+0x5c8*-0x5);}async['releaseSeq'+'Data'](_0x49f74c){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'leaseSeqDa'+'ta',_0x49f74c),this['dataWorker']['releaseSeq'+'Data'](_0x49f74c),this;}async['releaseAll'+'SeqData'](){var _0x1b65f0;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'lease\x20all\x20'+'SeqData'),(_0x1b65f0=this['dataWorker'])==null||_0x1b65f0['releaseAll'+'SeqData'](),this;}['getProp'](_0x1fccbd,_0x35f109='vertex'){var _0x5bdb19,_0x5be9de;return(_0x5be9de=(_0x5bdb19=this['getElement'](_0x35f109))==null?void(0x7*0x3bc+-0x1*-0x24c5+-0xc95*0x5):_0x5bdb19['properties']['find'](_0x36f871=>_0x36f871['name']===_0x1fccbd))==null?void(0xd2*0x1d+0x150d+-0x2cd7):_0x5be9de['storage'];}['getElement'](_0x5a5361){return this['elements']['find'](_0x530ed2=>_0x530ed2['name']===_0x5a5361);}['createIter'](_0x21acbd,_0x2e19ee,_0x10d1ed,_0x11e3c8,_0x3e8712){return new yA(this,_0x21acbd,_0x2e19ee,_0x10d1ed,_0x11e3c8,_0x3e8712);}['calcAabb'](_0x2c2697,_0x45e6bf){let _0x212a20=0x1a*-0xad+-0x2*-0xde1+0x518*-0x2,_0x142950=-0x1b8e+0x349*0x7+0x48f,_0x378356=-0x7*-0x43+-0x24e*0x1+-0x79*-0x1,_0x3f3789=-0x7f3+0x7f7*0x3+-0xff2,_0x33f59c=0x82b*-0x1+0xae7*-0x3+-0xda0*-0x3,_0x30124e=0x251f+0xac*0xd+-0x2ddb,_0x216839=!(-0x1*-0xf1+0x18ee+-0xb3*0x25);const _0x597873=this['getProp']('position'),_0x5e389d=this['getProp']('scale');for(let _0x1f8baa=0x738+0x305*-0x3+-0x3*-0x9d;_0x1f8baa<this['numSplats'];++_0x1f8baa){if(_0x45e6bf&&!_0x45e6bf(_0x1f8baa))continue;const _0x183bab=_0x597873[_0x1f8baa*(-0x1c71+0xc34+0x1040)+(-0x1745+0x1c1c+-0x4d7)],_0x331beb=_0x597873[_0x1f8baa*(-0x892+0x1f23*0x1+-0x168e)+(-0x536*0x6+-0x3*0xa4d+0x3e2c)],_0x2ea683=_0x597873[_0x1f8baa*(-0x167*0x4+0x22fb+-0x1d5c)+(0x44*-0x11+0x329*0x7+0x11*-0x109)],_0x1d4abc=Math['max'](_0x5e389d[_0x1f8baa*(0x1c1a+-0x16*-0x1bb+-0x4229)+(0xc8d+0x288+0x1b*-0x8f)],_0x5e389d[_0x1f8baa*(0x25*-0xe2+-0xe71*-0x2+0x3cb*0x1)+(0x68f+-0xbee+-0x20*-0x2b)],_0x5e389d[_0x1f8baa*(-0x1*0xadc+0x97b*0x1+0x164)+(0xbf4*-0x2+-0x1285+-0x9*-0x4b7)]);if(!isFinite(_0x183bab)||!isFinite(_0x331beb)||!isFinite(_0x2ea683)||!isFinite(_0x1d4abc))continue;const _0x1f7b02=(0x1*0x215f+-0x2033+-0x2*0x95)*Math['exp'](_0x1d4abc);_0x216839?(_0x216839=!(0xc20+0x1eb1+0x55a*-0x8),_0x212a20=_0x183bab-_0x1f7b02,_0x142950=_0x331beb-_0x1f7b02,_0x378356=_0x2ea683-_0x1f7b02,_0x3f3789=_0x183bab+_0x1f7b02,_0x33f59c=_0x331beb+_0x1f7b02,_0x30124e=_0x2ea683+_0x1f7b02):(_0x212a20=Math['min'](_0x212a20,_0x183bab-_0x1f7b02),_0x142950=Math['min'](_0x142950,_0x331beb-_0x1f7b02),_0x378356=Math['min'](_0x378356,_0x2ea683-_0x1f7b02),_0x3f3789=Math['max'](_0x3f3789,_0x183bab+_0x1f7b02),_0x33f59c=Math['max'](_0x33f59c,_0x331beb+_0x1f7b02),_0x30124e=Math['max'](_0x30124e,_0x2ea683+_0x1f7b02));}return _0x216839||(_0x2c2697['center']['set']((_0x212a20+_0x3f3789)*(-0x2f*0x24+0x5f7+-0xa5*-0x1+0.5),(_0x142950+_0x33f59c)*(0x2f*0xb4+0x1a3*-0x16+0x1*0x2f6+0.5),(_0x378356+_0x30124e)*(0x26d*-0x6+-0x1*-0x9fa+0x494+0.5)),_0x2c2697['halfExtent'+'s']['set']((_0x3f3789-_0x212a20)*(-0x2*-0xf9e+-0x2392+0x456+0.5),(_0x33f59c-_0x142950)*(-0x1b66+-0xb01*0x1+0x2667+0.5),(_0x30124e-_0x378356)*(-0x173b+-0x216e+-0x12e3*-0x3+0.5))),!_0x216839;}['yieldToMai'+'n'](){var _0x604b01;return(_0x604b01=globalThis['scheduler'])!=null&&_0x604b01['yield']?globalThis['scheduler']['yield']():new Promise(_0x1e6c3e=>{setTimeout(_0x1e6c3e,-0x4bf*-0x2+-0x179c+0x2*0x70f);});}async['getCenters'](_0x368f70){const _0x4fa371=this['getProp']('x'),_0x3ab4d3=this['getProp']('y'),_0x152d1c=this['getProp']('z');for(let _0xb95339=0xcf9+0x367+-0x1060;_0xb95339<this['numSplats'];++_0xb95339)_0x368f70[_0xb95339*(0x116f+0x24fd*-0x1+-0x1391*-0x1)+(0x1d*-0x14+-0xdeb*-0x2+-0x443*0x6)]=_0x4fa371[_0xb95339],_0x368f70[_0xb95339*(0x92f*0x1+0x5*-0x7bb+0x1d7b)+(-0x5b8*-0x1+-0xd9b+0x7e4)]=_0x3ab4d3[_0xb95339],_0x368f70[_0xb95339*(-0x12*-0xd+0x1*-0xe4b+0xd64)+(-0x1*0x9c9+-0x2304+0x2ccf)]=_0x152d1c[_0xb95339],_0xb95339%H_===0x1c42+-0x52f*0x1+-0x1713&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x4592f7;if((_0x4592f7=this['transformD'+'ata'])!=null&&_0x4592f7['muT'])return this['transformD'+'ata']['muT'];const _0x1e11d6=this['getProp']('t');return _0x1e11d6?new Float32Array(_0x1e11d6):void(-0x1b96+0x17eb*0x1+-0x3ab*-0x1);}async['getTScale'](){const _0x5a9c14=this['getProp']('t_scale');if(!_0x5a9c14)return;const _0x2f2154=new Float32Array(this['numSplats']);for(let _0x2a253d=-0x12c8+0x239e+-0x10d6;_0x2a253d<this['numSplats'];++_0x2a253d)_0x2f2154[_0x2a253d]=Math['exp'](_0x5a9c14[_0x2a253d]),_0x2a253d%H_===-0x1*-0xa31+0x12f1*0x1+-0x1d22&&await this['yieldToMai'+'n']();return _0x2f2154;}['getMotion'](_0x10e263){const _0x43c5b5=this['getProp']('motion');_0x43c5b5&&new Float32Array(_0x43c5b5['buffer']['slice']());}['getTimeInd'+'ex'](){var _0x145bbc;if((_0x145bbc=this['transformD'+'ata'])!=null&&_0x145bbc['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x31c82e=this['getProp']('time_index');if(_0x31c82e)return new Float32Array(_0x31c82e);}['calcFocalP'+'oint'](_0x66b05c,_0x2baf0e){const _0x8cac4e=this['getProp']('position'),_0x41c288=this['getProp']('scale');_0x66b05c['x']=0x8*0x43c+-0x2387+0x1a7,_0x66b05c['y']=0x2*-0xa6c+0xf46+-0x592*-0x1,_0x66b05c['z']=0x1*-0x87e+0x17ef*0x1+-0xf71;let _0x3217fd=-0x4*-0x20+-0x2*0xad4+0x8*0x2a5;for(let _0xdebba1=0x1301+0x816+0x1b17*-0x1;_0xdebba1<this['numSplats'];++_0xdebba1){if(_0x2baf0e&&!_0x2baf0e(_0xdebba1))continue;const _0x4b1700=_0x8cac4e[_0xdebba1*(-0x1b*-0xc3+-0x2393*-0x1+-0x3821*0x1)+(-0x18*-0xa4+0x1108+0x1e8*-0x11)],_0x434b22=_0x8cac4e[_0xdebba1*(-0x20e7*-0x1+-0x4d*0x5f+-0x451)+(0x35a+-0x9*-0x89+-0xa*0xd1)],_0x5a8195=_0x8cac4e[_0xdebba1*(0x13c1+-0x80d+-0xbb1)+(-0x1*0x14b7+0x1088+0x1d*0x25)];if(!isFinite(_0x4b1700)||!isFinite(_0x434b22)||!isFinite(_0x5a8195))continue;const _0x16ba79=(-0x1e7c+0x950+0x27*0x8b)/(0x806+0x1*0x1c49+-0x244e+Math['max'](_0x41c288[_0xdebba1*(-0x4*-0x247+0x1cf9+-0x1*0x2612)+(0x1c14+-0xa0+-0x1b74)],_0x41c288[_0xdebba1*(-0x1*0xf1d+0x1817+0x1b*-0x55)+(0x2*0x99b+0x1*0xb55+0x3*-0xa2e)],_0x41c288[_0xdebba1*(0x169d+-0x1046+0x1e*-0x36)+(-0x1241+0x8cf+0x974)]));_0x66b05c['x']+=_0x4b1700*_0x16ba79,_0x66b05c['y']+=_0x434b22*_0x16ba79,_0x66b05c['z']+=_0x5a8195*_0x16ba79,_0x3217fd+=_0x16ba79;}_0x66b05c['mulScalar']((0x1749+0x10fc+-0x2844*0x1)/_0x3217fd);}['renderWire'+'frameBound'+'s'](_0x53bd7,_0x3a0ebb){const _0xd346f9=new D(),_0x5a89bf=new le(),_0x299988=new D(),_0x54f049=new D(),_0x454a12=new D(),_0x113f26=this['createIter'](_0xd346f9,_0x5a89bf,_0x299988);for(let _0x273ec0=0xda3*0x2+-0x10f+0x1*-0x1a37;_0x273ec0<this['numSplats'];++_0x273ec0)_0x113f26['read'](_0x273ec0),vA(ic,_0xd346f9,_0x5a89bf),ic['mul2'](_0x3a0ebb,ic),_0x54f049['set'](_0x299988['x']*-(-0x1701+0x1cab+-0x5a8),_0x299988['y']*-(-0x14*0x151+0x1c97+-0x241),_0x299988['z']*-(0x15ff+-0x12f5+-0x308)),_0x454a12['set'](_0x299988['x']*(0x3*-0xbb7+0xbc2+-0x1765*-0x1),_0x299988['y']*(0x6*0x3f3+-0x1*-0x186e+-0x301e),_0x299988['z']*(0x259*-0xa+-0xb*0x1b1+0x2a17)),_0x53bd7['immediate']['drawWireAl'+'ignedBox'](_0x54f049,_0x454a12,SA,!(-0x741+-0x12a7+0x19e8),_0x53bd7['defaultDra'+'wLayer'],ic);}get['isCompress'+'ed'](){return!(-0x71*0x45+-0x55*0x26+0x3*0xe5c);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x867566=0x2372+0x1d7e+0x81e*-0x8;_0x867566<0x4*0x6cf+0xd9d+0xa2b*-0x4;++_0x867566)if(!this['getProp']('f_rest_'+_0x867566))return _0x867566;return 0x59*0x1a+-0x1*-0xc7+-0x9a4;})())]??-0x26e8+-0x2*0x12ae+-0x1*-0x4c44;}['calcMorton'+'Order'](){const _0x3872d2=_0x1a7e53=>{let _0x882776=_0x1a7e53[0x283*-0xd+0x1c69*-0x1+0x2*0x1e88],_0x3d1754=_0x1a7e53[-0x12d9+0x2*-0x8ce+0x2475];for(let _0x4c5f23=0x1f*-0x73+-0x217+0x1005;_0x4c5f23<_0x1a7e53['length'];_0x4c5f23++)_0x1a7e53[_0x4c5f23]<_0x882776&&(_0x882776=_0x1a7e53[_0x4c5f23]),_0x1a7e53[_0x4c5f23]>_0x3d1754&&(_0x3d1754=_0x1a7e53[_0x4c5f23]);return{'min':_0x882776,'max':_0x3d1754};},_0x3dc9c0=(_0x4437d4,_0x143fbc,_0x5827df)=>{const _0x15872f=_0x47516e=>(_0x47516e&=0x3cb+-0x222f+-0x2263*-0x1,_0x47516e=(_0x47516e^_0x47516e<<0x1576+-0x9f2+-0xb74)&0x8e3b1c05*-0x1+-0x14aabfcc4+0x2d7e719c8,_0x47516e=(_0x47516e^_0x47516e<<-0xe9c+0xfb7+-0x113)&0x1*0x1ffbaef+-0x2f51*-0x1add+-0x3f5ddcd,_0x47516e=(_0x47516e^_0x47516e<<0x1afc+-0x2543+0xa4b)&-0x3*0x11a6ea2+0x357bd17+0x303bf92,_0x47516e=(_0x47516e^_0x47516e<<-0x5ce+0x40e*-0x5+0x1a16)&0x76ac6f2+-0xb504f94+-0x2f*-0x470605,_0x47516e);return(_0x15872f(_0x5827df)<<0x1e54+0x23ab+0x41fd*-0x1)+(_0x15872f(_0x143fbc)<<-0x42*-0x11+-0x6a1*0x1+0x9*0x40)+_0x15872f(_0x4437d4);},_0x3a17d7=this['getProp']('x'),_0x262413=this['getProp']('y'),_0x548415=this['getProp']('z'),{min:_0x1f216e,max:_0xbdcb4}=_0x3872d2(_0x3a17d7),{min:_0x5b16f7,max:_0x5428be}=_0x3872d2(_0x262413),{min:_0x4c3e3a,max:_0x3d0d56}=_0x3872d2(_0x548415),_0x3a5638=_0x1f216e===_0xbdcb4?-0x142b+-0x6*0x391+-0x3*-0xddb:(0xcc+0x18a7+0x11*-0x143)/(_0xbdcb4-_0x1f216e),_0x391970=_0x5b16f7===_0x5428be?0xb*-0x227+-0x18d9+0x3086:(-0x3*0x9a5+-0x177e+0x12cf*0x3)/(_0x5428be-_0x5b16f7),_0x3437ef=_0x4c3e3a===_0x3d0d56?-0x1de0+0xf62+0xe7e:(0x2*-0x63c+-0x1f2c+0x2fa4)/(_0x3d0d56-_0x4c3e3a),_0x48c5da=new Map();for(let _0x455b1f=0xb15*-0x2+-0xe72+-0x249c*-0x1;_0x455b1f<this['numSplats'];_0x455b1f++){const _0x5480f7=Math['min'](0x5*0x4a3+0x1a4*0xe+-0x2a28,Math['floor']((_0x3a17d7[_0x455b1f]-_0x1f216e)*_0x3a5638)),_0x4b6476=Math['min'](0xa1b+0x281*0xc+-0x2428,Math['floor']((_0x262413[_0x455b1f]-_0x5b16f7)*_0x391970)),_0x5a19cf=Math['min'](-0x5c*-0x4+0x6ec+-0x1*0x45d,Math['floor']((_0x548415[_0x455b1f]-_0x4c3e3a)*_0x3437ef)),_0x22a5e8=_0x3dc9c0(_0x5480f7,_0x4b6476,_0x5a19cf),_0x471d6e=_0x48c5da['get'](_0x22a5e8);_0x471d6e?_0x471d6e['push'](_0x455b1f):_0x48c5da['set'](_0x22a5e8,[_0x455b1f]);}const _0x2ccc88=Array['from'](_0x48c5da['keys']())['sort']((_0x395de9,_0x56a9f1)=>_0x395de9-_0x56a9f1),_0x134bd9=new Uint32Array(this['numSplats']);let _0x46d3a7=0x240d+-0x1954+0xab9*-0x1;for(let _0x186568=-0xc15+-0x2539+-0x314e*-0x1;_0x186568<_0x2ccc88['length'];++_0x186568){const _0x4edd8a=_0x48c5da['get'](_0x2ccc88[_0x186568]);for(let _0x337937=-0xb3*0x3+-0x82*0x11+0xabb;_0x337937<_0x4edd8a['length'];++_0x337937)_0x134bd9[_0x46d3a7++]=_0x4edd8a[_0x337937];}return _0x134bd9;}['reorder'](_0x12d1ee){const _0x77234b=new Map(),_0x27effa=_0xb6e9f7=>{if(_0x77234b['has'](_0xb6e9f7)){const _0x4a318a=_0x77234b['get'](_0xb6e9f7);return _0x77234b['delete'](_0xb6e9f7),_0x4a318a;}return new ArrayBuffer(_0xb6e9f7);},_0x3d23cc=_0x530fe3=>{_0x77234b['set'](_0x530fe3['byteLength'],_0x530fe3);},_0x4603c0=_0x2d85f5=>{const _0x3cbfff=new _0x2d85f5['constructo'+'r'](_0x27effa(_0x2d85f5['byteLength']));for(let _0x246949=-0xa92*-0x1+-0x1a29+-0x133*-0xd;_0x246949<_0x12d1ee['length'];_0x246949++)_0x3cbfff[_0x246949]=_0x2d85f5[_0x12d1ee[_0x246949]];return _0x3d23cc(_0x2d85f5['buffer']),_0x3cbfff;};this['elements']['forEach'](_0x10f760=>{_0x10f760['properties']['forEach'](_0x2755f6=>{_0x2755f6['storage']&&(_0x2755f6['storage']=_0x4603c0(_0x2755f6['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}const TA='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20void\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(vert'+'ex_positio'+'n,\x200.0,\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a',wA='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'vec4\x20packR'+'gb(vec3\x20v)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uvec3\x20vb\x20'+'=\x20uvec3(cl'+'amp(v,\x20vec'+'3(0.0),\x20ve'+'c3(1.0))\x20*'+'\x20vec3(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uint\x20bits\x20'+'=\x20(vb.x\x20<<'+'\x2021)\x20|\x20(vb'+'.y\x20<<\x2010)\x20'+'|\x20vb.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4((u'+'vec4(bits)'+'\x20>>\x20uvec4('+'24,\x2016,\x208,'+'\x200))\x20&\x20uve'+'c4(0xff))\x20'+'/\x20vec4(255'+'.0);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20vec3\x20dir'+';\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20sampler2'+'D\x20centroid'+'s;\x0a\x20\x20\x20\x20uni'+'form\x20mediu'+'mp\x20float\x20s'+'hN_mins;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20f'+'loat\x20shN_m'+'axs;\x0a\x0a\x20\x20\x20\x20'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20ivec'+'2\x20uv\x20=\x20ive'+'c2(gl_Frag'+'Coord.xy)\x20'+'*\x20ivec2(SH'+'_COEFFS,\x201'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20mediump\x20v'+'ec3\x20coeffi'+'cients[SH_'+'COEFFS];\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(int\x20i\x20=\x20'+'0;\x20i\x20<\x20SH_'+'COEFFS;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20s\x20=\x20texe'+'lFetch(cen'+'troids,\x20iv'+'ec2(uv.x\x20+'+'\x20i,\x20uv.y),'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20coefficie'+'nts[i]\x20=\x20m'+'ix(vec3(sh'+'N_mins),\x20v'+'ec3(shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20packRgb'+'(evalSH(co'+'efficients'+',\x20dir)\x20*\x200'+('.25\x20+\x200.5)'+';\x0a\x20\x20\x20\x20}\x0a'),EA='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput:\x20Vert'+'exInput)\x20-'+'>\x20VertexOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Ver'+'texOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a',bA='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'fn\x20packRgb'+'(v:\x20vec3f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vb\x20=\x20v'+'ec3u(clamp'+'(v,\x20vec3f('+'0.0),\x20vec3'+'f(1.0))\x20*\x20'+'vec3f(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20bits\x20='+'\x20dot(vb,\x20v'+'ec3u(1\x20<<\x20'+'21,\x201\x20<<\x201'+'0,\x201));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(('+'vec4u(bits'+')\x20>>\x20vec4u'+'(24,\x2016,\x208'+',\x200))\x20&\x20ve'+'c4u(0xff))'+'\x20/\x20vec4f(2'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20un'+'iform\x20dir:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'shN_mins:\x20'+'f32;\x0a\x20\x20\x20\x20u'+'niform\x20shN'+'_maxs:\x20f32'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20centroids'+':\x20texture_'+'2d<f32>;\x0a\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input:'+'\x20FragmentI'+'nput)\x20->\x20F'+'ragmentOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20uv\x20=\x20'+'vec2i(inpu'+'t.position'+'.xy)\x20*\x20vec'+'2i(SH_COEF'+'FS,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'coefficien'+'ts:\x20array<'+'vec3f,\x20SH_'+'COEFFS>;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x200;\x20i\x20'+'<\x20SH_COEFF'+'S;\x20i++)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s:\x20v'+'ec3f\x20=\x20tex'+'tureLoad(c'+'entroids,\x20'+'vec2i(uv.x'+'\x20+\x20i,\x20uv.y'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20coeffic'+'ients[i]\x20='+'\x20mix(vec3f'+'(uniform.s'+'hN_mins),\x20'+'vec3f(unif'+('orm.shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20packRgb'+'(evalSH(&c'+'oefficient'+'s,\x20uniform'+'.dir)\x20*\x200.'+'25\x20+\x200.5);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20}'+'\x0a'),AA='\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20sampler2D'+'\x20sh0;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x20\x20\x20\x20u'+'niform\x20med'+'iump\x20sampl'+'er2D\x20sh_re'+'sult;\x0a\x0a\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20sh0_mi'+'ns;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20sh0_maxs;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20SH_C0\x20=\x20'+'0.28209479'+'177387814;'+'\x0a\x0a\x20\x20\x20\x20//\x20u'+'npack\x2011,\x20'+'11,\x2010\x20nor'+'malized\x20va'+'lue\x20from\x20r'+'gba8\x20textu'+'re\x20sample\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackRgb(v'+'ec4\x20v)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uve'+'c4\x20uv\x20=\x20uv'+'ec4(v\x20*\x2025'+'5.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uint\x20b'+'its\x20=\x20(uv.'+'x\x20<<\x2024)\x20|'+'\x20(uv.y\x20<<\x20'+'16)\x20|\x20(uv.'+'z\x20<<\x208)\x20|\x20'+'uv.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uvec3\x20'+'vb\x20=\x20(uvec'+'3(bits)\x20>>'+'\x20uvec3(21,'+'\x2010,\x200))\x20&'+'\x20uvec3(0x7'+'ffu,\x200x7ff'+'u,\x200x3ffu)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3(vb)\x20/\x20ve'+'c3(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20baseSampl'+'e\x20=\x20mix(sh'+'0_mins,\x20sh'+'0_maxs,\x20te'+'xelFetch(s'+'h0,\x20source'+'.uv,\x200));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20resolve\x20'+'base\x20color'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4\x20base\x20='+'\x20vec4(vec3'+'(0.5)\x20+\x20ba'+'seSample.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'baseSample'+'.w)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'xtract\x20sph'+'erical\x20har'+'monics\x20pal'+'ette\x20index'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20label'+'Sample\x20=\x20i'+'vec2(texel'+'Fetch(sh_l'+'abels,\x20sou'+'rce.uv,\x200)'+'.xy\x20*\x20255.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20int\x20n\x20=\x20'+('labelSampl'+'e.x\x20+\x20labe'+'lSample.y\x20'+'*\x20256;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20shSample\x20'+'=\x20texelFet'+'ch(sh_resu'+'lt,\x20ivec2('+'n\x20%\x2064,\x20n\x20'+'/\x2064),\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20sh\x20=\x20('+'unpackRgb('+'shSample)\x20'+'-\x20vec3(0.5'+'))\x20*\x204.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'(base.xyz\x20'+'+\x20sh,\x20base'+'.w);\x0a\x20\x20\x20\x20}'+'\x0a'),CA='\x0a\x20\x20\x20\x20var\x20s'+'h0:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'h_labels:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20sh_re'+'sult:\x20text'+'ure_2d<f32'+'>;\x0a\x0a\x20\x20\x20\x20un'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20sh0_m'+'axs:\x20vec4f'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20SH_C0:\x20'+'f32\x20=\x200.28'+'2094791773'+'87814;\x0a\x0a\x20\x20'+'\x20\x20//\x20unpac'+'k\x2011,\x2011,\x20'+'10\x20normali'+'zed\x20value\x20'+'from\x20rgba8'+'\x20texture\x20s'+'ample\x0a\x20\x20\x20\x20'+'fn\x20unpackR'+'gb(v:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20bits'+'\x20=\x20dot(vec'+'4u(v\x20*\x20255'+'.0),\x20vec4u'+'(1u\x20<<\x2024,'+'\x201u\x20<<\x2016,'+'\x201u\x20<<\x208,\x20'+'1u));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20vb'+'\x20=\x20(vec3u('+'bits)\x20>>\x20v'+'ec3u(21,\x201'+'0,\x200))\x20&\x20v'+'ec3u(0x7ff'+'u,\x200x7ffu,'+'\x200x3ffu);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec3f'+'(vb)\x20/\x20vec'+'3f(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20f'+'n\x20readColo'+'r(source:\x20'+'ptr<functi'+'on,\x20SplatS'+'ource>)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'baseSample'+':\x20vec4f\x20=\x20'+'mix(unifor'+'m.sh0_mins'+',\x20uniform.'+'sh0_maxs,\x20'+'textureLoa'+'d(sh0,\x20sou'+'rce.uv,\x200)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20base\x20'+'=\x20vec4f(ve'+'c3f(0.5)\x20+'+'\x20baseSampl'+'e.xyz\x20*\x20SH'+'_C0,\x201.0\x20/'+'\x20(1.0\x20+\x20ex'+'p(-baseSam'+'ple.w)));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20extract\x20'+'spherical\x20'+'harmonics\x20'+'palette\x20in'+'dex\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20labe'+'lSample:\x20v'+'ec2i\x20=\x20vec'+'2i(texture'+'Load(sh_la'+'bels,\x20sour'+'ce.uv,\x200).'+'xy\x20*\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20n\x20=\x20l'+('abelSample'+'.x\x20+\x20label'+'Sample.y\x20*'+'\x20256;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hSample:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(s'+'h_result,\x20'+'vec2i(n\x20%\x20'+'64,\x20n\x20/\x2064'+'),\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'h:\x20vec3f\x20='+'\x20(unpackRg'+'b(shSample'+')\x20-\x20vec3f('+'0.5))\x20*\x204.'+'0;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(base.'+'xyz\x20+\x20sh,\x20'+'base.w);\x0a\x20'+'\x20\x20\x20}\x0a'),PA=(_0x340beb,_0x3f0fdb)=>{for(const _0x80b5f1 in _0x3f0fdb)_0x340beb['resolve'](_0x80b5f1)['setValue'](_0x3f0fdb[_0x80b5f1]);};class MA extends ys{constructor(){super(...arguments),h(this,'executeCal'+'lback',null);}['execute'](){var _0x11025b;(_0x11025b=this['executeCal'+'lback'])==null||_0x11025b['call'](this);}}const W_=new te(),ao=new D();class DA{constructor(_0x508b12,_0x5e1dd4){h(this,'prevDir',new D()),h(this,'updateMode','enable'),(this['device']=_0x508b12,this['gsplatInst'+'ance']=_0x5e1dd4);const {resource:_0x2a4320}=_0x5e1dd4,_0x2d7e4f=new Map(Ce['get'](_0x508b12,_0x508b12['isWebGPU']?'wgsl':'glsl'));this['shader']=$t['createShad'+'er'](_0x508b12,{'uniqueName':'gsplatReso'+'lveSH','vertexGLSL':TA,'fragmentGLSL':wA,'vertexWGSL':EA,'fragmentWGSL':bA,'vertexIncludes':_0x2d7e4f,'fragmentIncludes':_0x2d7e4f,'fragmentDefines':new Map([['SH_BANDS',_0x2a4320['gsplatData']['shBands']['toString']()]]),'attributes':{'vertex_position':Pe}}),this['texture']=_0x2a4320['createText'+'ure']('centroids',Ne,new J(-0x1cb+0xbf5*0x1+-0x2*0x4f5,-0x7a5+-0xbeb*0x2+-0x1f*-0x125)),this['renderTarg'+'et']=new gt({'colorBuffer':this['texture'],'depth':!(0xe7a+-0xbd9+0x4*-0xa8)}),this['renderPass']=new MA(_0x508b12),this['renderPass']['init'](this['renderTarg'+'et'],{}),this['renderPass']['colorOps']['clear']=!(0xa2a*0x2+0x5ad+-0x1a01*0x1),this['quadRender']=new rh(this['shader']);const {material:_0x4bf829}=_0x5e1dd4;_0x4bf829['setDefine']('SH_BANDS','0');const {shaderChunks:_0xcc9b2e}=_0x4bf829;_0xcc9b2e['glsl']['set']('gsplatSogs'+'ColorVS',AA),_0xcc9b2e['wgsl']['set']('gsplatSogs'+'ColorVS',CA),_0x4bf829['update'](),_0x508b12['scope']['resolve']('sh_result')['setValue'](this['texture']);}['destroy'](){const {gsplatInstance:_0x3dd831}=this,{material:_0x46a6b6}=_0x3dd831;_0x46a6b6['setDefine']('SH_BANDS',_0x3dd831['resource']['gsplatData']['shBands']['toString']());const {shaderChunks:_0x167548}=_0x46a6b6;_0x167548['glsl']['delete']('gsplatSogs'+'ColorVS'),_0x167548['wgsl']['delete']('gsplatSogs'+'ColorVS'),_0x46a6b6['update'](),this['quadRender']['destroy'](),this['renderPass']['destroy'](),this['renderTarg'+'et']['destroy'](),this['texture']['destroy'](),this['shader']['destroy']();}['render'](_0x4ffd50,_0x1defc0){const {prevDir:_0x5f5440,updateMode:_0x1e003a}=this;if(_0x1e003a==='disable'||(W_['invert'](_0x1defc0),W_['transformV'+'ector'](_0x4ffd50['forward'],ao),ao['normalize'](),_0x1e003a==='enable'&&ao['equalsAppr'+'ox'](_0x5f5440,-0x696*0x5+-0x1*-0x1f99+-0x1*-0x155+0.001)))return;_0x5f5440['copy'](ao);const _0x4d73ea=()=>{const {device:_0x5244ff}=this,{sh_centroids:_0x52ff56,meta:_0xae332d}=this['gsplatInst'+'ance']['resource']['gsplatData'];PA(_0x5244ff['scope'],{'dir':ao['toArray'](),'centroids':_0x52ff56,'shN_mins':_0xae332d['shN']['mins'],'shN_maxs':_0xae332d['shN']['maxs']}),_0x5244ff['setCullMod'+'e'](bt),_0x5244ff['setDepthSt'+'ate'](Yt['NODEPTH']),_0x5244ff['setStencil'+'State'](null,null),_0x5244ff['setBlendSt'+'ate'](pt['NOBLEND']),this['quadRender']['render']();};this['renderPass']['executeCal'+'lback']=_0x4d73ea,this['renderPass']['render']();}}const IA='\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20means_l'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20means_'+'u;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20quats'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20scales'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20uint\x20n'+'umSplats;\x0a'+'\x0a\x20\x20\x20\x20uint\x20'+'packU32(ve'+'c4\x20v)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20uint(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u\x20|\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20uint('+'v.y\x20*\x20255.'+'0)\x20<<\x2016u\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uin'+'t(v.z\x20*\x2025'+'5.0)\x20<<\x208u'+'\x20|\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(v.w\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20uv'+'ec4\x20packU3'+'2(vec4\x20a,\x20'+'vec4\x20b,\x20ve'+'c4\x20c,\x20vec4'+'\x20d)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uvec4(pac'+'kU32(a),\x20p'+'ackU32(b),'+'\x20packU32(c'+'),\x20packU32'+'(d));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20w\x20='+'\x20int(textu'+'reSize(mea'+'ns_l,\x200).x'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ivec2\x20uv\x20'+'=\x20ivec2(gl'+'_FragCoord'+'.xy);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(ui'+'nt(uv.x\x20+\x20'+'uv.y\x20*\x20w)\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansLSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_l,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansUSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_u,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20quatsSamp'+'le\x20=\x20texel'+'Fetch(quat'+'s,\x20uv,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20scales'+'Sample\x20=\x20t'+'exelFetch('+'scales,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shLabel'+'sSample\x20=\x20'+'texelFetch'+'(sh_labels'+',\x20uv,\x200).x'+('y;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20pcFragCo'+'lor0\x20=\x20pac'+'kU32(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansLS'+'ample,\x20shL'+'abelsSampl'+'e.x),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansUS'+'ample,\x20shL'+'abelsSampl'+'e.y),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(quatsSa'+'mple),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4(scales'+'Sample,\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20}\x0a'),LA='\x0a\x20\x20\x20\x20var\x20m'+'eans_l:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20means_u'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20qua'+'ts:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'cales:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sh_label'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20numSpla'+'ts:\x20u32;\x0a\x0a'+'\x20\x20\x20\x20fn\x20pac'+'kU32(v:\x20ve'+'c4<f32>)\x20-'+'>\x20u32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(u32(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20(u3'+'2(v.y\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20\x20|\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(u32(v.z\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20u32(v.w'+'\x20*\x20255.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20packU'+'Vec32(a:\x20v'+'ec4<f32>,\x20'+'b:\x20vec4<f3'+'2>,\x20c:\x20vec'+'4<f32>,\x20d:'+'\x20vec4<f32>'+')\x20->\x20vec4<'+'u32>\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4<u32'+'>(packU32('+'a),\x20packU3'+'2(b),\x20pack'+'U32(c),\x20pa'+'ckU32(d));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20@fragmen'+'t\x0a\x20\x20\x20\x20fn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20w:\x20u32\x20'+'=\x20textureD'+'imensions('+'means_l,\x200'+').x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2<u32>'+'\x20=\x20vec2<u3'+'2>(pcPosit'+'ion.xy);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv.x\x20+\x20uv'+'.y\x20*\x20w\x20>=\x20'+'uniform.nu'+'mSplats)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20fetch\x20the'+'\x20source\x20in'+'dex\x20and\x20ca'+'lculate\x20so'+'urce\x20uv\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'meansLSamp'+'le:\x20vec3<f'+('32>\x20=\x20text'+'ureLoad(me'+'ans_l,\x20uv,'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20meansUSam'+'ple:\x20vec3<'+'f32>\x20=\x20tex'+'tureLoad(m'+'eans_u,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20quatsSam'+'ple:\x20vec4<'+'f32>\x20=\x20tex'+'tureLoad(q'+'uats,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20scal'+'esSample:\x20'+'vec3<f32>\x20'+'=\x20textureL'+'oad(scales'+',\x20uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shLa'+'belsSample'+':\x20vec2<f32'+'>\x20=\x20textur'+'eLoad(sh_l'+'abels,\x20uv,'+'\x200).xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20packUVec'+'32(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansLSam'+'ple,\x20shLab'+'elsSample.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansUSam'+'ple,\x20shLab'+'elsSample.'+'y),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(quatsSamp'+'le),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4(scalesSa'+'mple,\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a'),yn=-0x5*-0x3e6+0x55c+-0x1*0x18da+0.28209479177387814,Ci=_0x585f6c=>_0x585f6c['read'](0x1a5f+0x58e*-0x5+-0x167*-0x1,0x13a4+-0x36*0x2f+0xa*-0xf9,_0x585f6c['width'],_0x585f6c['height'],{'mipLevel':0x0,'face':0x0,'immediate':!(-0x9c9+0x1e3d*0x1+0x1474*-0x1)}),RA=(_0x48fc9e,_0x21edef)=>{for(const _0x4e8310 in _0x21edef)_0x48fc9e['resolve'](_0x4e8310)['setValue'](_0x21edef[_0x4e8310]);};class OA{constructor(_0x966c16,_0x3a7e0a,_0x556dd1,_0x34629a,_0x248da7,_0x4d5e13){const _0x59d35f=(_0x5480d1,_0x3b4292,_0x1cedc7)=>_0x5480d1*(-0xc2*-0x1d+-0xbf3+-0xa06*0x1-_0x1cedc7)+_0x3b4292*_0x1cedc7,{meta:_0x1805cc}=_0x966c16,{means:_0x2fba2d,scales:_0x16bb5b,sh0:_0x369a00,shN:_0x1478cf}=_0x1805cc,_0x1c3fa2=_0x3a7e0a&&_0x966c16['means_l']['_levels'][0x22da+0x167b+-0x3955],_0x346042=_0x3a7e0a&&_0x966c16['means_u']['_levels'][0x6f1*-0x5+-0xe*0x1df+0x3ce7],_0x2c0ad7=_0x556dd1&&_0x966c16['quats']['_levels'][-0x2614+0x2*0x139+-0x2*-0x11d1],_0x2432c5=_0x34629a&&_0x966c16['scales']['_levels'][0x15*-0x15a+0x17ac+0x43*0x12],_0x3f98af=_0x248da7&&_0x966c16['sh0']['_levels'][0xd2b*-0x1+-0x5b4*0x3+0x1e47],_0x4bdc8e=_0x4d5e13&&_0x966c16['sh_labels']['_levels'][-0xb5a*0x1+0x1*-0x1afe+0x2658],_0x1d1156=_0x4d5e13&&_0x966c16['sh_centroi'+'ds']['_levels'][-0x52*-0x53+0x1f5c+-0x39f2],_0x4df167=(0x1*0xa6+-0x853+0x7*0x119)/Math['sqrt'](-0x2e*0x70+0x1b9+0x3*0x623);this['read']=_0x4bc093=>{if(_0x3a7e0a){const _0x202e76=_0x59d35f(_0x2fba2d['mins'][-0x5d7*0x5+0x1312+0xa21],_0x2fba2d['maxs'][0x1205+0x7*0x4a9+0xe*-0x39e],((_0x346042[_0x4bc093*(-0xbbe*0x3+-0x1944+0x1*0x3c82)+(-0x3*-0x4ca+-0x111+-0xd4d)]<<-0xd87*0x1+-0x1ca5*0x1+-0x1*-0x2a34)+_0x1c3fa2[_0x4bc093*(0x293+0x152f+-0x17be)+(0x5*-0x16a+-0x1d88+0x124d*0x2)])/(-0x11ecb*-0x1+-0x7bed*-0x1+-0x9ab9)),_0x2d870a=_0x59d35f(_0x2fba2d['mins'][0x1dcf+-0x1*-0x23df+-0x41ad],_0x2fba2d['maxs'][0x8cb*0x1+0x1c9*0xe+-0x872*0x4],((_0x346042[_0x4bc093*(-0x4d7+0xa5f+0x161*-0x4)+(-0xde+-0x9ad*0x4+0x133*0x21)]<<-0x11d1+-0x94*0x40+0x36d9)+_0x1c3fa2[_0x4bc093*(0x1ed0+0x8*-0x419+0x1*0x1fc)+(0x1a3+0x21c1+-0x1*0x2363)])/(0x1*-0xa039+-0x4361+0x1e399)),_0x6fc2cb=_0x59d35f(_0x2fba2d['mins'][0x30*-0x1a+0x1*-0x8c5+0x5*0x2bb],_0x2fba2d['maxs'][-0x229d*-0x1+0x1ce7+-0x3f82],((_0x346042[_0x4bc093*(-0x17*-0x11f+0x1cf9+-0xb6*0x4d)+(0x54b+0x1283+-0x4*0x5f3)]<<-0x6c+0x1*0x168e+-0x161a)+_0x1c3fa2[_0x4bc093*(0xf*0xf9+0x4*-0x8f9+0x1551)+(-0xb5d*0x1+-0x51*-0x53+-0xee4*0x1)])/(-0x893+-0x2*-0x335b+-0x2*-0x50ee));_0x3a7e0a['x']=Math['sign'](_0x202e76)*(Math['exp'](Math['abs'](_0x202e76))-(0x223e+-0x259*-0x9+-0x375e)),_0x3a7e0a['y']=Math['sign'](_0x2d870a)*(Math['exp'](Math['abs'](_0x2d870a))-(0x49e*0x2+0x3be*-0x6+0xd39*0x1)),_0x3a7e0a['z']=Math['sign'](_0x6fc2cb)*(Math['exp'](Math['abs'](_0x6fc2cb))-(-0xad9+-0x1138+0x1c12));}if(_0x556dd1){const _0x16f677=(_0x2c0ad7[_0x4bc093*(-0x4*0x6f7+0x1b5c+-0x84*-0x1)+(0x233f+-0x16*-0x37+-0x27f9)]/(0x1d8a*0x1+0x1f*-0xc+0x1b17*-0x1)-(0x83e+0xd12+-0x2aa*0x8+0.5))*_0x4df167,_0x117033=(_0x2c0ad7[_0x4bc093*(0x24fd*-0x1+-0x438*0x3+0x31a9)+(0x56*0x53+-0x90c+-0x12d5)]/(-0xd*-0x15b+0x21ab+-0x203*0x19)-(0x55d*0x1+0x1895*-0x1+0x7b*0x28+0.5))*_0x4df167,_0xffd433=(_0x2c0ad7[_0x4bc093*(-0xc38+0xa1f*0x3+-0x5b*0x33)+(0x1*0xe6c+0x1a6f+0x28d9*-0x1)]/(-0x1b74+0x1*0x146+-0x305*-0x9)-(-0x176+-0x1*0x110b+0x1281+0.5))*_0x4df167,_0x14c711=Math['sqrt'](Math['max'](-0x45a+-0x18e*0x5+0xc20,-0xd*-0x7+0x6a8+-0x2e*0x27-(_0x16f677*_0x16f677+_0x117033*_0x117033+_0xffd433*_0xffd433)));switch(_0x2c0ad7[_0x4bc093*(0x161d+-0xd4a+-0x8cf)+(-0xcf4+0xc7c+0x7b*0x1)]-(-0x294+-0x178f*0x1+0x1b1f)){case 0x440*0x6+0x7*0x428+0x2*-0x1b4c:_0x556dd1['set'](_0x16f677,_0x117033,_0xffd433,_0x14c711);break;case-0x4ee+0xc6d*0x1+0x7*-0x112:_0x556dd1['set'](_0x14c711,_0x117033,_0xffd433,_0x16f677);break;case-0x202+0x1e79+-0x9b*0x2f:_0x556dd1['set'](_0x117033,_0x14c711,_0xffd433,_0x16f677);break;case-0x26*0x2+-0x159d+0x15ec:_0x556dd1['set'](_0x117033,_0xffd433,_0x14c711,_0x16f677);break;}}if(_0x34629a){const _0x115e53=_0x59d35f(_0x16bb5b['mins'][0x867+-0x1b6+-0x6b1],_0x16bb5b['maxs'][0x133b+0x24b0+-0x37eb],_0x2432c5[_0x4bc093*(-0x203b+0x60a+0x1*0x1a35)+(0xf*0x207+0x131b+-0x18c2*0x2)]/(0x91b+0x1ca7+-0x24c3)),_0x57ac87=_0x59d35f(_0x16bb5b['mins'][-0x1063*-0x1+0x21*0x5d+-0x1c5f],_0x16bb5b['maxs'][0x1d8c+-0x1e68+0xdd],_0x2432c5[_0x4bc093*(0x2*-0x5d2+-0x5da+-0x1182*-0x1)+(0x2125+0x206f*-0x1+-0xb5)]/(-0x1e0b+-0x1af4+0x1a*0x23b)),_0x7868d8=_0x59d35f(_0x16bb5b['mins'][0x6e8+-0x9*-0xe1+0x11*-0xdf],_0x16bb5b['maxs'][0x2093+-0x2*-0x470+-0x2971],_0x2432c5[_0x4bc093*(-0x615*0x2+0x21b5+0xa7*-0x21)+(0x16f1*-0x1+-0x7d*0x43+0x37aa)]/(0x1e05+-0x1*0x1726+-0x5e0));_0x34629a['set'](_0x115e53,_0x57ac87,_0x7868d8);}if(_0x248da7){const _0x322886=_0x59d35f(_0x369a00['mins'][-0x7bb*-0x1+-0x20cf+0x1914],_0x369a00['maxs'][-0xa40+0x3d*-0x15+0xf41],_0x3f98af[_0x4bc093*(0x114f+-0x27*0x3b+-0x84e)+(-0x2670+-0x1*-0xd13+0x2b*0x97)]/(-0x123b+0x9*-0x332+0x2ffc)),_0x409ace=_0x59d35f(_0x369a00['mins'][-0x1*0x1196+-0x269c+0x3833],_0x369a00['maxs'][-0x1*0xf37+0x319+0xc1f],_0x3f98af[_0x4bc093*(-0x1faf*0x1+0xe2*-0x1e+0x3a2f)+(-0x11*-0x15b+0x702+-0xc*0x281)]/(-0x1dd*0x4+0x195b+-0x874*0x2)),_0x4dc55f=_0x59d35f(_0x369a00['mins'][0x1b46+0x3*-0x2fe+-0x124a],_0x369a00['maxs'][-0x19cf+-0x4*0x5ff+0x31cd],_0x3f98af[_0x4bc093*(-0x3*-0xb68+0x1180+0x113c*-0x3)+(0x13eb+-0x1ee*0xb+0x151*0x1)]/(0x162f+-0x382+0x3e*-0x49)),_0x2ec55f=_0x59d35f(_0x369a00['mins'][-0x1*0xe65+-0x18c1+-0x19*-0x191],_0x369a00['maxs'][-0x6d6+0x7f5+-0x1*0x11c],_0x3f98af[_0x4bc093*(-0xe72+0x1ba1+-0xd2b*0x1)+(-0x4*0x48e+0x1827+-0x5ec)]/(-0x1d*0xd+0x1822+-0x15aa*0x1));_0x248da7['set'](0x2104+0x152d*0x1+0x3631*-0x1+0.5+_0x322886*yn,0x3*0xab1+0x2*0x19d+-0x234d+0.5+_0x409ace*yn,-0x49*-0x4f+0x1693*0x1+-0x2d1a+0.5+_0x4dc55f*yn,(-0xb50+0xa*0xd6+0x2f5)/(-0x1528+-0x1e33+0x335c+Math['exp'](-_0x2ec55f)));}if(_0x4d5e13){const _0x5d66c0=_0x4bdc8e[_0x4bc093*(0x202+0x215c+0x1*-0x235a)+(0xe57*-0x1+0x1207+0x2*-0x1d8)]+(_0x4bdc8e[_0x4bc093*(0x2142*-0x1+-0x3fd*0x5+0xef*0x39)+(0x12*0x1df+-0xbf*0x34+0x51f)]<<0x4e1*0x3+-0x21fa+0x135f),_0xf42bb7=_0x5d66c0%(0x26f6+0x155*0x3+-0x2ab5)*(-0x1ab7*0x1+-0x1*0x829+0xb*0x32d),_0x3f5379=Math['floor'](_0x5d66c0/(-0x100c+-0x2651+0x369d*0x1));for(let _0x1d5c7b=0x6*0x2b1+0xcf1+0x1d17*-0x1;_0x1d5c7b<-0x5*0x7be+-0xb86+0x2a5*0x13;++_0x1d5c7b)for(let _0x242e23=-0xe6d+-0x1f9d*-0x1+0x44c*-0x4;_0x242e23<-0x145*0xa+0x808+0x4b9;++_0x242e23)_0x4d5e13[_0x1d5c7b*(0x11ed*-0x1+0x1b4d+-0x951)+_0x242e23]=_0x59d35f(_0x1478cf['mins'],_0x1478cf['maxs'],_0x1d1156[(_0xf42bb7+_0x242e23)*(0x21a1+-0x222+-0x1f7b)+_0x1d5c7b+_0x3f5379*_0x966c16['sh_centroi'+'ds']['width']*(0x654+0x8*0x6f+0x139*-0x8)]/(0x1435+-0x47*-0x4+-0x1452));}};}}class FA{constructor(){h(this,'meta'),h(this,'numSplats'),h(this,'means_l'),h(this,'means_u'),h(this,'quats'),h(this,'scales'),h(this,'sh0'),h(this,'sh_centroi'+'ds'),h(this,'sh_labels'),h(this,'packedText'+'ure');}['destroy'](){var _0x12e5c7,_0x4d4638,_0x4e85d5,_0x3769be,_0x43e73f,_0x459309,_0x7eee3d,_0x428a14;(_0x12e5c7=this['means_l'])==null||_0x12e5c7['destroy'](),(_0x4d4638=this['means_u'])==null||_0x4d4638['destroy'](),(_0x4e85d5=this['quats'])==null||_0x4e85d5['destroy'](),(_0x3769be=this['scales'])==null||_0x3769be['destroy'](),(_0x43e73f=this['sh0'])==null||_0x43e73f['destroy'](),(_0x459309=this['sh_centroi'+'ds'])==null||_0x459309['destroy'](),(_0x7eee3d=this['sh_labels'])==null||_0x7eee3d['destroy'](),(_0x428a14=this['packedText'+'ure'])==null||_0x428a14['destroy']();}['createIter'](_0x161738,_0x30369c,_0x338920,_0x1e1ef7,_0x4deeba){return new OA(this,_0x161738,_0x30369c,_0x338920,_0x1e1ef7,_0x4deeba);}['calcAabb'](_0x3c7d88){const {mins:_0x16c9da,maxs:_0x37213d}=this['meta']['means'],_0x1e4884=_0x46722e=>Math['sign'](_0x46722e)*(Math['exp'](Math['abs'](_0x46722e))-(0x1*-0x256d+-0x1bc7+0x1*0x4135));_0x3c7d88['center']['set']((_0x1e4884(_0x16c9da[0x12a*0x8+0x3e9+-0xd39*0x1])+_0x1e4884(_0x37213d[-0x3d*-0x2+-0x1*-0xe7f+-0xef9]))*(0x1*0x1ec5+0x988+-0x39*0xb5+0.5),(_0x1e4884(_0x16c9da[-0x2525+-0x2*0x94d+0x37c0])+_0x1e4884(_0x37213d[-0x1*-0x1e67+-0x176+-0x1cf0]))*(-0xbf+-0x13e6+0x14a5+0.5),(_0x1e4884(_0x16c9da[0x5*-0x4d1+0x1337+0x4e0])+_0x1e4884(_0x37213d[0x3b*-0x59+-0x2*0xb1b+0x1*0x2abb]))*(-0x2*0x5c1+-0x117e+0x1d00+0.5)),_0x3c7d88['halfExtent'+'s']['set']((_0x1e4884(_0x37213d[0x1e*-0x2d+0x79d*0x3+0x5db*-0x3])-_0x1e4884(_0x16c9da[0x21ef+0x1672+-0x12cb*0x3]))*(0x45*0x46+0x579+0x5d*-0x43+0.5),(_0x1e4884(_0x37213d[-0x13c*0xe+-0x2*-0x5d3+0x5a3])-_0x1e4884(_0x16c9da[0x158+-0x2*-0x198+0x3d*-0x13]))*(0x2*-0x24a+0x5c3+-0x12f+0.5),(_0x1e4884(_0x37213d[0x1a*0xf7+-0x153*0x17+0x561])-_0x1e4884(_0x16c9da[0x1f*-0x65+0x1*-0x215+0xe52]))*(-0x1*0x1511+0x1*-0xd5a+0x226b+0.5));}['getCenters'](_0x4d05e6){const {meta:_0x158636,means_l:_0x3f100d,means_u:_0x48b3ae,numSplats:_0x470057}=this,{means:_0x180820}=_0x158636,_0x3b7e4d=new Uint32Array(_0x48b3ae['_levels'][-0xf*0xa2+0x1923+-0xfa5]['buffer']),_0xfbd23d=new Uint32Array(_0x3f100d['_levels'][-0x2*0x84e+0x3c6+0xcd6]['buffer']),_0x153b46=_0x180820['mins'][-0x1*-0x1c55+0x1eac+0x35*-0x11d]/(0x1c18a+-0x5dfa*0x1+0x1*-0x6391),_0x3800e0=_0x180820['mins'][0xe56*-0x1+0x1*-0x167+-0x9b*-0x1a]/(-0xd333+0x858+0x1cada),_0x46ccda=_0x180820['mins'][0xfcf+-0xb9c*-0x2+-0x2705]/(0x14a97+-0xd0a*0x16+-0x2cb*-0x4c),_0xf622d4=_0x180820['maxs'][-0x1a2*0xd+0x259b+-0x1061*0x1]/(0xa5ef+0x7*-0x259f+0x16169),_0x44871e=_0x180820['maxs'][-0x10f7+0x2555+-0x145d]/(0x68c3+0x1a26*0x2+0x62f0),_0x210ebc=_0x180820['maxs'][0x1603+-0x6a3+-0x7*0x232]/(0xa550+-0x16534+0x1bfe3);for(let _0xc7dc7d=0xd*-0x59+-0x2*0xf19+0x22b7;_0xc7dc7d<_0x470057;_0xc7dc7d++){const _0x6df19c=_0xc7dc7d,_0x1a07c2=_0x3b7e4d[_0x6df19c],_0x33023d=_0xfbd23d[_0x6df19c],_0xa5606c=_0x1a07c2<<-0x24ac+-0x81*-0x2f+0xd05&-0x13419+0x4391*0x7+0x1*0x5a22|_0x33023d&0x10*-0x1e5+-0x1*-0x16ad+0x8a2,_0x50eddc=_0x1a07c2&-0x1ce7d+-0x202*-0xc9+-0x1*-0x139eb|_0x33023d>>>0x1*0x1d9+0x12f0+-0x14c1&0x95*0x43+0x27*0xc3+0x1*-0x43b5,_0x282acb=_0x1a07c2>>>-0x7*0x2e6+-0x22f+0x7*0x337&0x1*-0x1866c+0x3*0x2ecf+0xa855*0x3|_0x33023d>>>-0x1854+0x10fe+0x1*0x766&0x6*0x16f+-0x2533+0x2*0xecc,_0x5ec977=_0x153b46*(-0x5343+-0xdc5*-0x12+0x5b68-_0xa5606c)+_0xf622d4*_0xa5606c,_0x1fc121=_0x3800e0*(0x19bf1+0x29*0x25+-0xa1df-_0x50eddc)+_0x44871e*_0x50eddc,_0x1253c1=_0x46ccda*(0xf04c+0x1789e+0x11*-0x153b-_0x282acb)+_0x210ebc*_0x282acb,_0x189d00=_0x5ec977<0x99d+0x18c7*0x1+-0x4*0x899?-_0x5ec977:_0x5ec977,_0x211969=_0x1fc121<-0x2034+0x1*0x26e5+-0x6b1?-_0x1fc121:_0x1fc121,_0x2747ee=_0x1253c1<0x19d2+-0x134d*-0x1+-0x2d1f*0x1?-_0x1253c1:_0x1253c1;_0x4d05e6[_0xc7dc7d*(-0x1f5d+0x2*0x4a9+0x160e)]=(_0x5ec977<0x40*-0x29+0x202d+-0x15ed?-(0x1e0b+0x404*0x8+-0xda*0x49):0x1*0x14ce+0x4a*0x39+-0x2547)*(Math['exp'](_0x189d00)-(-0x98c+-0x1*-0x287+0x706)),_0x4d05e6[_0xc7dc7d*(0x860+-0x236f*0x1+0x16*0x13b)+(0x128d+-0x5*0x309+-0x35f)]=(_0x1fc121<-0x16e4+-0x1*0x1663+-0x43*-0xad?-(-0xfd1*-0x2+-0x1dcc+-0x43*0x7):-0x1*0xb69+-0x1*-0x13ee+-0x884)*(Math['exp'](_0x211969)-(0x13f9*-0x1+0x99+0x79*0x29)),_0x4d05e6[_0xc7dc7d*(-0x7f*0xd+0x251e+-0x1ea8)+(0x5*0x1d2+0x1041+-0x873*0x3)]=(_0x1253c1<-0x1*0x17cb+-0x646+0x1e11?-(0x19b1*0x1+-0x16c7+-0x2e9):-0x1*-0x815+-0x1*0xd4b+-0xf*-0x59)*(Math['exp'](_0x2747ee)-(-0xb23+0x22d1+-0x17ad));}}['calcFocalP'+'oint'](_0x5aefde,_0x5f25c6){_0x5aefde['set'](0x241*-0x1+0x25*0x35+-0x568,0x7fa+0x47*0x5+-0x11*0x8d,0x1863+0x1*0x230b+-0x3b6e);}get['isSogs'](){return!(0xcf1+0x1d48+0x3*-0xe13);}get['shBands'](){var _0x1e40df;return{0xc0:0x1,0x200:0x2,0x3c0:0x3}[(_0x1e40df=this['sh_centroi'+'ds'])==null?void(-0x58+0x1ae2+-0x1a8a):_0x1e40df['width']]??-0x1107+0x8*-0x27a+0x24d7*0x1;}async['decompress'](){const _0x4e3238=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3'],{shBands:_0x4fae18}=this,{means_l:_0xd82986,means_u:_0x1eeac5,quats:_0x48bf52,scales:_0x3445e0,sh0:_0x335633,sh_labels:_0x5aea4c,sh_centroids:_0xf0b4cd}=this;if(_0xd82986['_levels'][0x30e*0xb+-0xd09+-0x1491]=await Ci(_0xd82986),_0x1eeac5['_levels'][-0x2*-0x5c5+0x1dc9+-0x47*0x95]=await Ci(_0x1eeac5),_0x48bf52['_levels'][-0x18a8+0xd9*0x4+0x1544]=await Ci(_0x48bf52),_0x3445e0['_levels'][-0x8de+0x16f5+0xe17*-0x1]=await Ci(_0x3445e0),_0x335633['_levels'][-0x1080+0x8b*-0x19+-0x1*-0x1e13]=await Ci(_0x335633),_0x4fae18>-0x24d5+0x1fc8+-0x3*-0x1af){_0x5aea4c['_levels'][-0x5*0x4d2+-0x1*-0xcba+0xb60]=await Ci(_0x5aea4c),_0xf0b4cd['_levels'][-0x34*0x37+0x1*-0x2383+0x2eaf]=await Ci(_0xf0b4cd);const _0x2ddd74=[];for(let _0x5d68d5=0x15f7*-0x1+-0x2c5*0x5+0x23d0;_0x5d68d5<-0x1*-0x226+0xd3f*-0x1+0xb46;++_0x5d68d5)_0x2ddd74['push']('f_rest_'+_0x5d68d5);_0x4e3238['splice'](_0x4e3238['indexOf']('f_dc_0')+(0x1384+-0x11ce+-0x1b5),-0xe5*0x4+-0x1f8b+0x231f,..._0x2ddd74);}const _0x56fd59={};_0x4e3238['forEach'](_0x2ee27d=>{_0x56fd59[_0x2ee27d]=new Float32Array(this['numSplats']);});const _0x1d02c5=new D(),_0x218eee=new le(),_0xf46ed8=new D(),_0x13901a=new re(),_0x4ca95d=_0x4fae18>-0x10ba*-0x1+0x2465+-0x351f?new Float32Array(-0x18df+0x4f9+-0x9*-0x23b):null,_0x38260d=this['createIter'](_0x1d02c5,_0x218eee,_0xf46ed8,_0x13901a,_0x4ca95d);for(let _0x41ef65=-0x1d1a*0x1+-0x1af4+-0x59b*-0xa;_0x41ef65<this['numSplats'];++_0x41ef65)if(_0x38260d['read'](_0x41ef65),_0x56fd59['x'][_0x41ef65]=_0x1d02c5['x'],_0x56fd59['y'][_0x41ef65]=_0x1d02c5['y'],_0x56fd59['z'][_0x41ef65]=_0x1d02c5['z'],_0x56fd59['rot_1'][_0x41ef65]=_0x218eee['x'],_0x56fd59['rot_2'][_0x41ef65]=_0x218eee['y'],_0x56fd59['rot_3'][_0x41ef65]=_0x218eee['z'],_0x56fd59['rot_0'][_0x41ef65]=_0x218eee['w'],_0x56fd59['scale_0'][_0x41ef65]=_0xf46ed8['x'],_0x56fd59['scale_1'][_0x41ef65]=_0xf46ed8['y'],_0x56fd59['scale_2'][_0x41ef65]=_0xf46ed8['z'],_0x56fd59['f_dc_0'][_0x41ef65]=(_0x13901a['x']-(-0x48*0x48+-0x1ae1+0x2f21+0.5))/yn,_0x56fd59['f_dc_1'][_0x41ef65]=(_0x13901a['y']-(0x1145*0x1+-0x7*0x78+-0xdfd+0.5))/yn,_0x56fd59['f_dc_2'][_0x41ef65]=(_0x13901a['z']-(0x15e1+0x280+-0x1861+0.5))/yn,_0x56fd59['opacity'][_0x41ef65]=_0x13901a['w']<=0x1*-0x1436+0x111+-0x1325*-0x1?-(-0x1bbe+-0x2e*-0x43+0xfdc):_0x13901a['w']>=0x198a+0x15*0x13e+-0x339f?-0x2*0xd1b+-0x2ec*0x1+0x1d4a:-Math['log']((-0x4eb*0x3+0xb12+-0x4*-0xec)/_0x13901a['w']-(0xe0b+-0x1db+-0xc2f*0x1)),_0x4ca95d){for(let _0x502f1a=-0x1*-0x8d7+-0x1cfe+0x1427;_0x502f1a<0x130b+0x2411+0x29*-0x157;++_0x502f1a)_0x56fd59['f_rest_'+_0x502f1a][_0x41ef65]=_0x4ca95d[_0x502f1a];}return new zn([{'name':'vertex','count':this['numSplats'],'properties':_0x4e3238['map'](_0x16f438=>({'name':_0x16f438,'type':'float','byteSize':0x4,'storage':_0x56fd59[_0x16f438]}))}]);}['packGpuMem'+'ory'](){const {means_l:_0x2ef77e,means_u:_0x82a282,quats:_0x21cc35,scales:_0x4eb908,sh_labels:_0x24bb77,numSplats:_0x90b90d}=this,{device:_0x31c062}=_0x2ef77e,{scope:_0x421584}=_0x31c062,_0x16a933=$t['createShad'+'er'](_0x31c062,{'uniqueName':'GsplatSogs'+'ReorderSha'+'der','attributes':{'vertex_position':Pe},'vertexChunk':'fullscreen'+'QuadVS','fragmentGLSL':IA,'fragmentWGSL':LA,'fragmentOutputTypes':['uvec4']}),_0x509d33=new gt({'colorBuffer':this['packedText'+'ure'],'depth':!(-0x234d*-0x1+-0x1132+-0x121a),'mipLevel':0x0});_0x31c062['setCullMod'+'e'](bt),_0x31c062['setBlendSt'+'ate'](pt['NOBLEND']),_0x31c062['setDepthSt'+'ate'](Yt['NODEPTH']),RA(_0x421584,{'means_l':_0x2ef77e,'means_u':_0x82a282,'quats':_0x21cc35,'scales':_0x4eb908,'sh_labels':_0x24bb77??_0x2ef77e,'numSplats':_0x90b90d}),Tr(_0x31c062,_0x509d33,_0x16a933),_0x509d33['destroy'](),_0x16a933['destroy']();}async['prepareGpu'+'Data'](){const {device:_0x6d8c50,height:_0x140102,width:_0x1588ef}=this['means_l'];this['means_l']['_levels'][0x27*-0x45+0xc1*0x7+0x14*0x43]=await Ci(this['means_l']),this['means_u']['_levels'][0x5*0xad+-0x1033+0xcd2]=await Ci(this['means_u']),this['packedText'+'ure']=new _e(_0x6d8c50,{'name':'sogsPacked'+'Texture','width':_0x1588ef,'height':_0x140102,'format':Ue,'mipmaps':!(-0x246a+0x1bae+0x1*0x8bd)}),_0x6d8c50['on']('devicerest'+'ored',()=>{this['packGpuMem'+'ory']();}),this['packGpuMem'+'ory']();}['reorderDat'+'a'](){return this['prepareGpu'+'Data']();}}async function NA(){let _0x1ed07f=null,_0x3ba194=null,_0x45eaa5=null,_0x10ba91=null,_0x381808=null,_0x598a80=null,_0x48aebf=null,_0x1d0730=null,_0x4cddc0=null,_0x288f03=null,_0x629ab1=null,_0x11c9af=null,_0x46dbfb=null,_0x19e4fe=null,_0x54d7b9=null,_0x364d29=null,_0x166ace=null,_0xf81f02=null,_0xfc6591=null,_0x56f595=null,_0x4d8927=null,_0x55a0f8=null,_0x3499ea=null,_0x1c193b=null,_0x2b2d3e=Float32Array['BYTES_PER_'+'ELEMENT'],_0x9d5ebb=Uint32Array['BYTES_PER_'+'ELEMENT'],_0x280118=-0x21b*0xf+-0x1*-0x1d4f+0x246,_0x4e517b=!(0x51b+-0x1cba+-0x179f*-0x1),_0x472ba5,_0x4a258b,_0x27a4bd={'x':0x0,'y':0x0,'z':0x0},_0x1fcc78={'x':0x0,'y':0x0,'z':0x0},_0x13c8b6=!(0x221b+0x116*-0x11+0x10b*-0xf),_0x2249f5=!(-0xe7e+0x28*0x5a+0x6e),_0x516a8f=!(-0x1*-0x132+0x1f6*0x11+0x1*-0x2287),_0x250763=!(0x57*-0x47+-0xacc+0x22ee),_0x138252=0x1450+0x1d7+-0x1627,_0x14ce86=-0x843+0x214+0x1*0x62f,_0x213435=!(0x70*0xb+0xc81+-0x1*0x1150),_0x1f636a=null,_0x4a7f86=!(-0x8f2+-0x128f*-0x2+-0x1c2b),_0x119081=0x2*0x1193+0x1fd3+-0x42f9,_0x47def3=0x1195*-0x1+0xe15+0x380,_0x848752={'x':0x0,'y':0x0,'z':0x0},_0x8e1984={'x':0x0,'y':0x0,'z':0x0},_0x24503b,_0x904cd8;self['onmessage']=async _0x1d8400=>{const {data:_0x2db2c0}=_0x1d8400;switch(_0x2db2c0['type']){case'initWorker':await _0x5e4e64(_0x2db2c0['sortWasmUr'+'l']),self['postMessag'+'e']({'type':'initialize'+'d'});break;case'initData':if(_0x280118=_0x2db2c0['centers']['length']/(-0x4d*0x5a+0x17f5*-0x1+0x330a),_0x280118<=-0x8*0x1bf+0x9f3+-0x405*-0x1||!_0x3ba194)return;_0x3c357b(),_0x4e517b=_0x2db2c0['is4d'],_0x24503b=_0x2db2c0['id'];const _0x2950ac=_0x1a90f0(_0x280118);if(_0x1573e2(_0x2950ac),_0x45eaa5[-0x1434+-0x5e5+0x1a19]=_0x848752['x'],_0x45eaa5[0x25ae+0x5c6*0x3+-0x36ff]=_0x848752['y'],_0x45eaa5[-0x1*0x1b39+0xe4b*0x1+-0x48*-0x2e]=_0x848752['z'],_0x10ba91[-0x3*-0x39a+0xdb*0x1+-0xba9]=_0x8e1984['x'],_0x10ba91[-0x19*0x29+-0x37*-0x1+0x3cb]=_0x8e1984['y'],_0x10ba91[-0x122d+0x1a8+0x1087*0x1]=_0x8e1984['z'],_0x598a80&&_0x2db2c0['centers']&&_0x598a80['length']===_0x2db2c0['centers']['length']){const _0x107185=new Float32Array(_0x2db2c0['centers']);_0x598a80['set'](_0x107185);}if(_0x1d0730&&_0x2db2c0['timeIndex']&&_0x1d0730['length']===_0x2db2c0['timeIndex']['length']){const _0x3d84aa=new Uint32Array(_0x2db2c0['timeIndex']);_0x1d0730['set'](_0x3d84aa);}if(_0x629ab1&&_0x2db2c0['motion']&&_0x629ab1['length']===_0x2db2c0['motion']['length']){const _0x1f9a86=new Float32Array(_0x2db2c0['motion']);_0x629ab1['set'](_0x1f9a86);}if(_0x4e517b&&_0x4cddc0&&_0x288f03&&_0x2db2c0['muT']&&_0x2db2c0['tScale']&&_0x4cddc0['length']===_0x2db2c0['muT']['length']&&_0x288f03['length']===_0x2db2c0['tScale']['length']&&(_0x4cddc0['set'](_0x2db2c0['muT']),_0x288f03['set'](_0x2db2c0['tScale'])),_0x48aebf){for(let _0x4d2458=0xebf+-0xec2*0x2+0xec5;_0x4d2458<_0x48aebf['length'];++_0x4d2458)_0x48aebf[_0x4d2458]=_0x4d2458;}_0x381808&&_0x2db2c0['timeOption']&&_0x381808['set'](_0x2db2c0['timeOption']),_0x3f063(),_0x4a7f86=!(0x498+-0x961*0x2+0xe2a),_0x516a8f=!(0x569*-0x5+-0x3*0xa4e+0x47*0xd1),_0x4ecae1();break;case'setTime':_0x472ba5=_0x2db2c0['time'],_0x4ecae1();break;case'setUseTemp'+'oralSort':_0x13c8b6=_0x2db2c0['useTempora'+'lSort'];break;case'setUseDyna'+'micSort':_0x2249f5=_0x2db2c0['useDynamic'+'Sort'];break;case'sort':if(!_0x45eaa5)return;_0x45eaa5[0x2d2*0x1+-0x1*0x2335+0x2063]=_0x2db2c0['cameraPosi'+'tion']['x'],_0x45eaa5[0xc0c+0x17c9+-0x23d4]=_0x2db2c0['cameraPosi'+'tion']['y'],_0x45eaa5[-0x8bf*-0x2+0x1a7*-0xc+0x258]=_0x2db2c0['cameraPosi'+'tion']['z'],_0x10ba91[0x1d18+0x19*0x4b+0x1*-0x246b]=_0x2db2c0['cameraDire'+'ction']['x'],_0x10ba91[-0x1a*-0x101+-0x1b83+-0x1*-0x16a]=_0x2db2c0['cameraDire'+'ction']['y'],_0x10ba91[-0x4c*0x80+-0x1*-0x108c+0x1576]=_0x2db2c0['cameraDire'+'ction']['z'],_0x848752['x']=_0x2db2c0['cameraPosi'+'tion']['x'],_0x848752['y']=_0x2db2c0['cameraPosi'+'tion']['y'],_0x848752['z']=_0x2db2c0['cameraPosi'+'tion']['z'],_0x8e1984['x']=_0x2db2c0['cameraDire'+'ction']['x'],_0x8e1984['y']=_0x2db2c0['cameraDire'+'ction']['y'],_0x8e1984['z']=_0x2db2c0['cameraDire'+'ction']['z'],_0x4ecae1();break;}};const _0x3c357b=()=>{_0x14ce86=Math['max'](-0x238+0xc6e+-0x2a*0x3e,Math['min'](0x10ec*-0x2+0x1*0x261f+-0x433,Math['round'](Math['log2'](_0x280118/(-0x1*0x2335+-0x3*-0xc1a+-0x1*0x115))))),_0x138252=(-0x7b2+-0x98d+0x1141)**_0x14ce86+(0x1e96+-0x4ae+0x19e7*-0x1);},_0x1573e2=_0x3b8b06=>{_0x11c9af=0x5+-0x1873+-0x1*-0x186e,_0x46dbfb=_0x11c9af+_0x280118*_0x2b2d3e*(-0x14aa+-0x1472*0x1+-0x291f*-0x1),_0xf81f02=_0x46dbfb+(0x1d89+0x82b*-0x2+-0xccf)*_0x2b2d3e*(-0x2*-0xbc3+-0x1*-0xa5e+0x1*-0x21e2),_0xfc6591=_0xf81f02+_0x280118*_0x9d5ebb,_0x56f595=_0xfc6591+(0xc0f+0x43*-0x56+-0xd*-0xce)*_0x2b2d3e,_0x4d8927=_0x56f595+(-0x5f9+-0x1fbc+0x25b8)*_0x2b2d3e,_0x55a0f8=_0x4d8927+(-0x679*0x1+-0xe6b*-0x1+-0x7ef)*_0x2b2d3e,_0x3499ea=_0x55a0f8+(-0x229b+-0x774*-0x4+-0x4ce*-0x1)*_0x2b2d3e,_0x1c193b=_0x3499ea+_0x280118*_0x9d5ebb,_0x598a80=new Float32Array(_0x3b8b06,_0x11c9af,_0x280118*(-0x1a2a+-0x1*-0x1bf+0x35*0x76)),_0x381808=new Float32Array(_0x3b8b06,_0x46dbfb,0x1*-0x23ad+-0x7f*0x4+0x2671*0x1),_0x48aebf=new Uint32Array(_0x3b8b06,_0xf81f02,_0x280118),_0x45eaa5=new Float32Array(_0x3b8b06,_0xfc6591,-0xc72+-0x1*0x1cb9+0x292e*0x1),_0x10ba91=new Float32Array(_0x3b8b06,_0x56f595,-0x149a+0x5*0x695+-0x313*0x4),_0x4e517b&&(_0x364d29=_0x1c193b+_0x138252*_0x9d5ebb,_0x166ace=_0x364d29+_0x280118*_0x2b2d3e,_0x54d7b9=_0x166ace+_0x280118*_0x2b2d3e,_0x19e4fe=_0x54d7b9+_0x280118*(0x1*-0xba9+0x26*-0xef+0x4b7*0xa)*_0x2b2d3e,_0x4cddc0=new Float32Array(_0x3b8b06,_0x364d29,_0x280118),_0x288f03=new Float32Array(_0x3b8b06,_0x166ace,_0x280118),_0x629ab1=new Float32Array(_0x3b8b06,_0x54d7b9,_0x280118*(0x5fe+0x495*0x7+-0x260e)),_0x1d0730=new Uint32Array(_0x3b8b06,_0x19e4fe,_0x280118));},_0x5e4e64=async _0x3f51de=>{_0x119081=-0x1694+-0x26dc+0x15*0x2ed;const _0x269138={'env':{'memory':new WebAssembly['Memory']({'initial':_0x119081}),'pthread_self':function(){return-0x24e8+-0x108e+0x11d2*0x3;},'emscripten_builtin_memalign':function(){return-0x1ccd+-0x1fad+-0x1*-0x3c7a;},'loggerVec3':(_0x1fb2ed,_0x1b4399,_0x4205fc,_0x34df31)=>{console['log']('C++\x20logger'+'Vec3\x20['+_0x1fb2ed+']\x200:'+_0x1b4399+'\x201:'+_0x4205fc+'\x202:'+_0x34df31);},'loggerFloat':(_0x33e8e4,_0x495c86)=>{console['log']('C++\x20LogFlo'+'at\x20['+_0x33e8e4+']\x20a:'+_0x495c86);},'loggerValue':(_0x3ecd87,_0x4eb55f,_0x4c40f1,_0xdd2145,_0xbf91fc)=>{console['log']('C++\x20logger'+'Value\x20['+_0x3ecd87+']\x20minDist:'+_0x4eb55f+'\x20maxDist:'+_0x4c40f1+'\x20range:'+_0xdd2145+'\x20divider:'+_0xbf91fc);},'loggerCamera':(_0x375a1f,_0x30b2de,_0x587bf3,_0x24a427,_0x33d803,_0x168d93,_0x108bd4)=>{console['log']('C++\x20logger'+'Camera\x20['+_0x375a1f+']\x20x:'+_0x30b2de+'\x20y:'+_0x587bf3+'\x20z:'+_0x24a427+'\x20dx:'+_0x33d803+'\x20dy:'+_0x168d93+'\x20dz:'+_0x108bd4);},'loggerBound':(_0x2acd7b,_0x51a587,_0x1078d2,_0x12fa1f,_0x2127f8,_0x117e56)=>{console['log']('C++\x20logger'+'Bound\x20minX'+':'+_0x2acd7b+'\x20minY:'+_0x51a587+'\x20minZ:'+_0x1078d2+'\x20maxX:'+_0x12fa1f+'\x20maxY:'+_0x2127f8+'\x20maxZ:'+_0x117e56);},'loggerDebug':_0x3087e7=>{console['log']('C++\x20logger'+'Debug\x20['+_0x3087e7+']');}}};try{const _0x2051e4=await(await fetch(_0x3f51de))['arrayBuffe'+'r']();return _0x1ed07f=(await WebAssembly['instantiat'+'e'](_0x2051e4,_0x269138))['instance'],_0x3ba194=_0x269138['env']['memory'],_0x1ed07f;}catch(_0x1f52a0){throw console['error']('加载WASM模块失败'+':',_0x1f52a0),_0x1f52a0;}},_0x5c6ca7=_0x1077b5=>{if(_0x1077b5<=0x1*0x240b+0xef5+0xcc0*-0x4)return-0x1f40+0xe36*-0x1+0x2d77*0x1;let _0x14df3f=_0x1077b5*_0x2b2d3e*(0x1*-0x252a+0x16bc+0xe71);_0x14df3f+=_0x1077b5*_0x9d5ebb,_0x14df3f+=(0x16f*-0x4+-0x2485*-0x1+-0x1ec6)*_0x2b2d3e,_0x14df3f+=(0xfb7*-0x2+-0xf*0x154+0x9*0x5b5)*_0x2b2d3e,_0x14df3f+=(0xc*-0x241+-0x19da+0x34e9)*_0x2b2d3e,_0x14df3f+=(0x591+0x2529+-0x2d*0xf3)*_0x2b2d3e,_0x14df3f+=_0x1077b5*_0x2b2d3e,_0x14df3f+=_0x138252*_0x9d5ebb,_0x14df3f+=(-0x1*0x478+-0x1*-0x14e9+-0x100d)*_0x2b2d3e*(0x266*0x10+0x2286+-0x48e4),_0x14df3f+=_0x1077b5*_0x9d5ebb,_0x4e517b&&(_0x14df3f+=_0x1077b5*_0x2b2d3e,_0x14df3f+=_0x1077b5*_0x2b2d3e,_0x14df3f+=_0x1077b5*_0x2b2d3e*(-0x1b53+0x26e6+0x10*-0xb9));const _0x144d5e=(0x1dd+-0x64d*0x6+0x2431)*(-0xe*0x268+0x1*-0x1d6e+0x431e);return Math['ceil'](_0x14df3f/_0x144d5e);},_0x1a90f0=_0x1df446=>{const _0x46773d=_0x5c6ca7(_0x1df446);return _0x46773d>_0x119081?(_0x3ba194['grow'](_0x46773d-_0x119081),_0x119081=_0x46773d):_0x3ba194['grow'](-0x1872+0x3a*-0x46+0x3aa*0xb),_0x3ba194['buffer'];},_0x3f063=()=>{if(!_0x1ed07f)return;const {calcAABB:_0x8fedf0}=_0x1ed07f['exports'];_0x8fedf0(_0x11c9af,_0x4d8927,_0x55a0f8,_0x280118);},_0x4ecae1=()=>{_0x1f636a&&clearTimeout(_0x1f636a),_0x1f636a=setTimeout(()=>{_0x1f636a=null,_0x4563ee();},-0xb*0x134+-0x1*0x11fb+0x1f37*0x1);},_0x4563ee=()=>{if(!_0x1ed07f||!_0x4a7f86||_0x48aebf['length']!==_0x280118||_0xf81f02===null||_0x11c9af===null||_0xfc6591===null||_0x56f595===null||_0x4d8927===null||_0x55a0f8===null)return;const _0x1b258f=_0x45eaa5[-0x109b*0x1+-0x6f6+0x1791],_0x42e8c7=_0x45eaa5[-0x8f4+-0x673*0x5+0x1*0x2934],_0x4f36fc=_0x45eaa5[0x1d2f*-0x1+-0x93*0x29+0x34bc],_0x5f1ef6=_0x10ba91[-0xd1d+-0x6*0x3f9+-0x3*-0xc51],_0x3d39dd=_0x10ba91[0x1728+0x1e5*-0x9+-0x61a],_0x1dce00=_0x10ba91[0x567+-0x3*-0xc04+-0x2971],_0x1c1342=-0x1696+-0x27*0x27+0x1c87+0.001;if(!_0x516a8f&&Math['abs'](_0x1b258f-_0x27a4bd['x'])<_0x1c1342&&Math['abs'](_0x42e8c7-_0x27a4bd['y'])<_0x1c1342&&Math['abs'](_0x4f36fc-_0x27a4bd['z'])<_0x1c1342&&Math['abs'](_0x5f1ef6-_0x1fcc78['x'])<_0x1c1342&&Math['abs'](_0x3d39dd-_0x1fcc78['y'])<_0x1c1342&&Math['abs'](_0x1dce00-_0x1fcc78['z'])<_0x1c1342&&Math['abs'](_0x472ba5-_0x4a258b)<-0x11b5+-0x2189+-0x333e*-0x1+0.01)return;if(_0x250763){_0x213435=!(0x253c+-0xeeb+0x1651*-0x1);return;}_0x250763=!(0x1*0x1ccf+-0xacf*0x1+-0x1200),_0x516a8f=!(-0x1274+-0x1fde+-0xd*-0x3df),_0x4a258b=_0x472ba5,_0x27a4bd['x']=_0x1b258f,_0x27a4bd['y']=_0x42e8c7,_0x27a4bd['z']=_0x4f36fc,_0x1fcc78['x']=_0x5f1ef6,_0x1fcc78['y']=_0x3d39dd,_0x1fcc78['z']=_0x1dce00,_0x213435=!(-0x68f+-0x1f72+0x23*0x116);const {sortIndexes:_0x1944b7}=_0x1ed07f['exports'];try{const _0x1aab0a=_0x1944b7(_0xf81f02,_0x11c9af,_0x54d7b9,_0x364d29,_0x166ace,_0xfc6591,_0x56f595,_0x4d8927,_0x55a0f8,_0x3499ea,_0x1c193b,_0x472ba5||-0x41+-0x3e*-0x6f+-0x1aa1,_0x13c8b6,_0x2249f5,_0x4e517b,_0x280118,_0x138252,_0x14ce86,_0x46dbfb,_0x19e4fe),_0x37ce5e=new Uint32Array(_0x48aebf);if(_0x1aab0a===-0x7*-0x29f+-0x1*0xf04+-0x355){debugger;console['log']('____\x20ENGIN'+'E','Indexes\x20co'+'unt\x20===\x20',_0x1aab0a);}const _0x5b8a0e=_0x280118!==_0x47def3||_0x904cd8!==_0x24503b;self['postMessag'+'e']({'type':'sortComple'+'ted','count':_0x1aab0a,'order':_0x37ce5e,'isNewOrder':_0x5b8a0e},[_0x37ce5e['buffer']]),_0x47def3=_0x280118,_0x904cd8=_0x24503b;}catch(_0x388d15){console['error']('排序操作失败:',_0x388d15),self['postMessag'+'e']({'type':'error','error':_0x388d15['message']});}_0x250763=!(0xf4f*-0x1+-0x18b3+0x2803*0x1),_0x213435&&_0x4ecae1();};}class kA extends me{constructor(){super(),h(this,'worker',null),h(this,'numSplats',0x5*-0x575+0x5*0x167+0x3*0x6c2),h(this,'is4d',!(0x781*0x1+0x19d9+-0x2*0x10ad)),h(this,'sortStartT'+'ime',-0x45*-0x67+0x11d4+-0x2d97),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'data',{}),(this['orderTextu'+'re']=null,this['backOrderT'+'exture']=null,this['worker']=null,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+NA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x472d03=>{var _0x3ad8a9;if(!this['worker'])return;const {data:_0x44a880}=_0x472d03;switch(_0x44a880['type']){case'initialize'+'d':this['fire']('initialize'+'d');break;case'sortComple'+'ted':_0x44a880['order']&&(_0x44a880['isNewOrder']&&(this['orderTextu'+'re']=this['backOrderT'+'exture']),(_0x3ad8a9=this['orderTextu'+'re'])==null||_0x3ad8a9['write'](-0x1e4f+0x186+-0x1cc9*-0x1,-0xe66+-0x29*0x7d+0x226b,this['orderTextu'+'re']['width'],this['orderTextu'+'re']['height']-(0x19f0+-0x14b2+0x1*-0x53d),_0x44a880['order']));let _0x3e5261=-0x2195*0x1+-0xc85+0x2e1a;this['sortStartT'+'ime']!==0xe97*-0x1+0xca*0x2b+-0x1357*0x1&&(_0x3e5261=performance['now']()-this['sortStartT'+'ime']),this['fire']('updated',_0x472d03['data']['count'],_0x3e5261,_0x44a880['isNewOrder']),this['sortStartT'+'ime']=-0x14cf+-0xdf6*0x2+0x30bb;break;case'error':console['error']('Worker错误:',_0x44a880['error']),this['fire']('error',_0x44a880['error']);break;}};const _0x45cdf0='https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/sorter-t'+'railing.wa'+'sm?t='+Date['now']();this['worker']['postMessag'+'e']({'type':'initWorker','sortWasmUrl':_0x45cdf0});}['initData'](_0x9fc448,_0x3a6d29,_0x48a7e0,_0x4f8306,_0x530c08,_0x4955d7,_0x45a59a,_0x3ab555){var _0x434a08;this['is4d']=_0x3ab555,this['numSplats']=_0x3a6d29['length']/(-0x6d*0xb+-0x12e8*0x2+-0x1541*-0x2),(!_0x45a59a||_0x45a59a['length']===0x3*0x24f+-0x107d+-0x90*-0x11)&&(_0x45a59a=[-0x1*-0x2077+-0x1735*0x1+-0x942,-0x1d*0x3b+0x117d+0x7b*-0x16]),this['orderTextu'+'re']||(this['orderTextu'+'re']=_0x9fc448),this['backOrderT'+'exture']=_0x9fc448;const _0x547786=new Date()['getTime']();(_0x434a08=this['worker'])==null||_0x434a08['postMessag'+'e']({'type':'initData','centers':_0x3a6d29,'muT':_0x48a7e0,'tScale':_0x4f8306,'motion':_0x530c08,'timeIndex':_0x4955d7,'timeOption':_0x45a59a,'is4d':_0x3ab555,'id':_0x547786});}['setCamera'](_0x535341,_0x104977){this['worker']&&(!_0x535341||!_0x104977||(this['data']['cameraPosi'+'tion']={'x':_0x535341['x'],'y':_0x535341['y'],'z':_0x535341['z']},this['data']['cameraDire'+'ction']={'x':_0x104977['x'],'y':_0x104977['y'],'z':_0x104977['z']},this['sortStartT'+'ime']===0x4*0x978+-0x1d02*0x1+0x46f*-0x2&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'sort','cameraPosition':{'x':_0x535341['x'],'y':_0x535341['y'],'z':_0x535341['z']},'cameraDirection':{'x':_0x104977['x'],'y':_0x104977['y'],'z':_0x104977['z']}})));}['setCurrent'+'Time'](_0x50db58){this['worker']&&(this['data']['time']=_0x50db58,this['sortStartT'+'ime']===-0x543*-0x3+0x13a4+-0x236d&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'setTime','time':_0x50db58}));}['setUseTemp'+'oralSort'](_0x15b192){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseTemp'+'oralSort','useTemporalSort':_0x15b192});}['setUseDyna'+'micSort'](_0x4a9434){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseDyna'+'micSort','useDynamicSort':_0x4a9434});}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}const UA=new te(),Na=new D(),ka=new D(),rc=[0x43f*0x7+-0x869+-0x155*0x10,-0x5e*-0x50+-0x25*-0xad+0x1*-0x3661];class BA{constructor(_0x41b7f9,_0xcce29c={}){h(this,'resource'),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'_material'),h(this,'meshInstan'+'ce'),h(this,'options',{}),h(this,'sorter',null),h(this,'time',0x16*0x13a+0x2631+-0x412d),h(this,'lastCamera'+'Position',new D()),h(this,'lastCamera'+'Direction',new D()),h(this,'resolveSH',null),h(this,'cameras',[]),h(this,'forceUpDat'+'eSorterTim'+'e',(_0x1478c2,_0x587b18=void(0x1087*0x1+-0x86*-0x17+-0x1c91))=>{(_0x587b18||_0x587b18===-0x67*0x39+0xa67+0xc88)&&(this['material']['setParamet'+'er']('uTime',_0x587b18),this['updateTime'](_0x587b18)),this['sort'](_0x1478c2);}),(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Instance',_0x41b7f9['numSplats']),this['resource']=_0x41b7f9,this['orderTextu'+'re']=this['resource']['createText'+'ure']('splatOrder',Yi,this['resource']['evalTextur'+'eSize'](this['resource']['numSplats'])),this['backOrderT'+'exture']=null,_0xcce29c['material']?(this['_material']=_0xcce29c['material'],this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])):(this['_material']=new Bn({'uniqueName':'SplatMater'+'ial','vertexGLSL':'#include\x20\x22'+'gsplatVS\x22','fragmentGLSL':'#include\x20\x22'+'gsplatPS\x22','vertexWGSL':'#include\x20\x22'+'gsplatVS\x22','fragmentWGSL':'#include\x20\x22'+'gsplatPS\x22','attributes':{'vertex_position':Pe,'vertex_id_attrib':Xc}}),this['configureM'+'aterial'](this['_material']),this['_material']['update']()),this['meshInstan'+'ce']=new He(this['resource']['mesh'],this['_material']),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(0xc9e+-0x1*0x178d+0xaef)),this['meshInstan'+'ce']['gsplatInst'+'ance']=this,this['meshInstan'+'ce']['instancing'+'Count']=0x10d*-0x3+0x1*0xf6f+-0xc48,this['sorter']=new kA(),this['sorter']['on']('initialize'+'d',()=>{var _0x4b84fc,_0xcb1b54,_0x335ee6,_0x2f2bca,_0x206500,_0x31b236,_0x5d8c90,_0x4b98c5,_0x112460,_0x27288a,_0x190836;const _0x539bba=new Float32Array(this['resource']['centers']['buffer']['slice']()),_0x37899e=new Float32Array(((_0xcb1b54=(_0x4b84fc=this['resource']['muT'])==null?void(0x2598*-0x1+-0x118b*-0x1+-0x3*-0x6af):_0x4b84fc['buffer'])==null?void(0x85d*0x3+0xb*0x9+0x197a*-0x1):_0xcb1b54['slice']())??new Float32Array()),_0x32e980=new Float32Array(((_0x2f2bca=(_0x335ee6=this['resource']['tScale'])==null?void(-0x1e4c+0x112b+-0x1*-0xd21):_0x335ee6['buffer'])==null?void(-0x76f+-0x13*0x7a+0x25b*0x7):_0x2f2bca['slice']())??new Float32Array()),_0x2ea6f6=new Float32Array(((_0x31b236=(_0x206500=this['resource']['motion'])==null?void(0x413*0x5+-0x12df+-0x180):_0x206500['buffer'])==null?void(0x202d+0x1c5e+0x1*-0x3c8b):_0x31b236['slice']())??new Float32Array()),_0x20f9ff=new Float32Array(((_0x4b98c5=(_0x5d8c90=this['resource']['timeIndex'])==null?void(-0x268a+-0x61*0xc+-0x2*-0x158b):_0x5d8c90['buffer'])==null?void(0x1*-0x1625+0x16aa+-0x7*0x13):_0x4b98c5['slice']())??new Float32Array(0x7*-0x44b+0x70*0x30+0x7*0x14b)),_0x1f2c78=new Float32Array(((_0x27288a=(_0x112460=this['resource']['timeOption'])==null?void(-0x927+-0x2*-0x607+0x1*-0x2e7):_0x112460['buffer'])==null?void(-0xa3e+-0x1f*-0x79+-0x1*0x469):_0x27288a['slice']())??new Float32Array());(_0x190836=this['sorter'])==null||_0x190836['initData'](this['orderTextu'+'re'],_0x539bba,_0x37899e,_0x32e980,_0x2ea6f6,_0x20f9ff,_0x1f2c78,this['resource']['is4D']);}),this['sorter']['on']('updated',async(_0x30e01b,_0x26682b,_0x3346a5)=>{var _0x5db501;this['meshInstan'+'ce']['instancing'+'Count']=Math['ceil'](_0x30e01b/this['resource']['instanceSi'+'ze']),_0x3346a5&&this['backOrderT'+'exture']&&(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatInst'+'ance\x20updat'+'ed'),[this['orderTextu'+'re'],this['backOrderT'+'exture']]=[this['backOrderT'+'exture'],this['orderTextu'+'re']],await this['resource']['updateText'+'ure'](),this['resource']['configureM'+'aterial'](this['_material']),this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])),_0x3346a5&&((_0x5db501=this['resource'])==null||_0x5db501['fireAssets'+'ManagerTim'+'eIndex']()),this['material']['setParamet'+'er']('numSplats',_0x30e01b);}),this['setHighQua'+'litySH'](_0xcce29c['highQualit'+'ySH']??!(0x3*0x3dd+0x1070+0x1a6*-0x11)));}async['updateInst'+'anceData'](_0x21e9f2){var _0x57acf1,_0x3d998f;console['log']('____\x20ENGIN'+'E\x20IVAN','updateInst'+'anceData\x20A'+'SSETS\x20GSpl'+'atInstance',_0x21e9f2['numSplats']),this['resource']=_0x21e9f2;const _0x5daa92=this['resource']['evalTextur'+'eSize'](_0x21e9f2['centers']['length']/(-0x1*-0x159+0x99e+-0xaf4));return(_0x57acf1=this['backOrderT'+'exture'])==null||_0x57acf1['destroy'](),this['backOrderT'+'exture']=this['resource']['createText'+'ure']('splatOrder'+'2',Yi,_0x5daa92),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(-0x7c3+0x748+0x1*0x7b)),(_0x3d998f=this['sorter'])==null||_0x3d998f['initData'](this['backOrderT'+'exture'],_0x21e9f2['centers'],_0x21e9f2['muT'],_0x21e9f2['tScale'],_0x21e9f2['motion'],_0x21e9f2['timeIndex'],_0x21e9f2['timeOption'],_0x21e9f2['is4D']),new Promise(_0x10da51=>{var _0x7ed1b3;const _0x7d1d74=(_0x438d96,_0xe5f8f4,_0x17c380)=>{var _0x428f0;_0x17c380&&((_0x428f0=this['sorter'])==null||_0x428f0['off']('updated',_0x7d1d74),_0x10da51(!(-0x1c86+0x112*0x22+-0x7de)));};(_0x7ed1b3=this['sorter'])==null||_0x7ed1b3['on']('updated',_0x7d1d74);});}['destroy'](){var _0x2e7ec7,_0x177813,_0x53eb10,_0x2e15fc,_0x348472,_0x2c20ef;(_0x2e7ec7=this['resolveSH'])==null||_0x2e7ec7['destroy'](),(_0x177813=this['material'])==null||_0x177813['destroy'](),(_0x53eb10=this['meshInstan'+'ce'])==null||_0x53eb10['destroy'](),(_0x2e15fc=this['sorter'])==null||_0x2e15fc['destroy'](),(_0x348472=this['orderTextu'+'re'])==null||_0x348472['destroy'](),(_0x2c20ef=this['backOrderT'+'exture'])==null||_0x2c20ef['destroy']();}set['material'](_0x21b480){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.set\x20'+'material'),this['_material']!==_0x21b480&&(this['_material']=_0x21b480,this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x21b480));}get['material'](){return this['_material'];}['configureM'+'aterial'](_0x26e337,_0x2d3194={}){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.conf'+'igureMater'+'ial'),this['resource']['configureM'+'aterial'](_0x26e337),_0x26e337['setParamet'+'er']('numSplats',0x23*0x2e+0x1d0+-0x40d*0x2),_0x26e337['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),_0x26e337['setParamet'+'er']('alphaClip',-0x215a+0x874+0x18e6+0.3),_0x26e337['setDefine']('DITHER_'+(_0x2d3194['dither']?'BLUENOISE':'NONE'),''),_0x26e337['cull']=bt,_0x26e337['blendType']=_0x2d3194['dither']?Cs:Zs,_0x26e337['depthWrite']=!!_0x2d3194['dither'];}['updateView'+'port'](_0x3a7b83){var _0x1f0ccd;const _0x446dd4=_0x3a7b83==null?void(-0x19*-0x164+-0xca9+0x1*-0x161b):_0x3a7b83['camera'],_0x4a8d46=_0x446dd4==null?void(0xb5*-0xe+-0x4*-0x57e+-0xc12):_0x446dd4['renderTarg'+'et'],{width:_0x5c32a5,height:_0x4ba696}=_0x4a8d46??this['resource']['device'];rc[-0x11ec+-0x547+-0x1733*-0x1]=_0x5c32a5,rc[0x129a+0x1b82+-0x2e1b]=_0x4ba696;const _0x77355a=(_0x1f0ccd=_0x446dd4==null?void(0xef*0x25+-0xf4c+0xd*-0x17b):_0x446dd4['camera'])==null?void(0x2*0x1272+-0xdd*-0x2b+-0x4a03):_0x1f0ccd['xr'];_0x77355a!=null&&_0x77355a['active']&&_0x77355a['views']['list']['length']===-0x13e6+-0x23*0xcb+-0x31*-0xf9&&(rc[-0x16bc+-0x4*0x5c2+0x2dc4]*=0x172d+-0x3ef+-0x133e+0.5),this['material']['setParamet'+'er']('viewport',rc);}['sort'](_0x16e1b5){if(this['sorter']){const _0x2a5cfd=_0x16e1b5['getWorldTr'+'ansform']();_0x2a5cfd['getTransla'+'tion'](Na),_0x2a5cfd['getZ'](ka);const _0x3c1296=this['meshInstan'+'ce']['node']['getWorldTr'+'ansform'](),_0x5ad4c4=UA['invert'](_0x3c1296);_0x5ad4c4['transformP'+'oint'](Na,Na),_0x5ad4c4['transformV'+'ector'](ka,ka),(!Na['equalsAppr'+'ox'](this['lastCamera'+'Position'])||!ka['equalsAppr'+'ox'](this['lastCamera'+'Direction']))&&(this['lastCamera'+'Position']['copy'](Na),this['lastCamera'+'Direction']['copy'](ka),this['sorter']['setCamera'](Na,ka)),this['sorter']['setCurrent'+'Time'](this['time']);}this['updateView'+'port'](_0x16e1b5);}['update'](){var _0x16adb7;if(this['cameras']['length']>0x12e3*-0x2+-0x3*0x19c+-0x23e*-0x13){const _0x5ad0ba=this['cameras'][-0x3d1+-0x3d*0x2+0x44b];this['sort'](_0x5ad0ba['_node']),(_0x16adb7=this['resolveSH'])==null||_0x16adb7['render'](_0x5ad0ba['_node'],this['meshInstan'+'ce']['node']['getWorldTr'+'ansform']()),this['cameras']['length']=-0x1825+0x1*0x1c31+-0x40c*0x1;}}['setHighQua'+'litySH'](_0x1dc197){const {resource:_0x15c62e}=this,{gsplatData:_0xce9279}=_0x15c62e;_0xce9279 instanceof FA&&_0xce9279['shBands']>-0x24b6+0x11e0+0x12d6*0x1&&_0x1dc197===!!this['resolveSH']&&(this['resolveSH']?(this['resolveSH']['destroy'](),this['resolveSH']=null):this['resolveSH']=new DA(_0x15c62e['device'],this));}['updateTime'](_0x35bf3e){this['time']=_0x35bf3e;}}class Zy{constructor(_0x262f49,_0x3fad70){h(this,'sceneInfo',{}),h(this,'isDestroye'+'d',!(0x7eb*-0x2+0x1734+0x29*-0x2e)),h(this,'device'),h(this,'gsplatData'),h(this,'centers'),h(this,'aabb'),h(this,'mesh'),h(this,'instanceIn'+'dices'),h(this,'gsplatInst'+'ance'),(this['device']=_0x262f49,this['gsplatData']=_0x3fad70,this['isDestroye'+'d']=!(-0x926+0x7df+0x148*0x1));const _0x2bf34d=0xa87+0x1a*-0xff+-0xfdf*-0x1,_0x143416=Math['ceil'](_0x3fad70['numSplats']/_0x2bf34d)*_0x2bf34d/_0x2bf34d,_0x1b2255=new Uint32Array(_0x143416);for(let _0x3c7363=0x13b1+0x2604+0xbb*-0x4f;_0x3c7363<_0x143416;++_0x3c7363)_0x1b2255[_0x3c7363]=_0x3c7363*_0x2bf34d;const _0x1b2ce7=new kt(_0x262f49,[{'semantic':Xc,'components':0x1,'type':Vo,'asInt':!(0x2d1*0x1+-0x60f+-0xa6*-0x5)}]),_0x5a65b6=new Float32Array((-0x581*0x7+0x2*-0x3d+0x270d)*_0x2bf34d),_0x2e68d1=new Uint32Array((0x1d5+0x1dc0+0x1*-0x1f8f)*_0x2bf34d);for(let _0x20a96d=-0x165c+-0x26d3+0x17*0x2a9;_0x20a96d<_0x2bf34d;++_0x20a96d){_0x5a65b6['set']([-(-0x33c+-0x15b5+0x18f2),-(0xcc+-0x1*-0x617+-0x6e2),_0x20a96d,0x12bd+-0x16*0x192+-0x10*-0xfd,-(-0x22f0+-0x6fb*-0x3+-0xe0*-0x10),_0x20a96d,-0x1*0xf07+0x45d*0x5+-0x6c9,-0x137a+-0x1*-0x35f+0x407*0x4,_0x20a96d,-(0x2cf+0x2384+0x7aa*-0x5),-0x16f5+0x4*0x4d7+0x1*0x39a,_0x20a96d],_0x20a96d*(-0x80b+0x169+-0x2*-0x357));const _0x50210c=_0x20a96d*(-0x19ef+-0x22de+0x1*0x3cd1);_0x2e68d1['set']([-0xc2*-0x29+0x3e0*-0xa+0x7ae+_0x50210c,0x1*0x11df+0x1dec+-0x2fca+_0x50210c,-0x274+-0x610+0x886+_0x50210c,0xe81*0x1+0x1*0x16b+-0xfec+_0x50210c,0x6c5*-0x1+-0x419+-0x20*-0x57+_0x50210c,0x19e4+-0x600+-0x13e1+_0x50210c],_0x20a96d*(-0x2d3+0x9*0x456+-0x242d));}this['mesh']=new Ge(_0x262f49),this['mesh']['setPositio'+'ns'](_0x5a65b6,0xb*-0x153+-0xdf7+-0x1*-0x1c8b),this['mesh']['setIndices'](_0x2e68d1),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),this['instanceIn'+'dices']=new Ds(_0x262f49,_0x1b2ce7,_0x143416,{'usage':ms,'data':_0x1b2255['buffer']});}['updateData'](){var _0xb7f61d;const _0xcce538=this['gsplatData'];if(!_0xcce538)return;const _0x27e922=-0x191*-0x11+-0x10b*-0x11+-0x2bdc,_0x498c3d=Math['ceil'](_0xcce538['numSplats']/_0x27e922)*_0x27e922/_0x27e922,_0x38e380=new Uint32Array(_0x498c3d);for(let _0x239f47=0x33*0x3e+0x5e*-0x65+-0x18bc*-0x1;_0x239f47<_0x498c3d;++_0x239f47)_0x38e380[_0x239f47]=_0x239f47*_0x27e922;const _0x171f32=new kt(this['device'],[{'semantic':Xc,'components':0x1,'type':Vo,'asInt':!(0x1*-0x162d+-0x1875+-0x5e*-0x7f)}]),_0x287c14=new Float32Array((0xcbb*-0x3+0x25e7+0x56)*_0x27e922),_0x23287a=new Uint32Array((-0x816+0xd29+-0x50d)*_0x27e922);for(let _0x10ce72=-0x1bd+0x16d+0x50;_0x10ce72<_0x27e922;++_0x10ce72){_0x287c14['set']([-(-0xb2f+-0x2054+0x2b84),-(-0x1161+0x7*-0x4c3+-0x1*-0x32b7),_0x10ce72,-0x1*0x14e3+0x517+0xfcd,-(0x102b+0x3d*0x89+-0x30cf),_0x10ce72,-0x14eb+-0xd14+-0x2*-0x1100,0x13*0x15d+0x1*0x405+0xcf*-0x25,_0x10ce72,-(0x354+-0x69*-0x3a+-0x1b1d),-0x15ca+-0x2*0x5d1+0x216d,_0x10ce72],_0x10ce72*(0xc5*0x5+0x2047+-0x2414));const _0x71891e=_0x10ce72*(-0x4*0x155+-0x1f82+0x24da);_0x23287a['set']([0x13e3+-0x1c28+0x1d*0x49+_0x71891e,-0x14a9+0x1de3*0x1+0x313*-0x3+_0x71891e,0x5cf*0x1+-0x2294*0x1+0x8b*0x35+_0x71891e,0x1b6e*0x1+-0x1*-0x1574+-0x1*0x30e2+_0x71891e,0x1e9*0x1+-0x4ac*-0x4+-0x1497+_0x71891e,-0xeff*-0x2+0x1e*-0x105+0x9b+_0x71891e],_0x10ce72*(0x10e8+-0x1*0x25e5+0x701*0x3));}this['mesh']['setPositio'+'ns'](_0x287c14,0x1*-0x1a87+0x221e+-0x794),this['mesh']['setIndices'](_0x23287a),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),(_0xb7f61d=this['instanceIn'+'dices'])==null||_0xb7f61d['destroy'](),this['instanceIn'+'dices']=new Ds(this['device'],_0x171f32,_0x498c3d,{'usage':ms,'data':_0x38e380['buffer']});}['updateText'+'ure'](){}['destroy'](){var _0x12d6bf,_0x5ab81f,_0x1ecba4,_0xc8b67;(_0x12d6bf=this['mesh'])==null||_0x12d6bf['destroy'](),(_0x5ab81f=this['instanceIn'+'dices'])==null||_0x5ab81f['destroy'](),(_0x1ecba4=this['gsplatData'])==null||_0x1ecba4['destroy'](),this['gsplatData']=null,(_0xc8b67=this['gsplatInst'+'ance'])==null||_0xc8b67['destroy'](),this['gsplatInst'+'ance']=void(-0x23c*-0x4+-0x17c0+0xed0),this['isDestroye'+'d']=!(-0x200d+-0x8c8+-0x28d5*-0x1),this['mesh']=null;}get['instanceSi'+'ze'](){return 0x63*0x2a+0x4*0x1c6+-0xb6b*0x2;}get['numSplats'](){var _0x37286a;return(_0x37286a=this['gsplatData'])==null?void(0xacb+-0x79b+-0x330):_0x37286a['numSplats'];}['setSceneIn'+'fo'](_0x2ac3d7){}['configureM'+'aterial'](_0x28e6fb){}['evalTextur'+'eSize'](_0x9a189d){return J['ZERO'];}['appendGSpl'+'atResource'](_0x146148,_0x22fe89,_0x2ad55f,_0x66b0d1,_0x36cda9){}['fireAssets'+'ManagerTim'+'eIndex'](){}['createText'+'ure'](_0x4b5578,_0x467298,_0x48e030,_0x4c1c14){return new _e(this['device'],{'name':_0x4b5578,'width':_0x48e030['x'],'height':_0x48e030['y'],'format':_0x467298,'cubemap':!(-0xe36+-0x267c+0x34b3),'mipmaps':!(0x9*-0x27f+-0x10a6+0x271e),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,..._0x4c1c14?{'levels':[_0x4c1c14]}:{}});}['instantiat'+'e'](){w['removed']('GSplatReso'+'urce.insta'+'ntiate\x20is\x20'+'removed.\x20U'+'se\x20gsplat\x20'+'component\x20'+'instead');}['createInst'+'ance'](_0x6ce2e4,_0x1e51b5){return this['gsplatInst'+'ance']=new BA(_0x6ce2e4,_0x1e51b5),this['gsplatInst'+'ance'];}}async function zA(){const _0x466b15=new Float32Array(-0x1ae5+0xed7*-0x2+0x3894),_0x5d93d1=new Int32Array(_0x466b15['buffer']);let _0x1ecb0e=null,_0x571bbf=null,_0xdc6d24=null,_0x2d03ed=null,_0x308d3f=null,_0x55f817=null,_0x495b07=null,_0x48552d=null;self['onmessage']=async _0x92f733=>{const {data:_0x28607f}=_0x92f733;switch(_0x28607f['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x5edebf(_0x28607f['numSplats'],_0x28607f['shBands'],_0x28607f['SHData']);break;case'updateColo'+'rData':_0x13d206(_0x28607f['numSplats'],_0x28607f['cr'],_0x28607f['cg'],_0x28607f['cb'],_0x28607f['ca']);break;case'updateTran'+'sformData':_0x1e6b89(_0x28607f['numSplats'],_0x28607f['is4D'],_0x28607f['x'],_0x28607f['y'],_0x28607f['z'],_0x28607f['rx'],_0x28607f['ry'],_0x28607f['rz'],_0x28607f['rw'],_0x28607f['mx'],_0x28607f['my'],_0x28607f['mz'],_0x28607f['sx'],_0x28607f['sy'],_0x28607f['sz'],_0x28607f['muT'],_0x28607f['tScale']);break;case'calcAabb':_0x49b067(_0x28607f['numSplats'],_0x28607f['x'],_0x28607f['y'],_0x28607f['z'],_0x28607f['sx'],_0x28607f['sy'],_0x28607f['sz']);break;case'destroyWor'+'ker':_0x466b84();break;}};class _0x304d30{constructor(_0x238efb=-0xcee+-0xe30+0x1*0x1b1e,_0x4b31a1=0x1ca*0x5+0x1*0x997+-0x1289*0x1,_0x2deac1=-0x268b+-0x6*0xc1+0x2b11,_0x43d4e9=-0x1f71+0xa3d+0x1535){this['x']=_0x238efb,this['y']=_0x4b31a1,this['z']=_0x2deac1,this['w']=_0x43d4e9;}['set'](_0x30482d,_0x3d6443,_0x50c887,_0x50c81f){return this['x']=_0x30482d,this['y']=_0x3d6443,this['z']=_0x50c887,this['w']=_0x50c81f,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x2068bc=this){let _0xd5a58c=_0x2068bc['length']();return _0xd5a58c===-0x1b2a+-0x21a5+0x3ccf?(this['x']=this['y']=this['z']=0x1*-0x1c3d+0x677+0x2*0xae3,this['w']=-0x1*-0xba9+-0x4*-0x95+-0xdfc):(_0xd5a58c=(0x15d9*-0x1+-0x26*-0xce+-0x8ba)/_0xd5a58c,this['x']=_0x2068bc['x']*_0xd5a58c,this['y']=_0x2068bc['y']*_0xd5a58c,this['z']=_0x2068bc['z']*_0xd5a58c,this['w']=_0x2068bc['w']*_0xd5a58c),this;}['mulScalar'](_0x98d353,_0x2a8061=this){return this['x']=_0x2a8061['x']*_0x98d353,this['y']=_0x2a8061['y']*_0x98d353,this['z']=_0x2a8061['z']*_0x98d353,this['w']=_0x2a8061['w']*_0x98d353,this;}}const _0x36d9fb=_0x1f080e=>{_0x466b15[-0x1f21+-0x5e2+0x2503]=_0x1f080e;const _0x584fa4=_0x5d93d1[0x1*0x7fa+0x79*-0x47+0x1995];let _0x193c19=_0x584fa4>>-0x3dd+0x144d*0x1+-0x4*0x418&-0x3716+0x1*-0xe767+0x1*0x19e7d,_0x48d21a=_0x584fa4>>0x110c*0x2+-0x1*-0x1cc7+-0x3ed3&0x915*0x2+-0x24c9+-0x2*-0xd4f;const _0x39dd37=_0x584fa4>>-0x234+0x44*0x6+0xb3&0x2584+-0x1dd+0x8aa*-0x4;return _0x39dd37<0x9a7*-0x2+-0xe98+-0x1*-0x224d?_0x193c19:_0x39dd37>-0x15b1*0x1+0x48+-0x1*-0x15f7?(_0x193c19|=-0x75ba+-0x14*0x2dd+0x2*0x957f,_0x193c19|=(_0x39dd37===0x8f8*-0x1+-0x44*0x2f+-0x1*-0x1673?0xb5*-0xe+-0x6a7*0x1+-0x108d*-0x1:-0x6+0x3*0xa39+-0x1ea4)&&_0x584fa4&-0xb399fd+-0x43b92d+0x1775329,_0x193c19):_0x39dd37<-0xe2d+0x16fd+-0x85f?(_0x48d21a|=-0x1*-0x1d87+-0x216a+0xb3*0x11,_0x193c19|=(_0x48d21a>>-0x1*-0xb2b+0x1*-0x2b2+0x807*-0x1-_0x39dd37)+(_0x48d21a>>0x1e7a+0x2cb+0x16*-0x17e-_0x39dd37&0x141*0xf+-0x1b51*0x1+0x883*0x1),_0x193c19):(_0x193c19|=_0x39dd37-(0x3c7*0x1+0x32*0x23+-0xa2d)<<0x1b97+0x1e1d+-0x39aa|_0x48d21a>>-0x1*0xb3f+0xb*-0x53+0x1*0xed1,_0x193c19+=_0x48d21a&-0x19b7*0x1+0x1aa1+-0xe9*0x1,_0x193c19);},_0x49b067=(_0x24c753,_0x472d0e,_0x5cfbb6,_0x51bbde,_0x1bd5cb,_0x1ea6ff,_0x5cd3c5)=>{let _0x5cda8f=-0x1067+-0x907*0x3+0xfd*0x2c,_0x1ed163=-0x1f2+-0xf*0x146+0x150c,_0x5be837=-0x3*-0xbc9+-0x2c8*0x5+-0x1*0x1573,_0x47dfb1=0x1191+0x12e+-0x12bf,_0x3e64b3=-0x2385+-0xf69+0x32ee,_0x4dd2df=0x1c52*0x1+0x1666+0xcae*-0x4,_0x3f639b=!(0xe16+-0xbb5+-0x261);const _0x3d7fff=new Float32Array(-0x2*-0x704+0xe71*-0x2+0xedd),_0x4c6072=new Float32Array(0x22f+0x1313*-0x2+-0x1*-0x23fa);for(let _0x1ac07a=-0x1*0x2237+-0x8*-0x47f+-0x1c1*0x1;_0x1ac07a<_0x24c753;++_0x1ac07a){const _0x29c019=_0x472d0e[_0x1ac07a],_0x1bb973=_0x5cfbb6[_0x1ac07a],_0x474562=_0x51bbde[_0x1ac07a],_0x4792ed=Math['max'](_0x1bd5cb[_0x1ac07a],_0x1ea6ff[_0x1ac07a],_0x5cd3c5[_0x1ac07a]);if(!isFinite(_0x29c019)||!isFinite(_0x1bb973)||!isFinite(_0x474562)||!isFinite(_0x4792ed))continue;const _0x12c6ac=(-0x2306+-0x1dfe*-0x1+0xa*0x81)*Math['exp'](_0x4792ed);_0x3f639b?(_0x3f639b=!(-0xbc9+-0x1ac9+-0x1*-0x2693),_0x5cda8f=_0x29c019-_0x12c6ac,_0x1ed163=_0x1bb973-_0x12c6ac,_0x5be837=_0x474562-_0x12c6ac,_0x47dfb1=_0x29c019+_0x12c6ac,_0x3e64b3=_0x1bb973+_0x12c6ac,_0x4dd2df=_0x474562+_0x12c6ac):(_0x5cda8f=Math['min'](_0x5cda8f,_0x29c019-_0x12c6ac),_0x1ed163=Math['min'](_0x1ed163,_0x1bb973-_0x12c6ac),_0x5be837=Math['min'](_0x5be837,_0x474562-_0x12c6ac),_0x47dfb1=Math['max'](_0x47dfb1,_0x29c019+_0x12c6ac),_0x3e64b3=Math['max'](_0x3e64b3,_0x1bb973+_0x12c6ac),_0x4dd2df=Math['max'](_0x4dd2df,_0x474562+_0x12c6ac));}_0x3f639b||(_0x3d7fff[-0x25f*-0xe+-0x1d44+-0x2*0x1f7]=(_0x5cda8f+_0x47dfb1)*(0x1*0x1e4d+-0x43e*-0x2+0x1*-0x26c9+0.5),_0x3d7fff[-0x5a6+0x1e07*-0x1+0x23ae]=(_0x1ed163+_0x3e64b3)*(0x1*-0xa72+0x1*-0x43c+0xeae+0.5),_0x3d7fff[-0xefd+-0x125*0x17+0x81*0x52]=(_0x5be837+_0x4dd2df)*(-0xa78+-0x4ad+0xf25*0x1+0.5),_0x4c6072[-0x25da+0x1a7+0x2433]=(_0x47dfb1-_0x5cda8f)*(-0x1f*0xac+0x168*-0x9+0x217c+0.5),_0x4c6072[0x1bc9+0x1ad+-0x1d75]=(_0x3e64b3-_0x1ed163)*(-0x228+-0xa37+0xc5f+0.5),_0x4c6072[-0x3*-0x43+0x1*0x953+-0xa1a]=(_0x4dd2df-_0x5be837)*(-0x8*0x238+-0xa*-0x1a8+-0x130*-0x1+0.5)),self['postMessag'+'e']({'type':'updatedAab'+'bData','center':_0x3d7fff,'halfExtents':_0x4c6072});},_0x1e6b89=(_0x4d277d,_0x5a685f,_0x3fbabe,_0x52efe7,_0x50946a,_0x24e9c9,_0xd9a996,_0x6e2bf3,_0x42a0f2,_0xb27b36,_0x51b116,_0x5bfffd,_0xbb035e,_0x3d0bc2,_0x9fec46,_0x384934,_0x3ad77c)=>{_0x466b84(),_0x1ecb0e=new Float32Array(_0x4d277d*(-0x1854+0x1d3a*-0x1+0x15*0x28d)),_0x2d03ed=new Float32Array(_0x4d277d*(0x3a5*0x7+0x1c1d+-0x359d)),_0x55f817=new Uint16Array(_0x4d277d*(-0x359*0xb+0x1*-0x1e62+-0x24*-0x1de)),_0xdc6d24=new Float32Array(_0x4d277d*(-0x1b2e+0x6*-0x590+0x3c91)),_0x5a685f&&(_0x308d3f=new Float32Array(_0x4d277d*(-0x1*-0x1e0b+0x19d3+-0xb5*0x4f)),_0x571bbf=new Float32Array(_0x4d277d*(0x3*0x72+0x3ad*-0x7+0x8*0x30d)),_0x495b07=new Float32Array(_0x4d277d*(-0x1*-0x14d3+-0x7bb+-0xd15)),_0x48552d=new Float32Array(_0x4d277d));const _0x37f6c4=new _0x304d30(-0xa4*0x8+0x626+-0x2*0x83,0xdfe+0x6*0x13b+-0x60*0x39,0x705*-0x3+-0x1*-0xb51+-0x2b*-0x3a,0x1*0x49e+-0x1c85+0x17e7);for(let _0x592ef5=-0x7a2*0x1+-0x1e30+-0x2f*-0xce;_0x592ef5<_0x4d277d;_0x592ef5++)_0x37f6c4['set'](_0x24e9c9[_0x592ef5],_0xd9a996[_0x592ef5],_0x6e2bf3[_0x592ef5],_0x42a0f2[_0x592ef5]),_0x37f6c4['normalize'](),_0x37f6c4['w']<0x21f6+0x1be*0xc+0x1b6f*-0x2&&_0x37f6c4['mulScalar'](-(0x20a1*0x1+-0xc10+-0x1490)),_0x2d03ed[_0x592ef5*(0x6b*-0x3d+0x1e0a*-0x1+0x378c)+(0xda+-0x11b1*0x1+0x10d7)]=_0x3fbabe[_0x592ef5],_0x2d03ed[_0x592ef5*(-0x235a+-0x5d4+0x2931)+(0x793+-0x241c+0x1c8a)]=_0x52efe7[_0x592ef5],_0x2d03ed[_0x592ef5*(0x1*0x13f4+0x12f2*0x1+-0x26e3)+(0x36+0x215f+-0x2193)]=_0x50946a[_0x592ef5],_0x1ecb0e[_0x592ef5*(0x23bd+0x139a+-0x4*0xdd5)+(-0xa3f+-0x15ad+0x1*0x1fec)]=_0x3fbabe[_0x592ef5],_0x1ecb0e[_0x592ef5*(0xc7+0x1c02+0x1*-0x1cc6)+(0x21fb+-0x193*0x5+-0x29*0xa3)]=_0x52efe7[_0x592ef5],_0x1ecb0e[_0x592ef5*(-0x1f*-0x1b+-0x8f6+-0x1*-0x5b4)+(0x2*-0x208+0x1178+-0xd66)]=_0x50946a[_0x592ef5],_0x55f817[_0x592ef5*(-0x5cf*0x4+-0xa2b+0x216a)+(-0x3*0x93a+-0x1*0x1aa7+-0x7*-0x7c3)]=_0x36d9fb(Math['exp'](_0xbb035e[_0x592ef5])),_0x55f817[_0x592ef5*(-0x167*0xd+-0xb*0x2b5+0x1*0x3005)+(-0x25b0+0x12*-0x44+-0x53*-0x83)]=_0x36d9fb(Math['exp'](_0x3d0bc2[_0x592ef5])),_0x55f817[_0x592ef5*(0x24d7*-0x1+0xbae+0x192c)+(0x3*0x5d8+0x1db3+0xb*-0x44b)]=_0x36d9fb(Math['exp'](_0x9fec46[_0x592ef5])),_0xdc6d24[_0x592ef5*(0x14ea+0x1c8f+-0x3176)+(-0x5*0x38f+-0x459*0x7+0x1*0x303a)]=_0x37f6c4['x'],_0xdc6d24[_0x592ef5*(-0x346*-0xa+-0xa38*0x3+-0x211*0x1)+(-0x233*-0x10+-0xb3*-0x2b+0x1d0*-0x24)]=_0x37f6c4['y'],_0xdc6d24[_0x592ef5*(-0x2215*0x1+0x1*-0x2591+0x47a9)+(0x11*0x1e1+-0x2*-0x11c8+-0x437f)]=_0x37f6c4['z'],_0x5a685f&&_0x308d3f&&_0x571bbf&&(_0x308d3f[_0x592ef5*(-0x5fc+-0xb8+0xbf*0x9)+(-0x2*-0x1087+-0x2*0x40f+-0x18f0)]=_0xb27b36[_0x592ef5],_0x308d3f[_0x592ef5*(-0x237f+-0x9*0x457+0x4a91)+(-0x64a+0x50a+-0x3*-0x6b)]=_0x51b116[_0x592ef5],_0x308d3f[_0x592ef5*(0x17c6+-0x2*-0x4bd+0x1*-0x213d)+(-0x17a8*-0x1+0x414*-0x6+0xd2)]=_0x5bfffd[_0x592ef5],_0x495b07[_0x592ef5*(-0x3*0x3+0xa1b+-0xa0f)+(-0x1645+0x1a*0xdf+-0x61)]=_0xb27b36[_0x592ef5],_0x495b07[_0x592ef5*(0x19*0x12+-0x373*0x2+0x1*0x527)+(-0x24*-0x17+0x178f+-0x1aca)]=_0x51b116[_0x592ef5],_0x495b07[_0x592ef5*(0x2504+-0x1*0xef3+-0xb07*0x2)+(-0xc51+-0x1*0x26e+0xec1)]=_0x5bfffd[_0x592ef5],_0x48552d[_0x592ef5]=_0x3ad77c?Math['exp'](_0x3ad77c[_0x592ef5]):-0xe8f+0x214a+-0x12bb,_0x571bbf[_0x592ef5*(0x10e5+0x349*-0x7+-0x5*-0x139)+(0x2659+0x2*-0xac1+-0x10d7)]=_0x384934?_0x384934[_0x592ef5]:0x598*0x6+-0x3a1*-0x4+-0x3014,_0x571bbf[_0x592ef5*(-0x91b+0x18c7+-0xfa9)+(0x1*0x473+-0xda*0x2+-0x2be)]=_0x48552d[_0x592ef5]);const _0x1c2353=[_0x1ecb0e['buffer'],_0x2d03ed['buffer'],_0x55f817['buffer'],_0xdc6d24['buffer']];_0x5a685f&&_0x1c2353['push'](_0x308d3f['buffer'],_0x571bbf['buffer'],_0x495b07['buffer'],_0x48552d['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x1ecb0e,'dataPosition':_0x2d03ed,'dataScale':_0x55f817,'dataRotation':_0xdc6d24,'dataMotion':_0x308d3f,'dataTime':_0x571bbf,'motion':_0x495b07,'tScaleArray':_0x48552d},_0x1c2353);},_0x13d206=(_0x22a70e,_0x263eeb,_0x55b0d7,_0x3def44,_0x3d1116)=>{const _0x5e3657=new Uint16Array(_0x22a70e*(0x7e5*0x1+-0xd3*0x11+0x622)),_0x481ad0=-0x14bf+0xad*0x25+-0x6d*0xa+0.28209479177387814;for(let _0x3fa426=0xeec+-0xdf9*0x1+-0xf3;_0x3fa426<_0x22a70e;++_0x3fa426){const _0xc5a41=_0x263eeb[_0x3fa426]*_0x481ad0+(-0xa2d+0x2c5*0x8+-0xbfb+0.5),_0xaa2ce3=_0x55b0d7[_0x3fa426]*_0x481ad0+(0x1*0x4d6+-0x1b49+0x1673+0.5),_0xe4b797=_0x3def44[_0x3fa426]*_0x481ad0+(-0x2*-0x100+-0x1c5+-0x3b+0.5),_0x43b64f=_0x3d1116[_0x3fa426];_0x5e3657[_0x3fa426*(0x2*-0x46a+-0x13b6+0x1c8e)+(0x3*0xfd+0x7c8+-0x1*0xabf)]=_0x36d9fb(_0xc5a41),_0x5e3657[_0x3fa426*(0x166e+-0x1ccb+-0x17*-0x47)+(0xfdb+-0x1218+0x23e)]=_0x36d9fb(_0xaa2ce3),_0x5e3657[_0x3fa426*(0x1d*0x6d+0x1b88+-0x41*0x9d)+(-0x2335+-0x1*-0xe40+0x1*0x14f7)]=_0x36d9fb(_0xe4b797),_0x5e3657[_0x3fa426*(-0x1cf*-0x5+0xf*0x8b+-0x112c)+(-0x298*0x4+-0x20e*0x5+0x14a9)]=_0x36d9fb(_0x43b64f);}self['postMessag'+'e']({'type':'updatedCol'+'orData','data':_0x5e3657});},_0x5edebf=(_0x2a17fc,_0x1db588,_0xafa466)=>{const _0x189a6e=new Uint32Array(_0x2a17fc*(0x1*0x16bd+-0xd5b*0x1+-0x95e)),_0xa1ec0c=new Uint32Array(_0x2a17fc*(-0xfe5+-0x1a7e*-0x1+-0x9*0x12d)),_0x51772c=new Uint32Array(_0x2a17fc*(0x35*0x91+-0x1b91+-0x18*0x1a)),_0x47b46e=new Uint32Array(_0x2a17fc*(-0xe6f+-0x20f8+0x2f6b)),_0x5af62c={0x1:0x3,0x2:0x8,0x3:0xf}[_0x1db588],_0x1f9098=_0xafa466,_0x2f4dba=0x6d1+-0x11ba+0x58*0x37,_0x4d3cc5=-0x2214+-0x1e00+0x4413,_0x247e2b=new Float32Array(0x4*0x8f7+0xe04+0x31df*-0x1),_0x5ccf42=new Uint32Array(_0x247e2b['buffer']),_0x243ce6=new Array(_0x5af62c*(-0x1*-0xb7f+-0x7fe+0x6*-0x95))['fill'](-0x1f1*-0xb+-0x2*0x1039+-0xb17*-0x1);for(let _0x3d42df=0x283*0x7+0xce6+-0x1e7b;_0x3d42df<_0x2a17fc;++_0x3d42df){for(let _0x4bbcb6=0x6f*0x47+-0x19bc+-0x1af*0x3;_0x4bbcb6<_0x5af62c;++_0x4bbcb6)_0x243ce6[_0x4bbcb6*(-0x5*-0x2ed+0xcdb+0xd*-0x21d)]=_0x1f9098[_0x4bbcb6][_0x3d42df],_0x243ce6[_0x4bbcb6*(0x207f*-0x1+0x26de+0x2*-0x32e)+(0x18bf+0x24ec+-0x36d*0x12)]=_0x1f9098[_0x4bbcb6+_0x5af62c][_0x3d42df],_0x243ce6[_0x4bbcb6*(0x37d+0x33b+-0x6b5)+(0x27b*-0xd+0x2036+-0x1*-0xb)]=_0x1f9098[_0x4bbcb6+_0x5af62c*(0x8d3+0x8f6+-0x6f*0x29)][_0x3d42df];let _0x4eeca2=_0x243ce6[-0x15cc+0x7*-0xc7+0x1b3d];for(let _0x30b922=-0x3*-0x637+-0xa*0x7f+-0xdae;_0x30b922<_0x5af62c*(0x3*-0x8a5+0xc*-0x223+0x2*0x19cb);++_0x30b922)_0x4eeca2=Math['max'](_0x4eeca2,Math['abs'](_0x243ce6[_0x30b922]));if(_0x4eeca2!==0x214+-0x5*-0x5d7+-0x1f47){for(let _0x6c35a4=0x61*-0x5+-0x867+0xa4c;_0x6c35a4<_0x5af62c;++_0x6c35a4)_0x243ce6[_0x6c35a4*(0x5cd*0x4+-0x1*-0x241+-0x1972)+(0x1*0x1147+0x7e+-0x11c5)]=Math['max'](0x1*-0x10bb+0x248*0x5+-0x1*-0x553,Math['min'](_0x2f4dba,Math['floor']((_0x243ce6[_0x6c35a4*(-0x2*-0xa8+0xdf*-0x1d+0x17f6)+(0x5eb+0xfde*0x2+0x3*-0xc8d)]/_0x4eeca2*(0x2*0xa82+0x3*0xc22+-0x396a*0x1+0.5)+(0x235d+0x41f*-0x9+0x1ba+0.5))*_0x2f4dba+(-0x188c+-0x249d+0x3d29+0.5)))),_0x243ce6[_0x6c35a4*(0x1e81+-0x33*0x95+-0xcf)+(0x8e*0x42+0x23*0xe2+-0x4381)]=Math['max'](0x18dd+0xb1+-0x2*0xcc7,Math['min'](_0x4d3cc5,Math['floor']((_0x243ce6[_0x6c35a4*(0xf67+-0x4c7*-0x4+-0x2280)+(0x1*0x29+-0x1513+0x14eb)]/_0x4eeca2*(0xf53+-0x43a+-0xb19+0.5)+(-0xa11+-0x10f0+-0xdf*-0x1f+0.5))*_0x4d3cc5+(0x1a35+0x1*0x1797+-0x4*0xc73+0.5)))),_0x243ce6[_0x6c35a4*(-0x2161*-0x1+0x14b9+0x3d*-0xe3)+(-0x7*-0x21f+0x305*-0x1+-0xbd2)]=Math['max'](-0x1ffe+0x6e8+0x1916,Math['min'](_0x2f4dba,Math['floor']((_0x243ce6[_0x6c35a4*(-0xee4*0x2+0x1*-0xa75+-0x2840*-0x1)+(-0x1a7e+0x43*-0xb+0x1d61)]/_0x4eeca2*(0x2428+0x1*0x1dc9+0x15fb*-0x3+0.5)+(-0x214e+-0x87b+0x1*0x29c9+0.5))*_0x2f4dba+(0x1a57+-0x1e54+0x3fd+0.5))));_0x247e2b[0xae+0xd*-0x3e+-0x278*-0x1]=_0x4eeca2,_0x189a6e[_0x3d42df*(0x106d+0x1*-0x247e+-0x1415*-0x1)+(0x2*0x81d+0x1*0xfc1+-0x1ffb)]=_0x5ccf42[-0x5*-0x28d+-0x1d6f*-0x1+-0x2a30],_0x189a6e[_0x3d42df*(-0x13a1+-0x1d44*0x1+0x30e9)+(0xa4+-0x23c8+0x2325*0x1)]=_0x243ce6[-0x4b2*-0x1+0x18ec+0x1*-0x1d9e]<<0x13*0x1bf+-0xefc+0x1*-0x121c|_0x243ce6[-0xabb*-0x1+0x1c9b+0x2755*-0x1]<<-0x3b3*-0x4+0x23e2+-0x32a3|_0x243ce6[0x1e0e+0x110a*0x1+-0x2f16],_0x189a6e[_0x3d42df*(0x17bb+0x1e73*0x1+-0x2*0x1b15)+(0x3*-0xa13+-0x1b07+0x3942*0x1)]=_0x243ce6[-0x1126+0x12aa*-0x1+0x1*0x23d3]<<0x52*-0x52+0x13f*-0x7+0x2312|_0x243ce6[-0x1*0xfeb+0x5f*-0xb+0x1404]<<-0x2529*-0x1+0x3*-0x457+-0x1819|_0x243ce6[0x2050+0x1ae6+-0x3b31*0x1],_0x189a6e[_0x3d42df*(-0x237d+-0x3f+0x23c0)+(-0x2122+0x62+0x1*0x20c3)]=_0x243ce6[-0xdf2+-0x3*0xa22+0x2c5e]<<0x2b*-0xb2+-0x88e+0x2689*0x1|_0x243ce6[-0x20*-0x66+-0x25f*0x5+-0xde]<<0x3*-0xe7+0x282+0x3e|_0x243ce6[0x23*0x3b+0x1033+-0x183c*0x1],_0x1db588>-0xbe9+0xc9+-0x1*-0xb21&&(_0xa1ec0c[_0x3d42df*(-0x337*-0x1+-0x1*0x115f+0xe2c)+(0x19a0+0x1968+0x3308*-0x1)]=_0x243ce6[-0x2674+0x346*-0x3+0x304f]<<-0xe5f+-0x1*0x16a7+0x251b|_0x243ce6[0x16b*0x1+-0x1*0x180d+0x1*0x16ac]<<0x1*-0x1336+-0x63d*0x3+0x25f8|_0x243ce6[-0x1caa+-0x1703+0x33b8],_0xa1ec0c[_0x3d42df*(0xa5c+-0x18fc+0xea4)+(-0x1*0x22d5+-0x809+0x2adf)]=_0x243ce6[0x77*-0x3d+-0x1*0x1e42+0x3aa9]<<-0x127*0x13+0x3*0xbe5+-0xdb5|_0x243ce6[-0x9eb+0x4*0x31f+-0x5c*0x7]<<0x689+0x194c*0x1+0x1fca*-0x1|_0x243ce6[-0x2306*0x1+0xc50*0x2+0x1*0xa74],_0xa1ec0c[_0x3d42df*(0x2619+0x1633+-0x789*0x8)+(0x489+0x6bc+-0x3c1*0x3)]=_0x243ce6[0x7*0x30a+0xb6+-0x15ed]<<-0x20bb*0x1+-0xaa9+0x2b79|_0x243ce6[-0x1*-0x1cb3+0x2*0xf25+-0x3aed]<<-0x1*0x7f4+-0x1ef5*-0x1+0x16f6*-0x1|_0x243ce6[-0x100d+0x3*0x575+-0x41],_0xa1ec0c[_0x3d42df*(-0x617*0x1+0x73c+0x11*-0x11)+(0x1*-0x78a+-0xe*-0x17+0x64b)]=_0x243ce6[-0x3d1*0x2+-0x17da+0x1f8e]<<-0x1a69+-0x1*-0x1d3e+-0x2c0|_0x243ce6[-0x1*0x141e+0x4*0x737+-0x13d*0x7]<<-0x253*0xd+-0xbe4+-0x19f*-0x1a|_0x243ce6[0x196f+-0xcca*0x3+0xd03],_0x1db588>-0x14bd+0xfe7+0x4d8?(_0x51772c[_0x3d42df*(0x9d*-0x7+-0x26a7+0x2af6)+(-0x14*-0x76+0x7c0+0xb5*-0x18)]=_0x243ce6[-0xfc7*0x1+-0x53c*0x7+0x3480]<<-0x215c+-0x1405+0x11d2*0x3|_0x243ce6[-0xc54+-0x7cd*-0x3+-0xafd]<<-0x262*0x5+0x8af*0x1+0x346|_0x243ce6[0x1621+0x1*0x4ff+-0x903*0x3],_0x51772c[_0x3d42df*(0x66b+-0x2*0x113e+0x1c15)+(0x234d+-0x7e8+-0x1b64)]=_0x243ce6[0x9*0x1e7+0x1*0x2001+-0x3108]<<-0x1cfd+-0x6*0x3ee+-0x34a6*-0x1|_0x243ce6[0x109d+-0x2384*-0x1+-0x681*0x8]<<0xa9+0xc2c+0x665*-0x2|_0x243ce6[0xe9*0x25+-0x3*0xd3+-0x1f1a],_0x51772c[_0x3d42df*(-0x11b*-0x21+0x72f*-0x3+-0xeea)+(-0x1b+0x4eb+0xf*-0x52)]=_0x243ce6[0x1852+-0x1fe7+0x6*0x148]<<-0x1*0x2531+-0x19e4+-0xe7*-0x46|_0x243ce6[0x1d4+0x2028+-0x21e0]<<-0x733*-0x2+0xa9f+0x2e*-0x8b|_0x243ce6[-0x1278+-0x90b+0x1ba0],_0x51772c[_0x3d42df*(0x21d2+0x1*0x2303+-0x44d1)+(-0x1*0x12ec+0x9e5+-0xb2*-0xd)]=_0x243ce6[0x2293*-0x1+0x208*-0x13+-0x4949*-0x1]<<0x1af*0xc+-0x16cf*-0x1+-0x2aee|_0x243ce6[0x10a*0x8+-0x26b4+0x1e83]<<-0x3a*-0x23+0xfa9+-0x178c|_0x243ce6[0x126e+-0xa7e*-0x2+-0x274a],_0x47b46e[_0x3d42df*(-0x75e+-0xb5+-0x13*-0x6d)+(-0x1ae8*-0x1+-0x387+-0x5f*0x3f)]=_0x243ce6[0x123d+0x1a1+-0x13bd]<<0x100f*-0x1+0xa37+0x5ed|_0x243ce6[0xc*-0x62+0x79+0x441]<<-0xa*0x32e+0x51f*-0x3+0x2f34*0x1|_0x243ce6[0xc9*-0x1+0xe55+-0x1*0xd69],_0x47b46e[_0x3d42df*(-0x24ec+-0x3e6*0x6+0x3c54)+(0x1*-0xace+-0x26*0xd6+0x2a93)]=_0x243ce6[-0x19b2+0x684+0x1352]<<0x185*-0x13+-0x1*-0x21b9+-0x4c5|_0x243ce6[-0x2400+-0x1*-0x1b8d+-0x1b8*-0x5]<<-0xb4b+-0xd1d+0xb*0x239|_0x243ce6[0x8df+0xd1e*0x1+-0x15d7],_0x47b46e[_0x3d42df*(-0x18db+0x854*-0x1+0x2133)+(0x1b56+0x2*-0x121e+-0xc*-0xbe)]=_0x243ce6[0x22cb+0x2703*-0x1+0x45f]<<0x134*0xb+0xda1*0x1+-0x1ac8|_0x243ce6[-0x1325*0x1+0x17*-0x4f+-0x1*-0x1a66]<<0x13d3+-0x80a+-0x2*0x5df|_0x243ce6[0x12c8+-0x270d+0x146e],_0x47b46e[_0x3d42df*(-0x239d*-0x1+-0x2517+-0x1*-0x17e)+(0x40c*-0x1+0x2*0x7d0+-0xb91)]=_0x243ce6[0x151*-0x9+0xe*-0xe5+-0x1*-0x1889]<<0x244f+-0x18a5*0x1+0x251*-0x5|_0x243ce6[0x21a2+-0x1d02+-0x475*0x1]<<-0xb32+-0x11*0x220+-0x979*-0x5|_0x243ce6[0x2*0xed2+-0x74b*-0x2+-0x2c0e]):_0x51772c[_0x3d42df]=_0x243ce6[0x3*-0x863+-0xd21+0x265f]<<-0xb77*-0x1+-0x1*-0x26ee+-0x3250|_0x243ce6[0x1e72+0x5f3*0x4+0x1b14*-0x2]<<-0x5*-0x335+-0x353*-0x5+0xadf*-0x3|_0x243ce6[-0x5fc*0x2+-0x22a4+-0x2eb3*-0x1]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x189a6e,'sh4to7Data':_0xa1ec0c,'sh8to11Data':_0x51772c,'sh12to15Data':_0x47b46e}},[_0x189a6e['buffer'],_0xa1ec0c['buffer'],_0x51772c['buffer'],_0x47b46e['buffer']]);},_0x466b84=()=>{_0x1ecb0e=null,_0x571bbf=null,_0xdc6d24=null,_0x2d03ed=null,_0x308d3f=null,_0x55f817=null,_0x495b07=null,_0x48552d=null;};}let VA=class extends me{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+zA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x5e3b52,_0x7e5fc,_0x347e66){_0x5e3b52['onmessage']=_0x5a9ffc=>{if(!this['worker'])return;const {data:_0x214c5f}=_0x5a9ffc;if(_0x214c5f['type']===_0x7e5fc)switch(_0x7e5fc){case'updatedSHD'+'ata1':_0x347e66(_0x214c5f['data']);break;case'updatedCol'+'orData':_0x347e66(_0x214c5f['data']);break;case'updatedTra'+'nsformData':_0x347e66(_0x214c5f);break;case'updatedAab'+'bData':_0x347e66(_0x214c5f);break;}};}['updateSHDa'+'ta1'](_0x6f03ed,_0x48b536,_0x181f8e){var _0x2c9fa1;return(_0x2c9fa1=this['worker'])==null||_0x2c9fa1['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x6f03ed,'shBands':_0x48b536,'SHData':_0x181f8e}),new Promise(_0x1f51e0=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x27d711=>{_0x1f51e0(_0x27d711);});});}async['updateColo'+'rData'](_0x47d451,_0xef8e10,_0x5daf28,_0x29c1e1,_0x4aa3bc){var _0xed5f1;return(_0xed5f1=this['worker'])==null||_0xed5f1['postMessag'+'e']({'type':'updateColo'+'rData','numSplats':_0x47d451,'cr':_0xef8e10,'cg':_0x5daf28,'cb':_0x29c1e1,'ca':_0x4aa3bc}),new Promise(_0x11be2f=>{this['workerMess'+'ageFn'](this['worker'],'updatedCol'+'orData',_0x451494=>{_0x11be2f(_0x451494);});});}async['calcAabb'](_0x1ad089,_0x4903aa,_0x4c05af,_0x8d0d95,_0x20c9dc,_0x243d47,_0x37b19c){var _0xaf8fb3;const _0x556fba=new Float32Array(_0x4903aa),_0x5a8036=new Float32Array(_0x4c05af),_0x4d3ef3=new Float32Array(_0x8d0d95),_0x4ab3b6=new Float32Array(_0x20c9dc),_0xd9e956=new Float32Array(_0x243d47),_0x45642b=new Float32Array(_0x37b19c);return(_0xaf8fb3=this['worker'])==null||_0xaf8fb3['postMessag'+'e']({'type':'calcAabb','numSplats':_0x1ad089,'x':_0x556fba,'y':_0x5a8036,'z':_0x4d3ef3,'sx':_0x4ab3b6,'sy':_0xd9e956,'sz':_0x45642b},[_0x556fba['buffer'],_0x5a8036['buffer'],_0x4d3ef3['buffer'],_0x4ab3b6['buffer'],_0xd9e956['buffer'],_0x45642b['buffer']]),new Promise(_0xe9fa61=>{this['workerMess'+'ageFn'](this['worker'],'updatedAab'+'bData',_0xfb15de=>{_0xe9fa61(_0xfb15de);});});}async['updateTran'+'sData'](_0x421330,_0x46b74c,_0x4a0288,_0x2a972c,_0x4989a5,_0x5c0e02,_0x1e34a3,_0x521618,_0x1ef42a,_0xc342b4,_0x13beda,_0x47db33,_0x131554,_0x2b32de,_0x8b5e12,_0x30ee20,_0x20bfda){var _0x353080;return(_0x353080=this['worker'])==null||_0x353080['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x421330,'is4D':_0x46b74c,'x':_0x4a0288,'y':_0x2a972c,'z':_0x4989a5,'rx':_0x5c0e02,'ry':_0x1e34a3,'rz':_0x521618,'rw':_0x1ef42a,'mx':_0xc342b4,'my':_0x13beda,'mz':_0x47db33,'sx':_0x131554,'sy':_0x2b32de,'sz':_0x8b5e12,'muT':_0x30ee20,'tScale':_0x20bfda}),new Promise(_0x74dfd9=>{const _0x32c1fa=_0x51df7f=>{_0x74dfd9(_0x51df7f);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x32c1fa);});}['destroy'](){var _0x4703a5;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x4703a5=this['worker'])==null||_0x4703a5['terminate'](),this['worker']=null);}};const $_=(_0x226bc1,_0x3cc6a9)=>{const _0x58e20d=[];for(let _0x4b78a9=0x6d8+0x2484+-0x94*0x4b;_0x4b78a9<_0x3cc6a9;++_0x4b78a9)_0x58e20d['push'](_0x226bc1['getProp']('f_rest_'+_0x4b78a9));return _0x58e20d;};class GA extends Zy{constructor(_0x543357,_0x2bdc3d){console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),super(_0x543357,_0x2bdc3d),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(-0x2513+0xae3*-0x1+-0xffd*-0x3)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new VA(),this['assetsMana'+'gerLoadedT'+'ime']=0x14e7*-0x1+-0x24da+0x3a*0xff);}async['updateData'](){var _0x758bfa,_0xd12cc9,_0x1f1119,_0x1c46ff,_0x2ace1d,_0x156fe3,_0x4c05d3,_0x16ce93,_0x536c3e,_0x45801b,_0x2d1f63;console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Data'),await super['updateData']();const _0x22814f=this['gsplatData'];if(!_0x22814f)return;this['is4D']=_0x22814f['is4D'];const _0x350e97=await this['getTransfo'+'rmDataByWo'+'rker'](_0x22814f);this['aabb']=new De(),await _0x22814f['calcAabbAs'+'ync'](this['aabb'],this['updateData'+'Worker']),this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x350e97['centers'],this['motion']=_0x350e97['motion'],this['tScale']=_0x350e97['tScaleArra'+'y'],this['muT']=await _0x22814f['getMuT'](),this['timeIndex']=await _0x22814f['getTimeInd'+'ex']();const _0x22263c=this['evalTextur'+'eSize'](_0x22814f['numSplats']);this['colorTextu'+'re']?((_0x758bfa=this['colorTextu'+'re2'])==null||_0x758bfa['destroy'](),(_0xd12cc9=this['transformA'+'Texture2'])==null||_0xd12cc9['destroy'](),(_0x1f1119=this['transformB'+'Texture2'])==null||_0x1f1119['destroy'](),(_0x1c46ff=this['transformR'+'Texture2'])==null||_0x1c46ff['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x22263c),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x22263c),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x22263c),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x22263c),this['is4D']&&((_0x2ace1d=this['transformM'+'otionTextu'+'re2'])==null||_0x2ace1d['destroy'](),(_0x156fe3=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x156fe3['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x22263c),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x22263c))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',nt,_0x22263c),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x22263c),this['transformA'+'Texture']=this['createText'+'ure']('transformA',Ye,_0x22263c),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x22263c),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ui,_0x22263c),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x22263c),this['transformR'+'Texture']=this['createText'+'ure']('transformR',Ye,_0x22263c),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x22263c),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',Ye,_0x22263c),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x22263c),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',Ye,_0x22263c),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x22263c))),await this['updateColo'+'rData'](_0x22814f),await this['updateTran'+'sformFromD'+'ata'](_0x350e97),this['shBands']=_0x22814f['shBands'],this['shBands']>0x2*0x59+0x1b76+-0x1c28&&(this['sh1to3Text'+'ure']?((_0x4c05d3=this['sh1to3Text'+'ure2'])==null||_0x4c05d3['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x22263c),this['shBands']>0x1f3b+-0x24e2*-0x1+0x2*-0x220e&&((_0x16ce93=this['sh4to7Text'+'ure2'])==null||_0x16ce93['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x22263c),this['shBands']>0x12be+-0x12*0x51+0xd0a*-0x1?((_0x536c3e=this['sh8to11Tex'+'ture2'])==null||_0x536c3e['destroy'](),(_0x45801b=this['sh12to15Te'+'xture2'])==null||_0x45801b['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x22263c),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x22263c)):((_0x2d1f63=this['sh8to11Tex'+'ture2'])==null||_0x2d1f63['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x22263c)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x22263c),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ue,_0x22263c),this['shBands']>0xe2*0x4+-0x1e*-0x121+0xc77*-0x3&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ue,_0x22263c),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x22263c),this['shBands']>0x1f5d+-0xa6e+-0x1*0x14ed?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ue,_0x22263c),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x22263c),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ue,_0x22263c),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x22263c)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Yi,_0x22263c),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Yi,_0x22263c)))),await this['updateSHDa'+'taByWorker'](_0x22814f));}['updateText'+'ure'](){console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Texture'),!this['isDestroye'+'d']&&(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x298ecc){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x298ecc}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20releas'+'eSeqGSplat'+'\x20all'),this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x2c27b6,_0x93a346,_0x5c42ce,_0xbef06b,_0x55e00c){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x2c27b6,'timeOption':_0x93a346,'loadedTime':_0x5c42ce,'asset':_0xbef06b,'events':_0x55e00c}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(0xd0e+0x195+0xea3*-0x1);try{for(;this['appendQueu'+'e']['length']>-0x125*0x3+-0x564+0x8d3;){const _0x1fc61f=this['appendQueu'+'e']['shift']();_0x1fc61f['type']==='append'?await this['processApp'+'endTask'](_0x1fc61f['data']):_0x1fc61f['type']==='release'&&await this['processRel'+'easeTask'](_0x1fc61f['data']);}}finally{this['isProcessi'+'ngQueue']=!(0x26d9+0xbe4+0xcaf*-0x4);}}}async['processRel'+'easeTask'](_0x4655cb){const {index:_0x41e0b1}=_0x4655cb;console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.relea'+'seGSplatRe'+'source',_0x41e0b1),!this['isDestroye'+'d']&&await this['gsplatData']['releaseSeq'+'Data'](_0x41e0b1);}async['processApp'+'endTask'](_0x2390a4){var _0xde1135;const {gsplatData:_0x254ae5,timeOption:_0xbb034f,loadedTime:_0x4c6502,asset:_0x56ea6b,events:_0x1ddcb4}=_0x2390a4;!this['gsplatData']||this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.appen'+'dGSplatRes'+'ource'),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0xbb034f,await this['gsplatData']['appendGSpl'+'atData'](_0x254ae5,_0x4c6502,_0xbb034f),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20gspla'+'tData.appe'+'ndGSplatDa'+'ta',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x11*0xdf+-0x13e7+-0x28d*-0x2),_0x254ae5['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x254ae5['numSplats'])['toFixed'](-0x7db+-0xf3e*0x1+-0x57*-0x44)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20this.'+'updateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x12a8+0xcce+0x5dc),_0x254ae5['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),(_0xde1135=this['gsplatInst'+'ance'])==null||_0xde1135['updateInst'+'anceData'](this),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20updat'+'eInstanceD'+'ata',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x1cbc+-0x12f3+0x9c7*-0x1),_0x254ae5['numSplats']),this['asset']=_0x56ea6b,this['assetsMana'+'gerLoadedT'+'ime']=_0x4c6502,this['events']=_0x1ddcb4);}['fireAssets'+'ManagerTim'+'eIndex'](){var _0x511eeb;const _0x280106=this['assetsMana'+'gerLoadedT'+'ime'];console['log']('____\x20ENGIN'+'E\x20IVAN','fireAssets'+'ManagerTim'+'eIndex',_0x280106),(_0x511eeb=this['asset'])==null||_0x511eeb['fire']('setAssetsL'+'oaded',_0x280106);}['destroy'](){var _0x3f0964,_0x1473c8,_0x32dd45,_0x1488a7,_0xc7b68a,_0x5d8c0c,_0x27f1e7,_0xb5033c,_0x446017,_0x404523,_0x4b4b7c,_0x466ab9,_0x2dec08,_0x6ea1fb,_0x554be2,_0x321069,_0x201fc9,_0x3f9939,_0x37aabd,_0x55e665,_0x2785c8;(_0x3f0964=this['updateData'+'Worker'])==null||_0x3f0964['destroy'](),this['updateData'+'Worker']=void(0x13da+-0x10*-0x115+0x1*-0x252a),(_0x1473c8=this['colorTextu'+'re'])==null||_0x1473c8['destroy'](),(_0x32dd45=this['transformA'+'Texture'])==null||_0x32dd45['destroy'](),(_0x1488a7=this['transformB'+'Texture'])==null||_0x1488a7['destroy'](),(_0xc7b68a=this['transformR'+'Texture'])==null||_0xc7b68a['destroy'](),(_0x5d8c0c=this['transformM'+'otionTextu'+'re'])==null||_0x5d8c0c['destroy'](),(_0x27f1e7=this['transformL'+'ifecycleTe'+'xture'])==null||_0x27f1e7['destroy'](),(_0xb5033c=this['sh1to3Text'+'ure'])==null||_0xb5033c['destroy'](),(_0x446017=this['sh4to7Text'+'ure'])==null||_0x446017['destroy'](),(_0x404523=this['sh8to11Tex'+'ture'])==null||_0x404523['destroy'](),(_0x4b4b7c=this['sh12to15Te'+'xture'])==null||_0x4b4b7c['destroy'](),(_0x466ab9=this['colorTextu'+'re2'])==null||_0x466ab9['destroy'](),(_0x2dec08=this['transformA'+'Texture2'])==null||_0x2dec08['destroy'](),(_0x6ea1fb=this['transformB'+'Texture2'])==null||_0x6ea1fb['destroy'](),(_0x554be2=this['transformR'+'Texture2'])==null||_0x554be2['destroy'](),(_0x321069=this['transformM'+'otionTextu'+'re2'])==null||_0x321069['destroy'](),(_0x201fc9=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x201fc9['destroy'](),(_0x3f9939=this['sh1to3Text'+'ure2'])==null||_0x3f9939['destroy'](),(_0x37aabd=this['sh4to7Text'+'ure2'])==null||_0x37aabd['destroy'](),(_0x55e665=this['sh8to11Tex'+'ture2'])==null||_0x55e665['destroy'](),(_0x2785c8=this['sh12to15Te'+'xture2'])==null||_0x2785c8['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x5b7d51){var _0x3b33e9,_0x588b1d,_0x34f155,_0x2b795b,_0x294bdf,_0x38db9e,_0x531392,_0x42ac06,_0x2a72c3,_0x1e0904,_0x4d6f28,_0x56a636,_0x2860bb;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0x37c5c1=((_0x3b33e9=_0x5b7d51['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(-0x5*0x2f+-0xe77+0xb*0x166):_0x3b33e9['data'])??0x4*0x203+0x1dd4+-0x25e0,_0x5e07a9=((_0x588b1d=_0x5b7d51['getParamet'+'er']('uSplatScal'+'e'))==null?void(0x306*0xb+0xcd*0x6+-0x2610):_0x588b1d['data'])??0x272*-0xe+0x1e94+-0x1*-0x3a9,_0x26c318=((_0x34f155=_0x5b7d51['getParamet'+'er']('uSaturatio'+'n'))==null?void(0xbb9+0x1*-0x6d7+0x19*-0x32):_0x34f155['data'])??0x1be0+-0x2e7*-0x3+-0x2494,_0x6cfc35=((_0x2b795b=_0x5b7d51['getParamet'+'er']('uHueOffset'))==null?void(0xd*-0x194+0x1*-0xab+0x152f):_0x2b795b['data'])??0xbab+-0x5*0x509+0xd82,_0x2783c4=((_0x294bdf=_0x5b7d51['getParamet'+'er']('uInvertOpa'+'city'))==null?void(-0x19d3+0xdd*0x16+-0x35*-0x21):_0x294bdf['data'])??0x1052+0x1249+-0x229b*0x1,_0x6d28e9=((_0x38db9e=_0x5b7d51['getParamet'+'er']('uOpacity'))==null?void(-0xc2f*0x1+0x1cd6+0x57*-0x31):_0x38db9e['data'])??0x165f+-0x1345*-0x1+-0x29a3,_0x5d504b=((_0x531392=_0x5b7d51['getParamet'+'er']('clrOffset'))==null?void(0x2627+0x3*0x107+0x7*-0x5e4):_0x531392['data'])??[-0x1c99+0x705+0x1594,-0x4f*0x4d+-0x1*0x18b6+-0x3079*-0x1,0x1767*0x1+0x1e1*-0xd+0x106,0x5*-0x625+-0x1d1e+0x3bd8],_0x1f2344=((_0x42ac06=_0x5b7d51['getParamet'+'er']('clrScale'))==null?void(-0x5e*-0xd+0x37c*-0x2+0x232*0x1):_0x42ac06['data'])??[-0xcf*-0x25+-0x2ba*-0x2+-0x235e,-0x514+-0x295*-0xc+-0x19e7*0x1,0xe92+-0x2135*-0x1+0x17e3*-0x2,0x1f1f+0x135c*-0x1+-0xbc2],_0x1816fd=((_0x2a72c3=_0x5b7d51['getParamet'+'er']('uShapeN'))==null?void(-0x1b9f*-0x1+-0xe4*-0x1d+-0x3573*0x1):_0x2a72c3['data'])??-0x3*0x22f+0x101*-0x13+0x19a0,_0x2a932d=((_0x1e0904=_0x5b7d51['getParamet'+'er']('mode'))==null?void(0x49e*-0x1+0x153e*0x1+-0x10a0):_0x1e0904['data'])??0x1e65+-0x23fc+0x597*0x1,_0x1b035f=((_0x4d6f28=_0x5b7d51['getParamet'+'er']('ringSize'))==null?void(-0x5d2*0x5+-0x19d4+0x36ee):_0x4d6f28['data'])??-0x102f+0xe3b*0x1+-0x5*-0x64,_0x2d855f=((_0x56a636=_0x5b7d51['defines'])==null?void(-0x6e2*0x1+-0x1340+0x1a22):_0x56a636['get']('uOpenAnim'))??'0',_0xe45b1f=((_0x2860bb=_0x5b7d51['defines'])==null?void(-0x24f9+0x1700+0x1ff*0x7):_0x2860bb['get']('uControlCo'+'lorMode'))??'0';_0x5b7d51['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x5b7d51['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x5b7d51['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x5b7d51['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x5b7d51['setParamet'+'er']('uSplatScal'+'e',_0x5e07a9),_0x5b7d51['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0x37c5c1),_0x5b7d51['setParamet'+'er']('uSaturatio'+'n',_0x26c318),_0x5b7d51['setParamet'+'er']('uHueOffset',_0x6cfc35),_0x5b7d51['setParamet'+'er']('uInvertOpa'+'city',_0x2783c4),_0x5b7d51['setParamet'+'er']('uOpacity',_0x6d28e9),_0x5b7d51['setParamet'+'er']('clrOffset',_0x5d504b),_0x5b7d51['setParamet'+'er']('clrScale',_0x1f2344),_0x5b7d51['setParamet'+'er']('uShapeN',_0x1816fd),_0x5b7d51['setParamet'+'er']('mode',_0x2a932d),_0x5b7d51['setParamet'+'er']('ringSize',_0x1b035f),_0x5b7d51['setParamet'+'er']('prerenderC'+'Time',-0x7e4+0xfa+-0x3b*-0x1e),_0x5b7d51['setParamet'+'er']('renderSpac'+'e',-0x293+-0x407*-0x1+-0x16a),_0x5b7d51['setParamet'+'er']('endSpace',-0x13*-0x3+0xb3e+-0xf*0xc3),_0x5b7d51['setDefine']('uOpenAnim',_0x2d855f),_0x5b7d51['setDefine']('uControlCo'+'lorMode',_0xe45b1f),this['transformM'+'otionTextu'+'re']&&_0x5b7d51['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x5b7d51['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x5b7d51['setDefine']('SH_BANDS',this['shBands']),_0x5b7d51['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x5b7d51['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x5b7d51['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x5b7d51['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x5b7d51['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x404920){const _0x219ae0=Math['ceil'](Math['sqrt'](_0x404920)),_0x58c076=Math['ceil'](_0x404920/_0x219ae0);return new J(_0x219ae0,_0x58c076);}async['updateColo'+'rData'](_0x94d5eb){var _0x18215e;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x5a6b46=this['colorTextu'+'re2'];if(!_0x5a6b46||this['isDestroye'+'d'])return;const _0x4b5f4b=_0x94d5eb['getProp']('f_dc_0'),_0x22346d=_0x94d5eb['getProp']('f_dc_1'),_0x452b6d=_0x94d5eb['getProp']('f_dc_2'),_0x41399f=_0x94d5eb['getProp']('opacity');let _0x4b38c8=(_0x18215e=_0x94d5eb['transformD'+'ata'])==null?void(0x2519+0xb1f+0x3038*-0x1):_0x18215e['dataColor'];_0x4b38c8||(_0x4b38c8=await this['updateData'+'Worker']['updateColo'+'rData'](_0x94d5eb['numSplats'],_0x4b5f4b,_0x22346d,_0x452b6d,_0x41399f)),await this['idleUpdate'+'TexturePro'+'mise'](_0x5a6b46,_0x4b38c8);}async['getTransfo'+'rmDataByWo'+'rker'](_0x57bd29){var _0x7a9fcd;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0x7a9fcd=_0x57bd29['transformD'+'ata'])!=null&&_0x7a9fcd['dataCenter'+'s'])return{'centers':_0x57bd29['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x57bd29['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x57bd29['transformD'+'ata']['dataScale'],'dataRotation':_0x57bd29['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x57bd29['transformD'+'ata']['dataMotion'],'dataTime':_0x57bd29['transformD'+'ata']['dataTime'],'motion':_0x57bd29['transformD'+'ata']['motion'],'tScaleArray':_0x57bd29['transformD'+'ata']['tScaleArra'+'y']};const _0x2709f2=_0x57bd29['getProp']('x'),_0x530272=_0x57bd29['getProp']('y'),_0xdc3522=_0x57bd29['getProp']('z'),_0x3574c6=_0x57bd29['getProp']('rot_1'),_0x4c625f=_0x57bd29['getProp']('rot_2'),_0x263533=_0x57bd29['getProp']('rot_3'),_0x193865=_0x57bd29['getProp']('rot_0'),_0x720583=_0x57bd29['getProp']('motion_0'),_0x41f77c=_0x57bd29['getProp']('motion_1'),_0xc6bb43=_0x57bd29['getProp']('motion_2'),_0x754e46=_0x57bd29['getProp']('scale_0'),_0x20f1cd=_0x57bd29['getProp']('scale_1'),_0x1319a1=_0x57bd29['getProp']('scale_2'),_0x1e6946=_0x57bd29['getProp']('t'),_0x337b67=_0x57bd29['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x57bd29['numSplats'],this['is4D'],_0x2709f2,_0x530272,_0xdc3522,_0x3574c6,_0x4c625f,_0x263533,_0x193865,_0x720583,_0x41f77c,_0xc6bb43,_0x754e46,_0x20f1cd,_0x1319a1,_0x1e6946,_0x337b67);}async['updateTran'+'sformFromD'+'ata'](_0x4e8718){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x4e8718['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x4e8718['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x4e8718['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x4e8718['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x4e8718['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x11fbcb,_0x2f9216){if(!this['isDestroye'+'d'])return new Promise(_0x4d041a=>{requestIdleCallback(()=>{const _0x4eea91=_0x11fbcb['lock']();_0x4eea91==null||_0x4eea91['set'](_0x2f9216),_0x11fbcb['unlock'](),_0x4d041a(!(0xc10+0x1fdf+0x1*-0x2bef));},{'timeout':0x12c});});}async['updateTran'+'sformData'](_0x156794){var _0x140663,_0x3e4608,_0x1cadbf,_0x4310c1;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformData'),this['isDestroye'+'d'])return;const _0x3ae318=Tn['float2Half'];if(!this['transformA'+'Texture'])return;const _0x2a1710=this['transformA'+'Texture']['lock'](),_0x3dbc4a=this['transformR'+'Texture']['lock'](),_0x9b55b2=this['transformB'+'Texture']['lock'](),_0x1893ac=(_0x140663=this['transformM'+'otionTextu'+'re'])==null?void(0x2237+-0x48*0x15+0x1*-0x1c4f):_0x140663['lock'](),_0x3a32dd=(_0x3e4608=this['transformL'+'ifecycleTe'+'xture'])==null?void(-0xcf1*-0x2+0xd78+-0x275a):_0x3e4608['lock'](),_0x2c7694=new D(),_0x5d6677=new le(),_0x8e4500=new D(),_0x335605=new D(),_0x196d46=_0x156794['createIter'](_0x2c7694,_0x5d6677,_0x8e4500,null,_0x335605),_0x223552=_0x156794['getProp']('t'),_0x33190b=_0x156794['getProp']('t_scale');for(let _0xd734a1=0x10ed+-0xb0+-0x103d;_0xd734a1<_0x156794['numSplats'];_0xd734a1++)_0x196d46['read'](_0xd734a1),_0x5d6677['normalize'](),_0x5d6677['w']<0x3ca*-0x3+-0x2396+0x2ef4&&_0x5d6677['mulScalar'](-(-0x7*0x181+-0x1768+0x1*0x21f0)),_0x2a1710[_0xd734a1*(-0x5f2*-0x1+-0x156d+-0x3*-0x52a)+(0x15d0+0x1d*-0x4b+0x1*-0xd51)]=_0x2c7694['x'],_0x2a1710[_0xd734a1*(-0x25bb+0x17*-0xef+0xa3*0x5d)+(-0x1d*0x79+0x468*0x1+0x94e)]=_0x2c7694['y'],_0x2a1710[_0xd734a1*(-0xbe*-0x30+0xe*-0x1ef+-0x88b)+(-0x18a9+-0x2519+0x3dc4)]=_0x2c7694['z'],_0x9b55b2[_0xd734a1*(-0x10*0x1b4+-0x1909+0x344c)+(0x179*-0x1+-0x2101+0x2*0x113d)]=_0x3ae318(_0x8e4500['x']),_0x9b55b2[_0xd734a1*(0x22ce+-0x1987+-0x944)+(0x39b+0xa*0x250+-0x1aba)]=_0x3ae318(_0x8e4500['y']),_0x9b55b2[_0xd734a1*(0x1*0x1ee+-0xf58+-0xd6d*-0x1)+(-0x109*-0x2+0xcff+0x303*-0x5)]=_0x3ae318(_0x8e4500['z']),_0x3dbc4a[_0xd734a1*(0x21ff*0x1+-0x1*0x221+-0x1fdb)+(-0x15b6+-0x2593*-0x1+-0xfdd)]=_0x5d6677['x'],_0x3dbc4a[_0xd734a1*(0x454+-0x2311+-0x2*-0xf60)+(-0x114a+0x61f*-0x6+-0x3605*-0x1)]=_0x5d6677['y'],_0x3dbc4a[_0xd734a1*(0x1de2+0xb9*-0x2b+0x134)+(0x1be4+-0xed6+-0xd0c)]=_0x5d6677['z'],this['is4D']&&_0x1893ac&&_0x3a32dd&&(_0x1893ac[_0xd734a1*(0x22d*-0x1+-0x207c+0x22ac)+(0x20*-0x11f+0x18af+0x3*0x3bb)]=_0x335605['x'],_0x1893ac[_0xd734a1*(-0x24b+-0xb3*0x2+0x3b4)+(-0x22f*-0x1+-0xd64*-0x2+-0x2a2*0xb)]=_0x335605['y'],_0x1893ac[_0xd734a1*(0x266*-0x7+0x448+0xc85*0x1)+(0x2088+-0x2525+-0xd*-0x5b)]=_0x335605['z'],_0x3a32dd[_0xd734a1*(-0xc5e*0x1+-0x23da+0x303b)+(-0x1932+0xc*0x50+0x3d*0x5a)]=_0x223552?_0x223552[_0xd734a1]:0x2688+0x14f+-0x7*0x5b1,_0x3a32dd[_0xd734a1*(-0x8ff*-0x1+-0x21d5+0x18d9)+(0xcce*0x3+0x257b+-0x4be4)]=_0x33190b?Math['exp'](_0x33190b[_0xd734a1]):0xa7b*-0x1+-0x1*-0x2705+-0x1c8a);this['transformA'+'Texture']['unlock'](),this['transformB'+'Texture']['unlock'](),this['transformR'+'Texture']['unlock'](),(_0x1cadbf=this['transformM'+'otionTextu'+'re'])==null||_0x1cadbf['unlock'](),(_0x4310c1=this['transformL'+'ifecycleTe'+'xture'])==null||_0x4310c1['unlock']();}async['updateSHDa'+'ta'](_0x5163f5){var _0x2e0943,_0x441fb,_0x457c46,_0x179db2,_0x44cee7,_0x24b82a,_0x5209da,_0x4e95ca;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x3f9446=(_0x2e0943=this['sh1to3Text'+'ure2'])==null?void(0x1f9*-0xa+0x12c4*-0x1+-0x17b*-0x1a):_0x2e0943['lock'](),_0x2ccd39=(_0x441fb=this['sh4to7Text'+'ure2'])==null?void(0x1*0x17c5+0xfb7+-0x13be*0x2):_0x441fb['lock'](),_0x11a1b4=(_0x457c46=this['sh8to11Tex'+'ture2'])==null?void(0x101*0x7+-0x22*0x8+-0x1fd*0x3):_0x457c46['lock'](),_0x6e59ea=(_0x179db2=this['sh12to15Te'+'xture2'])==null?void(0xb*-0x147+0xd98+-0x75*-0x1):_0x179db2['lock'](),_0x2ac2c4={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x4d3281=$_(_0x5163f5,_0x2ac2c4*(-0xde5+0xd*0x29+0xbd3)),_0x10a1cb=0xb4e+0x7*0x101+-0xa56,_0x7a8e7a=-0x5*-0x753+0x141f+-0x34bf*0x1,_0x1da885=new Float32Array(-0x1*0x20d3+0x2570+-0x4*0x127),_0x2622f0=new Uint32Array(_0x1da885['buffer']),_0x53a11e=new Array(_0x2ac2c4*(-0x4bc+0x7bc*-0x2+0x1437))['fill'](-0x1*0x1d75+-0x1365+-0xd*-0x3c2);for(let _0x545874=-0x14d8+-0x35*0x3b+0x193*0x15;_0x545874<_0x5163f5['numSplats'];++_0x545874){for(let _0x4a53f8=0x3*0x5a7+-0x411*0x5+0x360;_0x4a53f8<_0x2ac2c4;++_0x4a53f8)_0x53a11e[_0x4a53f8*(0x7cd*0x2+-0x967+-0x630)]=_0x4d3281[_0x4a53f8][_0x545874],_0x53a11e[_0x4a53f8*(0x1*0x1b8d+-0x4*0x685+-0x176)+(-0x9*-0x1c3+-0xa96*-0x3+0x4*-0xbe7)]=_0x4d3281[_0x4a53f8+_0x2ac2c4][_0x545874],_0x53a11e[_0x4a53f8*(-0x106f+-0x40*-0x2+0xff2)+(-0x74*0x22+0x361+0xc09)]=_0x4d3281[_0x4a53f8+_0x2ac2c4*(-0x3*-0x13d+0x1265*0x1+-0x161a)][_0x545874];let _0x2abe56=_0x53a11e[0x79f*0x5+-0x3e5*-0x1+-0x2a00];for(let _0x4fc09d=-0x132*-0x11+0xec3+-0x2314;_0x4fc09d<_0x2ac2c4*(0x786*-0x1+-0x10f8+0x1881);++_0x4fc09d)_0x2abe56=Math['max'](_0x2abe56,Math['abs'](_0x53a11e[_0x4fc09d]));if(_0x2abe56!==-0x20a5+-0x137*-0x5+0xb3*0x26){for(let _0x4db993=-0x1afb+0x17ac+0x34f;_0x4db993<_0x2ac2c4;++_0x4db993)_0x53a11e[_0x4db993*(-0x1141*0x1+-0x21b8+0x32fc)+(-0x37e+0x22fd+-0xb*0x2dd)]=Math['max'](0x1cb*-0x2+0xd2d*0x1+-0x5*0x1eb,Math['min'](_0x10a1cb,Math['floor']((_0x53a11e[_0x4db993*(0x5*0x5c2+0x16aa*0x1+-0x3371*0x1)+(0x1b27+0x1550+-0x3077)]/_0x2abe56*(-0x26*-0x3b+0x53a+-0x166*0xa+0.5)+(-0x11a*0x1d+-0x101f*0x2+0x2*0x2018+0.5))*_0x10a1cb+(-0xf26+-0x6c6*-0x5+-0x12b8+0.5)))),_0x53a11e[_0x4db993*(-0x17*0x83+-0x22c3*0x1+0x94f*0x5)+(0x1*-0x959+-0x1a4a+-0x8e9*-0x4)]=Math['max'](0xcd+0xe21+-0xeee,Math['min'](_0x7a8e7a,Math['floor']((_0x53a11e[_0x4db993*(0x5ed+0x481*-0x5+-0x1*-0x109b)+(0x6b8+-0x4dd*-0x7+0x1461*-0x2)]/_0x2abe56*(-0x1af0+0x6*0x5b5+-0x74e+0.5)+(-0x1*0x686+0x1*-0xe1e+-0x2*-0xa52+0.5))*_0x7a8e7a+(0x25a0+0x1cf6*0x1+-0x766*0x9+0.5)))),_0x53a11e[_0x4db993*(-0x2218+-0x1f20+0x1*0x413b)+(-0x2658+-0x1*0x295+-0x3*-0xda5)]=Math['max'](-0x1db3+0x639*0x2+0x277*0x7,Math['min'](_0x10a1cb,Math['floor']((_0x53a11e[_0x4db993*(-0x2062+0x8c4+0x17a1)+(-0x1e73+-0x23fd+0x15*0x32a)]/_0x2abe56*(-0x4*0x139+0x1f1f+-0x11*0x18b+0.5)+(-0x209f+0x223c+-0x19d*0x1+0.5))*_0x10a1cb+(0xffc+-0x229+-0xdd3+0.5))));_0x1da885[0x994*-0x4+0x1831+0xe1f]=_0x2abe56,_0x3f9446[_0x545874*(-0x16cf+-0x1949+-0x4*-0xc07)+(0x2*-0xef9+-0x10f*0x17+0x364b)]=_0x2622f0[-0x794+-0xa*0x75+0xc26*0x1],_0x3f9446[_0x545874*(-0x3*0x9db+0x2*0x108d+-0x11*0x35)+(-0x13fa+0x1437+-0x3*0x14)]=_0x53a11e[0x1a42+-0x17aa+0x2*-0x14c]<<0x2499+-0x730+-0x1*0x1d54|_0x53a11e[-0x33*0xa4+-0x20a8+0xdf*0x4b]<<-0x22ed+-0x6*0x5bf+0x3*0x1726|_0x53a11e[0x1*0x1459+0x6*0x62c+-0x395f*0x1],_0x3f9446[_0x545874*(-0x1161+-0x1a63+-0x15e4*-0x2)+(-0x11ce*-0x1+-0x10dc+-0xf0)]=_0x53a11e[-0x13*0x116+0x1*0x2653+-0x11ae]<<0x32f*0x5+-0x901*-0x2+-0x21d8|_0x53a11e[0x91e*0x3+-0x6c6+-0x1490]<<-0x1058+-0x2271+0x2*0x196a|_0x53a11e[-0xd36+-0x16c0+0x23fb],_0x3f9446[_0x545874*(0x1865*-0x1+0x3*0x10f+0x9*0x25c)+(-0x1c07+-0x18d1*-0x1+0x3*0x113)]=_0x53a11e[-0x1f9e+0x62c+-0x146*-0x14]<<0xd2e+0x251f+0x1*-0x3238|_0x53a11e[0x18f1+0x22e+0x4*-0x6c6]<<-0x13b+-0x1e13+0x1f59|_0x53a11e[0x817*0x2+-0x5*0x535+0x9e3],this['shBands']>-0x1993+-0xb53*0x3+0x3b8d&&(_0x2ccd39[_0x545874*(-0x248c+-0x3d*-0x13+0x2009)+(-0x4*-0x792+0x70b+-0x27d*0xf)]=_0x53a11e[0x1eb+-0x1*-0x213b+-0x231d]<<0x7*-0x33b+0x1*0x222b+-0xb79|_0x53a11e[0x1743+-0x2107+0x9ce]<<0x7*0xf5+0x5ae*-0x1+0x2*-0x7d|_0x53a11e[-0x22c5+0x35a+0x2*0xfbb],_0x2ccd39[_0x545874*(0xc34+-0x59b+-0x695)+(0x17a3+0x3e1*-0x9+0xb47*0x1)]=_0x53a11e[-0x1f36+0x4ba+-0x46c*-0x6]<<0x17f5+-0x1e9*0x1+-0x15f7|_0x53a11e[-0x109a*0x2+-0x184b*0x1+0x398c]<<0x20ef+0x6d2+-0x256*0x11|_0x53a11e[-0xf62+0x18f4+0x3a*-0x2a],_0x2ccd39[_0x545874*(0xb9*0x4+-0xac3+0x7e3)+(-0x13dd+0xb*0x177+0x3c2)]=_0x53a11e[-0x536*0x7+-0x1*0x13c3+0x384c]<<-0x1*0x303+0x105c+-0xd44|_0x53a11e[0x5*-0x6fd+-0x3*0x255+0x2a00]<<-0x1*0x1516+0x1e4b+-0x92a|_0x53a11e[-0x1fbd+0x1f2f+-0x1*-0x9f],_0x2ccd39[_0x545874*(0x13f*-0xb+-0x1480+0x2239)+(0x1f55+-0x12dd*-0x2+-0x450c)]=_0x53a11e[-0xb33+-0x2f*0x23+0x2*0x8d9]<<-0x687+0xfe3+-0x947|_0x53a11e[0x1f63+0x6a*0x22+-0x2d64]<<0x20ed+0x9bf*0x2+-0x3460|_0x53a11e[-0x10ff*0x2+-0x5da+0x16d*0x1c],this['shBands']>0x2c*0x1a+-0x5e*-0x27+-0x12c8?(_0x11a1b4[_0x545874*(-0xbf8+-0x1bd9+0x27d5)+(0xf35+-0xfb6+-0x1*-0x81)]=_0x53a11e[0x24fa+0xcb+-0x43*0x90]<<0x4*0x7b1+0x38d+-0x223c|_0x53a11e[-0x28*-0xd+0x20ca+-0x22bc]<<-0x4*0x8ad+-0xd01+0x2fc0|_0x53a11e[-0xe*0xbb+0x3*0x84f+-0xe9c],_0x11a1b4[_0x545874*(0x4*0x503+-0x256a+0x2*0x8b1)+(-0x2138+0x9d*0x25+0xa88)]=_0x53a11e[0x4*0x79b+0x2*-0xe3a+-0x1e0]<<-0x16*0x9e+-0x1d95+-0x5*-0x8a6|_0x53a11e[0x1304+-0xce0+0x5b*-0x11]<<0x7*0x1f6+-0x1ad*-0xf+-0x26d2|_0x53a11e[0x1*-0x2241+-0x3d2*0x6+0x3947],_0x11a1b4[_0x545874*(-0x151*0x2+-0xa6a+0xd10)+(0x180d+0x25cd+-0xf76*0x4)]=_0x53a11e[-0x3*-0x419+0x846+-0x1b*0xc2]<<0x1976+-0x2ab+-0x16b6|_0x53a11e[0xe57*0x1+-0x1d*-0x5+0x3b3*-0x4]<<-0x444+0x24da+-0x3*0xad9|_0x53a11e[-0x12bc+-0x2*-0xc07+0x1*-0x535],_0x11a1b4[_0x545874*(0x1*-0xdda+0x1709+-0x92b*0x1)+(0x15+0x13c3+-0x13d5)]=_0x53a11e[-0x1*0x21fb+0x2*-0x126b+0x46ef]<<0xea9*-0x1+0x303*0xa+0x4*-0x3d8|_0x53a11e[-0x864+0x2dc*0x2+0xd*0x37]<<0x30d+-0x1fc0+-0x1cbe*-0x1|_0x53a11e[0x4*-0x3bc+-0x16b6+0x25c6],_0x6e59ea[_0x545874*(-0x251f+0x107c+-0x14a7*-0x1)+(0x1114*-0x2+-0x1*0x1ea2+0x1*0x40ca)]=_0x53a11e[-0x1*0x157b+0xbfe+0x2*0x4cf]<<0x1*-0x1f8e+0x2185*-0x1+0x4128|_0x53a11e[-0x9d*0x2+-0x1*0x8df+0x123*0x9]<<0xab5*-0x1+-0x1*0x91d+0x13dd|_0x53a11e[-0x1414+-0x537+0x196e],_0x6e59ea[_0x545874*(0x1913+0xa3*0x33+-0xe*0x41c)+(0xb2a+-0xb4c+0x5*0x7)]=_0x53a11e[-0x1*0x13f9+-0xa25*0x2+0x2867]<<-0xc79+0x1e66+-0x23b*0x8|_0x53a11e[-0x1478+0xaba+0x9e3]<<0x1*-0x1a06+0xcfb+-0x43*-0x32|_0x53a11e[0xec2*0x1+-0xd3*-0x25+-0x2d1b],_0x6e59ea[_0x545874*(-0x272*0x3+-0x7*-0x22d+-0x7e1)+(-0x242d+0x3d*-0x9f+0x4a12)]=_0x53a11e[-0x24c3+-0x1c9b*0x1+0x4185]<<-0x1ac9*0x1+-0x3b*-0x97+-0x7ef|_0x53a11e[-0x21dc+-0x3*-0x571+0x287*0x7]<<-0x1b55+-0xb*-0x7f+-0x1*-0x15eb|_0x53a11e[-0x7*-0xba+-0xd64+0x877],_0x6e59ea[_0x545874*(-0x1*-0x35e+0x230b+-0x2665)+(-0x132f+0x6b3+0xc7f)]=_0x53a11e[0x52*-0x42+-0x1d03+-0x1*-0x3251]<<0x1a2+0x1181*-0x2+0x2175|_0x53a11e[-0x1aef*0x1+-0x3c8+0xf71*0x2]<<0x1d6a+-0x1f5c+0x1*0x1fd|_0x53a11e[-0x419+0x15a8+-0x1*0x1163]):_0x11a1b4[_0x545874]=_0x53a11e[0x3*-0x4b5+0x1*-0x1b59+0x298d]<<-0x2*-0xd3a+0x1*-0x25b4+0xb55|_0x53a11e[0x2284+-0x1*0x38b+-0x1ee3*0x1]<<0x10cc+-0x8f*0x20+0x29*0x7|_0x53a11e[0x3*-0xcb2+0x1*0x210a+0x523]);}}(_0x44cee7=this['sh1to3Text'+'ure2'])==null||_0x44cee7['unlock'](),(_0x24b82a=this['sh4to7Text'+'ure2'])==null||_0x24b82a['unlock'](),(_0x5209da=this['sh8to11Tex'+'ture2'])==null||_0x5209da['unlock'](),(_0x4e95ca=this['sh12to15Te'+'xture2'])==null||_0x4e95ca['unlock']();}async['updateSHDa'+'taByWorker'](_0x270388){var _0x24a8b8,_0xa54f61,_0x15abad,_0x17fb1c,_0x1f2098;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x41f6c4={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x344e69,_0x28ed56,_0x6b2ad9,_0x182c4a;if((_0x24a8b8=_0x270388['transformD'+'ata'])!=null&&_0x24a8b8['sh1to3Data'])_0x344e69=(_0xa54f61=_0x270388['transformD'+'ata'])==null?void(-0x2ad+-0x715*0x1+0x9c2):_0xa54f61['sh1to3Data'],_0x28ed56=(_0x15abad=_0x270388['transformD'+'ata'])==null?void(-0x19b0+0x3*-0x692+0x2d66):_0x15abad['sh4to7Data'],_0x6b2ad9=(_0x17fb1c=_0x270388['transformD'+'ata'])==null?void(0x6*0x31a+-0xfc*-0x23+-0x3510):_0x17fb1c['sh8to11Dat'+'a'],_0x182c4a=(_0x1f2098=_0x270388['transformD'+'ata'])==null?void(-0x163d+-0x1eb*0x14+-0x1*-0x3c99):_0x1f2098['sh12to15Da'+'ta'];else{const _0x12563d=$_(_0x270388,_0x41f6c4*(-0x13f5+0xf*0xe9+0x651)),_0xa6e812=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x270388['numSplats'],this['shBands'],_0x12563d);_0x344e69=_0xa6e812['sh1to3Data'],_0x28ed56=_0xa6e812['sh4to7Data'],_0x6b2ad9=_0xa6e812['sh8to11Dat'+'a'],_0x182c4a=_0xa6e812['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x344e69),this['shBands']>0x2*-0x9a9+-0x2*0xffb+0x3349&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x28ed56),this['shBands']>0x1*0x1e91+-0x1*0x1195+-0xcfa?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x6b2ad9),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x182c4a)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x6b2ad9));}}async function HA(){const _0x1652eb=new Float32Array(-0x2128+-0xe*-0x2c8+-0x5c7);new Int32Array(_0x1652eb['buffer']);let _0x1783cd=null,_0x3ccb69=null,_0x2a81d8=null,_0x46150b=null,_0x57cfe7=null,_0x870eb1=null,_0x1a92b8=null,_0x46ab42=null;self['onmessage']=async _0x3a5e3c=>{const {data:_0x20ce08}=_0x3a5e3c;switch(_0x20ce08['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x52abc0(_0x20ce08['numSplats'],_0x20ce08['shBands'],_0x20ce08['SHData']);break;case'updateTran'+'sformData':_0x7255f1(_0x20ce08['numSplats'],_0x20ce08['is4D'],_0x20ce08['position'],_0x20ce08['rotation'],_0x20ce08['motion'],_0x20ce08['scale'],_0x20ce08['muT'],_0x20ce08['tScale']);break;case'destroyWor'+'ker':_0x342f8b();break;}};const _0x7255f1=(_0x140ab7,_0x258579,_0x32b117,_0x22d460,_0xf6a6b9,_0x1fe796,_0x28ed9b,_0xaabb66)=>{_0x342f8b(),_0x258579&&(_0x3ccb69=new Float32Array(_0x140ab7*(0x13e4+-0x821*-0x1+0x1de*-0xf)),_0x46ab42=new Float32Array(_0x140ab7),_0x57cfe7=new Float32Array(_0xf6a6b9['buffer']['slice']()),_0x1a92b8=new Float32Array(_0xf6a6b9['buffer']['slice']())),_0x46150b=new Float32Array(_0x32b117['buffer']['slice']()),_0x1783cd=new Float32Array(_0x32b117['buffer']['slice']()),_0x870eb1=new Uint16Array(_0x1fe796['buffer']['slice']()),_0x2a81d8=new Float32Array(_0x22d460['buffer']['slice']());for(let _0x26ae85=-0x7*-0x3be+-0x5bf*-0x3+0x2b6f*-0x1;_0x26ae85<_0x140ab7;_0x26ae85++)_0x258579&&_0x3ccb69&&(_0x46ab42[_0x26ae85]=_0xaabb66?Math['exp'](_0xaabb66[_0x26ae85]):-0x14e3+0x4*-0x632+-0x9*-0x513,_0x3ccb69[_0x26ae85*(0xb48+0x1ee9+-0x2a2e)+(0x5c*0x23+-0x1*-0x18c2+-0x76*0x51)]=_0x28ed9b?_0x28ed9b[_0x26ae85]:-0x3ce+0x1b*-0xad+0x469*0x5,_0x3ccb69[_0x26ae85*(-0x1877*-0x1+-0x39*-0x1+-0x1*0x18ad)+(-0xea5*-0x1+0x26*-0x62+-0x18)]=_0x46ab42[_0x26ae85]);const _0x3cda10=[_0x1783cd['buffer'],_0x46150b['buffer'],_0x870eb1['buffer'],_0x2a81d8['buffer']];_0x258579&&_0x3cda10['push'](_0x57cfe7['buffer'],_0x3ccb69['buffer'],_0x1a92b8['buffer'],_0x46ab42['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x1783cd,'dataPosition':_0x46150b,'dataScale':_0x870eb1,'dataRotation':_0x2a81d8,'dataMotion':_0x57cfe7,'dataTime':_0x3ccb69,'motion':_0x1a92b8,'tScaleArray':_0x46ab42},_0x3cda10);},_0x52abc0=(_0x17cbe3,_0x47247a,_0x396bc8)=>{const _0x2e7ce9=new Uint32Array(_0x17cbe3*(0xa4b*-0x1+-0x17e8+-0x2237*-0x1)),_0x3e3a92=new Uint32Array(_0x17cbe3*(-0x70a+0x1ba2+-0x3*0x6dc)),_0xd6045=new Uint32Array(_0x17cbe3*(0x18f+-0xa17+0x223*0x4)),_0x2d0e3a=new Uint32Array(_0x17cbe3*(0x5d6+0x1ec7+-0x2499)),_0x927b2c={0x1:0x3,0x2:0x8,0x3:0xf}[_0x47247a],_0x4d4458=_0x396bc8,_0x281841=0xb8e*-0x1+0x68f+0xcfe,_0x59d7dd=0x1*-0x8cb+0x1913+-0xc49,_0x460949=new Float32Array(0x11ed+0x1163*-0x1+-0x89*0x1),_0x498d32=new Uint32Array(_0x460949['buffer']),_0x38fa1b=new Array(_0x927b2c*(-0xe89+0xdf5+0x97))['fill'](0x20e4*0x1+-0x1082+-0x1062);for(let _0x347287=-0x517+-0x35*-0x7+0x3a4*0x1;_0x347287<_0x17cbe3;++_0x347287){for(let _0x4e9d91=-0x16f0+0x2b*-0xd7+0x3b0d;_0x4e9d91<_0x927b2c;++_0x4e9d91)_0x38fa1b[_0x4e9d91*(-0x3b*0x8b+-0x1ee7+-0x3ef3*-0x1)]=_0x4d4458[_0x4e9d91][_0x347287],_0x38fa1b[_0x4e9d91*(0xb0a+0x20d9*-0x1+0x15d2)+(-0x64+0x49*-0x3b+-0x227*-0x8)]=_0x4d4458[_0x4e9d91+_0x927b2c][_0x347287],_0x38fa1b[_0x4e9d91*(-0x96*-0x1d+0x2270+-0x336b*0x1)+(0x295*0xa+-0x1*-0x67d+-0x204d)]=_0x4d4458[_0x4e9d91+_0x927b2c*(0xe*-0x7b+-0x3*0xb8f+0x2969*0x1)][_0x347287];let _0x40d952=_0x38fa1b[-0x9cf+-0x2*0xa8f+0x1eed];for(let _0x38a307=-0x71f+0x5f7+0x129;_0x38a307<_0x927b2c*(0x1b96*-0x1+-0x1*0xec3+0x2a5c);++_0x38a307)_0x40d952=Math['max'](_0x40d952,Math['abs'](_0x38fa1b[_0x38a307]));if(_0x40d952!==0xb*0x233+0x411+-0x1c42){for(let _0x4d756b=-0xddf+-0xea2+0x1*0x1c81;_0x4d756b<_0x927b2c;++_0x4d756b)_0x38fa1b[_0x4d756b*(0xca6*-0x2+-0x629*-0x1+0x1326)+(0x2059+0x1277*-0x2+-0x45*-0x11)]=Math['max'](0x9fc*0x3+0x1d1b+0x3b0f*-0x1,Math['min'](_0x281841,Math['floor']((_0x38fa1b[_0x4d756b*(0xd*-0x2b1+-0x2b7*0xb+-0x267*-0x1b)+(0x83*0x4a+0x1e78+-0x4456)]/_0x40d952*(-0xb08*-0x2+-0x102e*0x2+0xa4c+0.5)+(0xb51*-0x3+-0x15d9+0x37cc+0.5))*_0x281841+(-0x18f5*0x1+0x2521+-0xc2c*0x1+0.5)))),_0x38fa1b[_0x4d756b*(0x23c9+0x255a+-0x4920)+(0x1d10+0x1999*0x1+-0x36a8)]=Math['max'](-0xfc0+-0x32*0x8f+0x2bae,Math['min'](_0x59d7dd,Math['floor']((_0x38fa1b[_0x4d756b*(0x2437*-0x1+-0x1022+0x345c)+(0x1435*0x1+0x1fa2+0x5*-0xa5e)]/_0x40d952*(-0x368+0x58*-0x6e+0x2938+0.5)+(-0x1595+0x2678+-0x10e3+0.5))*_0x59d7dd+(-0xa6*-0x13+-0x1808+0xbb6+0.5)))),_0x38fa1b[_0x4d756b*(-0x20b*-0xe+0x3a7*-0x7+-0x102*0x3)+(-0x73b+-0x1ebb+0x25f8)]=Math['max'](-0xd4*0x2b+0x6*-0x19b+0x2d3e,Math['min'](_0x281841,Math['floor']((_0x38fa1b[_0x4d756b*(-0x799*-0x5+-0x2af*-0xd+-0x48dd)+(-0x23ec+0x2474+0x2*-0x43)]/_0x40d952*(-0x61*0x1f+0x189d*0x1+-0x12*0xb7+0.5)+(0x1ab0+0xe9b+-0x1f*0x155+0.5))*_0x281841+(0x25*-0x3b+0x1*0x57+-0x106*-0x8+0.5))));_0x460949[-0x1fc*-0x1+0x35*0x2b+-0xae3*0x1]=_0x40d952,_0x2e7ce9[_0x347287*(-0xe6*-0x9+-0x2*-0xa6f+0x73c*-0x4)+(-0xd*-0x22f+0x13ff+-0x2*0x1831)]=_0x498d32[-0x1*0x1c64+0x1845+0x41f*0x1],_0x2e7ce9[_0x347287*(-0x1*-0x4ca+0x35*0xac+0x1431*-0x2)+(0x411*-0x1+0x15*-0x65+0xc5b)]=_0x38fa1b[0x11db*0x1+-0x864+-0x1*0x977]<<0x455*-0x1+0x1d23*0x1+-0x18b9|_0x38fa1b[-0x1*0x1f55+-0x2a*-0xa3+0x498]<<0x147f+-0x105a+-0x1*0x41a|_0x38fa1b[-0x1037*-0x2+0x1bf7+-0x3*0x1421],_0x2e7ce9[_0x347287*(0x1fd4+0x2507*0x1+-0x44d7)+(0x11*0x9b+0xbcb*0x3+-0x2daa)]=_0x38fa1b[-0x1*-0x1167+-0x23f4+-0x16*-0xd8]<<0xb97+-0x28d+-0x1*0x8f5|_0x38fa1b[0x200+-0x683*0x3+-0x1*-0x118d]<<-0x287*-0xa+-0x1*-0x2644+0xcb3*-0x5|_0x38fa1b[0x7b7+0x1*0x1381+-0x1*0x1b33],_0x2e7ce9[_0x347287*(0x118d+-0x24c1+0x1338)+(-0x487+-0x7*-0x589+-0x2235)]=_0x38fa1b[0x487+0x14e*0x13+-0x1d4b]<<0x25*0xad+-0x1be+-0x56*0x45|_0x38fa1b[-0x89+0x5ca+-0x53a]<<0x2*0x631+-0x912+0x9*-0x5d|_0x38fa1b[0x59a+0xd79+-0x130b],_0x47247a>-0x1*0x1e65+-0xa*-0x119+0x136c&&(_0x3e3a92[_0x347287*(-0xa50+0x183+-0x25*-0x3d)+(-0x16*-0x11f+0x208e+0x2*-0x1c9c)]=_0x38fa1b[-0x144c+-0x20c0+0x1*0x3515]<<0x203a+-0x21c5+0x1a0|_0x38fa1b[-0x2053+-0x1daf+0x3e0c]<<-0x2d3*0x1+-0x1c53+0x5*0x63d|_0x38fa1b[0x19*-0x70+0x1*-0x209b+0x2b96*0x1],_0x3e3a92[_0x347287*(-0xa16+-0x3*-0x7fa+-0xdd4)+(-0x69*-0x10+-0x1956+0x12c7)]=_0x38fa1b[-0xeae*-0x1+-0x114b+-0x3*-0xe3]<<-0x1*-0x35a+0xdaf*-0x2+-0xc7*-0x1f|_0x38fa1b[-0xd0*-0xd+0x1cb2*0x1+-0x1*0x2735]<<-0xb6d+0x1bfd+-0x1085*0x1|_0x38fa1b[-0x7b7+0x172b*0x1+0x2*-0x7b3],_0x3e3a92[_0x347287*(-0x1*0xd4b+0x159+-0xbf6*-0x1)+(-0x1039+-0x16ba*-0x1+-0x67f)]=_0x38fa1b[-0x152e+0x1282+0x2bb]<<-0x270+0x19d3*0x1+-0x2*0xba7|_0x38fa1b[-0x26b9+-0x14fb*0x1+0x3fc*0xf]<<-0x16a*0x3+-0x1439+-0x1882*-0x1|_0x38fa1b[0x1*0x1269+0x40d*-0x1+-0xe4b*0x1],_0x3e3a92[_0x347287*(0x7ba+-0x20e5+-0x7*-0x399)+(0x487+0x1fab*-0x1+0x1b27)]=_0x38fa1b[-0xa2+0x2*-0xfe+-0x56*-0x8]<<0x189f+0x2301+-0x3b8b|_0x38fa1b[0x228f+-0x2*-0x3d0+-0x2a1c]<<0x20e3+0x28*-0x2b+-0x1a20|_0x38fa1b[0x158b*0x1+-0x76c+0xe0b*-0x1],_0x47247a>-0x4*0x17a+0x1b16+-0x152c?(_0xd6045[_0x347287*(-0x3*0x137+-0x3*-0x7bf+-0x1*0x1394)+(-0x36*0x17+-0x1a3*0x1+0x67d)]=_0x38fa1b[-0x1d93+0x1*-0x18a5+-0x1*-0x364d]<<0x553+0x6*0x31+-0x664|_0x38fa1b[-0x1*0x13b8+-0x11ba+0x2588]<<-0x5*-0x34+0x925+-0xa1e|_0x38fa1b[-0x24b1+0xb2*0x9+-0x1*-0x1e86],_0xd6045[_0x347287*(0x1623+-0x1a3+-0x147c)+(-0x21d2*0x1+-0x1bc*-0xf+0x7cf)]=_0x38fa1b[-0xcf6+0xfd6+-0x2c8]<<0x9*0x1d3+0x257b*0x1+-0x257*0x17|_0x38fa1b[-0x356*0x6+-0x1d8*0xb+0x2865]<<-0x2439+-0x1*-0x795+-0x7*-0x419|_0x38fa1b[0x10fe+0x235*0x5+-0x1bed],_0xd6045[_0x347287*(0x12ad+0x95*0x17+-0x200c)+(-0x9*-0x2da+0x2198+-0x18*0x278)]=_0x38fa1b[-0x86b*-0x4+0x5*-0x2e9+-0x1304]<<0xb8d*0x1+0xb88+-0x1700|_0x38fa1b[-0x1702+-0x2710+0x3e2e]<<0x26b5+0x1*0x1af5+-0x419f|_0x38fa1b[0x1*-0x2419+0x1bdc+0x85a],_0xd6045[_0x347287*(-0x34+0x1774+-0x173c)+(0xcf1+0x10*-0xde+0xf2)]=_0x38fa1b[-0x1a8c+0x1b4f*-0x1+0x29*0x151]<<-0x550+0x23ed+-0xf44*0x2|_0x38fa1b[-0xd99+-0x20a8+-0x4*-0xb98]<<-0x422+0x1*-0x1a7b+0x1ea8|_0x38fa1b[0x1b60+0x3*0x1eb+-0x2101],_0x2d0e3a[_0x347287*(-0xf6f+0x2d7*-0x9+0x2902)+(-0x22c9+-0x1c4*-0xa+-0x1121*-0x1)]=_0x38fa1b[0x80b+0xae2+-0x12cc]<<0x902+-0x583+0x1b5*-0x2|_0x38fa1b[-0xa13*-0x3+0x826+-0x263d]<<0xc72+0x234+-0x1*0xe9b|_0x38fa1b[0xfb5*0x2+-0xbca+-0x137d],_0x2d0e3a[_0x347287*(-0x1924+0x1a48+-0x30*0x6)+(0x3b*-0x61+0x223*0x2+0x1216)]=_0x38fa1b[-0x15*-0xd7+-0x1cfe+0x1*0xb7f]<<0x49e*0x6+0x1*-0x2421+-0x441*-0x2|_0x38fa1b[-0x2190+0xa08+0x17ad]<<0x14f6+-0x9e1+-0x12*0x9d|_0x38fa1b[-0x1394+0xd15+-0x1*-0x6a5],_0x2d0e3a[_0x347287*(-0x91d+0xe42+-0x521*0x1)+(-0x194+-0x1ecd+0x2063)]=_0x38fa1b[-0x23f0+-0x1340+0x1c9*0x1f]<<0x2*-0x407+-0xdf*0x19+0x1dea*0x1|_0x38fa1b[0x61c+-0x11*0x10f+0xc0b]<<-0x5ca+0x1e65+0x2*-0xc48|_0x38fa1b[0x8f0+-0x1*0x1dd7+0x1510],_0x2d0e3a[_0x347287*(-0x1db8+-0x8*0x48c+0x421c)+(0x1*-0x26c1+-0x1*-0x525+0x1c5*0x13)]=_0x38fa1b[-0x2c7+-0x142*0xe+0x148d]<<0x26e4+-0x68*-0xd+-0x2c17|_0x38fa1b[-0x1007+0x3cd+0xc65]<<-0x5*0x3d2+-0x1*-0x1a59+0x734*-0x1|_0x38fa1b[0x1297+0x4f+-0x95d*0x2]):_0xd6045[_0x347287]=_0x38fa1b[0x107e+-0x25d9*0x1+0x1570]<<0x1*0x20d9+-0xa59+0x3*-0x779|_0x38fa1b[-0x355*0x7+0x25bf+0x72b*-0x2]<<-0x1372+-0xa70*0x1+0x1ded|_0x38fa1b[0x1753+0x2*-0xa21+-0x2fa]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x2e7ce9,'sh4to7Data':_0x3e3a92,'sh8to11Data':_0xd6045,'sh12to15Data':_0x2d0e3a}},[_0x2e7ce9['buffer'],_0x3e3a92['buffer'],_0xd6045['buffer'],_0x2d0e3a['buffer']]);},_0x342f8b=()=>{_0x1783cd=null,_0x3ccb69=null,_0x2a81d8=null,_0x46150b=null,_0x57cfe7=null,_0x870eb1=null,_0x1a92b8=null,_0x46ab42=null;};}class WA extends me{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+HA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x43d99d,_0x33b498,_0x3972f7){_0x43d99d['onmessage']=_0x5177fc=>{if(!this['worker'])return;const {data:_0x441460}=_0x5177fc;if(_0x441460['type']===_0x33b498)switch(_0x33b498){case'updatedSHD'+'ata1':_0x3972f7(_0x441460['data']);break;case'updatedCol'+'orData':_0x3972f7(_0x441460['data']);break;case'updatedTra'+'nsformData':_0x3972f7(_0x441460);break;}};}['updateSHDa'+'ta1'](_0x386e13,_0x4e7766,_0x4140b2){var _0x2ca4c3;return(_0x2ca4c3=this['worker'])==null||_0x2ca4c3['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x386e13,'shBands':_0x4e7766,'SHData':_0x4140b2}),new Promise(_0x488b65=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x549cf2=>{_0x488b65(_0x549cf2);});});}async['updateTran'+'sData'](_0x3e9f27,_0x9f9765,_0x252bad,_0x35ae3,_0x1fd0c9,_0x3c8d91,_0x3cd1cf,_0x8a2266){var _0x52c19d;return(_0x52c19d=this['worker'])==null||_0x52c19d['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x3e9f27,'is4D':_0x9f9765,'position':_0x252bad,'rotation':_0x35ae3,'motion':_0x1fd0c9,'scale':_0x3c8d91,'muT':_0x3cd1cf,'tScale':_0x8a2266}),new Promise(_0x274a99=>{const _0x524058=_0x14a782=>{_0x274a99(_0x14a782);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x524058);});}['destroy'](){var _0xec770e;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0xec770e=this['worker'])==null||_0xec770e['terminate'](),this['worker']=null);}}const X_=(_0xd1400f,_0x4d59e4)=>{const _0x411a98=[];for(let _0x1b2bbe=0x1af*-0x16+-0xb5*0x1+0x25bf;_0x1b2bbe<_0x4d59e4;++_0x1b2bbe)_0x411a98['push'](_0xd1400f['getProp']('f_rest_'+_0x1b2bbe));return _0x411a98;};class $A extends Zy{constructor(_0x45cc1e,_0x47f64e){super(_0x45cc1e,_0x47f64e),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(0x2e*0x35+-0x2493+-0x1b0e*-0x1)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new WA(),this['assetsMana'+'gerLoadedT'+'ime']=0x15c*0x1c+-0x55e+0x1*-0x20ad);}['setSceneIn'+'fo'](_0x1e09bf){this['sceneInfo']['duration']=_0x1e09bf['duration'],this['sceneInfo']['fps']=_0x1e09bf['fps'],this['sceneInfo']['totalGauss'+'ians']=_0x1e09bf['totalGauss'+'ians'],this['sceneInfo']['globalBoun'+'dingBoxMin']=new D(_0x1e09bf['globalBoun'+'dingBox']['min'][0x1ab*-0x15+0x2581+0x27a*-0x1],_0x1e09bf['globalBoun'+'dingBox']['min'][-0x6*0x1b7+0x1*-0x1e95+0x8*0x51c],_0x1e09bf['globalBoun'+'dingBox']['min'][-0x11c5+-0x515*-0x5+-0x7a2]),this['sceneInfo']['globalBoun'+'dingBoxMax']=new D(_0x1e09bf['globalBoun'+'dingBox']['max'][-0x7*0xf2+0x1c2c+-0x158e],_0x1e09bf['globalBoun'+'dingBox']['max'][0x1*0x542+-0x18b3+0x1372],_0x1e09bf['globalBoun'+'dingBox']['max'][-0x13*0x97+-0x1586+0x20bd]);const _0x19eb93=_0x1e09bf['globalBoun'+'dingBox']['min'][-0xac*0x7+-0x2047*-0x1+-0x21f*0xd],_0x47498c=_0x1e09bf['globalBoun'+'dingBox']['min'][-0x7c*0xd+0x10f5+0x4*-0x2aa],_0x58724e=_0x1e09bf['globalBoun'+'dingBox']['min'][-0x17*0x102+0x260c+-0x2*0x76e],_0x255fe8=_0x1e09bf['globalBoun'+'dingBox']['max'][0x1977+-0xed3+-0xaa4],_0x3a4a31=_0x1e09bf['globalBoun'+'dingBox']['max'][0x1056+0x1*-0xf72+-0xe3],_0x5d3dd6=_0x1e09bf['globalBoun'+'dingBox']['max'][-0xa3*-0x11+-0x21*0x25+-0x60c],_0x565b6c=new D((_0x19eb93+_0x255fe8)*(0x11a8+-0x115*0x4+-0xd54*0x1+0.5),(_0x47498c+_0x3a4a31)*(-0x1f+0x978+0x1*-0x959+0.5),(_0x58724e+_0x5d3dd6)*(0x212a+-0x8d7+-0x1853+0.5)),_0x188dde=new D((_0x255fe8-_0x19eb93)*(-0x100*0x20+0x232*-0x7+-0x56*-0x8d+0.5),(_0x3a4a31-_0x47498c)*(0x3*0xafd+0x414+-0x250b+0.5),(_0x5d3dd6-_0x58724e)*(-0x1d4*0x1+-0x95*0x1b+0x1*0x118b+0.5)),_0x1e53f1=new De(_0x565b6c,_0x188dde);this['sceneInfo']['globalBoun'+'dingBox']=_0x1e53f1,this['aabb']=_0x1e53f1;}async['updateData'](){var _0x2d6cd8,_0xbc91db,_0x5d73ef,_0x162382,_0x5b873,_0xafcd97,_0x4e691c,_0x49cdd6,_0xb31273,_0x3159b0,_0x1cdf4c;await super['updateData']();const _0x480d7d=this['gsplatData'];if(!_0x480d7d)return;this['is4D']=_0x480d7d['is4D'];const _0x40e19e=await this['getTransfo'+'rmDataByWo'+'rker'](_0x480d7d);this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x40e19e['centers'],this['motion']=_0x40e19e['motion'],this['tScale']=_0x40e19e['tScaleArra'+'y'],this['muT']=await _0x480d7d['getMuT'](),this['timeIndex']=await _0x480d7d['getTimeInd'+'ex']();const _0x1ae75b=this['evalTextur'+'eSize'](_0x480d7d['numSplats']);this['colorTextu'+'re']?((_0x2d6cd8=this['colorTextu'+'re2'])==null||_0x2d6cd8['destroy'](),(_0xbc91db=this['transformA'+'Texture2'])==null||_0xbc91db['destroy'](),(_0x5d73ef=this['transformB'+'Texture2'])==null||_0x5d73ef['destroy'](),(_0x162382=this['transformR'+'Texture2'])==null||_0x162382['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x1ae75b),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x1ae75b),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x1ae75b),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x1ae75b),this['is4D']&&((_0x5b873=this['transformM'+'otionTextu'+'re2'])==null||_0x5b873['destroy'](),(_0xafcd97=this['transformL'+'ifecycleTe'+'xture2'])==null||_0xafcd97['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x1ae75b),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x1ae75b))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',nt,_0x1ae75b),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x1ae75b),this['transformA'+'Texture']=this['createText'+'ure']('transformA',Ye,_0x1ae75b),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x1ae75b),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ui,_0x1ae75b),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x1ae75b),this['transformR'+'Texture']=this['createText'+'ure']('transformR',Ye,_0x1ae75b),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x1ae75b),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',Ye,_0x1ae75b),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x1ae75b),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',Ye,_0x1ae75b),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x1ae75b))),await this['updateColo'+'rData'](_0x480d7d),await this['updateTran'+'sformFromD'+'ata'](_0x40e19e),this['shBands']=_0x480d7d['shBands'],this['shBands']>0x3a*0x5f+-0x1693+0x10d&&(this['sh1to3Text'+'ure']?((_0x4e691c=this['sh1to3Text'+'ure2'])==null||_0x4e691c['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x1ae75b),this['shBands']>0x3f5*0x9+-0x2*0x565+-0x12*0x161&&((_0x49cdd6=this['sh4to7Text'+'ure2'])==null||_0x49cdd6['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x1ae75b),this['shBands']>0x1125+0x2db*-0x2+-0xb6d?((_0xb31273=this['sh8to11Tex'+'ture2'])==null||_0xb31273['destroy'](),(_0x3159b0=this['sh12to15Te'+'xture2'])==null||_0x3159b0['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x1ae75b),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x1ae75b)):((_0x1cdf4c=this['sh8to11Tex'+'ture2'])==null||_0x1cdf4c['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x1ae75b)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x1ae75b),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ue,_0x1ae75b),this['shBands']>0x20e+-0x176b+-0x2*-0xaaf&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ue,_0x1ae75b),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x1ae75b),this['shBands']>-0xb7f+-0x1a7a+0x25fb?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ue,_0x1ae75b),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x1ae75b),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ue,_0x1ae75b),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x1ae75b)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Yi,_0x1ae75b),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Yi,_0x1ae75b)))),await this['updateSHDa'+'taByWorker'](_0x480d7d));}['updateText'+'ure'](){this['isDestroye'+'d']||(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x11ff35){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x11ff35}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x58c0fd,_0x291590,_0x29c0b6,_0x20335d,_0x490c4c,_0x7a26b2){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x58c0fd,'timeOption':_0x291590,'loadedTime':_0x29c0b6,'asset':_0x20335d,'events':_0x490c4c,'seekCB':_0x7a26b2}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(-0x197c+0x19*-0x91+0x27a5);try{for(;this['appendQueu'+'e']['length']>-0x558+0x1f4b+-0x1ff*0xd;){const _0x23b3e7=this['appendQueu'+'e']['shift']();_0x23b3e7['type']==='append'?await this['processApp'+'endTask'](_0x23b3e7['data']):_0x23b3e7['type']==='release'&&await this['processRel'+'easeTask'](_0x23b3e7['data']);}}finally{this['isProcessi'+'ngQueue']=!(-0x18e+0x71c+-0x58d);}}}async['processRel'+'easeTask'](_0x539880){const {index:_0x3c765}=_0x539880;this['isDestroye'+'d']||await this['gsplatData']['releaseSeq'+'Data'](_0x3c765);}async['processApp'+'endTask'](_0x8953f6){var _0xcd7f02;const {gsplatData:_0x23c43e,timeOption:_0x267f11,loadedTime:_0x4fd9bc,asset:_0x1c4ac9,events:_0x842bff,seekCB:_0xf2e42c}=_0x8953f6;!this['gsplatData']||this['isDestroye'+'d']||(globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x267f11,this['asset']=_0x1c4ac9,this['assetsMana'+'gerLoadedT'+'ime']=_0x4fd9bc,this['events']=_0x842bff,await this['gsplatData']['appendGSpl'+'atData'](_0x23c43e,_0x4fd9bc,_0x267f11),console['log']('loadTime__'+'__','gsplatDeco'+'dedResourc'+'e\x20gsplatDa'+'ta.appendG'+'SplatData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0xdbc+0x321*0xa+-0x2d04),_0x23c43e['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x23c43e['numSplats'])['toFixed'](0xa93*-0x3+-0x1*0x227f+0x5*0xd3f)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20this.upd'+'ateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x1ba3+-0x19b9+0x1e8*-0x1),_0x23c43e['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await((_0xcd7f02=this['gsplatInst'+'ance'])==null?void(0xbf5*0x1+0x7*0x37+-0x2*0x6bb):_0xcd7f02['updateInst'+'anceData'](this,_0x4fd9bc,_0xf2e42c)),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20updateIn'+'stanceData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x57*0x4f+0x29*-0x7+-0x19b8),_0x23c43e['numSplats']));}['fireAssets'+'ManagerTim'+'eIndex'](_0x5474b5,_0x330582){var _0x30af70;const _0x8942d5=_0x5474b5||this['assetsMana'+'gerLoadedT'+'ime'];(_0x30af70=this['asset'])==null||_0x30af70['fire']('setAssetsL'+'oaded',_0x8942d5,_0x330582);}['destroy'](){var _0x134d21,_0xb0fa98,_0x286eed,_0x45f4b9,_0x18ec9a,_0x484dcb,_0xbdcfd,_0x97dd93,_0x4eb52f,_0x2631e6,_0x29a814,_0x55b926,_0x41844c,_0x3951a9,_0x2c30e8,_0x2667b8,_0xc0f583,_0x50f063,_0x85db15,_0x2cb16a,_0x13c08b;(_0x134d21=this['updateData'+'Worker'])==null||_0x134d21['destroy'](),this['updateData'+'Worker']=void(-0x249e+-0x184e+0x3cec),(_0xb0fa98=this['colorTextu'+'re'])==null||_0xb0fa98['destroy'](),(_0x286eed=this['transformA'+'Texture'])==null||_0x286eed['destroy'](),(_0x45f4b9=this['transformB'+'Texture'])==null||_0x45f4b9['destroy'](),(_0x18ec9a=this['transformR'+'Texture'])==null||_0x18ec9a['destroy'](),(_0x484dcb=this['transformM'+'otionTextu'+'re'])==null||_0x484dcb['destroy'](),(_0xbdcfd=this['transformL'+'ifecycleTe'+'xture'])==null||_0xbdcfd['destroy'](),(_0x97dd93=this['sh1to3Text'+'ure'])==null||_0x97dd93['destroy'](),(_0x4eb52f=this['sh4to7Text'+'ure'])==null||_0x4eb52f['destroy'](),(_0x2631e6=this['sh8to11Tex'+'ture'])==null||_0x2631e6['destroy'](),(_0x29a814=this['sh12to15Te'+'xture'])==null||_0x29a814['destroy'](),(_0x55b926=this['colorTextu'+'re2'])==null||_0x55b926['destroy'](),(_0x41844c=this['transformA'+'Texture2'])==null||_0x41844c['destroy'](),(_0x3951a9=this['transformB'+'Texture2'])==null||_0x3951a9['destroy'](),(_0x2c30e8=this['transformR'+'Texture2'])==null||_0x2c30e8['destroy'](),(_0x2667b8=this['transformM'+'otionTextu'+'re2'])==null||_0x2667b8['destroy'](),(_0xc0f583=this['transformL'+'ifecycleTe'+'xture2'])==null||_0xc0f583['destroy'](),(_0x50f063=this['sh1to3Text'+'ure2'])==null||_0x50f063['destroy'](),(_0x85db15=this['sh4to7Text'+'ure2'])==null||_0x85db15['destroy'](),(_0x2cb16a=this['sh8to11Tex'+'ture2'])==null||_0x2cb16a['destroy'](),(_0x13c08b=this['sh12to15Te'+'xture2'])==null||_0x13c08b['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x9bd229){var _0x450093,_0x26b72b,_0x5a8f20,_0x755b2e,_0x563e1d,_0x80c0ee,_0x385c29,_0x42b612,_0x2f0020,_0x139b89,_0x4cbae9,_0x33dfa6,_0x4c02d7;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0xce18ac=((_0x450093=_0x9bd229['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(-0x259+-0x1275+0x14ce):_0x450093['data'])??0x1f97+0x812+-0x27a9,_0x37ca06=((_0x26b72b=_0x9bd229['getParamet'+'er']('uSplatScal'+'e'))==null?void(-0x61f*0x1+0x1*-0x195b+0x1f7a):_0x26b72b['data'])??0x1*-0x866+0x7a4+0x3*0x41,_0xbda3be=((_0x5a8f20=_0x9bd229['getParamet'+'er']('uSaturatio'+'n'))==null?void(-0x53*-0x45+-0x540+0x5b5*-0x3):_0x5a8f20['data'])??-0x223c+-0x933+0x2b70*0x1,_0x234872=((_0x755b2e=_0x9bd229['getParamet'+'er']('uHueOffset'))==null?void(-0x1c8b*0x1+-0x5d*-0x5f+-0x5f8):_0x755b2e['data'])??0x19df+0x14e4+-0x1*0x2ec3,_0xa0679b=((_0x563e1d=_0x9bd229['getParamet'+'er']('uInvertOpa'+'city'))==null?void(-0x17*-0x152+0x3*-0x895+0xa9*-0x7):_0x563e1d['data'])??-0x1a8+0xf5b+-0x7*0x1f5,_0x2aa9f4=((_0x80c0ee=_0x9bd229['getParamet'+'er']('uOpacity'))==null?void(0x246d+-0x31*-0x24+-0x2b51):_0x80c0ee['data'])??-0xa09*-0x2+-0xbb5+-0x85c,_0x18a1ae=((_0x385c29=_0x9bd229['getParamet'+'er']('clrOffset'))==null?void(0x17c1+0x1*-0x1533+0xda*-0x3):_0x385c29['data'])??[0x292*-0x2+0x4b9*-0x8+0x1576*0x2,0x34a*0x4+-0xee9*0x2+-0x9*-0x1da,-0xc03+0x942+0x2c1,0xf56+0x1741+-0x2696],_0x373839=((_0x42b612=_0x9bd229['getParamet'+'er']('clrScale'))==null?void(-0xd2d*0x2+0x2199+-0x173*0x5):_0x42b612['data'])??[-0x1d2f+0x1fbb+0x7*-0x5d,0x1*-0x2336+0x20af+0x12*0x24,0x18d*0x13+0x611*-0x1+-0x1765,0x7*0x2+-0x2283+0x2276],_0x43aa22=((_0x2f0020=_0x9bd229['getParamet'+'er']('uShapeN'))==null?void(-0x1f85+-0x75*0x35+0x37be):_0x2f0020['data'])??-0x1*0x101e+0x164e+-0x630,_0x274820=((_0x139b89=_0x9bd229['getParamet'+'er']('mode'))==null?void(-0x83+0x1fcd+-0x1f4a):_0x139b89['data'])??0x1ea5+-0x1b22+-0x383,_0x12c480=((_0x4cbae9=_0x9bd229['getParamet'+'er']('ringSize'))==null?void(0x5ff+0x260f+-0x2c0e):_0x4cbae9['data'])??0x1ecd+0x15ee+-0x34bb,_0x2152ee=((_0x33dfa6=_0x9bd229['defines'])==null?void(0xaf3+0x6b0+-0x11a3*0x1):_0x33dfa6['get']('uOpenAnim'))??'0',_0x453a08=((_0x4c02d7=_0x9bd229['defines'])==null?void(0x1b2*0xd+-0xf02+-0x168*0x5):_0x4c02d7['get']('uControlCo'+'lorMode'))??'0';_0x9bd229['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x9bd229['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x9bd229['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x9bd229['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x9bd229['setParamet'+'er']('uSplatScal'+'e',_0x37ca06),_0x9bd229['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0xce18ac),_0x9bd229['setParamet'+'er']('uSaturatio'+'n',_0xbda3be),_0x9bd229['setParamet'+'er']('uHueOffset',_0x234872),_0x9bd229['setParamet'+'er']('uInvertOpa'+'city',_0xa0679b),_0x9bd229['setParamet'+'er']('uOpacity',_0x2aa9f4),_0x9bd229['setParamet'+'er']('clrOffset',_0x18a1ae),_0x9bd229['setParamet'+'er']('clrScale',_0x373839),_0x9bd229['setParamet'+'er']('uShapeN',_0x43aa22),_0x9bd229['setParamet'+'er']('mode',_0x274820),_0x9bd229['setParamet'+'er']('ringSize',_0x12c480),_0x9bd229['setParamet'+'er']('prerenderC'+'Time',-0x5eb+0xc16+-0x62b),_0x9bd229['setParamet'+'er']('renderSpac'+'e',-0xf*0x148+0x5db*-0x1+0x1*0x191d),_0x9bd229['setParamet'+'er']('endSpace',-0x1*0xb6f+0x61*0x1+0x4*0x2c6),_0x9bd229['setDefine']('uOpenAnim',_0x2152ee),_0x9bd229['setDefine']('uControlCo'+'lorMode',_0x453a08),this['transformM'+'otionTextu'+'re']&&_0x9bd229['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x9bd229['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x9bd229['setDefine']('SH_BANDS',this['shBands']),_0x9bd229['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x9bd229['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x9bd229['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x9bd229['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x9bd229['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x12794a){const _0x29e7e6=Math['ceil'](Math['sqrt'](_0x12794a)),_0x2b0996=Math['ceil'](_0x12794a/_0x29e7e6);return new J(_0x29e7e6,_0x2b0996);}async['updateColo'+'rData'](_0x5ce9a0){var _0x2c4ceb;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x12bce7=this['colorTextu'+'re2'];if(!_0x12bce7||this['isDestroye'+'d'])return;let _0x397a3b=(_0x2c4ceb=_0x5ce9a0['transformD'+'ata'])==null?void(0x18dd+-0xd93+-0xb4a):_0x2c4ceb['dataColor'];if(!_0x397a3b){const _0x3a5929=_0x5ce9a0['getProp']('color_opac'+'ity');_0x397a3b=new Uint16Array(_0x3a5929['buffer']['slice']());}await this['idleUpdate'+'TexturePro'+'mise'](_0x12bce7,_0x397a3b);}async['getTransfo'+'rmDataByWo'+'rker'](_0x43fb5c){var _0xe565df;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0xe565df=_0x43fb5c['transformD'+'ata'])!=null&&_0xe565df['dataCenter'+'s'])return{'centers':_0x43fb5c['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x43fb5c['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x43fb5c['transformD'+'ata']['dataScale'],'dataRotation':_0x43fb5c['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x43fb5c['transformD'+'ata']['dataMotion'],'dataTime':_0x43fb5c['transformD'+'ata']['dataTime'],'motion':_0x43fb5c['transformD'+'ata']['motion'],'tScaleArray':_0x43fb5c['transformD'+'ata']['tScaleArra'+'y']};const _0x4e1d96=_0x43fb5c['getProp']('position'),_0x5bbdfb=_0x43fb5c['getProp']('motion'),_0x58793f=_0x43fb5c['getProp']('rotation'),_0x2cb402=_0x43fb5c['getProp']('scale'),_0x3c7a1c=_0x43fb5c['getProp']('t'),_0x5eaa56=_0x43fb5c['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x43fb5c['numSplats'],this['is4D'],_0x4e1d96,_0x58793f,_0x5bbdfb,_0x2cb402,_0x3c7a1c,_0x5eaa56);}async['updateTran'+'sformFromD'+'ata'](_0x4e30cc){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x4e30cc['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x4e30cc['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x4e30cc['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x4e30cc['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x4e30cc['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x14bbd6,_0xf82076){if(!this['isDestroye'+'d'])return new Promise(_0x358554=>{requestIdleCallback(()=>{const _0x11cd7a=_0x14bbd6['lock']();_0x11cd7a==null||_0x11cd7a['set'](_0xf82076),_0x14bbd6['unlock'](),_0x358554(!(-0x2614+0x197f*-0x1+-0xcb7*-0x5));},{'timeout':0x12c});});}async['updateSHDa'+'ta'](_0x1ae5e0){var _0x421a2e,_0x2b9715,_0x1359c8,_0xbd00fb,_0x4c3b24,_0x3dacfb,_0x6de057,_0x5a61c5;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x925063=(_0x421a2e=this['sh1to3Text'+'ure2'])==null?void(0x1f*0xd+-0x10ed+-0xa*-0x189):_0x421a2e['lock'](),_0x2d0c17=(_0x2b9715=this['sh4to7Text'+'ure2'])==null?void(0x1*0x74b+-0x62d+-0x11e):_0x2b9715['lock'](),_0x45fad4=(_0x1359c8=this['sh8to11Tex'+'ture2'])==null?void(-0x226b+-0x1*-0x23b+0x2030):_0x1359c8['lock'](),_0xb019c4=(_0xbd00fb=this['sh12to15Te'+'xture2'])==null?void(0xb74+0x13*0x19f+-0x2a41):_0xbd00fb['lock'](),_0x23104a={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x3d60b4=X_(_0x1ae5e0,_0x23104a*(-0xbb*0x1+-0x4*-0xea+0x2ea*-0x1)),_0x146782=-0x2*-0x35d+0x1*-0x4f5+0x63a*0x1,_0x5a3205=0x11b7*-0x1+0x186*-0x12+0x3122,_0xbf05d9=new Float32Array(-0x13b3+-0x977+0x83*0x39),_0x55051c=new Uint32Array(_0xbf05d9['buffer']),_0x4efa16=new Array(_0x23104a*(0x266e+-0x779+-0x1ef2))['fill'](-0x644+0x1*-0x43f+0xa83);for(let _0x24310b=0xddd+-0x2438+-0x3b*-0x61;_0x24310b<_0x1ae5e0['numSplats'];++_0x24310b){for(let _0x2034e4=-0x16f0+0x2411+-0xd21;_0x2034e4<_0x23104a;++_0x2034e4)_0x4efa16[_0x2034e4*(0x1912+0x18ff+0x1*-0x320e)]=_0x3d60b4[_0x2034e4][_0x24310b],_0x4efa16[_0x2034e4*(-0xec*0x1+-0x6*-0x577+-0xe9*0x23)+(-0x6*-0x538+-0x5e*-0x17+-0x27c1)]=_0x3d60b4[_0x2034e4+_0x23104a][_0x24310b],_0x4efa16[_0x2034e4*(0x1bae+0x588*-0x3+-0x87*0x15)+(0x2067+-0x915+-0x1750)]=_0x3d60b4[_0x2034e4+_0x23104a*(-0x1740+-0x2*-0x24f+0x12a4)][_0x24310b];let _0x5f0957=_0x4efa16[-0xfc6+0x189a+0x14*-0x71];for(let _0x2920bf=-0x15a8+0x1af5+-0x54c;_0x2920bf<_0x23104a*(0x19*-0x6d+0xc9d*-0x2+0x11f1*0x2);++_0x2920bf)_0x5f0957=Math['max'](_0x5f0957,Math['abs'](_0x4efa16[_0x2920bf]));if(_0x5f0957!==0x25f*0x9+0x1*-0x1b7f+0x4*0x18a){for(let _0x20881c=-0x1a93+0xd11+0xd82;_0x20881c<_0x23104a;++_0x20881c)_0x4efa16[_0x20881c*(-0x1f*0xc+0xd7*-0xf+0xe10)+(0x8e1*-0x1+-0x2621*0x1+0x16*0x223)]=Math['max'](0x12b7+-0x1ba6+0x8ef*0x1,Math['min'](_0x146782,Math['floor']((_0x4efa16[_0x20881c*(0x61f*0x1+-0x5*0x2a1+0x709)+(-0xab*0x1f+-0x3*0x933+0x304e)]/_0x5f0957*(0x7a9*0x2+-0x2477+0x1525+0.5)+(-0x1225+-0x210d+0x3332+0.5))*_0x146782+(-0x13*0x1b7+-0x9*0x6d+0x246a+0.5)))),_0x4efa16[_0x20881c*(0xf65*-0x1+0x202c*-0x1+-0x1d*-0x1a4)+(0x9*-0x97+0x6a1*0x1+-0x151)]=Math['max'](0x1347+-0x2700+-0x33*-0x63,Math['min'](_0x5a3205,Math['floor']((_0x4efa16[_0x20881c*(-0x1e0d+0x90*-0x34+-0xd0*-0x49)+(0x43*-0x8+-0x93*0x43+0x2892)]/_0x5f0957*(-0x22b1+0x2431+-0x180*0x1+0.5)+(-0x1*-0x1d1e+0x957*0x1+0x1*-0x2675+0.5))*_0x5a3205+(0xb6f+-0x3*-0x9f1+-0x2942+0.5)))),_0x4efa16[_0x20881c*(0x170b+0xfe5*0x1+-0x26ed)+(0x1*0x3df+0xbe9*0x1+-0xfc6)]=Math['max'](-0x12d0+-0x1*-0x1931+0x1*-0x661,Math['min'](_0x146782,Math['floor']((_0x4efa16[_0x20881c*(-0x20b*0x13+0x21*0x9d+0x1297)+(0x116f*0x2+-0x21fd+-0xdf)]/_0x5f0957*(-0xdb6+0x2400+0x12*-0x13d+0.5)+(0x1*-0xfc1+0x31*-0x67+0x14*0x1c6+0.5))*_0x146782+(-0x6*-0x199+-0x2*-0xdd4+-0x1c6*0x15+0.5))));_0xbf05d9[-0xf90+0x14d7+-0x547]=_0x5f0957,_0x925063[_0x24310b*(0x1*0x2ae+-0x51*-0x27+-0x17*0xa7)+(-0xd0d+-0xb93+-0x18a0*-0x1)]=_0x55051c[0x205*0x7+-0x2*-0x682+-0x1b27],_0x925063[_0x24310b*(0x79c*0x3+-0x600+0x10*-0x10d)+(0x27b*0x1+0x451*0x2+-0xb1c)]=_0x4efa16[-0xcbc*0x1+0xa3c*0x1+-0x1*-0x280]<<0x1bf2+0x785+-0x2362|_0x4efa16[0x2a*0xa7+-0x2ce+0x1897*-0x1]<<0x1d19+0x45d+0x5*-0x6af|_0x4efa16[0x95*0x2f+-0x22ca*-0x1+-0x3e23*0x1],_0x925063[_0x24310b*(-0x1e86+0x61f*0x2+0x124c)+(0x3*-0x1be+-0x1837*-0x1+-0x12fb)]=_0x4efa16[0x17ee+-0x1a3b+0x250]<<0x350+0xc*-0x128+0xaa5|_0x4efa16[-0x21cf+-0xb*-0x19+0x20c0]<<0x2f*0x4f+-0x1*-0xae1+0x1957*-0x1|_0x4efa16[-0x1e07+0x14ba+0x1*0x952],_0x925063[_0x24310b*(0x24b3+0x239+0xc*-0x33e)+(-0x102d*0x2+0x1f3*-0x8+-0x2ff5*-0x1)]=_0x4efa16[0x1*0xfbb+-0xabc+-0x4f9]<<-0x2072+0x179b+-0x23b*-0x4|_0x4efa16[-0x62e*-0x2+0x26f*-0x1+-0x9e6]<<-0x1*0xf65+0x15d7*-0x1+0x2547|_0x4efa16[0x22*0x91+-0x74c+-0xbee],this['shBands']>-0x25c6+0x75b+0x162*0x16&&(_0x2d0c17[_0x24310b*(-0x1b91+-0x55*0x1f+0x25e0)+(0x1fc3+0x12bf+-0x3282)]=_0x4efa16[-0xf9*-0x12+0x1da4+-0x2f1d]<<0x35*-0x7+-0x1475+-0x1*-0x15fd|_0x4efa16[0x1794+-0x1387+-0x403]<<0x172c+-0x3ff*0x5+0xd*-0x3e|_0x4efa16[-0x3*0x61d+0x257b+-0x1319],_0x2d0c17[_0x24310b*(-0x42b+-0x8dd*0x1+0xd0c)+(0x231a+0x22*-0x1c+0x1f61*-0x1)]=_0x4efa16[-0x5cc+-0x184e+0x1e26]<<-0x26d+-0x1*0x509+-0x78b*-0x1|_0x4efa16[0x1ac3+-0x1471+0x6b*-0xf]<<-0x1*-0x1bd3+-0x124d+0x3*-0x329|_0x4efa16[-0x1933*0x1+-0x246d+0x3dae],_0x2d0c17[_0x24310b*(0x63d*-0x5+-0x16*-0x83+0x13f3)+(0x1379+0x81*0x3e+-0x32b5)]=_0x4efa16[-0x2441+-0x1*-0xfb3+0x149d]<<0x1*-0x449+-0x3bd*0x5+0x1*0x170f|_0x4efa16[-0x1c12+-0x1924+0x1aa3*0x2]<<0xd65+-0xcb1+-0xa9|_0x4efa16[-0x3*0x49b+-0x640*0x5+0x2d22],_0x2d0c17[_0x24310b*(-0x2c*0x71+0x2*0x11d8+-0x1040)+(-0x149b+-0xd8*0x22+0x314e)]=_0x4efa16[-0x16ad+-0xb9d+0x5ba*0x6]<<0x2*-0x3a+-0x5*-0x699+-0x2074|_0x4efa16[0x1307+0x6*0x4fd+-0x30e2]<<0x11*0x247+-0x1*0xd25+-0x1987|_0x4efa16[-0x1*0x655+-0x5e9*-0x4+-0x113b],this['shBands']>0x5a6+0x1408+-0x19ac?(_0x45fad4[_0x24310b*(-0x8*-0x74+-0x187+0x215*-0x1)+(-0x2*0xe35+0x4*0x894+-0x5e6)]=_0x4efa16[-0x115e+0x5d*-0xb+-0x726*-0x3]<<-0x2086+0x1cc5+0x3d6|_0x4efa16[-0x114*-0x22+0x8a6+-0x5a7*0x8]<<-0x719+0x17b*0xd+-0xc1b|_0x4efa16[0x7*0xaf+-0x1*0x120e+0xd5c],_0x45fad4[_0x24310b*(-0x1541+0x8d0+0xc75)+(0x1543+0x1*-0x13c6+-0x2*0xbe)]=_0x4efa16[0xe01+-0x34a+0xa9f*-0x1]<<-0x9ee*0x2+-0x2b0+0x16a1|_0x4efa16[0x2*-0x504+0x629*-0x5+-0x1477*-0x2]<<0x258c+0x50*0xc+-0xb3*0x3b|_0x4efa16[-0xad9+-0x1e*0x9f+0x1d95*0x1],_0x45fad4[_0x24310b*(0x17b*0x6+-0x1914+0x19*0xa6)+(-0x12a3+0xab*-0x1+0x1350)]=_0x4efa16[0xd39+-0x8e6+-0x438]<<0x77*-0x3b+-0x13f*0xf+0x2e33*0x1|_0x4efa16[-0x71b+-0x98f*0x1+-0x26*-0x71]<<0x22*0x8e+0x20d*-0xe+0x9e5|_0x4efa16[0x1c35+-0x5*0x72c+-0x4*-0x1f1],_0x45fad4[_0x24310b*(-0x11*0x1be+0x1556+0xec*0x9)+(-0x4*-0x774+-0xd6*-0x1f+0x11*-0x347)]=_0x4efa16[0x19e+0x114+-0x294]<<0x1a41+-0x2*-0x10a5+-0x3b76|_0x4efa16[-0xa4e+-0x799*-0x2+-0x4c5]<<0x4*-0x1c9+-0x1*-0x11d1+0x1*-0xaa2|_0x4efa16[0x1f45*0x1+0x1ba6*0x1+0x3acb*-0x1],_0xb019c4[_0x24310b*(0x26ca+-0xef9+0x17cd*-0x1)+(-0xcc1+-0x1ff1+0x2cb2)]=_0x4efa16[-0x345+0x1826+0x8*-0x298]<<0x1*0x21bd+-0x6b5*0x1+0x1*-0x1af3|_0x4efa16[0x2014+-0x2146+-0x5*-0x44]<<0x56b+0xb57*-0x1+0x5f7|_0x4efa16[-0x3*0x1a1+0x1f*-0x12e+0x2998],_0xb019c4[_0x24310b*(-0x2d5+-0x2113+0x2*0x11f6)+(-0x157*0x12+-0x1*-0x545+-0x96d*-0x2)]=_0x4efa16[0xc31+0x7*-0x311+0x96a]<<-0x1fda+0xbf+0x1f30|_0x4efa16[-0xb*0x1ef+0x308+0x1262]<<0xec4+0x2171+-0x302a|_0x4efa16[0x1e95*-0x1+0x14cc+-0x1*-0x9ef],_0xb019c4[_0x24310b*(0x3f5*0x7+0xff*0x21+-0x3c8e)+(-0x1*-0x26d7+-0x51*-0x1+-0x2726)]=_0x4efa16[-0x191f+0xef6+0xa50]<<0x15b5+0x1a14+-0x2fb4*0x1|_0x4efa16[0x14ef*-0x1+-0x1833+0x2d4a]<<0xb*-0x17d+-0x471*-0x4+0xad*-0x2|_0x4efa16[-0xfdb+0x1c7*0x8+0x73*0x4],_0xb019c4[_0x24310b*(0x6a5+-0xf10+0x86f)+(-0xa42+0x1*-0x3fa+-0x209*-0x7)]=_0x4efa16[0x5*-0x63a+0x1f2a*0x1+0x1*0x22]<<-0x88*-0x25+-0x1ebf*-0x1+-0x39*0xe2|_0x4efa16[-0x64c+-0x1fb8+0x1*0x262f]<<0xb73+-0xf09+0x3a1|_0x4efa16[0x2507+0xeb5+-0x3390]):_0x45fad4[_0x24310b]=_0x4efa16[0x19fb+-0x1aaa*0x1+0x2*0x62]<<-0x1bdf+-0x1d5d+0x3951|_0x4efa16[-0xd36+0x157c+-0x830]<<0x3*0x91a+0xaca+-0x260d|_0x4efa16[0x237f+0x1305+0x366d*-0x1]);}}(_0x4c3b24=this['sh1to3Text'+'ure2'])==null||_0x4c3b24['unlock'](),(_0x3dacfb=this['sh4to7Text'+'ure2'])==null||_0x3dacfb['unlock'](),(_0x6de057=this['sh8to11Tex'+'ture2'])==null||_0x6de057['unlock'](),(_0x5a61c5=this['sh12to15Te'+'xture2'])==null||_0x5a61c5['unlock']();}async['updateSHDa'+'taByWorker'](_0x13987b){var _0x35583b,_0x1346b6,_0x346d12,_0x522209,_0x5423e3;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x146aec={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x10c92b,_0x9ab561,_0x3a3ee3,_0x568cde;if((_0x35583b=_0x13987b['transformD'+'ata'])!=null&&_0x35583b['sh1to3Data'])_0x10c92b=(_0x1346b6=_0x13987b['transformD'+'ata'])==null?void(-0xc2f+0x20a1+0x1472*-0x1):_0x1346b6['sh1to3Data'],_0x9ab561=(_0x346d12=_0x13987b['transformD'+'ata'])==null?void(0x19f0+0x2*0xb+0x1*-0x1a06):_0x346d12['sh4to7Data'],_0x3a3ee3=(_0x522209=_0x13987b['transformD'+'ata'])==null?void(0x18c2+0xd*0x9+-0x50b*0x5):_0x522209['sh8to11Dat'+'a'],_0x568cde=(_0x5423e3=_0x13987b['transformD'+'ata'])==null?void(-0x6*0x235+-0x203*-0x2+0x1*0x938):_0x5423e3['sh12to15Da'+'ta'];else{const _0x206f61=X_(_0x13987b,_0x146aec*(-0x232b+0x159c+0xd92)),_0x7e215a=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x13987b['numSplats'],this['shBands'],_0x206f61);_0x10c92b=_0x7e215a['sh1to3Data'],_0x9ab561=_0x7e215a['sh4to7Data'],_0x3a3ee3=_0x7e215a['sh8to11Dat'+'a'],_0x568cde=_0x7e215a['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x10c92b),this['shBands']>-0xe*-0xe5+-0x1*-0x1c8b+-0x24*0x124&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x9ab561),this['shBands']>-0x6*0x19c+0x2*-0xef1+0x278c?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x3a3ee3),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x568cde)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x3a3ee3));}}const XA='FILL_WINDO'+'W',q_='KEEP_ASPEC'+'T',j_='AUTO',qA='FIXED';let Qy;function Ys(){return Qy;}function Wf(_0x50c59f){Qy=_0x50c59f;}class jA{constructor(){h(this,'renderPass'+'es',[]),h(this,'renderTarg'+'etMap',new Map());}['addRenderP'+'ass'](_0x5ab449){w['assert'](_0x5ab449),_0x5ab449['frameUpdat'+'e']();const _0x57cebe=_0x5ab449['beforePass'+'es'];for(let _0x30e7e9=-0xb*0x22d+-0x1de5*-0x1+-0x5f6;_0x30e7e9<_0x57cebe['length'];_0x30e7e9++){const _0x1de273=_0x57cebe[_0x30e7e9];_0x1de273['enabled']&&this['addRenderP'+'ass'](_0x1de273);}_0x5ab449['enabled']&&this['renderPass'+'es']['push'](_0x5ab449);const _0x5db65d=_0x5ab449['afterPasse'+'s'];for(let _0x582caa=-0xccf+-0xe5*0xe+0x1955;_0x582caa<_0x5db65d['length'];_0x582caa++){const _0x18ae0c=_0x5db65d[_0x582caa];_0x18ae0c['enabled']&&this['addRenderP'+'ass'](_0x18ae0c);}}['reset'](){this['renderPass'+'es']['length']=0x11*0x175+-0x2004+-0x1*-0x73f;}['compile'](){const _0x258a8e=this['renderTarg'+'etMap'],_0x34a7fb=this['renderPass'+'es'];for(let _0x3b1ee6=0xec+-0x1b02*-0x1+-0x113*0x1a;_0x3b1ee6<_0x34a7fb['length'];_0x3b1ee6++){const _0x1130e5=_0x34a7fb[_0x3b1ee6],_0x1b69e0=_0x1130e5['renderTarg'+'et'];if(_0x1b69e0!==void(0x231b+0x127d+-0x3598)){const _0x2b2831=_0x258a8e['get'](_0x1b69e0);if(_0x2b2831){const _0x59c65c=_0x1130e5['colorArray'+'Ops']['length'];for(let _0x46e4c6=0x61*0x64+-0x9b7*0x2+0x116*-0x11;_0x46e4c6<_0x59c65c;_0x46e4c6++)_0x1130e5['colorArray'+'Ops'][_0x46e4c6]['clear']||(_0x2b2831['colorArray'+'Ops'][_0x46e4c6]['store']=!(-0x21b*-0x12+0x10e4+-0x36ca));_0x1130e5['depthStenc'+'ilOps']['clearDepth']||(_0x2b2831['depthStenc'+'ilOps']['storeDepth']=!(0xddb*-0x1+-0x1db*-0xe+0x6b*-0x1d)),_0x1130e5['depthStenc'+'ilOps']['clearStenc'+'il']||(_0x2b2831['depthStenc'+'ilOps']['storeStenc'+'il']=!(0x3f1*-0x2+0xe94+-0x6b2*0x1));}_0x258a8e['set'](_0x1b69e0,_0x1130e5);}}for(let _0x55f92b=-0x1459*-0x1+0xea4+0x1*-0x22fd;_0x55f92b<_0x34a7fb['length']-(-0x1*-0x1d1b+-0x9*-0x163+-0x2995);_0x55f92b++){const _0x5c8431=_0x34a7fb[_0x55f92b],_0xeb04ef=_0x5c8431['renderTarg'+'et'],_0x23333f=_0x34a7fb[_0x55f92b+(-0x7d5*0x3+0x103*0x23+-0x1*0xbe9)],_0x2d1ef8=_0x23333f['renderTarg'+'et'];_0xeb04ef!==_0x2d1ef8||_0xeb04ef===void(-0x20b9*0x1+0x17d1+-0x1*-0x8e8)||_0x23333f['depthStenc'+'ilOps']['clearDepth']||_0x23333f['depthStenc'+'ilOps']['clearStenc'+'il']||_0x23333f['colorArray'+'Ops']['some'](_0x277cfa=>_0x277cfa['clear'])||_0x5c8431['afterPasse'+'s']['length']>0x3c8+-0x21d5*0x1+0x1e0d||_0x23333f['beforePass'+'es']['length']>-0x225*0x7+-0x1*-0x7ea+-0x17*-0x4f||(_0x5c8431['_skipEnd']=!(-0xd09+-0x2094+0x2d9d),_0x23333f['_skipStart']=!(-0x6d9+-0x1898+0x1f71*0x1));}let _0x3ff6ca=null,_0xf166df=null;for(let _0x27aba6=-0xb*-0x58+-0x1*0x211e+0x2*0xeab;_0x27aba6<_0x34a7fb['length'];_0x27aba6++){const _0x5dea8e=_0x34a7fb[_0x27aba6],_0x37888e=_0x5dea8e['renderTarg'+'et'],_0x1a67b6=_0x37888e==null?void(0x4*0x3f8+0x1*-0x1f86+0x7d3*0x2):_0x37888e['colorBuffe'+'r'];if(_0x1a67b6!=null&&_0x1a67b6['cubemap']){if(_0x3ff6ca===_0x1a67b6){const _0x4ebf2f=_0xf166df['colorArray'+'Ops']['length'];for(let _0x29cb21=-0x1*-0x147c+-0x1*0x3d+-0x143f*0x1;_0x29cb21<_0x4ebf2f;_0x29cb21++)_0xf166df['colorArray'+'Ops'][_0x29cb21]['mipmaps']=!(0x2e1*-0x2+0x1d6a+0x5*-0x4bb);}_0x3ff6ca=_0x37888e['colorBuffe'+'r'],_0xf166df=_0x5dea8e;}else _0x5dea8e['requiresCu'+'bemaps']&&(_0x3ff6ca=null,_0xf166df=null);}_0x258a8e['clear']();}['render'](_0x320235){this['compile']();const _0x4ef402=this['renderPass'+'es'];for(let _0x2701f9=0x1e2*-0x13+0x380*-0x4+-0x115*-0x2e;_0x2701f9<_0x4ef402['length'];_0x2701f9++)_0x4ef402[_0x2701f9]['render']();}}class YA{constructor(_0x9a30db,_0x329f0e){this['texture0']=_0x9a30db,this['texture1']=_0x329f0e;}['destroy'](){var _0x16391b,_0x34c93e;(_0x16391b=this['texture0'])==null||_0x16391b['destroy'](),(_0x34c93e=this['texture1'])==null||_0x34c93e['destroy']();}}const Y_=new Kt();class Qr{static['createText'+'ure'](_0x52e3b8,_0xc0a4d1,_0x14a478,_0x502001=''){return new _e(_0x52e3b8,{'name':'AreaLightL'+'UT'+_0x502001,'width':_0x14a478,'height':_0x14a478,'format':_0xc0a4d1,'addressU':ue,'addressV':ue,'type':Ms,'magFilter':vt,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(0x16d9+-0x11*0x17+-0x11*0x141)});}static['applyTextu'+'res'](_0x2d1f75,_0x60e1e9,_0x255ac7){Y_['remove'](_0x2d1f75),Y_['get'](_0x2d1f75,()=>new YA(_0x60e1e9,_0x60e1e9===_0x255ac7?null:_0x255ac7)),_0x2d1f75['scope']['resolve']('areaLights'+'LutTex1')['setValue'](_0x60e1e9),_0x2d1f75['scope']['resolve']('areaLights'+'LutTex2')['setValue'](_0x255ac7);}static['createPlac'+'eholder'](_0x28a622){const _0x52f7ad=Qr['createText'+'ure'](_0x28a622,nt,0x157+-0x1*0x22d7+0x2182,'placeholde'+'r');_0x52f7ad['lock']()['fill'](0x457+0x481*-0x8+-0x487*-0x7),_0x52f7ad['unlock'](),Qr['applyTextu'+'res'](_0x28a622,_0x52f7ad,_0x52f7ad);}static['set'](_0x3fe3cf,_0x331108,_0x3f7368){function _0x2ba7c9(_0x263cae,_0x1cd1b2,_0x3ca303){const _0x3ce926=Qr['createText'+'ure'](_0x263cae,_0x3ca303,-0x3b6+0x24bf+-0x20c9);return _0x3ce926['lock']()['set'](_0x1cd1b2),_0x3ce926['unlock'](),_0x3ce926;}function _0x40dd92(_0x1eff04){const _0x300d18=_0x1eff04['length'],_0x1bc823=new Uint16Array(_0x300d18),_0x4899fd=Tn['float2Half'];for(let _0x2c2ce1=-0xc*0x2d7+0xb53+-0x1*-0x16c1;_0x2c2ce1<_0x300d18;_0x2c2ce1++)_0x1bc823[_0x2c2ce1]=_0x4899fd(_0x1eff04[_0x2c2ce1]);return _0x1bc823;}const _0x433fc5=_0x331108,_0x35ba9c=_0x3f7368,_0x3aa853=_0x40dd92(_0x433fc5),_0x4aab7f=_0x40dd92(_0x35ba9c),_0x41364d=_0x2ba7c9(_0x3fe3cf,_0x3aa853,nt),_0x2e454c=_0x2ba7c9(_0x3fe3cf,_0x4aab7f,nt);Qr['applyTextu'+'res'](_0x3fe3cf,_0x41364d,_0x2e454c);}}const nh='en-US',oh={'en':'en-US','es':'en-ES','zh':'zh-CN','zh-HK':'zh-TW','zh-TW':'zh-HK','zh-MO':'zh-HK','fr':'fr-FR','de':'de-DE','it':'it-IT','ru':'ru-RU','ja':'ja-JP'},$p={};function Ar(_0x4f8ab1,_0x3a00b0){for(let _0x416fdd=-0x1*-0x5e9+0x1*-0xbbe+0x5d5*0x1,_0x426ad1=_0x4f8ab1['length'];_0x416fdd<_0x426ad1;_0x416fdd++)$p[_0x4f8ab1[_0x416fdd]]=_0x3a00b0;}function Ri(_0x59cf2d){const _0x1621cf=_0x59cf2d['indexOf']('-');return _0x1621cf!==-(-0x1def+-0x3fb*-0x1+0x19f5)?_0x59cf2d['substring'](-0xdf*-0x15+0x2*0x32e+-0x18a7,_0x1621cf):_0x59cf2d;}function KA(_0x4d5541,_0x14e937){const _0x32050c=_0x4d5541['indexOf']('-');return _0x32050c!==-(0x2*-0x327+0x1e55+-0x7b*0x32)?_0x14e937+_0x4d5541['substring'](_0x32050c):_0x14e937;}function Jy(_0x454162,_0x5b716f){if(_0x5b716f[_0x454162])return _0x454162;let _0xa9801b=oh[_0x454162];if(_0xa9801b&&_0x5b716f[_0xa9801b])return _0xa9801b;const _0x4c76b0=Ri(_0x454162);return _0xa9801b=oh[_0x4c76b0],_0x5b716f[_0xa9801b]?_0xa9801b:_0x5b716f[_0x4c76b0]?_0x4c76b0:nh;}Ar(['ja','ko','th','vi','zh','id'],_0x39329=>0x8ae+0x1407+0x1*-0x1cb5),Ar(['fa','hi'],_0x768507=>_0x768507>=0x2237*0x1+-0xe60+-0x13d7&&_0x768507<=0x489+-0xfe*-0x17+-0x1b5a?-0x1*-0xfbd+-0x11d+-0x8*0x1d4:0x1b79+-0x1a0b+-0x16d),Ar(['fr','pt'],_0x3ae849=>_0x3ae849>=-0x908+0x791+-0x177*-0x1&&_0x3ae849<0x8ad*0x2+0x1172*0x1+0x92*-0x3d?-0x321*0x1+0x8*-0x20e+0x1391:0x1*0x1083+0x1391+0x5*-0x737),Ar(['da'],_0x33a10b=>_0x33a10b===0x8ac+0x1fcb+-0x2876||!Number['isInteger'](_0x33a10b)&&_0x33a10b>=-0x3*-0xb93+-0x8cb+-0x19ee&&_0x33a10b<=-0x93b*0x4+-0x1963+0x4*0xf94?0x799+-0x9b*0x40+0x2d5*0xb:0xbc9+-0x13a2+0x14f*0x6),Ar(['de','en','it','el','es','tr','fi','sv','nb','no','ur'],_0x22f11e=>_0x22f11e===0x1*0x1fd3+0x3*-0x945+-0xd*0x4f?-0x4c*0x68+0x161a+-0x463*-0x2:0x1*-0x18f1+-0x1906+0x31f8),Ar(['ru','uk'],_0x100d77=>{if(Number['isInteger'](_0x100d77)){const _0x5f1dc8=_0x100d77%(0x8*-0x209+0x1602+-0x5b0),_0x46908c=_0x100d77%(-0x167e+0x98f*-0x3+-0x338f*-0x1);if(_0x5f1dc8===-0xb9c*-0x1+-0x140b*-0x1+-0x1*0x1fa6&&_0x46908c!==0x5*-0x647+-0x2544+-0x3d1*-0x12)return-0xfb*-0x16+-0x3da+-0x8*0x237;if(_0x5f1dc8>=-0x137c+0x17b1*0x1+-0x433&&_0x5f1dc8<=0x1*-0x2563+0xb*-0x97+0x2be4&&(_0x46908c<-0x1bec+0x2*-0x6e3+0xd*0x336||_0x46908c>0x94+-0x2662*0x1+0x2*0x12ee))return 0x260c+-0x57*-0x3f+-0x3b74;if(_0x5f1dc8===-0x252+0x2580+-0x232e||_0x5f1dc8>=0x51*-0x1f+0x7f*-0x41+0x2a13&&_0x5f1dc8<=0xb+0x3*-0x185+0x48d||_0x46908c>=0x129a*0x1+0x1*-0x1a17+-0x3c4*-0x2&&_0x46908c<=0x2*0x868+-0x90e+-0x7b4)return-0x205*0x1+-0xc9*0x2f+-0x42*-0x97;}return-0x9a2*-0x2+0x7*0x56f+-0x394a;}),Ar(['pl'],_0x1e16f3=>{if(Number['isInteger'](_0x1e16f3)){if(_0x1e16f3===-0x1593+-0x1b78+0x310c)return 0xd8b*0x1+-0x17*-0xd7+-0x20dc;const _0x4bf897=_0x1e16f3%(-0x14c5+0x2ab*-0x2+0x1a25),_0xaa2485=_0x1e16f3%(0x14df+-0x25f*0x1+-0x121c);if(_0x4bf897>=0x26e7+0x24ed+-0x6*0xca3&&_0x4bf897<=-0x1eda+0x12c+0x1db2&&(_0xaa2485<0x80d*0x3+-0x1d8f+-0x2ba*-0x2||_0xaa2485>0x144*0x8+-0x17*-0xfe+-0x20e4))return 0x35e+-0x1c04+0x18a7;if(_0x4bf897>=-0x2364+-0x19ea+0x3d4e&&_0x4bf897<=0x2514+0x1*0x28c+-0x279f||_0x4bf897>=-0x1a59+-0xba0+0x25fe&&_0x4bf897<=0x1639*-0x1+-0x3fa*-0x6+-0x19a||_0xaa2485>=0x25aa+-0x894+-0xe*0x213&&_0xaa2485<=0x1*-0xb7e+0x18b1+-0xd25*0x1)return 0x1b49+-0x43*0x8e+0x9e3;}return 0x13b7+0xd*-0x2d4+0x1110;}),Ar(['ar'],_0x457ee3=>{if(_0x457ee3===-0x19d7+-0x1d*-0x5b+0xf88)return 0x2ce*-0x8+-0x142e+-0xa*-0x443;if(_0x457ee3===0xf55+-0x1b75*-0x1+0x1*-0x2ac9)return 0x23f+0x9e3*-0x1+0x13*0x67;if(_0x457ee3===-0x1a9c+-0x785+0x3*0xb61)return-0x1026+-0x2*0xaab+0x257e;if(Number['isInteger'](_0x457ee3)){const _0x1b8755=_0x457ee3%(0xd13+-0x175c+-0x38f*-0x3);if(_0x1b8755>=0xb39*-0x1+0x20cc+-0x1590&&_0x1b8755<=0x1b90+-0x1*-0xc3b+0x1*-0x27c1)return 0x8*-0x6e+-0x67*0xe+0xf*0x9b;if(_0x1b8755>=-0x20fd+0x7*-0x45d+-0x69*-0x9b&&_0x1b8755<=0x1*0x10a6+0x96b*0x2+-0x2319)return 0xbce+0x7cf*-0x5+0x1b41;}return-0x1a*-0x96+0x2f*0x20+-0x1517;});const ZA=$p[Ri(nh)];function Jd(_0x246459){return $p[_0x246459]||ZA;}const Vn=new RegExp('^\x5cs*(?:(?:'+'[a-z]+[a-z'+'0-9\x5c-+.]*:'+')?//|data:'+'|blob:)','i');class QA{constructor(_0x1cc88d='',_0x5a32e4='',_0xd3ca17=null,_0x5a5ff3=null,_0x1b94a9=null,_0x8c5746=null){this['url']=_0x1cc88d,this['filename']=_0x5a32e4,this['hash']=_0xd3ca17,this['size']=_0x5a5ff3,this['opt']=_0x1b94a9,this['contents']=_0x8c5746;}['equals'](_0x5b2881){return this['url']===_0x5b2881['url']&&this['filename']===_0x5b2881['filename']&&this['hash']===_0x5b2881['hash']&&this['size']===_0x5b2881['size']&&this['opt']===_0x5b2881['opt']&&this['contents']===_0x5b2881['contents'];}}let JA=-(0x673+0x229a+-0x290c);const eC={'pvr':'extCompres'+'sedTexture'+'PVRTC','dxt':'extCompres'+'sedTexture'+'S3TC','etc2':'extCompres'+'sedTexture'+'ETC','etc1':'extCompres'+'sedTexture'+'ETC1','basis':'canvas'},K_=['pvr','dxt','etc2','etc1','basis'];class pe extends me{constructor(_0x53b704,_0x219363,_0x1cdcfb,_0x2a7a3a={},_0x41332d={}){super(),h(this,'_file',null),h(this,'_i18n',{}),h(this,'_preload',!(0x129e+0x529+-0x17c6)),h(this,'_resources',[]),h(this,'id',JA--),h(this,'loaded',!(0x111f+0x2d7+0x3*-0x6a7)),h(this,'loading',!(-0xfd3*-0x2+0xee8+-0x2e8d)),h(this,'options',{}),h(this,'registry',null),h(this,'tags',new To(this)),h(this,'type'),h(this,'urlObject',null),(this['_name']=_0x53b704||'',this['type']=_0x219363,this['_data']=_0x2a7a3a||{},this['options']=_0x41332d||{},_0x1cdcfb&&(this['file']=_0x1cdcfb));}set['name'](_0x30f81c){if(this['_name']===_0x30f81c)return;const _0x1c3fc3=this['_name'];this['_name']=_0x30f81c,this['fire']('name',this,this['_name'],_0x1c3fc3);}get['name'](){return this['_name'];}set['file'](_0xc738c5){var _0x52376e,_0x8fbd79;if(_0xc738c5&&_0xc738c5['variants']&&['texture','textureatl'+'as','bundle']['indexOf'](this['type'])!==-(-0x13*0xe1+-0x1138+0x21ec)){const _0x20f76a=((_0x8fbd79=(_0x52376e=this['registry'])==null?void(0x92a+0xca3*0x2+-0x2270):_0x52376e['_loader'])==null?void(0x219*-0x1+-0x112*0x10+-0x2bf*-0x7):_0x8fbd79['_app'])||Ys(),_0x31be3f=_0x20f76a==null?void(0xd1+0x1abd+-0x1b8e):_0x20f76a['graphicsDe'+'vice'];if(_0x31be3f)for(let _0x331fb2=-0x14d0+0x116*-0xd+0x22ee,_0x4d7941=K_['length'];_0x331fb2<_0x4d7941;_0x331fb2++){const _0x53796f=K_[_0x331fb2];if(_0xc738c5['variants'][_0x53796f]&&_0x31be3f[eC[_0x53796f]]){_0xc738c5=_0xc738c5['variants'][_0x53796f];break;}if(_0x20f76a['enableBund'+'les']){const _0x45f25c=_0x20f76a['bundles']['listBundle'+'sForAsset'](this);if(_0x45f25c&&_0x45f25c['find'](_0xb1ead=>{var _0x211a6c;return(_0x211a6c=_0xb1ead==null?void(0xc30+-0x1*0x1c19+0xfe9):_0xb1ead['file'])==null?void(0x1471+-0x1deb+0x97a*0x1):_0x211a6c['variants'][_0x53796f];}))break;}}}const _0x5eaeda=this['_file'],_0x1a2a04=_0xc738c5?new QA(_0xc738c5['url'],_0xc738c5['filename'],_0xc738c5['hash'],_0xc738c5['size'],_0xc738c5['opt'],_0xc738c5['contents']):null;(!!_0x1a2a04!=!!_0x5eaeda||_0x1a2a04&&!_0x1a2a04['equals'](_0x5eaeda))&&(this['_file']=_0x1a2a04,this['fire']('change',this,'file',_0x1a2a04,_0x5eaeda),this['reload']());}get['file'](){return this['_file'];}set['data'](_0x3c003c){const _0x520ee0=this['_data'];this['_data']=_0x3c003c,_0x3c003c!==_0x520ee0&&(this['fire']('change',this,'data',_0x3c003c,_0x520ee0),this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['data'](){return this['_data'];}set['resource'](_0x2b932d){const _0x1140b6=this['_resources'][0x1b4c+-0x1*0x1c8d+0x6b*0x3];this['_resources'][-0x24ee+-0x21cb+0xff*0x47]=_0x2b932d,this['fire']('change',this,'resource',_0x2b932d,_0x1140b6);}get['resource'](){return this['_resources'][0xcbf+0x1*-0xabf+-0x200*0x1];}set['resources'](_0x4181c8){const _0x10ce3f=this['_resources'];this['_resources']=_0x4181c8,this['fire']('change',this,'resources',_0x4181c8,_0x10ce3f);}get['resources'](){return this['_resources'];}set['preload'](_0xf7f243){_0xf7f243=!!_0xf7f243,this['_preload']!==_0xf7f243&&(this['_preload']=_0xf7f243,this['_preload']&&!this['loaded']&&!this['loading']&&this['registry']&&this['registry']['load'](this));}get['preload'](){return this['_preload'];}set['loadFaces'](_0x55fe9a){_0x55fe9a=!!_0x55fe9a,(!this['hasOwnProp'+'erty']('_loadFaces')||_0x55fe9a!==this['_loadFaces'])&&(this['_loadFaces']=_0x55fe9a,this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['loadFaces'](){return this['_loadFaces'];}['getFileUrl'](){const _0x1c712e=this['file'];if(!_0x1c712e||!_0x1c712e['url'])return null;let _0x299265=_0x1c712e['url'];if(this['registry']&&this['registry']['prefix']&&!Vn['test'](_0x299265)&&(_0x299265=this['registry']['prefix']+_0x299265),this['type']!=='script'&&_0x1c712e['hash']){const _0xba6cc9=_0x299265['indexOf']('?')!==-(-0x10f3+-0x492*0x5+0x27ce)?'&':'?';_0x299265+=_0xba6cc9+'t='+_0x1c712e['hash'];}return _0x299265;}['getAbsolut'+'eUrl'](_0x3e8729){if(_0x3e8729['startsWith']('blob:')||_0x3e8729['startsWith']('data:'))return _0x3e8729;const _0x184777=xe['getDirecto'+'ry'](this['file']['url']);return xe['join'](_0x184777,_0x3e8729);}['getLocaliz'+'edAssetId'](_0x13cba3){return _0x13cba3=Jy(_0x13cba3,this['_i18n']),this['_i18n'][_0x13cba3]||null;}['addLocaliz'+'edAssetId'](_0x29d104,_0xc0745a){this['_i18n'][_0x29d104]=_0xc0745a,this['fire']('add:locali'+'zed',_0x29d104,_0xc0745a);}['removeLoca'+'lizedAsset'+'Id'](_0x233da1){const _0xc2c87c=this['_i18n'][_0x233da1];_0xc2c87c&&(delete this['_i18n'][_0x233da1],this['fire']('remove:loc'+'alized',_0x233da1,_0xc2c87c));}['ready'](_0x1f886d,_0x44c223){_0x44c223=_0x44c223||this,this['loaded']?_0x1f886d['call'](_0x44c223,this):this['once']('load',_0x16753d=>{_0x1f886d['call'](_0x44c223,_0x16753d);});}['reload'](){this['loaded']&&(this['loaded']=!(-0x1*-0xa2d+0x4*-0x5b+-0x8c0),this['registry']['load'](this));}['unload'](){if(!this['loaded']&&this['_resources']['length']===0x43b+0x4a*0x43+-0x1*0x1799)return;this['fire']('unload',this),this['registry']['fire']('unload:'+this['id'],this);const _0x2cbd47=this['_resources'];this['urlObject']&&(URL['revokeObje'+'ctURL'](this['urlObject']),this['urlObject']=null),this['resources']=[],this['loaded']=!(-0xdfd*0x1+0x169c+-0x44f*0x2),this['file']&&this['registry']['_loader']['clearCache'](this['getFileUrl'](),this['type']);for(let _0x35b0c9=0x2c5*0x3+0x22ee+0x1*-0x2b3d;_0x35b0c9<_0x2cbd47['length'];++_0x35b0c9){const _0xdc6695=_0x2cbd47[_0x35b0c9];_0xdc6695&&_0xdc6695['destroy']&&_0xdc6695['destroy']();}}static['fetchArray'+'Buffer'](_0x1c9eb9,_0x4ce0c3,_0x5ae5b2,_0x29d2bf=0x1ee7*-0x1+-0x25e1+0x44c8){var _0x3ee0a7;(_0x3ee0a7=_0x5ae5b2==null?void(0x1*0xb4f+0x2*-0x40f+-0x1*0x331):_0x5ae5b2['file'])!=null&&_0x3ee0a7['contents']?setTimeout(()=>{_0x4ce0c3(null,_0x5ae5b2['file']['contents']);}):ot['get'](_0x1c9eb9,{'cache':!(0x86d+-0x2589+-0xcf*-0x24),'responseType':'arraybuffe'+'r','retry':_0x29d2bf>-0x16+0x1887+-0x1*0x1871,'maxRetries':_0x29d2bf},_0x4ce0c3);}}h(pe,'EVENT_LOAD','load'),h(pe,'EVENT_UNLO'+'AD','unload'),h(pe,'EVENT_REMO'+'VE','remove'),h(pe,'EVENT_ERRO'+'R','error'),h(pe,'EVENT_CHAN'+'GE','change'),h(pe,'EVENT_PROG'+'RESS','progress'),h(pe,'EVENT_ADDL'+'OCALIZED','add:locali'+'zed'),h(pe,'EVENT_REMO'+'VELOCALIZE'+'D','remove:loc'+'alized');class tC{constructor(_0x422f67=null){h(this,'_index',{}),h(this,'_key'),this['_key']=_0x422f67;}['addItem'](_0x1ecc4d){const _0x333d22=_0x1ecc4d['tags']['_list'];for(const _0x5d0eed of _0x333d22)this['add'](_0x5d0eed,_0x1ecc4d);}['removeItem'](_0x1b8bba){const _0x44c763=_0x1b8bba['tags']['_list'];for(const _0x39e478 of _0x44c763)this['remove'](_0x39e478,_0x1b8bba);}['add'](_0x389f1b,_0x3b6913){this['_index'][_0x389f1b]&&this['_index'][_0x389f1b]['list']['indexOf'](_0x3b6913)!==-(-0x75*-0x17+0x23ae+0x2e30*-0x1)||(this['_index'][_0x389f1b]||(this['_index'][_0x389f1b]={'list':[]},this['_key']&&(this['_index'][_0x389f1b]['keys']={})),this['_index'][_0x389f1b]['list']['push'](_0x3b6913),this['_key']&&(this['_index'][_0x389f1b]['keys'][_0x3b6913[this['_key']]]=_0x3b6913));}['remove'](_0x5085d2,_0x212b80){if(!this['_index'][_0x5085d2]||this['_key']&&!this['_index'][_0x5085d2]['keys'][_0x212b80[this['_key']]])return;const _0x456d4f=this['_index'][_0x5085d2]['list']['indexOf'](_0x212b80);_0x456d4f!==-(-0x11*-0x23+0x557*0x4+0xbd7*-0x2)&&(this['_index'][_0x5085d2]['list']['splice'](_0x456d4f,0x8e0+0x1ed2+-0x27b1),this['_key']&&delete this['_index'][_0x5085d2]['keys'][_0x212b80[this['_key']]],this['_index'][_0x5085d2]['list']['length']===0x1e60+-0x1*0x1e+-0x1e42&&delete this['_index'][_0x5085d2]);}['find'](_0x3ac1f7){const _0x45d76c={},_0x599217=[];let _0x417a4d,_0x49e9ab,_0x1547d6,_0x225f03,_0x919499;const _0x2681e2=(_0xab46d3,_0x17c342)=>this['_index'][_0xab46d3]['list']['length']-this['_index'][_0x17c342]['list']['length'];for(let _0x18e0d4=0x2034+0x1*-0x343+-0x1cf1;_0x18e0d4<_0x3ac1f7['length'];_0x18e0d4++){if(_0x49e9ab=_0x3ac1f7[_0x18e0d4],_0x49e9ab instanceof Array){if(_0x49e9ab['length']===-0xc20+-0x26*0xb5+-0x1*-0x26fe)continue;if(_0x49e9ab['length']===0x15*0x29+-0x1853+-0x14f7*-0x1)_0x49e9ab=_0x49e9ab[-0x57e*-0x4+-0x2155+0xb5d];else{_0x919499=!(0x9da+0x1210+-0x595*0x5);for(let _0xdfaed0=0x2*-0xba7+0x5c1+0x118d;_0xdfaed0<_0x49e9ab['length'];_0xdfaed0++)if(!this['_index'][_0x49e9ab[_0xdfaed0]]){_0x919499=!(-0x1*0x22d3+-0x213e+-0x2b9*-0x19);break;}if(_0x919499)continue;_0x1547d6=_0x49e9ab['slice'](-0x18*-0x184+-0x1320*0x1+-0x8*0x228)['sort'](_0x2681e2),_0x225f03=_0x1547d6['slice'](-0x183c+-0x22d8+0x5*0xbd1),_0x225f03['length']===0xd4a+0xa81+-0x7ee*0x3&&(_0x225f03=_0x225f03[-0xbc1+0x119a+-0x3*0x1f3]);for(let _0x1355ec=-0x11f9+-0x1f4e+0x3*0x106d;_0x1355ec<this['_index'][_0x1547d6[0xc61*0x1+0xbfe+-0x185f]]['list']['length'];_0x1355ec++)_0x417a4d=this['_index'][_0x1547d6[-0xb*-0x3f+0x2*-0x132d+0x23a5]]['list'][_0x1355ec],(this['_key']?!_0x45d76c[_0x417a4d[this['_key']]]:_0x599217['indexOf'](_0x417a4d)===-(0x7*0x409+0x11f5*0x1+-0x2e33))&&_0x417a4d['tags']['has'](_0x225f03)&&(this['_key']&&(_0x45d76c[_0x417a4d[this['_key']]]=!(0x1064+-0x41c*-0x3+-0x1cb8)),_0x599217['push'](_0x417a4d));continue;}}if(_0x49e9ab&&typeof _0x49e9ab=='string'&&this['_index'][_0x49e9ab]){for(let _0x2c111b=-0x1*-0x2405+-0x216e+-0xd*0x33;_0x2c111b<this['_index'][_0x49e9ab]['list']['length'];_0x2c111b++)_0x417a4d=this['_index'][_0x49e9ab]['list'][_0x2c111b],this['_key']?_0x45d76c[_0x417a4d[this['_key']]]||(_0x45d76c[_0x417a4d[this['_key']]]=!(-0x3*-0x970+0x619+-0x17f*0x17),_0x599217['push'](_0x417a4d)):_0x599217['indexOf'](_0x417a4d)===-(-0x1762*-0x1+-0x1823+-0xc2*-0x1)&&_0x599217['push'](_0x417a4d);}}return _0x599217;}}class ln extends me{constructor(_0x585403){super(),h(this,'_assets',new Set()),h(this,'_loader'),h(this,'_idToAsset',new Map()),h(this,'_urlToAsse'+'t',new Map()),h(this,'_nameToAss'+'et',new Map()),h(this,'_tags',new tC('id')),h(this,'prefix',null),h(this,'bundles',null),this['_loader']=_0x585403;}['list'](_0x24bf31={}){const _0x1f0dc6=Array['from'](this['_assets']);return _0x24bf31['preload']!==void(0x1883+-0x147c+-0x1*0x407)?_0x1f0dc6['filter'](_0x472254=>_0x472254['preload']===_0x24bf31['preload']):_0x1f0dc6;}['add'](_0x446ab4){var _0x28b75d,_0x302730;this['_assets']['has'](_0x446ab4)||(this['_assets']['add'](_0x446ab4),this['_idToAsset']['set'](_0x446ab4['id'],_0x446ab4),(_0x28b75d=_0x446ab4['file'])!=null&&_0x28b75d['url']&&this['_urlToAsse'+'t']['set'](_0x446ab4['file']['url'],_0x446ab4),this['_nameToAss'+'et']['has'](_0x446ab4['name'])||this['_nameToAss'+'et']['set'](_0x446ab4['name'],new Set()),this['_nameToAss'+'et']['get'](_0x446ab4['name'])['add'](_0x446ab4),_0x446ab4['on']('name',this['_onNameCha'+'nge'],this),_0x446ab4['registry']=this,this['_tags']['addItem'](_0x446ab4),_0x446ab4['tags']['on']('add',this['_onTagAdd'],this),_0x446ab4['tags']['on']('remove',this['_onTagRemo'+'ve'],this),this['fire']('add',_0x446ab4),this['fire']('add:'+_0x446ab4['id'],_0x446ab4),(_0x302730=_0x446ab4['file'])!=null&&_0x302730['url']&&this['fire']('add:url:'+_0x446ab4['file']['url'],_0x446ab4),_0x446ab4['preload']&&this['load'](_0x446ab4));}['remove'](_0x8e7f29){var _0x15c950,_0x1e7f82;if(!this['_assets']['has'](_0x8e7f29))return!(-0x469*0x8+-0x1d67+-0x45*-0xf0);if(this['_assets']['delete'](_0x8e7f29),this['_idToAsset']['delete'](_0x8e7f29['id']),(_0x15c950=_0x8e7f29['file'])!=null&&_0x15c950['url']&&this['_urlToAsse'+'t']['delete'](_0x8e7f29['file']['url']),_0x8e7f29['off']('name',this['_onNameCha'+'nge'],this),this['_nameToAss'+'et']['has'](_0x8e7f29['name'])){const _0xb4d3ce=this['_nameToAss'+'et']['get'](_0x8e7f29['name']);_0xb4d3ce['delete'](_0x8e7f29),_0xb4d3ce['size']===-0x25bf*-0x1+-0x14b9+0x1106*-0x1&&this['_nameToAss'+'et']['delete'](_0x8e7f29['name']);}return this['_tags']['removeItem'](_0x8e7f29),_0x8e7f29['tags']['off']('add',this['_onTagAdd'],this),_0x8e7f29['tags']['off']('remove',this['_onTagRemo'+'ve'],this),_0x8e7f29['fire']('remove',_0x8e7f29),this['fire']('remove',_0x8e7f29),this['fire']('remove:'+_0x8e7f29['id'],_0x8e7f29),(_0x1e7f82=_0x8e7f29['file'])!=null&&_0x1e7f82['url']&&this['fire']('remove:url'+':'+_0x8e7f29['file']['url'],_0x8e7f29),!(0x1*-0x1505+-0xf5*-0x1+0x1410);}['get'](_0x34624a){return this['_idToAsset']['get'](Number(_0x34624a));}['getByUrl'](_0x753c1){return this['_urlToAsse'+'t']['get'](_0x753c1);}['load'](_0x344dcc,_0x334f16){if((_0x344dcc['loading']||_0x344dcc['loaded'])&&!(_0x334f16!=null&&_0x334f16['force']))return;const _0x2896e2=_0x344dcc['file'],_0x154143=()=>{this['fire']('load',_0x344dcc),this['fire']('load:'+_0x344dcc['id'],_0x344dcc),_0x2896e2&&_0x2896e2['url']&&this['fire']('load:url:'+_0x2896e2['url'],_0x344dcc),_0x344dcc['fire']('load',_0x344dcc);},_0x41e81c=_0x83e775=>{if(_0x83e775 instanceof Array?_0x344dcc['resources']=_0x83e775:_0x344dcc['resource']=_0x83e775,this['_loader']['patch'](_0x344dcc,this),_0x344dcc['type']==='bundle'){const _0x53ad1d=_0x344dcc['data']['assets'];for(let _0x40210f=-0x183c*-0x1+-0x15d*-0xd+-0x1d3*0x17;_0x40210f<_0x53ad1d['length'];_0x40210f++){const _0x3bed4d=this['_idToAsset']['get'](_0x53ad1d[_0x40210f]);_0x3bed4d&&!_0x3bed4d['loaded']&&this['load'](_0x3bed4d,{'force':!(-0x1d*-0x76+-0x4ae+0x1*-0x8b0)});}_0x344dcc['resource']['loaded']?_0x154143():(this['fire']('load:start',_0x344dcc),this['fire']('load:start'+':'+_0x344dcc['id'],_0x344dcc),_0x2896e2&&_0x2896e2['url']&&this['fire']('load:start'+':url:'+_0x2896e2['url'],_0x344dcc),_0x344dcc['fire']('load:start',_0x344dcc),_0x344dcc['resource']['on']('load',_0x154143));}else _0x154143();},_0x3be4c4=(_0x330731,_0x13785,_0x1e2c07)=>{if(_0x344dcc['loaded']=!(0x1441+0x1b85+-0x5*0x98e),_0x344dcc['loading']=!(-0xa3+0x1*-0x1e01+0x621*0x5),_0x330731)this['fire']('error',_0x330731,_0x344dcc),this['fire']('error:'+_0x344dcc['id'],_0x330731,_0x344dcc),_0x344dcc['fire']('error',_0x330731,_0x344dcc);else{if(_0x344dcc['type']==='script'){const _0x30059e=this['_loader']['getHandler']('script');_0x30059e['_cache'][_0x344dcc['id']]&&_0x30059e['_cache'][_0x344dcc['id']]['parentNode']===document['head']&&document['head']['removeChil'+'d'](_0x30059e['_cache'][_0x344dcc['id']]),_0x30059e['_cache'][_0x344dcc['id']]=_0x1e2c07;}_0x41e81c(_0x13785);}};if(_0x2896e2||_0x344dcc['type']==='cubemap'){this['fire']('load:start',_0x344dcc),this['fire']('load:'+_0x344dcc['id']+':start',_0x344dcc),_0x344dcc['loading']=!(-0x25*-0x3+0x1d*-0x37+-0x5cc*-0x1);const _0x407acc=_0x344dcc['getFileUrl']();if(_0x344dcc['type']==='bundle'){const _0x2d9bec=_0x344dcc['data']['assets'];for(let _0x16d1fe=-0x207f+-0x5*-0x221+0x15da;_0x16d1fe<_0x2d9bec['length'];_0x16d1fe++){const _0x16cff3=this['_idToAsset']['get'](_0x2d9bec[_0x16d1fe]);_0x16cff3&&(_0x16cff3['loaded']||_0x16cff3['resource']||_0x16cff3['loading']||(_0x16cff3['loading']=!(-0x2246+-0x4*-0x62f+-0x21*-0x4a)));}}this['_loader']['load'](_0x407acc,_0x344dcc['type'],_0x3be4c4,_0x344dcc,_0x334f16);}else{const _0x57607b=this['_loader']['open'](_0x344dcc['type'],_0x344dcc['data']);_0x344dcc['loaded']=!(0x193a+-0x1a0+-0x179a),_0x41e81c(_0x57607b);}}['reloadInde'+'x'](_0x22c821,_0x44b794,_0x48108d){const _0x2deb3d=(_0x4911d1,_0x4f0369,_0x26e6c3)=>{_0x44b794['loaded']=!(-0x1*0x24a1+-0xd35+0x1*0x31d6),_0x44b794['loading']=!(0x3*0x8a3+-0x261b+0xc33);};return this['_loader']['load'](_0x22c821,_0x44b794['type'],_0x2deb3d,_0x44b794,_0x48108d),_0x44b794;}['loadFromUr'+'l'](_0x16e16d,_0x932d6a,_0x282e43){this['loadFromUr'+'lAndFilena'+'me'](_0x16e16d,null,_0x932d6a,_0x282e43);}['loadFromUr'+'lAndFilena'+'me'](_0x525750,_0x2734d1,_0x39be3c,_0x58fea7){const _0xdb0ea5=xe['getBasenam'+'e'](_0x2734d1||_0x525750),_0x5b7b56={'filename':_0x2734d1||_0xdb0ea5,'url':_0x525750};let _0xd859a2=this['getByUrl'](_0x525750);if(!_0xd859a2)_0xd859a2=new pe(_0xdb0ea5,_0x39be3c,_0x5b7b56),this['add'](_0xd859a2);else{if(_0xd859a2['loaded']){_0x58fea7(_0xd859a2['loadFromUr'+'lError']||null,_0xd859a2);return;}}const _0x11180c=_0x2dd554=>{_0x2dd554['once']('load',_0xafe363=>{_0x39be3c==='material'?this['_loadTextu'+'res'](_0xafe363,(_0x4e2d93,_0x3a0186)=>{_0x58fea7(_0x4e2d93,_0xafe363);}):_0x58fea7(null,_0xafe363);}),_0x2dd554['once']('error',_0x140ffb=>{_0x140ffb&&(this['loadFromUr'+'lError']=_0x140ffb),_0x58fea7(_0x140ffb,_0x2dd554);}),this['load'](_0x2dd554);};_0xd859a2['resource']?_0x58fea7(null,_0xd859a2):_0x39be3c==='model'?this['_loadModel'](_0xd859a2,_0x11180c):_0x11180c(_0xd859a2);}['_loadModel'](_0x1e986e,_0x1160e1){const _0x29a697=_0x1e986e['getFileUrl'](),_0x5e3d59=xe['getExtensi'+'on'](_0x29a697);if(_0x5e3d59==='.json'||_0x5e3d59==='.glb'){const _0x2e05ad=xe['getDirecto'+'ry'](_0x29a697),_0x175714=xe['getBasenam'+'e'](_0x29a697),_0xd24986=xe['join'](_0x2e05ad,_0x175714['replace'](_0x5e3d59,'.mapping.j'+'son'));this['_loader']['load'](_0xd24986,'json',(_0x1c5868,_0x2b3c36)=>{_0x1c5868?(_0x1e986e['data']={'mapping':[]},_0x1160e1(_0x1e986e)):this['_loadMater'+'ials'](_0x1e986e,_0x2b3c36,(_0x43c77f,_0x39e85d)=>{_0x1e986e['data']=_0x2b3c36,_0x1160e1(_0x1e986e);});});}else _0x1160e1(_0x1e986e);}['_loadMater'+'ials'](_0x2630d6,_0xa4f79f,_0x1fc4f4){const _0x59a6bd=[];let _0x54e67e=0x6bc+-0x1fbc+-0x28*-0xa0;const _0x447db2=(_0x101987,_0x31fdc4)=>{this['_loadTextu'+'res'](_0x31fdc4,(_0x292ea6,_0x4578c1)=>{_0x59a6bd['push'](_0x31fdc4),_0x59a6bd['length']===_0x54e67e&&_0x1fc4f4(null,_0x59a6bd);});};for(let _0x3f52b2=0x2*-0x101+-0xfe*-0x1f+-0x1cc0;_0x3f52b2<_0xa4f79f['mapping']['length'];_0x3f52b2++){const _0xf1c830=_0xa4f79f['mapping'][_0x3f52b2]['path'];if(_0xf1c830){_0x54e67e++;const _0x540d9b=_0x2630d6['getAbsolut'+'eUrl'](_0xf1c830);this['loadFromUr'+'l'](_0x540d9b,'material',_0x447db2);}}_0x54e67e===0x1131+-0x199d+0x31*0x2c&&_0x1fc4f4(null,_0x59a6bd);}['_loadTextu'+'res'](_0x1aa0fc,_0x3a3f32){const _0x34d031=[];let _0x3d08b3=0x25fb+-0x1a5a+-0xba1;const _0x3ea123=_0x1aa0fc['data'];if(_0x3ea123['mappingFor'+'mat']!=='path'){w['warn']('Skipping:\x20'+_0x1aa0fc['name']+(',\x20material'+'\x20files\x20mus'+'t\x20be\x20mappi'+'ngFormat:\x20'+'\x22path\x22\x20to\x20'+'be\x20loaded\x20'+'from\x20URL')),_0x3a3f32(null,_0x34d031);return;}const _0x233f3f=(_0x363da9,_0x543a4a)=>{_0x363da9&&console['error'](_0x363da9),_0x34d031['push'](_0x543a4a),_0x34d031['length']===_0x3d08b3&&_0x3a3f32(null,_0x34d031);},_0x20fed7=ad;for(let _0x2b7712=-0xaab+0xf*-0xc5+0xb1b*0x2;_0x2b7712<_0x20fed7['length'];_0x2b7712++){const _0x1849ee=_0x3ea123[_0x20fed7[_0x2b7712]];if(_0x1849ee&&typeof _0x1849ee=='string'){_0x3d08b3++;const _0x2d16c7=_0x1aa0fc['getAbsolut'+'eUrl'](_0x1849ee);this['loadFromUr'+'l'](_0x2d16c7,'texture',_0x233f3f);}}_0x3d08b3===-0x1faa+-0x4*0x6c5+0x3abe&&_0x3a3f32(null,_0x34d031);}['_onTagAdd'](_0x280434,_0x1d1dc7){this['_tags']['add'](_0x280434,_0x1d1dc7);}['_onTagRemo'+'ve'](_0xb39b5a,_0x3b074c){this['_tags']['remove'](_0xb39b5a,_0x3b074c);}['_onNameCha'+'nge'](_0x32753f,_0x51f1a2,_0x2ba561){if(this['_nameToAss'+'et']['has'](_0x2ba561)){const _0x4acd62=this['_nameToAss'+'et']['get'](_0x2ba561);_0x4acd62['delete'](_0x32753f),_0x4acd62['size']===-0x22c1*-0x1+-0x8e6+-0x19db&&this['_nameToAss'+'et']['delete'](_0x2ba561);}this['_nameToAss'+'et']['has'](_0x32753f['name'])||this['_nameToAss'+'et']['set'](_0x32753f['name'],new Set()),this['_nameToAss'+'et']['get'](_0x32753f['name'])['add'](_0x32753f);}['findByTag'](..._0xaea55a){return this['_tags']['find'](_0xaea55a);}['filter'](_0x36f3fc){return Array['from'](this['_assets'])['filter'](_0x3e3050=>_0x36f3fc(_0x3e3050));}['find'](_0x4a9b8d,_0x41e782){const _0x2065fd=this['_nameToAss'+'et']['get'](_0x4a9b8d);if(!_0x2065fd)return null;for(const _0x42e816 of _0x2065fd)if(!_0x41e782||_0x42e816['type']===_0x41e782)return _0x42e816;return null;}['findAll'](_0x1829a9,_0x2927f6){const _0x3ab447=this['_nameToAss'+'et']['get'](_0x1829a9);if(!_0x3ab447)return[];const _0x1f9bb9=Array['from'](_0x3ab447);return _0x2927f6?_0x1f9bb9['filter'](_0x15c2bb=>_0x15c2bb['type']===_0x2927f6):_0x1f9bb9;}}h(ln,'EVENT_LOAD','load'),h(ln,'EVENT_ADD','add'),h(ln,'EVENT_REMO'+'VE','remove'),h(ln,'EVENT_ERRO'+'R','error');class sC{constructor(_0x326ded){h(this,'_idToBundl'+'e',new Map()),h(this,'_assetToBu'+'ndles',new Map()),h(this,'_urlsToBun'+'dles',new Map()),h(this,'_fileReque'+'sts',new Map()),(this['_assets']=_0x326ded,this['_assets']['bundles']=this,this['_assets']['on']('add',this['_onAssetAd'+'d'],this),this['_assets']['on']('remove',this['_onAssetRe'+'move'],this));}['_onAssetAd'+'d'](_0x49f975){if(_0x49f975['type']==='bundle'){this['_idToBundl'+'e']['set'](_0x49f975['id'],_0x49f975),this['_assets']['on']('load:start'+':'+_0x49f975['id'],this['_onBundleL'+'oadStart'],this),this['_assets']['on']('load:'+_0x49f975['id'],this['_onBundleL'+'oad'],this),this['_assets']['on']('error:'+_0x49f975['id'],this['_onBundleE'+'rror'],this);const _0x2aac08=_0x49f975['data']['assets'];for(let _0xbd3e25=-0x1309+-0x3*-0x17d+0xe92;_0xbd3e25<_0x2aac08['length'];_0xbd3e25++)this['_indexAsse'+'tInBundle'](_0x2aac08[_0xbd3e25],_0x49f975);}else this['_assetToBu'+'ndles']['has'](_0x49f975['id'])&&this['_indexAsse'+'tFileUrls'](_0x49f975);}['_unbindAss'+'etEvents'](_0x1a8e98){this['_assets']['off']('load:start'+':'+_0x1a8e98,this['_onBundleL'+'oadStart'],this),this['_assets']['off']('load:'+_0x1a8e98,this['_onBundleL'+'oad'],this),this['_assets']['off']('error:'+_0x1a8e98,this['_onBundleE'+'rror'],this);}['_indexAsse'+'tInBundle'](_0x250770,_0x57e4a7){let _0x1163d1=this['_assetToBu'+'ndles']['get'](_0x250770);_0x1163d1||(_0x1163d1=new Set(),this['_assetToBu'+'ndles']['set'](_0x250770,_0x1163d1)),_0x1163d1['add'](_0x57e4a7);const _0xd1be42=this['_assets']['get'](_0x250770);_0xd1be42&&this['_indexAsse'+'tFileUrls'](_0xd1be42);}['_indexAsse'+'tFileUrls'](_0x1b3d4e){const _0x251825=this['_getAssetF'+'ileUrls'](_0x1b3d4e);if(_0x251825)for(let _0x2f27fc=0x1*0x1979+-0x1b3d*-0x1+-0x8c9*0x6;_0x2f27fc<_0x251825['length'];_0x2f27fc++){const _0x4ce794=this['_assetToBu'+'ndles']['get'](_0x1b3d4e['id']);_0x4ce794&&this['_urlsToBun'+'dles']['set'](_0x251825[_0x2f27fc],_0x4ce794);}}['_getAssetF'+'ileUrls'](_0x494db6){let _0x489557=_0x494db6['getFileUrl']();if(!_0x489557)return null;_0x489557=_0x489557['split']('?')[-0x1bc5+0xca4+0xf21];const _0xa727f3=[_0x489557];if(_0x494db6['type']==='font'){const _0x2b6aa2=_0x494db6['data']['info']['maps']['length'];for(let _0x576367=-0x192*-0x16+0x1687+0x3ce*-0xf;_0x576367<_0x2b6aa2;_0x576367++)_0xa727f3['push'](_0x489557['replace']('.png',_0x576367+'.png'));}return _0xa727f3;}['_onAssetRe'+'move'](_0x2444e6){if(_0x2444e6['type']==='bundle'){this['_idToBundl'+'e']['delete'](_0x2444e6['id']),this['_unbindAss'+'etEvents'](_0x2444e6['id']);const _0x5ad9b2=_0x2444e6['data']['assets'];for(let _0x1a2e11=-0x1*0xc0e+0x9d1+0x23d;_0x1a2e11<_0x5ad9b2['length'];_0x1a2e11++){const _0x42b3e5=this['_assetToBu'+'ndles']['get'](_0x5ad9b2[_0x1a2e11]);if(_0x42b3e5&&(_0x42b3e5['delete'](_0x2444e6),_0x42b3e5['size']===-0x1*-0xf43+0x1*-0x3a4+-0xb9f)){this['_assetToBu'+'ndles']['delete'](_0x5ad9b2[_0x1a2e11]);for(const [_0x14ca37,_0x2c9c74]of this['_urlsToBun'+'dles'])_0x2c9c74===_0x42b3e5&&this['_urlsToBun'+'dles']['delete'](_0x14ca37);}}this['_onBundleE'+'rror']('Bundle\x20'+_0x2444e6['id']+('\x20was\x20remov'+'ed'));}else{if(!this['_assetToBu'+'ndles']['get'](_0x2444e6['id']))return;this['_assetToBu'+'ndles']['delete'](_0x2444e6['id']);const _0x44b4b6=this['_getAssetF'+'ileUrls'](_0x2444e6);if(!_0x44b4b6)return;for(let _0xf50f44=-0x11*-0x204+-0x1b2f+-0x715;_0xf50f44<_0x44b4b6['length'];_0xf50f44++)this['_urlsToBun'+'dles']['delete'](_0x44b4b6[_0xf50f44]);}}['_onBundleL'+'oadStart'](_0x47d877){_0x47d877['resource']['on']('add',(_0x2a5ab3,_0x3221bf)=>{const _0x4bc972=this['_fileReque'+'sts']['get'](_0x2a5ab3);if(_0x4bc972){for(let _0x407ec4=-0x859*-0x1+0x1*-0x2f1+0xad*-0x8;_0x407ec4<_0x4bc972['length'];_0x407ec4++)_0x4bc972[_0x407ec4](null,_0x3221bf);this['_fileReque'+'sts']['delete'](_0x2a5ab3);}});}['_onBundleL'+'oad'](_0x44cdc7){if(!_0x44cdc7['resource']){this['_onBundleE'+'rror']('Bundle\x20'+_0x44cdc7['id']+('\x20failed\x20to'+'\x20load'));return;}if(this['_fileReque'+'sts'])for(const [_0x4f1342,_0x1adf35]of this['_fileReque'+'sts']){const _0x5570e3=this['_urlsToBun'+'dles']['get'](_0x4f1342);if(!_0x5570e3||!_0x5570e3['has'](_0x44cdc7))continue;const _0x5ef264=decodeURIComponent(_0x4f1342);let _0x52e653,_0x11b39b;if(_0x44cdc7['resource']['has'](_0x5ef264))_0x11b39b=_0x44cdc7['resource']['get'](_0x5ef264);else{if(_0x44cdc7['resource']['loaded'])_0x52e653='Bundle\x20'+_0x44cdc7['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x4f1342;else continue;}for(let _0x4e317e=-0x1*-0x647+0x466*0x1+-0xaad;_0x4e317e<_0x1adf35['length'];_0x4e317e++)_0x1adf35[_0x4e317e](_0x52e653,_0x52e653||_0x11b39b);this['_fileReque'+'sts']['delete'](_0x4f1342);}}['_onBundleE'+'rror'](_0x5bf41e){for(const [_0x50551e,_0xc2ed07]of this['_fileReque'+'sts'])if(!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x50551e)){for(let _0x23975d=-0x2451+0x153e+-0x11*-0xe3;_0x23975d<_0xc2ed07['length'];_0x23975d++)_0xc2ed07[_0x23975d](_0x5bf41e);this['_fileReque'+'sts']['delete'](_0x50551e);}}['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x3bc953){const _0x534c83=this['_urlsToBun'+'dles']['get'](_0x3bc953);if(!_0x534c83)return null;let _0x4e4f90=null;for(const _0x252e0a of _0x534c83){if(_0x252e0a['loaded']&&_0x252e0a['resource'])return _0x252e0a;_0x252e0a['loading']&&(_0x4e4f90=_0x252e0a);}return _0x4e4f90;}['listBundle'+'sForAsset'](_0x540f0b){const _0x5772ca=this['_assetToBu'+'ndles']['get'](_0x540f0b['id']);return _0x5772ca?Array['from'](_0x5772ca):null;}['list'](){return Array['from'](this['_idToBundl'+'e']['values']());}['hasUrl'](_0x1b43e0){return this['_urlsToBun'+'dles']['has'](_0x1b43e0);}['urlIsLoade'+'dOrLoading'](_0x25b878){return!!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x25b878);}['loadUrl'](_0x1ad090,_0x3ef6b3){const _0x524640=this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x1ad090);if(!_0x524640){_0x3ef6b3('URL\x20'+_0x1ad090+('\x20not\x20found'+'\x20in\x20any\x20bu'+'ndles'));return;}if(_0x524640['loaded']){const _0x30c084=decodeURIComponent(_0x1ad090);if(_0x524640['resource']['has'](_0x30c084)){_0x3ef6b3(null,_0x524640['resource']['get'](_0x30c084));return;}else{if(_0x524640['resource']['loaded']){_0x3ef6b3('Bundle\x20'+_0x524640['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x1ad090);return;}}}let _0xea490e=this['_fileReque'+'sts']['get'](_0x1ad090);_0xea490e||(_0xea490e=[],this['_fileReque'+'sts']['set'](_0x1ad090,_0xea490e)),_0xea490e['push'](_0x3ef6b3);}['destroy'](){this['_assets']['off']('add',this['_onAssetAd'+'d'],this),this['_assets']['off']('remove',this['_onAssetRe'+'move'],this);for(const _0xd8e0b of this['_idToBundl'+'e']['keys']())this['_unbindAss'+'etEvents'](_0xd8e0b);this['_assets']=null,this['_idToBundl'+'e']['clear'](),this['_idToBundl'+'e']=null,this['_assetToBu'+'ndles']['clear'](),this['_assetToBu'+'ndles']=null,this['_urlsToBun'+'dles']['clear'](),this['_urlsToBun'+'dles']=null,this['_fileReque'+'sts']['clear'](),this['_fileReque'+'sts']=null;}}class iC extends me{constructor(){super(),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'joint'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'zone'),this['list']=[];}['add'](_0x4beb7b){const _0x331f31=_0x4beb7b['id'];if(this[_0x331f31])throw new Error('ComponentS'+'ystem\x20name'+'\x20\x27'+_0x331f31+('\x27\x20already\x20'+'registered'+'\x20or\x20not\x20al'+'lowed'));this[_0x331f31]=_0x4beb7b,this['list']['push'](_0x4beb7b);}['remove'](_0x3de732){const _0x6856c2=_0x3de732['id'];if(!this[_0x6856c2])throw new Error('No\x20Compone'+'ntSystem\x20n'+'amed\x20\x27'+_0x6856c2+('\x27\x20register'+'ed'));delete this[_0x6856c2];const _0x24b117=this['list']['indexOf'](this[_0x6856c2]);_0x24b117!==-(0x2003+0x57f*-0x1+-0x1a83*0x1)&&this['list']['splice'](_0x24b117,0xca7+-0x1*0x1103+0x45d);}['destroy'](){this['off']();for(let _0x248a59=0x41*0x95+-0x327+-0x22ae;_0x248a59<this['list']['length'];_0x248a59++)this['list'][_0x248a59]['destroy']();}}class $f extends me{constructor(){super(...arguments),h(this,'_index',new Map()),h(this,'_loaded',!(-0xa8b*0x1+0x2b*0x25+0x1*0x455));}['addFile'](_0x4886a4,_0x5cd16f){this['_index']['has'](_0x4886a4)||(this['_index']['set'](_0x4886a4,_0x5cd16f),this['fire']('add',_0x4886a4,_0x5cd16f));}['has'](_0x1aa370){return this['_index']['has'](_0x1aa370);}['get'](_0xdec712){return this['_index']['get'](_0xdec712)||null;}['destroy'](){this['_index']['clear']();}set['loaded'](_0x202de9){!_0x202de9||this['_loaded']||(this['_loaded']=!(-0x1ed+-0x5*-0x5db+-0x1b5a),this['fire']('load'));}get['loaded'](){return this['_loaded'];}}h($f,'EVENT_ADD','add'),h($f,'EVENT_LOAD','load');class rC extends me{constructor(_0x171962,_0x1f696e=''){super(),h(this,'headerSize',0x1f65+0x259f+-0x4304),h(this,'paddingSiz'+'e',0x2c9*-0x1+0x1*-0xb19+0x1*0xfe2),h(this,'bytesRead',0x2e5+-0x18a*-0x2+-0x5f9),h(this,'bytesRecei'+'ved',0x4c4+0x3*0xfd+0x7bb*-0x1),h(this,'headerRead',!(-0x4c9*-0x1+-0xd61+0x1*0x899)),h(this,'reader',null),h(this,'data',new Uint8Array(0x17*0xbb+-0x88d*-0x1+-0x195a)),h(this,'decoder',null),h(this,'prefix',''),h(this,'fileName',''),h(this,'fileSize',-0xd41+0x12a0+-0x55f),h(this,'fileType',''),h(this,'ustarForma'+'t',''),(this['prefix']=_0x1f696e||'',this['reader']=_0x171962['body']['getReader'](),this['reader']['read']()['then'](_0xdb17e3=>{this['pump'](_0xdb17e3['done'],_0xdb17e3['value']);})['catch'](_0x340c39=>{this['fire']('error',_0x340c39);}));}['pump'](_0x4a2c88,_0x3e938e){if(_0x4a2c88)return this['fire']('done'),null;this['bytesRecei'+'ved']+=_0x3e938e['byteLength'];const _0x185f50=new Uint8Array(this['data']['length']+_0x3e938e['length']);for(_0x185f50['set'](this['data']),_0x185f50['set'](_0x3e938e,this['data']['length']),this['data']=_0x185f50;this['readFile'](););return this['reader']['read']()['then'](_0x253860=>{this['pump'](_0x253860['done'],_0x253860['value']);})['catch'](_0x273d55=>{this['fire']('error',_0x273d55);});}['readFile'](){if(!this['headerRead']&&this['bytesRecei'+'ved']>this['bytesRead']+this['headerSize']){this['headerRead']=!(0x31d*-0x3+0x11be+-0x867);const _0x210f34=new DataView(this['data']['buffer'],this['bytesRead'],this['headerSize']);this['decoder']??(this['decoder']=new TextDecoder('windows-12'+'52'));const _0x31c36d=this['decoder']['decode'](_0x210f34);if(this['fileName']=_0x31c36d['substring'](-0x1b4+-0x7d*-0x32+-0x16b6,-0x15c9+-0x218e+0x37bb)['replace'](/\0/g,''),this['fileSize']=parseInt(_0x31c36d['substring'](-0x1*0xe71+0x10c*-0x2+0x1105,-0xb*0x17f+0xd04+0x3f9),0x1cbc+0x212*0xd+-0x379e),this['fileType']=_0x31c36d['substring'](-0x10b3+-0x447+-0x266*-0x9,-0xd*0x19b+-0x1*0x1d41+0x32bd),this['ustarForma'+'t']=_0x31c36d['substring'](-0x1449+-0x2709*-0x1+-0x7*0x289,-0xb8+0x1375+-0x11b6),this['ustarForma'+'t']['indexOf']('ustar')!==-(-0x1*0x476+0x1*0x11ed+0x2*-0x6bb)){const _0x219cd2=_0x31c36d['substring'](0x2*0x6f8+0x9*0x36b+-0x2*0x15ad,0xc*-0x1ee+0x1121+0x7fb)['replace'](/\0/g,'');_0x219cd2['length']>0x17a7+0x1811+-0x2fb8&&(this['fileName']=_0x219cd2['trim']()+this['fileName']['trim']());}this['bytesRead']+=-0x15a6*-0x1+-0x1c92+0x8ec;}if(this['headerRead']){if(this['bytesRecei'+'ved']<this['bytesRead']+this['fileSize'])return!(-0x1245+0x1214+-0xa*-0x5);if(this['fileType']===''||this['fileType']==='0'){const _0x57cdd=new DataView(this['data']['buffer'],this['bytesRead'],this['fileSize']),_0x123e94={'name':this['prefix']+this['fileName'],'size':this['fileSize'],'data':_0x57cdd};this['fire']('file',_0x123e94);}this['bytesRead']+=this['fileSize'],this['headerRead']=!(-0x25d7*0x1+0x5*0x4e3+-0x1*-0xd69);const _0x1c2c53=this['bytesRead']%this['paddingSiz'+'e'];return _0x1c2c53!==-0x114e+-0x25a2+-0x1b78*-0x2&&(this['bytesRead']+=this['paddingSiz'+'e']-_0x1c2c53),!(-0xc06+-0x14df+-0x7*-0x4b3);}return!(-0xa70+-0x201a*-0x1+-0x5*0x455);}}class Qe{constructor(_0x25d010,_0xe6bf11){h(this,'handlerTyp'+'e',''),h(this,'_app'),h(this,'_maxRetrie'+'s',0x10d3+-0x73a+-0x999),(this['_app']=_0x25d010,this['handlerTyp'+'e']=_0xe6bf11);}set['maxRetries'](_0x31f321){this['_maxRetrie'+'s']=_0x31f321;}get['maxRetries'](){return this['_maxRetrie'+'s'];}['load'](_0x20f7fd,_0x5a44ce,_0x245825){}['open'](_0x475e12,_0x509c5e,_0x1a77c6){return _0x509c5e;}['patch'](_0xed2d3e,_0x24a002){}}class aC extends Qe{constructor(_0x454c22){super(_0x454c22,'bundle'),this['_assets']=_0x454c22['assets'];}['_fetchRetr'+'ies'](_0x335b1e,_0x551151,_0x2913de=0x1a*0xa6+-0x10e5+0x3*0x3){return new Promise((_0x1555d5,_0x498d9b)=>{const _0x5ae6d7=()=>{fetch(_0x335b1e,_0x551151)['then'](_0x1555d5)['catch'](_0x39b044=>{_0x2913de++,_0x2913de<this['maxRetries']?(w['error']('Bundle\x20fai'+'led\x20to\x20loa'+'d\x20retrying'+'\x20(attempt\x20'+_0x2913de),_0x5ae6d7()):_0x498d9b(_0x39b044);});};_0x5ae6d7();});}['load'](_0x29fa58,_0x46cc38){typeof _0x29fa58=='string'&&(_0x29fa58={'load':_0x29fa58,'original':_0x29fa58}),this['_fetchRetr'+'ies'](_0x29fa58['load'],{'mode':'cors'},this['maxRetries'])['then'](_0x8f7269=>{const _0x42a6aa=new $f();_0x46cc38(null,_0x42a6aa);const _0x11ec38=new rC(_0x8f7269,this['_assets']['prefix']);_0x11ec38['on']('file',_0x9b867f=>{_0x42a6aa['addFile'](_0x9b867f['name'],_0x9b867f['data']);}),_0x11ec38['on']('done',()=>{_0x42a6aa['loaded']=!(-0x1f95+-0x72e+0x26c3*0x1);}),_0x11ec38['on']('error',_0x5ee9de=>{w['error'](_0x5ee9de),_0x46cc38(_0x5ee9de);});})['catch'](_0x101779=>{w['error'](_0x101779),_0x46cc38(_0x101779);});}['open'](_0x3e173c,_0x5f1b60){return _0x5f1b60;}}class vn{constructor(_0x158926){this['_handlers']={},this['_requests']={},this['_cache']={},this['_app']=_0x158926;}['addHandler'](_0x1f4e8b,_0x34198e){this['_handlers'][_0x1f4e8b]=_0x34198e,_0x34198e['_loader']=this;}['removeHand'+'ler'](_0x45520a){delete this['_handlers'][_0x45520a];}['getHandler'](_0x341592){return this['_handlers'][_0x341592];}static['makeKey'](_0x352089,_0x29138a){return _0x352089+'-'+_0x29138a;}['load'](_0x247fa1,_0xafd677,_0x50ea90,_0x388d7f,_0x543835){var _0xea4c50;const _0xea2575=this['_handlers'][_0xafd677];if(!_0xea2575){const _0xf17391='No\x20resourc'+'e\x20handler\x20'+'for\x20asset\x20'+'type:\x20\x27'+_0xafd677+('\x27\x20when\x20loa'+'ding\x20[')+_0x247fa1+']';w['errorOnce'](_0xf17391),_0x50ea90(_0xf17391);return;}if(!_0x247fa1){this['_loadNull'](_0xea2575,_0x50ea90,_0x388d7f);return;}const _0x3dab17=vn['makeKey'](_0x247fa1,_0xafd677);if(this['_requests'][_0x3dab17])this['_requests'][_0x3dab17]['push'](_0x50ea90);else{this['_requests'][_0x3dab17]=[_0x50ea90];const _0x1e25bb=this,_0x36a827=function(_0x25d4db,_0x2f9a04){if(_0x25d4db){_0x1e25bb['_onFailure'](_0x3dab17,_0x25d4db);return;}if(_0x2f9a04['load']instanceof DataView){if(_0xea2575['openBinary']){if(!_0x1e25bb['_requests'][_0x3dab17])return;try{const _0x1c0773=_0xea2575['openBinary'](_0x2f9a04['load']);_0x1e25bb['_onSuccess'](_0x3dab17,_0x1c0773);}catch(_0x19e283){_0x1e25bb['_onFailure'](_0x3dab17,_0x19e283);}return;}_0x2f9a04['load']=URL['createObje'+'ctURL'](new Blob([_0x2f9a04['load']])),_0x388d7f&&(_0x388d7f['urlObject']&&URL['revokeObje'+'ctURL'](_0x388d7f['urlObject']),_0x388d7f['urlObject']=_0x2f9a04['load']);}_0xea2575['load'](_0x2f9a04,(_0x3df270,_0x5e822c,_0x516190)=>{if(_0x1e25bb['_requests'][_0x3dab17]){if(_0x3df270){_0x1e25bb['_onFailure'](_0x3dab17,_0x3df270);return;}try{_0x1e25bb['_onSuccess'](_0x3dab17,_0xea2575['open'](_0x2f9a04['original'],_0x5e822c,_0x388d7f),_0x516190);}catch(_0xe509c){_0x1e25bb['_onFailure'](_0x3dab17,_0xe509c);}}},_0x388d7f);},_0x40d60d=_0x247fa1['split']('?')[0xf7*0x7+0x86b+-0xf2c];if(this['_app']['enableBund'+'les']&&this['_app']['bundles']['hasUrl'](_0x40d60d)&&!(_0x543835&&_0x543835['bundlesIgn'+'ore'])){if(!this['_app']['bundles']['urlIsLoade'+'dOrLoading'](_0x40d60d)){const _0xb5e873=this['_app']['bundles']['listBundle'+'sForAsset'](_0x388d7f);let _0x52c2c6;_0x543835&&_0x543835['bundlesFil'+'ter']&&(_0x52c2c6=_0x543835['bundlesFil'+'ter'](_0xb5e873)),_0x52c2c6||(_0xb5e873==null||_0xb5e873['sort']((_0x4e0c0a,_0x16373e)=>_0x4e0c0a['file']['size']-_0x16373e['file']['size']),_0x52c2c6=_0xb5e873==null?void(0x1*0x102a+0x1*0x2171+0x3*-0x1089):_0xb5e873[-0x3*0x2c5+0x246e+-0x1c1f]),_0x52c2c6&&((_0xea4c50=this['_app']['assets'])==null||_0xea4c50['load'](_0x52c2c6));}this['_app']['bundles']['loadUrl'](_0x40d60d,(_0x250083,_0x1faef3)=>{_0x36a827(_0x250083,{'load':_0x1faef3,'original':_0x40d60d});});}else _0x36a827(null,{'load':_0x247fa1,'original':_0x388d7f&&_0x388d7f['file']['filename']||_0x247fa1});}}['_loadNull'](_0x2ec04a,_0x21a09a,_0x23b81b){const _0x2a8c84=function(_0x13462b,_0x5ab95b,_0x523828){if(_0x13462b)_0x21a09a(_0x13462b);else try{_0x21a09a(null,_0x2ec04a['open'](null,_0x5ab95b,_0x23b81b),_0x523828);}catch(_0x1020af){_0x21a09a(_0x1020af);}};_0x2ec04a['load'](null,_0x2a8c84,_0x23b81b);}['_onSuccess'](_0x82c8ad,_0x462c8d,_0x18a9bd){for(let _0x3d800f=0xfb8+0x1*0x1db1+-0x2d69;_0x3d800f<this['_requests'][_0x82c8ad]['length'];_0x3d800f++)this['_requests'][_0x82c8ad][_0x3d800f](null,_0x462c8d,_0x18a9bd);delete this['_requests'][_0x82c8ad];}['_onFailure'](_0x3b9c14,_0x180cbb){if(console['error'](_0x180cbb),this['_requests'][_0x3b9c14]){for(let _0x1d8635=0x25b9+0xc7c+-0x3235;_0x1d8635<this['_requests'][_0x3b9c14]['length'];_0x1d8635++)this['_requests'][_0x3b9c14][_0x1d8635](_0x180cbb);delete this['_requests'][_0x3b9c14];}}['open'](_0x492269,_0x1a7d4c){const _0x4e1530=this['_handlers'][_0x492269];return _0x4e1530?_0x4e1530['open'](null,_0x1a7d4c):(console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x492269),_0x1a7d4c);}['patch'](_0xec4009,_0x505991){const _0x53ddd4=this['_handlers'][_0xec4009['type']];if(!_0x53ddd4){console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0xec4009['type']);return;}_0x53ddd4['patch']&&_0x53ddd4['patch'](_0xec4009,_0x505991);}['clearCache'](_0x51a846,_0x6a6d3d){const _0x3ba66f=vn['makeKey'](_0x51a846,_0x6a6d3d);delete this['_cache'][_0x3ba66f];}['getFromCac'+'he'](_0x150e7b,_0x2c4983){const _0x27851b=vn['makeKey'](_0x150e7b,_0x2c4983);if(this['_cache'][_0x27851b])return this['_cache'][_0x27851b];}['enableRetr'+'y'](_0x23fc3c=0x1*-0xaf+0x1*-0x1b25+0x1*0x1bd9){_0x23fc3c=Math['max'](-0x21+-0x9e*-0x25+-0x16b5*0x1,_0x23fc3c)||-0x5b8*-0x6+0x1*-0x15e+-0x20f2;for(const _0x1daebc in this['_handlers'])this['_handlers'][_0x1daebc]['maxRetries']=_0x23fc3c;}['disableRet'+'ry'](){for(const _0x1bec9c in this['_handlers'])this['_handlers'][_0x1bec9c]['maxRetries']=0x1777+0x3c7*0x1+-0x1b3e;}['destroyReq'+'uests'](){this['_requests']={};}['destroy'](){this['_handlers']={},this['_requests']={},this['_cache']={};}}class nC{['_validate'](_0x6a7006){if(!_0x6a7006['header'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er\x22\x20field');if(!_0x6a7006['header']['version'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er.version'+'\x22\x20field');if(_0x6a7006['header']['version']!==-0x2025+0x1605+0x1*0xa21)throw new Error('pc.I18n#ad'+'dData:\x20Inv'+'alid\x20\x22head'+'er.version'+'\x22\x20field');if(_0x6a7006['data']){if(!Array['isArray'](_0x6a7006['data']))throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta\x22\x20field\x20'+'must\x20be\x20an'+'\x20array');}else throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22data'+'\x22\x20field');for(let _0x4fc853=0x2*0x50b+-0x1ed*0xe+0x6*0x2d0,_0x11b3a8=_0x6a7006['data']['length'];_0x4fc853<_0x11b3a8;_0x4fc853++){const _0x4a2de7=_0x6a7006['data'][_0x4fc853];if(!_0x4a2de7['info'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x4fc853+('].info\x22\x20fi'+'eld'));if(!_0x4a2de7['info']['locale'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x4fc853+('].info.loc'+'ale\x22\x20field'));if(typeof _0x4a2de7['info']['locale']!='string')throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta['+_0x4fc853+('].info.loc'+'ale\x22\x20must\x20'+'be\x20a\x20strin'+'g'));if(!_0x4a2de7['messages'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x4fc853+('].messages'+'\x22\x20field'));}}['parse'](_0x1a4f77){return this['_validate'](_0x1a4f77),_0x1a4f77['data'];}}const vh=class vh extends me{constructor(_0x56cbaf){super(),this['locale']=nh,this['_translati'+'ons']={},this['_available'+'Langs']={},this['_app']=_0x56cbaf,this['_assets']=[],this['_parser']=new nC();}set['assets'](_0x1be8b8){const _0xe8b5db={};for(let _0x2a6bbe=0x11a*0x1f+-0xe75*0x1+-0x13b1,_0x5040af=_0x1be8b8['length'];_0x2a6bbe<_0x5040af;_0x2a6bbe++){const _0x5394b6=_0x1be8b8[_0x2a6bbe]instanceof pe?_0x1be8b8[_0x2a6bbe]['id']:_0x1be8b8[_0x2a6bbe];_0xe8b5db[_0x5394b6]=!(0x1787+0x1*-0x1306+-0x1*0x481);}let _0x565ee7=this['_assets']['length'];for(;_0x565ee7--;){const _0xc35d32=this['_assets'][_0x565ee7];if(!_0xe8b5db[_0xc35d32]){this['_app']['assets']['off']('add:'+_0xc35d32,this['_onAssetAd'+'d'],this);const _0x2ec12e=this['_app']['assets']['get'](_0xc35d32);_0x2ec12e&&this['_onAssetRe'+'move'](_0x2ec12e),this['_assets']['splice'](_0x565ee7,-0x16e7+-0x1be6+0x32ce);}}for(const _0x792ad5 in _0xe8b5db){const _0xe6dc7a=parseInt(_0x792ad5,0x56*-0x5a+0x14f5+-0x9f*-0xf);if(this['_assets']['indexOf'](_0xe6dc7a)!==-(0x14a4+-0x31*0x1d+-0xf16))continue;this['_assets']['push'](_0xe6dc7a);const _0x235f65=this['_app']['assets']['get'](_0xe6dc7a);_0x235f65?this['_onAssetAd'+'d'](_0x235f65):this['_app']['assets']['once']('add:'+_0xe6dc7a,this['_onAssetAd'+'d'],this);}}get['assets'](){return this['_assets'];}set['locale'](_0x5d26d5){if(this['_locale']===_0x5d26d5)return;let _0x5693d3=Ri(_0x5d26d5);if(_0x5693d3==='in'&&(_0x5693d3='id',_0x5d26d5=KA(_0x5d26d5,_0x5693d3),this['_locale']===_0x5d26d5))return;const _0x258274=this['_locale'];this['_locale']=_0x5d26d5,this['_lang']=_0x5693d3,this['_pluralFn']=Jd(this['_lang']),this['fire'](vh['EVENT_CHAN'+'GE'],_0x5d26d5,_0x258274);}get['locale'](){return this['_locale'];}static['findAvaila'+'bleLocale'](_0x2f0320,_0x488b1e){return Jy(_0x2f0320,_0x488b1e);}['findAvaila'+'bleLocale'](_0xecaac9){if(this['_translati'+'ons'][_0xecaac9])return _0xecaac9;const _0xcdce28=Ri(_0xecaac9);return this['_findFallb'+'ackLocale'](_0xecaac9,_0xcdce28);}['getText'](_0x54bd17,_0xf59103){let _0x1553e1=_0x54bd17,_0x5242cd;_0xf59103||(_0xf59103=this['_locale'],_0x5242cd=this['_lang']);let _0x2a9edb=this['_translati'+'ons'][_0xf59103];return _0x2a9edb||(_0x5242cd||(_0x5242cd=Ri(_0xf59103)),_0xf59103=this['_findFallb'+'ackLocale'](_0xf59103,_0x5242cd),_0x2a9edb=this['_translati'+'ons'][_0xf59103]),_0x2a9edb&&_0x2a9edb['hasOwnProp'+'erty'](_0x54bd17)&&(_0x1553e1=_0x2a9edb[_0x54bd17],Array['isArray'](_0x1553e1)&&(_0x1553e1=_0x1553e1[0x2f*-0xe+0x1212+-0xf80]),_0x1553e1==null&&(_0x1553e1=_0x54bd17)),_0x1553e1;}['getPluralT'+'ext'](_0x16017f,_0x48c9a2,_0x5bcf40){let _0x7e5a3d=_0x16017f,_0x10d777,_0x54c1f5;_0x5bcf40?(_0x10d777=Ri(_0x5bcf40),_0x54c1f5=Jd(_0x10d777)):(_0x5bcf40=this['_locale'],_0x10d777=this['_lang'],_0x54c1f5=this['_pluralFn']);let _0x48e241=this['_translati'+'ons'][_0x5bcf40];if(_0x48e241||(_0x5bcf40=this['_findFallb'+'ackLocale'](_0x5bcf40,_0x10d777),_0x10d777=Ri(_0x5bcf40),_0x54c1f5=Jd(_0x10d777),_0x48e241=this['_translati'+'ons'][_0x5bcf40]),_0x48e241&&_0x48e241[_0x16017f]&&_0x54c1f5){const _0x1c61a1=_0x54c1f5(_0x48c9a2);_0x7e5a3d=_0x48e241[_0x16017f][_0x1c61a1],_0x7e5a3d==null&&(_0x7e5a3d=_0x16017f);}return _0x7e5a3d;}['addData'](_0x2a78a0){let _0x38f798;try{_0x38f798=this['_parser']['parse'](_0x2a78a0);}catch(_0x2daf8e){console['error'](_0x2daf8e);return;}for(let _0x4a2803=-0x24ba+0x136+-0x2384*-0x1,_0x24e8c0=_0x38f798['length'];_0x4a2803<_0x24e8c0;_0x4a2803++){const _0x20638f=_0x38f798[_0x4a2803],_0x159f9f=_0x20638f['info']['locale'],_0x1e2fa7=_0x20638f['messages'];if(!this['_translati'+'ons'][_0x159f9f]){this['_translati'+'ons'][_0x159f9f]={};const _0x39cba6=Ri(_0x159f9f);this['_available'+'Langs'][_0x39cba6]||(this['_available'+'Langs'][_0x39cba6]=_0x159f9f);}Object['assign'](this['_translati'+'ons'][_0x159f9f],_0x1e2fa7),this['fire']('data:add',_0x159f9f,_0x1e2fa7);}}['removeData'](_0x457668){let _0x2963d5;try{_0x2963d5=this['_parser']['parse'](_0x457668);}catch(_0x1c8b48){console['error'](_0x1c8b48);return;}for(let _0x2b6807=-0x23bf+0x635*0x1+0x1*0x1d8a,_0x127a77=_0x2963d5['length'];_0x2b6807<_0x127a77;_0x2b6807++){const _0x203a6d=_0x2963d5[_0x2b6807],_0x2bfa5c=_0x203a6d['info']['locale'],_0x304162=this['_translati'+'ons'][_0x2bfa5c];if(!_0x304162)continue;const _0x19958f=_0x203a6d['messages'];for(const _0x50b0ec in _0x19958f)delete _0x304162[_0x50b0ec];Object['keys'](_0x304162)['length']===-0xa63+-0x345+0x4c*0x2e&&(delete this['_translati'+'ons'][_0x2bfa5c],delete this['_available'+'Langs'][Ri(_0x2bfa5c)]),this['fire']('data:remov'+'e',_0x2bfa5c,_0x19958f);}}['destroy'](){this['_translati'+'ons']=null,this['_available'+'Langs']=null,this['_assets']=null,this['_parser']=null,this['off']();}['_findFallb'+'ackLocale'](_0x3cd83a,_0x55da27){let _0x85a341=oh[_0x3cd83a];return _0x85a341&&this['_translati'+'ons'][_0x85a341]||(_0x85a341=oh[_0x55da27],_0x85a341&&this['_translati'+'ons'][_0x85a341])||(_0x85a341=this['_available'+'Langs'][_0x55da27],_0x85a341&&this['_translati'+'ons'][_0x85a341])?_0x85a341:nh;}['_onAssetAd'+'d'](_0x146566){_0x146566['on']('load',this['_onAssetLo'+'ad'],this),_0x146566['on']('change',this['_onAssetCh'+'ange'],this),_0x146566['on']('remove',this['_onAssetRe'+'move'],this),_0x146566['on']('unload',this['_onAssetUn'+'load'],this),_0x146566['resource']&&this['_onAssetLo'+'ad'](_0x146566);}['_onAssetLo'+'ad'](_0x10adf4){this['addData'](_0x10adf4['resource']);}['_onAssetCh'+'ange'](_0x2bbce1){_0x2bbce1['resource']&&this['addData'](_0x2bbce1['resource']);}['_onAssetRe'+'move'](_0x31c702){_0x31c702['off']('load',this['_onAssetLo'+'ad'],this),_0x31c702['off']('change',this['_onAssetCh'+'ange'],this),_0x31c702['off']('remove',this['_onAssetRe'+'move'],this),_0x31c702['off']('unload',this['_onAssetUn'+'load'],this),_0x31c702['resource']&&this['removeData'](_0x31c702['resource']),this['_app']['assets']['once']('add:'+_0x31c702['id'],this['_onAssetAd'+'d'],this);}['_onAssetUn'+'load'](_0x23ab58){_0x23ab58['resource']&&this['removeData'](_0x23ab58['resource']);}};h(vh,'EVENT_CHAN'+'GE','change');let Sa=vh;class oC extends me{constructor(_0x2c09cc){super(),h(this,'_scripts',{}),h(this,'_list',[]),h(this,'_scriptSch'+'emas',new Map()),this['app']=_0x2c09cc;}['destroy'](){this['app']=null,this['off']();}['addSchema'](_0x1a3327,_0x3a5b3a){_0x3a5b3a&&this['_scriptSch'+'emas']['set'](_0x1a3327,_0x3a5b3a);}['getSchema'](_0x5b4be3){return this['_scriptSch'+'emas']['get'](_0x5b4be3);}['add'](_0x1fe62d){const _0x14b987=_0x1fe62d['__name'];return this['_scripts']['hasOwnProp'+'erty'](_0x14b987)?(setTimeout(()=>{if(_0x1fe62d['prototype']['swap']){const _0x13dea0=this['_scripts'][_0x14b987],_0xae8a7a=this['_list']['indexOf'](_0x13dea0);this['_list'][_0xae8a7a]=_0x1fe62d,this['_scripts'][_0x14b987]=_0x1fe62d,this['fire']('swap',_0x14b987,_0x1fe62d),this['fire']('swap:'+_0x14b987,_0x1fe62d);}else console['warn']('script\x20reg'+'istry\x20alre'+'ady\x20has\x20\x27'+_0x14b987+('\x27\x20script,\x20'+'define\x20\x27sw'+'ap\x27\x20method'+'\x20for\x20new\x20s'+'cript\x20type'+'\x20to\x20enable'+'\x20code\x20hot\x20'+'swapping'));}),!(0x21c3+0x5*-0x2cf+0x2d1*-0x7)):(this['_scripts'][_0x14b987]=_0x1fe62d,this['_list']['push'](_0x1fe62d),this['fire']('add',_0x14b987,_0x1fe62d),this['fire']('add:'+_0x14b987,_0x1fe62d),setTimeout(()=>{if(!this['_scripts']['hasOwnProp'+'erty'](_0x14b987)||!this['app']||!this['app']['systems']||!this['app']['systems']['script'])return;const _0x5c3102=this['app']['systems']['script']['_component'+'s'];let _0x437e33;const _0x2a597b=[],_0x2e6c5b=[];for(_0x5c3102['loopIndex']=-0x1c7b+-0x1843+0x34be;_0x5c3102['loopIndex']<_0x5c3102['length'];_0x5c3102['loopIndex']++){const _0x247dd6=_0x5c3102['items'][_0x5c3102['loopIndex']];if(_0x247dd6['_scriptsIn'+'dex'][_0x14b987]&&_0x247dd6['_scriptsIn'+'dex'][_0x14b987]['awaiting']){_0x247dd6['_scriptsDa'+'ta']&&_0x247dd6['_scriptsDa'+'ta'][_0x14b987]&&(_0x437e33=_0x247dd6['_scriptsDa'+'ta'][_0x14b987]['attributes']);const _0x5cf6b8=_0x247dd6['create'](_0x14b987,{'preloading':!(0x1045+-0x2*0x571+0x1*-0x563),'ind':_0x247dd6['_scriptsIn'+'dex'][_0x14b987]['ind'],'attributes':_0x437e33});_0x5cf6b8&&_0x2a597b['push'](_0x5cf6b8);for(const _0x50e2c5 of _0x247dd6['scripts'])_0x247dd6['initialize'+'Attributes'](_0x50e2c5);}}for(let _0x3d01e7=-0x1*0xe6f+-0xa3*-0x4+0xbe3;_0x3d01e7<_0x2a597b['length'];_0x3d01e7++)_0x2a597b[_0x3d01e7]['enabled']&&(_0x2a597b[_0x3d01e7]['_initializ'+'ed']=!(0x1d90+0x6*-0x44+-0x1bf8),_0x2e6c5b['push'](_0x2a597b[_0x3d01e7]),_0x2a597b[_0x3d01e7]['initialize']&&_0x2a597b[_0x3d01e7]['initialize']());for(let _0x2d0049=0x2190+0x2663+-0x47f3;_0x2d0049<_0x2e6c5b['length'];_0x2d0049++)!_0x2e6c5b[_0x2d0049]['enabled']||_0x2e6c5b[_0x2d0049]['_postIniti'+'alized']||(_0x2e6c5b[_0x2d0049]['_postIniti'+'alized']=!(-0x392*-0x2+-0x1ec*0x4+-0x1c*-0x5),_0x2e6c5b[_0x2d0049]['postInitia'+'lize']&&_0x2e6c5b[_0x2d0049]['postInitia'+'lize']());}),!(0xeb5+0x1b80+-0x2a35));}['remove'](_0x55195f){let _0xab7ee6=_0x55195f,_0x4775e7=_0x55195f;if(typeof _0x4775e7!='string'?_0x4775e7=_0xab7ee6['__name']:_0xab7ee6=this['get'](_0x4775e7),this['get'](_0x4775e7)!==_0xab7ee6)return!(-0x166c+-0xc69+0x22d6);delete this['_scripts'][_0x4775e7];const _0x1481be=this['_list']['indexOf'](_0xab7ee6);return this['_list']['splice'](_0x1481be,0xbaf+0x23b+-0x3*0x4a3),this['fire']('remove',_0x4775e7,_0xab7ee6),this['fire']('remove:'+_0x4775e7,_0xab7ee6),!(0x1378+-0x133+-0x1245);}['get'](_0x17c349){return this['_scripts'][_0x17c349]||null;}['has'](_0x1720fd){if(typeof _0x1720fd=='string')return this['_scripts']['hasOwnProp'+'erty'](_0x1720fd);if(!_0x1720fd)return!(-0x1*0xf29+0x1437+0x3*-0x1af);const _0x4204e6=_0x1720fd['__name'];return this['_scripts'][_0x4204e6]===_0x1720fd;}['list'](){return this['_list'];}}const lC=(_0x224d80,_0x1aeb3d)=>_0x224d80['constructo'+'r']['order']-_0x1aeb3d['constructo'+'r']['order'],cC=_0x30109f=>_0x30109f['sort'](lC),no=[],ev=[],hC=()=>ev['pop']()??[],Z_=_0x19720a=>{_0x19720a['length']=0x12a7+-0x2*0xde9+0x92b*0x1,ev['push'](_0x19720a);},xh=class xh extends Ie{constructor(_0x4e18d9,_0x6ede18=Ys()){super(_0x4e18d9),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'gsplat'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'c',{}),h(this,'_app'),h(this,'_destroyin'+'g',!(-0xc79*-0x2+-0x1*0x1e1d+0x52c)),h(this,'_guid',null),h(this,'_template',!(-0x20a+-0x26f5+0x2900)),(w['assert'](_0x6ede18,'Could\x20not\x20'+'find\x20curre'+'nt\x20applica'+'tion'),this['_app']=_0x6ede18);}['addCompone'+'nt'](_0x110faf,_0x2558cf){const _0x5670dd=this['_app']['systems'][_0x110faf];return _0x5670dd?this['c'][_0x110faf]?(w['warn']('addCompone'+'nt:\x20Entity'+'\x20already\x20h'+'as\x20\x27'+_0x110faf+('\x27\x20componen'+'t')),null):_0x5670dd['addCompone'+'nt'](this,_0x2558cf):(w['error']('addCompone'+'nt:\x20System'+'\x20\x27'+_0x110faf+('\x27\x20doesn\x27t\x20'+'exist')),null);}['removeComp'+'onent'](_0x4ff6a7){const _0x5cc1f8=this['_app']['systems'][_0x4ff6a7];if(!_0x5cc1f8){w['error']('removeComp'+'onent:\x20Sys'+'tem\x20\x27'+_0x4ff6a7+('\x27\x20doesn\x27t\x20'+'exist'));return;}if(!this['c'][_0x4ff6a7]){w['warn']('removeComp'+'onent:\x20Ent'+'ity\x20doesn\x27'+'t\x20have\x20\x27'+_0x4ff6a7+('\x27\x20componen'+'t'));return;}_0x5cc1f8['removeComp'+'onent'](this);}['findCompon'+'ent'](_0xff373){const _0x209e3a=this['findOne'](_0x113a5a=>{var _0x4d0731;return(_0x4d0731=_0x113a5a['c'])==null?void(0x3*-0x2fe+-0xa71+0x136b):_0x4d0731[_0xff373];});return _0x209e3a&&_0x209e3a['c'][_0xff373];}['findCompon'+'ents'](_0x4dcb4d){return this['find'](_0x5d820c=>{var _0x5b5d72;return(_0x5b5d72=_0x5d820c['c'])==null?void(0x7f2+0x8*0x3+-0x2a*0x31):_0x5b5d72[_0x4dcb4d];})['map'](_0x10cb56=>_0x10cb56['c'][_0x4dcb4d]);}['findScript'](_0x54d6a9){const _0x268471=this['findOne'](_0x147c1e=>{var _0x53ecbf,_0x5a23b2;return(_0x5a23b2=(_0x53ecbf=_0x147c1e['c'])==null?void(0x22e5+-0x1cfd+-0x5e8):_0x53ecbf['script'])==null?void(-0x6*0x2c2+0x1ce+0xebe):_0x5a23b2['has'](_0x54d6a9);});return _0x268471==null?void(-0xa16+-0xcfa+0x1710):_0x268471['c']['script']['get'](_0x54d6a9);}['findScript'+'s'](_0x591729){return this['find'](_0x2bbded=>{var _0x436cd8,_0x279294;return(_0x279294=(_0x436cd8=_0x2bbded['c'])==null?void(0x1abe+0x1b4*0x5+-0x2342):_0x436cd8['script'])==null?void(0x38*0x92+-0x26dd+0x6ed):_0x279294['has'](_0x591729);})['map'](_0x361514=>_0x361514['c']['script']['get'](_0x591729));}['getGuid'](){return this['_guid']||this['setGuid'](_0['create']()),this['_guid'];}['setGuid'](_0x5c1797){const _0x38d430=this['_app']['_entityInd'+'ex'];this['_guid']&&delete _0x38d430[this['_guid']],this['_guid']=_0x5c1797,_0x38d430[this['_guid']]=this;}['_notifyHie'+'rarchyStat'+'eChanged'](_0x3c7eea,_0x34e85f){let _0x2b92e5=!(0x12d6+0xf0e+-0x21e3);_0x3c7eea===this&&no['length']===-0x2278+0x20f9*0x1+0x17f&&(_0x2b92e5=!(0x1*-0x1909+-0xa1d+0x1193*0x2)),_0x3c7eea['_beingEnab'+'led']=!(0x142*0xb+0x1b*-0x119+-0x329*-0x5),_0x3c7eea['_onHierarc'+'hyStateCha'+'nged'](_0x34e85f),_0x3c7eea['_onHierarc'+'hyStatePos'+'tChanged']&&no['push'](_0x3c7eea);const _0x2028bb=_0x3c7eea['_children'];for(let _0x3f03db=-0x59d+0x22af+-0x1d12,_0x356fe2=_0x2028bb['length'];_0x3f03db<_0x356fe2;_0x3f03db++)_0x2028bb[_0x3f03db]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x2028bb[_0x3f03db],_0x34e85f);if(_0x3c7eea['_beingEnab'+'led']=!(-0x1*0x221b+0x18e3+0x939),_0x2b92e5){for(let _0x1fd46c=-0x3c+-0x17e7+0x1823;_0x1fd46c<no['length'];_0x1fd46c++)no[_0x1fd46c]['_onHierarc'+'hyStatePos'+'tChanged']();no['length']=0x4*-0x917+-0x1b16+0x2*0x1fb9;}}['_onHierarc'+'hyStateCha'+'nged'](_0x5b3d51){super['_onHierarc'+'hyStateCha'+'nged'](_0x5b3d51);const _0x4d25f2=this['_getSorted'+'Components']();for(let _0x3df8ff=0x220b+0x1c84+-0x3e8f;_0x3df8ff<_0x4d25f2['length'];_0x3df8ff++){const _0x4dbba2=_0x4d25f2[_0x3df8ff];_0x4dbba2['enabled']&&(_0x5b3d51?_0x4dbba2['onEnable']():_0x4dbba2['onDisable']());}Z_(_0x4d25f2);}['_onHierarc'+'hyStatePos'+'tChanged'](){const _0x584569=this['_getSorted'+'Components']();for(let _0x8b8cb=0x1668+-0x51c+-0x114c;_0x8b8cb<_0x584569['length'];_0x8b8cb++)_0x584569[_0x8b8cb]['onPostStat'+'eChange']();Z_(_0x584569);}['findByGuid'](_0x493c96){if(this['_guid']===_0x493c96)return this;const _0x29e470=this['_app']['_entityInd'+'ex'][_0x493c96];return _0x29e470&&(_0x29e470===this||_0x29e470['isDescenda'+'ntOf'](this))?_0x29e470:null;}['destroy'](){this['_destroyin'+'g']=!(0x323*0xb+-0x11*-0x243+-0x4*0x123d);for(const _0x5b223a in this['c'])this['c'][_0x5b223a]['enabled']=!(0xb1*0xb+0x1*0xf31+-0x16cb);for(const _0x3f152e in this['c'])this['c'][_0x3f152e]['system']['removeComp'+'onent'](this);super['destroy'](),this['_guid']&&delete this['_app']['_entityInd'+'ex'][this['_guid']],this['_destroyin'+'g']=!(0x4c5+0x5a1*0x4+-0x1b48);}['clone'](){const _0x5e4d12={},_0x2581db=this['_cloneRecu'+'rsively'](_0x5e4d12);return _0x5e4d12[this['getGuid']()]=_0x2581db,tv(this,this,_0x2581db,_0x5e4d12),_0x2581db;}['_getSorted'+'Components'](){const _0x543b62=this['c'],_0x2e6af8=hC();let _0x293e3d=0x12d4*0x1+-0x19d2+-0xb3*-0xa;for(const _0x36dc7e in _0x543b62)if(_0x543b62['hasOwnProp'+'erty'](_0x36dc7e)){const _0xef45af=_0x543b62[_0x36dc7e];_0x293e3d|=_0xef45af['constructo'+'r']['order']!==-0x1618+-0x137e+0x2996,_0x2e6af8['push'](_0xef45af);}return _0x293e3d&&_0x2e6af8['length']>0x1*0x1fd+0x2*-0x791+0xd26&&cC(_0x2e6af8),_0x2e6af8;}['_cloneRecu'+'rsively'](_0x55f881){const _0x1f222f=new this['constructo'+'r'](void(0x142+0x165*-0x9+0xb4b),this['_app']);super['_cloneInte'+'rnal'](_0x1f222f);for(const _0x394b11 in this['c'])this['c'][_0x394b11]['system']['cloneCompo'+'nent'](this,_0x1f222f);for(let _0x541e0b=0x1e37+-0x121b+0x7c*-0x19;_0x541e0b<this['_children']['length'];_0x541e0b++){const _0x434c1d=this['_children'][_0x541e0b];if(_0x434c1d instanceof xh){const _0x3c9381=_0x434c1d['_cloneRecu'+'rsively'](_0x55f881);_0x1f222f['addChild'](_0x3c9381),_0x55f881[_0x434c1d['getGuid']()]=_0x3c9381;}}return _0x1f222f;}};h(xh,'EVENT_DEST'+'ROY','destroy');let lt=xh;function tv(_0x5a8ac5,_0x5300ff,_0x453466,_0x1ff69c){if(_0x5300ff instanceof lt){const _0x30e015=_0x5300ff['c'];for(const _0x4cdbc in _0x30e015){const _0x2204f9=_0x30e015[_0x4cdbc],_0x388979=_0x2204f9['system']['getPropert'+'iesOfType']('entity');for(let _0x3e8787=-0x251e*-0x1+-0x5af+-0x1f6f,_0x185a4e=_0x388979['length'];_0x3e8787<_0x185a4e;_0x3e8787++){const _0x4f660a=_0x388979[_0x3e8787]['name'],_0x530efd=_0x2204f9[_0x4f660a];if(!!_0x5a8ac5['findByGuid'](_0x530efd)){const _0xa6e459=_0x1ff69c[_0x530efd]['getGuid']();_0xa6e459?_0x453466['c'][_0x4cdbc][_0x4f660a]=_0xa6e459:w['warn']('Could\x20not\x20'+'find\x20corre'+'sponding\x20e'+'ntity\x20id\x20w'+'hen\x20resolv'+'ing\x20duplic'+'ated\x20entit'+'y\x20referenc'+'es');}}}_0x30e015['script']&&_0x453466['script']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x30e015['script'],_0x1ff69c),_0x30e015['render']&&_0x453466['render']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x30e015['render'],_0x1ff69c),_0x30e015['button']&&_0x453466['button']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x30e015['button'],_0x1ff69c),_0x30e015['scrollview']&&_0x453466['scrollview']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x30e015['scrollview'],_0x1ff69c),_0x30e015['scrollbar']&&_0x453466['scrollbar']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x30e015['scrollbar'],_0x1ff69c),_0x30e015['anim']&&_0x453466['anim']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x30e015['anim'],_0x1ff69c);const _0x4e6ce4=_0x5300ff['children']['filter'](_0x23e78a=>_0x23e78a instanceof lt),_0x4c2fbc=_0x453466['children']['filter'](_0x444b9a=>_0x444b9a instanceof lt);for(let _0x1afc8f=0x2b6*-0x5+0x15*-0x1d5+0x2bd*0x13,_0x53775a=_0x4e6ce4['length'];_0x1afc8f<_0x53775a;_0x1afc8f++)tv(_0x5a8ac5,_0x4e6ce4[_0x1afc8f],_0x4c2fbc[_0x1afc8f],_0x1ff69c);}}class Q_{constructor(_0x5de887,_0x45cd72){h(this,'name'),h(this,'url'),h(this,'data',null),h(this,'_loading',!(-0x1f*0xb+-0x16*-0xe7+0x18b*-0xc)),h(this,'_onLoadedC'+'allbacks',[]),(this['name']=_0x5de887,this['url']=_0x45cd72);}get['loaded'](){return!!this['data'];}get['loading'](){return this['_loading'];}}class dC{constructor(_0x4947af){h(this,'_app'),h(this,'_list',[]),h(this,'_index',{}),h(this,'_urlIndex',{}),this['_app']=_0x4947af;}['destroy'](){this['_app']=null;}['list'](){return this['_list'];}['add'](_0x3a1bd0,_0x2ea668){if(this['_index']['hasOwnProp'+'erty'](_0x3a1bd0))return w['warn']('pc.SceneRe'+'gistry:\x20tr'+'ying\x20to\x20ad'+'d\x20more\x20tha'+'n\x20one\x20scen'+'e\x20called:\x20'+_0x3a1bd0),!(0x4e*0x24+-0xd65+-0x1*-0x26e);const _0x21e3c2=new Q_(_0x3a1bd0,_0x2ea668),_0x4600ed=this['_list']['push'](_0x21e3c2);return this['_index'][_0x21e3c2['name']]=_0x4600ed-(-0x119a+0xf98+-0x1*-0x203),this['_urlIndex'][_0x21e3c2['url']]=_0x4600ed-(0x28a+0x1*0x1cfb+-0x1f84),!(-0x93+0x1*-0xed5+0xf68);}['find'](_0x3dc3a5){return this['_index']['hasOwnProp'+'erty'](_0x3dc3a5)?this['_list'][this['_index'][_0x3dc3a5]]:null;}['findByUrl'](_0x41df25){return this['_urlIndex']['hasOwnProp'+'erty'](_0x41df25)?this['_list'][this['_urlIndex'][_0x41df25]]:null;}['remove'](_0x23e9a9){if(this['_index']['hasOwnProp'+'erty'](_0x23e9a9)){const _0x22ff69=this['_index'][_0x23e9a9];let _0x4b915b=this['_list'][_0x22ff69];delete this['_urlIndex'][_0x4b915b['url']],delete this['_index'][_0x23e9a9],this['_list']['splice'](_0x22ff69,0x11b6+-0x9fe+0x1*-0x7b7);for(let _0x865919=-0xcc7*0x1+-0x26a3+0x336a*0x1;_0x865919<this['_list']['length'];_0x865919++)_0x4b915b=this['_list'][_0x865919],this['_index'][_0x4b915b['name']]=_0x865919,this['_urlIndex'][_0x4b915b['url']]=_0x865919;}}['_loadScene'+'Data'](_0x5bf8e2,_0x1de884,_0x143260){const _0x595cb3=this['_app'];let _0x271418=_0x5bf8e2;if(typeof _0x5bf8e2=='string'&&(_0x5bf8e2=this['findByUrl'](_0x271418)||this['find'](_0x271418)||new Q_('Untitled',_0x271418)),_0x271418=_0x5bf8e2['url'],!_0x271418){_0x143260('Cannot\x20fin'+'d\x20scene\x20to'+'\x20load');return;}if(_0x5bf8e2['loaded']){_0x143260(null,_0x5bf8e2);return;}_0x595cb3['assets']&&_0x595cb3['assets']['prefix']&&!Vn['test'](_0x271418)&&(_0x271418=xe['join'](_0x595cb3['assets']['prefix'],_0x271418)),_0x5bf8e2['_onLoadedC'+'allbacks']['push'](_0x143260),_0x5bf8e2['_loading']||_0x595cb3['loader']['getHandler']('hierarchy')['load'](_0x271418,(_0x5e2889,_0x3a71ec)=>{_0x5bf8e2['data']=_0x3a71ec,_0x5bf8e2['_loading']=!(0x25b8+-0x9*0x1ba+-0x162d);for(let _0x3bd148=-0x1f76+0x81b*-0x1+0x2791;_0x3bd148<_0x5bf8e2['_onLoadedC'+'allbacks']['length'];_0x3bd148++)_0x5bf8e2['_onLoadedC'+'allbacks'][_0x3bd148](_0x5e2889,_0x5bf8e2);_0x1de884||(_0x5bf8e2['data']=null),_0x5bf8e2['_onLoadedC'+'allbacks']['length']=-0x1fa6+-0xec8+0x2e6e;}),_0x5bf8e2['_loading']=!(0x1*0xb6f+0x1145+0x1*-0x1cb4);}['loadSceneD'+'ata'](_0x2f8b19,_0xdb6bf1){this['_loadScene'+'Data'](_0x2f8b19,!(0x2375*0x1+-0x9b0*0x3+0x665*-0x1),_0xdb6bf1);}['unloadScen'+'eData'](_0x10713e){typeof _0x10713e=='string'&&(_0x10713e=this['findByUrl'](_0x10713e)),_0x10713e&&(_0x10713e['data']=null);}['_loadScene'+'Hierarchy'](_0x15aed1,_0x5ec874,_0x3bc02f){this['_loadScene'+'Data'](_0x15aed1,!(0x7c6+0x26ab*0x1+0x10*-0x2e7),(_0x173b5b,_0x242ec7)=>{if(_0x173b5b){_0x3bc02f&&_0x3bc02f(_0x173b5b);return;}_0x5ec874&&_0x5ec874(_0x242ec7);const _0x59c0ad=this['_app'],_0x4e801e=()=>{const _0x10dc77=_0x59c0ad['loader']['getHandler']('hierarchy');_0x59c0ad['systems']['script']['preloading']=!(-0x29*-0x87+0xf3f+-0x4e*0x79);const _0x53248b=_0x10dc77['open'](_0x242ec7['url'],_0x242ec7['data']);_0x59c0ad['systems']['script']['preloading']=!(0x685+0x1*-0x25b1+-0x15b*-0x17),_0x59c0ad['loader']['clearCache'](_0x242ec7['url'],'hierarchy'),_0x59c0ad['root']['addChild'](_0x53248b),_0x59c0ad['systems']['fire']('initialize',_0x53248b),_0x59c0ad['systems']['fire']('postInitia'+'lize',_0x53248b),_0x59c0ad['systems']['fire']('postPostIn'+'itialize',_0x53248b),_0x3bc02f&&_0x3bc02f(null,_0x53248b);};_0x59c0ad['_preloadSc'+'ripts'](_0x242ec7['data'],_0x4e801e);});}['loadSceneH'+'ierarchy'](_0x219b46,_0x340377){this['_loadScene'+'Hierarchy'](_0x219b46,null,_0x340377);}['loadSceneS'+'ettings'](_0x9e4e1b,_0x313944){this['_loadScene'+'Data'](_0x9e4e1b,!(0x1ec7+-0x1*0x1131+0x3d*-0x39),(_0x346398,_0x1dbd29)=>{_0x346398?_0x313944&&_0x313944(_0x346398):(this['_app']['applyScene'+'Settings'](_0x1dbd29['data']['settings']),_0x313944&&_0x313944(null));});}['changeScen'+'e'](_0x31434b,_0x255064){const _0x44df17=this['_app'],_0x35bac2=_0x314b3a=>{const {children:_0x23450c}=_0x44df17['root'];for(;_0x23450c['length'];)_0x23450c[-0x1f0c+-0x1*-0x21bd+0x35*-0xd]['destroy']();_0x44df17['applyScene'+'Settings'](_0x314b3a['data']['settings']);};this['_loadScene'+'Hierarchy'](_0x31434b,_0x35bac2,_0x255064);}['loadScene'](_0x28033b,_0x59f7a7){const _0x5a3062=this['_app'],_0x179ce2=_0x5a3062['loader']['getHandler']('scene');_0x5a3062['assets']&&_0x5a3062['assets']['prefix']&&!Vn['test'](_0x28033b)&&(_0x28033b=xe['join'](_0x5a3062['assets']['prefix'],_0x28033b)),_0x179ce2['load'](_0x28033b,(_0xb089aa,_0x74285a)=>{if(_0xb089aa)_0x59f7a7&&_0x59f7a7(_0xb089aa);else{const _0xdd0920=()=>{_0x5a3062['systems']['script']['preloading']=!(-0x1cbb+0xdae+-0xf0d*-0x1);const _0x58fbda=_0x179ce2['open'](_0x28033b,_0x74285a),_0x58f9b6=this['findByUrl'](_0x28033b);_0x58f9b6&&!_0x58f9b6['loaded']&&(_0x58f9b6['data']=_0x74285a),_0x5a3062['systems']['script']['preloading']=!(0xe9f*0x2+0x1f49+0xfe*-0x3d),_0x5a3062['loader']['clearCache'](_0x28033b,'scene'),_0x5a3062['loader']['patch']({'resource':_0x58fbda,'type':'scene'},_0x5a3062['assets']),_0x5a3062['root']['addChild'](_0x58fbda['root']),_0x5a3062['systems']['rigidbody']&&typeof Ammo<'u'&&_0x5a3062['systems']['rigidbody']['gravity']['set'](_0x58fbda['_gravity']['x'],_0x58fbda['_gravity']['y'],_0x58fbda['_gravity']['z']),_0x59f7a7&&_0x59f7a7(null,_0x58fbda);};_0x5a3062['_preloadSc'+'ripts'](_0x74285a,_0xdd0920);}});}}class fC{constructor(_0xb774df){this['frame']={'fps':0x0,'ms':0x0,'dt':0x0,'updateStart':0x0,'updateTime':0x0,'renderStart':0x0,'renderTime':0x0,'physicsStart':0x0,'physicsTime':0x0,'cullTime':0x0,'sortTime':0x0,'skinTime':0x0,'morphTime':0x0,'instancingTime':0x0,'triangles':0x0,'otherPrimitives':0x0,'shaders':0x0,'materials':0x0,'cameras':0x0,'shadowMapUpdates':0x0,'shadowMapTime':0x0,'depthMapTime':0x0,'forwardTime':0x0,'lightClustersTime':0x0,'lightClusters':0x0,'_timeToCountFrames':0x0,'_fpsAccum':0x0},this['drawCalls']={'forward':0x0,'depth':0x0,'shadow':0x0,'immediate':0x0,'misc':0x0,'total':0x0,'skinned':0x0,'instanced':0x0,'removedByInstancing':0x0},this['misc']={'renderTargetCreationTime':0x0},this['particles']={'updatesPerFrame':0x0,'_updatesPerFrame':0x0,'frameTime':0x0,'_frameTime':0x0},this['shaders']=_0xb774df['_shaderSta'+'ts'],this['vram']=_0xb774df['_vram'],Object['defineProp'+'erty'](this['vram'],'totalUsed',{'get':function(){return this['tex']+this['vb']+this['ib'];}}),Object['defineProp'+'erty'](this['vram'],'geom',{'get':function(){return this['vb']+this['ib'];}});}get['scene'](){return Ys()['scene']['_stats'];}get['lightmappe'+'r'](){var _0x4a5933;return(_0x4a5933=Ys()['lightmappe'+'r'])==null?void(-0x244b+-0x33e+0x1d*0x15d):_0x4a5933['stats'];}get['batcher'](){const _0x50db04=Ys()['_batcher'];return _0x50db04?_0x50db04['_stats']:null;}}const uC='\x0auniform\x20f'+'loat\x20alpha'+'_ref;\x0a\x0avoi'+'d\x20alphaTes'+'t(float\x20a)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(a\x20<\x20alpha'+'_ref)\x20disc'+'ard;\x0a}\x0a',pC='\x0a\x0a#ifdef\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+'\x20AMBIENTSH'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20am'+'bientSH[9]'+';\x0a#endif\x0a\x0a'+'#if\x20LIT_AM'+'BIENT_SOUR'+'CE\x20==\x20ENVA'+'LATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fndef\x20ENV_'+'ATLAS\x0a\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_envAtlas'+';\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0avoid\x20addA'+'mbient(vec'+'3\x20worldNor'+'mal)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'AMBIENTSH\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20n\x20=\x20cu'+'beMapRotat'+'e(worldNor'+'mal);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20c'+'olor\x20=\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[0'+']\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ambi'+'entSH[1]\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[2'+']\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[3]\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[4]\x20*\x20'+'n.x\x20*\x20n.z\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ambien'+'tSH[5]\x20*\x20n'+'.z\x20*\x20n.y\x20+'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ambient'+'SH[6]\x20*\x20n.'+'y\x20*\x20n.x\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[7]\x20*\x20(3.'+'0\x20*\x20n.z\x20*\x20'+'n.z\x20-\x201.0)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[8]\x20*\x20'+'(n.x\x20*\x20n.x'+'\x20-\x20n.y\x20*\x20n'+'.y);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20processEn'+'vironment('+'max(color,'+'\x20vec3(0.0)'+'));\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_A'+'MBIENT_SOU'+'RCE\x20==\x20ENV'+'ALATLAS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dir\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20ma'+'pUv(toSphe'+'ricalUv(di'+'r),\x20vec4(1'+('28.0,\x20256.'+'0\x20+\x20128.0,'+'\x2064.0,\x2032.'+'0)\x20/\x20atlas'+'Size);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20raw\x20=\x20tex'+'ture2D(tex'+'ture_envAt'+'las,\x20uv);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20linear\x20'+'=\x20{ambient'+'Decode}(ra'+'w);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20p'+'rocessEnvi'+'ronment(li'+'near);\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'CONSTANT\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20light'+'_globalAmb'+'ient;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),mC='\x0a\x0a#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_anisotr'+'opyIntensi'+'ty;\x0a\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20material_'+'anisotropy'+'Rotation;\x0a'+'#endif\x0a\x0avo'+'id\x20getAnis'+'otropy()\x20{'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x200'+'.0;\x0a\x20\x20\x20\x20dA'+'nisotropyR'+'otation\x20=\x20'+'vec2(1.0,\x20'+'0.0);\x0a\x0a#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20m'+'aterial_an'+'isotropyIn'+'tensity;\x0a\x20'+'\x20\x20\x20dAnisot'+'ropyRotati'+'on\x20=\x20mater'+'ial_anisot'+'ropyRotati'+'on;\x0a#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_ANI'+'SOTROPY_TE'+'XTURE\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropyTex\x20='+'\x20texture2D'+'Bias({STD_'+'ANISOTROPY'+'_TEXTURE_N'+'AME},\x20{STD'+'_ANISOTROP'+'Y_TEXTURE_'+'UV},\x20textu'+'reBias).rg'+'b;\x0a\x20\x20\x20\x20dAn'+'isotropy\x20*'+'=\x20anisotro'+'pyTex.b;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20a'+'nisotropyR'+'otationFro'+'mTex\x20=\x20ani'+'sotropyTex'+'.rg\x20*\x202.0\x20'+'-\x20vec2(1.0'+');\x0a\x20\x20\x20\x20mat'+'2\x20rotation'+'Matrix\x20=\x20m'+'at2(dAniso'+'tropyRotat'+'ion.x,\x20dAn'+'isotropyRo'+'tation.y,\x20'+'-dAnisotro'+'pyRotation'+'.y,\x20dAniso'+'tropyRotat'+'ion.x);\x0a\x20\x20'+'\x20\x20dAnisotr'+'opyRotatio'+'n\x20=\x20rotati'+'onMatrix\x20*'+'\x20anisotrop'+'yRotationF'+'romTex;\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20dA'+'nisotropy\x20'+'=\x20clamp(dA'+'nisotropy,'+'\x200.0,\x201.0)'+';\x0a}\x0a',_C='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_aoInten'+'sity;\x0a#end'+'if\x0a\x0a#ifdef'+'\x20STD_AODET'+'AIL_TEXTUR'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22deta'+'ilModesPS\x22'+'\x0a#endif\x0a\x0av'+'oid\x20getAO('+')\x20{\x0a\x20\x20\x20\x20dA'+'o\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'aoBase\x20=\x20t'+'exture2DBi'+'as({STD_AO'+'_TEXTURE_N'+'AME},\x20{STD'+'_AO_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_AO_TE'+'XTURE_CHAN'+'NEL};\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20aoDetail\x20'+'=\x20texture2'+'DBias({STD'+'_AODETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'AODETAIL_T'+'EXTURE_UV}'+',\x20textureB'+'ias).{STD_'+'AODETAIL_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'oBase\x20=\x20de'+'tailMode_{'+'STD_AODETA'+'IL_DETAILM'+'ODE}(vec3('+'aoBase),\x20v'+'ec3(aoDeta'+'il)).r;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_AO_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(STD_A'+'O_TEXTURE)'+'\x20||\x20define'+'d(STD_AO_V'+'ERTEX)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAo\x20='+'\x20mix(1.0,\x20'+'dAo,\x20mater'+'ial_aoInte'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',gC='\x0avoid\x20occl'+'udeDiffuse'+'(float\x20ao)'+'\x20{\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20ao;\x0a}\x0a',SC='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_occlud'+'eSpecularI'+'ntensity;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0av'+'oid\x20occlud'+'eSpecular('+'float\x20glos'+'s,\x20float\x20a'+'o,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir)\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'AO\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_OCCLUDE_'+'SPECULAR_F'+'LOAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20specOcc'+'\x20=\x20mix(1.0'+',\x20ao,\x20mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20specOc'+'c\x20=\x20ao;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_OCC'+'LUDE_SPECU'+'LAR\x20==\x20GLO'+'SSDEPENDEN'+'T\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20approx'+'imated\x20spe'+'cular\x20occl'+'usion\x20from'+'\x20AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20http:'+'//research'+'.tri-ace.c'+'om/Data/ce'+'dec2011_Re'+'altimePBR_'+'Implementa'+'tion_e.ppt'+'x\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20spec'+'Pow\x20=\x20exp2'+'(gloss\x20*\x201'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'specOcc\x20=\x20'+'saturate(p'+'ow(dot(wor'+'ldNormal,\x20'+'viewDir)\x20+'+'\x20ao,\x200.01\x20'+'*\x20specPow)'+'\x20-\x201.0\x20+\x20a'+'o);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecOcc\x20=\x20m'+'ix(1.0,\x20sp'+'ecOcc,\x20mat'+'erial_occl'+'udeSpecula'+'rIntensity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'*=\x20specOcc'+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20*=\x20specO'+'cc;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sSpecula'+'rLight\x20*=\x20'+'specOcc;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sReflecti'+'on\x20*=\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a'),yC='\x0a\x20\x20\x20\x20vec4\x20'+'dirLm\x20=\x20te'+'xture2D(te'+'xture_dirL'+'ightMap,\x20v'+'Uv1);\x0a\x0a\x20\x20\x20'+'\x20if\x20(bakeD'+'ir\x20>\x200.5)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dAtten'+'\x20>\x200.00001'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dirL'+'m.xyz\x20=\x20di'+'rLm.xyz\x20*\x20'+'2.0\x20-\x20vec3'+'(1.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20sa'+'turate(dAt'+'ten);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20nor'+'malize(dLi'+'ghtDirNorm'+'W.xyz*dAtt'+'en\x20+\x20dirLm'+'.xyz*dirLm'+'.w)\x20*\x200.5\x20'+'+\x20vec3(0.5'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20dirLm.w\x20'+'+\x20dAtten;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.a\x20=\x20m'+'ax(gl_Frag'+'Color.a,\x201'+'.0\x20/\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20dir'+'Lm;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20dirLm.'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color.a\x20=\x20'+'max(dirLm.'+'w,\x20dAtten\x20'+'>\x200.00001\x20'+'?\x20(1.0/255'+'.0)\x20:\x200.0)'+';\x0a\x20\x20\x20\x20}\x0a',vC='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'ambientBak'+'eOcclusion'+'Contrast\x20+'+'\x201.0,\x200.0)'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'vec3(ambie'+'ntBakeOccl'+'usionBrigh'+'tness);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20sa'+'turate(dDi'+'ffuseLight'+');\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20dAmbie'+'ntLight;\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHTM'+'AP_RGBM\x0a\x20\x20'+'\x20\x20//\x20encod'+'e\x20to\x20RGBM\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.rgb'+'\x20=\x20dDiffus'+'eLight;\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor.rgb\x20='+'\x20pow(gl_Fr'+'agColor.rg'+'b,\x20vec3(0.'+'5));\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20/=\x208'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.a\x20=\x20clamp'+'(\x20max(\x20max'+'(\x20gl_FragC'+'olor.r,\x20gl'+'_FragColor'+'.g\x20),\x20max('+'\x20gl_FragCo'+'lor.b,\x201.0'+'\x20/\x20255.0\x20)'+'\x20),\x200.0,1.'+'0\x20);\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.a\x20=\x20ceil'+'(gl_FragCo'+'lor.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20/=\x20gl'+'_FragColor'+'.a;\x0a#else\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(dDiffu'+'seLight,\x201'+'.0);\x0a#endi'+'f\x0a',xC='\x0auniform\x20v'+'ec3\x20view_p'+'osition;\x0a\x0a'+'uniform\x20ve'+'c3\x20light_g'+'lobalAmbie'+'nt;\x0a\x0afloat'+'\x20square(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'x*x;\x0a}\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0ave'+'c3\x20saturat'+'e(vec3\x20x)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3(0.0'+'),\x20vec3(1.'+'0));\x0a}\x0a',TC='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'ec2\x20vMask;'+'\x0avarying\x20v'+'ec2\x20vTiled'+'Uv;\x0a\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0au'+'niform\x20med'+'iump\x20vec2\x20'+'outerScale'+';\x0auniform\x20'+'mediump\x20ve'+'c4\x20atlasRe'+'ct;\x0a\x0avec2\x20'+'nineSliced'+'Uv;\x0a',wC='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vec2\x20vMa'+'sk;\x0avaryin'+'g\x20vec2\x20vTi'+'ledUv;\x0a\x0aun'+'iform\x20medi'+'ump\x20vec4\x20i'+'nnerOffset'+';\x0auniform\x20'+'mediump\x20ve'+'c2\x20outerSc'+'ale;\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20atla'+'sRect;\x0a\x0ave'+'c2\x20nineSli'+'cedUv;\x0a',EC='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afloat\x20'+'bayer2(vec'+'2\x20p)\x20{\x0a\x20\x20\x20'+'\x20return\x20mo'+'d(2.0\x20*\x20p.'+'y\x20+\x20p.x\x20+\x20'+'1.0,\x204.0);'+'\x0a}\x0a\x0a//\x204x4'+'\x20matrix,\x20p'+'\x20-\x20pixel\x20c'+'oordinate\x0a'+'float\x20baye'+'r4(vec2\x20p)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20p1\x20=\x20mod'+'(p,\x202.0);\x0a'+'\x20\x20\x20\x20vec2\x20p'+'2\x20=\x20floor('+'0.5\x20*\x20mod('+'p,\x204.0));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afloat\x20bay'+'er8(vec2\x20p'+')\x20{\x0a\x20\x20\x20\x20ve'+'c2\x20p1\x20=\x20mo'+'d(p,\x202.0);'+'\x0a\x20\x20\x20\x20vec2\x20'+'p2\x20=\x20floor'+'(0.5\x20*\x20mod'+'(p,\x204.0));'+'\x0a\x20\x20\x20\x20vec2\x20'+'p4\x20=\x20floor'+'(0.25\x20*\x20mo'+'d(p,\x208.0))'+';\x0a\x20\x20\x20\x20retu'+'rn\x204.0\x20*\x20('+'4.0\x20*\x20baye'+'r2(p1)\x20+\x20b'+'ayer2(p2))'+'\x20+\x20bayer2('+'p4);\x0a}\x0a',bC='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0auni'+'form\x20vec2\x20'+'pixelOffse'+'t;\x0a\x0a#ifdef'+'\x20GAUSS\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20weigh'+'t[{SAMPLES'+'}];\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20m'+'oments\x20=\x20v'+'ec3(0.0);\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vUv0\x20-'+'\x20pixelOffs'+'et\x20*\x20(floa'+'t({SAMPLES'+'})\x20*\x200.5);'+'\x0a\x20\x20\x20\x20for\x20('+'int\x20i\x20=\x200;'+'\x20i\x20<\x20{SAMP'+'LES};\x20i++)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20c\x20=\x20'+'texture2D('+'source,\x20uv'+'\x20+\x20pixelOf'+'fset\x20*\x20flo'+'at(i));\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20GAUSS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20moments\x20'+'+=\x20c.xyz\x20*'+'\x20weight[i]'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'ments\x20+=\x20c'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'GAUSS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20*=\x201.0\x20/'+'\x20float({SA'+'MPLES});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(momen'+'ts.x,\x20mome'+'nts.y,\x20mom'+'ents.z,\x201.'+'0);\x0a}\x0a',AC='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oat;\x0a\x0avoid'+'\x20getClearC'+'oat()\x20{\x0a\x20\x20'+'\x20\x20ccSpecul'+'arity\x20=\x20ma'+'terial_cle'+'arCoat;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_CLEARC'+'OAT_TEXTUR'+'E\x0a\x20\x20\x20\x20ccSp'+'ecularity\x20'+'*=\x20texture'+'2DBias({ST'+'D_CLEARCOA'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_CL'+'EARCOAT_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20*=\x20satu'+'rate(vVert'+'exColor.{S'+'TD_CLEARCO'+'AT_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',CC='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oatGloss;\x0a'+'\x0avoid\x20getC'+'learCoatGl'+'ossiness()'+'\x20{\x0a\x20\x20\x20\x20ccG'+'lossiness\x20'+'=\x20material'+'_clearCoat'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE\x0a\x20\x20\x20\x20'+'ccGlossine'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_CLEAR'+'COATGLOSS_'+'TEXTURE_NA'+'ME},\x20{STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_CLEAR'+'COATGLOSS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_CLEAR'+'COATGLOSS_'+'INVERT\x0a\x20\x20\x20'+'\x20ccGlossin'+'ess\x20=\x201.0\x20'+'-\x20ccGlossi'+'ness;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20+=\x200.'+'0000001;\x0a}'+'\x0a',PC='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0aunif'+'orm\x20float\x20'+'material_c'+'learCoatBu'+'mpiness;\x0a#'+'endif\x0a\x0avoi'+'d\x20getClear'+'CoatNormal'+'()\x20{\x0a#ifde'+'f\x20STD_CLEA'+'RCOATNORMA'+'L_TEXTURE\x0a'+'\x20\x20\x20\x20vec3\x20n'+'ormalMap\x20='+'\x20{STD_CLEA'+'RCOATNORMA'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_UV}'+',\x20textureB'+'ias));\x0a\x20\x20\x20'+'\x20normalMap'+'\x20=\x20mix(vec'+'3(0.0,\x200.0'+',\x201.0),\x20no'+'rmalMap,\x20m'+'aterial_cl'+'earCoatBum'+'piness);\x0a\x20'+'\x20\x20\x20ccNorma'+'lW\x20=\x20norma'+'lize(dTBN\x20'+'*\x20normalMa'+'p);\x0a#else\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20dVer'+'texNormalW'+';\x0a#endif\x0a}'+'\x0a',MC='\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0avec2\x20ge'+'tCubemapFa'+'ceCoordina'+'tes(const\x20'+'vec3\x20dir,\x20'+'out\x20float\x20'+'faceIndex,'+'\x20out\x20vec2\x20'+'tileOffset'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20vAbs\x20=\x20'+'abs(dir);\x0a'+'\x20\x20\x20\x20float\x20'+'ma;\x0a\x20\x20\x20\x20ve'+'c2\x20uv;\x0a\x20\x20\x20'+'\x20if\x20(vAbs.'+'z\x20>=\x20vAbs.'+'x\x20&&\x20vAbs.'+'z\x20>=\x20vAbs.'+'y)\x20{\x20\x20\x20//\x20'+'front\x20/\x20ba'+'ck\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20faceInde'+'x\x20=\x20dir.z\x20'+'<\x200.0\x20?\x205.'+'0\x20:\x204.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2(dir.z\x20'+'<\x200.0\x20?\x20-d'+'ir.x\x20:\x20dir'+'.x,\x20-dir.y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.x\x20=\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20t'+'ileOffset.'+'y\x20=\x20dir.z\x20'+'<\x200.0\x20?\x201.'+'0\x20:\x200.0;\x0a\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if(vAbs.y'+'\x20>=\x20vAbs.x'+')\x20{\x20\x20//\x20to'+'p\x20index\x202,'+'\x20bottom\x20in'+'dex\x203\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20faceI'+'ndex\x20=\x20dir'+'.y\x20<\x200.0\x20?'+'\x203.0\x20:\x202.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ma\x20=\x200.5\x20/'+'\x20vAbs.y;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uv\x20'+'=\x20vec2(dir'+'.x,\x20dir.y\x20'+'<\x200.0\x20?\x20-d'+'ir.z\x20:\x20dir'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20tileOff'+'set.x\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.y\x20=\x20dir.'+'y\x20<\x200.0\x20?\x20'+'1.0\x20:\x200.0;'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'\x20=\x200.5\x20/\x20v'+'Abs.x;\x0a\x20\x20\x20'+('\x20\x20\x20\x20\x20uv\x20=\x20'+'vec2(dir.x'+'\x20<\x200.0\x20?\x20d'+'ir.z\x20:\x20-di'+'r.z,\x20-dir.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20tileOffs'+'et.x\x20=\x200.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'tileOffset'+'.y\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20uv'+'\x20*\x20ma\x20+\x200.'+'5;\x0a}\x0a\x0a//\x20c'+'onverts\x20un'+'normalized'+'\x20direction'+'\x20vector\x20to'+'\x20a\x20texture'+'\x20coordinat'+'e\x20for\x20a\x20cu'+'bemap\x20face'+'\x20stored\x20wi'+'thin\x20textu'+'re\x20atlas\x20d'+'escribed\x20b'+'y\x20the\x20view'+'port\x0avec2\x20'+'getCubemap'+'AtlasCoord'+'inates(con'+'st\x20vec3\x20om'+'niAtlasVie'+'wport,\x20flo'+'at\x20shadowE'+'dgePixels,'+'\x20float\x20sha'+'dowTexture'+'Resolution'+',\x20const\x20ve'+'c3\x20dir)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20faceIndex'+';\x0a\x20\x20\x20\x20vec2'+'\x20tileOffse'+'t;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapFac'+'eCoordinat'+'es(dir,\x20fa'+'ceIndex,\x20t'+'ileOffset)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'move\x20uv\x20co'+'ordinates\x20'+'inwards\x20in'+'side\x20to\x20co'+'mpensate\x20f'+'or\x20larger\x20'+'fov\x20when\x20r'+'endering\x20s'+'hadow\x20into'+'\x20atlas\x0a\x20\x20\x20'+'\x20float\x20atl'+'asFaceSize'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20tileSi'+'ze\x20=\x20shado'+'wTextureRe'+'solution\x20*'+'\x20atlasFace'+'Size;\x0a\x20\x20\x20\x20'+'float\x20offs'+'et\x20=\x20shado'+'wEdgePixel'+'s\x20/\x20tileSi'+'ze;\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv\x20*\x20ve'+'c2(1.0\x20-\x20o'+'ffset\x20*\x202.'+'0)\x20+\x20vec2('+'offset\x20*\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20*'+'=\x20atlasFac'+'eSize;\x0a\x0a\x20\x20'+'\x20\x20//\x20offse'+'t\x20into\x20fac'+'e\x20of\x20the\x20a')+('tlas\x20(3x3\x20'+'grid)\x0a\x20\x20\x20\x20'+'uv\x20+=\x20tile'+'Offset\x20*\x20a'+'tlasFaceSi'+'ze;\x0a\x0a\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nto\x20the\x20at'+'las\x20viewpo'+'rt\x0a\x20\x20\x20\x20uv\x20'+'+=\x20omniAtl'+'asViewport'+'.xy;\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a'),DC='\x0avec3\x20_get'+'CookieClus'+'tered(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20uv,\x20floa'+'t\x20intensit'+'y,\x20vec4\x20co'+'okieChanne'+'l)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20pixel\x20'+'=\x20mix(vec4'+'(1.0),\x20tex'+'ture2DLod('+'tex,\x20uv,\x200'+'.0),\x20inten'+'sity);\x0a\x20\x20\x20'+'\x20bool\x20isRg'+'b\x20=\x20dot(co'+'okieChanne'+'l.rgb,\x20vec'+'3(1.0))\x20=='+'\x203.0;\x0a\x20\x20\x20\x20'+'return\x20isR'+'gb\x20?\x20pixel'+'.rgb\x20:\x20vec'+'3(dot(pixe'+'l,\x20cookieC'+'hannel));\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0ave'+'c3\x20getCook'+'ie2DCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20mat4\x20'+'transform,'+'\x20vec3\x20worl'+'dPosition,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieC'+'hannel)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20p'+'rojPos\x20=\x20t'+'ransform\x20*'+'\x20vec4(worl'+'dPosition,'+'\x201.0);\x0a\x20\x20\x20'+'\x20return\x20_g'+'etCookieCl'+'ustered(TE'+'XTURE_PASS'+'(tex),\x20pro'+'jPos.xy\x20/\x20'+'projPos.w,'+'\x20intensity'+',\x20cookieCh'+'annel);\x0a}\x0a'+'\x0a//\x20getCoo'+'kie\x20for\x20cl'+'ustered\x20om'+'ni\x20light\x20w'+'ith\x20the\x20co'+'okie\x20textu'+'re\x20being\x20s'+'tored\x20in\x20t'+'he\x20cookie\x20'+'atlas\x0avec3'+'\x20getCookie'+'CubeCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec3\x20'+'dir,\x20float'+'\x20intensity'+',\x20vec4\x20coo'+'kieChannel'+',\x20float\x20sh'+'adowTextur'+'eResolutio'+'n,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20omniAtla'+'sViewport)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+('tureResolu'+'tion,\x20dir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getCoo'+'kieCluster'+'ed(TEXTURE'+'_PASS(tex)'+',\x20uv,\x20inte'+'nsity,\x20coo'+'kieChannel'+');\x0a}\x0a'),IC='\x0a\x0avec3\x20_ge'+'tShadowCoo'+'rdPerspZbu'+'ffer(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20wP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20shado'+'wMatrix\x20*\x20'+'vec4(wPos,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'yz\x20/=\x20proj'+'Pos.w;\x0a\x20\x20\x20'+'\x20return\x20pr'+'ojPos.xyz;'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20bias\x20i'+'s\x20already\x20'+'applied\x20on'+'\x20render\x0a}\x0a'+'\x0avec3\x20getS'+'hadowCoord'+'PerspZbuff'+'erNormalOf'+'fset(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20no'+'rmal)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20wPo'+'s\x20=\x20vPosit'+'ionW\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowCoordPe'+'rspZbuffer'+'(shadowMat'+'rix,\x20shado'+'wParams,\x20w'+'Pos);\x0a}\x0a\x0av'+'ec3\x20normal'+'OffsetPoin'+'tShadow(ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20lightPos'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm,\x20vec3'+'\x20normal)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20distScale'+'\x20=\x20length('+'lightDir);'+'\x0a\x20\x20\x20\x20vec3\x20'+'wPos\x20=\x20vPo'+'sitionW\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x20/'+'/0.02\x0a\x20\x20\x20\x20'+'vec3\x20dir\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0afloa'+'t\x20getShado'+'wOmniClust'+'eredPCF1(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20omniAtla'+'sViewport,'+'\x20float\x20sha'+'dowEdgePix'+'els,\x20vec3\x20'+'lightDir)\x20'+'{\x0a\x0a\x20\x20\x20\x20flo'+'at\x20shadowT'+('extureReso'+'lution\x20=\x20s'+'hadowParam'+'s.x;\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etCubemapA'+'tlasCoordi'+'nates(omni'+'AtlasViewp'+'ort,\x20shado'+'wEdgePixel'+'s,\x20shadowT'+'extureReso'+'lution,\x20li'+'ghtDir);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'shadowZ\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(uv,\x20sha'+'dowZ));\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF3'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF3'+'x3(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF5)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF5'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s')+('hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF5'+'x5(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a/'+'/\x20Clustere'+'d\x20Spot\x20Sam'+'pling\x20usin'+'g\x20atlas\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF1)\x0a\x0afl'+'oat\x20getSha'+'dowSpotClu'+'steredPCF1'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSha'+'dow(shadow'+'Map,\x20shado'+'wCoord);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x0af'+'loat\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF3x3'+'(SHADOWMAP'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a}\x0a\x0a#'+'endif\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x0afloa'+'t\x20getShado'+'wSpotClust'+'eredPCF5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC')+('oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a}'+'\x0a#endif\x0a'),LC='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20clu'+'sterWorldT'+'exture;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20lightsTe'+'xture;\x0a\x0a#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x20\x20\x20\x20//\x20TO'+'DO:\x20when\x20V'+'SM\x20shadow\x20'+'is\x20support'+'ed,\x20it\x20nee'+'ds\x20to\x20use\x20'+'sampler2D\x20'+'in\x20webgl2\x0a'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'DShadow\x20sh'+'adowAtlasT'+'exture;\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20CLUSTER'+'_COOKIES\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20cookieAtl'+'asTexture;'+'\x0a#endif\x0a\x0au'+'niform\x20int'+'\x20clusterMa'+'xCells;\x0a\x0a/'+'/\x201.0\x20if\x20c'+'lustered\x20l'+'ighting\x20ca'+'n\x20be\x20skipp'+'ed\x20(0\x20ligh'+'ts\x20in\x20the\x20'+'clusters)\x0a'+'uniform\x20fl'+'oat\x20cluste'+'rSkip;\x0a\x0aun'+'iform\x20vec3'+'\x20clusterCe'+'llsCountBy'+'BoundsSize'+';\x0auniform\x20'+'vec3\x20clust'+'erTextureS'+'ize;\x0aunifo'+'rm\x20vec3\x20cl'+'usterBound'+'sMin;\x0aunif'+'orm\x20vec3\x20c'+'lusterBoun'+'dsDelta;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsDot;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsMax;\x0au'+'niform\x20vec'+'2\x20shadowAt'+'lasParams;'+'\x0a\x0a//\x20struc'+'ture\x20stori'+'ng\x20light\x20p'+'roperties\x20'+'of\x20a\x20clust'+'ered\x20light'+'\x0a//\x20it\x27s\x20s'+('orted\x20to\x20h'+'ave\x20all\x20ve'+'ctors\x20alig'+'ned\x20to\x204\x20f'+'loats\x20to\x20l'+'imit\x20paddi'+'ng\x0astruct\x20'+'ClusterLig'+'htData\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x2032b'+'it\x20of\x20flag'+'s\x0a\x20\x20\x20\x20uint'+'\x20flags;\x0a\x0a\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20siz'+'es\x20/\x20orien'+'tation\x0a\x20\x20\x20'+'\x20vec3\x20half'+'Width;\x0a\x0a\x20\x20'+'\x20\x20bool\x20isS'+'pot;\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20sizes\x20'+'/\x20orientat'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20halfHei'+'ght;\x0a\x0a\x20\x20\x20\x20'+'//\x20light\x20i'+'ndex\x0a\x20\x20\x20\x20i'+'nt\x20lightIn'+'dex;\x0a\x0a\x20\x20\x20\x20'+'//\x20world\x20s'+'pace\x20posit'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20positio'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20shape\x0a\x20\x20'+'\x20\x20uint\x20sha'+'pe;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20direct'+'ion\x20(spot\x20'+'light\x20only'+')\x0a\x20\x20\x20\x20vec3'+'\x20direction'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20foll'+'ow\x20mode\x0a\x20\x20'+'\x20\x20bool\x20fal'+'loffModeLi'+'near;\x0a\x0a\x20\x20\x20'+'\x20//\x20color\x0a'+'\x20\x20\x20\x20vec3\x20c'+'olor;\x0a\x0a\x20\x20\x20'+'\x20//\x200.0\x20if'+'\x20the\x20light'+'\x20doesn\x27t\x20c'+'ast\x20shadow'+'s\x0a\x20\x20\x20\x20floa'+'t\x20shadowIn'+'tensity;\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20vec3\x20om'+'niAtlasVie'+'wport;\x0a\x0a\x20\x20'+'\x20\x20//\x20range'+'\x20of\x20the\x20li'+'ght\x0a\x20\x20\x20\x20fl'+'oat\x20range;'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'hannel\x20mas'+'k\x20-\x20one\x20of'+'\x20the\x20chann'+'els\x20has\x201,'+'\x20the\x20other'+'s\x20are\x200\x0a\x20\x20'+'\x20\x20vec4\x20coo'+'kieChannel'+'Mask;\x0a\x0a\x20\x20\x20'+'\x20//\x20compre'+'ssed\x20biase'+'s,\x20two\x20haf'+'-floats\x20st'+'ored\x20in\x20a\x20'+'float\x0a\x20\x20\x20\x20'+'float\x20bias'+'esData;\x0a\x0a\x20')+('\x20\x20\x20//\x20shad'+'ow\x20bias\x20va'+'lues\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wBias;\x0a\x20\x20\x20'+'\x20float\x20sha'+'dowNormalB'+'ias;\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20f'+'loat\x20angle'+'sData;\x0a\x0a\x20\x20'+'\x20\x20//\x20spot\x20'+'light\x20inne'+'r\x20and\x20oute'+'r\x20angle\x20co'+'sine\x0a\x20\x20\x20\x20f'+'loat\x20inner'+'ConeAngleC'+'os;\x0a\x20\x20\x20\x20fl'+'oat\x20outerC'+'oneAngleCo'+'s;\x0a\x0a\x20\x20\x20\x20//'+'\x20intensity'+'\x20of\x20the\x20co'+'okie\x0a\x20\x20\x20\x20f'+'loat\x20cooki'+'eIntensity'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20mask'+'\x0a\x20\x20\x20\x20//flo'+'at\x20mask;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Dynamic;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Lightmappe'+'d;\x0a};\x0a\x0a//\x20'+'Note:\x20on\x20s'+'ome\x20device'+'s\x20(tested\x20'+'on\x20Pixel\x203'+'A\x20XL),\x20thi'+'s\x20matrix\x20w'+'hen\x20stored'+'\x20inside\x20th'+'e\x20light\x20st'+'ruct\x20has\x20l'+'ower\x20preci'+'sion\x20compa'+'red\x20to\x0a//\x20'+'when\x20store'+'d\x20outside,'+'\x20so\x20we\x20sto'+'re\x20it\x20outs'+'ide\x20to\x20avo'+'id\x20spot\x20sh'+'adow\x20flick'+'ering.\x20Thi'+'s\x20might\x20ne'+'ed\x20to\x20be\x20d'+'one\x20to\x20oth'+'er\x20/\x20all\x20m'+'embers\x0a//\x20'+'of\x20the\x20str'+'ucture\x20if\x20'+'further\x20si'+'milar\x20issu'+'es\x20are\x20obs'+'erved.\x0a\x0a//'+'\x20shadow\x20(s'+'pot\x20light\x20'+'only)\x20/\x20co'+'okie\x20proje'+'ction\x20matr'+'ix\x0amat4\x20li'+'ghtProject'+'ionMatrix;'+'\x0a\x0avec4\x20sam'+'pleLightTe'+'xtureF(con'+'st\x20Cluster'+'LightData\x20'+'clusterLig'+'htData,\x20in'+'t\x20index)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20texelFet'+'ch(lightsT'+'exture,\x20iv'+'ec2(index,'+'\x20clusterLi'+'ghtData.li'+'ghtIndex),'+'\x200);\x0a}\x0a\x0avo'+'id\x20decodeC'+'lusterLigh')+('tCore(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData,\x20flo'+'at\x20lightIn'+'dex)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20index\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.li'+'ghtIndex\x20='+'\x20int(light'+'Index);\x0a\x0a\x20'+'\x20\x20\x20//\x20samp'+'le\x20data\x20en'+'coding\x20hal'+'f-float\x20va'+'lues\x20into\x20'+'32bit\x20uint'+'s\x0a\x20\x20\x20\x20vec4'+'\x20halfData\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_COL'+'OR_ANGLES_'+'BIAS});\x0a\x0a\x20'+'\x20\x20\x20//\x20stor'+'e\x20floats\x20w'+'e\x20decode\x20l'+'ater\x20as\x20ne'+'eded\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.angl'+'esData\x20=\x20h'+'alfData.z;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.biasesDa'+'ta\x20=\x20halfD'+'ata.w;\x0a\x0a\x20\x20'+'\x20\x20//\x20decom'+'press\x20colo'+'r\x20half-flo'+'ats\x0a\x20\x20\x20\x20ve'+'c2\x20colorRG'+'\x20=\x20unpackH'+'alf2x16(fl'+'oatBitsToU'+'int(halfDa'+'ta.x));\x0a\x20\x20'+'\x20\x20vec2\x20col'+'orB_\x20=\x20unp'+'ackHalf2x1'+'6(floatBit'+'sToUint(ha'+'lfData.y))'+';\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.color\x20='+'\x20vec3(colo'+'rRG,\x20color'+'B_.x)\x20*\x20{L'+'IGHT_COLOR'+'_DIVIDER};'+'\x0a\x0a\x20\x20\x20\x20//\x20p'+'osition\x20an'+'d\x20range,\x20f'+'ull\x20floats'+'\x0a\x20\x20\x20\x20vec4\x20'+'lightPosRa'+'nge\x20=\x20samp'+'leLightTex'+'tureF(clus'+'terLightDa'+'ta,\x20{CLUST'+'ER_TEXTURE'+'_POSITION_'+'RANGE});\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'position\x20='+'\x20lightPosR'+'ange.xyz;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.range\x20=\x20l'+'ightPosRan'+'ge.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20d'+'irection\x20&'+'\x20flags\x20dat'+'a\x0a\x20\x20\x20\x20vec4'+'\x20lightDir_'+'Flags\x20=\x20sa'+'mpleLightT'+'extureF(cl')+('usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_DIRECTI'+'ON_FLAGS})'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'spot\x20light'+'\x20direction'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.directio'+'n\x20=\x20lightD'+'ir_Flags.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x2032bit\x20fl'+'ags\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20floatBi'+'tsToUint(l'+'ightDir_Fl'+'ags.w);\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sSpot\x20=\x20(c'+'lusterLigh'+'tData.flag'+'s\x20&\x20(1u\x20<<'+'\x2030u))\x20!=\x20'+'0u;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.shape'+'\x20=\x20(cluste'+'rLightData'+'.flags\x20>>\x20'+'28u)\x20&\x200x3'+'u;\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.fallof'+'fModeLinea'+'r\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2027u'+'))\x20==\x200u;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.shadowInt'+'ensity\x20=\x20f'+'loat((clus'+'terLightDa'+'ta.flags\x20>'+'>\x200u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eIntensity'+'\x20=\x20float(('+'clusterLig'+'htData.fla'+'gs\x20>>\x208u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sDynamic\x20='+'\x20(clusterL'+'ightData.f'+'lags\x20&\x20(1u'+'\x20<<\x2022u))\x20'+'!=\x200u;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.is'+'Lightmappe'+'d\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2021u'+'))\x20!=\x200u;\x0a'+'}\x0a\x0avoid\x20de'+'codeCluste'+'rLightSpot'+'(inout\x20Clu'+'sterLightD'+'ata\x20cluste'+'rLightData'+')\x20{\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20cos\x20ang'+'les\x0a\x20\x20\x20\x20ve'+'c2\x20angles\x20'+'=\x20unpackHa'+'lf2x16(flo'+'atBitsToUi'+'nt(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight')+('Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0av'+'oid\x20decode'+'ClusterLig'+'htOmniAtla'+'sViewport('+'inout\x20Clus'+'terLightDa'+'ta\x20cluster'+'LightData)'+'\x20{\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.omniAt'+'lasViewpor'+'t\x20=\x20sample'+'LightTextu'+'reF(cluste'+'rLightData'+',\x20{CLUSTER'+'_TEXTURE_P'+'ROJ_MAT_0}'+').xyz;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtAreaDat'+'a(inout\x20Cl'+'usterLight'+'Data\x20clust'+'erLightDat'+'a)\x20{\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.half'+'Width\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_AREA_DA'+'TA_WIDTH})'+'.xyz;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.hal'+'fHeight\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData,\x20{C'+'LUSTER_TEX'+'TURE_AREA_'+'DATA_HEIGH'+'T}).xyz;\x0a}'+'\x0a\x0avoid\x20dec'+'odeCluster'+'LightProje'+'ctionMatri'+'xData(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20m0\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData,\x20{CL'+'USTER_TEXT'+'URE_PROJ_M'+'AT_0});\x0a\x20\x20'+'\x20\x20vec4\x20m1\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_PRO'+'J_MAT_1});'+'\x0a\x20\x20\x20\x20vec4\x20'+'m2\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a,\x20{CLUSTE'+'R_TEXTURE_'+'PROJ_MAT_2'+'});\x0a\x20\x20\x20\x20ve'+'c4\x20m3\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight')+('Data,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4('+'m0,\x20m1,\x20m2'+',\x20m3);\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtShadowD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20//\x20s'+'hadow\x20bias'+'es\x0a\x20\x20\x20\x20vec'+'2\x20biases\x20='+'\x20unpackHal'+'f2x16(floa'+'tBitsToUin'+'t(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20extra'+'ct\x20channel'+'\x20mask\x20from'+'\x20flags\x0a\x20\x20\x20'+'\x20uint\x20cook'+'ieFlags\x20=\x20'+'(clusterLi'+'ghtData.fl'+'ags\x20>>\x2023u'+')\x20&\x200x0Fu;'+'\x20\x20//\x204bits'+',\x20each\x20bit'+'\x20enables\x20a'+'\x20channel\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'cookieChan'+'nelMask\x20=\x20'+'vec4(uvec4'+'(cookieFla'+'gs)\x20&\x20uvec'+'4(1u,\x202u,\x20'+'4u,\x208u));\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.cookieCha'+'nnelMask\x20='+'\x20step(1.0,'+'\x20clusterLi'+'ghtData.co'+'okieChanne'+'lMask);\x20\x20/'+'/\x20Normaliz'+'e\x20to\x200.0\x20o'+'r\x201.0\x0a}\x0a\x0av'+'oid\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20Cluster'+'LightData\x20'+'light,\x20\x0a\x20\x20'+'\x20\x20vec3\x20wor'+'ldNormal,\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'viewDir,\x20\x0a'+'\x20\x20\x20\x20vec3\x20r'+'eflectionD'+'ir,\x0a#if\x20de'+'fined(LIT_'+'CLEARCOAT)'+'\x0a\x20\x20\x20\x20vec3\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20')+('\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20mat3\x20tb'+'n,\x20\x0a#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20vec'+'3\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20vec3\x20cl'+'earcoat_wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20float'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20float\x20sh'+'een_gloss,'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce_intensi'+'ty\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20vec'+'3(1.0);\x0a\x20\x20'+'\x20\x20float\x20di'+'ffuseAtten'+'uation\x20=\x201'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20fallof'+'fAttenuati'+'on\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20omn'+'i\x20part\x20of\x20'+'the\x20light\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ightDirW\x20='+'\x20evalOmniL'+'ight(light'+'.position)'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'ormW\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20')+('else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fall'+'offAttenua'+'tion\x20=\x20get'+'FalloffLin'+'ear(light.'+'range,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20getFa'+'lloffInvSq'+'uared(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_AREALIGH'+'TS\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shape\x20!='+'\x20{LIGHTSHA'+'PE_PUNCTUA'+'L})\x20{\x20//\x20a'+'rea\x20light\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20hand'+'le\x20light\x20s'+'hape\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20diffuse'+'Attenuatio'+'n\x20=\x20getRec'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirW,\x20lig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'DISK})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getD'+'iskLightDi'+'ffuse(worl'+'dNormal,\x20v'+'iewDir,\x20li'+'ghtDirW,\x20l'+'ightDirNor'+'mW)\x20*\x2016.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20{\x20//\x20sphe'+'re\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getSphereL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20g'+'etLightDif'+'fuse(world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+');\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spot'+'\x20light\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtSpot(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20*=\x20'+'getSpotEff'+'ect(light.'+'direction,'+'\x20light.inn'+'erConeAngl'+'eCos,\x20ligh'+'t.outerCon'+'eAngleCos,'+'\x20lightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_COOK'+'IES)\x20||\x20de'+'fined(CLUS'+'TER_SHADOW'+'S)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20shadow'+'\x20/\x20cookie\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shadowIn'+'tensity\x20>\x20'+'0.0\x20||\x20lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'ared\x20shado'+'w\x20/\x20cookie'+'\x20data\x20depe'+'nds\x20on\x20lig'+'ht\x20type\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightOmniAt'+'lasViewpor'+'t(light);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20shadowTex'+'tureResolu'+'tion\x20=\x20sha'+'dowAtlasPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadowEdge'+'Pixels\x20=\x20s'+'hadowAtlas'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_COOKIES\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'cookie\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20de'+'codeCluste'+'rLightCook'+'ieData(lig'+'ht);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.isSp'+'ot)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'cookieAtte'+'nuation\x20=\x20'+'getCookie2'+'DClustered'+'(TEXTURE_P'+'ASS(cookie'+'AtlasTextu'+'re),\x20light'+'Projection'+'Matrix,\x20vP'+'ositionW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20cookieAt'+'tenuation\x20'+'=\x20getCooki'+'eCubeClust'+'ered(TEXTU'+'RE_PASS(co'+'okieAtlasT'+'exture),\x20l'+'ightDirW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask,\x20sh'+'adowTextur'+'eResolutio'+'n,\x20shadowE'+'dgePixels,'+'\x20light.omn'+'iAtlasView'+'port);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20shadow\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shadow'+'Intensity\x20'+'>\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d')+('ecodeClust'+'erLightSha'+'dowData(li'+'ght);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20shadowPa'+'rams\x20=\x20vec'+'4(shadowTe'+'xtureResol'+'ution,\x20lig'+'ht.shadowN'+'ormalBias,'+'\x20light.sha'+'dowBias,\x201'+'.0\x20/\x20light'+'.range);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'isSpot)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ot\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'hadowCoord'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat'+'rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F1)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CF1(SHADOW'+'MAP_PASS(s'+'hadowAtlas'+'Texture),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20de'+'fined(CLUS'+'TER_SHADOW'+'_TYPE_PCF3'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_PASS(sha'+'dowAtlasTe'+'xture),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#elif\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF5('+'SHADOWMAP_'+'PASS(shado'+'wAtlasText'+'ure),\x20shad'+'owCoord,\x20s'+'hadowParam')+('s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCSS)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20shadow\x20='+'\x20getShadow'+'SpotCluste'+'redPCSS(SH'+'ADOWMAP_PA'+'SS(shadowA'+'tlasTextur'+'e),\x20shadow'+'Coord,\x20sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20m'+'ix(1.0,\x20sh'+'adow,\x20ligh'+'t.shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20om'+'ni\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20d'+'ir\x20=\x20norma'+'lOffsetPoi'+'ntShadow(s'+'hadowParam'+'s,\x20light.p'+'osition,\x20l'+'ightDirW,\x20'+'lightDirNo'+'rmW,\x20geome'+'tricNormal'+');\x20\x20//\x20nor'+'malBias\x20ad'+'justed\x20for'+'\x20distance\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_SHADO'+'W_TYPE_PCF'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20sha'+'dow\x20=\x20getS'+'hadowOmniC'+'lusteredPC'+'F1(SHADOWM'+'AP_PASS(sh'+'adowAtlasT'+'exture),\x20s'+'hadowParam'+'s,\x20light.o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20dir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#eli'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF3)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadowOm'+'niClustere'+'dPCF3(SHAD'+'OWMAP_PASS'+'(shadowAtl'+'asTexture)'+',\x20shadowPa'+'rams,\x20ligh'+'t.omniAtla'+'sViewport,')+('\x20shadowEdg'+'ePixels,\x20d'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20shadow\x20'+'=\x20getShado'+'wOmniClust'+'eredPCF5(S'+'HADOWMAP_P'+'ASS(shadow'+'AtlasTextu'+'re),\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20*=\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20areaDi'+'ffuse\x20=\x20(d'+'iffuseAtte'+'nuation\x20*\x20'+'falloffAtt'+'enuation)\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaDiffuse\x20'+'=\x20mix(area'+'Diffuse,\x20v'+'ec3(0),\x20dL'+'TCSpecFres'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20dif'+'fuse\x20-\x20it\x20'+'does\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20')+('into\x20specu'+'lar\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20a'+'reaDiffuse'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20and\x20clear'+'\x20coat\x20are\x20'+'material\x20s'+'ettings\x20an'+'d\x20get\x20incl'+'uded\x20by\x20a\x20'+'define\x20bas'+'ed\x20on\x20the\x20'+'material\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20specular'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20areaLig'+'htSpecular'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'RECT})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecular\x20=\x20g'+'etRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20area'+'LightSpecu'+'lar\x20=\x20getD'+'iskLightSp'+'ecular(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x20//\x20sp'+'here\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getSp'+'hereLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp'+'ecFres\x20*\x20a'+'reaLightSp'+'ecular\x20*\x20f'+'alloffAtte'+'nuation\x20*\x20'+'light.colo'+'r\x20*\x20cookie'+'Attenuatio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x20clear'+'\x20coat\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20areaLigh'+'tSpecularC')+('C;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shape\x20'+'==\x20{LIGHTS'+'HAPE_RECT}'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getRectLig'+'htSpecular'+'(clearcoat'+'_worldNorm'+'al,\x20viewDi'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(light'+'.shape\x20==\x20'+'{LIGHTSHAP'+'E_DISK})\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'arCC\x20=\x20get'+'DiskLightS'+'pecular(cl'+'earcoat_wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x20'+'//\x20sphere\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaLi'+'ghtSpecula'+'rCC\x20=\x20getS'+'phereLight'+'Specular(c'+'learcoat_w'+'orldNormal'+',\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20+=\x20ccLTCS'+'pecFres\x20*\x20'+'areaLightS'+'pecularCC\x20'+'*\x20falloffA'+'ttenuation'+'\x20*\x20light.c'+'olor\x20\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20{\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'unctualDif'+'fuse\x20=\x20fal'+'loffAttenu'+'ation\x20*\x20li'+'ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'CLUSTER_AR'+'EALIGHTS)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20punctual')+('Diffuse\x20=\x20'+'mix(punctu'+'alDiffuse,'+'\x20vec3(0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20punctu'+'alDiffuse;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20and\x20cle'+'ar\x20coat\x20ar'+'e\x20material'+'\x20settings\x20'+'and\x20get\x20in'+'cluded\x20by\x20'+'a\x20define\x20b'+'ased\x20on\x20th'+'e\x20material'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20halfD'+'ir\x20=\x20norma'+'lize(-ligh'+'tDirNormW\x20'+'+\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR_FRESNEL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htSpecular'+'(halfDir,\x20'+'reflection'+'Dir,\x20world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation\x20*'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'viewDir,\x20h'+'alfDir),\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descence_i'+'ntensity\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecular('+'halfDir,\x20c'+'learcoatRe'+'flectionDi'+'r,\x20clearco'+'at_worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'clearcoat_'+'gloss,\x20tbn'+')\x20*\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation\x20*\x20g'+'etFresnelC'+'C(dot(view'+'Dir,\x20halfD'+'ir));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20getLi'+'ghtSpecula'+'r(halfDir,'+'\x20clearcoat'+'Reflection'+'Dir,\x20clear'+'coat_world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20clearcoa'+'t_gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HEEN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec')+('ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'ir,\x20worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNormW,'+'\x20sheen_glo'+'ss)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20Wri'+'te\x20to\x20glob'+'al\x20attenua'+'tion\x20value'+'s\x20(for\x20lig'+'htmapper)\x0a'+'\x20\x20\x20\x20dAtten'+'\x20=\x20falloff'+'Attenuatio'+'n;\x0a\x20\x20\x20\x20dLi'+'ghtDirNorm'+'W\x20=\x20lightD'+'irNormW;\x0a}'+'\x0a\x0avoid\x20eva'+'luateClust'+'erLight(\x0a\x20'+'\x20\x20\x20float\x20l'+'ightIndex,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20worldNorm'+'al,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20viewDi'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20reflect'+'ionDir,\x20\x0a#'+'if\x20defined'+'(LIT_CLEAR'+'COAT)\x0a\x20\x20\x20\x20'+'vec3\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'float\x20glos'+'s,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20specula'+'rity,\x20\x0a\x20\x20\x20'+'\x20vec3\x20geom'+'etricNorma'+'l,\x20\x0a\x20\x20\x20\x20ma'+'t3\x20tbn,\x20\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20ve'+'c3\x20clearco'+'at_worldNo'+'rmal,\x0a\x20\x20\x20\x20'+'float\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20flo'+'at\x20sheen_g'+'loss,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escence_in'+'tensity\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'decode\x20cor'+'e\x20light\x20da'+'ta\x20from\x20te'+'xtures\x0a\x20\x20\x20'+'\x20ClusterLi'+'ghtData\x20cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(cluster'+'LightData,'+'\x20lightInde'+'x);\x0a\x0a\x20\x20\x20\x20/'+'/\x20evaluate'+'\x20light\x20if\x20'+'it\x20uses\x20ac'+'cepted\x20lig'+'ht\x20mask\x0a\x20\x20'+'\x20\x20#ifdef\x20C')+('LUSTER_MES'+'H_DYNAMIC_'+'LIGHTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20bool\x20'+'acceptLigh'+'tMask\x20=\x20cl'+'usterLight'+'Data.isDyn'+'amic;\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20bool\x20a'+'cceptLight'+'Mask\x20=\x20clu'+'sterLightD'+'ata.isLigh'+'tmapped;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20if\x20(a'+'cceptLight'+'Mask)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clusterLi'+'ghtData,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20worldNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vi'+'ewDir,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'reflection'+'Dir,\x20\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x20\x0a'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_worldNorm'+'al,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sheen'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a}\x0a\x0avoid'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20reflecti'+'onDir,\x20\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20v'+'ec3\x20clearc'+'oatReflect'+'ionDir,\x0a#e'+'ndif\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20mat'+'3\x20tbn,\x20\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a#end')+('if\x0a\x20\x20\x20\x20vec'+'3\x20clearcoa'+'t_worldNor'+'mal,\x0a\x20\x20\x20\x20f'+'loat\x20clear'+'coat_gloss'+',\x0a\x20\x20\x20\x20floa'+'t\x20sheen_gl'+'oss,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scence_int'+'ensity\x0a)\x20{'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'kip\x20lights'+'\x20if\x20no\x20lig'+'hts\x20at\x20all'+'\x0a\x20\x20\x20\x20if\x20(c'+'lusterSkip'+'\x20>\x200.5)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20positi'+'on\x20to\x203d\x20i'+'nteger\x20cel'+'l\x20cordinat'+'es\x20in\x20the\x20'+'cluster\x20st'+'ructure\x0a\x20\x20'+'\x20\x20vec3\x20cel'+'lCoords\x20=\x20'+'floor((vPo'+'sitionW\x20-\x20'+'clusterBou'+'ndsMin)\x20*\x20'+'clusterCel'+'lsCountByB'+'oundsSize)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'no\x20lightin'+'g\x20when\x20cel'+'l\x20coordina'+'te\x20is\x20out\x20'+'of\x20range\x0a\x20'+'\x20\x20\x20if\x20(!(a'+'ny(lessTha'+'n(cellCoor'+'ds,\x20vec3(0'+'.0)))\x20||\x20a'+'ny(greater'+'ThanEqual('+'cellCoords'+',\x20clusterC'+'ellsMax)))'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cell'+'\x20index\x20(ma'+'pping\x20from'+'\x203d\x20cell\x20c'+'oordinates'+'\x20to\x20linear'+'\x20memory)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20cellInd'+'ex\x20=\x20dot(c'+'lusterCell'+'sDot,\x20cell'+'Coords);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20convert\x20c'+'ell\x20index\x20'+'to\x20uv\x20coor'+'dinates\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20clusterV'+'\x20=\x20floor(c'+'ellIndex\x20*'+'\x20clusterTe'+'xtureSize.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20cl'+'usterU\x20=\x20c'+'ellIndex\x20-'+'\x20(clusterV'+'\x20*\x20cluster'+'TextureSiz'+'e.x);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20lo'+'op\x20over\x20ma'+'ximum\x20numb'+'er\x20of\x20ligh'+'t\x20cells\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20light'+'CellIndex\x20'+'=\x200;\x20light'+'CellIndex\x20'+'<\x20clusterM'+'axCells;\x20l'+'ightCellIn')+('dex++)\x20{\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20using'+'\x20a\x20single\x20'+'channel\x20te'+'xture\x20with'+'\x20data\x20in\x20r'+'ed\x20channel'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20l'+'ightIndex\x20'+'=\x20texelFet'+'ch(cluster'+'WorldTextu'+'re,\x20ivec2('+'int(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20clusterV'+'),\x200).x;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'tIndex\x20<=\x20'+'0.0)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20break;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20evaluateC'+'lusterLigh'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightIndex\x20'+'*\x20255.0,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel,\x0a#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20cl'+'earcoat_gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sheen_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),RC='\x0avec3\x20comb'+'ineColor(v'+'ec3\x20albedo'+',\x20vec3\x20she'+'enSpecular'+'ity,\x20float'+'\x20clearcoat'+'Specularit'+'y)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20ret\x20=\x20'+'vec3(0);\x0a#'+'ifdef\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20ret\x20'+'+=\x20(dDiffu'+'seLight\x20-\x20'+'light_glob'+'alAmbient)'+'\x20*\x20albedo\x20'+'+\x20material'+'_ambient\x20*'+'\x20light_glo'+'balAmbient'+';\x0a#else\x0a\x20\x20'+'\x20\x20ret\x20+=\x20a'+'lbedo\x20*\x20dD'+'iffuseLigh'+'t;\x0a#endif\x0a'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20ret\x20+='+'\x20dSpecular'+'Light;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_REFLE'+'CTIONS\x0a\x20\x20\x20'+'\x20ret\x20+=\x20dR'+'eflection.'+'rgb\x20*\x20dRef'+'lection.a;'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'float\x20shee'+'nScaling\x20='+'\x201.0\x20-\x20max'+'(max(sheen'+'Specularit'+'y.r,\x20sheen'+'Specularit'+'y.g),\x20shee'+'nSpeculari'+'ty.b)\x20*\x200.'+'157;\x0a\x20\x20\x20\x20r'+'et\x20=\x20ret\x20*'+'\x20sheenScal'+'ing\x20+\x20(sSp'+'ecularLigh'+'t\x20+\x20sRefle'+'ction.rgb)'+'\x20*\x20sheenSp'+'ecularity;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20float\x20c'+'learCoatSc'+'aling\x20=\x201.'+'0\x20-\x20ccFres'+'nel\x20*\x20clea'+'rcoatSpecu'+'larity;\x0a\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20clearC'+'oatScaling'+'\x20+\x20(ccSpec'+'ularLight\x20'+'+\x20ccReflec'+'tion)\x20*\x20cl'+'earcoatSpe'+'cularity;\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20return\x20r'+'et;\x0a}\x0a',OC='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blitT'+'exture;\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20texture'+'2D(blitTex'+'ture,\x20uv0)'+';\x0a\x20\x20\x20\x20}\x0a',FC='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'erCube\x20bli'+'tTexture;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20inv'+'ViewProj;\x0a'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20vec4('+'uv0\x20*\x202.0\x20'+'-\x201.0,\x200.5'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20worldPos\x20'+'=\x20invViewP'+'roj\x20*\x20proj'+'Pos;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20te'+'xtureCube('+'blitTextur'+'e,\x20worldPo'+'s.xyz);\x0a\x20\x20'+'\x20\x20}\x0a',NC='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uv0'+'.y\x20=\x201.0\x20-'+'\x20uv0.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20}\x0a',kC='\x0a//\x20light\x20'+'cookie\x20fun'+'ctionality'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0avec4'+'\x20getCookie'+'2D(sampler'+'2D\x20tex,\x20ma'+'t4\x20transfo'+'rm,\x20float\x20'+'intensity)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20projPos\x20'+'=\x20transfor'+'m\x20*\x20vec4(v'+'PositionW,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'y\x20/=\x20projP'+'os.w;\x0a\x20\x20\x20\x20'+'return\x20mix'+'(vec4(1.0)'+',\x20texture2'+'D(tex,\x20pro'+'jPos.xy),\x20'+'intensity)'+';\x0a}\x0a\x0avec4\x20'+'getCookie2'+'DClip(samp'+'ler2D\x20tex,'+'\x20mat4\x20tran'+'sform,\x20flo'+'at\x20intensi'+'ty)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20trans'+'form\x20*\x20vec'+'4(vPositio'+'nW,\x201.0);\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20/=\x20pr'+'ojPos.w;\x0a\x20'+'\x20\x20\x20if\x20(pro'+'jPos.x\x20<\x200'+'.0\x20||\x20proj'+'Pos.x\x20>\x201.'+'0\x20||\x20projP'+'os.y\x20<\x200.0'+'\x20||\x20projPo'+'s.y\x20>\x201.0\x20'+'||\x20projPos'+'.z\x20<\x200.0)\x20'+'return\x20vec'+'4(0.0);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(vec4(1.'+'0),\x20textur'+'e2D(tex,\x20p'+'rojPos.xy)'+',\x20intensit'+'y);\x0a}\x0a\x0avec'+'4\x20getCooki'+'e2DXform(s'+'ampler2D\x20t'+'ex,\x20mat4\x20t'+'ransform,\x20'+'float\x20inte'+'nsity,\x20vec'+'4\x20cookieMa'+'trix,\x20vec2'+'\x20cookieOff'+'set)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20proj'+'Pos\x20=\x20tran'+'sform\x20*\x20ve'+'c4(vPositi'+'onW,\x201.0);'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20/=\x20p'+'rojPos.w;\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20+=\x20co'+'okieOffset'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookie2D'+'ClipXform('+('sampler2D\x20'+'tex,\x20mat4\x20'+'transform,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieM'+'atrix,\x20vec'+'2\x20cookieOf'+'fset)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'jPos\x20=\x20tra'+'nsform\x20*\x20v'+'ec4(vPosit'+'ionW,\x201.0)'+';\x0a\x20\x20\x20\x20proj'+'Pos.xy\x20/=\x20'+'projPos.w;'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20+=\x20c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20if\x20'+'(projPos.x'+'\x20<\x200.0\x20||\x20'+'projPos.x\x20'+'>\x201.0\x20||\x20p'+'rojPos.y\x20<'+'\x200.0\x20||\x20pr'+'ojPos.y\x20>\x20'+'1.0\x20||\x20pro'+'jPos.z\x20<\x200'+'.0)\x20return'+'\x20vec4(0.0)'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookieCu'+'be(sampler'+'Cube\x20tex,\x20'+'mat4\x20trans'+'form,\x20floa'+'t\x20intensit'+'y)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20mix('+'vec4(1.0),'+'\x20textureCu'+'be(tex,\x20dL'+'ightDirNor'+'mW\x20*\x20mat3('+'transform)'+'),\x20intensi'+'ty);\x0a}\x0a'),UC='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20envBoxM'+'in;\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20envBoxMax'+';\x0a#endif\x0a\x0a'+'vec3\x20cubeM'+'apProject('+'vec3\x20nrdir'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_CUB'+'EMAP_PROJE'+'CTION\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20c'+'ubeMapRota'+'te(nrdir);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20LIT_CUBEM'+'AP_PROJECT'+'ION\x20==\x20BOX'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'nrdir\x20=\x20cu'+'beMapRotat'+'e(nrdir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20rbmax\x20'+'=\x20(envBoxM'+'ax\x20-\x20vPosi'+'tionW)\x20/\x20n'+'rdir;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20r'+'bmin\x20=\x20(en'+'vBoxMin\x20-\x20'+'vPositionW'+')\x20/\x20nrdir;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20rbmin'+'max\x20=\x20mix('+'rbmin,\x20rbm'+'ax,\x20vec3(g'+'reaterThan'+'(nrdir,\x20ve'+'c3(0.0))))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20fa\x20='+'\x20min(min(r'+'bminmax.x,'+'\x20rbminmax.'+'y),\x20rbminm'+'ax.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20posonbox\x20'+'=\x20vPositio'+'nW\x20+\x20nrdir'+'\x20*\x20fa;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envBoxPos\x20'+'=\x20(envBoxM'+'in\x20+\x20envBo'+'xMax)\x20*\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20no'+'rmalize(po'+'sonbox\x20-\x20e'+'nvBoxPos);'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',BC='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20mat3\x20cu'+'beMapRotat'+'ionMatrix;'+'\x0a#endif\x0a\x0av'+'ec3\x20cubeMa'+'pRotate(ve'+'c3\x20refDir)'+'\x20{\x0a#ifdef\x20'+'CUBEMAP_RO'+'TATION\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'#else\x0a\x20\x20\x20\x20'+'return\x20ref'+'Dir;\x0a#endi'+'f\x0a}\x0a',zC='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0agl_FragCo'+'lor\x20=\x20vec4'+'(litArgs_a'+'lbedo\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_WORLD'+'_NORMAL_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(litArgs'+'_worldNorm'+'al\x20*\x200.5\x20+'+'\x200.5,\x201.0)'+';\x0a#endif\x0a\x0a'+'#ifdef\x20DEB'+'UG_OPACITY'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(vec3'+'(litArgs_o'+'pacity)\x20,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_SPE'+'CULARITY_P'+'ASS\x0agl_Fra'+'gColor\x20=\x20v'+'ec4(litArg'+'s_specular'+'ity,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_GLOSS_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(vec3(li'+'tArgs_glos'+'s)\x20,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_METALNES'+'S_PASS\x0agl_'+'FragColor\x20'+'=\x20vec4(vec'+'3(litArgs_'+'metalness)'+'\x20,\x201.0);\x0a#'+'endif\x0a\x0a#if'+'def\x20DEBUG_'+'AO_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ve'+'c3(litArgs'+'_ao)\x20,\x201.0'+');\x0a#endif\x0a'+'\x0a#ifdef\x20DE'+'BUG_EMISSI'+'ON_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ga'+'mmaCorrect'+'Output(lit'+'Args_emiss'+'ion),\x201.0)'+';\x0a#endif\x0a',VC='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0ali'+'tArgs_albe'+'do\x20=\x20vec3('+'0.5);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_UV0'+'_PASS\x0a#ifd'+'ef\x20VARYING'+'_VUV0\x0alitA'+'rgs_albedo'+'\x20=\x20vec3(vU'+'v0,\x200);\x0a#e'+'lse\x0alitArg'+'s_albedo\x20='+'\x20vec3(0);\x0a'+'#endif\x0a#en'+'dif\x0a',GC='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0avec3\x20'+'decodeLine'+'ar(vec4\x20ra'+'w)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw.'+'rgb;\x0a}\x0a\x0afl'+'oat\x20decode'+'Gamma(floa'+'t\x20raw)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'pow(raw,\x202'+'.2);\x0a}\x0a\x0ave'+'c3\x20decodeG'+'amma(vec3\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w(raw,\x20vec'+'3(2.2));\x0a}'+'\x0a\x0avec3\x20dec'+'odeGamma(v'+'ec4\x20raw)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(raw.'+'xyz,\x20vec3('+'2.2));\x0a}\x0a\x0a'+'vec3\x20decod'+'eRGBM(vec4'+'\x20raw)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20col'+'or\x20=\x20(8.0\x20'+'*\x20raw.a)\x20*'+'\x20raw.rgb;\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0av'+'ec3\x20decode'+'RGBP(vec4\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20colo'+'r\x20=\x20raw.rg'+'b\x20*\x20(-raw.'+'a\x20*\x207.0\x20+\x20'+'8.0);\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBE'+'(vec4\x20raw)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(raw.a\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec3(0.0'+',\x200.0,\x200.0'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20raw.xyz\x20*'+'\x20pow(2.0,\x20'+'raw.w\x20*\x2025'+'5.0\x20-\x20128.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0avec4\x20pa'+'ssThrough('+'vec4\x20raw)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20raw;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'Z(vec4\x20nma'+'p)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20nmap'+'.xyz\x20*\x202.0'+'\x20-\x201.0;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'(vec4\x20nmap'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20normal;'+'\x0a\x20\x20\x20\x20norma'+'l.xy\x20=\x20nma'+'p.wy\x20*\x202.0'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20normal.z'+'\x20=\x20sqrt(1.'+'0\x20-\x20clamp('+'dot(normal'+'.xy,\x20norma'+'l.xy),\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20return\x20'+'normal;\x0a}\x0a'+'\x0a#endif\x0a',HC='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0avec3\x20'+'detailMode'+'_mul(vec3\x20'+'c1,\x20vec3\x20c'+'2)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20c1\x20*'+'\x20c2;\x0a}\x0a\x0ave'+'c3\x20detailM'+'ode_add(ve'+'c3\x20c1,\x20vec'+'3\x20c2)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'1\x20+\x20c2;\x0a}\x0a'+'\x0a//\x20https:'+'//en.wikip'+'edia.org/w'+'iki/Blend_'+'modes#Scre'+'en\x0avec3\x20de'+'tailMode_s'+'creen(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x201.0'+'\x20-\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2);\x0a}\x0a\x0a/'+'/\x20https://'+'en.wikiped'+'ia.org/wik'+'i/Blend_mo'+'des#Overla'+'y\x0avec3\x20det'+'ailMode_ov'+'erlay(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(1.0\x20-\x202.0'+'\x20*\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2),\x202.0\x20'+'*\x20c1\x20*\x20c2,'+'\x20step(c1,\x20'+'vec3(0.5))'+');\x0a}\x0a\x0avec3'+'\x20detailMod'+'e_min(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20min'+'(c1,\x20c2);\x0a'+'}\x0a\x0avec3\x20de'+'tailMode_m'+'ax(vec3\x20c1'+',\x20vec3\x20c2)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20max(c1'+',\x20c2);\x0a}\x0a\x0a'+'#endif\x0a',WC='\x0auniform\x20v'+'ec3\x20materi'+'al_diffuse'+';\x0a\x0a#ifdef\x20'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'detailMode'+'sPS\x22\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20mate'+'rial_diffu'+'se.rgb;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_DIFFUS'+'E_TEXTURE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20albedoT'+'exture\x20=\x20{'+'STD_DIFFUS'+'E_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_DIF'+'FUSE_TEXTU'+'RE_NAME},\x20'+'{STD_DIFFU'+'SE_TEXTURE'+'_UV},\x20text'+'ureBias)).'+'{STD_DIFFU'+'SE_TEXTURE'+'_CHANNEL};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSEDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'albedoDeta'+'il\x20=\x20{STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_DECODE}('+'texture2DB'+'ias({STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'DETAIL_TEX'+'TURE_UV},\x20'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20*=\x20albe'+'doTexture;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSE_VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dAlbedo\x20*'+'=\x20gammaCor'+'rectInput('+'saturate(v'+'VertexColo'+'r.{STD_DIF'+'FUSE_VERTE'+'X_CHANNEL}'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',$C='\x0auniform\x20v'+'ec3\x20materi'+'al_emissiv'+'e;\x0auniform'+'\x20float\x20mat'+'erial_emis'+'siveIntens'+'ity;\x0a\x0avoid'+'\x20getEmissi'+'on()\x20{\x0a\x20\x20\x20'+'\x20dEmission'+'\x20=\x20materia'+'l_emissive'+'\x20*\x20materia'+'l_emissive'+'Intensity;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_TEXT'+'URE\x0a\x20\x20\x20\x20dE'+'mission\x20*='+'\x20{STD_EMIS'+'SIVE_TEXTU'+'RE_DECODE}'+'(texture2D'+'Bias({STD_'+'EMISSIVE_T'+'EXTURE_NAM'+'E},\x20{STD_E'+'MISSIVE_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'EMISSIVE_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_EMISSI'+'VE_VERTEX\x0a'+'\x20\x20\x20\x20dEmiss'+'ion\x20*=\x20gam'+'maCorrectI'+'nput(satur'+'ate(vVerte'+'xColor.{ST'+'D_EMISSIVE'+'_VERTEX_CH'+'ANNEL}));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a',XC='\x0avec4\x20enco'+'deLinear(v'+'ec3\x20source'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'source,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeGa'+'mma(vec3\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec4(pow(s'+'ource\x20+\x200.'+'0000001,\x20v'+'ec3(1.0\x20/\x20'+'2.2)),\x201.0'+');\x0a}\x0a\x0avec4'+'\x20encodeRGB'+'M(vec3\x20sou'+'rce)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20result;'+'\x0a\x20\x20\x20\x20resul'+'t.rgb\x20=\x20po'+'w(source.r'+'gb,\x20vec3(0'+'.5));\x0a\x20\x20\x20\x20'+'result.rgb'+'\x20*=\x201.0\x20/\x20'+'8.0;\x0a\x0a\x20\x20\x20\x20'+'result.a\x20='+'\x20saturate('+'\x20max(\x20max('+'\x20result.r,'+'\x20result.g\x20'+'),\x20max(\x20re'+'sult.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20)\x20);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20ceil(res'+'ult.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x0a\x20\x20\x20\x20r'+'esult.rgb\x20'+'/=\x20result.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0avec4\x20'+'encodeRGBP'+'(vec3\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'//\x20convert'+'\x20incoming\x20'+'linear\x20to\x20'+'gamma(ish)'+'\x0a\x20\x20\x20\x20vec3\x20'+'gamma\x20=\x20po'+'w(source,\x20'+'vec3(0.5))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'the\x20maximu'+'m\x20componen'+'t\x20clamped\x20'+'to\x201..8\x0a\x20\x20'+'\x20\x20float\x20ma'+'xVal\x20=\x20min'+'(8.0,\x20max('+'1.0,\x20max(g'+'amma.x,\x20ma'+'x(gamma.y,'+'\x20gamma.z))'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20storage\x20'+'factor\x0a\x20\x20\x20'+'\x20float\x20v\x20='+'\x201.0\x20-\x20((m'+'axVal\x20-\x201.'+'0)\x20/\x207.0);'+'\x0a\x0a\x20\x20\x20\x20//\x20r'+'ound\x20the\x20v'+'alue\x20for\x20s'+'torage\x20in\x20'+'8bit\x20chann'+'el\x0a\x20\x20\x20\x20v\x20='+'\x20ceil(v\x20*\x20'+'255.0)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(gamma\x20/'+'\x20(-v\x20*\x207.0'+'\x20+\x208.0),\x20v'+');\x20\x20\x20\x20\x0a}\x0a\x0a'+'vec4\x20encod'+'eRGBE(vec3'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20float'+('\x20maxVal\x20=\x20'+'max(source'+'.x,\x20max(so'+'urce.y,\x20so'+'urce.z));\x0a'+'\x20\x20\x20\x20if\x20(ma'+'xVal\x20<\x201e-'+'32)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec4(0,\x200'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20e\x20=\x20'+'ceil(log2('+'maxVal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec4('+'source\x20/\x20p'+'ow(2.0,\x20e)'+',\x20(e\x20+\x20128'+'.0)\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),qC='\x0a\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20combin'+'eColor(lit'+'Args_albed'+'o,\x20litArgs'+'_sheen_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_sp'+'ecularity)'+';\x0a\x0a\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20+=\x20lit'+'Args_emiss'+'ion;\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20=\x20ad'+'dFog(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20ton'+'eMap(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20gam'+'maCorrectO'+'utput(gl_F'+'ragColor.r'+'gb);\x0a',jC='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20floa'+'t\x20atlasSiz'+'e\x20=\x20512.0;'+'\x0aconst\x20flo'+'at\x20seamSiz'+'e\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0avec2\x20ma'+'pUv(vec2\x20u'+'v,\x20vec4\x20re'+'ct)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(mix(rect'+'.x\x20+\x20seamS'+'ize,\x20rect.'+'x\x20+\x20rect.z'+'\x20-\x20seamSiz'+'e,\x20uv.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mix('+'rect.y\x20+\x20s'+'eamSize,\x20r'+'ect.y\x20+\x20re'+'ct.w\x20-\x20sea'+'mSize,\x20uv.'+'y));\x0a}\x0a\x0a//'+'\x20map\x20a\x20nor'+'malized\x20eq'+'uirect\x20UV\x20'+'and\x20roughn'+'ess\x20level\x20'+'to\x20the\x20cor'+'rect\x20atlas'+'\x20rect.\x0avec'+'2\x20mapRough'+'nessUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'0,\x201.0\x20-\x20t'+',\x20t,\x20t\x20*\x200'+'.5));\x0a}\x0a\x0a/'+'/\x20map\x20shin'+'y\x20level\x20UV'+'\x0avec2\x20mapS'+'hinyUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'1.0\x20-\x20t,\x201'+'.0\x20-\x20t,\x20t,'+'\x20t\x20*\x200.5))'+';\x0a}\x0a\x0a#endi'+'f\x0a',YC='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20float\x20sky'+'boxIntensi'+'ty;\x0a#endif'+'\x0a\x0avec3\x20pro'+'cessEnviro'+'nment(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20skybo'+'xIntensity'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',KC='\x0afloat\x20get'+'FalloffWin'+'dow(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'sqrDist\x20=\x20'+'dot(lightD'+'ir,\x20lightD'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20invRa'+'dius\x20=\x201.0'+'\x20/\x20lightRa'+'dius;\x0a\x20\x20\x20\x20'+'return\x20squ'+'are(satura'+'te(1.0\x20-\x20s'+'quare(sqrD'+'ist\x20*\x20squa'+'re(invRadi'+'us))));\x0a}\x0a'+'\x0afloat\x20get'+'FalloffInv'+'Squared(fl'+'oat\x20lightR'+'adius,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20sqrDis'+'t\x20=\x20dot(li'+'ghtDir,\x20li'+'ghtDir);\x0a\x20'+'\x20\x20\x20float\x20f'+'alloff\x20=\x201'+'.0\x20/\x20(sqrD'+'ist\x20+\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20invRadiu'+'s\x20=\x201.0\x20/\x20'+'lightRadiu'+'s;\x0a\x0a\x20\x20\x20\x20fa'+'lloff\x20*=\x201'+'6.0;\x0a\x20\x20\x20\x20f'+'alloff\x20*=\x20'+'square(sat'+'urate(1.0\x20'+'-\x20square(s'+'qrDist\x20*\x20s'+'quare(invR'+'adius))));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20falloff'+';\x0a}\x0a',ZC='\x0afloat\x20get'+'FalloffLin'+'ear(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20length'+'(lightDir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20max(((l'+'ightRadius'+'\x20-\x20d)\x20/\x20li'+'ghtRadius)'+',\x200.0);\x0a}\x0a',QC='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x0ave'+'c4\x20float2u'+'int(float\x20'+'value)\x20{\x0a\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20fl'+'oatBitsToU'+'int(value)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20vec4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((intBit'+'s\x20>>\x2024u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((intBits'+'\x20>>\x2016u)\x20&'+'\x200xFFu)\x20/\x20'+'255.0,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'((intBits\x20'+'>>\x208u)\x20&\x200'+'xFFu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(i'+'ntBits\x20&\x200'+'xFFu)\x20/\x2025'+'5.0\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0a//\x20dec'+'ode\x20RGBA8\x20'+'value\x20to\x20f'+'loat\x0afloat'+'\x20uint2floa'+'t(vec4\x20val'+'ue)\x20{\x0a\x20\x20\x20\x20'+'uint\x20intBi'+'ts\x20=\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20(uint('+'value.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(value.g\x20*'+'\x20255.0)\x20<<'+'\x2016u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20(uin'+'t(value.b\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uint'+'(value.a\x20*'+'\x20255.0);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20uintBitsT'+'oFloat(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0av'+'ec4\x20float2'+'vec4(float'+'\x20value)\x20{\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(CAPS'+'_TEXTURE_F'+'LOAT_RENDE'+'RABLE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4(val'+'ue,\x201.0,\x201'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20float'+'2uint(valu'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0a#e'+'ndif\x20//\x20FL'+'OAT_AS_UIN'+'T\x0a',JC='\x0a\x0afloat\x20dB'+'lendModeFo'+'gFactor\x20=\x20'+'1.0;\x0a\x0a#if\x20'+'(FOG\x20!=\x20NO'+'NE)\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20fog_color'+';\x0a\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20f'+'og_start;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20fog_end;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20fog_den'+'sity;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afloat'+'\x20getFogFac'+'tor()\x20{\x0a\x0a\x20'+'\x20\x20\x20float\x20d'+'epth\x20=\x20gl_'+'FragCoord.'+'z\x20/\x20gl_Fra'+'gCoord.w;\x0a'+'\x20\x20\x20\x20float\x20'+'fogFactor\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20#if\x20(FOG'+'\x20==\x20LINEAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fogFactor\x20'+'=\x20(fog_end'+'\x20-\x20depth)\x20'+'/\x20(fog_end'+'\x20-\x20fog_sta'+'rt);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fogF'+'actor\x20=\x20ex'+'p(-depth\x20*'+'\x20fog_densi'+'ty);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP2)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fog'+'Factor\x20=\x20e'+'xp(-depth\x20'+'*\x20depth\x20*\x20'+'fog_densit'+'y\x20*\x20fog_de'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(fog'+'Factor,\x200.'+'0,\x201.0);\x0a}'+'\x0a\x0avec3\x20add'+'Fog(vec3\x20c'+'olor)\x20{\x0a\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'fog_color\x20'+'*\x20dBlendMo'+'deFogFacto'+'r,\x20color,\x20'+'getFogFact'+'or());\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'color;\x0a}\x0a',e1='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0ave'+'c3\x20getFres'+'nel(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20c'+'osTheta,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20specu'+'larity\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20vec3'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a\x20\x20\x20\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20fresnel\x20'+'=\x20pow(1.0\x20'+'-\x20saturate'+'(cosTheta)'+',\x205.0);\x0a\x20\x20'+'\x20\x20float\x20gl'+'ossSq\x20=\x20gl'+'oss\x20*\x20glos'+'s;\x0a\x20\x20\x20\x20vec'+'3\x20ret\x20=\x20sp'+'ecularity\x20'+'+\x20(max(vec'+'3(glossSq)'+',\x20specular'+'ity)\x20-\x20spe'+'cularity)\x20'+'*\x20fresnel;'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20return'+'\x20mix(ret,\x20'+'iridescenc'+'eFresnel,\x20'+'iridescenc'+'eIntensity'+');\x0a#else\x0a\x20'+'\x20\x20\x20return\x20'+'ret;\x0a#endi'+'f\x20\x20\x20\x20\x0a}\x0a\x0af'+'loat\x20getFr'+'esnelCC(fl'+'oat\x20cosThe'+'ta)\x20{\x0a\x20\x20\x20\x20'+'float\x20fres'+'nel\x20=\x20pow('+'1.0\x20-\x20satu'+'rate(cosTh'+'eta),\x205.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x200.04\x20+\x20'+'(1.0\x20-\x200.0'+'4)\x20*\x20fresn'+'el;\x0a}\x0a',t1='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x0avaryin'+'g\x20vec2\x20vUv'+'0;\x0a\x0avoid\x20m'+'ain(void)\x0a'+'{\x0a\x20\x20\x20\x20gl_P'+'osition\x20=\x20'+'vec4(verte'+'x_position'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20vUv'+'0\x20=\x20vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x200.5;\x0a}\x0a',s1='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(color)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ga'+'mmaCorrect'+'Input(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGamma(col'+'or);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20gammaCorr'+'ectInput(v'+'ec4\x20color)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4(decodeG'+'amma(color'+'.xyz),\x20col'+'or.w);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20gammaCo'+'rrectOutpu'+'t(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20pow(color'+'\x20+\x200.00000'+'01,\x20vec3(1'+'.0\x20/\x202.2))'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'else\x20//\x20NO'+'NE\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectInp'+'ut(vec3\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20gamma'+'CorrectInp'+'ut(vec4\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectOut'+'put(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20color;\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a',i1='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0auni'+'form\x20float'+'\x20material_'+'gloss;\x0a#en'+'dif\x0a\x0avoid\x20'+'getGlossin'+'ess()\x20{\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_GLO'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20*='+'\x20material_'+'gloss;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_GLOSS_'+'TEXTURE\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20*=\x20tex'+'ture2DBias'+'({STD_GLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_GLOSS_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_G'+'LOSS_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_INVE'+'RT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x201.0\x20-\x20dGl'+'ossiness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20+='+'\x200.0000001'+';\x0a}\x0a',r1='\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tion;\x0a\x0a//\x20'+'project\x20th'+'e\x20model\x20sp'+'ace\x20gaussi'+'an\x20center\x20'+'to\x20view\x20an'+'d\x20clip\x20spa'+'ce\x0abool\x20in'+'itCenter(v'+'ec3\x20modelC'+'enter,\x20out'+'\x20SplatCent'+'er\x20center)'+'\x20{\x0a\x20\x20\x20\x20mat'+'4\x20modelVie'+'w\x20=\x20matrix'+'_view\x20*\x20ma'+'trix_model'+';\x0a\x20\x20\x20\x20vec4'+'\x20centerVie'+'w\x20=\x20modelV'+'iew\x20*\x20vec4'+'(modelCent'+'er,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly\x20out\x20if'+'\x20splat\x20is\x20'+'behind\x20the'+'\x20camera\x0a\x20\x20'+'\x20\x20if\x20(cent'+'erView.z\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20false;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20vec4\x20cent'+'erProj\x20=\x20m'+'atrix_proj'+'ection\x20*\x20c'+'enterView;'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nsure\x20gaus'+'sians\x20are\x20'+'not\x20clippe'+'d\x20by\x20camer'+'a\x20near\x20and'+'\x20far\x0a\x20\x20\x20\x20#'+'if\x20WEBGPU\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ce'+'nterProj.z'+'\x20=\x20clamp(c'+'enterProj.'+'z,\x200,\x20abs('+'centerProj'+'.w));\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20center'+'Proj.z\x20=\x20c'+'lamp(cente'+'rProj.z,\x20-'+'abs(center'+'Proj.w),\x20a'+'bs(centerP'+'roj.w));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20cente'+'r.view\x20=\x20c'+'enterView.'+'xyz\x20/\x20cent'+'erView.w;\x0a'+'\x20\x20\x20\x20center'+'.proj\x20=\x20ce'+'nterProj;\x0a'+'\x20\x20\x20\x20center'+'.projMat00'+'\x20=\x20matrix_'+'projection'+'[0][0];\x0a\x20\x20'+'\x20\x20center.m'+'odelView\x20='+'\x20modelView'+';\x0a\x20\x20\x20\x20retu'+'rn\x20true;\x0a}'+'\x0a',a1='\x0a\x0auniform\x20'+'mediump\x20sa'+'mpler2D\x20sp'+'latColor;\x0a'+'\x0a//\x20返回值:\x200'+'.0\x20~\x201.0\x20之'+'间的透明度因子\x0afl'+'oat\x20comput'+'eAlpha(flo'+'at\x20muT,\x20fl'+'oat\x20uTime,'+'\x20float\x20uFa'+'deSpeed,\x20f'+'loat\x20life)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20age\x20=\x20('+'uTime\x20-\x20mu'+'T)\x20*\x202.0;\x20'+'//\x20存活时长（秒）'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'muT\x20>\x20uTim'+'e)\x20return\x20'+'0.0;\x0a\x0a\x20\x20\x20\x20'+'//\x20---\x20线性衰'+'减：基于\x20life\x20'+'---\x0a\x20\x20\x20\x20fl'+'oat\x20linear'+'Fade\x20=\x201.0'+'\x20-\x20age\x20/\x20l'+'ife;\x0a\x20\x20\x20\x20/'+'/\x20---\x20指数衰减'+'：基于\x20uFadeS'+'peed\x20---\x0a\x20'+'\x20\x20\x20float\x20e'+'xpFade\x20=\x20e'+'xp(-age\x20*\x20'+'uFadeSpeed'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20cl'+'amp(linear'+'Fade,\x200.0,'+'\x201.0);\x20\x0a\x20\x20'+'\x20\x20return\x20c'+'lamp(expFa'+'de,\x200.0,\x201'+'.0);\x0a}\x0a\x0a\x0av'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20uTime,\x20'+'bool\x20plusA'+',\x20int\x20poin'+'tCloudMode'+'Enabled)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'color\x20=\x20te'+'xelFetch(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a\x20\x20\x20\x20'+'#ifdef\x20IS_'+'4D\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20tDat'+'a\x20=\x20texelF'+'etch(trans'+'formLifecy'+'cle,\x20sourc'+'e.uv,\x200).x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20muT'+'\x20=\x20tData.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20saveA'+'\x20=\x20pointCl'+'oudModeEna'+'bled\x20==\x201\x20'+'?\x201.0\x20:\x20co'+'lor.a;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20alpha\x20=\x20s'+'aveA;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(uOp'+'enAnim\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20alp'+'ha\x20=\x20alpha'+'\x20*\x20(muT\x20-\x20'+'uTime\x20+\x200.'+'05);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20age\x20=\x20u'+'Time\x20-\x20muT'+';\x20\x20\x20\x20//\x20当前'+'存在的时间长度\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20uFad'+'eSpeed\x20=\x202'+('.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20life\x20=\x200'+'.1;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20alph'+'a\x20=\x20comput'+'eAlpha(muT'+',\x20uTime,\x20u'+'FadeSpeed,'+'\x20life);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'alpha\x20*=\x20a'+'lpha;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor.a\x20=\x20p'+'lusA\x20?\x20alp'+'ha\x20:\x20saveA'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20ret'+'urn\x20color;'+'\x0a}\x0a\x0a'),n1='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20uint\x20o'+'rder;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20uint\x20i'+'d;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'ivec2\x20uv;\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20vec2'+'\x20cornerUV;'+'\x20\x20\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a};\x0a'+'\x0a//\x20stores'+'\x20the\x20camer'+'a\x20and\x20clip'+'\x20space\x20pos'+'ition\x20of\x20t'+'he\x20gaussia'+'n\x20center\x0as'+'truct\x20Spla'+'tCenter\x20{\x0a'+'\x20\x20\x20\x20vec3\x20v'+'iew;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cen'+'ter\x20in\x20vie'+'w\x20space\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'j;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'mat4\x20model'+'View;\x20\x20\x20\x20\x20'+'//\x20model-v'+'iew\x20matrix'+'\x0a\x20\x20\x20\x20float'+'\x20projMat00'+';\x20\x20\x20\x20//\x20el'+'ement\x20[0]['+'0]\x20of\x20the\x20'+'projection'+'\x20matrix\x0a};'+'\x0a\x0a//\x20store'+'s\x20the\x20offs'+'et\x20from\x20ce'+'nter\x20for\x20t'+'he\x20current'+'\x20gaussian\x0a'+'struct\x20Spl'+'atCorner\x20{'+'\x0a\x20\x20\x20\x20vec2\x20'+'offset;\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'rner\x20offse'+'t\x20from\x20cen'+'ter\x20in\x20cli'+'p\x20space\x0a\x20\x20'+'\x20\x20vec2\x20uv;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20aaF'+'actor;\x20//\x20'+'for\x20scenes'+'\x20generated'+'\x20with\x20anti'+'aliasing\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20vec2\x20'+'v;\x0a\x20\x20\x20\x20flo'+'at\x20dlen;\x0a\x20'+'\x20\x20\x20vec2\x20cS'+'ize;\x0a\x20\x20\x20\x20v'+'ec2\x20cUV;\x0a}'+';\x0a\x0a#includ'+'e\x20\x22gsplatE'+'valSHVS\x22\x0a#'+'include\x20\x22g'+'splatQuatT'+'oMat3VS\x22\x0a\x0a'+'#if\x20GSPLAT'+'_COMPRESSE'+('D_DATA\x20==\x20'+'true\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatCompr'+'essedDataV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_COEFFS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x20='+'=\x20true\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22gsplatSog'+'sDataVS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSo'+'gsSHVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'else\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatDataV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22gsp'+'latColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0avoi'+'d\x20clipCorn'+'er(inout\x20S'+'platCorner'+'\x20corner,\x20f'+'loat\x20alpha'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20clip\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20255.'+'0\x20/\x20alpha)'+')\x20/\x202.0);\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20*='+'\x20clip;\x0a\x20\x20\x20'+'\x20corner.uv'+'\x20*=\x20clip;\x0a'+'}\x0a'),o1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTimeText'+'ure;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20c'+'hunkTextur'+'e;\x0a\x0a//\x20wor'+'k\x20values\x0av'+'ec4\x20chunkD'+'ataA;\x20\x20\x20\x20/'+'/\x20x:\x20min_x'+',\x20y:\x20min_y'+',\x20z:\x20min_z'+',\x20w:\x20max_x'+'\x0avec4\x20chun'+'kDataB;\x20\x20\x20'+'\x20//\x20x:\x20max'+'_y,\x20y:\x20max'+'_z,\x20z:\x20sca'+'le_min_x,\x20'+'w:\x20scale_m'+'in_y\x0avec4\x20'+'chunkDataC'+';\x20\x20\x20\x20//\x20x:'+'\x20scale_min'+'_z,\x20y:\x20sca'+'le_max_x,\x20'+'z:\x20scale_m'+'ax_y,\x20w:\x20s'+'cale_max_z'+'\x0avec4\x20chun'+'kDataD;\x20\x20\x20'+'\x20//\x20x:\x20min'+'_r,\x20y:\x20min'+'_g,\x20z:\x20min'+'_b,\x20w:\x20max'+'_r\x0avec4\x20ch'+'unkDataE;\x20'+'\x20\x20\x20//\x20x:\x20m'+'ax_g,\x20y:\x20m'+'ax_b,\x20z:\x20m'+'in_motion_'+'x,\x20w:\x20min_'+'motion_y\x0av'+'ec4\x20chunkD'+'ataF;\x20\x20\x20\x20/'+'/\x20x:\x20min_m'+'otion_z,\x20y'+':\x20max_moti'+'on_x,\x20z:\x20m'+'ax_motion_'+'y,\x20w:\x20max_'+'motion_z\x0av'+'ec4\x20chunkD'+'ataT;\x20\x20\x20\x20/'+'/\x20x:\x20min_t'+'ime,\x20y:\x20ma'+'x_time,\x20z:'+'\x20min_time_'+'scale,\x20w:\x20'+'max_time_s'+'cale\x0auvec4'+'\x20packedDat'+'a;\x20\x20\x20//\x20x:'+'\x20position\x20'+'bits,\x20y:\x20r'+'otation\x20bi'+'ts,\x20z:\x20sca'+'le\x20bits,\x20w'+':\x20color\x20bi'+'ts\x0auvec2\x20p'+'ackedT;\x20\x20\x20'+'//\x20x:\x20moti'+'on\x20bits(x,'+'\x20y,\x20z),\x20y:'+'\x20time\x20bits'+'(t_scale,\x20'+'t,\x20unused)'+'\x0a\x0a//\x20tool\x20'+'for\x20comput'+'e\x20Marginal'+'\x20time\x0afloa'+'t\x20computeM'+'arginalT(f'+'loat\x20time,'+'\x20float\x20muT'+',\x20float\x20si'+'gmaT)\x20{\x0a\x20\x20'+'\x20\x20if\x20(muT\x20'+'<=\x20-10.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20float\x20re'+('sult\x20=\x20exp'+'(-0.5\x20*\x20(p'+'ow((time\x20-'+'\x20muT),\x202.0'+')\x20/\x20pow(si'+'gmaT,\x202.0)'+'));\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0avec3'+'\x20unpack111'+'011(uint\x20b'+'its)\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'c3(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float(bi'+'ts\x20>>\x2021u)'+'\x20/\x202047.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((bits'+'\x20>>\x2011u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at(bits\x20&\x20'+'0x7ffu)\x20/\x20'+'2047.0\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0avec'+'4\x20unpack88'+'88(uint\x20bi'+'ts)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float(bit'+'s\x20>>\x2024u)\x20'+'/\x20255.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((bits\x20>'+'>\x2016u)\x20&\x200'+'xffu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(('+'bits\x20>>\x208u'+')\x20&\x200xffu)'+'\x20/\x20255.0,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat(bits\x20&'+'\x200xffu)\x20/\x20'+'255.0\x0a\x20\x20\x20\x20'+');\x0a}\x0a\x0acons'+'t\x20float\x20no'+'rm\x20=\x201.0\x20/'+'\x20(sqrt(2.0'+')\x20*\x200.5);\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20a\x20=\x20(f'+'loat((bits'+'\x20>>\x2020u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0\x20-\x20'+'0.5)\x20*\x20nor'+'m;\x0a\x20\x20\x20\x20flo'+'at\x20b\x20=\x20(fl'+'oat((bits\x20'+'>>\x2010u)\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20(flo'+'at(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20m\x20=\x20sqrt'+'(1.0\x20-\x20(a\x20'+'*\x20a\x20+\x20b\x20*\x20'+'b\x20+\x20c\x20*\x20c)'+');\x0a\x0a\x20\x20\x20\x20ui'+'nt\x20mode\x20=\x20'+'bits\x20>>\x2030'+'u;\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x200'+'u)\x20return\x20'+'vec4(m,\x20a,'+'\x20b,\x20c);\x0a\x20\x20'+'\x20\x20if\x20(mode'+'\x20==\x201u)\x20re'+'turn\x20vec4('+'a,\x20m,\x20b,\x20c'+');\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x202'+'u)\x20return\x20'+'vec4(a,\x20b,'+'\x20m,\x20c);\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4(a,\x20b,\x20')+('c,\x20m);\x0a}\x0a\x0a'+'\x0a//\x20read\x20c'+'enter\x0avec3'+'\x20readCente'+'r(SplatSou'+'rce\x20source'+')\x20{\x0a\x20\x20\x20\x20ui'+'nt\x20w\x20=\x20uin'+'t(textureS'+'ize(chunkT'+'exture,\x200)'+'.x)\x20/\x205u;\x0a'+'\x20\x20\x20\x20uint\x20c'+'hunkId\x20=\x20s'+'ource.id\x20/'+'\x20256u;\x0a\x20\x20\x20'+'\x20ivec2\x20chu'+'nkUV\x20=\x20ive'+'c2((chunkI'+'d\x20%\x20w)\x20*\x205'+'u,\x20chunkId'+'\x20/\x20w);\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'chunk\x20and\x20'+'packed\x20com'+'pressed\x20da'+'ta\x0a\x20\x20\x20\x20chu'+'nkDataA\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV,\x200);\x0a\x20\x20'+'\x20\x20chunkDat'+'aB\x20=\x20texel'+'Fetch(chun'+'kTexture,\x20'+'chunkUV\x20+\x20'+'ivec2(1,\x200'+'),\x200);\x0a\x20\x20\x20'+'\x20chunkData'+'C\x20=\x20texelF'+'etch(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20i'+'vec2(2,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataD'+'\x20=\x20texelFe'+'tch(chunkT'+'exture,\x20ch'+'unkUV\x20+\x20iv'+'ec2(3,\x200),'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataE\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(4,\x200),\x20'+'0);\x0a\x20\x20\x20\x20pa'+'ckedData\x20='+'\x20texelFetc'+'h(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ch'+'unkDataA.x'+'yz,\x20vec3(c'+'hunkDataA.'+'w,\x20chunkDa'+'taB.xy),\x20u'+'npack11101'+'1(packedDa'+'ta.x));\x0a}\x0a'+'\x0avec4\x20read'+'Color(in\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'r\x20=\x20unpack'+'8888(packe'+'dData.w);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4(mix('+'chunkDataD'+'.xyz,\x20vec3'+'(chunkData'+'D.w,\x20chunk'+'DataE.xy),'+'\x20r.rgb),\x20r'+'.w);\x0a}\x0a\x0ave'+'c4\x20getRota'+'tion()\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'unpackRota'+'tion(packe'+'dData.y);\x0a'+'}\x0a\x0avec3\x20ge'+'tScale()\x20{')+('\x0a\x20\x20\x20\x20retur'+'n\x20exp(mix('+'vec3(chunk'+'DataB.zw,\x20'+'chunkDataC'+'.x),\x20chunk'+'DataC.yzw,'+'\x20unpack111'+'011(packed'+'Data.z)));'+'\x0a}\x0a\x0a//\x20giv'+'en\x20a\x20rotat'+'ion\x20matrix'+'\x20and\x20scale'+'\x20vector,\x20c'+'ompute\x203d\x20'+'covariance'+'\x20A\x20and\x20B\x0av'+'oid\x20readCo'+'variance(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20covA,\x20out'+'\x20vec3\x20covB'+')\x20{\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3('+'getRotatio'+'n());\x0a\x20\x20\x20\x20'+'vec3\x20scale'+'\x20=\x20getScal'+'e();\x0a\x0a\x20\x20\x20\x20'+'//\x20M\x20=\x20S\x20*'+'\x20R\x0a\x20\x20\x20\x20mat'+'3\x20M\x20=\x20tran'+'spose(mat3'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'scale.x\x20*\x20'+'rot[0],\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20scal'+'e.y\x20*\x20rot['+'1],\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale.z\x20'+'*\x20rot[2]\x0a\x20'+'\x20\x20\x20));\x0a\x0a\x20\x20'+'\x20\x20covA\x20=\x20v'+'ec3(dot(M['+'0],\x20M[0]),'+'\x20dot(M[0],'+'\x20M[1]),\x20do'+'t(M[0],\x20M['+'2]));\x0a\x20\x20\x20\x20'+'covB\x20=\x20vec'+'3(dot(M[1]'+',\x20M[1]),\x20d'+'ot(M[1],\x20M'+'[2]),\x20dot('+'M[2],\x20M[2]'+'));\x0a}\x0a\x0aflo'+'at\x20getMarg'+'inalT(in\x20S'+'platSource'+'\x20source,\x20i'+'n\x20float\x20ti'+'me)\x20{\x0a\x20\x20\x20\x20'+'float\x20marg'+'inal\x20=\x201.0'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20IS_4D\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20chu'+'nkDataT\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(6,\x200),\x200)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'packedT\x20=\x20'+'texelFetch'+'(packedTim'+'eTexture,\x20'+'source.uv,'+'\x200).xy;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20timeData\x20'+'=\x20mix(vec3'+'(chunkData'+'T.z,\x20chunk'+'DataT.x,\x200'+'),\x20vec3(ch'+'unkDataT.w'+',\x20chunkDat'+'aT.y,\x201),\x20'+'unpack1110'+'11(packedT'+'.y));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'tScale\x20=\x20e'+'xp(timeDat')+('a.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'muT\x20=\x20time'+'Data.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20marg'+'inal\x20=\x20com'+'puteMargin'+'alT(time,\x20'+'muT,\x20tScal'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20r'+'eturn\x20marg'+'inal;\x0a}\x0a\x0av'+'ec3\x20readCe'+'nter4D(Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20time)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(chunkText'+'ure,\x200).x)'+'\x20/\x207u;\x0a\x20\x20\x20'+'\x20uint\x20chun'+'kId\x20=\x20sour'+'ce.id\x20/\x2025'+'6u;\x0a\x20\x20\x20\x20iv'+'ec2\x20chunkU'+'V\x20=\x20ivec2('+'(chunkId\x20%'+'\x20w)\x20*\x207u,\x20'+'chunkId\x20/\x20'+'w);\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20chu'+'nk\x20and\x20pac'+'ked\x20compre'+'ssed\x20data\x0a'+'\x20\x20\x20\x20chunkD'+'ataA\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV,'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataB\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(1,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataC\x20='+'\x20texelFetc'+'h(chunkTex'+'ture,\x20chun'+'kUV\x20+\x20ivec'+'2(2,\x200),\x200'+');\x0a\x20\x20\x20\x20chu'+'nkDataD\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(3,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataE\x20=\x20t'+'exelFetch('+'chunkTextu'+'re,\x20chunkU'+'V\x20+\x20ivec2('+'4,\x200),\x200);'+'\x0a\x20\x20\x20\x20chunk'+'DataF\x20=\x20te'+'xelFetch(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20ivec2(5'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataT\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV\x20'+'+\x20ivec2(6,'+'\x200),\x200);\x0a\x20'+'\x20\x20\x20packedD'+'ata\x20=\x20texe'+'lFetch(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20packedT\x20='+'\x20texelFetc'+'h(packedTi'+'meTexture,'+'\x20source.uv'+',\x200).xy;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20mix(chu')+('nkDataA.xy'+'z,\x20vec3(ch'+'unkDataA.w'+',\x20chunkDat'+'aB.xy),\x20un'+'pack111011'+'(packedDat'+'a.x));\x0a\x20\x20\x20'+'\x20#ifdef\x20IS'+'_4D\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20tim'+'e\x20=\x20mix(ve'+'c3(chunkDa'+'taT.z,\x20chu'+'nkDataT.x,'+'\x200),\x20vec3('+'chunkDataT'+'.w,\x20chunkD'+'ataT.y,\x201)'+',\x20unpack11'+'1011(packe'+'dT.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20muT\x20=\x20ti'+'me.y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'ovingSpeed'+'\x20=\x20mix(vec'+'3(chunkDat'+'aE.zw,\x20chu'+'nkDataF.x)'+',\x20chunkDat'+'aF.yzw,\x20un'+'pack111011'+'(packedT.x'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20spl'+'atOffset\x20='+'\x20movingSpe'+'ed\x20*\x20(time'+'\x20-\x20muT);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20spl'+'atCenter\x20+'+'=\x20splatOff'+'set;\x0a\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'return\x20spl'+'atCenter;\x0a'+'}\x0a'),l1='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20shText'+'ure0;\x0aunif'+'orm\x20highp\x20'+'usampler2D'+'\x20shTexture'+'1;\x0auniform'+'\x20highp\x20usa'+'mpler2D\x20sh'+'Texture2;\x0a'+'\x0avec4\x20unpa'+'ck8888s(in'+'\x20uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'(uvec4(bit'+'s)\x20>>\x20uvec'+'4(0u,\x208u,\x20'+'16u,\x2024u))'+'\x20&\x200xffu)\x20'+'*\x20(8.0\x20/\x202'+'55.0)\x20-\x204.'+'0;\x0a}\x0a\x0avoid'+'\x20readSHDat'+'a(in\x20Splat'+'Source\x20sou'+'rce,\x20out\x20v'+'ec3\x20sh[15]'+',\x20out\x20floa'+'t\x20scale)\x20{'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20the\x20sh\x20'+'coefficien'+'ts\x0a\x20\x20\x20\x20uve'+'c4\x20shData0'+'\x20=\x20texelFe'+'tch(shText'+'ure0,\x20sour'+'ce.uv,\x200);'+'\x0a\x20\x20\x20\x20uvec4'+'\x20shData1\x20='+'\x20texelFetc'+'h(shTextur'+'e1,\x20source'+'.uv,\x200);\x0a\x20'+'\x20\x20\x20uvec4\x20s'+'hData2\x20=\x20t'+'exelFetch('+'shTexture2'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec4\x20r0\x20'+'=\x20unpack88'+'88s(shData'+'0.x);\x0a\x20\x20\x20\x20'+'vec4\x20r1\x20=\x20'+'unpack8888'+'s(shData0.'+'y);\x0a\x20\x20\x20\x20ve'+'c4\x20r2\x20=\x20un'+'pack8888s('+'shData0.z)'+';\x0a\x20\x20\x20\x20vec4'+'\x20r3\x20=\x20unpa'+'ck8888s(sh'+'Data0.w);\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'g0\x20=\x20unpac'+'k8888s(shD'+'ata1.x);\x0a\x20'+'\x20\x20\x20vec4\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20vec4\x20g2\x20='+'\x20unpack888'+'8s(shData1'+'.z);\x0a\x20\x20\x20\x20v'+'ec4\x20g3\x20=\x20u'+'npack8888s'+'(shData1.w'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20b0\x20=\x20un'+'pack8888s('+'shData2.x)'+';\x0a\x20\x20\x20\x20vec4'+'\x20b1\x20=\x20unpa'+'ck8888s(sh'+'Data2.y);\x0a'+'\x20\x20\x20\x20vec4\x20b'+'2\x20=\x20unpack'+'8888s(shDa'+'ta2.z);\x0a\x20\x20'+'\x20\x20vec4\x20b3\x20'+'=\x20unpack88'+'88s(shData'+'2.w);\x0a\x0a\x20\x20\x20'+('\x20sh[0]\x20=\x20\x20'+'vec3(r0.x,'+'\x20g0.x,\x20b0.'+'x);\x0a\x20\x20\x20\x20sh'+'[1]\x20=\x20\x20vec'+'3(r0.y,\x20g0'+'.y,\x20b0.y);'+'\x0a\x20\x20\x20\x20sh[2]'+'\x20=\x20\x20vec3(r'+'0.z,\x20g0.z,'+'\x20b0.z);\x0a\x20\x20'+'\x20\x20sh[3]\x20=\x20'+'\x20vec3(r0.w'+',\x20g0.w,\x20b0'+'.w);\x0a\x20\x20\x20\x20s'+'h[4]\x20=\x20\x20ve'+'c3(r1.x,\x20g'+'1.x,\x20b1.x)'+';\x0a\x20\x20\x20\x20sh[5'+']\x20=\x20\x20vec3('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3(r1.'+'z,\x20g1.z,\x20b'+'1.z);\x0a\x20\x20\x20\x20'+'sh[7]\x20=\x20\x20v'+'ec3(r1.w,\x20'+'g1.w,\x20b1.w'+');\x0a\x20\x20\x20\x20sh['+'8]\x20=\x20\x20vec3'+'(r2.x,\x20g2.'+'x,\x20b2.x);\x0a'+'\x20\x20\x20\x20sh[9]\x20'+'=\x20\x20vec3(r2'+'.y,\x20g2.y,\x20'+'b2.y);\x0a\x20\x20\x20'+'\x20sh[10]\x20=\x20'+'vec3(r2.z,'+'\x20g2.z,\x20b2.'+'z);\x0a\x20\x20\x20\x20sh'+'[11]\x20=\x20vec'+'3(r2.w,\x20g2'+'.w,\x20b2.w);'+'\x0a\x20\x20\x20\x20sh[12'+']\x20=\x20vec3(r'+'3.x,\x20g3.x,'+'\x20b3.x);\x0a\x20\x20'+'\x20\x20sh[13]\x20='+'\x20vec3(r3.y'+',\x20g3.y,\x20b3'+'.y);\x0a\x20\x20\x20\x20s'+'h[14]\x20=\x20ve'+'c3(r3.z,\x20g'+'3.z,\x20b3.z)'+';\x0a\x0a\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),c1='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20S'+'H_COEFFS\x203'+'\x0a\x20\x20\x20\x20#elif'+'\x20SH_BANDS\x20'+'==\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20SH_COEFFS'+'\x208\x0a\x20\x20\x20\x20#el'+'if\x20SH_BAND'+'S\x20==\x203\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20SH_COEF'+'FS\x2015\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20SH_COEFF'+'S\x200\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x200\x0a\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20SH_C1\x20'+'=\x200.488602'+'5119029199'+'f;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x201\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20f'+'loat\x20SH_C2'+'_0\x20=\x201.092'+'5484305920'+'792f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'2_1\x20=\x20-1.0'+'9254843059'+'20792f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C2_2\x20=\x200.'+'3153915652'+'5252005f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C2_3\x20=\x20'+'-1.0925484'+'305920792f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'const\x20floa'+'t\x20SH_C2_4\x20'+'=\x200.546274'+'2152960396'+'f;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x202\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'3_0\x20=\x20-0.5'+'9004358992'+'66435f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_1\x20=\x202.'+'8906114426'+'40554f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_2\x20=\x20-0'+'.457045799'+'4644658f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C3_3\x20=\x20'+'0.37317633'+'25901154f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20float'+'\x20SH_C3_4\x20='+'\x20-0.457045'+'7994644658'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_5'+'\x20=\x201.44530'+'5721320277'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_6'+'\x20=\x20-0.5900'+'4358992664'+'35f;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20see\x20ht'+'tps://gith'+'ub.com/gra'+'phdeco-inr'+('ia/gaussia'+'n-splattin'+'g/blob/mai'+'n/utils/sh'+'_utils.py\x0a'+'\x20\x20\x20\x20vec3\x20e'+'valSH(in\x20v'+'ec3\x20sh[SH_'+'COEFFS],\x20i'+'n\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20x\x20'+'=\x20dir.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20y\x20=\x20dir'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20z\x20'+'=\x20dir.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201st\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20resul'+'t\x20=\x20SH_C1\x20'+'*\x20(-sh[0]\x20'+'*\x20y\x20+\x20sh[1'+']\x20*\x20z\x20-\x20sh'+'[2]\x20*\x20x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x201\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x202nd\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xx\x20=\x20x\x20*\x20x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yy\x20=\x20y\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'zz\x20=\x20z\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yz\x20=\x20y\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xz\x20=\x20x\x20*\x20z'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[3]\x20*\x20('+'SH_C2_0\x20*\x20'+'xy)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[4]\x20*\x20'+'(SH_C2_1\x20*'+'\x20yz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[5]\x20*'+'\x20(SH_C2_2\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x20xx\x20-\x20y'+'y))\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[6]\x20*\x20'+'(SH_C2_3\x20*'+'\x20xz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20*'+'\x20(SH_C2_4\x20'+'*\x20(xx\x20-\x20yy'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'+=\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20')+('xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20#endif\x0a'),h1='\x0amat3\x20quat'+'ToMat3(vec'+'4\x20R)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20R2\x20='+'\x20R\x20+\x20R;\x0a\x20\x20'+'\x20\x20float\x20X\x20'+'=\x20R2.x\x20*\x20R'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20Y\x20\x20=\x20R2'+'.y\x20*\x20R;\x0a\x20\x20'+'\x20\x20vec4\x20Z\x20\x20'+'=\x20R2.z\x20*\x20R'+';\x0a\x20\x20\x20\x20floa'+'t\x20W\x20=\x20R2.w'+'\x20*\x20R.w;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x201.0\x20-\x20'+'Z.z\x20-\x20W,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20Y.z\x20+\x20X'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20Y.z\x20-\x20X,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x201.'+'0\x20-\x20Y.y\x20-\x20'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20+\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20Y.w\x20+\x20Z.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20-\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',d1='\x0auniform\x20m'+'ediump\x20sam'+'pler2D\x20sh0'+';\x0a\x0auniform'+'\x20vec4\x20sh0_'+'mins;\x0aunif'+'orm\x20vec4\x20s'+'h0_maxs;\x0a\x0a'+'float\x20SH_C'+'0\x20=\x200.2820'+'9479177387'+'814;\x0a\x0avec4'+'\x20readColor'+'(in\x20SplatS'+'ource\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20clr\x20='+'\x20mix(sh0_m'+'ins,\x20sh0_m'+'axs,\x20texel'+'Fetch(sh0,'+'\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(vec3(0.'+'5)\x20+\x20clr.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'clr.w)));\x0a'+'}\x0a',f1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0a\x0auniform\x20'+'vec3\x20means'+'_mins;\x0auni'+'form\x20vec3\x20'+'means_maxs'+';\x0a\x0auniform'+'\x20vec3\x20scal'+'es_mins;\x0au'+'niform\x20vec'+'3\x20scales_m'+'axs;\x0a\x0avec4'+'\x20unpackU32'+'(uint\x20v)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((v\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((v\x20>>'+'\x2016u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float((v'+'\x20>>\x208u)\x20&\x20'+'0xFFu)\x20/\x202'+'55.0,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float('+'v\x20&\x200xFFu)'+'\x20/\x20255.0\x0a\x20'+'\x20\x20\x20);\x0a}\x0a\x0au'+'vec4\x20packe'+'dSample;\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20th'+'e\x20packed\x20t'+'exture\x20sam'+'ple\x0a\x20\x20\x20\x20pa'+'ckedSample'+'\x20=\x20texelFe'+'tch(packed'+'Texture,\x20s'+'ource.uv,\x20'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20l\x20=\x20un'+'packU32(pa'+'ckedSample'+'.x).xyz;\x0a\x20'+'\x20\x20\x20vec3\x20u\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20vec'+'3\x20n\x20=\x20(l\x20*'+'\x20255.0\x20+\x20u'+'\x20*\x20255.0\x20*'+'\x20256.0)\x20/\x20'+'65535.0;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20mix(mean'+'s_mins,\x20me'+'ans_maxs,\x20'+'n);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20sign'+'(v)\x20*\x20(exp'+'(abs(v))\x20-'+'\x201.0);\x0a}\x0a\x0a'+'const\x20floa'+'t\x20norm\x20=\x202'+'.0\x20/\x20sqrt('+'2.0);\x0a\x0a//\x20'+'sample\x20cov'+'ariance\x20ve'+'ctors\x0avoid'+'\x20readCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'qdata\x20=\x20un'+'packU32(pa'+'ckedSample'+'.z);\x0a\x20\x20\x20\x20v'+'ec3\x20sdata\x20'+('=\x20unpackU3'+'2(packedSa'+'mple.w).xy'+'z;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20abc\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20f'+'loat\x20d\x20=\x20s'+'qrt(max(0.'+'0,\x201.0\x20-\x20d'+'ot(abc,\x20ab'+'c)));\x0a\x0a\x20\x20\x20'+'\x20uint\x20mode'+'\x20=\x20uint(qd'+'ata.w\x20*\x2025'+'5.0\x20+\x200.5)'+'\x20-\x20252u;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20q'+'uat\x20=\x20(mod'+'e\x20==\x200u)\x20?'+'\x20vec4(d,\x20a'+'bc)\x20:\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20((mode\x20='+'=\x201u)\x20?\x20ve'+'c4(abc.x,\x20'+'d,\x20abc.yz)'+'\x20:\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20('+'(mode\x20==\x202'+'u)\x20?\x20vec4('+'abc.xy,\x20d,'+'\x20abc.z)\x20:\x20'+'vec4(abc,\x20'+'d)));\x0a\x0a\x20\x20\x20'+'\x20mat3\x20rot\x20'+'=\x20quatToMa'+'t3(quat);\x0a'+'\x20\x20\x20\x20vec3\x20s'+'cale\x20=\x20exp'+'(mix(scale'+'s_mins,\x20sc'+'ales_maxs,'+'\x20sdata));\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20mat3\x20M\x20='+'\x20transpose'+'(mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20cov'+'A\x20=\x20vec3(d'+'ot(M[0],\x20M'+'[0]),\x20dot('+'M[0],\x20M[1]'+'),\x20dot(M[0'+'],\x20M[2]));'+'\x0a\x20\x20\x20\x20covB\x20'+'=\x20vec3(dot'+'(M[1],\x20M[1'+']),\x20dot(M['+'1],\x20M[2]),'+'\x20dot(M[2],'+'\x20M[2]));\x0a}'+'\x0a'),u1='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20sh_ce'+'ntroids;\x0a\x0a'+'uniform\x20fl'+'oat\x20shN_mi'+'ns;\x0aunifor'+'m\x20float\x20sh'+'N_maxs;\x0a\x0a/'+'/\x20To\x20suppo'+'rt\x20each\x20SH'+'\x20degree,\x20r'+'eadSHData\x20'+'is\x20overloa'+'ded\x20based\x20'+'on\x20the\x20SH\x20'+'vector\x20dep'+'th\x20\x0a\x0avoid\x20'+'readSHData'+'(in\x20SplatS'+'ource\x20sour'+'ce,\x20out\x20ve'+'c3\x20sh[SH_C'+'OEFFS],\x20ou'+'t\x20float\x20sc'+'ale)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'ivec2\x20t\x20=\x20'+'ivec2(pack'+'edSample.x'+'\x20&\x20255u,\x20p'+'ackedSampl'+'e.y\x20&\x20255u'+');\x0a\x20\x20\x20\x20int'+'\x20n\x20=\x20t.x\x20+'+'\x20t.y\x20*\x20256'+';\x0a\x20\x20\x20\x20int\x20'+'u\x20=\x20(n\x20%\x206'+'4)\x20*\x20SH_CO'+'EFFS;\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20n\x20'+'/\x2064;\x0a\x0a\x20\x20\x20'+'\x20//\x20calcul'+'ate\x20offset'+'\x20into\x20the\x20'+'centroids\x20'+'texture\x20an'+'d\x20read\x20con'+'secutive\x20t'+'exels\x0a\x20\x20\x20\x20'+'for\x20(int\x20i'+'\x20=\x200;\x20i\x20<\x20'+'SH_COEFFS;'+'\x20i++)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[i'+']\x20=\x20mix(ve'+'c3(shN_min'+'s),\x20vec3(s'+'hN_maxs),\x20'+'texelFetch'+'(sh_centro'+'ids,\x20ivec2'+'(u\x20+\x20i,\x20v)'+',\x200).xyz);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20scale\x20=\x20'+'1.0;\x0a}\x0a',p1='\x0auniform\x20v'+'ec2\x20viewpo'+'rt;\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20viewpo'+'rt\x20dimensi'+'ons\x0aunifor'+'m\x20vec4\x20cam'+'era_params'+';\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x201\x20/'+'\x20far,\x20far,'+'\x20near,\x20isO'+'rtho\x0aunifo'+'rm\x20float\x20u'+'SplatScale'+';\x0auniform\x20'+'float\x20rend'+'erSpace;\x0au'+'niform\x20flo'+'at\x20endSpac'+'e;\x0auniform'+'\x20int\x20uShap'+'eN;\x0a\x0a//\x20ca'+'lculate\x20th'+'e\x20clip-spa'+'ce\x20offset\x20'+'from\x20the\x20c'+'enter\x20for\x20'+'this\x20gauss'+'ian\x0abool\x20i'+'nitCorner('+'SplatSourc'+'e\x20source,\x20'+'SplatCente'+'r\x20center,\x20'+'out\x20SplatC'+'orner\x20corn'+'er,\x20int\x20po'+'intCloudMo'+'deEnabled)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'get\x20covari'+'ance\x0a\x20\x20\x20\x20v'+'ec3\x20covA,\x20'+'covB;\x0a\x20\x20\x20\x20'+'readCovari'+'ance(sourc'+'e,\x20covA,\x20c'+'ovB);\x0a\x0a\x20\x20\x20'+'\x20mat3\x20Vrk\x20'+'=\x20mat3(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20covA'+'.x,\x20covA.y'+',\x20covA.z,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'vA.y,\x20covB'+'.x,\x20covB.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'covA.z,\x20co'+'vB.y,\x20covB'+'.z\x0a\x20\x20\x20\x20);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20focal\x20=\x20v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'v\x20=\x20camera'+'_params.w\x20'+'==\x201.0\x20?\x20v'+'ec3(0.0,\x200'+'.0,\x201.0)\x20:'+'\x20center.vi'+'ew.xyz;\x0a\x20\x20'+'\x20\x20float\x20J1'+'\x20=\x20focal\x20/'+'\x20v.z;\x0a\x20\x20\x20\x20'+'vec2\x20J2\x20=\x20'+'-J1\x20/\x20v.z\x20'+'*\x20v.xy;\x0a\x20\x20'+'\x20\x20mat3\x20J\x20='+'\x20mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20J1,\x200'+'.0,\x20J2.x,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x200.'+'0,\x20J1,\x20J2.'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.0,\x200.0,'+'\x200.0\x0a\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20mat'+'3\x20W\x20=\x20tran'+'spose(mat3'+'(center.mo'+'delView));'+'\x0a\x20\x20\x20\x20mat3\x20'+'T\x20=\x20W\x20*\x20J;'+'\x0a\x20\x20\x20\x20mat3\x20'+'cov\x20=\x20tran'+'spose(T)\x20*'+('\x20Vrk\x20*\x20T;\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'calculate\x20'+'AA\x20factor\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20detOri'+'g\x20=\x20cov[0]'+'[0]\x20*\x20cov['+'1][1]\x20-\x20co'+'v[0][1]\x20*\x20'+'cov[0][1];'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20detBl'+'ur\x20=\x20(cov['+'0][0]\x20+\x200.'+'3)\x20*\x20(cov['+'1][1]\x20+\x200.'+'3)\x20-\x20cov[0'+'][1]\x20*\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20corn'+'er.aaFacto'+'r\x20=\x20sqrt(m'+'ax(detOrig'+'\x20/\x20detBlur'+',\x200.0));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20diagonal1'+'\x20=\x20cov[0]['+'0]\x20+\x200.3;\x0a'+'\x20\x20\x20\x20float\x20'+'offDiagona'+'l\x20=\x20cov[0]'+'[1];\x0a\x20\x20\x20\x20f'+'loat\x20diago'+'nal2\x20=\x20cov'+'[1][1]\x20+\x200'+'.3;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20mid\x20='+'\x200.5\x20*\x20(di'+'agonal1\x20+\x20'+'diagonal2)'+';\x0a\x20\x20\x20\x20floa'+'t\x20radius\x20='+'\x20length(ve'+'c2((diagon'+'al1\x20-\x20diag'+'onal2)\x20/\x202'+'.0,\x20offDia'+'gonal));\x0a\x20'+'\x20\x20\x20float\x20l'+'ambda1\x20=\x20m'+'id\x20+\x20radiu'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20lambda2'+'\x20=\x20max(mid'+'\x20-\x20radius,'+'\x200.1);\x0a\x20\x20\x20'+'\x20if\x20(point'+'CloudModeE'+'nabled\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20l'+'ambda1\x20=\x20l'+'ambda2\x20=\x202'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Us'+'e\x20the\x20smal'+'ler\x20viewpo'+'rt\x20dimensi'+'on\x20to\x20limi'+'t\x20the\x20kern'+'el\x20size\x20re'+'lative\x20to\x20'+'the\x20screen'+'\x20resolutio'+'n.\x0a\x20\x20\x20\x20flo'+'at\x20vmin\x20=\x20'+'min(1024.0'+',\x20min(view'+'port.x,\x20vi'+'ewport.y))'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20l1\x20=\x202.'+'0\x20*\x20min(sq'+'rt(2.0\x20*\x20l'+'ambda1),\x20v'+'min);\x0a\x20\x20\x20\x20'+'float\x20l2\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda2)'+',\x20vmin);\x0a\x0a'+'\x20\x20\x20\x20//\x20ear'+'ly-out\x20gau'+'ssians\x20sma'+'ller\x20than\x20'+'2\x20pixels\x0a\x20')+('\x20\x20\x20if\x20(l1\x20'+'<\x202.0\x20&&\x20l'+'2\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec2\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'viewport;\x0a'+'\x0a\x20\x20\x20\x20//\x20cu'+'ll\x20against'+'\x20frustum\x20x'+'/y\x20axes\x0a\x20\x20'+'\x20\x20if\x20(any('+'greaterTha'+'n(abs(cent'+'er.proj.xy'+')\x20-\x20vec2(m'+'ax(l1,\x20l2)'+')\x20*\x20c,\x20cen'+'ter.proj.w'+'w)))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20false;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec2\x20diago'+'nalVector\x20'+'=\x20normaliz'+'e(vec2(off'+'Diagonal,\x20'+'lambda1\x20-\x20'+'diagonal1)'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20scale\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20bool\x20inRe'+'nderSpace\x20'+'=\x20(center.'+'view.x\x20>=\x20'+'-renderSpa'+'ce\x20&&\x20cent'+'er.view.x\x20'+'<=\x20renderS'+'pace)\x20&&\x20('+'center.vie'+'w.y\x20>=\x20-re'+'nderSpace\x20'+'&&\x20center.'+'view.y\x20<=\x20'+'renderSpac'+'e);\x0a\x20\x20\x20\x20bo'+'ol\x20openRen'+'derAnim\x20=\x20'+'renderSpac'+'e\x20<\x20endSpa'+'ce;\x0a\x20\x20\x20\x20bo'+'ol\x20inRende'+'r\x20=\x20render'+'Space\x20>=\x20e'+'ndSpace\x20||'+'\x20inRenderS'+'pace\x20||\x20po'+'intCloudMo'+'deEnabled\x20'+'==\x201;\x0a\x20\x20\x20\x20'+'if(!openRe'+'nderAnim\x20&'+'&\x20uSplatSc'+'ale\x20>\x200.0\x20'+'&&\x20uSplatS'+'cale\x20<=\x205.'+'0){\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale\x20=\x20'+'uSplatScal'+'e;\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(in'+'Render){\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(openR'+'enderAnim)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'scale\x20=\x20in'+'RenderSpac'+'e\x20?\x20uSplat'+'Scale\x20:\x200.'+'1;\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20vec2\x20v1'+'\x20=\x20scale\x20*'+'\x20l1\x20*\x20diag'+'onalVector'+';\x0a\x20\x20\x20\x20vec2'+'\x20v2\x20=\x20scal'+'e\x20*\x20l2\x20*\x20v'+'ec2(diagon'+'alVector.y'+',\x20-diagona'+'lVector.x)')+(';\x0a\x0a\x20\x20\x20\x20cor'+'ner.offset'+'\x20=\x20(source'+'.cornerUV.'+'x\x20*\x20v1\x20+\x20s'+'ource.corn'+'erUV.y\x20*\x20v'+'2)\x20*\x20c;\x0a\x20\x20'+'\x20\x20//\x20corne'+'r.uv\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20if\x20(uSh'+'apeN\x20<\x203)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'corner.uv\x20'+'=\x20source.c'+'ornerUV;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'corner.cSi'+'ze\x20=\x20(v1\x20+'+'\x20v2)\x20*\x20c;\x0a'+'\x20\x20\x20\x20corner'+'.cUV\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),m1='\x0a\x0auniform\x20'+'highp\x20samp'+'ler2D\x20tran'+'sformA;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20transfor'+'mB;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformR;\x0a'+'\x0a#ifdef\x20IS'+'_4D\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformMot'+'ion;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20t'+'ransformLi'+'fecycle;\x0a#'+'endif\x0a\x0a//\x20'+'work\x20value'+'s\x0a//\x20uint\x20'+'tAw;\x0avec2\x20'+'sampledCov'+'4D;\x0afloat\x20'+'muT;\x0a\x0a//\x20t'+'ool\x20for\x20co'+'mpute\x20Marg'+'inal\x20time\x0a'+'float\x20comp'+'uteMargina'+'lT(float\x20t'+'ime,\x20float'+'\x20muT,\x20floa'+'t\x20sigmaT)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'muT\x20<=\x20-10'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20floa'+'t\x20result\x20='+'\x20exp(-0.5\x20'+'*\x20(pow((ti'+'me\x20-\x20muT),'+'\x202.0)\x20/\x20po'+'w(sigmaT,\x20'+'2.0)));\x0a\x20\x20'+'\x20\x20return\x20r'+'esult;\x0a}\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20retu'+'rn\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a}\x0a\x0ama'+'t3\x20quatToM'+'at3v2(vec4'+'\x20R)\x20{\x0a\x20\x20\x20\x20'+'float\x20x\x20=\x20'+'R.w;\x0a\x20\x20\x20\x20f'+'loat\x20y\x20=\x20R'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20R.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20w\x20=\x20R.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20mat3(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x201.0'+'\x20-\x202.0\x20*\x20('+'z\x20*\x20z\x20+\x20w\x20'+'*\x20w),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'2.0\x20*\x20(y\x20*'+'\x20z\x20+\x20x\x20*\x20w'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x202.0'+'\x20*\x20(y\x20*\x20w\x20'+'-\x20x\x20*\x20z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x202.0\x20*\x20'+'(y\x20*\x20z\x20-\x20x'+'\x20*\x20w),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x201.0\x20-'+'\x202.0\x20*\x20(y\x20'+'*\x20y\x20+\x20w\x20*\x20'+'w),\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x202.'+'0\x20*\x20(z\x20*\x20w'+'\x20+\x20x\x20*\x20y),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x202.0\x20*'+'\x20(y\x20*\x20w\x20+\x20'+'x\x20*\x20z),\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x202.0\x20*\x20(z'+'\x20*\x20w\x20-\x20x\x20*'+'\x20y),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.0\x20-\x202'+'.0\x20*\x20(y\x20*\x20'+'y\x20+\x20z\x20*\x20z)'+'\x0a\x20\x20\x20\x20);\x0a}\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(vec3\x20pack'+'ed)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(packed.x'+'yz,\x20sqrt(m'+'ax(0.0,\x201.'+'0\x20-\x20dot(pa'+'cked,\x20pack'+'ed))));\x0a}\x0a'+'\x0a//\x20sample'+'\x20covarianc'+'e\x20vectors\x0a'+'void\x20readC'+'ovariance('+'in\x20SplatSo'+'urce\x20sourc'+'e,\x20out\x20vec'+'3\x20covA,\x20ou'+'t\x20vec3\x20cov'+'B)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20tB\x20=\x20t'+'exelFetch('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20tR\x20'+'=\x20texelFet'+'ch(transfo'+'rmR,\x20sourc'+'e.uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3v'+'2(unpackRo'+'tation(tR)'+');\x0a\x20\x20\x20\x20vec'+'3\x20scale\x20=\x20'+'tB.xyz;\x0a\x0a\x20'+'\x20\x20\x20//\x20M\x20=\x20'+'S\x20*\x20R\x0a\x20\x20\x20\x20'+'mat3\x20M\x20=\x20t'+'ranspose(m'+'at3(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.x'+'\x20*\x20rot[0],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.y\x20*\x20r'+'ot[1],\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.z\x20*\x20rot[2'+']\x0a\x20\x20\x20\x20));\x0a'+'\x0a\x20\x20\x20\x20covA\x20'+'=\x20vec3(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20covB\x20=\x20'+'vec3(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a\x0a'+'//\x20sample\x20'+'4D\x20covaria'+'nce\x20vector'+'s\x0avoid\x20rea'+'dFTGSCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB,ou'+'t\x20vec4\x20cov'+'ariance4D)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20tB\x20=\x20tex'+'elFetch(tr'+'ansformB,\x20'+'source.uv,')+('\x200);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20tR\x20=\x20'+'texelFetch'+'(transform'+'R,\x20source.'+'uv,\x200).xyz'+';\x0a\x20\x20\x20\x20mat3'+'\x20rot\x20=\x20qua'+'tToMat3v2('+'unpackRota'+'tion(tR));'+'\x0a\x20\x20\x20\x20vec3\x20'+'scale\x20=\x20tB'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x20M\x20=\x20S\x20'+'*\x20R\x0a\x20\x20\x20\x20ma'+'t3\x20M\x20=\x20tra'+'nspose(mat'+'3(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20covA\x20=\x20'+'vec3(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20covB\x20=\x20ve'+'c3(dot(M[1'+'],\x20M[1]),\x20'+'dot(M[1],\x20'+'M[2]),\x20dot'+'(M[2],\x20M[2'+']));\x0a\x0a}\x0a\x0a\x0a'+'float\x20getM'+'arginalT(i'+'n\x20SplatSou'+'rce\x20source'+',\x20in\x20float'+'\x20time)\x20{\x0a\x20'+'\x20\x20\x20float\x20m'+'arginal\x20=\x20'+'1.0;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20filter\x20'+'out\x20splats'+'\x20that\x20have'+'\x20too\x20littl'+'e\x20influenc'+'e\x20to\x20now\x20i'+'n\x20the\x20time'+'\x20dimension'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20tData'+'\x20=\x20texelFe'+'tch(transf'+'ormLifecyc'+'le,\x20source'+'.uv,\x200).xy'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'muT\x20=\x20tDat'+'a.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20t'+'Scale\x20=\x20tD'+'ata.y;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20margi'+'nal\x20=\x20comp'+'uteMargina'+'lT(time,\x20m'+'uT,\x20tScale'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20re'+'turn\x20margi'+'nal;\x0a}\x0a\x0ave'+'c3\x20readCen'+'ter4D(Spla'+'tSource\x20so'+'urce,\x20floa'+'t\x20time)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20if(m'+'uT\x20>\x20-5.0)'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20movin'+'gSpeed\x20=\x20t')+('exelFetch('+'transformM'+'otion,\x20sou'+'rce.uv,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'platOffset'+'\x20=\x20movingS'+'peed\x20*\x20(ti'+'me\x20-\x20muT);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'platCenter'+'\x20+=\x20splatO'+'ffset;\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20spla'+'tCenter;\x0a}'+'\x0a'),_1='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0avec'+'3\x20prepareO'+'utputFromG'+'amma(vec3\x20'+'gammaColor'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20TONEMAP\x20'+'==\x20NONE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'GAMMA\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'onvert\x20to\x20'+'linear\x20spa'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20outp'+'ut\x20gamma\x20s'+'pace\x20color'+'\x20directly\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'ly\x20tonemap'+'ping\x20in\x20li'+'near\x20space'+'\x20and\x20outpu'+'t\x20to\x20linea'+'r\x20or\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20gamm'+'a\x20(which\x20i'+'s\x20handled\x20'+'by\x20gammaCo'+'rrectOutpu'+'t)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ga'+'mmaCorrect'+'Output(ton'+'eMap(decod'+'eGamma(gam'+'maColor)))'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',g1='\x0auniform\x20i'+'nt\x20mode;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x200:\x20c'+'enters,\x201:'+'\x20rings\x0auni'+'form\x20float'+'\x20ringSize;'+'\x0auniform\x20i'+'nt\x20uShapeN'+';\x0a\x0a#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bay'+'erPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'opacityDit'+'herPS\x22\x0a\x20\x20\x20'+'\x20varying\x20f'+'loat\x20id;\x0a#'+'endif\x0a\x0a#if'+'def\x20PICK_P'+'ASS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pi'+'ckPS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20alphaC'+'lip;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20vLinearDe'+'pth;\x0a\x20\x20\x20\x20#'+'include\x20\x22f'+'loatAsUint'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20Fast\x20'+'approximat'+'e\x20e^x\x20base'+'d\x20on\x20https'+'://nic.sch'+'raudolph.o'+'rg/pubs/Sc'+'hraudolph9'+'9.pdf\x0acons'+'t\x20float\x20\x20E'+'XP_A\x20\x20\x20\x20\x20\x20'+'=\x2012102203'+'.0;\x20\x20\x20//\x20≈'+'\x202^23\x20/\x20ln'+'(2)\x0aconst\x20'+'int\x20\x20\x20\x20EXP'+'_BC_RMS\x20=\x20'+'1064866808'+';\x20\x20\x20//\x20(12'+'7\x20<<\x2023)\x20-'+'\x2060801\x20*\x208'+'\x0afloat\x20fas'+'tExp(float'+'\x20x)\x20{\x0a\x20\x20\x20\x20'+'int\x20i\x20=\x20in'+'t(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20in'+'tBitsToFlo'+'at(i);\x0a}\x0a\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianU'+'V;\x0avarying'+'\x20mediump\x20v'+'ec4\x20gaussi'+'anColor;\x0av'+'arying\x20med'+'iump\x20vec2\x20'+'gaussianSi'+'ze;\x0avaryin'+'g\x20mediump\x20'+'vec2\x20gauss'+'ianCUV;\x0ava'+'rying\x20medi'+'ump\x20float\x20'+'saveMargin'+'al;\x0a\x0a//\x20判断'+'点\x20p\x20是否在正\x20N'+'\x20边形内\x0a//\x20p:'+'\x20点坐标\x20(UV\x20空'+'间或局部空间)\x0a//'+'\x20N:\x20边数\x0a//\x20'+'r:\x20半径（归一化到'+('1时就是单位圆）\x0a/'+'/\x20center:\x20'+'中心偏移\x0abool\x20'+'insideRegu'+'larPolygon'+'(vec2\x20p,\x20i'+'nt\x20N,\x20floa'+'t\x20r,\x20vec2\x20'+'center)\x20{\x0a'+'\x20\x20\x20\x20//\x20平移坐'+'标，确保中心对齐\x0a\x20'+'\x20\x20\x20vec2\x20d\x20'+'=\x20p\x20-\x20cent'+'er;\x0a\x20\x20\x20\x20fl'+'oat\x20theta\x20'+'=\x20atan(d.y'+',\x20d.x);\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20当前'+'角度\x0a\x20\x20\x20\x20flo'+'at\x20len\x20=\x20l'+'ength(d);\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20当前半径'+'\x0a\x20\x20\x20\x20float'+'\x20anglePerS'+'ide\x20=\x202.0\x20'+'*\x203.141592'+'65\x20/\x20float'+'(N);\x0a\x0a\x20\x20\x20\x20'+'//\x20映射到\x200\x20~'+'\x20anglePerS'+'ide\x20区间\x0a\x20\x20\x20'+'\x20float\x20loc'+'alAngle\x20=\x20'+'mod(theta,'+'\x20anglePerS'+'ide);\x0a\x0a\x20\x20\x20'+'\x20//\x20到边界的最大'+'半径（极坐标下的正\x20'+'N\x20边形公式）\x0a\x20\x20'+'\x20\x20float\x20ma'+'xR\x20=\x20r\x20*\x20c'+'os(anglePe'+'rSide\x20/\x202.'+'0)\x20/\x20cos(l'+'ocalAngle\x20'+'-\x20anglePer'+'Side\x20/\x202.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20len\x20<'+'=\x20maxR;\x0a}\x0a'+'\x0a//\x20距离场方式的'+'正N边形\x20soft\x20'+'mask\x0afloat'+'\x20polygonSo'+'ftMask(vec'+'2\x20p,\x20int\x20N'+',\x20float\x20ra'+'dius,\x20floa'+'t\x20edgeSoft'+'ness)\x20{\x0a\x20\x20'+'\x20\x20float\x20an'+'gle\x20=\x20atan'+'(p.y,\x20p.x)'+';\x0a\x20\x20\x20\x20floa'+'t\x20sector\x20='+'\x206.2831853'+'\x20/\x20float(N'+');\x20\x20//\x20每个扇'+'区角度\x0a\x20\x20\x20\x20//'+'\x20将角度归一化到\x20['+'-sector/2,'+'\x20sector/2]'+'\x0a\x20\x20\x20\x20float'+'\x20halfSecto'+'r\x20=\x20sector'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20float\x20lo'+'calAngle\x20='+'\x20mod(angle'+'\x20+\x20halfSec'+'tor,\x20secto'+'r)\x20-\x20halfS'+'ector;\x0a\x0a\x20\x20'+'\x20\x20//\x20多边形边界'+'在该方向的最大半径\x0a'+'\x20\x20\x20\x20float\x20'+'boundary\x20='+'\x20radius\x20*\x20'+'cos(halfSe'+'ctor)\x20/\x20co'+'s(localAng'+'le);\x0a\x0a\x20\x20\x20\x20'+'//\x20距离\x20=\x20点到'+'边界的差值\x0a\x20\x20\x20\x20'+'float\x20dist'+'\x20=\x20boundar'+'y\x20-\x20length'+'(p);\x0a\x0a\x20\x20\x20\x20'+'//\x20用\x20smoot')+('hstep\x20实现软边'+'缘\x20(edgeSof'+'tness\x20控制边缘'+'模糊宽度)\x0a\x20\x20\x20\x20'+'float\x20alph'+'a\x20=\x20smooth'+'step(0.0,\x20'+'edgeSoftne'+'ss,\x20dist);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20alpha;\x20'+'//\x200~1\x0a}\x0a\x0a'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20mediump\x20'+'float\x20A\x20=\x20'+'dot(gaussi'+'anUV,\x20gaus'+'sianUV);\x0a\x20'+'\x20\x20\x20if\x20(A\x20>'+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'valuate\x20al'+'pha\x0a\x20\x20\x20\x20me'+'diump\x20floa'+'t\x20alpha\x20=\x20'+'fastExp(-A'+'\x20*\x204.0)\x20*\x20'+'gaussianCo'+'lor.a;\x0a\x20\x20\x20'+'\x20//\x20TODO\x20u'+'ShapeN\x20alp'+'ha\x0a\x20\x20\x20\x20//\x20'+'float\x20dx\x20='+'\x20abs(gauss'+'ianCUV.x)\x20'+'/\x20gaussian'+'Size.x;\x0a\x20\x20'+'\x20\x20//\x20float'+'\x20dy\x20=\x20abs('+'gaussianCU'+'V.y)\x20/\x20gau'+'ssianSize.'+'y;\x0a\x20\x20\x20\x20//\x20'+'float\x20B\x20=\x20'+'max(dx,\x20dy'+');\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20距离度量：矩形'+'边界\x0a\x20\x20\x20\x20//\x20'+'mediump\x20fl'+'oat\x20alpha\x20'+'=\x20exp(-pow'+'(B,\x202.0)\x20*'+'\x204.0)\x20*\x20ga'+'ussianColo'+'r.a;\x0a\x0a\x20\x20\x20\x20'+'bool\x20openR'+'ingMode\x20=\x20'+'ringSize\x20>'+'\x200.0\x20&&\x20mo'+'de\x20==\x201;\x20/'+'/\x20&&\x20uCont'+'rolMode\x20=='+'\x201;\x20\x0a\x20\x20\x20\x20i'+'f\x20(openRin'+'gMode\x20&&\x20s'+'aveMargina'+'l\x20>=\x200.05)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(A\x20<\x201'+'.0\x20-\x20ringS'+'ize)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'lpha\x20=\x20max'+'(0.05,\x20alp'+'ha);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alpha\x20'+'=\x200.6;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20bool\x20ope'+'nShapeMode'+'\x20=\x20uShapeN'+'\x20>\x202;\x20//\x20&'+'&\x20uControl'+'Mode\x20==\x201;'+'\x0a\x20\x20\x20\x20if\x20(o'+'penShapeMo'+'de)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20gaussi'+'anCUV\x20*\x202.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20rad'+'ius\x20=\x201.0;')+('\x20//\x201.0\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20edgeSoft'+'ness\x20=\x200.0'+'5;\x20//\x200.05'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v\x20*=\x201.0;/'+'/0.9;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20c'+'enter\x20=\x20ve'+'c2(0.0,\x200.'+'0);\x20\x20\x20//\x20如'+'果中心不在原点，传入'+'偏移\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20alpha\x20'+'=\x20polygonS'+'oftMask(uv'+',\x20uShapeN,'+'\x20radius,\x20e'+'dgeSoftnes'+'s);\x20//\x20透明\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(!insideR'+'egularPoly'+'gon(uv,\x20uS'+'hapeN,\x20rad'+'ius,\x20cente'+'r))\x20{\x20//裁剪'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20defined(S'+'HADOW_PASS'+')\x20||\x20defin'+'ed(PICK_PA'+'SS)\x20||\x20def'+'ined(PREPA'+'SS_PASS)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20a'+'lphaClip)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'getPickOut'+'put();\x0a\x0a\x20\x20'+'\x20\x20#elif\x20SH'+'ADOW_PASS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(0'+'.0,\x200.0,\x200'+'.0,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20#elif'+'\x20PREPASS_P'+'ASS\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20fl'+'oat2vec4(v'+'LinearDept'+'h);\x0a\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x201.0\x20/'+'\x20255.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20discard;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20DI'+'THER_NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(alph'+'a,\x20id\x20*\x200.'+'013);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'gaussianCo'+'lor.xyz,\x20a'+'lpha);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),S1='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0avec3\x20unpa'+'ck111011s('+'uint\x20bits)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec3(('+'uvec3(bits'+')\x20>>\x20uvec3'+'(21u,\x2011u,'+'\x200u))\x20&\x20uv'+'ec3(0x7ffu'+',\x200x3ffu,\x20'+'0x7ffu))\x20/'+'\x20vec3(2047'+'.0,\x201023.0'+',\x202047.0)\x20'+'*\x202.0\x20-\x201.'+'0;\x0a}\x0a\x0a//\x20f'+'etch\x20quant'+'ized\x20spher'+'ical\x20harmo'+'nic\x20coeffi'+'cients\x0avoi'+'d\x20fetchSca'+'le(in\x20uvec'+'4\x20t,\x20out\x20f'+'loat\x20scale'+',\x20out\x20vec3'+'\x20a,\x20out\x20ve'+'c3\x20b,\x20out\x20'+'vec3\x20c)\x20{\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20uintBits'+'ToFloat(t.'+'x);\x0a\x20\x20\x20\x20a\x20'+'=\x20unpack11'+'1011s(t.y)'+';\x0a\x20\x20\x20\x20b\x20=\x20'+'unpack1110'+'11s(t.z);\x0a'+'\x20\x20\x20\x20c\x20=\x20un'+'pack111011'+'s(t.w);\x0a}\x0a'+'\x0a//\x20fetch\x20'+'quantized\x20'+'spherical\x20'+'harmonic\x20c'+'oefficient'+'s\x0avoid\x20fet'+'ch(in\x20uvec'+'4\x20t,\x20out\x20v'+'ec3\x20a,\x20out'+'\x20vec3\x20b,\x20o'+'ut\x20vec3\x20c,'+'\x20out\x20vec3\x20'+'d)\x20{\x0a\x20\x20\x20\x20a'+'\x20=\x20unpack1'+'11011s(t.x'+');\x0a\x20\x20\x20\x20b\x20='+'\x20unpack111'+'011s(t.y);'+'\x0a\x20\x20\x20\x20c\x20=\x20u'+'npack11101'+'1s(t.z);\x0a\x20'+'\x20\x20\x20d\x20=\x20unp'+'ack111011s'+'(t.w);\x0a}\x0a\x0a'+'void\x20fetch'+'(in\x20uint\x20t'+',\x20out\x20vec3'+'\x20a)\x20{\x0a\x20\x20\x20\x20'+'a\x20=\x20unpack'+'111011s(t)'+';\x0a}\x0a\x0a#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20splatSH_'+'1to3;\x0a\x20\x20\x20\x20'+'void\x20readS'+'HData(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20sh'+'[3],\x20out\x20f'+'loat\x20scale'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetchSca'+'le(texelFe'+'tch(splatS'+'H_1to3,\x20so'+'urce.uv,\x200'+'),\x20scale,\x20'+'sh[0],\x20sh['+'1],\x20sh[2])'+(';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20SH_BAN'+'DS\x20==\x202\x0a\x20\x20'+'\x20\x20uniform\x20'+'highp\x20usam'+'pler2D\x20spl'+'atSH_1to3;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20highp\x20u'+'sampler2D\x20'+'splatSH_4t'+'o7;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_8to11;\x0a\x20\x20'+'\x20\x20void\x20rea'+'dSHData(in'+'\x20SplatSour'+'ce\x20source,'+'\x20out\x20vec3\x20'+'sh[8],\x20out'+'\x20float\x20sca'+'le)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetchS'+'cale(texel'+'Fetch(spla'+'tSH_1to3,\x20'+'source.uv,'+'\x200),\x20scale'+',\x20sh[0],\x20s'+'h[1],\x20sh[2'+']);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetch(te'+'xelFetch(s'+'platSH_4to'+'7,\x20source.'+'uv,\x200),\x20sh'+'[3],\x20sh[4]'+',\x20sh[5],\x20s'+'h[6]);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20fetch'+'(texelFetc'+'h(splatSH_'+'8to11,\x20sou'+'rce.uv,\x200)'+'.x,\x20sh[7])'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_1to3;\x0a\x20\x20\x20'+'\x20uniform\x20h'+'ighp\x20usamp'+'ler2D\x20spla'+'tSH_4to7;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20us'+'ampler2D\x20s'+'platSH_8to'+'11;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_12to15;\x0a\x20'+'\x20\x20\x20void\x20re'+'adSHData(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20sh[15],\x20o'+'ut\x20float\x20s'+'cale)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fetc'+'hScale(tex'+'elFetch(sp'+'latSH_1to3'+',\x20source.u'+'v,\x200),\x20sca'+'le,\x20sh[0],'+'\x20sh[1],\x20sh'+'[2]);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetch('+'texelFetch'+'(splatSH_4'+'to7,\x20sourc'+'e.uv,\x200),\x20'+'sh[3],\x20sh['+'4],\x20sh[5],'+'\x20sh[6]);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fet'+'ch(texelFe'+'tch(splatS'+'H_8to11,\x20s'+'ource.uv,\x20'+'0),\x20sh[7],'+'\x20sh[8],\x20sh'+'[9],\x20sh[10'+']);\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20fetch(te'+'xelFetch(s'+'platSH_12t'+'o15,\x20sourc'+'e.uv,\x200),\x20'+'sh[11],\x20sh'+'[12],\x20sh[1'+'3],\x20sh[14]'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0a#en'+'dif\x0a'),y1='\x0aattribute'+'\x20vec3\x20vert'+'ex_positio'+'n;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20xy:\x20co'+'rnerUV,\x20z:'+'\x20render\x20or'+'der\x20offset'+'\x0aattribute'+'\x20uint\x20vert'+'ex_id_attr'+'ib;\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20render'+'\x20order\x20bas'+'e\x0a\x0auniform'+'\x20uint\x20numS'+'plats;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20tota'+'l\x20number\x20o'+'f\x20splats\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20splatO'+'rder;\x20\x20\x20\x20/'+'/\x20per-spla'+'t\x20index\x20to'+'\x20source\x20ga'+'ussian\x0a\x0a//'+'\x20initializ'+'e\x20the\x20spla'+'t\x20source\x20s'+'tructure\x0ab'+'ool\x20initSo'+'urce(out\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(splatOrde'+'r,\x200).x);\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20ui'+'nt(vertex_'+'position.z'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20if'+'\x20out\x20of\x20ra'+'nge\x20(since'+'\x20the\x20last\x20'+'block\x20of\x20s'+'plats\x20may\x20'+'be\x20partial'+'ly\x20full)\x0a\x20'+'\x20\x20\x20if\x20(sou'+'rce.order\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'vec2\x20order'+'UV\x20=\x20ivec2'+'(source.or'+'der\x20%\x20w,\x20s'+'ource.orde'+'r\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20splat\x20id\x0a'+'\x20\x20\x20\x20source'+'.id\x20=\x20texe'+'lFetch(spl'+'atOrder,\x20o'+'rderUV,\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20/'+'/\x20map\x20id\x20t'+'o\x20uv\x0a\x20\x20\x20\x20s'+'ource.uv\x20='+'\x20ivec2(sou'+'rce.id\x20%\x20w'+',\x20source.i'+'d\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20true;'+'\x0a}\x0a',v1='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0aun'+'iform\x20int\x20'+'pointCloud'+'ModeEnable'+'d;\x0auniform'+'\x20float\x20uTi'+'me;\x0aunifor'+'m\x20float\x20pr'+'erenderCTi'+'me;\x0aunifor'+'m\x20float\x20uS'+'aturation;'+'\x20//\x200.0-2.'+'0，1.0\x20为原始饱'+'和度\x0auniform'+'\x20float\x20uHu'+'eOffset;\x20\x20'+'//\x20色相偏移，单位'+'：度（360度环绕）'+'\x0auniform\x20v'+'ec3\x20clrOff'+'set;\x0aunifo'+'rm\x20vec4\x20cl'+'rScale;\x0aun'+'iform\x20floa'+'t\x20uOpacity'+';\x0auniform\x20'+'int\x20uInver'+'tOpacity;\x0a'+'\x0avarying\x20m'+'ediump\x20vec'+'2\x20gaussian'+'UV;\x0avaryin'+'g\x20mediump\x20'+'vec4\x20gauss'+'ianColor;\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianS'+'ize;\x0avaryi'+'ng\x20mediump'+'\x20vec2\x20gaus'+'sianCUV;\x0av'+'arying\x20med'+'iump\x20float'+'\x20saveMargi'+'nal;\x0a\x0a//\x20='+'====\x20高精度\x20H'+'SV/RGB\x20转换\x20'+'=====\x0ahigh'+'p\x20vec3\x20rgb'+'2hsv(highp'+'\x20vec3\x20c)\x20{'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20cMa'+'x\x20=\x20max(ma'+'x(c.r,\x20c.g'+'),\x20c.b);\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20cMin\x20'+'=\x20min(min('+'c.r,\x20c.g),'+'\x20c.b);\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20delta\x20='+'\x20cMax\x20-\x20cM'+'in\x20+\x201e-10'+';\x20//\x20避免除0\x0a'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20h\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'if\x20(delta\x20'+'>\x201e-6)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(cMax\x20==\x20'+'c.r)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20=\x20mod((c.'+'g\x20-\x20c.b)\x20/'+'\x20delta,\x206.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(cMax\x20=='+'\x20c.g)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.b\x20-'+'\x20c.r)\x20/\x20de'+'lta\x20+\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.r\x20-'+'\x20c.g)\x20/\x20de'+'lta\x20+\x204.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20/=\x206.0;\x20/'+'/\x20转到\x20[0,1]'+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(h\x20<\x200.0'+')\x20h\x20+=\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20s\x20=\x20('+'cMax\x20<\x201e-'+'6)\x20?\x200.0\x20:'+'\x20delta\x20/\x20c'+'Max;\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20v\x20=\x20cMax;'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec3(h,\x20'+'s,\x20v);\x0a}\x0a\x0a'+'highp\x20vec3'+'\x20hsv2rgb(h'+'ighp\x20vec3\x20'+'c)\x20{\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20h\x20=\x20c.x\x20*'+'\x206.0;\x20//\x200'+'-6\x0a\x20\x20\x20\x20hig'+'hp\x20float\x20s'+'\x20=\x20c.y;\x0a\x20\x20'+'\x20\x20highp\x20fl'+'oat\x20v\x20=\x20c.'+'z;\x0a\x0a\x20\x20\x20\x20hi'+'ghp\x20int\x20i\x20'+'=\x20int(floo'+'r(h));\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20f\x20=\x20h\x20-'+'\x20float(i);'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20p\x20='+'\x20v\x20*\x20(1.0\x20'+'-\x20s);\x0a\x20\x20\x20\x20'+'highp\x20floa'+'t\x20q\x20=\x20v\x20*\x20'+'(1.0\x20-\x20s\x20*'+'\x20f);\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20t\x20=\x20v\x20*\x20('+'1.0\x20-\x20s\x20*\x20'+'(1.0\x20-\x20f))'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(i\x20==\x200)\x20r'+'eturn\x20vec3'+'(v,\x20t,\x20p);'+'\x0a\x20\x20\x20\x20else\x20'+'if\x20(i\x20==\x201'+')\x20return\x20v'+'ec3(q,\x20v,\x20'+'p);\x0a\x20\x20\x20\x20el'+'se\x20if\x20(i\x20='+'=\x202)\x20retur'+'n\x20vec3(p,\x20'+'v,\x20t);\x0a\x20\x20\x20'+'\x20else\x20if\x20('+'i\x20==\x203)\x20re'+'turn\x20vec3('+'p,\x20q,\x20v);\x0a'+'\x20\x20\x20\x20else\x20i'+'f\x20(i\x20==\x204)'+'\x20return\x20ve'+'c3(t,\x20p,\x20v'+');\x0a\x20\x20\x20\x20els'+'e\x20return\x20v'+'ec3(v,\x20p,\x20'+'q);\x20//\x20i=='+'5\x0a}\x0a\x0a#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20id;\x0a#en'+'dif\x0a\x0amediu'+'mp\x20vec4\x20di'+'scardVec\x20='+'\x20vec4(0.0,'+'\x200.0,\x202.0,'+'\x201.0);\x0a\x0a#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20varying\x20'+'float\x20vLin'+'earDepth;\x0a'+'#endif\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'//\x20read\x20ga'+'ussian\x20det'+'ails\x0a\x20\x20\x20\x20S'+'platSource'+'\x20source;\x0a\x20'+'\x20\x20\x20if\x20(!in'+'itSource(s'+'ource))\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20')+('=\x20discardV'+'ec;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20saveMargi'+'nal\x20=\x20getM'+'arginalT(s'+'ource,\x20uTi'+'me);\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20float\x20'+'marginal\x20='+'\x20uOpenAnim'+'\x20==\x201\x20?\x201.'+'0\x20:\x20saveMa'+'rginal;\x0a\x20\x20'+'\x20\x20if\x20(marg'+'inal\x20<\x200.0'+'5)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Posi'+'tion\x20=\x20dis'+'cardVec;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec3'+'\x20modelCent'+'er;\x0a\x20\x20\x20\x20bo'+'ol\x20isCente'+'r4D\x20=\x20save'+'Marginal\x20>'+'=\x200.05;\x0a\x20\x20'+'\x20\x20if\x20(isCe'+'nter4D)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'delCenter\x20'+'=\x20readCent'+'er4D(sourc'+'e,\x20uTime);'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20modelCen'+'ter\x20=\x20read'+'Center(sou'+'rce);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20Spl'+'atCenter\x20c'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'center))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return;'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20int\x20'+'showCloud\x20'+'=\x20pointClo'+'udModeEnab'+'led;\x0a\x20\x20\x20\x20i'+'f\x20(prerend'+'erCTime\x20=='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(prer'+'enderCTime'+'\x20>=\x201.0\x20&&'+'\x20prerender'+'CTime\x20<\x202.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20showClo'+'ud\x20=\x201;\x0a\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(prerend'+'erCTime\x20>='+'\x202.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20proje'+'ct\x20center\x20'+'to\x20screen\x20'+'space\x0a\x20\x20\x20\x20'+'SplatCorne'+'r\x20corner;\x0a'+'\x20\x20\x20\x20if\x20(!i'+'nitCorner('+'source,\x20ce'+'nter,\x20corn'+'er,\x20showCl'+'oud))\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_P'+'osition\x20=\x20')+('discardVec'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20vec'+'4\x20clr\x20=\x20re'+'adColor(so'+'urce,\x20uTim'+'e,\x20!isCent'+'er4D,\x20poin'+'tCloudMode'+'Enabled);\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'apply\x20AA\x20c'+'ompensatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'clr.a\x20*=\x20c'+'orner.aaFa'+'ctor;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20if(margi'+'nal\x20>\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20clr.w\x20*=\x20'+'marginal;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20开关控制\x0a\x20'+'\x20\x20\x20if\x20(uCo'+'ntrolColor'+'Mode\x20==\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'tint/brigh'+'tness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr\x20=\x20'+'clr\x20*\x20clrS'+'cale\x20+\x20vec'+'4(clrOffse'+'t,\x200.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(uInvertO'+'pacity\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20clr'+'.a\x20=\x201.0\x20-'+'\x20clr.a;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20don\x27t\x20'+'allow\x20out-'+'of-range\x20a'+'lpha\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20clr\x20=\x20c'+'lamp(clr,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20evalu'+'ate\x20spheri'+'cal\x20harmon'+'ics\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20the\x20'+'model-spac'+'e\x20view\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20norm'+'alize(cent'+'er.view\x20*\x20'+'mat3(cente'+'r.modelVie'+'w));\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20rea'+'d\x20sh\x20coeff'+'icients\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sh[SH_COE'+'FFS];\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20readS'+'HData(sour'+'ce,\x20sh,\x20sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr.x'+'yz\x20+=\x20eval'+'SH(sh,\x20dir'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(co'+'rner,\x20clr.'+'w);\x0a\x0a\x20\x20\x20\x20/')+('/\x20pointClo'+'udMode\x0a\x20\x20\x20'+'\x20//\x20if\x20(po'+'intCloudMo'+'deEnabled\x20'+'==\x201)\x20{\x0a\x20\x20'+'\x20\x20//\x20\x20\x20\x20\x20c'+'lr.a\x20=\x201.0'+';\x0a\x20\x20\x20\x20//\x20}'+'\x0a\x20\x20\x20\x20highp'+'\x20vec3\x20colo'+'r\x20=\x20max(cl'+'r.xyz,\x200.0'+');\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20开关控制\x0a'+'\x20\x20\x20\x20if\x20(uC'+'ontrolColo'+'rMode\x20==\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20转\x20HSV'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'ighp\x20vec3\x20'+'hsv\x20=\x20rgb2'+'hsv(color)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20调整饱和度\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20hsv.'+'y\x20*=\x20uSatu'+'ration;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20调整'+'色相\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20hsv.x\x20=\x20f'+'ract(hsv.x'+'\x20+\x20uHueOff'+'set\x20/\x20360.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20转回\x20RGB'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor\x20=\x20hsv'+'2rgb(hsv);'+'\x20\x20\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wri'+'te\x20output\x0a'+'\x20\x20\x20\x20gl_Pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4(cor'+'ner.offset'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20gaussia'+'nUV\x20=\x20corn'+'er.uv;\x0a\x20\x20\x20'+'\x20gaussianC'+'UV\x20=\x20corne'+'r.cUV;\x0a\x20\x20\x20'+'\x20gaussianS'+'ize\x20=\x20corn'+'er.cSize;\x0a'+'\x20\x20\x20\x20gaussi'+'anColor\x20=\x20'+'vec4(prepa'+'reOutputFr'+'omGamma(co'+'lor),\x20clr.'+'w);\x0a\x20\x20\x20\x20ga'+'ussianColo'+'r\x20=\x20clamp('+'gaussianCo'+'lor,\x200.0,\x20'+'1.0);\x0a\x0a\x20\x20\x20'+'\x20#ifndef\x20D'+'ITHER_NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'d\x20=\x20float('+'source.id)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vLin'+'earDepth\x20='+'\x20-center.v'+'iew.z;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),x1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'aPosition;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x0a\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(aPos'+'ition,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv0\x20'+'=\x20getImage'+'EffectUV(('+'aPosition.'+'xy\x20+\x201.0)\x20'+'*\x200.5);\x0a\x20\x20'+'\x20\x20}\x0a',T1='\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec4\x20c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(decodeG'+'amma(color'+'.rgb)),\x20co'+'lor.a);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a',w1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec4\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec4\x20vert'+'ex_color;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20co'+'lor;\x0a\x20\x20\x20\x20v'+'oid\x20main(v'+'oid)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20=\x20vertex_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20matrix_'+'model\x20*\x20ve'+'rtex_posit'+'ion;\x0a\x20\x20\x20\x20}'+'\x0a',E1='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceRefra'+'ctionIndex'+';\x0a\x0afloat\x20i'+'ridescence'+'_iorToFres'+'nel(float\x20'+'transmitte'+'dIor,\x20floa'+'t\x20incident'+'Ior)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'incidentIo'+'r)\x20/\x20(tran'+'smittedIor'+'\x20+\x20inciden'+'tIor),\x202.0'+');\x0a}\x0a\x0avec3'+'\x20iridescen'+'ce_iorToFr'+'esnel(vec3'+'\x20transmitt'+'edIor,\x20flo'+'at\x20inciden'+'tIor)\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow((transm'+'ittedIor\x20-'+'\x20vec3(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3(incid'+'entIor)),\x20'+'vec3(2.0))'+';\x0a}\x0a\x0avec3\x20'+'iridescenc'+'e_fresnelT'+'oIor(vec3\x20'+'f0)\x20{\x0a\x20\x20\x20\x20'+'vec3\x20sqrtF'+'0\x20=\x20sqrt(f'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20(vec3'+'(1.0)\x20+\x20sq'+'rtF0)\x20/\x20(v'+'ec3(1.0)\x20-'+'\x20sqrtF0);\x0a'+'}\x0a\x0avec3\x20ir'+'idescence_'+'sensitivit'+'y(float\x20op'+'d,\x20vec3\x20sh'+'ift)\x20{\x0a\x20\x20\x20'+'\x20float\x20PI\x20'+'=\x203.141592'+'653589793;'+'\x0a\x20\x20\x20\x20float'+'\x20phase\x20=\x202'+'.0\x20*\x20PI\x20*\x20'+'opd\x20*\x201.0e'+'-9;\x0a\x20\x20\x20\x20co'+'nst\x20vec3\x20v'+'al\x20=\x20vec3('+'5.4856e-13'+',\x204.4201e-'+'13,\x205.2481'+'e-13);\x0a\x20\x20\x20'+'\x20const\x20vec'+'3\x20pos\x20=\x20ve'+'c3(1.6810e'+'+06,\x201.795'+'3e+06,\x202.2'+'084e+06);\x0a'+'\x20\x20\x20\x20const\x20'+'vec3\x20var\x20='+'\x20vec3(4.32'+'78e+09,\x209.'+'3046e+09,\x20'+'6.6121e+09'+');\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20xyz\x20=\x20v'+'al\x20*\x20sqrt('+'2.0\x20*\x20PI\x20*'+'\x20var)\x20*\x20co'+'s(pos\x20*\x20ph'+'ase\x20+\x20shif'+'t)\x20*\x20exp(-'+'pow(phase,'+'\x202.0)\x20*\x20va'+'r);\x0a\x20\x20\x20\x20xy'+'z.x\x20+=\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+('cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20/=\x20vec3(1'+'.0685e-07)'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20mat3\x20XY'+'Z_TO_REC70'+'9\x20=\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x203.'+'2404542,\x20-'+'0.9692660,'+'\x20\x200.055643'+'4,\x0a\x20\x20\x20\x20\x20\x20\x20'+'-1.5371385'+',\x20\x201.87601'+'08,\x20-0.204'+'0259,\x0a\x20\x20\x20\x20'+'\x20\x20\x20-0.4985'+'314,\x20\x200.04'+'15560,\x20\x201.'+'0572252\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'return\x20XYZ'+'_TO_REC709'+'\x20*\x20xyz;\x0a}\x0a'+'\x0afloat\x20iri'+'descence_f'+'resnel(flo'+'at\x20cosThet'+'a,\x20float\x20f'+'0)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20x\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20x2\x20=\x20x\x20*'+'\x20x;\x0a\x20\x20\x20\x20fl'+'oat\x20x5\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x20\x0a\x0av'+'ec3\x20irides'+'cence_fres'+'nel(float\x20'+'cosTheta,\x20'+'vec3\x20f0)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20clamp'+'(1.0\x20-\x20cos'+'Theta,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20float\x20x2'+'\x20=\x20x\x20*\x20x;\x0a'+'\x20\x20\x20\x20float\x20'+'x5\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x20\x0a\x20'+'\x20\x20\x20return\x20'+'f0\x20+\x20(vec3'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0avec3\x20calc'+'Iridescenc'+'e(float\x20ou'+'tsideIor,\x20'+'float\x20cosT'+'heta,\x20vec3'+'\x20base_f0,\x20'+'float\x20irid'+'escenceThi'+'ckness)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceIor\x20'+'=\x20mix(outs'+'ideIor,\x20ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20float'+'\x20sinTheta2'+'Sq\x20=\x20pow(o'+'utsideIor\x20'+'/\x20iridesce')+('nceIor,\x202.'+'0)\x20*\x20(1.0\x20'+'-\x20pow(cosT'+'heta,\x202.0)'+');\x0a\x20\x20\x20\x20flo'+'at\x20cosThet'+'a2Sq\x20=\x201.0'+'\x20-\x20sinThet'+'a2Sq;\x0a\x0a\x20\x20\x20'+'\x20if\x20(cosTh'+'eta2Sq\x20<\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec3(1.0)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20c'+'osTheta2\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20r0\x20=\x20irid'+'escence_io'+'rToFresnel'+'(iridescen'+'ceIor,\x20out'+'sideIor);\x0a'+'\x20\x20\x20\x20float\x20'+'r12\x20=\x20irid'+'escence_fr'+'esnel(cosT'+'heta,\x20r0);'+'\x0a\x20\x20\x20\x20float'+'\x20r21\x20=\x20r12'+';\x0a\x20\x20\x20\x20floa'+'t\x20t121\x20=\x201'+'.0\x20-\x20r12;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20phi12\x20=\x20i'+'ridescence'+'Ior\x20<\x20outs'+'ideIor\x20?\x20P'+'I\x20:\x200.0;\x0a\x20'+'\x20\x20\x20float\x20p'+'hi21\x20=\x20PI\x20'+'-\x20phi12;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20b'+'aseIor\x20=\x20i'+'ridescence'+'_fresnelTo'+'Ior(base_f'+'0\x20+\x20vec3(0'+'.0001));\x0a\x20'+'\x20\x20\x20vec3\x20r1'+'\x20=\x20iridesc'+'ence_iorTo'+'Fresnel(ba'+'seIor,\x20iri'+'descenceIo'+'r);\x0a\x20\x20\x20\x20ve'+'c3\x20r23\x20=\x20i'+'ridescence'+'_fresnel(c'+'osTheta2,\x20'+'r1);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20phi23'+'\x20=\x20vec3(0.'+'0);\x0a\x20\x20\x20\x20if'+'\x20(baseIor['+'0]\x20<\x20iride'+'scenceIor)'+'\x20phi23[0]\x20'+'=\x20PI;\x0a\x20\x20\x20\x20'+'if\x20(baseIo'+'r[1]\x20<\x20iri'+'descenceIo'+'r)\x20phi23[1'+']\x20=\x20PI;\x0a\x20\x20'+'\x20\x20if\x20(base'+'Ior[2]\x20<\x20i'+'ridescence'+'Ior)\x20phi23'+'[2]\x20=\x20PI;\x0a'+'\x20\x20\x20\x20float\x20'+'opd\x20=\x202.0\x20'+'*\x20iridesce'+'nceIor\x20*\x20i'+'ridescence'+'Thickness\x20'+'*\x20cosTheta'+'2;\x0a\x20\x20\x20\x20vec'+'3\x20phi\x20=\x20ve'+'c3(phi21)\x20'+'+\x20phi23;\x20\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123Sq\x20=\x20c'+'lamp(r12\x20*'+'\x20r23,\x201e-5'+',\x200.9999);'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123\x20=\x20sqr')+('t(r123Sq);'+'\x0a\x20\x20\x20\x20vec3\x20'+'rs\x20=\x20pow(t'+'121,\x202.0)\x20'+'*\x20r23\x20/\x20(1'+'.0\x20-\x20r123S'+'q);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20c0\x20=\x20r'+'12\x20+\x20rs;\x0a\x20'+'\x20\x20\x20vec3\x20i\x20'+'=\x20c0;\x0a\x0a\x20\x20\x20'+'\x20vec3\x20cm\x20='+'\x20rs\x20-\x20t121'+';\x0a\x20\x20\x20\x20for\x20'+'(int\x20m\x20=\x201'+';\x20m\x20<=\x202;\x20'+'m++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20cm\x20*='+'\x20r123;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'sm\x20=\x202.0\x20*'+'\x20iridescen'+'ce_sensiti'+'vity(float'+'(m)\x20*\x20opd,'+'\x20float(m)\x20'+'*\x20phi);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20i\x20+='+'\x20cm\x20*\x20sm;\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20max'+'(i,\x20vec3(0'+'.0));\x0a}\x0a\x0av'+'ec3\x20getIri'+'descence(f'+'loat\x20cosTh'+'eta,\x20vec3\x20'+'specularit'+'y,\x20float\x20i'+'ridescence'+'Thickness)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),b1='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_irid'+'escence;\x0a#'+'endif\x0a\x0avoi'+'d\x20getIride'+'scence()\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_IRID'+'ESCENCE_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20iridescen'+'ce\x20*=\x20mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20*=\x20textur'+'e2DBias({S'+'TD_IRIDESC'+'ENCE_TEXTU'+'RE_NAME},\x20'+'{STD_IRIDE'+'SCENCE_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCE_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scence\x20=\x20i'+'ridescence'+';\x20\x0a}\x0a',A1='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceThick'+'nessMax;\x0a\x0a'+'#ifdef\x20STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_iridesc'+'enceThickn'+'essMin;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'end\x20=\x20text'+'ure2DBias('+'{STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE_NAME},'+'\x20{STD_IRID'+'ESCENCETHI'+'CKNESS_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCET'+'HICKNESS_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20iridescen'+'ceThicknes'+'s\x20=\x20mix(ma'+'terial_iri'+'descenceTh'+'icknessMin'+',\x20material'+'_iridescen'+'ceThicknes'+'sMax,\x20blen'+'d);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20ir'+'idescenceT'+'hickness\x20='+'\x20material_'+'iridescenc'+'eThickness'+'Max;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dIridesce'+'nceThickne'+'ss\x20=\x20iride'+'scenceThic'+'kness;\x20\x0a}\x0a',C1='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'fractionIn'+'dex;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tIor()\x20{\x0a#'+'ifdef\x20STD_'+'IOR_CONSTA'+'NT\x0a\x20\x20\x20\x20dIo'+'r\x20=\x20materi'+'al_refract'+'ionIndex;\x0a'+'#else\x0a\x20\x20\x20\x20'+'dIor\x20=\x201.0'+'\x20/\x201.5;\x0a#e'+'ndif\x0a}\x0a',P1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20light{i}_'+'color;\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec3\x20light'+'{i}_direct'+'ion;\x0a\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20LIT_CODE'+'_LIGHTS_PO'+'INT\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20point\x20l'+'ights\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_pos'+'ition;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_ra'+'dius;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20SPOT\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20spot\x20ligh'+'ts\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20l'+'ight{i}_di'+'rection;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20light'+'{i}_innerC'+'oneAngle;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_outer'+'ConeAngle;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'3\x20light{i}'+'_position;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20vec3\x20lig'+'ht{i}_half'+'Width;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_hal'+'fHeight;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'FALLOFF\x20=='+'\x20LINEAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+('T_CODE_FAL'+'LOFF_LINEA'+'R\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20linear\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}FALLOFF\x20'+'==\x20INVERSE'+'SQUARED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ca'+'sting\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'CASTSHADOW'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'at4\x20light{'+'i}_shadowM'+'atrix;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_sh'+'adowIntens'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec4\x20ligh'+'t{i}_shado'+'wParams;\x20/'+'/\x20width,\x20h'+'eight,\x20bia'+'s,\x20radius\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_s'+'hadowSearc'+'hArea;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20light{i}'+'_cameraPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_sof'+'tShadowPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20direction'+'al\x20(cascad'+'ed)\x20shadow'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrixPa'+'lette[4];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec4\x20light'+'{i}_shadow'+'CascadeDis'+'tances;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20in'+'t\x20light{i}'+'_shadowCas')+('cadeCount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_shad'+'owCascadeB'+'lend;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'SHADOW_PCF'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2DShado'+'w\x20light{i}'+'_shadowMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_shadowM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'okie\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIGHT{i}C'+'OOKIE)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_COOKIE\x20'+'//\x20include'+'\x20functiona'+'lity\x20for\x20c'+'ookies\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20light{i'+'}_cookie;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_cooki'+'eIntensity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d'+'efined(LIG'+'HT{i}CASTS'+'HADOW)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20ligh'+'t{i}_shado'+'wMatrix;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20SPOT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20lig')+('ht{i}_cook'+'ie;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_c'+'ookieInten'+'sity;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIGHT{i}C'+'ASTSHADOW)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'light{i}_s'+'hadowMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIGH'+'T{i}COOKIE'+'_TRANSFORM'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20light{i}_'+'cookieMatr'+'ix;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c2\x20light{i'+'}_cookieOf'+'fset;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),M1='\x0afloat\x20get'+'LightDiffu'+'se(vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir,\x20vec3\x20'+'lightDirNo'+'rm)\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',D1='\x0avec3\x20eval'+'OmniLight('+'vec3\x20light'+'PosW)\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'PositionW\x20'+'-\x20lightPos'+'W;\x0a}\x0a',I1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',L1='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0avoid\x20e'+'valuateLig'+'ht{i}(\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20iridesc'+'enceFresne'+'l\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20color\x0a\x20\x20\x20'+'\x20vec3\x20ligh'+'tColor\x20=\x20l'+'ight{i}_co'+'lor;\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x20&&\x20!defi'+'ned(LIT_SH'+'ADOW_CATCH'+'ER)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20return\x20if'+'\x20the\x20light'+'\x20color\x20is\x20'+'black\x20(use'+'d\x20by\x20shado'+'w\x20catcher\x20'+'-\x20this\x20way'+'\x20this\x20ligh'+'t\x20is\x20very\x20'+'cheap)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(a'+'ll(equal(l'+'ightColor,'+'\x20vec3(0.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20dir'+'ectional\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dLight'+'DirNormW\x20='+'\x20light{i}_'+'direction;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20omn'+'i\x20or\x20spot\x20'+'light\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtDirW\x20=\x20'+'evalOmniLi'+'ght(light{'+'i}_positio'+'n);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightDi'+'rNormW\x20=\x20n'+'ormalize(l'+'ightDirW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20cookie\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'COOKIE)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_FALLOF'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_TRANSF'+'ORM\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2DXform('+('light{i}_c'+'ookie,\x20lig'+'ht{i}_shad'+'owMatrix,\x20'+'light{i}_c'+'ookieInten'+'sity,\x20ligh'+'t{i}_cooki'+'eMatrix,\x20l'+'ight{i}_co'+'okieOffset'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2D(light'+'{i}_cookie'+',\x20light{i}'+'_shadowMat'+'rix,\x20light'+'{i}_cookie'+'Intensity)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}COOKIE_TR'+'ANSFORM\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'Cookie2DCl'+'ipXform(li'+'ght{i}_coo'+'kie,\x20light'+'{i}_shadow'+'Matrix,\x20li'+'ght{i}_coo'+'kieIntensi'+'ty,\x20light{'+'i}_cookieM'+'atrix,\x20lig'+'ht{i}_cook'+'ieOffset).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20cookieAtt'+'enuation\x20='+'\x20getCookie'+'2DClip(lig'+'ht{i}_cook'+'ie,\x20light{'+'i}_shadowM'+'atrix,\x20lig'+'ht{i}_cook'+'ieIntensit'+'y).{LIGHT{'+'i}COOKIE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20OMNI\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'CookieCube'+'(light{i}_'+'cookie,\x20li'+'ght{i}_sha')+('dowMatrix,'+'\x20light{i}_'+'cookieInte'+'nsity).{LI'+'GHT{i}COOK'+'IE_CHANNEL'+'};\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20mu'+'ltiply\x20lig'+'ht\x20color\x20b'+'y\x20the\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lig'+'htColor\x20*='+'\x20cookieAtt'+'enuation;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20di'+'stance\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20==\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}FAL'+'LOFF\x20==\x20LI'+'NEAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Linear(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20=\x20g'+'etFalloffI'+'nvSquared('+'light{i}_r'+'adius,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20non'+'\x20punctual\x20'+'lights\x20onl'+'y\x20gets\x20the'+'\x20range\x20win'+'dow\x20here\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Window(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20spot\x20li'+'ght\x20angle\x20'+'falloff\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20SPOT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20!de'+'fined(LIGH'+'T{i}COOKIE'+')\x20||\x20defin'+'ed(LIGHT{i'+'}COOKIE_FA'+'LLOFF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dAtten\x20'+'*=\x20getSpot'+'Effect(lig'+'ht{i}_dire'+'ction,\x20lig'+'ht{i}_inne'+'rConeAngle'+',\x20light{i}'+'_outerCone'+'Angle,\x20dLi'+'ghtDirNorm'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20if\x20(dA'+'tten\x20<\x200.0')+('0001)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20are'+'a\x20light\x20va'+'lues\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcR'+'ectLightVa'+'lues(light'+'{i}_positi'+'on,\x20light{'+'i}_halfWid'+'th,\x20light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20calcDi'+'skLightVal'+'ues(light{'+'i}_positio'+'n,\x20light{i'+'}_halfWidt'+'h,\x20light{i'+'}_halfHeig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcS'+'phereLight'+'Values(lig'+'ht{i}_posi'+'tion,\x20ligh'+'t{i}_halfW'+'idth,\x20ligh'+'t{i}_halfH'+'eight);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'lighting\x20-'+'\x20LTC\x20light'+'s\x20do\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20'+'into\x20atten'+'uation\x20tha'+'t\x20affects\x20'+'specular\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20atten'+'Diffuse\x20-\x20'+'separate\x20d'+'iffuse\x20att'+'enuation\x20f'+'or\x20non-pun'+'ctual\x20ligh'+'t\x20sources\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20NB:\x20'+'A\x20better\x20a'+'pproximati'+'on\x20perhaps'+'\x20using\x20wra'+'p\x20lighting'+'\x20could\x20be\x20'+'implemente'+'d\x20here\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20atten'+'Diffuse\x20=\x20'+'getLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dL'+'ightDirNor'+'mW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x2016.0\x20i'+'s\x20a\x20consta'+'nt\x20that\x20is'+'\x20in\x20getFal'+'loffInvSqu'+'ared()\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20==\x20'+'RECT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getRectL'+'ightDiffus'+'e(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20lightD'+'irW,\x20dLigh'+'tDirNormW)'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20attenDiff'+'use\x20=\x20getD'+'iskLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20li'+'ghtDirW,\x20d'+'LightDirNo'+'rmW)\x20*\x2016.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getSpher'+'eLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20ligh'+'tDirW,\x20dLi'+'ghtDirNorm'+'W)\x20*\x2016.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20one\x20'+'parameter\x20'+'is\x20unused\x20'+'for\x20punctu'+'al\x20lights\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20*=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20vec3('+'0.0),\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20apply\x20th'+'e\x20shadow\x20a'+'ttenuation'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'CASTSHADOW'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadow{i'+'}(vec3(0.0'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adow{i}(li'+'ghtDirW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20App')+('ly\x20shadow\x20'+'intensity\x20'+'to\x20the\x20sha'+'dow\x20value\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20=\x20mix'+'(1.0,\x20shad'+'ow,\x20light{'+'i}_shadowI'+'ntensity);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20*=\x20'+'shadow;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_SHADOW_'+'CATCHER)\x20&'+'&\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20accum'+'ulate\x20shad'+'ows\x20for\x20di'+'rectional\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ShadowCatc'+'her\x20*=\x20sha'+'dow;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20-\x20they\x20do'+'\x20not\x20mix\x20d'+'iffuse\x20lig'+'hting\x20into'+'\x20specular\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20('+'(attenDiff'+'use\x20*\x20dAtt'+'en)\x20*\x20ligh'+'tColor)\x20*\x20'+'(1.0\x20-\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(atte'+'nDiffuse\x20*'+'\x20dAtten)\x20*'+'\x20lightColo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20punctua'+'l\x20light\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(AR'+'EA_LIGHTS)'+'\x20&&\x20define'+'d(LIT_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(dAtt'+'en\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20litA'+'rgs_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20spec'+'ular\x20light'+'ing\x0a\x20\x20\x20\x20#i'+'fdef\x20LIGHT')+('{i}AFFECT_'+'SPECULARIT'+'Y\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x20//\x20area\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccSpecula'+'rLight\x20+=\x20'+'ccLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_clear'+'coat_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20ccLTC'+'SpecFres\x20*'+'\x20getDiskLi'+'ghtSpecula'+'r(litArgs_'+'clearcoat_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20+'+'=\x20ccLTCSpe'+'cFres\x20*\x20ge'+'tSphereLig'+'htSpecular'+'(litArgs_c'+'learcoat_w'+'orldNormal'+',\x20dViewDir'+'W)\x20*\x20dAtte'+'n\x20*\x20lightC'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20dLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp')+('ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20SPHERE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20d'+'LTCSpecFre'+'s\x20*\x20getSph'+'ereLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20punctual'+'\x20light\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20is\x20fres'+'nel\x20needed'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20LI'+'T_FRESNEL_'+'MODEL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'GHT{i}FRES'+'NEL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20hal'+'fDirW\x20=\x20no'+'rmalize(-d'+'LightDirNo'+'rmW\x20+\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20if\x20LTC\x20'+'lights\x20are'+'\x20present,\x20'+'specular\x20m'+'ust\x20be\x20acc'+'umulated\x20w'+'ith\x20specul'+'arity\x20(spe'+'cularity\x20i'+'s\x20pre\x20mult'+'iplied\x20by\x20'+'punctual\x20l'+'ight\x20fresn'+'el)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtspecula'+'rCC\x20=\x20getL'+'ightSpecul'+'ar(halfDir'+'W,\x20ccReflD'+'irW,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_clearcoat'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tspecularC'+'C\x20*=\x20getFr'+'esnelCC(do'+'t(dViewDir'+'W,\x20halfDir'+'W));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20lightsp'+'ecularCC;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_sheen_glo'+'ss)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20lightSpec'+'ular\x20=\x20get'+'LightSpecu'+'lar(halfDi'+'rW,\x20dReflD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightSpecu'+'lar\x20*=\x20get'+'Fresnel(do'+'t(dViewDir'+'W,\x20halfDir'+'W),\x20litArg'+'s_gloss,\x20l'+'itArgs_spe'+'cularity,\x20'+'iridescenc'+'eFresnel,\x20'+'litArgs_ir'+'idescence_'+'intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20*=\x20g'+'etFresnel('+'dot(dViewD'+'irW,\x20halfD'+'irW),\x20litA'+'rgs_gloss,'+'\x20litArgs_s')+('pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20lightSp'+'ecular\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20+=\x20light'+'Specular;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a#en'+'dif\x0a'),R1='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20vec3\x20'+'getShadowS'+'ampleCoord'+'{i}(mat4\x20s'+'hadowTrans'+'form,\x20vec4'+'\x20shadowPar'+'ams,\x20vec3\x20'+'worldPosit'+'ion,\x20vec3\x20'+'lightPos,\x20'+'inout\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'vec3\x20norma'+'l)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'urfacePosi'+'tion\x20=\x20wor'+'ldPosition'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT{i}_SHA'+'DOW_SAMPLE'+'_POINT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20len'+'gth(lightD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightDir'+'\x20=\x20surface'+'Position\x20-'+'\x20lightPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20lightD'+'ir;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_S'+'OURCE_ZBUF'+'FER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+('NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_NORMAL_O'+'FFSET\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20distScal'+'e\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20abs'+'(dot(vPosi'+'tionW\x20-\x20li'+'ghtPos,\x20li'+'ghtDirNorm'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20posi'+'tionInShad'+'owSpace\x20=\x20'+'shadowTran'+'sform\x20*\x20ve'+'c4(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM'+'PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20/=\x20po'+'sitionInSh'+'adowSpace.')+('w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20posit'+'ionInShado'+'wSpace.xy\x20'+'/=\x20positio'+'nInShadowS'+'pace.w;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20po'+'sitionInSh'+'adowSpace.'+'z\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20thi'+'s\x20is\x20curre'+'ntly\x20unuse'+'d\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20SHADOW_SA'+'MPLE_Z_BIA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20positionI'+'nShadowSpa'+'ce.z\x20+=\x20ge'+'tShadowBia'+'s(shadowPa'+'rams.x,\x20sh'+'adowParams'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20positi'+'onInShadow'+'Space.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20surfaceP'+'osition;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'evaluation'+'\x20function\x0a'+'\x20\x20\x20\x20float\x20'+'getShadow{'+'i}(vec3\x20li'+'ghtDirW)\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20shado'+'w\x20cascades'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_CASCADES'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20sel'+'ect\x20shadow'+'\x20cascade\x20m'+'atrix\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'t\x20cascadeI'+'ndex\x20=\x20get'+'ShadowCasc'+'adeIndex(l'+'ight{i}_sh'+'adowCascad'+'eDistances'+',\x20light{i}'+'_shadowCas'+'cadeCount)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'_SHADOW_CA'+'SCADE_BLEN'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'scadeIndex'+'\x20=\x20ditherS'+'hadowCasca'+'deIndex(ca'+'scadeIndex'+',\x20light{i}'+'_shadowCas'+'cadeDistan'+'ces,\x20light')+('{i}_shadow'+'CascadeCou'+'nt,\x20light{'+'i}_shadowC'+'ascadeBlen'+'d);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mat4'+'\x20shadowMat'+'rix\x20=\x20ligh'+'t{i}_shado'+'wMatrixPal'+'ette[casca'+'deIndex];\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t4\x20shadowM'+'atrix\x20=\x20li'+'ght{i}_sha'+'dowMatrix;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20DIRE'+'CTIONAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20light'+'\x20does\x20not\x20'+'have\x20a\x20pos'+'ition\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20light'+'{i}_shadow'+'Params,\x20vP'+'ositionW,\x20'+'vec3(0.0),'+'\x20lightDirW'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20shad'+'owCoord\x20=\x20'+'getShadowS'+'ampleCoord'+'{i}(shadow'+'Matrix,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20vPosition'+'W,\x20light{i'+'}_position'+',\x20lightDir'+'W,\x20dLightD'+'irNormW,\x20d'+'VertexNorm'+'alW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Fade\x20di'+'rectional\x20'+'shadow\x20at\x20'+'the\x20far\x20di'+'stance\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadowCoord'+'\x20=\x20fadeSha'+'dow(shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owCascadeD'+'istances);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20--'+'---\x20sample'+'\x20the\x20shado'+'w\x20-----\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x20/'+'/\x20-----\x20di'+'rectional\x20'+'light\x20----')+('-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wVSM16(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x205'+'.54);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20VSM_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowVSM32('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x2015.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCS'+'S_32F\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20sh'+'adowSearch'+'Area\x20=\x20vec'+'2(length(l'+'ight{i}_ha'+'lfWidth),\x20'+'length(lig'+'ht{i}_half'+'Height))\x20*'+'\x20light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCSS(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20light{i}_'+'cameraPara'+'ms,\x20shadow'+'SearchArea'+',\x20lightDir'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20light{i}'+'_softShado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF1_16'+'F\x20||\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'1_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF3'+'_16F\x20||\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCF3x3(SH'+'ADOWMAP_PA'+'SS(light{i'+'}_shadowMa'+'p),\x20shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owParams);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF5_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF5_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(SHADOWMAP'+'_PASS(ligh'+'t{i}_shado'+'wMap),\x20sha'+'dowCoord,\x20'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20S'+'POT\x20//\x20---'+'--\x20spot\x20li'+'ght\x20-----\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20V'+'SM_16F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potVSM16(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x205.54,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowSpo')+('tVSM32(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x201'+'5.0,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20shad'+'owSearchAr'+'ea\x20=\x20vec2('+'length(lig'+'ht{i}_half'+'Width),\x20le'+'ngth(light'+'{i}_halfHe'+'ight))\x20*\x20l'+'ight{i}_sh'+'adowSearch'+'Area;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(lig'+'ht{i}_shad'+'owSearchAr'+'ea);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotPCSS('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x20light{i}'+'_cameraPar'+'ams,\x20shado'+'wSearchAre'+'a,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF1_1'+'6F\x20||\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potPCF1x1('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(SHA')+('DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F5_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'5x5(SHADOW'+'MAP_PASS(l'+'ight{i}_sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20light{i'+'}_shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x20//\x20'+'-----\x20omni'+'\x20light\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCSS_32F'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P'+'UNCTUAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(len'+'gth(light{'+'i}_halfWid'+'th),\x20lengt'+'h(light{i}'+'_halfHeigh'+'t))\x20*\x20ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2(light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20shadowSe'+'archArea,\x20'+'lightDirW)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_')+('32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF3_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF3_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowOmniPC'+'F3x3(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),O1='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20areaLi'+'ghtsLutTex'+'1;\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20sampler2D'+'\x20areaLight'+'sLutTex2;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCSSPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22shadow'+'SoftPS\x22\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(SH'+'ADOW_KIND_'+'VSM)\x0a\x20\x20\x20\x20#'+'include\x20\x22s'+('hadowEVSMP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_LINEA'+'R\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fall'+'offLinearP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22fal'+'loffInvSqu'+'aredPS\x22\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20LIT_COD'+'E_LIGHTS_P'+'OINT\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'ightDirPoi'+'ntPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22spot'+'PS\x22\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_CODE_CO'+'OKIE\x0a\x20\x20\x20\x20#'+'include\x20\x22c'+'ookiePS\x22\x0a#'+'endif\x0a\x0a//\x20'+'clustered\x20'+'lighting\x0a#'+'ifdef\x20LIT_'+'CLUSTERED_'+'LIGHTS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22clustered'+'LightPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHT_'+'COUNT\x20>\x200\x0a'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20genera'+'te\x20shadow\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionSha'+'dowPS,\x20LIG'+'HT_COUNT\x22\x0a'+'\x0a\x20\x20\x20\x20//\x20LO'+'OP\x20-\x20gener'+'ate\x20light\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionLig'+'htPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a'),F1='\x0avoid\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20vec3\x20li'+'ghtmap,\x20\x0a\x20'+'\x20\x20\x20vec3\x20di'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20worldNo'+'rmal,\x20\x0a\x20\x20\x20'+'\x20vec3\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'vec3\x20refle'+'ctionDir,\x20'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20'+'\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20vertexNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'mat3\x20tbn\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x20\x0a\x20\x20'+'\x20\x20float\x20ir'+'idescenceI'+'ntensity\x0a#'+'endif\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'rectional\x20'+'lightmap\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x20&'+'&\x20defined('+'LIT_DIR_LI'+'GHTMAP)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dot(dir,\x20'+'dir)\x20<\x200.0'+'001)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'lightmap;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20vligh'+'t\x20=\x20satura'+'te(dot(dir'+',\x20-vertexN'+'ormal));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20fli'+'ght\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20nl'+'ight\x20=\x20(fl'+'ight\x20/\x20max'+'(vlight,\x200'+'.01))\x20*\x200.'+'5;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p\x20*\x20nlight'+'\x20*\x202.0;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20half'+'Dir\x20=\x20norm'+'alize(-dir'+'\x20+\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'specularLi'+'ght\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'*=\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20getFre'+'snel(dot(v'+'iewDir,\x20ha'+'lfDir),\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceInt'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'+=\x20specula'+'rLight;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20non-dire'+'ctional\x20li'+'ghtmap\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),N1='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'vec3\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_d'+'irLightMap'+';\x0a#endif\x0a\x0a'+'void\x20getLi'+'ghtMap()\x20{'+'\x0a\x0a\x20\x20\x20\x20dLig'+'htmap\x20=\x20ve'+'c3(1.0);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_LIGHT'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dLi'+'ghtmap\x20*=\x20'+'{STD_LIGHT'+'_TEXTURE_D'+'ECODE}(tex'+'ture2DBias'+'({STD_LIGH'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'LIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_LIGHTM'+'AP_DIR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dir\x20=\x20'+'texture2DB'+'ias(textur'+'e_dirLight'+'Map,\x20{STD_'+'LIGHT_TEXT'+'URE_UV},\x20t'+'extureBias'+').xyz\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dir'+'Dot\x20=\x20dot('+'dir,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightm'+'apDir\x20=\x20(d'+'irDot\x20>\x200.'+'001)\x20?\x20dir'+'\x20/\x20sqrt(di'+'rDot)\x20:\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_LIGHT_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightma'+'p\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_LIGHT_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a}\x0a',k1='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'float\x20calc'+'LightSpecu'+'lar(float\x20'+'gloss,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20h,\x20vec'+'3\x20lightDir'+'Norm,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20float\x20PI'+'\x20=\x203.14159'+'2653589793'+';\x0a\x20\x20\x20\x20floa'+'t\x20roughnes'+'s\x20=\x20max((1'+'.0\x20-\x20gloss'+')\x20*\x20(1.0\x20-'+'\x20gloss),\x200'+'.001);\x0a\x20\x20\x20'+'\x20float\x20alp'+'haRoughnes'+'s\x20=\x20roughn'+'ess\x20*\x20roug'+'hness;\x0a\x20\x20\x20'+'\x20float\x20ani'+'sotropy\x20=\x20'+'dAnisotrop'+'y;\x0a\x20\x20\x20\x20vec'+'2\x20directio'+'n\x20=\x20dAniso'+'tropyRotat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'float\x20at\x20='+'\x20mix(alpha'+'Roughness,'+'\x201.0,\x20anis'+'otropy\x20*\x20a'+'nisotropy)'+';\x0a\x20\x20\x20\x20floa'+'t\x20ab\x20=\x20cla'+'mp(alphaRo'+'ughness,\x200'+'.001,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20anisotro'+'picT\x20=\x20nor'+'malize(tbn'+'\x20*\x20vec3(di'+'rection,\x200'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicB\x20=\x20'+'normalize('+'cross(tbn['+'2],\x20anisot'+'ropicT));\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20NoH\x20=\x20dot'+'(worldNorm'+'al,\x20h);\x0a\x20\x20'+'\x20\x20float\x20To'+'H\x20=\x20dot(an'+'isotropicT'+',\x20h);\x0a\x20\x20\x20\x20'+'float\x20BoH\x20'+'=\x20dot(anis'+'otropicB,\x20'+'h);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20a2\x20=\x20'+'at\x20*\x20ab;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20vec3(ab\x20'+'*\x20ToH,\x20at\x20'+'*\x20BoH,\x20a2\x20'+'*\x20NoH);\x0a\x20\x20'+'\x20\x20float\x20v2'+'\x20=\x20dot(v,\x20'+'v);\x0a\x20\x20\x20\x20fl'+'oat\x20w2\x20=\x20a'+'2\x20/\x20v2;\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'ToV\x20=\x20dot('+'anisotropi'+'cT,\x20viewDi'+'r);\x0a\x20\x20\x20\x20fl'+'oat\x20BoV\x20=\x20'+'dot(anisot'+'ropicB,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20float\x20To'+'L\x20=\x20dot(an'+'isotropicT'+(',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20Bo'+'L\x20=\x20dot(an'+'isotropicB'+',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20No'+'V\x20=\x20dot(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20float'+'\x20NoL\x20=\x20dot'+'(worldNorm'+'al,\x20-light'+'DirNorm);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20lambdaV\x20='+'\x20NoL\x20*\x20len'+'gth(vec3(a'+'t\x20*\x20ToV,\x20a'+'b\x20*\x20BoV,\x20N'+'oV));\x0a\x20\x20\x20\x20'+'float\x20lamb'+'daL\x20=\x20NoV\x20'+'*\x20length(v'+'ec3(at\x20*\x20T'+'oL,\x20ab\x20*\x20B'+'oL,\x20NoL));'+'\x0a\x20\x20\x20\x20float'+'\x20G\x20=\x200.5\x20/'+'\x20(lambdaV\x20'+'+\x20lambdaL)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20D\x20*\x20G;'+'\x0a}\x0a\x0afloat\x20'+'getLightSp'+'ecular(vec'+'3\x20h,\x20vec3\x20'+'reflDir,\x20v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'float\x20glos'+'s,\x20mat3\x20tb'+'n)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'LightSpecu'+'lar(gloss,'+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20h,\x20ligh'+'tDirNorm,\x20'+'tbn);\x0a}\x0a'),U1='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afloa'+'t\x20calcLigh'+'tSpecular('+'float\x20glos'+'s,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20h)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20nh\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20specPow\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x20//\x20gloss'+'iness\x20is\x20l'+'inear,\x20pow'+'er\x20is\x20not;'+'\x200\x20-\x202048\x0a'+'\x0a\x20\x20\x20\x20//\x20Ha'+'ck:\x20On\x20Mac'+'\x20OS\x20X,\x20cal'+'ling\x20pow\x20w'+'ith\x20zero\x20f'+'or\x20the\x20exp'+'onent\x20gene'+'rates\x20hide'+'ous\x20artifa'+'cts\x20so\x20bia'+'s\x20up\x20a\x20lit'+'tle\x0a\x20\x20\x20\x20sp'+'ecPow\x20=\x20ma'+'x(specPow,'+'\x200.0001);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(nh,\x20'+'specPow)\x20*'+'\x20(specPow\x20'+'+\x202.0)\x20/\x208'+'.0;\x0a}\x0a\x0aflo'+'at\x20getLigh'+'tSpecular('+'vec3\x20h,\x20ve'+'c3\x20reflDir'+',\x20vec3\x20wor'+'ldNormal,\x20'+'vec3\x20viewD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m,\x20float\x20g'+'loss,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',B1='\x0a\x0afloat\x20sh'+'eenD(vec3\x20'+'normal,\x20ve'+'c3\x20h,\x20floa'+'t\x20roughnes'+'s)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20PI\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20f'+'loat\x20invR\x20'+'=\x201.0\x20/\x20(r'+'oughness\x20*'+'\x20roughness'+');\x0a\x20\x20\x20\x20flo'+'at\x20cos2h\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20*=\x20'+'cos2h;\x0a\x20\x20\x20'+'\x20float\x20sin'+'2h\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'float\x20shee'+'nV(vec3\x20no'+'rmal,\x20vec3'+'\x20viewDir,\x20'+'vec3\x20light'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20NoV\x20=\x20'+'max(dot(no'+'rmal,\x20view'+'Dir),\x200.00'+'0001);\x0a\x20\x20\x20'+'\x20float\x20NoL'+'\x20=\x20max(dot'+'(normal,\x20l'+'ight),\x200.0'+'00001);\x0a\x20\x20'+'\x20\x20return\x201'+'.0\x20/\x20(4.0\x20'+'*\x20(NoL\x20+\x20N'+'oV\x20-\x20NoL\x20*'+'\x20NoV));\x0a}\x0a'+'\x0afloat\x20get'+'LightSpecu'+'larSheen(v'+'ec3\x20h,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'irNorm,\x20fl'+'oat\x20sheenG'+'loss)\x20{\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20float\x20V\x20'+'=\x20sheenV(w'+'orldNormal'+',\x20viewDir,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20return\x20D\x20'+'*\x20V;\x0a}\x0a',z1='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afloat\x20lin'+'earizeDept'+'hWithParam'+'s(float\x20z,'+'\x20vec4\x20came'+'raParams)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'cameraPara'+'ms.w\x20==\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20(c'+'ameraParam'+'s.z\x20*\x20came'+'raParams.y'+')\x20/\x20(camer'+'aParams.y\x20'+'+\x20z\x20*\x20(cam'+'eraParams.'+'z\x20-\x20camera'+'Params.y))'+';\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20came'+'raParams.z'+'\x20+\x20z\x20*\x20(ca'+'meraParams'+'.y\x20-\x20camer'+'aParams.z)'+';\x0a}\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec4\x20ca'+'mera_param'+'s;\x20//\x20x:\x201'+'\x20/\x20camera_'+'far,\x20\x20\x20\x20\x20\x20'+'y:\x20camera_'+'far,\x20\x20\x20\x20\x20z'+':\x20camera_n'+'ear,\x20\x20\x20\x20\x20\x20'+'\x20\x20w:\x20is_or'+'tho\x0a#endif'+'\x0a\x0afloat\x20li'+'nearizeDep'+'th(float\x20z'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20linea'+'rizeDepthW'+'ithParams('+'z,\x20camera_'+'params);\x0a}'+'\x0a#endif\x0a',V1='\x0avoid\x20eval'+'uateBacken'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'SSAO\x20durin'+'g\x20lighting'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_SSAO'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ao\x20'+'*=\x20texture'+'2DLod(ssao'+'Texture,\x20g'+'l_FragCoor'+'d.xy\x20*\x20ssa'+'oTextureSi'+'zeInv,\x200.0'+').r;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20transf'+'orm\x20tangen'+'t\x20space\x20no'+'rmals\x20to\x20w'+'orld\x20space'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_NEED'+'S_NORMAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etReflDir('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20litArgs_'+'gloss,\x20dTB'+'N);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W\x20=\x20normal'+'ize(-refle'+'ct(dViewDi'+'rW,\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR_OR'+'_REFLECTIO'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20f'+'0\x20=\x201.0\x20/\x20'+'litArgs_io'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20f0\x20=\x20'+'(f0\x20-\x201.0)'+'\x20/\x20(f0\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20f0\x20'+'*=\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20i'+'ridescence'+'Fresnel\x20=\x20'+'getIridesc'+('ence(satur'+'ate(dot(dV'+'iewDirW,\x20l'+'itArgs_wor'+'ldNormal))'+',\x20litArgs_'+'specularit'+'y,\x20litArgs'+'_iridescen'+'ce_thickne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'mbient\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20addAmbie'+'nt(litArgs'+'_worldNorm'+'al);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20dDiffuse'+'Light\x20*\x20(1'+'.0\x20-\x20litAr'+'gs_specula'+'rity);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20move\x20a'+'mbient\x20col'+'or\x20out\x20of\x20'+'diffuse\x20(u'+'sed\x20by\x20Lig'+'htmapper,\x20'+'to\x20multipl'+'y\x20ambient\x20'+'color\x20by\x20a'+'ccumulated'+'\x20AO)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SEPARA'+'TE_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dA'+'mbientLigh'+'t\x20=\x20dDiffu'+'seLight;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_O'+'LD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20*=\x20mate'+'rial_ambie'+'nt;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OCCLUD'+'E_DIRECT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20occludeDi'+'ffuse(litA'+'rgs_ao);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTMAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'dLightMap('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmap,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_lightmap'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dViewDir'+'W,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dRef'+'lDirW,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('litArgs_gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dTBN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTING\x20'+'||\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tionCC(ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_glo'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_FRESNE'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccFresne'+'l\x20=\x20getFre'+'snelCC(dot'+'(dViewDirW'+',\x20litArgs_'+'clearcoat_'+'worldNorma'+'l));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccRef'+'lection\x20*='+'\x20ccFresnel'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccFres'+'nel\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20*=\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SH'+'EEN\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'addReflect'+'ionSheen(l'+'itArgs_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20litArgs_s'+'heen_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Fr')+('esnel\x20has\x20'+'to\x20be\x20appl'+'ied\x20to\x20ref'+'lections\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tion(dRefl'+'DirW,\x20litA'+'rgs_gloss)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_FRES'+'NEL_MODEL\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dRe'+'flection.r'+'gb\x20*=\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_iri'+'descence_i'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.rgb\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n.rgb\x20*=\x20l'+'itArgs_spe'+'cularityFa'+'ctor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20ARE'+'A_LIGHTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20has\x20to\x20'+'be\x20accumul'+'ated\x20diffe'+'rently\x20if\x20'+'we\x20want\x20ar'+'ea\x20lights\x20'+'to\x20look\x20co'+'rrect\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dS'+'pecularLig'+'ht\x20*=\x20litA'+'rgs_specul'+'arity;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'valuate\x20ma'+'terial\x20bas'+'ed\x20area\x20li'+'ghts\x20data,')+('\x20shared\x20by'+'\x20all\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20calcLTC'+'LightValue'+'s(litArgs_'+'gloss,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_gl'+'oss,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20LOOP\x20-\x20e'+'valuate\x20al'+'l\x20non-clus'+'tered\x20ligh'+'ts\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT_COUNT\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tEvaluatio'+'nPS,\x20LIGHT'+'_COUNT\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clust'+'ered\x20light'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addClust'+'eredLights'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20dReflDi'+'rW,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_CLEA'+'RCOAT)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_gl'+'oss,\x20litAr'+'gs_specula'+'rity,\x20dVer'+'texNormalW'+',\x20dTBN,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_gloss,'+'\x20litArgs_s'+'heen_gloss'+',\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20AR'+'EA_LIGHTS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity\x20=\x20ve'+'c3(1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dViewD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'thickness,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_albe'+'do,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_t'+'ransmissio'+'n,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_disp'+'ersion\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_iridesc'+'ence_inten'+'sity\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20ambient'+'\x20occlusion'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_OC')+('CLUDE_DIRE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20occlu'+'deDiffuse('+'litArgs_ao'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIT_OCCLU'+'DE_SPECULA'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeS'+'pecular(li'+'tArgs_glos'+'s,\x20litArgs'+'_ao,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULARIT'+'Y_FACTOR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20*=\x20litAr'+'gs_specula'+'rityFactor'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIT_OPACI'+'TY_FADES_S'+'PECULAR)\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIT_BLEN'+'D_TYPE\x20==\x20'+'NORMAL\x20||\x20'+'LIT_BLEND_'+'TYPE\x20==\x20PR'+'EMULTIPLIE'+'D\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20specLum\x20='+'\x20dot((dSpe'+'cularLight'+'\x20+\x20dReflec'+'tion.rgb\x20*'+'\x20dReflecti'+'on.a),\x20vec'+'3(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecLum\x20+=\x20'+'dot(ccSpec'+'ularLight\x20'+'*\x20litArgs_'+'clearcoat_'+'specularit'+'y\x20+\x20ccRefl'+'ection\x20*\x20l'+'itArgs_cle'+'arcoat_spe'+'cularity,\x20'+'vec3(\x200.21'+'26,\x200.7152'+',\x200.0722\x20)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_opacity\x20'+'=\x20clamp(li'+'tArgs_opac'+'ity\x20+\x20gamm'+'aCorrectIn'+'put(specLu'+'m),\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_op'+'acity\x20*=\x20m'+'aterial_al'+'phaFade;\x0a\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nd\x20chunks\x20'+'-\x20when\x20bak'+'ing\x20lightm'+'ap\x0a\x20\x20\x20\x20#if'+'def\x20LIT_LI')+('GHTMAP_BAK'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22bak'+'eLmEndPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_LIGHTM'+'AP_BAKING_'+'DIR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22bake'+'DirLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20en'+'d\x20chunks\x20-'+'\x20in\x20all\x20ot'+'her\x20cases\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22en'+'dPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22outputA'+'lphaPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_MSDF\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20applyMs'+'df(gl_Frag'+'Color);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22output'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22de'+'bugOutputP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HADOW_CATC'+'HER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20when\x20the'+'\x20shadow\x20ca'+'tcher\x20is\x20e'+'nabled\x20-\x20a'+'ccumulated'+'\x20shadows\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20=\x20vec3'+'(dShadowCa'+'tcher);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a'),G1='\x0a\x0a//\x20globa'+'ls\x0avec3\x20sR'+'eflection;'+'\x0avec3\x20dVer'+'texNormalW'+';\x0avec3\x20dTa'+'ngentW;\x0ave'+'c3\x20dBinorm'+'alW;\x0avec3\x20'+'dViewDirW;'+'\x0avec3\x20dRef'+'lDirW;\x0avec'+'3\x20ccReflDi'+'rW;\x0a\x0a//\x20Pe'+'r-light\x20te'+'mporaries\x0a'+'vec3\x20dLigh'+'tDirNormW;'+'\x0afloat\x20dAt'+'ten;\x0a\x0a//\x20O'+'utputs\x0amat'+'3\x20dTBN;\x0ave'+'c4\x20dReflec'+'tion;\x0avec3'+'\x20dDiffuseL'+'ight;\x0avec3'+'\x20dSpecular'+'Light;\x0aflo'+'at\x20ccFresn'+'el;\x0avec3\x20c'+'cReflectio'+'n;\x0avec3\x20cc'+'SpecularLi'+'ght;\x0afloat'+'\x20ccSpecula'+'rityNoFres'+';\x0avec3\x20sSp'+'ecularLigh'+'t;\x0a\x0a//\x20FRA'+'GMENT\x20SHAD'+'ER\x20INPUTS:'+'\x20UNIFORMS\x0a'+'\x0a#ifdef\x20LI'+'T_DISPERSI'+'ON\x0a\x20\x20\x20\x20uni'+'form\x20float'+'\x20material_'+'dispersion'+';\x0a#endif\x0a\x0a'+'#ifndef\x20LI'+'T_OPACITY_'+'FADES_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_alphaFad'+'e;\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_SSAO\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20s'+'saoTexture'+';\x0a\x20\x20\x20\x20unif'+'orm\x20vec2\x20s'+'saoTexture'+'SizeInv;\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20a'+'nd\x20shadowi'+'ng\x20declara'+'tions\x0a\x0a#if'+'def\x20LIT_SH'+'ADOW_CATCH'+'ER\x0a\x20\x20\x20\x20//\x20'+'a\x20variable'+'\x20to\x20accumu'+'late\x20shado'+'ws\x20for\x20sha'+'dow\x20catche'+'r\x20material'+'s\x0a\x20\x20\x20\x20floa'+'t\x20dShadowC'+'atcher\x20=\x201'+'.0;\x0a#endif'+'\x0a\x0a//\x20LOOP\x20'+'-\x20uniform\x20'+'declaratio'+'ns\x20for\x20all'+'\x20non-clust'+'ered\x20light'+'s\x0a#if\x20LIGH'+'T_COUNT\x20>\x20'+'0\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDeclarati'+'onPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+('\x20#if\x20LIT_F'+'RESNEL_MOD'+'EL\x20==\x20NONE'+'\x20&&\x20!defin'+'ed(LIT_REF'+'LECTIONS)\x20'+'&&\x20!define'+'d(LIT_DIFF'+'USE_MAP)\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a//\x20lightm'+'ap\x20baking\x0a'+'#ifdef\x20STD'+'_LIGHTMAP_'+'DIR\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20bakeDir;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_L'+'IGHTMAP_BA'+'KING_ADD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20ambie'+'ntBakeOccl'+'usionContr'+'ast;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20ambient'+'BakeOcclus'+'ionBrightn'+'ess;\x0a#endi'+'f\x0a'),H1='\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4(0'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ccS'+'pecularLig'+'ht\x20=\x20vec3('+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'NONE_SLICE'+'_MODE\x20==\x20S'+'LICED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22startN'+'ineSlicedP'+'S\x22\x0a\x20\x20\x20\x20#el'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20TILE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'startNineS'+'licedTiled'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_NEEDS_NOR'+'MAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW\x20=\x20n'+'ormalize(v'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'TANGENTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_HEI'+'GHTS)\x20||\x20d'+'efined(LIT'+'_USE_NORMA'+'LS)\x20||\x20def'+'ined(LIT_U'+'SE_CLEARCO'+'AT_NORMALS'+')\x20||\x20defin'+'ed(LIT_GGX'+'_SPECULAR)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dTa'+'ngentW\x20=\x20v'+'TangentW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dBin'+'ormalW\x20=\x20v'+'BinormalW;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20getVie'+'wDir();\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_TB'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getTBN'+'(dTangentW'+',\x20dBinorma'+'lW,\x20dVerte'+'xNormalW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_TWO_S'+'IDED_LIGHT'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'handleTwoS'+'idedLighti'+'ng();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20i'+'nvoke\x20fron'+'tend\x20funct'+'ions\x0a\x20\x20\x20\x20e'+'valuateFro'+'ntend();\x0a\x0a'+('\x20\x20\x20\x20#inclu'+'de\x20\x22debugP'+'rocessFron'+'tendPS\x22\x0a\x0a\x20'+'\x20\x20\x20evaluat'+'eBackend()'+';\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a'),W1='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20vec3\x20mate'+'rial_ambie'+'nt;\x0a\x0a#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTING\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightSp'+'ecularAnis'+'oGGXPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightS'+'pecularBli'+'nnPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'combinePS\x22'+'\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tmapAddPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'ADD_AMBIEN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ambi'+'entPS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIT_MSDF'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22msdfP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'include\x20\x22v'+'iewDirPS\x22\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flDirAniso'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a//\x20li'+'ghting\x20fun'+'ctionality')+('\x0a#include\x20'+'\x22lightingP'+'S\x22\x0a\x0a'),$1='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',X1='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',q1='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec4\x20ve'+'rtex_color'+';\x0a#endif\x0a\x0a'+'#ifdef\x20NIN'+'ESLICED\x0a\x0a\x20'+'\x20\x20\x20varying'+'\x20vec2\x20vMas'+'k;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'vTiledUv;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20v'+'ec2\x20outerS'+'cale;\x0a\x20\x20\x20\x20'+'uniform\x20me'+'diump\x20vec4'+'\x20atlasRect'+';\x0a\x0a#endif\x0a'+'\x0avec3\x20dPos'+'itionW;\x0ama'+'t4\x20dModelM'+'atrix;\x0a\x0a#i'+'nclude\x20\x22tr'+'ansformCor'+'eVS\x22\x0a\x0a#ifd'+'ef\x20UV0\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'c2\x20vertex_'+'texCoord1;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22uv1VS'+'\x22\x0a#endif\x0a\x0a'+'\x0a#ifdef\x20LI'+'NEAR_DEPTH'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20#d'+'efine\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'transformV'+'S\x22\x0a\x0a#ifdef'+'\x20NORMALS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22normalC'+'oreVS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22normalVS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20TANG'+'ENTS\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_tangent;\x0a'+'#endif\x0a\x0a//'+'\x20expand\x20un'+'iforms\x20for'+'\x20uv\x20transf'+'orms\x0a#incl'+'ude\x20\x22uvTra'+'nsformUnif'+'ormsPS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'#ifdef\x20MSD'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22msdf'+'VS\x22\x0a#endif'+'\x0a\x0a#include'+'\x20\x20\x22litUser'+'CodeVS\x22\x0a\x0av'+'oid\x20main(v'+'oid)\x20{\x0a\x0a\x20\x20'+'\x20\x20#include'+('\x20\x22litUserM'+'ainStartVS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'default\x20po'+'int\x20size\x20t'+'o\x201\x20in\x20cas'+'e\x20the\x20shad'+'er\x20is\x20used'+'\x20with\x20poin'+'ts\x0a\x20\x20\x20\x20gl_'+'PointSize\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20getP'+'osition();'+'\x0a\x20\x20\x20\x20vPosi'+'tionW\x20=\x20ge'+'tWorldPosi'+'tion();\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'NORMALS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vNor'+'malW\x20=\x20get'+'Normal();\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20TANGENT'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vTangentW\x20'+'=\x20normaliz'+'e(dNormalM'+'atrix\x20*\x20ve'+'rtex_tange'+'nt.xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vBi'+'normalW\x20=\x20'+'cross(vNor'+'malW,\x20vTan'+'gentW)\x20*\x20v'+'ertex_tang'+'ent.w;\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(GGX_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3(0,\x201'+',\x200));\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV0\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv0'+'\x20=\x20getUv0('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20UV'+'0_UNMODIFI'+'ED\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv1\x20=\x20ge'+'tUv1();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20UV1_UNM'+'ODIFIED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vUv1\x20=\x20uv1'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20expa'+'nd\x20code\x20fo'+'r\x20uv\x20trans'+'forms\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'uvTransfor'+'mVS,\x20UV_TR'+'ANSFORMS_C'+'OUNT\x22\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20VE'+'RTEX_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition')+(',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vPosi'+'tionW,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20M'+'SDF\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20unpackMs'+'dfParams()'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tUserMainE'+'ndVS\x22\x0a}\x0a'),j1='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20g'+'etPickOutp'+'ut();\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20P'+'REPASS_PAS'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20float'+'2vec4(vLin'+'earDepth);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a',Y1='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avec3\x20litA'+'rgs_albedo'+';\x0a\x0a//\x20Tran'+'sparency\x0af'+'loat\x20litAr'+'gs_opacity'+';\x0a\x0a//\x20Emis'+'sion\x20color'+'\x0avec3\x20litA'+'rgs_emissi'+'on;\x0a\x0a//\x20No'+'rmal\x20direc'+'tion\x20in\x20wo'+'rld\x20space\x0a'+'vec3\x20litAr'+'gs_worldNo'+'rmal;\x0a\x0a//\x20'+'Ambient\x20oc'+'clusion\x20am'+'ount,\x20rang'+'e\x20[0..1]\x0af'+'loat\x20litAr'+'gs_ao;\x0a\x0a//'+'\x20Light\x20map'+'\x20color\x0avec'+'3\x20litArgs_'+'lightmap;\x0a'+'\x0a//\x20Light\x20'+'map\x20direct'+'ion\x0avec3\x20l'+'itArgs_lig'+'htmapDir;\x0a'+'\x0a//\x20Surfac'+'e\x20metalnes'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_met'+'alness;\x0a\x0a/'+'/\x20The\x20f0\x20s'+'pecularity'+'\x20factor\x0ave'+'c3\x20litArgs'+'_speculari'+'ty;\x0a\x0a//\x20Sp'+'ecularity\x20'+'intensity\x20'+'factor,\x20ra'+'nge\x20[0..1]'+'\x0afloat\x20lit'+'Args_specu'+'larityFact'+'or;\x0a\x0a//\x20Th'+'e\x20microfac'+'et\x20glossin'+'ess\x20factor'+',\x20range\x20[0'+'..1]\x0afloat'+'\x20litArgs_g'+'loss;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_sh'+'een_gloss;'+'\x0a\x0a//\x20The\x20c'+'olor\x20of\x20th'+'e\x20f0\x20specu'+'larity\x20fac'+'tor\x20for\x20th'+'e\x20sheen\x20la'+'yer\x0avec3\x20l'+'itArgs_she'+'en_specula'+'rity;\x0a\x0a//\x20'+'Transmissi'+'on\x20factor\x20'+'(refractio'+'n),\x20range\x20'+'[0..1]\x0aflo'+'at\x20litArgs'+'_transmiss'+'ion;\x0a\x0a//\x20U'+'niform\x20thi'+'ckness\x20of\x20'+'medium,\x20us'+'ed\x20by\x20tran'+'smission,\x20'+'range\x20[0..'+'inf]\x0afloat'+'\x20litArgs_t'+'hickness;\x0a'+'\x0a//\x20Index\x20'+'of\x20refract'+'ion\x0afloat\x20'+('litArgs_io'+'r;\x0a\x0a//\x20Dis'+'persion,\x20r'+'ange\x20[0..1'+']\x20typicall'+'y,\x20but\x20can'+'\x20be\x20higher'+'\x0afloat\x20lit'+'Args_dispe'+'rsion;\x0a\x0a//'+'\x20Iridescen'+'ce\x20effect\x20'+'intensity,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_ir'+'idescence_'+'intensity;'+'\x0a\x0a//\x20Thick'+'ness\x20of\x20th'+'e\x20iridesce'+'nt\x20microfi'+'lm\x20layer,\x20'+'value\x20is\x20i'+'n\x20nanomete'+'rs,\x20range\x20'+'[0..1000]\x0a'+'float\x20litA'+'rgs_irides'+'cence_thic'+'kness;\x0a\x0a//'+'\x20The\x20norma'+'l\x20used\x20for'+'\x20the\x20clear'+'coat\x20layer'+'\x0avec3\x20litA'+'rgs_clearc'+'oat_worldN'+'ormal;\x0a\x0a//'+'\x20Intensity'+'\x20of\x20the\x20cl'+'earcoat\x20la'+'yer,\x20range'+'\x20[0..1]\x0afl'+'oat\x20litArg'+'s_clearcoa'+'t_specular'+'ity;\x0a\x0a//\x20G'+'lossiness\x20'+'of\x20clearco'+'at\x20layer,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_cle'+'arcoat_glo'+'ss;\x0a\x0a'),K1='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20te'+'xtureBias\x20'+'=\x20-1000.0;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20texture'+'Bias;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litShade'+'rArgsPS\x22\x0a',Z1='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20vec3\x20v'+'iew_positi'+'on;\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20light_ra'+'dius;\x0a#end'+'if\x0a\x0a#if\x20SH'+'ADOW_TYPE\x20'+'==\x20PCSS_32'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22line'+'arizeDepth'+'PS\x22\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'evaluateFr'+'ontend();\x0a'+'\x0a\x20\x20\x20\x20//\x20us'+'ing\x20non-st'+'andard\x20dep'+'th,\x20i.e\x20gl'+'_FragCoord'+'.z\x0a\x20\x20\x20\x20#if'+'def\x20PERSPE'+'CTIVE_DEPT'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20gl_Fra'+'gCoord.z;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SHADOW_'+'TYPE\x20==\x20PC'+'SS_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot/omn'+'i\x20shadows\x20'+'currently\x20'+'use\x20linear'+'\x20depth.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20TODO:\x20u'+'se\x20perspec'+'tive\x20depth'+'\x20for\x20spot/'+'omni\x20the\x20s'+'ame\x20way\x20as'+'\x20direction'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT_TYPE\x20'+'!=\x20DIRECTI'+'ONAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20depth\x20=\x20l'+'inearizeDe'+'pthWithPar'+'ams(depth,'+'\x20camera_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20min(di'+'stance(vie'+'w_position'+',\x20vPositio'+'nW)\x20/\x20ligh'+'t_radius,\x20'+'0.99999);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20MODI'+'FIED_DEPTH'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20VSM_'+'16F\x20||\x20SHA'+'DOW_TYPE\x20='+'=\x20VSM_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20exponen'+'t\x20=\x2015.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+('t\x20exponent'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20depth\x20=\x20'+'2.0\x20*\x20dept'+'h\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dep'+'th\x20=\x20\x20exp('+'exponent\x20*'+'\x20depth);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(dep'+'th,\x20depth*'+'depth,\x201.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'SHADOW_TYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'tore\x20depth'+'\x20into\x20R32\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.r\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ODIFIED_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20If\x20we\x20e'+'nd\x20up\x20usin'+'g\x20modified'+'\x20depth,\x20it'+'\x20needs\x20to\x20'+'be\x20explici'+'tly\x20writte'+'n\x20to\x20gl_Fr'+'agDepth\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gDepth\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20just\x20the\x20'+'simplest\x20c'+'ode,\x20color'+'\x20is\x20not\x20wr'+'itten\x20anyw'+'ay\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'}\x0a'),Q1='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0amat'+'3\x20transpos'+'eMat3(\x20con'+'st\x20in\x20mat3'+'\x20m\x20)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20tmp;'+'\x0a\x20\x20\x20\x20tmp[\x20'+'0\x20]\x20=\x20vec3'+'(\x20m[\x200\x20].x'+',\x20m[\x201\x20].x'+',\x20m[\x202\x20].x'+'\x20);\x0a\x20\x20\x20\x20tm'+'p[\x201\x20]\x20=\x20v'+'ec3(\x20m[\x200\x20'+'].y,\x20m[\x201\x20'+'].y,\x20m[\x202\x20'+'].y\x20);\x0a\x20\x20\x20'+'\x20tmp[\x202\x20]\x20'+'=\x20vec3(\x20m['+'\x200\x20].z,\x20m['+'\x201\x20].z,\x20m['+'\x202\x20].z\x20);\x0a'+'\x20\x20\x20\x20return'+'\x20tmp;\x0a}\x0a\x0av'+'ec2\x20LTC_Uv'+'(\x20const\x20in'+'\x20vec3\x20N,\x20c'+'onst\x20in\x20ve'+'c3\x20V,\x20cons'+'t\x20in\x20float'+'\x20roughness'+'\x20)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20LUT_SIZE\x20'+'=\x2064.0;\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20LUT_SC'+'ALE\x20=\x20(\x20LU'+'T_SIZE\x20-\x201'+'.0\x20)\x20/\x20LUT'+'_SIZE;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20LUT_BIA'+'S\x20=\x200.5\x20/\x20'+'LUT_SIZE;\x0a'+'\x20\x20\x20\x20float\x20'+'dotNV\x20=\x20sa'+'turate(\x20do'+'t(\x20N,\x20V\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'texture\x20pa'+'rameterize'+'d\x20by\x20sqrt('+'\x20GGX\x20alpha'+'\x20)\x20and\x20sqr'+'t(\x201\x20-\x20cos'+'(\x20theta\x20)\x20'+')\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20vec2'+'(\x20roughnes'+'s,\x20sqrt(\x201'+'.0\x20-\x20dotNV'+'\x20)\x20);\x0a\x20\x20\x20\x20'+'uv\x20=\x20uv\x20*\x20'+'LUT_SCALE\x20'+'+\x20LUT_BIAS'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'float\x20LTC_'+'ClippedSph'+'ereFormFac'+'tor(\x20const'+'\x20in\x20vec3\x20f'+'\x20)\x20{\x0a\x20\x20\x20\x20/'+'/\x20Real-Tim'+'e\x20Area\x20Lig'+'hting:\x20a\x20J'+'ourney\x20fro'+'m\x20Research'+'\x20to\x20Produc'+'tion\x20(p.10'+'2)\x0a\x20\x20\x20\x20//\x20'+('An\x20approxi'+'mation\x20of\x20'+'the\x20form\x20f'+'actor\x20of\x20a'+'\x20horizon-c'+'lipped\x20rec'+'tangle.\x0a\x20\x20'+'\x20\x20float\x20l\x20'+'=\x20length(\x20'+'f\x20);\x0a\x20\x20\x20\x20r'+'eturn\x20max('+'\x20(\x20l\x20*\x20l\x20+'+'\x20f.z\x20)\x20/\x20('+'\x20l\x20+\x201.0\x20)'+',\x200.0\x20);\x0a}'+'\x0a\x0avec3\x20LTC'+'_EdgeVecto'+'rFormFacto'+'r(\x20const\x20i'+'n\x20vec3\x20v1,'+'\x20const\x20in\x20'+'vec3\x20v2\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20x\x20=\x20dot('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20float'+'\x20y\x20=\x20abs(\x20'+'x\x20);\x0a\x20\x20\x20\x20/'+'/\x20rational'+'\x20polynomia'+'l\x20approxim'+'ation\x20to\x20t'+'heta\x20/\x20sin'+'(\x20theta\x20)\x20'+'/\x202PI\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'0.8543985\x20'+'+\x20(\x200.4965'+'155\x20+\x200.01'+'45206\x20*\x20y\x20'+')\x20*\x20y;\x0a\x20\x20\x20'+'\x20float\x20b\x20='+'\x203.4175940'+'\x20+\x20(\x204.161'+'6724\x20+\x20y\x20)'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'float\x20v\x20=\x20'+'a\x20/\x20b;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta_sinthet'+'a\x20=\x20(\x20x\x20>\x20'+'0.0\x20)\x20?\x20v\x20'+':\x200.5\x20*\x20in'+'versesqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7\x20)\x20)\x20-\x20'+'v;\x0a\x20\x20\x20\x20ret'+'urn\x20cross('+'\x20v1,\x20v2\x20)\x20'+'*\x20theta_si'+'ntheta;\x0a}\x0a'+'\x0astruct\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'d0;\x0a\x20\x20\x20\x20ve'+'c3\x20coord1;'+'\x0a\x20\x20\x20\x20vec3\x20'+'coord2;\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'rd3;\x0a};\x0a\x0af'+'loat\x20LTC_E'+'valuateRec'+'t(\x20const\x20i'+'n\x20vec3\x20N,\x20'+'const\x20in\x20v'+'ec3\x20V,\x20con'+'st\x20in\x20vec3'+'\x20P,\x20const\x20'+'in\x20mat3\x20mI'+'nv,\x20const\x20'+'in\x20Coords\x20'+'rectCoords'+')\x20{\x0a\x20\x20\x20\x20//'+'\x20bail\x20if\x20p'+'oint\x20is\x20on'+'\x20back\x20side'+'\x20of\x20plane\x20'+'of\x20light\x0a\x20'+'\x20\x20\x20//\x20assu'+'mes\x20ccw\x20wi'+'nding\x20orde'+'r\x20of\x20light'+'\x20vertices\x0a'+'\x20\x20\x20\x20vec3\x20v'+'1\x20=\x20rectCo'+'ords.coord'+'1\x20-\x20rectCo'+'ords.coord'+'0;\x0a\x20\x20\x20\x20vec')+('3\x20v2\x20=\x20rec'+'tCoords.co'+'ord3\x20-\x20rec'+'tCoords.co'+'ord0;\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'lightNorma'+'l\x20=\x20cross('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20//\x20if'+'(\x20dot(\x20lig'+'htNormal,\x20'+'P\x20-\x20rectCo'+'ords.coord'+'0\x20)\x20<\x200.0\x20'+')\x20return\x200'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20factor'+'\x20=\x20sign(-d'+'ot(\x20lightN'+'ormal,\x20P\x20-'+'\x20rectCoord'+'s.coord0\x20)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20vec3\x20T1,'+'\x20T2;\x0a\x20\x20\x20\x20T'+'1\x20=\x20normal'+'ize(\x20V\x20-\x20N'+'\x20*\x20dot(\x20V,'+'\x20N\x20)\x20);\x0a\x20\x20'+'\x20\x20T2\x20=\x20\x20fa'+'ctor\x20*\x20cro'+'ss(\x20N,\x20T1\x20'+');\x20//\x20nega'+'ted\x20from\x20p'+'aper;\x20poss'+'ibly\x20due\x20t'+'o\x20a\x20differ'+'ent\x20handed'+'ness\x20of\x20wo'+'rld\x20coordi'+'nate\x20syste'+'m\x0a\x20\x20\x20\x20//\x20c'+'ompute\x20tra'+'nsform\x0a\x20\x20\x20'+'\x20mat3\x20mat\x20'+'=\x20mInv\x20*\x20t'+'ransposeMa'+'t3(\x20mat3(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20transfor'+'m\x20rect\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'ds[\x204\x20];\x0a\x20'+'\x20\x20\x20coords['+'\x200\x20]\x20=\x20mat'+'\x20*\x20(\x20rectC'+'oords.coor'+'d0\x20-\x20P\x20);\x0a'+'\x20\x20\x20\x20coords'+'[\x201\x20]\x20=\x20ma'+'t\x20*\x20(\x20rect'+'Coords.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20coord'+'s[\x202\x20]\x20=\x20m'+'at\x20*\x20(\x20rec'+'tCoords.co'+'ord2\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20coor'+'ds[\x203\x20]\x20=\x20'+'mat\x20*\x20(\x20re'+'ctCoords.c'+'oord3\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20//\x20'+'project\x20re'+'ct\x20onto\x20sp'+'here\x0a\x20\x20\x20\x20c'+'oords[\x200\x20]'+'\x20=\x20normali'+'ze(\x20coords'+'[\x200\x20]\x20);\x0a\x20'+'\x20\x20\x20coords['+'\x201\x20]\x20=\x20nor'+'malize(\x20co'+'ords[\x201\x20]\x20'+');\x0a\x20\x20\x20\x20coo'+'rds[\x202\x20]\x20='+'\x20normalize'+'(\x20coords[\x20'+'2\x20]\x20);\x0a\x20\x20\x20'+'\x20coords[\x203'+'\x20]\x20=\x20norma'+'lize(\x20coor'+'ds[\x203\x20]\x20);')+('\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20ve'+'ctor\x20form\x20'+'factor\x0a\x20\x20\x20'+'\x20vec3\x20vect'+'orFormFact'+'or\x20=\x20vec3('+'\x200.0\x20);\x0a\x20\x20'+'\x20\x20vectorFo'+'rmFactor\x20+'+'=\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[\x200\x20],'+'\x20coords[\x201'+'\x20]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20+=\x20'+'LTC_EdgeVe'+'ctorFormFa'+'ctor(\x20coor'+'ds[\x201\x20],\x20c'+'oords[\x202\x20]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa'+'ctor\x20+=\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[\x202\x20],\x20coo'+'rds[\x203\x20]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20+=\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[\x20'+'3\x20],\x20coord'+'s[\x200\x20]\x20);\x0a'+'\x20\x20\x20\x20//\x20adj'+'ust\x20for\x20ho'+'rizon\x20clip'+'ping\x0a\x20\x20\x20\x20f'+'loat\x20resul'+'t\x20=\x20LTC_Cl'+'ippedSpher'+'eFormFacto'+'r(\x20vectorF'+'ormFactor\x20'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0aCoor'+'ds\x20dLTCCoo'+'rds;\x0aCoord'+'s\x20getLTCLi'+'ghtCoords('+'vec3\x20light'+'Pos,\x20vec3\x20'+'halfWidth,'+'\x20vec3\x20half'+'Height){\x0a\x20'+'\x20\x20\x20Coords\x20'+'coords;\x0a\x20\x20'+'\x20\x20coords.c'+'oord0\x20=\x20li'+'ghtPos\x20+\x20h'+'alfWidth\x20-'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord1'+'\x20=\x20lightPo'+'s\x20-\x20halfWi'+'dth\x20-\x20half'+'Height;\x0a\x20\x20'+'\x20\x20coords.c'+'oord2\x20=\x20li'+'ghtPos\x20-\x20h'+'alfWidth\x20+'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord3'+'\x20=\x20lightPo'+'s\x20+\x20halfWi'+'dth\x20+\x20half'+'Height;\x0a\x20\x20'+'\x20\x20return\x20c'+'oords;\x0a}\x0a\x0a'+'float\x20dSph'+'ereRadius;'+'\x0aCoords\x20ge'+'tSphereLig'+'htCoords(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight){\x0a\x20\x20'+'\x20\x20//\x20used\x20'+'for\x20simple'+'\x20sphere\x20li')+('ght\x20fallof'+'f\x0a\x20\x20\x20\x20//\x20a'+'lso,\x20the\x20c'+'ode\x20only\x20h'+'andles\x20a\x20s'+'pherical\x20l'+'ight,\x20it\x20c'+'annot\x20be\x20n'+'on-uniform'+'ly\x20scaled\x20'+'in\x20world\x20s'+'pace,\x20and\x20'+'so\x20we\x20enfo'+'rce\x20it\x20her'+'e\x0a\x20\x20\x20\x20dSph'+'ereRadius\x20'+'=\x20max(leng'+'th(halfWid'+'th),\x20lengt'+'h(halfHeig'+'ht));\x0a\x0a\x20\x20\x20'+'\x20//\x20Billbo'+'ard\x20the\x202d'+'\x20light\x20qua'+'d\x20to\x20refle'+'ction\x20vect'+'or,\x20as\x20it\x27'+'s\x20used\x20for'+'\x20specular.'+'\x20This\x20allo'+'ws\x20us\x20to\x20u'+'se\x20disk\x20ma'+'th\x20for\x20the'+'\x20sphere.\x0a\x20'+'\x20\x20\x20vec3\x20f\x20'+'=\x20reflect('+'normalize('+'lightPos\x20-'+'\x20view_posi'+'tion),\x20vNo'+'rmalW);\x0a\x20\x20'+'\x20\x20vec3\x20w\x20='+'\x20normalize'+'(cross(f,\x20'+'halfHeight'+'));\x0a\x20\x20\x20\x20ve'+'c3\x20h\x20=\x20nor'+'malize(cro'+'ss(f,\x20w));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20getLTCL'+'ightCoords'+'(lightPos,'+'\x20w\x20*\x20dSphe'+'reRadius,\x20'+'h\x20*\x20dSpher'+'eRadius);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20LTC\x20L'+'UT\x20texture'+'\x20lookup\x0ave'+'c2\x20dLTCUV;'+'\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20vec2'+'\x20ccLTCUV;\x0a'+'#endif\x0a\x0ave'+'c2\x20getLTCL'+'ightUV(flo'+'at\x20gloss,\x20'+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+')\x0a{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20max('+'(1.0\x20-\x20glo'+'ss)\x20*\x20(1.0'+'\x20-\x20gloss),'+'\x200.001);\x0a\x20'+'\x20\x20\x20return\x20'+'LTC_Uv(\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'roughness\x20'+');\x0a}\x0a\x0a//\x20u'+'sed\x20for\x20en'+'ergy\x20conse'+'rvation\x20an'+'d\x20to\x20modul'+'ate\x20specul'+'ar\x0avec3\x20dL'+'TCSpecFres'+';\x0a#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20vec'+'3\x20ccLTCSpe'+'cFres;\x0a#en'+'dif\x0a\x0avec3\x20'+'getLTCLigh')+('tSpecFres('+'vec2\x20uv,\x20v'+'ec3\x20specul'+'arity)\x0a{\x0a\x20'+'\x20\x20\x20vec4\x20t2'+'\x20=\x20texture'+'2DLod(area'+'LightsLutT'+'ex2,\x20uv,\x200'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20spec'+'ularity\x20*\x20'+'t2.x\x20+\x20(\x20v'+'ec3(\x201.0\x20)'+'\x20-\x20specula'+'rity)\x20*\x20t2'+'.y;\x0a}\x0a\x0avoi'+'d\x20calcLTCL'+'ightValues'+'(float\x20glo'+'ss,\x20vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20speculari'+'ty,\x20float\x20'+'clearcoatG'+'loss,\x20vec3'+'\x20clearcoat'+'WorldNorma'+'l,\x20float\x20c'+'learcoatSp'+'ecularity)'+'\x0a{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x20\x0a\x0a#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20cc'+'LTCUV\x20=\x20ge'+'tLTCLightU'+'V(clearcoa'+'tGloss,\x20cl'+'earcoatWor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20ccLTCS'+'pecFres\x20=\x20'+'getLTCLigh'+'tSpecFres('+'ccLTCUV,\x20v'+'ec3(clearc'+'oatSpecula'+'rity));\x0a#e'+'ndif\x0a}\x0a\x0avo'+'id\x20calcRec'+'tLightValu'+'es(vec3\x20li'+'ghtPos,\x20ve'+'c3\x20halfWid'+'th,\x20vec3\x20h'+'alfHeight)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0avoid\x20c'+'alcDiskLig'+'htValues(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight)\x20{\x0a\x20'+'\x20\x20\x20calcRec'+'tLightValu'+'es(lightPo'+'s,\x20halfWid'+'th,\x20halfHe'+'ight);\x0a}\x0av'+'oid\x20calcSp'+'hereLightV'+'alues(vec3'+'\x20lightPos,'+'\x20vec3\x20half'+'Width,\x20vec'+'3\x20halfHeig'+'ht)\x20{\x0a\x20\x20\x20\x20')+('dLTCCoords'+'\x20=\x20getSphe'+'reLightCoo'+'rds(lightP'+'os,\x20halfWi'+'dth,\x20halfH'+'eight);\x0a}\x0a'+'\x0a//\x20An\x20ext'+'ended\x20vers'+'ion\x20of\x20the'+'\x20implement'+'ation\x20from'+'\x20\x22How\x20to\x20s'+'olve\x20a\x20cub'+'ic\x20equatio'+'n,\x20revisit'+'ed\x22\x0a//\x20htt'+'p://moment'+'singraphic'+'s.de/?p=10'+'5\x0avec3\x20Sol'+'veCubic(ve'+'c4\x20Coeffic'+'ient)\x0a{\x0a\x20\x20'+'\x20\x20float\x20pi'+'\x20=\x203.14159'+';\x0a\x20\x20\x20\x20//\x20N'+'ormalize\x20t'+'he\x20polynom'+'ial\x0a\x20\x20\x20\x20Co'+'efficient.'+'xyz\x20/=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20//\x20D'+'ivide\x20midd'+'le\x20coeffic'+'ients\x20by\x20t'+'hree\x0a\x20\x20\x20\x20C'+'oefficient'+'.yz\x20/=\x203.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20A\x20=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20floa'+'t\x20B\x20=\x20Coef'+'ficient.z;'+'\x0a\x20\x20\x20\x20float'+'\x20C\x20=\x20Coeff'+'icient.y;\x0a'+'\x20\x20\x20\x20float\x20'+'D\x20=\x20Coeffi'+'cient.x;\x0a\x0a'+'\x20\x20\x20\x20//\x20Com'+'pute\x20the\x20H'+'essian\x20and'+'\x20the\x20discr'+'iminant\x0a\x20\x20'+'\x20\x20vec3\x20Del'+'ta\x20=\x20vec3('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-'+'Coefficien'+'t.z\x20*\x20Coef'+'ficient.z\x20'+'+\x20Coeffici'+'ent.y,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20-Coef'+'ficient.y\x20'+'*\x20Coeffici'+'ent.z\x20+\x20Co'+'efficient.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dot(vec2('+'Coefficien'+'t.z,\x20-Coef'+'ficient.y)'+',\x20Coeffici'+'ent.xy)\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'float\x20Disc'+'riminant\x20='+'\x20dot(vec2('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20vec2\x20xlc'+',\x20xsc;\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20A\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_a'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20C_a\x20=\x20De'+'lta.x;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20D_a\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20')+('\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20Theta\x20'+'=\x20atan(sqr'+'t(Discrimi'+'nant),\x20-D_'+'a)\x20/\x203.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20x_1a\x20'+'=\x202.0\x20*\x20sq'+'rt(-C_a)\x20*'+'\x20cos(Theta'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20x_3'+'a\x20=\x202.0\x20*\x20'+'sqrt(-C_a)'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20x'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20((x_1a'+'\x20+\x20x_3a)\x20>'+'\x202.0\x20*\x20B)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xl\x20=\x20x_1'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'\x20=\x20x_3a;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'c\x20=\x20vec2(x'+'l\x20-\x20B,\x20A);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20D\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_d'+'\x20=\x20D;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'C_d\x20=\x20Delt'+'a.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20D'+'_d\x20=\x20-D\x20*\x20'+'Delta.y\x20+\x20'+'2.0\x20*\x20C\x20*\x20'+'Delta.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20Take\x20the\x20'+'cubic\x20root'+'\x20of\x20a\x20norm'+'alized\x20com'+'plex\x20numbe'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20Thet'+'a\x20=\x20atan(D'+'\x20*\x20sqrt(Di'+'scriminant'+'),\x20-D_d)\x20/'+'\x203.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20x_1d\x20=\x202.'+'0\x20*\x20sqrt(-'+'C_d)\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20x_3d\x20=\x20'+'2.0\x20*\x20sqrt'+'(-C_d)\x20*\x20c'+'os(Theta\x20+'+'\x20(2.0\x20/\x203.'+'0)\x20*\x20pi);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20xs;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(x_1d\x20+\x20x_'+'3d\x20<\x202.0\x20*'+'\x20C)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20xs\x20='+'\x20x_1d;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xs\x20=\x20x_3'+'d;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20xsc\x20=\x20ve'+'c2(-D,\x20xs\x20'+'+\x20C);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20flo'+'at\x20E\x20=\x20\x20xl'+'c.y\x20*\x20xsc.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20F\x20=\x20-xl'+'c.x\x20*\x20xsc.'+'y\x20-\x20xlc.y\x20')+('*\x20xsc.x;\x0a\x20'+'\x20\x20\x20float\x20G'+'\x20=\x20\x20xlc.x\x20'+'*\x20xsc.x;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20x'+'mc\x20=\x20vec2('+'C\x20*\x20F\x20-\x20B\x20'+'*\x20G,\x20-B\x20*\x20'+'F\x20+\x20C\x20*\x20E)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20Root\x20=\x20v'+'ec3(xsc.x\x20'+'/\x20xsc.y,\x20x'+'mc.x\x20/\x20xmc'+'.y,\x20xlc.x\x20'+'/\x20xlc.y);\x0a'+'\x0a\x20\x20\x20\x20if\x20(R'+'oot.x\x20<\x20Ro'+'ot.y\x20&&\x20Ro'+'ot.x\x20<\x20Roo'+'t.z)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root.xy'+'z\x20=\x20Root.y'+'xz;\x0a\x20\x20\x20\x20el'+'se\x20if\x20(Roo'+'t.z\x20<\x20Root'+'.x\x20&&\x20Root'+'.z\x20<\x20Root.'+'y)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root.xyz\x20'+'=\x20Root.xzy'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20Root;\x0a'+'}\x0a\x0afloat\x20L'+'TC_Evaluat'+'eDisk(vec3'+'\x20N,\x20vec3\x20V'+',\x20vec3\x20P,\x20'+'mat3\x20Minv,'+'\x20Coords\x20po'+'ints)\x0a{\x0a\x20\x20'+'\x20\x20//\x20const'+'ruct\x20ortho'+'normal\x20bas'+'is\x20around\x20'+'N\x0a\x20\x20\x20\x20vec3'+'\x20T1\x20=\x20norm'+'alize(V\x20-\x20'+'N\x20*\x20dot(V,'+'\x20N));\x0a\x20\x20\x20\x20'+'vec3\x20T2\x20=\x20'+'cross(N,\x20T'+'1);\x0a\x0a\x20\x20\x20\x20/'+'/\x20rotate\x20a'+'rea\x20light\x20'+'in\x20(T1,\x20T2'+',\x20N)\x20basis'+'\x0a\x20\x20\x20\x20//mat'+'3\x20R\x20=\x20tran'+'spose(mat3'+'(T1,\x20T2,\x20N'+'));\x0a\x20\x20\x20\x20ma'+'t3\x20R\x20=\x20tra'+'nsposeMat3'+'(\x20mat3(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'polygon\x20(a'+'llocate\x205\x20'+'vertices\x20f'+'or\x20clippin'+'g)\x0a\x20\x20\x20\x20vec'+'3\x20L_[\x203\x20];'+'\x0a\x20\x20\x20\x20L_[\x200'+'\x20]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[\x20'+'1\x20]\x20=\x20R\x20*\x20'+'(\x20points.c'+'oord1\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20L_['+'\x202\x20]\x20=\x20R\x20*'+'\x20(\x20points.'+'coord2\x20-\x20P'+'\x20);\x0a\x0a\x20\x20\x20\x20/'+'/\x20init\x20ell'+'ipse\x0a\x20\x20\x20\x20v'+'ec3\x20C\x20\x20=\x200'+'.5\x20*\x20(L_[0'+']\x20+\x20L_[2])'+';\x0a\x20\x20\x20\x20vec3'+'\x20V1\x20=\x200.5\x20'+'*\x20(L_[1]\x20-'+'\x20L_[2]);\x0a\x20'+'\x20\x20\x20vec3\x20V2'+'\x20=\x200.5\x20*\x20('+'L_[1]\x20-\x20L_'+'[0]);\x0a\x0a\x20\x20\x20'+'\x20C\x20\x20=\x20Minv')+('\x20*\x20C;\x0a\x20\x20\x20\x20'+'V1\x20=\x20Minv\x20'+'*\x20V1;\x0a\x20\x20\x20\x20'+'V2\x20=\x20Minv\x20'+'*\x20V2;\x0a\x0a\x20\x20\x20'+'\x20//if(dot('+'cross(V1,\x20'+'V2),\x20C)\x20>\x20'+'0.0)\x0a\x20\x20\x20\x20/'+'/\x20\x20\x20\x20retur'+'n\x200.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20compu'+'te\x20eigenve'+'ctors\x20of\x20e'+'llipse\x0a\x20\x20\x20'+'\x20float\x20a,\x20'+'b;\x0a\x20\x20\x20\x20flo'+'at\x20d11\x20=\x20d'+'ot(V1,\x20V1)'+';\x0a\x20\x20\x20\x20floa'+'t\x20d22\x20=\x20do'+'t(V2,\x20V2);'+'\x0a\x20\x20\x20\x20float'+'\x20d12\x20=\x20dot'+'(V1,\x20V2);\x0a'+'\x20\x20\x20\x20if\x20(ab'+'s(d12)\x20/\x20s'+'qrt(d11\x20*\x20'+'d22)\x20>\x200.0'+'001)\x0a\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20tr\x20=\x20'+'d11\x20+\x20d22;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20det\x20='+'\x20-d12\x20*\x20d1'+'2\x20+\x20d11\x20*\x20'+'d22;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20use'+'\x20sqrt\x20matr'+'ix\x20to\x20solv'+'e\x20for\x20eige'+'nvalues\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20det\x20'+'=\x20sqrt(det'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20u\x20='+'\x200.5\x20*\x20sqr'+'t(tr\x20-\x202.0'+'\x20*\x20det);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20v\x20=\x200.5'+'\x20*\x20sqrt(tr'+'\x20+\x202.0\x20*\x20d'+'et);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20e'+'_max\x20=\x20(u\x20'+'+\x20v)\x20*\x20(u\x20'+'+\x20v);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'e_min\x20=\x20(u'+'\x20-\x20v)\x20*\x20(u'+'\x20-\x20v);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20V1_,\x20V2_;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(d11\x20>\x20'+'d22)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12\x20*\x20V'+'1\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20V2_\x20'+'=\x20d12\x20*\x20V1'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20V1'+'_\x20=\x20d12*V2'+'\x20+\x20(e_max\x20'+'-\x20d22)*V1;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20V2_\x20=\x20d'+'12*V2\x20+\x20(e'+'_min\x20-\x20d22'+')*V1;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20e_max'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'b\x20=\x201.0\x20/\x20'+'e_min;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V1\x20=\x20'+'normalize('+'V1_);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20V2\x20=\x20n'+'ormalize(V'+'2_);\x0a\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20dot(V1'+',\x20V1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20b\x20=\x201'+'.0\x20/\x20dot(V'+'2,\x20V2);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20V1\x20*'+'=\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20*=\x20sqrt('+'b);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'V3\x20=\x20norma'+'lize(cross'+'(V1,\x20V2));'+'\x0a\x20\x20\x20\x20if\x20(d'+'ot(C,\x20V3)\x20'+'<\x200.0)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V3\x20*='+'\x20-1.0;\x0a\x0a\x20\x20'+'\x20\x20float\x20L\x20'+'\x20=\x20dot(V3,'+'\x20C);\x0a\x20\x20\x20\x20f'+'loat\x20x0\x20=\x20'+'dot(V1,\x20C)'+'\x20/\x20L;\x0a\x20\x20\x20\x20'+'float\x20y0\x20='+'\x20dot(V2,\x20C'+')\x20/\x20L;\x0a\x0a\x20\x20'+'\x20\x20float\x20E1'+'\x20=\x20inverse'+'sqrt(a);\x0a\x20'+'\x20\x20\x20float\x20E'+'2\x20=\x20invers'+'esqrt(b);\x0a'+'\x0a\x20\x20\x20\x20a\x20*=\x20'+'L\x20*\x20L;\x0a\x20\x20\x20'+'\x20b\x20*=\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20c0\x20=\x20a'+'\x20*\x20b;\x0a\x20\x20\x20\x20'+'float\x20c1\x20='+'\x20a\x20*\x20b\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0\x20+\x20y0\x20*'+'\x20y0)\x20-\x20a\x20-'+'\x20b;\x0a\x20\x20\x20\x20fl'+'oat\x20c2\x20=\x201'+'.0\x20-\x20a\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0)\x20-\x20b\x20*'+'\x20(1.0\x20+\x20y0'+'\x20*\x20y0);\x0a\x20\x20'+'\x20\x20float\x20c3'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ro'+'ots\x20=\x20Solv'+'eCubic(vec'+'4(c0,\x20c1,\x20'+'c2,\x20c3));\x0a'+'\x20\x20\x20\x20float\x20'+'e1\x20=\x20roots'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20e2\x20=\x20r'+'oots.y;\x0a\x20\x20'+'\x20\x20float\x20e3'+'\x20=\x20roots.z'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20avgDir\x20='+'\x20vec3(a\x20*\x20'+'x0\x20/\x20(a\x20-\x20'+'e2),\x20b\x20*\x20y'+'0\x20/\x20(b\x20-\x20e'+'2),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20mat3\x20'+'rotate\x20=\x20m'+'at3(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20L1\x20=\x20sqrt'+'(-e2\x20/\x20e3)'+';\x0a\x20\x20\x20\x20floa'+'t\x20L2\x20=\x20sqr'+'t(-e2\x20/\x20e1'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20formFa'+'ctor\x20=\x20max'+'(0.0,\x20L1\x20*'+'\x20L2\x20*\x20inve')+('rsesqrt((1'+'.0\x20+\x20L1\x20*\x20'+'L1)\x20*\x20(1.0'+'\x20+\x20L2\x20*\x20L2'+')));\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20const\x20'+'float\x20LUT_'+'SIZE\x20=\x2064.'+'0;\x0a\x20\x20\x20\x20con'+'st\x20float\x20L'+'UT_SCALE\x20='+'\x20(\x20LUT_SIZ'+'E\x20-\x201.0\x20)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20float\x20LU'+'T_BIAS\x20=\x200'+'.5\x20/\x20LUT_S'+'IZE;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20tab'+'ulated\x20hor'+'izon-clipp'+'ed\x20sphere\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vec2(a'+'vgDir.z\x20*\x20'+'0.5\x20+\x200.5,'+'\x20formFacto'+'r);\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv*LUT_'+'SCALE\x20+\x20LU'+'T_BIAS;\x0a\x0a\x20'+'\x20\x20\x20float\x20s'+'cale\x20=\x20tex'+'ture2DLod('+'areaLights'+'LutTex2,\x20u'+'v,\x200.0).w;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20formFac'+'tor*scale;'+'\x0a}\x0a\x0a//\x20LTC'+'_EvaluateD'+'isk\x20in\x20som'+'e\x20rare\x20cas'+'es\x20generea'+'tes\x20NaN\x20va'+'lues\x20in\x20a\x20'+'or\x20b,\x20just'+'\x20before\x20\x27f'+'loat\x20c0\x20=\x20'+'a\x20*\x20b;\x27\x0a//'+'\x20Get\x20rid\x20o'+'f\x20those\x20Na'+'n\x20values\x20b'+'efore\x20they'+'\x20propagate'+'\x20further,\x20'+'as\x20in\x20case'+'\x20of\x20bloom\x20'+'/\x20DOF\x20blur'+'s\x20they\x0a//\x20'+'propagate\x20'+'to\x20large\x20a'+'reas.\x20I\x20di'+'dn\x27t\x20find\x20'+'the\x20actual'+'\x20reason\x20wh'+'ere\x20those\x20'+'come\x20from,'+'\x20so\x20that\x20i'+'s\x20still\x20TO'+'DO.\x0a//\x20Not'+'e\x20that\x20onl'+'y\x20disk/sph'+'ere\x20lights'+'\x20are\x20causi'+'ng\x20it,\x20so\x20'+'only\x20handl'+'e\x20those.\x0af'+'loat\x20FixNa'+'n(float\x20va'+'lue)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'value\x20!=\x20v'+'alue\x20?\x200.0'+'\x20:\x20value;\x20'+'\x20//\x20isnan\x20'+'does\x20not\x20t'+'ranspile\x20c'+'orrectly,\x20'+'use\x20a\x20work'+'around\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20isnan(va'+'lue)\x20?\x200.0'+'\x20:\x20value;\x0a')+('\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afloat\x20'+'getRectLig'+'htDiffuse('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm)\x20{\x0a\x20\x20'+'\x20\x20return\x20L'+'TC_Evaluat'+'eRect(\x20wor'+'ldNormal,\x20'+'viewDir,\x20v'+'PositionW,'+'\x20mat3(\x201.0'+'\x20),\x20dLTCCo'+'ords\x20);\x0a}\x0a'+'\x0afloat\x20get'+'DiskLightD'+'iffuse(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20FixN'+'an(LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mat3('+'\x201.0\x20),\x20dL'+'TCCoords\x20)'+');\x0a}\x0a\x0afloa'+'t\x20getSpher'+'eLightDiff'+'use(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm)\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20float\x20fa'+'lloff\x20=\x20dS'+'phereRadiu'+'s\x20/\x20(dot(l'+'ightDir,\x20l'+'ightDir)\x20+'+'\x20dSphereRa'+'dius);\x0a\x20\x20\x20'+'\x20return\x20Fi'+'xNan(getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNorm)\x20*\x20f'+'alloff);\x0a}'+'\x0a\x0amat3\x20get'+'LTCLightIn'+'vMat(vec2\x20'+'uv)\x0a{\x0a\x20\x20\x20\x20'+'vec4\x20t1\x20=\x20'+'texture2DL'+'od(areaLig'+'htsLutTex1'+',\x20uv,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3(\x20t1.x,\x20'+'0,\x20t1.y\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3(\x20\x20\x20\x200,'+'\x201,\x20\x20\x20\x200\x20)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3(\x20t1.z'+',\x200,\x20t1.w\x20'+')\x0a\x20\x20\x20\x20);\x0a}'+'\x0a\x0afloat\x20ca'+'lcRectLigh'+'tSpecular('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir')+(',\x20vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20mat'+'3\x20mInv\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afl'+'oat\x20getRec'+'tLightSpec'+'ular(vec3\x20'+'worldNorma'+'l,\x20vec3\x20vi'+'ewDir)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'calcRectLi'+'ghtSpecula'+'r(worldNor'+'mal,\x20viewD'+'ir,\x20dLTCUV'+');\x0a}\x0a\x0afloa'+'t\x20calcDisk'+'LightSpecu'+'lar(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20mInv'+'\x20=\x20getLTCL'+'ightInvMat'+'(uv);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_EvaluateD'+'isk(\x20world'+'Normal,\x20vi'+'ewDir,\x20vPo'+'sitionW,\x20m'+'Inv,\x20dLTCC'+'oords\x20);\x0a}'+'\x0a\x0afloat\x20ge'+'tDiskLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a\x0a'+'float\x20getS'+'phereLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a'),J1='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_metaln'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tMetalness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20metal'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20metalness'+'\x20*=\x20materi'+'al_metalne'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20metalne'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_METAL'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_METAL'+'NESS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_META'+'LNESS_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_VERTEX\x0a\x20\x20'+'\x20\x20metalnes'+'s\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_METALNES'+'S_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dMet'+'alness\x20=\x20m'+'etalness;\x0a'+'}\x0a',eP='\x0auniform\x20s'+'ampler2D\x20t'+'exture_msd'+'fMap;\x0a\x0aflo'+'at\x20median('+'float\x20r,\x20f'+'loat\x20g,\x20fl'+'oat\x20b)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'max(min(r,'+'\x20g),\x20min(m'+'ax(r,\x20g),\x20'+'b));\x0a}\x0a\x0afl'+'oat\x20map\x20(f'+'loat\x20min,\x20'+'float\x20max,'+'\x20float\x20v)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20(v\x20-\x20mi'+'n)\x20/\x20(max\x20'+'-\x20min);\x0a}\x0a'+'\x0auniform\x20f'+'loat\x20font_'+'sdfIntensi'+'ty;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20float\x20f'+'ont_pxrang'+'e;\x20\x20\x20\x20\x20\x20//'+'\x20the\x20numbe'+'r\x20of\x20pixel'+'s\x20between\x20'+'inside\x20and'+'\x20outside\x20t'+'he\x20font\x20in'+'\x20SDF\x0aunifo'+'rm\x20float\x20f'+'ont_textur'+'eWidth;\x20//'+'\x20the\x20width'+'\x20of\x20the\x20te'+'xture\x20atla'+'s\x0a\x0a#ifndef'+'\x20LIT_MSDF_'+'TEXT_ATTRI'+'BUTE\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20shadow_co'+'lor;\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20shadow_o'+'ffset;\x0a#el'+'se\x0a\x20\x20\x20\x20var'+'ying\x20vec4\x20'+'outline_co'+'lor;\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20outline'+'_thickness'+';\x0a\x20\x20\x20\x20vary'+'ing\x20vec4\x20s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'shadow_off'+'set;\x0a#endi'+'f\x0a\x0avec4\x20ap'+'plyMsdf(ve'+'c4\x20color)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Convert\x20to'+'\x20linear\x20sp'+'ace\x20before'+'\x20processin'+'g\x0a\x20\x20\x20\x20//\x20T'+'ODO:\x20ideal'+'ly\x20this\x20wo'+'uld\x20receiv'+'e\x20the\x20colo'+'r\x20in\x20linea'+'r\x20space,\x20b'+'ut\x20that\x20wo'+'uld\x20requir'+'e\x20larger\x20c'+'hanges\x0a\x20\x20\x20'+('\x20//\x20on\x20the'+'\x20engine\x20si'+'de,\x20with\x20t'+'he\x20way\x20pre'+'multiplied'+'\x20alpha\x20is\x20'+'handled\x20as'+'\x20well.\x0a\x20\x20\x20'+'\x20color.rgb'+'\x20=\x20gammaCo'+'rrectInput'+'(color.rgb'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20sample\x20th'+'e\x20field\x0a\x20\x20'+'\x20\x20vec3\x20tsa'+'mple\x20=\x20tex'+'ture2D(tex'+'ture_msdfM'+'ap,\x20vUv0).'+'rgb;\x0a\x20\x20\x20\x20v'+'ec2\x20uvShdw'+'\x20=\x20vUv0\x20-\x20'+'shadow_off'+'set;\x0a\x20\x20\x20\x20v'+'ec3\x20ssampl'+'e\x20=\x20textur'+'e2D(textur'+'e_msdfMap,'+'\x20uvShdw).r'+'gb;\x0a\x0a\x20\x20\x20\x20/'+'/\x20get\x20the\x20'+'signed\x20dis'+'tance\x20valu'+'e\x0a\x20\x20\x20\x20floa'+'t\x20sigDist\x20'+'=\x20median(t'+'sample.r,\x20'+'tsample.g,'+'\x20tsample.b'+');\x0a\x20\x20\x20\x20flo'+'at\x20sigDist'+'Shdw\x20=\x20med'+'ian(ssampl'+'e.r,\x20ssamp'+'le.g,\x20ssam'+'ple.b);\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20limi'+'t\x20-\x20smalle'+'r\x20value\x20ma'+'kes\x20for\x20sh'+'arper\x20but\x20'+'more\x20alias'+'ed\x20text,\x20e'+'specially\x20'+'on\x20angles\x0a'+'\x20\x20\x20\x20//\x20too'+'\x20large\x20val'+'ue\x20(0.5)\x20c'+'reates\x20a\x20d'+'ark\x20glow\x20a'+'round\x20the\x20'+'letters\x0a\x20\x20'+'\x20\x20float\x20sm'+'oothingMax'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20vec'+'2\x20w\x20=\x20fwid'+'th(vUv0);\x0a'+'\x20\x20\x20\x20float\x20'+'smoothing\x20'+'=\x20clamp(w.'+'x\x20*\x20font_t'+'extureWidt'+'h\x20/\x20font_p'+'xrange,\x200.'+'0,\x20smoothi'+'ngMax);\x0a\x0a\x20'+'\x20\x20\x20float\x20m'+'apMin\x20=\x200.'+'05;\x0a\x20\x20\x20\x20fl'+'oat\x20mapMax'+'\x20=\x20clamp(1'+'.0\x20-\x20font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20float\x20')+('sigDistInn'+'er\x20=\x20map(m'+'apMin,\x20map'+'Max,\x20sigDi'+'st);\x0a\x20\x20\x20\x20f'+'loat\x20sigDi'+'stOutline\x20'+'=\x20map(mapM'+'in,\x20mapMax'+',\x20sigDist\x20'+'+\x20outline_'+'thickness)'+';\x0a\x20\x20\x20\x20sigD'+'istShdw\x20=\x20'+'map(mapMin'+',\x20mapMax,\x20'+'sigDistShd'+'w\x20+\x20outlin'+'e_thicknes'+'s);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20cente'+'r\x20=\x200.5;\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20smoo'+'thing\x20and\x20'+'use\x20to\x20gen'+'erate\x20opac'+'ity\x0a\x20\x20\x20\x20fl'+'oat\x20inside'+'\x20=\x20smooths'+'tep(center'+'-smoothing'+',\x20center+s'+'moothing,\x20'+'sigDistInn'+'er);\x0a\x20\x20\x20\x20f'+'loat\x20outli'+'ne\x20=\x20smoot'+'hstep(cent'+'er-smoothi'+'ng,\x20center'+'+smoothing'+',\x20sigDistO'+'utline);\x0a\x20'+'\x20\x20\x20float\x20s'+'hadow\x20=\x20sm'+'oothstep(c'+'enter-smoo'+'thing,\x20cen'+'ter+smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20vec4\x20t'+'color\x20=\x20(o'+'utline\x20>\x20i'+'nside)\x20?\x20o'+'utline\x20*\x20v'+'ec4(outlin'+'e_color.a\x20'+'*\x20outline_'+'color.rgb,'+'\x20outline_c'+'olor.a)\x20:\x20'+'vec4(0.0);'+'\x0a\x20\x20\x20\x20tcolo'+'r\x20=\x20mix(tc'+'olor,\x20colo'+'r,\x20inside)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20scolor\x20='+'\x20(shadow\x20>'+'\x20outline)\x20'+'?\x20shadow\x20*'+'\x20vec4(shad'+'ow_color.a'+'\x20*\x20shadow_'+'color.rgb,'+'\x20shadow_co'+'lor.a)\x20:\x20t'+'color;\x0a\x20\x20\x20'+'\x20tcolor\x20=\x20'+'mix(scolor'+',\x20tcolor,\x20'+'outline);\x0a'+'\x0a\x20\x20\x20\x20//\x20Co'+'nvert\x20back'+'\x20to\x20gamma\x20'+'space\x20befo'+'re\x20returni'+'ng\x0a\x20\x20\x20\x20tco'+'lor.rgb\x20=\x20'+'gammaCorre'+'ctOutput(t'+'color.rgb)'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20return\x20tc'+'olor;\x0a}\x0a'),tP='\x0a\x0avec3\x20get'+'SpecularMo'+'dulate(in\x20'+'vec3\x20specu'+'larity,\x20in'+'\x20vec3\x20albe'+'do,\x20in\x20flo'+'at\x20metalne'+'ss,\x20in\x20flo'+'at\x20f0)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20di'+'electricF0'+'\x20=\x20f0\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(diel'+'ectricF0,\x20'+'albedo,\x20me'+'talness);\x0a'+'}\x0a\x0avec3\x20ge'+'tAlbedoMod'+'ulate(in\x20v'+'ec3\x20albedo'+',\x20in\x20float'+'\x20metalness'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20albed'+'o\x20*\x20(1.0\x20-'+'\x20metalness'+');\x0a}\x0a',sP='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20vec2\x20u'+'v0;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2DArra'+'y\x20morphTex'+'ture;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20float\x20'+'morphFacto'+'r[{MORPH_T'+'EXTURE_MAX'+'_COUNT}];\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20ui'+'nt\x20morphIn'+'dex[{MORPH'+'_TEXTURE_M'+'AX_COUNT}]'+';\x0a\x20\x20\x20\x20unif'+'orm\x20int\x20co'+'unt;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PH_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20aa'+'bbSize;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20a'+'abbMin;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20highp\x20vec'+'3\x20color\x20=\x20'+'vec3(0,\x200,'+'\x200);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'pixelCoord'+'s\x20=\x20ivec2('+'uv0\x20*\x20vec2'+'(textureSi'+'ze(morphTe'+'xture,\x200).'+'xy));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20count;\x20'+'i++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'int\x20textur'+'eIndex\x20=\x20m'+'orphIndex['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20delta\x20=\x20t'+'exelFetch('+'morphTextu'+'re,\x20ivec3('+'pixelCoord'+'s,\x20int(tex'+'tureIndex)'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20color\x20+'+'=\x20morphFac'+'tor[i]\x20*\x20d'+'elta;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20MORPH_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20color\x20'+'=\x20(color\x20-'+'\x20aabbMin)\x20'+'/\x20aabbSize'+'\x20*\x2065535.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20u'+'vec4(color'+',\x201u);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20ve'+'c4(color,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a',iP='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20}\x0a',rP='\x0aattribute'+'\x20vec3\x20vert'+'ex_outline'+'Parameters'+';\x0aattribut'+'e\x20vec3\x20ver'+'tex_shadow'+'Parameters'+';\x0a\x0avarying'+'\x20vec4\x20outl'+'ine_color;'+'\x0avarying\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0avaryin'+'g\x20vec4\x20sha'+'dow_color;'+'\x0avarying\x20v'+'ec2\x20shadow'+'_offset;\x0a\x0a'+'void\x20unpac'+'kMsdfParam'+'s()\x20{\x0a\x20\x20\x20\x20'+'vec3\x20littl'+'e\x20=\x20mod(ve'+'rtex_outli'+'neParamete'+'rs,\x20256.);'+'\x0a\x20\x20\x20\x20vec3\x20'+'big\x20=\x20(ver'+'tex_outlin'+'eParameter'+'s\x20-\x20little'+')\x20/\x20256.;\x0a'+'\x0a\x20\x20\x20\x20outli'+'ne_color.r'+'b\x20=\x20little'+'.xy\x20/\x20255.'+';\x0a\x20\x20\x20\x20outl'+'ine_color.'+'ga\x20=\x20big.x'+'y\x20/\x20255.;\x0a'+'\x0a\x20\x20\x20\x20//\x20_o'+'utlineThic'+'knessScale'+'\x20===\x200.2\x0a\x20'+'\x20\x20\x20outline'+'_thickness'+'\x20=\x20little.'+'z\x20/\x20255.\x20*'+'\x200.2;\x0a\x0a\x20\x20\x20'+'\x20little\x20=\x20'+'mod(vertex'+'_shadowPar'+'ameters,\x202'+'56.);\x0a\x20\x20\x20\x20'+'big\x20=\x20(ver'+'tex_shadow'+'Parameters'+'\x20-\x20little)'+'\x20/\x20256.;\x0a\x0a'+'\x20\x20\x20\x20shadow'+'_color.rb\x20'+'=\x20little.x'+'y\x20/\x20255.;\x0a'+'\x20\x20\x20\x20shadow'+'_color.ga\x20'+'=\x20big.xy\x20/'+'\x20255.;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+'ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20shado'+'w_offset\x20='+'\x20(vec2(lit'+'tle.z,\x20big'+'.z)\x20/\x20127.'+'\x20-\x201.)\x20*\x200'+'.005;\x0a}\x0a',aP='\x0amat3\x20dNor'+'malMatrix;'+'\x0a\x0avec3\x20get'+'Normal()\x20{'+'\x0a\x20\x20\x20\x20dNorm'+'alMatrix\x20='+'\x20getNormal'+'Matrix(dMo'+'delMatrix)'+';\x0a\x20\x20\x20\x20vec3'+'\x20localNorm'+'al\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}\x0a',nP='\x0a\x0aattribut'+'e\x20vec3\x20ver'+'tex_normal'+';\x0a\x0auniform'+'\x20mat3\x20matr'+'ix_normal;'+'\x0a\x0a#ifdef\x20M'+'ORPHING_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20morphNor'+'malTex;\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'morphNorma'+'lTex;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0avec3\x20'+'getLocalNo'+'rmal(vec3\x20'+'vertexNorm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20vec3\x20loca'+'lNormal\x20=\x20'+'vertex_nor'+'mal;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_NORM'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ivec2\x20mo'+'rphUV\x20=\x20ge'+'tTextureMo'+'rphCoords('+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'orphNormal'+'\x20=\x20vec3(te'+'xelFetch(m'+'orphNormal'+'Tex,\x20ivec2'+'(morphUV),'+'\x200).xyz)\x20/'+'\x2065535.0\x20*'+'\x202.0\x20-\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphNo'+'rmal\x20=\x20tex'+'elFetch(mo'+'rphNormalT'+'ex,\x20ivec2('+'morphUV),\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20localNor'+'mal\x20+=\x20mor'+'phNormal;\x0a'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20localN'+'ormal;\x0a}\x0a\x0a'+'#if\x20define'+'d(SKIN)\x20||'+'\x20defined(B'+'ATCH)\x0a\x20\x20\x20\x20'+'mat3\x20getNo'+'rmalMatrix'+'(mat4\x20mode'+'lMatrix)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mat3'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20ma'+'t3\x20getNorm'+'alMatrix(m'+'at4\x20modelM'+'atrix)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20mat3(m'+'odelMatrix'+'[0].xyz,\x20m'+('odelMatrix'+'[1].xyz,\x20m'+'odelMatrix'+'[2].xyz);\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20mat3'+'\x20getNormal'+'Matrix(mat'+'4\x20modelMat'+'rix)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_n'+'ormal;\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'),oP='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_bumpin'+'ess;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_NORMAL'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_normalDe'+'tailMapBum'+'piness;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20bl'+'endNormals'+'(vec3\x20n1,\x20'+'vec3\x20n2)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20https://'+'blog.selfs'+'hadow.com/'+'publicatio'+'ns/blendin'+'g-in-detai'+'l/#detail-'+'oriented\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20n1\x20'+'+=\x20vec3(0,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20n2\x20*'+'=\x20vec3(-1,'+'\x20-1,\x201);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20n1\x20*\x20d'+'ot(n1,\x20n2)'+'\x20/\x20n1.z\x20-\x20'+'n2;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0avo'+'id\x20getNorm'+'al()\x20{\x0a#if'+'def\x20STD_NO'+'RMAL_TEXTU'+'RE\x0a\x20\x20\x20\x20vec'+'3\x20normalMa'+'p\x20=\x20{STD_N'+'ORMAL_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_NORMAL_TE'+'XTURE_NAME'+'},\x20{STD_NO'+'RMAL_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+');\x0a\x20\x20\x20\x20nor'+'malMap\x20=\x20m'+'ix(vec3(0.'+'0,\x200.0,\x201.'+'0),\x20normal'+'Map,\x20mater'+'ial_bumpin'+'ess);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMALDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20norm'+'alDetailMa'+'p\x20=\x20{STD_N'+'ORMALDETAI'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_NOR'+'MALDETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'NORMALDETA'+'IL_TEXTURE'+'_UV},\x20text'+'ureBias));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20n'+'ormalDetai'+'lMap\x20=\x20mix'+'(vec3(0.0,'+'\x200.0,\x201.0)'+',\x20normalDe'+'tailMap,\x20m'+'aterial_no'+'rmalDetail'+'MapBumpine'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20blend'+'Normals(no'+'rmalMap,\x20n'+('ormalDetai'+'lMap);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20normal'+'ize(dTBN\x20*'+'\x20normalMap'+');\x0a#else\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20dVerte'+'xNormalW;\x0a'+'#endif\x0a}\x0a'),lP='\x0auniform\x20f'+'loat\x20mater'+'ial_opacit'+'y;\x0a\x0avoid\x20g'+'etOpacity('+')\x20{\x0a\x20\x20\x20\x20dA'+'lpha\x20=\x20mat'+'erial_opac'+'ity;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_OPACITY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20dAlpha\x20*='+'\x20texture2D'+'Bias({STD_'+'OPACITY_TE'+'XTURE_NAME'+'},\x20{STD_OP'+'ACITY_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20*=\x20c'+'lamp(vVert'+'exColor.{S'+'TD_OPACITY'+'_VERTEX_CH'+'ANNEL},\x200.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',cP='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20vec4\x20b'+'lueNoiseJi'+'tter;\x0a\x0a#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BLUENOI'+'SE\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blueN'+'oiseTex32;'+'\x0a#endif\x0a\x0av'+'oid\x20opacit'+'yDither(fl'+'oat\x20alpha,'+'\x20float\x20id)'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BAYER8\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20noise'+'\x20=\x20bayer8('+'floor(mod('+'gl_FragCoo'+'rd.xy\x20+\x20bl'+'ueNoiseJit'+'ter.xy\x20+\x20i'+'d,\x208.0)))\x20'+'/\x2064.0;\x0a\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20BLUENO'+'ISE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20frac'+'t(gl_FragC'+'oord.xy\x20/\x20'+'32.0\x20+\x20blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20noise\x20=\x20t'+'exture2DLo'+'d(blueNois'+'eTex32,\x20uv'+',\x200.0).y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20==\x20'+'IGNNOISE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20based\x20'+'on\x20https:/'+'/www.iryok'+'u.com/next'+'-generatio'+'n-post-pro'+'cessing-in'+'-call-of-d'+'uty-advanc'+'ed-warfare'+'/\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'agic\x20=\x20vec'+'3(0.067110'+'56,\x200.0058'+'3715,\x2052.9'+'829189);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20noi'+'se\x20=\x20fract'+'(magic.z\x20*'+'\x20fract(dot'+'(gl_FragCo'+'ord.xy\x20+\x20b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id,\x20magic.'+'xy)));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20convert\x20'+'the\x20noise\x20'+'to\x20linear\x20'+'space,\x20as\x20'+'that\x20is\x20sp'+'ecified\x20in'+('\x20sRGB\x20spac'+'e\x20(stores\x20'+'perceptual'+'\x20values)\x0a\x20'+'\x20\x20\x20noise\x20='+'\x20pow(noise'+',\x202.2);\x0a\x0a\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x20noise'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a}'+'\x0a'),hP='\x0a',dP='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20litArgs_'+'opacity;\x0a\x0a'+'#elif\x20LIT_'+'BLEND_TYPE'+'\x20==\x20PREMUL'+'TIPLIED\x0a\x0a\x20'+'\x20\x20\x20gl_Frag'+'Color.rgb\x20'+'*=\x20litArgs'+'_opacity;\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.a\x20='+'\x20litArgs_o'+'pacity;\x0a\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or.a\x20=\x201.0'+';\x0a\x0a#endif\x0a',fP='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20textu'+'re2D(sourc'+'e,\x20vUv0);\x0a'+'}\x0a',uP='\x0a\x0auniform\x20'+'vec3\x20mater'+'ial_sheen;'+'\x0a\x0avoid\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'heenColor\x20'+'=\x20material'+'_sheen;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEEN_'+'TEXTURE\x0a\x20\x20'+'\x20\x20sheenCol'+'or\x20*=\x20{STD'+'_SHEEN_TEX'+'TURE_DECOD'+'E}(texture'+'2DBias({ST'+'D_SHEEN_TE'+'XTURE_NAME'+'},\x20{STD_SH'+'EEN_TEXTUR'+'E_UV},\x20tex'+'tureBias))'+'.{STD_SHEE'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_VERTEX\x0a'+'\x20\x20\x20\x20sheenC'+'olor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20sSpec'+'ularity\x20=\x20'+'sheenColor'+';\x0a}\x0a',pP='\x0auniform\x20f'+'loat\x20mater'+'ial_sheenG'+'loss;\x0a\x0avoi'+'d\x20getSheen'+'Glossiness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20sheen'+'Glossiness'+'\x20=\x20materia'+'l_sheenGlo'+'ss;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20*'+'=\x20texture2'+'DBias({STD'+'_SHEENGLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_SHEENGLO'+'SS_TEXTURE'+'_UV},\x20text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20*='+'\x20saturate('+'vVertexCol'+'or.{STD_SH'+'EENGLOSS_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_INVER'+'T\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x201.0\x20-\x20'+'sheenGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20sGlossi'+'ness\x20=\x20she'+'enGlossine'+'ss\x20+\x200.000'+'0001;\x0a}\x0a',mP='\x0auniform\x20f'+'loat\x20mater'+'ial_height'+'MapFactor;'+'\x0a\x0avoid\x20get'+'Parallax()'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20paralla'+'xScale\x20=\x20m'+'aterial_he'+'ightMapFac'+'tor;\x0a\x0a\x20\x20\x20\x20'+'float\x20heig'+'ht\x20=\x20textu'+'re2DBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_H'+'EIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20he'+'ight\x20=\x20hei'+'ght\x20*\x20para'+'llaxScale\x20'+'-\x20parallax'+'Scale\x20*\x200.'+'5;\x0a\x20\x20\x20\x20vec'+'3\x20viewDirT'+'\x20=\x20dViewDi'+'rW\x20*\x20dTBN;'+'\x0a\x0a\x20\x20\x20\x20view'+'DirT.z\x20+=\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',_P='\x0auniform\x20u'+'int\x20meshIn'+'stanceId;\x0a'+'\x0avec4\x20getP'+'ickOutput('+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20vec4\x20i'+'nv\x20=\x20vec4('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20co'+'nst\x20uvec4\x20'+'shifts\x20=\x20u'+'vec4(16,\x208'+',\x200,\x2024);\x0a'+'\x20\x20\x20\x20uvec4\x20'+'col\x20=\x20(uve'+'c4(meshIns'+'tanceId)\x20>'+'>\x20shifts)\x20'+'&\x20uvec4(0x'+'ff);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'(col)\x20*\x20in'+'v;\x0a}\x0a',gP='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20dR'+'eflDirW\x20=\x20'+'normalize('+'-reflect(v'+'iewDir,\x20wo'+'rldNormal)'+');\x0a}\x0a',SP='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20sqrt'+'(1.0\x20-\x20min'+'(gloss,\x201.'+'0));\x0a\x0a\x20\x20\x20\x20'+'vec2\x20direc'+'tion\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicT\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3(directi'+'on,\x200.0));'+'\x0a\x20\x20\x20\x20vec3\x20'+'anisotropi'+'cB\x20=\x20norma'+'lize(cross'+'(tbn[2],\x20a'+'nisotropic'+'T));\x0a\x0a\x20\x20\x20\x20'+'float\x20anis'+'otropy\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20vec3'+'\x20anisotrop'+'icDirectio'+'n\x20=\x20anisot'+'ropicB;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicTa'+'ngent\x20=\x20cr'+'oss(anisot'+'ropicDirec'+'tion,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicNorm'+'al\x20=\x20cross'+'(anisotrop'+'icTangent,'+'\x20anisotrop'+'icDirectio'+'n);\x0a\x20\x20\x20\x20fl'+'oat\x20bendFa'+'ctor\x20=\x201.0'+'\x20-\x20anisotr'+'opy\x20*\x20(1.0'+'\x20-\x20roughne'+'ss);\x0a\x20\x20\x20\x20f'+'loat\x20bendF'+'actor4\x20=\x20b'+'endFactor\x20'+'*\x20bendFact'+'or\x20*\x20bendF'+'actor\x20*\x20be'+'ndFactor;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'entNormal\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}\x0a',yP='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0avoid\x20add'+'Reflection'+'CC(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20ccRe'+'flection\x20+'+'=\x20calcRefl'+'ection(ref'+'lDir,\x20glos'+'s);\x0a}\x0a#end'+'if\x0a',vP='\x0auniform\x20s'+'amplerCube'+'\x20texture_c'+'ubeMap;\x0aun'+'iform\x20floa'+'t\x20material'+'_reflectiv'+'ity;\x0a\x0avec3'+'\x20calcRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20lookup'+'Vec\x20=\x20cube'+'MapProject'+'(reflDir);'+'\x0a\x20\x20\x20\x20looku'+'pVec.x\x20*=\x20'+'-1.0;\x0a\x20\x20\x20\x20'+'return\x20{re'+'flectionDe'+'code}(text'+'ureCube(te'+'xture_cube'+'Map,\x20looku'+'pVec));\x0a}\x0a'+'\x0avoid\x20addR'+'eflection('+'vec3\x20reflD'+'ir,\x20float\x20'+'gloss)\x20{\x20\x20'+'\x20\x0a\x20\x20\x20\x20dRef'+'lection\x20+='+'\x20vec4(calc'+'Reflection'+'(reflDir,\x20'+'gloss),\x20ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',xP='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_envAtlas;'+'\x0a#endif\x0aun'+'iform\x20samp'+'lerCube\x20te'+'xture_cube'+'Map;\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'flectivity'+';\x0a\x0avec3\x20ca'+'lcReflecti'+'on(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20cub'+'eMapProjec'+'t(reflDir)'+'\x20*\x20vec3(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20t'+'oSpherical'+'Uv(dir);\x0a\x0a'+'\x20\x20\x20\x20//\x20cal'+'culate\x20rou'+'ghness\x20lev'+'el\x0a\x20\x20\x20\x20flo'+'at\x20level\x20='+'\x20saturate('+'1.0\x20-\x20glos'+'s)\x20*\x205.0;\x0a'+'\x20\x20\x20\x20float\x20'+'ilevel\x20=\x20f'+'loor(level'+');\x0a\x20\x20\x20\x20flo'+'at\x20flevel\x20'+'=\x20level\x20-\x20'+'ilevel;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20sh'+'arp\x20=\x20{ref'+'lectionCub'+'emapDecode'+'}(textureC'+'ube(textur'+'e_cubeMap,'+'\x20dir));\x0a\x20\x20'+'\x20\x20vec3\x20rou'+'ghA\x20=\x20{ref'+'lectionDec'+'ode}(textu'+'re2D(textu'+'re_envAtla'+'s,\x20mapRoug'+'hnessUv(uv'+',\x20ilevel))'+');\x0a\x20\x20\x20\x20vec'+'3\x20roughB\x20='+'\x20{reflecti'+'onDecode}('+'texture2D('+'texture_en'+'vAtlas,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20proc'+'essEnviron'+'ment(mix(s'+'harp,\x20mix('+'roughA,\x20ro'+'ughB,\x20flev'+'el),\x20min(l'+'evel,\x201.0)'+'));\x0a}\x0a\x0avoi'+'d\x20addRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x20\x20\x20\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20+=\x20vec'+'4(calcRefl'+'ection(ref'+'lDir,\x20glos'+'s),\x20materi'+'al_reflect'+'ivity);\x0a}\x0a',TP='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_env'+'Atlas;\x0a#en'+'dif\x0aunifor'+'m\x20float\x20ma'+'terial_ref'+'lectivity;'+'\x0a\x0a//\x20calcu'+'late\x20mip\x20l'+'evel\x20for\x20s'+'hiny\x20refle'+'ction\x20give'+'n\x20equirect'+'\x20coords\x20uv'+'.\x0afloat\x20sh'+'inyMipLeve'+'l(vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20dx\x20=\x20dFd'+'x(uv);\x0a\x20\x20\x20'+'\x20vec2\x20dy\x20='+'\x20dFdy(uv);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20s'+'econd\x20dF\x20a'+'t\x20180\x20degr'+'ees\x0a\x20\x20\x20\x20ve'+'c2\x20uv2\x20=\x20v'+'ec2(fract('+'uv.x\x20+\x200.5'+'),\x20uv.y);\x0a'+'\x20\x20\x20\x20vec2\x20d'+'x2\x20=\x20dFdx('+'uv2);\x0a\x20\x20\x20\x20'+'vec2\x20dy2\x20='+'\x20dFdy(uv2)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'min\x20of\x20bot'+'h\x20sets\x20of\x20'+'dF\x20to\x20hand'+'le\x20discont'+'inuity\x20at\x20'+'the\x20azim\x20e'+'dge\x0a\x20\x20\x20\x20fl'+'oat\x20maxd\x20='+'\x20min(max(d'+'ot(dx,\x20dx)'+',\x20dot(dy,\x20'+'dy)),\x20max('+'dot(dx2,\x20d'+'x2),\x20dot(d'+'y2,\x20dy2)))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'0.5\x20*\x20log2'+'(maxd)\x20-\x201'+'.0\x20+\x20textu'+'reBias,\x200.'+'0,\x205.0);\x0a}'+'\x0a\x0avec3\x20cal'+'cReflectio'+'n(vec3\x20ref'+'lDir,\x20floa'+'t\x20gloss)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3(-1.'+'0,\x201.0,\x201.'+'0);\x0a\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20to'+'SphericalU'+'v(dir);\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20roug'+'hness\x20leve'+'l\x0a\x20\x20\x20\x20floa'+'t\x20level\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20float\x20i'+'level\x20=\x20fl'+'oor(level)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'accessing\x20'+'the\x20shiny\x20'+'(top\x20level'+')\x20reflecti'+'on\x20-\x20perfo'+'rm\x20manual\x20'+'mipmap\x20loo'+'kup\x0a\x20\x20\x20\x20fl'+('oat\x20level2'+'\x20=\x20shinyMi'+'pLevel(uv\x20'+'*\x20atlasSiz'+'e);\x0a\x20\x20\x20\x20fl'+'oat\x20ilevel'+'2\x20=\x20floor('+'level2);\x0a\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v0,\x20uv1;\x0a\x20'+'\x20\x20\x20float\x20w'+'eight;\x0a\x20\x20\x20'+'\x20if\x20(ileve'+'l\x20==\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uv0\x20=\x20mapS'+'hinyUv(uv,'+'\x20ilevel2);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v1\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x20level2\x20'+'-\x20ilevel2;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20acces'+'sing\x20rough'+'\x20reflectio'+'n\x20-\x20just\x20s'+'ample\x20the\x20'+'same\x20part\x20'+'twice\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'uv1\x20=\x20mapR'+'oughnessUv'+'(uv,\x20ileve'+'l);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20weight\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'3\x20linearA\x20'+'=\x20{reflect'+'ionDecode}'+'(texture2D'+'(texture_e'+'nvAtlas,\x20u'+'v0));\x0a\x20\x20\x20\x20'+'vec3\x20linea'+'rB\x20=\x20{refl'+'ectionDeco'+'de}(textur'+'e2D(textur'+'e_envAtlas'+',\x20uv1));\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near0\x20=\x20mi'+'x(linearA,'+'\x20linearB,\x20'+'weight);\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near1\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(line'+'ar0,\x20linea'+'r1,\x20level\x20'+'-\x20ilevel))'+';\x0a}\x0a\x0avoid\x20'+'addReflect'+'ion(vec3\x20r'+'eflDir,\x20fl'+'oat\x20gloss)'+'\x20{\x20\x20\x20\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20+=\x20vec4('+'calcReflec'+'tion(reflD'+'ir,\x20gloss)'+',\x20material'+'_reflectiv'+'ity);\x0a}\x0a'),wP='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'uniform\x20sa'+'mpler2D\x20te'+'xture_sphe'+'reMap;\x0auni'+'form\x20float'+'\x20material_'+'reflectivi'+'ty;\x0a\x0avec3\x20'+'calcReflec'+'tion(vec3\x20'+'reflDir,\x20f'+'loat\x20gloss'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20reflDir'+'V\x20=\x20(mat3('+'matrix_vie'+'w)\x20*\x20reflD'+'ir);\x0a\x0a\x20\x20\x20\x20'+'float\x20m\x20=\x20'+'2.0\x20*\x20sqrt'+'(dot(reflD'+'irV.xy,\x20re'+'flDirV.xy)'+'\x20+\x20(reflDi'+'rV.z\x20+\x201.0'+')\x20*\x20(reflD'+'irV.z\x20+\x201.'+'0));\x0a\x20\x20\x20\x20v'+'ec2\x20sphere'+'MapUv\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(texture2'+'D(texture_'+'sphereMap,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0av'+'oid\x20addRef'+'lection(ve'+'c3\x20reflDir'+',\x20float\x20gl'+'oss)\x20{\x20\x20\x20\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20+=\x20v'+'ec4(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20mate'+'rial_refle'+'ctivity);\x0a'+'}\x0a',EP='\x0a\x0avoid\x20add'+'Reflection'+'Sheen(vec3'+'\x20worldNorm'+'al,\x20vec3\x20v'+'iewDir,\x20fl'+'oat\x20gloss)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20NoV\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'float\x20alph'+'aG\x20=\x20gloss'+'\x20*\x20gloss;\x0a'+'\x0a\x20\x20\x20\x20//\x20Av'+'oid\x20using\x20'+'a\x20LUT\x20and\x20'+'approximat'+'e\x20the\x20valu'+'es\x20analyti'+'cally\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'gloss\x20<\x200.'+'25\x20?\x20-339.'+'2\x20*\x20alphaG'+'\x20+\x20161.4\x20*'+'\x20gloss\x20-\x202'+'5.9\x20:\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95;\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20gl'+'oss\x20<\x200.25'+'\x20?\x2044.0\x20*\x20'+'alphaG\x20-\x202'+'3.7\x20*\x20glos'+'s\x20+\x203.26\x20:'+'\x201.97\x20*\x20al'+'phaG\x20-\x203.2'+'7\x20*\x20gloss\x20'+'+\x200.72;\x0a\x20\x20'+'\x20\x20float\x20DG'+'\x20=\x20exp(\x20a\x20'+'*\x20NoV\x20+\x20b\x20'+')\x20+\x20(\x20glos'+'s\x20<\x200.25\x20?'+'\x200.0\x20:\x200.1'+'\x20*\x20(\x20gloss'+'\x20-\x200.25\x20)\x20'+');\x0a\x20\x20\x20\x20sRe'+'flection\x20+'+'=\x20calcRefl'+'ection(wor'+'ldNormal,\x20'+'0.0)\x20*\x20sat'+'urate(DG);'+'\x0a}\x0a',bP='\x0avec3\x20refr'+'act2(vec3\x20'+'viewVec,\x20v'+'ec3\x20normal'+',\x20float\x20IO'+'R)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20vn\x20=\x20'+'dot(viewVe'+'c,\x20normal)'+';\x0a\x20\x20\x20\x20floa'+'t\x20k\x20=\x201.0\x20'+'-\x20IOR\x20*\x20IO'+'R\x20*\x20(1.0\x20-'+'\x20vn\x20*\x20vn);'+'\x0a\x20\x20\x20\x20vec3\x20'+'refrVec\x20=\x20'+'IOR\x20*\x20view'+'Vec\x20-\x20(IOR'+'\x20*\x20vn\x20+\x20sq'+'rt(k))\x20*\x20n'+'ormal;\x0a\x20\x20\x20'+'\x20return\x20re'+'frVec;\x0a}\x0a\x0a'+'void\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20vec3\x20w'+'orldNormal'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20viewDir,'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20thicknes'+'s,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20albedo'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20transmi'+'ssion,\x0a\x20\x20\x20'+'\x20float\x20ref'+'ractionInd'+'ex,\x0a\x20\x20\x20\x20fl'+'oat\x20disper'+'sion\x0a#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20,\x20'+'vec3\x20iride'+'scenceFres'+'nel,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceInte'+'nsity\x0a#end'+'if\x20\x0a)\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20s'+'ame\x20reflec'+'tion\x20code\x20'+'with\x20refra'+'ction\x20vect'+'or\x0a\x20\x20\x20\x20vec'+'4\x20tmpRefl\x20'+'=\x20dReflect'+'ion;\x0a\x20\x20\x20\x20v'+'ec3\x20reflec'+'tionDir\x20=\x20'+'refract2(-'+'viewDir,\x20w'+'orldNormal'+',\x20refracti'+'onIndex);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve'+'c4(0);\x0a\x20\x20\x20'+'\x20addReflec'+'tion(refle'+'ctionDir,\x20'+'gloss);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20dRe'+'flection.r'+'gb\x20*\x20albed'+'o,\x20transmi'+'ssion);\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20=\x20tmpR'+'efl;\x0a}\x0a',AP='\x0auniform\x20f'+'loat\x20mater'+'ial_invAtt'+'enuationDi'+'stance;\x0aun'+'iform\x20vec3'+'\x20material_'+'attenuatio'+'n;\x0a\x0avec3\x20e'+'valRefract'+'ionColor(v'+'ec3\x20refrac'+'tionVector'+',\x20float\x20gl'+'oss,\x20float'+'\x20refractio'+'nIndex)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20Th'+'e\x20refracti'+'on\x20point\x20i'+'s\x20the\x20entr'+'y\x20point\x20+\x20'+'vector\x20to\x20'+'exit\x20point'+'\x0a\x20\x20\x20\x20vec4\x20'+'pointOfRef'+'raction\x20=\x20'+'vec4(vPosi'+'tionW\x20+\x20re'+'fractionVe'+'ctor,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'Project\x20to'+'\x20texture\x20s'+'pace\x20so\x20we'+'\x20can\x20sampl'+'e\x20it\x0a\x20\x20\x20\x20v'+'ec4\x20projec'+'tionPoint\x20'+'=\x20matrix_v'+'iewProject'+'ion\x20*\x20poin'+'tOfRefract'+'ion;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20bui'+'lt-in\x20getG'+'rabScreenP'+'os\x20functio'+'n\x20to\x20conve'+'rt\x20screen\x20'+'position\x20t'+'o\x20grab\x20tex'+'ture\x20uv\x20co'+'ords\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etGrabScre'+'enPos(proj'+'ectionPoin'+'t);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Use\x20IOR\x20'+'and\x20roughn'+'ess\x20to\x20sel'+'ect\x20mip\x0a\x20\x20'+'\x20\x20float\x20io'+'rToRoughne'+'ss\x20=\x20(1.0\x20'+'-\x20gloss)\x20*'+'\x20clamp((1.'+'0\x20/\x20refrac'+'tionIndex)'+'\x20*\x202.0\x20-\x202'+'.0,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20f'+'loat\x20refra'+'ctionLod\x20='+'\x20log2(uScr'+'eenSize.x)'+'\x20*\x20iorToRo'+'ughness;\x0a\x20'+'\x20\x20\x20vec3\x20re'+'fraction\x20='+'\x20texture2D'+'Lod(uScene'+'ColorMap,\x20'+'uv,\x20refrac'+'tionLod).r'+'gb;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20refr'+'action;\x0a}\x0a'+'\x0avoid\x20addR'+'efraction('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20thickne'+'ss,\x20\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+('3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20albed'+'o,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20transm'+'ission,\x0a\x20\x20'+'\x20\x20float\x20re'+'fractionIn'+'dex,\x0a\x20\x20\x20\x20f'+'loat\x20dispe'+'rsion\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a)\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20Extr'+'act\x20scale\x20'+'from\x20the\x20m'+'odel\x20trans'+'form\x0a\x20\x20\x20\x20v'+'ec3\x20modelS'+'cale;\x0a\x20\x20\x20\x20'+'modelScale'+'.x\x20=\x20lengt'+'h(vec3(mat'+'rix_model['+'0].xyz));\x0a'+'\x20\x20\x20\x20modelS'+'cale.y\x20=\x20l'+'ength(vec3'+'(matrix_mo'+'del[1].xyz'+'));\x0a\x20\x20\x20\x20mo'+'delScale.z'+'\x20=\x20length('+'vec3(matri'+'x_model[2]'+'.xyz));\x0a\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20the\x20'+'refraction'+'\x20vector,\x20s'+'caled\x20by\x20t'+'he\x20thickne'+'ss\x20and\x20sca'+'le\x20of\x20the\x20'+'object\x0a\x20\x20\x20'+'\x20vec3\x20scal'+'e\x20=\x20thickn'+'ess\x20*\x20mode'+'lScale;\x0a\x20\x20'+'\x20\x20vec3\x20ref'+'ractionVec'+'tor\x20=\x20norm'+'alize(refr'+'act(-viewD'+'ir,\x20worldN'+'ormal,\x20ref'+'ractionInd'+'ex))\x20*\x20sca'+'le;\x0a\x20\x20\x20\x20ve'+'c3\x20refract'+'ion\x20=\x20eval'+'Refraction'+'Color(refr'+'actionVect'+'or,\x20gloss,'+'\x20refractio'+'nIndex);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20bas'+'ed\x20on\x20the\x20'+'dispersion'+'\x20material\x20'+'property,\x20'+'calculate\x20'+'modified\x20r'+'efraction\x20'+'index\x20valu'+'es\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20for\x20R\x20'+'and\x20B\x20chan'+'nels\x20and\x20e'+'valuate\x20th'+'e\x20refracti'+'on\x20color\x20f'+'or\x20them.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20halfSpr'+'ead\x20=\x20(1.0'+'\x20/\x20refract'+'ionIndex\x20-')+('\x201.0)\x20*\x200.'+'025\x20*\x20disp'+'ersion;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20refract'+'ionIndexR\x20'+'=\x20refracti'+'onIndex\x20-\x20'+'halfSpread'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'refraction'+'Vector\x20=\x20n'+'ormalize(r'+'efract(-vi'+'ewDir,\x20wor'+'ldNormal,\x20'+'refraction'+'IndexR))\x20*'+'\x20scale;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20refr'+'action.r\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'xR).r;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20refracti'+'onIndexB\x20='+'\x20refractio'+'nIndex\x20+\x20h'+'alfSpread;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efractionV'+'ector\x20=\x20no'+'rmalize(re'+'fract(-vie'+'wDir,\x20worl'+'dNormal,\x20r'+'efractionI'+'ndexB))\x20*\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20refra'+'ction.b\x20=\x20'+'evalRefrac'+'tionColor('+'refraction'+'Vector,\x20gl'+'oss,\x20refra'+'ctionIndex'+'B).b;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20Trans'+'mittance\x20i'+'s\x20our\x20fina'+'l\x20refracti'+'on\x20color\x0a\x20'+'\x20\x20\x20vec3\x20tr'+'ansmittanc'+'e;\x0a\x20\x20\x20\x20if\x20'+'(material_'+'invAttenua'+'tionDistan'+'ce\x20!=\x200.0)'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'attenuatio'+'n\x20=\x20-log(m'+'aterial_at'+'tenuation)'+'\x20*\x20materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans'+'mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20vec3'+'\x20fresnel\x20='+'\x20vec3(1.0)'+'\x20-\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot(')+('viewDir,\x20w'+'orldNormal'+'),\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20ref'+'raction\x20*\x20'+'transmitta'+'nce\x20*\x20fres'+'nel,\x20trans'+'mission);\x0a'+'}\x0a'),CP='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0a//\x20sourc'+'e\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'lerCube\x20so'+'urceCube;\x0a'+'#else\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20so'+'urceTex;\x0a#'+'endif\x0a\x0a#if'+'def\x20USE_SA'+'MPLES_TEX\x0a'+'\x20\x20\x20\x20//\x20sam'+'ples\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20sam'+'plesTex;\x0a\x20'+'\x20\x20\x20uniform'+'\x20vec2\x20samp'+'lesTexInve'+'rseSize;\x0a#'+'endif\x0a\x0a//\x20'+'params:\x0a//'+'\x20x\x20-\x20targe'+'t\x20cubemap\x20'+'face\x200..6\x0a'+'//\x20y\x20-\x20tar'+'get\x20image\x20'+'total\x20pixe'+'ls\x0a//\x20z\x20-\x20'+'source\x20cub'+'emap\x20size\x0a'+'uniform\x20ve'+'c3\x20params;'+'\x0a\x0afloat\x20ta'+'rgetFace()'+'\x20{\x20return\x20'+'params.x;\x20'+'}\x0afloat\x20ta'+'rgetTotalP'+'ixels()\x20{\x20'+'return\x20par'+'ams.y;\x20}\x0af'+'loat\x20sourc'+'eTotalPixe'+'ls()\x20{\x20ret'+'urn\x20params'+'.z;\x20}\x0a\x0aflo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0a#i'+'nclude\x20\x22de'+'codePS\x22\x0a#i'+'nclude\x20\x22en'+'codePS\x22\x0a\x0a/'+'/--\x20suppor'+'ted\x20projec'+'tions\x0a\x0avec'+'3\x20modifySe'+'ams(vec3\x20d'+'ir,\x20float\x20'+'scale)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20ad'+'ir\x20=\x20abs(d'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20M\x20=\x20m'+'ax(max(adi'+'r.x,\x20adir.'+'y),\x20adir.z'+');\x0a\x20\x20\x20\x20ret'+'urn\x20dir\x20/\x20'+'M\x20*\x20vec3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.x\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20adir.y\x20'+'==\x20M\x20?\x201.0'+'\x20:\x20scale,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.z\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0avec2\x20t'+'oSpherical'+'(vec3\x20dir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec2(d'+'ir.xz\x20==\x20v'+'ec2(0.0)\x20?'+('\x200.0\x20:\x20ata'+'n(dir.x,\x20d'+'ir.z),\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0avec3\x20f'+'romSpheric'+'al(vec2\x20uv'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec3('+'cos(uv.y)\x20'+'*\x20sin(uv.x'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'in(uv.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cos('+'uv.y)\x20*\x20co'+'s(uv.x));\x0a'+'}\x0a\x0avec3\x20ge'+'tDirection'+'Equirect()'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20fromSp'+'herical((v'+'ec2(vUv0.x'+',\x201.0\x20-\x20vU'+'v0.y)\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20vec2(PI,\x20'+'PI\x20*\x200.5))'+';\x0a}\x0a\x0a//\x20oc'+'tahedral\x20c'+'ode,\x20based'+'\x20on\x20https:'+'//jcgt.org'+'/published'+'/0003/02/0'+'1/\x0a//\x20\x22Sur'+'vey\x20of\x20Eff'+'icient\x20Rep'+'resentatio'+'ns\x20for\x20Ind'+'ependent\x20U'+'nit\x20Vector'+'s\x22\x20by\x20Cigo'+'lle,\x20Donow'+',\x20Evangela'+'kos,\x20Mara,'+'\x20McGuire,\x20'+'Meyer\x0a\x0aflo'+'at\x20signNot'+'Zero(float'+'\x20k){\x0a\x20\x20\x20\x20r'+'eturn(k\x20>='+'\x200.0)\x20?\x201.'+'0\x20:\x20-1.0;\x0a'+'}\x0a\x0avec2\x20si'+'gnNotZero('+'vec2\x20v)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20vec2(sign'+'NotZero(v.'+'x),\x20signNo'+'tZero(v.y)'+');\x0a}\x0a\x0a//\x20R'+'eturns\x20a\x20u'+'nit\x20vector'+'.\x20Argument'+'\x20o\x20is\x20an\x20o'+'ctahedral\x20'+'vector\x20pac'+'ked\x20via\x20oc'+'tEncode,\x20o'+'n\x20the\x20[-1,'+'\x20+1]\x20squar'+'e\x0avec3\x20oct'+'Decode(vec'+'2\x20o)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20v\x20=\x20'+'vec3(o.x,\x20'+'1.0\x20-\x20abs('+'o.x)\x20-\x20abs'+'(o.y),\x20o.y'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20v.xz\x20=\x20('+'1.0\x20-\x20abs('+'v.zx))\x20*\x20s'+'ignNotZero'+'(v.xz);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20norma'+'lize(v);\x0a}'+'\x0a\x0avec3\x20get'+'DirectionO'+'ctahedral('+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20octDe'+'code(vec2(')+('vUv0.x,\x201.'+'0\x20-\x20vUv0.y'+')\x20*\x202.0\x20-\x20'+'1.0);\x0a}\x0a\x0a/'+'/\x20Assumes\x20'+'that\x20v\x20is\x20'+'a\x20unit\x20vec'+'tor.\x20The\x20r'+'esult\x20is\x20a'+'n\x20octahedr'+'al\x20vector\x20'+'on\x20the\x20[-1'+',\x20+1]\x20squa'+'re\x0avec2\x20oc'+'tEncode(in'+'\x20vec3\x20v)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20vec2'+'\x20result\x20=\x20'+'v.xz\x20*\x20(1.'+'0\x20/\x20l1norm'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20result\x20='+'\x20(1.0\x20-\x20ab'+'s(result.y'+'x))\x20*\x20sign'+'NotZero(re'+'sult.xy);\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20res'+'ult;\x0a}\x0a\x0a//'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'///////\x0a\x0a#'+'ifdef\x20CUBE'+'MAP_SOURCE'+'\x0a\x20\x20\x20\x20vec4\x20'+'sampleCube'+'map(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureCu'+'be(sourceC'+'ube,\x20modif'+'ySeams(dir'+',\x201.0));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eCubemap(v'+'ec2\x20sph)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leCubemap('+'fromSpheri'+'cal(sph));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20vec4\x20sam'+'pleCubemap'+'(vec3\x20dir,'+'\x20float\x20mip'+'Level)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20textur'+'eCubeLod(s'+'ourceCube,'+'\x20modifySea'+'ms(dir,\x201.'+'0),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleCub'+'emap(vec2\x20'+'sph,\x20float'+'\x20mipLevel)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleCubema'+'p(fromSphe'+'rical(sph)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eEquirect('+'vec2\x20sph)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'sph\x20/\x20vec2'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'ture2D(sou'+'rceTex,\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec4\x20s'+'ampleEquir'+'ect(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleEqu'+'irect(toSp'+'herical(di'+'r));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleEqu'+'irect(vec2'+'\x20sph,\x20floa'+'t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20sph\x20/\x20ve'+'c2(PI\x20*\x202.'+'0,\x20PI)\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2DLo'+'d(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y),\x20mip'+'Level);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Equirect(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20sampleEq'+'uirect(toS'+'pherical(d'+'ir),\x20mipLe'+'vel);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20o'+'ctEncode(d'+'ir)\x20*\x200.5\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20texture2'+'D(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Octahedral'+'(vec2\x20sph)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleOctahe'+'dral(fromS'+'pherical(s'+'ph));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20octEn'+'code(dir)\x20'+'*\x200.5\x20+\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20te'+'xture2DLod'+'(sourceTex'+',\x20vec2(uv.'+'x,\x201.0\x20-\x20u'+'v.y),\x20mipL'+'evel);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20sampleO'+'ctahedral('+'vec2\x20sph,\x20'+'float\x20mipL'+'evel)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleO'+'ctahedral('+'fromSpheri'+'cal(sph),\x20')+('mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0avec3'+'\x20getDirect'+'ionCubemap'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec2\x20st\x20=\x20v'+'Uv0\x20*\x202.0\x20'+'-\x201.0;\x0a\x20\x20\x20'+'\x20float\x20fac'+'e\x20=\x20target'+'Face();\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ve'+'c;\x0a\x20\x20\x20\x20if\x20'+'(face\x20==\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec\x20=\x20'+'vec3(1,\x20-s'+'t.y,\x20-st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3(-1,\x20-st.'+'y,\x20st.x);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(face\x20'+'==\x202.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c\x20=\x20vec3(s'+'t.x,\x201,\x20st'+'.y);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x203.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3(st.x,\x20'+'-1,\x20-st.y)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(fac'+'e\x20==\x204.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec\x20=\x20vec3'+'(st.x,\x20-st'+'.y,\x201);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec\x20=\x20vec3('+'-st.x,\x20-st'+'.y,\x20-1);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(mod'+'ifySeams(v'+'ec,\x201.0));'+'\x0a}\x0a\x0amat3\x20m'+'atrixFromV'+'ector(vec3'+'\x20n)\x20{\x20//\x20f'+'risvad\x0a\x20\x20\x20'+'\x20float\x20a\x20='+'\x201.0\x20/\x20(1.'+'0\x20+\x20n.z);\x0a'+'\x20\x20\x20\x20float\x20'+'b\x20=\x20-n.x\x20*'+'\x20n.y\x20*\x20a;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'1\x20=\x20vec3(1'+'.0\x20-\x20n.x\x20*'+'\x20n.x\x20*\x20a,\x20'+'b,\x20-n.x);\x0a'+'\x20\x20\x20\x20vec3\x20b'+'2\x20=\x20vec3(b'+',\x201.0\x20-\x20n.'+'y\x20*\x20n.y\x20*\x20'+'a,\x20-n.y);\x0a'+'\x20\x20\x20\x20return'+'\x20mat3(b1,\x20'+'b2,\x20n);\x0a}\x0a'+'\x0amat3\x20matr'+'ixFromVect'+'orSlow(vec'+'3\x20n)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20up\x20='+'\x20(1.0\x20-\x20ab'+'s(n.y)\x20<=\x20'+'0.0000001)'+'\x20?\x20vec3(0.'+'0,\x200.0,\x20n.'+'y\x20>\x200.0\x20?\x20'+'1.0\x20:\x20-1.0'+')\x20:\x20vec3(0'+'.0,\x201.0,\x200'+'.0);\x0a\x20\x20\x20\x20v'+'ec3\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20vec'+'3\x20y\x20=\x20cros')+('s(n,\x20x);\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(x,\x20y,'+'\x20n);\x0a}\x0a\x0ave'+'c4\x20reproje'+'ct()\x20{\x0a\x20\x20\x20'+'\x20if\x20({NUM_'+'SAMPLES}\x20<'+'=\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20si'+'ngle\x20sampl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20{EN'+'CODE_FUNC}'+'({DECODE_F'+'UNC}({SOUR'+'CE_FUNC}({'+'TARGET_FUN'+'C}())));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multi\x20s'+'ample\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20t'+'\x20=\x20{TARGET'+'_FUNC}();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20tu\x20=\x20dF'+'dx(t);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'tv\x20=\x20dFdy('+'t);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(float\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'++u)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(float\x20'+'v\x20=\x200.0;\x20v'+'\x20<\x20{NUM_SA'+'MPLES_SQRT'+'};\x20++v)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20resu'+'lt\x20+=\x20{DEC'+'ODE_FUNC}('+'{SOURCE_FU'+'NC}(normal'+'ize(t\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20tu'+'\x20*\x20(u\x20/\x20{N'+'UM_SAMPLES'+'_SQRT}\x20-\x200'+'.5)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20tv\x20*'+'\x20(v\x20/\x20{NUM'+'_SAMPLES_S'+'QRT}\x20-\x200.5'+'))));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20({'+'NUM_SAMPLE'+'S_SQRT}\x20*\x20'+'{NUM_SAMPL'+'ES_SQRT}))'+';\x0a\x20\x20\x20\x20}\x0a}\x0a'+'\x0avec4\x20unpa'+'ckFloat\x20=\x20'+'vec4(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20void\x20'+'unpackSamp'+'le(int\x20i,\x20'+'out\x20vec3\x20L'+',\x20out\x20floa')+('t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20u\x20'+'=\x20(float(i'+'\x20*\x204)\x20+\x200.'+'5)\x20*\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20v\x20=\x20(f'+'loor(u)\x20+\x20'+'0.5)\x20*\x20sam'+'plesTexInv'+'erseSize.y'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20raw;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.x\x20=\x20dot'+'(texture2D'+'(samplesTe'+'x,\x20vec2(u,'+'\x20v)),\x20unpa'+'ckFloat);\x20'+'u\x20+=\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'texture2D('+'samplesTex'+',\x20vec2(u,\x20'+'v)),\x20unpac'+'kFloat);\x20u'+'\x20+=\x20sample'+'sTexInvers'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.z\x20=\x20dot(t'+'exture2D(s'+'amplesTex,'+'\x20vec2(u,\x20v'+')),\x20unpack'+'Float);\x20u\x20'+'+=\x20samples'+'TexInverse'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20raw.'+'w\x20=\x20dot(te'+'xture2D(sa'+'mplesTex,\x20'+'vec2(u,\x20v)'+'),\x20unpackF'+'loat);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20L.xy'+'z\x20=\x20raw.xy'+'z\x20*\x202.0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20mipLeve'+'l\x20=\x20raw.w\x20'+'*\x208.0;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20convolve\x20'+'an\x20environ'+'ment\x20given'+'\x20pre-gener'+'ated\x20sampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamples()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L')+(',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level))\x20*\x20'+'L.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tot'+'alWeight\x20+'+'=\x20L.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20{ENCODE'+'_FUNC}(res'+'ult\x20/\x20tota'+'lWeight);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20unweig'+'hted\x20versi'+'on\x20of\x20pref'+'ilterSampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamplesUn'+'weighted()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20fl'+'oat({NUM_S'+'AMPLES}));'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20{PROCESS'+'_FUNC}();\x0a'+'}\x0a'),PP='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0auniform'+'\x20vec4\x20uvMo'+'d;\x0avarying'+'\x20vec2\x20vUv0'+';\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20v'+'ec4(vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(vertex_po'+'sition.xy\x20'+'*\x200.5\x20+\x200.'+'5)\x20*\x20uvMod'+'.xy\x20+\x20uvMo'+'d.zw);\x0a}\x0a',MP='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20uScen'+'eDepthMap;'+'\x0a\x0a#ifndef\x20'+'SCREENSIZE'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20SCREENS'+'IZE\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20un'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#ifndef'+'\x20CAMERAPLA'+'NES\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20camera'+'_params;\x20/'+'/\x20x:\x201\x20/\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20\x20y:\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20z:\x20ca'+'mera_near,'+'\x20\x20\x20\x20\x20\x20\x20\x20w:'+'\x20is_ortho\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20lineariz'+'eDepth(flo'+'at\x20z)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'camera_par'+'ams.w\x20==\x200'+'.0)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(camera'+'_params.z\x20'+'*\x20camera_p'+'arams.y)\x20/'+'\x20(camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(camer'+'a_params.z'+'\x20-\x20camera_'+'params.y))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20camera'+'_params.z\x20'+'+\x20z\x20*\x20(cam'+'era_params'+'.y\x20-\x20camer'+'a_params.z'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0aflo'+'at\x20delinea'+'rizeDepth('+'float\x20line'+'arDepth)\x20{'+'\x0a\x20\x20\x20\x20if\x20(c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'(camera_pa'+'rams.y\x20*\x20('+'camera_par'+'ams.z\x20-\x20li'+'nearDepth)'+')\x20/\x20(linea'+'rDepth\x20*\x20('+'camera_par'+'ams.z\x20-\x20ca'+'mera_param'+'s.y));\x0a\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(line'+'arDepth\x20-\x20'+'camera_par'+'ams.z)\x20/\x20('+('camera_par'+'ams.y\x20-\x20ca'+'mera_param'+'s.z);\x0a\x20\x20\x20\x20'+'}\x0a}\x0a\x0a//\x20Re'+'trieves\x20re'+'ndered\x20lin'+'ear\x20camera'+'\x20depth\x20by\x20'+'UV\x0afloat\x20g'+'etLinearSc'+'reenDepth('+'vec2\x20uv)\x20{'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SCENE_DE'+'PTHMAP_LIN'+'EAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_FLOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2D(u'+'SceneDepth'+'Map,\x20uv).r'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20textu'+'reSize\x20=\x20t'+'extureSize'+'(uSceneDep'+'thMap,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ivec2\x20t'+'exel\x20=\x20ive'+'c2(uv\x20*\x20ve'+'c2(texture'+'Size));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20data\x20'+'=\x20texelFet'+'ch(uSceneD'+'epthMap,\x20t'+'exel,\x200);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(data.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(uint(d'+'ata.g\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20|\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(uint(dat'+'a.b\x20*\x20255.'+'0)\x20<<\x208u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(data.a\x20'+'*\x20255.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uintBitsTo'+'Float(intB'+'its);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20line'+'arizeDepth'+'(texture2D'+'(uSceneDep'+'thMap,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20float\x20'+'getLinearS'+'creenDepth'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20uv'+'\x20=\x20gl_Frag'+'Coord.xy\x20*'+'\x20uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur')+('n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afloat\x20'+'getLinearD'+'epth(vec3\x20'+'pos)\x20{\x0a\x20\x20\x20'+'\x20return\x20-('+'matrix_vie'+'w\x20*\x20vec4(p'+'os,\x201.0)).'+'z;\x0a}\x0a'),DP='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x20\x0ai'+'nt\x20getShad'+'owCascadeI'+'ndex(vec4\x20'+'shadowCasc'+'adeDistanc'+'es,\x20int\x20sh'+'adowCascad'+'eCount)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20in\x200\x20.'+'.\x20far\x20plan'+'e\x20range\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x0a\x20'+'\x20\x20\x20//\x201.0\x20'+'if\x20depth\x20>'+'=\x20distance'+',\x200.0\x20othe'+'rwise\x0a\x20\x20\x20\x20'+'vec4\x20compa'+'risons\x20=\x20s'+'tep(shadow'+'CascadeDis'+'tances,\x20ve'+'c4(depth))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'sum\x20is\x20the'+'\x20index\x0a\x20\x20\x20'+'\x20int\x20casca'+'deIndex\x20=\x20'+'int(dot(co'+'mparisons,'+'\x20vec4(1.0)'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20limit\x20to'+'\x20actual\x20nu'+'mber\x20of\x20us'+'ed\x20cascade'+'s\x0a\x20\x20\x20\x20retu'+'rn\x20min(cas'+'cadeIndex,'+'\x20shadowCas'+'cadeCount\x20'+'-\x201);\x0a}\x0a\x0a/'+'/\x20function'+'\x20which\x20mod'+'ifies\x20casc'+'ade\x20index\x20'+'to\x20dither\x20'+'between\x20ca'+'scades\x0aint'+'\x20ditherSha'+'dowCascade'+'Index(int\x20'+'cascadeInd'+'ex,\x20vec4\x20s'+'hadowCasca'+'deDistance'+'s,\x20int\x20sha'+'dowCascade'+'Count,\x20flo'+'at\x20blendFa'+'ctor)\x20{\x0a\x20\x0a'+'\x20\x20\x20\x20if\x20(ca'+'scadeIndex'+'\x20<\x20shadowC'+'ascadeCoun'+'t\x20-\x201)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20current'+'RangeEnd\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20transit'+'ionStart\x20='+'\x20blendFact'+'or\x20*\x20curre'+'ntRangeEnd'+';\x20//\x20Start'+'\x20overlap\x20f'+'actor\x20away'+'\x20from\x20the\x20'+'end\x20distan'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x201.0\x20/'+('\x20gl_FragCo'+'ord.w;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'depth\x20>\x20tr'+'ansitionSt'+'art)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Calculat'+'e\x20a\x20transi'+'tion\x20facto'+'r\x20(0.0\x20to\x20'+'1.0)\x20withi'+'n\x20the\x20over'+'lap\x20range\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20tr'+'ansitionFa'+'ctor\x20=\x20smo'+'othstep(tr'+'ansitionSt'+'art,\x20curre'+'ntRangeEnd'+',\x20depth);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Add\x20'+'pseudo-ran'+'dom\x20dither'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ODO:\x20repla'+'ce\x20by\x20user'+'\x20selectabl'+'e\x20ditherin'+'g\x20method\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dit'+'her\x20=\x20frac'+'t(sin(dot('+'gl_FragCoo'+'rd.xy,\x20vec'+'2(12.9898,'+'\x2078.233)))'+'\x20*\x2043758.5'+'453);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(dither\x20<'+'\x20transitio'+'nFactor)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20cas'+'cadeIndex\x20'+'+=\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20return\x20ca'+'scadeIndex'+';\x0a}\x0a\x0avec3\x20'+'fadeShadow'+'(vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'CascadeDis'+'tances)\x20{\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20if\x20th'+'e\x20pixel\x20is'+'\x20past\x20the\x20'+'shadow\x20dis'+'tance,\x20rem'+'ove\x20shadow'+'\x0a\x20\x20\x20\x20//\x20th'+'is\x20enforce'+'s\x20straight'+'\x20line\x20inst'+'ead\x20of\x20cor'+'ner\x20of\x20sha'+'dow\x20which\x20'+'moves\x20when'+'\x20camera\x20ro'+'tates\x20\x20\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x20\x20'+'\x20\x20if\x20(dept'+'h\x20>\x20shadow'+'CascadeDis'+'tances.w)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'shadowCoor'+'d.z\x20=\x20-999'+'9999.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20shad'+'owCoord;\x0a}'+'\x0a'),IP='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afloat\x20lin'+'step(float'+'\x20a,\x20float\x20'+'b,\x20float\x20v'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20satur'+'ate((v\x20-\x20a'+')\x20/\x20(b\x20-\x20a'+'));\x0a}\x0a\x0aflo'+'at\x20reduceL'+'ightBleedi'+'ng(float\x20p'+'Max,\x20float'+'\x20amount)\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'float\x20cheb'+'yshevUpper'+'Bound(vec2'+'\x20moments,\x20'+'float\x20mean'+',\x20float\x20mi'+'nVariance,'+'\x20float\x20lig'+'htBleeding'+'Reduction)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'Compute\x20va'+'riance\x0a\x20\x20\x20'+'\x20float\x20var'+'iance\x20=\x20mo'+'ments.y\x20-\x20'+'(moments.x'+'\x20*\x20moments'+'.x);\x0a\x20\x20\x20\x20v'+'ariance\x20=\x20'+'max(varian'+'ce,\x20minVar'+'iance);\x0a\x0a\x20'+'\x20\x20\x20//\x20Comp'+'ute\x20probab'+'ilistic\x20up'+'per\x20bound\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20mean\x20-'+'\x20moments.x'+';\x0a\x20\x20\x20\x20floa'+'t\x20pMax\x20=\x20v'+'ariance\x20/\x20'+'(variance\x20'+'+\x20(d\x20*\x20d))'+';\x0a\x0a\x20\x20\x20\x20pMa'+'x\x20=\x20reduce'+'LightBleed'+'ing(pMax,\x20'+'lightBleed'+'ingReducti'+'on);\x0a\x0a\x20\x20\x20\x20'+'//\x20One-tai'+'led\x20Chebys'+'hev\x0a\x20\x20\x20\x20re'+'turn\x20(mean'+'\x20<=\x20moment'+'s.x\x20?\x201.0\x20'+':\x20pMax);\x0a}'+'\x0a\x0afloat\x20ca'+'lculateEVS'+'M(vec3\x20mom'+'ents,\x20floa'+'t\x20Z,\x20float'+'\x20vsmBias,\x20'+'float\x20expo'+'nent)\x20{\x0a\x20\x20'+'\x20\x20Z\x20=\x202.0\x20'+'*\x20Z\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20warpedDep'+'th\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20m'+'oments.xy\x20'+'+=\x20vec2(wa'+'rpedDepth,'+'\x20warpedDep'+'th*warpedD'+'epth)\x20*\x20(1'+'.0\x20-\x20momen'+'ts.z);\x0a\x0a\x20\x20'+('\x20\x20float\x20VS'+'MBias\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20float'+'\x20depthScal'+'e\x20=\x20VSMBia'+'s\x20*\x20expone'+'nt\x20*\x20warpe'+'dDepth;\x0a\x20\x20'+'\x20\x20float\x20mi'+'nVariance1'+'\x20=\x20depthSc'+'ale\x20*\x20dept'+'hScale;\x0a\x20\x20'+'\x20\x20return\x20c'+'hebyshevUp'+'perBound(m'+'oments.xy,'+'\x20warpedDep'+'th,\x20minVar'+'iance1,\x200.'+'1);\x0a}\x0a\x0a//\x20'+'------\x20VSM'+'\x2016\x20------'+'\x0a\x0afloat\x20VS'+'M16(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec2\x20'+'texCoords,'+'\x20float\x20res'+'olution,\x20f'+'loat\x20Z,\x20fl'+'oat\x20vsmBia'+'s,\x20float\x20e'+'xponent)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'moments\x20=\x20'+'texture2DL'+'od(tex,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM16('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM16(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM16(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20VSM16('+'TEXTURE_PA'+'SS(shadowM'+'ap),\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----')+('--\x0a\x0afloat\x20'+'VSM32(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20texCoord'+'s,\x20float\x20r'+'esolution,'+'\x20float\x20Z,\x20'+'float\x20vsmB'+'ias,\x20float'+'\x20exponent)'+'\x20{\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20CAPS_'+'TEXTURE_FL'+'OAT_FILTER'+'ABLE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20te'+'xture2DLod'+'(tex,\x20texC'+'oords,\x200.0'+').xyz;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ma'+'nual\x20bilin'+'ear\x20filter'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pi'+'xelSize\x20=\x20'+'1.0\x20/\x20reso'+'lution;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20texC'+'oords\x20-=\x20v'+'ec2(pixelS'+'ize);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'00\x20=\x20textu'+'re2DLod(te'+'x,\x20texCoor'+'ds,\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20s10'+'\x20=\x20texture'+'2DLod(tex,'+'\x20texCoords'+'\x20+\x20vec2(pi'+'xelSize,\x200'+'),\x200.0).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20s01\x20'+'=\x20texture2'+'DLod(tex,\x20'+'texCoords\x20'+'+\x20vec2(0,\x20'+'pixelSize)'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20s11\x20='+'\x20texture2D'+'Lod(tex,\x20t'+'exCoords\x20+'+'\x20vec2(pixe'+'lSize),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20fr\x20=\x20frac'+'t(texCoord'+'s\x20*\x20resolu'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'h0\x20=\x20mix(s'+'00,\x20s10,\x20f'+'r.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20h'+'1\x20=\x20mix(s0'+'1,\x20s11,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20mi'+'x(h0,\x20h1,\x20'+'fr.y);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM32('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM32(T')+('EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM32(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20Z\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd.xy,\x20sha'+'dowParams.'+'x,\x20Z,\x20shad'+'owParams.y'+',\x20exponent'+');\x0a}\x0a'),LP='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_ACCEP'+'T(shadowMa'+'p),\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20textur'+'eShadow(sh'+'adowMap,\x20s'+'hadowCoord'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wSpotPCF1x'+'1(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSh'+'adow(shado'+'wMap,\x20shad'+'owCoord);\x0a'+'}\x0a\x0a//\x20----'+'-\x20Omni\x20Sam'+'pling\x20----'+'-\x0a\x0a#ifndef'+'\x20WEBGPU\x0a\x0af'+'loat\x20getSh'+'adowOmniPC'+'F1x1(sampl'+'erCubeShad'+'ow\x20shadowM'+'ap,\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20float\x20sh'+'adowZ\x20=\x20le'+'ngth(light'+'Dir)\x20*\x20sha'+'dowParams.'+'w\x20+\x20shadow'+'Params.z;\x0a'+'\x20\x20\x20\x20return'+'\x20texture(s'+'hadowMap,\x20'+'vec4(light'+'Dir,\x20shado'+'wZ));\x0a}\x0a\x0a#'+'endif\x0a',RP='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_ACCE'+'PT(shadowM'+'ap),\x20vec3\x20'+'shadowCoor'+'d,\x20vec3\x20sh'+'adowParams'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20sh'+'adowCoord.'+'z;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20sha'+'dowCoord.x'+'y\x20*\x20shadow'+'Params.x;\x20'+'//\x201\x20unit\x20'+'-\x201\x20texel\x0a'+'\x20\x20\x20\x20float\x20'+'shadowMapS'+'izeInv\x20=\x201'+'.0\x20/\x20shado'+'wParams.x;'+'\x0a\x20\x20\x20\x20vec2\x20'+'base_uv\x20=\x20'+'floor(uv\x20+'+'\x200.5);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20(uv.x\x20+\x200'+'.5\x20-\x20base_'+'uv.x);\x0a\x20\x20\x20'+'\x20float\x20t\x20='+'\x20(uv.y\x20+\x200'+'.5\x20-\x20base_'+'uv.y);\x20\x0a\x20\x20'+'\x20\x20base_uv\x20'+'-=\x20vec2(0.'+'5);\x0a\x20\x20\x20\x20ba'+'se_uv\x20*=\x20s'+'hadowMapSi'+'zeInv;\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'uw0\x20=\x20(3.0'+'\x20-\x202.0\x20*\x20s'+');\x0a\x20\x20\x20\x20flo'+'at\x20uw1\x20=\x20('+'1.0\x20+\x202.0\x20'+'*\x20s);\x0a\x0a\x20\x20\x20'+'\x20float\x20u0\x20'+'=\x20(2.0\x20-\x20s'+')\x20/\x20uw0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20f'+'loat\x20u1\x20=\x20'+'s\x20/\x20uw1\x20+\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(3.0\x20-\x202'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20t)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20v0\x20=\x20(2'+'.0\x20-\x20t)\x20/\x20'+'vw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20v1\x20=\x20t\x20/\x20'+'vw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20u0\x20='+'\x20u0\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v0\x20=\x20v0\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u1\x20=\x20'+'u1\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'1\x20=\x20v1\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+('sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw0\x20*\x20v'+'w1\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u0,\x20v'+'1,\x20z));\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w1\x20*\x20vw1\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u1,\x20v1,\x20z'+'));\x0a\x0a\x20\x20\x20\x20s'+'um\x20*=\x201.0f'+'\x20/\x2016.0;\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowPCF3x3('+'SHADOWMAP_'+'ACCEPT(sha'+'dowMap),\x20v'+'ec3\x20shadow'+'Coord,\x20vec'+'4\x20shadowPa'+'rams)\x20{\x0a\x20\x20'+'\x20\x20return\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_PASS'+'(shadowMap'+'),\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowSpotPCF'+'3x3(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3('+'SHADOWMAP_'+'PASS(shado'+'wMap),\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0a//\x20-----'+'\x20Omni\x20Samp'+'ling\x20-----'+'\x0a\x0a#ifndef\x20'+'WEBGPU\x0a\x0afl'+'oat\x20getSha'+'dowOmniPCF'+'3x3(sample'+'rCubeShado'+'w\x20shadowMa'+'p,\x20vec4\x20sh'+'adowParams'+',\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a\x20\x20\x20\x20fl'+'oat\x20shadow'+'Z\x20=\x20length'+'(dir)\x20*\x20sh'+'adowParams'+'.w\x20+\x20shado'+'wParams.z;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x0a\x20\x20\x20\x20'+'float\x20z\x20=\x20'+'1.0\x20/\x20floa'+'t(textureS'+'ize(shadow'+'Map,\x200));\x0a'+'\x20\x20\x20\x20vec3\x20t'+'c\x20=\x20normal'+'ize(dir);\x0a'+'\x0a\x20\x20\x20\x20//\x20av'+'erage\x204\x20sa'+'mples\x20-\x20no'+'t\x20a\x20strict')+('\x203x3\x20PCF\x20b'+'ut\x20that\x27s\x20'+'tricky\x20wit'+'h\x20cubemaps'+'\x0a\x20\x20\x20\x20mediu'+'mp\x20vec4\x20sh'+'adows;\x0a\x20\x20\x20'+'\x20shadows.x'+'\x20=\x20texture'+'(shadowMap'+',\x20vec4(tc\x20'+'+\x20vec3(\x20z,'+'\x20z,\x20z),\x20sh'+'adowZ));\x0a\x20'+'\x20\x20\x20shadows'+'.y\x20=\x20textu'+'re(shadowM'+'ap,\x20vec4(t'+'c\x20+\x20vec3(-'+'z,-z,\x20z),\x20'+'shadowZ));'+'\x0a\x20\x20\x20\x20shado'+'ws.z\x20=\x20tex'+'ture(shado'+'wMap,\x20vec4'+'(tc\x20+\x20vec3'+'(-z,\x20z,-z)'+',\x20shadowZ)'+');\x0a\x20\x20\x20\x20sha'+'dows.w\x20=\x20t'+'exture(sha'+'dowMap,\x20ve'+'c4(tc\x20+\x20ve'+'c3(\x20z,-z,-'+'z),\x20shadow'+'Z));\x0a\x0a\x20\x20\x20\x20'+'return\x20dot'+'(shadows,\x20'+'vec4(0.25)'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wOmniPCF3x'+'3(samplerC'+'ubeShadow\x20'+'shadowMap,'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20lightDi'+'r)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowOmniP'+'CF3x3(shad'+'owMap,\x20sha'+'dowParams,'+'\x20lightDir)'+';\x0a}\x0a\x0a#endi'+'f\x0a'),OP='\x0afloat\x20_ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec3\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20//\x20h'+'ttp://the-'+'witness.ne'+'t/news/201'+'3/09/shado'+'w-mapping-'+'summary-pa'+'rt-1/\x0a\x0a\x20\x20\x20'+'\x20float\x20z\x20='+'\x20shadowCoo'+'rd.z;\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'shadowCoor'+'d.xy\x20*\x20sha'+'dowParams.'+'x;\x20//\x201\x20un'+'it\x20-\x201\x20tex'+'el\x0a\x20\x20\x20\x20flo'+'at\x20shadowM'+'apSizeInv\x20'+'=\x201.0\x20/\x20sh'+'adowParams'+'.x;\x0a\x20\x20\x20\x20ve'+'c2\x20base_uv'+'\x20=\x20floor(u'+'v\x20+\x200.5);\x0a'+'\x20\x20\x20\x20float\x20'+'s\x20=\x20(uv.x\x20'+'+\x200.5\x20-\x20ba'+'se_uv.x);\x0a'+'\x20\x20\x20\x20float\x20'+'t\x20=\x20(uv.y\x20'+'+\x200.5\x20-\x20ba'+'se_uv.y);\x0a'+'\x20\x20\x20\x20base_u'+'v\x20-=\x20vec2('+'0.5);\x0a\x20\x20\x20\x20'+'base_uv\x20*='+'\x20shadowMap'+'SizeInv;\x0a\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20uw0\x20=\x20(4.'+'0\x20-\x203.0\x20*\x20'+'s);\x0a\x20\x20\x20\x20fl'+'oat\x20uw1\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20f'+'loat\x20uw2\x20='+'\x20(1.0\x20+\x203.'+'0\x20*\x20s);\x0a\x0a\x20'+'\x20\x20\x20float\x20u'+'0\x20=\x20(3.0\x20-'+'\x202.0\x20*\x20s)\x20'+'/\x20uw0\x20-\x202.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20u1\x20=\x20(3'+'.0\x20+\x20s)\x20/\x20'+'uw1;\x0a\x20\x20\x20\x20f'+'loat\x20u2\x20=\x20'+'s\x20/\x20uw2\x20+\x20'+'2.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(4.0\x20-\x203'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x207.0;\x0a'+'\x20\x20\x20\x20float\x20'+'vw2\x20=\x20(1.0'+'\x20+\x203.0\x20*\x20t'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20v0\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20t)\x20/\x20vw0'+'\x20-\x202.0;\x0a\x20\x20'+'\x20\x20float\x20v1'+'\x20=\x20(3.0\x20+\x20'+'t)\x20/\x20vw1;\x0a'+'\x20\x20\x20\x20float\x20'+'v2\x20=\x20t\x20/\x20v'+'w2\x20+\x202.0;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20sum\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20u0\x20'+'=\x20u0\x20*\x20sha'+'dowMapSize'+'Inv\x20+\x20base'+'_uv.x;\x0a\x20\x20\x20'+'\x20v0\x20=\x20v0\x20*'+'\x20shadowMap'+'SizeInv\x20+\x20'+'base_uv.y;'+'\x0a\x0a\x20\x20\x20\x20u1\x20='+('\x20u1\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v1\x20=\x20v1\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u2\x20=\x20'+'u2\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'2\x20=\x20v2\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+'sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw2\x20*\x20v'+'w0\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u2,\x20v'+'0,\x20z));\x0a\x0a\x20'+'\x20\x20\x20sum\x20+=\x20'+'uw0\x20*\x20vw1\x20'+'*\x20textureS'+'hadow(shad'+'owMap,\x20vec'+'3(u0,\x20v1,\x20'+'z));\x0a\x20\x20\x20\x20s'+'um\x20+=\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureShado'+'w(shadowMa'+'p,\x20vec3(u1'+',\x20v1,\x20z));'+'\x0a\x20\x20\x20\x20sum\x20+'+'=\x20uw2\x20*\x20vw'+'1\x20*\x20textur'+'eShadow(sh'+'adowMap,\x20v'+'ec3(u2,\x20v1'+',\x20z));\x0a\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w0\x20*\x20vw2\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u0,\x20v2,\x20z'+'));\x0a\x20\x20\x20\x20su'+'m\x20+=\x20uw1\x20*'+'\x20vw2\x20*\x20tex'+'tureShadow'+'(shadowMap'+',\x20vec3(u1,'+'\x20v2,\x20z));\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw2\x20*\x20vw2'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u2,\x20v2,'+'\x20z));\x0a\x0a\x20\x20\x20'+'\x20sum\x20*=\x201.'+'0f\x20/\x20144.0'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20saturate'+'(sum);\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'um;\x0a}\x0a\x0aflo'+'at\x20getShad'+'owPCF5x5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20_g'+'etShadowPC'+'F5x5(SHADO'+'WMAP_PASS('+'shadowMap)'+',\x20shadowCo'+'ord,\x20shado')+('wParams.xy'+'z);\x0a}\x0a\x0aflo'+'at\x20getShad'+'owSpotPCF5'+'x5(SHADOWM'+'AP_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getShad'+'owPCF5x5(S'+'HADOWMAP_P'+'ASS(shadow'+'Map),\x20shad'+'owCoord,\x20s'+'hadowParam'+'s.xyz);\x0a}\x0a'),FP='\x0a\x0a/**\x0a\x20*\x20P'+'CSS\x20is\x20a\x20s'+'hadow\x20samp'+'ling\x20metho'+'d\x20that\x20pro'+'vides\x20cont'+'act\x20harden'+'ing\x20soft\x20s'+'hadows,\x20us'+'ed\x20for\x20omn'+'i\x20and\x20spot'+'\x20lights.\x0a\x20'+'*\x20Based\x20on'+':\x20\x0a\x20*\x20-\x20ht'+'tps://www.'+'gamedev.ne'+'t/tutorial'+'s/programm'+'ing/graphi'+'cs/effect-'+'area-light'+'-shadows-p'+'art-1-pcss'+'-r4971/\x0a\x20*'+'\x20-\x20https:/'+'/github.co'+'m/pboechat'+'/PCSS\x20\x0a\x20*/'+'\x0a\x0a#define\x20'+'PCSS_SAMPL'+'E_COUNT\x2016'+'\x0a\x0auniform\x20'+'float\x20pcss'+'DiskSample'+'s[PCSS_SAM'+'PLE_COUNT]'+';\x0auniform\x20'+'float\x20pcss'+'SphereSamp'+'les[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x0avec2\x20'+'vogelDisk('+'int\x20sample'+'Index,\x20flo'+'at\x20count,\x20'+'float\x20phi,'+'\x20float\x20r)\x20'+'{\x0a\x20\x20\x20\x20cons'+'t\x20float\x20Go'+'ldenAngle\x20'+'=\x202.4;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta\x20=\x20float'+'(sampleInd'+'ex)\x20*\x20Gold'+'enAngle\x20+\x20'+'phi;\x0a\x0a\x20\x20\x20\x20'+'float\x20sine'+'\x20=\x20sin(the'+'ta);\x0a\x20\x20\x20\x20f'+'loat\x20cosin'+'e\x20=\x20cos(th'+'eta);\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(r\x20*\x20cosi'+'ne,\x20r\x20*\x20si'+'ne);\x0a}\x0a\x0ave'+'c3\x20vogelSp'+'here(int\x20s'+'ampleIndex'+',\x20float\x20co'+'unt,\x20float'+'\x20phi,\x20floa'+'t\x20r)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20GoldenA'+'ngle\x20=\x202.4'+';\x0a\x20\x20\x20\x20floa'+'t\x20theta\x20=\x20'+'float(samp'+'leIndex)\x20*'+'\x20GoldenAng'+'le\x20+\x20phi;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20weight\x20=\x20'+'float(samp'+'leIndex)\x20/'+'\x20count;\x0a\x20\x20'+'\x20\x20return\x20v'+'ec3(cos(th'+'eta)\x20*\x20r,\x20'+'weight,\x20si'+'n(theta)\x20*'+'\x20r);\x0a}\x0a\x0afl'+'oat\x20noise('+'vec2\x20scree'+'nPos)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PHI\x20=\x20'+('1.61803398'+'8749894848'+'20459;\x20\x20//'+'\x20Φ\x20=\x20Golde'+'n\x20Ratio\x20\x20\x20'+'\x0a\x20\x20\x20\x20retur'+'n\x20fract(si'+'n(dot(scre'+'enPos\x20*\x20PH'+'I,\x20screenP'+'os))\x20*\x20scr'+'eenPos.x);'+'\x0a}\x0a\x0afloat\x20'+'viewSpaceD'+'epth(float'+'\x20depth,\x20ma'+'t4\x20invProj'+'ection)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'z\x20=\x20depth\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20vec'+'4\x20clipSpac'+'e\x20=\x20vec4(0'+'.0,\x200.0,\x20z'+',\x201.0);\x0a\x20\x20'+'\x20\x20vec4\x20vie'+'wSpace\x20=\x20i'+'nvProjecti'+'on\x20*\x20clipS'+'pace;\x0a\x20\x20\x20\x20'+'return\x20vie'+'wSpace.z;\x0a'+'}\x0a\x0afloat\x20P'+'CSSBlocker'+'Distance(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20sampleCoo'+'rds[PCSS_S'+'AMPLE_COUN'+'T],\x20vec2\x20s'+'hadowCoord'+'s,\x20vec2\x20se'+'archSize,\x20'+'float\x20z,\x20v'+'ec4\x20camera'+'Params)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20blockers\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20float\x20ave'+'rageBlocke'+'r\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20offset\x20='+'\x20sampleCoo'+'rds[i]\x20*\x20s'+'earchSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20sample'+'UV\x20=\x20shado'+'wCoords\x20+\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20blocker'+'\x20=\x20texture'+'2DLod(shad'+'owMap,\x20sam'+'pleUV,\x200.0'+').r;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20i'+'sBlocking\x20'+'=\x20step(blo'+'cker,\x20z);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20bl'+'ockers\x20+=\x20'+'isBlocking'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'averageBlo'+'cker\x20+=\x20bl'+'ocker\x20*\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20if\x20(block'+'ers\x20>\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20aver'+'ageBlocker'+'\x20/\x20blocker'+'s;\x0a\x20\x20\x20\x20ret'+'urn\x20-1.0;\x0a'+'}\x0a\x0afloat\x20P'+'CSS(TEXTUR')+('E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoords,\x20'+'vec4\x20camer'+'aParams,\x20v'+'ec2\x20shadow'+'SearchArea'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'linearizeD'+'epthWithPa'+'rams(shado'+'wCoords.z,'+'\x20cameraPar'+'ams);\x0a\x0a\x20\x20\x20'+'\x20vec2\x20samp'+'lePoints[P'+'CSS_SAMPLE'+'_COUNT];\x0a\x20'+'\x20\x20\x20const\x20f'+'loat\x20PI\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20float\x20n'+'oise\x20=\x20noi'+'se(\x20gl_Fra'+'gCoord.xy\x20'+')\x20*\x202.0\x20*\x20'+'PI;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x200;\x20i\x20<\x20PC'+'SS_SAMPLE_'+'COUNT;\x20i++'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pc'+'ssPresampl'+'e\x20=\x20pcssDi'+'skSamples['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20samplePo'+'ints[i]\x20=\x20'+'vogelDisk('+'i,\x20float(P'+'CSS_SAMPLE'+'_COUNT),\x20n'+'oise,\x20pcss'+'Presample)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20a'+'verageBloc'+'ker\x20=\x20PCSS'+'BlockerDis'+'tance(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20samplePoi'+'nts,\x20shado'+'wCoords.xy'+',\x20shadowSe'+'archArea,\x20'+'receiverDe'+'pth,\x20camer'+'aParams);\x0a'+'\x20\x20\x20\x20if\x20(av'+'erageBlock'+'er\x20==\x20-1.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x201'+'.0;\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depthDiff'+'erence\x20=\x20('+'receiverDe'+'pth\x20-\x20aver'+'ageBlocker'+')\x20/\x203.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20filterRa'+'dius\x20=\x20dep'+'thDifferen'+'ce\x20*\x20shado'+'wSearchAre'+'a;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20for\x20(int\x20'+'i\x20=\x200;\x20i\x20<'+'\x20PCSS_SAMP'+'LE_COUNT;\x20'+'i\x20++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20sampleU'+'V\x20=\x20sample'+'Points[i]\x20'+'*\x20filterRa')+('dius;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleUV\x20=\x20s'+'hadowCoord'+'s.xy\x20+\x20sam'+'pleUV;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20textur'+'e2DLod(sha'+'dowMap,\x20sa'+'mpleUV,\x200.'+'0).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20shadow\x20/\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT);\x0a\x20\x20\x20\x20'+'}\x20\x0a}\x0a\x0a#ifn'+'def\x20WEBGPU'+'\x0a\x0afloat\x20PC'+'SSCubeBloc'+'kerDistanc'+'e(samplerC'+'ube\x20shadow'+'Map,\x20vec3\x20'+'lightDirNo'+'rm,\x20vec3\x20s'+'amplePoint'+'s[PCSS_SAM'+'PLE_COUNT]'+',\x20float\x20z,'+'\x20float\x20sha'+'dowSearchA'+'rea)\x20{\x0a\x20\x20\x20'+'\x20float\x20blo'+'ckers\x20=\x200.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20average'+'Blocker\x20=\x20'+'0.0;\x0a\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20P'+'CSS_SAMPLE'+'_COUNT;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sa'+'mpleDir\x20=\x20'+'lightDirNo'+'rm\x20+\x20sampl'+'ePoints[i]'+'\x20*\x20shadowS'+'earchArea;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'ampleDir\x20='+'\x20normalize'+'(sampleDir'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'ocker\x20=\x20te'+'xtureCubeL'+'od(shadowM'+'ap,\x20sample'+'Dir,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20isB'+'locking\x20=\x20'+'step(block'+'er,\x20z);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20bloc'+'kers\x20+=\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20av'+'erageBlock'+'er\x20+=\x20bloc'+'ker\x20*\x20isBl'+'ocking;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'f\x20(blocker'+'s\x20>\x200.0)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20averag'+'eBlocker\x20/'+'\x20blockers;'+'\x0a\x20\x20\x20\x20retur'+'n\x20-1.0;\x0a}\x0a'+'\x0afloat\x20PCS'+'SCube(samp'+'lerCube\x20sh'+'adowMap,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20shadowC'+'oords,\x20vec')+('4\x20cameraPa'+'rams,\x20floa'+'t\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20samplePoi'+'nts[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x20\x20\x20\x20fl'+'oat\x20noise\x20'+'=\x20noise(\x20g'+'l_FragCoor'+'d.xy\x20)\x20*\x202'+'.0\x20*\x20PI;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20r\x20=\x20pcs'+'sSphereSam'+'ples[i];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sam'+'plePoints['+'i]\x20=\x20vogel'+'Sphere(i,\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT),\x20nois'+'e,\x20r);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'orm\x20=\x20norm'+'alize(ligh'+'tDir);\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20averageB'+'locker\x20=\x20P'+'CSSCubeBlo'+'ckerDistan'+'ce(shadowM'+'ap,\x20lightD'+'irNorm,\x20sa'+'mplePoints'+',\x20receiver'+'Depth,\x20sha'+'dowSearchA'+'rea);\x0a\x20\x20\x20\x20'+'if\x20(averag'+'eBlocker\x20='+'=\x20-1.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20fi'+'lterRadius'+'\x20=\x20((recei'+'verDepth\x20-'+'\x20averageBl'+'ocker)\x20/\x20a'+'verageBloc'+'ker)\x20*\x20sha'+'dowSearchA'+'rea;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20for\x20(int'+'\x20i\x20=\x200;\x20i\x20'+'<\x20PCSS_SAM'+'PLE_COUNT;'+'\x20i++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20offset\x20'+'=\x20samplePo'+'ints[i]\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sampleDir'+'\x20=\x20lightDi'+'rNorm\x20+\x20of'+'fset;\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleDir\x20=\x20'+'normalize('+'sampleDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depth\x20=\x20t'+'extureCube'+'Lod(shadow'+'Map,\x20sampl'+'eDir,\x200.0)'+'.r;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'ow\x20+=\x20step'+'(receiverD'+'epth,\x20dept'+'h);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20s'+'hadow\x20/\x20fl'+'oat(PCSS_S'+'AMPLE_COUN'+'T);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0afloat\x20g'+'etShadowOm'+'niPCSS(sam'+'plerCube\x20s'+'hadowMap,\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'4\x20cameraPa'+'rams,\x20vec2'+'\x20shadowSea'+'rchArea,\x20v'+'ec3\x20lightD'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SCube(shad'+'owMap,\x20sha'+'dowParams,'+'\x20shadowCoo'+'rd,\x20camera'+'Params,\x20sh'+'adowSearch'+'Area.x,\x20li'+'ghtDir);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'float\x20getS'+'hadowSpotP'+'CSS(TEXTUR'+'E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c4\x20cameraP'+'arams,\x20vec'+'2\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20return\x20PC'+'SS(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20cameraPar'+'ams,\x20shado'+'wSearchAre'+'a);\x0a}\x0a\x0a'),NP='\x0a\x0ahighp\x20fl'+'oat\x20fractS'+'inRand(con'+'st\x20in\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x20\x20\x20'+'\x20const\x20hig'+'hp\x20float\x20a'+'\x20=\x2012.9898'+',\x20b\x20=\x2078.2'+'33,\x20c\x20=\x2043'+'758.5453;\x0a'+'\x20\x20\x20\x20highp\x20'+'float\x20dt\x20='+'\x20dot(uv.xy'+',\x20vec2(a,\x20'+'b)),\x20sn\x20=\x20'+'mod(dt,\x20PI'+');\x0a\x20\x20\x20\x20ret'+'urn\x20fract('+'sin(sn)\x20*\x20'+'c);\x0a}\x0a\x0a//\x20'+'struct\x20to\x20'+'hold\x20preco'+'mputed\x20con'+'stants\x20and'+'\x20current\x20s'+'tate\x0astruc'+'t\x20VogelDis'+'kData\x20{\x0a\x20\x20'+'\x20\x20float\x20in'+'vNumSample'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20initial'+'Angle;\x0a\x20\x20\x20'+'\x20float\x20cur'+'rentPointI'+'d;\x0a};\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'void\x20prepa'+'reDiskCons'+'tants(out\x20'+'VogelDiskD'+'ata\x20data,\x20'+'int\x20sample'+'Count,\x20flo'+'at\x20randomS'+'eed)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20pi2\x20=\x206'+'.283185307'+'18;\x0a\x20\x20\x20\x20da'+'ta.invNumS'+'amples\x20=\x201'+'.0\x20/\x20float'+'(sampleCou'+'nt);\x0a\x20\x20\x20\x20d'+'ata.initia'+'lAngle\x20=\x20r'+'andomSeed\x20'+'*\x20pi2;\x0a\x20\x20\x20'+'\x20data.curr'+'entPointId'+'\x20=\x200.0;\x0a}\x0a'+'\x0a\x0avec2\x20gen'+'erateDiskS'+'ample(inou'+'t\x20VogelDis'+'kData\x20data'+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'GOLDEN_ANG'+'LE\x20=\x202.399'+'963;\x0a\x20\x20\x20\x20f'+'loat\x20r\x20=\x20s'+'qrt((data.'+'currentPoi'+'ntId\x20+\x200.5'+')\x20*\x20data.i'+'nvNumSampl'+'es);\x0a\x20\x20\x20\x20f'+'loat\x20theta'+'\x20=\x20data.cu'+'rrentPoint'+'Id\x20*\x20GOLDE'+'N_ANGLE\x20+\x20'+'data.initi'+'alAngle;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20o'+'ffset\x20=\x20ve'+('c2(cos(the'+'ta),\x20sin(t'+'heta))\x20*\x20p'+'ow(r,\x201.33'+');\x0a\x0a\x20\x20\x20\x20da'+'ta.current'+'PointId\x20+='+'\x201.0;\x0a\x20\x20\x20\x20'+'return\x20off'+'set;\x0a}\x0a\x0avo'+'id\x20PCSSFin'+'dBlocker(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20out\x20'+'float\x20avgB'+'lockerDept'+'h,\x20out\x20int'+'\x20numBlocke'+'rs,\x0a\x20\x20\x20\x20ve'+'c2\x20shadowC'+'oords,\x20flo'+'at\x20z,\x20int\x20'+'shadowBloc'+'kerSamples'+',\x20float\x20pe'+'numbraSize'+',\x20float\x20in'+'vShadowMap'+'Size,\x20floa'+'t\x20randomSe'+'ed)\x20{\x0a\x0a\x20\x20\x20'+'\x20VogelDisk'+'Data\x20diskD'+'ata;\x0a\x20\x20\x20\x20p'+'repareDisk'+'Constants('+'diskData,\x20'+'shadowBloc'+'kerSamples'+',\x20randomSe'+'ed);\x0a\x0a\x20\x20\x20\x20'+'float\x20sear'+'chWidth\x20=\x20'+'penumbraSi'+'ze\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x20\x20\x20\x20flo'+'at\x20blocker'+'Sum\x20=\x200.0;'+'\x0a\x20\x20\x20\x20numBl'+'ockers\x20=\x200'+';\x0a\x0a\x20\x20\x20\x20for'+'(\x20int\x20i\x20=\x20'+'0;\x20i\x20<\x20sha'+'dowBlocker'+'Samples;\x20+'+'+i\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'diskUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20sampleUV'+'\x20=\x20shadowC'+'oords\x20+\x20di'+'skUV\x20*\x20sea'+'rchWidth;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'MapDepth\x20='+'\x20texture2D'+'Lod(shadow'+'Map,\x20sampl'+'eUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(\x20shad'+'owMapDepth'+'\x20<\x20z\x20)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20blockerSu'+'m\x20+=\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers++;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20av'+'gBlockerDe'+'pth\x20=\x20bloc'+'kerSum\x20/\x20f'+'loat(numBl'+'ockers);\x0a}'+'\x0a\x0afloat\x20PC'+'SSFilter(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20uv,\x20float')+('\x20receiverD'+'epth,\x20int\x20'+'shadowSamp'+'les,\x20float'+'\x20filterRad'+'ius,\x20float'+'\x20randomSee'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'VogelDiskD'+'ata\x20diskDa'+'ta;\x0a\x20\x20\x20\x20pr'+'epareDiskC'+'onstants(d'+'iskData,\x20s'+'hadowSampl'+'es,\x20random'+'Seed);\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20shadowS'+'amples;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20of'+'fsetUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x20text'+'ure2DLod(s'+'hadowMap,\x20'+'uv\x20+\x20offse'+'tUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sum\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20retu'+'rn\x20sum\x20/\x20f'+'loat(shado'+'wSamples);'+'\x0a}\x0a\x0afloat\x20'+'getPenumbr'+'a(float\x20db'+'locker,\x20fl'+'oat\x20drecei'+'ver,\x20float'+'\x20penumbraS'+'ize,\x20float'+'\x20penumbraF'+'alloff)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'dist\x20=\x20dre'+'ceiver\x20-\x20d'+'blocker;\x0a\x20'+'\x20\x20\x20float\x20p'+'enumbra\x20=\x20'+'1.0\x20-\x20pow('+'1.0\x20-\x20dist'+',\x20penumbra'+'Falloff);\x0a'+'\x20\x20\x20\x20return'+'\x20penumbra\x20'+'*\x20penumbra'+'Size;\x0a}\x0a\x0af'+'loat\x20PCSSD'+'irectional'+'(TEXTURE_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oords,\x20vec'+'4\x20cameraPa'+'rams,\x20vec4'+'\x20softShado'+'wParams)\x20{'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20receiver'+'Depth\x20=\x20sh'+'adowCoords'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20random'+'Seed\x20=\x20fra'+'ctSinRand('+'gl_FragCoo'+'rd.xy);\x0a\x20\x20'+'\x20\x20int\x20shad'+'owSamples\x20'+'=\x20int(soft'+'ShadowPara'+'ms.x);\x0a\x20\x20\x20'+'\x20int\x20shado'+'wBlockerSa'+'mples\x20=\x20in'+'t(softShad')+('owParams.y'+');\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'aSize\x20=\x20so'+'ftShadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20float\x20pe'+'numbraFall'+'off\x20=\x20soft'+'ShadowPara'+'ms.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20normal'+'ized\x20inver'+'se\x20shadow\x20'+'map\x20size\x20t'+'o\x20preserve'+'\x20the\x20shado'+'w\x20softness'+'\x20regardles'+'s\x20of\x20the\x20s'+'hadow\x20reso'+'lution\x0a\x20\x20\x20'+'\x20int\x20shado'+'wMapSize\x20='+'\x20textureSi'+'ze(shadowM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20float\x20'+'invShadowM'+'apSize\x20=\x201'+'.0\x20/\x20float'+'(shadowMap'+'Size);\x0a\x20\x20\x20'+'\x20invShadow'+'MapSize\x20*='+'\x20float(sha'+'dowMapSize'+')\x20/\x202048.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'a;\x0a\x0a\x20\x20\x20\x20//'+'\x20contact\x20h'+'ardening\x20p'+'ath\x0a\x20\x20\x20\x20if'+'\x20(shadowBl'+'ockerSampl'+'es\x20>\x200)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20find\x20ave'+'rage\x20block'+'er\x20depth\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20avgBloc'+'kerDepth\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20int\x20nu'+'mBlockers\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20avgBlo'+'ckerDepth,'+'\x20numBlocke'+'rs,\x20shadow'+'Coords.xy,'+'\x20receiverD'+'epth,\x20shad'+'owBlockerS'+'amples,\x20pe'+'numbraSize'+',\x20invShado'+'wMapSize,\x20'+'randomSeed'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20out\x20when\x20'+'no\x20blocker'+'s\x20are\x20pres'+'ent\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(numB'+'lockers\x20<\x20'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x201.0f;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'penumbra\x20s'+'ize\x20is\x20bas'+'ed\x20on\x20the\x20'+'blocker\x20de'+'pth\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20penumbra'+'\x20=\x20getPenu'+'mbra(avgBl'+'ockerDepth'+',\x20shadowCo'+'ords.z,\x20pe'+'numbraSize'+',\x20penumbra')+('Falloff);\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'tant\x20filte'+'r\x20size,\x20no'+'\x20contact\x20h'+'ardening\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pen'+'umbra\x20=\x20pe'+'numbraSize'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20f'+'ilterRadiu'+'s\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoords'+'.xy,\x20recei'+'verDepth,\x20'+'shadowSamp'+'les,\x20filte'+'rRadius,\x20r'+'andomSeed)'+';\x0a}\x0a\x0afloat'+'\x20getShadow'+'PCSS(TEXTU'+'RE_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec4\x20camera'+'Params,\x20ve'+'c4\x20softSha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20return\x20P'+'CSSDirecti'+'onal(TEXTU'+'RE_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20cameraP'+'arams,\x20sof'+'tShadowPar'+'ams);\x0a}\x0a\x0a'),kP='\x0aattribute'+'\x20float\x20ver'+'tex_boneIn'+'dices;\x0a\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20texture_'+'poseMap;\x0a\x0a'+'mat4\x20getBo'+'neMatrix(c'+'onst\x20in\x20fl'+'oat\x20indexF'+'loat)\x20{\x0a\x0a\x20'+'\x20\x20\x20int\x20wid'+'th\x20=\x20textu'+'reSize(tex'+'ture_poseM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20int\x20in'+'dex\x20=\x20int('+'indexFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x20\x20\x20\x20int'+'\x20iy\x20=\x20inde'+'x\x20/\x20width;'+'\x0a\x20\x20\x20\x20int\x20i'+'x\x20=\x20index\x20'+'%\x20width;\x0a\x0a'+'\x20\x20\x20\x20//\x20rea'+'d\x20elements'+'\x20of\x204x3\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20v1\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x200,'+'\x20iy),\x200);\x0a'+'\x20\x20\x20\x20vec4\x20v'+'2\x20=\x20texelF'+'etch(textu'+'re_poseMap'+',\x20ivec2(ix'+'\x20+\x201,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20v'+'ec4\x20v3\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x202,'+'\x20iy),\x200);\x0a'+'\x0a\x20\x20\x20\x20//\x20tr'+'anspose\x20to'+'\x204x4\x20matri'+'x\x0a\x20\x20\x20\x20retu'+'rn\x20mat4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'x,\x20v2.x,\x20v'+'3.x,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.y'+',\x20v2.y,\x20v3'+'.y,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.z,'+'\x20v2.z,\x20v3.'+'z,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.w,\x20'+'v2.w,\x20v3.w'+',\x201\x0a\x20\x20\x20\x20);'+'\x0a}\x0a',UP='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_boneWe'+'ights;\x0aatt'+'ribute\x20vec'+'4\x20vertex_b'+'oneIndices'+';\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20tex'+'ture_poseM'+'ap;\x0a\x0avoid\x20'+'getBoneMat'+'rix(const\x20'+'in\x20int\x20wid'+'th,\x20const\x20'+'in\x20int\x20ind'+'ex,\x20out\x20ve'+'c4\x20v1,\x20out'+'\x20vec4\x20v2,\x20'+'out\x20vec4\x20v'+'3)\x20{\x0a\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20in'+'dex\x20/\x20widt'+'h;\x0a\x20\x20\x20\x20int'+'\x20u\x20=\x20index'+'\x20%\x20width;\x0a'+'\x0a\x20\x20\x20\x20v1\x20=\x20'+'texelFetch'+'(texture_p'+'oseMap,\x20iv'+'ec2(u\x20+\x200,'+'\x20v),\x200);\x0a\x20'+'\x20\x20\x20v2\x20=\x20te'+'xelFetch(t'+'exture_pos'+'eMap,\x20ivec'+'2(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20v3\x20=\x20texe'+'lFetch(tex'+'ture_poseM'+'ap,\x20ivec2('+'u\x20+\x202,\x20v),'+'\x200);\x0a}\x0a\x0ama'+'t4\x20getSkin'+'Matrix(con'+'st\x20in\x20vec4'+'\x20indicesFl'+'oat,\x20const'+'\x20in\x20vec4\x20w'+'eights)\x20{\x0a'+'\x0a\x20\x20\x20\x20int\x20w'+'idth\x20=\x20tex'+'tureSize(t'+'exture_pos'+'eMap,\x200).x'+';\x0a\x20\x20\x20\x20ivec'+'4\x20indices\x20'+'=\x20ivec4(in'+'dicesFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20get\x204\x20bon'+'e\x20matrices'+'\x0a\x20\x20\x20\x20vec4\x20'+'a1,\x20a2,\x20a3'+';\x0a\x20\x20\x20\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.x,\x20a1'+',\x20a2,\x20a3);'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20b1,\x20b2,\x20b'+'3;\x0a\x20\x20\x20\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y,\x20b'+'1,\x20b2,\x20b3)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20c1,\x20c2,\x20'+'c3;\x0a\x20\x20\x20\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.z,\x20'+'c1,\x20c2,\x20c3'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20d1,\x20d2,'+'\x20d3;\x0a\x20\x20\x20\x20g'+'etBoneMatr'+'ix(width,\x20'+'indices.w,'+'\x20d1,\x20d2,\x20d'+'3);\x0a\x0a\x20\x20\x20\x20/'+'/\x20multiply'+'\x20them\x20by\x20w'+'eights\x20and'+'\x20add\x20up\x20to'+'\x20get\x20final'+'\x204x3\x20matri'+('x\x0a\x20\x20\x20\x20vec4'+'\x20v1\x20=\x20a1\x20*'+'\x20weights.x'+'\x20+\x20b1\x20*\x20we'+'ights.y\x20+\x20'+'c1\x20*\x20weigh'+'ts.z\x20+\x20d1\x20'+'*\x20weights.'+'w;\x0a\x20\x20\x20\x20vec'+'4\x20v2\x20=\x20a2\x20'+'*\x20weights.'+'x\x20+\x20b2\x20*\x20w'+'eights.y\x20+'+'\x20c2\x20*\x20weig'+'hts.z\x20+\x20d2'+'\x20*\x20weights'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20v3\x20=\x20a3'+'\x20*\x20weights'+'.x\x20+\x20b3\x20*\x20'+'weights.y\x20'+'+\x20c3\x20*\x20wei'+'ghts.z\x20+\x20d'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'//\x20add\x20up\x20'+'weights\x0a\x20\x20'+'\x20\x20float\x20on'+'e\x20=\x20dot(we'+'ights,\x20vec'+'4(1.0));\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.x'+',\x20v2.x,\x20v3'+'.x,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.y,'+'\x20v2.y,\x20v3.'+'y,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.z,\x20'+'v2.z,\x20v3.z'+',\x200,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20v1.w,\x20v'+'2.w,\x20v3.w,'+'\x20one\x0a\x20\x20\x20\x20)'+';\x0a}\x0a'),BP='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20float\x20v'+'LinearDept'+'h;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22floatAsUi'+'ntPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec3\x20vView'+'Dir;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20skyboxH'+'ighlightMu'+'ltiplier;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SKY_CUBE'+'MAP\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20texture'+'_cubeMap;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SKYM'+'ESH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec3\x20v'+'WorldPos;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20project'+'edSkydomeC'+'enter;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#el'+'se\x20//\x20env-'+'atlas\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22spher'+'icalPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22envA'+'tlasPS\x22\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_envAtla'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mipLe'+'vel;\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20linear\x20d'+'epth\x20durin'+'g\x20prepass\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20flo'+'at2vec4(vL'+'inearDepth'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20SK'+'Y_CUBEMAP\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SKYMES'+'H\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+('\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envDir\x20=\x20n'+'ormalize(v'+'WorldPos\x20-'+'\x20projected'+'SkydomeCen'+'ter);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20env'+'Dir\x20*\x20cube'+'MapRotatio'+'nMatrix;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20di'+'r\x20=\x20vViewD'+'ir;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir.x'+'\x20*=\x20-1.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20linear\x20=\x20'+'{SKYBOX_DE'+'CODE_FNC}('+'textureCub'+'e(texture_'+'cubeMap,\x20d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x20//\x20en'+'v-atlas\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20vVie'+'wDir\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20toSph'+'ericalUv(n'+'ormalize(d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20mipLev'+'el)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20our\x20HDR'+'\x20encodes\x20v'+'alues\x20up\x20t'+'o\x2064,\x20so\x20a'+'llow\x20extra'+'\x20brightnes'+'s\x20for\x20the\x20'+'clipped\x20va'+'lues\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(any(great'+'erThanEqua'+'l(linear,\x20'+'vec3(64.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20skyboxHi'+'ghlightMul'+'tiplier;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(toneM'+'ap(process'+'Environmen'+'t(linear))'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20}'+'\x0a'),zP='\x0aattribute'+'\x20vec4\x20aPos'+'ition;\x0a\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tionSkybox'+';\x0auniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x0av'+'arying\x20vec'+'3\x20vViewDir'+';\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20//\x20'+'when\x20skydo'+'me\x20renders'+'\x20depth\x20dur'+'ing\x20prepas'+'s,\x20generat'+'e\x20linear\x20d'+'epth\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20vLinear'+'Depth;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20SKYMESH\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec3\x20vW'+'orldPos;\x0a#'+'endif\x0a\x0avoi'+'d\x20main(voi'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'mat4\x20view\x20'+'=\x20matrix_v'+'iew;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20SKY'+'MESH\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec4\x20w'+'orldPos\x20=\x20'+'matrix_mod'+'el\x20*\x20aPosi'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vWorld'+'Pos\x20=\x20worl'+'dPos.xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20'+'=\x20matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20PREPASS'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20linear\x20de'+'pth\x20from\x20t'+'he\x20worldPo'+'sition,\x20se'+'e\x20getLinea'+'rDepth\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vWorl'+'dPos,\x201.0)'+').z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'view[3][0]'+'\x20=\x20view[3]'+'[1]\x20=\x20view'+'[3][2]\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20matr'+'ix_project'+'ionSkybox\x20'+'*\x20(view\x20*\x20'+'aPosition)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vViewDir\x20='+'\x20aPosition'+'.xyz\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20//\x20for\x20in'+'finite\x20sky'+'box,\x20use\x20n'+'egative\x20gl'+'_Position.'+'w\x20to\x20get\x20p'+'ositive\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vLinear'+'Depth\x20=\x20-g'+'l_Position'+'.w;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20Fo'+'rce\x20skybox'+'\x20to\x20far\x20Z,'+'\x20regardles'+'s\x20of\x20the\x20c'+'lip\x20planes'+'\x20on\x20the\x20ca'+'mera\x0a\x20\x20\x20\x20/'+'/\x20Subtract'+'\x20a\x20tiny\x20fu'+'dge\x20factor'+'\x20to\x20ensure'+'\x20floating\x20'+'point\x20erro'+'rs\x20don\x27t\x0a\x20'+'\x20\x20\x20//\x20stil'+'l\x20push\x20pix'+'els\x20beyond'+'\x20far\x20Z.\x20Se'+'e:\x0a\x20\x20\x20\x20//\x20'+'https://co'+'mmunity.kh'+'ronos.org/'+'t/skybox-p'+'roblem/618'+'57\x0a\x0a\x20\x20\x20\x20gl'+'_Position.'+'z\x20=\x20gl_Pos'+'ition.w\x20-\x20'+'1.0e-7;\x0a}\x0a'),VP='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0auniform\x20v'+'ec3\x20materi'+'al_specula'+'r;\x0a#endif\x0a'+'\x0avoid\x20getS'+'pecularity'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20specul'+'arColor\x20=\x20'+'vec3(1,1,1'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20specularC'+'olor\x20*=\x20ma'+'terial_spe'+'cular;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'AR_TEXTURE'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_SPECULAR_'+'TEXTURE_NA'+'ME},\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20textureB'+'ias)).{STD'+'_SPECULAR_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SPECU'+'LAR_VERTEX'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_S'+'PECULAR_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20spe'+'cularColor'+';\x0a}\x0a',GP='\x0a//\x20equire'+'ctangular\x20'+'helper\x20fun'+'ctions\x0avec'+'2\x20toSpheri'+'cal(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(dir.xz\x20='+'=\x20vec2(0.0'+')\x20?\x200.0\x20:\x20'+'atan(dir.x'+',\x20dir.z),\x20'+'asin(dir.y'+'));\x0a}\x0a\x0avec'+'2\x20toSpheri'+'calUv(vec3'+'\x20dir)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PI\x20=\x203'+'.141592653'+'589793;\x0a\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20toSpheri'+'cal(dir)\x20/'+'\x20vec2(PI\x20*'+'\x202.0,\x20PI)\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+';\x0a}\x0a',HP='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_specula'+'rityFactor'+';\x0a#endif\x0a\x0a'+'void\x20getSp'+'ecularityF'+'actor()\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'specularit'+'yFactor\x20=\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULARI'+'TYFACTOR_C'+'ONSTANT\x0a\x20\x20'+'\x20\x20specular'+'ityFactor\x20'+'*=\x20materia'+'l_specular'+'ityFactor;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE\x0a\x20\x20\x20\x20sp'+'ecularityF'+'actor\x20*=\x20t'+'exture2DBi'+'as({STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE_NAME},'+'\x20{STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_VERT'+'EX\x0a\x20\x20\x20\x20spe'+'cularityFa'+'ctor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SPECU'+'LARITYFACT'+'OR_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dSp'+'ecularityF'+'actor\x20=\x20sp'+'ecularityF'+'actor;\x0a}\x0a',WP='\x0afloat\x20get'+'SpotEffect'+'(vec3\x20ligh'+'tSpotDir,\x20'+'float\x20ligh'+'tInnerCone'+'Angle,\x20flo'+'at\x20lightOu'+'terConeAng'+'le,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20cosAn'+'gle\x20=\x20dot('+'lightDirNo'+'rm,\x20lightS'+'potDir);\x0a\x20'+'\x20\x20\x20return\x20'+'smoothstep'+'(lightOute'+'rConeAngle'+',\x20lightInn'+'erConeAngl'+'e,\x20cosAngl'+'e);\x0a}\x0a',$P='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2(vUv0.'+'x,\x201.0\x20-\x20v'+'Uv0.y);\x0a',XP='\x0a\x20\x20\x20\x20vec2\x20'+'tileMask\x20='+'\x20step(vMas'+'k,\x20vec2(0.'+'99999));\x0a\x20'+'\x20\x20\x20vec2\x20ti'+'leSize\x20=\x200'+'.5\x20*\x20(inne'+'rOffset.xy'+'\x20+\x20innerOf'+'fset.zw);\x0a'+'\x20\x20\x20\x20vec2\x20t'+'ileScale\x20='+'\x20vec2(1.0)'+'\x20/\x20(vec2(1'+'.0)\x20-\x20tile'+'Size);\x0a\x20\x20\x20'+'\x20vec2\x20clam'+'pedUv\x20=\x20mi'+'x(innerOff'+'set.xy\x20*\x200'+'.5,\x20vec2(1'+'.0)\x20-\x20inne'+'rOffset.zw'+'\x20*\x200.5,\x20fr'+'act((vTile'+'dUv\x20-\x20tile'+'Size)\x20*\x20ti'+'leScale));'+'\x0a\x20\x20\x20\x20clamp'+'edUv\x20=\x20cla'+'mpedUv\x20*\x20a'+'tlasRect.z'+'w\x20+\x20atlasR'+'ect.xy;\x0a\x20\x20'+'\x20\x20nineSlic'+'edUv\x20=\x20vUv'+'0\x20*\x20tileMa'+'sk\x20+\x20clamp'+'edUv\x20*\x20(ve'+'c2(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x20\x20\x20\x20\x0a',qP='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20float\x20dAl'+'pha\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_o'+'pacityMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20global'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dAlbe'+'do;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20dNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dSpeculari'+'ty\x20=\x20vec3('+'0.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dGlossines'+'s\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20dT'+'ransmissio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dThicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SC'+'ENE_COLOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'uSceneColo'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SCREEN_SI'+'ZE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20uS'+'creenSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_TRAN'+'SFORMS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20matrix_v'+'iewProject'+'ion;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_mod'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20parallax\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20dUv'+'Offset;\x0a\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_he'+'ightMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20diffu'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20tex'+'ture_diffu'+'seMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_diffuseDe'+'tailMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_normal'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'NORMALDETA'+'IL_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_no'+'rmalDetail'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20refracti'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_THICKNES'+'S_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_thi'+'cknessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_REFRA'+'CTION_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_refractio'+'nMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20iridesc'+'ence\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_IRIDES'+'CENCE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20dIride'+'scence;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dIri'+'descenceTh')+('ickness;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_irides'+'cenceThick'+'nessMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_iridesce'+'nceMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20ccNorm'+'alW;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dAnisotro'+'py;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20&\x20glossin'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_OR_REFLE'+'CTION\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20sheen\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20sGloss'+'iness;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SHEEN'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_sheenM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_sh'+'eenGlossMa')+('p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20metalness'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dMet'+'alness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dIor;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_met'+'alnessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20dSpecula'+'rityFactor'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_speculari'+'tyFactorMa'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20specular\x20'+'color\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_specula'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20gloss\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_gl'+'ossMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dAo'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_aoM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_aoDeta'+'ilMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dEmis'+'sion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_EMISS'+'IVE_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_e'+'missiveMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'learcoat\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'EARCOAT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatG'+'lossMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'NORMAL_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_clea'+'rCoatNorma'+'lMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'anisotropy'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde')+('f\x20STD_ANIS'+'OTROPY_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_anis'+'otropyMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dLightma'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_LIGH'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_lightMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20front\x20'+'end\x20output'+'s\x20to\x20lit\x20s'+'hader\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'litShaderC'+'orePS\x22\x0a'),jP='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20voi'+'d\x20getSpecu'+'larity()\x20{'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20vec'+'3(1);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20g'+'loss\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22glo'+'ssPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20ao\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'aoPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'emissivePS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO')+('AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22clear'+'CoatPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatG'+'lossPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatN'+'ormalPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20anis'+'otropy\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ani'+'sotropyPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(STD'+'_LIGHTMAP)'+'\x20||\x20define'+'d(STD_LIGH'+'T_VERTEX_C'+'OLOR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20void\x20eval'+'uateFronte'+'nd()\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIT'+'_BLEND_TYP'+'E\x20!=\x20NONE\x20'+'||\x20defined'+'(LIT_ALPHA'+'_TEST)\x20||\x20'+'defined(LI'+'T_ALPHA_TO'+'_COVERAGE)'+'\x20||\x20STD_OP'+'ACITY_DITH'+'ER\x20!=\x20NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getOpac'+'ity();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_ALPH'+'A_TEST)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alphaT'+'est(dAlpha'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(dAlp'+'ha,\x200.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'opacity\x20=\x20'+'dAlpha;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20pa'+'rallax\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'HEIGHT_MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Parallax()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Albedo();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20d'+'Albedo;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20normal'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getNorm'+'al();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'worldNorma'+'l\x20=\x20dNorma'+'lW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_REFRACT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getRefract'+'ion();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_transmiss'+'ion\x20=\x20dTra'+'nsmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tThickness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_th'+'ickness\x20=\x20'+'dThickness'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_d'+'ispersion\x20'+'=\x20material'+'_dispersio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20iridescen'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_IRID'+'ESCENCE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getIri'+'descence()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tIridescen'+'ceThicknes'+'s();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_i'+'ridescence'+'_intensity'+'\x20=\x20dIrides'+'cence;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_iridescen'+'ce_thickne'+'ss\x20=\x20dIrid'+'escenceThi'+'ckness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('//\x20specula'+'rity\x20&\x20glo'+'ssiness\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR_'+'OR_REFLECT'+'ION\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getShee'+'n();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_sheen_s'+'pecularity'+'\x20=\x20sSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'SheenGloss'+'iness();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_she'+'en_gloss\x20='+'\x20sGlossine'+'ss;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20met'+'alness\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getMet'+'alness();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_me'+'talness\x20=\x20'+'dMetalness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getIor()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'ior\x20=\x20dIor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20specu'+'larity\x20fac'+'tor\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rityFactor'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ityFactor\x20'+'=\x20dSpecula'+'rityFactor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20gloss'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rity();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ity\x20=\x20dSpe'+'cularity;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss\x20'+'=\x20dGlossin')+('ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getAO'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ao'+'\x20=\x20dAo;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getEmi'+'ssion();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_e'+'mission\x20=\x20'+'dEmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cle'+'arcoat\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getC'+'learCoat()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tClearCoat'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getClearCo'+'atNormal()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20=\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_g'+'loss\x20=\x20ccG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_clear'+'coat_world'+'Normal\x20=\x20c'+'cNormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20aniso'+'tropy\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x20&&\x20def'+'ined(LIT_L'+'IGHTING)\x20&'+'&\x20defined('+'LIT_GGX_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getAni'+'sotropy();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20ligh'+'tmap\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(S'+'TD_LIGHTMA'+'P)\x20||\x20defi'+'ned(STD_LI'+'GHT_VERTEX'+'_COLOR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htMap();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_lightma'+'p\x20=\x20dLight'+'map;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_lightm'+'apDir\x20=\x20dL'+'ightmapDir'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20}\x0a'),YP='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20tbnBasis'+';\x0a#endif\x0a\x0a'+'void\x20getTB'+'N(vec3\x20tan'+'gent,\x20vec3'+'\x20binormal,'+'\x20vec3\x20norm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TB'+'N_TANGENTS'+'\x20//\x20tangen'+'ts\x20/\x20binor'+'mals\x20based'+'\x20TBN\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(tang'+'ent),\x20norm'+'alize(bino'+'rmal),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(TBN_'+'DERIVATIVE'+'S)\x20//\x20deri'+'vatives\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20{li'+'ghtingUv};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20get\x20edg'+'e\x20vectors\x20'+'of\x20the\x20pix'+'el\x20triangl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dp1\x20='+'\x20dFdx(\x20vPo'+'sitionW\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dp2\x20=\x20'+'dFdy(\x20vPos'+'itionW\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20duv1\x20=\x20'+'dFdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20duv2\x20'+'=\x20dFdy(\x20uv'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20solv'+'e\x20the\x20line'+'ar\x20system\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20dp2perp'+'\x20=\x20cross(\x20'+'dp2,\x20norma'+'l\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dp'+'1perp\x20=\x20cr'+'oss(\x20norma'+'l,\x20dp1\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20T\x20=\x20dp2'+'perp\x20*\x20duv'+'1.x\x20+\x20dp1p'+'erp\x20*\x20duv2'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20B\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+'dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+('ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'nom\x20=\x20max('+'\x20dot(T,T),'+'\x20dot(B,B)\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20inv'+'max\x20=\x20(den'+'om\x20==\x200.0)'+'\x20?\x200.0\x20:\x20t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3(T\x20*\x20i'+'nvmax,\x20-B\x20'+'*\x20invmax,\x20'+'normal\x20);\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20object'+'\x20space\x20TBN'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20B\x20=\x20c'+'ross(norma'+'l,\x20vObject'+'SpaceUpW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20T\x20=\x20cr'+'oss(normal'+',\x20B);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(d'+'ot(B,B)==0'+'.0)\x20//\x20dea'+'l\x20with\x20cas'+'e\x20when\x20vOb'+'jectSpaceU'+'pW\x20normal\x20'+'are\x20parall'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20major=max'+'(max(norma'+'l.x,\x20norma'+'l.y),\x20norm'+'al.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(normal'+'.x\x20==\x20majo'+'r)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20B\x20=\x20cro'+'ss(normal,'+'\x20vec3(0,1,'+'0));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20T\x20=\x20cross'+'(normal,\x20B'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20e'+'lse\x20if\x20(no'+'rmal.y\x20==\x20'+'major)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20B\x20='+'\x20cross(nor'+'mal,\x20vec3('+'0,0,1));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20if'+'\x20(normal.z'+'\x20==\x20major)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20B\x20=\x20cross'+'(normal,\x20v'+'ec3(1,0,0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(T),\x20'+'normalize('+'B),\x20normal'+'ize(normal'+'));\x0a\x0a\x20\x20\x20\x20#')+'endif\x0a}\x0a',KP='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_thickn'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tThickness'+'()\x20{\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_THICKNE'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dThi'+'ckness\x20*=\x20'+'material_t'+'hickness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_THI'+'CKNESS_TEX'+'TURE\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20texture'+'2DBias({ST'+'D_THICKNES'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_THICKNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_TH'+'ICKNESS_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',ZP='\x0a\x0a#if\x20(TON'+'EMAP\x20==\x20NO'+'NE)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22to'+'nemappingN'+'onePS\x22\x0a#el'+'if\x20TONEMAP'+'\x20==\x20FILMIC'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingFilm'+'icPS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20LINEAR\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingLinea'+'rPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20HEJL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngHejlPS\x22\x0a'+'#elif\x20TONE'+'MAP\x20==\x20ACE'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22tone'+'mappingAce'+'sPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20ACES2\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingAces2PS'+'\x22\x0a#elif\x20TO'+'NEMAP\x20==\x20N'+'EUTRAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngNeutralP'+'S\x22\x0a#endif\x0a'+'\x0a',QP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20tA\x20=\x202.'+'51;\x0a\x20\x20\x20\x20fl'+'oat\x20tB\x20=\x200'+'.03;\x0a\x20\x20\x20\x20f'+'loat\x20tC\x20=\x20'+'2.43;\x0a\x20\x20\x20\x20'+'float\x20tD\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20float\x20tE\x20'+'=\x200.14;\x0a\x20\x20'+'\x20\x20vec3\x20x\x20='+'\x20color\x20*\x20e'+'xposure;\x0a\x20'+'\x20\x20\x20return\x20'+'(x*(tA*x+t'+'B))/(x*(tC'+'*x+tD)+tE)'+';\x0a}\x0a',JP='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0a//\x20A'+'CES\x20approx'+'imation\x20by'+'\x20Stephen\x20H'+'ill\x0a\x0a//\x20sR'+'GB\x20=>\x20XYZ\x20'+'=>\x20D65_2_D'+'60\x20=>\x20AP1\x20'+'=>\x20RRT_SAT'+'\x0aconst\x20mat'+'3\x20ACESInpu'+'tMat\x20=\x20mat'+'3(\x0a\x20\x20\x20\x200.5'+'9719,\x200.35'+'458,\x200.048'+'23,\x0a\x20\x20\x20\x200.'+'07600,\x200.9'+'0834,\x200.01'+'566,\x0a\x20\x20\x20\x200'+'.02840,\x200.'+'13383,\x200.8'+'3777\x0a);\x0a\x0a/'+'/\x20ODT_SAT\x20'+'=>\x20XYZ\x20=>\x20'+'D60_2_D65\x20'+'=>\x20sRGB\x0aco'+'nst\x20mat3\x20A'+'CESOutputM'+'at\x20=\x20mat3('+'\x0a\x20\x20\x20\x20\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367,\x0a\x20\x20\x20\x20-'+'0.10208,\x20\x20'+'1.10813,\x20-'+'0.00605,\x0a\x20'+'\x20\x20\x20-0.0032'+'7,\x20-0.0727'+'6,\x20\x201.0760'+'2\x0a);\x0a\x0avec3'+'\x20RRTAndODT'+'Fit(vec3\x20v'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20a\x20=\x20v\x20*'+'\x20(v\x20+\x200.02'+'45786)\x20-\x200'+'.000090537'+';\x0a\x20\x20\x20\x20vec3'+'\x20b\x20=\x20v\x20*\x20('+'0.983729\x20*'+'\x20v\x20+\x200.432'+'9510)\x20+\x200.'+'238081;\x0a\x20\x20'+'\x20\x20return\x20a'+'\x20/\x20b;\x0a}\x0a\x0av'+'ec3\x20toneMa'+'p(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'color\x20*=\x20e'+'xposure\x20/\x20'+'0.6;\x0a\x20\x20\x20\x20c'+'olor\x20=\x20col'+'or\x20*\x20ACESI'+'nputMat;\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20RRT\x20and'+'\x20ODT\x0a\x20\x20\x20\x20c'+'olor\x20=\x20RRT'+'AndODTFit('+'color);\x0a\x20\x20'+'\x20\x20color\x20=\x20'+'color\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20color\x20=\x20c'+'lamp(color'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',e2='\x0aconst\x20flo'+'at\x20A\x20=\x20\x200.'+'15;\x0aconst\x20'+'float\x20B\x20=\x20'+'\x200.50;\x0acon'+'st\x20float\x20C'+'\x20=\x20\x200.10;\x0a'+'const\x20floa'+'t\x20D\x20=\x20\x200.2'+'0;\x0aconst\x20f'+'loat\x20E\x20=\x20\x20'+'0.02;\x0acons'+'t\x20float\x20F\x20'+'=\x20\x200.30;\x0ac'+'onst\x20float'+'\x20W\x20=\x20\x2011.2'+';\x0a\x0auniform'+'\x20float\x20exp'+'osure;\x0a\x0ave'+'c3\x20unchart'+'ed2Tonemap'+'(vec3\x20x)\x20{'+'\x0a\x20\x20\x20return'+'\x20((x*(A*x+'+'C*B)+D*E)/'+'(x*(A*x+B)'+'+D*F))-E/F'+';\x0a}\x0a\x0avec3\x20'+'toneMap(ve'+'c3\x20color)\x20'+'{\x0a\x20\x20\x20\x20colo'+'r\x20=\x20unchar'+'ted2Tonema'+'p(color\x20*\x20'+'exposure);'+'\x0a\x20\x20\x20\x20vec3\x20'+'whiteScale'+'\x20=\x201.0\x20/\x20u'+'ncharted2T'+'onemap(vec'+'3(W,W,W));'+'\x0a\x20\x20\x20\x20color'+'\x20=\x20color\x20*'+'\x20whiteScal'+'e;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',t2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20col'+'or\x20*=\x20expo'+'sure;\x0a\x20\x20\x20\x20'+'const\x20floa'+'t\x20\x20A\x20=\x200.2'+'2,\x20B\x20=\x200.3'+',\x20C\x20=\x20.1,\x20'+'D\x20=\x200.2,\x20E'+'\x20=\x20.01,\x20F\x20'+'=\x200.3;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20Scl\x20=\x201'+'.25;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20h\x20=\x20m'+'ax(\x20vec3(0'+'.0),\x20color'+'\x20-\x20vec3(0.'+'004)\x20);\x0a\x20\x20'+'\x20\x20return\x20('+'h*((Scl*A)'+'*h+Scl*vec'+'3(C*B,C*B,'+'C*B))+Scl*'+'vec3(D*E,D'+'*E,D*E))\x20/'+'\x20(h*(A*h+v'+'ec3(B,B,B)'+')+vec3(D*F'+',D*F,D*F))'+'\x20-\x20Scl*vec'+'3(E/F,E/F,'+'E/F);\x0a}\x0a',s2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20color\x20'+'*\x20exposure'+';\x0a}\x0a',i2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x0a\x20\x20\x20\x20co'+'lor\x20*=\x20exp'+'osure;\x0a\x0a\x20\x20'+'\x20\x20float\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20float\x20d'+'esaturatio'+'n\x20=\x200.15;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20min(c'+'olor.r,\x20mi'+'n(color.g,'+'\x20color.b))'+';\x0a\x20\x20\x20\x20floa'+'t\x20offset\x20='+'\x20x\x20<\x200.08\x20'+'?\x20x\x20-\x206.25'+'\x20*\x20x\x20*\x20x\x20:'+'\x200.04;\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20float\x20p'+'eak\x20=\x20max('+'color.r,\x20m'+'ax(color.g'+',\x20color.b)'+');\x0a\x20\x20\x20\x20if\x20'+'(peak\x20<\x20st'+'artCompres'+'sion)\x20retu'+'rn\x20color;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20d\x20=\x201.\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20float\x20ne'+'wPeak\x20=\x201.'+'\x20-\x20d\x20*\x20d\x20/'+'\x20(peak\x20+\x20d'+'\x20-\x20startCo'+'mpression)'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x20newPe'+'ak\x20/\x20peak;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20g\x20=\x201.\x20-'+'\x201.\x20/\x20(des'+'aturation\x20'+'*\x20(peak\x20-\x20'+'newPeak)\x20+'+'\x201.);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ne'+'wPeak\x20*\x20ve'+'c3(1,\x201,\x201'+'),\x20g);\x0a}\x0a',r2='\x0avec3\x20tone'+'Map(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'olor;\x0a}\x0a',a2='\x0a#ifdef\x20PI'+'XELSNAP\x0aun'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'CREENSPACE'+'\x0auniform\x20f'+'loat\x20proje'+'ctionFlipY'+';\x0a#endif\x0a\x0a'+'vec4\x20evalW'+'orldPositi'+'on(vec3\x20ve'+'rtexPositi'+'on,\x20mat4\x20m'+'odelMatrix'+')\x20{\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localP'+'os\x20=\x20getLo'+'calPositio'+'n(vertexPo'+'sition);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20NINESLICE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20outer\x20a'+'nd\x20inner\x20v'+'ertices\x20ar'+'e\x20at\x20the\x20s'+'ame\x20positi'+'on,\x20scale\x20'+'both\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s.xz\x20*=\x20ou'+'terScale;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nner\x20verti'+'ces\x20inside'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20(origina'+'l\x20vertices'+'\x20must\x20be\x20i'+'n\x20[-1;1]\x20r'+'ange)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20p'+'ositiveUni'+'tOffset\x20=\x20'+'clamp(vert'+'exPosition'+'.xz,\x20vec2('+'0.0),\x20vec2'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20negativeU'+'nitOffset\x20'+'=\x20clamp(-v'+'ertexPosit'+'ion.xz,\x20ve'+'c2(0.0),\x20v'+'ec2(1.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'ocalPos.xz'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vTiledU'+'v\x20=\x20(local'+'Pos.xz\x20-\x20o'+'uterScale\x20'+'+\x20innerOff'+'set.xy)\x20*\x20'+'-0.5\x20+\x201.0'+';\x20//\x20uv\x20=\x20'+'local\x20pos\x20'+'-\x20inner\x20co'+'rner\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20localP'+'os.xz\x20*=\x20-'+'0.5;\x20//\x20mo'+'ve\x20from\x20-1'+';1\x20to\x20-0.5'+';0.5\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s\x20=\x20localP'+'os.xzy;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20vec4\x20p'+'osW\x20=\x20mode'+'lMatrix\x20*\x20'+'vec4(local'+('Pos,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREENS'+'PACE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20posW.zw'+'\x20=\x20vec2(0.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20posW;\x0a}\x0a'+'\x0avec4\x20getP'+'osition()\x20'+'{\x0a\x0a\x20\x20\x20\x20dMo'+'delMatrix\x20'+'=\x20getModel'+'Matrix();\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'posW\x20=\x20eva'+'lWorldPosi'+'tion(verte'+'x_position'+'.xyz,\x20dMod'+'elMatrix);'+'\x0a\x20\x20\x20\x20dPosi'+'tionW\x20=\x20po'+'sW.xyz;\x0a\x0a\x20'+'\x20\x20\x20vec4\x20sc'+'reenPos;\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV1LAYOUT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sc'+'reenPos\x20=\x20'+'vec4(verte'+'x_texCoord'+'1.xy\x20*\x202.0'+'\x20-\x201.0,\x200.'+'5,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20WEBGPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20SCREENSP'+'ACE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos\x20=\x20po'+'sW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.y\x20*='+'\x20projectio'+'nFlipY;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20screen'+'Pos\x20=\x20matr'+'ix_viewPro'+'jection\x20*\x20'+'posW;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PIX'+'ELSNAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20snap\x20ver'+'tex\x20to\x20a\x20p'+'ixel\x20bound'+'ary\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x200.5'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.xy\x20*=\x20uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'ScreenSize'+'.zw;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x202.'+'0)\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20sc'+'reenPos;\x0a}')+('\x0a\x0avec3\x20get'+'WorldPosit'+'ion()\x20{\x0a\x20\x20'+'\x20\x20return\x20d'+'PositionW;'+'\x0a}\x0a'),n2='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_positi'+'on;\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifdef\x20MORP'+'HING\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20morph_te'+'x_params;\x0a'+'\x20\x20\x20\x20attrib'+'ute\x20uint\x20m'+'orph_verte'+'x_id;\x0a\x0a\x20\x20\x20'+'\x20ivec2\x20get'+'TextureMor'+'phCoords()'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20turn\x20'+'morph_vert'+'ex_id\x20into'+'\x20int\x20grid\x20'+'coordinate'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ivec2\x20text'+'ureSize\x20=\x20'+'ivec2(morp'+'h_tex_para'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20mor'+'phGridV\x20=\x20'+'int(morph_'+'vertex_id)'+'\x20/\x20texture'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20int\x20'+'morphGridU'+'\x20=\x20int(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20flipY\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20morphGrid'+'V\x20=\x20textur'+'eSize.y\x20-\x20'+'morphGridV'+'\x20-\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20ivec'+'2(morphGri'+'dU,\x20morphG'+'ridV);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_POSITI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_INT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec3\x20aabb'+'Size;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20aabbMin;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'usampler2D'+'\x20morphPosi'+'tionTex;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20highp\x20s'+'ampler2D\x20m'+'orphPositi'+'onTex;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a#ifdef\x20de'+'fined(BATC'+'H)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ski'+'nBatchVS\x22\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getBon'+'eMatrix(ve'+'rtex_boneI'+'ndices);\x0a\x20'+'\x20\x20\x20}\x0a\x0a#eli'+'f\x20defined('+'SKIN)\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x0a\x20'+'\x20\x20\x20mat4\x20ge'+'tModelMatr'+'ix()\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20get'+'SkinMatrix'+'(vertex_bo'+'neIndices,'+'\x20vertex_bo'+'neWeights)'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'elif\x20defin'+'ed(INSTANC'+'ING)\x0a\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'transformI'+'nstancingV'+'S\x22\x0a\x0a#else\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20matrix'+'_model;\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a\x0avec3\x20ge'+'tLocalPosi'+'tion(vec3\x20'+'vertexPosi'+'tion)\x20{\x0a\x0a\x20'+'\x20\x20\x20vec3\x20lo'+'calPos\x20=\x20v'+'ertexPosit'+'ion;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'morphUV\x20=\x20'+'getTexture'+'MorphCoord'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20MORPHING_'+'INT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20morphPos\x20'+'=\x20vec3(tex'+'elFetch(mo'+'rphPositio'+'nTex,\x20ivec'+'2(morphUV)'+',\x200).xyz)\x20'+'/\x2065535.0\x20'+'*\x20aabbSize'+'\x20+\x20aabbMin'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphPo'+'s\x20=\x20texelF'+'etch(morph'+'PositionTe'+'x,\x20ivec2(m'+'orphUV),\x200'+').xyz;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20localPos\x20'+'+=\x20morphPo'+'s;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20loc'+'alPos;\x0a}\x0a\x0a'),o2='\x0a\x0aattribut'+'e\x20vec4\x20ins'+'tance_line'+'1;\x0aattribu'+'te\x20vec4\x20in'+'stance_lin'+'e2;\x0aattrib'+'ute\x20vec4\x20i'+'nstance_li'+'ne3;\x0aattri'+'bute\x20vec4\x20'+'instance_l'+'ine4;\x0a\x0amat'+'4\x20getModel'+'Matrix()\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20mat'+'4(instance'+'_line1,\x20in'+'stance_lin'+'e2,\x20instan'+'ce_line3,\x20'+'instance_l'+'ine4);\x0a}\x0a',l2='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_refr'+'action;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getRefrac'+'tion()\x20{\x0a\x20'+'\x20\x20\x20float\x20r'+'efraction\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20ref'+'raction\x20=\x20'+'material_r'+'efraction;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_RE'+'FRACTION_T'+'EXTURE\x0a\x20\x20\x20'+'\x20refractio'+'n\x20*=\x20textu'+'re2DBias({'+'STD_REFRAC'+'TION_TEXTU'+'RE_NAME},\x20'+'{STD_REFRA'+'CTION_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_REF'+'RACTION_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_VERTEX'+'\x0a\x20\x20\x20\x20refra'+'ction\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_REFR'+'ACTION_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dTransmis'+'sion\x20=\x20ref'+'raction;\x0a}'+'\x0a',c2='\x0auniform\x20f'+'loat\x20twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0avoi'+'d\x20handleTw'+'oSidedLigh'+'ting()\x20{\x0a\x20'+'\x20\x20\x20dTBN[2]'+'\x20*=\x20gl_Fro'+'ntFacing\x20?'+'\x20twoSidedL'+'ightingNeg'+'ScaleFacto'+'r\x20:\x20-twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0a}\x0a',h2='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20vec2\x20ge'+'tUv0()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20ver'+'tex_positi'+'on.xz;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20o'+'ffset\x20inne'+'r\x20vertices'+'\x20inside\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20('+'original\x20v'+'ertices\x20mu'+'st\x20be\x20in\x20['+'-1;1]\x20rang'+'e)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2(0.'+'0),\x20vec2(1'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20n'+'egativeUni'+'tOffset\x20=\x20'+'clamp(-ver'+'tex_positi'+'on.xz,\x20vec'+'2(0.0),\x20ve'+'c2(1.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20-0.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20atlasRe'+'ct.zw\x20+\x20at'+'lasRect.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vMask\x20=\x20v'+'ertex_texC'+'oord0.xy;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20uv;\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20vec2'+'\x20getUv0()\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20ver'+'tex_texCoo'+'rd0;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a',d2='\x0avec2\x20getU'+'v1()\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'rtex_texCo'+'ord1;\x0a}\x0a',f2='\x0avUV{TRANS'+'FORM_UV_{i'+'}}_{TRANSF'+'ORM_ID_{i}'+'}\x20=\x20vec2(\x0a'+'\x20\x20\x20\x20dot(ve'+'c3(uv{TRAN'+'SFORM_UV_{'+'i}},\x201),\x20{'+'TRANSFORM_'+'NAME_{i}}0'+'),\x0a\x20\x20\x20\x20dot'+'(vec3(uv{T'+'RANSFORM_U'+'V_{i}},\x201)'+',\x20{TRANSFO'+'RM_NAME_{i'+'}}1)\x0a);\x0a',u2='\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}0;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}1;'+'\x0a',p2='\x0avoid\x20getV'+'iewDir()\x20{'+'\x0a\x20\x20\x20\x20dView'+'DirW\x20=\x20nor'+'malize(vie'+'w_position'+'\x20-\x20vPositi'+'onW);\x0a}\x0a',m2={'alphaTestPS':uC,'ambientPS':pC,'anisotropyPS':mC,'aoPS':_C,'aoDiffuseOccPS':gC,'aoSpecOccPS':SC,'bakeDirLmEndPS':yC,'bakeLmEndPS':vC,'basePS':xC,'baseNineSlicedPS':TC,'baseNineSlicedTiledPS':wC,'bayerPS':EC,'blurVSMPS':bC,'clearCoatPS':AC,'clearCoatGlossPS':CC,'clearCoatNormalPS':PC,'clusteredLightCookiesPS':DC,'clusteredLightShadowsPS':IC,'clusteredLightUtilsPS':MC,'clusteredLightPS':LC,'combinePS':RC,'cookieBlit2DPS':OC,'cookieBlitCubePS':FC,'cookieBlitVS':NC,'cookiePS':kC,'cubeMapProjectPS':UC,'cubeMapRotatePS':BC,'debugOutputPS':zC,'debugProcessFrontendPS':VC,'detailModesPS':HC,'diffusePS':WC,'decodePS':GC,'emissivePS':$C,'encodePS':XC,'endPS':qC,'envAtlasPS':jC,'envProcPS':YC,'falloffInvSquaredPS':KC,'falloffLinearPS':ZC,'floatAsUintPS':QC,'fogPS':JC,'fresnelSchlickPS':e1,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':t1,'gammaPS':s1,'gles3PS':ay,'gles3VS':ny,'glossPS':i1,'gsplatCenterVS':r1,'gsplatCornerVS':p1,'gsplatColorVS':a1,'gsplatCommonVS':n1,'gsplatCompressedDataVS':o1,'gsplatCompressedSHVS':l1,'gsplatEvalSHVS':c1,'gsplatQuatToMat3VS':h1,'gsplatSogsColorVS':d1,'gsplatSogsDataVS':f1,'gsplatSogsSHVS':u1,'gsplatDataVS':m1,'gsplatOutputVS':_1,'gsplatPS':g1,'gsplatSHVS':S1,'gsplatSourceVS':y1,'gsplatVS':v1,'quadVS':x1,'immediateLinePS':T1,'immediateLineVS':w1,'iridescenceDiffractionPS':E1,'iridescencePS':b1,'iridescenceThicknessPS':A1,'iorPS':C1,'lightDeclarationPS':P1,'lightDiffuseLambertPS':M1,'lightDirPointPS':D1,'lightEvaluationPS':I1,'lightFunctionLightPS':L1,'lightFunctionShadowPS':R1,'lightingPS':O1,'lightmapAddPS':F1,'lightmapPS':N1,'lightSpecularAnisoGGXPS':k1,'lightSpecularBlinnPS':U1,'lightSheenPS':B1,'linearizeDepthPS':z1,'litForwardBackendPS':V1,'litForwardDeclarationPS':G1,'litForwardMainPS':H1,'litForwardPostCodePS':W1,'litForwardPreCodePS':$1,'litMainPS':X1,'litMainVS':q1,'litOtherMainPS':j1,'litShaderArgsPS':Y1,'litShaderCorePS':K1,'litShadowMainPS':Z1,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':Q1,'metalnessPS':J1,'metalnessModulatePS':tP,'morphPS':sP,'morphVS':iP,'msdfPS':eP,'msdfVS':rP,'normalVS':aP,'normalCoreVS':nP,'normalMapPS':oP,'opacityPS':lP,'opacityDitherPS':cP,'outputPS':hP,'outputAlphaPS':dP,'outputTex2DPS':fP,'sheenPS':uP,'sheenGlossPS':pP,'parallaxPS':mP,'pickPS':_P,'reflDirPS':gP,'reflDirAnisoPS':SP,'reflectionCCPS':yP,'reflectionCubePS':vP,'reflectionEnvHQPS':xP,'reflectionEnvPS':TP,'reflectionSpherePS':wP,'reflectionSheenPS':EP,'refractionCubePS':bP,'refractionDynamicPS':AP,'reprojectPS':CP,'reprojectVS':PP,'screenDepthPS':MP,'shadowCascadesPS':DP,'shadowEVSMPS':IP,'shadowPCF1PS':LP,'shadowPCF3PS':RP,'shadowPCF5PS':OP,'shadowPCSSPS':FP,'shadowSoftPS':NP,'skinBatchVS':kP,'skinVS':UP,'skyboxPS':BP,'skyboxVS':zP,'specularPS':VP,'sphericalPS':GP,'specularityFactorPS':HP,'spotPS':WP,'startNineSlicedPS':$P,'startNineSlicedTiledPS':XP,'stdDeclarationPS':qP,'stdFrontEndPS':jP,'TBNPS':YP,'thicknessPS':KP,'tonemappingPS':ZP,'tonemappingAcesPS':QP,'tonemappingAces2PS':JP,'tonemappingFilmicPS':e2,'tonemappingHejlPS':t2,'tonemappingLinearPS':s2,'tonemappingNeutralPS':i2,'tonemappingNonePS':r2,'transformVS':a2,'transformCoreVS':n2,'transformInstancingVS':o2,'transmissionPS':l2,'twoSidedLightingPS':c2,'uv0VS':h2,'uv1VS':d2,'uvTransformVS':f2,'uvTransformUniformsPS':u2,'viewDirPS':p2,'webgpuPS':oy,'webgpuVS':ly},_2='\x0auniform\x20a'+'lpha_ref:\x20'+'f32;\x0a\x0afn\x20a'+'lphaTest(a'+':\x20f32)\x20{\x0a\x20'+'\x20\x20\x20if\x20(a\x20<'+'\x20uniform.a'+'lpha_ref)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',g2='\x0a\x0a#if\x20LIT_'+'AMBIENT_SO'+'URCE\x20==\x20AM'+'BIENTSH\x0a\x20\x20'+'\x20\x20uniform\x20'+'ambientSH:'+'\x20array<vec'+'3f,\x209>;\x0a#e'+'ndif\x0a\x0a#if\x20'+'LIT_AMBIEN'+'T_SOURCE\x20='+'=\x20ENVALATL'+'AS\x0a\x20\x20\x20\x20#in'+'clude\x20\x22env'+'AtlasPS\x22\x0a\x0a'+'\x20\x20\x20\x20#ifnde'+'f\x20ENV_ATLA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_en'+'vAtlas:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_envAt'+'lasSampler'+':\x20sampler;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'fn\x20addAmbi'+'ent(worldN'+'ormal:\x20vec'+'3f)\x20{\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20A'+'MBIENTSH\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20n:\x20vec3f'+'\x20=\x20cubeMap'+'Rotate(wor'+'ldNormal);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20color:\x20'+'vec3f\x20=\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[0]'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[1]\x20*\x20n.'+'x\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm.ambien'+'tSH[2]\x20*\x20n'+'.y\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form.ambie'+'ntSH[3]\x20*\x20'+'n.z\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform.ambi'+'entSH[4]\x20*'+'\x20n.x\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[5]\x20*\x20n.'+'z\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform.'+'ambientSH['+'6]\x20*\x20n.y\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform.amb'+'ientSH[7]\x20'+'*\x20(3.0\x20*\x20n'+'.z\x20*\x20n.z\x20-'+'\x201.0)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[8]'+'\x20*\x20(n.x\x20*\x20'+'n.x\x20-\x20n.y\x20'+'*\x20n.y);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20proces'+'sEnvironme'+'nt(max(col'+'or,\x20vec3f('+'0.0)));\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+('\x20ENVALATLA'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3f(-1.0,\x201'+'.0,\x201.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20mapUv'+'(toSpheric'+'alUv(dir),'+'\x20vec4f(128'+'.0,\x20256.0\x20'+'+\x20128.0,\x206'+'4.0,\x2032.0)'+'\x20/\x20atlasSi'+'ze);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20ra'+'w:\x20vec4f\x20='+'\x20textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20uv'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20linea'+'r:\x20vec3f\x20='+'\x20{ambientD'+'ecode}(raw'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20+=\x20pr'+'ocessEnvir'+'onment(lin'+'ear);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20C'+'ONSTANT\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20unifor'+'m.light_gl'+'obalAmbien'+'t;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),S2='\x0a#ifdef\x20LI'+'T_GGX_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_anis'+'otropyInte'+'nsity:\x20f32'+';\x0a\x20\x20\x20\x20unif'+'orm\x20materi'+'al_anisotr'+'opyRotatio'+'n:\x20vec2f;\x0a'+'#endif\x0a\x0afn'+'\x20getAnisot'+'ropy()\x20{\x0a\x20'+'\x20\x20\x20dAnisot'+'ropy\x20=\x200.0'+';\x0a\x20\x20\x20\x20dAni'+'sotropyRot'+'ation\x20=\x20ve'+'c2f(1.0,\x200'+'.0);\x0a\x0a#ifd'+'ef\x20LIT_GGX'+'_SPECULAR\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20=\x20un'+'iform.mate'+'rial_aniso'+'tropyInten'+'sity;\x0a\x20\x20\x20\x20'+'dAnisotrop'+'yRotation\x20'+'=\x20uniform.'+'material_a'+'nisotropyR'+'otation;\x0a#'+'endif\x0a\x0a#if'+'def\x20STD_AN'+'ISOTROPY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyTex:\x20'+'vec3f\x20=\x20te'+'xtureSampl'+'eBias({STD'+'_ANISOTROP'+'Y_TEXTURE_'+'NAME},\x20{ST'+'D_ANISOTRO'+'PY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'ANISOTROPY'+'_TEXTURE_U'+'V},\x20unifor'+'m.textureB'+'ias).rgb;\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20*=\x20a'+'nisotropyT'+'ex.b;\x0a\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyRotat'+'ionFromTex'+':\x20vec2f\x20=\x20'+'anisotropy'+'Tex.rg\x20*\x202'+'.0\x20-\x20vec2f'+'(1.0);\x0a\x20\x20\x20'+'\x20let\x20rotat'+'ionMatrix:'+'\x20mat2x2f\x20='+'\x20mat2x2f(d'+'Anisotropy'+'Rotation.x'+',\x20dAnisotr'+'opyRotatio'+'n.y,\x20-dAni'+'sotropyRot'+'ation.y,\x20d'+'Anisotropy'+'Rotation.x'+');\x0a\x20\x20\x20\x20dAn'+'isotropyRo'+'tation\x20=\x20r'+'otationMat'+'rix\x20*\x20anis'+'otropyRota'+'tionFromTe'+'x;\x0a#endif\x0a'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20c'+'lamp(dAnis'+'otropy,\x200.'+'0,\x201.0);\x0a}'+'\x0a',y2='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_aoI'+'ntensity:\x20'+'f32;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_AODETA'+'IL_TEXTURE'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22detai'+'lModesPS\x22\x0a'+'#endif\x0a\x0afn'+'\x20getAO()\x20{'+'\x0a\x20\x20\x20\x20dAo\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20aoBas'+'e:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_AO_TEXTU'+'RE_NAME},\x20'+'{STD_AO_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AO_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_AO_'+'TEXTURE_CH'+'ANNEL};\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_AO'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20aoDetail:'+'\x20f32\x20=\x20tex'+'tureSample'+'Bias({STD_'+'AODETAIL_T'+'EXTURE_NAM'+'E},\x20{STD_A'+'ODETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AODET'+'AIL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_AODETAI'+'L_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20aoBase\x20='+'\x20detailMod'+'e_{STD_AOD'+'ETAIL_DETA'+'ILMODE}(ve'+'c3f(aoBase'+'),\x20vec3f(a'+'oDetail)).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dAo'+'\x20=\x20dAo\x20*\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20=\x20dA'+'o\x20*\x20satura'+'te(vVertex'+'Color.{STD'+'_AO_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'STD_AO_TEX'+'TURE)\x20||\x20d'+'efined(STD'+'_AO_VERTEX'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAo\x20=\x20mix('+'1.0,\x20dAo,\x20'+'uniform.ma'+'terial_aoI'+'ntensity);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',v2='\x0afn\x20occlud'+'eDiffuse(a'+'o:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20ao;\x0a'+'}\x0a',x2='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'aterial_oc'+'cludeSpecu'+'larIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0afn'+'\x20occludeSp'+'ecular(glo'+'ss:\x20f32,\x20a'+'o:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f)\x20{\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20==\x20A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_OCCLUDE_S'+'PECULAR_FL'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'specOcc:\x20f'+'32\x20=\x20mix(1'+'.0,\x20ao,\x20un'+'iform.mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specOcc:'+'\x20f32\x20=\x20ao;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'GLOSSDEPEN'+'DENT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'roximated\x20'+'specular\x20o'+'cclusion\x20f'+'rom\x20AO\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ht'+'tp://resea'+'rch.tri-ac'+'e.com/Data'+'/cedec2011'+'_RealtimeP'+'BR_Impleme'+'ntation_e.'+'pptx\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20spe'+'cPow:\x20f32\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20specOc'+'c:\x20f32\x20=\x20s'+'aturate(po'+'w(dot(worl'+'dNormal,\x20v'+'iewDir)\x20+\x20'+'ao,\x200.01\x20*'+'\x20specPow)\x20'+'-\x201.0\x20+\x20ao'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_OCCLUDE'+'_SPECULAR_'+'FLOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecOcc\x20=\x20mi'+'x(1.0,\x20spe'+'cOcc,\x20unif'+'orm.materi'+'al_occlude'+'SpecularIn'+'tensity);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20*\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20dRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'*\x20specOcc;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sReflec'+'tion\x20=\x20sRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a'),T2='\x0a\x20\x20\x20\x20let\x20d'+'irLm\x20=\x20tex'+'tureSample'+'(texture_d'+'irLightMap'+',\x20texture_'+'dirLightMa'+'pSampler,\x20'+'vUv1);\x0a\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.bakeDi'+'r\x20>\x200.5)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(dAtten\x20'+'>\x200.00001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'npacked_di'+'r\x20=\x20dirLm.'+'xyz\x20*\x202.0\x20'+'-\x20vec3f(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x20clamp'+'(dAtten,\x200'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20comb'+'ined_dir\x20='+'\x20dLightDir'+'NormW.xyz\x20'+'*\x20dAtten\x20+'+'\x20unpacked_'+'dir\x20*\x20dirL'+'m.w;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20finalRgb\x20'+'=\x20normaliz'+'e(combined'+'_dir)\x20*\x200.'+'5\x20+\x20vec3f('+'0.5);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20finalA\x20='+'\x20max(dirLm'+'.w\x20+\x20dAtte'+'n,\x201.0\x20/\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalRgb,\x20'+'finalA);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20dirLm;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20alpha'+'_min\x20=\x20sel'+'ect(0.0,\x201'+'.0\x20/\x20255.0'+',\x20dAtten\x20>'+'\x200.00001);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20finalA\x20'+'=\x20max(dirL'+'m.w,\x20alpha'+'_min);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(dirL'+'m.rgb,\x20fin'+'alA);\x0a\x20\x20\x20\x20'+'}\x0a',w2='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'uniform.am'+'bientBakeO'+'cclusionCo'+'ntrast\x20+\x201'+'.0,\x200.0))\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20vec3f(u'+'niform.amb'+'ientBakeOc'+'clusionBri'+'ghtness);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'saturate3('+'dDiffuseLi'+'ght);\x0a\x20\x20\x20\x20'+'dDiffuseLi'+'ght\x20=\x20dDif'+'fuseLight\x20'+'*\x20dAmbient'+'Light;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIGHTMAP'+'_RGBM\x0a\x20\x20\x20\x20'+'//\x20encode\x20'+'to\x20RGBM\x0a\x20\x20'+'\x20\x20var\x20temp'+'_color_rgb'+'m\x20=\x20vec4f('+'dDiffuseLi'+'ght,\x201.0);'+'\x0a\x20\x20\x20\x20temp_'+'color_rgbm'+'\x20=\x20vec4f(p'+'ow(temp_co'+'lor_rgbm.r'+'gb,\x20vec3f('+'0.5)),\x20tem'+'p_color_rg'+'bm.a);\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+'color_rgbm'+'.rgb\x20/\x208.0'+',\x20temp_col'+'or_rgbm.a)'+';\x0a\x20\x20\x20\x20let\x20'+'max_g_b\x20=\x20'+'max(temp_c'+'olor_rgbm.'+'g,\x20max(tem'+'p_color_rg'+'bm.b,\x201.0\x20'+'/\x20255.0));'+'\x0a\x20\x20\x20\x20let\x20m'+'ax_rgb\x20=\x20m'+'ax(temp_co'+'lor_rgbm.r'+',\x20max_g_b)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20ceil'+'(temp_colo'+'r_rgbm.a\x20*'+'\x20255.0)\x20/\x20'+'255.0;\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+('color_rgbm'+'.rgb\x20/\x20tem'+'p_color_rg'+'bm.a,\x20temp'+'_color_rgb'+'m.a);\x0a\x20\x20\x20\x20'+'output.col'+'or\x20=\x20temp_'+'color_rgbm'+';\x0a#else\x0a\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20vec'+'4f(dDiffus'+'eLight,\x201.'+'0);\x0a#endif'+'\x0a'),E2='\x0auniform\x20v'+'iew_positi'+'on:\x20vec3f;'+'\x0a\x0auniform\x20'+'light_glob'+'alAmbient:'+'\x20vec3f;\x0a\x0af'+'n\x20square(x'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20x*x'+';\x0a}\x0a\x0afn\x20sa'+'turate(x:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0afn'+'\x20saturate3'+'(x:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3f(0.'+'0),\x20vec3f('+'1.0));\x0a}\x0a',b2='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'Mask:\x20vec2'+'f;\x0avarying'+'\x20vTiledUv:'+'\x20vec2f;\x0a\x0au'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0auni'+'form\x20outer'+'Scale:\x20vec'+'2f;\x0aunifor'+'m\x20atlasRec'+'t:\x20vec4f;\x0a'+'\x0avar<priva'+'te>\x20nineSl'+'icedUv:\x20ve'+'c2f;\x0a',A2='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vMask:\x20v'+'ec2f;\x0avary'+'ing\x20vTiled'+'Uv:\x20vec2f;'+'\x0a\x0auniform\x20'+'innerOffse'+'t:\x20vec4f;\x0a'+'uniform\x20ou'+'terScale:\x20'+'vec2f;\x0auni'+'form\x20atlas'+'Rect:\x20vec4'+'f;\x0a\x0avar<pr'+'ivate>\x20nin'+'eSlicedUv:'+'\x20vec2f;\x0a',C2='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afn\x20bay'+'er2(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(2.0\x20*'+'\x20p.y\x20+\x20p.x'+'\x20+\x201.0)\x20%\x20'+'4.0;\x0a}\x0a\x0a//'+'\x204x4\x20matri'+'x,\x20p\x20-\x20pix'+'el\x20coordin'+'ate\x0afn\x20bay'+'er4(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20p1:\x20vec2f'+'\x20=\x20p\x20%\x20vec'+'2f(2.0);\x0a\x20'+'\x20\x20\x20let\x20p2:'+'\x20vec2f\x20=\x20f'+'loor(0.5\x20*'+'\x20(p\x20%\x20vec2'+'f(4.0)));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afn\x20bayer8'+'(p:\x20vec2f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20p1'+':\x20vec2f\x20=\x20'+'p\x20%\x20vec2f('+'2.0);\x0a\x20\x20\x20\x20'+'let\x20p2:\x20ve'+'c2f\x20=\x20floo'+'r(0.5\x20*\x20(p'+'\x20%\x20vec2f(4'+'.0)));\x0a\x20\x20\x20'+'\x20let\x20p4:\x20v'+'ec2f\x20=\x20flo'+'or(0.25\x20*\x20'+'(p\x20%\x20vec2f'+'(8.0)));\x0a\x20'+'\x20\x20\x20return\x20'+'4.0\x20*\x20(4.0'+'\x20*\x20bayer2('+'p1)\x20+\x20baye'+'r2(p2))\x20+\x20'+'bayer2(p4)'+';\x0a}\x0a',P2='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20sou'+'rce:\x20textu'+'re_2d<f32>'+';\x0avar\x20sour'+'ceSampler:'+'\x20sampler;\x0a'+'\x0a#ifdef\x20GA'+'USS\x0a\x20\x20\x20\x20un'+'iform\x20weig'+'ht:\x20array<'+'f32,\x20{SAMP'+'LES}>;\x0a#en'+'dif\x0aunifor'+'m\x20pixelOff'+'set:\x20vec2f'+';\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20var'+'\x20moments:\x20'+'vec3f\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20let\x20uv'+':\x20vec2f\x20=\x20'+'input.vUv0'+'\x20-\x20uniform'+'.pixelOffs'+'et\x20*\x20(f32('+'{SAMPLES})'+'\x20*\x200.5);\x0a\x0a'+'\x20\x20\x20\x20for\x20(v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20{'+'SAMPLES};\x20'+'i\x20=\x20i\x20+\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20c:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'source,\x20so'+'urceSample'+'r,\x20uv\x20+\x20un'+'iform.pixe'+'lOffset\x20*\x20'+'f32(i));\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20moments'+'\x20=\x20moments'+'\x20+\x20c.xyz\x20*'+'\x20uniform.w'+'eight[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20=\x20moment'+'s\x20+\x20c.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'oments\x20=\x20m'+'oments\x20*\x20('+'1.0\x20/\x20f32('+'{SAMPLES})'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'moments,\x201'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a',M2='\x0auniform\x20m'+'aterial_cl'+'earCoat:\x20f'+'32;\x0a\x0afn\x20ge'+'tClearCoat'+'()\x20{\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20=\x20unifo'+'rm.materia'+'l_clearCoa'+'t;\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_C'+'LEARCOAT_T'+'EXTURE\x0a\x20\x20\x20'+'\x20ccSpecula'+'rity\x20=\x20ccS'+'pecularity'+'\x20*\x20texture'+'SampleBias'+'({STD_CLEA'+'RCOAT_TEXT'+'URE_NAME},'+'\x20{STD_CLEA'+'RCOAT_TEXT'+'URE_NAME}S'+'ampler,\x20{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_CLE'+'ARCOAT_VER'+'TEX\x0a\x20\x20\x20\x20cc'+'Specularit'+'y\x20=\x20ccSpec'+'ularity\x20*\x20'+'saturate(v'+'VertexColo'+'r.{STD_CLE'+'ARCOAT_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a',D2='\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_clearCoa'+'tGloss:\x20f3'+'2;\x0a\x0afn\x20get'+'ClearCoatG'+'lossiness('+')\x20{\x0a\x20\x20\x20\x20cc'+'Glossiness'+'\x20=\x20uniform'+'.material_'+'clearCoatG'+'loss;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE_NAME}'+',\x20{STD_CLE'+'ARCOATGLOS'+'S_TEXTURE_'+'NAME}Sampl'+'er,\x20{STD_C'+'LEARCOATGL'+'OSS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_CLEA'+'RCOATGLOSS'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_INVERT\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20=\x201.0'+'\x20-\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20ccGloss'+'iness\x20+=\x200'+'.0000001;\x0a'+'}\x0a',I2='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_cle'+'arCoatBump'+'iness:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getClea'+'rCoatNorma'+'l()\x20{\x0a#ifd'+'ef\x20STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'\x0a\x20\x20\x20\x20var\x20n'+'ormalMap:\x20'+'vec3f\x20=\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_DEC'+'ODE}(textu'+'reSampleBi'+'as({STD_CL'+'EARCOATNOR'+'MAL_TEXTUR'+'E_NAME},\x20{'+'STD_CLEARC'+'OATNORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias));\x0a\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20mix(v'+'ec3f(0.0,\x20'+'0.0,\x201.0),'+'\x20normalMap'+',\x20uniform.'+'material_c'+'learCoatBu'+'mpiness);\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20norm'+'alize(dTBN'+'\x20*\x20normalM'+'ap);\x0a#else'+'\x0a\x20\x20\x20\x20ccNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a',L2='\x0astruct\x20Fa'+'ceCoords\x20{'+'\x0a\x20\x20\x20\x20uv:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Or'+'iginal\x20ret'+'urn\x20value\x0a'+'\x20\x20\x20\x20faceIn'+'dex:\x20f32,\x20'+'\x20\x20\x20//\x20Was\x20'+'out\x20parame'+'ter\x0a\x20\x20\x20\x20ti'+'leOffset:\x20'+'vec2f,\x20//\x20'+'Was\x20out\x20pa'+'rameter\x0a}\x0a'+'\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0afn\x20getC'+'ubemapFace'+'Coordinate'+'s(dir:\x20vec'+'3f)\x20->\x20Fac'+'eCoords\x20{\x0a'+'\x20\x20\x20\x20var\x20fa'+'ceIndex:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20tileOffs'+'et:\x20vec2f;'+'\x0a\x20\x20\x20\x20var\x20u'+'v:\x20vec2f;\x20'+'//\x20This\x20is'+'\x20the\x20face\x20'+'UV\x20[0..1]\x0a'+'\x20\x20\x20\x20let\x20vA'+'bs:\x20vec3f\x20'+'=\x20abs(dir)'+';\x0a\x20\x20\x20\x20var\x20'+'ma:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20if\x20(vA'+'bs.z\x20>=\x20vA'+'bs.x\x20&&\x20vA'+'bs.z\x20>=\x20vA'+'bs.y)\x20{\x20\x20\x20'+'//\x20front\x20/'+'\x20back\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20i'+'s_neg_z\x20=\x20'+'dir.z\x20<\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20faceIndex'+'\x20=\x20select('+'4.0,\x205.0,\x20'+'is_neg_z);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'a\x20=\x200.5\x20/\x20'+'vAbs.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv\x20='+'\x20vec2f(sel'+'ect(dir.x,'+'\x20-dir.x,\x20i'+'s_neg_z),\x20'+'-dir.y);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20til'+'eOffset\x20=\x20'+'vec2f(2.0,'+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_z));\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(vAbs'+'.y\x20>=\x20vAbs'+'.x)\x20{\x20\x20//\x20'+'top\x20index\x20'+'2,\x20bottom\x20'+'index\x203\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20is_neg_y\x20'+'=\x20dir.y\x20<\x20'+'0.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20selec'+('t(2.0,\x203.0'+',\x20is_neg_y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ma\x20=\x200.5\x20'+'/\x20vAbs.y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20=\x20vec2f(d'+'ir.x,\x20sele'+'ct(dir.z,\x20'+'-dir.z,\x20is'+'_neg_y));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ti'+'leOffset\x20='+'\x20vec2f(1.0'+',\x20select(0'+'.0,\x201.0,\x20i'+'s_neg_y));'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20is_'+'neg_x\x20=\x20di'+'r.x\x20<\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'aceIndex\x20='+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_x);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2f(selec'+'t(-dir.z,\x20'+'dir.z,\x20is_'+'neg_x),\x20-d'+'ir.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20tileO'+'ffset\x20=\x20ve'+'c2f(0.0,\x20s'+'elect(0.0,'+'\x201.0,\x20is_n'+'eg_x));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20u'+'v\x20=\x20uv\x20*\x20m'+'a\x20+\x200.5;\x0a\x20'+'\x20\x20\x20return\x20'+'FaceCoords'+'(uv,\x20faceI'+'ndex,\x20tile'+'Offset);\x0a}'+'\x0a\x0a//\x20conve'+'rts\x20unnorm'+'alized\x20dir'+'ection\x20vec'+'tor\x20to\x20a\x20t'+'exture\x20coo'+'rdinate\x20fo'+'r\x20a\x20cubema'+'p\x20face\x20sto'+'red\x20within'+'\x20texture\x20a'+'tlas\x20descr'+'ibed\x20by\x20th'+'e\x20viewport'+'\x0afn\x20getCub'+'emapAtlasC'+'oordinates'+'(omniAtlas'+'Viewport:\x20'+'vec3f,\x20sha'+'dowEdgePix'+'els:\x20f32,\x20'+'shadowText'+'ureResolut'+'ion:\x20f32,\x20'+'dir:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20faceData'+':\x20FaceCoor'+'ds\x20=\x20getCu'+'bemapFaceC'+'oordinates'+'(dir);\x0a\x20\x20\x20'+'\x20var\x20uv:\x20v'+'ec2f\x20=\x20fac'+'eData.uv;\x0a'+'\x20\x20\x20\x20let\x20ti'+'leOffset:\x20'+'vec2f\x20=\x20fa'+'ceData.til'+'eOffset;\x0a\x0a'+'\x20\x20\x20\x20//\x20mov'+'e\x20uv\x20coord'+'inates\x20inw'+'ards\x20insid'+'e\x20to\x20compe'+'nsate\x20for\x20')+('larger\x20fov'+'\x20when\x20rend'+'ering\x20shad'+'ow\x20into\x20at'+'las\x0a\x20\x20\x20\x20le'+'t\x20atlasFac'+'eSize:\x20f32'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20le'+'t\x20tileSize'+':\x20f32\x20=\x20sh'+'adowTextur'+'eResolutio'+'n\x20*\x20atlasF'+'aceSize;\x0a\x20'+'\x20\x20\x20var\x20off'+'set:\x20f32\x20='+'\x20shadowEdg'+'ePixels\x20/\x20'+'tileSize;\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20*\x20(1.0\x20-'+'\x20offset\x20*\x20'+'2.0)\x20+\x20off'+'set;\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20='+'\x20uv\x20*\x20atla'+'sFaceSize;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x20into'+'\x20face\x20of\x20t'+'he\x20atlas\x20('+'3x3\x20grid)\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20+\x20tileOf'+'fset\x20*\x20atl'+'asFaceSize'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'offset\x20int'+'o\x20the\x20atla'+'s\x20viewport'+'\x0a\x20\x20\x20\x20uv\x20=\x20'+'uv\x20+\x20omniA'+'tlasViewpo'+'rt.xy;\x0a\x0a\x20\x20'+'\x20\x20return\x20u'+'v;\x0a}\x0a'),R2='\x0afn\x20_getCo'+'okieCluste'+'red(tex:\x20t'+'exture_2d<'+'f32>,\x20texS'+'ampler:\x20sa'+'mpler,\x20uv:'+'\x20vec2f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20pixel'+':\x20vec4f\x20=\x20'+'mix(vec4f('+'1.0),\x20text'+'ureSampleL'+'evel(tex,\x20'+'texSampler'+',\x20uv,\x200.0)'+',\x20intensit'+'y);\x0a\x20\x20\x20\x20le'+'t\x20isRgb:\x20b'+'ool\x20=\x20dot('+'cookieChan'+'nel.rgb,\x20v'+'ec3f(1.0))'+'\x20==\x203.0;\x0a\x20'+'\x20\x20\x20return\x20'+'select(vec'+'3f(dot(pix'+'el,\x20cookie'+'Channel)),'+'\x20pixel.rgb'+',\x20isRgb);\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0afn'+'\x20getCookie'+'2DClustere'+'d(tex:\x20tex'+'ture_2d<f3'+'2>,\x20texSam'+'pler:\x20samp'+'ler,\x20trans'+'form:\x20mat4'+'x4f,\x20world'+'Position:\x20'+'vec3f,\x20int'+'ensity:\x20f3'+'2,\x20cookieC'+'hannel:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20projPo'+'s:\x20vec4f\x20='+'\x20transform'+'\x20*\x20vec4f(w'+'orldPositi'+'on,\x201.0);\x0a'+'\x20\x20\x20\x20return'+'\x20_getCooki'+'eClustered'+'(tex,\x20texS'+'ampler,\x20pr'+'ojPos.xy\x20/'+'\x20projPos.w'+',\x20intensit'+'y,\x20cookieC'+'hannel);\x0a}'+'\x0a\x0a//\x20getCo'+'okie\x20for\x20c'+'lustered\x20o'+'mni\x20light\x20'+'with\x20the\x20c'+'ookie\x20text'+'ure\x20being\x20'+'stored\x20in\x20'+'the\x20cookie'+'\x20atlas\x0afn\x20'+'getCookieC'+'ubeCluster'+'ed(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20dir:'+'\x20vec3f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f,\x20shad'+'owTextureR'+'esolution:'+'\x20f32,\x20shad'+('owEdgePixe'+'ls:\x20f32,\x20o'+'mniAtlasVi'+'ewport:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20dir);'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getCook'+'ieClustere'+'d(tex,\x20tex'+'Sampler,\x20u'+'v,\x20intensi'+'ty,\x20cookie'+'Channel);\x0a'+'}\x0a'),O2='\x0a\x0afn\x20_getS'+'hadowCoord'+'PerspZbuff'+'er(shadowM'+'atrix:\x20mat'+'4x4f,\x20shad'+'owParams:\x20'+'vec4f,\x20wPo'+'s:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20p'+'rojPos\x20=\x20s'+'hadowMatri'+'x\x20*\x20vec4f('+'wPos,\x201.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20projPos'+'.xyz\x20/\x20pro'+'jPos.w;\x0a\x20\x20'+'\x20\x20//\x20depth'+'\x20bias\x20is\x20a'+'lready\x20app'+'lied\x20on\x20re'+'nder\x0a}\x0a\x0afn'+'\x20getShadow'+'CoordPersp'+'ZbufferNor'+'malOffset('+'shadowMatr'+'ix:\x20mat4x4'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20normal'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20wP'+'os:\x20vec3f\x20'+'=\x20vPositio'+'nW\x20+\x20norma'+'l\x20*\x20shadow'+'Params.y;\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wCoordPers'+'pZbuffer(s'+'hadowMatri'+'x,\x20shadowP'+'arams,\x20wPo'+'s);\x0a}\x0a\x0afn\x20'+'normalOffs'+'etPointSha'+'dow(shadow'+'Params:\x20ve'+'c4f,\x20light'+'Pos:\x20vec3f'+',\x20lightDir'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'normal:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(li'+'ghtDir);\x0a\x20'+'\x20\x20\x20let\x20wPo'+'s:\x20vec3f\x20='+'\x20vPosition'+'W\x20+\x20normal'+'\x20*\x20shadowP'+'arams.y\x20*\x20'+'clamp(1.0\x20'+'-\x20dot(norm'+'al,\x20-light'+'DirNorm),\x20'+'0.0,\x201.0)\x20'+'*\x20distScal'+'e;\x20//0.02\x0a'+'\x20\x20\x20\x20let\x20di'+'r:\x20vec3f\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0a\x20\x20\x20\x20'+'fn\x20getShad'+'owOmniClus'+'teredPCF1('+'shadowMap:'+'\x20texture_d'+'epth_2d,\x20s'+'hadowMapSa'+'mpler:\x20sam'+'pler_compa'+'rison,\x20sha'+'dowParams:'+('\x20vec4f,\x20om'+'niAtlasVie'+'wport:\x20vec'+'3f,\x20shadow'+'EdgePixels'+':\x20f32,\x20lig'+'htDir:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shad'+'owTextureR'+'esolution:'+'\x20f32\x20=\x20sha'+'dowParams.'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+'tureResolu'+'tion,\x20ligh'+'tDir);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowZ:\x20f'+'32\x20=\x20lengt'+'h(lightDir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv,'+'\x20shadowZ);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F3)\x0a\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'wOmniClust'+'eredPCF3(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owParams:\x20'+'vec4f,\x20omn'+'iAtlasView'+'port:\x20vec3'+'f,\x20shadowE'+'dgePixels:'+'\x20f32,\x20ligh'+'tDir:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wTextureRe'+'solution:\x20'+'f32\x20=\x20shad'+'owParams.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20light'+'Dir);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadowZ:\x20f3'+'2\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w\x20+\x20'+'shadowPara'+'ms.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowCoord:'+'\x20vec3f\x20=\x20v'+'ec3f(uv,\x20s'+'hadowZ);\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF3x3('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20}\x0a\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowOmn'+'iClustered'+'PCF5(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20omniAtl'+'asViewport'+':\x20vec3f,\x20s'+'hadowEdgeP'+'ixels:\x20f32'+',\x20lightDir'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadowTex'+'tureResolu'+'tion:\x20f32\x20'+'=\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'uv:\x20vec2f\x20'+'=\x20getCubem'+'apAtlasCoo'+'rdinates(o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20shad'+'owTextureR'+'esolution,'+'\x20lightDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20vec3f'+'(uv,\x20shado'+'wZ);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CF5x5(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'#endif\x0a\x0a//'+'\x20Clustered'+'\x20Spot\x20Samp'+'ling\x20using'+'\x20atlas\x0a\x0a#i'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF1)\x0a\x0a\x20\x20\x20'+'\x20fn\x20getSha'+'dowSpotClu'+'steredPCF1'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu')+('rn\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowCoord.'+'xy,\x20shadow'+'Coord.z);\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0a\x20\x20'+'\x20\x20fn\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'3x3(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF5)\x0a\x0a\x20'+'\x20\x20\x20fn\x20getS'+'hadowSpotC'+'lusteredPC'+'F5(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),F2='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0avar\x20clu'+'sterWorldT'+'exture:\x20te'+'xture_2d<f'+'32>;\x0avar\x20l'+'ightsTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x0a#ifdef\x20C'+'LUSTER_SHA'+'DOWS\x0a\x20\x20\x20\x20/'+'/\x20TODO:\x20wh'+'en\x20VSM\x20sha'+'dow\x20is\x20sup'+'ported,\x20it'+'\x20needs\x20to\x20'+'use\x20sample'+'r2D\x20in\x20web'+'gl2\x0a\x20\x20\x20\x20va'+'r\x20shadowAt'+'lasTexture'+':\x20texture_'+'depth_2d;\x0a'+'\x20\x20\x20\x20var\x20sh'+'adowAtlasT'+'extureSamp'+'ler:\x20sampl'+'er_compari'+'son;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'var\x20cookie'+'AtlasTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20c'+'ookieAtlas'+'TextureSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0auniform'+'\x20clusterMa'+'xCells:\x20i3'+'2;\x0a\x0a//\x201.0'+'\x20if\x20cluste'+'red\x20lighti'+'ng\x20can\x20be\x20'+'skipped\x20(0'+'\x20lights\x20in'+'\x20the\x20clust'+'ers)\x0aunifo'+'rm\x20cluster'+'Skip:\x20f32;'+'\x0a\x0auniform\x20'+'clusterCel'+'lsCountByB'+'oundsSize:'+'\x20vec3f;\x0aun'+'iform\x20clus'+'terTexture'+'Size:\x20vec3'+'f;\x0auniform'+'\x20clusterBo'+'undsMin:\x20v'+'ec3f;\x0aunif'+'orm\x20cluste'+'rBoundsDel'+'ta:\x20vec3f;'+'\x0auniform\x20c'+'lusterCell'+'sDot:\x20vec3'+'f;\x0auniform'+'\x20clusterCe'+'llsMax:\x20ve'+('c3f;\x0aunifo'+'rm\x20shadowA'+'tlasParams'+':\x20vec2f;\x0a\x0a'+'//\x20structu'+'re\x20storing'+'\x20light\x20pro'+'perties\x20of'+'\x20a\x20cluster'+'ed\x20light\x0a/'+'/\x20it\x27s\x20sor'+'ted\x20to\x20hav'+'e\x20all\x20vect'+'ors\x20aligne'+'d\x20to\x204\x20flo'+'ats\x20to\x20lim'+'it\x20padding'+'\x0astruct\x20Cl'+'usterLight'+'Data\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x2032bit'+'\x20of\x20flags\x0a'+'\x20\x20\x20\x20flags:'+'\x20u32,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfWidth:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20isSpot:\x20'+'bool,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfHeight:'+'\x20vec3f,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20index\x0a\x20\x20'+'\x20\x20lightInd'+'ex:\x20i32,\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x0a\x20\x20'+'\x20\x20position'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sh'+'ape\x0a\x20\x20\x20\x20sh'+'ape:\x20u32,\x0a'+'\x0a\x20\x20\x20\x20//\x20wo'+'rld\x20space\x20'+'direction\x20'+'(spot\x20ligh'+'t\x20only)\x0a\x20\x20'+'\x20\x20directio'+'n:\x20vec3f,\x0a'+'\x0a\x20\x20\x20\x20//\x20li'+'ght\x20follow'+'\x20mode\x0a\x20\x20\x20\x20'+'falloffMod'+'eLinear:\x20b'+'ool,\x0a\x0a\x20\x20\x20\x20'+'//\x20color\x0a\x20'+'\x20\x20\x20color:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20//\x200.0\x20i'+'f\x20the\x20ligh'+'t\x20doesn\x27t\x20'+'cast\x20shado'+'ws\x0a\x20\x20\x20\x20sha'+'dowIntensi'+'ty:\x20f32,\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20omniAtl'+'asViewport'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20of\x20the\x20'+'light\x0a\x20\x20\x20\x20'+'range:\x20f32'+',\x0a\x0a\x20\x20\x20\x20//\x20'+'channel\x20ma'+'sk\x20-\x20one\x20o'+'f\x20the\x20chan'+'nels\x20has\x201'+',\x20the\x20othe')+('rs\x20are\x200\x0a\x20'+'\x20\x20\x20cookieC'+'hannelMask'+':\x20vec4f,\x0a\x0a'+'\x20\x20\x20\x20//\x20com'+'pressed\x20bi'+'ases,\x20two\x20'+'haf-floats'+'\x20stored\x20in'+'\x20a\x20float\x0a\x20'+'\x20\x20\x20biasesD'+'ata:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20bias\x20'+'values\x0a\x20\x20\x20'+'\x20shadowBia'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20shadowNo'+'rmalBias:\x20'+'f32,\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20a'+'nglesData:'+'\x20f32,\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20inner'+'\x20and\x20outer'+'\x20angle\x20cos'+'ine\x0a\x20\x20\x20\x20in'+'nerConeAng'+'leCos:\x20f32'+',\x0a\x20\x20\x20\x20oute'+'rConeAngle'+'Cos:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'tensity\x20of'+'\x20the\x20cooki'+'e\x0a\x20\x20\x20\x20cook'+'ieIntensit'+'y:\x20f32,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20mask\x0a\x20\x20\x20'+'\x20//float\x20m'+'ask;\x0a\x20\x20\x20\x20i'+'sDynamic:\x20'+'bool,\x0a\x20\x20\x20\x20'+'isLightmap'+'ped:\x20bool\x0a'+'}\x0a\x0a//\x20Note'+':\x20on\x20some\x20'+'devices\x20(t'+'ested\x20on\x20P'+'ixel\x203A\x20XL'+'),\x20this\x20ma'+'trix\x20when\x20'+'stored\x20ins'+'ide\x20the\x20li'+'ght\x20struct'+'\x20has\x20lower'+'\x20precision'+'\x20compared\x20'+'to\x0a//\x20when'+'\x20stored\x20ou'+'tside,\x20so\x20'+'we\x20store\x20i'+'t\x20outside\x20'+'to\x20avoid\x20s'+'pot\x20shadow'+'\x20flickerin'+'g.\x20This\x20mi'+'ght\x20need\x20t'+'o\x20be\x20done\x20'+'to\x20other\x20/'+'\x20all\x20membe'+'rs\x0a//\x20of\x20t'+'he\x20structu'+'re\x20if\x20furt'+'her\x20simila'+'r\x20issues\x20a'+'re\x20observe'+'d.\x0a\x0a//\x20sha'+'dow\x20(spot\x20'+'light\x20only'+')\x20/\x20cookie'+'\x20projectio'+'n\x20matrix\x0av'+'ar<private'+'>\x20lightPro'+'jectionMat'+'rix:\x20mat4x'+'4f;\x0a\x0afn\x20sa'+'mpleLightT'+'extureF(li'+'ghtIndex:\x20'+'i32,\x20index'+':\x20i32)\x20->\x20')+('vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20t'+'extureLoad'+'(lightsTex'+'ture,\x20vec2'+'<i32>(inde'+'x,\x20lightIn'+'dex),\x200);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightCore(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>,\x20'+'lightIndex'+':\x20f32)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20lig'+'ht\x20index\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'lightIndex'+'\x20=\x20i32(lig'+'htIndex);\x0a'+'\x0a\x20\x20\x20\x20//\x20sa'+'mple\x20data\x20'+'encoding\x20h'+'alf-float\x20'+'values\x20int'+'o\x2032bit\x20ui'+'nts\x0a\x20\x20\x20\x20le'+'t\x20halfData'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_COLO'+'R_ANGLES_B'+'IAS});\x0a\x0a\x20\x20'+'\x20\x20//\x20store'+'\x20floats\x20we'+'\x20decode\x20la'+'ter\x20as\x20nee'+'ded\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.angle'+'sData\x20=\x20ha'+'lfData.z;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.biasesDat'+'a\x20=\x20halfDa'+'ta.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20decomp'+'ress\x20color'+'\x20half-floa'+'ts\x0a\x20\x20\x20\x20let'+'\x20colorRG:\x20'+'vec2f\x20=\x20un'+'pack2x16fl'+'oat(bitcas'+'t<u32>(hal'+'fData.x));'+'\x0a\x20\x20\x20\x20let\x20c'+'olorB_:\x20ve'+'c2f\x20=\x20unpa'+'ck2x16floa'+'t(bitcast<'+'u32>(halfD'+'ata.y));\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'color\x20=\x20ve'+'c3f(colorR'+'G,\x20colorB_'+'.x)\x20*\x20{LIG'+'HT_COLOR_D'+'IVIDER};\x0a\x0a'+'\x20\x20\x20\x20//\x20pos'+'ition\x20and\x20'+'range,\x20ful'+'l\x20floats\x0a\x20'+'\x20\x20\x20let\x20lig'+'htPosRange'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_POSI'+'TION_RANGE'+'});\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.posit')+('ion\x20=\x20ligh'+'tPosRange.'+'xyz;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.rang'+'e\x20=\x20lightP'+'osRange.w;'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'pot\x20direct'+'ion\x20&\x20flag'+'s\x20data\x0a\x20\x20\x20'+'\x20let\x20light'+'Dir_Flags:'+'\x20vec4f\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData.ligh'+'tIndex,\x20{C'+'LUSTER_TEX'+'TURE_DIREC'+'TION_FLAGS'+'});\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20directi'+'on\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.direct'+'ion\x20=\x20ligh'+'tDir_Flags'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x2032bit\x20'+'flags\x0a\x20\x20\x20\x20'+'let\x20flags_'+'uint:\x20u32\x20'+'=\x20bitcast<'+'u32>(light'+'Dir_Flags.'+'w);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20flags_u'+'int;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.isSp'+'ot\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2030u)'+')\x20!=\x200u;\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'shape\x20=\x20(f'+'lags_uint\x20'+'>>\x2028u)\x20&\x20'+'0x3u;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.fal'+'loffModeLi'+'near\x20=\x20(fl'+'ags_uint\x20&'+'\x20(1u\x20<<\x2027'+'u))\x20==\x200u;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.shadowIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x200'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.cookieIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x208'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.isDynami'+'c\x20=\x20(flags'+'_uint\x20&\x20(1'+'u\x20<<\x2022u))'+'\x20!=\x200u;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sLightmapp'+'ed\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2021u)'+')\x20!=\x200u;\x0a}'+'\x0a\x0afn\x20decod'+'eClusterLi'+'ghtSpot(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{')+('\x0a\x20\x20\x20\x20//\x20sp'+'ot\x20light\x20c'+'os\x20angles\x0a'+'\x20\x20\x20\x20let\x20an'+'gles:\x20vec2'+'f\x20=\x20unpack'+'2x16float('+'bitcast<u3'+'2>(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'OmniAtlasV'+'iewport(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.omniAtla'+'sViewport\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData.l'+'ightIndex,'+'\x20{CLUSTER_'+'TEXTURE_PR'+'OJ_MAT_0})'+'.xyz;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'AreaData(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>)\x20'+'{\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.halfWid'+'th\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a.lightInd'+'ex,\x20{CLUST'+'ER_TEXTURE'+'_AREA_DATA'+'_WIDTH}).x'+'yz;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.halfH'+'eight\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data.light'+'Index,\x20{CL'+'USTER_TEXT'+'URE_AREA_D'+'ATA_HEIGHT'+'}).xyz;\x0a}\x0a'+'\x0afn\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(cluster'+'LightData:'+'\x20ptr<funct'+'ion,\x20Clust'+'erLightDat'+'a>)\x20{\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'matrix\x0a\x20\x20\x20'+'\x20let\x20m0:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_0});\x0a\x20\x20\x20'+'\x20let\x20m1:\x20v')+('ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_1});\x0a\x20\x20\x20'+'\x20let\x20m2:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_2});\x0a\x20\x20\x20'+'\x20let\x20m3:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4x'+'4f(m0,\x20m1,'+'\x20m2,\x20m3);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightShadow'+'Data(clust'+'erLightDat'+'a:\x20ptr<fun'+'ction,\x20Clu'+'sterLightD'+'ata>)\x20{\x0a\x20\x20'+'\x20\x20//\x20shado'+'w\x20biases\x0a\x20'+'\x20\x20\x20let\x20bia'+'ses:\x20vec2f'+'\x20=\x20unpack2'+'x16float(b'+'itcast<u32'+'>(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'fn\x20decodeC'+'lusterLigh'+'tCookieDat'+'a(clusterL'+'ightData:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20extract'+'\x20channel\x20m'+'ask\x20from\x20f'+'lags\x0a\x20\x20\x20\x20l'+'et\x20cookieF'+'lags:\x20u32\x20'+'=\x20(cluster'+'LightData.'+'flags\x20>>\x202'+'3u)\x20&\x200x0F'+'u;\x20\x20//\x204bi'+'ts,\x20each\x20b'+'it\x20enables'+'\x20a\x20channel'+'\x0a\x20\x20\x20\x20let\x20m'+'ask_uvec:\x20'+'vec4<u32>\x20'+'=\x20vec4<u32'+'>(cookieFl'+'ags)\x20&\x20vec'+'4<u32>(1u,'+'\x202u,\x204u,\x208'+'u);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eChannelMa'+'sk\x20=\x20step('+'vec4f(1.0)')+(',\x20vec4f(ma'+'sk_uvec));'+'\x20//\x20Normal'+'ize\x20to\x200.0'+'\x20or\x201.0\x0a}\x0a'+'\x0afn\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20light:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>,\x0a\x20\x20\x20\x20wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20reflectio'+'nDir:\x20vec3'+'f,\x0a#if\x20def'+'ined(LIT_C'+'LEARCOAT)\x0a'+'\x20\x20\x20\x20clearc'+'oatReflect'+'ionDir:\x20ve'+'c3f,\x0a#endi'+'f\x0a\x20\x20\x20\x20glos'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20specular'+'ity:\x20vec3f'+',\x0a\x20\x20\x20\x20geom'+'etricNorma'+'l:\x20vec3f,\x0a'+'\x20\x20\x20\x20tbn:\x20m'+'at3x3f,\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a#e'+'ndif\x0a\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20clearco'+'at_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20s'+'heen_gloss'+':\x20f32,\x0a\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty:\x20f32\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ve'+'c3f(1.0);\x0a'+'\x20\x20\x20\x20var\x20di'+'ffuseAtten'+'uation:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20var\x20fal'+'loffAttenu'+'ation:\x20f32'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20omni\x20'+'part\x20of\x20th'+'e\x20light\x0a\x20\x20'+'\x20\x20let\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(l'+'ight.posit'+'ion);\x0a\x20\x20\x20\x20'+'let\x20lightD'+'irNormW:\x20v'+'ec3f\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20')+('handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20=\x20g'+'etFalloffL'+'inear(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'falloffAtt'+'enuation\x20='+'\x20getFallof'+'fInvSquare'+'d(light.ra'+'nge,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20if'+'\x20(falloffA'+'ttenuation'+'\x20>\x200.00001'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_AR'+'EALIGHTS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20!=\x20{LI'+'GHTSHAPE_P'+'UNCTUAL})\x20'+'{\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20handle\x20l'+'ight\x20shape'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20='+'=\x20{LIGHTSH'+'APE_RECT})'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getRectLig'+'htDiffuse('+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'W,\x20lightDi'+'rNormW)\x20*\x20'+'16.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20diffuseAt'+'tenuation\x20'+'=\x20getDiskL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x20{\x20/'+'/\x20sphere\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getS'+'phereLight'+'Diffuse(wo'+'rldNormal,'+'\x20viewDir,\x20'+'lightDirW,'+'\x20lightDirN'+'ormW)\x20*\x2016'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNormW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.is'+'Spot)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'decodeClus'+'terLightSp'+'ot(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getSp'+'otEffect(l'+'ight.direc'+'tion,\x20ligh'+'t.innerCon'+'eAngleCos,'+'\x20light.out'+'erConeAngl'+'eCos,\x20ligh'+'tDirNormW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(CLUSTER'+'_COOKIES)\x20'+'||\x20defined'+'(CLUSTER_S'+'HADOWS)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(falloffAt'+'tenuation\x20'+'>\x200.00001)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'hadow\x20/\x20co')+('okie\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'dowIntensi'+'ty\x20>\x200.0\x20|'+'|\x20light.co'+'okieIntens'+'ity\x20>\x200.0)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20shared\x20'+'shadow\x20/\x20c'+'ookie\x20data'+'\x20depends\x20o'+'n\x20light\x20ty'+'pe\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.i'+'sSpot)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ecodeClust'+'erLightPro'+'jectionMat'+'rixData(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20decodeClu'+'sterLightO'+'mniAtlasVi'+'ewport(lig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'TextureRes'+'olution:\x20f'+'32\x20=\x20unifo'+'rm.shadowA'+'tlasParams'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'EdgePixels'+':\x20f32\x20=\x20un'+'iform.shad'+'owAtlasPar'+'ams.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_C'+'OOKIES\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'cookieInte'+'nsity\x20>\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(light)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'!!!!!!!!!!'+'!\x20TEXTURE_'+'PASS\x20likel'+'y\x20needs\x20sa'+'mpler.\x20Ass'+'uming\x20cook'+'ieAtlasTex'+'tureSample'+'r\x20exists.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20cookie'+'Attenuatio'+'n\x20=\x20getCoo'+'kie2DClust'+'ered(cooki'+'eAtlasText'+'ure,\x20cooki'+'eAtlasText'+'ureSampler'+',\x20lightPro'+'jectionMat'+'rix,\x20vPosi'+'tionW,\x20lig')+('ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20!!!!!!!!'+'!!!\x20TEXTUR'+'E_PASS\x20lik'+'ely\x20needs\x20'+'sampler.\x20A'+'ssuming\x20co'+'okieAtlasT'+'extureSamp'+'ler\x20exists'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cook'+'ieAttenuat'+'ion\x20=\x20getC'+'ookieCubeC'+'lustered(c'+'ookieAtlas'+'Texture,\x20c'+'ookieAtlas'+'TextureSam'+'pler,\x20ligh'+'tDirW,\x20lig'+'ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask,\x20shado'+'wTextureRe'+'solution,\x20'+'shadowEdge'+'Pixels,\x20li'+'ght.omniAt'+'lasViewpor'+'t);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20CLUSTER_'+'SHADOWS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'adow\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(light'+'.shadowInt'+'ensity\x20>\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightShadow'+'Data(light'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowParams'+':\x20vec4f\x20=\x20'+'vec4f(shad'+'owTextureR'+'esolution,'+'\x20light.sha'+'dowNormalB'+'ias,\x20light'+'.shadowBia'+'s,\x201.0\x20/\x20l'+'ight.range'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot\x20sha'+'dow\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20shadowCo'+'ord:\x20vec3f'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat')+('rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20!!!!!'+'!!!!!!\x20SHA'+'DOWMAP_PAS'+'S\x20needs\x20te'+'xture\x20and\x20'+'sampler_co'+'mparison.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20!!!'+'!!!!!!!!\x20S'+'hadow\x20func'+'tions\x20need'+'\x20update\x20fo'+'r\x20WGSL\x20tex'+'tureSample'+'Compare\x20et'+'c.\x20Assumin'+'g\x20these\x20ar'+'e\x20handled\x20'+'in\x20include'+'s.\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'SpotCluste'+'redPCF1(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadow:\x20f32'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF3('+'shadowAtla'+'sTexture,\x20'+'shadowAtla'+'sTextureSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadow:\x20f'+'32\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'5(shadowAt'+'lasTexture'+',\x20shadowAt'+'lasTexture'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCSS)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l')+('et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CSS(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20fallo'+'ffAttenuat'+'ion\x20*\x20mix('+'1.0,\x20shado'+'w,\x20light.s'+'hadowInten'+'sity);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20omni\x20'+'shadow\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalOffset'+'PointShado'+'w(shadowPa'+'rams,\x20ligh'+'t.position'+',\x20lightDir'+'W,\x20lightDi'+'rNormW,\x20ge'+'ometricNor'+'mal);\x20\x20//\x20'+'normalBias'+'\x20adjusted\x20'+'for\x20distan'+'ce\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20!!!!!!!!!'+'!!\x20SHADOWM'+'AP_PASS\x20ne'+'eds\x20textur'+'e\x20and\x20samp'+'ler_compar'+'ison.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20!!!!!!!'+'!!!!\x20Shado'+'w\x20function'+'s\x20need\x20upd'+'ate\x20for\x20WG'+'SL\x20texture'+'SampleComp'+'are\x20etc.\x20A'+'ssuming\x20th'+'ese\x20are\x20ha'+'ndled\x20in\x20i'+'ncludes.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCF1)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowOmni'+'ClusteredP'+'CF1(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowPar'+'ams,\x20light'+'.omniAtlas'+'Viewport,\x20'+'shadowEdge'+'Pixels,\x20di'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20getSha'+'dowOmniClu'+'steredPCF3'+'(shadowAtl'+'asTexture,'+'\x20shadowAtl'+'asTextureS'+'ampler,\x20sh'+'adowParams'+',\x20light.om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'OmniCluste'+'redPCF5(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20areaDif'+'fuse:\x20vec3'+'f\x20=\x20(diffu'+'seAttenuat'+'ion\x20*\x20fall'+'offAttenua'+'tion)\x20*\x20li')+('ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaDi'+'ffuse\x20=\x20mi'+'x(areaDiff'+'use,\x20vec3f'+'(0.0),\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20diff'+'use\x20-\x20it\x20d'+'oes\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20areaDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20areaL'+'ightSpecul'+'ar:\x20f32;\x20/'+'/\x20Use\x20var\x20'+'because\x20as'+'signed\x20in\x20'+'if/else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_RECT'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getRe'+'ctLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20if\x20(ligh'+'t.shape\x20=='+'\x20{LIGHTSHA'+'PE_DISK})\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecular\x20'+'=\x20getDiskL'+'ightSpecul'+'ar(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x20//\x20sphere'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20areaLight'+'Specular\x20='+'\x20getSphere'+'LightSpecu')+('lar(worldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20dLTC'+'SpecFres\x20*'+'\x20areaLight'+'Specular\x20*'+'\x20falloffAt'+'tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sp'+'ecular\x20cle'+'ar\x20coat\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20areaLigh'+'tSpecularC'+'C:\x20f32;\x20//'+'\x20Use\x20var\x20b'+'ecause\x20ass'+'igned\x20in\x20i'+'f/else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20==\x20{LI'+'GHTSHAPE_R'+'ECT})\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecularC'+'C\x20=\x20getRec'+'tLightSpec'+'ular(clear'+'coat_world'+'Normal,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecularCC\x20='+'\x20getDiskLi'+'ghtSpecula'+'r(clearcoa'+'t_worldNor'+'mal,\x20viewD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20{\x20//\x20sph'+'ere\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getSphereL'+'ightSpecul'+'ar(clearco'+'at_worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'cSpecularL'+'ight\x20=\x20ccS'+'pecularLig'+'ht\x20+\x20ccLTC'+'SpecFres\x20*'+'\x20areaLight'+'SpecularCC'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20\x20*\x20c'+'ookieAtten')+('uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20punctual'+'\x20light\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20p'+'unctualDif'+'fuse:\x20vec3'+'f\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_AREAL'+'IGHTS)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'unctualDif'+'fuse\x20=\x20mix'+'(punctualD'+'iffuse,\x20ve'+'c3f(0.0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20=\x20dDiffus'+'eLight\x20+\x20p'+'unctualDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Dir:\x20vec3f'+'\x20=\x20normali'+'ze(-lightD'+'irNormW\x20+\x20'+'viewDir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specular\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR_FRESN'+'EL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20=\x20'+'dSpecularL'+'ight\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD')+('ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20halfD'+'ir),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecularity\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'=\x20ccSpecul'+'arLight\x20+\x20'+'getLightSp'+'ecular(hal'+'fDir,\x20clea'+'rcoatRefle'+'ctionDir,\x20'+'clearcoat_'+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'NormW,\x20cle'+'arcoat_glo'+'ss,\x20tbn)\x20*'+'\x20falloffAt')+('tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion\x20*\x20getF'+'resnelCC(d'+'ot(viewDir'+',\x20halfDir)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20='+'\x20ccSpecula'+'rLight\x20+\x20g'+'etLightSpe'+'cular(half'+'Dir,\x20clear'+'coatReflec'+'tionDir,\x20c'+'learcoat_w'+'orldNormal'+',\x20viewDir,'+'\x20lightDirN'+'ormW,\x20clea'+'rcoat_glos'+'s,\x20tbn)\x20*\x20'+'falloffAtt'+'enuation\x20*'+'\x20light.col'+'or\x20*\x20cooki'+'eAttenuati'+'on;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'+\x20getLight'+'SpecularSh'+'een(halfDi'+'r,\x20worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'sheen_glos'+'s)\x20*\x20fallo'+'ffAttenuat'+'ion\x20*\x20ligh'+'t.color\x20*\x20'+'cookieAtte'+'nuation;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20Writ'+'e\x20to\x20globa'+'l\x20attenuat'+'ion\x20values'+'\x20(for\x20ligh'+'tmapper)\x0a\x20'+'\x20\x20\x20dAtten\x20'+'=\x20falloffA'+'ttenuation'+';\x0a\x20\x20\x20\x20dLig'+'htDirNormW'+'\x20=\x20lightDi'+'rNormW;\x0a}\x0a'+'\x0a\x0afn\x20evalu'+'ateCluster'+'Light(\x0a\x20\x20\x20'+'\x20lightInde'+'x:\x20f32,\x0a\x20\x20'+'\x20\x20worldNor'+'mal:\x20vec3f'+',\x0a\x20\x20\x20\x20view'+'Dir:\x20vec3f'+',\x0a\x20\x20\x20\x20refl'+'ectionDir:'+'\x20vec3f,\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20c'+'learcoatRe'+'flectionDi'+'r:\x20vec3f,\x0a'+'#endif\x0a\x20\x20\x20')+('\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20geometric'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20t'+'bn:\x20mat3x3'+'f,\x0a#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20clearc'+'oat_worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20cl'+'earcoat_gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20sheen_'+'gloss:\x20f32'+',\x0a\x20\x20\x20\x20irid'+'escence_in'+'tensity:\x20f'+'32\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20decod'+'e\x20core\x20lig'+'ht\x20data\x20fr'+'om\x20texture'+'s\x0a\x20\x20\x20\x20var\x20'+'clusterLig'+'htData:\x20Cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(&cluste'+'rLightData'+',\x20lightInd'+'ex);\x0a\x0a\x20\x20\x20\x20'+'//\x20evaluat'+'e\x20light\x20if'+'\x20it\x20uses\x20a'+'ccepted\x20li'+'ght\x20mask\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'acceptLigh'+'tMask:\x20boo'+'l\x20=\x20cluste'+'rLightData'+'.isDynamic'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20accept'+'LightMask:'+'\x20bool\x20=\x20cl'+'usterLight'+'Data.isLig'+'htmapped;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'acceptLigh'+'tMask)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20eva'+'luateLight'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20&clust'+'erLightDat'+'a,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'viewDir,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20reflectio'+'nDir,\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20geometri'+'cNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20tbn,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE')+('NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_worl'+'dNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'sheen_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a\x0a\x0afn'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20world'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20v'+'iewDir:\x20ve'+'c3f,\x0a\x20\x20\x20\x20r'+'eflectionD'+'ir:\x20vec3f,'+'\x0a#if\x20defin'+'ed(LIT_CLE'+'ARCOAT)\x0a\x20\x20'+'\x20\x20clearcoa'+'tReflectio'+'nDir:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'specularit'+'y:\x20vec3f,\x0a'+'\x20\x20\x20\x20geomet'+'ricNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20tbn:\x20mat'+'3x3f,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a#end'+'if\x0a\x20\x20\x20\x20cle'+'arcoat_wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20clearcoat'+'_gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20she'+'en_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20i'+'ridescence'+'_intensity'+':\x20f32\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20sk'+'ip\x20lights\x20'+'if\x20no\x20ligh'+'ts\x20at\x20all\x0a'+'\x20\x20\x20\x20if\x20(un'+'iform.clus'+'terSkip\x20>\x20'+'0.5)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x20to'+'\x203d\x20intege'+'r\x20cell\x20cor'+'dinates\x20in'+'\x20the\x20clust'+'er\x20structu'+'re\x0a\x20\x20\x20\x20let'+'\x20cellCoord'+'s:\x20vec3f\x20='+'\x20floor((vP'+'ositionW\x20-'+'\x20uniform.c'+'lusterBoun'+'dsMin)\x20*\x20u'+'niform.clu'+'sterCellsC'+'ountByBoun'+'dsSize);\x0a\x0a'+'\x20\x20\x20\x20//\x20no\x20'+'lighting\x20w'+'hen\x20cell\x20c'+'oordinate\x20'+'is\x20out\x20of\x20'+'range\x0a\x20\x20\x20\x20'+'if\x20(!(any('+'cellCoords')+('\x20<\x20vec3f(0'+'.0))\x20||\x20an'+'y(cellCoor'+'ds\x20>=\x20unif'+'orm.cluste'+'rCellsMax)'+'))\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cel'+'l\x20index\x20(m'+'apping\x20fro'+'m\x203d\x20cell\x20'+'coordinate'+'s\x20to\x20linea'+'r\x20memory)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20cellInde'+'x:\x20f32\x20=\x20d'+'ot(uniform'+'.clusterCe'+'llsDot,\x20ce'+'llCoords);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20convert'+'\x20cell\x20inde'+'x\x20to\x20uv\x20co'+'ordinates\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20clusterV'+':\x20f32\x20=\x20fl'+'oor(cellIn'+'dex\x20*\x20unif'+'orm.cluste'+'rTextureSi'+'ze.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20c'+'lusterU:\x20f'+'32\x20=\x20cellI'+'ndex\x20-\x20(cl'+'usterV\x20*\x20u'+'niform.clu'+'sterTextur'+'eSize.x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20loop\x20ove'+'r\x20maximum\x20'+'number\x20of\x20'+'light\x20cell'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'for\x20(var\x20l'+'ightCellIn'+'dex:\x20i32\x20='+'\x200;\x20lightC'+'ellIndex\x20<'+'\x20uniform.c'+'lusterMaxC'+'ells;\x20ligh'+'tCellIndex'+'\x20=\x20lightCe'+'llIndex\x20+\x20'+'1)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20using\x20a\x20s'+'ingle\x20chan'+'nel\x20textur'+'e\x20with\x20dat'+'a\x20in\x20red\x20c'+'hannel\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20lightIn'+'dexPacked:'+'\x20f32\x20=\x20tex'+'tureLoad(c'+'lusterWorl'+'dTexture,\x20'+'vec2<i32>('+'i32(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20i32(clus'+'terV)),\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(lightInde'+'xPacked\x20<='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20break;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ev'+'aluateClus'+'terLight(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tIndexPack'+'ed\x20*\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20vie'+'wDir,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'eometricNo'+'rmal,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20tbn,\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coat_world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20clearc'+'oat_gloss,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20she'+'en_gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a}'),N2='\x0afn\x20combin'+'eColor(alb'+'edo:\x20vec3f'+',\x20sheenSpe'+'cularity:\x20'+'vec3f,\x20cle'+'arcoatSpec'+'ularity:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20ret:\x20ve'+'c3f\x20=\x20vec3'+'f(0.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ret\x20=\x20'+'ret\x20+\x20((dD'+'iffuseLigh'+'t\x20-\x20unifor'+'m.light_gl'+'obalAmbien'+'t)\x20*\x20albed'+'o\x20+\x20unifor'+'m.material'+'_ambient\x20*'+'\x20uniform.l'+'ight_globa'+'lAmbient);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(albedo\x20*'+'\x20dDiffuseL'+'ight);\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_OLD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20dSpecular'+'Light;\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(dReflect'+'ion.rgb\x20*\x20'+'dReflectio'+'n.a);\x0a\x20\x20\x20\x20'+'#endif\x20//\x20'+'LIT_REFLEC'+'TIONS\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'sheenScali'+'ng:\x20f32\x20=\x20'+'1.0\x20-\x20max('+'max(sheenS'+'pecularity'+'.r,\x20sheenS'+'pecularity'+'.g),\x20sheen'+'Specularit'+'y.b)\x20*\x200.1'+'57;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20sheenS'+'caling\x20+\x20('+'sSpecularL'+'ight\x20+\x20sRe'+'flection.r'+'gb)\x20*\x20shee'+'nSpeculari'+'ty;\x0a\x20\x20\x20\x20#e'+'ndif\x20//\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20clear'+'CoatScalin'+'g:\x20f32\x20=\x201'+'.0\x20-\x20ccFre'+'snel\x20*\x20cle'+'arcoatSpec'+'ularity;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'\x20=\x20ret\x20*\x20c'+'learCoatSc'+'aling\x20+\x20(c'+'cSpecularL'+'ight\x20+\x20ccR'+'eflection)'+('\x20*\x20clearco'+'atSpecular'+'ity;\x0a\x20\x20\x20\x20#'+'endif\x20//\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20re'+'turn\x20ret;\x0a'+'}\x0a'),k2='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x0a\x20\x20\x20\x20'+'var\x20blitTe'+'xture:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20blitText'+'ureSampler'+'\x20:\x20sampler'+';\x0a\x0a\x20\x20\x20\x20@fr'+'agment\x0a\x20\x20\x20'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20t'+'extureSamp'+'le(blitTex'+'ture,\x20blit'+'TextureSam'+'pler,\x20inpu'+'t.uv0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20}\x0a',U2='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20u'+'niform\x20inv'+'ViewProj:\x20'+'mat4x4<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'re:\x20textur'+'e_cube<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'reSampler\x20'+':\x20sampler;'+'\x0a\x0a\x20\x20\x20\x20@fra'+'gment\x0a\x20\x20\x20\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20pro'+'jPos\x20=\x20vec'+'4f(input.u'+'v0\x20*\x202.0\x20-'+'\x201.0,\x200.5,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20w'+'orldPos\x20=\x20'+'uniform.in'+'vViewProj\x20'+'*\x20projPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20textur'+'eSample(bl'+'itTexture,'+'\x20blitTextu'+'reSampler,'+'\x20worldPos.'+'xyz);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20}\x0a',B2='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.uv0.y'+'\x20=\x201.0\x20-\x20o'+'utput.uv0.'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',z2='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMin:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMax:\x20v'+'ec3f;\x0a#end'+'if\x0a\x0afn\x20cub'+'eMapProjec'+'t(nrdir:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20cubeMapR'+'otate(nrdi'+'r);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIT_CU'+'BEMAP_PROJ'+'ECTION\x20==\x20'+'BOX\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20nrd'+'ir_rotated'+':\x20vec3f\x20=\x20'+'cubeMapRot'+'ate(nrdir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20rbmax'+':\x20vec3f\x20=\x20'+'(uniform.e'+'nvBoxMax\x20-'+'\x20vPosition'+'W)\x20/\x20nrdir'+'_rotated;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20rbmin:\x20v'+'ec3f\x20=\x20(un'+'iform.envB'+'oxMin\x20-\x20vP'+'ositionW)\x20'+'/\x20nrdir_ro'+'tated;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'rbminmax:\x20'+'vec3f\x20=\x20se'+'lect(rbmin'+',\x20rbmax,\x20n'+'rdir_rotat'+'ed\x20>\x20vec3f'+'(0.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'fa:\x20f32\x20=\x20'+'min(min(rb'+'minmax.x,\x20'+'rbminmax.y'+'),\x20rbminma'+'x.z);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20p'+'osonbox:\x20v'+'ec3f\x20=\x20vPo'+'sitionW\x20+\x20'+'nrdir_rota'+'ted\x20*\x20fa;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20envBoxPo'+'s:\x20vec3f\x20='+'\x20(uniform.'+'envBoxMin\x20'+'+\x20uniform.'+'envBoxMax)'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20normali'+'ze(posonbo'+'x\x20-\x20envBox'+'Pos);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',V2='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20cubeMap'+'RotationMa'+'trix:\x20mat3'+'x3f;\x0a#endi'+'f\x0a\x0afn\x20cube'+'MapRotate('+'refDir:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a#ifd'+'ef\x20CUBEMAP'+'_ROTATION\x0a'+'\x20\x20\x20\x20return'+'\x20refDir\x20*\x20'+'uniform.cu'+'beMapRotat'+'ionMatrix;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir;\x0a#end'+'if\x0a}\x0a',G2='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0aoutp'+'ut.color\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0aoutput.co'+'lor\x20=\x20vec4'+'f(litArgs_'+'albedo\x20,\x201'+'.0);\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'DEBUG_WORL'+'D_NORMAL_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(litAr'+'gs_worldNo'+'rmal\x20*\x200.5'+'\x20+\x200.5,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_OPACI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_opacity'+')\x20,\x201.0);\x0a'+'#endif\x0a\x0a#i'+'fdef\x20DEBUG'+'_SPECULARI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(l'+'itArgs_spe'+'cularity,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_GLO'+'SS_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_gloss)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_M'+'ETALNESS_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(vec3f'+'(litArgs_m'+'etalness)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_A'+'O_PASS\x0aout'+'put.color\x20'+'=\x20vec4f(ve'+'c3f(litArg'+'s_ao)\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_EMISS'+'ION_PASS\x0ao'+'utput.colo'+'r\x20=\x20vec4f('+'gammaCorre'+'ctOutput(l'+'itArgs_emi'+'ssion),\x201.'+'0);\x0a#endif'+'\x0a',H2='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0a\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20v'+'ec3f(0.5);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0a#ifdef\x20VA'+'RYING_VUV0'+'\x0a\x20\x20\x20\x20litAr'+'gs_albedo\x20'+'=\x20vec3f(vU'+'v0,\x200.0);\x0a'+'#else\x0a\x20\x20\x20\x20'+'litArgs_al'+'bedo\x20=\x20vec'+'3f(0.0);\x0a#'+'endif\x0a#end'+'if\x0a',W2='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0afn\x20de'+'codeLinear'+'(raw:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20raw.r'+'gb;\x0a}\x0a\x0afn\x20'+'decodeGamm'+'aFloat(raw'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20pow'+'(raw,\x202.2)'+';\x0a}\x0a\x0afn\x20de'+'codeGamma3'+'(raw:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(r'+'aw,\x20vec3f('+'2.2));\x0a}\x0a\x0a'+'fn\x20decodeG'+'amma(raw:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow(raw.xyz'+',\x20vec3f(2.'+'2));\x0a}\x0a\x0afn'+'\x20decodeRGB'+'M(raw:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20color\x20='+'\x20(8.0\x20*\x20ra'+'w.a)\x20*\x20raw'+'.rgb;\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0afn\x20de'+'codeRGBP(r'+'aw:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20ra'+'w.rgb\x20*\x20(-'+'raw.a\x20*\x207.'+'0\x20+\x208.0);\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0af'+'n\x20decodeRG'+'BE(raw:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(vec3f('+'0.0),\x20raw.'+'xyz\x20*\x20pow('+'2.0,\x20raw.w'+'\x20*\x20255.0\x20-'+'\x20128.0),\x20r'+'aw.a\x20!=\x200.'+'0);\x0a}\x0a\x0afn\x20'+'passThroug'+'h(raw:\x20vec'+'4f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw;'+'\x0a}\x0a\x0afn\x20unp'+'ackNormalX'+'YZ(nmap:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20nm'+'ap.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'}\x0a\x0afn\x20unpa'+'ckNormalXY'+'(nmap:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20xy\x20=\x20nm'+'ap.wy\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'vec3f(xy,\x20'+'sqrt(1.0\x20-'+'\x20clamp(dot'+'(xy,\x20xy),\x20'+'0.0,\x201.0))'+');\x0a}\x0a\x0a#end'+'if\x0a',$2='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0afn\x20de'+'tailMode_m'+'ul(c1:\x20vec'+'3f,\x20c2:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20c1\x20'+'*\x20c2;\x0a}\x0a\x0af'+'n\x20detailMo'+'de_add(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20c1\x20+\x20c2;\x0a'+'}\x0a\x0a//\x20http'+'s://en.wik'+'ipedia.org'+'/wiki/Blen'+'d_modes#Sc'+'reen\x0afn\x20de'+'tailMode_s'+'creen(c1:\x20'+'vec3f,\x20c2:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'1.0\x20-\x20(1.0'+'\x20-\x20c1)*(1.'+'0\x20-\x20c2);\x0a}'+'\x0a\x0a//\x20https'+'://en.wiki'+'pedia.org/'+'wiki/Blend'+'_modes#Ove'+'rlay\x0afn\x20de'+'tailMode_o'+'verlay(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20mix(1.0\x20-'+'\x202.0\x20*\x20(1.'+'0\x20-\x20c1)*(1'+'.0\x20-\x20c2),\x20'+'2.0\x20*\x20c1\x20*'+'\x20c2,\x20step('+'c1,\x20vec3f('+'0.5)));\x0a}\x0a'+'\x0afn\x20detail'+'Mode_min(c'+'1:\x20vec3f,\x20'+'c2:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20min(c1,'+'\x20c2);\x0a}\x0a\x0af'+'n\x20detailMo'+'de_max(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(c1,\x20c'+'2);\x0a}\x0a\x0a#en'+'dif\x0a',X2='\x0auniform\x20m'+'aterial_di'+'ffuse:\x20vec'+'3f;\x0a\x0a#ifde'+'f\x20STD_DIFF'+'USEDETAIL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22detailMo'+'desPS\x22\x0a#en'+'dif\x0a\x0afn\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20unif'+'orm.materi'+'al_diffuse'+'.rgb;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoText'+'ure:\x20vec3f'+'\x20=\x20{STD_DI'+'FFUSE_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_DIFFU'+'SE_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'_TEXTURE_N'+'AME}Sample'+'r,\x20{STD_DI'+'FFUSE_TEXT'+'URE_UV},\x20u'+'niform.tex'+'tureBias))'+'.{STD_DIFF'+'USE_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoDeta'+'il:\x20vec3f\x20'+'=\x20{STD_DIF'+'FUSEDETAIL'+'_TEXTURE_D'+'ECODE}(tex'+'tureSample'+'Bias({STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_NAME},\x20{'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_DIFFU'+'SEDETAIL_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20=\x20dAlbe'+'do\x20*\x20albed'+'oTexture;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_DIF'+'FUSE_VERTE'+'X\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAlbedo\x20=\x20'+'dAlbedo\x20*\x20'+'gammaCorre'+'ctInputVec'+'3(saturate'+'3(vVertexC'+'olor.{STD_'+('DIFFUSE_VE'+'RTEX_CHANN'+'EL}));\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),q2='\x0auniform\x20m'+'aterial_em'+'issive:\x20ve'+'c3f;\x0aunifo'+'rm\x20materia'+'l_emissive'+'Intensity:'+'\x20f32;\x0a\x0afn\x20'+'getEmissio'+'n()\x20{\x0a\x20\x20\x20\x20'+'dEmission\x20'+'=\x20uniform.'+'material_e'+'missive\x20*\x20'+'uniform.ma'+'terial_emi'+'ssiveInten'+'sity;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_EMISSIVE'+'_TEXTURE\x0a\x20'+'\x20\x20\x20dEmissi'+'on\x20*=\x20{STD'+'_EMISSIVE_'+'TEXTURE_DE'+'CODE}(text'+'ureSampleB'+'ias({STD_E'+'MISSIVE_TE'+'XTURE_NAME'+'},\x20{STD_EM'+'ISSIVE_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_EMISSI'+'VE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias)).{S'+'TD_EMISSIV'+'E_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_VERT'+'EX\x0a\x20\x20\x20\x20dEm'+'ission\x20=\x20d'+'Emission\x20*'+'\x20gammaCorr'+'ectInputVe'+'c3(saturat'+'e3(vVertex'+'Color.{STD'+'_EMISSIVE_'+'VERTEX_CHA'+'NNEL}));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',j2='\x0afn\x20encode'+'Linear(sou'+'rce:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'source,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeGamm'+'a(source:\x20'+'vec3f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4f(pow(s'+'ource\x20+\x20ve'+'c3f(0.0000'+'001),\x20vec3'+'f(1.0\x20/\x202.'+'2)),\x201.0);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBM(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+'r\x20color:\x20v'+'ec3f\x20=\x20pow'+'(source,\x20v'+'ec3f(0.5))'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x201.0\x20/'+'\x208.0;\x0a\x0a\x20\x20\x20'+'\x20var\x20a:\x20f3'+'2\x20=\x20satura'+'te(max(max'+'(color.r,\x20'+'color.g),\x20'+'max(color.'+'b,\x201.0\x20/\x202'+'55.0)));\x0a\x20'+'\x20\x20\x20a\x20=\x20cei'+'l(a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20col'+'or\x20/=\x20a;\x0a\x20'+'\x20\x20\x20return\x20'+'vec4f(colo'+'r,\x20a);\x0a}\x0a\x0a'+'fn\x20encodeR'+'GBP(source'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20//\x20con'+'vert\x20incom'+'ing\x20linear'+'\x20to\x20gamma('+'ish)\x0a\x20\x20\x20\x20v'+'ar\x20gamma:\x20'+'vec3f\x20=\x20po'+'w(source,\x20'+'vec3f(0.5)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20the\x20maxim'+'um\x20compone'+'nt\x20clamped'+'\x20to\x201..8\x0a\x20'+'\x20\x20\x20var\x20max'+'Val:\x20f32\x20='+'\x20min(8.0,\x20'+'max(1.0,\x20m'+'ax(gamma.x'+',\x20max(gamm'+'a.y,\x20gamma'+'.z))));\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20stor'+'age\x20factor'+'\x0a\x20\x20\x20\x20var\x20v'+':\x20f32\x20=\x201.'+'0\x20-\x20((maxV'+'al\x20-\x201.0)\x20'+'/\x207.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20roun'+'d\x20the\x20valu'+'e\x20for\x20stor'+'age\x20in\x208bi'+'t\x20channel\x0a'+'\x20\x20\x20\x20v\x20=\x20ce'+'il(v\x20*\x20255'+'.0)\x20/\x20255.'+'0;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(gamma\x20/\x20('+'-v\x20*\x207.0\x20+'+'\x208.0),\x20v);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBE(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+('r\x20maxVal:\x20'+'f32\x20=\x20max('+'source.x,\x20'+'max(source'+'.y,\x20source'+'.z));\x0a\x20\x20\x20\x20'+'if\x20(maxVal'+'\x20<\x201e-32)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+':\x20f32\x20=\x20ce'+'il(log2(ma'+'xVal));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(s'+'ource\x20/\x20po'+'w(2.0,\x20e),'+'\x20(e\x20+\x20128.'+'0)\x20/\x20255.0'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a'),Y2='\x0a\x20\x20\x20\x20var\x20f'+'inalRgb:\x20v'+'ec3f\x20=\x20com'+'bineColor('+'litArgs_al'+'bedo,\x20litA'+'rgs_sheen_'+'specularit'+'y,\x20litArgs'+'_clearcoat'+'_speculari'+'ty);\x0a\x0a\x20\x20\x20\x20'+'finalRgb\x20='+'\x20finalRgb\x20'+'+\x20litArgs_'+'emission;\x0a'+'\x20\x20\x20\x20finalR'+'gb\x20=\x20addFo'+'g(finalRgb'+');\x0a\x20\x20\x20\x20fin'+'alRgb\x20=\x20to'+'neMap(fina'+'lRgb);\x0a\x20\x20\x20'+'\x20finalRgb\x20'+'=\x20gammaCor'+'rectOutput'+'(finalRgb)'+';\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(fin'+'alRgb,\x20out'+'put.color.'+'a);\x0a',K2='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20atla'+'sSize\x20:\x20f3'+'2\x20=\x20512.0;'+'\x0aconst\x20sea'+'mSize\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0afn\x20mapU'+'v(uv\x20:\x20vec'+'2f,\x20rect\x20:'+'\x20vec4f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec2f(mix('+'rect.x\x20+\x20s'+'eamSize,\x20r'+'ect.x\x20+\x20re'+'ct.z\x20-\x20sea'+'mSize,\x20uv.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20mix(rect.'+'y\x20+\x20seamSi'+'ze,\x20rect.y'+'\x20+\x20rect.w\x20'+'-\x20seamSize'+',\x20uv.y));\x0a'+'}\x0a\x0a//\x20map\x20'+'a\x20normaliz'+'ed\x20equirec'+'t\x20UV\x20and\x20r'+'oughness\x20l'+'evel\x20to\x20th'+'e\x20correct\x20'+'atlas\x20rect'+'.\x0afn\x20mapRo'+'ughnessUv('+'uv\x20:\x20vec2f'+',\x20level\x20:\x20'+'f32)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20t\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'exp2(level'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mapUv('+'uv,\x20vec4f('+'0.0,\x201.0\x20-'+'\x20t,\x20t,\x20t\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20map\x20sh'+'iny\x20level\x20'+'UV\x0afn\x20mapS'+'hinyUv(uv\x20'+':\x20vec2f,\x20l'+'evel\x20:\x20f32'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20t\x20:\x20f32\x20='+'\x201.0\x20/\x20exp'+'2(level);\x0a'+'\x20\x20\x20\x20return'+'\x20mapUv(uv,'+'\x20vec4f(1.0'+'\x20-\x20t,\x201.0\x20'+'-\x20t,\x20t,\x20t\x20'+'*\x200.5));\x0a}'+'\x0a\x0a#endif\x0a',Z2='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20skyboxInt'+'ensity\x20:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20proce'+'ssEnvironm'+'ent(color\x20'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20unifo'+'rm.skyboxI'+'ntensity;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',Q2='\x0afn\x20getFal'+'loffWindow'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20sqrDist'+':\x20f32\x20=\x20do'+'t(lightDir'+',\x20lightDir'+');\x0a\x20\x20\x20\x20let'+'\x20invRadius'+':\x20f32\x20=\x201.'+'0\x20/\x20lightR'+'adius;\x0a\x20\x20\x20'+'\x20return\x20sq'+'uare(satur'+'ate(1.0\x20-\x20'+'square(sqr'+'Dist\x20*\x20squ'+'are(invRad'+'ius))));\x0a}'+'\x0a\x0afn\x20getFa'+'lloffInvSq'+'uared(ligh'+'tRadius:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20sq'+'rDist:\x20f32'+'\x20=\x20dot(lig'+'htDir,\x20lig'+'htDir);\x0a\x20\x20'+'\x20\x20var\x20fall'+'off:\x20f32\x20='+'\x201.0\x20/\x20(sq'+'rDist\x20+\x201.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20invRadiu'+'s:\x20f32\x20=\x201'+'.0\x20/\x20light'+'Radius;\x0a\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x20square('+'saturate(1'+'.0\x20-\x20squar'+'e(sqrDist\x20'+'*\x20square(i'+'nvRadius))'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20fall'+'off;\x0a}\x0a',J2='\x0afn\x20getFal'+'loffLinear'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20length(l'+'ightDir);\x0a'+'\x20\x20\x20\x20return'+'\x20max(((lig'+'htRadius\x20-'+'\x20d)\x20/\x20ligh'+'tRadius),\x20'+'0.0);\x0a}\x0a',eM='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x20re'+'presentati'+'on\x20(0.0-1.'+'0\x20range)\x0af'+'n\x20float2ui'+'nt(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20intBit'+'s\x20=\x20bitcas'+'t<u32>(val'+'ue);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20f32((intB'+'its\x20>>\x2024u'+')\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((intBi'+'ts\x20>>\x2016u)'+'\x20&\x200xffu),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((intBit'+'s\x20>>\x208u)\x20&'+'\x200xffu),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20f32'+'(intBits\x20&'+'\x200xffu)\x0a\x20\x20'+'\x20\x20)\x20/\x20255.'+'0;\x0a}\x0a\x0a//\x20d'+'ecode\x20RGBA'+'8\x20value\x20to'+'\x20float\x0afn\x20'+'uint2float'+'(value:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20rgba_u32'+'\x20=\x20vec4<u3'+'2>(value\x20*'+'\x20255.0);\x0a\x20'+'\x20\x20\x20let\x20int'+'Bits:\x20u32\x20'+'=\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'r\x20<<\x2024u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'g\x20<<\x2016u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'b\x20<<\x208u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20rgba_u32.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20bitcas'+'t<f32>(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0af'+'n\x20float2ve'+'c4(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CAPS_TEX'+'TURE_FLOAT'+'_RENDERABL'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(value,'+'\x201.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20float2ui'+'nt(value);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0a#endi'+'f\x20//\x20FLOAT'+'_AS_UINT\x0a',tM='\x0a\x0avar<priv'+'ate>\x20dBlen'+'dModeFogFa'+'ctor\x20:\x20f32'+'\x20=\x201.0;\x0a\x0a#'+'if\x20(FOG\x20!='+'\x20NONE)\x0a\x20\x20\x20'+'\x20uniform\x20f'+'og_color\x20:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20fog_sta'+'rt\x20:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20fog_'+'end\x20:\x20f32;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20fog'+'_density\x20:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afn\x20ge'+'tFogFactor'+'()\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20depth\x20=\x20p'+'cPosition.'+'z\x20/\x20pcPosi'+'tion.w;\x0a\x0a\x20'+'\x20\x20\x20var\x20fog'+'Factor\x20:\x20f'+'32\x20=\x200.0;\x0a'+'\x0a\x20\x20\x20\x20#if\x20('+'FOG\x20==\x20LIN'+'EAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20(unif'+'orm.fog_en'+'d\x20-\x20depth)'+'\x20/\x20(unifor'+'m.fog_end\x20'+'-\x20uniform.'+'fog_start)'+';\x0a\x20\x20\x20\x20#eli'+'f\x20(FOG\x20==\x20'+'EXP)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20exp(-'+'depth\x20*\x20un'+'iform.fog_'+'density);\x0a'+'\x20\x20\x20\x20#elif\x20'+'(FOG\x20==\x20EX'+'P2)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fogFacto'+'r\x20=\x20exp(-d'+'epth\x20*\x20dep'+'th\x20*\x20unifo'+'rm.fog_den'+'sity\x20*\x20uni'+'form.fog_d'+'ensity);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(fo'+'gFactor,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0afn\x20addF'+'og(color\x20:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'uniform.fo'+'g_color\x20*\x20'+'dBlendMode'+'FogFactor,'+'\x20color,\x20ge'+'tFogFactor'+'());\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'color;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',sM='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0afn'+'\x20getFresne'+'l(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20cosTheta:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y:\x20f32\x0a\x20\x20\x20'+'\x20#endif\x0a)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20f'+'resnel:\x20f3'+'2\x20=\x20pow(1.'+'0\x20-\x20satura'+'te(cosThet'+'a),\x205.0);\x0a'+'\x20\x20\x20\x20let\x20gl'+'ossSq:\x20f32'+'\x20=\x20gloss\x20*'+'\x20gloss;\x0a\x20\x20'+'\x20\x20let\x20ret:'+'\x20vec3f\x20=\x20s'+'pecularity'+'\x20+\x20(max(ve'+'c3f(glossS'+'q),\x20specul'+'arity)\x20-\x20s'+'pecularity'+')\x20*\x20fresne'+'l;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20mix(ret,'+'\x20iridescen'+'ceFresnel,'+'\x20iridescen'+'ceIntensit'+'y);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20r'+'et;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0afn'+'\x20getFresne'+'lCC(cosThe'+'ta:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20fres'+'nel:\x20f32\x20='+'\x20pow(1.0\x20-'+'\x20saturate('+'cosTheta),'+'\x205.0);\x0a\x20\x20\x20'+'\x20return\x200.'+'04\x20+\x20(1.0\x20'+'-\x200.04)\x20*\x20'+'fresnel;\x0a}',iM='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x0avary'+'ing\x20vUv0:\x20'+'vec2f;\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4f(inpu'+'t.vertex_p'+'osition,\x200'+'.5,\x201.0);\x0a'+'\x20\x20\x20\x20output'+'.vUv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x20vec2f(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',rM='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInput(c'+'olor:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGammaFloa'+'t(color);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20fn\x20gammaC'+'orrectInpu'+'tVec3(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20deco'+'deGamma3(c'+'olor);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInputVe'+'c4(color:\x20'+'vec4f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(d'+'ecodeGamma'+'3(color.xy'+'z),\x20color.'+'w);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Output(col'+'or:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20pow'+'(color\x20+\x200'+'.0000001,\x20'+'vec3f(1.0\x20'+'/\x202.2));\x0a\x20'+'\x20\x20\x20}\x0a\x0a#els'+'e\x20//\x20NONE\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Input(colo'+'r:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20gammaCo'+'rrectInput'+'Vec3(color'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20gamm'+'aCorrectIn'+'putVec4(co'+'lor:\x20vec4f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20g'+'ammaCorrec'+'tOutput(co'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a',aM='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_gl'+'oss:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getGlossi'+'ness()\x20{\x0a\x20'+'\x20\x20\x20dGlossi'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_GL'+'OSS_CONSTA'+'NT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20unifo'+'rm.materia'+'l_gloss;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_GLOS'+'S_TEXTURE\x0a'+'\x20\x20\x20\x20dGloss'+'iness\x20=\x20dG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_GLOSS'+'_TEXTURE_N'+'AME},\x20{STD'+'_GLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_GLOSS_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_GLOSS_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_I'+'NVERT\x0a\x20\x20\x20\x20'+'dGlossines'+'s\x20=\x201.0\x20-\x20'+'dGlossines'+'s;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20d'+'Glossiness'+'\x20=\x20dGlossi'+'ness\x20+\x200.0'+'000001;\x0a}\x0a',nM='\x0auniform\x20m'+'atrix_mode'+'l:\x20mat4x4f'+';\x0auniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0auniform\x20'+'matrix_pro'+'jection:\x20m'+'at4x4f;\x0a\x0a/'+'/\x20project\x20'+'the\x20model\x20'+'space\x20gaus'+'sian\x20cente'+'r\x20to\x20view\x20'+'and\x20clip\x20s'+'pace\x0afn\x20in'+'itCenter(m'+'odelCenter'+':\x20vec3f,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>)\x20->\x20bo'+'ol\x20{\x0a\x20\x20\x20\x20l'+'et\x20modelVi'+'ew:\x20mat4x4'+'f\x20=\x20unifor'+'m.matrix_v'+'iew\x20*\x20unif'+'orm.matrix'+'_model;\x0a\x20\x20'+'\x20\x20let\x20cent'+'erView:\x20ve'+'c4f\x20=\x20mode'+'lView\x20*\x20ve'+'c4f(modelC'+'enter,\x201.0'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20if\x20splat\x20'+'is\x20behind\x20'+'the\x20camera'+'\x0a\x20\x20\x20\x20if\x20(c'+'enterView.'+'z\x20>\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20ce'+'nterProj:\x20'+'vec4f\x20=\x20un'+'iform.matr'+'ix_project'+'ion\x20*\x20cent'+'erView;\x0a\x0a\x20'+'\x20\x20\x20//\x20ensu'+'re\x20gaussia'+'ns\x20are\x20not'+'\x20clipped\x20b'+'y\x20camera\x20n'+'ear\x20and\x20fa'+'r\x0a\x20\x20\x20\x20cent'+'erProj.z\x20='+'\x20clamp(cen'+'terProj.z,'+'\x200.0,\x20abs('+'centerProj'+'.w));\x0a\x0a\x20\x20\x20'+'\x20center.vi'+'ew\x20=\x20cente'+'rView.xyz\x20'+'/\x20centerVi'+'ew.w;\x0a\x20\x20\x20\x20'+'center.pro'+'j\x20=\x20center'+'Proj;\x0a\x20\x20\x20\x20'+'center.pro'+'jMat00\x20=\x20u'+'niform.mat'+'rix_projec'+'tion[0][0]'+';\x0a\x20\x20\x20\x20cent'+'er.modelVi'+'ew\x20=\x20model'+'View;\x0a\x20\x20\x20\x20'+'return\x20tru'+'e;\x0a}\x0a',oM='\x0a\x0avar\x20spla'+'tColor:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20r'+'eadColor(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20tex'+'tureLoad(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a}\x0a',lM='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20order:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20id:\x20u3'+'2,\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'uv:\x20vec2<i'+'32>,\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20corn'+'erUV:\x20vec2'+'f,\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a}\x0a\x0a'+'//\x20stores\x20'+'the\x20camera'+'\x20and\x20clip\x20'+'space\x20posi'+'tion\x20of\x20th'+'e\x20gaussian'+'\x20center\x0ast'+'ruct\x20Splat'+'Center\x20{\x0a\x20'+'\x20\x20\x20view:\x20v'+'ec3f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20vi'+'ew\x20space\x0a\x20'+'\x20\x20\x20proj:\x20v'+'ec4f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20cl'+'ip\x20space\x0a\x20'+'\x20\x20\x20modelVi'+'ew:\x20mat4x4'+'f,\x20\x20\x20//\x20mo'+'del-view\x20m'+'atrix\x0a\x20\x20\x20\x20'+'projMat00:'+'\x20f32,\x20\x20\x20\x20\x20'+'\x20\x20//\x20eleme'+'mt\x20[0][0]\x20'+'of\x20the\x20pro'+'jection\x20ma'+'trix\x0a}\x0a\x0a//'+'\x20stores\x20th'+'e\x20offset\x20f'+'rom\x20center'+'\x20for\x20the\x20c'+'urrent\x20gau'+'ssian\x0astru'+'ct\x20SplatCo'+'rner\x20{\x0a\x20\x20\x20'+'\x20offset:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20corn'+'er\x20offset\x20'+'from\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'uv:\x20vec2f,'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20aaFactor:'+'\x20f32,\x20//\x20f'+'or\x20scenes\x20'+'generated\x20'+'with\x20antia'+'liasing\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0a#include'+'\x20\x22gsplatEv'+'alSHVS\x22\x0a#i'+'nclude\x20\x22gs'+'platQuatTo'+'Mat3VS\x22\x0a\x0a#'+'if\x20GSPLAT_'+'COMPRESSED'+'_DATA\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatComp'+'ressedData'+'VS\x22\x0a\x20\x20\x20\x20#i'+('f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsDataVS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tSogsColor'+'VS\x22\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsSHVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#else\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatData'+'VS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22gs'+'platColorV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0afn\x20'+'clipCorner'+'(corner:\x20p'+'tr<functio'+'n,\x20SplatCo'+'rner>,\x20alp'+'ha:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'lip:\x20f32\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20(255'+'.0\x20*\x20alpha'+')))\x20/\x202.0)'+';\x0a\x20\x20\x20\x20corn'+'er.offset\x20'+'=\x20corner.o'+'ffset\x20*\x20cl'+'ip;\x0a\x20\x20\x20\x20co'+'rner.uv\x20=\x20'+'corner.uv\x20'+'*\x20clip;\x0a}\x0a'+'\x0a'),cM='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0avar'+'\x20chunkText'+'ure:\x20textu'+'re_2d<f32>'+';\x0a\x0a//\x20work'+'\x20values\x0ava'+'r<private>'+'\x20chunkData'+'A:\x20vec4f;\x20'+'\x20\x20\x20//\x20x:\x20m'+'in_x,\x20y:\x20m'+'in_y,\x20z:\x20m'+'in_z,\x20w:\x20m'+'ax_x\x0avar<p'+'rivate>\x20ch'+'unkDataB:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20max_'+'y,\x20y:\x20max_'+'z,\x20z:\x20scal'+'e_min_x,\x20w'+':\x20scale_mi'+'n_y\x0avar<pr'+'ivate>\x20chu'+'nkDataC:\x20v'+'ec4f;\x20\x20\x20\x20/'+'/\x20x:\x20scale'+'_min_z,\x20y:'+'\x20scale_max'+'_x,\x20z:\x20sca'+'le_max_y,\x20'+'w:\x20scale_m'+'ax_z\x0avar<p'+'rivate>\x20ch'+'unkDataD:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20min_'+'r,\x20y:\x20min_'+'g,\x20z:\x20min_'+'b,\x20w:\x20max_'+'r\x0avar<priv'+'ate>\x20chunk'+'DataE:\x20vec'+'4f;\x20\x20\x20\x20//\x20'+'x:\x20max_g,\x20'+'y:\x20max_b,\x20'+'z:\x20unused,'+'\x20w:\x20unused'+'\x0avar<priva'+'te>\x20packed'+'Data:\x20vec4'+'u;\x20\x20\x20\x20//\x20x'+':\x20position'+'\x20bits,\x20y:\x20'+'rotation\x20b'+'its,\x20z:\x20sc'+'ale\x20bits,\x20'+'w:\x20color\x20b'+'its\x0a\x0afn\x20un'+'pack111011'+'(bits:\x20u32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(vec3f'+'((vec3<u32'+'>(bits)\x20>>'+'\x20vec3<u32>'+'(21u,\x2011u,'+'\x200u))\x20&\x20ve'+'c3<u32>(0x'+'7ffu,\x200x3f'+'fu,\x200x7ffu'+')))\x20/\x20vec3'+'f(2047.0,\x20'+'1023.0,\x2020'+'47.0);\x0a}\x0a\x0a'+'fn\x20unpack8'+'888(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20f32((bit'+'s\x20>>\x2024u)\x20'+'&\x200xffu),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((bits\x20>>'+'\x2016u)\x20&\x200x'+'ffu),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20f32((b'+'its\x20>>\x208u)'+'\x20\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(bits\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20&\x200'+'xffu)\x0a\x20\x20\x20\x20'+')\x20/\x20255.0;'+('\x0a}\x0a\x0aconst\x20'+'norm_const'+':\x20f32\x20=\x201.'+'0\x20/\x20(sqrt('+'2.0)\x20*\x200.5'+');\x0a\x0afn\x20unp'+'ackRotatio'+'n(bits:\x20u3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x20(f32'+'((bits\x20>>\x20'+'20u)\x20&\x200x3'+'ffu)\x20/\x20102'+'3.0\x20-\x200.5)'+'\x20*\x20norm_co'+'nst;\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20(f3'+'2((bits\x20>>'+'\x2010u)\x20&\x200x'+'3ffu)\x20/\x2010'+'23.0\x20-\x200.5'+')\x20*\x20norm_c'+'onst;\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20(f'+'32(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+'_const;\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'sqrt(1.0\x20-'+'\x20(a\x20*\x20a\x20+\x20'+'b\x20*\x20b\x20+\x20c\x20'+'*\x20c));\x0a\x0a\x20\x20'+'\x20\x20let\x20mode'+'\x20=\x20bits\x20>>'+'\x2030u;\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x200u)\x20{\x20re'+'turn\x20vec4f'+'(m,\x20a,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20m,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x202u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20b,\x20m,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(a,\x20b,\x20c'+',\x20m);\x0a}\x0a\x0a/'+'/\x20read\x20cen'+'ter\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex_siz'+'e_u\x20=\x20text'+'ureDimensi'+'ons(chunkT'+'exture,\x200)'+';\x0a\x20\x20\x20\x20let\x20'+'w:\x20u32\x20=\x20t'+'ex_size_u.'+'x\x20/\x205u;\x0a\x20\x20'+'\x20\x20let\x20chun'+'kId:\x20u32\x20='+'\x20source.id'+'\x20/\x20256u;\x0a\x20'+'\x20\x20\x20let\x20chu'+'nkUV:\x20vec2'+'<i32>\x20=\x20ve'+'c2<i32>(i3'+'2((chunkId'+'\x20%\x20w)\x20*\x205u'+'),\x20i32(chu'+'nkId\x20/\x20w))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'read\x20chunk'+'\x20and\x20packe'+'d\x20compress'+'ed\x20data\x0a\x20\x20'+'\x20\x20chunkDat'+'aA\x20=\x20textu'+'reLoad(chu'+'nkTexture,'+'\x20chunkUV\x20+'+'\x20vec2<i32>'+'(0,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataB\x20=\x20t'+'extureLoad')+('(chunkText'+'ure,\x20chunk'+'UV\x20+\x20vec2<'+'i32>(1,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataC'+'\x20=\x20texture'+'Load(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20v'+'ec2<i32>(2'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataD\x20=\x20tex'+'tureLoad(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20vec2<i3'+'2>(3,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataE\x20='+'\x20textureLo'+'ad(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20vec'+'2<i32>(4,\x20'+'0),\x200);\x0a\x20\x20'+'\x20\x20packedDa'+'ta\x20=\x20textu'+'reLoad(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(chunkDa'+'taA.xyz,\x20v'+'ec3f(chunk'+'DataA.w,\x20c'+'hunkDataB.'+'xy),\x20unpac'+'k111011(pa'+'ckedData.x'+'));\x0a}\x0a\x0afn\x20'+'readColor('+'source:\x20pt'+'r<function'+',\x20SplatSou'+'rce>)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20let\x20r\x20=\x20u'+'npack8888('+'packedData'+'.w);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(mix(chun'+'kDataD.xyz'+',\x20vec3f(ch'+'unkDataD.w'+',\x20chunkDat'+'aE.xy),\x20r.'+'rgb),\x20r.w)'+';\x0a}\x0a\x0afn\x20ge'+'tRotation('+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20unpack'+'Rotation(p'+'ackedData.'+'y);\x0a}\x0a\x0afn\x20'+'getScale()'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20exp(mix'+'(vec3f(chu'+'nkDataB.zw'+',\x20chunkDat'+'aC.x),\x20chu'+'nkDataC.yz'+'w,\x20unpack1'+'11011(pack'+'edData.z))'+');\x0a}\x0a\x0a//\x20g'+'iven\x20a\x20rot'+'ation\x20matr'+'ix\x20and\x20sca'+'le\x20vector,'+'\x20compute\x203'+'d\x20covarian'+'ce\x20A\x20and\x20B'+'\x0afn\x20readCo'+'variance(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>,\x20covA_'+'ptr:\x20ptr<f'+'unction,\x20v'+'ec3f>,\x20cov'+'B_ptr:\x20ptr'+'<function,')+('\x20vec3f>)\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'ot\x20=\x20quatT'+'oMat3(getR'+'otation())'+';\x0a\x20\x20\x20\x20let\x20'+'scale\x20=\x20ge'+'tScale();\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20let\x20M\x20=\x20'+'transpose('+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.x\x20*\x20rot'+'[0],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.y'+'\x20*\x20rot[1],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.z\x20*\x20r'+'ot[2]\x0a\x20\x20\x20\x20'+'));\x0a\x0a\x20\x20\x20\x20*'+'covA_ptr\x20='+'\x20vec3f(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20*covB_p'+'tr\x20=\x20vec3f'+'(dot(M[1],'+'\x20M[1]),\x20do'+'t(M[1],\x20M['+'2]),\x20dot(M'+'[2],\x20M[2])'+');\x0a}\x0a'),hM='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0av'+'ar\x20shTextu'+'re0:\x20textu'+'re_2d<u32>'+';\x0avar\x20shTe'+'xture1:\x20te'+'xture_2d<u'+'32>;\x0avar\x20s'+'hTexture2:'+'\x20texture_2'+'d<u32>;\x0a\x0af'+'n\x20unpack88'+'88s(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20unpack'+'ed_u\x20=\x20(ve'+'c4<u32>(bi'+'ts)\x20>>\x20vec'+'4<u32>(0u,'+'\x208u,\x2016u,\x20'+'24u))\x20&\x20ve'+'c4<u32>(0x'+'ffu);\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(unpacke'+'d_u)\x20*\x20(8.'+'0\x20/\x20255.0)'+'\x20-\x204.0;\x0a}\x0a'+'\x0afn\x20readSH'+'Data(sourc'+'e:\x20ptr<fun'+'ction,\x20Spl'+'atSource>,'+'\x20sh:\x20ptr<f'+'unction,\x20a'+'rray<vec3f'+',\x2015>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20read\x20t'+'he\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20let\x20shD'+'ata0:\x20vec4'+'<u32>\x20=\x20te'+'xtureLoad('+'shTexture0'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20let\x20shDat'+'a1:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(sh'+'Texture1,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20shData2'+':\x20vec4<u32'+'>\x20=\x20textur'+'eLoad(shTe'+'xture2,\x20so'+'urce.uv,\x200'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20r0\x20=\x20unp'+'ack8888s(s'+'hData0.x);'+'\x0a\x20\x20\x20\x20let\x20r'+'1\x20=\x20unpack'+'8888s(shDa'+'ta0.y);\x0a\x20\x20'+'\x20\x20let\x20r2\x20='+'\x20unpack888'+'8s(shData0'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20r3\x20=\x20un'+'pack8888s('+'shData0.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20g0\x20=\x20unpa'+'ck8888s(sh'+'Data1.x);\x0a'+'\x20\x20\x20\x20let\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20let\x20g2\x20=\x20'+'unpack8888'+'s(shData1.'+'z);\x0a\x20\x20\x20\x20le'+'t\x20g3\x20=\x20unp'+'ack8888s(s'+'hData1.w);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'b0\x20=\x20unpac'+'k8888s(shD'+'ata2.x);\x0a\x20'+'\x20\x20\x20let\x20b1\x20'+('=\x20unpack88'+'88s(shData'+'2.y);\x0a\x20\x20\x20\x20'+'let\x20b2\x20=\x20u'+'npack8888s'+'(shData2.z'+');\x0a\x20\x20\x20\x20let'+'\x20b3\x20=\x20unpa'+'ck8888s(sh'+'Data2.w);\x0a'+'\x0a\x20\x20\x20\x20sh[0]'+'\x20=\x20\x20vec3f('+'r0.x,\x20g0.x'+',\x20b0.x);\x0a\x20'+'\x20\x20\x20sh[1]\x20='+'\x20\x20vec3f(r0'+'.y,\x20g0.y,\x20'+'b0.y);\x0a\x20\x20\x20'+'\x20sh[2]\x20=\x20\x20'+'vec3f(r0.z'+',\x20g0.z,\x20b0'+'.z);\x0a\x20\x20\x20\x20s'+'h[3]\x20=\x20\x20ve'+'c3f(r0.w,\x20'+'g0.w,\x20b0.w'+');\x0a\x20\x20\x20\x20sh['+'4]\x20=\x20\x20vec3'+'f(r1.x,\x20g1'+'.x,\x20b1.x);'+'\x0a\x20\x20\x20\x20sh[5]'+'\x20=\x20\x20vec3f('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3f(r1'+'.z,\x20g1.z,\x20'+'b1.z);\x0a\x20\x20\x20'+'\x20sh[7]\x20=\x20\x20'+'vec3f(r1.w'+',\x20g1.w,\x20b1'+'.w);\x0a\x20\x20\x20\x20s'+'h[8]\x20=\x20\x20ve'+'c3f(r2.x,\x20'+'g2.x,\x20b2.x'+');\x0a\x20\x20\x20\x20sh['+'9]\x20=\x20\x20vec3'+'f(r2.y,\x20g2'+'.y,\x20b2.y);'+'\x0a\x20\x20\x20\x20sh[10'+']\x20=\x20vec3f('+'r2.z,\x20g2.z'+',\x20b2.z);\x0a\x20'+'\x20\x20\x20sh[11]\x20'+'=\x20vec3f(r2'+'.w,\x20g2.w,\x20'+'b2.w);\x0a\x20\x20\x20'+'\x20sh[12]\x20=\x20'+'vec3f(r3.x'+',\x20g3.x,\x20b3'+'.x);\x0a\x20\x20\x20\x20s'+'h[13]\x20=\x20ve'+'c3f(r3.y,\x20'+'g3.y,\x20b3.y'+');\x0a\x20\x20\x20\x20sh['+'14]\x20=\x20vec3'+'f(r3.z,\x20g3'+'.z,\x20b3.z);'+'\x0a\x0a\x20\x20\x20\x20*sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),dM='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'COEFFS:\x20i3'+'2\x20=\x203;\x0a\x20\x20\x20'+'\x20#elif\x20SH_'+'BANDS\x20==\x202'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20SH_CO'+'EFFS:\x20i32\x20'+'=\x208;\x0a\x20\x20\x20\x20#'+'elif\x20SH_BA'+'NDS\x20==\x203\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20con'+'st\x20SH_COEF'+'FS:\x20i32\x20=\x20'+'15;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20const\x20SH'+'_COEFFS:\x20i'+'32\x20=\x200;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20SH'+'_BANDS\x20>\x200'+'\x0a\x0a\x20\x20\x20\x20cons'+'t\x20SH_C1:\x20f'+'32\x20=\x200.488'+'6025119029'+'199;\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x201\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20const'+'\x20SH_C2_0:\x20'+'f32\x20=\x201.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_1:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_2:\x20f'+'32\x20=\x200.315'+'3915652525'+'2005;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_3:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_4:\x20f'+'32\x20=\x200.546'+'2742152960'+'396;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SH_BA'+'NDS\x20>\x202\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_0:'+'\x20f32\x20=\x20-0.'+'5900435899'+'266435;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_1:'+'\x20f32\x20=\x202.8'+'9061144264'+'0554;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_2:\x20f'+'32\x20=\x20-0.45'+'7045799464'+'4658;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_3:\x20f'+'32\x20=\x200.373'+'1763325901'+'154;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_4:\x20f3'+'2\x20=\x20-0.457'+'0457994644'+'658;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_5:\x20f3'+'2\x20=\x201.4453'+'0572132027'+'7;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'C3_6:\x20f32\x20'+'=\x20-0.59004'+'3589926643'+'5;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20see\x20http'+'s://github'+'.com/graph'+'deco-inria'+('/gaussian-'+'splatting/'+'blob/main/'+'utils/sh_u'+'tils.py\x0a\x20\x20'+'\x20\x20fn\x20evalS'+'H(sh:\x20ptr<'+'function,\x20'+'array<vec3'+'f,\x20SH_COEF'+'FS>>,\x20dir:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x\x20=\x20dir.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20y\x20=\x20di'+'r.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20z\x20='+'\x20dir.z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'1st\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20result\x20'+'=\x20SH_C1\x20*\x20'+'(-sh[0]\x20*\x20'+'y\x20+\x20sh[1]\x20'+'*\x20z\x20-\x20sh[2'+']\x20*\x20x);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x201\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x202'+'nd\x20degree\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xx\x20='+'\x20x\x20*\x20x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20yy\x20=\x20y'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20zz\x20=\x20z\x20*'+'\x20z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20yz'+'\x20=\x20y\x20*\x20z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xz\x20='+'\x20x\x20*\x20z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'result\x20+\x20('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'3]\x20*\x20(SH_C'+'2_0\x20*\x20xy)\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[4]\x20*\x20(SH_'+'C2_1\x20*\x20yz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[5]\x20*\x20(SH'+'_C2_2\x20*\x20(2'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[6]\x20*\x20(SH_'+'C2_3\x20*\x20xz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[7]\x20*\x20(SH'+'_C2_4\x20*\x20(x'+'x\x20-\x20yy))\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'=\x20result\x20+'+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20re'+'sult;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20#end'+'if\x0a'),fM='\x0afn\x20quatTo'+'Mat3(R:\x20ve'+'c4<f32>)\x20-'+'>\x20mat3x3<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'let\x20R2:\x20ve'+'c4<f32>\x20=\x20'+'R\x20+\x20R;\x0a\x20\x20\x20'+'\x20let\x20X:\x20f3'+'2\x20\x20\x20\x20\x20\x20\x20=\x20'+'R2.x\x20*\x20R.w'+';\x0a\x20\x20\x20\x20let\x20'+'Y:\x20vec4<f3'+'2>\x20=\x20R2.y\x20'+'*\x20R;\x0a\x20\x20\x20\x20l'+'et\x20Z:\x20vec4'+'<f32>\x20=\x20R2'+'.z\x20*\x20R;\x0a\x20\x20'+'\x20\x20let\x20W:\x20f'+'32\x20\x20\x20\x20\x20\x20\x20='+'\x20R2.w\x20*\x20R.'+'w;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20mat3x'+'3<f32>(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Z.z\x20-\x20W,'+'\x20\x20Y.z\x20+\x20X,'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.z\x20-'+'\x20X,\x20\x20\x20\x20\x20\x20\x20'+'\x201.0\x20-\x20Y.y'+'\x20-\x20W,\x20Z.w\x20'+'+\x20Y.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.w\x20+'+'\x20Z.x,\x20\x20\x20\x20\x20'+'\x20Z.w\x20-\x20Y.x'+',\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',uM='\x0avar\x20sh0:\x20'+'texture_2d'+'<f32>;\x0a\x0aun'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0auniform'+'\x20sh0_maxs:'+'\x20vec4f;\x0a\x0ac'+'onst\x20SH_C0'+':\x20f32\x20=\x200.'+'2820947917'+'7387814;\x0a\x0a'+'fn\x20readCol'+'or(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20let\x20cl'+'r:\x20vec4f\x20='+'\x20mix(unifo'+'rm.sh0_min'+'s,\x20uniform'+'.sh0_maxs,'+'\x20textureLo'+'ad(sh0,\x20so'+'urce.uv,\x200'+'));\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(vec3f(0.5'+')\x20+\x20clr.xy'+'z\x20*\x20SH_C0,'+'\x201.0\x20/\x20(1.'+'0\x20+\x20exp(-c'+'lr.w)));\x0a}'+'\x0a',pM='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0a\x0aun'+'iform\x20mean'+'s_mins:\x20ve'+'c3f;\x0aunifo'+'rm\x20means_m'+'axs:\x20vec3f'+';\x0a\x0auniform'+'\x20scales_mi'+'ns:\x20vec3f;'+'\x0auniform\x20s'+'cales_maxs'+':\x20vec3f;\x0a\x0a'+'fn\x20unpackU'+'32(u:\x20u32)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20vec4f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((u\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((u\x20>>\x201'+'6u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((u\x20>>\x20'+'8u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(u\x20&\x200x'+'FFu)\x20/\x20255'+'.0\x0a\x20\x20\x20\x20);\x0a'+'}\x0a\x0avar<pri'+'vate>\x20pack'+'edSample:\x20'+'vec4<u32>;'+'\x0a\x0a//\x20read\x20'+'the\x20model-'+'space\x20cent'+'er\x20of\x20the\x20'+'gaussian\x0af'+'n\x20readCent'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec3f\x20{\x0a'+'\x0a\x20\x20\x20\x20packe'+'dSample\x20=\x20'+'textureLoa'+'d(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20l:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.x).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20u:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20n:\x20vec3f\x20'+'=\x20(l\x20*\x20255'+'.0\x20+\x20u\x20*\x202'+'55.0\x20*\x20256'+'.0)\x20/\x206553'+'5.0;\x0a\x20\x20\x20\x20l'+'et\x20v:\x20vec3'+'f\x20=\x20mix(un'+'iform.mean'+'s_mins,\x20un'+'iform.mean'+'s_maxs,\x20n)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20sign(v'+')\x20*\x20(exp(a'+'bs(v))\x20-\x201'+'.0);\x0a}\x0a\x0aco'+'nst\x20norm:\x20'+'f32\x20=\x202.0\x20'+'/\x20sqrt(2.0'+');\x0a\x0a//\x20sam'+'ple\x20covari'+'ance\x20vecto'+'rs\x0afn\x20read'+'Covariance'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>,\x20cov'+'A_ptr:\x20ptr'+'<function,'+'\x20vec3f>,\x20c'+('ovB_ptr:\x20p'+'tr<functio'+'n,\x20vec3f>)'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20qdata:\x20ve'+'c4f\x20=\x20unpa'+'ckU32(pack'+'edSample.z'+');\x0a\x20\x20\x20\x20let'+'\x20sdata:\x20ve'+'c3f\x20=\x20unpa'+'ckU32(pack'+'edSample.w'+').xyz;\x0a\x0a\x20\x20'+'\x20\x20let\x20abc:'+'\x20vec3f\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(abc,'+'\x20abc)));\x0a\x0a'+'\x20\x20\x20\x20let\x20mo'+'de:\x20u32\x20=\x20'+'u32(qdata.'+'w\x20*\x20255.0\x20'+'+\x200.5)\x20-\x202'+'52u;\x0a\x0a\x20\x20\x20\x20'+'var\x20quat:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20if\x20(mode\x20'+'==\x200u)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20qua'+'t\x20=\x20vec4f('+'d,\x20abc);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20quat'+'\x20=\x20vec4f(a'+'bc.x,\x20d,\x20a'+'bc.y,\x20abc.'+'z);\x0a\x20\x20\x20\x20}\x20'+'else\x20if\x20(m'+'ode\x20==\x202u)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20quat\x20=\x20ve'+'c4f(abc.x,'+'\x20abc.y,\x20d,'+'\x20abc.z);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'quat\x20=\x20vec'+'4f(abc.x,\x20'+'abc.y,\x20abc'+'.z,\x20d);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x0a\x20\x20\x20\x20'+'let\x20rot:\x20m'+'at3x3f\x20=\x20q'+'uatToMat3('+'quat);\x0a\x20\x20\x20'+'\x20let\x20scale'+':\x20vec3f\x20=\x20'+'exp(mix(un'+'iform.scal'+'es_mins,\x20u'+'niform.sca'+'les_maxs,\x20'+'sdata));\x0a\x0a'+'\x20\x20\x20\x20//\x20M\x20='+'\x20S\x20*\x20R\x0a\x20\x20\x20'+'\x20let\x20M:\x20ma'+'t3x3f\x20=\x20tr'+'anspose(ma'+'t3x3f(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20*co'+'vA_ptr\x20=\x20v'+'ec3f(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20*covB_ptr'+'\x20=\x20vec3f(d'+'ot(M[1],\x20M'+'[1]),\x20dot('+'M[1],\x20M[2]'+'),\x20dot(M[2'+'],\x20M[2]));')+'\x0a}\x0a',mM='\x0avar\x20sh_ce'+'ntroids:\x20t'+'exture_2d<'+'f32>;\x0a\x0auni'+'form\x20shN_m'+'ins:\x20f32;\x0a'+'uniform\x20sh'+'N_maxs:\x20f3'+'2;\x0a\x0afn\x20rea'+'dSHData(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>,\x20sh:\x20pt'+'r<function'+',\x20array<ve'+'c3f,\x20SH_CO'+'EFFS>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'let\x20t:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'32(packedS'+'ample.x\x20&\x20'+'255u),\x20i32'+'(packedSam'+'ple.y\x20&\x2025'+'5u));\x0a\x20\x20\x20\x20'+'let\x20n:\x20i32'+'\x20=\x20t.x\x20+\x20t'+'.y\x20*\x20256;\x0a'+'\x20\x20\x20\x20let\x20u:'+'\x20i32\x20=\x20(n\x20'+'%\x2064)\x20*\x20SH'+'_COEFFS;\x0a\x20'+'\x20\x20\x20let\x20v:\x20'+'i32\x20=\x20n\x20/\x20'+'64;\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20offset\x20i'+'nto\x20the\x20ce'+'ntroids\x20te'+'xture\x20and\x20'+'read\x20conse'+'cutive\x20tex'+'els\x0a\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'i32\x20=\x200;\x20i'+'\x20<\x20SH_COEF'+'FS;\x20i\x20=\x20i\x20'+'+\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[i]'+'\x20=\x20mix(vec'+'3f(uniform'+'.shN_mins)'+',\x20vec3f(un'+'iform.shN_'+'maxs),\x20tex'+'tureLoad(s'+'h_centroid'+'s,\x20vec2<i3'+'2>(u\x20+\x20i,\x20'+'v),\x200).xyz'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20*scale'+'\x20=\x201.0;\x0a}\x0a',_M='\x0auniform\x20v'+'iewport:\x20v'+'ec2f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20view'+'port\x20dimen'+'sions\x0aunif'+'orm\x20camera'+'_params:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201\x20/\x20far,\x20'+'far,\x20near,'+'\x20isOrtho\x0a\x0a'+'//\x20calcula'+'te\x20the\x20cli'+'p-space\x20of'+'fset\x20from\x20'+'the\x20center'+'\x20for\x20this\x20'+'gaussian\x0af'+'n\x20initCorn'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>,\x20corne'+'r:\x20ptr<fun'+'ction,\x20Spl'+'atCorner>)'+'\x20->\x20bool\x20{'+'\x0a\x20\x20\x20\x20//\x20ge'+'t\x20covarian'+'ce\x0a\x20\x20\x20\x20var'+'\x20covA:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20covB:\x20ve'+'c3f;\x0a\x20\x20\x20\x20r'+'eadCovaria'+'nce(source'+',\x20&covA,\x20&'+'covB);\x0a\x0a\x20\x20'+'\x20\x20let\x20Vrk\x20'+'=\x20mat3x3f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(covA.'+'x,\x20covA.y,'+'\x20covA.z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(covA.y'+',\x20covB.x,\x20'+'covB.y),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(covA.z,'+'\x20covB.y,\x20c'+'ovB.z)\x0a\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20l'+'et\x20focal\x20='+'\x20uniform.v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20let\x20v'+'\x20=\x20select('+'center.vie'+'w.xyz,\x20vec'+'3f(0.0,\x200.'+'0,\x201.0),\x20u'+'niform.cam'+'era_params'+'.w\x20==\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'J1\x20=\x20focal'+'\x20/\x20v.z;\x0a\x20\x20'+'\x20\x20let\x20J2\x20='+'\x20-J1\x20/\x20v.z'+'\x20*\x20v.xy;\x0a\x20'+'\x20\x20\x20let\x20J\x20='+'\x20mat3x3f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(J1,\x200.'+'0,\x20J2.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x20J'+'1,\x20J2.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x200'+'.0,\x200.0)\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20W\x20=\x20t'+'ranspose(m'+'at3x3f(cen'+'ter.modelV'+'iew[0].xyz'+',\x20center.m'+'odelView[1'+'].xyz,\x20cen'+('ter.modelV'+'iew[2].xyz'+'));\x0a\x20\x20\x20\x20le'+'t\x20T\x20=\x20W\x20*\x20'+'J;\x0a\x20\x20\x20\x20let'+'\x20cov\x20=\x20tra'+'nspose(T)\x20'+'*\x20Vrk\x20*\x20T;'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'GSPLAT_AA\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20calculate'+'\x20AA\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20detOrig'+'\x20=\x20cov[0]['+'0]\x20*\x20cov[1'+'][1]\x20-\x20cov'+'[0][1]\x20*\x20c'+'ov[1][0];\x20'+'//\x20Using\x20['+'0][1]\x20*\x20[1'+'][0]\x20as\x20ma'+'trix\x20might'+'\x20not\x20be\x20pe'+'rfectly\x20sy'+'mmetric\x20nu'+'merically\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20detBlur\x20'+'=\x20(cov[0]['+'0]\x20+\x200.3)\x20'+'*\x20(cov[1]['+'1]\x20+\x200.3)\x20'+'-\x20cov[0][1'+']\x20*\x20cov[1]'+'[0];\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20corner.'+'aaFactor\x20='+'\x20sqrt(detO'+'rig\x20/\x20detB'+'lur);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal1\x20=\x20co'+'v[0][0]\x20+\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20offDiag'+'onal\x20=\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal2\x20=\x20co'+'v[1][1]\x20+\x20'+'0.3;\x0a\x0a\x20\x20\x20\x20'+'let\x20mid\x20=\x20'+'0.5\x20*\x20(dia'+'gonal1\x20+\x20d'+'iagonal2);'+'\x0a\x20\x20\x20\x20let\x20r'+'adius\x20=\x20le'+'ngth(vec2f'+'((diagonal'+'1\x20-\x20diagon'+'al2)\x20/\x202.0'+',\x20offDiago'+'nal));\x0a\x20\x20\x20'+'\x20let\x20lambd'+'a1\x20=\x20mid\x20+'+'\x20radius;\x0a\x20'+'\x20\x20\x20let\x20lam'+'bda2\x20=\x20max'+'(mid\x20-\x20rad'+'ius,\x200.1);'+'\x0a\x0a\x20\x20\x20\x20//\x20U'+'se\x20the\x20sma'+'ller\x20viewp'+'ort\x20dimens'+'ion\x20to\x20lim'+'it\x20the\x20ker'+'nel\x20size\x20r'+'elative\x20to'+'\x20the\x20scree'+'n\x20resoluti'+'on.\x0a\x20\x20\x20\x20le'+'t\x20vmin\x20=\x20m'+'in(1024.0,'+'\x20min(unifo'+'rm.viewpor'+'t.x,\x20unifo'+'rm.viewpor'+'t.y));\x0a\x0a\x20\x20'+'\x20\x20let\x20l1\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda1)'+',\x20vmin);\x0a\x20'+'\x20\x20\x20let\x20l2\x20'+'=\x202.0\x20*\x20mi'+'n(sqrt(2.0'+'\x20*\x20lambda2')+('),\x20vmin);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly-out\x20ga'+'ussians\x20sm'+'aller\x20than'+'\x202\x20pixels\x0a'+'\x20\x20\x20\x20if\x20(l1'+'\x20<\x202.0\x20&&\x20'+'l2\x20<\x202.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20fal'+'se;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'uniform.vi'+'ewport;\x0a\x0a\x20'+'\x20\x20\x20//\x20cull'+'\x20against\x20f'+'rustum\x20x/y'+'\x20axes\x0a\x20\x20\x20\x20'+'if\x20(any((a'+'bs(center.'+'proj.xy)\x20-'+'\x20vec2f(max'+'(l1,\x20l2))\x20'+'*\x20c)\x20>\x20cen'+'ter.proj.w'+'w))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20diagona'+'lVector\x20=\x20'+'normalize('+'vec2f(offD'+'iagonal,\x20l'+'ambda1\x20-\x20d'+'iagonal1))'+';\x0a\x20\x20\x20\x20let\x20'+'v1\x20=\x20l1\x20*\x20'+'diagonalVe'+'ctor;\x0a\x20\x20\x20\x20'+'let\x20v2\x20=\x20l'+'2\x20*\x20vec2f('+'diagonalVe'+'ctor.y,\x20-d'+'iagonalVec'+'tor.x);\x20//'+'\x20Swizzle\x0a\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20=\x20'+'(source.co'+'rnerUV.x\x20*'+'\x20v1\x20+\x20sour'+'ce.cornerU'+'V.y\x20*\x20v2)\x20'+'*\x20c;\x0a\x20\x20\x20\x20c'+'orner.uv\x20='+'\x20source.co'+'rnerUV;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),gM='\x0avar\x20trans'+'formA:\x20tex'+'ture_2d<u3'+'2>;\x0avar\x20tr'+'ansformB:\x20'+'texture_2d'+'<f32>;\x0a\x0a//'+'\x20work\x20valu'+'es\x0avar<pri'+'vate>\x20tAw:'+'\x20u32;\x0a\x0a//\x20'+'read\x20the\x20m'+'odel-space'+'\x20center\x20of'+'\x20the\x20gauss'+'ian\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20let\x20'+'tA:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(tr'+'ansformA,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20t'+'Aw\x20=\x20tA.w;'+'\x0a\x20\x20\x20\x20retur'+'n\x20bitcast<'+'vec3f>(tA.'+'xyz);\x0a}\x0a\x0af'+'n\x20unpackRo'+'tation(pac'+'ked:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'packed.xyz'+',\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(pack'+'ed,\x20packed'+'))));\x0a}\x0a\x0a/'+'/\x20sample\x20c'+'ovariance\x20'+'vectors\x0afn'+'\x20readCovar'+'iance(sour'+'ce:\x20ptr<fu'+'nction,\x20Sp'+'latSource>'+',\x20covA_ptr'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20covB_p'+'tr:\x20ptr<fu'+'nction,\x20ve'+'c3f>)\x20{\x0a\x20\x20'+'\x20\x20let\x20tB:\x20'+'vec4f\x20=\x20te'+'xtureLoad('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20let\x20rot:'+'\x20mat3x3f\x20='+'\x20quatToMat'+'3(unpackRo'+'tation(vec'+'3f(unpack2'+'x16float(b'+'itcast<u32'+'>(tAw)),\x20t'+'B.w)).wxyz'+');\x0a\x20\x20\x20\x20let'+'\x20scale:\x20ve'+'c3f\x20=\x20tB.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x20M\x20=\x20S\x20*\x20'+'R\x0a\x20\x20\x20\x20let\x20'+'M\x20=\x20transp'+'ose(mat3x3'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20*covA_p'+'tr\x20=\x20vec3f'+'(dot(M[0],'+'\x20M[0]),\x20do'+('t(M[0],\x20M['+'1]),\x20dot(M'+'[0],\x20M[2])'+');\x0a\x20\x20\x20\x20*co'+'vB_ptr\x20=\x20v'+'ec3f(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a'),SM='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0afn\x20'+'prepareOut'+'putFromGam'+'ma(gammaCo'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20TONEMAP\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20G'+'AMMA\x20==\x20NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'nvert\x20to\x20l'+'inear\x20spac'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20decodeGam'+'ma3(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20gamma\x20'+'space\x20colo'+'r\x20directly'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'gammaColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ap'+'ply\x20tonema'+'pping\x20in\x20l'+'inear\x20spac'+'e\x20and\x20outp'+'ut\x20to\x20line'+'ar\x20or\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20gam'+'ma\x20(which\x20'+'is\x20handled'+'\x20by\x20gammaC'+'orrectOutp'+'ut)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaCorrec'+'tOutput(to'+'neMap(deco'+'deGamma3(g'+'ammaColor)'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',yM='\x0a\x0a#ifndef\x20'+'DITHER_NON'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22baye'+'rPS\x22\x0a\x20\x20\x20\x20#'+'include\x20\x22o'+'pacityDith'+'erPS\x22\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20PICK_PAS'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22pick'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_PASS)\x20||\x20'+'defined(PI'+'CK_PASS)\x20|'+'|\x20defined('+'PREPASS_PA'+'SS)\x0a\x20\x20\x20\x20un'+'iform\x20alph'+'aClip:\x20f32'+';\x0a#endif\x0a\x0a'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vLinearD'+'epth:\x20f32;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22float'+'AsUintPS\x22\x0a'+'#endif\x0a\x0a//'+'\x20Fast\x20appr'+'oximate\x20e^'+'x\x20based\x20on'+'\x20https://n'+'ic.schraud'+'olph.org/p'+'ubs/Schrau'+'dolph99.pd'+'f\x0aconst\x20EX'+'P_A:\x20f32\x20\x20'+'\x20\x20\x20\x20=\x201210'+'2203.0;\x20\x20\x20'+'//\x20≈\x202^23\x20'+'/\x20ln(2)\x0aco'+'nst\x20EXP_BC'+'_RMS:\x20i32\x20'+'=\x2010648668'+'08;\x20\x20\x20//\x20('+'127\x20<<\x2023)'+'\x20-\x2060801\x20*'+'\x208\x0afn\x20fast'+'Exp(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20var\x20i'+':\x20i32\x20=\x20i3'+'2(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20bi'+'tcast<f32>'+'(i);\x0a}\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x0a\x20\x20\x20'+'\x20let\x20A:\x20f3'+'2\x20=\x20dot(ga'+'ussianUV,\x20'+'gaussianUV'+');\x0a\x20\x20\x20\x20if\x20'+'(A\x20>\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20alpha'+'\x0a\x20\x20\x20\x20var\x20a'+'lpha:\x20f32\x20'+'=\x20fastExp('+'-A\x20*\x204.0)\x20'+'*\x20gaussian'+('Color.a;\x0a\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(al'+'pha\x20<\x20unif'+'orm.alphaC'+'lip)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20PI'+'CK_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20getPickO'+'utput();\x0a\x0a'+'\x20\x20\x20\x20#elif\x20'+'SHADOW_PAS'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(0.0,\x200.0'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20PREPAS'+'S_PASS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20float2vec'+'4(vLinearD'+'epth);\x0a\x0a\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20('+'1.0\x20/\x20255.'+'0))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20opaci'+'tyDither(&'+'alpha,\x20id\x20'+'*\x200.013);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(input'+'.gaussianC'+'olor.xyz,\x20'+'alpha);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'),vM='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0afn\x20unpack'+'111011s(bi'+'ts:\x20u32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20(vec3f((v'+'ec3<u32>(b'+'its)\x20>>\x20ve'+'c3<u32>(21'+'u,\x2011u,\x200u'+'))\x20&\x20vec3<'+'u32>(0x7ff'+'u,\x200x3ffu,'+'\x200x7ffu))\x20'+'/\x20vec3f(20'+'47.0,\x201023'+'.0,\x202047.0'+'))\x20*\x202.0\x20-'+'\x201.0;\x0a}\x0a\x0as'+'truct\x20Scal'+'eAndSH\x20{\x0a\x20'+'\x20\x20\x20scale:\x20'+'f32,\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f\x0a};\x0a\x0a'+'//\x20fetch\x20q'+'uantized\x20s'+'pherical\x20h'+'armonic\x20co'+'efficients'+'\x0afn\x20fetchS'+'cale(t_in:'+'\x20vec4<u32>'+')\x20->\x20Scale'+'AndSH\x20{\x0a\x20\x20'+'\x20\x20var\x20resu'+'lt:\x20ScaleA'+'ndSH;\x0a\x20\x20\x20\x20'+'result.sca'+'le\x20=\x20bitca'+'st<f32>(t_'+'in.x);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20unpack11'+'1011s(t_in'+'.y);\x0a\x20\x20\x20\x20r'+'esult.b\x20=\x20'+'unpack1110'+'11s(t_in.z'+');\x0a\x20\x20\x20\x20res'+'ult.c\x20=\x20un'+'pack111011'+'s(t_in.w);'+'\x0a\x20\x20\x20\x20retur'+'n\x20result;\x0a'+'}\x0a\x0astruct\x20'+'SH\x20{\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20d:\x20vec3f\x0a'+'};\x0a\x0a//\x20fet'+'ch\x20quantiz'+'ed\x20spheric'+'al\x20harmoni'+'c\x20coeffici'+'ents\x0afn\x20fe'+'tch4(t_in:'+'\x20vec4<u32>'+')\x20->\x20SH\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'sult:\x20SH;\x0a'+'\x20\x20\x20\x20result'+'.a\x20=\x20unpac'+'k111011s(t'+'_in.x);\x0a\x20\x20'+'\x20\x20result.b'+'\x20=\x20unpack1'+'11011s(t_i'+'n.y);\x0a\x20\x20\x20\x20'+'result.c\x20='+'\x20unpack111'+'011s(t_in.'+'z);\x0a\x20\x20\x20\x20re'+'sult.d\x20=\x20u'+'npack11101'+'1s(t_in.w)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20result;'+'\x0a}\x0a\x0afn\x20fet'+'ch1(t_in:\x20'+'u32)\x20->\x20ve'+('c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20unp'+'ack111011s'+'(t_in);\x0a}\x0a'+'\x0a#if\x20SH_BA'+'NDS\x20==\x201\x0a\x20'+'\x20\x20\x20var\x20spl'+'atSH_1to3:'+'\x20texture_2'+'d<u32>;\x0a\x0a\x20'+'\x20\x20\x20fn\x20read'+'SHData(sou'+'rce:\x20ptr<f'+'unction,\x20S'+'platSource'+'>,\x20sh:\x20ptr'+'<function,'+'\x20array<vec'+'3f,\x203>>,\x20s'+'cale:\x20ptr<'+'function,\x20'+'f32>)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'result\x20=\x20f'+'etchScale('+'textureLoa'+'d(splatSH_'+'1to3,\x20sour'+'ce.uv,\x200))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'*scale\x20=\x20r'+'esult.scal'+'e;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[0]\x20=\x20r'+'esult.a;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'1]\x20=\x20resul'+'t.b;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[2]\x20='+'\x20result.c;'+'\x0a\x20\x20\x20\x20}\x0a#el'+'if\x20SH_BAND'+'S\x20==\x202\x0a\x20\x20\x20'+'\x20var\x20splat'+'SH_1to3:\x20t'+'exture_2d<'+'u32>;\x0a\x20\x20\x20\x20'+'var\x20splatS'+'H_4to7:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_8to11:\x20te'+'xture_2d<u'+'32>;\x0a\x0a\x20\x20\x20\x20'+'fn\x20readSHD'+'ata(source'+':\x20ptr<func'+'tion,\x20Spla'+'tSource>,\x20'+'sh:\x20ptr<fu'+'nction,\x20ar'+'ray<vec3f,'+'\x208>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se')+('cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20='+'\x20fetch1(te'+'xtureLoad('+'splatSH_8t'+'o11,\x20sourc'+'e.uv,\x200).x'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_1to3:\x20tex'+'ture_2d<u3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20splatSH_'+'4to7:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_8'+'to11:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_1'+'2to15:\x20tex'+'ture_2d<u3'+'2>;\x0a\x0a\x20\x20\x20\x20f'+'n\x20readSHDa'+'ta(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20s'+'h:\x20ptr<fun'+'ction,\x20arr'+'ay<vec3f,\x20'+'15>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se'+'cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20thi'+'rd:\x20SH\x20=\x20f'+'etch4(text'+'ureLoad(sp'+'latSH_8to1'+'1,\x20source.'+'uv,\x200));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'7]\x20=\x20third'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[8]\x20=\x20'+'third.b;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'9]\x20=\x20third'+'.c;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[10]\x20='+'\x20third.d;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20fourth:'+'\x20SH\x20=\x20fetc'+'h4(texture'+'Load(splat'+'SH_12to15,')+('\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[11'+']\x20=\x20fourth'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[12]\x20='+'\x20fourth.b;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[13]\x20=\x20fo'+'urth.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[1'+'4]\x20=\x20fourt'+'h.d;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a\x0a#'+'endif\x0a'),xM='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c3f;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20xy:\x20'+'cornerUV,\x20'+'z:\x20render\x20'+'order\x20offs'+'et\x0aattribu'+'te\x20vertex_'+'id_attrib:'+'\x20u32;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'nder\x20order'+'\x20base\x0a\x0auni'+'form\x20numSp'+'lats:\x20u32;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20total\x20nu'+'mber\x20of\x20sp'+'lats\x0avar\x20s'+'platOrder:'+'\x20texture_2'+'d<u32>;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'per-splat\x20'+'index\x20to\x20s'+'ource\x20gaus'+'sian\x0a\x0a//\x20i'+'nitialize\x20'+'the\x20splat\x20'+'source\x20str'+'ucture\x0afn\x20'+'initSource'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20let\x20w:\x20u3'+'2\x20=\x20textur'+'eDimension'+'s(splatOrd'+'er,\x200).x;\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20u3'+'2(vertex_p'+'osition.z)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'return\x20if\x20'+'out\x20of\x20ran'+'ge\x20(since\x20'+'the\x20last\x20b'+'lock\x20of\x20sp'+'lats\x20may\x20b'+'e\x20partiall'+'y\x20full)\x0a\x20\x20'+'\x20\x20if\x20(sour'+'ce.order\x20>'+'=\x20uniform.'+'numSplats)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20fa'+'lse;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'orderUV\x20=\x20'+'vec2i(vec2'+'u(source.o'+'rder\x20%\x20w,\x20'+'source.ord'+'er\x20/\x20w));\x0a'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20splat\x20i'+'d\x0a\x20\x20\x20\x20sour'+'ce.id\x20=\x20te'+'xtureLoad('+'splatOrder'+',\x20orderUV,'+'\x200).r;\x0a\x0a\x20\x20'+'\x20\x20//\x20map\x20i'+'d\x20to\x20uv\x0a\x20\x20'+'\x20\x20source.u'+'v\x20=\x20vec2i('+'vec2u(sour'+'ce.id\x20%\x20w,'+'\x20source.id'+'\x20/\x20w));\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+('turn\x20true;'+'\x0a}\x0a'),TM='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a#ifn'+'def\x20DITHER'+'_NONE\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0aconst'+'\x20discardVe'+'c:\x20vec4f\x20='+'\x20vec4f(0.0'+',\x200.0,\x202.0'+',\x201.0);\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20varying'+'\x20vLinearDe'+'pth:\x20f32;\x0a'+'#endif\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20gaussian\x20'+'details\x0a\x20\x20'+'\x20\x20var\x20sour'+'ce:\x20SplatS'+'ource;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Source(&so'+'urce))\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.positi'+'on\x20=\x20disca'+'rdVec;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20let\x20model'+'Center:\x20ve'+'c3f\x20=\x20read'+'Center(&so'+'urce);\x0a\x0a\x20\x20'+'\x20\x20var\x20cent'+'er:\x20SplatC'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'&center))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20di'+'scardVec;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20pro'+'ject\x20cente'+'r\x20to\x20scree'+'n\x20space\x0a\x20\x20'+'\x20\x20var\x20corn'+'er:\x20SplatC'+'orner;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Corner(&so'+'urce,\x20&cen'+'ter,\x20&corn'+'er))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20clr:\x20vec4'+'f\x20=\x20readCo'+'lor(&sourc'+'e);\x0a\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'AA\x20compens'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr.a\x20'+('=\x20clr.a\x20*\x20'+'corner.aaF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20spher'+'ical\x20harmo'+'nics\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x200\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cal'+'culate\x20the'+'\x20model-spa'+'ce\x20view\x20di'+'rection\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'modelView3'+'x3\x20=\x20mat3x'+'3f(center.'+'modelView['+'0].xyz,\x20ce'+'nter.model'+'View[1].xy'+'z,\x20center.'+'modelView['+'2].xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dir\x20=\x20nor'+'malize(mod'+'elView3x3\x20'+'*\x20center.v'+'iew);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'ad\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20sh:\x20array'+'<vec3f,\x20SH'+'_COEFFS>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20scale:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20readSHDa'+'ta(&source'+',\x20&sh,\x20&sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr\x20='+'\x20vec4f(clr'+'.xyz\x20+\x20eva'+'lSH(&sh,\x20d'+'ir)\x20*\x20scal'+'e,\x20clr.a);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(&c'+'orner,\x20clr'+'.w);\x0a\x0a\x20\x20\x20\x20'+'//\x20write\x20o'+'utput\x0a\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4f(co'+'rner.offse'+'t,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20ou'+'tput.gauss'+'ianUV\x20=\x20co'+'rner.uv;\x0a\x20'+'\x20\x20\x20output.'+'gaussianCo'+'lor\x20=\x20vec4'+'f(prepareO'+'utputFromG'+'amma(max(c'+'lr.xyz,\x20ve'+'c3f(0.0)))'+',\x20clr.w);\x0a'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'id\x20=\x20f32(s'+'ource.id);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vLinearD'+'epth\x20=\x20-ce'+'nter.view.'+'z;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),wM='\x0a\x20\x20\x20\x20attri'+'bute\x20aPosi'+'tion:\x20vec2'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20uv0:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20@vertex\x20f'+'n\x20vertexMa'+'in(input:\x20'+'VertexInpu'+'t)\x20->\x20Vert'+'exOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20vec4f(inp'+'ut.aPositi'+'on,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'uv0\x20=\x20getI'+'mageEffect'+'UV((input.'+'aPosition\x20'+'+\x201.0)\x20*\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a',EM='\x0a//\x20Indire'+'ct\x20indexed'+'\x20draw\x20call'+'\x20parameter'+'s\x0astruct\x20D'+'rawIndexed'+'IndirectAr'+'gs\x20{\x0a\x20\x20\x20\x20i'+'ndexCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Numb'+'er\x20of\x20indi'+'ces\x20to\x20dra'+'w\x0a\x20\x20\x20\x20inst'+'anceCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20instanc'+'es\x20to\x20draw'+'\x0a\x20\x20\x20\x20first'+'Index:\x20u32'+',\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Index\x20of'+'\x20the\x20first'+'\x20index\x20in\x20'+'the\x20index\x20'+'buffer\x0a\x20\x20\x20'+'\x20baseVerte'+'x:\x20i32,\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Of'+'fset\x20added'+'\x20to\x20each\x20i'+'ndex\x20befor'+'e\x20fetching'+'\x20vertex\x0a\x20\x20'+'\x20\x20firstIns'+'tance:\x20u32'+'\x20\x20\x20\x20\x20\x20//\x20F'+'irst\x20insta'+'nce\x20ID\x0a};\x0a'+'\x0a//\x20Indire'+'ct\x20non-ind'+'exed\x20draw\x20'+'call\x20param'+'eters\x0astru'+'ct\x20DrawInd'+'irectArgs\x20'+'{\x0a\x20\x20\x20\x20vert'+'exCount:\x20u'+'32,\x20\x20\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20vertice'+'s\x20to\x20draw\x0a'+'\x20\x20\x20\x20instan'+'ceCount:\x20u'+'32,\x20\x20\x20\x20\x20//'+'\x20Number\x20of'+'\x20instances'+'\x20to\x20draw\x0a\x20'+'\x20\x20\x20firstVe'+'rtex:\x20u32,'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Index\x20of\x20t'+'he\x20first\x20v'+'ertex\x0a\x20\x20\x20\x20'+'firstInsta'+'nce:\x20u32,\x20'+'\x20\x20\x20\x20//\x20Fir'+'st\x20instanc'+'e\x20ID\x0a\x20\x20\x20\x20_'+'pad:\x20u32\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Padd'+'ing\x20to\x20mat'+'ch\x20indexed'+'\x20size\x20(unu'+'sed)\x0a};\x0a',bM='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gamma'+'PS\x22\x0a\x20\x20\x20\x20va'+'rying\x20colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(decodeGam'+'ma3(input.'+'color.rgb)'+'),\x20input.c'+'olor.a);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a',AM='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20matr'+'ix_model:\x20'+'mat4x4f;\x0a\x20'+'\x20\x20\x20uniform'+'\x20matrix_vi'+'ewProjecti'+'on:\x20mat4x4'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output\x20:\x20V'+'ertexOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20inpu'+'t.vertex_c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20unifor'+'m.matrix_m'+'odel\x20*\x20inp'+'ut.vertex_'+'position;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',CM='\x0auniform\x20m'+'aterial_ir'+'idescenceR'+'efractionI'+'ndex:\x20f32;'+'\x0a\x0afn\x20iride'+'scence_ior'+'ToFresnelS'+'calar(tran'+'smittedIor'+':\x20f32,\x20inc'+'identIor:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(('+'transmitte'+'dIor\x20-\x20inc'+'identIor)\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'incidentIo'+'r),\x202.0);\x0a'+'}\x0a\x0afn\x20irid'+'escence_io'+'rToFresnel'+'Vec3(trans'+'mittedIor:'+'\x20vec3f,\x20in'+'cidentIor:'+'\x20f32)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'vec3f(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3f(inci'+'dentIor)),'+'\x20vec3f(2.0'+'));\x0a}\x0a\x0afn\x20'+'iridescenc'+'e_fresnelT'+'oIor(f0:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20sqrtF'+'0:\x20vec3f\x20='+'\x20sqrt(f0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20(vec3f(1'+'.0)\x20+\x20sqrt'+'F0)\x20/\x20(vec'+'3f(1.0)\x20-\x20'+'sqrtF0);\x0a}'+'\x0a\x0aconst\x20XY'+'Z_TO_REC70'+'9:\x20mat3x3f'+'\x20=\x20mat3x3f'+'(\x0a\x20\x20\x20\x20vec3'+'f(3.240454'+'2,\x20-1.5371'+'385,\x20-0.49'+'85314),\x0a\x20\x20'+'\x20\x20vec3f(-0'+'.9692660,\x20'+'\x201.8760108'+',\x20\x200.04155'+'60),\x0a\x20\x20\x20\x20v'+'ec3f(0.055'+'6434,\x20-0.2'+'040259,\x20\x201'+'.0572252)\x0a'+');\x0a\x0afn\x20iri'+'descence_s'+'ensitivity'+'(opd:\x20f32,'+'\x20shift:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x20\x20\x20\x20let'+'\x20phase:\x20f3'+'2\x20=\x202.0\x20*\x20'+'PI\x20*\x20opd\x20*'+'\x201.0e-9;\x0a\x20'+'\x20\x20\x20const\x20v'+'al:\x20vec3f\x20'+'=\x20vec3f(5.'+'4856e-13,\x20'+'4.4201e-13'+',\x205.2481e-'+'13);\x0a\x20\x20\x20\x20c'+'onst\x20pos:\x20'+'vec3f\x20=\x20ve'+'c3f(1.6810'+'e+06,\x201.79'+('53e+06,\x202.'+'2084e+06);'+'\x0a\x20\x20\x20\x20const'+'\x20var_:\x20vec'+'3f\x20=\x20vec3f'+'(4.3278e+0'+'9,\x209.3046e'+'+09,\x206.612'+'1e+09);\x0a\x0a\x20'+'\x20\x20\x20var\x20xyz'+':\x20vec3f\x20=\x20'+'val\x20*\x20sqrt'+'(2.0\x20*\x20PI\x20'+'*\x20var_)\x20*\x20'+'cos(pos\x20*\x20'+'phase\x20+\x20sh'+'ift)\x20*\x20exp'+'(-pow(phas'+'e,\x202.0)\x20*\x20'+'var_);\x0a\x20\x20\x20'+'\x20xyz.x\x20=\x20x'+'yz.x\x20+\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+'cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20=\x20xyz\x20/\x20v'+'ec3f(1.068'+'5e-07);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'XYZ_TO_REC'+'709\x20*\x20xyz;'+'\x0a}\x0a\x0afn\x20iri'+'descence_f'+'resnelScal'+'ar(cosThet'+'a:\x20f32,\x20f0'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20x:\x20f32'+'\x20=\x20clamp(1'+'.0\x20-\x20cosTh'+'eta,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'let\x20x2:\x20f3'+'2\x20=\x20x\x20*\x20x;'+'\x0a\x20\x20\x20\x20let\x20x'+'5:\x20f32\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x0a\x0afn'+'\x20iridescen'+'ce_fresnel'+'Vec3(cosTh'+'eta:\x20f32,\x20'+'f0:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'x:\x20f32\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'x2:\x20f32\x20=\x20'+'x\x20*\x20x;\x0a\x20\x20\x20'+'\x20let\x20x5:\x20f'+'32\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x0a\x20\x20'+'\x20\x20return\x20f'+'0\x20+\x20(vec3f'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0afn\x20calcIr'+'idescence('+'outsideIor'+':\x20f32,\x20cos'+'Theta:\x20f32'+',\x20base_f0:'+'\x20vec3f,\x20ir'+'idescenceT'+'hickness:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0a\x20\x20\x20\x20le'+'t\x20iridesce'+'nceIor:\x20f3'+'2\x20=\x20mix(ou')+('tsideIor,\x20'+'uniform.ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20let\x20s'+'inTheta2Sq'+':\x20f32\x20=\x20po'+'w(outsideI'+'or\x20/\x20iride'+'scenceIor,'+'\x202.0)\x20*\x20(1'+'.0\x20-\x20pow(c'+'osTheta,\x202'+'.0));\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2Sq:\x20f32'+'\x20=\x201.0\x20-\x20s'+'inTheta2Sq'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(cosTheta2'+'Sq\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3f(1.0);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2:\x20f32\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20let\x20r'+'0:\x20f32\x20=\x20i'+'ridescence'+'_iorToFres'+'nelScalar('+'iridescenc'+'eIor,\x20outs'+'ideIor);\x0a\x20'+'\x20\x20\x20let\x20r12'+':\x20f32\x20=\x20ir'+'idescence_'+'fresnelSca'+'lar(cosThe'+'ta,\x20r0);\x0a\x20'+'\x20\x20\x20let\x20r21'+':\x20f32\x20=\x20r1'+'2;\x0a\x20\x20\x20\x20let'+'\x20t121:\x20f32'+'\x20=\x201.0\x20-\x20r'+'12;\x0a\x0a\x20\x20\x20\x20l'+'et\x20phi12:\x20'+'f32\x20=\x20sele'+'ct(0.0,\x20PI'+',\x20iridesce'+'nceIor\x20<\x20o'+'utsideIor)'+';\x0a\x20\x20\x20\x20let\x20'+'phi21:\x20f32'+'\x20=\x20PI\x20-\x20ph'+'i12;\x0a\x0a\x20\x20\x20\x20'+'let\x20baseIo'+'r:\x20vec3f\x20='+'\x20iridescen'+'ce_fresnel'+'ToIor(base'+'_f0\x20+\x20vec3'+'f(0.0001))'+';\x0a\x20\x20\x20\x20let\x20'+'r1:\x20vec3f\x20'+'=\x20iridesce'+'nce_iorToF'+'resnelVec3'+'(baseIor,\x20'+'iridescenc'+'eIor);\x0a\x20\x20\x20'+'\x20let\x20r23:\x20'+'vec3f\x20=\x20ir'+'idescence_'+'fresnelVec'+'3(cosTheta'+'2,\x20r1);\x0a\x0a\x20'+'\x20\x20\x20let\x20phi'+'23:\x20vec3f\x20'+'=\x20select(v'+'ec3f(0.0),'+'\x20vec3f(PI)'+',\x20baseIor\x20'+'<\x20vec3f(ir'+'idescenceI'+'or));\x0a\x20\x20\x20\x20'+'let\x20opd:\x20f'+'32\x20=\x202.0\x20*'+'\x20iridescen'+'ceIor\x20*\x20ir'+'idescenceT')+('hickness\x20*'+'\x20cosTheta2'+';\x0a\x20\x20\x20\x20let\x20'+'phi:\x20vec3f'+'\x20=\x20vec3f(p'+'hi21)\x20+\x20ph'+'i23;\x20//\x20Pr'+'omote\x20scal'+'ar\x20phi21\x20t'+'o\x20vec3f\x0a\x0a\x20'+'\x20\x20\x20let\x20r12'+'3Sq:\x20vec3f'+'\x20=\x20clamp(v'+'ec3f(r12)\x20'+'*\x20r23,\x20vec'+'3f(1e-5),\x20'+'vec3f(0.99'+'99));\x0a\x20\x20\x20\x20'+'let\x20r123:\x20'+'vec3f\x20=\x20sq'+'rt(r123Sq)'+';\x0a\x20\x20\x20\x20let\x20'+'rs:\x20vec3f\x20'+'=\x20pow(vec3'+'f(t121),\x20v'+'ec3f(2.0))'+'\x20*\x20r23\x20/\x20('+'vec3f(1.0)'+'\x20-\x20r123Sq)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20c0:\x20vec3f'+'\x20=\x20vec3f(r'+'12)\x20+\x20rs;\x0a'+'\x20\x20\x20\x20var\x20i_'+'irid:\x20vec3'+'f\x20=\x20c0;\x0a\x0a\x20'+'\x20\x20\x20var\x20cm:'+'\x20vec3f\x20=\x20r'+'s\x20-\x20vec3f('+'t121);\x0a\x0a\x20\x20'+'\x20\x20cm\x20=\x20cm\x20'+'*\x20r123;\x0a\x20\x20'+'\x20\x20let\x20sm1:'+'\x20vec3f\x20=\x202'+'.0\x20*\x20iride'+'scence_sen'+'sitivity(1'+'.0\x20*\x20opd,\x20'+'1.0\x20*\x20phi)'+';\x0a\x20\x20\x20\x20i_ir'+'id\x20=\x20i_iri'+'d\x20+\x20cm\x20*\x20s'+'m1;\x0a\x0a\x20\x20\x20\x20c'+'m\x20=\x20cm\x20*\x20r'+'123;\x0a\x20\x20\x20\x20l'+'et\x20sm2:\x20ve'+'c3f\x20=\x202.0\x20'+'*\x20iridesce'+'nce_sensit'+'ivity(2.0\x20'+'*\x20opd,\x202.0'+'\x20*\x20phi);\x0a\x20'+'\x20\x20\x20i_irid\x20'+'=\x20i_irid\x20+'+'\x20cm\x20*\x20sm2;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20max(i_i'+'rid,\x20vec3f'+'(0.0));\x0a}\x0a'+'\x0afn\x20getIri'+'descenceDi'+'ffraction('+'cosTheta:\x20'+'f32,\x20specu'+'larity:\x20ve'+'c3f,\x20iride'+'scenceThic'+'kness:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),PM='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_irides'+'cence:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getIrid'+'escence()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'iridescenc'+'e\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_CON'+'STANT\x0a\x20\x20\x20\x20'+'iridescenc'+'e\x20=\x20irides'+'cence\x20*\x20un'+'iform.mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20=\x20iridesc'+'ence\x20*\x20tex'+'tureSample'+'Bias({STD_'+'IRIDESCENC'+'E_TEXTURE_'+'NAME},\x20{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_CHANNEL}'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dI'+'ridescence'+'\x20=\x20iridesc'+'ence;\x20\x0a}\x0a',MM='\x0auniform\x20m'+'aterial_ir'+'idescenceT'+'hicknessMa'+'x:\x20f32;\x0a\x0a#'+'ifdef\x20STD_'+'IRIDESCENC'+'ETHICKNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20uniform'+'\x20material_'+'iridescenc'+'eThickness'+'Min:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20blen'+'d:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_IRIDESCE'+'NCETHICKNE'+'SS_TEXTURE'+'_NAME},\x20{S'+'TD_IRIDESC'+'ENCETHICKN'+'ESS_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20iridesce'+'nceThickne'+'ss:\x20f32\x20=\x20'+'mix(unifor'+'m.material'+'_iridescen'+'ceThicknes'+'sMin,\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax,\x20bl'+'end);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceT'+'hickness:\x20'+'f32\x20=\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scenceThic'+'kness\x20=\x20ir'+'idescenceT'+'hickness;\x20'+'\x0a}\x0a',DM='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_refr'+'actionInde'+'x:\x20f32;\x0a#e'+'ndif\x0a\x0afn\x20g'+'etIor()\x20{\x0a'+'#ifdef\x20STD'+'_IOR_CONST'+'ANT\x0a\x20\x20\x20\x20dI'+'or\x20=\x20unifo'+'rm.materia'+'l_refracti'+'onIndex;\x0a#'+'else\x0a\x20\x20\x20\x20d'+'Ior\x20=\x201.0\x20'+'/\x201.5;\x0a#en'+'dif\x0a}\x0a',IM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_color'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_direction'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_POINT\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20poi'+'nt\x20lights\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20lig'+'ht{i}_posi'+'tion:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ra'+'dius:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'SPOT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_SPOT\x20//\x20'+'include\x20fu'+'nctionalit'+'y\x20for\x20spot'+'\x20lights\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_di'+'rection:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_inner'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_outer'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20//\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_FALLOFF_'+'SQUARED\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20inv'+'erse\x20squar'+'ed\x20falloff'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_position:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ha'+'lfWidth:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_halfHeigh'+'t:\x20vec3f;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}FALLOFF\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_LINE'+'AR\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20linear\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}FALLOFF'+'\x20==\x20INVERS'+'ESQUARED\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_SQUA'+'RED\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20inverse'+'\x20squared\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20shadow\x20c'+'asting\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowMatri'+'x:\x20mat4x4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20li'+'ght{i}_sha'+'dowIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'{i}_shadow'+'Params:\x20ve'+'c4f;\x20//\x20wi'+'dth,\x20heigh'+'t,\x20bias,\x20r'+'adius\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowSearc'+'hArea:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_cameraPar'+'ams:\x20vec4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'oftShadowP'+'arams:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'directiona'+'l\x20(cascade'+'d)\x20shadows'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20light{i}_'+'shadowMatr'+'ixPalette:'+'\x20array<mat'+'4x4f,\x204>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deDistance'+'s:\x20vec4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deCount:\x20i'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20light{'+'i}_shadowC'+'ascadeBlen'+'d:\x20f32;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20N'+'OT\x20SUPPORT'+'ED\x0a/*\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIG'+'HT{i}SHADO'+'W_PCF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMap:\x20tex'+'ture_depth'+'_2d;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'{i}_shadow'+'MapSampler'+':\x20sampler_'+'comparison'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'light{i}_s'+'hadowMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMapSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIGHT{i}CO'+'OKIE)\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_COOKIE\x20/'+'/\x20include\x20'+'functional'+'ity\x20for\x20co'+'okies\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20OMNI\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20NOT\x20SUPP'+'ORTED\x0a/*\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'plerCube\x20l'+'ight{i}_co'+'okie;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un')+('iform\x20floa'+'t\x20light{i}'+'_cookieInt'+'ensity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20!defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20light{i}'+'_shadowMat'+'rix;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20NO'+'T\x20SUPPORTE'+'D\x0a/*\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_cookie;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_cook'+'ieIntensit'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20!'+'defined(LI'+'GHT{i}CAST'+'SHADOW)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrix;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}COOKIE_TR'+'ANSFORM)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_coo'+'kieMatrix;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20vec2\x20'+'light{i}_c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a*/\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),LM='\x0afn\x20getLig'+'htDiffuse('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',RM='\x0afn\x20evalOm'+'niLight(li'+'ghtPosW:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20vP'+'ositionW\x20-'+'\x20lightPosW'+';\x0a}\x0a',OM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',FM='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0afn\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x20\x20\x20'+'\x20//\x20light\x20'+'color\x0a\x20\x20\x20\x20'+'var\x20lightC'+'olor:\x20vec3'+'f\x20=\x20unifor'+'m.light{i}'+'_color;\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20!d'+'efined(LIT'+'_SHADOW_CA'+'TCHER)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ea'+'rly\x20return'+'\x20if\x20the\x20li'+'ght\x20color\x20'+'is\x20black\x20('+'used\x20by\x20sh'+'adow\x20catch'+'er\x20-\x20this\x20'+'way\x20this\x20l'+'ight\x20is\x20ve'+'ry\x20cheap)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(all(ligh'+'tColor\x20==\x20'+'vec3f(0.0,'+'\x200.0,\x200.0)'+'))\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20DIRECTION'+'AL\x20//\x20dire'+'ctional\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightD'+'irNormW\x20=\x20'+'uniform.li'+'ght{i}_dir'+'ection;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20omni\x20o'+'r\x20spot\x20lig'+'ht\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(u'+'niform.lig'+'ht{i}_posi'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tDirNormW\x20'+'=\x20normaliz'+'e(lightDir'+'W);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIGHT'+'{i}COOKIE)'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20SPOT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_FAL'+'LOFF\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+('eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DXform(u'+'niform.lig'+'ht{i}_cook'+'ie,\x20unifor'+'m.light{i}'+'_shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_cookieIn'+'tensity,\x20u'+'niform.lig'+'ht{i}_cook'+'ieMatrix,\x20'+'uniform.li'+'ght{i}_coo'+'kieOffset)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookie2D('+'uniform.li'+'ght{i}_coo'+'kie,\x20unifo'+'rm.light{i'+'}_shadowMa'+'trix,\x20unif'+'orm.light{'+'i}_cookieI'+'ntensity).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClipXfo'+'rm(uniform'+'.light{i}_'+'cookie,\x20un'+'iform.ligh'+'t{i}_shado'+'wMatrix,\x20u'+'niform.lig'+'ht{i}_cook'+'ieIntensit'+'y,\x20uniform'+'.light{i}_'+'cookieMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieOff'+'set).{LIGH'+'T{i}COOKIE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClip(un'+'iform.ligh'+'t{i}_cooki'+'e,\x20uniform'+'.light{i}_'+'shadowMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieInt'+'ensity).{L'+'IGHT{i}COO'+'KIE_CHANNE'+'L};\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookieCub'+'e(uniform.'+'light{i}_c'+'ookie,\x20uni'+'form.light'+'{i}_shadow'+'Matrix,\x20un'+'iform.ligh'+'t{i}_cooki'+'eIntensity'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multipl'+'y\x20light\x20co'+'lor\x20by\x20the'+'\x20cookie\x20at'+'tenuation\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightCol'+'or\x20=\x20light'+'Color\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dista'+'nce\x20fallof'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20PUNCTUAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}FALLOF'+'F\x20==\x20LINEA'+'R\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20=\x20get'+'FalloffLin'+'ear(unifor'+'m.light{i}'+'_radius,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20getFal'+'loffInvSqu'+'ared(unifo'+'rm.light{i'+'}_radius,\x20'+'lightDirW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'non\x20punctu'+'al\x20lights\x20'+'only\x20gets\x20'+'the\x20range\x20'+'window\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20getFall'+'offWindow('+'uniform.li'+'ght{i}_rad'+'ius,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20angle'+'\x20falloff\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20SPO'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d')+('efined(LIG'+'HT{i}COOKI'+'E)\x20||\x20defi'+'ned(LIGHT{'+'i}COOKIE_F'+'ALLOFF)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20dAtten\x20'+'*\x20getSpotE'+'ffect(unif'+'orm.light{'+'i}_directi'+'on,\x20unifor'+'m.light{i}'+'_innerCone'+'Angle,\x20uni'+'form.light'+'{i}_outerC'+'oneAngle,\x20'+'dLightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20if\x20'+'(dAtten\x20<\x20'+'0.00001)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20evaluate\x20'+'area\x20light'+'\x20values\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20RECT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcRectLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20calcDiskL'+'ightValues'+'(uniform.l'+'ight{i}_po'+'sition,\x20un'+'iform.ligh'+'t{i}_halfW'+'idth,\x20unif'+'orm.light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20SPH'+'ERE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20calc'+'SphereLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20dif'+'fuse\x20light'+'ing\x20-\x20LTC\x20'+'lights\x20do\x20'+'not\x20mix\x20di'+'ffuse\x20ligh'+'ting\x20into\x20'+'attenuatio'+'n\x20that\x20aff'+'ects\x20specu'+'lar\x0a\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P')+('UNCTUAL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'attenDiffu'+'se\x20-\x20separ'+'ate\x20diffus'+'e\x20attenuat'+'ion\x20for\x20no'+'n-punctual'+'\x20light\x20sou'+'rces\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20NB:\x20A\x20bet'+'ter\x20approx'+'imation\x20pe'+'rhaps\x20usin'+'g\x20wrap\x20lig'+'hting\x20coul'+'d\x20be\x20imple'+'mented\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20at'+'tenDiffuse'+':\x20f32\x20=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x2016.0\x20is\x20'+'a\x20constant'+'\x20that\x20is\x20i'+'n\x20getFallo'+'ffInvSquar'+'ed()\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20attenDi'+'ffuse:\x20f32'+'\x20=\x20getRect'+'LightDiffu'+'se(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20light'+'DirW,\x20dLig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20DISK\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'attenDiffu'+'se:\x20f32\x20=\x20'+'getDiskLig'+'htDiffuse('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20lightDir'+'W,\x20dLightD'+'irNormW)\x20*'+'\x2016.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20LIGHT'+'{i}SHAPE\x20='+'=\x20SPHERE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20a'+'ttenDiffus'+'e:\x20f32\x20=\x20g'+'etSphereLi'+'ghtDiffuse'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20lightDi'+'rW,\x20dLight'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20one\x20par'+'ameter\x20is\x20'+'unused\x20for')+('\x20punctual\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20dAtten'+'\x20*\x20getLigh'+'tDiffuse(l'+'itArgs_wor'+'ldNormal,\x20'+'vec3(0.0),'+'\x20dLightDir'+'NormW);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20the\x20sha'+'dow\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}CASTS'+'HADOW\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20shadow:'+'\x20f32\x20=\x20get'+'Shadow{i}('+'vec3(0.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20shadow:\x20'+'f32\x20=\x20getS'+'hadow{i}(l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Ap'+'ply\x20shadow'+'\x20intensity'+'\x20to\x20the\x20sh'+'adow\x20value'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadow\x20=\x20mi'+'x(1.0,\x20sha'+'dow,\x20unifo'+'rm.light{i'+'}_shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20dA'+'tten\x20*\x20sha'+'dow;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'SHADOW_CAT'+'CHER)\x20&&\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20accumula'+'te\x20shadows'+'\x20for\x20direc'+'tional\x20lig'+'hts\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSha'+'dowCatcher'+'\x20=\x20dShadow'+'Catcher\x20*\x20'+'shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20-\x20they'+'\x20do\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((('+'attenDiffu'+'se\x20*\x20dAtte'+'n)\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20dLTC'+'SpecFres))')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'((attenDif'+'fuse\x20*\x20dAt'+'ten)\x20*\x20lig'+'htColor);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(AREA_'+'LIGHTS)\x20&&'+'\x20defined(L'+'IT_SPECULA'+'R)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((d'+'Atten\x20*\x20li'+'ghtColor)\x20'+'*\x20(1.0\x20-\x20l'+'itArgs_spe'+'cularity))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'(dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20spe'+'cular\x20ligh'+'ting\x0a\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}AFFECT'+'_SPECULARI'+'TY\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20==\x20REC'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getRe'+'ctLightSpe'+'cular(litA'+'rgs_clearc'+'oat_worldN'+'ormal,\x20dVi'+'ewDirW)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20=\x20ccSpec'+'ularLight\x20'+'+\x20(ccLTCSp'+'ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20SPHER'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_clea'+'rcoat_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20=\x20dS'+'pecularLig'+'ht\x20+\x20(dLTC'+'SpecFres\x20*'+'\x20getRectLi'+'ghtSpecula'+'r(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20(dLT'+'CSpecFres\x20'+'*\x20getDiskL'+'ightSpecul'+'ar(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW)\x20*\x20dAt'+'ten\x20*\x20ligh'+'tColor);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'=\x20dSpecula'+'rLight\x20+\x20('+'dLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20//\x20punctu'+'al\x20light\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20is\x20fr'+'esnel\x20need'+'ed\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC')+('TIONAL\x20&&\x20'+'LIT_FRESNE'+'L_MODEL\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ha'+'lfDirW:\x20ve'+'c3f\x20=\x20norm'+'alize(-dLi'+'ghtDirNorm'+'W\x20+\x20dViewD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20if\x20LTC\x20li'+'ghts\x20are\x20p'+'resent,\x20sp'+'ecular\x20mus'+'t\x20be\x20accum'+'ulated\x20wit'+'h\x20specular'+'ity\x20(specu'+'larity\x20is\x20'+'pre\x20multip'+'lied\x20by\x20pu'+'nctual\x20lig'+'ht\x20fresnel'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'specularCC'+':\x20vec3f\x20=\x20'+'getLightSp'+'ecular(hal'+'fDirW,\x20ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20dLightDir'+'NormW,\x20lit'+'Args_clear'+'coat_gloss'+',\x20dTBN)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightspecu'+'larCC\x20=\x20li'+'ghtspecula'+'rCC\x20*\x20getF'+'resnelCC(d'+'ot(dViewDi'+'rW,\x20halfDi'+'rW));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20=\x20ccSpecu'+'larLight\x20+'+'\x20lightspec'+'ularCC;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sSpecul'+'arLight\x20=\x20'+'sSpecularL'+'ight\x20+\x20(ge'+'tLightSpec'+'ularSheen('+'halfDirW,\x20'+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20dLightDi')+('rNormW,\x20li'+'tArgs_shee'+'n_gloss)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tSpecular:'+'\x20vec3f\x20=\x20g'+'etLightSpe'+'cular(half'+'DirW,\x20dRef'+'lDirW,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20d'+'LightDirNo'+'rmW,\x20litAr'+'gs_gloss,\x20'+'dTBN)\x20*\x20dA'+'tten\x20*\x20lig'+'htColor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'FRESNEL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20=\x20li'+'ghtSpecula'+'r\x20*\x20getFre'+'snel(dot(d'+'ViewDirW,\x20'+'halfDirW),'+'\x20litArgs_g'+'loss,\x20litA'+'rgs_specul'+'arity,\x20iri'+'descenceFr'+'esnel,\x20lit'+'Args_iride'+'scence_int'+'ensity);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightSpecul'+'ar\x20=\x20light'+'Specular\x20*'+'\x20getFresne'+'l(dot(dVie'+'wDirW,\x20hal'+'fDirW),\x20li'+'tArgs_glos'+'s,\x20litArgs'+'_speculari'+'ty);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20light'+'Specular\x20='+'\x20lightSpec'+'ular\x20*\x20lit'+'Args_specu'+'larity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20+\x20li'+'ghtSpecula'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'#endif\x0a'),NM='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowSam'+'pleCoord{i'+'}(shadowTr'+'ansform:\x20m'+'at4x4f,\x20sh'+'adowParams'+':\x20vec4f,\x20w'+'orldPositi'+'on:\x20vec3f,'+'\x20lightPos:'+'\x20vec3f,\x20li'+'ghtDir:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'lightDirNo'+'rm:\x20vec3f,'+'\x20normal:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'surfacePos'+'ition\x20=\x20wo'+'rldPositio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_POINT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+'NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(*l'+'ightDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20surfac'+'ePosition\x20'+'+\x20normal\x20*'+'\x20shadowPar'+'ams.y\x20*\x20cl'+'amp(1.0\x20-\x20'+'dot(normal'+',\x20-lightDi'+'rNorm),\x200.'+'0,\x201.0)\x20*\x20'+'distScale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20*li'+'ghtDir\x20=\x20s'+'urfacePosi'+'tion\x20-\x20lig'+'htPos;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'*lightDir;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}_SHADOW_'+'SAMPLE_NOR'+'MAL_OFFSET'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_SAMP'+'LE_ORTHO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dis'+'tScale:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20distSca'+'le:\x20f32\x20=\x20'+'abs(dot(vP'+'ositionW\x20-'+'\x20lightPos,'+'\x20lightDirN'+'orm));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Use'+'\x20var\x20for\x20m'+'odificatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20po'+'sitionInSh'+'adowSpace:'+'\x20vec4f\x20=\x20s'+'hadowTrans'+'form\x20*\x20vec'+'4f(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM')+('PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20=\x20pos'+'itionInSha'+'dowSpace.x'+'yz\x20/\x20posit'+'ionInShado'+'wSpace.w;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20position'+'InShadowSp'+'ace.xy\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xy\x20/\x20posi'+'tionInShad'+'owSpace.w;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20positionI'+'nShadowSpa'+'ce.z\x20=\x20len'+'gth(*light'+'Dir)\x20*\x20sha'+'dowParams.'+'w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20this\x20is\x20c'+'urrently\x20u'+'nused\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SHADO'+'W_SAMPLE_Z'+'_BIAS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20posit'+'ionInShado'+'wSpace.z\x20+'+'=\x20getShado'+'wBias(shad'+'owParams.x'+',\x20shadowPa'+'rams.z);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20sur'+'facePositi'+'on;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20evalu'+'ation\x20func'+'tion\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'w{i}(light'+'DirW_in:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20s'+'hadow\x20casc'+'ades\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_CASC'+'ADES\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20select\x20sh'+'adow\x20casca'+'de\x20matrix\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20casc'+'adeIndex:\x20'+'i32\x20=\x20getS'+'hadowCasca'+'deIndex(un'+'iform.ligh'+'t{i}_shado'+'wCascadeDi'+'stances,\x20u'+'niform.lig'+'ht{i}_shad')+('owCascadeC'+'ount);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_CASCADE'+'_BLEND\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20cascade'+'Index\x20=\x20di'+'therShadow'+'CascadeInd'+'ex(cascade'+'Index,\x20uni'+'form.light'+'{i}_shadow'+'CascadeDis'+'tances,\x20un'+'iform.ligh'+'t{i}_shado'+'wCascadeCo'+'unt,\x20unifo'+'rm.light{i'+'}_shadowCa'+'scadeBlend'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowMatri'+'x:\x20mat4x4f'+'\x20=\x20uniform'+'.light{i}_'+'shadowMatr'+'ixPalette['+'cascadeInd'+'ex];\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20sha'+'dowMatrix:'+'\x20mat4x4f\x20='+'\x20uniform.l'+'ight{i}_sh'+'adowMatrix'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20lightDirA'+'rg\x20=\x20light'+'DirW_in;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20direc'+'tional\x20lig'+'ht\x20does\x20no'+'t\x20have\x20a\x20p'+'osition\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20getSh'+'adowSample'+'Coord{i}(s'+'hadowMatri'+'x,\x20uniform'+'.light{i}_'+'shadowPara'+'ms,\x20vPosit'+'ionW,\x20vec3'+'f(0.0),\x20&l'+'ightDirArg'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owCoord:\x20v'+'ec3f\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_shadowPa'+'rams,\x20vPos'+'itionW,\x20un'+'iform.ligh'+'t{i}_posit'+'ion,\x20&ligh'+'tDirArg,\x20d'+'LightDirNo'+'rmW,\x20dVert'+'exNormalW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('#endif\x0a\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Fade\x20direc'+'tional\x20sha'+'dow\x20at\x20the'+'\x20far\x20dista'+'nce\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'owCoord\x20=\x20'+'fadeShadow'+'(shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowCas'+'cadeDistan'+'ces);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20-----\x20s'+'ample\x20the\x20'+'shadow\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20---'+'--\x20directi'+'onal\x20light'+'\x20-----\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20VSM_'+'16F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowVSM1'+'6(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s,\x205.54);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20VS'+'M_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowVS'+'M32(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x2015.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2f(lengt'+'h(uniform.'+'light{i}_h'+'alfWidth),'+'\x20length(un'+'iform.ligh'+'t{i}_halfH'+'eight))\x20*\x20'+'uniform.li'+'ght{i}_sha'+'dowSearchA'+'rea;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCSS(ligh'+'t{i}_shado'+'wMap,\x20ligh'+'t{i}_shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20unif'+'orm.light{'+'i}_shadowP'+'arams,\x20uni'+'form.light'+'{i}_camera'+'Params,\x20sh'+'adowSearch'+'Area,\x20ligh'+'tDirW_in);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CSS(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x20unifo'+'rm.light{i'+'}_cameraPa'+'rams,\x20unif'+'orm.light{'+'i}_softSha'+'dowParams,'+'\x20lightDirW'+'_in);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF1_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF1x1('+'light{i}_s'+'hadowMap,\x20'+'light{i}_s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'uniform.li'+'ght{i}_sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_16F\x20|'+'|\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF3_3'+'2F\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowPCF3x'+'3(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_16F'+'\x20||\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF5')+('_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x20//\x20-'+'----\x20spot\x20'+'light\x20----'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM16'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x205.54,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM32'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x2015.0,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20!=\x20PU'+'NCTUAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f\x20=\x20vec'+'2f(length('+'uniform.li'+'ght{i}_hal'+'fWidth),\x20l'+'ength(unif'+'orm.light{'+'i}_halfHei'+'ght))\x20*\x20un'+'iform.ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowSearc'+'hArea:\x20vec')+('2f\x20=\x20vec2f'+'(uniform.l'+'ight{i}_sh'+'adowSearch'+'Area);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCSS'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x20uniform.'+'light{i}_c'+'ameraParam'+'s,\x20shadowS'+'earchArea,'+'\x20lightDirW'+'_in);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'16F\x20||\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF1_32F\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF1x1'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'5_16F\x20||\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF5_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCF5'+'x5(light{i'+'}_shadowMa'+'p,\x20light{i'+'}_shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20uniform'+'.light{i}_'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20')+('\x20\x20\x20#endif\x0a'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x20//\x20--'+'---\x20omni\x20l'+'ight\x20-----'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f;\x20//\x20U'+'se\x20var\x20bec'+'ause\x20assig'+'ned\x20in\x20if/'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owSearchAr'+'ea:\x20vec2f\x20'+'=\x20vec2f(le'+'ngth(unifo'+'rm.light{i'+'}_halfWidt'+'h),\x20length'+'(uniform.l'+'ight{i}_ha'+'lfHeight))'+'\x20*\x20uniform'+'.light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'SearchArea'+':\x20vec2f\x20=\x20'+'vec2f(unif'+'orm.light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20un'+'iform.ligh'+'t{i}_camer'+'aParams,\x20s'+'hadowSearc'+'hArea,\x20lig'+'htDirW_in)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in')+(');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),kM='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'var\x20areaLi'+'ghtsLutTex'+'1:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20areaLight'+'sLutTex2:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20areaL'+'ightsLutTe'+'x2Sampler:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'omni\x20/\x20spo'+'t\x20PCSS\x20is\x20'+('not\x20suppor'+'ted\x20on\x20Web'+'GPU\x20curren'+'tly,\x20as\x20th'+'is\x20is\x20only'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0a\x20\x20\x20\x20'+'//\x20#includ'+'e\x20\x22shadowP'+'CSSPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22shadowSof'+'tPS\x22\x0a#endi'+'f\x0a\x0a#if\x20def'+'ined(SHADO'+'W_KIND_VSM'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owEVSMPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22falloff'+'LinearPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_SQUARED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fallof'+'fInvSquare'+'dPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_CODE_L'+'IGHTS_POIN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDirPointP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22spotPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'CODE_COOKI'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22cook'+'iePS\x22\x0a#end'+'if\x0a\x0a//\x20clu'+'stered\x20lig'+'hting\x0a#ifd'+'ef\x20LIT_CLU'+'STERED_LIG'+'HTS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22cl'+'usteredLig'+'htPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIGHT_COU'+'NT\x20>\x200\x0a\x20\x20\x20'+'\x20//\x20LOOP\x20-'+'\x20generate\x20'+'shadow\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionShadow'+'PS,\x20LIGHT_'+'COUNT\x22\x0a\x0a\x20\x20'+'\x20\x20//\x20LOOP\x20'+'-\x20generate'+'\x20light\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionLightP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a'),UM='\x0afn\x20addLig'+'htMap(\x0a\x20\x20\x20'+'\x20lightmap:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20dir:\x20vec'+'3f,\x0a\x20\x20\x20\x20wo'+'rldNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20viewDir:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20reflecti'+'onDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20ve'+'rtexNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20tbn:\x20ma'+'t3x3f\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20iridesce'+'nceIntensi'+'ty:\x20f32\x0a#e'+'ndif\x0a)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x20&&'+'\x20defined(L'+'IT_DIR_LIG'+'HTMAP)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'dot(dir,\x20d'+'ir)\x20<\x200.00'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20dD'+'iffuseLigh'+'t\x20+\x20lightm'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20vli'+'ght:\x20f32\x20='+'\x20saturate('+'dot(dir,\x20-'+'vertexNorm'+'al));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20flight:\x20'+'f32\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20nlig'+'ht:\x20f32\x20=\x20'+'(flight\x20/\x20'+'max(vlight'+',\x200.01))\x20*'+'\x200.5;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20=\x20dDiff'+'useLight\x20+'+'\x20lightmap\x20'+'*\x20nlight\x20*'+'\x202.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20halfDir'+':\x20vec3f\x20=\x20'+'normalize('+'-dir\x20+\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20specula'+'rLight:\x20ve'+'c3f\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+('_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'=\x20specular'+'Light\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(d'+'ot(viewDir'+',\x20halfDir)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gloss,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20,\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceI'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20specularL'+'ight;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'non-direct'+'ional\x20ligh'+'tmap\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20+\x20ligh'+'tmap;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),BM='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'var<privat'+'e>\x20dLightm'+'apDir:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'dirLightMa'+'p:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_dirL'+'ightMapSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0afn\x20getL'+'ightMap()\x20'+'{\x0a\x0a\x20\x20\x20\x20dLi'+'ghtmap\x20=\x20v'+'ec3f(1.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_TEXTURE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Lightmap\x20='+'\x20dLightmap'+'\x20*\x20{STD_LI'+'GHT_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_LIGHT_T'+'EXTURE_NAM'+'E},\x20{STD_L'+'IGHT_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+')).{STD_LI'+'GHT_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_LIGHTMAP'+'_DIR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20dir:\x20vec3'+'f\x20=\x20textur'+'eSampleBia'+'s(texture_'+'dirLightMa'+'p,\x20texture'+'_dirLightM'+'apSampler,'+'\x20{STD_LIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).xyz\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20d'+'irDot\x20=\x20do'+'t(dir,\x20dir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tmapDir\x20=\x20'+'select(vec'+'3(0.0),\x20di'+'r\x20/\x20sqrt(d'+'irDot),\x20di'+'rDot\x20>\x200.0'+'01);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dL'+'ightmap\x20=\x20'+'dLightmap\x20'+'*\x20saturate'+'(vVertexCo'+'lor.{STD_L'+'IGHT_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a',zM='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'fn\x20calcLig'+'htSpecular'+'(gloss:\x20f3'+'2,\x20worldNo'+'rmal:\x20vec3'+'f,\x20viewDir'+':\x20vec3f,\x20h'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'tbn:\x20mat3x'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20PI:\x20f32\x20='+'\x203.1415926'+'53589793;\x0a'+'\x20\x20\x20\x20let\x20ro'+'ughness:\x20f'+'32\x20=\x20max(('+'1.0\x20-\x20glos'+'s)\x20*\x20(1.0\x20'+'-\x20gloss),\x20'+'0.001);\x0a\x20\x20'+'\x20\x20let\x20alph'+'aRoughness'+':\x20f32\x20=\x20ro'+'ughness\x20*\x20'+'roughness;'+'\x0a\x20\x20\x20\x20let\x20a'+'nisotropy:'+'\x20f32\x20=\x20dAn'+'isotropy;\x0a'+'\x20\x20\x20\x20let\x20di'+'rection:\x20v'+'ec2f\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x0a\x20'+'\x20\x20\x20let\x20at:'+'\x20f32\x20=\x20mix'+'(alphaRoug'+'hness,\x201.0'+',\x20anisotro'+'py\x20*\x20aniso'+'tropy);\x0a\x20\x20'+'\x20\x20let\x20ab:\x20'+'f32\x20=\x20clam'+'p(alphaRou'+'ghness,\x200.'+'001,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20NoH:\x20f32\x20'+'=\x20dot(worl'+'dNormal,\x20h'+');\x0a\x20\x20\x20\x20let'+'\x20ToH:\x20f32\x20'+'=\x20dot(anis'+'otropicT,\x20'+'h);\x0a\x20\x20\x20\x20le'+'t\x20BoH:\x20f32'+'\x20=\x20dot(ani'+'sotropicB,'+'\x20h);\x0a\x0a\x20\x20\x20\x20'+'let\x20a2:\x20f3'+'2\x20=\x20at\x20*\x20a'+'b;\x0a\x20\x20\x20\x20let'+'\x20v:\x20vec3f\x20'+'=\x20vec3f(ab'+'\x20*\x20ToH,\x20at'+'\x20*\x20BoH,\x20a2'+'\x20*\x20NoH);\x0a\x20'+'\x20\x20\x20let\x20v2:'+'\x20f32\x20=\x20dot'+'(v,\x20v);\x0a\x20\x20'+'\x20\x20let\x20w2:\x20'+'f32\x20=\x20a2\x20/'+'\x20v2;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20let\x20To'+'V:\x20f32\x20=\x20d'+'ot(anisotr'+'opicT,\x20vie'+('wDir);\x0a\x20\x20\x20'+'\x20let\x20BoV:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20viewDi'+'r);\x0a\x20\x20\x20\x20le'+'t\x20ToL:\x20f32'+'\x20=\x20dot(ani'+'sotropicT,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20let\x20BoL:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20let\x20No'+'V:\x20f32\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'let\x20NoL:\x20f'+'32\x20=\x20dot(w'+'orldNormal'+',\x20-lightDi'+'rNorm);\x0a\x0a\x20'+'\x20\x20\x20let\x20lam'+'bdaV:\x20f32\x20'+'=\x20NoL\x20*\x20le'+'ngth(vec3f'+'(at\x20*\x20ToV,'+'\x20ab\x20*\x20BoV,'+'\x20NoV));\x0a\x20\x20'+'\x20\x20let\x20lamb'+'daL:\x20f32\x20='+'\x20NoV\x20*\x20len'+'gth(vec3f('+'at\x20*\x20ToL,\x20'+'ab\x20*\x20BoL,\x20'+'NoL));\x0a\x20\x20\x20'+'\x20let\x20G:\x20f3'+'2\x20=\x200.5\x20/\x20'+'(lambdaV\x20+'+'\x20lambdaL);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20D\x20*\x20G;\x0a'+'}\x0a\x0afn\x20getL'+'ightSpecul'+'ar(h:\x20vec3'+'f,\x20reflDir'+':\x20vec3f,\x20w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'DirNorm:\x20v'+'ec3f,\x20glos'+'s:\x20f32,\x20tb'+'n:\x20mat3x3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20calcLigh'+'tSpecular('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir,\x20h'+',\x20lightDir'+'Norm,\x20tbn)'+';\x0a}\x0a'),VM='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afn\x20c'+'alcLightSp'+'ecular(glo'+'ss:\x20f32,\x20w'+'orldNormal'+':\x20vec3f,\x20h'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20nh:\x20'+'f32\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'specPow:\x20f'+'32\x20=\x20exp2('+'gloss\x20*\x2011'+'.0);\x20//\x20gl'+'ossiness\x20i'+'s\x20linear,\x20'+'power\x20is\x20n'+'ot;\x200\x20-\x2020'+'48\x0a\x0a\x20\x20\x20\x20//'+'\x20Hack:\x20On\x20'+'Mac\x20OS\x20X,\x20'+'calling\x20po'+'w\x20with\x20zer'+'o\x20for\x20the\x20'+'exponent\x20g'+'enerates\x20h'+'ideous\x20art'+'ifacts\x20so\x20'+'bias\x20up\x20a\x20'+'little\x0a\x20\x20\x20'+'\x20specPow\x20='+'\x20max(specP'+'ow,\x200.0001'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20pow(n'+'h,\x20specPow'+')\x20*\x20(specP'+'ow\x20+\x202.0)\x20'+'/\x208.0;\x0a}\x0a\x0a'+'fn\x20getLigh'+'tSpecular('+'h:\x20vec3f,\x20'+'reflDir:\x20v'+'ec3f,\x20worl'+'dNormal:\x20v'+'ec3f,\x20view'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20tbn:\x20'+'mat3x3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',GM='\x0a\x0afn\x20sheen'+'D(normal:\x20'+'vec3f,\x20h:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'PI:\x20f32\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20let\x20inv'+'R:\x20f32\x20=\x201'+'.0\x20/\x20(roug'+'hness\x20*\x20ro'+'ughness);\x0a'+'\x20\x20\x20\x20var\x20co'+'s2h:\x20f32\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20=\x20c'+'os2h\x20*\x20cos'+'2h;\x0a\x20\x20\x20\x20le'+'t\x20sin2h:\x20f'+'32\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'fn\x20sheenV('+'normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20light:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20max(dot'+'(normal,\x20v'+'iewDir),\x200'+'.000001);\x0a'+'\x20\x20\x20\x20let\x20No'+'L:\x20f32\x20=\x20m'+'ax(dot(nor'+'mal,\x20light'+'),\x200.00000'+'1);\x0a\x20\x20\x20\x20re'+'turn\x201.0\x20/'+'\x20(4.0\x20*\x20(N'+'oL\x20+\x20NoV\x20-'+'\x20NoL\x20*\x20NoV'+'));\x0a}\x0a\x0afn\x20'+'getLightSp'+'ecularShee'+'n(h:\x20vec3f'+',\x20worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f,\x20li'+'ghtDirNorm'+':\x20vec3f,\x20s'+'heenGloss:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20let\x20V:\x20f'+'32\x20=\x20sheen'+'V(worldNor'+'mal,\x20viewD'+'ir,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20return'+'\x20D\x20*\x20V;\x0a}',HM='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afn\x20linear'+'izeDepthWi'+'thParams(z'+':\x20f32,\x20cam'+'eraParams:'+'\x20vec4f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20if\x20(camer'+'aParams.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(came'+'raParams.z'+'\x20*\x20cameraP'+'arams.y)\x20/'+'\x20(cameraPa'+'rams.y\x20+\x20z'+'\x20*\x20(camera'+'Params.z\x20-'+'\x20cameraPar'+'ams.y));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20cam'+'eraParams.'+'z\x20+\x20z\x20*\x20(c'+'ameraParam'+'s.y\x20-\x20came'+'raParams.z'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0a#ifndef\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20#de'+'fine\x20CAMER'+'APLANES\x0a\x20\x20'+'\x20\x20uniform\x20'+'camera_par'+'ams:\x20vec4f'+';\x20\x20\x20//\x20x:\x20'+'1\x20/\x20camera'+'_far,\x20\x20\x20\x20\x20'+'\x20y:\x20camera'+'_far,\x20\x20\x20\x20\x20'+'z:\x20camera_'+'near,\x20\x20\x20\x20\x20'+'\x20\x20\x20w:\x20is_o'+'rtho\x0a#endi'+'f\x0a\x0afn\x20line'+'arizeDepth'+'(z:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pthWithPar'+'ams(z,\x20uni'+'form.camer'+'a_params);'+'\x0a}\x0a#endif\x20'+'//\x20LINEARI'+'ZE_DEPTH\x0a',WM='\x0afn\x20evalua'+'teBackend('+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'//\x20apply\x20S'+'SAO\x20during'+'\x20lighting\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SSAO\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_ao\x20='+'\x20litArgs_a'+'o\x20*\x20textur'+'eSampleLev'+'el(ssaoTex'+'ture,\x20ssao'+'TextureSam'+'pler,\x20pcPo'+'sition.xy\x20'+'*\x20uniform.'+'ssaoTextur'+'eSizeInv,\x20'+'0.0).r;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nsform\x20tan'+'gent\x20space'+'\x20normals\x20t'+'o\x20world\x20sp'+'ace\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_N'+'EEDS_NORMA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getReflD'+'ir(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20litAr'+'gs_gloss,\x20'+'dTBN);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'DirW\x20=\x20nor'+'malize(-re'+'flect(dVie'+'wDirW,\x20lit'+'Args_clear'+'coat_world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'f0:\x20f32\x20=\x20'+'1.0\x20/\x20litA'+'rgs_ior;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20f0\x20=\x20(f0\x20'+'-\x201.0)\x20/\x20('+'f0\x20+\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20f0\x20=\x20f0'+'\x20*\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+('ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceF'+'resnel:\x20ve'+'c3f\x20=\x20getI'+'ridescence'+'Diffractio'+'n(saturate'+'(dot(dView'+'DirW,\x20litA'+'rgs_worldN'+'ormal)),\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_ir'+'idescence_'+'thickness)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20ambi'+'ent\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddAmbient('+'litArgs_wo'+'rldNormal)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20=\x20d'+'DiffuseLig'+'ht\x20*\x20(1.0\x20'+'-\x20litArgs_'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20move\x20ambi'+'ent\x20color\x20'+'out\x20of\x20dif'+'fuse\x20(used'+'\x20by\x20Lightm'+'apper,\x20to\x20'+'multiply\x20a'+'mbient\x20col'+'or\x20by\x20accu'+'mulated\x20AO'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SEPARATE_'+'AMBIENT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20dAmbie'+'ntLight:\x20v'+'ec3f\x20=\x20dDi'+'ffuseLight'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'vec3(0.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20unif'+'orm.materi'+'al_ambient'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20LI'+'T_OCCLUDE_'+'DIRECT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeDiff'+'use(litArg'+'s_ao);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTMAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20litArgs_l'+'ightmap,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmapDi'+'r,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dViewDirW,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dReflD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dVertexNor'+'malW,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'BN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_irides'+'cence_inte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTING\x20||'+'\x20LIT_REFLE'+'CTIONS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddReflecti'+'onCC(ccRef'+'lDirW,\x20lit'+'Args_clear'+'coat_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'ccFresnel\x20'+'=\x20getFresn'+'elCC(dot(d'+'ViewDirW,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccRefle'+'ction\x20=\x20cc'+'Reflection'+'\x20*\x20ccFresn'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccFr'+'esnel\x20=\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'ection\x20=\x20c'+'cReflectio'+'n\x20*\x20litArg'+'s_specular'+'ityFactor;')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20addR'+'eflectionS'+'heen(litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20lit'+'Args_sheen'+'_gloss);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20Fresne'+'l\x20has\x20to\x20b'+'e\x20applied\x20'+'to\x20reflect'+'ions\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'Reflection'+'(dReflDirW'+',\x20litArgs_'+'gloss);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_FRESNEL_'+'MODEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction.rgb\x20'+'*\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'dReflectio'+'n.rgb\x20*\x20li'+'tArgs_spec'+'ularity,\x20d'+'Reflection'+'.a);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve')+('c4f(dRefle'+'ction.rgb\x20'+'*\x20litArgs_'+'specularit'+'yFactor,\x20d'+'Reflection'+'.a);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20AREA'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20*'+'\x20litArgs_s'+'pecularity'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20evalua'+'te\x20materia'+'l\x20based\x20ar'+'ea\x20lights\x20'+'data,\x20shar'+'ed\x20by\x20all\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcLTCLight'+'Values(lit'+'Args_gloss'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20litArg'+'s_specular'+'ity,\x20litAr'+'gs_clearco'+'at_gloss,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20evalua'+'te\x20all\x20non'+'-clustered'+'\x20lights\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22lightEval'+'uationPS,\x20'+'LIGHT_COUN'+'T\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'USTERED_LI'+'GHTS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'ClusteredL'+'ights(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dR'+'eflDirW,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_CLEARCOAT'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20ccRe'+'flDirW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'litArgs_sp'+'ecularity,'+'\x20dVertexNo'+'rmalW,\x20dTB'+'N,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_g'+'loss,\x20litA'+'rgs_sheen_'+'gloss,\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20AREA_LI'+'GHTS\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x20has'+'\x20to\x20be\x20acc'+'umulated\x20d'+'ifferently'+'\x20if\x20we\x20wan'+'t\x20area\x20lig'+'hts\x20to\x20loo'+'k\x20correct\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_clearc'+'oat_specul'+'arity\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20vec3(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addRefra'+'ction(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_worldNorm'+'al,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dViewDirW'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_specu'+'larity,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr')+('gs_albedo,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_tran'+'smission,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_ior,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_dispers'+'ion\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'ambient\x20oc'+'clusion\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_OCCLU'+'DE_DIRECT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeD'+'iffuse(lit'+'Args_ao);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeSpec'+'ular(litAr'+'gs_gloss,\x20'+'litArgs_ao'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20*\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20!defi'+'ned(LIT_OP'+'ACITY_FADE'+'S_SPECULAR'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'==\x20NORMAL\x20'+'||\x20LIT_BLE'+'ND_TYPE\x20=='+'\x20PREMULTIP'+'LIED\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specLum:'+'\x20f32\x20=\x20dot'+'((dSpecula'+'rLight\x20+\x20d'+'Reflection'+'.rgb\x20*\x20dRe'+'flection.a'+'),\x20vec3f(\x20'+'0.2126,\x200.'+'7152,\x200.07'+'22\x20));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'Lum\x20=\x20spec'+'Lum\x20+\x20dot('+'ccSpecular'+'Light\x20*\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20+\x20'+'ccReflecti'+'on\x20*\x20litAr'+'gs_clearco'+'at_specula'+'rity,\x20vec3'+'f(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20c'+'lamp(litAr'+'gs_opacity'+'\x20+\x20gammaCo'+'rrectInput'+'(specLum),'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_opaci'+'ty\x20=\x20litAr'+'gs_opacity'+'\x20*\x20uniform'+'.material_'+'alphaFade;'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20end\x20chunk'+'s\x20-\x20when\x20b'+'aking\x20ligh'+'tmap\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTMAP_B'+'AKING\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_COLOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22b'+'akeLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_LIGH'+'TMAP_BAKIN'+'G_DIR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22ba'+'keDirLmEnd'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'end\x20chunks'+'\x20-\x20in\x20all\x20'+'other\x20case'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'endPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22outpu'+'tAlphaPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_MSD'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20apply'+'Msdf(outpu'+'t.color);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22outp'+'utPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'debugOutpu'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHADOW_CA'+'TCHER\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20when\x20t'+'he\x20shadow\x20'+'catcher\x20is'+'\x20enabled\x20-'+'\x20accumulat'+'ed\x20shadows')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'vec3f(dSha'+'dowCatcher'+'),\x20output.'+'color.a);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),$M='\x0a\x0a//\x20globa'+'ls\x0avar<pri'+'vate>\x20sRef'+'lection:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'VertexNorm'+'alW:\x20vec3f'+';\x0avar<priv'+'ate>\x20dTang'+'entW:\x20vec3'+'f;\x0avar<pri'+'vate>\x20dBin'+'ormalW:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dV'+'iewDirW:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'ReflDirW:\x20'+'vec3f;\x0avar'+'<private>\x20'+'ccReflDirW'+':\x20vec3f;\x0a\x0a'+'//\x20Per-lig'+'ht\x20tempora'+'ries\x0avar<p'+'rivate>\x20dL'+'ightDirNor'+'mW:\x20vec3f;'+'\x0avar<priva'+'te>\x20dAtten'+':\x20f32;\x0a\x0a//'+'\x20Outputs\x0av'+'ar<private'+'>\x20dTBN:\x20ma'+'t3x3f;\x0avar'+'<private>\x20'+'dReflectio'+'n:\x20vec4f;\x0a'+'var<privat'+'e>\x20dDiffus'+'eLight:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccFres'+'nel:\x20f32;\x0a'+'var<privat'+'e>\x20ccRefle'+'ction:\x20vec'+'3f;\x0avar<pr'+'ivate>\x20ccS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccSpec'+'ularityNoF'+'res:\x20f32;\x0a'+'var<privat'+'e>\x20sSpecul'+'arLight:\x20v'+'ec3f;\x0a\x0a//\x20'+'FRAGMENT\x20S'+'HADER\x20INPU'+'TS:\x20UNIFOR'+'MS\x0a\x0a#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_dis'+'persion:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_al'+'phaFade:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_SSAO\x0a\x20\x20'+'\x20\x20var\x20ssao'+'Texture\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20ssaoT'+'extureSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20u'+'niform\x20ssa'+'oTextureSi'+'zeInv:\x20vec'+'2f;\x0a#endif'+'\x0a\x0a//\x20light'+'ing\x20and\x20sh'+'adowing\x20de'+('clarations'+'\x0a\x0a#ifdef\x20L'+'IT_SHADOW_'+'CATCHER\x0a\x20\x20'+'\x20\x20//\x20a\x20var'+'iable\x20to\x20a'+'ccumulate\x20'+'shadows\x20fo'+'r\x20shadow\x20c'+'atcher\x20mat'+'erials\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dShado'+'wCatcher:\x20'+'f32\x20=\x201.0;'+'\x0a#endif\x0a\x0a/'+'/\x20LOOP\x20-\x20u'+'niform\x20dec'+'larations\x20'+'for\x20all\x20no'+'n-clustere'+'d\x20lights\x0a#'+'if\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightDe'+'clarationP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'f\x20LIT_FRES'+'NEL_MODEL\x20'+'==\x20NONE\x20&&'+'\x20!defined('+'LIT_REFLEC'+'TIONS)\x20&&\x20'+'!defined(L'+'IT_DIFFUSE'+'_MAP)\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_OLD'+'_AMBIENT\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0a//'+'\x20lightmap\x20'+'baking\x0a#if'+'def\x20STD_LI'+'GHTMAP_DIR'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20bakeDir'+':\x20f32;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_ADD_AMBIE'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20ambie'+'ntBakeOccl'+'usionContr'+'ast:\x20f32;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20ambientB'+'akeOcclusi'+'onBrightne'+'ss:\x20f32;\x0a#'+'endif\x0a'),XM='\x0a\x0a@fragmen'+'t\x0afn\x20fragm'+'entMain(in'+'put:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ccSpecular'+'Light\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20cc'+'Reflection'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_N'+'ONE_SLICE_'+'MODE\x20==\x20SL'+'ICED\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22startNi'+'neSlicedPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20LIT_NONE'+'_SLICE_MOD'+'E\x20==\x20TILED'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'tartNineSl'+'icedTiledP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'NEEDS_NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dVertexNo'+'rmalW\x20=\x20no'+'rmalize(vN'+'ormalW);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_T'+'ANGENTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_HEIG'+'HTS)\x20||\x20de'+'fined(LIT_'+'USE_NORMAL'+'S)\x20||\x20defi'+'ned(LIT_US'+'E_CLEARCOA'+'T_NORMALS)'+'\x20||\x20define'+'d(LIT_GGX_'+'SPECULAR)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dTan'+'gentW\x20=\x20vT'+'angentW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dBino'+'rmalW\x20=\x20vB'+'inormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20getView'+'Dir();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_TBN'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getTBN('+'dTangentW,'+'\x20dBinormal'+'W,\x20dVertex'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'andleTwoSi'+'dedLightin'+'g();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+('\x0a\x20\x20\x20\x20//\x20in'+'voke\x20front'+'end\x20functi'+'ons\x0a\x20\x20\x20\x20ev'+'aluateFron'+'tend();\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22debugPr'+'ocessFront'+'endPS\x22\x0a\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput\x20='+'\x20evaluateB'+'ackend();\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainEndP'+'S\x22\x0a\x0a\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a}\x0a'),qM='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20material_'+'ambient:\x20v'+'ec3f;\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_LIGHTING'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22light'+'SpecularAn'+'isoGGXPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tSpecularB'+'linnPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0a#include'+'\x20\x22combineP'+'S\x22\x0a\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapAddP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22am'+'bientPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_MS'+'DF\x0a\x20\x20\x20\x20#in'+'clude\x20\x22msd'+'fPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22viewDirPS'+'\x22\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_GGX_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirAni'+'soPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22reflDirP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20f'+'unctionali')+('ty\x0a#includ'+'e\x20\x22lightin'+'gPS\x22\x0a\x0a'),jM='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',YM='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',KM='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a#endif'+'\x0a\x0a#ifdef\x20N'+'INESLICED\x0a'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vMask:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20varying\x20v'+'TiledUv:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dMaskG'+'lobal:\x20vec'+'2f;\x0a\x20\x20\x20\x20va'+'r<private>'+'\x20dTiledUvG'+'lobal:\x20vec'+'2f;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'uterScale:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'atlasRect:'+'\x20vec4f;\x0a\x0a#'+'endif\x0a\x0avar'+'<private>\x20'+'dPositionW'+':\x20vec3f;\x0av'+'ar<private'+'>\x20dModelMa'+'trix:\x20mat4'+'x4f;\x0a\x0a#inc'+'lude\x20\x22tran'+'sformCoreV'+'S\x22\x0a\x0a#ifdef'+'\x20UV0\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ertex_texC'+'oord0:\x20vec'+'2f;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'rtex_texCo'+'ord1:\x20vec2'+'f;\x0a\x20\x20\x20\x20#in'+'clude\x20\x22uv1'+'VS\x22\x0a#endif'+'\x0a\x0a\x0a#ifdef\x20'+'LINEAR_DEP'+'TH\x0a\x20\x20\x20\x20#if'+'ndef\x20VIEWM'+'ATRIX\x0a\x20\x20\x20\x20'+'#define\x20VI'+'EWMATRIX\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#inc'+'lude\x20\x22tran'+'sformVS\x22\x0a\x0a'+'#ifdef\x20NOR'+'MALS\x0a\x20\x20\x20\x20#'+'include\x20\x22n'+'ormalCoreV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malVS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20TANGENTS'+'\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_tangent:'+'\x20vec4f;\x0a#e'+'ndif\x0a\x0a//\x20e'+'xpand\x20unif'+'orms\x20for\x20u'+'v\x20transfor'+'ms\x0a#includ'+'e\x20\x22uvTrans'+'formUnifor'+'msPS,\x20UV_T'+'RANSFORMS_'+('COUNT\x22\x0a\x0a#i'+'fdef\x20MSDF\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22msdfVS'+'\x22\x0a#endif\x0a\x0a'+'#include\x20\x20'+'\x22litUserCo'+'deVS\x22\x0a\x0a@ve'+'rtex\x0afn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'MainStartV'+'S\x22\x0a\x0a\x20\x20\x20\x20va'+'r\x20output\x20:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20get'+'Position()'+';\x0a\x20\x20\x20\x20outp'+'ut.vPositi'+'onW\x20=\x20getW'+'orldPositi'+'on();\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20NO'+'RMALS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vNormalW\x20'+'=\x20getNorma'+'l();\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TA'+'NGENTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vTangent'+'W\x20=\x20normal'+'ize(dNorma'+'lMatrix\x20*\x20'+'vertex_tan'+'gent.xyz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vBin'+'ormalW\x20=\x20c'+'ross(outpu'+'t.vNormalW'+',\x20output.v'+'TangentW)\x20'+'*\x20vertex_t'+'angent.w;\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(GG'+'X_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20UV0'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f\x20=\x20getU'+'v0();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20UV0_UNMOD'+'IFIED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20uv1:\x20vec2'+'f\x20=\x20getUv1'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20U'+'V1_UNMODIF'+'IED\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.vUv1\x20=\x20'+'uv1;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'xpand\x20code'+'\x20for\x20uv\x20tr'+'ansforms\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22uvTrans')+('formVS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20VERTEX_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition'+',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-(uniform'+'.matrix_vi'+'ew\x20*\x20vec4f'+'(output.vP'+'ositionW,\x20'+'1.0)).z;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MSDF\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unpac'+'kMsdfParam'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.outline_c'+'olor\x20=\x20dOu'+'tlineColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.out'+'line_thick'+'ness\x20=\x20dOu'+'tlineThick'+'ness;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.shadow_co'+'lor\x20=\x20dSha'+'dowColor;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.shado'+'w_offset\x20='+'\x20dShadowOf'+'fset;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vMask'+'\x20=\x20dMaskGl'+'obal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vTiledUv\x20'+'=\x20dTiledUv'+'Global;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndVS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),ZM='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20evaluateF'+'rontend();'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PICK_PA'+'SS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20getP'+'ickOutput('+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20float2ve'+'c4(vLinear'+'Depth);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndPS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',QM='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avar<priva'+'te>\x20litArg'+'s_albedo:\x20'+'vec3f;\x0a\x0a//'+'\x20Transpare'+'ncy\x0avar<pr'+'ivate>\x20lit'+'Args_opaci'+'ty:\x20f32;\x0a\x0a'+'//\x20Emissio'+'n\x20color\x0ava'+'r<private>'+'\x20litArgs_e'+'mission:\x20v'+'ec3f;\x0a\x0a//\x20'+'Normal\x20dir'+'ection\x20in\x20'+'world\x20spac'+'e\x0avar<priv'+'ate>\x20litAr'+'gs_worldNo'+'rmal:\x20vec3'+'f;\x0a\x0a//\x20Amb'+'ient\x20occlu'+'sion\x20amoun'+'t,\x20range\x20['+'0..1]\x0avar<'+'private>\x20l'+'itArgs_ao:'+'\x20f32;\x0a\x0a//\x20'+'Light\x20map\x20'+'color\x0avar<'+'private>\x20l'+'itArgs_lig'+'htmap:\x20vec'+'3f;\x0a\x0a//\x20Li'+'ght\x20map\x20di'+'rection\x0ava'+'r<private>'+'\x20litArgs_l'+'ightmapDir'+':\x20vec3f;\x0a\x0a'+'//\x20Surface'+'\x20metalness'+'\x20factor,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_metalne'+'ss:\x20f32;\x0a\x0a'+'//\x20The\x20f0\x20'+'specularit'+'y\x20factor\x0av'+'ar<private'+'>\x20litArgs_'+'specularit'+'y:\x20vec3f;\x0a'+'\x0a//\x20Specul'+'arity\x20inte'+'nsity\x20fact'+'or,\x20range\x20'+'[0..1]\x0avar'+'<private>\x20'+'litArgs_sp'+'ecularityF'+'actor:\x20f32'+';\x0a\x0a//\x20The\x20'+'microfacet'+'\x20glossines'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0avar<pri'+'vate>\x20litA'+'rgs_gloss:'+'\x20f32;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_sheen'+'_gloss:\x20f3'+'2;\x0a\x0a//\x20The'+'\x20color\x20of\x20'+'the\x20f0\x20spe'+'cularity\x20f'+'actor\x20for\x20'+'the\x20sheen\x20'+'layer\x0avar<'+'private>\x20l'+'itArgs_she'+'en_specula'+'rity:\x20vec3'+'f;\x0a\x0a//\x20Tra'+'nsmission\x20'+'factor\x20(re'+('fraction),'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_trans'+'mission:\x20f'+'32;\x0a\x0a//\x20Un'+'iform\x20thic'+'kness\x20of\x20m'+'edium,\x20use'+'d\x20by\x20trans'+'mission,\x20r'+'ange\x20[0..i'+'nf]\x0avar<pr'+'ivate>\x20lit'+'Args_thick'+'ness:\x20f32;'+'\x0a\x0a//\x20Index'+'\x20of\x20refrac'+'tion\x0avar<p'+'rivate>\x20li'+'tArgs_ior:'+'\x20f32;\x0a\x0a//\x20'+'Dispersion'+',\x20range\x20[0'+'..1]\x20typic'+'ally,\x20but\x20'+'can\x20be\x20hig'+'her\x0avar<pr'+'ivate>\x20lit'+'Args_dispe'+'rsion:\x20f32'+';\x0a\x0a//\x20Irid'+'escence\x20ef'+'fect\x20inten'+'sity,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'iridescenc'+'e_intensit'+'y:\x20f32;\x0a\x0a/'+'/\x20Thicknes'+'s\x20of\x20the\x20i'+'ridescent\x20'+'microfilm\x20'+'layer,\x20val'+'ue\x20is\x20in\x20n'+'anometers,'+'\x20range\x20[0.'+'.1000]\x0avar'+'<private>\x20'+'litArgs_ir'+'idescence_'+'thickness:'+'\x20f32;\x0a\x0a//\x20'+'The\x20normal'+'\x20used\x20for\x20'+'the\x20clearc'+'oat\x20layer\x0a'+'var<privat'+'e>\x20litArgs'+'_clearcoat'+'_worldNorm'+'al:\x20vec3f;'+'\x0a\x0a//\x20Inten'+'sity\x20of\x20th'+'e\x20clearcoa'+'t\x20layer,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_clearco'+'at_specula'+'rity:\x20f32;'+'\x0a\x0a//\x20Gloss'+'iness\x20of\x20c'+'learcoat\x20l'+'ayer,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'clearcoat_'+'gloss:\x20f32'+';\x0a\x0a'),JM='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20t'+'extureBias'+':\x20f32\x20=\x20-1'+'000.0;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20texture'+'Bias:\x20f32;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ShaderArgs'+'PS\x22\x0a',eD='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20view_p'+'osition:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20li'+'ght_radius'+':\x20f32;\x0a#en'+'dif\x0a\x0a#if\x20S'+'HADOW_TYPE'+'\x20==\x20PCSS_3'+'2F\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lin'+'earizeDept'+'hPS\x22\x0a#endi'+'f\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serMainSta'+'rtPS\x22\x0a\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20/'+'/\x20using\x20no'+'n-standard'+'\x20depth,\x20i.'+'e\x20gl_FragC'+'oord.z\x0a\x20\x20\x20'+'\x20#ifdef\x20PE'+'RSPECTIVE_'+'DEPTH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20de'+'pth:\x20f32\x20='+'\x20input.pos'+'ition.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20PCS'+'S_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot/omni'+'\x20shadows\x20c'+'urrently\x20u'+'se\x20linear\x20'+'depth.\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20TODO:\x20us'+'e\x20perspect'+'ive\x20depth\x20'+'for\x20spot/o'+'mni\x20the\x20sa'+'me\x20way\x20as\x20'+'directiona'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT_TYPE\x20!'+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'depth\x20=\x20li'+'nearizeDep'+'thWithPara'+'ms(depth,\x20'+'camera_par'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20depth:\x20'+'f32\x20=\x20min('+'distance(u'+'niform.vie'+'w_position'+',\x20input.vP'+'ositionW)\x20'+'/\x20uniform.'+'light_radi'+'us,\x200.9999'+'9);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'MODIFIED_D'+'EPTH\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SHADO'+'W_TYPE\x20==\x20'+'VSM_16F\x20||'+'\x20SHADOW_TY'+('PE\x20==\x20VSM_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20SHAD'+'OW_TYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20expon'+'ent:\x20f32\x20='+'\x2015.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20exp'+'onent:\x20f32'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dep'+'th_vsm\x20=\x202'+'.0\x20*\x20depth'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dept'+'h_vsm\x20=\x20ex'+'p(exponent'+'\x20*\x20depth_v'+'sm);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(depth_'+'vsm,\x20depth'+'_vsm\x20*\x20dep'+'th_vsm,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20PCSS'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(de'+'pth,\x200.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MODIFI'+'ED_DEPTH\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20If'+'\x20we\x20end\x20up'+'\x20using\x20mod'+'ified\x20dept'+'h,\x20it\x20need'+'s\x20to\x20be\x20ex'+'plicitly\x20w'+'ritten\x20to\x20'+'gl_FragDep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.frag'+'Depth\x20=\x20de'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'just\x20the\x20s'+'implest\x20co'+'de,\x20color\x20'+'is\x20not\x20wri'+'tten\x20anywa'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),tD='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0afn\x20'+'LTC_Uv(N:\x20'+'vec3f,\x20V:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20co'+'nst\x20LUT_SI'+'ZE:\x20f32\x20=\x20'+'64.0;\x0a\x20\x20\x20\x20'+'const\x20LUT_'+'SCALE:\x20f32'+'\x20=\x20(LUT_SI'+'ZE\x20-\x201.0)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_BIAS'+':\x20f32\x20=\x200.'+'5\x20/\x20LUT_SI'+'ZE;\x0a\x20\x20\x20\x20le'+'t\x20dotNV:\x20f'+'32\x20=\x20satur'+'ate(dot(\x20N'+',\x20V\x20));\x0a\x20\x20'+'\x20\x20//\x20textu'+'re\x20paramet'+'erized\x20by\x20'+'sqrt(\x20GGX\x20'+'alpha\x20)\x20an'+'d\x20sqrt(\x201\x20'+'-\x20cos(\x20the'+'ta\x20)\x20)\x0a\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20vec'+'2f(\x20roughn'+'ess,\x20sqrt('+'\x201.0\x20-\x20dot'+'NV\x20)\x20);\x0a\x20\x20'+'\x20\x20return\x20u'+'v\x20*\x20LUT_SC'+'ALE\x20+\x20LUT_'+'BIAS;\x0a}\x0a\x0af'+'n\x20LTC_Clip'+'pedSphereF'+'ormFactor('+'\x20f:\x20vec3f\x20'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20//\x20Re'+'al-Time\x20Ar'+'ea\x20Lightin'+'g:\x20a\x20Journ'+'ey\x20from\x20Re'+'search\x20to\x20'+'Production'+'\x20(p.102)\x0a\x20'+'\x20\x20\x20//\x20An\x20a'+'pproximati'+'on\x20of\x20the\x20'+'form\x20facto'+'r\x20of\x20a\x20hor'+'izon-clipp'+'ed\x20rectang'+'le.\x0a\x20\x20\x20\x20le'+'t\x20l:\x20f32\x20='+'\x20length(\x20f'+'\x20);\x0a\x20\x20\x20\x20re'+'turn\x20max(\x20'+'(\x20l\x20*\x20l\x20+\x20'+'f.z\x20)\x20/\x20(\x20'+'l\x20+\x201.0\x20),'+'\x200.0\x20);\x0a}\x0a'+'\x0afn\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'v1:\x20vec3f,'+'\x20v2:\x20vec3f'+'\x20)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20x:\x20f32\x20='+'\x20dot(\x20v1,\x20'+'v2\x20);\x0a\x20\x20\x20\x20'+'let\x20y:\x20f32'+('\x20=\x20abs(\x20x\x20'+');\x0a\x20\x20\x20\x20//\x20'+'rational\x20p'+'olynomial\x20'+'approximat'+'ion\x20to\x20the'+'ta\x20/\x20sin(\x20'+'theta\x20)\x20/\x20'+'2PI\x0a\x20\x20\x20\x20le'+'t\x20a:\x20f32\x20='+'\x200.8543985'+'\x20+\x20(\x200.496'+'5155\x20+\x200.0'+'145206\x20*\x20y'+'\x20)\x20*\x20y;\x0a\x20\x20'+'\x20\x20let\x20b:\x20f'+'32\x20=\x203.417'+'5940\x20+\x20(\x204'+'.1616724\x20+'+'\x20y\x20)\x20*\x20y;\x0a'+'\x20\x20\x20\x20let\x20v:'+'\x20f32\x20=\x20a\x20/'+'\x20b;\x0a\x20\x20\x20\x20le'+'t\x20inv_sqrt'+'_term\x20=\x20in'+'verseSqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7f\x20)\x20);\x0a'+'\x20\x20\x20\x20let\x20th'+'eta_sinthe'+'ta:\x20f32\x20=\x20'+'select(\x20(0'+'.5\x20*\x20inv_s'+'qrt_term\x20-'+'\x20v),\x20v,\x20x\x20'+'>\x200.0\x20);\x0a\x20'+'\x20\x20\x20return\x20'+'cross(\x20v1,'+'\x20v2\x20)\x20*\x20th'+'eta_sinthe'+'ta;\x0a}\x0a\x0astr'+'uct\x20Coords'+'\x20{\x0a\x20\x20\x20\x20coo'+'rd0:\x20vec3f'+',\x0a\x20\x20\x20\x20coor'+'d1:\x20vec3f,'+'\x0a\x20\x20\x20\x20coord'+'2:\x20vec3f,\x0a'+'\x20\x20\x20\x20coord3'+':\x20vec3f,\x0a}'+'\x0a\x0afn\x20LTC_E'+'valuateRec'+'t(\x20N:\x20vec3'+'f,\x20V:\x20vec3'+'f,\x20P:\x20vec3'+'f,\x20mInv:\x20m'+'at3x3f,\x20re'+'ctCoords:\x20'+'Coords)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20//\x20bail\x20i'+'f\x20point\x20is'+'\x20on\x20back\x20s'+'ide\x20of\x20pla'+'ne\x20of\x20ligh'+'t\x0a\x20\x20\x20\x20//\x20a'+'ssumes\x20ccw'+'\x20winding\x20o'+'rder\x20of\x20li'+'ght\x20vertic'+'es\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec3f'+'\x20=\x20rectCoo'+'rds.coord1'+'\x20-\x20rectCoo'+'rds.coord0'+';\x0a\x20\x20\x20\x20let\x20'+'v2:\x20vec3f\x20'+'=\x20rectCoor'+'ds.coord3\x20'+'-\x20rectCoor'+'ds.coord0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'lightNorma'+'l:\x20vec3f\x20='+'\x20cross(\x20v1'+',\x20v2\x20);\x0a\x20\x20'+'\x20\x20let\x20fact'+'or:\x20f32\x20=\x20'+'sign(-dot('+'\x20lightNorm'+'al,\x20P\x20-\x20re'+'ctCoords.c'+'oord0\x20));\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'nstruct\x20or'+'thonormal\x20'+'basis\x20arou'+'nd\x20N\x0a\x20\x20\x20\x20l')+('et\x20T1:\x20vec'+'3f\x20=\x20norma'+'lize(\x20V\x20-\x20'+'N\x20*\x20dot(\x20V'+',\x20N\x20)\x20);\x0a\x20'+'\x20\x20\x20let\x20T2:'+'\x20vec3f\x20=\x20f'+'actor\x20*\x20cr'+'oss(\x20N,\x20T1'+'\x20);\x20//\x20neg'+'ated\x20from\x20'+'paper;\x20pos'+'sibly\x20due\x20'+'to\x20a\x20diffe'+'rent\x20hande'+'dness\x20of\x20w'+'orld\x20coord'+'inate\x20syst'+'em\x0a\x20\x20\x20\x20//\x20'+'compute\x20tr'+'ansform\x0a\x20\x20'+'\x20\x20let\x20mat:'+'\x20mat3x3f\x20='+'\x20mInv\x20*\x20tr'+'anspose(\x20m'+'at3x3f(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'transform\x20'+'rect\x0a\x20\x20\x20\x20v'+'ar\x20coords:'+'\x20array<vec'+'3f,\x204>;\x0a\x20\x20'+'\x20\x20coords[0'+']\x20=\x20mat\x20*\x20'+'(\x20rectCoor'+'ds.coord0\x20'+'-\x20P\x20);\x0a\x20\x20\x20'+'\x20coords[1]'+'\x20=\x20mat\x20*\x20('+'\x20rectCoord'+'s.coord1\x20-'+'\x20P\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20mat\x20*\x20(\x20'+'rectCoords'+'.coord2\x20-\x20'+'P\x20);\x0a\x20\x20\x20\x20c'+'oords[3]\x20='+'\x20mat\x20*\x20(\x20r'+'ectCoords.'+'coord3\x20-\x20P'+'\x20);\x0a\x20\x20\x20\x20//'+'\x20project\x20r'+'ect\x20onto\x20s'+'phere\x0a\x20\x20\x20\x20'+'coords[0]\x20'+'=\x20normaliz'+'e(\x20coords['+'0]\x20);\x0a\x20\x20\x20\x20'+'coords[1]\x20'+'=\x20normaliz'+'e(\x20coords['+'1]\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20normaliz'+'e(\x20coords['+'2]\x20);\x0a\x20\x20\x20\x20'+'coords[3]\x20'+'=\x20normaliz'+'e(\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20vector\x20'+'form\x20facto'+'r\x0a\x20\x20\x20\x20var\x20'+'vectorForm'+'Factor:\x20ve'+'c3f\x20=\x20vec3'+'f(\x200.0\x20);\x0a'+'\x20\x20\x20\x20vector'+'FormFactor'+'\x20=\x20vectorF'+'ormFactor\x20'+'+\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[0],\x20c'+'oords[1]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20=\x20vecto'+'rFormFacto'+'r\x20+\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'coords[1],'+'\x20coords[2]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa')+('ctor\x20=\x20vec'+'torFormFac'+'tor\x20+\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[2'+'],\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20=\x20v'+'ectorFormF'+'actor\x20+\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[3],\x20coord'+'s[0]\x20);\x0a\x20\x20'+'\x20\x20//\x20adjus'+'t\x20for\x20hori'+'zon\x20clippi'+'ng\x0a\x20\x20\x20\x20let'+'\x20result:\x20f'+'32\x20=\x20LTC_C'+'lippedSphe'+'reFormFact'+'or(\x20vector'+'FormFactor'+'\x20);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20resu'+'lt;\x0a}\x0a\x0avar'+'<private>\x20'+'dLTCCoords'+':\x20Coords;\x0a'+'fn\x20getLTCL'+'ightCoords'+'(lightPos:'+'\x20vec3f,\x20ha'+'lfWidth:\x20v'+'ec3f,\x20half'+'Height:\x20ve'+'c3f)\x20->\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20var\x20coord'+'s:\x20Coords;'+'\x0a\x20\x20\x20\x20coord'+'s.coord0\x20='+'\x20lightPos\x20'+'+\x20halfWidt'+'h\x20-\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd1\x20=\x20ligh'+'tPos\x20-\x20hal'+'fWidth\x20-\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20coord'+'s.coord2\x20='+'\x20lightPos\x20'+'-\x20halfWidt'+'h\x20+\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd3\x20=\x20ligh'+'tPos\x20+\x20hal'+'fWidth\x20+\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20retur'+'n\x20coords;\x0a'+'}\x0a\x0avar<pri'+'vate>\x20dSph'+'ereRadius:'+'\x20f32;\x0afn\x20g'+'etSphereLi'+'ghtCoords('+'lightPos:\x20'+'vec3f,\x20hal'+'fWidth:\x20ve'+'c3f,\x20halfH'+'eight:\x20vec'+'3f)\x20->\x20Coo'+'rds\x20{\x0a\x20\x20\x20\x20'+'//\x20used\x20fo'+'r\x20simple\x20s'+'phere\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20//\x20als'+'o,\x20the\x20cod'+'e\x20only\x20han'+'dles\x20a\x20sph'+'erical\x20lig'+'ht,\x20it\x20can'+'not\x20be\x20non'+'-uniformly'+'\x20scaled\x20in'+'\x20world\x20spa'+'ce,\x20and\x20so'+'\x20we\x20enforc'+'e\x20it\x20here\x0a'+'\x20\x20\x20\x20dSpher'+'eRadius\x20=\x20')+('max(length'+'(halfWidth'+'),\x20length('+'halfHeight'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20Billboar'+'d\x20the\x202d\x20l'+'ight\x20quad\x20'+'to\x20reflect'+'ion\x20vector'+',\x20as\x20it\x27s\x20'+'used\x20for\x20s'+'pecular.\x20T'+'his\x20allows'+'\x20us\x20to\x20use'+'\x20disk\x20math'+'\x20for\x20the\x20s'+'phere.\x0a\x20\x20\x20'+'\x20let\x20f:\x20ve'+'c3f\x20=\x20refl'+'ect(normal'+'ize(lightP'+'os\x20-\x20unifo'+'rm.view_po'+'sition),\x20v'+'NormalW);\x0a'+'\x20\x20\x20\x20let\x20w:'+'\x20vec3f\x20=\x20n'+'ormalize(c'+'ross(f,\x20ha'+'lfHeight))'+';\x0a\x20\x20\x20\x20let\x20'+'h:\x20vec3f\x20='+'\x20normalize'+'(cross(f,\x20'+'w));\x0a\x0a\x20\x20\x20\x20'+'return\x20get'+'LTCLightCo'+'ords(light'+'Pos,\x20w\x20*\x20d'+'SphereRadi'+'us,\x20h\x20*\x20dS'+'phereRadiu'+'s);\x0a}\x0a\x0a//\x20'+'used\x20for\x20L'+'TC\x20LUT\x20tex'+'ture\x20looku'+'p\x0avar<priv'+'ate>\x20dLTCU'+'V:\x20vec2f;\x0a'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20var<p'+'rivate>\x20cc'+'LTCUV:\x20vec'+'2f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightUV(g'+'loss:\x20f32,'+'\x20worldNorm'+'al:\x20vec3f,'+'\x20viewDir:\x20'+'vec3f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20roug'+'hness:\x20f32'+'\x20=\x20max((1.'+'0\x20-\x20gloss)'+'\x20*\x20(1.0\x20-\x20'+'gloss),\x200.'+'001);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_Uv(\x20world'+'Normal,\x20vi'+'ewDir,\x20rou'+'ghness\x20);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20energ'+'y\x20conserva'+'tion\x20and\x20t'+'o\x20modulate'+'\x20specular\x0a'+'var<privat'+'e>\x20dLTCSpe'+'cFres:\x20vec'+'3f;\x0a#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20v'+'ar<private'+'>\x20ccLTCSpe'+'cFres:\x20vec'+'3f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightSpec'+'Fres(uv:\x20v'+'ec2f,\x20spec'+'ularity:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20t2:\x20v')+('ec4f\x20=\x20tex'+'tureSample'+'Level(area'+'LightsLutT'+'ex2,\x20areaL'+'ightsLutTe'+'x2Sampler,'+'\x20uv,\x200.0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20specular'+'ity\x20*\x20t2.x'+'\x20+\x20(\x20vec3f'+'(\x201.0\x20)\x20-\x20'+'specularit'+'y)\x20*\x20t2.y;'+'\x0a}\x0a\x0afn\x20cal'+'cLTCLightV'+'alues(glos'+'s:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f,\x20specul'+'arity:\x20vec'+'3f,\x20clearc'+'oatGloss:\x20'+'f32,\x20clear'+'coatWorldN'+'ormal:\x20vec'+'3f,\x20clearc'+'oatSpecula'+'rity:\x20f32)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'UV\x20=\x20getLT'+'CLightUV(c'+'learcoatGl'+'oss,\x20clear'+'coatWorldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'SpecFres\x20='+'\x20getLTCLig'+'htSpecFres'+'(ccLTCUV,\x20'+'vec3f(clea'+'rcoatSpecu'+'larity));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0afn\x20cal'+'cDiskLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20cal'+'cRectLight'+'Values(lig'+'htPos,\x20hal'+'fWidth,\x20ha'+'lfHeight);'+'\x0a}\x0afn\x20calc'+'SphereLigh'+'tValues(li'+'ghtPos:\x20ve'+'c3f,\x20halfW'+'idth:\x20vec3'+'f,\x20halfHei')+('ght:\x20vec3f'+')\x20{\x0a\x20\x20\x20\x20dL'+'TCCoords\x20='+'\x20getSphere'+'LightCoord'+'s(lightPos'+',\x20halfWidt'+'h,\x20halfHei'+'ght);\x0a}\x0a\x0a/'+'/\x20An\x20exten'+'ded\x20versio'+'n\x20of\x20the\x20i'+'mplementat'+'ion\x20from\x20\x22'+'How\x20to\x20sol'+'ve\x20a\x20cubic'+'\x20equation,'+'\x20revisited'+'\x22\x0a//\x20http:'+'//momentsi'+'ngraphics.'+'de/?p=105\x0a'+'fn\x20SolveCu'+'bic(Coeffi'+'cient_in:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20pi:\x20'+'f32\x20=\x203.14'+'159;\x0a\x20\x20\x20\x20v'+'ar\x20Coeffic'+'ient\x20=\x20Coe'+'fficient_i'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20Normalize'+'\x20the\x20polyn'+'omial\x0a\x20\x20\x20\x20'+'Coefficien'+'t\x20=\x20vec4f('+'Coefficien'+'t.xyz\x20/\x20Co'+'efficient.'+'w,\x20Coeffic'+'ient.w);\x0a\x0a'+'\x20\x20\x20\x20//\x20Div'+'ide\x20middle'+'\x20coefficie'+'nts\x20by\x20thr'+'ee\x0a\x20\x20\x20\x20let'+'\x20new_yz:\x20v'+'ec2f\x20=\x20Coe'+'fficient.y'+'z\x20/\x203.0;\x0a\x20'+'\x20\x20\x20Coeffic'+'ient\x20=\x20vec'+'4f(Coeffic'+'ient.x,\x20ne'+'w_yz.x,\x20ne'+'w_yz.y,\x20Co'+'efficient.'+'w);\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20let\x20A:\x20'+'f32\x20=\x20Coef'+'ficient.w;'+'\x0a\x20\x20\x20\x20let\x20B'+':\x20f32\x20=\x20Co'+'efficient.'+'z;\x0a\x20\x20\x20\x20let'+'\x20C:\x20f32\x20=\x20'+'Coefficien'+'t.y;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20Coeffici'+'ent.x;\x0a\x0a\x20\x20'+'\x20\x20//\x20Compu'+'te\x20the\x20Hes'+'sian\x20and\x20t'+'he\x20discrim'+'inant\x0a\x20\x20\x20\x20'+'let\x20Delta:'+'\x20vec3f\x20=\x20v'+'ec3f(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20-Coeff'+'icient.z\x20*'+'\x20Coefficie'+'nt.z\x20+\x20Coe'+'fficient.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'-Coefficie'+'nt.y\x20*\x20Coe'+'fficient.z'+'\x20+\x20Coeffic'+'ient.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'vec2f(Coef'+'ficient.z,'+'\x20-Coeffici'+'ent.y),\x20Co'+'efficient.'+'xy)\x0a\x20\x20\x20\x20);')+('\x0a\x0a\x20\x20\x20\x20let\x20'+'Discrimina'+'nt:\x20f32\x20=\x20'+'dot(vec2f('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20var\x20xlc:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20var\x20xsc:'+'\x20vec2f;\x0a\x0a\x20'+'\x20\x20\x20//\x20Algo'+'rithm\x20A\x0a\x20\x20'+'\x20\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20A_a:'+'\x20f32\x20=\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_a:\x20f'+'32\x20=\x20Delta'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_a:'+'\x20f32\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20Theta:\x20f'+'32\x20=\x20atan2'+'(sqrt(Disc'+'riminant),'+'\x20-D_a)\x20/\x203'+'.0;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sqr'+'t_neg_Ca\x20='+'\x20sqrt(-C_a'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20x_1a:'+'\x20f32\x20=\x202.0'+'\x20*\x20sqrt_ne'+'g_Ca\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x_3a:\x20f32'+'\x20=\x202.0\x20*\x20s'+'qrt_neg_Ca'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20xl:'+'\x20f32\x20=\x20sel'+'ect(x_3a,\x20'+'x_1a,\x20(x_1'+'a\x20+\x20x_3a)\x20'+'>\x202.0\x20*\x20B)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'xlc\x20=\x20vec2'+'f(xl\x20-\x20B,\x20'+'A);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Al'+'gorithm\x20D\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20A_'+'d:\x20f32\x20=\x20D'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_d:\x20f'+'32\x20=\x20Delta'+'.z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_d:'+'\x20f32\x20=\x20-D\x20'+'*\x20Delta.y\x20'+'+\x202.0\x20*\x20C\x20'+'*\x20Delta.z;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Take\x20th'+'e\x20cubic\x20ro'+'ot\x20of\x20a\x20no'+'rmalized\x20c'+'omplex\x20num'+'ber\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20Thet'+'a:\x20f32\x20=\x20a'+'tan2(D\x20*\x20s'+'qrt(Discri'+'minant),\x20-'+'D_d)\x20/\x203.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20sqrt_'+'neg_Cd\x20=\x20s'+'qrt(-C_d);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20x_1d:\x20f'+'32\x20=\x202.0\x20*')+('\x20sqrt_neg_'+'Cd\x20*\x20cos(T'+'heta);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20x'+'_3d:\x20f32\x20='+'\x202.0\x20*\x20sqr'+'t_neg_Cd\x20*'+'\x20cos(Theta'+'\x20+\x20(2.0\x20/\x20'+'3.0)\x20*\x20pi)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20xs:\x20f'+'32\x20=\x20selec'+'t(x_3d,\x20x_'+'1d,\x20x_1d\x20+'+'\x20x_3d\x20<\x202.'+'0\x20*\x20C);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20xsc\x20'+'=\x20vec2f(-D'+',\x20xs\x20+\x20C);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20let\x20E:\x20f'+'32\x20=\x20\x20xlc.'+'y\x20*\x20xsc.y;'+'\x0a\x20\x20\x20\x20let\x20F'+':\x20f32\x20=\x20-x'+'lc.x\x20*\x20xsc'+'.y\x20-\x20xlc.y'+'\x20*\x20xsc.x;\x0a'+'\x20\x20\x20\x20let\x20G:'+'\x20f32\x20=\x20\x20xl'+'c.x\x20*\x20xsc.'+'x;\x0a\x0a\x20\x20\x20\x20le'+'t\x20xmc:\x20vec'+'2f\x20=\x20vec2f'+'(C\x20*\x20F\x20-\x20B'+'\x20*\x20G,\x20-B\x20*'+'\x20F\x20+\x20C\x20*\x20E'+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20Root:\x20ve'+'c3f\x20=\x20vec3'+'f(xsc.x\x20/\x20'+'xsc.y,\x20xmc'+'.x\x20/\x20xmc.y'+',\x20xlc.x\x20/\x20'+'xlc.y);\x0a\x0a\x20'+'\x20\x20\x20if\x20(Roo'+'t.x\x20<\x20Root'+'.y\x20&&\x20Root'+'.x\x20<\x20Root.'+'z)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root\x20=\x20'+'Root.yxz;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(Root.'+'z\x20<\x20Root.x'+'\x20&&\x20Root.z'+'\x20<\x20Root.y)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root\x20=\x20Ro'+'ot.xzy;\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20Root;'+'\x0a}\x0a\x0afn\x20LTC'+'_EvaluateD'+'isk(N:\x20vec'+'3f,\x20V:\x20vec'+'3f,\x20P:\x20vec'+'3f,\x20Minv:\x20'+'mat3x3f,\x20p'+'oints:\x20Coo'+'rds)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20let\x20T1:\x20'+'vec3f\x20=\x20no'+'rmalize(V\x20'+'-\x20N\x20*\x20dot('+'V,\x20N));\x0a\x20\x20'+'\x20\x20let\x20T2:\x20'+'vec3f\x20=\x20cr'+'oss(N,\x20T1)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'rotate\x20are'+'a\x20light\x20in'+'\x20(T1,\x20T2,\x20'+'N)\x20basis\x0a\x20'+'\x20\x20\x20let\x20R:\x20'+'mat3x3f\x20=\x20'+'transpose('+'\x20mat3x3f(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20polygon\x20'+'(allocate\x20'+'5\x20vertices'+'\x20for\x20clipp')+('ing\x0a\x20\x20\x20\x20va'+'r\x20L_:\x20arra'+'y<vec3f,\x203'+'>;\x0a\x20\x20\x20\x20L_['+'0]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[1'+']\x20=\x20R\x20*\x20(\x20'+'points.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20L_[2]'+'\x20=\x20R\x20*\x20(\x20p'+'oints.coor'+'d2\x20-\x20P\x20);\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'it\x20ellipse'+'\x0a\x20\x20\x20\x20let\x20C'+':\x20vec3f\x20\x20='+'\x200.5\x20*\x20(L_'+'[0]\x20+\x20L_[2'+']);\x0a\x20\x20\x20\x20va'+'r\x20V1:\x20vec3'+'f\x20=\x200.5\x20*\x20'+'(L_[1]\x20-\x20L'+'_[2]);\x0a\x20\x20\x20'+'\x20var\x20V2:\x20v'+'ec3f\x20=\x200.5'+'\x20*\x20(L_[1]\x20'+'-\x20L_[0]);\x0a'+'\x0a\x20\x20\x20\x20let\x20C'+'_Minv:\x20vec'+'3f\x20\x20=\x20Minv'+'\x20*\x20C;\x0a\x20\x20\x20\x20'+'let\x20V1_Min'+'v:\x20vec3f\x20='+'\x20Minv\x20*\x20V1'+';\x0a\x20\x20\x20\x20let\x20'+'V2_Minv:\x20v'+'ec3f\x20=\x20Min'+'v\x20*\x20V2;\x0a\x0a\x20'+'\x20\x20\x20//\x20comp'+'ute\x20eigenv'+'ectors\x20of\x20'+'ellipse\x0a\x20\x20'+'\x20\x20var\x20a:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20b:\x20f32;\x0a'+'\x20\x20\x20\x20let\x20d1'+'1:\x20f32\x20=\x20d'+'ot(V1_Minv'+',\x20V1_Minv)'+';\x0a\x20\x20\x20\x20let\x20'+'d22:\x20f32\x20='+'\x20dot(V2_Mi'+'nv,\x20V2_Min'+'v);\x0a\x20\x20\x20\x20le'+'t\x20d12:\x20f32'+'\x20=\x20dot(V1_'+'Minv,\x20V2_M'+'inv);\x0a\x20\x20\x20\x20'+'if\x20(abs(d1'+'2)\x20/\x20sqrt('+'d11\x20*\x20d22)'+'\x20>\x200.0001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20tr:\x20f'+'32\x20=\x20d11\x20+'+'\x20d22;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'t_inner:\x20f'+'32\x20=\x20-d12\x20'+'*\x20d12\x20+\x20d1'+'1\x20*\x20d22;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20det:\x20f32\x20'+'=\x20sqrt(det'+'_inner);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20u:\x20f32\x20=\x20'+'0.5\x20*\x20sqrt'+'(tr\x20-\x202.0\x20'+'*\x20det);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'v:\x20f32\x20=\x200'+'.5\x20*\x20sqrt('+'tr\x20+\x202.0\x20*'+'\x20det);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20e'+'_max:\x20f32\x20'+'=\x20(u\x20+\x20v)\x20'+'*\x20(u\x20+\x20v);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20e_min:\x20'+'f32\x20=\x20(u\x20-'+'\x20v)\x20*\x20(u\x20-'+'\x20v);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20V1'+'_:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va')+('r\x20V2_:\x20vec'+'3f;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(d11'+'\x20>\x20d22)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V1_\x20=\x20d1'+'2\x20*\x20V1_Min'+'v\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2_Minv;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20V2_\x20=\x20d12'+'\x20*\x20V1_Minv'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2_Minv;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12*V2_'+'Minv\x20+\x20(e_'+'max\x20-\x20d22)'+'*V1_Minv;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V2_\x20=\x20d1'+'2*V2_Minv\x20'+'+\x20(e_min\x20-'+'\x20d22)*V1_M'+'inv;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20e_max;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20b'+'\x20=\x201.0\x20/\x20e'+'_min;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20V1\x20=\x20n'+'ormalize(V'+'1_);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20V2\x20=\x20no'+'rmalize(V2'+'_);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20dot(V'+'1_Minv,\x20V1'+'_Minv);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20b\x20=\x20'+'1.0\x20/\x20dot('+'V2_Minv,\x20V'+'2_Minv);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V1\x20'+'=\x20V1_Minv\x20'+'*\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20=\x20V2_Min'+'v\x20*\x20sqrt(b'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20V3'+':\x20vec3f\x20=\x20'+'normalize('+'cross(V1,\x20'+'V2));\x0a\x20\x20\x20\x20'+'if\x20(dot(C_'+'Minv,\x20V3)\x20'+'<\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V3\x20'+'=\x20V3\x20*\x20-1.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20let\x20L:'+'\x20f32\x20\x20=\x20do'+'t(V3,\x20C_Mi'+'nv);\x0a\x20\x20\x20\x20l'+'et\x20x0:\x20f32'+'\x20=\x20dot(V1,'+'\x20C_Minv)\x20/'+'\x20L;\x0a\x20\x20\x20\x20le'+'t\x20y0:\x20f32\x20'+'=\x20dot(V2,\x20'+'C_Minv)\x20/\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20E1:\x20f32\x20'+'=\x20inverseS'+'qrt(a);\x0a\x20\x20'+'\x20\x20let\x20E2:\x20'+'f32\x20=\x20inve'+'rseSqrt(b)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20a_scaled\x20'+'=\x20a\x20*\x20L\x20*\x20'+'L;\x0a\x20\x20\x20\x20let'+'\x20b_scaled\x20'+'=\x20b\x20*\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20c0:\x20f32\x20'+'=\x20a_scaled'+'\x20*\x20b_scale'+'d;\x0a\x20\x20\x20\x20let'+'\x20c1:\x20f32\x20='+'\x20a_scaled\x20'+'*\x20b_scaled')+('\x20*\x20(1.0\x20+\x20'+'x0\x20*\x20x0\x20+\x20'+'y0\x20*\x20y0)\x20-'+'\x20a_scaled\x20'+'-\x20b_scaled'+';\x0a\x20\x20\x20\x20let\x20'+'c2:\x20f32\x20=\x20'+'1.0\x20-\x20a_sc'+'aled\x20*\x20(1.'+'0\x20+\x20x0\x20*\x20x'+'0)\x20-\x20b_sca'+'led\x20*\x20(1.0'+'\x20+\x20y0\x20*\x20y0'+');\x0a\x20\x20\x20\x20let'+'\x20c3:\x20f32\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20let\x20roots'+':\x20vec3f\x20=\x20'+'SolveCubic'+'(vec4f(c0,'+'\x20c1,\x20c2,\x20c'+'3));\x0a\x20\x20\x20\x20l'+'et\x20e1:\x20f32'+'\x20=\x20roots.x'+';\x0a\x20\x20\x20\x20let\x20'+'e2:\x20f32\x20=\x20'+'roots.y;\x0a\x20'+'\x20\x20\x20let\x20e3:'+'\x20f32\x20=\x20roo'+'ts.z;\x0a\x0a\x20\x20\x20'+'\x20var\x20avgDi'+'r:\x20vec3f\x20='+'\x20vec3f(a_s'+'caled\x20*\x20x0'+'\x20/\x20(a_scal'+'ed\x20-\x20e2),\x20'+'b_scaled\x20*'+'\x20y0\x20/\x20(b_s'+'caled\x20-\x20e2'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20let\x20ro'+'tate:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20let\x20L'+'1:\x20f32\x20=\x20s'+'qrt(-e2\x20/\x20'+'e3);\x0a\x20\x20\x20\x20l'+'et\x20L2:\x20f32'+'\x20=\x20sqrt(-e'+'2\x20/\x20e1);\x0a\x0a'+'\x20\x20\x20\x20let\x20fo'+'rmFactor:\x20'+'f32\x20=\x20max('+'0.0,\x20L1\x20*\x20'+'L2\x20*\x20inver'+'seSqrt((1.'+'0\x20+\x20L1\x20*\x20L'+'1)\x20*\x20(1.0\x20'+'+\x20L2\x20*\x20L2)'+'));\x0a\x0a\x20\x20\x20\x20c'+'onst\x20LUT_S'+'IZE_disk:\x20'+'f32\x20=\x2064.0'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_SCAL'+'E_disk:\x20f3'+'2\x20=\x20(\x20LUT_'+'SIZE_disk\x20'+'-\x201.0\x20)\x20/\x20'+'LUT_SIZE_d'+'isk;\x0a\x20\x20\x20\x20c'+'onst\x20LUT_B'+'IAS_disk:\x20'+'f32\x20=\x200.5\x20'+'/\x20LUT_SIZE'+'_disk;\x0a\x0a\x20\x20'+'\x20\x20//\x20use\x20t'+'abulated\x20h'+'orizon-cli'+'pped\x20spher'+'e\x0a\x20\x20\x20\x20var\x20'+'uv:\x20vec2f\x20'+'=\x20vec2f(av'+'gDir.z\x20*\x200'+'.5\x20+\x200.5,\x20'+'formFactor'+');\x0a\x20\x20\x20\x20uv\x20'+'=\x20uv\x20*\x20LUT'+'_SCALE_dis'+'k\x20+\x20LUT_BI'+'AS_disk;\x0a\x0a'+'\x20\x20\x20\x20let\x20sc')+('ale:\x20f32\x20='+'\x20textureSa'+'mpleLevel('+'areaLights'+'LutTex2,\x20a'+'reaLightsL'+'utTex2Samp'+'ler,\x20uv,\x200'+'.0).w;\x0a\x0a\x20\x20'+'\x20\x20return\x20f'+'ormFactor\x20'+'*\x20scale;\x0a}'+'\x0a\x0a//\x20LTC_E'+'valuateDis'+'k\x20in\x20some\x20'+'rare\x20cases'+'\x20genereate'+'s\x20NaN\x20valu'+'es\x20in\x20a\x20or'+'\x20b,\x20just\x20b'+'efore\x20\x27flo'+'at\x20c0\x20=\x20a\x20'+'*\x20b;\x27\x0a//\x20G'+'et\x20rid\x20of\x20'+'those\x20Nan\x20'+'values\x20bef'+'ore\x20they\x20p'+'ropagate\x20f'+'urther,\x20as'+'\x20in\x20case\x20o'+'f\x20bloom\x20/\x20'+'DOF\x20blurs\x20'+'they\x0a//\x20pr'+'opagate\x20to'+'\x20large\x20are'+'as.\x20I\x20didn'+'\x27t\x20find\x20th'+'e\x20actual\x20r'+'eason\x20wher'+'e\x20those\x20co'+'me\x20from,\x20s'+'o\x20that\x20is\x20'+'still\x20TODO'+'.\x0a//\x20Note\x20'+'that\x20only\x20'+'disk/spher'+'e\x20lights\x20a'+'re\x20causing'+'\x20it,\x20so\x20on'+'ly\x20handle\x20'+'those.\x0afn\x20'+'FixNan(val'+'ue:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20v'+'alue\x20!=\x20va'+'lue\x20check\x20'+'for\x20NaN\x20as'+'\x20isnan()\x20i'+'s\x20not\x20avai'+'lable\x20in\x20W'+'GSL\x0a\x20\x20\x20\x20re'+'turn\x20selec'+'t(value,\x200'+'.0,\x20value\x20'+'!=\x20value);'+'\x0a}\x0a\x0afn\x20get'+'RectLightD'+'iffuse(wor'+'ldNormal:\x20'+'vec3f,\x20vie'+'wDir:\x20vec3'+'f,\x20lightDi'+'r:\x20vec3f,\x20'+'lightDirNo'+'rm:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20id'+'entityMat\x20'+'=\x20mat3x3f('+'vec3f(1.0,'+'\x200.0,\x200.0)'+',\x20vec3f(0.'+'0,\x201.0,\x200.'+'0),\x20vec3f('+'0.0,\x200.0,\x20'+'1.0));\x0a\x20\x20\x20'+'\x20return\x20LT'+'C_Evaluate'+'Rect(\x20worl'+'dNormal,\x20v'+'iewDir,\x20vP'+'ositionW,\x20'+'identityMa'+'t,\x20dLTCCoo'+'rds\x20);\x0a}\x0a\x0a'+'fn\x20getDisk'+'LightDiffu'+'se(worldNo'+'rmal:\x20vec3')+('f,\x20viewDir'+':\x20vec3f,\x20l'+'ightDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20identi'+'tyMat\x20=\x20ma'+'t3x3f(vec3'+'f(1.0,\x200.0'+',\x200.0),\x20ve'+'c3f(0.0,\x201'+'.0,\x200.0),\x20'+'vec3f(0.0,'+'\x200.0,\x201.0)'+');\x0a\x20\x20\x20\x20ret'+'urn\x20FixNan'+'(LTC_Evalu'+'ateDisk(\x20w'+'orldNormal'+',\x20viewDir,'+'\x20vPosition'+'W,\x20identit'+'yMat,\x20dLTC'+'Coords\x20));'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tDiffuse(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20let\x20fall'+'off:\x20f32\x20='+'\x20dSphereRa'+'dius\x20/\x20(do'+'t(lightDir'+',\x20lightDir'+')\x20+\x20dSpher'+'eRadius);\x0a'+'\x20\x20\x20\x20return'+'\x20FixNan(ge'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNorm)\x20'+'*\x20falloff)'+';\x0a}\x0a\x0afn\x20ge'+'tLTCLightI'+'nvMat(uv:\x20'+'vec2f)\x20->\x20'+'mat3x3f\x20{\x0a'+'\x20\x20\x20\x20let\x20t1'+':\x20vec4f\x20=\x20'+'textureSam'+'pleLevel(a'+'reaLightsL'+'utTex1,\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er,\x20uv,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(\x20'+'t1.x,\x200.0,'+'\x20t1.y\x20),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(\x200.0,\x201'+'.0,\x200.0\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(\x20t1.z'+',\x200.0,\x20t1.'+'w\x20)\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight')+('InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getRectLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20cal'+'cDiskLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getDiskLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcDiskLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tSpecular('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'DiskLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir,\x20'+'dLTCUV);\x0a}'+'\x0a'),sD='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_me'+'talness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getMe'+'talness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'metalness:'+'\x20f32\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20metal'+'ness\x20=\x20met'+'alness\x20*\x20u'+'niform.mat'+'erial_meta'+'lness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'metalness\x20'+'=\x20metalnes'+'s\x20*\x20textur'+'eSampleBia'+'s({STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+',\x20{STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_METALN'+'ESS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_METALNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_VE'+'RTEX\x0a\x20\x20\x20\x20m'+'etalness\x20='+'\x20metalness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'METALNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dMetal'+'ness\x20=\x20met'+'alness;\x0a}\x0a',iD='\x0avar\x20textu'+'re_msdfMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20texture'+'_msdfMapSa'+'mpler:\x20sam'+'pler;\x0a\x0afn\x20'+'median(r:\x20'+'f32,\x20g:\x20f3'+'2,\x20b:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(min(r'+',\x20g),\x20min('+'max(r,\x20g),'+'\x20b));\x0a}\x0a\x0af'+'n\x20map(min:'+'\x20f32,\x20max:'+'\x20f32,\x20v:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(v\x20-\x20m'+'in)\x20/\x20(max'+'\x20-\x20min);\x0a}'+'\x0a\x0auniform\x20'+'font_sdfIn'+'tensity:\x20f'+'32;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20font_px'+'range:\x20f32'+';\x20\x20\x20\x20\x20\x20//\x20'+'the\x20number'+'\x20of\x20pixels'+'\x20between\x20i'+'nside\x20and\x20'+'outside\x20th'+'e\x20font\x20in\x20'+'SDF\x0aunifor'+'m\x20font_tex'+'tureWidth:'+'\x20f32;\x20//\x20t'+'he\x20width\x20o'+'f\x20the\x20text'+'ure\x20atlas\x0a'+'\x0a#ifndef\x20L'+'IT_MSDF_TE'+'XT_ATTRIBU'+'TE\x0a\x20\x20\x20\x20uni'+'form\x20outli'+'ne_color:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'utline_thi'+'ckness:\x20f3'+'2;\x0a\x20\x20\x20\x20uni'+'form\x20shado'+'w_color:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'uniform\x20sh'+'adow_offse'+'t:\x20vec2f;\x0a'+'#else\x0a\x20\x20\x20\x20'+'varying\x20ou'+'tline_colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20outline_'+'thickness:'+'\x20f32;\x0a\x20\x20\x20\x20'+'varying\x20sh'+'adow_color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20varying'+'\x20shadow_of'+'fset:\x20vec2'+'f;\x0a#endif\x0a'+'\x0afn\x20applyM'+'sdf(color_'+'in:\x20vec4f)'+'\x20->\x20vec4f\x20'+'{\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_M'+'SDF_TEXT_A'+'TTRIBUTE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20uniform.'+'outline_co'+'lor;\x0a\x20\x20\x20\x20\x20'+('\x20\x20\x20var\x20out'+'line_thick'+'nessValue\x20'+'=\x20uniform.'+'outline_th'+'ickness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_co'+'lorValue\x20='+'\x20uniform.s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_offsetVa'+'lue\x20=\x20unif'+'orm.shadow'+'_offset;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utline_thi'+'cknessValu'+'e\x20=\x20outlin'+'e_thicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_colorVal'+'ue\x20=\x20shado'+'w_color;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_of'+'fsetValue\x20'+'=\x20shadow_o'+'ffset;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20Conv'+'ert\x20to\x20lin'+'ear\x20space\x20'+'before\x20pro'+'cessing\x0a\x20\x20'+'\x20\x20//\x20TODO:'+'\x20ideally\x20t'+'his\x20would\x20'+'receive\x20th'+'e\x20color\x20in'+'\x20linear\x20sp'+'ace,\x20but\x20t'+'hat\x20would\x20'+'require\x20la'+'rger\x20chang'+'es\x0a\x20\x20\x20\x20//\x20'+'on\x20the\x20eng'+'ine\x20side,\x20'+'with\x20the\x20w'+'ay\x20premult'+'iplied\x20alp'+'ha\x20is\x20hand'+'led\x20as\x20wel'+'l.\x0a\x20\x20\x20\x20var'+'\x20color\x20=\x20v'+'ec4f(gamma'+'CorrectInp'+'utVec3(col'+'or_in.rgb)'+',\x20color_in'+'.a);\x0a\x0a\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20field\x0a'+'\x20\x20\x20\x20let\x20ts'+'ample:\x20vec'+'3f\x20=\x20textu'+'reSample(t'+'exture_msd'+'fMap,\x20text'+'ure_msdfMa'+'pSampler,\x20'+'vUv0).rgb;'+'\x0a\x20\x20\x20\x20let\x20u'+'vShdw:\x20vec'+'2f\x20=\x20vUv0\x20'+'-\x20shadow_o'+'ffsetValue'+';\x0a\x20\x20\x20\x20let\x20'+'ssample:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'(texture_m'+'sdfMap,\x20te'+'xture_msdf'+'MapSampler'+',\x20uvShdw).'+'rgb;\x0a\x0a\x20\x20\x20\x20'+'//\x20get\x20the'+'\x20signed\x20di'+'stance\x20val'+'ue\x0a\x20\x20\x20\x20let')+('\x20sigDist:\x20'+'f32\x20=\x20medi'+'an(tsample'+'.r,\x20tsampl'+'e.g,\x20tsamp'+'le.b);\x0a\x20\x20\x20'+'\x20var\x20sigDi'+'stShdw:\x20f3'+'2\x20=\x20median'+'(ssample.r'+',\x20ssample.'+'g,\x20ssample'+'.b);\x0a\x0a\x20\x20\x20\x20'+'//\x20smoothi'+'ng\x20limit\x20-'+'\x20smaller\x20v'+'alue\x20makes'+'\x20for\x20sharp'+'er\x20but\x20mor'+'e\x20aliased\x20'+'text,\x20espe'+'cially\x20on\x20'+'angles\x0a\x20\x20\x20'+'\x20//\x20too\x20la'+'rge\x20value\x20'+'(0.5)\x20crea'+'tes\x20a\x20dark'+'\x20glow\x20arou'+'nd\x20the\x20let'+'ters\x0a\x20\x20\x20\x20l'+'et\x20smoothi'+'ngMax:\x20f32'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20let'+'\x20w:\x20vec2f\x20'+'=\x20abs(dpdx'+'(vUv0))\x20+\x20'+'abs(dpdy(v'+'Uv0));\x0a\x20\x20\x20'+'\x20let\x20smoot'+'hing:\x20f32\x20'+'=\x20clamp(w.'+'x\x20*\x20unifor'+'m.font_tex'+'tureWidth\x20'+'/\x20uniform.'+'font_pxran'+'ge,\x200.0,\x20s'+'moothingMa'+'x);\x0a\x0a\x20\x20\x20\x20l'+'et\x20mapMin:'+'\x20f32\x20=\x200.0'+'5;\x0a\x20\x20\x20\x20let'+'\x20mapMax:\x20f'+'32\x20=\x20clamp'+'(1.0\x20-\x20uni'+'form.font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20let\x20si'+'gDistInner'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist);\x0a\x20\x20'+'\x20\x20let\x20sigD'+'istOutline'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist\x20+\x20ou'+'tline_thic'+'knessValue'+');\x0a\x20\x20\x20\x20sig'+'DistShdw\x20='+'\x20map(mapMi'+'n,\x20mapMax,'+'\x20sigDistSh'+'dw\x20+\x20outli'+'ne_thickne'+'ssValue);\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'enter:\x20f32'+'\x20=\x200.5;\x0a\x20\x20'+'\x20\x20//\x20calcu'+'late\x20smoot'+'hing\x20and\x20u'+'se\x20to\x20gene')+('rate\x20opaci'+'ty\x0a\x20\x20\x20\x20let'+'\x20inside:\x20f'+'32\x20=\x20smoot'+'hstep(cent'+'er\x20-\x20smoot'+'hing,\x20cent'+'er\x20+\x20smoot'+'hing,\x20sigD'+'istInner);'+'\x0a\x20\x20\x20\x20let\x20o'+'utline:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stOutline)'+';\x0a\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20let\x20tc'+'olor_outli'+'ne:\x20vec4f\x20'+'=\x20outline\x20'+'*\x20vec4f(ou'+'tline_colo'+'rValue.a\x20*'+'\x20outline_c'+'olorValue.'+'rgb,\x20outli'+'ne_colorVa'+'lue.a);\x0a\x20\x20'+'\x20\x20var\x20tcol'+'or:\x20vec4f\x20'+'=\x20select(v'+'ec4f(0.0),'+'\x20tcolor_ou'+'tline,\x20out'+'line\x20>\x20ins'+'ide);\x0a\x20\x20\x20\x20'+'tcolor\x20=\x20m'+'ix(tcolor,'+'\x20color,\x20in'+'side);\x0a\x0a\x20\x20'+'\x20\x20let\x20scol'+'or_shadow:'+'\x20vec4f\x20=\x20s'+'hadow\x20*\x20ve'+'c4f(shadow'+'_colorValu'+'e.a\x20*\x20shad'+'ow_colorVa'+'lue.rgb,\x20s'+'hadow_colo'+'rValue.a);'+'\x0a\x20\x20\x20\x20let\x20s'+'color:\x20vec'+'4f\x20=\x20selec'+'t(tcolor,\x20'+'scolor_sha'+'dow,\x20shado'+'w\x20>\x20outlin'+'e);\x0a\x20\x20\x20\x20tc'+'olor\x20=\x20mix'+'(scolor,\x20t'+'color,\x20out'+'line);\x0a\x0a\x20\x20'+'\x20\x20//\x20Conve'+'rt\x20back\x20to'+'\x20gamma\x20spa'+'ce\x20before\x20'+'returning\x0a'+'\x20\x20\x20\x20tcolor'+'\x20=\x20vec4f(g'+'ammaCorrec'+'tOutput(tc'+'olor.rgb),'+'\x20tcolor.a)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20tcolor'+';\x0a}\x0a'),rD='\x0a\x0afn\x20getSp'+'ecularModu'+'late(specu'+'larity:\x20ve'+'c3f,\x20albed'+'o:\x20vec3f,\x20'+'metalness:'+'\x20f32,\x20f0:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20dielec'+'tricF0:\x20ve'+'c3f\x20=\x20f0\x20*'+'\x20speculari'+'ty;\x0a\x20\x20\x20\x20re'+'turn\x20mix(d'+'ielectricF'+'0,\x20albedo,'+'\x20metalness'+');\x0a}\x0a\x0afn\x20g'+'etAlbedoMo'+'dulate(alb'+'edo:\x20vec3f'+',\x20metalnes'+'s:\x20f32)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'albedo\x20*\x20('+'1.0\x20-\x20meta'+'lness);\x0a}\x0a',aD='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var\x20morph'+'Texture:\x20t'+'exture_2d_'+'array<f32>'+';\x0a\x20\x20\x20\x20unif'+'orm\x20morphF'+'actor:\x20arr'+'ay<f32,\x20{M'+'ORPH_TEXTU'+'RE_MAX_COU'+'NT}>;\x0a\x20\x20\x20\x20'+'uniform\x20mo'+'rphIndex:\x20'+'array<u32,'+'\x20{MORPH_TE'+'XTURE_MAX_'+'COUNT}>;\x0a\x20'+'\x20\x20\x20uniform'+'\x20count:\x20u3'+'2;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x0a\x20\x20'+'\x20\x20fn\x20fragm'+'entMain(in'+'put\x20:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20color\x20='+'\x20vec3f(0,\x20'+'0,\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20t'+'extureDims'+'\x20=\x20texture'+'Dimensions'+'(morphText'+'ure);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20pi'+'xelCoords\x20'+'=\x20vec2i(in'+'put.uv0\x20*\x20'+'vec2f(text'+'ureDims));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'u32\x20=\x200;\x20i'+'\x20<\x20uniform'+'.count;\x20i\x20'+'=\x20i\x20+\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'tureIndex:'+'\x20u32\x20=\x20uni'+'form.morph'+'Index[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20delta\x20'+'=\x20textureL'+'oad(morphT'+'exture,\x20pi'+'xelCoords,'+'\x20textureIn'+'dex,\x200).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20+=\x20unifor'+'m.morphFac'+'tor[i].ele'+'ment\x20*\x20del'+'ta;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'color,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',nD='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',oD='\x0aattribute'+'\x20vertex_ou'+'tlineParam'+'eters:\x20vec'+'3f;\x0aattrib'+'ute\x20vertex'+'_shadowPar'+'ameters:\x20v'+'ec3f;\x0a\x0avar'+'ying\x20outli'+'ne_color:\x20'+'vec4f;\x0avar'+'ying\x20outli'+'ne_thickne'+'ss:\x20f32;\x0av'+'arying\x20sha'+'dow_color:'+'\x20vec4f;\x0ava'+'rying\x20shad'+'ow_offset:'+'\x20vec2f;\x0a\x0av'+'ar<private'+'>\x20dOutline'+'Color:\x20vec'+'4f;\x0avar<pr'+'ivate>\x20dOu'+'tlineThick'+'ness:\x20f32;'+'\x0avar<priva'+'te>\x20dShado'+'wColor:\x20ve'+'c4f;\x0avar<p'+'rivate>\x20dS'+'hadowOffse'+'t:\x20vec2f;\x0a'+'\x0afn\x20unpack'+'MsdfParams'+'()\x20{\x0a\x20\x20\x20\x20l'+'et\x20little:'+'\x20vec3f\x20=\x20v'+'ertex_outl'+'ineParamet'+'ers\x20%\x20vec3'+'f(256.0);\x0a'+'\x20\x20\x20\x20let\x20bi'+'g:\x20vec3f\x20='+'\x20(vertex_o'+'utlinePara'+'meters\x20-\x20l'+'ittle)\x20/\x202'+'56.0;\x0a\x0a\x20\x20\x20'+'\x20dOutlineC'+'olor\x20=\x20vec'+'4f(little.'+'x,\x20big.x,\x20'+'little.y,\x20'+'big.y)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20//\x20_outli'+'neThicknes'+'sScale\x20==='+'\x200.2\x0a\x20\x20\x20\x20d'+'OutlineThi'+'ckness\x20=\x20l'+'ittle.z\x20/\x20'+'255.0\x20*\x200.'+'2;\x0a\x0a\x20\x20\x20\x20le'+'t\x20little_s'+'hadow\x20=\x20ve'+'rtex_shado'+'wParameter'+'s\x20%\x20vec3f('+'256.0);\x0a\x20\x20'+'\x20\x20let\x20big_'+'shadow\x20=\x20('+'vertex_sha'+'dowParamet'+'ers\x20-\x20litt'+'le_shadow)'+'\x20/\x20256.0;\x0a'+'\x0a\x20\x20\x20\x20dShad'+'owColor\x20=\x20'+'vec4f(litt'+'le_shadow.'+'x,\x20big_sha'+'dow.x,\x20lit'+'tle_shadow'+'.y,\x20big_sh'+'adow.y)\x20/\x20'+'255.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+('ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20dShad'+'owOffset\x20='+'\x20(vec2f(li'+'ttle_shado'+'w.z,\x20big_s'+'hadow.z)\x20/'+'\x20127.0\x20-\x201'+'.0)\x20*\x200.00'+'5;\x0a}\x0a'),lD='\x0avar<priva'+'te>\x20dNorma'+'lMatrix:\x20m'+'at3x3f;\x0a\x0af'+'n\x20getNorma'+'l()\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20d'+'NormalMatr'+'ix\x20=\x20getNo'+'rmalMatrix'+'(dModelMat'+'rix);\x0a\x20\x20\x20\x20'+'let\x20localN'+'ormal:\x20vec'+'3f\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}',cD='\x0a\x0aattribut'+'e\x20vertex_n'+'ormal:\x20vec'+'3f;\x0a\x0aunifo'+'rm\x20matrix_'+'normal:\x20ma'+'t3x3f;\x0a\x0a#i'+'fdef\x20MORPH'+'ING_NORMAL'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MORPHING'+'_INT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20mor'+'phNormalTe'+'x:\x20texture'+'_2d<u32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphNor'+'malTexSamp'+'ler:\x20sampl'+'er;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hNormalTex'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20morphNorm'+'alTexSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0afn\x20getLo'+'calNormal('+'vertexNorm'+'al:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20localNorm'+'al:\x20vec3f\x20'+'=\x20vertexNo'+'rmal;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_NOR'+'MAL\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20mor'+'phUV:\x20vec2'+'i\x20=\x20getTex'+'tureMorphC'+'oords();\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_INT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20morphN'+'ormalInt:\x20'+'vec4u\x20=\x20te'+'xtureLoad('+'morphNorma'+'lTex,\x20morp'+'hUV,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20morph'+'NormalF:\x20v'+'ec3f\x20=\x20vec'+'3f(morphNo'+'rmalInt.xy'+'z)\x20/\x2065535'+'.0\x20*\x202.0\x20-'+'\x201.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormalF;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'morphNorma'+'l:\x20vec3f\x20='+'\x20textureLo'+'ad(morphNo'+'rmalTex,\x20m'+'orphUV,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormal;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20lo'+'calNormal;'+'\x0a}\x0a\x0a#if\x20de'+'fined(SKIN'+')\x20||\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20fn\x20get'+('NormalMatr'+'ix(modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ma'+'t3x3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20mat3x3f'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20fn'+'\x20getNormal'+'Matrix(mod'+'elMatrix:\x20'+'mat4x4f)\x20-'+'>\x20mat3x3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20mat'+'3x3f(model'+'Matrix[0].'+'xyz,\x20model'+'Matrix[1].'+'xyz,\x20model'+'Matrix[2].'+'xyz);\x0a\x20\x20\x20\x20'+'}\x0a#else\x0a\x20\x20'+'\x20\x20fn\x20getNo'+'rmalMatrix'+'(modelMatr'+'ix:\x20mat4x4'+'f)\x20->\x20mat3'+'x3f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_norm'+'al;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),hD='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_bu'+'mpiness:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20un'+'iform\x20mate'+'rial_norma'+'lDetailMap'+'Bumpiness:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20//\x20https:'+'//blog.sel'+'fshadow.co'+'m/publicat'+'ions/blend'+'ing-in-det'+'ail/#detai'+'l-oriented'+'\x0a\x20\x20\x20\x20fn\x20bl'+'endNormals'+'(inN1:\x20vec'+'3f,\x20inN2:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'n1:\x20vec3f\x20'+'=\x20inN1\x20+\x20v'+'ec3f(0.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20n2:\x20vec'+'3f\x20=\x20inN2\x20'+'*\x20vec3f(-1'+'.0,\x20-1.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20n1\x20*\x20dot('+'n1,\x20n2)\x20/\x20'+'n1.z\x20-\x20n2;'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0afn\x20ge'+'tNormal()\x20'+'{\x0a#ifdef\x20S'+'TD_NORMAL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20var\x20norm'+'alMap:\x20vec'+'3f\x20=\x20{STD_'+'NORMAL_TEX'+'TURE_DECOD'+'E}(texture'+'SampleBias'+'({STD_NORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_NORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_NOR'+'MAL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias));\x0a'+'\x20\x20\x20\x20normal'+'Map\x20=\x20mix('+'vec3f(0.0,'+'\x200.0,\x201.0)'+',\x20normalMa'+'p,\x20uniform'+'.material_'+'bumpiness)'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_NO'+'RMALDETAIL'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20normalDet'+'ailMap:\x20ve'+'c3f\x20=\x20{STD'+'_NORMALDET'+'AIL_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE_NAME},'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_NAM'+'E}Sampler,'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_UV}'+(',\x20uniform.'+'textureBia'+'s));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalD'+'etailMap\x20='+'\x20mix(vec3f'+'(0.0,\x200.0,'+'\x201.0),\x20nor'+'malDetailM'+'ap,\x20unifor'+'m.material'+'_normalDet'+'ailMapBump'+'iness);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20norm'+'alMap\x20=\x20bl'+'endNormals'+'(normalMap'+',\x20normalDe'+'tailMap);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20nor'+'malize(dTB'+'N\x20*\x20normal'+'Map);\x0a#els'+'e\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a'),dD='\x0auniform\x20m'+'aterial_op'+'acity:\x20f32'+';\x0a\x0afn\x20getO'+'pacity()\x20{'+'\x0a\x20\x20\x20\x20dAlph'+'a\x20=\x20unifor'+'m.material'+'_opacity;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E\x0a\x20\x20\x20\x20dAlp'+'ha\x20=\x20dAlph'+'a\x20*\x20textur'+'eSampleBia'+'s({STD_OPA'+'CITY_TEXTU'+'RE_NAME},\x20'+'{STD_OPACI'+'TY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'OPACITY_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20=\x20dA'+'lpha\x20*\x20cla'+'mp(vVertex'+'Color.{STD'+'_OPACITY_V'+'ERTEX_CHAN'+'NEL},\x200.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',fD='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20blueNo'+'iseJitter:'+'\x20vec4f;\x0a\x0a#'+'if\x20STD_OPA'+'CITY_DITHE'+'R\x20==\x20BLUEN'+'OISE\x0a\x20\x20\x20\x20v'+'ar\x20blueNoi'+'seTex32\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20blueN'+'oiseTex32S'+'ampler\x20:\x20s'+'ampler;\x0a#e'+'ndif\x0a\x0afn\x20o'+'pacityDith'+'er(alpha:\x20'+'f32,\x20id:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'#if\x20STD_OP'+'ACITY_DITH'+'ER\x20==\x20BAYE'+'R8\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20nois'+'e:\x20f32\x20=\x20b'+'ayer8(floo'+'r((pcPosit'+'ion.xy\x20+\x20u'+'niform.blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+')\x20%\x20vec2f('+'8.0)))\x20/\x206'+'4.0;\x0a\x0a\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20=='+'\x20BLUENOISE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uv\x20'+'=\x20fract(pc'+'Position.x'+'y\x20/\x2032.0\x20+'+'\x20uniform.b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20noise:\x20f3'+'2\x20=\x20textur'+'eSampleLev'+'el(blueNoi'+'seTex32,\x20b'+'lueNoiseTe'+'x32Sampler'+',\x20uv,\x200.0)'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20IGNNOI'+'SE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ba'+'sed\x20on\x20htt'+'ps://www.i'+'ryoku.com/'+'next-gener'+'ation-post'+'-processin'+'g-in-call-'+'of-duty-ad'+'vanced-war'+'fare/\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20magic\x20=\x20'+'vec3f(0.06'+'711056,\x200.'+'00583715,\x20'+'52.9829189'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'oise:\x20f32\x20'+'=\x20fract(ma'+'gic.z\x20*\x20fr'+'act(dot(pc'+'Position.x'+'y\x20+\x20unifor'+'m.blueNois'+'eJitter.xy'+'\x20+\x20id,\x20mag'+('ic.xy)));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20conve'+'rt\x20the\x20noi'+'se\x20to\x20line'+'ar\x20space,\x20'+'as\x20that\x20is'+'\x20specified'+'\x20in\x20sRGB\x20s'+'pace\x20(stor'+'es\x20percept'+'ual\x20values'+')\x0a\x20\x20\x20\x20nois'+'e\x20=\x20pow(no'+'ise,\x202.2);'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'alpha\x20<\x20no'+'ise)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),uD='\x0a',pD='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(outp'+'ut.color.r'+'gb,\x20litArg'+'s_opacity)'+';\x0a\x0a#elif\x20L'+'IT_BLEND_T'+'YPE\x20==\x20PRE'+'MULTIPLIED'+'\x0a\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(out'+'put.color.'+'rgb\x20*\x20litA'+'rgs_opacit'+'y,\x20litArgs'+'_opacity);'+'\x0a\x0a#else\x0a\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(output'+'.color.rgb'+',\x201.0);\x0a\x0a#'+'endif\x0a',mD='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0avar\x20sour'+'ce:\x20textur'+'e_2d<f32>;'+'\x0avar\x20sourc'+'eSampler:\x20'+'sampler;\x0a\x0a'+'@fragment\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'textureSam'+'ple(source'+',\x20sourceSa'+'mpler,\x20inp'+'ut.vUv0);\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'+'\x0a',_D='\x0a\x0auniform\x20'+'material_s'+'heen:\x20vec3'+'f;\x0a\x0afn\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20var\x20sh'+'eenColor\x20='+'\x20uniform.m'+'aterial_sh'+'een;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_TEX'+'TURE\x0a\x20\x20\x20\x20s'+'heenColor\x20'+'=\x20sheenCol'+'or\x20*\x20{STD_'+'SHEEN_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SHEEN'+'_TEXTURE_N'+'AME},\x20{STD'+'_SHEEN_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEEN_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as)).{STD_'+'SHEEN_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_VER'+'TEX\x0a\x20\x20\x20\x20sh'+'eenColor\x20='+'\x20sheenColo'+'r\x20*\x20satura'+'te3(vVerte'+'xColor.{ST'+'D_SHEEN_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20sSpecula'+'rity\x20=\x20she'+'enColor;\x0a}'+'\x0a',gD='\x0auniform\x20m'+'aterial_sh'+'eenGloss:\x20'+'f32;\x0a\x0afn\x20g'+'etSheenGlo'+'ssiness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'sheenGloss'+'iness\x20=\x20un'+'iform.mate'+'rial_sheen'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SHEENGL'+'OSS_TEXTUR'+'E\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_SHEEN'+'GLOSS_TEXT'+'URE_NAME},'+'\x20{STD_SHEE'+'NGLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_UV},\x20un'+'iform.text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20=\x20'+'sheenGloss'+'iness\x20*\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'GLOSS_VERT'+'EX_CHANNEL'+'});\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEENGLOS'+'S_INVERT\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20='+'\x201.0\x20-\x20she'+'enGlossine'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'sGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'+\x200.000000'+'1;\x0a}\x0a',SD='\x0auniform\x20m'+'aterial_he'+'ightMapFac'+'tor:\x20f32;\x0a'+'\x0afn\x20getPar'+'allax()\x20{\x0a'+'\x20\x20\x20\x20var\x20pa'+'rallaxScal'+'e\x20=\x20unifor'+'m.material'+'_heightMap'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20var\x20hei'+'ght:\x20f32\x20='+'\x20textureSa'+'mpleBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_HEIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_HEIGHT_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'height\x20=\x20h'+'eight\x20*\x20pa'+'rallaxScal'+'e\x20-\x20parall'+'axScale\x20*\x20'+'0.5;\x0a\x20\x20\x20\x20v'+'ar\x20viewDir'+'T:\x20vec3f\x20='+'\x20dViewDirW'+'\x20*\x20dTBN;\x0a\x0a'+'\x20\x20\x20\x20viewDi'+'rT.z\x20=\x20vie'+'wDirT.z\x20+\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',yD='\x0auniform\x20m'+'eshInstanc'+'eId:\x20u32;\x0a'+'\x0afn\x20getPic'+'kOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20let\x20i'+'nv:\x20vec4f\x20'+'=\x20vec4f(1.'+'0\x20/\x20255.0)'+';\x0a\x20\x20\x20\x20let\x20'+'shifts:\x20ve'+'c4u\x20=\x20vec4'+'u(16u,\x208u,'+'\x200u,\x2024u);'+'\x0a\x20\x20\x20\x20let\x20c'+'ol:\x20vec4u\x20'+'=\x20(vec4u(u'+'niform.mes'+'hInstanceI'+'d)\x20>>\x20shif'+'ts)\x20&\x20vec4'+'u(0xffu);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4f(col'+')\x20*\x20inv;\x0a}',vD='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20dReflDi'+'rW\x20=\x20norma'+'lize(-refl'+'ect(viewDi'+'r,\x20worldNo'+'rmal));\x0a}\x0a',xD='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20rou'+'ghness:\x20f3'+'2\x20=\x20sqrt(1'+'.0\x20-\x20min(g'+'loss,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20directio'+'n:\x20vec2f\x20='+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20anisotrop'+'y:\x20f32\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cDirection'+':\x20vec3f\x20=\x20'+'anisotropi'+'cB;\x0a\x20\x20\x20\x20le'+'t\x20anisotro'+'picTangent'+':\x20vec3f\x20=\x20'+'cross(anis'+'otropicDir'+'ection,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20let\x20anis'+'otropicNor'+'mal:\x20vec3f'+'\x20=\x20cross(a'+'nisotropic'+'Tangent,\x20a'+'nisotropic'+'Direction)'+';\x0a\x20\x20\x20\x20let\x20'+'bendFactor'+':\x20f32\x20=\x201.'+'0\x20-\x20anisot'+'ropy\x20*\x20(1.'+'0\x20-\x20roughn'+'ess);\x0a\x20\x20\x20\x20'+'let\x20bendFa'+'ctor4:\x20f32'+'\x20=\x20bendFac'+'tor\x20*\x20bend'+'Factor\x20*\x20b'+'endFactor\x20'+'*\x20bendFact'+'or;\x0a\x20\x20\x20\x20le'+'t\x20bentNorm'+'al:\x20vec3f\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}',TD='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0afn\x20addRe'+'flectionCC'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20ccRef'+'lection\x20=\x20'+'ccReflecti'+'on\x20+\x20calcR'+'eflection('+'reflDir,\x20g'+'loss);\x0a}\x0a#'+'endif\x0a',wD='\x0avar\x20textu'+'re_cubeMap'+':\x20texture_'+'cube<f32>;'+'\x0avar\x20textu'+'re_cubeMap'+'Sampler:\x20s'+'ampler;\x0aun'+'iform\x20mate'+'rial_refle'+'ctivity:\x20f'+'32;\x0a\x0afn\x20ca'+'lcReflecti'+'on(reflDir'+':\x20vec3f,\x20g'+'loss:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'lookupVec:'+'\x20vec3f\x20=\x20c'+'ubeMapProj'+'ect(reflDi'+'r);\x0a\x20\x20\x20\x20lo'+'okupVec.x\x20'+'=\x20lookupVe'+'c.x\x20*\x20-1.0'+';\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_cubeMa'+'p,\x20texture'+'_cubeMapSa'+'mpler,\x20loo'+'kupVec));\x0a'+'}\x0a\x0afn\x20addR'+'eflection('+'reflDir:\x20v'+'ec3f,\x20glos'+'s:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20dR'+'eflection\x20'+'+\x20vec4f(ca'+'lcReflecti'+'on(reflDir'+',\x20gloss),\x20'+'uniform.ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',ED='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20var\x20t'+'exture_env'+'Atlas:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'envAtlasSa'+'mpler:\x20sam'+'pler;\x0a#end'+'if\x0a\x0avar\x20te'+'xture_cube'+'Map:\x20textu'+'re_cube<f3'+'2>;\x0avar\x20te'+'xture_cube'+'MapSampler'+':\x20sampler;'+'\x0auniform\x20m'+'aterial_re'+'flectivity'+':\x20f32;\x0a\x0afn'+'\x20calcRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20dir:\x20ve'+'c3f\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20toSph'+'ericalUv(d'+'ir);\x0a\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20roughne'+'ss\x20level\x0a\x20'+'\x20\x20\x20let\x20lev'+'el:\x20f32\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20let\x20ile'+'vel:\x20f32\x20='+'\x20floor(lev'+'el);\x0a\x20\x20\x20\x20l'+'et\x20flevel:'+'\x20f32\x20=\x20lev'+'el\x20-\x20ileve'+'l;\x0a\x0a\x20\x20\x20\x20le'+'t\x20sharp:\x20v'+'ec3f\x20=\x20{re'+'flectionCu'+'bemapDecod'+'e}(texture'+'Sample(tex'+'ture_cubeM'+'ap,\x20textur'+'e_cubeMapS'+'ampler,\x20di'+'r));\x0a\x20\x20\x20\x20l'+'et\x20roughA:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+')));\x0a\x20\x20\x20\x20l'+'et\x20roughB:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(shar'+'p,\x20mix(rou'+('ghA,\x20rough'+'B,\x20flevel)'+',\x20min(leve'+'l,\x201.0)));'+'\x0a}\x0a\x0afn\x20add'+'Reflection'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20dRefl'+'ection\x20=\x20d'+'Reflection'+'\x20+\x20vec4f(c'+'alcReflect'+'ion(reflDi'+'r,\x20gloss),'+'\x20uniform.m'+'aterial_re'+'flectivity'+');\x0a}\x0a'),bD='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_envA'+'tlasSample'+'r:\x20sampler'+';\x0a#endif\x0au'+'niform\x20mat'+'erial_refl'+'ectivity:\x20'+'f32;\x0a\x0a//\x20c'+'alculate\x20m'+'ip\x20level\x20f'+'or\x20shiny\x20r'+'eflection\x20'+'given\x20equi'+'rect\x20coord'+'s\x20uv.\x0afn\x20s'+'hinyMipLev'+'el(uv:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20dx:\x20vec2f'+'\x20=\x20dpdx(uv'+');\x0a\x20\x20\x20\x20let'+'\x20dy:\x20vec2f'+'\x20=\x20dpdy(uv'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20second\x20dF'+'\x20at\x20180\x20de'+'grees\x0a\x20\x20\x20\x20'+'let\x20uv2:\x20v'+'ec2f\x20=\x20vec'+'2f(fract(u'+'v.x\x20+\x200.5)'+',\x20uv.y);\x0a\x20'+'\x20\x20\x20let\x20dx2'+':\x20vec2f\x20=\x20'+'dpdx(uv2);'+'\x0a\x20\x20\x20\x20let\x20d'+'y2:\x20vec2f\x20'+'=\x20dpdy(uv2'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20min\x20of\x20bo'+'th\x20sets\x20of'+'\x20dF\x20to\x20han'+'dle\x20discon'+'tinuity\x20at'+'\x20the\x20azim\x20'+'edge\x0a\x20\x20\x20\x20l'+'et\x20maxd:\x20f'+'32\x20=\x20min(m'+'ax(dot(dx,'+'\x20dx),\x20dot('+'dy,\x20dy)),\x20'+'max(dot(dx'+'2,\x20dx2),\x20d'+'ot(dy2,\x20dy'+'2)));\x0a\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(0.5\x20*\x20'+'log2(maxd)'+'\x20-\x201.0\x20+\x20u'+'niform.tex'+'tureBias,\x20'+'0.0,\x205.0);'+'\x0a}\x0a\x0afn\x20cal'+'cReflectio'+'n(reflDir:'+'\x20vec3f,\x20gl'+'oss:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20d'+'ir:\x20vec3f\x20'+'=\x20cubeMapP'+'roject(ref'+'lDir)\x20*\x20ve'+'c3f(-1.0,\x20'+'1.0,\x201.0);'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20toSpheric'+'alUv(dir);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20r'+'oughness\x20l'+'evel\x0a\x20\x20\x20\x20l'+'et\x20level:\x20'+'f32\x20=\x20satu'+'rate(1.0\x20-'+'\x20gloss)\x20*\x20'+'5.0;\x0a\x20\x20\x20\x20l'+('et\x20ilevel:'+'\x20f32\x20=\x20flo'+'or(level);'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ccessing\x20t'+'he\x20shiny\x20('+'top\x20level)'+'\x20reflectio'+'n\x20-\x20perfor'+'m\x20manual\x20m'+'ipmap\x20look'+'up\x0a\x20\x20\x20\x20let'+'\x20level2:\x20f'+'32\x20=\x20shiny'+'MipLevel(u'+'v\x20*\x20atlasS'+'ize);\x0a\x20\x20\x20\x20'+'let\x20ilevel'+'2:\x20f32\x20=\x20f'+'loor(level'+'2);\x0a\x0a\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20uv1:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20weight:'+'\x20f32;\x0a\x20\x20\x20\x20'+'if\x20(ilevel'+'\x20==\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'1\x20=\x20mapShi'+'nyUv(uv,\x20i'+'level2\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20weight\x20'+'=\x20level2\x20-'+'\x20ilevel2;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20access'+'ing\x20rough\x20'+'reflection'+'\x20-\x20just\x20sa'+'mple\x20the\x20s'+'ame\x20part\x20t'+'wice\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv0\x20=\x20m'+'apRoughnes'+'sUv(uv,\x20il'+'evel);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv1\x20='+'\x20uv0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x200.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20linearA'+':\x20vec3f\x20=\x20'+'{reflectio'+'nDecode}(t'+'extureSamp'+'le(texture'+'_envAtlas,'+'\x20texture_e'+'nvAtlasSam'+'pler,\x20uv0)'+');\x0a\x20\x20\x20\x20let'+'\x20linearB:\x20'+'vec3f\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'tureSample'+'(texture_e'+'nvAtlas,\x20t'+'exture_env'+'AtlasSampl'+'er,\x20uv1));'+'\x0a\x20\x20\x20\x20let\x20l'+'inear0:\x20ve'+'c3f\x20=\x20mix('+'linearA,\x20l'+'inearB,\x20we'+'ight);\x0a\x20\x20\x20'+'\x20let\x20linea'+'r1:\x20vec3f\x20'+'=\x20{reflect'+'ionDecode}'+'(textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r')+('eturn\x20proc'+'essEnviron'+'ment(mix(l'+'inear0,\x20li'+'near1,\x20lev'+'el\x20-\x20ileve'+'l));\x0a}\x0a\x0afn'+'\x20addReflec'+'tion(reflD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20d'+'Reflection'+'\x20=\x20dReflec'+'tion\x20+\x20vec'+'4f(calcRef'+'lection(re'+'flDir,\x20glo'+'ss),\x20unifo'+'rm.materia'+'l_reflecti'+'vity);\x0a}\x0a'),AD='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a#en'+'dif\x0a\x0avar\x20t'+'exture_sph'+'ereMap:\x20te'+'xture_2d<f'+'32>;\x0avar\x20t'+'exture_sph'+'ereMapSamp'+'ler:\x20sampl'+'er;\x0aunifor'+'m\x20material'+'_reflectiv'+'ity:\x20f32;\x0a'+'\x0afn\x20calcRe'+'flection(r'+'eflDir:\x20ve'+'c3f,\x20gloss'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20view'+'RotationMa'+'trix\x20=\x20mat'+'3x3f(unifo'+'rm.matrix_'+'view[0].xy'+'z,\x20uniform'+'.matrix_vi'+'ew[1].xyz,'+'\x20uniform.m'+'atrix_view'+'[2].xyz);\x0a'+'\x20\x20\x20\x20let\x20re'+'flDirV:\x20ve'+'c3f\x20=\x20view'+'RotationMa'+'trix\x20*\x20ref'+'lDir;\x0a\x0a\x20\x20\x20'+'\x20let\x20m:\x20f3'+'2\x20=\x202.0\x20*\x20'+'sqrt(dot(r'+'eflDirV.xy'+',\x20reflDirV'+'.xy)\x20+\x20(re'+'flDirV.z\x20+'+'\x201.0)\x20*\x20(r'+'eflDirV.z\x20'+'+\x201.0));\x0a\x20'+'\x20\x20\x20let\x20sph'+'ereMapUv:\x20'+'vec2f\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_sphere'+'Map,\x20textu'+'re_sphereM'+'apSampler,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0af'+'n\x20addRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20dRefle'+'ction\x20+\x20ve'+'c4f(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20unif'+'orm.materi'+'al_reflect'+'ivity);\x0a}\x0a',CD='\x0a\x0afn\x20addRe'+'flectionSh'+'een(worldN'+'ormal:\x20vec'+'3f,\x20viewDi'+'r:\x20vec3f,\x20'+'gloss:\x20f32'+')\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20dot(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20let\x20al'+'phaG:\x20f32\x20'+'=\x20gloss\x20*\x20'+'gloss;\x0a\x0a\x20\x20'+'\x20\x20//\x20Avoid'+'\x20using\x20a\x20L'+'UT\x20and\x20app'+'roximate\x20t'+'he\x20values\x20'+'analytical'+'ly\x0a\x20\x20\x20\x20let'+'\x20a:\x20f32\x20=\x20'+'select(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20-339.2\x20*'+'\x20alphaG\x20+\x20'+'161.4\x20*\x20gl'+'oss\x20-\x2025.9'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gloss\x20<\x200.'+'25\x0a\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20let\x20b:'+'\x20f32\x20=\x20sel'+'ect(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.97\x20*\x20'+'alphaG\x20-\x203'+'.27\x20*\x20glos'+'s\x20+\x200.72,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x2044'+'.0\x20*\x20alpha'+'G\x20-\x2023.7\x20*'+'\x20gloss\x20+\x203'+'.26,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss\x20<'+'\x200.25\x0a\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20let'+'\x20dg_add:\x20f'+'32\x20=\x20selec'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.1\x20*\x20(\x20g'+'loss\x20-\x200.2'+'5\x20),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x200.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s\x20<\x200.25\x0a\x20'+'\x20\x20\x20);\x0a\x20\x20\x20\x20'+'let\x20dg:\x20f3'+'2\x20=\x20exp(\x20a'+'\x20*\x20NoV\x20+\x20b'+'\x20)\x20+\x20dg_ad'+'d;\x0a\x20\x20\x20\x20sRe'+'flection\x20='+'\x20sReflecti'+'on\x20+\x20(calc'+'Reflection'+'(worldNorm'+'al,\x200.0)\x20*'+'\x20saturate('+'dg));\x0a}',PD='\x0afn\x20refrac'+'t2(viewVec'+':\x20vec3f,\x20n'+'ormal:\x20vec'+'3f,\x20IOR:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20vn:\x20f32'+'\x20=\x20dot(vie'+'wVec,\x20norm'+'al);\x0a\x20\x20\x20\x20l'+'et\x20k:\x20f32\x20'+'=\x201.0\x20-\x20IO'+'R\x20*\x20IOR\x20*\x20'+'(1.0\x20-\x20vn\x20'+'*\x20vn);\x0a\x20\x20\x20'+'\x20let\x20refrV'+'ec:\x20vec3f\x20'+'=\x20IOR\x20*\x20vi'+'ewVec\x20-\x20(I'+'OR\x20*\x20vn\x20+\x20'+'sqrt(k))\x20*'+'\x20normal;\x0a\x20'+'\x20\x20\x20return\x20'+'refrVec;\x0a}'+'\x0a\x0afn\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20vi'+'ewDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20th'+'ickness:\x20f'+'32,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20al'+'bedo:\x20vec3'+'f,\x0a\x20\x20\x20\x20tra'+'nsmission:'+'\x20f32,\x0a\x20\x20\x20\x20'+'refraction'+'Index:\x20f32'+',\x0a\x20\x20\x20\x20disp'+'ersion:\x20f3'+'2\x0a#if\x20defi'+'ned(LIT_IR'+'IDESCENCE)'+'\x0a\x20\x20\x20\x20,\x20iri'+'descenceFr'+'esnel:\x20vec'+'3f,\x0a\x20\x20\x20\x20ir'+'idescenceI'+'ntensity:\x20'+'f32\x0a#endif'+'\x0a)\x20{\x0a\x20\x20\x20\x20/'+'/\x20use\x20same'+'\x20reflectio'+'n\x20code\x20wit'+'h\x20refracti'+'on\x20vector\x0a'+'\x20\x20\x20\x20let\x20tm'+'pRefl:\x20vec'+'4f\x20=\x20dRefl'+'ection;\x0a\x20\x20'+'\x20\x20let\x20refl'+'ectionDir:'+'\x20vec3f\x20=\x20r'+'efract2(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndex);\x0a\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(0.0);\x0a\x20'+'\x20\x20\x20addRefl'+'ection(ref'+'lectionDir'+',\x20gloss);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'mix(dDiffu'+'seLight,\x20d'+'Reflection'+'.rgb\x20*\x20alb'+'edo,\x20trans'+'mission);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20tm'+'pRefl;\x0a}\x0a',MD='\x0auniform\x20m'+'aterial_in'+'vAttenuati'+'onDistance'+':\x20f32;\x0auni'+'form\x20mater'+'ial_attenu'+'ation:\x20vec'+'3f;\x0a\x0afn\x20ev'+'alRefracti'+'onColor(re'+'fractionVe'+'ctor:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20refra'+'ctionIndex'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20The\x20'+'refraction'+'\x20point\x20is\x20'+'the\x20entry\x20'+'point\x20+\x20ve'+'ctor\x20to\x20ex'+'it\x20point\x0a\x20'+'\x20\x20\x20let\x20poi'+'ntOfRefrac'+'tion:\x20vec4'+'f\x20=\x20vec4f('+'vPositionW'+'\x20+\x20refract'+'ionVector,'+'\x201.0);\x0a\x0a\x20\x20'+'\x20\x20//\x20Proje'+'ct\x20to\x20text'+'ure\x20space\x20'+'so\x20we\x20can\x20'+'sample\x20it\x0a'+'\x20\x20\x20\x20let\x20pr'+'ojectionPo'+'int:\x20vec4f'+'\x20=\x20uniform'+'.matrix_vi'+'ewProjecti'+'on\x20*\x20point'+'OfRefracti'+'on;\x0a\x0a\x20\x20\x20\x20/'+'/\x20use\x20buil'+'t-in\x20getGr'+'abScreenPo'+'s\x20function'+'\x20to\x20conver'+'t\x20screen\x20p'+'osition\x20to'+'\x20grab\x20text'+'ure\x20uv\x20coo'+'rds\x0a\x20\x20\x20\x20le'+'t\x20uv:\x20vec2'+'f\x20=\x20getGra'+'bScreenPos'+'(projectio'+'nPoint);\x0a\x0a'+'\x20\x20\x20\x20//\x20Use'+'\x20IOR\x20and\x20r'+'oughness\x20t'+'o\x20select\x20m'+'ip\x0a\x20\x20\x20\x20let'+'\x20iorToRoug'+'hness:\x20f32'+'\x20=\x20(1.0\x20-\x20'+'gloss)\x20*\x20c'+'lamp((1.0\x20'+'/\x20refracti'+'onIndex)\x20*'+'\x202.0\x20-\x202.0'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20let'+'\x20refractio'+'nLod:\x20f32\x20'+'=\x20log2(uni'+'form.uScre'+'enSize.x)\x20'+'*\x20iorToRou'+'ghness;\x0a\x20\x20'+'\x20\x20let\x20refr'+'action:\x20ve'+'c3f\x20=\x20text'+'ureSampleL'+'evel(uScen'+'eColorMap,'+'\x20uSceneCol'+'orMapSampl'+'er,\x20uv,\x20re'+'fractionLo'+'d).rgb;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'refraction'+';\x0a}\x0a\x0afn\x20ad'+'dRefractio'+'n(\x0a\x20\x20\x20\x20wor'+('ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20thickness'+':\x20f32,\x0a\x20\x20\x20'+'\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20albedo:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'transmissi'+'on:\x20f32,\x0a\x20'+'\x20\x20\x20refract'+'ionIndex:\x20'+'f32,\x0a\x20\x20\x20\x20d'+'ispersion:'+'\x20f32,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'iridescenc'+'eIntensity'+':\x20f32\x0a#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20Extra'+'ct\x20scale\x20f'+'rom\x20the\x20mo'+'del\x20transf'+'orm\x0a\x20\x20\x20\x20va'+'r\x20modelSca'+'le:\x20vec3f;'+'\x0a\x20\x20\x20\x20model'+'Scale.x\x20=\x20'+'length(uni'+'form.matri'+'x_model[0]'+'.xyz);\x0a\x20\x20\x20'+'\x20modelScal'+'e.y\x20=\x20leng'+'th(uniform'+'.matrix_mo'+'del[1].xyz'+');\x0a\x20\x20\x20\x20mod'+'elScale.z\x20'+'=\x20length(u'+'niform.mat'+'rix_model['+'2].xyz);\x0a\x0a'+'\x20\x20\x20\x20//\x20Cal'+'culate\x20the'+'\x20refractio'+'n\x20vector,\x20'+'scaled\x20by\x20'+'the\x20thickn'+'ess\x20and\x20sc'+'ale\x20of\x20the'+'\x20object\x0a\x20\x20'+'\x20\x20let\x20scal'+'e:\x20vec3f\x20='+'\x20thickness'+'\x20*\x20modelSc'+'ale;\x0a\x20\x20\x20\x20v'+'ar\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndex))'+'\x20*\x20scale;\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'x);\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20based\x20on'+'\x20the\x20dispe'+'rsion\x20mate'+'rial\x20prope'+'rty,\x20calcu'+'late\x20modif'+'ied\x20refrac'+'tion\x20index'+'\x20values\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20f'+'or\x20R\x20and\x20B'+'\x20channels\x20')+('and\x20evalua'+'te\x20the\x20ref'+'raction\x20co'+'lor\x20for\x20th'+'em.\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Spread:\x20f3'+'2\x20=\x20(1.0\x20/'+'\x20refractio'+'nIndex\x20-\x201'+'.0)\x20*\x200.02'+'5\x20*\x20disper'+'sion;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20r'+'efractionI'+'ndexR:\x20f32'+'\x20=\x20refract'+'ionIndex\x20-'+'\x20halfSprea'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20refractio'+'nVector\x20=\x20'+'normalize('+'refract(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndexR))\x20'+'*\x20scale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ref'+'raction.r\x20'+'=\x20evalRefr'+'actionColo'+'r(refracti'+'onVector,\x20'+'gloss,\x20ref'+'ractionInd'+'exR).r;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20refractio'+'nIndexB:\x20f'+'32\x20=\x20refra'+'ctionIndex'+'\x20+\x20halfSpr'+'ead;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndexB)'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efraction.'+'b\x20=\x20evalRe'+'fractionCo'+'lor(refrac'+'tionVector'+',\x20gloss,\x20r'+'efractionI'+'ndexB).b;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20T'+'ransmittan'+'ce\x20is\x20our\x20'+'final\x20refr'+'action\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20transmitt'+'ance:\x20vec3'+'f;\x0a\x20\x20\x20\x20if\x20'+'(uniform.m'+'aterial_in'+'vAttenuati'+'onDistance'+'\x20!=\x200.0)\x0a\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20att'+'enuation:\x20'+'vec3f\x20=\x20-l'+'og(uniform'+'.material_'+'attenuatio'+'n)\x20*\x20unifo'+'rm.materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans')+('mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20let\x20'+'fresnel:\x20v'+'ec3f\x20=\x20vec'+'3f(1.0)\x20-\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20world'+'Normal),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scenceInte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20mix(dDif'+'fuseLight,'+'\x20refractio'+'n\x20*\x20transm'+'ittance\x20*\x20'+'fresnel,\x20t'+'ransmissio'+'n);\x0a}\x0a'),DD='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0a#ifdef'+'\x20CUBEMAP_S'+'OURCE\x0a\x20\x20\x20\x20'+'var\x20source'+'Cube:\x20text'+'ure_cube<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20sourceC'+'ubeSampler'+'\x20:\x20sampler'+';\x0a#else\x0a\x20\x20'+'\x20\x20var\x20sour'+'ceTex:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sourceTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20//\x20sa'+'mples\x0a\x20\x20\x20\x20'+'var\x20sample'+'sTex:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20samplesTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20samplesT'+'exInverseS'+'ize:\x20vec2f'+';\x0a#endif\x0a\x0a'+'//\x20params:'+'\x0a//\x20x\x20-\x20ta'+'rget\x20cubem'+'ap\x20face\x200.'+'.6\x0a//\x20y\x20-\x20'+'target\x20ima'+'ge\x20total\x20p'+'ixels\x0a//\x20z'+'\x20-\x20source\x20'+'cubemap\x20si'+'ze\x0auniform'+'\x20params:\x20v'+'ec3f;\x0a\x0afn\x20'+'targetFace'+'()\x20->\x20f32\x20'+'{\x20return\x20u'+'niform.par'+'ams.x;\x20}\x0af'+'n\x20targetTo'+'talPixels('+')\x20->\x20f32\x20{'+'\x20return\x20un'+'iform.para'+'ms.y;\x20}\x0afn'+'\x20sourceTot'+'alPixels()'+'\x20->\x20f32\x20{\x20'+'return\x20uni'+'form.param'+'s.z;\x20}\x0a\x0aco'+'nst\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22enc'+'odePS\x22\x0a\x0a//'+'--\x20support'+'ed\x20project'+'ions\x0a\x0afn\x20m'+'odifySeams'+'(dir:\x20vec3'+'f,\x20scale:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20adir\x20='+'\x20abs(dir);'+'\x0a\x20\x20\x20\x20let\x20M'+'\x20=\x20max(max'+'(adir.x,\x20a'+'dir.y),\x20ad'+'ir.z);\x0a\x20\x20\x20'+'\x20return\x20di'+'r\x20/\x20M\x20*\x20ve'+'c3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20select('+('scale,\x201.0'+',\x20adir.x\x20='+'=\x20M),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20select'+'(scale,\x201.'+'0,\x20adir.y\x20'+'==\x20M),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20selec'+'t(scale,\x201'+'.0,\x20adir.z'+'\x20==\x20M)\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0afn\x20'+'toSpherica'+'l(dir:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20l'+'et\x20nonZero'+'XZ\x20=\x20any(d'+'ir.xz\x20!=\x20v'+'ec2f(0.0,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2f(select'+'(0.0,\x20atan'+'2(dir.x,\x20d'+'ir.z),\x20non'+'ZeroXZ),\x20a'+'sin(dir.y)'+');\x0a}\x0a\x0afn\x20f'+'romSpheric'+'al(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20vec3'+'f(cos(uv.y'+')\x20*\x20sin(uv'+'.x),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sin(uv.y)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'s(uv.y)\x20*\x20'+'cos(uv.x))'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Equirect(u'+'v:\x20vec2f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20fromSphe'+'rical((vec'+'2f(uv.x,\x201'+'.0\x20-\x20uv.y)'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20vec2'+'f(PI,\x20PI\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20octahe'+'dral\x20code,'+'\x20based\x20on\x20'+'https://jc'+'gt.org/pub'+'lished/000'+'3/02/01/\x0a/'+'/\x20\x22Survey\x20'+'of\x20Efficie'+'nt\x20Represe'+'ntations\x20f'+'or\x20Indepen'+'dent\x20Unit\x20'+'Vectors\x22\x20b'+'y\x20Cigolle,'+'\x20Donow,\x20Ev'+'angelakos,'+'\x20Mara,\x20McG'+'uire,\x20Meye'+'r\x0a\x0afn\x20sign'+'NotZero(k:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20sele'+'ct(-1.0,\x201'+'.0,\x20k\x20>=\x200'+'.0);\x0a}\x0a\x0afn'+'\x20signNotZe'+'roVec2(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec2f(signN'+'otZero(v.x'+'),\x20signNot'+'Zero(v.y))'+';\x0a}\x0a\x0a//\x20Re'+'turns\x20a\x20un'+'it\x20vector.'+'\x20Argument\x20'+'o\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20pack')+('ed\x20via\x20oct'+'Encode,\x20on'+'\x20the\x20[-1,\x20'+'+1]\x20square'+'\x0afn\x20octDec'+'ode(o:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20v\x20=\x20vec'+'3f(o.x,\x201.'+'0\x20-\x20abs(o.'+'x)\x20-\x20abs(o'+'.y),\x20o.y);'+'\x0a\x20\x20\x20\x20if\x20(v'+'.y\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20temp:\x20'+'vec2f\x20=\x20(1'+'.0\x20-\x20abs(v'+'.zx))\x20*\x20si'+'gnNotZeroV'+'ec2(v.xz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'\x20=\x20vec3f(t'+'emp.x,\x20v.y'+',\x20temp.y);'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20no'+'rmalize(v)'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Octahedral'+'(uv:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20octDec'+'ode(vec2f('+'uv.x,\x201.0\x20'+'-\x20uv.y)\x20*\x20'+'2.0\x20-\x201.0)'+';\x0a}\x0a\x0a//\x20As'+'sumes\x20that'+'\x20v\x20is\x20a\x20un'+'it\x20vector.'+'\x20The\x20resul'+'t\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20on\x20t'+'he\x20[-1,\x20+1'+']\x20square\x0af'+'n\x20octEncod'+'e(v:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20var\x20'+'result\x20=\x20v'+'.xz\x20*\x20(1.0'+'\x20/\x20l1norm)'+';\x0a\x20\x20\x20\x20if\x20('+'v.y\x20<\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'(1.0\x20-\x20abs'+'(result.yx'+'))\x20*\x20signN'+'otZeroVec2'+'(result.xy'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20return\x20'+'result;\x0a}\x0a'+'\x0a/////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'\x0a\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20fn'+'\x20sampleCub'+'emapDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'sourceCube'+',\x20sourceCu'+'beSampler,'+'\x20modifySea'+'ms(dir,\x201.'+'0));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleCubem'+'apSph(sph:')+('\x20vec2f)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20sample'+'CubemapDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leCubemapD'+'irLod(dir:'+'\x20vec3f,\x20mi'+'pLevel:\x20f3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leLevel(so'+'urceCube,\x20'+'sourceCube'+'Sampler,\x20m'+'odifySeams'+'(dir,\x201.0)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleCubemap'+'SphLod(sph'+':\x20vec2f,\x20m'+'ipLevel:\x20f'+'32)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'sampleCube'+'mapDirLod('+'fromSpheri'+'cal(sph),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a#el'+'se\x0a\x0a\x20\x20\x20\x20fn'+'\x20sampleEqu'+'irectSph(s'+'ph:\x20vec2f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv\x20=\x20s'+'ph\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'(sourceTex'+',\x20sourceTe'+'xSampler,\x20'+'vec2f(uv.x'+',\x201.0\x20-\x20uv'+'.y));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20fn\x20'+'sampleEqui'+'rectDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leEquirect'+'Sph(toSphe'+'rical(dir)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleEquirec'+'tSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20uv'+'\x20=\x20sph\x20/\x20v'+'ec2f(PI\x20*\x20'+'2.0,\x20PI)\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleLevel('+'sourceTex,'+'\x20sourceTex'+'Sampler,\x20v'+'ec2f(uv.x,'+'\x201.0\x20-\x20uv.'+'y),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleEquir'+'ectDirLod('+'dir:\x20vec3f'+',\x20mipLevel'+':\x20f32)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleE')+('quirectSph'+'Lod(toSphe'+'rical(dir)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleOctahed'+'ralDir(dir'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20=\x20oct'+'Encode(dir'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'textureSam'+'ple(source'+'Tex,\x20sourc'+'eTexSample'+'r,\x20vec2f(u'+'v.x,\x201.0\x20-'+'\x20uv.y));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20sampleO'+'ctahedralS'+'ph(sph:\x20ve'+'c2f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leOctahedr'+'alDirLod(d'+'ir:\x20vec3f,'+'\x20mipLevel:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'v\x20=\x20octEnc'+'ode(dir)\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'Level(sour'+'ceTex,\x20sou'+'rceTexSamp'+'ler,\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20sampl'+'eOctahedra'+'lSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'Lod(fromSp'+'herical(sp'+'h),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a\x0a'+'fn\x20getDire'+'ctionCubem'+'ap(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20st\x20=\x20uv'+'\x20*\x202.0\x20-\x201'+'.0;\x0a\x20\x20\x20\x20le'+'t\x20face\x20=\x20t'+'argetFace('+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20vec:\x20vec'+'3f;\x0a\x20\x20\x20\x20if'+'\x20(face\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(1,\x20'+'-st.y,\x20-st'+'.x);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3f(-1,\x20-'+'st.y,\x20st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x202.0)')+('\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3f(st.x,\x201'+',\x20st.y);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(face\x20='+'=\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'\x20=\x20vec3f(s'+'t.x,\x20-1,\x20-'+'st.y);\x0a\x20\x20\x20'+'\x20}\x20else\x20if'+'\x20(face\x20==\x20'+'4.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(st.'+'x,\x20-st.y,\x20'+'1);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(-st'+'.x,\x20-st.y,'+'\x20-1);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20normal'+'ize(modify'+'Seams(vec,'+'\x201.0));\x0a}\x0a'+'\x0afn\x20matrix'+'FromVector'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x201.0\x20'+'/\x20(1.0\x20+\x20n'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20-n.'+'x\x20*\x20n.y\x20*\x20'+'a;\x0a\x20\x20\x20\x20let'+'\x20b1\x20=\x20vec3'+'f(1.0\x20-\x20n.'+'x\x20*\x20n.x\x20*\x20'+'a,\x20b,\x20-n.x'+');\x0a\x20\x20\x20\x20let'+'\x20b2\x20=\x20vec3'+'f(b,\x201.0\x20-'+'\x20n.y\x20*\x20n.y'+'\x20*\x20a,\x20-n.y'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mat3x3'+'f(b1,\x20b2,\x20'+'n);\x0a}\x0a\x0afn\x20'+'matrixFrom'+'VectorSlow'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20up\x20=\x20sel'+'ect(vec3f('+'0.0,\x200.0,\x20'+'select(-1.'+'0,\x201.0,\x20n.'+'y\x20>\x200.0)),'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'),\x20abs(n.y'+')\x20>\x200.0000'+'001);\x0a\x20\x20\x20\x20'+'let\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20let'+'\x20y\x20=\x20cross'+'(n,\x20x);\x0a\x20\x20'+'\x20\x20return\x20m'+'at3x3f(x,\x20'+'y,\x20n);\x0a}\x0a\x0a'+'fn\x20reproje'+'ct(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20i'+'f\x20({NUM_SA'+'MPLES}\x20<=\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20sing'+'le\x20sample\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}({'+'DECODE_FUN'+'C}({SOURCE'+'_FUNC}Dir('+'{TARGET_FU'+'NC}(uv))))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mult'+'i\x20sample\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20t\x20=\x20{TARG')+('ET_FUNC}(u'+'v);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20tu\x20='+'\x20dpdx(t);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20tv\x20=\x20dpd'+'y(t);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'u\x20+=\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20for\x20(v'+'ar\x20v\x20=\x200.0'+';\x20v\x20<\x20{NUM'+'_SAMPLES_S'+'QRT};\x20v\x20+='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}Dir(norma'+'lize(t\x20+\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20t'+'u\x20*\x20(u\x20/\x20{'+'NUM_SAMPLE'+'S_SQRT}\x20-\x20'+'0.5)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tv\x20'+'*\x20(v\x20/\x20{NU'+'M_SAMPLES_'+'SQRT}\x20-\x200.'+'5))));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20{ENC'+'ODE_FUNC}('+'result\x20/\x20('+'{NUM_SAMPL'+'ES_SQRT}\x20*'+'\x20{NUM_SAMP'+'LES_SQRT})'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0aconst\x20un'+'packFloat:'+'\x20vec4f\x20=\x20v'+'ec4f(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20fn\x20un'+'packSample'+'(i:\x20i32,\x20L'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20mipLev'+'el:\x20ptr<fu'+'nction,\x20f3'+'2>)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20u\x20'+'=\x20(f32(i\x20*'+'\x204)\x20+\x200.5)'+'\x20*\x20uniform'+'.samplesTe'+'xInverseSi'+'ze.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20v\x20'+'=\x20(floor(u'+')\x20+\x200.5)\x20*'+'\x20uniform.s'+'amplesTexI'+'nverseSize'+'.y;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20raw'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.x\x20=\x20dot(t'+'extureSamp')+('le(samples'+'Tex,\x20sampl'+'esTexSampl'+'er,\x20vec2f('+'u,\x20v)),\x20un'+'packFloat)'+';\x20u\x20+=\x20uni'+'form.sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'textureSam'+'ple(sample'+'sTex,\x20samp'+'lesTexSamp'+'ler,\x20vec2f'+'(u,\x20v)),\x20u'+'npackFloat'+');\x20u\x20+=\x20un'+'iform.samp'+'lesTexInve'+'rseSize.x;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.z\x20=\x20dot'+'(textureSa'+'mple(sampl'+'esTex,\x20sam'+'plesTexSam'+'pler,\x20vec2'+'f(u,\x20v)),\x20'+'unpackFloa'+'t);\x20u\x20+=\x20u'+'niform.sam'+'plesTexInv'+'erseSize.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'raw.w\x20=\x20do'+'t(textureS'+'ample(samp'+'lesTex,\x20sa'+'mplesTexSa'+'mpler,\x20vec'+'2f(u,\x20v)),'+'\x20unpackFlo'+'at);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20*L\x20=\x20r'+'aw.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*m'+'ipLevel\x20=\x20'+'raw.w\x20*\x208.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20con'+'volve\x20an\x20e'+'nvironment'+'\x20given\x20pre'+'-generated'+'\x20samples\x0a\x20'+'\x20\x20\x20fn\x20pref'+'ilterSampl'+'es(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'truct\x20vect'+'or\x20space\x20g'+'iven\x20targe'+'t\x20directio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vecSpa'+'ce\x20=\x20matri'+'xFromVecto'+'rSlow({TAR'+'GET_FUNC}('+'uv));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20L'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20mipLevel:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(var\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20i\x20+=\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unpa'+'ckSample(i'+',\x20&L,\x20&mip'+'Level);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'result\x20+=\x20'+'{DECODE_FU')+('NC}({SOURC'+'E_FUNC}Dir'+'Lod(vecSpa'+'ce\x20*\x20L,\x20mi'+'pLevel))\x20*'+'\x20L.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20to'+'talWeight\x20'+'+=\x20L.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20{ENCOD'+'E_FUNC}(re'+'sult\x20/\x20tot'+'alWeight);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20unwei'+'ghted\x20vers'+'ion\x20of\x20pre'+'filterSamp'+'les\x0a\x20\x20\x20\x20fn'+'\x20prefilter'+'SamplesUnw'+'eighted(uv'+':\x20vec2f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20construct'+'\x20vector\x20sp'+'ace\x20given\x20'+'target\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20v'+'ecSpace\x20=\x20'+'matrixFrom'+'VectorSlow'+'({TARGET_F'+'UNC}(uv));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20L:\x20vec'+'3f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20mipL'+'evel:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20result'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(va'+'r\x20i\x20=\x200;\x20i'+'\x20<\x20{NUM_SA'+'MPLES};\x20i\x20'+'+=\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'unpackSamp'+'le(i,\x20&L,\x20'+'&mipLevel)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}DirLod(ve'+'cSpace\x20*\x20L'+',\x20mipLevel'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'{ENCODE_FU'+'NC}(result'+'\x20/\x20f32({NU'+'M_SAMPLES}'+'));\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20{P'+'ROCESS_FUN'+'C}(input.v'+'Uv0);\x0a\x20\x20\x20\x20'+'return\x20out'+'put;\x0a}\x0a'),ID='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0aunifo'+'rm\x20uvMod:\x20'+'vec4f;\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0a\x0a@'+'vertex\x0afn\x20'+'vertexMain'+'(input:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20var\x20outpu'+'t:\x20VertexO'+'utput;\x0a\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(input.v'+'ertex_posi'+'tion,\x200.5,'+'\x201.0);\x0a\x20\x20o'+'utput.vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(input.ver'+'tex_positi'+'on\x20*\x200.5\x20+'+'\x20vec2f(0.5'+',\x200.5))\x20*\x20'+'uniform.uv'+'Mod.xy\x20+\x20u'+'niform.uvM'+'od.zw);\x0a\x20\x20'+'return\x20out'+'put;\x0a}\x0a',LD='\x0a\x0avar\x20uSce'+'neDepthMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20uSceneD'+'epthMapSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifn'+'def\x20SCREEN'+'SIZE\x0a\x20\x20\x20\x20#'+'define\x20SCR'+'EENSIZE\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fndef\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20#define\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20unifor'+'m\x20matrix_v'+'iew:\x20mat4x'+'4f;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20CAM'+'ERAPLANES\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20CAME'+'RAPLANES\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20camer'+'a_params:\x20'+'vec4f;\x20//\x20'+'x:\x201\x20/\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20\x20y:\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20z:\x20came'+'ra_near,\x20\x20'+'\x20\x20\x20\x20\x20\x20w:\x20i'+'s_ortho\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20fn\x20lin'+'earizeDept'+'h(z:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uniform.c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x20//\x20Pe'+'rspective\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20('+'uniform.ca'+'mera_param'+'s.z\x20*\x20unif'+'orm.camera'+'_params.y)'+'\x20/\x20(unifor'+'m.camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.z\x20-'+'\x20uniform.c'+'amera_para'+'ms.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20unifor'+'m.camera_p'+'arams.z\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'+'\x0afn\x20deline'+'arizeDepth'+'(linearDep'+'th:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.camera'+'_params.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(unif'+'orm.camera'+('_params.y\x20'+'*\x20(uniform'+'.camera_pa'+'rams.z\x20-\x20l'+'inearDepth'+'))\x20/\x20(line'+'arDepth\x20*\x20'+'(uniform.c'+'amera_para'+'ms.z\x20-\x20uni'+'form.camer'+'a_params.y'+'));\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20(linearD'+'epth\x20-\x20uni'+'form.camer'+'a_params.z'+')\x20/\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20}\x0a}\x0a\x0a//\x20R'+'etrieves\x20r'+'endered\x20li'+'near\x20camer'+'a\x20depth\x20by'+'\x20UV\x0afn\x20get'+'LinearScre'+'enDepth(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_LINEAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SCEN'+'E_DEPTHMAP'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'uSceneDept'+'hMap,\x20uSce'+'neDepthMap'+'Sampler,\x20u'+'v).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20tex'+'tureSize\x20='+'\x20textureDi'+'mensions(u'+'SceneDepth'+'Map,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20texel'+':\x20vec2i\x20=\x20'+'vec2i(uv\x20*'+'\x20vec2f(tex'+'tureSize))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta:\x20vec4f\x20'+'=\x20textureL'+'oad(uScene'+'DepthMap,\x20'+'texel,\x200);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta_u32:\x20ve'+'c4u\x20=\x20vec4'+'u(data\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20intBits'+':\x20u32\x20=\x20(d'+'ata_u32.r\x20'+'<<\x2024u)\x20|\x20'+'(data_u32.'+'g\x20<<\x2016u)\x20'+'|\x20(data_u3'+'2.b\x20<<\x208u)'+'\x20|\x20data_u3'+'2.a;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20bitca'+'st<f32>(in'+'tBits);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pth(textur'+'eSample(uS'+'ceneDepthM')+('ap,\x20uScene'+'DepthMapSa'+'mpler,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20fn\x20get'+'LinearScre'+'enDepthFra'+'g()\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20pcP'+'osition.xy'+'\x20*\x20uniform'+'.uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afn\x20get'+'LinearDept'+'h(pos:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20-(unif'+'orm.matrix'+'_view\x20*\x20ve'+'c4f(pos,\x201'+'.0)).z;\x0a}\x0a'),RD='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x0afn'+'\x20getShadow'+'CascadeInd'+'ex(shadowC'+'ascadeDist'+'ances:\x20vec'+'4f,\x20shadow'+'CascadeCou'+'nt:\x20i32)\x20-'+'>\x20i32\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20dept'+'h\x20in\x200\x20..\x20'+'far\x20plane\x20'+'range\x0a\x20\x20\x20\x20'+'let\x20depth:'+'\x20f32\x20=\x201.0'+'\x20/\x20pcPosit'+'ion.w;\x0a\x0a\x20\x20'+'\x20\x20//\x201.0\x20i'+'f\x20depth\x20>='+'\x20distance,'+'\x200.0\x20other'+'wise\x0a\x20\x20\x20\x20l'+'et\x20compari'+'sons:\x20vec4'+'f\x20=\x20step(s'+'hadowCasca'+'deDistance'+'s,\x20vec4f(d'+'epth));\x0a\x0a\x20'+'\x20\x20\x20//\x20sum\x20'+'is\x20the\x20ind'+'ex\x0a\x20\x20\x20\x20let'+'\x20cascadeIn'+'dex:\x20i32\x20='+'\x20i32(dot(c'+'omparisons'+',\x20vec4f(1.'+'0)));\x0a\x0a\x20\x20\x20'+'\x20//\x20limit\x20'+'to\x20actual\x20'+'number\x20of\x20'+'used\x20casca'+'des\x0a\x20\x20\x20\x20re'+'turn\x20min(c'+'ascadeInde'+'x,\x20shadowC'+'ascadeCoun'+'t\x20-\x201);\x0a}\x0a'+'\x0a//\x20functi'+'on\x20which\x20m'+'odifies\x20ca'+'scade\x20inde'+'x\x20to\x20dithe'+'r\x20between\x20'+'cascades\x0af'+'n\x20ditherSh'+'adowCascad'+'eIndex(cas'+'cadeIndex_'+'in:\x20i32,\x20s'+'hadowCasca'+'deDistance'+'s:\x20vec4f,\x20'+'shadowCasc'+'adeCount:\x20'+'i32,\x20blend'+'Factor:\x20f3'+'2)\x20->\x20i32\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Use\x20var\x20as'+'\x20cascadeIn'+'dex\x20might\x20'+'be\x20modifie'+'d\x0a\x20\x20\x20\x20var\x20'+'cascadeInd'+'ex:\x20i32\x20=\x20'+'cascadeInd'+'ex_in;\x0a\x20\x20\x20'+'\x20if\x20(casca'+'deIndex\x20<\x20'+'shadowCasc'+'adeCount\x20-'+'\x201)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20cu'+'rrentRange'+'End:\x20f32\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+('\x20transitio'+'nStart:\x20f3'+'2\x20=\x20blendF'+'actor\x20*\x20cu'+'rrentRange'+'End;\x20//\x20St'+'art\x20overla'+'p\x20factor\x20a'+'way\x20from\x20t'+'he\x20end\x20dis'+'tance\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(depth\x20'+'>\x20transiti'+'onStart)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20a\x20tr'+'ansition\x20f'+'actor\x20(0.0'+'\x20to\x201.0)\x20w'+'ithin\x20the\x20'+'overlap\x20ra'+'nge\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'transition'+'Factor:\x20f3'+'2\x20=\x20smooth'+'step(trans'+'itionStart'+',\x20currentR'+'angeEnd,\x20d'+'epth);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Add\x20pse'+'udo-random'+'\x20dithering'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20TODO'+':\x20replace\x20'+'by\x20user\x20se'+'lectable\x20d'+'ithering\x20m'+'ethod\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20dither:\x20'+'f32\x20=\x20frac'+'t(sin(dot('+'pcPosition'+'.xy,\x20vec2f'+'(12.9898,\x20'+'78.233)))\x20'+'*\x2043758.54'+'53);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dither\x20<\x20'+'transition'+'Factor)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20casc'+'adeIndex\x20='+'\x20cascadeIn'+'dex\x20+\x201;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20cascadeIn'+'dex;\x0a}\x0a\x0afn'+'\x20fadeShado'+'w(shadowCo'+'ord_in:\x20ve'+'c3f,\x20shado'+'wCascadeDi'+'stances:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20//\x20if\x20the'+'\x20pixel\x20is\x20'+'past\x20the\x20s'+'hadow\x20dist'+'ance,\x20remo'+'ve\x20shadow\x0a'+'\x20\x20\x20\x20//\x20thi'+'s\x20enforces'+'\x20straight\x20'+'line\x20inste'+'ad\x20of\x20corn'+'er\x20of\x20shad'+'ow\x20which\x20m'+'oves\x20when\x20'+'camera\x20rot'+'ates\x0a\x20\x20\x20\x20v'+'ar\x20shadowC'+'oord:\x20vec3'+'f\x20=\x20shadow')+('Coord_in;\x0a'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x20\x20\x20\x20if\x20(d'+'epth\x20>\x20sha'+'dowCascade'+'Distances.'+'w)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20shadowC'+'oord.z\x20=\x20-'+'9999999.0;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'hadowCoord'+';\x0a}\x0a'),OD='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afn\x20linste'+'p(a:\x20f32,\x20'+'b:\x20f32,\x20v:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20/'+'/\x20WGSL\x20sat'+'urate\x20->\x20c'+'lamp\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p((v\x20-\x20a)\x20'+'/\x20(b\x20-\x20a),'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0afn\x20re'+'duceLightB'+'leeding(pM'+'ax:\x20f32,\x20a'+'mount:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'fn\x20chebysh'+'evUpperBou'+'nd(moments'+':\x20vec2f,\x20m'+'ean:\x20f32,\x20'+'minVarianc'+'e:\x20f32,\x20li'+'ghtBleedin'+'gReduction'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'//\x20Compute'+'\x20variance\x0a'+'\x20\x20\x20\x20var\x20va'+'riance:\x20f3'+'2\x20=\x20moment'+'s.y\x20-\x20(mom'+'ents.x\x20*\x20m'+'oments.x);'+'\x0a\x20\x20\x20\x20varia'+'nce\x20=\x20max('+'variance,\x20'+'minVarianc'+'e);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Compute\x20'+'probabilis'+'tic\x20upper\x20'+'bound\x0a\x20\x20\x20\x20'+'let\x20d:\x20f32'+'\x20=\x20mean\x20-\x20'+'moments.x;'+'\x0a\x20\x20\x20\x20var\x20p'+'Max:\x20f32\x20='+'\x20variance\x20'+'/\x20(varianc'+'e\x20+\x20(d\x20*\x20d'+'));\x0a\x0a\x20\x20\x20\x20p'+'Max\x20=\x20redu'+'ceLightBle'+'eding(pMax'+',\x20lightBle'+'edingReduc'+'tion);\x0a\x0a\x20\x20'+'\x20\x20//\x20One-t'+'ailed\x20Cheb'+'yshev\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(pMax,\x20'+'1.0,\x20mean\x20'+'<=\x20moments'+'.x);\x0a}\x0a\x0afn'+'\x20calculate'+'EVSM(momen'+'ts_in:\x20vec'+'3f,\x20Z_in:\x20'+'f32,\x20vsmBi'+'as:\x20f32,\x20e'+'xponent:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20Z:\x20f32\x20=\x20'+'2.0\x20*\x20Z_in'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20let\x20warp'+'edDepth:\x20f'+'32\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20l'+('et\x20moments'+':\x20vec2f\x20=\x20'+'moments_in'+'.xy\x20+\x20vec2'+'f(warpedDe'+'pth,\x20warpe'+'dDepth*war'+'pedDepth)\x20'+'*\x20(1.0\x20-\x20m'+'oments_in.'+'z);\x0a\x0a\x20\x20\x20\x20l'+'et\x20VSMBias'+':\x20f32\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20let\x20d'+'epthScale:'+'\x20f32\x20=\x20VSM'+'Bias\x20*\x20exp'+'onent\x20*\x20wa'+'rpedDepth;'+'\x0a\x20\x20\x20\x20let\x20m'+'inVariance'+'1:\x20f32\x20=\x20d'+'epthScale\x20'+'*\x20depthSca'+'le;\x0a\x20\x20\x20\x20re'+'turn\x20cheby'+'shevUpperB'+'ound(momen'+'ts,\x20warped'+'Depth,\x20min'+'Variance1,'+'\x200.1);\x0a}\x0a/'+'/\x20------\x20V'+'SM\x2016\x20----'+'--\x0a\x0afn\x20VSM'+'16(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords:\x20vec'+'2f,\x20resolu'+'tion:\x20f32,'+'\x20Z:\x20f32,\x20v'+'smBias:\x20f3'+'2,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20let\x20momen'+'ts:\x20vec3f\x20'+'=\x20textureS'+'ampleLevel'+'(tex,\x20texS'+'ampler,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'n\x20getShado'+'wVSM16(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20VS'+'M16(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord.xy,\x20s'+'hadowParam'+'s.x,\x20shado'+'wCoord.z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotVSM1'+'6(shadowMa'+'p:\x20texture'+'_2d<f32>,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler,\x20sha'+'dowCoord:\x20'+'vec3f,\x20sha')+('dowParams:'+'\x20vec4f,\x20ex'+'ponent:\x20f3'+'2,\x20lightDi'+'r:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20Z:\x20'+'f32\x20=\x20leng'+'th(lightDi'+'r)\x20*\x20shado'+'wParams.w\x20'+'+\x20shadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20return\x20V'+'SM16(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20Z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----'+'--\x0a\x0afn\x20VSM'+'32(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords_in:\x20'+'vec2f,\x20res'+'olution:\x20f'+'32,\x20Z:\x20f32'+',\x20vsmBias:'+'\x20f32,\x20expo'+'nent:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20CAPS_TEX'+'TURE_FLOAT'+'_FILTERABL'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20moment'+'s:\x20vec3f\x20='+'\x20textureSa'+'mpleLevel('+'tex,\x20texSa'+'mpler,\x20tex'+'Coords_in,'+'\x200.0).xyz;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20manual\x20b'+'ilinear\x20fi'+'ltering\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'pixelSize\x20'+':\x20f32\x20=\x201.'+'0\x20/\x20resolu'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20te'+'xCoords:\x20v'+'ec2f\x20=\x20tex'+'Coords_in\x20'+'-\x20vec2f(pi'+'xelSize);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20s00:\x20vec'+'3f\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20texCoords'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20s10:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20texCoor'+'ds\x20+\x20vec2f'+'(pixelSize'+',\x200.0),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'s01:\x20vec3f'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'exCoords\x20+'+'\x20vec2f(0.0'+',\x20pixelSiz'+'e),\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s11:')+('\x20vec3f\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20texCo'+'ords\x20+\x20vec'+'2f(pixelSi'+'ze),\x200.0).'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fr:'+'\x20vec2f\x20=\x20f'+'ract(texCo'+'ords\x20*\x20res'+'olution);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20h0:\x20vec3'+'f\x20=\x20mix(s0'+'0,\x20s10,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20h1:'+'\x20vec3f\x20=\x20m'+'ix(s01,\x20s1'+'1,\x20fr.x);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20moments:'+'\x20vec3f\x20=\x20m'+'ix(h0,\x20h1,'+'\x20fr.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20calculate'+'EVSM(momen'+'ts,\x20Z,\x20vsm'+'Bias,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owVSM32(sh'+'adowMap:\x20t'+'exture_2d<'+'f32>,\x20shad'+'owMapSampl'+'er:\x20sample'+'r,\x20shadowC'+'oord:\x20vec3'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20expone'+'nt:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20V'+'SM32(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afn\x20getSha'+'dowSpotVSM'+'32(shadowM'+'ap:\x20textur'+'e_2d<f32>,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20e'+'xponent:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20Z:'+'\x20f32\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20Z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a'),FD='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afn\x20getS'+'hadowPCF1x'+'1(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowCoo'+'rd.z);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotPCF1'+'x1(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20shad'+'owCoord.xy'+',\x20shadowCo'+'ord.z);\x0a}\x0a'+'\x0a//\x20-----\x20'+'Omni\x20Sampl'+'ing\x20-----\x0a'+'\x0a//\x20Not\x20su'+'pported\x20on'+'\x20WebGPU\x20de'+'vice\x0a//\x20fn'+'\x20getShadow'+'OmniPCF1x1'+'(shadowMap'+':\x20texture_'+'depth_cube'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f,'+'\x20lightDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a//\x20'+'\x20\x20\x20\x20let\x20sh'+'adowZ:\x20f32'+'\x20=\x20length('+'lightDir)\x20'+'*\x20shadowPa'+'rams.w\x20+\x20s'+'hadowParam'+'s.z;\x0a//\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20lightD'+'ir,\x20shadow'+'Z);\x0a//\x20}\x0a',ND='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0afn\x20_getS'+'hadowPCF3x'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20sum:\x20f3'+'2\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20let\x20uw'+'0:\x20f32\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20s);\x0a\x20\x20\x20\x20'+'let\x20uw1:\x20f'+'32\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20s)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20u0_offset'+':\x20f32\x20=\x20(2'+'.0\x20-\x20s)\x20/\x20'+'uw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20let\x20u'+'1_offset:\x20'+'f32\x20=\x20s\x20/\x20'+'uw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'vw0:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t);\x0a\x20\x20'+'\x20\x20let\x20vw1:'+'\x20f32\x20=\x20(1.'+'0\x20+\x202.0\x20*\x20'+'t);\x0a\x0a\x20\x20\x20\x20l'+'et\x20v0_offs'+'et:\x20f32\x20=\x20'+'(2.0\x20-\x20t)\x20'+'/\x20vw0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20let'+'\x20v1_offset'+':\x20f32\x20=\x20t\x20'+'/\x20vw1\x20+\x201.'+'0;\x0a\x0a\x20\x20\x20\x20le'+'t\x20u0:\x20f32\x20'+'=\x20u0_offse'+'t\x20*\x20shadow'+'MapSizeInv'+'\x20+\x20base_uv'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20v0:\x20f32\x20'+'=\x20v0_offse'+'t\x20*\x20shadow'+('MapSizeInv'+'\x20+\x20base_uv'+'.y;\x0a\x0a\x20\x20\x20\x20l'+'et\x20u1:\x20f32'+'\x20=\x20u1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20l'+'et\x20v1:\x20f32'+'\x20=\x20v1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'sum\x20=\x20sum\x20'+'+\x20uw0\x20*\x20vw'+'0\x20*\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20v'+'ec2f(u0,\x20v'+'0),\x20z);\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw1\x20*\x20'+'vw0\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u1,'+'\x20v0),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw0\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'0,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'1\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u1,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20*'+'\x20(1.0\x20/\x2016'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20sum;'+'\x0a}\x0a\x0afn\x20get'+'ShadowPCF3'+'x3(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wPCF3x3(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0afn\x20getSh'+'adowSpotPC'+'F3x3(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3(')+('shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams.xyz);'+'\x0a}\x0a\x0a//\x20---'+'--\x20Omni\x20Sa'+'mpling\x20---'+'--\x0a\x0a//\x20Not'+'\x20currently'+'\x20supported'+'\x20on\x20WebGPU'+'\x20device\x0a//'+'\x20fn\x20getSha'+'dowOmniPCF'+'3x3(shadow'+'Map:\x20textu'+'re_depth_c'+'ube,\x20shado'+'wMapSample'+'r:\x20sampler'+'_compariso'+'n,\x20shadowP'+'arams:\x20vec'+'4f,\x20dir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a//\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a//\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(dir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x0a//'+'\x20\x20\x20\x20\x20//\x20of'+'fset\x0a//\x20\x20\x20'+'\x20\x20let\x20texS'+'ize_i\x20=\x20te'+'xtureDimen'+'sions(shad'+'owMap,\x200);'+'\x0a//\x20\x20\x20\x20\x20le'+'t\x20z:\x20f32\x20='+'\x201.0\x20/\x20f32'+'(texSize_i'+'.x);\x0a//\x20\x20\x20'+'\x20\x20let\x20tc:\x20'+'vec3f\x20=\x20no'+'rmalize(di'+'r);\x0a\x0a//\x20\x20\x20'+'\x20\x20//\x20avera'+'ge\x204\x20sampl'+'es\x20-\x20not\x20a'+'\x20strict\x203x'+'3\x20PCF\x20but\x20'+'that\x27s\x20tri'+'cky\x20with\x20c'+'ubemaps\x0a//'+'\x20\x20\x20\x20\x20var\x20s'+'hadows:\x20ve'+'c4f;\x0a//\x20\x20\x20'+'\x20\x20shadows.'+'x\x20=\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20t'+'c\x20+\x20vec3f('+'\x20z,\x20\x20z,\x20\x20z'+'),\x20shadowZ'+');\x0a//\x20\x20\x20\x20\x20'+'shadows.y\x20'+'=\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20tc\x20'+'+\x20vec3f(-z'+',\x20-z,\x20\x20z),'+'\x20shadowZ);'+'\x0a//\x20\x20\x20\x20\x20sh'+'adows.z\x20=\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20tc\x20+\x20'+'vec3f(-z,\x20'+'\x20z,\x20-z),\x20s'+'hadowZ);\x0a/')+('/\x20\x20\x20\x20\x20shad'+'ows.w\x20=\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20tc\x20+\x20ve'+'c3f(\x20z,\x20-z'+',\x20-z),\x20sha'+'dowZ);\x0a\x0a//'+'\x20\x20\x20\x20\x20retur'+'n\x20dot(shad'+'ows,\x20vec4f'+'(0.25));\x0a/'+'/\x20}\x0a\x0a//\x20fn'+'\x20getShadow'+'OmniPCF3x3'+'_Wrapper(s'+'hadowMap:\x20'+'texture_de'+'pth_cube,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a//\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCF3x3(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowParams'+',\x20lightDir'+');\x0a//\x20}\x0a'),kD='\x0a//\x20http:/'+'/the-witne'+'ss.net/new'+'s/2013/09/'+'shadow-map'+'ping-summa'+'ry-part-1/'+'\x0afn\x20_getSh'+'adowPCF5x5'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20l'+'et\x20uw0:\x20f3'+'2\x20=\x20(4.0\x20-'+'\x203.0\x20*\x20s);'+'\x0a\x20\x20\x20\x20let\x20u'+'w1:\x20f32\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20l'+'et\x20uw2:\x20f3'+'2\x20=\x20(1.0\x20+'+'\x203.0\x20*\x20s);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'u0_offset:'+'\x20f32\x20=\x20(3.'+'0\x20-\x202.0\x20*\x20'+'s)\x20/\x20uw0\x20-'+'\x202.0;\x0a\x20\x20\x20\x20'+'let\x20u1_off'+'set:\x20f32\x20='+'\x20(3.0\x20+\x20s)'+'\x20/\x20uw1;\x0a\x20\x20'+'\x20\x20let\x20u2_o'+'ffset:\x20f32'+'\x20=\x20s\x20/\x20uw2'+'\x20+\x202.0;\x0a\x0a\x20'+'\x20\x20\x20let\x20vw0'+':\x20f32\x20=\x20(4'+'.0\x20-\x203.0\x20*'+'\x20t);\x0a\x20\x20\x20\x20l'+'et\x20vw1:\x20f3'+'2\x20=\x207.0;\x0a\x20'+'\x20\x20\x20let\x20vw2'+':\x20f32\x20=\x20(1'+'.0\x20+\x203.0\x20*'+'\x20t);\x0a\x0a\x20\x20\x20\x20'+'let\x20v0_off'+'set:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t)\x20/\x20v'+'w0\x20-\x202.0;\x0a'+'\x20\x20\x20\x20let\x20v1'+'_offset:\x20f'+'32\x20=\x20(3.0\x20'+('+\x20t)\x20/\x20vw1'+';\x0a\x20\x20\x20\x20let\x20'+'v2_offset:'+'\x20f32\x20=\x20t\x20/'+'\x20vw2\x20+\x202.0'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20sum:\x20f32\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20let\x20u0:\x20'+'f32\x20=\x20u0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.x;\x0a\x20\x20'+'\x20\x20let\x20v0:\x20'+'f32\x20=\x20v0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20u1:'+'\x20f32\x20=\x20u1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.x;\x0a\x20'+'\x20\x20\x20let\x20v1:'+'\x20f32\x20=\x20v1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20let\x20u2'+':\x20f32\x20=\x20u2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.x;\x0a'+'\x20\x20\x20\x20let\x20v2'+':\x20f32\x20=\x20v2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20sum\x20='+'\x20sum\x20+\x20uw0'+'\x20*\x20vw0\x20*\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20vec2f('+'u0,\x20v0),\x20z'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20sum\x20+\x20u'+'w1\x20*\x20vw0\x20*'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20vec2'+'f(u1,\x20v0),'+'\x20z);\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw2\x20*\x20vw0'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u2,\x20v0'+'),\x20z);\x0a\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw0\x20*\x20'+'vw1\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u0,'+'\x20v1),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'1,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'2\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare')+('Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u2,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw0\x20*\x20vw2'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u0,\x20v2'+'),\x20z);\x0a\x20\x20\x20'+'\x20sum\x20=\x20sum'+'\x20+\x20uw1\x20*\x20v'+'w2\x20*\x20textu'+'reSampleCo'+'mpareLevel'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'vec2f(u1,\x20'+'v2),\x20z);\x0a\x20'+'\x20\x20\x20sum\x20=\x20s'+'um\x20+\x20uw2\x20*'+'\x20vw2\x20*\x20tex'+'tureSample'+'CompareLev'+'el(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20vec2f(u2'+',\x20v2),\x20z);'+'\x0a\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20*\x20(1'+'.0\x20/\x20144.0'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20saturat'+'e(sum);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afn'+'\x20getShadow'+'PCF5x5(sha'+'dowMap:\x20te'+'xture_dept'+'h_2d,\x20shad'+'owMapSampl'+'er:\x20sample'+'r_comparis'+'on,\x20shadow'+'Coord:\x20vec'+'3f,\x20shadow'+'Params:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20_getS'+'hadowPCF5x'+'5(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params.xyz'+');\x0a}\x0a\x0afn\x20g'+'etShadowSp'+'otPCF5x5(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owCoord:\x20v'+'ec3f,\x20shad'+'owParams:\x20'+'vec4f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20_ge'+'tShadowPCF'+'5x5(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a'),UD='\x0a\x0afn\x20fract'+'SinRand(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20PI:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20a:\x20f32\x20'+'=\x2012.9898;'+'\x20let\x20b:\x20f3'+'2\x20=\x2078.233'+';\x20let\x20c:\x20f'+'32\x20=\x2043758'+'.5453;\x0a\x20\x20\x20'+'\x20let\x20dt:\x20f'+'32\x20=\x20dot(u'+'v.xy,\x20vec2'+'f(a,\x20b));\x0a'+'\x20\x20\x20\x20let\x20sn'+':\x20f32\x20=\x20dt'+'\x20%\x20PI;\x0a\x20\x20\x20'+'\x20return\x20fr'+'act(sin(sn'+')\x20*\x20c);\x0a}\x0a'+'\x0a//\x20struct'+'\x20to\x20hold\x20p'+'recomputed'+'\x20constants'+'\x20and\x20curre'+'nt\x20state\x0as'+'truct\x20Voge'+'lDiskData\x20'+'{\x0a\x20\x20\x20\x20invN'+'umSamples:'+'\x20f32,\x0a\x20\x20\x20\x20'+'initialAng'+'le:\x20f32,\x0a\x20'+'\x20\x20\x20current'+'PointId:\x20f'+'32,\x0a}\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'fn\x20prepare'+'DiskConsta'+'nts(data:\x20'+'ptr<functi'+'on,\x20VogelD'+'iskData>,\x20'+'sampleCoun'+'t:\x20i32,\x20ra'+'ndomSeed:\x20'+'f32)\x20{\x0a\x20\x20\x20'+'\x20let\x20pi2:\x20'+'f32\x20=\x206.28'+'318530718;'+'\x0a\x20\x20\x20\x20data.'+'invNumSamp'+'les\x20=\x201.0\x20'+'/\x20f32(samp'+'leCount);\x0a'+'\x20\x20\x20\x20data.i'+'nitialAngl'+'e\x20=\x20random'+'Seed\x20*\x20pi2'+';\x0a\x20\x20\x20\x20data'+'.currentPo'+'intId\x20=\x200.'+'0;\x0a}\x0a\x0a\x0afn\x20'+'generateDi'+'skSample(d'+'ata:\x20ptr<f'+'unction,\x20V'+'ogelDiskDa'+'ta>)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20GOLDEN'+'_ANGLE:\x20f3'+'2\x20=\x202.3999'+'63;\x0a\x20\x20\x20\x20le'+'t\x20r:\x20f32\x20='+'\x20sqrt((dat'+'a.currentP'+'ointId\x20+\x200'+'.5)\x20*\x20data'+'.invNumSam'+'ples);\x0a\x20\x20\x20'+'\x20let\x20theta'+':\x20f32\x20=\x20da'+'ta.current'+'PointId\x20*\x20'+'GOLDEN_ANG'+'LE\x20+\x20data.'+'initialAng'+('le;\x0a\x0a\x20\x20\x20\x20l'+'et\x20offset:'+'\x20vec2f\x20=\x20v'+'ec2f(cos(t'+'heta),\x20sin'+'(theta))\x20*'+'\x20pow(r,\x201.'+'33);\x0a\x0a\x20\x20\x20\x20'+'data.curre'+'ntPointId\x20'+'=\x20data.cur'+'rentPointI'+'d\x20+\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'offset;\x0a}\x0a'+'\x0afn\x20PCSSFi'+'ndBlocker('+'shadowMap:'+'\x20texture_2'+'d<f32>,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler,\x20avgBl'+'ockerDepth'+':\x20ptr<func'+'tion,\x20f32>'+',\x20numBlock'+'ers:\x20ptr<f'+'unction,\x20i'+'32>,\x0a\x20\x20\x20\x20s'+'hadowCoord'+'s:\x20vec2f,\x20'+'z:\x20f32,\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32,\x20penum'+'braSize:\x20f'+'32,\x20invSha'+'dowMapSize'+':\x20f32,\x20ran'+'domSeed:\x20f'+'32)\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20diskD'+'ata:\x20Vogel'+'DiskData;\x0a'+'\x20\x20\x20\x20prepar'+'eDiskConst'+'ants(&disk'+'Data,\x20shad'+'owBlockerS'+'amples,\x20ra'+'ndomSeed);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'searchWidt'+'h:\x20f32\x20=\x20p'+'enumbraSiz'+'e\x20*\x20invSha'+'dowMapSize'+';\x0a\x20\x20\x20\x20var\x20'+'blockerSum'+':\x20f32\x20=\x200.'+'0;\x0a\x20\x20\x20\x20var'+'\x20numBlocke'+'rs_local:\x20'+'i32\x20=\x200;\x0a\x0a'+'\x20\x20\x20\x20for(\x20v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20s'+'hadowBlock'+'erSamples;'+'\x20i\x20=\x20i\x20+\x201'+'\x20)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20dis'+'kUV:\x20vec2f'+'\x20=\x20generat'+'eDiskSampl'+'e(&diskDat'+'a);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20samp'+'leUV:\x20vec2'+'f\x20=\x20shadow'+'Coords\x20+\x20d'+'iskUV\x20*\x20se'+'archWidth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadowM'+'apDepth:\x20f'+'32\x20=\x20textu'+'reSampleLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20sampleU'+'V,\x200.0).r;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(\x20shadow'+'MapDepth\x20<'+'\x20z\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20b'+'lockerSum\x20')+('=\x20blockerS'+'um\x20+\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers_local'+'\x20=\x20numBloc'+'kers_local'+'\x20+\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20*avg'+'BlockerDep'+'th\x20=\x20block'+'erSum\x20/\x20f3'+'2(numBlock'+'ers_local)'+';\x0a\x20\x20\x20\x20*num'+'Blockers\x20='+'\x20numBlocke'+'rs_local;\x0a'+'}\x0a\x0afn\x20PCSS'+'Filter(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20uv:\x20vec2'+'f,\x20receive'+'rDepth:\x20f3'+'2,\x20shadowS'+'amples:\x20i3'+'2,\x20filterR'+'adius:\x20f32'+',\x20randomSe'+'ed:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20var\x20dis'+'kData:\x20Vog'+'elDiskData'+';\x0a\x20\x20\x20\x20prep'+'areDiskCon'+'stants(&di'+'skData,\x20sh'+'adowSample'+'s,\x20randomS'+'eed);\x0a\x0a\x20\x20\x20'+'\x20var\x20sum:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20for\x20('+'var\x20i:\x20i32'+'\x20=\x200;\x20i\x20<\x20'+'shadowSamp'+'les;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'offsetUV:\x20'+'vec2f\x20=\x20ge'+'nerateDisk'+'Sample(&di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dept'+'h:\x20f32\x20=\x20t'+'extureSamp'+'leLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv\x20'+'+\x20offsetUV'+',\x200.0).r;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20su'+'m\x20=\x20sum\x20+\x20'+'step(recei'+'verDepth,\x20'+'depth);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20sum\x20/'+'\x20f32(shado'+'wSamples);'+'\x0a}\x0a\x0afn\x20get'+'Penumbra(d'+'blocker:\x20f'+'32,\x20drecei'+'ver:\x20f32,\x20'+'penumbraSi'+'ze:\x20f32,\x20p'+'enumbraFal'+'loff:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20di'+'st:\x20f32\x20=\x20'+'dreceiver\x20'+'-\x20dblocker'+';\x0a\x20\x20\x20\x20let\x20'+'penumbra:\x20'+'f32\x20=\x201.0\x20'+'-\x20pow(1.0\x20'+'-\x20dist,\x20pe')+('numbraFall'+'off);\x0a\x20\x20\x20\x20'+'return\x20pen'+'umbra\x20*\x20pe'+'numbraSize'+';\x0a}\x0a\x0afn\x20PC'+'SSDirectio'+'nal(shadow'+'Map:\x20textu'+'re_2d<f32>'+',\x20shadowMa'+'pSampler:\x20'+'sampler,\x20s'+'hadowCoord'+'s:\x20vec3f,\x20'+'cameraPara'+'ms:\x20vec4f,'+'\x20softShado'+'wParams:\x20v'+'ec4f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'let\x20receiv'+'erDepth:\x20f'+'32\x20=\x20shado'+'wCoords.z;'+'\x0a\x20\x20\x20\x20let\x20r'+'andomSeed:'+'\x20f32\x20=\x20fra'+'ctSinRand('+'pcPosition'+'.xy);\x0a\x20\x20\x20\x20'+'let\x20shadow'+'Samples:\x20i'+'32\x20=\x20i32(s'+'oftShadowP'+'arams.x);\x0a'+'\x20\x20\x20\x20let\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32\x20=\x20i32('+'softShadow'+'Params.y);'+'\x0a\x20\x20\x20\x20let\x20p'+'enumbraSiz'+'e:\x20f32\x20=\x20s'+'oftShadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20let\x20pen'+'umbraFallo'+'ff:\x20f32\x20=\x20'+'softShadow'+'Params.w;\x0a'+'\x0a\x20\x20\x20\x20let\x20s'+'hadowMapSi'+'ze:\x20i32\x20=\x20'+'i32(textur'+'eDimension'+'s(shadowMa'+'p,\x200).x);\x0a'+'\x20\x20\x20\x20var\x20in'+'vShadowMap'+'Size:\x20f32\x20'+'=\x201.0\x20/\x20f3'+'2(shadowMa'+'pSize);\x0a\x20\x20'+'\x20\x20invShado'+'wMapSize\x20='+'\x20invShadow'+'MapSize\x20*\x20'+'(f32(shado'+'wMapSize)\x20'+'/\x202048.0);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'penumbra:\x20'+'f32;\x0a\x0a\x20\x20\x20\x20'+'//\x20contact'+'\x20hardening'+'\x20path\x0a\x20\x20\x20\x20'+'if\x20(shadow'+'BlockerSam'+'ples\x20>\x200)\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20find\x20a'+'verage\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20avgBloc'+'kerDepth:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20numBloc'+'kers:\x20i32\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20&a'+'vgBlockerD'+'epth,\x20&num')+('Blockers,\x20'+'shadowCoor'+'ds.xy,\x20rec'+'eiverDepth'+',\x20shadowBl'+'ockerSampl'+'es,\x20penumb'+'raSize,\x20in'+'vShadowMap'+'Size,\x20rand'+'omSeed);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20when\x20no\x20b'+'lockers\x20ar'+'e\x20present\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(numBlock'+'ers\x20<\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20pen'+'umbra\x20size'+'\x20is\x20based\x20'+'on\x20the\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20p'+'enumbra\x20=\x20'+'getPenumbr'+'a(avgBlock'+'erDepth,\x20s'+'hadowCoord'+'s.z,\x20penum'+'braSize,\x20p'+'enumbraFal'+'loff);\x0a\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20constan'+'t\x20filter\x20s'+'ize,\x20no\x20co'+'ntact\x20hard'+'ening\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20penumb'+'ra\x20=\x20penum'+'braSize;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20filter'+'Radius:\x20f3'+'2\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ords.xy,\x20r'+'eceiverDep'+'th,\x20shadow'+'Samples,\x20f'+'ilterRadiu'+'s,\x20randomS'+'eed);\x0a}\x0a\x0af'+'n\x20getShado'+'wPCSS(shad'+'owMap:\x20tex'+'ture_2d<f3'+'2>,\x20shadow'+'MapSampler'+':\x20sampler,'+'\x20shadowCoo'+'rd:\x20vec3f,'+'\x20shadowPar'+'ams:\x20vec4f'+',\x20cameraPa'+'rams:\x20vec4'+'f,\x20softSha'+'dowParams:'+'\x20vec4f,\x20li'+'ghtDir:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x20//\x20lig'+'htDir\x20unus'+'ed?\x20Kept\x20p'+'aram.\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SDirection'+'al(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ord,\x20camer'+'aParams,\x20s'+'oftShadowP')+'arams);\x0a}\x0a',BD='\x0aattribute'+'\x20vertex_bo'+'neIndices:'+'\x20f32;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20g'+'etBoneMatr'+'ix(indexFl'+'oat:\x20f32)\x20'+'->\x20mat4x4f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20width\x20=\x20'+'i32(textur'+'eDimension'+'s(texture_'+'poseMap).x'+');\x0a\x20\x20\x20\x20let'+'\x20index:\x20i3'+'2\x20=\x20i32(in'+'dexFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x20\x20\x20\x20let\x20i'+'y:\x20i32\x20=\x20i'+'ndex\x20/\x20wid'+'th;\x0a\x20\x20\x20\x20le'+'t\x20ix:\x20i32\x20'+'=\x20index\x20%\x20'+'width;\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'elements\x20o'+'f\x204x3\x20matr'+'ix\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec4f'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(ix'+'\x20+\x200,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20v2:\x20vec'+'4f\x20=\x20textu'+'reLoad(tex'+'ture_poseM'+'ap,\x20vec2i('+'ix\x20+\x201,\x20iy'+'),\x200);\x0a\x20\x20\x20'+'\x20let\x20v3:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(ix\x20+\x202,\x20'+'iy),\x200);\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4x4f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.x,\x20v2.x,'+'\x20v3.x,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.y,\x20v2.y,\x20'+'v3.y,\x200,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'z,\x20v2.z,\x20v'+'3.z,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.w'+',\x20v2.w,\x20v3'+'.w,\x201.0\x0a\x20\x20'+'\x20\x20);\x0a}\x0a',zD='\x0a\x0aattribut'+'e\x20vertex_b'+'oneWeights'+':\x20vec4f;\x0aa'+'ttribute\x20v'+'ertex_bone'+'Indices:\x20v'+'ec4f;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0astru'+'ct\x20BoneMat'+'rix\x20{\x0a\x20\x20\x20\x20'+'v1:\x20vec4f,'+'\x0a\x20\x20\x20\x20v2:\x20v'+'ec4f,\x0a\x20\x20\x20\x20'+'v3:\x20vec4f,'+'\x0a}\x0a\x0afn\x20get'+'BoneMatrix'+'(width:\x20i3'+'2,\x20index:\x20'+'i32)\x20->\x20Bo'+'neMatrix\x20{'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'v\x20=\x20index\x20'+'/\x20width;\x0a\x20'+'\x20\x20\x20let\x20u\x20='+'\x20index\x20%\x20w'+'idth;\x0a\x0a\x20\x20\x20'+'\x20var\x20resul'+'t:\x20BoneMat'+'rix;\x0a\x20\x20\x20\x20r'+'esult.v1\x20='+'\x20textureLo'+'ad(texture'+'_poseMap,\x20'+'vec2i(u\x20+\x20'+'0,\x20v),\x200);'+'\x0a\x20\x20\x20\x20resul'+'t.v2\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20result.v3'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(u\x20'+'+\x202,\x20v),\x200'+');\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0afn\x20ge'+'tSkinMatri'+'x(indicesF'+'loat:\x20vec4'+'f,\x20weights'+':\x20vec4f)\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20width\x20=\x20i'+'32(texture'+'Dimensions'+'(texture_p'+'oseMap).x)'+';\x0a\x20\x20\x20\x20var\x20'+'indices\x20=\x20'+'vec4i(indi'+'cesFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'boneA\x20=\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.x);'+'\x0a\x20\x20\x20\x20let\x20b'+'oneB\x20=\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y);\x0a'+'\x20\x20\x20\x20let\x20bo'+'neC\x20=\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.z);\x0a\x20'+'\x20\x20\x20let\x20bon'+'eD\x20=\x20getBo'+'neMatrix(w'+'idth,\x20indi'+'ces.w);\x0a\x0a\x20'+'\x20\x20\x20//\x20...\x20'+'rest\x20of\x20ge'+'tSkinMatri'+'x\x20remains\x20'+'the\x20same\x20.'+'..\x0a\x20\x20\x20\x20let'+'\x20v1\x20=\x20bone'+'A.v1\x20*\x20wei'+('ghts.x\x20+\x20b'+'oneB.v1\x20*\x20'+'weights.y\x20'+'+\x20boneC.v1'+'\x20*\x20weights'+'.z\x20+\x20boneD'+'.v1\x20*\x20weig'+'hts.w;\x0a\x20\x20\x20'+'\x20let\x20v2\x20=\x20'+'boneA.v2\x20*'+'\x20weights.x'+'\x20+\x20boneB.v'+'2\x20*\x20weight'+'s.y\x20+\x20bone'+'C.v2\x20*\x20wei'+'ghts.z\x20+\x20b'+'oneD.v2\x20*\x20'+'weights.w;'+'\x0a\x20\x20\x20\x20let\x20v'+'3\x20=\x20boneA.'+'v3\x20*\x20weigh'+'ts.x\x20+\x20bon'+'eB.v3\x20*\x20we'+'ights.y\x20+\x20'+'boneC.v3\x20*'+'\x20weights.z'+'\x20+\x20boneD.v'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'let\x20one\x20=\x20'+'dot(weight'+'s,\x20vec4f(1'+'.0,\x201.0,\x201'+'.0,\x201.0));'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'ranspose\x20t'+'o\x204x4\x20matr'+'ix\x0a\x20\x20\x20\x20ret'+'urn\x20mat4x4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20v1.x,\x20v2.'+'x,\x20v3.x,\x200'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'v1.y,\x20v2.y'+',\x20v3.y,\x200,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.z,\x20v2.z,'+'\x20v3.z,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.w,\x20v2.w,\x20'+'v3.w,\x20one\x0a'+'\x20\x20\x20\x20);\x0a}\x0a'),VD='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vLinear'+'Depth:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'floatAsUin'+'tPS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20Varyin'+'g\x20and\x20unif'+'orm\x20declar'+'ations\x0a\x20\x20\x20'+'\x20varying\x20v'+'ViewDir\x20:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20uniform\x20s'+'kyboxHighl'+'ightMultip'+'lier\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20SKY_CU'+'BEMAP\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cub'+'eMap\x20:\x20tex'+'ture_cube<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_cube'+'Map_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vWo'+'rldPos\x20:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20p'+'rojectedSk'+'ydomeCente'+'r\x20:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'env-atlas\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'phericalPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'envAtlasPS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_envAtlas_'+'sampler\x20:\x20'+'sampler;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20mipL'+'evel\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20@'+'fragment\x0a\x20'+'\x20\x20\x20fn\x20frag'+'mentMain(i'+'nput\x20:\x20Fra'+'gmentInput'+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20PREPA'+('SS_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20output'+'\x20linear\x20de'+'pth\x20during'+'\x20prepass\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20floa'+'t2vec4(vLi'+'nearDepth)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20linear'+'\x20:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20dir\x20'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KY_CUBEMAP'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+'\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+'nvDir\x20:\x20ve'+'c3f\x20=\x20norm'+'alize(inpu'+'t.vWorldPo'+'s\x20-\x20unifor'+'m.projecte'+'dSkydomeCe'+'nter);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'\x20=\x20envDir\x20'+'*\x20uniform.'+'cubeMapRot'+'ationMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir\x20='+'\x20input.vVi'+'ewDir;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'.x\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'tureSample'+'(texture_c'+'ubeMap,\x20te'+'xture_cube'+'Map_sample'+'r,\x20dir));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20env-atla'+'s\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ir\x20=\x20input'+'.vViewDir\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv\x20:\x20'+'vec2f\x20=\x20to'+'SphericalU'+'v(normaliz'+'e(dir));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20linea'+'r\x20=\x20{SKYBO'+'X_DECODE_F'+'NC}(textur'+'eSample(te'+'xture_envA'+'tlas,\x20text'+'ure_envAtl'+'as_sampler'+',\x20mapRough'+'nessUv(uv,')+('\x20uniform.m'+'ipLevel)))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ou'+'r\x20HDR\x20enco'+'des\x20values'+'\x20up\x20to\x2064,'+'\x20so\x20allow\x20'+'extra\x20brig'+'htness\x20for'+'\x20the\x20clipp'+'ed\x20values\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(any('+'linear\x20>=\x20'+'vec3f(64.0'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20uniform.'+'skyboxHigh'+'lightMulti'+'plier;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(gam'+'maCorrectO'+'utput(tone'+'Map(proces'+'sEnvironme'+'nt(linear)'+')),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),GD='\x0a\x20\x20\x20\x20//\x20At'+'tribute\x0a\x20\x20'+'\x20\x20attribut'+'e\x20aPositio'+'n\x20:\x20vec4f;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20matrix'+'_view\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20uniform\x20m'+'atrix_proj'+'ectionSkyb'+'ox\x20:\x20mat4x'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vViewDir'+'\x20:\x20vec3f;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PREPASS_'+'PASS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20when'+'\x20skydome\x20r'+'enders\x20dep'+'th\x20during\x20'+'prepass,\x20g'+'enerate\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vLi'+'nearDepth:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vWorldP'+'os\x20:\x20vec3f'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input\x20'+':\x20VertexIn'+'put)\x20->\x20Ve'+'rtexOutput'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut\x20:\x20Verte'+'xOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20view\x20:\x20ma'+'t4x4f\x20=\x20un'+'iform.matr'+'ix_view;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'worldPos\x20:'+'\x20vec4f\x20=\x20u'+'niform.mat'+'rix_model\x20'+'*\x20input.aP'+'osition;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vW'+'orldPos\x20=\x20'+'worldPos.x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'inear\x20dept'+'h\x20from\x20the'+'\x20worldPosi'+'tion,\x20see\x20'+'getLinearD'+'epth\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vL'+'inearDepth'+'\x20=\x20-(unifo'+('rm.matrix_'+'view\x20*\x20vec'+'4f(worldPo'+'s.xyz,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[0]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[1]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[2]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20uniform.m'+'atrix_proj'+'ectionSkyb'+'ox\x20*\x20(view'+'\x20*\x20input.a'+'Position);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'vViewDir\x20='+'\x20input.aPo'+'sition.xyz'+'\x20*\x20uniform'+'.cubeMapRo'+'tationMatr'+'ix;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20for\x20'+'infinite\x20s'+'kybox,\x20use'+'\x20negative\x20'+'gl_Positio'+'n.w\x20to\x20get'+'\x20positive\x20'+'linear\x20dep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-pcPositi'+'on.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Force\x20sk'+'ybox\x20to\x20fa'+'r\x20Z,\x20regar'+'dless\x20of\x20t'+'he\x20clip\x20pl'+'anes\x20on\x20th'+'e\x20camera\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Subtract\x20a'+'\x20tiny\x20fudg'+'e\x20factor\x20t'+'o\x20ensure\x20f'+'loating\x20po'+'int\x20errors'+'\x20don\x27t\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20st'+'ill\x20push\x20p'+'ixels\x20beyo'+'nd\x20far\x20Z.\x20'+'See:\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20http'+'s://commun'+'ity.khrono'+'s.org/t/sk'+'ybox-probl'+'em/61857\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.posit'+'ion.z\x20=\x20ou'+'tput.posit'+'ion.w\x20-\x201.'+'0e-7;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),HD='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_specular'+':\x20vec3f;\x0a#'+'endif\x0a\x0afn\x20'+'getSpecula'+'rity()\x20{\x0a\x20'+'\x20\x20\x20var\x20spe'+'cularColor'+'\x20=\x20vec3f(1'+'.0,\x201.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'CONSTANT\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20unifo'+'rm.materia'+'l_specular'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_TE'+'XTURE\x0a\x20\x20\x20\x20'+'specularCo'+'lor\x20=\x20spec'+'ularColor\x20'+'*\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SPECU'+'LAR_TEXTUR'+'E_NAME},\x20{'+'STD_SPECUL'+'AR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_S'+'PECULAR_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SPECULA'+'R_VERTEX\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20satur'+'ate3(vVert'+'exColor.{S'+'TD_SPECULA'+'R_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dSpe'+'cularity\x20='+'\x20specularC'+'olor;\x0a}\x0a',WD='\x0a\x0afn\x20toSph'+'erical(dir'+':\x20vec3f)\x20-'+'>\x20vec2f\x20{\x0a'+'\x20\x20\x20\x20let\x20an'+'gle_xz\x20=\x20s'+'elect(0.0,'+'\x20atan2(dir'+'.x,\x20dir.z)'+',\x20any(dir.'+'xz\x20!=\x20vec2'+'f(0.0)));\x0a'+'\x20\x20\x20\x20return'+'\x20vec2f(ang'+'le_xz,\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0afn\x20toS'+'phericalUv'+'(dir\x20:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20c'+'onst\x20PI\x20:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20uv\x20:\x20ve'+'c2f\x20=\x20toSp'+'herical(di'+'r)\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x20vec'+'2f(0.5,\x200.'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y);\x0a'+'}\x0a',$D='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'\x20\x20\x20\x20unifor'+'m\x20material'+'_speculari'+'tyFactor:\x20'+'f32;\x0a#endi'+'f\x0a\x0afn\x20getS'+'pecularity'+'Factor()\x20{'+'\x0a\x20\x20\x20\x20var\x20s'+'pecularity'+'Factor\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20speculari'+'tyFactor\x20='+'\x20speculari'+'tyFactor\x20*'+'\x20uniform.m'+'aterial_sp'+'ecularityF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'ARITYFACTO'+'R_TEXTURE\x0a'+'\x20\x20\x20\x20specul'+'arityFacto'+'r\x20=\x20specul'+'arityFacto'+'r\x20*\x20textur'+'eSampleBia'+'s({STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_NAME},\x20'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_VE'+'RTEX\x0a\x20\x20\x20\x20s'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_SPEC'+'ULARITYFAC'+'TOR_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dS'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor;\x0a}\x0a',XD='\x0afn\x20getSpo'+'tEffect(li'+'ghtSpotDir'+':\x20vec3f,\x20l'+'ightInnerC'+'oneAngle:\x20'+'f32,\x20light'+'OuterConeA'+'ngle:\x20f32,'+'\x20lightDirN'+'orm:\x20vec3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'osAngle:\x20f'+'32\x20=\x20dot(l'+'ightDirNor'+'m,\x20lightSp'+'otDir);\x0a\x20\x20'+'\x20\x20return\x20s'+'moothstep('+'lightOuter'+'ConeAngle,'+'\x20lightInne'+'rConeAngle'+',\x20cosAngle'+');\x0a}',qD='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2f(vUv0'+'.x,\x201.0\x20-\x20'+'vUv0.y);\x0a',jD='\x0a\x20\x20\x20\x20let\x20t'+'ileMask:\x20v'+'ec2f\x20=\x20ste'+'p(vMask,\x20v'+'ec2f(0.999'+'99));\x0a\x20\x20\x20\x20'+'let\x20tileSi'+'ze:\x20vec2f\x20'+'=\x200.5\x20*\x20(i'+'nnerOffset'+'.xy\x20+\x20inne'+'rOffset.zw'+');\x0a\x20\x20\x20\x20let'+'\x20tileScale'+':\x20vec2f\x20=\x20'+'vec2f(1.0)'+'\x20/\x20(vec2f('+'1.0)\x20-\x20til'+'eSize);\x0a\x20\x20'+'\x20\x20var\x20clam'+'pedUv:\x20vec'+'2f\x20=\x20mix(i'+'nnerOffset'+'.xy\x20*\x200.5,'+'\x20vec2f(1.0'+')\x20-\x20innerO'+'ffset.zw\x20*'+'\x200.5,\x20frac'+'t((vTiledU'+'v\x20-\x20tileSi'+'ze)\x20*\x20tile'+'Scale));\x0a\x20'+'\x20\x20\x20clamped'+'Uv\x20=\x20clamp'+'edUv\x20*\x20atl'+'asRect.zw\x20'+'+\x20atlasRec'+'t.xy;\x0a\x20\x20\x20\x20'+'var\x20nineSl'+'icedUv:\x20ve'+'c2f\x20=\x20vUv0'+'\x20*\x20tileMas'+'k\x20+\x20clampe'+'dUv\x20*\x20(vec'+'2f(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x0a',YD='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dAlpha'+':\x20f32\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20//'+'\x20all\x20passe'+'s\x20handle\x20o'+'pacity\x0a\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'!=\x20NONE\x20||'+'\x20defined(L'+'IT_ALPHA_T'+'EST)\x20||\x20de'+'fined(LIT_'+'ALPHA_TO_C'+'OVERAGE)\x20|'+'|\x20STD_OPAC'+'ITY_DITHER'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_OP'+'ACITY_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_opa'+'cityMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_opacityMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20globals'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dAlbedo:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'NormalW:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dSp'+'ecularity:'+'\x20vec3f\x20=\x20v'+'ec3f(0.0,\x20'+'0.0,\x200.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dGlossin'+'ess:\x20f32\x20='+'\x200.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_REFR'+'ACTION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dTransmi'+'ssion:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dTh'+'ickness:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'CENE_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SCREE'+'N_SIZE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20uSc'+'reenSize:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+('f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_TRANSFOR'+'MS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20ma'+'trix_viewP'+'rojection:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20matri'+'x_model:\x20m'+'at4x4f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20paral'+'lax\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_HEIGHT_'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'UvOffset:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'DIFFUSE_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_heightM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'heightMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20diffus'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'diffuseMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_diffus'+'eMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSEDETAI'+'L_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20norma'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_NORMAL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_normalMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20#ifdef'+'\x20STD_NORMA'+'LDETAIL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalDetai'+'lMap\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_no'+'rmalDetail'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_T'+'HICKNESS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'thicknessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_thic'+'knessMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_REFRACTIO'+'N_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_refract'+'ionMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'refraction'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20i'+'ridescence'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dIr'+'idescence:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20dIridesce'+'nceThickne'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'iridescenc'+'eThickness'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_iridescen'+'ceThicknes'+'sMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur')+('e_iridesce'+'nceMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_irides'+'cenceMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20ccSp'+'ecularity:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20ccGlossin'+'ess:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20ccNor'+'malW:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dAni'+'sotropy:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'Anisotropy'+'Rotation:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'arity\x20&\x20gl'+'ossiness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20she'+'en\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SHEE'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sSpecular'+'ity:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sGlossine'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'HEENGLOSS_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_s'+'heenGlossM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_sheenG'+'lossMapSam'+'pler\x20:\x20sam'+'pler;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_MET'+'ALNESS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dMet'+'alness:\x20f3'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dIor:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'metalnessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_metaln'+'essMapSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'rity\x20facto'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var<privat'+'e>\x20dSpecul'+'arityFacto'+'r:\x20f32;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rityFactor'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_specu'+'larityFact'+'orMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_SPECULAR'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_')+('specularMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20gloss\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_glossMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_glo'+'ssMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dAo:\x20f32;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_aoMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_AODETAIL_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoDet'+'ailMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_aoDeta'+'ilMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dEmission'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_EM'+'ISSIVE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_em'+'issiveMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_emissiv'+'eMapSample'+'r\x20:\x20sample')+('r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clearcoat\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatG'+'lossMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_clear'+'CoatGlossM'+'apSampler\x20'+':\x20sampler;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_clearC'+'oatNormalM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatN'+'ormalMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20anisotr'+'opy\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_A'+'NISOTROPY_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aniso'+'tropyMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_anis'+'otropyMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20lightm'+'ap\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(STD_LIG'+'HTMAP)\x20||\x20')+('defined(ST'+'D_LIGHT_VE'+'RTEX_COLOR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dLi'+'ghtmap:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_LI'+'GHT_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_l'+'ightMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_light'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20front'+'\x20end\x20outpu'+'ts\x20to\x20lit\x20'+'shader\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22litShader'+'CorePS\x22\x0a'),KD='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fn\x20'+'getSpecula'+'rity()\x20{\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dSpeculari'+'ty\x20=\x20vec3f'+'(1.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'gloss\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22gl'+'ossPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22aoPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20emissi'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22emissiveP'+'S\x22\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clear'+'coat\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20')+('LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22clea'+'rCoatPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'GlossPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'NormalPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ani'+'sotropy\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x20&&\x20defin'+'ed(LIT_LIG'+'HTING)\x20&&\x20'+'defined(LI'+'T_GGX_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22an'+'isotropyPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(ST'+'D_LIGHTMAP'+')\x20||\x20defin'+'ed(STD_LIG'+'HT_VERTEX_'+'COLOR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22l'+'ightmapPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20fn\x20evalu'+'ateFronten'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20al'+'l\x20passes\x20h'+'andle\x20opac'+'ity\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIT_'+'BLEND_TYPE'+'\x20!=\x20NONE\x20|'+'|\x20defined('+'LIT_ALPHA_'+'TEST)\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x20'+'||\x20STD_OPA'+'CITY_DITHE'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getOpaci'+'ty();\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_ALPHA'+'_TEST)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20alphaTe'+'st(dAlpha)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20opacityDi'+'ther(dAlph'+'a,\x200.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20d'+'Alpha;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20par')+('allax\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getP'+'arallax();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getA'+'lbedo();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_a'+'lbedo\x20=\x20dA'+'lbedo;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20normal\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getNorma'+'l();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_w'+'orldNormal'+'\x20=\x20dNormal'+'W;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'fraction\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etRefracti'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'transmissi'+'on\x20=\x20dTran'+'smission;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Thickness('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness\x20=\x20d'+'Thickness;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_D'+'ISPERSION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_di'+'spersion\x20='+'\x20uniform.m'+'aterial_di'+'spersion;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_IRIDESC'+'ENCE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getIrides'+'cence();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getIr'+'idescenceT'+'hickness()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x20=\x20'+'dIridescen'+'ce;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ir'+'idescence_'+'thickness\x20'+'=\x20dIridesc'+'enceThickn'+'ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specularit'+'y\x20&\x20glossi'+'ness\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20sheen\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSheen()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'sheen_spec'+'ularity\x20=\x20'+'sSpeculari'+'ty;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getShe'+'enGlossine'+'ss();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_sheen_'+'gloss\x20=\x20sG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getMetaln'+'ess();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_metal'+'ness\x20=\x20dMe'+'talness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etIor();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+'\x20=\x20dIor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'ity\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULARITY_'+'FACTOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'yFactor();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'Factor\x20=\x20d'+'Specularit'+'yFactor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20gloss\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'y();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20dSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs')+('_gloss\x20=\x20d'+'Glossiness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ao\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getAO();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_ao\x20=\x20'+'dAo;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getEmissi'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_emis'+'sion\x20=\x20dEm'+'ission;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getClea'+'rCoat();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getCl'+'earCoatGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'ClearCoatN'+'ormal();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_specula'+'rity\x20=\x20ccS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_glos'+'s\x20=\x20ccGlos'+'siness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal\x20=\x20ccNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20anisotro'+'py\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getAnisot'+'ropy();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20lightma'+'p\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightM'+'ap();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmap\x20='+'\x20dLightmap'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_')+('LIGHTMAP_D'+'IR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmapD'+'ir\x20=\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a'),ZD='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20tbnB'+'asis:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getTBN(t'+'angent:\x20ve'+'c3f,\x20binor'+'mal:\x20vec3f'+',\x20normal:\x20'+'vec3f)\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20TBN_TANGE'+'NTS\x20//\x20tan'+'gents\x20/\x20bi'+'normals\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dTB'+'N\x20=\x20mat3x3'+'f(normaliz'+'e(tangent)'+',\x20normaliz'+'e(binormal'+'),\x20normali'+'ze(normal)'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20define'+'d(TBN_DERI'+'VATIVES)\x20/'+'/\x20derivati'+'ves\x20based\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2f\x20=\x20{'+'lightingUv'+'};\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20get\x20e'+'dge\x20vector'+'s\x20of\x20the\x20p'+'ixel\x20trian'+'gle\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dp1:'+'\x20vec3f\x20=\x20d'+'pdx(\x20vPosi'+'tionW\x20);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dp2:\x20vec3'+'f\x20=\x20dpdy(\x20'+'vPositionW'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20duv1'+':\x20vec2f\x20=\x20'+'dpdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20duv2:\x20'+'vec2f\x20=\x20dp'+'dy(\x20uv\x20);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20solve\x20th'+'e\x20linear\x20s'+'ystem\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20dp'+'2perp:\x20vec'+'3f\x20=\x20cross'+'(\x20dp2,\x20nor'+'mal\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20d'+'p1perp:\x20ve'+'c3f\x20=\x20cros'+'s(\x20normal,'+'\x20dp1\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'T:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.x\x20+\x20'+'dp1perp\x20*\x20'+'duv2.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'B:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+('dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+'ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20deno'+'m:\x20f32\x20=\x20m'+'ax(\x20dot(T,'+'\x20T),\x20dot(B'+',\x20B)\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'invmax:\x20f3'+'2\x20=\x20select'+'(uniform.t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20),\x200.0,\x20'+'denom\x20==\x200'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3x3f(T\x20'+'*\x20invmax,\x20'+'-B\x20*\x20invma'+'x,\x20normal\x20'+');\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20obj'+'ect\x20space\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20B:\x20'+'vec3f\x20=\x20cr'+'oss(normal'+',\x20vObjectS'+'paceUpW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20T:\x20vec3f'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dot(B,'+'B)\x20==\x200.0)'+'\x20//\x20deal\x20w'+'ith\x20case\x20w'+'hen\x20vObjec'+'tSpaceUpW\x20'+'normal\x20are'+'\x20parallel\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20majo'+'r:\x20f32\x20=\x20m'+'ax(max(nor'+'mal.x,\x20nor'+'mal.y),\x20no'+'rmal.z);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(norm'+'al.x\x20==\x20ma'+'jor)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20B\x20=\x20c'+'ross(norma'+'l,\x20vec3f(0'+'.0,\x201.0,\x200'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20T\x20=\x20cros'+'s(normal,\x20'+'B);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x20if\x20(n'+'ormal.y\x20=='+'\x20major)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20B\x20'+'=\x20cross(no'+'rmal,\x20vec3'+'f(0.0,\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20//'+'\x20removed\x20\x22'+'if\x20(normal'+'.z\x20==\x20majo'+'r)\x22\x20assumi'+'ng\x20it\x27s\x20th'+'e\x20only\x20rem'+'aining\x20cas'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20B\x20=\x20cros'+'s(normal,\x20'+'vec3f(1.0,'+'\x200.0,\x200.0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3x3f(n'+'ormalize(T'+'),\x20normali'+'ze(B),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a}'),QD='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_th'+'ickness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getTh'+'ickness()\x20'+'{\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'THICKNESS_'+'CONSTANT\x0a\x20'+'\x20\x20\x20dThickn'+'ess\x20=\x20dThi'+'ckness\x20*\x20u'+'niform.mat'+'erial_thic'+'kness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_THICKN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x20d'+'Thickness\x20'+'*\x20textureS'+'ampleBias('+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_THICKNESS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_THIC'+'KNESS_VERT'+'EX\x0a\x20\x20\x20\x20dTh'+'ickness\x20=\x20'+'dThickness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',JD='\x0a#if\x20(TONE'+'MAP\x20==\x20NON'+'E)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingNo'+'nePS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20FILMIC\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingFilmi'+'cPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22tonemap'+'pingLinear'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20HEJL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gHejlPS\x22\x0a#'+'elif\x20TONEM'+'AP\x20==\x20ACES'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingAces'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20ACES2\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngAces2PS\x22'+'\x0a#elif\x20TON'+'EMAP\x20==\x20NE'+'UTRAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gNeutralPS'+'\x22\x0a#endif\x0a',eI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20t'+'A:\x20f32\x20=\x202'+'.51;\x0a\x20\x20\x20\x20l'+'et\x20tB:\x20f32'+'\x20=\x200.03;\x0a\x20'+'\x20\x20\x20let\x20tC:'+'\x20f32\x20=\x202.4'+'3;\x0a\x20\x20\x20\x20let'+'\x20tD:\x20f32\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20let\x20tE:\x20f'+'32\x20=\x200.14;'+'\x0a\x20\x20\x20\x20let\x20x'+':\x20vec3f\x20=\x20'+'color\x20*\x20un'+'iform.expo'+'sure;\x0a\x20\x20\x20\x20'+'return\x20(x\x20'+'*\x20(tA\x20*\x20x\x20'+'+\x20tB))\x20/\x20('+'x\x20*\x20(tC\x20*\x20'+'x\x20+\x20tD)\x20+\x20'+'tE);\x0a}\x0a',tI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0a//\x20AC'+'ES\x20approxi'+'mation\x20by\x20'+'Stephen\x20Hi'+'ll\x0a\x0a//\x20sRG'+'B\x20=>\x20XYZ\x20='+'>\x20D65_2_D6'+'0\x20=>\x20AP1\x20='+'>\x20RRT_SAT\x0a'+'const\x20ACES'+'InputMat:\x20'+'mat3x3f\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20vec3f(0'+'.59719,\x200.'+'35458,\x200.0'+'4823),\x0a\x20\x20\x20'+'\x20vec3f(0.0'+'7600,\x200.90'+'834,\x200.015'+'66),\x0a\x20\x20\x20\x20v'+'ec3f(0.028'+'40,\x200.1338'+'3,\x200.83777'+')\x0a);\x0a\x0a//\x20O'+'DT_SAT\x20=>\x20'+'XYZ\x20=>\x20D60'+'_2_D65\x20=>\x20'+'sRGB\x0aconst'+'\x20ACESOutpu'+'tMat:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20v'+'ec3f(\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367),\x0a\x20\x20\x20\x20'+'vec3f(-0.1'+'0208,\x20\x201.1'+'0813,\x20-0.0'+'0605),\x0a\x20\x20\x20'+'\x20vec3f(-0.'+'00327,\x20-0.'+'07276,\x20\x201.'+'07602)\x0a);\x0a'+'\x0afn\x20RRTAnd'+'ODTFit(v:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20a:\x20v'+'ec3f\x20=\x20v\x20*'+'\x20(v\x20+\x20vec3'+'f(0.024578'+'6))\x20-\x20vec3'+'f(0.000090'+'537);\x0a\x20\x20\x20\x20'+'let\x20b:\x20vec'+'3f\x20=\x20v\x20*\x20('+'vec3f(0.98'+'3729)\x20*\x20v\x20'+'+\x20vec3f(0.'+'4329510))\x20'+'+\x20vec3f(0.'+'238081);\x0a\x20'+'\x20\x20\x20return\x20'+'a\x20/\x20b;\x0a}\x0a\x0a'+'fn\x20toneMap'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'var\x20c:\x20vec'+'3f\x20=\x20color'+'\x20*\x20(unifor'+'m.exposure'+'\x20/\x200.6);\x0a\x20'+'\x20\x20\x20c\x20=\x20c\x20*'+'\x20ACESInput'+'Mat;\x0a\x0a\x20\x20\x20\x20'+'//\x20Apply\x20R'+'RT\x20and\x20ODT'+'\x0a\x20\x20\x20\x20c\x20=\x20R'+'RTAndODTFi'+'t(c);\x0a\x20\x20\x20\x20'+'c\x20=\x20c\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(c,\x20vec'+'3f(0.0),\x20v'+'ec3f(1.0))'+';\x0a}\x0a',sI='\x0aconst\x20A:\x20'+'f32\x20=\x200.15'+';\x0aconst\x20B:'+'\x20f32\x20=\x200.5'+'0;\x0aconst\x20C'+':\x20f32\x20=\x200.'+'10;\x0aconst\x20'+'D:\x20f32\x20=\x200'+'.20;\x0aconst'+'\x20E:\x20f32\x20=\x20'+'0.02;\x0acons'+'t\x20F:\x20f32\x20='+'\x200.30;\x0acon'+'st\x20W:\x20f32\x20'+'=\x2011.2;\x0a\x0au'+'niform\x20exp'+'osure:\x20f32'+';\x0a\x0afn\x20unch'+'arted2Tone'+'map(x:\x20vec'+'3f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20((x\x20'+'*\x20(A\x20*\x20x\x20+'+'\x20C\x20*\x20B)\x20+\x20'+'D\x20*\x20E)\x20/\x20('+'x\x20*\x20(A\x20*\x20x'+'\x20+\x20B)\x20+\x20D\x20'+'*\x20F))\x20-\x20ve'+'c3f(E\x20/\x20F)'+';\x0a}\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20c'+':\x20vec3f\x20=\x20'+'uncharted2'+'Tonemap(co'+'lor\x20*\x20unif'+'orm.exposu'+'re);\x0a\x20\x20\x20\x20l'+'et\x20whiteSc'+'ale:\x20vec3f'+'\x20=\x20vec3f(1'+'.0)\x20/\x20unch'+'arted2Tone'+'map(vec3f('+'W,\x20W,\x20W));'+'\x0a\x20\x20\x20\x20c\x20*=\x20'+'whiteScale'+';\x0a\x20\x20\x20\x20retu'+'rn\x20c;\x0a}\x0a',iI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20A'+':\x20f32\x20=\x200.'+'22;\x0a\x20\x20\x20\x20le'+'t\x20B:\x20f32\x20='+'\x200.3;\x0a\x20\x20\x20\x20'+'let\x20C:\x20f32'+'\x20=\x200.1;\x0a\x20\x20'+'\x20\x20let\x20D:\x20f'+'32\x20=\x200.2;\x0a'+'\x20\x20\x20\x20let\x20E:'+'\x20f32\x20=\x200.0'+'1;\x0a\x20\x20\x20\x20let'+'\x20F:\x20f32\x20=\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20Scl:\x20f3'+'2\x20=\x201.25;\x0a'+'\x0a\x20\x20\x20\x20let\x20a'+'djusted_co'+'lor\x20=\x20colo'+'r\x20*\x20unifor'+'m.exposure'+';\x0a\x20\x20\x20\x20let\x20'+'h\x20=\x20max(ve'+'c3f(0.0),\x20'+'adjusted_c'+'olor\x20-\x20vec'+'3f(0.004))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20(h\x20*\x20('+'(Scl\x20*\x20A)\x20'+'*\x20h\x20+\x20Scl\x20'+'*\x20vec3f(C\x20'+'*\x20B))\x20+\x20Sc'+'l\x20*\x20vec3f('+'D\x20*\x20E))\x20/\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(h\x20*\x20(A\x20*'+'\x20h\x20+\x20vec3f'+'(B))\x20+\x20vec'+'3f(D\x20*\x20F))'+'\x20-\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20Scl\x20*\x20'+'vec3f(E\x20/\x20'+'F);\x0a}\x0a',rI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20color\x20*\x20'+'uniform.ex'+'posure;\x0a}\x0a',aI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(col:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20var\x20col'+'or\x20=\x20col\x20*'+'\x20uniform.e'+'xposure;\x0a\x0a'+'\x20\x20\x20\x20let\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20let\x20des'+'aturation\x20'+'=\x200.15;\x0a\x0a\x20'+'\x20\x20\x20let\x20x\x20='+'\x20min(color'+'.r,\x20min(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20let\x20offs'+'et\x20=\x20selec'+'t(0.04,\x20x\x20'+'-\x206.25\x20*\x20x'+'\x20*\x20x,\x20x\x20<\x20'+'0.08);\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'vec3f(offs'+'et);\x0a\x0a\x20\x20\x20\x20'+'let\x20peak\x20='+'\x20max(color'+'.r,\x20max(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20if\x20(peak'+'\x20<\x20startCo'+'mpression)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'d\x20=\x201.0\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20let\x20newP'+'eak\x20=\x201.0\x20'+'-\x20d\x20*\x20d\x20/\x20'+'(peak\x20+\x20d\x20'+'-\x20startCom'+'pression);'+'\x0a\x20\x20\x20\x20color'+'\x20*=\x20newPea'+'k\x20/\x20peak;\x0a'+'\x0a\x20\x20\x20\x20let\x20g'+'\x20=\x201.0\x20-\x201'+'.0\x20/\x20(desa'+'turation\x20*'+'\x20(peak\x20-\x20n'+'ewPeak)\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ve'+'c3f(newPea'+'k),\x20vec3f('+'g));\x0a}\x0a',nI='\x0afn\x20toneMa'+'p(color:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a}\x0a',oI='\x0a#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20SCREE'+'NSPACE\x0a\x20\x20\x20'+'\x20uniform\x20p'+'rojectionF'+'lipY:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20evalWorl'+'dPosition('+'vertexPosi'+'tion:\x20vec3'+'f,\x20modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ve'+'c4f\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20local'+'Pos:\x20vec3f'+'\x20=\x20getLoca'+'lPosition('+'vertexPosi'+'tion);\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20outer\x20and'+'\x20inner\x20ver'+'tices\x20are\x20'+'at\x20the\x20sam'+'e\x20position'+',\x20scale\x20bo'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20local'+'PosXZ:\x20vec'+'2f\x20=\x20local'+'Pos.xz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20loca'+'lPosXZ\x20=\x20l'+'ocalPosXZ\x20'+'*\x20uniform.'+'outerScale'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20offset'+'\x20inner\x20ver'+'tices\x20insi'+'de\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20(origi'+'nal\x20vertic'+'es\x20must\x20be'+'\x20in\x20[-1;1]'+'\x20range)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'positiveUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(vertex'+'Position.x'+'z,\x20vec2f(0'+'.0),\x20vec2f'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(-verte'+'xPosition.'+'xz,\x20vec2f('+'0.0),\x20vec2'+'f(1.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20loc'+'alPosXZ\x20=\x20'+'localPosXZ'+'\x20+\x20(-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy\x20+'+'\x20negativeU'+'nitOffset\x20'+'*\x20uniform.'+'innerOffse'+'t.zw)\x20*\x20ve'+'rtex_texCo'+'ord0.xy;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'iledUvGlob'+'al\x20=\x20(loca'+'lPosXZ\x20-\x20u'+'niform.out'+'erScale\x20+\x20'+'uniform.in'+'nerOffset.'+'xy)\x20*\x20-0.5'+'\x20+\x201.0;\x20//'+'\x20uv\x20=\x20loca'+'l\x20pos\x20-\x20in'+('ner\x20corner'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPosXZ'+'\x20=\x20localPo'+'sXZ\x20*\x20-0.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20='+'\x20vec3f(loc'+'alPosXZ.x,'+'\x20localPosX'+'Z.y,\x20local'+'Pos.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20var\x20po'+'sW:\x20vec4f\x20'+'=\x20modelMat'+'rix\x20*\x20vec4'+'f(localPos'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREENSPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'posW\x20=\x20vec'+'4f(posW.xy'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20posW'+';\x0a}\x0a\x0afn\x20ge'+'tPosition('+')\x20->\x20vec4f'+'\x20{\x0a\x0a\x20\x20\x20\x20dM'+'odelMatrix'+'\x20=\x20getMode'+'lMatrix();'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'posW:\x20vec4'+'f\x20=\x20evalWo'+'rldPositio'+'n(vertex_p'+'osition.xy'+'z,\x20dModelM'+'atrix);\x0a\x20\x20'+'\x20\x20dPositio'+'nW\x20=\x20posW.'+'xyz;\x0a\x0a\x20\x20\x20\x20'+'var\x20screen'+'Pos:\x20vec4f'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20UV1LAYO'+'UT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20vec4f(v'+'ertex_texC'+'oord1.xy\x20*'+'\x202.0\x20-\x201.0'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20SCR'+'EENSPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20posW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20unif'+'orm.projec'+'tionFlipY;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos\x20=\x20u'+'niform.mat'+'rix_viewPr'+'ojection\x20*'+'\x20posW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20snap\x20ve'+'rtex\x20to\x20a\x20'+'pixel\x20boun'+'dary\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x200.'+'5)\x20+\x200.5;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20screenPo'+'s.xy\x20*=\x20un'+'iforms.uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'niforms.uS'+'creenSize.'+'zw;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x202.0'+')\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20scr'+'eenPos;\x0a}\x0a'+'\x0afn\x20getWor'+'ldPosition'+'()\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20dPosi'+'tionW;\x0a}\x0a'),lI='\x0a\x0a\x20\x20\x20\x20attr'+'ibute\x20vert'+'ex_positio'+'n:\x20vec4f;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'rix_model:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20morph_te'+'x_params:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20attri'+'bute\x20morph'+'_vertex_id'+':\x20u32;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etTextureM'+'orphCoords'+'()\x20->\x20vec2'+'i\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'turn\x20morph'+'_vertex_id'+'\x20into\x20int\x20'+'grid\x20coord'+'inates\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'Size:\x20vec2'+'i\x20=\x20vec2i('+'uniform.mo'+'rph_tex_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphGr'+'idV:\x20i32\x20='+'\x20i32(morph'+'_vertex_id'+')\x20/\x20textur'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20morph'+'GridU:\x20i32'+'\x20=\x20i32(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'rphGridV\x20='+'\x20textureSi'+'ze.y\x20-\x20mor'+'phGridV\x20-\x20'+'1;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec2i(mo'+'rphGridU,\x20'+'morphGridV'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_PO'+'SITION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20aabbSiz'+'e:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20aabbMi'+'n:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'morphPosit'+'ionTex:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'sitionTex:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+('if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sk'+'inBatchVS\x22'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fn\x20getMode'+'lMatrix()\x20'+'->\x20mat4x4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getBoneM'+'atrix(vert'+'ex_boneInd'+'ices);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(SKIN'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etModelMat'+'rix()\x20->\x20m'+'at4x4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20un'+'iform.matr'+'ix_model\x20*'+'\x20getSkinMa'+'trix(verte'+'x_boneIndi'+'ces,\x20verte'+'x_boneWeig'+'hts);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(INSTA'+'NCING)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22tran'+'sformInsta'+'ncingVS\x22\x0a\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'n\x20getModel'+'Matrix()\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_mode'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'fn\x20getLoca'+'lPosition('+'vertexPosi'+'tion:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20loc'+'alPos:\x20vec'+'3f\x20=\x20verte'+'xPosition;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphUV:'+'\x20vec2i\x20=\x20g'+'etTextureM'+'orphCoords'+'();\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MORPHI'+'NG_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Use\x20'+'textureLoa'+'d\x20instead\x20'+'of\x20texelFe'+'tch.\x20Coord'+'inates\x20mus'+'t\x20be\x20integ'+'er\x20type\x20(v'+'ec2i).\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20WGSL'+'\x20requires\x20'+'explicit\x20t'+'ype\x20conver'+'sion\x20for\x20v'+'ectors.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Div'+'ision\x20by\x20f'+'loat\x20liter')+('al\x20ensures'+'\x20floating\x20'+'point\x20divi'+'sion.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hPos:\x20vec3'+'f\x20=\x20vec3f('+'textureLoa'+'d(morphPos'+'itionTex,\x20'+'morphUV,\x200'+').xyz)\x20/\x206'+'5535.0\x20*\x20u'+'niform.aab'+'bSize\x20+\x20un'+'iform.aabb'+'Min;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Use\x20text'+'ureLoad\x20in'+'stead\x20of\x20t'+'exelFetch.'+'\x20Coordinat'+'es\x20must\x20be'+'\x20integer\x20t'+'ype\x20(vec2i'+').\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'s:\x20vec3f\x20='+'\x20textureLo'+'ad(morphPo'+'sitionTex,'+'\x20morphUV,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20+'+'=\x20morphPos'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20localP'+'os;\x0a\x20\x20\x20\x20}\x0a'),cI='\x0a\x0aattribut'+'e\x20instance'+'_line1:\x20ve'+'c4f;\x0aattri'+'bute\x20insta'+'nce_line2:'+'\x20vec4f;\x0aat'+'tribute\x20in'+'stance_lin'+'e3:\x20vec4f;'+'\x0aattribute'+'\x20instance_'+'line4:\x20vec'+'4f;\x0a\x0afn\x20ge'+'tModelMatr'+'ix()\x20->\x20ma'+'t4x4f\x20{\x0a\x20\x20'+'\x20\x20return\x20u'+'niform.mat'+'rix_model\x20'+'*\x20mat4x4f('+'instance_l'+'ine1,\x20inst'+'ance_line2'+',\x20instance'+'_line3,\x20in'+'stance_lin'+'e4);\x0a}\x0a',hI='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_refrac'+'tion:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getRefra'+'ction()\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction:\x20'+'f32\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20refractio'+'n\x20=\x20unifor'+'m.material'+'_refractio'+'n;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'REFRACTION'+'_TEXTURE\x0a\x20'+'\x20\x20\x20refract'+'ion\x20=\x20refr'+'action\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_REFRACTI'+'ON_TEXTURE'+'_NAME},\x20{S'+'TD_REFRACT'+'ION_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_REFRACTIO'+'N_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_REFRACTIO'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_VE'+'RTEX\x0a\x20\x20\x20\x20r'+'efraction\x20'+'=\x20refracti'+'on\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_REFRACTI'+'ON_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dTr'+'ansmission'+'\x20=\x20refract'+'ion;\x0a}\x0a',dI='\x0auniform\x20t'+'woSidedLig'+'htingNegSc'+'aleFactor:'+'\x20f32;\x0a\x0afn\x20'+'handleTwoS'+'idedLighti'+'ng()\x20{\x0a\x20\x20\x20'+'\x20dTBN[2]\x20='+'\x20dTBN[2]\x20*'+'\x20select(-u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20p'+'cFrontFaci'+'ng);\x0a}\x0a',fI='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20fn\x20getU'+'v0()\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20uv'+'\x20=\x20vertex_'+'position.x'+'z;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20offse'+'t\x20inner\x20ve'+'rtices\x20ins'+'ide\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2f(0'+'.0,\x200.0),\x20'+'vec2f(1.0,'+'\x201.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset\x20='+'\x20clamp(-ve'+'rtex_posit'+'ion.xz,\x20ve'+'c2f(0.0,\x200'+'.0),\x20vec2f'+'(1.0,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uv\x20=\x20uv\x20'+'+\x20((-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy)\x20'+'+\x20(negativ'+'eUnitOffse'+'t\x20*\x20unifor'+'m.innerOff'+'set.zw))\x20*'+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uv\x20=\x20uv\x20*'+'\x20-0.5\x20+\x20ve'+'c2f(0.5,\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20uniform'+'.atlasRect'+'.zw\x20+\x20unif'+'orm.atlasR'+'ect.xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dMa'+'skGlobal\x20='+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20uv'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20fn'+'\x20getUv0()\x20'+'->\x20vec2f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a',uI='\x0afn\x20getUv1'+'()\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20verte'+'x_texCoord'+'1;\x0a}\x0a',pI='\x0aoutput.vU'+'V{TRANSFOR'+'M_UV_{i}}_'+'{TRANSFORM'+'_ID_{i}}\x20='+'\x20vec2f(\x0a\x20\x20'+'\x20\x20dot(vec3'+'f(uv{TRANS'+'FORM_UV_{i'+'}},\x201),\x20un'+'iform.{TRA'+'NSFORM_NAM'+'E_{i}}0),\x0a'+'\x20\x20\x20\x20dot(ve'+'c3f(uv{TRA'+'NSFORM_UV_'+'{i}},\x201),\x20'+'uniform.{T'+'RANSFORM_N'+'AME_{i}}1)'+'\x0a);\x0a',mI='\x0a\x20\x20\x20\x20unifo'+'rm\x20{TRANSF'+'ORM_NAME_{'+'i}}0:\x20vec3'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20{TRAN'+'SFORM_NAME'+'_{i}}1:\x20ve'+'c3f;\x0a',_I='\x0afn\x20getVie'+'wDir()\x20{\x0a\x20'+'\x20\x20\x20dViewDi'+'rW\x20=\x20norma'+'lize(unifo'+'rm.view_po'+'sition\x20-\x20v'+'PositionW)'+';\x0a}\x0a',gI={'alphaTestPS':_2,'ambientPS':g2,'anisotropyPS':S2,'aoPS':y2,'aoDiffuseOccPS':v2,'aoSpecOccPS':x2,'bakeDirLmEndPS':T2,'bakeLmEndPS':w2,'basePS':E2,'baseNineSlicedPS':b2,'baseNineSlicedTiledPS':A2,'bayerPS':C2,'blurVSMPS':P2,'clearCoatPS':M2,'clearCoatGlossPS':D2,'clearCoatNormalPS':I2,'clusteredLightCookiesPS':R2,'clusteredLightShadowsPS':O2,'clusteredLightUtilsPS':L2,'clusteredLightPS':F2,'combinePS':N2,'cookieBlit2DPS':k2,'cookieBlitCubePS':U2,'cookieBlitVS':B2,'cubeMapProjectPS':z2,'cubeMapRotatePS':V2,'debugOutputPS':G2,'debugProcessFrontendPS':H2,'detailModesPS':$2,'diffusePS':X2,'decodePS':W2,'emissivePS':q2,'encodePS':j2,'endPS':Y2,'envAtlasPS':K2,'envProcPS':Z2,'falloffInvSquaredPS':Q2,'falloffLinearPS':J2,'floatAsUintPS':eM,'fogPS':tM,'fresnelSchlickPS':sM,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':iM,'gammaPS':rM,'glossPS':aM,'gsplatCenterVS':nM,'gsplatCornerVS':_M,'gsplatColorVS':oM,'gsplatCommonVS':lM,'gsplatCompressedDataVS':cM,'gsplatCompressedSHVS':hM,'gsplatEvalSHVS':dM,'gsplatQuatToMat3VS':fM,'gsplatSogsColorVS':uM,'gsplatSogsDataVS':pM,'gsplatSogsSHVS':mM,'gsplatDataVS':gM,'gsplatOutputVS':SM,'gsplatPS':yM,'gsplatSHVS':vM,'gsplatSourceVS':xM,'gsplatVS':TM,'quadVS':wM,'indirectCoreCS':EM,'immediateLinePS':bM,'immediateLineVS':AM,'iridescenceDiffractionPS':CM,'iridescencePS':PM,'iridescenceThicknessPS':MM,'iorPS':DM,'lightDeclarationPS':IM,'lightDiffuseLambertPS':LM,'lightDirPointPS':RM,'lightEvaluationPS':OM,'lightFunctionLightPS':FM,'lightFunctionShadowPS':NM,'lightingPS':kM,'lightmapAddPS':UM,'lightmapPS':BM,'lightSpecularAnisoGGXPS':zM,'lightSpecularBlinnPS':VM,'lightSheenPS':GM,'linearizeDepthPS':HM,'litForwardBackendPS':WM,'litForwardDeclarationPS':$M,'litForwardMainPS':XM,'litForwardPostCodePS':qM,'litForwardPreCodePS':jM,'litMainPS':YM,'litMainVS':KM,'litOtherMainPS':ZM,'litShaderArgsPS':QM,'litShaderCorePS':JM,'litShadowMainPS':eD,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':tD,'metalnessPS':sD,'metalnessModulatePS':rD,'morphPS':aD,'morphVS':nD,'msdfPS':iD,'msdfVS':oD,'normalVS':lD,'normalCoreVS':cD,'normalMapPS':hD,'opacityPS':dD,'opacityDitherPS':fD,'outputPS':uD,'outputAlphaPS':pD,'outputTex2DPS':mD,'sheenPS':_D,'sheenGlossPS':gD,'parallaxPS':SD,'pickPS':yD,'reflDirPS':vD,'reflDirAnisoPS':xD,'reflectionCCPS':TD,'reflectionCubePS':wD,'reflectionEnvHQPS':ED,'reflectionEnvPS':bD,'reflectionSpherePS':AD,'reflectionSheenPS':CD,'refractionCubePS':PD,'refractionDynamicPS':MD,'reprojectPS':DD,'reprojectVS':ID,'screenDepthPS':LD,'shadowCascadesPS':RD,'shadowEVSMPS':OD,'shadowPCF1PS':FD,'shadowPCF3PS':ND,'shadowPCF5PS':kD,'shadowSoftPS':UD,'skinBatchVS':BD,'skinVS':zD,'skyboxPS':VD,'skyboxVS':GD,'specularPS':HD,'sphericalPS':WD,'specularityFactorPS':$D,'spotPS':XD,'startNineSlicedPS':qD,'startNineSlicedTiledPS':jD,'stdDeclarationPS':YD,'stdFrontEndPS':KD,'TBNPS':ZD,'thicknessPS':QD,'tonemappingPS':JD,'tonemappingAcesPS':eI,'tonemappingAces2PS':tI,'tonemappingFilmicPS':sI,'tonemappingHejlPS':iI,'tonemappingLinearPS':rI,'tonemappingNeutralPS':aI,'tonemappingNonePS':nI,'transformVS':oI,'transformCoreVS':lI,'transformInstancingVS':cI,'transmissionPS':hI,'twoSidedLightingPS':dI,'uv0VS':fI,'uv1VS':uI,'uvTransformVS':pI,'uvTransformUniformsPS':mI,'viewDirPS':_I,'webgpuPS':cy,'webgpuVS':hy},Kr=class Kr extends me{constructor(_0x5d5096){super(),h(this,'_batcher',null),h(this,'_destroyRe'+'quested',!(-0xc29+0x4c*-0x37+0x1c7e)),h(this,'_inFrameUp'+'date',!(-0x5*-0x30b+0x1*-0x562+-0x9d4)),h(this,'_libraries'+'Loaded',!(-0x6*-0x3b5+-0x25e7+0x5*0x322)),h(this,'_fillMode',q_),h(this,'_resolutio'+'nMode',qA),h(this,'_allowResi'+'ze',!(-0x2e0+-0x231a+0x25fa)),h(this,'_skyboxAss'+'et',null),h(this,'_soundMana'+'ger'),h(this,'_visibilit'+'yChangeHan'+'dler'),h(this,'_entityInd'+'ex',{}),h(this,'_inTools',!(0x1*-0x20a1+0x8f*-0x43+-0x11*-0x41f)),h(this,'_scriptPre'+'fix',''),h(this,'_time',0x2fa*-0x9+0x1464+-0x222*-0x3),h(this,'enableBund'+'les',typeof TextDecoder<'u'),h(this,'frameReque'+'stId'),h(this,'timeScale',0x776*-0x5+-0x2*-0x409+0x1d3d),h(this,'maxDeltaTi'+'me',0x86*0x25+-0xc68+-0x51*0x16+0.1),h(this,'frame',0x359*-0xb+-0x7a4+0x2c77),h(this,'frameGraph',new jA()),h(this,'renderer'),h(this,'scriptsOrd'+'er',[]),h(this,'stats'),h(this,'autoRender',!(-0x1*0x7eb+-0x1190+0x197b)),h(this,'renderNext'+'Frame',!(-0x2361+0x1cc3+0xf*0x71)),h(this,'graphicsDe'+'vice'),h(this,'root'),h(this,'scene'),h(this,'lightmappe'+'r',null),h(this,'loader',new vn(this)),h(this,'assets'),h(this,'bundles'),h(this,'scenes',new dC(this)),h(this,'scripts',new oC(this)),h(this,'systems',new iC()),h(this,'i18n',new Sa(this)),h(this,'keyboard',null),h(this,'mouse',null),h(this,'touch',null),h(this,'gamepads',null),h(this,'elementInp'+'ut',null),h(this,'xr',null),((sn==null?void(-0x5d*-0x3e+-0x1c12+0x58c):sn['indexOf']('$'))<-0x2*-0xa4d+0x23*0x8b+-0x279b*0x1&&w['log']('Powered\x20by'+'\x20PlayCanva'+'s\x20'+sn+'\x20'+cS),Kr['_applicati'+'ons'][_0x5d5096['id']]=this,Wf(this),this['root']=new lt(),this['root']['_enabledIn'+'Hierarchy']=!(0x1506+-0xb28+-0x9de*0x1));}['init'](_0x460cf5){const {assetPrefix:_0x56ced6,batchManager:_0x2fd3cd,componentSystems:_0x586770,elementInput:_0x12b375,gamepads:_0xdb7cbf,graphicsDevice:_0x175da5,keyboard:_0x1a2683,lightmapper:_0x171e56,mouse:_0x252708,resourceHandlers:_0x170849,scriptsOrder:_0x376d70,scriptPrefix:_0x23102c,soundManager:_0x249bea,touch:_0x3a5407,xr:_0x4dbe77}=_0x460cf5;w['assert'](_0x175da5,'The\x20applic'+'ation\x20cann'+'ot\x20be\x20crea'+'ted\x20withou'+'t\x20a\x20valid\x20'+'GraphicsDe'+'vice'),this['graphicsDe'+'vice']=_0x175da5,Ce['get'](_0x175da5,Fe)['add'](m2),Ce['get'](_0x175da5,it)['add'](gI),this['_initDefau'+'ltMaterial'](),this['_initProgr'+'amLibrary'](),this['stats']=new fC(_0x175da5),this['_soundMana'+'ger']=_0x249bea,this['scene']=new Et(_0x175da5),this['_registerS'+'ceneImmedi'+'ate'](this['scene']),this['assets']=new ln(this['loader']),_0x56ced6&&(this['assets']['prefix']=_0x56ced6),this['bundles']=new sC(this['assets']),this['scriptsOrd'+'er']=_0x376d70||[],this['defaultLay'+'erWorld']=new Ot({'name':'World','id':Ji}),this['defaultLay'+'erDepth']=new Ot({'name':'Depth','id':ps,'enabled':!(0x6*-0x2f5+-0x2459+0x3618),'opaqueSortMode':Cc}),this['defaultLay'+'erSkybox']=new Ot({'name':'Skybox','id':wp,'opaqueSortMode':Cc}),this['defaultLay'+'erUi']=new Ot({'name':'UI','id':Sl,'transparentSortMode':fw}),this['defaultLay'+'erImmediat'+'e']=new Ot({'name':'Immediate','id':Ep,'opaqueSortMode':Cc});const _0x5b689b=new Bf('default');_0x5b689b['pushOpaque'](this['defaultLay'+'erWorld']),_0x5b689b['pushOpaque'](this['defaultLay'+'erDepth']),_0x5b689b['pushOpaque'](this['defaultLay'+'erSkybox']),_0x5b689b['pushTransp'+'arent'](this['defaultLay'+'erWorld']),_0x5b689b['pushOpaque'](this['defaultLay'+'erImmediat'+'e']),_0x5b689b['pushTransp'+'arent'](this['defaultLay'+'erImmediat'+'e']),_0x5b689b['pushTransp'+'arent'](this['defaultLay'+'erUi']),this['scene']['layers']=_0x5b689b,Qr['createPlac'+'eholder'](_0x175da5),this['renderer']=new Jo(_0x175da5),this['renderer']['scene']=this['scene'],_0x171e56&&(this['lightmappe'+'r']=new _0x171e56(_0x175da5,this['root'],this['scene'],this['renderer'],this['assets']),this['once']('prerender',this['_firstBake'],this)),_0x2fd3cd&&(this['_batcher']=new _0x2fd3cd(_0x175da5,this['root'],this['scene']),this['once']('prerender',this['_firstBatc'+'h'],this)),this['keyboard']=_0x1a2683||null,this['mouse']=_0x252708||null,this['touch']=_0x3a5407||null,this['gamepads']=_0xdb7cbf||null,_0x12b375&&(this['elementInp'+'ut']=_0x12b375,this['elementInp'+'ut']['app']=this),this['xr']=_0x4dbe77?new _0x4dbe77(this):null,this['elementInp'+'ut']&&this['elementInp'+'ut']['attachSele'+'ctEvents'](),this['_scriptPre'+'fix']=_0x23102c||'',this['enableBund'+'les']&&this['loader']['addHandler']('bundle',new aC(this)),_0x170849['forEach'](_0x4e8462=>{const _0x331c73=new _0x4e8462(this);this['loader']['addHandler'](_0x331c73['handlerTyp'+'e'],_0x331c73);}),_0x586770['forEach'](_0x91d13=>{this['systems']['add'](new _0x91d13(this));}),this['_visibilit'+'yChangeHan'+'dler']=this['onVisibili'+'tyChange']['bind'](this),typeof document<'u'&&(document['hidden']!==void(0x203*0x2+-0x23b0+0x1faa)?(this['_hiddenAtt'+'r']='hidden',document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(0x1f6d+-0x1ad3+-0x499*0x1))):document['mozHidden']!==void(0x1fc6+0x435*0x5+-0x34cf)?(this['_hiddenAtt'+'r']='mozHidden',document['addEventLi'+'stener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x7f3+-0x42*0x61+0x1110))):document['msHidden']!==void(-0x1c48+-0x1bf1+0x3839)?(this['_hiddenAtt'+'r']='msHidden',document['addEventLi'+'stener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x1e45+-0x19c*-0x2+-0x217c))):document['webkitHidd'+'en']!==void(0x25f*-0x2+-0xa2c+0xeea)&&(this['_hiddenAtt'+'r']='webkitHidd'+'en',document['addEventLi'+'stener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(0xea4*-0x1+-0x12bb+-0xc*-0x2c8)))),this['tick']=SI(this);}static['getApplica'+'tion'](_0x1f3537){return _0x1f3537?Kr['_applicati'+'ons'][_0x1f3537]:Ys();}['_initDefau'+'ltMaterial'](){const _0x4e84f6=new Ut();_0x4e84f6['name']='Default\x20Ma'+'terial',Bw(this['graphicsDe'+'vice'],_0x4e84f6);}['_initProgr'+'amLibrary'](){const _0x1fd7f5=new dA(this['graphicsDe'+'vice'],new Ut());Cw(this['graphicsDe'+'vice'],_0x1fd7f5);}get['soundManag'+'er'](){return this['_soundMana'+'ger'];}get['batcher'](){return w['assert'](this['_batcher'],'BatchManag'+'er\x20has\x20not'+'\x20been\x20crea'+'ted\x20and\x20is'+'\x20required\x20'+'for\x20correc'+'t\x20function'+'ality.'),this['_batcher'];}get['fillMode'](){return this['_fillMode'];}get['resolution'+'Mode'](){return this['_resolutio'+'nMode'];}['configure'](_0x13bd5b,_0xaf476b){ot['get'](_0x13bd5b,(_0x4dd6eb,_0x2096da)=>{if(_0x4dd6eb){_0xaf476b(_0x4dd6eb);return;}const _0x1314a3=_0x2096da['applicatio'+'n_properti'+'es'],_0x529c39=_0x2096da['scenes'],_0x2f05d9=_0x2096da['assets'];this['_parseAppl'+'icationPro'+'perties'](_0x1314a3,_0x5c7002=>{this['_parseScen'+'es'](_0x529c39),this['_parseAsse'+'ts'](_0x2f05d9),_0xaf476b(_0x5c7002||null);});});}['preload'](_0x285e97){this['fire']('preload:st'+'art');const _0x1fbec7=this['assets']['list']({'preload':!(0x1*0x25d9+-0x1*-0x17d+-0x2756)});if(_0x1fbec7['length']===-0xb*-0x137+-0x1c1f+0xec2){this['fire']('preload:en'+'d'),_0x285e97();return;}let _0x1d1932=-0x2627+0x3a7+-0x8a0*-0x4;const _0xcc86d2=()=>{_0x1d1932++,this['fire']('preload:pr'+'ogress',_0x1d1932/_0x1fbec7['length']),_0x1d1932===_0x1fbec7['length']&&(this['fire']('preload:en'+'d'),_0x285e97());};_0x1fbec7['forEach'](_0xd3ae01=>{_0xd3ae01['loaded']?_0xcc86d2():(_0xd3ae01['once']('load',_0xcc86d2),_0xd3ae01['once']('error',_0xcc86d2),this['assets']['load'](_0xd3ae01));});}['_preloadSc'+'ripts'](_0x14a5a7,_0x37bbc2){_0x37bbc2();}['_parseAppl'+'icationPro'+'perties'](_0x2b89ef,_0x2b8a55){if(typeof _0x2b89ef['maxAssetRe'+'tries']=='number'&&_0x2b89ef['maxAssetRe'+'tries']>-0x1033+0x9c*0x2c+-0xa9d&&this['loader']['enableRetr'+'y'](_0x2b89ef['maxAssetRe'+'tries']),_0x2b89ef['useDeviceP'+'ixelRatio']||(_0x2b89ef['useDeviceP'+'ixelRatio']=_0x2b89ef['use_device'+'_pixel_rat'+'io']),_0x2b89ef['resolution'+'Mode']||(_0x2b89ef['resolution'+'Mode']=_0x2b89ef['resolution'+'_mode']),_0x2b89ef['fillMode']||(_0x2b89ef['fillMode']=_0x2b89ef['fill_mode']),this['_width']=_0x2b89ef['width'],this['_height']=_0x2b89ef['height'],_0x2b89ef['useDeviceP'+'ixelRatio']&&(this['graphicsDe'+'vice']['maxPixelRa'+'tio']=window['devicePixe'+'lRatio']),this['setCanvasR'+'esolution'](_0x2b89ef['resolution'+'Mode'],this['_width'],this['_height']),this['setCanvasF'+'illMode'](_0x2b89ef['fillMode'],this['_width'],this['_height']),_0x2b89ef['layers']&&_0x2b89ef['layerOrder']){const _0x3f1f8f=new Bf('applicatio'+'n'),_0x63c272={};for(const _0x1bfd1b in _0x2b89ef['layers']){const _0x5398d5=_0x2b89ef['layers'][_0x1bfd1b];_0x5398d5['id']=parseInt(_0x1bfd1b,0x18f6+0x2*0x7e+-0x19e8),_0x5398d5['enabled']=_0x5398d5['id']!==ps,_0x63c272[_0x1bfd1b]=new Ot(_0x5398d5);}for(let _0x370417=-0x583+0xd1*-0x1+0x654,_0x29d441=_0x2b89ef['layerOrder']['length'];_0x370417<_0x29d441;_0x370417++){const _0x52f1db=_0x2b89ef['layerOrder'][_0x370417],_0x141471=_0x63c272[_0x52f1db['layer']];_0x141471&&(_0x52f1db['transparen'+'t']?_0x3f1f8f['pushTransp'+'arent'](_0x141471):_0x3f1f8f['pushOpaque'](_0x141471),_0x3f1f8f['subLayerEn'+'abled'][_0x370417]=_0x52f1db['enabled']);}this['scene']['layers']=_0x3f1f8f;}if(_0x2b89ef['batchGroup'+'s']){const _0xf18d53=this['batcher'];if(_0xf18d53)for(let _0xb699ba=0xf48+0xaa3+-0x1*0x19eb,_0x3a9643=_0x2b89ef['batchGroup'+'s']['length'];_0xb699ba<_0x3a9643;_0xb699ba++){const _0x5b8401=_0x2b89ef['batchGroup'+'s'][_0xb699ba];_0xf18d53['addGroup'](_0x5b8401['name'],_0x5b8401['dynamic'],_0x5b8401['maxAabbSiz'+'e'],_0x5b8401['id'],_0x5b8401['layers']);}}_0x2b89ef['i18nAssets']&&(this['i18n']['assets']=_0x2b89ef['i18nAssets']),this['_loadLibra'+'ries'](_0x2b89ef['libraries'],_0x2b8a55);}['_loadLibra'+'ries'](_0x122e18,_0x3c88db){const _0x2e375c=_0x122e18['length'];let _0x1d796a=_0x2e375c;const _0x521707=/^https?:\/\//;if(_0x2e375c){const _0x5bff53=(_0x29c126,_0x58a5d7)=>{_0x1d796a--,_0x29c126?_0x3c88db(_0x29c126):_0x1d796a===0x14ee+-0x196a+0x47c&&(this['onLibrarie'+'sLoaded'](),_0x3c88db(null));};for(let _0x1033c0=0xcf2+-0x1975+-0x1*-0xc83;_0x1033c0<_0x2e375c;++_0x1033c0){let _0x560553=_0x122e18[_0x1033c0];!_0x521707['test'](_0x560553['toLowerCas'+'e']())&&this['_scriptPre'+'fix']&&(_0x560553=xe['join'](this['_scriptPre'+'fix'],_0x560553)),this['loader']['load'](_0x560553,'script',_0x5bff53);}}else this['onLibrarie'+'sLoaded'](),_0x3c88db(null);}['_parseScen'+'es'](_0xa75886){if(_0xa75886){for(let _0x56e1b1=0x683+0x3*0x453+0x4df*-0x4;_0x56e1b1<_0xa75886['length'];_0x56e1b1++)this['scenes']['add'](_0xa75886[_0x56e1b1]['name'],_0xa75886[_0x56e1b1]['url']);}}['_parseAsse'+'ts'](_0x57681c){const _0x266b81=[],_0x2b973a={},_0x22219c={};for(let _0x34812f=0x1032+-0x1235+0x203;_0x34812f<this['scriptsOrd'+'er']['length'];_0x34812f++){const _0x1c7c2e=this['scriptsOrd'+'er'][_0x34812f];_0x57681c[_0x1c7c2e]&&(_0x2b973a[_0x1c7c2e]=!(-0x4d1+-0x2120+-0x1*-0x25f1),_0x266b81['push'](_0x57681c[_0x1c7c2e]));}if(this['enableBund'+'les']){for(const _0x447e99 in _0x57681c)_0x57681c[_0x447e99]['type']==='bundle'&&(_0x22219c[_0x447e99]=!(0x1*-0xf2e+0x1*-0x1ae4+0x5*0x86a),_0x266b81['push'](_0x57681c[_0x447e99]));}for(const _0x526aa3 in _0x57681c)_0x2b973a[_0x526aa3]||_0x22219c[_0x526aa3]||_0x266b81['push'](_0x57681c[_0x526aa3]);for(let _0x26e9b9=-0x1b3+-0x29*-0x92+-0x15af;_0x26e9b9<_0x266b81['length'];_0x26e9b9++){const _0x5050fe=_0x266b81[_0x26e9b9],_0x4a63a0=new pe(_0x5050fe['name'],_0x5050fe['type'],_0x5050fe['file'],_0x5050fe['data']);if(_0x4a63a0['id']=parseInt(_0x5050fe['id'],-0x18aa+0xc8*0x24+0x3*-0x124),_0x4a63a0['preload']=_0x5050fe['preload']?_0x5050fe['preload']:!(0x7a4*0x3+-0x22c9+0xe*0xd9),_0x4a63a0['loaded']=_0x5050fe['type']==='script'&&_0x5050fe['data']&&_0x5050fe['data']['loadingTyp'+'e']>0x1b8d+0x2588+0x4115*-0x1,_0x4a63a0['tags']['add'](_0x5050fe['tags']),_0x5050fe['i18n']){for(const _0x3aa5bb in _0x5050fe['i18n'])_0x4a63a0['addLocaliz'+'edAssetId'](_0x3aa5bb,_0x5050fe['i18n'][_0x3aa5bb]);}this['assets']['add'](_0x4a63a0);}}['start'](){w['call'](()=>{w['assert'](!this['_alreadySt'+'arted'],'The\x20applic'+'ation\x20can\x20'+'be\x20started'+'\x20only\x20one\x20'+'time.'),this['_alreadySt'+'arted']=!(0x25d9+0x1b8a+-0x1*0x4163);}),this['frame']=-0xeb7*-0x1+-0x6e*-0x11+0x3*-0x757,this['fire']('start',{'timestamp':de(),'target':this}),this['_libraries'+'Loaded']||this['onLibrarie'+'sLoaded'](),this['systems']['fire']('initialize',this['root']),this['fire']('initialize'),this['systems']['fire']('postInitia'+'lize',this['root']),this['systems']['fire']('postPostIn'+'itialize',this['root']),this['fire']('postinitia'+'lize'),this['tick']();}['inputUpdat'+'e'](_0x4517c9){this['controller']&&this['controller']['update'](_0x4517c9),this['mouse']&&this['mouse']['update'](),this['keyboard']&&this['keyboard']['update'](),this['gamepads']&&this['gamepads']['update']();}['update'](_0x2da759){this['frame']++,this['graphicsDe'+'vice']['update'](),this['stats']['frame']['updateStar'+'t']=de(),this['systems']['fire'](this['_inTools']?'toolsUpdat'+'e':'update',_0x2da759),this['systems']['fire']('animationU'+'pdate',_0x2da759),this['systems']['fire']('postUpdate',_0x2da759),this['fire']('update',_0x2da759),this['inputUpdat'+'e'](_0x2da759),this['stats']['frame']['updateTime']=de()-this['stats']['frame']['updateStar'+'t'];}['render'](){this['updateCanv'+'asSize'](),this['graphicsDe'+'vice']['frameStart'](),this['stats']['frame']['renderStar'+'t']=de(),this['fire']('prerender'),this['root']['syncHierar'+'chy'](),this['_batcher']&&this['_batcher']['updateAll'](),Jo['_skipRende'+'rCounter']=-0x17d2*0x1+0xf65+0x86d,this['renderComp'+'osition'](this['scene']['layers']),this['fire']('postrender'),this['stats']['frame']['renderTime']=de()-this['stats']['frame']['renderStar'+'t'],this['graphicsDe'+'vice']['frameEnd']();}['renderComp'+'osition'](_0x515452){Q['clearGpuMa'+'rkers'](),this['renderer']['update'](_0x515452),this['renderer']['buildFrame'+'Graph'](this['frameGraph'],_0x515452),this['frameGraph']['render'](this['graphicsDe'+'vice']);}['_fillFrame'+'StatsBasic'](_0x5efcba,_0x108911,_0x40f816){const _0x1c8bb6=this['stats']['frame'];_0x1c8bb6['dt']=_0x108911,_0x1c8bb6['ms']=_0x40f816,_0x5efcba>_0x1c8bb6['_timeToCou'+'ntFrames']?(_0x1c8bb6['fps']=_0x1c8bb6['_fpsAccum'],_0x1c8bb6['_fpsAccum']=-0xe*-0x26f+0x1f0d*-0x1+0x1*-0x305,_0x1c8bb6['_timeToCou'+'ntFrames']=_0x5efcba+(0x83*0x3f+0x7ae+-0x3*0xc01)):_0x1c8bb6['_fpsAccum']++,this['stats']['drawCalls']['total']=this['graphicsDe'+'vice']['_drawCalls'+'PerFrame'],this['graphicsDe'+'vice']['_drawCalls'+'PerFrame']=0x268+-0x231b+-0xb*-0x2f9;}['_fillFrame'+'Stats'](){let _0x38bba1=this['stats']['frame'];_0x38bba1['cameras']=this['renderer']['_camerasRe'+'ndered'],_0x38bba1['materials']=this['renderer']['_materialS'+'witches'],_0x38bba1['shaders']=this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame'],_0x38bba1['shadowMapU'+'pdates']=this['renderer']['_shadowMap'+'Updates'],_0x38bba1['shadowMapT'+'ime']=this['renderer']['_shadowMap'+'Time'],_0x38bba1['depthMapTi'+'me']=this['renderer']['_depthMapT'+'ime'],_0x38bba1['forwardTim'+'e']=this['renderer']['_forwardTi'+'me'];const _0x56f7ab=this['graphicsDe'+'vice']['_primsPerF'+'rame'];_0x38bba1['triangles']=_0x56f7ab[qs]/(-0x260c+-0x35*-0x43+0x1830)+Math['max'](_0x56f7ab[vr]-(0x162a*0x1+0x1ed*0x1+-0x1815),0x184d+-0x1ee7*0x1+0x69a)+Math['max'](_0x56f7ab[sa]-(0x1fbb+-0x77c+-0x183d),-0xb84+0x1*-0x129e+0x1e22),_0x38bba1['cullTime']=this['renderer']['_cullTime'],_0x38bba1['sortTime']=this['renderer']['_sortTime'],_0x38bba1['skinTime']=this['renderer']['_skinTime'],_0x38bba1['morphTime']=this['renderer']['_morphTime'],_0x38bba1['lightClust'+'ers']=this['renderer']['_lightClus'+'ters'],_0x38bba1['lightClust'+'ersTime']=this['renderer']['_lightClus'+'tersTime'],_0x38bba1['otherPrimi'+'tives']=0x13d2*0x1+-0x6c5+-0xd0d;for(let _0xf9e2ff=-0xd0*-0x9+0x1d56+-0x24a6;_0xf9e2ff<_0x56f7ab['length'];_0xf9e2ff++)_0xf9e2ff<qs&&(_0x38bba1['otherPrimi'+'tives']+=_0x56f7ab[_0xf9e2ff]),_0x56f7ab[_0xf9e2ff]=0x2*-0xa78+-0x67*-0x1f+0xb*0xc5;this['renderer']['_camerasRe'+'ndered']=-0x2e*-0xd+0x59*0x56+-0x203c*0x1,this['renderer']['_materialS'+'witches']=0x23d*0x9+-0xb5e+-0x3*0x2ed,this['renderer']['_shadowMap'+'Updates']=0x4*-0x254+0x1c97+-0x1347,this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame']=-0x33*0x66+-0x1863*0x1+0x2cb5,this['renderer']['_cullTime']=0x208c+0x25e4+0x38*-0x142,this['renderer']['_layerComp'+'ositionUpd'+'ateTime']=0x1fb+0x2*-0x27+-0x1ad,this['renderer']['_lightClus'+'tersTime']=0x1ce4+-0x161*0xe+-0x996,this['renderer']['_sortTime']=-0x335+0x16*-0x13+0x4d7,this['renderer']['_skinTime']=0x4dc+-0x24f1+0x2015,this['renderer']['_morphTime']=-0x25aa*-0x1+-0x25d2+0x28,this['renderer']['_shadowMap'+'Time']=0x1575+0x3*0x6be+-0x29af,this['renderer']['_depthMapT'+'ime']=-0x967+-0x2206+0x2b6d*0x1,this['renderer']['_forwardTi'+'me']=0x9de+0x23cf+-0xb*0x427,_0x38bba1=this['stats']['drawCalls'],_0x38bba1['forward']=this['renderer']['_forwardDr'+'awCalls'],_0x38bba1['culled']=this['renderer']['_numDrawCa'+'llsCulled'],_0x38bba1['depth']=0x1a6*0x6+0x21e6+-0x15e5*0x2,_0x38bba1['shadow']=this['renderer']['_shadowDra'+'wCalls'],_0x38bba1['skinned']=this['renderer']['_skinDrawC'+'alls'],_0x38bba1['immediate']=-0x1*0x2417+0x2553+-0x13c*0x1,_0x38bba1['instanced']=-0xd82+-0xc99+-0x1*-0x1a1b,_0x38bba1['removedByI'+'nstancing']=-0x16f0+-0x578+0x1c68,_0x38bba1['misc']=_0x38bba1['total']-(_0x38bba1['forward']+_0x38bba1['shadow']),this['renderer']['_depthDraw'+'Calls']=-0x1c9a+0x13e3+0x8b7,this['renderer']['_shadowDra'+'wCalls']=0xd94*-0x1+-0x1*-0x190e+-0xb7a,this['renderer']['_forwardDr'+'awCalls']=-0x1fee+0x6ec*-0x3+0xbe*0x47,this['renderer']['_numDrawCa'+'llsCulled']=0x2440+0xa45+0x1*-0x2e85,this['renderer']['_skinDrawC'+'alls']=-0x16c*-0x10+0x99a*-0x1+0x63*-0x22,this['renderer']['_immediate'+'Rendered']=0x3e*-0x12+0x2077*0x1+-0x5*0x59f,this['renderer']['_instanced'+'DrawCalls']=-0x19bc+0x18*0x12e+-0x37*0xc,this['stats']['misc']['renderTarg'+'etCreation'+'Time']=this['graphicsDe'+'vice']['renderTarg'+'etCreation'+'Time'],_0x38bba1=this['stats']['particles'],_0x38bba1['updatesPer'+'Frame']=_0x38bba1['_updatesPe'+'rFrame'],_0x38bba1['frameTime']=_0x38bba1['_frameTime'],_0x38bba1['_updatesPe'+'rFrame']=0x6*-0x3cd+-0xfa0+-0x1337*-0x2,_0x38bba1['_frameTime']=-0x269b+0x3*0x78d+0xff4;}['setCanvasF'+'illMode'](_0x1c8e54,_0x11a52b,_0x85cbad){this['_fillMode']=_0x1c8e54,this['resizeCanv'+'as'](_0x11a52b,_0x85cbad);}['setCanvasR'+'esolution'](_0x2641ec,_0x4ed0f5,_0x1e8460){this['_resolutio'+'nMode']=_0x2641ec,_0x2641ec===j_&&_0x4ed0f5===void(-0x49*-0x9+-0xcb6+0x7*0x173)&&(_0x4ed0f5=this['graphicsDe'+'vice']['canvas']['clientWidt'+'h'],_0x1e8460=this['graphicsDe'+'vice']['canvas']['clientHeig'+'ht']),this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x4ed0f5,_0x1e8460);}['isHidden'](){return document[this['_hiddenAtt'+'r']];}['onVisibili'+'tyChange'](){this['isHidden']()?this['_soundMana'+'ger']&&this['_soundMana'+'ger']['suspend']():this['_soundMana'+'ger']&&this['_soundMana'+'ger']['resume']();}['resizeCanv'+'as'](_0x1af540,_0x541251){if(!this['_allowResi'+'ze']||this['xr']&&this['xr']['session'])return;const _0x9f44b0=window['innerWidth'],_0x4135df=window['innerHeigh'+'t'];if(this['_fillMode']===q_){const _0x41b0e5=this['graphicsDe'+'vice']['canvas']['width']/this['graphicsDe'+'vice']['canvas']['height'],_0x56dbe2=_0x9f44b0/_0x4135df;_0x41b0e5>_0x56dbe2?(_0x1af540=_0x9f44b0,_0x541251=_0x1af540/_0x41b0e5):(_0x541251=_0x4135df,_0x1af540=_0x541251*_0x41b0e5);}else this['_fillMode']===XA&&(_0x1af540=_0x9f44b0,_0x541251=_0x4135df);return this['graphicsDe'+'vice']['canvas']['style']['width']=_0x1af540+'px',this['graphicsDe'+'vice']['canvas']['style']['height']=_0x541251+'px',this['updateCanv'+'asSize'](),{'width':_0x1af540,'height':_0x541251};}['updateCanv'+'asSize'](){var _0x3fdd35;if(!(!this['_allowResi'+'ze']||(_0x3fdd35=this['xr'])!=null&&_0x3fdd35['active'])&&this['_resolutio'+'nMode']===j_){const _0x294282=this['graphicsDe'+'vice']['canvas'];this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x294282['clientWidt'+'h'],_0x294282['clientHeig'+'ht']);}}['onLibrarie'+'sLoaded'](){this['_libraries'+'Loaded']=!(0x2ce+0x3a5*0x3+-0xdbd*0x1),this['systems']['rigidbody']&&this['systems']['rigidbody']['onLibraryL'+'oaded']();}['applyScene'+'Settings'](_0x8188d5){let _0x5c8f2c;if(this['systems']['rigidbody']&&typeof Ammo<'u'){const [_0x424b41,_0x106843,_0x43be0b]=_0x8188d5['physics']['gravity'];this['systems']['rigidbody']['gravity']['set'](_0x424b41,_0x106843,_0x43be0b);}this['scene']['applySetti'+'ngs'](_0x8188d5),_0x8188d5['render']['hasOwnProp'+'erty']('skybox')&&(_0x8188d5['render']['skybox']?(_0x5c8f2c=this['assets']['get'](_0x8188d5['render']['skybox']),_0x5c8f2c?this['setSkybox'](_0x5c8f2c):this['assets']['once']('add:'+_0x8188d5['render']['skybox'],this['setSkybox'],this)):this['setSkybox'](null));}['setAreaLig'+'htLuts'](_0x35b6fc,_0x3ad0c3){_0x35b6fc&&_0x3ad0c3?Qr['set'](this['graphicsDe'+'vice'],_0x35b6fc,_0x3ad0c3):w['warn']('setAreaLig'+'htLuts:\x20LU'+'Ts\x20for\x20are'+'a\x20light\x20ar'+'e\x20not\x20vali'+'d');}['setSkybox'](_0x2b3405){if(_0x2b3405!==this['_skyboxAss'+'et']){const _0x1d1d0b=()=>{this['setSkybox'](null);},_0x3f8e50=()=>{this['scene']['setSkybox'](this['_skyboxAss'+'et']?this['_skyboxAss'+'et']['resources']:null);};this['_skyboxAss'+'et']&&(this['assets']['off']('load:'+this['_skyboxAss'+'et']['id'],_0x3f8e50,this),this['assets']['off']('remove:'+this['_skyboxAss'+'et']['id'],_0x1d1d0b,this),this['_skyboxAss'+'et']['off']('change',_0x3f8e50,this)),this['_skyboxAss'+'et']=_0x2b3405,this['_skyboxAss'+'et']&&(this['assets']['on']('load:'+this['_skyboxAss'+'et']['id'],_0x3f8e50,this),this['assets']['once']('remove:'+this['_skyboxAss'+'et']['id'],_0x1d1d0b,this),this['_skyboxAss'+'et']['on']('change',_0x3f8e50,this),this['scene']['skyboxMip']===-0x2100+-0x465+0x2565&&!this['_skyboxAss'+'et']['loadFaces']&&(this['_skyboxAss'+'et']['loadFaces']=!(-0x2078+0x1c02+-0x2*-0x23b)),this['assets']['load'](this['_skyboxAss'+'et'])),_0x3f8e50();}}['_firstBake'](){var _0x100fce;(_0x100fce=this['lightmappe'+'r'])==null||_0x100fce['bake'](null,this['scene']['lightmapMo'+'de']);}['_firstBatc'+'h'](){var _0x514eaf;(_0x514eaf=this['batcher'])==null||_0x514eaf['generate']();}['_processTi'+'mestamp'](_0x17a5e5){return _0x17a5e5;}['drawLine'](_0x3cb9db,_0xb5df70,_0x3bda7d,_0x2c1e44,_0x543926){this['scene']['drawLine'](_0x3cb9db,_0xb5df70,_0x3bda7d,_0x2c1e44,_0x543926);}['drawLines'](_0x465ae5,_0x53f312,_0xc3330c=!(0x1146+-0x1127*-0x1+-0x226d),_0x3bc300=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLines'](_0x465ae5,_0x53f312,_0xc3330c,_0x3bc300);}['drawLineAr'+'rays'](_0x921b4b,_0x56efbb,_0x729828=!(0x1*0x5d5+0xad*0x3+-0x2*0x3ee),_0x2a3e7d=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLineAr'+'rays'](_0x921b4b,_0x56efbb,_0x729828,_0x2a3e7d);}['drawWireSp'+'here'](_0x463e49,_0x1714d8,_0x19221f=ie['WHITE'],_0x468f6d=0x80*-0x39+-0x55e*-0x6+0x1*-0x3a0,_0x4fb79d=!(0x12b0+-0x1145+-0x16b),_0x3bbd5f=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawWireSp'+'here'](_0x463e49,_0x1714d8,_0x19221f,_0x468f6d,_0x4fb79d,_0x3bbd5f);}['drawWireAl'+'ignedBox'](_0x3ec7ee,_0x2e540e,_0x4f1472=ie['WHITE'],_0x16ae95=!(-0x1711+-0x2468+0x1d*0x20d),_0x273c94=this['scene']['defaultDra'+'wLayer'],_0x38e73e){this['scene']['immediate']['drawWireAl'+'ignedBox'](_0x3ec7ee,_0x2e540e,_0x4f1472,_0x16ae95,_0x273c94,_0x38e73e);}['drawMeshIn'+'stance'](_0x4b3a1c,_0x291a0b=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](null,null,null,_0x4b3a1c,_0x291a0b);}['drawMesh'](_0x2da123,_0x908978,_0x3ee05a,_0x3fff66=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x908978,_0x3ee05a,_0x2da123,null,_0x3fff66);}['drawQuad'](_0x57916d,_0x5c4955,_0x7591a7=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x5c4955,_0x57916d,this['scene']['immediate']['getQuadMes'+'h'](),null,_0x7591a7);}['drawTextur'+'e'](_0x10c30e,_0x2365a8,_0x491960,_0x1e8106,_0x56c00b,_0x226e91,_0x5c7759=this['scene']['defaultDra'+'wLayer'],_0x54d4f7=!(-0x1*0x40b+0x137*-0x17+0x1ffc)){if(_0x54d4f7===!(0x1ecc+0x76b*0x2+-0x2da1)&&!this['graphicsDe'+'vice']['isWebGPU'])return;const _0x166455=new te();_0x166455['setTRS'](new D(_0x10c30e,_0x2365a8,-0x1379+0x1555*0x1+-0x1dc),le['IDENTITY'],new D(_0x491960,-_0x1e8106,-0x6*0x1f+-0x25a9+0x2663)),_0x226e91||(_0x226e91=new Bn(),_0x226e91['cull']=bt,_0x226e91['setParamet'+'er']('colorMap',_0x56c00b),_0x226e91['shaderDesc']=_0x54d4f7?this['scene']['immediate']['getTexture'+'ShaderDesc'](_0x56c00b['encoding']):this['scene']['immediate']['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](),_0x226e91['update']()),this['drawQuad'](_0x166455,_0x226e91,_0x5c7759);}['drawDepthT'+'exture'](_0x5e4d18,_0x554d77,_0x2fe48e,_0x4eb7b1,_0x4ee64c=this['scene']['defaultDra'+'wLayer']){const _0x5b89e9=new Bn();_0x5b89e9['cull']=bt,_0x5b89e9['shaderDesc']=this['scene']['immediate']['getDepthTe'+'xtureShade'+'rDesc'](),_0x5b89e9['update'](),this['drawTextur'+'e'](_0x5e4d18,_0x554d77,_0x2fe48e,_0x4eb7b1,null,_0x5b89e9,_0x4ee64c);}['destroy'](){var _0x5f59da,_0x4f6643,_0x5e3cae,_0x4d1a36;if(this['_inFrameUp'+'date']){this['_destroyRe'+'quested']=!(0x13*-0x150+0x13f5+0x4fb);return;}const _0x402071=this['graphicsDe'+'vice']['canvas']['id'];this['fire']('destroy',this),this['off']('librariesl'+'oaded'),typeof document<'u'&&(document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x634+-0xace+0x1103)),document['removeEven'+'tListener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x1*-0x7b6+-0x12b3*0x1+0x1a6a)),document['removeEven'+'tListener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x1f*-0x6f+-0x1d9b+0x2b0d)),document['removeEven'+'tListener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(0x120e*-0x2+-0x16*0x22+0x2709))),this['_visibilit'+'yChangeHan'+'dler']=null,this['root']['destroy'](),this['root']=null,this['mouse']&&(this['mouse']['off'](),this['mouse']['detach'](),this['mouse']=null),this['keyboard']&&(this['keyboard']['off'](),this['keyboard']['detach'](),this['keyboard']=null),this['touch']&&(this['touch']['off'](),this['touch']['detach'](),this['touch']=null),this['elementInp'+'ut']&&(this['elementInp'+'ut']['detach'](),this['elementInp'+'ut']=null),this['gamepads']&&(this['gamepads']['destroy'](),this['gamepads']=null),this['controller']&&(this['controller']=null),this['systems']['destroy'](),this['scene']['layers']&&this['scene']['layers']['destroy']();const _0x3f6ac0=this['assets']['list']();for(let _0x44d5c1=-0x267a+-0x20f3+0x476d;_0x44d5c1<_0x3f6ac0['length'];_0x44d5c1++)_0x3f6ac0[_0x44d5c1]['unload'](),_0x3f6ac0[_0x44d5c1]['off']();this['assets']['off'](),this['bundles']['destroy'](),this['bundles']=null,this['i18n']['destroy'](),this['i18n']=null;const _0x1749e5=this['loader']['getHandler']('script');_0x1749e5==null||_0x1749e5['clearCache'](),this['loader']['destroy'](),this['loader']=null,this['scene']['destroy'](),this['scene']=null,this['systems']=null,this['context']=null,this['scripts']['destroy'](),this['scripts']=null,this['scenes']['destroy'](),this['scenes']=null,(_0x5f59da=this['lightmappe'+'r'])==null||_0x5f59da['destroy'](),this['lightmappe'+'r']=null,this['_batcher']&&(this['_batcher']['destroy'](),this['_batcher']=null),this['_entityInd'+'ex']={},this['defaultLay'+'erDepth']['onDisable']=null,this['defaultLay'+'erDepth']['onEnable']=null,this['defaultLay'+'erDepth']=null,this['defaultLay'+'erWorld']=null,(_0x4f6643=this['xr'])==null||_0x4f6643['end'](),(_0x5e3cae=this['xr'])==null||_0x5e3cae['destroy'](),this['renderer']['destroy'](),this['renderer']=null,this['graphicsDe'+'vice']['destroy'](),this['graphicsDe'+'vice']=null,this['tick']=null,this['off'](),(_0x4d1a36=this['_soundMana'+'ger'])==null||_0x4d1a36['destroy'](),this['_soundMana'+'ger']=null,Kr['_applicati'+'ons'][_0x402071]=null,Ys()===this&&Wf(null),Kr['cancelTick'](this);}static['cancelTick'](_0x4f1621){_0x4f1621['frameReque'+'stId']&&(window['cancelAnim'+'ationFrame'](_0x4f1621['frameReque'+'stId']),_0x4f1621['frameReque'+'stId']=void(-0xff+-0x359+0x458));}['getEntityF'+'romIndex'](_0x52e437){return this['_entityInd'+'ex'][_0x52e437];}['_registerS'+'ceneImmedi'+'ate'](_0x499570){this['on']('postrender',_0x499570['immediate']['onPostRend'+'er'],_0x499570['immediate']);}};h(Kr,'_applicati'+'ons',{});let Ks=Kr;const SI=function(_0x63d989){const _0x23b129=_0x63d989;return function(_0x1be1ba,_0x1a0957){var _0x4f3457,_0x2b732c,_0x419637,_0x4c18e3;if(!_0x23b129['graphicsDe'+'vice'])return;_0x23b129['frameReque'+'stId']&&((_0x2b732c=(_0x4f3457=_0x23b129['xr'])==null?void(-0x55a+-0x1*-0x155b+-0x1001):_0x4f3457['session'])==null||_0x2b732c['cancelAnim'+'ationFrame'](_0x23b129['frameReque'+'stId']),cancelAnimationFrame(_0x23b129['frameReque'+'stId']),_0x23b129['frameReque'+'stId']=null),_0x23b129['_inFrameUp'+'date']=!(-0x1610+-0x1acf+0x30df*0x1),Wf(_0x23b129);const _0x1d6940=_0x23b129['_processTi'+'mestamp'](_0x1be1ba)||de(),_0x35ada2=_0x1d6940-(_0x23b129['_time']||_0x1d6940);let _0x281d27=_0x35ada2/(-0x4d0+0x22c2+-0x1a0a);if(_0x281d27=Y['clamp'](_0x281d27,-0x68f*0x3+0x37c*-0x6+-0x1*-0x2895,_0x23b129['maxDeltaTi'+'me']),_0x281d27*=_0x23b129['timeScale'],_0x23b129['_time']=_0x1d6940,(_0x419637=_0x23b129['xr'])!=null&&_0x419637['session']?_0x23b129['frameReque'+'stId']=_0x23b129['xr']['session']['requestAni'+'mationFram'+'e'](_0x23b129['tick']):_0x23b129['frameReque'+'stId']=Me['browser']||Me['worker']?requestAnimationFrame(_0x23b129['tick']):null,_0x23b129['graphicsDe'+'vice']['contextLos'+'t'])return;_0x23b129['_fillFrame'+'StatsBasic'](_0x1d6940,_0x281d27,_0x35ada2),_0x23b129['_fillFrame'+'Stats'](),_0x23b129['fire']('frameupdat'+'e',_0x35ada2);let _0x23ca95=!(0xf62+-0x20ae+0x114d);_0x1a0957?(_0x23ca95=!((_0x4c18e3=_0x23b129['xr'])!=null&&_0x4c18e3['update'](_0x1a0957)),_0x23b129['graphicsDe'+'vice']['defaultFra'+'mebuffer']=_0x1a0957['session']['renderStat'+'e']['baseLayer']['framebuffe'+'r']):_0x23b129['graphicsDe'+'vice']['defaultFra'+'mebuffer']=null,!_0x23ca95&&!_0x23b129['stopSort']&&(w['trace'](l0,'----\x20Frame'+'\x20'+_0x23b129['frame']),w['trace'](hd,'--\x20UpdateS'+'tart\x20'+de()['toFixed'](0x1*0x23b+-0x187c+0x1643)+'ms'),_0x23b129['update'](_0x281d27),_0x23b129['fire']('framerende'+'r'),(_0x23b129['autoRender']||_0x23b129['renderNext'+'Frame'])&&(w['trace'](hd,'--\x20RenderS'+'tart\x20'+de()['toFixed'](-0x5*-0x23c+-0xb53+0x1*0x29)+'ms'),_0x23b129['render'](),_0x23b129['renderNext'+'Frame']=!(0x1139+-0x18ae+-0xa*-0xbf),w['trace'](hd,'--\x20RenderE'+'nd\x20'+de()['toFixed'](0x92*0x2b+0xa8d+-0x1*0x2311)+'ms')),_0x23b129['fire']('frameend')),_0x23b129['_inFrameUp'+'date']=!(-0x752*-0x1+0x18d+-0x46f*0x2),_0x23b129['_destroyRe'+'quested']&&_0x23b129['destroy']();};};class yI{constructor(){h(this,'elementInp'+'ut'),h(this,'keyboard'),h(this,'mouse'),h(this,'touch'),h(this,'gamepads'),h(this,'scriptPref'+'ix'),h(this,'assetPrefi'+'x'),h(this,'scriptsOrd'+'er'),h(this,'soundManag'+'er'),h(this,'graphicsDe'+'vice'),h(this,'lightmappe'+'r'),h(this,'batchManag'+'er'),h(this,'xr'),h(this,'componentS'+'ystems',[]),h(this,'resourceHa'+'ndlers',[]);}}const oo=new Mu();class sv{constructor(_0x207939,_0x2775bc,_0x220802){this['scene']=_0x207939,this['light']=_0x2775bc,this['store'](),_0x2775bc['numCascade'+'s']=-0xa16+-0x1*0x1a08+0x241f,this['scene']['clusteredL'+'ightingEna'+'bled']&&!_0x220802['shadowsEna'+'bled']&&(_0x2775bc['castShadow'+'s']=!(-0x26a8+0xafd+0x1*0x1bac)),_0x2775bc['type']!==ve&&(_0x2775bc['_node']['getWorldTr'+'ansform'](),_0x2775bc['getBoundin'+'gSphere'](oo),this['lightBound'+'s']=new De(),this['lightBound'+'s']['center']['copy'](oo['center']),this['lightBound'+'s']['halfExtent'+'s']['set'](oo['radius'],oo['radius'],oo['radius']));}['store'](){this['mask']=this['light']['mask'],this['shadowUpda'+'teMode']=this['light']['shadowUpda'+'teMode'],this['enabled']=this['light']['enabled'],this['intensity']=this['light']['intensity'],this['rotation']=this['light']['_node']['getLocalRo'+'tation']()['clone'](),this['numCascade'+'s']=this['light']['numCascade'+'s'],this['castShadow'+'s']=this['light']['_castShado'+'ws'];}['restore'](){const _0x255bfe=this['light'];_0x255bfe['mask']=this['mask'],_0x255bfe['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x255bfe['enabled']=this['enabled'],_0x255bfe['intensity']=this['intensity'],_0x255bfe['_node']['setLocalRo'+'tation'](this['rotation']),_0x255bfe['numCascade'+'s']=this['numCascade'+'s'],_0x255bfe['_castShado'+'ws']=this['castShadow'+'s'];}['startBake'](){this['light']['enabled']=!(-0x237*-0x6+0x11a3+-0x1eed),this['light']['_destroySh'+'adowMap'](),this['light']['beginFrame']();}['endBake'](_0x2d1bd1){const _0x7dfa54=this['light'];_0x7dfa54['enabled']=!(0x840+-0x15b8+0xd79),_0x7dfa54['shadowMap']&&(_0x7dfa54['shadowMap']['cached']&&_0x2d1bd1['add'](_0x7dfa54,_0x7dfa54['shadowMap']),_0x7dfa54['shadowMap']=null);}}const ac=new J();class vI extends sv{constructor(_0x29d334,_0x24c2cd){super(_0x29d334['scene'],_0x24c2cd,_0x29d334['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['type']===ve?this['light']['bakeNumSam'+'ples']:0x9*0x1c1+-0xdfc+-0x1cc;}['prepareVir'+'tualLight'](_0x1d9ef2,_0x9c957f){const _0x1462cc=this['light'];if(_0x1462cc['_node']['setLocalRo'+'tation'](this['rotation']),_0x1d9ef2>-0x74f*-0x3+0xc4b+0x1*-0x2238){const _0x3d7335=_0x1462cc['bakeArea'];wl['circlePoin'+'tDetermini'+'stic'](ac,_0x1d9ef2,_0x9c957f),ac['mulScalar'](_0x3d7335*(-0x2*0x91e+0x1b1f+-0x8e3+0.5)),_0x1462cc['_node']['rotateLoca'+'l'](ac['x'],0x32*-0x62+0xa26*-0x1+-0x1d4a*-0x1,ac['y']);}_0x1462cc['_node']['getWorldTr'+'ansform']();const _0x44f126=-0xa6f*-0x3+-0x189*-0x6+0x2881*-0x1+0.20000000000000018,_0x2cb0db=Math['pow'](this['intensity'],_0x44f126);_0x1462cc['intensity']=Math['pow'](_0x2cb0db/_0x9c957f,(-0x44*-0x61+0x1620+-0x215*0x17)/_0x44f126);}}const J_=new D();(function(){const _0x185bfd=function(){let _0x13548e;try{_0x13548e=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');')();}catch(_0x23adde){_0x13548e=window;}return _0x13548e;},_0x13caff=_0x185bfd();_0x13caff['setInterva'+'l'](_0x10fe9c,0xf9d+-0x1a65*-0x1+-0x1a62);}());class eg extends sv{constructor(_0x2e4e7f){const _0x5dda17=_0x2e4e7f['scene'],_0xd386c6=new lt('AmbientLig'+'ht');_0xd386c6['addCompone'+'nt']('light',{'type':'directiona'+'l','affectDynamic':!(-0x1026+-0x1c*0x146+0x13*0x2ba),'affectLightmapped':!(0x13d3+-0x74a+-0xc88),'bake':!(-0x1b4d+0x372*-0x9+0x3a4f),'bakeNumSamples':_0x5dda17['ambientBak'+'eNumSample'+'s'],'castShadows':!(0xc6f+-0xca3+-0x4*-0xd),'normalOffsetBias':0.05,'shadowBias':0.2,'shadowDistance':0x1,'shadowResolution':0x800,'shadowType':Ws,'color':ie['WHITE'],'intensity':0x1,'bakeDir':!(-0x10f0*0x2+-0x74*0x18+0x2cc1)}),super(_0x5dda17,_0xd386c6['light']['light'],_0x2e4e7f['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['bakeNumSam'+'ples'];}['prepareVir'+'tualLight'](_0x531eea,_0x5f58db){wl['spherePoin'+'tDetermini'+'stic'](J_,_0x531eea,_0x5f58db,-0x1*0x1413+0x793+0xc80,this['scene']['ambientBak'+'eSpherePar'+'t']),this['light']['_node']['lookAt'](J_['mulScalar'](-(-0xdf*0xe+0xace+0x165))),this['light']['_node']['rotateLoca'+'l'](0x25*0x10c+-0x75d+-0x1f05,0x4a*-0x47+0x2401+0x1*-0xf7b,0xeaf+0x47*-0x81+0x1518);const _0xcf72c9=-0x81e+0x2b*-0xad+0x39*0xa7+0.20000000000000018,_0x2814f2=(0x1352*-0x1+-0xb15+0x1e69)*Math['PI']*this['scene']['ambientBak'+'eSpherePar'+'t'],_0x390f37=Math['pow'](_0x2814f2,_0xcf72c9);this['light']['intensity']=Math['pow'](_0x390f37/_0x5f58db,(-0x5a*0x11+-0x11*-0x17f+-0x19f*0xc)/_0xcf72c9);}}class nc{constructor(_0x58f344,_0xf5c255=null){this['node']=_0x58f344,this['component']=_0x58f344['render']||_0x58f344['model'],_0xf5c255=_0xf5c255||this['component']['meshInstan'+'ces'],this['store'](),this['meshInstan'+'ces']=_0xf5c255,this['bounds']=null,this['renderTarg'+'ets']=[];}['store'](){this['castShadow'+'s']=this['component']['castShadow'+'s'];}['restore'](){this['component']['castShadow'+'s']=this['castShadow'+'s'];}}const xI='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afl'+'oat\x20normpd'+'f3(in\x20vec3'+'\x20v,\x20in\x20flo'+'at\x20sigma)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x200.39894'+'\x20*\x20exp(-0.'+'5\x20*\x20dot(v,'+'\x20v)\x20/\x20(sig'+'ma\x20*\x20sigma'+'))\x20/\x20sigma'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBM'+'(vec4\x20rgbm'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20color\x20='+'\x20(8.0\x20*\x20rg'+'bm.a)\x20*\x20rg'+'bm.rgb;\x0a\x20\x20'+'\x20\x20return\x20c'+'olor\x20*\x20col'+'or;\x0a}\x0a\x0aflo'+'at\x20saturat'+'e(float\x20x)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeRG'+'BM(vec3\x20co'+'lor)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20encoded'+';\x0a\x20\x20\x20\x20enco'+'ded.rgb\x20=\x20'+'pow(color.'+('rgb,\x20vec3('+'0.5));\x0a\x20\x20\x20'+'\x20encoded.r'+'gb\x20*=\x201.0\x20'+'/\x208.0;\x0a\x0a\x20\x20'+'\x20\x20encoded.'+'a\x20=\x20satura'+'te(\x20max(\x20m'+'ax(\x20encode'+'d.r,\x20encod'+'ed.g\x20),\x20ma'+'x(\x20encoded'+'.b,\x201.0\x20/\x20'+'255.0\x20)\x20)\x20'+');\x0a\x20\x20\x20\x20enc'+'oded.a\x20=\x20c'+'eil(encode'+'d.a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20enc'+'oded.rgb\x20/'+'=\x20encoded.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20encode'+'d;\x0a}\x0a\x0avec3'+'\x20decode(ve'+'c4\x20pixel)\x20'+'{\x0a\x20\x20\x20\x20#if\x20'+'HDR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20p'+'ixel.rgb;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eRGBM(pixe'+'l);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0abo'+'ol\x20isUsed('+'vec4\x20pixel'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20HDR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20any(great'+'erThan(pix'+'el.rgb,\x20ve'+'c3(0.0)));'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20pixe'+'l.a\x20>\x200.0;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0avaryi'+'ng\x20vec2\x20vU'+'v0;\x0aunifor'+'m\x20sampler2'+'D\x20source;\x0a'+'uniform\x20ve'+'c2\x20pixelOf'+'fset;\x0aunif'+'orm\x20vec2\x20s'+'igmas;\x0auni'+'form\x20float'+'\x20bZnorm;\x0au'+'niform\x20flo'+'at\x20kernel['+'{MSIZE}];\x0a'+'\x0avoid\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20ve'+'c4\x20pixel\x20='+'\x20texture2D'+'Lod(source'+',\x20vUv0,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20/'+'/\x20lightmap'+'\x20specific\x20'+'optimizati'+'on\x20-\x20skip\x20'+'pixels\x20tha'+'t\x20were\x20not'+'\x20baked\x0a\x20\x20\x20'+'\x20//\x20this\x20a'+'lso\x20allows'+'\x20dilate\x20fi'+'lter\x20that\x20'+'work\x20on\x20th'+'e\x20output\x20o'+'f\x20this\x20to\x20'+'work\x20corre'+'ctly,\x20as\x20i'+'t\x20depends\x20'+'on\x20.a\x20bein'+'g\x20zero\x0a\x20\x20\x20'+'\x20//\x20to\x20dil'+'ate,\x20which'+'\x20the\x20follo'+'wing\x20blur\x20'+'filter\x20wou'+'ld\x20otherwi'+'se\x20modify\x0a')+('\x20\x20\x20\x20if\x20(!i'+'sUsed(pixe'+'l))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20p'+'ixel;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20sigma\x20-'+'\x20controls\x20'+'blurriness'+'\x20based\x20on\x20'+'a\x20pixel\x20di'+'stance\x0a\x20\x20\x20'+'\x20float\x20sig'+'ma\x20=\x20sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'float\x20bSig'+'ma\x20=\x20sigma'+'s.y;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20pixel'+'Hdr\x20=\x20deco'+'de(pixel);'+'\x0a\x20\x20\x20\x20vec3\x20'+'accumulate'+'dHdr\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20float\x20ac'+'cumulatedF'+'actor\x20=\x200.'+'000001;\x20\x20/'+'/\x20avoid\x20di'+'vision\x20by\x20'+'zero\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20ou'+'t\x20the\x20texe'+'ls\x0a\x20\x20\x20\x20con'+'st\x20int\x20kSi'+'ze\x20=\x20({MSI'+'ZE}\x20-\x201)\x20/'+'\x202;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x20-kSize;\x20i'+'\x20<=\x20kSize;'+'\x20++i)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20j\x20=\x20-'+'kSize;\x20j\x20<'+'=\x20kSize;\x20+'+'+j)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sample'+'\x20the\x20pixel'+'\x20with\x20offs'+'et\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'coord\x20=\x20vU'+'v0\x20+\x20vec2('+'float(i),\x20'+'float(j))\x20'+'*\x20pixelOff'+'set;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20pix\x20=\x20te'+'xture2DLod'+'(source,\x20c'+'oord,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x20-\x20o'+'nly\x20use\x20ba'+'ked\x20pixels'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(isU'+'sed(pix))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20hdr\x20=\x20d'+'ecode(pix)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20bilatera'+'l\x20factors\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20factor\x20='+'\x20kernel[kS'+'ize\x20+\x20j]\x20*'+'\x20kernel[kS')+('ize\x20+\x20i];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fact'+'or\x20*=\x20norm'+'pdf3(hdr\x20-'+'\x20pixelHdr,'+'\x20bSigma)\x20*'+'\x20bZnorm;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ccumulate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20accu'+'mulatedHdr'+'\x20+=\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20+=\x20facto'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20finalHD'+'R\x20=\x20accumu'+'latedHdr\x20/'+'\x20accumulat'+'edFactor;\x0a'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(finalHDR,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'encodeRGBM'+'(finalHDR)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a'),TI='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0auniform\x20'+'sampler2D\x20'+'source;\x0aun'+'iform\x20vec2'+'\x20pixelOffs'+'et;\x0a\x0abool\x20'+'isUsed(vec'+'4\x20pixel)\x20{'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20an'+'y(greaterT'+'han(pixel.'+'rgb,\x20vec3('+'0.0)));\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20pixel.a'+'\x20>\x200.0;\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20c'+'\x20=\x20texture'+'2DLod(sour'+'ce,\x20vUv0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'c\x20=\x20isUsed'+'(c)\x20?\x20c\x20:\x20'+'texture2DL'+'od(source,'+'\x20vUv0\x20-\x20pi'+'xelOffset,'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20v'+'ec2(0,\x20-pi'+'xelOffset.'+'y),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(pix'+'elOffset.x'+',\x20-pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(-pixelOf'+'fset.x,\x200)'+',\x200.0);\x0a\x20\x20'+'\x20\x20c\x20=\x20isUs'+'ed(c)\x20?\x20c\x20'+':\x20texture2'+'DLod(sourc'+'e,\x20vUv0\x20+\x20'+'vec2(pixel'+'Offset.x,\x20'+'0),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(-pi'+'xelOffset.'+'x,\x20pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(0,\x20pixel'+'Offset.y),'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20p'+'ixelOffset'+',\x200.0);\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20c;\x0a'+'}\x0a',wI='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afn'+'\x20normpdf3('+'v:\x20vec3f,\x20'+'sigma:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x200.39894\x20'+'*\x20exp(-0.5'+'\x20*\x20dot(v,\x20'+'v)\x20/\x20(sigm'+'a\x20*\x20sigma)'+')\x20/\x20sigma;'+'\x0a}\x0a\x0afn\x20dec'+'odeRGBM(rg'+'bm:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20(8'+'.0\x20*\x20rgbm.'+'a)\x20*\x20rgbm.'+'rgb;\x0a\x20\x20\x20\x20r'+'eturn\x20colo'+'r\x20*\x20color;'+'\x0a}\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeRGBM'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'var\x20encode'+'d:\x20vec4f;\x0a'+'\x20\x20\x20\x20let\x20rg'+'b_processe'+('d\x20=\x20pow(co'+'lor.rgb,\x20v'+'ec3f(0.5))'+'\x20*\x20(1.0\x20/\x20'+'8.0);\x0a\x20\x20\x20\x20'+'encoded\x20=\x20'+'vec4f(rgb_'+'processed,'+'\x200.0);\x0a\x0a\x20\x20'+'\x20\x20let\x20max_'+'g_b\x20=\x20max('+'\x20encoded.g'+',\x20max(\x20enc'+'oded.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20);\x0a\x20\x20\x20\x20l'+'et\x20max_rgb'+'\x20=\x20max(\x20en'+'coded.r,\x20m'+'ax_g_b\x20);\x0a'+'\x20\x20\x20\x20encode'+'d.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20enco'+'ded.a\x20=\x20ce'+'il(encoded'+'.a\x20*\x20255.0'+')\x20/\x20255.0;'+'\x0a\x0a\x20\x20\x20\x20enco'+'ded\x20=\x20vec4'+'f(encoded.'+'rgb\x20/\x20enco'+'ded.a,\x20enc'+'oded.a);\x0a\x20'+'\x20\x20\x20return\x20'+'encoded;\x0a}'+'\x0a\x0afn\x20decod'+'e(pixel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20pixel.'+'rgb;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'decodeRGBM'+'(pixel);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a\x0afn\x20isUs'+'ed(pixel:\x20'+'vec4f)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0ava'+'r\x20source:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20sourceSam'+'pler:\x20samp'+'ler;\x0aunifo'+'rm\x20kernel:'+'\x20array<f32'+',\x20{MSIZE}>'+';\x0auniform\x20'+'pixelOffse'+'t:\x20vec2f;\x0a'+'uniform\x20si'+'gmas:\x20vec2'+'f;\x0auniform'+'\x20bZnorm:\x20f'+'32;\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20pixel\x20'+'=\x20textureS'+'ampleLevel'+'(source,\x20s'+'ourceSampl'+'er,\x20input.')+('vUv0,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'lightmap\x20s'+'pecific\x20op'+'timization'+'\x20-\x20skip\x20pi'+'xels\x20that\x20'+'were\x20not\x20b'+'aked\x0a\x20\x20\x20\x20/'+'/\x20this\x20als'+'o\x20allows\x20d'+'ilate\x20filt'+'er\x20that\x20wo'+'rk\x20on\x20the\x20'+'output\x20of\x20'+'this\x20to\x20wo'+'rk\x20correct'+'ly,\x20as\x20it\x20'+'depends\x20on'+'\x20.a\x20being\x20'+'zero\x0a\x20\x20\x20\x20/'+'/\x20to\x20dilat'+'e,\x20which\x20t'+'he\x20followi'+'ng\x20blur\x20fi'+'lter\x20would'+'\x20otherwise'+'\x20modify\x0a\x20\x20'+'\x20\x20if\x20(!isU'+'sed(pixel)'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20pix'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20range\x20sig'+'ma\x20-\x20contr'+'ols\x20blurri'+'ness\x20based'+'\x20on\x20a\x20pixe'+'l\x20distance'+'\x0a\x20\x20\x20\x20let\x20s'+'igma\x20=\x20uni'+'form.sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'let\x20bSigma'+'\x20=\x20uniform'+'.sigmas.y;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'pixelHdr\x20='+'\x20decode(pi'+'xel);\x0a\x20\x20\x20\x20'+'var\x20accumu'+'latedHdr\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20var'+'\x20accumulat'+'edFactor\x20='+'\x200.000001;'+'\x20\x20//\x20avoid'+'\x20division\x20'+'by\x20zero\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20out\x20the\x20t'+'exels\x0a\x20\x20\x20\x20'+'const\x20kSiz'+'e\x20=\x20({MSIZ'+'E}\x20-\x201)\x20/\x20'+'2;\x0a\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x20-kSiz'+'e;\x20i\x20<=\x20kS'+'ize;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(var\x20j:\x20i3'+'2\x20=\x20-kSize'+';\x20j\x20<=\x20kSi'+'ze;\x20j\x20=\x20j\x20'+'+\x201)\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20pixel\x20'+'with\x20offse'+'t\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20co'+'ord\x20=\x20inpu'+'t.vUv0\x20+\x20v'+'ec2f(f32(i')+('),\x20f32(j))'+'\x20*\x20uniform'+'.pixelOffs'+'et;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'pix\x20=\x20text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20co'+'ord,\x200.0);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x20-\x20on'+'ly\x20use\x20bak'+'ed\x20pixels\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(isUs'+'ed(pix))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20hdr\x20=\x20dec'+'ode(pix);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'bilateral\x20'+'factors\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20fa'+'ctor\x20=\x20uni'+'form.kerne'+'l[u32(kSiz'+'e\x20+\x20j)].el'+'ement\x20*\x20un'+'iform.kern'+'el[u32(kSi'+'ze\x20+\x20i)].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20factor'+'\x20=\x20factor\x20'+'*\x20normpdf3'+'(hdr\x20-\x20pix'+'elHdr,\x20bSi'+'gma)\x20*\x20uni'+'form.bZnor'+'m;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20accumul'+'ate\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'accumulate'+'dHdr\x20=\x20acc'+'umulatedHd'+'r\x20+\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20=\x20accumu'+'latedFacto'+'r\x20+\x20factor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20let'+'\x20finalHDR\x20'+'=\x20accumula'+'tedHdr\x20/\x20a'+'ccumulated'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20#if\x20HDR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalHDR,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20e'+'ncodeRGBM('+'finalHDR);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),EI='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0avar\x20so'+'urce:\x20text'+'ure_2d<f32'+'>;\x0avar\x20sou'+'rceSampler'+':\x20sampler;'+'\x0auniform\x20p'+'ixelOffset'+':\x20vec2f;\x0a\x0a'+'fn\x20isUsed('+'pixel:\x20vec'+'4f)\x20->\x20boo'+'l\x20{\x0a\x20\x20\x20\x20#i'+'fdef\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0a@fr'+'agment\x0afn\x20'+'fragmentMa'+'in(input:\x20'+'FragmentIn'+'put)\x20->\x20Fr'+'agmentOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20c:\x20vec4'+'f\x20=\x20textur'+'eSampleLev'+'el(source,'+'\x20sourceSam'+'pler,\x20inpu'+'t.vUv0,\x200.'+'0);\x0a\x20\x20\x20\x20c\x20'+'=\x20select(t'+'extureSamp'+'leLevel(so'+'urce,\x20sour'+'ceSampler,'+'\x20input.vUv'+'0\x20-\x20unifor'+'m.pixelOff'+'set,\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20-un'+'iform.pixe'+'lOffset.y)'+',\x200.0),\x20c,'+'\x20isUsed(c)'+');\x0a\x20\x20\x20\x20c\x20='+'\x20select(te'+'xtureSampl'+'eLevel(sou'+'rce,\x20sourc'+'eSampler,\x20'+'input.vUv0'+'\x20+\x20vec2f(u'+'niform.pix'+'elOffset.x'+',\x20-uniform'+'.pixelOffs'+'et.y),\x200.0'+'),\x20c,\x20isUs'+'ed(c));\x0a\x20\x20'+'\x20\x20c\x20=\x20sele'+'ct(texture'+'SampleLeve'+'l(source,\x20'+'sourceSamp'+'ler,\x20input'+'.vUv0\x20+\x20ve'+'c2f(-unifo'+'rm.pixelOf'+'fset.x,\x200.'+'0),\x200.0),\x20'+'c,\x20isUsed('+'c));\x0a\x20\x20\x20\x20c'+'\x20=\x20select('+'textureSam'+'pleLevel(s'+'ource,\x20sou'+'rceSampler'+',\x20input.vU'+'v0\x20+\x20vec2f'+'(uniform.p'+('ixelOffset'+'.x,\x200.0),\x20'+'0.0),\x20c,\x20i'+'sUsed(c));'+'\x0a\x20\x20\x20\x20c\x20=\x20s'+'elect(text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20in'+'put.vUv0\x20+'+'\x20vec2f(-un'+'iform.pixe'+'lOffset.x,'+'\x20uniform.p'+'ixelOffset'+'.y),\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20uni'+'form.pixel'+'Offset.y),'+'\x200.0),\x20c,\x20'+'isUsed(c))'+';\x0a\x20\x20\x20\x20c\x20=\x20'+'select(tex'+'tureSample'+'Level(sour'+'ce,\x20source'+'Sampler,\x20i'+'nput.vUv0\x20'+'+\x20uniform.'+'pixelOffse'+'t,\x200.0),\x20c'+',\x20isUsed(c'+'));\x0a\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20FragmentO'+'utput;\x0a\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20c;\x0a\x20'+'\x20\x20\x20return\x20'+'output;\x0a}\x0a'),tg=0x15c6+0x98f+-0x1f46,bI={'glslBilateralDeNoisePS':xI,'glslDilatePS':TI},AI={'wgslBilateralDeNoisePS':wI,'wgslDilatePS':EI};class CI{constructor(_0x230fb4){h(this,'shaderDila'+'te',[]),h(this,'shaderDeno'+'ise',[]),(this['device']=_0x230fb4,Ce['get'](this['device'],Fe)['add'](bI),Ce['get'](this['device'],it)['add'](AI),this['constantTe'+'xSource']=_0x230fb4['scope']['resolve']('source'),this['constantPi'+'xelOffset']=_0x230fb4['scope']['resolve']('pixelOffse'+'t'),this['pixelOffse'+'t']=new Float32Array(0x337+0xd*0x2a2+-0x7*0x559),this['sigmas']=null,this['constantSi'+'gmas']=null,this['kernel']=null);}['setSourceT'+'exture'](_0xd7b288){this['constantTe'+'xSource']['setValue'](_0xd7b288);}['prepare'](_0x3d46a8,_0x38ed1c){this['pixelOffse'+'t'][-0x2*-0xc77+0x5*0xb3+-0x1c6d]=(-0xe5d+0x2138+0x96d*-0x2)/_0x3d46a8,this['pixelOffse'+'t'][0x16e6+-0x29*-0xdf+-0x3a9c]=(0x137*-0x2+0x1374+0x1105*-0x1)/_0x38ed1c,this['constantPi'+'xelOffset']['setValue'](this['pixelOffse'+'t']);}['prepareDen'+'oise'](_0x3119b6,_0x123e8c,_0x991139){const _0x59f181=_0x991139?-0x1c5a+0x1ca*0x1+-0x1*-0x1a90:0x266b+-0x1467+-0x1203;if(!this['shaderDeno'+'ise'][_0x59f181]){const _0xe4446b=new Map();_0xe4446b['set']('{MSIZE}',-0xa6b*0x2+0xb*-0x317+-0x57d*-0xa),_0x991139&&_0xe4446b['set']('HDR',''),this['shaderDeno'+'ise'][_0x59f181]=$t['createShad'+'er'](this['device'],{'uniqueName':'lmBilatera'+'lDeNoise-'+(_0x991139?'hdr':'rgbm'),'attributes':{'vertex_position':Pe},'vertexGLSL':Ce['get'](this['device'],Fe)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Ce['get'](this['device'],it)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':Ce['get'](this['device'],Fe)['get']('glslBilate'+'ralDeNoise'+'PS'),'fragmentWGSL':Ce['get'](this['device'],it)['get']('wgslBilate'+'ralDeNoise'+'PS'),'fragmentDefines':_0xe4446b}),this['sigmas']=new Float32Array(-0x1270+-0xd50+0x1fc2),this['constantSi'+'gmas']=this['device']['scope']['resolve']('sigmas'),this['constantKe'+'rnel']=this['device']['scope']['resolve']('kernel[0]'),this['bZnorm']=this['device']['scope']['resolve']('bZnorm');}this['sigmas'][0x1*0xb83+0x1*-0x1625+0xaa2]=_0x3119b6,this['sigmas'][0xc*-0xde+0xea*-0x26+0x379*0xd]=_0x123e8c,this['constantSi'+'gmas']['setValue'](this['sigmas']),this['evaluateDe'+'noiseUnifo'+'rms'](_0x3119b6,_0x123e8c);}['getDenoise'](_0x127da8){const _0x4b0f88=_0x127da8?0x21b0+0x1426+-0x35d6:0x1145+-0x1*0x25ee+-0xa*-0x211;return this['shaderDeno'+'ise'][_0x4b0f88];}['getDilate'](_0x4904f3,_0x33363b){const _0x3ddc13=_0x33363b?-0x1*-0xdd+-0x172f+-0xb29*-0x2:0x79f+-0xe0c+0x66e;if(!this['shaderDila'+'te'][_0x3ddc13]){const _0x4cb168=_0x33363b?'#define\x20HD'+'R\x0a':'';this['shaderDila'+'te'][_0x3ddc13]=$t['createShad'+'er'](_0x4904f3,{'uniqueName':'lmDilate-'+(_0x33363b?'hdr':'rgbm'),'attributes':{'vertex_position':Pe},'vertexGLSL':Ce['get'](this['device'],Fe)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Ce['get'](this['device'],it)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':_0x4cb168+Ce['get'](this['device'],Fe)['get']('glslDilate'+'PS'),'fragmentWGSL':_0x4cb168+Ce['get'](this['device'],it)['get']('wgslDilate'+'PS')});}return this['shaderDila'+'te'][_0x3ddc13];}['evaluateDe'+'noiseUnifo'+'rms'](_0x353f80,_0x144fa8){function _0x3e756b(_0x32402f,_0xdd7b51){return(0x1b3a+0x3*-0xb1+0x1*-0x1927+0.39894)*Math['exp'](-(-0x10*0xbf+-0x3ae+-0xf9e*-0x1+0.5)*_0x32402f*_0x32402f/(_0xdd7b51*_0xdd7b51))/_0xdd7b51;}this['kernel']=this['kernel']||new Float32Array(tg);const _0x410533=this['kernel'],_0x3287b9=Math['floor']((tg-(-0x1527+-0x1f2f*-0x1+-0x97*0x11))/(-0xfa8*-0x1+-0x1dad+-0x1*-0xe07));for(let _0x224a7f=-0x1*0x9d+0x2*0x6d2+0x5*-0x29b;_0x224a7f<=_0x3287b9;++_0x224a7f){const _0x47956b=_0x3e756b(_0x224a7f,_0x353f80);_0x410533[_0x3287b9+_0x224a7f]=_0x47956b,_0x410533[_0x3287b9-_0x224a7f]=_0x47956b;}this['constantKe'+'rnel']['setValue'](this['kernel']);const _0x4d1e8e=(-0x16*-0x34+-0x1e15+0x199e)/_0x3e756b(-0x7*-0x33b+-0x836+0x4cd*-0x3,_0x144fa8);this['bZnorm']['setValue'](_0x4d1e8e);}}class PI extends ys{constructor(_0x1efd06,_0xb1b6b6,_0x4db0fc,_0x40b3aa,_0x2e41c4,_0x12ce37){super(_0x1efd06),h(this,'viewBindGr'+'oups',[]),(this['renderer']=_0xb1b6b6,this['camera']=_0x4db0fc,this['worldClust'+'ers']=_0x40b3aa,this['receivers']=_0x2e41c4,this['lightArray']=_0x12ce37);}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x4aa627=>{_0x4aa627['defaultUni'+'formBuffer']['destroy'](),_0x4aa627['destroy']();}),this['viewBindGr'+'oups']['length']=0x8b*0x17+0x1715+-0x3a*0x9d;}['execute'](){const _0x1558f9=this['device'];Q['pushGpuMar'+'ker'](_0x1558f9,'Lightmappe'+'r');const {renderer:_0x57cd64,camera:_0x3235ff,receivers:_0x50715f,renderTarget:_0x351690,worldClusters:_0x193daa,lightArray:_0x15a974}=this;_0x57cd64['renderForw'+'ardLayer'](_0x3235ff,_0x351690,null,void(-0xff7+0x1*-0x10a3+0x209a),xa,this['viewBindGr'+'oups'],{'meshInstances':_0x50715f,'splitLights':_0x15a974,'lightClusters':_0x193daa}),Q['popGpuMark'+'er'](_0x1558f9);}}const MI=-0x1111+-0x74f+0x2060,DI=-0x34*-0xd+-0x1*0xe9+-0x1bb,II=0x1a26+0x5cf+-0x1ff4,oc=new D();class LI{constructor(_0x54e76e,_0x343d77,_0x3dd256,_0x1c7436,_0x4dcc9e){this['device']=_0x54e76e,this['root']=_0x343d77,this['scene']=_0x3dd256,this['renderer']=_0x1c7436,this['assets']=_0x4dcc9e,this['shadowMapC'+'ache']=_0x1c7436['shadowMapC'+'ache'],this['_tempSet']=new Set(),this['_initCalle'+'d']=!(-0x29*0xf1+-0x171*0x13+0x3*0x15ff),this['passMateri'+'als']=[],this['ambientAOM'+'aterial']=null,this['fog']='',this['ambientLig'+'ht']=new ie(),this['renderTarg'+'ets']=new Map(),this['stats']={'renderPasses':0x0,'lightmapCount':0x0,'totalRenderTime':0x0,'forwardTime':0x0,'fboTime':0x0,'shadowMapTime':0x0,'compileTime':0x0,'shadersLinked':0x0};}['destroy'](){var _0x4d5d64;Bi['decRef'](this['blackTex']),this['blackTex']=null,Bi['destroy'](),this['device']=null,this['root']=null,this['scene']=null,this['renderer']=null,this['assets']=null,(_0x4d5d64=this['camera'])==null||_0x4d5d64['destroy'](),this['camera']=null;}['initBake'](_0x1e3668){if(this['bakeHDR']=this['scene']['lightmapPi'+'xelFormat']!==Ne,!this['_initCalle'+'d']){this['_initCalle'+'d']=!(-0x2023+-0x416*0x3+0x2c65),this['lightmapFi'+'lters']=new CI(_0x1e3668),this['constantBa'+'keDir']=_0x1e3668['scope']['resolve']('bakeDir'),this['materials']=[],this['blackTex']=new _e(this['device'],{'width':0x4,'height':0x4,'format':Ne,'type':Ki,'name':'lightmapBl'+'ack'}),Bi['incRef'](this['blackTex']);const _0x216c2b=new Tl();_0x216c2b['clearColor']['set'](0x25a*0x10+-0x187+-0x2419,-0x4*0x4c1+0x5*0x4c7+-0x1*0x4df,0x1ed4+0x1547+-0x1*0x341b,-0x1*0x2168+0x3*0x265+0x7*0x3bf),_0x216c2b['clearColor'+'Buffer']=!(-0x25*-0x67+-0x2125+0x52*0x39),_0x216c2b['clearDepth'+'Buffer']=!(-0x1*0x1eb6+-0xbe3+0x2a9a),_0x216c2b['clearStenc'+'ilBuffer']=!(-0x25a2+0x3b*-0x9b+0x495c),_0x216c2b['frustumCul'+'ling']=!(0x17c7+-0x13e5+-0x3e1),_0x216c2b['projection']=gn,_0x216c2b['aspectRati'+'o']=-0x41*-0x35+0x2*0x10e9+0x2*-0x17a3,_0x216c2b['node']=new Ie(),this['camera']=_0x216c2b,this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=yl,this['camera']['shaderPara'+'ms']['toneMappin'+'g']=Mp;}if(this['scene']['clusteredL'+'ightingEna'+'bled']){const _0x440c51=new qy(_0x1e3668['supportsAr'+'eaLights'],_0x1e3668['maxTexture'+'Size'],()=>{});this['lightingPa'+'rams']=_0x440c51;const _0x55c173=this['scene']['lighting'];_0x440c51['shadowsEna'+'bled']=_0x55c173['shadowsEna'+'bled'],_0x440c51['shadowAtla'+'sResolutio'+'n']=_0x55c173['shadowAtla'+'sResolutio'+'n'],_0x440c51['cookiesEna'+'bled']=_0x55c173['cookiesEna'+'bled'],_0x440c51['cookieAtla'+'sResolutio'+'n']=_0x55c173['cookieAtla'+'sResolutio'+'n'],_0x440c51['areaLights'+'Enabled']=_0x55c173['areaLights'+'Enabled'],_0x440c51['cells']=new D(0xa3d+0x9b8+-0x13f2,0x1*-0x1aff+-0x1*0x687+-0x65*-0x55,0xc73+-0x169c+0xa2c),_0x440c51['maxLightsP'+'erCell']=0x626*-0x2+0x1dc1*-0x1+0x2a11,this['worldClust'+'ers']=new kf(_0x1e3668),this['worldClust'+'ers']['name']='ClusterLig'+'htmapper';}}['finishBake'](_0x24abb9){this['materials']=[];function _0x18763f(_0x55603d){Bi['decRef'](_0x55603d['colorBuffe'+'r']),_0x55603d['destroy']();}this['renderTarg'+'ets']['forEach'](_0x3b857e=>{_0x18763f(_0x3b857e);}),this['renderTarg'+'ets']['clear'](),_0x24abb9['forEach'](_0x41b676=>{_0x41b676['renderTarg'+'ets']['forEach'](_0x52761e=>{_0x18763f(_0x52761e);}),_0x41b676['renderTarg'+'ets']['length']=0x2519+-0x1b58+0x1*-0x9c1;}),this['ambientAOM'+'aterial']=null,this['worldClust'+'ers']&&(this['worldClust'+'ers']['destroy'](),this['worldClust'+'ers']=null);}['createMate'+'rialForPas'+'s'](_0x46a827,_0x538663,_0x5a2e58){const _0x128d13=new Ut();return _0x128d13['name']='lmMaterial'+'-pass:'+_0x538663+'-ambient:'+_0x5a2e58,_0x128d13['setDefine']('UV1LAYOUT',''),_0x128d13['setDefine']('LIT_LIGHTM'+'AP_BAKING',''),_0x538663===DI?(_0x128d13['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'COLOR',''),_0x5a2e58?_0x128d13['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'ADD_AMBIEN'+'T',''):_0x128d13['ambient']=new ie(0x7fa*-0x2+0x2144+-0x1150,-0x1b61+0x3*-0x3ad+-0x4cd*-0x8,-0x5*-0xe7+0x832+0x1*-0xcb5),this['bakeHDR']||_0x128d13['setDefine']('LIGHTMAP_R'+'GBM',''),_0x128d13['lightMap']=this['blackTex']):(_0x128d13['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'DIR',''),_0x128d13['setDefine']('STD_LIGHTM'+'AP_DIR','')),_0x128d13['cull']=bt,_0x128d13['forceUv1']=!(-0x14a+0x91a+0x28*-0x32),_0x128d13['update'](),_0x128d13;}['createMate'+'rials'](_0x2acea6,_0x549b2d,_0x55f082){for(let _0x568bfc=0x15d2+0x1*-0x9b7+-0xc1b;_0x568bfc<_0x55f082;_0x568bfc++)this['passMateri'+'als'][_0x568bfc]||(this['passMateri'+'als'][_0x568bfc]=this['createMate'+'rialForPas'+'s'](_0x549b2d,_0x568bfc,!(-0x2325+-0x477+0x279d*0x1)));this['ambientAOM'+'aterial']||(this['ambientAOM'+'aterial']=this['createMate'+'rialForPas'+'s'](_0x549b2d,0x960+0x1d*-0x36+0x1*-0x342,!(-0x1*-0x267+0x1fc9*-0x1+-0x1d62*-0x1)),this['ambientAOM'+'aterial']['onUpdateSh'+'ader']=function(_0x514e7c){return _0x514e7c['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(-0x1f*-0x101+0x1926+0x1*-0x3845),_0x514e7c['litOptions']['separateAm'+'bient']=!(0x73b+0x947+0x841*-0x2),_0x514e7c;});}['createText'+'ure'](_0xb0ce64,_0x874581){return new _e(this['device'],{'profilerHint':US,'width':_0xb0ce64,'height':_0xb0ce64,'format':this['scene']['lightmapPi'+'xelFormat'],'mipmaps':!(0x2592+-0x1757+-0xe3a),'type':this['bakeHDR']?Ms:Ki,'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x874581});}['collectMod'+'els'](_0x4cf9f8,_0x2c6641,_0x45cf35){var _0x18d918,_0x2c26b9,_0x39221a;if(!_0x4cf9f8['enabled'])return;let _0x487594;if((_0x18d918=_0x4cf9f8['model'])!=null&&_0x18d918['model']&&((_0x2c26b9=_0x4cf9f8['model'])!=null&&_0x2c26b9['enabled'])&&(_0x45cf35&&_0x45cf35['push'](new nc(_0x4cf9f8)),_0x4cf9f8['model']['lightmappe'+'d']&&_0x2c6641&&(_0x487594=_0x4cf9f8['model']['model']['meshInstan'+'ces'])),(_0x39221a=_0x4cf9f8['render'])!=null&&_0x39221a['enabled']&&(_0x45cf35&&_0x45cf35['push'](new nc(_0x4cf9f8)),_0x4cf9f8['render']['lightmappe'+'d']&&_0x2c6641&&(_0x487594=_0x4cf9f8['render']['meshInstan'+'ces'])),_0x487594){let _0x1f76cf=!(0x1*0x92+0x223*0x8+0xee*-0x13);for(let _0x5338cf=0x9*-0xdb+0x1*0x241+0x572;_0x5338cf<_0x487594['length'];_0x5338cf++)if(!_0x487594[_0x5338cf]['mesh']['vertexBuff'+'er']['format']['hasUv1']){w['log']('Lightmappe'+'r\x20-\x20node\x20['+_0x4cf9f8['name']+(']\x20contains'+'\x20meshes\x20wi'+'thout\x20requ'+'ired\x20uv1,\x20'+'excluding\x20'+'it\x20from\x20ba'+'king.')),_0x1f76cf=!(-0x1915+0x20d7+0x1*-0x7c1);break;}if(_0x1f76cf){const _0x232827=[];for(let _0x305a5c=-0xd62+0xea5+-0x143;_0x305a5c<_0x487594['length'];_0x305a5c++){const _0x357b2b=_0x487594[_0x305a5c]['mesh'];this['_tempSet']['has'](_0x357b2b)?_0x2c6641['push'](new nc(_0x4cf9f8,[_0x487594[_0x305a5c]])):_0x232827['push'](_0x487594[_0x305a5c]),this['_tempSet']['add'](_0x357b2b);}this['_tempSet']['clear'](),_0x232827['length']>0x7b*-0x21+-0x18f0+0x28cb&&_0x2c6641['push'](new nc(_0x4cf9f8,_0x232827));}}for(let _0x80efac=-0x2357+-0x1f35+0x428c;_0x80efac<_0x4cf9f8['_children']['length'];_0x80efac++)this['collectMod'+'els'](_0x4cf9f8['_children'][_0x80efac],_0x2c6641,_0x45cf35);}['prepareSha'+'dowCasters'](_0x19ee89){const _0x184e6f=[];for(let _0xbb8f3b=0x16ff*0x1+-0x1*-0x6c5+-0x2fa*0xa;_0xbb8f3b<_0x19ee89['length'];_0xbb8f3b++){const _0x472df7=_0x19ee89[_0xbb8f3b]['component'];if(_0x472df7['castShadow'+'s']=_0x472df7['castShadow'+'sLightmap'],_0x472df7['castShadow'+'sLightmap']){const _0x638770=_0x19ee89[_0xbb8f3b]['meshInstan'+'ces'];for(let _0x41996c=0x607+0x12*-0xe5+-0x1*-0xa13;_0x41996c<_0x638770['length'];_0x41996c++)_0x638770[_0x41996c]['visibleThi'+'sFrame']=!(-0x16*-0x101+0x928+0x1f*-0x102),_0x184e6f['push'](_0x638770[_0x41996c]);}}return _0x184e6f;}['updateTran'+'sforms'](_0x201a4e){for(let _0x444fbc=0x74d+-0x7*-0x553+0x46*-0xa3;_0x444fbc<_0x201a4e['length'];_0x444fbc++){const _0x2a51ac=_0x201a4e[_0x444fbc]['meshInstan'+'ces'];for(let _0x4d1496=-0x1d72+0x723*0x1+0x164f;_0x4d1496<_0x2a51ac['length'];_0x4d1496++)_0x2a51ac[_0x4d1496]['node']['getWorldTr'+'ansform']();}}['calculateL'+'ightmapSiz'+'e'](_0x3e2771){let _0x57076b;const _0x530730=this['scene']['lightmapSi'+'zeMultipli'+'er']||0xc*0x15b+0x24aa+0xca*-0x43,_0x4de7ef=oc;let _0x108cb5,_0x5a7da9;_0x3e2771['model']?(_0x5a7da9=_0x3e2771['model']['lightmapSi'+'zeMultipli'+'er'],_0x3e2771['model']['asset']?(_0x57076b=this['assets']['get'](_0x3e2771['model']['asset'])['data'],_0x57076b['area']&&(_0x108cb5=_0x57076b['area'])):_0x3e2771['model']['_area']&&(_0x57076b=_0x3e2771['model'],_0x57076b['_area']&&(_0x108cb5=_0x57076b['_area']))):_0x3e2771['render']&&(_0x5a7da9=_0x3e2771['render']['lightmapSi'+'zeMultipli'+'er'],_0x3e2771['render']['type']!=='asset'&&_0x3e2771['render']['_area']&&(_0x57076b=_0x3e2771['render'],_0x57076b['_area']&&(_0x108cb5=_0x57076b['_area'])));const _0x410850={'x':0x1,'y':0x1,'z':0x1,'uv':0x1};_0x108cb5&&(_0x410850['x']=_0x108cb5['x'],_0x410850['y']=_0x108cb5['y'],_0x410850['z']=_0x108cb5['z'],_0x410850['uv']=_0x108cb5['uv']);const _0x59250a=_0x5a7da9||0x1*-0x145d+0x171c+-0x2be;_0x410850['x']*=_0x59250a,_0x410850['y']*=_0x59250a,_0x410850['z']*=_0x59250a;const _0xcc5bd=_0x3e2771['render']||_0x3e2771['model'],_0x1d1282=this['computeNod'+'eBounds'](_0xcc5bd['meshInstan'+'ces']);_0x4de7ef['copy'](_0x1d1282['halfExtent'+'s']);let _0x4d0173=_0x410850['x']*_0x4de7ef['y']*_0x4de7ef['z']+_0x410850['y']*_0x4de7ef['x']*_0x4de7ef['z']+_0x410850['z']*_0x4de7ef['x']*_0x4de7ef['y'];return _0x4d0173/=_0x410850['uv'],_0x4d0173=Math['sqrt'](_0x4d0173),Math['min'](Y['nextPowerO'+'fTwo'](_0x4d0173*_0x530730),this['scene']['lightmapMa'+'xResolutio'+'n']||MI);}['setLightma'+'pping'](_0x4b39ec,_0x528001,_0x56c4ca,_0x563a48){for(let _0x1b555d=-0x1ede+0x1fd5+-0xf7;_0x1b555d<_0x4b39ec['length'];_0x1b555d++){const _0x5094a2=_0x4b39ec[_0x1b555d],_0x533091=_0x5094a2['meshInstan'+'ces'];for(let _0x4bf88e=0x1690+0x5*0x373+-0xd45*0x3;_0x4bf88e<_0x533091['length'];_0x4bf88e++){const _0x1c704b=_0x533091[_0x4bf88e];if(_0x1c704b['setLightma'+'pped'](_0x528001),_0x528001){_0x563a48&&(_0x1c704b['_shaderDef'+'s']|=_0x563a48),_0x1c704b['mask']=di;for(let _0x3d142e=0x4db+0x1*-0x1407+0xf2c;_0x3d142e<_0x56c4ca;_0x3d142e++){const _0x419c64=_0x5094a2['renderTarg'+'ets'][_0x3d142e]['colorBuffe'+'r'];_0x419c64['minFilter']=vt,_0x419c64['magFilter']=vt,_0x1c704b['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][_0x3d142e],_0x419c64);}}}}}['bake'](_0x4f7243,_0x533631=Ac){const _0x255c00=this['device'],_0x1f5037=de();this['scene']['_updateSky'+'Mesh'](),_0x255c00['fire']('lightmappe'+'r:start',{'timestamp':_0x1f5037,'target':this}),this['stats']['renderPass'+'es']=0x7*0x2f3+0x536+-0x19db,this['stats']['shadowMapT'+'ime']=0x9*0x455+0x5*-0x523+-0x1*0xd4e,this['stats']['forwardTim'+'e']=0x1*0x6d3+-0xc2a+-0x1*-0x557;const _0x529327=_0x255c00['_shaderSta'+'ts']['linked'],_0x3c67d4=_0x255c00['_renderTar'+'getCreatio'+'nTime'],_0x39eae4=_0x255c00['_shaderSta'+'ts']['compileTim'+'e'],_0x5b299a=[],_0x5a13d9=[];if(_0x4f7243){for(let _0x2db720=0x18d1+0x527*0x7+-0x1*0x3ce2;_0x2db720<_0x4f7243['length'];_0x2db720++)this['collectMod'+'els'](_0x4f7243[_0x2db720],_0x5b299a,null);this['collectMod'+'els'](this['root'],null,_0x5a13d9);}else this['collectMod'+'els'](this['root'],_0x5b299a,_0x5a13d9);if(Q['pushGpuMar'+'ker'](this['device'],'LMBake'),_0x5b299a['length']>0x1524+-0x2*-0x905+-0x272e){this['renderer']['shadowRend'+'erer']['frameUpdat'+'e']();const _0x239592=_0x533631===Ac?0x10bb+0x2051+-0x310a:0x14*-0x66+0x3d0+0x429;this['setLightma'+'pping'](_0x5b299a,!(0x82*-0x1b+0x950+0x1*0x467),_0x239592),this['initBake'](_0x255c00),this['bakeIntern'+'al'](_0x239592,_0x5b299a,_0x5a13d9);let _0x27d67c=Ff;_0x533631===Ac&&(_0x27d67c|=Iy),this['scene']['ambientBak'+'e']&&(_0x27d67c|=Ly),this['setLightma'+'pping'](_0x5b299a,!(0x24fd+-0x210+-0x22ed),_0x239592,_0x27d67c),this['finishBake'](_0x5b299a);}Q['popGpuMark'+'er'](this['device']);const _0x137144=de();this['stats']['totalRende'+'rTime']=_0x137144-_0x1f5037,this['stats']['shadersLin'+'ked']=_0x255c00['_shaderSta'+'ts']['linked']-_0x529327,this['stats']['compileTim'+'e']=_0x255c00['_shaderSta'+'ts']['compileTim'+'e']-_0x39eae4,this['stats']['fboTime']=_0x255c00['_renderTar'+'getCreatio'+'nTime']-_0x3c67d4,this['stats']['lightmapCo'+'unt']=_0x5b299a['length'],_0x255c00['fire']('lightmappe'+'r:end',{'timestamp':_0x137144,'target':this});}['allocateTe'+'xtures'](_0xf84b5b,_0x271800){for(let _0x395023=-0x1*-0x1d95+-0x102a*-0x2+-0x3de9;_0x395023<_0xf84b5b['length'];_0x395023++){const _0x4270a0=_0xf84b5b[_0x395023],_0x57d434=this['calculateL'+'ightmapSiz'+'e'](_0x4270a0['node']);for(let _0xc11e6f=-0x1a1b*0x1+0x14*-0x18d+0x391f;_0xc11e6f<_0x271800;_0xc11e6f++){const _0x1f37c8=this['createText'+'ure'](_0x57d434,'lightmappe'+'r_lightmap'+'_'+_0x395023);Bi['incRef'](_0x1f37c8),_0x4270a0['renderTarg'+'ets'][_0xc11e6f]=new gt({'colorBuffer':_0x1f37c8,'depth':!(-0x25c1+0x1974+0x2d*0x46)});}if(!this['renderTarg'+'ets']['has'](_0x57d434)){const _0x169cf6=this['createText'+'ure'](_0x57d434,'lightmappe'+'r_temp_lig'+'htmap_'+_0x57d434);Bi['incRef'](_0x169cf6),this['renderTarg'+'ets']['set'](_0x57d434,new gt({'colorBuffer':_0x169cf6,'depth':!(-0x13e9*-0x1+-0x1d98+0x9b0)}));}}}['prepareLig'+'htsToBake'](_0x434c6f,_0x3e2ddd){if(this['scene']['ambientBak'+'e']){const _0x334b88=new eg(this);_0x3e2ddd['push'](_0x334b88);}const _0x2468fd=this['renderer']['lights'];for(let _0x427c40=-0x24f*-0xb+-0xd*0x269+0x5f0;_0x427c40<_0x2468fd['length'];_0x427c40++){const _0xc7287f=_0x2468fd[_0x427c40],_0x43d4e5=new vI(this,_0xc7287f);_0x434c6f['push'](_0x43d4e5),_0xc7287f['enabled']&&(_0xc7287f['mask']&fi)!==-0x19*0x123+0x1373+-0x11f*-0x8&&(_0xc7287f['mask']=fi|di|Ss,_0xc7287f['shadowUpda'+'teMode']=_0xc7287f['type']===ve?Fp:gr,_0x3e2ddd['push'](_0x43d4e5));}_0x3e2ddd['sort']();}['restoreLig'+'hts'](_0x3290a7){for(let _0x361c15=0x2421+0xb04*-0x2+0xe19*-0x1;_0x361c15<_0x3290a7['length'];_0x361c15++)_0x3290a7[_0x361c15]['restore']();}['setupScene'](){this['ambientLig'+'ht']['copy'](this['scene']['ambientLig'+'ht']),this['scene']['ambientBak'+'e']||this['scene']['ambientLig'+'ht']['set'](0x1035+-0x1*0xd0f+-0x193*0x2,0xdc3+0x2*-0xc20+0xa7d,-0x20e7*0x1+0x5*-0x51+-0x89f*-0x4),this['renderer']['setSceneCo'+'nstants'](),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Contrast')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Contrast']),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Brightness')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Brightness']);}['restoreSce'+'ne'](){this['scene']['ambientLig'+'ht']['copy'](this['ambientLig'+'ht']);}['computeNod'+'eBounds'](_0x27f77e){const _0x106988=new De();if(_0x27f77e['length']>0x218c+-0xe*-0x18e+-0xf*0x3b0){_0x106988['copy'](_0x27f77e[-0x1e00+0x1+0x449*0x7]['aabb']);for(let _0x2d784c=-0x410+0x2af+0x3*0x76;_0x2d784c<_0x27f77e['length'];_0x2d784c++)_0x106988['add'](_0x27f77e[_0x2d784c]['aabb']);}return _0x106988;}['computeNod'+'esBounds'](_0x3fdd55){for(let _0x53be40=-0x246b+-0x35b+0x3*0xd42;_0x53be40<_0x3fdd55['length'];_0x53be40++){const _0x195344=_0x3fdd55[_0x53be40]['meshInstan'+'ces'];_0x3fdd55[_0x53be40]['bounds']=this['computeNod'+'eBounds'](_0x195344);}}['computeBou'+'nds'](_0x3f482d){const _0x386be8=new De();for(let _0x2214af=0x7ee+-0x628+0x1*-0x1c6;_0x2214af<_0x3f482d['length'];_0x2214af++){_0x386be8['copy'](_0x3f482d[0x1*0xb93+-0x222d+-0x1*-0x169a]['aabb']);for(let _0x58d1e2=0x16fb+0x811+-0x1f0b*0x1;_0x58d1e2<_0x3f482d['length'];_0x58d1e2++)_0x386be8['add'](_0x3f482d[_0x58d1e2]['aabb']);}return _0x386be8;}['backupMate'+'rials'](_0x127120){for(let _0x487b62=0x3*-0x57d+-0xd57+0x1dce;_0x487b62<_0x127120['length'];_0x487b62++)this['materials'][_0x487b62]=_0x127120[_0x487b62]['material'];}['restoreMat'+'erials'](_0x139fca){for(let _0x475417=0xfe2+-0x2*0x105d+0x10d8;_0x475417<_0x139fca['length'];_0x475417++)_0x139fca[_0x475417]['material']=this['materials'][_0x475417];}['lightCamer'+'aPrepare'](_0x5705ad,_0x466fcf){const _0x39a55e=_0x466fcf['light'];let _0x5b2904;return _0x39a55e['type']===Ze&&(_0x5b2904=_0x39a55e['getRenderD'+'ata'](null,0x2125*-0x1+0x1*-0x3d6+0x24fb)['shadowCame'+'ra'],_0x5b2904['_node']['setPositio'+'n'](_0x39a55e['_node']['getPositio'+'n']()),_0x5b2904['_node']['setRotatio'+'n'](_0x39a55e['_node']['getRotatio'+'n']()),_0x5b2904['_node']['rotateLoca'+'l'](-(0x3*-0xc4b+-0x84f*-0x3+0xc4e),-0x64f+0xb*-0x1c1+-0x2*-0xccd,-0x1e3+-0x55a+-0x6d*-0x11),_0x5b2904['projection']=ni,_0x5b2904['nearClip']=_0x39a55e['attenuatio'+'nEnd']/(0x10a+-0x35*-0x44+-0xb36),_0x5b2904['farClip']=_0x39a55e['attenuatio'+'nEnd'],_0x5b2904['aspectRati'+'o']=0x1646+-0x6ad*0x4+0x46f,_0x5b2904['fov']=_0x39a55e['_outerCone'+'Angle']*(0xb23*0x2+0x1186*0x1+-0x27ca),this['renderer']['updateCame'+'raFrustum'](_0x5b2904)),_0x5b2904;}['lightCamer'+'aPrepareAn'+'dCull'](_0x35f219,_0xfca9c6,_0x59327b,_0x4e820d){const _0x59aaef=_0x35f219['light'];let _0x9d7515=!(0xf13+0x1*-0x165f+0x74c);if(_0x59aaef['type']===ve){oc['copy'](_0x4e820d['center']),oc['y']+=_0x4e820d['halfExtent'+'s']['y'],this['camera']['node']['setPositio'+'n'](oc),this['camera']['node']['setEulerAn'+'gles'](-(0x226c+-0x3*-0x3b6+-0x2d34),-0x120c+0x1*0x85e+0x3b*0x2a,-0x1db3*-0x1+-0x6*0x3cc+-0x6eb),this['camera']['nearClip']=0x5d7+0x15bb*0x1+0x1*-0x1b92,this['camera']['farClip']=_0x4e820d['halfExtent'+'s']['y']*(-0x1261*0x2+-0x1276+0x373a);const _0x7070fe=Math['max'](_0x4e820d['halfExtent'+'s']['x'],_0x4e820d['halfExtent'+'s']['z']);this['camera']['orthoHeigh'+'t']=_0x7070fe;}else _0x35f219['lightBound'+'s']['intersects'](_0xfca9c6['bounds'])||(_0x9d7515=!(-0x1c5b*-0x1+0x773*0x1+-0x23cd));if(_0x59aaef['type']===Ze){let _0xb1ecf0=!(0x3e2+0x359*-0x9+0x1a40);const _0x3d55ea=_0xfca9c6['meshInstan'+'ces'];for(let _0x556b90=0x3*-0xcfe+0x482+0x2278;_0x556b90<_0x3d55ea['length'];_0x556b90++)if(_0x3d55ea[_0x556b90]['_isVisible'](_0x59327b)){_0xb1ecf0=!(0x6*-0x170+-0x17a*-0x11+-0x107a);break;}_0xb1ecf0||(_0x9d7515=!(-0x3d*0x55+-0x123*0x1b+0x32f3*0x1));}return _0x9d7515;}['setupLight'+'Array'](_0x6beffc,_0x243871){_0x6beffc[ve]['length']=0x1*-0x664+0x27*-0x85+0x1aa7,_0x6beffc[Ke]['length']=0x21*0x2+0x3*-0x389+0xa59,_0x6beffc[Ze]['length']=-0x26db+-0xf17*-0x1+0x75*0x34,_0x6beffc[_0x243871['type']][0x5*0x4ab+-0x883+-0x2*0x76a]=_0x243871,_0x243871['visibleThi'+'sFrame']=!(-0x1b*0x167+-0xb*-0x7b+-0x2b7*-0xc);}['renderShad'+'owMap'](_0x14a268,_0x22d174,_0x3f85fc,_0x1f0358){const _0x407561=_0x1f0358['light'],_0x45464b=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x457afd=_0x407561['castShadow'+'s']&&(!_0x45464b||this['scene']['lighting']['shadowsEna'+'bled']);if(!_0x22d174&&_0x457afd){if(!_0x407561['shadowMap']&&!_0x45464b&&(_0x407561['shadowMap']=this['shadowMapC'+'ache']['get'](this['device'],_0x407561)),_0x407561['type']===ve){this['renderer']['_shadowRen'+'dererDirec'+'tional']['cull'](_0x407561,_0x14a268,this['camera'],_0x3f85fc);const _0x2a3f84=this['renderer']['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x407561,this['camera']);_0x2a3f84==null||_0x2a3f84['render']();}else{if(this['device']['isWebGPU'])return w['warnOnce']('Lightmappe'+'r\x20on\x20WebGP'+'U\x20does\x20not'+'\x20yet\x20suppo'+'rt\x20spot\x20an'+'d\x20omni\x20sha'+'dows.'),!(-0xfad*-0x2+0x555+-0x24af);this['renderer']['_shadowRen'+'dererLocal']['cull'](_0x407561,_0x14a268,_0x3f85fc),this['renderer']['shadowRend'+'erer']['render'](_0x407561,this['camera'],!(-0xfc6+0x3*0x7a5+-0x728));}}return!(0xe4+0x1*0x166f+-0x1753);}['postproces'+'sTextures'](_0xb1cce7,_0xf26542,_0xc0e5b6){const _0x5393f5=this['lightmapFi'+'lters']['getDilate'](_0xb1cce7,this['bakeHDR']);let _0x298bc8;const _0x17b979=this['scene']['lightmapFi'+'lterEnable'+'d'];_0x17b979&&(this['lightmapFi'+'lters']['prepareDen'+'oise'](this['scene']['lightmapFi'+'lterRange'],this['scene']['lightmapFi'+'lterSmooth'+'ness'],this['bakeHDR']),_0x298bc8=this['lightmapFi'+'lters']['getDenoise'](this['bakeHDR'])),_0xb1cce7['setBlendSt'+'ate'](pt['NOBLEND']),_0xb1cce7['setDepthSt'+'ate'](Yt['NODEPTH']),_0xb1cce7['setStencil'+'State'](null,null);for(let _0x27f3dd=-0x1945*0x1+0x1fcd*-0x1+0x3912;_0x27f3dd<_0xf26542['length'];_0x27f3dd++){const _0x43d778=_0xf26542[_0x27f3dd];Q['pushGpuMar'+'ker'](this['device'],'LMPost:'+_0x27f3dd);for(let _0x2e94fc=0x1*0x179d+0x67*-0x56+0xafd*0x1;_0x2e94fc<_0xc0e5b6;_0x2e94fc++){const _0x5030f6=_0x43d778['renderTarg'+'ets'][_0x2e94fc],_0x5a5cbf=_0x5030f6['colorBuffe'+'r'],_0x3386dc=this['renderTarg'+'ets']['get'](_0x5a5cbf['width']),_0x17cf62=_0x3386dc['colorBuffe'+'r'];this['lightmapFi'+'lters']['prepare'](_0x5a5cbf['width'],_0x5a5cbf['height']);for(let _0x424ffe=-0xc64+0x1466+0x32*-0x29;_0x424ffe<0x2*0x12f8+-0x1991+-0xc5e;_0x424ffe++)this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x5a5cbf),Tr(_0xb1cce7,_0x3386dc,_0x17b979&&_0x2e94fc===0x1*0x22ef+-0x4*0x4+-0x22df*0x1&&_0x424ffe===-0x1e61+0x975+0x14ec?_0x298bc8:_0x5393f5),this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x17cf62),Tr(_0xb1cce7,_0x5030f6,_0x5393f5);}Q['popGpuMark'+'er'](this['device']);}}['bakeIntern'+'al'](_0x224629,_0x36ce72,_0x1b907f){const _0x362348=this['scene'],_0x56baf2=_0x362348['layers'],_0x1d4ac8=this['device'],_0x4e8311=_0x362348['clusteredL'+'ightingEna'+'bled'];this['createMate'+'rials'](_0x1d4ac8,_0x362348,_0x224629),this['setupScene'](),_0x56baf2['_update'](),this['computeNod'+'esBounds'](_0x36ce72),this['allocateTe'+'xtures'](_0x36ce72,_0x224629),this['renderer']['collectLig'+'hts'](_0x56baf2);const _0xfd4fd2=[],_0x3aa6aa=[];this['prepareLig'+'htsToBake'](_0xfd4fd2,_0x3aa6aa),this['updateTran'+'sforms'](_0x1b907f);const _0x3ce063=this['prepareSha'+'dowCasters'](_0x1b907f);this['renderer']['updateCpuS'+'kinMatrice'+'s'](_0x3ce063),this['renderer']['gpuUpdate'](_0x3ce063);const _0x52d51d=this['computeBou'+'nds'](_0x3ce063);let _0x34424b,_0x3f0f22,_0x79fc28,_0xb96deb;for(_0x34424b=0x110f*-0x2+-0x1eaf+0x40cd;_0x34424b<_0x36ce72['length'];_0x34424b++)for(_0x79fc28=_0x36ce72[_0x34424b]['meshInstan'+'ces'],_0x3f0f22=-0x7*0x355+-0x1f*-0x82+0x3*0x287;_0x3f0f22<_0x79fc28['length'];_0x3f0f22++)_0xb96deb=_0x79fc28[_0x3f0f22],_0xb96deb['setLightma'+'pped'](!(0x1126*0x2+-0x13be+0x5*-0x2e9)),_0xb96deb['mask']=fi,_0xb96deb['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][-0x500+-0x26c9*0x1+0xb*0x3fb],this['blackTex']),_0xb96deb['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][-0x17aa+-0x1*-0x533+0xc*0x18a],this['blackTex']);for(_0x3f0f22=0xd03*0x1+0x10*-0x84+0x35*-0x17;_0x3f0f22<_0x3aa6aa['length'];_0x3f0f22++)_0x3aa6aa[_0x3f0f22]['light']['enabled']=!(0x1553+-0x2*0x1297+-0x8c*-0x1d);const _0x3250d5=[[],[],[]];let _0x1aed21,_0x358453,_0x1ceafe=!(-0x59*-0x68+0x1*-0x268f+0x268);for(_0x34424b=0x7*-0x3e9+0xa43*0x1+0x111c;_0x34424b<_0x3aa6aa['length'];_0x34424b++){const _0x4c5fca=_0x3aa6aa[_0x34424b],_0x314947=_0x4c5fca instanceof eg,_0x591a20=_0x4c5fca['light']['type']===ve;let _0x18a1a1=_0x4c5fca['numVirtual'+'Lights'];_0x224629>-0xb9*0x1d+-0x1cd9+0x31cf&&_0x18a1a1>0x7ef*-0x3+-0xf9+-0x18c7*-0x1&&_0x4c5fca['light']['bakeDir']&&(_0x18a1a1=0x2046+-0x52b+-0x1b1a,w['warn']('Lightmappe'+'r\x27s\x20BAKE_C'+'OLORDIR\x20mo'+'de\x20is\x20not\x20'+'compatible'+'\x20with\x20Ligh'+'t\x27s\x20bakeNu'+'mSamples\x20l'+'arger\x20than'+'\x20one.\x20Forc'+'ing\x20it\x20to\x20'+'one.'));for(let _0x30691a=0x1b09+-0x4af*-0x1+0x1*-0x1fb8;_0x30691a<_0x18a1a1;_0x30691a++){Q['pushGpuMar'+'ker'](_0x1d4ac8,'Light:'+_0x4c5fca['light']['_node']['name']+':'+_0x30691a),_0x18a1a1>-0x47c+-0x1a50+0x1ecd&&_0x4c5fca['prepareVir'+'tualLight'](_0x30691a,_0x18a1a1),_0x4c5fca['startBake']();let _0x40e1c5=!(-0x1a3c+-0xb2+0x23*0xc5);const _0x47a34d=this['lightCamer'+'aPrepare'](_0x1d4ac8,_0x4c5fca);for(_0x358453=-0x1815+-0x1efe+0x1*0x3713;_0x358453<_0x36ce72['length'];_0x358453++){const _0x347292=_0x36ce72[_0x358453];if(_0x79fc28=_0x347292['meshInstan'+'ces'],!this['lightCamer'+'aPrepareAn'+'dCull'](_0x4c5fca,_0x347292,_0x47a34d,_0x52d51d))continue;this['setupLight'+'Array'](_0x3250d5,_0x4c5fca['light']);const _0x24f8fd=_0x591a20?[]:[_0x4c5fca['light']];for(_0x4e8311&&this['renderer']['lightTextu'+'reAtlas']['update'](_0x24f8fd,this['lightingPa'+'rams']),_0x40e1c5=this['renderShad'+'owMap'](_0x56baf2,_0x40e1c5,_0x3ce063,_0x4c5fca),_0x4e8311&&this['worldClust'+'ers']['update'](_0x24f8fd,this['lightingPa'+'rams']),this['backupMate'+'rials'](_0x79fc28),_0x1aed21=0x697*0x1+-0x1*-0xbb9+-0x1250;_0x1aed21<_0x224629&&!(_0x1aed21>-0x43e*-0x3+-0x197*-0xe+-0x4*0x8bf&&_0x30691a>-0x56+0x10c5+-0x106f||_0x314947&&_0x1aed21>0x7fe+0x23d0+-0x2bce*0x1);_0x1aed21++){Q['pushGpuMar'+'ker'](_0x1d4ac8,'LMPass:'+_0x1aed21);const _0xc4e419=_0x347292['renderTarg'+'ets'][_0x1aed21],_0x471add=_0x347292['renderTarg'+'ets'][_0x1aed21]['colorBuffe'+'r']['width'],_0x2fdfe7=this['renderTarg'+'ets']['get'](_0x471add),_0x27ceee=_0x2fdfe7['colorBuffe'+'r'];_0x1aed21===0x1215+0x44*0x6+-0x13ad?_0x1ceafe=_0x362348['updateShad'+'ers']:_0x1ceafe&&(_0x362348['updateShad'+'ers']=!(0x1e41*-0x1+-0x1*0x247f+0x30*0x164));let _0x2a4a34=this['passMateri'+'als'][_0x1aed21];for(_0x314947&&_0x30691a+(0x1*-0x37a+-0x59*-0x19+-0x29b*0x2)===_0x18a1a1&&_0x1aed21===-0x2414*-0x1+0x2002+-0x4416&&(_0x2a4a34=this['ambientAOM'+'aterial']),_0x3f0f22=-0x1*0xf6+-0x11ae+0x12a4;_0x3f0f22<_0x79fc28['length'];_0x3f0f22++)_0x79fc28[_0x3f0f22]['material']=_0x2a4a34;if(this['renderer']['updateShad'+'ers'](_0x79fc28),_0x1aed21===II&&this['constantBa'+'keDir']['setValue'](_0x4c5fca['light']['bakeDir']?0x1*0x1703+-0xa*0x96+-0x1126:-0x1759+-0xe*-0x11e+0x7b5*0x1),_0x1d4ac8['isWebGPU']){const _0x228791=new PI(_0x1d4ac8,this['renderer'],this['camera'],_0x4e8311?this['worldClust'+'ers']:null,_0x79fc28,_0x3250d5);_0x228791['init'](_0x2fdfe7),_0x228791['render'](),_0x228791['destroy']();}else this['renderer']['setCamera'](this['camera'],_0x2fdfe7,!(-0x23e6+0x5*-0x167+-0xa9*-0x41)),_0x4e8311&&this['worldClust'+'ers']['activate'](),this['renderer']['_forwardTi'+'me']=-0xa39+-0x2e5+0x2*0x68f,this['renderer']['_shadowMap'+'Time']=0x2267+-0x25*0xa2+-0xafd,this['renderer']['renderForw'+'ard'](this['camera'],_0x2fdfe7,_0x79fc28,_0x3250d5,xa),_0x1d4ac8['updateEnd']();for(this['stats']['shadowMapT'+'ime']+=this['renderer']['_shadowMap'+'Time'],this['stats']['forwardTim'+'e']+=this['renderer']['_forwardTi'+'me'],this['stats']['renderPass'+'es']++,_0x347292['renderTarg'+'ets'][_0x1aed21]=_0x2fdfe7,this['renderTarg'+'ets']['set'](_0x471add,_0xc4e419),_0x3f0f22=0x1*-0x14cf+0x13ea+0xe5;_0x3f0f22<_0x79fc28['length'];_0x3f0f22++)_0xb96deb=_0x79fc28[_0x3f0f22],_0xb96deb['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][_0x1aed21],_0x27ceee),_0xb96deb['_shaderDef'+'s']|=Ff;Q['popGpuMark'+'er'](_0x1d4ac8);}this['restoreMat'+'erials'](_0x79fc28);}_0x4c5fca['endBake'](this['shadowMapC'+'ache']),Q['popGpuMark'+'er'](_0x1d4ac8);}}for(this['postproces'+'sTextures'](_0x1d4ac8,_0x36ce72,_0x224629),_0x358453=0x208+0x4*-0x608+0x1618;_0x358453<_0x1b907f['length'];_0x358453++)_0x1b907f[_0x358453]['restore']();this['restoreLig'+'hts'](_0xfd4fd2),this['restoreSce'+'ne'](),_0x4e8311||this['shadowMapC'+'ache']['clear']();}}const Th=class Th extends me{constructor(_0x2e9c14,_0x27457f){super(),h(this,'system'),h(this,'entity'),(this['system']=_0x2e9c14,this['entity']=_0x27457f,this['system']['schema']&&!this['_accessors'+'Built']&&this['buildAcces'+'sors'](this['system']['schema']),this['on']('set',function(_0x38af40,_0x39db8f,_0x1c6199){this['fire']('set_'+_0x38af40,_0x38af40,_0x39db8f,_0x1c6199);}),this['on']('set_enable'+'d',this['onSetEnabl'+'ed'],this));}static['_buildAcce'+'ssors'](_0x58255a,_0x20303d){_0x20303d['forEach'](_0xf93d3a=>{const _0x22cd86=typeof _0xf93d3a=='object'?_0xf93d3a['name']:_0xf93d3a;Object['defineProp'+'erty'](_0x58255a,_0x22cd86,{'get':function(){return this['data'][_0x22cd86];},'set':function(_0x15af57){const _0x374089=this['data'],_0x7853f6=_0x374089[_0x22cd86];_0x374089[_0x22cd86]=_0x15af57,this['fire']('set',_0x22cd86,_0x7853f6,_0x15af57);},'configurable':!(0x255c+0x1d3a+-0x4296)});}),_0x58255a['_accessors'+'Built']=!(-0x2706+-0x1d2d+0x53f*0xd);}['buildAcces'+'sors'](_0x48a103){Th['_buildAcce'+'ssors'](this,_0x48a103);}['onSetEnabl'+'ed'](_0x199c72,_0x5e1587,_0x8cc8c7){_0x5e1587!==_0x8cc8c7&&this['entity']['enabled']&&(_0x8cc8c7?this['onEnable']():this['onDisable']());}['onEnable'](){}['onDisable'](){}['onPostStat'+'eChange'](){}get['data'](){const _0x5739cc=this['system']['store'][this['entity']['getGuid']()];return _0x5739cc?_0x5739cc['data']:null;}set['enabled'](_0x539d3b){}get['enabled'](){return!(0x2*-0x12b0+-0x1*-0x14a1+0x10bf);}};h(Th,'order',-0x7d2+0x16fa+-0xf28);let we=Th;class ct extends me{constructor(_0x1b449d){super(),this['app']=_0x1b449d,this['store']={},this['schema']=[];}['addCompone'+'nt'](_0x47fcbb,_0x17d2d2={}){const _0x2f373e=new this['ComponentT'+'ype'](this,_0x47fcbb),_0x52ea22=new this['DataType']();return this['store'][_0x47fcbb['getGuid']()]={'entity':_0x47fcbb,'data':_0x52ea22},_0x47fcbb[this['id']]=_0x2f373e,_0x47fcbb['c'][this['id']]=_0x2f373e,this['initialize'+'ComponentD'+'ata'](_0x2f373e,_0x17d2d2,[]),this['fire']('add',_0x47fcbb,_0x2f373e),_0x2f373e;}['removeComp'+'onent'](_0x1f1028){const _0x58b3ad=this['id'],_0x527f8d=this['store'][_0x1f1028['getGuid']()],_0x4084a0=_0x1f1028['c'][_0x58b3ad];_0x4084a0['fire']('beforeremo'+'ve'),this['fire']('beforeremo'+'ve',_0x1f1028,_0x4084a0),delete this['store'][_0x1f1028['getGuid']()],_0x1f1028[_0x58b3ad]=void(0xb6b+0x1*-0x237e+0x1813),delete _0x1f1028['c'][_0x58b3ad],this['fire']('remove',_0x1f1028,_0x527f8d['data']);}['cloneCompo'+'nent'](_0xc75401,_0x2579a4){const _0x40eddc=this['store'][_0xc75401['getGuid']()];return this['addCompone'+'nt'](_0x2579a4,_0x40eddc['data']);}['initialize'+'ComponentD'+'ata'](_0x50c084,_0x3ec92c={},_0x28a4ea){for(let _0x4e07c6=-0x1b62+0x319+0x1849,_0x590985=_0x28a4ea['length'];_0x4e07c6<_0x590985;_0x4e07c6++){const _0xdaf7d0=_0x28a4ea[_0x4e07c6];let _0x33151e,_0x46502a;typeof _0xdaf7d0=='object'?(_0x33151e=_0xdaf7d0['name'],_0x46502a=_0xdaf7d0['type']):(_0x33151e=_0xdaf7d0,_0x46502a=void(0x142b+-0xe9a*-0x1+-0x22c5));let _0x749785=_0x3ec92c[_0x33151e];_0x749785!==void(0x1d64+-0x2*-0x279+-0x2256)?(_0x46502a!==void(0x1*-0x1fd+-0x6ac+0x8a9)&&(_0x749785=RI(_0x749785,_0x46502a)),_0x50c084[_0x33151e]=_0x749785):_0x50c084[_0x33151e]=_0x50c084['data'][_0x33151e];}_0x50c084['enabled']&&_0x50c084['entity']['enabled']&&_0x50c084['onEnable']();}['getPropert'+'iesOfType'](_0x2aa464){const _0x158b42=[];return(this['schema']||[])['forEach'](_0x29f650=>{_0x29f650&&typeof _0x29f650=='object'&&_0x29f650['type']===_0x2aa464&&_0x158b42['push'](_0x29f650);}),_0x158b42;}['destroy'](){this['off']();}}function RI(_0x3f1578,_0x2a3335){if(!_0x3f1578)return _0x3f1578;switch(_0x2a3335){case'rgb':return _0x3f1578 instanceof ie?_0x3f1578['clone']():new ie(_0x3f1578[-0x15d9+0x18d8+-0x2ff],_0x3f1578[-0x2*-0xbc0+0x1*-0x130a+0x475*-0x1],_0x3f1578[-0x683*-0x5+0x1*0x1eb2+0x15*-0x303]);case'rgba':return _0x3f1578 instanceof ie?_0x3f1578['clone']():new ie(_0x3f1578[0x44b*0x7+0x89*0x45+-0x42fa],_0x3f1578[-0xa4f*0x3+0x24fe+0x2*-0x308],_0x3f1578[0x1108+-0x417+-0xcef],_0x3f1578[0x15a1*0x1+0x16c9*-0x1+0x12b]);case'vec2':return _0x3f1578 instanceof J?_0x3f1578['clone']():new J(_0x3f1578[0xaf9+-0x858+-0x2a1],_0x3f1578[-0x1e04+0x51*-0x23+0x4*0xa46]);case'vec3':return _0x3f1578 instanceof D?_0x3f1578['clone']():new D(_0x3f1578[0x211e+-0x268f+-0x1*-0x571],_0x3f1578[0x1*-0x25e5+-0x3f*0x3b+0x346b],_0x3f1578[0x182f+-0x19dd+-0x2*-0xd8]);case'vec4':return _0x3f1578 instanceof re?_0x3f1578['clone']():new re(_0x3f1578[0x3b*-0x3b+-0x1*0xa31+0x17ca],_0x3f1578[0x1*-0x1a7b+-0x378+0x1df4],_0x3f1578[-0x286*0x1+0xd4d+-0x1*0xac5],_0x3f1578[-0x1*0x1e73+-0x1ade+0x3954]);case'boolean':case'number':case'string':return _0x3f1578;case'entity':return _0x3f1578;default:throw new Error('Could\x20not\x20'+'convert\x20un'+'handled\x20ty'+'pe:\x20'+_0x2a3335);}}const iv=0x5*0x346+-0x10*0x1f0+0xea2,Xf=-0x71d+0x1*0x60a+0x114,qf=0x2*-0x87d+-0x1998+-0x4*-0xaa5;class OI{constructor(){this['_left']=(-0x22d7+-0x2007+0x42df)/(-0x959*0x3+0xa7b+0x1190),this['_right']=-(0x12a1+0x11e4+-0x2484)/(0x1*-0x22ca+-0x1251+0x351b),this['_len']=0x1*-0x10b6+0xc10+-0x253*-0x2,this['_recip']=0x43*0x7b+0xe*0xf1+-0x2d5f*0x1,this['_p0']=0x1*-0xa51+0x1e44+-0x13f3,this['_p1']=0x16b9+-0xd86+-0x933,this['_t']=0x609+-0x1141*0x1+0x1*0xb38,this['_hermite']={'valid':!(0x22+-0x846+0x825),'p0':0x0,'m0':0x0,'p1':0x0,'m1':0x0};}['update'](_0x42d2ca,_0x5bd75f){if(_0x42d2ca<this['_left']||_0x42d2ca>=this['_right']){const _0x2facb0=_0x5bd75f['length'];if(!_0x2facb0)this['_left']=-(0x2e2*-0x1+-0x3a*0x96+-0x24df*-0x1)/(-0x1285+0xbad+0x36c*0x2),this['_right']=(-0x2*0x542+-0x85*-0x1d+-0xc*0x61)/(-0x9f5+-0x5*0x450+0x1f85),this['_len']=-0x1179+0x10cb+0xae,this['_recip']=-0x9f9+0xe41+0x112*-0x4,this['_p0']=this['_p1']=-0xc6a+0xd07+-0x9d;else{if(_0x42d2ca<_0x5bd75f[-0x15d3+-0x46f*0x1+0x1a42])this['_left']=-(0xb7a*0x1+-0x1*-0x12d1+-0x1e4a)/(-0x35f*-0x5+0x1a9b+-0x2b76),this['_right']=_0x5bd75f[-0x3*-0x1e1+0x1a71*-0x1+0x14ce],this['_len']=0xa3f*-0x2+0xc46+0x838,this['_recip']=-0x6d+0x89b*0x4+0xb55*-0x3,this['_p0']=this['_p1']=0x1*-0x1352+0x178c+0x2*-0x21d;else{if(_0x42d2ca>=_0x5bd75f[_0x2facb0-(-0x1*0x667+0x124b+-0xbe3)])this['_left']=_0x5bd75f[_0x2facb0-(0x11*-0x11+0x1a*0xb7+-0x1174)],this['_right']=(-0x20ab*0x1+-0xdf*-0x27+-0x14d)/(-0x19d*0xe+0x1dd7+-0x3*0x26b),this['_len']=-0xa*-0x17+-0x2*0x7d3+0xec0,this['_recip']=0x2*0x8d4+-0x4f5+-0xcb3*0x1,this['_p0']=this['_p1']=_0x2facb0-(0x2*-0xc13+-0xf23+0x5e*0x6b);else{const _0x207c39=this['_findKey'](_0x42d2ca,_0x5bd75f);this['_left']=_0x5bd75f[_0x207c39],this['_right']=_0x5bd75f[_0x207c39+(-0x1046+-0x7b*-0x1+-0x3*-0x544)],this['_len']=this['_right']-this['_left'];const _0x124630=(-0x1172+-0x3*-0x8f3+-0x966)/this['_len'];this['_recip']=isFinite(_0x124630)?_0x124630:0x3bb*0x2+0x349+-0xabf,this['_p0']=_0x207c39,this['_p1']=_0x207c39+(-0x2423+-0x3f*0x99+0x49cb);}}}}this['_t']=this['_recip']===-0x52*0x59+0x334+0x194e?0x1d7a+-0x15b4+0x7c6*-0x1:(_0x42d2ca-this['_left'])*this['_recip'],this['_hermite']['valid']=!(0xf28+-0x1343+0x2*0x20e);}['_findKey'](_0x57742f,_0x5ee591){let _0x49984f=-0x2195+0x1356+0xe3f;for(;_0x57742f>=_0x5ee591[_0x49984f+(0x1*0x678+0x107+-0x77e)];)_0x49984f++;return _0x49984f;}['eval'](_0x52d2cb,_0x449da0,_0x2cb8bf){const _0x119cdb=_0x2cb8bf['_data'],_0x109066=_0x2cb8bf['_component'+'s'],_0x50c347=this['_p0']*_0x109066;if(_0x449da0===iv){for(let _0x27cec4=0x1*-0x1a7d+-0x1*-0x1a49+0x34;_0x27cec4<_0x109066;++_0x27cec4)_0x52d2cb[_0x27cec4]=_0x119cdb[_0x50c347+_0x27cec4];}else{const _0x15b5f3=this['_t'],_0x574883=this['_p1']*_0x109066;switch(_0x449da0){case Xf:for(let _0x479fb5=0xd9f+-0x40*-0x13+0x125f*-0x1;_0x479fb5<_0x109066;++_0x479fb5)_0x52d2cb[_0x479fb5]=Y['lerp'](_0x119cdb[_0x50c347+_0x479fb5],_0x119cdb[_0x574883+_0x479fb5],_0x15b5f3);break;case qf:{const _0x2d0287=this['_hermite'];if(!_0x2d0287['valid']){const _0x2a849c=_0x15b5f3*_0x15b5f3,_0x42ffc3=_0x15b5f3+_0x15b5f3,_0x51e8ab=-0x1844+-0x1948+0x318d-_0x15b5f3,_0x4d0a93=_0x51e8ab*_0x51e8ab;_0x2d0287['valid']=!(0x19*0x12f+-0x1a*-0x137+-0x3d2d),_0x2d0287['p0']=(0x2333+0x161*0x19+-0x45ab+_0x42ffc3)*_0x4d0a93,_0x2d0287['m0']=_0x15b5f3*_0x4d0a93,_0x2d0287['p1']=_0x2a849c*(0x16f2+-0xa8c+-0xc63-_0x42ffc3),_0x2d0287['m1']=_0x2a849c*(_0x15b5f3-(-0x24e0+0x4dc+0x2005));}const _0x24bc14=(this['_p0']*(-0x7*-0x29b+0x237f+0x329*-0x11)+(-0x616+-0x6f*0x3+0x3b2*0x2))*_0x109066,_0x4f3d3b=(this['_p0']*(0x2576+-0x1*-0x21e9+-0x475c)+(0x10cb+-0x2139+-0x107*-0x10))*_0x109066,_0x45f629=(this['_p1']*(-0x4cd*0x7+0x1*0xdfd+0x4b*0x43)+(0x6*-0x56b+0x4b7*0x5+0x8f0))*_0x109066,_0x53111e=(this['_p1']*(0x2352+0x1*0x16a1+-0x39f0)+(-0x1*0x1a46+-0x501*0x7+0x3d4d))*_0x109066;for(let _0x5a5050=0x195f+0x12a2+-0x2ef*0xf;_0x5a5050<_0x109066;++_0x5a5050)_0x52d2cb[_0x5a5050]=_0x2d0287['p0']*_0x119cdb[_0x24bc14+_0x5a5050]+_0x2d0287['m0']*_0x119cdb[_0x4f3d3b+_0x5a5050]*this['_len']+_0x2d0287['p1']*_0x119cdb[_0x45f629+_0x5a5050]+_0x2d0287['m1']*_0x119cdb[_0x53111e+_0x5a5050]*this['_len'];break;}}}}}class sg{constructor(_0x19987e){this['_name']=_0x19987e['name']+'Snapshot',this['_time']=-(0x1*0xa59+0x4a3*-0x6+0x117a),this['_cache']=[],this['_results']=[];for(let _0x58aa9a=0x10c1+0xb*0x2bf+-0x2ef6;_0x58aa9a<_0x19987e['_inputs']['length'];++_0x58aa9a)this['_cache'][_0x58aa9a]=new OI();const _0x1648dc=_0x19987e['_curves'],_0x158871=_0x19987e['_outputs'];for(let _0x37d35d=0x62*-0x6+0x1a97+-0x184b;_0x37d35d<_0x1648dc['length'];++_0x37d35d){const _0x5de900=_0x1648dc[_0x37d35d],_0x1890b9=_0x158871[_0x5de900['_output']],_0x223c6f=[];for(let _0x2d0d23=-0x1*0x136+0x1336+0x9*-0x200;_0x2d0d23<_0x1890b9['_component'+'s'];++_0x2d0d23)_0x223c6f[_0x2d0d23]=-0x1*0x2f9+0x6d1*0x1+-0x3d8;this['_results'][_0x37d35d]=_0x223c6f;}}}const Oo=class Oo{constructor(_0xa00e65,_0x4fa208,_0x1a2e38,_0x1e651f,_0x4c6042,_0x22430a){this['_name']=_0xa00e65['name'],this['_track']=_0xa00e65,this['_snapshot']=new sg(_0xa00e65),this['_playing']=_0x1e651f,this['_time']=_0x4fa208,this['_speed']=_0x1a2e38,this['_loop']=_0x4c6042,this['_blendWeig'+'ht']=-0x8c7+-0x1485+-0x1d4d*-0x1,this['_blendOrde'+'r']=-0x148f+-0x801+0x1c90,this['_eventHand'+'ler']=_0x22430a,this['alignCurso'+'rToCurrent'+'Time']();}set['name'](_0x2be353){this['_name']=_0x2be353;}get['name'](){return this['_name'];}set['track'](_0x217af3){this['_track']=_0x217af3,this['_snapshot']=new sg(_0x217af3);}get['track'](){return this['_track'];}get['snapshot'](){return this['_snapshot'];}set['time'](_0x1bf817){this['_time']=_0x1bf817,this['alignCurso'+'rToCurrent'+'Time']();}get['time'](){return this['_time'];}set['speed'](_0x4cff53){const _0x3fe9f2=Math['sign'](_0x4cff53)!==Math['sign'](this['_speed']);this['_speed']=_0x4cff53,_0x3fe9f2&&this['alignCurso'+'rToCurrent'+'Time']();}get['speed'](){return this['_speed'];}set['loop'](_0x567f31){this['_loop']=_0x567f31;}get['loop'](){return this['_loop'];}set['blendWeigh'+'t'](_0x5e61e9){this['_blendWeig'+'ht']=_0x5e61e9;}get['blendWeigh'+'t'](){return this['_blendWeig'+'ht'];}set['blendOrder'](_0x152961){this['_blendOrde'+'r']=_0x152961;}get['blendOrder'](){return this['_blendOrde'+'r'];}set['eventCurso'+'r'](_0x50caf3){this['_eventCurs'+'or']=_0x50caf3;}get['eventCurso'+'r'](){return this['_eventCurs'+'or'];}get['eventCurso'+'rEnd'](){return this['isReverse']?-0x1*0x85b+0x1e68+-0x160d:this['_track']['events']['length']-(-0x11b4+-0x112f*-0x1+0x86);}get['nextEvent'](){return this['_track']['events'][this['_eventCurs'+'or']];}get['isReverse'](){return this['_speed']<0x17e4*0x1+0x195f*-0x1+-0x1*-0x17b;}['nextEventA'+'headOfTime'](_0x49407e){return this['nextEvent']?this['isReverse']?this['nextEvent']['time']<=_0x49407e:this['nextEvent']['time']>=_0x49407e:!(0x481*0x2+0xe*-0x19d+0xd95);}['nextEventB'+'ehindTime'](_0x3183f4){return this['nextEvent']?_0x3183f4===this['track']['duration']?this['isReverse']?this['nextEvent']['time']>=_0x3183f4:this['nextEvent']['time']<=_0x3183f4:this['isReverse']?this['nextEvent']['time']>_0x3183f4:this['nextEvent']['time']<_0x3183f4:!(-0x2285*0x1+-0x2523+-0xe55*-0x5);}['resetEvent'+'Cursor'](){this['_eventCurs'+'or']=this['isReverse']?this['_track']['events']['length']-(-0x1*-0x4f9+-0x6*0xa0+-0x138):0x24af+-0x1044+-0x146b;}['moveEventC'+'ursor'](){this['_eventCurs'+'or']+=this['isReverse']?-(0x4e5*0x1+0x1001*0x1+-0x14e5):-0x126e+0x1c6b*-0x1+0xf9e*0x3,this['_eventCurs'+'or']>=this['track']['events']['length']?this['_eventCurs'+'or']=-0x35*-0x8d+0x18d2+0xb*-0x4e9:this['_eventCurs'+'or']<0x1418+-0x47f*-0x3+0x1*-0x2195&&(this['_eventCurs'+'or']=this['track']['events']['length']-(0x13e6+0xd*0x2dd+-0x391e));}['clipFrameT'+'ime'](_0x3a3a05){const _0x14beb7=Oo['eventFrame'];_0x14beb7['start']=0x103c+-0x101e+0x1*-0x1e,_0x14beb7['end']=_0x3a3a05,_0x14beb7['residual']=-0x1d2*0x1+0x14dd+-0x130b,this['isReverse']?_0x3a3a05<-0x1*-0x2593+0x201d*-0x1+-0x576&&(_0x14beb7['start']=this['track']['duration'],_0x14beb7['end']=0x36d*0x7+-0x3e*0xd+0x1*-0x14d5,_0x14beb7['residual']=_0x3a3a05+this['track']['duration']):_0x3a3a05>this['track']['duration']&&(_0x14beb7['start']=0xa6f*0x1+-0x13c4+0x955,_0x14beb7['end']=this['track']['duration'],_0x14beb7['residual']=_0x3a3a05-this['track']['duration']);}['alignCurso'+'rToCurrent'+'Time'](){for(this['resetEvent'+'Cursor']();this['nextEventB'+'ehindTime'](this['_time'])&&this['_eventCurs'+'or']!==this['eventCurso'+'rEnd'];)this['moveEventC'+'ursor']();}['fireNextEv'+'ent'](){this['_eventHand'+'ler']['fire'](this['nextEvent']['name'],{'track':this['track'],...this['nextEvent']}),this['moveEventC'+'ursor']();}['fireNextEv'+'entInFrame'](_0x42723f,_0x1334fc){return this['nextEventA'+'headOfTime'](_0x42723f)&&this['nextEventB'+'ehindTime'](_0x1334fc)?(this['fireNextEv'+'ent'](),!(0x23*0x7f+-0x15f+-0xffe)):!(0x25c*0x4+0x4b+-0x9ba);}['activeEven'+'tsForFrame'](_0x41e1b2,_0x44f4fc){const _0x3ac91b=Oo['eventFrame'];this['clipFrameT'+'ime'](_0x44f4fc);const _0x16f48b=this['eventCurso'+'r'];for(;this['fireNextEv'+'entInFrame'](_0x41e1b2,_0x3ac91b['end'])&&_0x16f48b!==this['eventCurso'+'r'];);this['loop']&&Math['abs'](_0x3ac91b['residual'])>-0x2481+-0x1ea5+0x1662*0x3&&this['activeEven'+'tsForFrame'](_0x3ac91b['start'],_0x3ac91b['residual']);}['progressFo'+'rTime'](_0x14be67){return _0x14be67*this['_speed']/this['_track']['duration'];}['_update'](_0x441728){if(this['_playing']){let _0x56edb6=this['_time'];const _0x4e7946=this['_track']['duration'],_0x300f41=this['_speed'],_0x57f262=this['_loop'];this['_track']['events']['length']>0xff3+0x1a83*0x1+-0x87e*0x5&&_0x4e7946>0x9d*-0x3a+0x1a69*0x1+0x929&&this['activeEven'+'tsForFrame'](_0x56edb6,_0x56edb6+_0x300f41*_0x441728),_0x56edb6+=_0x300f41*_0x441728,_0x300f41>=-0xb75+0x3*-0x5a9+0x46*0x68?_0x56edb6>_0x4e7946&&(_0x57f262?_0x56edb6=_0x56edb6%_0x4e7946||-0x25*-0x71+0x2*-0x1010+0xd*0x137:(_0x56edb6=this['_track']['duration'],this['pause']())):_0x56edb6<-0x1*0x2bd+-0x2*0x7b5+0x1227*0x1&&(_0x57f262?_0x56edb6=_0x4e7946+(_0x56edb6%_0x4e7946||0x1006+-0x537+0xacf*-0x1):(_0x56edb6=0x1*0xd67+-0x1032+0x2cb,this['pause']())),this['_time']=_0x56edb6;}this['_time']!==this['_snapshot']['_time']&&this['_track']['eval'](this['_time'],this['_snapshot']);}['play'](){this['_playing']=!(0x1004+0x1af5+-0x2af9),this['_time']=-0x1cf9*-0x1+-0xb8b+-0x116e;}['stop'](){this['_playing']=!(-0xb29+-0x3a5*0x7+-0x24ad*-0x1),this['_time']=-0x1144+0x356+0xdee;}['pause'](){this['_playing']=!(0x2480+0xdcf+0x5e*-0x89);}['resume'](){this['_playing']=!(-0x96c+-0x236b+0x2cd7);}['reset'](){this['_time']=-0x268e+-0x4b6+-0x15a2*-0x2;}};h(Oo,'eventFrame',{'start':0x0,'end':0x0,'residual':0x0});let lh=Oo;const rv='NONE',FI='PREV_STATE',NI='NEXT_STATE',kI='PREV_STATE'+'_NEXT_STAT'+'E',UI='NEXT_STATE'+'_PREV_STAT'+'E',BI='GREATER_TH'+'AN',zI='LESS_THAN',VI='GREATER_TH'+'AN_EQUAL_T'+'O',GI='LESS_THAN_'+'EQUAL_TO',HI='EQUAL_TO',WI='NOT_EQUAL_'+'TO',ig='INTEGER',rg='FLOAT',ag='BOOLEAN',Dc='TRIGGER',$I='1D',XI='2D_DIRECTI'+'ONAL',qI='2D_CARTESI'+'AN',jI='DIRECT',_o='START',jf='END',Hr='ANY',ch=[_o,jf,Hr],av='OVERWRITE',YI='ADDITIVE';class Ht{static['dot'](_0x593bce,_0x13d18c){const _0x269a1c=_0x593bce['length'];let _0x24baa7=0x251*0xb+0x1*-0x1983+0x8;for(let _0x35a211=0x23a3+-0x36*-0x8b+-0x40f5;_0x35a211<_0x269a1c;++_0x35a211)_0x24baa7+=_0x593bce[_0x35a211]*_0x13d18c[_0x35a211];return _0x24baa7;}static['normalize'](_0x33529d){let _0x157c78=Ht['dot'](_0x33529d,_0x33529d);if(_0x157c78>-0xd50+-0x164+0xeb4){_0x157c78=(-0x1946*0x1+0x19bf+-0x8*0xf)/Math['sqrt'](_0x157c78);const _0x625b67=_0x33529d['length'];for(let _0x1ad211=-0x6a*-0x14+-0x4a6+-0x5*0xba;_0x1ad211<_0x625b67;++_0x1ad211)_0x33529d[_0x1ad211]*=_0x157c78;}}static['set'](_0x3324b7,_0xd111df,_0x1ce0ab){const _0x220716=_0x3324b7['length'];if(_0x1ce0ab==='quaternion'){let _0x4585ff=Ht['dot'](_0xd111df,_0xd111df);_0x4585ff>-0x32d*0x7+0x7dd+0x2*0x72f&&(_0x4585ff=(0x143a+0x1afc+-0x2f35)/Math['sqrt'](_0x4585ff));for(let _0x5ce90a=-0x377*0x1+-0x98f*-0x3+-0x1cd*0xe;_0x5ce90a<_0x220716;++_0x5ce90a)_0x3324b7[_0x5ce90a]=_0xd111df[_0x5ce90a]*_0x4585ff;}else{for(let _0x3a6137=-0x1a*0x5+-0x261f+-0x1f*-0x13f;_0x3a6137<_0x220716;++_0x3a6137)_0x3324b7[_0x3a6137]=_0xd111df[_0x3a6137];}}static['blendVec'](_0x14a913,_0x512314,_0x5e7a9f,_0x246c6a){const _0x55bd15=_0x246c6a?-0x1f62+0x97f+0x15e4:0xc07+-0x1773+0x41*0x2d-_0x5e7a9f,_0x9c2762=_0x14a913['length'];for(let _0x551c00=0x4*0x932+0x2*-0x97+-0x6*0x5ef;_0x551c00<_0x9c2762;++_0x551c00)_0x14a913[_0x551c00]=_0x14a913[_0x551c00]*_0x55bd15+_0x512314[_0x551c00]*_0x5e7a9f;}static['blendQuat'](_0x2fa2d0,_0x5c7df8,_0x43fd8c,_0x40d754){const _0x48406e=_0x2fa2d0['length'],_0x4546b2=_0x40d754?0x17f*0x1+-0xfcf+-0xe51*-0x1:0x3cb+-0x1*-0x691+-0xa5b-_0x43fd8c;Ht['dot'](_0x2fa2d0,_0x5c7df8)<0x14bd+0x1*0x2655+-0x2*0x1d89&&(_0x43fd8c=-_0x43fd8c);for(let _0x4e7e4b=-0x34c*-0x4+-0x136e+-0x11*-0x5e;_0x4e7e4b<_0x48406e;++_0x4e7e4b)_0x2fa2d0[_0x4e7e4b]=_0x2fa2d0[_0x4e7e4b]*_0x4546b2+_0x5c7df8[_0x4e7e4b]*_0x43fd8c;_0x40d754||Ht['normalize'](_0x2fa2d0);}static['blend'](_0xf1b1be,_0x1f8c21,_0x641347,_0x39f3cb,_0x22dfd4){_0x39f3cb==='quaternion'?Ht['blendQuat'](_0xf1b1be,_0x1f8c21,_0x641347,_0x22dfd4):Ht['blendVec'](_0xf1b1be,_0x1f8c21,_0x641347,_0x22dfd4);}static['stableSort'](_0x1db09e,_0x390034){const _0x3fe301=_0x1db09e['length'];for(let _0x2b307e=0xb8a+-0x1*-0x169d+0x1*-0x2227;_0x2b307e<_0x3fe301-(-0x130*-0x19+-0x24c2+-0x1*-0x713);++_0x2b307e)for(let _0x134220=_0x2b307e+(-0x1a2b+0x2*0x129a+-0xb08);_0x134220<_0x3fe301;++_0x134220)if(_0x390034(_0x1db09e[_0x134220],_0x1db09e[_0x2b307e])){const _0x3cb0db=_0x1db09e[_0x2b307e];_0x1db09e[_0x2b307e]=_0x1db09e[_0x134220],_0x1db09e[_0x134220]=_0x3cb0db;}}}const st=class st{constructor(_0x4cfbad,_0x5ddd4e){this['_component']=_0x4cfbad,this['mask']=new Int8Array(_0x4cfbad['layers']['length']),this['weights']=new Float32Array(_0x4cfbad['layers']['length']),this['totalWeigh'+'t']=-0x1d6b+-0x1*0x10c7+0x2e32,this['counter']=0x170e+-0x1*0x166f+-0x1*0x9f,this['layerCount'+'er']=-0x1dd2*-0x1+0xb40+-0x2912,this['valueType']=_0x5ddd4e,this['dirty']=!(-0x1dde+-0x15cf*-0x1+0x80f*0x1),this['value']=_0x5ddd4e===st['TYPE_QUAT']?[0x19f6+-0x2407+0xa11,-0x1603+-0x1bb5+0x31b8,-0x2437+-0x13b8+0x37ef,-0x1acf*-0x1+0x22e5*0x1+0x1491*-0x3]:[0x2424+-0x2438+0x14,-0x1316+-0x2485+-0x49*-0xc3,0x2011+-0x723+-0x18ee],this['baseValue']=null,this['setter']=null;}get['_normalize'+'Weights'](){return this['_component']['normalizeW'+'eights'];}['getWeight'](_0x5867d7){return this['dirty']&&this['updateWeig'+'hts'](),this['_normalize'+'Weights']&&this['totalWeigh'+'t']===-0xb*-0x1+0x86*-0x5+0x1*0x293||!this['mask'][_0x5867d7]?0x1bd6+-0x45*-0x51+-0x31ab:this['_normalize'+'Weights']?this['weights'][_0x5867d7]/this['totalWeigh'+'t']:Y['clamp'](this['weights'][_0x5867d7],0x7*-0x10c+-0x4*-0x79+-0x1*-0x570,0x1*-0x155+0x1*0x59f+-0x449*0x1);}['_layerBlen'+'dType'](_0x5e353f){return this['_component']['layers'][_0x5e353f]['blendType'];}['setMask'](_0x334015,_0x27e034){this['mask'][_0x334015]=_0x27e034,this['_normalize'+'Weights']&&(this['_component']['layers'][_0x334015]['blendType']===av&&(this['mask']=this['mask']['fill'](-0x18b3+0x1*0xd32+0x24d*0x5,0x7f5+0x216c+-0x2961,_0x334015)),this['dirty']=!(-0x1553+-0x201a+-0x3*-0x11cf));}['updateWeig'+'hts'](){this['totalWeigh'+'t']=0x139+-0xac6+0x3*0x32f;for(let _0x5ce09d=-0x169b+-0x1cf*-0x2+0x12fd;_0x5ce09d<this['weights']['length'];_0x5ce09d++)this['weights'][_0x5ce09d]=this['_component']['layers'][_0x5ce09d]['weight'],this['totalWeigh'+'t']+=this['mask'][_0x5ce09d]*this['weights'][_0x5ce09d];this['dirty']=!(-0x649+0x4*-0x5ea+0x1df2);}['updateValu'+'e'](_0x107085,_0x1d3fe9){if(this['counter']===-0x203d+-0xc87*-0x1+0x13b6&&(Ht['set'](this['value'],st['IDENTITY_Q'+'UAT_ARR'],this['valueType']),this['_normalize'+'Weights']||Ht['blend'](this['value'],this['baseValue'],-0x2*0x4a2+-0x694+-0x1*-0xfd9,this['valueType'])),!(!this['mask'][_0x107085]||this['getWeight'](_0x107085)===0x5b6*0x6+0x1a45+-0x1*0x3c89)){if(this['_layerBlen'+'dType'](_0x107085)===YI&&!this['_normalize'+'Weights']){if(this['valueType']===st['TYPE_QUAT']){const _0x4c61df=st['q1']['set'](this['value'][0x2066+0x1ed5+-0x3f3b],this['value'][-0x395*-0x1+0x73*-0x1c+0x900],this['value'][0x5*-0x156+-0x34a*-0x3+-0x32e],this['value'][0x16fb+-0x1c2d+-0x1f*-0x2b]),_0x50e301=st['q2']['set'](this['baseValue'][-0xae*-0x5+-0x4e*-0x5d+-0x1fbc],this['baseValue'][-0x49c+-0x12f8+-0x1795*-0x1],this['baseValue'][-0x2409+-0xd76+-0x1b5*-0x1d],this['baseValue'][-0x33d*-0x5+-0x1804*-0x1+-0x62*0x69]),_0x303aa1=st['q3']['set'](_0x1d3fe9[0xb11+-0x533+-0x5de],_0x1d3fe9[0x68a+-0x7b*-0x1f+-0x1*0x156e],_0x1d3fe9[-0x3ad*0x2+0x3*0xcfb+-0x1f95],_0x1d3fe9[-0x17b*0x15+0x488+0x1a92]),_0x3d0673=_0x50e301['invert']()['mul'](_0x303aa1);_0x3d0673['slerp'](le['IDENTITY'],_0x3d0673,this['getWeight'](_0x107085)),_0x4c61df['mul'](_0x3d0673),st['quatArr'][0xc71+-0x193a+0xcc9]=_0x4c61df['x'],st['quatArr'][0x5*-0x4e1+-0xe72*-0x1+0xc4*0xd]=_0x4c61df['y'],st['quatArr'][-0x10d9+0x1549*0x1+-0x46e]=_0x4c61df['z'],st['quatArr'][0x143*0x1d+-0xe9*-0x11+-0x340d]=_0x4c61df['w'],Ht['set'](this['value'],st['quatArr'],this['valueType']);}else st['vecArr'][-0x1ac1+-0x1*0xd91+-0x31a*-0xd]=_0x1d3fe9[-0x1*-0x1483+-0x6*-0x4fb+-0x3265]-this['baseValue'][-0x263c+-0x1b26+-0x20b1*-0x2],st['vecArr'][0x72d*-0x3+0x1922+-0x39a]=_0x1d3fe9[-0x1*0x23e3+-0x216c+0x4550]-this['baseValue'][0xf3*-0xc+-0x137a+0x1edf],st['vecArr'][0x1399+0x11c6+-0x255d]=_0x1d3fe9[-0x1ad0+-0x3*0x8d3+0x354b]-this['baseValue'][-0xf45+-0x1bff+0x2b46],Ht['blend'](this['value'],st['vecArr'],this['getWeight'](_0x107085),this['valueType'],!(-0x3*0x202+0xfa*-0x16+0x7*0x3ee));}else Ht['blend'](this['value'],_0x1d3fe9,this['getWeight'](_0x107085),this['valueType']);this['setter']&&this['setter'](this['value']);}}['unbind'](){this['setter']&&this['setter'](this['baseValue']);}};h(st,'TYPE_QUAT','quaternion'),h(st,'TYPE_VEC3','vector3'),h(st,'q1',new le()),h(st,'q2',new le()),h(st,'q3',new le()),h(st,'quatArr',[0x2235+-0x17*-0x103+-0x397a,0xa5+-0x1b27+0x12*0x179,-0x1af6+-0x2*-0x116d+-0x7e4,0x1*0x2b9+0x1b50+-0xf8*0x1f]),h(st,'vecArr',[-0x1fb4+-0x16b*0x3+0x23f5,0x1*0xc77+0x4c2+-0x1139,0x1*-0x80f+-0xbf6*-0x1+-0x3e7]),h(st,'IDENTITY_Q'+'UAT_ARR',[0x2624+0x217c+-0x47a0,-0x2587+-0x200c+-0x3*-0x1731,-0x26cd+-0x263*0xb+0x410e,0x2326+-0x4c6+-0x1e5f]);let Mo=st;class nv{constructor(_0x5667fe){this['_binder']=_0x5667fe,this['_clips']=[],this['_inputs']=[],this['_outputs']=[],this['_targets']={};}get['clips'](){return this['_clips'];}['addClip'](_0x294f9d){const _0xeae54b=this['_targets'],_0x49d727=this['_binder'],_0x1232fe=_0x294f9d['track']['curves'],_0x2eb766=_0x294f9d['snapshot'],_0x1db11a=[],_0xb36652=[];for(let _0x480c43=0x1231*0x1+0x11fb*0x2+-0x1*0x3627;_0x480c43<_0x1232fe['length'];++_0x480c43){const _0x5529be=_0x1232fe[_0x480c43]['paths'];for(let _0x2cf6f5=0x1a97*-0x1+0x6a*-0x11+0x21a1*0x1;_0x2cf6f5<_0x5529be['length'];++_0x2cf6f5){const _0x219015=_0x5529be[_0x2cf6f5],_0x5b5fb7=_0x49d727['resolve'](_0x219015);let _0x2f926b=_0xeae54b[_0x5b5fb7&&_0x5b5fb7['targetPath']||null];if(!_0x2f926b&&_0x5b5fb7){_0x2f926b={'target':_0x5b5fb7,'value':[],'curves':0x0,'blendCounter':0x0};for(let _0x43dfd9=-0x24cf+-0x1988+0x3e57;_0x43dfd9<_0x2f926b['target']['components'];++_0x43dfd9)_0x2f926b['value']['push'](0x17b*0x1+0x1*0x13e5+-0x1560);if(_0xeae54b[_0x5b5fb7['targetPath']]=_0x2f926b,_0x49d727['animCompon'+'ent']){if(!_0x49d727['animCompon'+'ent']['targets'][_0x5b5fb7['targetPath']]){let _0x909112;_0x5b5fb7['targetPath']['substring'](_0x5b5fb7['targetPath']['length']-(-0x1a6c+0x15e8+0xa7*0x7))==='localRotat'+'ion'?_0x909112=Mo['TYPE_QUAT']:_0x909112=Mo['TYPE_VEC3'],_0x49d727['animCompon'+'ent']['targets'][_0x5b5fb7['targetPath']]=new Mo(_0x49d727['animCompon'+'ent'],_0x909112);}_0x49d727['animCompon'+'ent']['targets'][_0x5b5fb7['targetPath']]['layerCount'+'er']++,_0x49d727['animCompon'+'ent']['targets'][_0x5b5fb7['targetPath']]['setMask'](_0x49d727['layerIndex'],-0x1*0xf4d+0xf7a+0x4*-0xb);}}_0x2f926b&&(_0x2f926b['curves']++,_0x1db11a['push'](_0x2eb766['_results'][_0x480c43]),_0xb36652['push'](_0x2f926b));}}this['_clips']['push'](_0x294f9d),this['_inputs']['push'](_0x1db11a),this['_outputs']['push'](_0xb36652);}['removeClip'](_0x257803){const _0x1d429a=this['_targets'],_0x345708=this['_binder'],_0x51d0cf=this['_clips'],_0x47459f=_0x51d0cf[_0x257803]['track']['curves'];for(let _0x9f182e=-0x1598*-0x1+0x1922+-0x2eba;_0x9f182e<_0x47459f['length'];++_0x9f182e){const _0x13fb23=_0x47459f[_0x9f182e]['paths'];for(let _0x420eb0=0x1f5+0x48d*-0x2+-0x3b*-0x1f;_0x420eb0<_0x13fb23['length'];++_0x420eb0){const _0x2c6277=_0x13fb23[_0x420eb0],_0xdb1683=this['_binder']['resolve'](_0x2c6277);_0xdb1683&&(_0xdb1683['curves']--,_0xdb1683['curves']===-0xe43*0x1+-0x1*0x7ca+0x160d&&(_0x345708['unresolve'](_0x2c6277),delete _0x1d429a[_0xdb1683['targetPath']],_0x345708['animCompon'+'ent']&&_0x345708['animCompon'+'ent']['targets'][_0xdb1683['targetPath']]['layerCount'+'er']--));}}_0x51d0cf['splice'](_0x257803,-0xd9a+-0xd*0x1fd+0x14*0x1f9),this['_inputs']['splice'](_0x257803,-0x181f+0xdc7*-0x1+0x25e7),this['_outputs']['splice'](_0x257803,0x167f+0x7f*-0x15+-0xc13);}['removeClip'+'s'](){for(;this['_clips']['length']>-0x16a+-0x5*0x43f+0x16a5;)this['removeClip'](-0x908+0x1*-0xa13+-0x1*-0x131b);}['updateClip'+'Track'](_0x5f0a88,_0x37b95f){this['_clips']['forEach'](_0x109051=>{_0x109051['name']['includes'](_0x5f0a88)&&(_0x109051['track']=_0x37b95f);}),this['rebind']();}['findClip'](_0x18299b){const _0x169d0f=this['_clips'];for(let _0x5d281d=0x11e6+0x1*-0x3ad+-0xe39;_0x5d281d<_0x169d0f['length'];++_0x5d281d){const _0x4004a9=_0x169d0f[_0x5d281d];if(_0x4004a9['name']===_0x18299b)return _0x4004a9;}return null;}['rebind'](){this['_binder']['rebind'](),this['_targets']={};const _0x11bcf8=[...this['clips']];this['removeClip'+'s'](),_0x11bcf8['forEach'](_0x3c3e94=>{this['addClip'](_0x3c3e94);});}['assignMask'](_0x3c1b25){return this['_binder']['assignMask'](_0x3c1b25);}['update'](_0x1478ed,_0x3b4c2b=!(0x258+0x3a*0x23+-0xa46)){const _0x1f8e58=this['_clips'],_0x2f6bf6=_0x1f8e58['map']((_0x26cbdb,_0x195b45)=>_0x195b45);Ht['stableSort'](_0x2f6bf6,(_0x57076c,_0x605ded)=>_0x1f8e58[_0x57076c]['blendOrder']<_0x1f8e58[_0x605ded]['blendOrder']);for(let _0x450943=0x260b+0x2000+-0x2b*0x1a1;_0x450943<_0x2f6bf6['length'];++_0x450943){const _0x401845=_0x2f6bf6[_0x450943],_0x1d25bb=_0x1f8e58[_0x401845],_0x1d3938=this['_inputs'][_0x401845],_0x44fd18=this['_outputs'][_0x401845],_0x243a13=_0x1d25bb['blendWeigh'+'t'];if(_0x243a13>0x252f+-0x2c5*0x7+-0x11cc&&_0x1d25bb['_update'](_0x1478ed),!_0x3b4c2b)break;let _0xae20e,_0x39ab21,_0x37706e;if(_0x243a13>=0x86d*-0x4+0x4cf+-0x9*-0x336){for(let _0x343ec=0x1971*0x1+-0x1*-0x3d1+-0x1d42;_0x343ec<_0x1d3938['length'];++_0x343ec)_0xae20e=_0x1d3938[_0x343ec],_0x39ab21=_0x44fd18[_0x343ec],_0x37706e=_0x39ab21['value'],Ht['set'](_0x37706e,_0xae20e,_0x39ab21['target']['type']),_0x39ab21['blendCount'+'er']++;}else{if(_0x243a13>-0x1a3e*0x1+0x143e*-0x1+0x2bc*0x11){for(let _0x17065b=0x5ad*0x1+-0x95f+0x3b2;_0x17065b<_0x1d3938['length'];++_0x17065b)_0xae20e=_0x1d3938[_0x17065b],_0x39ab21=_0x44fd18[_0x17065b],_0x37706e=_0x39ab21['value'],_0x39ab21['blendCount'+'er']===0x2*0x52+0x9*-0x25+0xa9*0x1?Ht['set'](_0x37706e,_0xae20e,_0x39ab21['target']['type']):Ht['blend'](_0x37706e,_0xae20e,_0x243a13,_0x39ab21['target']['type']),_0x39ab21['blendCount'+'er']++;}}}const _0x20242a=this['_targets'],_0x2d85e7=this['_binder'];for(const _0x396f1b in _0x20242a)if(_0x20242a['hasOwnProp'+'erty'](_0x396f1b)){const _0xe32c42=_0x20242a[_0x396f1b];if(_0x2d85e7['animCompon'+'ent']&&_0xe32c42['target']['isTransfor'+'m']){const _0x2c4987=_0x2d85e7['animCompon'+'ent']['targets'][_0x396f1b];_0x2c4987['counter']===_0x2c4987['layerCount'+'er']&&(_0x2c4987['counter']=-0x1b*-0xd1+0x172a+-0x47*0xa3),_0x2c4987['path']||(_0x2c4987['path']=_0x396f1b,_0x2c4987['baseValue']=_0xe32c42['target']['get'](),_0x2c4987['setter']=_0xe32c42['target']['set']),_0x2c4987['updateValu'+'e'](_0x2d85e7['layerIndex'],_0xe32c42['value']),_0x2c4987['counter']++;}else _0xe32c42['target']['set'](_0xe32c42['value']);_0xe32c42['blendCount'+'er']=-0x5*-0x1fe+-0x19cd+0xfd7;}this['_binder']['update'](_0x1478ed);}}class ov{constructor(_0x22b6cb){this['_events']=[..._0x22b6cb],this['_events']['sort']((_0x5525a8,_0x11413c)=>_0x5525a8['time']-_0x11413c['time']);}get['events'](){return this['_events'];}}const wh=class wh{constructor(_0xc24f79,_0xcbd47a,_0x35b2ba,_0x5519b7,_0x6690a3,_0x53a725=new ov([])){this['_name']=_0xc24f79,this['_duration']=_0xcbd47a,this['_inputs']=_0x35b2ba,this['_outputs']=_0x5519b7,this['_curves']=_0x6690a3,this['_animEvent'+'s']=_0x53a725;}get['name'](){return this['_name'];}get['duration'](){return this['_duration'];}get['inputs'](){return this['_inputs'];}get['outputs'](){return this['_outputs'];}get['curves'](){return this['_curves'];}set['events'](_0x116060){this['_animEvent'+'s']=_0x116060;}get['events'](){return this['_animEvent'+'s']['events'];}['eval'](_0x644340,_0x10df3a){_0x10df3a['_time']=_0x644340;const _0x111dcd=this['_inputs'],_0x52b83b=this['_outputs'],_0x52e5d9=this['_curves'],_0x3de508=_0x10df3a['_cache'],_0x100aee=_0x10df3a['_results'];for(let _0x104cd5=0x639+-0x15d*0x8+-0xb*-0x6d;_0x104cd5<_0x111dcd['length'];++_0x104cd5)_0x3de508[_0x104cd5]['update'](_0x644340,_0x111dcd[_0x104cd5]['_data']);for(let _0x5354f1=0x26e1+0x1769+-0x3e4a;_0x5354f1<_0x52e5d9['length'];++_0x5354f1){const _0xc2d997=_0x52e5d9[_0x5354f1],_0x54121a=_0x52b83b[_0xc2d997['_output']],_0x1c5c40=_0x100aee[_0x5354f1];_0x3de508[_0xc2d997['_input']]['eval'](_0x1c5c40,_0xc2d997['_interpola'+'tion'],_0x54121a);}}};h(wh,'EMPTY',Object['freeze'](new wh('empty',Number['MAX_VALUE'],[],[],[])));let Zi=wh;class Jr{static['joinPath'](_0x167d54,_0x334304){_0x334304=_0x334304||'.';const _0x361c73=function(_0x1abe63){return _0x1abe63['replace'](/\\/g,'\x5c\x5c')['replace'](new RegExp('\x5c'+_0x334304,'g'),'\x5c'+_0x334304);};return _0x167d54['map'](_0x361c73)['join'](_0x334304);}static['splitPath'](_0x913572,_0x160fbc){_0x160fbc=_0x160fbc||'.';const _0x21ce06=[];let _0x15af1a='',_0x1b271c=0xc2f+0xc02+-0x1831;for(;_0x1b271c<_0x913572['length'];){let _0x38330f=_0x913572[_0x1b271c++];_0x38330f==='\x5c'&&_0x1b271c<_0x913572['length']?(_0x38330f=_0x913572[_0x1b271c++],_0x38330f==='\x5c'||_0x38330f===_0x160fbc?_0x15af1a+=_0x38330f:_0x15af1a+='\x5c'+_0x38330f):_0x38330f===_0x160fbc?(_0x21ce06['push'](_0x15af1a),_0x15af1a=''):_0x15af1a+=_0x38330f;}return _0x15af1a['length']>-0x53*-0x2c+0x4fd+-0x1341&&_0x21ce06['push'](_0x15af1a),_0x21ce06;}static['encode'](_0x1aea16,_0x51dec3,_0x501a09){return(Array['isArray'](_0x1aea16)?_0x1aea16['join']('/'):_0x1aea16)+'/'+_0x51dec3+'/'+(Array['isArray'](_0x501a09)?_0x501a09['join']('/'):_0x501a09);}['resolve'](_0x2f8461){return null;}['unresolve'](_0x187b34){}['update'](_0x3c8114){}}class Yf{constructor(_0x1ff906,_0xfdfbec,_0x42ccb8,_0x27312e){_0x1ff906['set']?(this['_set']=_0x1ff906['set'],this['_get']=_0x1ff906['get']):this['_set']=_0x1ff906,this['_type']=_0xfdfbec,this['_component'+'s']=_0x42ccb8,this['_targetPat'+'h']=_0x27312e,this['_isTransfo'+'rm']=this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(-0x1868+-0x1*-0x712+-0x1*-0x1163))==='localRotat'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(-0xb3+-0x20ad+-0x2b*-0xc7))==='localPosit'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0x13e5+0x41e*-0x8+-0x11*-0xc5))==='localScale';}get['set'](){return this['_set'];}get['get'](){return this['_get'];}get['type'](){return this['_type'];}get['components'](){return this['_component'+'s'];}get['targetPath'](){return this['_targetPat'+'h'];}get['isTransfor'+'m'](){return this['_isTransfo'+'rm'];}}class pr{constructor(_0x263f38){h(this,'_isPathInM'+'ask',(_0x27a941,_0x11c58b)=>{const _0x3cd7c8=this['_mask'][_0x27a941];if(_0x3cd7c8){if(_0x3cd7c8['children']||_0x11c58b&&_0x3cd7c8['value']!==!(-0x1*-0x1774+-0x1f47+-0xa7*-0xc))return!(0x1499+-0x1011+-0x488);}else return!(-0x10*-0x239+-0x18d1+-0xabe);return!(-0x876+0x710+-0x167*-0x1);});if(this['graph']=_0x263f38,!_0x263f38)return;this['_mask']=null;const _0x4f54fc={},_0x42a06b=function(_0x4a36cf){_0x4f54fc[_0x4a36cf['name']]=_0x4a36cf;for(let _0x537c3c=0x1207+-0x813+0x31*-0x34;_0x537c3c<_0x4a36cf['children']['length'];++_0x537c3c)_0x42a06b(_0x4a36cf['children'][_0x537c3c]);};_0x42a06b(_0x263f38),this['nodes']=_0x4f54fc,this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={};const _0x254ddc=function(_0x1eeb3d){let _0x4a5f21=_0x1eeb3d;for(;_0x4a5f21&&!(_0x4a5f21 instanceof lt);)_0x4a5f21=_0x4a5f21['parent'];let _0x16d581;return _0x4a5f21&&(_0x4a5f21['render']?_0x16d581=_0x4a5f21['render']['meshInstan'+'ces']:_0x4a5f21['model']&&(_0x16d581=_0x4a5f21['model']['meshInstan'+'ces'])),_0x16d581;};this['nodeCounts']={},this['activeNode'+'s']=[],this['handlers']={'localPosition':function(_0x37600e){const _0x4cca43=_0x37600e['localPosit'+'ion'],_0x2d490b=function(_0x32c792){_0x4cca43['set'](..._0x32c792);};return pr['createAnim'+'Target'](_0x2d490b,'vector',-0xab*0x21+0xdbd+0x851,_0x37600e,'localPosit'+'ion');},'localRotation':function(_0x81b1a){const _0x2d1097=_0x81b1a['localRotat'+'ion'],_0x4c6572=function(_0x5e7f52){_0x2d1097['set'](..._0x5e7f52);};return pr['createAnim'+'Target'](_0x4c6572,'quaternion',-0x20d8*-0x1+0x4a*0xb+-0x2402,_0x81b1a,'localRotat'+'ion');},'localScale':function(_0xb8f540){const _0x2e5477=_0xb8f540['localScale'],_0xb6a106=function(_0x269971){_0x2e5477['set'](..._0x269971);};return pr['createAnim'+'Target'](_0xb6a106,'vector',-0x224f+-0xf58+-0x1*-0x31aa,_0xb8f540,'localScale');},'weight':function(_0x3f51c1,_0x998db5){_0x998db5['indexOf']('name.')===0xab3+0x2*-0xa09+0x95f?_0x998db5=_0x998db5['replace']('name.',''):_0x998db5=Number(_0x998db5);const _0x5cdc70=_0x254ddc(_0x3f51c1);let _0x16d332;if(_0x5cdc70){for(let _0x3b5575=-0x1*0x1168+0x1a3*0xe+-0x582;_0x3b5575<_0x5cdc70['length'];++_0x3b5575)if(_0x5cdc70[_0x3b5575]['node']['name']===_0x3f51c1['name']&&_0x5cdc70[_0x3b5575]['morphInsta'+'nce']){const _0x1cd24c=_0x5cdc70[_0x3b5575]['morphInsta'+'nce'],_0x1d47da=_0x553ac8=>{_0x1cd24c['setWeight'](_0x998db5,_0x553ac8[0x17a+0xe57*-0x1+0xcdd*0x1]);};_0x16d332||(_0x16d332=[]),_0x16d332['push'](_0x1d47da);}}if(_0x16d332){const _0x41d48c=_0x1b3e06=>{for(let _0x1551b4=0x3*0x404+0x45*0x2b+-0x17a3;_0x1551b4<_0x16d332['length'];++_0x1551b4)_0x16d332[_0x1551b4](_0x1b3e06);};return pr['createAnim'+'Target'](_0x41d48c,'number',-0x20ed+-0x11f4+0x32e2,_0x3f51c1,'weight.'+_0x998db5);}return null;},'materialTexture':(_0x54a7cf,_0x30a672)=>{const _0x4d67d7=_0x254ddc(_0x54a7cf);if(_0x4d67d7){let _0x5ac59b;for(let _0x1ca52c=0x1*0x1ca5+-0x462+0x1*-0x1843;_0x1ca52c<_0x4d67d7['length'];++_0x1ca52c)if(_0x4d67d7[_0x1ca52c]['node']['name']===_0x54a7cf['name']){_0x5ac59b=_0x4d67d7[_0x1ca52c];break;}if(_0x5ac59b){const _0x1537b4=_0x34f4f4=>{const _0x4de009=this['animCompon'+'ent']['system']['app']['assets']['get'](_0x34f4f4[0x1b50+-0x17b3+-0x39d]);_0x4de009&&_0x4de009['resource']&&_0x4de009['type']==='texture'&&(_0x5ac59b['material'][_0x30a672]=_0x4de009['resource'],_0x5ac59b['material']['update']());};return pr['createAnim'+'Target'](_0x1537b4,'vector',0x2418+-0x64f+0xee4*-0x2,_0x54a7cf,'materialTe'+'xture','material');}}return null;}};}['_isPathAct'+'ive'](_0x314324){if(!this['_mask'])return!(0x12a5+-0x2cf*0x2+-0x73*0x1d);const _0x59cb2f=[_0x314324['entityPath'][0x3b*-0x67+-0x20a4+-0x351*-0x11],this['graph']['name']];for(let _0x113f3f=-0x1bae+0x20*-0x89+0x3e*0xb9;_0x113f3f<_0x59cb2f['length'];++_0x113f3f){let _0x1ac714=_0x59cb2f[_0x113f3f];if(this['_isPathInM'+'ask'](_0x1ac714,_0x314324['entityPath']['length']===-0x3d9+0x1706+-0x132c))return!(0x1f8*0x2+-0x431*0x7+-0x3a1*-0x7);for(let _0x40f987=-0x32*-0x3a+-0x325+-0x82e;_0x40f987<_0x314324['entityPath']['length'];_0x40f987++)if(_0x1ac714+='/'+_0x314324['entityPath'][_0x40f987],this['_isPathInM'+'ask'](_0x1ac714,_0x40f987===_0x314324['entityPath']['length']-(0x192d+0x1*-0x152b+-0x29*0x19)))return!(0xbf+-0x1d76+0x1cb7);}return!(-0x1408+0x128f*0x2+-0x1115*0x1);}['findNode'](_0x3b1e1b){if(!this['_isPathAct'+'ive'](_0x3b1e1b))return null;let _0x23f934;if(this['graph']&&(_0x23f934=this['graph']['findByPath'](_0x3b1e1b['entityPath']),_0x23f934||(_0x23f934=this['graph']['findByPath'](_0x3b1e1b['entityPath']['slice'](0x485*0x2+0x1eb8+0x27c1*-0x1)))),!_0x23f934){_0x23f934=this['nodes'][_0x3b1e1b['entityPath'][_0x3b1e1b['entityPath']['length']-(0x1*0x79a+-0x1bf+0xe*-0x6b)]||''];const _0x35afd5=Jr['encode'](_0x3b1e1b['entityPath'][_0x3b1e1b['entityPath']['length']-(0x16*-0x1c3+-0x74*-0x2d+0x1*0x125f)]||'','graph',_0x3b1e1b['propertyPa'+'th']);this['visitedFal'+'lbackGraph'+'Paths'][_0x35afd5]===-0x655+0xa38*0x2+-0xe1a&&w['warnOnce']('Anim\x20Binde'+'r:\x20Multipl'+'e\x20animatio'+'n\x20curves\x20w'+'ith\x20the\x20pa'+'th\x20'+_0x35afd5+('\x20are\x20prese'+'nt\x20in\x20the\x20')+this['graph']['path']+('\x20graph\x20whi'+'ch\x20may\x20res'+'ult\x20in\x20the'+'\x20incorrect'+'\x20binding\x20o'+'f\x20animatio'+'ns')),Number['isFinite'](this['visitedFal'+'lbackGraph'+'Paths'][_0x35afd5])?this['visitedFal'+'lbackGraph'+'Paths'][_0x35afd5]++:this['visitedFal'+'lbackGraph'+'Paths'][_0x35afd5]=0x46f+-0x16d3+0x499*0x4;}return _0x23f934;}static['createAnim'+'Target'](_0x3280af,_0x4f2b81,_0x454e9c,_0x4d7965,_0x4e5b3f,_0xc9767b){const _0x138b02=Jr['encode'](_0x4d7965['path'],_0xc9767b||'entity',_0x4e5b3f);return new Yf(_0x3280af,_0x4f2b81,_0x454e9c,_0x138b02);}['resolve'](_0xa8daec){const _0x4b7cea=Jr['encode'](_0xa8daec['entityPath'],_0xa8daec['component'],_0xa8daec['propertyPa'+'th']);let _0x5de8af=this['targetCach'+'e'][_0x4b7cea];if(_0x5de8af)return _0x5de8af;const _0x184cec=this['findNode'](_0xa8daec);if(!_0x184cec)return null;const _0x4065f2=this['handlers'][_0xa8daec['propertyPa'+'th']];return!_0x4065f2||(_0x5de8af=_0x4065f2(_0x184cec),!_0x5de8af)?null:(this['targetCach'+'e'][_0x4b7cea]=_0x5de8af,this['nodeCounts'][_0x184cec['path']]?this['nodeCounts'][_0x184cec['path']]++:(this['activeNode'+'s']['push'](_0x184cec),this['nodeCounts'][_0x184cec['path']]=0x1305+0xf*-0x137+-0xcb),_0x5de8af);}['unresolve'](_0x587831){if(_0x587831['component']!=='graph')return;const _0x179988=this['nodes'][_0x587831['entityPath'][_0x587831['entityPath']['length']-(-0xc13+-0x11b*0x5+0x119b*0x1)]||''];if(this['nodeCounts'][_0x179988['path']]--,this['nodeCounts'][_0x179988['path']]===-0x2215+0x1c0b+0x2*0x305){const _0xec45d3=this['activeNode'+'s'],_0x229728=_0xec45d3['indexOf'](_0x179988['node']),_0x54a925=_0xec45d3['length'];_0x229728<_0x54a925-(-0x7*-0x403+-0x5*-0x31a+-0x2b96)&&(_0xec45d3[_0x229728]=_0xec45d3[_0x54a925-(-0x1cf8+0x11*0x123+-0xd*-0xbe)]),_0xec45d3['pop']();}}['update'](_0x230eef){const _0x3a9d06=this['activeNode'+'s'];for(let _0x1249f8=-0x2541+-0x1467+0x48*0xcd;_0x1249f8<_0x3a9d06['length'];++_0x1249f8)_0x3a9d06[_0x1249f8]['_dirtifyLo'+'cal']();}['assignMask'](_0x149404){return _0x149404!==this['_mask']?(this['_mask']=_0x149404,!(0x7f*-0x24+0x6+0x11d6*0x1)):!(0xd9f+0xd2f+-0x1acd);}}class lv extends we{constructor(){super(...arguments),h(this,'_animation'+'s',{}),h(this,'_assets',[]),h(this,'_loop',!(0xe41+0xa*0x21c+-0x2359)),h(this,'animEvalua'+'tor',null),h(this,'model',null),h(this,'skeleton',null),h(this,'fromSkel',null),h(this,'toSkel',null),h(this,'animations'+'Index',{}),h(this,'prevAnim',null),h(this,'currAnim',null),h(this,'blend',0xb1*-0x1f+0x17fd+-0x28e),h(this,'blending',!(-0x1499+-0x1a06*-0x1+-0x56c)),h(this,'blendSpeed',0xc40+0x31+-0x7*0x1c7),h(this,'activate',!(-0xecb+-0x106f+-0x7*-0x476)),h(this,'speed',0x1212+0x6*0x199+-0x1ba7);}set['animations'](_0x3f3e09){this['_animation'+'s']=_0x3f3e09,this['onSetAnima'+'tions']();}get['animations'](){return this['_animation'+'s'];}set['assets'](_0x5cad73){const _0x23ba10=this['_assets'];if(_0x23ba10&&_0x23ba10['length']){for(let _0x9665a2=-0x2*-0xb1b+-0x1770+-0x2*-0x9d;_0x9665a2<_0x23ba10['length'];_0x9665a2++)if(_0x23ba10[_0x9665a2]){const _0x588c41=this['system']['app']['assets']['get'](_0x23ba10[_0x9665a2]);if(_0x588c41){_0x588c41['off']('change',this['onAssetCha'+'nged'],this),_0x588c41['off']('remove',this['onAssetRem'+'oved'],this);const _0xf8cfc0=this['animations'+'Index'][_0x588c41['id']];this['currAnim']===_0xf8cfc0&&this['_stopCurre'+'ntAnimatio'+'n'](),delete this['animations'][_0xf8cfc0],delete this['animations'+'Index'][_0x588c41['id']];}}}this['_assets']=_0x5cad73;const _0x2a1a9c=_0x5cad73['map'](_0x226506=>_0x226506 instanceof pe?_0x226506['id']:_0x226506);this['loadAnimat'+'ionAssets'](_0x2a1a9c);}get['assets'](){return this['_assets'];}set['currentTim'+'e'](_0x59d473){if(this['skeleton']&&(this['skeleton']['currentTim'+'e']=_0x59d473,this['skeleton']['addTime'](0xab6+0x148*-0x1a+-0xb*-0x20e),this['skeleton']['updateGrap'+'h']()),this['animEvalua'+'tor']){const _0x36afeb=this['animEvalua'+'tor']['clips'];for(let _0x2ca696=0x151c+0x1f64+-0x3480;_0x2ca696<_0x36afeb['length'];++_0x2ca696)_0x36afeb[_0x2ca696]['time']=_0x59d473;}}get['currentTim'+'e'](){if(this['skeleton'])return this['skeleton']['_time'];if(this['animEvalua'+'tor']){const _0x12ec2c=this['animEvalua'+'tor']['clips'];if(_0x12ec2c['length']>-0x1cf*0x1+0x1ebd+0x211*-0xe)return _0x12ec2c[_0x12ec2c['length']-(-0xad9*0x2+0x1d13+-0x760)]['time'];}return-0x10*0x164+-0x41d+-0x11*-0x18d;}get['duration'](){return this['currAnim']?this['animations'][this['currAnim']]['duration']:(w['warn']('No\x20animati'+'on\x20is\x20play'+'ing\x20to\x20get'+'\x20a\x20duratio'+'n.\x20Returni'+'ng\x200.'),0x219f*0x1+-0xe*0x1e0+-0x11*0x6f);}set['loop'](_0x50ec60){if(this['_loop']=_0x50ec60,this['skeleton']&&(this['skeleton']['looping']=_0x50ec60),this['animEvalua'+'tor']){for(let _0x47278d=0x3*-0x9b9+0x22ce+-0x5a3*0x1;_0x47278d<this['animEvalua'+'tor']['clips']['length'];++_0x47278d)this['animEvalua'+'tor']['clips'][_0x47278d]['loop']=_0x50ec60;}}get['loop'](){return this['_loop'];}['play'](_0x199a46,_0xfae984=0x10a3*-0x1+0x3*0x5e5+-0x10c){if(!(!this['enabled']||!this['entity']['enabled'])){if(!this['animations'][_0x199a46]){w['error']('Trying\x20to\x20'+'play\x20anima'+'tion\x20\x27'+_0x199a46+('\x27\x20which\x20do'+'esn\x27t\x20exis'+'t'));return;}if(this['prevAnim']=this['currAnim'],this['currAnim']=_0x199a46,this['model']){!this['skeleton']&&!this['animEvalua'+'tor']&&this['_createAni'+'mationCont'+'roller']();const _0x57ffe3=this['animations'][this['prevAnim']],_0x24e18b=this['animations'][this['currAnim']];if(this['blending']=_0xfae984>0x67+-0x69c+0x635*0x1&&!!this['prevAnim'],this['blending']&&(this['blend']=0x14*-0x152+-0x38*0x97+-0x9e8*-0x6,this['blendSpeed']=(0x177c+-0x7c3*-0x1+0x1f*-0x102)/_0xfae984),this['skeleton']&&(this['blending']?(this['fromSkel']['animation']=_0x57ffe3,this['fromSkel']['addTime'](this['skeleton']['_time']),this['toSkel']['animation']=_0x24e18b):this['skeleton']['animation']=_0x24e18b),this['animEvalua'+'tor']){const _0x5f2f26=this['animEvalua'+'tor'];if(this['blending']){for(;_0x5f2f26['clips']['length']>0x3e*-0x13+0xb*0x184+0xc11*-0x1;)_0x5f2f26['removeClip'](-0x1d5f+0x80f*-0x4+0x1489*0x3);}else this['animEvalua'+'tor']['removeClip'+'s']();const _0x510f35=new lh(this['animations'][this['currAnim']],0x10c1*0x1+0x771+-0x1832,-0x1*0x2405+0x2*-0x1026+0x48e*0xf,!(0x19ec+0x3+-0x19ef),this['loop']);_0x510f35['name']=this['currAnim'],_0x510f35['blendWeigh'+'t']=this['blending']?-0xa87+0x1b37+0xb2*-0x18:-0x1d*-0xb+0x200c+-0x214a,_0x510f35['reset'](),this['animEvalua'+'tor']['addClip'](_0x510f35);}}this['playing']=!(0x8d*0x18+-0x1ffe+0x12c6);}}['getAnimati'+'on'](_0x490127){return this['animations'][_0x490127];}['setModel'](_0x49e010){_0x49e010!==this['model']&&(this['_resetAnim'+'ationContr'+'oller'](),this['model']=_0x49e010,this['animations']&&this['currAnim']&&this['animations'][this['currAnim']]&&this['play'](this['currAnim']));}['onSetAnima'+'tions'](){const _0x4208a4=this['entity']['model'];if(_0x4208a4){const _0x5728c9=_0x4208a4['model'];_0x5728c9&&_0x5728c9!==this['model']&&this['setModel'](_0x5728c9);}if(!this['currAnim']&&this['activate']&&this['enabled']&&this['entity']['enabled']){const _0x3f2363=Object['keys'](this['_animation'+'s']);_0x3f2363['length']>-0x1459*-0x1+-0x1ee9+0xa90&&this['play'](_0x3f2363[0x1a3d+0xae*0x23+-0x9*0x58f]);}}['_resetAnim'+'ationContr'+'oller'](){this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['_createAni'+'mationCont'+'roller'](){const _0x462a8f=this['model'],_0x19df14=this['animations'];let _0x528cb4=!(-0x1*-0x1147+-0x3*0xb6d+0x1101),_0x7b34a8=!(0x2cc*-0x7+0x1611+-0x35*0xc);for(const _0x132def in _0x19df14)_0x19df14['hasOwnProp'+'erty'](_0x132def)&&(_0x19df14[_0x132def]['constructo'+'r']===Zi?_0x7b34a8=!(-0x3*0x99b+-0x2181+0x3e52):_0x528cb4=!(-0x719+-0x8d3+0xfec));const _0x24e79b=_0x462a8f['getGraph']();_0x528cb4?(this['fromSkel']=new Yd(_0x24e79b),this['toSkel']=new Yd(_0x24e79b),this['skeleton']=new Yd(_0x24e79b),this['skeleton']['looping']=this['loop'],this['skeleton']['setGraph'](_0x24e79b)):_0x7b34a8&&(this['animEvalua'+'tor']=new nv(new pr(this['entity'])));}['loadAnimat'+'ionAssets'](_0xd96712){if(!_0xd96712||!_0xd96712['length'])return;const _0x12d40b=this['system']['app']['assets'],_0x55197f=_0x409a3e=>{if(_0x409a3e['resources']['length']>0x26e+0xe*-0x5e+0x2b7){for(let _0x131ad5=-0x56e+0x5b1*-0x1+-0x1*-0xb1f;_0x131ad5<_0x409a3e['resources']['length'];_0x131ad5++)this['animations'][_0x409a3e['resources'][_0x131ad5]['name']]=_0x409a3e['resources'][_0x131ad5],this['animations'+'Index'][_0x409a3e['id']]=_0x409a3e['resources'][_0x131ad5]['name'];}else this['animations'][_0x409a3e['name']]=_0x409a3e['resource'],this['animations'+'Index'][_0x409a3e['id']]=_0x409a3e['name'];this['animations']=this['animations'];},_0x1dbc87=_0x3d8c44=>{_0x3d8c44['off']('change',this['onAssetCha'+'nged'],this),_0x3d8c44['on']('change',this['onAssetCha'+'nged'],this),_0x3d8c44['off']('remove',this['onAssetRem'+'oved'],this),_0x3d8c44['on']('remove',this['onAssetRem'+'oved'],this),_0x3d8c44['resource']?_0x55197f(_0x3d8c44):(_0x3d8c44['once']('load',_0x55197f,this),this['enabled']&&this['entity']['enabled']&&_0x12d40b['load'](_0x3d8c44));};for(let _0x845eac=0x1d*0x9f+-0xc*0x20d+0x699,_0x222627=_0xd96712['length'];_0x845eac<_0x222627;_0x845eac++){const _0x21e2c7=_0x12d40b['get'](_0xd96712[_0x845eac]);_0x21e2c7?_0x1dbc87(_0x21e2c7):_0x12d40b['on']('add:'+_0xd96712[_0x845eac],_0x1dbc87);}}['onAssetCha'+'nged'](_0x13e9ea,_0x35b16f,_0x3f489f,_0x3db589){if(_0x35b16f==='resource'||_0x35b16f==='resources'){if(_0x35b16f==='resources'&&_0x3f489f&&_0x3f489f['length']===0xed3*0x1+-0x2031+0xea*0x13&&(_0x3f489f=null),_0x3f489f){let _0x500d55=!(0x1f77+-0x4*-0x61f+0x7fe*-0x7);if(_0x3f489f['length']>0x315*-0xc+0x1d3*0x1+0x232a){if(_0x3db589&&_0x3db589['length']>0x162d+0xe7b+-0x24a7){for(let _0x167eec=-0xeda+-0x45e*0x2+-0x2*-0xbcb;_0x167eec<_0x3db589['length'];_0x167eec++)delete this['animations'][_0x3db589[_0x167eec]['name']];}else delete this['animations'][_0x13e9ea['name']];_0x500d55=!(-0x917+0x1498+0x10*-0xb8);for(let _0x324447=0x225c+0xa*0x222+-0x37b0;_0x324447<_0x3f489f['length'];_0x324447++)this['animations'][_0x3f489f[_0x324447]['name']]=_0x3f489f[_0x324447],!_0x500d55&&this['currAnim']===_0x3f489f[_0x324447]['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x500d55=!(-0x5ba+0x30*-0x4a+0x139a),this['play'](_0x3f489f[_0x324447]['name']));_0x500d55||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}else{if(_0x3db589&&_0x3db589['length']>0x88a+0x6d8+0x1f*-0x7f){for(let _0x3d55b4=-0x1*-0x191f+0x48*0x6c+0x377f*-0x1;_0x3d55b4<_0x3db589['length'];_0x3d55b4++)delete this['animations'][_0x3db589[_0x3d55b4]['name']];}this['animations'][_0x13e9ea['name']]=_0x3f489f[0x10b2+-0x1244+0x192]||_0x3f489f,_0x500d55=!(0x3*0x35+0x449*-0x1+0x3*0x139),this['currAnim']===_0x13e9ea['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x500d55=!(0x9b8+0x12d+0xae5*-0x1),this['play'](_0x13e9ea['name'])),_0x500d55||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}this['animations'+'Index'][_0x13e9ea['id']]=_0x13e9ea['name'];}else{if(_0x3db589['length']>-0x559+0x2092+-0x1b38){for(let _0x1fb72d=-0x1cc8+0x35*0x95+-0x211;_0x1fb72d<_0x3db589['length'];_0x1fb72d++)delete this['animations'][_0x3db589[_0x1fb72d]['name']],this['currAnim']===_0x3db589[_0x1fb72d]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x13e9ea['name']],this['currAnim']===_0x13e9ea['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x13e9ea['id']];}}}['onAssetRem'+'oved'](_0x57455f){if(_0x57455f['off']('remove',this['onAssetRem'+'oved'],this),this['animations']){if(_0x57455f['resources']['length']>-0x1*0xfa6+0x19ea+0x1*-0xa43){for(let _0x4e4400=-0x1322+-0x526*0x7+-0x4*-0xdcb;_0x4e4400<_0x57455f['resources']['length'];_0x4e4400++)delete this['animations'][_0x57455f['resources'][_0x4e4400]['name']],this['currAnim']===_0x57455f['resources'][_0x4e4400]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x57455f['name']],this['currAnim']===_0x57455f['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x57455f['id']];}}['_stopCurre'+'ntAnimatio'+'n'](){if(this['currAnim']=null,this['playing']=!(-0xc2*-0x26+0x668*-0x2+-0xffb),this['skeleton']&&(this['skeleton']['currentTim'+'e']=0x1aa4+-0x52*0x4+0xc*-0x21d,this['skeleton']['animation']=null),this['animEvalua'+'tor']){for(let _0x186b10=-0x72*0x30+-0x7cc+0x1d2c;_0x186b10<this['animEvalua'+'tor']['clips']['length'];++_0x186b10)this['animEvalua'+'tor']['clips'][_0x186b10]['stop']();this['animEvalua'+'tor']['update'](0x11f7+0x13*-0x164+0x875),this['animEvalua'+'tor']['removeClip'+'s']();}}['onEnable'](){super['onEnable']();const _0x9a4978=this['assets'],_0x8cc3c7=this['system']['app']['assets'];if(_0x9a4978)for(let _0x1b3a33=0x59*0x2b+0x814+-0x1707,_0x108454=_0x9a4978['length'];_0x1b3a33<_0x108454;_0x1b3a33++){let _0x379cfc=_0x9a4978[_0x1b3a33];_0x379cfc instanceof pe||(_0x379cfc=_0x8cc3c7['get'](_0x379cfc)),_0x379cfc&&!_0x379cfc['resource']&&_0x8cc3c7['load'](_0x379cfc);}if(this['activate']&&!this['currAnim']){const _0x12d5c4=Object['keys'](this['animations']);_0x12d5c4['length']>-0x751*-0x1+-0x824+0xd3&&this['play'](_0x12d5c4[0x303*-0x1+-0x1433*-0x1+-0x1130]);}}['onBeforeRe'+'move'](){for(let _0x56d308=-0x474+-0x1213*-0x1+-0xd9f*0x1;_0x56d308<this['assets']['length'];_0x56d308++){let _0x559669=this['assets'][_0x56d308];typeof _0x559669=='number'&&(_0x559669=this['system']['app']['assets']['get'](_0x559669)),_0x559669&&(_0x559669['off']('change',this['onAssetCha'+'nged'],this),_0x559669['off']('remove',this['onAssetRem'+'oved'],this));}this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['update'](_0x1b2772){if(this['blending']&&(this['blend']+=_0x1b2772*this['blendSpeed'],this['blend']>=0x29b*-0x1+0x1*0x1e55+0x2f*-0x97&&(this['blend']=-0x169b*0x1+-0x2464+0x3b00)),this['playing']){const _0x225b95=this['skeleton'];if(_0x225b95!==null&&this['model']!==null){if(this['blending'])_0x225b95['blend'](this['fromSkel'],this['toSkel'],this['blend']);else{const _0x56af7f=_0x1b2772*this['speed'];_0x225b95['addTime'](_0x56af7f),this['speed']>0xd0c+0x164d+-0x2359&&_0x225b95['_time']===_0x225b95['animation']['duration']&&!this['loop']?this['playing']=!(0x1cd2+-0xf*0x2f+-0x684*0x4):this['speed']<-0x3*0x501+0x1ad5+-0xbd2&&_0x225b95['_time']===-0x45a*-0x1+0x81b*0x1+0x3*-0x427&&!this['loop']&&(this['playing']=!(-0xff+0xff+0x1));}this['blending']&&this['blend']===-0x24bd+0x6b3+-0x1*-0x1e0b&&(_0x225b95['animation']=this['toSkel']['animation']),_0x225b95['updateGrap'+'h']();}}const _0x4e8e67=this['animEvalua'+'tor'];if(_0x4e8e67){for(let _0x26ad25=0x1cf8+0x10*-0x5b+-0x1748;_0x26ad25<_0x4e8e67['clips']['length'];++_0x26ad25){const _0x1b05fd=_0x4e8e67['clips'][_0x26ad25];_0x1b05fd['speed']=this['speed'],this['playing']?_0x1b05fd['resume']():_0x1b05fd['pause']();}this['blending']&&_0x4e8e67['clips']['length']>-0x6*0x3ea+-0x2*0xb1c+-0x2db5*-0x1&&(_0x4e8e67['clips'][0x97*-0x33+0x3a6+-0x12*-0x178]['blendWeigh'+'t']=this['blend']),_0x4e8e67['update'](_0x1b2772);}this['blending']&&this['blend']===0xa99*-0x3+0x150c+0xac*0x10&&(this['blending']=!(-0xac5*0x1+-0xb00+0x15c6));}}class KI{constructor(){this['enabled']=!(-0x2450+-0x893+0x1*0x2ce3);}}const Kf=['enabled'];class ZI extends ct{constructor(_0x594a83){super(_0x594a83),this['id']='animation',this['ComponentT'+'ype']=lv,this['DataType']=KI,this['schema']=Kf,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x51f26c,_0x942049,_0x452374){_0x452374=['activate','enabled','loop','speed','assets'];for(const _0x4d650e of _0x452374)_0x942049['hasOwnProp'+'erty'](_0x4d650e)&&(_0x51f26c[_0x4d650e]=_0x942049[_0x4d650e]);super['initialize'+'ComponentD'+'ata'](_0x51f26c,_0x942049,Kf);}['cloneCompo'+'nent'](_0xffa2cf,_0x2e0a2f){this['addCompone'+'nt'](_0x2e0a2f,{}),_0x2e0a2f['animation']['assets']=_0xffa2cf['animation']['assets']['slice'](),_0x2e0a2f['animation']['speed']=_0xffa2cf['animation']['speed'],_0x2e0a2f['animation']['loop']=_0xffa2cf['animation']['loop'],_0x2e0a2f['animation']['activate']=_0xffa2cf['animation']['activate'],_0x2e0a2f['animation']['enabled']=_0xffa2cf['animation']['enabled'];const _0x23a123={},_0x68ad89=_0xffa2cf['animation']['animations'];for(const _0x38c357 in _0x68ad89)_0x68ad89['hasOwnProp'+'erty'](_0x38c357)&&(_0x23a123[_0x38c357]=_0x68ad89[_0x38c357]);_0x2e0a2f['animation']['animations']=_0x23a123;const _0x1eacd6={},_0x30c993=_0xffa2cf['animation']['animations'+'Index'];for(const _0x5b9b67 in _0x30c993)_0x30c993['hasOwnProp'+'erty'](_0x5b9b67)&&(_0x1eacd6[_0x5b9b67]=_0x30c993[_0x5b9b67]);return _0x2e0a2f['animation']['animations'+'Index']=_0x1eacd6,_0x2e0a2f['animation'];}['onBeforeRe'+'move'](_0x477dc7,_0x116075){_0x116075['onBeforeRe'+'move']();}['onUpdate'](_0x1ddc07){const _0x422080=this['store'];for(const _0x57af3d in _0x422080)if(_0x422080['hasOwnProp'+'erty'](_0x57af3d)){const _0x34a430=_0x422080[_0x57af3d];_0x34a430['data']['enabled']&&_0x34a430['entity']['enabled']&&_0x34a430['entity']['animation']['update'](_0x1ddc07);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](lv['prototype'],Kf);class sl{constructor(_0x5f58d0,_0x3aed28,_0x5c946a,_0x19b1e0,_0x58ca7b=0x1906+0x4ae+-0x1db3*0x1){this['_state']=_0x5f58d0,this['_parent']=_0x3aed28,this['_name']=_0x5c946a,Array['isArray'](_0x19b1e0)?(this['_point']=new J(_0x19b1e0[0x1e26+0xecb+-0x2cf1],_0x19b1e0[-0x3f*0x7+-0xfcf+0x43*0x43]),this['_pointLeng'+'th']=this['_point']['length']()):(this['_point']=_0x19b1e0,this['_pointLeng'+'th']=_0x19b1e0),this['_speed']=_0x58ca7b,this['_weightedS'+'peed']=0x5*0x791+-0xd*0x115+-0x17c3,this['_weight']=0x1b2a+0x1*-0x1f9f+0x1*0x476,this['_animTrack']=null;}get['parent'](){return this['_parent'];}get['name'](){return this['_name'];}get['path'](){return this['_parent']?this['_parent']['path']+'.'+this['_name']:this['_name'];}get['point'](){return this['_point'];}get['pointLengt'+'h'](){return this['_pointLeng'+'th'];}set['weight'](_0x3607f4){this['_weight']=_0x3607f4;}get['weight'](){return this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['normalized'+'Weight'](){const _0x1c8b5a=this['_state']['totalWeigh'+'t'];return _0x1c8b5a===-0xd06+0x1152+-0x5*0xdc?-0x1643+-0x1848+0x2e8b:this['weight']/_0x1c8b5a;}get['speed'](){return this['_weightedS'+'peed']*this['_speed'];}get['absoluteSp'+'eed'](){return Math['abs'](this['_speed']);}set['weightedSp'+'eed'](_0x2236a6){this['_weightedS'+'peed']=_0x2236a6;}get['weightedSp'+'eed'](){return this['_weightedS'+'peed'];}set['animTrack'](_0x5c12c3){this['_animTrack']=_0x5c12c3;}get['animTrack'](){return this['_animTrack'];}}class Xn extends sl{constructor(_0x434c5d,_0x1cad7c,_0x2b98cd,_0x30f7b2,_0x4639dd,_0x25fd19,_0x120e4c,_0x3ae65d,_0x5a191b){super(_0x434c5d,_0x1cad7c,_0x2b98cd,_0x30f7b2),this['_parameter'+'s']=_0x4639dd,this['_parameter'+'Values']=new Array(_0x4639dd['length']),this['_children']=[],this['_findParam'+'eter']=_0x5a191b,this['_syncAnima'+'tions']=_0x120e4c!==!(-0x1c0c+0x1*-0x1ae0+-0x1*-0x36ed),this['_pointCach'+'e']={};for(let _0x20d2b4=-0x1*0x3bc+-0x4f*-0x35+-0xc9f;_0x20d2b4<_0x25fd19['length'];_0x20d2b4++){const _0x225014=_0x25fd19[_0x20d2b4];_0x225014['children']?this['_children']['push'](_0x3ae65d(_0x225014['type'],_0x434c5d,this,_0x225014['name'],-0x266*0x1+0x1302+-0x109b,_0x225014['parameter']?[_0x225014['parameter']]:_0x225014['parameters'],_0x225014['children'],_0x225014['syncAnimat'+'ions'],_0x3ae65d,_0x5a191b)):this['_children']['push'](new sl(_0x434c5d,this,_0x225014['name'],_0x225014['point'],_0x225014['speed']));}}get['weight'](){return this['calculateW'+'eights'](),this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['syncAnimat'+'ions'](){return this['_syncAnima'+'tions'];}['getChild'](_0x1fdd3d){for(let _0x1bd7a4=0xb0*-0xe+0x91*-0x24+0x1*0x1e04;_0x1bd7a4<this['_children']['length'];_0x1bd7a4++)if(this['_children'][_0x1bd7a4]['name']===_0x1fdd3d)return this['_children'][_0x1bd7a4];return null;}['updatePara'+'meterValue'+'s'](){let _0x2f2837=!(-0xd7*-0x2d+-0x4a8+-0x2123*0x1);for(let _0x1b153f=0x1b4d+0x16f2+-0x1*0x323f;_0x1b153f<this['_parameter'+'Values']['length'];_0x1b153f++){const _0x3f0997=this['_findParam'+'eter'](this['_parameter'+'s'][_0x1b153f])['value'];this['_parameter'+'Values'][_0x1b153f]!==_0x3f0997&&(this['_parameter'+'Values'][_0x1b153f]=_0x3f0997,_0x2f2837=!(0xaeb+0x178f*-0x1+0x27*0x53));}return _0x2f2837;}['getNodeWei'+'ghtedDurat'+'ion'](_0x1c0361){return this['_children'][_0x1c0361]['animTrack']['duration']/this['_children'][_0x1c0361]['speedMulti'+'plier']*this['_children'][_0x1c0361]['weight'];}['getNodeCou'+'nt'](){let _0x18bf66=-0x2580+0x1575*-0x1+0x3af5;for(let _0x2c3810=-0x17a1*-0x1+0x7b*0x2e+-0x2dbb;_0x2c3810<this['_children']['length'];_0x2c3810++)this['_children'][_0x2c3810]['constructo'+'r']===Xn?_0x18bf66+=this['_children'][_0x2c3810]['getNodeCou'+'nt']():_0x18bf66++;return _0x18bf66;}}class QI extends Xn{constructor(_0x458e7f,_0x53c753,_0x265399,_0x59daf,_0x4d84d3,_0x3b015d,_0x55e43a,_0x58abb6,_0x3221c6){_0x3b015d['sort']((_0xacebc,_0x4e6a3b)=>_0xacebc['point']-_0x4e6a3b['point']),super(_0x458e7f,_0x53c753,_0x265399,_0x59daf,_0x4d84d3,_0x3b015d,_0x55e43a,_0x58abb6,_0x3221c6);}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x278116=-0xf0f+-0x3c3*0x6+-0x2e5*-0xd;this['_children'][-0x19e4+-0x259d+0x3f81]['weight']=-0x1b*-0x6f+0x1*0x1d2f+-0x28e4;for(let _0x53fce8=-0x4ce+0xef2+0x4*-0x289;_0x53fce8<this['_children']['length'];_0x53fce8++){const _0x4f8c0f=this['_children'][_0x53fce8];if(_0x53fce8!==this['_children']['length']-(0x1*-0x17e1+-0xe8*0x2b+-0x1f6d*-0x2)){const _0xb3c75b=this['_children'][_0x53fce8+(-0x3*0xa0b+-0x126a+0x3bc*0xd)];if(_0x4f8c0f['point']===_0xb3c75b['point'])_0x4f8c0f['weight']=0x5*0x57d+-0x19c9+0x1*-0x1a8+0.5,_0xb3c75b['weight']=-0x3*-0x557+0x2*-0xa0a+-0x1*-0x40f+0.5;else{if(Y['between'](this['_parameter'+'Values'][-0xc*-0x175+-0xc25+-0x1*0x557],_0x4f8c0f['point'],_0xb3c75b['point'],!(0xd37*0x1+0xf35+0x11*-0x1ac))){const _0xa0ba3d=Math['abs'](_0x4f8c0f['point']-_0xb3c75b['point']),_0x1f02ef=Math['abs'](_0x4f8c0f['point']-this['_parameter'+'Values'][0xea8+-0x26b*-0x1+-0x1*0x1113]),_0x501f7b=(_0xa0ba3d-_0x1f02ef)/_0xa0ba3d;_0x4f8c0f['weight']=_0x501f7b,_0xb3c75b['weight']=0xb7+-0x983*0x3+0x1bd3-_0x501f7b;}else _0xb3c75b['weight']=0x466*0x2+0x1*-0x17d4+0xf08;}}this['_syncAnima'+'tions']&&(_0x278116+=_0x4f8c0f['animTrack']['duration']/_0x4f8c0f['absoluteSp'+'eed']*_0x4f8c0f['weight']);}if(this['_syncAnima'+'tions'])for(let _0x34a385=-0x16ae+-0x2223+0xb5d*0x5;_0x34a385<this['_children']['length'];_0x34a385++){const _0x4575a3=this['_children'][_0x34a385];_0x4575a3['weightedSp'+'eed']=_0x4575a3['animTrack']['duration']/_0x4575a3['absoluteSp'+'eed']/_0x278116;}}}const Ni=class Ni extends Xn{['pointDista'+'nceCache'](_0x2c5f4f,_0x9d4428){const _0x53d998=''+_0x2c5f4f+_0x9d4428;return this['_pointCach'+'e'][_0x53d998]||(this['_pointCach'+'e'][_0x53d998]=this['_children'][_0x9d4428]['point']['clone']()['sub'](this['_children'][_0x2c5f4f]['point'])),this['_pointCach'+'e'][_0x53d998];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x3ca115,_0x27bdfc;Ni['_p']['set'](...this['_parameter'+'Values']),_0x3ca115=-0x1234*0x2+0x10ea+0x137e,_0x27bdfc=-0x17*0x58+0xc73*0x1+-0x48b;for(let _0x120e4f=-0x5ea*0x2+-0x69b+0x1ad*0xb;_0x120e4f<this['_children']['length'];_0x120e4f++){const _0x765a07=this['_children'][_0x120e4f],_0x38c202=_0x765a07['point'];Ni['_pip']['set'](Ni['_p']['x'],Ni['_p']['y'])['sub'](_0x38c202);let _0xe79f50=Number['MAX_VALUE'];for(let _0x410592=-0x77*-0x3d+0x21eb+0x1f23*-0x2;_0x410592<this['_children']['length'];_0x410592++){if(_0x120e4f===_0x410592)continue;const _0x5c2e9d=this['pointDista'+'nceCache'](_0x120e4f,_0x410592),_0x505565=Y['clamp'](0x17a8+0x1*-0x493+0x4c5*-0x4-Ni['_pip']['dot'](_0x5c2e9d)/_0x5c2e9d['lengthSq'](),-0x2*0x63d+-0x1*-0x1015+0xd*-0x47,-0xef*-0x11+0x12b3+-0x2291);_0x505565<_0xe79f50&&(_0xe79f50=_0x505565);}_0x765a07['weight']=_0xe79f50,_0x3ca115+=_0xe79f50,this['_syncAnima'+'tions']&&(_0x27bdfc+=_0x765a07['animTrack']['duration']/_0x765a07['absoluteSp'+'eed']*_0x765a07['weight']);}for(let _0x351b37=0x4*-0x31a+0x1827+-0x61*0x1f;_0x351b37<this['_children']['length'];_0x351b37++){const _0x2a58af=this['_children'][_0x351b37];_0x2a58af['weight']=_0x2a58af['_weight']/_0x3ca115,this['_syncAnima'+'tions']&&(_0x2a58af['weightedSp'+'eed']=_0x2a58af['animTrack']['duration']/_0x2a58af['absoluteSp'+'eed']/_0x27bdfc);}}};h(Ni,'_p',new J()),h(Ni,'_pip',new J());let Zf=Ni;const ki=class ki extends Xn{['pointCache'](_0x3825cb,_0x333024){const _0x653d8c=''+_0x3825cb+_0x333024;return this['_pointCach'+'e'][_0x653d8c]||(this['_pointCach'+'e'][_0x653d8c]=new J((this['_children'][_0x333024]['pointLengt'+'h']-this['_children'][_0x3825cb]['pointLengt'+'h'])/((this['_children'][_0x333024]['pointLengt'+'h']+this['_children'][_0x3825cb]['pointLengt'+'h'])/(0x219+-0x1b1*-0xb+0x14b2*-0x1)),J['angleRad'](this['_children'][_0x3825cb]['point'],this['_children'][_0x333024]['point'])*(-0x362*0xa+0x1ea4+0x332))),this['_pointCach'+'e'][_0x653d8c];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x4ecc45,_0x58499e;ki['_p']['set'](...this['_parameter'+'Values']);const _0x2878cc=ki['_p']['length']();_0x4ecc45=0xf*0x1f+0x174a+-0x191b,_0x58499e=0x2*-0xb2b+0x46c*-0x7+0x13*0x2ce;for(let _0x5cde9c=-0x1*0x257+0x887+-0x630;_0x5cde9c<this['_children']['length'];_0x5cde9c++){const _0x61b7d0=this['_children'][_0x5cde9c],_0x1f8f4a=_0x61b7d0['point'],_0x4e2f0b=_0x61b7d0['pointLengt'+'h'];let _0x26f398=Number['MAX_VALUE'];for(let _0x3a5a87=-0x1*0x1abd+0x19bc+-0x1*-0x101;_0x3a5a87<this['_children']['length'];_0x3a5a87++){if(_0x5cde9c===_0x3a5a87)continue;const _0x3ee137=this['pointCache'](_0x5cde9c,_0x3a5a87),_0x31c83f=this['_children'][_0x3a5a87]['pointLengt'+'h'];ki['_pip']['set']((_0x2878cc-_0x4e2f0b)/((_0x31c83f+_0x4e2f0b)/(-0x1213*0x2+-0x1*0x13d+0x3*0xc77)),J['angleRad'](_0x1f8f4a,ki['_p'])*(0x2*0x21+-0xad*-0xe+-0x9b6));const _0x7bf9e7=Y['clamp'](-0x1*-0xb98+0x32e*0x9+-0x2835*0x1-Math['abs'](ki['_pip']['dot'](_0x3ee137)/_0x3ee137['lengthSq']()),-0x4a9+0xddf*0x1+-0x936,0x1*0x127+0x24a7+-0x25cd);_0x7bf9e7<_0x26f398&&(_0x26f398=_0x7bf9e7);}_0x61b7d0['weight']=_0x26f398,_0x4ecc45+=_0x26f398,this['_syncAnima'+'tions']&&(_0x58499e+=_0x61b7d0['animTrack']['duration']/_0x61b7d0['absoluteSp'+'eed']*_0x61b7d0['weight']);}for(let _0xaa9346=-0x2*0xb1b+0x1*-0x16+0x164c;_0xaa9346<this['_children']['length'];_0xaa9346++){const _0x5440ed=this['_children'][_0xaa9346];if(_0x5440ed['weight']=_0x5440ed['_weight']/_0x4ecc45,this['_syncAnima'+'tions']){const _0x3e19e3=_0x5440ed['animTrack']['duration']/_0x58499e*_0x4ecc45;_0x5440ed['weightedSp'+'eed']=_0x5440ed['absoluteSp'+'eed']*_0x3e19e3;}}}};h(ki,'_p',new J()),h(ki,'_pip',new J());let Qf=ki;class JI extends Xn{['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x2bfe6e=0x1f1f+0x978*0x1+-0x2897,_0xcd6dbe=0x4*-0x4fa+0x1407+-0x1*0x1f;for(let _0x50ea42=0x10f8+0x8*-0x420+0x1008;_0x50ea42<this['_children']['length'];_0x50ea42++)if(_0x2bfe6e+=Math['max'](this['_parameter'+'Values'][_0x50ea42],-0x3d1*-0x3+-0x2a5*0x3+0x5*-0xb4),this['_syncAnima'+'tions']){const _0x1702a5=this['_children'][_0x50ea42];_0xcd6dbe+=_0x1702a5['animTrack']['duration']/_0x1702a5['absoluteSp'+'eed']*_0x1702a5['weight'];}for(let _0x38b784=-0xe83+-0x68a+0x11*0x13d;_0x38b784<this['_children']['length'];_0x38b784++){const _0x591cc1=this['_children'][_0x38b784],_0x127958=Math['max'](this['_parameter'+'Values'][_0x38b784],0x1361+-0xa1d*-0x2+0x279b*-0x1);_0x2bfe6e?(_0x591cc1['weight']=_0x127958/_0x2bfe6e,this['_syncAnima'+'tions']&&(_0x591cc1['weightedSp'+'eed']=_0x591cc1['animTrack']['duration']/_0x591cc1['absoluteSp'+'eed']/_0xcd6dbe)):(_0x591cc1['weight']=-0x1582+-0x1*-0x201d+0xb5*-0xf,this['_syncAnima'+'tions']&&(_0x591cc1['weightedSp'+'eed']=-0x1888+0x1fdd*0x1+-0x1*0x755));}}}class ng{constructor(_0x10aacf,_0x77c034,_0x544f5a=-0x2*-0xa6a+-0x8f*0x24+0xb7*-0x1,_0xf88085=!(0x21f1+0x85*0x4+-0x1*0x2405),_0x55cd96){h(this,'_animation'+'s',{}),h(this,'_animation'+'List',[]),(this['_controlle'+'r']=_0x10aacf,this['_name']=_0x77c034,this['_speed']=_0x544f5a,this['_loop']=_0xf88085,this['_hasAnimat'+'ions']=!(-0x1793+-0x5*-0x16a+-0x1*-0x1082),_0x55cd96?this['_blendTree']=this['_createTre'+'e'](_0x55cd96['type'],this,null,_0x77c034,-0x1*-0x2230+0x265*0x5+-0x38*0xd3,_0x55cd96['parameter']?[_0x55cd96['parameter']]:_0x55cd96['parameters'],_0x55cd96['children'],_0x55cd96['syncAnimat'+'ions'],this['_createTre'+'e'],this['_controlle'+'r']['findParame'+'ter']):this['_blendTree']=new sl(this,null,_0x77c034,0x791+-0x5df+0x1b1*-0x1,_0x544f5a));}['_createTre'+'e'](_0x4b60b1,_0x397ad0,_0xd1d540,_0x36d462,_0x1cef10,_0x55cc84,_0x1537ad,_0xa342dd,_0x2a3d45,_0x1fc63a){switch(_0x4b60b1){case $I:return new QI(_0x397ad0,_0xd1d540,_0x36d462,_0x1cef10,_0x55cc84,_0x1537ad,_0xa342dd,_0x2a3d45,_0x1fc63a);case qI:return new Zf(_0x397ad0,_0xd1d540,_0x36d462,_0x1cef10,_0x55cc84,_0x1537ad,_0xa342dd,_0x2a3d45,_0x1fc63a);case XI:return new Qf(_0x397ad0,_0xd1d540,_0x36d462,_0x1cef10,_0x55cc84,_0x1537ad,_0xa342dd,_0x2a3d45,_0x1fc63a);case jI:return new JI(_0x397ad0,_0xd1d540,_0x36d462,_0x1cef10,_0x55cc84,_0x1537ad,_0xa342dd,_0x2a3d45,_0x1fc63a);}w['error']('Invalid\x20an'+'im\x20blend\x20t'+'ype:\x20'+_0x4b60b1);}['_getNodeFr'+'omPath'](_0x586c75){let _0x25427d=this['_blendTree'];for(let _0x2e1a9d=-0x26d1+-0x2309+-0xa8d*-0x7;_0x2e1a9d<_0x586c75['length'];_0x2e1a9d++)_0x25427d=_0x25427d['getChild'](_0x586c75[_0x2e1a9d]);return _0x25427d;}['addAnimati'+'on'](_0x2178e9,_0x522c02){const _0x26eb78=_0x2178e9['join']('.'),_0x22b289=this['_animation'+'List']['findIndex'](_0x2de0de=>_0x2de0de['path']===_0x26eb78);if(_0x22b289>=-0xa49+-0xfb6*0x1+0x19ff)this['_animation'+'List'][_0x22b289]['animTrack']=_0x522c02;else{const _0x2d4024=this['_getNodeFr'+'omPath'](_0x2178e9);_0x2d4024['animTrack']=_0x522c02,this['_animation'+'List']['push'](_0x2d4024);}this['_updateHas'+'Animations']();}['_updateHas'+'Animations'](){this['_hasAnimat'+'ions']=this['_animation'+'List']['length']>-0xc21+0x3*-0x9e+0xdfb&&this['_animation'+'List']['every'](_0x1319f6=>_0x1319f6['animTrack']&&_0x1319f6['animTrack']!==Zi['EMPTY']);}get['name'](){return this['_name'];}set['animations'](_0x1838fc){this['_animation'+'List']=_0x1838fc,this['_updateHas'+'Animations']();}get['animations'](){return this['_animation'+'List'];}get['hasAnimati'+'ons'](){return this['_hasAnimat'+'ions'];}set['speed'](_0x2a6560){this['_speed']=_0x2a6560;}get['speed'](){return this['_speed'];}set['loop'](_0x11d93c){this['_loop']=_0x11d93c;}get['loop'](){return this['_loop'];}get['nodeCount'](){return!this['_blendTree']||this['_blendTree']['constructo'+'r']===sl?-0xee8*-0x2+0x89b*0x1+-0x266a:this['_blendTree']['getNodeCou'+'nt']();}get['playable'](){return ch['indexOf'](this['name'])!==-(0x147*-0x4+0x3a*-0x42+0x1411)||this['animations']['length']===this['nodeCount'];}get['looping'](){if(this['animations']['length']>-0xfaa+-0x1f*-0x5+0x5*0x303){const _0x2867b2=this['name']+'.'+this['animations'][-0x4a0+-0x7*0xf1+0xb37]['animTrack']['name'],_0x4f802d=this['_controlle'+'r']['animEvalua'+'tor']['findClip'](_0x2867b2);if(_0x4f802d)return _0x4f802d['loop'];}return!(-0xc98+0x224e+-0x15b5);}get['totalWeigh'+'t'](){let _0x317b2a=-0x1dc6+-0x29*0x25+-0x1e1*-0x13;for(let _0x734baf=0x1*-0x1017+0xf52+0xc5;_0x734baf<this['animations']['length'];_0x734baf++)_0x317b2a+=this['animations'][_0x734baf]['weight'];return _0x317b2a;}get['timelineDu'+'ration'](){let _0x4b9037=0x131*-0x9+-0x1280+0x1d39;for(let _0x174bce=-0x36d*0xa+-0x1*0x21b7+0x43f9*0x1;_0x174bce<this['animations']['length'];_0x174bce++){const _0x511037=this['animations'][_0x174bce];_0x511037['animTrack']['duration']>_0x4b9037&&(_0x4b9037=_0x511037['animTrack']['duration']);}return _0x4b9037;}}class hh{constructor({from:_0x2fadba,to:_0x21bfaa,time:_0x41b943=0x1*0x1f7f+-0xc4+-0x1ebb,priority:_0x2e5a59=0x9af+-0x12db+0x92c,conditions:_0x3b5dca=[],exitTime:_0x4fc4bb=null,transitionOffset:_0x2496e4=null,interruptionSource:_0x455a79=rv}){this['_from']=_0x2fadba,this['_to']=_0x21bfaa,this['_time']=_0x41b943,this['_priority']=_0x2e5a59,this['_condition'+'s']=_0x3b5dca,this['_exitTime']=_0x4fc4bb,this['_transitio'+'nOffset']=_0x2496e4,this['_interrupt'+'ionSource']=_0x455a79;}get['from'](){return this['_from'];}set['to'](_0x253253){this['_to']=_0x253253;}get['to'](){return this['_to'];}get['time'](){return this['_time'];}get['priority'](){return this['_priority'];}get['conditions'](){return this['_condition'+'s'];}get['exitTime'](){return this['_exitTime'];}get['transition'+'Offset'](){return this['_transitio'+'nOffset'];}get['interrupti'+'onSource'](){return this['_interrupt'+'ionSource'];}get['hasExitTim'+'e'](){return!!this['exitTime'];}}class eL{constructor(_0x32f3f3,_0x14f6f2,_0x81a26e,_0x4ef82f,_0x9514e5,_0x65b657,_0x2b3836){h(this,'_states',{}),h(this,'_stateName'+'s',[]),h(this,'_findTrans'+'itionsFrom'+'StateCache',{}),h(this,'_findTrans'+'itionsBetw'+'eenStatesC'+'ache',{}),h(this,'_previousS'+'tateName',null),h(this,'_activeSta'+'teName',_o),h(this,'_activeSta'+'teDuration',-0x1219+-0x1*0x2cc+0x14e5),h(this,'_activeSta'+'teDuration'+'Dirty',!(-0x22ce+-0x448+0x2716)),h(this,'_playing',!(-0x263*0x4+0x15ea+-0xc5d)),h(this,'_activate'),h(this,'_transitio'+'ns'),h(this,'_currTrans'+'itionTime',-0x205f+0x1*0x146f+0xbf1),h(this,'_totalTran'+'sitionTime',0x10e3+-0x25e2+0x1500),h(this,'_isTransit'+'ioning',!(0x1*0xd1f+0x1*-0x24bd+0x179f)),h(this,'_transitio'+'nInterrupt'+'ionSource',rv),h(this,'_transitio'+'nPreviousS'+'tates',[]),h(this,'_timeInSta'+'te',-0x1f*0xa7+0x1*-0xef+-0x1*-0x1528),h(this,'_timeInSta'+'teBefore',0x626+-0x2334+0xe87*0x2),h(this,'findParame'+'ter',_0x5ebc4c=>this['_findParam'+'eter'](_0x5ebc4c)),(this['_animEvalu'+'ator']=_0x32f3f3,this['_eventHand'+'ler']=_0x9514e5,this['_findParam'+'eter']=_0x65b657,this['_consumeTr'+'igger']=_0x2b3836);for(let _0x1bbd84=-0x7*-0x547+0x177d+0xc16*-0x5;_0x1bbd84<_0x14f6f2['length'];_0x1bbd84++)this['_states'][_0x14f6f2[_0x1bbd84]['name']]=new ng(this,_0x14f6f2[_0x1bbd84]['name'],_0x14f6f2[_0x1bbd84]['speed'],_0x14f6f2[_0x1bbd84]['loop'],_0x14f6f2[_0x1bbd84]['blendTree']),this['_stateName'+'s']['push'](_0x14f6f2[_0x1bbd84]['name']);this['_transitio'+'ns']=_0x81a26e['map'](_0x5da3b1=>new hh({..._0x5da3b1})),this['_activate']=_0x4ef82f;}get['animEvalua'+'tor'](){return this['_animEvalu'+'ator'];}set['activeStat'+'e'](_0x5655ed){this['_activeSta'+'teName']=_0x5655ed;}get['activeStat'+'e'](){return this['_findState'](this['_activeSta'+'teName']);}get['activeStat'+'eName'](){return this['_activeSta'+'teName'];}get['activeStat'+'eAnimation'+'s'](){return this['activeStat'+'e']['animations'];}set['previousSt'+'ate'](_0x150f24){this['_previousS'+'tateName']=_0x150f24;}get['previousSt'+'ate'](){return this['_findState'](this['_previousS'+'tateName']);}get['previousSt'+'ateName'](){return this['_previousS'+'tateName'];}get['playable'](){let _0x12f4e4=!(-0x1b61+-0x2*0xbb7+0x32cf);for(let _0x126af6=-0xad*0x13+-0x20e3*-0x1+-0x140c;_0x126af6<this['_stateName'+'s']['length'];_0x126af6++)this['_states'][this['_stateName'+'s'][_0x126af6]]['playable']||(_0x12f4e4=!(-0x1ef1+-0x8cf+0x1*0x27c1));return _0x12f4e4;}set['playing'](_0x263307){this['_playing']=_0x263307;}get['playing'](){return this['_playing'];}get['activeStat'+'eProgress'](){return this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);}get['activeStat'+'eDuration'](){if(this['_activeSta'+'teDuration'+'Dirty']){let _0x5d951b=-0x2172+0xe4e+-0x19*-0xc4;for(let _0x4af543=0x8a5*-0x4+0x1c20+0x674;_0x4af543<this['activeStat'+'eAnimation'+'s']['length'];_0x4af543++){const _0x55748d=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x4af543]['name']);_0x55748d&&(_0x5d951b=Math['max'](_0x5d951b,_0x55748d['track']['duration']));}this['_activeSta'+'teDuration']=_0x5d951b,this['_activeSta'+'teDuration'+'Dirty']=!(-0x2*-0xc0e+0x1*0x265+-0x1a80);}return this['_activeSta'+'teDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x485439){this['_timeInSta'+'teBefore']=_0x485439,this['_timeInSta'+'te']=_0x485439;for(let _0x1df797=0x1489*-0x1+-0x73*-0x49+-0xc42;_0x1df797<this['activeStat'+'eAnimation'+'s']['length'];_0x1df797++){const _0x580912=this['animEvalua'+'tor']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x1df797]['name']);_0x580912&&(_0x580912['time']=_0x485439);}}get['activeStat'+'eCurrentTi'+'me'](){return this['_timeInSta'+'te'];}get['transition'+'ing'](){return this['_isTransit'+'ioning'];}get['transition'+'Progress'](){return this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime'];}get['states'](){return this['_stateName'+'s'];}['assignMask'](_0x4febfd){return this['_animEvalu'+'ator']['assignMask'](_0x4febfd);}['_findState'](_0x257e2b){return this['_states'][_0x257e2b];}['_getActive'+'StateProgr'+'essForTime'](_0x1b5deb){if(this['activeStat'+'eName']===_o||this['activeStat'+'eName']===jf||this['activeStat'+'eName']===Hr)return-0x2d1*0x4+-0x1c*-0xd7+-0x273*0x5;const _0x39e897=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][0x1815+-0x17fb+-0x1a]['name']);return _0x39e897?_0x39e897['progressFo'+'rTime'](_0x1b5deb):null;}['_findTrans'+'itionsFrom'+'State'](_0x4992b6){let _0x184e92=this['_findTrans'+'itionsFrom'+'StateCache'][_0x4992b6];return _0x184e92||(_0x184e92=this['_transitio'+'ns']['filter'](_0x2b9b57=>_0x2b9b57['from']===_0x4992b6),el(_0x184e92),this['_findTrans'+'itionsFrom'+'StateCache'][_0x4992b6]=_0x184e92),_0x184e92;}['_findTrans'+'itionsBetw'+'eenStates'](_0x503900,_0x5f25a7){let _0x3feef6=this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x503900+'->'+_0x5f25a7];return _0x3feef6||(_0x3feef6=this['_transitio'+'ns']['filter'](_0x439d09=>_0x439d09['from']===_0x503900&&_0x439d09['to']===_0x5f25a7),el(_0x3feef6),this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x503900+'->'+_0x5f25a7]=_0x3feef6),_0x3feef6;}['_transitio'+'nHasCondit'+'ionsMet'](_0x47a9c5){const _0x14e678=_0x47a9c5['conditions'];for(let _0x30e0fe=0x26+0x20de+-0x2104;_0x30e0fe<_0x14e678['length'];_0x30e0fe++){const _0x5be79b=_0x14e678[_0x30e0fe],_0x5a7e97=this['_findParam'+'eter'](_0x5be79b['parameterN'+'ame']);switch(_0x5be79b['predicate']){case BI:if(!(_0x5a7e97['value']>_0x5be79b['value']))return!(0x22*-0x5e+0x22a6*-0x1+-0xb*-0x449);break;case zI:if(!(_0x5a7e97['value']<_0x5be79b['value']))return!(-0x16*0x107+-0x8c5*0x2+-0x2825*-0x1);break;case VI:if(!(_0x5a7e97['value']>=_0x5be79b['value']))return!(-0x13c3+0x2db*-0xa+0x9aa*0x5);break;case GI:if(!(_0x5a7e97['value']<=_0x5be79b['value']))return!(-0x31f+0x6d*-0x4b+-0x1*-0x230f);break;case HI:if(_0x5a7e97['value']!==_0x5be79b['value'])return!(-0x2335+-0x2275*0x1+0x45ab);break;case WI:if(_0x5a7e97['value']===_0x5be79b['value'])return!(-0x1eb4+-0x7f*-0x3d+0x72*0x1);break;}}return!(0x19*0x105+0x1360+0x2cdd*-0x1);}['_findTrans'+'ition'](_0x163337,_0x2a2be4){let _0x409435=[];if(_0x163337&&_0x2a2be4)_0x409435=_0x409435['concat'](this['_findTrans'+'itionsBetw'+'eenStates'](_0x163337,_0x2a2be4));else{if(!this['_isTransit'+'ioning'])_0x409435=_0x409435['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x409435=_0x409435['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));else switch(this['_transitio'+'nInterrupt'+'ionSource']){case FI:_0x409435=_0x409435['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x409435=_0x409435['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));break;case NI:_0x409435=_0x409435['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x409435=_0x409435['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));break;case kI:_0x409435=_0x409435['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x409435=_0x409435['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x409435=_0x409435['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));break;case UI:_0x409435=_0x409435['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x409435=_0x409435['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x409435=_0x409435['concat'](this['_findTrans'+'itionsFrom'+'State'](Hr));break;}}if(_0x409435=_0x409435['filter'](_0x3f712e=>{if(_0x3f712e['to']===this['activeStat'+'eName'])return!(0x1d*-0x6+-0x62*-0x5d+-0x22eb);if(_0x3f712e['hasExitTim'+'e']){let _0x16c0e6=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'teBefore']),_0x802eb1=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);if(_0x3f712e['exitTime']<-0x2d5+0xb5d*-0x2+-0x664*-0x4&&this['activeStat'+'e']['loop']&&(_0x16c0e6-=Math['floor'](_0x16c0e6),_0x802eb1-=Math['floor'](_0x802eb1)),_0x802eb1===_0x16c0e6){if(_0x802eb1!==_0x3f712e['exitTime'])return null;}else{if(!(_0x3f712e['exitTime']>_0x16c0e6&&_0x3f712e['exitTime']<=_0x802eb1))return null;}}return this['_transitio'+'nHasCondit'+'ionsMet'](_0x3f712e);}),_0x409435['length']>0x65*-0x11+-0x26c0+0x2d75){const _0x1b28cf=_0x409435[-0x638+0x2*-0x12eb+0x1607*0x2];if(_0x1b28cf['to']===jf){const _0x2d131c=this['_findTrans'+'itionsFrom'+'State'](_o)[-0x1a26*0x1+-0x14fa+0x2f20];_0x1b28cf['to']=_0x2d131c['to'];}return _0x1b28cf;}return null;}['updateStat'+'eFromTrans'+'ition'](_0x1b0a44){let _0x229094,_0x8d9967,_0x40a90a;this['previousSt'+'ate']=_0x1b0a44['from']?this['activeStat'+'eName']:null,this['activeStat'+'e']=_0x1b0a44['to'],this['_activeSta'+'teDuration'+'Dirty']=!(0x1*-0x1fd0+-0x2f9*0x8+0x3798);for(let _0x346604=0x1*0x1d95+0x4*-0x107+0x1*-0x1979;_0x346604<_0x1b0a44['conditions']['length'];_0x346604++){const _0xb65693=_0x1b0a44['conditions'][_0x346604];this['_findParam'+'eter'](_0xb65693['parameterN'+'ame'])['type']===Dc&&this['_consumeTr'+'igger'](_0xb65693['parameterN'+'ame']);}if(this['previousSt'+'ate']){this['_isTransit'+'ioning']||(this['_transitio'+'nPreviousS'+'tates']=[]),this['_transitio'+'nPreviousS'+'tates']['push']({'name':this['_previousS'+'tateName'],'weight':0x1});const _0x29877d=Math['min'](this['_totalTran'+'sitionTime']!==-0x150b*-0x1+0x9a0*0x4+-0x3b8b?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:0x7*-0x2f7+-0x13f*-0xd+-0x3*-0x185,0x1d50+-0xa*-0x133+-0x294d*0x1);for(let _0x9f71e6=0x1*0x12db+0x113*-0x9+0x188*-0x6;_0x9f71e6<this['_transitio'+'nPreviousS'+'tates']['length'];_0x9f71e6++){this['_isTransit'+'ioning']?_0x9f71e6!==this['_transitio'+'nPreviousS'+'tates']['length']-(0x1a55+0xd9a+-0x1*0x27ee)?this['_transitio'+'nPreviousS'+'tates'][_0x9f71e6]['weight']*=0xbb*0x7+0x103a+-0x1556-_0x29877d:this['_transitio'+'nPreviousS'+'tates'][_0x9f71e6]['weight']=_0x29877d:this['_transitio'+'nPreviousS'+'tates'][_0x9f71e6]['weight']=0x13ca+-0x13*0x19+-0x11ee,_0x229094=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x9f71e6]['name']);for(let _0x3bfe1c=0x109f+-0x3d*0x95+0x12e2;_0x3bfe1c<_0x229094['animations']['length'];_0x3bfe1c++)_0x8d9967=_0x229094['animations'][_0x3bfe1c],_0x40a90a=this['_animEvalu'+'ator']['findClip'](_0x8d9967['name']+'.previous.'+_0x9f71e6),_0x40a90a||(_0x40a90a=this['_animEvalu'+'ator']['findClip'](_0x8d9967['name']),_0x40a90a['name']=_0x8d9967['name']+'.previous.'+_0x9f71e6),_0x9f71e6!==this['_transitio'+'nPreviousS'+'tates']['length']-(0x1*0x9a1+0xf0+-0xa90)&&_0x40a90a['pause']();}}this['_isTransit'+'ioning']=!(-0x1979*0x1+0xb2a+-0x1*-0xe4f),this['_totalTran'+'sitionTime']=_0x1b0a44['time'],this['_currTrans'+'itionTime']=-0x21b3+-0xd1e*0x2+0x3bef,this['_transitio'+'nInterrupt'+'ionSource']=_0x1b0a44['interrupti'+'onSource'];const _0x30f9fd=this['activeStat'+'e'],_0x4f9696=_0x1b0a44['transition'+'Offset']&&_0x1b0a44['transition'+'Offset']>0xedb+0x1565+-0x2440&&_0x1b0a44['transition'+'Offset']<-0x1b17*-0x1+0xe4e*0x1+-0x2964;let _0x26d1c4=-0x12d1+-0xbba+-0x7*-0x45d,_0x3732c6=-0x3*-0x83e+0x1bb*-0x3+-0x1389;if(_0x4f9696){const _0x45d225=_0x30f9fd['timelineDu'+'ration']*_0x1b0a44['transition'+'Offset'];_0x26d1c4=_0x45d225,_0x3732c6=_0x45d225;}this['_timeInSta'+'te']=_0x26d1c4,this['_timeInSta'+'teBefore']=_0x3732c6;for(let _0x158b1f=-0x2436+-0xfd*-0x5+0x1*0x1f45;_0x158b1f<_0x30f9fd['animations']['length'];_0x158b1f++){if(_0x40a90a=this['_animEvalu'+'ator']['findClip'](_0x30f9fd['animations'][_0x158b1f]['name']),_0x40a90a)_0x40a90a['reset']();else{const _0x1a57d9=Number['isFinite'](_0x30f9fd['animations'][_0x158b1f]['speed'])?_0x30f9fd['animations'][_0x158b1f]['speed']:_0x30f9fd['speed'];_0x40a90a=new lh(_0x30f9fd['animations'][_0x158b1f]['animTrack'],this['_timeInSta'+'te'],_0x1a57d9,!(-0x1803+-0x1ba0+0x1*0x33a3),_0x30f9fd['loop'],this['_eventHand'+'ler']),_0x40a90a['name']=_0x30f9fd['animations'][_0x158b1f]['name'],this['_animEvalu'+'ator']['addClip'](_0x40a90a);}if(_0x1b0a44['time']>-0xe*0x25+-0x7a7*-0x5+-0x243d?_0x40a90a['blendWeigh'+'t']=-0x1*-0x1bd1+0xb*0x3a+-0x1e4f:_0x40a90a['blendWeigh'+'t']=_0x30f9fd['animations'][_0x158b1f]['normalized'+'Weight'],_0x40a90a['play'](),_0x4f9696)_0x40a90a['time']=_0x30f9fd['timelineDu'+'ration']*_0x1b0a44['transition'+'Offset'];else{const _0xa2b35b=_0x30f9fd['speed']>=0xff2+-0x400*0x6+0x2*0x407?0x19e3+0x513+-0x1ef6:this['activeStat'+'eDuration'];_0x40a90a['time']=_0xa2b35b;}}}['_transitio'+'nToState'](_0x4f5fb6){if(!this['_findState'](_0x4f5fb6))return;let _0x1ad93b=this['_findTrans'+'ition'](this['_activeSta'+'teName'],_0x4f5fb6);_0x1ad93b||(this['_animEvalu'+'ator']['removeClip'+'s'](),_0x1ad93b=new hh({'from':null,'to':_0x4f5fb6})),this['updateStat'+'eFromTrans'+'ition'](_0x1ad93b);}['assignAnim'+'ation'](_0x11aec3,_0x35fc11,_0x56c45c,_0x3b75b6){const _0x6c39cc=_0x11aec3['split']('.');let _0x2555c1=this['_findState'](_0x6c39cc[-0x2668*-0x1+-0xb5a+-0x1*0x1b0e]);_0x2555c1||(_0x2555c1=new ng(this,_0x6c39cc[-0x1*0x96d+-0xa69*-0x2+-0xb65],_0x56c45c),this['_states'][_0x6c39cc[-0x1f4b+0x52*-0x40+0x33cb]]=_0x2555c1,this['_stateName'+'s']['push'](_0x6c39cc[-0x6fc*0x3+0xc02+0x1ca*0x5])),_0x2555c1['addAnimati'+'on'](_0x6c39cc,_0x35fc11),this['_animEvalu'+'ator']['updateClip'+'Track'](_0x2555c1['name'],_0x35fc11),_0x56c45c!==void(-0x12e3+0x8d*0x11+0x17*0x6a)&&(_0x2555c1['speed']=_0x56c45c),_0x3b75b6!==void(-0x4*-0x7a2+-0x1d7b*-0x1+-0x3c03)&&(_0x2555c1['loop']=_0x3b75b6),!this['_playing']&&this['_activate']&&this['playable']&&this['play'](),this['_activeSta'+'teDuration'+'Dirty']=!(-0x1c25*0x1+-0x1*-0x4c+0x1bd9);}['removeNode'+'Animations'](_0x2c60ed){if(ch['indexOf'](_0x2c60ed)!==-(0x114b*0x1+0x4ce*-0x1+-0xc7c))return!(0x49*0x27+-0x11a2+0x1*0x684);const _0x27bbe1=this['_findState'](_0x2c60ed);return _0x27bbe1?(_0x27bbe1['animations']=[],!(-0x1bbf*-0x1+-0x23dd*0x1+0x81e)):(w['error']('Attempting'+'\x20to\x20unassi'+'gn\x20animati'+'on\x20tracks\x20'+'from\x20a\x20sta'+'te\x20that\x20do'+'es\x20not\x20exi'+'st.',_0x2c60ed),!(0x1*-0x1467+-0x195b+0x429*0xb));}['play'](_0x463187){_0x463187&&this['_transitio'+'nToState'](_0x463187),this['_playing']=!(0x67b+0x97a*0x1+-0xff5);}['pause'](){this['_playing']=!(-0x5*-0x523+0x1ecb*-0x1+0x51d);}['reset'](){this['_previousS'+'tateName']=null,this['_activeSta'+'teName']=_o,this['_playing']=!(-0x1*0xcad+-0x10cc+0x1d7a),this['_currTrans'+'itionTime']=-0x54*0x5b+-0x9f1+0x27ce,this['_totalTran'+'sitionTime']=0x59*-0x12+0x2348+-0x1d05,this['_isTransit'+'ioning']=!(-0x1ea+-0xdd+0x2c8),this['_timeInSta'+'te']=0x269*0x5+-0xe70+0x263,this['_timeInSta'+'teBefore']=0xd3*-0x1d+0x1*-0x1c99+0x3480,this['_animEvalu'+'ator']['removeClip'+'s']();}['rebind'](){this['_animEvalu'+'ator']['rebind']();}['update'](_0x5e68cc){if(!this['_playing'])return;let _0x37c333,_0x2b17a0,_0x13f936;(this['activeStat'+'e']['loop']||this['_timeInSta'+'te']<this['activeStat'+'eDuration'])&&(this['_timeInSta'+'teBefore']=this['_timeInSta'+'te'],this['_timeInSta'+'te']+=_0x5e68cc*this['activeStat'+'e']['speed'],!this['activeStat'+'e']['loop']&&this['_timeInSta'+'te']>this['activeStat'+'eDuration']&&(this['_timeInSta'+'te']=this['activeStat'+'eDuration'],_0x5e68cc=this['activeStat'+'eDuration']-this['_timeInSta'+'teBefore']));const _0x5b46da=this['_findTrans'+'ition'](this['_activeSta'+'teName']);if(_0x5b46da&&this['updateStat'+'eFromTrans'+'ition'](_0x5b46da),this['_isTransit'+'ioning']){if(this['_currTrans'+'itionTime']+=_0x5e68cc,this['_currTrans'+'itionTime']<=this['_totalTran'+'sitionTime']){const _0x5e09c5=this['_totalTran'+'sitionTime']!==-0x1abb*0x1+-0x1*-0xae4+0xfd7?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:0x2013+-0x112*0x19+-0x550;for(let _0x290853=0x1*-0x1939+-0x11*0xd+0x1a16;_0x290853<this['_transitio'+'nPreviousS'+'tates']['length'];_0x290853++){_0x37c333=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x290853]['name']);const _0x25a644=this['_transitio'+'nPreviousS'+'tates'][_0x290853]['weight'];for(let _0x23bbca=0x2*0x53a+0x1d35+-0x27a9;_0x23bbca<_0x37c333['animations']['length'];_0x23bbca++)_0x2b17a0=_0x37c333['animations'][_0x23bbca],_0x13f936=this['_animEvalu'+'ator']['findClip'](_0x2b17a0['name']+'.previous.'+_0x290853),_0x13f936&&(_0x13f936['blendWeigh'+'t']=(-0xff7+-0x1df6+0x2dee-_0x5e09c5)*_0x2b17a0['normalized'+'Weight']*_0x25a644);}_0x37c333=this['activeStat'+'e'];for(let _0x2943bd=0x1cdd+-0x95*0x1+-0x1c48;_0x2943bd<_0x37c333['animations']['length'];_0x2943bd++)_0x2b17a0=_0x37c333['animations'][_0x2943bd],this['_animEvalu'+'ator']['findClip'](_0x2b17a0['name'])['blendWeigh'+'t']=_0x5e09c5*_0x2b17a0['normalized'+'Weight'];}else{this['_isTransit'+'ioning']=!(-0x5c9+-0x1e1a+0x23e4);const _0x1f8b95=this['activeStat'+'eAnimation'+'s']['length'],_0x251b50=this['_animEvalu'+'ator']['clips']['length'];for(let _0x5c8668=0x1467*-0x1+-0x1*-0x12ce+0x199*0x1;_0x5c8668<_0x251b50-_0x1f8b95;_0x5c8668++)this['_animEvalu'+'ator']['removeClip'](0x1b*0xbd+-0xa2c+-0x9c3);this['_transitio'+'nPreviousS'+'tates']=[],_0x37c333=this['activeStat'+'e'];for(let _0x512445=0x2401+0x1*-0x1785+-0xc7c;_0x512445<_0x37c333['animations']['length'];_0x512445++)_0x2b17a0=_0x37c333['animations'][_0x512445],_0x13f936=this['_animEvalu'+'ator']['findClip'](_0x2b17a0['name']),_0x13f936&&(_0x13f936['blendWeigh'+'t']=_0x2b17a0['normalized'+'Weight']);}}else{if(this['activeStat'+'e']['_blendTree']['constructo'+'r']!==sl){_0x37c333=this['activeStat'+'e'];for(let _0x10ad00=-0x4d6+0x24fd+-0x2027;_0x10ad00<_0x37c333['animations']['length'];_0x10ad00++)_0x2b17a0=_0x37c333['animations'][_0x10ad00],_0x13f936=this['_animEvalu'+'ator']['findClip'](_0x2b17a0['name']),_0x13f936&&(_0x13f936['blendWeigh'+'t']=_0x2b17a0['normalized'+'Weight'],_0x2b17a0['parent']['syncAnimat'+'ions']&&(_0x13f936['speed']=_0x2b17a0['speed']));}}this['_animEvalu'+'ator']['update'](_0x5e68cc,this['activeStat'+'e']['hasAnimati'+'ons']);}}const ef=new J(),lc=new D(),lo=new re(),co=new ie(),ho=new le();class Oi extends pr{constructor(_0xdce918,_0x1cb9ae,_0x3b474f,_0x5a183d,_0x4c53d1){super(_0x1cb9ae),this['animCompon'+'ent']=_0xdce918,this['_mask']=_0x5a183d,this['layerName']=_0x3b474f,this['layerIndex']=_0x4c53d1;}static['_packFloat'](_0x13110f){return _0x13110f[0x236*-0xc+0x5*-0x676+0x3ad6];}static['_packBoole'+'an'](_0x5c2787){return!!_0x5c2787[0x1bc0+-0x5a*-0x67+-0x1552*0x3];}static['_packVec2'](_0x3e8719){return ef['x']=_0x3e8719[0xa7d+-0x25d5+0x1b58],ef['y']=_0x3e8719[0x337*0x2+-0x1*0xb03+0x496],ef;}static['_packVec3'](_0xb93e77){return lc['x']=_0xb93e77[0x265c+-0x6c*0x56+0x1*-0x214],lc['y']=_0xb93e77[0x1071+-0x34c*-0x4+-0x1da0],lc['z']=_0xb93e77[-0xa42+0x12c7+-0x883],lc;}static['_packVec4'](_0x462156){return lo['x']=_0x462156[0x141f+0x1*0x6b9+-0x1ad8],lo['y']=_0x462156[0xd3*-0x7+-0x1ede+0x24a4],lo['z']=_0x462156[-0x13f7+-0x29*-0x73+-0xc7*-0x2],lo['w']=_0x462156[0xd*-0x1c7+0x2183*0x1+-0xa65],lo;}static['_packColor'](_0x585314){return co['r']=_0x585314[0x1360+0x1ad2+-0x2e32],co['g']=_0x585314[-0x2*-0x189+0x1a53*0x1+-0xb*0x2ac],co['b']=_0x585314[-0x1*0x5a5+-0x25de+0x2b85],co['a']=_0x585314[0xf3f*0x1+-0xb32+0x2f*-0x16],co;}static['_packQuat'](_0x2dd2d4){return ho['x']=_0x2dd2d4[-0x121+0x13*0x1d7+-0x21d4],ho['y']=_0x2dd2d4[-0x1a9e+0x1451+0x64e],ho['z']=_0x2dd2d4[0x1601+-0x163e+0x3f],ho['w']=_0x2dd2d4[0x1539*0x1+0x1a*0xfb+0x31*-0xf4],ho;}['resolve'](_0x51fcac){const _0x15b7e7=Jr['encode'](_0x51fcac['entityPath'],_0x51fcac['component'],_0x51fcac['propertyPa'+'th']);let _0x2305b6=this['targetCach'+'e'][_0x15b7e7];if(_0x2305b6)return _0x2305b6;let _0x499741,_0x375820,_0x8128ee;switch(_0x51fcac['component']){case'entity':_0x499741=this['_getEntity'+'FromHierar'+'chy'](_0x51fcac['entityPath']),_0x8128ee=Jr['encode'](_0x499741['path'],'entity',_0x51fcac['propertyPa'+'th']),_0x375820=_0x499741;break;case'graph':if(_0x375820=this['findNode'](_0x51fcac),!_0x375820)return null;_0x8128ee=Jr['encode'](_0x375820['path'],'graph',_0x51fcac['propertyPa'+'th']);break;default:if(_0x499741=this['_getEntity'+'FromHierar'+'chy'](_0x51fcac['entityPath']),_0x375820=_0x499741['findCompon'+'ent'](_0x51fcac['component']),!_0x375820)return null;_0x8128ee=Jr['encode'](_0x499741['path'],_0x51fcac['component'],_0x51fcac['propertyPa'+'th']);break;}return _0x2305b6=this['_createAni'+'mTargetFor'+'Property'](_0x375820,_0x51fcac['propertyPa'+'th'],_0x8128ee),this['targetCach'+'e'][_0x15b7e7]=_0x2305b6,_0x2305b6;}['update'](_0x21dff4){const _0x3f284e=this['activeNode'+'s'];if(_0x3f284e){for(let _0x4d0924=-0x4b7*-0x8+0x12a*0x16+-0x3f54;_0x4d0924<_0x3f284e['length'];_0x4d0924++)_0x3f284e[_0x4d0924]['_dirtifyLo'+'cal']();}}['_getEntity'+'FromHierar'+'chy'](_0x58f641){if(!this['animCompon'+'ent']['entity']['name']===_0x58f641[0x8e4+0x329+0x269*-0x5])return null;const _0x2b8d0d=this['animCompon'+'ent']['entity'];return _0x58f641['length']===0x3d4+-0xc18+-0x49*-0x1d?_0x2b8d0d:_0x2b8d0d['_parent']['findByPath'](_0x58f641);}['_resolvePa'+'th'](_0x34f2cb,_0x374627,_0x230949){const _0x744f91=_0x374627['length']-(_0x230949?-0x5d8+-0x6*0x193+0xf4a:-0xb*0x38c+0x4*0x642+0x1*0xdfd);for(let _0x24507a=-0x1*0x27d+-0x13ff+0x167c;_0x24507a<_0x744f91;_0x24507a++)_0x34f2cb=_0x34f2cb[_0x374627[_0x24507a]];return _0x34f2cb;}['_setter'](_0x18d8c6,_0x80e6f,_0x589ad9){const _0x3870eb=this['_resolvePa'+'th'](_0x18d8c6,_0x80e6f),_0x2f264a=_0x80e6f[_0x80e6f['length']-(-0xb6+0xdfa+-0x5*0x2a7)],_0x451b66='set'+_0x2f264a['substring'](0x24bc+-0x244d*-0x1+-0x4909,0x1dc8+0x19*-0x61+-0x144e)['toUpperCas'+'e']()+_0x2f264a['substring'](0x2580*-0x1+-0xfe1+0x3562);if(_0x3870eb[_0x451b66]){let _0x2e068c=_0x3870eb['get'+_0x2f264a['substring'](-0xa9+-0xf*-0x3d+-0x2ea*0x1,0x1*0x1508+0x26cf+-0x3bd6)['toUpperCas'+'e']()+_0x2f264a['substring'](-0x26b7+-0x3c7*0x1+0x17*0x1d9)]['bind'](_0x3870eb)();_0x2e068c=[_0x2e068c['x'],_0x2e068c['y'],_0x2e068c['z'],_0x2e068c['w']];const _0x32e5b4=_0x3870eb[_0x451b66]['bind'](_0x3870eb);return{'set':_0x476ad5=>{_0x32e5b4(_0x589ad9(_0x476ad5));},'get':()=>_0x2e068c};}const _0x41e6b5=_0x3870eb[_0x2f264a];if(typeof _0x41e6b5=='object'&&_0x41e6b5['hasOwnProp'+'erty']('copy'))return function(_0xc11e25){_0x41e6b5['copy'](_0x589ad9(_0xc11e25));};if([J,D,re,ie,le]['indexOf'](_0x3870eb['constructo'+'r'])!==-(0x2f9*-0x1+0x1*0x1f0a+-0x1c10)&&_0x80e6f['length']>0x241+0x8a5*-0x1+-0x1*-0x665){const _0x52a9c0=_0x80e6f['length']>-0xb3*-0x1+0xaa*0x14+0x49*-0x31?this['_resolvePa'+'th'](_0x18d8c6,_0x80e6f['slice'](0x1112*0x1+-0x4a*0x7a+-0x919*-0x2,-(0x1e4a+-0x243a+0x9*0xa9))):_0x18d8c6,_0x6fa347=_0x80e6f[_0x80e6f['length']-(0xf12+0x1390+-0x22a0)];return function(_0x2ef4e9){_0x3870eb[_0x2f264a]=_0x589ad9(_0x2ef4e9),_0x52a9c0[_0x6fa347]=_0x3870eb;};}return function(_0x49d966){_0x3870eb[_0x2f264a]=_0x589ad9(_0x49d966);};}['_createAni'+'mTargetFor'+'Property'](_0x35cbb7,_0x4e8062,_0x5a60e5){if(this['handlers']&&_0x4e8062[0x1912*-0x1+-0x1*0x20a7+0x1*0x39b9]['startsWith']('weight.'))return this['handlers']['weight'](_0x35cbb7,_0x4e8062[-0x935+0x1085+-0x270*0x3]['replace']('weight.',''));if(this['handlers']&&_0x4e8062[0x12b5+-0x47f+-0xe36]==='material'&&_0x4e8062['length']===0x1160+0x68*0x59+-0x3586*0x1){const _0x20aed8=_0x4e8062[-0x1f8f+0x14e1+0xaaf];if(_0x20aed8['endsWith']('Map'))return this['handlers']['materialTe'+'xture'](_0x35cbb7,_0x20aed8);}const _0xc4295f=this['_resolvePa'+'th'](_0x35cbb7,_0x4e8062,!(0x403*0x4+0xe5*-0x5+0xb93*-0x1));if(typeof _0xc4295f>'u')return null;let _0x55eb93,_0x3e71c5,_0x4c5330;if(typeof _0xc4295f=='number')_0x55eb93=this['_setter'](_0x35cbb7,_0x4e8062,Oi['_packFloat']),_0x3e71c5='vector',_0x4c5330=0x1*0x16b5+-0xbcf+0x1*-0xae5;else{if(typeof _0xc4295f=='boolean')_0x55eb93=this['_setter'](_0x35cbb7,_0x4e8062,Oi['_packBoole'+'an']),_0x3e71c5='vector',_0x4c5330=0x1328+-0x248a+0x1163;else{if(typeof _0xc4295f=='object')switch(_0xc4295f['constructo'+'r']){case J:_0x55eb93=this['_setter'](_0x35cbb7,_0x4e8062,Oi['_packVec2']),_0x3e71c5='vector',_0x4c5330=0x5f2*-0x1+-0x2b4+-0x8a8*-0x1;break;case D:_0x55eb93=this['_setter'](_0x35cbb7,_0x4e8062,Oi['_packVec3']),_0x3e71c5='vector',_0x4c5330=-0x26c7+-0x1c44+-0x6*-0xb2d;break;case re:_0x55eb93=this['_setter'](_0x35cbb7,_0x4e8062,Oi['_packVec4']),_0x3e71c5='vector',_0x4c5330=-0x75+0x11a+0x1*-0xa1;break;case ie:_0x55eb93=this['_setter'](_0x35cbb7,_0x4e8062,Oi['_packColor']),_0x3e71c5='vector',_0x4c5330=-0x27*-0x2b+-0x13+-0x676;break;case le:_0x55eb93=this['_setter'](_0x35cbb7,_0x4e8062,Oi['_packQuat']),_0x3e71c5='quaternion',_0x4c5330=-0x602+-0x59*0x52+0x2288;break;default:return null;}}}return _0x4e8062['indexOf']('material')!==-(0x1bb*0x13+0x1*-0x1c3e+0x4a2*-0x1)?new Yf(_0x2c3d67=>{_0x55eb93(_0x2c3d67),_0x35cbb7['material']['update']();},_0x3e71c5,_0x4c5330,_0x5a60e5):new Yf(_0x55eb93,_0x3e71c5,_0x4c5330,_0x5a60e5);}['rebind'](){this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={},this['animCompon'+'ent']['rootBone']?this['graph']=this['animCompon'+'ent']['rootBone']:this['graph']=this['animCompon'+'ent']['entity'];const _0xbe510c={},_0x41c443=function(_0x1ab35b){_0xbe510c[_0x1ab35b['name']]=_0x1ab35b;for(let _0x6140c6=0x1ec8+-0x72b*0x3+-0x947;_0x6140c6<_0x1ab35b['children']['length'];++_0x6140c6)_0x41c443(_0x1ab35b['children'][_0x6140c6]);};_0x41c443(this['graph']),this['nodes']=_0xbe510c;}}class tL{constructor(_0x479b5d,_0x386fe9,_0x25eba2,_0x20a868=0x2*0x3ce+-0xea3+0x708,_0x47bae7=av){h(this,'_name'),h(this,'_controlle'+'r'),h(this,'_component'),h(this,'_weight'),h(this,'_blendType'),h(this,'_mask',null),h(this,'_blendTime',-0x3*-0xb41+-0x1*0x6ac+-0x1b17),h(this,'_blendTime'+'Elapsed',0x1*0x229d+-0x305+0x4*-0x7e6),h(this,'_startingW'+'eight',-0xf1c*-0x2+0x1*-0x7ca+0x166e*-0x1),h(this,'_targetWei'+'ght',-0x4*0x19a+-0x1*0x1ec7+0x252f),(this['_name']=_0x479b5d,this['_controlle'+'r']=_0x386fe9,this['_component']=_0x25eba2,this['_weight']=_0x20a868,this['_blendType']=_0x47bae7);}get['name'](){return this['_name'];}set['playing'](_0x5c5562){this['_controlle'+'r']['playing']=_0x5c5562;}get['playing'](){return this['_controlle'+'r']['playing'];}get['playable'](){return this['_controlle'+'r']['playable'];}get['activeStat'+'e'](){return this['_controlle'+'r']['activeStat'+'eName'];}get['previousSt'+'ate'](){return this['_controlle'+'r']['previousSt'+'ateName'];}get['activeStat'+'eProgress'](){return this['_controlle'+'r']['activeStat'+'eProgress'];}get['activeStat'+'eDuration'](){return this['_controlle'+'r']['activeStat'+'eDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x5b8cc3){const _0x1d392b=this['_controlle'+'r'],_0x25bbb5=_0x1d392b['playing'];_0x1d392b['playing']=!(-0x8e*-0x39+-0xab8+-0x2*0xa73),_0x1d392b['activeStat'+'eCurrentTi'+'me']=_0x5b8cc3,_0x25bbb5||_0x1d392b['update'](0x6fb+0x1*-0x125+-0x53*0x12),_0x1d392b['playing']=_0x25bbb5;}get['activeStat'+'eCurrentTi'+'me'](){return this['_controlle'+'r']['activeStat'+'eCurrentTi'+'me'];}get['transition'+'ing'](){return this['_controlle'+'r']['transition'+'ing'];}get['transition'+'Progress'](){return this['transition'+'ing']?this['_controlle'+'r']['transition'+'Progress']:null;}get['states'](){return this['_controlle'+'r']['states'];}set['weight'](_0xaeef29){this['_weight']=_0xaeef29,this['_component']['dirtifyTar'+'gets']();}get['weight'](){return this['_weight'];}set['blendType'](_0x10abae){_0x10abae!==this['_blendType']&&(this['_blendType']=_0x10abae,this['_controlle'+'r']['normalizeW'+'eights']&&this['_component']['rebind']());}get['blendType'](){return this['_blendType'];}set['mask'](_0x183f5e){this['_controlle'+'r']['assignMask'](_0x183f5e)&&this['_component']['rebind'](),this['_mask']=_0x183f5e;}get['mask'](){return this['_mask'];}['play'](_0x49a631){this['_controlle'+'r']['play'](_0x49a631);}['pause'](){this['_controlle'+'r']['pause']();}['reset'](){this['_controlle'+'r']['reset']();}['rebind'](){this['_controlle'+'r']['rebind']();}['update'](_0x1ca945){this['_blendTime']&&(this['_blendTime'+'Elapsed']<this['_blendTime']?(this['weight']=Y['lerp'](this['_startingW'+'eight'],this['_targetWei'+'ght'],this['_blendTime'+'Elapsed']/this['_blendTime']),this['_blendTime'+'Elapsed']+=_0x1ca945):(this['weight']=this['_targetWei'+'ght'],this['_blendTime']=-0x1e53+-0x229f+0x3d2*0x11,this['_blendTime'+'Elapsed']=-0x1*0xa5b+-0x10d6+0x1b31,this['_startingW'+'eight']=-0x8dd+0x374+0x569,this['_targetWei'+'ght']=-0x1*-0x36d+-0x13*-0x1c7+-0x2532)),this['_controlle'+'r']['update'](_0x1ca945);}['blendToWei'+'ght'](_0x3f38f3,_0x131367){this['_startingW'+'eight']=this['weight'],this['_targetWei'+'ght']=_0x3f38f3,this['_blendTime']=Math['max'](0x1*-0x830+-0x15*-0x6a+0x1a*-0x5,_0x131367),this['_blendTime'+'Elapsed']=0x1011*0x1+-0x1b2f+0xb1e;}['assignAnim'+'ation'](_0x246963,_0x5bd17c,_0x4d8221,_0x2c0d3d){if(!(_0x5bd17c instanceof Zi)){w['error']('assignAnim'+'ation:\x20ani'+'mTrack\x20sup'+'plied\x20to\x20f'+'unction\x20wa'+'s\x20not\x20of\x20t'+'ype\x20AnimTr'+'ack');return;}this['_controlle'+'r']['assignAnim'+'ation'](_0x246963,_0x5bd17c,_0x4d8221,_0x2c0d3d),this['_controlle'+'r']['_transitio'+'ns']['length']===0x88+-0x1005+0xf7d&&this['_controlle'+'r']['_transitio'+'ns']['push'](new hh({'from':'START','to':_0x246963})),this['_component']['activate']&&this['_component']['playable']&&(this['_component']['playing']=!(0x7b4*-0x2+0x1*0x1eb+0xd7d));}['removeNode'+'Animations'](_0x208adb){this['_controlle'+'r']['removeNode'+'Animations'](_0x208adb)&&(this['_component']['playing']=!(-0x17a*0x16+0x1c96+-0x25*-0x1b));}['getAnimati'+'onAsset'](_0x38c05a){return this['_component']['animationA'+'ssets'][this['name']+':'+_0x38c05a];}['transition'](_0x461711,_0x107448=0x8b*0x3d+-0x1277+-0x1d5*0x8,_0x12099a=null){this['_controlle'+'r']['updateStat'+'eFromTrans'+'ition'](new hh({'from':this['_controlle'+'r']['activeStat'+'eName'],'to':_0x461711,'time':_0x107448,'transitionOffset':_0x12099a}));}}class Ic{constructor(_0x18ab30){if(this['_layers']=[],this['_parameter'+'s']={},Array['isArray'](_0x18ab30['layers']))this['_layers']=_0x18ab30['layers'];else for(const _0x5b0cba in _0x18ab30['layers']){const _0x321b01=_0x18ab30['layers'][_0x5b0cba],_0x2785e4={'name':_0x321b01['name'],'blendType':_0x321b01['blendType'],'weight':_0x321b01['weight'],'states':[],'transitions':[]};for(let _0x2d9800=0xeba*0x1+0x1b25+-0x29df;_0x2d9800<_0x321b01['states']['length'];_0x2d9800++)_0x2785e4['states']['push'](_0x18ab30['states'][_0x321b01['states'][_0x2d9800]]);for(let _0x48c7a6=-0xe16+-0x1*-0x26d5+0xb5*-0x23;_0x48c7a6<_0x321b01['transition'+'s']['length'];_0x48c7a6++){const _0x2889e9=_0x18ab30['transition'+'s'][_0x321b01['transition'+'s'][_0x48c7a6]];if(_0x2889e9['conditions']&&!Array['isArray'](_0x2889e9['conditions'])){const _0x3b2673=Object['keys'](_0x2889e9['conditions']),_0x2a1681=[];for(let _0x5205dc=-0x1adf*0x1+0x1df*0x3+-0x1542*-0x1;_0x5205dc<_0x3b2673['length'];_0x5205dc++){const _0x41ccdf=_0x2889e9['conditions'][_0x3b2673[_0x5205dc]];_0x41ccdf['parameterN'+'ame']&&_0x2a1681['push'](_0x41ccdf);}_0x2889e9['conditions']=_0x2a1681;}Number['isInteger'](_0x2889e9['from'])&&(_0x2889e9['from']=_0x18ab30['states'][_0x2889e9['from']]['name']),Number['isInteger'](_0x2889e9['to'])&&(_0x2889e9['to']=_0x18ab30['states'][_0x2889e9['to']]['name']),_0x2785e4['transition'+'s']['push'](_0x2889e9);}this['_layers']['push'](_0x2785e4);}for(const _0x22646e in _0x18ab30['parameters']){const _0x17aabf=_0x18ab30['parameters'][_0x22646e];this['_parameter'+'s'][_0x17aabf['name']]={'type':_0x17aabf['type'],'value':_0x17aabf['value']};}}get['parameters'](){return Object['assign']({},this['_parameter'+'s']);}get['layers'](){return this['_layers'];}}class cv extends we{constructor(){super(...arguments),h(this,'_stateGrap'+'hAsset',null),h(this,'_animation'+'Assets',{}),h(this,'_speed',0x1c3d+0x271+-0x1ead),h(this,'_activate',!(0x15a9+0x1d*0x6+-0x1657)),h(this,'_playing',!(-0x268d+0x55*0x23+0x1aef)),h(this,'_rootBone',null),h(this,'_stateGrap'+'h',null),h(this,'_layers',[]),h(this,'_layerIndi'+'ces',{}),h(this,'_parameter'+'s',{}),h(this,'_targets',{}),h(this,'_consumedT'+'riggers',new Set()),h(this,'_normalize'+'Weights',!(-0x1bec*-0x1+-0x1c02+0x17*0x1)),h(this,'findParame'+'ter',_0x409552=>this['_parameter'+'s'][_0x409552]),h(this,'consumeTri'+'gger',_0x170c3c=>{this['_consumedT'+'riggers']['add'](_0x170c3c);});}set['stateGraph'+'Asset'](_0x4ebc56){if(_0x4ebc56===null){this['removeStat'+'eGraph']();return;}this['_stateGrap'+'hAsset']&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);let _0x193539,_0x4ef73d;_0x4ebc56 instanceof pe?(_0x193539=_0x4ebc56['id'],_0x4ef73d=this['system']['app']['assets']['get'](_0x193539),_0x4ef73d||(this['system']['app']['assets']['add'](_0x4ebc56),_0x4ef73d=this['system']['app']['assets']['get'](_0x193539))):(_0x193539=_0x4ebc56,_0x4ef73d=this['system']['app']['assets']['get'](_0x193539)),!(!_0x4ef73d||this['_stateGrap'+'hAsset']===_0x193539)&&(_0x4ef73d['resource']?(this['_stateGrap'+'h']=_0x4ef73d['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']),_0x4ef73d['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this)):(_0x4ef73d['once']('load',_0x294d83=>{this['_stateGrap'+'h']=_0x294d83['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']);}),_0x4ef73d['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this),this['system']['app']['assets']['load'](_0x4ef73d)),this['_stateGrap'+'hAsset']=_0x193539);}get['stateGraph'+'Asset'](){return this['_stateGrap'+'hAsset'];}set['normalizeW'+'eights'](_0x1cb9c1){this['_normalize'+'Weights']=_0x1cb9c1,this['unbind']();}get['normalizeW'+'eights'](){return this['_normalize'+'Weights'];}set['animationA'+'ssets'](_0x4d2e84){this['_animation'+'Assets']=_0x4d2e84,this['loadAnimat'+'ionAssets']();}get['animationA'+'ssets'](){return this['_animation'+'Assets'];}set['speed'](_0x55b658){this['_speed']=_0x55b658;}get['speed'](){return this['_speed'];}set['activate'](_0x263730){this['_activate']=_0x263730;}get['activate'](){return this['_activate'];}set['playing'](_0x412b67){this['_playing']=_0x412b67;}get['playing'](){return this['_playing'];}set['rootBone'](_0x40b79a){if(typeof _0x40b79a=='string'){const _0x125dc6=this['entity']['root']['findByGuid'](_0x40b79a);w['assert'](_0x125dc6,'rootBone\x20e'+'ntity\x20for\x20'+'supplied\x20g'+'uid:'+_0x40b79a+('\x20cannot\x20be'+'\x20found\x20in\x20'+'the\x20scene')),this['_rootBone']=_0x125dc6;}else _0x40b79a instanceof lt?this['_rootBone']=_0x40b79a:this['_rootBone']=null;this['rebind']();}get['rootBone'](){return this['_rootBone'];}set['stateGraph'](_0x36ccd4){this['_stateGrap'+'h']=_0x36ccd4;}get['stateGraph'](){return this['_stateGrap'+'h'];}get['layers'](){return this['_layers'];}set['layerIndic'+'es'](_0x5f2668){this['_layerIndi'+'ces']=_0x5f2668;}get['layerIndic'+'es'](){return this['_layerIndi'+'ces'];}set['parameters'](_0x3bc427){this['_parameter'+'s']=_0x3bc427;}get['parameters'](){return this['_parameter'+'s'];}set['targets'](_0xb245f0){this['_targets']=_0xb245f0;}get['targets'](){return this['_targets'];}get['playable'](){for(let _0x510286=-0x19fa+0x12ba+0x740;_0x510286<this['_layers']['length'];_0x510286++)if(!this['_layers'][_0x510286]['playable'])return!(-0x449*0x2+0x72*-0x1+0x1*0x905);return!(0x2207*-0x1+0x1*-0x1036+0x3*0x10bf);}get['baseLayer'](){return this['_layers']['length']>0x1cde+0x222c+-0x3f0a?this['_layers'][0x2534+-0x1*0xa1+-0x2493]:null;}['_onStateGr'+'aphAssetCh'+'angeEvent'](_0x46a7fb){const _0x1df0d3=this['animationA'+'ssets'],_0x1add58=this['layers']['map'](_0x3f5cb7=>_0x3f5cb7['mask']);this['removeStat'+'eGraph'](),this['_stateGrap'+'h']=new Ic(_0x46a7fb['_data']),this['loadStateG'+'raph'](this['_stateGrap'+'h']),this['animationA'+'ssets']=_0x1df0d3,this['loadAnimat'+'ionAssets'](),this['layers']['forEach']((_0x5d294b,_0x29b740)=>{_0x5d294b['mask']=_0x1add58[_0x29b740];}),this['rebind']();}['dirtifyTar'+'gets'](){const _0x18e0fd=Object['values'](this['_targets']);for(let _0x469d33=0xa*-0x1b6+-0xce*0x3+-0x31*-0x66;_0x469d33<_0x18e0fd['length'];_0x469d33++)_0x18e0fd[_0x469d33]['dirty']=!(0x140*-0x15+-0x1d6*0xd+0x321e);}['_addLayer']({name:_0x45964e,states:_0x1af962,transitions:_0x4b9c7e,weight:_0xd8746a,mask:_0x8c39c7,blendType:_0x269d76}){let _0x120e25;this['rootBone']?_0x120e25=this['rootBone']:_0x120e25=this['entity'];const _0x574ed8=this['_layers']['length'],_0x1f49d5=new Oi(this,_0x120e25,_0x45964e,_0x8c39c7,_0x574ed8),_0x478fcf=new nv(_0x1f49d5),_0x5301ea=new eL(_0x478fcf,_0x1af962,_0x4b9c7e,this['_activate'],this,this['findParame'+'ter'],this['consumeTri'+'gger']);return this['_layers']['push'](new tL(_0x45964e,_0x5301ea,this,_0xd8746a,_0x269d76)),this['_layerIndi'+'ces'][_0x45964e]=_0x574ed8,this['_layers'][_0x574ed8];}['addLayer'](_0x183240,_0x153a03,_0x4fe060,_0x1225a5){const _0x29fc9a=this['findAnimat'+'ionLayer'](_0x183240);if(_0x29fc9a)return _0x29fc9a;const _0x5f0e1c=[{'name':'START','speed':0x1}],_0x2a1d45=[];return this['_addLayer']({'name':_0x183240,'states':_0x5f0e1c,'transitions':_0x2a1d45,'weight':_0x153a03,'mask':_0x4fe060,'blendType':_0x1225a5});}['_assignPar'+'ameters'](_0x21564e){this['_parameter'+'s']={};const _0xf1f0f4=Object['keys'](_0x21564e['parameters']);for(let _0x2259b5=0xdfd+-0xf07*0x2+-0x9*-0x1c9;_0x2259b5<_0xf1f0f4['length'];_0x2259b5++){const _0x593e49=_0xf1f0f4[_0x2259b5];this['_parameter'+'s'][_0x593e49]={'type':_0x21564e['parameters'][_0x593e49]['type'],'value':_0x21564e['parameters'][_0x593e49]['value']};}}['loadStateG'+'raph'](_0x29b943){this['_stateGrap'+'h']=_0x29b943,this['_assignPar'+'ameters'](_0x29b943),this['_layers']=[];let _0x56321b=!(0x9*-0xc7+0xa2*-0x9+0xcb2);for(let _0x34ed4b=0x1*-0x8a5+-0x2328+0x1*0x2bcd;_0x34ed4b<_0x29b943['layers']['length'];_0x34ed4b++){const _0x1cabe2=_0x29b943['layers'][_0x34ed4b];this['_addLayer']({..._0x1cabe2}),_0x1cabe2['states']['some'](_0x131755=>_0x131755['blendTree'])&&(_0x56321b=!(0x12a0+0xd3d+-0x1fdd));}_0x56321b||this['setupAnima'+'tionAssets']();}['setupAnima'+'tionAssets'](){for(let _0x42fa20=0x201b*0x1+0x120d+0x14*-0x282;_0x42fa20<this['_layers']['length'];_0x42fa20++){const _0x28455=this['_layers'][_0x42fa20],_0x5165a1=_0x28455['name'];for(let _0x28f455=0x667*-0x6+-0x679*-0x4+0xc86;_0x28f455<_0x28455['states']['length'];_0x28f455++){const _0x3c1b7e=_0x28455['states'][_0x28f455];if(ch['indexOf'](_0x3c1b7e)===-(0x11b*0xb+0x2*-0x279+0x47*-0x1a)){const _0x318acb=_0x5165a1+':'+_0x3c1b7e;this['_animation'+'Assets'][_0x318acb]||(this['_animation'+'Assets'][_0x318acb]={'asset':null});}}}this['loadAnimat'+'ionAssets']();}['loadAnimat'+'ionAssets'](){for(let _0x42aa32=0x911*0x3+0x26a5+-0x158*0x31;_0x42aa32<this['_layers']['length'];_0x42aa32++){const _0x9ce756=this['_layers'][_0x42aa32];for(let _0x258cae=0x5b*-0x62+-0x1*-0x11db+0x10fb;_0x258cae<_0x9ce756['states']['length'];_0x258cae++){const _0x157dff=_0x9ce756['states'][_0x258cae];if(ch['indexOf'](_0x157dff)!==-(-0x1f26+0x164b+0x8dc))continue;const _0x1c54ff=this['_animation'+'Assets'][_0x9ce756['name']+':'+_0x157dff];if(!_0x1c54ff||!_0x1c54ff['asset']){this['findAnimat'+'ionLayer'](_0x9ce756['name'])['assignAnim'+'ation'](_0x157dff,Zi['EMPTY']);continue;}const _0x4f1848=_0x1c54ff['asset'],_0x16b7b8=this['system']['app']['assets']['get'](_0x4f1848);_0x16b7b8&&(_0x16b7b8['resource']?this['onAnimatio'+'nAssetLoad'+'ed'](_0x9ce756['name'],_0x157dff,_0x16b7b8):(_0x16b7b8['once']('load',function(_0x50c1b7,_0x5dc652){return function(_0x5b87cf){this['onAnimatio'+'nAssetLoad'+'ed'](_0x50c1b7,_0x5dc652,_0x5b87cf);}['bind'](this);}['bind'](this)(_0x9ce756['name'],_0x157dff)),this['system']['app']['assets']['load'](_0x16b7b8)));}}}['onAnimatio'+'nAssetLoad'+'ed'](_0x2d10f7,_0x201430,_0x5b1b8e){this['findAnimat'+'ionLayer'](_0x2d10f7)['assignAnim'+'ation'](_0x201430,_0x5b1b8e['resource']);}['removeStat'+'eGraph'](){this['_stateGrap'+'h']=null,this['_stateGrap'+'hAsset']=null,this['_animation'+'Assets']={},this['_layers']=[],this['_layerIndi'+'ces']={},this['_parameter'+'s']={},this['_playing']=!(0x1*0x191b+-0x1*-0x12fa+-0x1a*0x1b2),this['unbind'](),this['_targets']={};}['reset'](){this['_assignPar'+'ameters'](this['_stateGrap'+'h']);for(let _0x5f47c5=0x7*0x2e7+0x1094+0x24e5*-0x1;_0x5f47c5<this['_layers']['length'];_0x5f47c5++){const _0x269f33=this['_layers'][_0x5f47c5]['playing'];this['_layers'][_0x5f47c5]['reset'](),this['_layers'][_0x5f47c5]['playing']=_0x269f33;}}['unbind'](){this['_normalize'+'Weights']||Object['keys'](this['_targets'])['forEach'](_0x70553b=>{this['_targets'][_0x70553b]['unbind']();});}['rebind'](){this['_targets']={};for(let _0x223743=0x186f+-0x2074+-0x1*-0x805;_0x223743<this['_layers']['length'];_0x223743++)this['_layers'][_0x223743]['rebind']();}['findAnimat'+'ionLayer'](_0x171a27){const _0x5a41cf=this['_layerIndi'+'ces'][_0x171a27];return this['_layers'][_0x5a41cf]||null;}['addAnimati'+'onState'](_0x24c7d9,_0x125fbb,_0xead470=-0x1099*0x1+0x1bc*-0x3+0x15ce,_0xd97e51=!(-0x1b85+0x26f4+0x1*-0xb6f),_0x4e9df7='Base'){var _0x3ab3bb;this['_stateGrap'+'h']||this['loadStateG'+'raph'](new Ic({'layers':[{'name':_0x4e9df7,'states':[{'name':'START','speed':0x1},{'name':_0x24c7d9,'speed':_0xead470,'loop':_0xd97e51,'defaultState':!(-0x1b5a+0x8cf+0x128b)}],'transitions':[{'from':'START','to':_0x24c7d9}]}],'parameters':{}}));const _0x434c34=this['findAnimat'+'ionLayer'](_0x4e9df7);_0x434c34?_0x434c34['assignAnim'+'ation'](_0x24c7d9,_0x125fbb,_0xead470,_0xd97e51):(_0x3ab3bb=this['addLayer'](_0x4e9df7))==null||_0x3ab3bb['assignAnim'+'ation'](_0x24c7d9,_0x125fbb,_0xead470,_0xd97e51);}['assignAnim'+'ation'](_0x33d619,_0x48b043,_0x2ad633,_0x1c17a6=0xbe*0x28+-0x1*-0xccb+-0x2a7a,_0xf031a0=!(0x8*-0x40+0x479*-0x5+0x185d)){if(!this['_stateGrap'+'h']&&_0x33d619['indexOf']('.')===-(-0x945+-0x1d1a*-0x1+-0x13d4)){this['loadStateG'+'raph'](new Ic({'layers':[{'name':'Base','states':[{'name':'START','speed':0x1},{'name':_0x33d619,'speed':_0x1c17a6,'loop':_0xf031a0,'defaultState':!(0x31*-0xb1+-0x2c*-0xa5+0x585)}],'transitions':[{'from':'START','to':_0x33d619}]}],'parameters':{}})),this['baseLayer']['assignAnim'+'ation'](_0x33d619,_0x48b043);return;}const _0x28365e=_0x2ad633?this['findAnimat'+'ionLayer'](_0x2ad633):this['baseLayer'];if(!_0x28365e){w['error']('assignAnim'+'ation:\x20Try'+'ing\x20to\x20ass'+'ign\x20an\x20ani'+'m\x20track\x20to'+'\x20a\x20layer\x20t'+'hat\x20doesn\x27'+'t\x20exist');return;}_0x28365e['assignAnim'+'ation'](_0x33d619,_0x48b043,_0x1c17a6,_0xf031a0);}['removeNode'+'Animations'](_0x5ca52f,_0x1dcf16){const _0x123a22=_0x1dcf16?this['findAnimat'+'ionLayer'](_0x1dcf16):this['baseLayer'];if(!_0x123a22){w['error']('removeStat'+'eAnimation'+'s:\x20Trying\x20'+'to\x20remove\x20'+'animation\x20'+'tracks\x20fro'+'m\x20a\x20state\x20'+'before\x20the'+'\x20state\x20gra'+'ph\x20has\x20bee'+'n\x20loaded.\x20'+'Have\x20you\x20c'+'alled\x20load'+'StateGraph'+'?');return;}_0x123a22['removeNode'+'Animations'](_0x5ca52f);}['getParamet'+'erValue'](_0x3c9879,_0x3e6f48){const _0x38e496=this['_parameter'+'s'][_0x3c9879];if(_0x38e496&&_0x38e496['type']===_0x3e6f48)return _0x38e496['value'];w['log']('Cannot\x20get'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0x3c9879+('\x22\x20of\x20type\x20'+'\x22')+_0x3e6f48+'\x22');}['setParamet'+'erValue'](_0x14aa3f,_0x6954f4,_0x370ad6){const _0x125459=this['_parameter'+'s'][_0x14aa3f];if(_0x125459&&_0x125459['type']===_0x6954f4){_0x125459['value']=_0x370ad6;return;}w['log']('Cannot\x20set'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0x14aa3f+('\x22\x20of\x20type\x20'+'\x22')+_0x6954f4+'\x22');}['getFloat'](_0x3796b7){return this['getParamet'+'erValue'](_0x3796b7,rg);}['setFloat'](_0x571edf,_0x45e6f1){this['setParamet'+'erValue'](_0x571edf,rg,_0x45e6f1);}['getInteger'](_0x8eb872){return this['getParamet'+'erValue'](_0x8eb872,ig);}['setInteger'](_0x2cd5d5,_0x3347e4){typeof _0x3347e4=='number'&&_0x3347e4%(0x25ad+-0x13d0+-0x11dc)===-0x24ed+0x1ee5+-0xc1*-0x8?this['setParamet'+'erValue'](_0x2cd5d5,ig,_0x3347e4):w['error']('Attempting'+'\x20to\x20assign'+'\x20non\x20integ'+'er\x20value\x20t'+'o\x20integer\x20'+'parameter',_0x2cd5d5,_0x3347e4);}['getBoolean'](_0x7f03b7){return this['getParamet'+'erValue'](_0x7f03b7,ag);}['setBoolean'](_0x2c3c88,_0x3d83f9){this['setParamet'+'erValue'](_0x2c3c88,ag,!!_0x3d83f9);}['getTrigger'](_0x7955b0){return this['getParamet'+'erValue'](_0x7955b0,Dc);}['setTrigger'](_0x54f235,_0x4f1497=!(0xda4+-0x1*-0x1c55+-0x29f8)){this['setParamet'+'erValue'](_0x54f235,Dc,!(-0x2609+0x236c+-0xdf*-0x3)),_0x4f1497&&this['_consumedT'+'riggers']['add'](_0x54f235);}['resetTrigg'+'er'](_0x3dd341){this['setParamet'+'erValue'](_0x3dd341,Dc,!(0x136b+0x11*-0xfb+-0x13*0x25));}['onBeforeRe'+'move'](){Number['isFinite'](this['_stateGrap'+'hAsset'])&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);}['update'](_0x266533){for(let _0x5ab3d8=0x25*0x28+-0xc2*-0x7+-0x56*0x21;_0x5ab3d8<this['layers']['length'];_0x5ab3d8++)this['layers'][_0x5ab3d8]['update'](_0x266533*this['speed']);this['_consumedT'+'riggers']['forEach'](_0x39ac73=>{this['parameters'][_0x39ac73]['value']=!(-0x1794+0x13c1+0xc4*0x5);}),this['_consumedT'+'riggers']['clear']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0xb23167,_0x3c8c27){_0xb23167['rootBone']&&_0x3c8c27[_0xb23167['rootBone']['getGuid']()]?this['rootBone']=_0x3c8c27[_0xb23167['rootBone']['getGuid']()]:this['rebind']();}}class sL{constructor(){this['enabled']=!(0x11a*0x8+-0x9*-0x6f+-0x69*0x1f);}}const Jf=['enabled'];class iL extends ct{constructor(_0x341eb0){super(_0x341eb0),this['id']='anim',this['ComponentT'+'ype']=cv,this['DataType']=sL,this['schema']=Jf,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0xfdddd7,_0x29004e,_0x309a95){super['initialize'+'ComponentD'+'ata'](_0xfdddd7,_0x29004e,Jf);const _0x27be00=['animationA'+'ssets','stateGraph','layers','masks'];Object['keys'](_0x29004e)['forEach'](_0x3bf73f=>{_0x27be00['includes'](_0x3bf73f)||(_0xfdddd7[_0x3bf73f]=_0x29004e[_0x3bf73f]);}),_0x29004e['stateGraph']&&(_0xfdddd7['stateGraph']=_0x29004e['stateGraph'],_0xfdddd7['loadStateG'+'raph'](_0xfdddd7['stateGraph'])),_0x29004e['layers']&&_0x29004e['layers']['forEach']((_0x31c517,_0x4b27e9)=>{_0x31c517['_controlle'+'r']['states']['forEach'](_0x304ce9=>{_0x31c517['_controlle'+'r']['_states'][_0x304ce9]['_animation'+'List']['forEach'](_0xcfad0c=>{if(!_0xcfad0c['animTrack']||_0xcfad0c['animTrack']===Zi['EMPTY']){const _0x5e01d0=this['app']['assets']['get'](_0x31c517['_component']['_animation'+'Assets'][_0x31c517['name']+':'+_0xcfad0c['name']]['asset']);_0x5e01d0&&!_0x5e01d0['loaded']&&_0x5e01d0['once']('load',()=>{_0xfdddd7['layers'][_0x4b27e9]['assignAnim'+'ation'](_0xcfad0c['name'],_0x5e01d0['resource']);});}else _0xfdddd7['layers'][_0x4b27e9]['assignAnim'+'ation'](_0xcfad0c['name'],_0xcfad0c['animTrack']);});});}),_0x29004e['animationA'+'ssets']&&(_0xfdddd7['animationA'+'ssets']=Object['assign'](_0xfdddd7['animationA'+'ssets'],_0x29004e['animationA'+'ssets'])),_0x29004e['masks']&&Object['keys'](_0x29004e['masks'])['forEach'](_0x46c9bb=>{if(_0xfdddd7['layers'][_0x46c9bb]){const _0x268630=_0x29004e['masks'][_0x46c9bb]['mask'],_0x2579a3={};Object['keys'](_0x268630)['forEach'](_0x1447dd=>{_0x2579a3[decodeURI(_0x1447dd)]=_0x268630[_0x1447dd];}),_0xfdddd7['layers'][_0x46c9bb]['mask']=_0x2579a3;}});}['onAnimatio'+'nUpdate'](_0x32b668){const _0x198b8f=this['store'];for(const _0x2ecc47 in _0x198b8f)if(_0x198b8f['hasOwnProp'+'erty'](_0x2ecc47)){const _0x51e339=_0x198b8f[_0x2ecc47]['entity']['anim'];_0x51e339['data']['enabled']&&_0x51e339['entity']['enabled']&&_0x51e339['playing']&&_0x51e339['update'](_0x32b668);}}['cloneCompo'+'nent'](_0x345dd,_0x244698){let _0x26dc9e;(!_0x345dd['anim']['rootBone']||_0x345dd['anim']['rootBone']===_0x345dd)&&(_0x26dc9e={},_0x345dd['anim']['layers']['forEach']((_0x354522,_0x121c42)=>{if(_0x354522['mask']){const _0x4664d0={};Object['keys'](_0x354522['mask'])['forEach'](_0x41a4d1=>{const _0x13d4c5=_0x41a4d1['split']('/');_0x13d4c5['shift']();const _0x5bc16d=[_0x244698['name'],..._0x13d4c5]['join']('/');_0x4664d0[_0x5bc16d]=_0x354522['mask'][_0x41a4d1];}),_0x26dc9e[_0x121c42]={'mask':_0x4664d0};}}));const _0x57087e={'enabled':_0x345dd['anim']['enabled'],'stateGraphAsset':_0x345dd['anim']['stateGraph'+'Asset'],'animationAssets':_0x345dd['anim']['animationA'+'ssets'],'speed':_0x345dd['anim']['speed'],'activate':_0x345dd['anim']['activate'],'playing':_0x345dd['anim']['playing'],'rootBone':_0x345dd['anim']['rootBone'],'stateGraph':_0x345dd['anim']['stateGraph'],'layers':_0x345dd['anim']['layers'],'layerIndices':_0x345dd['anim']['layerIndic'+'es'],'parameters':_0x345dd['anim']['parameters'],'normalizeWeights':_0x345dd['anim']['normalizeW'+'eights'],'masks':_0x26dc9e};return this['addCompone'+'nt'](_0x244698,_0x57087e);}['onBeforeRe'+'move'](_0x335c24,_0x4dce51){_0x4dce51['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}}we['_buildAcce'+'ssors'](cv['prototype'],Jf);class hv extends we{['setCurrent'+'Listener'](){if(this['enabled']&&this['entity']['audioliste'+'ner']&&this['entity']['enabled']){this['system']['current']=this['entity'];const _0x452cdc=this['system']['current']['getPositio'+'n']();this['system']['manager']['listener']['setPositio'+'n'](_0x452cdc);}}['onEnable'](){this['setCurrent'+'Listener']();}['onDisable'](){this['system']['current']===this['entity']&&(this['system']['current']=null);}}class rL{constructor(){this['enabled']=!(0x2551+-0xa44+0x569*-0x5);}}const dv=['enabled'];class aL extends ct{constructor(_0xfbde65){super(_0xfbde65),this['id']='audioliste'+'ner',this['ComponentT'+'ype']=hv,this['DataType']=rL,this['schema']=dv,this['manager']=_0xfbde65['soundManag'+'er'],w['assert'](this['manager'],'AudioListe'+'nerCompone'+'ntSystem\x20c'+'annot\x20be\x20c'+'reated\x20wit'+'hout\x20sound'+'\x20manager'),this['current']=null,this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x1e9595,_0x1e046b,_0x55516d){_0x55516d=['enabled'],super['initialize'+'ComponentD'+'ata'](_0x1e9595,_0x1e046b,_0x55516d);}['onUpdate'](_0x25fd11){if(this['current']){const _0xdc77aa=this['current']['getPositio'+'n']();this['manager']['listener']['setPositio'+'n'](_0xdc77aa);const _0xeaf444=this['current']['getWorldTr'+'ansform']();this['manager']['listener']['setOrienta'+'tion'](_0xeaf444);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](hv['prototype'],dv);const eu=0x2*-0x3fc+0x16cb*-0x1+0x1ec3,og=0x140c+0x4*0x12a+-0x18b3,Lc='group',tu='image',fv='text',Rc='stretch',nL='contain',oL='cover',ft={'DEFAULT':'DEFAULT','HOVER':'HOVER','PRESSED':'PRESSED','INACTIVE':'INACTIVE'},El={};El[ft['DEFAULT']]='_defaultTi'+'nt',El[ft['HOVER']]='hoverTint',El[ft['PRESSED']]='pressedTin'+'t',El[ft['INACTIVE']]='inactiveTi'+'nt';const bl={};bl[ft['DEFAULT']]='_defaultSp'+'riteAsset',bl[ft['HOVER']]='hoverSprit'+'eAsset',bl[ft['PRESSED']]='pressedSpr'+'iteAsset',bl[ft['INACTIVE']]='inactiveSp'+'riteAsset';const Al={};Al[ft['DEFAULT']]='_defaultSp'+'riteFrame',Al[ft['HOVER']]='hoverSprit'+'eFrame',Al[ft['PRESSED']]='pressedSpr'+'iteFrame',Al[ft['INACTIVE']]='inactiveSp'+'riteFrame';class It extends we{constructor(_0x469576,_0x549304){super(_0x469576,_0x549304),h(this,'_visualSta'+'te',ft['DEFAULT']),h(this,'_isHoverin'+'g',!(0x90b+-0x1aac+0x7a*0x25)),h(this,'_hoveringC'+'ounter',-0x9e1*-0x1+-0x1d94+-0x29*-0x7b),h(this,'_isPressed',!(-0x1*0x223d+0x227*0x3+-0x1bc9*-0x1)),h(this,'_defaultTi'+'nt',new ie(-0x15*-0x185+0x1*0x434+-0x241c,-0x10*0x52+-0x1e36+0x2357,0xe53+0xf*0x21d+0x4d*-0x99,0x1bd1*0x1+0x1445+0x45f*-0xb)),h(this,'_defaultSp'+'riteAsset',null),h(this,'_defaultSp'+'riteFrame',0x1*-0x1ac5+-0x6cc+-0x2191*-0x1),h(this,'_imageEnti'+'ty',null),h(this,'_evtElemen'+'tAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntRemove',null),h(this,'_evtImageE'+'ntityEleme'+'ntColor',null),h(this,'_evtImageE'+'ntityEleme'+'ntOpacity',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame',null),(this['_visualSta'+'te']=ft['DEFAULT'],this['_isHoverin'+'g']=!(0x1*0x21a9+0x9e*0x25+-0x387e),this['_hoveringC'+'ounter']=-0x1321+-0x1f5b+0x435*0xc,this['_isPressed']=!(0x4ea+0x2681+-0x2b6a),this['_defaultTi'+'nt']=new ie(0x21ab+0x116*0x15+-0x3878,-0x1e01+0x26*-0x2d+0x8*0x496,0xc1f+-0x52d+-0x1*0x6f1,-0x825+-0x305+0x3b9*0x3),this['_defaultSp'+'riteAsset']=null,this['_defaultSp'+'riteFrame']=-0x249b+0x5*-0x7a8+-0x13*-0x3f1,this['_toggleLif'+'ecycleList'+'eners']('on',_0x469576));}get['data'](){const _0x2e7da6=this['system']['store'][this['entity']['getGuid']()];return _0x2e7da6?_0x2e7da6['data']:null;}set['enabled'](_0x2a0048){this['_setValue']('enabled',_0x2a0048);}get['enabled'](){return this['data']['enabled'];}set['active'](_0x323b93){this['_setValue']('active',_0x323b93);}get['active'](){return this['data']['active'];}set['imageEntit'+'y'](_0x5014b3){if(this['_imageEnti'+'ty']!==_0x5014b3){const _0x5205dd=typeof _0x5014b3=='string';if(this['_imageEnti'+'ty']&&_0x5205dd&&this['_imageEnti'+'ty']['getGuid']()===_0x5014b3)return;this['_imageEnti'+'ty']&&this['_imageEnti'+'tyUnsubscr'+'ibe'](),_0x5014b3 instanceof Ie?this['_imageEnti'+'ty']=_0x5014b3:_0x5205dd?this['_imageEnti'+'ty']=this['system']['app']['getEntityF'+'romIndex'](_0x5014b3)||null:this['_imageEnti'+'ty']=null,this['_imageEnti'+'ty']&&this['_imageEnti'+'tySubscrib'+'e'](),this['_imageEnti'+'ty']?this['data']['imageEntit'+'y']=this['_imageEnti'+'ty']['getGuid']():_0x5205dd&&_0x5014b3&&(this['data']['imageEntit'+'y']=_0x5014b3);}}get['imageEntit'+'y'](){return this['_imageEnti'+'ty'];}set['hitPadding'](_0x1b0ad5){this['_setValue']('hitPadding',_0x1b0ad5);}get['hitPadding'](){return this['data']['hitPadding'];}set['transition'+'Mode'](_0xe5fa94){this['_setValue']('transition'+'Mode',_0xe5fa94);}get['transition'+'Mode'](){return this['data']['transition'+'Mode'];}set['hoverTint'](_0x3925d9){this['_setValue']('hoverTint',_0x3925d9);}get['hoverTint'](){return this['data']['hoverTint'];}set['pressedTin'+'t'](_0x7c7fad){this['_setValue']('pressedTin'+'t',_0x7c7fad);}get['pressedTin'+'t'](){return this['data']['pressedTin'+'t'];}set['inactiveTi'+'nt'](_0x4df408){this['_setValue']('inactiveTi'+'nt',_0x4df408);}get['inactiveTi'+'nt'](){return this['data']['inactiveTi'+'nt'];}set['fadeDurati'+'on'](_0x5a9690){this['_setValue']('fadeDurati'+'on',_0x5a9690);}get['fadeDurati'+'on'](){return this['data']['fadeDurati'+'on'];}set['hoverSprit'+'eAsset'](_0x3f350c){this['_setValue']('hoverSprit'+'eAsset',_0x3f350c);}get['hoverSprit'+'eAsset'](){return this['data']['hoverSprit'+'eAsset'];}set['hoverSprit'+'eFrame'](_0x40bb14){this['_setValue']('hoverSprit'+'eFrame',_0x40bb14);}get['hoverSprit'+'eFrame'](){return this['data']['hoverSprit'+'eFrame'];}set['pressedSpr'+'iteAsset'](_0x1ca893){this['_setValue']('pressedSpr'+'iteAsset',_0x1ca893);}get['pressedSpr'+'iteAsset'](){return this['data']['pressedSpr'+'iteAsset'];}set['pressedSpr'+'iteFrame'](_0x1ad180){this['_setValue']('pressedSpr'+'iteFrame',_0x1ad180);}get['pressedSpr'+'iteFrame'](){return this['data']['pressedSpr'+'iteFrame'];}set['inactiveSp'+'riteAsset'](_0x4772f9){this['_setValue']('inactiveSp'+'riteAsset',_0x4772f9);}get['inactiveSp'+'riteAsset'](){return this['data']['inactiveSp'+'riteAsset'];}set['inactiveSp'+'riteFrame'](_0x55f16a){this['_setValue']('inactiveSp'+'riteFrame',_0x55f16a);}get['inactiveSp'+'riteFrame'](){return this['data']['inactiveSp'+'riteFrame'];}['_setValue'](_0x470fab,_0x183f80){const _0x420120=this['data'],_0x1ca34c=_0x420120[_0x470fab];_0x420120[_0x470fab]=_0x183f80,this['fire']('set',_0x470fab,_0x1ca34c,_0x183f80);}['_toggleLif'+'ecycleList'+'eners'](_0x40af2e,_0x1f6e5e){var _0x6c4b46;this[_0x40af2e]('set_active',this['_onSetActi'+'ve'],this),this[_0x40af2e]('set_transi'+'tionMode',this['_onSetTran'+'sitionMode'],this),this[_0x40af2e]('set_hoverT'+'int',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x40af2e]('set_presse'+'dTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x40af2e]('set_inacti'+'veTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x40af2e]('set_hoverS'+'priteAsset',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x40af2e]('set_hoverS'+'priteFrame',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x40af2e]('set_presse'+'dSpriteAss'+'et',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x40af2e]('set_presse'+'dSpriteFra'+'me',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x40af2e]('set_inacti'+'veSpriteAs'+'set',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x40af2e]('set_inacti'+'veSpriteFr'+'ame',this['_onSetTran'+'sitionValu'+'e'],this),_0x40af2e==='on'?this['_evtElemen'+'tAdd']=this['entity']['on']('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this):((_0x6c4b46=this['_evtElemen'+'tAdd'])==null||_0x6c4b46['off'](),this['_evtElemen'+'tAdd']=null);}['_onSetActi'+'ve'](_0x3e737e,_0x4484c4,_0x3d38ee){_0x4484c4!==_0x3d38ee&&this['_updateVis'+'ualState']();}['_onSetTran'+'sitionMode'](_0x3afdf5,_0x2ddf98,_0x90c3aa){_0x2ddf98!==_0x90c3aa&&(this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](_0x2ddf98),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetTran'+'sitionValu'+'e'](_0x475d2a,_0x51cfa1,_0x3f4292){_0x51cfa1!==_0x3f4292&&this['_forceReap'+'plyVisualS'+'tate']();}['_imageEnti'+'tySubscrib'+'e'](){this['_evtImageE'+'ntityEleme'+'ntAdd']=this['_imageEnti'+'ty']['on']('element:ad'+'d',this['_onImageEl'+'ementGain'],this),this['_imageEnti'+'ty']['element']&&this['_onImageEl'+'ementGain']();}['_imageEnti'+'tyUnsubscr'+'ibe'](){var _0xae35bc,_0x1cfe07;(_0xae35bc=this['_evtImageE'+'ntityEleme'+'ntAdd'])==null||_0xae35bc['off'](),this['_evtImageE'+'ntityEleme'+'ntAdd']=null,(_0x1cfe07=this['_imageEnti'+'ty'])!=null&&_0x1cfe07['element']&&this['_onImageEl'+'ementLose']();}['_imageEnti'+'tyElementS'+'ubscribe'](){const _0x5f1191=this['_imageEnti'+'ty']['element'];this['_evtImageE'+'ntityEleme'+'ntRemove']=_0x5f1191['once']('beforeremo'+'ve',this['_onImageEl'+'ementLose'],this),this['_evtImageE'+'ntityEleme'+'ntColor']=_0x5f1191['on']('set:color',this['_onSetColo'+'r'],this),this['_evtImageE'+'ntityEleme'+'ntOpacity']=_0x5f1191['on']('set:opacit'+'y',this['_onSetOpac'+'ity'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=_0x5f1191['on']('set:sprite'+'Asset',this['_onSetSpri'+'teAsset'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=_0x5f1191['on']('set:sprite'+'Frame',this['_onSetSpri'+'teFrame'],this);}['_imageEnti'+'tyElementU'+'nsubscribe'](){var _0x4b1704,_0x6e5e12,_0x3f63cf,_0x5a2232,_0x2d03b9;(_0x4b1704=this['_evtImageE'+'ntityEleme'+'ntRemove'])==null||_0x4b1704['off'](),this['_evtImageE'+'ntityEleme'+'ntRemove']=null,(_0x6e5e12=this['_evtImageE'+'ntityEleme'+'ntColor'])==null||_0x6e5e12['off'](),this['_evtImageE'+'ntityEleme'+'ntColor']=null,(_0x3f63cf=this['_evtImageE'+'ntityEleme'+'ntOpacity'])==null||_0x3f63cf['off'](),this['_evtImageE'+'ntityEleme'+'ntOpacity']=null,(_0x5a2232=this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set'])==null||_0x5a2232['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=null,(_0x2d03b9=this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame'])==null||_0x2d03b9['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=null;}['_onElement'+'ComponentR'+'emove'](){this['_toggleHit'+'ElementLis'+'teners']('off');}['_onElement'+'ComponentA'+'dd'](){this['_toggleHit'+'ElementLis'+'teners']('on');}['_onImageEl'+'ementLose'](){this['_imageEnti'+'tyElementU'+'nsubscribe'](),this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['_onImageEl'+'ementGain'](){this['_imageEnti'+'tyElementS'+'ubscribe'](),this['_storeDefa'+'ultVisualS'+'tate'](),this['_forceReap'+'plyVisualS'+'tate']();}['_toggleHit'+'ElementLis'+'teners'](_0x164f16){if(this['entity']['element']){const _0x20a1ec=_0x164f16==='on';if(_0x20a1ec&&this['_hasHitEle'+'mentListen'+'ers'])return;this['entity']['element'][_0x164f16]('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['entity']['element'][_0x164f16]('mouseenter',this['_onMouseEn'+'ter'],this),this['entity']['element'][_0x164f16]('mouseleave',this['_onMouseLe'+'ave'],this),this['entity']['element'][_0x164f16]('mousedown',this['_onMouseDo'+'wn'],this),this['entity']['element'][_0x164f16]('mouseup',this['_onMouseUp'],this),this['entity']['element'][_0x164f16]('touchstart',this['_onTouchSt'+'art'],this),this['entity']['element'][_0x164f16]('touchend',this['_onTouchEn'+'d'],this),this['entity']['element'][_0x164f16]('touchleave',this['_onTouchLe'+'ave'],this),this['entity']['element'][_0x164f16]('touchcance'+'l',this['_onTouchCa'+'ncel'],this),this['entity']['element'][_0x164f16]('selectstar'+'t',this['_onSelectS'+'tart'],this),this['entity']['element'][_0x164f16]('selectend',this['_onSelectE'+'nd'],this),this['entity']['element'][_0x164f16]('selectente'+'r',this['_onSelectE'+'nter'],this),this['entity']['element'][_0x164f16]('selectleav'+'e',this['_onSelectL'+'eave'],this),this['entity']['element'][_0x164f16]('click',this['_onClick'],this),this['_hasHitEle'+'mentListen'+'ers']=_0x20a1ec;}}['_storeDefa'+'ultVisualS'+'tate'](){var _0x239e77;const _0x1025fb=(_0x239e77=this['_imageEnti'+'ty'])==null?void(-0x20e1+0x9b1+-0x1c*-0xd4):_0x239e77['element'];!_0x1025fb||_0x1025fb['type']===Lc||(this['_storeDefa'+'ultColor'](_0x1025fb['color']),this['_storeDefa'+'ultOpacity'](_0x1025fb['opacity']),this['_storeDefa'+'ultSpriteA'+'sset'](_0x1025fb['spriteAsse'+'t']),this['_storeDefa'+'ultSpriteF'+'rame'](_0x1025fb['spriteFram'+'e']));}['_storeDefa'+'ultColor'](_0x38fa46){this['_defaultTi'+'nt']['r']=_0x38fa46['r'],this['_defaultTi'+'nt']['g']=_0x38fa46['g'],this['_defaultTi'+'nt']['b']=_0x38fa46['b'];}['_storeDefa'+'ultOpacity'](_0x59303a){this['_defaultTi'+'nt']['a']=_0x59303a;}['_storeDefa'+'ultSpriteA'+'sset'](_0x9ace6a){this['_defaultSp'+'riteAsset']=_0x9ace6a;}['_storeDefa'+'ultSpriteF'+'rame'](_0x36a131){this['_defaultSp'+'riteFrame']=_0x36a131;}['_onSetColo'+'r'](_0x45ed56){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultColor'](_0x45ed56),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetOpac'+'ity'](_0x14e315){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultOpacity'](_0x14e315),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teAsset'](_0x43d881){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteA'+'sset'](_0x43d881),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teFrame'](_0x4b881b){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteF'+'rame'](_0x4b881b),this['_forceReap'+'plyVisualS'+'tate']());}['_onMouseEn'+'ter'](_0xe341ce){this['_isHoverin'+'g']=!(-0x9df+-0xe*-0x91+-0x47*-0x7),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseenter',_0xe341ce);}['_onMouseLe'+'ave'](_0x361915){this['_isHoverin'+'g']=!(0x3*-0x2ec+0x1c59+0x166*-0xe),this['_isPressed']=!(-0x1f52+-0xc8a+0x2bdd),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseleave',_0x361915);}['_onMouseDo'+'wn'](_0x281d86){this['_isPressed']=!(-0x2158+0x51*-0x75+-0x1*-0x465d),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mousedown',_0x281d86);}['_onMouseUp'](_0x904487){this['_isPressed']=!(0xc57+0x1d3*-0x1+-0x1*0xa83),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseup',_0x904487);}['_onTouchSt'+'art'](_0x58d393){this['_isPressed']=!(-0x1c40*0x1+-0x2515+-0x45b*-0xf),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchstart',_0x58d393);}['_onTouchEn'+'d'](_0x39784d){_0x39784d['event']['preventDef'+'ault'](),this['_isPressed']=!(-0x10e1+0x20*0xa+0xfa2),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchend',_0x39784d);}['_onTouchLe'+'ave'](_0x459b0a){this['_isPressed']=!(-0x18b1*0x1+-0x1*-0x1662+0x10*0x25),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchleave',_0x459b0a);}['_onTouchCa'+'ncel'](_0x128f51){this['_isPressed']=!(0xf5c*0x1+0x601+-0x155c*0x1),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchcance'+'l',_0x128f51);}['_onSelectS'+'tart'](_0x2aba06){this['_isPressed']=!(-0x15c8+-0x1*0x1901+0x2ec9),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectstar'+'t',_0x2aba06);}['_onSelectE'+'nd'](_0x295e3b){this['_isPressed']=!(-0x1ff4+-0x3*-0x371+0x15a2),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectend',_0x295e3b);}['_onSelectE'+'nter'](_0x2bb478){this['_hoveringC'+'ounter']++,this['_hoveringC'+'ounter']===-0x8db*0x4+0x138b+-0x2*-0x7f1&&(this['_isHoverin'+'g']=!(0x2de*-0xa+-0x11e4+0x2e90),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectente'+'r',_0x2bb478);}['_onSelectL'+'eave'](_0x56c9b5){this['_hoveringC'+'ounter']--,this['_hoveringC'+'ounter']===0xb38+0x7be*0x1+-0x1*0x12f6&&(this['_isHoverin'+'g']=!(-0x45*0x73+0x1353*0x1+0xbad),this['_isPressed']=!(0x1f3*0xd+0x6bf+-0x2015),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectleav'+'e',_0x56c9b5);}['_onClick'](_0x5e6114){this['_fireIfAct'+'ive']('click',_0x5e6114);}['_fireIfAct'+'ive'](_0x354460,_0x300aef){this['data']['active']&&this['fire'](_0x354460,_0x300aef);}['_updateVis'+'ualState'](_0x22ac39){const _0x11a501=this['_visualSta'+'te'],_0x5b65ae=this['_determine'+'VisualStat'+'e']();if((_0x11a501!==_0x5b65ae||_0x22ac39)&&this['enabled'])switch(this['_visualSta'+'te']=_0x5b65ae,_0x11a501===ft['HOVER']&&this['_fireIfAct'+'ive']('hoverend'),_0x11a501===ft['PRESSED']&&this['_fireIfAct'+'ive']('pressedend'),_0x5b65ae===ft['HOVER']&&this['_fireIfAct'+'ive']('hoverstart'),_0x5b65ae===ft['PRESSED']&&this['_fireIfAct'+'ive']('pressedsta'+'rt'),this['transition'+'Mode']){case eu:{const _0x40299c=El[this['_visualSta'+'te']],_0xd8ec23=this[_0x40299c];this['_applyTint'](_0xd8ec23);break;}case og:{const _0x1e5d2b=bl[this['_visualSta'+'te']],_0x5241ff=Al[this['_visualSta'+'te']],_0x584687=this[_0x1e5d2b],_0x10976a=this[_0x5241ff];this['_applySpri'+'te'](_0x584687,_0x10976a);break;}}}['_forceReap'+'plyVisualS'+'tate'](){this['_updateVis'+'ualState'](!(-0xc8e+0x1ff+0xa8f));}['_resetToDe'+'faultVisua'+'lState'](_0x5373d8){var _0x272214;if((_0x272214=this['_imageEnti'+'ty'])!=null&&_0x272214['element'])switch(_0x5373d8){case eu:this['_cancelTwe'+'en'](),this['_applyTint'+'Immediatel'+'y'](this['_defaultTi'+'nt']);break;case og:this['_applySpri'+'te'](this['_defaultSp'+'riteAsset'],this['_defaultSp'+'riteFrame']);break;}}['_determine'+'VisualStat'+'e'](){if(this['active']){if(this['_isPressed'])return ft['PRESSED'];if(this['_isHoverin'+'g'])return ft['HOVER'];}else return ft['INACTIVE'];return ft['DEFAULT'];}['_applySpri'+'te'](_0x18e548,_0xa1dfa1){var _0x1acc0a;const _0x2fa3ce=(_0x1acc0a=this['_imageEnti'+'ty'])==null?void(0x1*-0xb50+-0xd*-0xb+-0x1*-0xac1):_0x1acc0a['element'];_0x2fa3ce&&(_0xa1dfa1=_0xa1dfa1||-0x76d*-0x5+-0x37f*-0x3+-0x2f9e,this['_isApplyin'+'gSprite']=!(-0x121f*-0x2+0x51+-0x248f),_0x2fa3ce['spriteAsse'+'t']!==_0x18e548&&(_0x2fa3ce['spriteAsse'+'t']=_0x18e548),_0x2fa3ce['spriteFram'+'e']!==_0xa1dfa1&&(_0x2fa3ce['spriteFram'+'e']=_0xa1dfa1),this['_isApplyin'+'gSprite']=!(0x704+-0xab*-0x10+-0xc5*0x17));}['_applyTint'](_0x38d20e){this['_cancelTwe'+'en'](),this['fadeDurati'+'on']===-0x1f1e+0x3*0x92b+0x39d?this['_applyTint'+'Immediatel'+'y'](_0x38d20e):this['_applyTint'+'WithTween'](_0x38d20e);}['_applyTint'+'Immediatel'+'y'](_0x6d85c8){var _0x1e0c0b;const _0x1da776=(_0x1e0c0b=this['_imageEnti'+'ty'])==null?void(-0x10f2+-0x718*0x5+0x1a35*0x2):_0x1e0c0b['element'];if(!_0x6d85c8||!_0x1da776||_0x1da776['type']===Lc)return;const _0x115494=lg(_0x6d85c8);this['_isApplyin'+'gTint']=!(-0x1*-0x5b1+0x1ed6+-0x9*0x40f),_0x115494['equals'](_0x1da776['color'])||(_0x1da776['color']=_0x115494),_0x1da776['opacity']!==_0x6d85c8['a']&&(_0x1da776['opacity']=_0x6d85c8['a']),this['_isApplyin'+'gTint']=!(0x26c8+0x31f*0xb+-0x491c);}['_applyTint'+'WithTween'](_0xeabffc){var _0x57a04f;const _0x552415=(_0x57a04f=this['_imageEnti'+'ty'])==null?void(-0x1*-0x13c3+-0xb2c+-0x897):_0x57a04f['element'];if(!_0xeabffc||!_0x552415||_0x552415['type']===Lc)return;const _0x5f024e=lg(_0xeabffc),_0x525fd7=_0x552415['color'],_0x2ebb83=_0x552415['opacity'];_0x5f024e['equals'](_0x525fd7)&&_0xeabffc['a']===_0x2ebb83||(this['_tweenInfo']={'startTime':de(),'from':new ie(_0x525fd7['r'],_0x525fd7['g'],_0x525fd7['b'],_0x2ebb83),'to':_0xeabffc['clone'](),'lerpColor':new ie()});}['_updateTin'+'tTween'](){const _0x4c5e16=de()-this['_tweenInfo']['startTime'];let _0x428457=this['fadeDurati'+'on']===-0x22d5+-0x24a4+0x141*0x39?0x233a+-0x5*-0xd+-0x237a:_0x4c5e16/this['fadeDurati'+'on'];if(_0x428457=Y['clamp'](_0x428457,0x8c8+0x1*-0xffe+-0x2*-0x39b,0x218c+-0x506+-0x1c85),Math['abs'](_0x428457-(-0xfc9+0xa*-0x38b+-0x16*-0x254))>-0x24cb+-0x2*0x190+0x27eb+0.00001){const _0xd9a56a=this['_tweenInfo']['lerpColor'];_0xd9a56a['lerp'](this['_tweenInfo']['from'],this['_tweenInfo']['to'],_0x428457),this['_applyTint'+'Immediatel'+'y'](new ie(_0xd9a56a['r'],_0xd9a56a['g'],_0xd9a56a['b'],_0xd9a56a['a']));}else this['_applyTint'+'Immediatel'+'y'](this['_tweenInfo']['to']),this['_cancelTwe'+'en']();}['_cancelTwe'+'en'](){delete this['_tweenInfo'];}['onUpdate'](){this['_tweenInfo']&&this['_updateTin'+'tTween']();}['onEnable'](){this['_isHoverin'+'g']=!(-0x109f+0x109e+0x2),this['_hoveringC'+'ounter']=-0x16*0x1a2+-0x1694+0x3a80,this['_isPressed']=!(0x4ad+0x57f+-0xa2b*0x1),this['_toggleHit'+'ElementLis'+'teners']('on'),this['_forceReap'+'plyVisualS'+'tate']();}['onDisable'](){this['_toggleHit'+'ElementLis'+'teners']('off'),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['onRemove'](){this['_imageEnti'+'tyUnsubscr'+'ibe'](),this['_toggleLif'+'ecycleList'+'eners']('off',this['system']),this['onDisable']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x3bb510,_0x36cf86){_0x3bb510['imageEntit'+'y']&&(this['imageEntit'+'y']=_0x36cf86[_0x3bb510['imageEntit'+'y']['getGuid']()]);}}h(It,'EVENT_MOUS'+'EDOWN','mousedown'),h(It,'EVENT_MOUS'+'EUP','mouseup'),h(It,'EVENT_MOUS'+'EENTER','mouseenter'),h(It,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(It,'EVENT_CLIC'+'K','click'),h(It,'EVENT_TOUC'+'HSTART','touchstart'),h(It,'EVENT_TOUC'+'HEND','touchend'),h(It,'EVENT_TOUC'+'HCANCEL','touchcance'+'l'),h(It,'EVENT_TOUC'+'HLEAVE','touchleave'),h(It,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(It,'EVENT_SELE'+'CTEND','selectend'),h(It,'EVENT_SELE'+'CTENTER','selectente'+'r'),h(It,'EVENT_SELE'+'CTLEAVE','selectleav'+'e'),h(It,'EVENT_HOVE'+'RSTART','hoverstart'),h(It,'EVENT_HOVE'+'REND','hoverend'),h(It,'EVENT_PRES'+'SEDSTART','pressedsta'+'rt'),h(It,'EVENT_PRES'+'SEDEND','pressedend');function lg(_0x4ac8f9){return new ie(_0x4ac8f9['r'],_0x4ac8f9['g'],_0x4ac8f9['b']);}class lL{constructor(){this['enabled']=!(0x1989+-0xa46+0x1*-0xf43),this['active']=!(-0x7e7+0x115f+-0x978),this['imageEntit'+'y']=null,this['hitPadding']=new re(),this['transition'+'Mode']=eu,this['hoverTint']=new ie(0x1*-0x3d9+-0x21c8+0x25a1*0x1+0.75,-0xdc9+0x33*0x8a+-0xdb5+0.75,0x1e75+0x1fe5*0x1+-0x3e5a+0.75),this['pressedTin'+'t']=new ie(0x2*0x1115+0x1*-0xde5+0x1*-0x1445+0.5,0x1af9*-0x1+0x1*0x1ab0+-0x49*-0x1+0.5,0x2336+0x1650+0x1cc3*-0x2+0.5),this['inactiveTi'+'nt']=new ie(-0x247a+-0x236e+0x68*0xb1+0.25,0x2*-0x6cd+-0x9c7+-0x85*-0x2d+0.25,0x46*0x15+0x1*-0x1acd+0x150f+0.25),this['fadeDurati'+'on']=-0x888+0x1*0x13b1+-0xb29,this['hoverSprit'+'eAsset']=null,this['hoverSprit'+'eFrame']=0x1545+0x1*0x12b5+-0x27fa*0x1,this['pressedSpr'+'iteAsset']=null,this['pressedSpr'+'iteFrame']=-0x1c1*0x1+0x189d*-0x1+-0x96*-0x2d,this['inactiveSp'+'riteAsset']=null,this['inactiveSp'+'riteFrame']=-0x19c9+-0x1*0x1304+0x1*0x2ccd;}}const cg=['enabled','active',{'name':'hitPadding','type':'vec4'},'transition'+'Mode',{'name':'hoverTint','type':'rgba'},{'name':'pressedTin'+'t','type':'rgba'},{'name':'inactiveTi'+'nt','type':'rgba'},'fadeDurati'+'on','hoverSprit'+'eAsset','hoverSprit'+'eFrame','pressedSpr'+'iteAsset','pressedSpr'+'iteFrame','inactiveSp'+'riteAsset','inactiveSp'+'riteFrame'];class cL extends ct{constructor(_0x2cbbc7){super(_0x2cbbc7),this['id']='button',this['ComponentT'+'ype']=It,this['DataType']=lL,this['schema']=cg,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x2b4f29,_0x4eb02c,_0x4866eb){_0x2b4f29['imageEntit'+'y']=_0x4eb02c['imageEntit'+'y'],super['initialize'+'ComponentD'+'ata'](_0x2b4f29,_0x4eb02c,cg);}['onUpdate'](_0x920015){const _0x4fb424=this['store'];for(const _0x36f1ae in _0x4fb424){const _0x521c15=_0x4fb424[_0x36f1ae]['entity'],_0x947d8=_0x521c15['button'];_0x947d8['enabled']&&_0x521c15['enabled']&&_0x947d8['onUpdate']();}}['_onRemoveC'+'omponent'](_0xc2d022,_0x178335){_0x178335['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}const hg=new D(),dg=new le();class Ka extends we{constructor(_0x531c86,_0x15a39b){super(_0x531c86,_0x15a39b),h(this,'_compoundP'+'arent',null),h(this,'_hasOffset',!(-0x213b+-0x2*-0xa88+0xc2c)),(this['entity']['on']('insert',this['_onInsert'],this),this['on']('set_type',this['onSetType'],this),this['on']('set_convex'+'Hull',this['onSetModel'],this),this['on']('set_halfEx'+'tents',this['onSetHalfE'+'xtents'],this),this['on']('set_linear'+'Offset',this['onSetOffse'+'t'],this),this['on']('set_angula'+'rOffset',this['onSetOffse'+'t'],this),this['on']('set_radius',this['onSetRadiu'+'s'],this),this['on']('set_height',this['onSetHeigh'+'t'],this),this['on']('set_axis',this['onSetAxis'],this),this['on']('set_asset',this['onSetAsset'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_model',this['onSetModel'],this),this['on']('set_render',this['onSetRende'+'r'],this));}get['data'](){const _0x391801=this['system']['store'][this['entity']['getGuid']()];return _0x391801?_0x391801['data']:null;}set['enabled'](_0x14471d){this['_setValue']('enabled',_0x14471d);}get['enabled'](){return this['data']['enabled'];}set['type'](_0xc8211d){this['_setValue']('type',_0xc8211d);}get['type'](){return this['data']['type'];}set['halfExtent'+'s'](_0x5a16b8){this['_setValue']('halfExtent'+'s',_0x5a16b8);}get['halfExtent'+'s'](){return this['data']['halfExtent'+'s'];}set['linearOffs'+'et'](_0x4ed4ee){this['_setValue']('linearOffs'+'et',_0x4ed4ee);}get['linearOffs'+'et'](){return this['data']['linearOffs'+'et'];}set['angularOff'+'set'](_0x13a333){this['_setValue']('angularOff'+'set',_0x13a333);}get['angularOff'+'set'](){return this['data']['angularOff'+'set'];}set['radius'](_0x1ce3d5){this['_setValue']('radius',_0x1ce3d5);}get['radius'](){return this['data']['radius'];}set['axis'](_0x364fd6){this['_setValue']('axis',_0x364fd6);}get['axis'](){return this['data']['axis'];}set['height'](_0x373027){this['_setValue']('height',_0x373027);}get['height'](){return this['data']['height'];}set['asset'](_0x50d245){this['_setValue']('asset',_0x50d245);}get['asset'](){return this['data']['asset'];}set['renderAsse'+'t'](_0x39f4d5){this['_setValue']('renderAsse'+'t',_0x39f4d5);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['convexHull'](_0x573787){this['_setValue']('convexHull',_0x573787);}get['convexHull'](){return this['data']['convexHull'];}set['shape'](_0x26e23){this['_setValue']('shape',_0x26e23);}get['shape'](){return this['data']['shape'];}set['model'](_0x22aa64){this['_setValue']('model',_0x22aa64);}get['model'](){return this['data']['model'];}set['render'](_0x5007a1){this['_setValue']('render',_0x5007a1);}get['render'](){return this['data']['render'];}set['checkVerte'+'xDuplicate'+'s'](_0x3456d7){this['_setValue']('checkVerte'+'xDuplicate'+'s',_0x3456d7);}get['checkVerte'+'xDuplicate'+'s'](){return this['data']['checkVerte'+'xDuplicate'+'s'];}['_setValue'](_0x536e01,_0x5edc69){const _0x3d9375=this['data'],_0x23c18f=_0x3d9375[_0x536e01];_0x3d9375[_0x536e01]=_0x5edc69,this['fire']('set',_0x536e01,_0x23c18f,_0x5edc69);}['onSetType'](_0x33e235,_0x5e464e,_0x24daf9){_0x5e464e!==_0x24daf9&&this['system']['changeType'](this,_0x5e464e,_0x24daf9);}['onSetHalfE'+'xtents'](_0x25e041,_0x1799fb,_0x1e07fc){const _0x313a10=this['data']['type'];this['data']['initialize'+'d']&&_0x313a10==='box'&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetOffse'+'t'](_0x19e8ac,_0x17296c,_0xb607da){this['_hasOffset']=!this['data']['linearOffs'+'et']['equals'](D['ZERO'])||!this['data']['angularOff'+'set']['equals'](le['IDENTITY']),this['data']['initialize'+'d']&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetRadiu'+'s'](_0x106041,_0x2ede8a,_0x1d0242){const _0x5e72db=this['data']['type'];this['data']['initialize'+'d']&&(_0x5e72db==='sphere'||_0x5e72db==='capsule'||_0x5e72db==='cylinder'||_0x5e72db==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetHeigh'+'t'](_0x3686ee,_0x220bff,_0x4f9fff){const _0x112d5e=this['data']['type'];this['data']['initialize'+'d']&&(_0x112d5e==='capsule'||_0x112d5e==='cylinder'||_0x112d5e==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAxis'](_0x2f5615,_0x5558dd,_0xc035ed){const _0xebe2a8=this['data']['type'];this['data']['initialize'+'d']&&(_0xebe2a8==='capsule'||_0xebe2a8==='cylinder'||_0xebe2a8==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAsset'](_0xfc284f,_0x2801fe,_0x11d9a8){const _0x2d8e56=this['system']['app']['assets'];if(_0x2801fe){const _0x2b5668=_0x2d8e56['get'](_0x2801fe);_0x2b5668&&_0x2b5668['off']('remove',this['onAssetRem'+'oved'],this);}if(_0x11d9a8){_0x11d9a8 instanceof pe&&(this['data']['asset']=_0x11d9a8['id']);const _0x507e46=_0x2d8e56['get'](this['data']['asset']);_0x507e46&&(_0x507e46['off']('remove',this['onAssetRem'+'oved'],this),_0x507e46['on']('remove',this['onAssetRem'+'oved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x11d9a8||(this['data']['model']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetRende'+'rAsset'](_0x4152b7,_0x588181,_0x3736a6){const _0x305c3f=this['system']['app']['assets'];if(_0x588181){const _0x375346=_0x305c3f['get'](_0x588181);_0x375346&&_0x375346['off']('remove',this['onRenderAs'+'setRemoved'],this);}if(_0x3736a6){_0x3736a6 instanceof pe&&(this['data']['renderAsse'+'t']=_0x3736a6['id']);const _0x38e9e9=_0x305c3f['get'](this['data']['renderAsse'+'t']);_0x38e9e9&&(_0x38e9e9['off']('remove',this['onRenderAs'+'setRemoved'],this),_0x38e9e9['on']('remove',this['onRenderAs'+'setRemoved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x3736a6||(this['data']['render']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetModel'](_0x6cfc5e,_0x1524f0,_0x502ce2){this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&this['system']['implementa'+'tions']['mesh']['doRecreate'+'PhysicalSh'+'ape'](this);}['onSetRende'+'r'](_0x1298b3,_0x5e2d74,_0x206102){this['onSetModel'](_0x1298b3,_0x5e2d74,_0x206102);}['onAssetRem'+'oved'](_0x397485){_0x397485['off']('remove',this['onAssetRem'+'oved'],this),this['data']['asset']===_0x397485['id']&&(this['asset']=null);}['onRenderAs'+'setRemoved'](_0x9b1cec){_0x9b1cec['off']('remove',this['onRenderAs'+'setRemoved'],this),this['data']['renderAsse'+'t']===_0x9b1cec['id']&&(this['renderAsse'+'t']=null);}['getCompoun'+'dChildShap'+'eIndex'](_0x1dac61){const _0x38c3df=this['data']['shape'],_0xd52d4a=_0x38c3df['getNumChil'+'dShapes']();for(let _0x573b56=-0x6f4+0x727*0x4+-0xe7*0x18;_0x573b56<_0xd52d4a;_0x573b56++){const _0x423083=_0x38c3df['getChildSh'+'ape'](_0x573b56);if(Ammo['getPointer'](_0x423083)===Ammo['getPointer'](_0x1dac61))return _0x573b56;}return null;}['_onInsert'](_0x5248fb){if(!(typeof Ammo>'u')){if(this['_compoundP'+'arent'])this['system']['recreatePh'+'ysicalShap'+'es'](this);else{if(!this['entity']['rigidbody']){let _0x4afed5=this['entity']['parent'];for(;_0x4afed5;){if(_0x4afed5['collision']&&_0x4afed5['collision']['type']==='compound'){_0x4afed5['collision']['shape']['getNumChil'+'dShapes']()===-0x482+0x6b5+-0x233?this['system']['recreatePh'+'ysicalShap'+'es'](_0x4afed5['collision']):this['system']['recreatePh'+'ysicalShap'+'es'](this);break;}_0x4afed5=_0x4afed5['parent'];}}}}}['_updateCom'+'pound'](){const _0x85700a=this['entity'];if(_0x85700a['_dirtyWorl'+'d']){let _0x16b03b=_0x85700a['_dirtyLoca'+'l'],_0x1021cb=_0x85700a;for(;_0x1021cb&&!_0x16b03b&&!(_0x1021cb['collision']&&_0x1021cb['collision']===this['_compoundP'+'arent']);)_0x1021cb['_dirtyLoca'+'l']&&(_0x16b03b=!(-0x1d69+-0xe5a+-0x2bc3*-0x1)),_0x1021cb=_0x1021cb['parent'];if(_0x16b03b){_0x85700a['forEach'](this['system']['implementa'+'tions']['compound']['_updateEac'+'hDescendan'+'tTransform'],_0x85700a);const _0x1c887a=this['_compoundP'+'arent']['entity']['rigidbody'];_0x1c887a&&_0x1c887a['activate']();}}}['getShapePo'+'sition'](){const _0x1d6849=this['entity']['getPositio'+'n']();if(this['_hasOffset']){const _0x13cb26=this['entity']['getRotatio'+'n'](),_0x39ceea=this['data']['linearOffs'+'et'];return dg['copy'](_0x13cb26)['transformV'+'ector'](_0x39ceea,hg),hg['add'](_0x1d6849);}return _0x1d6849;}['getShapeRo'+'tation'](){const _0x45a11c=this['entity']['getRotatio'+'n']();return this['_hasOffset']?dg['copy'](_0x45a11c)['mul'](this['data']['angularOff'+'set']):_0x45a11c;}['onEnable'](){if(this['data']['type']==='mesh'&&(this['data']['asset']||this['data']['renderAsse'+'t'])&&this['data']['initialize'+'d']){const _0x434c70=this['system']['app']['assets']['get'](this['data']['asset']||this['data']['renderAsse'+'t']);if(_0x434c70&&(!_0x434c70['resource']||!this['data']['shape'])){this['system']['recreatePh'+'ysicalShap'+'es'](this);return;}}if(this['entity']['rigidbody'])this['entity']['rigidbody']['enabled']&&this['entity']['rigidbody']['enableSimu'+'lation']();else{if(this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']){if(this['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===0x12c6+0x661+0x1927*-0x1)this['system']['recreatePh'+'ysicalShap'+'es'](this['_compoundP'+'arent']);else{const _0x228825=this['system']['_getNodeTr'+'ansform'](this['entity'],this['_compoundP'+'arent']['entity']);this['_compoundP'+'arent']['shape']['addChildSh'+'ape'](_0x228825,this['data']['shape']),Ammo['destroy'](_0x228825),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']();}}else this['entity']['trigger']&&this['entity']['trigger']['enable']();}}['onDisable'](){this['entity']['rigidbody']?this['entity']['rigidbody']['disableSim'+'ulation']():this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']?this['_compoundP'+'arent']['entity']['_destroyin'+'g']||(this['system']['_removeCom'+'poundChild'](this['_compoundP'+'arent'],this['data']['shape']),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']()):this['entity']['trigger']&&this['entity']['trigger']['disable']();}['onBeforeRe'+'move'](){this['asset']&&(this['asset']=null),this['renderAsse'+'t']&&(this['renderAsse'+'t']=null),this['entity']['off']('insert',this['_onInsert'],this),this['off']();}}h(Ka,'EVENT_CONT'+'ACT','contact'),h(Ka,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(Ka,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(Ka,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(Ka,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve');class hL{constructor(){this['enabled']=!(-0x13*-0xb+0x3f1*0x1+0x1*-0x4c2),this['type']='box',this['halfExtent'+'s']=new D(-0xae*0x5+0x18c2+0x1*-0x155c+0.5,-0xd0e+0x21*-0xf5+0x2ca3+0.5,-0x51c+0x2f*0x6b+-0xe89+0.5),this['linearOffs'+'et']=new D(),this['angularOff'+'set']=new le(),this['radius']=0x2042+0x243*0xf+0x422f*-0x1+0.5,this['axis']=0x755+-0xdef+0x69b,this['height']=0x4*0x416+0x31*0x7b+-0x1*0x27e1,this['convexHull']=!(0x83e+-0x1399+0xb5c),this['asset']=null,this['renderAsse'+'t']=null,this['checkVerte'+'xDuplicate'+'s']=!(-0x818+0x6fc+0x11c),this['shape']=null,this['model']=null,this['render']=null,this['initialize'+'d']=!(0x199c+-0x167*-0x9+-0x263a);}}const fo='static',Ns='dynamic',Ua='kinematic',dL=-0x1d07*0x1+0x2*-0x11+0x1d2b,go=0x3ae+0x24a1+-0x284b,su=-0x1801+0x1080+-0x1f*-0x3e,fg=-0x83*-0x3d+-0x2*-0xb26+-0x357f,uv=-0x9fa+-0x1560+0x1f5f,fL=-0x4c8*-0x1+-0x3e3*-0x2+-0xbd*0x11,ug=-0x1324+-0x2ab+0x15d1,uL=-0x585*-0x4+0x48c+-0x1a9c,pg=0x3*0x660+0xb3c+-0x22a*0xe,mg=0x176d*-0x15+-0x6f6e+0x27a*0x15b,iu=-0x1d757+-0x16ea3+0xdacb*0x5;let ks,Nr,Ba;class pv{constructor(_0x5384f1,_0x7d8a5d,_0xaac8be){this['entity']=_0x7d8a5d['entity'],this['component']=_0x7d8a5d,this['app']=_0x5384f1,typeof Ammo<'u'&&!ks&&(ks=new Ammo['btVector3'](),Nr=new Ammo['btQuaterni'+'on'](),Ba=new Ammo['btTransfor'+'m']()),this['initialize'](_0xaac8be);}['initialize'](_0xd0e854){const _0x25d7cf=this['entity'],_0x504a8e=_0xd0e854['shape'];if(_0x504a8e&&typeof Ammo<'u'){_0x25d7cf['trigger']&&_0x25d7cf['trigger']['destroy']();const _0x109f7f=0x21c9+-0x4*-0x733+0x59*-0xb4,_0x1375d6=this['component'];if(_0x1375d6){const _0xc9dc74=_0x1375d6['getShapePo'+'sition'](),_0x43c36b=_0x1375d6['getShapeRo'+'tation']();ks['setValue'](_0xc9dc74['x'],_0xc9dc74['y'],_0xc9dc74['z']),Nr['setValue'](_0x43c36b['x'],_0x43c36b['y'],_0x43c36b['z'],_0x43c36b['w']);}else{const _0x561c5e=_0x25d7cf['getPositio'+'n'](),_0x40e8bb=_0x25d7cf['getRotatio'+'n']();ks['setValue'](_0x561c5e['x'],_0x561c5e['y'],_0x561c5e['z']),Nr['setValue'](_0x40e8bb['x'],_0x40e8bb['y'],_0x40e8bb['z'],_0x40e8bb['w']);}Ba['setOrigin'](ks),Ba['setRotatio'+'n'](Nr);const _0x3cccb3=this['app']['systems']['rigidbody']['createBody'](_0x109f7f,_0x504a8e,Ba);_0x3cccb3['setRestitu'+'tion'](0xfa0+0x7b9*0x3+-0x26cb),_0x3cccb3['setFrictio'+'n'](0x5de*0x3+-0x3*-0x72e+-0x2724),_0x3cccb3['setDamping'](0x166f*-0x1+0x106c+0xab*0x9,-0x1a04+-0x17*0x17+-0x1c15*-0x1),ks['setValue'](0x1d6b+-0xa3d*0x1+0xa*-0x1eb,0x1bf4+0x9e0+-0x25d4,0x145*0xd+0x1e*-0xe9+0x4f*0x23),_0x3cccb3['setLinearF'+'actor'](ks),_0x3cccb3['setAngular'+'Factor'](ks),_0x3cccb3['setCollisi'+'onFlags'](_0x3cccb3['getCollisi'+'onFlags']()|go),_0x3cccb3['entity']=_0x25d7cf,this['body']=_0x3cccb3,this['component']['enabled']&&_0x25d7cf['enabled']&&this['enable']();}}['destroy'](){this['body']&&(this['disable'](),this['app']['systems']['rigidbody']['destroyBod'+'y'](this['body']),this['body']=null);}['_getEntity'+'Transform'](_0x47a110){const _0x51ee9b=this['component'];if(_0x51ee9b){const _0x341d95=_0x51ee9b['getShapePo'+'sition'](),_0x42c55c=_0x51ee9b['getShapeRo'+'tation']();ks['setValue'](_0x341d95['x'],_0x341d95['y'],_0x341d95['z']),Nr['setValue'](_0x42c55c['x'],_0x42c55c['y'],_0x42c55c['z'],_0x42c55c['w']);}else{const _0x2a3de6=this['entity']['getPositio'+'n'](),_0x523904=this['entity']['getRotatio'+'n']();ks['setValue'](_0x2a3de6['x'],_0x2a3de6['y'],_0x2a3de6['z']),Nr['setValue'](_0x523904['x'],_0x523904['y'],_0x523904['z'],_0x523904['w']);}_0x47a110['setOrigin'](ks),_0x47a110['setRotatio'+'n'](Nr);}['updateTran'+'sform'](){this['_getEntity'+'Transform'](Ba);const _0x3d1fa2=this['body'];_0x3d1fa2['setWorldTr'+'ansform'](Ba),_0x3d1fa2['activate']();}['enable'](){const _0x248a49=this['body'];if(!_0x248a49)return;const _0x34d060=this['app']['systems']['rigidbody'];_0x34d060['_triggers']['indexOf'](this)<-0x1*0x11f5+0x1bcc*0x1+0x1*-0x9d7&&(_0x34d060['addBody'](_0x248a49,pg,iu^pg),_0x34d060['_triggers']['push'](this)),_0x248a49['forceActiv'+'ationState'](su),this['updateTran'+'sform']();}['disable'](){const _0x6b2f06=this['body'];if(!_0x6b2f06)return;const _0x1844dd=this['app']['systems']['rigidbody'],_0x20afdd=_0x1844dd['_triggers']['indexOf'](this);_0x20afdd>-(0x1dd7+-0x683+-0x1753)&&(_0x1844dd['removeBody'](_0x6b2f06),_0x1844dd['_triggers']['splice'](_0x20afdd,0x77*-0x9+0x1*0x168d+0x1*-0x125d)),_0x6b2f06['forceActiv'+'ationState'](uv);}}const cc=new te(),pL=new D(),mL=new D(),kr=new le(),_g=new Ie(),_L=['enabled','type','halfExtent'+'s','linearOffs'+'et','angularOff'+'set','radius','axis','height','convexHull','asset','renderAsse'+'t','shape','model','render','checkVerte'+'xDuplicate'+'s'];class Ta{constructor(_0x43fa70){this['system']=_0x43fa70;}['beforeInit'+'ialize'](_0x1f257d,_0x2c773b){_0x2c773b['shape']=null,_0x2c773b['model']=new tr(),_0x2c773b['model']['graph']=new Ie();}['afterIniti'+'alize'](_0x214429,_0x1a932a){this['recreatePh'+'ysicalShap'+'es'](_0x214429),_0x214429['data']['initialize'+'d']=!(-0x184a+0xa12*-0x1+-0x2dd*-0xc);}['reset'](_0x1ac1f6,_0x9c2324){this['beforeInit'+'ialize'](_0x1ac1f6,_0x9c2324),this['afterIniti'+'alize'](_0x1ac1f6,_0x9c2324);}['recreatePh'+'ysicalShap'+'es'](_0x59fee7){const _0x55db32=_0x59fee7['entity'],_0x36ed6f=_0x59fee7['data'];if(typeof Ammo<'u'){_0x55db32['trigger']&&(_0x55db32['trigger']['destroy'](),delete _0x55db32['trigger']),_0x36ed6f['shape']&&(_0x59fee7['_compoundP'+'arent']&&(_0x59fee7!==_0x59fee7['_compoundP'+'arent']&&this['system']['_removeCom'+'poundChild'](_0x59fee7['_compoundP'+'arent'],_0x36ed6f['shape']),_0x59fee7['_compoundP'+'arent']['entity']['rigidbody']&&_0x59fee7['_compoundP'+'arent']['entity']['rigidbody']['activate']()),this['destroySha'+'pe'](_0x36ed6f)),_0x36ed6f['shape']=this['createPhys'+'icalShape'](_0x59fee7['entity'],_0x36ed6f);const _0x11161b=!_0x59fee7['_compoundP'+'arent'];if(_0x36ed6f['type']==='compound'&&(!_0x59fee7['_compoundP'+'arent']||_0x59fee7===_0x59fee7['_compoundP'+'arent']))_0x59fee7['_compoundP'+'arent']=_0x59fee7,_0x55db32['forEach'](this['_addEachDe'+'scendant'],_0x59fee7);else{if(_0x36ed6f['type']!=='compound'&&!_0x59fee7['rigidbody']){_0x59fee7['_compoundP'+'arent']=null;let _0x24e2a7=_0x55db32['parent'];for(;_0x24e2a7;){if(_0x24e2a7['collision']&&_0x24e2a7['collision']['type']==='compound'){_0x59fee7['_compoundP'+'arent']=_0x24e2a7['collision'];break;}_0x24e2a7=_0x24e2a7['parent'];}}}_0x59fee7['_compoundP'+'arent']&&_0x59fee7!==_0x59fee7['_compoundP'+'arent']&&(_0x11161b&&_0x59fee7['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===0x955*-0x1+0x4*-0x719+0x25b9?this['system']['recreatePh'+'ysicalShap'+'es'](_0x59fee7['_compoundP'+'arent']):(this['system']['updateComp'+'oundChildT'+'ransform'](_0x55db32,!(-0x119*0xb+-0x481*-0x7+-0x1374)),_0x59fee7['_compoundP'+'arent']['entity']['rigidbody']&&_0x59fee7['_compoundP'+'arent']['entity']['rigidbody']['activate']())),_0x55db32['rigidbody']?(_0x55db32['rigidbody']['disableSim'+'ulation'](),_0x55db32['rigidbody']['createBody'](),_0x55db32['enabled']&&_0x55db32['rigidbody']['enabled']&&_0x55db32['rigidbody']['enableSimu'+'lation']()):_0x59fee7['_compoundP'+'arent']||(_0x55db32['trigger']?_0x55db32['trigger']['initialize'](_0x36ed6f):_0x55db32['trigger']=new pv(this['system']['app'],_0x59fee7,_0x36ed6f));}}['createPhys'+'icalShape'](_0x43f2d3,_0x342b7f){}['updateTran'+'sform'](_0x38c2b8,_0x5ecaf4,_0x474e61,_0x3325da){_0x38c2b8['entity']['trigger']&&_0x38c2b8['entity']['trigger']['updateTran'+'sform']();}['destroySha'+'pe'](_0x334539){_0x334539['shape']&&(Ammo['destroy'](_0x334539['shape']),_0x334539['shape']=null);}['beforeRemo'+'ve'](_0x2d4639,_0x1721c2){_0x1721c2['data']['shape']&&(_0x1721c2['_compoundP'+'arent']&&!_0x1721c2['_compoundP'+'arent']['entity']['_destroyin'+'g']&&(this['system']['_removeCom'+'poundChild'](_0x1721c2['_compoundP'+'arent'],_0x1721c2['data']['shape']),_0x1721c2['_compoundP'+'arent']['entity']['rigidbody']&&_0x1721c2['_compoundP'+'arent']['entity']['rigidbody']['activate']()),_0x1721c2['_compoundP'+'arent']=null,this['destroySha'+'pe'](_0x1721c2['data']));}['remove'](_0xfc6846,_0x2962b1){_0xfc6846['rigidbody']&&_0xfc6846['rigidbody']['body']&&_0xfc6846['rigidbody']['disableSim'+'ulation'](),_0xfc6846['trigger']&&(_0xfc6846['trigger']['destroy'](),delete _0xfc6846['trigger']);}['clone'](_0x398743,_0x4f6a50){const _0x5979de=this['system']['store'][_0x398743['getGuid']()],_0x4cf940={'enabled':_0x5979de['data']['enabled'],'type':_0x5979de['data']['type'],'halfExtents':[_0x5979de['data']['halfExtent'+'s']['x'],_0x5979de['data']['halfExtent'+'s']['y'],_0x5979de['data']['halfExtent'+'s']['z']],'linearOffset':[_0x5979de['data']['linearOffs'+'et']['x'],_0x5979de['data']['linearOffs'+'et']['y'],_0x5979de['data']['linearOffs'+'et']['z']],'angularOffset':[_0x5979de['data']['angularOff'+'set']['x'],_0x5979de['data']['angularOff'+'set']['y'],_0x5979de['data']['angularOff'+'set']['z'],_0x5979de['data']['angularOff'+'set']['w']],'radius':_0x5979de['data']['radius'],'axis':_0x5979de['data']['axis'],'height':_0x5979de['data']['height'],'convexHull':_0x5979de['data']['convexHull'],'asset':_0x5979de['data']['asset'],'renderAsset':_0x5979de['data']['renderAsse'+'t'],'model':_0x5979de['data']['model'],'render':_0x5979de['data']['render'],'checkVertexDuplicates':_0x5979de['data']['checkVerte'+'xDuplicate'+'s']};return this['system']['addCompone'+'nt'](_0x4f6a50,_0x4cf940);}}class gL extends Ta{['createPhys'+'icalShape'](_0x2f94a8,_0x4f2797){if(typeof Ammo<'u'){const _0x1d3271=_0x4f2797['halfExtent'+'s'],_0x2a9e20=new Ammo['btVector3'](_0x1d3271?_0x1d3271['x']:-0x24e7+0x43*-0x9+0x2742+0.5,_0x1d3271?_0x1d3271['y']:-0xf5c+-0x124a+0x3b*0x92+0.5,_0x1d3271?_0x1d3271['z']:-0x1*0x1da8+0x7*-0xfe+0x249a+0.5),_0x3e94c4=new Ammo['btBoxShape'](_0x2a9e20);return Ammo['destroy'](_0x2a9e20),_0x3e94c4;}}}class SL extends Ta{['createPhys'+'icalShape'](_0x51854e,_0x36c80a){if(typeof Ammo<'u')return new Ammo['btSphereSh'+'ape'](_0x36c80a['radius']);}}class yL extends Ta{['createPhys'+'icalShape'](_0x5692a4,_0x2eee3e){const _0x2e2edd=_0x2eee3e['axis']??0x6a3*0x5+0x2*0x128b+-0x6*0xbb6,_0x301f76=_0x2eee3e['radius']??-0x1ac2+0x123*-0x3+0x1e2b+0.5,_0xd7a5a7=Math['max']((_0x2eee3e['height']??-0x10a7+-0x5cb*-0x1+0xade)-(-0xb7a+-0x15f9+0x3*0xb27)*_0x301f76,0x5c4+0x7a4*0x4+0x3c*-0x9b);let _0x4978be=null;if(typeof Ammo<'u')switch(_0x2e2edd){case 0x212d+-0x15aa+0x1*-0xb83:_0x4978be=new Ammo['btCapsuleS'+'hapeX'](_0x301f76,_0xd7a5a7);break;case 0x1c81+-0x212e+-0x2*-0x257:_0x4978be=new Ammo['btCapsuleS'+'hape'](_0x301f76,_0xd7a5a7);break;case-0x934+-0x1a*-0x17b+-0x2*0xea4:_0x4978be=new Ammo['btCapsuleS'+'hapeZ'](_0x301f76,_0xd7a5a7);break;}return _0x4978be;}}class vL extends Ta{['createPhys'+'icalShape'](_0x521694,_0x170b7a){const _0x527feb=_0x170b7a['axis']??-0x3*-0x87a+0x13ac+0x905*-0x5,_0x6903d1=_0x170b7a['radius']??-0x18e4+-0x22d5*0x1+0x3bb9+0.5,_0x3c39bb=_0x170b7a['height']??-0x1*-0x113b+-0x767+0x1f7*-0x5;let _0x55c489=null,_0x3919e4=null;if(typeof Ammo<'u')switch(_0x527feb){case 0x12e2+-0x1dbb+0x1*0xad9:_0x55c489=new Ammo['btVector3'](_0x3c39bb*(0x53*-0x72+0x1*-0x1214+0x370a+0.5),_0x6903d1,_0x6903d1),_0x3919e4=new Ammo['btCylinder'+'ShapeX'](_0x55c489);break;case 0x151a+-0x2*0xcdf+-0x1*-0x4a5:_0x55c489=new Ammo['btVector3'](_0x6903d1,_0x3c39bb*(-0x536*-0x1+0xfa3+-0x14d9+0.5),_0x6903d1),_0x3919e4=new Ammo['btCylinder'+'Shape'](_0x55c489);break;case-0x169d*0x1+-0x3*0x156+0x11*0x191:_0x55c489=new Ammo['btVector3'](_0x6903d1,_0x6903d1,_0x3c39bb*(0x111e+0x1e39+-0x2f57+0.5)),_0x3919e4=new Ammo['btCylinder'+'ShapeZ'](_0x55c489);break;}return _0x55c489&&Ammo['destroy'](_0x55c489),_0x3919e4;}}class xL extends Ta{['createPhys'+'icalShape'](_0x2c8760,_0x146255){const _0x292dc3=_0x146255['axis']??0x141c+-0x131e*0x2+0x297*0x7,_0x53ff56=_0x146255['radius']??0xc10+0xd*0x2bc+-0x2f9c+0.5,_0x4081ac=_0x146255['height']??-0x11cc+0x1e5e+-0xc91*0x1;let _0xe2f1e5=null;if(typeof Ammo<'u')switch(_0x292dc3){case-0x1fa4+0x2*-0xad1+0x3546:_0xe2f1e5=new Ammo['btConeShap'+'eX'](_0x53ff56,_0x4081ac);break;case 0x180b+0x406+-0x1c10:_0xe2f1e5=new Ammo['btConeShap'+'e'](_0x53ff56,_0x4081ac);break;case 0x1*0x12c1+-0x694+0x1bd*-0x7:_0xe2f1e5=new Ammo['btConeShap'+'eZ'](_0x53ff56,_0x4081ac);break;}return _0xe2f1e5;}}class TL extends Ta{['beforeInit'+'ialize'](_0xd737c6,_0x5cca54){}['createAmmo'+'Hull'](_0x2e88e2,_0x39a5f7,_0x5c8ebb,_0x2e9bec){const _0xab4aa8=new Ammo['btConvexHu'+'llShape'](),_0x1ddaee=new Ammo['btVector3'](),_0x2c7560=[];_0x2e88e2['getPositio'+'ns'](_0x2c7560);for(let _0x43b863=0x8*-0x429+-0x1*0xf5+0x223d;_0x43b863<_0x2c7560['length'];_0x43b863+=0x56*-0x4b+0x9ad+0xf88)_0x1ddaee['setValue'](_0x2c7560[_0x43b863]*_0x2e9bec['x'],_0x2c7560[_0x43b863+(0x200+0x1*0x1957+0x2*-0xdab)]*_0x2e9bec['y'],_0x2c7560[_0x43b863+(0x52*0x13+-0x17c7*-0x1+0x1ddb*-0x1)]*_0x2e9bec['z']),_0xab4aa8['addPoint'](_0x1ddaee,!(0x221c+-0x1051+-0x11ca));Ammo['destroy'](_0x1ddaee),_0xab4aa8['recalcLoca'+'lAabb'](),_0xab4aa8['setMargin'](0x4*0x44a+0x2*0x135+0x1f5*-0xa+0.01);const _0x393917=this['system']['_getNodeTr'+'ansform'](_0x39a5f7);_0x5c8ebb['addChildSh'+'ape'](_0x393917,_0xab4aa8),Ammo['destroy'](_0x393917);}['createAmmo'+'Mesh'](_0x150420,_0x755c86,_0x41d342,_0x2ac74d,_0x396c99=!(0x1aff+-0x43*-0x41+0x2b*-0x106)){const _0x1747b1=this['system'];let _0x531c82;if(_0x1747b1['_triMeshCa'+'che'][_0x150420['id']])_0x531c82=_0x1747b1['_triMeshCa'+'che'][_0x150420['id']];else{const _0x377254=_0x150420['vertexBuff'+'er'],_0x4122b2=_0x377254['getFormat']();let _0x2f2c78,_0x35c970;for(let _0x5f034f=-0x1c81+-0x2125+0x3da6;_0x5f034f<_0x4122b2['elements']['length'];_0x5f034f++){const _0x1c1acc=_0x4122b2['elements'][_0x5f034f];if(_0x1c1acc['name']===Pe){_0x35c970=new Float32Array(_0x377254['lock'](),_0x1c1acc['offset']),_0x2f2c78=_0x1c1acc['stride']/(0x8c9*-0x1+0x2442+-0x1b75);break;}}const _0x5d2a6a=[];_0x150420['getIndices'](_0x5d2a6a);const _0x259efb=_0x150420['primitive'][-0x8bd*-0x1+-0x2674+0x1*0x1db7]['count']/(0x3a*-0x22+-0x17*0x23+0xadc),_0x582236=new Ammo['btVector3']();let _0x274a81,_0x3503bf,_0x5d87a0;const _0x240084=_0x150420['primitive'][-0x2031+-0x6a7+0x26d8*0x1]['base'];_0x531c82=new Ammo['btTriangle'+'Mesh'](),_0x1747b1['_triMeshCa'+'che'][_0x150420['id']]=_0x531c82;const _0x5dc382=new Map();w['assert'](typeof _0x531c82['getIndexed'+'MeshArray']=='function','Ammo.js\x20ve'+'rsion\x20is\x20t'+'oo\x20old,\x20pl'+'ease\x20updat'+'e\x20to\x20a\x20new'+'er\x20Ammo.');const _0x5a08e6=_0x531c82['getIndexed'+'MeshArray']();_0x5a08e6['at'](0x10ad+0x57f+-0x6*0x3b2)['m_numTrian'+'gles']=_0x259efb;const _0x3d8d3a=_0x2ac74d?_0x2ac74d['x']:-0x20a+0x1*-0xc31+0xe3c,_0x4a0824=_0x2ac74d?_0x2ac74d['y']:0x1efe+0x22*0xb3+-0x36c3,_0x413047=_0x2ac74d?_0x2ac74d['z']:-0x6f9+0x71*-0x3a+-0x56e*-0x6,_0x37c7bc=_0x5aec1c=>{const _0x486210=_0x35c970[_0x5aec1c*_0x2f2c78]*_0x3d8d3a,_0xd31b5=_0x35c970[_0x5aec1c*_0x2f2c78+(-0x1*0xa37+-0x2*-0x4aa+0xe4)]*_0x4a0824,_0x4c4d56=_0x35c970[_0x5aec1c*_0x2f2c78+(0x1003+0x226e+0x1*-0x326f)]*_0x413047;let _0x5d9f66;if(_0x396c99){const _0x1dc118=_0x486210+':'+_0xd31b5+':'+_0x4c4d56;if(_0x5d9f66=_0x5dc382['get'](_0x1dc118),_0x5d9f66!==void(-0x36e+0xc79+-0x1*0x90b))return _0x5d9f66;_0x582236['setValue'](_0x486210,_0xd31b5,_0x4c4d56),_0x5d9f66=_0x531c82['findOrAddV'+'ertex'](_0x582236,!(-0xed1+0x1*-0x1535+0x2407)),_0x5dc382['set'](_0x1dc118,_0x5d9f66);}else _0x582236['setValue'](_0x486210,_0xd31b5,_0x4c4d56),_0x5d9f66=_0x531c82['findOrAddV'+'ertex'](_0x582236,!(-0x5a7*0x5+-0x1*-0x128b+0x9b9));return _0x5d9f66;};for(let _0x2ee734=-0x63d*-0x5+-0x1092+-0xe9f;_0x2ee734<_0x259efb;_0x2ee734++)_0x274a81=_0x37c7bc(_0x5d2a6a[_0x240084+_0x2ee734*(0x15bb+0x1*0x20ea+-0x103*0x36)]),_0x3503bf=_0x37c7bc(_0x5d2a6a[_0x240084+_0x2ee734*(-0x1e39+0x23d8+-0x59c)+(-0xd61+-0x1d62*-0x1+-0x1000)]),_0x5d87a0=_0x37c7bc(_0x5d2a6a[_0x240084+_0x2ee734*(-0x6f0+0x1*-0x1c76+0x2369)+(-0x1b8e+0x1c5*-0x12+0x3b6a)]),_0x531c82['addIndex'](_0x274a81),_0x531c82['addIndex'](_0x3503bf),_0x531c82['addIndex'](_0x5d87a0);Ammo['destroy'](_0x582236);}const _0x585eae=new Ammo['btBvhTrian'+'gleMeshSha'+'pe'](_0x531c82,!(0xd6e+-0x1919+0xbab));if(!_0x2ac74d){const _0x203740=_0x1747b1['_getNodeSc'+'aling'](_0x755c86);_0x585eae['setLocalSc'+'aling'](_0x203740),Ammo['destroy'](_0x203740);}const _0x3e0875=_0x1747b1['_getNodeTr'+'ansform'](_0x755c86);_0x41d342['addChildSh'+'ape'](_0x3e0875,_0x585eae),Ammo['destroy'](_0x3e0875);}['createPhys'+'icalShape'](_0x3947ed,_0x2cd486){if(!(typeof Ammo>'u')&&(_0x2cd486['model']||_0x2cd486['render'])){const _0x163e29=new Ammo['btCompound'+'Shape'](),_0x4ea634=_0x3947ed['getWorldTr'+'ansform']()['getScale']();if(_0x2cd486['render']){const _0x38a3d4=_0x2cd486['render']['meshes'];for(let _0x504844=-0x1cb8+-0x1*-0x1871+0x447*0x1;_0x504844<_0x38a3d4['length'];_0x504844++)_0x2cd486['convexHull']?this['createAmmo'+'Hull'](_0x38a3d4[_0x504844],_g,_0x163e29,_0x4ea634):this['createAmmo'+'Mesh'](_0x38a3d4[_0x504844],_g,_0x163e29,_0x4ea634,_0x2cd486['checkVerte'+'xDuplicate'+'s']);}else{if(_0x2cd486['model']){const _0x2abae5=_0x2cd486['model']['meshInstan'+'ces'];for(let _0x4b6c3f=-0x1894+0x1d7+0x16bd;_0x4b6c3f<_0x2abae5['length'];_0x4b6c3f++)this['createAmmo'+'Mesh'](_0x2abae5[_0x4b6c3f]['mesh'],_0x2abae5[_0x4b6c3f]['node'],_0x163e29,null,_0x2cd486['checkVerte'+'xDuplicate'+'s']);const _0xde24d6=new Ammo['btVector3'](_0x4ea634['x'],_0x4ea634['y'],_0x4ea634['z']);_0x163e29['setLocalSc'+'aling'](_0xde24d6),Ammo['destroy'](_0xde24d6);}}return _0x163e29;}}['recreatePh'+'ysicalShap'+'es'](_0x172745){const _0x3e56d1=_0x172745['data'];if((_0x3e56d1['renderAsse'+'t']||_0x3e56d1['asset'])&&_0x172745['enabled']&&_0x172745['entity']['enabled']){this['loadAsset'](_0x172745,_0x3e56d1['renderAsse'+'t']||_0x3e56d1['asset'],_0x3e56d1['renderAsse'+'t']?'render':'model');return;}this['doRecreate'+'PhysicalSh'+'ape'](_0x172745);}['loadAsset'](_0x7f2593,_0xdf36b4,_0x3c3c68){const _0x104d9e=_0x7f2593['data'],_0x30ad69=this['system']['app']['assets'],_0x3bae9c=_0x104d9e[_0x3c3c68],_0x5a546a=_0x2ed681=>{_0x104d9e[_0x3c3c68]===_0x3bae9c&&(_0x104d9e[_0x3c3c68]=_0x2ed681['resource'],this['doRecreate'+'PhysicalSh'+'ape'](_0x7f2593));},_0xf105cb=_0x2dd204=>{_0x2dd204['ready'](_0x5054fa=>{if(_0x5054fa['data']['containerA'+'sset']){const _0x741061=_0x30ad69['get'](_0x5054fa['data']['containerA'+'sset']);_0x741061['loaded']?_0x5a546a(_0x5054fa):(_0x741061['ready'](()=>{_0x5a546a(_0x5054fa);}),_0x30ad69['load'](_0x741061));}else _0x5a546a(_0x5054fa);}),_0x30ad69['load'](_0x2dd204);},_0x2cbca6=_0x30ad69['get'](_0xdf36b4);_0x2cbca6?_0xf105cb(_0x2cbca6):_0x30ad69['once']('add:'+_0xdf36b4,_0xf105cb);}['doRecreate'+'PhysicalSh'+'ape'](_0x16c440){const _0x26afee=_0x16c440['entity'],_0x4e3b0d=_0x16c440['data'];_0x4e3b0d['model']||_0x4e3b0d['render']?(this['destroySha'+'pe'](_0x4e3b0d),_0x4e3b0d['shape']=this['createPhys'+'icalShape'](_0x26afee,_0x4e3b0d),_0x26afee['rigidbody']?(_0x26afee['rigidbody']['disableSim'+'ulation'](),_0x26afee['rigidbody']['createBody'](),_0x26afee['enabled']&&_0x26afee['rigidbody']['enabled']&&_0x26afee['rigidbody']['enableSimu'+'lation']()):_0x26afee['trigger']?_0x26afee['trigger']['initialize'](_0x4e3b0d):_0x26afee['trigger']=new pv(this['system']['app'],_0x16c440,_0x4e3b0d)):(this['beforeRemo'+'ve'](_0x26afee,_0x16c440),this['remove'](_0x26afee,_0x4e3b0d));}['updateTran'+'sform'](_0x4615b7,_0x165169,_0x53202f,_0x4a0fb0){if(_0x4615b7['shape']){const _0x819fa9=_0x4615b7['entity']['getWorldTr'+'ansform']()['getScale'](),_0x388584=_0x4615b7['shape']['getLocalSc'+'aling']();(_0x819fa9['x']!==_0x388584['x']()||_0x819fa9['y']!==_0x388584['y']()||_0x819fa9['z']!==_0x388584['z']())&&this['doRecreate'+'PhysicalSh'+'ape'](_0x4615b7);}super['updateTran'+'sform'](_0x4615b7,_0x165169,_0x53202f,_0x4a0fb0);}['destroySha'+'pe'](_0x288858){if(!_0x288858['shape'])return;const _0x4f1dba=_0x288858['shape']['getNumChil'+'dShapes']();for(let _0x59eeb5=-0x1381*0x1+0x72c+0xb*0x11f;_0x59eeb5<_0x4f1dba;_0x59eeb5++){const _0x559ba7=_0x288858['shape']['getChildSh'+'ape'](_0x59eeb5);Ammo['destroy'](_0x559ba7);}Ammo['destroy'](_0x288858['shape']),_0x288858['shape']=null;}}class wL extends Ta{['createPhys'+'icalShape'](_0x3afcae,_0x5046a5){if(typeof Ammo<'u')return new Ammo['btCompound'+'Shape']();}['_addEachDe'+'scendant'](_0x10ba1d){!_0x10ba1d['collision']||_0x10ba1d['rigidbody']||(_0x10ba1d['collision']['_compoundP'+'arent']=this,_0x10ba1d!==this['entity']&&_0x10ba1d['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x10ba1d['collision']));}['_updateEac'+'hDescendan'+'t'](_0x14ca02){_0x14ca02['collision']&&_0x14ca02['collision']['_compoundP'+'arent']===this&&(_0x14ca02['collision']['_compoundP'+'arent']=null,_0x14ca02!==this['entity']&&!_0x14ca02['rigidbody']&&_0x14ca02['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x14ca02['collision']));}['_updateEac'+'hDescendan'+'tTransform'](_0x20a287){!_0x20a287['collision']||_0x20a287['collision']['_compoundP'+'arent']!==this['collision']['_compoundP'+'arent']||this['collision']['system']['updateComp'+'oundChildT'+'ransform'](_0x20a287,!(-0x1*-0x26c6+0xb14+-0x7*0x71f));}}class EL extends ct{constructor(_0x3c5a3d){super(_0x3c5a3d),this['id']='collision',this['ComponentT'+'ype']=Ka,this['DataType']=hL,this['schema']=_L,this['implementa'+'tions']={},this['_triMeshCa'+'che']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['on']('remove',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x31f479,_0x1bf276,_0x27cc3c){_0x27cc3c=['type','halfExtent'+'s','radius','axis','height','convexHull','shape','model','asset','render','renderAsse'+'t','enabled','linearOffs'+'et','angularOff'+'set','checkVerte'+'xDuplicate'+'s'];const _0x2e56d6={};for(let _0x1c2d2b=-0x24b*-0x10+-0xf3c+-0x1574,_0x50f84b=_0x27cc3c['length'];_0x1c2d2b<_0x50f84b;_0x1c2d2b++){const _0x23c7e0=_0x27cc3c[_0x1c2d2b];_0x2e56d6[_0x23c7e0]=_0x1bf276[_0x23c7e0];}let _0x542d2d;if(_0x1bf276['hasOwnProp'+'erty']('asset')?(_0x542d2d=_0x27cc3c['indexOf']('model'),_0x542d2d!==-(0x13f*0x1f+-0x467+-0x1*0x2239)&&_0x27cc3c['splice'](_0x542d2d,0x7f*0x4b+0x1*-0xe87+-0x5*0x489),_0x542d2d=_0x27cc3c['indexOf']('render'),_0x542d2d!==-(-0x1*0x21a8+0x1f*0x116+-0x1*0x1)&&_0x27cc3c['splice'](_0x542d2d,0x9b4+0x24d2+-0x2e85)):_0x1bf276['hasOwnProp'+'erty']('model')&&(_0x542d2d=_0x27cc3c['indexOf']('asset'),_0x542d2d!==-(-0x7*0xef+-0x224b+0x28d5*0x1)&&_0x27cc3c['splice'](_0x542d2d,-0x7c3+-0x2*0x217+0xbf2)),_0x2e56d6['type']||(_0x2e56d6['type']=_0x31f479['data']['type']),_0x31f479['data']['type']=_0x2e56d6['type'],Array['isArray'](_0x2e56d6['halfExtent'+'s'])&&(_0x2e56d6['halfExtent'+'s']=new D(_0x2e56d6['halfExtent'+'s'])),Array['isArray'](_0x2e56d6['linearOffs'+'et'])&&(_0x2e56d6['linearOffs'+'et']=new D(_0x2e56d6['linearOffs'+'et'])),Array['isArray'](_0x2e56d6['angularOff'+'set'])){const _0x2804c1=_0x2e56d6['angularOff'+'set'];_0x2804c1['length']===-0x1*0x95d+-0x74a*-0x3+0x6*-0x215?_0x2e56d6['angularOff'+'set']=new le()['setFromEul'+'erAngles'](_0x2804c1[0xf19*-0x1+-0x10a3+0x1fbc],_0x2804c1[-0xfb3+-0x20a4+-0x1c*-0x1ba],_0x2804c1[-0x17b3*0x1+-0x17b2+-0x1*-0x2f67]):_0x2e56d6['angularOff'+'set']=new le(_0x2e56d6['angularOff'+'set']);}const _0x332db3=this['_createImp'+'lementatio'+'n'](_0x2e56d6['type']);_0x332db3['beforeInit'+'ialize'](_0x31f479,_0x2e56d6),super['initialize'+'ComponentD'+'ata'](_0x31f479,_0x2e56d6,_0x27cc3c),_0x332db3['afterIniti'+'alize'](_0x31f479,_0x2e56d6);}['_createImp'+'lementatio'+'n'](_0x50888d){if(this['implementa'+'tions'][_0x50888d]===void(0xf32*0x1+0x7*0xa7+-0x13c3)){let _0x1186aa;switch(_0x50888d){case'box':_0x1186aa=new gL(this);break;case'sphere':_0x1186aa=new SL(this);break;case'capsule':_0x1186aa=new yL(this);break;case'cylinder':_0x1186aa=new vL(this);break;case'cone':_0x1186aa=new xL(this);break;case'mesh':_0x1186aa=new TL(this);break;case'compound':_0x1186aa=new wL(this);break;default:w['error']('_createImp'+'lementatio'+'n:\x20Invalid'+'\x20collision'+'\x20system\x20ty'+'pe:\x20'+_0x50888d);}this['implementa'+'tions'][_0x50888d]=_0x1186aa;}return this['implementa'+'tions'][_0x50888d];}['_getImplem'+'entation'](_0x4acb1e){return this['implementa'+'tions'][_0x4acb1e['collision']['data']['type']];}['cloneCompo'+'nent'](_0x48ce2c,_0x2fdd4b){return this['_getImplem'+'entation'](_0x48ce2c)['clone'](_0x48ce2c,_0x2fdd4b);}['onBeforeRe'+'move'](_0x368020,_0x584bc4){this['implementa'+'tions'][_0x584bc4['data']['type']]['beforeRemo'+'ve'](_0x368020,_0x584bc4),_0x584bc4['onBeforeRe'+'move']();}['onRemove'](_0x3c6a0b,_0x48c688){this['implementa'+'tions'][_0x48c688['type']]['remove'](_0x3c6a0b,_0x48c688);}['updateComp'+'oundChildT'+'ransform'](_0x56e50d,_0x3ef014){const _0xf359a2=_0x56e50d['collision']['_compoundP'+'arent'];if(_0xf359a2!==_0x56e50d['collision']&&_0x56e50d['enabled']&&_0x56e50d['collision']['enabled']&&(_0x56e50d['_dirtyLoca'+'l']||_0x3ef014)){const _0x4b3e98=this['_getNodeTr'+'ansform'](_0x56e50d,_0xf359a2['entity']),_0x5a583e=_0xf359a2['getCompoun'+'dChildShap'+'eIndex'](_0x56e50d['collision']['shape']);_0x5a583e===null?_0xf359a2['shape']['addChildSh'+'ape'](_0x4b3e98,_0x56e50d['collision']['data']['shape']):_0xf359a2['shape']['updateChil'+'dTransform'](_0x5a583e,_0x4b3e98,!(-0x93*-0x40+-0xc8b*0x1+-0x1835*0x1)),Ammo['destroy'](_0x4b3e98);}}['_removeCom'+'poundChild'](_0x1a5a75,_0x1ed040){if(_0x1a5a75['shape']['getNumChil'+'dShapes']()!==-0x1766+0xcb*-0x2b+-0x397f*-0x1){if(_0x1a5a75['shape']['removeChil'+'dShape'])_0x1a5a75['shape']['removeChil'+'dShape'](_0x1ed040);else{const _0x14c67a=_0x1a5a75['getCompoun'+'dChildShap'+'eIndex'](_0x1ed040);_0x14c67a!==null&&_0x1a5a75['shape']['removeChil'+'dShapeByIn'+'dex'](_0x14c67a);}}}['onTransfor'+'mChanged'](_0x4c99fd,_0x335f5b,_0x14c938,_0x28717d){this['implementa'+'tions'][_0x4c99fd['data']['type']]['updateTran'+'sform'](_0x4c99fd,_0x335f5b,_0x14c938,_0x28717d);}['changeType'](_0x2bbcee,_0x4bedaa,_0x52233b){this['implementa'+'tions'][_0x4bedaa]['beforeRemo'+'ve'](_0x2bbcee['entity'],_0x2bbcee),this['implementa'+'tions'][_0x4bedaa]['remove'](_0x2bbcee['entity'],_0x2bbcee['data']),this['_createImp'+'lementatio'+'n'](_0x52233b)['reset'](_0x2bbcee,_0x2bbcee['data']);}['recreatePh'+'ysicalShap'+'es'](_0x80d606){this['implementa'+'tions'][_0x80d606['data']['type']]['recreatePh'+'ysicalShap'+'es'](_0x80d606);}['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x34e67c,_0x4ef39c){if(_0x34e67c===_0x4ef39c){const _0x2bbbfb=_0x34e67c['getWorldTr'+'ansform']()['getScale']();cc['setScale'](_0x2bbbfb['x'],_0x2bbbfb['y'],_0x2bbbfb['z']);}else this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x34e67c['parent'],_0x4ef39c),cc['mul'](_0x34e67c['getLocalTr'+'ansform']());}['_getNodeSc'+'aling'](_0xbe9dd4){const _0x546cc6=_0xbe9dd4['getWorldTr'+'ansform']()['getScale']();return new Ammo['btVector3'](_0x546cc6['x'],_0x546cc6['y'],_0x546cc6['z']);}['_getNodeTr'+'ansform'](_0x4daddb,_0x3f17dd){let _0x24a655,_0x5bdec0;_0x3f17dd?(this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0x4daddb,_0x3f17dd),_0x24a655=pL,_0x5bdec0=kr,cc['getTransla'+'tion'](_0x24a655),_0x5bdec0['setFromMat'+'4'](cc)):(_0x24a655=_0x4daddb['getPositio'+'n'](),_0x5bdec0=_0x4daddb['getRotatio'+'n']());const _0x408a79=new Ammo['btQuaterni'+'on'](),_0x5ea2ff=new Ammo['btTransfor'+'m']();_0x5ea2ff['setIdentit'+'y']();const _0x31d76b=_0x5ea2ff['getOrigin'](),_0x17dbfc=_0x4daddb['collision'];if(_0x17dbfc&&_0x17dbfc['_hasOffset']){const _0x2c723a=_0x17dbfc['data']['linearOffs'+'et'],_0x4002ae=_0x17dbfc['data']['angularOff'+'set'],_0x1f3724=mL;kr['copy'](_0x5bdec0)['transformV'+'ector'](_0x2c723a,_0x1f3724),_0x1f3724['add'](_0x24a655),kr['copy'](_0x5bdec0)['mul'](_0x4002ae),_0x31d76b['setValue'](_0x1f3724['x'],_0x1f3724['y'],_0x1f3724['z']),_0x408a79['setValue'](kr['x'],kr['y'],kr['z'],kr['w']);}else _0x31d76b['setValue'](_0x24a655['x'],_0x24a655['y'],_0x24a655['z']),_0x408a79['setValue'](_0x5bdec0['x'],_0x5bdec0['y'],_0x5bdec0['z'],_0x5bdec0['w']);return _0x5ea2ff['setRotatio'+'n'](_0x408a79),Ammo['destroy'](_0x408a79),_0x5ea2ff;}['destroy'](){for(const _0x169c57 in this['_triMeshCa'+'che'])Ammo['destroy'](this['_triMeshCa'+'che'][_0x169c57]);this['_triMeshCa'+'che']=null,super['destroy']();}}const hc=new ie(),bL=new Kt();class AL{constructor(_0x2d47d8,_0x28081e,_0x102361){this['_entity']=_0x2d47d8,this['_element']=_0x2d47d8['element'],this['model']=new tr(),this['node']=new Ie(),this['model']['graph']=this['node'],this['mesh']=_0x28081e,this['meshInstan'+'ce']=new He(this['mesh'],_0x102361,this['node']),this['meshInstan'+'ce']['name']='ImageEleme'+'nt:\x20'+_0x2d47d8['name'],this['meshInstan'+'ce']['castShadow']=!(0x1639+-0x3a*0x17+-0x1102*0x1),this['meshInstan'+'ce']['receiveSha'+'dow']=!(0x1b*-0xa4+-0x83b*-0x4+-0xf9f),this['_meshDirty']=!(-0x2051+0x19+0x2039),this['model']['meshInstan'+'ces']['push'](this['meshInstan'+'ce']),this['_entity']['addChild'](this['model']['graph']),this['model']['_entity']=this['_entity'],this['unmaskMesh'+'Instance']=null;}['destroy'](){var _0x45defb,_0x2a7a8e;this['setMateria'+'l'](null),this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),this['model']['destroy'](),this['model']=null,this['node']=null,this['mesh']=null,(_0x45defb=this['meshInstan'+'ce'])==null||_0x45defb['destroy'](),this['meshInstan'+'ce']=null,(_0x2a7a8e=this['unmaskMesh'+'Instance'])==null||_0x2a7a8e['destroy'](),this['unmaskMesh'+'Instance']=null,this['_entity']=null,this['_element']=null;}['setMesh'](_0x157051){this['meshInstan'+'ce']&&(this['mesh']=_0x157051,this['meshInstan'+'ce']['mesh']=_0x157051,this['meshInstan'+'ce']['visible']=!!_0x157051,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['mesh']=_0x157051),this['forceUpdat'+'eAabb']());}['setMask'](_0x2bc378){var _0x1d19ef;if(this['meshInstan'+'ce']){if(this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),_0x2bc378){this['unmaskMesh'+'Instance']=new He(this['mesh'],this['meshInstan'+'ce']['material'],this['node']),this['unmaskMesh'+'Instance']['name']='Unmask:\x20'+this['_entity']['name'],this['unmaskMesh'+'Instance']['castShadow']=!(-0x1982+0x1e81+-0x4fe),this['unmaskMesh'+'Instance']['receiveSha'+'dow']=!(-0x662+0x51d+-0x2*-0xa3),this['unmaskMesh'+'Instance']['pick']=!(0x467+-0x1ff5+-0x1*-0x1b8f),this['model']['meshInstan'+'ces']['push'](this['unmaskMesh'+'Instance']);for(const _0x1868dd in this['meshInstan'+'ce']['parameters'])this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x1868dd,this['meshInstan'+'ce']['parameters'][_0x1868dd]['data']);}else{const _0x14f398=this['model']['meshInstan'+'ces']['indexOf'](this['unmaskMesh'+'Instance']);_0x14f398>=-0x1876+-0x1*-0x2407+-0x8d*0x15&&this['model']['meshInstan'+'ces']['splice'](_0x14f398,-0xb47+0x1848+0xd*-0x100);}this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['addModelTo'+'Layers'](this['model']),_0x2bc378||((_0x1d19ef=this['unmaskMesh'+'Instance'])==null||_0x1d19ef['destroy'](),this['unmaskMesh'+'Instance']=null);}}['setMateria'+'l'](_0x45b2a7){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x45b2a7,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['material']=_0x45b2a7));}['setParamet'+'er'](_0x160578,_0x5e2acd){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['setParamet'+'er'](_0x160578,_0x5e2acd),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x160578,_0x5e2acd));}['deletePara'+'meter'](_0x6a6533){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['deletePara'+'meter'](_0x6a6533),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['deletePara'+'meter'](_0x6a6533));}['setUnmaskD'+'rawOrder'](){if(!this['meshInstan'+'ce'])return;const _0x4fbc96=function(_0x4cbbc3){let _0x116afd;const _0x3d7785=_0x4cbbc3['children'],_0x12ec45=_0x3d7785['length'];if(_0x12ec45){for(let _0x21e67a=0x2*-0x262+-0x3*-0x9d1+-0x18af;_0x21e67a<_0x12ec45;_0x21e67a++)_0x3d7785[_0x21e67a]['element']&&(_0x116afd=_0x3d7785[_0x21e67a]);if(!_0x116afd)return null;const _0x41db78=_0x4fbc96(_0x116afd);return _0x41db78||_0x116afd;}return null;};if(this['unmaskMesh'+'Instance']){const _0x441d4a=_0x4fbc96(this['_entity']);_0x441d4a&&_0x441d4a['element']?this['unmaskMesh'+'Instance']['drawOrder']=_0x441d4a['element']['drawOrder']+_0x441d4a['element']['getMaskOff'+'set']():this['unmaskMesh'+'Instance']['drawOrder']=this['meshInstan'+'ce']['drawOrder']+this['_element']['getMaskOff'+'set'](),w['trace'](zs,'setDrawOrd'+'er:\x20',this['unmaskMesh'+'Instance']['name'],this['unmaskMesh'+'Instance']['drawOrder']);}}['setDrawOrd'+'er'](_0x1b4635){this['meshInstan'+'ce']&&(w['trace'](zs,'setDrawOrd'+'er:\x20',this['meshInstan'+'ce']['name'],_0x1b4635),this['meshInstan'+'ce']['drawOrder']=_0x1b4635);}['setCull'](_0x4491ba){if(!this['meshInstan'+'ce'])return;const _0x14cfbb=this['_element'];let _0x31f1c9=null;_0x4491ba&&_0x14cfbb['_isScreenS'+'pace']()&&(_0x31f1c9=function(_0x8b071d){return _0x14cfbb['isVisibleF'+'orCamera'](_0x8b071d);}),this['meshInstan'+'ce']['cull']=_0x4491ba,this['meshInstan'+'ce']['isVisibleF'+'unc']=_0x31f1c9,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['cull']=_0x4491ba,this['unmaskMesh'+'Instance']['isVisibleF'+'unc']=_0x31f1c9);}['setScreenS'+'pace'](_0x264849){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['screenSpac'+'e']=_0x264849,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['screenSpac'+'e']=_0x264849));}['setLayer'](_0x3c16be){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['layer']=_0x3c16be,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['layer']=_0x3c16be));}['forceUpdat'+'eAabb'](_0x5a5d04){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_aabbVer']=-(-0x2084+-0x19f8+-0x137f*-0x3),this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_aabbVer']=-(0x1e2e+-0x1d1+-0x1c5c)));}['setAabbFun'+'c'](_0x355748){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_updateAab'+'bFunc']=_0x355748,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_updateAab'+'bFunc']=_0x355748));}}class CL{constructor(_0x4c8027){h(this,'_evtSetMes'+'hes',null),(this['_element']=_0x4c8027,this['_entity']=_0x4c8027['entity'],this['_system']=_0x4c8027['system'],this['_textureAs'+'set']=null,this['_texture']=null,this['_materialA'+'sset']=null,this['_material']=null,this['_spriteAss'+'et']=null,this['_sprite']=null,this['_spriteFra'+'me']=-0x2*0x3b0+-0xef*-0x21+-0x176f,this['_pixelsPer'+'Unit']=null,this['_targetAsp'+'ectRatio']=-(-0xd2e*-0x2+0x1a51*-0x1+0x5*-0x2),this['_rect']=new re(-0x8b3*0x1+-0x1337+0x9*0x31a,0x826+0x15ed+-0x1e13*0x1,-0x3c3*-0x5+-0x2*-0x1147+-0x355c,-0xa9e+0x8*0x4b7+-0x1*0x1b19),this['_mask']=!(0x6d*-0x13+-0x5ff+0xe17),this['_maskRef']=-0x15d6+0x1*0x2ba+0x131c,this['_outerScal'+'e']=new J(),this['_outerScal'+'eUniform']=new Float32Array(-0x560*-0x6+0x21b7+-0x41f5),this['_innerOffs'+'et']=new re(),this['_innerOffs'+'etUniform']=new Float32Array(0x1bb5*0x1+0x1*0x217b+0xae*-0x5a),this['_atlasRect']=new re(),this['_atlasRect'+'Uniform']=new Float32Array(-0x38*-0x6d+-0x1c0f+0x43b),this['_defaultMe'+'sh']=this['_createMes'+'h'](),this['_renderabl'+'e']=new AL(this['_entity'],this['_defaultMe'+'sh'],this['_material']),this['_color']=new ie(0xb*-0x1f+0x1*0x1d15+-0x1bbf,-0xd9+0x1b77+-0x1a9d,0x1b70+0x1d4b+-0x38ba,0xd*0x2+0x1f76+-0x3*0xa85),this['_colorUnif'+'orm']=new Float32Array([0xfcd*-0x2+-0xc77*0x2+0x161*0x29,-0x5*-0x3a9+-0x1*0xc15+-0x637,0x36e*0xa+0x108e*-0x1+-0x11bd]),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',-0x1edc+-0xd75+0xb7*0x3e),this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_onScreenC'+'hange'](this['_element']['screen']),this['_element']['on']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['on']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['on']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this));}['destroy'](){this['textureAss'+'et']=null,this['spriteAsse'+'t']=null,this['materialAs'+'set']=null,this['_renderabl'+'e']['setMesh'](this['_defaultMe'+'sh']),this['_renderabl'+'e']['destroy'](),this['_defaultMe'+'sh']=null,this['_element']['off']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this);}['_onResolut'+'ionChange'](_0x26eae9){}['_onParentR'+'esizeOrPiv'+'otChange'](){this['_renderabl'+'e']['mesh']&&this['_updateMes'+'h'](this['_renderabl'+'e']['mesh']);}['_onScreenS'+'paceChange'](_0x407711){this['_updateMat'+'erial'](_0x407711);}['_onScreenC'+'hange'](_0x3a2c3f,_0x5a4b6d){_0x3a2c3f?this['_updateMat'+'erial'](_0x3a2c3f['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(-0x1c5+-0xf*-0x193+-0x15d7));}['_onDrawOrd'+'erChange'](_0x1f1dce){this['_renderabl'+'e']['setDrawOrd'+'er'](_0x1f1dce),this['mask']&&this['_element']['screen']&&this['_element']['screen']['screen']['once']('syncdrawor'+'der',function(){this['_renderabl'+'e']['setUnmaskD'+'rawOrder']();},this);}['_hasUserMa'+'terial'](){return!!this['_materialA'+'sset']||!!this['_material']&&this['_system']['defaultIma'+'geMaterial'+'s']['indexOf'](this['_material'])===-(0x909+0x88f+0x1197*-0x1);}['_use9Slici'+'ng'](){return this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt);}['_updateMat'+'erial'](_0x1c286a){const _0x1c4929=!!this['_mask'],_0x5ae594=!!(this['sprite']&&this['sprite']['renderMode']===Pt),_0x4fb1f1=!!(this['sprite']&&this['sprite']['renderMode']===Mt);this['_hasUserMa'+'terial']()||(this['_material']=this['_system']['getImageEl'+'ementMater'+'ial'](_0x1c286a,_0x1c4929,_0x5ae594,_0x4fb1f1)),this['_renderabl'+'e']&&(this['_renderabl'+'e']['setCull'](!this['_element']['_isScreenS'+'pace']()||this['_element']['_isScreenC'+'ulled']()),this['_renderabl'+'e']['setMateria'+'l'](this['_material']),this['_renderabl'+'e']['setScreenS'+'pace'](_0x1c286a),this['_renderabl'+'e']['setLayer'](_0x1c286a?QT:py));}['_createMes'+'h'](){const _0x59759c=this['_element'],_0x36ca91=_0x59759c['calculated'+'Width'],_0x364061=_0x59759c['calculated'+'Height'],_0x904c90=this['_rect'],_0x4d926a=this['_system']['app']['graphicsDe'+'vice'],_0x940321=new Float32Array([_0x36ca91,-0x27*0x83+0x2158+-0xd63,-0xd*0x2fd+-0x75b+-0x2*-0x171a,-0x1*-0x1521+0x1ecf+-0x33f0,-0x94e+0x267b+-0x4d*0x61,0x22b0+-0x1*0x937+-0x1978,_0x904c90['x']+_0x904c90['z'],0x10f8+0x20cd+-0x1a*0x1ea-_0x904c90['y'],_0x36ca91,_0x364061,-0x137a+-0x1*0x964+0x1cde,0x3ec*0x4+0x57c*0x7+0x3614*-0x1,0x4f*0x44+0x408*0x9+-0x3944,-0x190c+0x1017*0x1+0x1f*0x4a,_0x904c90['x']+_0x904c90['z'],0x1cc*0x8+0x1a61+-0x20*0x146-(_0x904c90['y']+_0x904c90['w']),-0x759+0x97c+0x223*-0x1,-0x577+-0x16*-0x166+-0x194d,0xc27+-0x309*-0x3+-0x2*0xaa1,0x1e47+0x1152+-0x2f99,-0x109+-0x431*0x1+0x3*0x1be,0x192d+-0x491*0x1+-0x149b*0x1,_0x904c90['x'],0x5ae+-0x64e*0x2+0x6ef-_0x904c90['y'],-0x61*0x2d+-0x3*0xc6d+0x3654,_0x364061,-0xd9*-0xf+-0x82+-0x271*0x5,0xb5a*0x3+0x155d+-0x376b,-0x156+-0x1fdc+-0x2132*-0x1,-0x1657+0x1cc6+-0x66e*0x1,_0x904c90['x'],0x15a1+0x239b+-0x393b-(_0x904c90['y']+_0x904c90['w'])]),_0x59c9dd=bL['get'](_0x4d926a,()=>new kt(_0x4d926a,[{'semantic':Pe,'components':0x3,'type':Ve},{'semantic':gs,'components':0x3,'type':Ve},{'semantic':is,'components':0x2,'type':Ve}])),_0x2c5b38=new Ds(_0x4d926a,_0x59c9dd,0x1ab7+-0x824+-0x128f,{'data':_0x940321['buffer']}),_0x554307=new Ge(_0x4d926a);return _0x554307['vertexBuff'+'er']=_0x2c5b38,_0x554307['primitive'][0x9e*0xc+0x3*0x15+-0x7a7*0x1]['type']=vr,_0x554307['primitive'][-0x1bb+-0xaf1+0xcac]['base']=-0x1*0x48b+-0x224b+0x2*0x136b,_0x554307['primitive'][-0x1d96+0x26e0+-0x94a]['count']=0xaec+-0x1*-0x3bb+-0xea3,_0x554307['primitive'][0x45*-0x6b+0x1cc2+0x15]['indexed']=!(-0x2505+-0x18df+0x5*0xc61),_0x554307['aabb']['setMinMax'](D['ZERO'],new D(_0x36ca91,_0x364061,-0x2d7+0xfbf+-0xce8)),this['_updateMes'+'h'](_0x554307),_0x554307;}['_updateMes'+'h'](_0x5329ae){const _0x1a317a=this['_element'];let _0x4b1e06=_0x1a317a['calculated'+'Width'],_0x1da0f6=_0x1a317a['calculated'+'Height'];if(_0x1a317a['fitMode']!==Rc&&this['_targetAsp'+'ectRatio']>-0x11a7+-0x582+-0xb*-0x21b){const _0xcddb54=_0x1a317a['calculated'+'Width']/_0x1a317a['calculated'+'Height'];_0x1a317a['fitMode']===nL&&_0xcddb54>this['_targetAsp'+'ectRatio']||_0x1a317a['fitMode']===oL&&_0xcddb54<this['_targetAsp'+'ectRatio']?_0x4b1e06=_0x1a317a['calculated'+'Height']*this['_targetAsp'+'ectRatio']:_0x1da0f6=_0x1a317a['calculated'+'Width']/this['_targetAsp'+'ectRatio'];}const _0x26cebd=_0x1a317a['_isScreenS'+'pace']();if(this['_updateMat'+'erial'](_0x26cebd),this['_renderabl'+'e']&&this['_renderabl'+'e']['forceUpdat'+'eAabb'](),this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){const _0x58adb7=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]],_0x41bd2a=(0x1791*-0x1+0xb3a+-0x1*-0xc59)/_0x58adb7['rect']['z'],_0x53e72b=(0x1*0x9c7+0x26*-0xe+-0x7b1)/_0x58adb7['rect']['w'];this['_innerOffs'+'et']['set'](_0x58adb7['border']['x']*_0x41bd2a,_0x58adb7['border']['y']*_0x53e72b,_0x58adb7['border']['z']*_0x41bd2a,_0x58adb7['border']['w']*_0x53e72b);const _0x5dde21=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x58adb7['rect']['x']/_0x5dde21['width'],_0x58adb7['rect']['y']/_0x5dde21['height'],_0x58adb7['rect']['z']/_0x5dde21['width'],_0x58adb7['rect']['w']/_0x5dde21['height']);const _0x1ba6b1=this['_pixelsPer'+'Unit']!==null?this['_pixelsPer'+'Unit']:this['sprite']['pixelsPerU'+'nit'],_0x30fae8=_0x58adb7['rect']['z']/_0x1ba6b1,_0x24bac6=_0x58adb7['rect']['w']/_0x1ba6b1;this['_outerScal'+'e']['set'](Math['max'](_0x4b1e06,this['_innerOffs'+'et']['x']*_0x30fae8),Math['max'](_0x1da0f6,this['_innerOffs'+'et']['y']*_0x24bac6));let _0x2a2a28=_0x30fae8,_0x2d9b43=_0x24bac6;this['_outerScal'+'e']['x']/=_0x30fae8,this['_outerScal'+'e']['y']/=_0x24bac6,_0x2a2a28*=Y['clamp'](_0x4b1e06/(this['_innerOffs'+'et']['x']*_0x30fae8),0x1e7*0xb+-0x1*-0x4ff+-0x19ec+0.0001,0x241c*-0x1+0x1*-0x2501+0x491e),_0x2d9b43*=Y['clamp'](_0x1da0f6/(this['_innerOffs'+'et']['y']*_0x24bac6),-0x3b9*-0x2+0x5b7+-0xd29+0.0001,0x3d*0x12+-0x142*-0x14+-0x1*0x1d71),this['_renderabl'+'e']&&(this['_innerOffs'+'etUniform'][-0xea2+0x1*0x8cb+0x5d7]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][-0x7e1+0x3*0x71d+-0xd75]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][-0xa51*0x1+0x25c5+-0x1b72]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][-0x1403+-0x28*-0xdf+-0xed2]=this['_innerOffs'+'et']['w'],this['_renderabl'+'e']['setParamet'+'er']('innerOffse'+'t',this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][0x13c6+-0x2701*-0x1+-0x3ac7]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][-0x131d+-0xa*-0x23b+0x10*-0x33]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][-0x1fbb+-0x72f+0x26ec]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][0x2029*-0x1+0x1658+-0x9d4*-0x1]=this['_atlasRect']['w'],this['_renderabl'+'e']['setParamet'+'er']('atlasRect',this['_atlasRect'+'Uniform']),this['_outerScal'+'eUniform'][0x26d8+-0x36b+-0x236d]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][-0x2052+-0x2312+0x4365]=this['_outerScal'+'e']['y'],this['_renderabl'+'e']['setParamet'+'er']('outerScale',this['_outerScal'+'eUniform']),this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']),this['_renderabl'+'e']['node']['setLocalSc'+'ale'](_0x2a2a28,_0x2d9b43,0x19*0xd5+-0x23f*-0xb+0xb*-0x423),this['_renderabl'+'e']['node']['setLocalPo'+'sition']((-0x1*-0x5ca+-0x13d5*0x1+0xe0b*0x1+0.5-_0x1a317a['pivot']['x'])*_0x4b1e06,(0x1bf9+0xbff*-0x3+0x804+0.5-_0x1a317a['pivot']['y'])*_0x1da0f6,0x14d7+-0x1*-0x60f+-0x2*0xd73));}else{const _0x2862f3=_0x5329ae['vertexBuff'+'er'],_0x2af333=new Float32Array(_0x2862f3['lock']()),_0x5d6844=_0x1a317a['pivot']['x'],_0x4fb4cb=_0x1a317a['pivot']['y'];_0x2af333[-0x623+-0x27*0x65+0x1586]=_0x4b1e06-_0x5d6844*_0x4b1e06,_0x2af333[-0x311*0x3+-0x252c+0x2e60]=-0x886*-0x1+-0x1*-0xa1d+-0x12a3*0x1-_0x4fb4cb*_0x1da0f6,_0x2af333[0xc8b+-0x1*-0x851+-0x3e*0x56]=_0x4b1e06-_0x5d6844*_0x4b1e06,_0x2af333[-0x91*-0x2+-0x82+0x1*-0x97]=_0x1da0f6-_0x4fb4cb*_0x1da0f6,_0x2af333[-0x19*0xd+0xd73+-0xc1e]=0x1a93+-0x1af3+-0x20*-0x3-_0x5d6844*_0x4b1e06,_0x2af333[0x320*-0x8+-0x14*0x110+0x2e51]=0x1f*-0x2e+-0x1d*-0x95+-0xb4f-_0x4fb4cb*_0x1da0f6,_0x2af333[-0x25e5+-0x26c7*-0x1+-0xca]=-0x4*-0x2b6+0x158f*-0x1+0xab7-_0x5d6844*_0x4b1e06,_0x2af333[-0x13f2+-0x83*0x4a+0x39e9]=_0x1da0f6-_0x4fb4cb*_0x1da0f6;let _0x36ec1a=-0x4*0x9c4+0x2412+-0x1*-0x2ff,_0x64e2a7=0xd*-0x2e0+0x24d9+-0x4*-0x22,_0x617082=this['_rect'];if(this['_sprite']&&this['_sprite']['frameKeys'][this['_spriteFra'+'me']]&&this['_sprite']['atlas']){const _0x1e332c=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];_0x1e332c&&(_0x617082=_0x1e332c['rect'],_0x36ec1a=this['_sprite']['atlas']['texture']['width'],_0x64e2a7=this['_sprite']['atlas']['texture']['height']);}_0x2af333[-0x2624+-0x7*-0x4a3+0x1e7*0x3]=(_0x617082['x']+_0x617082['z'])/_0x36ec1a,_0x2af333[-0x857+0x1*0x2457+0xe7*-0x1f]=-0x5*0x29f+0x336+0x9e6-_0x617082['y']/_0x64e2a7,_0x2af333[-0x22e6+0x1*-0xc4d+0x2f41]=(_0x617082['x']+_0x617082['z'])/_0x36ec1a,_0x2af333[-0xb*-0xd6+0xf6f*0x1+0x1892*-0x1]=0x1dbc+-0x101*-0x3+-0x20be-(_0x617082['y']+_0x617082['w'])/_0x64e2a7,_0x2af333[0xc*0x217+-0x2*0x53+-0x148*0x13]=_0x617082['x']/_0x36ec1a,_0x2af333[-0x201d+0x9*0x43e+-0x11*0x5a]=0x25a4+-0xaa6+-0x1afd-_0x617082['y']/_0x64e2a7,_0x2af333[-0xfd6+-0x5a*-0x47+0x2*-0x481]=_0x617082['x']/_0x36ec1a,_0x2af333[0x5c6+-0x2296+0x3*0x9a5]=0x133*0x1+-0x1bdc+0xd55*0x2-(_0x617082['y']+_0x617082['w'])/_0x64e2a7,_0x2862f3['unlock']();const _0x17f5cb=new D(-0x947+-0x67e*0x4+0x233f-_0x5d6844*_0x4b1e06,0x8ac+-0x103*-0x12+-0x1ae2-_0x4fb4cb*_0x1da0f6,0xfb*0x15+0x1ad2+-0x2f69),_0x4268a4=new D(_0x4b1e06-_0x5d6844*_0x4b1e06,_0x1da0f6-_0x4fb4cb*_0x1da0f6,-0xa3*0x2f+0x15d9+0x205*0x4);_0x5329ae['aabb']['setMinMax'](_0x17f5cb,_0x4268a4),this['_renderabl'+'e']&&(this['_renderabl'+'e']['node']['setLocalSc'+'ale'](0x12e2*0x2+0xde*0x20+-0x4183,0x15ac+-0x20f1+0xb46*0x1,0x1fb8+-0x10f*-0x19+-0x1*0x3a2e),this['_renderabl'+'e']['node']['setLocalPo'+'sition'](-0x406*-0x8+0x5*0x2c4+-0x2e04,0x11ed+-0xc70+-0x57d,0x16*0x18b+-0x895*-0x2+-0x198e*0x2),this['_renderabl'+'e']['setAabbFun'+'c'](null));}this['_meshDirty']=!(0x2455+-0x1657+0xdfd*-0x1);}['_updateSpr'+'ite'](){let _0x3aab38=!(-0x299+0x24a9+0x220f*-0x1),_0x1fc941=null;if(this['_targetAsp'+'ectRatio']=-(0x227*0x1+0xd73+-0x3*0x533),this['_sprite']&&this['_sprite']['atlas']){_0x1fc941=this['_sprite']['meshes'][this['spriteFram'+'e']],_0x3aab38=this['_sprite']['renderMode']===Pt||this['_sprite']['renderMode']===Mt;const _0x42b074=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];(_0x42b074==null?void(0x14c3+-0x4e*0x16+-0xe0f):_0x42b074['rect']['w'])>0xb*0x2b3+-0xa4*-0x35+-0x3fa5&&(this['_targetAsp'+'ectRatio']=_0x42b074['rect']['z']/_0x42b074['rect']['w']);}this['mesh']=_0x3aab38?_0x1fc941:this['_defaultMe'+'sh'],this['refreshMes'+'h']();}['refreshMes'+'h'](){this['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(-0x1899+0xe67*0x1+0xa32):this['_updateMes'+'h'](this['mesh']));}['_updateAab'+'b'](_0x557e9a){return _0x557e9a['center']['set'](0x1a50+0x25b7+-0x4007,0x74b*-0x5+0xe9*0xe+0x1*0x17b9,-0x42c+0x32e+-0x1*-0xfe),_0x557e9a['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(0x1c7d+0x1*-0xb57+-0x1126+0.5),this['_outerScal'+'e']['y']*(-0x89+-0x1*-0xe95+-0xe0c*0x1+0.5),0xb5*0x34+-0x737+-0x11*0x1bd+0.001),_0x557e9a['setFromTra'+'nsformedAa'+'bb'](_0x557e9a,this['_renderabl'+'e']['node']['getWorldTr'+'ansform']()),_0x557e9a;}['_toggleMas'+'k'](){this['_element']['_dirtifyMa'+'sk']();const _0x1cb428=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x1cb428),this['_renderabl'+'e']['setMask'](!!this['_mask']);}['_onMateria'+'lLoad'](_0x9aa77d){this['material']=_0x9aa77d['resource'];}['_onMateria'+'lAdded'](_0x36b9f5){this['_system']['app']['assets']['off']('add:'+_0x36b9f5['id'],this['_onMateria'+'lAdded'],this),this['_materialA'+'sset']===_0x36b9f5['id']&&this['_bindMater'+'ialAsset'](_0x36b9f5);}['_bindMater'+'ialAsset'](_0x903267){this['_entity']['enabled']&&(_0x903267['on']('load',this['_onMateria'+'lLoad'],this),_0x903267['on']('change',this['_onMateria'+'lChange'],this),_0x903267['on']('remove',this['_onMateria'+'lRemove'],this),_0x903267['resource']?this['_onMateria'+'lLoad'](_0x903267):this['_system']['app']['assets']['load'](_0x903267));}['_unbindMat'+'erialAsset'](_0x1d923b){_0x1d923b['off']('load',this['_onMateria'+'lLoad'],this),_0x1d923b['off']('change',this['_onMateria'+'lChange'],this),_0x1d923b['off']('remove',this['_onMateria'+'lRemove'],this);}['_onMateria'+'lChange'](){}['_onMateria'+'lRemove'](){}['_onTexture'+'Added'](_0x303a45){this['_system']['app']['assets']['off']('add:'+_0x303a45['id'],this['_onTexture'+'Added'],this),this['_textureAs'+'set']===_0x303a45['id']&&this['_bindTextu'+'reAsset'](_0x303a45);}['_bindTextu'+'reAsset'](_0x29db5d){this['_entity']['enabled']&&(_0x29db5d['on']('load',this['_onTexture'+'Load'],this),_0x29db5d['on']('change',this['_onTexture'+'Change'],this),_0x29db5d['on']('remove',this['_onTexture'+'Remove'],this),_0x29db5d['resource']?this['_onTexture'+'Load'](_0x29db5d):this['_system']['app']['assets']['load'](_0x29db5d));}['_unbindTex'+'tureAsset'](_0x1a4865){_0x1a4865['off']('load',this['_onTexture'+'Load'],this),_0x1a4865['off']('change',this['_onTexture'+'Change'],this),_0x1a4865['off']('remove',this['_onTexture'+'Remove'],this);}['_onTexture'+'Load'](_0x3e2010){this['texture']=_0x3e2010['resource'];}['_onTexture'+'Change'](_0xeac8fc){}['_onTexture'+'Remove'](_0x1c328e){}['_onSpriteA'+'ssetAdded'](_0x4a6b5c){this['_system']['app']['assets']['off']('add:'+_0x4a6b5c['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0x4a6b5c['id']&&this['_bindSprit'+'eAsset'](_0x4a6b5c);}['_bindSprit'+'eAsset'](_0x409277){this['_entity']['enabled']&&(_0x409277['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x409277['on']('change',this['_onSpriteA'+'ssetChange'],this),_0x409277['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x409277['resource']?this['_onSpriteA'+'ssetLoad'](_0x409277):this['_system']['app']['assets']['load'](_0x409277));}['_unbindSpr'+'iteAsset'](_0x39bd1c){_0x39bd1c['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x39bd1c['off']('change',this['_onSpriteA'+'ssetChange'],this),_0x39bd1c['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x39bd1c['data']['textureAtl'+'asAsset']&&this['_system']['app']['assets']['off']('load:'+_0x39bd1c['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this);}['_onSpriteA'+'ssetLoad'](_0x19520f){if(!_0x19520f||!_0x19520f['resource'])this['sprite']=null;else{if(_0x19520f['resource']['atlas'])this['sprite']=_0x19520f['resource'];else{const _0x9ede2a=_0x19520f['data']['textureAtl'+'asAsset'];if(_0x9ede2a){const _0x238cfc=this['_system']['app']['assets'];_0x238cfc['off']('load:'+_0x9ede2a,this['_onTexture'+'AtlasLoad'],this),_0x238cfc['once']('load:'+_0x9ede2a,this['_onTexture'+'AtlasLoad'],this);}}}}['_onSpriteA'+'ssetChange'](_0x3fccf2){this['_onSpriteA'+'ssetLoad'](_0x3fccf2);}['_onSpriteA'+'ssetRemove'](_0x4710d7){}['_bindSprit'+'e'](_0x1976c4){this['_evtSetMes'+'hes']=_0x1976c4['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),_0x1976c4['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x1976c4['on']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x1976c4['atlas']&&_0x1976c4['atlas']['on']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_unbindSpr'+'ite'](_0x1c389b){var _0x4e064a;(_0x4e064a=this['_evtSetMes'+'hes'])==null||_0x4e064a['off'](),this['_evtSetMes'+'hes']=null,_0x1c389b['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x1c389b['off']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x1c389b['atlas']&&_0x1c389b['atlas']['off']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_onSpriteM'+'eshesChang'+'e'](){this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],0xa99+0x10e7+-0x1b80,this['_sprite']['frameKeys']['length']-(-0x7c4+0x2408+-0x1c43))),this['_updateSpr'+'ite']();}['_onSpriteP'+'puChange'](){this['sprite']['renderMode']!==ci&&this['_pixelsPer'+'Unit']===null&&this['_updateSpr'+'ite']();}['_onAtlasTe'+'xtureChang'+'e'](){this['sprite']&&this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'));}['_onTexture'+'AtlasLoad'](_0x593067){const _0x30d049=this['_spriteAss'+'et'];_0x30d049 instanceof pe?this['_onSpriteA'+'ssetLoad'](_0x30d049):this['_onSpriteA'+'ssetLoad'](this['_system']['app']['assets']['get'](_0x30d049));}['onEnable'](){if(this['_materialA'+'sset']){const _0xdccfec=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);_0xdccfec&&_0xdccfec['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0xdccfec);}if(this['_textureAs'+'set']){const _0x3fc527=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x3fc527&&_0x3fc527['resource']!==this['_texture']&&this['_bindTextu'+'reAsset'](_0x3fc527);}if(this['_spriteAss'+'et']){const _0xc1240e=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0xc1240e&&_0xc1240e['resource']!==this['_sprite']&&this['_bindSprit'+'eAsset'](_0xc1240e);}this['_element']['addModelTo'+'Layers'](this['_renderabl'+'e']['model']);}['onDisable'](){this['_element']['removeMode'+'lFromLayer'+'s'](this['_renderabl'+'e']['model']);}['_setStenci'+'l'](_0x50a4bd){this['_renderabl'+'e']['meshInstan'+'ce']['stencilFro'+'nt']=_0x50a4bd,this['_renderabl'+'e']['meshInstan'+'ce']['stencilBac'+'k']=_0x50a4bd;let _0x15d323=-0x17f5+-0x5b8*0x1+-0x1dad*-0x1;if(this['_element']['maskedBy']&&(_0x15d323=this['_element']['maskedBy']['element']['_image']['_maskRef']),this['_renderabl'+'e']['unmaskMesh'+'Instance']){const _0x2de711=new pi({'ref':_0x15d323+(-0x1*0x665+0xe45+-0x7df),'func':Hc,'zpass':ix});this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']=_0x2de711,this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k']=_0x2de711;}}['_updateRen'+'derableEmi'+'ssive'](){hc['linear'](this['_color']),this['_colorUnif'+'orm'][-0xb2f+-0x2536+0x3065]=hc['r'],this['_colorUnif'+'orm'][-0x3a4+0x3*-0x19c+0x879*0x1]=hc['g'],this['_colorUnif'+'orm'][0x18ac+0x1*0x701+-0x1fab*0x1]=hc['b'],this['_renderabl'+'e']['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}set['color'](_0x24f1e8){this['_color']===_0x24f1e8&&w['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t');const {r:_0x422356,g:_0x4fb2a8,b:_0x3cf55e}=_0x24f1e8;(this['_color']['r']!==_0x422356||this['_color']['g']!==_0x4fb2a8||this['_color']['b']!==_0x3cf55e)&&(this['_color']['r']=_0x422356,this['_color']['g']=_0x4fb2a8,this['_color']['b']=_0x3cf55e,this['_updateRen'+'derableEmi'+'ssive']()),this['_element']&&this['_element']['fire']('set:color',this['_color']);}get['color'](){return this['_color'];}set['opacity'](_0xe4dec6){_0xe4dec6!==this['_color']['a']&&(this['_color']['a']=_0xe4dec6,this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',_0xe4dec6)),this['_element']&&this['_element']['fire']('set:opacit'+'y',_0xe4dec6);}get['opacity'](){return this['_color']['a'];}set['rect'](_0x2be551){this['_rect']===_0x2be551&&console['warn']('Setting\x20el'+'ement.rect'+'\x20to\x20itself'+'\x20will\x20have'+'\x20no\x20effect');let _0x3a70d4,_0x28df60,_0xfe4e1f,_0x19984b;_0x2be551 instanceof re?(_0x3a70d4=_0x2be551['x'],_0x28df60=_0x2be551['y'],_0xfe4e1f=_0x2be551['z'],_0x19984b=_0x2be551['w']):(_0x3a70d4=_0x2be551[-0x1*-0x1f6c+-0x1*-0x12ad+0x591*-0x9],_0x28df60=_0x2be551[-0xe3*0xc+-0x1*0x6b9+0x115e],_0xfe4e1f=_0x2be551[-0x13*-0x4f+0x1*0x2e1+-0x1a*0x56],_0x19984b=_0x2be551[-0x2421+0x56b*0x5+0x90d]),!(_0x3a70d4===this['_rect']['x']&&_0x28df60===this['_rect']['y']&&_0xfe4e1f===this['_rect']['z']&&_0x19984b===this['_rect']['w'])&&(this['_rect']['set'](_0x3a70d4,_0x28df60,_0xfe4e1f,_0x19984b),this['_renderabl'+'e']['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(0x1b99+0x29f+-0x8*0x3c7):this['_updateMes'+'h'](this['_renderabl'+'e']['mesh'])));}get['rect'](){return this['_rect'];}['_removeMat'+'erialAsset'+'Events'](){if(this['_materialA'+'sset']){const _0x157731=this['_system']['app']['assets'];_0x157731['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this);const _0x4ec36e=_0x157731['get'](this['_materialA'+'sset']);_0x4ec36e&&(_0x4ec36e['off']('load',this['_onMateria'+'lLoad'],this),_0x4ec36e['off']('change',this['_onMateria'+'lChange'],this),_0x4ec36e['off']('remove',this['_onMateria'+'lRemove'],this));}}set['material'](_0x38fb45){if(this['_material']!==_0x38fb45){if(!_0x38fb45){const _0x4b8d2f=this['_element']['_isScreenS'+'pace']();this['mask']?_0x38fb45=_0x4b8d2f?this['_system']['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']:this['_system']['defaultIma'+'geMaskMate'+'rial']:_0x38fb45=_0x4b8d2f?this['_system']['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']:this['_system']['defaultIma'+'geMaterial'];}if(this['_material']=_0x38fb45,this['_materialA'+'sset']){const _0x28141a=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);(!_0x28141a||_0x28141a['resource']!==_0x38fb45)&&(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=null);}_0x38fb45&&(this['_renderabl'+'e']['setMateria'+'l'](_0x38fb45),this['_hasUserMa'+'terial']()?(this['_renderabl'+'e']['deletePara'+'meter']('material_o'+'pacity'),this['_renderabl'+'e']['deletePara'+'meter']('material_e'+'missive')):(this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a'])));}}get['material'](){return this['_material'];}set['materialAs'+'set'](_0x48162b){const _0x2ac4e6=this['_system']['app']['assets'];let _0x423133=_0x48162b;if(_0x48162b instanceof pe&&(_0x423133=_0x48162b['id']),this['_materialA'+'sset']!==_0x423133){if(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=_0x423133,this['_materialA'+'sset']){const _0x2f00b5=_0x2ac4e6['get'](this['_materialA'+'sset']);_0x2f00b5?this['_bindMater'+'ialAsset'](_0x2f00b5):(this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x423133,_0x2ac4e6['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this));}else this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x423133;}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['texture'](_0x4bb4cb){if(this['_texture']!==_0x4bb4cb){if(this['_textureAs'+'set']){const _0x3b09d4=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x3b09d4&&_0x3b09d4['resource']!==_0x4bb4cb&&(this['textureAss'+'et']=null);}if(this['_texture']=_0x4bb4cb,_0x4bb4cb){this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null),this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_texture']),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a']);const _0x41c7d1=this['_texture']['width']/this['_texture']['height'];_0x41c7d1!==this['_targetAsp'+'ectRatio']&&(this['_targetAsp'+'ectRatio']=_0x41c7d1,this['_element']['fitMode']!==Rc&&this['refreshMes'+'h']());}else this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'),this['_targetAsp'+'ectRatio']=-(-0x2078+-0x16d1*-0x1+-0xc*-0xce),this['_element']['fitMode']!==Rc&&this['refreshMes'+'h']();}}get['texture'](){return this['_texture'];}set['textureAss'+'et'](_0x517f94){const _0x531a04=this['_system']['app']['assets'];let _0x27c8aa=_0x517f94;if(_0x517f94 instanceof pe&&(_0x27c8aa=_0x517f94['id']),this['_textureAs'+'set']!==_0x27c8aa){if(this['_textureAs'+'set']){_0x531a04['off']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this);const _0x1da9b7=_0x531a04['get'](this['_textureAs'+'set']);_0x1da9b7&&(_0x1da9b7['off']('load',this['_onTexture'+'Load'],this),_0x1da9b7['off']('change',this['_onTexture'+'Change'],this),_0x1da9b7['off']('remove',this['_onTexture'+'Remove'],this));}if(this['_textureAs'+'set']=_0x27c8aa,this['_textureAs'+'set']){const _0x5b46c7=_0x531a04['get'](this['_textureAs'+'set']);_0x5b46c7?this['_bindTextu'+'reAsset'](_0x5b46c7):(this['texture']=null,_0x531a04['on']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this));}else this['texture']=null;}}get['textureAss'+'et'](){return this['_textureAs'+'set'];}set['spriteAsse'+'t'](_0x1177dd){const _0x29c92e=this['_system']['app']['assets'];let _0x49672e=_0x1177dd;if(_0x1177dd instanceof pe&&(_0x49672e=_0x1177dd['id']),this['_spriteAss'+'et']!==_0x49672e){if(this['_spriteAss'+'et']){_0x29c92e['off']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this);const _0x3cf555=_0x29c92e['get'](this['_spriteAss'+'et']);_0x3cf555&&this['_unbindSpr'+'iteAsset'](_0x3cf555);}if(this['_spriteAss'+'et']=_0x49672e,this['_spriteAss'+'et']){const _0x4d5f4e=_0x29c92e['get'](this['_spriteAss'+'et']);_0x4d5f4e?this['_bindSprit'+'eAsset'](_0x4d5f4e):(this['sprite']=null,_0x29c92e['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}this['_element']&&this['_element']['fire']('set:sprite'+'Asset',_0x49672e);}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['sprite'](_0x5a5228){if(this['_sprite']!==_0x5a5228){if(this['_sprite']&&this['_unbindSpr'+'ite'](this['_sprite']),this['_spriteAss'+'et']){const _0x260977=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x260977&&_0x260977['resource']!==_0x5a5228&&(this['spriteAsse'+'t']=null);}this['_sprite']=_0x5a5228,this['_sprite']&&(this['_bindSprit'+'e'](this['_sprite']),this['_textureAs'+'set']&&(this['textureAss'+'et']=null)),this['_sprite']&&this['_sprite']['atlas']&&this['_sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap')),this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],-0x1ed9+-0x166+0x203f,this['_sprite']['frameKeys']['length']-(0x25dd+0x1b23+-0x949*0x7))),this['_updateSpr'+'ite']();}}get['sprite'](){return this['_sprite'];}set['spriteFram'+'e'](_0x24046c){const _0x5d003b=this['_spriteFra'+'me'];this['_sprite']?this['_spriteFra'+'me']=Y['clamp'](_0x24046c,0x1f1c+-0x8d1+-0x164b,this['_sprite']['frameKeys']['length']-(-0x8da+-0x1b57+0x2432)):this['_spriteFra'+'me']=_0x24046c,this['_spriteFra'+'me']!==_0x5d003b&&this['_updateSpr'+'ite'](),this['_element']&&this['_element']['fire']('set:sprite'+'Frame',_0x24046c);}get['spriteFram'+'e'](){return this['_spriteFra'+'me'];}set['mesh'](_0x5bd192){this['_renderabl'+'e']['setMesh'](_0x5bd192),this['_defaultMe'+'sh']===_0x5bd192?this['_renderabl'+'e']['setAabbFun'+'c'](null):this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']);}get['mesh'](){return this['_renderabl'+'e']['mesh'];}set['mask'](_0x49edd6){this['_mask']!==_0x49edd6&&(this['_mask']=_0x49edd6,this['_toggleMas'+'k']());}get['mask'](){return this['_mask'];}set['pixelsPerU'+'nit'](_0x1f49df){this['_pixelsPer'+'Unit']!==_0x1f49df&&(this['_pixelsPer'+'Unit']=_0x1f49df,this['_sprite']&&(this['_sprite']['renderMode']===Pt||this['_sprite']['renderMode']===Mt)&&this['_updateSpr'+'ite']());}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}get['aabb'](){return this['_renderabl'+'e']['meshInstan'+'ce']?this['_renderabl'+'e']['meshInstan'+'ce']['aabb']:null;}}class PL extends me{constructor(_0x2bd964){super(),this['_app']=_0x2bd964,_0x2bd964['i18n']['on'](Sa['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['_autoLoad']=!(0x16a*-0xe+-0x2fa*-0x1+0x3b*0x49),this['_disableLo'+'calization']=!(-0x197d+0xb5*0x2b+-0x4e9),this['_defaultAs'+'set']=null,this['_localized'+'Asset']=null;}set['defaultAss'+'et'](_0x429fde){const _0xa708fa=_0x429fde instanceof pe?_0x429fde['id']:_0x429fde;this['_defaultAs'+'set']!==_0xa708fa&&(this['_defaultAs'+'set']&&this['_unbindDef'+'aultAsset'](),this['_defaultAs'+'set']=_0xa708fa,this['_defaultAs'+'set']&&this['_bindDefau'+'ltAsset'](),this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['defaultAss'+'et'](){return this['_defaultAs'+'set'];}set['localizedA'+'sset'](_0x5c294a){const _0x5210bb=_0x5c294a instanceof pe?_0x5c294a['id']:_0x5c294a;this['_localized'+'Asset']!==_0x5210bb&&(this['_localized'+'Asset']&&(this['_app']['assets']['off']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this),this['_unbindLoc'+'alizedAsse'+'t']()),this['_localized'+'Asset']=_0x5210bb,this['_localized'+'Asset']&&(this['_app']['assets']['get'](this['_localized'+'Asset'])?this['_bindLocal'+'izedAsset']():this['_app']['assets']['once']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this)));}get['localizedA'+'sset'](){return this['_localized'+'Asset'];}set['autoLoad'](_0xa1898b){this['_autoLoad']!==_0xa1898b&&(this['_autoLoad']=_0xa1898b,this['_autoLoad']&&this['_localized'+'Asset']&&(this['_unbindLoc'+'alizedAsse'+'t'](),this['_bindLocal'+'izedAsset']()));}get['autoLoad'](){return this['_autoLoad'];}set['disableLoc'+'alization'](_0x14fc5d){this['_disableLo'+'calization']!==_0x14fc5d&&(this['_disableLo'+'calization']=_0x14fc5d,this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['disableLoc'+'alization'](){return this['_disableLo'+'calization'];}['_bindDefau'+'ltAsset'](){const _0xcbf5c4=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0xcbf5c4?this['_onDefault'+'AssetAdd'](_0xcbf5c4):this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);}['_unbindDef'+'aultAsset'](){if(!this['_defaultAs'+'set'])return;this['_app']['assets']['off']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);const _0x52ddba=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x52ddba&&(_0x52ddba['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x52ddba['off']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x52ddba['off']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetAdd'](_0x1a8d1c){this['_defaultAs'+'set']===_0x1a8d1c['id']&&(_0x1a8d1c['on']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x1a8d1c['on']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x1a8d1c['once']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetRemov'+'e'](_0x40dbb7){this['_defaultAs'+'set']===_0x40dbb7['id']&&(_0x40dbb7['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x40dbb7['off']('remove:loc'+'alized',this['_onLocaleA'+'dd'],this),this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this));}['_bindLocal'+'izedAsset'](){if(!this['_autoLoad'])return;const _0x1bb7c1=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x1bb7c1&&(_0x1bb7c1['on']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x1bb7c1['on']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x1bb7c1['on']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this),_0x1bb7c1['resource']?this['_onLocaliz'+'edAssetLoa'+'d'](_0x1bb7c1):this['_app']['assets']['load'](_0x1bb7c1));}['_unbindLoc'+'alizedAsse'+'t'](){const _0x3bd9b3=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x3bd9b3&&(_0x3bd9b3['off']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x3bd9b3['off']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x3bd9b3['off']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this));}['_onLocaliz'+'edAssetAdd'](_0x3f7099){this['_localized'+'Asset']===_0x3f7099['id']&&this['_bindLocal'+'izedAsset']();}['_onLocaliz'+'edAssetLoa'+'d'](_0x2e4ff1){this['fire']('load',_0x2e4ff1);}['_onLocaliz'+'edAssetCha'+'nge'](_0x53541d,_0x271e49,_0x206853,_0x358ae4){this['fire']('change',_0x53541d,_0x271e49,_0x206853,_0x358ae4);}['_onLocaliz'+'edAssetRem'+'ove'](_0x3418e2){this['_localized'+'Asset']===_0x3418e2['id']&&(this['localizedA'+'sset']=this['_defaultAs'+'set']),this['fire']('remove',_0x3418e2);}['_onLocaleA'+'dd'](_0x2e38e3,_0x3605e6){this['_app']['i18n']['locale']===_0x2e38e3&&this['_onSetLoca'+'le'](_0x2e38e3);}['_onLocaleR'+'emove'](_0x59319e,_0x36332e){this['_app']['i18n']['locale']===_0x59319e&&this['_onSetLoca'+'le'](_0x59319e);}['_onSetLoca'+'le'](_0x21f8ed){if(!this['_defaultAs'+'set']){this['localizedA'+'sset']=null;return;}const _0x27706d=this['_app']['assets']['get'](this['_defaultAs'+'set']);if(!_0x27706d||this['_disableLo'+'calization']){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}const _0x262f28=_0x27706d['getLocaliz'+'edAssetId'](_0x21f8ed);if(!_0x262f28){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}this['localizedA'+'sset']=_0x262f28;}['destroy'](){this['defaultAss'+'et']=null,this['_app']['i18n']['off'](Sa['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['off']();}}const dh='msdf',ML='bitmap',So=0x3*0x6a9+-0xdaa+-0x651,Za=-0x863+-0x56+0x8ba,ru=-0x53*-0x27+0x11b*-0x6+-0x1d*0x35,mv=0xc7a+0x53*-0x3d+0x1*0x750,au=0x12a0+0x1*-0x505+-0xd97,nu=0x17*-0xc1+-0x3a9*0x7+0x2afb*0x1,ou=-0x1095+-0x2697+0x1b99*0x2,lu=-0x8fd+0x773*-0x3+-0x1f5d*-0x1,gg=0x1b11+0x2*0x1015+-0x3b33,DL='\x20\x09\x0a\x0d\x0b\x0c',IL=/[\w|/]/;class LL{constructor(_0x3bd75a){this['_symbols']=_0x3bd75a,this['_index']=0x1fef+-0x46*-0x40+-0x316f,this['_last']=0x4f6*-0x1+0x216d+0x97d*-0x3,this['_cur']=this['_symbols']['length']>0x11a*0x5+-0x182f+0x12ad*0x1?this['_symbols'][0x3f6+-0x1264+-0x1*-0xe6e]:null,this['_buf']=[],this['_mode']='text',this['_error']=null;}['read'](){let _0xc92b60=this['_read']();for(;_0xc92b60===gg;)_0xc92b60=this['_read']();return _0xc92b60!==So&&_0xc92b60!==Za&&(this['_last']=this['_index']),_0xc92b60;}['buf'](){return this['_buf'];}['last'](){return this['_last'];}['error'](){return this['_error'];}['debugPrint'](){const _0x3d7905=['EOF','ERROR','TEXT','OPEN_BRACK'+'ET','CLOSE_BRAC'+'KET','EQUALS','STRING','IDENTIFIER','WHITESPACE'];let _0xdb49d3=this['read'](),_0x208da5='';for(;_0x208da5+=(_0x208da5['length']>-0x12d0+0x22d4*0x1+-0x5*0x334?'\x0a':'')+_0x3d7905[_0xdb49d3]+'\x20\x27'+this['buf']()['join']('')+'\x27',!(_0xdb49d3===So||_0xdb49d3===Za);)_0xdb49d3=this['read']();return _0x208da5;}['_read'](){return this['_buf']=[],this['_eof']()?So:this['_mode']==='text'?this['_text']():this['_tag']();}['_text'](){for(;;)switch(this['_cur']){case null:return this['_buf']['length']>-0x8*-0x3d3+0xad5+0x69*-0x65?ru:So;case'[':return this['_mode']='tag',this['_buf']['length']>0xc*0x285+0x6ad*-0x5+-0x23*-0x17?ru:this['_tag']();case'\x5c':switch(this['_next'](),this['_cur']){case'[':this['_store']();break;default:this['_output']('\x5c');break;}break;default:this['_store']();break;}}['_tag'](){switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20tag',Za;case'[':return this['_store'](),mv;case']':return this['_store'](),this['_mode']='text',au;case'=':return this['_store'](),nu;case'\x20':case'\x09':case'\x0a':case'\x0d':case'\x0b':case'\x0c':return this['_whitespac'+'e']();case'\x22':return this['_string']();default:return this['_isIdentif'+'ierSymbol'](this['_cur'])?this['_identifie'+'r']():(this['_error']='unrecogniz'+'ed\x20charact'+'er',Za);}}['_whitespac'+'e'](){for(this['_store']();DL['indexOf'](this['_cur'])!==-(-0x1f04+-0x1624+0x3529);)this['_store']();return gg;}['_string'](){for(this['_next']();;)switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20string',Za;case'\x22':return this['_next'](),ou;default:this['_store']();break;}}['_identifie'+'r'](){for(this['_store']();this['_cur']!==null&&this['_isIdentif'+'ierSymbol'](this['_cur']);)this['_store']();return lu;}['_isIdentif'+'ierSymbol'](_0x14e0a6){return _0x14e0a6['length']===0x1bc1*0x1+0x704+-0x22c4&&_0x14e0a6['match'](IL)!==null;}['_eof'](){return this['_cur']===null;}['_next'](){return this['_eof']()||(this['_index']++,this['_cur']=this['_index']<this['_symbols']['length']?this['_symbols'][this['_index']]:null),this['_cur'];}['_store'](){return this['_buf']['push'](this['_cur']),this['_next']();}['_output'](_0x5f5848){this['_buf']['push'](_0x5f5848);}}class RL{constructor(_0x3bfb21){this['_scanner']=new LL(_0x3bfb21),this['_error']=null;}['parse'](_0x47a595,_0x5ba158){for(;;)switch(this['_scanner']['read']()){case So:return!(-0x1*0x309+-0x263d+0x24b*0x12);case Za:return!(-0x26da+0x1d*0x99+0x1586);case ru:Array['prototype']['push']['apply'](_0x47a595,this['_scanner']['buf']());break;case mv:if(!this['_parseTag'](_0x47a595,_0x5ba158))return!(-0x14f4+-0x14c7+0x29bc);break;default:return!(0x541+0x8b*0x26+0x19e2*-0x1);}}['error'](){return'Error\x20eval'+'uating\x20mar'+'kup\x20at\x20#'+this['_scanner']['last']()['toString']()+'\x20('+(this['_scanner']['error']()||this['_error'])+')';}['_parseTag'](_0x46ab82,_0x20f976){let _0x21c990=this['_scanner']['read']();if(_0x21c990!==lu)return this['_error']='expected\x20i'+'dentifier',!(0x3e5+0x320*0x5+-0x1384);const _0x47f29f=this['_scanner']['buf']()['join']('');if(_0x47f29f[-0x1ec4+-0x195b*-0x1+-0x115*-0x5]==='/'){for(let _0x47d500=_0x20f976['length']-(-0x1a12+0xdb*0x1d+0x144);_0x47d500>=0xc*-0x61+0x26bb+-0x222f;--_0x47d500)if(_0x47f29f==='/'+_0x20f976[_0x47d500]['name']&&_0x20f976[_0x47d500]['end']===null)return _0x20f976[_0x47d500]['end']=_0x46ab82['length'],_0x21c990=this['_scanner']['read'](),_0x21c990!==au?(this['_error']='expected\x20c'+'lose\x20brack'+'et',!(0x3*0x10e+0x13c0*0x1+0x187*-0xf)):!(0x17e6+-0x1*-0x1e17+-0x35fd);return this['_error']='failed\x20to\x20'+'find\x20match'+'ing\x20tag',!(-0xd7f+-0x20b1+0x2e31);}const _0x519b24={'name':_0x47f29f,'value':null,'attributes':{},'start':_0x46ab82['length'],'end':null};if(_0x21c990=this['_scanner']['read'](),_0x21c990===nu){if(_0x21c990=this['_scanner']['read'](),_0x21c990!==ou)return this['_error']='expected\x20s'+'tring',!(0x1056+-0x2095+-0x34*-0x50);_0x519b24['value']=this['_scanner']['buf']()['join'](''),_0x21c990=this['_scanner']['read']();}for(;;){switch(_0x21c990){case au:return _0x20f976['push'](_0x519b24),!(-0x1e2e+-0x146f+0x3*0x10df);case lu:{const _0x2e5a53=this['_scanner']['buf']()['join']('');if(_0x21c990=this['_scanner']['read'](),_0x21c990!==nu)return this['_error']='expected\x20e'+'quals',!(0x1*-0xdcd+-0x21*-0x3+0xd6b);if(_0x21c990=this['_scanner']['read'](),_0x21c990!==ou)return this['_error']='expected\x20s'+'tring',!(-0x22a4+0x904+0x2d9*0x9);const _0x29123d=this['_scanner']['buf']()['join']('');_0x519b24['attributes'][_0x2e5a53]=_0x29123d;break;}default:return this['_error']='expected\x20c'+'lose\x20brack'+'et\x20or\x20iden'+'tifier',!(-0x1b08+-0x5*0x259+-0xe*-0x2c5);}_0x21c990=this['_scanner']['read']();}}}function _v(_0x5992ed,_0x2eec28){for(const _0x4617c8 in _0x2eec28){if(!_0x2eec28['hasOwnProp'+'erty'](_0x4617c8))continue;const _0x33fa41=_0x2eec28[_0x4617c8];_0x33fa41 instanceof Object?(_0x5992ed['hasOwnProp'+'erty'](_0x4617c8)||(_0x5992ed[_0x4617c8]={}),_v(_0x5992ed[_0x4617c8],_0x2eec28[_0x4617c8])):_0x5992ed[_0x4617c8]=_0x33fa41;}}function OL(_0x2558fa){if(_0x2558fa['length']===-0x1e4*0x5+-0x2337+0x2cab)return null;const _0xce8cd8={};for(let _0x3da933=-0x719*0x3+0x1d10+-0x7c5;_0x3da933<_0x2558fa['length'];++_0x3da933){const _0x2e0e5a=_0x2558fa[_0x3da933],_0x44f674={};_0x44f674[_0x2e0e5a['name']]={'value':_0x2e0e5a['value'],'attributes':_0x2e0e5a['attributes']},_v(_0xce8cd8,_0x44f674);}return _0xce8cd8;}function FL(_0x464065,_0x4b2df3){if(_0x464065['length']===-0x4c1+0x8*-0x281+-0x2d*-0x8d)return null;const _0x1981b3={};for(let _0x56495c=-0x2d*-0x90+0x2*-0x2a1+-0x140e;_0x56495c<_0x464065['length'];++_0x56495c){const _0x4b4de7=_0x464065[_0x56495c];_0x1981b3['hasOwnProp'+'erty'](_0x4b4de7['start'])?_0x1981b3[_0x4b4de7['start']]['open']===null?_0x1981b3[_0x4b4de7['start']]['open']=[_0x4b4de7]:_0x1981b3[_0x4b4de7['start']]['open']['push'](_0x4b4de7):_0x1981b3[_0x4b4de7['start']]={'open':[_0x4b4de7],'close':null},_0x1981b3['hasOwnProp'+'erty'](_0x4b4de7['end'])?_0x1981b3[_0x4b4de7['end']]['close']===null?_0x1981b3[_0x4b4de7['end']]['close']=[_0x4b4de7]:_0x1981b3[_0x4b4de7['end']]['close']['push'](_0x4b4de7):_0x1981b3[_0x4b4de7['end']]={'open':null,'close':[_0x4b4de7]};}let _0x550af1=[];function _0x529288(_0x5d6680){_0x550af1=_0x550af1['filter'](_0x579f6d=>_0x5d6680['find'](_0x1926de=>_0x1926de===_0x579f6d)===void(-0x185f*-0x1+-0x1fec+0x78d));}function _0x5bca8c(_0x138e1a){for(let _0x855c5e=0x179a+-0x6f*-0x1f+-0x250b;_0x855c5e<_0x138e1a['length'];++_0x855c5e)_0x550af1['push'](_0x138e1a[_0x855c5e]);}const _0x141358=Object['keys'](_0x1981b3)['sort']((_0x21ddb6,_0x2f0416)=>_0x21ddb6-_0x2f0416),_0xa8966b=[];for(let _0x3425bc=0xbfb+-0x757*-0x4+-0x2957;_0x3425bc<_0x141358['length'];++_0x3425bc){const _0x531bc7=_0x1981b3[_0x141358[_0x3425bc]];_0x531bc7['close']!==null&&_0x529288(_0x531bc7['close']),_0x531bc7['open']!==null&&_0x5bca8c(_0x531bc7['open']),_0xa8966b['push']({'start':_0x141358[_0x3425bc],'tags':OL(_0x550af1)});}const _0x4fbd36=[];let _0x207d89=null;for(let _0x5f5331=-0x115*-0x5+-0x22d4+0x11*0x1bb;_0x5f5331<_0xa8966b['length'];++_0x5f5331){const _0x4e8f30=_0xa8966b[_0x5f5331];for(;_0x4fbd36['length']<_0x4e8f30['start'];)_0x4fbd36['push'](_0x207d89?_0x207d89['tags']:null);_0x207d89=_0x4e8f30;}for(;_0x4fbd36['length']<_0x4b2df3;)_0x4fbd36['push'](null);return _0x4fbd36;}function NL(_0x4d6378){const _0x184bc=new RL(_0x4d6378),_0xbdb6bc=[],_0xed0efc=[];if(!_0x184bc['parse'](_0xbdb6bc,_0xed0efc))return console['warn'](_0x184bc['error']()),{'symbols':_0x4d6378,'tags':null};const _0x569340=_0xed0efc['find'](_0x25042d=>_0x25042d['end']===null);if(_0x569340)return console['warn']('Markup\x20err'+'or:\x20found\x20'+'unclosed\x20t'+'ag=\x27'+_0x569340['name']+'\x27'),{'symbols':_0x4d6378,'tags':null};const _0x2d8cfc=FL(_0xed0efc,_0xbdb6bc['length']);return{'symbols':_0xbdb6bc,'tags':_0x2d8cfc};}class kL{static['evaluate'](_0x771fcc){return NL(_0x771fcc);}}class UL{constructor(){this['count']=0x33f*0x9+0x2*-0xc7a+-0x443,this['quad']=0xb56+0x1262*0x1+0x8*-0x3b7,this['lines']={},this['positions']=[],this['normals']=[],this['uvs']=[],this['colors']=[],this['indices']=[],this['outlines']=[],this['shadows']=[],this['meshInstan'+'ce']=null;}}function BL(_0x5b10a1,_0x2f8dbf){const _0x161961=new Ge(_0x5b10a1);return _0x161961['setPositio'+'ns'](_0x2f8dbf['positions']),_0x161961['setNormals'](_0x2f8dbf['normals']),_0x161961['setColors3'+'2'](_0x2f8dbf['colors']),_0x161961['setUvs'](-0xe9a+-0x129e*-0x2+0x1*-0x16a2,_0x2f8dbf['uvs']),_0x161961['setIndices'](_0x2f8dbf['indices']),_0x161961['setVertexS'+'tream'](ko,_0x2f8dbf['outlines'],0x72b*-0x3+0xdd*-0x13+0x25eb,void(0x13be+0x8e*0x19+0x867*-0x4),Ve,!(-0x77+0x1e0b+-0x1d93)),_0x161961['setVertexS'+'tream'](Uo,_0x2f8dbf['shadows'],-0x1c*-0xc2+0x1*0x24b5+-0x423*0xe,void(0x2203+-0xea3*0x2+-0x4bd),Ve,!(0x943*0x2+-0x1ef0+0xc6b)),_0x161961['update'](),_0x161961;}const Sg=/^[\r\n]$/,zL=/^[ \t]$/,yg=/^[ \t\-]|\u200b$/,VL=/^[a-z0-9]$/i,vg=/^[\u1100-\u11ff]|[\u3000-\u9fff\ua960-\ua97f]|[\uac00-\ud7ff]$/,GL=/^[〕〉》」』】〙〗〟ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻]$/,HL=['​','؜','‎','‏','‪','‫','‬','‭','‮','⁦','⁧','⁨','⁩'],WL={'width':0x0,'height':0x0,'xadvance':0x0,'xoffset':0x0,'yoffset':0x0},xg=new ie(),$L=new J(),We=new ie();class XL{constructor(_0x57d05a){this['_element']=_0x57d05a,this['_system']=_0x57d05a['system'],this['_entity']=_0x57d05a['entity'],this['_text']='',this['_symbols']=[],this['_colorPale'+'tte']=[],this['_outlinePa'+'lette']=[],this['_shadowPal'+'ette']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null,this['_i18nKey']=null,this['_fontAsset']=new PL(this['_system']['app']),this['_fontAsset']['disableLoc'+'alization']=!(0x5*0x3f6+-0xb89*0x3+0xecd),this['_fontAsset']['on']('load',this['_onFontLoa'+'d'],this),this['_fontAsset']['on']('change',this['_onFontCha'+'nge'],this),this['_fontAsset']['on']('remove',this['_onFontRem'+'ove'],this),this['_font']=null,this['_color']=new ie(0x1bca*-0x1+-0x5f*-0x53+0x6e*-0x7,-0x1493+0x1abb+-0x627,-0x1*-0x527+-0x172f+0x1209,0xa56+-0x160c+0xbb7),this['_colorUnif'+'orm']=new Float32Array(-0x86a+0xf*-0x1a3+0x3*0xafe),this['_spacing']=-0xc10+-0x192d+-0x6*-0x635,this['_fontSize']=0x182a+-0x17*0xb4+-0x7de,this['_fontMinY']=-0x371*-0x8+-0x1*-0x10f3+-0x2c7b,this['_fontMaxY']=-0x3*0x20a+-0x23b8+0x29d6,this['_originalF'+'ontSize']=0x457*-0x4+0x93+-0x6f*-0x27,this['_maxFontSi'+'ze']=0x51f*-0x2+-0x5d*-0x62+-0x193c,this['_minFontSi'+'ze']=0x680*0x2+0x1*0xf95+-0x1c8d,this['_autoFitWi'+'dth']=!(-0x5*0x2b3+-0x15ec+0x236c),this['_autoFitHe'+'ight']=!(-0x1cc5+-0xcb6+0x297c),this['_maxLines']=-(0xec9+-0x792+0xd*-0x8e),this['_lineHeigh'+'t']=0x41*0x12+-0x36d+-0x1d*0x9,this['_scaledLin'+'eHeight']=0x2*0xe03+0x1088+-0x79*0x5e,this['_wrapLines']=!(0xf7*0x8+0x2270+-0x2a27),this['_drawOrder']=0x1720+-0x5e9*-0x1+0x1*-0x1d09,this['_alignment']=new J(-0x111b+-0x18d6*0x1+0x3*0xdfb+0.5,-0x1*0xa36+0x2333+-0x18fd+0.5),this['_autoWidth']=!(0x1111+0x133*-0xb+0x4*-0xf8),this['_autoHeigh'+'t']=!(-0xd21*-0x1+0x1*0x15b1+0x22d2*-0x1),this['width']=0x2251+0xb3*0x29+-0x3efc,this['height']=0xb65+-0x1*0xa61+0xa*-0x1a,this['_node']=new Ie(),this['_model']=new tr(),this['_model']['graph']=this['_node'],this['_entity']['addChild'](this['_node']),this['_meshInfo']=[],this['_material']=null,this['_aabbDirty']=!(-0x89*0x47+0xad0+0x1*0x1b2f),this['_aabb']=new De(),this['_noResize']=!(0x31*0x15+0x209f+-0x53*0x71),this['_currentMa'+'terialType']=null,this['_maskedMat'+'erialSrc']=null,this['_rtlReorde'+'r']=!(-0x10ea+0xcab+0x440),this['_unicodeCo'+'nverter']=!(0x97*0x7+0x1*0x29+-0x1*0x449),this['_rtl']=!(-0x1ada+-0x24cd*0x1+0x3fa8),this['_outlineCo'+'lor']=new ie(-0x1812+-0x7a8+-0x106*-0x1f,-0x33e*0x2+0x356+0x1a*0x1f,0x102*0x17+-0x1c72+-0x1*-0x544,-0x1524+0x12*0x67+0xde7),this['_outlineCo'+'lorUniform']=new Float32Array(-0x6aa+-0x43*-0x17+0xa9),this['_outlineTh'+'icknessSca'+'le']=-0x1b26+-0x183d+0x1*0x3363+0.2,this['_outlineTh'+'ickness']=0x3fb*-0x2+-0xa4f+-0x1245*-0x1,this['_shadowCol'+'or']=new ie(0x1ebf+0x1f76+-0x145*0x31,-0xf74+0x147e+0x1ae*-0x3,0x1*0x2239+-0x7f2+0x7*-0x3c1,0x3e0+-0x1bcf+0x17f0),this['_shadowCol'+'orUniform']=new Float32Array(0x15ba+-0x1831+0x27b),this['_shadowOff'+'setScale']=0x1aa1+-0x2071+0x1f0*0x3+0.005,this['_shadowOff'+'set']=new J(0x7*0x27d+-0x17*0x16+0xf71*-0x1,-0x11*0x91+0x1*0x1f92+0x89*-0x29),this['_shadowOff'+'setUniform']=new Float32Array(-0x3a6*-0x1+-0x2*-0xbf3+-0x1b8a),this['_enableMar'+'kup']=!(-0x23*0x6b+-0x1*0x255b+0x33fd),this['_onScreenC'+'hange'](this['_element']['screen']),_0x57d05a['on']('resize',this['_onParentR'+'esize'],this),_0x57d05a['on']('set:screen',this['_onScreenC'+'hange'],this),_0x57d05a['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),_0x57d05a['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),_0x57d05a['on']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['on'](Sa['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['on']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['on']('data:remov'+'e',this['_onLocaliz'+'ationData'],this),this['_rangeStar'+'t']=-0x1dee+0x12f6+0xaf8,this['_rangeEnd']=-0x14e8+0x2491+-0xfa9;}['destroy'](){this['_setMateri'+'al'](null),this['_model']&&(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),this['_model']['destroy'](),this['_model']=null),this['_fontAsset']['destroy'](),this['font']=null,this['_element']['off']('resize',this['_onParentR'+'esize'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['off'](Sa['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['off']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['off']('data:remov'+'e',this['_onLocaliz'+'ationData'],this);}['_onParentR'+'esize'](_0x502510,_0x31ad18){this['_noResize']||this['_font']&&this['_updateTex'+'t']();}['_onScreenC'+'hange'](_0x1fc1b5){_0x1fc1b5?this['_updateMat'+'erial'](_0x1fc1b5['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(0x2386+0x1d45*0x1+0x1*-0x40ca));}['_onScreenS'+'paceChange'](_0x3a3589){this['_updateMat'+'erial'](_0x3a3589);}['_onDrawOrd'+'erChange'](_0x30af5b){if(this['_drawOrder']=_0x30af5b,this['_model']){for(let _0xf5ffbe=0xc7f+0xca*-0x3+-0xa21,_0x4ed3e6=this['_model']['meshInstan'+'ces']['length'];_0xf5ffbe<_0x4ed3e6;_0xf5ffbe++)this['_model']['meshInstan'+'ces'][_0xf5ffbe]['drawOrder']=_0x30af5b;}}['_onPivotCh'+'ange'](_0x300415){this['_font']&&this['_updateTex'+'t']();}['_onLocaleS'+'et'](_0x41349f){if(this['_i18nKey']){if(this['fontAsset']){const _0x581c1f=this['_system']['app']['assets']['get'](this['fontAsset']);(!_0x581c1f||!_0x581c1f['resource']||_0x581c1f['resource']!==this['_font'])&&(this['font']=null);}this['_resetLoca'+'lizedText']();}}['_onLocaliz'+'ationData'](_0x42f71c,_0x15b413){this['_i18nKey']&&_0x15b413[this['_i18nKey']]&&this['_resetLoca'+'lizedText']();}['_resetLoca'+'lizedText'](){this['_setText'](this['_system']['app']['i18n']['getText'](this['_i18nKey']));}['_setText'](_0x193b69){if(this['unicodeCon'+'verter']){const _0x38ec46=this['_system']['getUnicode'+'Converter']();_0x38ec46?_0x193b69=_0x38ec46(_0x193b69):console['warn']('Element\x20cr'+'eated\x20with'+'\x20unicodeCo'+'nverter\x20op'+'tion\x20but\x20n'+'o\x20unicodeC'+'onverter\x20f'+'unction\x20re'+'gistered');}this['_text']!==_0x193b69&&(this['_font']&&this['_updateTex'+'t'](_0x193b69),this['_text']=_0x193b69);}['_updateTex'+'t'](_0x25ec86){let _0x4f6b7b;if(_0x25ec86===void(-0xf53+0x1e15+0x761*-0x2)&&(_0x25ec86=this['_text']),this['_symbols']=Tc['getSymbols'](_0x25ec86['normalize']?_0x25ec86['normalize']('NFC'):_0x25ec86),this['_symbols']['length']===0x1501+0x437+-0x1938&&(this['_symbols']=['\x20']),this['_enableMar'+'kup']){const _0x435bec=kL['evaluate'](this['_symbols']);this['_symbols']=_0x435bec['symbols'],_0x4f6b7b=_0x435bec['tags']||[];}if(this['_rtlReorde'+'r']){const _0x22f1c4=this['_system']['app']['systems']['element']['getRtlReor'+'der']();if(_0x22f1c4){const _0x2b9f71=_0x22f1c4(this['_symbols']);this['_rtl']=_0x2b9f71['rtl'],this['_symbols']=_0x2b9f71['mapping']['map'](function(_0xea52a2){return this['_symbols'][_0xea52a2];},this),_0x4f6b7b&&(_0x4f6b7b=_0x2b9f71['mapping']['map'](_0x456e15=>_0x4f6b7b[_0x456e15]));}else console['warn']('Element\x20cr'+'eated\x20with'+'\x20rtlReorde'+'r\x20option\x20b'+'ut\x20no\x20rtlR'+'eorder\x20fun'+'ction\x20regi'+'stered');}else this['_rtl']=!(-0x1a4*0xf+-0x233b+0x2*0x1dec);const _0x36997e=(_0x34d7df,_0x1a9ebd)=>_0x34d7df['toString'](!(0x1cfe+-0x17+-0x1*0x1ce7))['toLowerCas'+'e']()+':'+_0x1a9ebd['toFixed'](-0x1955+-0xaca+0x3*0xc0b),_0xf8cc1f=(_0x5bb733,_0x3395a1)=>_0x5bb733['toString'](!(-0x928*0x2+0x22b8+-0x1c*0x96))['toLowerCas'+'e']()+':'+_0x3395a1['x']['toFixed'](-0x17de+-0x2597*-0x1+0x1*-0xdb7)+':'+_0x3395a1['y']['toFixed'](0xede*-0x2+0x1*-0x745+0x2503);if(_0x4f6b7b){const _0x1586e9={},_0x4c9446={},_0x1dcb89={};this['_colorPale'+'tte']=[Math['round'](this['_color']['r']*(0x8c*0x5+0x17b5+-0x1972)),Math['round'](this['_color']['g']*(-0x815*-0x3+-0x102f+0x25b*-0x3)),Math['round'](this['_color']['b']*(0xb35+0x1004+-0x1a3a))],this['_outlinePa'+'lette']=[Math['round'](this['_outlineCo'+'lor']['r']*(0x83*-0xd+0x1*0xcca+-0x1*0x524)),Math['round'](this['_outlineCo'+'lor']['g']*(0x24f7+0x2*0xe47+-0x4086)),Math['round'](this['_outlineCo'+'lor']['b']*(-0x1*0x11a+-0x2153+-0x1*-0x236c)),Math['round'](this['_outlineCo'+'lor']['a']*(-0xd*-0x167+-0x17+-0x1125)),Math['round'](this['_outlineTh'+'ickness']*(0x1d71*0x1+0xd8a*0x1+-0x14fe*0x2))],this['_shadowPal'+'ette']=[Math['round'](this['_shadowCol'+'or']['r']*(-0x2208+0x229*-0x7+0x3226)),Math['round'](this['_shadowCol'+'or']['g']*(0x12*0xd7+0x1323*-0x1+0x504)),Math['round'](this['_shadowCol'+'or']['b']*(-0x2590+0x5*-0x1f3+0x304e)),Math['round'](this['_shadowCol'+'or']['a']*(-0xfd3*0x2+0x22*0x10f+-0x1*0x359)),Math['round'](this['_shadowOff'+'set']['x']*(-0x83*-0x47+0xd*-0x1bf+-0xd23)),Math['round'](this['_shadowOff'+'set']['y']*(-0x1*-0x15b0+0xfc6*0x2+-0x34bd))],this['_symbolCol'+'ors']=[],this['_symbolOut'+'lineParams']=[],this['_symbolSha'+'dowParams']=[],_0x1586e9[this['_color']['toString'](!(0x1645+-0xd49+-0x8fb))['toLowerCas'+'e']()]=-0xabf+-0x231e+0xc7*0x3b,_0x4c9446[_0x36997e(this['_outlineCo'+'lor'],this['_outlineTh'+'ickness'])]=-0xeb7*0x2+0x233c+0x1*-0x5ce,_0x1dcb89[_0xf8cc1f(this['_shadowCol'+'or'],this['_shadowOff'+'set'])]=-0xdcb+0x1beb+-0x10*0xe2;for(let _0x4922b5=-0x41*0x1c+-0xedb+0x15f7,_0x166892=this['_symbols']['length'];_0x4922b5<_0x166892;++_0x4922b5){const _0x5a90f6=_0x4f6b7b[_0x4922b5];let _0x5f43af=0x1f71*0x1+-0x74f*-0x1+-0x1f0*0x14;if(_0x5a90f6&&_0x5a90f6['color']&&_0x5a90f6['color']['value']){const _0x1ac374=_0x5a90f6['color']['value'];if(_0x1ac374['length']===0x38d+-0x2*0x269+0x14c&&_0x1ac374[-0x1*-0x97+0x7cd+0xc*-0xb3]==='#'){const _0x345385=_0x1ac374['substring'](0x73d+0x12f8+-0x1a34)['toLowerCas'+'e']();_0x1586e9['hasOwnProp'+'erty'](_0x345385)?_0x5f43af=_0x1586e9[_0x345385]:/^[0-9a-f]{6}$/['test'](_0x345385)&&(_0x5f43af=this['_colorPale'+'tte']['length']/(0x3ec+0x1717+0x90*-0x30),_0x1586e9[_0x345385]=_0x5f43af,this['_colorPale'+'tte']['push'](parseInt(_0x345385['substring'](-0x1*-0x2549+-0xa*0x329+0x1*-0x5af,0x41c+-0xf03+0xae9),0xec1+0xb63+-0x1*0x1a14)),this['_colorPale'+'tte']['push'](parseInt(_0x345385['substring'](0x1*0xe4d+-0x153+-0xcf8,0x100+-0x107*-0x25+-0x43*0x95),-0x4ab+0xa99+-0x5de*0x1)),this['_colorPale'+'tte']['push'](parseInt(_0x345385['substring'](-0xae5+-0x827+0x1310,0x1*0x180f+-0x23d*0x3+-0x2*0x8a9),0x2e0+-0x3*-0x409+-0xeeb)));}}this['_symbolCol'+'ors']['push'](_0x5f43af);let _0x48bdd2=-0x12f2+0x1*-0x13c7+0x26b9;if(_0x5a90f6&&_0x5a90f6['outline']&&(_0x5a90f6['outline']['attributes']['color']||_0x5a90f6['outline']['attributes']['thickness'])){let _0x2c9455=_0x5a90f6['outline']['attributes']['color']?xg['fromString'](_0x5a90f6['outline']['attributes']['color']):this['_outlineCo'+'lor'],_0x1945dd=Number(_0x5a90f6['outline']['attributes']['thickness']);(Number['isNaN'](_0x2c9455['r'])||Number['isNaN'](_0x2c9455['g'])||Number['isNaN'](_0x2c9455['b'])||Number['isNaN'](_0x2c9455['a']))&&(_0x2c9455=this['_outlineCo'+'lor']),Number['isNaN'](_0x1945dd)&&(_0x1945dd=this['_outlineTh'+'ickness']);const _0x220f07=_0x36997e(_0x2c9455,_0x1945dd);_0x4c9446['hasOwnProp'+'erty'](_0x220f07)?_0x48bdd2=_0x4c9446[_0x220f07]:(_0x48bdd2=this['_outlinePa'+'lette']['length']/(-0x2603+-0x206c+0x4674),_0x4c9446[_0x220f07]=_0x48bdd2,this['_outlinePa'+'lette']['push'](Math['round'](_0x2c9455['r']*(0x65*-0x2f+-0x2b9+0x1643)),Math['round'](_0x2c9455['g']*(-0xd*0x1e7+-0x7*-0x22d+0xa7f*0x1)),Math['round'](_0x2c9455['b']*(0x45f*-0x2+-0x9*0x83+0xe58)),Math['round'](_0x2c9455['a']*(-0x6f7*0x1+-0x1ab*0x17+0x2e53)),Math['round'](_0x1945dd*(-0x3af*-0x4+-0x13d*0xc+-0x29*-0x7))));}this['_symbolOut'+'lineParams']['push'](_0x48bdd2);let _0x10496d=0x1*-0x2657+-0x2535+0x4b8c;if(_0x5a90f6&&_0x5a90f6['shadow']&&(_0x5a90f6['shadow']['attributes']['color']||_0x5a90f6['shadow']['attributes']['offset']||_0x5a90f6['shadow']['attributes']['offsetX']||_0x5a90f6['shadow']['attributes']['offsetY'])){let _0x249841=_0x5a90f6['shadow']['attributes']['color']?xg['fromString'](_0x5a90f6['shadow']['attributes']['color']):this['_shadowCol'+'or'];const _0x2054d9=Number(_0x5a90f6['shadow']['attributes']['offset']),_0x25e413=Number(_0x5a90f6['shadow']['attributes']['offsetX']),_0x5394e2=Number(_0x5a90f6['shadow']['attributes']['offsetY']);(Number['isNaN'](_0x249841['r'])||Number['isNaN'](_0x249841['g'])||Number['isNaN'](_0x249841['b'])||Number['isNaN'](_0x249841['a']))&&(_0x249841=this['_shadowCol'+'or']);const _0x5e58a1=$L['set'](Number['isNaN'](_0x25e413)?Number['isNaN'](_0x2054d9)?this['_shadowOff'+'set']['x']:_0x2054d9:_0x25e413,Number['isNaN'](_0x5394e2)?Number['isNaN'](_0x2054d9)?this['_shadowOff'+'set']['y']:_0x2054d9:_0x5394e2),_0x4f1ab7=_0xf8cc1f(_0x249841,_0x5e58a1);_0x1dcb89['hasOwnProp'+'erty'](_0x4f1ab7)?_0x10496d=_0x1dcb89[_0x4f1ab7]:(_0x10496d=this['_shadowPal'+'ette']['length']/(0x305*0x4+-0x18ea+0x1*0xcdc),_0x1dcb89[_0x4f1ab7]=_0x10496d,this['_shadowPal'+'ette']['push'](Math['round'](_0x249841['r']*(0xdfd+0x8d1*-0x1+-0x42d)),Math['round'](_0x249841['g']*(-0x2227*0x1+-0x3d*-0x51+-0xfd9*-0x1)),Math['round'](_0x249841['b']*(0xc55+-0x9*0x16b+0x16d*0x1)),Math['round'](_0x249841['a']*(0xe*-0x2c9+0x287*-0xd+0x48d8)),Math['round'](_0x5e58a1['x']*(0x6*-0x3d1+0x24af+-0xd4a)),Math['round'](_0x5e58a1['y']*(0x4*0x3c8+0x7*0x361+-0x1*0x2648))));}this['_symbolSha'+'dowParams']['push'](_0x10496d);}}else this['_colorPale'+'tte']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null;this['_updateMat'+'erialEmiss'+'ive'](),this['_updateMat'+'erialOutli'+'ne'](),this['_updateMat'+'erialShado'+'w']();const _0x24076a=this['_calculate'+'CharsPerTe'+'xture']();let _0x57f9e0=!(-0x2242+0xd1b+0x4*0x54a);const _0x5c7c00=this['_element'],_0x564f99=_0x5c7c00['_isScreenS'+'pace'](),_0x20a27f=_0x5c7c00['_isScreenC'+'ulled'](),_0x433c9e=function(_0x426bab){return _0x5c7c00['isVisibleF'+'orCamera'](_0x426bab);};for(let _0x46d663=0x568*0x4+-0x31*-0x53+-0x61*0x63,_0x1a3b15=this['_meshInfo']['length'];_0x46d663<_0x1a3b15;_0x46d663++){const _0x234716=_0x24076a[_0x46d663]||0x1*-0x1843+0xcb8+0xb8b,_0x11bd53=this['_meshInfo'][_0x46d663];if(_0x11bd53['count']!==_0x234716){if(_0x57f9e0||(_0x5c7c00['removeMode'+'lFromLayer'+'s'](this['_model']),_0x57f9e0=!(0x1*0x1c0+0x875+-0xa35)),_0x11bd53['count']=_0x234716,_0x11bd53['positions']['length']=_0x11bd53['normals']['length']=_0x234716*(-0x1b79+-0x601+0x217d)*(-0x24e2+0x1*-0xd9f+0x10d7*0x3),_0x11bd53['indices']['length']=_0x234716*(-0xcb3*0x2+-0x13b6+0x1*0x2d1f)*(0x19e9+0x1ac5+0x4*-0xd2b),_0x11bd53['uvs']['length']=_0x234716*(0xf53+-0x1*0xc2e+-0x49*0xb)*(-0x1*-0x7f7+-0xd4c+0x559),_0x11bd53['colors']['length']=_0x234716*(0x2*0xb92+-0x684+-0x109c)*(0x13f0+0xe*-0x2c9+0x1312),_0x11bd53['outlines']['length']=_0x234716*(0x258b+0x7c7+0x2*-0x16a7)*(0x1*-0x1885+-0xf65+-0x1*-0x27ed),_0x11bd53['shadows']['length']=_0x234716*(-0x199b+0x3*-0x9ad+0x577*0xa)*(-0x14*0x1ab+-0x115*0x11+-0x1*-0x33c4),_0x11bd53['meshInstan'+'ce']&&this['_removeMes'+'hInstance'](_0x11bd53['meshInstan'+'ce']),_0x234716===-0x12e*0x16+-0x18f1+0x3*0x10f7){_0x11bd53['meshInstan'+'ce']=null;continue;}for(let _0x256f06=0x1*0x2203+0x11e5*-0x1+-0x101e;_0x256f06<_0x234716;_0x256f06++)_0x11bd53['indices'][_0x256f06*(0x1f1+-0xc3f+0x8b*0x13)*(0xd66*-0x2+-0x10*-0x22c+-0x7f2)+(0x1c6a+0x2355+-0x3fbf)]=_0x256f06*(-0xf*0x191+0x9a*0x1+0x11*0x159),_0x11bd53['indices'][_0x256f06*(-0x2632*-0x1+-0x964+0x999*-0x3)*(-0x38*-0x28+0x89*-0xc+-0x129*0x2)+(-0x6f2*0x2+0xdca+-0x1*-0x1b)]=_0x256f06*(-0x10*-0x1ca+0x2510+-0x9*0x74c)+(0x25fb+-0x1e21+0x1*-0x7d9),_0x11bd53['indices'][_0x256f06*(-0x7*0xd6+-0x166c*0x1+0x1c49)*(-0x43*-0x95+0xfdb+0x87*-0x68)+(-0x1975+0xead+0x1*0xaca)]=_0x256f06*(0x1816+0x9eb*-0x3+-0x5af*-0x1)+(-0x305*-0x4+-0x3*-0xb38+0x2db9*-0x1),_0x11bd53['indices'][_0x256f06*(-0xb96+-0xedd*0x1+0xd3b*0x2)*(-0x25*-0x32+0x6*0x638+0x14*-0x23a)+(-0x69*-0x4c+0x13*0x16d+-0x3a40)]=_0x256f06*(0x1c2a+-0x1*-0x265a+-0x98*0x70)+(0x25ef+0x572+-0x2b5f),_0x11bd53['indices'][_0x256f06*(-0x1455+0x1*0xc2f+-0x1*-0x829)*(-0xa7f+-0x1e66+-0x1*-0x28e7)+(-0x3*0x4c1+0x1359+-0x512)]=_0x256f06*(-0x20e*0xe+-0x13*-0x1a8+0x56*-0x8)+(-0x5*0xfb+-0xf85+0x146f),_0x11bd53['indices'][_0x256f06*(-0x19d4+-0x34*-0x68+-0x4b7*-0x1)*(-0x21b1+-0x1*0x1bc4+-0x5*-0xc4b)+(0x2*-0x5f7+-0x1fe8+0x6d*0x67)]=_0x256f06*(-0x2486+-0x9d1*0x3+-0x1*-0x41fd)+(-0x1c+0xa36+-0xa19),_0x11bd53['normals'][_0x256f06*(0x17f0+-0x8f1+-0x5*0x2ff)*(-0x14+0x192e+-0x1917)+(-0x10a4+-0x56c+0x4*0x584)]=-0xe6e*-0x1+-0x9*0x3b4+0x12e6,_0x11bd53['normals'][_0x256f06*(0x2*-0xd29+0x1*-0x2b8+0x1d0e)*(0x1a11*0x1+-0x1*-0x944+-0x2352)+(0x3*-0x23d+0x19f2+-0x133a)]=-0x1294+-0x2494+-0x5*-0xb08,_0x11bd53['normals'][_0x256f06*(0x85d+-0x3*0x96b+-0x1a*-0xc4)*(0xcfa+-0x2b*-0xcd+-0x2f66)+(-0x8b2+0x2*-0xa5+0x9fe)]=-(0xa1+0x7d*-0x27+0x126b),_0x11bd53['normals'][_0x256f06*(-0x2106*-0x1+-0x18ab*0x1+0x1ab*-0x5)*(0x1*0x1ce9+0xa1+0x1d87*-0x1)+(-0x1ffe+-0x15dd+0x7*0x7b2)]=0x14fa+-0x6*0x653+-0x2*-0x87c,_0x11bd53['normals'][_0x256f06*(0x2519+-0x14a3+-0x1072)*(0x1*0x2541+0x7*0x19+-0x25ed)+(-0x1b94+-0x177b+0x3313)]=0x28f*-0xd+-0x47e*0x3+0x2ebd,_0x11bd53['normals'][_0x256f06*(-0xc0*0x22+-0x343+0x1cc7)*(-0x20e4+0xa66+0x337*0x7)+(-0x4*-0x2d+-0x2*-0x10fa+-0x22a3)]=-(-0x1*-0xe89+0xb99*-0x1+-0x2ef*0x1),_0x11bd53['normals'][_0x256f06*(-0x1*0x129c+0x19d2+-0x732)*(-0x1aa5+-0x4*-0xc4+0x5*0x4b8)+(0xcfb*0x2+-0x2*0x10c3+0x796)]=0x15b*0xe+0x4*0x417+0x11ab*-0x2,_0x11bd53['normals'][_0x256f06*(0x1877+0x1e27+0x3a*-0xf1)*(0x19c7+-0xb76+0x2*-0x727)+(0x1db4*-0x1+-0x26bf+0x447a)]=-0x18*0x12e+-0xee7+-0x12b*-0x25,_0x11bd53['normals'][_0x256f06*(-0x10af*0x1+-0x631+0x16e4)*(-0x1bd1+0x1ea3+-0x2cf)+(-0x1334+0xb7b+0x7c1)]=-(-0x51*-0x1d+0x1cd+-0xaf9),_0x11bd53['normals'][_0x256f06*(-0x88a+-0x3b*-0x4d+-0xb5*0xd)*(0x1*0x469+0x1501+0x1967*-0x1)+(0x1e95+-0x1445+-0x36d*0x3)]=0x1443+0x26e+-0x16b1,_0x11bd53['normals'][_0x256f06*(-0x180f*0x1+0x13fb+0x418)*(0x628*-0x6+0xd75+-0x1*-0x177e)+(-0x1f7b+0x4f*-0x4f+0x12a2*0x3)]=-0x76d*-0x1+-0x1c9+-0x26*0x26,_0x11bd53['normals'][_0x256f06*(0x6ec+-0x1*0x1c8b+0x15a3)*(-0xb19+-0x29*0x47+0x167b)+(-0x1afe+0x1928+0x1e1)]=-(0x1*-0x1b9a+-0x502+-0x45*-0x79);const _0x303e8b=BL(this['_system']['app']['graphicsDe'+'vice'],_0x11bd53),_0x46f6f4=new He(_0x303e8b,this['_material'],this['_node']);if(_0x46f6f4['name']='Text\x20Eleme'+'nt:\x20'+this['_entity']['name'],_0x46f6f4['castShadow']=!(0xc6f+0x1d3*0x1+-0xe41*0x1),_0x46f6f4['receiveSha'+'dow']=!(-0x43e+-0x808+0xc47),_0x46f6f4['cull']=!_0x564f99,_0x46f6f4['screenSpac'+'e']=_0x564f99,_0x46f6f4['drawOrder']=this['_drawOrder'],_0x20a27f&&(_0x46f6f4['cull']=!(-0xf90+0xc05+0x1*0x38b),_0x46f6f4['isVisibleF'+'unc']=_0x433c9e),this['_setTextur'+'eParams'](_0x46f6f4,this['_font']['textures'][_0x46d663]),_0x46f6f4['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']),_0x46f6f4['setParamet'+'er']('material_o'+'pacity',this['_color']['a']),_0x46f6f4['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x46f6f4['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x46f6f4['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x46d663]['width']),_0x46f6f4['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']),_0x46f6f4['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']),_0x46f6f4['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']),this['_symbolSha'+'dowParams'])this['_shadowOff'+'setUniform'][0x1*-0x1283+-0xc9*0x11+0x1fdc]=-0xf17+-0x10e2+0x1ff9,this['_shadowOff'+'setUniform'][0x6b9*0x2+0x641*0x1+0x2*-0x9d9]=0x3ad+-0x212d+0xec*0x20;else{const _0x206182=-this['_font']['data']['info']['maps'][_0x46d663]['width']/this['_font']['data']['info']['maps'][_0x46d663]['height'];this['_shadowOff'+'setUniform'][-0xfe*0x1c+-0x912+0x24da]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][-0xf6*-0x9+0x1*-0xd31+0x3*0x184]=_0x206182*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'];}_0x46f6f4['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']),_0x11bd53['meshInstan'+'ce']=_0x46f6f4,this['_model']['meshInstan'+'ces']['push'](_0x46f6f4);}}this['_element']['maskedBy']&&this['_element']['_setMasked'+'By'](this['_element']['maskedBy']),_0x57f9e0&&this['_element']['enabled']&&this['_entity']['enabled']&&this['_element']['addModelTo'+'Layers'](this['_model']),this['_updateMes'+'hes'](),this['_rangeStar'+'t']=0xfc+-0x20f4+0x1ff8,this['_rangeEnd']=this['_symbols']['length'],this['_updateRen'+'derRange']();}['_removeMes'+'hInstance'](_0x1751d8){_0x1751d8['destroy']();const _0x514888=this['_model']['meshInstan'+'ces']['indexOf'](_0x1751d8);_0x514888!==-(-0x1122+-0x110b*-0x1+0x6*0x4)&&this['_model']['meshInstan'+'ces']['splice'](_0x514888,0x260d+0xf1b+-0x3527);}['_setMateri'+'al'](_0x183034){if(this['_material']=_0x183034,this['_model'])for(let _0x4181b8=0x8ee+-0x25a0+-0x1*-0x1cb2,_0x55b4f2=this['_model']['meshInstan'+'ces']['length'];_0x4181b8<_0x55b4f2;_0x4181b8++){const _0x19b8d4=this['_model']['meshInstan'+'ces'][_0x4181b8];_0x19b8d4['material']=_0x183034;}}['_updateMat'+'erial'](_0x4b4be8){const _0xe6c0bc=this['_element'],_0x2ddc39=_0xe6c0bc['_isScreenC'+'ulled'](),_0x4306a5=function(_0xb73a43){return _0xe6c0bc['isVisibleF'+'orCamera'](_0xb73a43);},_0x45d5de=this['_font']&&this['_font']['type']===dh;if(this['_material']=this['_system']['getTextEle'+'mentMateri'+'al'](_0x4b4be8,_0x45d5de,this['_enableMar'+'kup']),this['_model'])for(let _0x574ca2=-0x1*-0xd2d+0x19b3+-0x9b8*0x4,_0x3817ec=this['_model']['meshInstan'+'ces']['length'];_0x574ca2<_0x3817ec;_0x574ca2++){const _0x1e9a15=this['_model']['meshInstan'+'ces'][_0x574ca2];_0x1e9a15['cull']=!_0x4b4be8,_0x1e9a15['material']=this['_material'],_0x1e9a15['screenSpac'+'e']=_0x4b4be8,_0x2ddc39?(_0x1e9a15['cull']=!(-0x54b*-0x1+-0x1*0xc9f+0x754),_0x1e9a15['isVisibleF'+'unc']=_0x4306a5):_0x1e9a15['isVisibleF'+'unc']=null;}}['_updateMat'+'erialEmiss'+'ive'](){this['_symbolCol'+'ors']?(this['_colorUnif'+'orm'][0x1*0x18ef+0x1b49+-0xc*0x45a]=-0x556+0x176*-0x13+0x2119,this['_colorUnif'+'orm'][-0xc2*0x2f+-0x2*-0xee1+0x5dd]=-0x21e5*0x1+0x1*-0x2459+0x463f,this['_colorUnif'+'orm'][0x2*0xb4d+0x49e*-0x6+0x51c]=0xf4e+0x163f+0x12c6*-0x2):(We['linear'](this['_color']),this['_colorUnif'+'orm'][0xc9d+0x8*-0x485+-0x93*-0x29]=We['r'],this['_colorUnif'+'orm'][0x19ec+-0x6*-0x2b7+-0x5*0x871]=We['g'],this['_colorUnif'+'orm'][0x22e5*-0x1+-0x24e0+0x47c7]=We['b']);}['_updateMat'+'erialOutli'+'ne'](){this['_symbolOut'+'lineParams']?(this['_outlineCo'+'lorUniform'][-0x2392+-0xbc3+0x2f55]=-0x7*-0x3ad+0x1606+-0x19*0x1e9,this['_outlineCo'+'lorUniform'][0x15c1+-0x743+-0xe7d*0x1]=-0x245*0x1+0x61*-0x35+-0x1*-0x165a,this['_outlineCo'+'lorUniform'][0x1*-0x1656+0x9*0x315+-0x565]=0x1174+0x17*-0x10c+-0x2*-0x350,this['_outlineCo'+'lorUniform'][0x1f47+-0x513*-0x1+0xc1d*-0x3]=0x24ca+-0x79*0x9+0x4*-0x822):(We['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][-0x7e+0x23f3+-0x1d*0x139]=We['r'],this['_outlineCo'+'lorUniform'][-0x1*-0x1a9d+-0x222b*-0x1+-0x1*0x3cc7]=We['g'],this['_outlineCo'+'lorUniform'][-0xef5+-0x3*0x7f+0x1074]=We['b'],this['_outlineCo'+'lorUniform'][-0x1*-0x253d+0x21f1*-0x1+-0x349]=We['a']);}['_updateMat'+'erialShado'+'w'](){this['_symbolOut'+'lineParams']?(this['_shadowCol'+'orUniform'][0x17e*-0x17+0x21a*-0x2+0x2686]=-0x14d8+-0x59*-0x10+0xf48,this['_shadowCol'+'orUniform'][-0x1*0x69c+-0x31a+0x9b7]=-0xa6*0x1f+-0xf56*0x2+0x32c6,this['_shadowCol'+'orUniform'][0x228+-0x16d*0xb+-0x69*-0x21]=-0xf68+0x26d6*-0x1+0x1b1f*0x2,this['_shadowCol'+'orUniform'][-0x15*0xd7+-0x2*0x355+0x1850]=0x17cb+-0x2*0x295+-0x1*0x12a1):(We['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][0x2f*0xb9+0xbf*0x7+-0x2730]=We['r'],this['_shadowCol'+'orUniform'][0x5*-0x37c+0x125f*-0x1+0x23cc]=We['g'],this['_shadowCol'+'orUniform'][0x1*0x1c4b+-0x1*0xf4f+-0xb*0x12e]=We['b'],this['_shadowCol'+'orUniform'][0x133*0x1b+-0x18c0+-0x79e]=We['a']);}['_isWordBou'+'ndary'](_0x1f3eb3){return yg['test'](_0x1f3eb3);}['_isValidNe'+'xtChar'](_0x3b697a){return _0x3b697a!==null&&!GL['test'](_0x3b697a);}['_isNextCJK'+'Boundary'](_0x51e9f0,_0x323353){return vg['test'](_0x51e9f0)&&(yg['test'](_0x323353)||VL['test'](_0x323353));}['_isNextCJK'+'WholeWord'](_0x51fb52){return vg['test'](_0x51fb52);}['_updateMes'+'hes'](){const _0xe39dcf=this['_font']['data'],_0x42dae5=this,_0x112856=Math['min'](this['_minFontSi'+'ze'],this['_maxFontSi'+'ze']),_0x1dab05=this['_maxFontSi'+'ze'],_0x4ead12=this['_shouldAut'+'oFit']();_0x4ead12&&(this['_fontSize']=this['_maxFontSi'+'ze']);const _0x1af5e5=-0x1fd0+-0x139f+0xc5*0x43,_0x2ec498=this['_symbols']['length'];let _0x34eb2e=0x1a*-0x122+-0x20bb+0x3e2f,_0xd1f5ba=0xc08+0x2*-0x50e+-0x1ec,_0x49ecd1=0x29*0x13+0x8*0x296+-0xf3*0x19,_0x2197bd=0x14e7+-0x1953+-0x46c*-0x1,_0x273186=0x169c+-0x24d4*-0x1+-0x3b6f,_0x60fdc8=-0x2654+0x9ab+0x1ca9,_0x17dda8=0x17*-0x13+0xa67*-0x2+0x1683,_0xf6ea2b=0x1596+0x18e*0x13+-0x3320,_0xf37668=-0x60*-0x3d+-0x272*-0x1+0x1*-0x1952,_0x28f445=-0x967*-0x1+0x12c6+-0x1c2d,_0x607835=0x1d79+0x1da5+-0x3b1e;const _0x4c97ae=Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])>=-0x2081+-0x2c0*0x7+0x33c1+0.0001;let _0x31a18e=this['_element']['calculated'+'Width'];(this['autoWidth']&&!_0x4c97ae||!this['_wrapLines'])&&(_0x31a18e=Number['POSITIVE_I'+'NFINITY']);let _0x43f0ee=-0x171+-0x70d+-0x43f*-0x2,_0x2f5d87=-0x140a+0x31f*-0x3+0x1d67,_0x560f81,_0x1281b1,_0x53c454,_0x255c49;function _0x2bdffe(_0x3f404f,_0x221922,_0x1790d2){_0x42dae5['_lineWidth'+'s']['push'](Math['abs'](_0x1790d2));const _0x12b738=_0xf6ea2b>_0x221922?_0x221922+(-0x2638+0x448+0x21f1*0x1):_0xf6ea2b,_0x2eecbd=_0xf6ea2b>_0x221922?_0xf6ea2b+(-0x253d+-0x239*-0x7+0x15af):_0x221922,_0x1d7443=_0x3f404f['slice'](_0x12b738,_0x2eecbd);if(_0x607835){let _0x4d481e=_0x1d7443['length'];for(;_0x4d481e--&&_0x607835>-0xf7e+0x2614+0x1696*-0x1;)Sg['test'](_0x1d7443[_0x4d481e])&&(_0x1d7443['splice'](_0x4d481e,-0x23b0+0x70b+0x1ca6),_0x607835--);}_0x42dae5['_lineConte'+'nts']['push'](_0x1d7443['join']('')),_0x34eb2e=0x3*-0x349+0xbaf*0x2+-0xd83,_0xd1f5ba-=_0x42dae5['_scaledLin'+'eHeight'],_0x273186++,_0xf37668=0x111+-0x26*0x37+-0x1*-0x719,_0x28f445=0x1*0x204d+-0x20b6+0x3*0x23,_0x607835=-0x875*0x1+0x8*0x282+0xb9b*-0x1,_0x60fdc8=-0x2203+0x2*-0x13e+0x247f,_0xf6ea2b=_0x221922;}let _0x122f55=!(-0x5*0x1cd+0x1*0x139+0x7c8);for(;_0x122f55;){_0x122f55=!(0x2306*-0x1+-0x1063+0x2*0x19b5),_0x4ead12?this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t']*this['_fontSize']/(this['_maxFontSi'+'ze']||-0x896+0x116f+-0x8d9+0.0001):this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t'],this['width']=-0x23e0+0x24d2+-0x1*0xf2,this['height']=-0x371*0x9+0x1fa2+-0xd*0xd,this['_lineWidth'+'s']=[],this['_lineConte'+'nts']=[],_0x34eb2e=-0xfcb+-0xe*-0xa+0xf3f,_0xd1f5ba=-0x212+0x3*0x11e+-0x148,_0x49ecd1=0xc45+-0x2133*0x1+0x3*0x6fa,_0x2197bd=0x728+0x4*0x1bc+-0xe18,_0x273186=-0x1*-0x198a+0x19b1+0x2*-0x199d,_0x60fdc8=0x588*0x7+-0x9*0x157+-0xd*0x20d,_0x17dda8=0x928+-0x206a+0x1742,_0xf6ea2b=0x705+0x3*-0x16e+0x2bb*-0x1,_0xf37668=-0x2*0xfde+0x1e84+-0x8*-0x27,_0x28f445=-0x61b*0x1+0x560*0x1+0xbb*0x1,_0x607835=-0x6*0x39a+-0x1*0x1788+0x2d24;const _0x45cdb5=this['_fontSize']/_0x1af5e5;_0x43f0ee=this['_fontMinY']*_0x45cdb5,_0x2f5d87=this['_fontMaxY']*_0x45cdb5;for(let _0x541331=-0x1fff+-0x1718+0x3717;_0x541331<this['_meshInfo']['length'];_0x541331++)this['_meshInfo'][_0x541331]['quad']=-0x2dd*0xd+0x2*-0x1240+0x49b9,this['_meshInfo'][_0x541331]['lines']={};let _0x5b3e30=0x26d1+-0x1*-0x20ff+-0x1*0x46d1,_0x53049e=0x15*-0x48+0x1c2d*0x1+-0x1546,_0xb68a66=-0x4a2+-0x55+0x5f6,_0x382503=0x231+0x231b+-0x244d+(-0xc*0x27a+0x300*-0x6+-0x3*-0x103d)*(-0xb73*0x2+-0x2418+-0x892*-0x7),_0x392825=-0x1cea+-0xf43*0x1+0x2d2c+(-0x65*0x2c+0xb5*-0x2f+0x3396)*(0x13f0+0x11*-0x23b+0x12fb),_0x3dda98=-0x6f*-0xd+0x1*-0xb2b+-0x588*-0x1,_0x176ec9=0x265*-0x1+-0x222e+0x6*0x643+(-0x1bfc+0xbc0+-0x191*-0xb)*(0x771+0x179+-0x7ea),_0x4ab5b8=0x6c4+0x9b*-0x17+0x4*0x20a+(0x1335+0x905+-0x1b3b)*(-0xcef+-0xa05+0x6*0x3fe),_0x3e0db7=-0x7*-0x34+0x14d+0x6*-0x5f+(-0x1*0x68d+-0x3a5*-0x5+-0xb2d)*(-0x979+-0x236+0x1*0xcaf);for(let _0x48f488=0x1c9b*0x1+-0x22f+-0x1a6c;_0x48f488<_0x2ec498;_0x48f488++){if(_0x560f81=this['_symbols'][_0x48f488],_0x255c49=_0x48f488+(-0x22fa+-0x15a2+0x389d)>=_0x2ec498?null:this['_symbols'][_0x48f488+(0x1b4*0x7+0x1*0xa1+-0x1*0xc8c)],Sg['test'](_0x560f81)){_0x607835++,(!this['_wrapLines']||this['_maxLines']<-0x1c1c+-0x2cf+0x1eeb||_0x273186<this['_maxLines'])&&(_0x2bdffe(this['_symbols'],_0x48f488,_0x2197bd),_0x17dda8=_0x48f488+(0x2b*0xe8+-0x1f35+-0x7c2),_0xf6ea2b=_0x48f488+(0xc6c+0x1fe2*0x1+-0x2c4d*0x1));continue;}let _0x143007=0x1*0x1201+0x5c8+-0x17c9,_0x4c7659=-0xc5*-0x23+0x1*-0x9ab+-0x1144,_0x1ec491=0x49f+-0x2cf*0xa+0x1777,_0x5f31be=0x2248+-0x1c38+-0x60f,_0x579aed,_0x6d68a1;if(_0x1281b1=_0xe39dcf['chars'][_0x560f81],!_0x1281b1){if(HL['indexOf'](_0x560f81)!==-(0x228f+0x39d+-0x262b))_0x1281b1=WL;else{if(_0xe39dcf['chars']['\x20'])_0x1281b1=_0xe39dcf['chars']['\x20'];else for(const _0x501dae in _0xe39dcf['chars']){_0x1281b1=_0xe39dcf['chars'][_0x501dae];break;}_0xe39dcf['missingCha'+'rs']||(_0xe39dcf['missingCha'+'rs']=new Set()),_0xe39dcf['missingCha'+'rs']['has'](_0x560f81)||(console['warn']('Character\x20'+'\x27'+_0x560f81+('\x27\x20is\x20missi'+'ng\x20from\x20th'+'e\x20font\x20')+_0xe39dcf['info']['face']),_0xe39dcf['missingCha'+'rs']['add'](_0x560f81));}}if(_0x1281b1){let _0x5f4572=-0x1*-0x3e5+0x5c0+-0x9a5;if(_0x28f445>0x5*-0x5db+0x17ae+0x599){const _0x41d7b4=this['_font']['data']['kerning'];if(_0x41d7b4){const _0x18c60f=_0x41d7b4[Tc['getCodePoi'+'nt'](this['_symbols'][_0x48f488-(-0x1a98+-0x3*-0x783+0xd*0x50)])||-0xf*-0x5+-0x259c*-0x1+-0x1*0x25e7];_0x18c60f&&(_0x5f4572=_0x18c60f[Tc['getCodePoi'+'nt'](this['_symbols'][_0x48f488])||0x10f7+0x2*0xec+-0x217*0x9]||-0x1441+0x54*0x31+-0x1*-0x42d);}}_0x579aed=_0x1281b1['scale']||0xfe9+0x6*-0x12a+-0x476*0x2,_0x6d68a1=(_0x1281b1['width']+_0x1281b1['height'])/(-0xd*0x2c9+0x2*-0x1d1+0x27d9),_0x5f31be=_0x45cdb5*_0x6d68a1/_0x579aed,_0x1ec491=(_0x1281b1['xadvance']+_0x5f4572)*_0x45cdb5,_0x143007=(_0x1281b1['xoffset']-_0x5f4572)*_0x45cdb5,_0x4c7659=_0x1281b1['yoffset']*_0x45cdb5;}else console['error']('Couldn\x27t\x20s'+'ubstitute\x20'+'missing\x20ch'+'aracter:\x20\x27'+_0x560f81+'\x27');const _0xf39b62=zL['test'](_0x560f81),_0x2e743d=_0x1281b1&&_0x1281b1['map']||0x1e40+-0xbe2+-0x125e,_0x870898=-this['_font']['data']['info']['maps'][_0x2e743d]['width']/this['_font']['data']['info']['maps'][_0x2e743d]['height'],_0x3c3804=this['_meshInfo'][_0x2e743d],_0x256a4b=_0x34eb2e+this['_spacing']*_0x1ec491;if(_0x256a4b>_0x31a18e&&_0x28f445>-0x2cd+0x4f*0x1f+-0x2*0x362&&!_0xf39b62&&(this['_maxLines']<0x6e4+0x284*0xd+-0x2798||_0x273186<this['_maxLines'])){if(_0xf37668===-0xb2*-0x4+-0x1739+0x1*0x1471)_0x17dda8=_0x48f488,_0x2bdffe(this['_symbols'],_0x48f488,_0x2197bd);else{const _0x5954f1=Math['max'](_0x48f488-_0x17dda8,-0xa*0x346+-0x1b3f+0x3bfb);if(this['_meshInfo']['length']<=-0x27*-0xa9+0x111e+-0x2adc)_0x3c3804['lines'][_0x273186-(-0x332+0x1*-0x11d1+0x1504)]-=_0x5954f1,_0x3c3804['quad']-=_0x5954f1;else{const _0x541dbf=_0x17dda8,_0x1bee1d=_0x48f488;for(let _0x38ee0a=_0x541dbf;_0x38ee0a<_0x1bee1d;_0x38ee0a++){const _0x6c47ce=this['_symbols'][_0x38ee0a],_0x4ebfd1=_0xe39dcf['chars'][_0x6c47ce],_0x54833e=this['_meshInfo'][_0x4ebfd1&&_0x4ebfd1['map']||0x179f+0x34*-0x4f+0x7*-0x115];_0x54833e['lines'][_0x273186-(0x7f*-0x1+-0x5a*0x61+0x229a)]-=0x1feb+0x12fd+-0x32e7,_0x54833e['quad']-=0x10*-0x22d+-0xeb1*0x2+-0xad*-0x5f;}}_0x48f488-=_0x5954f1+(0x265a+-0xa38*-0x1+-0x3091),_0x2bdffe(this['_symbols'],_0x17dda8,_0x60fdc8);continue;}}_0x53c454=_0x3c3804['quad'],_0x3c3804['lines'][_0x273186-(-0xe24+0x1dbe+-0xf99)]=_0x53c454;let _0x52dac0=_0x34eb2e-_0x143007,_0x58f481=_0x52dac0+_0x5f31be;const _0x313970=_0xd1f5ba-_0x4c7659,_0xf0fa67=_0x313970+_0x5f31be;if(this['_rtl']){const _0x6cd863=_0x5f31be-_0x143007-this['_spacing']*_0x1ec491-_0x143007;_0x52dac0-=_0x6cd863,_0x58f481-=_0x6cd863;}_0x3c3804['positions'][_0x53c454*(-0x1dd6+0x9*0x3c+-0xddf*-0x2)*(-0x26fb*-0x1+-0x521+0x21d7*-0x1)+(-0x1*-0x19df+-0x45a*-0x4+-0x2b47)]=_0x52dac0,_0x3c3804['positions'][_0x53c454*(-0x724+0x1*0x211f+0x187*-0x11)*(0x1dc3+0x8*0x3fd+-0x3da8)+(0x1e7*0x5+-0x5b6+-0x3cc)]=_0x313970,_0x3c3804['positions'][_0x53c454*(-0x1d81+0x3a*-0x5c+0x1*0x325d)*(0x1960+0x2470+-0xd*0x4c1)+(-0x6d4+-0x20ae+0x1*0x2784)]=_0x49ecd1,_0x3c3804['positions'][_0x53c454*(0x2a1+-0xc2*0x1+-0x1db)*(0x1*-0x11a5+-0xe2a+-0x1*-0x1fd2)+(0xb54+0x1*0x1f37+-0x2a88)]=_0x58f481,_0x3c3804['positions'][_0x53c454*(-0x167*0x1b+0x7bb+0x11*0x1c6)*(0x7*0xe2+0x158e+-0x2f*0x97)+(-0x25*-0xd4+-0x2035+0x195)]=_0x313970,_0x3c3804['positions'][_0x53c454*(-0x6e9+0x1f67+-0x187a)*(-0x7ee+0x7*-0x3c0+-0x2231*-0x1)+(0x3*0x2cd+-0x1dae+0x154c)]=_0x49ecd1,_0x3c3804['positions'][_0x53c454*(-0x1d2a+0x21f0+0x3a*-0x15)*(0x16fa+0x5ce+-0x1cc5)+(-0x2e*0x97+-0x2a1*0x7+0x2d8f)]=_0x58f481,_0x3c3804['positions'][_0x53c454*(-0x2216+-0x2232+0x444c)*(0x671*-0x3+0xa61*0x1+0x8f5)+(-0x1514+-0x142c+0x2947)]=_0xf0fa67,_0x3c3804['positions'][_0x53c454*(0x3*-0x44d+-0x1267+-0x26*-0xd3)*(-0x22ef+0x5*0xa+0x22c0)+(-0x1bb0*0x1+-0x1ffb+0x3bb3)]=_0x49ecd1,_0x3c3804['positions'][_0x53c454*(-0x671+-0x234+-0x2e3*-0x3)*(-0x1160+-0x3e*0x3a+-0x1*-0x1f6f)+(0x20af+-0x41a+-0x1c8c)]=_0x52dac0,_0x3c3804['positions'][_0x53c454*(0x1d48+0x6d*0x3e+-0x37aa)*(-0x12ee+0x1f6d+-0xc7c)+(-0x2c*0x4d+-0x105+0xe4b*0x1)]=_0xf0fa67,_0x3c3804['positions'][_0x53c454*(0x2c3*-0x6+-0x840*-0x2+0x16)*(-0x1d*0x36+0x1508+-0xee7)+(0x43*0x6d+-0x1*0x1fd9+0x35d)]=_0x49ecd1,this['width']=Math['max'](this['width'],_0x256a4b);let _0x5d0a4f;if(this['_shouldAut'+'oFitWidth']()&&this['width']>this['_element']['calculated'+'Width']&&(_0x5d0a4f=Math['floor'](this['_element']['fontSize']*this['_element']['calculated'+'Width']/(this['width']||-0x27c*-0xb+0xe08+-0x295c+0.0001)),_0x5d0a4f=Y['clamp'](_0x5d0a4f,_0x112856,_0x1dab05),_0x5d0a4f!==this['_element']['fontSize'])){this['_fontSize']=_0x5d0a4f,_0x122f55=!(-0x43*0x95+0x201c+0x6e3);break;}if(this['height']=Math['max'](this['height'],_0x2f5d87-(_0xd1f5ba+_0x43f0ee)),this['_shouldAut'+'oFitHeight']()&&this['height']>this['_element']['calculated'+'Height']&&(_0x5d0a4f=Y['clamp'](this['_fontSize']-(-0x2409+0x10a3+0x1367),_0x112856,_0x1dab05),_0x5d0a4f!==this['_element']['fontSize'])){this['_fontSize']=_0x5d0a4f,_0x122f55=!(0x1*-0xb93+-0xbe9+-0x3ea*-0x6);break;}_0x34eb2e+=this['_spacing']*_0x1ec491,_0xf39b62||(_0x2197bd=_0x34eb2e),(this['_isWordBou'+'ndary'](_0x560f81)||this['_isValidNe'+'xtChar'](_0x255c49)&&(this['_isNextCJK'+'Boundary'](_0x560f81,_0x255c49)||this['_isNextCJK'+'WholeWord'](_0x255c49)))&&(_0xf37668++,_0x60fdc8=_0x2197bd,_0x17dda8=_0x48f488+(-0xb*0xb7+0x5*0x1c3+-0xf1)),_0x28f445++;const _0x418525=this['_getUv'](_0x560f81);if(_0x3c3804['uvs'][_0x53c454*(0x19ae*0x1+0x16ca*-0x1+-0x2e0)*(-0xc4a+0xa57+0x1f5)+(0x9f*-0x1a+0x1fe9+0xf*-0x10d)]=_0x418525[0x1129+0x1732+-0x285b],_0x3c3804['uvs'][_0x53c454*(0x20fe+-0x305+0x1df5*-0x1)*(0x71f+0x1*0x1dc6+-0x24e3)+(-0x1*0x22e7+0x17b1+0xb37)]=0x42b*0x1+-0x907+0x4dd-_0x418525[-0x2*-0x1100+-0x12d4+-0xf2b],_0x3c3804['uvs'][_0x53c454*(-0x4d*-0x17+0xd7d+-0x1464)*(0x1*0x59+0x1b2d+0x3*-0x92c)+(-0x332*0x7+-0x1*0x1d5+0x1835*0x1)]=_0x418525[0xa6b+-0x1dd5+-0x4*-0x4db],_0x3c3804['uvs'][_0x53c454*(-0xa0+0x1935+-0x1891)*(0x1*-0x5d0+-0x1*-0x1a4b+-0x1479)+(-0x46*0x17+-0x19db+0x2028)]=0x2004+0x116*-0x20+-0x1*-0x2bd-_0x418525[-0xeaa+-0xc4b+0x1af6],_0x3c3804['uvs'][_0x53c454*(-0x17f6*0x1+0x30d+-0xb*-0x1e7)*(0x12a*0x7+-0xbf2*-0x3+-0x2bfa)+(0x1a05+-0x1f2*0xf+0x32d)]=_0x418525[-0x1*0x2021+-0x13d2+0x2f*0x11b],_0x3c3804['uvs'][_0x53c454*(0xe18+-0x197d+0xb69*0x1)*(-0x11a7*0x2+-0xe*0xe+-0x2*-0x120a)+(0x50*-0x2a+0x409+0xd4*0xb)]=0x65b*-0x3+0x1*0x4fd+0x203*0x7-_0x418525[-0x1f49+0x49*0x26+-0xc2*-0x1b],_0x3c3804['uvs'][_0x53c454*(0x1eca+0xee9+-0x1*0x2daf)*(0xf66+0x1140+-0x20a4)+(-0xc1b+-0x2*-0xd68+-0xeaf)]=_0x418525[-0x185+0x109b+-0xf16],_0x3c3804['uvs'][_0x53c454*(-0xc*-0x158+0x18bc+0x28d8*-0x1)*(0x2701+-0x6ae+0x2051*-0x1)+(0x2f3*0xa+-0x15c0+0x4f*-0x19)]=0x7*-0x2a1+0xa0f*-0x2+-0x1*-0x2686-_0x418525[-0x9d*0x1d+-0x21e2+0x33ae],this['_symbolCol'+'ors']){const _0x526560=this['_symbolCol'+'ors'][_0x48f488]*(0x1eb9+-0x1fa4+-0x22*-0x7);_0x5b3e30=this['_colorPale'+'tte'][_0x526560],_0x53049e=this['_colorPale'+'tte'][_0x526560+(0x20cd+-0x1*0x10ed+0x1*-0xfdf)],_0xb68a66=this['_colorPale'+'tte'][_0x526560+(0x6b3+0x8b+-0x4*0x1cf)];}if(_0x3c3804['colors'][_0x53c454*(-0x9ab+-0x2652+-0x3001*-0x1)*(-0x76a*0x3+-0x2000+0x3642)+(-0xf*0x97+-0x158f+0x1e68)]=_0x5b3e30,_0x3c3804['colors'][_0x53c454*(-0x1993+0x245f+0xa*-0x114)*(0x1*0x14c6+0x4*-0x90f+-0xe*-0x11b)+(-0x501*0x1+-0x20*0x124+0x2982)]=_0x53049e,_0x3c3804['colors'][_0x53c454*(-0x220e+0x13c9+-0x35*-0x45)*(-0x10cd+0x1ec7+-0xdf6)+(0x1b52+0x308+0x8*-0x3cb)]=_0xb68a66,_0x3c3804['colors'][_0x53c454*(0x1d66+-0x1*-0x2474+0x3*-0x15f2)*(-0x1903+0x26*-0xf4+-0x1*-0x3d3f)+(-0x1*0x1ad5+-0xc75+0x274d)]=-0x25e0+0x1c89+0xa56,_0x3c3804['colors'][_0x53c454*(0x347*-0xb+-0x2207*-0x1+-0x1*-0x20a)*(0x3e3+-0x13ba+-0xfdb*-0x1)+(-0x1*-0xbc2+-0x1787+0x7*0x1af)]=_0x5b3e30,_0x3c3804['colors'][_0x53c454*(-0x1b01+0xb70+0xf95*0x1)*(0x327*-0x1+0x16d6+-0x13ab)+(0x1822*0x1+-0x1*-0x1c75+-0x3492)]=_0x53049e,_0x3c3804['colors'][_0x53c454*(0x1c4d+0x1801+-0x344a)*(-0x1*0x10fd+-0x2564+0x3665)+(-0x545*0x7+-0x77f+0x2c68)]=_0xb68a66,_0x3c3804['colors'][_0x53c454*(-0x16be+0x1eab+-0x7e9)*(0x1*0x136b+0x4fc+0x821*-0x3)+(-0x1110+0xcaf+-0x178*-0x3)]=-0x1511+0x1840+-0x230,_0x3c3804['colors'][_0x53c454*(-0x84f+0xe80+-0x62d)*(-0x2514+0x14c1+-0x2f*-0x59)+(0x8*-0xdf+0x1871*0x1+-0x1171)]=_0x5b3e30,_0x3c3804['colors'][_0x53c454*(-0x10*0x47+0x1*-0xe4e+0x12c2)*(-0xb21+0x1c9f+-0x117a)+(0x59e*0x5+-0x1031+-0xbdc)]=_0x53049e,_0x3c3804['colors'][_0x53c454*(0xdb0+-0xab1+-0x1*0x2fb)*(0x31*-0x7+-0x1550+0x16ab)+(0x26e7+0x952+-0x302f)]=_0xb68a66,_0x3c3804['colors'][_0x53c454*(-0x2476+0x1*-0x2003+0x447d)*(0x3*0x7e8+-0x25f6+-0x2*-0x721)+(0xda8+0xd23+-0x1ac0)]=-0x1928+-0x1a69+-0x10*-0x349,_0x3c3804['colors'][_0x53c454*(0x10ff+-0x233e+0x1243)*(-0x2c*0x30+-0x305*0xa+0x2676)+(0x146*0x15+0x944+-0x23f6)]=_0x5b3e30,_0x3c3804['colors'][_0x53c454*(0xa7*-0x12+-0x6*0x1a3+0x1594)*(-0x1634+0xc6b+-0xc1*-0xd)+(0x1*0x1009+-0x9*-0x2a5+-0x27c9)]=_0x53049e,_0x3c3804['colors'][_0x53c454*(0x233+-0x1f58+-0x1d29*-0x1)*(-0x1cbc+-0x499*-0x2+0x138e)+(-0x513+-0xcec*0x1+0x120d)]=_0xb68a66,_0x3c3804['colors'][_0x53c454*(-0x1c40+0x2b*0x68+0xacc)*(-0x10*0x88+0xfc2*0x2+-0x80*0x2e)+(-0x22dc+-0x10b6+0x1*0x33a1)]=0x14c7+-0x6*0x490+0xf3*0x8,this['_symbolOut'+'lineParams']){const _0x2e8b5b=this['_symbolOut'+'lineParams'][_0x48f488]*(0x5*-0x1cc+-0x1*-0x25ae+-0x1*0x1cad);_0x382503=this['_outlinePa'+'lette'][_0x2e8b5b]+this['_outlinePa'+'lette'][_0x2e8b5b+(-0x1*-0xdf6+0x199a+-0x215*0x13)]*(0x4*0x3f1+0xcb8+0x1*-0x1b7c),_0x392825=this['_outlinePa'+'lette'][_0x2e8b5b+(0x101f*0x1+-0x24ec+0x14cf*0x1)]+this['_outlinePa'+'lette'][_0x2e8b5b+(0x1259+-0x67*0x3+-0x1121)]*(-0x5*0x729+0x20cc+-0x5*-0xcd),_0x3dda98=this['_outlinePa'+'lette'][_0x2e8b5b+(-0x17e4+-0x1249+0x2a31)];}if(_0x3c3804['outlines'][_0x53c454*(0x182d+0x29c+-0x1ac5)*(-0xad*0x2d+-0x2*-0xe73+0x5*0x4e)+(0x5*-0x101+0x1690+-0x118b*0x1)]=_0x382503,_0x3c3804['outlines'][_0x53c454*(0x12ca+-0x6*-0x30a+-0x2502)*(0xeea+0x6cb+-0x15b2)+(0x1*0x99e+-0x6c1*-0x5+0x6*-0x73b)]=_0x392825,_0x3c3804['outlines'][_0x53c454*(-0x251*-0xd+-0x2*-0x27e+-0x2315)*(0x1d25+-0x1022+-0xd00)+(-0x199*0x15+0xe*-0x234+-0x4067*-0x1)]=_0x3dda98,_0x3c3804['outlines'][_0x53c454*(-0x6*-0x168+0xae1*0x2+-0x2*0xf17)*(0x1701+0x5f*0x13+-0x1e0b)+(-0xd4d*-0x2+-0x10d5+-0x9c2*0x1)]=_0x382503,_0x3c3804['outlines'][_0x53c454*(-0xa6c+0xc3d+-0x1cd)*(-0x1*0x2589+0x1*-0x181a+0x25f*0x1a)+(0x94d*0x2+0x298*-0xb+0x13*0x86)]=_0x392825,_0x3c3804['outlines'][_0x53c454*(-0x1f83+0x2*-0x67+0x2055)*(-0x1*0x1fa9+0x72+0x1f3a)+(-0x168b+0x659*-0x6+0x7*0x8aa)]=_0x3dda98,_0x3c3804['outlines'][_0x53c454*(-0x1*-0xc17+-0x4f*0x14+-0x5e7*0x1)*(0x100*-0x9+0x1b53+-0x1250*0x1)+(-0x243d+0x511*0x2+0x1*0x1a21)]=_0x382503,_0x3c3804['outlines'][_0x53c454*(0xb7*0xd+0x3*0xc83+-0x2ed0)*(-0x2*0xeaa+0x3*-0x737+0x4*0xcbf)+(0x2212+0x76*-0x2c+-0x10f*0xd)]=_0x392825,_0x3c3804['outlines'][_0x53c454*(-0x8c5*0x3+0x10cb*0x1+-0x8*-0x131)*(-0x9c5*-0x1+0x1932+-0x22f4)+(-0x1*-0x23c6+0x1b*0x166+-0x38*0x150)]=_0x3dda98,_0x3c3804['outlines'][_0x53c454*(0xb8d+-0x1*-0xd4f+-0xc*0x212)*(0x165+-0x1732*0x1+0x10*0x15d)+(0x11aa+-0xb*0x20e+0x1*0x4f9)]=_0x382503,_0x3c3804['outlines'][_0x53c454*(0x211e*0x1+-0x2*-0x551+-0x1*0x2bbc)*(-0x265*0x2+0x211e+0xb*-0x293)+(0x763+-0x531+-0xc*0x2e)]=_0x392825,_0x3c3804['outlines'][_0x53c454*(0x12*-0x130+-0x1*-0x208d+0xb29*-0x1)*(0xe39+0xb90+-0x19c6)+(-0x1f22*0x1+0x8db+0x1652)]=_0x3dda98,this['_symbolSha'+'dowParams']){const _0x2abacd=this['_symbolSha'+'dowParams'][_0x48f488]*(-0x1342+-0x4d8*-0x1+0xe70);_0x176ec9=this['_shadowPal'+'ette'][_0x2abacd]+this['_shadowPal'+'ette'][_0x2abacd+(-0x21c0+0x8dd+-0x9*-0x2c4)]*(-0x2442+-0xa9+0x25eb),_0x4ab5b8=this['_shadowPal'+'ette'][_0x2abacd+(0x1d7b+0x163a+0x33b3*-0x1)]+this['_shadowPal'+'ette'][_0x2abacd+(0x1115*-0x1+-0x2*-0x941+-0x16a)]*(-0x82f*-0x2+0x6d9+-0x1637),_0x3e0db7=this['_shadowPal'+'ette'][_0x2abacd+(-0x35*0xb7+0x0+0x139*0x1f)]+(-0x740+-0x58*0x29+0x15d7)+Math['round'](_0x870898*this['_shadowPal'+'ette'][_0x2abacd+(0xc4f+-0x226+-0xa24)]+(-0x53*0x19+-0x1*-0x1735+-0x1*0xe9b))*(-0xe60+0x4c9*-0x1+0x1429);}_0x3c3804['shadows'][_0x53c454*(0x2*-0x382+-0x4d8+0x130*0xa)*(0x2*0x6a0+-0x53d+-0x800)+(-0x108b+-0x2*-0x116e+0x9*-0x209)]=_0x176ec9,_0x3c3804['shadows'][_0x53c454*(0x1*0x2097+-0x5*-0x393+0x1*-0x3272)*(-0xc59+0x14b*0x18+0x12ac*-0x1)+(-0x1db1*0x1+-0x90e+0x2*0x1360)]=_0x4ab5b8,_0x3c3804['shadows'][_0x53c454*(-0x16bf+0x1*0x1fb9+0x4a*-0x1f)*(-0xc5+0x213a+0x1039*-0x2)+(0x1a84+0x21d+-0x1c9f)]=_0x3e0db7,_0x3c3804['shadows'][_0x53c454*(-0x9a4+-0x4e6+0xe8e)*(-0x1496+0x873*-0x3+0x16f9*0x2)+(0xf36+0xdd3+-0x1d06)]=_0x176ec9,_0x3c3804['shadows'][_0x53c454*(0x16de+0x2179+-0x3853)*(0x2635+-0x1083*0x1+-0x319*0x7)+(0xccc+-0x22bf+0x15f7)]=_0x4ab5b8,_0x3c3804['shadows'][_0x53c454*(-0x1d5*-0x11+0x1*0x517+-0x2438)*(0x1d99*-0x1+0x809+0x1593)+(-0x717+-0x2462+0x1*0x2b7e)]=_0x3e0db7,_0x3c3804['shadows'][_0x53c454*(-0x5de+0x403*0x6+0x3*-0x610)*(0xf1d*-0x1+-0x1369+-0x4ef*-0x7)+(-0x11a+0xf35+-0xe15)]=_0x176ec9,_0x3c3804['shadows'][_0x53c454*(0xd53*-0x1+0x1b5+-0xba2*-0x1)*(0xe90*0x2+-0x4*-0x38a+-0x2b45)+(-0x948+0x10dd+-0x78e)]=_0x4ab5b8,_0x3c3804['shadows'][_0x53c454*(-0x1*0x1d12+0x59b*0x3+0x417*0x3)*(-0x21df+0xb41*0x3+0x1f)+(0x2*-0x103e+0x4d9+0x1bab)]=_0x3e0db7,_0x3c3804['shadows'][_0x53c454*(-0x287*-0xb+0x5b4+-0x1*0x217d)*(-0x69*0x22+0x1fc+-0x1*-0xbf9)+(0x1c25+-0x1140+-0xadc)]=_0x176ec9,_0x3c3804['shadows'][_0x53c454*(0x17c9+0x24cc+0x1*-0x3c91)*(0x9ba+0x1281+0x158*-0x15)+(0x1*0x24fa+0x1*-0x2655+0x165)]=_0x4ab5b8,_0x3c3804['shadows'][_0x53c454*(0xcda+0x23ef+-0x5*0x9c1)*(0x109+0xe69+-0xf6f)+(-0x1*-0x346+-0x167b+0x1340)]=_0x3e0db7,_0x3c3804['quad']++;}_0x122f55||_0xf6ea2b<_0x2ec498&&_0x2bdffe(this['_symbols'],_0x2ec498,_0x34eb2e);}this['_noResize']=!(-0x1*-0xd1+-0x2331+0x2260),this['autoWidth']=this['_autoWidth'],this['autoHeight']=this['_autoHeigh'+'t'],this['_noResize']=!(-0x3d*-0xe+0x1e0a+-0x215f);const _0x1725c7=this['_element']['pivot']['x'],_0x16983c=this['_element']['pivot']['y'],_0x35573d=this['_alignment']['x'],_0x5b8c6d=this['_alignment']['y'];for(let _0x5bdabc=-0x2505+-0xdd*0x25+0x44f6;_0x5bdabc<this['_meshInfo']['length'];_0x5bdabc++){if(this['_meshInfo'][_0x5bdabc]['count']===0x1f86+0x221c*-0x1+-0x1*-0x296)continue;let _0x5c0d87=0x1229*-0x1+0x19f6*-0x1+0x1*0x2c1f;for(const _0x338f18 in this['_meshInfo'][_0x5bdabc]['lines']){const _0x18d6bb=this['_meshInfo'][_0x5bdabc]['lines'][_0x338f18],_0x31a21a=this['_lineWidth'+'s'][parseInt(_0x338f18,-0x26ed+-0x1*-0x1625+0x10d2)],_0x25fd4b=-_0x1725c7*this['_element']['calculated'+'Width']+_0x35573d*(this['_element']['calculated'+'Width']-_0x31a21a)*(this['_rtl']?-(0x98+-0x1*0x2234+0x219d):-0x2*0xa77+0x1*0x17d+0x1372),_0x2298c4=(0x139+0xa3*-0x10+0x8f8-_0x16983c)*this['_element']['calculated'+'Height']-_0x2f5d87-(0x199a+-0x64f*0x2+-0xcfb-_0x5b8c6d)*(this['_element']['calculated'+'Height']-this['height']);for(let _0x539927=_0x5c0d87;_0x539927<=_0x18d6bb;_0x539927++)this['_meshInfo'][_0x5bdabc]['positions'][_0x539927*(0x5af+-0x1806+-0x7f*-0x25)*(0x16f3+0x1b52+-0x3242)]+=_0x25fd4b,this['_meshInfo'][_0x5bdabc]['positions'][_0x539927*(0x1ef7+-0x1f83+0x90)*(0xff6+-0x5ab+-0xa48)+(-0xd3*0x10+0x26*-0x60+-0x1*-0x1b73)]+=_0x25fd4b,this['_meshInfo'][_0x5bdabc]['positions'][_0x539927*(-0x1029*-0x1+-0x19d8+0x9b3)*(-0x12*0x204+0x139*0xf+0x11f4)+(-0x36*-0x1b+0x2561+-0x2b0d)]+=_0x25fd4b,this['_meshInfo'][_0x5bdabc]['positions'][_0x539927*(-0x432*0x6+-0x778+0x58*0x5f)*(0xdb3+-0x1*-0x427+0x1*-0x11d7)+(-0x21a4*0x1+-0x6bb*-0x3+0xd7c)]+=_0x25fd4b,this['_meshInfo'][_0x5bdabc]['positions'][_0x539927*(0x2eb+-0x2e7*-0x8+-0x1a1f)*(-0xb99*-0x1+0x2485*-0x1+0xd*0x1eb)+(0x3e5*-0x3+-0x1ef4+0x2aa4)]+=_0x2298c4,this['_meshInfo'][_0x5bdabc]['positions'][_0x539927*(-0x23b*0x4+0x1286+-0x332*0x3)*(-0x82a*-0x4+-0x536+-0x1b6f*0x1)+(0x16*-0x1a+-0xf85*-0x1+-0xd45)]+=_0x2298c4,this['_meshInfo'][_0x5bdabc]['positions'][_0x539927*(-0x1023+0x199*-0x13+0x2e82)*(0x15a8+0x10*-0x1e3+0x88b*0x1)+(-0x676+0x3dd*0x7+0x6*-0x36d)]+=_0x2298c4,this['_meshInfo'][_0x5bdabc]['positions'][_0x539927*(-0xd68+-0x681+0x13ed)*(-0x9*-0xf7+-0x1*-0x1c+-0x119*0x8)+(0x4fb+0x1d0e*0x1+0x21ff*-0x1)]+=_0x2298c4;if(this['_rtl'])for(let _0x819d34=_0x5c0d87;_0x819d34<=_0x18d6bb;_0x819d34++){const _0xdec3cb=_0x819d34*(-0x1*-0xfd1+-0x244d+0x1480)*(-0x1*0xd69+-0x1341+-0x1*-0x20ad);for(let _0x35dbd8=0x10f8+0x517*0x1+-0x160f;_0x35dbd8<0x25d6+-0x602*-0x4+0x4c2*-0xd;++_0x35dbd8)this['_meshInfo'][_0x5bdabc]['positions'][_0xdec3cb+_0x35dbd8*(-0x5e*-0x1f+-0x15*0x15d+0x1142)]=this['_element']['calculated'+'Width']-this['_meshInfo'][_0x5bdabc]['positions'][_0xdec3cb+_0x35dbd8*(0x2004+0xc39+-0x4a*0x99)]+_0x25fd4b*(-0x71+0xa71+-0x9fe);const _0x5adfea=this['_meshInfo'][_0x5bdabc]['positions'][_0xdec3cb+(-0xac4+0x6e9*0x3+-0x9f4)],_0x5a4c27=this['_meshInfo'][_0x5bdabc]['positions'][_0xdec3cb+(0x1*-0x80d+-0x5*-0x2a1+-0x1*0x512)];this['_meshInfo'][_0x5bdabc]['positions'][_0xdec3cb+(-0x961*0x3+0x1e3e+-0x86*0x4)]=this['_meshInfo'][_0x5bdabc]['positions'][_0xdec3cb+(0x187*0xf+-0x1bf2+-0x509*-0x1)],this['_meshInfo'][_0x5bdabc]['positions'][_0xdec3cb+(0x4d*0x74+-0x1*0x33d+-0x1fa1)]=this['_meshInfo'][_0x5bdabc]['positions'][_0xdec3cb+(0x5*0x4f3+-0x1*-0x1ed7+-0x378d)],this['_meshInfo'][_0x5bdabc]['positions'][_0xdec3cb+(0x75*0x37+-0x8*-0x262+0x2c33*-0x1)]=_0x5adfea,this['_meshInfo'][_0x5bdabc]['positions'][_0xdec3cb+(-0x413+-0x8de+0xcfa)]=_0x5a4c27;}_0x5c0d87=_0x18d6bb+(0xadb*-0x2+0xa7e+0xb39);}const _0x1f2ea0=this['_meshInfo'][_0x5bdabc]['count']*(0x2278*-0x1+-0x2572+0x345*0x16),_0x8c0a2e=this['_meshInfo'][_0x5bdabc]['quad']*(-0x10aa+-0x6d7*-0x2+0x300),_0x5470d7=new Ao(this['_meshInfo'][_0x5bdabc]['meshInstan'+'ce']['mesh']['vertexBuff'+'er']);for(let _0x1653a9=0x2*0xb6b+0x361+-0x1a37;_0x1653a9<_0x1f2ea0;_0x1653a9++)_0x1653a9>=_0x8c0a2e?(_0x5470d7['element'][Pe]['set'](-0x1583*0x1+-0x1*0x1418+0x299b*0x1,0x2034+0x1*-0x1c41+0x3f3*-0x1,-0x1609+-0x216b+0x3774),_0x5470d7['element'][is]['set'](-0x5*-0x179+-0x17*0x55+0x46,-0x1*0x48f+0x1*-0xa67+0xef6),_0x5470d7['element'][Wt]['set'](0x2650+-0x3cb*-0x1+0x3*-0xe09,-0x6b*0xa+-0x940+0xd6e,-0x1971+-0xdd5+-0x2746*-0x1,-0x285+-0x1003+0x1288),_0x5470d7['element'][ko]['set'](0x1b23*0x1+0x1b*-0x3b+-0x14ea,0xc*0x77+-0x99f*-0x2+-0x846*0x3,-0xb99+-0x24bd+0x3056,0x1f45*0x1+-0x1d*-0x68+-0x1*0x2b0d),_0x5470d7['element'][Uo]['set'](-0x4ca+-0x390*-0x5+-0xd06,0x662*0x5+0x1361+-0x334b,-0x25*0x3b+0xfcf*0x2+0x1717*-0x1,0x1*0xe87+-0xd*-0x9+-0xefc)):(_0x5470d7['element'][Pe]['set'](this['_meshInfo'][_0x5bdabc]['positions'][_0x1653a9*(0xe96+-0xf7*0x20+-0x3*-0x56f)+(-0x1*-0x8d2+-0x98e*-0x1+-0x1260)],this['_meshInfo'][_0x5bdabc]['positions'][_0x1653a9*(0x233d+0x1bca+-0x3f04)+(-0x1245+0xee8+0x35e)],this['_meshInfo'][_0x5bdabc]['positions'][_0x1653a9*(0x2378+-0x184d+0x38*-0x33)+(-0x302+0xeed+-0xbe9)]),_0x5470d7['element'][is]['set'](this['_meshInfo'][_0x5bdabc]['uvs'][_0x1653a9*(0x565*-0x5+0x59*0x37+0x7dc)+(-0x801+0x155d+-0xd5c)],this['_meshInfo'][_0x5bdabc]['uvs'][_0x1653a9*(0x1024+-0x1c3a+0x12*0xac)+(0x184d+-0x65*0x56+0x9a2)]),_0x5470d7['element'][Wt]['set'](this['_meshInfo'][_0x5bdabc]['colors'][_0x1653a9*(-0x225+0xc2c*-0x3+0x26ad*0x1)+(0x20f6*-0x1+0x65*0x4c+0x2*0x17d)],this['_meshInfo'][_0x5bdabc]['colors'][_0x1653a9*(-0x26b+-0x510+0x1*0x77f)+(-0x1a*-0x3b+0x162e+0x1c2b*-0x1)],this['_meshInfo'][_0x5bdabc]['colors'][_0x1653a9*(-0x34a*-0x3+0x13b5+0x149*-0x17)+(-0x161b*0x1+-0x177d+-0xd*-0x382)],this['_meshInfo'][_0x5bdabc]['colors'][_0x1653a9*(-0x183f+-0x113*-0x21+-0xb30)+(0x49*0x28+0x188c+-0x23f1)]),_0x5470d7['element'][ko]['set'](this['_meshInfo'][_0x5bdabc]['outlines'][_0x1653a9*(-0x253f*-0x1+0xbc+-0x288*0xf)+(-0x3*0xce5+0x2*-0x9cd+0x3a49)],this['_meshInfo'][_0x5bdabc]['outlines'][_0x1653a9*(-0x1b06+0x4ba+0x164f)+(0x112b+0x1*-0x1997+0x86d)],this['_meshInfo'][_0x5bdabc]['outlines'][_0x1653a9*(-0x1773+-0x768*0x1+-0x2*-0xf6f)+(-0x1*-0x1e78+0x1*0x3a2+-0x2218)]),_0x5470d7['element'][Uo]['set'](this['_meshInfo'][_0x5bdabc]['shadows'][_0x1653a9*(0x1*0x122+-0x126c+0x114d)+(-0xb61+-0x1714*0x1+0x2275)],this['_meshInfo'][_0x5bdabc]['shadows'][_0x1653a9*(0x265c+0x13*-0xc5+-0x17ba)+(-0xb6b+0x1d22+0x1*-0x11b6)],this['_meshInfo'][_0x5bdabc]['shadows'][_0x1653a9*(-0xcea+-0xe81*0x2+0x1*0x29ef)+(0x15a7+-0xb6e+-0xa37)])),_0x5470d7['next']();_0x5470d7['end'](),this['_meshInfo'][_0x5bdabc]['meshInstan'+'ce']['mesh']['aabb']['compute'](this['_meshInfo'][_0x5bdabc]['positions']),this['_meshInfo'][_0x5bdabc]['meshInstan'+'ce']['_aabbVer']=-(-0x24b3+-0x9ed+-0xad*-0x45);}this['_aabbDirty']=!(-0xae1*-0x3+0x85e+0x1*-0x2901);}['_onFontRen'+'der'](){this['font']=this['_font'];}['_onFontLoa'+'d'](_0x35a8f8){this['font']!==_0x35a8f8['resource']&&(this['font']=_0x35a8f8['resource']);}['_onFontCha'+'nge'](_0x26919d,_0x266012,_0x127f48,_0x33d991){if(_0x266012==='data'){this['_font']['data']=_0x127f48;const _0x8b95ce=this['_font']['data']['info']['maps']['length'];for(let _0x2a66d9=-0x97*0x24+-0x229*-0x11+0xd*-0x131;_0x2a66d9<_0x8b95ce;_0x2a66d9++){if(!this['_meshInfo'][_0x2a66d9])continue;const _0x167ad0=this['_meshInfo'][_0x2a66d9]['meshInstan'+'ce'];_0x167ad0&&(_0x167ad0['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x167ad0['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x167ad0['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x2a66d9]['width']));}}}['_onFontRem'+'ove'](_0x544e4f){}['_setTextur'+'eParams'](_0x15fe7f,_0x1e0e28){this['_font']&&(this['_font']['type']===dh?(_0x15fe7f['deletePara'+'meter']('texture_em'+'issiveMap'),_0x15fe7f['deletePara'+'meter']('texture_op'+'acityMap'),_0x15fe7f['setParamet'+'er']('texture_ms'+'dfMap',_0x1e0e28)):this['_font']['type']===ML&&(_0x15fe7f['deletePara'+'meter']('texture_ms'+'dfMap'),_0x15fe7f['setParamet'+'er']('texture_em'+'issiveMap',_0x1e0e28),_0x15fe7f['setParamet'+'er']('texture_op'+'acityMap',_0x1e0e28)));}['_getPxRang'+'e'](_0x53528b){const _0x413420=Object['keys'](this['_font']['data']['chars']);for(let _0x2937b3=0xf9*0x1+-0x263a+0x2541;_0x2937b3<_0x413420['length'];_0x2937b3++){const _0x2198b9=this['_font']['data']['chars'][_0x413420[_0x2937b3]];if(_0x2198b9['range'])return(_0x2198b9['scale']||-0x1*-0x1cd5+-0xb81*0x1+0x377*-0x5)*_0x2198b9['range'];}return 0x1*-0x18e3+-0x1ac2+0x33a7;}['_getUv'](_0x128b11){const _0x1ff938=this['_font']['data'];if(!_0x1ff938['chars'][_0x128b11])return _0x1ff938['chars']['\x20']?this['_getUv']('\x20'):[0x19bb+-0x1fde*-0x1+-0x3999,0x3*-0xad9+0xb*-0x2dd+0x400a,-0x1da5+-0x3*0xbc9+0x41*0x100,-0x32d*-0x1+0x24f1+-0x41*0x9e];const _0x3e3335=_0x1ff938['chars'][_0x128b11]['map'],_0x329e1a=_0x1ff938['info']['maps'][_0x3e3335]['width'],_0x391d5c=_0x1ff938['info']['maps'][_0x3e3335]['height'],_0x4c3d5e=_0x1ff938['chars'][_0x128b11]['x'],_0x59adee=_0x1ff938['chars'][_0x128b11]['y'],_0x2b139e=_0x4c3d5e,_0x5a6bd2=_0x59adee,_0x495b18=_0x4c3d5e+_0x1ff938['chars'][_0x128b11]['width'],_0x5024d0=_0x59adee-_0x1ff938['chars'][_0x128b11]['height'],_0x1a028d=0x39e*-0x4+0x1f*0xde+0x1*-0xc69-_0x1ff938['chars'][_0x128b11]['height']/_0x391d5c;return[_0x2b139e/_0x329e1a,_0x1a028d-_0x5a6bd2/_0x391d5c,_0x495b18/_0x329e1a,_0x1a028d-_0x5024d0/_0x391d5c];}['onEnable'](){this['_fontAsset']['autoLoad']=!(0x1afb+0x1eb4+-0x1*0x39af),this['_model']&&this['_element']['addModelTo'+'Layers'](this['_model']);}['onDisable'](){this['_fontAsset']['autoLoad']=!(-0x6ad*0x1+0x5cb+-0x1*-0xe3),this['_model']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']);}['_setStenci'+'l'](_0x220a8d){if(this['_model']){const _0x1df9f8=this['_model']['meshInstan'+'ces'];for(let _0xadeb13=0x1f3+-0x1c54+0x1*0x1a61;_0xadeb13<_0x1df9f8['length'];_0xadeb13++)_0x1df9f8[_0xadeb13]['stencilFro'+'nt']=_0x220a8d,_0x1df9f8[_0xadeb13]['stencilBac'+'k']=_0x220a8d;}}['_shouldAut'+'oFitWidth'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth'];}['_shouldAut'+'oFitHeight'](){return this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_shouldAut'+'oFit'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth']||this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_calculate'+'CharsPerTe'+'xture'](_0x41858a){const _0xd20acc={};_0x41858a===void(0x11de*0x1+0x47*-0x45+-0x41*-0x5)&&(_0x41858a=this['_symbols']['length']);for(let _0x16dd4b=0x889+0x18c7+-0xd0*0x29,_0x2d4eef=_0x41858a;_0x16dd4b<_0x2d4eef;_0x16dd4b++){const _0x38e7c1=this['_symbols'][_0x16dd4b];let _0x307933=this['_font']['data']['chars'][_0x38e7c1];_0x307933||(_0x307933=this['_font']['data']['chars']['\x20'],_0x307933||(_0x307933=this['_font']['data']['chars'][Object['keys'](this['_font']['data']['chars'])[-0xd16+-0x1*0x772+-0x36c*-0x6]]));const _0x50349f=_0x307933['map'];_0xd20acc[_0x50349f]?_0xd20acc[_0x50349f]++:_0xd20acc[_0x50349f]=0x2d*0x85+-0x1e5f+0x6ff;}return _0xd20acc;}['_updateRen'+'derRange'](){const _0x5f2b66=this['_rangeStar'+'t']===-0x173*-0x17+0x1cb2+-0x3e07*0x1?-0x18b7+-0x552+-0x2bb*-0xb:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeStar'+'t']),_0x3968c6=this['_rangeEnd']===0xb4f+-0x1*0xa7e+-0xd1?0x81*-0x49+0x4*-0x20+0x73*0x53:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeEnd']);for(let _0xd0d769=0x13b*-0x3+-0x5e2*0x2+-0x527*-0x3,_0x50b2e5=this['_meshInfo']['length'];_0xd0d769<_0x50b2e5;_0xd0d769++){const _0x43a76e=_0x5f2b66[_0xd0d769]||0xef9*0x1+-0x20f*-0x12+-0x3407,_0x5485f8=_0x3968c6[_0xd0d769]||-0xc*0x5c+-0x21b4+0x2604*0x1,_0x47d94d=this['_meshInfo'][_0xd0d769]['meshInstan'+'ce'];if(_0x47d94d){const _0x253142=_0x47d94d['mesh'];_0x253142&&(_0x253142['primitive'][0x2ac+-0x1*-0x22d4+-0x18*0x190]['base']=_0x43a76e*(-0x1*0x14d1+0x25da+-0x1*0x1106)*(-0x16*-0x16f+-0x6b2*0x1+-0x18d6),_0x253142['primitive'][-0x12b6+-0x1cad+-0x6c5*-0x7]['count']=(_0x5485f8-_0x43a76e)*(0xdc8+-0x7*-0x175+-0x17f8)*(-0x1002+0x25cf+-0x15cb));}}}set['text'](_0x4d7ffe){this['_i18nKey']=null;const _0x115b8b=_0x4d7ffe!=null&&_0x4d7ffe['toString']()||'';this['_setText'](_0x115b8b);}get['text'](){return this['_text'];}set['key'](_0x57c8f7){const _0x3df637=_0x57c8f7!==null?_0x57c8f7['toString']():null;this['_i18nKey']!==_0x3df637&&(this['_i18nKey']=_0x3df637,_0x3df637?(this['_fontAsset']['disableLoc'+'alization']=!(0x5*-0x353+0x32d+-0xd73*-0x1),this['_resetLoca'+'lizedText']()):this['_fontAsset']['disableLoc'+'alization']=!(0x9de+0x394+0x1*-0xd72));}get['key'](){return this['_i18nKey'];}set['color'](_0x90faa8){const _0x1f2877=_0x90faa8['r'],_0x493f01=_0x90faa8['g'],_0x14b63f=_0x90faa8['b'];if(this['_color']===_0x90faa8&&console['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t'),!(this['_color']['r']===_0x1f2877&&this['_color']['g']===_0x493f01&&this['_color']['b']===_0x14b63f)&&(this['_color']['r']=_0x1f2877,this['_color']['g']=_0x493f01,this['_color']['b']=_0x14b63f,!!this['_model'])){if(this['_symbolCol'+'ors'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_color']),this['_colorUnif'+'orm'][0x1*0x1da7+-0x1f00+-0x73*-0x3]=We['r'],this['_colorUnif'+'orm'][-0x231a+-0x2507+0x4822*0x1]=We['g'],this['_colorUnif'+'orm'][-0x1f2*-0x3+-0x22b*-0x9+0x1f3*-0xd]=We['b'];for(let _0x56179c=-0x1cfd+0x883*0x2+0xbf7,_0x330ae2=this['_model']['meshInstan'+'ces']['length'];_0x56179c<_0x330ae2;_0x56179c++)this['_model']['meshInstan'+'ces'][_0x56179c]['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}this['_element']&&this['_element']['fire']('set:color',this['_color']);}}get['color'](){return this['_color'];}set['opacity'](_0x7f2d18){if(this['_color']['a']!==_0x7f2d18&&(this['_color']['a']=_0x7f2d18,this['_model'])){for(let _0x104f81=0x1f3*0x3+0xe60*-0x1+0x887,_0x5de09d=this['_model']['meshInstan'+'ces']['length'];_0x104f81<_0x5de09d;_0x104f81++)this['_model']['meshInstan'+'ces'][_0x104f81]['setParamet'+'er']('material_o'+'pacity',_0x7f2d18);}this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x7f2d18);}get['opacity'](){return this['_color']['a'];}set['lineHeight'](_0x34de17){const _0x315814=this['_lineHeigh'+'t'];this['_lineHeigh'+'t']=_0x34de17,this['_scaledLin'+'eHeight']=_0x34de17,_0x315814!==_0x34de17&&this['_font']&&this['_updateTex'+'t']();}get['lineHeight'](){return this['_lineHeigh'+'t'];}set['wrapLines'](_0x100769){const _0x10ce7c=this['_wrapLines'];this['_wrapLines']=_0x100769,_0x10ce7c!==_0x100769&&this['_font']&&this['_updateTex'+'t']();}get['wrapLines'](){return this['_wrapLines'];}get['lines'](){return this['_lineConte'+'nts'];}set['spacing'](_0x420a91){const _0x1f9644=this['_spacing'];this['_spacing']=_0x420a91,_0x1f9644!==_0x420a91&&this['_font']&&this['_updateTex'+'t']();}get['spacing'](){return this['_spacing'];}set['fontSize'](_0x1a498b){const _0x412196=this['_fontSize'];this['_fontSize']=_0x1a498b,this['_originalF'+'ontSize']=_0x1a498b,_0x412196!==_0x1a498b&&this['_font']&&this['_updateTex'+'t']();}get['fontSize'](){return this['_fontSize'];}set['fontAsset'](_0x5ea690){this['_fontAsset']['defaultAss'+'et']=_0x5ea690;}get['fontAsset'](){return this['_fontAsset']['localizedA'+'sset'];}set['font'](_0x50ba38){let _0x56615b;if(this['_font']&&(_0x56615b=this['_font']['type'],this['_font']['off']&&this['_font']['off']('render',this['_onFontRen'+'der'],this)),this['_font']=_0x50ba38,this['_fontMinY']=0x154*0x2+0x77*-0x5+-0x55,this['_fontMaxY']=0x24ab+-0x2b*0xa3+0x4a5*-0x2,!_0x50ba38)return;const _0x51d865=this['_font']['data'];for(const _0x40ceb1 in _0x51d865['chars']){const _0x59cdac=_0x51d865['chars'][_0x40ceb1];_0x59cdac['bounds']&&(this['_fontMinY']=Math['min'](this['_fontMinY'],_0x59cdac['bounds'][-0x93d+0xb*-0x32d+0x2c2d]),this['_fontMaxY']=Math['max'](this['_fontMaxY'],_0x59cdac['bounds'][0x4*-0x335+-0x1285*-0x1+-0x5ae]));}if(this['_font']['on']&&this['_font']['on']('render',this['_onFontRen'+'der'],this),this['_fontAsset']['localizedA'+'sset']&&this['_system']['app']['assets']['get'](this['_fontAsset']['localizedA'+'sset'])['resource']!==this['_font']&&(this['_fontAsset']['defaultAss'+'et']=null),_0x50ba38['type']!==_0x56615b){const _0x273ad1=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x273ad1);}for(let _0x57ccfb=0x219f+0x2ef+-0x248e,_0x13ba67=this['_font']['textures']['length'];_0x57ccfb<_0x13ba67;_0x57ccfb++)if(!this['_meshInfo'][_0x57ccfb])this['_meshInfo'][_0x57ccfb]=new UL();else{const _0x1011d3=this['_meshInfo'][_0x57ccfb]['meshInstan'+'ce'];_0x1011d3&&(_0x1011d3['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x1011d3['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x1011d3['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x57ccfb]['width']),this['_setTextur'+'eParams'](_0x1011d3,this['_font']['textures'][_0x57ccfb]));}let _0x2951c3=!(-0x1f3b+0x25f8+-0x6bc);for(let _0x4e289e=this['_font']['textures']['length'];_0x4e289e<this['_meshInfo']['length'];_0x4e289e++)this['_meshInfo'][_0x4e289e]['meshInstan'+'ce']&&(_0x2951c3||(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),_0x2951c3=!(-0x19b4+0x2*-0x378+0x20a4)),this['_removeMes'+'hInstance'](this['_meshInfo'][_0x4e289e]['meshInstan'+'ce']));this['_meshInfo']['length']>this['_font']['textures']['length']&&(this['_meshInfo']['length']=this['_font']['textures']['length']),this['_updateTex'+'t']();}get['font'](){return this['_font'];}set['alignment'](_0x5d2951){_0x5d2951 instanceof J?this['_alignment']['set'](_0x5d2951['x'],_0x5d2951['y']):this['_alignment']['set'](_0x5d2951[-0x1a5c+0x4a3+-0x1*-0x15b9],_0x5d2951[-0xd72*-0x2+0xe3*0x16+-0x2e65]),this['_font']&&this['_updateTex'+'t']();}get['alignment'](){return this['_alignment'];}set['autoWidth'](_0x2dfc0d){const _0x5b8232=this['_autoWidth'];if(this['_autoWidth']=_0x2dfc0d,_0x2dfc0d&&Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])<-0x86a+-0x1761+0x1fcb+0.0001&&(this['_element']['width']=this['width']),_0x5b8232!==_0x2dfc0d){const _0x5465c0=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x5465c0!==this['_fontSize']&&(this['_fontSize']=_0x5465c0,this['_font']&&this['_updateTex'+'t']());}}get['autoWidth'](){return this['_autoWidth'];}set['autoHeight'](_0x5c8137){const _0x496dfc=this['_autoHeigh'+'t'];if(this['_autoHeigh'+'t']=_0x5c8137,_0x5c8137&&Math['abs'](this['_element']['anchor']['y']-this['_element']['anchor']['w'])<-0x879+0x1500+-0xc87+0.0001&&(this['_element']['height']=this['height']),_0x496dfc!==_0x5c8137){const _0x33bae0=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x33bae0!==this['_fontSize']&&(this['_fontSize']=_0x33bae0,this['_font']&&this['_updateTex'+'t']());}}get['autoHeight'](){return this['_autoHeigh'+'t'];}set['rtlReorder'](_0x37c90a){this['_rtlReorde'+'r']!==_0x37c90a&&(this['_rtlReorde'+'r']=_0x37c90a,this['_font']&&this['_updateTex'+'t']());}get['rtlReorder'](){return this['_rtlReorde'+'r'];}set['unicodeCon'+'verter'](_0x4323b2){this['_unicodeCo'+'nverter']!==_0x4323b2&&(this['_unicodeCo'+'nverter']=_0x4323b2,this['_setText'](this['_text']));}get['unicodeCon'+'verter'](){return this['_unicodeCo'+'nverter'];}get['aabb'](){if(this['_aabbDirty']){let _0x5d47f4=!(-0x22*0x6+-0xa7b*0x1+0x8*0x169);for(let _0x4d81d0=-0xe*-0x2aa+-0x779*0x1+0x5*-0x5f7;_0x4d81d0<this['_meshInfo']['length'];_0x4d81d0++)this['_meshInfo'][_0x4d81d0]['meshInstan'+'ce']&&(_0x5d47f4?this['_aabb']['add'](this['_meshInfo'][_0x4d81d0]['meshInstan'+'ce']['aabb']):(this['_aabb']['copy'](this['_meshInfo'][_0x4d81d0]['meshInstan'+'ce']['aabb']),_0x5d47f4=!(-0x35*-0x69+-0x25e5+0x1028)));this['_aabbDirty']=!(0x524+0x8*0x364+-0x2043);}return this['_aabb'];}set['outlineCol'+'or'](_0x239910){const _0x4fa3a2=_0x239910 instanceof ie?_0x239910['r']:_0x239910[-0xa07*-0x1+-0x36c*-0x6+0x1e8f*-0x1],_0x49c739=_0x239910 instanceof ie?_0x239910['g']:_0x239910[0x783*0x4+-0x14d*0x1+-0xe5f*0x2],_0x2f6975=_0x239910 instanceof ie?_0x239910['b']:_0x239910[-0x1905+-0xcad+-0x12da*-0x2],_0x45be9b=_0x239910 instanceof ie?_0x239910['a']:_0x239910[-0xae7+-0x11ad+0x1*0x1c97];if(this['_outlineCo'+'lor']===_0x239910&&console['warn']('Setting\x20el'+'ement.outl'+'ineColor\x20t'+'o\x20itself\x20w'+'ill\x20have\x20n'+'o\x20effect'),!(this['_outlineCo'+'lor']['r']===_0x4fa3a2&&this['_outlineCo'+'lor']['g']===_0x49c739&&this['_outlineCo'+'lor']['b']===_0x2f6975&&this['_outlineCo'+'lor']['a']===_0x45be9b)&&(this['_outlineCo'+'lor']['r']=_0x4fa3a2,this['_outlineCo'+'lor']['g']=_0x49c739,this['_outlineCo'+'lor']['b']=_0x2f6975,this['_outlineCo'+'lor']['a']=_0x45be9b,!!this['_model'])){if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][0xd08+-0x7*0x125+0x505*-0x1]=We['r'],this['_outlineCo'+'lorUniform'][-0x1f24+-0x1621+-0x6*-0x8e1]=We['g'],this['_outlineCo'+'lorUniform'][0xa0e+-0x1d5a+0x7*0x2c2]=We['b'],this['_outlineCo'+'lorUniform'][-0xb3c*-0x1+0x7ec+-0x1325]=We['a'];for(let _0x185d4d=-0x1d63+0x6cb+-0x788*-0x3,_0x53ead5=this['_model']['meshInstan'+'ces']['length'];_0x185d4d<_0x53ead5;_0x185d4d++)this['_model']['meshInstan'+'ces'][_0x185d4d]['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']);}this['_element']&&this['_element']['fire']('set:outlin'+'e',this['_color']);}}get['outlineCol'+'or'](){return this['_outlineCo'+'lor'];}set['outlineThi'+'ckness'](_0x481d34){const _0x397d4c=this['_outlineTh'+'ickness'];if(this['_outlineTh'+'ickness']=_0x481d34,_0x397d4c!==_0x481d34&&this['_font']){if(!this['_model'])return;if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{for(let _0x27e2e2=-0x1061+0x1f6c+-0xf0b,_0x5a2d3f=this['_model']['meshInstan'+'ces']['length'];_0x27e2e2<_0x5a2d3f;_0x27e2e2++)this['_model']['meshInstan'+'ces'][_0x27e2e2]['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']);}}}get['outlineThi'+'ckness'](){return this['_outlineTh'+'ickness'];}set['shadowColo'+'r'](_0x2e4699){const _0xea9a4f=_0x2e4699 instanceof ie?_0x2e4699['r']:_0x2e4699[-0xd34*0x1+-0x1*-0x1a1+-0x1*-0xb93],_0x3ca7f2=_0x2e4699 instanceof ie?_0x2e4699['g']:_0x2e4699[-0x1ddf+-0x1345+0x3125],_0x513c12=_0x2e4699 instanceof ie?_0x2e4699['b']:_0x2e4699[-0x5*0x50f+-0x4b*0x16+-0x12d*-0x1b],_0xc0cdbb=_0x2e4699 instanceof ie?_0x2e4699['a']:_0x2e4699[0x1ab3*-0x1+-0x194d+0x3403];if(this['_shadowCol'+'or']===_0x2e4699&&w['warn']('Setting\x20el'+'ement.shad'+'owColor\x20to'+'\x20itself\x20wi'+'ll\x20have\x20no'+'\x20effect'),!(this['_shadowCol'+'or']['r']===_0xea9a4f&&this['_shadowCol'+'or']['g']===_0x3ca7f2&&this['_shadowCol'+'or']['b']===_0x513c12&&this['_shadowCol'+'or']['a']===_0xc0cdbb)&&(this['_shadowCol'+'or']['r']=_0xea9a4f,this['_shadowCol'+'or']['g']=_0x3ca7f2,this['_shadowCol'+'or']['b']=_0x513c12,this['_shadowCol'+'or']['a']=_0xc0cdbb,!!this['_model'])){if(this['_symbolSha'+'dowParams'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][0x3fb+-0x4a*0x83+0x21e3*0x1]=We['r'],this['_shadowCol'+'orUniform'][-0x4c2+-0x21a9*-0x1+-0x3*0x9a2]=We['g'],this['_shadowCol'+'orUniform'][-0xf17*0x1+-0x1*-0x5f3+0x926*0x1]=We['b'],this['_shadowCol'+'orUniform'][0x7e+-0x77c+0x701*0x1]=We['a'];for(let _0x3c2401=0x1a73+0xc01+-0x2674,_0x5961d9=this['_model']['meshInstan'+'ces']['length'];_0x3c2401<_0x5961d9;_0x3c2401++)this['_model']['meshInstan'+'ces'][_0x3c2401]['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']);}}}get['shadowColo'+'r'](){return this['_shadowCol'+'or'];}set['shadowOffs'+'et'](_0x30e343){const _0x9b1f9a=_0x30e343 instanceof J?_0x30e343['x']:_0x30e343[0x865+-0xe68*0x1+0x39*0x1b],_0x5790c4=_0x30e343 instanceof J?_0x30e343['y']:_0x30e343[-0x1*-0x121d+-0x7f2+0x1*-0xa2a];if(!(this['_shadowOff'+'set']['x']===_0x9b1f9a&&this['_shadowOff'+'set']['y']===_0x5790c4)&&(this['_shadowOff'+'set']['set'](_0x9b1f9a,_0x5790c4),this['_font']&&this['_model'])){if(this['_symbolSha'+'dowParams'])this['_updateTex'+'t']();else for(let _0x1f9d2c=0x1*0x2117+0x664*0x5+-0x410b,_0x4c2404=this['_model']['meshInstan'+'ces']['length'];_0x1f9d2c<_0x4c2404;_0x1f9d2c++){const _0x220c53=-this['_font']['data']['info']['maps'][_0x1f9d2c]['width']/this['_font']['data']['info']['maps'][_0x1f9d2c]['height'];this['_shadowOff'+'setUniform'][0x247b+0x1517*-0x1+-0xf64]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][-0x1ace+0xc2*0x2e+-0x80d]=_0x220c53*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'],this['_model']['meshInstan'+'ces'][_0x1f9d2c]['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']);}}}get['shadowOffs'+'et'](){return this['_shadowOff'+'set'];}set['minFontSiz'+'e'](_0x4f40db){this['_minFontSi'+'ze']!==_0x4f40db&&(this['_minFontSi'+'ze']=_0x4f40db,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['minFontSiz'+'e'](){return this['_minFontSi'+'ze'];}set['maxFontSiz'+'e'](_0x5e137b){this['_maxFontSi'+'ze']!==_0x5e137b&&(this['_maxFontSi'+'ze']=_0x5e137b,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['maxFontSiz'+'e'](){return this['_maxFontSi'+'ze'];}set['autoFitWid'+'th'](_0x191d40){this['_autoFitWi'+'dth']!==_0x191d40&&(this['_autoFitWi'+'dth']=_0x191d40,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitWid'+'th'](){return this['_autoFitWi'+'dth'];}set['autoFitHei'+'ght'](_0x54ffa4){this['_autoFitHe'+'ight']!==_0x54ffa4&&(this['_autoFitHe'+'ight']=_0x54ffa4,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitHei'+'ght'](){return this['_autoFitHe'+'ight'];}set['maxLines'](_0x3e7c9e){this['_maxLines']!==_0x3e7c9e&&(_0x3e7c9e===null&&this['_maxLines']===-(0x1*-0x1b33+-0x1b95+-0xa5*-0x55)||(this['_maxLines']=_0x3e7c9e===null?-(-0xcc0+0xe00+-0xb*0x1d):_0x3e7c9e,this['font']&&this['_wrapLines']&&this['_updateTex'+'t']()));}get['maxLines'](){return this['_maxLines'];}set['enableMark'+'up'](_0x33140c){if(_0x33140c=!!_0x33140c,this['_enableMar'+'kup']===_0x33140c)return;this['_enableMar'+'kup']=_0x33140c,this['font']&&this['_updateTex'+'t']();const _0x516e02=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x516e02);}get['enableMark'+'up'](){return this['_enableMar'+'kup'];}get['symbols'](){return this['_symbols'];}get['symbolColo'+'rs'](){return this['_symbolCol'+'ors']===null?null:this['_symbolCol'+'ors']['map'](function(_0x2a2f71){return this['_colorPale'+'tte']['slice'](_0x2a2f71*(0xf41+0x82e*0x4+-0x36d*0xe),_0x2a2f71*(-0x1229*-0x1+-0x742*-0x5+-0x68*0x86)+(0x1e6c+-0x1*0x50e+-0x195b));},this);}get['symbolOutl'+'ineParams'](){return this['_symbolOut'+'lineParams']===null?null:this['_symbolOut'+'lineParams']['map'](function(_0x10a155){return this['_outlinePa'+'lette']['slice'](_0x10a155*(0x1c42+-0x1b60+0x11*-0xd),_0x10a155*(-0xb26*-0x3+-0x20af*0x1+-0xbe)+(-0x98*-0x23+0x1*-0x1003+-0x4c0));},this);}get['symbolShad'+'owParams'](){return this['_symbolSha'+'dowParams']===null?null:this['_symbolSha'+'dowParams']['map'](function(_0x20a531){return this['_shadowPal'+'ette']['slice'](_0x20a531*(-0x3*0x217+-0x2384+0x29cf),_0x20a531*(0x65+0x4*-0x184+-0x5b1*-0x1)+(-0x1e39+0x903+-0x3*-0x714));},this);}get['rtl'](){return this['_rtl'];}set['rangeStart'](_0x10b166){_0x10b166=Math['max'](0x1b*-0x36+-0x2a9*0x2+0xb04,Math['min'](_0x10b166,this['_symbols']['length'])),_0x10b166!==this['_rangeStar'+'t']&&(this['_rangeStar'+'t']=_0x10b166,this['_updateRen'+'derRange']());}get['rangeStart'](){return this['_rangeStar'+'t'];}set['rangeEnd'](_0x1f489c){_0x1f489c=Math['max'](this['_rangeStar'+'t'],Math['min'](_0x1f489c,this['_symbols']['length'])),_0x1f489c!==this['_rangeEnd']&&(this['_rangeEnd']=_0x1f489c,this['_updateRen'+'derRange']());}get['rangeEnd'](){return this['_rangeEnd'];}}const tf=new D(),Tg=new te(),Pi=new D(),qL=new D(),ws=new te(),dc=new te(),fc=new te(),za=new te();class hs extends we{constructor(_0x241caf,_0x556735){super(_0x241caf,_0x556735),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_beingInit'+'ialized']=!(0x254f+0x3a+-0x2588),this['_anchor']=new re(),this['_localAnch'+'or']=new re(),this['_pivot']=new J(),this['_width']=this['_calculate'+'dWidth']=-0x2*0xaed+-0x1*-0x21b5+-0xbbb,this['_height']=this['_calculate'+'dHeight']=-0x110d+-0x655*0x4+-0x2a81*-0x1,this['_margin']=new re(0x2663+0x6a1+0xac*-0x43,-0x2193+-0x1ce4+-0x1*-0x3e77,-(-0x1*0xa75+0x3*0x67b+-0x8dc),-(0x95f*0x3+-0x3*0x3ea+-0x103f)),this['_modelTran'+'sform']=new te(),this['_screenToW'+'orld']=new te(),this['_anchorTra'+'nsform']=new te(),this['_anchorDir'+'ty']=!(-0x22b4*0x1+0x46b+0x1e49),this['_parentWor'+'ldTransfor'+'m']=new te(),this['_screenTra'+'nsform']=new te(),this['_screenCor'+'ners']=[new D(),new D(),new D(),new D()],this['_canvasCor'+'ners']=[new J(),new J(),new J(),new J()],this['_worldCorn'+'ers']=[new D(),new D(),new D(),new D()],this['_cornersDi'+'rty']=!(0xf9c+-0x645*0x5+0xfbd*0x1),this['_canvasCor'+'nersDirty']=!(-0x15b*0x1a+0x98*-0x1c+0x33de),this['_worldCorn'+'ersDirty']=!(-0x4b*-0x6+0x1196+-0x1358*0x1),this['entity']['on']('insert',this['_onInsert'],this),this['_patch'](),this['screen']=null,this['_type']=Lc,this['_image']=null,this['_text']=null,this['_group']=null,this['_drawOrder']=0x6*0x565+0x1648+0xaee*-0x5,this['_fitMode']=Rc,this['_useInput']=!(0x123a+0x7ce+-0x1a07*0x1),this['_layers']=[Sl],this['_addedMode'+'ls']=[],this['_batchGrou'+'pId']=-(0x150f+0x1*-0x200a+0xafc),this['_batchGrou'+'p']=null,this['_offsetRea'+'dAt']=-0x316*-0x8+0x11*-0x109+0xf*-0x79,this['_maskOffse'+'t']=-0x765+0x2*0x100c+0x18b3*-0x1+0.5,this['_maskedBy']=null);}get['data'](){const _0x4e0f56=this['system']['store'][this['entity']['getGuid']()];return _0x4e0f56?_0x4e0f56['data']:null;}set['enabled'](_0x492ac3){const _0xdbd37=this['data'],_0x3aad42=_0xdbd37['enabled'];_0xdbd37['enabled']=_0x492ac3,this['fire']('set','enabled',_0x3aad42,_0x492ac3);}get['enabled'](){return this['data']['enabled'];}get['_absLeft'](){return this['_localAnch'+'or']['x']+this['_margin']['x'];}get['_absRight'](){return this['_localAnch'+'or']['z']-this['_margin']['z'];}get['_absTop'](){return this['_localAnch'+'or']['w']-this['_margin']['w'];}get['_absBottom'](){return this['_localAnch'+'or']['y']+this['_margin']['y'];}get['_hasSplitA'+'nchorsX'](){return Math['abs'](this['_anchor']['x']-this['_anchor']['z'])>0x1*-0xaa3+0x1b17+-0x1074+0.001;}get['_hasSplitA'+'nchorsY'](){return Math['abs'](this['_anchor']['y']-this['_anchor']['w'])>0xcff*-0x2+-0x4b*-0x59+-0x7*0x3+0.001;}get['aabb'](){return this['_image']?this['_image']['aabb']:this['_text']?this['_text']['aabb']:null;}set['anchor'](_0x153fa3){_0x153fa3 instanceof re?this['_anchor']['copy'](_0x153fa3):this['_anchor']['set'](..._0x153fa3),!this['entity']['_parent']&&!this['screen']?this['_calculate'+'LocalAncho'+'rs']():this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['_anchorDir'+'ty']=!(-0x1*0x741+-0x47*0x8a+0x3*0xf2d),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:anchor',this['_anchor']);}get['anchor'](){return this['_anchor'];}set['batchGroup'+'Id'](_0x30ec92){var _0x5b16fc,_0x56c7cb;this['_batchGrou'+'pId']!==_0x30ec92&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=-0x236a+0x4ad+-0x1ebd*-0x1&&((_0x5b16fc=this['system']['app']['batcher'])==null||_0x5b16fc['remove'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x30ec92>=-0x1*0x1439+0x1290+0x1a9&&((_0x56c7cb=this['system']['app']['batcher'])==null||_0x56c7cb['insert'](St['ELEMENT'],_0x30ec92,this['entity'])),_0x30ec92<0xdad+0x2*0x83f+-0x1e2b&&this['_batchGrou'+'pId']>=-0x6*0x2bf+-0x1dbc+-0x46*-0xa9&&this['enabled']&&this['entity']['enabled']&&(this['_image']&&this['_image']['_renderabl'+'e']['model']?this['addModelTo'+'Layers'](this['_image']['_renderabl'+'e']['model']):this['_text']&&this['_text']['_model']&&this['addModelTo'+'Layers'](this['_text']['_model'])),this['_batchGrou'+'pId']=_0x30ec92);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['bottom'](_0x126a21){this['_margin']['y']=_0x126a21;const _0xb9c791=this['entity']['getLocalPo'+'sition'](),_0x25940c=this['_absTop'],_0x4ec0e1=this['_localAnch'+'or']['y']+_0x126a21;this['_setHeight'](_0x25940c-_0x4ec0e1),_0xb9c791['y']=_0x126a21+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0xb9c791);}get['bottom'](){return this['_margin']['y'];}set['calculated'+'Width'](_0x2cddb4){this['_setCalcul'+'atedWidth'](_0x2cddb4,!(-0x1710+0xa54+0xcbc));}get['calculated'+'Width'](){return this['_calculate'+'dWidth'];}set['calculated'+'Height'](_0x2a6acf){this['_setCalcul'+'atedHeight'](_0x2a6acf,!(0x314*-0x3+0x217b+0x183f*-0x1));}get['calculated'+'Height'](){return this['_calculate'+'dHeight'];}get['canvasCorn'+'ers'](){if(!this['_canvasCor'+'nersDirty']||!this['screen']||!this['screen']['screen']['screenSpac'+'e'])return this['_canvasCor'+'ners'];const _0x420609=this['system']['app']['graphicsDe'+'vice'],_0x454c2c=this['screenCorn'+'ers'],_0x43534b=_0x420609['canvas']['clientWidt'+'h']/_0x420609['width'],_0x22ab0f=_0x420609['canvas']['clientHeig'+'ht']/_0x420609['height'];for(let _0x38d79f=0x26fd+-0x1a67*0x1+-0xc96;_0x38d79f<0x2f7+0x1bc3+-0x1eb6*0x1;_0x38d79f++)this['_canvasCor'+'ners'][_0x38d79f]['set'](_0x454c2c[_0x38d79f]['x']*_0x43534b,(_0x420609['height']-_0x454c2c[_0x38d79f]['y'])*_0x22ab0f);return this['_canvasCor'+'nersDirty']=!(0x29*0x16+0x801+-0xb86),this['_canvasCor'+'ners'];}set['drawOrder'](_0x2a0c83){let _0x5a65a0=0x1cb0+0x1*-0xff6+-0xcba;this['screen']&&(_0x5a65a0=this['screen']['screen']['priority']),_0x2a0c83>0xce06b6+0x11b33ab+-0xe93a62&&(w['warn']('Element.dr'+'awOrder\x20la'+'rger\x20than\x20'+'max\x20size\x20o'+'f:\x201677721'+'5'),_0x2a0c83=-0x2*-0x1b82d8+0x1f74958+-0x12e4f09),this['_drawOrder']=(_0x5a65a0<<-0x96b*0x2+0xe*-0x62+0x184a)+_0x2a0c83,this['fire']('set:drawor'+'der',this['_drawOrder']);}get['drawOrder'](){return this['_drawOrder'];}set['height'](_0x2c6c90){this['_height']=_0x2c6c90,this['_hasSplitA'+'nchorsY']||this['_setCalcul'+'atedHeight'](_0x2c6c90,!(-0x1*-0x16d9+-0x21d5*0x1+0x57e*0x2)),this['fire']('set:height',this['_height']);}get['height'](){return this['_height'];}set['layers'](_0x3423d1){if(this['_addedMode'+'ls']['length'])for(let _0x5754fb=0x3*-0x8d3+0x5de+-0x149b*-0x1;_0x5754fb<this['_layers']['length'];_0x5754fb++){const _0x45430c=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x5754fb]);if(_0x45430c){for(let _0x53c28d=-0x8a6+0x7ab*-0x5+0x2efd;_0x53c28d<this['_addedMode'+'ls']['length'];_0x53c28d++)_0x45430c['removeMesh'+'Instances'](this['_addedMode'+'ls'][_0x53c28d]['meshInstan'+'ces']);}}if(this['_layers']=_0x3423d1,!(!this['enabled']||!this['entity']['enabled']||!this['_addedMode'+'ls']['length']))for(let _0x1db0c3=-0x75e+-0x2239+-0x27*-0x111;_0x1db0c3<this['_layers']['length'];_0x1db0c3++){const _0x19db30=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x1db0c3]);if(_0x19db30){for(let _0x567dc5=-0x2438+0x109*-0x2+-0x2f2*-0xd;_0x567dc5<this['_addedMode'+'ls']['length'];_0x567dc5++)_0x19db30['addMeshIns'+'tances'](this['_addedMode'+'ls'][_0x567dc5]['meshInstan'+'ces']);}}}get['layers'](){return this['_layers'];}set['left'](_0x186e62){this['_margin']['x']=_0x186e62;const _0x367a9f=this['entity']['getLocalPo'+'sition'](),_0x3bc6c2=this['_absRight'],_0x297381=this['_localAnch'+'or']['x']+_0x186e62;this['_setWidth'](_0x3bc6c2-_0x297381),_0x367a9f['x']=_0x186e62+this['_calculate'+'dWidth']*this['_pivot']['x'],this['entity']['setLocalPo'+'sition'](_0x367a9f);}get['left'](){return this['_margin']['x'];}set['margin'](_0x842dd5){this['_margin']['copy'](_0x842dd5),this['_calculate'+'Size'](!(0xfb5+0x254e+-0x3503),!(-0x1e59+0x27*-0xf3+0x435e)),this['fire']('set:margin',this['_margin']);}get['margin'](){return this['_margin'];}get['maskedBy'](){return this['_maskedBy'];}set['pivot'](_0x4ad085){const {pivot:_0x337001,margin:_0x44e9d4}=this,_0x50a886=_0x337001['x'],_0x5de631=_0x337001['y'];_0x4ad085 instanceof J?_0x337001['copy'](_0x4ad085):_0x337001['set'](..._0x4ad085);const _0x4c8c33=_0x44e9d4['x']+_0x44e9d4['z'],_0x27e651=_0x337001['x']-_0x50a886;_0x44e9d4['x']+=_0x4c8c33*_0x27e651,_0x44e9d4['z']-=_0x4c8c33*_0x27e651;const _0x2f43f1=_0x44e9d4['y']+_0x44e9d4['w'],_0x360344=_0x337001['y']-_0x5de631;_0x44e9d4['y']+=_0x2f43f1*_0x360344,_0x44e9d4['w']-=_0x2f43f1*_0x360344,this['_anchorDir'+'ty']=!(0xac*0x8+-0xcc*0x31+0x1*0x21ac),this['_cornersDi'+'rty']=!(-0x6d2+-0xdd*0xc+0x112e),this['_worldCorn'+'ersDirty']=!(-0x3a1*-0x1+0x21*0x49+-0xd0a),this['_calculate'+'Size'](!(-0x1879+0x3fa*0x7+-0x35c),!(0x103d*-0x1+0x8f5*0x1+0x749)),this['_flagChild'+'renAsDirty'](),this['fire']('set:pivot',_0x337001);}get['pivot'](){return this['_pivot'];}set['right'](_0x56dd4e){this['_margin']['z']=_0x56dd4e;const _0x7f9fcd=this['entity']['getLocalPo'+'sition'](),_0x337387=this['_absLeft'],_0x5c89e3=this['_localAnch'+'or']['z']-_0x56dd4e;this['_setWidth'](_0x5c89e3-_0x337387),_0x7f9fcd['x']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-_0x56dd4e-this['_calculate'+'dWidth']*(-0x13c7*0x1+0x25f6+0x122e*-0x1-this['_pivot']['x']),this['entity']['setLocalPo'+'sition'](_0x7f9fcd);}get['right'](){return this['_margin']['z'];}get['screenCorn'+'ers'](){if(!this['_cornersDi'+'rty']||!this['screen'])return this['_screenCor'+'ners'];const _0x43027b=this['entity']['parent']&&this['entity']['parent']['element']&&this['entity']['parent']['element']['screenCorn'+'ers'][0x23ba+-0x1*0x2665+0x2ab];this['_screenCor'+'ners'][-0x1ad*-0x4+-0xc*-0x179+-0x1860]['set'](this['_absLeft'],this['_absBottom'],-0xf2*0x21+0x41*-0xb+0x21fd),this['_screenCor'+'ners'][0x1705+0xc*-0x22b+0x3*0x100]['set'](this['_absRight'],this['_absBottom'],-0x1*-0x15d5+-0x1*0x1520+0xb5*-0x1),this['_screenCor'+'ners'][0x2*-0x8db+0x76*0x10+0x4*0x296]['set'](this['_absRight'],this['_absTop'],0x19aa+-0xd04+-0xca6),this['_screenCor'+'ners'][0x1539+0x27*0x2d+-0x1c11]['set'](this['_absLeft'],this['_absTop'],-0x118c+0x1e3+0xfa9);const _0x241a6a=this['screen']['screen']['screenSpac'+'e'];for(let _0x2c815f=-0x465+-0x1*-0xbcb+-0x766;_0x2c815f<0x1*0x1819+-0x15c6+-0x24f;_0x2c815f++)this['_screenTra'+'nsform']['transformP'+'oint'](this['_screenCor'+'ners'][_0x2c815f],this['_screenCor'+'ners'][_0x2c815f]),_0x241a6a&&this['_screenCor'+'ners'][_0x2c815f]['mulScalar'](this['screen']['screen']['scale']),_0x43027b&&this['_screenCor'+'ners'][_0x2c815f]['add'](_0x43027b);return this['_cornersDi'+'rty']=!(0x9d*0x11+0x8*0x35+-0xc14),this['_canvasCor'+'nersDirty']=!(-0x1*0x24bb+0x5d8*-0x6+0x47cb),this['_worldCorn'+'ersDirty']=!(-0x1c94+0x1d1+-0x1ac3*-0x1),this['_screenCor'+'ners'];}get['textWidth'](){return this['_text']?this['_text']['width']:0x7b+-0x35*0x4+0x59;}get['textHeight'](){return this['_text']?this['_text']['height']:-0x1d54+0x195b*-0x1+0x1*0x36af;}set['top'](_0x3ea572){this['_margin']['w']=_0x3ea572;const _0x1565b9=this['entity']['getLocalPo'+'sition'](),_0x22a6ce=this['_absBottom'],_0x3d1133=this['_localAnch'+'or']['w']-_0x3ea572;this['_setHeight'](_0x3d1133-_0x22a6ce),_0x1565b9['y']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-_0x3ea572-this['_calculate'+'dHeight']*(0x1eb*0xd+-0x5*0x6c3+-0x1*-0x8e1-this['_pivot']['y']),this['entity']['setLocalPo'+'sition'](_0x1565b9);}get['top'](){return this['_margin']['w'];}set['type'](_0x26d0bf){_0x26d0bf!==this['_type']&&(this['_type']=_0x26d0bf,this['_image']&&(this['_image']['destroy'](),this['_image']=null),this['_text']&&(this['_text']['destroy'](),this['_text']=null),_0x26d0bf===tu?this['_image']=new CL(this):_0x26d0bf===fv&&(this['_text']=new XL(this)));}get['type'](){return this['_type'];}set['useInput'](_0xf1a3ae){this['_useInput']!==_0xf1a3ae&&(this['_useInput']=_0xf1a3ae,this['system']['app']['elementInp'+'ut']?_0xf1a3ae?this['enabled']&&this['entity']['enabled']&&this['system']['app']['elementInp'+'ut']['addElement'](this):this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this):this['_useInput']===!(-0xc30+-0xa1f*0x3+-0x2a8d*-0x1)&&w['warn']('Elements\x20w'+'ill\x20not\x20ge'+'t\x20any\x20inpu'+'t\x20events\x20b'+'ecause\x20thi'+'s.system.a'+'pp.element'+'Input\x20is\x20n'+'ot\x20created'),this['fire']('set:useInp'+'ut',_0xf1a3ae));}get['useInput'](){return this['_useInput'];}set['fitMode'](_0x17ce6f){this['_fitMode']=_0x17ce6f,this['_calculate'+'Size'](!(0x1bc3+-0x56e+0x1*-0x1655),!(0xbc8+0x1*-0x917+-0x2b1)),this['_image']&&this['_image']['refreshMes'+'h']();}get['fitMode'](){return this['_fitMode'];}set['width'](_0x49d8b6){this['_width']=_0x49d8b6,this['_hasSplitA'+'nchorsX']||this['_setCalcul'+'atedWidth'](_0x49d8b6,!(-0x2534+-0x1467+0x1*0x399b)),this['fire']('set:width',this['_width']);}get['width'](){return this['_width'];}get['worldCorne'+'rs'](){if(!this['_worldCorn'+'ersDirty'])return this['_worldCorn'+'ers'];if(this['screen']){const _0x2849ca=this['screenCorn'+'ers'];if(!this['screen']['screen']['screenSpac'+'e']){ws['copy'](this['screen']['screen']['_screenMat'+'rix']),ws['data'][-0x3*0x4e3+0x429*0x3+0x1*0x23b]=-ws['data'][-0xd8e+0x521*-0x6+-0x15*-0x21d],ws['mul2'](this['screen']['getWorldTr'+'ansform'](),ws);for(let _0x41e44c=0x4*-0x70a+-0x1223+0x2e4b;_0x41e44c<0x54b+0x6*0x679+-0x2c1d;_0x41e44c++)ws['transformP'+'oint'](_0x2849ca[_0x41e44c],this['_worldCorn'+'ers'][_0x41e44c]);}}else{const _0x22051e=this['entity']['getLocalPo'+'sition']();ws['setTransla'+'te'](-_0x22051e['x'],-_0x22051e['y'],-_0x22051e['z']),dc['setTRS'](D['ZERO'],this['entity']['getLocalRo'+'tation'](),this['entity']['getLocalSc'+'ale']()),fc['setTransla'+'te'](_0x22051e['x'],_0x22051e['y'],_0x22051e['z']);const _0x370076=this['entity']['parent']?this['entity']['parent']:this['entity'];za['copy'](_0x370076['getWorldTr'+'ansform']()),za['mul'](fc)['mul'](dc)['mul'](ws),Pi['set'](_0x22051e['x']-this['pivot']['x']*this['calculated'+'Width'],_0x22051e['y']-this['pivot']['y']*this['calculated'+'Height'],_0x22051e['z']),za['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][-0x1e60+0x1b2a*-0x1+-0x1eb*-0x1e]),Pi['set'](_0x22051e['x']+(-0x124e+-0x1acd+0x2*0x168e-this['pivot']['x'])*this['calculated'+'Width'],_0x22051e['y']-this['pivot']['y']*this['calculated'+'Height'],_0x22051e['z']),za['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][-0x1*-0x431+-0x14e3+0x10b3]),Pi['set'](_0x22051e['x']+(-0x2a*-0x9+-0x4*-0x6ba+-0x1c61-this['pivot']['x'])*this['calculated'+'Width'],_0x22051e['y']+(-0x2e*0xbf+-0x2*-0x349+-0xcb*-0x23-this['pivot']['y'])*this['calculated'+'Height'],_0x22051e['z']),za['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][-0xec2*-0x2+0x8*0x43f+-0xcb2*0x5]),Pi['set'](_0x22051e['x']-this['pivot']['x']*this['calculated'+'Width'],_0x22051e['y']+(0xb1f+-0x19df+-0x4eb*-0x3-this['pivot']['y'])*this['calculated'+'Height'],_0x22051e['z']),za['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][-0x5*-0x61b+0x692+-0x2516]);}return this['_worldCorn'+'ersDirty']=!(-0xd37+-0x3*0x65b+0x2049),this['_worldCorn'+'ers'];}set['fontSize'](_0x3b7115){this['_setValue']('fontSize',_0x3b7115);}get['fontSize'](){return this['_text']?this['_text']['fontSize']:null;}set['minFontSiz'+'e'](_0x4e523d){this['_setValue']('minFontSiz'+'e',_0x4e523d);}get['minFontSiz'+'e'](){return this['_text']?this['_text']['minFontSiz'+'e']:null;}set['maxFontSiz'+'e'](_0x17f10a){this['_setValue']('maxFontSiz'+'e',_0x17f10a);}get['maxFontSiz'+'e'](){return this['_text']?this['_text']['maxFontSiz'+'e']:null;}set['maxLines'](_0x4d4171){this['_setValue']('maxLines',_0x4d4171);}get['maxLines'](){return this['_text']?this['_text']['maxLines']:null;}set['autoFitWid'+'th'](_0x1cefd1){this['_setValue']('autoFitWid'+'th',_0x1cefd1);}get['autoFitWid'+'th'](){return this['_text']?this['_text']['autoFitWid'+'th']:null;}set['autoFitHei'+'ght'](_0x3ec2ac){this['_setValue']('autoFitHei'+'ght',_0x3ec2ac);}get['autoFitHei'+'ght'](){return this['_text']?this['_text']['autoFitHei'+'ght']:null;}set['color'](_0x2815d4){this['_setValue']('color',_0x2815d4);}get['color'](){return this['_text']?this['_text']['color']:this['_image']?this['_image']['color']:null;}set['font'](_0x4cbcd6){this['_setValue']('font',_0x4cbcd6);}get['font'](){return this['_text']?this['_text']['font']:null;}set['fontAsset'](_0xd6c4c8){this['_setValue']('fontAsset',_0xd6c4c8);}get['fontAsset'](){return this['_text']&&typeof this['_text']['fontAsset']=='number'?this['_text']['fontAsset']:null;}set['spacing'](_0x137403){this['_setValue']('spacing',_0x137403);}get['spacing'](){return this['_text']?this['_text']['spacing']:null;}set['lineHeight'](_0x1fd020){this['_setValue']('lineHeight',_0x1fd020);}get['lineHeight'](){return this['_text']?this['_text']['lineHeight']:null;}set['wrapLines'](_0x5aa0f7){this['_setValue']('wrapLines',_0x5aa0f7);}get['wrapLines'](){return this['_text']?this['_text']['wrapLines']:null;}set['lines'](_0x179c04){this['_setValue']('lines',_0x179c04);}get['lines'](){return this['_text']?this['_text']['lines']:null;}set['alignment'](_0x288ded){this['_setValue']('alignment',_0x288ded);}get['alignment'](){return this['_text']?this['_text']['alignment']:null;}set['autoWidth'](_0x576771){this['_setValue']('autoWidth',_0x576771);}get['autoWidth'](){return this['_text']?this['_text']['autoWidth']:null;}set['autoHeight'](_0x58aceb){this['_setValue']('autoHeight',_0x58aceb);}get['autoHeight'](){return this['_text']?this['_text']['autoHeight']:null;}set['rtlReorder'](_0x546448){this['_setValue']('rtlReorder',_0x546448);}get['rtlReorder'](){return this['_text']?this['_text']['rtlReorder']:null;}set['unicodeCon'+'verter'](_0x462a42){this['_setValue']('unicodeCon'+'verter',_0x462a42);}get['unicodeCon'+'verter'](){return this['_text']?this['_text']['unicodeCon'+'verter']:null;}set['text'](_0xc3166){this['_setValue']('text',_0xc3166);}get['text'](){return this['_text']?this['_text']['text']:null;}set['key'](_0x5f4e40){this['_setValue']('key',_0x5f4e40);}get['key'](){return this['_text']?this['_text']['key']:null;}set['texture'](_0xad5136){this['_setValue']('texture',_0xad5136);}get['texture'](){return this['_image']?this['_image']['texture']:null;}set['textureAss'+'et'](_0x18f76a){this['_setValue']('textureAss'+'et',_0x18f76a);}get['textureAss'+'et'](){return this['_image']?this['_image']['textureAss'+'et']:null;}set['material'](_0x833eb6){this['_setValue']('material',_0x833eb6);}get['material'](){return this['_image']?this['_image']['material']:null;}set['materialAs'+'set'](_0xef4c75){this['_setValue']('materialAs'+'set',_0xef4c75);}get['materialAs'+'set'](){return this['_image']?this['_image']['materialAs'+'set']:null;}set['sprite'](_0x3cf68f){this['_setValue']('sprite',_0x3cf68f);}get['sprite'](){return this['_image']?this['_image']['sprite']:null;}set['spriteAsse'+'t'](_0x46e179){this['_setValue']('spriteAsse'+'t',_0x46e179);}get['spriteAsse'+'t'](){return this['_image']?this['_image']['spriteAsse'+'t']:null;}set['spriteFram'+'e'](_0x31a094){this['_setValue']('spriteFram'+'e',_0x31a094);}get['spriteFram'+'e'](){return this['_image']?this['_image']['spriteFram'+'e']:null;}set['pixelsPerU'+'nit'](_0x7d5a7){this['_setValue']('pixelsPerU'+'nit',_0x7d5a7);}get['pixelsPerU'+'nit'](){return this['_image']?this['_image']['pixelsPerU'+'nit']:null;}set['opacity'](_0x1f7bf5){this['_setValue']('opacity',_0x1f7bf5);}get['opacity'](){return this['_text']?this['_text']['opacity']:this['_image']?this['_image']['opacity']:null;}set['rect'](_0x3ae250){this['_setValue']('rect',_0x3ae250);}get['rect'](){return this['_image']?this['_image']['rect']:null;}set['mask'](_0x1ad793){this['_setValue']('mask',_0x1ad793);}get['mask'](){return this['_image']?this['_image']['mask']:null;}set['outlineCol'+'or'](_0x4c54ff){this['_setValue']('outlineCol'+'or',_0x4c54ff);}get['outlineCol'+'or'](){return this['_text']?this['_text']['outlineCol'+'or']:null;}set['outlineThi'+'ckness'](_0x3663ba){this['_setValue']('outlineThi'+'ckness',_0x3663ba);}get['outlineThi'+'ckness'](){return this['_text']?this['_text']['outlineThi'+'ckness']:null;}set['shadowColo'+'r'](_0x46ac39){this['_setValue']('shadowColo'+'r',_0x46ac39);}get['shadowColo'+'r'](){return this['_text']?this['_text']['shadowColo'+'r']:null;}set['shadowOffs'+'et'](_0x33fe67){this['_setValue']('shadowOffs'+'et',_0x33fe67);}get['shadowOffs'+'et'](){return this['_text']?this['_text']['shadowOffs'+'et']:null;}set['enableMark'+'up'](_0x557adc){this['_setValue']('enableMark'+'up',_0x557adc);}get['enableMark'+'up'](){return this['_text']?this['_text']['enableMark'+'up']:null;}set['rangeStart'](_0x287389){this['_setValue']('rangeStart',_0x287389);}get['rangeStart'](){return this['_text']?this['_text']['rangeStart']:null;}set['rangeEnd'](_0x2cf3d6){this['_setValue']('rangeEnd',_0x2cf3d6);}get['rangeEnd'](){return this['_text']?this['_text']['rangeEnd']:null;}['_setValue'](_0x5cb0c0,_0x1e1eb0){this['_text']?(this['_text'][_0x5cb0c0]!==_0x1e1eb0&&this['_dirtyBatc'+'h'](),this['_text'][_0x5cb0c0]=_0x1e1eb0):this['_image']&&(this['_image'][_0x5cb0c0]!==_0x1e1eb0&&this['_dirtyBatc'+'h'](),this['_image'][_0x5cb0c0]=_0x1e1eb0);}['_patch'](){this['entity']['_sync']=this['_sync'],this['entity']['setPositio'+'n']=this['_setPositi'+'on'],this['entity']['setLocalPo'+'sition']=this['_setLocalP'+'osition'];}['_unpatch'](){this['entity']['_sync']=lt['prototype']['_sync'],this['entity']['setPositio'+'n']=lt['prototype']['setPositio'+'n'],this['entity']['setLocalPo'+'sition']=lt['prototype']['setLocalPo'+'sition'];}['_setPositi'+'on'](_0x160c02,_0x3d19a3,_0x5411b0){if(!this['element']['screen']){lt['prototype']['setPositio'+'n']['call'](this,_0x160c02,_0x3d19a3,_0x5411b0);return;}_0x160c02 instanceof D?tf['copy'](_0x160c02):tf['set'](_0x160c02,_0x3d19a3,_0x5411b0),this['getWorldTr'+'ansform'](),Tg['copy'](this['element']['_screenToW'+'orld'])['invert'](),Tg['transformP'+'oint'](tf,this['localPosit'+'ion']),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_setLocalP'+'osition'](_0x32ece7,_0x2a12a2,_0x2c3991){_0x32ece7 instanceof D?this['localPosit'+'ion']['copy'](_0x32ece7):this['localPosit'+'ion']['set'](_0x32ece7,_0x2a12a2,_0x2c3991);const _0x14f475=this['element'],_0x2544f8=this['localPosit'+'ion'],_0x172029=_0x14f475['_pivot'];_0x14f475['_margin']['x']=_0x2544f8['x']-_0x14f475['_calculate'+'dWidth']*_0x172029['x'],_0x14f475['_margin']['z']=_0x14f475['_localAnch'+'or']['z']-_0x14f475['_localAnch'+'or']['x']-_0x14f475['_calculate'+'dWidth']-_0x14f475['_margin']['x'],_0x14f475['_margin']['y']=_0x2544f8['y']-_0x14f475['_calculate'+'dHeight']*_0x172029['y'],_0x14f475['_margin']['w']=_0x14f475['_localAnch'+'or']['w']-_0x14f475['_localAnch'+'or']['y']-_0x14f475['_calculate'+'dHeight']-_0x14f475['_margin']['y'],this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_sync'](){const _0xb1fea1=this['element'],_0x346eef=_0xb1fea1['screen'];if(_0x346eef){if(_0xb1fea1['_anchorDir'+'ty']){let _0x3e0843=-0x1cc3+-0x57*-0x5f+0x2*-0x1c3,_0x574ed7=0x195c+-0xb6f+-0xded,_0x3b4322=-0x1160+-0x1830+0x214*0x14,_0x526c58=0x1ee4+-0x1*0x119b+-0xa*0x154;if(this['_parent']&&this['_parent']['element'])_0x3e0843=this['_parent']['element']['calculated'+'Width'],_0x574ed7=this['_parent']['element']['calculated'+'Height'],_0x3b4322=this['_parent']['element']['pivot']['x'],_0x526c58=this['_parent']['element']['pivot']['y'];else{const _0x34639a=_0x346eef['screen']['resolution'];_0x3e0843=_0x34639a['x']/_0x346eef['screen']['scale'],_0x574ed7=_0x34639a['y']/_0x346eef['screen']['scale'];}_0xb1fea1['_anchorTra'+'nsform']['setTransla'+'te'](_0x3e0843*(_0xb1fea1['anchor']['x']-_0x3b4322),-(_0x574ed7*(_0x526c58-_0xb1fea1['anchor']['y'])),-0xe*0x1b6+0x15c6+-0x117*-0x2),_0xb1fea1['_anchorDir'+'ty']=!(-0x168f+0x2119+-0xa89),_0xb1fea1['_calculate'+'LocalAncho'+'rs']();}_0xb1fea1['_sizeDirty']&&_0xb1fea1['_calculate'+'Size'](!(-0x1359+0x26ce+-0x33e*0x6),!(0x19f*0x1+0x1*0x76+-0x214));}if(this['_dirtyLoca'+'l']){this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']);const _0x291c84=this['localPosit'+'ion'],_0x58d187=_0xb1fea1['_pivot'];_0xb1fea1['_margin']['x']=_0x291c84['x']-_0xb1fea1['_calculate'+'dWidth']*_0x58d187['x'],_0xb1fea1['_margin']['z']=_0xb1fea1['_localAnch'+'or']['z']-_0xb1fea1['_localAnch'+'or']['x']-_0xb1fea1['_calculate'+'dWidth']-_0xb1fea1['_margin']['x'],_0xb1fea1['_margin']['y']=_0x291c84['y']-_0xb1fea1['_calculate'+'dHeight']*_0x58d187['y'],_0xb1fea1['_margin']['w']=_0xb1fea1['_localAnch'+'or']['w']-_0xb1fea1['_localAnch'+'or']['y']-_0xb1fea1['_calculate'+'dHeight']-_0xb1fea1['_margin']['y'],this['_dirtyLoca'+'l']=!(0x2f*-0x75+-0x3*0x76d+0x2bc3);}if(!_0x346eef){this['_dirtyWorl'+'d']&&(_0xb1fea1['_cornersDi'+'rty']=!(-0x2eb+0x1028+0xd3d*-0x1),_0xb1fea1['_canvasCor'+'nersDirty']=!(-0x316+-0x2153+0x2469),_0xb1fea1['_worldCorn'+'ersDirty']=!(-0x31*-0x83+-0xa00+0x11*-0xe3)),lt['prototype']['_sync']['call'](this);return;}if(this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['_parent']['element']?_0xb1fea1['_screenToW'+'orld']['mul2'](this['_parent']['element']['_modelTran'+'sform'],_0xb1fea1['_anchorTra'+'nsform']):_0xb1fea1['_screenToW'+'orld']['copy'](_0xb1fea1['_anchorTra'+'nsform']),_0xb1fea1['_modelTran'+'sform']['mul2'](_0xb1fea1['_screenToW'+'orld'],this['localTrans'+'form']),_0x346eef){_0xb1fea1['_screenToW'+'orld']['mul2'](_0x346eef['screen']['_screenMat'+'rix'],_0xb1fea1['_screenToW'+'orld']),_0x346eef['screen']['screenSpac'+'e']||_0xb1fea1['_screenToW'+'orld']['mul2'](_0x346eef['worldTrans'+'form'],_0xb1fea1['_screenToW'+'orld']),this['worldTrans'+'form']['mul2'](_0xb1fea1['_screenToW'+'orld'],this['localTrans'+'form']);const _0x32d347=_0xb1fea1['_parentWor'+'ldTransfor'+'m'];_0x32d347['setIdentit'+'y']();const _0x141b91=this['_parent'];_0x141b91&&_0x141b91['element']&&_0x141b91!==_0x346eef&&(ws['setTRS'](D['ZERO'],_0x141b91['getLocalRo'+'tation'](),_0x141b91['getLocalSc'+'ale']()),_0x32d347['mul2'](_0x141b91['element']['_parentWor'+'ldTransfor'+'m'],ws));const _0x54644c=Pi;_0x54644c['set'](0xb*-0x2cd+0x1*-0xcf+0x1f9e,-0x1*-0xa60+0x24b1+-0x2f11,this['localPosit'+'ion']['z']);const _0x2c1b35=qL;_0x2c1b35['set'](_0xb1fea1['_absLeft']+_0xb1fea1['_pivot']['x']*_0xb1fea1['calculated'+'Width'],_0xb1fea1['_absBottom']+_0xb1fea1['_pivot']['y']*_0xb1fea1['calculated'+'Height'],-0x1fb4+-0x1*0x2128+0x40dc),ws['setTransla'+'te'](-_0x2c1b35['x'],-_0x2c1b35['y'],-_0x2c1b35['z']),dc['setTRS'](_0x54644c,this['getLocalRo'+'tation'](),this['getLocalSc'+'ale']()),fc['setTransla'+'te'](_0x2c1b35['x'],_0x2c1b35['y'],_0x2c1b35['z']),_0xb1fea1['_screenTra'+'nsform']['mul2'](_0xb1fea1['_parentWor'+'ldTransfor'+'m'],fc)['mul'](dc)['mul'](ws),_0xb1fea1['_cornersDi'+'rty']=!(-0x111c+0x231f+-0x1203),_0xb1fea1['_canvasCor'+'nersDirty']=!(0x1fcb+0x445+-0x2410),_0xb1fea1['_worldCorn'+'ersDirty']=!(0x5*-0x727+-0x1*0x1726+0xb*0x55b);}else this['worldTrans'+'form']['copy'](_0xb1fea1['_modelTran'+'sform']);}this['_dirtyWorl'+'d']=!(0x60f+0xb9e+0x1*-0x11ac);}}['_onInsert'](_0x2eddf5){const _0x2e0a71=this['_parseUpTo'+'Screen']();this['entity']['_dirtifyWo'+'rld'](),this['_updateScr'+'een'](_0x2e0a71['screen']),this['_dirtifyMa'+'sk']();}['_dirtifyMa'+'sk'](){let _0x3c4767=this['entity'];for(;_0x3c4767;){const _0x1bef98=_0x3c4767['parent'];if((_0x1bef98===null||_0x1bef98['screen'])&&_0x3c4767['element']){(!this['system']['_prerender']||!this['system']['_prerender']['length'])&&(this['system']['_prerender']=[],this['system']['app']['once']('prerender',this['_onPrerend'+'er'],this),w['trace'](zs,'register\x20p'+'rerender'));const _0x57620b=this['system']['_prerender']['indexOf'](this['entity']);_0x57620b>=-0x10e8+0xe71*0x2+0x7*-0x1b6&&this['system']['_prerender']['splice'](_0x57620b,-0x1*-0x1e28+0xff7+-0x2e1e),this['system']['_prerender']['indexOf'](_0x3c4767)<0x4cd*0x3+0x16b+-0xfd2&&this['system']['_prerender']['push'](_0x3c4767),w['trace'](zs,'set\x20preren'+'der\x20root\x20t'+'o:\x20'+_0x3c4767['name']);}_0x3c4767=_0x1bef98;}}['_onPrerend'+'er'](){for(let _0xca2a0a=-0x426+0x2362+-0x1f3c;_0xca2a0a<this['system']['_prerender']['length'];_0xca2a0a++){const _0x5fc55a=this['system']['_prerender'][_0xca2a0a];w['trace'](zs,'prerender\x20'+'from:\x20'+_0x5fc55a['name']),_0x5fc55a['element']&&_0x5fc55a['element']['syncMask'](0xe1f+0x1e54+-0x2c72);}this['system']['_prerender']['length']=-0x1d21+0x1122+0xbff;}['_bindScree'+'n'](_0x9d3e10){_0x9d3e10['_bindEleme'+'nt'](this);}['_unbindScr'+'een'](_0x486135){_0x486135['_unbindEle'+'ment'](this);}['_updateScr'+'een'](_0x13c2b4){this['screen']&&this['screen']!==_0x13c2b4&&this['_unbindScr'+'een'](this['screen']['screen']);const _0x1c14dc=this['screen'];this['screen']=_0x13c2b4,this['screen']&&this['_bindScree'+'n'](this['screen']['screen']),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('set:screen',this['screen'],_0x1c14dc),this['_anchorDir'+'ty']=!(-0x331*0x4+0x7*-0x3bc+-0xc*-0x33e);const _0x369082=this['entity']['children'];for(let _0x782025=0x4*-0x827+0x2249+-0x1ad,_0x10669a=_0x369082['length'];_0x782025<_0x10669a;_0x782025++)_0x369082[_0x782025]['element']&&_0x369082[_0x782025]['element']['_updateScr'+'een'](_0x13c2b4);this['screen']&&this['screen']['screen']['syncDrawOr'+'der']();}['syncMask'](_0x60df9){const _0x4f8bb2=this['_parseUpTo'+'Screen']();this['_updateMas'+'k'](_0x4f8bb2['mask'],_0x60df9);}['_setMasked'+'By'](_0x5aa076){const _0x3853d8=this['_image']||this['_text'];if(_0x5aa076){const _0x4916d4=_0x5aa076['element']['_image']['_maskRef'];w['trace'](zs,'masking:\x20'+this['entity']['name']+'\x20with\x20'+_0x4916d4),_0x3853d8==null||_0x3853d8['_setStenci'+'l'](new pi({'ref':_0x4916d4,'func':Hc})),this['_maskedBy']=_0x5aa076;}else w['trace'](zs,'no\x20masking'+'\x20on:\x20'+this['entity']['name']),_0x3853d8==null||_0x3853d8['_setStenci'+'l'](null),this['_maskedBy']=null;}['_updateMas'+'k'](_0x12c51b,_0x12f987){var _0x1a5b2c,_0xfbc5e2;if(_0x12c51b){if(this['_setMasked'+'By'](_0x12c51b),this['mask']){const _0x54f94e=_0x12c51b['element']['_image']['_maskRef'],_0x2f45ac=new pi({'ref':_0x54f94e,'func':Hc,'zpass':sx});this['_image']['_setStenci'+'l'](_0x2f45ac),this['_image']['_maskRef']=_0x12f987,_0x12f987++,w['trace'](zs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+(_0x2f45ac['ref']+(-0x1*0x147+-0x44*0x34+0xf18))),w['trace'](zs,'depth++\x20to'+':\x20',_0x12f987),_0x12c51b=this['entity'];}const _0x3fdcfb=this['entity']['children'];for(let _0x22f822=-0x2*0x1022+0x4a2+-0x1ba2*-0x1,_0x57173c=_0x3fdcfb['length'];_0x22f822<_0x57173c;_0x22f822++)(_0x1a5b2c=_0x3fdcfb[_0x22f822]['element'])==null||_0x1a5b2c['_updateMas'+'k'](_0x12c51b,_0x12f987);this['mask']&&_0x12f987--;}else{if(this['_setMasked'+'By'](null),this['mask']){const _0x46fd92=new pi({'ref':_0x12f987,'func':Hi,'zpass':tx});this['_image']['_setStenci'+'l'](_0x46fd92),this['_image']['_maskRef']=_0x12f987,_0x12f987++,w['trace'](zs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+_0x46fd92['ref']),w['trace'](zs,'depth++\x20to'+':\x20',_0x12f987),_0x12c51b=this['entity'];}const _0x34699b=this['entity']['children'];for(let _0x5c25e9=-0x4d0+0x1c5*-0x15+0x29f9*0x1,_0x49e725=_0x34699b['length'];_0x5c25e9<_0x49e725;_0x5c25e9++)(_0xfbc5e2=_0x34699b[_0x5c25e9]['element'])==null||_0xfbc5e2['_updateMas'+'k'](_0x12c51b,_0x12f987);this['mask']&&_0x12f987--;}}['_parseUpTo'+'Screen'](){const _0x17e9f5={'screen':null,'mask':null};let _0x15c866=this['entity']['_parent'];for(;_0x15c866&&!_0x15c866['screen'];)_0x15c866['element']&&_0x15c866['element']['mask']&&(_0x17e9f5['mask']||(_0x17e9f5['mask']=_0x15c866)),_0x15c866=_0x15c866['parent'];return _0x15c866&&_0x15c866['screen']&&(_0x17e9f5['screen']=_0x15c866),_0x17e9f5;}['_onScreenR'+'esize'](_0x24ae3e){this['_anchorDir'+'ty']=!(-0x1f6+-0x2332+0xe8*0x29),this['_cornersDi'+'rty']=!(0x150b*-0x1+-0x346+-0x4dd*-0x5),this['_worldCorn'+'ersDirty']=!(-0x49*-0x49+0xd9a+-0xb*0x321),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('screen:set'+':resolutio'+'n',_0x24ae3e);}['_onScreenS'+'paceChange'](){this['fire']('screen:set'+':screenspa'+'ce',this['screen']['screen']['screenSpac'+'e']);}['_onScreenR'+'emove'](){this['screen']&&(this['screen']['_destroyin'+'g']?this['screen']=null:this['_updateScr'+'een'](null));}['_calculate'+'LocalAncho'+'rs'](){let _0x5a70b1=0xc61*0x2+-0x593*0x2+-0x9b4,_0x54b624=-0x9*-0xe7+0xd32*-0x1+0x8fb*0x1;const _0x9a2b24=this['entity']['_parent'];if(_0x9a2b24&&_0x9a2b24['element'])_0x5a70b1=_0x9a2b24['element']['calculated'+'Width'],_0x54b624=_0x9a2b24['element']['calculated'+'Height'];else{if(this['screen']){const _0x51f8c0=this['screen']['screen']['resolution'],_0x558d46=this['screen']['screen']['scale'];_0x5a70b1=_0x51f8c0['x']/_0x558d46,_0x54b624=_0x51f8c0['y']/_0x558d46;}}this['_localAnch'+'or']['set'](this['_anchor']['x']*_0x5a70b1,this['_anchor']['y']*_0x54b624,this['_anchor']['z']*_0x5a70b1,this['_anchor']['w']*_0x54b624);}['getOffsetP'+'osition'](_0x3437fc,_0x1930df){const _0x571b0a=this['entity']['getLocalPo'+'sition']()['clone']();return _0x571b0a['x']+=_0x3437fc,_0x571b0a['y']+=_0x1930df,this['_screenToW'+'orld']['transformP'+'oint'](_0x571b0a,_0x571b0a),_0x571b0a;}['onLayersCh'+'anged'](_0x16c6e7,_0x6327a0){this['addModelTo'+'Layers'](this['_image']?this['_image']['_renderabl'+'e']['model']:this['_text']['_model']),_0x16c6e7['off']('add',this['onLayerAdd'+'ed'],this),_0x16c6e7['off']('remove',this['onLayerRem'+'oved'],this),_0x6327a0['on']('add',this['onLayerAdd'+'ed'],this),_0x6327a0['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x26ae91){this['layers']['indexOf'](_0x26ae91['id'])<0x1b45+-0x1bd+-0x1988||(this['_image']?_0x26ae91['addMeshIns'+'tances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x26ae91['addMeshIns'+'tances'](this['_text']['_model']['meshInstan'+'ces']));}['onLayerRem'+'oved'](_0x41fc68){this['layers']['indexOf'](_0x41fc68['id'])<-0x45a+-0x12f9+-0x355*-0x7||(this['_image']?_0x41fc68['removeMesh'+'Instances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x41fc68['removeMesh'+'Instances'](this['_text']['_model']['meshInstan'+'ces']));}['onEnable'](){var _0x422e38;const _0xc0becc=this['system']['app']['scene'],_0x5c9314=_0xc0becc['layers'];this['_image']&&this['_image']['onEnable'](),this['_text']&&this['_text']['onEnable'](),this['_group']&&this['_group']['onEnable'](),this['useInput']&&this['system']['app']['elementInp'+'ut']&&this['system']['app']['elementInp'+'ut']['addElement'](this),this['_evtLayers'+'Changed']=_0xc0becc['on']('set:layers',this['onLayersCh'+'anged'],this),_0x5c9314&&(this['_evtLayerA'+'dded']=_0x5c9314['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x5c9314['on']('remove',this['onLayerRem'+'oved'],this)),this['_batchGrou'+'pId']>=-0x2e*-0x4d+-0x1d35+0xf5f&&((_0x422e38=this['system']['app']['batcher'])==null||_0x422e38['insert'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('enableelem'+'ent');}['onDisable'](){var _0x365a5b,_0x58142d,_0x1c0793,_0x367cbb;const _0x5d97ef=this['system']['app']['scene']['layers'];(_0x365a5b=this['_evtLayers'+'Changed'])==null||_0x365a5b['off'](),this['_evtLayers'+'Changed']=null,_0x5d97ef&&((_0x58142d=this['_evtLayerA'+'dded'])==null||_0x58142d['off'](),this['_evtLayerA'+'dded']=null,(_0x1c0793=this['_evtLayerR'+'emoved'])==null||_0x1c0793['off'](),this['_evtLayerR'+'emoved']=null),this['_image']&&this['_image']['onDisable'](),this['_text']&&this['_text']['onDisable'](),this['_group']&&this['_group']['onDisable'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['_batchGrou'+'pId']>=-0x45d+-0x1177+-0x16*-0xfe&&((_0x367cbb=this['system']['app']['batcher'])==null||_0x367cbb['remove'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('disableele'+'ment');}['onRemove'](){this['entity']['off']('insert',this['_onInsert'],this),this['_unpatch'](),this['_image']&&this['_image']['destroy'](),this['_text']&&this['_text']['destroy'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['screen']&&this['screen']['screen']&&(this['_unbindScr'+'een'](this['screen']['screen']),this['screen']['screen']['syncDrawOr'+'der']()),this['off']();}['_calculate'+'Size'](_0x3a0ed8,_0x4dab6f){if(!this['entity']['_parent']&&!this['screen'])return;this['_calculate'+'LocalAncho'+'rs']();const _0x5819a6=this['_absRight']-this['_absLeft'],_0x1d2e85=this['_absTop']-this['_absBottom'];_0x3a0ed8?this['_setWidth'](_0x5819a6):this['_setCalcul'+'atedWidth'](_0x5819a6,!(-0x1349*0x1+0x6*0x4b3+-0x8e8)),_0x4dab6f?this['_setHeight'](_0x1d2e85):this['_setCalcul'+'atedHeight'](_0x1d2e85,!(-0x1f09+0x1065+0xea5));const _0x6085d9=this['entity']['getLocalPo'+'sition']();_0x6085d9['x']=this['_margin']['x']+this['_calculate'+'dWidth']*this['_pivot']['x'],_0x6085d9['y']=this['_margin']['y']+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x6085d9),this['_sizeDirty']=!(0x1*0x1027+-0x2*-0x6f8+0x2*-0xf0b);}['_setWidth'](_0x26a78d){this['_width']=_0x26a78d,this['_setCalcul'+'atedWidth'](_0x26a78d,!(0x1*0x8f9+0x92f+0x60d*-0x3)),this['fire']('set:width',this['_width']);}['_setHeight'](_0x5d87ac){this['_height']=_0x5d87ac,this['_setCalcul'+'atedHeight'](_0x5d87ac,!(0x17b1+0x134f+-0x2aff)),this['fire']('set:height',this['_height']);}['_setCalcul'+'atedWidth'](_0xc6df1f,_0x5741f8){if(!(Math['abs'](_0xc6df1f-this['_calculate'+'dWidth'])<=0x1a6+0x128*0x1+-0x1*0x2ce+0.0001)){if(this['_calculate'+'dWidth']=_0xc6df1f,this['entity']['_dirtifyLo'+'cal'](),_0x5741f8){const _0x4b10aa=this['entity']['getLocalPo'+'sition'](),_0x4537ff=this['_pivot'];this['_margin']['x']=_0x4b10aa['x']-this['_calculate'+'dWidth']*_0x4537ff['x'],this['_margin']['z']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-this['_calculate'+'dWidth']-this['_margin']['x'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedWidth',this['_calculate'+'dWidth']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_setCalcul'+'atedHeight'](_0x3cf812,_0x25c4a5){if(!(Math['abs'](_0x3cf812-this['_calculate'+'dHeight'])<=-0x23bc+-0x1364+0x3720+0.0001)){if(this['_calculate'+'dHeight']=_0x3cf812,this['entity']['_dirtifyLo'+'cal'](),_0x25c4a5){const _0xa1e69b=this['entity']['getLocalPo'+'sition'](),_0x181745=this['_pivot'];this['_margin']['y']=_0xa1e69b['y']-this['_calculate'+'dHeight']*_0x181745['y'],this['_margin']['w']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-this['_calculate'+'dHeight']-this['_margin']['y'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedHeight',this['_calculate'+'dHeight']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_flagChild'+'renAsDirty'](){const _0x5537b7=this['entity']['_children'];for(let _0x4a5c46=0x13b1+-0x3*-0x199+-0xc3e*0x2,_0x3cdff3=_0x5537b7['length'];_0x4a5c46<_0x3cdff3;_0x4a5c46++)_0x5537b7[_0x4a5c46]['element']&&(_0x5537b7[_0x4a5c46]['element']['_anchorDir'+'ty']=!(0x102*0x20+0x440+0x40*-0x92),_0x5537b7[_0x4a5c46]['element']['_sizeDirty']=!(-0x131b+0x11*0x106+0x1b5));}['addModelTo'+'Layers'](_0x26ae62){this['_addedMode'+'ls']['push'](_0x26ae62);for(let _0x3f307d=0x7cf+-0x1ec7+0x16f8;_0x3f307d<this['layers']['length'];_0x3f307d++){const _0x4d61ae=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x3f307d]);_0x4d61ae&&_0x4d61ae['addMeshIns'+'tances'](_0x26ae62['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](_0x1edf3e){const _0x28291a=this['_addedMode'+'ls']['indexOf'](_0x1edf3e);_0x28291a>=-0x11b5+-0x1*-0x13f7+-0x242&&this['_addedMode'+'ls']['splice'](_0x28291a,-0x1*-0x5+0x1073+-0x34b*0x5);for(let _0x199e67=0x17*0x152+-0x6d*0xa+0x3*-0x8b4;_0x199e67<this['layers']['length'];_0x199e67++){const _0x2cc3fe=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x199e67]);_0x2cc3fe&&_0x2cc3fe['removeMesh'+'Instances'](_0x1edf3e['meshInstan'+'ces']);}}['getMaskOff'+'set'](){const _0x516575=this['system']['app']['frame'];this['_offsetRea'+'dAt']!==_0x516575&&(this['_maskOffse'+'t']=0xaaa+0x25*0xb9+-0x2567+0.5,this['_offsetRea'+'dAt']=_0x516575);const _0x1cbdce=this['_maskOffse'+'t'];return this['_maskOffse'+'t']-=-0x1188+-0xf*-0xfb+0x2d3+0.001,_0x1cbdce;}['isVisibleF'+'orCamera'](_0x58b93b){let _0x32b636,_0x340eae,_0x557ec5,_0x35491d;if(this['maskedBy']){const _0x1af03d=this['maskedBy']['element']['screenCorn'+'ers'];_0x32b636=Math['min'](Math['min'](_0x1af03d[-0x1*0x2357+-0x19d6+-0x1*-0x3d2d]['x'],_0x1af03d[-0x57*-0x3b+-0x256a+0x115e]['x']),Math['min'](_0x1af03d[0x2f*-0x8+0x1994+-0x181a]['x'],_0x1af03d[-0x39*0x3e+0x45e*0x2+-0x515*-0x1]['x'])),_0x340eae=Math['max'](Math['max'](_0x1af03d[-0x34c*-0x5+-0x1081+0x5]['x'],_0x1af03d[0x2463+-0x703*-0x1+0x15*-0x211]['x']),Math['max'](_0x1af03d[0x12a+0x1*0x1462+-0x3*0x72e]['x'],_0x1af03d[-0x1*-0x2655+-0x204e+-0x604]['x'])),_0x35491d=Math['min'](Math['min'](_0x1af03d[-0x47*-0x36+0x12a9+-0x21a3]['y'],_0x1af03d[-0x2263+0x5*-0x427+0x3727]['y']),Math['min'](_0x1af03d[-0x185*-0xb+-0x10bb*0x2+0x1*0x10c1]['y'],_0x1af03d[-0x263b*-0x1+0x258e+-0x1*0x4bc6]['y'])),_0x557ec5=Math['max'](Math['max'](_0x1af03d[-0x1b76+-0x1ea2+0x478*0xd]['y'],_0x1af03d[0x537+-0x1*0x1783+0x124d]['y']),Math['max'](_0x1af03d[0x1ab6+0x509*-0x3+0x1*-0xb99]['y'],_0x1af03d[-0x1*0x1646+0xcca*-0x2+0x2fdd*0x1]['y']));}else{const _0x52be39=this['system']['app']['graphicsDe'+'vice']['width'],_0x336175=this['system']['app']['graphicsDe'+'vice']['height'],_0x1fe15e=_0x58b93b['_rect']['z']*_0x52be39,_0x19d521=_0x58b93b['_rect']['w']*_0x336175;_0x32b636=_0x58b93b['_rect']['x']*_0x52be39,_0x340eae=_0x32b636+_0x1fe15e,_0x557ec5=(-0x1b98+-0x2*0xcf6+-0x11d7*-0x3-_0x58b93b['_rect']['y'])*_0x336175,_0x35491d=_0x557ec5-_0x19d521;}const _0x1a4962=this['screenCorn'+'ers'],_0x762d1b=Math['min'](Math['min'](_0x1a4962[-0x1d3*-0x15+0x1145+0x2*-0x1bca]['x'],_0x1a4962[0x1713+-0x12bf+-0x453]['x']),Math['min'](_0x1a4962[0x164*0x10+0xc9b*-0x2+0x2f8]['x'],_0x1a4962[-0x1*0x1618+0x1e49*0x1+-0x82e]['x'])),_0x48f89b=Math['max'](Math['max'](_0x1a4962[-0xe99*0x1+-0xb4c+-0x19e5*-0x1]['x'],_0x1a4962[-0x2e3*-0x1+0x2*-0x359+0x3d0]['x']),Math['max'](_0x1a4962[0x2654+0x1b3e+-0x1064*0x4]['x'],_0x1a4962[-0x5*0x7b+0x7c7+-0x1*0x55d]['x'])),_0x296c7b=Math['min'](Math['min'](_0x1a4962[-0x26d5+0x3aa*-0x3+0x31d3]['y'],_0x1a4962[0x35*-0x10+-0x20c4+0x2415*0x1]['y']),Math['min'](_0x1a4962[-0x1c57+-0x1fe+-0x1*-0x1e57]['y'],_0x1a4962[0xe+0x15a7*0x1+-0x15b2]['y'])),_0x463bd6=Math['max'](Math['max'](_0x1a4962[0x887+0x545+0x1*-0xdcc]['y'],_0x1a4962[0x255f+-0x13d*-0x1+-0x1*0x269b]['y']),Math['max'](_0x1a4962[0x120e*0x1+0xfef+-0x1*0x21fb]['y'],_0x1a4962[0x765+0x2*-0x347+-0xd4]['y']));return!(_0x48f89b<_0x32b636||_0x762d1b>_0x340eae||_0x296c7b>_0x557ec5||_0x463bd6<_0x35491d);}['_isScreenS'+'pace'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['screenSpac'+'e']:!(-0x1*-0x6d+0x56*0x5a+0xf54*-0x2);}['_isScreenC'+'ulled'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['cull']:!(0x1*0x2152+-0x2*0xf4c+0x29*-0x11);}['_dirtyBatc'+'h'](){var _0x1df0f8;this['batchGroup'+'Id']!==-(0x2147+-0x19*0xdf+-0xb7f*0x1)&&((_0x1df0f8=this['system']['app']['batcher'])==null||_0x1df0f8['markGroupD'+'irty'](this['batchGroup'+'Id']));}}h(hs,'EVENT_MOUS'+'EDOWN','mousedown'),h(hs,'EVENT_MOUS'+'EUP','mouseup'),h(hs,'EVENT_MOUS'+'EENTER','mouseenter'),h(hs,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(hs,'EVENT_MOUS'+'EMOVE','mousemove'),h(hs,'EVENT_MOUS'+'EWHEEL','mousewheel'),h(hs,'EVENT_CLIC'+'K','click'),h(hs,'EVENT_TOUC'+'HSTART','touchstart'),h(hs,'EVENT_TOUC'+'HEND','touchend'),h(hs,'EVENT_TOUC'+'HMOVE','touchmove'),h(hs,'EVENT_TOUC'+'HCANCEL','touchcance'+'l');class jL{constructor(){this['enabled']=!(-0x267f+-0x745*0x3+-0x1*-0x3c4e);}}const YL=['enabled'];class KL extends ct{constructor(_0x1cf1fc){super(_0x1cf1fc),this['id']='element',this['ComponentT'+'ype']=hs,this['DataType']=jL,this['schema']=YL,this['_unicodeCo'+'nverter']=null,this['_rtlReorde'+'r']=null,this['_defaultTe'+'xture']=new _e(_0x1cf1fc['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':_s,'name':'element-sy'+'stem'});const _0x48a137=this['_defaultTe'+'xture']['lock'](),_0xc88b05=new Uint8Array(0x1*-0x6ab+0xbfe+0x1c5*-0x3);_0xc88b05[0x2*-0x300+0x772*0x2+0x8e4*-0x1]=-0x1*0x18a+-0x17ef+0x1a78,_0xc88b05[-0xf97+-0x18ef+0x19f*0x19]=0x2342*0x1+-0x12c7+0x1*-0xf7c,_0xc88b05[-0x21f6+0xb7b+0x167d]=0x177c+-0x1*-0xbdd+-0x225a,_0xc88b05[0x1*0x2185+-0xbe0+0x736*-0x3]=0x1449+0x3*-0xc79+0x1221,_0x48a137['set'](_0xc88b05),this['_defaultTe'+'xture']['unlock'](),this['defaultIma'+'geMaterial']=null,this['defaultIma'+'ge9SlicedM'+'aterial']=null,this['defaultIma'+'ge9TiledMa'+'terial']=null,this['defaultIma'+'geMaskMate'+'rial']=null,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=null,this['defaultIma'+'ge9TiledMa'+'skMaterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=null,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=null,this['_defaultTe'+'xtMaterial'+'s']={},this['defaultIma'+'geMaterial'+'s']=[],this['on']('add',this['onAddCompo'+'nent'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['destroy'](){super['destroy'](),this['_defaultTe'+'xture']['destroy']();}['initialize'+'ComponentD'+'ata'](_0x112731,_0x41615f,_0x42d742){_0x112731['_beingInit'+'ialized']=!(-0x4f1+0x23d3+0x1ee2*-0x1),_0x41615f['anchor']!==void(-0x25*-0xb3+0xec4+-0x28a3)&&(_0x41615f['anchor']instanceof re?_0x112731['anchor']['copy'](_0x41615f['anchor']):_0x112731['anchor']['set'](_0x41615f['anchor'][-0x94+0x59c+-0x284*0x2],_0x41615f['anchor'][-0x25*-0x8f+0x1*0x1f96+0x1a2*-0x20],_0x41615f['anchor'][0xbd8*-0x2+0x108a+0x728],_0x41615f['anchor'][-0x1*0x15d1+0x1a2d*-0x1+-0x1*-0x3001])),_0x41615f['pivot']!==void(0x170a+0x330+0x1a3a*-0x1)&&(_0x41615f['pivot']instanceof J?_0x112731['pivot']['copy'](_0x41615f['pivot']):_0x112731['pivot']['set'](_0x41615f['pivot'][0x1c1f+-0xd5*0x1c+-0x4d3],_0x41615f['pivot'][0x1459+-0x26f0+0x1298]));const _0x4779b9=Math['abs'](_0x112731['anchor']['x']-_0x112731['anchor']['z'])>0x46a*-0x5+0x11f4+-0x2*-0x20f+0.001,_0x1e87c0=Math['abs'](_0x112731['anchor']['y']-_0x112731['anchor']['w'])>0x1e41*-0x1+0x126e+0xbd3+0.001;let _0x30d42d=!(0x1*-0x203a+0x5*0x301+0x1136),_0x18c87e;_0x41615f['margin']!==void(0x2055+0x32*-0x2d+0x178b*-0x1)&&(_0x41615f['margin']instanceof re?_0x112731['margin']['copy'](_0x41615f['margin']):_0x112731['_margin']['set'](_0x41615f['margin'][0x263c*0x1+-0x103c+-0x1600],_0x41615f['margin'][-0x115e+0x10*0x9e+0x65*0x13],_0x41615f['margin'][0x26e*-0xe+0xcc9+0x1*0x153d],_0x41615f['margin'][0x1948+0x2619+0x2*-0x1faf]),_0x30d42d=!(0x2*-0xdb7+-0x3b+0x1ba9)),_0x41615f['left']!==void(-0x1c43+-0xf83+-0x15e3*-0x2)&&(_0x112731['_margin']['x']=_0x41615f['left'],_0x30d42d=!(0x237+0x8bf+-0xaf6)),_0x41615f['bottom']!==void(0x15c4+-0x5b*0x5a+0x2*0x51d)&&(_0x112731['_margin']['y']=_0x41615f['bottom'],_0x30d42d=!(-0x1*0x24c5+-0x21fe+-0x46c3*-0x1)),_0x41615f['right']!==void(0x833+-0x1*-0x1bdd+-0x2410)&&(_0x112731['_margin']['z']=_0x41615f['right'],_0x30d42d=!(0x1aca+-0x9*-0x42e+-0x4068)),_0x41615f['top']!==void(-0x1*-0x3d0+-0x1*0x8d1+0x501)&&(_0x112731['_margin']['w']=_0x41615f['top'],_0x30d42d=!(-0x2*0xb20+0x12f0+0x350)),_0x30d42d&&(_0x112731['margin']=_0x112731['_margin']);let _0x3628e4=!(0x8a*0x9+-0x459+-0x80);_0x41615f['width']!==void(0x93c+0xfc0*-0x2+0xe4*0x19)&&!_0x4779b9?_0x112731['width']=_0x41615f['width']:_0x4779b9&&(_0x3628e4=!(0xdee+-0x21d*0xb+0x2d*0x35)),_0x41615f['height']!==void(0x19aa+-0x2*0x86d+-0x8d0)&&!_0x1e87c0?_0x112731['height']=_0x41615f['height']:_0x1e87c0&&(_0x3628e4=!(0x1c*-0xa7+0xc3*0x2+0x1*0x10be)),_0x3628e4&&(_0x112731['anchor']=_0x112731['anchor']),_0x41615f['enabled']!==void(-0x5c2+-0x1afe+0x20c0)&&(_0x112731['enabled']=_0x41615f['enabled']),_0x41615f['useInput']!==void(-0x2138+0x1608+0x2*0x598)&&(_0x112731['useInput']=_0x41615f['useInput']),_0x41615f['fitMode']!==void(-0x28*-0xa2+0x1*0x2510+-0x3e60)&&(_0x112731['fitMode']=_0x41615f['fitMode']),_0x112731['batchGroup'+'Id']=_0x41615f['batchGroup'+'Id']===void(-0xe4*0x27+-0x149*-0x17+0x52d)||_0x41615f['batchGroup'+'Id']===null?-(0x1f63+0xd9*0x17+0x1*-0x32e1):_0x41615f['batchGroup'+'Id'],_0x41615f['layers']&&Array['isArray'](_0x41615f['layers'])&&(_0x112731['layers']=_0x41615f['layers']['slice'](-0x1*-0xd36+0x2a5*-0x1+-0xa91)),_0x41615f['type']!==void(0x1028+-0x1*0xc41+-0x3*0x14d)&&(_0x112731['type']=_0x41615f['type']),_0x112731['type']===tu?(_0x41615f['rect']!==void(0x243a+0x1973+-0x33f*0x13)&&(_0x112731['rect']=_0x41615f['rect']),_0x41615f['color']!==void(0x6*-0x13e+-0xab7*0x3+0x5d*0x6d)&&(_0x18c87e=_0x41615f['color'],_0x18c87e instanceof ie||(_0x18c87e=new ie(_0x41615f['color'][0x5*0x2a8+-0x196+0x1*-0xbb2],_0x41615f['color'][-0x1*-0x23d+0x1b76+-0xed9*0x2],_0x41615f['color'][-0x687+0x25c7*0x1+-0x1f3e])),_0x112731['color']=_0x18c87e),_0x41615f['opacity']!==void(-0xdf7+0x168a*-0x1+0x26f*0xf)&&(_0x112731['opacity']=_0x41615f['opacity']),_0x41615f['textureAss'+'et']!==void(-0x5c2+0x7f8+0x236*-0x1)&&(_0x112731['textureAss'+'et']=_0x41615f['textureAss'+'et']),_0x41615f['texture']&&(_0x112731['texture']=_0x41615f['texture']),_0x41615f['spriteAsse'+'t']!==void(0x1ae5+0x6bf+-0x21a4)&&(_0x112731['spriteAsse'+'t']=_0x41615f['spriteAsse'+'t']),_0x41615f['sprite']&&(_0x112731['sprite']=_0x41615f['sprite']),_0x41615f['spriteFram'+'e']!==void(0x1*0x223f+-0x1*0x1bfd+-0x59*0x12)&&(_0x112731['spriteFram'+'e']=_0x41615f['spriteFram'+'e']),_0x41615f['pixelsPerU'+'nit']!==void(-0x23cc+0x238+0x2194)&&_0x41615f['pixelsPerU'+'nit']!==null&&(_0x112731['pixelsPerU'+'nit']=_0x41615f['pixelsPerU'+'nit']),_0x41615f['materialAs'+'set']!==void(0x187d+-0x2170+-0x8f3*-0x1)&&(_0x112731['materialAs'+'set']=_0x41615f['materialAs'+'set']),_0x41615f['material']&&(_0x112731['material']=_0x41615f['material']),_0x41615f['mask']!==void(0x3*-0xb19+0x194+0x1fb7)&&(_0x112731['mask']=_0x41615f['mask'])):_0x112731['type']===fv&&(_0x41615f['autoWidth']!==void(0x913+-0x4*0x572+-0x1*-0xcb5)&&(_0x112731['autoWidth']=_0x41615f['autoWidth']),_0x41615f['autoHeight']!==void(-0x1*0x995+-0x7*-0xa6+0x50b*0x1)&&(_0x112731['autoHeight']=_0x41615f['autoHeight']),_0x41615f['rtlReorder']!==void(0x1852+0x1473+0x49*-0x9d)&&(_0x112731['rtlReorder']=_0x41615f['rtlReorder']),_0x41615f['unicodeCon'+'verter']!==void(-0x266c+-0xff0+-0xd97*-0x4)&&(_0x112731['unicodeCon'+'verter']=_0x41615f['unicodeCon'+'verter']),_0x41615f['text']!==null&&_0x41615f['text']!==void(0xea2+0xb*-0x16a+0xec)?_0x112731['text']=_0x41615f['text']:_0x41615f['key']!==null&&_0x41615f['key']!==void(-0x1bd*0xb+0x5d*-0x41+0x2abc)&&(_0x112731['key']=_0x41615f['key']),_0x41615f['color']!==void(-0x1168*-0x1+-0x2ce+-0xb2*0x15)&&(_0x18c87e=_0x41615f['color'],_0x18c87e instanceof ie||(_0x18c87e=new ie(_0x18c87e[0x23ed+0x13d7+0x53*-0xac],_0x18c87e[0xc81*-0x3+0x1412+0x1172],_0x18c87e[0x13*-0x195+-0x1f1b+0x3d2c])),_0x112731['color']=_0x18c87e),_0x41615f['opacity']!==void(-0x1d87+-0x5*0x107+-0x1d*-0x132)&&(_0x112731['opacity']=_0x41615f['opacity']),_0x41615f['spacing']!==void(-0x1f5d*0x1+0x13dc+0xb81)&&(_0x112731['spacing']=_0x41615f['spacing']),_0x41615f['fontSize']!==void(0x485+0x1357*0x2+-0x1*0x2b33)&&(_0x112731['fontSize']=_0x41615f['fontSize'],_0x41615f['lineHeight']||(_0x112731['lineHeight']=_0x41615f['fontSize'])),_0x41615f['lineHeight']!==void(-0x657+-0x1*0x1731+-0x7*-0x438)&&(_0x112731['lineHeight']=_0x41615f['lineHeight']),_0x41615f['maxLines']!==void(-0x359*0xb+-0x3b7+0x1*0x288a)&&(_0x112731['maxLines']=_0x41615f['maxLines']),_0x41615f['wrapLines']!==void(-0x1203+-0x22e3+0x34e6)&&(_0x112731['wrapLines']=_0x41615f['wrapLines']),_0x41615f['minFontSiz'+'e']!==void(-0xef*-0xb+-0x26d9+0x1*0x1c94)&&(_0x112731['minFontSiz'+'e']=_0x41615f['minFontSiz'+'e']),_0x41615f['maxFontSiz'+'e']!==void(-0x5c2+-0x2*-0xd15+0xa34*-0x2)&&(_0x112731['maxFontSiz'+'e']=_0x41615f['maxFontSiz'+'e']),_0x41615f['autoFitWid'+'th']&&(_0x112731['autoFitWid'+'th']=_0x41615f['autoFitWid'+'th']),_0x41615f['autoFitHei'+'ght']&&(_0x112731['autoFitHei'+'ght']=_0x41615f['autoFitHei'+'ght']),_0x41615f['fontAsset']!==void(-0x923*0x3+-0x49*0x57+-0xd0e*-0x4)&&(_0x112731['fontAsset']=_0x41615f['fontAsset']),_0x41615f['font']!==void(-0x49*-0x49+0x4*0x7ac+-0x9*0x5b9)&&(_0x112731['font']=_0x41615f['font']),_0x41615f['alignment']!==void(-0x2515*0x1+-0xb2e+-0x7*-0x6e5)&&(_0x112731['alignment']=_0x41615f['alignment']),_0x41615f['outlineCol'+'or']!==void(-0x9a7+-0x113f*-0x1+-0xc*0xa2)&&(_0x112731['outlineCol'+'or']=_0x41615f['outlineCol'+'or']),_0x41615f['outlineThi'+'ckness']!==void(-0x17bb+-0x392*-0x7+-0x143)&&(_0x112731['outlineThi'+'ckness']=_0x41615f['outlineThi'+'ckness']),_0x41615f['shadowColo'+'r']!==void(-0x21ea+-0x6*0x1ae+0x2bfe)&&(_0x112731['shadowColo'+'r']=_0x41615f['shadowColo'+'r']),_0x41615f['shadowOffs'+'et']!==void(0x1*0x8ad+0x268e+-0x2f3b)&&(_0x112731['shadowOffs'+'et']=_0x41615f['shadowOffs'+'et']),_0x41615f['enableMark'+'up']!==void(0x1c8c+0x17ae+-0x3bb*0xe)&&(_0x112731['enableMark'+'up']=_0x41615f['enableMark'+'up']));const _0x22b1d6=_0x112731['_parseUpTo'+'Screen']();_0x22b1d6['screen']&&_0x112731['_updateScr'+'een'](_0x22b1d6['screen']),super['initialize'+'ComponentD'+'ata'](_0x112731,_0x41615f,_0x42d742),_0x112731['_beingInit'+'ialized']=!(-0x1ebe+-0x1a66+0x3925),_0x112731['type']===tu&&_0x112731['_image']['_meshDirty']&&_0x112731['_image']['_updateMes'+'h'](_0x112731['_image']['mesh']);}['onAddCompo'+'nent'](_0x547a2a,_0x141680){_0x547a2a['fire']('element:ad'+'d');}['onRemoveCo'+'mponent'](_0x599004,_0x44b8b0){_0x44b8b0['onRemove']();}['cloneCompo'+'nent'](_0x56d66f,_0x215a30){const _0x3ce01a=_0x56d66f['element'],_0x2e78e9={'enabled':_0x3ce01a['enabled'],'width':_0x3ce01a['width'],'height':_0x3ce01a['height'],'anchor':_0x3ce01a['anchor']['clone'](),'pivot':_0x3ce01a['pivot']['clone'](),'margin':_0x3ce01a['margin']['clone'](),'alignment':_0x3ce01a['alignment']&&_0x3ce01a['alignment']['clone']()||_0x3ce01a['alignment'],'autoWidth':_0x3ce01a['autoWidth'],'autoHeight':_0x3ce01a['autoHeight'],'type':_0x3ce01a['type'],'rect':_0x3ce01a['rect']&&_0x3ce01a['rect']['clone']()||_0x3ce01a['rect'],'rtlReorder':_0x3ce01a['rtlReorder'],'unicodeConverter':_0x3ce01a['unicodeCon'+'verter'],'materialAsset':_0x3ce01a['materialAs'+'set'],'material':_0x3ce01a['material'],'color':_0x3ce01a['color']&&_0x3ce01a['color']['clone']()||_0x3ce01a['color'],'opacity':_0x3ce01a['opacity'],'textureAsset':_0x3ce01a['textureAss'+'et'],'texture':_0x3ce01a['texture'],'spriteAsset':_0x3ce01a['spriteAsse'+'t'],'sprite':_0x3ce01a['sprite'],'spriteFrame':_0x3ce01a['spriteFram'+'e'],'pixelsPerUnit':_0x3ce01a['pixelsPerU'+'nit'],'spacing':_0x3ce01a['spacing'],'lineHeight':_0x3ce01a['lineHeight'],'wrapLines':_0x3ce01a['wrapLines'],'layers':_0x3ce01a['layers'],'fontSize':_0x3ce01a['fontSize'],'minFontSize':_0x3ce01a['minFontSiz'+'e'],'maxFontSize':_0x3ce01a['maxFontSiz'+'e'],'autoFitWidth':_0x3ce01a['autoFitWid'+'th'],'autoFitHeight':_0x3ce01a['autoFitHei'+'ght'],'maxLines':_0x3ce01a['maxLines'],'fontAsset':_0x3ce01a['fontAsset'],'font':_0x3ce01a['font'],'useInput':_0x3ce01a['useInput'],'fitMode':_0x3ce01a['fitMode'],'batchGroupId':_0x3ce01a['batchGroup'+'Id'],'mask':_0x3ce01a['mask'],'outlineColor':_0x3ce01a['outlineCol'+'or']&&_0x3ce01a['outlineCol'+'or']['clone']()||_0x3ce01a['outlineCol'+'or'],'outlineThickness':_0x3ce01a['outlineThi'+'ckness'],'shadowColor':_0x3ce01a['shadowColo'+'r']&&_0x3ce01a['shadowColo'+'r']['clone']()||_0x3ce01a['shadowColo'+'r'],'shadowOffset':_0x3ce01a['shadowOffs'+'et']&&_0x3ce01a['shadowOffs'+'et']['clone']()||_0x3ce01a['shadowOffs'+'et'],'enableMarkup':_0x3ce01a['enableMark'+'up']};return _0x3ce01a['key']!==void(-0xfa3+0xe*0x143+0x3*-0xad)&&_0x3ce01a['key']!==null?_0x2e78e9['key']=_0x3ce01a['key']:_0x2e78e9['text']=_0x3ce01a['text'],this['addCompone'+'nt'](_0x215a30,_0x2e78e9);}['getTextEle'+'mentMateri'+'al'](_0x193bbb,_0x1ff866,_0x485dff){const _0x5f2c24=(_0x193bbb&&-0x1f5*0xe+0x4*-0x82b+0x3c13)|(_0x1ff866&&-0x1c9f+0x54d+0x1754)|(_0x485dff&&-0x3*-0x5cf+-0xda3*-0x2+-0xee5*0x3);let _0x281037=this['_defaultTe'+'xtMaterial'+'s'][_0x5f2c24];if(_0x281037)return _0x281037;let _0x3292ef='TextMateri'+'al';return _0x281037=new Ut(),_0x1ff866?(_0x281037['msdfMap']=this['_defaultTe'+'xture'],_0x281037['msdfTextAt'+'tribute']=_0x485dff,_0x281037['emissive']['set'](0x117d+0x1*-0x1f12+-0x5e*-0x25,0x1af3+0x1333*0x2+-0x82b*0x8,-0xa55+0x1a*-0xbf+0x1dbc)):(_0x3292ef='Bitmap'+_0x3292ef,_0x281037['emissive']['set'](0x5*-0x679+0x512*0x1+0x1*0x1b4c,0x71c+-0x813+0xf8,0xbcf*0x1+-0x159d*-0x1+-0x216b),_0x281037['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x281037['opacityMap']=this['_defaultTe'+'xture'],_0x281037['opacityMap'+'Channel']='a'),_0x193bbb&&(_0x3292ef='ScreenSpac'+'e'+_0x3292ef,_0x281037['depthTest']=!(-0x1442+-0x1c*0x5e+0x1e8b)),_0x281037['name']='default'+_0x3292ef,_0x281037['useLightin'+'g']=!(-0x1f61+0x1804+0x75e),_0x281037['useTonemap']=!(0x3*-0x1d3+0x527*-0x1+0xaa1),_0x281037['useFog']=!(0x5b*-0x7+0x1*0x1a35+-0x17b7*0x1),_0x281037['useSkybox']=!(0xc7*-0x2c+0x89*-0x40+0x4475),_0x281037['diffuse']['set'](0x690+-0xa*-0x12d+-0x3aa*0x5,-0x14a5+-0x11c*-0x13+-0x6f,0x14e4+-0x1720+0x23c),_0x281037['opacity']=-0xf44+0x7cd+0x31*0x27+0.5,_0x281037['blendType']=Fn,_0x281037['depthWrite']=!(0x7c3+0x122a+0x8a4*-0x3),_0x281037['emissiveVe'+'rtexColor']=!(0x7fb*-0x3+-0x2653+0x3e44),_0x281037['update'](),this['_defaultTe'+'xtMaterial'+'s'][_0x5f2c24]=_0x281037,_0x281037;}['_createBas'+'eImageMate'+'rial'](){const _0x95f4fe=new Ut();return _0x95f4fe['diffuse']['set'](-0x23f8+-0x10f9+0x34f1,-0x1746+0x311*-0x1+0x265*0xb,0x1d2f+-0x2659+0x92a),_0x95f4fe['emissive']['set'](0xb8+-0x1ad4+0x1*0x1a1d,-0x14f0*0x1+0x19aa+-0x4b9,0x699+-0x1b*-0x67+-0x1175),_0x95f4fe['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x95f4fe['opacityMap']=this['_defaultTe'+'xture'],_0x95f4fe['opacityMap'+'Channel']='a',_0x95f4fe['useLightin'+'g']=!(0x23ae+0x31*0xbb+-0x4778),_0x95f4fe['useTonemap']=!(0xd*-0x1b7+-0x1a78+-0xc31*-0x4),_0x95f4fe['useFog']=!(0x1*-0x4ff+0x154d+-0x104d),_0x95f4fe['useSkybox']=!(-0x548+-0xde4+0x132d),_0x95f4fe['blendType']=Fn,_0x95f4fe['depthWrite']=!(-0x12b*0xa+0x264b+0x4*-0x6a7),_0x95f4fe;}['getImageEl'+'ementMater'+'ial'](_0x3e0fba,_0x3d1921,_0x285d90,_0x53d6ef){return _0x3e0fba?_0x3d1921?_0x285d90?(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al',this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['nineSliced'+'Mode']=Pt,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['depthTest']=!(0x1*0x14e3+0x16a8+-0x1*0x2b8a),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaTest']=-0x1552+0xfa7+0x5ac,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['redWrite']=!(-0x124c+0x18f9+-0x6ac),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['greenWrite']=!(0x7*-0x1a5+0xb32+0x52*0x1),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['blueWrite']=!(-0x249+0x228e*0x1+-0x127*0x1c),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaWrite']=!(-0x10ba+0x6d*0x39+-0x78a),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']):_0x53d6ef?(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['clone'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['nineSliced'+'Mode']=Mt,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['depthTest']=!(0xe1d*-0x1+-0xc80+-0xd4f*-0x2),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaTest']=-0x5dd+-0x1f*-0x11a+0x1c48*-0x1,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['redWrite']=!(0xcbb+0x212b+-0x2de5),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['greenWrite']=!(-0x343*0x6+-0x16e+0x1501*0x1),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['blueWrite']=!(-0x225f+-0x1*-0x1da5+0x4bb),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaWrite']=!(0x1*0x8c7+0x1*-0x2156+0x1890),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']):(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']||(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['name']='defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial',this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['depthTest']=!(0x1a0a+-0x1*-0x4b4+-0x1ebd),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaTest']=-0x1fb7+-0x1*0x1b38+-0x148*-0x2e,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['redWrite']=!(0x793*0x1+-0x236a+0x1bd8),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['greenWrite']=!(-0x12b6+0x1bd9+-0xa7*0xe),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['blueWrite']=!(-0x3c9*-0x7+-0x26*0xbf+-0x1c*-0x11),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaWrite']=!(0x80*-0x1a+-0xca4*-0x1+0x5d),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial'])),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']):_0x285d90?(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']||(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['name']='defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material',this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['nineSliced'+'Mode']=Pt,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['depthTest']=!(0xe*-0xe8+0x1de9+-0xe8*0x13),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material'])),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']):_0x53d6ef?(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']||(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['name']='defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial',this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['nineSliced'+'Mode']=Mt,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['depthTest']=!(-0xc54+-0x202e+0x109*0x2b),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial'])),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']):(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['depthTest']=!(-0x7f+0x2*0xb6e+-0x6c*0x35),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']):_0x3d1921?_0x285d90?(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']||(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['name']='defaultIma'+'ge9SlicedM'+'askMateria'+'l',this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['nineSliced'+'Mode']=Pt,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaTest']=-0x56*0x2e+-0x1*0x829+-0xbcf*-0x2,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['redWrite']=!(0xf1c+-0x3e4+-0xb37),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['greenWrite']=!(0x16*-0x10d+0x63c+0x10e3),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['blueWrite']=!(0x68+0x39*-0x83+0x1cc4),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaWrite']=!(0x250+0x22e8+-0x2537*0x1),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'askMateria'+'l'])),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']):_0x53d6ef?(this['defaultIma'+'ge9TiledMa'+'skMaterial']||(this['defaultIma'+'ge9TiledMa'+'skMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'skMaterial']['name']='defaultIma'+'ge9TiledMa'+'skMaterial',this['defaultIma'+'ge9TiledMa'+'skMaterial']['nineSliced'+'Mode']=Mt,this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaTest']=-0xd7b+-0x3d*-0x68+0x3c4*-0x3,this['defaultIma'+'ge9TiledMa'+'skMaterial']['redWrite']=!(-0x2561+-0x70a+0x2c6c),this['defaultIma'+'ge9TiledMa'+'skMaterial']['greenWrite']=!(-0x21dd+-0x5*0x373+-0x5*-0xa39),this['defaultIma'+'ge9TiledMa'+'skMaterial']['blueWrite']=!(-0x943*0x1+-0x21fa+0x2b3e),this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaWrite']=!(-0x26a5+0x671+0x2035*0x1),this['defaultIma'+'ge9TiledMa'+'skMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'skMaterial'])),this['defaultIma'+'ge9TiledMa'+'skMaterial']):(this['defaultIma'+'geMaskMate'+'rial']||(this['defaultIma'+'geMaskMate'+'rial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaskMate'+'rial']['name']='defaultIma'+'geMaskMate'+'rial',this['defaultIma'+'geMaskMate'+'rial']['alphaTest']=0x95*-0x20+-0xd25*0x2+0x2ceb,this['defaultIma'+'geMaskMate'+'rial']['redWrite']=!(-0x1549*-0x1+0x2*0xfaa+-0x349c),this['defaultIma'+'geMaskMate'+'rial']['greenWrite']=!(-0x282*-0x3+0xaea+-0x126f),this['defaultIma'+'geMaskMate'+'rial']['blueWrite']=!(0x1f59+-0x7c7+-0x1*0x1791),this['defaultIma'+'geMaskMate'+'rial']['alphaWrite']=!(-0x91*0x16+-0x243d+-0x185a*-0x2),this['defaultIma'+'geMaskMate'+'rial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaskMate'+'rial'])),this['defaultIma'+'geMaskMate'+'rial']):_0x285d90?(this['defaultIma'+'ge9SlicedM'+'aterial']||(this['defaultIma'+'ge9SlicedM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'aterial']['name']='defaultIma'+'ge9SlicedM'+'aterial',this['defaultIma'+'ge9SlicedM'+'aterial']['nineSliced'+'Mode']=Pt,this['defaultIma'+'ge9SlicedM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'aterial'])),this['defaultIma'+'ge9SlicedM'+'aterial']):_0x53d6ef?(this['defaultIma'+'ge9TiledMa'+'terial']||(this['defaultIma'+'ge9TiledMa'+'terial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'terial']['name']='defaultIma'+'ge9TiledMa'+'terial',this['defaultIma'+'ge9TiledMa'+'terial']['nineSliced'+'Mode']=Mt,this['defaultIma'+'ge9TiledMa'+'terial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'terial'])),this['defaultIma'+'ge9TiledMa'+'terial']):(this['defaultIma'+'geMaterial']||(this['defaultIma'+'geMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaterial']['name']='defaultIma'+'geMaterial',this['defaultIma'+'geMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaterial'])),this['defaultIma'+'geMaterial']);}['registerUn'+'icodeConve'+'rter'](_0x3df8a1){this['_unicodeCo'+'nverter']=_0x3df8a1;}['registerRt'+'lReorder'](_0x43a43e){this['_rtlReorde'+'r']=_0x43a43e;}['getUnicode'+'Converter'](){return this['_unicodeCo'+'nverter'];}['getRtlReor'+'der'](){return this['_rtlReorde'+'r'];}}const Va='free',Ga='limited',Ha='locked',ZL=['angularDam'+'pingX','angularDam'+'pingY','angularDam'+'pingZ','angularEqu'+'ilibriumX','angularEqu'+'ilibriumY','angularEqu'+'ilibriumZ','angularLim'+'itsX','angularLim'+'itsY','angularLim'+'itsZ','angularMot'+'ionX','angularMot'+'ionY','angularMot'+'ionZ','angularSpr'+'ingX','angularSpr'+'ingY','angularSpr'+'ingZ','angularSti'+'ffnessX','angularSti'+'ffnessY','angularSti'+'ffnessZ','breakForce','enableColl'+'ision','enabled','entityA','entityB','linearDamp'+'ingX','linearDamp'+'ingY','linearDamp'+'ingZ','linearEqui'+'libriumX','linearEqui'+'libriumY','linearEqui'+'libriumZ','linearLimi'+'tsX','linearLimi'+'tsY','linearLimi'+'tsZ','linearMoti'+'onX','linearMoti'+'onY','linearMoti'+'onZ','linearSpri'+'ngX','linearSpri'+'ngY','linearSpri'+'ngZ','linearStif'+'fnessX','linearStif'+'fnessY','linearStif'+'fnessZ'];class Xp extends we{constructor(_0x12843c,_0x5d2aa5){super(_0x12843c,_0x5d2aa5),w['assert'](typeof Ammo<'u','ERROR:\x20Att'+'empting\x20to'+'\x20create\x20a\x20'+'pc.JointCo'+'mponent\x20bu'+'t\x20Ammo.js\x20'+'is\x20not\x20loa'+'ded'),this['_constrain'+'t']=null,this['_entityA']=null,this['_entityB']=null,this['_breakForc'+'e']=0xffc99e3c66fd68000000000000000000,this['_enableCol'+'lision']=!(-0x1365+0x25d0+0x126b*-0x1),this['_linearMot'+'ionX']=Ha,this['_linearLim'+'itsX']=new J(-0xb81+-0x5*0x2ad+0x18e2,0x1566+-0x1f34+0x9ce),this['_linearSpr'+'ingX']=!(0x25b1*-0x1+0x1602+-0x8*-0x1f6),this['_linearSti'+'ffnessX']=0x1bbd+0x57*0x1+-0x1c14,this['_linearDam'+'pingX']=-0x1e7c+-0x2*0x1e0+0x223d,this['_linearEqu'+'ilibriumX']=-0x11a8+-0x25e8+-0x10*-0x379,this['_linearMot'+'ionY']=Ha,this['_linearLim'+'itsY']=new J(0x773*0x1+-0x11e4+0x21*0x51,0x10d*0x13+-0x12a*-0xb+-0x20c5),this['_linearSpr'+'ingY']=!(0x1*-0x1a3f+-0x1657+0x6f1*0x7),this['_linearSti'+'ffnessY']=-0xef*0xd+0x180a+-0xbe7,this['_linearDam'+'pingY']=-0x4a*-0x65+-0xbf9*-0x3+0x39e*-0x12,this['_linearEqu'+'ilibriumY']=0x27*0xcd+-0x1*-0x2e3+-0x221e,this['_linearMot'+'ionZ']=Ha,this['_linearLim'+'itsZ']=new J(-0x2*0xe8f+-0x765*0x1+0x2483,0x2442+-0x141a+-0x2c*0x5e),this['_linearSpr'+'ingZ']=!(-0x147f+0x1a77+-0x5f7),this['_linearSti'+'ffnessZ']=-0x7*-0x291+0x2b3+0x73*-0x2e,this['_linearDam'+'pingZ']=0x15db+0x4*-0x819+0x47*0x26,this['_linearEqu'+'ilibriumZ']=0xffa+-0x224b+0x9*0x209,this['_angularMo'+'tionX']=Ha,this['_angularLi'+'mitsX']=new J(-0xa6*-0x37+-0xc0c+-0x179e,-0x1*0x15e6+0x3*-0x9e1+0x3389),this['_angularSp'+'ringX']=!(0x2*0xb1d+0xd*-0x8b+0x3*-0x50e),this['_angularSt'+'iffnessX']=0x13e0+-0x2e0+0x11*-0x100,this['_angularDa'+'mpingX']=-0x1*-0x12fb+-0x125*0xf+0x1*-0x1cf,this['_angularEq'+'uilibriumX']=0x1761+0x2586*-0x1+0xe25,this['_angularMo'+'tionY']=Ha,this['_angularLi'+'mitsY']=new J(-0x1*0x2205+0xdbb+0x144a,0xdb0+-0x19c*-0xb+-0x1f64),this['_angularSp'+'ringY']=!(-0x12e*-0xf+0x1aba+-0x2c6b),this['_angularSt'+'iffnessY']=0x1*-0x1f16+0x209f+0x3*-0x83,this['_angularDa'+'mpingY']=-0x1495+-0xa2*0x20+0x28d6,this['_angularEq'+'uilibriumY']=-0xf53+-0xf84*-0x2+0xfb5*-0x1,this['_angularMo'+'tionZ']=Ha,this['_angularLi'+'mitsZ']=new J(0x76*0x1d+-0x212c+0x13ce,0x8d5*0x2+-0x69d*-0x1+-0x1847),this['_angularSp'+'ringZ']=!(0x1*0x397+0x423+-0x7b9),this['_angularEq'+'uilibriumZ']=0xc*0xac+-0x2216+-0x1*-0x1a06,this['_angularDa'+'mpingZ']=0x1f9c+0x1*0x49f+-0x243a,this['_angularSt'+'iffnessZ']=-0x741+-0xca0+0x2d7*0x7,this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['entityA'](_0x59f9eb){this['_destroyCo'+'nstraint'](),this['_entityA']=_0x59f9eb,this['_createCon'+'straint']();}get['entityA'](){return this['_entityA'];}set['entityB'](_0xe8d7b3){this['_destroyCo'+'nstraint'](),this['_entityB']=_0xe8d7b3,this['_createCon'+'straint']();}get['entityB'](){return this['_entityB'];}set['breakForce'](_0x2dcb6d){this['_constrain'+'t']&&this['_breakForc'+'e']!==_0x2dcb6d&&(this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](_0x2dcb6d),this['_breakForc'+'e']=_0x2dcb6d);}get['breakForce'](){return this['_breakForc'+'e'];}set['enableColl'+'ision'](_0x262989){this['_destroyCo'+'nstraint'](),this['_enableCol'+'lision']=_0x262989,this['_createCon'+'straint']();}get['enableColl'+'ision'](){return this['_enableCol'+'lision'];}set['angularLim'+'itsX'](_0x2487f2){this['_angularLi'+'mitsX']['equals'](_0x2487f2)||(this['_angularLi'+'mitsX']['copy'](_0x2487f2),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsX'](){return this['_angularLi'+'mitsX'];}set['angularMot'+'ionX'](_0x4b6fa5){this['_angularMo'+'tionX']!==_0x4b6fa5&&(this['_angularMo'+'tionX']=_0x4b6fa5,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionX'](){return this['_angularMo'+'tionX'];}set['angularLim'+'itsY'](_0x39106b){this['_angularLi'+'mitsY']['equals'](_0x39106b)||(this['_angularLi'+'mitsY']['copy'](_0x39106b),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsY'](){return this['_angularLi'+'mitsY'];}set['angularMot'+'ionY'](_0x2604dc){this['_angularMo'+'tionY']!==_0x2604dc&&(this['_angularMo'+'tionY']=_0x2604dc,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionY'](){return this['_angularMo'+'tionY'];}set['angularLim'+'itsZ'](_0x480665){this['_angularLi'+'mitsZ']['equals'](_0x480665)||(this['_angularLi'+'mitsZ']['copy'](_0x480665),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsZ'](){return this['_angularLi'+'mitsZ'];}set['angularMot'+'ionZ'](_0x58e53a){this['_angularMo'+'tionZ']!==_0x58e53a&&(this['_angularMo'+'tionZ']=_0x58e53a,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionZ'](){return this['_angularMo'+'tionZ'];}set['linearLimi'+'tsX'](_0x16e57b){this['_linearLim'+'itsX']['equals'](_0x16e57b)||(this['_linearLim'+'itsX']['copy'](_0x16e57b),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsX'](){return this['_linearLim'+'itsX'];}set['linearMoti'+'onX'](_0x1a7fdb){this['_linearMot'+'ionX']!==_0x1a7fdb&&(this['_linearMot'+'ionX']=_0x1a7fdb,this['_updateLin'+'earLimits']());}get['linearMoti'+'onX'](){return this['_linearMot'+'ionX'];}set['linearLimi'+'tsY'](_0x126a60){this['_linearLim'+'itsY']['equals'](_0x126a60)||(this['_linearLim'+'itsY']['copy'](_0x126a60),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsY'](){return this['_linearLim'+'itsY'];}set['linearMoti'+'onY'](_0x10314b){this['_linearMot'+'ionY']!==_0x10314b&&(this['_linearMot'+'ionY']=_0x10314b,this['_updateLin'+'earLimits']());}get['linearMoti'+'onY'](){return this['_linearMot'+'ionY'];}set['linearLimi'+'tsZ'](_0x2336fa){this['_linearLim'+'itsZ']['equals'](_0x2336fa)||(this['_linearLim'+'itsZ']['copy'](_0x2336fa),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsZ'](){return this['_linearLim'+'itsZ'];}set['linearMoti'+'onZ'](_0x178352){this['_linearMot'+'ionZ']!==_0x178352&&(this['_linearMot'+'ionZ']=_0x178352,this['_updateLin'+'earLimits']());}get['linearMoti'+'onZ'](){return this['_linearMot'+'ionZ'];}['_convertTr'+'ansform'](_0x18ada9,_0x41e3d1){const _0x1a4ff7=_0x18ada9['getTransla'+'tion'](),_0x2c7cf6=new le();_0x2c7cf6['setFromMat'+'4'](_0x18ada9);const _0xc0c3f=new Ammo['btVector3'](_0x1a4ff7['x'],_0x1a4ff7['y'],_0x1a4ff7['z']),_0x1a8114=new Ammo['btQuaterni'+'on'](_0x2c7cf6['x'],_0x2c7cf6['y'],_0x2c7cf6['z'],_0x2c7cf6['w']);_0x41e3d1['setOrigin'](_0xc0c3f),_0x41e3d1['setRotatio'+'n'](_0x1a8114),Ammo['destroy'](_0xc0c3f),Ammo['destroy'](_0x1a8114);}['_updateAng'+'ularLimits'](){const _0x211bd0=this['_constrain'+'t'];if(_0x211bd0){let _0xbc860e,_0x104a24,_0x272994,_0x4e434b,_0x252b4b,_0x557bce;this['_angularMo'+'tionX']===Ga?(_0xbc860e=this['_angularLi'+'mitsX']['x']*Y['DEG_TO_RAD'],_0x4e434b=this['_angularLi'+'mitsX']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionX']===Va?(_0xbc860e=-0x1*-0xa2d+-0x1ef7+0x14cb,_0x4e434b=-0x7c4*-0x2+-0x612+-0x976):_0xbc860e=_0x4e434b=-0xe85+-0x1b1a+0x299f,this['_angularMo'+'tionY']===Ga?(_0x104a24=this['_angularLi'+'mitsY']['x']*Y['DEG_TO_RAD'],_0x252b4b=this['_angularLi'+'mitsY']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionY']===Va?(_0x104a24=0x3ce+0x10*0x190+-0x1ccd,_0x252b4b=-0x1d0b+0x218b+-0x480):_0x104a24=_0x252b4b=-0x526*0x4+0x446*0x1+0x1052,this['_angularMo'+'tionZ']===Ga?(_0x272994=this['_angularLi'+'mitsZ']['x']*Y['DEG_TO_RAD'],_0x557bce=this['_angularLi'+'mitsZ']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionZ']===Va?(_0x272994=0x2548+0x1c9d+-0x41e4,_0x557bce=-0x1*-0x705+0x3*-0x8d0+-0x679*-0x3):_0x272994=_0x557bce=0x18e*0x13+0x921*0x1+-0x26ab;const _0x2b0fec=new Ammo['btVector3'](_0xbc860e,_0x104a24,_0x272994);_0x211bd0['setAngular'+'LowerLimit'](_0x2b0fec),_0x2b0fec['setValue'](_0x4e434b,_0x252b4b,_0x557bce),_0x211bd0['setAngular'+'UpperLimit'](_0x2b0fec),Ammo['destroy'](_0x2b0fec);}}['_updateLin'+'earLimits'](){const _0x1ccaf1=this['_constrain'+'t'];if(_0x1ccaf1){let _0xb702c7,_0x467731,_0x5a1a71,_0x415d2e,_0x566d9f,_0x1d17f3;this['_linearMot'+'ionX']===Ga?(_0xb702c7=this['_linearLim'+'itsX']['x'],_0x415d2e=this['_linearLim'+'itsX']['y']):this['_linearMot'+'ionX']===Va?(_0xb702c7=-0x75d+-0x197*-0x1+0x57*0x11,_0x415d2e=-0x1*-0x2f3+-0x18b9+-0x15c6*-0x1):_0xb702c7=_0x415d2e=0x43f*0x2+0x7*-0x31a+0xd38,this['_linearMot'+'ionY']===Ga?(_0x467731=this['_linearLim'+'itsY']['x'],_0x566d9f=this['_linearLim'+'itsY']['y']):this['_linearMot'+'ionY']===Va?(_0x467731=0x2405+0x1abb*0x1+0x1*-0x3ebf,_0x566d9f=-0x1a3d+-0x1265+0x2ca2):_0x467731=_0x566d9f=-0x19e8+0x9d4+0x1014,this['_linearMot'+'ionZ']===Ga?(_0x5a1a71=this['_linearLim'+'itsZ']['x'],_0x1d17f3=this['_linearLim'+'itsZ']['y']):this['_linearMot'+'ionZ']===Va?(_0x5a1a71=0x4dd+-0x567+-0x8b*-0x1,_0x1d17f3=-0x2505+-0x11*-0x1e1+0x514):_0x5a1a71=_0x1d17f3=0x7*-0x3aa+0x1f5e+-0x5b8;const _0x166537=new Ammo['btVector3'](_0xb702c7,_0x467731,_0x5a1a71);_0x1ccaf1['setLinearL'+'owerLimit'](_0x166537),_0x166537['setValue'](_0x415d2e,_0x566d9f,_0x1d17f3),_0x1ccaf1['setLinearU'+'pperLimit'](_0x166537),Ammo['destroy'](_0x166537);}}['_createCon'+'straint'](){if(this['_entityA']&&this['_entityA']['rigidbody']){this['_destroyCo'+'nstraint']();const _0x23d991=new te(),_0x76bd6d=this['_entityA']['rigidbody']['body'];_0x76bd6d['activate']();const _0xe43d74=this['entity']['getWorldTr'+'ansform'](),_0x3cfef4=this['_entityA']['getWorldTr'+'ansform']()['clone']()['invert']();_0x23d991['mul2'](_0x3cfef4,_0xe43d74);const _0x33a843=new Ammo['btTransfor'+'m']();if(this['_convertTr'+'ansform'](_0x23d991,_0x33a843),this['_entityB']&&this['_entityB']['rigidbody']){const _0x5ce129=this['_entityB']['rigidbody']['body'];_0x5ce129['activate']();const _0x552894=this['_entityB']['getWorldTr'+'ansform']()['clone']()['invert']();_0x23d991['mul2'](_0x552894,_0xe43d74);const _0x1dda1a=new Ammo['btTransfor'+'m']();this['_convertTr'+'ansform'](_0x23d991,_0x1dda1a),this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x76bd6d,_0x5ce129,_0x33a843,_0x1dda1a,!this['_enableCol'+'lision']),Ammo['destroy'](_0x1dda1a);}else this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x76bd6d,_0x33a843,!this['_enableCol'+'lision']);Ammo['destroy'](_0x33a843);const _0x87db0d=['X','Y','Z','X','Y','Z'];for(let _0x26a621=0x2654+0x4ce+0x2b22*-0x1;_0x26a621<0x1ffd*-0x1+-0x1be6+0x3be9;_0x26a621++){const _0x1e3340=_0x26a621<0x204b+0x1f*0x73+-0x2e35?'_linear':'_angular';this['_constrain'+'t']['enableSpri'+'ng'](_0x26a621,this[_0x1e3340+'Spring'+_0x87db0d[_0x26a621]]),this['_constrain'+'t']['setDamping'](_0x26a621,this[_0x1e3340+'Damping'+_0x87db0d[_0x26a621]]),this['_constrain'+'t']['setEquilib'+'riumPoint'](_0x26a621,this[_0x1e3340+('Equilibriu'+'m')+_0x87db0d[_0x26a621]]),this['_constrain'+'t']['setStiffne'+'ss'](_0x26a621,this[_0x1e3340+'Stiffness'+_0x87db0d[_0x26a621]]);}this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](this['_breakForc'+'e']),this['_updateLin'+'earLimits'](),this['_updateAng'+'ularLimits'](),this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['addConstra'+'int'](this['_constrain'+'t'],!this['_enableCol'+'lision']);}}['_destroyCo'+'nstraint'](){this['_constrain'+'t']&&(this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['removeCons'+'traint'](this['_constrain'+'t']),Ammo['destroy'](this['_constrain'+'t']),this['_constrain'+'t']=null);}['initFromDa'+'ta'](_0x32c6ed){for(const _0x2814c6 of ZL)_0x32c6ed['hasOwnProp'+'erty'](_0x2814c6)&&(_0x32c6ed[_0x2814c6]instanceof J?this['_'+_0x2814c6]['copy'](_0x32c6ed[_0x2814c6]):this['_'+_0x2814c6]=_0x32c6ed[_0x2814c6]);this['_createCon'+'straint']();}['onEnable'](){this['_createCon'+'straint']();}['onDisable'](){this['_destroyCo'+'nstraint']();}['_onSetEnab'+'led'](_0x457297,_0x3b2893,_0x2dceb9){}['_onBeforeR'+'emove'](){this['fire']('remove');}}const QL={'Damping':'setDamping','Equilibrium':'setEquilib'+'riumPoint','Spring':'enableSpri'+'ng','Stiffness':'setStiffne'+'ss'};['linear','angular']['forEach'](_0x17cc4c=>{['Damping','Equilibriu'+'m','Spring','Stiffness']['forEach'](_0x3ee8bf=>{['X','Y','Z']['forEach'](_0x5ccaf0=>{const _0x2f3895=_0x17cc4c+_0x3ee8bf+_0x5ccaf0,_0x3a1ab8='_'+_0x2f3895;let _0x1f82a4=_0x17cc4c==='linear'?0x1*0x59c+0x190e+-0x1eaa:0xbf3+-0x1c*0xd3+-0x5c*-0x1f;_0x5ccaf0==='Y'&&(_0x1f82a4+=0x2230+0x1dec+-0x1*0x401b),_0x5ccaf0==='Z'&&(_0x1f82a4+=-0xd25*0x1+0x10e+-0xc19*-0x1),Object['defineProp'+'erty'](Xp['prototype'],_0x2f3895,{'get':function(){return this[_0x3a1ab8];},'set':function(_0x4e37be){this[_0x3a1ab8]!==_0x4e37be&&(this[_0x3a1ab8]=_0x4e37be,this['_constrain'+'t'][QL[_0x3ee8bf]](_0x1f82a4,_0x4e37be));}});});});});class JL{constructor(){this['enabled']=!(0x1*-0x1c95+-0x21cb*0x1+0x3e60);}}const cu=['enabled'];class eR extends ct{constructor(_0x451017){super(_0x451017),this['id']='joint',this['app']=_0x451017,this['ComponentT'+'ype']=Xp,this['DataType']=JL,this['schema']=cu;}['initialize'+'ComponentD'+'ata'](_0x43d329,_0x5774b3,_0x52c832){_0x43d329['initFromDa'+'ta'](_0x5774b3),super['initialize'+'ComponentD'+'ata'](_0x43d329,_0x5774b3,cu);}}we['_buildAcce'+'ssors'](Xp['prototype'],cu);class gv extends we{constructor(){super(...arguments),h(this,'_minWidth',-0x544+0x1870+-0x996*0x2),h(this,'_minHeight',-0x366+-0x30c+0x672),h(this,'_maxWidth',null),h(this,'_maxHeight',null),h(this,'_fitWidthP'+'roportion',0xa4*0x16+-0x15d1+0x7b9*0x1),h(this,'_fitHeight'+'Proportion',0x4ad*-0x6+0x1163*0x2+-0x6b8),h(this,'_excludeFr'+'omLayout',!(0x402*-0x4+0x1520+-0x517));}set['minWidth'](_0x131893){_0x131893!==this['_minWidth']&&(this['_minWidth']=_0x131893,this['fire']('resize'));}get['minWidth'](){return this['_minWidth'];}set['minHeight'](_0x30fea9){_0x30fea9!==this['_minHeight']&&(this['_minHeight']=_0x30fea9,this['fire']('resize'));}get['minHeight'](){return this['_minHeight'];}set['maxWidth'](_0x1078e1){_0x1078e1!==this['_maxWidth']&&(this['_maxWidth']=_0x1078e1,this['fire']('resize'));}get['maxWidth'](){return this['_maxWidth'];}set['maxHeight'](_0x4e497f){_0x4e497f!==this['_maxHeight']&&(this['_maxHeight']=_0x4e497f,this['fire']('resize'));}get['maxHeight'](){return this['_maxHeight'];}set['fitWidthPr'+'oportion'](_0x213547){_0x213547!==this['_fitWidthP'+'roportion']&&(this['_fitWidthP'+'roportion']=_0x213547,this['fire']('resize'));}get['fitWidthPr'+'oportion'](){return this['_fitWidthP'+'roportion'];}set['fitHeightP'+'roportion'](_0x4c0175){_0x4c0175!==this['_fitHeight'+'Proportion']&&(this['_fitHeight'+'Proportion']=_0x4c0175,this['fire']('resize'));}get['fitHeightP'+'roportion'](){return this['_fitHeight'+'Proportion'];}set['excludeFro'+'mLayout'](_0x341d03){_0x341d03!==this['_excludeFr'+'omLayout']&&(this['_excludeFr'+'omLayout']=_0x341d03,this['fire']('resize'));}get['excludeFro'+'mLayout'](){return this['_excludeFr'+'omLayout'];}}class tR{constructor(){this['enabled']=!(-0x1*0x2479+0x18c5*-0x1+-0x9*-0x6ce);}}const Sv=['enabled'];class sR extends ct{constructor(_0xbdf2b6){super(_0xbdf2b6),this['id']='layoutchil'+'d',this['ComponentT'+'ype']=gv,this['DataType']=tR,this['schema']=Sv;}['initialize'+'ComponentD'+'ata'](_0x230f8a,_0x244012,_0x1cb584){_0x244012['enabled']!==void(0x228a+-0x13*0x61+-0x1b57)&&(_0x230f8a['enabled']=_0x244012['enabled']),_0x244012['minWidth']!==void(-0x28*-0x7a+0xbf5*-0x2+-0x1b*-0x2e)&&(_0x230f8a['minWidth']=_0x244012['minWidth']),_0x244012['minHeight']!==void(-0x2213+0x3d3*-0xa+0x21*0x231)&&(_0x230f8a['minHeight']=_0x244012['minHeight']),_0x244012['maxWidth']!==void(-0x18*0xca+-0x1a2a*0x1+0x17*0x1f6)&&(_0x230f8a['maxWidth']=_0x244012['maxWidth']),_0x244012['maxHeight']!==void(0x66d+0x3*0x5f7+-0x1852)&&(_0x230f8a['maxHeight']=_0x244012['maxHeight']),_0x244012['fitWidthPr'+'oportion']!==void(0x8*-0x233+0x5d*0x2d+0x13f)&&(_0x230f8a['fitWidthPr'+'oportion']=_0x244012['fitWidthPr'+'oportion']),_0x244012['fitHeightP'+'roportion']!==void(0x93f+0x400+0x1*-0xd3f)&&(_0x230f8a['fitHeightP'+'roportion']=_0x244012['fitHeightP'+'roportion']),_0x244012['excludeFro'+'mLayout']!==void(0x1*-0x1e17+-0x23c*0xf+-0x13*-0x359)&&(_0x230f8a['excludeFro'+'mLayout']=_0x244012['excludeFro'+'mLayout']),super['initialize'+'ComponentD'+'ata'](_0x230f8a,_0x244012,_0x1cb584);}['cloneCompo'+'nent'](_0x4e3b1a,_0x5958f9){const _0x58a8c4=_0x4e3b1a['layoutchil'+'d'];return this['addCompone'+'nt'](_0x5958f9,{'enabled':_0x58a8c4['enabled'],'minWidth':_0x58a8c4['minWidth'],'minHeight':_0x58a8c4['minHeight'],'maxWidth':_0x58a8c4['maxWidth'],'maxHeight':_0x58a8c4['maxHeight'],'fitWidthProportion':_0x58a8c4['fitWidthPr'+'oportion'],'fitHeightProportion':_0x58a8c4['fitHeightP'+'roportion'],'excludeFromLayout':_0x58a8c4['excludeFro'+'mLayout']});}}we['_buildAcce'+'ssors'](gv['prototype'],Sv);const hu=0xb26+-0x9c1+-0x7*0x33,iR=-0x14*-0x1a1+-0x6*-0x52d+-0x3fa1*0x1,wg=0x25a2+0x88d+-0x2e2d,rR=0x3b9*-0xa+0x299*0x3+0x1*0x1d72,fh={};fh[Ae]={'axis':'x','size':'width','calculatedSize':'calculated'+'Width','minSize':'minWidth','maxSize':'maxWidth','fitting':'widthFitti'+'ng','fittingProportion':'fitWidthPr'+'oportion'},fh[je]={'axis':'y','size':'height','calculatedSize':'calculated'+'Height','minSize':'minHeight','maxSize':'maxHeight','fitting':'heightFitt'+'ing','fittingProportion':'fitHeightP'+'roportion'};const qp={};qp[Ae]=je,qp[je]=Ae;const aR={'minWidth':0x0,'minHeight':0x0,'maxWidth':Number['POSITIVE_I'+'NFINITY'],'maxHeight':Number['POSITIVE_I'+'NFINITY'],'width':null,'height':null,'fitWidthProportion':0x0,'fitHeightProportion':0x0},os={'NONE':'NONE','APPLY_STRETCHING':'APPLY_STRE'+'TCHING','APPLY_SHRINKING':'APPLY_SHRI'+'NKING'},ls=new J();function yv(_0x409848){let _0x253981;const _0x3ba1d8=fh[_0x409848],_0x1c888c=fh[qp[_0x409848]];function _0xf27514(_0x3ae013,_0x340832){return-_0x340832[_0x3ba1d8['size']]*_0x3ae013['pivot'][_0x3ba1d8['axis']];}function _0x155a14(_0x31fb49,_0x487799){return-_0x487799[_0x1c888c['size']]*_0x31fb49['pivot'][_0x1c888c['axis']];}function _0x52f86f(_0x1284d6,_0x3e8030){return _0x3e8030[_0x3ba1d8['size']]*(0x95*-0x10+0xd6*-0x22+-0x25bd*-0x1-_0x1284d6['pivot'][_0x3ba1d8['axis']]);}function _0x18e00e(_0x3eaafa,_0x5360f4){_0x3eaafa=_0x3eaafa['filter'](_0x27df4e),_0x253981=_0x5360f4,ls['x']=_0x253981['containerS'+'ize']['x']-_0x253981['padding']['x']-_0x253981['padding']['z'],ls['y']=_0x253981['containerS'+'ize']['y']-_0x253981['padding']['y']-_0x253981['padding']['w'],_0x495ab7(_0x3eaafa);const _0x8e0244=_0x2b0b43(_0xf77799(_0x3eaafa)),_0x3a47b=_0x4a8b72(_0x8e0244,_0x148caf(_0x8e0244)),_0x3bb6a6=_0x2dad69(_0x8e0244,_0x3a47b);return _0x327220(_0x8e0244,_0x3a47b,_0x3bb6a6),_0x2b8bfe(_0x8e0244,_0x3a47b,_0x3bb6a6),_0x361fe6(_0x8e0244);}function _0x27df4e(_0xd0a46a){const _0x58e437=_0xd0a46a['entity']['layoutchil'+'d'];return!_0x58e437||!_0x58e437['enabled']||!_0x58e437['excludeFro'+'mLayout'];}function _0x495ab7(_0x310ed3){for(let _0x22a396=0x1b3d+0x5af+-0x20ec;_0x22a396<_0x310ed3['length'];++_0x22a396){const _0x144449=_0x310ed3[_0x22a396],_0xfda781=_0x144449['anchor'];(_0xfda781['x']!==0x1d*-0xcb+0x1e4e*-0x1+0x5*0xaa9||_0xfda781['y']!==0x6a9*0x5+-0xcb5+-0x1498||_0xfda781['z']!==0x503+0x3f*-0x75+0x1*0x17c8||_0xfda781['w']!==0x1*-0xea2+0x1945+-0xaa3)&&(_0x144449['anchor']=re['ZERO']);}}function _0xf77799(_0xbafb3c){if(!_0x253981['wrap'])return[_0xbafb3c];const _0x1ded24=[[]],_0x2d7c78=_0x569b7c(_0xbafb3c);let _0x4af53b=-0x26b2+0xd2*-0x24+0x443a;const _0x7fddf0=_0x253981[_0x3ba1d8['fitting']]===wg;for(let _0x522261=0x158*0x6+0x128b+-0x7*0x3cd;_0x522261<_0xbafb3c['length'];++_0x522261){_0x1ded24[_0x1ded24['length']-(-0x4*0x748+0xb3*-0x13+-0x2*-0x1535)]['length']>0x3*0xa9f+0x455+0x52*-0x71&&(_0x4af53b+=_0x253981['spacing'][_0x3ba1d8['axis']]);const _0xd6f6c1=_0x2d7c78[_0x522261][_0x3ba1d8['size']];_0x4af53b+=_0xd6f6c1,!_0x7fddf0&&_0x4af53b>ls[_0x3ba1d8['axis']]&&_0x1ded24[_0x1ded24['length']-(0x1da6+-0x17c9+-0x5dc)]['length']!==-0xae5*-0x2+-0x2f5*-0xb+-0x3651&&(_0x4af53b=_0xd6f6c1,_0x1ded24['push']([])),_0x1ded24[_0x1ded24['length']-(0x690+0xb*0x19f+-0x1864)]['push'](_0xbafb3c[_0x522261]),_0x7fddf0&&_0x4af53b>ls[_0x3ba1d8['axis']]&&_0x522261!==_0xbafb3c['length']-(-0x927+0xe0a+-0x271*0x2)&&(_0x4af53b=-0x1*0x44f+-0x6*-0x62+0x203,_0x1ded24['push']([]));}return _0x1ded24;}function _0x2b0b43(_0x8b092b){const _0x8861e1=_0x253981['orientatio'+'n']===Ae&&_0x253981['reverseX']||_0x253981['orientatio'+'n']===je&&_0x253981['reverseY'],_0x24d3b8=_0x253981['orientatio'+'n']===Ae&&_0x253981['reverseY']||_0x253981['orientatio'+'n']===je&&_0x253981['reverseX'];if(_0x8861e1){for(let _0x3650e5=0x2360+-0x65*-0x9+-0x26ed*0x1;_0x3650e5<_0x8b092b['length'];++_0x3650e5)_0x8861e1&&_0x8b092b[_0x3650e5]['reverse']();}return _0x24d3b8&&_0x8b092b['reverse'](),_0x8b092b;}function _0x148caf(_0x13369d){const _0x551702=[];for(let _0x26db4b=0x8*0xa+-0x48*0x5+0x8c*0x2;_0x26db4b<_0x13369d['length'];++_0x26db4b){const _0x3a544f=_0x13369d[_0x26db4b],_0x1870ed=_0x569b7c(_0x3a544f),_0xa8cf8b=_0x1ef88c(_0x1870ed,_0x3ba1d8),_0x12481a=_0xaec503(_0x253981[_0x3ba1d8['fitting']],_0xa8cf8b,ls[_0x3ba1d8['axis']]);_0x12481a===os['APPLY_STRE'+'TCHING']?_0x180e2b(_0x1870ed,_0xa8cf8b,_0x3ba1d8):_0x12481a===os['APPLY_SHRI'+'NKING']&&_0x1e173a(_0x1870ed,_0xa8cf8b,_0x3ba1d8),_0x551702['push'](_0x1870ed);}return _0x551702;}function _0x4a8b72(_0x4295ce,_0x27a74f){const _0x3e6a92=[],_0x3aad2f=[];for(let _0x4b1d4d=0xfe*-0x1f+-0x26bf+0x7b9*0x9;_0x4b1d4d<_0x4295ce['length'];++_0x4b1d4d){const _0x4a13f6=_0x4295ce[_0x4b1d4d];_0x4a13f6['largestEle'+'ment']=null,_0x4a13f6['largestSiz'+'e']={'width':Number['NEGATIVE_I'+'NFINITY'],'height':Number['NEGATIVE_I'+'NFINITY']};for(let _0x56edea=0x252*0x1+-0x1f*0x10d+0x1e41;_0x56edea<_0x4a13f6['length'];++_0x56edea){const _0x1c91f3=_0x27a74f[_0x4b1d4d][_0x56edea];_0x1c91f3[_0x1c888c['size']]>_0x4a13f6['largestSiz'+'e'][_0x1c888c['size']]&&(_0x4a13f6['largestEle'+'ment']=_0x4a13f6[_0x56edea],_0x4a13f6['largestSiz'+'e']=_0x1c91f3);}_0x3e6a92['push'](_0x4a13f6['largestEle'+'ment']),_0x3aad2f['push'](_0x4a13f6['largestSiz'+'e']);}const _0x5d4212=_0x1ef88c(_0x3aad2f,_0x1c888c),_0x566ea1=_0xaec503(_0x253981[_0x1c888c['fitting']],_0x5d4212,ls[_0x1c888c['axis']]);_0x566ea1===os['APPLY_STRE'+'TCHING']?_0x180e2b(_0x3aad2f,_0x5d4212,_0x1c888c):_0x566ea1===os['APPLY_SHRI'+'NKING']&&_0x1e173a(_0x3aad2f,_0x5d4212,_0x1c888c);for(let _0x88056b=0x1e65+0xa01+-0x2866;_0x88056b<_0x4295ce['length'];++_0x88056b){const _0x5e5c0c=_0x4295ce[_0x88056b];for(let _0xd017c5=-0x4*-0x646+-0xb66+-0xdb2;_0xd017c5<_0x5e5c0c['length'];++_0xd017c5){const _0x2f3be0=_0x27a74f[_0x88056b][_0xd017c5],_0x5d7f72=_0x2f3be0[_0x1c888c['size']],_0x3a3f00=_0x4295ce['length']===-0x1c*-0xb9+0x1*-0x114+-0x1327?ls[_0x1c888c['axis']]:_0x5e5c0c['largestSiz'+'e'][_0x1c888c['size']],_0x161c21=_0xaec503(_0x253981[_0x1c888c['fitting']],_0x5d7f72,_0x3a3f00);_0x161c21===os['APPLY_STRE'+'TCHING']?_0x2f3be0[_0x1c888c['size']]=Math['min'](_0x3a3f00,_0x2f3be0[_0x1c888c['maxSize']]):_0x161c21===os['APPLY_SHRI'+'NKING']&&(_0x2f3be0[_0x1c888c['size']]=Math['max'](_0x3a3f00,_0x2f3be0[_0x1c888c['minSize']]));}}return _0x27a74f;}function _0xaec503(_0x1a7f08,_0x43417a,_0x51a2b0){switch(_0x1a7f08){case hu:return os['NONE'];case iR:return _0x43417a<_0x51a2b0?os['APPLY_STRE'+'TCHING']:os['NONE'];case wg:return _0x43417a>=_0x51a2b0?os['APPLY_SHRI'+'NKING']:os['NONE'];case rR:return _0x43417a<_0x51a2b0?os['APPLY_STRE'+'TCHING']:os['APPLY_SHRI'+'NKING'];default:throw new Error('Unrecogniz'+'ed\x20fitting'+'\x20mode:\x20'+_0x1a7f08);}}function _0x1ef88c(_0x254709,_0x48388f){const _0x1d18bf=_0x42623b(_0x254709,_0x48388f['size']),_0x5b7d61=(_0x254709['length']-(-0x1*0x22e5+0x2a5+-0x17*-0x167))*_0x253981['spacing'][_0x48388f['axis']];return _0x1d18bf+_0x5b7d61;}function _0x180e2b(_0x4f630e,_0x2eb8ca,_0x43b6b4){const _0x4b4ee0=_0x49f723(_0x4f630e,_0x43b6b4['maxSize']),_0x36d5d0=_0x15fe28(_0x4f630e,_0x43b6b4['fittingPro'+'portion']),_0x4a3e8c=_0x3830a1(_0x36d5d0,_0x4b4ee0);let _0x57bc71=ls[_0x43b6b4['axis']]-_0x2eb8ca;for(let _0x4e7407=-0x92f+-0xde4+0x7b1*0x3;_0x4e7407<_0x4f630e['length'];++_0x4e7407){const _0x179ef0=_0x4b4ee0[_0x4e7407],_0x36d53a=_0x548fe8(_0x179ef0,_0x57bc71,_0x36d5d0,_0x4a3e8c),_0xffa2ec=_0x4f630e[_0x179ef0][_0x43b6b4['size']]+_0x36d53a,_0x216308=_0x4f630e[_0x179ef0][_0x43b6b4['maxSize']],_0x30e830=Math['min'](_0xffa2ec,_0x216308);_0x4f630e[_0x179ef0][_0x43b6b4['size']]=_0x30e830;const _0x202f23=Math['max'](_0xffa2ec-_0x30e830,0x49*-0x7b+0x9b7+0x195c),_0x5092e3=_0x36d53a-_0x202f23;_0x57bc71-=_0x5092e3;}}function _0x1e173a(_0x31a61f,_0x379235,_0x2d79b0){const _0x27e8c1=_0x49f723(_0x31a61f,_0x2d79b0['minSize'],!(0xb*-0x318+0x2*-0xa76+0x36f4)),_0x1f73fd=_0x15fe28(_0x31a61f,_0x2d79b0['fittingPro'+'portion']),_0x1f9461=_0x8f42ab(_0x1f73fd),_0x34e394=_0x3830a1(_0x1f9461,_0x27e8c1);let _0x485c8b=_0x379235-ls[_0x2d79b0['axis']];for(let _0x41ade2=0x141c+-0x2579+0x379*0x5;_0x41ade2<_0x31a61f['length'];++_0x41ade2){const _0x542f17=_0x27e8c1[_0x41ade2],_0x1bb0f0=_0x548fe8(_0x542f17,_0x485c8b,_0x1f9461,_0x34e394),_0x36c76c=_0x31a61f[_0x542f17][_0x2d79b0['size']]-_0x1bb0f0,_0x132fb4=_0x31a61f[_0x542f17][_0x2d79b0['minSize']],_0x30ea62=Math['max'](_0x36c76c,_0x132fb4);_0x31a61f[_0x542f17][_0x2d79b0['size']]=_0x30ea62;const _0x156116=Math['max'](_0x30ea62-_0x36c76c,0xe03+0x9f0+-0x1*0x17f3),_0x33d0c9=_0x1bb0f0-_0x156116;_0x485c8b-=_0x33d0c9;}}function _0x548fe8(_0x16bebb,_0x5b455e,_0x3d1100,_0x451c53){const _0x976677=_0x3d1100[_0x16bebb],_0x1fe656=_0x451c53[_0x16bebb];return Math['abs'](_0x976677)<-0x1240+0xb67+0x6d9+0.00001&&Math['abs'](_0x1fe656)<0xcf7+-0x661*0x2+0x35*-0x1+0.00001?_0x5b455e:_0x5b455e*_0x976677/_0x1fe656;}function _0x2dad69(_0x388c28,_0x285721){const _0x34e993={};_0x34e993[_0x3ba1d8['axis']]=-0x1*0x10df+-0x1598+0x2677,_0x34e993[_0x1c888c['axis']]=0x70d+0x41f+-0xb2c,_0x388c28[_0x3ba1d8['size']]=Number['NEGATIVE_I'+'NFINITY'];const _0x51ea9e=[];for(let _0x4e89fa=0x1d12+-0x20cc+0x3ba;_0x4e89fa<_0x388c28['length'];++_0x4e89fa){const _0x4e48ee=_0x388c28[_0x4e89fa];if(_0x4e48ee['length']===0x171a*-0x1+-0x2138+0x10b*0x36){_0x51ea9e['push']([]);continue;}const _0xd9a999=[],_0x213743=_0x285721[_0x4e89fa];for(let _0x190613=0x7f5+0x1e3d*-0x1+0x1648;_0x190613<_0x4e48ee['length'];++_0x190613){const _0x2b4594=_0x4e48ee[_0x190613],_0x34fc17=_0x213743[_0x190613];_0x34e993[_0x1c888c['axis']]-=_0x155a14(_0x2b4594,_0x34fc17),_0x34e993[_0x3ba1d8['axis']]-=_0xf27514(_0x2b4594,_0x34fc17),_0xd9a999[_0x190613]={},_0xd9a999[_0x190613][_0x3ba1d8['axis']]=_0x34e993[_0x3ba1d8['axis']],_0xd9a999[_0x190613][_0x1c888c['axis']]=_0x34e993[_0x1c888c['axis']],_0x34e993[_0x1c888c['axis']]+=_0x155a14(_0x2b4594,_0x34fc17),_0x34e993[_0x3ba1d8['axis']]+=_0x52f86f(_0x2b4594,_0x34fc17)+_0x253981['spacing'][_0x3ba1d8['axis']];}_0x4e48ee[_0x3ba1d8['size']]=_0x34e993[_0x3ba1d8['axis']]-_0x253981['spacing'][_0x3ba1d8['axis']],_0x4e48ee[_0x1c888c['size']]=_0x4e48ee['largestSiz'+'e'][_0x1c888c['size']],_0x388c28[_0x3ba1d8['size']]=Math['max'](_0x388c28[_0x3ba1d8['size']],_0x4e48ee[_0x3ba1d8['size']]),_0x34e993[_0x3ba1d8['axis']]=-0x14ad+-0x2148+-0x1*-0x35f5,_0x34e993[_0x1c888c['axis']]+=_0x4e48ee[_0x1c888c['size']]+_0x253981['spacing'][_0x1c888c['axis']],_0x51ea9e['push'](_0xd9a999);}return _0x388c28[_0x1c888c['size']]=_0x34e993[_0x1c888c['axis']]-_0x253981['spacing'][_0x1c888c['axis']],_0x51ea9e;}function _0x327220(_0x4ed973,_0x10344d,_0x449a4f){const _0x5296cb=_0x253981['alignment'][_0x3ba1d8['axis']],_0xc2da17=_0x253981['alignment'][_0x1c888c['axis']],_0x204237=_0x253981['padding'][_0x3ba1d8['axis']],_0x548a2f=_0x253981['padding'][_0x1c888c['axis']];for(let _0x48e270=0xfe6+-0x2*0x147+0x3d*-0x38;_0x48e270<_0x4ed973['length'];++_0x48e270){const _0x16ed07=_0x4ed973[_0x48e270],_0x5c2a37=_0x10344d[_0x48e270],_0x3e355a=_0x449a4f[_0x48e270],_0x2cb788=(ls[_0x3ba1d8['axis']]-_0x16ed07[_0x3ba1d8['size']])*_0x5296cb+_0x204237,_0x2b7b6e=(ls[_0x1c888c['axis']]-_0x4ed973[_0x1c888c['size']])*_0xc2da17+_0x548a2f;for(let _0xe012f=-0x20dd*0x1+0x1165+0x7bc*0x2;_0xe012f<_0x16ed07['length'];++_0xe012f){const _0x10e4b5=(_0x16ed07[_0x1c888c['size']]-_0x5c2a37[_0xe012f][_0x1c888c['size']])*_0x253981['alignment'][_0x1c888c['axis']];_0x3e355a[_0xe012f][_0x3ba1d8['axis']]+=_0x2cb788,_0x3e355a[_0xe012f][_0x1c888c['axis']]+=_0x2b7b6e+_0x10e4b5;}}}function _0x2b8bfe(_0x505fca,_0xf22fb5,_0x5c8663){for(let _0x52de26=0x10bd+0x1ea+0xbf*-0x19;_0x52de26<_0x505fca['length'];++_0x52de26){const _0xd70e0d=_0x505fca[_0x52de26],_0x5982d0=_0xf22fb5[_0x52de26],_0x439631=_0x5c8663[_0x52de26];for(let _0x485b9a=-0x6*0x3e6+0x111d+0x647;_0x485b9a<_0xd70e0d['length'];++_0x485b9a){const _0x2ff82d=_0xd70e0d[_0x485b9a];_0x2ff82d[_0x3ba1d8['calculated'+'Size']]=_0x5982d0[_0x485b9a][_0x3ba1d8['size']],_0x2ff82d[_0x1c888c['calculated'+'Size']]=_0x5982d0[_0x485b9a][_0x1c888c['size']],_0x253981['orientatio'+'n']===Ae?_0x2ff82d['entity']['setLocalPo'+'sition'](_0x439631[_0x485b9a][_0x3ba1d8['axis']],_0x439631[_0x485b9a][_0x1c888c['axis']],_0x2ff82d['entity']['getLocalPo'+'sition']()['z']):_0x2ff82d['entity']['setLocalPo'+'sition'](_0x439631[_0x485b9a][_0x1c888c['axis']],_0x439631[_0x485b9a][_0x3ba1d8['axis']],_0x2ff82d['entity']['getLocalPo'+'sition']()['z']);}}}function _0x361fe6(_0x342e78){const _0x1fd45f=_0x342e78['width'],_0x416238=_0x342e78['height'],_0x122981=(ls['x']-_0x1fd45f)*_0x253981['alignment']['x']+_0x253981['padding']['x'],_0x4ec41c=(ls['y']-_0x416238)*_0x253981['alignment']['y']+_0x253981['padding']['y'];return{'bounds':new re(_0x122981,_0x4ec41c,_0x1fd45f,_0x416238)};}function _0x569b7c(_0x36fa46){const _0x290c93=[];for(let _0x211ee3=0x60*-0x43+-0x19b+0x1*0x1abb;_0x211ee3<_0x36fa46['length'];++_0x211ee3){const _0x25356c=_0x36fa46[_0x211ee3],_0x45eab1=Math['max'](_0x514b1b(_0x25356c,'minWidth'),-0x1782+-0x185c+-0x2fde*-0x1),_0x1680a4=Math['max'](_0x514b1b(_0x25356c,'minHeight'),-0x38f+-0x1*0x2311+-0x9a8*-0x4),_0x14469a=Math['max'](_0x514b1b(_0x25356c,'maxWidth'),_0x45eab1),_0x38e293=Math['max'](_0x514b1b(_0x25356c,'maxHeight'),_0x1680a4),_0x1c00fb=_0x412483(_0x514b1b(_0x25356c,'width'),_0x45eab1,_0x14469a),_0x2c4862=_0x412483(_0x514b1b(_0x25356c,'height'),_0x1680a4,_0x38e293),_0x5a73ba=_0x514b1b(_0x25356c,'fitWidthPr'+'oportion'),_0x5376d6=_0x514b1b(_0x25356c,'fitHeightP'+'roportion');_0x290c93['push']({'minWidth':_0x45eab1,'minHeight':_0x1680a4,'maxWidth':_0x14469a,'maxHeight':_0x38e293,'width':_0x1c00fb,'height':_0x2c4862,'fitWidthProportion':_0x5a73ba,'fitHeightProportion':_0x5376d6});}return _0x290c93;}function _0x514b1b(_0x18a320,_0x383efe){const _0x2e6c0f=_0x18a320['entity']['layoutchil'+'d'];return _0x2e6c0f&&_0x2e6c0f['enabled']&&_0x2e6c0f[_0x383efe]!==void(-0x33*0x7f+0xe3*-0x3+0x1bf6)&&_0x2e6c0f[_0x383efe]!==null?_0x2e6c0f[_0x383efe]:_0x18a320[_0x383efe]!==void(-0x1d*0xb6+0x2*0x1335+-0x11cc)?_0x18a320[_0x383efe]:aR[_0x383efe];}function _0x412483(_0x359c80,_0x1fd1d5,_0x1c686d){return Math['min'](Math['max'](_0x359c80,_0x1fd1d5),_0x1c686d);}function _0x42623b(_0x30ca75,_0x15301f){return _0x30ca75['reduce']((_0x15c3c0,_0xbb4260)=>_0x15c3c0+_0xbb4260[_0x15301f],-0x1b77+-0x221+-0x8*-0x3b3);}function _0x15fe28(_0x5df491,_0x1abf06){const _0x2785ff=_0x42623b(_0x5df491,_0x1abf06),_0xd5d453=[],_0x4c8ebe=_0x5df491['length'];if(_0x2785ff===-0x1a03+0x1d4d+-0x34a){for(let _0x2d07eb=0x1496+-0x1ba4+-0x2*-0x387;_0x2d07eb<_0x4c8ebe;++_0x2d07eb)_0xd5d453['push']((0x1ca0+0xb*0x2e3+-0x3c60)/_0x4c8ebe);}else{for(let _0x458dc7=-0x1*0x90d+-0x1*0x2050+0x295d;_0x458dc7<_0x4c8ebe;++_0x458dc7)_0xd5d453['push'](_0x5df491[_0x458dc7][_0x1abf06]/_0x2785ff);}return _0xd5d453;}function _0x8f42ab(_0x8f58ad){if(_0x8f58ad['length']===0x1dd9+0xed*-0xf+-0xff5*0x1)return[-0x1bfc+-0x1b77+0x1c*0x1fb];const _0x379fb3=[],_0x4a16bc=_0x8f58ad['length'];for(let _0x2051be=-0x1819+-0x10c7+0x28e0;_0x2051be<_0x4a16bc;++_0x2051be)_0x379fb3['push']((0x22*0x115+0x1735+-0x892*0x7-_0x8f58ad[_0x2051be])/(_0x4a16bc-(0x8f*-0x20+-0x699+0x187a)));return _0x379fb3;}function _0x49f723(_0x41add9,_0x2888a0,_0x173102){return _0x41add9['forEach'](_0x4d0be6),_0x41add9['slice']()['sort']((_0x529e50,_0x112805)=>_0x173102?_0x112805[_0x2888a0]-_0x529e50[_0x2888a0]:_0x529e50[_0x2888a0]-_0x112805[_0x2888a0])['map'](_0x1cfdc1);}function _0x4d0be6(_0x205e83,_0x3963d1){_0x205e83['index']=_0x3963d1;}function _0x1cfdc1(_0x40e5c5){return _0x40e5c5['index'];}function _0x3830a1(_0x4ca681,_0x29d127){const _0x593af1=[];_0x593af1[_0x29d127[_0x4ca681['length']-(0x1f6*-0xd+-0xe01+-0x4f*-0x80)]]=_0x4ca681[_0x29d127[_0x4ca681['length']-(0x212f*0x1+0x7*0x309+-0x366d)]];for(let _0x432b44=_0x4ca681['length']-(0x1fc6+0x993+0x22d*-0x13);_0x432b44>=-0x5*0x6ec+0x1*0x164f+0xc4d;--_0x432b44)_0x593af1[_0x29d127[_0x432b44]]=_0x593af1[_0x29d127[_0x432b44+(0x5*-0x3d3+-0x1426+0x2746)]]+_0x4ca681[_0x29d127[_0x432b44]];return _0x593af1;}return _0x18e00e;}const jp={};jp[Ae]=yv(Ae),jp[je]=yv(je);class nR{['calculateL'+'ayout'](_0x578e01,_0x523e52){const _0x151e3f=jp[_0x523e52['orientatio'+'n']];if(_0x151e3f)return _0x151e3f(_0x578e01,_0x523e52);throw new Error('Unrecogniz'+'ed\x20orienta'+'tion\x20value'+':\x20'+_0x523e52['orientatio'+'n']);}}function Eg(_0x3b108){return _0x3b108['element'];}function oR(_0x16103e){return _0x16103e['enabled']&&_0x16103e['element']&&_0x16103e['element']['enabled'];}class vv extends we{constructor(_0xf96081,_0x1d4159){super(_0xf96081,_0x1d4159),h(this,'_orientati'+'on',Ae),h(this,'_reverseX',!(-0x16d7*-0x1+-0x1295+-0x441)),h(this,'_reverseY',!(0x26d5+-0x1cb8+-0x35f*0x3)),h(this,'_alignment',new J(-0x1*-0x154b+0x2239+-0x3784,0x246e+-0x10*-0x6e+-0x2e3*0xf)),h(this,'_padding',new re()),h(this,'_spacing',new J()),h(this,'_widthFitt'+'ing',hu),h(this,'_heightFit'+'ting',hu),h(this,'_wrap',!(0x1a93+-0x1759+-0x339)),h(this,'_layoutCal'+'culator',new nR()),(this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'on'),this['entity']['children']['forEach'](_0x13df5a=>{this['_listenFor'+'ReflowEven'+'ts'](_0x13df5a,'on');}),this['entity']['on']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['on']('childremov'+'e',this['_onChildRe'+'move'],this),w['assert'](_0xf96081['app']['systems']['element'],'System\x20\x27el'+'ement\x27\x20doe'+'sn\x27t\x20exist'),_0xf96081['app']['systems']['element']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0xf96081['app']['systems']['element']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),w['assert'](_0xf96081['app']['systems']['layoutchil'+'d'],'System\x20\x27la'+'youtchild\x27'+'\x20doesn\x27t\x20e'+'xist'),_0xf96081['app']['systems']['layoutchil'+'d']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0xf96081['app']['systems']['layoutchil'+'d']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this));}set['orientatio'+'n'](_0x4fb841){_0x4fb841!==this['_orientati'+'on']&&(this['_orientati'+'on']=_0x4fb841,this['_scheduleR'+'eflow']());}get['orientatio'+'n'](){return this['_orientati'+'on'];}set['reverseX'](_0x4eafde){_0x4eafde!==this['_reverseX']&&(this['_reverseX']=_0x4eafde,this['_scheduleR'+'eflow']());}get['reverseX'](){return this['_reverseX'];}set['reverseY'](_0x56f4ac){_0x56f4ac!==this['_reverseY']&&(this['_reverseY']=_0x56f4ac,this['_scheduleR'+'eflow']());}get['reverseY'](){return this['_reverseY'];}set['alignment'](_0x5b7ebe){_0x5b7ebe['equals'](this['_alignment'])||(this['_alignment']['copy'](_0x5b7ebe),this['_scheduleR'+'eflow']());}get['alignment'](){return this['_alignment'];}set['padding'](_0xcabf79){_0xcabf79['equals'](this['_padding'])||(this['_padding']['copy'](_0xcabf79),this['_scheduleR'+'eflow']());}get['padding'](){return this['_padding'];}set['spacing'](_0x3a3658){_0x3a3658['equals'](this['_spacing'])||(this['_spacing']['copy'](_0x3a3658),this['_scheduleR'+'eflow']());}get['spacing'](){return this['_spacing'];}set['widthFitti'+'ng'](_0x2001e0){_0x2001e0!==this['_widthFitt'+'ing']&&(this['_widthFitt'+'ing']=_0x2001e0,this['_scheduleR'+'eflow']());}get['widthFitti'+'ng'](){return this['_widthFitt'+'ing'];}set['heightFitt'+'ing'](_0x2b4c5d){_0x2b4c5d!==this['_heightFit'+'ting']&&(this['_heightFit'+'ting']=_0x2b4c5d,this['_scheduleR'+'eflow']());}get['heightFitt'+'ing'](){return this['_heightFit'+'ting'];}set['wrap'](_0x34f4cc){_0x34f4cc!==this['_wrap']&&(this['_wrap']=_0x34f4cc,this['_scheduleR'+'eflow']());}get['wrap'](){return this['_wrap'];}['_isSelfOrC'+'hild'](_0x40774a){return _0x40774a===this['entity']||this['entity']['children']['indexOf'](_0x40774a)!==-(-0x612+0x7*0x222+-0x8db);}['_listenFor'+'ReflowEven'+'ts'](_0x39b963,_0x36a614){_0x39b963['element']&&(_0x39b963['element'][_0x36a614]('enableelem'+'ent',this['_scheduleR'+'eflow'],this),_0x39b963['element'][_0x36a614]('disableele'+'ment',this['_scheduleR'+'eflow'],this),_0x39b963['element'][_0x36a614]('resize',this['_scheduleR'+'eflow'],this),_0x39b963['element'][_0x36a614]('set:pivot',this['_scheduleR'+'eflow'],this)),_0x39b963['layoutchil'+'d']&&(_0x39b963['layoutchil'+'d'][_0x36a614]('set_enable'+'d',this['_scheduleR'+'eflow'],this),_0x39b963['layoutchil'+'d'][_0x36a614]('resize',this['_scheduleR'+'eflow'],this));}['_onElement'+'OrLayoutCo'+'mponentAdd'](_0x7f4121){this['_isSelfOrC'+'hild'](_0x7f4121)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x7f4121,'on'),this['_scheduleR'+'eflow']());}['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'](_0x25b936){this['_isSelfOrC'+'hild'](_0x25b936)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x25b936,'off'),this['_scheduleR'+'eflow']());}['_onChildIn'+'sert'](_0x3979f7){this['_listenFor'+'ReflowEven'+'ts'](_0x3979f7,'on'),this['_scheduleR'+'eflow']();}['_onChildRe'+'move'](_0x4af427){this['_listenFor'+'ReflowEven'+'ts'](_0x4af427,'off'),this['_scheduleR'+'eflow']();}['_scheduleR'+'eflow'](){this['enabled']&&this['entity']&&this['entity']['enabled']&&!this['_isPerform'+'ingReflow']&&this['system']['scheduleRe'+'flow'](this);}['reflow'](){const _0x4d7508=Eg(this['entity']),_0x275c01=this['entity']['children']['filter'](oR)['map'](Eg);if(!_0x4d7508||_0x275c01['length']===-0x1bfe+0x6b7*0x1+0x1547)return;const _0xc477b9=Math['max'](_0x4d7508['calculated'+'Width'],-0xb57+-0x1f3*-0x11+0x1*-0x15cc),_0x1157c1=Math['max'](_0x4d7508['calculated'+'Height'],-0x14e9+0x19e4+0x33*-0x19),_0x3b40ac={'orientation':this['_orientati'+'on'],'reverseX':this['_reverseX'],'reverseY':this['_reverseY'],'alignment':this['_alignment'],'padding':this['_padding'],'spacing':this['_spacing'],'widthFitting':this['_widthFitt'+'ing'],'heightFitting':this['_heightFit'+'ting'],'wrap':this['_wrap'],'containerSize':new J(_0xc477b9,_0x1157c1)};this['_isPerform'+'ingReflow']=!(-0x1b26+-0x1702+0x3228);const _0x4f84c9=this['_layoutCal'+'culator']['calculateL'+'ayout'](_0x275c01,_0x3b40ac);this['_isPerform'+'ingReflow']=!(0x1191+-0x6d*-0x16+-0x1aee),this['fire']('reflow',_0x4f84c9);}['onEnable'](){this['_scheduleR'+'eflow']();}['onRemove'](){this['entity']['off']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['off']('childremov'+'e',this['_onChildRe'+'move'],this),this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'off'),this['entity']['children']['forEach'](_0x2f40e8=>{this['_listenFor'+'ReflowEven'+'ts'](_0x2f40e8,'off');}),this['system']['app']['systems']['element']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['element']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this);}}class lR{constructor(){this['enabled']=!(-0xd12+0x13f8+0x2*-0x373);}}const xv=['enabled'],cR=-0x26b+0x43*-0x1a+0x1*0x99d;class hR extends ct{constructor(_0x49bf8f){super(_0x49bf8f),this['id']='layoutgrou'+'p',this['ComponentT'+'ype']=vv,this['DataType']=lR,this['schema']=xv,this['_reflowQue'+'ue']=[],this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x4e51e1,_0x55278b,_0x453549){_0x55278b['enabled']!==void(0x1*-0x419+0x4*0x6a3+-0x1673)&&(_0x4e51e1['enabled']=_0x55278b['enabled']),_0x55278b['orientatio'+'n']!==void(-0x3e7*0x4+0x10*0x14+0x4*0x397)&&(_0x4e51e1['orientatio'+'n']=_0x55278b['orientatio'+'n']),_0x55278b['reverseX']!==void(-0x71f*-0x2+0xc5f+-0x1a9d)&&(_0x4e51e1['reverseX']=_0x55278b['reverseX']),_0x55278b['reverseY']!==void(-0x258+0x3*-0x91f+0x2d*0xa9)&&(_0x4e51e1['reverseY']=_0x55278b['reverseY']),_0x55278b['alignment']!==void(0x1325+-0x185f+0x6*0xdf)&&(_0x4e51e1['alignment']=Array['isArray'](_0x55278b['alignment'])?new J(_0x55278b['alignment']):_0x55278b['alignment']),_0x55278b['padding']!==void(-0x70*-0x56+0xc5a+-0x18fd*0x2)&&(_0x4e51e1['padding']=Array['isArray'](_0x55278b['padding'])?new re(_0x55278b['padding']):_0x55278b['padding']),_0x55278b['spacing']!==void(0x1*-0x925+-0x1b0c+-0x1*-0x2431)&&(_0x4e51e1['spacing']=Array['isArray'](_0x55278b['spacing'])?new J(_0x55278b['spacing']):_0x55278b['spacing']),_0x55278b['widthFitti'+'ng']!==void(-0x5c9+0x1ef2+-0x1929)&&(_0x4e51e1['widthFitti'+'ng']=_0x55278b['widthFitti'+'ng']),_0x55278b['heightFitt'+'ing']!==void(0x2*-0xb4e+0x76*-0x12+0x1ee8)&&(_0x4e51e1['heightFitt'+'ing']=_0x55278b['heightFitt'+'ing']),_0x55278b['wrap']!==void(-0x12aa+0x1*0x26c9+-0x141f)&&(_0x4e51e1['wrap']=_0x55278b['wrap']),super['initialize'+'ComponentD'+'ata'](_0x4e51e1,_0x55278b,_0x453549);}['cloneCompo'+'nent'](_0x23246f,_0x1e9856){const _0xb60ae8=_0x23246f['layoutgrou'+'p'];return this['addCompone'+'nt'](_0x1e9856,{'enabled':_0xb60ae8['enabled'],'orientation':_0xb60ae8['orientatio'+'n'],'reverseX':_0xb60ae8['reverseX'],'reverseY':_0xb60ae8['reverseY'],'alignment':_0xb60ae8['alignment'],'padding':_0xb60ae8['padding'],'spacing':_0xb60ae8['spacing'],'widthFitting':_0xb60ae8['widthFitti'+'ng'],'heightFitting':_0xb60ae8['heightFitt'+'ing'],'wrap':_0xb60ae8['wrap']});}['scheduleRe'+'flow'](_0x28e55a){this['_reflowQue'+'ue']['indexOf'](_0x28e55a)===-(0x1cb8+0x122f+-0x1773*0x2)&&this['_reflowQue'+'ue']['push'](_0x28e55a);}['_onPostUpd'+'ate'](){this['_processRe'+'flowQueue']();}['_processRe'+'flowQueue'](){if(this['_reflowQue'+'ue']['length']===0x1*-0x1821+0x2*-0x1337+0x3e8f)return;let _0x2bd8a2=0x95*-0x17+0x9ec*-0x1+0x174f;for(;this['_reflowQue'+'ue']['length']>0x689*0x1+-0x4*-0x590+0x1*-0x1cc9;){const _0x24a3b6=this['_reflowQue'+'ue']['slice']();this['_reflowQue'+'ue']['length']=0x89d+-0x1f6a+0x16cd*0x1,_0x24a3b6['sort']((_0xd7350,_0x346f20)=>_0xd7350['entity']['graphDepth']-_0x346f20['entity']['graphDepth']);for(let _0x4ad0cf=0x1*0x1127+-0x1a30*0x1+0x909;_0x4ad0cf<_0x24a3b6['length'];++_0x4ad0cf)_0x24a3b6[_0x4ad0cf]['reflow']();if(++_0x2bd8a2>=cR){console['warn']('Max\x20reflow'+'\x20iteration'+'s\x20limit\x20re'+'ached,\x20bai'+'ling.');break;}}}['_onRemoveC'+'omponent'](_0x15f3ee,_0x3ea3f3){_0x3ea3f3['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}we['_buildAcce'+'ssors'](vv['prototype'],xv);class dR{constructor(){h(this,'map',new Map());}['destroy'](_0x155a3b){this['map']['forEach'](_0x411c9e=>_0x411c9e['mesh']['destroy']());}}const fR=new Kt(),Tv=(_0x44a185,_0x397bd8)=>{const _0x4d50db=fR['get'](_0x44a185,()=>new dR());let _0x256d83=_0x4d50db['map']['get'](_0x397bd8);if(!_0x256d83){let _0x24d869,_0x3a829a;switch(_0x397bd8){case'box':_0x24d869=Ge['fromGeomet'+'ry'](_0x44a185,new Hf()),_0x3a829a={'x':0x2,'y':0x2,'z':0x2,'uv':(-0x1e5f+0x2362+-0xb7*0x7)/(-0x1*0x114f+-0x5f7*-0x1+0xb5b)};break;case'capsule':_0x24d869=Ge['fromGeomet'+'ry'](_0x44a185,new nA({'radius':0.5,'height':0x2})),_0x3a829a={'x':Math['PI']*(-0x40f+-0xa37+0xe48),'y':Math['PI'],'z':Math['PI']*(0x5*0x14e+-0x1f74+0x4*0x63c),'uv':(0x1900+-0x3*-0x6e2+0xcd*-0x39)/(0x2dc+-0x1de2+0x1b09)+(-0x26b9+-0x36b*-0x1+0x234f)/(0x1f17+-0x51*-0x5+0x1*-0x20a9)/(0x1d23+0x56f*-0x5+-0x1f5*0x1)*(-0x2*0xa67+0x1f41+-0xa71)};break;case'cone':_0x24d869=Ge['fromGeomet'+'ry'](_0x44a185,new oA({'baseRadius':0.5,'peakRadius':0x0,'height':0x1})),_0x3a829a={'x':2.54,'y':2.54,'z':2.54,'uv':(-0x1f10+-0x20d9*0x1+0x3fea)/(0x83*-0x1+0x12*0x4+0x3e*0x1)+(-0xcee+-0x1*0x25b7+-0x32a6*-0x1)/(0x2470+0x1*0x1035+0x2*-0x1a51)/(-0x1*0x24f5+-0x4ae*-0x7+0x436)};break;case'cylinder':_0x24d869=Ge['fromGeomet'+'ry'](_0x44a185,new lA({'radius':0.5,'height':0x1})),_0x3a829a={'x':Math['PI'],'y':(-0x1797+-0xa*0x96+0x435*0x7+0.79)*(-0x12d*-0x11+0x194f+-0x2d4a),'z':Math['PI'],'uv':(0x11f5*0x2+-0x546+0x1f*-0xfd)/(0xd95+0xe34+-0x1bc6)+(0x7*-0x2f5+0x30*-0xa1+0x32e4)/(-0xef*-0xf+0x5*-0x57a+0x4*0x359)/(0x1fa+-0xed*0xd+0xa12)*(-0x2*-0xb5b+-0x1056+0x146*-0x5)};break;case'plane':_0x24d869=Ge['fromGeomet'+'ry'](_0x44a185,new cA({'halfExtents':new J(-0x2*-0x251+0x1b67+-0x2009+0.5,-0x5f5+-0x20a+0x7ff+0.5),'widthSegments':0x1,'lengthSegments':0x1})),_0x3a829a={'x':0x0,'y':0x1,'z':0x0,'uv':0x1};break;case'sphere':_0x24d869=Ge['fromGeomet'+'ry'](_0x44a185,new Hp({'radius':0.5})),_0x3a829a={'x':Math['PI'],'y':Math['PI'],'z':Math['PI'],'uv':0x1};break;case'torus':_0x24d869=Ge['fromGeomet'+'ry'](_0x44a185,new hA({'tubeRadius':0.2,'ringRadius':0.3})),_0x3a829a={'x':Math['PI']*(-0x2369+-0x2436+0x479f+0.5)*(0x2659+0xc24+-0x327d+0.5)-Math['PI']*(0x17aa+-0x2057+0x8ad+0.1)*(0x2*-0xe46+-0xc6f*0x3+0x9*0x751+0.1),'y':0.4,'z':0.4,'uv':0x1};break;default:throw new Error('Invalid\x20pr'+'imitive\x20ty'+'pe:\x20'+_0x397bd8);}_0x24d869['incRefCoun'+'t'](),_0x256d83={'mesh':_0x24d869,'area':_0x3a829a},_0x4d50db['map']['set'](_0x397bd8,_0x256d83);}return _0x256d83;};class Yp extends we{constructor(_0x27cc62,_0xa82d0b){super(_0x27cc62,_0xa82d0b),h(this,'_type','asset'),h(this,'_asset',null),h(this,'_model',null),h(this,'_mapping',{}),h(this,'_castShado'+'ws',!(0x1104+-0x903*-0x1+-0x1a07)),h(this,'_receiveSh'+'adows',!(0x1*-0x155f+-0x1bc5+0x14*0x275)),h(this,'_materialA'+'sset',null),h(this,'_material'),h(this,'_castShado'+'wsLightmap',!(-0xe2e+-0x55*0x47+0x25c1)),h(this,'_lightmapp'+'ed',!(0x1a7*0x2+0x322*0x3+0xcb3*-0x1)),h(this,'_lightmapS'+'izeMultipl'+'ier',-0x1507+0x336*-0x4+0x21e0),h(this,'isStatic',!(-0x5*0x2bd+-0xaec+0x189e)),h(this,'_layers',[Ji]),h(this,'_batchGrou'+'pId',-(0x7*0x3d1+0x1ee0+0x1332*-0x3)),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_materialE'+'vents',null),h(this,'_clonedMod'+'el',!(-0x1fcf*0x1+0xc*-0x329+0x45bc)),h(this,'_batchGrou'+'p',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_material']=_0x27cc62['defaultMat'+'erial'],_0xa82d0b['on']('remove',this['onRemoveCh'+'ild'],this),_0xa82d0b['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0xa82d0b['on']('insert',this['onInsertCh'+'ild'],this),_0xa82d0b['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['meshInstan'+'ces'](_0x13bea3){this['_model']&&(this['_model']['meshInstan'+'ces']=_0x13bea3);}get['meshInstan'+'ces'](){return this['_model']?this['_model']['meshInstan'+'ces']:null;}set['customAabb'](_0x5b119b){if(this['_customAab'+'b']=_0x5b119b,this['_model']){const _0x121c19=this['_model']['meshInstan'+'ces'];if(_0x121c19){for(let _0x1124ac=0x3a6+-0x1542+0x119c;_0x1124ac<_0x121c19['length'];_0x1124ac++)_0x121c19[_0x1124ac]['setCustomA'+'abb'](this['_customAab'+'b']);}}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x51fa77){if(this['_type']!==_0x51fa77){if(this['_area']=null,this['_type']=_0x51fa77,_0x51fa77==='asset')this['_asset']!==null?this['_bindModel'+'Asset'](this['_asset']):this['model']=null;else{const _0x513b0e=Tv(this['system']['app']['graphicsDe'+'vice'],_0x51fa77);this['_area']=_0x513b0e['area'];const _0x4f77e8=_0x513b0e['mesh'],_0x4870d0=new Ie(),_0x52b70c=new tr();_0x52b70c['graph']=_0x4870d0,_0x52b70c['meshInstan'+'ces']=[new He(_0x4f77e8,this['_material'],_0x4870d0)],this['model']=_0x52b70c,this['_asset']=null;}}}get['type'](){return this['_type'];}set['asset'](_0x448226){const _0x1b6e1a=this['system']['app']['assets'];let _0x3a8d7d=_0x448226;if(_0x448226 instanceof pe&&(_0x3a8d7d=_0x448226['id']),this['_asset']!==_0x3a8d7d){if(this['_asset']){_0x1b6e1a['off']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this);const _0x171701=_0x1b6e1a['get'](this['_asset']);_0x171701&&this['_unbindMod'+'elAsset'](_0x171701);}if(this['_asset']=_0x3a8d7d,this['_asset']){const _0x23ce6e=_0x1b6e1a['get'](this['_asset']);_0x23ce6e?this['_bindModel'+'Asset'](_0x23ce6e):(this['model']=null,_0x1b6e1a['on']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this));}else this['model']=null;}}get['asset'](){return this['_asset'];}set['model'](_0x5d5e61){if(this['_model']!==_0x5d5e61){if(_0x5d5e61&&_0x5d5e61['_immutable']){w['error']('Invalid\x20at'+'tempt\x20to\x20a'+'ssign\x20a\x20mo'+'del\x20to\x20mul'+'tiple\x20Mode'+'lComponent'+'s');return;}if(this['_model']&&(this['_model']['_immutable']=!(0x1*0x2141+-0xaba+-0xb43*0x2),this['removeMode'+'lFromLayer'+'s'](),this['_model']['getGraph']()['destroy'](),delete this['_model']['_entity'],this['_clonedMod'+'el']&&(this['_model']['destroy'](),this['_clonedMod'+'el']=!(0x21c4+-0x1*-0x1461+0x12*-0x302))),this['_model']=_0x5d5e61,this['_model']){this['_model']['_immutable']=!(0x3*0xb82+-0x1263+-0x1023);const _0x102353=this['_model']['meshInstan'+'ces'];for(let _0x2538eb=-0x4b4+-0x2f*-0xb+-0xe5*-0x3;_0x2538eb<_0x102353['length'];_0x2538eb++)_0x102353[_0x2538eb]['castShadow']=this['_castShado'+'ws'],_0x102353[_0x2538eb]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x102353[_0x2538eb]['setCustomA'+'abb'](this['_customAab'+'b']);this['lightmappe'+'d']=this['_lightmapp'+'ed'],this['entity']['addChild'](this['_model']['graph']),this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_model']['_entity']=this['entity'],this['entity']['animation']&&this['entity']['animation']['setModel'](this['_model']),this['entity']['anim']&&this['entity']['anim']['rebind'](),this['type']==='asset'?this['mapping']=this['_mapping']:this['_unsetMate'+'rialEvents']();}}}get['model'](){return this['_model'];}set['lightmappe'+'d'](_0x12682d){if(_0x12682d!==this['_lightmapp'+'ed']&&(this['_lightmapp'+'ed']=_0x12682d,this['_model'])){const _0x3cd5b6=this['_model']['meshInstan'+'ces'];for(let _0x278f42=-0x3*-0x4db+-0x1515+0x684;_0x278f42<_0x3cd5b6['length'];_0x278f42++)_0x3cd5b6[_0x278f42]['setLightma'+'pped'](_0x12682d);}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x20cd7a){if(this['_castShado'+'ws']===_0x20cd7a)return;const _0x426f1f=this['_model'];if(_0x426f1f){const _0x1bfaa6=this['layers'],_0x6f0e6=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x20cd7a)for(let _0x4ba233=0x8a7+-0x1*-0x203e+-0x28e5;_0x4ba233<_0x1bfaa6['length'];_0x4ba233++){const _0x2a4afa=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x4ba233]);_0x2a4afa&&_0x2a4afa['removeShad'+'owCasters'](_0x426f1f['meshInstan'+'ces']);}const _0x3a9b57=_0x426f1f['meshInstan'+'ces'];for(let _0x376935=-0xf*-0xf9+0x9*-0xa5+-0x8ca;_0x376935<_0x3a9b57['length'];_0x376935++)_0x3a9b57[_0x376935]['castShadow']=_0x20cd7a;if(!this['_castShado'+'ws']&&_0x20cd7a)for(let _0x375548=0x2*-0x47f+0x48*0x84+0x22a*-0xd;_0x375548<_0x1bfaa6['length'];_0x375548++){const _0x3af206=_0x6f0e6['layers']['getLayerBy'+'Id'](_0x1bfaa6[_0x375548]);_0x3af206&&_0x3af206['addShadowC'+'asters'](_0x426f1f['meshInstan'+'ces']);}}this['_castShado'+'ws']=_0x20cd7a;}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x2e0cb4){if(this['_receiveSh'+'adows']!==_0x2e0cb4&&(this['_receiveSh'+'adows']=_0x2e0cb4,this['_model'])){const _0x1f61dd=this['_model']['meshInstan'+'ces'];for(let _0x4c556c=-0xc6c+0x14c6+-0x2*0x42d,_0x7f1b60=_0x1f61dd['length'];_0x4c556c<_0x7f1b60;_0x4c556c++)_0x1f61dd[_0x4c556c]['receiveSha'+'dow']=_0x2e0cb4;}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x4d4794){this['_castShado'+'wsLightmap']=_0x4d4794;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x3702dd){this['_lightmapS'+'izeMultipl'+'ier']=_0x3702dd;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x1927f9){const _0x2d2f6b=this['system']['app']['scene']['layers'];if(this['meshInstan'+'ces'])for(let _0x2145ba=-0x25e3*0x1+0x150b+0x10d8;_0x2145ba<this['_layers']['length'];_0x2145ba++){const _0x41cdf3=_0x2d2f6b['getLayerBy'+'Id'](this['_layers'][_0x2145ba]);_0x41cdf3&&_0x41cdf3['removeMesh'+'Instances'](this['meshInstan'+'ces']);}this['_layers']['length']=0x1073*-0x1+-0x21*0xb6+-0x11*-0x259;for(let _0x1268bc=-0x1*-0x1981+-0x5*-0x755+0x6d*-0x92;_0x1268bc<_0x1927f9['length'];_0x1268bc++)this['_layers'][_0x1268bc]=_0x1927f9[_0x1268bc];if(!(!this['enabled']||!this['entity']['enabled']||!this['meshInstan'+'ces']))for(let _0x420c0b=0x1021+0x3*-0xed+-0xd5a;_0x420c0b<this['_layers']['length'];_0x420c0b++){const _0x36c57f=_0x2d2f6b['getLayerBy'+'Id'](this['_layers'][_0x420c0b]);_0x36c57f&&_0x36c57f['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x5b1d05){var _0xf75411,_0x49d690;this['_batchGrou'+'pId']!==_0x5b1d05&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0x215c+-0x219+-0x97*0x35&&((_0xf75411=this['system']['app']['batcher'])==null||_0xf75411['remove'](St['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x5b1d05>=0x1*0x1c2d+0x202a+-0x3c57&&((_0x49d690=this['system']['app']['batcher'])==null||_0x49d690['insert'](St['MODEL'],_0x5b1d05,this['entity'])),_0x5b1d05<0x50d+-0x1f1*-0x13+0x16*-0x1e8&&this['_batchGrou'+'pId']>=0x1a0a+-0xe40+0x1*-0xbca&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_batchGrou'+'pId']=_0x5b1d05);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['materialAs'+'set'](_0x42444a){let _0x569fe5=_0x42444a;_0x42444a instanceof pe&&(_0x569fe5=_0x42444a['id']);const _0x5daee5=this['system']['app']['assets'];if(_0x569fe5!==this['_materialA'+'sset']){if(this['_materialA'+'sset']){_0x5daee5['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this);const _0x4ca4=_0x5daee5['get'](this['_materialA'+'sset']);_0x4ca4&&this['_unbindMat'+'erialAsset'](_0x4ca4);}if(this['_materialA'+'sset']=_0x569fe5,this['_materialA'+'sset']){const _0x235c05=_0x5daee5['get'](this['_materialA'+'sset']);_0x235c05?this['_bindMater'+'ialAsset'](_0x235c05):(this['_setMateri'+'al'](this['system']['defaultMat'+'erial']),_0x5daee5['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this));}else this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['material'](_0x3fc66b){this['_material']!==_0x3fc66b&&(this['materialAs'+'set']=null,this['_setMateri'+'al'](_0x3fc66b));}get['material'](){return this['_material'];}set['mapping'](_0x1226a5){if(this['_type']!=='asset'||(this['_unsetMate'+'rialEvents'](),_0x1226a5||(_0x1226a5={}),this['_mapping']=_0x1226a5,!this['_model']))return;const _0x7432c6=this['_model']['meshInstan'+'ces'],_0x138518=this['asset']?this['system']['app']['assets']['get'](this['asset']):null,_0x572a8d=_0x138518?_0x138518['data']['mapping']:null;let _0x4d4780=null;for(let _0x49ce62=0x13fc+0x1*-0x1eb0+0xab4,_0x202313=_0x7432c6['length'];_0x49ce62<_0x202313;_0x49ce62++)if(_0x1226a5[_0x49ce62]!==void(0xe12*0x2+-0x37f*-0x3+-0x26a1))_0x1226a5[_0x49ce62]?(_0x4d4780=this['system']['app']['assets']['get'](_0x1226a5[_0x49ce62]),this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x4d4780,_0x7432c6[_0x49ce62],_0x49ce62)):_0x7432c6[_0x49ce62]['material']=this['system']['defaultMat'+'erial'];else{if(_0x572a8d){if(_0x572a8d[_0x49ce62]&&(_0x572a8d[_0x49ce62]['material']||_0x572a8d[_0x49ce62]['path'])){if(_0x572a8d[_0x49ce62]['material']!==void(-0x493*-0x1+0x1e95*0x1+-0x2328))_0x4d4780=this['system']['app']['assets']['get'](_0x572a8d[_0x49ce62]['material']);else{if(_0x572a8d[_0x49ce62]['path']!==void(0x2*0xdc7+-0x15b*0x3+-0x35b*0x7)){const _0x5a90a0=this['_getMateri'+'alAssetUrl'](_0x572a8d[_0x49ce62]['path']);_0x5a90a0&&(_0x4d4780=this['system']['app']['assets']['getByUrl'](_0x5a90a0));}}this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x4d4780,_0x7432c6[_0x49ce62],_0x49ce62);}else _0x7432c6[_0x49ce62]['material']=this['system']['defaultMat'+'erial'];}}}get['mapping'](){return this['_mapping'];}['addModelTo'+'Layers'](){const _0x1bce4f=this['system']['app']['scene']['layers'];for(let _0x4f8dec=-0x1b*0xc5+-0x1*0x11a4+-0x119*-0x23;_0x4f8dec<this['_layers']['length'];_0x4f8dec++){const _0x265fbb=_0x1bce4f['getLayerBy'+'Id'](this['_layers'][_0x4f8dec]);_0x265fbb&&_0x265fbb['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](){const _0x95ba8c=this['system']['app']['scene']['layers'];for(let _0x44e6fb=-0x39a+0x17f1+-0x1*0x1457;_0x44e6fb<this['_layers']['length'];_0x44e6fb++){const _0x3e70f8=_0x95ba8c['getLayerBy'+'Id'](this['_layers'][_0x44e6fb]);_0x3e70f8&&_0x3e70f8['removeMesh'+'Instances'](this['meshInstan'+'ces']);}}['onRemoveCh'+'ild'](){this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['onInsertCh'+'ild'](){this['_model']&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers']();}['onRemove'](){this['asset']=null,this['model']=null,this['materialAs'+'set']=null,this['_unsetMate'+'rialEvents'](),this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0xfb42d4,_0x51509b){this['addModelTo'+'Layers'](),_0xfb42d4['off']('add',this['onLayerAdd'+'ed'],this),_0xfb42d4['off']('remove',this['onLayerRem'+'oved'],this),_0x51509b['on']('add',this['onLayerAdd'+'ed'],this),_0x51509b['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x30cacb){this['layers']['indexOf'](_0x30cacb['id'])<0xa*-0x1d3+-0x7c*-0x1+0x11c2||_0x30cacb['addMeshIns'+'tances'](this['meshInstan'+'ces']);}['onLayerRem'+'oved'](_0x46d895){this['layers']['indexOf'](_0x46d895['id'])<0x1b1a*-0x1+0x1*0xc0b+0x101*0xf||_0x46d895['removeMesh'+'Instances'](this['meshInstan'+'ces']);}['_setMateri'+'alEvent'](_0x213ec6,_0x28eeab,_0xcd85e7,_0x4bdbe7){const _0xea4e74=_0x28eeab+':'+_0xcd85e7;this['system']['app']['assets']['on'](_0xea4e74,_0x4bdbe7,this),this['_materialE'+'vents']||(this['_materialE'+'vents']=[]),this['_materialE'+'vents'][_0x213ec6]||(this['_materialE'+'vents'][_0x213ec6]={}),this['_materialE'+'vents'][_0x213ec6][_0xea4e74]={'id':_0xcd85e7,'handler':_0x4bdbe7};}['_unsetMate'+'rialEvents'](){const _0x61db16=this['system']['app']['assets'],_0x3bb397=this['_materialE'+'vents'];if(_0x3bb397){for(let _0x447384=-0xff4*-0x2+0xaa1+-0x2a89,_0x58ebcb=_0x3bb397['length'];_0x447384<_0x58ebcb;_0x447384++){if(!_0x3bb397[_0x447384])continue;const _0x59bf0c=_0x3bb397[_0x447384];for(const _0x4e9b04 in _0x59bf0c)_0x61db16['off'](_0x4e9b04,_0x59bf0c[_0x4e9b04]['handler'],this);}this['_materialE'+'vents']=null;}}['_getAssetB'+'yIdOrPath'](_0x9b5d7a){let _0x485991=null;if(!isNaN(parseInt(_0x9b5d7a,0x1*0x82f+0x1*0x7c9+-0xfee)))_0x485991=this['system']['app']['assets']['get'](_0x9b5d7a);else{if(this['asset']){const _0x5b347f=this['_getMateri'+'alAssetUrl'](_0x9b5d7a);_0x5b347f&&(_0x485991=this['system']['app']['assets']['getByUrl'](_0x5b347f));}}return _0x485991;}['_getMateri'+'alAssetUrl'](_0x2ecc10){if(!this['asset'])return null;const _0x16607f=this['system']['app']['assets']['get'](this['asset']);return _0x16607f?_0x16607f['getAbsolut'+'eUrl'](_0x2ecc10):null;}['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x199e40,_0x497d10,_0x2eea1f){const _0x2daf85=this['system']['app']['assets'];_0x199e40&&(_0x199e40['resource']?(_0x497d10['material']=_0x199e40['resource'],this['_setMateri'+'alEvent'](_0x2eea1f,'remove',_0x199e40['id'],function(){_0x497d10['material']=this['system']['defaultMat'+'erial'];})):(this['_setMateri'+'alEvent'](_0x2eea1f,'load',_0x199e40['id'],function(_0x36a4a6){_0x497d10['material']=_0x36a4a6['resource'],this['_setMateri'+'alEvent'](_0x2eea1f,'remove',_0x199e40['id'],function(){_0x497d10['material']=this['system']['defaultMat'+'erial'];});}),this['enabled']&&this['entity']['enabled']&&_0x2daf85['load'](_0x199e40)));}['onEnable'](){var _0x332b0e;const _0x5be875=this['system']['app'],_0x29624e=_0x5be875['scene'],_0x487670=_0x29624e==null?void(0x2177+0xbcc+-0x2d43):_0x29624e['layers'];this['_evtLayers'+'Changed']=_0x29624e['on']('set:layers',this['onLayersCh'+'anged'],this),_0x487670&&(this['_evtLayerA'+'dded']=_0x487670['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x487670['on']('remove',this['onLayerRem'+'oved'],this));const _0x1a789a=this['_type']==='asset';let _0x290523;if(this['_model']?this['addModelTo'+'Layers']():_0x1a789a&&this['_asset']&&(_0x290523=_0x5be875['assets']['get'](this['_asset']),_0x290523&&_0x290523['resource']!==this['_model']&&this['_bindModel'+'Asset'](_0x290523)),this['_materialA'+'sset']&&(_0x290523=_0x5be875['assets']['get'](this['_materialA'+'sset']),_0x290523&&_0x290523['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0x290523)),_0x1a789a&&this['_mapping']){for(const _0x43cfd7 in this['_mapping'])this['_mapping'][_0x43cfd7]&&(_0x290523=this['_getAssetB'+'yIdOrPath'](this['_mapping'][_0x43cfd7]),_0x290523&&!_0x290523['resource']&&_0x5be875['assets']['load'](_0x290523));}this['_batchGrou'+'pId']>=0x1abb+-0x2534+0xa79&&((_0x332b0e=_0x5be875['batcher'])==null||_0x332b0e['insert'](St['MODEL'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x20cafd,_0x41d10c,_0x563034,_0x492d0f;const _0x5f0aa3=this['system']['app'],_0x186782=_0x5f0aa3['scene']['layers'];(_0x20cafd=this['_evtLayers'+'Changed'])==null||_0x20cafd['off'](),this['_evtLayers'+'Changed']=null,_0x186782&&((_0x41d10c=this['_evtLayerA'+'dded'])==null||_0x41d10c['off'](),this['_evtLayerA'+'dded']=null,(_0x563034=this['_evtLayerR'+'emoved'])==null||_0x563034['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=0x5b0+-0x70e+0x15e*0x1&&((_0x492d0f=_0x5f0aa3['batcher'])==null||_0x492d0f['remove'](St['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['hide'](){if(this['_model']){const _0x24b181=this['_model']['meshInstan'+'ces'];for(let _0x4a8da2=0x23a6+0xcd0+-0x3076,_0x436115=_0x24b181['length'];_0x4a8da2<_0x436115;_0x4a8da2++)_0x24b181[_0x4a8da2]['visible']=!(-0xc9c+0x1237*0x1+-0x2*0x2cd);}}['show'](){if(this['_model']){const _0x59824a=this['_model']['meshInstan'+'ces'];for(let _0x2f2356=0x1749+-0x3*0xcab+-0x13a*-0xc,_0x3ff391=_0x59824a['length'];_0x2f2356<_0x3ff391;_0x2f2356++)_0x59824a[_0x2f2356]['visible']=!(0x103d+-0xabb+-0x582);}}['_bindMater'+'ialAsset'](_0x3ed1be){if(_0x3ed1be['on']('load',this['_onMateria'+'lAssetLoad'],this),_0x3ed1be['on']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x3ed1be['on']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x3ed1be['on']('change',this['_onMateria'+'lAssetChan'+'ge'],this),_0x3ed1be['resource'])this['_onMateria'+'lAssetLoad'](_0x3ed1be);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x3ed1be);}}['_unbindMat'+'erialAsset'](_0x6621cc){_0x6621cc['off']('load',this['_onMateria'+'lAssetLoad'],this),_0x6621cc['off']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x6621cc['off']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x6621cc['off']('change',this['_onMateria'+'lAssetChan'+'ge'],this);}['_onMateria'+'lAssetAdd'](_0x164282){this['system']['app']['assets']['off']('add:'+_0x164282['id'],this['_onMateria'+'lAssetAdd'],this),this['_materialA'+'sset']===_0x164282['id']&&this['_bindMater'+'ialAsset'](_0x164282);}['_onMateria'+'lAssetLoad'](_0x5275a2){this['_setMateri'+'al'](_0x5275a2['resource']);}['_onMateria'+'lAssetUnlo'+'ad'](_0x1665a1){this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}['_onMateria'+'lAssetRemo'+'ve'](_0x1967e0){this['_onMateria'+'lAssetUnlo'+'ad'](_0x1967e0);}['_onMateria'+'lAssetChan'+'ge'](_0x1c48d5){}['_bindModel'+'Asset'](_0x35fdc5){if(this['_unbindMod'+'elAsset'](_0x35fdc5),_0x35fdc5['on']('load',this['_onModelAs'+'setLoad'],this),_0x35fdc5['on']('unload',this['_onModelAs'+'setUnload'],this),_0x35fdc5['on']('change',this['_onModelAs'+'setChange'],this),_0x35fdc5['on']('remove',this['_onModelAs'+'setRemove'],this),_0x35fdc5['resource'])this['_onModelAs'+'setLoad'](_0x35fdc5);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x35fdc5);}}['_unbindMod'+'elAsset'](_0x3eec91){_0x3eec91['off']('load',this['_onModelAs'+'setLoad'],this),_0x3eec91['off']('unload',this['_onModelAs'+'setUnload'],this),_0x3eec91['off']('change',this['_onModelAs'+'setChange'],this),_0x3eec91['off']('remove',this['_onModelAs'+'setRemove'],this);}['_onModelAs'+'setAdded'](_0x10c71a){this['system']['app']['assets']['off']('add:'+_0x10c71a['id'],this['_onModelAs'+'setAdded'],this),_0x10c71a['id']===this['_asset']&&this['_bindModel'+'Asset'](_0x10c71a);}['_onModelAs'+'setLoad'](_0x5381cc){this['model']=_0x5381cc['resource']['clone'](),this['_clonedMod'+'el']=!(0x2de+-0x19*0x181+0x22bb);}['_onModelAs'+'setUnload'](_0x31480b){this['model']=null;}['_onModelAs'+'setChange'](_0x572ec0,_0x4c2e96,_0x28ed9f,_0x4b6801){_0x4c2e96==='data'&&(this['mapping']=this['_mapping']);}['_onModelAs'+'setRemove'](_0x27a97a){this['model']=null;}['_setMateri'+'al'](_0x170fe3){if(this['_material']===_0x170fe3)return;this['_material']=_0x170fe3;const _0x2a2b56=this['_model'];if(_0x2a2b56&&this['_type']!=='asset'){const _0x59b301=_0x2a2b56['meshInstan'+'ces'];for(let _0x4e1328=0x2*-0x7fa+-0x1*-0x793+0x1*0x861,_0x55356d=_0x59b301['length'];_0x4e1328<_0x55356d;_0x4e1328++)_0x59b301[_0x4e1328]['material']=_0x170fe3;}}}class uR{constructor(){this['enabled']=!(-0xd19+0x20dd*-0x1+0x2df6);}}const wv=['enabled'];class pR extends ct{constructor(_0x161670){super(_0x161670),this['id']='model',this['ComponentT'+'ype']=Yp,this['DataType']=uR,this['schema']=wv,this['defaultMat'+'erial']=$n(_0x161670['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x754104,_0x37cf9b,_0x2fe8d7){_0x2fe8d7=['material','materialAs'+'set','asset','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','type','mapping','layers','isStatic','batchGroup'+'Id'],(_0x37cf9b['batchGroup'+'Id']===null||_0x37cf9b['batchGroup'+'Id']===void(0x3*0x61b+-0xfb1+-0x2a0))&&(_0x37cf9b['batchGroup'+'Id']=-(0x2700+0x267b*0x1+-0x5e*0xd3)),_0x37cf9b['layers']&&_0x37cf9b['layers']['length']&&(_0x37cf9b['layers']=_0x37cf9b['layers']['slice'](-0x8*0x26f+0x68a+-0x2*-0x677));for(let _0x1ef54e=-0x1ee6+-0x27*0x3d+0x2831;_0x1ef54e<_0x2fe8d7['length'];_0x1ef54e++)_0x37cf9b['hasOwnProp'+'erty'](_0x2fe8d7[_0x1ef54e])&&(_0x754104[_0x2fe8d7[_0x1ef54e]]=_0x37cf9b[_0x2fe8d7[_0x1ef54e]]);_0x37cf9b['aabbCenter']&&_0x37cf9b['aabbHalfEx'+'tents']&&(_0x754104['customAabb']=new De(new D(_0x37cf9b['aabbCenter']),new D(_0x37cf9b['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x754104,_0x37cf9b,['enabled']);}['cloneCompo'+'nent'](_0xc3ed60,_0x30fe45){const _0x1f5ba7={'type':_0xc3ed60['model']['type'],'asset':_0xc3ed60['model']['asset'],'castShadows':_0xc3ed60['model']['castShadow'+'s'],'receiveShadows':_0xc3ed60['model']['receiveSha'+'dows'],'castShadowsLightmap':_0xc3ed60['model']['castShadow'+'sLightmap'],'lightmapped':_0xc3ed60['model']['lightmappe'+'d'],'lightmapSizeMultiplier':_0xc3ed60['model']['lightmapSi'+'zeMultipli'+'er'],'isStatic':_0xc3ed60['model']['isStatic'],'enabled':_0xc3ed60['model']['enabled'],'layers':_0xc3ed60['model']['layers'],'batchGroupId':_0xc3ed60['model']['batchGroup'+'Id'],'mapping':kc({},_0xc3ed60['model']['mapping'])};let _0x5e07b3=_0xc3ed60['model']['materialAs'+'set'];!(_0x5e07b3 instanceof pe)&&_0x5e07b3!=null&&(_0x5e07b3=this['app']['assets']['get'](_0x5e07b3));const _0x318bca=_0xc3ed60['model']['material'];(!_0x318bca||_0x318bca===this['defaultMat'+'erial']||!_0x5e07b3||_0x318bca===_0x5e07b3['resource'])&&(_0x1f5ba7['materialAs'+'set']=_0x5e07b3);const _0x2c74b1=this['addCompone'+'nt'](_0x30fe45,_0x1f5ba7);if(_0xc3ed60['model']['model']&&_0xc3ed60['model']['type']==='asset'&&!_0xc3ed60['model']['asset']&&(_0x2c74b1['model']=_0xc3ed60['model']['model']['clone'](),_0x2c74b1['_clonedMod'+'el']=!(0x12c4+-0x2*0x59c+0x2a*-0x2e)),_0x1f5ba7['materialAs'+'set']||(_0x2c74b1['material']=_0x318bca),_0xc3ed60['model']['model']){const _0x37b3d5=_0xc3ed60['model']['model']['meshInstan'+'ces'],_0x201b94=_0x2c74b1['model']['meshInstan'+'ces'];for(let _0x5bab77=0x1aee+0xa7e+0x4*-0x95b;_0x5bab77<_0x37b3d5['length'];_0x5bab77++)_0x201b94[_0x5bab77]['mask']=_0x37b3d5[_0x5bab77]['mask'],_0x201b94[_0x5bab77]['material']=_0x37b3d5[_0x5bab77]['material'],_0x201b94[_0x5bab77]['layer']=_0x37b3d5[_0x5bab77]['layer'],_0x201b94[_0x5bab77]['receiveSha'+'dow']=_0x37b3d5[_0x5bab77]['receiveSha'+'dow'];}return _0xc3ed60['model']['customAabb']&&(_0x2c74b1['customAabb']=_0xc3ed60['model']['customAabb']['clone']()),_0x2c74b1;}['onRemove'](_0xa87ccd,_0x214d28){_0x214d28['onRemove']();}}we['_buildAcce'+'ssors'](Yp['prototype'],wv);const mR=['emitterExt'+'ents','emitterRad'+'ius','emitterExt'+'entsInner','emitterRad'+'iusInner','loop','initialVel'+'ocity','animSpeed','normalMap','particleNo'+'rmal'],_R=['numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','lighting','halfLamber'+'t','intensity','wrap','wrapBounds','depthWrite','noFog','sort','stretch','alignToMot'+'ion','preWarm','emitterSha'+'pe','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animLoop','colorMap','localSpace','screenSpac'+'e','orientatio'+'n'],gR=['scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','velocityGr'+'aph','velocityGr'+'aph2','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2'],uc=['colorMapAs'+'set','normalMapA'+'sset','meshAsset','renderAsse'+'t'];let Wa;class SR extends we{constructor(_0x15cf5d,_0x16962b){super(_0x15cf5d,_0x16962b),h(this,'_requested'+'Depth',!(0xae*0x8+-0xc67*0x2+-0xab*-0x1d)),h(this,'_drawOrder',-0x513+-0x8a7+0xdba),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['on']('set_colorM'+'apAsset',this['onSetColor'+'MapAsset'],this),this['on']('set_normal'+'MapAsset',this['onSetNorma'+'lMapAsset'],this),this['on']('set_meshAs'+'set',this['onSetMeshA'+'sset'],this),this['on']('set_mesh',this['onSetMesh'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_loop',this['onSetLoop'],this),this['on']('set_blendT'+'ype',this['onSetBlend'+'Type'],this),this['on']('set_depthS'+'oftening',this['onSetDepth'+'Softening'],this),this['on']('set_layers',this['onSetLayer'+'s'],this),mR['forEach'](_0x32f09c=>{this['on']('set_'+_0x32f09c,this['onSetSimpl'+'eProperty'],this);}),_R['forEach'](_0x543194=>{this['on']('set_'+_0x543194,this['onSetCompl'+'exProperty'],this);}),gR['forEach'](_0x517b79=>{this['on']('set_'+_0x517b79,this['onSetGraph'+'Property'],this);}));}get['data'](){const _0x24a1c2=this['system']['store'][this['entity']['getGuid']()];return _0x24a1c2?_0x24a1c2['data']:null;}set['enabled'](_0x1561a4){this['_setValue']('enabled',_0x1561a4);}get['enabled'](){return this['data']['enabled'];}set['autoPlay'](_0x668393){this['_setValue']('autoPlay',_0x668393);}get['autoPlay'](){return this['data']['autoPlay'];}set['numParticl'+'es'](_0x76e76c){this['_setValue']('numParticl'+'es',_0x76e76c);}get['numParticl'+'es'](){return this['data']['numParticl'+'es'];}set['lifetime'](_0x335279){this['_setValue']('lifetime',_0x335279);}get['lifetime'](){return this['data']['lifetime'];}set['rate'](_0x77e3c4){this['_setValue']('rate',_0x77e3c4);}get['rate'](){return this['data']['rate'];}set['rate2'](_0x405428){this['_setValue']('rate2',_0x405428);}get['rate2'](){return this['data']['rate2'];}set['startAngle'](_0x5b0b98){this['_setValue']('startAngle',_0x5b0b98);}get['startAngle'](){return this['data']['startAngle'];}set['startAngle'+'2'](_0x53df9d){this['_setValue']('startAngle'+'2',_0x53df9d);}get['startAngle'+'2'](){return this['data']['startAngle'+'2'];}set['loop'](_0x3243a9){this['_setValue']('loop',_0x3243a9);}get['loop'](){return this['data']['loop'];}set['preWarm'](_0x4ca716){this['_setValue']('preWarm',_0x4ca716);}get['preWarm'](){return this['data']['preWarm'];}set['lighting'](_0x23c437){this['_setValue']('lighting',_0x23c437);}get['lighting'](){return this['data']['lighting'];}set['halfLamber'+'t'](_0x295775){this['_setValue']('halfLamber'+'t',_0x295775);}get['halfLamber'+'t'](){return this['data']['halfLamber'+'t'];}set['intensity'](_0x42015e){this['_setValue']('intensity',_0x42015e);}get['intensity'](){return this['data']['intensity'];}set['depthWrite'](_0x299061){this['_setValue']('depthWrite',_0x299061);}get['depthWrite'](){return this['data']['depthWrite'];}set['noFog'](_0x1e6a9c){this['_setValue']('noFog',_0x1e6a9c);}get['noFog'](){return this['data']['noFog'];}set['depthSofte'+'ning'](_0x2cecee){this['_setValue']('depthSofte'+'ning',_0x2cecee);}get['depthSofte'+'ning'](){return this['data']['depthSofte'+'ning'];}set['sort'](_0x3d8077){this['_setValue']('sort',_0x3d8077);}get['sort'](){return this['data']['sort'];}set['blendType'](_0x4bd195){this['_setValue']('blendType',_0x4bd195);}get['blendType'](){return this['data']['blendType'];}set['stretch'](_0x594deb){this['_setValue']('stretch',_0x594deb);}get['stretch'](){return this['data']['stretch'];}set['alignToMot'+'ion'](_0x3ccb32){this['_setValue']('alignToMot'+'ion',_0x3ccb32);}get['alignToMot'+'ion'](){return this['data']['alignToMot'+'ion'];}set['emitterSha'+'pe'](_0x29a3b8){this['_setValue']('emitterSha'+'pe',_0x29a3b8);}get['emitterSha'+'pe'](){return this['data']['emitterSha'+'pe'];}set['emitterExt'+'ents'](_0x2a84d3){this['_setValue']('emitterExt'+'ents',_0x2a84d3);}get['emitterExt'+'ents'](){return this['data']['emitterExt'+'ents'];}set['emitterExt'+'entsInner'](_0x273f5b){this['_setValue']('emitterExt'+'entsInner',_0x273f5b);}get['emitterExt'+'entsInner'](){return this['data']['emitterExt'+'entsInner'];}set['emitterRad'+'ius'](_0x1fe60b){this['_setValue']('emitterRad'+'ius',_0x1fe60b);}get['emitterRad'+'ius'](){return this['data']['emitterRad'+'ius'];}set['emitterRad'+'iusInner'](_0x2ceb08){this['_setValue']('emitterRad'+'iusInner',_0x2ceb08);}get['emitterRad'+'iusInner'](){return this['data']['emitterRad'+'iusInner'];}set['initialVel'+'ocity'](_0x2beb01){this['_setValue']('initialVel'+'ocity',_0x2beb01);}get['initialVel'+'ocity'](){return this['data']['initialVel'+'ocity'];}set['wrap'](_0x400d44){this['_setValue']('wrap',_0x400d44);}get['wrap'](){return this['data']['wrap'];}set['wrapBounds'](_0x598e78){this['_setValue']('wrapBounds',_0x598e78);}get['wrapBounds'](){return this['data']['wrapBounds'];}set['localSpace'](_0x1d8e91){this['_setValue']('localSpace',_0x1d8e91);}get['localSpace'](){return this['data']['localSpace'];}set['screenSpac'+'e'](_0x5bd654){this['_setValue']('screenSpac'+'e',_0x5bd654);}get['screenSpac'+'e'](){return this['data']['screenSpac'+'e'];}set['colorMapAs'+'set'](_0x106623){this['_setValue']('colorMapAs'+'set',_0x106623);}get['colorMapAs'+'set'](){return this['data']['colorMapAs'+'set'];}set['normalMapA'+'sset'](_0x23ba7c){this['_setValue']('normalMapA'+'sset',_0x23ba7c);}get['normalMapA'+'sset'](){return this['data']['normalMapA'+'sset'];}set['mesh'](_0x59b4b1){this['_setValue']('mesh',_0x59b4b1);}get['mesh'](){return this['data']['mesh'];}set['meshAsset'](_0xf625aa){this['_setValue']('meshAsset',_0xf625aa);}get['meshAsset'](){return this['data']['meshAsset'];}set['renderAsse'+'t'](_0x4a2fab){this['_setValue']('renderAsse'+'t',_0x4a2fab);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['orientatio'+'n'](_0x540729){this['_setValue']('orientatio'+'n',_0x540729);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['particleNo'+'rmal'](_0x1ef980){this['_setValue']('particleNo'+'rmal',_0x1ef980);}get['particleNo'+'rmal'](){return this['data']['particleNo'+'rmal'];}set['localVeloc'+'ityGraph'](_0x3708f5){this['_setValue']('localVeloc'+'ityGraph',_0x3708f5);}get['localVeloc'+'ityGraph'](){return this['data']['localVeloc'+'ityGraph'];}set['localVeloc'+'ityGraph2'](_0x5ab989){this['_setValue']('localVeloc'+'ityGraph2',_0x5ab989);}get['localVeloc'+'ityGraph2'](){return this['data']['localVeloc'+'ityGraph2'];}set['velocityGr'+'aph'](_0x535b69){this['_setValue']('velocityGr'+'aph',_0x535b69);}get['velocityGr'+'aph'](){return this['data']['velocityGr'+'aph'];}set['velocityGr'+'aph2'](_0x5e6c93){this['_setValue']('velocityGr'+'aph2',_0x5e6c93);}get['velocityGr'+'aph2'](){return this['data']['velocityGr'+'aph2'];}set['rotationSp'+'eedGraph'](_0x2d4896){this['_setValue']('rotationSp'+'eedGraph',_0x2d4896);}get['rotationSp'+'eedGraph'](){return this['data']['rotationSp'+'eedGraph'];}set['rotationSp'+'eedGraph2'](_0xbd6ab){this['_setValue']('rotationSp'+'eedGraph2',_0xbd6ab);}get['rotationSp'+'eedGraph2'](){return this['data']['rotationSp'+'eedGraph2'];}set['radialSpee'+'dGraph'](_0x9f5eec){this['_setValue']('radialSpee'+'dGraph',_0x9f5eec);}get['radialSpee'+'dGraph'](){return this['data']['radialSpee'+'dGraph'];}set['radialSpee'+'dGraph2'](_0x4352c4){this['_setValue']('radialSpee'+'dGraph2',_0x4352c4);}get['radialSpee'+'dGraph2'](){return this['data']['radialSpee'+'dGraph2'];}set['scaleGraph'](_0x5df0f5){this['_setValue']('scaleGraph',_0x5df0f5);}get['scaleGraph'](){return this['data']['scaleGraph'];}set['scaleGraph'+'2'](_0x39a8ce){this['_setValue']('scaleGraph'+'2',_0x39a8ce);}get['scaleGraph'+'2'](){return this['data']['scaleGraph'+'2'];}set['colorGraph'](_0x26c919){this['_setValue']('colorGraph',_0x26c919);}get['colorGraph'](){return this['data']['colorGraph'];}set['colorGraph'+'2'](_0x109819){this['_setValue']('colorGraph'+'2',_0x109819);}get['colorGraph'+'2'](){return this['data']['colorGraph'+'2'];}set['alphaGraph'](_0x344960){this['_setValue']('alphaGraph',_0x344960);}get['alphaGraph'](){return this['data']['alphaGraph'];}set['alphaGraph'+'2'](_0x60a3a6){this['_setValue']('alphaGraph'+'2',_0x60a3a6);}get['alphaGraph'+'2'](){return this['data']['alphaGraph'+'2'];}set['colorMap'](_0x2b7709){this['_setValue']('colorMap',_0x2b7709);}get['colorMap'](){return this['data']['colorMap'];}set['normalMap'](_0x23e272){this['_setValue']('normalMap',_0x23e272);}get['normalMap'](){return this['data']['normalMap'];}set['animTilesX'](_0x34b49e){this['_setValue']('animTilesX',_0x34b49e);}get['animTilesX'](){return this['data']['animTilesX'];}set['animTilesY'](_0x2dbd95){this['_setValue']('animTilesY',_0x2dbd95);}get['animTilesY'](){return this['data']['animTilesY'];}set['animStartF'+'rame'](_0x154719){this['_setValue']('animStartF'+'rame',_0x154719);}get['animStartF'+'rame'](){return this['data']['animStartF'+'rame'];}set['animNumFra'+'mes'](_0x1496aa){this['_setValue']('animNumFra'+'mes',_0x1496aa);}get['animNumFra'+'mes'](){return this['data']['animNumFra'+'mes'];}set['animNumAni'+'mations'](_0x5c4cc4){this['_setValue']('animNumAni'+'mations',_0x5c4cc4);}get['animNumAni'+'mations'](){return this['data']['animNumAni'+'mations'];}set['animIndex'](_0x38e580){this['_setValue']('animIndex',_0x38e580);}get['animIndex'](){return this['data']['animIndex'];}set['randomizeA'+'nimIndex'](_0xd5fc01){this['_setValue']('randomizeA'+'nimIndex',_0xd5fc01);}get['randomizeA'+'nimIndex'](){return this['data']['randomizeA'+'nimIndex'];}set['animSpeed'](_0x2c5e51){this['_setValue']('animSpeed',_0x2c5e51);}get['animSpeed'](){return this['data']['animSpeed'];}set['animLoop'](_0x20ec0f){this['_setValue']('animLoop',_0x20ec0f);}get['animLoop'](){return this['data']['animLoop'];}set['layers'](_0x2cba85){this['_setValue']('layers',_0x2cba85);}get['layers'](){return this['data']['layers'];}set['drawOrder'](_0x16632f){this['_drawOrder']=_0x16632f,this['emitter']&&(this['emitter']['drawOrder']=_0x16632f);}get['drawOrder'](){return this['_drawOrder'];}['_setValue'](_0x507a44,_0x2d55bc){const _0xd15a36=this['data'],_0x586b90=_0xd15a36[_0x507a44];_0xd15a36[_0x507a44]=_0x2d55bc,this['fire']('set',_0x507a44,_0x586b90,_0x2d55bc);}['addMeshIns'+'tanceToLay'+'ers'](){if(this['emitter'])for(let _0x4aa959=-0x2051+0x1*0x2147+-0xf6;_0x4aa959<this['layers']['length'];_0x4aa959++){const _0x839054=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x4aa959]);_0x839054&&(_0x839054['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]),this['emitter']['_layer']=_0x839054);}}['removeMesh'+'InstanceFr'+'omLayers'](){if(this['emitter'])for(let _0xa4af6c=-0x25bf*0x1+0xd*0x1ed+0xcb6;_0xa4af6c<this['layers']['length'];_0xa4af6c++){const _0x2eb40e=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0xa4af6c]);_0x2eb40e&&_0x2eb40e['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}}['onSetLayer'+'s'](_0x51ac0f,_0x302bec,_0x56ac06){if(this['emitter']){for(let _0x5163ff=-0x1*-0x142c+0x1e91+0x1*-0x32bd;_0x5163ff<_0x302bec['length'];_0x5163ff++){const _0x4935b7=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x302bec[_0x5163ff]);_0x4935b7&&_0x4935b7['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}if(!(!this['enabled']||!this['entity']['enabled']))for(let _0x190f7a=-0x1c01+-0xd*0x79+0x2226;_0x190f7a<_0x56ac06['length'];_0x190f7a++){const _0x19fd8f=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x56ac06[_0x190f7a]);_0x19fd8f&&_0x19fd8f['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}}}['onLayersCh'+'anged'](_0x1557ff,_0x180253){this['addMeshIns'+'tanceToLay'+'ers'](),_0x1557ff['off']('add',this['onLayerAdd'+'ed'],this),_0x1557ff['off']('remove',this['onLayerRem'+'oved'],this),_0x180253['on']('add',this['onLayerAdd'+'ed'],this),_0x180253['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x2cc37a){!this['emitter']||this['layers']['indexOf'](_0x2cc37a['id'])<0x1efd+-0x155b+-0x9a2||_0x2cc37a['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}['onLayerRem'+'oved'](_0x9f21eb){!this['emitter']||this['layers']['indexOf'](_0x9f21eb['id'])<0x302+-0x711+-0x1*-0x40f||_0x9f21eb['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}['_bindColor'+'MapAsset'](_0x4dd78c){if(_0x4dd78c['on']('load',this['_onColorMa'+'pAssetLoad'],this),_0x4dd78c['on']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x4dd78c['on']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x4dd78c['on']('change',this['_onColorMa'+'pAssetChan'+'ge'],this),_0x4dd78c['resource'])this['_onColorMa'+'pAssetLoad'](_0x4dd78c);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x4dd78c);}}['_unbindCol'+'orMapAsset'](_0x4c1477){_0x4c1477['off']('load',this['_onColorMa'+'pAssetLoad'],this),_0x4c1477['off']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x4c1477['off']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x4c1477['off']('change',this['_onColorMa'+'pAssetChan'+'ge'],this);}['_onColorMa'+'pAssetLoad'](_0xde5866){this['colorMap']=_0xde5866['resource'];}['_onColorMa'+'pAssetUnlo'+'ad'](_0x2a5fbd){this['colorMap']=null;}['_onColorMa'+'pAssetRemo'+'ve'](_0x3e9f31){this['_onColorMa'+'pAssetUnlo'+'ad'](_0x3e9f31);}['_onColorMa'+'pAssetChan'+'ge'](_0x87abe0){}['onSetColor'+'MapAsset'](_0x45dd19,_0x567f60,_0x3d2736){const _0x6389ba=this['system']['app']['assets'];if(_0x567f60){const _0x3eb22d=_0x6389ba['get'](_0x567f60);_0x3eb22d&&this['_unbindCol'+'orMapAsset'](_0x3eb22d);}if(_0x3d2736){_0x3d2736 instanceof pe&&(this['data']['colorMapAs'+'set']=_0x3d2736['id'],_0x3d2736=_0x3d2736['id']);const _0x306eb9=_0x6389ba['get'](_0x3d2736);_0x306eb9?this['_bindColor'+'MapAsset'](_0x306eb9):_0x6389ba['once']('add:'+_0x3d2736,_0x45a38d=>{this['_bindColor'+'MapAsset'](_0x45a38d);});}else this['colorMap']=null;}['_bindNorma'+'lMapAsset'](_0x3018d0){if(_0x3018d0['on']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x3018d0['on']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x3018d0['on']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x3018d0['on']('change',this['_onNormalM'+'apAssetCha'+'nge'],this),_0x3018d0['resource'])this['_onNormalM'+'apAssetLoa'+'d'](_0x3018d0);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x3018d0);}}['_unbindNor'+'malMapAsse'+'t'](_0x2257dd){_0x2257dd['off']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x2257dd['off']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x2257dd['off']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x2257dd['off']('change',this['_onNormalM'+'apAssetCha'+'nge'],this);}['_onNormalM'+'apAssetLoa'+'d'](_0x455171){this['normalMap']=_0x455171['resource'];}['_onNormalM'+'apAssetUnl'+'oad'](_0x151295){this['normalMap']=null;}['_onNormalM'+'apAssetRem'+'ove'](_0x4cf15a){this['_onNormalM'+'apAssetUnl'+'oad'](_0x4cf15a);}['_onNormalM'+'apAssetCha'+'nge'](_0x44ce52){}['onSetNorma'+'lMapAsset'](_0xe1aafd,_0x15b81d,_0xcdc3f1){const _0xeac89d=this['system']['app']['assets'];if(_0x15b81d){const _0x125e57=_0xeac89d['get'](_0x15b81d);_0x125e57&&this['_unbindNor'+'malMapAsse'+'t'](_0x125e57);}if(_0xcdc3f1){_0xcdc3f1 instanceof pe&&(this['data']['normalMapA'+'sset']=_0xcdc3f1['id'],_0xcdc3f1=_0xcdc3f1['id']);const _0x3ce060=_0xeac89d['get'](_0xcdc3f1);_0x3ce060?this['_bindNorma'+'lMapAsset'](_0x3ce060):_0xeac89d['once']('add:'+_0xcdc3f1,_0x4bd73e=>{this['_bindNorma'+'lMapAsset'](_0x4bd73e);});}else this['normalMap']=null;}['_bindMeshA'+'sset'](_0x5ddb4a){if(_0x5ddb4a['on']('load',this['_onMeshAss'+'etLoad'],this),_0x5ddb4a['on']('unload',this['_onMeshAss'+'etUnload'],this),_0x5ddb4a['on']('remove',this['_onMeshAss'+'etRemove'],this),_0x5ddb4a['on']('change',this['_onMeshAss'+'etChange'],this),_0x5ddb4a['resource'])this['_onMeshAss'+'etLoad'](_0x5ddb4a);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x5ddb4a);}}['_unbindMes'+'hAsset'](_0x326ae9){_0x326ae9['off']('load',this['_onMeshAss'+'etLoad'],this),_0x326ae9['off']('unload',this['_onMeshAss'+'etUnload'],this),_0x326ae9['off']('remove',this['_onMeshAss'+'etRemove'],this),_0x326ae9['off']('change',this['_onMeshAss'+'etChange'],this);}['_onMeshAss'+'etLoad'](_0x3ce77a){this['_onMeshCha'+'nged'](_0x3ce77a['resource']);}['_onMeshAss'+'etUnload'](_0x131464){this['mesh']=null;}['_onMeshAss'+'etRemove'](_0x1f03f8){this['_onMeshAss'+'etUnload'](_0x1f03f8);}['_onMeshAss'+'etChange'](_0x4f2d3d){}['onSetMeshA'+'sset'](_0x590db2,_0x50b30d,_0x51ce2b){const _0x410b95=this['system']['app']['assets'];if(_0x50b30d){const _0x457f37=_0x410b95['get'](_0x50b30d);_0x457f37&&this['_unbindMes'+'hAsset'](_0x457f37);}if(_0x51ce2b){_0x51ce2b instanceof pe&&(this['data']['meshAsset']=_0x51ce2b['id'],_0x51ce2b=_0x51ce2b['id']);const _0x5ab7f6=_0x410b95['get'](_0x51ce2b);_0x5ab7f6&&this['_bindMeshA'+'sset'](_0x5ab7f6);}else this['_onMeshCha'+'nged'](null);}['onSetMesh'](_0x27a3dc,_0x2e393f,_0x14f7f5){!_0x14f7f5||_0x14f7f5 instanceof pe||typeof _0x14f7f5=='number'?this['meshAsset']=_0x14f7f5:this['_onMeshCha'+'nged'](_0x14f7f5);}['_onMeshCha'+'nged'](_0x1a5113){_0x1a5113&&!(_0x1a5113 instanceof Ge)&&(_0x1a5113['meshInstan'+'ces'][-0x3*-0x9ef+-0x613*0x4+-0x581]?_0x1a5113=_0x1a5113['meshInstan'+'ces'][-0x5*-0x6e1+-0x629+-0x1c3c]['mesh']:_0x1a5113=null),this['data']['mesh']=_0x1a5113,this['emitter']&&(this['emitter']['mesh']=_0x1a5113,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['onSetRende'+'rAsset'](_0x306398,_0x251579,_0x48422c){const _0x4def5d=this['system']['app']['assets'];if(_0x251579){const _0x2e82ae=_0x4def5d['get'](_0x251579);_0x2e82ae&&this['_unbindRen'+'derAsset'](_0x2e82ae);}if(_0x48422c){_0x48422c instanceof pe&&(this['data']['renderAsse'+'t']=_0x48422c['id'],_0x48422c=_0x48422c['id']);const _0x44d56b=_0x4def5d['get'](_0x48422c);_0x44d56b&&this['_bindRende'+'rAsset'](_0x44d56b);}else this['_onRenderC'+'hanged'](null);}['_bindRende'+'rAsset'](_0x1c02c6){if(_0x1c02c6['on']('load',this['_onRenderA'+'ssetLoad'],this),_0x1c02c6['on']('unload',this['_onRenderA'+'ssetUnload'],this),_0x1c02c6['on']('remove',this['_onRenderA'+'ssetRemove'],this),_0x1c02c6['resource'])this['_onRenderA'+'ssetLoad'](_0x1c02c6);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x1c02c6);}}['_unbindRen'+'derAsset'](_0x50ab5f){var _0x5edcf0;_0x50ab5f['off']('load',this['_onRenderA'+'ssetLoad'],this),_0x50ab5f['off']('unload',this['_onRenderA'+'ssetUnload'],this),_0x50ab5f['off']('remove',this['_onRenderA'+'ssetRemove'],this),(_0x5edcf0=this['_evtSetMes'+'hes'])==null||_0x5edcf0['off'](),this['_evtSetMes'+'hes']=null;}['_onRenderA'+'ssetLoad'](_0x168c62){this['_onRenderC'+'hanged'](_0x168c62['resource']);}['_onRenderA'+'ssetUnload'](_0x49a1a0){this['_onRenderC'+'hanged'](null);}['_onRenderA'+'ssetRemove'](_0x27379f){this['_onRenderA'+'ssetUnload'](_0x27379f);}['_onRenderC'+'hanged'](_0x49f1b6){var _0x54315c;if(!_0x49f1b6){this['_onMeshCha'+'nged'](null);return;}(_0x54315c=this['_evtSetMes'+'hes'])==null||_0x54315c['off'](),this['_evtSetMes'+'hes']=_0x49f1b6['on']('set:meshes',this['_onRenderS'+'etMeshes'],this),_0x49f1b6['meshes']&&this['_onRenderS'+'etMeshes'](_0x49f1b6['meshes']);}['_onRenderS'+'etMeshes'](_0x42b8f8){this['_onMeshCha'+'nged'](_0x42b8f8&&_0x42b8f8[0x1436+-0x255f+0x1*0x1129]);}['onSetLoop'](_0x4c79e6,_0x335b8b,_0x37c303){this['emitter']&&(this['emitter'][_0x4c79e6]=_0x37c303,this['emitter']['resetTime']());}['onSetBlend'+'Type'](_0x3a2817,_0x17dbc7,_0x413dbf){this['emitter']&&(this['emitter'][_0x3a2817]=_0x413dbf,this['emitter']['material']['blendType']=_0x413dbf,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['_requestDe'+'pth'](){this['_requested'+'Depth']||(Wa||(Wa=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](ps)),Wa&&(Wa['incrementC'+'ounter'](),this['_requested'+'Depth']=!(0x83*0x7+-0x2669+0x22d4)));}['_releaseDe'+'pth'](){this['_requested'+'Depth']&&Wa&&(Wa['decrementC'+'ounter'](),this['_requested'+'Depth']=!(-0x20f0+0x622+0x1acf*0x1));}['onSetDepth'+'Softening'](_0x10adaa,_0x5154cf,_0x329c76){_0x5154cf!==_0x329c76&&(_0x329c76?(this['enabled']&&this['entity']['enabled']&&this['_requestDe'+'pth'](),this['emitter']&&(this['emitter'][_0x10adaa]=_0x329c76)):(this['enabled']&&this['entity']['enabled']&&this['_releaseDe'+'pth'](),this['emitter']&&(this['emitter'][_0x10adaa]=_0x329c76)),this['emitter']&&(this['reset'](),this['emitter']['resetMater'+'ial'](),this['rebuild']()));}['onSetSimpl'+'eProperty'](_0x1d81e4,_0x4d45d1,_0x42d66d){this['emitter']&&(this['emitter'][_0x1d81e4]=_0x42d66d,this['emitter']['resetMater'+'ial']());}['onSetCompl'+'exProperty'](_0x1eb5c7,_0x506d16,_0x3da914){this['emitter']&&(this['emitter'][_0x1eb5c7]=_0x3da914,this['emitter']['resetMater'+'ial'](),this['rebuild'](),this['reset']());}['onSetGraph'+'Property'](_0x2c6484,_0x56b5cf,_0x392964){this['emitter']&&(this['emitter'][_0x2c6484]=_0x392964,this['emitter']['rebuildGra'+'phs'](),this['emitter']['resetMater'+'ial']());}['onEnable'](){const _0x11c37b=this['system']['app']['scene'],_0x174020=_0x11c37b['layers'],_0x33558d=this['data'];for(let _0x37251e=0x24bf+-0x93+-0x1cf*0x14,_0x16c74d=uc['length'];_0x37251e<_0x16c74d;_0x37251e++){let _0x4b4857=_0x33558d[uc[_0x37251e]];if(_0x4b4857){if(!(_0x4b4857 instanceof pe)){if(parseInt(_0x4b4857,-0xb*-0x266+0x1ae3+-0x353b*0x1)>=-0x511*0x5+0x1*0x23b2+0x17b*-0x7)_0x4b4857=this['system']['app']['assets']['get'](_0x4b4857);else continue;}_0x4b4857&&!_0x4b4857['resource']&&this['system']['app']['assets']['load'](_0x4b4857);}}if(!this['system']['app']['graphicsDe'+'vice']['disablePar'+'ticleSyste'+'m']){if(!this['emitter']){let _0x366299=_0x33558d['mesh'];_0x366299 instanceof Ge||(_0x366299=null),this['emitter']=new $b(this['system']['app']['graphicsDe'+'vice'],{'numParticles':_0x33558d['numParticl'+'es'],'emitterExtents':_0x33558d['emitterExt'+'ents'],'emitterExtentsInner':_0x33558d['emitterExt'+'entsInner'],'emitterRadius':_0x33558d['emitterRad'+'ius'],'emitterRadiusInner':_0x33558d['emitterRad'+'iusInner'],'emitterShape':_0x33558d['emitterSha'+'pe'],'initialVelocity':_0x33558d['initialVel'+'ocity'],'wrap':_0x33558d['wrap'],'localSpace':_0x33558d['localSpace'],'screenSpace':_0x33558d['screenSpac'+'e'],'wrapBounds':_0x33558d['wrapBounds'],'lifetime':_0x33558d['lifetime'],'rate':_0x33558d['rate'],'rate2':_0x33558d['rate2'],'orientation':_0x33558d['orientatio'+'n'],'particleNormal':_0x33558d['particleNo'+'rmal'],'animTilesX':_0x33558d['animTilesX'],'animTilesY':_0x33558d['animTilesY'],'animStartFrame':_0x33558d['animStartF'+'rame'],'animNumFrames':_0x33558d['animNumFra'+'mes'],'animNumAnimations':_0x33558d['animNumAni'+'mations'],'animIndex':_0x33558d['animIndex'],'randomizeAnimIndex':_0x33558d['randomizeA'+'nimIndex'],'animSpeed':_0x33558d['animSpeed'],'animLoop':_0x33558d['animLoop'],'startAngle':_0x33558d['startAngle'],'startAngle2':_0x33558d['startAngle'+'2'],'scaleGraph':_0x33558d['scaleGraph'],'scaleGraph2':_0x33558d['scaleGraph'+'2'],'colorGraph':_0x33558d['colorGraph'],'colorGraph2':_0x33558d['colorGraph'+'2'],'alphaGraph':_0x33558d['alphaGraph'],'alphaGraph2':_0x33558d['alphaGraph'+'2'],'localVelocityGraph':_0x33558d['localVeloc'+'ityGraph'],'localVelocityGraph2':_0x33558d['localVeloc'+'ityGraph2'],'velocityGraph':_0x33558d['velocityGr'+'aph'],'velocityGraph2':_0x33558d['velocityGr'+'aph2'],'rotationSpeedGraph':_0x33558d['rotationSp'+'eedGraph'],'rotationSpeedGraph2':_0x33558d['rotationSp'+'eedGraph2'],'radialSpeedGraph':_0x33558d['radialSpee'+'dGraph'],'radialSpeedGraph2':_0x33558d['radialSpee'+'dGraph2'],'colorMap':_0x33558d['colorMap'],'normalMap':_0x33558d['normalMap'],'loop':_0x33558d['loop'],'preWarm':_0x33558d['preWarm'],'sort':_0x33558d['sort'],'stretch':_0x33558d['stretch'],'alignToMotion':_0x33558d['alignToMot'+'ion'],'lighting':_0x33558d['lighting'],'halfLambert':_0x33558d['halfLamber'+'t'],'intensity':_0x33558d['intensity'],'depthSoftening':_0x33558d['depthSofte'+'ning'],'scene':this['system']['app']['scene'],'mesh':_0x366299,'depthWrite':_0x33558d['depthWrite'],'noFog':_0x33558d['noFog'],'node':this['entity'],'blendType':_0x33558d['blendType']}),this['emitter']['meshInstan'+'ce']['node']=this['entity'],this['emitter']['drawOrder']=this['drawOrder'],_0x33558d['autoPlay']||(this['pause'](),this['emitter']['meshInstan'+'ce']['visible']=!(0x251a*0x1+-0x1eef+-0x62a));}this['emitter']['colorMap']&&this['addMeshIns'+'tanceToLay'+'ers'](),this['_evtLayers'+'Changed']=_0x11c37b['on']('set:layers',this['onLayersCh'+'anged'],this),_0x174020&&(this['_evtLayerA'+'dded']=_0x174020['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x174020['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&_0x33558d['depthSofte'+'ning']&&this['_requestDe'+'pth']();}}['onDisable'](){var _0x5eae69,_0x132987,_0x1e2097;const _0x4b2ac9=this['system']['app']['scene']['layers'];(_0x5eae69=this['_evtLayers'+'Changed'])==null||_0x5eae69['off'](),this['_evtLayers'+'Changed']=null,_0x4b2ac9&&((_0x132987=this['_evtLayerA'+'dded'])==null||_0x132987['off'](),this['_evtLayerA'+'dded']=null,(_0x1e2097=this['_evtLayerR'+'emoved'])==null||_0x1e2097['off'](),this['_evtLayerR'+'emoved']=null),this['emitter']&&(this['removeMesh'+'InstanceFr'+'omLayers'](),this['data']['depthSofte'+'ning']&&this['_releaseDe'+'pth'](),this['emitter']['camera']=null);}['onBeforeRe'+'move'](){this['enabled']&&(this['enabled']=!(-0x4bb*-0x7+-0x256c+0x450)),this['emitter']&&(this['emitter']['destroy'](),this['emitter']=null);for(let _0x20c721=0x3*-0xad0+0xc59*-0x3+-0xe7*-0x4d;_0x20c721<uc['length'];_0x20c721++){const _0x47c5e9=uc[_0x20c721];this['data'][_0x47c5e9]&&(this[_0x47c5e9]=null);}this['off']();}['reset'](){this['emitter']&&this['emitter']['reset']();}['stop'](){this['emitter']&&(this['emitter']['loop']=!(0x1*0x239+0x9b*0x1+0x2d3*-0x1),this['emitter']['resetTime'](),this['emitter']['addTime'](0xd9a*0x2+-0x30f+0x1825*-0x1,!(0x1*0x25e+0x2123+-0x2381)));}['pause'](){this['data']['paused']=!(0xa85*0x1+0xf6+-0xb7b);}['unpause'](){this['data']['paused']=!(0x1*0x21b9+-0x14d5+-0xce3*0x1);}['play'](){this['data']['paused']=!(-0x185*0x15+-0xa38+0x2a22),this['emitter']&&(this['emitter']['meshInstan'+'ce']['visible']=!(0x1fb1+0x65b*-0x6+-0x11*-0x61),this['emitter']['loop']=this['data']['loop'],this['emitter']['resetTime']());}['isPlaying'](){return this['data']['paused']?!(-0x1*-0x178b+-0x11*0x71+-0x1009):this['emitter']&&this['emitter']['loop']?!(-0x1*0x20de+-0xf0e+0x1*0x2fec):Date['now']()<=this['emitter']['endTime'];}['setInTools'](){const {emitter:_0x16ea7e}=this;_0x16ea7e&&!_0x16ea7e['inTools']&&(_0x16ea7e['inTools']=!(0x1cfb+-0x1692+-0x669),this['rebuild']());}['rebuild'](){const _0x39ad78=this['enabled'];this['enabled']=!(-0x52a+-0x1*-0xa35+-0x1e*0x2b),this['emitter']&&this['emitter']['rebuild'](),this['enabled']=_0x39ad78;}}class yR{constructor(){this['numParticl'+'es']=0x12e6*-0x1+-0x3b8+0x1*0x169f,this['rate']=0x1*-0x256a+0xe*-0x170+0x398b,this['rate2']=null,this['startAngle']=-0x1515+0x1d2*-0xc+0x197*0x1b,this['startAngle'+'2']=null,this['lifetime']=-0x51*0x12+-0x1dc3+0x23a7,this['emitterExt'+'ents']=new D(),this['emitterExt'+'entsInner']=new D(),this['emitterRad'+'ius']=-0x6dd+-0x1*-0x1e95+-0x17b8,this['emitterRad'+'iusInner']=-0xb3*-0x3+-0x159+-0xc0,this['emitterSha'+'pe']=ai,this['initialVel'+'ocity']=0xaba+-0x1*-0x2626+0xb8*-0x44,this['wrap']=!(0xc*0x31d+-0x1cd*-0x9+-0x3590),this['wrapBounds']=new D(),this['localSpace']=!(0x1*-0x5b+0x9c7+-0x1*0x96b),this['screenSpac'+'e']=!(0x4*0x665+-0x1*0x14dd+-0x4b6),this['colorMap']=null,this['colorMapAs'+'set']=null,this['normalMap']=null,this['normalMapA'+'sset']=null,this['loop']=!(0x6b9+-0x2643+0x1f8a),this['preWarm']=!(0x17db+-0x2445+-0x1*-0xc6b),this['sort']=0x1d*-0xa3+0x81*0x1c+0x45b,this['mode']=Ty,this['scene']=null,this['lighting']=!(0xaf3+-0x3*0x403+0x117),this['halfLamber'+'t']=!(-0x2482+-0x596+0x2a19*0x1),this['intensity']=-0x152a+0x12fd+-0x1f*-0x12,this['stretch']=-0x7f*0x1+-0x125*-0x1f+-0x22fc,this['alignToMot'+'ion']=!(-0xb*0x37d+-0x5ca+-0x1615*-0x2),this['depthSofte'+'ning']=-0x114b+-0x26cb+0x959*0x6,this['renderAsse'+'t']=null,this['meshAsset']=null,this['mesh']=null,this['depthWrite']=!(0x2023+0xf7c+-0x17*0x212),this['noFog']=!(-0x633+-0x1405+0x1a39),this['orientatio'+'n']=Zc,this['particleNo'+'rmal']=new D(0x4*0x115+-0xbb3+0x75f,-0x251e+0xc14+0x859*0x3,-0xa*-0x1c9+0x17*0xa2+-0x2068),this['animTilesX']=-0x13ff+0xcd*0x5+0xfff,this['animTilesY']=-0x1343+0x478*-0x5+0x299c,this['animStartF'+'rame']=0x1d23*0x1+-0x84e*0x3+-0x439,this['animNumFra'+'mes']=-0x1579+0x1*0x1ab1+0x10b*-0x5,this['animNumAni'+'mations']=0x1c5*-0x3+0x15fb+-0x10ab,this['animIndex']=0x5*0x5e9+0x2*-0xc5f+-0x4cf*0x1,this['randomizeA'+'nimIndex']=!(0x1bd*0xb+0x7ea+-0x5*0x568),this['animSpeed']=-0x2*-0x26a+-0x6fd*-0x1+-0xd8*0xe,this['animLoop']=!(-0x71d+0x1*-0x231d+0x2a3a),this['scaleGraph']=null,this['scaleGraph'+'2']=null,this['colorGraph']=null,this['colorGraph'+'2']=null,this['alphaGraph']=null,this['alphaGraph'+'2']=null,this['localVeloc'+'ityGraph']=null,this['localVeloc'+'ityGraph2']=null,this['velocityGr'+'aph']=null,this['velocityGr'+'aph2']=null,this['rotationSp'+'eedGraph']=null,this['rotationSp'+'eedGraph2']=null,this['radialSpee'+'dGraph']=null,this['radialSpee'+'dGraph2']=null,this['blendType']=Zs,this['enabled']=!(-0x1a20+-0x29*0x52+0x2742),this['paused']=!(0x1e73+-0x269*-0x1+0x287*-0xd),this['autoPlay']=!(0x2c5*-0xb+0x2191+0x2*-0x18d),this['layers']=[Ji];}}const vR='\x0avarying\x20v'+'ec4\x20texCoo'+'rdsAlphaLi'+'fe;\x0a\x0aunifo'+'rm\x20sampler'+'2D\x20colorMa'+'p;\x0auniform'+'\x20sampler2D'+'\x20colorPara'+'m;\x0auniform'+'\x20float\x20gra'+'phSampleSi'+'ze;\x0aunifor'+'m\x20float\x20gr'+'aphNumSamp'+'les;\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0auniform\x20'+'float\x20soft'+'ening;\x0auni'+'form\x20float'+'\x20colorMult'+';\x0a\x0afloat\x20s'+'aturate(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex\x20\x20=\x20tex'+'ture2D(col'+'orMap,\x20vec'+'2(texCoord'+'sAlphaLife'+'.x,\x201.0\x20-\x20'+'texCoordsA'+'lphaLife.y'+'));\x0a\x20\x20\x20\x20ve'+'c4\x20ramp\x20=\x20'+'texture2D('+'colorParam'+',\x20vec2(tex'+'CoordsAlph'+'aLife.w,\x200'+'.0));\x0a\x20\x20\x20\x20'+'ramp.rgb\x20*'+'=\x20colorMul'+'t;\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20+=\x20te'+'xCoordsAlp'+'haLife.z;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'rgb\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'float\x20a\x20\x20='+'\x20tex.a\x20*\x20r'+'amp.a;\x0a',xR='\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0af'+'loat\x20satur'+'ate(float\x20'+'x)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p(x,\x200.0,\x20'+'1.0);\x0a}\x0a\x0av'+'ec4\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(\x20texture2'+'D(tex,tc),'+'\x20texture2D'+'(tex,tc\x20+\x20'+'graphSampl'+'eSize),\x20fr'+'act(tc.x*g'+'raphNumSam'+'ples)\x20);\x0a}'+'\x0a\x0avec4\x20tex'+'1Dlod_lerp'+'(TEXTURE_A'+'CCEPT_HIGH'+'P(tex),\x20ve'+'c2\x20tc,\x20out'+'\x20vec3\x20w)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'a\x20=\x20textur'+'e2D(tex,tc'+');\x0a\x20\x20\x20\x20vec'+'4\x20b\x20=\x20text'+'ure2D(tex,'+'tc\x20+\x20graph'+'SampleSize'+');\x0a\x20\x20\x20\x20flo'+'at\x20c\x20=\x20fra'+'ct(tc.x*gr'+'aphNumSamp'+'les);\x0a\x0a\x20\x20\x20'+'\x20vec3\x20unpa'+'ckedA\x20=\x20un'+'pack3NFloa'+'ts(a.w);\x0a\x20'+'\x20\x20\x20vec3\x20un'+'packedB\x20=\x20'+'unpack3NFl'+'oats(b.w);'+'\x0a\x20\x20\x20\x20w\x20=\x20m'+'ix(unpacke'+'dA,\x20unpack'+'edB,\x20c);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20mix(a,\x20b,'+'\x20c);\x0a}\x0a\x0ave'+'c2\x20rotate('+'vec2\x20quadX'+'Y,\x20float\x20p'+'Rotation,\x20'+'out\x20mat2\x20r'+'otMatrix)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20cos('+'pRotation)'+';\x0a\x20\x20\x20\x20floa'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x0a\x20\x20\x20\x20mat'+'2\x20m\x20=\x20mat2'+'(c,\x20-s,\x20s,'+'\x20c);\x0a\x20\x20\x20\x20r'+'otMatrix\x20='+'\x20m;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20m\x20*\x20'+'quadXY;\x0a}\x0a'+'\x0avec3\x20bill'+'board(vec3'+'\x20InstanceC'+'oords,\x20vec'+'2\x20quadXY)\x20'+'{\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREEN_'+('SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'os\x20=\x20vec3('+'-1,\x200,\x200)\x20'+'*\x20quadXY.x'+'\x20+\x20vec3(0,'+'\x20-1,\x200)\x20*\x20'+'quadXY.y;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20pos;\x0a}\x0a\x0av'+'ec3\x20custom'+'Face(vec3\x20'+'InstanceCo'+'ords,\x20vec2'+'\x20quadXY)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'pos\x20=\x20face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20faceBinor'+'m\x20*\x20quadXY'+'.y;\x0a\x20\x20\x20\x20re'+'turn\x20pos;\x0a'+'}\x0a\x0avec2\x20sa'+'feNormaliz'+'e(vec2\x20v)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20l\x20=\x20leng'+'th(v);\x0a\x20\x20\x20'+'\x20return\x20(l'+'\x20>\x201e-06)\x20'+'?\x20v\x20/\x20l\x20:\x20'+'v;\x0a}\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20meshLoc'+'alPos\x20=\x20pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20flo'+'at\x20id\x20=\x20fl'+'oor(partic'+'le_vertexD'+'ata.w);\x0a\x0a\x20'+'\x20\x20\x20float\x20r'+'ndFactor\x20='+'\x20fract(sin'+'(id\x20+\x201.0\x20'+'+\x20seed));\x0a'+'\x20\x20\x20\x20vec3\x20r'+'ndFactor3\x20'+'=\x20vec3(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20float\x20uv\x20'+'=\x20id\x20/\x20num'+'ParticlesP'+'ot;\x0a\x20\x20\x20\x20re'+'adInput(uv'+');\x0a\x0a#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20inV'+'el\x20=\x20mat3('+'matrix_mod'+'el)\x20*\x20inVe'+'l;\x0a#endif\x0a'+'\x20\x20\x20\x20vec2\x20v'+'elocityV\x20='+'\x20safeNorma'+'lize((mat3'+'(matrix_vi'+'ew)\x20*\x20inVe'+'l).xy);\x20//'+'\x20should\x20be'+'\x20removed\x20b'+'y\x20compiler'+'\x20if\x20align/'+'stretch\x20is'+'\x20not\x20used\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20particleL'+'ifetime\x20=\x20'+'lifetime;\x0a'+'\x0a\x20\x20\x20\x20if\x20(i')+('nLife\x20<=\x200'+'.0\x20||\x20inLi'+'fe\x20>\x20parti'+'cleLifetim'+'e\x20||\x20!inSh'+'ow)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20meshLoca'+'lPos\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20vec2\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20nlife\x20='+'\x20clamp(inL'+'ife\x20/\x20part'+'icleLifeti'+'me,\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20param'+'Div;\x0a\x20\x20\x20\x20v'+'ec4\x20params'+'\x20=\x20tex1Dlo'+'d_lerp(TEX'+'TURE_PASS('+'internalTe'+'x2),\x20vec2('+'nlife,\x200),'+'\x20paramDiv)'+';\x0a\x20\x20\x20\x20floa'+'t\x20scale\x20=\x20'+'params.y;\x0a'+'\x20\x20\x20\x20float\x20'+'scaleDiv\x20='+'\x20paramDiv.'+'x;\x0a\x20\x20\x20\x20flo'+'at\x20alphaDi'+'v\x20=\x20paramD'+'iv.z;\x0a\x0a\x20\x20\x20'+'\x20scale\x20+=\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20scale'+'DivMult\x20*\x20'+'fract(rndF'+'actor*1000'+'0.0);\x0a\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(quadXY'+'\x20*\x20-0.5\x20+\x20'+'0.5,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'alphaDivMu'+'lt\x20*\x20fract'+'(rndFactor'+'*1000.0),\x20'+'nlife);\x0a#e'+'lse\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(partic'+'le_uv,\x20(al'+'phaDiv\x20*\x202'+'.0\x20-\x201.0)\x20'+'*\x20alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePos\x20='+'\x20inPos;\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePosMo'+'ved\x20=\x20vec3'+'(0.0);\x0a\x0a\x20\x20'+'\x20\x20mat2\x20rot'+'Matrix;\x0a'),TR='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20min(flo'+'or(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y)\x20+\x20animT'+'exParams.x'+',\x20animTexP'+'arams.z);\x0a',wR='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20floor(m'+'od(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y\x20+\x20animTe'+'xParams.x,'+'\x20animTexPa'+'rams.z\x20+\x201'+'.0));\x0a',ER='\x0a\x20\x20\x20\x20float'+'\x20animation'+'Index;\x0a\x0a\x20\x20'+'\x20\x20if\x20(anim'+'TexIndexPa'+'rams.y\x20==\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20anima'+'tionIndex\x20'+'=\x20floor((a'+'nimTexPara'+'ms.w\x20+\x201.0'+')\x20*\x20rndFac'+'tor3.z)\x20*\x20'+'(animTexPa'+'rams.z\x20+\x201'+'.0);\x0a\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20animTex'+'IndexParam'+'s.x\x20*\x20(ani'+'mTexParams'+'.z\x20+\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20float\x20at'+'lasX\x20=\x20(an'+'imationInd'+'ex\x20+\x20animF'+'rame)\x20*\x20an'+'imTexTiles'+'Params.x;\x0a'+'\x20\x20\x20\x20float\x20'+'atlasY\x20=\x201'+'.0\x20-\x20floor'+'(atlasX\x20+\x20'+'1.0)\x20*\x20ani'+'mTexTilesP'+'arams.y;\x0a\x20'+'\x20\x20\x20atlasX\x20'+'=\x20fract(at'+'lasX);\x0a\x0a\x20\x20'+'\x20\x20texCoord'+'sAlphaLife'+'.xy\x20*=\x20ani'+'mTexTilesP'+'arams.xy;\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe.xy\x20+=\x20v'+'ec2(atlasX'+',\x20atlasY);'+'\x0a',bR='\x0avoid\x20read'+'Input(floa'+'t\x20uv)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'\x20=\x20texture'+'2D(particl'+'eTexIN,\x20ve'+'c2(uv,\x200.2'+'5));\x0a\x20\x20\x20\x20v'+'ec4\x20tex2\x20='+'\x20texture2D'+'(particleT'+'exIN,\x20vec2'+'(uv,\x200.75)'+');\x0a\x0a\x20\x20\x20\x20in'+'Pos\x20=\x20tex.'+'xyz;\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inAngle\x20='+'\x20(tex.w\x20<\x20'+'0.0?\x20-tex.'+'w\x20:\x20tex.w)'+'\x20-\x201000.0;'+'\x0a\x20\x20\x20\x20inSho'+'w\x20=\x20tex.w\x20'+'>=\x200.0;\x0a\x20\x20'+'\x20\x20inLife\x20='+'\x20tex2.w;\x0a}'+'\x0a',AR='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0a#'+'define\x20PI2'+'\x206.2831853'+'07179586\x0a\x0a'+'uniform\x20ve'+'c3\x20inBound'+'sSize;\x0auni'+'form\x20vec3\x20'+'inBoundsCe'+'nter;\x0a\x0auni'+'form\x20float'+'\x20maxVel;\x0a\x0a'+'float\x20deco'+'deFloatRG('+'vec2\x20rg)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20rg.y\x20*\x20('+'1.0\x20/\x20255.'+'0)\x20+\x20rg.x;'+'\x0a}\x0a\x0afloat\x20'+'decodeFloa'+'tRGBA(\x20vec'+'4\x20rgba\x20)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20dot(rgba'+',\x20vec4(1.0'+',\x201.0\x20/\x2025'+'5.0,\x201.0\x20/'+'\x2065025.0,\x20'+'1.0\x20/\x201605'+'81375.0));'+'\x0a}\x0a\x0avoid\x20r'+'eadInput(f'+'loat\x20uv)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex0\x20=\x20tex'+'ture2D(par'+'ticleTexIN'+',\x20vec2(uv,'+'\x200.125));\x0a'+'\x20\x20\x20\x20vec4\x20t'+'ex1\x20=\x20text'+'ure2D(part'+'icleTexIN,'+'\x20vec2(uv,\x20'+'0.375));\x0a\x20'+'\x20\x20\x20vec4\x20te'+'x2\x20=\x20textu'+'re2D(parti'+'cleTexIN,\x20'+'vec2(uv,\x200'+'.625));\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'3\x20=\x20textur'+'e2D(partic'+'leTexIN,\x20v'+'ec2(uv,\x200.'+'875));\x0a\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'vec3(decod'+'eFloatRG(t'+'ex0.rg),\x20d'+'ecodeFloat'+'RG(tex0.ba'+'),\x20decodeF'+'loatRG(tex'+'1.rg));\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'(inPos\x20-\x20v'+'ec3(0.5))\x20'+'*\x20inBounds'+'Size\x20+\x20inB'+'oundsCente'+'r;\x0a\x0a\x20\x20\x20\x20in'+'Vel\x20=\x20tex2'+'.xyz;\x0a\x20\x20\x20\x20'+'inVel\x20=\x20(i'+'nVel\x20-\x20vec'+'3(0.5))\x20*\x20'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20float\x20max'+'NegLife\x20=\x20'+'max(lifeti'+'me,\x20(numPa'+('rticles\x20-\x20'+'1.0)\x20*\x20(ra'+'te+rateDiv'+'));\x0a\x20\x20\x20\x20fl'+'oat\x20maxPos'+'Life\x20=\x20lif'+'etime+1.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20inLife'+'\x20*\x20(maxNeg'+'Life\x20+\x20max'+'PosLife)\x20-'+'\x20maxNegLif'+'e;\x0a}\x0a'),CR='\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'gl_FragCoo'+'rd.y<1.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'outPos,\x20(o'+'utAngle\x20+\x20'+'1000.0)\x20*\x20'+'visMode);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(outVel,\x20o'+'utLife);\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',PR='\x0auniform\x20v'+'ec3\x20outBou'+'ndsMul;\x0aun'+'iform\x20vec3'+'\x20outBounds'+'Add;\x0a\x0avec2'+'\x20encodeFlo'+'atRG(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec2\x20enc'+'\x20=\x20vec2(1.'+'0,\x20255.0)\x20'+'*\x20v;\x0a\x20\x20\x20\x20e'+'nc\x20=\x20fract'+'(enc);\x0a\x20\x20\x20'+'\x20enc\x20-=\x20en'+'c.yy\x20*\x20vec'+'2(1.0/255.'+'0,\x201.0/255'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20enc;'+'\x0a}\x0a\x0avec4\x20e'+'ncodeFloat'+'RGBA(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20enc'+'\x20=\x20vec4(1.'+'0,\x20255.0,\x20'+'65025.0,\x201'+'60581375.0'+')\x20*\x20v;\x0a\x20\x20\x20'+'\x20enc\x20=\x20fra'+'ct(enc);\x0a\x20'+'\x20\x20\x20enc\x20-=\x20'+'enc.yzww\x20*'+'\x20vec4(1.0/'+'255.0,1.0/'+'255.0,1.0/'+'255.0,0.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20enc;\x0a}\x0a'+'\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20outP'+'os\x20=\x20outPo'+'s\x20*\x20outBou'+'ndsMul\x20+\x20o'+'utBoundsAd'+'d;\x0a\x20\x20\x20\x20out'+'Angle\x20=\x20fr'+'act(outAng'+'le\x20/\x20PI2);'+'\x0a\x0a\x20\x20\x20\x20outV'+'el\x20=\x20(outV'+'el\x20/\x20maxVe'+'l)\x20+\x20vec3('+'0.5);\x20//\x20T'+'ODO:\x20mul\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'maxNegLife'+'\x20=\x20max(lif'+'etime,\x20(nu'+'mParticles'+'\x20-\x201.0)\x20*\x20'+'(rate+rate'+'Div));\x0a\x20\x20\x20'+'\x20float\x20max'+'PosLife\x20=\x20'+'lifetime+1'+'.0;\x0a\x20\x20\x20\x20ou'+'tLife\x20=\x20(o'+'utLife\x20+\x20m'+'axNegLife)'+'\x20/\x20(maxNeg'+'Life\x20+\x20max'+'PosLife);\x0a'+'\x0a\x20\x20\x20\x20if\x20(g'+'l_FragCoor'+'d.y\x20<\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(encodeFlo'+'atRG(outPo'+'s.x),\x20enco'+'deFloatRG('+'outPos.y))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(gl_'+'FragCoord.'+'y\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(e'+'ncodeFloat'+'RG(outPos.'+'z),\x20encode'+'FloatRG(ou'+'tAngle));\x0a'+'\x20\x20\x20\x20}\x20else'+('\x20if\x20(gl_Fr'+'agCoord.y\x20'+'<\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(out'+'Vel,\x20visMo'+'de*0.5+0.5'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20e'+'ncodeFloat'+'RGBA(outLi'+'fe);\x0a\x20\x20\x20\x20}'+'\x0a}\x0a'),MR='\x0auniform\x20m'+'at3\x20spawnB'+'ounds;\x0auni'+'form\x20vec3\x20'+'spawnPosIn'+'nerRatio;\x0a'+'\x0avec3\x20calc'+'SpawnPosit'+'ion(vec3\x20i'+'nBounds,\x20f'+'loat\x20rndFa'+'ctor)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20pos'+'\x20=\x20inBound'+'s\x20-\x20vec3(0'+'.5);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20posAb'+'s\x20=\x20abs(po'+'s);\x0a\x20\x20\x20\x20ve'+'c3\x20maxPos\x20'+'=\x20vec3(max'+'(posAbs.x,'+'\x20max(posAb'+'s.y,\x20posAb'+'s.z)));\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ed'+'ge\x20=\x20maxPo'+'s\x20+\x20(vec3('+'0.5)\x20-\x20max'+'Pos)\x20*\x20spa'+'wnPosInner'+'Ratio;\x0a\x0a\x20\x20'+'\x20\x20pos.x\x20=\x20'+'edge.x\x20*\x20('+'maxPos.x\x20='+'=\x20posAbs.x'+'\x20?\x20sign(po'+'s.x)\x20:\x202.0'+'\x20*\x20pos.x);'+'\x0a\x20\x20\x20\x20pos.y'+'\x20=\x20edge.y\x20'+'*\x20(maxPos.'+'y\x20==\x20posAb'+'s.y\x20?\x20sign'+'(pos.y)\x20:\x20'+'2.0\x20*\x20pos.'+'y);\x0a\x20\x20\x20\x20po'+'s.z\x20=\x20edge'+'.z\x20*\x20(maxP'+'os.z\x20==\x20po'+'sAbs.z\x20?\x20s'+'ign(pos.z)'+'\x20:\x202.0\x20*\x20p'+'os.z);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20return\x20e'+'mitterPos\x20'+'+\x20spawnBou'+'nds\x20*\x20pos;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20sp'+'awnBounds\x20'+'*\x20pos;\x0a#en'+'dif\x0a}\x0a\x0avoi'+'d\x20addIniti'+'alVelocity'+'(inout\x20vec'+'3\x20localVel'+'ocity,\x20vec'+'3\x20inBounds'+')\x20{\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20-=\x20vec3('+'0,\x200,\x20init'+'ialVelocit'+'y);\x0a}\x0a',DR='\x0a\x20\x20\x20\x20write'+'Output();\x0a'+'}\x0a',IR='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20parti'+'cleTexIN;\x0a'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex0;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0aunif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x2;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex3'+';\x0a\x0auniform'+'\x20mat3\x20emit'+'terMatrix;'+'\x0auniform\x20m'+'at3\x20emitte'+'rMatrixInv'+';\x0auniform\x20'+'vec3\x20emitt'+'erScale;\x0a\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Pos;\x0aunifo'+'rm\x20vec3\x20fr'+'ameRandom;'+'\x0auniform\x20v'+'ec3\x20localV'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20vec3\x20v'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20float\x20'+'delta;\x0auni'+'form\x20float'+'\x20rate;\x0auni'+'form\x20float'+'\x20rateDiv;\x0a'+'uniform\x20fl'+'oat\x20lifeti'+'me;\x0aunifor'+'m\x20float\x20nu'+'mParticles'+';\x0auniform\x20'+'float\x20rotS'+'peedDivMul'+'t;\x0auniform'+'\x20float\x20rad'+'ialSpeedDi'+'vMult;\x0auni'+'form\x20float'+'\x20seed;\x0auni'+'form\x20float'+'\x20startAngl'+'e;\x0auniform'+'\x20float\x20sta'+'rtAngle2;\x0a'+'uniform\x20fl'+'oat\x20initia'+'lVelocity;'+'\x0a\x0auniform\x20'+'float\x20grap'+'hSampleSiz'+'e;\x0auniform'+'\x20float\x20gra'+'phNumSampl'+'es;\x0a\x0avec3\x20'+'inPos;\x0avec'+'3\x20inVel;\x0af'+'loat\x20inAng'+'le;\x0abool\x20i'+'nShow;\x0aflo'+'at\x20inLife;'+'\x0afloat\x20vis'+'Mode;\x0a\x0avec'+'3\x20outPos;\x0a'+'vec3\x20outVe'+'l;\x0afloat\x20o'+'utAngle;\x0ab'+'ool\x20outSho'+'w;\x0afloat\x20o'+'utLife;\x0a',LR='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x20-1.0;\x0a\x20\x20\x20'+'\x20}\x0a',RR='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20outLi'+'fe\x20<\x200.0?\x20'+'-1.0:\x20visM'+'ode;\x0a',OR='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20visM'+'ode\x20=\x20outL'+'ife\x20<\x200.0?'+'\x201.0:\x20visM'+'ode;\x0a',FR='\x0auniform\x20f'+'loat\x20spawn'+'BoundsSphe'+'re;\x0aunifor'+'m\x20float\x20sp'+'awnBoundsS'+'phereInner'+'Ratio;\x0a\x0ave'+'c3\x20calcSpa'+'wnPosition'+'(vec3\x20inBo'+'unds,\x20floa'+'t\x20rndFacto'+'r)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20rnd4\x20'+'=\x20fract(rn'+'dFactor\x20*\x20'+'1000.0);\x0a\x20'+'\x20\x20\x20vec3\x20no'+'rm\x20=\x20norma'+'lize(inBou'+'nds.xyz\x20-\x20'+'vec3(0.5))'+';\x0a\x20\x20\x20\x20floa'+'t\x20r\x20=\x20rnd4'+'\x20*\x20(1.0\x20-\x20'+'spawnBound'+'sSphereInn'+'erRatio)\x20+'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio;\x0a'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20return'+'\x20emitterPo'+'s\x20+\x20norm\x20*'+'\x20r\x20*\x20spawn'+'BoundsSphe'+'re;\x0a#else\x0a'+'\x20\x20\x20\x20return'+'\x20norm\x20*\x20r\x20'+'*\x20spawnBou'+'ndsSphere;'+'\x0a#endif\x0a}\x0a'+'\x0avoid\x20addI'+'nitialVelo'+'city(inout'+'\x20vec3\x20loca'+'lVelocity,'+'\x20vec3\x20inBo'+'unds)\x20{\x0a\x20\x20'+'\x20\x20localVel'+'ocity\x20+=\x20n'+'ormalize(i'+'nBounds\x20-\x20'+'vec3(0.5))'+'\x20*\x20initial'+'Velocity;\x0a'+'}\x0a',NR='\x0afloat\x20sat'+'urate(floa'+'t\x20x)\x20{\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(x,\x200.0'+',\x201.0);\x0a}\x0a'+'\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0av'+'ec3\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc,\x20out\x20ve'+'c3\x20w)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20a\x20='+'\x20texture2D'+'(tex,\x20tc);'+'\x0a\x20\x20\x20\x20vec4\x20'+'b\x20=\x20textur'+'e2D(tex,\x20t'+'c\x20+\x20graphS'+'ampleSize)'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20g'+'raphNumSam'+'ples);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20unp'+'ackedA\x20=\x20u'+'npack3NFlo'+'ats(a.w);\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20w\x20=\x20'+'mix(unpack'+'edA,\x20unpac'+'kedB,\x20c);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(a.xy'+'z,\x20b.xyz,\x20'+'c);\x0a}\x0a\x0a#de'+'fine\x20HASHS'+'CALE4\x20vec4'+'(1031,\x20.10'+'30,\x20.0973,'+'\x20.1099)\x0ave'+'c4\x20hash41('+'float\x20p)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'p4\x20=\x20fract'+'(vec4(p)\x20*'+'\x20HASHSCALE'+'4);\x0a\x20\x20\x20\x20p4'+'\x20+=\x20dot(p4'+',\x20p4.wzxy+'+'19.19);\x0a\x20\x20'+'\x20\x20return\x20f'+'ract(vec4('+'(p4.x\x20+\x20p4'+'.y)*p4.z,\x20'+'(p4.x\x20+\x20p4'+'.z)*p4.y,\x20'+'(p4.y\x20+\x20p4'+'.z)*p4.w,\x20'+'(p4.z\x20+\x20p4'+'.w)*p4.x))'+';\x0a}\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(gl_FragCo'+'ord.x\x20>\x20nu'+'mParticles'+')\x20discard;'+'\x0a\x0a\x20\x20\x20\x20read'+'Input(vUv0'+'.x);\x0a\x20\x20\x20\x20v'+'isMode\x20=\x20i'+'nShow?\x201.0'+'\x20:\x20-1.0;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20r'+'ndFactor\x20='+'\x20hash41(gl'+'_FragCoord'+('.x\x20+\x20seed)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eRate\x20=\x20ra'+'te\x20+\x20rateD'+'iv\x20*\x20rndFa'+'ctor.x;\x0a\x0a\x20'+'\x20\x20\x20outLife'+'\x20=\x20inLife\x20'+'+\x20delta;\x0a\x20'+'\x20\x20\x20float\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20lifetim'+'e,\x200.0,\x201.'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localV'+'elocityDiv'+';\x0a\x20\x20\x20\x20vec3'+'\x20velocityD'+'iv;\x0a\x20\x20\x20\x20ve'+'c3\x20paramDi'+'v;\x0a\x20\x20\x20\x20vec'+'3\x20localVel'+'ocity\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex0),\x20'+'vec2(nlife'+',\x200),\x20loca'+'lVelocityD'+'iv);\x0a\x20\x20\x20\x20v'+'ec3\x20veloci'+'ty\x20=\x20\x20\x20\x20\x20\x20'+'tex1Dlod_l'+'erp(TEXTUR'+'E_PASS(int'+'ernalTex1)'+',\x20vec2(nli'+'fe,\x200),\x20ve'+'locityDiv)'+';\x0a\x20\x20\x20\x20vec3'+'\x20params\x20=\x20'+'\x20\x20\x20\x20\x20\x20\x20tex'+'1Dlod_lerp'+'(TEXTURE_P'+'ASS(intern'+'alTex2),\x20v'+'ec2(nlife,'+'\x200),\x20param'+'Div);\x0a\x20\x20\x20\x20'+'float\x20rotS'+'peed\x20=\x20par'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rot'+'SpeedDiv\x20='+'\x20paramDiv.'+'y;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20radialP'+'arams\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex3),\x20'+'vec2(nlife'+',\x200),\x20para'+'mDiv);\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeed\x20='+'\x20radialPar'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeedDi'+'v\x20=\x20radial'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20bool\x20'+'respawn\x20=\x20'+'inLife\x20<=\x20'+'0.0\x20||\x20out'+'Life\x20>=\x20li'+'fetime;\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'respawn\x20?\x20'+'calcSpawnP'+'osition(rn'+'dFactor.xy'+'z,\x20rndFact'+'or.x)\x20:\x20in'+'Pos;\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20r'+'espawn\x20?\x20m'+'ix(startAn'+'gle,\x20start'+'Angle2,\x20rn'+'dFactor.x)'+'\x20:\x20inAngle'+';\x0a\x0a#ifndef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20vec')+('3\x20radialVe'+'l\x20=\x20inPos\x20'+'-\x20emitterP'+'os;\x0a#else\x0a'+'\x20\x20\x20\x20vec3\x20r'+'adialVel\x20='+'\x20inPos;\x0a#e'+'ndif\x0a\x20\x20\x20\x20r'+'adialVel\x20='+'\x20(dot(radi'+'alVel,\x20rad'+'ialVel)\x20>\x20'+'1.0E-8)\x20?\x20'+'radialSpee'+'d\x20*\x20normal'+'ize(radial'+'Vel)\x20:\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20+=\x20(radi'+'alSpeedDiv'+'\x20*\x20vec3(2.'+'0)\x20-\x20vec3('+'1.0))\x20*\x20ra'+'dialSpeedD'+'ivMult\x20*\x20r'+'ndFactor.x'+'yz;\x0a\x0a\x20\x20\x20\x20l'+'ocalVeloci'+'ty\x20+=\x20\x20\x20\x20('+'localVeloc'+'ityDiv\x20*\x20v'+'ec3(2.0)\x20-'+'\x20vec3(1.0)'+')\x20*\x20localV'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20velo'+'city\x20+=\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20(vel'+'ocityDiv\x20*'+'\x20vec3(2.0)'+'\x20-\x20vec3(1.'+'0))\x20*\x20velo'+'cityDivMul'+'t\x20*\x20rndFac'+'tor.xyz;\x0a\x20'+'\x20\x20\x20rotSpee'+'d\x20+=\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(rotSpe'+'edDiv\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20rotSpeedD'+'ivMult\x20*\x20r'+'ndFactor.y'+';\x0a\x0a\x20\x20\x20\x20add'+'InitialVel'+'ocity(loca'+'lVelocity,'+'\x20rndFactor'+'.xyz);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20em'+'itterScale'+';\x0a#else\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20(localVel'+'ocity\x20+\x20ra'+'dialVel)\x20/'+'\x20emitterSc'+'ale\x20+\x20emit'+'terMatrixI'+'nv\x20*\x20veloc'+'ity;\x0a#endi'+'f\x0a\x0a\x20\x20\x20\x20out'+'Pos\x20=\x20inPo'+'s\x20+\x20outVel'+'\x20*\x20delta;\x0a'+'\x20\x20\x20\x20outAng'+'le\x20=\x20inAng'+'le\x20+\x20rotSp'+'eed\x20*\x20delt'+'a;\x0a'),kR='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',UR='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'*=\x20saturat'+'e(gammaCor'+'rectInput('+'max(a,\x200.0'+')));\x0a\x20\x20\x20\x20i'+'f\x20((rgb.r\x20'+'+\x20rgb.g\x20+\x20'+'rgb.b)\x20<\x200'+'.000001)\x20d'+'iscard;\x0a',BR='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3('+'1.0),\x20rgb,'+'\x20vec3(a));'+'\x0a\x20\x20\x20\x20if\x20(r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+'\x20>\x202.99)\x20d'+'iscard;\x0a',zR='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20d'+'iscard;\x0a',VR='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20\x20\x20/'+'/\x20XYZ\x20=\x20wo'+'rld\x20pos,\x20W'+'\x20=\x20life\x0aat'+'tribute\x20ve'+'c4\x20particl'+'e_vertexDa'+'ta2;\x20\x20//\x20X'+'\x20=\x20angle,\x20'+'Y\x20=\x20scale,'+'\x20Z\x20=\x20alpha'+',\x20W\x20=\x20velo'+'city.x\x0aatt'+'ribute\x20vec'+'4\x20particle'+'_vertexDat'+'a3;\x20\x20//\x20XY'+'Z\x20=\x20partic'+'le\x20local\x20p'+'os,\x20W\x20=\x20ve'+'locity.y\x0aa'+'ttribute\x20f'+'loat\x20parti'+'cle_vertex'+'Data4;\x20//\x20'+'particle\x20i'+'d\x0a\x0a//\x20type'+'\x20depends\x20o'+'n\x20useMesh\x20'+'property.\x20'+'Start\x20with'+'\x20X\x20=\x20veloc'+'ity.z,\x20Y\x20='+'\x20particle\x20'+'ID\x20and\x20for'+'\x20mesh\x20part'+'icles\x20proc'+'eeds\x20with\x20'+'Z\x20=\x20mesh\x20U'+'V.x,\x20W\x20=\x20m'+'esh\x20UV.y\x0a/'+'/\x20Note:\x20Th'+'is\x20generat'+'es\x20a\x20dupli'+'cate\x20attri'+'bute\x20warni'+'ng,\x20as\x20the'+'\x20scanning\x20'+'we\x20do\x20is\x20v'+'ery\x20simple'+'.\x0a#ifndef\x20'+'USE_MESH\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec2\x20pa'+'rticle_ver'+'texData5;\x0a'+'#else\x0a\x20\x20\x20\x20'+'attribute\x20'+'vec4\x20parti'+'cle_vertex'+'Data5;\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifndef\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20#define\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a#endif\x0a\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20lifetim'+'e;\x0auniform'+'\x20float\x20str'+'etch;\x0aunif'+'orm\x20float\x20'+'seed;\x0aunif'+'orm\x20vec3\x20w'+'rapBounds;'+'\x0auniform\x20v'+'ec3\x20emitte'+'rScale;\x0aun'+('iform\x20vec3'+'\x20faceTange'+'nt;\x0aunifor'+'m\x20vec3\x20fac'+'eBinorm;\x0a\x0a'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex0'+';\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x1;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex2;\x0a#end'+'if\x0auniform'+'\x20vec3\x20emit'+'terPos;\x0a\x0av'+'arying\x20vec'+'4\x20texCoord'+'sAlphaLife'+';\x0a\x0avec2\x20ro'+'tate(vec2\x20'+'quadXY,\x20fl'+'oat\x20pRotat'+'ion,\x20out\x20m'+'at2\x20rotMat'+'rix)\x0a{\x0a\x20\x20\x20'+'\x20float\x20c\x20='+'\x20cos(pRota'+'tion);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20sin(pRota'+'tion);\x0a\x20\x20\x20'+'\x20//vec4\x20ro'+'tationMatr'+'ix\x20=\x20vec4('+'c,\x20-s,\x20s,\x20'+'c);\x0a\x0a\x20\x20\x20\x20m'+'at2\x20m\x20=\x20ma'+'t2(c,\x20-s,\x20'+'s,\x20c);\x0a\x20\x20\x20'+'\x20rotMatrix'+'\x20=\x20m;\x0a\x0a\x20\x20\x20'+'\x20return\x20m\x20'+'*\x20quadXY;\x0a'+'}\x0a\x0avec3\x20bi'+'llboard(ve'+'c3\x20Instanc'+'eCoords,\x20v'+'ec2\x20quadXY'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20return\x20p'+'os;\x0a}\x0a\x0avec'+'3\x20customFa'+'ce(vec3\x20In'+'stanceCoor'+'ds,\x20vec2\x20q'+'uadXY)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20po'+'s\x20=\x20faceTa'+'ngent\x20*\x20qu'+'adXY.x\x20+\x20f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0avoid\x20main'+'(void)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20pa'+'rticlePos\x20'+'=\x20particle'+'_vertexDat'+'a.xyz;\x0a\x20\x20\x20'+'\x20vec3\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20vec3\x20vert'+'Pos\x20=\x20part'+'icle_verte'+'xData3.xyz'+';\x0a\x20\x20\x20\x20vec3'+'\x20inVel\x20=\x20v'+'ec3(partic'+'le_vertexD'+'ata2.w,\x20pa')+('rticle_ver'+'texData3.w'+',\x20particle'+'_vertexDat'+'a5.x);\x0a\x0a\x20\x20'+'\x20\x20float\x20id'+'\x20=\x20floor(p'+'article_ve'+'rtexData4)'+';\x0a\x20\x20\x20\x20floa'+'t\x20rndFacto'+'r\x20=\x20fract('+'sin(id\x20+\x201'+'.0\x20+\x20seed)'+');\x0a\x20\x20\x20\x20vec'+'3\x20rndFacto'+'r3\x20=\x20vec3('+'rndFactor,'+'\x20fract(rnd'+'Factor*10.'+'0),\x20fract('+'rndFactor*'+'100.0));\x0a\x0a'+'#ifdef\x20LOC'+'AL_SPACE\x0a\x20'+'\x20\x20\x20inVel\x20='+'\x20mat3(matr'+'ix_model)\x20'+'*\x20inVel;\x0a#'+'endif\x0a\x20\x20\x20\x20'+'vec2\x20veloc'+'ityV\x20=\x20nor'+'malize((ma'+'t3(matrix_'+'view)\x20*\x20in'+'Vel).xy);\x20'+'//\x20should\x20'+'be\x20removed'+'\x20by\x20compil'+'er\x20if\x20alig'+'n/stretch\x20'+'is\x20not\x20use'+'d\x0a\x0a\x20\x20\x20\x20vec'+'2\x20quadXY\x20='+'\x20vertPos.x'+'y;\x0a\x0a#ifdef'+'\x20USE_MESH\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe\x20=\x20vec4('+'particle_v'+'ertexData5'+'.zw,\x20parti'+'cle_vertex'+'Data2.z,\x20p'+'article_ve'+'rtexData.w'+');\x0a#else\x0a\x20'+'\x20\x20\x20texCoor'+'dsAlphaLif'+'e\x20=\x20vec4(q'+'uadXY\x20*\x20-0'+'.5\x20+\x200.5,\x20'+'particle_v'+'ertexData2'+'.z,\x20partic'+'le_vertexD'+'ata.w);\x0a#e'+'ndif\x0a\x20\x20\x20\x20m'+'at2\x20rotMat'+'rix;\x0a\x0a\x20\x20\x20\x20'+'float\x20inAn'+'gle\x20=\x20part'+'icle_verte'+'xData2.x;\x0a'+'\x20\x20\x20\x20vec3\x20p'+'articlePos'+'Moved\x20=\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20vec3\x20me'+'shLocalPos'+'\x20=\x20particl'+'e_vertexDa'+'ta3.xyz;\x0a'),GR='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20par'+'ticle_vert'+'exData2.y\x20'+'*\x20emitterS'+'cale;\x0a\x20\x20\x20\x20'+'localPos\x20+'+'=\x20particle'+'Pos;\x0a\x0a\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_viewProje'+'ction\x20*\x20ve'+'c4(localPo'+'s,\x201.0);\x0a',HR='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20quadXY'+');\x0a',WR='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(rgb'+',\x20a);\x0a}\x0a',$R='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20sca'+'le\x20*\x20emitt'+'erScale;\x0a\x20'+'\x20\x20\x20localPo'+'s\x20+=\x20parti'+'clePos;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREEN_SPA'+'CE\x0a\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(loca'+'lPos.x,\x20lo'+'calPos.y,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20vec4(lo'+'calPos.xyz'+',\x201.0);\x0a\x20\x20'+'\x20\x20#endif\x0a',XR='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20normal\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20vec3'+'\x20posNormal'+'\x20=\x20-normal'+'\x20*\x200.5\x20+\x200'+'.5;\x0a\x20\x20\x20\x20ne'+'gNormal\x20*='+'\x20negNormal'+';\x0a\x20\x20\x20\x20posN'+'ormal\x20*=\x20p'+'osNormal;\x0a',qR='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20//\x20'+'XYZ\x20=\x20part'+'icle\x20posit'+'ion,\x20W\x20=\x20p'+'article\x20ID'+'\x20+\x20random\x20'+'factor\x0a\x0a#i'+'f\x20defined('+'USE_MESH)\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(USE_'+'MESH_UV)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20att'+'ribute\x20vec'+'2\x20particle'+'_uv;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mesh'+'\x20UV\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20par'+'ticle_uv\x20='+'\x20vec2(0.0,'+'\x200.0);\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20mat4\x20m'+'atrix_view'+'Projection'+';\x0auniform\x20'+'mat4\x20matri'+'x_model;\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20numPart'+'iclesPot;\x0a'+'uniform\x20fl'+'oat\x20graphS'+'ampleSize;'+'\x0auniform\x20f'+'loat\x20graph'+'NumSamples'+';\x0auniform\x20'+'float\x20stre'+'tch;\x0aunifo'+'rm\x20vec3\x20wr'+'apBounds;\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Scale;\x0auni'+'form\x20vec3\x20'+'emitterPos'+';\x0auniform\x20'+'vec3\x20faceT'+'angent;\x0aun'+'iform\x20vec3'+'\x20faceBinor'+'m;\x0auniform'+'\x20float\x20rat'+'e;\x0auniform'+'\x20float\x20rat'+'eDiv;\x0aunif'+'orm\x20float\x20'+'lifetime;\x0a'+'uniform\x20fl'+'oat\x20deltaR'+'andomnessS'+'tatic;\x0auni'+'form\x20float'+'\x20scaleDivM'+'ult;\x0aunifo'+'rm\x20float\x20a'+'lphaDivMul'+'t;\x0auniform'+'\x20float\x20see'+'d;\x0auniform'+'\x20float\x20del'+'ta;\x0aunifor'+'m\x20sampler2'+'D\x20particle'+'TexOUT;\x0aun'+'iform\x20samp'+('ler2D\x20part'+'icleTexIN;'+'\x0a\x0a#ifdef\x20P'+'ARTICLE_GP'+'U\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x0;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex2;\x0a#e'+'ndif\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0avarying\x20'+'vec4\x20texCo'+'ordsAlphaL'+'ife;\x0a\x0avec3'+'\x20inPos;\x0ave'+'c3\x20inVel;\x0a'+'float\x20inAn'+'gle;\x0abool\x20'+'inShow;\x0afl'+'oat\x20inLife'+';\x0a'),jR='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20max(norm'+'al,\x20vec3(0'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20posNo'+'rmal\x20=\x20max'+'(-normal,\x20'+'vec3(0.0))'+';\x0a',YR='\x0a\x20\x20\x20\x20vec3\x20'+'light\x20=\x20ne'+'gNormal.x*'+'lightCube['+'0]\x20+\x20posNo'+'rmal.x*lig'+'htCube[1]\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20negN'+'ormal.y*li'+'ghtCube[2]'+'\x20+\x20posNorm'+'al.y*light'+'Cube[3]\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20negNor'+'mal.z*ligh'+'tCube[4]\x20+'+'\x20posNormal'+'.z*lightCu'+'be[5];\x0a\x0a\x20\x20'+'\x20\x20rgb\x20*=\x20l'+'ight;\x0a',KR='\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20('+'matrix_mod'+'el\x20*\x20vec4('+'particlePo'+'s,\x201.0)).x'+'yz;\x0a',ZR='\x0a\x20\x20\x20\x20vec3\x20'+'localPos\x20='+'\x20meshLocal'+'Pos;\x0a\x20\x20\x20\x20l'+'ocalPos.xy'+'\x20=\x20rotate('+'localPos.x'+'y,\x20inAngle'+',\x20rotMatri'+'x);\x0a\x20\x20\x20\x20lo'+'calPos.yz\x20'+'=\x20rotate(l'+'ocalPos.yz'+',\x20inAngle,'+'\x20rotMatrix'+');\x0a\x0a\x20\x20\x20\x20bi'+'llboard(pa'+'rticlePos,'+'\x20quadXY);\x0a',QR='\x0a\x20\x20\x20\x20Norma'+'l\x20=\x20normal'+'ize(localP'+'os\x20+\x20matri'+'x_viewInve'+'rse[2].xyz'+');\x0a',JR='\x0a\x20\x20\x20\x20vec3\x20'+'normalMap\x20'+'=\x20normaliz'+'e(texture2'+'D(normalMa'+'p,\x20vec2(te'+'xCoordsAlp'+'haLife.x,\x20'+'1.0\x20-\x20texC'+'oordsAlpha'+'Life.y)).x'+'yz\x20*\x202.0\x20-'+'\x201.0);\x0a\x20\x20\x20'+'\x20vec3\x20norm'+'al\x20=\x20Parti'+'cleMat\x20*\x20n'+'ormalMap;\x0a',e3='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan(veloci'+'tyV.x,\x20vel'+'ocityV.y);'+'\x0a\x0a',t3='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',s3='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vec3\x20No'+'rmal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20lightCu'+'be[6];\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20float\x20vDe'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fogP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'f\x20NORMAL\x20='+'=\x20MAP\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20normalMa'+'p;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22p'+'articlePS\x22'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_softP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20normal\x20'+'=\x20Normal;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalMap'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20HALF_L'+'AMBERT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_ha'+'lflambertP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_la'+'mbertPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_lighting'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20BLEND\x20'+'==\x20NORMAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndNormalPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+('\x20ADDITIVE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndAddPS\x22\x0a\x20'+'\x20\x20\x20#elif\x20B'+'LEND\x20==\x20MU'+'LTIPLICATI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendMulti'+'plyPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endPS\x22\x0a'),i3='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20animTexTi'+'lesParams;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20animTexP'+'arams;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec2\x20an'+'imTexIndex'+'Params;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20NO'+'RMAL\x20==\x20MA'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec3\x20Normal'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20SOFT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'rying\x20floa'+'t\x20vDepth;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_initVS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PA'+'CK8\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleInputR'+'gba8PS\x22\x20\x20\x20'+'\x20\x20//\x20why\x20a'+'re\x20these\x20P'+'S\x20and\x20not\x20'+'VS?\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x20'+'\x22particleI'+'nputFloatP'+'S\x22\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'OFT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22scre'+'enDepthPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleVS\x22\x0a\x0a\x20\x20'+'\x20\x20#else\x20//'+'\x20PARTICLE_'+'CPU\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22scr'+'eenDepthPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_cpuVS'+'\x22\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_local'+'ShiftVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20ANIMT'+'EX_LOOP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('#include\x20\x22'+'particleAn'+'imFrameLoo'+'pVS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particleA'+'nimFrameCl'+'ampVS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleAn'+'imTexVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20wr'+'ap\x20is\x20not\x20'+'used\x20on\x20CP'+'U,\x20it\x20was\x20'+'commented\x20'+'out.\x20TODO:'+'\x20investiga'+'te\x20why\x0a\x20\x20\x20'+'\x20#ifdef\x20PA'+'RTICLE_GPU'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20WRAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_wrapVS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20AL'+'IGN_TO_MOT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_pointAlon'+'gVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20US'+'E_MESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_meshVS'+'\x22\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20CUS'+'TOM_FACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'customFace'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_b'+'illboardVS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalVS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_TBNVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STRETCH\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_str'+'etchVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endVS\x22\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20PARTICLE'+'_CPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_cpu_endV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#')+('ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_so'+'ftVS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20}\x0a'),r3='\x0a\x20\x20\x20\x20float'+'\x20depth\x20=\x20g'+'etLinearSc'+'reenDepth('+');\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eDepth\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20float\x20dep'+'thDiff\x20=\x20s'+'aturate(ab'+'s(particle'+'Depth\x20-\x20de'+'pth)\x20*\x20sof'+'tening);\x0a\x20'+'\x20\x20\x20a\x20*=\x20de'+'pthDiff;\x0a',a3='\x0a\x20\x20\x20\x20vDept'+'h\x20=\x20getLin'+'earDepth(l'+'ocalPos);\x0a',n3='\x0a\x20\x20\x20\x20vec3\x20'+'moveDir\x20=\x20'+'inVel\x20*\x20st'+'retch;\x0a\x20\x20\x20'+'\x20vec3\x20posP'+'rev\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20+=\x20partic'+'lePosMoved'+';\x0a\x0a\x20\x20\x20\x20vec'+'2\x20centerTo'+'VertexV\x20=\x20'+'normalize('+'(mat3(matr'+'ix_view)\x20*'+'\x20localPos)'+'.xy);\x0a\x0a\x20\x20\x20'+'\x20float\x20int'+'erpolation'+'\x20=\x20dot(-ve'+'locityV,\x20c'+'enterToVer'+'texV)\x20*\x200.'+'5\x20+\x200.5;\x0a\x0a'+'\x20\x20\x20\x20partic'+'lePos\x20=\x20mi'+'x(particle'+'Pos,\x20posPr'+'ev,\x20interp'+'olation);\x0a',o3='\x0a\x20\x20\x20\x20mat3\x20'+'rot3\x20=\x20mat'+'3(rotMatri'+'x[0][0],\x20r'+'otMatrix[0'+'][1],\x200.0,'+'\x20rotMatrix'+'[1][0],\x20ro'+'tMatrix[1]'+'[1],\x200.0,\x20'+'0.0,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'ParticleMa'+'t\x20=\x20mat3(-'+'matrix_vie'+'wInverse[0'+'].xyz,\x20-ma'+'trix_viewI'+'nverse[1].'+'xyz,\x20matri'+'x_viewInve'+'rse[2].xyz'+')\x20*\x20rot3;\x0a',l3='\x0a\x20\x20\x20\x20vec3\x20'+'origPartic'+'lePos\x20=\x20pa'+'rticlePos;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20-=\x20'+'matrix_mod'+'el[3].xyz;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20m'+'od(particl'+'ePos,\x20wrap'+'Bounds)\x20-\x20'+'wrapBounds'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20+=\x20mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'PosMoved\x20='+'\x20particleP'+'os\x20-\x20origP'+'articlePos'+';\x0a',c3={'particlePS':vR,'particleVS':xR,'particleAnimFrameClampVS':TR,'particleAnimFrameLoopVS':wR,'particleAnimTexVS':ER,'particleInputFloatPS':bR,'particleInputRgba8PS':AR,'particleOutputFloatPS':CR,'particleOutputRgba8PS':PR,'particleUpdaterAABBPS':MR,'particleUpdaterEndPS':DR,'particleUpdaterInitPS':IR,'particleUpdaterNoRespawnPS':LR,'particleUpdaterOnStopPS':RR,'particleUpdaterRespawnPS':OR,'particleUpdaterSpherePS':FR,'particleUpdaterStartPS':NR,'particle_billboardVS':kR,'particle_blendAddPS':UR,'particle_blendMultiplyPS':BR,'particle_blendNormalPS':zR,'particle_cpuVS':VR,'particle_cpu_endVS':GR,'particle_customFaceVS':HR,'particle_endPS':WR,'particle_endVS':$R,'particle_halflambertPS':XR,'particle_initVS':qR,'particle_lambertPS':jR,'particle_lightingPS':YR,'particle_localShiftVS':KR,'particle_meshVS':ZR,'particle_normalVS':QR,'particle_normalMapPS':JR,'particle_pointAlongVS':e3,'particle_simulationPS':t3,'particle_shaderPS':s3,'particle_shaderVS':i3,'particle_softPS':r3,'particle_softVS':a3,'particle_stretchVS':n3,'particle_TBNVS':o3,'particle_wrapVS':l3},h3='\x0avarying\x20t'+'exCoordsAl'+'phaLife:\x20v'+'ec4f;\x0a\x0avar'+'\x20colorMap:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20colorMap'+'Sampler:\x20s'+'ampler;\x0ava'+'r\x20colorPar'+'am:\x20textur'+'e_2d<f32>;'+'\x0avar\x20color'+'ParamSampl'+'er:\x20sample'+'r;\x0a\x0aunifor'+'m\x20graphSam'+'pleSize:\x20f'+'32;\x0aunifor'+'m\x20graphNum'+'Samples:\x20f'+'32;\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0auniform'+'\x20softening'+':\x20f32;\x0auni'+'form\x20color'+'Mult:\x20f32;'+'\x0a\x0afn\x20satur'+'ate(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(x,'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20tex:\x20v'+'ec4f\x20\x20=\x20te'+'xtureSampl'+'e(colorMap'+',\x20colorMap'+'Sampler,\x20v'+'ec2f(input'+'.texCoords'+'AlphaLife.'+'x,\x201.0\x20-\x20i'+'nput.texCo'+'ordsAlphaL'+'ife.y));\x0a\x20'+'\x20\x20\x20var\x20ram'+'p:\x20vec4f\x20='+'\x20textureSa'+'mple(color'+'Param,\x20col'+'orParamSam'+'pler,\x20vec2'+'f(input.te'+'xCoordsAlp'+'haLife.w,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20ramp\x20=\x20ve'+'c4f(ramp.r'+'gb\x20*\x20unifo'+'rm.colorMu'+'lt,\x20ramp.a'+');\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20=\x20ram'+'p.a\x20+\x20inpu'+'t.texCoord'+'sAlphaLife'+'.z;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20rgb:\x20ve'+'c3f\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'var\x20a:\x20f32'+'\x20=\x20tex.a\x20*'+'\x20ramp.a;\x0a',d3='\x0afn\x20unpack'+'3NFloats(s'+'rc:\x20f32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20r\x20'+'=\x20fract(sr'+'c);\x0a\x20\x20\x20\x20le'+'t\x20g\x20=\x20frac'+'t(src\x20*\x2025'+'6.0);\x0a\x20\x20\x20\x20'+'let\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3f(r,\x20'+'g,\x20b);\x0a}\x0a\x0a'+'fn\x20saturat'+'e(x:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0astruct\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20resu'+'lt:\x20vec4f,'+'\x0a\x20\x20\x20\x20unpac'+'ked:\x20vec3f'+'\x0a}\x0a\x0afn\x20tex'+'1Dlod_lerp'+'_simple(te'+'x:\x20texture'+'_2d<f32>,\x20'+'texSampler'+':\x20sampler,'+'\x20tc:\x20vec2f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20tc_next\x20='+'\x20tc\x20+\x20vec2'+'f(uniform.'+'graphSampl'+'eSize);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(\x20textur'+'eSample(te'+'x,\x20texSamp'+'ler,\x20tc),\x20'+'textureSam'+'ple(tex,\x20t'+'exSampler,'+'\x20tc_next),'+'\x20fract(tc.'+'x\x20*\x20unifor'+'m.graphNum'+'Samples)\x20)'+';\x0a}\x0a\x0afn\x20te'+'x1Dlod_ler'+'p_unpack(t'+'ex:\x20textur'+'e_2d<f32>,'+'\x20texSample'+'r:\x20sampler'+',\x20tc:\x20vec2'+'f)\x20->\x20TexL'+'erpUnpackR'+'esult\x20{\x0a\x20\x20'+'\x20\x20let\x20tc_n'+'ext\x20=\x20tc\x20+'+'\x20vec2f(uni'+'form.graph'+'SampleSize'+');\x0a\x20\x20\x20\x20let'+'\x20a\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20tc,\x200.0);'+'\x0a\x20\x20\x20\x20let\x20b'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'c_next,\x200.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20u'+'niform.gra'+'phNumSampl'+'es);\x0a\x20\x20\x20\x20l'+'et\x20unpacke'+'dA\x20=\x20unpac'+'k3NFloats('+'a.w);\x0a\x20\x20\x20\x20'+'let\x20unpack'+'edB\x20=\x20unpa'+'ck3NFloats'+'(b.w);\x0a\x20\x20\x20'+'\x20let\x20w_out'+('\x20=\x20mix(unp'+'ackedA,\x20un'+'packedB,\x20c'+');\x0a\x20\x20\x20\x20ret'+'urn\x20TexLer'+'pUnpackRes'+'ult(mix(a,'+'\x20b,\x20c),\x20w_'+'out);\x0a}\x0a\x0as'+'truct\x20Rota'+'teResult\x20{'+'\x0a\x20\x20\x20\x20rotat'+'edVec:\x20vec'+'2f,\x0a\x20\x20\x20\x20ma'+'trix:\x20mat2'+'x2f\x0a}\x0a\x0afn\x20'+'rotateWith'+'Matrix(qua'+'dXY:\x20vec2f'+',\x20pRotatio'+'n:\x20f32)\x20->'+'\x20RotateRes'+'ult\x20{\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20co'+'s(pRotatio'+'n);\x0a\x20\x20\x20\x20le'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x20\x20\x20\x20let\x20'+'m\x20=\x20mat2x2'+'f(vec2f(c,'+'\x20s),\x20vec2f'+'(-s,\x20c));\x0a'+'\x20\x20\x20\x20return'+'\x20RotateRes'+'ult(m\x20*\x20qu'+'adXY,\x20m);\x0a'+'}\x0a\x0afn\x20bill'+'board(Inst'+'anceCoords'+':\x20vec3f,\x20q'+'uadXY:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20pos:\x20ve'+'c3f;\x0a\x20\x20\x20\x20#'+'ifdef\x20SCRE'+'EN_SPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pos'+'\x20=\x20vec3f(-'+'1.0,\x200.0,\x20'+'0.0)\x20*\x20qua'+'dXY.x\x20+\x20ve'+'c3f(0.0,\x20-'+'1.0,\x200.0)\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20custom'+'Face(Insta'+'nceCoords:'+'\x20vec3f,\x20qu'+'adXY:\x20vec2'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20pos\x20=\x20un'+'iform.face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20uniform.f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20safeNo'+'rmalize(v:'+'\x20vec2f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20let\x20l\x20='+'\x20length(v)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20select('+'v,\x20v\x20/\x20l,\x20'+'l\x20>\x201e-06)'+';\x0a}\x0a\x0a@vert'+'ex\x0afn\x20vert'+'exMain(inp')+('ut:\x20Vertex'+'Input)\x20->\x20'+'VertexOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20meshLo'+'calPos_in\x20'+'=\x20input.pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20id\x20=\x20floo'+'r(input.pa'+'rticle_ver'+'texData.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20rndFactor'+'\x20=\x20fract(s'+'in(id\x20+\x201.'+'0\x20+\x20unifor'+'m.seed));\x0a'+'\x20\x20\x20\x20let\x20rn'+'dFactor3\x20='+'\x20vec3f(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20let\x20uv\x20=\x20'+'id\x20/\x20unifo'+'rm.numPart'+'iclesPot;\x0a'+'\x20\x20\x20\x20readIn'+'put(uv);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20model'+'Rotation\x20='+'\x20mat3x3f(u'+'niform.mat'+'rix_model['+'0].xyz,\x20un'+'iform.matr'+'ix_model[1'+'].xyz,\x20uni'+'form.matri'+'x_model[2]'+'.xyz);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20inVel'+'\x20=\x20modelRo'+'tation\x20*\x20i'+'nVel;\x0a\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20let\x20viewR'+'otation\x20=\x20'+'mat3x3f(un'+'iform.matr'+'ix_view[0]'+'.xyz,\x20unif'+'orm.matrix'+'_view[1].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[2].xyz'+');\x0a\x20\x20\x20\x20let'+'\x20velocityV'+'\x20=\x20safeNor'+'malize((vi'+'ewRotation'+'\x20*\x20inVel).'+'xy);\x0a\x0a\x20\x20\x20\x20'+'let\x20partic'+'leLifetime'+'\x20=\x20uniform'+'.lifetime;'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'meshLocalP'+'os\x20=\x20meshL'+'ocalPos_in'+';\x0a\x20\x20\x20\x20if\x20('+'inLife\x20<=\x20'+'0.0\x20||\x20inL'+'ife\x20>\x20part'+'icleLifeti'+'me\x20||\x20!inS'+'how)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mesh'+'LocalPos\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20let\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20let'+'\x20nlife\x20=\x20c')+('lamp(inLif'+'e\x20/\x20partic'+'leLifetime'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20lerp_res'+'ult\x20=\x20tex1'+'Dlod_lerp_'+'unpack(int'+'ernalTex2,'+'\x20internalT'+'ex2Sampler'+',\x20vec2f(nl'+'ife,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'params\x20=\x20l'+'erp_result'+'.result;\x0a\x20'+'\x20\x20\x20let\x20par'+'amDiv\x20=\x20le'+'rp_result.'+'unpacked;\x0a'+'\x0a\x20\x20\x20\x20var\x20s'+'cale\x20=\x20par'+'ams.y;\x0a\x20\x20\x20'+'\x20let\x20scale'+'Div\x20=\x20para'+'mDiv.x;\x0a\x20\x20'+'\x20\x20let\x20alph'+'aDiv\x20=\x20par'+'amDiv.z;\x0a\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20scale\x20+\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20unifo'+'rm.scaleDi'+'vMult\x20*\x20fr'+'act(rndFac'+'tor*10000.'+'0);\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20USE'+'_MESH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.texCoords'+'AlphaLife\x20'+'=\x20vec4f(qu'+'adXY\x20*\x20-0.'+'5\x20+\x200.5,\x20('+'alphaDiv\x20*'+'\x202.0\x20-\x201.0'+')\x20*\x20unifor'+'m.alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife\x20=\x20vec4'+'f(particle'+'_uv,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'uniform.al'+'phaDivMult'+'\x20*\x20fract(r'+'ndFactor*1'+'000.0),\x20nl'+'ife);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20var\x20part'+'iclePos\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20var\x20parti'+'clePosMove'+'d\x20=\x20vec3f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20var\x20rotMa'+'trix:\x20mat2'+'x2f;\x0a'),f3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20min('+'floor(inpu'+'t.texCoord'+'sAlphaLife'+'.w\x20*\x20unifo'+'rm.animTex'+'Params.y)\x20'+'+\x20uniform.'+'animTexPar'+'ams.x,\x20uni'+'form.animT'+'exParams.z'+');\x0a',u3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20floo'+'r((output.'+'texCoordsA'+'lphaLife.w'+'\x20*\x20uniform'+'.animTexPa'+'rams.y\x20+\x20u'+'niform.ani'+'mTexParams'+'.x)\x20%\x20(uni'+'form.animT'+'exParams.z'+'\x20+\x201.0));\x20'+'\x20\x20\x20\x0a',p3='\x0a\x20\x20\x20\x20var\x20a'+'nimationIn'+'dex:\x20f32;\x0a'+'\x0a\x20\x20\x20\x20if\x20(u'+'niform.ani'+'mTexIndexP'+'arams.y\x20=='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20floor(('+'uniform.an'+'imTexParam'+'s.w\x20+\x201.0)'+'\x20*\x20rndFact'+'or3.z)\x20*\x20('+'uniform.an'+'imTexParam'+'s.z\x20+\x201.0)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20animati'+'onIndex\x20=\x20'+'uniform.an'+'imTexIndex'+'Params.x\x20*'+'\x20(uniform.'+'animTexPar'+'ams.z\x20+\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20var\x20a'+'tlasX:\x20f32'+'\x20=\x20(animat'+'ionIndex\x20+'+'\x20animFrame'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20atlasY:\x20'+'f32\x20=\x201.0\x20'+'-\x20floor(at'+'lasX\x20+\x201.0'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.y;\x0a\x20\x20\x20\x20at'+'lasX\x20=\x20fra'+'ct(atlasX)'+';\x20//\x20Reass'+'ign\x20atlasX'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'current_tc'+'al_xy\x20=\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.xy;\x0a\x20\x20'+'\x20\x20let\x20scal'+'ed_tcal_xy'+'\x20=\x20current'+'_tcal_xy\x20*'+'\x20uniform.a'+'nimTexTile'+'sParams.xy'+';\x0a\x20\x20\x20\x20let\x20'+'final_tcal'+'_xy\x20=\x20scal'+'ed_tcal_xy'+'\x20+\x20vec2f(a'+'tlasX,\x20atl'+'asY);\x0a\x20\x20\x20\x20'+'output.tex'+'CoordsAlph'+'aLife\x20=\x20ve'+'c4f(final_'+'tcal_xy,\x20o'+'utput.texC'+'oordsAlpha'+'Life.z,\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.w);\x0a',m3='\x0afn\x20readIn'+'put(uv:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex:\x20ve'+'c4f\x20=\x20text'+'ureSampleL'+'evel(parti'+'cleTexIN,\x20'+'particleTe'+'xINSampler'+',\x20vec2f(uv'+',\x200.25),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex2:\x20v'+'ec4f\x20=\x20tex'+'tureSample'+'Level(part'+'icleTexIN,'+'\x20particleT'+'exINSample'+'r,\x20vec2f(u'+'v,\x200.75),\x20'+'0.0);\x0a\x0a\x20\x20\x20'+'\x20inPos\x20=\x20t'+'ex.xyz;\x0a\x20\x20'+'\x20\x20inVel\x20=\x20'+'tex2.xyz;\x0a'+'\x20\x20\x20\x20inAngl'+'e\x20=\x20abs(te'+'x.w)\x20-\x20100'+'0.0;\x0a\x20\x20\x20\x20i'+'nShow\x20=\x20te'+'x.w\x20>=\x200.0'+';\x0a\x20\x20\x20\x20inLi'+'fe\x20=\x20tex2.'+'w;\x0a}\x0a',_3='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0ac'+'onst\x20PI2:\x20'+'f32\x20=\x206.28'+'3185307179'+'586;\x0a\x0aunif'+'orm\x20inBoun'+'dsSize:\x20ve'+'c3f;\x0aunifo'+'rm\x20inBound'+'sCenter:\x20v'+'ec3f;\x0a\x0auni'+'form\x20maxVe'+'l:\x20f32;\x0a\x0af'+'n\x20decodeFl'+'oatRG(rg:\x20'+'vec2f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20rg.'+'y\x20*\x20(1.0\x20/'+'\x20255.0)\x20+\x20'+'rg.x;\x0a}\x0a\x0af'+'n\x20decodeFl'+'oatRGBA(\x20r'+'gba:\x20vec4f'+'\x20)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20dot(rgb'+'a,\x20vec4f(1'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x2065025.0'+',\x201.0\x20/\x2016'+'0581375.0)'+');\x0a}\x0a\x0afn\x20r'+'eadInput(u'+'v:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20let\x20te'+'x0\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.125),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex1\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.37'+'5),\x200.0);\x0a'+'\x20\x20\x20\x20let\x20te'+'x2\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.625),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex3\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.87'+'5),\x200.0);\x0a'+'\x0a\x20\x20\x20\x20inPos'+'\x20=\x20vec3f(d'+'ecodeFloat'+'RG(tex0.rg'+'),\x20decodeF'+'loatRG(tex'+'0.ba),\x20dec'+'odeFloatRG'+'(tex1.rg))'+';\x0a\x20\x20\x20\x20inPo'+'s\x20=\x20(inPos'+'\x20-\x20vec3f(0'+'.5))\x20*\x20uni'+'form.inBou'+'ndsSize\x20+\x20'+'uniform.in'+'BoundsCent'+'er;\x0a\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inVel\x20=\x20('+('inVel\x20-\x20ve'+'c3f(0.5))\x20'+'*\x20uniform.'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20let\x20l'+'ife_decode'+'d\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20let\x20maxNe'+'gLife\x20=\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20(uniform.'+'rate\x20+\x20uni'+'form.rateD'+'iv));\x0a\x20\x20\x20\x20'+'let\x20maxPos'+'Life\x20=\x20uni'+'form.lifet'+'ime\x20+\x201.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20life_d'+'ecoded\x20*\x20('+'maxNegLife'+'\x20+\x20maxPosL'+'ife)\x20-\x20max'+'NegLife;\x0a}'),g3='\x0afn\x20getOut'+'put()\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20if\x20(pcPos'+'ition.y\x20<\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4f(ou'+'tPos,\x20(out'+'Angle\x20+\x2010'+'00.0)\x20*\x20vi'+'sMode);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(outVel,\x20'+'outLife);\x0a'+'\x20\x20\x20\x20}\x0a}\x0a',S3='\x0auniform\x20o'+'utBoundsMu'+'l:\x20vec3f;\x0a'+'uniform\x20ou'+'tBoundsAdd'+':\x20vec3f;\x0a\x0a'+'fn\x20encodeF'+'loatRG(\x20v:'+'\x20f32\x20)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20var\x20enc:'+'\x20vec2f\x20=\x20v'+'ec2f(1.0,\x20'+'255.0)\x20*\x20v'+';\x0a\x20\x20\x20\x20enc\x20'+'=\x20fract(en'+'c);\x0a\x20\x20\x20\x20en'+'c\x20=\x20enc\x20-\x20'+'enc.yy\x20*\x20('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20enc;\x0a'+'}\x0a\x0afn\x20enco'+'deFloatRGB'+'A(\x20v:\x20f32\x20'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20factors\x20='+'\x20vec4f(1.0'+',\x20255.0,\x206'+'5025.0,\x2016'+'0581375.0)'+';\x0a\x20\x20\x20\x20var\x20'+'enc:\x20vec4f'+'\x20=\x20factors'+'\x20*\x20v;\x0a\x20\x20\x20\x20'+'enc\x20=\x20frac'+'t(enc);\x0a\x20\x20'+'\x20\x20enc\x20=\x20en'+'c\x20-\x20enc.yz'+'ww\x20*\x20vec4f'+'(1.0\x20/\x20255'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x20255.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'return\x20enc'+';\x0a}\x0a\x0afn\x20ge'+'tOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20outPo'+'s\x20=\x20outPos'+'\x20*\x20uniform'+'.outBounds'+'Mul\x20+\x20unif'+'orm.outBou'+'ndsAdd;\x0a\x20\x20'+'\x20\x20outAngle'+'\x20=\x20fract(o'+'utAngle\x20/\x20'+'PI2);\x0a\x0a\x20\x20\x20'+'\x20outVel\x20=\x20'+'(outVel\x20/\x20'+'uniform.ma'+'xVel)\x20+\x20ve'+'c3f(0.5);\x20'+'//\x20TODO:\x20m'+'ul\x0a\x0a\x20\x20\x20\x20le'+'t\x20maxNegLi'+'fe\x20=\x20max(u'+'niform.lif'+'etime,\x20(un'+'iform.numP'+'articles\x20-'+'\x201.0)\x20*\x20(u'+'niform.rat'+'e\x20+\x20unifor'+'m.rateDiv)'+');\x0a\x20\x20\x20\x20let'+'\x20maxPosLif'+'e\x20=\x20unifor'+'m.lifetime'+'\x20+\x201.0;\x0a\x20\x20'+'\x20\x20outLife\x20'+'=\x20(outLife'+'\x20+\x20maxNegL'+'ife)\x20/\x20(ma'+'xNegLife\x20+'+'\x20maxPosLif'+'e);\x0a\x0a\x20\x20\x20\x20i'+'f\x20(pcPosit'+'ion.y\x20<\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'vec4f(enco'+'deFloatRG('+'outPos.x),'+'\x20encodeFlo'+'atRG(outPo'+'s.y));\x0a\x20\x20\x20'+('\x20}\x20else\x20if'+'\x20(pcPositi'+'on.y\x20<\x202.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(encod'+'eFloatRG(o'+'utPos.z),\x20'+'encodeFloa'+'tRG(outAng'+'le));\x0a\x20\x20\x20\x20'+'}\x20else\x20if\x20'+'(pcPositio'+'n.y\x20<\x203.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(outVel'+',\x20visMode\x20'+'*\x200.5\x20+\x200.'+'5);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20encodeFl'+'oatRGBA(ou'+'tLife);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),y3='\x0auniform\x20s'+'pawnBounds'+':\x20mat3x3f;'+'\x0auniform\x20s'+'pawnPosInn'+'erRatio:\x20v'+'ec3f;\x0a\x0afn\x20'+'calcSpawnP'+'osition(in'+'Bounds:\x20ve'+'c3f,\x20rndFa'+'ctor:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'pos\x20=\x20inBo'+'unds\x20-\x20vec'+'3f(0.5);\x0a\x0a'+'\x20\x20\x20\x20let\x20po'+'sAbs\x20=\x20abs'+'(pos);\x0a\x20\x20\x20'+'\x20let\x20maxCo'+'mp\x20=\x20max(p'+'osAbs.x,\x20m'+'ax(posAbs.'+'y,\x20posAbs.'+'z));\x0a\x20\x20\x20\x20l'+'et\x20maxPos\x20'+'=\x20vec3f(ma'+'xComp);\x0a\x0a\x20'+'\x20\x20\x20let\x20edg'+'e\x20=\x20maxPos'+'\x20+\x20(vec3f('+'0.5)\x20-\x20max'+'Pos)\x20*\x20uni'+'form.spawn'+'PosInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'pos.x\x20=\x20ed'+'ge.x\x20*\x20sel'+'ect(2.0\x20*\x20'+'pos.x,\x20sig'+'n(pos.x),\x20'+'maxPos.x\x20='+'=\x20posAbs.x'+');\x0a\x20\x20\x20\x20pos'+'.y\x20=\x20edge.'+'y\x20*\x20select'+'(2.0\x20*\x20pos'+'.y,\x20sign(p'+'os.y),\x20max'+'Pos.y\x20==\x20p'+'osAbs.y);\x0a'+'\x20\x20\x20\x20pos.z\x20'+'=\x20edge.z\x20*'+'\x20select(2.'+'0\x20*\x20pos.z,'+'\x20sign(pos.'+'z),\x20maxPos'+'.z\x20==\x20posA'+'bs.z);\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20uni'+'form.emitt'+'erPos\x20+\x20un'+'iform.spaw'+'nBounds\x20*\x20'+'pos;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uniform.sp'+'awnBounds\x20'+'*\x20pos;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20*localV'+'elocity\x20=\x20'+'*localVelo'+'city\x20-\x20vec'+'3f(0.0,\x200.'+'0,\x20uniform'+'.initialVe'+'locity);\x0a}'+'\x0a',v3='\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'getOutput('+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',x3='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20par'+'ticleTexIN'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20particl'+'eTexINSamp'+'ler:\x20sampl'+'er;\x0avar\x20in'+'ternalTex0'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0avar\x20int'+'ernalTex1:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20internal'+'Tex1Sample'+'r:\x20sampler'+';\x0avar\x20inte'+'rnalTex2:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20internalT'+'ex2Sampler'+':\x20sampler;'+'\x0avar\x20inter'+'nalTex3:\x20t'+'exture_2d<'+'f32>;\x0avar\x20'+'internalTe'+'x3Sampler:'+'\x20sampler;\x0a'+'\x0auniform\x20e'+'mitterMatr'+'ix:\x20mat3x3'+'f;\x0auniform'+'\x20emitterMa'+'trixInv:\x20m'+'at3x3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0a\x0aun'+'iform\x20emit'+'terPos:\x20ve'+'c3f;\x0aunifo'+'rm\x20frameRa'+'ndom:\x20vec3'+'f;\x0auniform'+'\x20localVelo'+'cityDivMul'+'t:\x20vec3f;\x0a'+'uniform\x20ve'+'locityDivM'+'ult:\x20vec3f'+';\x0auniform\x20'+'delta:\x20f32'+';\x0auniform\x20'+'rate:\x20f32;'+'\x0auniform\x20r'+'ateDiv:\x20f3'+'2;\x0auniform'+'\x20lifetime:'+'\x20f32;\x0aunif'+'orm\x20numPar'+'ticles:\x20f3'+'2;\x0auniform'+'\x20rotSpeedD'+'ivMult:\x20f3'+'2;\x0auniform'+'\x20radialSpe'+'edDivMult:'+'\x20f32;\x0aunif'+'orm\x20seed:\x20'+'f32;\x0aunifo'+'rm\x20startAn'+'gle:\x20f32;\x0a'+'uniform\x20st'+'artAngle2:'+'\x20f32;\x0aunif'+'orm\x20initia'+'lVelocity:'+'\x20f32;\x0a\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0a\x0ava'+'r<private>'+'\x20inPos:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20in'+'Vel:\x20vec3f'+';\x0avar<priv'+'ate>\x20inAng'+('le:\x20f32;\x0av'+'ar<private'+'>\x20inShow:\x20'+'bool;\x0avar<'+'private>\x20i'+'nLife:\x20f32'+';\x0avar<priv'+'ate>\x20visMo'+'de:\x20f32;\x0a\x0a'+'var<privat'+'e>\x20outPos:'+'\x20vec3f;\x0ava'+'r<private>'+'\x20outVel:\x20v'+'ec3f;\x0avar<'+'private>\x20o'+'utAngle:\x20f'+'32;\x0avar<pr'+'ivate>\x20out'+'Show:\x20bool'+';\x0avar<priv'+'ate>\x20outLi'+'fe:\x20f32;\x0a'),T3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tLife\x20=\x20ou'+'tLife\x20-\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20particleR'+'ate);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20visMod'+'e\x20=\x20-1.0;\x0a'+'\x20\x20\x20\x20}\x0a',w3='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20selec'+'t(visMode,'+'\x20-1.0,\x20out'+'Life\x20<\x200.0'+');\x0a',E3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20subtract'+'Amount\x20=\x20m'+'ax(uniform'+'.lifetime,'+'\x20(uniform.'+'numParticl'+'es\x20-\x201.0)\x20'+'*\x20particle'+'Rate);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outLi'+'fe\x20=\x20outLi'+'fe\x20-\x20subtr'+'actAmount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'isMode\x20=\x201'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20visMod'+'e\x20=\x20select'+'(visMode,\x20'+'1.0,\x20outLi'+'fe\x20<\x200.0);'+'\x0a',b3='\x0auniform\x20s'+'pawnBounds'+'Sphere:\x20f3'+'2;\x0auniform'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio:\x20'+'f32;\x0a\x0afn\x20c'+'alcSpawnPo'+'sition(inB'+'ounds:\x20vec'+'3f,\x20rndFac'+'tor:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'nd4:\x20f32\x20='+'\x20fract(rnd'+'Factor\x20*\x201'+'000.0);\x0a\x20\x20'+'\x20\x20let\x20norm'+':\x20vec3f\x20=\x20'+'normalize('+'inBounds.x'+'yz\x20-\x20vec3f'+'(0.5));\x0a\x20\x20'+'\x20\x20let\x20r:\x20f'+'32\x20=\x20rnd4\x20'+'*\x20(1.0\x20-\x20u'+'niform.spa'+'wnBoundsSp'+'hereInnerR'+'atio)\x20+\x20un'+'iform.spaw'+'nBoundsSph'+'ereInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20unifo'+'rm.emitter'+'Pos\x20+\x20norm'+'\x20*\x20r\x20*\x20uni'+'form.spawn'+'BoundsSphe'+'re;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20n'+'orm\x20*\x20r\x20*\x20'+'uniform.sp'+'awnBoundsS'+'phere;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20ini'+'tialVelOff'+'set:\x20vec3f'+'\x20=\x20normali'+'ze(inBound'+'s\x20-\x20vec3f('+'0.5))\x20*\x20un'+'iform.init'+'ialVelocit'+'y;\x0a\x20\x20\x20\x20*lo'+'calVelocit'+'y\x20=\x20*local'+'Velocity\x20+'+'\x20initialVe'+'lOffset;\x0a}'+'\x0a',A3='\x0afn\x20satura'+'te(x:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(x,\x20'+'0.0,\x201.0);'+'\x0a}\x0a\x0afn\x20unp'+'ack3NFloat'+'s(src:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20r\x20=\x20fract'+'(src);\x0a\x20\x20\x20'+'\x20let\x20g\x20=\x20f'+'ract(src\x20*'+'\x20256.0);\x0a\x20'+'\x20\x20\x20let\x20b\x20='+'\x20fract(src'+'\x20*\x2065536.0'+');\x0a\x20\x20\x20\x20ret'+'urn\x20vec3f('+'r,\x20g,\x20b);\x0a'+'}\x0a\x0a//\x20Stru'+'ct\x20to\x20hand'+'le\x20multipl'+'e\x20return\x20v'+'alues\x20from'+'\x20tex1Dlod_'+'lerp\x0astruc'+'t\x20TexLerpU'+'npackResul'+'t\x20{\x0a\x20\x20\x20\x20re'+'sult:\x20vec3'+'f,\x0a\x20\x20\x20\x20unp'+'acked:\x20vec'+'3f\x0a}\x0a\x0afn\x20t'+'ex1Dlod_le'+'rp(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20tc:\x20'+'vec2f)\x20->\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'tc_next\x20=\x20'+'tc\x20+\x20vec2f'+'(uniform.g'+'raphSample'+'Size);\x0a\x20\x20\x20'+'\x20let\x20a\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20tc,\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20tc_next'+',\x200.0);\x0a\x20\x20'+'\x20\x20let\x20c\x20=\x20'+'fract(tc.x'+'\x20*\x20uniform'+'.graphNumS'+'amples);\x0a\x0a'+'\x20\x20\x20\x20let\x20un'+'packedA\x20=\x20'+'unpack3NFl'+'oats(a.w);'+'\x0a\x20\x20\x20\x20let\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20let\x20'+'w_out\x20=\x20mi'+'x(unpacked'+'A,\x20unpacke'+'dB,\x20c);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'TexLerpUnp'+'ackResult('+'mix(a.xyz,'+'\x20b.xyz,\x20c)'+',\x20w_out);\x0a'+'}\x0a\x0aconst\x20H'+'ASHSCALE4:'+'\x20vec4f\x20=\x20v'+'ec4f(1031.'+'0,\x200.1030,'+'\x200.0973,\x200'+'.1099);\x0afn'+'\x20hash41(p:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20var\x20p4\x20=\x20'+'fract(vec4'+'f(p)\x20*\x20HAS'+('HSCALE4);\x0a'+'\x20\x20\x20\x20p4\x20=\x20p'+'4\x20+\x20dot(p4'+',\x20p4.wzxy\x20'+'+\x2019.19);\x0a'+'\x20\x20\x20\x20return'+'\x20fract(vec'+'4f((p4.x\x20+'+'\x20p4.y)*p4.'+'z,\x20(p4.x\x20+'+'\x20p4.z)*p4.'+'y,\x20(p4.y\x20+'+'\x20p4.z)*p4.'+'w,\x20(p4.z\x20+'+'\x20p4.w)*p4.'+'x));\x0a}\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20if\x20(pc'+'Position.x'+'\x20>\x20uniform'+'.numPartic'+'les)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20re'+'adInput(in'+'put.vUv0.x'+');\x0a\x20\x20\x20\x20vis'+'Mode\x20=\x20sel'+'ect(-1.0,\x20'+'1.0,\x20inSho'+'w);\x0a\x0a\x20\x20\x20\x20l'+'et\x20rndFact'+'or\x20=\x20hash4'+'1(pcPositi'+'on.x\x20+\x20uni'+'form.seed)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20particleR'+'ate\x20=\x20unif'+'orm.rate\x20+'+'\x20uniform.r'+'ateDiv\x20*\x20r'+'ndFactor.x'+';\x0a\x0a\x20\x20\x20\x20out'+'Life\x20=\x20inL'+'ife\x20+\x20unif'+'orm.delta;'+'\x0a\x20\x20\x20\x20let\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20uniform'+'.lifetime,'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t0\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'0,\x20interna'+'lTex0Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20va'+'r\x20localVel'+'ocity\x20=\x20le'+'rpResult0.'+'result;\x0a\x20\x20'+'\x20\x20let\x20loca'+'lVelocityD'+'iv\x20=\x20lerpR'+'esult0.unp'+'acked;\x0a\x0a\x20\x20'+'\x20\x20let\x20lerp'+'Result1\x20=\x20'+'tex1Dlod_l'+'erp(intern'+'alTex1,\x20in'+'ternalTex1'+'Sampler,\x20v'+'ec2f(nlife'+',\x200.0));\x0a\x20'+'\x20\x20\x20var\x20vel'+'ocity\x20=\x20le'+'rpResult1.'+'result;\x0a\x20\x20'+'\x20\x20let\x20velo'+'cityDiv\x20=\x20'+'lerpResult')+('1.unpacked'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t2\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'2,\x20interna'+'lTex2Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20le'+'t\x20params\x20='+'\x20lerpResul'+'t2.result;'+'\x0a\x20\x20\x20\x20let\x20p'+'aramDiv\x20=\x20'+'lerpResult'+'2.unpacked'+';\x0a\x20\x20\x20\x20var\x20'+'rotSpeed\x20='+'\x20params.x;'+'\x0a\x20\x20\x20\x20let\x20r'+'otSpeedDiv'+'\x20=\x20paramDi'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'let\x20lerpRe'+'sult3\x20=\x20te'+'x1Dlod_ler'+'p(internal'+'Tex3,\x20inte'+'rnalTex3Sa'+'mpler,\x20vec'+'2f(nlife,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20let\x20radia'+'lParams\x20=\x20'+'lerpResult'+'3.result;\x0a'+'\x20\x20\x20\x20let\x20ra'+'dialParamD'+'iv\x20=\x20lerpR'+'esult3.unp'+'acked;\x0a\x20\x20\x20'+'\x20let\x20radia'+'lSpeed\x20=\x20r'+'adialParam'+'s.x;\x0a\x20\x20\x20\x20l'+'et\x20radialS'+'peedDiv\x20=\x20'+'radialPara'+'mDiv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20res'+'pawn\x20=\x20inL'+'ife\x20<=\x200.0'+'\x20||\x20outLif'+'e\x20>=\x20unifo'+'rm.lifetim'+'e;\x0a\x20\x20\x20\x20inP'+'os\x20=\x20selec'+'t(inPos,\x20c'+'alcSpawnPo'+'sition(rnd'+'Factor.xyz'+',\x20rndFacto'+'r.x),\x20resp'+'awn);\x0a\x20\x20\x20\x20'+'inAngle\x20=\x20'+'select(inA'+'ngle,\x20mix('+'uniform.st'+'artAngle,\x20'+'uniform.st'+'artAngle2,'+'\x20rndFactor'+'.x),\x20respa'+'wn);\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20radialVe'+'l:\x20vec3f\x20='+'\x20inPos\x20-\x20u'+'niform.emi'+'tterPos;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20radialVel'+':\x20vec3f\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20=\x20select'+'(vec3f(0.0'+'),\x20radialS'+'peed\x20*\x20nor'+'malize(rad'+'ialVel),\x20d'+'ot(radialV'+'el,\x20radial'+'Vel)\x20>\x201.0')+('E-8);\x0a\x20\x20\x20\x20'+'radialVel\x20'+'=\x20radialVe'+'l\x20+\x20(radia'+'lSpeedDiv\x20'+'*\x20vec3f(2.'+'0)\x20-\x20vec3f'+'(1.0))\x20*\x20u'+'niform.rad'+'ialSpeedDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20=\x20localV'+'elocity\x20+\x20'+'(localVelo'+'cityDiv\x20*\x20'+'vec3f(2.0)'+'\x20-\x20vec3f(1'+'.0))\x20*\x20uni'+'form.local'+'VelocityDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x20\x20\x20\x20vel'+'ocity\x20=\x20ve'+'locity\x20+\x20('+'velocityDi'+'v\x20*\x20vec3f('+'2.0)\x20-\x20vec'+'3f(1.0))\x20*'+'\x20uniform.v'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20rotS'+'peed\x20=\x20rot'+'Speed\x20+\x20(r'+'otSpeedDiv'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20unif'+'orm.rotSpe'+'edDivMult\x20'+'*\x20rndFacto'+'r.y;\x0a\x0a\x20\x20\x20\x20'+'addInitial'+'Velocity(&'+'localVeloc'+'ity,\x20rndFa'+'ctor.xyz);'+'\x0a\x0a\x20\x20\x20\x20#ifn'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20outVel'+'\x20=\x20uniform'+'.emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tVel\x20=\x20(lo'+'calVelocit'+'y\x20+\x20radial'+'Vel)\x20/\x20uni'+'form.emitt'+'erScale\x20+\x20'+'uniform.em'+'itterMatri'+'xInv\x20*\x20vel'+'ocity;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20outPos\x20'+'=\x20inPos\x20+\x20'+'outVel\x20*\x20u'+'niform.del'+'ta;\x0a\x20\x20\x20\x20ou'+'tAngle\x20=\x20i'+'nAngle\x20+\x20r'+'otSpeed\x20*\x20'+'uniform.de'+'lta;\x0a'),C3='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20rotated'+'QuadXY);\x0a',P3='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20sa'+'turate(gam'+'maCorrectI'+'nput(max(a'+',\x200.0)));\x0a'+'\x20\x20\x20\x20if\x20((r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+')\x20<\x200.0000'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20}\x20\x20'+'\x20\x20\x0a',M3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3f'+'(1.0),\x20rgb'+',\x20a);\x0a\x20\x20\x20\x20'+'if\x20((rgb.r'+'\x20+\x20rgb.g\x20+'+'\x20rgb.b)\x20>\x20'+'2.99)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a',D3='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20}\x0a',I3='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20\x20'+'\x20//\x20XYZ\x20=\x20'+'world\x20pos,'+'\x20W\x20=\x20life\x0a'+'attribute\x20'+'particle_v'+'ertexData2'+':\x20vec4f;\x20\x20'+'//\x20X\x20=\x20ang'+'le,\x20Y\x20=\x20sc'+'ale,\x20Z\x20=\x20a'+'lpha,\x20W\x20=\x20'+'velocity.x'+'\x0aattribute'+'\x20particle_'+'vertexData'+'3:\x20vec4f;\x20'+'\x20//\x20XYZ\x20=\x20'+'particle\x20l'+'ocal\x20pos,\x20'+'W\x20=\x20veloci'+'ty.y\x0aattri'+'bute\x20parti'+'cle_vertex'+'Data4:\x20f32'+';\x20\x20\x20\x20//\x20pa'+'rticle\x20id\x0a'+'\x0a//\x20type\x20d'+'epends\x20on\x20'+'useMesh\x20pr'+'operty.\x20St'+'art\x20with\x20X'+'\x20=\x20velocit'+'y.z,\x20Y\x20=\x20p'+'article\x20ID'+'\x20and\x20for\x20m'+'esh\x20partic'+'les\x20procee'+'ds\x20with\x20Z\x20'+'=\x20mesh\x20UV.'+'x,\x20W\x20=\x20mes'+'h\x20UV.y\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_ver'+'texData5:\x20'+'vec2f;\x0a#el'+'se\x0a\x20\x20\x20\x20att'+'ribute\x20par'+'ticle_vert'+'exData5:\x20v'+'ec4f;\x0a#end'+'if\x0a\x0aunifor'+'m\x20matrix_v'+'iewProject'+'ion:\x20mat4x'+'4f;\x0aunifor'+'m\x20matrix_m'+'odel:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20ma'+'trix_norma'+'l:\x20mat3x3f'+';\x0auniform\x20'+'matrix_vie'+'wInverse:\x20'+'mat4x4f;\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20lifet'+'ime:\x20f32;\x0a'+'uniform\x20st'+'retch:\x20f32'+';\x0auniform\x20'+'seed:\x20f32;'+'\x0auniform\x20w'+'rapBounds:'+'\x20vec3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0auni'+'form\x20faceT'+'angent:\x20ve'+'c3f;\x0aunifo'+'rm\x20faceBin'+'orm:\x20vec3f'+';\x0a\x0a#ifdef\x20'+('PARTICLE_G'+'PU\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex0:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x0Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex1'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex1S'+'ampler:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20var\x20inter'+'nalTex2:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex2Samp'+'ler:\x20sampl'+'er;\x0a#endif'+'\x0auniform\x20e'+'mitterPos:'+'\x20vec3f;\x0a\x0av'+'arying\x20tex'+'CoordsAlph'+'aLife:\x20vec'+'4f;\x0a\x0astruc'+'t\x20RotateRe'+'sult\x20{\x0a\x20\x20\x20'+'\x20rotatedVe'+'c:\x20vec2f,\x0a'+'\x20\x20\x20\x20matrix'+':\x20mat2x2f\x0a'+'}\x0a\x0afn\x20rota'+'teWithMatr'+'ix(quadXY:'+'\x20vec2f,\x20pR'+'otation:\x20f'+'32)\x20->\x20Rot'+'ateResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'c\x20=\x20cos(pR'+'otation);\x0a'+'\x20\x20\x20\x20let\x20s\x20'+'=\x20sin(pRot'+'ation);\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'mat2x2f(ve'+'c2f(c,\x20s),'+'\x20vec2f(-s,'+'\x20c));\x0a\x20\x20\x20\x20'+'return\x20Rot'+'ateResult('+'m\x20*\x20quadXY'+',\x20m);\x0a}\x0a\x0a\x0a'+'fn\x20billboa'+'rd(Instanc'+'eCoords:\x20v'+'ec3f,\x20quad'+'XY:\x20vec2f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20customF'+'ace(Instan'+'ceCoords:\x20'+'vec3f,\x20qua'+'dXY:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20pos\x20=\x20uni'+'form.faceT'+'angent\x20*\x20q'+'uadXY.x\x20+\x20'+'uniform.fa'+'ceBinorm\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20safeNor'+'malize(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20l\x20=\x20')+('length(v);'+'\x0a\x20\x20\x20\x20retur'+'n\x20select(v'+',\x20v\x20/\x20l,\x20l'+'\x20>\x201e-06);'+'\x0a}\x0a\x0a@verte'+'x\x0afn\x20verte'+'xMain(inpu'+'t:\x20VertexI'+'nput)\x20->\x20V'+'ertexOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'VertexOutp'+'ut;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20particl'+'ePos\x20=\x20inp'+'ut.particl'+'e_vertexDa'+'ta.xyz;\x0a\x20\x20'+'\x20\x20let\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20let\x20vertP'+'os\x20=\x20input'+'.particle_'+'vertexData'+'3.xyz;\x0a\x20\x20\x20'+'\x20var\x20inVel'+'\x20=\x20vec3f(i'+'nput.parti'+'cle_vertex'+'Data2.w,\x20i'+'nput.parti'+'cle_vertex'+'Data3.w,\x20i'+'nput.parti'+'cle_vertex'+'Data5.x);\x0a'+'\x0a\x20\x20\x20\x20let\x20i'+'d\x20=\x20floor('+'input.part'+'icle_verte'+'xData4);\x0a\x20'+'\x20\x20\x20let\x20rnd'+'Factor\x20=\x20f'+'ract(sin(i'+'d\x20+\x201.0\x20+\x20'+'uniform.se'+'ed));\x0a\x20\x20\x20\x20'+'let\x20rndFac'+'tor3\x20=\x20vec'+'3f(rndFact'+'or,\x20fract('+'rndFactor*'+'10.0),\x20fra'+'ct(rndFact'+'or*100.0))'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20mo'+'delRotatio'+'n\x20=\x20mat3x3'+'f(uniform.'+'matrix_mod'+'el[0].xyz,'+'\x20uniform.m'+'atrix_mode'+'l[1].xyz,\x20'+'uniform.ma'+'trix_model'+'[2].xyz);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'Vel\x20=\x20mode'+'lRotation\x20'+'*\x20inVel;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20let\x20ve'+'locityV\x20=\x20'+'safeNormal'+'ize((mat3x'+'3f(uniform'+'.matrix_vi'+'ew[0].xyz,'+'\x20uniform.m'+'atrix_view'+'[1].xyz,\x20u'+'niform.mat'+'rix_view[2'+'].xyz)\x20*\x20i'+'nVel).xy);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'quadXY\x20=\x20v'+'ertPos.xy;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20USE_MES'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.tex'+'CoordsAlph')+('aLife\x20=\x20ve'+'c4f(input.'+'particle_v'+'ertexData5'+'.zw,\x20input'+'.particle_'+'vertexData'+'2.z,\x20input'+'.particle_'+'vertexData'+'.w);\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'texCoordsA'+'lphaLife\x20='+'\x20vec4f(qua'+'dXY\x20*\x20-0.5'+'\x20+\x200.5,\x20in'+'put.partic'+'le_vertexD'+'ata2.z,\x20in'+'put.partic'+'le_vertexD'+'ata.w);\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20var\x20rot'+'Matrix:\x20ma'+'t2x2f;\x0a\x0a\x20\x20'+'\x20\x20var\x20inAn'+'gle\x20=\x20inpu'+'t.particle'+'_vertexDat'+'a2.x;\x0a\x20\x20\x20\x20'+'var\x20partic'+'lePosMoved'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20meshLoc'+'alPos\x20=\x20in'+'put.partic'+'le_vertexD'+'ata3.xyz;\x0a'),L3='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20inp'+'ut.particl'+'e_vertexDa'+'ta2.y\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20localP'+'os\x20=\x20local'+'Pos\x20+\x20part'+'iclePos;\x0a\x0a'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20vec4f('+'localPos,\x20'+'1.0);\x0a',R3='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20rotate'+'dQuadXY);\x0a',O3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(rg'+'b,\x20a);\x0a\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a}\x0a',F3='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20sca'+'le\x20*\x20unifo'+'rm.emitter'+'Scale;\x0a\x20\x20\x20'+'\x20localPos\x20'+'=\x20localPos'+'\x20+\x20particl'+'ePos;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20SC'+'REEN_SPACE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(localPo'+'s.x,\x20local'+'Pos.y,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_v'+'iewProject'+'ion\x20*\x20vec4'+'f(localPos'+'.xyz,\x201.0)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a',N3='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20no'+'rmal\x20*\x200.5'+'\x20+\x200.5;\x0a\x20\x20'+'\x20\x20var\x20posN'+'ormal:\x20vec'+'3f\x20=\x20-norm'+'al\x20*\x200.5\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'negNormal\x20'+'=\x20negNorma'+'l\x20*\x20negNor'+'mal;\x0a\x20\x20\x20\x20p'+'osNormal\x20='+'\x20posNormal'+'\x20*\x20posNorm'+'al;\x0a',k3='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20/'+'/\x20XYZ\x20=\x20pa'+'rticle\x20pos'+'ition,\x20W\x20='+'\x20particle\x20'+'ID\x20+\x20rando'+'m\x20factor\x0a#'+'if\x20defined'+'(USE_MESH)'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(USE'+'_MESH_UV)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_uv:'+'\x20vec2f;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'esh\x20UV\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20pa'+'rticle_uv:'+'\x20vec2f\x20=\x20v'+'ec2f(0.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0aunifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0aunif'+'orm\x20matrix'+'_normal:\x20m'+'at3x3f;\x0aun'+'iform\x20matr'+'ix_viewInv'+'erse:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20numPa'+'rticlesPot'+':\x20f32;\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0auni'+'form\x20stret'+'ch:\x20f32;\x0au'+'niform\x20wra'+'pBounds:\x20v'+'ec3f;\x0aunif'+'orm\x20emitte'+'rScale:\x20ve'+'c3f;\x0aunifo'+'rm\x20emitter'+'Pos:\x20vec3f'+';\x0auniform\x20'+'faceTangen'+'t:\x20vec3f;\x0a'+'uniform\x20fa'+'ceBinorm:\x20'+'vec3f;\x0auni'+'form\x20rate:'+'\x20f32;\x0aunif'+'orm\x20rateDi'+'v:\x20f32;\x0aun'+'iform\x20life'+'time:\x20f32;'+'\x0auniform\x20d'+'eltaRandom'+'nessStatic'+':\x20f32;\x0auni'+'form\x20scale'+'DivMult:\x20f'+'32;\x0aunifor'+'m\x20alphaDiv'+'Mult:\x20f32;'+'\x0auniform\x20s'+'eed:\x20f32;\x0a'+'uniform\x20de'+'lta:\x20f32;\x0a'+'\x0avar\x20parti'+('cleTexOUT:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20particle'+'TexOUTSamp'+'ler:\x20sampl'+'er;\x0avar\x20pa'+'rticleTexI'+'N:\x20texture'+'_2d<f32>;\x0a'+'var\x20partic'+'leTexINSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex0:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex1:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x1Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex2'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex2S'+'ampler:\x20sa'+'mpler;\x0a#en'+'dif\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0avarying'+'\x20texCoords'+'AlphaLife:'+'\x20vec4f;\x0a\x0av'+'ar<private'+'>\x20inPos:\x20v'+'ec3f;\x0avar<'+'private>\x20i'+'nVel:\x20vec3'+'f;\x0avar<pri'+'vate>\x20inAn'+'gle:\x20f32;\x0a'+'var<privat'+'e>\x20inShow:'+'\x20bool;\x0avar'+'<private>\x20'+'inLife:\x20f3'+'2;\x0a'),U3='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20ma'+'x(normal,\x20'+'vec3(0.0))'+';\x0a\x20\x20\x20\x20var\x20'+'posNormal:'+'\x20vec3f\x20=\x20m'+'ax(-normal'+',\x20vec3(0.0'+'));\x0a',B3='\x0a\x20\x20\x20\x20let\x20l'+'ight:\x20vec3'+'f\x20=\x20negNor'+'mal.x\x20*\x20un'+'iform.ligh'+'tCube[0]\x20+'+'\x20posNormal'+'.x\x20*\x20unifo'+'rm.lightCu'+'be[1]\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20negNormal'+'.y\x20*\x20unifo'+'rm.lightCu'+'be[2]\x20+\x20po'+'sNormal.y\x20'+'*\x20uniform.'+'lightCube['+'3]\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ne'+'gNormal.z\x20'+'*\x20uniform.'+'lightCube['+'4]\x20+\x20posNo'+'rmal.z\x20*\x20u'+'niform.lig'+'htCube[5];'+'\x0a\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20li'+'ght;\x0a',z3='\x0aparticleP'+'os\x20=\x20(unif'+'orm.matrix'+'_model\x20*\x20v'+'ec4f(parti'+'clePos,\x201.'+'0)).xyz;\x0a',V3='\x0avar\x20local'+'Pos\x20=\x20mesh'+'LocalPos;\x0a'+'let\x20rotRes'+'ultXY\x20=\x20ro'+'tateWithMa'+'trix(local'+'Pos.xy,\x20in'+'Angle);\x0alo'+'calPos\x20=\x20v'+'ec3f(rotRe'+'sultXY.rot'+'atedVec,\x20l'+'ocalPos.z)'+';\x0arotMatri'+'x\x20=\x20rotRes'+'ultXY.matr'+'ix;\x0a\x0alet\x20r'+'otResultYZ'+'\x20=\x20rotateW'+'ithMatrix('+'localPos.y'+'z,\x20inAngle'+');\x0alocalPo'+'s\x20=\x20vec3f('+'localPos.x'+',\x20rotResul'+'tYZ.rotate'+'dVec);\x0arot'+'Matrix\x20=\x20r'+'otResultYZ'+'.matrix;\x0a\x0a'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',G3='\x0aoutput.No'+'rmal\x20=\x20nor'+'malize(loc'+'alPos\x20+\x20un'+'iform.matr'+'ix_viewInv'+'erse[2].xy'+'z);\x0a',H3='\x0a\x20\x20\x20\x20let\x20s'+'ampledNorm'+'al:\x20vec4f\x20'+'=\x20textureS'+'ample(norm'+'alMap,\x20nor'+'malMapSamp'+'ler,\x20vec2f'+'(input.tex'+'CoordsAlph'+'aLife.x,\x201'+'.0\x20-\x20input'+'.texCoords'+'AlphaLife.'+'y));\x0a\x20\x20\x20\x20l'+'et\x20normalM'+'ap:\x20vec3f\x20'+'=\x20normaliz'+'e(sampledN'+'ormal.xyz\x20'+'*\x202.0\x20-\x201.'+'0);\x0a\x0a\x20\x20\x20\x20l'+'et\x20Particl'+'eMat\x20=\x20mat'+'3x3<f32>(P'+'articleMat'+'0,\x20Particl'+'eMat1,\x20Par'+'ticleMat2)'+';\x0a\x20\x20\x20\x20let\x20'+'normal:\x20ve'+'c3f\x20=\x20Part'+'icleMat\x20*\x20'+'normalMap;'+'\x0a',W3='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan2(veloc'+'ityV.x,\x20ve'+'locityV.y)'+';\x0a',$3='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',X3='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20Normal:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20varying\x20'+'ParticleMa'+'t0:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Particle'+'Mat2:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'Cube:\x20arra'+'y<vec3f,\x206'+'>;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vDe'+'pth:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sc'+'reenDepthP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22fogPS\x22\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'ap:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'apSampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'iclePS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'VERTEX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'ormal:\x20vec'+'3f\x20=\x20Norma'+'l;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20MAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_normal'+'MapPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20!=\x20NON'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20HAL'+'F_LAMBERT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_halflambe'+'rtPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_lambertPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+('#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_light'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20BLE'+'ND\x20==\x20NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendNorma'+'lPS\x22\x0a\x20\x20\x20\x20#'+'elif\x20BLEND'+'\x20==\x20ADDITI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendAddPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+'\x20MULTIPLIC'+'ATIVE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_blendMu'+'ltiplyPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_endPS'+'\x22\x0a'),q3='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20anim'+'TexTilesPa'+'rams:\x20vec2'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20a'+'nimTexPara'+'ms:\x20vec4f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20ani'+'mTexIndexP'+'arams:\x20vec'+'2f;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20Partic'+'leMat0:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20Pa'+'rticleMat2'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20==\x20V'+'ERTEX\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Normal:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vDepth:\x20f'+'32;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_in'+'itVS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20PACK8\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleIn'+'putRgba8PS'+'\x22\x20\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x20\x22parti'+'cleInputFl'+'oatPS\x22\x20\x20\x20\x20'+'//\x20why\x20are'+'\x20these\x20PS\x20'+'and\x20not\x20VS'+'?\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'screenDept'+'hPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'articleVS\x22'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x20//\x20PARTI'+'CLE_CPU\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SOFT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22screenDep'+'thPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_c'+'puVS\x22\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_l'+('ocalShiftV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20ANIM'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20A'+'NIMTEX_LOO'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimFram'+'eLoopVS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleAnimFra'+'meClampVS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimTexV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20wrap\x20is\x20'+'not\x20used\x20o'+'n\x20CPU,\x20it\x20'+'was\x20commen'+'ted\x20out.\x20T'+'ODO:\x20inves'+'tigate\x20why'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'WRAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_wrap'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ALIGN_TO'+'_MOTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_point'+'AlongVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20USE_MESH'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_me'+'shVS\x22\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CUSTOM_FA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_custom'+'FaceVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_billboa'+'rdVS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20VERTEX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_norma'+'lVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20NORMA'+'L\x20==\x20MAP\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_TBNV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STRE'+'TCH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_stretchVS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PART'+'ICLE_GPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_endV')+('S\x22\x0a\x20\x20\x20\x20#el'+'se\x20//\x20PART'+'ICLE_CPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_cpu_'+'endVS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softVS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),j3='\x0a\x20\x20\x20\x20var\x20d'+'epth:\x20f32\x20'+'=\x20getLinea'+'rScreenDep'+'thFrag();\x0a'+'\x20\x20\x20\x20var\x20pa'+'rticleDept'+'h:\x20f32\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20var\x20depth'+'Diff:\x20f32\x20'+'=\x20saturate'+'(abs(parti'+'cleDepth\x20-'+'\x20depth)\x20*\x20'+'uniform.so'+'ftening);\x0a'+'\x20\x20\x20\x20a\x20=\x20a\x20'+'*\x20depthDif'+'f;\x0a',Y3='\x0a\x20\x20\x20\x20outpu'+'t.vDepth\x20='+'\x20getLinear'+'Depth(loca'+'lPos);\x0a',K3='\x0a\x20\x20\x20\x20let\x20m'+'oveDir:\x20ve'+'c3f\x20=\x20inVe'+'l\x20*\x20unifor'+'m.stretch;'+'\x0a\x20\x20\x20\x20var\x20p'+'osPrev:\x20ve'+'c3f\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20=\x20posPrev'+'\x20+\x20particl'+'ePosMoved;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'viewRotati'+'onTemp:\x20ma'+'t3x3f\x20=\x20ma'+'t3x3f(unif'+'orm.matrix'+'_view[0].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[1].xyz'+',\x20uniform.'+'matrix_vie'+'w[2].xyz);'+'\x0a\x20\x20\x20\x20let\x20c'+'enterToVer'+'texV:\x20vec2'+'f\x20=\x20normal'+'ize((viewR'+'otationTem'+'p\x20*\x20localP'+'os).xy);\x0a\x0a'+'\x20\x20\x20\x20let\x20in'+'terpolatio'+'n:\x20f32\x20=\x20d'+'ot(-veloci'+'tyV,\x20cente'+'rToVertexV'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x0a\x20\x20\x20\x20'+'particlePo'+'s\x20=\x20mix(pa'+'rticlePos,'+'\x20posPrev,\x20'+'interpolat'+'ion);\x0a',Z3='\x0a\x20\x20\x20\x20let\x20r'+'ot3\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(r'+'otMatrix[0'+'][0],\x20rotM'+'atrix[1][0'+'],\x200.0),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(rotMatr'+'ix[0][1],\x20'+'rotMatrix['+'1][1],\x200.0'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3f(0.0'+',\x200.0,\x201.0'+')\x0a\x20\x20\x20\x20);\x0a\x0a'+'\x20\x20\x20\x20let\x20vi'+'ewBasis\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20-un'+'iform.matr'+'ix_viewInv'+'erse[0].xy'+'z,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20-uniform.'+'matrix_vie'+'wInverse[1'+'].xyz,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.matrix_'+'viewInvers'+'e[2].xyz\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20tempM'+'at\x20=\x20viewB'+'asis\x20*\x20rot'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20WGSL\x20does'+'\x20not\x20suppo'+'rt\x20matrix\x20'+'varyings,\x20'+'decompose\x20'+'it\x20to\x20vec3'+'s\x0a\x20\x20\x20\x20outp'+'ut.Particl'+'eMat0\x20=\x20te'+'mpMat[0];\x0a'+'\x20\x20\x20\x20output'+'.ParticleM'+'at1\x20=\x20temp'+'Mat[1];\x0a\x20\x20'+'\x20\x20output.P'+'articleMat'+'2\x20=\x20tempMa'+'t[2];\x0a',Q3='\x0a\x20\x20\x20\x20let\x20o'+'rigParticl'+'ePos:\x20vec3'+'f\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20particleP'+'os\x20=\x20parti'+'clePos\x20-\x20u'+'niform.mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20=\x20(par'+'ticlePos\x20%'+'\x20uniform.w'+'rapBounds)'+'\x20-\x20uniform'+'.wrapBound'+'s\x20*\x200.5;\x0a\x20'+'\x20\x20\x20particl'+'ePos\x20=\x20par'+'ticlePos\x20+'+'\x20uniform.m'+'atrix_mode'+'l[3].xyz;\x0a'+'\x20\x20\x20\x20partic'+'lePosMoved'+'\x20=\x20particl'+'ePos\x20-\x20ori'+'gParticleP'+'os;\x0a',J3={'particlePS':h3,'particleVS':d3,'particleAnimFrameClampVS':f3,'particleAnimFrameLoopVS':u3,'particleAnimTexVS':p3,'particleInputFloatPS':m3,'particleInputRgba8PS':_3,'particleOutputFloatPS':g3,'particleOutputRgba8PS':S3,'particleUpdaterAABBPS':y3,'particleUpdaterEndPS':v3,'particleUpdaterInitPS':x3,'particleUpdaterNoRespawnPS':T3,'particleUpdaterOnStopPS':w3,'particleUpdaterRespawnPS':E3,'particleUpdaterSpherePS':b3,'particleUpdaterStartPS':A3,'particle_billboardVS':C3,'particle_blendAddPS':P3,'particle_blendMultiplyPS':M3,'particle_blendNormalPS':D3,'particle_cpuVS':I3,'particle_cpu_endVS':L3,'particle_customFaceVS':R3,'particle_endPS':O3,'particle_endVS':F3,'particle_halflambertPS':N3,'particle_initVS':k3,'particle_lambertPS':U3,'particle_lightingPS':B3,'particle_localShiftVS':z3,'particle_meshVS':V3,'particle_normalVS':G3,'particle_normalMapPS':H3,'particle_pointAlongVS':W3,'particle_simulationPS':$3,'particle_shaderPS':X3,'particle_shaderVS':q3,'particle_softPS':j3,'particle_softVS':Y3,'particle_stretchVS':K3,'particle_TBNVS':Z3,'particle_wrapVS':Q3},eO=['enabled','autoPlay','numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','loop','preWarm','lighting','halfLamber'+'t','intensity','depthWrite','noFog','depthSofte'+'ning','sort','blendType','stretch','alignToMot'+'ion','emitterSha'+'pe','emitterExt'+'ents','emitterExt'+'entsInner','emitterRad'+'ius','emitterRad'+'iusInner','initialVel'+'ocity','wrap','wrapBounds','localSpace','screenSpac'+'e','colorMapAs'+'set','normalMapA'+'sset','mesh','meshAsset','renderAsse'+'t','orientatio'+'n','particleNo'+'rmal','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','velocityGr'+'aph','velocityGr'+'aph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2','scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','colorMap','normalMap','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animSpeed','animLoop','layers'];class tO extends ct{constructor(_0x5e2c34){super(_0x5e2c34),this['id']='particlesy'+'stem',this['ComponentT'+'ype']=SR,this['DataType']=yR,this['schema']=eO,this['propertyTy'+'pes']={'emitterExtents':'vec3','emitterExtentsInner':'vec3','particleNormal':'vec3','wrapBounds':'vec3','localVelocityGraph':'curveset','localVelocityGraph2':'curveset','velocityGraph':'curveset','velocityGraph2':'curveset','colorGraph':'curveset','colorGraph2':'curveset','alphaGraph':'curve','alphaGraph2':'curve','rotationSpeedGraph':'curve','rotationSpeedGraph2':'curve','radialSpeedGraph':'curve','radialSpeedGraph2':'curve','scaleGraph':'curve','scaleGraph2':'curve'},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this),Ce['get'](_0x5e2c34['graphicsDe'+'vice'],Fe)['add'](c3),Ce['get'](_0x5e2c34['graphicsDe'+'vice'],it)['add'](J3);}['initialize'+'ComponentD'+'ata'](_0x573abb,_0x9441c4,_0x5b8f91){const _0x9bdba3={};_0x5b8f91=[];const _0x17fe30=this['propertyTy'+'pes'];(_0x9441c4['mesh']instanceof pe||typeof _0x9441c4['mesh']=='number')&&(_0x9441c4['meshAsset']=_0x9441c4['mesh'],delete _0x9441c4['mesh']);for(const _0x4ed274 in _0x9441c4){if(_0x9441c4['hasOwnProp'+'erty'](_0x4ed274)&&(_0x5b8f91['push'](_0x4ed274),_0x9bdba3[_0x4ed274]=_0x9441c4[_0x4ed274]),_0x17fe30[_0x4ed274]==='vec3')Array['isArray'](_0x9bdba3[_0x4ed274])&&(_0x9bdba3[_0x4ed274]=new D(_0x9bdba3[_0x4ed274][0x121*-0xb+-0x20c6+0x1f7*0x17],_0x9bdba3[_0x4ed274][-0x1b1e+-0x1*-0x1a84+0x1*0x9b],_0x9bdba3[_0x4ed274][0x3e2+-0xe0b+0xa2b]));else{if(_0x17fe30[_0x4ed274]==='curve'){if(!(_0x9bdba3[_0x4ed274]instanceof Xs)){const _0x4816fa=_0x9bdba3[_0x4ed274]['type'];_0x9bdba3[_0x4ed274]=new Xs(_0x9bdba3[_0x4ed274]['keys']),_0x9bdba3[_0x4ed274]['type']=_0x4816fa;}}else{if(_0x17fe30[_0x4ed274]==='curveset'&&!(_0x9bdba3[_0x4ed274]instanceof ta)){const _0x1902ce=_0x9bdba3[_0x4ed274]['type'];_0x9bdba3[_0x4ed274]=new ta(_0x9bdba3[_0x4ed274]['keys']),_0x9bdba3[_0x4ed274]['type']=_0x1902ce;}}}_0x9bdba3['layers']&&Array['isArray'](_0x9bdba3['layers'])&&(_0x9bdba3['layers']=_0x9bdba3['layers']['slice'](0x130a+0xf40+-0x224a));}super['initialize'+'ComponentD'+'ata'](_0x573abb,_0x9bdba3,_0x5b8f91);}['cloneCompo'+'nent'](_0x364b13,_0x27eedd){const _0xb7e10e=_0x364b13['particlesy'+'stem']['data'],_0x3f26f7=this['schema'],_0x274509={};for(let _0x1d1814=-0x2*-0xb7b+0x14d*-0x11+0x1f*-0x7,_0x1f1faa=_0x3f26f7['length'];_0x1d1814<_0x1f1faa;_0x1d1814++){const _0x36a737=_0x3f26f7[_0x1d1814];let _0x348df3=_0xb7e10e[_0x36a737];_0x348df3 instanceof D||_0x348df3 instanceof Xs||_0x348df3 instanceof ta?(_0x348df3=_0x348df3['clone'](),_0x274509[_0x36a737]=_0x348df3):_0x36a737==='layers'?_0x274509['layers']=_0xb7e10e['layers']['slice'](-0x255e+0x253e+0x20):_0x348df3!=null&&(_0x274509[_0x36a737]=_0x348df3);}return this['addCompone'+'nt'](_0x27eedd,_0x274509);}['onUpdate'](_0x238fc5){const _0x499bdb=this['store'],_0x1b17b4=this['app']['stats']['particles'],_0x2cb07a=this['app']['scene']['layers'];for(let _0x3b4780=-0xa0b*-0x1+0x26d2+-0x30dd;_0x3b4780<_0x2cb07a['layerList']['length'];_0x3b4780++)_0x2cb07a['layerList'][_0x3b4780]['requiresLi'+'ghtCube']=!(0x1d*-0xd3+0x1edf+-0x6f7*0x1);for(const _0x5ace6f in _0x499bdb)if(_0x499bdb['hasOwnProp'+'erty'](_0x5ace6f)){const _0x263d9b=_0x499bdb[_0x5ace6f],_0x462979=_0x263d9b['entity'],_0x4a77df=_0x263d9b['data'];if(_0x4a77df['enabled']&&_0x462979['enabled']){const _0x14c46f=_0x462979['particlesy'+'stem']['emitter'];if(!(_0x14c46f!=null&&_0x14c46f['meshInstan'+'ce']['visible']))continue;if(_0x14c46f['lighting']){const _0x2073bf=_0x4a77df['layers'];for(let _0x28fb7f=-0xe97+-0x2f*0xd2+0x3525;_0x28fb7f<_0x2073bf['length'];_0x28fb7f++){const _0x4bdb90=_0x2cb07a['getLayerBy'+'Id'](_0x2073bf[_0x28fb7f]);_0x4bdb90&&(_0x4bdb90['requiresLi'+'ghtCube']=!(-0x1*-0xea9+0x1*0xbe1+0xd45*-0x2));}}if(!_0x4a77df['paused']){let _0x1f9550=0xce*0x18+0x1c19*0x1+-0x2f69;if(_0x14c46f['simTime']+=_0x238fc5,_0x14c46f['simTime']>=_0x14c46f['fixedTimeS'+'tep']&&(_0x1f9550=Math['floor'](_0x14c46f['simTime']/_0x14c46f['fixedTimeS'+'tep']),_0x14c46f['simTime']-=_0x1f9550*_0x14c46f['fixedTimeS'+'tep']),_0x1f9550){_0x1f9550=Math['min'](_0x1f9550,_0x14c46f['maxSubStep'+'s']);for(let _0x2b6a45=-0x25c3+-0x1*0xcb9+0x327c;_0x2b6a45<_0x1f9550;_0x2b6a45++)_0x14c46f['addTime'](_0x14c46f['fixedTimeS'+'tep'],!(0x2418+-0x12c3+-0x2*0x8aa));_0x1b17b4['_updatesPe'+'rFrame']+=_0x1f9550,_0x1b17b4['_frameTime']+=_0x14c46f['_addTimeTi'+'me'],_0x14c46f['_addTimeTi'+'me']=0x1*-0x5fb+-0x1*0x72+0x2f*0x23;}_0x14c46f['finishFram'+'e']();}}}}['onBeforeRe'+'move'](_0x589991,_0x4dff78){_0x4dff78['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class sO extends td{constructor(_0x10c632,_0x35a65e){super(),this['skin']=_0x10c632,this['skinInstan'+'ce']=_0x35a65e;}}const Vs=class Vs{static['logCachedS'+'kinInstanc'+'es'](){console['log']('CachedSkin'+'Instances'),Vs['_skinInsta'+'nceCache']['forEach']((_0x402c5a,_0x281a1f)=>{console['log'](_0x281a1f['name']+':\x20Array('+_0x402c5a['length']+')');for(let _0x59b68d=0x3c7*0x5+-0xecd+-0x416*0x1;_0x59b68d<_0x402c5a['length'];_0x59b68d++)console['log']('\x20\x20'+_0x59b68d+(':\x20RefCount'+'\x20')+_0x402c5a[_0x59b68d]['refCount']);});}static['createCach'+'edSkinInst'+'ance'](_0x1d9cac,_0x3f4d36,_0x254351){let _0x4bf221=Vs['getCachedS'+'kinInstanc'+'e'](_0x1d9cac,_0x3f4d36);return _0x4bf221||(_0x4bf221=new xl(_0x1d9cac),_0x4bf221['resolve'](_0x3f4d36,_0x254351),Vs['addCachedS'+'kinInstanc'+'e'](_0x1d9cac,_0x3f4d36,_0x4bf221)),_0x4bf221;}static['getCachedS'+'kinInstanc'+'e'](_0x523a01,_0x323e51){let _0x293f33=null;const _0x16a22a=Vs['_skinInsta'+'nceCache']['get'](_0x323e51);if(_0x16a22a){const _0x4b777b=_0x16a22a['find'](_0x489f10=>_0x489f10['skin']===_0x523a01);_0x4b777b&&(_0x4b777b['incRefCoun'+'t'](),_0x293f33=_0x4b777b['skinInstan'+'ce']);}return _0x293f33;}static['addCachedS'+'kinInstanc'+'e'](_0x35787a,_0x44ffc2,_0x34eb21){let _0x5dd738=Vs['_skinInsta'+'nceCache']['get'](_0x44ffc2);_0x5dd738||(_0x5dd738=[],Vs['_skinInsta'+'nceCache']['set'](_0x44ffc2,_0x5dd738));let _0x479a9b=_0x5dd738['find'](_0xa64b29=>_0xa64b29['skin']===_0x35787a);_0x479a9b||(_0x479a9b=new sO(_0x35787a,_0x34eb21),_0x5dd738['push'](_0x479a9b)),_0x479a9b['incRefCoun'+'t']();}static['removeCach'+'edSkinInst'+'ance'](_0x501a7d){if(_0x501a7d){const _0x3325b3=_0x501a7d['rootBone'];if(_0x3325b3){const _0xac23d4=Vs['_skinInsta'+'nceCache']['get'](_0x3325b3);if(_0xac23d4){const _0xad7f3e=_0xac23d4['findIndex'](_0x26f0e9=>_0x26f0e9['skinInstan'+'ce']===_0x501a7d);if(_0xad7f3e>=0x1391+0x242b+-0x1ec*0x1d){const _0x1c2e8=_0xac23d4[_0xad7f3e];_0x1c2e8['decRefCoun'+'t'](),_0x1c2e8['refCount']===0x1472*-0x1+0x83*0x37+-0x7b3&&(_0xac23d4['splice'](_0xad7f3e,0x1294+-0xac6+0x1*-0x7cd),_0xac23d4['length']||Vs['_skinInsta'+'nceCache']['delete'](_0x3325b3),_0x501a7d&&(_0x501a7d['destroy'](),_0x1c2e8['skinInstan'+'ce']=null));}}}}}};h(Vs,'_skinInsta'+'nceCache',new Map());let il=Vs;class rl{constructor(_0x265692,_0x34688c,_0x3f99fd,_0x4d1d79,_0x1ab9db){h(this,'_evtLoadBy'+'Id',null),h(this,'_evtUnload'+'ById',null),h(this,'_evtAddByI'+'d',null),h(this,'_evtRemove'+'ById',null),h(this,'_evtLoadBy'+'Url',null),h(this,'_evtAddByU'+'rl',null),h(this,'_evtRemove'+'ByUrl',null),(this['propertyNa'+'me']=_0x265692,this['parent']=_0x34688c,this['_scope']=_0x1ab9db,this['_registry']=_0x3f99fd,this['id']=null,this['url']=null,this['asset']=null,this['_onAssetLo'+'ad']=_0x4d1d79['load'],this['_onAssetAd'+'d']=_0x4d1d79['add'],this['_onAssetRe'+'move']=_0x4d1d79['remove'],this['_onAssetUn'+'load']=_0x4d1d79['unload']);}set['id'](_0x3419c2){if(this['url'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_id']=_0x3419c2,this['asset']=this['_registry']['get'](this['_id']),this['_bind']();}get['id'](){return this['_id'];}set['url'](_0x57c592){if(this['id'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_url']=_0x57c592,this['asset']=this['_registry']['getByUrl'](this['_url']),this['_bind']();}get['url'](){return this['_url'];}['_bind'](){this['id']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Id']=this['_registry']['on']('load:'+this['id'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByI'+'d']=this['_registry']['once']('add:'+this['id'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ById']=this['_registry']['on']('remove:'+this['id'],this['_onRemove'],this)),this['_onAssetUn'+'load']&&(this['_evtUnload'+'ById']=this['_registry']['on']('unload:'+this['id'],this['_onUnload'],this))),this['url']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Url']=this['_registry']['on']('load:url:'+this['url'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByU'+'rl']=this['_registry']['once']('add:url:'+this['url'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ByUrl']=this['_registry']['on']('remove:url'+':'+this['url'],this['_onRemove'],this)));}['_unbind'](){var _0x3a3e96,_0xb011e7,_0x32e0c4,_0x449f8c,_0x26ee65,_0x1563e9,_0x4bb23c;this['id']&&((_0x3a3e96=this['_evtLoadBy'+'Id'])==null||_0x3a3e96['off'](),this['_evtLoadBy'+'Id']=null,(_0xb011e7=this['_evtAddByI'+'d'])==null||_0xb011e7['off'](),this['_evtAddByI'+'d']=null,(_0x32e0c4=this['_evtRemove'+'ById'])==null||_0x32e0c4['off'](),this['_evtRemove'+'ById']=null,(_0x449f8c=this['_evtUnload'+'ById'])==null||_0x449f8c['off'](),this['_evtUnload'+'ById']=null),this['url']&&((_0x26ee65=this['_evtLoadBy'+'Url'])==null||_0x26ee65['off'](),this['_evtLoadBy'+'Url']=null,(_0x1563e9=this['_evtAddByU'+'rl'])==null||_0x1563e9['off'](),this['_evtAddByU'+'rl']=null,(_0x4bb23c=this['_evtRemove'+'ByUrl'])==null||_0x4bb23c['off'](),this['_evtRemove'+'ByUrl']=null);}['_onLoad'](_0x3e117d){this['_onAssetLo'+'ad']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x3e117d);}['_onAdd'](_0x168355){this['asset']=_0x168355,this['_onAssetAd'+'d']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x168355);}['_onRemove'](_0x49cd64){this['_onAssetRe'+'move']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x49cd64),this['asset']=null;}['_onUnload'](_0x390505){this['_onAssetUn'+'load']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x390505);}}class Ev extends we{constructor(_0x5b96b4,_0x3cb681){super(_0x5b96b4,_0x3cb681),h(this,'_type','asset'),h(this,'_castShado'+'ws',!(-0x11b+-0xa6f+0xb8a)),h(this,'_receiveSh'+'adows',!(0x1*0x18eb+0x19*0x9a+-0x1*0x27f5)),h(this,'_castShado'+'wsLightmap',!(0xffd*-0x1+0x2160+-0x1*0x1163)),h(this,'_lightmapp'+'ed',!(0x19c4*-0x1+0x1ee8+0x523*-0x1)),h(this,'_lightmapS'+'izeMultipl'+'ier',-0x1*-0x373+-0x1*0x18bd+-0x154b*-0x1),h(this,'isStatic',!(-0x3*0x2fc+-0x5d1*-0x1+0x324)),h(this,'_batchGrou'+'pId',-(-0x2*-0xa11+-0x8e*0x1+-0x1*0x1393)),h(this,'_layers',[Ji]),h(this,'_renderSty'+'le',nn),h(this,'_meshInsta'+'nces',[]),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_assetRefe'+'rence'),h(this,'_materialR'+'eferences',[]),h(this,'_material'),h(this,'_rootBone',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['_assetRefe'+'rence']=new rl('asset',this,_0x5b96b4['app']['assets'],{'add':this['_onRenderA'+'ssetAdded'],'load':this['_onRenderA'+'ssetLoad'],'remove':this['_onRenderA'+'ssetRemove'],'unload':this['_onRenderA'+'ssetUnload']},this),this['_material']=_0x5b96b4['defaultMat'+'erial'],_0x3cb681['on']('remove',this['onRemoveCh'+'ild'],this),_0x3cb681['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x3cb681['on']('insert',this['onInsertCh'+'ild'],this),_0x3cb681['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['renderStyl'+'e'](_0x93c549){this['_renderSty'+'le']!==_0x93c549&&(this['_renderSty'+'le']=_0x93c549,He['_prepareRe'+'nderStyleF'+'orArray'](this['_meshInsta'+'nces'],_0x93c549));}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['customAabb'](_0x2e9478){this['_customAab'+'b']=_0x2e9478;const _0x46e699=this['_meshInsta'+'nces'];if(_0x46e699){for(let _0x429206=0x181*0x9+0x6d7*-0x2+0x25;_0x429206<_0x46e699['length'];_0x429206++)_0x46e699[_0x429206]['setCustomA'+'abb'](this['_customAab'+'b']);}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x1ca72f){if(this['_type']!==_0x1ca72f&&(this['_area']=null,this['_type']=_0x1ca72f,this['destroyMes'+'hInstances'](),_0x1ca72f!=='asset')){let _0x115d1f=this['_material'];(!_0x115d1f||_0x115d1f===this['system']['defaultMat'+'erial'])&&(_0x115d1f=this['_materialR'+'eferences'][0xfc9+0x1*-0x16c5+0x6fc]&&this['_materialR'+'eferences'][0x8*-0x16f+-0x1e87+-0x33b*-0xd]['asset']&&this['_materialR'+'eferences'][-0x1265+0x1824+-0x5bf*0x1]['asset']['resource']);const _0x135606=Tv(this['system']['app']['graphicsDe'+'vice'],_0x1ca72f);this['_area']=_0x135606['area'],this['meshInstan'+'ces']=[new He(_0x135606['mesh'],_0x115d1f||this['system']['defaultMat'+'erial'],this['entity'])];}}get['type'](){return this['_type'];}set['meshInstan'+'ces'](_0x44a20d){if(w['assert'](Array['isArray'](_0x44a20d),'MeshInstan'+'ces\x20set\x20to'+'\x20a\x20Render\x20'+'component\x20'+'must\x20be\x20an'+'\x20array.'),this['destroyMes'+'hInstances'](),this['_meshInsta'+'nces']=_0x44a20d,this['_meshInsta'+'nces']){const _0x3172d7=this['_meshInsta'+'nces'];for(let _0x26a007=0x1*0x2359+-0x175*-0x7+-0x2d8c;_0x26a007<_0x3172d7['length'];_0x26a007++)_0x3172d7[_0x26a007]['node']||(_0x3172d7[_0x26a007]['node']=this['entity']),_0x3172d7[_0x26a007]['castShadow']=this['_castShado'+'ws'],_0x3172d7[_0x26a007]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x3172d7[_0x26a007]['renderStyl'+'e']=this['_renderSty'+'le'],_0x3172d7[_0x26a007]['setLightma'+'pped'](this['_lightmapp'+'ed']),_0x3172d7[_0x26a007]['setCustomA'+'abb'](this['_customAab'+'b']);this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['meshInstan'+'ces'](){return this['_meshInsta'+'nces'];}set['lightmappe'+'d'](_0x5b8d61){if(_0x5b8d61!==this['_lightmapp'+'ed']){this['_lightmapp'+'ed']=_0x5b8d61;const _0x6008af=this['_meshInsta'+'nces'];if(_0x6008af){for(let _0x1efcae=-0xe8b+0x6*-0x471+-0xf*-0x2bf;_0x1efcae<_0x6008af['length'];_0x1efcae++)_0x6008af[_0x1efcae]['setLightma'+'pped'](_0x5b8d61);}}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x10382e){if(this['_castShado'+'ws']!==_0x10382e){const _0x3fcda2=this['_meshInsta'+'nces'];if(_0x3fcda2){const _0x519fca=this['layers'],_0x331ea2=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x10382e)for(let _0x51b28c=0x18e0+0x1a3*-0x2+0x18b*-0xe;_0x51b28c<_0x519fca['length'];_0x51b28c++){const _0x49c0f0=_0x331ea2['layers']['getLayerBy'+'Id'](this['layers'][_0x51b28c]);_0x49c0f0&&_0x49c0f0['removeShad'+'owCasters'](_0x3fcda2);}for(let _0x1a1cf8=-0xae*-0x31+0x154b+-0x3699;_0x1a1cf8<_0x3fcda2['length'];_0x1a1cf8++)_0x3fcda2[_0x1a1cf8]['castShadow']=_0x10382e;if(!this['_castShado'+'ws']&&_0x10382e)for(let _0x630a69=-0x2554+-0x72*0x3e+-0x4*-0x103c;_0x630a69<_0x519fca['length'];_0x630a69++){const _0x3ac828=_0x331ea2['layers']['getLayerBy'+'Id'](_0x519fca[_0x630a69]);_0x3ac828&&_0x3ac828['addShadowC'+'asters'](_0x3fcda2);}}this['_castShado'+'ws']=_0x10382e;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x43315f){if(this['_receiveSh'+'adows']!==_0x43315f){this['_receiveSh'+'adows']=_0x43315f;const _0x4df63b=this['_meshInsta'+'nces'];if(_0x4df63b){for(let _0x27946c=0x1884+0x1*0x1ddf+-0x3663;_0x27946c<_0x4df63b['length'];_0x27946c++)_0x4df63b[_0x27946c]['receiveSha'+'dow']=_0x43315f;}}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x1d9ba6){this['_castShado'+'wsLightmap']=_0x1d9ba6;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x27aeb0){this['_lightmapS'+'izeMultipl'+'ier']=_0x27aeb0;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x246dae){const _0x5508a8=this['system']['app']['scene']['layers'];let _0x3ddf86;if(this['_meshInsta'+'nces']){for(let _0x9b75d4=0x9d0+0x62*0x19+-0x3*0x676;_0x9b75d4<this['_layers']['length'];_0x9b75d4++)_0x3ddf86=_0x5508a8['getLayerBy'+'Id'](this['_layers'][_0x9b75d4]),_0x3ddf86&&_0x3ddf86['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}this['_layers']['length']=0x49*0x6c+-0x7f*-0x3a+-0x3b92;for(let _0x424f20=0x1e45+-0x239c+-0x1*-0x557;_0x424f20<_0x246dae['length'];_0x424f20++)this['_layers'][_0x424f20]=_0x246dae[_0x424f20];if(!(!this['enabled']||!this['entity']['enabled']||!this['_meshInsta'+'nces'])){for(let _0x27cc89=0x6bc*-0x4+-0x1185+0x2c75;_0x27cc89<this['_layers']['length'];_0x27cc89++)_0x3ddf86=_0x5508a8['getLayerBy'+'Id'](this['_layers'][_0x27cc89]),_0x3ddf86&&_0x3ddf86['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x789869){var _0x197656,_0x20b143;this['_batchGrou'+'pId']!==_0x789869&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=-0x2a7+-0x21*-0xd7+-0x1910&&((_0x197656=this['system']['app']['batcher'])==null||_0x197656['remove'](St['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x789869>=-0xc*-0x28+-0x1d66+0x1b86&&((_0x20b143=this['system']['app']['batcher'])==null||_0x20b143['insert'](St['RENDER'],_0x789869,this['entity'])),_0x789869<-0x1b1d+0x973*0x2+0x837&&this['_batchGrou'+'pId']>=-0x193a+-0x19c5*-0x1+-0x8b&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s'](),this['_batchGrou'+'pId']=_0x789869);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['material'](_0x1e2cb0){if(this['_material']!==_0x1e2cb0&&(this['_material']=_0x1e2cb0,this['_meshInsta'+'nces']&&this['_type']!=='asset')){for(let _0x4ac3cc=-0x39e*0x5+0xbb8+0xa*0xa3;_0x4ac3cc<this['_meshInsta'+'nces']['length'];_0x4ac3cc++)this['_meshInsta'+'nces'][_0x4ac3cc]['material']=_0x1e2cb0;}}get['material'](){return this['_material'];}set['materialAs'+'sets'](_0x36e3a9=[]){if(this['_materialR'+'eferences']['length']>_0x36e3a9['length']){for(let _0x51f120=_0x36e3a9['length'];_0x51f120<this['_materialR'+'eferences']['length'];_0x51f120++)this['_materialR'+'eferences'][_0x51f120]['id']=null;this['_materialR'+'eferences']['length']=_0x36e3a9['length'];}for(let _0x507107=0x19ed*-0x1+0x1*0x1186+0x9*0xef;_0x507107<_0x36e3a9['length'];_0x507107++)if(this['_materialR'+'eferences'][_0x507107]||this['_materialR'+'eferences']['push'](new rl(_0x507107,this,this['system']['app']['assets'],{'add':this['_onMateria'+'lAdded'],'load':this['_onMateria'+'lLoad'],'remove':this['_onMateria'+'lRemove'],'unload':this['_onMateria'+'lUnload']},this)),_0x36e3a9[_0x507107]){const _0x31d07d=_0x36e3a9[_0x507107]instanceof pe?_0x36e3a9[_0x507107]['id']:_0x36e3a9[_0x507107];this['_materialR'+'eferences'][_0x507107]['id']!==_0x31d07d&&(this['_materialR'+'eferences'][_0x507107]['id']=_0x31d07d),this['_materialR'+'eferences'][_0x507107]['asset']&&this['_onMateria'+'lAdded'](_0x507107,this,this['_materialR'+'eferences'][_0x507107]['asset']);}else this['_materialR'+'eferences'][_0x507107]['id']=null,this['_meshInsta'+'nces'][_0x507107]&&(this['_meshInsta'+'nces'][_0x507107]['material']=this['system']['defaultMat'+'erial']);}get['materialAs'+'sets'](){return this['_materialR'+'eferences']['map'](_0x124f0f=>_0x124f0f['id']);}set['asset'](_0x55d215){const _0xdf31d=_0x55d215 instanceof pe?_0x55d215['id']:_0x55d215;this['_assetRefe'+'rence']['id']!==_0xdf31d&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onRenderA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0xdf31d,this['_assetRefe'+'rence']['asset']&&this['_onRenderA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['assignAsse'+'t'](_0x56c636){const _0x235373=_0x56c636 instanceof pe?_0x56c636['id']:_0x56c636;this['_assetRefe'+'rence']['id']=_0x235373;}set['rootBone'](_0x3e5de3){if(this['_rootBone']!==_0x3e5de3){const _0x199b55=typeof _0x3e5de3=='string';if(this['_rootBone']&&_0x199b55&&this['_rootBone']['getGuid']()===_0x3e5de3)return;this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x3e5de3 instanceof Ie?this['_rootBone']=_0x3e5de3:_0x199b55?(this['_rootBone']=this['system']['app']['getEntityF'+'romIndex'](_0x3e5de3)||null,this['_rootBone']||w['warn']('Failed\x20to\x20'+'find\x20rootB'+'one\x20Entity'+'\x20by\x20GUID')):this['_rootBone']=null,this['_rootBone']&&this['_cloneSkin'+'Instances']();}}get['rootBone'](){return this['_rootBone'];}['destroyMes'+'hInstances'](){const _0x109028=this['_meshInsta'+'nces'];if(_0x109028){this['removeFrom'+'Layers'](),this['_clearSkin'+'Instances']();for(let _0x206f32=0x7*-0x5+-0x1163+0x1186;_0x206f32<_0x109028['length'];_0x206f32++)_0x109028[_0x206f32]['destroy']();this['_meshInsta'+'nces']['length']=-0x29*0x3a+-0x8*-0xcd+0x6*0x7b;}}['addToLayer'+'s'](){const _0x1f3223=this['system']['app']['scene']['layers'];for(let _0x1664c3=-0xf9f+0x5fe*-0x1+0x159d;_0x1664c3<this['_layers']['length'];_0x1664c3++){const _0x246dfa=_0x1f3223['getLayerBy'+'Id'](this['_layers'][_0x1664c3]);_0x246dfa&&_0x246dfa['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}['removeFrom'+'Layers'](){if(this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']){const _0x7f78eb=this['system']['app']['scene']['layers'];for(let _0x4ae45b=0x15f3+-0x845+-0xdae;_0x4ae45b<this['_layers']['length'];_0x4ae45b++){const _0x27e6af=_0x7f78eb['getLayerBy'+'Id'](this['_layers'][_0x4ae45b]);_0x27e6af&&_0x27e6af['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_meshInsta'+'nces']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyMes'+'hInstances'](),this['asset']=null,this['materialAs'+'set']=null,this['_assetRefe'+'rence']['id']=null;for(let _0x1d343a=0x5*-0x741+0xad*0x2c+0x689;_0x1d343a<this['_materialR'+'eferences']['length'];_0x1d343a++)this['_materialR'+'eferences'][_0x1d343a]['id']=null;this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x361d9f,_0x347ddd){this['addToLayer'+'s'](),_0x361d9f['off']('add',this['onLayerAdd'+'ed'],this),_0x361d9f['off']('remove',this['onLayerRem'+'oved'],this),_0x347ddd['on']('add',this['onLayerAdd'+'ed'],this),_0x347ddd['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x5d2933){this['layers']['indexOf'](_0x5d2933['id'])<0x3ac*-0x8+0x1*0xa2e+0x1332||_0x5d2933['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}['onLayerRem'+'oved'](_0x39c03c){this['layers']['indexOf'](_0x39c03c['id'])<-0x9b*0x4+-0x116e+-0x15*-0xf2||_0x39c03c['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}['onEnable'](){var _0x385241;const _0xedeb0=this['system']['app'],_0xf8d115=_0xedeb0['scene'],_0x571755=_0xf8d115['layers'];this['_rootBone']&&this['_cloneSkin'+'Instances'](),this['_evtLayers'+'Changed']=_0xf8d115['on']('set:layers',this['onLayersCh'+'anged'],this),_0x571755&&(this['_evtLayerA'+'dded']=_0x571755['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x571755['on']('remove',this['onLayerRem'+'oved'],this));const _0x1e5aba=this['_type']==='asset';this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']?this['addToLayer'+'s']():_0x1e5aba&&this['asset']&&this['_onRenderA'+'ssetAdded']();for(let _0x7571a=-0x26*0x8e+0x4*0xce+0x9*0x1fc;_0x7571a<this['_materialR'+'eferences']['length'];_0x7571a++)this['_materialR'+'eferences'][_0x7571a]['asset']&&this['system']['app']['assets']['load'](this['_materialR'+'eferences'][_0x7571a]['asset']);this['_batchGrou'+'pId']>=0xea6+-0x141d+-0x577*-0x1&&((_0x385241=_0xedeb0['batcher'])==null||_0x385241['insert'](St['RENDER'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x1ed6ad,_0x3c489a,_0x40a7fd,_0x409e31;const _0x263d33=this['system']['app'],_0xdc896d=_0x263d33['scene']['layers'];(_0x1ed6ad=this['_evtLayers'+'Changed'])==null||_0x1ed6ad['off'](),this['_evtLayers'+'Changed']=null,this['_rootBone']&&this['_clearSkin'+'Instances'](),_0xdc896d&&((_0x3c489a=this['_evtLayerA'+'dded'])==null||_0x3c489a['off'](),this['_evtLayerA'+'dded']=null,(_0x40a7fd=this['_evtLayerR'+'emoved'])==null||_0x40a7fd['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=0x15f7+-0x1*-0xcc9+-0x1*0x22c0&&((_0x409e31=_0x263d33['batcher'])==null||_0x409e31['remove'](St['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['removeFrom'+'Layers']();}['hide'](){if(this['_meshInsta'+'nces']){for(let _0x1cb498=0x2*-0x9eb+0x710+0x28e*0x5;_0x1cb498<this['_meshInsta'+'nces']['length'];_0x1cb498++)this['_meshInsta'+'nces'][_0x1cb498]['visible']=!(-0xd21*0x2+-0x5ea*0x3+0x2c01);}}['show'](){if(this['_meshInsta'+'nces']){for(let _0x4bc63a=-0x1669+-0x1541*-0x1+0x128;_0x4bc63a<this['_meshInsta'+'nces']['length'];_0x4bc63a++)this['_meshInsta'+'nces'][_0x4bc63a]['visible']=!(0xe56*-0x2+0x1*-0xa03+0x1*0x26af);}}['_onRenderA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onRenderA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onRenderA'+'ssetLoad'](){var _0xf0eed2;if(this['destroyMes'+'hInstances'](),this['_assetRefe'+'rence']['asset']){const _0x1d3c3d=this['_assetRefe'+'rence']['asset']['resource'];(_0xf0eed2=this['_evtSetMes'+'hes'])==null||_0xf0eed2['off'](),this['_evtSetMes'+'hes']=_0x1d3c3d['on']('set:meshes',this['_onSetMesh'+'es'],this),_0x1d3c3d['meshes']&&this['_onSetMesh'+'es'](_0x1d3c3d['meshes']);}}['_onSetMesh'+'es'](_0x464e4f){this['_cloneMesh'+'es'](_0x464e4f);}['_clearSkin'+'Instances'](){for(let _0x3ed73b=-0x25cb+0x2*-0x1ac+0x2923;_0x3ed73b<this['_meshInsta'+'nces']['length'];_0x3ed73b++){const _0xacd8c5=this['_meshInsta'+'nces'][_0x3ed73b];il['removeCach'+'edSkinInst'+'ance'](_0xacd8c5['skinInstan'+'ce']),_0xacd8c5['skinInstan'+'ce']=null;}}['_cloneSkin'+'Instances'](){if(this['_meshInsta'+'nces']['length']&&this['_rootBone']instanceof Ie)for(let _0x5774e1=0x7*-0x36+0x1*-0x659+-0x1*-0x7d3;_0x5774e1<this['_meshInsta'+'nces']['length'];_0x5774e1++){const _0x95cff5=this['_meshInsta'+'nces'][_0x5774e1],_0x536ac9=_0x95cff5['mesh'];_0x536ac9['skin']&&!_0x95cff5['skinInstan'+'ce']&&(_0x95cff5['skinInstan'+'ce']=il['createCach'+'edSkinInst'+'ance'](_0x536ac9['skin'],this['_rootBone'],this['entity']));}}['_cloneMesh'+'es'](_0x314f06){if(_0x314f06&&_0x314f06['length']){const _0x12ac86=[];for(let _0x5df4ef=0xc1a+-0x2628*0x1+0x1a0e;_0x5df4ef<_0x314f06['length'];_0x5df4ef++){const _0x5b1214=_0x314f06[_0x5df4ef],_0x55c591=this['_materialR'+'eferences'][_0x5df4ef]&&this['_materialR'+'eferences'][_0x5df4ef]['asset']&&this['_materialR'+'eferences'][_0x5df4ef]['asset']['resource'],_0xf6bad=new He(_0x5b1214,_0x55c591||this['system']['defaultMat'+'erial'],this['entity']);_0x12ac86['push'](_0xf6bad),_0x5b1214['morph']&&(_0xf6bad['morphInsta'+'nce']=new _a(_0x5b1214['morph']));}this['meshInstan'+'ces']=_0x12ac86,this['_cloneSkin'+'Instances']();}}['_onRenderA'+'ssetUnload'](){this['_type']==='asset'&&this['destroyMes'+'hInstances']();}['_onRenderA'+'ssetRemove'](){var _0x4591f4;(_0x4591f4=this['_evtSetMes'+'hes'])==null||_0x4591f4['off'](),this['_evtSetMes'+'hes']=null,this['_onRenderA'+'ssetUnload']();}['_onMateria'+'lAdded'](_0x2a2591,_0x23f332,_0x460fd2){_0x460fd2['resource']?this['_onMateria'+'lLoad'](_0x2a2591,_0x23f332,_0x460fd2):this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](_0x460fd2);}['_updateMai'+'nMaterial'](_0x49ba1e,_0x152647){_0x49ba1e===0x539*-0x1+-0x1d6e+0x22a7&&(this['material']=_0x152647);}['_onMateria'+'lLoad'](_0x1a9d0f,_0x27a21e,_0x336e23){this['_meshInsta'+'nces'][_0x1a9d0f]&&(this['_meshInsta'+'nces'][_0x1a9d0f]['material']=_0x336e23['resource']),this['_updateMai'+'nMaterial'](_0x1a9d0f,_0x336e23['resource']);}['_onMateria'+'lRemove'](_0x42cc81,_0x4044fd,_0x4ec596){this['_meshInsta'+'nces'][_0x42cc81]&&(this['_meshInsta'+'nces'][_0x42cc81]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x42cc81,this['system']['defaultMat'+'erial']);}['_onMateria'+'lUnload'](_0x4ac1ba,_0xd627c5,_0x414d54){this['_meshInsta'+'nces'][_0x4ac1ba]&&(this['_meshInsta'+'nces'][_0x4ac1ba]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x4ac1ba,this['system']['defaultMat'+'erial']);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x122cd2,_0x19919f){_0x122cd2['rootBone']&&(this['rootBone']=_0x19919f[_0x122cd2['rootBone']['getGuid']()]);}}class iO{constructor(){this['enabled']=!(-0x30f*-0x1+0x538+-0x847);}}const du=['enabled'],Ur=['material','meshInstan'+'ces','asset','materialAs'+'sets','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','renderStyl'+'e','type','layers','isStatic','batchGroup'+'Id','rootBone'];class rO extends ct{constructor(_0x35e7b7){super(_0x35e7b7),this['id']='render',this['ComponentT'+'ype']=Ev,this['DataType']=iO,this['schema']=du,this['defaultMat'+'erial']=$n(_0x35e7b7['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x1ec8bb,_0x20e8e4,_0xa04bca){(_0x20e8e4['batchGroup'+'Id']===null||_0x20e8e4['batchGroup'+'Id']===void(-0x26b3+0x1*-0x2325+0x1*0x49d8))&&(_0x20e8e4['batchGroup'+'Id']=-(0xadf+-0x129d+0x7bf)),_0x20e8e4['layers']&&_0x20e8e4['layers']['length']&&(_0x20e8e4['layers']=_0x20e8e4['layers']['slice'](0xe06+0xd*0x1cf+-0x2589));for(let _0x570b75=-0x141c+0xee7*-0x2+0x18f5*0x2;_0x570b75<Ur['length'];_0x570b75++)_0x20e8e4['hasOwnProp'+'erty'](Ur[_0x570b75])&&(_0x1ec8bb[Ur[_0x570b75]]=_0x20e8e4[Ur[_0x570b75]]);_0x20e8e4['aabbCenter']&&_0x20e8e4['aabbHalfEx'+'tents']&&(_0x1ec8bb['customAabb']=new De(new D(_0x20e8e4['aabbCenter']),new D(_0x20e8e4['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x1ec8bb,_0x20e8e4,du);}['cloneCompo'+'nent'](_0x1e4335,_0x1a148b){const _0x3546bc={};for(let _0x3a8d73=0x223+0x1e55+-0x2078;_0x3a8d73<Ur['length'];_0x3a8d73++)_0x3546bc[Ur[_0x3a8d73]]=_0x1e4335['render'][Ur[_0x3a8d73]];_0x3546bc['enabled']=_0x1e4335['render']['enabled'],delete _0x3546bc['meshInstan'+'ces'];const _0x55f919=this['addCompone'+'nt'](_0x1a148b,_0x3546bc),_0x357ea6=_0x1e4335['render']['meshInstan'+'ces'],_0x211c73=_0x357ea6['map'](_0xa04fa6=>_0xa04fa6['mesh']);_0x55f919['_onSetMesh'+'es'](_0x211c73);for(let _0x4d600a=0x1cff+0x503*-0x5+0x150*-0x3;_0x4d600a<_0x357ea6['length'];_0x4d600a++)_0x55f919['meshInstan'+'ces'][_0x4d600a]['material']=_0x357ea6[_0x4d600a]['material'];return _0x1e4335['render']['customAabb']&&(_0x55f919['customAabb']=_0x1e4335['render']['customAabb']['clone']()),_0x55f919;}['onRemove'](_0x5803d9,_0x20e250){_0x20e250['onRemove']();}}we['_buildAcce'+'ssors'](Ev['prototype'],du);class sf{constructor(_0x4001ca,_0x3bb45a){h(this,'_construct'+'or'),h(this,'_pool',[]),h(this,'_count',0x188d+-0x14d3+0x3ba*-0x1),(this['_construct'+'or']=_0x4001ca,this['_resize'](_0x3bb45a));}['_resize'](_0x514eb5){if(_0x514eb5>this['_pool']['length']){for(let _0x4e37a8=this['_pool']['length'];_0x4e37a8<_0x514eb5;_0x4e37a8++)this['_pool'][_0x4e37a8]=new this['_construct'+'or']();}}['allocate'](){return this['_count']>=this['_pool']['length']&&this['_resize'](this['_pool']['length']*(-0x82e+-0x1*0xe5e+0x1*0x168e)),this['_pool'][this['_count']++];}['freeAll'](){this['_count']=0x1*0x1fd9+-0x3a+-0x1*0x1f9f;}}let cs,Re,Us,$a;const aO=new le(),nO=new le(),pc=new D();class bs extends we{constructor(){super(...arguments),h(this,'_angularDa'+'mping',0x475*-0x1+-0x244b+-0xa3*-0x40),h(this,'_angularFa'+'ctor',new D(-0x52*-0x17+-0x1e93+-0x1736*-0x1,-0xbe*0x31+0x457+0x2008,0x1*-0x1333+0x94e*0x1+0x9e6)),h(this,'_angularVe'+'locity',new D()),h(this,'_body',null),h(this,'_friction',-0xfde+-0x255e+0x353c+0.5),h(this,'_group',ug),h(this,'_linearDam'+'ping',0x196*0x15+-0x19ca+-0x4a*0x1a),h(this,'_linearFac'+'tor',new D(0x10cb+-0x4*0x145+-0x5db*0x2,-0x179*0x6+-0xb12+-0x6a3*-0x3,-0x6*0x544+0x1fec+-0x53)),h(this,'_linearVel'+'ocity',new D()),h(this,'_mask',iu),h(this,'_mass',0x1972+-0x107*-0x21+-0x2*0x1dac),h(this,'_restituti'+'on',0x2*-0x883+0x6*-0x3d5+0x2804),h(this,'_rollingFr'+'iction',0x1f14+-0x4ca+-0x542*0x5),h(this,'_simulatio'+'nEnabled',!(-0x1b67+0x2b*-0x37+0x24a5*0x1)),h(this,'_type',fo);}static['onLibraryL'+'oaded'](){typeof Ammo<'u'&&(cs=new Ammo['btTransfor'+'m'](),Re=new Ammo['btVector3'](),Us=new Ammo['btVector3'](),$a=new Ammo['btQuaterni'+'on']());}static['onAppDestr'+'oy'](){Ammo['destroy'](cs),Ammo['destroy'](Re),Ammo['destroy'](Us),Ammo['destroy']($a),cs=null,Re=null,Us=null,$a=null;}set['angularDam'+'ping'](_0x2ca5d5){this['_angularDa'+'mping']!==_0x2ca5d5&&(this['_angularDa'+'mping']=_0x2ca5d5,this['_body']&&this['_body']['setDamping'](this['_linearDam'+'ping'],_0x2ca5d5));}get['angularDam'+'ping'](){return this['_angularDa'+'mping'];}set['angularFac'+'tor'](_0xc0857c){this['_angularFa'+'ctor']['equals'](_0xc0857c)||(this['_angularFa'+'ctor']['copy'](_0xc0857c),this['_body']&&this['_type']===Ns&&(Re['setValue'](_0xc0857c['x'],_0xc0857c['y'],_0xc0857c['z']),this['_body']['setAngular'+'Factor'](Re)));}get['angularFac'+'tor'](){return this['_angularFa'+'ctor'];}set['angularVel'+'ocity'](_0x136ce6){this['_body']&&this['_type']===Ns&&(this['_body']['activate'](),Re['setValue'](_0x136ce6['x'],_0x136ce6['y'],_0x136ce6['z']),this['_body']['setAngular'+'Velocity'](Re),this['_angularVe'+'locity']['copy'](_0x136ce6));}get['angularVel'+'ocity'](){if(this['_body']&&this['_type']===Ns){const _0x5b36ae=this['_body']['getAngular'+'Velocity']();this['_angularVe'+'locity']['set'](_0x5b36ae['x'](),_0x5b36ae['y'](),_0x5b36ae['z']());}return this['_angularVe'+'locity'];}set['body'](_0x24682e){this['_body']!==_0x24682e&&(this['_body']=_0x24682e,_0x24682e&&this['_simulatio'+'nEnabled']&&_0x24682e['activate']());}get['body'](){return this['_body'];}set['friction'](_0x53ec12){this['_friction']!==_0x53ec12&&(this['_friction']=_0x53ec12,this['_body']&&this['_body']['setFrictio'+'n'](_0x53ec12));}get['friction'](){return this['_friction'];}set['group'](_0x21b915){this['_group']!==_0x21b915&&(this['_group']=_0x21b915,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['group'](){return this['_group'];}set['linearDamp'+'ing'](_0x46f8a8){this['_linearDam'+'ping']!==_0x46f8a8&&(this['_linearDam'+'ping']=_0x46f8a8,this['_body']&&this['_body']['setDamping'](_0x46f8a8,this['_angularDa'+'mping']));}get['linearDamp'+'ing'](){return this['_linearDam'+'ping'];}set['linearFact'+'or'](_0x543a28){this['_linearFac'+'tor']['equals'](_0x543a28)||(this['_linearFac'+'tor']['copy'](_0x543a28),this['_body']&&this['_type']===Ns&&(Re['setValue'](_0x543a28['x'],_0x543a28['y'],_0x543a28['z']),this['_body']['setLinearF'+'actor'](Re)));}get['linearFact'+'or'](){return this['_linearFac'+'tor'];}set['linearVelo'+'city'](_0x47e3c6){this['_body']&&this['_type']===Ns&&(this['_body']['activate'](),Re['setValue'](_0x47e3c6['x'],_0x47e3c6['y'],_0x47e3c6['z']),this['_body']['setLinearV'+'elocity'](Re),this['_linearVel'+'ocity']['copy'](_0x47e3c6));}get['linearVelo'+'city'](){if(this['_body']&&this['_type']===Ns){const _0x1dd0f7=this['_body']['getLinearV'+'elocity']();this['_linearVel'+'ocity']['set'](_0x1dd0f7['x'](),_0x1dd0f7['y'](),_0x1dd0f7['z']());}return this['_linearVel'+'ocity'];}set['mask'](_0x1f013c){this['_mask']!==_0x1f013c&&(this['_mask']=_0x1f013c,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['mask'](){return this['_mask'];}set['mass'](_0x1c290c){if(this['_mass']!==_0x1c290c&&(this['_mass']=_0x1c290c,this['_body']&&this['_type']===Ns)){const _0x10d310=this['enabled']&&this['entity']['enabled'];_0x10d310&&this['disableSim'+'ulation'](),this['_body']['getCollisi'+'onShape']()['calculateL'+'ocalInerti'+'a'](_0x1c290c,Re),this['_body']['setMassPro'+'ps'](_0x1c290c,Re),this['_body']['updateIner'+'tiaTensor'](),_0x10d310&&this['enableSimu'+'lation']();}}get['mass'](){return this['_mass'];}set['restitutio'+'n'](_0x5bc893){this['_restituti'+'on']!==_0x5bc893&&(this['_restituti'+'on']=_0x5bc893,this['_body']&&this['_body']['setRestitu'+'tion'](_0x5bc893));}get['restitutio'+'n'](){return this['_restituti'+'on'];}set['rollingFri'+'ction'](_0x55e246){this['_rollingFr'+'iction']!==_0x55e246&&(this['_rollingFr'+'iction']=_0x55e246,this['_body']&&this['_body']['setRolling'+'Friction'](_0x55e246));}get['rollingFri'+'ction'](){return this['_rollingFr'+'iction'];}set['type'](_0x1cc0e6){if(this['_type']!==_0x1cc0e6){switch(this['_type']=_0x1cc0e6,this['disableSim'+'ulation'](),_0x1cc0e6){case Ns:this['_group']=fL,this['_mask']=mg;break;case Ua:this['_group']=uL,this['_mask']=mg;break;case fo:default:this['_group']=ug,this['_mask']=iu;break;}this['createBody']();}}get['type'](){return this['_type'];}['createBody'](){const _0x3a666a=this['entity'];let _0xbcaccd;if(_0x3a666a['collision']&&(_0xbcaccd=_0x3a666a['collision']['shape'],_0x3a666a['trigger']&&(_0x3a666a['trigger']['destroy'](),delete _0x3a666a['trigger'])),_0xbcaccd){this['_body']&&(this['system']['removeBody'](this['_body']),this['system']['destroyBod'+'y'](this['_body']),this['_body']=null);const _0x4fc025=this['_type']===Ns?this['_mass']:0x140b+0x99*-0x31+0x1a*0x5b;this['_getEntity'+'Transform'](cs);const _0x4c5daf=this['system']['createBody'](_0x4fc025,_0xbcaccd,cs);if(_0x4c5daf['setRestitu'+'tion'](this['_restituti'+'on']),_0x4c5daf['setFrictio'+'n'](this['_friction']),_0x4c5daf['setRolling'+'Friction'](this['_rollingFr'+'iction']),_0x4c5daf['setDamping'](this['_linearDam'+'ping'],this['_angularDa'+'mping']),this['_type']===Ns){const _0x9fe280=this['_linearFac'+'tor'];Re['setValue'](_0x9fe280['x'],_0x9fe280['y'],_0x9fe280['z']),_0x4c5daf['setLinearF'+'actor'](Re);const _0x52f4cd=this['_angularFa'+'ctor'];Re['setValue'](_0x52f4cd['x'],_0x52f4cd['y'],_0x52f4cd['z']),_0x4c5daf['setAngular'+'Factor'](Re);}else this['_type']===Ua&&(_0x4c5daf['setCollisi'+'onFlags'](_0x4c5daf['getCollisi'+'onFlags']()|dL),_0x4c5daf['setActivat'+'ionState'](fg));_0x4c5daf['entity']=_0x3a666a,this['body']=_0x4c5daf,this['enabled']&&_0x3a666a['enabled']&&this['enableSimu'+'lation']();}}['isActive'](){return this['_body']?this['_body']['isActive']():!(-0x1bf1+-0xa*0x335+0x3c04);}['activate'](){this['_body']&&this['_body']['activate']();}['enableSimu'+'lation'](){const _0x28585b=this['entity'];if(_0x28585b['collision']&&_0x28585b['collision']['enabled']&&!this['_simulatio'+'nEnabled']){const _0x2ed6d4=this['_body'];if(_0x2ed6d4){switch(this['system']['addBody'](_0x2ed6d4,this['_group'],this['_mask']),this['_type']){case Ns:this['system']['_dynamic']['push'](this),_0x2ed6d4['forceActiv'+'ationState'](su),this['syncEntity'+'ToBody']();break;case Ua:this['system']['_kinematic']['push'](this),_0x2ed6d4['forceActiv'+'ationState'](fg);break;case fo:_0x2ed6d4['forceActiv'+'ationState'](su),this['syncEntity'+'ToBody']();break;}_0x28585b['collision']['type']==='compound'&&this['system']['_compounds']['push'](_0x28585b['collision']),_0x2ed6d4['activate'](),this['_simulatio'+'nEnabled']=!(0x1*-0x1e3f+-0x4b9*0x5+0x35dc);}}}['disableSim'+'ulation'](){const _0x40d3eb=this['_body'];if(_0x40d3eb&&this['_simulatio'+'nEnabled']){const _0x362dc3=this['system'];let _0x3bf7bf=_0x362dc3['_compounds']['indexOf'](this['entity']['collision']);_0x3bf7bf>-(0x361*-0x1+-0x239e+0x2700)&&_0x362dc3['_compounds']['splice'](_0x3bf7bf,0x1bfa+0x72*0x1f+-0x29c7),_0x3bf7bf=_0x362dc3['_dynamic']['indexOf'](this),_0x3bf7bf>-(-0x1924+-0x3*0x871+0x3278)&&_0x362dc3['_dynamic']['splice'](_0x3bf7bf,-0x157*0x1+0x11dd+-0x1*0x1085),_0x3bf7bf=_0x362dc3['_kinematic']['indexOf'](this),_0x3bf7bf>-(0x14e9*0x1+0x1c77+-0x315f)&&_0x362dc3['_kinematic']['splice'](_0x3bf7bf,-0x940+-0x1*0x15bf+-0xf80*-0x2),_0x362dc3['removeBody'](_0x40d3eb),_0x40d3eb['forceActiv'+'ationState'](uv),this['_simulatio'+'nEnabled']=!(-0x1de1+0x1cc7+0x1*0x11b);}}['applyForce'](_0x299c37,_0x4bd31d,_0x41a901,_0x229368,_0x5b6bfd,_0x382782){const _0x3f948f=this['_body'];_0x3f948f&&(_0x3f948f['activate'](),_0x299c37 instanceof D?Re['setValue'](_0x299c37['x'],_0x299c37['y'],_0x299c37['z']):Re['setValue'](_0x299c37,_0x4bd31d,_0x41a901),_0x4bd31d instanceof D?Us['setValue'](_0x4bd31d['x'],_0x4bd31d['y'],_0x4bd31d['z']):_0x229368!==void(0x2373+-0x13c+-0x2237)?Us['setValue'](_0x229368,_0x5b6bfd,_0x382782):Us['setValue'](-0x555*0x3+-0x254b+0x354a,-0x19b6+-0x12f7*-0x2+0x17*-0x88,0x133*0x16+0x9e9*0x2+0x2*-0x171a),_0x3f948f['applyForce'](Re,Us));}['applyTorqu'+'e'](_0x9a34ab,_0x5f4e59,_0x1b23fc){const _0x362a32=this['_body'];_0x362a32&&(_0x362a32['activate'](),_0x9a34ab instanceof D?Re['setValue'](_0x9a34ab['x'],_0x9a34ab['y'],_0x9a34ab['z']):Re['setValue'](_0x9a34ab,_0x5f4e59,_0x1b23fc),_0x362a32['applyTorqu'+'e'](Re));}['applyImpul'+'se'](_0x156bee,_0x57819e,_0x13374a,_0x2b4762,_0x209f0a,_0x5d1fea){const _0x5e8093=this['_body'];_0x5e8093&&(_0x5e8093['activate'](),_0x156bee instanceof D?Re['setValue'](_0x156bee['x'],_0x156bee['y'],_0x156bee['z']):Re['setValue'](_0x156bee,_0x57819e,_0x13374a),_0x57819e instanceof D?Us['setValue'](_0x57819e['x'],_0x57819e['y'],_0x57819e['z']):_0x2b4762!==void(-0x62c*0x1+-0x149b+0x1ac7)?Us['setValue'](_0x2b4762,_0x209f0a,_0x5d1fea):Us['setValue'](-0x154+-0x1610+0x1764,-0xed5+-0x1*-0x21cb+-0x12f6,-0x81a+0x1*-0x2539+-0x2d53*-0x1),_0x5e8093['applyImpul'+'se'](Re,Us));}['applyTorqu'+'eImpulse'](_0x50443b,_0x78fee2,_0x189c5b){const _0x3b5d2d=this['_body'];_0x3b5d2d&&(_0x3b5d2d['activate'](),_0x50443b instanceof D?Re['setValue'](_0x50443b['x'],_0x50443b['y'],_0x50443b['z']):Re['setValue'](_0x50443b,_0x78fee2,_0x189c5b),_0x3b5d2d['applyTorqu'+'eImpulse'](Re));}['isStatic'](){return this['_type']===fo;}['isStaticOr'+'Kinematic'](){return this['_type']===fo||this['_type']===Ua;}['isKinemati'+'c'](){return this['_type']===Ua;}['_getEntity'+'Transform'](_0x1b5d0e){const _0xf43e51=this['entity'],_0x4fae41=_0xf43e51['collision'];if(_0x4fae41){const _0x5a3fce=_0x4fae41['getShapePo'+'sition'](),_0x14b224=_0x4fae41['getShapeRo'+'tation']();Re['setValue'](_0x5a3fce['x'],_0x5a3fce['y'],_0x5a3fce['z']),$a['setValue'](_0x14b224['x'],_0x14b224['y'],_0x14b224['z'],_0x14b224['w']);}else{const _0x599670=_0xf43e51['getPositio'+'n'](),_0x237355=_0xf43e51['getRotatio'+'n']();Re['setValue'](_0x599670['x'],_0x599670['y'],_0x599670['z']),$a['setValue'](_0x237355['x'],_0x237355['y'],_0x237355['z'],_0x237355['w']);}_0x1b5d0e['setOrigin'](Re),_0x1b5d0e['setRotatio'+'n']($a);}['syncEntity'+'ToBody'](){const _0xb1990a=this['_body'];if(_0xb1990a){if(this['_getEntity'+'Transform'](cs),_0xb1990a['setWorldTr'+'ansform'](cs),this['_type']===Ua){const _0x6552e2=_0xb1990a['getMotionS'+'tate']();_0x6552e2&&_0x6552e2['setWorldTr'+'ansform'](cs);}_0xb1990a['activate']();}}['_updateDyn'+'amic'](){const _0xa733cb=this['_body'];if(_0xa733cb['isActive']()){const _0x44bc16=_0xa733cb['getMotionS'+'tate']();if(_0x44bc16){const _0x3be138=this['entity'];_0x44bc16['getWorldTr'+'ansform'](cs);const _0x21f59f=cs['getOrigin'](),_0x3c2007=cs['getRotatio'+'n'](),_0x1dc576=_0x3be138['collision'];if(_0x1dc576&&_0x1dc576['_hasOffset']){const _0x4d37a6=_0x1dc576['data']['linearOffs'+'et'],_0xd135ee=_0x1dc576['data']['angularOff'+'set'],_0x2f4624=nO['copy'](_0xd135ee)['invert'](),_0x28e312=aO['set'](_0x3c2007['x'](),_0x3c2007['y'](),_0x3c2007['z'](),_0x3c2007['w']())['mul'](_0x2f4624);_0x28e312['transformV'+'ector'](_0x4d37a6,pc),_0x3be138['setPositio'+'n'](_0x21f59f['x']()-pc['x'],_0x21f59f['y']()-pc['y'],_0x21f59f['z']()-pc['z']),_0x3be138['setRotatio'+'n'](_0x28e312);}else _0x3be138['setPositio'+'n'](_0x21f59f['x'](),_0x21f59f['y'](),_0x21f59f['z']()),_0x3be138['setRotatio'+'n'](_0x3c2007['x'](),_0x3c2007['y'](),_0x3c2007['z'](),_0x3c2007['w']());}}}['_updateKin'+'ematic'](){const _0x33b2e7=this['_body']['getMotionS'+'tate']();_0x33b2e7&&(this['_getEntity'+'Transform'](cs),_0x33b2e7['setWorldTr'+'ansform'](cs));}['teleport'](_0x54f72e,_0xa5aee9,_0x440fe9,_0x2cdbff,_0x6c88a6,_0x5a41ee){_0x54f72e instanceof D?this['entity']['setPositio'+'n'](_0x54f72e):this['entity']['setPositio'+'n'](_0x54f72e,_0xa5aee9,_0x440fe9),_0xa5aee9 instanceof le?this['entity']['setRotatio'+'n'](_0xa5aee9):_0xa5aee9 instanceof D?this['entity']['setEulerAn'+'gles'](_0xa5aee9):_0x2cdbff!==void(0x1e81+0x15bd*0x1+-0x343e)&&this['entity']['setEulerAn'+'gles'](_0x2cdbff,_0x6c88a6,_0x5a41ee),this['syncEntity'+'ToBody']();}['onEnable'](){this['_body']||this['createBody'](),this['enableSimu'+'lation']();}['onDisable'](){this['disableSim'+'ulation']();}}h(bs,'EVENT_CONT'+'ACT','contact'),h(bs,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(bs,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(bs,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(bs,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve'),h(bs,'order',-(0xef7+-0x4*-0x7ca+-0x2*0x170f));class oO{constructor(){this['enabled']=!(0x165e+-0x907*0x1+-0xd57);}}let Mi,Di;class bg{constructor(_0x2bbc3b,_0x43ffe1,_0x3f89b6,_0x2fa502){h(this,'entity'),h(this,'point'),h(this,'normal'),h(this,'hitFractio'+'n'),(this['entity']=_0x2bbc3b,this['point']=_0x43ffe1,this['normal']=_0x3f89b6,this['hitFractio'+'n']=_0x2fa502);}}class lO{constructor(_0x2507a3,_0x527be3,_0x2f63f2){h(this,'a'),h(this,'b'),h(this,'impulse'),h(this,'localPoint'+'A'),h(this,'localPoint'+'B'),h(this,'pointA'),h(this,'pointB'),h(this,'normal'),arguments['length']!==-0x364+-0x660+0x2*0x4e2?(this['a']=_0x2507a3,this['b']=_0x527be3,this['impulse']=_0x2f63f2['impulse'],this['localPoint'+'A']=_0x2f63f2['localPoint'],this['localPoint'+'B']=_0x2f63f2['localPoint'+'Other'],this['pointA']=_0x2f63f2['point'],this['pointB']=_0x2f63f2['pointOther'],this['normal']=_0x2f63f2['normal']):(this['a']=null,this['b']=null,this['impulse']=0x169a+0x1862+-0x4*0xbbf,this['localPoint'+'A']=new D(),this['localPoint'+'B']=new D(),this['pointA']=new D(),this['pointB']=new D(),this['normal']=new D());}}class cO{constructor(_0x439aad=new D(),_0x3de308=new D(),_0x52d2e3=new D(),_0x3dc516=new D(),_0x28ac69=new D(),_0x23fb1b=-0x1e73+-0xd34+0x2ba7){h(this,'localPoint'),h(this,'localPoint'+'Other'),h(this,'point'),h(this,'pointOther'),h(this,'normal'),h(this,'impulse'),(this['localPoint']=_0x439aad,this['localPoint'+'Other']=_0x3de308,this['point']=_0x52d2e3,this['pointOther']=_0x3dc516,this['normal']=_0x28ac69,this['impulse']=_0x23fb1b);}}class hO{constructor(_0x4769b1,_0x1d3a50){h(this,'other'),h(this,'contacts'),(this['other']=_0x4769b1,this['contacts']=_0x1d3a50);}}const bv=['enabled'];class Kp extends ct{constructor(_0x125f0a){super(_0x125f0a),h(this,'maxSubStep'+'s',0x39*-0x17+-0xe82+-0x5*-0x3ef),h(this,'fixedTimeS'+'tep',(-0x1*0x136d+0x243a+-0x2*0x866)/(0xdc7+-0x211a*-0x1+-0x2ea5)),h(this,'gravity',new D(0x1*0x18c4+0x1f6f+0x1*-0x3833,-(0x4*0x522+-0x1*0x2146+0xcc7+0.8100000000000005),0x1*-0x16f6+0x74f*-0x4+-0x2*-0x1a19)),h(this,'_gravityFl'+'oat32',new Float32Array(0xca*-0x4+0x1*-0xe67+-0x2*-0x8c9)),h(this,'_dynamic',[]),h(this,'_kinematic',[]),h(this,'_triggers',[]),h(this,'_compounds',[]),(this['id']='rigidbody',this['_stats']=_0x125f0a['stats']['frame'],this['ComponentT'+'ype']=bs,this['DataType']=oO,this['contactPoi'+'ntPool']=null,this['contactRes'+'ultPool']=null,this['singleCont'+'actResultP'+'ool']=null,this['schema']=bv,this['collisions']={},this['frameColli'+'sions']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this));}['onLibraryL'+'oaded'](){if(typeof Ammo<'u'){if(this['collisionC'+'onfigurati'+'on']=new Ammo['btDefaultC'+'ollisionCo'+'nfiguratio'+'n'](),this['dispatcher']=new Ammo['btCollisio'+'nDispatche'+'r'](this['collisionC'+'onfigurati'+'on']),this['overlappin'+'gPairCache']=new Ammo['btDbvtBroa'+'dphase'](),this['solver']=new Ammo['btSequenti'+'alImpulseC'+'onstraintS'+'olver'](),this['dynamicsWo'+'rld']=new Ammo['btDiscrete'+'DynamicsWo'+'rld'](this['dispatcher'],this['overlappin'+'gPairCache'],this['solver'],this['collisionC'+'onfigurati'+'on']),this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']){const _0x445963=Ammo['addFunctio'+'n'](this['_checkForC'+'ollisions']['bind'](this),'vif');this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack'](_0x445963);}else w['warn']('WARNING:\x20T'+'his\x20versio'+'n\x20of\x20ammo.'+'js\x20can\x20pot'+'entially\x20f'+'ail\x20to\x20rep'+'ort\x20contac'+'ts.\x20Please'+'\x20update\x20it'+'\x20to\x20the\x20la'+'test\x20versi'+'on.');Mi=new Ammo['btVector3'](),Di=new Ammo['btVector3'](),bs['onLibraryL'+'oaded'](),this['contactPoi'+'ntPool']=new sf(cO,-0x34*-0x7+0x17c9+-0xc9a*0x2),this['contactRes'+'ultPool']=new sf(hO,-0x7*-0x466+0x1*-0x8+0x1*-0x1ec1),this['singleCont'+'actResultP'+'ool']=new sf(lO,0x1*-0x2564+0x44*-0x7e+0x3*0x179f),this['app']['systems']['on']('update',this['onUpdate'],this);}else this['app']['systems']['off']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x194eb6,_0x58f79d,_0x40e0b5){const _0x4268c3=['mass','linearDamp'+'ing','angularDam'+'ping','linearFact'+'or','angularFac'+'tor','friction','rollingFri'+'ction','restitutio'+'n','type','group','mask'];for(const _0x200d0b of _0x4268c3)if(_0x58f79d['hasOwnProp'+'erty'](_0x200d0b)){const _0x373d3b=_0x58f79d[_0x200d0b];Array['isArray'](_0x373d3b)?_0x194eb6[_0x200d0b]=new D(_0x373d3b[-0x1cc6+-0x1e7c+0x3b42],_0x373d3b[-0x1*0x9eb+-0x10*0x39+-0xd7c*-0x1],_0x373d3b[0xac8+-0x149e+0x9d8]):_0x194eb6[_0x200d0b]=_0x373d3b;}super['initialize'+'ComponentD'+'ata'](_0x194eb6,_0x58f79d,['enabled']);}['cloneCompo'+'nent'](_0x169d18,_0x1f0709){const _0x3a557c=_0x169d18['rigidbody'],_0xa7cdc0={'enabled':_0x3a557c['enabled'],'mass':_0x3a557c['mass'],'linearDamping':_0x3a557c['linearDamp'+'ing'],'angularDamping':_0x3a557c['angularDam'+'ping'],'linearFactor':[_0x3a557c['linearFact'+'or']['x'],_0x3a557c['linearFact'+'or']['y'],_0x3a557c['linearFact'+'or']['z']],'angularFactor':[_0x3a557c['angularFac'+'tor']['x'],_0x3a557c['angularFac'+'tor']['y'],_0x3a557c['angularFac'+'tor']['z']],'friction':_0x3a557c['friction'],'rollingFriction':_0x3a557c['rollingFri'+'ction'],'restitution':_0x3a557c['restitutio'+'n'],'type':_0x3a557c['type'],'group':_0x3a557c['group'],'mask':_0x3a557c['mask']};return this['addCompone'+'nt'](_0x1f0709,_0xa7cdc0);}['onBeforeRe'+'move'](_0x1b922a,_0x1dfe4f){_0x1dfe4f['enabled']&&(_0x1dfe4f['enabled']=!(0x1f36+-0x1*0x23ff+0x4ca)),_0x1dfe4f['body']&&(this['destroyBod'+'y'](_0x1dfe4f['body']),_0x1dfe4f['body']=null);}['addBody'](_0x3e33fb,_0x253c3c,_0x5911a8){_0x253c3c!==void(-0x171a+-0x3*-0x4af+0x90d)&&_0x5911a8!==void(0x102d+-0x17f4+0x7c7)?this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x3e33fb,_0x253c3c,_0x5911a8):this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0x3e33fb);}['removeBody'](_0x3c0be4){this['dynamicsWo'+'rld']['removeRigi'+'dBody'](_0x3c0be4);}['createBody'](_0x13241f,_0x5f2f38,_0x5ae05f){const _0x13e32e=new Ammo['btVector3'](0x1ce6+-0xd5a+0x31c*-0x5,-0x1*-0x149c+0x5*0x1b+-0x1523,-0x1145+0x16c6+-0x581);_0x13241f!==-0xa8d+0xe94+0x1*-0x407&&_0x5f2f38['calculateL'+'ocalInerti'+'a'](_0x13241f,_0x13e32e);const _0x305963=new Ammo['btDefaultM'+'otionState'](_0x5ae05f),_0x361c54=new Ammo['btRigidBod'+'yConstruct'+'ionInfo'](_0x13241f,_0x305963,_0x5f2f38,_0x13e32e),_0x207bac=new Ammo['btRigidBod'+'y'](_0x361c54);return Ammo['destroy'](_0x361c54),Ammo['destroy'](_0x13e32e),_0x207bac;}['destroyBod'+'y'](_0x52ddfe){const _0x1d789b=_0x52ddfe['getMotionS'+'tate']();_0x1d789b&&Ammo['destroy'](_0x1d789b),Ammo['destroy'](_0x52ddfe);}['raycastFir'+'st'](_0x15a6dc,_0x33b46a,_0x3599af={}){if(_0x3599af['filterTags']||_0x3599af['filterCall'+'back'])return _0x3599af['sort']=!(0xa98+-0x2090+0x4a*0x4c),this['raycastAll'](_0x15a6dc,_0x33b46a,_0x3599af)[0xd7f+-0xfc3+-0x91*-0x4]||null;let _0x8489ef=null;Mi['setValue'](_0x15a6dc['x'],_0x15a6dc['y'],_0x15a6dc['z']),Di['setValue'](_0x33b46a['x'],_0x33b46a['y'],_0x33b46a['z']);const _0x2efd18=new Ammo['ClosestRay'+'ResultCall'+'back'](Mi,Di);if(typeof _0x3599af['filterColl'+'isionGroup']=='number'&&_0x2efd18['set_m_coll'+'isionFilte'+'rGroup'](_0x3599af['filterColl'+'isionGroup']),typeof _0x3599af['filterColl'+'isionMask']=='number'&&_0x2efd18['set_m_coll'+'isionFilte'+'rMask'](_0x3599af['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](Mi,Di,_0x2efd18),_0x2efd18['hasHit']()){const _0x89f71e=_0x2efd18['get_m_coll'+'isionObjec'+'t'](),_0x40f328=Ammo['castObject'](_0x89f71e,Ammo['btRigidBod'+'y']);if(_0x40f328){const _0xd2c70a=_0x2efd18['get_m_hitP'+'ointWorld'](),_0x1324a1=_0x2efd18['get_m_hitN'+'ormalWorld']();_0x8489ef=new bg(_0x40f328['entity'],new D(_0xd2c70a['x'](),_0xd2c70a['y'](),_0xd2c70a['z']()),new D(_0x1324a1['x'](),_0x1324a1['y'](),_0x1324a1['z']()),_0x2efd18['get_m_clos'+'estHitFrac'+'tion']());}}return Ammo['destroy'](_0x2efd18),_0x8489ef;}['raycastAll'](_0x40b7fe,_0x2ab495,_0x3836e2={}){w['assert'](Ammo['AllHitsRay'+'ResultCall'+'back'],'pc.RigidBo'+'dyComponen'+'tSystem#ra'+'ycastAll:\x20'+'Your\x20versi'+'on\x20of\x20ammo'+'.js\x20does\x20n'+'ot\x20expose\x20'+'Ammo.AllHi'+'tsRayResul'+'tCallback.'+'\x20Update\x20it'+'\x20to\x20latest'+'.');const _0x4c4971=[];Mi['setValue'](_0x40b7fe['x'],_0x40b7fe['y'],_0x40b7fe['z']),Di['setValue'](_0x2ab495['x'],_0x2ab495['y'],_0x2ab495['z']);const _0x208a21=new Ammo['AllHitsRay'+'ResultCall'+'back'](Mi,Di);if(typeof _0x3836e2['filterColl'+'isionGroup']=='number'&&_0x208a21['set_m_coll'+'isionFilte'+'rGroup'](_0x3836e2['filterColl'+'isionGroup']),typeof _0x3836e2['filterColl'+'isionMask']=='number'&&_0x208a21['set_m_coll'+'isionFilte'+'rMask'](_0x3836e2['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](Mi,Di,_0x208a21),_0x208a21['hasHit']()){const _0x1942de=_0x208a21['get_m_coll'+'isionObjec'+'ts'](),_0x81db72=_0x208a21['get_m_hitP'+'ointWorld'](),_0x309c68=_0x208a21['get_m_hitN'+'ormalWorld'](),_0x55e73e=_0x208a21['get_m_hitF'+'ractions'](),_0x25801e=_0x1942de['size']();for(let _0x88a0d5=-0x3*-0xc69+-0x1822+-0xd19;_0x88a0d5<_0x25801e;_0x88a0d5++){const _0x37e89b=Ammo['castObject'](_0x1942de['at'](_0x88a0d5),Ammo['btRigidBod'+'y']);if(_0x37e89b&&_0x37e89b['entity']){if(_0x3836e2['filterTags']&&!_0x37e89b['entity']['tags']['has'](..._0x3836e2['filterTags'])||_0x3836e2['filterCall'+'back']&&!_0x3836e2['filterCall'+'back'](_0x37e89b['entity']))continue;const _0x1899f1=_0x81db72['at'](_0x88a0d5),_0x6da03c=_0x309c68['at'](_0x88a0d5),_0x4ba401=new bg(_0x37e89b['entity'],new D(_0x1899f1['x'](),_0x1899f1['y'](),_0x1899f1['z']()),new D(_0x6da03c['x'](),_0x6da03c['y'](),_0x6da03c['z']()),_0x55e73e['at'](_0x88a0d5));_0x4c4971['push'](_0x4ba401);}}_0x3836e2['sort']&&_0x4c4971['sort']((_0x137b97,_0x6c370)=>_0x137b97['hitFractio'+'n']-_0x6c370['hitFractio'+'n']);}return Ammo['destroy'](_0x208a21),_0x4c4971;}['_storeColl'+'ision'](_0x445a2a,_0x1a0a3b){let _0x43ef7a=!(-0x1934+-0x4c1*-0x2+-0x1*-0xfb3);const _0x38496e=_0x445a2a['getGuid']();return this['collisions'][_0x38496e]=this['collisions'][_0x38496e]||{'others':[],'entity':_0x445a2a},this['collisions'][_0x38496e]['others']['indexOf'](_0x1a0a3b)<0x14e*-0x5+-0x21bc+0x2842&&(this['collisions'][_0x38496e]['others']['push'](_0x1a0a3b),_0x43ef7a=!(0x776*-0x2+0xb*-0x138+0xe2a*0x2)),this['frameColli'+'sions'][_0x38496e]=this['frameColli'+'sions'][_0x38496e]||{'others':[],'entity':_0x445a2a},this['frameColli'+'sions'][_0x38496e]['others']['push'](_0x1a0a3b),_0x43ef7a;}['_createCon'+'tactPointF'+'romAmmo'](_0x244044){const _0x243352=_0x244044['get_m_loca'+'lPointA'](),_0x289c9a=_0x244044['get_m_loca'+'lPointB'](),_0x53a836=_0x244044['getPositio'+'nWorldOnA'](),_0x537d98=_0x244044['getPositio'+'nWorldOnB'](),_0x16638a=_0x244044['get_m_norm'+'alWorldOnB'](),_0x1493bf=this['contactPoi'+'ntPool']['allocate']();return _0x1493bf['localPoint']['set'](_0x243352['x'](),_0x243352['y'](),_0x243352['z']()),_0x1493bf['localPoint'+'Other']['set'](_0x289c9a['x'](),_0x289c9a['y'](),_0x289c9a['z']()),_0x1493bf['point']['set'](_0x53a836['x'](),_0x53a836['y'](),_0x53a836['z']()),_0x1493bf['pointOther']['set'](_0x537d98['x'](),_0x537d98['y'](),_0x537d98['z']()),_0x1493bf['normal']['set'](_0x16638a['x'](),_0x16638a['y'](),_0x16638a['z']()),_0x1493bf['impulse']=_0x244044['getApplied'+'Impulse'](),_0x1493bf;}['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x264857){const _0x4659d9=_0x264857['get_m_loca'+'lPointA'](),_0x3b5c9e=_0x264857['get_m_loca'+'lPointB'](),_0x125fe2=_0x264857['getPositio'+'nWorldOnA'](),_0x316246=_0x264857['getPositio'+'nWorldOnB'](),_0x2f0762=_0x264857['get_m_norm'+'alWorldOnB'](),_0x53843f=this['contactPoi'+'ntPool']['allocate']();return _0x53843f['localPoint'+'Other']['set'](_0x4659d9['x'](),_0x4659d9['y'](),_0x4659d9['z']()),_0x53843f['localPoint']['set'](_0x3b5c9e['x'](),_0x3b5c9e['y'](),_0x3b5c9e['z']()),_0x53843f['pointOther']['set'](_0x125fe2['x'](),_0x125fe2['y'](),_0x125fe2['z']()),_0x53843f['point']['set'](_0x316246['x'](),_0x316246['y'](),_0x316246['z']()),_0x53843f['normal']['set'](_0x2f0762['x'](),_0x2f0762['y'](),_0x2f0762['z']()),_0x53843f['impulse']=_0x264857['getApplied'+'Impulse'](),_0x53843f;}['_createSin'+'gleContact'+'Result'](_0x4c1b2e,_0x3d20a6,_0x84bbb9){const _0x4527fc=this['singleCont'+'actResultP'+'ool']['allocate']();return _0x4527fc['a']=_0x4c1b2e,_0x4527fc['b']=_0x3d20a6,_0x4527fc['localPoint'+'A']=_0x84bbb9['localPoint'],_0x4527fc['localPoint'+'B']=_0x84bbb9['localPoint'+'Other'],_0x4527fc['pointA']=_0x84bbb9['point'],_0x4527fc['pointB']=_0x84bbb9['pointOther'],_0x4527fc['normal']=_0x84bbb9['normal'],_0x4527fc['impulse']=_0x84bbb9['impulse'],_0x4527fc;}['_createCon'+'tactResult'](_0xd71ab7,_0x209d72){const _0x4e4db9=this['contactRes'+'ultPool']['allocate']();return _0x4e4db9['other']=_0xd71ab7,_0x4e4db9['contacts']=_0x209d72,_0x4e4db9;}['_cleanOldC'+'ollisions'](){for(const _0x4ea9e9 in this['collisions'])if(this['collisions']['hasOwnProp'+'erty'](_0x4ea9e9)){const _0x4f38d8=this['frameColli'+'sions'][_0x4ea9e9],_0x4c9337=this['collisions'][_0x4ea9e9],_0x11d0d8=_0x4c9337['entity'],_0x32a0aa=_0x11d0d8['collision'],_0x5f2ce5=_0x11d0d8['rigidbody'],_0x415f34=_0x4c9337['others'];let _0x1d42d0=_0x415f34['length'];for(;_0x1d42d0--;){const _0x2bab89=_0x415f34[_0x1d42d0];(!_0x4f38d8||_0x4f38d8['others']['indexOf'](_0x2bab89)<-0x1b72+0x15f2+0x580)&&(_0x415f34['splice'](_0x1d42d0,-0x1*0xaab+0x167*-0x8+-0x3a6*-0x6),_0x11d0d8['trigger']?(_0x32a0aa&&_0x32a0aa['fire']('triggerlea'+'ve',_0x2bab89),_0x2bab89['rigidbody']&&_0x2bab89['rigidbody']['fire']('triggerlea'+'ve',_0x11d0d8)):_0x2bab89['trigger']||(_0x5f2ce5&&_0x5f2ce5['fire']('collisione'+'nd',_0x2bab89),_0x32a0aa&&_0x32a0aa['fire']('collisione'+'nd',_0x2bab89)));}_0x415f34['length']===0x1*-0x1139+0xf47*0x1+-0x1*-0x1f2&&delete this['collisions'][_0x4ea9e9];}}['_hasContac'+'tEvent'](_0x585a40){const _0x57b008=_0x585a40['collision'];if(_0x57b008&&(_0x57b008['hasEvent']('collisions'+'tart')||_0x57b008['hasEvent']('collisione'+'nd')||_0x57b008['hasEvent']('contact')))return!(0x35*-0x6b+-0x1c6b+-0x2*-0x1949);const _0x1698d7=_0x585a40['rigidbody'];return _0x1698d7&&(_0x1698d7['hasEvent']('collisions'+'tart')||_0x1698d7['hasEvent']('collisione'+'nd')||_0x1698d7['hasEvent']('contact'));}['_checkForC'+'ollisions'](_0xa26391,_0x545d7e){const _0x1c185a=Ammo['wrapPointe'+'r'](_0xa26391,Ammo['btDynamics'+'World'])['getDispatc'+'her'](),_0x57676d=_0x1c185a['getNumMani'+'folds']();this['frameColli'+'sions']={};for(let _0x5e769c=-0x689*0x3+-0x99+0x1434;_0x5e769c<_0x57676d;_0x5e769c++){const _0xd46ebe=_0x1c185a['getManifol'+'dByIndexIn'+'ternal'](_0x5e769c),_0x1d7f9e=_0xd46ebe['getBody0'](),_0x5e4842=_0xd46ebe['getBody1'](),_0x4338c4=Ammo['castObject'](_0x1d7f9e,Ammo['btRigidBod'+'y']),_0x2dd9ad=Ammo['castObject'](_0x5e4842,Ammo['btRigidBod'+'y']),_0x3fc670=_0x4338c4['entity'],_0x486d9a=_0x2dd9ad['entity'];if(!_0x3fc670||!_0x486d9a)continue;const _0x55ae9e=_0x4338c4['getCollisi'+'onFlags'](),_0x399152=_0x2dd9ad['getCollisi'+'onFlags'](),_0x2ba12a=_0xd46ebe['getNumCont'+'acts'](),_0x57eff4=[],_0x233255=[];let _0xf531a3;if(_0x2ba12a>-0x225c+-0x533*-0x5+-0x85d*-0x1){if(_0x55ae9e&go||_0x399152&go){const _0x4e424c=_0x3fc670['collision']&&(_0x3fc670['collision']['hasEvent']('triggerent'+'er')||_0x3fc670['collision']['hasEvent']('triggerlea'+'ve')),_0x14f518=_0x486d9a['collision']&&(_0x486d9a['collision']['hasEvent']('triggerent'+'er')||_0x486d9a['collision']['hasEvent']('triggerlea'+'ve')),_0x3ebe42=_0x3fc670['rigidbody']&&(_0x3fc670['rigidbody']['hasEvent']('triggerent'+'er')||_0x3fc670['rigidbody']['hasEvent']('triggerlea'+'ve')),_0x5d136d=_0x486d9a['rigidbody']&&(_0x486d9a['rigidbody']['hasEvent']('triggerent'+'er')||_0x486d9a['rigidbody']['hasEvent']('triggerlea'+'ve'));_0x4e424c&&(_0xf531a3=this['_storeColl'+'ision'](_0x3fc670,_0x486d9a),_0xf531a3&&!(_0x399152&go)&&_0x3fc670['collision']['fire']('triggerent'+'er',_0x486d9a)),_0x14f518&&(_0xf531a3=this['_storeColl'+'ision'](_0x486d9a,_0x3fc670),_0xf531a3&&!(_0x55ae9e&go)&&_0x486d9a['collision']['fire']('triggerent'+'er',_0x3fc670)),_0x3ebe42&&(_0xf531a3||(_0xf531a3=this['_storeColl'+'ision'](_0x486d9a,_0x3fc670)),_0xf531a3&&_0x3fc670['rigidbody']['fire']('triggerent'+'er',_0x486d9a)),_0x5d136d&&(_0xf531a3||(_0xf531a3=this['_storeColl'+'ision'](_0x3fc670,_0x486d9a)),_0xf531a3&&_0x486d9a['rigidbody']['fire']('triggerent'+'er',_0x3fc670));}else{const _0x55a4d0=this['_hasContac'+'tEvent'](_0x3fc670),_0x3d1b9e=this['_hasContac'+'tEvent'](_0x486d9a),_0x5b0b77=this['hasEvent']('contact');if(_0x5b0b77||_0x55a4d0||_0x3d1b9e){for(let _0x459d41=-0x1*0xe8c+0x161*0x2+0xbca;_0x459d41<_0x2ba12a;_0x459d41++){const _0x2f27d8=_0xd46ebe['getContact'+'Point'](_0x459d41),_0x2e8bf9=this['_createCon'+'tactPointF'+'romAmmo'](_0x2f27d8);if(_0x55a4d0||_0x3d1b9e){_0x57eff4['push'](_0x2e8bf9);const _0x16e8bc=this['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x2f27d8);_0x233255['push'](_0x16e8bc);}if(_0x5b0b77){const _0xd408eb=this['_createSin'+'gleContact'+'Result'](_0x3fc670,_0x486d9a,_0x2e8bf9);this['fire']('contact',_0xd408eb);}}if(_0x55a4d0){const _0x3e66f8=this['_createCon'+'tactResult'](_0x486d9a,_0x57eff4);_0xf531a3=this['_storeColl'+'ision'](_0x3fc670,_0x486d9a),_0x3fc670['collision']&&(_0x3fc670['collision']['fire']('contact',_0x3e66f8),_0xf531a3&&_0x3fc670['collision']['fire']('collisions'+'tart',_0x3e66f8)),_0x3fc670['rigidbody']&&(_0x3fc670['rigidbody']['fire']('contact',_0x3e66f8),_0xf531a3&&_0x3fc670['rigidbody']['fire']('collisions'+'tart',_0x3e66f8));}if(_0x3d1b9e){const _0x115f37=this['_createCon'+'tactResult'](_0x3fc670,_0x233255);_0xf531a3=this['_storeColl'+'ision'](_0x486d9a,_0x3fc670),_0x486d9a['collision']&&(_0x486d9a['collision']['fire']('contact',_0x115f37),_0xf531a3&&_0x486d9a['collision']['fire']('collisions'+'tart',_0x115f37)),_0x486d9a['rigidbody']&&(_0x486d9a['rigidbody']['fire']('contact',_0x115f37),_0xf531a3&&_0x486d9a['rigidbody']['fire']('collisions'+'tart',_0x115f37));}}}}}this['_cleanOldC'+'ollisions'](),this['contactPoi'+'ntPool']['freeAll'](),this['contactRes'+'ultPool']['freeAll'](),this['singleCont'+'actResultP'+'ool']['freeAll']();}['onUpdate'](_0x39da41){let _0xc26d0d,_0xa86883;this['_stats']['physicsSta'+'rt']=de(),this['_gravityFl'+'oat32'][-0x8*0x47a+0x71d*0x4+0x75c]=this['gravity']['x'],this['_gravityFl'+'oat32'][-0x10+-0x1f1b+-0x1*-0x1f2c]=this['gravity']['y'],this['_gravityFl'+'oat32'][0x25ee+-0x1*-0xb03+-0x1*0x30ef]=this['gravity']['z'];const _0x2569f1=this['dynamicsWo'+'rld']['getGravity']();(_0x2569f1['x']()!==this['_gravityFl'+'oat32'][-0x176c+0x44d*-0x2+0x2006]||_0x2569f1['y']()!==this['_gravityFl'+'oat32'][0x7b3*-0x1+-0x1684+0x1e38]||_0x2569f1['z']()!==this['_gravityFl'+'oat32'][-0x1f7b*0x1+-0x9c+0x2019])&&(_0x2569f1['setValue'](this['gravity']['x'],this['gravity']['y'],this['gravity']['z']),this['dynamicsWo'+'rld']['setGravity'](_0x2569f1));const _0x437258=this['_triggers'];for(_0xc26d0d=-0x88*-0x1f+0x9*-0x447+0x1607*0x1,_0xa86883=_0x437258['length'];_0xc26d0d<_0xa86883;_0xc26d0d++)_0x437258[_0xc26d0d]['updateTran'+'sform']();const _0x850851=this['_compounds'];for(_0xc26d0d=0x1*0x59+0x409+0xb*-0x66,_0xa86883=_0x850851['length'];_0xc26d0d<_0xa86883;_0xc26d0d++)_0x850851[_0xc26d0d]['_updateCom'+'pound']();const _0x2d9174=this['_kinematic'];for(_0xc26d0d=0x496*-0x2+0x2d*0x47+-0x34f,_0xa86883=_0x2d9174['length'];_0xc26d0d<_0xa86883;_0xc26d0d++)_0x2d9174[_0xc26d0d]['_updateKin'+'ematic']();this['dynamicsWo'+'rld']['stepSimula'+'tion'](_0x39da41,this['maxSubStep'+'s'],this['fixedTimeS'+'tep']);const _0x5754a3=this['_dynamic'];for(_0xc26d0d=0x1a*-0x2f+0xc6d+-0x7a7,_0xa86883=_0x5754a3['length'];_0xc26d0d<_0xa86883;_0xc26d0d++)_0x5754a3[_0xc26d0d]['_updateDyn'+'amic']();this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']||this['_checkForC'+'ollisions'](Ammo['getPointer'](this['dynamicsWo'+'rld']),_0x39da41),this['_stats']['physicsTim'+'e']=de()-this['_stats']['physicsSta'+'rt'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),typeof Ammo<'u'&&(Ammo['destroy'](this['dynamicsWo'+'rld']),Ammo['destroy'](this['solver']),Ammo['destroy'](this['overlappin'+'gPairCache']),Ammo['destroy'](this['dispatcher']),Ammo['destroy'](this['collisionC'+'onfigurati'+'on']),Ammo['destroy'](Mi),Ammo['destroy'](Di),this['dynamicsWo'+'rld']=null,this['solver']=null,this['overlappin'+'gPairCache']=null,this['dispatcher']=null,this['collisionC'+'onfigurati'+'on']=null,Mi=null,Di=null,bs['onAppDestr'+'oy']());}}h(Kp,'EVENT_CONT'+'ACT','contact'),we['_buildAcce'+'ssors'](bs['prototype'],bv);const Xa='none',dO='blend',Ag=new te();class Av extends we{constructor(_0x46b549,_0x3ee384){super(_0x46b549,_0x3ee384),this['_resolutio'+'n']=new J(-0xaa9+0x22d*0x2+-0x37*-0x29,-0x10d*0x2+0x655*0x5+-0x1c4f),this['_reference'+'Resolution']=new J(-0x2621+-0x1*0x92b+0xc73*0x4,-0x1*0x208f+0x26*-0xd6+-0x4193*-0x1),this['_scaleMode']=Xa,this['scale']=-0x5d6*-0x5+-0x23a7*0x1+0x1*0x67a,this['_scaleBlen'+'d']=-0x2381+-0x49*0x7d+0x7*0xa2a+0.5,this['_priority']=-0x83*-0x2b+-0x18ff+0x2fe*0x1,this['_screenSpa'+'ce']=!(0x2042+-0x2*-0xa75+-0x352b),this['cull']=this['_screenSpa'+'ce'],this['_screenMat'+'rix']=new te(),this['_elements']=new Set(),_0x46b549['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this);}['syncDrawOr'+'der'](){this['system']['queueDrawO'+'rderSync'](this['entity']['getGuid'](),this['_processDr'+'awOrderSyn'+'c'],this);}['_recurseDr'+'awOrderSyn'+'c'](_0x1510e4,_0x584e23){var _0x43fae7;if(!(_0x1510e4 instanceof lt))return _0x584e23;if(_0x1510e4['element']){const _0x14b634=_0x1510e4['element']['drawOrder'];_0x1510e4['element']['drawOrder']=_0x584e23++,_0x1510e4['element']['_batchGrou'+'pId']>=-0x8ec+-0x692+0xf7e&&_0x14b634!==_0x1510e4['element']['drawOrder']&&((_0x43fae7=this['system']['app']['batcher'])==null||_0x43fae7['markGroupD'+'irty'](_0x1510e4['element']['_batchGrou'+'pId']));}_0x1510e4['particlesy'+'stem']&&(_0x1510e4['particlesy'+'stem']['drawOrder']=_0x584e23++);const _0x1cdf0f=_0x1510e4['children'];for(let _0x30af07=-0x6f*-0xb+-0x22cb*-0x1+0x4f2*-0x8;_0x30af07<_0x1cdf0f['length'];_0x30af07++)_0x584e23=this['_recurseDr'+'awOrderSyn'+'c'](_0x1cdf0f[_0x30af07],_0x584e23);return _0x584e23;}['_processDr'+'awOrderSyn'+'c'](){this['_recurseDr'+'awOrderSyn'+'c'](this['entity'],-0x19cf+-0x1699+-0x3*-0x1023),this['fire']('syncdrawor'+'der');}['_calcProje'+'ctionMatri'+'x'](){const _0x4937bc=this['_resolutio'+'n']['x']/this['scale'],_0x4e2261=this['_resolutio'+'n']['y']/this['scale'],_0x2140fb=0x134e*-0x1+0x401+0xf4d,_0x2d84f1=_0x4937bc,_0x498a78=-_0x4e2261;this['_screenMat'+'rix']['setOrtho'](_0x2140fb,_0x2d84f1,_0x498a78,-0x2443+-0x1*-0x2102+0x341,-0xfa0+0xe21*-0x1+0xee1*0x2,-(-0x1*0x1c95+-0x37b+0x2011)),this['_screenSpa'+'ce']||(Ag['setScale']((0x8a*-0xa+-0x2066+0x2*0x12e5+0.5)*_0x4937bc,(0xeb*-0x12+0x1*0x17fb+-0x775+0.5)*_0x4e2261,0x45*0x15+0xd31+-0x12d9),this['_screenMat'+'rix']['mul2'](Ag,this['_screenMat'+'rix']));}['_updateSca'+'le'](){this['scale']=this['_calcScale'](this['_resolutio'+'n'],this['referenceR'+'esolution']);}['_calcScale'](_0x56f01b,_0x29b448){const _0x2167bd=Math['log2']((_0x56f01b['x']||0x873+-0xb4c*-0x2+-0x1f0a)/_0x29b448['x']),_0x5bc74a=Math['log2']((_0x56f01b['y']||-0x1*0x2ab+0x15d1*0x1+-0x1325)/_0x29b448['y']);return Math['pow'](0x1e09+0x1aa+-0x3d*0x85,_0x2167bd*(0x17ad*-0x1+-0x758+0x1f06-this['_scaleBlen'+'d'])+_0x5bc74a*this['_scaleBlen'+'d']);}['_onResize'](_0x21b4c2,_0x238131){this['_screenSpa'+'ce']&&(this['_resolutio'+'n']['set'](_0x21b4c2,_0x238131),this['resolution']=this['_resolutio'+'n']);}['_bindEleme'+'nt'](_0x561ef6){this['_elements']['add'](_0x561ef6);}['_unbindEle'+'ment'](_0x359d5a){this['_elements']['delete'](_0x359d5a);}['onRemove'](){this['system']['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['fire']('remove'),this['_elements']['forEach'](_0x2c76ca=>_0x2c76ca['_onScreenR'+'emove']()),this['_elements']['clear'](),this['off']();}set['resolution'](_0x1ef62c){this['_screenSpa'+'ce']?this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']):this['_resolutio'+'n']['set'](_0x1ef62c['x'],_0x1ef62c['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:resolu'+'tion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x38cf7f=>_0x38cf7f['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['resolution'](){return this['_resolutio'+'n'];}set['referenceR'+'esolution'](_0x4f9dd8){this['_reference'+'Resolution']['set'](_0x4f9dd8['x'],_0x4f9dd8['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:refere'+'nceresolut'+'ion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x161c1a=>_0x161c1a['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['referenceR'+'esolution'](){return this['_scaleMode']===Xa?this['_resolutio'+'n']:this['_reference'+'Resolution'];}set['screenSpac'+'e'](_0x16136d){this['_screenSpa'+'ce']=_0x16136d,this['_screenSpa'+'ce']&&this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']),this['resolution']=this['_resolutio'+'n'],this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:screen'+'space',this['_screenSpa'+'ce']),this['_elements']['forEach'](_0xb878d2=>_0xb878d2['_onScreenS'+'paceChange']());}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['scaleMode'](_0x4531f7){_0x4531f7!==Xa&&_0x4531f7!==dO&&(_0x4531f7=Xa),!this['_screenSpa'+'ce']&&_0x4531f7!==Xa&&(_0x4531f7=Xa),this['_scaleMode']=_0x4531f7,this['resolution']=this['_resolutio'+'n'],this['fire']('set:scalem'+'ode',this['_scaleMode']);}get['scaleMode'](){return this['_scaleMode'];}set['scaleBlend'](_0x5c5efc){this['_scaleBlen'+'d']=_0x5c5efc,this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:scaleb'+'lend',this['_scaleBlen'+'d']),this['_elements']['forEach'](_0x5e34ef=>_0x5e34ef['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['scaleBlend'](){return this['_scaleBlen'+'d'];}set['priority'](_0x4bedf5){_0x4bedf5>-0x5*-0x625+0x57e+-0x2338&&(w['warn']('Clamping\x20s'+'creen\x20prio'+'rity\x20from\x20'+_0x4bedf5+'\x20to\x20255'),_0x4bedf5=-0x2*0x761+0x2*-0x6d0+0x1*0x1d61),this['_priority']!==_0x4bedf5&&(this['_priority']=_0x4bedf5,this['syncDrawOr'+'der']());}get['priority'](){return this['_priority'];}}class fO{constructor(){this['enabled']=!(0xc97*-0x2+0x36*-0x7c+-0x2*-0x19ab);}}const fu=['enabled'];class uO extends ct{constructor(_0x584160){super(_0x584160),this['id']='screen',this['ComponentT'+'ype']=Av,this['DataType']=fO,this['schema']=fu,this['windowReso'+'lution']=new J(),this['_drawOrder'+'SyncQueue']=new D0(),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['initialize'+'ComponentD'+'ata'](_0x464865,_0x98a2bc,_0x4838eb){_0x98a2bc['priority']!==void(0x22e8+-0x2099+-0x24f)&&(_0x464865['priority']=_0x98a2bc['priority']),_0x98a2bc['screenSpac'+'e']!==void(-0x16*0x122+-0x58d+-0x10d*-0x1d)&&(_0x464865['screenSpac'+'e']=_0x98a2bc['screenSpac'+'e']),_0x464865['cull']=_0x464865['screenSpac'+'e'],_0x98a2bc['scaleMode']!==void(-0xb2*0x20+0x175*-0x16+0x14b*0x2a)&&(_0x464865['scaleMode']=_0x98a2bc['scaleMode']),_0x98a2bc['scaleBlend']!==void(0xc1f+-0x2a8+-0x977)&&(_0x464865['scaleBlend']=_0x98a2bc['scaleBlend']),_0x98a2bc['resolution']!==void(0x1*0x1687+-0xf15+-0x772)&&(_0x98a2bc['resolution']instanceof J?_0x464865['_resolutio'+'n']['copy'](_0x98a2bc['resolution']):_0x464865['_resolutio'+'n']['set'](_0x98a2bc['resolution'][0x8b*0x20+-0x1741+-0x5*-0x12d],_0x98a2bc['resolution'][0x3a9+-0xb7+-0x2f1]),_0x464865['resolution']=_0x464865['_resolutio'+'n']),_0x98a2bc['referenceR'+'esolution']!==void(-0x1*-0x43c+-0xaac+0x670)&&(_0x98a2bc['referenceR'+'esolution']instanceof J?_0x464865['_reference'+'Resolution']['copy'](_0x98a2bc['referenceR'+'esolution']):_0x464865['_reference'+'Resolution']['set'](_0x98a2bc['referenceR'+'esolution'][-0x11de+-0x1557+-0x1*-0x2735],_0x98a2bc['referenceR'+'esolution'][-0x181*0x17+0x4+0x2294]),_0x464865['referenceR'+'esolution']=_0x464865['_reference'+'Resolution']),_0x464865['syncDrawOr'+'der'](),super['initialize'+'ComponentD'+'ata'](_0x464865,_0x98a2bc,fu);}['destroy'](){super['destroy'](),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this);}['_onUpdate'](_0x5028c4){const _0x576afa=this['store'];for(const _0x4ecdcb in _0x576afa)_0x576afa[_0x4ecdcb]['entity']['screen']['update']&&_0x576afa[_0x4ecdcb]['entity']['screen']['update'](_0x5028c4);}['_onResize'](_0x38af76,_0x2dd9c){this['windowReso'+'lution']['x']=_0x38af76,this['windowReso'+'lution']['y']=_0x2dd9c;}['cloneCompo'+'nent'](_0x5be79e,_0x6a4051){const _0x4311e5=_0x5be79e['screen'];return this['addCompone'+'nt'](_0x6a4051,{'enabled':_0x4311e5['enabled'],'screenSpace':_0x4311e5['screenSpac'+'e'],'scaleMode':_0x4311e5['scaleMode'],'resolution':_0x4311e5['resolution']['clone'](),'referenceResolution':_0x4311e5['referenceR'+'esolution']['clone']()});}['onRemoveCo'+'mponent'](_0x20334c,_0x2695d9){_0x2695d9['onRemove']();}['processDra'+'wOrderSync'+'Queue'](){const _0x485b84=this['_drawOrder'+'SyncQueue']['list']();for(let _0x1dbb55=-0x816+-0xfcb+0x17e1;_0x1dbb55<_0x485b84['length'];_0x1dbb55++){const _0x228e26=_0x485b84[_0x1dbb55];_0x228e26['callback']['call'](_0x228e26['scope']);}this['_drawOrder'+'SyncQueue']['clear']();}['queueDrawO'+'rderSync'](_0x5a43b5,_0x5a6fd6,_0x20fbde){this['_drawOrder'+'SyncQueue']['list']()['length']||this['app']['once']('prerender',this['processDra'+'wOrderSync'+'Queue'],this),this['_drawOrder'+'SyncQueue']['has'](_0x5a43b5)||this['_drawOrder'+'SyncQueue']['push'](_0x5a43b5,{'callback':_0x5a6fd6,'scope':_0x20fbde});}}we['_buildAcce'+'ssors'](Av['prototype'],fu);const or=new J(),Cg=new D(),Br=new wn(),Pg=new _S(),Mg=new D(),uo=new D(),pO=new le(),mO={'x':'y','y':'x'};class Do extends me{constructor(_0x735cbc,_0x43562e){if(super(),!_0x735cbc||!(_0x735cbc instanceof hs))throw new Error('Element\x20wa'+'s\x20null\x20or\x20'+'not\x20an\x20Ele'+'mentCompon'+'ent');if(_0x43562e&&_0x43562e!=='x'&&_0x43562e!=='y')throw new Error('Unrecogniz'+'ed\x20axis:\x20'+_0x43562e);this['_element']=_0x735cbc,this['_app']=_0x735cbc['system']['app'],this['_axis']=_0x43562e||null,this['_enabled']=!(0x1d2c*0x1+0xb*0x181+-0x2db7),this['_dragScale']=new D(),this['_dragStart'+'MousePosit'+'ion']=new D(),this['_dragStart'+'HandlePosi'+'tion']=new D(),this['_deltaMous'+'ePosition']=new D(),this['_deltaHand'+'lePosition']=new D(),this['_isDraggin'+'g']=!(-0x16+0x13cd*-0x1+-0x4*-0x4f9),this['_toggleLif'+'ecycleList'+'eners']('on');}['_toggleLif'+'ecycleList'+'eners'](_0x5c9172){this['_element'][_0x5c9172]('mousedown',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x5c9172]('touchstart',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x5c9172]('selectstar'+'t',this['_onMouseDo'+'wnOrTouchS'+'tart'],this);}['_toggleDra'+'gListeners'](_0x6b9e){const _0x18663d=_0x6b9e==='on';this['_hasDragLi'+'steners']&&_0x18663d||(this['_app']['mouse']&&(this['_element'][_0x6b9e]('mousemove',this['_onMove'],this),this['_element'][_0x6b9e]('mouseup',this['_onMouseUp'+'OrTouchEnd'],this)),Me['touch']&&(this['_element'][_0x6b9e]('touchmove',this['_onMove'],this),this['_element'][_0x6b9e]('touchend',this['_onMouseUp'+'OrTouchEnd'],this),this['_element'][_0x6b9e]('touchcance'+'l',this['_onMouseUp'+'OrTouchEnd'],this)),this['_element'][_0x6b9e]('selectmove',this['_onMove'],this),this['_element'][_0x6b9e]('selectend',this['_onMouseUp'+'OrTouchEnd'],this),this['_hasDragLi'+'steners']=_0x18663d);}['_onMouseDo'+'wnOrTouchS'+'tart'](_0x589492){if(this['_element']&&!this['_isDraggin'+'g']&&this['enabled']){this['_dragCamer'+'a']=_0x589492['camera'],this['_calculate'+'DragScale']();const _0x136992=this['_screenToL'+'ocal'](_0x589492);_0x136992&&(this['_toggleDra'+'gListeners']('on'),this['_isDraggin'+'g']=!(-0x1126+-0xe02+0x1f28),this['_dragStart'+'MousePosit'+'ion']['copy'](_0x136992),this['_dragStart'+'HandlePosi'+'tion']['copy'](this['_element']['entity']['getLocalPo'+'sition']()),this['fire']('drag:start'));}}['_onMouseUp'+'OrTouchEnd'](){this['_isDraggin'+'g']&&(this['_isDraggin'+'g']=!(0x3*-0xc6d+-0x1*0x256+0x279e),this['_toggleDra'+'gListeners']('off'),this['fire']('drag:end'));}['_screenToL'+'ocal'](_0x4648d4){return _0x4648d4['inputSourc'+'e']?Br['set'](_0x4648d4['inputSourc'+'e']['getOrigin'](),_0x4648d4['inputSourc'+'e']['getDirecti'+'on']()):(this['_determine'+'InputPosit'+'ion'](_0x4648d4),this['_chooseRay'+'OriginAndD'+'irection']()),Mg['copy'](this['_element']['entity']['forward'])['mulScalar'](-(-0x2fb+-0xbb7*-0x2+-0x1472)),Pg['setFromPoi'+'ntNormal'](this['_element']['entity']['getPositio'+'n'](),Mg),Pg['intersects'+'Ray'](Br,uo)?(pO['copy'](this['_element']['entity']['getRotatio'+'n']())['invert']()['transformV'+'ector'](uo,uo),uo['mul'](this['_dragScale']),uo):null;}['_determine'+'InputPosit'+'ion'](_0x51ec5c){const _0x30214a=this['_app']['graphicsDe'+'vice']['maxPixelRa'+'tio'];typeof _0x51ec5c['x']<'u'&&typeof _0x51ec5c['y']<'u'?(or['x']=_0x51ec5c['x']*_0x30214a,or['y']=_0x51ec5c['y']*_0x30214a):_0x51ec5c['changedTou'+'ches']?(or['x']=_0x51ec5c['changedTou'+'ches'][0x151e+-0x5c9+-0xf55]['x']*_0x30214a,or['y']=_0x51ec5c['changedTou'+'ches'][-0x1e99+0x3c6+0x7*0x3d5]['y']*_0x30214a):console['warn']('Could\x20not\x20'+'determine\x20'+'position\x20f'+'rom\x20input\x20'+'event');}['_chooseRay'+'OriginAndD'+'irection'](){this['_element']['screen']&&this['_element']['screen']['screen']['screenSpac'+'e']?(Br['origin']['set'](or['x'],-or['y'],0x3*0x843+-0x32b+-0x159e),Br['direction']['copy'](D['FORWARD'])):(Cg['copy'](this['_dragCamer'+'a']['screenToWo'+'rld'](or['x'],or['y'],0x31*0xbb+-0x2*-0xce+-0x2566)),Br['origin']['copy'](this['_dragCamer'+'a']['entity']['getPositio'+'n']()),Br['direction']['copy'](Cg)['sub'](Br['origin'])['normalize']());}['_calculate'+'DragScale'](){let _0x49756b=this['_element']['entity']['parent'];const _0x4c26f4=this['_element']['screen']&&this['_element']['screen']['screen'],_0x139949=_0x4c26f4&&_0x4c26f4['screenSpac'+'e'],_0x23151e=_0x139949?_0x4c26f4['scale']:0x24f8*0x1+-0x9d1+0x1b26*-0x1,_0x15945b=this['_dragScale'];for(_0x15945b['set'](_0x23151e,_0x23151e,_0x23151e);_0x49756b&&(_0x15945b['mul'](_0x49756b['getLocalSc'+'ale']()),_0x49756b=_0x49756b['parent'],!(_0x139949&&_0x49756b['screen'])););_0x15945b['x']=(0x3*-0x6ad+-0xb*-0x1+0x13fd)/_0x15945b['x'],_0x15945b['y']=(0x251a+0xd06+-0x15*0x263)/_0x15945b['y'],_0x15945b['z']=-0x1e3c+0xdff+0x1*0x103d;}['_onMove'](_0x9eb26d){const {_element:_0x172f86,_deltaMousePosition:_0x15638b,_deltaHandlePosition:_0x228862,_axis:_0x416511}=this;if(_0x172f86&&this['_isDraggin'+'g']&&this['enabled']&&_0x172f86['enabled']&&_0x172f86['entity']['enabled']){const _0x2a1555=this['_screenToL'+'ocal'](_0x9eb26d);if(_0x2a1555){if(_0x15638b['sub2'](_0x2a1555,this['_dragStart'+'MousePosit'+'ion']),_0x228862['add2'](this['_dragStart'+'HandlePosi'+'tion'],_0x15638b),_0x416511){const _0x1a0a5a=_0x172f86['entity']['getLocalPo'+'sition'](),_0x556828=mO[_0x416511];_0x228862[_0x556828]=_0x1a0a5a[_0x556828];}_0x172f86['entity']['setLocalPo'+'sition'](_0x228862),this['fire']('drag:move',_0x228862);}}}['destroy'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleDra'+'gListeners']('off');}set['enabled'](_0x212a01){this['_enabled']=_0x212a01;}get['enabled'](){return this['_enabled'];}get['isDragging'](){return this['_isDraggin'+'g'];}}h(Do,'EVENT_DRAG'+'START','drag:start'),h(Do,'EVENT_DRAG'+'END','drag:end'),h(Do,'EVENT_DRAG'+'MOVE','drag:move');const _O=0xb55+-0x2a*0xc2+0x6d5*0x3,Dg=0x20c9+0xc2e+-0x2cf6,gO=-0x7*-0x331+-0x1*-0x2135+0x378a*-0x1,SO=0x209*0xd+-0x1*0x12be+-0x7b7,yO=-0x83*0x3e+-0x1*0xa9d+0x14*0x21e,po=new J();class Cv extends we{constructor(_0xa66c9c,_0x1e2312){super(_0xa66c9c,_0x1e2312),h(this,'_viewportE'+'ntity',null),h(this,'_contentEn'+'tity',null),h(this,'_horizonta'+'lScrollbar'+'Entity',null),h(this,'_verticalS'+'crollbarEn'+'tity',null),h(this,'_evtElemen'+'tRemove',null),h(this,'_evtViewpo'+'rtElementR'+'emove',null),h(this,'_evtViewpo'+'rtResize',null),h(this,'_evtConten'+'tEntityEle'+'mentAdd',null),h(this,'_evtConten'+'tElementRe'+'move',null),h(this,'_evtConten'+'tResize',null),h(this,'_evtHorizo'+'ntalScroll'+'barAdd',null),h(this,'_evtHorizo'+'ntalScroll'+'barRemove',null),h(this,'_evtHorizo'+'ntalScroll'+'barValue',null),h(this,'_evtVertic'+'alScrollba'+'rAdd',null),h(this,'_evtVertic'+'alScrollba'+'rRemove',null),h(this,'_evtVertic'+'alScrollba'+'rValue',null),(this['_scrollbar'+'UpdateFlag'+'s']={},this['_scrollbar'+'Entities']={},this['_prevConte'+'ntSizes']={},this['_prevConte'+'ntSizes'][Ae]=null,this['_prevConte'+'ntSizes'][je]=null,this['_scroll']=new J(),this['_velocity']=new D(),this['_dragStart'+'Position']=new D(),this['_disabledC'+'ontentInpu'+'t']=!(0x169d*0x1+-0x1*0x1b36+0x24d*0x2),this['_disabledC'+'ontentInpu'+'tEntities']=[],this['_toggleLif'+'ecycleList'+'eners']('on'),this['_toggleEle'+'mentListen'+'ers']('on'));}get['data'](){const _0x37e732=this['system']['store'][this['entity']['getGuid']()];return _0x37e732?_0x37e732['data']:null;}set['enabled'](_0x449904){this['_setValue']('enabled',_0x449904);}get['enabled'](){return this['data']['enabled'];}set['horizontal'](_0x969d64){this['_setValue']('horizontal',_0x969d64);}get['horizontal'](){return this['data']['horizontal'];}set['vertical'](_0x207329){this['_setValue']('vertical',_0x207329);}get['vertical'](){return this['data']['vertical'];}set['scrollMode'](_0x279342){this['_setValue']('scrollMode',_0x279342);}get['scrollMode'](){return this['data']['scrollMode'];}set['bounceAmou'+'nt'](_0x4082ca){this['_setValue']('bounceAmou'+'nt',_0x4082ca);}get['bounceAmou'+'nt'](){return this['data']['bounceAmou'+'nt'];}set['friction'](_0x4ef1aa){this['_setValue']('friction',_0x4ef1aa);}get['friction'](){return this['data']['friction'];}set['dragThresh'+'old'](_0x168e78){this['_setValue']('dragThresh'+'old',_0x168e78);}get['dragThresh'+'old'](){return this['data']['dragThresh'+'old'];}set['useMouseWh'+'eel'](_0x448c6c){this['_setValue']('useMouseWh'+'eel',_0x448c6c);}get['useMouseWh'+'eel'](){return this['data']['useMouseWh'+'eel'];}set['mouseWheel'+'Sensitivit'+'y'](_0x39518f){this['_setValue']('mouseWheel'+'Sensitivit'+'y',_0x39518f);}get['mouseWheel'+'Sensitivit'+'y'](){return this['data']['mouseWheel'+'Sensitivit'+'y'];}set['horizontal'+'ScrollbarV'+'isibility'](_0x21de05){this['_setValue']('horizontal'+'ScrollbarV'+'isibility',_0x21de05);}get['horizontal'+'ScrollbarV'+'isibility'](){return this['data']['horizontal'+'ScrollbarV'+'isibility'];}set['verticalSc'+'rollbarVis'+'ibility'](_0x5d18d2){this['_setValue']('verticalSc'+'rollbarVis'+'ibility',_0x5d18d2);}get['verticalSc'+'rollbarVis'+'ibility'](){return this['data']['verticalSc'+'rollbarVis'+'ibility'];}set['viewportEn'+'tity'](_0x4da61f){if(this['_viewportE'+'ntity']===_0x4da61f)return;const _0x39fd95=typeof _0x4da61f=='string';this['_viewportE'+'ntity']&&_0x39fd95&&this['_viewportE'+'ntity']['getGuid']()===_0x4da61f||(this['_viewportE'+'ntity']&&this['_viewportE'+'ntityUnsub'+'scribe'](),_0x4da61f instanceof Ie?this['_viewportE'+'ntity']=_0x4da61f:_0x39fd95?this['_viewportE'+'ntity']=this['system']['app']['getEntityF'+'romIndex'](_0x4da61f)||null:this['_viewportE'+'ntity']=null,this['_viewportE'+'ntity']&&this['_viewportE'+'ntitySubsc'+'ribe'](),this['_viewportE'+'ntity']?this['data']['viewportEn'+'tity']=this['_viewportE'+'ntity']['getGuid']():_0x39fd95&&_0x4da61f&&(this['data']['viewportEn'+'tity']=_0x4da61f));}get['viewportEn'+'tity'](){return this['_viewportE'+'ntity'];}set['contentEnt'+'ity'](_0x583589){if(this['_contentEn'+'tity']===_0x583589)return;const _0x3c5ec1=typeof _0x583589=='string';this['_contentEn'+'tity']&&_0x3c5ec1&&this['_contentEn'+'tity']['getGuid']()===_0x583589||(this['_contentEn'+'tity']&&this['_contentEn'+'tityUnsubs'+'cribe'](),_0x583589 instanceof Ie?this['_contentEn'+'tity']=_0x583589:_0x3c5ec1?this['_contentEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x583589)||null:this['_contentEn'+'tity']=null,this['_contentEn'+'tity']&&this['_contentEn'+'titySubscr'+'ibe'](),this['_contentEn'+'tity']?this['data']['contentEnt'+'ity']=this['_contentEn'+'tity']['getGuid']():_0x3c5ec1&&_0x583589&&(this['data']['contentEnt'+'ity']=_0x583589));}get['contentEnt'+'ity'](){return this['_contentEn'+'tity'];}set['horizontal'+'ScrollbarE'+'ntity'](_0x22d760){if(this['_horizonta'+'lScrollbar'+'Entity']===_0x22d760)return;const _0x17f8f4=typeof _0x22d760=='string';this['_horizonta'+'lScrollbar'+'Entity']&&_0x17f8f4&&this['_horizonta'+'lScrollbar'+'Entity']['getGuid']()===_0x22d760||(this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](),_0x22d760 instanceof Ie?this['_horizonta'+'lScrollbar'+'Entity']=_0x22d760:_0x17f8f4?this['_horizonta'+'lScrollbar'+'Entity']=this['system']['app']['getEntityF'+'romIndex'](_0x22d760)||null:this['_horizonta'+'lScrollbar'+'Entity']=null,this['_scrollbar'+'Entities'][Ae]=this['_horizonta'+'lScrollbar'+'Entity'],this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](),this['_horizonta'+'lScrollbar'+'Entity']?this['data']['horizontal'+'ScrollbarE'+'ntity']=this['_horizonta'+'lScrollbar'+'Entity']['getGuid']():_0x17f8f4&&_0x22d760&&(this['data']['horizontal'+'ScrollbarE'+'ntity']=_0x22d760));}get['horizontal'+'ScrollbarE'+'ntity'](){return this['_horizonta'+'lScrollbar'+'Entity'];}set['verticalSc'+'rollbarEnt'+'ity'](_0x10ed01){if(this['_verticalS'+'crollbarEn'+'tity']===_0x10ed01)return;const _0x53a652=typeof _0x10ed01=='string';this['_verticalS'+'crollbarEn'+'tity']&&_0x53a652&&this['_verticalS'+'crollbarEn'+'tity']['getGuid']()===_0x10ed01||(this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](),_0x10ed01 instanceof Ie?this['_verticalS'+'crollbarEn'+'tity']=_0x10ed01:_0x53a652?this['_verticalS'+'crollbarEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x10ed01)||null:this['_verticalS'+'crollbarEn'+'tity']=null,this['_scrollbar'+'Entities'][je]=this['_verticalS'+'crollbarEn'+'tity'],this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](),this['_verticalS'+'crollbarEn'+'tity']?this['data']['verticalSc'+'rollbarEnt'+'ity']=this['_verticalS'+'crollbarEn'+'tity']['getGuid']():_0x53a652&&_0x10ed01&&(this['data']['verticalSc'+'rollbarEnt'+'ity']=_0x10ed01));}get['verticalSc'+'rollbarEnt'+'ity'](){return this['_verticalS'+'crollbarEn'+'tity'];}set['scroll'](_0x1a9a2d){this['_onSetScro'+'ll'](_0x1a9a2d['x'],_0x1a9a2d['y']);}get['scroll'](){return this['_scroll'];}['_setValue'](_0x396db7,_0x4b0802){const _0x3c4c8f=this['data'],_0x5321f4=_0x3c4c8f[_0x396db7];_0x3c4c8f[_0x396db7]=_0x4b0802,this['fire']('set',_0x396db7,_0x5321f4,_0x4b0802);}['_toggleLif'+'ecycleList'+'eners'](_0xe9ca8c){this[_0xe9ca8c]('set_horizo'+'ntal',this['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'],this),this[_0xe9ca8c]('set_vertic'+'al',this['_onSetVert'+'icalScroll'+'ingEnabled'],this),this['entity'][_0xe9ca8c]('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this);}['_toggleEle'+'mentListen'+'ers'](_0xbea9a9){if(this['entity']['element']){if(_0xbea9a9==='on'&&this['_hasElemen'+'tListeners'])return;this['entity']['element'][_0xbea9a9]('resize',this['_syncAll'],this),this['entity']['element'][_0xbea9a9]('mousewheel',this['_onMouseWh'+'eel'],this),this['_hasElemen'+'tListeners']=_0xbea9a9==='on';}}['_onElement'+'ComponentA'+'dd'](_0x95aca4){this['_evtElemen'+'tRemove']=this['entity']['element']['once']('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['_toggleEle'+'mentListen'+'ers']('on');}['_onElement'+'ComponentR'+'emove'](_0x26b6a1){var _0x5ad924;(_0x5ad924=this['_evtElemen'+'tRemove'])==null||_0x5ad924['off'](),this['_evtElemen'+'tRemove']=null,this['_toggleEle'+'mentListen'+'ers']('off');}['_viewportE'+'ntitySubsc'+'ribe'](){this['_evtViewpo'+'rtEntityEl'+'ementAdd']=this['_viewportE'+'ntity']['on']('element:ad'+'d',this['_onViewpor'+'tElementGa'+'in'],this),this['_viewportE'+'ntity']['element']&&this['_onViewpor'+'tElementGa'+'in']();}['_viewportE'+'ntityUnsub'+'scribe'](){var _0x3d42aa,_0x540c11;(_0x3d42aa=this['_evtViewpo'+'rtEntityEl'+'ementAdd'])==null||_0x3d42aa['off'](),this['_evtViewpo'+'rtEntityEl'+'ementAdd']=null,(_0x540c11=this['_viewportE'+'ntity'])!=null&&_0x540c11['element']&&this['_onViewpor'+'tElementLo'+'se']();}['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](){const _0x3e4faa=this['_viewportE'+'ntity']['element'];this['_evtViewpo'+'rtElementR'+'emove']=_0x3e4faa['once']('beforeremo'+'ve',this['_onViewpor'+'tElementLo'+'se'],this),this['_evtViewpo'+'rtResize']=_0x3e4faa['on']('resize',this['_syncAll'],this);}['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe'](){var _0x469f34,_0x4040ae;(_0x469f34=this['_evtViewpo'+'rtElementR'+'emove'])==null||_0x469f34['off'](),this['_evtViewpo'+'rtElementR'+'emove']=null,(_0x4040ae=this['_evtViewpo'+'rtResize'])==null||_0x4040ae['off'](),this['_evtViewpo'+'rtResize']=null;}['_onViewpor'+'tElementGa'+'in'](){this['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](),this['_syncAll']();}['_onViewpor'+'tElementLo'+'se'](){this['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe']();}['_contentEn'+'titySubscr'+'ibe'](){this['_evtConten'+'tEntityEle'+'mentAdd']=this['_contentEn'+'tity']['on']('element:ad'+'d',this['_onContent'+'ElementGai'+'n'],this),this['_contentEn'+'tity']['element']&&this['_onContent'+'ElementGai'+'n']();}['_contentEn'+'tityUnsubs'+'cribe'](){var _0x3d4fa4,_0x49b607;(_0x3d4fa4=this['_evtConten'+'tEntityEle'+'mentAdd'])==null||_0x3d4fa4['off'](),this['_evtConten'+'tEntityEle'+'mentAdd']=null,(_0x49b607=this['_contentEn'+'tity'])!=null&&_0x49b607['element']&&this['_onContent'+'ElementLos'+'e']();}['_contentEn'+'tityElemen'+'tSubscribe'](){const _0x259096=this['_contentEn'+'tity']['element'];this['_evtConten'+'tElementRe'+'move']=_0x259096['once']('beforeremo'+'ve',this['_onContent'+'ElementLos'+'e'],this),this['_evtConten'+'tResize']=_0x259096['on']('resize',this['_syncAll'],this);}['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](){var _0x230fb1,_0x450439;(_0x230fb1=this['_evtConten'+'tElementRe'+'move'])==null||_0x230fb1['off'](),this['_evtConten'+'tElementRe'+'move']=null,(_0x450439=this['_evtConten'+'tResize'])==null||_0x450439['off'](),this['_evtConten'+'tResize']=null;}['_onContent'+'ElementGai'+'n'](){this['_contentEn'+'tityElemen'+'tSubscribe'](),this['_destroyDr'+'agHelper'](),this['_contentDr'+'agHelper']=new Do(this['_contentEn'+'tity']['element']),this['_contentDr'+'agHelper']['on']('drag:start',this['_onContent'+'DragStart'],this),this['_contentDr'+'agHelper']['on']('drag:end',this['_onContent'+'DragEnd'],this),this['_contentDr'+'agHelper']['on']('drag:move',this['_onContent'+'DragMove'],this),this['_prevConte'+'ntSizes'][Ae]=null,this['_prevConte'+'ntSizes'][je]=null,this['_syncAll']();}['_onContent'+'ElementLos'+'e'](){this['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](),this['_destroyDr'+'agHelper']();}['_onContent'+'DragStart'](){this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&this['_dragStart'+'Position']['copy'](this['_contentEn'+'tity']['getLocalPo'+'sition']());}['_onContent'+'DragEnd'](){this['_prevConte'+'ntDragPosi'+'tion']=null,this['_enableCon'+'tentInput']();}['_onContent'+'DragMove'](_0x544ed0){if(this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&(this['_wasDragge'+'d']=!(0x4*0x4f4+-0x13fe+0x2e),this['_setScroll'+'FromConten'+'tPosition'](_0x544ed0),this['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x544ed0),!this['_disabledC'+'ontentInpu'+'t'])){const _0x3b115b=_0x544ed0['x']-this['_dragStart'+'Position']['x'],_0x4871b4=_0x544ed0['y']-this['_dragStart'+'Position']['y'];(Math['abs'](_0x3b115b)>this['dragThresh'+'old']||Math['abs'](_0x4871b4)>this['dragThresh'+'old'])&&this['_disableCo'+'ntentInput']();}}['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](){this['_evtHorizo'+'ntalScroll'+'barAdd']=this['_horizonta'+'lScrollbar'+'Entity']['on']('scrollbar:'+'add',this['_onHorizon'+'talScrollb'+'arGain'],this),this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arGain']();}['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](){this['_evtVertic'+'alScrollba'+'rAdd']=this['_verticalS'+'crollbarEn'+'tity']['on']('scrollbar:'+'add',this['_onVertica'+'lScrollbar'+'Gain'],this),this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Gain']();}['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](){var _0x5da655;(_0x5da655=this['_evtHorizo'+'ntalScroll'+'barAdd'])==null||_0x5da655['off'](),this['_evtHorizo'+'ntalScroll'+'barAdd']=null,this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arLose']();}['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](){var _0x55b9e0;(_0x55b9e0=this['_evtVertic'+'alScrollba'+'rAdd'])==null||_0x55b9e0['off'](),this['_evtVertic'+'alScrollba'+'rAdd']=null,this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Lose']();}['_onSetHori'+'zontalScro'+'llbarValue'](_0x585b01){!this['_scrollbar'+'UpdateFlag'+'s'][Ae]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](_0x585b01,null);}['_onSetVert'+'icalScroll'+'barValue'](_0x43a4e4){!this['_scrollbar'+'UpdateFlag'+'s'][je]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](null,_0x43a4e4);}['_onHorizon'+'talScrollb'+'arGain'](){var _0x25b262;const _0x2ab6cf=(_0x25b262=this['_horizonta'+'lScrollbar'+'Entity'])==null?void(-0x1901+0x16eb+0x216):_0x25b262['scrollbar'];this['_evtHorizo'+'ntalScroll'+'barRemove']=_0x2ab6cf['on']('beforeremo'+'ve',this['_onHorizon'+'talScrollb'+'arLose'],this),this['_evtHorizo'+'ntalScroll'+'barValue']=_0x2ab6cf['on']('set:value',this['_onSetHori'+'zontalScro'+'llbarValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](Ae),this['_syncScrol'+'lbarPositi'+'on'](Ae);}['_onVertica'+'lScrollbar'+'Gain'](){var _0xd955c3;const _0x1bff40=(_0xd955c3=this['_verticalS'+'crollbarEn'+'tity'])==null?void(-0x2*0xe38+-0x5c0+0x2230):_0xd955c3['scrollbar'];this['_evtVertic'+'alScrollba'+'rRemove']=_0x1bff40['on']('beforeremo'+'ve',this['_onVertica'+'lScrollbar'+'Lose'],this),this['_evtVertic'+'alScrollba'+'rValue']=_0x1bff40['on']('set:value',this['_onSetVert'+'icalScroll'+'barValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](je),this['_syncScrol'+'lbarPositi'+'on'](je);}['_onHorizon'+'talScrollb'+'arLose'](){var _0x5e21da,_0x261334;(_0x5e21da=this['_evtHorizo'+'ntalScroll'+'barRemove'])==null||_0x5e21da['off'](),this['_evtHorizo'+'ntalScroll'+'barRemove']=null,(_0x261334=this['_evtHorizo'+'ntalScroll'+'barValue'])==null||_0x261334['off'](),this['_evtHorizo'+'ntalScroll'+'barValue']=null;}['_onVertica'+'lScrollbar'+'Lose'](){var _0x526c0c,_0xe87b91;(_0x526c0c=this['_evtVertic'+'alScrollba'+'rRemove'])==null||_0x526c0c['off'](),this['_evtVertic'+'alScrollba'+'rRemove']=null,(_0xe87b91=this['_evtVertic'+'alScrollba'+'rValue'])==null||_0xe87b91['off'](),this['_evtVertic'+'alScrollba'+'rValue']=null;}['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'](){this['_syncScrol'+'lbarEnable'+'dState'](Ae);}['_onSetVert'+'icalScroll'+'ingEnabled'](){this['_syncScrol'+'lbarEnable'+'dState'](je);}['_onSetScro'+'ll'](_0x19c8cf,_0x22eb10,_0x4d1c35){_0x4d1c35!==!(-0x1940+-0x172f+-0x2*-0x1838)&&this['_velocity']['set'](0x17*-0x109+0x152b*0x1+0x2a4,0x10d9*-0x1+-0x2040+0x3119,0xb00+-0x4ad+-0x653);const _0x2bf71f=this['_updateAxi'+'s'](_0x19c8cf,'x',Ae),_0x18ffd9=this['_updateAxi'+'s'](_0x22eb10,'y',je);(_0x2bf71f||_0x18ffd9)&&this['fire']('set:scroll',this['_scroll']);}['_updateAxi'+'s'](_0x3bbfe7,_0x58cafe,_0xb2e0d){const _0x3d0712=_0x3bbfe7!==null&&Math['abs'](_0x3bbfe7-this['_scroll'][_0x58cafe])>0x2199+-0x1181*-0x1+-0x331a+0.00001;return(_0x3d0712||this['_isDraggin'+'g']()||_0x3bbfe7===0x147c+0x221e+-0x369a*0x1)&&(this['_scroll'][_0x58cafe]=this['_determine'+'NewScrollV'+'alue'](_0x3bbfe7,_0x58cafe,_0xb2e0d),this['_syncConte'+'ntPosition'](_0xb2e0d),this['_syncScrol'+'lbarPositi'+'on'](_0xb2e0d)),_0x3d0712;}['_determine'+'NewScrollV'+'alue'](_0x50e0c7,_0x496aa5,_0xf27bb4){if(!this['_getScroll'+'ingEnabled'](_0xf27bb4))return this['_scroll'][_0x496aa5];switch(this['scrollMode']){case _O:return Y['clamp'](_0x50e0c7,0x1bc4+0x1*0x2cf+-0xa31*0x3,this['_getMaxScr'+'ollValue'](_0xf27bb4));case Dg:return this['_setVeloci'+'tyFromOver'+'shoot'](_0x50e0c7,_0x496aa5,_0xf27bb4),_0x50e0c7;case gO:return _0x50e0c7;default:return console['warn']('Unhandled\x20'+'scroll\x20mod'+'e:'+this['scrollMode']),_0x50e0c7;}}['_syncAll'](){this['_syncConte'+'ntPosition'](Ae),this['_syncConte'+'ntPosition'](je),this['_syncScrol'+'lbarPositi'+'on'](Ae),this['_syncScrol'+'lbarPositi'+'on'](je),this['_syncScrol'+'lbarEnable'+'dState'](Ae),this['_syncScrol'+'lbarEnable'+'dState'](je);}['_syncConte'+'ntPosition'](_0xe2fb47){if(!this['_contentEn'+'tity'])return;const _0x3232da=this['_getAxis'](_0xe2fb47),_0xdf7d8d=this['_getSign'](_0xe2fb47),_0x2ad5e7=this['_prevConte'+'ntSizes'][_0xe2fb47],_0x352c0c=this['_getConten'+'tSize'](_0xe2fb47);if(_0x2ad5e7!==null&&Math['abs'](_0x2ad5e7-_0x352c0c)>0x2282+-0x6ea+-0xdcc*0x2+0.0001){const _0x41d89e=this['_getMaxOff'+'set'](_0xe2fb47,_0x2ad5e7),_0x595474=this['_getMaxOff'+'set'](_0xe2fb47,_0x352c0c);_0x595474===0x766*-0x5+-0x111d*-0x1+0x13e1?this['_scroll'][_0x3232da]=0x664+-0x2fa+-0x1*0x369:this['_scroll'][_0x3232da]=Y['clamp'](this['_scroll'][_0x3232da]*_0x41d89e/_0x595474,-0x129b+0x1884+-0x5e9,-0x10b*0xd+0x86a*-0x4+0x2f38);}const _0x19722c=this['_scroll'][_0x3232da]*this['_getMaxOff'+'set'](_0xe2fb47),_0x5dcb20=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x5dcb20[_0x3232da]=_0x19722c*_0xdf7d8d,this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x5dcb20),this['_prevConte'+'ntSizes'][_0xe2fb47]=_0x352c0c;}['_syncScrol'+'lbarPositi'+'on'](_0x311d94){const _0x49eb54=this['_scrollbar'+'Entities'][_0x311d94];if(!(_0x49eb54!=null&&_0x49eb54['scrollbar']))return;const _0x192cff=this['_getAxis'](_0x311d94);this['_scrollbar'+'UpdateFlag'+'s'][_0x311d94]=!(0x21e9*-0x1+-0x21a2+0x438b),_0x49eb54['scrollbar']['value']=this['_scroll'][_0x192cff],_0x49eb54['scrollbar']['handleSize']=this['_getScroll'+'barHandleS'+'ize'](_0x192cff,_0x311d94),this['_scrollbar'+'UpdateFlag'+'s'][_0x311d94]=!(0x14f*0x11+-0x2c*-0xcb+-0x3922);}['_syncScrol'+'lbarEnable'+'dState'](_0x21ff28){const _0x571420=this['_scrollbar'+'Entities'][_0x21ff28];if(!_0x571420)return;const _0x2225c5=this['_getScroll'+'ingEnabled'](_0x21ff28),_0x378e37=this['_getScroll'+'barVisibil'+'ity'](_0x21ff28);switch(_0x378e37){case SO:_0x571420['enabled']=_0x2225c5;return;case yO:_0x571420['enabled']=_0x2225c5&&this['_contentIs'+'LargerThan'+'Viewport'](_0x21ff28);return;default:console['warn']('Unhandled\x20'+'scrollbar\x20'+'visibility'+':'+_0x378e37),_0x571420['enabled']=_0x2225c5;}}['_contentIs'+'LargerThan'+'Viewport'](_0x1f043d){return this['_getConten'+'tSize'](_0x1f043d)>this['_getViewpo'+'rtSize'](_0x1f043d);}['_contentPo'+'sitionToSc'+'rollValue'](_0x4ca46f){const _0x3e5b79=this['_getMaxOff'+'set'](Ae),_0x2f59d3=this['_getMaxOff'+'set'](je);return _0x3e5b79===-0x3cb+-0x1*0xd84+-0x114f*-0x1?po['x']=-0xb46+0x4*0x92+-0x47f*-0x2:po['x']=_0x4ca46f['x']/_0x3e5b79,_0x2f59d3===-0xd4*-0x5+0x2075+-0x2499?po['y']=-0x607*-0x1+-0x1*-0x2376+0xd*-0x331:po['y']=_0x4ca46f['y']/-_0x2f59d3,po;}['_getMaxOff'+'set'](_0x17a36a,_0x4b60d6){_0x4b60d6=_0x4b60d6===void(-0xa*0x9a+0x4c0*0x8+-0x1ffc)?this['_getConten'+'tSize'](_0x17a36a):_0x4b60d6;const _0x340e22=this['_getViewpo'+'rtSize'](_0x17a36a);return _0x4b60d6<_0x340e22?-this['_getViewpo'+'rtSize'](_0x17a36a):_0x340e22-_0x4b60d6;}['_getMaxScr'+'ollValue'](_0x2db442){return this['_contentIs'+'LargerThan'+'Viewport'](_0x2db442)?-0x1c8d*-0x1+0x406*0x4+-0x4*0xb29:-0x21a*-0xc+-0x17*0x8+-0xc40*0x2;}['_getScroll'+'barHandleS'+'ize'](_0x23072e,_0x1b3221){const _0x229675=this['_getViewpo'+'rtSize'](_0x1b3221),_0x420191=this['_getConten'+'tSize'](_0x1b3221);if(Math['abs'](_0x420191)<0x22cc+-0x1343*-0x1+-0x360f+0.001)return 0x40f*0x7+0x2*-0x795+-0x2a6*0x5;const _0x5e631d=Math['min'](_0x229675/_0x420191,0x1*0x96d+0x21fc+-0x2b68),_0x354e8d=this['_toOversho'+'ot'](this['_scroll'][_0x23072e],_0x1b3221);return _0x354e8d===-0xddb+0x2194+-0x13b9?_0x5e631d:_0x5e631d/(-0x5dc+0x2a0+0x33d*0x1+Math['abs'](_0x354e8d));}['_getViewpo'+'rtSize'](_0x560466){return this['_getSize'](_0x560466,this['_viewportE'+'ntity']);}['_getConten'+'tSize'](_0x1b3129){return this['_getSize'](_0x1b3129,this['_contentEn'+'tity']);}['_getSize'](_0x5be8da,_0x54a0de){return _0x54a0de!=null&&_0x54a0de['element']?_0x54a0de['element'][this['_getCalcul'+'atedDimens'+'ion'](_0x5be8da)]:0xd*0xeb+0x1d6e+-0x295d;}['_getScroll'+'ingEnabled'](_0x51d20b){if(_0x51d20b===Ae)return this['horizontal'];if(_0x51d20b===je)return this['vertical'];w['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x51d20b);}['_getScroll'+'barVisibil'+'ity'](_0x25d8b9){if(_0x25d8b9===Ae)return this['horizontal'+'ScrollbarV'+'isibility'];if(_0x25d8b9===je)return this['verticalSc'+'rollbarVis'+'ibility'];w['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x25d8b9);}['_getSign'](_0x9a436e){return _0x9a436e===Ae?-0x1228+0x4*0x503+-0x1e3:-(-0xc93+0xbf7*-0x2+0x1*0x2482);}['_getAxis'](_0x4f342b){return _0x4f342b===Ae?'x':'y';}['_getCalcul'+'atedDimens'+'ion'](_0x5bb0db){return _0x5bb0db===Ae?'calculated'+'Width':'calculated'+'Height';}['_destroyDr'+'agHelper'](){this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['destroy']();}['onUpdate'](){this['_contentEn'+'tity']&&(this['_updateVel'+'ocity'](),this['_syncScrol'+'lbarEnable'+'dState'](Ae),this['_syncScrol'+'lbarEnable'+'dState'](je));}['_updateVel'+'ocity'](){if(!this['_isDraggin'+'g']()){if(this['scrollMode']===Dg&&(this['_hasOversh'+'oot']('x',Ae)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['x'],'x',Ae),this['_hasOversh'+'oot']('y',je)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['y'],'y',je)),Math['abs'](this['_velocity']['x'])>-0x1431+-0x2*-0x127f+-0x10cd+0.0001||Math['abs'](this['_velocity']['y'])>0x18c5+0x5b2+-0x2c5*0xb+0.0001){const _0x5c1e80=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x5c1e80['x']+=this['_velocity']['x'],_0x5c1e80['y']+=this['_velocity']['y'],this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x5c1e80),this['_setScroll'+'FromConten'+'tPosition'](_0x5c1e80);}this['_velocity']['x']*=-0x1591+-0x1*-0xe3b+-0x1*-0x757-this['friction'],this['_velocity']['y']*=0xc5*0x12+-0x286*-0x5+-0x1a77-this['friction'];}}['_hasOversh'+'oot'](_0x1bfd17,_0xcb78ea){return Math['abs'](this['_toOversho'+'ot'](this['scroll'][_0x1bfd17],_0xcb78ea))>0x2298+0x3*-0x34a+0x83e*-0x3+0.001;}['_toOversho'+'ot'](_0x354bfb,_0x5c4f43){const _0x4ae422=this['_getMaxScr'+'ollValue'](_0x5c4f43);return _0x354bfb<-0x163d+0xf9*0x22+-0x1*0xad5?_0x354bfb:_0x354bfb>_0x4ae422?_0x354bfb-_0x4ae422:-0x9e*0x2b+0x1b87+-0xfd;}['_setVeloci'+'tyFromOver'+'shoot'](_0x2a1a90,_0x20fd77,_0x1b537b){const _0x1a5405=this['_toOversho'+'ot'](_0x2a1a90,_0x1b537b)*this['_getMaxOff'+'set'](_0x1b537b)*this['_getSign'](_0x1b537b);Math['abs'](_0x1a5405)>0x40b+-0x2472*0x1+0x18b*0x15&&(this['_velocity'][_0x20fd77]=-_0x1a5405/(this['bounceAmou'+'nt']*(-0x1795*-0x1+-0x1189+-0x5da)+(0x17c5+-0xf*0x9f+-0x9*0x19b)));}['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x3be15e){this['_prevConte'+'ntDragPosi'+'tion']?(this['_velocity']['sub2'](_0x3be15e,this['_prevConte'+'ntDragPosi'+'tion']),this['_prevConte'+'ntDragPosi'+'tion']['copy'](_0x3be15e)):(this['_velocity']['set'](0x103*-0x24+-0x2515*0x1+-0x1*-0x4981,-0x4b7*0x1+0x854+0xb9*-0x5,-0x186e*-0x1+-0x88c*0x4+-0x1*-0x9c2),this['_prevConte'+'ntDragPosi'+'tion']=_0x3be15e['clone']());}['_setScroll'+'FromConten'+'tPosition'](_0x231ae2){let _0x415974=this['_contentPo'+'sitionToSc'+'rollValue'](_0x231ae2);this['_isDraggin'+'g']()&&(_0x415974=this['_applyScro'+'llValueTen'+'sion'](_0x415974)),this['_onSetScro'+'ll'](_0x415974['x'],_0x415974['y'],!(0x9b0+0x23*0x48+-0x1387*0x1));}['_applyScro'+'llValueTen'+'sion'](_0x58e644){let _0x558752=this['_getMaxScr'+'ollValue'](Ae),_0xc837c2=this['_toOversho'+'ot'](_0x58e644['x'],Ae);return _0xc837c2>0x1a49+-0x14bd+-0x2c6*0x2?_0x58e644['x']=_0x558752+(0x1885+-0xf*-0xa0+0x6*-0x5a6)*Math['log10'](0x1*-0x2245+-0x2f*-0x89+0x91f+_0xc837c2):_0xc837c2<-0x11f3+0xc2*0x16+-0x3*-0x6d&&(_0x58e644['x']=-(-0x16c3+-0x1*0x1b9f+0x1*0x3263)*Math['log10'](0xaea+-0x133b+0x852-_0xc837c2)),_0x558752=this['_getMaxScr'+'ollValue'](je),_0xc837c2=this['_toOversho'+'ot'](_0x58e644['y'],je),_0xc837c2>-0x1*0x175d+-0x3*-0xb7b+-0x2*0x58a?_0x58e644['y']=_0x558752+(0x1373+0x1*0x579+-0x18eb)*Math['log10'](-0x3*0x347+-0x44b+-0x1*-0xe21+_0xc837c2):_0xc837c2<0x30*-0xba+-0xa87+0x2d67&&(_0x58e644['y']=-(0xd3b+0x1c41+-0x5ed*0x7)*Math['log10'](-0xaac+-0x466+0x11*0xe3-_0xc837c2)),_0x58e644;}['_isDraggin'+'g'](){return this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['isDragging'];}['_setScroll'+'barCompone'+'ntsEnabled'](_0x1bd8e8){var _0x109f1c,_0x235c1d;(_0x109f1c=this['_horizonta'+'lScrollbar'+'Entity'])!=null&&_0x109f1c['scrollbar']&&(this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']['enabled']=_0x1bd8e8),(_0x235c1d=this['_verticalS'+'crollbarEn'+'tity'])!=null&&_0x235c1d['scrollbar']&&(this['_verticalS'+'crollbarEn'+'tity']['scrollbar']['enabled']=_0x1bd8e8);}['_setConten'+'tDraggingE'+'nabled'](_0x1e5d63){this['_contentDr'+'agHelper']&&(this['_contentDr'+'agHelper']['enabled']=_0x1e5d63);}['_onMouseWh'+'eel'](_0x502dcb){var _0x213708;if(!this['useMouseWh'+'eel']||!((_0x213708=this['_contentEn'+'tity'])!=null&&_0x213708['element']))return;const _0x2d199f=_0x502dcb['event'],_0x2a2174=_0x2d199f['deltaX']/this['_contentEn'+'tity']['element']['calculated'+'Width']*this['mouseWheel'+'Sensitivit'+'y']['x'],_0x14582f=_0x2d199f['deltaY']/this['_contentEn'+'tity']['element']['calculated'+'Height']*this['mouseWheel'+'Sensitivit'+'y']['y'],_0x4cd99b=Y['clamp'](this['_scroll']['x']+_0x2a2174,-0x361+0x1217*0x2+-0x3*0xaef,this['_getMaxScr'+'ollValue'](Ae)),_0x1d6a24=Y['clamp'](this['_scroll']['y']+_0x14582f,0x178*-0x11+0x3*-0x435+0x1*0x2597,this['_getMaxScr'+'ollValue'](je));this['scroll']=new J(_0x4cd99b,_0x1d6a24);}['_enableCon'+'tentInput'](){for(;this['_disabledC'+'ontentInpu'+'tEntities']['length'];){const _0x3f5cb8=this['_disabledC'+'ontentInpu'+'tEntities']['pop']();_0x3f5cb8['element']&&(_0x3f5cb8['element']['useInput']=!(0x9bc*-0x1+-0x69f+-0x4f*-0x35));}this['_disabledC'+'ontentInpu'+'t']=!(-0x2db*0x1+-0x1a*-0xf1+0xacf*-0x2);}['_disableCo'+'ntentInput'](){const _0x3662b5=_0x3f89ae=>{_0x3f89ae['element']&&_0x3f89ae['element']['useInput']&&(this['_disabledC'+'ontentInpu'+'tEntities']['push'](_0x3f89ae),_0x3f89ae['element']['useInput']=!(0x1*0x4c7+-0x473+-0x53*0x1));const _0x41298a=_0x3f89ae['children'];for(let _0x3249a4=-0x1223+0x89f+0x984,_0x1db5ad=_0x41298a['length'];_0x3249a4<_0x1db5ad;_0x3249a4++)_0x3662b5(_0x41298a[_0x3249a4]);};if(this['_contentEn'+'tity']){const _0xa48903=this['_contentEn'+'tity']['children'];for(let _0x4177f5=-0x49f+0x217b+-0x737*0x4,_0x41b277=_0xa48903['length'];_0x4177f5<_0x41b277;_0x4177f5++)_0x3662b5(_0xa48903[_0x4177f5]);}this['_disabledC'+'ontentInpu'+'t']=!(0x581*0x2+0x1*0x1aa5+-0x25a7);}['onEnable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(-0x2*0x8ef+-0x1c43*0x1+0x2e21)),this['_setConten'+'tDraggingE'+'nabled'](!(-0x1fb3+-0x11*-0xd3+0x11b0)),this['_syncAll']();}['onDisable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(-0x1de5*0x1+-0x853*0x1+0x2639)),this['_setConten'+'tDraggingE'+'nabled'](!(0xe1a+0x21d2+-0x1*0x2feb));}['onRemove'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleEle'+'mentListen'+'ers']('off'),this['_destroyDr'+'agHelper']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x126cc1,_0x2ee8be){_0x126cc1['viewportEn'+'tity']&&(this['viewportEn'+'tity']=_0x2ee8be[_0x126cc1['viewportEn'+'tity']['getGuid']()]),_0x126cc1['contentEnt'+'ity']&&(this['contentEnt'+'ity']=_0x2ee8be[_0x126cc1['contentEnt'+'ity']['getGuid']()]),_0x126cc1['horizontal'+'ScrollbarE'+'ntity']&&(this['horizontal'+'ScrollbarE'+'ntity']=_0x2ee8be[_0x126cc1['horizontal'+'ScrollbarE'+'ntity']['getGuid']()]),_0x126cc1['verticalSc'+'rollbarEnt'+'ity']&&(this['verticalSc'+'rollbarEnt'+'ity']=_0x2ee8be[_0x126cc1['verticalSc'+'rollbarEnt'+'ity']['getGuid']()]);}}h(Cv,'EVENT_SETS'+'CROLL','set:scroll');const vO=0x2223*-0x1+0x11*0xac+-0x5*-0x48d;class xO{constructor(){h(this,'enabled',!(0x1108+-0x2*0x3fb+-0x912)),h(this,'horizontal'),h(this,'vertical'),h(this,'scrollMode'),h(this,'bounceAmou'+'nt'),h(this,'friction'),h(this,'dragThresh'+'old',vO),h(this,'useMouseWh'+'eel',!(-0x161*0x7+0x15a4+-0xbfd)),h(this,'mouseWheel'+'Sensitivit'+'y',new J(-0xb19+-0x1*-0x5af+-0x49*-0x13,0x16b*-0x6+0x1*0x1194+0xb*-0xd3)),h(this,'horizontal'+'ScrollbarV'+'isibility',0xe35*0x1+0xd5*0x2+-0xfdf),h(this,'verticalSc'+'rollbarVis'+'ibility',-0x522*0x1+0x79d*-0x5+0x2b33),h(this,'viewportEn'+'tity',null),h(this,'contentEnt'+'ity',null),h(this,'horizontal'+'ScrollbarE'+'ntity',null),h(this,'verticalSc'+'rollbarEnt'+'ity',null);}}const Ig=[{'name':'enabled','type':'boolean'},{'name':'horizontal','type':'boolean'},{'name':'vertical','type':'boolean'},{'name':'scrollMode','type':'number'},{'name':'bounceAmou'+'nt','type':'number'},{'name':'friction','type':'number'},{'name':'dragThresh'+'old','type':'number'},{'name':'useMouseWh'+'eel','type':'boolean'},{'name':'mouseWheel'+'Sensitivit'+'y','type':'vec2'},{'name':'horizontal'+'ScrollbarV'+'isibility','type':'number'},{'name':'verticalSc'+'rollbarVis'+'ibility','type':'number'}],TO=-0x37+0x62*0x49+-0x1bb1;class wO extends ct{constructor(_0x6348bf){super(_0x6348bf),this['id']='scrollview',this['ComponentT'+'ype']=Cv,this['DataType']=xO,this['schema']=Ig,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x251e0d,_0x1b121f,_0x5125c6){_0x1b121f['dragThresh'+'old']===void(0x43e+-0x284+-0x1ba)&&(_0x1b121f['dragThresh'+'old']=TO),_0x1b121f['useMouseWh'+'eel']===void(0x23b1*-0x1+-0x3*-0xa5b+0x8*0x94)&&(_0x1b121f['useMouseWh'+'eel']=!(-0x26b*-0x5+0x1d7*-0x11+0x1330)),_0x1b121f['mouseWheel'+'Sensitivit'+'y']===void(-0x8a9+0x1512+-0xc69)&&(_0x1b121f['mouseWheel'+'Sensitivit'+'y']=new J(-0x1b8f+-0x18b+0x1d1b,0x125f*0x1+0x39*0x65+-0x28db)),super['initialize'+'ComponentD'+'ata'](_0x251e0d,_0x1b121f,Ig),_0x251e0d['viewportEn'+'tity']=_0x1b121f['viewportEn'+'tity'],_0x251e0d['contentEnt'+'ity']=_0x1b121f['contentEnt'+'ity'],_0x251e0d['horizontal'+'ScrollbarE'+'ntity']=_0x1b121f['horizontal'+'ScrollbarE'+'ntity'],_0x251e0d['verticalSc'+'rollbarEnt'+'ity']=_0x1b121f['verticalSc'+'rollbarEnt'+'ity'];}['onUpdate'](_0x23ca4d){const _0x1d1a0a=this['store'];for(const _0x14e8ce in _0x1d1a0a){const _0x3ad973=_0x1d1a0a[_0x14e8ce]['entity'],_0x23599d=_0x3ad973['scrollview'];_0x23599d['enabled']&&_0x3ad973['enabled']&&_0x23599d['onUpdate']();}}['_onRemoveC'+'omponent'](_0x2ff398,_0x67700d){_0x67700d['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class Pv extends we{constructor(_0x5bcb24,_0x206032){super(_0x5bcb24,_0x206032),h(this,'_handleEnt'+'ity',null),h(this,'_evtHandle'+'EntityElem'+'entAdd',null),h(this,'_evtHandle'+'EntityChan'+'ges',[]),this['_toggleLif'+'ecycleList'+'eners']('on');}get['data'](){const _0x30216a=this['system']['store'][this['entity']['getGuid']()];return _0x30216a?_0x30216a['data']:null;}set['enabled'](_0x46d5d2){this['_setValue']('enabled',_0x46d5d2);}get['enabled'](){return this['data']['enabled'];}set['orientatio'+'n'](_0x2ffeed){this['_setValue']('orientatio'+'n',_0x2ffeed);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['value'](_0x48a2e4){this['_setValue']('value',_0x48a2e4);}get['value'](){return this['data']['value'];}set['handleSize'](_0x6070f1){this['_setValue']('handleSize',_0x6070f1);}get['handleSize'](){return this['data']['handleSize'];}set['handleEnti'+'ty'](_0x4b961b){if(this['_handleEnt'+'ity']===_0x4b961b)return;const _0x2aae09=typeof _0x4b961b=='string';this['_handleEnt'+'ity']&&_0x2aae09&&this['_handleEnt'+'ity']['getGuid']()===_0x4b961b||(this['_handleEnt'+'ity']&&this['_handleEnt'+'ityUnsubsc'+'ribe'](),_0x4b961b instanceof Ie?this['_handleEnt'+'ity']=_0x4b961b:_0x2aae09?this['_handleEnt'+'ity']=this['system']['app']['getEntityF'+'romIndex'](_0x4b961b)||null:this['_handleEnt'+'ity']=null,this['_handleEnt'+'ity']&&this['_handleEnt'+'itySubscri'+'be'](),this['_handleEnt'+'ity']?this['data']['handleEnti'+'ty']=this['_handleEnt'+'ity']['getGuid']():_0x2aae09&&_0x4b961b&&(this['data']['handleEnti'+'ty']=_0x4b961b));}get['handleEnti'+'ty'](){return this['_handleEnt'+'ity'];}['_setValue'](_0x29a58c,_0x43ab69){const _0x21b2df=this['data'],_0x48599a=_0x21b2df[_0x29a58c];_0x21b2df[_0x29a58c]=_0x43ab69,this['fire']('set',_0x29a58c,_0x48599a,_0x43ab69);}['_toggleLif'+'ecycleList'+'eners'](_0x5b3d52){this[_0x5b3d52]('set_value',this['_onSetValu'+'e'],this),this[_0x5b3d52]('set_handle'+'Size',this['_onSetHand'+'leSize'],this),this[_0x5b3d52]('set_orient'+'ation',this['_onSetOrie'+'ntation'],this);}['_handleEnt'+'itySubscri'+'be'](){this['_evtHandle'+'EntityElem'+'entAdd']=this['_handleEnt'+'ity']['on']('element:ad'+'d',this['_onHandleE'+'lementGain'],this),this['_handleEnt'+'ity']['element']&&this['_onHandleE'+'lementGain']();}['_handleEnt'+'ityUnsubsc'+'ribe'](){var _0x25f6b4,_0x927f54;(_0x25f6b4=this['_evtHandle'+'EntityElem'+'entAdd'])==null||_0x25f6b4['off'](),this['_evtHandle'+'EntityElem'+'entAdd']=null,(_0x927f54=this['_handleEnt'+'ity'])!=null&&_0x927f54['element']&&this['_onHandleE'+'lementLose']();}['_handleEnt'+'ityElement'+'Subscribe'](){const _0x4dfa31=this['_handleEnt'+'ity']['element'],_0x1d40fb=this['_evtHandle'+'EntityChan'+'ges'];_0x1d40fb['push'](_0x4dfa31['once']('beforeremo'+'ve',this['_onHandleE'+'lementLose'],this)),_0x1d40fb['push'](_0x4dfa31['on']('set:anchor',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x1d40fb['push'](_0x4dfa31['on']('set:margin',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x1d40fb['push'](_0x4dfa31['on']('set:pivot',this['_onSetHand'+'leAlignmen'+'t'],this));}['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](){for(let _0x568a53=0x88c+0x1*-0x11a7+0x91b;_0x568a53<this['_evtHandle'+'EntityChan'+'ges']['length'];_0x568a53++)this['_evtHandle'+'EntityChan'+'ges'][_0x568a53]['off']();this['_evtHandle'+'EntityChan'+'ges']['length']=-0x82*0x3b+0x186c+-0x1*-0x58a;}['_onHandleE'+'lementGain'](){this['_handleEnt'+'ityElement'+'Subscribe'](),this['_destroyDr'+'agHelper'](),this['_handleDra'+'gHelper']=new Do(this['_handleEnt'+'ity']['element'],this['_getAxis']()),this['_handleDra'+'gHelper']['on']('drag:move',this['_onHandleD'+'rag'],this),this['_updateHan'+'dlePositio'+'nAndSize']();}['_onHandleE'+'lementLose'](){this['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](),this['_destroyDr'+'agHelper']();}['_onHandleD'+'rag'](_0x517c7d){this['_handleEnt'+'ity']&&this['enabled']&&this['entity']['enabled']&&(this['value']=this['_handlePos'+'itionToScr'+'ollValue'](_0x517c7d[this['_getAxis']()]));}['_onSetValu'+'e'](_0x2eb1c6,_0x4ea8b8,_0x1a216f){Math['abs'](_0x1a216f-_0x4ea8b8)>-0x1a0f+0x1634+0x2f*0x15+0.00001&&(this['data']['value']=Y['clamp'](_0x1a216f,-0x2*-0x305+-0x1*0xa36+-0xc*-0x59,-0x178a+0x10b5+0xfa*0x7),this['_updateHan'+'dlePositio'+'nAndSize'](),this['fire']('set:value',this['data']['value']));}['_onSetHand'+'leSize'](_0x112cd0,_0x5aa396,_0x5985ed){Math['abs'](_0x5985ed-_0x5aa396)>0x45b*0x5+0x126b+0x2*-0x1419+0.00001&&(this['data']['handleSize']=Y['clamp'](_0x5985ed,-0x270+-0x6b*0x45+0x3*0xa6d,0x233*-0x5+-0x14*-0x191+-0x1454),this['_updateHan'+'dlePositio'+'nAndSize']());}['_onSetHand'+'leAlignmen'+'t'](){this['_updateHan'+'dlePositio'+'nAndSize']();}['_onSetOrie'+'ntation'](_0x7ed534,_0x2fc94e,_0x4b045c){var _0x5e991b;_0x4b045c!==_0x2fc94e&&((_0x5e991b=this['_handleEnt'+'ity'])!=null&&_0x5e991b['element'])&&(this['_handleEnt'+'ity']['element'][this['_getOpposi'+'teDimensio'+'n']()]=-0xc60+-0x1ed4+0x8a4*0x5);}['_updateHan'+'dlePositio'+'nAndSize'](){const _0x4bc954=this['_handleEnt'+'ity'],_0x19aeb6=_0x4bc954==null?void(0x2698*-0x1+0x79a*0x2+-0x7cc*-0x3):_0x4bc954['element'];if(_0x4bc954){const _0x3ecf3f=_0x4bc954['getLocalPo'+'sition']();_0x3ecf3f[this['_getAxis']()]=this['_getHandle'+'Position'](),_0x4bc954['setLocalPo'+'sition'](_0x3ecf3f);}_0x19aeb6&&(_0x19aeb6[this['_getDimens'+'ion']()]=this['_getHandle'+'Length']());}['_handlePos'+'itionToScr'+'ollValue'](_0x525656){return _0x525656*this['_getSign']()/this['_getUsable'+'TrackLengt'+'h']();}['_scrollVal'+'ueToHandle'+'Position'](_0x258e86){return _0x258e86*this['_getSign']()*this['_getUsable'+'TrackLengt'+'h']();}['_getUsable'+'TrackLengt'+'h'](){return Math['max'](this['_getTrackL'+'ength']()-this['_getHandle'+'Length'](),0x757+0x1f9*-0x1+0x6*-0xe5+0.001);}['_getTrackL'+'ength'](){return this['entity']['element']?this['orientatio'+'n']===Ae?this['entity']['element']['calculated'+'Width']:this['entity']['element']['calculated'+'Height']:0x95*0x1b+0x892+-0x1849;}['_getHandle'+'Length'](){return this['_getTrackL'+'ength']()*this['handleSize'];}['_getHandle'+'Position'](){return this['_scrollVal'+'ueToHandle'+'Position'](this['value']);}['_getSign'](){return this['orientatio'+'n']===Ae?-0x11e*0x15+-0x14d5*0x1+0x2c4c:-(-0xe*-0xbb+-0x6*0x1fc+0x1*0x1af);}['_getAxis'](){return this['orientatio'+'n']===Ae?'x':'y';}['_getDimens'+'ion'](){return this['orientatio'+'n']===Ae?'width':'height';}['_getOpposi'+'teDimensio'+'n'](){return this['orientatio'+'n']===Ae?'height':'width';}['_destroyDr'+'agHelper'](){this['_handleDra'+'gHelper']&&this['_handleDra'+'gHelper']['destroy']();}['_setHandle'+'DraggingEn'+'abled'](_0x5008f8){this['_handleDra'+'gHelper']&&(this['_handleDra'+'gHelper']['enabled']=_0x5008f8);}['onEnable'](){this['_setHandle'+'DraggingEn'+'abled'](!(-0x2573+0x15fd*0x1+0xf76));}['onDisable'](){this['_setHandle'+'DraggingEn'+'abled'](!(-0xb69*0x3+0x1ee1+0x35b));}['onRemove'](){this['_destroyDr'+'agHelper'](),this['_toggleLif'+'ecycleList'+'eners']('off');}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x53bcb0,_0x1fd3cb){_0x53bcb0['handleEnti'+'ty']&&(this['handleEnti'+'ty']=_0x1fd3cb[_0x53bcb0['handleEnti'+'ty']['getGuid']()]);}}h(Pv,'EVENT_SETV'+'ALUE','set:value');class EO{constructor(){h(this,'enabled',!(0x1d3c+0x5d5*-0x3+-0xbbd)),h(this,'orientatio'+'n',Ae),h(this,'value',-0x58d+0x675+-0xe8),h(this,'handleSize',0x1*-0x246+0x2*-0x1+0x248),h(this,'handleEnti'+'ty',null);}}const Lg=[{'name':'enabled','type':'boolean'},{'name':'orientatio'+'n','type':'number'},{'name':'value','type':'number'},{'name':'handleSize','type':'number'}];class bO extends ct{constructor(_0x4169c7){super(_0x4169c7),this['id']='scrollbar',this['ComponentT'+'ype']=Pv,this['DataType']=EO,this['schema']=Lg,this['on']('add',this['_onAddComp'+'onent'],this),this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x1efe7a,_0x4df721,_0x5ebf46){super['initialize'+'ComponentD'+'ata'](_0x1efe7a,_0x4df721,Lg),_0x1efe7a['handleEnti'+'ty']=_0x4df721['handleEnti'+'ty'];}['_onAddComp'+'onent'](_0xbb297b){_0xbb297b['fire']('scrollbar:'+'add');}['_onRemoveC'+'omponent'](_0x2d2a97,_0x5a9ee2){_0x5a9ee2['onRemove']();}}const AO={'volume':0x0,'pitch':0x0,'loop':!(0x22ed+-0x2353+-0x67*-0x1),'startTime':0x0,'duration':0x0,'position':new D(),'maxDistance':0x0,'refDistance':0x0,'rollOffFactor':0x0,'distanceModel':0x0,'onPlay':null,'onPause':null,'onResume':null,'onStop':null,'onEnd':null};class Vi extends me{constructor(_0x5b8583,_0x14f95a='Untitled',_0x219463={}){super(),h(this,'name'),h(this,'instances',[]),(this['_component']=_0x5b8583,this['_assets']=_0x5b8583['system']['app']['assets'],this['_manager']=_0x5b8583['system']['manager'],this['name']=_0x14f95a,this['_volume']=_0x219463['volume']!==void(0x2307+-0x1*-0x114b+-0x3452)?Y['clamp'](Number(_0x219463['volume'])||0x8ca*0x3+0x217b+0x13f3*-0x3,-0x2632+0xae1+0xbd*0x25,-0x2fc*0x4+-0xc64+0x1855):-0x177d+0x26*0xae+-0x256*0x1,this['_pitch']=_0x219463['pitch']!==void(-0xa71+0x14e7+-0xa76)?Math['max'](0xaef+0x27+0x3*-0x3b2+0.01,Number(_0x219463['pitch'])||0x1*0x1f49+-0x15*-0x12d+-0x37fa):0x463+-0x9*-0x2f+-0x609,this['_loop']=!!(_0x219463['loop']!==void(-0x8*-0x1d+0x1f6+-0x2de)&&_0x219463['loop']),this['_duration']=_0x219463['duration']>-0x2514+-0x1*0x2173+0x4687?_0x219463['duration']:null,this['_startTime']=Math['max'](0x75d+-0xe9*0x12+-0x905*-0x1,Number(_0x219463['startTime'])||0xf+-0x18d7+0x18c8),this['_overlap']=!!_0x219463['overlap'],this['_autoPlay']=!!_0x219463['autoPlay'],this['_firstNode']=null,this['_lastNode']=null,this['_asset']=_0x219463['asset'],this['_asset']instanceof pe&&(this['_asset']=this['_asset']['id']),this['_onInstanc'+'ePlayHandl'+'er']=this['_onInstanc'+'ePlay']['bind'](this),this['_onInstanc'+'ePauseHand'+'ler']=this['_onInstanc'+'ePause']['bind'](this),this['_onInstanc'+'eResumeHan'+'dler']=this['_onInstanc'+'eResume']['bind'](this),this['_onInstanc'+'eStopHandl'+'er']=this['_onInstanc'+'eStop']['bind'](this),this['_onInstanc'+'eEndHandle'+'r']=this['_onInstanc'+'eEnd']['bind'](this));}['play'](_0xbec907){if(this['overlap']||this['stop'](),!this['isLoaded']&&!this['_hasAsset']()){w['warn']('Trying\x20to\x20'+'play\x20Sound'+'Slot\x20'+this['name']+('\x20but\x20it\x20is'+'\x20not\x20loade'+'d\x20and\x20does'+'n\x27t\x20have\x20a'+'n\x20asset.'));return;}let _0x21a103=_0xbec907;if(_0x21a103||(_0x21a103=this['_createIns'+'tance'](),this['instances']['push'](_0x21a103)),this['isLoaded'])_0x21a103['play']();else{const _0x319534=function(_0x4057ab){const _0xe9bcdf=_0x21a103['_playWhenL'+'oaded'];_0x21a103['sound']=_0x4057ab,_0xe9bcdf&&_0x21a103['play']();};this['off']('load',_0x319534),this['once']('load',_0x319534),this['load']();}return _0x21a103;}['pause'](){let _0x4e3b02=!(-0x2*-0x6c2+0x1e0d+0x22*-0x148);const _0x138beb=this['instances'];for(let _0x1d5267=-0x44d+0x1f6*0x11+-0x1d09,_0x33949b=_0x138beb['length'];_0x1d5267<_0x33949b;_0x1d5267++)_0x138beb[_0x1d5267]['pause']()&&(_0x4e3b02=!(-0x54b+0x1145+-0x2a*0x49));return _0x4e3b02;}['resume'](){let _0x3c4b1e=!(-0x1*0x1752+0x841*-0x3+0x3016);const _0x323d2f=this['instances'];for(let _0x4ba092=-0x1b01+0x6c2+0x143f,_0x1d5a9a=_0x323d2f['length'];_0x4ba092<_0x1d5a9a;_0x4ba092++)_0x323d2f[_0x4ba092]['resume']()&&(_0x3c4b1e=!(0x48f+-0x1931+0xa51*0x2));return _0x3c4b1e;}['stop'](){let _0x1a1541=!(-0xc3b*-0x3+0x110e*0x2+-0x46cc);const _0xf59740=this['instances'];let _0x24c205=_0xf59740['length'];for(;_0x24c205--;)_0xf59740[_0x24c205]['stop'](),_0x1a1541=!(-0x48b*-0x1+0x1*0xffd+-0x1488);return _0xf59740['length']=0x14ae+-0x10c3+-0x3eb,_0x1a1541;}['load'](){if(!this['_hasAsset']())return;const _0x146862=this['_assets']['get'](this['_asset']);if(!_0x146862){this['_assets']['off']('add:'+this['_asset'],this['_onAssetAd'+'d'],this),this['_assets']['once']('add:'+this['_asset'],this['_onAssetAd'+'d'],this);return;}if(_0x146862['off']('remove',this['_onAssetRe'+'moved'],this),_0x146862['on']('remove',this['_onAssetRe'+'moved'],this),!_0x146862['resource']){_0x146862['off']('load',this['_onAssetLo'+'ad'],this),_0x146862['once']('load',this['_onAssetLo'+'ad'],this),this['_assets']['load'](_0x146862);return;}this['fire']('load',_0x146862['resource']);}['setExterna'+'lNodes'](_0x46e7cb,_0x162367){if(!_0x46e7cb){console['error']('The\x20firstN'+'ode\x20must\x20h'+'ave\x20a\x20vali'+'d\x20AudioNod'+'e');return;}if(_0x162367||(_0x162367=_0x46e7cb),this['_firstNode']=_0x46e7cb,this['_lastNode']=_0x162367,!this['_overlap']){const _0x5652f5=this['instances'];for(let _0x35ac13=0x7*-0x203+-0x566*-0x7+-0x17b5,_0x25ed32=_0x5652f5['length'];_0x35ac13<_0x25ed32;_0x35ac13++)_0x5652f5[_0x35ac13]['setExterna'+'lNodes'](_0x46e7cb,_0x162367);}}['clearExter'+'nalNodes'](){if(this['_firstNode']=null,this['_lastNode']=null,!this['_overlap']){const _0x3ecac7=this['instances'];for(let _0x4e05ab=-0x2*0x21b+0xe12*-0x1+0x9*0x208,_0x469260=_0x3ecac7['length'];_0x4e05ab<_0x469260;_0x4e05ab++)_0x3ecac7[_0x4e05ab]['clearExter'+'nalNodes']();}}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_hasAsset'](){return this['_asset']!=null;}['_createIns'+'tance'](){let _0x164357=null;const _0x3579ff=this['_component'];let _0x285da0=null;if(this['_hasAsset']()){const _0x46cf8c=this['_assets']['get'](this['_asset']);_0x46cf8c&&(_0x285da0=_0x46cf8c['resource']);}const _0x1a7aef=AO;return _0x1a7aef['volume']=this['_volume']*_0x3579ff['volume'],_0x1a7aef['pitch']=this['_pitch']*_0x3579ff['pitch'],_0x1a7aef['loop']=this['_loop'],_0x1a7aef['startTime']=this['_startTime'],_0x1a7aef['duration']=this['_duration'],_0x1a7aef['onPlay']=this['_onInstanc'+'ePlayHandl'+'er'],_0x1a7aef['onPause']=this['_onInstanc'+'ePauseHand'+'ler'],_0x1a7aef['onResume']=this['_onInstanc'+'eResumeHan'+'dler'],_0x1a7aef['onStop']=this['_onInstanc'+'eStopHandl'+'er'],_0x1a7aef['onEnd']=this['_onInstanc'+'eEndHandle'+'r'],_0x3579ff['positional']?(_0x1a7aef['position']['copy'](_0x3579ff['entity']['getPositio'+'n']()),_0x1a7aef['maxDistanc'+'e']=_0x3579ff['maxDistanc'+'e'],_0x1a7aef['refDistanc'+'e']=_0x3579ff['refDistanc'+'e'],_0x1a7aef['rollOffFac'+'tor']=_0x3579ff['rollOffFac'+'tor'],_0x1a7aef['distanceMo'+'del']=_0x3579ff['distanceMo'+'del'],_0x164357=new Ya(this['_manager'],_0x285da0,_0x1a7aef)):_0x164357=new As(this['_manager'],_0x285da0,_0x1a7aef),this['_firstNode']&&_0x164357['setExterna'+'lNodes'](this['_firstNode'],this['_lastNode']),_0x164357;}['_onInstanc'+'ePlay'](_0x4ed5ba){this['fire']('play',_0x4ed5ba),this['_component']['fire']('play',this,_0x4ed5ba);}['_onInstanc'+'ePause'](_0x29fc3e){this['fire']('pause',_0x29fc3e),this['_component']['fire']('pause',this,_0x29fc3e);}['_onInstanc'+'eResume'](_0x29f366){this['fire']('resume',_0x29f366),this['_component']['fire']('resume',this,_0x29f366);}['_onInstanc'+'eStop'](_0x2ec766){const _0x2fd377=this['instances']['indexOf'](_0x2ec766);_0x2fd377!==-(-0x5b8+0x672*-0x4+0x1f81)&&this['instances']['splice'](_0x2fd377,0x1efa+-0x1fac+-0x1*-0xb3),this['fire']('stop',_0x2ec766),this['_component']['fire']('stop',this,_0x2ec766);}['_onInstanc'+'eEnd'](_0x5428cd){const _0x5c9189=this['instances']['indexOf'](_0x5428cd);_0x5c9189!==-(0x5f3+-0x5d1+-0x21)&&this['instances']['splice'](_0x5c9189,-0x5b1*0x3+-0x45d*0x1+0x1571),this['fire']('end',_0x5428cd),this['_component']['fire']('end',this,_0x5428cd);}['_onAssetAd'+'d'](_0x34afa6){this['load']();}['_onAssetLo'+'ad'](_0x5de175){this['load']();}['_onAssetRe'+'moved'](_0x207ddb){_0x207ddb['off']('remove',this['_onAssetRe'+'moved'],this),this['_assets']['off']('add:'+_0x207ddb['id'],this['_onAssetAd'+'d'],this),this['stop']();}['updatePosi'+'tion'](_0x500db1){const _0xb222c7=this['instances'];for(let _0x361de9=0x5*-0x565+0x1e67+-0x36e,_0x20ae83=_0xb222c7['length'];_0x361de9<_0x20ae83;_0x361de9++)_0xb222c7[_0x361de9]['position']=_0x500db1;}set['asset'](_0x4f8f99){const _0x984a7d=this['_asset'];if(_0x984a7d){this['_assets']['off']('add:'+_0x984a7d,this['_onAssetAd'+'d'],this);const _0x7adf6e=this['_assets']['get'](_0x984a7d);_0x7adf6e&&_0x7adf6e['off']('remove',this['_onAssetRe'+'moved'],this);}this['_asset']=_0x4f8f99,this['_asset']instanceof pe&&(this['_asset']=this['_asset']['id']),this['_hasAsset']()&&this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['load']();}get['asset'](){return this['_asset'];}set['autoPlay'](_0x3a552e){this['_autoPlay']=!!_0x3a552e;}get['autoPlay'](){return this['_autoPlay'];}set['duration'](_0x247984){if(this['_duration']=Math['max'](0x2*0x973+-0x1c83+0x99d,Number(_0x247984)||0x7c4+-0x2*-0x126b+-0x42*0xad)||null,!this['_overlap']){const _0x6ad0ef=this['instances'];for(let _0x5bb0d7=-0x1ea6*0x1+0x7*-0x3be+0x4*0xe36,_0x154b90=_0x6ad0ef['length'];_0x5bb0d7<_0x154b90;_0x5bb0d7++)_0x6ad0ef[_0x5bb0d7]['duration']=this['_duration'];}}get['duration'](){let _0x2d8658=-0x156+0xaaf+0x1*-0x959;if(this['_hasAsset']()){const _0x22a8e9=this['_assets']['get'](this['_asset']);_0x2d8658=_0x22a8e9!=null&&_0x22a8e9['resource']?_0x22a8e9['resource']['duration']:0x18ce+0x97+0x21*-0xc5;}return this['_duration']!=null?this['_duration']%(_0x2d8658||-0x11*-0x125+0x10db+0xa9*-0x37):_0x2d8658;}get['isLoaded'](){if(this['_hasAsset']()){const _0x3e326e=this['_assets']['get'](this['_asset']);if(_0x3e326e)return!!_0x3e326e['resource'];}return!(-0x1*0x1b00+-0x3c8*0x2+0x2291*0x1);}get['isPaused'](){const _0x25e669=this['instances'],_0x2e4782=_0x25e669['length'];if(_0x2e4782===0x2*0x5ef+-0x286+-0x958)return!(0xb*0x1ac+-0x1*-0xc83+-0x1ee6);for(let _0x4214dd=0x1*0x26ab+-0x225c+-0x1*0x44f;_0x4214dd<_0x2e4782;_0x4214dd++)if(!_0x25e669[_0x4214dd]['isPaused'])return!(0x3c9*0x1+0xd1*-0x1f+0x1587);return!(0x11*0xe5+-0x14ce+0x599);}get['isPlaying'](){const _0x5bab98=this['instances'];for(let _0x160b8=-0x153a+0x209*0x7+0x6fb,_0x22e943=_0x5bab98['length'];_0x160b8<_0x22e943;_0x160b8++)if(_0x5bab98[_0x160b8]['isPlaying'])return!(0x2058+0x75d+-0x27b5);return!(-0x1bab+0x18a6+0x9*0x56);}get['isStopped'](){const _0x52f63b=this['instances'];for(let _0x586ed6=-0x3*0x543+-0x5*0x629+0x2e96,_0x29f36b=_0x52f63b['length'];_0x586ed6<_0x29f36b;_0x586ed6++)if(!_0x52f63b[_0x586ed6]['isStopped'])return!(-0xc*-0x182+0x1b23+0x2*-0x169d);return!(0x1c88+-0x22ea+0x662);}set['loop'](_0x2759f6){this['_loop']=!!_0x2759f6;const _0x2110c2=this['instances'];for(let _0x28e395=-0xb9a+-0x18eb+-0x1*-0x2485,_0x259716=_0x2110c2['length'];_0x28e395<_0x259716;_0x28e395++)_0x2110c2[_0x28e395]['loop']=this['_loop'];}get['loop'](){return this['_loop'];}set['overlap'](_0x9ae33a){this['_overlap']=!!_0x9ae33a;}get['overlap'](){return this['_overlap'];}set['pitch'](_0x5eda90){if(this['_pitch']=Math['max'](Number(_0x5eda90)||0x1038+-0x99+-0x535*0x3,-0x1b*0x46+-0x1*-0x3b9+0x3a9*0x1+0.01),!this['_overlap']){const _0x4e02e1=this['instances'];for(let _0x6a977a=-0x1*0xeda+-0xc62+0x1b3c,_0x3538cf=_0x4e02e1['length'];_0x6a977a<_0x3538cf;_0x6a977a++)_0x4e02e1[_0x6a977a]['pitch']=this['pitch']*this['_component']['pitch'];}}get['pitch'](){return this['_pitch'];}set['startTime'](_0x42ef66){if(this['_startTime']=Math['max'](0x83e*-0x1+-0x67e+0xebc,Number(_0x42ef66)||0x1d6*0x11+0x1a06+0x1c9e*-0x2),!this['_overlap']){const _0x504893=this['instances'];for(let _0x2ccfe5=-0x15f+-0x491+0x5f0,_0x3e4eb0=_0x504893['length'];_0x2ccfe5<_0x3e4eb0;_0x2ccfe5++)_0x504893[_0x2ccfe5]['startTime']=this['_startTime'];}}get['startTime'](){return this['_startTime'];}set['volume'](_0x3dfcff){if(this['_volume']=Y['clamp'](Number(_0x3dfcff)||-0x9f3+0x1a36+-0x1043,-0x3*-0x70a+0x38f+0x1*-0x18ad,-0x2a5*0xe+-0x2551+0x4a58),!this['_overlap']){const _0x27c7e8=this['instances'];for(let _0x1ea04c=0x2b*-0x8a+0x1*-0x2164+0x3892,_0x559d19=_0x27c7e8['length'];_0x1ea04c<_0x559d19;_0x1ea04c++)_0x27c7e8[_0x1ea04c]['volume']=this['_volume']*this['_component']['volume'];}}get['volume'](){return this['_volume'];}}h(Vi,'EVENT_PLAY','play'),h(Vi,'EVENT_PAUS'+'E','pause'),h(Vi,'EVENT_RESU'+'ME','resume'),h(Vi,'EVENT_STOP','stop'),h(Vi,'EVENT_END','end'),h(Vi,'EVENT_LOAD','load');class Xr extends we{constructor(){super(...arguments),h(this,'_volume',0x1f*0x81+0x30*0x58+-0x2*0x100f),h(this,'_pitch',0x81b+0x26f2+-0x2f0c),h(this,'_positiona'+'l',!(0x2*-0x4f3+0x24ee+-0x1b08)),h(this,'_refDistan'+'ce',0x82*0x2b+0xe82+-0x2457),h(this,'_maxDistan'+'ce',-0x49d9+0x4096+-0x1*-0x3053),h(this,'_rollOffFa'+'ctor',-0x171c+-0x2564+0x3c81),h(this,'_distanceM'+'odel',pp),h(this,'_slots',{}),h(this,'_playingBe'+'foreDisabl'+'e',{});}['_updateSou'+'ndInstance'+'s'](_0x4672fe,_0x55f4c5,_0x37e22f){const _0x47c1b4=this['_slots'];for(const _0x5f48ec in _0x47c1b4){const _0x2f4a22=_0x47c1b4[_0x5f48ec];if(!_0x2f4a22['overlap']){const _0x4bc1df=_0x2f4a22['instances'];for(let _0x191e6d=-0x1*0x84e+0x7*0xf9+0x17f,_0x3d7081=_0x4bc1df['length'];_0x191e6d<_0x3d7081;_0x191e6d++)_0x4bc1df[_0x191e6d][_0x4672fe]=_0x37e22f?_0x2f4a22[_0x4672fe]*_0x55f4c5:_0x55f4c5;}}}set['distanceMo'+'del'](_0x6e2cd8){this['_distanceM'+'odel']=_0x6e2cd8,this['_updateSou'+'ndInstance'+'s']('distanceMo'+'del',_0x6e2cd8,!(0x59e*0x5+-0x1569+-0x6ac));}get['distanceMo'+'del'](){return this['_distanceM'+'odel'];}set['maxDistanc'+'e'](_0x1506d3){this['_maxDistan'+'ce']=_0x1506d3,this['_updateSou'+'ndInstance'+'s']('maxDistanc'+'e',_0x1506d3,!(0x1d75*0x1+-0x1c19+-0x1*0x15b));}get['maxDistanc'+'e'](){return this['_maxDistan'+'ce'];}set['refDistanc'+'e'](_0x108669){this['_refDistan'+'ce']=_0x108669,this['_updateSou'+'ndInstance'+'s']('refDistanc'+'e',_0x108669,!(0x18fa+0x1*0xe8f+0x8*-0x4f1));}get['refDistanc'+'e'](){return this['_refDistan'+'ce'];}set['rollOffFac'+'tor'](_0x4bbb50){this['_rollOffFa'+'ctor']=_0x4bbb50,this['_updateSou'+'ndInstance'+'s']('rollOffFac'+'tor',_0x4bbb50,!(-0x6b*0x37+0x107*0x1f+-0x8db*0x1));}get['rollOffFac'+'tor'](){return this['_rollOffFa'+'ctor'];}set['pitch'](_0x15626e){this['_pitch']=_0x15626e,this['_updateSou'+'ndInstance'+'s']('pitch',_0x15626e,!(0x1fe7+-0xaec+-0x29*0x83));}get['pitch'](){return this['_pitch'];}set['volume'](_0x304297){this['_volume']=_0x304297,this['_updateSou'+'ndInstance'+'s']('volume',_0x304297,!(-0x34d+-0x14cd+-0x2*-0xc0d));}get['volume'](){return this['_volume'];}set['positional'](_0x3e44c9){this['_positiona'+'l']=_0x3e44c9;const _0x45989d=this['_slots'];for(const _0x565cd7 in _0x45989d){const _0x4bac62=_0x45989d[_0x565cd7];if(!_0x4bac62['overlap']){const _0x64e80=_0x4bac62['instances'],_0x1294b7=_0x64e80['length'];for(let _0x1f74c1=_0x1294b7-(0x13fb+0x877+-0x1c71);_0x1f74c1>=-0x1*0x23ad+0xfff+0x13ae;_0x1f74c1--){const _0x47bab4=_0x64e80[_0x1f74c1]['isPlaying']||_0x64e80[_0x1f74c1]['isSuspende'+'d'],_0x14498a=_0x64e80[_0x1f74c1]['currentTim'+'e'];_0x47bab4&&_0x64e80[_0x1f74c1]['stop']();const _0x357b9e=_0x4bac62['_createIns'+'tance']();_0x47bab4&&(_0x357b9e['play'](),_0x357b9e['currentTim'+'e']=_0x14498a),_0x64e80['push'](_0x357b9e);}}}}get['positional'](){return this['_positiona'+'l'];}set['slots'](_0x253e3c){const _0x272752=this['_slots'];if(_0x272752){for(const _0x5086ae in _0x272752)_0x272752[_0x5086ae]['stop']();}const _0x7f6f35={};for(const _0x220da4 in _0x253e3c)_0x253e3c[_0x220da4]instanceof Vi?_0x7f6f35[_0x253e3c[_0x220da4]['name']]=_0x253e3c[_0x220da4]:_0x253e3c[_0x220da4]['name']&&(_0x7f6f35[_0x253e3c[_0x220da4]['name']]=new Vi(this,_0x253e3c[_0x220da4]['name'],_0x253e3c[_0x220da4]));this['_slots']=_0x7f6f35,this['enabled']&&this['entity']['enabled']&&this['onEnable']();}get['slots'](){return this['_slots'];}['onEnable'](){if(this['system']['_inTools'])return;const _0x2d0fc1=this['_slots'],_0x391452=this['_playingBe'+'foreDisabl'+'e'];for(const _0x4808d0 in _0x2d0fc1){const _0x43539d=_0x2d0fc1[_0x4808d0];_0x43539d['autoPlay']&&_0x43539d['isStopped']?_0x43539d['play']():_0x391452[_0x4808d0]?_0x43539d['resume']():_0x43539d['isLoaded']||_0x43539d['load']();}}['onDisable'](){const _0x336d96=this['_slots'],_0x2d5f1a={};for(const _0x530520 in _0x336d96)_0x336d96[_0x530520]['overlap']||_0x336d96[_0x530520]['isPlaying']&&(_0x336d96[_0x530520]['pause'](),_0x2d5f1a[_0x530520]=!(-0x2621+0x5*0x75a+0x15f));this['_playingBe'+'foreDisabl'+'e']=_0x2d5f1a;}['onRemove'](){this['off']();}['addSlot'](_0x22507e,_0x3b3223){const _0x1c0e9f=this['_slots'];if(_0x1c0e9f[_0x22507e])return w['warn']('A\x20sound\x20sl'+'ot\x20with\x20na'+'me\x20'+_0x22507e+('\x20already\x20e'+'xists\x20on\x20E'+'ntity\x20')+this['entity']['path']),null;const _0x54cf81=new Vi(this,_0x22507e,_0x3b3223);return _0x1c0e9f[_0x22507e]=_0x54cf81,_0x54cf81['autoPlay']&&this['enabled']&&this['entity']['enabled']&&_0x54cf81['play'](),_0x54cf81;}['removeSlot'](_0x21778f){const _0x351ddf=this['_slots'];_0x351ddf[_0x21778f]&&(_0x351ddf[_0x21778f]['stop'](),delete _0x351ddf[_0x21778f]);}['slot'](_0xe2cb5b){return this['_slots'][_0xe2cb5b];}['_getSlotPr'+'operty'](_0x308fce,_0xbbb128){if(!this['enabled']||!this['entity']['enabled'])return;const _0x16530d=this['_slots'][_0x308fce];if(!_0x16530d){w['warn']('Trying\x20to\x20'+'get\x20'+_0xbbb128+('\x20from\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20')+_0x308fce+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}return _0x16530d[_0xbbb128];}['isPlaying'](_0x1239dc){return this['_getSlotPr'+'operty'](_0x1239dc,'isPlaying')||!(0x1d75+0x4cd+0xed*-0x25);}['isLoaded'](_0x2e0ff9){return this['_getSlotPr'+'operty'](_0x2e0ff9,'isLoaded')||!(0xb02+-0x2*-0x580+-0x1601);}['isPaused'](_0x5a8c1c){return this['_getSlotPr'+'operty'](_0x5a8c1c,'isPaused')||!(-0x17*-0x1a6+0x8*0xc1+-0x2bf1);}['isStopped'](_0x3ff709){return this['_getSlotPr'+'operty'](_0x3ff709,'isStopped')||!(0x58+0x1*-0x1ac4+0x1a6d);}['play'](_0x5ae6c1){if(!this['enabled']||!this['entity']['enabled'])return null;const _0x1d1d3e=this['_slots'][_0x5ae6c1];return _0x1d1d3e?_0x1d1d3e['play']():(w['warn']('Trying\x20to\x20'+'play\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0x5ae6c1+('\x20which\x20doe'+'s\x20not\x20exis'+'t')),null);}['pause'](_0x380206){const _0x724a31=this['_slots'];if(_0x380206){const _0x471f99=_0x724a31[_0x380206];if(!_0x471f99){w['warn']('Trying\x20to\x20'+'pause\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20'+_0x380206+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x471f99['pause']();}else{for(const _0x28a60b in _0x724a31)_0x724a31[_0x28a60b]['pause']();}}['resume'](_0x2735e7){const _0x40595f=this['_slots'];if(_0x2735e7){const _0x277ed1=_0x40595f[_0x2735e7];if(!_0x277ed1){w['warn']('Trying\x20to\x20'+'resume\x20sou'+'nd\x20slot\x20wi'+'th\x20name\x20'+_0x2735e7+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x277ed1['isPaused']&&_0x277ed1['resume']();}else{for(const _0x200fb2 in _0x40595f)_0x40595f[_0x200fb2]['resume']();}}['stop'](_0x22ff2b){const _0x48fee3=this['_slots'];if(_0x22ff2b){const _0x4eb946=_0x48fee3[_0x22ff2b];if(!_0x4eb946){w['warn']('Trying\x20to\x20'+'stop\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0x22ff2b+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x4eb946['stop']();}else{for(const _0x4fa2db in _0x48fee3)_0x48fee3[_0x4fa2db]['stop']();}}}h(Xr,'EVENT_PLAY','play'),h(Xr,'EVENT_PAUS'+'E','pause'),h(Xr,'EVENT_RESU'+'ME','resume'),h(Xr,'EVENT_STOP','stop'),h(Xr,'EVENT_END','end');class CO{constructor(){this['enabled']=!(0x1d14+0x1250+0x1*-0x2f64);}}const Mv=['enabled'];class PO extends ct{constructor(_0x456a10){super(_0x456a10),this['id']='sound',this['ComponentT'+'ype']=Xr,this['DataType']=CO,this['schema']=Mv,this['manager']=_0x456a10['soundManag'+'er'],w['assert'](this['manager'],'SoundCompo'+'nentSystem'+'\x20cannot\x20be'+'\x20created\x20w'+'ithout\x20sou'+'nd\x20manager'),this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['volume'](_0x16164f){this['manager']['volume']=_0x16164f;}get['volume'](){return this['manager']['volume'];}get['context'](){return gl()?this['manager']['context']:(w['warn']('WARNING:\x20A'+'udio\x20conte'+'xt\x20is\x20not\x20'+'supported\x20'+'on\x20this\x20br'+'owser'),null);}['initialize'+'ComponentD'+'ata'](_0x49edfa,_0x3d345b,_0x56d742){_0x56d742=['volume','pitch','positional','refDistanc'+'e','maxDistanc'+'e','rollOffFac'+'tor','distanceMo'+'del','slots'];for(let _0x24db3b=-0x23ec+-0x1c34+0x402*0x10;_0x24db3b<_0x56d742['length'];_0x24db3b++)_0x3d345b['hasOwnProp'+'erty'](_0x56d742[_0x24db3b])&&(_0x49edfa[_0x56d742[_0x24db3b]]=_0x3d345b[_0x56d742[_0x24db3b]]);super['initialize'+'ComponentD'+'ata'](_0x49edfa,_0x3d345b,['enabled']);}['cloneCompo'+'nent'](_0x4a97e5,_0x5ce75e){const _0x912227=_0x4a97e5['sound'],_0x51c651=_0x912227['slots'],_0x5e01ce={};for(const _0x3fa168 in _0x51c651){const _0x521835=_0x51c651[_0x3fa168];_0x5e01ce[_0x3fa168]={'name':_0x521835['name'],'volume':_0x521835['volume'],'pitch':_0x521835['pitch'],'loop':_0x521835['loop'],'duration':_0x521835['duration'],'startTime':_0x521835['startTime'],'overlap':_0x521835['overlap'],'autoPlay':_0x521835['autoPlay'],'asset':_0x521835['asset']};}const _0x442ff5={'distanceModel':_0x912227['distanceMo'+'del'],'enabled':_0x912227['enabled'],'maxDistance':_0x912227['maxDistanc'+'e'],'pitch':_0x912227['pitch'],'positional':_0x912227['positional'],'refDistance':_0x912227['refDistanc'+'e'],'rollOffFactor':_0x912227['rollOffFac'+'tor'],'slots':_0x5e01ce,'volume':_0x912227['volume']};return this['addCompone'+'nt'](_0x5ce75e,_0x442ff5);}['onUpdate'](_0x3624ac){const _0x1bfce7=this['store'];for(const _0x509932 in _0x1bfce7)if(_0x1bfce7['hasOwnProp'+'erty'](_0x509932)){const _0xf84541=_0x1bfce7[_0x509932]['entity'];if(_0xf84541['enabled']){const _0x2ec3d9=_0xf84541['sound'];if(_0x2ec3d9['enabled']&&_0x2ec3d9['positional']){const _0x10c068=_0xf84541['getPositio'+'n'](),_0x46664f=_0x2ec3d9['slots'];for(const _0xf7585c in _0x46664f)_0x46664f[_0xf7585c]['updatePosi'+'tion'](_0x10c068);}}}}['onBeforeRe'+'move'](_0x809229,_0x250564){const _0x3cb8b2=_0x250564['slots'];for(const _0x3a2c8c in _0x3cb8b2)_0x3cb8b2[_0x3a2c8c]['overlap']||_0x3cb8b2[_0x3a2c8c]['stop']();_0x250564['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Xr['prototype'],Mv);const Rg='simple',Og='animated';class Gi extends me{constructor(_0x2eeb1d,_0x819c2a){super(),h(this,'_evtSetMes'+'hes',null),(this['_component']=_0x2eeb1d,this['_frame']=0x20bf+0x223*-0xd+-0xd4*0x6,this['_sprite']=null,this['_spriteAss'+'et']=null,this['spriteAsse'+'t']=_0x819c2a['spriteAsse'+'t'],this['name']=_0x819c2a['name'],this['fps']=_0x819c2a['fps']||0x1e17+0x93c*0x1+-0x2753,this['loop']=_0x819c2a['loop']||!(0x24bc+-0x17*0x14b+-0x6fe),this['_playing']=!(-0xd91*0x1+0xda4+-0x12),this['_paused']=!(0x263+0x1fcb+-0x222d),this['_time']=0x34d+-0x1309*0x1+-0xfbc*-0x1);}get['duration'](){if(this['_sprite']){const _0x1150bc=this['fps']||Number['MIN_VALUE'];return this['_sprite']['frameKeys']['length']/Math['abs'](_0x1150bc);}return 0x484+-0xe75+0x9f1;}set['frame'](_0x51fb6e){this['_setFrame'](_0x51fb6e);const _0x29a3cb=this['fps']||Number['MIN_VALUE'];this['_setTime'](this['_frame']/_0x29a3cb);}get['frame'](){return this['_frame'];}get['isPaused'](){return this['_paused'];}get['isPlaying'](){return this['_playing'];}set['sprite'](_0x44de1b){var _0x51e35a;if(this['_sprite']&&((_0x51e35a=this['_evtSetMes'+'hes'])==null||_0x51e35a['off'](),this['_evtSetMes'+'hes']=null,this['_sprite']['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['off']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['off']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_sprite']=_0x44de1b,this['_sprite']&&(this['_evtSetMes'+'hes']=this['_sprite']['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['on']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['on']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_component']['currentCli'+'p']===this){let _0x32d62a;!_0x44de1b||!_0x44de1b['atlas']?(_0x32d62a=this['_component']['_meshInsta'+'nce'],_0x32d62a&&(_0x32d62a['deletePara'+'meter']('texture_em'+'issiveMap'),_0x32d62a['deletePara'+'meter']('texture_op'+'acityMap')),this['_component']['_hideModel']()):(_0x44de1b['atlas']['texture']&&(_0x32d62a=this['_component']['_meshInsta'+'nce'],_0x32d62a&&(_0x32d62a['setParamet'+'er']('texture_em'+'issiveMap',_0x44de1b['atlas']['texture']),_0x32d62a['setParamet'+'er']('texture_op'+'acityMap',_0x44de1b['atlas']['texture'])),this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['_component']['_showModel']()),this['time']&&this['fps']?this['time']=this['time']:this['frame']=this['frame']);}}get['sprite'](){return this['_sprite'];}set['spriteAsse'+'t'](_0xa265fe){const _0x4ee4f0=this['_component']['system']['app']['assets'];let _0xdae5fa=_0xa265fe;if(_0xa265fe instanceof pe&&(_0xdae5fa=_0xa265fe['id']),this['_spriteAss'+'et']!==_0xdae5fa){if(this['_spriteAss'+'et']){const _0x43a945=_0x4ee4f0['get'](this['_spriteAss'+'et']);_0x43a945&&this['_unbindSpr'+'iteAsset'](_0x43a945);}if(this['_spriteAss'+'et']=_0xdae5fa,this['_spriteAss'+'et']){const _0x34a7ce=_0x4ee4f0['get'](this['_spriteAss'+'et']);_0x34a7ce?this['_bindSprit'+'eAsset'](_0x34a7ce):(this['sprite']=null,_0x4ee4f0['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['time'](_0x41801e){this['_setTime'](_0x41801e),this['_sprite']?this['frame']=Math['min'](this['_sprite']['frameKeys']['length']-(0x6a2+-0x1b7b+0xa6d*0x2),Math['floor'](this['_time']*Math['abs'](this['fps']))):this['frame']=-0x1360*0x2+0x27b*0x6+-0x5*-0x4c6;}get['time'](){return this['_time'];}['_onSpriteA'+'ssetAdded'](_0x27f0eb){this['_component']['system']['app']['assets']['off']('add:'+_0x27f0eb['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0x27f0eb['id']&&this['_bindSprit'+'eAsset'](_0x27f0eb);}['_bindSprit'+'eAsset'](_0x2be38b){_0x2be38b['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x2be38b['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x2be38b['resource']?this['_onSpriteA'+'ssetLoad'](_0x2be38b):this['_component']['system']['app']['assets']['load'](_0x2be38b);}['_unbindSpr'+'iteAsset'](_0x191e01){_0x191e01&&(_0x191e01['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x191e01['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x191e01['resource']&&!_0x191e01['resource']['atlas']&&this['_component']['system']['app']['assets']['off']('load:'+_0x191e01['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this));}['_onSpriteA'+'ssetLoad'](_0x1b9e8d){if(!_0x1b9e8d['resource'])this['sprite']=null;else{if(_0x1b9e8d['resource']['atlas'])this['sprite']=_0x1b9e8d['resource'];else{const _0xf90035=_0x1b9e8d['data']['textureAtl'+'asAsset'],_0x1e6c9f=this['_component']['system']['app']['assets'];_0x1e6c9f['off']('load:'+_0xf90035,this['_onTexture'+'AtlasLoad'],this),_0x1e6c9f['once']('load:'+_0xf90035,this['_onTexture'+'AtlasLoad'],this);}}}['_onTexture'+'AtlasLoad'](_0x3f83ef){const _0x30c633=this['_spriteAss'+'et'];_0x30c633 instanceof pe?this['_onSpriteA'+'ssetLoad'](_0x30c633):this['_onSpriteA'+'ssetLoad'](this['_component']['system']['app']['assets']['get'](_0x30c633));}['_onSpriteA'+'ssetRemove'](_0x52e48f){this['sprite']=null;}['_onSpriteM'+'eshesChang'+'e'](){this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['frame']);}['_onSpriteP'+'puChanged'](){this['_component']['currentCli'+'p']===this&&this['sprite']['renderMode']!==ci&&this['_component']['_showFrame'](this['frame']);}['_update'](_0x4d145a){if(this['fps']===-0x43*-0x29+-0x7cb+-0x2f0||!this['_playing']||this['_paused']||!this['_sprite'])return;const _0x4fa40e=this['fps']<0x6*-0x610+0x1db8+0x6a8?-(0x5ce*0x1+0xad9*-0x1+0x50c):-0x2*-0x32e+0xecc*-0x2+0x173d,_0xfdee4a=this['_time']+_0x4d145a*this['_component']['speed']*_0x4fa40e,_0x5d44e4=this['duration'],_0x222363=_0xfdee4a>_0x5d44e4||_0xfdee4a<0xa47+0xbf*0xd+-0x13fa;this['_setTime'](_0xfdee4a);let _0xf71399=this['frame'];this['_sprite']?_0xf71399=Math['floor'](this['_sprite']['frameKeys']['length']*this['_time']/_0x5d44e4):_0xf71399=0x35*-0xa9+0x221+-0x106e*-0x2,_0xf71399!==this['_frame']&&this['_setFrame'](_0xf71399),_0x222363&&(this['loop']?(this['fire']('loop'),this['_component']['fire']('loop',this)):(this['_playing']=!(-0xb44+-0x1a75+0x1b7*0x16),this['_paused']=!(-0x637*-0x2+-0x1*-0x1537+-0x21a4),this['fire']('end'),this['_component']['fire']('end',this)));}['_setTime'](_0x5504df){this['_time']=_0x5504df;const _0x17d642=this['duration'];this['_time']<0xde5+0x11*-0x9b+-0x39a?this['loop']?this['_time']=this['_time']%_0x17d642+_0x17d642:this['_time']=0x1*0x701+-0x1*0x176b+0x106a:this['_time']>_0x17d642&&(this['loop']?this['_time']%=_0x17d642:this['_time']=_0x17d642);}['_setFrame'](_0x10559b){this['_sprite']?this['_frame']=Y['clamp'](_0x10559b,0x1*0x2489+0x1*0x1898+-0x3d21,this['_sprite']['frameKeys']['length']-(-0x2*-0x7ff+-0x7ed+-0x810)):this['_frame']=_0x10559b,this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['_frame']);}['_destroy'](){if(this['_spriteAss'+'et']){const _0x229809=this['_component']['system']['app']['assets'];this['_unbindSpr'+'iteAsset'](_0x229809['get'](this['_spriteAss'+'et']));}this['_sprite']&&(this['sprite']=null),this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null);}['play'](){this['_playing']||(this['_playing']=!(0x1a4e+-0x67b+-0x13d3),this['_paused']=!(-0x1664*0x1+-0x1a*0x1b+-0x507*-0x5),this['frame']=-0x3*0x305+-0x1*0x1c90+0x259f*0x1,this['fire']('play'),this['_component']['fire']('play',this));}['pause'](){!this['_playing']||this['_paused']||(this['_paused']=!(-0x16*-0x195+-0x21*-0x73+-0x31a1),this['fire']('pause'),this['_component']['fire']('pause',this));}['resume'](){this['_paused']&&(this['_paused']=!(0x1ec7+0x4f*-0x30+-0xff6),this['fire']('resume'),this['_component']['fire']('resume',this));}['stop'](){this['_playing']&&(this['_playing']=!(-0x47d+-0x109+0x5*0x11b),this['_paused']=!(0x2*-0x1f1+0x1e2b+0x3a*-0x74),this['_time']=0x1*0x1ad3+0x19f7+-0x34ca,this['frame']=0x4e8*-0x4+0x1335*-0x1+-0x26d5*-0x1,this['fire']('stop'),this['_component']['fire']('stop',this));}}h(Gi,'EVENT_PLAY','play'),h(Gi,'EVENT_PAUS'+'E','pause'),h(Gi,'EVENT_RESU'+'ME','resume'),h(Gi,'EVENT_STOP','stop'),h(Gi,'EVENT_END','end'),h(Gi,'EVENT_LOOP','loop');const Fg='texture_em'+'issiveMap',Ng='texture_op'+'acityMap',kg='material_e'+'missive',Ug='material_o'+'pacity',MO='innerOffse'+'t',DO='outerScale',IO='atlasRect';class cr extends we{constructor(_0x438814,_0x5446c7){super(_0x438814,_0x5446c7),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_type']=Rg,this['_material']=_0x438814['defaultMat'+'erial'],this['_color']=new ie(0x1bb6+-0x5f1*-0x6+-0x3f5b*0x1,-0x20b3+0x4bb+0x3*0x953,0x1a0a+0x15e1+-0x2*0x17f5,-0x1767+-0x15e9+-0xf1b*-0x3),this['_colorUnif'+'orm']=new Float32Array(-0xd5*0x1+-0x1de2+-0x8a*-0x39),this['_speed']=0x1b9d+0xd4d+-0x28e9,this['_flipX']=!(-0xdc5+0x1*0x2a9+0xb1d),this['_flipY']=!(0x1*-0x25de+0x135d+0x1282),this['_width']=-0x203d+0x3*0x43a+-0x2*-0x9c8,this['_height']=-0x1f17+0xe9*-0x2a+-0x13*-0x3a6,this['_drawOrder']=0xde7+-0x2357+0x1570,this['_layers']=[Ji],this['_outerScal'+'e']=new J(0xc75*0x1+0x1*0x2e3+-0x231*0x7,0xe7d*0x1+-0x9*0x2a6+0x1*0x95a),this['_outerScal'+'eUniform']=new Float32Array(0x18d1+-0x169d+-0x119*0x2),this['_innerOffs'+'et']=new re(),this['_innerOffs'+'etUniform']=new Float32Array(-0x11fa+-0x405+0x1603),this['_atlasRect']=new re(),this['_atlasRect'+'Uniform']=new Float32Array(-0x6b*0xb+-0x1f*0x121+0x279c),this['_batchGrou'+'pId']=-(-0x1c*0x79+-0x14+0xd51),this['_batchGrou'+'p']=null,this['_node']=new Ie(),this['_model']=new tr(),this['_model']['graph']=this['_node'],this['_meshInsta'+'nce']=null,_0x5446c7['addChild'](this['_model']['graph']),this['_model']['_entity']=_0x5446c7,this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_addedMode'+'l']=!(0x14e1+0x2ca+-0x17aa),this['_autoPlayC'+'lip']=null,this['_clips']={},this['_defaultCl'+'ip']=new Gi(this,{'name':this['entity']['name'],'fps':0x0,'loop':!(-0x1039+-0x1*-0x62b+0xa0f),'spriteAsset':null}),this['_currentCl'+'ip']=this['_defaultCl'+'ip']);}set['type'](_0x34e2ad){this['_type']!==_0x34e2ad&&(this['_type']=_0x34e2ad,this['_type']===Rg?(this['stop'](),this['_currentCl'+'ip']=this['_defaultCl'+'ip'],this['enabled']&&this['entity']['enabled']&&(this['_currentCl'+'ip']['frame']=this['frame'],this['_currentCl'+'ip']['sprite']?this['_showModel']():this['_hideModel']())):this['_type']===Og&&(this['stop'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_currentCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['enabled']&&this['entity']['enabled']?this['_showModel']():this['_hideModel']()));}get['type'](){return this['_type'];}set['frame'](_0x595b88){this['_currentCl'+'ip']['frame']=_0x595b88;}get['frame'](){return this['_currentCl'+'ip']['frame'];}set['spriteAsse'+'t'](_0x2c2641){this['_defaultCl'+'ip']['spriteAsse'+'t']=_0x2c2641;}get['spriteAsse'+'t'](){return this['_defaultCl'+'ip']['_spriteAss'+'et'];}set['sprite'](_0x442e7d){this['_currentCl'+'ip']['sprite']=_0x442e7d;}get['sprite'](){return this['_currentCl'+'ip']['sprite'];}set['material'](_0x165100){this['_material']=_0x165100,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=_0x165100);}get['material'](){return this['_material'];}set['color'](_0x26d7e4){this['_color']['r']=_0x26d7e4['r'],this['_color']['g']=_0x26d7e4['g'],this['_color']['b']=_0x26d7e4['b'],this['_meshInsta'+'nce']&&(this['_colorUnif'+'orm'][0x1*-0x1091+-0x1f53+0xa*0x4ca]=this['_color']['r'],this['_colorUnif'+'orm'][-0x4b7*0x2+-0x1*0x1893+0x2*0x1101]=this['_color']['g'],this['_colorUnif'+'orm'][-0xfbb+0x6ba*-0x2+-0x35*-0x8d]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](kg,this['_colorUnif'+'orm']));}get['color'](){return this['_color'];}set['opacity'](_0x24e561){this['_color']['a']=_0x24e561,this['_meshInsta'+'nce']&&this['_meshInsta'+'nce']['setParamet'+'er'](Ug,_0x24e561);}get['opacity'](){return this['_color']['a'];}set['clips'](_0x1e6c67){if(!_0x1e6c67){for(const _0x552f19 in this['_clips'])this['removeClip'](_0x552f19);return;}for(const _0x4bd25a in this['_clips']){let _0x33d82c=!(0x88f+0x131+-0x9bf);for(const _0x12fb6e in _0x1e6c67)if(_0x1e6c67[_0x12fb6e]['name']===_0x4bd25a){_0x33d82c=!(-0xb1d+-0x6b*-0x20+-0x243*0x1),this['_clips'][_0x4bd25a]['fps']=_0x1e6c67[_0x12fb6e]['fps'],this['_clips'][_0x4bd25a]['loop']=_0x1e6c67[_0x12fb6e]['loop'],_0x1e6c67[_0x12fb6e]['hasOwnProp'+'erty']('sprite')?this['_clips'][_0x4bd25a]['sprite']=_0x1e6c67[_0x12fb6e]['sprite']:_0x1e6c67[_0x12fb6e]['hasOwnProp'+'erty']('spriteAsse'+'t')&&(this['_clips'][_0x4bd25a]['spriteAsse'+'t']=_0x1e6c67[_0x12fb6e]['spriteAsse'+'t']);break;}_0x33d82c||this['removeClip'](_0x4bd25a);}for(const _0x287004 in _0x1e6c67)this['_clips'][_0x1e6c67[_0x287004]['name']]||this['addClip'](_0x1e6c67[_0x287004]);this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['sprite'])&&this['_hideModel']();}get['clips'](){return this['_clips'];}get['currentCli'+'p'](){return this['_currentCl'+'ip'];}set['speed'](_0x19b16e){this['_speed']=_0x19b16e;}get['speed'](){return this['_speed'];}set['flipX'](_0x317ed1){this['_flipX']!==_0x317ed1&&(this['_flipX']=_0x317ed1,this['_updateTra'+'nsform']());}get['flipX'](){return this['_flipX'];}set['flipY'](_0x12ccaa){this['_flipY']!==_0x12ccaa&&(this['_flipY']=_0x12ccaa,this['_updateTra'+'nsform']());}get['flipY'](){return this['_flipY'];}set['width'](_0x52a6ed){_0x52a6ed!==this['_width']&&(this['_width']=_0x52a6ed,this['_outerScal'+'e']['x']=this['_width'],this['sprite']&&(this['sprite']['renderMode']===Mt||this['sprite']['renderMode']===Pt)&&this['_updateTra'+'nsform']());}get['width'](){return this['_width'];}set['height'](_0x605017){_0x605017!==this['_height']&&(this['_height']=_0x605017,this['_outerScal'+'e']['y']=this['height'],this['sprite']&&(this['sprite']['renderMode']===Mt||this['sprite']['renderMode']===Pt)&&this['_updateTra'+'nsform']());}get['height'](){return this['_height'];}set['batchGroup'+'Id'](_0x353c0c){var _0x41662e,_0x47460d;if(this['_batchGrou'+'pId']===_0x353c0c)return;const _0x19a8a2=this['_batchGrou'+'pId'];this['_batchGrou'+'pId']=_0x353c0c,this['entity']['enabled']&&_0x19a8a2>=0x1*-0x273+-0x2*0x271+0x755&&((_0x41662e=this['system']['app']['batcher'])==null||_0x41662e['remove'](St['SPRITE'],_0x19a8a2,this['entity'])),this['entity']['enabled']&&_0x353c0c>=-0xb49+-0x1644+0x218d?(_0x47460d=this['system']['app']['batcher'])==null||_0x47460d['insert'](St['SPRITE'],_0x353c0c,this['entity']):_0x19a8a2>=-0x26a+-0x950+0xbba&&this['_currentCl'+'ip']&&this['_currentCl'+'ip']['sprite']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['autoPlayCl'+'ip'](_0x530a9f){this['_autoPlayC'+'lip']=_0x530a9f instanceof Gi?_0x530a9f['name']:_0x530a9f,this['_tryAutoPl'+'ay']();}get['autoPlayCl'+'ip'](){return this['_autoPlayC'+'lip'];}set['drawOrder'](_0x3348de){this['_drawOrder']=_0x3348de,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['drawOrder']=_0x3348de);}get['drawOrder'](){return this['_drawOrder'];}set['layers'](_0x56758a){this['_addedMode'+'l']&&this['_hideModel'](),this['_layers']=_0x56758a,this['_meshInsta'+'nce']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['layers'](){return this['_layers'];}get['aabb'](){return this['_meshInsta'+'nce']?this['_meshInsta'+'nce']['aabb']:null;}['onEnable'](){var _0x28b4bd;const _0x118a96=this['system']['app'],_0x330507=_0x118a96['scene'],_0x462c9b=_0x330507['layers'];this['_evtLayers'+'Changed']=_0x330507['on']('set:layers',this['_onLayersC'+'hanged'],this),_0x462c9b&&(this['_evtLayerA'+'dded']=_0x462c9b['on']('add',this['_onLayerAd'+'ded'],this),this['_evtLayerR'+'emoved']=_0x462c9b['on']('remove',this['_onLayerRe'+'moved'],this)),this['_showModel'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_batchGrou'+'pId']>=0x1a*0x7f+-0x207*-0xf+-0x1*0x2b4f&&((_0x28b4bd=_0x118a96['batcher'])==null||_0x28b4bd['insert'](St['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDisable'](){var _0x32dc08,_0x89a9e2,_0x5cde7d,_0x4055f2;const _0x29ef92=this['system']['app'],_0x4f94a4=_0x29ef92['scene']['layers'];(_0x32dc08=this['_evtLayers'+'Changed'])==null||_0x32dc08['off'](),this['_evtLayers'+'Changed']=null,_0x4f94a4&&((_0x89a9e2=this['_evtLayerA'+'dded'])==null||_0x89a9e2['off'](),this['_evtLayerA'+'dded']=null,(_0x5cde7d=this['_evtLayerR'+'emoved'])==null||_0x5cde7d['off'](),this['_evtLayerR'+'emoved']=null),this['stop'](),this['_hideModel'](),this['_batchGrou'+'pId']>=0x2*0x6e5+0x1798+0x16*-0x1b3&&((_0x4055f2=_0x29ef92['batcher'])==null||_0x4055f2['remove'](St['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDestroy'](){var _0x2dc6aa;this['_currentCl'+'ip']=null,this['_defaultCl'+'ip']&&(this['_defaultCl'+'ip']['_destroy'](),this['_defaultCl'+'ip']=null);for(const _0x2f9c9e in this['_clips'])this['_clips'][_0x2f9c9e]['_destroy']();this['_clips']=null,this['_hideModel'](),this['_model']=null,(_0x2dc6aa=this['_node'])==null||_0x2dc6aa['remove'](),this['_node']=null,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=null,this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']=null);}['_showModel'](){if(this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x52ddb3=[this['_meshInsta'+'nce']];for(let _0x10971d=0x92b+-0x7a*0x2+0x1*-0x837,_0x146440=this['_layers']['length'];_0x10971d<_0x146440;_0x10971d++){const _0xd66976=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x10971d]);_0xd66976&&_0xd66976['addMeshIns'+'tances'](_0x52ddb3);}this['_addedMode'+'l']=!(0x47*-0x62+0x58*-0x7+0x1d96);}['_hideModel'](){if(!this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x7868e8=[this['_meshInsta'+'nce']];for(let _0x62e7e5=-0x18a7+-0x70b+-0x1fb2*-0x1,_0x4cdfb6=this['_layers']['length'];_0x62e7e5<_0x4cdfb6;_0x62e7e5++){const _0x5b8694=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x62e7e5]);_0x5b8694&&_0x5b8694['removeMesh'+'Instances'](_0x7868e8);}this['_addedMode'+'l']=!(0x1aa3+0x54e+-0x70*0x49);}['_showFrame'](_0x4cd97e){if(!this['sprite'])return;const _0x33df0d=this['sprite']['meshes'][_0x4cd97e];if(!_0x33df0d){this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']['visible']=!(-0x1*0xdbd+0xc65+0x159));return;}let _0x358a20;if(this['sprite']['renderMode']===Pt?_0x358a20=this['system']['default9Sl'+'icedMateri'+'alSlicedMo'+'de']:this['sprite']['renderMode']===Mt?_0x358a20=this['system']['default9Sl'+'icedMateri'+'alTiledMod'+'e']:_0x358a20=this['system']['defaultMat'+'erial'],this['_meshInsta'+'nce']||(this['_meshInsta'+'nce']=new He(_0x33df0d,this['_material'],this['_node']),this['_meshInsta'+'nce']['castShadow']=!(-0x1*0x11db+0x5*0x57d+-0x995),this['_meshInsta'+'nce']['receiveSha'+'dow']=!(-0x13d*0x5+0xc26+-0x5f4),this['_meshInsta'+'nce']['drawOrder']=this['_drawOrder'],this['_model']['meshInstan'+'ces']['push'](this['_meshInsta'+'nce']),this['_colorUnif'+'orm'][0x8ae+0x360+-0xc0e]=this['_color']['r'],this['_colorUnif'+'orm'][-0x13a+0x3*-0x99a+-0xa03*-0x3]=this['_color']['g'],this['_colorUnif'+'orm'][-0x39d+-0x1*0x1b59+0x3df*0x8]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](kg,this['_colorUnif'+'orm']),this['_meshInsta'+'nce']['setParamet'+'er'](Ug,this['_color']['a']),this['enabled']&&this['entity']['enabled']&&this['_showModel']()),this['_meshInsta'+'nce']['material']!==_0x358a20&&(this['_meshInsta'+'nce']['material']=_0x358a20),this['_meshInsta'+'nce']['mesh']!==_0x33df0d&&(this['_meshInsta'+'nce']['mesh']=_0x33df0d,this['_meshInsta'+'nce']['visible']=!(-0x19db+-0xca9*-0x2+0x89*0x1),this['_meshInsta'+'nce']['_aabbVer']=-(-0x1a7a+-0x1c3f+0x3*0x123e)),this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_meshInsta'+'nce']['setParamet'+'er'](Fg,this['sprite']['atlas']['texture']),this['_meshInsta'+'nce']['setParamet'+'er'](Ng,this['sprite']['atlas']['texture'])):(this['_meshInsta'+'nce']['deletePara'+'meter'](Fg),this['_meshInsta'+'nce']['deletePara'+'meter'](Ng)),this['sprite']['atlas']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){this['_meshInsta'+'nce']['_updateAab'+'bFunc']=this['_updateAab'+'bFunc'];const _0x35471e=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][_0x4cd97e]];if(_0x35471e){const _0x13d5f3=(0x24b9+-0x1282+0x4f*-0x3b)/_0x35471e['rect']['z'],_0x867e88=(-0x2537+-0x1323+0x4*0xe17)/_0x35471e['rect']['w'];this['_innerOffs'+'et']['set'](_0x35471e['border']['x']*_0x13d5f3,_0x35471e['border']['y']*_0x867e88,_0x35471e['border']['z']*_0x13d5f3,_0x35471e['border']['w']*_0x867e88);const _0x33b5ff=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x35471e['rect']['x']/_0x33b5ff['width'],_0x35471e['rect']['y']/_0x33b5ff['height'],_0x35471e['rect']['z']/_0x33b5ff['width'],_0x35471e['rect']['w']/_0x33b5ff['height']);}else this['_innerOffs'+'et']['set'](0x1ec8+0x39c+-0x2264,-0x3*-0x63d+0x1*-0xff4+-0x2c3,-0x926+-0x1*0x139+-0x3b*-0x2d,-0x1368+0x1ed9+-0xb71);this['_innerOffs'+'etUniform'][0x1*-0x239c+-0x265+0xcf*0x2f]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][-0x1ac4+0xd38*0x1+0xd8d*0x1]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][0x4f*-0x4d+0x15*-0x170+0x35f5]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][-0xa39*-0x3+-0x7*-0x42d+-0x3be3*0x1]=this['_innerOffs'+'et']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](MO,this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][-0x1984+0x1*0x210b+-0x787]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][0xe96+-0xd*0x1ff+-0x3*-0x3ca]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][-0x942+0xb22+-0x1de]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][0x1eac+-0xf22+-0x31b*0x5]=this['_atlasRect']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](IO,this['_atlasRect'+'Uniform']);}else this['_meshInsta'+'nce']['_updateAab'+'bFunc']=null;this['_updateTra'+'nsform']();}['_updateTra'+'nsform'](){let _0x3d2420=this['flipX']?-(0x3d6+-0x1cfe+0x1929):0x18*-0x167+0x7f3+-0x19b6*-0x1,_0x11f9bc=this['flipY']?-(0x11cf+-0x5ab+0xd*-0xef):-0x1a07+0x1*-0x1df2+0x37fa,_0x107373=0x2449+-0x20fb*0x1+-0x8d*0x6,_0x635848=0x13ed*0x1+-0x2*0x10db+0xdc9;if(this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){let _0x288c3f=0x1*0x18ef+-0x1*-0x491+-0x9*0x347,_0x1c7293=-0x409+0x19f7+-0x15ed;if(this['sprite']['atlas']){const _0x1f1e53=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][this['frame']]];_0x1f1e53&&(_0x288c3f=_0x1f1e53['rect']['z'],_0x1c7293=_0x1f1e53['rect']['w'],_0x107373=(0xe78+-0x880+-0x2*0x2fc+0.5-_0x1f1e53['pivot']['x'])*this['_width'],_0x635848=(-0x15e9+-0x1a45+0x302e+0.5-_0x1f1e53['pivot']['y'])*this['_height']);}const _0x3761cb=_0x288c3f/this['sprite']['pixelsPerU'+'nit'],_0x58f6c5=_0x1c7293/this['sprite']['pixelsPerU'+'nit'];this['_outerScal'+'e']['set'](Math['max'](this['_width'],this['_innerOffs'+'et']['x']*_0x3761cb),Math['max'](this['_height'],this['_innerOffs'+'et']['y']*_0x58f6c5)),_0x3d2420*=_0x3761cb,_0x11f9bc*=_0x58f6c5,this['_outerScal'+'e']['x']/=_0x3761cb,this['_outerScal'+'e']['y']/=_0x58f6c5,_0x3d2420*=Y['clamp'](this['_width']/(this['_innerOffs'+'et']['x']*_0x3761cb),-0x28e+0xd4f*0x1+-0xac1+0.0001,0xa3d+-0x1f4d*0x1+0x1511*0x1),_0x11f9bc*=Y['clamp'](this['_height']/(this['_innerOffs'+'et']['y']*_0x58f6c5),0x1d93+-0x1d20+-0x73+0.0001,-0x146d*-0x1+-0x1c3+-0x12a9),this['_meshInsta'+'nce']&&(this['_outerScal'+'eUniform'][-0x1b0c+0x1*0x17bd+0x34f]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][0x17*-0x48+-0x200b+0x11*0x244]=this['_outerScal'+'e']['y'],this['_meshInsta'+'nce']['setParamet'+'er'](DO,this['_outerScal'+'eUniform']));}this['_node']['setLocalSc'+'ale'](_0x3d2420,_0x11f9bc,0x3d*-0x45+0xf0d+-0x1*-0x165),this['_node']['setLocalPo'+'sition'](_0x107373,_0x635848,-0xfd9*0x1+0x2667+-0x168e);}['_updateAab'+'b'](_0x5813b0){return _0x5813b0['center']['set'](0x1969+-0x713+-0x1256*0x1,-0x1b7*-0x1+-0x66c+0x4b5*0x1,-0x2*-0x458+0x57d*0x7+-0x2f1b),_0x5813b0['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(0x226b+-0x11e9+-0x1082+0.5),this['_outerScal'+'e']['y']*(-0xb2f*0x1+0x83*-0x12+0x1465+0.5),0x1973+-0x6b*0x3b+-0xca+0.001),_0x5813b0['setFromTra'+'nsformedAa'+'bb'](_0x5813b0,this['_node']['getWorldTr'+'ansform']()),_0x5813b0;}['_tryAutoPl'+'ay'](){if(!this['_autoPlayC'+'lip']||this['type']!==Og)return;const _0x302d8d=this['_clips'][this['_autoPlayC'+'lip']];_0x302d8d&&!_0x302d8d['isPlaying']&&(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['isPlaying'])&&this['enabled']&&this['entity']['enabled']&&this['play'](_0x302d8d['name']);}['_onLayersC'+'hanged'](_0x105299,_0x1f5b32){_0x105299['off']('add',this['onLayerAdd'+'ed'],this),_0x105299['off']('remove',this['onLayerRem'+'oved'],this),_0x1f5b32['on']('add',this['onLayerAdd'+'ed'],this),_0x1f5b32['on']('remove',this['onLayerRem'+'oved'],this),this['enabled']&&this['entity']['enabled']&&this['_showModel']();}['_onLayerAd'+'ded'](_0x413359){this['layers']['indexOf'](_0x413359['id'])<-0x1600+0xaeb+0xb15||this['_addedMode'+'l']&&this['enabled']&&this['entity']['enabled']&&this['_meshInsta'+'nce']&&_0x413359['addMeshIns'+'tances']([this['_meshInsta'+'nce']]);}['_onLayerRe'+'moved'](_0x5b3904){!this['_meshInsta'+'nce']||this['layers']['indexOf'](_0x5b3904['id'])<0xa9*-0x1+0x2145+0x1*-0x209c||_0x5b3904['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}['removeMode'+'lFromLayer'+'s'](){for(let _0x398849=0x1*0xda5+0x13*0x12e+0x21f*-0x11;_0x398849<this['layers']['length'];_0x398849++){const _0x728e62=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x398849]);_0x728e62&&_0x728e62['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}}['addClip'](_0xab998e){const _0x5015ed=new Gi(this,{'name':_0xab998e['name'],'fps':_0xab998e['fps'],'loop':_0xab998e['loop'],'spriteAsset':_0xab998e['spriteAsse'+'t']});return this['_clips'][_0xab998e['name']]=_0x5015ed,_0x5015ed['name']&&_0x5015ed['name']===this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),_0x5015ed;}['removeClip'](_0x5a4398){delete this['_clips'][_0x5a4398];}['clip'](_0x2a7d5b){return this['_clips'][_0x2a7d5b];}['play'](_0x9b83bf){const _0x216fa2=this['_clips'][_0x9b83bf],_0x38d3c2=this['_currentCl'+'ip'];return _0x38d3c2&&_0x38d3c2!==_0x216fa2&&(_0x38d3c2['_playing']=!(0x1720+0xae5*-0x2+-0x155)),this['_currentCl'+'ip']=_0x216fa2,this['_currentCl'+'ip']?(this['_currentCl'+'ip']=_0x216fa2,this['_currentCl'+'ip']['play']()):w['warn']('Trying\x20to\x20'+'play\x20sprit'+'e\x20animatio'+'n\x20'+_0x9b83bf+('\x20which\x20doe'+'s\x20not\x20exis'+'t.')),_0x216fa2;}['pause'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['_currentCl'+'ip']['pause']();}['resume'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPaused']&&this['_currentCl'+'ip']['resume']();}['stop'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['stop']();}}h(cr,'EVENT_PLAY','play'),h(cr,'EVENT_PAUS'+'E','pause'),h(cr,'EVENT_RESU'+'ME','resume'),h(cr,'EVENT_STOP','stop'),h(cr,'EVENT_END','end'),h(cr,'EVENT_LOOP','loop');class LO{constructor(){this['enabled']=!(0x1640+-0x2b*0x9a+0x39e);}}const Dv=['enabled'];class RO extends ct{constructor(_0x4602cb){super(_0x4602cb),this['id']='sprite',this['ComponentT'+'ype']=cr,this['DataType']=LO,this['schema']=Dv,this['_defaultTe'+'xture']=null,this['_defaultMa'+'terial']=null,this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=null,this['_default9S'+'licedMater'+'ialTiledMo'+'de']=null,this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['defaultMat'+'erial'](_0x3b26c0){this['_defaultMa'+'terial']=_0x3b26c0;}get['defaultMat'+'erial'](){if(!this['_defaultMa'+'terial']){const _0x13cab9=new _e(this['app']['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':_s,'name':'sprite'}),_0x385875=new Uint8Array(_0x13cab9['lock']());_0x385875[-0x255c+0x1416+0x21*0x86]=_0x385875[-0x2572*-0x1+-0x153e+-0x1d*0x8f]=_0x385875[0x3*-0x42f+-0x5f2*0x3+0x1e65]=_0x385875[0x16e0+-0x151a+0x1*-0x1c3]=0x9*-0x42c+-0xa94*0x2+0x3bb3,_0x13cab9['unlock']();const _0x21c53a=new Ut();_0x21c53a['diffuse']['set'](-0x10d+-0xa33+-0x240*-0x5,0x1953+0x2205+-0x3b58,-0x132f+-0x8ef+0x1c1e),_0x21c53a['emissive']['set'](0x1*0x2501+0x5b4+-0x2ab4,-0x1bd*0xf+0x252*-0x2+-0xf5c*-0x2,0x16a8+0x16e1+-0x2d88),_0x21c53a['emissiveMa'+'p']=_0x13cab9,_0x21c53a['opacityMap']=_0x13cab9,_0x21c53a['opacityMap'+'Channel']='a',_0x21c53a['useLightin'+'g']=!(-0x9c0+-0x1434+0x1df5),_0x21c53a['useTonemap']=!(0x5b*0x2b+-0x18de+-0x4cb*-0x2),_0x21c53a['useFog']=!(-0x116d+-0xe43+0x1*0x1fb1),_0x21c53a['useSkybox']=!(-0x2067+0x1*0x329+0x1d3f),_0x21c53a['blendType']=Fn,_0x21c53a['depthWrite']=!(0x1*-0xff8+-0x709*0x2+0x1e0b),_0x21c53a['pixelSnap']=!(-0x8a*-0x47+-0x5d1*-0x1+-0x273*0x12),_0x21c53a['cull']=bt,_0x21c53a['update'](),this['_defaultTe'+'xture']=_0x13cab9,this['_defaultMa'+'terial']=_0x21c53a;}return this['_defaultMa'+'terial'];}set['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](_0x3cc568){this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x3cc568;}get['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](){if(!this['_default9S'+'licedMater'+'ialSlicedM'+'ode']){const _0xdce453=this['defaultMat'+'erial']['clone']();_0xdce453['nineSliced'+'Mode']=Pt,_0xdce453['update'](),this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0xdce453;}return this['_default9S'+'licedMater'+'ialSlicedM'+'ode'];}set['default9Sl'+'icedMateri'+'alTiledMod'+'e'](_0x3f4b4d){this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x3f4b4d;}get['default9Sl'+'icedMateri'+'alTiledMod'+'e'](){if(!this['_default9S'+'licedMater'+'ialTiledMo'+'de']){const _0x54e41c=this['defaultMat'+'erial']['clone']();_0x54e41c['nineSliced'+'Mode']=Mt,_0x54e41c['update'](),this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x54e41c;}return this['_default9S'+'licedMater'+'ialTiledMo'+'de'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),this['_defaultTe'+'xture']&&(this['_defaultTe'+'xture']['destroy'](),this['_defaultTe'+'xture']=null);}['initialize'+'ComponentD'+'ata'](_0x58d1ec,_0x58917e,_0x48da02){if(_0x58917e['enabled']!==void(0x2d*-0x2+0x45*0x6b+-0x1c7d)&&(_0x58d1ec['enabled']=_0x58917e['enabled']),_0x58d1ec['type']=_0x58917e['type'],_0x58917e['layers']&&Array['isArray'](_0x58917e['layers'])&&(_0x58d1ec['layers']=_0x58917e['layers']['slice'](0xa73+-0x47*0x86+0x1ab7)),_0x58917e['drawOrder']!==void(0x18d5+-0x1cf8+0x423)&&(_0x58d1ec['drawOrder']=_0x58917e['drawOrder']),_0x58917e['color']!==void(0x2055+-0x27*-0x42+-0x2a63)&&(_0x58917e['color']instanceof ie?_0x58d1ec['color']['set'](_0x58917e['color']['r'],_0x58917e['color']['g'],_0x58917e['color']['b'],_0x58917e['opacity']??-0xf68*0x1+-0x1*0x1412+0x237b):_0x58d1ec['color']['set'](_0x58917e['color'][-0x15*-0xd+0x48+0x45*-0x5],_0x58917e['color'][0xc1*0x1f+0x1*-0xa1d+-0xd41],_0x58917e['color'][0x832+0x4*0x840+0x8*-0x526],_0x58917e['opacity']??-0x1863+0x65*-0xc+0x2*0xe90),_0x58d1ec['color']=_0x58d1ec['color']),_0x58917e['opacity']!==void(0x1786+0x9ac*-0x4+-0x287*-0x6)&&(_0x58d1ec['opacity']=_0x58917e['opacity']),_0x58917e['flipX']!==void(0xc2f*-0x1+-0x6ef+0x131e)&&(_0x58d1ec['flipX']=_0x58917e['flipX']),_0x58917e['flipY']!==void(-0x1497+-0x1*-0x1ff7+-0xd0*0xe)&&(_0x58d1ec['flipY']=_0x58917e['flipY']),_0x58917e['width']!==void(0x5*0xe3+0x2b3*-0x5+0x910)&&(_0x58d1ec['width']=_0x58917e['width']),_0x58917e['height']!==void(-0x9d0+0x25f*-0x8+0x4cc*0x6)&&(_0x58d1ec['height']=_0x58917e['height']),_0x58917e['spriteAsse'+'t']!==void(-0x2*-0xe02+0x2*-0x122+0x19c0*-0x1)&&(_0x58d1ec['spriteAsse'+'t']=_0x58917e['spriteAsse'+'t']),_0x58917e['sprite']&&(_0x58d1ec['sprite']=_0x58917e['sprite']),_0x58917e['frame']!==void(0x1f83*-0x1+-0x1102+0x3085)&&(_0x58d1ec['frame']=_0x58917e['frame']),_0x58917e['clips']){for(const _0x4f88fd in _0x58917e['clips'])_0x58d1ec['addClip'](_0x58917e['clips'][_0x4f88fd]);}_0x58917e['speed']!==void(-0x37*-0x49+-0x3*0x4d9+0x92*-0x2)&&(_0x58d1ec['speed']=_0x58917e['speed']),_0x58917e['autoPlayCl'+'ip']&&(_0x58d1ec['autoPlayCl'+'ip']=_0x58917e['autoPlayCl'+'ip']),_0x58d1ec['batchGroup'+'Id']=_0x58917e['batchGroup'+'Id']===void(0x11*0x17a+-0x123d+-0x6dd)||_0x58917e['batchGroup'+'Id']===null?-(0x11cb+0x1*-0x1ee+-0xfdc):_0x58917e['batchGroup'+'Id'],super['initialize'+'ComponentD'+'ata'](_0x58d1ec,_0x58917e,_0x48da02);}['cloneCompo'+'nent'](_0x4347dc,_0x2227a7){const _0x4d90c3=_0x4347dc['sprite'];return this['addCompone'+'nt'](_0x2227a7,{'enabled':_0x4d90c3['enabled'],'type':_0x4d90c3['type'],'spriteAsset':_0x4d90c3['spriteAsse'+'t'],'sprite':_0x4d90c3['sprite'],'width':_0x4d90c3['width'],'height':_0x4d90c3['height'],'frame':_0x4d90c3['frame'],'color':_0x4d90c3['color']['clone'](),'opacity':_0x4d90c3['opacity'],'flipX':_0x4d90c3['flipX'],'flipY':_0x4d90c3['flipY'],'speed':_0x4d90c3['speed'],'clips':_0x4d90c3['clips'],'autoPlayClip':_0x4d90c3['autoPlayCl'+'ip'],'batchGroupId':_0x4d90c3['batchGroup'+'Id'],'drawOrder':_0x4d90c3['drawOrder'],'layers':_0x4d90c3['layers']['slice'](-0x2289+-0x1*0x753+0x29dc)});}['onUpdate'](_0x1735de){const _0x55bd3d=this['store'];for(const _0x3943ff in _0x55bd3d)if(_0x55bd3d['hasOwnProp'+'erty'](_0x3943ff)){const _0x2fb212=_0x55bd3d[_0x3943ff];if(_0x2fb212['data']['enabled']&&_0x2fb212['entity']['enabled']){const _0x258f14=_0x2fb212['entity']['sprite'];_0x258f14['_currentCl'+'ip']&&_0x258f14['_currentCl'+'ip']['_update'](_0x1735de);}}}['onBeforeRe'+'move'](_0x462ac4,_0x37482d){_0x37482d['onDestroy']();}}we['_buildAcce'+'ssors'](cr['prototype'],Dv);class cn extends we{constructor(_0x95b162,_0x53d072){super(_0x95b162,_0x53d072),this['_oldState']=!(-0x1ebb+0x223*0x2+0x1*0x1a75),this['_size']=new D(),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['size'](_0x30dac9){_0x30dac9 instanceof D?this['_size']['copy'](_0x30dac9):_0x30dac9 instanceof Array&&_0x30dac9['length']>=-0x5b*-0xf+-0x2382+0x30*0xa1&&this['size']['set'](_0x30dac9[0x22d2+-0x5*-0x393+-0x34b1],_0x30dac9[0x1c*-0xf1+-0x2*0x251+0x1eff],_0x30dac9[-0xeed+0x2*0xbfb+-0x907]);}get['size'](){return this['_size'];}['onEnable'](){this['_checkStat'+'e']();}['onDisable'](){this['_checkStat'+'e']();}['_onSetEnab'+'led'](_0x4c981e,_0x5080ac,_0x4ffeef){this['_checkStat'+'e']();}['_checkStat'+'e'](){const _0x34b776=this['enabled']&&this['entity']['enabled'];_0x34b776!==this['_oldState']&&(this['_oldState']=_0x34b776,this['fire']('enable'),this['fire']('state',this['enabled']));}['_onBeforeR'+'emove'](){this['fire']('remove');}}h(cn,'EVENT_ENAB'+'LE','enable'),h(cn,'EVENT_DISA'+'BLE','disable'),h(cn,'EVENT_STAT'+'E','state'),h(cn,'EVENT_REMO'+'VE','remove');class OO{constructor(){this['enabled']=!(0x339*-0x3+0x308*0xa+-0x14a5);}}const Iv=['enabled'];class FO extends ct{constructor(_0x1d2c4d){super(_0x1d2c4d),this['id']='zone',this['ComponentT'+'ype']=cn,this['DataType']=OO,this['schema']=Iv,this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this);}['initialize'+'ComponentD'+'ata'](_0x4e599c,_0x429cd1,_0x26c085){_0x4e599c['enabled']=_0x429cd1['hasOwnProp'+'erty']('enabled')?!!_0x429cd1['enabled']:!(0x663+0x1a39+-0x1*0x209c),_0x429cd1['size']&&(_0x429cd1['size']instanceof D?_0x4e599c['size']['copy'](_0x429cd1['size']):_0x429cd1['size']instanceof Array&&_0x429cd1['size']['length']>=0x69*0xd+-0x86*-0xb+-0xb14&&_0x4e599c['size']['set'](_0x429cd1['size'][0x7da+0x5bf*-0x1+-0x21b*0x1],_0x429cd1['size'][-0x1cfe+0x1c3b+0xc4],_0x429cd1['size'][0x880+0x11*-0x10d+-0x95f*-0x1]));}['cloneCompo'+'nent'](_0x4f5b0e,_0x4b89df){const _0x139578={'enabled':_0x4f5b0e['zone']['enabled'],'size':_0x4f5b0e['zone']['size']};return this['addCompone'+'nt'](_0x4b89df,_0x139578);}['_onBeforeR'+'emove'](_0x2f9aa4,_0x31462a){_0x31462a['_onBeforeR'+'emove']();}}we['_buildAcce'+'ssors'](cn['prototype'],Iv);class NO{constructor(_0x593f32,_0x7c926a){this['effect']=_0x593f32,this['inputTarge'+'t']=_0x7c926a,this['outputTarg'+'et']=null,this['name']=_0x593f32['constructo'+'r']['name'];}}class kO{constructor(_0x4754e7,_0x403378){this['app']=_0x4754e7,this['camera']=_0x403378,this['destinatio'+'nRenderTar'+'get']=null,this['effects']=[],this['enabled']=!(0x161a+0x1f*-0x87+0x40*-0x17),this['depthTarge'+'t']=null,_0x403378['on']('set:rect',this['onCameraRe'+'ctChanged'],this);}['_allocateC'+'olorBuffer'](_0x409b04,_0x5a4d1e){const _0x3c8f20=this['camera']['rect'],_0x38c7f3=this['destinatio'+'nRenderTar'+'get'],_0x273cd6=this['app']['graphicsDe'+'vice'],_0x143cea=Math['floor'](_0x3c8f20['z']*((_0x38c7f3==null?void(0xca0+-0x344*0x7+0xa3c):_0x38c7f3['width'])??_0x273cd6['width'])),_0x27d88d=Math['floor'](_0x3c8f20['w']*((_0x38c7f3==null?void(0xa5*-0xa+0x1eb8+0x1*-0x1846):_0x38c7f3['height'])??_0x273cd6['height']));return new _e(_0x273cd6,{'name':_0x5a4d1e,'format':_0x409b04,'width':_0x143cea,'height':_0x27d88d,'mipmaps':!(-0xd23+-0x14b1+0x21d5),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});}['_createOff'+'screenTarg'+'et'](_0x2354e6,_0x4f84f9){const _0x43e700=this['app']['graphicsDe'+'vice'],_0x5e348a=(this['destinatio'+'nRenderTar'+'get']??_0x43e700['backBuffer'])['isColorBuf'+'ferSrgb'](-0x8e*0x3d+0xc4b+0x5*0x44f),_0x312656=(_0x4f84f9&&_0x43e700['getRendera'+'bleHdrForm'+'at']([nt,Xt],!(0xed1*0x1+-0x1247+0x1*0x376)))??(_0x5e348a?_s:Ne),_0x5cf866=this['camera']['entity']['name']+('-posteffec'+'t-')+this['effects']['length'],_0x51fd11=this['_allocateC'+'olorBuffer'](_0x312656,_0x5cf866);return new gt({'colorBuffer':_0x51fd11,'depth':_0x2354e6,'stencil':_0x2354e6&&this['app']['graphicsDe'+'vice']['supportsSt'+'encil'],'samples':_0x2354e6?_0x43e700['samples']:-0xe6a+0x298*-0xa+0x285b});}['_resizeOff'+'screenTarg'+'et'](_0x10d296){const _0x414196=_0x10d296['colorBuffe'+'r']['format'],_0x1cf137=_0x10d296['colorBuffe'+'r']['name'];_0x10d296['destroyFra'+'meBuffers'](),_0x10d296['destroyTex'+'tureBuffer'+'s'](),_0x10d296['_colorBuff'+'er']=this['_allocateC'+'olorBuffer'](_0x414196,_0x1cf137),_0x10d296['_colorBuff'+'ers']=[_0x10d296['_colorBuff'+'er']];}['_destroyOf'+'fscreenTar'+'get'](_0x82a960){_0x82a960['destroyTex'+'tureBuffer'+'s'](),_0x82a960['destroy']();}['addEffect'](_0x2f2a3d){const _0x795779=this['effects'],_0x3eb638=_0x795779['length']===0x28e*0xd+-0xb8*0x1+-0x2*0x103f,_0x24bec6=this['_createOff'+'screenTarg'+'et'](_0x3eb638,_0x2f2a3d['hdr']),_0xf1ebda=new NO(_0x2f2a3d,_0x24bec6);_0x795779['push'](_0xf1ebda),this['_sourceTar'+'get']=_0xf1ebda['inputTarge'+'t'],_0x795779['length']>0x22a*0x2+0x1c96+-0x20e9&&(_0x795779[_0x795779['length']-(-0x9*0x59+0x1*-0x5ee+0x911)]['outputTarg'+'et']=_0xf1ebda['inputTarge'+'t']),this['_newPostEf'+'fect']=_0x2f2a3d,_0x2f2a3d['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap'](),this['enable'](),this['_newPostEf'+'fect']=void(0x5*0x35c+-0x20ec+-0x158*-0xc);}['removeEffe'+'ct'](_0x1f0db2){let _0x1d1edd=-(0x6*-0x1c+0x3df+-0x336);for(let _0x1262e5=0x2b*-0x98+0x9f*-0x29+0x7*0x749,_0x2fe8ae=this['effects']['length'];_0x1262e5<_0x2fe8ae;_0x1262e5++)if(this['effects'][_0x1262e5]['effect']===_0x1f0db2){_0x1d1edd=_0x1262e5;break;}_0x1d1edd>=0xeab+-0x2f*0x3a+-0x405&&(_0x1d1edd>-0x242d+0x2152+0x11*0x2b?this['effects'][_0x1d1edd-(0x2*-0x335+0x2303+-0x16e*0x14)]['outputTarg'+'et']=_0x1d1edd+(0x25b5+0x1892*-0x1+-0xd22)<this['effects']['length']?this['effects'][_0x1d1edd+(-0x2e*0xe+-0xd62+0x54d*0x3)]['inputTarge'+'t']:null:this['effects']['length']>0x229d+-0x2*0x1273+0x24a&&(this['effects'][0x2*0x966+0x171c+-0x29e7]['inputTarge'+'t']['_depth']||(this['_destroyOf'+'fscreenTar'+'get'](this['effects'][-0x1*-0x1539+-0x2*0x136d+0x11a2]['inputTarge'+'t']),this['effects'][0x11b+0x7*0x2fc+0x233*-0xa]['inputTarge'+'t']=this['_createOff'+'screenTarg'+'et'](!(-0x32*-0x5c+-0x1b8f+0x997),this['effects'][0x1003*0x1+-0x348*-0x3+-0x19da]['hdr']),this['_sourceTar'+'get']=this['effects'][0xca6+-0x1*0xdb1+0x10c]['inputTarge'+'t']),this['camera']['renderTarg'+'et']=this['effects'][-0xa22*-0x2+0x1501+-0x2944]['inputTarge'+'t']),this['_destroyOf'+'fscreenTar'+'get'](this['effects'][_0x1d1edd]['inputTarge'+'t']),this['effects']['splice'](_0x1d1edd,-0x4*0x4ff+0x2f0+0x110d)),this['enabled']&&_0x1f0db2['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap'](),this['effects']['length']===-0x25ab*-0x1+0x2031+-0x45dc&&this['disable']();}['_requestDe'+'pthMaps'](){for(let _0x112472=0x1510+0x115f+0x1*-0x266f,_0x1ee4c2=this['effects']['length'];_0x112472<_0x1ee4c2;_0x112472++){const _0x495b0c=this['effects'][_0x112472]['effect'];this['_newPostEf'+'fect']!==_0x495b0c&&_0x495b0c['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap']();}}['_releaseDe'+'pthMaps'](){for(let _0xb1f0e9=0x14df+0x7bb*-0x1+-0x692*0x2,_0x2cbf43=this['effects']['length'];_0xb1f0e9<_0x2cbf43;_0xb1f0e9++)this['effects'][_0xb1f0e9]['effect']['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap']();}['_requestDe'+'pthMap'](){const _0x43ed4f=this['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x43ed4f&&(_0x43ed4f['incrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(0x1d*-0xb7+0x1e3e+0x5*-0x1e7)));}['_releaseDe'+'pthMap'](){const _0x1caffd=this['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x1caffd&&(_0x1caffd['decrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(0xc48+-0x7fc+-0x44b)));}['destroy'](){for(let _0x5f21ef=0xa8b+0x2693+-0x311e*0x1,_0xf01697=this['effects']['length'];_0x5f21ef<_0xf01697;_0x5f21ef++)this['effects'][_0x5f21ef]['inputTarge'+'t']['destroy']();this['effects']['length']=-0x910+0xf9a+-0x68a,this['disable']();}['enable'](){!this['enabled']&&this['effects']['length']&&(this['enabled']=!(-0x1*0x957+0x3*0x7bc+0x111*-0xd),this['_requestDe'+'pthMaps'](),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['destinatio'+'nRenderTar'+'get']=this['camera']['renderTarg'+'et'],this['camera']['renderTarg'+'et']=this['effects'][-0x1316+0x90b+0xa0b]['inputTarge'+'t'],this['camera']['onPostproc'+'essing']=()=>{if(this['enabled']){let _0x279599=null;const _0xca6aeb=this['effects']['length'];if(_0xca6aeb)for(let _0x48a2ed=0x1830+0x2403+-0x3c33;_0x48a2ed<_0xca6aeb;_0x48a2ed++){const _0x3cae91=this['effects'][_0x48a2ed];let _0x42a808=_0x3cae91['outputTarg'+'et'];_0x48a2ed===_0xca6aeb-(0x243b+-0x1540*0x1+-0xefa*0x1)&&(_0x279599=this['camera']['rect'],this['destinatio'+'nRenderTar'+'get']&&(_0x42a808=this['destinatio'+'nRenderTar'+'get'])),Q['pushGpuMar'+'ker'](this['app']['graphicsDe'+'vice'],_0x3cae91['name']),_0x3cae91['effect']['render'](_0x3cae91['inputTarge'+'t'],_0x42a808,_0x279599),Q['popGpuMark'+'er'](this['app']['graphicsDe'+'vice']);}}});}['disable'](){this['enabled']&&(this['enabled']=!(-0xc73+0x2a3*0x9+-0xb47),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['_releaseDe'+'pthMaps'](),this['_destroyOf'+'fscreenTar'+'get'](this['_sourceTar'+'get']),this['camera']['renderTarg'+'et']=this['destinatio'+'nRenderTar'+'get'],this['camera']['onPostproc'+'essing']=null);}['_onCanvasR'+'esized'](_0x491ed5,_0x321ad5){const _0x4ee1f8=this['camera']['rect'],_0x1306dc=this['destinatio'+'nRenderTar'+'get'];_0x491ed5=(_0x1306dc==null?void(-0x1229*-0x1+-0x33*-0xa1+0xa0c*-0x5):_0x1306dc['width'])??_0x491ed5,_0x321ad5=(_0x1306dc==null?void(-0x1*-0x1b83+0x25ba+-0x413d):_0x1306dc['height'])??_0x321ad5,this['camera']['camera']['aspectRati'+'o']=_0x491ed5*_0x4ee1f8['z']/(_0x321ad5*_0x4ee1f8['w']),this['resizeRend'+'erTargets']();}['resizeRend'+'erTargets'](){const _0x3a5690=this['app']['graphicsDe'+'vice'],_0x5f3c47=this['destinatio'+'nRenderTar'+'get'],_0x13cfbf=(_0x5f3c47==null?void(-0x3*-0x7c7+-0x4cf*-0x1+-0x1*0x1c24):_0x5f3c47['width'])??_0x3a5690['width'],_0x214af6=(_0x5f3c47==null?void(-0x1*0x20ed+0x1e00+0x2ed):_0x5f3c47['height'])??_0x3a5690['height'],_0x2be1d2=this['camera']['rect'],_0x39b809=Math['floor'](_0x2be1d2['z']*_0x13cfbf),_0x5a5ca1=Math['floor'](_0x2be1d2['w']*_0x214af6),_0x5a5d92=this['effects'];for(let _0x46eb7a=0x26f3*0x1+0xd5b+-0x344e,_0x17046a=_0x5a5d92['length'];_0x46eb7a<_0x17046a;_0x46eb7a++){const _0x2f6668=_0x5a5d92[_0x46eb7a];(_0x2f6668['inputTarge'+'t']['width']!==_0x39b809||_0x2f6668['inputTarge'+'t']['height']!==_0x5a5ca1)&&this['_resizeOff'+'screenTarg'+'et'](_0x2f6668['inputTarge'+'t']);}}['onCameraRe'+'ctChanged'](_0xb8bb08,_0x1c9e52,_0x44c3a3){this['enabled']&&this['resizeRend'+'erTargets']();}}class Cr extends we{constructor(_0x28ca9e,_0x2356f8){super(_0x28ca9e,_0x2356f8),h(this,'onPostproc'+'essing',null),h(this,'_renderSce'+'neDepthMap',0x12da+0x16*-0x131+0x3*0x274),h(this,'_renderSce'+'neColorMap',-0x1*-0x6d+-0xf9c+0xf2f),h(this,'_sceneDept'+'hMapReques'+'ted',!(-0x1ead*0x1+0x3*-0x15d+0x2b*0xcf)),h(this,'_sceneColo'+'rMapReques'+'ted',!(0x18a0+-0x973*0x1+-0x4*0x3cb)),h(this,'_priority',0x6c9*0x2+-0x3*-0x23e+0x1b1*-0xc),h(this,'_disablePo'+'stEffectsL'+'ayer',Sl),h(this,'_camera',new Tl()),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_camera']['node']=_0x2356f8,this['_postEffec'+'ts']=new kO(_0x28ca9e['app'],this));}['setShaderP'+'ass'](_0x1fe6e1){const _0x14ef54=Si['get'](this['system']['app']['graphicsDe'+'vice']),_0x32c361=_0x1fe6e1?_0x14ef54['allocate'](_0x1fe6e1,{'isForward':!(0x49*-0x9+-0x7*-0x512+-0x1*0x20ed)}):null;return this['_camera']['shaderPass'+'Info']=_0x32c361,_0x32c361['index'];}['getShaderP'+'ass'](){var _0x365ba9;return(_0x365ba9=this['_camera']['shaderPass'+'Info'])==null?void(-0x1*0x1cb0+0x1d27*0x1+-0x77):_0x365ba9['name'];}set['renderPass'+'es'](_0x462d57){this['_camera']['renderPass'+'es']=_0x462d57||[],this['dirtyLayer'+'Compositio'+'nCameras'](),this['system']['app']['scene']['updateShad'+'ers']=!(0x1*-0x1fdf+0x11a4+-0xe3b*-0x1);}get['renderPass'+'es'](){return this['_camera']['renderPass'+'es'];}get['shaderPara'+'ms'](){return this['_camera']['shaderPara'+'ms'];}set['gammaCorre'+'ction'](_0x2b9829){this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=_0x2b9829;}get['gammaCorre'+'ction'](){return this['camera']['shaderPara'+'ms']['gammaCorre'+'ction'];}set['toneMappin'+'g'](_0x5ea3c7){this['camera']['shaderPara'+'ms']['toneMappin'+'g']=_0x5ea3c7;}get['toneMappin'+'g'](){return this['camera']['shaderPara'+'ms']['toneMappin'+'g'];}set['fog'](_0xab9efa){this['_camera']['fogParams']=_0xab9efa;}get['fog'](){return this['_camera']['fogParams'];}set['aperture'](_0x114c3c){this['_camera']['aperture']=_0x114c3c;}get['aperture'](){return this['_camera']['aperture'];}set['aspectRati'+'o'](_0x48ae08){this['_camera']['aspectRati'+'o']=_0x48ae08;}get['aspectRati'+'o'](){return this['_camera']['aspectRati'+'o'];}set['aspectRati'+'oMode'](_0x413268){this['_camera']['aspectRati'+'oMode']=_0x413268;}get['aspectRati'+'oMode'](){return this['_camera']['aspectRati'+'oMode'];}set['calculateP'+'rojection'](_0x261da0){this['_camera']['calculateP'+'rojection']=_0x261da0;}get['calculateP'+'rojection'](){return this['_camera']['calculateP'+'rojection'];}set['calculateT'+'ransform'](_0x241601){this['_camera']['calculateT'+'ransform']=_0x241601;}get['calculateT'+'ransform'](){return this['_camera']['calculateT'+'ransform'];}get['camera'](){return this['_camera'];}set['clearColor'](_0x12c615){this['_camera']['clearColor']=_0x12c615;}get['clearColor'](){return this['_camera']['clearColor'];}set['clearColor'+'Buffer'](_0x54dd5d){this['_camera']['clearColor'+'Buffer']=_0x54dd5d,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearColor'+'Buffer'](){return this['_camera']['clearColor'+'Buffer'];}set['clearDepth'+'Buffer'](_0x318c36){this['_camera']['clearDepth'+'Buffer']=_0x318c36,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearDepth'+'Buffer'](){return this['_camera']['clearDepth'+'Buffer'];}set['clearStenc'+'ilBuffer'](_0x444725){this['_camera']['clearStenc'+'ilBuffer']=_0x444725,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearStenc'+'ilBuffer'](){return this['_camera']['clearStenc'+'ilBuffer'];}set['cullFaces'](_0x25166c){this['_camera']['cullFaces']=_0x25166c;}get['cullFaces'](){return this['_camera']['cullFaces'];}set['disablePos'+'tEffectsLa'+'yer'](_0x263cbc){this['_disablePo'+'stEffectsL'+'ayer']=_0x263cbc,this['dirtyLayer'+'Compositio'+'nCameras']();}get['disablePos'+'tEffectsLa'+'yer'](){return this['_disablePo'+'stEffectsL'+'ayer'];}set['farClip'](_0x58654b){this['_camera']['farClip']=_0x58654b;}get['farClip'](){return this['_camera']['farClip'];}set['flipFaces'](_0x24972e){this['_camera']['flipFaces']=_0x24972e;}get['flipFaces'](){return this['_camera']['flipFaces'];}set['fov'](_0x325fc5){this['_camera']['fov']=_0x325fc5;}get['fov'](){return this['_camera']['fov'];}get['frustum'](){return this['_camera']['frustum'];}set['frustumCul'+'ling'](_0xe6173f){this['_camera']['frustumCul'+'ling']=_0xe6173f;}get['frustumCul'+'ling'](){return this['_camera']['frustumCul'+'ling'];}set['horizontal'+'Fov'](_0xb4128a){this['_camera']['horizontal'+'Fov']=_0xb4128a;}get['horizontal'+'Fov'](){return this['_camera']['horizontal'+'Fov'];}set['layers'](_0x42c5a1){const _0x1e2b77=this['_camera']['layers'],_0x3900dc=this['system']['app']['scene'];_0x1e2b77['forEach'](_0x25f72f=>{const _0x2dc974=_0x3900dc['layers']['getLayerBy'+'Id'](_0x25f72f);_0x2dc974==null||_0x2dc974['removeCame'+'ra'](this);}),this['_camera']['layers']=_0x42c5a1,this['enabled']&&this['entity']['enabled']&&_0x42c5a1['forEach'](_0x2a6045=>{const _0x2dd6a4=_0x3900dc['layers']['getLayerBy'+'Id'](_0x2a6045);_0x2dd6a4==null||_0x2dd6a4['addCamera'](this);}),this['fire']('set:layers');}get['layers'](){return this['_camera']['layers'];}get['layersSet'](){return this['_camera']['layersSet'];}set['jitter'](_0x4d1286){this['_camera']['jitter']=_0x4d1286;}get['jitter'](){return this['_camera']['jitter'];}set['nearClip'](_0x582be6){this['_camera']['nearClip']=_0x582be6;}get['nearClip'](){return this['_camera']['nearClip'];}set['orthoHeigh'+'t'](_0x554d19){this['_camera']['orthoHeigh'+'t']=_0x554d19;}get['orthoHeigh'+'t'](){return this['_camera']['orthoHeigh'+'t'];}get['postEffect'+'s'](){return this['_postEffec'+'ts'];}get['postEffect'+'sEnabled'](){return this['_postEffec'+'ts']['enabled'];}set['priority'](_0x25f83e){this['_priority']=_0x25f83e,this['dirtyLayer'+'Compositio'+'nCameras']();}get['priority'](){return this['_priority'];}set['projection'](_0x401a19){this['_camera']['projection']=_0x401a19;}get['projection'](){return this['_camera']['projection'];}get['projection'+'Matrix'](){return this['_camera']['projection'+'Matrix'];}set['rect'](_0x2f8d1e){this['_camera']['rect']=_0x2f8d1e,this['fire']('set:rect',this['_camera']['rect']);}get['rect'](){return this['_camera']['rect'];}set['renderScen'+'eColorMap'](_0x4a0759){_0x4a0759&&!this['_sceneColo'+'rMapReques'+'ted']?(this['requestSce'+'neColorMap'](!(-0x11*0xd+0x1*0x7a8+-0x2f*0x25)),this['_sceneColo'+'rMapReques'+'ted']=!(-0x238+-0x11*0x1bb+-0x1fa3*-0x1)):this['_sceneColo'+'rMapReques'+'ted']&&(this['requestSce'+'neColorMap'](!(-0x1*-0x1b3b+0xf22+-0x2*0x152e)),this['_sceneColo'+'rMapReques'+'ted']=!(-0xc8*0x2e+-0xf38+0x3329));}get['renderScen'+'eColorMap'](){return this['_renderSce'+'neColorMap']>0x85d*-0x1+-0x683*-0x5+-0x1832;}set['renderScen'+'eDepthMap'](_0x35f7c6){_0x35f7c6&&!this['_sceneDept'+'hMapReques'+'ted']?(this['requestSce'+'neDepthMap'](!(0x189*-0x16+-0x4f*-0x6e+-0x16*0x2)),this['_sceneDept'+'hMapReques'+'ted']=!(-0x8*0x41b+-0x282+-0xb5*-0x32)):this['_sceneDept'+'hMapReques'+'ted']&&(this['requestSce'+'neDepthMap'](!(0x123+-0x1049+0xf27)),this['_sceneDept'+'hMapReques'+'ted']=!(0x179c*-0x1+0xd4*-0xd+-0x2a5*-0xd));}get['renderScen'+'eDepthMap'](){return this['_renderSce'+'neDepthMap']>-0x1362+-0x373+0x16d5;}set['renderTarg'+'et'](_0x8f750a){w['call'](()=>{this['_camera']['renderPass'+'es']['length']>-0x4c2+-0x1918+0x1dda&&w['warn']('Setting\x20a\x20'+'render\x20tar'+'get\x20on\x20the'+'\x20camera\x20'+this['entity']['name']+('\x20after\x20the'+'\x20render\x20pa'+'sses\x20is\x20no'+'t\x20supporte'+'d,\x20set\x20it\x20'+'up\x20first.'));}),this['_camera']['renderTarg'+'et']=_0x8f750a,this['dirtyLayer'+'Compositio'+'nCameras']();}get['renderTarg'+'et'](){return this['_camera']['renderTarg'+'et'];}set['scissorRec'+'t'](_0x5334cf){this['_camera']['scissorRec'+'t']=_0x5334cf;}get['scissorRec'+'t'](){return this['_camera']['scissorRec'+'t'];}set['sensitivit'+'y'](_0x3b4ebd){this['_camera']['sensitivit'+'y']=_0x3b4ebd;}get['sensitivit'+'y'](){return this['_camera']['sensitivit'+'y'];}set['shutter'](_0x5eb966){this['_camera']['shutter']=_0x5eb966;}get['shutter'](){return this['_camera']['shutter'];}get['viewMatrix'](){return this['_camera']['viewMatrix'];}['_enableDep'+'thLayer'](_0x229c31){if(this['layers']['find'](_0x51e3bc=>_0x51e3bc===ps)){const _0x4c8af4=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x229c31?_0x4c8af4==null||_0x4c8af4['incrementC'+'ounter']():_0x4c8af4==null||_0x4c8af4['decrementC'+'ounter']();}else{if(_0x229c31)return!(-0xe4b*-0x1+-0x11*-0x5e+0x8*-0x291);}return!(0x1f7a*0x1+0xf0a+0x1ca*-0x1a);}['requestSce'+'neColorMap'](_0x2cae56){this['_renderSce'+'neColorMap']+=_0x2cae56?0x22f7*-0x1+0x5da+0x1d1e:-(-0x2dd*0x2+-0x12fa+0x18b5),w['assert'](this['_renderSce'+'neColorMap']>=-0x1cae+-0x242e+-0x206e*-0x2),this['_enableDep'+'thLayer'](_0x2cae56)||w['warnOnce']('CameraComp'+'onent.requ'+'estSceneCo'+'lorMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassCol'+'orGrab'](this['system']['app']['graphicsDe'+'vice'],this['renderScen'+'eColorMap']),this['system']['app']['scene']['layers']['markDirty']();}['requestSce'+'neDepthMap'](_0x5c7c87){this['_renderSce'+'neDepthMap']+=_0x5c7c87?-0x2ab+-0x4f*-0x7+0x1*0x83:-(0x161+-0x1ee2+0x1d82),w['assert'](this['_renderSce'+'neDepthMap']>=0x9d3+0x2ce+-0x35*0x3d),this['_enableDep'+'thLayer'](_0x5c7c87)||w['warnOnce']('CameraComp'+'onent.requ'+'estSceneDe'+'pthMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassDep'+'thGrab'](this['system']['app']['graphicsDe'+'vice'],this['system']['app']['renderer'],this['renderScen'+'eDepthMap']),this['system']['app']['scene']['layers']['markDirty']();}['dirtyLayer'+'Compositio'+'nCameras'](){const _0x4b9896=this['system']['app']['scene']['layers'];_0x4b9896['_dirty']=!(0x929*0x1+-0x1f30+-0x1607*-0x1);}['screenToWo'+'rld'](_0x127318,_0x3e6907,_0x29bb2b,_0xc14ec6){const _0x372bd7=this['system']['app']['graphicsDe'+'vice'],{width:_0x19cf37,height:_0x194092}=_0x372bd7['clientRect'];return this['_camera']['screenToWo'+'rld'](_0x127318,_0x3e6907,_0x29bb2b,_0x19cf37,_0x194092,_0xc14ec6);}['worldToScr'+'een'](_0x4fcfc3,_0x4c7377){const _0x18eb7b=this['system']['app']['graphicsDe'+'vice'],{width:_0x280ebc,height:_0x13c7dc}=_0x18eb7b['clientRect'];return this['_camera']['worldToScr'+'een'](_0x4fcfc3,_0x280ebc,_0x13c7dc,_0x4c7377);}['onAppPrere'+'nder'](){this['_camera']['_viewMatDi'+'rty']=!(-0x4b3*0x1+0x6b*0x29+-0xc70),this['_camera']['_viewProjM'+'atDirty']=!(0x40*0x6b+0x1*-0x6fb+0xf1*-0x15);}['addCameraT'+'oLayers'](){const _0xb9d85c=this['layers'];for(let _0x533046=0x21f9+-0x116c+-0x13*0xdf;_0x533046<_0xb9d85c['length'];_0x533046++){const _0x28c58e=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0xb9d85c[_0x533046]);_0x28c58e&&_0x28c58e['addCamera'](this);}}['removeCame'+'raFromLaye'+'rs'](){const _0x1301a0=this['layers'];for(let _0x5babb7=0x24e3*0x1+-0x1922+-0x11*0xb1;_0x5babb7<_0x1301a0['length'];_0x5babb7++){const _0x2553cd=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x1301a0[_0x5babb7]);_0x2553cd&&_0x2553cd['removeCame'+'ra'](this);}}['onLayersCh'+'anged'](_0x5d5bb4,_0x4a185c){this['addCameraT'+'oLayers'](),_0x5d5bb4['off']('add',this['onLayerAdd'+'ed'],this),_0x5d5bb4['off']('remove',this['onLayerRem'+'oved'],this),_0x4a185c['on']('add',this['onLayerAdd'+'ed'],this),_0x4a185c['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0xec6a49){this['layers']['indexOf'](_0xec6a49['id'])<0x1e8d+0x5*-0x54a+0x41b*-0x1||_0xec6a49['addCamera'](this);}['onLayerRem'+'oved'](_0x226688){this['layers']['indexOf'](_0x226688['id'])<-0x117*0x2+0x154e+-0x33*0x60||_0x226688['removeCame'+'ra'](this);}['onEnable'](){var _0x26438c,_0x377cf8,_0x4c9232;const _0x17fd81=this['system']['app']['scene'],_0x59278b=_0x17fd81['layers'];this['system']['addCamera'](this),(_0x26438c=this['_evtLayers'+'Changed'])==null||_0x26438c['off'](),this['_evtLayers'+'Changed']=_0x17fd81['on']('set:layers',this['onLayersCh'+'anged'],this),_0x59278b&&((_0x377cf8=this['_evtLayerA'+'dded'])==null||_0x377cf8['off'](),this['_evtLayerA'+'dded']=_0x59278b['on']('add',this['onLayerAdd'+'ed'],this),(_0x4c9232=this['_evtLayerR'+'emoved'])==null||_0x4c9232['off'](),this['_evtLayerR'+'emoved']=_0x59278b['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addCameraT'+'oLayers'](),this['postEffect'+'s']['enable']();}['onDisable'](){var _0x4f97bb,_0x25716d,_0x3ad053;const _0x2d5df4=this['system']['app']['scene']['layers'];this['postEffect'+'s']['disable'](),this['removeCame'+'raFromLaye'+'rs'](),(_0x4f97bb=this['_evtLayers'+'Changed'])==null||_0x4f97bb['off'](),this['_evtLayers'+'Changed']=null,_0x2d5df4&&((_0x25716d=this['_evtLayerA'+'dded'])==null||_0x25716d['off'](),this['_evtLayerA'+'dded']=null,(_0x3ad053=this['_evtLayerR'+'emoved'])==null||_0x3ad053['off'](),this['_evtLayerR'+'emoved']=null),this['system']['removeCame'+'ra'](this);}['onRemove'](){this['onDisable'](),this['off'](),this['camera']['destroy']();}['calculateA'+'spectRatio'](_0x5e95c2){const _0x23b80c=this['system']['app']['graphicsDe'+'vice'],_0x541622=_0x5e95c2?_0x5e95c2['width']:_0x23b80c['width'],_0x5e259f=_0x5e95c2?_0x5e95c2['height']:_0x23b80c['height'];return _0x541622*this['rect']['z']/(_0x5e259f*this['rect']['w']);}['frameUpdat'+'e'](_0x4acc16){this['aspectRati'+'oMode']===kp&&(this['aspectRati'+'o']=this['calculateA'+'spectRatio'](_0x4acc16));}['startXr'](_0xbc3503,_0x5e707a,_0x1c25a2){this['system']['app']['xr']['start'](this,_0xbc3503,_0x5e707a,_0x1c25a2);}['endXr'](_0x494d16){if(!this['_camera']['xr']){_0x494d16&&_0x494d16(new Error('Camera\x20is\x20'+'not\x20in\x20XR'));return;}this['_camera']['xr']['end'](_0x494d16);}['copy'](_0x308019){this['aperture']=_0x308019['aperture'],this['aspectRati'+'o']=_0x308019['aspectRati'+'o'],this['aspectRati'+'oMode']=_0x308019['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x308019['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x308019['calculateT'+'ransform'],this['clearColor']=_0x308019['clearColor'],this['clearColor'+'Buffer']=_0x308019['clearColor'+'Buffer'],this['clearDepth'+'Buffer']=_0x308019['clearDepth'+'Buffer'],this['clearStenc'+'ilBuffer']=_0x308019['clearStenc'+'ilBuffer'],this['cullFaces']=_0x308019['cullFaces'],this['disablePos'+'tEffectsLa'+'yer']=_0x308019['disablePos'+'tEffectsLa'+'yer'],this['farClip']=_0x308019['farClip'],this['flipFaces']=_0x308019['flipFaces'],this['fov']=_0x308019['fov'],this['frustumCul'+'ling']=_0x308019['frustumCul'+'ling'],this['horizontal'+'Fov']=_0x308019['horizontal'+'Fov'],this['layers']=_0x308019['layers'],this['nearClip']=_0x308019['nearClip'],this['orthoHeigh'+'t']=_0x308019['orthoHeigh'+'t'],this['priority']=_0x308019['priority'],this['projection']=_0x308019['projection'],this['rect']=_0x308019['rect'],this['renderTarg'+'et']=_0x308019['renderTarg'+'et'],this['scissorRec'+'t']=_0x308019['scissorRec'+'t'],this['sensitivit'+'y']=_0x308019['sensitivit'+'y'],this['shutter']=_0x308019['shutter'];}}class UO{constructor(){this['enabled']=!(0x2498+-0x1311+-0x281*0x7);}}const Lv=['enabled'];class BO extends ct{constructor(_0x46f866){super(_0x46f866),h(this,'cameras',[]),(this['id']='camera',this['ComponentT'+'ype']=Cr,this['DataType']=UO,this['schema']=Lv,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['on']('prerender',this['onAppPrere'+'nder'],this));}['initialize'+'ComponentD'+'ata'](_0x41f409,_0x1d331a,_0x4a8c6c){_0x4a8c6c=['aspectRati'+'o','aspectRati'+'oMode','calculateP'+'rojection','calculateT'+'ransform','clearColor','clearColor'+'Buffer','clearDepth'+'Buffer','clearStenc'+'ilBuffer','renderScen'+'eColorMap','renderScen'+'eDepthMap','cullFaces','farClip','flipFaces','fog','fov','frustumCul'+'ling','horizontal'+'Fov','layers','renderTarg'+'et','nearClip','orthoHeigh'+'t','projection','priority','rect','scissorRec'+'t','aperture','shutter','sensitivit'+'y','gammaCorre'+'ction','toneMappin'+'g'];for(let _0x53d11c=-0x16*-0x110+-0x163c+-0x124;_0x53d11c<_0x4a8c6c['length'];_0x53d11c++){const _0x317f52=_0x4a8c6c[_0x53d11c];if(_0x1d331a['hasOwnProp'+'erty'](_0x317f52)){const _0x2deb66=_0x1d331a[_0x317f52];switch(_0x317f52){case'rect':case'scissorRec'+'t':Array['isArray'](_0x2deb66)?_0x41f409[_0x317f52]=new re(_0x2deb66[-0x43a+-0xa*0x29+0x5d4],_0x2deb66[-0x194b+-0x12fd+0x2c49*0x1],_0x2deb66[0x24e0+0x169*0x10+-0x1*0x3b6e],_0x2deb66[-0x18e4+-0xdb2+-0xf1*-0x29]):_0x41f409[_0x317f52]=_0x2deb66;break;case'clearColor':Array['isArray'](_0x2deb66)?_0x41f409[_0x317f52]=new ie(_0x2deb66[-0x7f8+-0x2402+-0x2bfa*-0x1],_0x2deb66[-0x1*-0x54f+-0x2*0x731+-0x53*-0x1c],_0x2deb66[0x1*-0x2102+0x1f*-0x100+0x4004],_0x2deb66[0x1a*0x81+-0x17b7+0x20*0x55]):_0x41f409[_0x317f52]=_0x2deb66;break;default:_0x41f409[_0x317f52]=_0x2deb66;break;}}}super['initialize'+'ComponentD'+'ata'](_0x41f409,_0x1d331a,['enabled']);}['cloneCompo'+'nent'](_0xe46bc0,_0x17a1be){const _0x2dbe66=_0xe46bc0['camera'];return this['addCompone'+'nt'](_0x17a1be,{'aspectRatio':_0x2dbe66['aspectRati'+'o'],'aspectRatioMode':_0x2dbe66['aspectRati'+'oMode'],'calculateProjection':_0x2dbe66['calculateP'+'rojection'],'calculateTransform':_0x2dbe66['calculateT'+'ransform'],'clearColor':_0x2dbe66['clearColor'],'clearColorBuffer':_0x2dbe66['clearColor'+'Buffer'],'clearDepthBuffer':_0x2dbe66['clearDepth'+'Buffer'],'clearStencilBuffer':_0x2dbe66['clearStenc'+'ilBuffer'],'renderSceneDepthMap':_0x2dbe66['renderScen'+'eDepthMap'],'renderSceneColorMap':_0x2dbe66['renderScen'+'eColorMap'],'cullFaces':_0x2dbe66['cullFaces'],'enabled':_0x2dbe66['enabled'],'farClip':_0x2dbe66['farClip'],'flipFaces':_0x2dbe66['flipFaces'],'fov':_0x2dbe66['fov'],'frustumCulling':_0x2dbe66['frustumCul'+'ling'],'horizontalFov':_0x2dbe66['horizontal'+'Fov'],'layers':_0x2dbe66['layers'],'renderTarget':_0x2dbe66['renderTarg'+'et'],'nearClip':_0x2dbe66['nearClip'],'orthoHeight':_0x2dbe66['orthoHeigh'+'t'],'projection':_0x2dbe66['projection'],'priority':_0x2dbe66['priority'],'rect':_0x2dbe66['rect'],'scissorRect':_0x2dbe66['scissorRec'+'t'],'aperture':_0x2dbe66['aperture'],'sensitivity':_0x2dbe66['sensitivit'+'y'],'shutter':_0x2dbe66['shutter'],'gammaCorrection':_0x2dbe66['gammaCorre'+'ction'],'toneMapping':_0x2dbe66['toneMappin'+'g']});}['onBeforeRe'+'move'](_0x3f861f,_0x5345c9){this['removeCame'+'ra'](_0x5345c9),_0x5345c9['onRemove']();}['onAppPrere'+'nder'](){for(let _0x3c7b5c=0x1*0x1f6b+-0x187e+0xc5*-0x9,_0x3c0e42=this['cameras']['length'];_0x3c7b5c<_0x3c0e42;_0x3c7b5c++)this['cameras'][_0x3c7b5c]['onAppPrere'+'nder']();}['addCamera'](_0x11aea8){this['cameras']['push'](_0x11aea8),el(this['cameras']);}['removeCame'+'ra'](_0x53c135){const _0x17c919=this['cameras']['indexOf'](_0x53c135);_0x17c919>=0x1553+0x148b+-0x29de*0x1&&(this['cameras']['splice'](_0x17c919,0x1af0+0xc9d*0x2+0x1*-0x3429),el(this['cameras']));}['destroy'](){this['app']['off']('prerender',this['onAppPrere'+'nder'],this),super['destroy']();}}we['_buildAcce'+'ssors'](Cr['prototype'],Lv);class Rv{constructor(){h(this,'enabled',!(0x60a*-0x1+-0x1d0*-0x5+-0x2b*0x12)),h(this,'light'),h(this,'type','directiona'+'l'),h(this,'color',new ie(-0x737+-0x1*-0xcf2+0x5ba*-0x1,0x1135+-0x1252+0x1*0x11e,-0x5*0x1b7+0xddf+-0x54b)),h(this,'intensity',0x9*-0x10e+-0x21c0+0x2b3f),h(this,'luminance',-0x1*-0x1285+-0x2441*-0x1+-0x36c6),h(this,'shape',js),h(this,'affectSpec'+'ularity',!(-0x163*0x13+-0x1c37+0x3690)),h(this,'castShadow'+'s',!(-0xc*0x11b+-0x1*0x317+0x105c)),h(this,'shadowDist'+'ance',-0xb*-0x202+0x1*0x1367+-0x2955),h(this,'shadowInte'+'nsity',-0x182b+0x1*-0x17a1+-0x2fcd*-0x1),h(this,'shadowReso'+'lution',-0x1ff2+0x52*0x22+0x190e),h(this,'shadowBias',-0x1816+0x134b+-0x3*-0x199+0.05),h(this,'numCascade'+'s',-0x221*-0xf+0x1*-0x9fd+-0x29*0x89),h(this,'cascadeBle'+'nd',0x27d*-0xe+-0xa53*0x2+0x377c),h(this,'bakeNumSam'+'ples',-0xc8f*-0x2+0x1106+-0x2a23),h(this,'bakeArea',-0x1096+-0x3e*-0x77+-0xc3c),h(this,'cascadeDis'+'tribution',0xc*-0x19+-0x332*0x3+0x1b*0x66+0.5),h(this,'normalOffs'+'etBias',0x9c8*-0x3+0x2534+-0x4*0x1f7),h(this,'range',-0x1d3d+-0x5a8*-0x2+0x11f7),h(this,'innerConeA'+'ngle',0x1*0xaa2+0xb*0x9a+-0x1118),h(this,'outerConeA'+'ngle',0xb92*0x1+-0x50d*-0x3+-0x4*0x6a3),h(this,'falloffMod'+'e',bp),h(this,'shadowType',Ws),h(this,'vsmBlurSiz'+'e',0x2b7+0x8eb+-0xb97),h(this,'vsmBlurMod'+'e',Cp),h(this,'vsmBias',(-0x459*-0x3+-0x1e87+-0x175*-0xc+0.01)*(0x1996+0x1187*0x2+-0x3ca4+0.25)),h(this,'cookieAsse'+'t',null),h(this,'cookie',null),h(this,'cookieInte'+'nsity',0x1*-0x1120+0xcd4*-0x1+0x1df5),h(this,'cookieFall'+'off',!(-0x9b*0x39+0x499*-0x3+0x304e)),h(this,'cookieChan'+'nel','rgb'),h(this,'cookieAngl'+'e',-0xcaf*0x1+-0xb0f*0x3+0x2ddc),h(this,'cookieScal'+'e',null),h(this,'cookieOffs'+'et',null),h(this,'shadowUpda'+'teMode',Fp),h(this,'mask',0xfd0+-0x2*0x515+-0x5a5),h(this,'affectDyna'+'mic',!(-0x6f+-0x10f0+0x115f)),h(this,'affectLigh'+'tmapped',!(-0x1*0x1813+-0x1a1f*0x1+-0x3233*-0x1)),h(this,'bake',!(0xdd7+0x1eac+-0x2c82)),h(this,'bakeDir',!(-0x17a+0x10*-0x15f+0x176a)),h(this,'isStatic',!(0x2434+0x10ee+0x7*-0x797)),h(this,'layers',[Ji]),h(this,'penumbraSi'+'ze',-0x1*0x1fe5+0x565+0x1a81),h(this,'penumbraFa'+'lloff',-0x23*0x53+0x2*0x8ef+-0x684),h(this,'shadowSamp'+'les',-0x45d*-0x3+-0x782*0x1+-0x585),h(this,'shadowBloc'+'kerSamples',-0x97d+0x8*0x44b+-0x18cb);}}const Io=Object['keys'](new Rv());class zO extends we{constructor(){super(...arguments),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_cookieAss'+'et',null),h(this,'_cookieAss'+'etId',null),h(this,'_cookieAss'+'etAdd',!(-0x2028+0x11d3+0xe56)),h(this,'_cookieMat'+'rix',null);}get['data'](){const _0x2dbc69=this['system']['store'][this['entity']['getGuid']()];return _0x2dbc69?_0x2dbc69['data']:null;}set['enabled'](_0x551009){this['_setValue']('enabled',_0x551009,function(_0x44ac71,_0xfb0925){this['onSetEnabl'+'ed'](null,_0xfb0925,_0x44ac71);});}get['enabled'](){return this['data']['enabled'];}set['light'](_0x3245eb){this['_setValue']('light',_0x3245eb);}get['light'](){return this['data']['light'];}set['type'](_0x28b016){this['_setValue']('type',_0x28b016,function(_0x5b1660,_0x49b0f1){this['system']['changeType'](this,_0x49b0f1,_0x5b1660),this['refreshPro'+'perties']();});}get['type'](){return this['data']['type'];}set['color'](_0x52ef45){this['_setValue']('color',_0x52ef45,function(_0x2c0744,_0x35bbc2){this['light']['setColor'](_0x2c0744);},!(-0x19cf+0x17d3+0x7f*0x4));}get['color'](){return this['data']['color'];}set['intensity'](_0x7ead8d){this['_setValue']('intensity',_0x7ead8d,function(_0x246ab5,_0x209a0b){this['light']['intensity']=_0x246ab5;});}get['intensity'](){return this['data']['intensity'];}set['luminance'](_0x5efd1b){this['_setValue']('luminance',_0x5efd1b,function(_0x32521b,_0x272066){this['light']['luminance']=_0x32521b;});}get['luminance'](){return this['data']['luminance'];}set['shape'](_0x6cdd8e){this['_setValue']('shape',_0x6cdd8e,function(_0x1ccaf7,_0x292351){this['light']['shape']=_0x1ccaf7;});}get['shape'](){return this['data']['shape'];}set['affectSpec'+'ularity'](_0x57733a){this['_setValue']('affectSpec'+'ularity',_0x57733a,function(_0x4235f3,_0x5541e4){this['light']['affectSpec'+'ularity']=_0x4235f3;});}get['affectSpec'+'ularity'](){return this['data']['affectSpec'+'ularity'];}set['castShadow'+'s'](_0xf70d9b){this['_setValue']('castShadow'+'s',_0xf70d9b,function(_0x357153,_0x2ebc82){this['light']['castShadow'+'s']=_0x357153;});}get['castShadow'+'s'](){return this['data']['castShadow'+'s'];}set['shadowDist'+'ance'](_0x23dbc1){this['_setValue']('shadowDist'+'ance',_0x23dbc1,function(_0x3372e0,_0xd0ca6e){this['light']['shadowDist'+'ance']=_0x3372e0;});}get['shadowDist'+'ance'](){return this['data']['shadowDist'+'ance'];}set['shadowInte'+'nsity'](_0x2f35c6){this['_setValue']('shadowInte'+'nsity',_0x2f35c6,function(_0x810e8b,_0x4e0cef){this['light']['shadowInte'+'nsity']=_0x810e8b;});}get['shadowInte'+'nsity'](){return this['data']['shadowInte'+'nsity'];}set['shadowReso'+'lution'](_0x2acfff){this['_setValue']('shadowReso'+'lution',_0x2acfff,function(_0x407760,_0x281f1b){this['light']['shadowReso'+'lution']=_0x407760;});}get['shadowReso'+'lution'](){return this['data']['shadowReso'+'lution'];}set['shadowBias'](_0x53cdb3){this['_setValue']('shadowBias',_0x53cdb3,function(_0x5b8ad4,_0x4cc744){this['light']['shadowBias']=-(0xbf9*-0x1+0xd9c+0x1*-0x1a3+0.01)*Y['clamp'](_0x5b8ad4,0x19db*0x1+-0x719*-0x1+0x57e*-0x6,0x29b+-0x244e+0x21b4);});}get['shadowBias'](){return this['data']['shadowBias'];}set['numCascade'+'s'](_0x2a2463){this['_setValue']('numCascade'+'s',_0x2a2463,function(_0x1b64ff,_0x3d49c5){this['light']['numCascade'+'s']=Y['clamp'](Math['floor'](_0x1b64ff),0x3d*-0x38+0x1*0x1229+0x70*-0xb,0x1*0x2605+0x6fb+-0x4*0xb3f);});}get['numCascade'+'s'](){return this['data']['numCascade'+'s'];}set['cascadeBle'+'nd'](_0x3c4fde){this['_setValue']('cascadeBle'+'nd',_0x3c4fde,function(_0x5a76de,_0x41b228){this['light']['cascadeBle'+'nd']=Y['clamp'](_0x5a76de,0x11*0x1d6+-0x82*0x14+0xf5*-0x16,0x1*-0x409+0x240b*0x1+0x1*-0x2001);});}get['cascadeBle'+'nd'](){return this['data']['cascadeBle'+'nd'];}set['bakeNumSam'+'ples'](_0x16ef70){this['_setValue']('bakeNumSam'+'ples',_0x16ef70,function(_0x549e1e,_0x57e763){this['light']['bakeNumSam'+'ples']=Y['clamp'](Math['floor'](_0x549e1e),-0x8*0x12b+-0x10*0xc7+0x1fb*0xb,-0x26f8+0x1*0x38+0x25*0x113);});}get['bakeNumSam'+'ples'](){return this['data']['bakeNumSam'+'ples'];}set['bakeArea'](_0x4c6cc5){this['_setValue']('bakeArea',_0x4c6cc5,function(_0x4dd7d3,_0x2fbc7a){this['light']['bakeArea']=Y['clamp'](_0x4dd7d3,0x1161*-0x1+0x1e5d+-0xcfc,-0x6ee+-0x12e4+0x1*0x1a86);});}get['bakeArea'](){return this['data']['bakeArea'];}set['cascadeDis'+'tribution'](_0x181272){this['_setValue']('cascadeDis'+'tribution',_0x181272,function(_0xbcf2f4,_0x140460){this['light']['cascadeDis'+'tribution']=Y['clamp'](_0xbcf2f4,-0x177e+-0x683*-0x1+0x10fb,-0x71*0x13+-0x14d1+0x1d35);});}get['cascadeDis'+'tribution'](){return this['data']['cascadeDis'+'tribution'];}set['normalOffs'+'etBias'](_0x428dda){this['_setValue']('normalOffs'+'etBias',_0x428dda,function(_0x19c1c8,_0x1996c8){this['light']['normalOffs'+'etBias']=Y['clamp'](_0x19c1c8,-0x1efa+-0x5*-0x493+0x81b*0x1,0x415+-0x93b+0x527);});}get['normalOffs'+'etBias'](){return this['data']['normalOffs'+'etBias'];}set['range'](_0x39266a){this['_setValue']('range',_0x39266a,function(_0x369b68,_0x18938c){this['light']['attenuatio'+'nEnd']=_0x369b68;});}get['range'](){return this['data']['range'];}set['innerConeA'+'ngle'](_0x2e89d1){this['_setValue']('innerConeA'+'ngle',_0x2e89d1,function(_0x4a295d,_0x13d613){this['light']['innerConeA'+'ngle']=_0x4a295d;});}get['innerConeA'+'ngle'](){return this['data']['innerConeA'+'ngle'];}set['outerConeA'+'ngle'](_0x2271cd){this['_setValue']('outerConeA'+'ngle',_0x2271cd,function(_0xd65771,_0x4dc5c6){this['light']['outerConeA'+'ngle']=_0xd65771;});}get['outerConeA'+'ngle'](){return this['data']['outerConeA'+'ngle'];}set['falloffMod'+'e'](_0x14b1a6){this['_setValue']('falloffMod'+'e',_0x14b1a6,function(_0x28d634,_0x3ff109){this['light']['falloffMod'+'e']=_0x28d634;});}get['falloffMod'+'e'](){return this['data']['falloffMod'+'e'];}set['shadowType'](_0x174414){this['_setValue']('shadowType',_0x174414,function(_0x3165b5,_0x498a89){this['light']['shadowType']=_0x3165b5;});}get['shadowType'](){return this['data']['shadowType'];}set['vsmBlurSiz'+'e'](_0xa5ca77){this['_setValue']('vsmBlurSiz'+'e',_0xa5ca77,function(_0xaa313,_0x5e0a92){this['light']['vsmBlurSiz'+'e']=_0xaa313;});}get['vsmBlurSiz'+'e'](){return this['data']['vsmBlurSiz'+'e'];}set['vsmBlurMod'+'e'](_0x17742f){this['_setValue']('vsmBlurMod'+'e',_0x17742f,function(_0x306367,_0x2a0b1c){this['light']['vsmBlurMod'+'e']=_0x306367;});}get['vsmBlurMod'+'e'](){return this['data']['vsmBlurMod'+'e'];}set['vsmBias'](_0x1faf86){this['_setValue']('vsmBias',_0x1faf86,function(_0x382f8e,_0x20c246){this['light']['vsmBias']=Y['clamp'](_0x382f8e,0x5*-0x189+0x1*-0x30f+0x4*0x2af,0x1f67+-0x145b+-0xb*0x101);});}get['vsmBias'](){return this['data']['vsmBias'];}set['cookieAsse'+'t'](_0x529c04){this['_setValue']('cookieAsse'+'t',_0x529c04,function(_0x4e54c3,_0x365c8e){if(!(this['_cookieAss'+'etId']&&(_0x4e54c3 instanceof pe&&_0x4e54c3['id']===this['_cookieAss'+'etId']||_0x4e54c3===this['_cookieAss'+'etId']))){if(this['onCookieAs'+'setRemove'](),this['_cookieAss'+'etId']=null,_0x4e54c3 instanceof pe)this['data']['cookieAsse'+'t']=_0x4e54c3['id'],this['_cookieAss'+'etId']=_0x4e54c3['id'],this['onCookieAs'+'setAdd'](_0x4e54c3);else{if(typeof _0x4e54c3=='number'){this['_cookieAss'+'etId']=_0x4e54c3;const _0x9e5fd7=this['system']['app']['assets']['get'](_0x4e54c3);_0x9e5fd7?this['onCookieAs'+'setAdd'](_0x9e5fd7):(this['_cookieAss'+'etAdd']=!(0x1*0xd66+0xb*0x1f+-0xebb*0x1),this['system']['app']['assets']['on']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this));}}}});}get['cookieAsse'+'t'](){return this['data']['cookieAsse'+'t'];}set['cookie'](_0x25005d){this['_setValue']('cookie',_0x25005d,function(_0x253bdb,_0x567e56){this['light']['cookie']=_0x253bdb;});}get['cookie'](){return this['data']['cookie'];}set['cookieInte'+'nsity'](_0x58f89c){this['_setValue']('cookieInte'+'nsity',_0x58f89c,function(_0x451af4,_0xd25627){this['light']['cookieInte'+'nsity']=Y['clamp'](_0x451af4,-0xbf*-0x29+-0x1106+-0xd91,-0xb5*-0x1e+-0xcd*-0x2+-0x16cf);});}get['cookieInte'+'nsity'](){return this['data']['cookieInte'+'nsity'];}set['cookieFall'+'off'](_0x4c113e){this['_setValue']('cookieFall'+'off',_0x4c113e,function(_0xc8d53f,_0xd5f25e){this['light']['cookieFall'+'off']=_0xc8d53f;});}get['cookieFall'+'off'](){return this['data']['cookieFall'+'off'];}set['cookieChan'+'nel'](_0x1f907b){this['_setValue']('cookieChan'+'nel',_0x1f907b,function(_0x2f08f7,_0x2e5ad3){this['light']['cookieChan'+'nel']=_0x2f08f7;});}get['cookieChan'+'nel'](){return this['data']['cookieChan'+'nel'];}set['cookieAngl'+'e'](_0x144656){this['_setValue']('cookieAngl'+'e',_0x144656,function(_0xb757bd,_0x1629bf){if(_0xb757bd!==-0xd4e+-0x242f+0x317d||this['cookieScal'+'e']!==null){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new re());let _0x54b4b4=-0x2141+0x3*-0x7ab+0x3843,_0x941df2=0x97*0x37+0x1*-0x3ef+-0x1c81;this['cookieScal'+'e']&&(_0x54b4b4=this['cookieScal'+'e']['x'],_0x941df2=this['cookieScal'+'e']['y']);const _0xa6b353=Math['cos'](_0xb757bd*Y['DEG_TO_RAD']),_0x16eba7=Math['sin'](_0xb757bd*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0xa6b353/_0x54b4b4,-_0x16eba7/_0x54b4b4,_0x16eba7/_0x941df2,_0xa6b353/_0x941df2),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;});}get['cookieAngl'+'e'](){return this['data']['cookieAngl'+'e'];}set['cookieScal'+'e'](_0x29f50b){this['_setValue']('cookieScal'+'e',_0x29f50b,function(_0x5a0e95,_0x2ca474){if(_0x5a0e95!==null||this['cookieAngl'+'e']!==-0x58e+-0x1*0xf11+-0x1*-0x149f){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new re());const _0x53878f=_0x5a0e95['x'],_0x1e3636=_0x5a0e95['y'],_0x5bc1c2=Math['cos'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']),_0x49f535=Math['sin'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x5bc1c2/_0x53878f,-_0x49f535/_0x53878f,_0x49f535/_0x1e3636,_0x5bc1c2/_0x1e3636),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;},!(-0x16ba+0x183f+-0x185));}get['cookieScal'+'e'](){return this['data']['cookieScal'+'e'];}set['cookieOffs'+'et'](_0x4927eb){this['_setValue']('cookieOffs'+'et',_0x4927eb,function(_0x2ac751,_0x2f4fb9){this['light']['cookieOffs'+'et']=_0x2ac751;},!(-0x2362+-0x74f+0x2ab1));}get['cookieOffs'+'et'](){return this['data']['cookieOffs'+'et'];}set['shadowUpda'+'teMode'](_0x51fdad){this['_setValue']('shadowUpda'+'teMode',_0x51fdad,function(_0x357f2a,_0x230b9b){this['light']['shadowUpda'+'teMode']=_0x357f2a;},!(0xffc+0xc85*-0x1+-0x377));}get['shadowUpda'+'teMode'](){return this['data']['shadowUpda'+'teMode'];}set['mask'](_0x5cf22f){this['_setValue']('mask',_0x5cf22f,function(_0x43e1f6,_0x780be){this['light']['mask']=_0x43e1f6;});}get['mask'](){return this['data']['mask'];}set['affectDyna'+'mic'](_0x2c7094){this['_setValue']('affectDyna'+'mic',_0x2c7094,function(_0xbefa45,_0x5c9f8d){_0xbefa45?this['light']['mask']|=Ss:this['light']['mask']&=~Ss,this['light']['layersDirt'+'y']();});}get['affectDyna'+'mic'](){return this['data']['affectDyna'+'mic'];}set['affectLigh'+'tmapped'](_0x5a06e2){this['_setValue']('affectLigh'+'tmapped',_0x5a06e2,function(_0x4d622e,_0x867fd){_0x4d622e?(this['light']['mask']|=di,this['bake']&&(this['light']['mask']&=~fi)):(this['light']['mask']&=~di,this['bake']&&(this['light']['mask']|=fi));});}get['affectLigh'+'tmapped'](){return this['data']['affectLigh'+'tmapped'];}set['bake'](_0x1505e5){this['_setValue']('bake',_0x1505e5,function(_0x22b880,_0x57fb01){_0x22b880?(this['light']['mask']|=fi,this['affectLigh'+'tmapped']&&(this['light']['mask']&=~di)):(this['light']['mask']&=~fi,this['affectLigh'+'tmapped']&&(this['light']['mask']|=di)),this['light']['layersDirt'+'y']();});}get['bake'](){return this['data']['bake'];}set['bakeDir'](_0x149f8d){this['_setValue']('bakeDir',_0x149f8d,function(_0x4eb3d4,_0x97e61d){this['light']['bakeDir']=_0x4eb3d4;});}get['bakeDir'](){return this['data']['bakeDir'];}set['isStatic'](_0x488795){this['_setValue']('isStatic',_0x488795,function(_0x29e833,_0x315b8a){this['light']['isStatic']=_0x29e833;});}get['isStatic'](){return this['data']['isStatic'];}set['layers'](_0x250e10){this['_setValue']('layers',_0x250e10,function(_0x42c49e,_0x664dea){for(let _0x25221f=0x98a*-0x2+-0x2c9+-0xc1*-0x1d;_0x25221f<_0x664dea['length'];_0x25221f++){const _0x2117a1=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x664dea[_0x25221f]);_0x2117a1&&(_0x2117a1['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x2117a1));}for(let _0x478677=0x1*0x192b+0x509*-0x7+0xa14;_0x478677<_0x42c49e['length'];_0x478677++){const _0x1543d1=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x42c49e[_0x478677]);_0x1543d1&&this['enabled']&&this['entity']['enabled']&&(_0x1543d1['addLight'](this),this['light']['addLayer'](_0x1543d1));}});}get['layers'](){return this['data']['layers'];}set['shadowUpda'+'teOverride'+'s'](_0x2d2e22){this['light']['shadowUpda'+'teOverride'+'s']=_0x2d2e22;}get['shadowUpda'+'teOverride'+'s'](){return this['light']['shadowUpda'+'teOverride'+'s'];}set['shadowSamp'+'les'](_0x3310f6){this['light']['shadowSamp'+'les']=_0x3310f6;}get['shadowSamp'+'les'](){return this['light']['shadowSamp'+'les'];}set['shadowBloc'+'kerSamples'](_0x3e16d8){this['light']['shadowBloc'+'kerSamples']=_0x3e16d8;}get['shadowBloc'+'kerSamples'](){return this['light']['shadowBloc'+'kerSamples'];}set['penumbraSi'+'ze'](_0x99aba4){this['light']['penumbraSi'+'ze']=_0x99aba4;}get['penumbraSi'+'ze'](){return this['light']['penumbraSi'+'ze'];}set['penumbraFa'+'lloff'](_0x1b1914){this['light']['penumbraFa'+'lloff']=_0x1b1914;}get['penumbraFa'+'lloff'](){return this['light']['penumbraFa'+'lloff'];}['_setValue'](_0x54b469,_0xc90588,_0x4eea86,_0x3e2bad){const _0x3efde0=this['data'],_0x329add=_0x3efde0[_0x54b469];!_0x3e2bad&&_0x329add===_0xc90588||(_0x3efde0[_0x54b469]=_0xc90588,_0x4eea86&&_0x4eea86['call'](this,_0xc90588,_0x329add));}['addLightTo'+'Layers'](){for(let _0xf90b73=-0x589+0x26e8+0x215f*-0x1;_0xf90b73<this['layers']['length'];_0xf90b73++){const _0x176fdb=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0xf90b73]);_0x176fdb&&(_0x176fdb['addLight'](this),this['light']['addLayer'](_0x176fdb));}}['removeLigh'+'tFromLayer'+'s'](){for(let _0x5dd850=-0x4f*-0x14+-0x1*-0x20d9+-0x2705;_0x5dd850<this['layers']['length'];_0x5dd850++){const _0x51568a=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x5dd850]);_0x51568a&&(_0x51568a['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x51568a));}}['onLayersCh'+'anged'](_0x1876c2,_0x3dadaf){this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),_0x1876c2['off']('add',this['onLayerAdd'+'ed'],this),_0x1876c2['off']('remove',this['onLayerRem'+'oved'],this),_0x3dadaf['on']('add',this['onLayerAdd'+'ed'],this),_0x3dadaf['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x55e17e){this['layers']['indexOf'](_0x55e17e['id'])>=-0x574*-0x5+0x26bf+-0x4203&&this['enabled']&&this['entity']['enabled']&&(_0x55e17e['addLight'](this),this['light']['addLayer'](_0x55e17e));}['onLayerRem'+'oved'](_0x3cf437){this['layers']['indexOf'](_0x3cf437['id'])>=0x12f1*-0x2+-0x18dc+0x3ebe&&(_0x3cf437['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x3cf437));}['refreshPro'+'perties'](){for(let _0x5be9fa=0x15ac+-0x50d+0x353*-0x5;_0x5be9fa<Io['length'];_0x5be9fa++){const _0x31542c=Io[_0x5be9fa];this[_0x31542c]=this[_0x31542c];}this['enabled']&&this['entity']['enabled']&&this['onEnable']();}['onCookieAs'+'setSet'](){let _0x581fa7=!(-0xe61+-0x1a8b+-0x1*-0x28ed);this['_cookieAss'+'et']['type']==='cubemap'&&!this['_cookieAss'+'et']['loadFaces']&&(this['_cookieAss'+'et']['loadFaces']=!(-0x2026+-0xc8+-0x5*-0x696),_0x581fa7=!(-0x3*0x853+-0x466*0x4+-0x281*-0x11)),(!this['_cookieAss'+'et']['resource']||_0x581fa7)&&this['system']['app']['assets']['load'](this['_cookieAss'+'et']),this['_cookieAss'+'et']['resource']&&this['onCookieAs'+'setLoad']();}['onCookieAs'+'setAdd'](_0x59b635){this['_cookieAss'+'etId']===_0x59b635['id']&&(this['_cookieAss'+'et']=_0x59b635,this['light']['enabled']&&this['onCookieAs'+'setSet'](),this['_cookieAss'+'et']['on']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['on']('remove',this['onCookieAs'+'setRemove'],this));}['onCookieAs'+'setLoad'](){!this['_cookieAss'+'et']||!this['_cookieAss'+'et']['resource']||(this['cookie']=this['_cookieAss'+'et']['resource']);}['onCookieAs'+'setRemove'](){this['_cookieAss'+'etId']&&(this['_cookieAss'+'etAdd']&&(this['system']['app']['assets']['off']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this),this['_cookieAss'+'etAdd']=!(0x121c+0x1f33+-0x314e)),this['_cookieAss'+'et']&&(this['_cookieAss'+'et']['off']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['off']('remove',this['onCookieAs'+'setRemove'],this),this['_cookieAss'+'et']=null),this['cookie']=null);}['onEnable'](){const _0x23588c=this['system']['app']['scene'],_0xb168dd=_0x23588c['layers'];this['light']['enabled']=!(0x6*0x27a+0xa0c+0x4*-0x63a),this['_evtLayers'+'Changed']=_0x23588c['on']('set:layers',this['onLayersCh'+'anged'],this),_0xb168dd&&(this['_evtLayerA'+'dded']=_0xb168dd['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0xb168dd['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),this['_cookieAss'+'et']&&!this['cookie']&&this['onCookieAs'+'setSet']();}['onDisable'](){var _0x1e849d,_0x35637a,_0x13a30d;const _0x52c22d=this['system']['app']['scene']['layers'];this['light']['enabled']=!(0xcc6+-0x1f13+0x124e),(_0x1e849d=this['_evtLayers'+'Changed'])==null||_0x1e849d['off'](),this['_evtLayers'+'Changed']=null,_0x52c22d&&((_0x35637a=this['_evtLayerA'+'dded'])==null||_0x35637a['off'](),this['_evtLayerA'+'dded']=null,(_0x13a30d=this['_evtLayerR'+'emoved'])==null||_0x13a30d['off'](),this['_evtLayerR'+'emoved']=null),this['removeLigh'+'tFromLayer'+'s']();}['onRemove'](){this['onDisable'](),this['light']['destroy'](),this['cookieAsse'+'t']=null;}}class VO extends ct{constructor(_0x58269f){super(_0x58269f),this['id']='light',this['ComponentT'+'ype']=zO,this['DataType']=Rv,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x846fab,_0x5edde6){const _0x2bc1c8={..._0x5edde6};_0x2bc1c8['type']||(_0x2bc1c8['type']=_0x846fab['data']['type']),_0x846fab['data']['type']=_0x2bc1c8['type'],_0x2bc1c8['layers']&&Array['isArray'](_0x2bc1c8['layers'])&&(_0x2bc1c8['layers']=_0x2bc1c8['layers']['slice'](-0x385+-0x1ac0+0x1e45)),_0x2bc1c8['color']&&Array['isArray'](_0x2bc1c8['color'])&&(_0x2bc1c8['color']=new ie(_0x2bc1c8['color'][-0x1cb3+-0x8d3+-0xc82*-0x3],_0x2bc1c8['color'][-0x16c6+0x2034+-0x96d],_0x2bc1c8['color'][0x697+-0x1edb+-0x2*-0xc23])),_0x2bc1c8['cookieOffs'+'et']&&_0x2bc1c8['cookieOffs'+'et']instanceof Array&&(_0x2bc1c8['cookieOffs'+'et']=new J(_0x2bc1c8['cookieOffs'+'et'][-0x1458+-0x1*0x228e+0x36e6],_0x2bc1c8['cookieOffs'+'et'][0x1*-0x1ced+-0x2f*-0x1+0xb*0x29d])),_0x2bc1c8['cookieScal'+'e']&&_0x2bc1c8['cookieScal'+'e']instanceof Array&&(_0x2bc1c8['cookieScal'+'e']=new J(_0x2bc1c8['cookieScal'+'e'][0x44a+0x1d2d*0x1+-0x2177],_0x2bc1c8['cookieScal'+'e'][0x10*-0x25d+0xa7*-0x11+0x30e8])),_0x2bc1c8['enable']&&(console['warn']('WARNING:\x20e'+'nable:\x20Pro'+'perty\x20is\x20d'+'eprecated.'+'\x20Set\x20enabl'+'ed\x20propert'+'y\x20instead.'),_0x2bc1c8['enabled']=_0x2bc1c8['enable']),_0x2bc1c8['shape']||(_0x2bc1c8['shape']=js);const _0x315eff=new tl(this['app']['graphicsDe'+'vice'],this['app']['scene']['clusteredL'+'ightingEna'+'bled']);_0x315eff['type']=zf[_0x2bc1c8['type']],_0x315eff['_node']=_0x846fab['entity'],_0x846fab['data']['light']=_0x315eff,super['initialize'+'ComponentD'+'ata'](_0x846fab,_0x2bc1c8,Io);}['_onRemoveC'+'omponent'](_0x13edc0,_0x3f1ff9){_0x3f1ff9['onRemove']();}['cloneCompo'+'nent'](_0x5bbd62,_0x121683){const _0x449a81=_0x5bbd62['light'],_0xbfaad0=[];let _0x39032b;for(let _0xbec695=0x100e+0x1fbb+-0xd*0x3ad;_0xbec695<Io['length'];_0xbec695++)_0x39032b=Io[_0xbec695],_0x39032b!=='light'&&(_0x449a81[_0x39032b]&&_0x449a81[_0x39032b]['clone']?_0xbfaad0[_0x39032b]=_0x449a81[_0x39032b]['clone']():_0xbfaad0[_0x39032b]=_0x449a81[_0x39032b]);return this['addCompone'+'nt'](_0x121683,_0xbfaad0);}['changeType'](_0x3d57a1,_0x3c21fe,_0x3aed66){_0x3c21fe!==_0x3aed66&&(_0x3d57a1['light']['type']=zf[_0x3aed66]);}}const GO=['x','y','z','w'],HO=[void(0x2550+-0x1769+0x1*-0xde7),void(-0x9*0x16f+0x5*0xf1+0x1*0x832),J,D,re];function Gn(_0x37e4ec,_0x325720,_0x1b87dd,_0x53e1d4){switch(_0x325720['type']){case'boolean':return!!_0x1b87dd;case'number':if(typeof _0x1b87dd=='number')return _0x1b87dd;if(typeof _0x1b87dd=='string'){const _0x1f3210=parseInt(_0x1b87dd,0x1abb+-0xe*-0x7c+-0x2179);return isNaN(_0x1f3210)?null:_0x1f3210;}else{if(typeof _0x1b87dd=='boolean')return 0x216*-0x2+-0x1616+0x1a42+_0x1b87dd;}return null;case'json':{const _0x3f813e={};if(Array['isArray'](_0x325720['schema'])){(!_0x1b87dd||typeof _0x1b87dd!='object')&&(_0x1b87dd={});for(let _0xa7d287=-0x1*-0xb2+-0x2*0xf87+-0x86*-0x3a;_0xa7d287<_0x325720['schema']['length'];_0xa7d287++){const _0x4a09ac=_0x325720['schema'][_0xa7d287];if(_0x4a09ac['name']){if(_0x4a09ac['array']){_0x3f813e[_0x4a09ac['name']]=[];const _0x5200ba=Array['isArray'](_0x1b87dd[_0x4a09ac['name']])?_0x1b87dd[_0x4a09ac['name']]:[];for(let _0x2639d0=0x2*0x117f+0x1*-0xdc5+-0x1539*0x1;_0x2639d0<_0x5200ba['length'];_0x2639d0++)_0x3f813e[_0x4a09ac['name']]['push'](Gn(_0x37e4ec,_0x4a09ac,_0x5200ba[_0x2639d0]));}else{const _0x3fec9c=_0x1b87dd['hasOwnProp'+'erty'](_0x4a09ac['name'])?_0x1b87dd[_0x4a09ac['name']]:_0x4a09ac['default'];_0x3f813e[_0x4a09ac['name']]=Gn(_0x37e4ec,_0x4a09ac,_0x3fec9c);}}}}return _0x3f813e;}case'asset':return _0x1b87dd instanceof pe?_0x1b87dd:typeof _0x1b87dd=='number'?_0x37e4ec['assets']['get'](_0x1b87dd)||null:typeof _0x1b87dd=='string'&&_0x37e4ec['assets']['get'](parseInt(_0x1b87dd,-0x115f+-0x4*-0x1a5+0xad5))||null;case'entity':return _0x1b87dd instanceof Ie?_0x1b87dd:typeof _0x1b87dd=='string'?_0x37e4ec['getEntityF'+'romIndex'](_0x1b87dd):null;case'rgb':case'rgba':if(_0x1b87dd instanceof ie)return _0x53e1d4 instanceof ie?(_0x53e1d4['copy'](_0x1b87dd),_0x53e1d4):_0x1b87dd['clone']();if(_0x1b87dd instanceof Array&&_0x1b87dd['length']>=-0x7cd*-0x4+0x53*-0x31+0x3*-0x51a&&_0x1b87dd['length']<=0x22a4+-0xdab*0x1+-0x14f5*0x1){for(let _0x5c4831=0x3*-0x331+-0x3d*-0x92+-0x1937;_0x5c4831<_0x1b87dd['length'];_0x5c4831++)if(typeof _0x1b87dd[_0x5c4831]!='number')return null;return _0x53e1d4||(_0x53e1d4=new ie()),_0x53e1d4['r']=_0x1b87dd[0x1*-0x1bfe+0xc12+0xfec],_0x53e1d4['g']=_0x1b87dd[-0x6e1+0x1ae2+-0x1400],_0x53e1d4['b']=_0x1b87dd[0x1bad+-0x25c1+0xa16],_0x53e1d4['a']=_0x1b87dd['length']===-0x1b2a+0x1*0x1bc4+-0x97*0x1?-0x19e3+0x1*-0x5d5+0x1fb9:_0x1b87dd[-0x896+-0x15bd+0x1e56],_0x53e1d4;}else{if(typeof _0x1b87dd=='string'&&/#(?:[0-9a-f]{2}){3,4}/i['test'](_0x1b87dd))return _0x53e1d4||(_0x53e1d4=new ie()),_0x53e1d4['fromString'](_0x1b87dd),_0x53e1d4;}return null;case'vec2':case'vec3':case'vec4':{const _0x213797=parseInt(_0x325720['type']['slice'](-0x129b*0x1+0xe4+0x11ba),0x2f8+0x12d0+-0x15be),_0x436d3e=HO[_0x213797];if(_0x1b87dd instanceof _0x436d3e)return _0x53e1d4 instanceof _0x436d3e?(_0x53e1d4['copy'](_0x1b87dd),_0x53e1d4):_0x1b87dd['clone']();if(_0x1b87dd instanceof Array&&_0x1b87dd['length']===_0x213797){for(let _0x1f0ce9=-0x74*-0x34+0xf75+0x2705*-0x1;_0x1f0ce9<_0x1b87dd['length'];_0x1f0ce9++)if(typeof _0x1b87dd[_0x1f0ce9]!='number')return null;_0x53e1d4||(_0x53e1d4=new _0x436d3e());for(let _0x3cfc07=-0x2*-0xedb+0x1e6d+-0x1*0x3c23;_0x3cfc07<_0x213797;_0x3cfc07++)_0x53e1d4[GO[_0x3cfc07]]=_0x1b87dd[_0x3cfc07];return _0x53e1d4;}return null;}case'curve':if(_0x1b87dd){let _0x4c012f;if(_0x1b87dd instanceof Xs||_0x1b87dd instanceof ta)_0x4c012f=_0x1b87dd['clone']();else{const _0x41772c=_0x1b87dd['keys'][0xe11+0x45*-0x57+0x962]instanceof Array?ta:Xs;_0x4c012f=new _0x41772c(_0x1b87dd['keys']),_0x4c012f['type']=_0x1b87dd['type'];}return _0x4c012f;}break;}return _0x1b87dd;}function Ov(_0x52864d,_0x5ed68b,_0x507dd5,_0x1dfc7c){return _0x5ed68b['array']?_0x507dd5['map']((_0x56ec61,_0x4d6f48)=>Gn(_0x52864d,_0x5ed68b,_0x56ec61,_0x1dfc7c?_0x1dfc7c[_0x4d6f48]:null)):Gn(_0x52864d,_0x5ed68b,_0x507dd5,_0x1dfc7c);}function Fv(_0xe8fc3a,_0x48cab0,_0x1cb516,_0x2dd7f9){if(_0x1cb516)for(const _0x5199bb in _0x48cab0){const _0x39dddb=_0x48cab0[_0x5199bb],_0x18d434=_0x1cb516[_0x5199bb];_0x18d434!==void(-0x1c51+0x5d1*0x5+-0xc4)&&(_0x2dd7f9[_0x5199bb]=Ov(_0xe8fc3a,_0x39dddb,_0x18d434,_0x2dd7f9[_0x5199bb]));}}const fn=class fn{constructor(_0x43346e){this['scriptType']=_0x43346e,this['index']={};}['add'](_0x490460,_0x19049c){if(this['index'][_0x490460]){w['warn']('attribute\x20'+'\x27'+_0x490460+('\x27\x20is\x20alrea'+'dy\x20defined'+'\x20for\x20scrip'+'t\x20type\x20\x27')+this['scriptType']['name']+'\x27');return;}else{if(fn['reservedNa'+'mes']['has'](_0x490460)){w['warn']('attribute\x20'+'\x27'+_0x490460+('\x27\x20is\x20a\x20res'+'erved\x20attr'+'ibute\x20name'));return;}}this['index'][_0x490460]=_0x19049c,Object['defineProp'+'erty'](this['scriptType']['prototype'],_0x490460,{'get':function(){return this['__attribut'+'es'][_0x490460];},'set':function(_0x2ec9d5){const _0x24cdf9='attr',_0x3fe36a='attr:'+_0x490460,_0x3a68b5=this['__attribut'+'es'][_0x490460];let _0x1c3e4c=_0x3a68b5;if(_0x3a68b5&&_0x19049c['type']!=='json'&&_0x19049c['type']!=='entity'&&_0x3a68b5['clone']&&(this['hasEvent'](_0x24cdf9)||this['hasEvent'](_0x3fe36a))&&(_0x1c3e4c=_0x3a68b5['clone']()),_0x19049c['array']){if(this['__attribut'+'es'][_0x490460]=[],_0x2ec9d5){for(let _0x2d711a=0x1751+0x211e+-0x386f,_0x5b47d8=_0x2ec9d5['length'];_0x2d711a<_0x5b47d8;_0x2d711a++)this['__attribut'+'es'][_0x490460]['push'](Gn(this['app'],_0x19049c,_0x2ec9d5[_0x2d711a],_0x3a68b5?_0x3a68b5[_0x2d711a]:null));}}else this['__attribut'+'es'][_0x490460]=Gn(this['app'],_0x19049c,_0x2ec9d5,_0x3a68b5);this['fire'](_0x24cdf9,_0x490460,this['__attribut'+'es'][_0x490460],_0x1c3e4c),this['fire'](_0x3fe36a,this['__attribut'+'es'][_0x490460],_0x1c3e4c);}});}['remove'](_0x2a6ae7){return this['index'][_0x2a6ae7]?(delete this['index'][_0x2a6ae7],delete this['scriptType']['prototype'][_0x2a6ae7],!(0x201*-0x3+0x1*-0x1b6b+0x216e)):!(0x1aa1+-0xc30+-0x21*0x70);}['has'](_0x960ff8){return!!this['index'][_0x960ff8];}['get'](_0x956a78){return this['index'][_0x956a78]||null;}};h(fn,'assignAttr'+'ibutesToSc'+'ript',Fv),h(fn,'attributeT'+'oValue',Ov),h(fn,'reservedNa'+'mes',new Set(['app','entity','enabled','_enabled','_enabledOl'+'d','_destroyed','__attribut'+'es','__attribut'+'esRaw','__scriptTy'+'pe','__executio'+'nOrder','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']));let al=fn;const uu='initialize',pu='postInitia'+'lize',WO='update',$O='postUpdate',XO='swap';class ts extends me{constructor(_0x1e00b5){super(),h(this,'app'),h(this,'entity'),h(this,'_enabled'),h(this,'_enabledOl'+'d'),h(this,'_initializ'+'ed'),h(this,'_postIniti'+'alized'),h(this,'__destroye'+'d'),h(this,'__scriptTy'+'pe'),h(this,'__executio'+'nOrder'),this['initScript'](_0x1e00b5);}set['enabled'](_0x1faf27){this['_enabled']=!!_0x1faf27,this['enabled']!==this['_enabledOl'+'d']&&(this['_enabledOl'+'d']=this['enabled'],this['fire'](this['enabled']?'enable':'disable'),this['fire']('state',this['enabled']),!this['_initializ'+'ed']&&this['enabled']&&(this['_initializ'+'ed']=!(0xacd+0x1*-0xa41+-0x8c),this['fire']('preInitial'+'ize'),this['initialize']&&this['entity']['script']['_scriptMet'+'hod'](this,uu)),this['_initializ'+'ed']&&!this['_postIniti'+'alized']&&this['enabled']&&!this['entity']['script']['_beingEnab'+'led']&&(this['_postIniti'+'alized']=!(-0x1124+0x1c6*0x2+0xc*0x122),this['postInitia'+'lize']&&this['entity']['script']['_scriptMet'+'hod'](this,pu)));}get['enabled'](){return this['_enabled']&&!this['_destroyed']&&this['entity']['script']['enabled']&&this['entity']['enabled'];}['initScript'](_0x3e5836){const _0x579868=this['constructo'+'r'];w['assert'](_0x3e5836&&_0x3e5836['app']&&_0x3e5836['entity'],'script\x20['+_0x579868['__name']+(']\x20has\x20miss'+'ing\x20argume'+'nts\x20in\x20con'+'structor')),this['app']=_0x3e5836['app'],this['entity']=_0x3e5836['entity'],this['_enabled']=typeof _0x3e5836['enabled']=='boolean'?_0x3e5836['enabled']:!(0x446*-0x1+0x10*-0x199+0x1*0x1dd6),this['_enabledOl'+'d']=this['enabled'],this['__destroye'+'d']=!(-0x6f2+0xa26+-0x333),this['__scriptTy'+'pe']=_0x579868,this['__executio'+'nOrder']=-(-0x267+0x1c88+0xb*-0x260);}static get['scriptName'](){return this['__name'];}}h(ts,'EVENT_ENAB'+'LE','enable'),h(ts,'EVENT_DISA'+'BLE','disable'),h(ts,'EVENT_STAT'+'E','state'),h(ts,'EVENT_DEST'+'ROY','destroy'),h(ts,'EVENT_ATTR','attr'),h(ts,'EVENT_ERRO'+'R','error'),h(ts,'__name',null),h(ts,'__getScrip'+'tName',Nv);const qO=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s\/]*)\s*/;function Nv(_0x53c4c9){if(typeof _0x53c4c9!='function')return;if(_0x53c4c9['scriptName'])return _0x53c4c9['scriptName'];if('name'in Function['prototype'])return _0x53c4c9['name'];if(_0x53c4c9===Function||_0x53c4c9===Function['prototype']['constructo'+'r'])return'Function';const _0x355a1a=(''+_0x53c4c9)['match'](qO);return _0x355a1a?_0x355a1a[0xc2*0x33+0x1c3+-0x2868]:void(-0xdc7+0x2c6+0x139*0x9);}class Lo extends ts{constructor(_0x445bd6){super(_0x445bd6),h(this,'__attribut'+'es'),h(this,'__attribut'+'esRaw'),this['initScript'+'Type'](_0x445bd6);}static get['attributes'](){return this['hasOwnProp'+'erty']('__attribut'+'es')||(this['__attribut'+'es']=new al(this)),this['__attribut'+'es'];}['initScript'](_0x450f39){ts['prototype']['initScript']['call'](this,_0x450f39),this['__attribut'+'es']={},this['__attribut'+'esRaw']=_0x450f39['attributes']||{};}['initScript'+'Type'](_0x519bf6){this['initScript'](_0x519bf6);}['__initiali'+'zeAttribut'+'es'](_0x5c375f){if(!(!_0x5c375f&&!this['__attribut'+'esRaw'])){for(const _0x5b9c0f in this['__scriptTy'+'pe']['attributes']['index'])this['__attribut'+'esRaw']&&this['__attribut'+'esRaw']['hasOwnProp'+'erty'](_0x5b9c0f)?this[_0x5b9c0f]=this['__attribut'+'esRaw'][_0x5b9c0f]:this['__attribut'+'es']['hasOwnProp'+'erty'](_0x5b9c0f)||(this['__scriptTy'+'pe']['attributes']['index'][_0x5b9c0f]['hasOwnProp'+'erty']('default')?this[_0x5b9c0f]=this['__scriptTy'+'pe']['attributes']['index'][_0x5b9c0f]['default']:this[_0x5b9c0f]=null);this['__attribut'+'esRaw']=null;}}static['extend'](_0x52f784){for(const _0x14caa1 in _0x52f784)_0x52f784['hasOwnProp'+'erty'](_0x14caa1)&&(this['prototype'][_0x14caa1]=_0x52f784[_0x14caa1]);}}const jO=_0x2c636a=>_0x2c636a[0x176d*0x1+0xe0+0x1*-0x184d]['toLowerCas'+'e']()+_0x2c636a['substring'](-0x2062*-0x1+-0x1c82+-0x3df);class Ii extends we{constructor(_0x4a77c8,_0x55fcdf){super(_0x4a77c8,_0x55fcdf),h(this,'_attribute'+'DataMap',new Map()),(this['_scripts']=[],this['_updateLis'+'t']=new Bc({'sortBy':'__executio'+'nOrder'}),this['_postUpdat'+'eList']=new Bc({'sortBy':'__executio'+'nOrder'}),this['_scriptsIn'+'dex']={},this['_destroyed'+'Scripts']=[],this['_destroyed']=!(-0x2*0xe3a+-0x2*0x755+0x85*0x53),this['_scriptsDa'+'ta']=null,this['_oldState']=!(0x2690+-0x1af+0x24e1*-0x1),this['_enabled']=!(-0xef*0x8+0x2*-0xdf6+0x2364),this['_beingEnab'+'led']=!(0x14fc+-0x1fd5+0xada),this['_isLooping'+'ThroughScr'+'ipts']=!(0x1c9d+0x359*-0x8+0x9*-0x34),this['_execution'+'Order']=-(0xc41*-0x3+0x2af+-0x5*-0x6d1),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this));}set['scripts'](_0xf9ca5f){this['_scriptsDa'+'ta']=_0xf9ca5f;for(const _0x513f14 in _0xf9ca5f){if(!_0xf9ca5f['hasOwnProp'+'erty'](_0x513f14))continue;const _0x4d36b0=this['_scriptsIn'+'dex'][_0x513f14];if(_0x4d36b0){if(typeof _0xf9ca5f[_0x513f14]['enabled']=='boolean'&&(_0x4d36b0['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x4d36b0);}),_0x4d36b0['enabled']=!!_0xf9ca5f[_0x513f14]['enabled']),typeof _0xf9ca5f[_0x513f14]['attributes']=='object'){for(const _0x5f12a6 in _0xf9ca5f[_0x513f14]['attributes'])if(!al['reservedNa'+'mes']['has'](_0x5f12a6)){if(!_0x4d36b0['__attribut'+'es']['hasOwnProp'+'erty'](_0x5f12a6)){const _0x537f52=this['system']['app']['scripts']['get'](_0x513f14);_0x537f52&&_0x537f52['attributes']['add'](_0x5f12a6,{});}_0x4d36b0[_0x5f12a6]=_0xf9ca5f[_0x513f14]['attributes'][_0x5f12a6];}}}else console['log'](this['order']);}}get['scripts'](){return this['_scripts'];}set['enabled'](_0x53bd4e){const _0x1eb94e=this['_enabled'];this['_enabled']=_0x53bd4e,this['fire']('set','enabled',_0x1eb94e,_0x53bd4e);}get['enabled'](){return this['_enabled'];}['onEnable'](){this['_beingEnab'+'led']=!(-0x113+0x1db4+-0x15d*0x15),this['_checkStat'+'e'](),this['entity']['_beingEnab'+'led']||this['onPostStat'+'eChange'](),this['_beingEnab'+'led']=!(-0x13e0+-0xdbc+0x219d);}['onDisable'](){this['_checkStat'+'e']();}['onPostStat'+'eChange'](){const _0x2f331f=this['_beginLoop'+'ing']();for(let _0x40d181=0x21c1*0x1+-0x14d1+-0x1*0xcf0,_0x417dd1=this['scripts']['length'];_0x40d181<_0x417dd1;_0x40d181++){const _0x21f548=this['scripts'][_0x40d181];_0x21f548['_initializ'+'ed']&&!_0x21f548['_postIniti'+'alized']&&_0x21f548['enabled']&&(_0x21f548['_postIniti'+'alized']=!(0x1857*0x1+-0x304+-0x1553),_0x21f548['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x21f548,pu));}this['_endLoopin'+'g'](_0x2f331f);}['_beginLoop'+'ing'](){const _0x41fb5d=this['_isLooping'+'ThroughScr'+'ipts'];return this['_isLooping'+'ThroughScr'+'ipts']=!(-0x2d8*-0x1+0x1*-0x4d9+0x3*0xab),_0x41fb5d;}['_endLoopin'+'g'](_0x47cda9){this['_isLooping'+'ThroughScr'+'ipts']=_0x47cda9,this['_isLooping'+'ThroughScr'+'ipts']||this['_removeDes'+'troyedScri'+'pts']();}['_onSetEnab'+'led'](_0x5795c9,_0x503877,_0x510820){this['_beingEnab'+'led']=!(-0x1*0x2681+-0x957*-0x1+0x1d2a),this['_checkStat'+'e'](),this['_beingEnab'+'led']=!(0x1*0x124d+-0x1bf*0xd+0x467);}['_checkStat'+'e'](){const _0x347141=this['enabled']&&this['entity']['enabled'];if(_0x347141===this['_oldState'])return;this['_oldState']=_0x347141,this['fire'](_0x347141?'enable':'disable'),this['fire']('state',_0x347141),_0x347141?this['system']['_addCompon'+'entToEnabl'+'ed'](this):this['system']['_removeCom'+'ponentFrom'+'Enabled'](this);const _0x2441f2=this['_beginLoop'+'ing']();for(let _0x54c137=0x164f*-0x1+-0x1*0x1cea+0x3339,_0x276fb6=this['scripts']['length'];_0x54c137<_0x276fb6;_0x54c137++){const _0x4eee5e=this['scripts'][_0x54c137];_0x4eee5e['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x4eee5e);}),_0x4eee5e['enabled']=_0x4eee5e['_enabled'];}this['_endLoopin'+'g'](_0x2441f2);}['_onBeforeR'+'emove'](){this['fire']('remove');const _0x4bcfb4=this['_beginLoop'+'ing']();for(let _0x26710f=-0x1d39*-0x1+-0x1*0x1b2f+-0x20a;_0x26710f<this['scripts']['length'];_0x26710f++){const _0x52842d=this['scripts'][_0x26710f];_0x52842d&&this['destroy'](_0x52842d['__scriptTy'+'pe']['__name']);}this['_endLoopin'+'g'](_0x4bcfb4);}['_removeDes'+'troyedScri'+'pts'](){const _0x1cff53=this['_destroyed'+'Scripts']['length'];if(_0x1cff53){for(let _0x38d316=0xb8f*-0x3+-0x2da*0x7+0x36a3;_0x38d316<_0x1cff53;_0x38d316++){const _0x671a1d=this['_destroyed'+'Scripts'][_0x38d316];this['_removeScr'+'iptInstanc'+'e'](_0x671a1d);}this['_destroyed'+'Scripts']['length']=-0x26e0+-0x2db*-0x3+0x1*0x1e4f,this['_resetExec'+'utionOrder'](-0x48d+0x459*-0x3+0x1198,this['_scripts']['length']);}}['_onInitial'+'izeAttribu'+'tes'](){for(let _0x4c7c7e=0xa50+0x166*-0x15+0x130e,_0x301932=this['scripts']['length'];_0x4c7c7e<_0x301932;_0x4c7c7e++){const _0x2cfc51=this['scripts'][_0x4c7c7e];this['initialize'+'Attributes'](_0x2cfc51);}}['initialize'+'Attributes'](_0x4f75b7){var _0x344673;if(_0x4f75b7 instanceof Lo)_0x4f75b7['__initiali'+'zeAttribut'+'es']();else{const _0x4bf558=_0x4f75b7['__scriptTy'+'pe']['__name'],_0xbff8c8=this['_attribute'+'DataMap']['get'](_0x4bf558);if(!_0xbff8c8)return;const _0x483191=(_0x344673=this['system']['app']['scripts'])==null?void(-0x39c+0x3e*-0x6d+-0x2e*-0xa7):_0x344673['getSchema'](_0x4bf558);_0x483191||w['warnOnce']('No\x20schema\x20'+'exists\x20for'+'\x20the\x20scrip'+'t\x20\x27'+_0x4bf558+('\x27.\x20A\x20schem'+'a\x20must\x20exi'+'st\x20for\x20dat'+'a\x20to\x20be\x20in'+'stantiated'+'\x20on\x20the\x20sc'+'ript.')),Fv(this['system']['app'],_0x483191['attributes'],_0xbff8c8,_0x4f75b7);}}['_scriptMet'+'hod'](_0x2e8709,_0x281f9a,_0x228f62){try{_0x2e8709[_0x281f9a](_0x228f62);}catch(_0x368143){_0x2e8709['enabled']=!(-0x3*-0x3d5+0x3b*0x81+-0x2939),_0x2e8709['hasEvent']('error')||(console['warn']('unhandled\x20'+'exception\x20'+'while\x20call'+'ing\x20\x22'+_0x281f9a+'\x22\x20for\x20\x22'+_0x2e8709['__scriptTy'+'pe']['__name']+'\x22\x20script:\x20',_0x368143),console['error'](_0x368143)),_0x2e8709['fire']('error',_0x368143,_0x281f9a),this['fire']('error',_0x2e8709,_0x368143,_0x281f9a);}}['_onInitial'+'ize'](){const _0xd17616=this['_scripts'],_0xdb42b7=this['_beginLoop'+'ing']();for(let _0x1ef32e=0x19e4*-0x1+-0x1e35+0x3*0x12b3,_0x14505=_0xd17616['length'];_0x1ef32e<_0x14505;_0x1ef32e++){const _0xcb2973=_0xd17616[_0x1ef32e];!_0xcb2973['_initializ'+'ed']&&_0xcb2973['enabled']&&(_0xcb2973['_initializ'+'ed']=!(-0x360*0x9+-0x13eb+0x203*0x19),_0xcb2973['initialize']&&this['_scriptMet'+'hod'](_0xcb2973,uu));}this['_endLoopin'+'g'](_0xdb42b7);}['_onPostIni'+'tialize'](){this['onPostStat'+'eChange']();}['_onUpdate'](_0x47fec7){const _0x4d2e0c=this['_updateLis'+'t'];if(!_0x4d2e0c['length'])return;const _0xc7a172=this['_beginLoop'+'ing']();for(_0x4d2e0c['loopIndex']=0x4*-0x6f8+-0x7*-0x48d+0x1*-0x3fb;_0x4d2e0c['loopIndex']<_0x4d2e0c['length'];_0x4d2e0c['loopIndex']++){const _0x345ca4=_0x4d2e0c['items'][_0x4d2e0c['loopIndex']];_0x345ca4['enabled']&&this['_scriptMet'+'hod'](_0x345ca4,WO,_0x47fec7);}this['_endLoopin'+'g'](_0xc7a172);}['_onPostUpd'+'ate'](_0x185124){const _0x59e21c=this['_postUpdat'+'eList'];if(!_0x59e21c['length'])return;const _0x216361=this['_beginLoop'+'ing']();for(_0x59e21c['loopIndex']=0x652+-0x952+0x300;_0x59e21c['loopIndex']<_0x59e21c['length'];_0x59e21c['loopIndex']++){const _0x175390=_0x59e21c['items'][_0x59e21c['loopIndex']];_0x175390['enabled']&&this['_scriptMet'+'hod'](_0x175390,$O,_0x185124);}this['_endLoopin'+'g'](_0x216361);}['_insertScr'+'iptInstanc'+'e'](_0x3cc584,_0x5d7ad0,_0x3185ee){_0x5d7ad0===-(-0x3*-0x173+0x2*0xa4e+0x1*-0x18f4)?(this['_scripts']['push'](_0x3cc584),_0x3cc584['__executio'+'nOrder']=_0x3185ee,_0x3cc584['update']&&this['_updateLis'+'t']['append'](_0x3cc584),_0x3cc584['postUpdate']&&this['_postUpdat'+'eList']['append'](_0x3cc584)):(this['_scripts']['splice'](_0x5d7ad0,-0x14d+-0x248d+0x25da,_0x3cc584),_0x3cc584['__executio'+'nOrder']=_0x5d7ad0,this['_resetExec'+'utionOrder'](_0x5d7ad0+(0x1*-0x1c4c+0x67*0x48+-0x9*0x13),_0x3185ee+(0x17a5+0x59*0x61+-0xb79*0x5)),_0x3cc584['update']&&this['_updateLis'+'t']['insert'](_0x3cc584),_0x3cc584['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x3cc584));}['_removeScr'+'iptInstanc'+'e'](_0x816122){const _0x3e9a41=this['_scripts']['indexOf'](_0x816122);return _0x3e9a41===-(0x1*0x10c7+-0xb15+-0x5b1)||(this['_scripts']['splice'](_0x3e9a41,-0x1994+-0x7ac+-0x2141*-0x1),_0x816122['update']&&this['_updateLis'+'t']['remove'](_0x816122),_0x816122['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x816122)),_0x3e9a41;}['_resetExec'+'utionOrder'](_0x3edd7c,_0x26fc0e){for(let _0x31f853=_0x3edd7c;_0x31f853<_0x26fc0e;_0x31f853++)this['_scripts'][_0x31f853]['__executio'+'nOrder']=_0x31f853;}['_resolveEn'+'tityScript'+'Attribute'](_0x308f6d,_0x54bba7,_0xb53cd,_0x28da6c,_0x656b9,_0x58e9a9){if(_0x308f6d['array']){const _0x502ee1=_0xb53cd['length'];if(!_0x502ee1)return;const _0x5cd1e0=_0xb53cd['slice']();for(let _0x53e5bc=0x19a1+0x6a8+-0x3*0xac3;_0x53e5bc<_0x502ee1;_0x53e5bc++){const _0x507443=_0x5cd1e0[_0x53e5bc]instanceof lt?_0x5cd1e0[_0x53e5bc]['getGuid']():_0x5cd1e0[_0x53e5bc];_0x58e9a9[_0x507443]&&(_0x5cd1e0[_0x53e5bc]=_0x28da6c?_0x58e9a9[_0x507443]['getGuid']():_0x58e9a9[_0x507443]);}_0x656b9[_0x54bba7]=_0x5cd1e0;}else{if(_0xb53cd instanceof lt)_0xb53cd=_0xb53cd['getGuid']();else{if(typeof _0xb53cd!='string')return;}_0x58e9a9[_0xb53cd]&&(_0x656b9[_0x54bba7]=_0x58e9a9[_0xb53cd]);}}['has'](_0x41aaaa){if(typeof _0x41aaaa=='string')return!!this['_scriptsIn'+'dex'][_0x41aaaa];if(!_0x41aaaa)return!(-0x51a*0x5+0x15a1*0x1+-0x2*-0x1f1);const _0x22efca=_0x41aaaa,_0x5aab2c=_0x22efca['__name'],_0x187340=this['_scriptsIn'+'dex'][_0x5aab2c];return(_0x187340&&_0x187340['instance'])instanceof _0x22efca;}['get'](_0x3b14d7){if(typeof _0x3b14d7=='string'){const _0x26d0d8=this['_scriptsIn'+'dex'][_0x3b14d7];return _0x26d0d8?_0x26d0d8['instance']:null;}if(!_0x3b14d7)return null;const _0x4b1b72=_0x3b14d7,_0xe46ac6=_0x4b1b72['__name'],_0x18efab=this['_scriptsIn'+'dex'][_0xe46ac6],_0x122a3a=_0x18efab&&_0x18efab['instance'];return _0x122a3a instanceof _0x4b1b72?_0x122a3a:null;}['create'](_0xdd236a,_0x2675c4={}){const _0xf343e9=this;let _0x31abf7=_0xdd236a,_0x3efb9c=_0xdd236a;if(typeof _0x31abf7=='string')_0x31abf7=this['system']['app']['scripts']['get'](_0x31abf7);else{if(_0x31abf7){const _0x27c3ed=Nv(_0x31abf7),_0x2a1256=jO(_0x27c3ed);!(_0x31abf7['prototype']instanceof Lo)&&!_0x31abf7['scriptName']&&w['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x27c3ed+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x27c3ed+('.scriptNam'+'e\x20=\x20\x22')+_0x2a1256+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.')),_0x31abf7['__name']??(_0x31abf7['__name']=_0x31abf7['scriptName']??_0x2a1256),_0x3efb9c=_0x31abf7['__name'];}}if(_0x31abf7){if(!this['_scriptsIn'+'dex'][_0x3efb9c]||!this['_scriptsIn'+'dex'][_0x3efb9c]['instance']){const _0xe71671=new _0x31abf7({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x2675c4['hasOwnProp'+'erty']('enabled')?_0x2675c4['enabled']:!(0x1f8c+0x1*0x1f45+-0x3ed1),'attributes':_0x2675c4['attributes']||{}});_0x2675c4['properties']&&typeof _0x2675c4['properties']=='object'&&Object['assign'](_0xe71671,_0x2675c4['properties']),_0xe71671 instanceof Lo||this['_attribute'+'DataMap']['set'](_0x3efb9c,_0x2675c4['attributes']);const _0x15a218=this['_scripts']['length'];let _0x5c2cfa=-(0x1614+0x166d*0x1+-0x2c80);return typeof _0x2675c4['ind']=='number'&&_0x2675c4['ind']!==-(-0x22bb+0xbb*-0x21+0x3ad7)&&_0x15a218>_0x2675c4['ind']&&(_0x5c2cfa=_0x2675c4['ind']),this['_insertScr'+'iptInstanc'+'e'](_0xe71671,_0x5c2cfa,_0x15a218),this['_scriptsIn'+'dex'][_0x3efb9c]={'instance':_0xe71671,'onSwap':function(){_0xf343e9['swap'](_0x3efb9c);}},this[_0x3efb9c]=_0xe71671,_0x2675c4['preloading']||this['initialize'+'Attributes'](_0xe71671),this['fire']('create',_0x3efb9c,_0xe71671),this['fire']('create:'+_0x3efb9c,_0xe71671),this['system']['app']['scripts']['on']('swap:'+_0x3efb9c,this['_scriptsIn'+'dex'][_0x3efb9c]['onSwap']),_0x2675c4['preloading']||(_0xe71671['enabled']&&!_0xe71671['_initializ'+'ed']&&(_0xe71671['_initializ'+'ed']=!(-0x1ee2+0x7*0x556+-0x678),_0xe71671['initialize']&&this['_scriptMet'+'hod'](_0xe71671,uu)),_0xe71671['enabled']&&!_0xe71671['_postIniti'+'alized']&&(_0xe71671['_postIniti'+'alized']=!(0xd97*-0x2+-0x4*0x765+0x38c2),_0xe71671['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0xe71671,pu))),_0xe71671;}w['warn']('script\x20\x27'+_0x3efb9c+('\x27\x20is\x20alrea'+'dy\x20added\x20t'+'o\x20entity\x20\x27')+this['entity']['name']+'\x27');}else this['_scriptsIn'+'dex'][_0x3efb9c]={'awaiting':!(-0x23c0+0x1b*-0x6b+0x2f09),'ind':this['_scripts']['length']},w['warn']('script\x20\x27'+_0x3efb9c+('\x27\x20is\x20not\x20f'+'ound,\x20awai'+'ting\x20it\x20to'+'\x20be\x20added\x20'+'to\x20registr'+'y'));return null;}['destroy'](_0x3546b4){let _0x247620=_0x3546b4,_0x4a0672=_0x3546b4;typeof _0x4a0672=='string'?_0x4a0672=this['system']['app']['scripts']['get'](_0x4a0672):_0x4a0672&&(_0x247620=_0x4a0672['__name']);const _0xdfbaea=this['_scriptsIn'+'dex'][_0x247620];if(delete this['_scriptsIn'+'dex'][_0x247620],!_0xdfbaea)return!(0x211+0xd8b*0x1+-0xf9b);this['_attribute'+'DataMap']['delete'](_0x247620);const _0x3d125e=_0xdfbaea['instance'];if(_0x3d125e&&!_0x3d125e['_destroyed']){if(_0x3d125e['enabled']=!(-0x7*-0x7f+0xb3*0x13+-0x10c1*0x1),_0x3d125e['_destroyed']=!(-0x9fd+0xbe0+-0x1e3),this['_isLooping'+'ThroughScr'+'ipts'])this['_destroyed'+'Scripts']['push'](_0x3d125e);else{const _0x19225a=this['_removeScr'+'iptInstanc'+'e'](_0x3d125e);_0x19225a>=0x1efe+-0x397*-0x2+-0x4*0x98b&&this['_resetExec'+'utionOrder'](_0x19225a,this['_scripts']['length']);}}return this['system']['app']['scripts']['off']('swap:'+_0x247620,_0xdfbaea['onSwap']),delete this[_0x247620],this['fire']('destroy',_0x247620,_0x3d125e||null),this['fire']('destroy:'+_0x247620,_0x3d125e||null),_0x3d125e&&_0x3d125e['fire']('destroy'),!(-0x1*0x1d82+0x15*-0x19a+0x3f24);}['swap'](_0x2d655c){let _0x445a2=_0x2d655c,_0x2d8bcd=_0x2d655c;typeof _0x2d8bcd=='string'?_0x2d8bcd=this['system']['app']['scripts']['get'](_0x2d8bcd):_0x2d8bcd&&(_0x445a2=_0x2d8bcd['__name']);const _0x52e33d=this['_scriptsIn'+'dex'][_0x445a2];if(!_0x52e33d||!_0x52e33d['instance'])return!(-0x2216+-0x6ff+0x2916);const _0x589c3a=_0x52e33d['instance'],_0x3fb8cd=this['_scripts']['indexOf'](_0x589c3a),_0x4c6cd7=new _0x2d8bcd({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x589c3a['enabled'],'attributes':_0x589c3a['__attribut'+'es']});return _0x4c6cd7['swap']?(this['initialize'+'Attributes'](_0x4c6cd7),this['_scripts'][_0x3fb8cd]=_0x4c6cd7,this['_scriptsIn'+'dex'][_0x445a2]['instance']=_0x4c6cd7,this[_0x445a2]=_0x4c6cd7,_0x4c6cd7['__executio'+'nOrder']=_0x3fb8cd,_0x589c3a['update']&&this['_updateLis'+'t']['remove'](_0x589c3a),_0x589c3a['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x589c3a),_0x4c6cd7['update']&&this['_updateLis'+'t']['insert'](_0x4c6cd7),_0x4c6cd7['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x4c6cd7),this['_scriptMet'+'hod'](_0x4c6cd7,XO,_0x589c3a),this['fire']('swap',_0x445a2,_0x4c6cd7),this['fire']('swap:'+_0x445a2,_0x4c6cd7),!(-0x880+0x2027+-0x17a7)):!(-0xd*0x152+-0xcb3*0x1+0x1dde*0x1);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x2550b6,_0x42be8e){var _0x38efe8,_0x5a9639,_0x455f5e;const _0x538b26=this['entity']['script'];for(const _0x4329c1 in _0x2550b6['_scriptsIn'+'dex']){const _0x53ed0a=this['system']['app']['scripts']['get'](_0x4329c1);if(!_0x53ed0a)continue;const _0x1235b8=_0x2550b6['_scriptsIn'+'dex'][_0x4329c1];if(!_0x1235b8||!_0x1235b8['instance'])continue;const _0x2ada9d=_0x538b26[_0x4329c1]['__attribut'+'esRaw']??_0x538b26['_attribute'+'DataMap']['get'](_0x4329c1),_0x459e4c=_0x538b26[_0x4329c1]['__attribut'+'es'];if(!_0x2ada9d&&!_0x459e4c)continue;const _0x2f95b2=!!_0x2ada9d,_0x3ad406=_0x1235b8['instance']['__attribut'+'es']??_0x538b26['_attribute'+'DataMap']['get'](_0x4329c1);for(const _0x3621d3 in _0x3ad406){if(!_0x3ad406[_0x3621d3])continue;const _0x4299d0=((_0x38efe8=_0x53ed0a['attributes'])==null?void(0x11ac+-0x18e0+0x2*0x39a):_0x38efe8['get'](_0x3621d3))??((_0x455f5e=(_0x5a9639=this['system']['app']['scripts']['getSchema'](_0x4329c1))==null?void(-0x2497+0xd8b+-0x19*-0xec):_0x5a9639['attributes'])==null?void(0x1*-0x22c9+0x602+0x1cc7):_0x455f5e[_0x3621d3]);if(_0x4299d0){if(_0x4299d0['type']==='entity')this['_resolveEn'+'tityScript'+'Attribute'](_0x4299d0,_0x3621d3,_0x3ad406[_0x3621d3],_0x2f95b2,_0x2ada9d||_0x459e4c,_0x42be8e);else{if(_0x4299d0['type']==='json'&&Array['isArray'](_0x4299d0['schema'])){const _0x237abf=_0x3ad406[_0x3621d3],_0x5d682d=_0x2ada9d?_0x2ada9d[_0x3621d3]:_0x459e4c[_0x3621d3];for(let _0xeac486=-0x1683+0x24e7+-0xe64;_0xeac486<_0x4299d0['schema']['length'];_0xeac486++){const _0x3a2c61=_0x4299d0['schema'][_0xeac486];if(_0x3a2c61['type']==='entity'){if(_0x4299d0['array']){for(let _0x248ba9=-0x92*0x26+-0x1420+-0x2*-0x14e6;_0x248ba9<_0x237abf['length'];_0x248ba9++)this['_resolveEn'+'tityScript'+'Attribute'](_0x3a2c61,_0x3a2c61['name'],_0x237abf[_0x248ba9][_0x3a2c61['name']],_0x2f95b2,_0x5d682d[_0x248ba9],_0x42be8e);}else this['_resolveEn'+'tityScript'+'Attribute'](_0x3a2c61,_0x3a2c61['name'],_0x237abf[_0x3a2c61['name']],_0x2f95b2,_0x5d682d,_0x42be8e);}}}}}}}}['move'](_0x385d10,_0x5b0bd9){const _0x223100=this['_scripts']['length'];if(_0x5b0bd9>=_0x223100||_0x5b0bd9<0x196e+0x200d+-0x397b)return!(0x2617+0xefc+0x3512*-0x1);let _0x29efc1=_0x385d10,_0x1558f0=_0x385d10;typeof _0x1558f0!='string'?_0x1558f0=_0x385d10['__name']:_0x29efc1=null;const _0x4b9a91=this['_scriptsIn'+'dex'][_0x1558f0];if(!_0x4b9a91||!_0x4b9a91['instance'])return!(-0xcb4+-0x9*-0x21a+-0x1*0x635);const _0x80513b=_0x4b9a91['instance'];if(_0x29efc1&&!(_0x80513b instanceof _0x29efc1))return!(-0x1*0x1472+0xa46*0x2+-0x19);const _0x5c818b=this['_scripts']['indexOf'](_0x80513b);return _0x5c818b===-(0xbac+0xa60+-0xab*0x21)||_0x5c818b===_0x5b0bd9?!(0x136a+-0xc5*0x5+-0x30*0x53):(this['_scripts']['splice'](_0x5b0bd9,0x22f8+-0x284+-0x2*0x103a,this['_scripts']['splice'](_0x5c818b,0x17bf+0x1414+0x15e9*-0x2)[-0x1033+0x2406*0x1+-0x13d3]),this['_resetExec'+'utionOrder'](0xada+-0x21*-0x47+-0x1401,_0x223100),this['_updateLis'+'t']['sort'](),this['_postUpdat'+'eList']['sort'](),this['fire']('move',_0x1558f0,_0x80513b,_0x5b0bd9,_0x5c818b),this['fire']('move:'+_0x1558f0,_0x80513b,_0x5b0bd9,_0x5c818b),!(0x2*0x10af+-0x1096+-0x10c8));}}h(Ii,'EVENT_CREA'+'TE','create'),h(Ii,'EVENT_DEST'+'ROY','destroy'),h(Ii,'EVENT_ENAB'+'LE','enable'),h(Ii,'EVENT_DISA'+'BLE','disable'),h(Ii,'EVENT_REMO'+'VE','remove'),h(Ii,'EVENT_STAT'+'E','state'),h(Ii,'EVENT_MOVE','move'),h(Ii,'EVENT_ERRO'+'R','error');class YO{constructor(){this['enabled']=!(-0x2230+0x3db+0x1*0x1e55);}}const KO='_onInitial'+'izeAttribu'+'tes',ZO='_onInitial'+'ize',QO='_onPostIni'+'tialize',JO='_onUpdate',eF='_onPostUpd'+'ate';let mc=-0x618+0x90b+-0x97*0x5;class tF extends ct{constructor(_0x1211b2){super(_0x1211b2),this['id']='script',this['ComponentT'+'ype']=Ii,this['DataType']=YO,this['_component'+'s']=new Bc({'sortBy':'_execution'+'Order'}),this['_enabledCo'+'mponents']=new Bc({'sortBy':'_execution'+'Order'}),this['preloading']=!(-0x1ff4+0x4f*-0x6c+0x2*0x20a4),this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this),this['app']['systems']['on']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['on']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x631685,_0x438e95){if(_0x631685['_execution'+'Order']=mc++,this['_component'+'s']['append'](_0x631685),mc>Number['MAX_SAFE_I'+'NTEGER']&&this['_resetExec'+'utionOrder'](),_0x631685['enabled']=_0x438e95['hasOwnProp'+'erty']('enabled')?!!_0x438e95['enabled']:!(-0x20c3+-0x1*0x1223+0x32e6),_0x631685['enabled']&&_0x631685['entity']['enabled']&&this['_enabledCo'+'mponents']['append'](_0x631685),_0x438e95['hasOwnProp'+'erty']('order')&&_0x438e95['hasOwnProp'+'erty']('scripts')){_0x631685['_scriptsDa'+'ta']=_0x438e95['scripts'];for(let _0x44a04a=0x163*0x19+-0x5b*-0x5d+-0x43ba;_0x44a04a<_0x438e95['order']['length'];_0x44a04a++)_0x631685['create'](_0x438e95['order'][_0x44a04a],{'enabled':_0x438e95['scripts'][_0x438e95['order'][_0x44a04a]]['enabled'],'attributes':_0x438e95['scripts'][_0x438e95['order'][_0x44a04a]]['attributes'],'preloading':this['preloading']});}}['cloneCompo'+'nent'](_0x5d379f,_0x191aa9){var _0x237b17;const _0x4100ec=[],_0x531354={};for(let _0x1297a0=0x1804+-0x782*0x3+0x17e*-0x1;_0x1297a0<_0x5d379f['script']['_scripts']['length'];_0x1297a0++){const _0x3fba86=_0x5d379f['script']['_scripts'][_0x1297a0],_0x14b8cd=_0x3fba86['__scriptTy'+'pe']['__name'];_0x4100ec['push'](_0x14b8cd);const _0x5dfd45=((_0x237b17=_0x5d379f['script']['_attribute'+'DataMap'])==null?void(-0xe*0x1e2+-0x1e6e+0x38ca):_0x237b17['get'](_0x14b8cd))||{};for(const _0x5d9426 in _0x3fba86['__attribut'+'es'])_0x5dfd45[_0x5d9426]=_0x3fba86['__attribut'+'es'][_0x5d9426];_0x531354[_0x14b8cd]={'enabled':_0x3fba86['_enabled'],'attributes':_0x5dfd45};}for(const _0x1312a4 in _0x5d379f['script']['_scriptsIn'+'dex'])_0x1312a4['awaiting']&&_0x4100ec['splice'](_0x1312a4['ind'],-0x102d+0x1765+-0x7*0x108,_0x1312a4);const _0x5ace3f={'enabled':_0x5d379f['script']['enabled'],'order':_0x4100ec,'scripts':_0x531354};return this['addCompone'+'nt'](_0x191aa9,_0x5ace3f);}['_resetExec'+'utionOrder'](){mc=0x10e8+0x59*-0x25+0xcf*-0x5;for(let _0x7b9218=-0x1d80+0x3d3*0x1+0x19ad,_0x386913=this['_component'+'s']['length'];_0x7b9218<_0x386913;_0x7b9218++)this['_component'+'s']['items'][_0x7b9218]['_execution'+'Order']=mc++;}['_callCompo'+'nentMethod'](_0x2ccca5,_0xd761b2,_0x582241){for(_0x2ccca5['loopIndex']=-0x1*-0x127f+-0xa2d+-0x852;_0x2ccca5['loopIndex']<_0x2ccca5['length'];_0x2ccca5['loopIndex']++)_0x2ccca5['items'][_0x2ccca5['loopIndex']][_0xd761b2](_0x582241);}['_onInitial'+'ize'](){this['preloading']=!(-0x2642+-0x1460+0x3aa3),this['_callCompo'+'nentMethod'](this['_component'+'s'],KO),this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],ZO);}['_onPostIni'+'tialize'](){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],QO);}['_onUpdate'](_0x5b7169){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],JO,_0x5b7169);}['_onPostUpd'+'ate'](_0x2d8c66){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],eF,_0x2d8c66);}['_addCompon'+'entToEnabl'+'ed'](_0x4d7185){this['_enabledCo'+'mponents']['insert'](_0x4d7185);}['_removeCom'+'ponentFrom'+'Enabled'](_0xbaaebc){this['_enabledCo'+'mponents']['remove'](_0xbaaebc);}['_onBeforeR'+'emove'](_0x44906f,_0x4e1bfa){this['_component'+'s']['items']['indexOf'](_0x4e1bfa)>=-0x13*-0x167+-0xda4+0x1*-0xd01&&_0x4e1bfa['_onBeforeR'+'emove'](),this['_removeCom'+'ponentFrom'+'Enabled'](_0x4e1bfa),this['_component'+'s']['remove'](_0x4e1bfa);}['destroy'](){super['destroy'](),this['app']['systems']['off']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['off']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}class kv extends we{constructor(_0x195bdd,_0x1b7170){super(_0x195bdd,_0x1b7170),h(this,'_layers',[Ji]),h(this,'_instance',null),h(this,'_materialT'+'mp',null),h(this,'_highQuali'+'tySH',!(-0x19e7+0x1*0x25cd+-0xbe6)),h(this,'_customAab'+'b',null),h(this,'_assetRefe'+'rence'),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_castShado'+'ws',!(0x1*-0x1a71+0x2*-0x137b+0x4168)),(this['_assetRefe'+'rence']=new rl('asset',this,_0x195bdd['app']['assets'],{'add':this['_onGSplatA'+'ssetAdded'],'load':this['_onGSplatA'+'ssetLoad'],'remove':this['_onGSplatA'+'ssetRemove'],'unload':this['_onGSplatA'+'ssetUnload']},this),_0x1b7170['on']('remove',this['onRemoveCh'+'ild'],this),_0x1b7170['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x1b7170['on']('insert',this['onInsertCh'+'ild'],this),_0x1b7170['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['customAabb'](_0x5e6d14){var _0x218aac,_0x2ca009;this['_customAab'+'b']=_0x5e6d14,(_0x2ca009=(_0x218aac=this['_instance'])==null?void(-0x15cf+0x6d*0x43+-0x6b8):_0x218aac['meshInstan'+'ce'])==null||_0x2ca009['setCustomA'+'abb'](this['_customAab'+'b']);}get['customAabb'](){return this['_customAab'+'b'];}set['instance'](_0x17c945){if(this['destroyIns'+'tance'](),this['_instance']=_0x17c945,this['_instance']){const _0x5d0396=this['_instance']['meshInstan'+'ce'];_0x5d0396['node']||(_0x5d0396['node']=this['entity']),_0x5d0396['castShadow']=this['_castShado'+'ws'],_0x5d0396['setCustomA'+'abb'](this['_customAab'+'b']),this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['instance'](){return this['_instance'];}set['material'](_0x5a707c){this['_instance']?this['_instance']['material']=_0x5a707c:this['_materialT'+'mp']=_0x5a707c;}get['material'](){var _0x297c43;return((_0x297c43=this['_instance'])==null?void(0x1*-0x1b31+-0x189d*0x1+0x33ce):_0x297c43['material'])??this['_materialT'+'mp']??null;}set['highQualit'+'ySH'](_0x819790){_0x819790!==this['_highQuali'+'tySH']&&(this['_highQuali'+'tySH']=_0x819790,this['_instance']&&this['_instance']['setHighQua'+'litySH'](_0x819790));}get['highQualit'+'ySH'](){return this['_highQuali'+'tySH'];}set['castShadow'+'s'](_0x337072){var _0x2b4a95;if(this['_castShado'+'ws']!==_0x337072){const _0x376ddd=(_0x2b4a95=this['instance'])==null?void(-0x1f95+0x1197+0xdfe):_0x2b4a95['meshInstan'+'ce'];if(_0x376ddd){const _0x17f71e=this['layers'],_0x4b2e6a=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x337072)for(let _0x288a57=-0x7*0x181+-0x2085+0x2b0c;_0x288a57<_0x17f71e['length'];_0x288a57++){const _0x1fc47e=_0x4b2e6a['layers']['getLayerBy'+'Id'](this['layers'][_0x288a57]);_0x1fc47e&&_0x1fc47e['removeShad'+'owCasters']([_0x376ddd]);}if(_0x376ddd['castShadow']=_0x337072,!this['_castShado'+'ws']&&_0x337072)for(let _0x143069=0xad*0xb+0x3*0xbd+-0x9a6;_0x143069<_0x17f71e['length'];_0x143069++){const _0xbe608e=_0x4b2e6a['layers']['getLayerBy'+'Id'](_0x17f71e[_0x143069]);_0xbe608e&&_0xbe608e['addShadowC'+'asters']([_0x376ddd]);}}this['_castShado'+'ws']=_0x337072;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['layers'](_0x53e61c){this['removeFrom'+'Layers'](),this['_layers']['length']=-0x2*-0x2c2+0x176*0xc+-0x170c;for(let _0x2052e0=0x5a1+-0x1*0x1695+0xe*0x136;_0x2052e0<_0x53e61c['length'];_0x2052e0++)this['_layers'][_0x2052e0]=_0x53e61c[_0x2052e0];!this['enabled']||!this['entity']['enabled']||this['addToLayer'+'s']();}get['layers'](){return this['_layers'];}set['asset'](_0x220d80){const _0x4c5e62=_0x220d80 instanceof pe?_0x220d80['id']:_0x220d80;this['_assetRefe'+'rence']['id']!==_0x4c5e62&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onGSplatA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x4c5e62,this['_assetRefe'+'rence']['asset']&&this['_onGSplatA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['destroyIns'+'tance'](){var _0xd49cf9;this['_instance']&&(this['removeFrom'+'Layers'](),(_0xd49cf9=this['_instance'])==null||_0xd49cf9['destroy'](),this['_instance']=null);}['addToLayer'+'s'](){var _0x23737c,_0xcb79;const _0x5e065e=(_0x23737c=this['instance'])==null?void(-0x31c+0x1261+0x1*-0xf45):_0x23737c['meshInstan'+'ce'];if(_0x5e065e){const _0x10ec28=this['system']['app']['scene']['layers'];for(let _0x2153a0=0x183+-0x1*0x2411+0x228e;_0x2153a0<this['_layers']['length'];_0x2153a0++)(_0xcb79=_0x10ec28['getLayerBy'+'Id'](this['_layers'][_0x2153a0]))==null||_0xcb79['addMeshIns'+'tances']([_0x5e065e]);}}['removeFrom'+'Layers'](){var _0x4494ce,_0x1da95c;const _0x3dd8ce=(_0x4494ce=this['instance'])==null?void(-0x2569+-0x1*-0x24a2+0xc7):_0x4494ce['meshInstan'+'ce'];if(_0x3dd8ce){const _0x4e38c4=this['system']['app']['scene']['layers'];for(let _0x450af6=0xa7f*-0x1+-0x1*0xa45+0x14c4;_0x450af6<this['_layers']['length'];_0x450af6++)(_0x1da95c=_0x4e38c4['getLayerBy'+'Id'](this['_layers'][_0x450af6]))==null||_0x1da95c['removeMesh'+'Instances']([_0x3dd8ce]);}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_instance']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyIns'+'tance'](),this['asset']=null,this['_assetRefe'+'rence']['id']=null,this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x386a18,_0x62aed0){this['addToLayer'+'s'](),_0x386a18['off']('add',this['onLayerAdd'+'ed'],this),_0x386a18['off']('remove',this['onLayerRem'+'oved'],this),_0x62aed0['on']('add',this['onLayerAdd'+'ed'],this),_0x62aed0['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x475fc4){this['layers']['indexOf'](_0x475fc4['id'])<0x2c4*-0xd+-0x21d+0x2611||this['_instance']&&_0x475fc4['addMeshIns'+'tances'](this['_instance']['meshInstan'+'ce']);}['onLayerRem'+'oved'](_0x4c41e6){this['layers']['indexOf'](_0x4c41e6['id'])<0x267d+-0xcab*0x1+0x2*-0xce9||this['_instance']&&_0x4c41e6['removeMesh'+'Instances'](this['_instance']['meshInstan'+'ce']);}['onEnable'](){const _0x9be69f=this['system']['app']['scene'],_0x1539ab=_0x9be69f['layers'];this['_evtLayers'+'Changed']=_0x9be69f['on']('set:layers',this['onLayersCh'+'anged'],this),_0x1539ab&&(this['_evtLayerA'+'dded']=_0x1539ab['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x1539ab['on']('remove',this['onLayerRem'+'oved'],this)),this['_instance']?this['addToLayer'+'s']():this['asset']&&this['_onGSplatA'+'ssetAdded']();}['onDisable'](){var _0x16c206,_0x2a60de,_0x1256fa;const _0xfef673=this['system']['app']['scene']['layers'];(_0x16c206=this['_evtLayers'+'Changed'])==null||_0x16c206['off'](),this['_evtLayers'+'Changed']=null,_0xfef673&&((_0x2a60de=this['_evtLayerA'+'dded'])==null||_0x2a60de['off'](),this['_evtLayerA'+'dded']=null,(_0x1256fa=this['_evtLayerR'+'emoved'])==null||_0x1256fa['off'](),this['_evtLayerR'+'emoved']=null),this['removeFrom'+'Layers']();}['hide'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(-0x2*0x829+0xa3c+0x617));}['show'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(-0x12*-0x6+-0xef*-0x29+-0x26b3));}['_onGSplatA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onGSplatA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onGSplatA'+'ssetLoad'](){this['destroyIns'+'tance']();const _0x8ae8fe=this['_assetRefe'+'rence']['asset'];_0x8ae8fe&&(this['instance']=_0x8ae8fe['resource']['createInst'+'ance'](_0x8ae8fe['resource'],{'material':this['_materialT'+'mp'],'highQualitySH':this['_highQuali'+'tySH']}),this['_materialT'+'mp']=null,this['customAabb']=this['instance']['resource']['aabb']['clone']());}['_onGSplatA'+'ssetUnload'](){this['destroyIns'+'tance']();}['_onGSplatA'+'ssetRemove'](){this['_onGSplatA'+'ssetUnload']();}}class sF{constructor(){this['enabled']=!(-0x5a5+0x6*-0xc2+-0x1*-0xa31);}}const mu=['enabled'],mo=['castShadow'+'s','material','highQualit'+'ySH','asset','layers'];class iF extends ct{constructor(_0x1d7976){super(_0x1d7976),this['id']='gsplat',this['ComponentT'+'ype']=kv,this['DataType']=sF,this['schema']=mu,this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x59ca54,_0x9c25cb,_0x252feb){_0x9c25cb['layers']&&_0x9c25cb['layers']['length']&&(_0x9c25cb['layers']=_0x9c25cb['layers']['slice'](-0x23a8+-0x1498+0x12*0x320));for(let _0x4428e6=-0x8*0x284+-0x25ec+0x3a0c;_0x4428e6<mo['length'];_0x4428e6++)_0x9c25cb['hasOwnProp'+'erty'](mo[_0x4428e6])&&(_0x59ca54[mo[_0x4428e6]]=_0x9c25cb[mo[_0x4428e6]]);_0x9c25cb['aabbCenter']&&_0x9c25cb['aabbHalfEx'+'tents']&&(_0x59ca54['customAabb']=new De(new D(_0x9c25cb['aabbCenter']),new D(_0x9c25cb['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x59ca54,_0x9c25cb,mu);}['cloneCompo'+'nent'](_0x191088,_0x501958){const _0x55262f=_0x191088['gsplat'],_0xb79638={};mo['forEach'](_0x52db1d=>{_0x52db1d==='material'?_0xb79638[_0x52db1d]=_0x55262f[_0x52db1d]['clone']():_0xb79638[_0x52db1d]=_0x55262f[_0x52db1d];}),_0xb79638['enabled']=_0x55262f['enabled'];const _0x453083=this['addCompone'+'nt'](_0x501958,_0xb79638);return _0x55262f['customAabb']&&(_0x453083['customAabb']=_0x55262f['customAabb']['clone']()),_0x453083;}['onRemove'](_0x37dc5c,_0x732abf){_0x732abf['onRemove']();}}we['_buildAcce'+'ssors'](kv['prototype'],mu);class Zp extends me{constructor(){super(...arguments),h(this,'_meshes',null);}set['meshes'](_0x578434){this['decRefMesh'+'es'](),this['_meshes']=_0x578434,this['incRefMesh'+'es'](),this['fire']('set:meshes',_0x578434);}get['meshes'](){return this['_meshes'];}['destroy'](){this['meshes']=null;}['decRefMesh'+'es'](){var _0x9fa93;(_0x9fa93=this['_meshes'])==null||_0x9fa93['forEach']((_0x430947,_0x40438b)=>{_0x430947&&(_0x430947['decRefCoun'+'t'](),_0x430947['refCount']<0x24*0x3e+-0x3*-0x6c9+-0x1d12&&(_0x430947['destroy'](),this['_meshes'][_0x40438b]=null));});}['incRefMesh'+'es'](){var _0x3b1daa;(_0x3b1daa=this['_meshes'])==null||_0x3b1daa['forEach'](_0x206df3=>{_0x206df3==null||_0x206df3['incRefCoun'+'t']();});}}h(Zp,'EVENT_SETM'+'ESHES','set:meshes');function Oc(_0x5614c2){const _0x3f003e=this;if(!_0x3f003e['resource'])return;const _0x6e9d53=_0x5614c2['resource'],_0x51421f=_0x6e9d53['renders']&&_0x6e9d53['renders'][_0x3f003e['data']['renderInde'+'x']];_0x51421f&&(_0x3f003e['resource']['meshes']=_0x51421f['resource']['meshes']);}function Bg(_0x1c4f8c){const _0x2690c9=this;_0x2690c9['registry']['off']('load:'+_0x1c4f8c['id'],Oc,_0x2690c9),_0x2690c9['registry']['on']('load:'+_0x1c4f8c['id'],Oc,_0x2690c9),_0x2690c9['registry']['off']('remove:'+_0x1c4f8c['id'],zg,_0x2690c9),_0x2690c9['registry']['once']('remove:'+_0x1c4f8c['id'],zg,_0x2690c9),_0x1c4f8c['resource']?Oc['call'](_0x2690c9,_0x1c4f8c):_0x2690c9['registry']['load'](_0x1c4f8c);}function zg(_0x5eee23){const _0x57f2eb=this;_0x57f2eb['registry']['off']('load:'+_0x5eee23['id'],Oc,_0x57f2eb),_0x57f2eb['resource']&&_0x57f2eb['resource']['destroy']();}class rF extends Qe{constructor(_0x29a6ef){super(_0x29a6ef,'render'),this['_registry']=_0x29a6ef['assets'];}['open'](_0x3e986d,_0x1e3b64){return new Zp();}['patch'](_0x175fa3,_0x15f7c4){if(!_0x175fa3['data']['containerA'+'sset'])return;const _0x3f788d=_0x15f7c4['get'](_0x175fa3['data']['containerA'+'sset']);if(!_0x3f788d){_0x15f7c4['once']('add:'+_0x175fa3['data']['containerA'+'sset'],Bg,_0x175fa3);return;}Bg['call'](_0x175fa3,_0x3f788d);}}class Uv{constructor(_0x3e1081,_0x4205d8,_0x50d4ad,_0x3af73d){this['_paths']=_0x3e1081,this['_input']=_0x4205d8,this['_output']=_0x50d4ad,this['_interpola'+'tion']=_0x3af73d;}get['paths'](){return this['_paths'];}get['input'](){return this['_input'];}get['output'](){return this['_output'];}get['interpolat'+'ion'](){return this['_interpola'+'tion'];}}class uh{constructor(_0x3ff829,_0xd770f3){this['_component'+'s']=_0x3ff829,this['_data']=_0xd770f3;}get['components'](){return this['_component'+'s'];}get['data'](){return this['_data'];}}function aF(_0x2a07fc,_0x1c1789){let _0x583ad1;const _0x3ac388=(_0xed084f,_0x4481e2)=>{switch(_0x4481e2){case _0x583ad1['DT_INT8']:return new Int8Array(_0xed084f['buffer'],_0xed084f['byteOffset'],_0xed084f['byteLength']);case _0x583ad1['DT_INT16']:return new Int16Array(_0xed084f['buffer'],_0xed084f['byteOffset'],_0xed084f['byteLength']/(0xaf+0x2133+-0x21e0));case _0x583ad1['DT_INT32']:return new Int32Array(_0xed084f['buffer'],_0xed084f['byteOffset'],_0xed084f['byteLength']/(0xdd7+-0x12f*-0x20+-0x33b3));case _0x583ad1['DT_UINT8']:return new Uint8Array(_0xed084f['buffer'],_0xed084f['byteOffset'],_0xed084f['byteLength']);case _0x583ad1['DT_UINT16']:return new Uint16Array(_0xed084f['buffer'],_0xed084f['byteOffset'],_0xed084f['byteLength']/(0x6*-0x335+0x2*0xc51+0x35*-0x1a));case _0x583ad1['DT_UINT32']:return new Uint32Array(_0xed084f['buffer'],_0xed084f['byteOffset'],_0xed084f['byteLength']/(0xe3*0xd+0x1bbd+0x40*-0x9d));case _0x583ad1['DT_FLOAT32']:return new Float32Array(_0xed084f['buffer'],_0xed084f['byteOffset'],_0xed084f['byteLength']/(0x20b0+-0x14f8+-0xbb4));}return null;},_0x3a5e77=_0x39d270=>{switch(_0x39d270){case _0x583ad1['DT_INT8']:return 0x142b+0x1f*0x2b+-0x3*0x875;case _0x583ad1['DT_INT16']:return 0x17b5+0x1cfb+-0x34ae*0x1;case _0x583ad1['DT_INT32']:return-0x1053+0x347*0x5+-0x1*0xc;case _0x583ad1['DT_UINT8']:return-0x8bc*0x1+0x8fd+-0x40;case _0x583ad1['DT_UINT16']:return-0x995*-0x2+-0x14d*-0x15+0x2e79*-0x1;case _0x583ad1['DT_UINT32']:return 0x24*-0xc7+0x1bd9+0x27;case _0x583ad1['DT_FLOAT32']:return 0xac*0x38+0x2045*-0x1+-0x557;}return 0xf0b*0x1+0x128e+-0x2198;},_0x1bdf90=_0x45c0f4=>_0x45c0f4['num_compon'+'ents']()*_0x3a5e77(_0x45c0f4['data_type']()),_0x198df1={0x0:0x0,0x1:0x1,0x5:0x2,0x2:0x3,0x7:0x4,0x8:0x5,0x4:0x6,0x3:0x7},_0x223c62=(_0x432828,_0x27ca17)=>{const _0x427a2a=(_0x120579,_0x3407b7,_0x1ef25d)=>{_0x120579[0x24ef+0x18d5+0x1*-0x3dc4]=_0x3407b7[0x1647+-0xe08+-0x83f]-_0x1ef25d[-0x26a6+-0x1035+0x1c5*0x1f],_0x120579[-0x1*-0xb66+-0x3*-0x426+-0x17d7*0x1]=_0x3407b7[0x251e*-0x1+-0x1e8e+0x1*0x43ad]-_0x1ef25d[-0xf92+0x25ee+-0x61*0x3b],_0x120579[-0x1f90+0x1*-0x22bd+0x424f]=_0x3407b7[-0x4*-0x51d+-0xa1*-0x28+-0x2d9a]-_0x1ef25d[0x1875+-0x9*-0x3be+-0x1*0x3a21];},_0xef072d=(_0x50e39c,_0x4a3bfb,_0x471ba6)=>{_0x50e39c[-0xde5+0x9*-0x12+0xe87]=_0x4a3bfb[0x1c4f+-0x215e+0x510]*_0x471ba6[-0x1684+0x2*-0x7f+0x1784]-_0x471ba6[0x1fa9*-0x1+-0x2555+0x11*0x40f]*_0x4a3bfb[-0xd*-0x7d+-0xbd+-0x2*0x2cd],_0x50e39c[-0x45a*-0x7+0x1073*-0x2+0x271]=_0x4a3bfb[-0xb*-0x295+0x1*0x1742+0x7*-0x761]*_0x471ba6[-0x92+-0x349+0x3db]-_0x471ba6[-0x2*0x106a+0x1a4+0x1f32]*_0x4a3bfb[0x201f+-0xf5c+-0x10c3],_0x50e39c[-0x1*-0x1382+-0x987+0x45*-0x25]=_0x4a3bfb[-0x2527+0x397+0x18*0x166]*_0x471ba6[0x21*-0x90+0x1dce+-0xb3d*0x1]-_0x471ba6[-0x14*-0x16d+-0x1705+-0x57f]*_0x4a3bfb[-0xbdd+-0x13*0xb6+0x1960];},_0x1de701=(_0x50bd16,_0x23bdea)=>{const _0x1511ba=_0x50bd16[_0x23bdea+(0x229d+0x20b1*0x1+0x1*-0x434e)],_0x3029ee=_0x50bd16[_0x23bdea+(-0x1bb3+0x1b*0x47+0x1437)],_0x14196a=_0x50bd16[_0x23bdea+(-0x1056+0x24e7*0x1+-0x148f)],_0x552fe1=(0x1501*0x1+-0x19ae+-0x4ae*-0x1)/Math['sqrt'](_0x1511ba*_0x1511ba+_0x3029ee*_0x3029ee+_0x14196a*_0x14196a);_0x50bd16[_0x23bdea+(0x79*0x3+0x1b23+0xaa*-0x2b)]*=_0x552fe1,_0x50bd16[_0x23bdea+(-0x22e1*-0x1+0xa8c+-0x2d6c)]*=_0x552fe1,_0x50bd16[_0x23bdea+(-0x2f0+0x13*0x176+0x4*-0x634)]*=_0x552fe1;},_0x7fbcbe=(_0x3eec1e,_0x1a6c70,_0xd7b660)=>{for(let _0x4a1f34=0x211d+-0x1557*-0x1+-0x3674;_0x4a1f34<0x1e12+-0x1951+-0x4be;++_0x4a1f34)_0x3eec1e[_0x4a1f34]=_0x1a6c70[_0xd7b660+_0x4a1f34];},_0x4a6053=_0x27ca17['length']/(-0xe36+0x4ed+0x94c),_0x7ca4b9=_0x432828['length']/(-0x1923+0x146*0x1+-0x2*-0xbf0),_0x147a3b=new Float32Array(_0x432828['length']),_0x3caf78=[-0x8b1+-0x9*-0x31f+-0x1366,-0x1*-0x23ef+-0xe72+0x157d*-0x1,-0x29c+0x119*-0x8+0xb64],_0x1cf195=[0x2669+-0x6e3*-0x2+-0x342f,-0x1bfb+0xeb*-0x1+0x6*0x4d1,0x5*-0x293+0xb07+0x1d8],_0x3777b8=[0x310+-0x2304+0x1ff4,-0xbc7*-0x2+-0x1*0x1679+-0x115,-0x237a+0x1f51+-0x3*-0x163],_0x369cf3=[0x3*-0x8a9+0x1269+0x792,0x509+-0x200d+-0xb6*-0x26,-0x55d+0x1ceb+-0x3*0x7da],_0x889caa=[-0x15e+-0x871*0x1+0x9cf,-0x1935+-0x2*0x667+-0x25*-0x107,0x1226*0x1+-0x1dd7+0xbb1],_0x2fcf55=[-0x1*-0x19c2+-0x17*0x18b+-0x2f*-0x35,-0xd16+0x8fc+-0x6*-0xaf,-0x1ca6+-0x1*0x1fa2+-0x2*-0x1e24];for(let _0x9800bb=-0x1eec+-0x27*0xbc+-0x8*-0x772;_0x9800bb<_0x4a6053;++_0x9800bb){const _0x4c66d6=_0x27ca17[_0x9800bb*(0x1*0x1ed9+0x1*0x1411+-0x32e7)+(-0x249a+0x13e6+-0x42d*-0x4)]*(-0x2c*-0x5a+0x1255*0x1+-0x21ca),_0x5bd435=_0x27ca17[_0x9800bb*(-0x9d9+-0xa*-0x278+-0x1a*0x92)+(-0x166e+0xb5*0x17+0x62c)]*(0x18*0x74+0x17*0x7b+-0x16*0xff),_0xaa2f9=_0x27ca17[_0x9800bb*(-0x207+0x157e+0xf*-0x14c)+(-0x65*0x43+0x48c+0x15e5)]*(-0x1*-0xc5e+-0x2589+0x192e);_0x7fbcbe(_0x3caf78,_0x432828,_0x4c66d6),_0x7fbcbe(_0x1cf195,_0x432828,_0x5bd435),_0x7fbcbe(_0x3777b8,_0x432828,_0xaa2f9),_0x427a2a(_0x369cf3,_0x1cf195,_0x3caf78),_0x427a2a(_0x889caa,_0x3777b8,_0x3caf78),_0xef072d(_0x2fcf55,_0x369cf3,_0x889caa),_0x1de701(_0x2fcf55,0x19d2*0x1+0x1*0x2323+0xc31*-0x5);for(let _0x115608=0x19*0x17a+-0x4*0x1ed+0x1*-0x1d36;_0x115608<-0x266b+0x215*-0x5+0x30d7;++_0x115608)_0x147a3b[_0x4c66d6+_0x115608]+=_0x2fcf55[_0x115608],_0x147a3b[_0x5bd435+_0x115608]+=_0x2fcf55[_0x115608],_0x147a3b[_0xaa2f9+_0x115608]+=_0x2fcf55[_0x115608];}for(let _0x550945=-0x18f5+0x1e+0x18d7;_0x550945<_0x7ca4b9;++_0x550945)_0x1de701(_0x147a3b,_0x550945*(-0x1cc7+0xa*-0x21f+0x1900*0x2));return new Uint8Array(_0x147a3b['buffer']);},_0x4c433c=_0x14f315=>{const _0x21d065={},_0x3155fc=new _0x583ad1['DecoderBuf'+'fer']();_0x3155fc['Init'](_0x14f315,_0x14f315['length']);const _0x5b1d94=new _0x583ad1['Decoder']();if(_0x5b1d94['GetEncoded'+'GeometryTy'+'pe'](_0x3155fc)!==_0x583ad1['TRIANGULAR'+'_MESH'])return _0x21d065['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20mesh:\x20n'+'ot\x20a\x20mesh',_0x21d065;const _0x4345f8=new _0x583ad1['Mesh'](),_0x4a54e8=_0x5b1d94['DecodeBuff'+'erToMesh'](_0x3155fc,_0x4345f8);if(!_0x4a54e8||!_0x4a54e8['ok']()||_0x583ad1['getPointer'](_0x4345f8)===-0x2570+0x1*-0x18e+0x1f*0x142)return _0x21d065['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20asset',_0x21d065;const _0x5752f7=_0x4345f8['num_faces']()*(0x11*0xb3+-0x9f+0x43*-0x2b),_0x24d2f9=_0x4345f8['num_points']()<=0x3*0x3b3c+-0x948f+0x2*0x716d,_0x2b88f8=_0x5752f7*(_0x24d2f9?0x14c1+0xb3*0xc+0x1*-0x1d23:-0x1f00*-0x1+-0xa4d*-0x3+-0x3de3),_0x269a55=_0x583ad1['_malloc'](_0x2b88f8);_0x24d2f9?(_0x5b1d94['GetTriangl'+'esUInt16Ar'+'ray'](_0x4345f8,_0x2b88f8,_0x269a55),_0x21d065['indices']=new Uint16Array(_0x583ad1['HEAPU16']['buffer'],_0x269a55,_0x5752f7)['slice']()['buffer']):(_0x5b1d94['GetTriangl'+'esUInt32Ar'+'ray'](_0x4345f8,_0x2b88f8,_0x269a55),_0x21d065['indices']=new Uint32Array(_0x583ad1['HEAPU32']['buffer'],_0x269a55,_0x5752f7)['slice']()['buffer']),_0x583ad1['_free'](_0x269a55);const _0x50c7e4=[];for(let _0x2d99d3=-0xfc6+0x12e0+-0x31a;_0x2d99d3<_0x4345f8['num_attrib'+'utes']();++_0x2d99d3)_0x50c7e4['push'](_0x5b1d94['GetAttribu'+'te'](_0x4345f8,_0x2d99d3));_0x50c7e4['sort']((_0x3d2df8,_0x119e0b)=>(_0x198df1[_0x3d2df8['attribute_'+'type']()]??_0x198df1['length'])-(_0x198df1[_0x119e0b['attribute_'+'type']()]??_0x198df1['length'])),_0x21d065['attributes']=_0x50c7e4['map'](_0x9c0b5b=>_0x9c0b5b['unique_id']());let _0x7ba335=0x24e0*0x1+0x73*0x7+-0x2805;const _0x157bb6=_0x50c7e4['map'](_0xd6e5a=>{const _0x224597=_0x7ba335;return _0x7ba335+=Math['ceil'](_0x1bdf90(_0xd6e5a)/(0xaae+-0x18*-0x14+0x5*-0x282))*(0x2258+0x1*0x1e21+0x1d*-0x239),_0x224597;}),_0xbc70b2=_0x50c7e4['some'](_0x171e5e=>_0x171e5e['attribute_'+'type']()===0x21ce+0x13+-0x21e0),_0x553f8b=_0x157bb6[0x45a+-0x379+-0x38*0x4];if(!_0xbc70b2){for(let _0x396005=0x2312*-0x1+0x2*-0xaf3+0x38f9;_0x396005<_0x157bb6['length'];++_0x396005)_0x157bb6[_0x396005]+=0xb89+-0x1826+0xca9;_0x7ba335+=0x16fd+0x2038+-0x1263*0x3;}_0x21d065['vertices']=new ArrayBuffer(_0x4345f8['num_points']()*_0x7ba335);const _0x5bc268=new Uint8Array(_0x21d065['vertices']);for(let _0x1aa1db=0x15f4+0x22cb*0x1+-0x1*0x38bf;_0x1aa1db<_0x4345f8['num_attrib'+'utes']();++_0x1aa1db){const _0xf7f1f2=_0x50c7e4[_0x1aa1db],_0x3f0387=_0x1bdf90(_0xf7f1f2),_0x3c0b7f=_0x4345f8['num_points']()*_0x3f0387,_0x2f1dc1=_0x583ad1['_malloc'](_0x3c0b7f);_0x5b1d94['GetAttribu'+'teDataArra'+'yForAllPoi'+'nts'](_0x4345f8,_0xf7f1f2,_0xf7f1f2['data_type'](),_0x3c0b7f,_0x2f1dc1);const _0x328629=new Uint8Array(_0x583ad1['HEAPU8']['buffer'],_0x2f1dc1,_0x3c0b7f);for(let _0x54ea39=-0x2509+0x15f5+-0x4*-0x3c5;_0x54ea39<_0x4345f8['num_points']();++_0x54ea39)for(let _0x541766=-0x2*0x10f4+-0x1a1*0xd+0x3b*0xef;_0x541766<_0x3f0387;++_0x541766)_0x5bc268[_0x54ea39*_0x7ba335+_0x157bb6[_0x1aa1db]+_0x541766]=_0x328629[_0x54ea39*_0x3f0387+_0x541766];if(!_0xbc70b2&&_0xf7f1f2['attribute_'+'type']()===0xb*-0xc7+-0x3*-0x86f+-0x10c0){const _0x454c3d=_0x223c62(_0x3ac388(_0x328629,_0xf7f1f2['data_type']()),_0x24d2f9?new Uint16Array(_0x21d065['indices']):new Uint32Array(_0x21d065['indices']));for(let _0x15af37=0x3a3+-0x2aa*0xb+0x19ab;_0x15af37<_0x4345f8['num_points']();++_0x15af37)for(let _0x27cd00=0x1*0x10db+-0x150+-0xf8b;_0x27cd00<-0x2545+-0x7*0x525+0x4954;++_0x27cd00)_0x5bc268[_0x15af37*_0x7ba335+_0x553f8b+_0x27cd00]=_0x454c3d[_0x15af37*(0x14b*-0xd+-0xe*0x12b+0x2135*0x1)+_0x27cd00];}_0x583ad1['_free'](_0x2f1dc1);}return _0x583ad1['destroy'](_0x4345f8),_0x583ad1['destroy'](_0x5b1d94),_0x583ad1['destroy'](_0x3155fc),_0x21d065;},_0x542872=_0x4cd3d8=>{const _0x3ed2e4=_0x4c433c(new Uint8Array(_0x4cd3d8['buffer']));self['postMessag'+'e']({'jobId':_0x4cd3d8['jobId'],'error':_0x3ed2e4['error'],'indices':_0x3ed2e4['indices'],'vertices':_0x3ed2e4['vertices'],'attributes':_0x3ed2e4['attributes']},[_0x3ed2e4['indices'],_0x3ed2e4['vertices']]['filter'](_0x1f9329=>_0x1f9329!=null));},_0x213fb0=[];self['onmessage']=_0x5910e9=>{const _0x24d9d0=_0x5910e9['data'];switch(_0x24d9d0['type']){case'init':self['DracoDecod'+'erModule']({'instantiateWasm':(_0x3ca743,_0xfaf8a8)=>(WebAssembly['instantiat'+'e'](_0x24d9d0['module'],_0x3ca743)['then'](_0x32710a=>_0xfaf8a8(_0x32710a))['catch'](_0xce8a85=>console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0xce8a85)),{})})['then'](_0x30c8ce=>{_0x583ad1=_0x30c8ce,_0x213fb0['forEach'](_0x40ecb4=>_0x542872(_0x40ecb4));});break;case'decodeMesh':_0x583ad1?_0x542872(_0x24d9d0):_0x213fb0['push'](_0x24d9d0);break;}};}const Vg=-0x1da5+-0x11*-0xa6+0x35*0x5a;class nF{constructor(){this['workers']=[[],[],[]],this['jobId']=-0x1fec+0x1*0x2226+-0xa*0x39,this['jobQueue']=[],this['jobCallbac'+'ks']=new Map(),this['run']=(_0xd68d,_0x2f94c2)=>{_0xd68d['postMessag'+'e']({'type':'decodeMesh','jobId':_0x2f94c2['jobId'],'buffer':_0x2f94c2['buffer']},[_0x2f94c2['buffer']]);};}['init'](_0x542dd7){for(_0x542dd7['forEach'](_0x19fb04=>{_0x19fb04['addEventLi'+'stener']('message',_0x5cafa0=>{const _0x282b1c=_0x5cafa0['data'],_0x2e158c=this['jobCallbac'+'ks']['get'](_0x282b1c['jobId']);if(_0x2e158c&&_0x2e158c(_0x282b1c['error'],{'indices':_0x282b1c['indices'],'vertices':_0x282b1c['vertices'],'attributes':_0x282b1c['attributes']}),this['jobCallbac'+'ks']['delete'](_0x282b1c['jobId']),this['jobQueue']['length']>-0x22a9+-0xc96+-0x2f3f*-0x1){const _0x3692e2=this['jobQueue']['shift']();this['run'](_0x19fb04,_0x3692e2);}else{const _0x2839c5=this['workers'][-0x1ceb+0x6e7*0x5+-0x8f*0xa]['indexOf'](_0x19fb04);if(_0x2839c5!==-(-0x1303+0xd87+0x57d))this['workers'][0xae3*-0x1+0xa37*-0x1+0x1c*0xc1]['splice'](_0x2839c5,0x2669+0x1ccf+-0x4337*0x1),this['workers'][-0x232f+-0x99c+0x2ccc]['push'](_0x19fb04);else{const _0x87193=this['workers'][0x1aac+0x1*-0x187f+-0x22c]['indexOf'](_0x19fb04);_0x87193!==-(-0x1ab2+0x1*-0x2279+-0xa*-0x61e)?(this['workers'][-0x2247+-0x1a3*-0x9+0x138d]['splice'](_0x87193,-0x649*-0x1+0xa9f*0x1+-0x10e7),this['workers'][0x1*-0x1fcd+-0x164a+0x3617]['push'](_0x19fb04)):w['error']('logical\x20er'+'ror');}}});}),this['workers'][-0x1*-0x1655+0x1*0x1bc5+0x79*-0x6a]=_0x542dd7;this['jobQueue']['length']&&(this['workers'][0x14e4+0x1348+-0x2*0x1416]['length']||this['workers'][0x10ce*-0x2+-0x179d+0x393a]['length']);){const _0x2e71aa=this['jobQueue']['shift']();if(this['workers'][-0x1af9+-0xcf9+0x27f2]['length']>-0x2*0x1241+0x1f03*0x1+0x57f){const _0xe38492=this['workers'][0x9da+-0x22f8+-0x2*-0xc8f]['shift']();this['workers'][-0x3*0x15d+-0x20cf+0x1*0x24e7]['push'](_0xe38492),this['run'](_0xe38492,_0x2e71aa);}else{const _0x551890=this['workers'][-0x45*0x54+-0xf*-0x1f+0x7c*0x2b]['shift']();this['workers'][0x1bb8+-0xfa0+-0x1ba*0x7]['push'](_0x551890),this['run'](_0x551890,_0x2e71aa);}}}['enqueueJob'](_0x45094a,_0x3eee11){const _0x14b2f2={'jobId':this['jobId']++,'buffer':_0x45094a};if(this['jobCallbac'+'ks']['set'](_0x14b2f2['jobId'],_0x3eee11),this['workers'][0x87a*0x2+0x103d*0x1+0x1*-0x2131]['length']>-0x932+-0x25a4+0x2ed6*0x1){const _0x211dea=this['workers'][-0xc*-0xb5+0x426+0x2a*-0x4d]['shift']();this['workers'][-0x1a49+-0x12e9+-0x7*-0x675]['push'](_0x211dea),this['run'](_0x211dea,_0x14b2f2);}else{if(this['workers'][-0x29*0x95+0x5d*0x55+-0x703]['length']>0x18d*-0x1+-0x1e3f+0x1fcc){const _0x40dda0=this['workers'][0x681+-0xc0*-0x10+-0x4a0*0x4]['shift']();this['workers'][0x1924+-0x62*0x9+-0x56c*0x4]['push'](_0x40dda0),this['run'](_0x40dda0,_0x14b2f2);}else this['jobQueue']['push'](_0x14b2f2);}}}const oF=_0x191144=>new Promise((_0x26631f,_0x3bc84f)=>{const _0x44d2af={'cache':!(0xbc*-0x10+-0x1679*0x1+0x2239),'responseType':'text','retry':Vg>-0x3*0x19b+-0x852+-0x461*-0x3,'maxRetries':Vg};ot['get'](_0x191144,_0x44d2af,(_0x56b356,_0x4d6b0f)=>{_0x56b356?_0x3bc84f(_0x56b356):_0x26631f(_0x4d6b0f);});}),lF=_0x256cf6=>{const _0x58a7c4=()=>fetch(_0x256cf6)['then'](_0x26a8fe=>_0x26a8fe['arrayBuffe'+'r']())['then'](_0x280a3c=>WebAssembly['compile'](_0x280a3c)),_0x3212a0=()=>WebAssembly['compileStr'+'eaming'](fetch(_0x256cf6))['catch'](_0x354437=>(w['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x256cf6+'\x20('+_0x354437+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x58a7c4()));return WebAssembly['compileStr'+'eaming']?_0x3212a0():_0x58a7c4();},Gg=0x59f*-0x6+-0x698*0x4+0xdf*0x45;let Fc;const cF=_0xbc8760=>{if(Fc)return!(-0x74f+0x2f*-0x3e+0x5*0x3bd);if(!_0xbc8760){const _0x392b07=uS['getConfig']('DracoDecod'+'erModule');_0x392b07?_0xbc8760={'jsUrl':_0x392b07['glueUrl'],'wasmUrl':_0x392b07['wasmUrl'],'numWorkers':_0x392b07['numWorkers']}:_0xbc8760={'jsUrl':'draco.wasm'+'.js','wasmUrl':'draco.wasm'+'.wasm','numWorkers':Gg};}return!_0xbc8760['jsUrl']||!_0xbc8760['wasmUrl']?!(0x1f29+-0x10a3*-0x1+-0x1*0x2fcb):(Fc=new nF(),Promise['all']([oF(_0xbc8760['jsUrl']),lF(_0xbc8760['wasmUrl'])])['then'](([_0x4539ef,_0x4317b8])=>{const _0x265998=['/*\x20draco\x20*'+'/',_0x4539ef,'/*\x20worker\x20'+'*/','(\x0a'+aF['toString']()+'\x0a)()\x0a\x0a']['join']('\x0a'),_0x264dcb=new Blob([_0x265998],{'type':'applicatio'+'n/javascri'+'pt'}),_0x156e1e=URL['createObje'+'ctURL'](_0x264dcb),_0x496a18=Math['max'](0xc0e*-0x3+0x1c2a+0x2ab*0x3,Math['min'](-0x57+0x24*0x7b+-0x10e5,_0xbc8760['numWorkers']||Gg)),_0x4f0408=[];for(let _0x485966=0x106f+0xfaf+-0x201e;_0x485966<_0x496a18;++_0x485966){const _0x519360=new Worker(_0x156e1e);_0x519360['postMessag'+'e']({'type':'init','module':_0x4317b8}),_0x4f0408['push'](_0x519360);}Fc['init'](_0x4f0408);}),!(-0x3d*0x98+0x1*0x1b4f+0x8e9));},hF=(_0x3dda5f,_0x17c30d)=>cF()?(Fc['enqueueJob'](_0x3dda5f,_0x17c30d),!(0x65c+0x132b+-0x51b*0x5)):!(0x1c7+-0x1d*0x75+0xb7b);class dF{constructor(){h(this,'gltf'),h(this,'nodes'),h(this,'scenes'),h(this,'animations'),h(this,'textures'),h(this,'materials'),h(this,'variants'),h(this,'meshVarian'+'ts'),h(this,'meshDefaul'+'tMaterials'),h(this,'renders'),h(this,'skins'),h(this,'lights'),h(this,'cameras'),h(this,'nodeInstan'+'cingMap');}['destroy'](){this['renders']&&this['renders']['forEach'](_0x2f65ba=>{_0x2f65ba['meshes']=null;});}}const Bv=_0xb80822=>/^data:[^\n\r,\u2028\u2029]*,.*$/i['test'](_0xb80822),fF=_0x1c83fa=>_0x1c83fa['substring'](_0x1c83fa['indexOf'](':')+(-0x1c33*0x1+0x2657*0x1+-0xa23*0x1),_0x1c83fa['indexOf'](';')),nl=_0x122c59=>{switch(_0x122c59){case'SCALAR':return 0x231d+0x212*-0x1+-0x2*0x1085;case'VEC2':return-0x49*-0x47+-0x1a7b*-0x1+0x28*-0x12b;case'VEC3':return-0x1*-0x23bf+-0x208b+-0x13*0x2b;case'VEC4':return-0x2128+0x1c15*0x1+0x517;case'MAT2':return 0xca7*0x1+0x10d*-0x17+0xb88;case'MAT3':return-0x5e+0x4bf+-0x22c*0x2;case'MAT4':return-0x95*0x38+-0x21a6+0x424e;default:return 0x21c1*-0x1+-0x3*0x836+0x3a66;}},ld=_0x107591=>{switch(_0x107591){case 0x1246+-0x11d*-0x5+-0x3d7:return Hh;case 0xa35+-0xfec+0x19b8*0x1:return ia;case-0x25ad+-0x1a*0x11+0x3b69:return Wh;case-0x28f*0xb+0x2452+0xbd6:return _l;case-0x23f3+-0x187+0x132a*0x3:return zS;case 0xdf3+0x1bac+-0x4f*0x46:return Vo;case-0x544+0x14b3+0x497:return Ve;default:return 0x2507*0x1+0x1254+-0x25*0x17f;}},uF=_0x3a2ae=>{switch(_0x3a2ae){case-0x13c*-0xe+-0x1c58+0x1f10:return 0x26c4+-0x45e+0x1*-0x2265;case-0x17f7+-0x17b2*-0x1+0x5*0x40e:return 0x1a09+0xf3b+0x1*-0x2943;case-0x4c9+-0x750+0x201b*0x1:return-0x1615+0x6*-0x3fb+-0x1*-0x2df9;case-0x2495+0x1913+0x1f85:return-0x2015+0x1b55*0x1+0x2*0x261;case-0x5b9*-0x4+-0x112e+0xe4e:return 0x1*0x1d53+-0x1*-0x80e+-0x779*0x5;case-0x14d*-0x1+-0x1f61+0x5f*0x87:return-0x2526*0x1+0x2123*-0x1+-0x1*-0x464d;case 0x165c+-0xa6a+0x814*0x1:return-0x13ef+0x71d+0xcd6;default:return-0x1*-0x115f+-0x1a2f+0x5e*0x18;}},pF=_0x1bbf92=>{switch(_0x1bbf92){case-0x17d*0x10+0xb19+-0x7d*-0x43:return Int8Array;case 0x224*-0x3+0x197*0x17+0x1*-0xa24:return Uint8Array;case-0x11d4+0xa01+0x1bd5:return Int16Array;case 0x511*0x2+-0x1ad1+-0x4d*-0x7a:return Uint16Array;case 0x1*0xede+0x4*-0x280+0xf26:return Int32Array;case-0x2761+0x1c31+0x1f35*0x1:return Uint32Array;case 0xf*-0xa3+0x4a1+-0x18f2*-0x1:return Float32Array;default:return null;}},ph={'POSITION':Pe,'NORMAL':gs,'TANGENT':yi,'COLOR_0':Wt,'JOINTS_0':us,'WEIGHTS_0':gi,'TEXCOORD_0':is,'TEXCOORD_1':va,'TEXCOORD_2':hl,'TEXCOORD_3':dl,'TEXCOORD_4':fl,'TEXCOORD_5':ul,'TEXCOORD_6':pl,'TEXCOORD_7':ml},Hg={[Pe]:0xafc+-0x1*0x222+-0x8da,[gs]:0x18*-0x167+-0xe9+-0x6ea*-0x5,[yi]:0x1b0a*0x1+0x3*0x2ae+-0x2312,[Wt]:-0x2*0x366+-0x3*0x50b+0x15f0,[us]:-0x35*0x32+0x1268+-0x2a*0x31,[gi]:0x2*0x749+0x3*0x2e9+0xa*-0x254,[is]:-0x1038+0x6b0*0x3+-0x3d2,[va]:0x12c9+-0x2b*-0x1a+-0x4a0*0x5,[hl]:0x87f+-0xee*-0x7+0xef9*-0x1,[dl]:-0x1*0x89+0x53*-0xe+0x51c,[fl]:0x2390+-0x1051*0x1+-0x21*0x95,[ul]:0x1dac+0x154d+-0x32ee,[pl]:-0x4c7*-0x1+-0x6e9+0x22e,[ml]:0x124*0x1b+-0x1*-0x2370+0x1*-0x422f},mF=_0x1a95cd=>{switch(_0x1a95cd){case Hh:return _0x2eee99=>Math['max'](_0x2eee99/(0x253e+-0x12*-0x218+0x1*-0x4a6f),-(-0x11b1+-0x1e90+0x3042));case ia:return _0xd49bb8=>_0xd49bb8/(-0x814+-0xc4*0x28+-0x1*-0x27b3);case Wh:return _0x2ff0b1=>Math['max'](_0x2ff0b1/(-0x23f*0x35+-0x3*0x527b+0x1ee7b),-(0x29a+-0x5*-0x295+-0xf82));case _l:return _0x85a4a6=>_0x85a4a6/(0x162e4+-0x9da5*-0x1+-0x1008a);default:return _0x21fb63=>_0x21fb63;}},_u=(_0x37e388,_0x27b549,_0x58c89c)=>{const _0x14d24d=mF(_0x58c89c),_0x3bb4bd=_0x27b549['length'];for(let _0x34b3d1=-0x113+0xa1*-0x39+0x24ec;_0x34b3d1<_0x3bb4bd;++_0x34b3d1)_0x37e388[_0x34b3d1]=_0x14d24d(_0x27b549[_0x34b3d1]);return _0x37e388;},la=(_0x557835,_0x161b22,_0x5f3356=!(-0x25e2+-0xbef+0x31d2))=>{const _0xd88a8a=nl(_0x557835['type']),_0x268b15=pF(_0x557835['componentT'+'ype']);if(!_0x268b15)return null;let _0x262ef7;if(_0x557835['sparse']){const _0xad66b7=_0x557835['sparse'],_0x2eea7e={'count':_0xad66b7['count'],'type':'SCALAR'},_0x17ab39=la(Object['assign'](_0x2eea7e,_0xad66b7['indices']),_0x161b22,!(-0x11*0xb9+-0x1d47+0x98*0x46)),_0x28e7c6={'count':_0xad66b7['count'],'type':_0x557835['type'],'componentType':_0x557835['componentT'+'ype']},_0x30a6ca=la(Object['assign'](_0x28e7c6,_0xad66b7['values']),_0x161b22,!(0x114c+0x39a+-0x42e*0x5));if(_0x557835['hasOwnProp'+'erty']('bufferView')){const _0x3efd97={'bufferView':_0x557835['bufferView'],'byteOffset':_0x557835['byteOffset'],'componentType':_0x557835['componentT'+'ype'],'count':_0x557835['count'],'type':_0x557835['type']};_0x262ef7=la(_0x3efd97,_0x161b22,!(0x7b4+-0x1087+0x8d3))['slice']();}else _0x262ef7=new _0x268b15(_0x557835['count']*_0xd88a8a);for(let _0x1b1bc4=-0x182b+-0xd3+0x18fe;_0x1b1bc4<_0xad66b7['count'];++_0x1b1bc4){const _0x36f586=_0x17ab39[_0x1b1bc4];for(let _0x4c3fc7=-0x6*0x646+0xab5*-0x2+0x1*0x3b0e;_0x4c3fc7<_0xd88a8a;++_0x4c3fc7)_0x262ef7[_0x36f586*_0xd88a8a+_0x4c3fc7]=_0x30a6ca[_0x1b1bc4*_0xd88a8a+_0x4c3fc7];}}else{if(_0x557835['hasOwnProp'+'erty']('bufferView')){const _0x36aa5f=_0x161b22[_0x557835['bufferView']];if(_0x5f3356&&_0x36aa5f['hasOwnProp'+'erty']('byteStride')){const _0x3377f1=_0xd88a8a*_0x268b15['BYTES_PER_'+'ELEMENT'],_0x4ea9b7=new ArrayBuffer(_0x557835['count']*_0x3377f1),_0xf30354=new Uint8Array(_0x4ea9b7);let _0x33ac09=-0xf0c+-0x29*-0x34+0x56*0x14;for(let _0xca1bea=-0x1891+-0x512+0x9*0x34b;_0xca1bea<_0x557835['count'];++_0xca1bea){let _0x34f6b0=(_0x557835['byteOffset']||-0x5ae+-0x1bd1+0x4c9*0x7)+_0xca1bea*_0x36aa5f['byteStride'];for(let _0xa8e4c9=-0x1*0xbad+0x1e47+-0x129a;_0xa8e4c9<_0x3377f1;++_0xa8e4c9)_0xf30354[_0x33ac09++]=_0x36aa5f[_0x34f6b0++];}_0x262ef7=new _0x268b15(_0x4ea9b7);}else _0x262ef7=new _0x268b15(_0x36aa5f['buffer'],_0x36aa5f['byteOffset']+(_0x557835['byteOffset']||0x1953*-0x1+0x28d+0xa*0x247),_0x557835['count']*_0xd88a8a);}else _0x262ef7=new _0x268b15(_0x557835['count']*_0xd88a8a);}return _0x262ef7;},xn=(_0x1eac00,_0x136685)=>{const _0x139f00=la(_0x1eac00,_0x136685,!(0x1e9+-0x3*-0x47c+-0xf5d));if(_0x139f00 instanceof Float32Array||!_0x1eac00['normalized'])return _0x139f00;const _0x22e52d=new Float32Array(_0x139f00['length']);return _u(_0x22e52d,_0x139f00,ld(_0x1eac00['componentT'+'ype'])),_0x22e52d;},gu=_0x488a86=>{let _0x18a3b1=_0x488a86['min'],_0x4a6367=_0x488a86['max'];if(!_0x18a3b1||!_0x4a6367)return null;if(_0x488a86['normalized']){const _0x4f301e=ld(_0x488a86['componentT'+'ype']);_0x18a3b1=_u([],_0x18a3b1,_0x4f301e),_0x4a6367=_u([],_0x4a6367,_0x4f301e);}return new De(new D((_0x4a6367[0x1d1b+-0x420+-0x18fb]+_0x18a3b1[-0x1c6+0x35*0xb2+-0x4*0x8c5])*(-0x2626+0x4*-0x1fe+0x2e1e+0.5),(_0x4a6367[0x13b2*0x1+-0x1d*0x107+0x3*0x35e]+_0x18a3b1[-0xad2+-0x1*-0x6ad+-0x3*-0x162])*(-0x11a3+0x2556+-0x13b3+0.5),(_0x4a6367[-0xa*0x2ce+0x410+0x17fe]+_0x18a3b1[0x165+-0x1f6*-0x1+-0x359])*(0x1505+0x1bf1+-0x6*0x829+0.5)),new D((_0x4a6367[-0x1ed6+0x2533+-0x65d]-_0x18a3b1[0x17b+0x6b1+-0x82c])*(0x2191*0x1+0x328+0x53f*-0x7+0.5),(_0x4a6367[-0x1f9f+-0x1c2+0x2*0x10b1]-_0x18a3b1[-0x4*0x22b+-0x23c8+0x2c75])*(-0x298+0x1*-0xae0+-0x2*-0x6bc+0.5),(_0x4a6367[0x105d*-0x2+0x158+-0x7*-0x47c]-_0x18a3b1[0x1871+0x20ba+-0x3929])*(0x16be+-0x1d98+0x6da*0x1+0.5)));},zv=_0x23e3f7=>{if(!_0x23e3f7['hasOwnProp'+'erty']('mode'))return qs;switch(_0x23e3f7['mode']){case-0xb19+-0x1382+0x61f*0x5:return Vh;case 0x1ec8+0x103d*0x2+-0x3f41:return Gh;case 0x3*0x8cd+0xb7*-0x29+0x2ea*0x1:return OS;case 0x12b5*-0x1+-0x7*-0x101+0xbb1:return FS;case-0x3*0x6f1+0x18de+-0x407:return qs;case-0x213a+-0x4f*0xe+0x2591:return vr;case 0xc46+-0x202*0x4+-0x438:return sa;default:return qs;}},_F=_0x23ecc2=>{const _0x3a35f3=new Uint16Array(_0x23ecc2);for(let _0x5de753=-0xb41*0x1+0x230f*-0x1+0x2e50;_0x5de753<_0x23ecc2;_0x5de753++)_0x3a35f3[_0x5de753]=_0x5de753;return _0x3a35f3;},gF=(_0xb98152,_0x50b915)=>{const _0x5705d1=_0xb98152[Pe];if(!_0x5705d1||_0x5705d1['components']!==-0x1a17+0xd87+-0xc93*-0x1)return;let _0x38ff87;if(_0x5705d1['size']!==_0x5705d1['stride']){const _0x116e87=_0x5705d1['stride']/Eo[_0x5705d1['type']],_0x150ac8=new _n[_0x5705d1['type']](_0x5705d1['buffer'],_0x5705d1['offset'],_0x5705d1['count']*_0x116e87);_0x38ff87=new _n[_0x5705d1['type']](_0x5705d1['count']*(0x1*0x1de1+0xbe8+-0x29c6));for(let _0x503362=0x2110+-0x1ea4+-0x26c*0x1;_0x503362<_0x5705d1['count'];++_0x503362)_0x38ff87[_0x503362*(0x2*-0xfcb+0x1329+0xc70)+(0x27*-0xde+-0xab2+0x2c84)]=_0x150ac8[_0x503362*_0x116e87+(-0xafd+0x7*-0x4fa+0x2dd3*0x1)],_0x38ff87[_0x503362*(-0x2624+0x1b30+0xaf7)+(0x9f*-0x8+0x1*0x81a+0x321*-0x1)]=_0x150ac8[_0x503362*_0x116e87+(0x128+0x47*0x80+-0x1*0x24a7)],_0x38ff87[_0x503362*(0x1519+0x3fe*-0x4+-0x51e)+(-0xe7+0x17d7+-0x16ee)]=_0x150ac8[_0x503362*_0x116e87+(0x208+0x189c+-0x2*0xd51)];}else _0x38ff87=new _n[_0x5705d1['type']](_0x5705d1['buffer'],_0x5705d1['offset'],_0x5705d1['count']*(-0x76d*0x1+0x57d+0x1*0x1f3));const _0x366715=_0x5705d1['count'];_0x50b915||(_0x50b915=_F(_0x366715));const _0x3d2627=Yy(_0x38ff87,_0x50b915),_0x10c17e=new Float32Array(_0x3d2627['length']);_0x10c17e['set'](_0x3d2627),_0xb98152[gs]={'buffer':_0x10c17e['buffer'],'size':0xc,'offset':0x0,'stride':0xc,'count':_0x366715,'components':0x3,'type':Ve};},SF=_0x1b59c5=>{const _0x2c5da8=_0x5060ae=>{const _0x40b3f4=[];for(let _0x3df9ff=0x70e+-0x1918+-0x905*-0x2;_0x3df9ff<_0x5060ae['_levels']['length'];++_0x3df9ff){let _0x139ee0=[];if(_0x5060ae['cubemap']){for(let _0x38a808=0x365*0x2+0x1*0x104e+-0x1718;_0x38a808<-0x1459*-0x1+-0x1*-0x1d4d+-0x31a0;++_0x38a808)_0x139ee0['push'](_0x5060ae['_levels'][_0x3df9ff][_0x38a808]);}else _0x139ee0=_0x5060ae['_levels'][_0x3df9ff];_0x40b3f4['push'](_0x139ee0);}return _0x40b3f4;},_0xd5117e=new _e(_0x1b59c5['device'],_0x1b59c5);return _0xd5117e['_levels']=_0x2c5da8(_0x1b59c5),_0xd5117e;},yF=_0x2af330=>{const _0xdc3e5=new pe(_0x2af330['name']+'_clone',_0x2af330['type'],_0x2af330['file'],_0x2af330['data'],_0x2af330['options']);return _0xdc3e5['loaded']=!(-0x1770+0x1e6d+-0x6fd*0x1),_0xdc3e5['resource']=SF(_0x2af330['resource']),_0x2af330['registry']['add'](_0xdc3e5),_0xdc3e5;},vF=(_0x4fe31b,_0x58ab74)=>{const _0x1fbbed=_0x58ab74[Pe];if(!_0x1fbbed)return null;const _0x44d25e=_0x1fbbed['count'],_0x30f34a=[];for(const _0x4ec96c in _0x58ab74)if(_0x58ab74['hasOwnProp'+'erty'](_0x4ec96c)){const _0x36826d={'semantic':_0x4ec96c,'components':_0x58ab74[_0x4ec96c]['components'],'type':_0x58ab74[_0x4ec96c]['type'],'normalize':!!_0x58ab74[_0x4ec96c]['normalize']};kt['isElementV'+'alid'](_0x4fe31b,_0x36826d)||_0x36826d['components']++,_0x30f34a['push'](_0x36826d);}_0x30f34a['sort']((_0x4088f4,_0x219c85)=>Hg[_0x4088f4['semantic']]-Hg[_0x219c85['semantic']]);let _0x39d943,_0x47a292,_0x4cd3a3,_0x5e4a0a,_0x549a13,_0xca4328;const _0x1ba8e2=new kt(_0x4fe31b,_0x30f34a);let _0x1a3d53=!(0x344+-0x2*0xa67+0x382*0x5);for(_0x39d943=0xec6+0x18d2+-0x2798;_0x39d943<_0x1ba8e2['elements']['length'];++_0x39d943)if(_0x549a13=_0x1ba8e2['elements'][_0x39d943],_0x5e4a0a=_0x58ab74[_0x549a13['name']],_0xca4328=_0x5e4a0a['offset']-_0x1fbbed['offset'],_0x5e4a0a['buffer']!==_0x1fbbed['buffer']||_0x5e4a0a['stride']!==_0x549a13['stride']||_0x5e4a0a['size']!==_0x549a13['size']||_0xca4328!==_0x549a13['offset']){_0x1a3d53=!(0x14f0+0x5*0x59f+0x1*-0x310a);break;}const _0xba50ec=new Ds(_0x4fe31b,_0x1ba8e2,_0x44d25e),_0x5aae98=_0xba50ec['lock'](),_0x5bd946=new Uint32Array(_0x5aae98);let _0x2297d9;if(_0x1a3d53)_0x2297d9=new Uint32Array(_0x1fbbed['buffer'],_0x1fbbed['offset'],_0x44d25e*_0xba50ec['format']['size']/(0x17*-0x119+0xb9*0x34+0x3*-0x41b)),_0x5bd946['set'](_0x2297d9);else{let _0x2f9468,_0x50a74b;for(_0x39d943=0x2162+0xab+-0x220d;_0x39d943<_0xba50ec['format']['elements']['length'];++_0x39d943){_0x549a13=_0xba50ec['format']['elements'][_0x39d943],_0x2f9468=_0x549a13['stride']/(0x1*-0x6c3+-0x2*0xf93+-0x7*-0x56b),_0x5e4a0a=_0x58ab74[_0x549a13['name']],_0x50a74b=_0x5e4a0a['stride']/(-0x355*-0x2+-0x18cd+0x1227),_0x2297d9=new Uint32Array(_0x5e4a0a['buffer'],_0x5e4a0a['offset'],(_0x5e4a0a['count']-(0xd*-0x2a5+-0xd00+0x2f62))*_0x50a74b+(_0x5e4a0a['size']+(-0x192*-0x16+-0x1e0f+-0x47a))/(0x1a9f+-0x889+-0x9*0x202));let _0x3b4b61=0x580+-0x35*-0x4f+-0x15db,_0x1f8d5d=_0x549a13['offset']/(0x22fe+0xa4+0x239e*-0x1);const _0x966e4f=Math['floor']((_0x5e4a0a['size']+(-0x6f*-0x13+-0x202b+0x17f1))/(-0x8a6+0xb05+-0x3*0xc9));for(_0x47a292=-0x1*0xa8d+-0xf6e+-0x1*-0x19fb;_0x47a292<_0x44d25e;++_0x47a292){for(_0x4cd3a3=-0x823*0x1+0x10b9+-0x13a*0x7;_0x4cd3a3<_0x966e4f;++_0x4cd3a3)_0x5bd946[_0x1f8d5d+_0x4cd3a3]=_0x2297d9[_0x3b4b61+_0x4cd3a3];_0x3b4b61+=_0x50a74b,_0x1f8d5d+=_0x2f9468;}}}return _0xba50ec['unlock'](),_0xba50ec;},xF=(_0x3bbe1b,_0x2551a4,_0x1fb138,_0x37085e,_0x19ef78,_0x507649)=>{const _0x57615e={},_0x4c0183=[];for(const _0x584030 in _0x2551a4)_0x2551a4['hasOwnProp'+'erty'](_0x584030)&&ph['hasOwnProp'+'erty'](_0x584030)&&(_0x57615e[_0x584030]=_0x2551a4[_0x584030],_0x4c0183['push'](_0x584030+':'+_0x2551a4[_0x584030]));_0x4c0183['sort']();const _0x2163d3=_0x4c0183['join']();let _0x3744f5=_0x507649[_0x2163d3];if(!_0x3744f5){const _0x1250d6={};for(const _0x23849e in _0x57615e){const _0x20f727=_0x37085e[_0x2551a4[_0x23849e]],_0x29b4b3=la(_0x20f727,_0x19ef78),_0x7034d2=_0x19ef78[_0x20f727['bufferView']],_0x3d6e54=ph[_0x23849e],_0x3e2b2b=nl(_0x20f727['type'])*uF(_0x20f727['componentT'+'ype']),_0x45503a=_0x7034d2&&_0x7034d2['hasOwnProp'+'erty']('byteStride')?_0x7034d2['byteStride']:_0x3e2b2b;_0x1250d6[_0x3d6e54]={'buffer':_0x29b4b3['buffer'],'size':_0x3e2b2b,'offset':_0x29b4b3['byteOffset'],'stride':_0x45503a,'count':_0x20f727['count'],'components':nl(_0x20f727['type']),'type':ld(_0x20f727['componentT'+'ype']),'normalize':_0x20f727['normalized']};}_0x1250d6['hasOwnProp'+'erty'](gs)||gF(_0x1250d6,_0x1fb138),_0x3744f5=vF(_0x3bbe1b,_0x1250d6),_0x507649[_0x2163d3]=_0x3744f5;}return _0x3744f5;},TF=(_0x2f30aa,_0x142c91,_0x4d456c,_0x123151,_0x132b00,_0x59d98f)=>{let _0x46cebc,_0x49cf8f,_0x3318b7;const _0x3ea6eb=_0x142c91['joints'],_0x4e513c=_0x3ea6eb['length'],_0x589551=[];if(_0x142c91['hasOwnProp'+'erty']('inverseBin'+'dMatrices')){const _0x4e5670=_0x142c91['inverseBin'+'dMatrices'],_0x58211c=la(_0x4d456c[_0x4e5670],_0x123151,!(-0x5c*-0x1d+0x1*0x1318+-0xec2*0x2)),_0xcecf61=[];for(_0x46cebc=-0x1139+-0x1ad2+0xcd*0x37;_0x46cebc<_0x4e513c;_0x46cebc++){for(_0x49cf8f=-0x1*0x82f+-0xb23*0x1+0x1*0x1352;_0x49cf8f<-0xb*-0x308+0x171f+-0x3867;_0x49cf8f++)_0xcecf61[_0x49cf8f]=_0x58211c[_0x46cebc*(0x8a8+-0x15d*0x1b+-0x1*-0x1c37)+_0x49cf8f];_0x3318b7=new te(),_0x3318b7['set'](_0xcecf61),_0x589551['push'](_0x3318b7);}}else{for(_0x46cebc=-0x24b0+0x1*-0x1053+-0x3503*-0x1;_0x46cebc<_0x4e513c;_0x46cebc++)_0x3318b7=new te(),_0x589551['push'](_0x3318b7);}const _0x3eb98e=[];for(_0x46cebc=-0x119*0x11+-0x316+0x15bf;_0x46cebc<_0x4e513c;_0x46cebc++)_0x3eb98e[_0x46cebc]=_0x132b00[_0x3ea6eb[_0x46cebc]]['name'];const _0x353d3e=_0x3eb98e['join']('#');let _0x1116e9=_0x59d98f['get'](_0x353d3e);return _0x1116e9||(_0x1116e9=new Ky(_0x2f30aa,_0x589551,_0x3eb98e),_0x59d98f['set'](_0x353d3e,_0x1116e9)),_0x1116e9;},wF=(_0xe6958b,_0x2de1b6,_0x5bd5d6,_0x5f2b2c,_0x4cbee4,_0x385677,_0x2a15c6)=>{var _0x511873;const _0x24e6ac=new Ge(_0xe6958b);_0x24e6ac['aabb']=gu(_0x5bd5d6[_0x2de1b6['attributes']['POSITION']]);const _0x562285=[];for(const [_0x503102,_0x439f04]of Object['entries'](_0x2de1b6['attributes'])){const _0x3fe96b=_0x5bd5d6[_0x439f04],_0x3268cb=ph[_0x503102],_0x58d4b1=ld(_0x3fe96b['componentT'+'ype']);_0x562285['push']({'semantic':_0x3268cb,'components':nl(_0x3fe96b['type']),'type':_0x58d4b1,'normalize':_0x3fe96b['normalized']??(_0x3268cb===Wt&&(_0x58d4b1===ia||_0x58d4b1===_l))});}if(_0x2a15c6['push'](new Promise((_0x59be1b,_0x5d5da9)=>{const _0x457313=_0x2de1b6['extensions']['KHR_draco_'+'mesh_compr'+'ession'];hF(_0x5f2b2c[_0x457313['bufferView']]['slice']()['buffer'],(_0x50777f,_0x258694)=>{var _0x4d19ea;if(_0x50777f)console['log'](_0x50777f),_0x5d5da9(_0x50777f);else{const _0x5eedad={};for(const [_0x546e52,_0x3b7d8c]of Object['entries'](_0x457313['attributes']))_0x5eedad[ph[_0x546e52]]=_0x258694['attributes']['indexOf'](_0x3b7d8c);_0x562285['sort']((_0x4fb697,_0x1dc13c)=>_0x5eedad[_0x4fb697['semantic']]-_0x5eedad[_0x1dc13c['semantic']]),(_0x4d19ea=_0x2de1b6['attributes'])!=null&&_0x4d19ea['NORMAL']||_0x562285['splice'](0x1*-0x1ae2+-0x1*0x1b7d+0x3660,-0x25cf*0x1+0x12ae*-0x1+0x1*0x387d,{'semantic':'NORMAL','components':0x3,'type':Ve});const _0x102acf=new kt(_0xe6958b,_0x562285),_0x20a0e1=_0x258694['vertices']['byteLength']/_0x102acf['size'],_0x5e5379=_0x20a0e1<=0x1f426+-0xae2b+0x1754*-0x3?ji:yr,_0xfdd98a=_0x258694['indices']['byteLength']/(_0x20a0e1<=0xfa4f+0x5*-0x2d30+0xe7a0?0x19*-0x9d+-0x13f7+0x234e:-0x767*-0x4+0x242*0x2+-0x221c);w['call'](()=>{_0x20a0e1!==_0x5bd5d6[_0x2de1b6['attributes']['POSITION']]['count']&&w['warn']('mesh\x20has\x20i'+'nvalid\x20ver'+'tex\x20count'),_0xfdd98a!==_0x5bd5d6[_0x2de1b6['indices']]['count']&&w['warn']('mesh\x20has\x20i'+'nvalid\x20ind'+'ex\x20count');});const _0x12d322=new Ds(_0xe6958b,_0x102acf,_0x20a0e1,{'data':_0x258694['vertices']}),_0x5a3e60=new xr(_0xe6958b,_0x5e5379,_0xfdd98a,ms,_0x258694['indices']);_0x24e6ac['vertexBuff'+'er']=_0x12d322,_0x24e6ac['indexBuffe'+'r'][-0x81d+0x75b*0x5+-0x1caa]=_0x5a3e60,_0x24e6ac['primitive'][0x6*-0x22a+0x95*0x29+-0xae1*0x1]['type']=zv(_0x2de1b6),_0x24e6ac['primitive'][-0x20cf+-0x2*0xcd6+-0x3a7b*-0x1]['base']=0x816*0x1+0x266c+-0x2e82,_0x24e6ac['primitive'][-0xefd+-0xc0b*0x1+0x1b08]['count']=_0x5a3e60?_0xfdd98a:_0x20a0e1,_0x24e6ac['primitive'][-0x3*-0x36d+0x73*-0x24+0x5e5]['indexed']=!!_0x5a3e60,_0x59be1b();}});})),(_0x511873=_0x2de1b6==null?void(-0x11*0x203+0x17d4+0xa5f):_0x2de1b6['extensions'])!=null&&_0x511873['KHR_materi'+'als_varian'+'ts']){const _0x4fa616=_0x2de1b6['extensions']['KHR_materi'+'als_varian'+'ts'],_0x2a71f6={};_0x4fa616['mappings']['forEach'](_0x593f79=>{_0x593f79['variants']['forEach'](_0x2df24d=>{_0x2a71f6[_0x2df24d]=_0x593f79['material'];});}),_0x4cbee4[_0x24e6ac['id']]=_0x2a71f6;}return _0x385677[_0x24e6ac['id']]=_0x2de1b6['material'],_0x24e6ac;},EF=(_0x308548,_0x1d1c48,_0x4fcc07,_0x1431b1,_0x2c6d9d,_0x33f365,_0x2b8fa4,_0x305f70,_0x57235d)=>{const _0x161547=[];return _0x1d1c48['primitives']['forEach'](_0x1b5841=>{var _0x26e4bb;if((_0x26e4bb=_0x1b5841['extensions'])!=null&&_0x26e4bb['KHR_draco_'+'mesh_compr'+'ession'])_0x161547['push'](wF(_0x308548,_0x1b5841,_0x4fcc07,_0x1431b1,_0x33f365,_0x2b8fa4,_0x57235d));else{let _0x228f9d=_0x1b5841['hasOwnProp'+'erty']('indices')?la(_0x4fcc07[_0x1b5841['indices']],_0x1431b1,!(0xc83*-0x2+-0xdba+0x26c0)):null;const _0x3f7e9a=xF(_0x308548,_0x1b5841['attributes'],_0x228f9d,_0x4fcc07,_0x1431b1,_0x2c6d9d),_0x1a0334=zv(_0x1b5841),_0x369c20=new Ge(_0x308548);if(_0x369c20['vertexBuff'+'er']=_0x3f7e9a,_0x369c20['primitive'][-0x63a+0x24*-0x4c+0x10ea]['type']=_0x1a0334,_0x369c20['primitive'][-0xb77+0x1*0xea4+0x10f*-0x3]['base']=0x1*-0x130+0x1a91+0x59*-0x49,_0x369c20['primitive'][-0x7*0x293+0x1*0x1edf+-0xcda]['indexed']=_0x228f9d!==null,_0x228f9d!==null){let _0x37e04a;_0x228f9d instanceof Uint8Array?_0x37e04a=yf:_0x228f9d instanceof Uint16Array?_0x37e04a=ji:_0x37e04a=yr,_0x37e04a===yf&&_0x308548['isWebGPU']&&(_0x37e04a=ji,_0x228f9d=new Uint16Array(_0x228f9d));const _0x3249d1=new xr(_0x308548,_0x37e04a,_0x228f9d['length'],ms,_0x228f9d);_0x369c20['indexBuffe'+'r'][0x9b7+0xb9*0x2e+0x1*-0x2af5]=_0x3249d1,_0x369c20['primitive'][0x5e6*0x3+-0x3*0x282+-0x28b*0x4]['count']=_0x228f9d['length'];}else _0x369c20['primitive'][0x1cf8+-0x4f2+-0x1806]['count']=_0x3f7e9a['numVertice'+'s'];if(_0x1b5841['hasOwnProp'+'erty']('extensions')&&_0x1b5841['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts')){const _0x39b7bc=_0x1b5841['extensions']['KHR_materi'+'als_varian'+'ts'],_0x204c98={};_0x39b7bc['mappings']['forEach'](_0x4ca5a0=>{_0x4ca5a0['variants']['forEach'](_0x52da16=>{_0x204c98[_0x52da16]=_0x4ca5a0['material'];});}),_0x33f365[_0x369c20['id']]=_0x204c98;}_0x2b8fa4[_0x369c20['id']]=_0x1b5841['material'];let _0x2020a4=_0x4fcc07[_0x1b5841['attributes']['POSITION']];if(_0x369c20['aabb']=gu(_0x2020a4),_0x1b5841['hasOwnProp'+'erty']('targets')){const _0x5c764e=[];_0x1b5841['targets']['forEach']((_0x17eecc,_0x358b3e)=>{const _0x42e838={};_0x17eecc['hasOwnProp'+'erty']('POSITION')&&(_0x2020a4=_0x4fcc07[_0x17eecc['POSITION']],_0x42e838['deltaPosit'+'ions']=xn(_0x2020a4,_0x1431b1),_0x42e838['aabb']=gu(_0x2020a4)),_0x17eecc['hasOwnProp'+'erty']('NORMAL')&&(_0x2020a4=_0x4fcc07[_0x17eecc['NORMAL']],_0x42e838['deltaNorma'+'ls']=xn(_0x2020a4,_0x1431b1)),_0x1d1c48['hasOwnProp'+'erty']('extras')&&_0x1d1c48['extras']['hasOwnProp'+'erty']('targetName'+'s')?_0x42e838['name']=_0x1d1c48['extras']['targetName'+'s'][_0x358b3e]:_0x42e838['name']=_0x358b3e['toString'](0x5*-0x2e1+0x16f8+-0x5f*0x17),_0x1d1c48['hasOwnProp'+'erty']('weights')&&(_0x42e838['defaultWei'+'ght']=_0x1d1c48['weights'][_0x358b3e]),_0x42e838['preserveDa'+'ta']=_0x305f70['morphPrese'+'rveData'],_0x5c764e['push'](new od(_0x42e838));}),_0x369c20['morph']=new Gp(_0x5c764e,_0x308548,{'preferHighPrecision':_0x305f70['morphPrefe'+'rHighPreci'+'sion']});}_0x161547['push'](_0x369c20);}}),_0x161547;},Dt=(_0x45507b,_0x5f44b1,_0x171d12)=>{var _0x20aadb;let _0x375cb1;const _0x115fa0=_0x45507b['texCoord'];if(_0x115fa0){for(_0x375cb1=0x819*0x2+-0x2*-0x566+-0x1*0x1afe;_0x375cb1<_0x171d12['length'];++_0x375cb1)_0x5f44b1[_0x171d12[_0x375cb1]+'MapUv']=_0x115fa0;}const _0x5c9c45=[-0x909+-0x16ad+0x1fb6,-0x4*0x918+-0x2633+0x1*0x4a93],_0x36f61e=[-0xbb*-0x11+0x1424*0x1+0x6*-0x56d,0x5f+-0x885+0x827],_0x22c790=(_0x20aadb=_0x45507b['extensions'])==null?void(-0x12*-0x13a+-0x9d1*0x1+0x2b*-0x49):_0x20aadb['KHR_textur'+'e_transfor'+'m'];if(_0x22c790){const _0x5f1551=_0x22c790['offset']||_0x5c9c45,_0x5f33f6=_0x22c790['scale']||_0x36f61e,_0x49c3f6=_0x22c790['rotation']?-_0x22c790['rotation']*Y['RAD_TO_DEG']:0x1*0x7d5+0x61*-0xb+-0x3aa,_0x5f1bce=new J(_0x5f33f6[-0x1*-0x24d7+-0x238f+-0x148],_0x5f33f6[-0xea0+-0x1502+-0x1*-0x23a3]),_0x100517=new J(_0x5f1551[-0x1f96+-0x107f+0x3015],0x10e7*0x1+0x1f42+0x2*-0x1814-_0x5f33f6[0x1705+0xd*0x1f3+-0x305b]-_0x5f1551[-0x4*-0x6c0+-0x1*0xef3+-0x2*0x606]);for(_0x375cb1=-0x126f+0x238*0xa+-0x1*0x3c1;_0x375cb1<_0x171d12['length'];++_0x375cb1)_0x5f44b1[_0x171d12[_0x375cb1]+'MapTiling']=_0x5f1bce,_0x5f44b1[_0x171d12[_0x375cb1]+'MapOffset']=_0x100517,_0x5f44b1[_0x171d12[_0x375cb1]+('MapRotatio'+'n')]=_0x49c3f6;}},bF=(_0x59c9e1,_0x26b210,_0x1a0a44)=>{let _0x39c1b7,_0x224fa8;if(_0x59c9e1['hasOwnProp'+'erty']('diffuseFac'+'tor')?(_0x39c1b7=_0x59c9e1['diffuseFac'+'tor'],_0x26b210['diffuse']['set'](Math['pow'](_0x39c1b7[-0x14c8+-0x21*0xa+-0x2*-0xb09],(-0x45d*-0x7+-0x2*0xdd4+-0x2e2)/(-0x65*-0x46+0x115f+-0x8ff*0x5+0.20000000000000018)),Math['pow'](_0x39c1b7[0x3d*0x47+0x206e+-0x3158],(0x2245+-0x15e*-0x19+-0x4472)/(0x72+0xc0+-0x130+0.20000000000000018)),Math['pow'](_0x39c1b7[0xb06+-0x1*-0x13bb+-0x11*0x1cf],(0xb5*-0x13+0x27a*-0x8+0xe*0x260)/(0x3*0x85f+-0x66d*-0x6+-0x3fa9+0.20000000000000018))),_0x26b210['opacity']=_0x39c1b7[-0x12ec+-0x8b4*-0x1+-0x123*-0x9]):(_0x26b210['diffuse']['set'](0x952+0x73+-0x271*0x4,0x4a*-0xd+-0x6ff+0xac2,-0x2*0xa57+0x2077+-0xbc8),_0x26b210['opacity']=0x1c47*-0x1+-0x945+0x1*0x258d),_0x59c9e1['hasOwnProp'+'erty']('diffuseTex'+'ture')){const _0x33fdfd=_0x59c9e1['diffuseTex'+'ture'];_0x224fa8=_0x1a0a44[_0x33fdfd['index']],_0x26b210['diffuseMap']=_0x224fa8,_0x26b210['diffuseMap'+'Channel']='rgb',_0x26b210['opacityMap']=_0x224fa8,_0x26b210['opacityMap'+'Channel']='a',Dt(_0x33fdfd,_0x26b210,['diffuse','opacity']);}if(_0x26b210['useMetalne'+'ss']=!(0x2db*0x1+-0x799+-0xf*-0x51),_0x59c9e1['hasOwnProp'+'erty']('specularFa'+'ctor')?(_0x39c1b7=_0x59c9e1['specularFa'+'ctor'],_0x26b210['specular']['set'](Math['pow'](_0x39c1b7[0x1a6*0xd+-0x1670+0x1*0x102],(-0x1e41+-0x19bf+-0xb1*-0x51)/(-0x16e8+0xc38+0xab2+0.20000000000000018)),Math['pow'](_0x39c1b7[0x242a+0x129b*0x2+-0x495f],(-0x168+-0x653+-0x7bc*-0x1)/(-0x2c9*0x7+-0xf16+0x2297+0.20000000000000018)),Math['pow'](_0x39c1b7[-0x4*-0x79f+-0x2349+-0x1*-0x4cf],(-0x1*0x1729+-0xb5*-0x5+0x3*0x68b)/(-0xb8f+-0x13f9*0x1+0x1*0x1f8a+0.20000000000000018)))):_0x26b210['specular']['set'](-0x232a+-0x756+0x2a81,-0x6f+0x1122*0x1+-0x10b2,-0x3*-0x2fb+-0x95*-0xd+-0x1081),_0x59c9e1['hasOwnProp'+'erty']('glossiness'+'Factor')?_0x26b210['gloss']=_0x59c9e1['glossiness'+'Factor']:_0x26b210['gloss']=-0x14df+-0x1*-0x1706+-0x226,_0x59c9e1['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x105de2=_0x59c9e1['specularGl'+'ossinessTe'+'xture'];_0x26b210['specularMa'+'p']=_0x26b210['glossMap']=_0x1a0a44[_0x105de2['index']],_0x26b210['specularMa'+'pChannel']='rgb',_0x26b210['glossMapCh'+'annel']='a',Dt(_0x105de2,_0x26b210,['gloss','metalness']);}},AF=(_0x2f017d,_0x396ccf,_0x30c6d8)=>{if(_0x2f017d['hasOwnProp'+'erty']('clearcoatF'+'actor')?_0x396ccf['clearCoat']=_0x2f017d['clearcoatF'+'actor']*(0x156+-0x10f6+0xfa0+0.25):_0x396ccf['clearCoat']=0x1*0x1543+-0x836*-0x2+0x1*-0x25af,_0x2f017d['hasOwnProp'+'erty']('clearcoatT'+'exture')){const _0x5503d1=_0x2f017d['clearcoatT'+'exture'];_0x396ccf['clearCoatM'+'ap']=_0x30c6d8[_0x5503d1['index']],_0x396ccf['clearCoatM'+'apChannel']='r',Dt(_0x5503d1,_0x396ccf,['clearCoat']);}if(_0x2f017d['hasOwnProp'+'erty']('clearcoatR'+'oughnessFa'+'ctor')?_0x396ccf['clearCoatG'+'loss']=_0x2f017d['clearcoatR'+'oughnessFa'+'ctor']:_0x396ccf['clearCoatG'+'loss']=0x24c4+-0x3*0x36d+-0x1a7d,_0x2f017d['hasOwnProp'+'erty']('clearcoatR'+'oughnessTe'+'xture')){const _0x3faf2a=_0x2f017d['clearcoatR'+'oughnessTe'+'xture'];_0x396ccf['clearCoatG'+'lossMap']=_0x30c6d8[_0x3faf2a['index']],_0x396ccf['clearCoatG'+'lossMapCha'+'nnel']='g',Dt(_0x3faf2a,_0x396ccf,['clearCoatG'+'loss']);}if(_0x2f017d['hasOwnProp'+'erty']('clearcoatN'+'ormalTextu'+'re')){const _0x2777d2=_0x2f017d['clearcoatN'+'ormalTextu'+'re'];_0x396ccf['clearCoatN'+'ormalMap']=_0x30c6d8[_0x2777d2['index']],Dt(_0x2777d2,_0x396ccf,['clearCoatN'+'ormal']),_0x2777d2['hasOwnProp'+'erty']('scale')?_0x396ccf['clearCoatB'+'umpiness']=_0x2777d2['scale']:_0x396ccf['clearCoatB'+'umpiness']=-0x1*0x21a3+-0x61f*0x2+0x2de2;}_0x396ccf['clearCoatG'+'lossInvert']=!(-0xbc9*-0x1+0x1485+-0x1*0x204e);},CF=(_0x258116,_0x14c746,_0x36ac81)=>{_0x14c746['useLightin'+'g']=!(-0x10b7+-0x89+0x277*0x7),_0x14c746['emissive']['copy'](_0x14c746['diffuse']),_0x14c746['emissiveMa'+'p']=_0x14c746['diffuseMap'],_0x14c746['emissiveMa'+'pUv']=_0x14c746['diffuseMap'+'Uv'],_0x14c746['emissiveMa'+'pTiling']['copy'](_0x14c746['diffuseMap'+'Tiling']),_0x14c746['emissiveMa'+'pOffset']['copy'](_0x14c746['diffuseMap'+'Offset']),_0x14c746['emissiveMa'+'pRotation']=_0x14c746['diffuseMap'+'Rotation'],_0x14c746['emissiveMa'+'pChannel']=_0x14c746['diffuseMap'+'Channel'],_0x14c746['emissiveVe'+'rtexColor']=_0x14c746['diffuseVer'+'texColor'],_0x14c746['emissiveVe'+'rtexColorC'+'hannel']=_0x14c746['diffuseVer'+'texColorCh'+'annel'],_0x14c746['useLightin'+'g']=!(0xfa+0x1*0x6fb+-0x7f4),_0x14c746['useSkybox']=!(-0x137c+-0x5ff+-0x7*-0x3a4),_0x14c746['diffuse']['set'](-0x1f99+-0x1130+0x9c2*0x5,-0x1*0x214a+0x1077*-0x1+0x18e1*0x2,-0xe5*-0x1f+0xab*-0x2a+0x54*0x1),_0x14c746['diffuseMap']=null,_0x14c746['diffuseVer'+'texColor']=!(-0xf6e*-0x1+-0x34*-0xad+-0x3291);},PF=(_0xcde89c,_0x21a819,_0x3efe7a)=>{if(_0x21a819['useMetalne'+'ssSpecular'+'Color']=!(0xe*0x251+0x1*0x1391+-0x33ff),_0xcde89c['hasOwnProp'+'erty']('specularCo'+'lorTexture')&&(_0x21a819['specularMa'+'p']=_0x3efe7a[_0xcde89c['specularCo'+'lorTexture']['index']],_0x21a819['specularMa'+'pChannel']='rgb',Dt(_0xcde89c['specularCo'+'lorTexture'],_0x21a819,['specular'])),_0xcde89c['hasOwnProp'+'erty']('specularCo'+'lorFactor')){const _0x2791fa=_0xcde89c['specularCo'+'lorFactor'];_0x21a819['specular']['set'](Math['pow'](_0x2791fa[-0x1b6b*0x1+-0x985*-0x2+-0x861*-0x1],(0x1b9*0xe+-0xb8a+-0x431*0x3)/(-0x1d*-0x116+-0x1b14+0x178*-0x3+0.20000000000000018)),Math['pow'](_0x2791fa[-0x25c8+0xda2+-0xe5*-0x1b],(-0x2541+0x12ac*0x1+0x94b*0x2)/(0x26ca+-0x41b+-0x22ad+0.20000000000000018)),Math['pow'](_0x2791fa[-0x5b3*0x3+-0x13*0x1b7+0x3c*0xd4],(0x10b7+-0x9*0x1c9+-0xa5)/(-0x164e+0x8*-0xc8+0x1c90+0.20000000000000018)));}else _0x21a819['specular']['set'](-0x153+-0x1b9a+0x1cee,0x1f94+-0x701*0x5+-0x3f*-0xe,-0x53*-0x4d+-0x237+0x1*-0x16bf);_0xcde89c['hasOwnProp'+'erty']('specularFa'+'ctor')?_0x21a819['specularit'+'yFactor']=_0xcde89c['specularFa'+'ctor']:_0x21a819['specularit'+'yFactor']=-0x14e1+0x445+0x109d,_0xcde89c['hasOwnProp'+'erty']('specularTe'+'xture')&&(_0x21a819['specularit'+'yFactorMap'+'Channel']='a',_0x21a819['specularit'+'yFactorMap']=_0x3efe7a[_0xcde89c['specularTe'+'xture']['index']],Dt(_0xcde89c['specularTe'+'xture'],_0x21a819,['specularit'+'yFactor']));},MF=(_0x34309f,_0x5c5e28,_0x24e41d)=>{_0x34309f['hasOwnProp'+'erty']('ior')&&(_0x5c5e28['refraction'+'Index']=(0x709*0x2+-0xd6e+0xa3*-0x1)/_0x34309f['ior']);},DF=(_0x420075,_0x159dc3,_0x42dfb0)=>{_0x420075['hasOwnProp'+'erty']('dispersion')&&(_0x159dc3['dispersion']=_0x420075['dispersion']);},IF=(_0x3b73b3,_0x540369,_0x1a9630)=>{_0x540369['blendType']=Zs,_0x540369['useDynamic'+'Refraction']=!(-0xffa+-0xeb4+0x1eae),_0x3b73b3['hasOwnProp'+'erty']('transmissi'+'onFactor')&&(_0x540369['refraction']=_0x3b73b3['transmissi'+'onFactor']),_0x3b73b3['hasOwnProp'+'erty']('transmissi'+'onTexture')&&(_0x540369['refraction'+'MapChannel']='r',_0x540369['refraction'+'Map']=_0x1a9630[_0x3b73b3['transmissi'+'onTexture']['index']],Dt(_0x3b73b3['transmissi'+'onTexture'],_0x540369,['refraction']));},LF=(_0x3b2cab,_0x5d78ba,_0xf855e7)=>{if(_0x5d78ba['useSheen']=!(0x1121+0x1ccc+-0x2ded),_0x3b2cab['hasOwnProp'+'erty']('sheenColor'+'Factor')){const _0x184ace=_0x3b2cab['sheenColor'+'Factor'];_0x5d78ba['sheen']['set'](Math['pow'](_0x184ace[-0x182d+-0xde4+0x2611],(-0x22*0x7+-0x21c1+0x22b0)/(0x8*0x3c7+-0x1a44+0xa*-0x65+0.20000000000000018)),Math['pow'](_0x184ace[0x214d+-0x66*-0x53+-0x425e],(-0xf70+-0xd*-0x11f+0xde)/(0x249f*-0x1+0xbb*0x34+0x15b*-0x1+0.20000000000000018)),Math['pow'](_0x184ace[-0x452+0x25a2+0xae*-0x31],(-0x11*-0x239+0x10c7+-0x368f)/(-0x1c27*-0x1+0x155f*0x1+0x3184*-0x1+0.20000000000000018)));}else _0x5d78ba['sheen']['set'](-0x1*0x1bbd+0x4*0x709+-0x66,0xcf5+0xde9+-0x1*0x1add,0x2*0x1139+0x1*-0xad2+-0x179f*0x1);_0x3b2cab['hasOwnProp'+'erty']('sheenColor'+'Texture')&&(_0x5d78ba['sheenMap']=_0xf855e7[_0x3b2cab['sheenColor'+'Texture']['index']],Dt(_0x3b2cab['sheenColor'+'Texture'],_0x5d78ba,['sheen'])),_0x5d78ba['sheenGloss']=_0x3b2cab['hasOwnProp'+'erty']('sheenRough'+'nessFactor')?_0x3b2cab['sheenRough'+'nessFactor']:0x587+-0x26a*0xa+-0x5*-0x3b9,_0x3b2cab['hasOwnProp'+'erty']('sheenRough'+'nessTextur'+'e')&&(_0x5d78ba['sheenGloss'+'Map']=_0xf855e7[_0x3b2cab['sheenRough'+'nessTextur'+'e']['index']],_0x5d78ba['sheenGloss'+'MapChannel']='a',Dt(_0x3b2cab['sheenRough'+'nessTextur'+'e'],_0x5d78ba,['sheenGloss'])),_0x5d78ba['sheenGloss'+'Invert']=!(0x185*-0x8+0x1*0x2311+0x1*-0x16e9);},RF=(_0x279bd1,_0x58fab3,_0xc53c04)=>{if(_0x58fab3['blendType']=Zs,_0x58fab3['useDynamic'+'Refraction']=!(0x712+-0x677+0x1f*-0x5),_0x279bd1['hasOwnProp'+'erty']('thicknessF'+'actor')&&(_0x58fab3['thickness']=_0x279bd1['thicknessF'+'actor']),_0x279bd1['hasOwnProp'+'erty']('thicknessT'+'exture')&&(_0x58fab3['thicknessM'+'ap']=_0xc53c04[_0x279bd1['thicknessT'+'exture']['index']],_0x58fab3['thicknessM'+'apChannel']='g',Dt(_0x279bd1['thicknessT'+'exture'],_0x58fab3,['thickness'])),_0x279bd1['hasOwnProp'+'erty']('attenuatio'+'nDistance')&&(_0x58fab3['attenuatio'+'nDistance']=_0x279bd1['attenuatio'+'nDistance']),_0x279bd1['hasOwnProp'+'erty']('attenuatio'+'nColor')){const _0x2e3716=_0x279bd1['attenuatio'+'nColor'];_0x58fab3['attenuatio'+'n']['set'](Math['pow'](_0x2e3716[0x13be+-0x1*-0xee4+-0x22a2],(0x10fe+0x98d*0x4+-0x3731)/(0x1*-0x4fe+-0x8*0x49d+0x29e8+0.20000000000000018)),Math['pow'](_0x2e3716[-0x14fc+0x667+0xe96],(-0x26d8+0x20e0+0x5f9)/(-0x211*-0x1+0x16*0x107+0x18a9*-0x1+0.20000000000000018)),Math['pow'](_0x2e3716[-0x1*-0xdb8+0xe19+-0x1*0x1bcf],(-0x70*-0x47+-0x16da+-0x1*0x835)/(0x945+0x1*0x1294+0x1*-0x1bd7+0.20000000000000018)));}},OF=(_0x2459ae,_0x29bd1e,_0x4f54d1)=>{_0x2459ae['hasOwnProp'+'erty']('emissiveSt'+'rength')&&(_0x29bd1e['emissiveIn'+'tensity']=_0x2459ae['emissiveSt'+'rength']);},FF=(_0x4df28b,_0x5c7a33,_0x5d2e8a)=>{_0x5c7a33['useIridesc'+'ence']=!(-0x728+-0x1f*-0x5f+0x7*-0x9f),_0x4df28b['hasOwnProp'+'erty']('iridescenc'+'eFactor')&&(_0x5c7a33['iridescenc'+'e']=_0x4df28b['iridescenc'+'eFactor']),_0x4df28b['hasOwnProp'+'erty']('iridescenc'+'eTexture')&&(_0x5c7a33['iridescenc'+'eMapChanne'+'l']='r',_0x5c7a33['iridescenc'+'eMap']=_0x5d2e8a[_0x4df28b['iridescenc'+'eTexture']['index']],Dt(_0x4df28b['iridescenc'+'eTexture'],_0x5c7a33,['iridescenc'+'e'])),_0x4df28b['hasOwnProp'+'erty']('iridescenc'+'eIor')&&(_0x5c7a33['iridescenc'+'eRefractio'+'nIndex']=_0x4df28b['iridescenc'+'eIor']),_0x4df28b['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Minimum')&&(_0x5c7a33['iridescenc'+'eThickness'+'Min']=_0x4df28b['iridescenc'+'eThickness'+'Minimum']),_0x4df28b['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Maximum')&&(_0x5c7a33['iridescenc'+'eThickness'+'Max']=_0x4df28b['iridescenc'+'eThickness'+'Maximum']),_0x4df28b['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Texture')&&(_0x5c7a33['iridescenc'+'eThickness'+'MapChannel']='g',_0x5c7a33['iridescenc'+'eThickness'+'Map']=_0x5d2e8a[_0x4df28b['iridescenc'+'eThickness'+'Texture']['index']],Dt(_0x4df28b['iridescenc'+'eThickness'+'Texture'],_0x5c7a33,['iridescenc'+'eThickness']));},NF=(_0x23c5a3,_0x1eac03,_0xfecddd)=>{if(_0x1eac03['enableGGXS'+'pecular']=!(-0x13c*-0x2+0xd47+-0xfbf),_0x23c5a3['hasOwnProp'+'erty']('anisotropy'+'Strength')?_0x1eac03['anisotropy'+'Intensity']=_0x23c5a3['anisotropy'+'Strength']:_0x1eac03['anisotropy'+'Intensity']=0x989+-0x59e+-0x1*0x3eb,_0x23c5a3['hasOwnProp'+'erty']('anisotropy'+'Texture')){const _0x55e6ed=_0x23c5a3['anisotropy'+'Texture'];_0x1eac03['anisotropy'+'Map']=_0xfecddd[_0x55e6ed['index']],Dt(_0x55e6ed,_0x1eac03,['anisotropy']);}_0x23c5a3['hasOwnProp'+'erty']('anisotropy'+'Rotation')?_0x1eac03['anisotropy'+'Rotation']=_0x23c5a3['anisotropy'+'Rotation']*Y['RAD_TO_DEG']:_0x1eac03['anisotropy'+'Rotation']=-0xb*-0x239+-0x1da3+0x530*0x1;},Vv=(_0x17bd4c,_0x899941)=>{const _0x1417fb=new Ut();_0x17bd4c['hasOwnProp'+'erty']('name')&&(_0x1417fb['name']=_0x17bd4c['name']),_0x1417fb['occludeSpe'+'cular']=id,_0x1417fb['diffuseVer'+'texColor']=!(0x5*-0x1a3+0x633*0x3+-0xa6a),_0x1417fb['specularTi'+'nt']=!(-0x1*0x15+0x1bda+0x1*-0x1bc5),_0x1417fb['specularVe'+'rtexColor']=!(-0xf59+-0x126+0x29*0x67),_0x1417fb['specular']['set'](-0x92f+0x1*0x16bd+-0x1*0xd8d,0x1*-0xa34+0x75*0x10+0x39*0xd,-0x75b*0x2+0x150*0x9+0x2e7),_0x1417fb['gloss']=0x9*-0x1ca+0x14de*0x1+-0x4c3,_0x1417fb['glossInver'+'t']=!(-0x2b*0x95+0x16b0+-0x1*-0x257),_0x1417fb['useMetalne'+'ss']=!(-0x156c+0x417*-0x1+-0x15*-0x137);let _0xe44fbf,_0x130d2f;if(_0x17bd4c['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x4eedc1=_0x17bd4c['pbrMetalli'+'cRoughness'];if(_0x4eedc1['hasOwnProp'+'erty']('baseColorF'+'actor')&&(_0xe44fbf=_0x4eedc1['baseColorF'+'actor'],_0x1417fb['diffuse']['set'](Math['pow'](_0xe44fbf[0x21af*-0x1+-0x4*0x654+0x55d*0xb],(-0x1638*0x1+0x533*-0x3+0x25d2)/(-0x1*0x3d2+-0x153e*0x1+0x1912+0.20000000000000018)),Math['pow'](_0xe44fbf[-0x68e+0xaa0+-0x15b*0x3],(-0x26b9+-0x1e34+0x44ee)/(-0x3*0x25+0x522+-0x1*0x4b1+0.20000000000000018)),Math['pow'](_0xe44fbf[-0xcf6+-0x1d36+0x2a2e],(0xda4*0x2+0x1*0x2660+-0x41a7)/(-0xfe3+0x8e3+0x702+0.20000000000000018))),_0x1417fb['opacity']=_0xe44fbf[0x10ea+-0x14*0x72+-0x7ff]),_0x4eedc1['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x1081fc=_0x4eedc1['baseColorT'+'exture'];_0x130d2f=_0x899941[_0x1081fc['index']],_0x1417fb['diffuseMap']=_0x130d2f,_0x1417fb['diffuseMap'+'Channel']='rgb',_0x1417fb['opacityMap']=_0x130d2f,_0x1417fb['opacityMap'+'Channel']='a',Dt(_0x1081fc,_0x1417fb,['diffuse','opacity']);}if(_0x4eedc1['hasOwnProp'+'erty']('metallicFa'+'ctor')&&(_0x1417fb['metalness']=_0x4eedc1['metallicFa'+'ctor']),_0x4eedc1['hasOwnProp'+'erty']('roughnessF'+'actor')&&(_0x1417fb['gloss']=_0x4eedc1['roughnessF'+'actor']),_0x4eedc1['hasOwnProp'+'erty']('metallicRo'+'ughnessTex'+'ture')){const _0x45cf13=_0x4eedc1['metallicRo'+'ughnessTex'+'ture'];_0x1417fb['metalnessM'+'ap']=_0x1417fb['glossMap']=_0x899941[_0x45cf13['index']],_0x1417fb['metalnessM'+'apChannel']='b',_0x1417fb['glossMapCh'+'annel']='g',Dt(_0x45cf13,_0x1417fb,['gloss','metalness']);}}if(_0x17bd4c['hasOwnProp'+'erty']('normalText'+'ure')){const _0x47d386=_0x17bd4c['normalText'+'ure'];_0x1417fb['normalMap']=_0x899941[_0x47d386['index']],Dt(_0x47d386,_0x1417fb,['normal']),_0x47d386['hasOwnProp'+'erty']('scale')&&(_0x1417fb['bumpiness']=_0x47d386['scale']);}if(_0x17bd4c['hasOwnProp'+'erty']('occlusionT'+'exture')){const _0x3c796e=_0x17bd4c['occlusionT'+'exture'];_0x1417fb['aoMap']=_0x899941[_0x3c796e['index']],_0x1417fb['aoMapChann'+'el']='r',Dt(_0x3c796e,_0x1417fb,['ao']);}if(_0x17bd4c['hasOwnProp'+'erty']('emissiveFa'+'ctor')&&(_0xe44fbf=_0x17bd4c['emissiveFa'+'ctor'],_0x1417fb['emissive']['set'](Math['pow'](_0xe44fbf[0x2*0xf97+-0x829*0x1+-0x47*0x53],(0x141*-0xa+-0x1*0x1eb5+0x2b40)/(-0xc87*0x1+-0x3*0x1b5+0x11a8+0.20000000000000018)),Math['pow'](_0xe44fbf[0x1*0x16e2+0x17*-0x164+-0x309*-0x3],(0xbdd*0x1+-0x687+0x7*-0xc3)/(0x13d0+0x15a0+0x2*-0x14b7+0.20000000000000018)),Math['pow'](_0xe44fbf[-0x2231*-0x1+0x7*0x4dd+-0x443a*0x1],(0x30f*-0x6+-0x1567*-0x1+-0x1*0x30c)/(0x189*-0x17+0x1e01*-0x1+0x9*0x742+0.20000000000000018)))),_0x17bd4c['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x5553d8=_0x17bd4c['emissiveTe'+'xture'];_0x1417fb['emissiveMa'+'p']=_0x899941[_0x5553d8['index']],Dt(_0x5553d8,_0x1417fb,['emissive']);}if(_0x17bd4c['hasOwnProp'+'erty']('alphaMode'))switch(_0x17bd4c['alphaMode']){case'MASK':_0x1417fb['blendType']=Cs,_0x17bd4c['hasOwnProp'+'erty']('alphaCutof'+'f')?_0x1417fb['alphaTest']=_0x17bd4c['alphaCutof'+'f']:_0x1417fb['alphaTest']=0x1*0x1f3f+0x4*-0x3ec+-0xf8f+0.5;break;case'BLEND':_0x1417fb['blendType']=Zs,_0x1417fb['depthWrite']=!(-0xfc+-0x5a6*-0x3+-0xff5);break;default:case'OPAQUE':_0x1417fb['blendType']=Cs;break;}else _0x1417fb['blendType']=Cs;_0x17bd4c['hasOwnProp'+'erty']('doubleSide'+'d')?(_0x1417fb['twoSidedLi'+'ghting']=_0x17bd4c['doubleSide'+'d'],_0x1417fb['cull']=_0x17bd4c['doubleSide'+'d']?bt:ca):(_0x1417fb['twoSidedLi'+'ghting']=!(0x1*-0x26ba+-0x9b6+0x3071),_0x1417fb['cull']=ca);const _0x5c23f1={'KHR_materials_clearcoat':AF,'KHR_materials_emissive_strength':OF,'KHR_materials_ior':MF,'KHR_materials_dispersion':DF,'KHR_materials_iridescence':FF,'KHR_materials_pbrSpecularGlossiness':bF,'KHR_materials_sheen':LF,'KHR_materials_specular':PF,'KHR_materials_transmission':IF,'KHR_materials_unlit':CF,'KHR_materials_volume':RF,'KHR_materials_anisotropy':NF};if(_0x17bd4c['hasOwnProp'+'erty']('extensions'))for(const _0x4d1ea2 in _0x17bd4c['extensions']){const _0x3c867c=_0x5c23f1[_0x4d1ea2];_0x3c867c!==void(-0x32e*-0x7+0x4*0x88f+-0x387e)&&_0x3c867c(_0x17bd4c['extensions'][_0x4d1ea2],_0x1417fb,_0x899941);}return _0x1417fb['update'](),_0x1417fb;},kF=(_0x1b22d1,_0x500d3c,_0x3eed77,_0x53b579,_0x2015c1,_0x5ce7a7,_0x405673)=>{const _0x80c790=_0x18e602=>new uh(nl(_0x18e602['type']),xn(_0x18e602,_0x53b579)),_0x17fd68={'STEP':iv,'LINEAR':Xf,'CUBICSPLINE':qf},_0x45d268={},_0x2090a5={},_0x409a04={};let _0x12e6e1=-0x9e6+-0x2351+0x2d38,_0x40c2c8;for(_0x40c2c8=0x11b*0x4+-0xbdd+0x3*0x27b;_0x40c2c8<_0x1b22d1['samplers']['length'];++_0x40c2c8){const _0x39fe19=_0x1b22d1['samplers'][_0x40c2c8];_0x45d268['hasOwnProp'+'erty'](_0x39fe19['input'])||(_0x45d268[_0x39fe19['input']]=_0x80c790(_0x3eed77[_0x39fe19['input']])),_0x2090a5['hasOwnProp'+'erty'](_0x39fe19['output'])||(_0x2090a5[_0x39fe19['output']]=_0x80c790(_0x3eed77[_0x39fe19['output']]));const _0x568caf=_0x39fe19['hasOwnProp'+'erty']('interpolat'+'ion')&&_0x17fd68['hasOwnProp'+'erty'](_0x39fe19['interpolat'+'ion'])?_0x17fd68[_0x39fe19['interpolat'+'ion']]:Xf,_0xe861d4={'paths':[],'input':_0x39fe19['input'],'output':_0x39fe19['output'],'interpolation':_0x568caf};_0x409a04[_0x40c2c8]=_0xe861d4;}const _0x573e43=[],_0x4cd72f={'translation':'localPosit'+'ion','rotation':'localRotat'+'ion','scale':'localScale'},_0x3f33ab=_0x5f30f8=>{const _0x154697=[];for(;_0x5f30f8;)_0x154697['unshift'](_0x5f30f8['name']),_0x5f30f8=_0x5f30f8['parent'];return _0x154697;},_0x18eb20=(_0x12be46,_0x54a156,_0x109665)=>{const _0x15899a=_0x2090a5[_0x12be46['output']];if(!_0x15899a){w['warn']('glb-parser'+':\x20No\x20outpu'+'t\x20data\x20is\x20'+'available\x20'+'for\x20the\x20mo'+'rph\x20target'+'\x20curve\x20('+_0x109665+('/graph/wei'+'ghts).\x20Ski'+'pping.'));return;}let _0x265507;if(_0x5ce7a7&&_0x5ce7a7[_0x54a156['mesh']]){const _0x2345f6=_0x5ce7a7[_0x54a156['mesh']];_0x2345f6['hasOwnProp'+'erty']('extras')&&_0x2345f6['extras']['hasOwnProp'+'erty']('targetName'+'s')&&(_0x265507=_0x2345f6['extras']['targetName'+'s']);}const _0x1855de=_0x15899a['data'],_0x4a949a=_0x1855de['length']/_0x45d268[_0x12be46['input']]['data']['length'],_0x2b3b13=_0x1855de['length']/_0x4a949a,_0x2d7e28=_0x2b3b13*(-0x1c8d+-0x7c0+0x2451),_0x4bcde9=new ArrayBuffer(_0x2d7e28*_0x4a949a);for(let _0xbb7e8f=-0x1f6*-0xe+0x1bf8+-0x376c;_0xbb7e8f<_0x4a949a;_0xbb7e8f++){const _0x3b6986=new Float32Array(_0x4bcde9,_0x2d7e28*_0xbb7e8f,_0x2b3b13);for(let _0x3dae68=0xf63+0x3fd+-0x1360;_0x3dae68<_0x2b3b13;_0x3dae68++)_0x3b6986[_0x3dae68]=_0x1855de[_0x3dae68*_0x4a949a+_0xbb7e8f];const _0x4a782d=new uh(0x1ebd+0x10fa*-0x1+0x6*-0x24b,_0x3b6986),_0x13f6dd=_0x265507!=null&&_0x265507[_0xbb7e8f]?'name.'+_0x265507[_0xbb7e8f]:_0xbb7e8f;_0x2090a5[-_0x12e6e1]=_0x4a782d;const _0x205e97={'paths':[{'entityPath':_0x109665,'component':'graph','propertyPath':['weight.'+_0x13f6dd]}],'input':_0x12be46['input'],'output':-_0x12e6e1,'interpolation':_0x12be46['interpolat'+'ion']};_0x12e6e1++,_0x409a04['morphCurve'+'-'+_0x40c2c8+'-'+_0xbb7e8f]=_0x205e97;}};for(_0x40c2c8=0x1cff+0x239*-0x11+0x8ca;_0x40c2c8<_0x1b22d1['channels']['length'];++_0x40c2c8){const _0x4aaca8=_0x1b22d1['channels'][_0x40c2c8],_0x323d6c=_0x4aaca8['target'],_0x557860=_0x409a04[_0x4aaca8['sampler']],_0x3628cc=_0x2015c1[_0x323d6c['node']],_0x4eb7fd=_0x405673[_0x323d6c['node']],_0x80d8ba=_0x3f33ab(_0x3628cc);_0x323d6c['path']['startsWith']('weights')?(_0x18eb20(_0x557860,_0x4eb7fd,_0x80d8ba),_0x409a04[_0x4aaca8['sampler']]['morphCurve']=!(-0x24b1+0x4*0x556+0xf59)):_0x557860['paths']['push']({'entityPath':_0x80d8ba,'component':'graph','propertyPath':[_0x4cd72f[_0x323d6c['path']]]});}const _0x267970=[],_0x3a99be=[],_0x17995f=[];for(const _0x3371ed in _0x45d268)_0x267970['push'](_0x45d268[_0x3371ed]),_0x45d268[_0x3371ed]=_0x267970['length']-(0x20e2+-0x3ec*-0x4+-0x3091);for(const _0x12272d in _0x2090a5)_0x3a99be['push'](_0x2090a5[_0x12272d]),_0x2090a5[_0x12272d]=_0x3a99be['length']-(0x14b0+0x1*-0x10bb+-0x3f4);for(const _0x374e1f in _0x409a04){const _0x2594b1=_0x409a04[_0x374e1f];_0x2594b1['morphCurve']||(_0x17995f['push'](new Uv(_0x2594b1['paths'],_0x45d268[_0x2594b1['input']],_0x2090a5[_0x2594b1['output']],_0x2594b1['interpolat'+'ion'])),_0x2594b1['paths']['length']>0x233c+0xb*-0x4f+0x1ad*-0x13&&_0x2594b1['paths'][0x2c4+-0x1c0f+0x194b]['propertyPa'+'th'][0x1fe1*0x1+0x1*-0xf3d+-0x10a4]==='localRotat'+'ion'&&_0x2594b1['interpolat'+'ion']!==qf&&_0x573e43['push'](_0x17995f[_0x17995f['length']-(0x1*0x1ccd+0xf59+-0x2c25)]['output']));}_0x573e43['sort']();let _0x201f60=null,_0x2c00d5;for(_0x40c2c8=-0x1306+-0x14*0x192+-0x2*-0x1937;_0x40c2c8<_0x573e43['length'];++_0x40c2c8){const _0xe1958f=_0x573e43[_0x40c2c8];if(_0x40c2c8===0xf38+0x35f*0x1+-0x1297*0x1||_0xe1958f!==_0x201f60){if(_0x2c00d5=_0x3a99be[_0xe1958f],_0x2c00d5['components']===-0x1f6*0xd+0x5*0x34d+0x901*0x1){const _0x129bcd=_0x2c00d5['data'],_0x9551b4=_0x129bcd['length']-(-0xbab+0x29*-0x9e+0x11*0x22d);for(let _0x25b3ea=0x531+0x234c+-0x287d;_0x25b3ea<_0x9551b4;_0x25b3ea+=-0x21*-0xbe+-0xbd7+-0xca3)_0x129bcd[_0x25b3ea+(-0x17*-0x53+0x1c13+0xc*-0x2f6)]*_0x129bcd[_0x25b3ea+(-0xc2c*0x3+-0x6*-0x2+-0x5*-0x74c)]+_0x129bcd[_0x25b3ea+(-0x22e4+-0x3c1*0x7+0x3d2c)]*_0x129bcd[_0x25b3ea+(0x110+0x3a6*0x3+0x9*-0x155)]+_0x129bcd[_0x25b3ea+(-0x8f5+-0xd0+-0x9c7*-0x1)]*_0x129bcd[_0x25b3ea+(-0x3*0xaa6+0xc2f*0x2+-0xe*-0x8b)]+_0x129bcd[_0x25b3ea+(0x1967+0x21c3+0x3b27*-0x1)]*_0x129bcd[_0x25b3ea+(-0x71*-0xd+0x1fa6+-0x255c)]<0x72a+-0x251*0x3+-0xb*0x5&&(_0x129bcd[_0x25b3ea+(0x1d26+0x2142+-0x16*0x2d6)]*=-(-0x1943+-0x2ba+-0x1bfe*-0x1),_0x129bcd[_0x25b3ea+(-0x2*-0x56b+-0x5*-0x14b+-0x8*0x229)]*=-(0x1d78+-0x7*-0x103+-0x923*0x4),_0x129bcd[_0x25b3ea+(-0x1130+-0x11eb+0x2321)]*=-(0x20b1+-0x74e+-0x1962),_0x129bcd[_0x25b3ea+(-0xa9*0x11+0x59+0xae7)]*=-(0x1871+0x5c1+-0x1e31));}_0x201f60=_0xe1958f;}}let _0x2a621a=0x1f9b+-0x1bd6+0x1*-0x3c5;for(_0x40c2c8=-0x2d*0x7c+0x1*-0x1123+-0x1*-0x26ef;_0x40c2c8<_0x267970['length'];_0x40c2c8++)_0x2c00d5=_0x267970[_0x40c2c8]['_data'],_0x2a621a=Math['max'](_0x2a621a,_0x2c00d5['length']===-0x687*-0x1+0x1413+-0x1a9a?0xcc3+-0x1*-0xb9c+-0x185f:_0x2c00d5[_0x2c00d5['length']-(-0x988+-0x204f*0x1+-0x1a*-0x19c)]);return new Zi(_0x1b22d1['hasOwnProp'+'erty']('name')?_0x1b22d1['name']:'animation_'+_0x500d3c,_0x2a621a,_0x267970,_0x3a99be,_0x17995f);},_c=new te(),qa=new D(),UF=(_0x46764d,_0x5ca8ae,_0xc8ab56)=>{const _0x481df3=new Ie();if(_0x46764d['hasOwnProp'+'erty']('name')&&_0x46764d['name']['length']>0x193d+0x2fa*-0x2+-0x1349?_0x481df3['name']=_0x46764d['name']:_0x481df3['name']='node_'+_0x5ca8ae,_0x46764d['hasOwnProp'+'erty']('matrix')&&(_c['data']['set'](_0x46764d['matrix']),_c['getTransla'+'tion'](qa),_0x481df3['setLocalPo'+'sition'](qa),_c['getEulerAn'+'gles'](qa),_0x481df3['setLocalEu'+'lerAngles'](qa),_c['getScale'](qa),_0x481df3['setLocalSc'+'ale'](qa)),_0x46764d['hasOwnProp'+'erty']('rotation')){const _0x3055f7=_0x46764d['rotation'];_0x481df3['setLocalRo'+'tation'](_0x3055f7[-0xb5*-0x2b+0x756+-0x25bd],_0x3055f7[0x11dd+-0x758+0xa84*-0x1],_0x3055f7[0x11b7*-0x1+-0x73c*-0x4+-0xb37],_0x3055f7[-0x1c03+0x11fc+-0xa*-0x101]);}if(_0x46764d['hasOwnProp'+'erty']('translatio'+'n')){const _0x295e44=_0x46764d['translatio'+'n'];_0x481df3['setLocalPo'+'sition'](_0x295e44[0x1*0x60f+0x8e4+-0xef3],_0x295e44[-0x9*-0xab+0x4*-0x7f7+-0x89e*-0x3],_0x295e44[0x1291+0x23f1+0x368*-0x10]);}if(_0x46764d['hasOwnProp'+'erty']('scale')){const _0x3cc5dc=_0x46764d['scale'];_0x481df3['setLocalSc'+'ale'](_0x3cc5dc[0x1061+0x266+-0x12c7],_0x3cc5dc[-0x4c*-0x3+0x1f9*-0x13+0x2498],_0x3cc5dc[0x5e8+-0x801+-0x31*-0xb]);}return _0x46764d['hasOwnProp'+'erty']('extensions')&&_0x46764d['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']&&_0xc8ab56['set'](_0x46764d,{'ext':_0x46764d['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']}),_0x481df3;},BF=(_0x1fa100,_0x384922)=>{const _0x425e37=_0x1fa100['type']==='orthograph'+'ic'?gn:ni,_0x29c206=_0x425e37===gn?_0x1fa100['orthograph'+'ic']:_0x1fa100['perspectiv'+'e'],_0x5d250a={'enabled':!(0x122*-0x2+-0x16*-0x110+-0x151b*0x1),'projection':_0x425e37,'nearClip':_0x29c206['znear'],'aspectRatioMode':kp};_0x29c206['zfar']&&(_0x5d250a['farClip']=_0x29c206['zfar']),_0x425e37===gn?(_0x5d250a['orthoHeigh'+'t']=(0x26f7+0x1a93+-0x418a+0.5)*_0x29c206['ymag'],_0x29c206['ymag']&&(_0x5d250a['aspectRati'+'oMode']=Nf,_0x5d250a['aspectRati'+'o']=_0x29c206['xmag']/_0x29c206['ymag'])):(_0x5d250a['fov']=_0x29c206['yfov']*Y['RAD_TO_DEG'],_0x29c206['aspectRati'+'o']&&(_0x5d250a['aspectRati'+'oMode']=Nf,_0x5d250a['aspectRati'+'o']=_0x29c206['aspectRati'+'o']));const _0x421c4d=new lt(_0x1fa100['name']);return _0x421c4d['addCompone'+'nt']('camera',_0x5d250a),_0x421c4d;},zF=(_0x4e8d27,_0x1a6cb7)=>{const _0x1a29e6={'enabled':!(0x6d*-0x2f+-0x22c6*-0x1+-0x761*0x2),'type':_0x4e8d27['type']==='point'?'omni':_0x4e8d27['type'],'color':_0x4e8d27['hasOwnProp'+'erty']('color')?new ie(_0x4e8d27['color']):ie['WHITE'],'range':_0x4e8d27['hasOwnProp'+'erty']('range')?_0x4e8d27['range']:0x283f+-0x13*0x36d+-0x3*-0x154d,'falloffMode':Sy,'intensity':_0x4e8d27['hasOwnProp'+'erty']('intensity')?Y['clamp'](_0x4e8d27['intensity'],-0x7*-0x2c7+0x18*0xab+0xbd3*-0x3,0x20a3+0x1b42+-0x3be3):-0x124f+-0x17*0x7f+0x1db9};_0x4e8d27['hasOwnProp'+'erty']('spot')&&(_0x1a29e6['innerConeA'+'ngle']=_0x4e8d27['spot']['hasOwnProp'+'erty']('innerConeA'+'ngle')?_0x4e8d27['spot']['innerConeA'+'ngle']*Y['RAD_TO_DEG']:-0x1*0xbf1+0x801*0x1+0x6*0xa8,_0x1a29e6['outerConeA'+'ngle']=_0x4e8d27['spot']['hasOwnProp'+'erty']('outerConeA'+'ngle')?_0x4e8d27['spot']['outerConeA'+'ngle']*Y['RAD_TO_DEG']:Math['PI']/(-0x1a5c+0x68a+-0x2*-0x9eb)),_0x4e8d27['hasOwnProp'+'erty']('intensity')&&(_0x1a29e6['luminance']=_0x4e8d27['intensity']*tl['getLightUn'+'itConversi'+'on'](zf[_0x1a29e6['type']],_0x1a29e6['outerConeA'+'ngle'],_0x1a29e6['innerConeA'+'ngle']));const _0x30177c=new lt(_0x1a6cb7['name']);return _0x30177c['rotateLoca'+'l'](0x1*0x699+-0x1*0xc2e+0x5ef,-0x1a10+0xac*0x9+-0x1*-0x1404,0x1*0x20e3+-0x2457+0x374),_0x30177c['addCompone'+'nt']('light',_0x1a29e6),_0x30177c;},VF=(_0x4b222f,_0x1dbe64,_0x4a678d,_0x21a575)=>{if(!_0x1dbe64['hasOwnProp'+'erty']('skins')||_0x1dbe64['skins']['length']===-0x1152+0x203a+-0x35*0x48)return[];const _0x19ea5f=new Map();return _0x1dbe64['skins']['map'](_0x3adc06=>TF(_0x4b222f,_0x3adc06,_0x1dbe64['accessors'],_0x21a575,_0x4a678d,_0x19ea5f));},GF=(_0xf3dcab,_0x4405fb,_0x14e440,_0x37655d)=>{var _0x227beb,_0x49e579,_0x35bbbe;const _0x3305fb={},_0x4388d6={},_0x1938e2={},_0xf6de01=[];return{'meshes':!_0x37655d['skipMeshes']&&((_0x227beb=_0x4405fb==null?void(-0xcaa+0x2*0xb9b+-0xa8c):_0x4405fb['meshes'])==null?void(-0x246b+0x1b6+0x22b5):_0x227beb['length'])&&((_0x49e579=_0x4405fb==null?void(-0x86*0x40+0x544+0x1c3c):_0x4405fb['accessors'])==null?void(0x1289+-0x1149+0x20*-0xa):_0x49e579['length'])&&((_0x35bbbe=_0x4405fb==null?void(0x1477+0x2395+-0x380c):_0x4405fb['bufferView'+'s'])==null?void(0x758+-0x1ac3+0x3*0x679):_0x35bbbe['length'])?_0x4405fb['meshes']['map'](_0x275d41=>EF(_0xf3dcab,_0x275d41,_0x4405fb['accessors'],_0x14e440,_0x3305fb,_0x4388d6,_0x1938e2,_0x37655d,_0xf6de01)):[],'meshVariants':_0x4388d6,'meshDefaultMaterials':_0x1938e2,'promises':_0xf6de01};},HF=(_0x2dea7c,_0x5b93e2,_0x102695)=>{var _0x237526,_0x185833,_0x5f275e;if(!_0x2dea7c['hasOwnProp'+'erty']('materials')||_0x2dea7c['materials']['length']===-0x5b+0x1e69+0x1*-0x1e0e)return[];const _0x2ccffe=(_0x237526=_0x102695==null?void(-0x33*0x22+0x10e3+0x35f*-0x3):_0x102695['material'])==null?void(-0x1d*-0xc1+-0x1a98+0x4bb):_0x237526['preprocess'],_0x551ba2=((_0x185833=_0x102695==null?void(0x1*-0x17fb+-0x1*-0x131b+0x4e0):_0x102695['material'])==null?void(0xb93*-0x1+-0x1*-0x108b+0x18*-0x35):_0x185833['process'])??Vv,_0x4e3e3b=(_0x5f275e=_0x102695==null?void(0xde7*-0x1+-0x380*0x2+0x1*0x14e7):_0x102695['material'])==null?void(0xac8+-0x125f*0x2+0x19f6):_0x5f275e['postproces'+'s'];return _0x2dea7c['materials']['map'](_0x435a5a=>{_0x2ccffe&&_0x2ccffe(_0x435a5a);const _0x42ef02=_0x551ba2(_0x435a5a,_0x5b93e2);return _0x4e3e3b&&_0x4e3e3b(_0x435a5a,_0x42ef02),_0x42ef02;});},WF=_0x5d0dde=>{if(!_0x5d0dde['hasOwnProp'+'erty']('extensions')||!_0x5d0dde['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts'))return null;const _0x59b291=_0x5d0dde['extensions']['KHR_materi'+'als_varian'+'ts']['variants'],_0xa6ce64={};for(let _0x5f01db=0xc0f+-0x1*0x15b5+-0xbe*-0xd;_0x5f01db<_0x59b291['length'];_0x5f01db++)_0xa6ce64[_0x59b291[_0x5f01db]['name']]=_0x5f01db;return _0xa6ce64;},$F=(_0x49a30f,_0x715200,_0x160e55,_0x4e201a)=>{var _0x1c3c37,_0x5bfcb1;if(!_0x49a30f['hasOwnProp'+'erty']('animations')||_0x49a30f['animations']['length']===0x4*-0x228+-0x346+-0x2*-0x5f3)return[];const _0x3698c6=(_0x1c3c37=_0x4e201a==null?void(0xb6*-0x28+-0x147+0x1*0x1db7):_0x4e201a['animation'])==null?void(0x1*0x1025+0x2190*-0x1+0x116b):_0x1c3c37['preprocess'],_0x2ab477=(_0x5bfcb1=_0x4e201a==null?void(-0x2*-0x3ff+0x149f*-0x1+0xca1*0x1):_0x4e201a['animation'])==null?void(-0x1fb2+0x1e*0xce+-0x2*-0x3c7):_0x5bfcb1['postproces'+'s'];return _0x49a30f['animations']['map']((_0x4d8685,_0x1cc3d0)=>{_0x3698c6&&_0x3698c6(_0x4d8685);const _0x55d6c4=kF(_0x4d8685,_0x1cc3d0,_0x49a30f['accessors'],_0x160e55,_0x715200,_0x49a30f['meshes'],_0x49a30f['nodes']);return _0x2ab477&&_0x2ab477(_0x4d8685,_0x55d6c4),_0x55d6c4;});},XF=(_0x4caf54,_0x182bd4,_0x1c722a,_0x40f829)=>{const _0x29901a=_0x182bd4['accessors'];_0x1c722a['forEach']((_0x272a4d,_0x4f184e)=>{const _0x303828=_0x272a4d['ext']['attributes'];let _0x30a61d;if(_0x303828['hasOwnProp'+'erty']('TRANSLATIO'+'N')){const _0x5100e3=_0x29901a[_0x303828['TRANSLATIO'+'N']];_0x30a61d=xn(_0x5100e3,_0x40f829);}let _0xf80316;if(_0x303828['hasOwnProp'+'erty']('ROTATION')){const _0x526fdd=_0x29901a[_0x303828['ROTATION']];_0xf80316=xn(_0x526fdd,_0x40f829);}let _0xcfb339;if(_0x303828['hasOwnProp'+'erty']('SCALE')){const _0x3424da=_0x29901a[_0x303828['SCALE']];_0xcfb339=xn(_0x3424da,_0x40f829);}const _0x426aca=(_0x30a61d?_0x30a61d['length']/(-0x1277*-0x2+-0x1*0x44f+-0x209c):-0x14*-0x12a+-0x5*0x445+-0x1ef)||(_0xf80316?_0xf80316['length']/(-0x4*-0x27a+0x26b9*-0x1+0x3d*0x79):-0x17e1+0x2*-0x502+0x1*0x21e5)||(_0xcfb339?_0xcfb339['length']/(-0x2bc+0xa61+-0x7a2):-0x7*0x42b+-0x1*0x1369+-0x9*-0x566);if(_0x426aca){const _0x28486e=new Float32Array(_0x426aca*(0x864+0x1b9+-0xa0d)),_0x5e0385=new D(),_0x7806c4=new le(),_0x2c9f9c=new D(0x1*-0x173c+0x20c9*0x1+-0x98c,0x1f22+-0x13b1+-0xb70,0x1b1*0x17+-0x8a7*-0x2+-0x3834),_0x437104=new te();let _0x253352=-0x1d53+0x1*-0x1b39+-0x524*-0xb;for(let _0x7462e3=0x2*-0x2e7+-0x4*-0x115+-0x2*-0xbd;_0x7462e3<_0x426aca;_0x7462e3++){const _0x19af52=_0x7462e3*(0x1*0x266d+-0x267f+0x15);if(_0x30a61d&&_0x5e0385['set'](_0x30a61d[_0x19af52],_0x30a61d[_0x19af52+(0x7*-0x2e6+-0x22e6+0x3731)],_0x30a61d[_0x19af52+(-0x53*-0x7+-0x18d6+0x1693)]),_0xf80316){const _0x5443c1=_0x7462e3*(0x2*0x853+0x2660+0x6*-0x92b);_0x7806c4['set'](_0xf80316[_0x5443c1],_0xf80316[_0x5443c1+(0x1d3a+0x21af+-0x3ee8)],_0xf80316[_0x5443c1+(0x19b*-0x13+-0xb*-0x2f5+-0x204)],_0xf80316[_0x5443c1+(-0x1*-0x2645+-0x18*-0x141+-0x445a)]);}_0xcfb339&&_0x2c9f9c['set'](_0xcfb339[_0x19af52],_0xcfb339[_0x19af52+(-0xe*-0x281+-0xc*0x1af+-0xed9)],_0xcfb339[_0x19af52+(-0x2031*0x1+-0x6e1*0x3+0x34d6)]),_0x437104['setTRS'](_0x5e0385,_0x7806c4,_0x2c9f9c);for(let _0x4bbf54=0x2536+-0x2de+-0x2258;_0x4bbf54<-0x19*-0x27+-0x12bf+0xf00;_0x4bbf54++)_0x28486e[_0x253352++]=_0x437104['data'][_0x4bbf54];}_0x272a4d['matrices']=_0x28486e;}});},qF=(_0x1d2d87,_0x1c6fbb,_0x378152)=>{var _0x5ee781,_0x37f0da,_0x439939;if(!_0x1d2d87['hasOwnProp'+'erty']('nodes')||_0x1d2d87['nodes']['length']===-0x20f9*0x1+0x50f*0x7+0x2*-0x138)return[];const _0x1ec32f=(_0x5ee781=_0x1c6fbb==null?void(-0xec6+-0x1*0xa7+-0xf6d*-0x1):_0x1c6fbb['node'])==null?void(-0x2317*-0x1+0x1d9b+0x2059*-0x2):_0x5ee781['preprocess'],_0x4a7549=((_0x37f0da=_0x1c6fbb==null?void(0x1f98*-0x1+-0x11c2+0x315a):_0x1c6fbb['node'])==null?void(-0x27d+-0x124*0x1f+-0x1*-0x25d9):_0x37f0da['process'])??UF,_0x421568=(_0x439939=_0x1c6fbb==null?void(-0x85*0x3e+-0x1*-0x104e+0x3fa*0x4):_0x1c6fbb['node'])==null?void(-0x1317+0x5ba+0xd5d):_0x439939['postproces'+'s'],_0x30a259=_0x1d2d87['nodes']['map']((_0x39468d,_0x4f28e2)=>{_0x1ec32f&&_0x1ec32f(_0x39468d);const _0x346176=_0x4a7549(_0x39468d,_0x4f28e2,_0x378152);return _0x421568&&_0x421568(_0x39468d,_0x346176),_0x346176;});for(let _0x16efa0=-0x2372+0x26*-0xa6+0x3c16;_0x16efa0<_0x1d2d87['nodes']['length'];++_0x16efa0){const _0x4be823=_0x1d2d87['nodes'][_0x16efa0];if(_0x4be823['hasOwnProp'+'erty']('children')){const _0x120bf2=_0x30a259[_0x16efa0],_0x1fa252={};for(let _0x1cf720=-0xc2+0x9+0x5*0x25;_0x1cf720<_0x4be823['children']['length'];++_0x1cf720){const _0x587ee2=_0x30a259[_0x4be823['children'][_0x1cf720]];_0x587ee2['parent']||(_0x1fa252['hasOwnProp'+'erty'](_0x587ee2['name'])?_0x587ee2['name']+=_0x1fa252[_0x587ee2['name']]++:_0x1fa252[_0x587ee2['name']]=-0xd85*-0x2+-0x1*-0x2239+-0x1ea1*0x2,_0x120bf2['addChild'](_0x587ee2));}}}return _0x30a259;},jF=(_0x5d059d,_0x401400)=>{var _0x157d1f;const _0x4e8ded=[],_0x584076=_0x5d059d['scenes']['length'];if(_0x584076===-0x7e+-0x1*-0x11df+-0x116*0x10&&((_0x157d1f=_0x5d059d['scenes'][0x2*0xc2f+-0xbe*0x12+-0xb02]['nodes'])==null?void(-0x1471+0x67*-0x21+-0xd*-0x298):_0x157d1f['length'])===-0x20ee+-0x16*0x99+-0x2f*-0xfb){const _0x1d1006=_0x5d059d['scenes'][0x31*-0x13+0xf*0x116+-0xca7]['nodes'][-0x16ed+-0x24b3+0x3ba0];_0x4e8ded['push'](_0x401400[_0x1d1006]);}else for(let _0x270c4b=-0x172d*-0x1+-0x1*0x150b+-0x3*0xb6;_0x270c4b<_0x584076;_0x270c4b++){const _0x4be202=_0x5d059d['scenes'][_0x270c4b];if(_0x4be202['nodes']){const _0x157bd3=new Ie(_0x4be202['name']);for(let _0x4b813f=0x1*-0x2111+0x2a*0x9d+0x74f;_0x4b813f<_0x4be202['nodes']['length'];_0x4b813f++){const _0x560a1e=_0x401400[_0x4be202['nodes'][_0x4b813f]];_0x157bd3['addChild'](_0x560a1e);}_0x4e8ded['push'](_0x157bd3);}}return _0x4e8ded;},YF=(_0x4d3bdb,_0x546fdf,_0x363052)=>{var _0xdefd55,_0x43d4f0,_0x597cd2;let _0x2ae894=null;if(_0x4d3bdb['hasOwnProp'+'erty']('nodes')&&_0x4d3bdb['hasOwnProp'+'erty']('cameras')&&_0x4d3bdb['cameras']['length']>0x1b98+0x102b*-0x2+-0x1*-0x4be){const _0x6b96fc=(_0xdefd55=_0x363052==null?void(-0x1e4d*-0x1+0x1576+0x1141*-0x3):_0x363052['camera'])==null?void(-0x2321+-0x1510+0x3831):_0xdefd55['preprocess'],_0x5f09b9=((_0x43d4f0=_0x363052==null?void(-0xa3+-0x1*0x7e1+0x884*0x1):_0x363052['camera'])==null?void(-0x26b7+-0xb29+0x10a0*0x3):_0x43d4f0['process'])??BF,_0x463313=(_0x597cd2=_0x363052==null?void(-0x14e6+-0xbe4*-0x1+0x481*0x2):_0x363052['camera'])==null?void(0x73e*0x3+-0x2*0x4a0+-0xc7a):_0x597cd2['postproces'+'s'];_0x4d3bdb['nodes']['forEach']((_0x5c05f5,_0x24622d)=>{if(_0x5c05f5['hasOwnProp'+'erty']('camera')){const _0x5f20bd=_0x4d3bdb['cameras'][_0x5c05f5['camera']];if(_0x5f20bd){_0x6b96fc&&_0x6b96fc(_0x5f20bd);const _0x4c095d=_0x5f09b9(_0x5f20bd,_0x546fdf[_0x24622d]);_0x463313&&_0x463313(_0x5f20bd,_0x4c095d),_0x4c095d&&(_0x2ae894||(_0x2ae894=new Map()),_0x2ae894['set'](_0x5c05f5,_0x4c095d));}}});}return _0x2ae894;},KF=(_0x2d524f,_0x1b98bf,_0x389ea1)=>{var _0x2cb7ba,_0x32670d,_0x123f83;let _0x2d2c90=null;if(_0x2d524f['hasOwnProp'+'erty']('nodes')&&_0x2d524f['hasOwnProp'+'erty']('extensions')&&_0x2d524f['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x2d524f['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('lights')){const _0x12edd3=_0x2d524f['extensions']['KHR_lights'+'_punctual']['lights'];if(_0x12edd3['length']){const _0x42b9f0=(_0x2cb7ba=_0x389ea1==null?void(0x3ee*-0x5+-0x202f+0x1*0x33d5):_0x389ea1['light'])==null?void(0x1*0x2147+-0x1*-0xf21+0xc1a*-0x4):_0x2cb7ba['preprocess'],_0x47c385=((_0x32670d=_0x389ea1==null?void(0x151f+0x1fa5*-0x1+0x543*0x2):_0x389ea1['light'])==null?void(-0x1e94*0x1+0x3cc+0x1ac8):_0x32670d['process'])??zF,_0x389cd9=(_0x123f83=_0x389ea1==null?void(0x2*-0x2f0+0xd*-0x225+-0x21c1*-0x1):_0x389ea1['light'])==null?void(-0x97*0x3d+-0xeb8*0x2+0x1*0x416b):_0x123f83['postproces'+'s'];_0x2d524f['nodes']['forEach']((_0x25a5ae,_0x239189)=>{if(_0x25a5ae['hasOwnProp'+'erty']('extensions')&&_0x25a5ae['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x25a5ae['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('light')){const _0x32918f=_0x25a5ae['extensions']['KHR_lights'+'_punctual']['light'],_0x182307=_0x12edd3[_0x32918f];if(_0x182307){_0x42b9f0&&_0x42b9f0(_0x182307);const _0xfe24b7=_0x47c385(_0x182307,_0x1b98bf[_0x239189]);_0x389cd9&&_0x389cd9(_0x182307,_0xfe24b7),_0xfe24b7&&(_0x2d2c90||(_0x2d2c90=new Map()),_0x2d2c90['set'](_0x25a5ae,_0xfe24b7));}}});}}return _0x2d2c90;},ZF=(_0x82dfab,_0x21ec47,_0x15b6b6)=>{_0x82dfab['nodes']['forEach'](_0x3ac2e5=>{_0x3ac2e5['hasOwnProp'+'erty']('mesh')&&_0x3ac2e5['hasOwnProp'+'erty']('skin')&&_0x21ec47[_0x3ac2e5['mesh']]['meshes']['forEach'](_0x25f8d1=>{_0x25f8d1['skin']=_0x15b6b6[_0x3ac2e5['skin']];});});},QF=async(_0x3cc1b6,_0x4ffe12,_0x3be5c6,_0x43c191,_0x3cea19)=>{var _0x24b175,_0x3041ae;const _0x1b492f=(_0x24b175=_0x3cea19==null?void(-0xb5*0x14+0x1e4a+-0x1026):_0x3cea19['global'])==null?void(0x1b5e+-0x7*0x1ef+-0xdd5):_0x24b175['preprocess'],_0x5af509=(_0x3041ae=_0x3cea19==null?void(0x2ea+-0x1753*0x1+-0x1*-0x1469):_0x3cea19['global'])==null?void(-0x6a6+-0x19*-0x17+-0x1*-0x467):_0x3041ae['postproces'+'s'];_0x1b492f&&_0x1b492f(_0x4ffe12),_0x4ffe12['asset']&&_0x4ffe12['asset']['generator']==='PlayCanvas'&&w['warn']('glTF\x20model'+'\x20may\x20have\x20'+'been\x20gener'+'ated\x20with\x20'+'flipped\x20UV'+'s.\x20Please\x20'+'reconvert.');const _0x3a1cd8=new Map(),_0x246aa5=qF(_0x4ffe12,_0x3cea19,_0x3a1cd8),_0x483bc2=jF(_0x4ffe12,_0x246aa5),_0x64c1eb=KF(_0x4ffe12,_0x246aa5,_0x3cea19),_0x4c7fb3=YF(_0x4ffe12,_0x246aa5,_0x3cea19),_0x2fc6f9=WF(_0x4ffe12),_0x481991=await Promise['all'](_0x3be5c6),{meshes:_0x5c0c6f,meshVariants:_0x18eff8,meshDefaultMaterials:_0x5c3ddc,promises:_0x779a85}=GF(_0x3cc1b6,_0x4ffe12,_0x481991,_0x3cea19),_0x583c8a=$F(_0x4ffe12,_0x246aa5,_0x481991,_0x3cea19);XF(_0x3cc1b6,_0x4ffe12,_0x3a1cd8,_0x481991);const _0x1ac82f=await Promise['all'](_0x43c191),_0x2a3e99=_0x1ac82f['map'](_0x4913ab=>_0x4913ab['resource']),_0x16b9c3=HF(_0x4ffe12,_0x2a3e99,_0x3cea19),_0x329244=VF(_0x3cc1b6,_0x4ffe12,_0x246aa5,_0x481991),_0x1d4e7e=[];for(let _0x1f387f=-0x2*-0x16c+-0x13d*0x11+-0x1*-0x1235;_0x1f387f<_0x5c0c6f['length'];_0x1f387f++)_0x1d4e7e[_0x1f387f]=new Zp(),_0x1d4e7e[_0x1f387f]['meshes']=_0x5c0c6f[_0x1f387f];ZF(_0x4ffe12,_0x1d4e7e,_0x329244);const _0x63f5f2=new dF();return _0x63f5f2['gltf']=_0x4ffe12,_0x63f5f2['nodes']=_0x246aa5,_0x63f5f2['scenes']=_0x483bc2,_0x63f5f2['animations']=_0x583c8a,_0x63f5f2['textures']=_0x1ac82f,_0x63f5f2['materials']=_0x16b9c3,_0x63f5f2['variants']=_0x2fc6f9,_0x63f5f2['meshVarian'+'ts']=_0x18eff8,_0x63f5f2['meshDefaul'+'tMaterials']=_0x5c3ddc,_0x63f5f2['renders']=_0x1d4e7e,_0x63f5f2['skins']=_0x329244,_0x63f5f2['lights']=_0x64c1eb,_0x63f5f2['cameras']=_0x4c7fb3,_0x63f5f2['nodeInstan'+'cingMap']=_0x3a1cd8,_0x5af509&&_0x5af509(_0x4ffe12,_0x63f5f2),await Promise['all'](_0x779a85),_0x63f5f2;},JF=(_0x490561,_0x163169)=>{const _0x4b4878=(_0x35e6bc,_0x181f98)=>{switch(_0x35e6bc){case 0x37a3+0x1*0x216f+-0x3312:return Te;case-0xae0+0x7*0x527+0xcd0:return vt;case 0x4aa9*0x1+0x2*0x8a5+-0x34f3:return Ph;case-0x4723+-0x136c+0x8*0x1032:return Dh;case 0x3099+-0x2b3c+0x1b*0x13f:return Mh;case-0x1*0xb93+0x3d*0x1+-0x1*-0x3259:return ha;default:return _0x181f98;}},_0x15d3f1=(_0x250f70,_0x537086)=>{switch(_0x250f70){case-0xe23*0x2+0x4ccd*0x2+0x3db:return ue;case 0x5*-0x3aa+-0xa819+0x1*0x13ddb:return Du;case 0x2ee3*-0x1+0x36fd*-0x1+-0x1cf*-0x4f:return yt;default:return _0x537086;}};_0x490561&&(_0x163169=_0x163169??{},_0x490561['minFilter']=_0x4b4878(_0x163169['minFilter'],ha),_0x490561['magFilter']=_0x4b4878(_0x163169['magFilter'],vt),_0x490561['addressU']=_0x15d3f1(_0x163169['wrapS'],yt),_0x490561['addressV']=_0x15d3f1(_0x163169['wrapT'],yt));};let eN=0x8a7*-0x3+-0xcf1*0x1+0x26e6;const Qa=_0x32837c=>{var _0x4d8f55,_0x2445fd,_0x5478d2,_0x3f110d;return((_0x2445fd=(_0x4d8f55=_0x32837c['extensions'])==null?void(0x8f2+0xa6*-0x9+-0x31c):_0x4d8f55['KHR_textur'+'e_basisu'])==null?void(-0x503*-0x2+-0x1656+0x1*0xc50):_0x2445fd['source'])??((_0x3f110d=(_0x5478d2=_0x32837c['extensions'])==null?void(0x709*0x5+-0x25*0x5d+0x4*-0x56f):_0x5478d2['EXT_textur'+'e_webp'])==null?void(0x15f4+0x4*0x499+0x50b*-0x8):_0x3f110d['source'])??_0x32837c['source'];},tN=(_0x2d7369,_0x24c4f2,_0x4cfac4,_0x37abed,_0x2cfedc)=>{var _0x17b84c,_0x512b7a,_0x21f939;if(!_0x2d7369['images']||_0x2d7369['images']['length']===0x969*0x1+-0x362+-0x607*0x1)return[];const _0x37a9d8=(_0x17b84c=_0x2cfedc==null?void(0x16bb+-0x132*-0x1b+-0x3701):_0x2cfedc['image'])==null?void(0x1789+-0x1c08+0x47f*0x1):_0x17b84c['preprocess'],_0x27e5e6=(_0x512b7a=_0x2cfedc==null?void(0x153*-0x9+-0x27c+-0x4cd*-0x3):_0x2cfedc['image'])==null?void(0x1*0x1e27+0x38b+-0x21b2):_0x512b7a['processAsy'+'nc'],_0x1dd744=(_0x21f939=_0x2cfedc==null?void(-0x43*-0x8e+-0xbbd*-0x2+0x1e52*-0x2):_0x2cfedc['image'])==null?void(-0x1902+-0x1ecd+-0x9d*-0x5b):_0x21f939['postproces'+'s'],_0x7d242c={'image/png':'png','image/jpeg':'jpg','image/basis':'basis','image/ktx':'ktx','image/ktx2':'ktx2','image/vnd-ms.dds':'dds'},_0x2195e3=_0x503296=>{const _0x33258c=new Set();return _0x503296['hasOwnProp'+'erty']('materials')&&_0x503296['materials']['forEach'](_0x2da38b=>{if(_0x2da38b['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x1912fe=_0x2da38b['pbrMetalli'+'cRoughness'];if(_0x1912fe['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x28c8b2=_0x503296['textures'][_0x1912fe['baseColorT'+'exture']['index']];_0x33258c['add'](Qa(_0x28c8b2));}}if(_0x2da38b['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x3d30c8=_0x503296['textures'][_0x2da38b['emissiveTe'+'xture']['index']];_0x33258c['add'](Qa(_0x3d30c8));}if(_0x2da38b['hasOwnProp'+'erty']('extensions')){const _0x15a354=_0x2da38b['extensions']['KHR_materi'+'als_sheen'];if(_0x15a354&&_0x15a354['hasOwnProp'+'erty']('sheenColor'+'Texture')){const _0x5d419e=_0x503296['textures'][_0x15a354['sheenColor'+'Texture']['index']];_0x33258c['add'](Qa(_0x5d419e));}const _0x2e1365=_0x2da38b['extensions']['KHR_materi'+'als_pbrSpe'+'cularGloss'+'iness'];if(_0x2e1365&&_0x2e1365['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x52824c=_0x503296['textures'][_0x2e1365['specularGl'+'ossinessTe'+'xture']['index']];_0x33258c['add'](Qa(_0x52824c));}const _0xf2ae37=_0x2da38b['extensions']['KHR_materi'+'als_specul'+'ar'];if(_0xf2ae37&&_0xf2ae37['hasOwnProp'+'erty']('specularCo'+'lorTexture')){const _0x25bc30=_0x503296['textures'][_0xf2ae37['specularCo'+'lorTexture']['index']];_0x33258c['add'](Qa(_0x25bc30));}}}),_0x33258c;},_0x3b31cd=(_0x58fe7a,_0x2fd3c7,_0x26defb,_0x4e7ba9,_0x230a5b,_0x52198a)=>new Promise((_0x6817f1,_0x4ec4dc)=>{const _0x216709=_0x3124fa=>{const _0x289b9a=(_0x58fe7a['name']||'gltf-textu'+'re')+'-'+eN++,_0x2122a5={'url':_0x2fd3c7||_0x289b9a};if(_0x3124fa&&(_0x2122a5['contents']=_0x3124fa['slice'](0x24b5+0x164a+-0x3aff)['buffer']),_0x4e7ba9){const _0x1a9741=_0x7d242c[_0x4e7ba9];_0x1a9741&&(_0x2122a5['filename']=_0x2122a5['url']+'.'+_0x1a9741);}const _0x26ec33={'srgb':_0x52198a},_0x3d1118=new pe(_0x289b9a,'texture',_0x2122a5,_0x26ec33,_0x230a5b);_0x3d1118['on']('load',_0x17da84=>_0x6817f1(_0x17da84)),_0x3d1118['on']('error',_0x48da5a=>_0x4ec4dc(_0x48da5a)),_0x37abed['add'](_0x3d1118),_0x37abed['load'](_0x3d1118);};_0x26defb?_0x26defb['then'](_0x551dc8=>_0x216709(_0x551dc8)):_0x216709(null);}),_0x3a2a95=_0x2195e3(_0x2d7369);return _0x2d7369['images']['map']((_0x267608,_0x3f6c87)=>{_0x37a9d8&&_0x37a9d8(_0x267608);let _0x59479e;return _0x27e5e6?_0x59479e=new Promise((_0x353aab,_0x248511)=>{_0x27e5e6(_0x267608,(_0x5a31e0,_0x498886)=>{_0x5a31e0?_0x248511(_0x5a31e0):_0x353aab(_0x498886);});}):_0x59479e=new Promise(_0x33832d=>{_0x33832d(null);}),_0x59479e=_0x59479e['then'](_0x309ce1=>{const _0x32d937=_0x3a2a95['has'](_0x3f6c87);return _0x309ce1||(_0x267608['hasOwnProp'+'erty']('uri')?Bv(_0x267608['uri'])?_0x3b31cd(_0x267608,_0x267608['uri'],null,fF(_0x267608['uri']),null,_0x32d937):_0x3b31cd(_0x267608,Vn['test'](_0x267608['uri'])?_0x267608['uri']:xe['join'](_0x4cfac4,_0x267608['uri']),null,null,{'crossOrigin':'anonymous'},_0x32d937):_0x267608['hasOwnProp'+'erty']('bufferView')&&_0x267608['hasOwnProp'+'erty']('mimeType')?_0x3b31cd(_0x267608,null,_0x24c4f2[_0x267608['bufferView']],_0x267608['mimeType'],null,_0x32d937):Promise['reject'](new Error('Invalid\x20im'+'age\x20found\x20'+'in\x20gltf\x20(n'+'either\x20uri'+'\x20or\x20buffer'+'View\x20found'+').\x20index='+_0x3f6c87)));}),_0x1dd744&&(_0x59479e=_0x59479e['then'](_0x293c7b=>(_0x1dd744(_0x267608,_0x293c7b),_0x293c7b))),_0x59479e;});},sN=(_0x570697,_0x2a1fff,_0x3ec540)=>{var _0x2e1384,_0x436783,_0x4237ba,_0x4dcda0,_0xa23f1d;if(!((_0x2e1384=_0x570697==null?void(0xc2d+0x2*-0x5ef+-0x4f):_0x570697['images'])!=null&&_0x2e1384['length'])||!((_0x436783=_0x570697==null?void(-0x6b*0x35+-0x669+0x1c90):_0x570697['textures'])!=null&&_0x436783['length']))return[];const _0x3f7f35=(_0x4237ba=_0x3ec540==null?void(-0x14*-0x55+-0x1*-0x1c61+-0x2305):_0x3ec540['texture'])==null?void(-0x2*-0x59c+0x18*-0x115+0xec0):_0x4237ba['preprocess'],_0x5a3d49=(_0x4dcda0=_0x3ec540==null?void(-0x925*-0x4+-0x20dc+-0x3b8):_0x3ec540['texture'])==null?void(0xa7*-0x26+-0x10e5+0x29af*0x1):_0x4dcda0['processAsy'+'nc'],_0x4f26df=(_0xa23f1d=_0x3ec540==null?void(0x3*-0x942+0x1229*-0x2+0x4018):_0x3ec540['texture'])==null?void(-0x1234+0x5*-0x3d5+0x255d):_0xa23f1d['postproces'+'s'],_0x50b34c=new Set();return _0x570697['textures']['map'](_0x1eb79b=>{_0x3f7f35&&_0x3f7f35(_0x1eb79b);let _0x4c91d7;return _0x5a3d49?_0x4c91d7=new Promise((_0x37ec26,_0x382ca0)=>{_0x5a3d49(_0x1eb79b,_0x570697['images'],(_0x1dbf89,_0x45b19a)=>{_0x1dbf89?_0x382ca0(_0x1dbf89):_0x37ec26(_0x45b19a);});}):_0x4c91d7=new Promise(_0x32e03e=>{_0x32e03e(null);}),_0x4c91d7=_0x4c91d7['then'](_0x823487=>{_0x823487=_0x823487??Qa(_0x1eb79b);const _0x6b38f5=_0x50b34c['has'](_0x823487);return _0x50b34c['add'](_0x823487),_0x2a1fff[_0x823487]['then'](_0x5764ab=>{const _0x362955=_0x6b38f5?yF(_0x5764ab):_0x5764ab;return JF(_0x362955['resource'],(_0x570697['samplers']??[])[_0x1eb79b['sampler']]),_0x362955;});}),_0x4f26df&&(_0x4c91d7=_0x4c91d7['then'](_0x1c5cfd=>(_0x4f26df(_0x1eb79b,_0x1c5cfd),_0x1c5cfd))),_0x4c91d7;});},iN=(_0x5e95fe,_0x19bc13,_0x5f4b7d,_0x42b5e7)=>{var _0x9f5d29,_0x91f7ad,_0x4d81f9;if(!_0x5e95fe['buffers']||_0x5e95fe['buffers']['length']===-0x10f*-0x12+0x1*-0x2c2+-0x104c)return[];const _0x26449c=(_0x9f5d29=_0x42b5e7==null?void(0x1ef1*0x1+0x17f0+-0x15*0x29d):_0x42b5e7['buffer'])==null?void(-0x4c3*0x1+0x368+-0x15b*-0x1):_0x9f5d29['preprocess'],_0xf887c9=(_0x91f7ad=_0x42b5e7==null?void(-0x2382*0x1+0xb9*-0x1+-0x109*-0x23):_0x42b5e7['buffer'])==null?void(0x26fc+0x2614+0x66c*-0xc):_0x91f7ad['processAsy'+'nc'],_0x3a6d89=(_0x4d81f9=_0x42b5e7==null?void(-0x1012+0x1545+-0x533):_0x42b5e7['buffer'])==null?void(-0x146a*0x1+0x5ea+0xe80):_0x4d81f9['postproces'+'s'];return _0x5e95fe['buffers']['map']((_0x454d0d,_0x4176a4)=>{_0x26449c&&_0x26449c(_0x454d0d);let _0x2b9786;return _0xf887c9?_0x2b9786=new Promise((_0x44a2c0,_0x485501)=>{_0xf887c9(_0x454d0d,(_0xdd372c,_0x23f8a9)=>{_0xdd372c?_0x485501(_0xdd372c):_0x44a2c0(_0x23f8a9);});}):_0x2b9786=new Promise(_0x5df676=>{_0x5df676(null);}),_0x2b9786=_0x2b9786['then'](_0x2ea48d=>{if(_0x2ea48d)return _0x2ea48d;if(_0x454d0d['hasOwnProp'+'erty']('uri')){if(Bv(_0x454d0d['uri'])){const _0x174bd2=atob(_0x454d0d['uri']['split'](',')[-0x1594+0xdec+0x7a9]),_0x11c819=new Uint8Array(_0x174bd2['length']);for(let _0x43d5c8=0xdc6+-0x49b*0x6+0xddc;_0x43d5c8<_0x174bd2['length'];_0x43d5c8++)_0x11c819[_0x43d5c8]=_0x174bd2['charCodeAt'](_0x43d5c8);return _0x11c819;}return new Promise((_0xfd4d8,_0x2b51ca)=>{ot['get'](Vn['test'](_0x454d0d['uri'])?_0x454d0d['uri']:xe['join'](_0x5f4b7d,_0x454d0d['uri']),{'cache':!(0x175e+0x1a6b+0x9f5*-0x5),'responseType':'arraybuffe'+'r','retry':!(-0x16ac*-0x1+-0x516+-0x1195)},(_0x2ab7f1,_0xb65110)=>{_0x2ab7f1?_0x2b51ca(_0x2ab7f1):_0xfd4d8(new Uint8Array(_0xb65110));});});}return _0x19bc13;}),_0x3a6d89&&(_0x2b9786=_0x2b9786['then'](_0x1b8e1f=>(_0x3a6d89(_0x5e95fe['buffers'][_0x4176a4],_0x1b8e1f),_0x1b8e1f))),_0x2b9786;});},rN=(_0x4089bf,_0x54fd97)=>{const _0x407eaf=JSON['parse']((_0x1e5aca=>{if(typeof TextDecoder<'u')return new TextDecoder()['decode'](_0x1e5aca);let _0x502db2='';for(let _0x3ba63c=-0x1926+0x17*-0xa9+0x2855;_0x3ba63c<_0x1e5aca['length'];_0x3ba63c++)_0x502db2+=String['fromCharCo'+'de'](_0x1e5aca[_0x3ba63c]);return decodeURIComponent(escape(_0x502db2));})(_0x4089bf));if(_0x407eaf['asset']&&_0x407eaf['asset']['version']&&parseFloat(_0x407eaf['asset']['version'])<0x2175+-0xb*0xf9+0xb6*-0x20){_0x54fd97('Invalid\x20gl'+'tf\x20version'+'.\x20Expected'+'\x20version\x202'+'.0\x20or\x20abov'+'e\x20but\x20foun'+'d\x20version\x20'+'\x27'+_0x407eaf['asset']['version']+'\x27.');return;}_0x54fd97(null,_0x407eaf);},aN=(_0x16ce99,_0x18322b)=>{const _0x5b2c15=_0x16ce99 instanceof ArrayBuffer?new DataView(_0x16ce99):new DataView(_0x16ce99['buffer'],_0x16ce99['byteOffset'],_0x16ce99['byteLength']),_0x1595bf=_0x5b2c15['getUint32'](-0x19aa+-0x1996+0x668*0x8,!(0x7*-0x4e1+-0x26bb+-0x1eb*-0x26)),_0x491c2a=_0x5b2c15['getUint32'](0x8aa*0x2+0x1b6*0x4+0x305*-0x8,!(-0x3f+-0x1dc9+0x2*0xf04)),_0x4e8da1=_0x5b2c15['getUint32'](-0x4b3*-0x3+-0x1420+0x60f,!(-0x25d+0x228e+0x2031*-0x1));if(_0x1595bf!==-0x575*0x195ca+0x1f*0x3e7638f+-0x2a0a3a98){_0x18322b('Invalid\x20ma'+'gic\x20number'+'\x20found\x20in\x20'+'glb\x20header'+'.\x20Expected'+'\x200x46546C6'+'7,\x20found\x200'+'x'+_0x1595bf['toString'](0x1d46+-0x6*-0x631+-0x425c));return;}if(_0x491c2a!==0x3*-0xa06+-0x1d*-0x12d+0x405*-0x1){_0x18322b('Invalid\x20ve'+'rsion\x20numb'+'er\x20found\x20i'+'n\x20glb\x20head'+'er.\x20Expect'+'ed\x202,\x20foun'+'d\x20'+_0x491c2a);return;}if(_0x4e8da1<=-0x1*0x136d+0xc46*0x1+0x727||_0x4e8da1>_0x5b2c15['byteLength']){_0x18322b('Invalid\x20le'+'ngth\x20found'+'\x20in\x20glb\x20he'+'ader.\x20Foun'+'d\x20'+_0x4e8da1);return;}const _0x30e8b1=[];let _0x54bd01=0xa34+-0x1*0xa6a+0x3*0x16;for(;_0x54bd01<_0x4e8da1;){const _0x5e6313=_0x5b2c15['getUint32'](_0x54bd01,!(0xad*0x13+-0x1*0x1657+0x980));_0x54bd01+_0x5e6313+(-0x1e7e+-0x380*-0xb+-0x1*0x7fa)>_0x5b2c15['byteLength']&&_0x18322b('Invalid\x20ch'+'unk\x20length'+'\x20found\x20in\x20'+'glb.\x20Found'+'\x20'+_0x5e6313);const _0x4bd690=_0x5b2c15['getUint32'](_0x54bd01+(0x19d+0x4*-0x676+0x183f),!(0xd*-0x18d+-0xc27+0x2050)),_0x4fe1f4=new Uint8Array(_0x5b2c15['buffer'],_0x5b2c15['byteOffset']+_0x54bd01+(-0x5*-0x76b+-0x1*-0xff4+-0x1*0x3503),_0x5e6313);_0x30e8b1['push']({'length':_0x5e6313,'type':_0x4bd690,'data':_0x4fe1f4}),_0x54bd01+=_0x5e6313+(0x432+-0x152a+0x1100);}if(_0x30e8b1['length']!==-0xe3e*0x1+0x97*0x28+-0x959*0x1&&_0x30e8b1['length']!==0x1*-0x11f2+-0x132b+-0x1*-0x251f){_0x18322b('Invalid\x20nu'+'mber\x20of\x20ch'+'unks\x20found'+'\x20in\x20glb\x20fi'+'le.');return;}if(_0x30e8b1[-0x22c8+0x8*0x479+-0x100]['type']!==0x8f9*-0x89923+0x31f0d699*0x1+0x34c243de*0x2){_0x18322b('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x4'+'E4F534A,\x20f'+'ound\x200x'+_0x30e8b1[0x5*-0x44b+0x112e+0x449]['type']['toString'](0x14b2+0x1475+0x9d*-0x43));return;}if(_0x30e8b1['length']>-0x1*-0x1ee4+-0x1*0x21f9+-0x4f*-0xa&&_0x30e8b1[-0x6a1*-0x3+-0x13f2+0x10]['type']!==0x1*0x41291b+0x5b73*0x125+-0x5b8a78){_0x18322b('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x0'+'04E4942,\x20f'+'ound\x200x'+_0x30e8b1[-0x1b1*0x7+-0x1f34+0x2b0c]['type']['toString'](0x4*-0x296+0xa9*-0x22+0xa*0x349));return;}_0x18322b(null,{'gltfChunk':_0x30e8b1[-0x24e*-0xd+0x1*0x13fb+-0x31f1]['data'],'binaryChunk':_0x30e8b1['length']===-0xead*0x2+-0x2*0x137a+0x4450?_0x30e8b1[0x376+0x93a+-0xcaf]['data']:null});},nN=(_0xbe3a44,_0x13f9d8,_0x130db1)=>{const _0x44f9b0=()=>{const _0x106102=new Uint8Array(_0x13f9d8);return _0x106102[-0x13*-0x193+0x1e0e+0x81*-0x77]===0x10b2+-0x98*0x2b+0x93d&&_0x106102[-0x1*-0x1089+-0x375*0x3+0x629*-0x1]===-0xb*0x21f+-0x5*-0xb4+-0x143d*-0x1&&_0x106102[-0x123f+0x1966+0x1*-0x725]===0x1*-0x19cd+-0x1de1*0x1+0x3802&&_0x106102[0x1b5a+-0x72f+-0x1428]===-0x534+-0x16a4+-0x2*-0xe0f;};_0xbe3a44&&_0xbe3a44['toLowerCas'+'e']()['endsWith']('.glb')||_0x44f9b0()?aN(_0x13f9d8,_0x130db1):_0x130db1(null,{'gltfChunk':_0x13f9d8,'binaryChunk':null});},oN=(_0x26cf18,_0x479ef5,_0x5ab218)=>{var _0x57b876,_0x327dd9,_0x33beda,_0xbe11e2;const _0x32f3ab=[],_0x1f1d63=(_0x57b876=_0x5ab218==null?void(-0x1*0x2d4+0xa*-0x28d+0x1c56):_0x5ab218['bufferView'])==null?void(-0x1bff+0xb6a+0x1095):_0x57b876['preprocess'],_0x4c6386=(_0x327dd9=_0x5ab218==null?void(-0x8a7+0x8af*-0x1+-0x7*-0x27a):_0x5ab218['bufferView'])==null?void(0x1b12+0x265d+-0x416f):_0x327dd9['processAsy'+'nc'],_0x1a03d1=(_0x33beda=_0x5ab218==null?void(0x1ba1+0xbdf+-0x2780):_0x5ab218['bufferView'])==null?void(0x1464+-0x4d9+-0xf8b):_0x33beda['postproces'+'s'];if(!((_0xbe11e2=_0x26cf18['bufferView'+'s'])!=null&&_0xbe11e2['length']))return _0x32f3ab;for(let _0x59645b=0x3*-0x6aa+-0x1cb5+0x30b3;_0x59645b<_0x26cf18['bufferView'+'s']['length'];++_0x59645b){const _0x5116e2=_0x26cf18['bufferView'+'s'][_0x59645b];_0x1f1d63&&_0x1f1d63(_0x5116e2);let _0x39baa2;_0x4c6386?_0x39baa2=new Promise((_0x2825be,_0x104b49)=>{_0x4c6386(_0x5116e2,_0x479ef5,(_0x5e2d46,_0x297c7a)=>{_0x5e2d46?_0x104b49(_0x5e2d46):_0x2825be(_0x297c7a);});}):_0x39baa2=new Promise(_0x8c8b85=>{_0x8c8b85(null);}),_0x39baa2=_0x39baa2['then'](_0x19ceb6=>_0x19ceb6||_0x479ef5[_0x5116e2['buffer']]['then'](_0x29e11a=>new Uint8Array(_0x29e11a['buffer'],_0x29e11a['byteOffset']+(_0x5116e2['byteOffset']||-0x355*0x1+0x3ef*-0x6+0xc5*0x23),_0x5116e2['byteLength']))),_0x5116e2['hasOwnProp'+'erty']('byteStride')&&(_0x39baa2=_0x39baa2['then'](_0x3761ad=>(_0x3761ad['byteStride']=_0x5116e2['byteStride'],_0x3761ad))),_0x1a03d1&&(_0x39baa2=_0x39baa2['then'](_0x12104e=>(_0x1a03d1(_0x5116e2,_0x12104e),_0x12104e))),_0x32f3ab['push'](_0x39baa2);}return _0x32f3ab;};class mh{static['parse'](_0x5e227e,_0x2c8ea2,_0x44fe5e,_0x215856,_0x228da5,_0x3cf634,_0x48da0f){nN(_0x5e227e,_0x44fe5e,(_0x5a34ce,_0x403104)=>{if(_0x5a34ce){_0x48da0f(_0x5a34ce);return;}rN(_0x403104['gltfChunk'],(_0xc70ce7,_0x38a2ff)=>{if(_0xc70ce7){_0x48da0f(_0xc70ce7);return;}const _0x306f83=iN(_0x38a2ff,_0x403104['binaryChun'+'k'],_0x2c8ea2,_0x3cf634),_0x40324f=oN(_0x38a2ff,_0x306f83,_0x3cf634),_0x3c8130=tN(_0x38a2ff,_0x40324f,_0x2c8ea2,_0x228da5,_0x3cf634),_0x259d56=sN(_0x38a2ff,_0x3c8130,_0x3cf634);QF(_0x215856,_0x38a2ff,_0x40324f,_0x259d56,_0x3cf634)['then'](_0x594b8b=>_0x48da0f(null,_0x594b8b))['catch'](_0x2783ac=>_0x48da0f(_0x2783ac));});});}static['createDefa'+'ultMateria'+'l'](){return Vv({'name':'defaultGlb'+'Material'},[]);}}class lN extends Qe{constructor(_0x538e93){super(_0x538e93,'animation'),this['device']=_0x538e93['graphicsDe'+'vice'],this['assets']=_0x538e93['assets'];}['load'](_0x1a3b45,_0x446b95,_0x114a5e){typeof _0x1a3b45=='string'&&(_0x1a3b45={'load':_0x1a3b45,'original':_0x1a3b45});const _0x108880={'retry':this['maxRetries']>0x6f+-0x37c+0x30d,'maxRetries':this['maxRetries']};(_0x1a3b45['load']['startsWith']('blob:')||_0x1a3b45['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x1a3b45['original'])['toLowerCas'+'e']()==='.glb'?_0x108880['responseTy'+'pe']=Is['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x108880['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x1a3b45['load'],_0x108880,(_0x4e18dd,_0x43e69f)=>{_0x4e18dd?_0x446b95('Error\x20load'+'ing\x20animat'+'ion\x20resour'+'ce:\x20'+_0x1a3b45['original']+'\x20['+_0x4e18dd+']'):xe['getExtensi'+'on'](_0x1a3b45['original'])['toLowerCas'+'e']()==='.glb'?mh['parse']('filename.g'+'lb','',_0x43e69f,this['device'],this['assets'],(_0x114a5e==null?void(0x11*-0xeb+0xb20+0x47b):_0x114a5e['options'])??{},(_0x20f268,_0x225cb7)=>{var _0x4eaeef;if(_0x20f268)_0x446b95(_0x20f268);else{const _0x4be169=_0x225cb7['animations'];if((_0x4eaeef=_0x114a5e==null?void(-0x4*-0x2bd+-0x6cf*0x1+-0x425*0x1):_0x114a5e['data'])!=null&&_0x4eaeef['events']){for(let _0x4247a3=-0xba*0x1+-0x178f+-0x1*-0x1849;_0x4247a3<_0x4be169['length'];_0x4247a3++)_0x4be169[_0x4247a3]['events']=new ov(Object['values'](_0x114a5e['data']['events']));}_0x225cb7['destroy'](),_0x446b95(null,_0x4be169);}}):_0x446b95(null,this['_parseAnim'+'ationV'+_0x43e69f['animation']['version']](_0x43e69f));});}['open'](_0x5d6ce7,_0x251946,_0x3831e7){return _0x251946;}['_parseAnim'+'ationV3'](_0x73cd1b){const _0x4b2361=_0x73cd1b['animation'],_0x9234a=new U_();_0x9234a['name']=_0x4b2361['name'],_0x9234a['duration']=_0x4b2361['duration'];for(let _0x1a4522=-0x15*-0x1d7+-0x42*0x7+-0x15*0x1c1;_0x1a4522<_0x4b2361['nodes']['length'];_0x1a4522++){const _0x190a74=new k_(),_0xda62ba=_0x4b2361['nodes'][_0x1a4522];_0x190a74['_name']=_0xda62ba['name'];for(let _0x5cf862=0x1bca+-0x2*0x10fa+0x2*0x315;_0x5cf862<_0xda62ba['keys']['length'];_0x5cf862++){const _0xe44c2c=_0xda62ba['keys'][_0x5cf862],_0x51c683=_0xe44c2c['time'],_0x35228c=_0xe44c2c['pos'],_0x4ae876=_0xe44c2c['rot'],_0xe7d0b2=_0xe44c2c['scale'],_0x232a05=new D(_0x35228c[0xa70*0x1+0x1020+-0x1a90],_0x35228c[0xa*-0x4+0x250a+-0x9*0x419],_0x35228c[0x5fc+-0x5*0x349+0xa73]),_0x335962=new le()['setFromEul'+'erAngles'](_0x4ae876[-0x2391+-0x1bb*0x1+0x254c],_0x4ae876[0x4f*-0x32+0x17*0x9d+0x154],_0x4ae876[0x1*-0xd75+-0x250c*0x1+0x3283]),_0x5a011f=new D(_0xe7d0b2[0x11*-0x1ff+0xb5a+-0x2f*-0x7b],_0xe7d0b2[-0x63f+-0x4*0x29f+0x10bc],_0xe7d0b2[-0x74f+-0xa39+-0x1*-0x118a]),_0x3e0092=new N_(_0x51c683,_0x232a05,_0x335962,_0x5a011f);_0x190a74['_keys']['push'](_0x3e0092);}_0x9234a['addNode'](_0x190a74);}return _0x9234a;}['_parseAnim'+'ationV4'](_0x41ff8f){const _0x173a4b=_0x41ff8f['animation'],_0x539a71=new U_();_0x539a71['name']=_0x173a4b['name'],_0x539a71['duration']=_0x173a4b['duration'];for(let _0x50c0db=0x1c*0x33+-0xc56*-0x1+-0x11ea;_0x50c0db<_0x173a4b['nodes']['length'];_0x50c0db++){const _0x2e3b48=new k_(),_0x160da6=_0x173a4b['nodes'][_0x50c0db];_0x2e3b48['_name']=_0x160da6['name'];const _0x37259f=_0x160da6['defaults']['p'],_0x28a245=_0x160da6['defaults']['r'],_0x275d74=_0x160da6['defaults']['s'];for(let _0x22ddb6=-0x31*-0x67+-0x4*0x6f3+-0x815*-0x1;_0x22ddb6<_0x160da6['keys']['length'];_0x22ddb6++){const _0x208f08=_0x160da6['keys'][_0x22ddb6],_0x48ddf3=_0x208f08['t'],_0x4205b7=_0x37259f||_0x208f08['p'],_0x536acb=_0x28a245||_0x208f08['r'],_0x1665ac=_0x275d74||_0x208f08['s'],_0x502b37=new D(_0x4205b7[-0x598*0x6+-0x2093*0x1+0x4223*0x1],_0x4205b7[0x5e*-0x24+0x173b+-0xa02],_0x4205b7[-0x1*-0x1b05+-0x9*0x1fe+-0x915]),_0x2141d9=new le()['setFromEul'+'erAngles'](_0x536acb[-0x1*0xd3f+-0x1294+-0x1*-0x1fd3],_0x536acb[-0x4f*0x40+0x59f*0x3+0x2e4],_0x536acb[0x80e+0x1996+-0x21a2]),_0x41a7a8=new D(_0x1665ac[-0x26ba*0x1+-0x1386*-0x2+-0x2*0x29],_0x1665ac[0xd1d+-0xb17+-0x205],_0x1665ac[0x7b3+0xcf+-0x880]),_0x2b1b7b=new N_(_0x48ddf3,_0x502b37,_0x2141d9,_0x41a7a8);_0x2e3b48['_keys']['push'](_0x2b1b7b);}_0x539a71['addNode'](_0x2e3b48);}return _0x539a71;}}class cN extends Qe{constructor(_0x891404){super(_0x891404,'animclip');}['load'](_0x458db7,_0x27a4d2){typeof _0x458db7=='string'&&(_0x458db7={'load':_0x458db7,'original':_0x458db7});const _0x5a8f63={'retry':this['maxRetries']>0x625+-0x2315+0x1cf0,'maxRetries':this['maxRetries']};_0x458db7['load']['startsWith']('blob:')&&(_0x5a8f63['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x458db7['load'],_0x5a8f63,(_0x3de9ec,_0x4667a6)=>{_0x3de9ec?_0x27a4d2('Error\x20load'+'ing\x20animat'+'ion\x20clip\x20r'+'esource:\x20'+_0x458db7['original']+'\x20['+_0x3de9ec+']'):_0x27a4d2(null,_0x4667a6);});}['open'](_0x207fdf,_0x4a6f6c){const _0x27e190=_0x4a6f6c['name'],_0x43a8cf=_0x4a6f6c['duration'],_0x4b6ba9=_0x4a6f6c['inputs']['map'](_0x4b10cd=>new uh(0x1fc1+0x69d+0x3d*-0xa1,_0x4b10cd)),_0x4065e0=_0x4a6f6c['outputs']['map'](_0x3bff65=>new uh(_0x3bff65['components'],_0x3bff65['data'])),_0x1e7805=_0x4a6f6c['curves']['map'](_0x4dc417=>new Uv([_0x4dc417['path']],_0x4dc417['inputIndex'],_0x4dc417['outputInde'+'x'],_0x4dc417['interpolat'+'ion']));return new Zi(_0x27e190,_0x43a8cf,_0x4b6ba9,_0x4065e0,_0x1e7805);}}class hN extends Qe{constructor(_0x300ec1){super(_0x300ec1,'animstateg'+'raph');}['load'](_0x51a811,_0x2f9888){typeof _0x51a811=='string'&&(_0x51a811={'load':_0x51a811,'original':_0x51a811});const _0x24b9ef={'retry':this['maxRetries']>-0x1c70+-0x1b05+0x3775,'maxRetries':this['maxRetries']};_0x51a811['load']['startsWith']('blob:')&&(_0x24b9ef['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x51a811['load'],_0x24b9ef,(_0x19c5a3,_0x1cefde)=>{_0x19c5a3?_0x2f9888('Error\x20load'+'ing\x20animat'+'ion\x20state\x20'+'graph\x20reso'+'urce:\x20'+_0x51a811['original']+'\x20['+_0x19c5a3+']'):_0x2f9888(null,_0x1cefde);});}['open'](_0x398e75,_0x2aed5e){return new Ic(_0x2aed5e);}}const rf=(function(){if(typeof window>'u')return!(0xbbc+0x11c6+-0x1d81);const _0x10da1a=window['navigator']['userAgent'],_0x274b84=_0x10da1a['indexOf']('MSIE\x20');if(_0x274b84>0x1*0x4cb+-0x2185*-0x1+-0x2650)return parseInt(_0x10da1a['substring'](_0x274b84+(0x1e7b+0x13*-0x7+-0x1df1),_0x10da1a['indexOf']('.',_0x274b84)),0xb*-0x389+-0x6*0x1c9+0x31a3);if(_0x10da1a['indexOf']('Trident/')>-0x12a5+0x2*0xbe7+-0x529){const _0x22f6cf=_0x10da1a['indexOf']('rv:');return parseInt(_0x10da1a['substring'](_0x22f6cf+(-0x4*-0x293+-0xd*-0x2bf+-0x51c*0x9),_0x10da1a['indexOf']('.',_0x22f6cf)),-0x281*0xb+-0x361*0x4+0x3f*0xa7);}return!(-0xf9b+-0xe4e+0x1dea);}()),dN=['.ogg','.mp3','.wav','.mp4a','.m4a','.mp4','.aac','.opus'];class fN extends Qe{constructor(_0x1e92c3){super(_0x1e92c3,'audio'),this['manager']=_0x1e92c3['soundManag'+'er'],w['assert'](this['manager'],'AudioHandl'+'er\x20cannot\x20'+'be\x20created'+'\x20without\x20s'+'ound\x20manag'+'er');}['_isSupport'+'ed'](_0x503fa8){const _0x59a16d=xe['getExtensi'+'on'](_0x503fa8);return dN['indexOf'](_0x59a16d)>-(0xbf*0xf+-0x4*-0x542+0x2038*-0x1)||_0x503fa8['startsWith']('blob:');}['load'](_0x18e73c,_0x63cc02){typeof _0x18e73c=='string'&&(_0x18e73c={'load':_0x18e73c,'original':_0x18e73c});const _0x4e381b=function(_0x8e80b4){_0x63cc02(null,new qT(_0x8e80b4));},_0x3aaab5=function(_0x1ee840){let _0x55b24c='Error\x20load'+'ing\x20audio\x20'+'url:\x20'+_0x18e73c['original'];_0x1ee840&&(_0x55b24c+=':\x20'+(_0x1ee840['message']||_0x1ee840)),console['warn'](_0x55b24c),_0x63cc02(_0x55b24c);};if(this['_createSou'+'nd']){if(!this['_isSupport'+'ed'](_0x18e73c['original'])){_0x3aaab5('Audio\x20form'+'at\x20for\x20'+_0x18e73c['original']+('\x20not\x20suppo'+'rted'));return;}this['_createSou'+'nd'](_0x18e73c['load'],_0x4e381b,_0x3aaab5);}else _0x3aaab5(null);}['_createSou'+'nd'](_0x2a1fe7,_0x4b82c6,_0x33d0e3){if(gl()){const _0x3dd4cf=this['manager'];if(!_0x3dd4cf['context']){_0x33d0e3('Audio\x20mana'+'ger\x20has\x20no'+'\x20audio\x20con'+'text');return;}const _0x1254ab={'retry':this['maxRetries']>-0xb5*0x31+0x295*-0x5+0x2f8e,'maxRetries':this['maxRetries']};(_0x2a1fe7['startsWith']('blob:')||_0x2a1fe7['startsWith']('data:'))&&(_0x1254ab['responseTy'+'pe']=Is['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']),ot['get'](_0x2a1fe7,_0x1254ab,(_0x24b1c0,_0x5293d0)=>{if(_0x24b1c0){_0x33d0e3(_0x24b1c0);return;}_0x3dd4cf['context']['decodeAudi'+'oData'](_0x5293d0,_0x4b82c6,_0x33d0e3);});}else{let _0x2fdeac=null;try{_0x2fdeac=new Audio();}catch{_0x33d0e3('No\x20support'+'\x20for\x20Audio'+'\x20element');return;}rf&&document['body']['appendChil'+'d'](_0x2fdeac);const _0x1b6b8b=function(){_0x2fdeac['removeEven'+'tListener']('canplaythr'+'ough',_0x1b6b8b),rf&&document['body']['removeChil'+'d'](_0x2fdeac),_0x4b82c6(_0x2fdeac);};_0x2fdeac['onerror']=function(){_0x2fdeac['onerror']=null,rf&&document['body']['removeChil'+'d'](_0x2fdeac),_0x33d0e3();},_0x2fdeac['addEventLi'+'stener']('canplaythr'+'ough',_0x1b6b8b),_0x2fdeac['src']=_0x2a1fe7;}}}class uN extends Qe{constructor(_0x3565e8){super(_0x3565e8,'binary');}['load'](_0x3478c2,_0x255a92){typeof _0x3478c2=='string'&&(_0x3478c2={'load':_0x3478c2,'original':_0x3478c2}),ot['get'](_0x3478c2['load'],{'responseType':Is['ResponseTy'+'pe']['ARRAY_BUFF'+'ER'],'retry':this['maxRetries']>0x5*-0x7c0+0x895+0x1e2b*0x1,'maxRetries':this['maxRetries']},(_0x16d97a,_0x117d7a)=>{_0x16d97a?_0x255a92('Error\x20load'+'ing\x20binary'+'\x20resource:'+'\x20'+_0x3478c2['original']+'\x20['+_0x16d97a+']'):_0x255a92(null,_0x117d7a);});}['openBinary'](_0x186408){return _0x186408['buffer'];}}class mr{constructor(_0x507263,_0x379a03,_0x2c74cc,_0x4f48f8){const _0x33a68a=function(_0x2a7793,_0x343db4,_0x59f5fe){const _0x2f996e=mr['createAsse'+'t'](_0x379a03['name'],_0x2a7793,_0x343db4,_0x59f5fe);return _0x2c74cc['add'](_0x2f996e),_0x2f996e;},_0x508bf2=[];for(let _0x5aef10=0xb*-0xd2+0x1*0x1da3+-0x149d;_0x5aef10<_0x507263['renders']['length'];++_0x5aef10)_0x508bf2['push'](_0x33a68a('render',_0x507263['renders'][_0x5aef10],_0x5aef10));const _0x27a06b=[];for(let _0x4b027e=-0x6ff*0x2+-0x184+0x7c1*0x2;_0x4b027e<_0x507263['materials']['length'];++_0x4b027e)_0x27a06b['push'](_0x33a68a('material',_0x507263['materials'][_0x4b027e],_0x4b027e));const _0x4ece74=[];for(let _0x484573=-0x2576+0x10f5+0x1481;_0x484573<_0x507263['animations']['length'];++_0x484573)_0x4ece74['push'](_0x33a68a('animation',_0x507263['animations'][_0x484573],_0x484573));this['data']=_0x507263,this['_model']=null,this['_assetName']=_0x379a03['name'],this['_assets']=_0x2c74cc,this['_defaultMa'+'terial']=_0x4f48f8,this['renders']=_0x508bf2,this['materials']=_0x27a06b,this['textures']=_0x507263['textures'],this['animations']=_0x4ece74;}get['model'](){if(!this['_model']){const _0x508060=mr['createMode'+'l'](this['data'],this['_defaultMa'+'terial']),_0x564959=mr['createAsse'+'t'](this['_assetName'],'model',_0x508060,-0x2541+0x1984+0xbbd);this['_assets']['add'](_0x564959),this['_model']=_0x564959;}return this['_model'];}static['createAsse'+'t'](_0x61fa01,_0x540a3c,_0xb1862b,_0x1d85ca){const _0x3336dd=new pe(_0x61fa01+'/'+_0x540a3c+'/'+_0x1d85ca,_0x540a3c,{'url':''});return _0x3336dd['resource']=_0xb1862b,_0x3336dd['loaded']=!(0x7*-0x511+0x1*-0x6ee+0x2a65),_0x3336dd;}['instantiat'+'eModelEnti'+'ty'](_0x195022){const _0x2d915b=new lt(void(0x1dfb*-0x1+-0x1*0x1e9d+0x3c98),this['_assets']['_loader']['_app']);return _0x2d915b['addCompone'+'nt']('model',Object['assign']({'type':'asset','asset':this['model']},_0x195022)),_0x2d915b;}['instantiat'+'eRenderEnt'+'ity'](_0x369ccd){const _0x21de45=this['_defaultMa'+'terial'],_0x5a883c=[],_0x364538=function(_0x1811d5,_0x5f4e62,_0x234ca6,_0x334d0b,_0x4ee1a1,_0xa3e2b0,_0x382fc5,_0x1c143e){const _0x3630b3=_0x4ee1a1[_0x234ca6['id']],_0x36eeb8=_0x3630b3===void(0x1be1+-0xbb9+0x1028*-0x1)?_0x21de45:_0x334d0b[_0x3630b3],_0x3010fd=new He(_0x234ca6,_0x36eeb8);_0x234ca6['morph']&&(_0x3010fd['morphInsta'+'nce']=new _a(_0x234ca6['morph'])),_0x382fc5['hasOwnProp'+'erty']('skin')&&_0x5a883c['push']({'meshInstance':_0x3010fd,'rootBone':_0x1811d5,'entity':_0x5f4e62});const _0x5102ae=_0x1c143e['get'](_0x382fc5);if(_0x5102ae){const _0x5f3c25=_0x5102ae['matrices'],_0x139b57=kt['getDefault'+'Instancing'+'Format'](_0x234ca6['device']),_0xd10986=new Ds(_0x234ca6['device'],_0x139b57,_0x5f3c25['length']/(0x1*-0x1d83+-0x1c78+0x1359*0x3),{'data':_0x5f3c25});_0x3010fd['setInstanc'+'ing'](_0xd10986),_0x3010fd['instancing'+'Data']['_destroyVe'+'rtexBuffer']=!(-0x1*0x1796+0x1fd*0x7+0x9ab);}return _0x3010fd;},_0x560ca6=(_0x46f6e4,_0x2cbc33,_0x1100a4)=>{const _0x259e1e=new lt(void(0x1*0x651+-0x1cff+-0x1*-0x16ae),this['_assets']['_loader']['_app']);_0x2cbc33['_cloneInte'+'rnal'](_0x259e1e),_0x46f6e4||(_0x46f6e4=_0x259e1e);let _0x416bfc=null,_0x1b4554=null;for(let _0x5f2b1d=-0x45*-0x26+0x2*-0x1073+0x19*0xe8;_0x5f2b1d<_0x1100a4['nodes']['length'];_0x5f2b1d++)if(_0x1100a4['nodes'][_0x5f2b1d]===_0x2cbc33){const _0x262646=_0x1100a4['gltf']['nodes'][_0x5f2b1d];if(_0x262646['hasOwnProp'+'erty']('mesh')){const _0x965d8=_0x1100a4['renders'][_0x262646['mesh']]['meshes'];_0x1b4554=this['renders'][_0x262646['mesh']];for(let _0x48a9a4=0x2199+0x163e+0x1*-0x37d7;_0x48a9a4<_0x965d8['length'];_0x48a9a4++){const _0x2d3e00=_0x965d8[_0x48a9a4];if(_0x2d3e00){const _0x463ab4=_0x364538(_0x46f6e4,_0x259e1e,_0x2d3e00,_0x1100a4['materials'],_0x1100a4['meshDefaul'+'tMaterials'],_0x1100a4['skins'],_0x262646,_0x1100a4['nodeInstan'+'cingMap']);_0x416bfc||(_0x416bfc=[]),_0x416bfc['push'](_0x463ab4);}}}if(_0x1100a4['lights']){const _0x26e936=_0x1100a4['lights']['get'](_0x262646);_0x26e936&&_0x259e1e['addChild'](_0x26e936['clone']());}if(_0x1100a4['cameras']){const _0x51df99=_0x1100a4['cameras']['get'](_0x262646);_0x51df99&&_0x51df99['camera']['system']['cloneCompo'+'nent'](_0x51df99,_0x259e1e);}}_0x416bfc&&(_0x259e1e['addCompone'+'nt']('render',Object['assign']({'type':'asset','meshInstances':_0x416bfc},_0x369ccd)),_0x259e1e['render']['assignAsse'+'t'](_0x1b4554));const _0xaf3760=_0x2cbc33['children'];for(let _0x1f2287=0x16bb+0x8c3+0x1d*-0x116;_0x1f2287<_0xaf3760['length'];_0x1f2287++){const _0x486df0=_0x560ca6(_0x46f6e4,_0xaf3760[_0x1f2287],_0x1100a4);_0x259e1e['addChild'](_0x486df0);}return _0x259e1e;},_0x1c900a=[];for(const _0x385bc5 of this['data']['scenes'])_0x1c900a['push'](_0x560ca6(null,_0x385bc5,this['data']));return _0x5a883c['forEach'](_0x2b2277=>{_0x2b2277['meshInstan'+'ce']['skinInstan'+'ce']=il['createCach'+'edSkinInst'+'ance'](_0x2b2277['meshInstan'+'ce']['mesh']['skin'],_0x2b2277['rootBone'],_0x2b2277['entity']),_0x2b2277['meshInstan'+'ce']['node']['render']['rootBone']=_0x2b2277['rootBone'];}),mr['createScen'+'eHierarchy'](_0x1c900a,lt);}['getMateria'+'lVariants'](){return this['data']['variants']?Object['keys'](this['data']['variants']):[];}['applyMater'+'ialVariant'](_0x289429,_0x26fea7){const _0xed4e64=_0x26fea7?this['data']['variants'][_0x26fea7]:null;if(_0xed4e64===void(0x16ad+0x82f+0x14*-0x18b)){w['warn']('No\x20variant'+'\x20named\x20'+_0x26fea7+('\x20exists\x20in'+'\x20resource'));return;}const _0x252d82=_0x289429['findCompon'+'ents']('render');for(let _0x1db3e2=0x1*-0xbb3+0x23ec*0x1+-0x1839;_0x1db3e2<_0x252d82['length'];_0x1db3e2++){const _0x2db2c2=_0x252d82[_0x1db3e2];this['_applyMate'+'rialVarian'+'t'](_0xed4e64,_0x2db2c2['meshInstan'+'ces']);}}['applyMater'+'ialVariant'+'Instances'](_0x5bf773,_0xbf99d4){const _0x3a3ca1=_0xbf99d4?this['data']['variants'][_0xbf99d4]:null;if(_0x3a3ca1===void(-0x2689+0xa*-0x351+0x1*0x47b3)){w['warn']('No\x20variant'+'\x20named\x20'+_0xbf99d4+('\x20exists\x20in'+'\x20resource'));return;}this['_applyMate'+'rialVarian'+'t'](_0x3a3ca1,_0x5bf773);}['_applyMate'+'rialVarian'+'t'](_0x29d7c4,_0x1006ca){_0x1006ca['forEach'](_0x5644b2=>{if(_0x29d7c4===null)_0x5644b2['material']=this['_defaultMa'+'terial'];else{const _0x5d0655=this['data']['meshVarian'+'ts'][_0x5644b2['mesh']['id']];_0x5d0655&&(_0x5644b2['material']=this['data']['materials'][_0x5d0655[_0x29d7c4]]);}w['assert'](_0x5644b2['material']);});}static['createScen'+'eHierarchy'](_0x5c0713,_0x6a2388){let _0x22c00e=null;if(_0x5c0713['length']===-0x1*-0x37a+-0x25a9+0x2230)_0x22c00e=_0x5c0713[-0x26a6+-0x76*0x2e+0x1*0x3bda];else{_0x22c00e=new _0x6a2388('SceneGroup');for(const _0x3eda40 of _0x5c0713)_0x22c00e['addChild'](_0x3eda40);}return _0x22c00e;}static['createMode'+'l'](_0x28ea8f,_0x4599ac){const _0x5032e8=function(_0x2e4c68,_0x13da7f,_0x56e79e,_0x273ef9,_0x47d362,_0x50a434,_0x536d1c){const _0x2d1d1e=_0x28ea8f['meshDefaul'+'tMaterials'][_0x13da7f['id']],_0x1d23cb=_0x2d1d1e===void(0x2*-0xc7c+0xc23+0xcd5)?_0x4599ac:_0x47d362[_0x2d1d1e],_0xa91a94=new He(_0x13da7f,_0x1d23cb,_0x50a434);if(_0x13da7f['morph']){const _0x5b9c3e=new _a(_0x13da7f['morph']);_0xa91a94['morphInsta'+'nce']=_0x5b9c3e,_0x2e4c68['morphInsta'+'nces']['push'](_0x5b9c3e);}if(_0x536d1c['hasOwnProp'+'erty']('skin')){const _0x6e50d3=_0x536d1c['skin'],_0x214f9f=_0x56e79e[_0x6e50d3];_0x13da7f['skin']=_0x214f9f;const _0x2499a4=_0x273ef9[_0x6e50d3];_0xa91a94['skinInstan'+'ce']=_0x2499a4,_0x2e4c68['skinInstan'+'ces']['push'](_0x2499a4);}_0x2e4c68['meshInstan'+'ces']['push'](_0xa91a94);},_0x536399=new tr(),_0x241c85=[];for(const _0x1115ed of _0x28ea8f['skins']){const _0x124540=new xl(_0x1115ed);_0x124540['bones']=_0x1115ed['bones'],_0x241c85['push'](_0x124540);}_0x536399['graph']=mr['createScen'+'eHierarchy'](_0x28ea8f['scenes'],Ie);for(let _0x31f47d=-0x5a8*-0x5+-0xb8a+0x1*-0x10be;_0x31f47d<_0x28ea8f['nodes']['length'];_0x31f47d++){const _0x4c4f80=_0x28ea8f['nodes'][_0x31f47d];if(_0x4c4f80['root']===_0x536399['graph']){const _0x255816=_0x28ea8f['gltf']['nodes'][_0x31f47d];if(_0x255816['hasOwnProp'+'erty']('mesh')){const _0x37b3b5=_0x28ea8f['renders'][_0x255816['mesh']]['meshes'];for(let _0x1a50e9=-0x635+0x5b*0x1+0xe*0x6b;_0x1a50e9<_0x37b3b5['length'];_0x1a50e9++){const _0x17b0d4=_0x37b3b5[_0x1a50e9];_0x17b0d4&&_0x5032e8(_0x536399,_0x17b0d4,_0x28ea8f['skins'],_0x241c85,_0x28ea8f['materials'],_0x4c4f80,_0x255816);}}}}return _0x536399;}['destroy'](){const _0x5bcb76=this['_assets'],_0x6614af=function(_0x4ff321){_0x5bcb76['remove'](_0x4ff321),_0x4ff321['unload']();},_0x2d5ce1=function(_0x2158c0){_0x2158c0['forEach'](_0x6e66ac=>{_0x6614af(_0x6e66ac);});};this['animations']&&(_0x2d5ce1(this['animations']),this['animations']=null),this['textures']&&(_0x2d5ce1(this['textures']),this['textures']=null),this['materials']&&(_0x2d5ce1(this['materials']),this['materials']=null),this['renders']&&(_0x2d5ce1(this['renders']),this['renders']=null),this['_model']&&(_0x6614af(this['_model']),this['_model']=null),this['data']=null,this['assets']=null;}}class pN{constructor(_0x1be74c,_0x2f3fc4,_0x38bc98){this['_device']=_0x1be74c,this['_assets']=_0x2f3fc4,this['_defaultMa'+'terial']=mh['createDefa'+'ultMateria'+'l'](),this['maxRetries']=_0x38bc98;}['_getUrlWit'+'houtParams'](_0x278dfd){return _0x278dfd['indexOf']('?')>=-0x17dc+0x219d+-0x9c1?_0x278dfd['split']('?')[-0x25*-0xdb+0x2696+0x1*-0x463d]:_0x278dfd;}['load'](_0x162318,_0x5f3b60,_0x27806c){pe['fetchArray'+'Buffer'](_0x162318['load'],(_0x1a15bf,_0x15a937)=>{_0x1a15bf?_0x5f3b60(_0x1a15bf):mh['parse'](this['_getUrlWit'+'houtParams'](_0x162318['original']),xe['extractPat'+'h'](_0x162318['load']),_0x15a937,this['_device'],_0x27806c['registry'],_0x27806c['options'],(_0x19b0e2,_0x3a089f)=>{_0x19b0e2?_0x5f3b60(_0x19b0e2):_0x5f3b60(null,new mr(_0x3a089f,_0x27806c,this['_assets'],this['_defaultMa'+'terial']));});},_0x27806c,this['maxRetries']);}['open'](_0x5e3630,_0x5e3b89,_0x377874){return _0x5e3b89;}['patch'](_0x228f3c,_0x5e117f){}}class mN extends Qe{constructor(_0x4315ed){super(_0x4315ed,'container'),this['glbContain'+'erParser']=new pN(_0x4315ed['graphicsDe'+'vice'],_0x4315ed['assets'],-0x35b*0x7+-0xa5d+0x10ed*0x2),this['parsers']={};}set['maxRetries'](_0x23ee62){this['glbContain'+'erParser']['maxRetries']=_0x23ee62;for(const _0xab4cc2 in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0xab4cc2)&&(this['parsers'][_0xab4cc2]['maxRetries']=_0x23ee62);}get['maxRetries'](){return this['glbContain'+'erParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x15749c){return _0x15749c['indexOf']('?')>=-0x14e3*0x1+-0x2b*0x10+-0x1*-0x1793?_0x15749c['split']('?')[-0x1fe7+0x29c+0x1d4b]:_0x15749c;}['_getParser'](_0x4827dd){const _0x574dc5=_0x4827dd?xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x4827dd))['toLowerCas'+'e']()['replace']('.',''):null;return this['parsers'][_0x574dc5]||this['glbContain'+'erParser'];}['load'](_0x11fcb0,_0x185af8,_0x395ec1){typeof _0x11fcb0=='string'&&(_0x11fcb0={'load':_0x11fcb0,'original':_0x11fcb0}),this['_getParser'](_0x11fcb0['original'])['load'](_0x11fcb0,_0x185af8,_0x395ec1);}['open'](_0xcb34ad,_0x3695e6,_0x13c110){return this['_getParser'](_0xcb34ad)['open'](_0xcb34ad,_0x3695e6,_0x13c110);}}class _N extends Qe{constructor(_0x17643b){super(_0x17643b,'css'),h(this,'decoder',null);}['load'](_0x422ad6,_0x587b1e){typeof _0x422ad6=='string'&&(_0x422ad6={'load':_0x422ad6,'original':_0x422ad6}),ot['get'](_0x422ad6['load'],{'retry':this['maxRetries']>-0x227+0x623+-0x3*0x154,'maxRetries':this['maxRetries']},(_0x2b618a,_0x2f84a8)=>{_0x2b618a?_0x587b1e('Error\x20load'+'ing\x20css\x20re'+'source:\x20'+_0x422ad6['original']+'\x20['+_0x2b618a+']'):_0x587b1e(null,_0x2f84a8);});}['openBinary'](_0x45151a){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x45151a);}}class gN extends Qe{constructor(_0x1796ae){super(_0x1796ae,'cubemap'),this['_device']=_0x1796ae['graphicsDe'+'vice'],this['_registry']=_0x1796ae['assets'],this['_loader']=_0x1796ae['loader'];}['load'](_0x20c6e3,_0x358ea4,_0x560133){this['loadAssets'](_0x560133,_0x358ea4);}['open'](_0x344875,_0x393d00,_0x12a261){return _0x12a261?_0x12a261['resource']:null;}['patch'](_0x20f998,_0x553c39){this['loadAssets'](_0x20f998,(_0x2f5085,_0x123abb)=>{_0x2f5085&&(_0x553c39['fire']('error',_0x20f998),_0x553c39['fire']('error:'+_0x20f998['id'],_0x2f5085,_0x20f998),_0x20f998['fire']('error',_0x20f998));});}['getAssetId'+'s'](_0x540651){const _0xb9727f=[];if(_0xb9727f[-0x1*-0x191f+0xb6*0x15+-0x280d*0x1]=_0x540651['file'],(_0x540651['loadFaces']||!_0x540651['file'])&&_0x540651['data']&&_0x540651['data']['textures']){for(let _0x2852b2=0x124f+0x2*-0xb83+-0x1*-0x4b7;_0x2852b2<0x23ab+-0x4*-0x89f+-0xd*0x565;++_0x2852b2)_0xb9727f[_0x2852b2+(0xf53*-0x2+0x1*-0x39a+-0x4f*-0x6f)]=_0x540651['data']['textures'][_0x2852b2];}else _0xb9727f[0x2f*0x51+0x4*0x64+0x3*-0x57a]=_0xb9727f[0xb*0x97+-0x214+-0xa1*0x7]=_0xb9727f[-0x1a5a+0x502+0x155b]=_0xb9727f[0x4a7*-0x3+-0x1d*-0x43+0x662]=_0xb9727f[-0x1def+-0x1*0x2267+0x405b]=_0xb9727f[-0x15*0x3d+0x1*-0xe2f+0x1336]=null;return _0xb9727f;}['compareAss'+'etIds'](_0x528a05,_0x2f6995){return _0x528a05&&_0x2f6995?parseInt(_0x528a05,-0x22ab+0x1a*0x24+0x1f0d)===_0x528a05||typeof _0x528a05=='string'?_0x528a05===_0x2f6995:_0x528a05['url']===_0x2f6995['url']:_0x528a05!==null==(_0x2f6995!==null);}['update'](_0x510a30,_0x5915f9,_0x43341e){const _0x1ca9c9=_0x510a30['data']||{},_0x11a832=_0x510a30['_handlerSt'+'ate']['assets'],_0x2d786e=_0x510a30['_resources'];let _0x1bfd77,_0x3db3a1,_0x7055c6;const _0x2a3b70=[null,null,null,null,null,null,null],_0xa4c4c1=function(){return _0x1ca9c9['hasOwnProp'+'erty']('type')?_0x1ca9c9['type']:_0x1ca9c9['hasOwnProp'+'erty']('rgbm')?_0x1ca9c9['rgbm']?Ki:Ms:null;};if(!_0x510a30['loaded']||_0x43341e[-0x1*-0x2029+-0x6*-0x216+-0x1*0x2cad]!==_0x11a832[-0x2089+0x407*-0x4+0x251*0x15]){if(_0x43341e[0x24cd*0x1+-0x1*-0xec7+-0x3394]){if(_0x1bfd77=_0x43341e[0x543+-0x83b+0x2*0x17c]['resource'],_0x1bfd77['cubemap']){for(_0x7055c6=-0x2*0x41a+0x31a*0x2+0x10*0x20;_0x7055c6<0x126e+0x400+-0x1668;++_0x7055c6)_0x2a3b70[_0x7055c6+(-0xdc9+-0x201e+0x2de8*0x1)]=new _e(this['_device'],{'name':_0x510a30['name']+('_prelitCub'+'emap')+(_0x1bfd77['width']>>_0x7055c6),'cubemap':!(-0x2*-0x80b+-0x6cd+0x1*-0x949),'type':_0xa4c4c1()||_0x1bfd77['type'],'width':_0x1bfd77['width']>>_0x7055c6,'height':_0x1bfd77['height']>>_0x7055c6,'format':_0x1bfd77['format'],'levels':[_0x1bfd77['_levels'][_0x7055c6]],'addressU':ue,'addressV':ue,'mipmaps':_0x7055c6===-0x1*0xe2d+0xd22+0x10b});}else _0x2a3b70[0x1f0a+-0x2a1+-0x1c68]=_0x1bfd77;}}else _0x2a3b70[0x6d*-0x49+0x4*0x6eb+0x36a]=_0x2d786e[-0xb69+-0x5*-0x5ed+-0x1237]||null,_0x2a3b70[-0x230b+0x1901*-0x1+0x3c0e]=_0x2d786e[0x1*-0x1cb5+0x5d*0x31+0xaea]||null,_0x2a3b70[0x1e77+0x1*-0xd20+-0x1154*0x1]=_0x2d786e[-0x3*-0x133+0xb*-0x10e+0x804]||null,_0x2a3b70[0x1dd5+-0x3f9*0x4+0x5*-0x2c9]=_0x2d786e[0x187b*0x1+0x2f5*-0x4+-0xca3]||null,_0x2a3b70[-0x1901+-0x700+-0x2*-0x1003]=_0x2d786e[0x881*-0x3+-0x4e+-0x2*-0xceb]||null,_0x2a3b70[-0x421*-0x6+-0x11be+-0x8a*0xd]=_0x2d786e[-0x1562+-0x2*0x1192+0x388c]||null;const _0x299746=_0x43341e['slice'](0x24*-0xa7+-0xd9f+0x251c);if(!_0x510a30['loaded']||!this['cmpArrays'](_0x299746,_0x11a832['slice'](-0x1bb1+0x188*0x17+-0x786))){if(_0x299746['indexOf'](null)===-(-0x18f8+-0xc*0x59+0x1d25)){const _0xf7313e=_0x299746['map'](_0x4c2cd2=>_0x4c2cd2['resource']),_0x1ac926=[];for(_0x3db3a1=0x97a*-0x1+0x16e0+-0x6b3*0x2;_0x3db3a1<_0xf7313e[-0x2333+0x23db+-0xa8]['_levels']['length'];++_0x3db3a1)_0x1ac926['push'](_0xf7313e['map'](_0x221849=>_0x221849['_levels'][_0x3db3a1]));const _0x58871b=_0xf7313e[0x1*0x20e3+0x1dc1+-0x3ea4]['format'],_0x2a2a12=new _e(this['_device'],{'name':_0x510a30['name']+'_faces','cubemap':!(0x1248+0x1e62+-0x30aa),'type':_0xa4c4c1()||_0xf7313e[0x11e*0x1+0xd32+-0xe50]['type'],'width':_0xf7313e[0x1*0xf8e+-0x75*-0xd+-0x157f]['width'],'height':_0xf7313e[-0x23*0xdf+-0x32*-0x23+0x17a7]['height'],'format':_0x58871b===wr?Ne:_0x58871b,'mipmaps':_0x1ca9c9['mipmaps']??!(-0x13ec+0x1*0x2a1+0x114b),'levels':_0x1ac926,'minFilter':_0x1ca9c9['hasOwnProp'+'erty']('minFilter')?_0x1ca9c9['minFilter']:_0xf7313e[0x1798+-0x5c4+-0x4*0x475]['minFilter'],'magFilter':_0x1ca9c9['hasOwnProp'+'erty']('magFilter')?_0x1ca9c9['magFilter']:_0xf7313e[0x280+-0x1d67+-0x61*-0x47]['magFilter'],'anisotropy':_0x1ca9c9['hasOwnProp'+'erty']('anisotropy')?_0x1ca9c9['anisotropy']:0x4ad+-0x9dd*-0x3+-0x2243,'addressU':ue,'addressV':ue});_0x2a3b70[0x20eb+-0x3f8*-0x9+0x1*-0x44a3]=_0x2a2a12;}}else _0x2a3b70[-0x1fcd+-0xb*-0x21+0x1e62]=_0x2d786e[-0x2061+0x1168+0x1*0xef9]||null;if(!this['cmpArrays'](_0x2a3b70,_0x2d786e)){for(_0x510a30['resources']=_0x2a3b70,_0x510a30['_handlerSt'+'ate']['assetIds']=_0x5915f9,_0x510a30['_handlerSt'+'ate']['assets']=_0x43341e,_0x7055c6=0x1d5+-0x55*0x63+0x1f0a;_0x7055c6<_0x2d786e['length'];++_0x7055c6)_0x2d786e[_0x7055c6]!==null&&_0x2a3b70['indexOf'](_0x2d786e[_0x7055c6])===-(0x5*-0x51b+0x1bd8+-0x25*0x10)&&_0x2d786e[_0x7055c6]['destroy']();}for(_0x7055c6=0x170+0x3*0xc83+-0x38b*0xb;_0x7055c6<_0x11a832['length'];++_0x7055c6)_0x11a832[_0x7055c6]!==null&&_0x43341e['indexOf'](_0x11a832[_0x7055c6])===-(-0x9b*0x8+-0x147*-0x6+-0x2d1)&&_0x11a832[_0x7055c6]['unload']();}['cmpArrays'](_0x303225,_0x1cebc1){if(_0x303225['length']!==_0x1cebc1['length'])return!(0x1a9e+0x10f3*0x1+-0x2b90);for(let _0x437e0b=0xb1d*-0x1+-0x24a4+0xf*0x32f;_0x437e0b<_0x303225['length'];++_0x437e0b)if(_0x303225[_0x437e0b]!==_0x1cebc1[_0x437e0b])return!(-0x2393+-0x61f+0x29b3);return!(0x1ca*0xe+0x1574+-0x180*0x1f);}['resolveId'](_0x230280){const _0xbea600=parseInt(_0x230280,0x6*0x2ab+0x17*-0x11f+0x9d1*0x1);return _0xbea600===_0x230280||_0xbea600['toString']()===_0x230280?_0xbea600:_0x230280;}['loadAssets'](_0x336565,_0x293b80){_0x336565['hasOwnProp'+'erty']('_handlerSt'+'ate')||(_0x336565['_handlerSt'+'ate']={'assetIds':[null,null,null,null,null,null,null],'assets':[null,null,null,null,null,null,null]});const _0x4e6b02=this,_0x5c7e10=_0x4e6b02['getAssetId'+'s'](_0x336565),_0x5e5a3d=[null,null,null,null,null,null,null],_0xc9f269=_0x336565['_handlerSt'+'ate']['assetIds'],_0x2ecd2e=_0x336565['_handlerSt'+'ate']['assets'],_0x2d9214=_0x4e6b02['_registry'];let _0x3a28f7=0x23*0x49+-0x13a0+-0x9ac*-0x1;const _0x1c0ea1=function(_0x4a84ef,_0x1706b8){_0x5e5a3d[_0x4a84ef]=_0x1706b8,_0x3a28f7--,_0x3a28f7===0x14b7+-0x9a8+0x13*-0x95&&(_0x4e6b02['update'](_0x336565,_0x5c7e10,_0x5e5a3d),_0x293b80(null,_0x336565['resources']));},_0x26e322=function(_0x5abf7f,_0x32eb2b,_0x40fe2f){_0x293b80(_0x32eb2b);},_0x5c9bd5=function(_0x436103,_0x54d55c){_0x54d55c['loaded']?_0x1c0ea1(_0x436103,_0x54d55c):(_0x2d9214['once']('load:'+_0x54d55c['id'],_0x1c0ea1['bind'](_0x4e6b02,_0x436103)),_0x2d9214['once']('error:'+_0x54d55c['id'],_0x26e322['bind'](_0x4e6b02,_0x436103)),_0x54d55c['loading']||_0x2d9214['load'](_0x54d55c));};let _0x9650dd;for(let _0xb5c34b=-0x1*0x1a9f+-0x1ec7+-0x991*-0x6;_0xb5c34b<-0xd61+0xfc3+-0x25b;++_0xb5c34b){const _0x480b94=this['resolveId'](_0x5c7e10[_0xb5c34b]);if(!_0x480b94)_0x1c0ea1(_0xb5c34b,null);else{if(_0x4e6b02['compareAss'+'etIds'](_0x480b94,_0xc9f269[_0xb5c34b]))_0x5c9bd5(_0xb5c34b,_0x2ecd2e[_0xb5c34b]);else{if(parseInt(_0x480b94,0xa2*0x1+0x1d67+-0x1dff)===_0x480b94)_0x9650dd=_0x2d9214['get'](_0x480b94),_0x9650dd?_0x5c9bd5(_0xb5c34b,_0x9650dd):setTimeout(((_0x199e5b,_0x3d3e54)=>{const _0x1165e5=_0x2d9214['get'](_0x3d3e54);_0x1165e5?_0x5c9bd5(_0x199e5b,_0x1165e5):_0x26e322(_0x199e5b,'failed\x20to\x20'+'find\x20depen'+'dent\x20cubem'+'ap\x20asset='+_0x3d3e54);})['bind'](null,_0xb5c34b,_0x480b94));else{const _0x576936=typeof _0x480b94=='string'?{'url':_0x480b94,'filename':_0x480b94}:_0x480b94,_0x257610=_0x576936['url']['search']('.dds')===-(0x120*0xb+-0xfb0+0x3*0x11b)?{'type':'rgbp','addressu':'clamp','addressv':'clamp','mipmaps':!(0x323+0x1*0x6a5+0x1*-0x9c7)}:null;_0x9650dd=new pe(_0x336565['name']+'_part_'+_0xb5c34b,'texture',_0x576936,_0x257610),_0x2d9214['add'](_0x9650dd),_0x5c9bd5(_0xb5c34b,_0x9650dd);}}}}}}class SN extends Qe{constructor(_0x5291b8){super(_0x5291b8,'folder');}['load'](_0xbda3bd,_0x1bb4a3){_0x1bb4a3(null,null);}}class Wg{constructor(_0x35029e,_0x5e174d){this['type']=_0x5e174d&&_0x5e174d['type']||dh,this['em']=0x13c0+-0x236+-0x1*0x1189,this['textures']=_0x35029e,this['intensity']=0x2421+0x2*-0x6fe+-0x1*0x1625,this['_data']=null,this['data']=_0x5e174d;}set['data'](_0x3a4c99){if(this['_data']=_0x3a4c99,!!_0x3a4c99&&(this['_data']['intensity']!==void(0xe7d*0x1+-0x2a1*0x3+0xa*-0xa9)&&(this['intensity']=this['_data']['intensity']),this['_data']['info']||(this['_data']['info']={}),(!this['_data']['version']||this['_data']['version']<0x631+0x14f*-0xb+0x836)&&(this['_data']['info']['maps']=[{'width':this['_data']['info']['width'],'height':this['_data']['info']['height']}],this['_data']['chars']))){for(const _0x423957 in this['_data']['chars'])this['_data']['chars'][_0x423957]['map']=0x22e5+-0x1*-0x1ade+-0x3dc3;}}get['data'](){return this['_data'];}}function af(_0x534c4b){return _0x534c4b['version']<-0x14a4+0x7eb+0xcbc&&(_0x534c4b['version']<-0xe67*0x1+-0x1*0x345+0x11ae&&(_0x534c4b['info']['maps']=_0x534c4b['info']['maps']||[{'width':_0x534c4b['info']['width'],'height':_0x534c4b['info']['height']}]),_0x534c4b['chars']=Object['keys'](_0x534c4b['chars']||{})['reduce']((_0x526e94,_0x2129c6)=>{const _0x458b6f=_0x534c4b['chars'][_0x2129c6],_0x269b23=_0x458b6f['letter']!==void(0x1f0b+-0x5b*-0x4f+-0x3b20)?_0x458b6f['letter']:Tc['fromCodePo'+'int'](_0x2129c6);return _0x534c4b['version']<0xf99*-0x1+-0x1dc4+0x2d5f&&(_0x458b6f['map']=_0x458b6f['map']||-0x1e6d+0x73*-0x1f+0x2c5a),_0x526e94[_0x269b23]=_0x458b6f,_0x526e94;},{}),_0x534c4b['version']=-0x25c0+0x17e9*0x1+0xdda),_0x534c4b;}class yN extends Qe{constructor(_0x253b18){super(_0x253b18,'font'),this['_loader']=_0x253b18['loader'],this['maxRetries']=-0x2a5*-0x9+0x9d5+-0x59b*0x6;}['load'](_0x5a8eaa,_0x164ca1,_0x3b80c9){typeof _0x5a8eaa=='string'&&(_0x5a8eaa={'load':_0x5a8eaa,'original':_0x5a8eaa});const _0x4d7d93=this;xe['getExtensi'+'on'](_0x5a8eaa['original'])==='.json'?ot['get'](_0x5a8eaa['load'],{'retry':this['maxRetries']>0x1fe4+-0xc27+-0xa3*0x1f,'maxRetries':this['maxRetries']},(_0x331c96,_0x413463)=>{if(_0x331c96)_0x164ca1('Error\x20load'+'ing\x20font\x20r'+'esource:\x20'+_0x5a8eaa['original']+'\x20['+_0x331c96+']');else{const _0x5af94e=af(_0x413463);_0x4d7d93['_loadTextu'+'res'](_0x5a8eaa['load']['replace']('.json','.png'),_0x5af94e,(_0x137ee6,_0x436250)=>{_0x137ee6?_0x164ca1(_0x137ee6):_0x164ca1(null,{'data':_0x5af94e,'textures':_0x436250});});}}):(_0x3b80c9&&_0x3b80c9['data']&&(_0x3b80c9['data']=af(_0x3b80c9['data'])),this['_loadTextu'+'res'](_0x5a8eaa['load'],_0x3b80c9&&_0x3b80c9['data'],_0x164ca1));}['_loadTextu'+'res'](_0x5a4079,_0x3a70cd,_0x5f125f){const _0x18b99d=_0x3a70cd['info']['maps']['length'];let _0x32efe4=-0x6fe*0x5+0x737*0x4+-0x16*-0x47,_0x22ae24=null;const _0x3ae404=new Array(_0x18b99d),_0x468505=this['_loader'],_0x2b2136=function(_0x337a25){const _0x40d29c=function(_0x33bb83,_0x1e50d1){if(!_0x22ae24){if(_0x33bb83){_0x22ae24=_0x33bb83,_0x5f125f(_0x33bb83);return;}_0x1e50d1['upload'](),_0x3ae404[_0x337a25]=_0x1e50d1,_0x32efe4++,_0x32efe4===_0x18b99d&&_0x5f125f(null,_0x3ae404);}};_0x337a25===-0x1179+-0x1fe4+0x315d?_0x468505['load'](_0x5a4079,'texture',_0x40d29c):_0x468505['load'](_0x5a4079['replace']('.png',_0x337a25+'.png'),'texture',_0x40d29c);};for(let _0x1fc5aa=-0x1dc2+-0x23b5+-0x4177*-0x1;_0x1fc5aa<_0x18b99d;_0x1fc5aa++)_0x2b2136(_0x1fc5aa);}['open'](_0x417a24,_0x5b4217,_0x2d2e19){let _0x5481a7;return _0x5b4217['textures']?_0x5481a7=new Wg(_0x5b4217['textures'],_0x5b4217['data']):_0x5481a7=new Wg(_0x5b4217,null),_0x5481a7;}['patch'](_0x4dcadf,_0x588fe9){const _0xbbee8a=_0x4dcadf['resource'];!_0xbbee8a['data']&&_0x4dcadf['data']?_0xbbee8a['data']=_0x4dcadf['data']:!_0x4dcadf['data']&&_0xbbee8a['data']&&(_0x4dcadf['data']=_0xbbee8a['data']),_0x4dcadf['data']&&(_0x4dcadf['data']=af(_0x4dcadf['data']));}}async function vN(){const _0x3387f4=0x11*-0x73+-0x2191+-0xa4d*-0x4+0.28209479177387814;class _0x43b8f7{constructor(_0x22ba84,_0x16da4f,_0x20d5ed){this['x']=_0x22ba84,this['y']=_0x16da4f,this['z']=_0x20d5ed;}}class _0x446348{constructor(_0x400964,_0x312445,_0x308a3c,_0x2c1522){this['x']=_0x400964,this['y']=_0x312445,this['z']=_0x308a3c,this['w']=_0x2c1522;}}class _0x267b50{constructor(_0x4a9757,_0x9c8274,_0x39e3dd,_0x524f1b){this['x']=_0x4a9757,this['y']=_0x9c8274,this['z']=_0x39e3dd,this['w']=_0x524f1b;}['set'](_0x3ca4da,_0x28e25d,_0x5a18a5,_0x3af73e){this['x']=_0x3ca4da,this['y']=_0x28e25d,this['z']=_0x5a18a5,this['w']=_0x3af73e;}}class _0xc041ec{constructor(_0x349ae4,_0x195dc9,_0x278a01,_0x9d602b,_0x196f39,_0x51e899,_0x202520,_0x273392,_0x1e3bf7,_0x4ead56,_0x4e2af1,_0x108afd,_0xee6440,_0x2924c2){const _0x2e66aa=(_0xa88d83,_0x52eaa8)=>{const _0x1548f8=(-0x1*-0x20c7+-0x65*0x2d+-0xf05<<_0x52eaa8)-(0x2623+0x7f2+-0x2e14*0x1);return(_0xa88d83&_0x1548f8)/_0x1548f8;},_0x248c72=(_0x51d2b8,_0x3a2a86)=>{_0x51d2b8['x']=_0x2e66aa(_0x3a2a86>>>-0x5*0x4b+-0x1*-0x243+-0xb7,0x38b+0x3b*0x73+0x1*-0x1e01),_0x51d2b8['y']=_0x2e66aa(_0x3a2a86>>>-0x1c81+0x1*-0x26cb+0x4357*0x1,-0x512+0xbd6+0xe*-0x7b),_0x51d2b8['z']=_0x2e66aa(_0x3a2a86,0xb5f*-0x2+-0x5*0x13e+0x1cff);},_0x35a1c0=(_0xef9dca,_0x2fadb7)=>{_0xef9dca['x']=_0x2e66aa(_0x2fadb7>>>0x11db+-0x140+-0x1083,0x47*-0x3+0x13f3*0x1+-0x1316),_0xef9dca['y']=_0x2e66aa(_0x2fadb7>>>0x1129*0x1+0x5a1+0xb5d*-0x2,-0x1*0x258d+0x202*-0x3+0x1*0x2b9b),_0xef9dca['z']=_0x2e66aa(_0x2fadb7>>>0x49*0x1+-0x6b*0x29+0x10e2,-0x6*0xc6+0x1*-0x13+0xf3*0x5),_0xef9dca['w']=_0x2e66aa(_0x2fadb7,-0xb56+-0x1*-0xc11+-0xb3);},_0x20a9d3=(_0x19ffc2,_0x56cd18)=>{const _0x484cf8=(0x5*0x6ce+-0xd6*0x1+0x6a3*-0x5)/(Math['sqrt'](-0x1b56+0xe1d+-0x3*-0x469)*(-0x1*0x487+0xf8e+-0x1*0xb07+0.5)),_0x755b0f=(_0x2e66aa(_0x56cd18>>>0x19*0x88+0x8c*-0x2c+0xadc,-0xe6a+0x57*0x6c+-0x1640)-(0x17a8*0x1+-0x22ac+0xb04+0.5))*_0x484cf8,_0x49856f=(_0x2e66aa(_0x56cd18>>>0x1e27+0xb7e+-0x299b,0x10c6+-0x69*-0x53+0x3*-0x10ed)-(0x7*-0x441+0x4c0+-0x2b*-0x95+0.5))*_0x484cf8,_0x4868d8=(_0x2e66aa(_0x56cd18,0x1136+-0xdee+-0x33e)-(0x1796*0x1+0x39c*0x1+-0x1b32+0.5))*_0x484cf8,_0x4d9ace=Math['sqrt'](0x935+-0x1b7*-0x9+0x77*-0x35-(_0x755b0f*_0x755b0f+_0x49856f*_0x49856f+_0x4868d8*_0x4868d8));switch(_0x56cd18>>>0x1*0x1ba+-0x1c52+0x1ab6){case 0x33d*-0x2+0x1f+-0x1*-0x65b:_0x19ffc2['set'](_0x755b0f,_0x49856f,_0x4868d8,_0x4d9ace);break;case-0xfbb+0x16a0+0x62*-0x12:_0x19ffc2['set'](_0x4d9ace,_0x49856f,_0x4868d8,_0x755b0f);break;case 0xd*-0x147+-0x1*0x4be+0x4d*0x47:_0x19ffc2['set'](_0x49856f,_0x4d9ace,_0x4868d8,_0x755b0f);break;case-0x2ed*0x2+0x14bf+-0xee2:_0x19ffc2['set'](_0x49856f,_0x4868d8,_0x4d9ace,_0x755b0f);break;}},_0x1915c2=(_0x5a5b4f,_0xf66758,_0x55822c)=>_0x5a5b4f*(0x190a+-0x8f5*-0x2+0xe51*-0x3-_0x55822c)+_0xf66758*_0x55822c,_0x1a0463=[-0x682+0xc2b+0x5a6*-0x1,0x12d8+0x37*-0x45+-0x3fd*0x1,-0x1891+-0x35*-0x11+0x709*0x3][_0x202520-(-0x12c9*0x1+0x3ab*0x8+-0xa8e)],_0x4e507b=-0x1e86+-0x846+-0x1*-0x26d2;this['read']=_0x4985cb=>{const _0x2b6eb9=Math['floor'](_0x4985cb/(0x13*-0x57+0x78f+0x1a*-0x1))*_0x195dc9;if(_0x273392&&(_0x248c72(_0x273392,_0x278a01[_0x4985cb*_0x4e507b+(-0x1f*-0x2d+-0xe26+0x8b3)]),_0x273392['x']=_0x1915c2(_0x349ae4[_0x2b6eb9+(-0x12a0+-0x1*0x1256+-0xf9*-0x26)],_0x349ae4[_0x2b6eb9+(0x1733*0x1+0x2*-0x2ef+-0x1152)],_0x273392['x']),_0x273392['y']=_0x1915c2(_0x349ae4[_0x2b6eb9+(0x2a5*0xd+0x14a4+-0x3704)],_0x349ae4[_0x2b6eb9+(-0x1116*-0x1+-0x20b*-0x2+-0x1*0x1528)],_0x273392['y']),_0x273392['z']=_0x1915c2(_0x349ae4[_0x2b6eb9+(0x1*0x20ef+-0x1330*-0x1+-0x341d)],_0x349ae4[_0x2b6eb9+(-0x5*-0x61b+0x4a5*0x5+0x395*-0xf)],_0x273392['z'])),_0x1e3bf7&&_0x20a9d3(_0x1e3bf7,_0x278a01[_0x4985cb*_0x4e507b+(-0x2085+0x1e1+0x5*0x621)]),_0x4ead56&&(_0x248c72(_0x4ead56,_0x278a01[_0x4985cb*_0x4e507b+(0x138b*-0x1+-0x1779*-0x1+-0x1*0x3ec)]),_0x4ead56['x']=_0x1915c2(_0x349ae4[_0x2b6eb9+(0xe5*-0x29+-0x10a1+-0x1aaa*-0x2)],_0x349ae4[_0x2b6eb9+(0x1013+0x2180+0x2*-0x18c5)],_0x4ead56['x']),_0x4ead56['y']=_0x1915c2(_0x349ae4[_0x2b6eb9+(0x32c+-0xbf3+-0x8ce*-0x1)],_0x349ae4[_0x2b6eb9+(-0x5d9+-0xb2*0xa+0xcd7)],_0x4ead56['y']),_0x4ead56['z']=_0x1915c2(_0x349ae4[_0x2b6eb9+(0xe89+-0x1*0xc32+-0x24f)],_0x349ae4[_0x2b6eb9+(0xbfd*-0x3+0x9f7+-0x71*-0x3b)],_0x4ead56['z'])),_0x4e2af1&&(_0x35a1c0(_0x4e2af1,_0x278a01[_0x4985cb*_0x4e507b+(0x1963+0x825+0x1*-0x2185)]),_0x195dc9>0x15d0+0x1bc3+-0x3187*0x1&&(_0x4e2af1['x']=_0x1915c2(_0x349ae4[_0x2b6eb9+(-0xae5*-0x3+0x258c+-0x3*0x1765)],_0x349ae4[_0x2b6eb9+(0x7b7+0x1ad7+0x1*-0x227f)],_0x4e2af1['x']),_0x4e2af1['y']=_0x1915c2(_0x349ae4[_0x2b6eb9+(-0x19*0xd3+0x8db*0x1+0xbcd)],_0x349ae4[_0x2b6eb9+(0x1393*0x1+0x24bf+0x2f6*-0x13)],_0x4e2af1['y']),_0x4e2af1['z']=_0x1915c2(_0x349ae4[_0x2b6eb9+(-0xc88+-0x3*-0x15b+-0x3*-0x2d7)],_0x349ae4[_0x2b6eb9+(-0x9*-0x17+0x477+-0x535)],_0x4e2af1['z']))),_0x108afd&&(_0x248c72(_0x108afd,_0x278a01[_0x4985cb*_0x4e507b+(0xb*-0x45+-0x629*0x1+0x924)]),_0x108afd['x']=_0x1915c2(_0x349ae4[_0x2b6eb9+(0x18b2+0xd*0x63+-0x1da7)],_0x349ae4[_0x2b6eb9+(0xe60+-0x1*0x23ab+0x1560)],_0x108afd['x']),_0x108afd['y']=_0x1915c2(_0x349ae4[_0x2b6eb9+(0x11*0x161+0x252e+-0x3c8c)],_0x349ae4[_0x2b6eb9+(0x1*-0x905+0xee9+-0x5ce)],_0x108afd['y']),_0x108afd['z']=_0x1915c2(_0x349ae4[_0x2b6eb9+(-0x7*0x212+-0x308*0x5+0x1dba)],_0x349ae4[_0x2b6eb9+(-0xebb+-0x1*0x2348+0x321a)],_0x108afd['z'])),_0xee6440&&(_0x248c72(_0xee6440,_0x278a01[_0x4985cb*_0x4e507b+(0x2*-0x131a+-0x22d6*0x1+0x490f)]),_0xee6440['x']=_0x1915c2(_0x349ae4[_0x2b6eb9+(-0x1c98+0x14e*0x7+0x138e)],_0x349ae4[_0x2b6eb9+(0xe40+-0xea8+0x2b*0x3)],_0xee6440['x']),_0xee6440['y']=_0x1915c2(_0x349ae4[_0x2b6eb9+(0x77*-0x26+-0x1*0x1b55+0x2d19)],_0x349ae4[_0x2b6eb9+(0x7a*0x11+0x21*0x3d+0xe*-0x122)],_0xee6440['y'])),_0x2924c2&&_0x202520>0x8c6+-0xbfd+0x337*0x1){const _0x417c3d=[_0x9d602b,_0x196f39,_0x51e899];for(let _0x3c822b=0x1fab+0x59d*0x3+-0x3082;_0x3c822b<0x3*-0x4bf+-0xea7+0x1*0x1ce7;++_0x3c822b)for(let _0x29e614=0x133e+-0xe32+0x11*-0x4c;_0x29e614<0x5*-0x676+-0x1e58+0x3eb5*0x1;++_0x29e614)_0x2924c2[_0x3c822b*(-0xa*0x6b+0x1488+-0x104b*0x1)+_0x29e614]=_0x29e614<_0x1a0463?_0x417c3d[_0x3c822b][_0x4985cb*(-0x3*-0x87+0x2170+-0x1d7*0x13)+_0x29e614]*((-0xc83+-0x2309+0x54*0x91)/(-0x9b4+0x11*0xbf+-0x1fc))-(-0x3*-0x5ae+-0x1638+0x532):-0x1f01*-0x1+0xc24+-0x2b25;}};}}self['onmessage']=async _0x2218d6=>{const {data:_0x280e34}=_0x2218d6;switch(_0x280e34['type']){case'initWorker':break;case'decompress':_0x11edf6(_0x280e34['numSplats'],_0x280e34['chunkData'],_0x280e34['chunkSize'],_0x280e34['vertexData'],_0x280e34['shData0'],_0x280e34['shData1'],_0x280e34['shData2'],_0x280e34['shBands']);break;}};const _0x11edf6=(_0x94d324,_0x4648d1,_0x15174,_0x50813a,_0x5dd1df,_0x560c61,_0x364ed8,_0xca29e2)=>{const _0x211cfc=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'];if(_0xca29e2>-0x243b+0x1*0x14e3+0x7ac*0x2){const _0xbd9783=[];for(let _0x1c2aba=0x1105+-0x7*0x34a+0x601;_0x1c2aba<-0x1*0x129b+0x16b3+-0x3b*0x11;++_0x1c2aba)_0xbd9783['push']('f_rest_'+_0x1c2aba);_0x211cfc['splice'](_0x211cfc['indexOf']('f_dc_0')+(-0x34d+0x2301+-0x3*0xa91),-0x1856+-0x13ec+0x2c42,..._0xbd9783);}const _0x330f21={};_0x211cfc['forEach'](_0x3abebd=>{_0x330f21[_0x3abebd]=new Float32Array(_0x94d324);});const _0x25ec6c=new _0x43b8f7(),_0x245dcc=new _0x267b50(),_0x4c4dd1=new _0x43b8f7(),_0x1d66b4=new _0x446348(),_0x3bed43=new _0x43b8f7(),_0x2327cb=new _0x43b8f7(),_0x5cefcb=_0xca29e2>0x1e7f*-0x1+-0x1228+0x109*0x2f?new Float32Array(0x2106+0x1ca8+0x3d81*-0x1):null,_0x28554a=new _0xc041ec(_0x4648d1,_0x15174,_0x50813a,_0x5dd1df,_0x560c61,_0x364ed8,_0xca29e2,_0x25ec6c,_0x245dcc,_0x4c4dd1,_0x1d66b4,_0x3bed43,_0x2327cb,_0x5cefcb);for(let _0x21588b=0x63*0x65+0x8ef+-0x17ff*0x2;_0x21588b<_0x94d324;++_0x21588b)if(_0x28554a['read'](_0x21588b),_0x330f21['x'][_0x21588b]=_0x25ec6c['x'],_0x330f21['y'][_0x21588b]=_0x25ec6c['y'],_0x330f21['z'][_0x21588b]=_0x25ec6c['z'],_0x330f21['rot_1'][_0x21588b]=_0x245dcc['x'],_0x330f21['rot_2'][_0x21588b]=_0x245dcc['y'],_0x330f21['rot_3'][_0x21588b]=_0x245dcc['z'],_0x330f21['rot_0'][_0x21588b]=_0x245dcc['w'],_0x330f21['scale_0'][_0x21588b]=_0x4c4dd1['x'],_0x330f21['scale_1'][_0x21588b]=_0x4c4dd1['y'],_0x330f21['scale_2'][_0x21588b]=_0x4c4dd1['z'],_0x330f21['motion_0'][_0x21588b]=_0x3bed43['x'],_0x330f21['motion_1'][_0x21588b]=_0x3bed43['y'],_0x330f21['motion_2'][_0x21588b]=_0x3bed43['z'],_0x330f21['t_scale'][_0x21588b]=_0x2327cb['x'],_0x330f21['t'][_0x21588b]=_0x2327cb['y'],_0x330f21['f_dc_0'][_0x21588b]=(_0x1d66b4['x']-(0x311*0xa+-0x15d*-0x1b+-0x4379+0.5))/_0x3387f4,_0x330f21['f_dc_1'][_0x21588b]=(_0x1d66b4['y']-(0x7*0x487+0x63*0x5b+-0x42e2+0.5))/_0x3387f4,_0x330f21['f_dc_2'][_0x21588b]=(_0x1d66b4['z']-(-0x16a+-0x412*0x3+0x2*0x6d0+0.5))/_0x3387f4,_0x330f21['opacity'][_0x21588b]=_0x1d66b4['w']<=-0x16ed+0x1*-0x234e+-0x1369*-0x3?-(-0x2*-0x4fd+-0x1f34*-0x1+-0x2906):_0x1d66b4['w']>=-0xf79+0xef*-0x29+0x21*0x1a1?-0x1b*-0x2b+-0x70f+0x2ae:-Math['log']((-0x53b+-0x7*0x128+-0x4*-0x355)/_0x1d66b4['w']-(0x1cc4+-0x20d*0x2+0x1*-0x18a9)),_0x5cefcb){for(let _0xbed8c0=-0x102+0x1cc9+-0xd*0x223;_0xbed8c0<0x1*0x1e21+-0x1a86+-0x1*0x36e;++_0xbed8c0)_0x330f21['f_rest_'+_0xbed8c0][_0x21588b]=_0x5cefcb[_0xbed8c0];}let _0x477a2b={'x':_0x330f21['x'],'y':_0x330f21['y'],'z':_0x330f21['z'],'rot_1':_0x330f21['rot_1'],'rot_2':_0x330f21['rot_2'],'rot_3':_0x330f21['rot_3'],'rot_0':_0x330f21['rot_0'],'scale_0':_0x330f21['scale_0'],'scale_1':_0x330f21['scale_1'],'scale_2':_0x330f21['scale_2'],'motion_0':_0x330f21['motion_0'],'motion_1':_0x330f21['motion_1'],'motion_2':_0x330f21['motion_2'],'t_scale':_0x330f21['t_scale'],'t':_0x330f21['t'],'f_dc_0':_0x330f21['f_dc_0'],'f_dc_1':_0x330f21['f_dc_1'],'f_dc_2':_0x330f21['f_dc_2'],'opacity':_0x330f21['opacity']};_0x5cefcb&&(_0x477a2b={..._0x477a2b,'f_rest_0':_0x330f21['f_rest_0'],'f_rest_1':_0x330f21['f_rest_1'],'f_rest_2':_0x330f21['f_rest_2'],'f_rest_3':_0x330f21['f_rest_3'],'f_rest_4':_0x330f21['f_rest_4'],'f_rest_5':_0x330f21['f_rest_5'],'f_rest_6':_0x330f21['f_rest_6'],'f_rest_7':_0x330f21['f_rest_7'],'f_rest_8':_0x330f21['f_rest_8'],'f_rest_9':_0x330f21['f_rest_9'],'f_rest_10':_0x330f21['f_rest_10'],'f_rest_11':_0x330f21['f_rest_11'],'f_rest_12':_0x330f21['f_rest_12'],'f_rest_13':_0x330f21['f_rest_13'],'f_rest_14':_0x330f21['f_rest_14'],'f_rest_15':_0x330f21['f_rest_15'],'f_rest_16':_0x330f21['f_rest_16'],'f_rest_17':_0x330f21['f_rest_17'],'f_rest_18':_0x330f21['f_rest_18'],'f_rest_19':_0x330f21['f_rest_19'],'f_rest_20':_0x330f21['f_rest_20'],'f_rest_21':_0x330f21['f_rest_21'],'f_rest_22':_0x330f21['f_rest_22'],'f_rest_23':_0x330f21['f_rest_23'],'f_rest_24':_0x330f21['f_rest_24'],'f_rest_25':_0x330f21['f_rest_25'],'f_rest_26':_0x330f21['f_rest_26'],'f_rest_27':_0x330f21['f_rest_27'],'f_rest_28':_0x330f21['f_rest_28'],'f_rest_29':_0x330f21['f_rest_29'],'f_rest_30':_0x330f21['f_rest_30'],'f_rest_31':_0x330f21['f_rest_31'],'f_rest_32':_0x330f21['f_rest_32'],'f_rest_33':_0x330f21['f_rest_33'],'f_rest_34':_0x330f21['f_rest_34'],'f_rest_35':_0x330f21['f_rest_35'],'f_rest_36':_0x330f21['f_rest_36'],'f_rest_37':_0x330f21['f_rest_37'],'f_rest_38':_0x330f21['f_rest_38'],'f_rest_39':_0x330f21['f_rest_39'],'f_rest_40':_0x330f21['f_rest_40'],'f_rest_41':_0x330f21['f_rest_41'],'f_rest_42':_0x330f21['f_rest_42'],'f_rest_43':_0x330f21['f_rest_43'],'f_rest_44':_0x330f21['f_rest_44']});const _0x23e434=Object['values'](_0x477a2b)['map'](_0x5f1f1b=>_0x5f1f1b['buffer']);self['postMessag'+'e']({'type':'decompress'+'ed','data':_0x477a2b},_0x23e434);};}class xN extends me{constructor(){super(),h(this,'worker'),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+vN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x4afe26=>{if(!this['worker'])return;const {data:_0x2ca8be}=_0x4afe26;switch(_0x2ca8be['type']){case'decompress'+'ed':console['log']('decompress'+'ed'),this['fire']('decompress'+'ed',_0x2ca8be['data']);break;}};}['decompress'](_0x3bafeb,_0x242fb5,_0x136c99,_0x4d02d0,_0x2498b6,_0x477940,_0x5b1269,_0x23d70b){const _0x40e1b2=[_0x242fb5['buffer'],_0x4d02d0['buffer']];_0x2498b6&&_0x40e1b2['push'](_0x2498b6['buffer']),_0x477940&&_0x40e1b2['push'](_0x477940['buffer']),_0x5b1269&&_0x40e1b2['push'](_0x5b1269['buffer']),this['worker']['postMessag'+'e']({'type':'decompress','numSplats':_0x3bafeb,'chunkData':_0x242fb5,'chunkSize':_0x136c99,'vertexData':_0x4d02d0,'shData0':_0x2498b6,'shData1':_0x477940,'shData2':_0x5b1269,'shBands':_0x23d70b},_0x40e1b2);}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}class TN{constructor(_0x4b7da2,_0x56038e,_0x3e7678,_0x333a58,_0x23db3c,_0x376643,_0x3b9ac3,_0x4d463c){const _0x1ffa32=(_0x30d842,_0xac2379)=>{const _0x2f4739=(0x1*-0x1c73+-0x5ef*-0x1+0x1*0x1685<<_0xac2379)-(-0x1*-0x19e4+-0x2*-0x8f+-0x1b01);return(_0x30d842&_0x2f4739)/_0x2f4739;},_0x189736=(_0x29a5ac,_0x93c663)=>{_0x29a5ac['x']=_0x1ffa32(_0x93c663>>>-0xb*-0x3d+-0x1d03+-0x2f1*-0x9,-0x17e0+0x5*-0x5cc+0x34e7*0x1),_0x29a5ac['y']=_0x1ffa32(_0x93c663>>>0x1567*0x1+-0x1350+0x4*-0x83,-0x2673+0x1322+0x135b),_0x29a5ac['z']=_0x1ffa32(_0x93c663,-0x221f+0x2*0x665+0x1560);},_0x57b85f=(_0x53e8e3,_0x39a5c9)=>{_0x53e8e3['x']=_0x1ffa32(_0x39a5c9>>>-0x152f+0x26*-0x7b+0x15d*0x1d,-0x4ba+0x1043+-0xb81),_0x53e8e3['y']=_0x1ffa32(_0x39a5c9>>>-0x186d+0x93+-0x2*-0xbf5,-0x1201+0x1c35+-0x364*0x3),_0x53e8e3['z']=_0x1ffa32(_0x39a5c9>>>-0x1960+-0x1*0x141b+-0x1*-0x2d83,0x2d9*0x4+-0x1a5f*-0x1+-0xd*0x2e7),_0x53e8e3['w']=_0x1ffa32(_0x39a5c9,-0x4*-0x8cd+-0x1367+-0xfc5);},_0x1fd177=(_0x21cf2a,_0x3a701f)=>{const _0x10fae0=(-0x1d31+0x1999+0x399)/(Math['sqrt'](0xe4d+0x1*0x1b18+-0x2963)*(0x24f3+0x1*-0x1eb5+-0x63e+0.5)),_0x507f56=(_0x1ffa32(_0x3a701f>>>-0x1*-0x14c6+0x1*0x1a20+-0x2ed2,0x1ae6+0x230b*-0x1+0x82f)-(0x11fa+-0x42+-0xa8*0x1b+0.5))*_0x10fae0,_0x57d655=(_0x1ffa32(_0x3a701f>>>0x5d*-0x37+-0x1*-0x4bd+0x3*0x518,0x2178+0x1bf6+-0x3d64)-(-0x9*0x266+-0x1d47+0x1c1*0x1d+0.5))*_0x10fae0,_0x4628c4=(_0x1ffa32(_0x3a701f,-0x1f0c+0x2550+0x63a*-0x1)-(0x2*-0x75d+0x37*0x5f+-0x123*0x5+0.5))*_0x10fae0,_0x346191=Math['sqrt'](0x4*-0x698+-0x1bc+0x1c1d-(_0x507f56*_0x507f56+_0x57d655*_0x57d655+_0x4628c4*_0x4628c4));switch(_0x3a701f>>>0x1b5d+-0x55*0x71+0xa46){case-0x11c*0x2+-0x4c2+0x6fa:_0x21cf2a['set'](_0x507f56,_0x57d655,_0x4628c4,_0x346191);break;case-0x2*0x6a0+-0x228+0x5*0x315:_0x21cf2a['set'](_0x346191,_0x57d655,_0x4628c4,_0x507f56);break;case 0x1df6+-0x1e4e+0x12*0x5:_0x21cf2a['set'](_0x57d655,_0x346191,_0x4628c4,_0x507f56);break;case 0x8d*-0x1+-0x2*0x4b2+0x9f4:_0x21cf2a['set'](_0x57d655,_0x4628c4,_0x346191,_0x507f56);break;}},_0x53d40b=(_0x5c5f95,_0xbd2099,_0x22aacb)=>_0x5c5f95*(0x603+0x1f5*0x12+-0x293c-_0x22aacb)+_0xbd2099*_0x22aacb,{chunkData:_0x30ebf2,chunkSize:_0x50a2e3,vertexData:_0x12db0f,shData0:_0x445065,shData1:_0x93f45,shData2:_0x1f30a5,shBands:_0x3bbac2}=_0x4b7da2,_0x23b2a7=[0x1*-0x1ec1+-0x1466+0x332a,-0x2*0x81c+-0x17a9+0x27e9*0x1,-0x1508+0x1b60+-0x649][_0x3bbac2-(0x1f0e*0x1+0x1*0x202e+-0x1*0x3f3b)],_0x416d6c=-0x5f*-0x53+0x1a1a+-0x1*0x38e1;this['read']=_0x325890=>{const _0x4df131=Math['floor'](_0x325890/(-0x4*-0x775+0x1faf*-0x1+0x1*0x2db))*_0x50a2e3;if(_0x56038e&&(_0x189736(_0x56038e,_0x12db0f[_0x325890*_0x416d6c+(0x6cd*0x1+0xafb*0x3+-0x1*0x27be)]),_0x56038e['x']=_0x53d40b(_0x30ebf2[_0x4df131+(0x1989+-0x1d6c+0x3e3)],_0x30ebf2[_0x4df131+(-0x1a35+0x12c8*-0x2+0x3fc8*0x1)],_0x56038e['x']),_0x56038e['y']=_0x53d40b(_0x30ebf2[_0x4df131+(0x691+-0x17fa+0x116a)],_0x30ebf2[_0x4df131+(-0x26*0x26+-0x1dc8+0x510*0x7)],_0x56038e['y']),_0x56038e['z']=_0x53d40b(_0x30ebf2[_0x4df131+(-0x11b*-0x2+0x8a+-0x2be)],_0x30ebf2[_0x4df131+(-0x1*-0xd1f+0xbad+-0x18c7)],_0x56038e['z'])),_0x3e7678&&_0x1fd177(_0x3e7678,_0x12db0f[_0x325890*_0x416d6c+(-0x1fb+0x813+-0x617*0x1)]),_0x333a58&&(_0x189736(_0x333a58,_0x12db0f[_0x325890*_0x416d6c+(0x1eb0+-0x11e1+-0xccd)]),_0x333a58['x']=_0x53d40b(_0x30ebf2[_0x4df131+(0xc05+0x16d7+-0x22d6)],_0x30ebf2[_0x4df131+(-0x1*-0x15b4+-0x9af*-0x3+0x1*-0x32b8)],_0x333a58['x']),_0x333a58['y']=_0x53d40b(_0x30ebf2[_0x4df131+(0x14c2*-0x1+-0x1321+0x6*0x6a7)],_0x30ebf2[_0x4df131+(0x285*0x9+-0x20*-0xd6+-0x3163)],_0x333a58['y']),_0x333a58['z']=_0x53d40b(_0x30ebf2[_0x4df131+(0x41*-0xc+-0x123c+0x2aa*0x8)],_0x30ebf2[_0x4df131+(0x6*0x33e+0x1324+-0x268d)],_0x333a58['z'])),_0x23db3c&&(_0x57b85f(_0x23db3c,_0x12db0f[_0x325890*_0x416d6c+(-0x651+-0x775*-0x1+-0x121)]),_0x50a2e3>0x91a+0xe65+-0x1773&&(_0x23db3c['x']=_0x53d40b(_0x30ebf2[_0x4df131+(0x12*-0x32+0xfc1*-0x1+-0x17*-0xd7)],_0x30ebf2[_0x4df131+(0x1*-0x35+0x1387*0x1+-0x1343)],_0x23db3c['x']),_0x23db3c['y']=_0x53d40b(_0x30ebf2[_0x4df131+(0x4*-0x8fa+-0x4*0x1b7+0x71*0x61)],_0x30ebf2[_0x4df131+(-0x43*0x65+0x950+0x35*0x53)],_0x23db3c['y']),_0x23db3c['z']=_0x53d40b(_0x30ebf2[_0x4df131+(-0x2238+-0x329*0x1+0x256f)],_0x30ebf2[_0x4df131+(0xe3*-0x11+0x2e3*-0x1+0x1207*0x1)],_0x23db3c['z']))),_0x376643&&(_0x189736(_0x376643,_0x12db0f[_0x325890*_0x416d6c+(0x220f+-0x1e32+-0x3d9)]),_0x376643['x']=_0x53d40b(_0x30ebf2[_0x4df131+(0x1f40+0x1f73+0x1*-0x3ea1)],_0x30ebf2[_0x4df131+(-0x1*-0x36f+-0x101*-0x1a+0xeba*-0x2)],_0x376643['x']),_0x376643['y']=_0x53d40b(_0x30ebf2[_0x4df131+(-0xb1a+0x5*-0x287+0x17d0)],_0x30ebf2[_0x4df131+(-0x2*-0xa13+-0x121d+-0x1f3)],_0x376643['y']),_0x376643['z']=_0x53d40b(_0x30ebf2[_0x4df131+(0x1a63+0x1*-0x19cc+-0x83*0x1)],_0x30ebf2[_0x4df131+(0x2240+0x1b40+-0x3d69*0x1)],_0x376643['z'])),_0x3b9ac3&&(_0x189736(_0x3b9ac3,_0x12db0f[_0x325890*_0x416d6c+(-0xd3f*0x1+-0x137a+-0xb*-0x2fa)]),_0x3b9ac3['x']=_0x53d40b(_0x30ebf2[_0x4df131+(-0xb*0xa7+0x1*0xd6c+-0x627)],_0x30ebf2[_0x4df131+(-0x1*-0xef0+0x12b2+-0x5*0x6b5)],_0x3b9ac3['x']),_0x3b9ac3['y']=_0x53d40b(_0x30ebf2[_0x4df131+(-0x1*-0x1279+0x12b+0x7a*-0x29)],_0x30ebf2[_0x4df131+(-0x1*-0x18cb+0x1d72+-0x3622)],_0x3b9ac3['y'])),_0x4d463c&&_0x3bbac2>-0x1faf+0x1*-0x213d+0xa*0x67e){const _0x21ac3e=[_0x445065,_0x93f45,_0x1f30a5];for(let _0x5a94d1=0x7*0x223+0x5*-0x65+0x67e*-0x2;_0x5a94d1<0x622+-0x129b*0x2+0x1f17;++_0x5a94d1)for(let _0x296e45=-0x48d+-0x13d9*-0x1+-0x16*0xb2;_0x296e45<-0x224f*-0x1+-0xbc*0x13+-0x144c;++_0x296e45)_0x4d463c[_0x5a94d1*(0x2449+-0x74+-0x1*0x23c6)+_0x296e45]=_0x296e45<_0x23b2a7?_0x21ac3e[_0x5a94d1][_0x325890*(-0x7*-0x3fa+0x1*-0x6e4+-0x14e2)+_0x296e45]*((0x2*-0xf26+-0xe8e+-0x1671*-0x2)/(0x1c9*0xf+0x13*-0x75+-0x1119))-(0x9*0x3ec+0xfad+-0x32f5):0x1538+0xbaa*0x1+0x3d*-0x8a;}};}}class wN{constructor(){h(this,'numSplats'),h(this,'comments'),h(this,'chunkData'),h(this,'vertexData'),h(this,'is4D'),h(this,'shData0'),h(this,'shData1'),h(this,'shData2'),h(this,'shBands');}['createIter'](_0xdfb18b,_0x39df9b,_0x1789f1,_0x465cc8,_0x3082fd,_0x118ed7,_0x1e0112){return new TN(this,_0xdfb18b,_0x39df9b,_0x1789f1,_0x465cc8,_0x3082fd,_0x118ed7,_0x1e0112);}['calcAabb'](_0x22ee05){const {chunkData:_0x169a2e,numChunks:_0x6b6b2a,chunkSize:_0x211d8a}=this;let _0x119da4=Math['exp'](Math['max'](_0x169a2e[0x1d*0x89+0xf9*0x1a+0x1463*-0x2],_0x169a2e[0x196c+-0xf53+0x5*-0x203],_0x169a2e[0xede+0x2249+-0x311c])),_0x2f37c5=_0x169a2e[-0x6*-0x602+0x1d*-0x7d+-0x15e3]-_0x119da4,_0x296fa9=_0x169a2e[-0x3*0xc6f+0x7*-0x25+-0x241*-0x11]-_0x119da4,_0x50d8f6=_0x169a2e[0x1f*0xe9+-0x1*-0x752+0x217*-0x11]-_0x119da4,_0x33cb2b=_0x169a2e[0x26fa+0x2*-0x92c+-0x149f]+_0x119da4,_0x599971=_0x169a2e[-0x22*-0x56+-0x1975+0xe0d]+_0x119da4,_0x5d1426=_0x169a2e[0x3*0x1bd+-0x235c+0x36*0x8f]+_0x119da4;for(let _0x12d13a=-0x3f9*-0x4+-0x5d*-0x33+-0x226a;_0x12d13a<_0x6b6b2a;++_0x12d13a){const _0x6b25a6=_0x12d13a*_0x211d8a;_0x119da4=Math['exp'](Math['max'](_0x169a2e[_0x6b25a6+(-0x266*-0x4+-0xa78+0xe9)],_0x169a2e[_0x6b25a6+(-0xa5c+-0xa7f*0x1+0x14e5)],_0x169a2e[_0x6b25a6+(-0x1f7c+0x2*-0xd1a+-0x1*-0x39bb)])),_0x2f37c5=Math['min'](_0x2f37c5,_0x169a2e[_0x6b25a6+(-0x24d0+0x7d5+0x1cfb)]-_0x119da4),_0x296fa9=Math['min'](_0x296fa9,_0x169a2e[_0x6b25a6+(0x19fc+-0x197f+0x3e*-0x2)]-_0x119da4),_0x50d8f6=Math['min'](_0x50d8f6,_0x169a2e[_0x6b25a6+(-0x887+-0x186f+0x1*0x20f8)]-_0x119da4),_0x33cb2b=Math['max'](_0x33cb2b,_0x169a2e[_0x6b25a6+(0x1c73+0x43c+0x20ac*-0x1)]+_0x119da4),_0x599971=Math['max'](_0x599971,_0x169a2e[_0x6b25a6+(0x461+0x2*0x2de+-0x2f*0x37)]+_0x119da4),_0x5d1426=Math['max'](_0x5d1426,_0x169a2e[_0x6b25a6+(-0x13e4+0x65*-0xd+0xa*0x281)]+_0x119da4);}return _0x22ee05['center']['set']((_0x2f37c5+_0x33cb2b)*(0x1132+-0xa21*-0x1+-0x1b53+0.5),(_0x296fa9+_0x599971)*(-0x4*-0x527+0x1*0x6ed+-0x1b89+0.5),(_0x50d8f6+_0x5d1426)*(0x37*-0x6a+-0xa11+0x20d7+0.5)),_0x22ee05['halfExtent'+'s']['set']((_0x33cb2b-_0x2f37c5)*(0xce5*0x2+0x1a3*-0x5+-0x119b+0.5),(_0x599971-_0x296fa9)*(0x9ab+-0x1dd1+0x1426+0.5),(_0x5d1426-_0x50d8f6)*(-0x1260+-0x1*-0xb1d+0x743+0.5)),!(0x11d2*-0x1+-0x144e+0x988*0x4);}['getCenters'](_0x2878bf){const {vertexData:_0x534142,chunkData:_0x37658f,numChunks:_0xd838c1,chunkSize:_0x326042}=this;let _0x12cf09,_0x146be8,_0x1292b8,_0x5eaff1,_0x351271,_0x4c0680;for(let _0x32e770=0x139e+-0x2*-0x6bf+0x146*-0x1a;_0x32e770<_0xd838c1;++_0x32e770){const _0x2a74e7=_0x32e770*_0x326042;_0x12cf09=_0x37658f[_0x2a74e7+(-0x24fb*-0x1+-0x170b+-0x6f8*0x2)],_0x146be8=_0x37658f[_0x2a74e7+(-0x15e9+-0x3cc+-0x449*-0x6)],_0x1292b8=_0x37658f[_0x2a74e7+(0x1c8b+-0xa5*-0x4+-0x1f1d)],_0x5eaff1=_0x37658f[_0x2a74e7+(-0xc2a+0x1f22*0x1+0xd3*-0x17)],_0x351271=_0x37658f[_0x2a74e7+(-0x634+-0x1e8*0x9+0x1760)],_0x4c0680=_0x37658f[_0x2a74e7+(-0xd13*0x2+0x1*0x364+0x16c7)];const _0x5e1691=Math['min'](this['numSplats'],(_0x32e770+(-0x1959+-0x2*-0x411+0x8*0x227))*(-0x241a+-0x18d6+0x3df0));for(let _0x11709e=_0x32e770*(0x6d3*-0x2+-0x3e*-0x3b+0x5c);_0x11709e<_0x5e1691;++_0x11709e){const _0x242e16=_0x534142[_0x11709e*(-0x12e1*0x2+0x1d1d+0x1*0x8a9)],_0x4b5330=(_0x242e16>>>-0x10*-0x94+-0x1*-0x6b2+-0xfdd)/(-0x1779+-0x1449+0x33c1),_0x3bc3cd=(_0x242e16>>>0x2043*0x1+0x191c+-0x3954&-0x108a+0x25*-0x7e+0x7*0x589)/(0x1351+-0x200f+-0x1*-0x10bd),_0x321d11=(_0x242e16&-0xe+-0x33d+0xb4a)/(-0xa1*-0x39+0x1358+-0x1*0x2f32);_0x2878bf[_0x11709e*(-0x6*-0x2d1+0x6*-0x52f+0xe37)+(0x1718+0x2701*-0x1+0xfe9)]=(0x4*0x40+0x57*-0x59+0x1d40-_0x4b5330)*_0x12cf09+_0x4b5330*_0x5eaff1,_0x2878bf[_0x11709e*(0x53f+0x23e+-0x1*0x77a)+(0x32*0x23+-0x135*-0x17+-0x2298)]=(-0x1b4d*0x1+0x22e5*-0x1+0x3e33-_0x3bc3cd)*_0x146be8+_0x3bc3cd*_0x351271,_0x2878bf[_0x11709e*(-0xe75*0x2+0xcee+0x41*0x3f)+(-0x1a0e+0xf8*-0xc+0x25b0)]=(-0x6d1+0xae6+-0x414-_0x321d11)*_0x1292b8+_0x321d11*_0x4c0680;}}}['getChunks'](_0x1b4880){const {chunkData:_0x484836,numChunks:_0x5c620f,chunkSize:_0x5201b9}=this;let _0x410e96,_0x448e4c,_0x98abba,_0x429bf9,_0x3a2892,_0x130201;for(let _0x769bb7=0x70*-0x56+0x214c+0x22a*0x2;_0x769bb7<_0x5c620f;++_0x769bb7){const _0x5de432=_0x769bb7*_0x5201b9;_0x410e96=_0x484836[_0x5de432+(0x991+0x2*0xe95+0x3*-0xce9)],_0x448e4c=_0x484836[_0x5de432+(0x57c+0x9e3+-0xf5e)],_0x98abba=_0x484836[_0x5de432+(-0x90d+0x5fb*-0x2+-0x1505*-0x1)],_0x429bf9=_0x484836[_0x5de432+(0x2*-0xad9+-0x2*-0xc11+-0x26d)],_0x3a2892=_0x484836[_0x5de432+(-0xd26+-0x1e12+-0x2b3c*-0x1)],_0x130201=_0x484836[_0x5de432+(0x17a7+-0x1df9*0x1+0x1*0x657)],_0x1b4880[_0x769bb7*(-0x79d*-0x1+0x764+-0xefb)+(0x1*0xd3f+-0x1*0xa14+0x32b*-0x1)]=_0x410e96,_0x1b4880[_0x769bb7*(-0x420*-0x3+-0x43*0x95+0x1aa5)+(-0xf74+-0x15a2+-0x9*-0x41f)]=_0x448e4c,_0x1b4880[_0x769bb7*(0x5b*-0x5+-0x1a89*-0x1+-0x18bc)+(-0x9df*-0x3+-0x19e1+0x3ba*-0x1)]=_0x98abba,_0x1b4880[_0x769bb7*(-0x15e*0x1+-0x2dd*-0x4+-0xa1*0x10)+(0x2166+0xb8b*0x1+0x47*-0xa2)]=_0x429bf9,_0x1b4880[_0x769bb7*(-0xe3*0x1d+-0xea4+0x2861*0x1)+(0xb9c+-0x123*0x1b+0x1319*0x1)]=_0x3a2892,_0x1b4880[_0x769bb7*(0x3*-0x82e+-0x1*-0x1dda+-0x2a5*0x2)+(0x2*0x114b+0x12e1+0x1*-0x3572)]=_0x130201;}}['calcFocalP'+'oint'](_0x17aec0){const {chunkData:_0x154efb,numChunks:_0x41b4ed,chunkSize:_0x387f98}=this;_0x17aec0['x']=0x1*0x359+0x10b0+0x1409*-0x1,_0x17aec0['y']=-0x26d2+0x180+0x2552,_0x17aec0['z']=0x67+0x1c32*-0x1+0x1bcb*0x1;for(let _0x3c7d96=0x7d1+-0x1c*0x11b+0x1723;_0x3c7d96<_0x41b4ed;++_0x3c7d96){const _0x14ed30=_0x3c7d96*_0x387f98;_0x17aec0['x']+=_0x154efb[_0x14ed30+(-0x25*-0x83+0x3fe+-0x16ed*0x1)]+_0x154efb[_0x14ed30+(0x17f9+0x1242+-0x2a38)],_0x17aec0['y']+=_0x154efb[_0x14ed30+(-0x1345+-0x1299+0x25df)]+_0x154efb[_0x14ed30+(-0x140+0x239c+-0x2258*0x1)],_0x17aec0['z']+=_0x154efb[_0x14ed30+(-0x21b9+0x9f4+0x17c7)]+_0x154efb[_0x14ed30+(-0x2*0xb41+-0x1*0x7b1+0x1e38)];}_0x17aec0['mulScalar']((0x20b7+0x101*0x19+-0x1*0x39d0+0.5)/_0x41b4ed);}get['isCompress'+'ed'](){return!(0x7*0x1bb+0x15ab+0x5c*-0x5e);}get['numChunks'](){return Math['ceil'](this['numSplats']/(0x2*-0xc4+-0x1073+0x1*0x12fb));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}async['decompress'](){const _0x2c74de=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'],{shBands:_0x1f3280}=this;if(_0x1f3280>0xc56*-0x1+0x197d+-0x5b*0x25){const _0x239d34=[];for(let _0x3c677e=0xe62+0x1381+0x21e3*-0x1;_0x3c677e<-0x1bd4+0x21ba+-0x5b9;++_0x3c677e)_0x239d34['push']('f_rest_'+_0x3c677e);_0x2c74de['splice'](_0x2c74de['indexOf']('f_dc_0')+(-0x1f98+0x1f6a+0x2f),-0x261f+0x265a+-0x3b*0x1,..._0x239d34);}const _0x25fe40=new xN();return _0x25fe40['decompress'](this['numSplats'],this['chunkData'],this['chunkSize'],this['vertexData'],this['shData0'],this['shData1'],this['shData2'],this['shBands']),new Promise((_0x12c8f1,_0x2d1a7e)=>{_0x25fe40['on']('decompress'+'ed',_0x1ed5e0=>{_0x25fe40['destroy'](),_0x12c8f1(new zn([{'name':'vertex','count':this['numSplats'],'properties':_0x2c74de['map'](_0x1cb2da=>({'type':'float','name':_0x1cb2da,'storage':_0x1ed5e0[_0x1cb2da],'byteSize':0x4}))}],this['comments']));});});}}async function EN(){const _0x30807c='super4d-ca'+'che-v1',_0x19c11e={'maxAge':0x9a7ec800,'maxSize':0x280000000},_0x5e0f69=new Uint8Array([-0x1d24+0x4c2+0x18d2,-0x238c+-0x140c*-0x1+0xfec,0x1*0xfdf+-0x47*-0x49+-0x23a5,0x519+-0x16ee+0x11df]),_0x498dae=new Uint8Array([0x256+-0x1*-0x69b+-0x8e7,0x130d*-0x1+0x185e+-0x4ec,-0x10c8+-0x1bf5+0x2d2b,-0x605*-0x3+-0x1c1*-0x5+-0x1a70,0x239a+0x1bcb+0x3f06*-0x1,-0x7*-0x20e+-0xc3d+0x1bd*-0x1,0x23ad+0x27*0x9b+-0x3ae5,0x35a+0xe*-0x7a+0x3b3,0x17*0x188+0xd46*0x2+-0x20*0x1eb,0x5ab+0x1*0x359+-0x1*0x89f,-0x26*-0x6b+0xa57+0x1*-0x19c7,-0xf64+0x7*0x257+-0xf3]),_0x531614=-0x2c7*-0x1+0x35a+-0x621+0.28209479177387814,_0x2fae6b=new Map([['char',Int8Array],['uchar',Uint8Array],['short',Int16Array],['ushort',Uint16Array],['int',Int32Array],['uint',Uint32Array],['float',Float32Array],['double',Float64Array]]);class _0x19af6e{constructor(_0xe91d5={}){this['options']={..._0x19c11e,..._0xe91d5},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=-0xd0*0x27+-0x14*0x11c+0x35e0,this['initialize'+'d']=!(-0x1*0x1c37+-0x14*0x14+0x1dc8);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x30807c);const _0x1a65ec=await this['cache']['keys'](),_0x1f5a62=[];for(const _0x2f9e1d of _0x1a65ec){const _0x2bb5de=_0x2f9e1d['url'],_0x258b92=await this['cache']['match'](_0x2bb5de);if(_0x258b92){const _0x4281c1=(await _0x258b92['blob']())['size'],_0x31eb25=_0x258b92['headers']['get']('x-cache-ti'+'me');_0x31eb25&&_0x1f5a62['push']({'url':_0x2bb5de,'size':_0x4281c1,'cacheTime':parseInt(_0x31eb25)});}}_0x1f5a62['sort']((_0x37de53,_0x38b36f)=>_0x37de53['cacheTime']-_0x38b36f['cacheTime']);for(const _0x2275b0 of _0x1f5a62)this['cacheSizes']['set'](_0x2275b0['url'],_0x2275b0['size']),this['currentSiz'+'e']+=_0x2275b0['size'],this['lruList']['push'](_0x2275b0['url']);}catch(_0x43bc4c){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x43bc4c);}this['initialize'+'d']=!(-0xbd6+-0x1d6c+0x2942);}}async['get'](_0x3ad604){if(await this['init'](),!this['cache'])return null;try{const _0x503bdc=await this['cache']['match'](_0x3ad604);if(!_0x503bdc)return null;const _0x3897e6=_0x503bdc['headers']['get']('x-cache-ti'+'me');return _0x3897e6&&Date['now']()-parseInt(_0x3897e6)>this['options']['maxAge']?(await this['delete'](_0x3ad604),null):(this['updateLRU'](_0x3ad604),_0x503bdc);}catch{return null;}}async['set'](_0xc2bc53,_0x3b8f68){if(!(!this['cache']||_0xc2bc53['startsWith']('blob:')))try{const _0xd0e899=_0x3b8f68['clone'](),_0x34b8f9=await _0xd0e899['blob'](),_0x112f97=_0x34b8f9['size'];this['currentSiz'+'e']+_0x112f97>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x112f97);const _0x1f76d7=new Headers(_0xd0e899['headers']);_0x1f76d7['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x411e94=new Response(_0x34b8f9,{'status':_0xd0e899['status'],'statusText':_0xd0e899['statusText'],'headers':_0x1f76d7});await this['cache']['put'](_0xc2bc53,_0x411e94),this['cacheSizes']['set'](_0xc2bc53,_0x112f97),this['currentSiz'+'e']+=_0x112f97,this['updateLRU'](_0xc2bc53);}catch(_0x48d51a){console['error']('Cache\x20set\x20'+'error:',_0x48d51a);}}['updateLRU'](_0x2224ba){const _0x2b32e0=this['lruList']['indexOf'](_0x2224ba);_0x2b32e0>-(-0x1bef+-0x5*0x440+0x3130)&&this['lruList']['splice'](_0x2b32e0,-0x3b*-0xa9+0x28+-0xb*0x38e),this['lruList']['push'](_0x2224ba);}async['cleanupSpa'+'ce'](_0x22103c){const _0x56c1e8=this['options']['maxSize']*(0x649*0x3+0x1d45+0x302*-0x10+0.9);if(!(this['currentSiz'+'e']<=_0x56c1e8))for(;this['lruList']['length']>-0x909*-0x2+0x6c8+-0x18da&&this['currentSiz'+'e']>_0x56c1e8;){const _0x34f2f7=this['lruList']['shift']();_0x34f2f7&&await this['delete'](_0x34f2f7);}}async['delete'](_0x1625d2){if(this['cache'])try{await this['cache']['delete'](_0x1625d2);const _0x3146ff=this['cacheSizes']['get'](_0x1625d2)||0x788+0xb4+-0x83c;this['currentSiz'+'e']-=_0x3146ff,this['cacheSizes']['delete'](_0x1625d2);const _0x4e662d=this['lruList']['indexOf'](_0x1625d2);_0x4e662d>-(-0x2*-0xaca+-0x1e1a+0x887*0x1)&&this['lruList']['splice'](_0x4e662d,-0x2069+0xa*0x19c+-0x1*-0x1052);}catch(_0x297fc4){console['error']('Cache\x20dele'+'te\x20error:',_0x297fc4);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x2a4a2e=>Promise['all'](_0x2a4a2e['map'](_0x5d0c0f=>{var _0x1837ac;return(_0x1837ac=this['cache'])==null?void(-0x61c*0x2+-0x254d+-0x713*-0x7):_0x1837ac['delete'](_0x5d0c0f);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x1d95+0x110a+-0x953*0x5;}catch(_0x4ee669){console['error']('Cache\x20clea'+'r\x20error:',_0x4ee669);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x284+-0x33*0x7c+0x1b38;}}class _0x324694{constructor(_0x2e484e=[],_0x1627d2={}){this['cacheManag'+'er']=new _0x19af6e(_0x1627d2['cache']),this['retryCount']=_0x1627d2['retryCount']||0x19ee+-0xddf+-0x404*0x3,this['retryDelay']=_0x1627d2['retryDelay']||-0x1*0x1a29+0x547*0x3+-0x418*-0x3,this['maxConcurr'+'ency']=_0x1627d2['maxConcurr'+'ency']||-0x2*-0x1d+0x4df+-0x517,this['downloadQu'+'eue']=_0x2e484e,this['isProcessi'+'ngDownload'+'Queue']=!(0x3eb+-0xe3+-0x307*0x1),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(-0x9dc+-0x4*-0x623+-0x1*0xeb0);this['downloadQu'+'eue']['length']>-0x2263+-0xdb4+0x3017;)try{const _0x586139=this['downloadQu'+'eue']['splice'](0xa7*-0x17+-0x23b0+-0x1*-0x32b1,this['maxConcurr'+'ency'])['map'](_0x39214d=>{if(!this['pendingRes'+'ponses']['has'](_0x39214d)){const _0x367fc6=this['download'](_0x39214d);return this['pendingRes'+'ponses']['set'](_0x39214d,_0x367fc6),_0x367fc6['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x39214d);});}return Promise['resolve']();});await Promise['all'](_0x586139);}catch(_0x3b3908){console['error']('Download\x20e'+'rror:',_0x3b3908);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(0x797+0x8b2+0x209*-0x8);}}}async['fetch'](_0x2b0d19,_0x5519af={}){if(this['pendingRes'+'ponses']['has'](_0x2b0d19))return this['pendingRes'+'ponses']['get'](_0x2b0d19);const {forceRefresh:_0x577433=!(0x1*0x27+0x13ce+-0x2*0x9fa),..._0x35b508}=_0x5519af;this['pendingRes'+'ponses']['set'](_0x2b0d19,this['download'](_0x2b0d19,_0x35b508));const _0x2661db=await this['pendingRes'+'ponses']['get'](_0x2b0d19);return this['pendingRes'+'ponses']['delete'](_0x2b0d19),_0x2661db;}async['download'](_0x305a34,_0xda3f54={}){var _0x4f365b;await((_0x4f365b=this['cacheManag'+'er'])==null?void(0x3d*0xa+-0x2bd*-0xb+-0x2081):_0x4f365b['init']());const {forceRefresh:_0x32e637=!(-0x69*0x17+-0x18f7+0x2267),..._0x225c83}=_0xda3f54;_0x32e637&&await this['cacheManag'+'er']['delete'](_0x305a34);const _0x2f0eb9=await this['cacheManag'+'er']['get'](_0x305a34);if(_0x2f0eb9)return _0x2f0eb9;let _0x3d95f2;for(let _0x2c3734=-0x2*-0x45d+0x4e7+-0xda1*0x1;_0x2c3734<this['retryCount'];_0x2c3734++)try{const _0x88a976=await fetch(_0x305a34,_0x225c83);if(!_0x88a976['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x88a976['status']);return await this['cacheManag'+'er']['set'](_0x305a34,_0x88a976),_0x88a976;}catch(_0x47171f){console['error']('Download\x20e'+'rror:',_0x47171f),_0x3d95f2=_0x47171f,_0x2c3734<this['retryCount']-(-0xbb4+0x6f7*0x1+-0x25f*-0x2)&&await new Promise(_0x4e573a=>setTimeout(_0x4e573a,this['retryDelay']*(_0x2c3734+(0xe5*0x1d+0x4be*0x2+-0x236c))));}throw _0x3d95f2;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){this['cacheManag'+'er']['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(0x25c7*-0x1+-0x232d+0x48f5),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x487155{constructor(){this['numSplats']=-0x1*0x1696+0x186*-0x9+0x244c,this['comments']=[],this['chunkData']=new Float32Array(0x83*-0x44+0x1a49+0x883),this['vertexData']=new Uint32Array(-0x4*-0x9e+0x1fde+-0x2256),this['is4D']=!(0x3*0x9af+-0x1900+-0x1*0x40d),this['shBands']=0x1dad+0x9d9+-0x2*0x13c3,this['shData0']=new Uint8Array(0x2245+-0x1*-0xd43+-0x3a8*0xd),this['shData1']=new Uint8Array(-0x1c2b*-0x1+0x1*-0x132d+-0x8fe),this['shData2']=new Uint8Array(0x168b*0x1+0x23f*-0x4+-0x3*0x485),this['elements']=[],this['isCompress'+'ed']=!(0x7*0x3e5+-0x1c*-0x123+-0x3b17);}get['numChunks'](){return Math['ceil'](this['numSplats']/(-0x7d5+-0x16ec+0x1fc1));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}}class _0xc565ca{constructor(_0x41ecbe,_0x1e8786=[]){this['elements']=_0x41ecbe,this['comments']=_0x1e8786,this['isCompress'+'ed']=!(0xcf7+-0xfe9*-0x2+-0x4*0xb32);}}class _0x1b7995{constructor(_0x22e169,_0x3cf2cd){this['reader']=_0x22e169,this['progressFu'+'nc']=_0x3cf2cd,this['head']=-0x6de*-0x5+0xf*0x119+0x121*-0x2d,this['tail']=-0x17db*-0x1+-0x76b+0x107*-0x10;}async['read'](){var _0x3fc6fc;const {value:_0x5266a4,done:_0x3b04b2}=await this['reader']['read']();if(_0x3b04b2)throw new Error('Stream\x20fin'+'ished\x20befo'+'re\x20end\x20of\x20'+'header');this['push'](_0x5266a4),(_0x3fc6fc=this['progressFu'+'nc'])==null||_0x3fc6fc['call'](this,_0x5266a4['byteLength']);}['push'](_0x200697){if(!this['data'])this['data']=_0x200697,this['view']=new DataView(this['data']['buffer']),this['tail']=_0x200697['length'];else{const _0x4a3941=this['tail']-this['head'],_0x3f4e45=_0x4a3941+_0x200697['length'];if(this['data']['length']>=_0x3f4e45)this['head']>0x261+-0x9*0xeb+-0x1*-0x5e2?(this['data']['copyWithin'](0x23a3+0xfe*0x26+-0x4957,this['head'],this['tail']),this['data']['set'](_0x200697,_0x4a3941),this['head']=-0x1c1a+0x81c+-0x1*-0x13fe,this['tail']=_0x3f4e45):(this['data']['set'](_0x200697,this['tail']),this['tail']+=_0x200697['length']);else{const _0x2bc440=new Uint8Array(_0x3f4e45);this['head']>-0x1505+0x110d+0x3f8||this['tail']<this['data']['length']?_0x2bc440['set'](this['data']['subarray'](this['head'],this['tail']),-0x1*-0x11b+-0x24c2+0x23a7):_0x2bc440['set'](this['data'],0xe57*-0x1+0x2516+-0x16bf),_0x2bc440['set'](_0x200697,_0x4a3941),this['data']=_0x2bc440,this['view']=new DataView(this['data']['buffer']),this['head']=-0xeb*-0xa+0x109d+-0x19cb,this['tail']=_0x3f4e45;}}}['compact'](){this['head']>0x9d4+-0x10d9+0x705&&(this['data']['copyWithin'](-0x1*-0x5d5+0x105*0x11+-0x4a2*0x5,this['head'],this['tail']),this['tail']-=this['head'],this['head']=0x1767+-0x8e3+-0xe84);}get['remaining'](){return this['tail']-this['head'];}['getInt8'](){const _0x1c5bf5=this['view']['getInt8'](this['head']);return this['head']++,_0x1c5bf5;}['getUint8'](){const _0x2b42bf=this['view']['getUint8'](this['head']);return this['head']++,_0x2b42bf;}['getInt16'](){const _0x58997e=this['view']['getInt16'](this['head'],!(0xbcf+0xef4+0x1f*-0xdd));return this['head']+=-0x2217*0x1+0x68*0x43+0x6e1,_0x58997e;}['getUint16'](){const _0x1a46b9=this['view']['getUint16'](this['head'],!(0x419+0x1*0xef8+-0x1311));return this['head']+=0x238b*-0x1+0x186d+-0x8*-0x164,_0x1a46b9;}['getInt32'](){const _0x194260=this['view']['getInt32'](this['head'],!(-0x3*0x33+-0x6cd+0x766));return this['head']+=0x2*0xcd+0x194*0x4+0x2a2*-0x3,_0x194260;}['getUint32'](){const _0x5ebb7b=this['view']['getUint32'](this['head'],!(0x239d+-0xd0e+0x20d*-0xb));return this['head']+=0x42f+-0x3b3*0x5+0xe54,_0x5ebb7b;}['getFloat32'](){const _0x4c9321=this['view']['getFloat32'](this['head'],!(-0x139*-0x3+-0x4*-0x676+-0x1d83));return this['head']+=-0x1695+0x20d*-0x3+0x5c0*0x5,_0x4c9321;}['getFloat64'](){const _0x14f13d=this['view']['getFloat64'](this['head'],!(0x71*-0x2f+0x1f38+-0x17f*0x7));return this['head']+=0x10a2+0x159b+0x1*-0x2635,_0x14f13d;}}class _0x48051c{constructor(_0x2a8c26,_0x110f90,_0x2b7801){this['x']=_0x2a8c26,this['y']=_0x110f90,this['z']=_0x2b7801;}}class _0x654087{constructor(_0x50e83e,_0xc1c5c0,_0x11d74f,_0x3c95c9){this['x']=_0x50e83e,this['y']=_0xc1c5c0,this['z']=_0x11d74f,this['w']=_0x3c95c9;}}class _0x3d8960{constructor(_0x9a74e4,_0x537d2e,_0x9c2fe4,_0x5aefd1){this['x']=_0x9a74e4,this['y']=_0x537d2e,this['z']=_0x9c2fe4,this['w']=_0x5aefd1;}['set'](_0x214b7e,_0x23e83a,_0x4891d8,_0x353273){this['x']=_0x214b7e,this['y']=_0x23e83a,this['z']=_0x4891d8,this['w']=_0x353273;}}class _0x17b6f6{constructor(_0x265631,_0x14868a,_0x2b928b,_0xa181e4,_0x1fcb11,_0x3a7d3f,_0x40340b,_0x5707a1,_0x272bf7,_0x25094e,_0x225bd1,_0x1fed4e,_0x43afc7,_0x5f2757){const _0x1d82b3=(_0x2c216f,_0x3a9783)=>{const _0x390d54=(-0xc5*-0x9+-0xb1c+0x8*0x86<<_0x3a9783)-(0x1c81+0x1*0x1bca+0x6e*-0x83);return(_0x2c216f&_0x390d54)/_0x390d54;},_0x8a8be4=(_0x8df86b,_0xd32bb8)=>{_0x8df86b['x']=_0x1d82b3(_0xd32bb8>>>0xe04+-0x533*-0x3+-0x1d88,0x1f98*0x1+0x6*-0x3e1+-0x847),_0x8df86b['y']=_0x1d82b3(_0xd32bb8>>>-0xc58+0x73*-0x23+0x1c1c,-0x210d+-0x14c9+0x35e0),_0x8df86b['z']=_0x1d82b3(_0xd32bb8,0x1306+-0x3a6+0x19*-0x9d);},_0x362a5e=(_0x75446f,_0x5c9bde)=>{_0x75446f['x']=_0x1d82b3(_0x5c9bde>>>0x2*0x610+-0xa60+-0xd4*0x2,0x3b2*-0x9+-0x185e+0x39a8),_0x75446f['y']=_0x1d82b3(_0x5c9bde>>>-0x26a5+0x1cbb+0x9fa,-0xe*0x123+0x1*-0xc3b+-0x1*-0x1c2d),_0x75446f['z']=_0x1d82b3(_0x5c9bde>>>-0x1*0x823+0x8*0x15a+-0x2a5,-0x20b+0x219*0x8+-0xeb5),_0x75446f['w']=_0x1d82b3(_0x5c9bde,0x2532+0x2698+-0x1*0x4bc2);},_0x107b2c=(_0xdd1179,_0x146ca6)=>{const _0x1ebf20=(-0x1a*0x17b+-0x46a+-0xa9*-0x41)/(Math['sqrt'](0x1ba4+0x517+-0x1*0x20b9)*(0xc17+-0x203d+0x1426+0.5)),_0xc98881=(_0x1d82b3(_0x146ca6>>>-0x1133*0x2+-0x1*0x631+-0x1d*-0x167,-0x16b8+-0x2*-0x1c1+0x1*0x1340)-(0x2*-0x742+-0x16b+0xfef+0.5))*_0x1ebf20,_0xeb3c61=(_0x1d82b3(_0x146ca6>>>-0x369+-0x81*-0x4a+-0x21d7,0x55*0x73+0x26f9+0x268f*-0x2)-(0x4d*0x31+-0x22e0+0x1423+0.5))*_0x1ebf20,_0x149cb7=(_0x1d82b3(_0x146ca6,0x19c*-0x4+-0x61a+-0x64a*-0x2)-(0xcbd*0x1+-0x1*0x1beb+0xf2e+0.5))*_0x1ebf20,_0xdcfc2c=Math['sqrt'](0x2341+-0x1019+-0x1327-(_0xc98881*_0xc98881+_0xeb3c61*_0xeb3c61+_0x149cb7*_0x149cb7));switch(_0x146ca6>>>0x5*0x217+-0x1494+0xa3f){case 0x4f7+-0x266f+0x2178:_0xdd1179['set'](_0xc98881,_0xeb3c61,_0x149cb7,_0xdcfc2c);break;case 0x7ce+-0x1e49+-0x59f*-0x4:_0xdd1179['set'](_0xdcfc2c,_0xeb3c61,_0x149cb7,_0xc98881);break;case 0x1af6+-0x1*-0x1f63+-0x3a57:_0xdd1179['set'](_0xeb3c61,_0xdcfc2c,_0x149cb7,_0xc98881);break;case 0x1f63+-0x2558+0x5f8:_0xdd1179['set'](_0xeb3c61,_0x149cb7,_0xdcfc2c,_0xc98881);break;}},_0x20bb81=(_0x11e768,_0x56b66c,_0x4ed165)=>_0x11e768*(0x71b+-0x12c5+0xbab*0x1-_0x4ed165)+_0x56b66c*_0x4ed165,_0x2732f2=[0x44*0x2f+-0x1152+0x4d9,0x4a*-0x43+-0xd72*0x1+0x4*0x836,-0x14cc+0x6fd*-0x1+-0x36*-0x84][_0x40340b-(-0xc2d+-0x6a*-0x22+0x6*-0x51)],_0x46f35b=0x8*-0x3a9+0x6+-0x1d48*-0x1;this['read']=_0x6b296c=>{const _0xe2af51=Math['floor'](_0x6b296c/(-0xcb1+-0x17f*-0x9+-0x1*-0x3a))*_0x14868a;if(_0x5707a1&&(_0x8a8be4(_0x5707a1,_0x2b928b[_0x6b296c*_0x46f35b+(-0x47*-0x49+-0x21f4*-0x1+-0x22b*0x19)]),_0x5707a1['x']=_0x20bb81(_0x265631[_0xe2af51+(-0x3*0xbe7+0x4*-0x9c0+-0x55*-0xe1)],_0x265631[_0xe2af51+(0x61d+-0x116+-0x504*0x1)],_0x5707a1['x']),_0x5707a1['y']=_0x20bb81(_0x265631[_0xe2af51+(0x1*-0x1a91+0x1d39*-0x1+-0xcf*-0x45)],_0x265631[_0xe2af51+(0xce4+-0x1985+0xca5)],_0x5707a1['y']),_0x5707a1['z']=_0x20bb81(_0x265631[_0xe2af51+(-0xda1+-0x4*-0x1e7+0x607)],_0x265631[_0xe2af51+(-0x1e*0x9a+-0x24df+0x8*0x6de)],_0x5707a1['z'])),_0x272bf7&&_0x107b2c(_0x272bf7,_0x2b928b[_0x6b296c*_0x46f35b+(0x6*0x673+-0x2090+-0x1*0x621)]),_0x25094e&&(_0x8a8be4(_0x25094e,_0x2b928b[_0x6b296c*_0x46f35b+(0x7*-0x14+-0x125*0x1f+0x2409)]),_0x25094e['x']=_0x20bb81(_0x265631[_0xe2af51+(-0x68e*0x1+0x7c*-0x2c+0x1be4)],_0x265631[_0xe2af51+(-0x96a+0x1b67+-0x11f4)],_0x25094e['x']),_0x25094e['y']=_0x20bb81(_0x265631[_0xe2af51+(0x1e14+0x4*-0x63d+-0x519)],_0x265631[_0xe2af51+(0x7cd*0x1+-0xe*-0x16f+-0xf*0x1db)],_0x25094e['y']),_0x25094e['z']=_0x20bb81(_0x265631[_0xe2af51+(0x71*0x56+-0x1f9a+-0x654)],_0x265631[_0xe2af51+(0xb3*0x23+-0xe39*0x1+-0xa35)],_0x25094e['z'])),_0x225bd1&&(_0x362a5e(_0x225bd1,_0x2b928b[_0x6b296c*_0x46f35b+(-0x1*0x22e5+-0x26af*0x1+0x4997)]),_0x14868a>0x4*-0x139+-0x10d1+0x15c1&&(_0x225bd1['x']=_0x20bb81(_0x265631[_0xe2af51+(-0x41a+0x4*0x373+-0x9a6)],_0x265631[_0xe2af51+(0x15e*-0x11+0x2*-0xd17+0xef*0x35)],_0x225bd1['x']),_0x225bd1['y']=_0x20bb81(_0x265631[_0xe2af51+(0x19db*-0x1+0x67*0x9+-0x1649*-0x1)],_0x265631[_0xe2af51+(-0x1f8d*0x1+-0x2*0x80e+-0x1*-0x2fb9)],_0x225bd1['y']),_0x225bd1['z']=_0x20bb81(_0x265631[_0xe2af51+(-0x25b5+0x5*0x18a+0x1e11*0x1)],_0x265631[_0xe2af51+(-0x1e71+0x79*-0x39+0x3973)],_0x225bd1['z']))),_0x1fed4e&&(_0x8a8be4(_0x1fed4e,_0x2b928b[_0x6b296c*_0x46f35b+(-0x181d*-0x1+-0x131b+-0x4fe)]),_0x1fed4e['x']=_0x20bb81(_0x265631[_0xe2af51+(0x1818+-0x1*0x19bb+-0x13*-0x17)],_0x265631[_0xe2af51+(-0x5d2+-0x7*0x3ad+0x1fa2)],_0x1fed4e['x']),_0x1fed4e['y']=_0x20bb81(_0x265631[_0xe2af51+(-0x1f7d+-0x4ed+-0x1*-0x247d)],_0x265631[_0xe2af51+(-0x148f+-0x163+0x1608)],_0x1fed4e['y']),_0x1fed4e['z']=_0x20bb81(_0x265631[_0xe2af51+(-0xa*-0x378+0x1b5f+0x3dfb*-0x1)],_0x265631[_0xe2af51+(-0x1dec+0x145*-0x16+0x847*0x7)],_0x1fed4e['z'])),_0x43afc7&&(_0x8a8be4(_0x43afc7,_0x2b928b[_0x6b296c*_0x46f35b+(0x2413+0xe17*0x2+-0x4*0x100f)]),_0x43afc7['x']=_0x20bb81(_0x265631[_0xe2af51+(-0x1194+-0x5c9*0x5+0x2e99)],_0x265631[_0xe2af51+(0x1c30+0x26ff+-0x4316*0x1)],_0x43afc7['x']),_0x43afc7['y']=_0x20bb81(_0x265631[_0xe2af51+(0x2d*-0xab+-0xb*0x283+0x39ca)],_0x265631[_0xe2af51+(0x5f1+-0x11d2*-0x2+0x14bd*-0x2)],_0x43afc7['y'])),_0x5f2757&&_0x40340b>-0x96f+-0x2*0x9eb+0x1d45){const _0x428c8d=[_0xa181e4,_0x1fcb11,_0x3a7d3f];for(let _0x5f38ab=-0x2*0x5b7+-0x1547*-0x1+-0x9d9;_0x5f38ab<0x24b*0x2+0xebe+0x73*-0x2b;++_0x5f38ab)for(let _0x4bf099=0x6*0x2e6+0x1*0x1820+-0x2984;_0x4bf099<0xbfd+0xb3*-0x22+0xbd8;++_0x4bf099)_0x5f2757[_0x5f38ab*(-0x1f5b+0x611*-0x1+-0x13*-0x1f9)+_0x4bf099]=_0x4bf099<_0x2732f2?_0x428c8d[_0x5f38ab][_0x6b296c*(-0x20fe+0x54a*0x6+0x152)+_0x4bf099]*((0x6f3+-0x14b4+-0x1*-0xdc9)/(-0x1e93+0xb9d+0x27*0x83))-(0x300*0x6+-0x1c7a+0xa7e):-0x1*-0x2685+-0x18b3+-0xdd2;}};}}self['onmessage']=async _0x5c2086=>{var _0x3beb84,_0x5f3cb6,_0x46c226;const {data:_0x201a23}=_0x5c2086;switch(_0x201a23['type']){case'initWorker':globalThis['loadUrlLis'+'t']=_0x201a23['loadUrlLis'+'t'],globalThis['fetchWorke'+'r']=new _0x324694(globalThis['loadUrlLis'+'t']);break;case'destroyWor'+'ker':(_0x3beb84=globalThis['fetchWorke'+'r'])==null||_0x3beb84['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['loadUrlLis'+'t']=[];break;case'loadPly':const {url:_0x447dd9,decompress:_0x192d7d}=_0x201a23;try{globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x324694(globalThis['loadUrlLis'+'t']));const _0x42f7ea=await globalThis['fetchWorke'+'r']['fetch'](_0x447dd9);if(!_0x42f7ea||!_0x42f7ea['body'])self['postMessag'+'e']({'type':'error','data':'Error\x20load'+'ing\x20resour'+'ce','url':_0x447dd9});else{const _0x3c38a9=parseInt(_0x42f7ea['headers']['get']('content-le'+'ngth')??'0',-0x37a*0x6+-0xce2+0x21c8);self['postMessag'+'e']({'type':'totalLengt'+'h','totalLength':_0x3c38a9,'bytes':0x0,'url':_0x447dd9});let _0x23929a=await _0x1809b1(_0x42f7ea['body']['getReader'](),_0x2877aa=>{self['postMessag'+'e']({'type':'progress','bytes':_0x2877aa,'totalLength':_0x3c38a9,'url':_0x447dd9});});if(_0x192d7d&&_0x23929a['isCompress'+'ed']){const _0x50ab5d=_0x3a4f88(_0x23929a),_0x3cc0ff=(_0x5f3cb6=_0x50ab5d==null?void(0x95c*0x3+0x2186+-0x3d9a):_0x50ab5d['elements'][-0x1834+0x29*0x3+0x17b9])==null?void(-0x188d+-0x2426+0x3cb3):_0x5f3cb6['properties']['map'](_0xe70382=>_0xe70382['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x50ab5d,'url':_0x447dd9},_0x3cc0ff);}else{if(_0x23929a['isCompress'+'ed']){const _0x14bb29=['chunkData','vertexData'];_0x23929a['shData0']&&_0x14bb29['push']('shData0','shData1','shData2');const _0x3f313f=_0x14bb29['map'](_0x20d33c=>{var _0x221b89;return(_0x221b89=_0x23929a[_0x20d33c])==null?void(-0x59e+0x1b4f+0x15b1*-0x1):_0x221b89['buffer'];});self['postMessag'+'e']({'type':'splatData','data':_0x23929a,'url':_0x447dd9},_0x3f313f);}else{_0x23929a=_0xc819bc(_0x23929a);const _0x5dd1a0=(_0x46c226=_0x23929a==null?void(0x19e6+0x1638+-0x301e):_0x23929a['elements'][-0x1823*-0x1+0x25*0x34+-0x1fa7*0x1])==null?void(0x65+0x1cb7*0x1+-0x1d1c):_0x46c226['properties']['map'](_0x116b42=>_0x116b42['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x23929a,'url':_0x447dd9},_0x5dd1a0);}}}}catch(_0x3ddcfc){self['postMessag'+'e']({'type':'error','data':_0x3ddcfc['message'],'url':_0x447dd9});}break;}};const _0xc819bc=_0x5a6bb5=>{var _0x53b065;const _0x56a4f6=(_0x53b065=_0x5a6bb5==null?void(-0x1*0x2293+-0xfb5+0x3248):_0x5a6bb5['elements'][-0x1*-0x2ff+0xc5e+-0xf5d])==null?void(0x544+0x40f*0x3+-0x1171):_0x53b065['properties']['find'](_0x122df6=>_0x122df6['name']==='opacity');if(_0x56a4f6){for(let _0x17558b=-0x3*-0xe2+-0x1387*-0x1+-0x162d;_0x17558b<_0x56a4f6['storage']['length'];_0x17558b++)_0x56a4f6['storage'][_0x17558b]=(0x125d+0x3a+-0x632*0x3)/(0x167b+0x1945+-0x2cf*0x11+Math['exp'](-_0x56a4f6['storage'][_0x17558b]));}return _0x5a6bb5;},_0x3ddb06=_0x3cc14=>{const _0x19575b=[],_0x462806=[];let _0xc95ead;for(let _0x222f3f=-0xcb9+0x2*0xeb1+-0x42a*0x4;_0x222f3f<_0x3cc14['length'];++_0x222f3f){const _0x2f1d24=_0x3cc14[_0x222f3f]['split']('\x20');switch(_0x2f1d24[0x8*-0x397+0x144f+-0x1*-0x869]){case'comment':_0x462806['push'](_0x2f1d24['slice'](-0x12d3+0x9*-0x3e3+-0x91*-0x5f)['join']('\x20'));break;case'format':_0xc95ead=_0x2f1d24[0x77c+-0x108f+0x1*0x914];break;case'element':_0x19575b['push']({'name':_0x2f1d24[-0x5*-0x373+0x1bf9+-0x2d37],'count':parseInt(_0x2f1d24[0x1dcc+-0xabe+-0x130c*0x1],0x1e5f+0x127c+-0x30d1*0x1),'properties':[]});break;case'property':{if(!_0x2fae6b['has'](_0x2f1d24[0x3*-0x393+-0x1ef7+0x335*0xd]))throw new Error('Unrecogniz'+'ed\x20propert'+'y\x20data\x20typ'+'e\x20\x27'+_0x2f1d24[-0x2420+0x2*0x121+0x21df]+('\x27\x20in\x20ply\x20h'+'eader'));_0x19575b[_0x19575b['length']-(-0xa05+0x8bc*0x1+0x14a)]['properties']['push']({'type':_0x2f1d24[0xd45+-0x1288+0x151*0x4],'name':_0x2f1d24[0x2392+-0x823+-0x77*0x3b],'storage':null,'byteSize':_0x2fae6b['get'](_0x2f1d24[0x8b*0x8+-0x2*-0x1069+0x54f*-0x7])['BYTES_PER_'+'ELEMENT']});break;}default:throw new Error('Unrecogniz'+'ed\x20header\x20'+'value\x20\x27'+_0x2f1d24[0x2ee*-0xa+0x39e+0x26*0xad]+('\x27\x20in\x20ply\x20h'+'eader'));}}return{'elements':_0x19575b,'format':_0xc95ead,'comments':_0x462806};},_0xe27f51=_0x35225a=>{const _0x3a4d53=['min_x','min_y','min_z','max_x','max_y','max_z','min_scale_'+'x','min_scale_'+'y','min_scale_'+'z','max_scale_'+'x','max_scale_'+'y','max_scale_'+'z','min_r','min_g','min_b','max_r','max_g','max_b','min_motion'+'_x','min_motion'+'_y','min_motion'+'_z','max_motion'+'_x','max_motion'+'_y','max_motion'+'_z','min_time_s'+'cale','max_time_s'+'cale','min_time','max_time'],_0x1b60da=['packed_pos'+'ition','packed_rot'+'ation','packed_sca'+'le','packed_col'+'or','packed_mot'+'ion','packed_tim'+'e'],_0x467f67=new Array(0x1*-0x1c99+0x3*0x3a6+0x11d4)['fill']('')['map']((_0x42bb6b,_0x2d291e)=>'f_rest_'+_0x2d291e),_0x4366=()=>_0x35225a[0x1*0xa4+0x2627+-0x26cb]['name']==='chunk'&&_0x35225a[0x17b3+0x2480+-0x3c33]['properties']['every']((_0x2eaee5,_0x19e8e6)=>_0x2eaee5['name']===_0x3a4d53[_0x19e8e6]&&_0x2eaee5['type']==='float')&&_0x35225a[-0x941+-0x5d1*0x2+-0x14e4*-0x1]['name']==='vertex'&&_0x35225a[-0xd*0x207+-0x1*-0x529+0x1533]['properties']['every']((_0x3f7a85,_0x12239a)=>_0x3f7a85['name']===_0x1b60da[_0x12239a]&&_0x3f7a85['type']==='uint'),_0x1f801f=()=>_0x35225a[-0x1758+-0x21*-0x6f+0x90b]['name']==='sh'&&[0x6f1*0x5+-0x3d*0x9d+0x1*0x2bd,-0x12e+-0x2f0+0x436,0x2240+0x2025+-0x518*0xd]['indexOf'](_0x35225a[0x9*-0x1de+0x1dc1*-0x1+-0x5b*-0x83]['properties']['length'])!==-(-0xc*-0x1a3+-0x322*-0x1+0x1*-0x16c5)&&_0x35225a[0x1247*-0x1+0x2*-0x371+-0x11*-0x17b]['properties']['every']((_0x30b98e,_0x4067e1)=>_0x30b98e['name']===_0x467f67[_0x4067e1]&&_0x30b98e['type']==='uchar');return _0x35225a['length']===-0x24d7+0xe1e+0x1*0x16bb&&_0x4366()||_0x35225a['length']===-0x661*0x1+0x56*-0xd+0xac2&&_0x4366()&&_0x1f801f();},_0x28a580=_0x32b73a=>_0x32b73a['length']===-0x1945*-0x1+-0x1cb4+0x2*0x1b8&&_0x32b73a[-0xc8f+-0xd*-0x259+0xf2*-0x13]['name']==='vertex'&&_0x32b73a[0x243f*-0x1+-0x1b8e+-0x1*-0x3fcd]['properties']['every'](_0x55668a=>_0x55668a['type']==='float'),_0x164252=async(_0x3aa8ad,_0x287b67,_0x54f832)=>{const _0x4e03a6=new _0x487155();_0x4e03a6['comments']=_0x54f832;const _0x5b5b9d=_0x287b67[0xb*0x1bb+-0x97*0x9+-0xe*0xfb]['count'],_0x8525d2=_0x287b67[0x105*-0x25+0x243d+-0xbe*-0x2]['properties']['length'],_0x43eb7c=_0x287b67[-0x268a+0x22ed*-0x1+0x4978]['count'],_0x3ef032=_0x287b67[0x8aa+0x441+0x1*-0xcea]['properties']['some'](_0x38c75a=>_0x38c75a['name']==='packed_tim'+'e'),_0xb22dcb=(_0x2bd953=>{const _0x29d883=Math['ceil'](Math['sqrt'](_0x2bd953)),_0x2fc8d5=Math['ceil'](_0x2bd953/_0x29d883);return _0x29d883*_0x2fc8d5;})(_0x43eb7c);_0x4e03a6['numSplats']=_0x43eb7c,_0x4e03a6['is4D']=_0x3ef032,_0x4e03a6['chunkData']=new Float32Array(_0x5b5b9d*_0x8525d2),_0x4e03a6['vertexData']=new Uint32Array(_0xb22dcb*(0x3b*-0x97+-0x16*-0x8c+0x16cb));const _0xa1f799=async(_0x31dbc2,_0x5159f8)=>{const _0x290060=new Uint8Array(_0x31dbc2);let _0x3ddc65=-0x1*0x1159+0x2a+-0x35*-0x53;for(;_0x3ddc65<_0x5159f8;){for(;_0x3aa8ad['remaining']===-0x1de6+-0x19e4+0x37ca;)await _0x3aa8ad['read']();const _0xb018d2=Math['min'](_0x5159f8-_0x3ddc65,_0x3aa8ad['remaining']),_0x558311=_0x3aa8ad['data'];for(let _0x2c7c6e=-0x21*0x35+0x1a7b*-0x1+0x2150;_0x2c7c6e<_0xb018d2;++_0x2c7c6e)_0x290060[_0x3ddc65++]=_0x558311[_0x3aa8ad['head']++];}};if(await _0xa1f799(_0x4e03a6['chunkData']['buffer'],_0x5b5b9d*_0x8525d2*(0x193+-0x2342+-0x1*-0x21b3)),await _0xa1f799(_0x4e03a6['vertexData']['buffer'],_0x43eb7c*(0x1dfb+0x1d07+-0x3afc)*(0xd*-0x2cd+0x99e+-0x1*-0x1acf)),_0x287b67['length']===0x8ad*0x2+-0x1713+0x5bc){const _0x45b92a=_0xb22dcb*(0x2*0x93a+0x59*-0x11+-0xc7b),_0x2ebb1b=new Uint8Array(_0x45b92a),_0x54802d=new Uint8Array(_0x45b92a),_0xa1527=new Uint8Array(_0x45b92a),_0x3889a2=-0x26*0xcf+0xfc6+0x4bd*0x4,_0x44d1b8=_0x287b67[0xcd0+-0xf2*0x21+0x1264]['properties']['length']/(0x4*0x77e+-0x29+-0x1dcc),_0x71a47=new Uint8Array(_0x3889a2*_0x44d1b8*(-0xd53*0x2+0x1b0b+-0xe*0x7));for(let _0x1e01e6=0x1c*0xf8+0xad*-0x28+-0x18;_0x1e01e6<_0x4e03a6['numSplats'];_0x1e01e6+=_0x3889a2){const _0xaed9cc=Math['min'](_0x3889a2,_0x4e03a6['numSplats']-_0x1e01e6);await _0xa1f799(_0x71a47['buffer'],_0xaed9cc*_0x44d1b8*(-0x26e2+-0x3c0+-0x4bd*-0x9));for(let _0x27abdd=0x15f6+-0x1*-0x1419+-0xe05*0x3;_0x27abdd<_0xaed9cc;++_0x27abdd)for(let _0x54e23f=-0x61*-0x35+-0x112c+0x1*-0x2e9;_0x54e23f<0x1786*-0x1+-0x9*-0xa6+0x11bf;++_0x54e23f){const _0xb66f4f=(_0x1e01e6+_0x27abdd)*(-0xfad*-0x2+-0x7*-0x251+-0x2f81)+_0x54e23f;_0x54e23f<_0x44d1b8?(_0x2ebb1b[_0xb66f4f]=_0x71a47[(_0x27abdd*(0x402*-0x8+0x2d9+0x1d3a)+(0x58*0x1+0x1f*0x43+0x5*-0x1b1))*_0x44d1b8+_0x54e23f],_0x54802d[_0xb66f4f]=_0x71a47[(_0x27abdd*(0x3*0x98f+0x141*0x11+-0x31fb)+(0x1398+-0x8*-0x4d9+-0x3a5f))*_0x44d1b8+_0x54e23f],_0xa1527[_0xb66f4f]=_0x71a47[(_0x27abdd*(0x243c+-0x1178+-0x12c1)+(-0xa*0x3df+-0xd39+0x1*0x33f1))*_0x44d1b8+_0x54e23f]):(_0x2ebb1b[_0xb66f4f]=0x13d*0x15+0xbb1+0x2533*-0x1,_0x54802d[_0xb66f4f]=0x19b9+-0x26a2+0x68*0x21,_0xa1527[_0xb66f4f]=0xdf5+0x2098*-0x1+0x1*0x1322);}}_0x4e03a6['shData0']=_0x2ebb1b,_0x4e03a6['shData1']=_0x54802d,_0x4e03a6['shData2']=_0xa1527,_0x4e03a6['shBands']={0x3:0x1,0x8:0x2,0xf:0x3}[_0x44d1b8];}else _0x4e03a6['shBands']=0xb*0x319+0x1*-0x131d+-0xef6;return _0x4e03a6;},_0x3360f6=async(_0x289271,_0x1a3d19,_0x2453ad)=>{const _0x5c3df3=_0x1a3d19[-0x3*-0xbb9+-0xb3+-0x2278],_0x45037e=_0x5c3df3['properties'],_0x362319=_0x45037e['length'],_0x1621a9=_0x45037e['map'](_0x51de59=>_0x51de59['storage']),_0x2c4a74=_0x45037e['reduce']((_0x1ee324,_0x3d6135)=>_0x1ee324+_0x3d6135['byteSize'],0x1*0x1f7b+0x26fa+0x11*-0x425);let _0xd1a2ff=0x3f*0x77+-0x1d16+-0x33,_0xb50bd;const _0x1c8052=()=>{const _0x2edea9=_0x289271['data']['buffer'];(_0xb50bd==null?void(-0x1*-0x85d+0x2*-0x58f+0x2c1):_0xb50bd['buffer'])!==_0x2edea9&&(_0xb50bd=new Float32Array(_0x2edea9,0x1077+-0x118+-0xf5f,_0x2edea9['byteLength']/(-0x24d9+-0x411*-0x5+0x1088)));};for(_0x1c8052();_0xd1a2ff<_0x5c3df3['count'];){for(;_0x289271['remaining']<_0x2c4a74;)await _0x289271['read'](),_0x1c8052();const _0x285e2d=Math['min'](_0x5c3df3['count']-_0xd1a2ff,Math['floor'](_0x289271['remaining']/_0x2c4a74));for(let _0x3922a2=-0x1883+0x14f7+0x38c;_0x3922a2<_0x362319;++_0x3922a2){const _0x5c1ea1=_0x1621a9[_0x3922a2];for(let _0x1df126=0x1*0x62e+0x10e8+-0x1716;_0x1df126<_0x285e2d;++_0x1df126)_0x5c1ea1[_0x1df126+_0xd1a2ff]=_0xb50bd[_0x1df126*_0x362319+_0x3922a2];}_0xd1a2ff+=_0x285e2d,_0x289271['head']+=_0x285e2d*_0x2c4a74;}return new _0xc565ca(_0x1a3d19,_0x2453ad);},_0x33402f=async(_0x446fcd,_0x15df0f,_0x2773c8)=>{for(let _0x2a4c94=-0x61*0x36+-0x18fa+0x2d70;_0x2a4c94<_0x15df0f['length'];++_0x2a4c94){const _0x2f7916=_0x15df0f[_0x2a4c94],_0x252907=_0x2f7916['properties']['reduce']((_0x5d8e2b,_0x5e9af7)=>_0x5d8e2b+_0x5e9af7['byteSize'],0x1a73+-0x4*0x8e4+0x91d),_0x10cced=_0x2f7916['properties']['map'](_0x8efac=>{if(_0x8efac['storage'])switch(_0x8efac['type']){case'char':return(_0x55f33b,_0x16d271)=>{_0x8efac['storage'][_0x16d271]=_0x55f33b['getInt8']();};case'uchar':return(_0x16c358,_0x8c030d)=>{_0x8efac['storage'][_0x8c030d]=_0x16c358['getUint8']();};case'short':return(_0x3b1904,_0x3ef38d)=>{_0x8efac['storage'][_0x3ef38d]=_0x3b1904['getInt16']();};case'ushort':return(_0x3895e4,_0x2998b2)=>{_0x8efac['storage'][_0x2998b2]=_0x3895e4['getUint16']();};case'int':return(_0x222476,_0x341c03)=>{_0x8efac['storage'][_0x341c03]=_0x222476['getInt32']();};case'uint':return(_0x334095,_0x24aa51)=>{_0x8efac['storage'][_0x24aa51]=_0x334095['getUint32']();};case'float':return(_0x379417,_0x876a94)=>{_0x8efac['storage'][_0x876a94]=_0x379417['getFloat32']();};case'double':return(_0x4ac812,_0x4162fb)=>{_0x8efac['storage'][_0x4162fb]=_0x4ac812['getFloat64']();};default:throw new Error('Unsupporte'+'d\x20property'+'\x20data\x20type'+'\x20\x27'+_0x8efac['type']+('\x27\x20in\x20ply\x20h'+'eader'));}else return _0x396953=>{_0x396953['head']+=_0x8efac['byteSize'];};});let _0x3df5d3=-0x1998+0xc30+0x23c*0x6;for(;_0x3df5d3<_0x2f7916['count'];){for(;_0x446fcd['remaining']<_0x252907;)await _0x446fcd['read']();const _0x1d3b83=Math['min'](_0x2f7916['count']-_0x3df5d3,Math['floor'](_0x446fcd['remaining']/_0x252907));for(let _0x3a330e=0x23a7+-0x2*-0x1bd+-0x9f*0x3f;_0x3a330e<_0x1d3b83;++_0x3a330e){for(let _0x311802=-0x64*-0x56+-0x2050+-0x8*0x29;_0x311802<_0x2f7916['properties']['length'];++_0x311802)_0x10cced[_0x311802](_0x446fcd,_0x3df5d3);_0x3df5d3++;}}}return new _0xc565ca(_0x15df0f,_0x2773c8);},_0x1809b1=async(_0x26c395,_0x36fcf3=null)=>{const _0x32b236=(_0x212690,_0x4a86ac)=>{const _0x3fa609=_0x212690['length']-_0x4a86ac['length'];let _0x1bd48f,_0x31af39;for(_0x1bd48f=-0x1c6*0x2+-0xf23*-0x1+0x3dd*-0x3;_0x1bd48f<=_0x3fa609;++_0x1bd48f){for(_0x31af39=0xd37+0x12e3+-0x496*0x7;_0x31af39<_0x4a86ac['length']&&_0x212690[_0x1bd48f+_0x31af39]===_0x4a86ac[_0x31af39];++_0x31af39);if(_0x31af39===_0x4a86ac['length'])return _0x1bd48f;}return-(0x16e8+0xd82+-0x2469*0x1);},_0x4fbd1e=(_0x30dd1a,_0x4470ce)=>{if(_0x30dd1a['length']<_0x4470ce['length'])return!(0x1b4f+0x2*-0xc51+-0x6*0x72);for(let _0x54b13a=0x1300+-0x17c9*0x1+0x4c9;_0x54b13a<_0x4470ce['length'];++_0x54b13a)if(_0x30dd1a[_0x54b13a]!==_0x4470ce[_0x54b13a])return!(0x24fa+0x22a7+-0x23d0*0x2);return!(-0x207*0x8+0x210d+-0x10d5);},_0x335250=new _0x1b7995(_0x26c395,_0x36fcf3);let _0x4d8257;for(;;){if(await _0x335250['read'](),_0x335250['tail']>=_0x5e0f69['length']&&!_0x4fbd1e(_0x335250['data'],_0x5e0f69))throw new Error('Invalid\x20pl'+'y\x20header');if(_0x4d8257=_0x32b236(_0x335250['data'],_0x498dae),_0x4d8257!==-(0xa7*-0x13+0x5*0x337+0x3ad*-0x1))break;}const _0x43110c=new TextDecoder('ascii')['decode'](_0x335250['data']['subarray'](0x419*-0x3+-0x5f2+0x7*0x29b,_0x4d8257))['split']('\x0a'),{elements:_0x3b8c95,format:_0x250445,comments:_0x30e740}=_0x3ddb06(_0x43110c);if(_0x250445!=='binary_lit'+'tle_endian')throw new Error('Unsupporte'+'d\x20ply\x20form'+'at');return _0x335250['head']=_0x4d8257+_0x498dae['length'],_0x335250['compact'](),await((async()=>_0xe27f51(_0x3b8c95)?await _0x164252(_0x335250,_0x3b8c95,_0x30e740):(_0x3b8c95['forEach'](_0x198fe8=>{_0x198fe8['properties']['forEach'](_0x221c1c=>{const _0x5d76ed=_0x2fae6b['get'](_0x221c1c['type']);if(_0x5d76ed){const _0x2ee456=new _0x5d76ed(_0x198fe8['count']);_0x221c1c['storage']=_0x2ee456;}});}),_0x28a580(_0x3b8c95)?await _0x3360f6(_0x335250,_0x3b8c95,_0x30e740):await _0x33402f(_0x335250,_0x3b8c95,_0x30e740)))());},_0x3a4f88=_0x678415=>{const {numSplats:_0x11d74b,chunkData:_0x8d3965,chunkSize:_0x10ac1b,vertexData:_0x242155,shData0:_0x4dda26,shData1:_0x19a3a6,shData2:_0xf9976c,shBands:_0x2b5ff2,comments:_0x2bed73,is4D:_0x94bd3a}=_0x678415,_0x2d9aa9=['x','y','z','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','f_dc_0','f_dc_1','f_dc_2','opacity'];if(_0x94bd3a&&_0x2d9aa9['push']('t','t_scale','motion_0','motion_1','motion_2'),_0x2b5ff2>0xfd+-0x1adf+0x19e2){const _0x51dcfb=[];for(let _0x19d331=0x2*0x830+0x65d+0x16bd*-0x1;_0x19d331<0x286+-0x15*-0x54+0x1*-0x93d;++_0x19d331)_0x51dcfb['push']('f_rest_'+_0x19d331);_0x2d9aa9['splice'](_0x2d9aa9['indexOf']('f_dc_0')+(0xd*-0x21f+-0x4*-0x70b+0x4c*-0x2),0xee0+-0x19f5+-0x1*-0xb15,..._0x51dcfb);}const _0x378514={};_0x2d9aa9['forEach'](_0x234de6=>{_0x378514[_0x234de6]=new Float32Array(_0x11d74b);});const _0x150f67=new _0x48051c(),_0x646003=new _0x3d8960(),_0x4c3acc=new _0x48051c(),_0x910d3d=new _0x654087(),_0x15aa51=new _0x48051c(),_0x49df3a=new _0x48051c(),_0x3c47c5=_0x2b5ff2>0x1*0x3e3+-0x1583+0x178*0xc?new Float32Array(0x1fea+-0x110*-0x16+-0x371d):null,_0x383e91=new _0x17b6f6(_0x8d3965,_0x10ac1b,_0x242155,_0x4dda26,_0x19a3a6,_0xf9976c,_0x2b5ff2,_0x150f67,_0x646003,_0x4c3acc,_0x910d3d,_0x15aa51,_0x49df3a,_0x3c47c5);for(let _0x354a4f=0x19*0x97+0x2*-0x89b+0x1*0x277;_0x354a4f<_0x11d74b;++_0x354a4f){_0x383e91['read'](_0x354a4f),_0x378514['x'][_0x354a4f]=_0x150f67['x'],_0x378514['y'][_0x354a4f]=_0x150f67['y'],_0x378514['z'][_0x354a4f]=_0x150f67['z'],_0x378514['rot_1'][_0x354a4f]=_0x646003['x'],_0x378514['rot_2'][_0x354a4f]=_0x646003['y'],_0x378514['rot_3'][_0x354a4f]=_0x646003['z'],_0x378514['rot_0'][_0x354a4f]=_0x646003['w'],_0x378514['scale_0'][_0x354a4f]=_0x4c3acc['x'],_0x378514['scale_1'][_0x354a4f]=_0x4c3acc['y'],_0x378514['scale_2'][_0x354a4f]=_0x4c3acc['z'],_0x378514['motion_0'][_0x354a4f]=_0x15aa51['x'],_0x378514['motion_1'][_0x354a4f]=_0x15aa51['y'],_0x378514['motion_2'][_0x354a4f]=_0x15aa51['z'],_0x378514['t_scale'][_0x354a4f]=_0x49df3a['x'],_0x378514['t'][_0x354a4f]=_0x49df3a['y'],_0x378514['f_dc_0'][_0x354a4f]=(_0x910d3d['x']-(0x1e39*0x1+-0x689+0xbd8*-0x2+0.5))/_0x531614,_0x378514['f_dc_1'][_0x354a4f]=(_0x910d3d['y']-(0x2*-0x84e+0x2*0x202+0xc98+0.5))/_0x531614,_0x378514['f_dc_2'][_0x354a4f]=(_0x910d3d['z']-(0x3a7*0x3+-0x2*0x10e1+0x16cd+0.5))/_0x531614;const _0x435ae6=_0x910d3d['w']<=-0x2*0xfa1+0x4*0x779+0x46*0x5?-(-0x1f7f+0x1021*-0x1+0x5f9*0x8):_0x910d3d['w']>=0x2*0x1141+-0x5*0x1bb+0x44f*-0x6?-0xfb*0x25+-0x9eb*0x3+-0x161*-0x30:-Math['log']((-0x163b*-0x1+0x2666+-0x3ca0)/_0x910d3d['w']-(-0x1*-0x24b+-0x5dc+0x392));if(_0x378514['opacity'][_0x354a4f]=(0x12a1+0x7ec+-0x1*0x1a8c)/(-0xcae*0x1+-0x228d+0x2f3c+Math['exp'](-_0x435ae6)),_0x3c47c5){for(let _0x1b3c2c=-0x95*-0x1a+-0x2*0x1201+-0x8*-0x29c;_0x1b3c2c<-0x6c2*-0x3+-0x4*0x40f+-0x3dd;++_0x1b3c2c)_0x378514['f_rest_'+_0x1b3c2c][_0x354a4f]=_0x3c47c5[_0x1b3c2c];}}const _0x4fae4b=[{'count':_0x11d74b,'name':'vertex','properties':_0x2d9aa9['map'](_0x1b6357=>({'byteSize':0x4,'name':_0x1b6357,'type':'float','storage':_0x378514[_0x1b6357]}))}];return new _0xc565ca(_0x4fae4b,_0x2bed73);};}class bN extends me{constructor(_0x3f8158){super(),h(this,'worker'),h(this,'loadUrlLis'+'t'),(this['loadUrlLis'+'t']=_0x3f8158,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+EN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','loadUrlList':this['loadUrlLis'+'t']});}['loadPly'](_0x2abb0a,_0x55bf99,_0x7a251d=(_0x7f477b,_0x446921)=>{},_0x4a5236=(_0x418701,_0x538017,_0x12bfa1)=>{},_0x4667b6=(_0x221719,_0x2d9adc)=>{}){var _0x4138e4;return(_0x4138e4=this['worker'])==null||_0x4138e4['postMessag'+'e']({'type':'loadPly','url':_0x2abb0a,'decompress':_0x55bf99}),new Promise((_0x1c7af9,_0x7faf9)=>{if(!this['worker']){_0x7faf9(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x2dcbcc=>{if(!this['worker'])return;const {data:_0x2c19b1}=_0x2dcbcc;if(_0x2abb0a===_0x2c19b1['url'])switch(_0x2c19b1['type']){case'totalLengt'+'h':_0x7a251d==null||_0x7a251d(_0x2c19b1['totalLengt'+'h'],_0x2c19b1['url']);break;case'progress':_0x4a5236==null||_0x4a5236(_0x2c19b1['bytes'],_0x2c19b1['totalLengt'+'h'],_0x2c19b1['url']);break;case'splatData':_0x1c7af9(_0x2c19b1['data']);break;case'error':_0x4667b6==null||_0x4667b6(_0x2c19b1['data'],_0x2c19b1['url']);break;}};});}['destroy'](){this['loadUrl']='',this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(0x1b0e+0x16e6+-0x2*0x18fa));}}class AN{constructor(_0x38b85e,_0x980d81){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'readWorker'),(console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','Register\x20P'+'lyParser.c'+'onstructor'),this['app']=_0x38b85e,this['maxRetries']=_0x980d81,this['urlList']=[],this['gsplatReso'+'urce']=null,this['readWorker']=null,this['totalRecei'+'ved']=-0x2385+0x1cd*0x7+-0x1a3*-0xe);}async['load'](_0x367b41,_0x2dc9ad,_0x4f1db0){var _0x3bf3ca,_0x2f96e4,_0x191522;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','PlyParser.'+'load'),this['urlList']=[],_0x367b41['load']['includes'](',')?this['urlList']=_0x367b41['load']['split'](','):this['urlList']['push'](_0x367b41['load']);const _0x5b2d64=_0x4f1db0['data']['createTime']!==((_0x2f96e4=(_0x3bf3ca=this['onlyOneAss'+'et'])==null?void(-0x1*0x15f1+-0x1737+0x2d28):_0x3bf3ca['data'])==null?void(-0x1d4b+-0xdc2+0x67*0x6b):_0x2f96e4['createTime']);(!this['readWorker']||_0x5b2d64)&&((_0x191522=this['readWorker'])==null||_0x191522['destroy'](),this['readWorker']=new bN(this['urlList']));const _0x3705bd=_0x4f1db0['data']['loadIndex']>=-0xc01+-0x2*0x35+-0xc6b*-0x1?_0x4f1db0['data']['loadIndex']:-0x3+-0x25d5+0x25d8,_0x5cae98=_0x4f1db0['data']['loadMode']==='all'?this['urlList']['length']-_0x3705bd:_0x3705bd+(-0x6*0x392+-0x125+0x1692),_0x2fa081=_0x4f1db0['data']['timeOption'],_0x2f4dcb=_0x4f1db0['data']['events'];for(let _0x38e468=_0x3705bd;_0x38e468<_0x5cae98;_0x38e468++)await this['loadGsplat'+'Data'](this['urlList'],_0x2dc9ad,_0x4f1db0,_0x38e468,_0x2fa081,_0x2f4dcb,_0x5cae98);_0x2f4dcb['fire']('loadAllAss'+'etsDone');}async['loadGsplat'+'Data'](_0x19442c,_0xdb39d2,_0x548d68,_0x2f7b6d,_0x4397d1,_0x1222f5,_0x4beca5){var _0x409abc,_0x38f013,_0x4ae312;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','loadGsplat'+'Data',_0x19442c[_0x2f7b6d]['trim'](),_0x2f7b6d);const _0x2bb659=_0x4397d1[(-0x1240+-0x22e2+0x4*0xd49)*_0x2f7b6d]+_0x4397d1[(-0x686+0x268a+-0xf1*0x22)*_0x2f7b6d+(0x1f*0x35+0x531*0x2+0x5*-0x35c)],_0x59a9c3=_0x19442c[_0x2f7b6d]['trim']();globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('loadTime','=========='+'=========='+'=========='+'=========='+'=========='+'====='),console['log']('loadTime','start\x20load'+'\x20ply\x20data',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(-0x552*-0x3+-0x14b*-0x1b+-0x1*0x1f57))['toFixed'](0x2062+0x13*-0x15c+-0x2*0x346));try{const _0x37247f=await((_0x409abc=this['readWorker'])==null?void(-0x1*-0x485+-0xb1f*-0x3+0x25e2*-0x1):_0x409abc['loadPly'](_0x59a9c3,_0x548d68['data']['decompress'],()=>{this['totalRecei'+'ved']=0x1dcd+0x1*0x2185+-0x1*0x3f52;},(_0x2dc1a5,_0x599e84)=>{this['totalRecei'+'ved']+=_0x2dc1a5,_0x548d68&&_0x1222f5['fire']('progress',_0x599e84*_0x2f7b6d/_0x4beca5+this['totalRecei'+'ved']/_0x4beca5,_0x599e84);},(_0x3523a2,_0x4dd44c)=>{debugger;console['warn']('ERROE\x20Load'+'\x20Ply',_0x4dd44c,_0x3523a2);}));let _0x517df8;console['log']('loadTime','load\x20ply\x20d'+'ata\x20done',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(-0x2*0x2ab+-0x963+-0x1*-0x2241))['toFixed'](-0xb*-0x6f+0x37*-0x1+-0x3*0x184)),_0x37247f['isCompress'+'ed']?(_0x517df8=new wN(),_0x517df8['comments']=_0x37247f['comments'],_0x517df8['numSplats']=_0x37247f['numSplats'],_0x517df8['is4D']=_0x37247f['is4D'],_0x517df8['chunkData']=_0x37247f['chunkData'],_0x517df8['vertexData']=_0x37247f['vertexData'],_0x517df8['shData0']=_0x37247f['shData0'],_0x517df8['shData1']=_0x37247f['shData1'],_0x517df8['shData2']=_0x37247f['shData2'],_0x517df8['shBands']=_0x37247f['shBands']):_0x517df8=new zn(_0x37247f['elements'],_0x37247f['comments']),_0x548d68['fire']('load:data',_0x517df8),_0x517df8['isCompress'+'ed']||_0x548d68['data']['reorder'];const _0x1e7e26=_0x548d68['data']['createTime']!==((_0x4ae312=(_0x38f013=this['onlyOneAss'+'et'])==null?void(-0x371*0x7+0x29*-0x57+0x2606):_0x38f013['data'])==null?void(-0x14e9+0x11*0x16b+0x2*-0x199):_0x4ae312['createTime']);this['gsplatReso'+'urce']&&!_0x1e7e26?this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x517df8['isCompress'+'ed']?await _0x517df8['decompress']():_0x517df8,_0x4397d1,_0x2bb659,_0x548d68,_0x1222f5):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),this['gsplatReso'+'urce']=new GA(this['app']['graphicsDe'+'vice'],_0x517df8['isCompress'+'ed']?await _0x517df8['decompress']():_0x517df8),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x4397d1,this['onlyOneAss'+'et']=_0x548d68),_0xdb39d2(null,this['gsplatReso'+'urce']);}catch(_0x4e05ea){_0xdb39d2(_0x4e05ea,null);}}['open'](_0x31e41c,_0x108e22){return _0x108e22;}}async function CN(){const _0x3660a4='super4d-ca'+'che-v1',_0x5d5a61={'maxAge':0x202fbf000,'maxSize':0x280000000},_0x147a7f=-0x22e7+-0x5c7*0x1+0x28ae+0.28209479177387814;class _0x233648{constructor(_0x31421c={}){this['options']={..._0x5d5a61,..._0x31421c},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=0xca*-0x29+-0x729+0x2783,this['initialize'+'d']=!(-0x4e1*-0x5+0x1*0x848+-0x20ac);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x3660a4);const _0x5129f3=await this['cache']['keys'](),_0x300f26=[];for(const _0x162edb of _0x5129f3){const _0x3847de=_0x162edb['url'],_0x2b8c59=await this['cache']['match'](_0x3847de);if(_0x2b8c59){const _0x1c124e=(await _0x2b8c59['blob']())['size'],_0x14289d=_0x2b8c59['headers']['get']('x-cache-ti'+'me');_0x14289d&&_0x300f26['push']({'url':_0x3847de,'size':_0x1c124e,'cacheTime':parseInt(_0x14289d)});}}_0x300f26['sort']((_0xe65b92,_0x301030)=>_0xe65b92['cacheTime']-_0x301030['cacheTime']);for(const _0x46c01d of _0x300f26)this['cacheSizes']['set'](_0x46c01d['url'],_0x46c01d['size']),this['currentSiz'+'e']+=_0x46c01d['size'],this['lruList']['push'](_0x46c01d['url']);}catch(_0x27573d){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x27573d);}this['initialize'+'d']=!(0x21*-0x118+0x3*-0x3b9+0x2f43);}}async['get'](_0x13d385){if(await this['init'](),!this['cache'])return null;try{const _0x4f181c=await this['cache']['match'](_0x13d385);if(!_0x4f181c)return null;const _0x13047a=_0x4f181c['headers']['get']('x-cache-ti'+'me');return _0x13047a&&Date['now']()-parseInt(_0x13047a)>this['options']['maxAge']?(await this['delete'](_0x13d385),null):(this['updateLRU'](_0x13d385),_0x4f181c);}catch{return null;}}async['set'](_0x3647c8,_0x3d3088){if(!(!this['cache']||_0x3647c8['startsWith']('blob:')))try{const _0x3e83e1=_0x3d3088['clone'](),_0x5653f8=await _0x3e83e1['blob'](),_0x22412e=_0x5653f8['size'];this['currentSiz'+'e']+_0x22412e>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x22412e);const _0xc3addf=new Headers(_0x3e83e1['headers']);_0xc3addf['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x42a741=new Response(_0x5653f8,{'status':_0x3e83e1['status'],'statusText':_0x3e83e1['statusText'],'headers':_0xc3addf});await this['cache']['put'](_0x3647c8,_0x42a741),this['cacheSizes']['set'](_0x3647c8,_0x22412e),this['currentSiz'+'e']+=_0x22412e,this['updateLRU'](_0x3647c8);}catch(_0x4dfaaa){console['error']('Cache\x20set\x20'+'error:',_0x4dfaaa);}}['updateLRU'](_0x15113e){const _0x3af73c=this['lruList']['indexOf'](_0x15113e);_0x3af73c>-(0x36a*0x5+0x320*0x7+-0x26f1*0x1)&&this['lruList']['splice'](_0x3af73c,0x53*-0x54+-0x1*-0x2523+0x7*-0x16a),this['lruList']['push'](_0x15113e);}async['cleanupSpa'+'ce'](_0x5174e4){const _0x22695c=this['options']['maxSize']*(-0x22a6+-0x33e+-0x32*-0xc2+0.9);if(!(this['currentSiz'+'e']<=_0x22695c))for(;this['lruList']['length']>-0x4a5*-0x5+-0x821+-0xf18&&this['currentSiz'+'e']>_0x22695c;){const _0x2eb5ee=this['lruList']['shift']();_0x2eb5ee&&await this['delete'](_0x2eb5ee);}}async['delete'](_0x195a78){if(this['cache'])try{await this['cache']['delete'](_0x195a78);const _0x241bb0=this['cacheSizes']['get'](_0x195a78)||-0x18ee+0x19d7+-0x1*0xe9;this['currentSiz'+'e']-=_0x241bb0,this['cacheSizes']['delete'](_0x195a78);const _0x5be96f=this['lruList']['indexOf'](_0x195a78);_0x5be96f>-(0x449*0x6+0x1e58+-0x1*0x380d)&&this['lruList']['splice'](_0x5be96f,0x1a39+0xc15+-0x264d);}catch(_0x4c928c){console['error']('Cache\x20dele'+'te\x20error:',_0x4c928c);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x469f65=>Promise['all'](_0x469f65['map'](_0x121fd9=>{var _0x5f52d0;return(_0x5f52d0=this['cache'])==null?void(0x2309*0x1+-0x2*-0x321+-0x294b):_0x5f52d0['delete'](_0x121fd9);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x1d1+-0x2383+0x21b2;}catch(_0x454edd){console['error']('Cache\x20clea'+'r\x20error:',_0x454edd);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x23*-0x9b+-0x1ed*0x1+0x4*-0x4d1;}}class _0x475c10{constructor(_0x1c2dcc=[],_0x250ca1={}){this['cacheManag'+'er']=new _0x233648(_0x250ca1['cache']),this['retryCount']=_0x250ca1['retryCount']||0x46e+-0x11*-0xb+0x1*-0x526,this['retryDelay']=_0x250ca1['retryDelay']||-0x33f+0x10*-0x223+0x2763,this['maxConcurr'+'ency']=_0x250ca1['maxConcurr'+'ency']||0x82*0x3b+-0x15*0x11b+-0x6b9,this['downloadQu'+'eue']=_0x1c2dcc,this['isProcessi'+'ngDownload'+'Queue']=!(-0x18b3+-0x1*-0x659+0x7f*0x25),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(-0x1ea7+0x81*-0x3b+0x3c62);this['downloadQu'+'eue']['length']>-0x226*0x2+-0x1*-0x1e49+-0x19fd;)try{const _0x4c0ff9=this['downloadQu'+'eue']['splice'](0x1*0x521+0x1*0x1ffa+-0x251b*0x1,this['maxConcurr'+'ency'])['map'](_0xcb4bd1=>{if(!this['pendingRes'+'ponses']['has'](_0xcb4bd1)){const _0x35a13c=this['download'](_0xcb4bd1);return this['pendingRes'+'ponses']['set'](_0xcb4bd1,_0x35a13c),_0x35a13c['then'](()=>{this['pendingRes'+'ponses']['delete'](_0xcb4bd1);});}return Promise['resolve']();});await Promise['all'](_0x4c0ff9);}catch(_0x51468d){console['error']('Download\x20e'+'rror:',_0x51468d);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(0xbcc*0x3+-0x222b+-0x4*0x4e);}}}async['fetch'](_0x1a7a2c,_0x56ef01={}){if(this['pendingRes'+'ponses']['has'](_0x1a7a2c))return this['pendingRes'+'ponses']['get'](_0x1a7a2c);const {forceRefresh:_0x1557f3=!(-0x9d6+-0x1b42+0x2519),..._0xf27b7b}=_0x56ef01;this['pendingRes'+'ponses']['set'](_0x1a7a2c,this['download'](_0x1a7a2c,_0xf27b7b));const _0x12a086=await this['pendingRes'+'ponses']['get'](_0x1a7a2c);return this['pendingRes'+'ponses']['delete'](_0x1a7a2c),_0x12a086;}async['download'](_0x38776b,_0x53f028={}){var _0x4cbae2;await((_0x4cbae2=this['cacheManag'+'er'])==null?void(0x1671+0x426*-0x1+0xdf*-0x15):_0x4cbae2['init']());const {forceRefresh:_0x1c7185=!(0x1400+0x1*0xd3+-0x42a*0x5),..._0x3ef243}=_0x53f028;_0x1c7185&&await this['cacheManag'+'er']['delete'](_0x38776b);const _0x196516=await this['cacheManag'+'er']['get'](_0x38776b);if(_0x196516)return _0x196516;let _0x46275c;for(let _0x5d1ce8=0x24f4+-0x61*-0x4a+0x11a*-0x3b;_0x5d1ce8<this['retryCount'];_0x5d1ce8++)try{const _0x762fb3=await fetch(_0x38776b,_0x3ef243);if(!_0x762fb3['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x762fb3['status']);return await this['cacheManag'+'er']['set'](_0x38776b,_0x762fb3),_0x762fb3;}catch(_0x6fe002){console['error']('Download\x20e'+'rror:',_0x6fe002),_0x46275c=_0x6fe002,_0x5d1ce8<this['retryCount']-(-0xbf*-0x1d+0xc7c+0x16*-0x18d)&&await new Promise(_0x1eb856=>setTimeout(_0x1eb856,this['retryDelay']*(_0x5d1ce8+(0x13fa+-0x1b25*0x1+0x72c))));}throw _0x46275c;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){var _0x26ff16;(_0x26ff16=this['cacheManag'+'er'])==null||_0x26ff16['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(-0x2696+0x3e*-0x3a+-0x21b*-0x19),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x78e44c{constructor(_0x7dc66c,_0x3c23f2=[]){this['elements']=_0x7dc66c,this['comments']=_0x3c23f2,this['isCompress'+'ed']=!(-0x2*-0xec3+0x173+0x3df*-0x8);}}class _0x3e64ef{constructor(_0x181bd6){this['url']=_0x181bd6;}async['readFragme'+'nt'](){globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x475c10(globalThis['downloadQu'+'eueUrlList']));const _0x2a04e0=await globalThis['fetchWorke'+'r']['fetch'](this['url']);if(!_0x2a04e0['ok'])throw new Error('Failed\x20to\x20'+'fetch\x20'+this['url']+':\x20'+_0x2a04e0['statusText']);const _0x2c4914=await _0x2a04e0['arrayBuffe'+'r'](),_0x105f82=new Uint8Array(_0x2c4914);let _0x9fbd4a=-0x37*-0xa1+-0x5*0x5df+-0x53c,{size:_0x1f46cd,type:_0x27f23e}=this['_readBoxHe'+'ader'](_0x105f82,_0x9fbd4a);if(_0x27f23e!=='moof')throw new Error('Not\x20a\x20moof');_0x9fbd4a+=0x599*0x3+0x187a+-0x293d;const _0x171a09=_0x9fbd4a+_0x1f46cd-(0x1af0+-0x2*0xc59+-0x236);let _0x4a6397=null;for(;_0x9fbd4a<_0x171a09;){const {size:_0x3dec2e,type:_0xb822cf}=this['_readBoxHe'+'ader'](_0x105f82,_0x9fbd4a);_0x9fbd4a+=0x93*-0x23+0x91*-0x23+0x27f4;const _0xba1dff=_0x105f82['slice'](_0x9fbd4a,_0x9fbd4a+_0x3dec2e-(-0x66c+-0x472*-0x4+0xb54*-0x1));_0x9fbd4a+=_0x3dec2e-(-0x3d9*-0x5+0x2279+0x1*-0x35ae),_0xb822cf==='emsg'&&(_0x4a6397=this['_parseEmsg'](_0xba1dff));}if(!_0x4a6397)throw new Error('Incomplete'+'\x20moof');const {size:_0xbcb859,type:_0x2edfcb}=this['_readBoxHe'+'ader'](_0x105f82,_0x9fbd4a);if(_0x2edfcb!=='mdat')throw new Error('Expected\x20m'+'dat\x20box\x20af'+'ter\x20moof');_0x9fbd4a+=0x22f*0x11+0x552+-0x2a69;const _0x2677f5=_0x105f82['slice'](_0x9fbd4a,_0x9fbd4a+(_0xbcb859-(-0x2*0x78a+-0x1953*-0x1+-0x1*0xa37)));return{'metadata':_0x4a6397,'segmentData':_0x2677f5};}['_readBoxHe'+'ader'](_0x3f7f8c,_0x1c5d0c){if(_0x1c5d0c+(-0x17b0+0xd75*0x2+-0x332)>_0x3f7f8c['length'])throw new Error('EOF');const _0x49c171=_0x3f7f8c[_0x1c5d0c]<<-0x262e+0x1*0x22f+0x2417|_0x3f7f8c[_0x1c5d0c+(-0x835*0x1+0x163e+-0xe08)]<<0x1cce+-0x4*0x7bf+0x23e|_0x3f7f8c[_0x1c5d0c+(-0x52*0x26+-0x244d+0x307b)]<<-0x1cbd+0x1718+0x5ad|_0x3f7f8c[_0x1c5d0c+(0x2490+0x2*-0x721+-0x164b)],_0x2829e8=String['fromCharCo'+'de'](_0x3f7f8c[_0x1c5d0c+(-0x6c4*0x1+-0x4b*-0xa+0x3da)],_0x3f7f8c[_0x1c5d0c+(0x11*-0x185+0x139*-0xb+0x274d)],_0x3f7f8c[_0x1c5d0c+(0x155*-0xf+-0x6ba+0x1*0x1abb)],_0x3f7f8c[_0x1c5d0c+(0x4*-0x827+-0x15d7+0x367a)]);return{'size':_0x49c171,'type':_0x2829e8};}['_parseEmsg'](_0x69e6b4){let _0x5850be=-0xe8f+-0xdf5+0x1c84;_0x5850be=_0x69e6b4['indexOf'](0x1f3b+-0x15af+0x2f*-0x34,_0x5850be)+(0x144f+-0x1f*-0x2+0x5*-0x41c),_0x5850be=_0x69e6b4['indexOf'](-0xb09+0xec0+0x1*-0x3b7,_0x5850be)+(-0x336+-0x2*0xaf4+0x6d*0x3b),_0x5850be+=-0x62f*-0x3+0x1e7*0x1+-0x1464;const _0x4c68d8=_0x69e6b4['slice'](_0x5850be);return globalThis['CBOR']['decode'](_0x4c68d8);}}class _0xe922ea{constructor(_0x453ea0=0x265b+-0x216a+-0x4f1,_0xb202be=0x2436+0x12*-0x4+-0x9*0x3fe,_0x33c65c=-0x2294+0x1401+0xe93,_0x1b18bc=-0x23b1+-0x20bc+0x446e){this['x']=_0x453ea0,this['y']=_0xb202be,this['z']=_0x33c65c,this['w']=_0x1b18bc;}['set'](_0x4a2eb0,_0x12a16d,_0x10f57b,_0x2d4690){return this['x']=_0x4a2eb0,this['y']=_0x12a16d,this['z']=_0x10f57b,this['w']=_0x2d4690,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x1e1d8e=this){let _0x5330ff=_0x1e1d8e['length']();return _0x5330ff===-0x1ad6+-0x2413*-0x1+-0x93d?(this['x']=this['y']=this['z']=-0x47*0x7c+-0x53*-0x1+0x2211,this['w']=-0x10d7+0xe09*0x1+0x2cf*0x1):(_0x5330ff=(0x19c*-0xf+0x2645+-0xe20)/_0x5330ff,this['x']=_0x1e1d8e['x']*_0x5330ff,this['y']=_0x1e1d8e['y']*_0x5330ff,this['z']=_0x1e1d8e['z']*_0x5330ff,this['w']=_0x1e1d8e['w']*_0x5330ff),this;}['mulScalar'](_0x49f32d,_0x301593=this){return this['x']=_0x301593['x']*_0x49f32d,this['y']=_0x301593['y']*_0x49f32d,this['z']=_0x301593['z']*_0x49f32d,this['w']=_0x301593['w']*_0x49f32d,this;}}self['onmessage']=async _0x5e5010=>{var _0x11ab98,_0x3eb4ca;const {data:_0x3f9e5d}=_0x5e5010;switch(_0x3f9e5d['type']){case'initWorker':importScripts(_0x3f9e5d['cborXUrl']);break;case'destroyWor'+'ker':_0x4857cd();break;case'loadGsdMan'+'ifest':const {manifestUrl:_0x2f8782,loadRepresentation:_0x4eec22}=_0x3f9e5d,_0x37b752=await _0x5a0c33(_0x2f8782,_0x4eec22);globalThis['manifestUr'+'l']=_0x2f8782,globalThis['manifest']=_0x37b752,globalThis['resentatio'+'n']=_0x37b752['representa'+'tion'],globalThis['downloadQu'+'eueUrlList']=_0x5e6766(),globalThis['fetchWorke'+'r']=new _0x475c10(globalThis['downloadQu'+'eueUrlList']),self['postMessag'+'e']({'type':'onloadMani'+'fest','data':_0x37b752,'url':_0x2f8782,'representation':_0x4eec22});break;case'loadGsdSeg'+'ments':try{const _0x46cb41=_0x5b598e(globalThis['manifest'],globalThis['resentatio'+'n']),_0x5b2c95=await _0x202455(globalThis['manifest'],_0x46cb41),_0x561de9=(_0x11ab98=_0x5b2c95==null?void(0x26e7+-0xc6f*-0x3+-0x261a*0x2):_0x5b2c95['elements'][0xa3b+0x1*0x1a33+-0x246e])==null?void(-0x248*-0x6+-0x1*0x81d+-0x593*0x1):_0x11ab98['properties']['map'](_0x8e68e7=>_0x8e68e7['storage']['buffer']);self['postMessag'+'e']({'type':'loadGsdSeg'+'mentsDone','data':_0x5b2c95,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0x561de9);}catch(_0x4d18d1){console['error']('Error\x20load'+'ing\x20GSD:',_0x4d18d1),self['postMessag'+'e']({'type':'error','data':_0x4d18d1['message'],'url':globalThis['manifestUr'+'l']});}break;case'loadTimeli'+'neIndexSeg'+'ments':const {timelineIndexs:_0x5c06e6}=_0x3f9e5d;try{const _0xd06f33=_0x5b598e(globalThis['manifest'],globalThis['resentatio'+'n']),_0x1e5b7f=await _0x2ada7b(globalThis['manifest'],_0xd06f33,_0x5c06e6),_0x237c3d=(_0x3eb4ca=_0x1e5b7f==null?void(0xb7d*-0x1+-0x266*-0x2+0x1*0x6b1):_0x1e5b7f['elements'][-0x1bba+-0x16bd+0x3277])==null?void(-0x9bc*0x4+-0x65*-0x51+-0x6fb*-0x1):_0x3eb4ca['properties']['map'](_0x5ac918=>_0x5ac918['storage']['buffer']);self['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'mentsDone','data':_0x1e5b7f,'timelineIndexs':_0x5c06e6,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0x237c3d);}catch(_0x5206f0){console['error']('Error\x20load'+'ing\x20GSD:',_0x5206f0),self['postMessag'+'e']({'type':'error','data':_0x5206f0['message'],'url':globalThis['manifestUr'+'l']});}break;}};const _0x4857cd=()=>{var _0x24aecf;globalThis['manifestUr'+'l']=null,globalThis['manifest']=null,globalThis['resentatio'+'n']=null,(_0x24aecf=globalThis['fetchWorke'+'r'])==null||_0x24aecf['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['downloadQu'+'eueUrlList']=[],globalThis['loadedSegm'+'ents']=[],globalThis['currentLoa'+'dSg']=null;},_0x5e6766=()=>{const _0x201bd2=new Set(),_0xc09bfb=_0x5b598e(globalThis['manifest'],globalThis['resentatio'+'n']),_0x46f074=globalThis['manifest']['baseUrl'],_0x1915f4=_0xc09bfb['segmentTem'+'plate'][-0x225c+0x1ab+0x20b1];for(const _0x4abffe of _0x1915f4['segmentTim'+'eline'])for(const _0x530082 of _0x4abffe['nl']){const _0x328105=''+_0x46f074+_0x1915f4['media']['replace']('$SegGroupI'+'ndex$',String(_0x4abffe['sg']))['replace']('$NodeIndex'+'$',String(_0x530082));_0x201bd2['add'](_0x328105);}return Array['from'](_0x201bd2);},_0x5a0c33=async(_0x1953bb,_0x448ece)=>{const _0x595426=await(await fetch(_0x1953bb))['text'](),_0x4adc69=JSON['parse'](_0x595426);_0x4adc69['baseUrl']=_0x1953bb['replace'](/\/[^\/]*$/,'/');const {schemas:_0x22b42c,gsiUrl:_0x44c466,repId:_0xe1b684}=await _0x396125(_0x4adc69,_0x448ece);return _0x4adc69['schemas']=_0x22b42c,_0x4adc69['gsiUrl']=_0x44c466,_0x4adc69['representa'+'tion']=_0xe1b684,_0x4adc69;},_0x396125=async(_0x498a17,_0x21b7a1)=>{let _0x22eb09=null,_0xaba0c=null;for(const _0x2d8a72 of _0x498a17['adaptation'+'Sets'])if(_0x2d8a72['contentTyp'+'e']==='4dgs'){_0xaba0c=_0x2d8a72;for(const _0xcaf1b1 of _0x2d8a72['representa'+'tions'])if(_0xcaf1b1['id']===_0x21b7a1){_0x22eb09=_0xcaf1b1;break;}break;}_0x22eb09||(_0x22eb09=_0xaba0c['representa'+'tions'][0x1f9*0x1+-0x1ba3+0x19aa],console['warn']('Representa'+'tion\x20\x27'+_0x21b7a1+('\x27\x20not\x20foun'+'d,\x20use\x20the'+'\x20first\x20rep'+'resentatio'+'n\x20instead')));const _0x2f8c23=_0x22eb09['id'],_0x6bbe86=_0x498a17['baseUrl']+_0x2f8c23+('/init.gsi.'+'json'),_0xd124c8=await(await fetch(_0x6bbe86))['text'](),_0x4d6613=JSON['parse'](_0xd124c8),_0x4edc6a={};return _0x4edc6a[_0x2f8c23]=_0x4d6613,{'schemas':_0x4edc6a,'gsiUrl':_0x6bbe86,'repId':_0x2f8c23};},_0x5b598e=(_0x34e0c6,_0xa6f00b='high-quant'+'ized')=>{let _0x4d233b=null;for(const _0x14fd9d of _0x34e0c6['adaptation'+'Sets'])if(_0x14fd9d['contentTyp'+'e']==='4dgs'){for(const _0x258ac3 of _0x14fd9d['representa'+'tions'])if(_0x258ac3['id']===_0xa6f00b){_0x4d233b=_0x258ac3;break;}break;}if(!_0x4d233b)throw new Error('Representa'+'tion\x20\x27'+_0xa6f00b+('\x27\x20not\x20foun'+'d'));return _0x4d233b;},_0x202455=async(_0x20d7ce,_0x4d16d9)=>{const _0x471b3b=_0x4d16d9['id'],_0x185115=_0x20d7ce['schemas'][_0x471b3b]['attributes'],_0x412da4=_0x4d16d9['segmentTem'+'plate'][-0xfb*0x23+-0x18bb+-0xec3*-0x4];globalThis['loadedSegm'+'ents']=[];const _0x3b7e8f=[],_0x18c336=[];for(const _0x2dbb29 of _0x412da4['segmentTim'+'eline'])for(const _0x416038 of _0x2dbb29['nl']){if(globalThis['loadedSegm'+'ents']['includes'](_0x2dbb29['sg']+'_'+_0x416038))continue;globalThis['loadedSegm'+'ents']['push'](_0x2dbb29['sg']+'_'+_0x416038);const _0x349088=await _0x1598db(_0x20d7ce,_0x4d16d9,_0x185115,_0x2dbb29['sg'],_0x416038);_0x18c336['push'](_0x349088['decoded']),_0x3b7e8f['push'](_0x349088['metadata']);}return _0x17a6a9(_0x18c336,_0x185115,_0x20d7ce['comments']);},_0x2ada7b=async(_0x19306b,_0x399b1b,_0x514ed5)=>{if(!_0x514ed5||_0x514ed5['length']===0x797+0x58*0x2f+-0x17bf)return{'decoded':[],'metadata':[]};const _0x4adebd=_0x399b1b['id'],_0x4c8411=_0x19306b['schemas'][_0x4adebd]['attributes'],_0x48c0fb=_0x399b1b['segmentTem'+'plate'][-0x3bd+-0x21*-0x5d+-0x840];globalThis['loadedSegm'+'ents']||(globalThis['loadedSegm'+'ents']=[]);const _0x54520a=_0x48c0fb['segmentTim'+'eline'][_0x514ed5[-0x143c+-0x1*-0x1a05+-0x5c9*0x1]];globalThis['currentLoa'+'dSg']!==_0x54520a['sg']&&(globalThis['loadedSegm'+'ents']=globalThis['loadedSegm'+'ents']['filter'](_0x4c4358=>!_0x4c4358['startsWith'](globalThis['currentLoa'+'dSg'])),globalThis['currentLoa'+'dSg']=_0x54520a['sg']);let _0x505d5d;const _0x2ecc8f=[];for(const _0x334c30 of _0x514ed5){_0x505d5d=_0x48c0fb['segmentTim'+'eline'][_0x334c30];for(const _0x4c8862 of _0x505d5d['nl'])globalThis['loadedSegm'+'ents']['includes'](_0x505d5d['sg']+'_'+_0x4c8862)||(globalThis['loadedSegm'+'ents']['push'](_0x505d5d['sg']+'_'+_0x4c8862),_0x2ecc8f['push'](_0x4c8862));}const _0x34ebbe=await _0x1598db(_0x19306b,_0x399b1b,_0x4c8411,_0x505d5d['sg'],_0x2ecc8f);_0x34ebbe['metadata'];const _0xbb4a64=_0x34ebbe['decoded'];return _0x17a6a9(_0xbb4a64,_0x4c8411,_0x19306b['comments']);},_0x1598db=async(_0x4b120e,_0x3c7a83,_0x581854,_0x238023,_0x4d391e)=>{const _0x13cf03=_0x4b120e['baseUrl'],_0xa5549e=_0x3c7a83['segmentTem'+'plate'][-0x1b22+-0x344*-0x4+0xe12]['media'],_0x114895=_0x4d391e['map'](_0x33a299=>''+_0x13cf03+_0xa5549e['replace']('$SegGroupI'+'ndex$',String(_0x238023))['replace']('$NodeIndex'+'$',String(_0x33a299))),_0x3200f8=await Promise['all'](_0x114895['map'](async _0x5e8ae3=>{const _0x4ddd18=await _0x4af451(_0x5e8ae3),_0xb0060b=_0x4ddd18['metadata'],_0x138d03=_0x4ddd18['segmentDat'+'a'],_0x1a1fda=_0xb0060b['gaussianCo'+'unt'];console['log']('loadSegmen'+'t\x20'+_0x5e8ae3),console['log']('loadSegmen'+'t\x20timeStar'+'t:',_0xb0060b['timeStart'],'segment\x20ti'+'meEnd:',_0xb0060b['timeEnd'],'segment\x20ga'+'ussianCoun'+'t:',_0x1a1fda);let _0x31f3a9;if(_0x3c7a83['id']['includes']('quantized')){const _0x4382c5=_0xb0060b['chunk_boun'+'ds'];_0x31f3a9=_0x523754(_0x138d03,_0x1a1fda,_0x581854,_0x238023,_0x4382c5);}else _0x31f3a9=_0x15bb9f(_0x138d03,_0x1a1fda,_0x581854,_0x238023);return{'decoded':_0x31f3a9,'metadata':_0xb0060b};})),_0x252b48=_0x3200f8['map'](_0x584740=>_0x584740['decoded']),_0x484519=_0x3200f8['map'](_0x493a45=>_0x493a45['metadata']);return{'decoded':_0x252b48,'metadata':_0x484519};},_0x17a6a9=(_0x19350f,_0x4154a7,_0x361596)=>{if(_0x19350f['length']===-0xd24+-0x1fe1+0x2d05)return new _0x78e44c([{'name':'vertex','count':0x0,'properties':[{'name':'position','type':'float','storage':new Float32Array(-0x18ac*0x1+-0x25df+0x3e8b),'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':new Uint16Array(-0x4*0x3d1+-0x1*-0xe0f+0x135),'byteSize':0x2},{'name':'t','type':'float','storage':new Float32Array(0xf56+-0x59a+-0x1*0x9bc),'byteSize':0x4},{'name':'t_scale','type':'float','storage':new Float32Array(0xfd1+0x672+-0x1643),'byteSize':0x4},{'name':'cutoff','type':'float','storage':new Float32Array(0x27*0x4+-0x1*0x161f+-0x1583*-0x1),'byteSize':0x4},{'name':'motion','type':'float','storage':new Float32Array(-0x836+0xd2d+0x29*-0x1f),'byteSize':0x4},{'name':'rotation','type':'float','storage':new Float32Array(-0x12a*0x21+-0xb5d*0x3+0x4881),'byteSize':0x4},{'name':'scale','type':'uint16','storage':new Uint16Array(-0x1*0x1523+-0x1a03*0x1+-0x55*-0x8e),'byteSize':0x2},{'name':'time_index','type':'float','storage':new Float32Array(0x8*-0x1de+-0x3c*0x2b+-0xc82*-0x2),'byteSize':0x4}]}],_0x361596);const _0x541ec9=_0x2eb00a(_0x19350f),[_0x4cf588,_0x170fcd,_0x52438a]=_0xc70efe(_0x541ec9['lifecycle'],0x8c9*0x1+0xf43+0x1809*-0x1,Float32Array),_0x330885=_0x541ec9['time_index'],_0x3963c3=_0x4154a7['find'](_0x523631=>_0x523631['name']==='feature_re'+'st'),_0x30daf6=[];if(_0x3963c3&&_0x541ec9['feature_re'+'st']){const _0x280711=_0x3963c3['dataType']['split'](',')[0x6c5+-0x41*0x43+0xa3f*0x1]['trim']()['replace']('>',''),_0x3e873e=_0xc70efe(_0x541ec9['feature_re'+'st'],-0x106c+-0x3*0xcc6+0x36c1,Float32Array);for(const _0x401888 of _0x3e873e){const _0x389185=_0xc70efe(_0x401888,_0x280711/(-0x8*0x382+0x256d+-0x3*0x31e),Float32Array);for(let _0x21ec59=-0x14b4+0x3ef*0x1+0x3*0x597;_0x21ec59<_0x389185['length'];_0x21ec59++)_0x30daf6['push']({'name':'f_rest_'+_0x21ec59,'type':'float','storage':_0x389185[_0x21ec59],'byteSize':0x4});}}return new _0x78e44c([{'name':'vertex','count':_0x541ec9['position']['length']/(-0x201b+-0x202e+0xa*0x66e),'properties':[{'name':'position','type':'float','storage':_0x541ec9['position'],'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':_0x541ec9['color_opac'+'ity'],'byteSize':0x2},{'name':'t','type':'float','storage':_0x170fcd,'byteSize':0x4},{'name':'t_scale','type':'float','storage':_0x4cf588,'byteSize':0x4},{'name':'cutoff','type':'float','storage':_0x52438a,'byteSize':0x4},{'name':'motion','type':'float','storage':_0x541ec9['motion'],'byteSize':0x4},{'name':'rotation','type':'float','storage':_0x541ec9['rotation'],'byteSize':0x4},{'name':'scale','type':'uint16','storage':_0x541ec9['scale'],'byteSize':0x2},{'name':'time_index','type':'float','storage':_0x330885,'byteSize':0x4},..._0x30daf6]}],_0x361596);},_0xc70efe=(_0x2f0608,_0x628c54,_0x3bbd27)=>{const _0x12c6a2=new Array(_0x628c54),_0x228d20=Math['floor'](_0x2f0608['length']/_0x628c54),_0x51906f=_0x2f0608['length']%_0x628c54;for(let _0x2fb559=0x905*-0x1+0xa7a+-0x175*0x1;_0x2fb559<_0x628c54;_0x2fb559++){const _0x1022b8=_0x2fb559<_0x51906f?_0x228d20+(-0x1*0x247f+-0x1*-0x5cf+0x1eb1*0x1):_0x228d20;_0x12c6a2[_0x2fb559]=new _0x3bbd27(_0x1022b8);}for(let _0x3ae40b=0x24f9+-0x114c+-0x13ad;_0x3ae40b<_0x2f0608['length'];_0x3ae40b++){const _0x1602a6=_0x3ae40b%_0x628c54,_0x381806=Math['floor'](_0x3ae40b/_0x628c54);_0x12c6a2[_0x1602a6][_0x381806]=_0x2f0608[_0x3ae40b];}return _0x12c6a2;},_0x4af451=async _0x314bcb=>{const _0x41d33b=new _0x3e64ef(_0x314bcb),{metadata:_0x831409,segmentData:_0x53a388}=await _0x41d33b['readFragme'+'nt']();return{'metadata':_0x831409,'segmentData':_0x53a388};},_0x155d83=(_0xf6a4cb,_0x3a0391)=>{let _0x437fde,_0x55448b,_0x4a6459=-(0x14c*-0xe+-0x210c+0x3335);if(_0xf6a4cb['encoding']){const _0x1b50e0=_0xf6a4cb['encoding']['storageTyp'+'e'];if(_0x1b50e0==='uint32')_0x55448b=Uint32Array,_0x437fde=Uint32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x1b50e0['startsWith']('array<ucha'+'r')){_0x55448b=Uint8Array;const _0xb2b5d0=_0x1b50e0['split'](',')[-0xc75+0x1*-0xf75+0x1beb]['trim']()['replace']('>','');_0x4a6459=parseInt(_0xb2b5d0),_0x437fde=_0x4a6459*Uint8Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20storage\x20'+'type:\x20'+_0x1b50e0);}}else{if(_0x55448b=Float32Array,_0xf6a4cb['dataType']==='vec3f')_0x437fde=(-0x3fb*-0x1+0x1*-0x23d0+0xfec*0x2)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0xf6a4cb['dataType']==='vec4f')_0x437fde=(-0x5bc+0x1*0x479+0x147)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0xf6a4cb['dataType']==='vec2f')_0x437fde=(-0x17ba+-0xe3*0x2+0x1982)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0xf6a4cb['dataType']['startsWith']('array<floa'+'t')){const _0x32763b=_0xf6a4cb['dataType']['split'](',')[-0x37*0x2+-0x1ce1+0x1d50]['trim']()['replace']('>','');_0x4a6459=parseInt(_0x32763b),_0x437fde=_0x4a6459*Float32Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0xf6a4cb['dataType']);}}}}return{'dataSize':_0x3a0391*_0x437fde,'datatype':_0x55448b,'arraySize':_0x4a6459};},_0x57d14d=(_0x30b35c,_0x2f7660)=>{const _0x58a03d=(0x82f+-0x109c+0x86e<<_0x2f7660)-(-0x1*0x15d+-0xa66+0x1f6*0x6);return(_0x30b35c&_0x58a03d)/_0x58a03d;},_0x3ee04d=_0x15ed2c=>{const _0x1ccfc5=new Float32Array(_0x15ed2c['length']*(0x2208+-0x22*0x33+0x19*-0x117));for(let _0x3240ff=-0x110+0x16a*-0x17+0x2196;_0x3240ff<_0x15ed2c['length'];_0x3240ff++)_0x1ccfc5[_0x3240ff*(0x1df9*-0x1+-0x1182+-0x17bf*-0x2)]=_0x57d14d(_0x15ed2c[_0x3240ff]>>>-0x753+0x20b3+0x19*-0x103,-0x168f+0x72a+0xf70),_0x1ccfc5[_0x3240ff*(-0x90+-0xdec+0xe7f)+(0x1e78+0x373*-0x7+-0x652*0x1)]=_0x57d14d(_0x15ed2c[_0x3240ff]>>>0x5cb*0x5+0x48c+-0x2178,-0x13ac*-0x1+-0x1763+-0x1*-0x3c1),_0x1ccfc5[_0x3240ff*(0x1*0x25ef+0x224*-0x2+-0x21a4)+(0x13a*-0x1c+0x7*-0x237+-0x31db*-0x1)]=_0x57d14d(_0x15ed2c[_0x3240ff],0x1*0x1213+0x26db*-0x1+0x14d3);return _0x1ccfc5;},_0x9fbc59=_0x347ef3=>{const _0xe79ef5=new Float32Array(_0x347ef3['length']*(-0x36*-0xa+0x1a*-0x13d+0x2*0xf0d));for(let _0x52f48a=0x229f*0x1+0x71*-0x31+-0x2*0x67f;_0x52f48a<_0x347ef3['length'];_0x52f48a++)_0xe79ef5[_0x52f48a*(-0x1134+0x1d36+-0x5*0x266)]=_0x57d14d(_0x347ef3[_0x52f48a]>>>-0x1772*-0x1+0x1*-0x94f+-0xe0b,-0x3d3*0x7+-0x104b+0x2b18),_0xe79ef5[_0x52f48a*(-0x1*0x1c20+-0x17*-0x91+0xf1d)+(0xad2+0x52*-0xc+-0x6f9)]=_0x57d14d(_0x347ef3[_0x52f48a]>>>-0x1601*-0x1+0x4b3*-0x3+-0x1f6*0x4,0x2c3+-0x2171*0x1+0x1eb6),_0xe79ef5[_0x52f48a*(-0x55d+0x1c7f*0x1+0xb8f*-0x2)+(0x269b+0x5b*0x49+-0x408c)]=_0x57d14d(_0x347ef3[_0x52f48a]>>>-0x73*0x6+0xa54*-0x1+0xd0e,0x1*-0x116d+-0x8c6+0x1a3b),_0xe79ef5[_0x52f48a*(0x1cef+-0x204e+0x363)+(0x1214+-0x65f+-0x5d9*0x2)]=_0x57d14d(_0x347ef3[_0x52f48a],0x53*0x28+-0x1a*0x8b+0x12e);return _0xe79ef5;},_0x17d247=_0x551fab=>{const _0x44862c=new Float32Array(_0x551fab['length']*(-0x188b*-0x1+0x45a*0x8+-0x3b58)),_0x3fbb41=(0x680*-0x3+0x17ff*-0x1+0x2b80)/(Math['sqrt'](-0x1638+-0x1*0x14e3+0x3*0xe5f)*(-0xc20+0x2469+-0x1849+0.5));for(let _0x5c4f4c=0x143e+-0x15*0x1be+0x20b*0x8;_0x5c4f4c<_0x551fab['length'];_0x5c4f4c++){const _0x437042=(_0x57d14d(_0x551fab[_0x5c4f4c]>>>0x3c7*-0x5+0x910+0x9e7,0x16a1+-0x95*-0x3b+0x2b6*-0x15)-(-0x630+0x19*0x122+-0x1622+0.5))*_0x3fbb41,_0x9c6ce0=(_0x57d14d(_0x551fab[_0x5c4f4c]>>>-0x913+0x4*0x36e+-0x189*0x3,0x1187+0xbf0+0x5d*-0x51)-(-0xc75+0x1*0x633+0x642+0.5))*_0x3fbb41,_0x1cf37b=(_0x57d14d(_0x551fab[_0x5c4f4c],-0xcb6+-0xcf9+0x19b9)-(-0xa48+0xaf2*-0x1+0x153a+0.5))*_0x3fbb41,_0x8276a9=Math['sqrt'](0x160b+-0x20b0+0x553*0x2-(_0x437042*_0x437042+_0x9c6ce0*_0x9c6ce0+_0x1cf37b*_0x1cf37b));let _0x4c42c5=-0x5*-0x79+0x96e*0x4+0x14b*-0x1f,_0x5b0ad8=0x1857+0x1*0x1f4c+-0x37a3,_0x1010fd=0x1583*0x1+0x5e*-0xe+0xb*-0x17d,_0x5823ed=-0x5*-0x452+-0xd2d+0x1*-0x86d;switch(_0x551fab[_0x5c4f4c]>>>-0x349*0xa+-0x1f67+0x1*0x405f){case 0x2137+-0x1*-0x5b8+-0x26ef:_0x4c42c5=_0x8276a9,_0x5b0ad8=_0x437042,_0x1010fd=_0x9c6ce0,_0x5823ed=_0x1cf37b;break;case 0x1cff*-0x1+-0xd*-0x19c+0x814:_0x4c42c5=_0x8276a9,_0x5b0ad8=_0x9c6ce0,_0x1010fd=_0x1cf37b,_0x5823ed=_0x437042;break;case 0x3*0x7c1+0x1*0x874+-0x1fb5:_0x4c42c5=_0x9c6ce0,_0x5b0ad8=_0x8276a9,_0x1010fd=_0x1cf37b,_0x5823ed=_0x437042;break;case-0xc47+-0x1*-0x199d+-0x1*0xd53:_0x4c42c5=_0x9c6ce0,_0x5b0ad8=_0x1cf37b,_0x1010fd=_0x8276a9,_0x5823ed=_0x437042;break;}const _0x9e29a=_0x2a3ac8(_0x4c42c5,_0x5b0ad8,_0x1010fd,_0x5823ed);_0x44862c[_0x5c4f4c*(-0x3d*0x17+0x29*0x5d+0x1*-0x967)]=_0x9e29a['x'],_0x44862c[_0x5c4f4c*(0x1168+-0x335*0x9+0xb78)+(-0x23ec+-0x2*-0x56c+0x1915)]=_0x9e29a['y'],_0x44862c[_0x5c4f4c*(0x416+0x185*-0x13+0x18cc)+(-0x1*-0x1987+0x153a*0x1+0x1*-0x2ebf)]=_0x9e29a['z'];}return _0x44862c;},_0x1243dd=(_0x555b10,_0x1204ac,_0x2fb58e)=>{const _0x57d6dc=_0x2fb58e-_0x1204ac,_0x213b16=new Float32Array(_0x555b10['length']);for(let _0x5c6e9e=-0xd*0x6d+0x21c7+-0xe1f*0x2;_0x5c6e9e<_0x555b10['length'];_0x5c6e9e++)_0x213b16[_0x5c6e9e]=_0x555b10[_0x5c6e9e]/(0x7*0x43e+0xc69+0x148e*-0x2)*_0x57d6dc+_0x1204ac;return _0x213b16;},_0x243099=new Float32Array(-0x5de*0x6+0x431+-0x18d*-0x14),_0x30a6ab=new Int32Array(_0x243099['buffer']),_0x3f943a=_0x1d4aeb=>{_0x243099[0x26ea+0x2118+-0x2*0x2401]=_0x1d4aeb;const _0x8acf93=_0x30a6ab[0x905+-0x1699+0xd94];let _0x550367=_0x8acf93>>0x16e2+-0x16*0xb0+-0x7b2&0x3d93+0x1*0xd23b+-0xe9*0x9e,_0x70bb20=_0x8acf93>>0x31*0x39+-0x2273+0x2*0xbcb&-0x2*-0x43b+0x1*-0x1559+-0xa71*-0x2;const _0x1c24fb=_0x8acf93>>-0x1520+0x1*0x1e92+0x95b*-0x1&-0x21*0x1b+0x97*0x20+-0xe66;return _0x1c24fb<0x1fbf+0x20c8+-0x4020?_0x550367:_0x1c24fb>0x1f14+0xd*-0x27a+0x4*0x6b?(_0x550367|=-0x4ae1*-0x3+-0x3713+-0x8*0x5b2,_0x550367|=(_0x1c24fb===-0x51c*-0x6+-0x16c3*0x1+0x6e6*-0x1?-0x2308+-0x1b84+0x4*0xfa3:0x5*0x343+-0x50*-0x1+-0x2c5*0x6)&&_0x8acf93&0xc2cb9a+0xf7c6f6+-0xc9539*0x19,_0x550367):_0x1c24fb<0x118a+-0x2d2+-0xe47?(_0x70bb20|=0x373*-0x7+-0xbdc+0xeab*0x3,_0x550367|=(_0x70bb20>>-0x1d*0xd+0x4*0x3f+0xef*0x1-_0x1c24fb)+(_0x70bb20>>-0x1333+0x71*-0x10+0x1ab4-_0x1c24fb&0x1bc9+0x1ff6+0x1*-0x3bbe),_0x550367):(_0x550367|=_0x1c24fb-(-0x1*0x215b+0x319+-0x1eb2*-0x1)<<-0x1*-0x17d7+0x3*0x617+-0x2a12|_0x70bb20>>0x9*0xfe+-0x1375+0xa88,_0x550367+=_0x70bb20&-0x18c7*0x1+-0x1761+0x3029,_0x550367);},_0x863b27=_0x16b332=>{const _0x51ca33=new Uint16Array(_0x16b332['length']);for(let _0x16015a=-0x1*0x2581+0x2*-0x5aa+0x1b*0x1cf;_0x16015a<_0x16b332['length']/(-0x2fc+0x1*0x50d+0xf*-0x23);++_0x16015a)_0x51ca33[_0x16015a*(0x12e3+-0x1*-0x25f6+-0x38d5)]=_0x3f943a(_0x16b332[_0x16015a*(0xeaa+-0x74c*-0x1+-0x15f2)]*_0x147a7f+(0x2cf*-0x2+0x1*0xbab+0x60d*-0x1+0.5)),_0x51ca33[_0x16015a*(0x337+-0x220c+0x95*0x35)+(-0x1a4a+0x1f5a+-0x50f)]=_0x3f943a(_0x16b332[_0x16015a*(-0x1dbf+0x15b*-0xe+0x30bd)+(-0x1fec+0x130b*0x1+-0x1*-0xce2)]*_0x147a7f+(0x2455+-0x2156+-0x2ff+0.5)),_0x51ca33[_0x16015a*(-0xda5*0x1+0x155e*-0x1+-0x93*-0x3d)+(0x1d1b*0x1+0x1f03+0x3c1c*-0x1)]=_0x3f943a(_0x16b332[_0x16015a*(0x1*-0x19+0x22f5+-0x22d8)+(-0x3d8+0x2f1*-0x1+-0x25*-0x2f)]*_0x147a7f+(-0x2ec+-0x2*-0x12c7+0x2*-0x1151+0.5)),_0x51ca33[_0x16015a*(-0xda1+0x26d0+-0x192b)+(0x2550+0x1f87+-0x44d4)]=_0x3f943a(_0x16b332[_0x16015a*(-0xa1f*-0x1+-0x115b+0x740)+(0x1e31+0x2225+0x1f3*-0x21)]);return _0x51ca33;},_0xab3bd6=new _0xe922ea(-0xb4c+0xdea+-0x43*0xa,-0x17a3+0x671+0x1132,-0x25d+0x213d+-0x1ee0,-0x131e*-0x2+-0xaf3+0x1b49*-0x1),_0x2a3ac8=(_0x17713b,_0x1012d1,_0x1dd82f,_0x37ca3c)=>(_0xab3bd6['set'](_0x1012d1,_0x1dd82f,_0x37ca3c,_0x17713b),_0xab3bd6['normalize'](),_0xab3bd6['w']<0x1*0x201e+-0x2559+0x53b&&_0xab3bd6['mulScalar'](-(-0x904*-0x3+0x2ba*0x5+0x1*-0x28ad)),_0xab3bd6);function _0x523754(_0x25cd62,_0x5e9008,_0x399078,_0x496543,_0x14ffac){const _0x346e77=_0x14ffac[Object['keys'](_0x14ffac)[0x14ba+-0x91d+0x1*-0xb9d]]['length'],_0x2e421f=-0x3a*0x22+0x8a*0x48+-0x1e1c;let _0x2dc615=[],_0x4fa493=_0x5e9008;for(let _0x2cd6a8=0x7ea+0x2577+0x2d61*-0x1;_0x2cd6a8<_0x346e77;_0x2cd6a8++){const _0x20ac74=Math['min'](_0x2e421f,_0x4fa493);_0x2dc615['push'](_0x20ac74),_0x4fa493-=_0x20ac74;}let _0x4dcb51=-0x251e+0x47*-0x53+0xc07*0x5,_0x48fca0={};for(let _0x532b2c of _0x399078){const _0x4b5071=_0x532b2c['name'],{dataSize:_0x50dcf8,datatype:_0x428092}=_0x155d83(_0x532b2c,_0x5e9008);let _0x4f5c9e=_0x25cd62['buffer']['slice'](_0x4dcb51,_0x4dcb51+_0x50dcf8),_0x27a0fd=new _0x428092(_0x4f5c9e);_0x48fca0[_0x4b5071]=_0x27a0fd,_0x4dcb51+=_0x50dcf8;}let _0x197815=[],_0xdfd2d3=0x5bf*-0x3+-0x1*0x1531+0x2*0x1337;for(let _0x5c5e8c=0x477+0x1*0x20b1+0x74*-0x52;_0x5c5e8c<_0x346e77;_0x5c5e8c++){const _0x537bf8=_0x382017(_0x48fca0,_0x14ffac,_0x5c5e8c,_0x2dc615,_0xdfd2d3,_0x399078),_0x6e9726=_0x537bf8['chunkDecom'+'pressed'];_0x197815['push'](_0x6e9726),_0xdfd2d3=_0x537bf8['chunkStart'+'Idx'];}let _0x384af3={};for(let _0x23699e of Object['keys'](_0x197815[-0x26db+0x1*-0x1b7d+-0x8*-0x84b])){let _0x1fe9f3=0x7c6*0x1+-0x19*-0x9d+-0x171b;for(let _0x16baff=0x2*0xa0a+0xac0*0x2+-0x2994;_0x16baff<_0x197815['length'];_0x16baff++)_0x1fe9f3+=_0x197815[_0x16baff][_0x23699e]['length'];_0x23699e==='color_opac'+'ity'||_0x23699e==='scale'?_0x384af3[_0x23699e]=new Uint16Array(_0x1fe9f3):_0x384af3[_0x23699e]=new Float32Array(_0x1fe9f3);let _0x1c7cd8=0x24b5+0x1*0x1253+0x24b*-0x18;for(let _0x53cb3e=-0x2165*-0x1+-0x24c4+-0x1*-0x35f;_0x53cb3e<_0x197815['length'];_0x53cb3e++)_0x384af3[_0x23699e]['set'](_0x197815[_0x53cb3e][_0x23699e],_0x1c7cd8),_0x1c7cd8+=_0x197815[_0x53cb3e][_0x23699e]['length'];}return _0x399078['some'](_0x5cb615=>_0x5cb615['name']==='feature_re'+'st')&&(_0x384af3['feature_re'+'st']=_0x3cc29d(_0x48fca0,_0x399078)),_0x384af3['time_index']=new Float32Array(_0x5e9008),_0x384af3['time_index']['fill'](_0x496543-(0x6d*-0x58+0x363+0x2216)),_0x384af3;}const _0x382017=(_0x3ae848,_0x2c578d,_0x846306,_0x49be11,_0x438620,_0x391e8e)=>{const _0x5b5646=_0x49be11[_0x846306],_0x26dfa5=_0x438620+_0x5b5646,_0x576099=(_0x5d0f0f,_0x4a1efb,_0x3fcadb)=>_0x5d0f0f*(-0x25eb+-0x22f9+0x48e5-_0x3fcadb)+_0x4a1efb*_0x3fcadb;let _0x5a4f4b={};for(let _0x559245 of _0x391e8e){const _0x26bfb3=_0x559245['name'],_0x183662=_0x559245['encoding']['codec'],_0x2016df=_0x3ae848[_0x26bfb3]['slice'](_0x438620,_0x26dfa5);if(_0x183662==='pack_11_10'+'_11'){if(_0x26bfb3==='scale'){const _0x128c0f=_0x2c578d['min_scales'][_0x846306],_0x5237f4=_0x2c578d['max_scales'][_0x846306],_0x280cee=_0x3ee04d(_0x2016df),_0x276e64=_0x280cee['length'],_0x182613=new Uint16Array(_0x276e64);for(let _0x3a462c=0x6c0+0x35*-0x8+-0x518;_0x3a462c<_0x276e64;_0x3a462c++)_0x182613[_0x3a462c]=_0x3f943a(Math['exp'](_0x576099(_0x128c0f[_0x3a462c%(0x1*-0x94f+-0x25bf+0x2f11)],_0x5237f4[_0x3a462c%(0x1a35+0x1*-0x124d+0x2b*-0x2f)],_0x280cee[_0x3a462c])));_0x5a4f4b[_0x26bfb3]=_0x182613;}else{const _0x395ad6=_0x3ee04d(_0x2016df);let _0xbb62a4,_0xec89c4;if(_0x26bfb3==='position')_0xbb62a4=_0x2c578d['min_means'][_0x846306],_0xec89c4=_0x2c578d['max_means'][_0x846306];else{if(_0x26bfb3==='motion')_0xbb62a4=_0x2c578d['min_motion'][_0x846306],_0xec89c4=_0x2c578d['max_motion'][_0x846306];else{if(_0x26bfb3==='lifecycle'){const _0x35c10f=_0x2c578d['min_t_scal'+'e'][_0x846306],_0x19e042=_0x2c578d['max_t_scal'+'e'][_0x846306],_0x46f9d3=_0x2c578d['min_time'][_0x846306],_0x335005=_0x2c578d['max_time'][_0x846306],_0x4413d2=_0x2c578d['min_cutoff'][_0x846306],_0xff2fa1=_0x2c578d['max_cutoff'][_0x846306];_0xbb62a4=[_0x35c10f[-0x835+-0x529*-0x4+-0xc6f],_0x46f9d3[0xab8+-0x1*0x1555+-0x1*-0xa9d],_0x4413d2[-0x6ad*-0x5+0x264a+-0x47ab]],_0xec89c4=[_0x19e042[-0x1cb6+-0x2565+-0x3*-0x1609],_0x335005[0x138f+0x134b+-0x26da],_0xff2fa1[-0x321+-0x5d2*-0x4+-0x1427*0x1]];}else throw new Error('Unknown\x20at'+'tribute\x20fo'+'r\x20pack_11_'+'10_11:\x20'+_0x26bfb3);}}for(let _0x2e17e8=0x14f*0x11+-0x15*0x1c7+-0xa*-0x182;_0x2e17e8<_0x395ad6['length'];_0x2e17e8++)_0x395ad6[_0x2e17e8]=_0x576099(_0xbb62a4[_0x2e17e8%(0x7f*-0xf+-0x29*0x74+0x1a08)],_0xec89c4[_0x2e17e8%(0x53*0x19+-0x6d*0x11+-0xdb)],_0x395ad6[_0x2e17e8]);_0x5a4f4b[_0x26bfb3]=_0x395ad6;}}else{if(_0x183662==='pack_8888'){let _0x4bd928=_0x9fbc59(_0x2016df);const _0x551ea6=_0x2c578d['min_colors'][_0x846306],_0xf1274c=_0x2c578d['max_colors'][_0x846306],_0xd4a5de=new Uint16Array(_0x4bd928['length']);for(let _0x4993f3=-0x945+-0x226c+0x2bb1;_0x4993f3<_0x4bd928['length'];_0x4993f3++){const _0x1f51db=_0x4993f3*(-0x88*0x25+0x9ce+-0x1*-0x9de);_0xd4a5de[_0x1f51db]=_0x3f943a(_0x576099(_0x551ea6[0x2e0+0x3c8*0x3+-0xe38],_0xf1274c[-0x1d3d+0x644+0x16f9],_0x4bd928[_0x1f51db])),_0xd4a5de[_0x1f51db+(-0x233*0x5+0x99f*-0x3+0x27dd)]=_0x3f943a(_0x576099(_0x551ea6[-0x1de7+-0x1*0x1735+0x351d],_0xf1274c[-0x1727+0x4f*0x2f+0x8a7],_0x4bd928[_0x1f51db+(0x37*-0x8a+0x3b5*-0x1+0x215c)])),_0xd4a5de[_0x1f51db+(0x11*-0x21a+0x1fec+0x3d0)]=_0x3f943a(_0x576099(_0x551ea6[-0xdb1+-0x5b+0xe0e],_0xf1274c[-0x1691*0x1+-0x107*-0x2+0x1485],_0x4bd928[_0x1f51db+(-0x38b+-0x3e3*0xa+0x1*0x2a6b)])),_0xd4a5de[_0x1f51db+(-0x10d7+-0x747+-0x1d*-0xd5)]=_0x3f943a(_0x4bd928[_0x1f51db+(0x1a2c+-0x1032+-0x9f7)]);}_0x5a4f4b[_0x26bfb3]=_0xd4a5de;}else{if(_0x183662==='pack_rotat'+'ion_32'){const _0x514565=_0x17d247(_0x2016df);_0x5a4f4b[_0x26bfb3]=_0x514565;}else{if(_0x183662==='range_quan'+'t_u8'){if(_0x26bfb3==='feature_re'+'st')continue;throw new Error('Unknown\x20co'+'dec:\x20'+_0x183662);}}}}}return{'chunkDecompressed':_0x5a4f4b,'chunkStartIdx':_0x26dfa5};},_0x3cc29d=(_0x1959b2,_0x324563)=>{const _0x5b04f3='feature_re'+'st',_0xe7ee9b=_0x324563['find'](_0x35aa58=>_0x35aa58['name']===_0x5b04f3);let _0x1b8354;const _0x744b03=_0xe7ee9b['encoding']['codec'],_0x5b160b=_0x1959b2[_0x5b04f3];if(_0x744b03==='range_quan'+'t_u8'){const [_0x1a4d2e,_0x3d9b5d]=_0xe7ee9b['encoding']['range'];_0x1b8354=_0x1243dd(_0x5b160b,_0x1a4d2e,_0x3d9b5d);}else throw new Error('Unknown\x20co'+'dec:\x20'+_0x744b03);return _0x1b8354;},_0x15bb9f=(_0x508767,_0x5d254a,_0x3c8f15,_0x4c420e)=>{let _0x32e013=-0x8*-0x46a+-0x1656+0x16*-0x97;const _0x461447={};for(const _0x21acff of _0x3c8f15){const {dataSize:_0x1f6607}=_0x155d83(_0x21acff,_0x5d254a);if(['vec3f','vec4f','vec2f']['includes'](_0x21acff['dataType']))_0x461447[_0x21acff['name']]=new Float32Array(_0x508767['buffer']['slice'](_0x32e013,_0x32e013+_0x1f6607));else{if(_0x21acff['dataType']['startsWith']('array<floa'+'t'))_0x461447[_0x21acff['name']]=new Float32Array(_0x508767['buffer']['slice'](_0x32e013,_0x32e013+_0x1f6607));else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x21acff['dataType']);}_0x32e013+=_0x1f6607;}const _0x4dda4f=new Uint16Array(_0x461447['scale']['length']);for(let _0x58c463=-0x1552+-0x1*0x45d+0x107*0x19;_0x58c463<_0x461447['scale']['length'];_0x58c463++)_0x4dda4f[_0x58c463]=_0x3f943a(Math['exp'](_0x461447['scale'][_0x58c463]));_0x461447['scale']=_0x4dda4f;const _0xf5b84c=_0x461447['rotation']['length']/(-0x955*-0x4+-0x1a*0x13+-0x2362),_0x1ec43c=new Float32Array(_0xf5b84c*(-0x8c*0xa+-0x227*0xd+0x2176));for(let _0x6e4b55=0x257d+-0x5d3+-0xfd5*0x2;_0x6e4b55<_0xf5b84c;_0x6e4b55++){const _0x5d0008=_0x2a3ac8(_0x461447['rotation'][_0x6e4b55*(-0x9fd*0x1+0x2483+-0x12*0x179)],_0x461447['rotation'][_0x6e4b55*(0x80c+0x2116+-0x291e)+(-0x1*0xe1+0x1*-0x1343+0x6b7*0x3)],_0x461447['rotation'][_0x6e4b55*(0x462+-0x3*0x115+-0x1*0x11f)+(-0x126b+0x4d9*0x8+-0x145b)],_0x461447['rotation'][_0x6e4b55*(0x23c5+-0x6b*-0x43+-0x3fc2)+(0xdb7+-0x221d+0x1469)]);_0x1ec43c[_0x6e4b55*(0x1*0x1231+-0x9eb*0x1+-0x9*0xeb)]=_0x5d0008['x'],_0x1ec43c[_0x6e4b55*(-0x116+-0x8ba+0x9d3)+(0x36d*-0xb+-0xcbd+-0x3e1*-0xd)]=_0x5d0008['y'],_0x1ec43c[_0x6e4b55*(-0x1914+0x3a4*0x2+0x11cf)+(0xa5d+-0x1*-0x83f+-0x129a)]=_0x5d0008['z'];}return _0x461447['rotation']=_0x1ec43c,_0x461447['color_opac'+'ity']=_0x863b27(_0x461447['color_opac'+'ity']),_0x461447['time_index']=new Float32Array(_0x5d254a),_0x461447['time_index']['fill'](_0x4c420e-(0xd61+-0x16d7+0x1*0x977)),_0x461447;},_0x2eb00a=(_0x338096,_0xb1b233)=>{const _0x5c389b={};if(_0x338096['length']===0x1115+0x25*-0xe6+0x102a)return _0x338096[-0xb1*-0x1f+0xad*-0x29+0x646];for(const _0x56750d of Object['keys'](_0x338096[0x267b*0x1+0x14bb+0x6a*-0x8f]))if(_0x338096[0xd*0x77+-0x1*0x1cac+0x16a1*0x1][_0x56750d]instanceof Float32Array||_0x338096[0x3*-0xbb0+0x10a9+-0x1*-0x1267][_0x56750d]instanceof Uint16Array){const _0x4c9c08=_0x338096['reduce']((_0x43841a,_0x72966b)=>_0x43841a+_0x72966b[_0x56750d]['length'],0x7a1+0xb0c+-0x2ab*0x7);let _0xf6a98a;_0x338096[-0x2*0xf6b+-0x1*-0x28d+0x1c49][_0x56750d]instanceof Uint16Array?_0xf6a98a=new Uint16Array(_0x4c9c08):_0xf6a98a=new Float32Array(_0x4c9c08);let _0x5d9026=-0xc2f*-0x1+0xfe5+-0x1c14;for(const _0x5dd9eb of _0x338096)_0xf6a98a['set'](_0x5dd9eb[_0x56750d],_0x5d9026),_0x5d9026+=_0x5dd9eb[_0x56750d]['length'];_0x5c389b[_0x56750d]=_0xf6a98a;}else Array['isArray'](_0x338096[0x4d*-0x65+-0xa1b+0x2*0x143e][_0x56750d])?_0x5c389b[_0x56750d]=_0x338096['flatMap'](_0x17188b=>Array['from'](_0x17188b[_0x56750d])):_0x5c389b[_0x56750d]=_0x338096['map'](_0x40224b=>_0x40224b[_0x56750d])['flat']();return _0x5c389b;};}class PN extends me{constructor(_0x52674b){super(),h(this,'manifestUr'+'l'),h(this,'worker'),(this['manifestUr'+'l']=_0x52674b,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+CN['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','cborXUrl':'https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/cbor-x@1'+'.6.0.min.j'+'s'});}['loadGsdMan'+'ifest'](_0x178ba5){var _0xf41a1d;return(_0xf41a1d=this['worker'])==null||_0xf41a1d['postMessag'+'e']({'type':'loadGsdMan'+'ifest','manifestUrl':this['manifestUr'+'l'],'loadRepresentation':_0x178ba5}),new Promise((_0x2f10bb,_0x375e7e)=>{if(!this['worker']){_0x375e7e(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x498746=>{if(!this['worker'])return;const {data:_0x5c3547}=_0x498746;if(this['manifestUr'+'l']===_0x5c3547['url'])switch(_0x5c3547['type']){case'onloadMani'+'fest':_0x2f10bb({'manifest':_0x5c3547['data'],'url':_0x5c3547['url'],'representation':_0x5c3547['representa'+'tion']});break;case'error':_0x375e7e(_0x5c3547['data']);break;}};});}['loadGsdSeg'+'ments'](_0x596fc9,_0x2b9574){var _0x318a04;return(_0x318a04=this['worker'])==null||_0x318a04['postMessag'+'e']({'type':'loadGsdSeg'+'ments'}),new Promise((_0xd025eb,_0x5b7210)=>{if(!this['worker']){_0x5b7210(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x2589b5=>{if(!this['worker'])return;const {data:_0x23508b}=_0x2589b5;if(this['manifestUr'+'l']===_0x23508b['url'])switch(_0x23508b['type']){case'progress':_0x596fc9==null||_0x596fc9(_0x23508b['bytes'],_0x23508b['totalLengt'+'h'],_0x23508b['url']);break;case'loadGsdSeg'+'mentsDone':_0xd025eb(_0x23508b['data']);break;case'error':_0x2b9574==null||_0x2b9574(_0x23508b['data'],_0x23508b['url']);break;}};});}['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x2444a6,_0x1d52f2,_0x2f41c5){var _0x3831db;return(_0x3831db=this['worker'])==null||_0x3831db['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'ments','timelineIndexs':_0x2444a6}),new Promise((_0xe82a0,_0x504f96)=>{if(!this['worker']){_0x504f96(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x278ca2=>{if(!this['worker'])return;const {data:_0x3bfac5}=_0x278ca2;if(this['manifestUr'+'l']===_0x3bfac5['url'])switch(_0x3bfac5['type']){case'progress':_0x1d52f2==null||_0x1d52f2(_0x3bfac5['bytes'],_0x3bfac5['totalLengt'+'h'],_0x3bfac5['url']);break;case'loadTimeli'+'neIndexSeg'+'mentsDone':_0xe82a0(_0x3bfac5);break;case'error':_0x2f41c5==null||_0x2f41c5(_0x3bfac5['data'],_0x3bfac5['url']);break;}};});}['destroy'](){this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(0x65*-0x3b+-0x3d3+0x1b1a));}}const Eh=class Eh{constructor(_0x1e9c0b,_0x188bbc,_0x1c9ac5){h(this,'lastLoadIn'+'dex',-0xa9*-0x1+0xd*-0x28a+-0x5b*-0x5b),h(this,'gsdAssetPa'+'rser'),(this['manifest']=_0x1e9c0b,this['representa'+'tion']=_0x188bbc,this['gsdAssetPa'+'rser']=_0x1c9ac5,this['segmentTim'+'elines']=this['getSegment'+'Timeline'](_0x1e9c0b,_0x188bbc));}['getSegment'+'Timeline'](_0x3542fa,_0xd384cf){let _0x34f23c=null;for(const _0x5d9e49 of _0x3542fa['adaptation'+'Sets'])if(_0x5d9e49['contentTyp'+'e']==='4dgs'){for(const _0x4a68e3 of _0x5d9e49['representa'+'tions'])if(_0x4a68e3['id']===_0xd384cf){_0x34f23c=_0x4a68e3;break;}break;}if(!_0x34f23c)throw new Error('Representa'+'tion\x20\x27'+_0xd384cf+('\x27\x20not\x20foun'+'d'));return _0x34f23c['segmentTem'+'plate'][-0x43d*0x2+-0x5*-0x4ef+0x1*-0x1031]['segmentTim'+'eline'];}['onTimeChan'+'ged'](_0x708782){const _0xe78cab=this['findSegmen'+'tTimeline'](_0x708782);if(!_0xe78cab)return;const _0x1d9ec2=_0xe78cab['timelineIn'+'dex']<this['segmentTim'+'elines']['length']-(-0x1bee+0x39*-0x14+0x2063)?_0xe78cab['timelineIn'+'dex']+(0x5*-0x150+0xa59*0x1+-0x3c8):-0x1ba6*0x1+-0x165b*0x1+0x3201;this['lastLoadIn'+'dex']!==_0x1d9ec2&&(this['lastLoadIn'+'dex']=_0x1d9ec2,this['loadNextSe'+'gment'](_0x1d9ec2));}async['loadNextSe'+'gment'](_0x5dcede){const _0x80c125=[];for(let _0x3bbf3a=-0x521*-0x1+-0x1a9f+0x312*0x7;_0x3bbf3a<Eh['CACHE_COUN'+'T'];_0x3bbf3a++)_0x80c125['push']((_0x5dcede+_0x3bbf3a)%this['segmentTim'+'elines']['length']);const _0x412bfe=_0x80c125[_0x80c125['length']-(0xb79*-0x2+-0x1526+0x2c19)],_0x54bcc6=this['segmentTim'+'elines'][_0x412bfe]['t']+this['segmentTim'+'elines'][_0x412bfe]['d'];this['gsdAssetPa'+'rser']['appendload'+'DataTask'](_0x80c125,_0x54bcc6);}['findSegmen'+'tTimeline'](_0x375a1e){let _0x4ec30a=0x2*0xeb0+0x1e10+-0x3b70,_0x1ebd7a=this['segmentTim'+'elines']['length']-(-0x1*-0x147+0x3*0x55b+-0x1157);for(;_0x4ec30a<=_0x1ebd7a;){const _0x209a59=_0x4ec30a+_0x1ebd7a>>-0xc5*0x29+0x2073+-0xe5,{t:_0x294b6a,d:_0x520063}=this['segmentTim'+'elines'][_0x209a59];if(_0x375a1e<_0x294b6a)_0x1ebd7a=_0x209a59-(0xac*0xb+0x92e*0x1+-0x1091);else{if(_0x375a1e>=_0x294b6a+_0x520063)_0x4ec30a=_0x209a59+(-0x13de+-0x8f8+0x1cd7);else return{'timeline':this['segmentTim'+'elines'][_0x209a59],'timelineIndex':_0x209a59};}}return null;}};h(Eh,'CACHE_COUN'+'T',-0x2611+0xe*0x185+0x10d1);let Su=Eh;class MN{constructor(_0x59448e,_0x4535bd){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'manifest'),h(this,'schedule'),h(this,'readWorker'),h(this,'loadDataTa'+'skQueue',[]),h(this,'isProcessi'+'ngLoadTask'+'Queue',!(0x1*0x191+-0xd8b+0xbfb)),(console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','Register\x20G'+'sdParser.c'+'onstructor'),this['app']=_0x59448e,this['maxRetries']=_0x4535bd,this['urlList']=[],this['gsplatReso'+'urce']=null,this['totalRecei'+'ved']=-0x23fd+0x1*-0x1f2a+0x4327*0x1,this['manifest']={});}async['load'](_0x34d56a,_0x66790d,_0x2296dd){console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','GsdParser.'+'load',_0x34d56a['load']);const _0x162ddd=_0x2296dd['data']['events'];this['events']=_0x162ddd,this['asset']=_0x2296dd,this['callback']=_0x66790d,this['timeOption']=_0x2296dd['data']['timeOption'];let _0x5437ab=_0x2296dd['data']['representa'+'tion']||'high-raw';this['readWorker']=new PN(_0x34d56a['load']);const _0xc9fd09=await this['readWorker']['loadGsdMan'+'ifest'](_0x5437ab);this['manifest']=_0xc9fd09['manifest'],_0x5437ab=_0xc9fd09['manifest']['representa'+'tion']||_0x5437ab,this['schedule']=new Su(this['manifest'],_0x5437ab,this),this['totalRecei'+'vedCount']=-0xdfd+0x23e2*-0x1+0x31df;const _0x18b91=this['getSegment'+'Timeline'](this['manifest'],_0x5437ab),_0x6dd96=_0x18b91[-0x1*-0x11d+-0x2fa*0x2+0x4d7]['t']+_0x18b91[0xb*0x239+-0x2*0xe17+0x3bb]['d'];this['appendload'+'DataTask']([-0x715+0x756+-0x41,0x20e1+-0x1*0x649+-0x1a97],_0x6dd96),_0x162ddd['on']('timeChange'+'d',_0x4e6456=>{var _0x314f4e;(_0x314f4e=this['schedule'])==null||_0x314f4e['onTimeChan'+'ged'](_0x4e6456);});}['getSegment'+'Timeline'](_0x1d1217,_0x237770){let _0x1527b1=null;for(const _0x5beebd of _0x1d1217['adaptation'+'Sets'])if(_0x5beebd['contentTyp'+'e']==='4dgs'){for(const _0xfa610 of _0x5beebd['representa'+'tions'])if(_0xfa610['id']===_0x237770){_0x1527b1=_0xfa610;break;}break;}if(!_0x1527b1)throw new Error('Representa'+'tion\x20\x27'+_0x237770+('\x27\x20not\x20foun'+'d'));return _0x1527b1['segmentTem'+'plate'][0x90b+0x1*0xe47+-0x2*0xba9]['segmentTim'+'eline'];}['appendload'+'DataTask'](_0x4b6edf,_0x2b5a85){this['loadDataTa'+'skQueue']['push']({'segmentIndexs':_0x4b6edf,'loadedTime':_0x2b5a85}),this['isProcessi'+'ngLoadTask'+'Queue']||Promise['resolve']()['then'](()=>this['processLoa'+'dQueue']());}async['processLoa'+'dQueue'](){if(!this['isProcessi'+'ngLoadTask'+'Queue']){this['isProcessi'+'ngLoadTask'+'Queue']=!(-0x95*-0x1+0x147c+-0x1511);try{for(;this['loadDataTa'+'skQueue']['length']>0x2*-0x6b+-0x2435+0x250b;){const _0x155eec=this['loadDataTa'+'skQueue']['shift']();await this['loadGsplat'+'Data'](_0x155eec);}}finally{this['isProcessi'+'ngLoadTask'+'Queue']=!(0x1f2e+-0x2*-0xe27+-0x3b7b);}}}async['loadGsplat'+'Data'](_0x336b13){var _0x41b68e,_0xbe5368;const {segmentIndexs:_0x37e96d,loadedTime:_0x194c41}=_0x336b13,_0x2e67a6=this['events'],_0x40e810=this['asset'],_0x1b3bd1=this['callback'],_0x2f87e6=this['timeOption'];globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('____loadTi'+'me','gsd\x20======'+'=========='+'=========='+'=========='+'=========='+'========='),console['log']('____loadTi'+'me','gsd\x20start\x20'+'loadGsplat'+'Data',_0x37e96d,(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](0x21ab+-0x9ec*0x1+0x17bd*-0x1));try{const _0x35f71e=await this['readWorker']['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x37e96d,(_0x43ec17,_0x2d31fd)=>{this['totalRecei'+'ved']+=_0x43ec17,_0x40e810&&_0x2e67a6['fire']('progress',this['totalRecei'+'ved'],_0x2d31fd);},(_0x500cfb,_0x3ec6fc)=>{debugger;console['warn']('ERROE\x20Load'+'\x20GSD',_0x3ec6fc,_0x500cfb);});console['log']('____loadTi'+'me','gsd\x20end\x20lo'+'adGsplatDa'+'ta',(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](-0xac0+-0x146b+-0x1f2d*-0x1),_0x35f71e['data']['elements'][0x1*-0x247f+0x1002+0x419*0x5]['count'],((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/_0x35f71e['data']['elements'][0x83*0x9+-0x24eb*0x1+0x2050]['count']*(-0x117e+0x3*0x42d+0x2c07))['toFixed'](-0xd*-0x266+-0x5b3*-0x5+0x2f*-0x145));const _0x19ac2c=_0x35f71e['data'];if(_0x19ac2c['elements'][0x3f*-0x1f+-0x1bb4+0x2355]['count']===-0x1*0x11b3+0x2013+-0xe60)return;this['totalRecei'+'vedCount']+=_0x19ac2c['elements'][0xc*-0x9b+0x49d+0x1*0x2a7]['count'];const _0x2e1193=new xA(_0x19ac2c['elements'],_0x19ac2c['comments']);_0x40e810['fire']('load:data',_0x2e1193);const _0x2bcc30=_0x40e810['data']['createTime']!==((_0xbe5368=(_0x41b68e=this['onlyOneAss'+'et'])==null?void(-0x33*-0xa7+-0xc46*0x3+0x38d):_0x41b68e['data'])==null?void(-0x30b*0x1+-0x155f*-0x1+0x92a*-0x2):_0xbe5368['createTime']);this['gsplatReso'+'urce']&&!_0x2bcc30?(console['log']('____\x20ENGIN'+'E\x20IVAN','appendGSpl'+'atDecodedR'+'esource'),this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x2e1193,_0x2f87e6,_0x194c41,_0x40e810)):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'DecodedRes'+'ource'),this['gsplatReso'+'urce']=new $A(this['app']['graphicsDe'+'vice'],_0x2e1193),this['gsplatReso'+'urce']['setSceneIn'+'fo'](this['manifest']['sceneInfo']),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x2f87e6,this['onlyOneAss'+'et']=_0x40e810,_0x1b3bd1&&_0x1b3bd1(null,this['gsplatReso'+'urce']),_0x2e67a6['fire']('loadAllAss'+'etsDone'));}catch(_0x5cddfa){console['error']('loadGsplat'+'Data','error',_0x5cddfa),_0x1b3bd1&&_0x1b3bd1(_0x5cddfa,null);}}['open'](_0x1330b5,_0x2ceb46){return _0x2ceb46;}}class DN extends Qe{constructor(_0xb9c235){console['log']('____\x20ENGIN'+'E\x20IVAN','Register\x20G'+'SplatHandl'+'er.constru'+'ctor\x20by\x20ap'+'plication\x20'+'addResourc'+'eHandles'),super(_0xb9c235,'gsplat'),this['parsers']={'ply':new AN(_0xb9c235,0xc2*-0x9+-0x74*-0x37+0x1*-0x1217),'json':new MN(_0xb9c235,0x1301+0x2*-0x801+0x2fc*-0x1)};}['_getUrlWit'+'houtParams'](_0x3acec3){return _0x3acec3['indexOf']('?')>=0x264+-0x1c22+0x19be?_0x3acec3['split']('?')[-0x2a6*-0x2+-0x2110+-0x4*-0x6f1]:_0x3acec3;}['_getParser'](_0x547548){const _0x3f7d26=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x547548))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x3f7d26]||this['parsers']['ply'];}['load'](_0x4faa0d,_0x5ae214,_0x455c87){console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.load'),typeof _0x4faa0d=='string'&&(_0x4faa0d={'load':_0x4faa0d,'original':_0x4faa0d}),this['_getParser'](_0x4faa0d['original'])['load'](_0x4faa0d,_0x5ae214,_0x455c87);}['open'](_0x3b1ebe,_0x2754ae,_0x130421){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.open'),_0x2754ae;}}class yu{static['setCompres'+'sedPRS'](_0x2f0e7b,_0x35d814,_0x346058){const _0x4168a1=_0x346058['singleVecs'];let _0x3083b5,_0x8d313a;const _0x5105bb=_0x35d814['___1'];_0x5105bb||(_0x3083b5=_0x346058['tripleVecs'],_0x8d313a=_0x35d814['___2']);let _0x416245=_0x5105bb?_0x5105bb[-0x911+-0x660*0x2+-0x15d1*-0x1]:_0x3083b5[_0x8d313a];_0x2f0e7b['setLocalPo'+'sition'](_0x4168a1[_0x416245],_0x4168a1[_0x416245+(-0xb*0x6a+0x4a9*0x5+0x12be*-0x1)],_0x4168a1[_0x416245+(0xdf7+-0x161f+0x82a)]),_0x416245=_0x5105bb?_0x5105bb[0x98*0x17+0x255*-0x1+-0xb52]:_0x3083b5[_0x8d313a+(-0x8b9+-0x187*0xb+0x51b*0x5)],_0x2f0e7b['setLocalEu'+'lerAngles'](_0x4168a1[_0x416245],_0x4168a1[_0x416245+(-0x2*0x1d3+0x1fb+-0xd6*-0x2)],_0x4168a1[_0x416245+(0x1*0x26a7+-0xf79+-0x172c)]),_0x416245=_0x5105bb?_0x5105bb[-0x773*0x1+0x141d+-0xca8]:_0x3083b5[_0x8d313a+(-0x23b1+0x520+0x1*0x1e93)],_0x2f0e7b['setLocalSc'+'ale'](_0x4168a1[_0x416245],_0x4168a1[_0x416245+(0x1*-0x13bc+-0x7e7*0x3+0x2b72)],_0x4168a1[_0x416245+(-0x1*-0x1525+0xf+-0x2*0xa99)]);}static['oneCharToK'+'ey'](_0x2630d5,_0xefc35f){const _0x1e432b=_0x2630d5['charCodeAt'](0x202a+-0x1d8+-0x1e52)-_0xefc35f['fieldFirst'+'Code'];return _0xefc35f['fieldArray'][_0x1e432b];}static['multCharTo'+'Key'](_0x4cd44b,_0x2f76a5){let _0x591fd9=-0x158f*-0x1+0x93*0x2a+0x1*-0x2dad;for(let _0x11f0b1=0x1eb1+0x1*-0x1b91+-0x28*0x14;_0x11f0b1<_0x4cd44b['length'];_0x11f0b1++)_0x591fd9=_0x591fd9*_0x2f76a5['fieldCodeB'+'ase']+_0x4cd44b['charCodeAt'](_0x11f0b1)-_0x2f76a5['fieldFirst'+'Code'];return _0x2f76a5['fieldArray'][_0x591fd9];}}class _h{constructor(_0xc41f4f,_0x5716bf){this['_node']=_0xc41f4f,this['_data']=_0x5716bf;}['run'](){const _0x43a52a=Object['prototype']['toString']['call'](this['_node']);return _0x43a52a==='[object\x20Ob'+'ject]'?this['_handleMap']():_0x43a52a==='[object\x20Ar'+'ray]'?this['_handleArr'+'ay']():this['_result']=this['_node'],this['_result'];}['_handleMap'](){this['_result']={},Object['keys'](this['_node'])['forEach'](this['_handleKey'],this);}['_handleKey'](_0xb45885){let _0x345f90=_0xb45885;const _0x340860=_0xb45885['length'];_0x340860===-0x2487+0x7d8+0x1cb0?_0x345f90=yu['oneCharToK'+'ey'](_0xb45885,this['_data']):_0x340860===0x1a4d*0x1+0x59*-0x5f+0x6bc*0x1&&(_0x345f90=yu['multCharTo'+'Key'](_0xb45885,this['_data'])),this['_result'][_0x345f90]=new _h(this['_node'][_0xb45885],this['_data'])['run']();}['_handleArr'+'ay'](){this['_result']=[],this['_node']['forEach'](this['_handleArE'+'lt'],this);}['_handleArE'+'lt'](_0x2906ec){const _0x2f84fc=new _h(_0x2906ec,this['_data'])['run']();this['_result']['push'](_0x2f84fc);}}class Qp{constructor(_0x4dce58,_0x21068a){this['_app']=_0x4dce58,this['_isTemplat'+'e']=_0x21068a;}['parse'](_0x425ab8){const _0xbae81d={};let _0x26f07e=null;const _0x3b4bb8=_0x425ab8['compressed'+'Format'];_0x3b4bb8&&!_0x425ab8['entDecompr'+'essed']&&(_0x425ab8['entDecompr'+'essed']=!(-0x7*-0x40c+-0x19*-0x14b+-0x3ca7),_0x425ab8['entities']=new _h(_0x425ab8['entities'],_0x3b4bb8)['run']());for(const _0x118c14 in _0x425ab8['entities']){const _0x11c7cb=_0x425ab8['entities'][_0x118c14],_0x377a15=this['_createEnt'+'ity'](_0x11c7cb,_0x3b4bb8);_0xbae81d[_0x118c14]=_0x377a15,_0x11c7cb['parent']===null&&(_0x26f07e=_0x377a15);}for(const _0x2d7d6c in _0x425ab8['entities']){const _0x594fa6=_0xbae81d[_0x2d7d6c],_0x2a7805=_0x425ab8['entities'][_0x2d7d6c]['children'],_0x4ad536=_0x2a7805['length'];for(let _0x327a5a=0xf09+-0xb*0x36b+0x1690;_0x327a5a<_0x4ad536;_0x327a5a++){const _0x366c2a=_0xbae81d[_0x2a7805[_0x327a5a]];_0x366c2a&&_0x594fa6['addChild'](_0x366c2a);}}return this['_openCompo'+'nentData'](_0x26f07e,_0x425ab8['entities']),_0x26f07e;}['_createEnt'+'ity'](_0x536841,_0x586f6a){const _0x44a8ad=new lt(_0x536841['name'],this['_app']);if(_0x44a8ad['setGuid'](_0x536841['resource_i'+'d']),this['_setPosRot'+'Scale'](_0x44a8ad,_0x536841,_0x586f6a),_0x44a8ad['_enabled']=_0x536841['enabled']??!(-0x1f1e+0x32*0xa5+-0x4*0x47),this['_isTemplat'+'e']?_0x44a8ad['_template']=!(-0x71*-0x3e+-0x406+-0x1758):_0x44a8ad['_enabledIn'+'Hierarchy']=_0x44a8ad['_enabled'],_0x44a8ad['template']=_0x536841['template'],_0x536841['tags']){for(let _0x17458b=0x15d*0x4+0xcd2*-0x1+-0x3af*-0x2;_0x17458b<_0x536841['tags']['length'];_0x17458b++)_0x44a8ad['tags']['add'](_0x536841['tags'][_0x17458b]);}return _0x44a8ad;}['_setPosRot'+'Scale'](_0xfdf251,_0x24ae85,_0x4dc310){if(_0x4dc310)yu['setCompres'+'sedPRS'](_0xfdf251,_0x24ae85,_0x4dc310);else{const _0x1d989d=_0x24ae85['position'],_0x3744d2=_0x24ae85['rotation'],_0x2c60f7=_0x24ae85['scale'];_0xfdf251['setLocalPo'+'sition'](_0x1d989d[-0x8*0x46b+0x17b8+0xba0],_0x1d989d[0x1407+-0x3bd+-0x17b*0xb],_0x1d989d[0x1e19+-0xac0+-0x1357*0x1]),_0xfdf251['setLocalEu'+'lerAngles'](_0x3744d2[0x154*0x3+-0x1*-0x5b4+-0x9b*0x10],_0x3744d2[-0xb*-0x185+0xccb+0xd*-0x245],_0x3744d2[-0x270f+-0xc77+0x3388]),_0xfdf251['setLocalSc'+'ale'](_0x2c60f7[-0xfeb+-0xb5f*0x3+0x2*0x1904],_0x2c60f7[0x1*0x1792+-0x1fd5+0x844],_0x2c60f7[0xc*0xf8+0x526+0x25*-0x74]);}}['_openCompo'+'nentData'](_0x1f13e6,_0x10b748){const _0x4a9090=this['_app']['systems']['list'];let _0x1a94b6=_0x4a9090['length'];const _0x42aa0e=_0x10b748[_0x1f13e6['getGuid']()];for(let _0x560955=-0x2*0x8ad+-0x7*-0x2bb+-0x1c3;_0x560955<_0x1a94b6;_0x560955++){const _0x4c6976=_0x4a9090[_0x560955],_0x5bcf93=_0x42aa0e['components'][_0x4c6976['id']];_0x5bcf93&&_0x4c6976['addCompone'+'nt'](_0x1f13e6,_0x5bcf93);}_0x1a94b6=_0x42aa0e['children']['length'];const _0x3e0b08=_0x1f13e6['_children'];for(let _0x333508=-0xba0+-0xb*0x187+0x1c6d;_0x333508<_0x1a94b6;_0x333508++)_0x3e0b08[_0x333508]?_0x3e0b08[_0x333508]=this['_openCompo'+'nentData'](_0x3e0b08[_0x333508],_0x10b748):w['warn']('Scene\x20data'+'\x20is\x20invali'+'d\x20where\x20a\x20'+'child\x20unde'+'r\x20\x22'+_0x1f13e6['name']+('\x22\x20Entity\x20d'+'oesn\x27t\x20exi'+'st.\x20Please'+'\x20check\x20the'+'\x20scene\x20dat'+'a.'));return _0x1f13e6;}}class Gv{static['load'](_0xa6e9ec,_0x40ae31,_0x1e6f8c){typeof _0xa6e9ec=='string'&&(_0xa6e9ec={'load':_0xa6e9ec,'original':_0xa6e9ec}),ot['get'](_0xa6e9ec['load'],{'retry':_0x40ae31>0x2349+0x1*0xce7+-0x3030,'maxRetries':_0x40ae31},(_0x4563f8,_0x31c629)=>{if(!_0x4563f8)_0x1e6f8c(_0x4563f8,_0x31c629);else{let _0x3b6be1='Error\x20whil'+'e\x20loading\x20'+'scene\x20JSON'+'\x20'+_0xa6e9ec['original'];_0x4563f8['message']?(_0x3b6be1+=':\x20'+_0x4563f8['message'],_0x4563f8['stack']&&(_0x3b6be1+='\x0a'+_0x4563f8['stack'])):_0x3b6be1+=':\x20'+_0x4563f8,_0x1e6f8c(_0x3b6be1);}});}}class IN extends Qe{constructor(_0x4e03f7){super(_0x4e03f7,'hierarchy');}['load'](_0x1de3b9,_0x2cb57c){Gv['load'](_0x1de3b9,this['maxRetries'],_0x2cb57c);}['open'](_0xe33552,_0x70eed2){this['_app']['systems']['script']['preloading']=!(0x3*-0x40d+-0x6*-0x315+-0x657);const _0x28de7d=new Qp(this['_app'],!(0x10f*-0x4+0x21af+-0x1d72))['parse'](_0x70eed2);return this['_app']['systems']['script']['preloading']=!(-0xf18+-0x18d6+0x27ef),_0x28de7d;}}class LN extends Qe{constructor(_0x55c659){super(_0x55c659,'html'),h(this,'decoder',null);}['load'](_0x3ff5d6,_0x3cc399){typeof _0x3ff5d6=='string'&&(_0x3ff5d6={'load':_0x3ff5d6,'original':_0x3ff5d6}),ot['get'](_0x3ff5d6['load'],{'retry':this['maxRetries']>-0x1d85+-0x85*0x3f+0x3e40*0x1,'maxRetries':this['maxRetries']},(_0x163995,_0x4a6861)=>{_0x163995?_0x3cc399('Error\x20load'+'ing\x20html\x20r'+'esource:\x20'+_0x3ff5d6['original']+'\x20['+_0x163995+']'):_0x3cc399(null,_0x4a6861);});}['openBinary'](_0x398615){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x398615);}}class RN extends Qe{constructor(_0x412b13){super(_0x412b13,'json'),h(this,'decoder',null);}['load'](_0x4688cf,_0x5299b7){typeof _0x4688cf=='string'&&(_0x4688cf={'load':_0x4688cf,'original':_0x4688cf});const _0x403ac4={'retry':this['maxRetries']>0x51e*-0x5+-0x1126+0x2abc,'maxRetries':this['maxRetries']};_0x4688cf['load']['startsWith']('blob:')&&(_0x403ac4['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x4688cf['load'],_0x403ac4,(_0x3db730,_0x49ca61)=>{_0x3db730?_0x5299b7('Error\x20load'+'ing\x20JSON\x20r'+'esource:\x20'+_0x4688cf['original']+'\x20['+_0x3db730+']'):_0x5299b7(null,_0x49ca61);});}['openBinary'](_0x59aa0d){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),JSON['parse'](this['decoder']['decode'](_0x59aa0d));}}class ON{constructor(){this['removeInva'+'lid']=!(0x8ae+-0xa33+0x185),this['valid']=!(0x5fc*0x4+0x2102+0x1*-0x38f2),this['enumValida'+'tors']={'occludeSpecular':this['_createEnu'+'mValidator']([Ay,id,Cy]),'cull':this['_createEnu'+'mValidator']([bt,ca,wo,W0]),'blendType':this['_createEnu'+'mValidator']([mp,_p,Zs,Cs,Fn,gp,sd,Sp,yp,vp,xp]),'depthFunc':this['_createEnu'+'mValidator']([$0,Gc,Hc,Sf,X0,q0,j0,Hi])};}['setInvalid'](_0xd9ce68,_0xf29831){this['valid']=!(0x1967+-0x6b4+0x1*-0x12b2),w['warn']('Ignoring\x20i'+'nvalid\x20Sta'+'ndardMater'+'ial\x20proper'+'ty:\x20'+_0xd9ce68,_0xf29831[_0xd9ce68]),this['removeInva'+'lid']&&delete _0xf29831[_0xd9ce68];}['validate'](_0x4e75e0){const _0x4b8d30=Un,_0x2cb384=FE,_0x122409=_0x4e75e0['mappingFor'+'mat']==='path';for(const _0x2acbb1 in _0x4e75e0){const _0x47c8c8=_0x4b8d30[_0x2acbb1];if(!_0x47c8c8){_0x2cb384[_0x2acbb1]?delete _0x4e75e0[_0x2acbb1]:(w['warnOnce']('Ignoring\x20u'+'nsupported'+'\x20input\x20pro'+'perty\x20to\x20s'+'tandard\x20ma'+'terial:\x20'+_0x2acbb1),this['valid']=!(-0x3*0x1d+-0x245e*0x1+0x24b6));continue;}if(_0x47c8c8['startsWith']('enum')){const _0x23b9f3=_0x47c8c8['split'](':')[0x12bf+-0x17bc+0x1*0x4fe];this['enumValida'+'tors'][_0x23b9f3]&&(this['enumValida'+'tors'][_0x23b9f3](_0x4e75e0[_0x2acbb1])||this['setInvalid'](_0x2acbb1,_0x4e75e0));}else{if(_0x47c8c8==='number')typeof _0x4e75e0[_0x2acbb1]!='number'&&this['setInvalid'](_0x2acbb1,_0x4e75e0);else{if(_0x47c8c8==='boolean')typeof _0x4e75e0[_0x2acbb1]!='boolean'&&this['setInvalid'](_0x2acbb1,_0x4e75e0);else{if(_0x47c8c8==='string')typeof _0x4e75e0[_0x2acbb1]!='string'&&this['setInvalid'](_0x2acbb1,_0x4e75e0);else{if(_0x47c8c8==='vec2')_0x4e75e0[_0x2acbb1]instanceof Array&&_0x4e75e0[_0x2acbb1]['length']===0x949*-0x1+0x1*0x855+0xf6||this['setInvalid'](_0x2acbb1,_0x4e75e0);else{if(_0x47c8c8==='rgb')_0x4e75e0[_0x2acbb1]instanceof Array&&_0x4e75e0[_0x2acbb1]['length']===0x9e9+0xb40+-0x1526*0x1||this['setInvalid'](_0x2acbb1,_0x4e75e0);else{if(_0x47c8c8==='texture')_0x122409?typeof _0x4e75e0[_0x2acbb1]=='string'||_0x4e75e0[_0x2acbb1]===null||_0x4e75e0[_0x2acbb1]instanceof _e||this['setInvalid'](_0x2acbb1,_0x4e75e0):typeof _0x4e75e0[_0x2acbb1]=='number'||_0x4e75e0[_0x2acbb1]===null||_0x4e75e0[_0x2acbb1]instanceof _e||this['setInvalid'](_0x2acbb1,_0x4e75e0);else{if(_0x47c8c8==='boundingbo'+'x')_0x4e75e0[_0x2acbb1]['center']&&_0x4e75e0[_0x2acbb1]['center']instanceof Array&&_0x4e75e0[_0x2acbb1]['center']['length']===0x9d7+0xee6+-0x18ba||this['setInvalid'](_0x2acbb1,_0x4e75e0),_0x4e75e0[_0x2acbb1]['halfExtent'+'s']&&_0x4e75e0[_0x2acbb1]['halfExtent'+'s']instanceof Array&&_0x4e75e0[_0x2acbb1]['halfExtent'+'s']['length']===-0x9*0xdf+0x31*-0x44+-0xa6f*-0x2||this['setInvalid'](_0x2acbb1,_0x4e75e0);else{if(_0x47c8c8==='cubemap')typeof _0x4e75e0[_0x2acbb1]=='number'||_0x4e75e0[_0x2acbb1]===null||_0x4e75e0[_0x2acbb1]===void(0x355*-0x2+-0x19e6+0x2090)||_0x4e75e0[_0x2acbb1]instanceof _e&&_0x4e75e0[_0x2acbb1]['cubemap']||this['setInvalid'](_0x2acbb1,_0x4e75e0);else{if(_0x47c8c8==='chunks'){const _0x36ea00=Object['keys'](_0x4e75e0[_0x2acbb1]);for(let _0x3dc522=-0x5e3*0x4+0x168c+0x20*0x8;_0x3dc522<_0x36ea00['length'];_0x3dc522++)typeof _0x4e75e0[_0x2acbb1][_0x36ea00[_0x3dc522]]!='string'&&this['setInvalid'](_0x36ea00[_0x3dc522],_0x4e75e0[_0x2acbb1]);}else console['error']('Unknown\x20ma'+'terial\x20typ'+'e:\x20'+_0x47c8c8);}}}}}}}}}}return _0x4e75e0['validated']=!(0x76*-0x3b+-0xa39+0x256b),this['valid'];}['_createEnu'+'mValidator'](_0xd28f70){return function(_0x4e0aa6){return _0xd28f70['indexOf'](_0x4e0aa6)>=0x2248+0x4f2*0x7+0x2*-0x2273;};}}class FN{constructor(){this['_validator']=null;}['parse'](_0x4e7090){const _0x3804cc=this['migrate'](_0x4e7090),_0x133bf3=this['_validate'](_0x3804cc),_0x5c7d42=new Ut();return this['initialize'](_0x5c7d42,_0x133bf3),_0x5c7d42;}['initialize'](_0x4f71db,_0x5c5eaf){if(_0x5c5eaf['validated']||(_0x5c5eaf=this['_validate'](_0x5c5eaf)),_0x5c5eaf['chunks']&&_0x5c5eaf['chunks']&&Object['keys'](_0x5c5eaf['chunks'])['length']>-0x1*0x1f49+-0x1183+0x30cc){const _0x507734=_0x4f71db['shaderChun'+'ks']['glsl'];Object['entries'](_0x5c5eaf['chunks'])['forEach'](([_0x5c044e,_0xbd0380])=>_0x507734['set'](_0x5c044e,_0xbd0380));}for(const _0x325bc4 in _0x5c5eaf){const _0x3586e8=Un[_0x325bc4],_0x20b1e2=_0x5c5eaf[_0x325bc4];if(_0x3586e8==='vec2')_0x4f71db[_0x325bc4]=new J(_0x20b1e2[-0xae9+0x7*-0x12d+0x19*0xc4],_0x20b1e2[-0x1fe1+-0x6e0+0x26c2]);else{if(_0x3586e8==='rgb')_0x4f71db[_0x325bc4]=new ie(_0x20b1e2[-0x1ef*-0xd+-0x1f18+0x5f5],_0x20b1e2[0x3f9*-0x2+0x299*0xb+-0x14a0],_0x20b1e2[0x166*-0xe+-0x4e1+0x1877*0x1]);else{if(_0x3586e8==='texture')_0x20b1e2 instanceof _e?_0x4f71db[_0x325bc4]=_0x20b1e2:_0x4f71db[_0x325bc4]instanceof _e&&typeof _0x20b1e2=='number'&&_0x20b1e2>-0xae+0x73b+0x22f*-0x3||(_0x4f71db[_0x325bc4]=null);else{if(_0x3586e8==='cubemap')_0x20b1e2 instanceof _e?_0x4f71db[_0x325bc4]=_0x20b1e2:_0x4f71db[_0x325bc4]instanceof _e&&typeof _0x20b1e2=='number'&&_0x20b1e2>-0x1b0b+-0x20b8+0x1*0x3bc3||(_0x4f71db[_0x325bc4]=null),_0x325bc4==='cubeMap'&&!_0x20b1e2&&(_0x4f71db['prefiltere'+'dCubemaps']=null);else{if(_0x3586e8==='boundingbo'+'x'){const _0x271198=new D(_0x20b1e2['center'][0x3*-0x48+-0x1261+-0x85*-0x25],_0x20b1e2['center'][0x65+-0x1b44+-0xd70*-0x2],_0x20b1e2['center'][0x56*0xc+0x20*-0xea+0x193a]),_0x539788=new D(_0x20b1e2['halfExtent'+'s'][0x2*0xb65+0x3*-0xbe1+0xcd9],_0x20b1e2['halfExtent'+'s'][-0x18de*-0x1+0xe75*-0x1+0x18*-0x6f],_0x20b1e2['halfExtent'+'s'][-0xe2e+0x7b2+-0x6*-0x115]);_0x4f71db[_0x325bc4]=new De(_0x271198,_0x539788);}else _0x4f71db[_0x325bc4]=_0x5c5eaf[_0x325bc4];}}}}}_0x4f71db['update']();}['migrate'](_0x37322d){_0x37322d['shader']&&delete _0x37322d['shader'],_0x37322d['mapping_fo'+'rmat']&&(_0x37322d['mappingFor'+'mat']=_0x37322d['mapping_fo'+'rmat'],delete _0x37322d['mapping_fo'+'rmat']);let _0x59a639;const _0x4d9a49=[['bumpMapFac'+'tor','bumpiness'],['aoUvSet','aoMapUv'],['aoMapVerte'+'xColor','aoVertexCo'+'lor'],['diffuseMap'+'VertexColo'+'r','diffuseVer'+'texColor'],['emissiveMa'+'pVertexCol'+'or','emissiveVe'+'rtexColor'],['specularMa'+'pVertexCol'+'or','specularVe'+'rtexColor'],['metalnessM'+'apVertexCo'+'lor','metalnessV'+'ertexColor'],['opacityMap'+'VertexColo'+'r','opacityVer'+'texColor'],['glossMapVe'+'rtexColor','glossVerte'+'xColor'],['lightMapVe'+'rtexColor','lightVerte'+'xColor'],['specularMa'+'pTint','specularTi'+'nt'],['metalnessM'+'apTint','metalnessT'+'int'],['clearCoatG'+'lossiness','clearCoatG'+'loss']];for(_0x59a639=0x1*0x533+0x533+-0x1*0xa66;_0x59a639<_0x4d9a49['length'];_0x59a639++){const _0x4a3bdd=_0x4d9a49[_0x59a639][0x1bb*0x8+0x149+0x1*-0xf21],_0x15c4a0=_0x4d9a49[_0x59a639][0x7*0x2c5+-0x1bf0+-0x1*-0x88e];_0x37322d[_0x4a3bdd]!==void(0x26e2+-0xc9*-0x19+-0x3a83)&&(_0x37322d[_0x15c4a0]===void(-0x733+0x2551*-0x1+0x2c84)&&(_0x37322d[_0x15c4a0]=_0x37322d[_0x4a3bdd]),delete _0x37322d[_0x4a3bdd]);}const _0x2cc13e=['fresnelFac'+'tor','shadowSamp'+'leType'];for(_0x59a639=0x2b4+-0x9*-0x2f7+-0x1d63;_0x59a639<_0x2cc13e['length'];_0x59a639++){const _0x4d4279=_0x2cc13e[_0x59a639];_0x37322d['hasOwnProp'+'erty'](_0x4d4279)&&delete _0x37322d[_0x4d4279];}return _0x37322d;}['_validate'](_0x408a9a){return _0x408a9a['validated']||(this['_validator']||(this['_validator']=new ON()),this['_validator']['validate'](_0x408a9a)),_0x408a9a;}}const NN={'aoMap':'white','aoDetailMap':'white','diffuseMap':'gray','diffuseDetailMap':'gray','specularMap':'gray','specularityFactorMap':'white','metalnessMap':'black','glossMap':'gray','sheenMap':'black','sheenGlossMap':'gray','clearCoatMap':'black','clearCoatGlossMap':'gray','clearCoatNormalMap':'normal','refractionMap':'white','emissiveMap':'gray','normalMap':'normal','normalDetailMap':'normal','heightMap':'gray','opacityMap':'gray','sphereMap':'gray','lightMap':'white','thicknessMap':'black','iridescenceMap':'black','iridescenceThicknessMap':'black','envAtlas':'black','anisotropyMap':'black'};class kN extends Qe{constructor(_0x340afe){super(_0x340afe,'material'),this['_assets']=_0x340afe['assets'],this['_device']=_0x340afe['graphicsDe'+'vice'],this['_parser']=new FN();}['load'](_0x9c60f9,_0x53df7e){typeof _0x9c60f9=='string'&&(_0x9c60f9={'load':_0x9c60f9,'original':_0x9c60f9}),ot['get'](_0x9c60f9['load'],{'retry':this['maxRetries']>0x1c10+0x51*-0x7+-0x19d9*0x1,'maxRetries':this['maxRetries']},(_0x4e3010,_0x134a67)=>{_0x4e3010?_0x53df7e&&_0x53df7e('Error\x20load'+'ing\x20materi'+'al:\x20'+_0x9c60f9['original']+'\x20['+_0x4e3010+']'):_0x53df7e&&(_0x134a67['_engine']=!(-0x2513+-0x1b28+-0x105*-0x3f),_0x53df7e(null,_0x134a67));});}['open'](_0x529f73,_0x144787){const _0x5739ba=this['_parser']['parse'](_0x144787);return _0x144787['_engine']&&(_0x5739ba['_data']=_0x144787,delete _0x144787['_engine']),_0x5739ba;}['patch'](_0x1a48f3,_0x56fb7b){_0x1a48f3['resource']['_data']&&(_0x1a48f3['_data']=_0x1a48f3['resource']['_data'],delete _0x1a48f3['resource']['_data']),_0x1a48f3['data']['name']=_0x1a48f3['name'],_0x1a48f3['resource']['name']=_0x1a48f3['name'],this['_bindAndAs'+'signAssets'](_0x1a48f3,_0x56fb7b),_0x1a48f3['off']('unload',this['_onAssetUn'+'load'],this),_0x1a48f3['on']('unload',this['_onAssetUn'+'load'],this);}['_onAssetUn'+'load'](_0x18ce01){delete _0x18ce01['data']['parameters'],delete _0x18ce01['data']['chunks'],delete _0x18ce01['data']['name'];}['_assignTex'+'ture'](_0x404d70,_0xee5e0e,_0x2a0ed8){_0xee5e0e['resource'][_0x404d70]=_0x2a0ed8;}['_getPlaceh'+'olderTextu'+'re'](_0x45ea21){const _0x407d70=NN[_0x45ea21];return w['assert'](_0x407d70,'No\x20placeho'+'lder\x20textu'+'re\x20found\x20f'+'or\x20paramet'+'er:\x20'+_0x45ea21),oa(this['_device'],_0x407d70);}['_assignPla'+'ceholderTe'+'xture'](_0x1a4d11,_0x5a36ee){_0x5a36ee['resource'][_0x1a4d11]=this['_getPlaceh'+'olderTextu'+'re'](_0x1a4d11);}['_onTexture'+'Load'](_0x22646f,_0x3f0e1c,_0x499d4){this['_assignTex'+'ture'](_0x22646f,_0x3f0e1c,_0x499d4['resource']),_0x3f0e1c['resource']['update']();}['_onTexture'+'Add'](_0x13ca55,_0x51341a,_0x40c367){this['_assets']['load'](_0x40c367);}['_onTexture'+'RemoveOrUn'+'load'](_0x11b327,_0x2fe6d5,_0x52959b){const _0x1f09f6=_0x2fe6d5['resource'];_0x1f09f6&&_0x2fe6d5['resource'][_0x11b327]===_0x52959b['resource']&&(this['_assignPla'+'ceholderTe'+'xture'](_0x11b327,_0x2fe6d5),_0x1f09f6['update']());}['_assignCub'+'emap'](_0x28b423,_0xcb01f4,_0x5b3851){if(_0xcb01f4['resource'][_0x28b423]=_0x5b3851[-0x79f+-0x632+-0x49b*-0x3],_0x28b423==='cubeMap'){const _0x3ac3a2=_0x5b3851['slice'](0x1*-0x18a+-0x2492+-0xb*-0x377);_0x3ac3a2['every'](_0x432cb9=>_0x432cb9)?_0xcb01f4['resource']['prefiltere'+'dCubemaps']=_0x3ac3a2:_0x3ac3a2[-0x1*-0x1381+0x1*-0x3b9+0x2*-0x7e4]&&(_0xcb01f4['resource']['envAtlas']=_0x3ac3a2[-0x9b0+0x18f1+-0xf41]);}}['_onCubemap'+'Load'](_0x232edd,_0xb7d887,_0xe52f0d){this['_assignCub'+'emap'](_0x232edd,_0xb7d887,_0xe52f0d['resources']),this['_parser']['initialize'](_0xb7d887['resource'],_0xb7d887['data']);}['_onCubemap'+'Add'](_0x2b7b7a,_0x86b979,_0x1a752b){this['_assets']['load'](_0x1a752b);}['_onCubemap'+'RemoveOrUn'+'load'](_0x57dae0,_0xe465a3,_0x98c78){const _0x521528=_0xe465a3['resource'];_0xe465a3['data']['prefiltere'+'dCubeMap12'+'8']===_0x98c78['resources'][0x118d+0x1b74+-0x2d00]&&(this['_assignCub'+'emap'](_0x57dae0,_0xe465a3,[null,null,null,null,null,null,null]),_0x521528['update']());}['_bindAndAs'+'signAssets'](_0x35dad2,_0x3dad6b){const _0x32a41a=this['_parser']['migrate'](_0x35dad2['data']),_0x597413=_0x35dad2['resource'],_0x4ff861=_0x32a41a['mappingFor'+'mat']==='path',_0x1c6de8=ad;let _0x518f65,_0x21662b,_0x2cff5b;for(_0x518f65=-0x11ad+-0x1b48*-0x1+-0x99b;_0x518f65<_0x1c6de8['length'];_0x518f65++){_0x21662b=_0x1c6de8[_0x518f65],_0x2cff5b=_0x597413['_assetRefe'+'rences'][_0x21662b];const _0x7f7c73=_0x32a41a[_0x21662b],_0x5bfbd6=_0x597413[_0x21662b],_0xebc16=_0x5bfbd6===this['_getPlaceh'+'olderTextu'+'re'](_0x21662b),_0x5d7e8b=_0x32a41a['validated'];_0x7f7c73&&(!_0x5bfbd6||!_0x5d7e8b||_0xebc16)?(_0x2cff5b||(_0x2cff5b=new rl(_0x21662b,_0x35dad2,_0x3dad6b,{'load':this['_onTexture'+'Load'],'add':this['_onTexture'+'Add'],'remove':this['_onTexture'+'RemoveOrUn'+'load'],'unload':this['_onTexture'+'RemoveOrUn'+'load']},this),_0x597413['_assetRefe'+'rences'][_0x21662b]=_0x2cff5b),_0x4ff861?_0x2cff5b['url']=_0x35dad2['getAbsolut'+'eUrl'](_0x7f7c73):_0x2cff5b['id']=_0x7f7c73,_0x2cff5b['asset']&&(_0x2cff5b['asset']['resource']?this['_assignTex'+'ture'](_0x21662b,_0x35dad2,_0x2cff5b['asset']['resource']):this['_assignPla'+'ceholderTe'+'xture'](_0x21662b,_0x35dad2),_0x3dad6b['load'](_0x2cff5b['asset']))):_0x2cff5b&&(_0x4ff861?_0x2cff5b['url']=null:_0x2cff5b['id']=null);}const _0x1ebe56=Bp;for(_0x518f65=-0xf*-0x28+0x1ada*-0x1+0x1882;_0x518f65<_0x1ebe56['length'];_0x518f65++)_0x21662b=_0x1ebe56[_0x518f65],_0x2cff5b=_0x597413['_assetRefe'+'rences'][_0x21662b],_0x32a41a[_0x21662b]&&!_0x35dad2['data']['prefiltere'+'dCubeMap12'+'8']&&(_0x2cff5b||(_0x2cff5b=new rl(_0x21662b,_0x35dad2,_0x3dad6b,{'load':this['_onCubemap'+'Load'],'add':this['_onCubemap'+'Add'],'remove':this['_onCubemap'+'RemoveOrUn'+'load'],'unload':this['_onCubemap'+'RemoveOrUn'+'load']},this),_0x597413['_assetRefe'+'rences'][_0x21662b]=_0x2cff5b),_0x4ff861?_0x2cff5b['url']=_0x32a41a[_0x21662b]:_0x2cff5b['id']=_0x32a41a[_0x21662b],_0x2cff5b['asset']&&(_0x2cff5b['asset']['loaded']&&this['_assignCub'+'emap'](_0x21662b,_0x35dad2,_0x2cff5b['asset']['resources']),_0x3dad6b['load'](_0x2cff5b['asset'])));this['_parser']['initialize'](_0x597413,_0x32a41a);}}class UN{constructor(_0x212fb0){this['_device']=_0x212fb0['device'],this['_defaultMa'+'terial']=_0x212fb0['defaultMat'+'erial'],this['_assets']=_0x212fb0['assets'];}['parse'](_0x1a064e,_0x2a8aec,_0x15caba){mh['parse']('filename.g'+'lb','',_0x1a064e,this['_device'],this['_assets'],(_0x15caba==null?void(-0x1*-0xe35+-0x19fd+-0x2*-0x5e4):_0x15caba['options'])??{},(_0x2968e5,_0x496382)=>{if(_0x2968e5)_0x2a8aec(_0x2968e5);else{const _0x4fc997=mr['createMode'+'l'](_0x496382,this['_defaultMa'+'terial']);_0x496382['destroy'](),_0x2a8aec(null,_0x4fc997);}});}}const BN={'points':Vh,'lines':Gh,'lineloop':OS,'linestrip':FS,'triangles':qs,'trianglestrip':vr,'trianglefan':sa},zN={'int8':Hh,'uint8':ia,'int16':Wh,'uint16':_l,'int32':zS,'uint32':Vo,'float32':Ve};class VN{constructor(_0x575d23){this['_device']=_0x575d23['device'],this['_defaultMa'+'terial']=_0x575d23['defaultMat'+'erial'];}['parse'](_0x39fb3d,_0x4a38dc){const _0x26a9ce=_0x39fb3d['model'];if(!_0x26a9ce){_0x4a38dc(null,null);return;}if(_0x26a9ce['version']<=0x1846+0x12*0x112+-0x2b89){_0x4a38dc('JsonModelP'+'arser#pars'+'e:\x20Trying\x20'+'to\x20parse\x20u'+'nsupported'+'\x20model\x20for'+'mat.');return;}const _0x1c87bc=this['_parseNode'+'s'](_0x39fb3d),_0x431091=this['_parseSkin'+'s'](_0x39fb3d,_0x1c87bc),_0x3937ee=this['_parseVert'+'exBuffers'](_0x39fb3d),_0x4b86cd=this['_parseInde'+'xBuffers'](_0x39fb3d,_0x3937ee),_0x1b499d=this['_parseMorp'+'hs'](_0x39fb3d,_0x1c87bc,_0x3937ee),_0x1ae09a=this['_parseMesh'+'es'](_0x39fb3d,_0x431091['skins'],_0x1b499d['morphs'],_0x3937ee,_0x4b86cd['buffer'],_0x4b86cd['data']),_0x1cb6d9=this['_parseMesh'+'Instances'](_0x39fb3d,_0x1c87bc,_0x1ae09a,_0x431091['skins'],_0x431091['instances'],_0x1b499d['morphs'],_0x1b499d['instances']),_0x1a54e8=new tr();_0x1a54e8['graph']=_0x1c87bc[-0x1fcf+0x16ba+-0x1*-0x915],_0x1a54e8['meshInstan'+'ces']=_0x1cb6d9,_0x1a54e8['skinInstan'+'ces']=_0x431091['instances'],_0x1a54e8['morphInsta'+'nces']=_0x1b499d['instances'],_0x1a54e8['getGraph']()['syncHierar'+'chy'](),_0x4a38dc(null,_0x1a54e8);}['_parseNode'+'s'](_0x42ddf6){const _0x5e204a=_0x42ddf6['model'],_0x1aa1a3=[];let _0x6f5609;for(_0x6f5609=0x1*-0xe55+-0x159a+0x1*0x23ef;_0x6f5609<_0x5e204a['nodes']['length'];_0x6f5609++){const _0x800c13=_0x5e204a['nodes'][_0x6f5609],_0xb4f8ce=new Ie(_0x800c13['name']);_0xb4f8ce['setLocalPo'+'sition'](_0x800c13['position'][0x1*0x153e+0x1*0x95f+-0x1*0x1e9d],_0x800c13['position'][0x238*0xf+-0x1356+-0xdf1*0x1],_0x800c13['position'][0x2*0x10e7+-0xb85+-0x1647]),_0xb4f8ce['setLocalEu'+'lerAngles'](_0x800c13['rotation'][-0x92f+0x1287+-0x958],_0x800c13['rotation'][-0x7b*-0x44+-0x4*0xc6+-0x71*0x43],_0x800c13['rotation'][-0x22*0x77+0x2210+0x20*-0x92]),_0xb4f8ce['setLocalSc'+'ale'](_0x800c13['scale'][-0x1*0x16d7+-0xdcb*-0x2+0x9*-0x87],_0x800c13['scale'][0x1*0x24c2+0x1be*-0xe+-0xc5d],_0x800c13['scale'][0xfea+-0x1fb*0x8+-0x10]),_0xb4f8ce['scaleCompe'+'nsation']=!!_0x800c13['scaleCompe'+'nsation'],_0x1aa1a3['push'](_0xb4f8ce);}for(_0x6f5609=-0x14eb+0x12bb+0x231;_0x6f5609<_0x5e204a['parents']['length'];_0x6f5609++)_0x1aa1a3[_0x5e204a['parents'][_0x6f5609]]['addChild'](_0x1aa1a3[_0x6f5609]);return _0x1aa1a3;}['_parseSkin'+'s'](_0x3be535,_0x5abc7c){const _0x148c75=_0x3be535['model'],_0x2e5f1d=[],_0x6e9ee8=[];let _0x5b03b0,_0x97a900;for(_0x5b03b0=0xc+-0x117b*-0x1+-0x1187*0x1;_0x5b03b0<_0x148c75['skins']['length'];_0x5b03b0++){const _0x41d34c=_0x148c75['skins'][_0x5b03b0],_0x4a5e0a=[];for(_0x97a900=-0x137c+-0x16fc+0x12*0x25c;_0x97a900<_0x41d34c['inverseBin'+'dMatrices']['length'];_0x97a900++){const _0x246ca6=_0x41d34c['inverseBin'+'dMatrices'][_0x97a900];_0x4a5e0a[_0x97a900]=new te()['set'](_0x246ca6);}const _0x463258=new Ky(this['_device'],_0x4a5e0a,_0x41d34c['boneNames']);_0x2e5f1d['push'](_0x463258);const _0x49bf1b=new xl(_0x463258),_0x366515=[];for(_0x97a900=-0xb*-0x64+0x7a7*0x5+-0x883*0x5;_0x97a900<_0x463258['boneNames']['length'];_0x97a900++){const _0x2cf9e9=_0x463258['boneNames'][_0x97a900],_0x5b60b6=_0x5abc7c[0x1*0x2635+-0x3*0x4eb+-0x1774]['findByName'](_0x2cf9e9);_0x366515['push'](_0x5b60b6);}_0x49bf1b['bones']=_0x366515,_0x6e9ee8['push'](_0x49bf1b);}return{'skins':_0x2e5f1d,'instances':_0x6e9ee8};}['_getMorphV'+'ertexCount'](_0x253014,_0x1035af,_0x256e82){for(let _0x24c5bf=-0x17f+0x2*0xf95+-0x1dab;_0x24c5bf<_0x253014['meshes']['length'];_0x24c5bf++){const _0x420657=_0x253014['meshes'][_0x24c5bf];if(_0x420657['morph']===_0x1035af)return _0x256e82[_0x420657['vertices']]['numVertice'+'s'];}}['_parseMorp'+'hs'](_0x67f7d6,_0xb7e65,_0xbe747f){const _0x2a45b8=_0x67f7d6['model'],_0x374593=[],_0x473561=[];let _0x3bdccd,_0x9de28b,_0x6c02f9,_0x5f5753,_0x563d75,_0x52c1d0;if(_0x2a45b8['morphs']){const _0x5d8025=function(_0x47a48b,_0x150180,_0x203f3b){const _0x55155f=new Float32Array(_0x203f3b*(0x851*0x2+0x16c3+0x2*-0x13b1));for(let _0x2c2da6=0x1f44+0x1279+-0x31bd;_0x2c2da6<_0x150180['length'];_0x2c2da6++){const _0x4bd77b=_0x150180[_0x2c2da6]*(0x1309*0x1+-0xc73+-0x693);_0x55155f[_0x4bd77b]=_0x47a48b[_0x2c2da6*(-0x96c+0x10ab+-0x73c)],_0x55155f[_0x4bd77b+(-0x1632+-0x1d*0x141+0x3a90)]=_0x47a48b[_0x2c2da6*(0x1f5c+0x211b+-0x4074)+(-0x18d2+-0x251*0x1+0xc1*0x24)],_0x55155f[_0x4bd77b+(-0x1*0x15+0x174e+0x351*-0x7)]=_0x47a48b[_0x2c2da6*(-0x98a+0x203a+-0x16ad)+(-0x265b+-0x1f37*0x1+0x4594)];}return _0x55155f;};for(_0x3bdccd=0x3a*0x15+-0xa7*-0x19+-0x1*0x1511;_0x3bdccd<_0x2a45b8['morphs']['length'];_0x3bdccd++){for(_0x5f5753=_0x2a45b8['morphs'][_0x3bdccd]['targets'],_0x52c1d0=[],_0x6c02f9=this['_getMorphV'+'ertexCount'](_0x2a45b8,_0x3bdccd,_0xbe747f),_0x9de28b=-0x33b*0x8+-0x1*0x9eb+-0x5*-0x727;_0x9de28b<_0x5f5753['length'];_0x9de28b++){const _0x141ecd=_0x5f5753[_0x9de28b]['aabb'],_0x105d06=_0x141ecd['min'],_0x2ec3d0=_0x141ecd['max'],_0x201ac1=new De(new D((_0x2ec3d0[0x1*-0x1393+0x1aa+0x11e9]+_0x105d06[-0x1*-0xf8d+-0x10c+0x2f*-0x4f])*(-0x1*0x1a0a+0x21f3+-0x9*0xe1+0.5),(_0x2ec3d0[0x1*-0xcd6+0x4*0x74b+-0x1055]+_0x105d06[-0x955+-0x13*0x35+0x4f*0x2b])*(0x1544*-0x1+-0x1*-0x68f+0x4e7*0x3+0.5),(_0x2ec3d0[0x1c88+0x167d*0x1+-0x3303]+_0x105d06[0x2e*0x7d+0x13*-0x57+-0xfff])*(-0x1aa5+0x77f+0x1326+0.5)),new D((_0x2ec3d0[0x1*0x3b5+0x11*0x1a9+-0x1fee]-_0x105d06[-0x1bc7+0xcf5+0xed2])*(0x1029*0x1+-0xe90+-0x199+0.5),(_0x2ec3d0[-0x63*0xd+0xbed*-0x2+0x1ce2]-_0x105d06[-0x16f3+-0x2275+0x45*0xd5])*(-0x1*0x2687+-0x9d*0x5+0x2998+0.5),(_0x2ec3d0[0x146*-0x11+-0x1fbf+-0x1f*-0x1b9]-_0x105d06[0xb7b+-0x144b+-0x2*-0x469])*(-0x21fb+-0x2c+0x2227+0.5))),_0x3de146=_0x5f5753[_0x9de28b]['indices'];let _0x52b8a3=_0x5f5753[_0x9de28b]['deltaPosit'+'ions'],_0x4c1e1c=_0x5f5753[_0x9de28b]['deltaNorma'+'ls'];_0x3de146&&(_0x52b8a3=_0x5d8025(_0x52b8a3,_0x3de146,_0x6c02f9),_0x4c1e1c=_0x5d8025(_0x4c1e1c,_0x3de146,_0x6c02f9)),_0x563d75=new od({'deltaPositions':_0x52b8a3,'deltaNormals':_0x4c1e1c,'name':_0x5f5753[_0x9de28b]['name'],'aabb':_0x201ac1}),_0x52c1d0['push'](_0x563d75);}const _0x31bd9c=new Gp(_0x52c1d0,this['_device']);_0x374593['push'](_0x31bd9c);const _0x23dcca=new _a(_0x31bd9c);_0x473561['push'](_0x23dcca);}}return{'morphs':_0x374593,'instances':_0x473561};}['_parseVert'+'exBuffers'](_0x307d9e){const _0x5a6d42=_0x307d9e['model'],_0x27d644=[],_0x58306a={'position':Pe,'normal':gs,'tangent':yi,'blendWeight':gi,'blendIndices':us,'color':Wt,'texCoord0':is,'texCoord1':va,'texCoord2':hl,'texCoord3':dl,'texCoord4':fl,'texCoord5':ul,'texCoord6':pl,'texCoord7':ml};for(let _0x845047=-0x451*0x1+0x11*-0x239+0x150d*0x2;_0x845047<_0x5a6d42['vertices']['length'];_0x845047++){const _0x174078=_0x5a6d42['vertices'][_0x845047],_0x5dbac8=[];for(const _0x43a496 in _0x174078){const _0x412b28=_0x174078[_0x43a496];_0x5dbac8['push']({'semantic':_0x58306a[_0x43a496],'components':_0x412b28['components'],'type':zN[_0x412b28['type']],'normalize':_0x58306a[_0x43a496]===Wt});}const _0x112e64=new kt(this['_device'],_0x5dbac8),_0x3676ee=_0x174078['position']['data']['length']/_0x174078['position']['components'],_0x56360d=new Ds(this['_device'],_0x112e64,_0x3676ee),_0x47a438=new Ao(_0x56360d);for(let _0x50b046=0x13c2+-0xfb*-0x8+-0xdcd*0x2;_0x50b046<_0x3676ee;_0x50b046++){for(const _0x468cea in _0x174078){const _0x1c19ef=_0x174078[_0x468cea];switch(_0x1c19ef['components']){case 0x112*0x1d+0x1adc+-0x39e5:_0x47a438['element'][_0x58306a[_0x468cea]]['set'](_0x1c19ef['data'][_0x50b046]);break;case 0x4a5*-0x5+0x100f*0x1+-0x3*-0x264:_0x47a438['element'][_0x58306a[_0x468cea]]['set'](_0x1c19ef['data'][_0x50b046*(0x12aa+0x2*0x251+0x16*-0x10f)],-0xe*-0x13c+0x1f0*0xf+-0x1*0x2e57-_0x1c19ef['data'][_0x50b046*(-0x1*-0x1b59+-0x16*-0x12a+0xa97*-0x5)+(-0xbb+0x24da+-0x241e)]);break;case 0x1ff5+-0x4e0*-0x1+-0x24d2:_0x47a438['element'][_0x58306a[_0x468cea]]['set'](_0x1c19ef['data'][_0x50b046*(-0x1966*-0x1+0x20e4+-0x3a47)],_0x1c19ef['data'][_0x50b046*(0x1461+-0xd7+-0x1387)+(0xc7a+0x10d+-0xd86)],_0x1c19ef['data'][_0x50b046*(-0x58+0x8f+-0x34)+(-0x11a0+-0x4a6+-0x2c9*-0x8)]);break;case 0x4*0x153+0xe57+-0x139f:_0x47a438['element'][_0x58306a[_0x468cea]]['set'](_0x1c19ef['data'][_0x50b046*(0x10d*0x22+-0x10ea+0x1*-0x12cc)],_0x1c19ef['data'][_0x50b046*(-0x18d1+-0x3d8+0x1*0x1cad)+(0x2496+0x1bb7+-0x66e*0xa)],_0x1c19ef['data'][_0x50b046*(0x5f+0x1*0x6e6+0x3*-0x26b)+(0x9b6+-0xd02+0x2*0x1a7)],_0x1c19ef['data'][_0x50b046*(-0xac6+0xe0a+0x10*-0x34)+(-0x4f8+0x5d*0x1a+-0x477)]);break;}}_0x47a438['next']();}_0x47a438['end'](),_0x27d644['push'](_0x56360d);}return _0x27d644;}['_parseInde'+'xBuffers'](_0x2d0b8b,_0x52610a){const _0x44ffd5=_0x2d0b8b['model'];let _0x528624=null,_0x209cdf=null,_0x2f825c,_0x141fe3=-0xb65+-0x5d4*-0x4+-0xbeb;for(_0x2f825c=0x3*0x825+0x1*0xf95+-0x2804;_0x2f825c<_0x44ffd5['meshes']['length'];_0x2f825c++){const _0x2710f0=_0x44ffd5['meshes'][_0x2f825c];_0x2710f0['indices']!==void(-0x63*0x44+-0x1233*0x1+0x2c7f*0x1)&&(_0x141fe3+=_0x2710f0['indices']['length']);}let _0x175257=-0x10d9+-0x2*-0x5af+0x57b;for(_0x2f825c=-0x1d86*0x1+-0x362+-0x2*-0x1074;_0x2f825c<_0x52610a['length'];_0x2f825c++)_0x175257=Math['max'](_0x175257,_0x52610a[_0x2f825c]['numVertice'+'s']);return _0x141fe3>-0x141b*0x1+0x16c*-0x7+-0x39*-0x87&&(_0x175257>-0x1650f+-0x1ea3e+0x44f4c?(_0x528624=new xr(this['_device'],yr,_0x141fe3),_0x209cdf=new Uint32Array(_0x528624['lock']())):(_0x528624=new xr(this['_device'],ji,_0x141fe3),_0x209cdf=new Uint16Array(_0x528624['lock']()))),{'buffer':_0x528624,'data':_0x209cdf};}['_parseMesh'+'es'](_0x331ac1,_0x596be9,_0x2cacd,_0x4cd2e3,_0x456b80,_0x15c5d5){const _0x5901bb=_0x331ac1['model'],_0x4373bd=[];let _0x4d9acf=0x2b*-0x7b+0x1499+0x10;for(let _0x261cc0=0x1*-0x2192+0x383*0x4+0x1*0x1386;_0x261cc0<_0x5901bb['meshes']['length'];_0x261cc0++){const _0x262991=_0x5901bb['meshes'][_0x261cc0],_0x248a4f=_0x262991['aabb'],_0x2b661c=_0x248a4f['min'],_0x3946ab=_0x248a4f['max'],_0x166133=new De(new D((_0x3946ab[-0x26b9*-0x1+0x1451+0x1*-0x3b0a]+_0x2b661c[0x10bc+0x12af+-0x236b])*(-0x20c9+-0x1286*-0x1+0x1*0xe43+0.5),(_0x3946ab[-0x39c+-0x24ca+0x2867]+_0x2b661c[0x1*0x1007+0x1cbe*-0x1+0xcb8])*(-0xe7a+-0x9*0xd1+0x15d3+0.5),(_0x3946ab[-0x1*0x221+-0x2c7+0x4ea]+_0x2b661c[-0x12d*0x1b+0x52*-0x21+0x2a53])*(0x930+0x29*-0xa1+0x1099+0.5)),new D((_0x3946ab[-0x3*0xb7b+0x949+0x1928]-_0x2b661c[-0x17*-0x6a+-0x6*0x283+0x58c])*(0x1f96*-0x1+0x216e+-0x8*0x3b+0.5),(_0x3946ab[-0xe06+-0x5a*0x24+0x1aaf]-_0x2b661c[0x206+0x2*-0x1d5+-0x1*-0x1a5])*(-0x13b6+0x619+-0xd9d*-0x1+0.5),(_0x3946ab[0x1047+0x19*-0xa+0x519*-0x3]-_0x2b661c[-0x59*-0x53+0x1d4+0x1ead*-0x1])*(-0x1c5a+0x1999+0x2c1+0.5))),_0x5b9638=_0x262991['indices']!==void(0x35b*-0x4+-0x2*-0x261+0x8aa),_0x5b93de=new Ge(this['_device']);_0x5b93de['vertexBuff'+'er']=_0x4cd2e3[_0x262991['vertices']],_0x5b93de['indexBuffe'+'r'][0x1*0x23e2+-0x1*-0x252b+-0x490d*0x1]=_0x5b9638?_0x456b80:null,_0x5b93de['primitive'][-0x3*0x610+0x18bd+0x81*-0xd]['type']=BN[_0x262991['type']],_0x5b93de['primitive'][0x1bcd+-0x26b0+0x3*0x3a1]['base']=_0x5b9638?_0x262991['base']+_0x4d9acf:_0x262991['base'],_0x5b93de['primitive'][-0x2f2*-0x2+-0x64*0xa+-0x1fc]['count']=_0x262991['count'],_0x5b93de['primitive'][0x3de+-0x81*0x29+0x10cb*0x1]['indexed']=_0x5b9638,_0x5b93de['skin']=_0x262991['skin']!==void(-0x133*0x2+-0xfcc+-0x11*-0x112)?_0x596be9[_0x262991['skin']]:null,_0x5b93de['morph']=_0x262991['morph']!==void(0x11b+-0x595*0x3+0xfa4)?_0x2cacd[_0x262991['morph']]:null,_0x5b93de['aabb']=_0x166133,_0x5b9638&&(_0x15c5d5['set'](_0x262991['indices'],_0x4d9acf),_0x4d9acf+=_0x262991['indices']['length']),_0x4373bd['push'](_0x5b93de);}return _0x456b80!==null&&_0x456b80['unlock'](),_0x4373bd;}['_parseMesh'+'Instances'](_0x1463d6,_0x594006,_0x564d8b,_0x448214,_0x16a873,_0x1bdeba,_0x2851ce){const _0x10fb25=_0x1463d6['model'],_0x5f0257=[];let _0x50efb9;for(_0x50efb9=0x2395+-0x1ecf+-0x2*0x263;_0x50efb9<_0x10fb25['meshInstan'+'ces']['length'];_0x50efb9++){const _0x51f23b=_0x10fb25['meshInstan'+'ces'][_0x50efb9],_0x53ac5d=_0x594006[_0x51f23b['node']],_0x3cc22e=_0x564d8b[_0x51f23b['mesh']],_0x5053e6=new He(_0x3cc22e,this['_defaultMa'+'terial'],_0x53ac5d);if(_0x3cc22e['skin']){const _0x518700=_0x448214['indexOf'](_0x3cc22e['skin']);if(_0x518700===-(-0x1d7b+-0x3*0x13a+0x212a))throw new Error('Mesh\x27s\x20ski'+'n\x20does\x20not'+'\x20appear\x20in'+'\x20skin\x20arra'+'y.');_0x5053e6['skinInstan'+'ce']=_0x16a873[_0x518700];}if(_0x3cc22e['morph']){const _0x18e423=_0x1bdeba['indexOf'](_0x3cc22e['morph']);if(_0x18e423===-(-0x193d+-0x983*0x3+0x35c7))throw new Error('Mesh\x27s\x20mor'+'ph\x20does\x20no'+'t\x20appear\x20i'+'n\x20morph\x20ar'+'ray.');_0x5053e6['morphInsta'+'nce']=_0x2851ce[_0x18e423];}_0x5f0257['push'](_0x5053e6);}return _0x5f0257;}}class GN extends Qe{constructor(_0x27f6cd){super(_0x27f6cd,'model'),this['_parsers']=[],this['device']=_0x27f6cd['graphicsDe'+'vice'],this['assets']=_0x27f6cd['assets'],this['defaultMat'+'erial']=$n(this['device']),this['addParser'](new VN(this),(_0x4fae5f,_0x1cfdf5)=>xe['getExtensi'+'on'](_0x4fae5f)==='.json'),this['addParser'](new UN(this),(_0x416b89,_0x411202)=>xe['getExtensi'+'on'](_0x416b89)==='.glb');}['load'](_0x1f484c,_0x334b77,_0x5bcdcb){typeof _0x1f484c=='string'&&(_0x1f484c={'load':_0x1f484c,'original':_0x1f484c});const _0x16f39d={'retry':this['maxRetries']>0x6af+0x33*0xbe+-0x36d*0xd,'maxRetries':this['maxRetries']};(_0x1f484c['load']['startsWith']('blob:')||_0x1f484c['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x1f484c['original'])['toLowerCas'+'e']()==='.glb'?_0x16f39d['responseTy'+'pe']=Is['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x16f39d['responseTy'+'pe']=Is['ResponseTy'+'pe']['JSON']),ot['get'](_0x1f484c['load'],_0x16f39d,(_0x147448,_0x2d6de7)=>{if(_0x334b77){if(_0x147448)_0x334b77('Error\x20load'+'ing\x20model:'+'\x20'+_0x1f484c['original']+'\x20['+_0x147448+']');else{for(let _0x44da64=-0x115c+-0x2a5*0x2+0x16a6;_0x44da64<this['_parsers']['length'];_0x44da64++){const _0x3ac87e=this['_parsers'][_0x44da64];if(_0x3ac87e['decider'](_0x1f484c['original'],_0x2d6de7)){_0x3ac87e['parser']['parse'](_0x2d6de7,(_0x2052ba,_0x2468a2)=>{_0x2052ba?_0x334b77(_0x2052ba):_0x334b77(null,_0x2468a2);},_0x5bcdcb);return;}}_0x334b77('No\x20parsers'+'\x20found');}}});}['open'](_0x2fea90,_0x2ccd64){return _0x2ccd64;}['patch'](_0x5c583b,_0x28ebba){if(!_0x5c583b['resource'])return;const _0x47b7d6=_0x5c583b['data'],_0x2c379a=this;_0x5c583b['resource']['meshInstan'+'ces']['forEach']((_0x561669,_0x1d40b8)=>{if(_0x47b7d6['mapping']){const _0x465490=function(_0x338d93){_0x338d93['resource']?_0x561669['material']=_0x338d93['resource']:(_0x338d93['once']('load',_0x465490),_0x28ebba['load'](_0x338d93)),_0x338d93['once']('remove',_0x4a5060=>{_0x561669['material']===_0x4a5060['resource']&&(_0x561669['material']=_0x2c379a['defaultMat'+'erial']);});};if(!_0x47b7d6['mapping'][_0x1d40b8]){_0x561669['material']=_0x2c379a['defaultMat'+'erial'];return;}const _0x57b752=_0x47b7d6['mapping'][_0x1d40b8]['material'],_0x26292b=_0x47b7d6['mapping'][_0x1d40b8]['path'];let _0x57411d;if(_0x57b752!==void(0x10b1+-0x2*-0x11c6+-0x137*0x2b))_0x57b752?(_0x57411d=_0x28ebba['get'](_0x57b752),_0x57411d?_0x465490(_0x57411d):_0x28ebba['once']('add:'+_0x57b752,_0x465490)):_0x561669['material']=_0x2c379a['defaultMat'+'erial'];else{if(_0x26292b){const _0x67a376=_0x5c583b['getAbsolut'+'eUrl'](_0x47b7d6['mapping'][_0x1d40b8]['path']);_0x57411d=_0x28ebba['getByUrl'](_0x67a376),_0x57411d?_0x465490(_0x57411d):_0x28ebba['once']('add:url:'+_0x67a376,_0x465490);}}}});}['addParser'](_0x20ee65,_0x1db36e){this['_parsers']['push']({'parser':_0x20ee65,'decider':_0x1db36e});}}class HN extends Qe{constructor(_0x3ca976){super(_0x3ca976,'scene');}['load'](_0xe15f3c,_0xbdefd){Gv['load'](_0xe15f3c,this['maxRetries'],_0xbdefd);}['open'](_0x368569,_0x38195e){this['_app']['systems']['script']['preloading']=!(0xb4c+0x15c4+0x2e*-0xb8);const _0x4be29e=new Qp(this['_app'],!(0x8d3+-0x3*-0x121+-0xc35))['parse'](_0x38195e),_0x4de70c=this['_app']['scene'];return _0x4de70c['root']=_0x4be29e,this['_app']['applyScene'+'Settings'](_0x38195e['settings']),this['_app']['systems']['script']['preloading']=!(0xd67*-0x2+-0xcd6+0x255*0x11),_0x4de70c;}}const bh=class bh{static['push'](_0x30942f){bh['_types']['push'](_0x30942f);}};h(bh,'_types',[]);let ea=bh;const WN=new Set(['system','entity','create','destroy','swap','move','data','scripts','_scripts','_scriptsIn'+'dex','_scriptsDa'+'ta','enabled','_oldState','onEnable','onDisable','onPostStat'+'eChange','_onSetEnab'+'led','_checkStat'+'e','_onBeforeR'+'emove','_onInitial'+'izeAttribu'+'tes','_onInitial'+'ize','_onPostIni'+'tialize','_onUpdate','_onPostUpd'+'ate','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']),$N={};al['reservedNa'+'mes']['forEach']((_0x12801d,_0xb21537,_0x3b9ee2)=>{$N[_0x12801d]=-0x29a+-0x67f+-0xa*-0xe9;});function XN(_0x317bb8,_0x3f4d5c,_0x2ce988){if(typeof _0x317bb8!='function')throw new Error('script\x20cla'+'ss:\x20\x27'+_0x317bb8+('\x27\x20must\x20be\x20'+'a\x20construc'+'tor\x20functi'+'on\x20(i.e.\x20c'+'lass).'));if(!(_0x317bb8['prototype']instanceof ts))throw new Error('script\x20cla'+'ss:\x20\x27'+Lo['__getScrip'+'tName'](_0x317bb8)+('\x27\x20does\x20not'+'\x20extend\x20pc'+'.Script.'));if(_0x3f4d5c=_0x3f4d5c||_0x317bb8['__name']||Lo['__getScrip'+'tName'](_0x317bb8),WN['has'](_0x3f4d5c))throw new Error('script\x20nam'+'e:\x20\x27'+_0x3f4d5c+('\x27\x20is\x20reser'+'ved,\x20pleas'+'e\x20change\x20s'+'cript\x20name'));_0x317bb8['__name']=_0x3f4d5c,Ks['getApplica'+'tion']()['scripts']['add'](_0x317bb8),ea['push'](_0x317bb8);}const qN=_0x52e0dd=>_0x52e0dd[0x1*0x1f49+-0x5e+-0x1eeb*0x1]['toLowerCas'+'e']()+_0x52e0dd['substring'](-0xe03+0x2093+-0x128f);class jN extends Qe{constructor(_0x53d91c){super(_0x53d91c,'script'),this['_scripts']={},this['_cache']={};}['clearCache'](){for(const _0x4e5739 in this['_cache']){const _0x1e6697=this['_cache'][_0x4e5739],_0x1cb7b2=_0x1e6697['parentNode'];_0x1cb7b2&&_0x1cb7b2['removeChil'+'d'](_0x1e6697);}this['_cache']={};}['load'](_0x5eb75a,_0x255eb1){typeof _0x5eb75a=='string'&&(_0x5eb75a={'load':_0x5eb75a,'original':_0x5eb75a});const _0x3b0be6=this;this['_app'];const _0xf5d893=(_0x5eb75a['load'],(_0x30181a,_0xc20423,_0x7b1d9f)=>{if(_0x30181a)_0x255eb1(_0x30181a);else{const _0x5f4a39={};for(let _0x31251a=-0x1873+-0x1957+0x31ca;_0x31251a<ea['_types']['length'];_0x31251a++)_0x5f4a39[ea['_types'][_0x31251a]['name']]=ea['_types'][_0x31251a];ea['_types']['length']=0x13c8+-0x1*-0x305+-0x16cd,_0x255eb1(null,_0x5f4a39,_0x7b1d9f);const _0x4442f0=_0xc20423['split']('&hash=')[0x145+0x113a+-0x127f];delete _0x3b0be6['_loader']['_cache'][vn['makeKey'](_0x4442f0,'script')];}}),[_0x2535d7]=_0x5eb75a['load']['split']('?');_0x2535d7['endsWith']('.mjs')?this['_loadModul'+'e'](_0x2535d7,_0xf5d893):this['_loadScrip'+'t'](_0x5eb75a['load'],_0xf5d893);}['open'](_0x27b9d3,_0x482e20){return _0x482e20;}['patch'](_0xe476ac,_0x511244){}['_loadScrip'+'t'](_0x77af7b,_0x418cbc){const _0x57099d=document['head'],_0x3477f4=document['createElem'+'ent']('script');this['_cache'][_0x77af7b]=_0x3477f4,_0x3477f4['async']=!(-0x8b*0xa+0x1d9e+-0x97*0x29),_0x3477f4['addEventLi'+'stener']('error',_0x31feb6=>{_0x418cbc('Script:\x20'+_0x31feb6['target']['src']+('\x20failed\x20to'+'\x20load'));},!(-0x2ae*-0x2+-0xa7*-0x1b+-0x14*0x126));let _0xd8aa06=!(0x50e*0x6+0x52*0x6d+0x13*-0x36f);_0x3477f4['onload']=_0x3477f4['onreadysta'+'techange']=function(){!_0xd8aa06&&(!this['readyState']||this['readyState']==='loaded'||this['readyState']==='complete')&&(_0xd8aa06=!(-0xfea+-0xdd3*-0x1+0x217),_0x418cbc(null,_0x77af7b,_0x3477f4));},_0x3477f4['src']=_0x77af7b,_0x57099d['appendChil'+'d'](_0x3477f4);}['_loadModul'+'e'](_0x36effb,_0xa64b89){const _0x2197ed=Me['browser']&&window['location']['origin']!=='null'?window['location']['origin']+window['location']['pathname']:import.meta['url'],_0xc9abaf=new URL(_0x36effb,_0x2197ed);import(_0xc9abaf['toString']())['then'](_0x1a9ae5=>{var _0x2729a2,_0x27ab1f;const _0x3e78a0=_0xc9abaf['pathname']['split']('/')['pop'](),_0x21a67f=(_0x27ab1f=(_0x2729a2=this['_app']['assets']['find'](_0x3e78a0,'script'))==null?void(0xcf*-0x3+0x7*-0x231+0x11c4):_0x2729a2['data'])==null?void(-0x2*-0x134+0x6cd*-0x1+0x465):_0x27ab1f['scripts'];for(const _0x8ffe5e in _0x1a9ae5){const _0x81763d=_0x1a9ae5[_0x8ffe5e];if(_0x81763d['prototype']instanceof ts){const _0x4b6144=qN(_0x81763d['name']);_0x81763d['scriptName']||w['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x81763d['name']+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x81763d['name']+('.scriptNam'+'e\x20=\x20\x22')+_0x4b6144+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.'));const _0x2e74ef=_0x81763d['scriptName']??_0x4b6144;XN(_0x81763d,_0x2e74ef),_0x21a67f&&this['_app']['scripts']['addSchema'](_0x2e74ef,_0x21a67f[_0x2e74ef]);}}_0xa64b89(null,_0x36effb,null);})['catch'](_0xefa8bf=>{_0xa64b89(_0xefa8bf);});}}class YN extends Qe{constructor(_0x3d8bb4){super(_0x3d8bb4,'shader'),h(this,'decoder',null);}['load'](_0x1311e1,_0x2a47a4){typeof _0x1311e1=='string'&&(_0x1311e1={'load':_0x1311e1,'original':_0x1311e1}),ot['get'](_0x1311e1['load'],{'retry':this['maxRetries']>0x97*-0x17+0x1a31+-0xca0,'maxRetries':this['maxRetries']},(_0x482a4a,_0x4efb09)=>{_0x482a4a?_0x2a47a4('Error\x20load'+'ing\x20shader'+'\x20resource:'+'\x20'+_0x1311e1['original']+'\x20['+_0x482a4a+']'):_0x2a47a4(null,_0x4efb09);});}['openBinary'](_0x24c846){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x24c846);}}function nf(_0xf555c2){const _0x142f67=this;_0x142f67['resource']&&(_0x142f67['resource']['atlas']=_0xf555c2['resource']);}function of(_0x474788){this['registry']['load'](_0x474788);}class KN extends Qe{constructor(_0xedc7ab){super(_0xedc7ab,'sprite'),this['_assets']=_0xedc7ab['assets'],this['_device']=_0xedc7ab['graphicsDe'+'vice'];}['load'](_0x524e02,_0x51b432){typeof _0x524e02=='string'&&(_0x524e02={'load':_0x524e02,'original':_0x524e02}),xe['getExtensi'+'on'](_0x524e02['original'])==='.json'&&ot['get'](_0x524e02['load'],{'retry':this['maxRetries']>0x174c+0xe9c+-0x25e8,'maxRetries':this['maxRetries']},(_0x2302ed,_0x29bcec)=>{_0x2302ed?_0x51b432(_0x2302ed):_0x51b432(null,_0x29bcec);});}['open'](_0x5a6721,_0x2332d6){const _0x3f6975=new iA(this['_device']);return _0x5a6721&&(_0x3f6975['__data']=_0x2332d6),_0x3f6975;}['patch'](_0x206dbb,_0x3285a9){const _0x258460=_0x206dbb['resource'];if(_0x258460['__data']&&(_0x206dbb['data']['pixelsPerU'+'nit']=_0x258460['__data']['pixelsPerU'+'nit'],_0x206dbb['data']['renderMode']=_0x258460['__data']['renderMode'],_0x206dbb['data']['frameKeys']=_0x258460['__data']['frameKeys'],_0x258460['__data']['textureAtl'+'asAsset'])){const _0x5a61d9=_0x3285a9['getByUrl'](_0x258460['__data']['textureAtl'+'asAsset']);_0x5a61d9?_0x206dbb['data']['textureAtl'+'asAsset']=_0x5a61d9['id']:console['warn']('Could\x20not\x20'+'find\x20textu'+'reatlas\x20wi'+'th\x20url:\x20'+_0x258460['__data']['textureAtl'+'asAsset']);}_0x258460['startUpdat'+'e'](),_0x258460['renderMode']=_0x206dbb['data']['renderMode'],_0x258460['pixelsPerU'+'nit']=_0x206dbb['data']['pixelsPerU'+'nit'],_0x258460['frameKeys']=_0x206dbb['data']['frameKeys'],this['_updateAtl'+'as'](_0x206dbb),_0x258460['endUpdate'](),_0x206dbb['off']('change',this['_onAssetCh'+'ange'],this),_0x206dbb['on']('change',this['_onAssetCh'+'ange'],this);}['_updateAtl'+'as'](_0x229b26){const _0x81738=_0x229b26['resource'];if(!_0x229b26['data']['textureAtl'+'asAsset']){_0x81738['atlas']=null;return;}this['_assets']['off']('load:'+_0x229b26['data']['textureAtl'+'asAsset'],nf,_0x229b26),this['_assets']['on']('load:'+_0x229b26['data']['textureAtl'+'asAsset'],nf,_0x229b26);const _0x369938=this['_assets']['get'](_0x229b26['data']['textureAtl'+'asAsset']);_0x369938&&_0x369938['resource']?_0x81738['atlas']=_0x369938['resource']:_0x369938?this['_assets']['load'](_0x369938):(this['_assets']['off']('add:'+_0x229b26['data']['textureAtl'+'asAsset'],of,_0x229b26),this['_assets']['on']('add:'+_0x229b26['data']['textureAtl'+'asAsset'],of,_0x229b26));}['_onAssetCh'+'ange'](_0x4142cf,_0x30d74d,_0x283932,_0x192283){_0x30d74d==='data'&&_0x283932&&_0x283932['textureAtl'+'asAsset']&&_0x192283&&_0x283932['textureAtl'+'asAsset']!==_0x192283['textureAtl'+'asAsset']&&(this['_assets']['off']('load:'+_0x192283['textureAtl'+'asAsset'],nf,_0x4142cf),this['_assets']['off']('add:'+_0x192283['textureAtl'+'asAsset'],of,_0x4142cf));}}class $g{constructor(_0x56f2a6,_0x436b99){h(this,'_app'),h(this,'_data'),h(this,'_templateR'+'oot',null),(this['_app']=_0x56f2a6,this['_data']=_0x436b99);}['instantiat'+'e'](){return this['_templateR'+'oot']||this['_parseTemp'+'late'](),this['_templateR'+'oot']['clone']();}['_parseTemp'+'late'](){const _0x1d29ad=new Qp(this['_app'],!(0x1efe+-0x2635*-0x1+-0x4533*0x1));this['_templateR'+'oot']=_0x1d29ad['parse'](this['_data']);}}class ZN extends Qe{constructor(_0x27f624){super(_0x27f624,'template'),h(this,'decoder',null);}['load'](_0x4757e7,_0x158c6e){typeof _0x4757e7=='string'&&(_0x4757e7={'load':_0x4757e7,'original':_0x4757e7});const _0x4c0209={'retry':this['maxRetries']>-0x275*0x4+-0x1468*0x1+-0xa14*-0x3,'maxRetries':this['maxRetries']};ot['get'](_0x4757e7['load'],_0x4c0209,(_0x76bebf,_0x1c5c19)=>{_0x76bebf?_0x158c6e('Error\x20requ'+'esting\x20tem'+'plate:\x20'+_0x4757e7['original']):_0x158c6e(_0x76bebf,_0x1c5c19);});}['open'](_0x4e7b5f,_0x17620a){return new $g(this['_app'],_0x17620a);}['openBinary'](_0x12282e){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),new $g(this['_app'],JSON['parse'](this['decoder']['decode'](_0x12282e)));}}class QN extends Qe{constructor(_0x5121c4){super(_0x5121c4,'text'),h(this,'decoder',null);}['load'](_0x26101f,_0x31f106){typeof _0x26101f=='string'&&(_0x26101f={'load':_0x26101f,'original':_0x26101f}),ot['get'](_0x26101f['load'],{'retry':this['maxRetries']>0x1*0x243c+0x1360+-0xde7*0x4,'maxRetries':this['maxRetries']},(_0x569cb2,_0x1aeba6)=>{_0x569cb2?_0x31f106('Error\x20load'+'ing\x20text\x20r'+'esource:\x20'+_0x26101f['original']+'\x20['+_0x569cb2+']'):_0x31f106(null,_0x1aeba6);});}['openBinary'](_0x4635a3){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x4635a3);}}const gc={'repeat':yt,'clamp':ue,'mirror':Du},Sc={'nearest':Te,'linear':vt,'nearest_mip_nearest':Ph,'linear_mip_nearest':Dh,'nearest_mip_linear':Mh,'linear_mip_linear':ha},JN=/^data\.frames\.(\d+)$/;class ek extends Qe{constructor(_0x4f3ea2){super(_0x4f3ea2,'textureatl'+'as'),this['_loader']=_0x4f3ea2['loader'];}['load'](_0x2e3c0c,_0x47506d){typeof _0x2e3c0c=='string'&&(_0x2e3c0c={'load':_0x2e3c0c,'original':_0x2e3c0c});const _0x130be4=this,_0x314664=this['_loader']['getHandler']('texture');xe['getExtensi'+'on'](_0x2e3c0c['original'])==='.json'?ot['get'](_0x2e3c0c['load'],{'retry':this['maxRetries']>-0xa57+-0xcc5+0x171c,'maxRetries':this['maxRetries']},(_0x2dcba6,_0x2b83a7)=>{if(_0x2dcba6)_0x47506d(_0x2dcba6);else{const _0x389d80=_0x2e3c0c['original']['replace']('.json','.png');_0x130be4['_loader']['load'](_0x389d80,'texture',(_0x561b3a,_0x250aa4)=>{_0x561b3a?_0x47506d(_0x561b3a):_0x47506d(null,{'data':_0x2b83a7,'texture':_0x250aa4});});}}):_0x314664['load'](_0x2e3c0c,_0x47506d);}['open'](_0xbf1057,_0x415c96,_0x4f7434){const _0x343470=new rA();if(_0x415c96['texture']&&_0x415c96['data'])_0x343470['texture']=_0x415c96['texture'],_0x343470['__data']=_0x415c96['data'];else{const _0x15e070=this['_loader']['getHandler']('texture')['open'](_0xbf1057,_0x415c96,_0x4f7434);if(!_0x15e070)return null;_0x343470['texture']=_0x15e070;}return _0x343470;}['patch'](_0x48ef33,_0x39daf9){if(!_0x48ef33['resource'])return;_0x48ef33['resource']['__data']&&(_0x48ef33['resource']['__data']['minfilter']!==void(-0x1f72+-0xb*0x221+-0x109*-0x35)&&(_0x48ef33['data']['minfilter']=_0x48ef33['resource']['__data']['minfilter']),_0x48ef33['resource']['__data']['magfilter']!==void(-0x8a+-0xdd4+0xe5e)&&(_0x48ef33['data']['magfilter']=_0x48ef33['resource']['__data']['magfilter']),_0x48ef33['resource']['__data']['addressu']!==void(-0x13f5*0x1+-0x166*-0x2+0x1129)&&(_0x48ef33['data']['addressu']=_0x48ef33['resource']['__data']['addressu']),_0x48ef33['resource']['__data']['addressv']!==void(0x38f+0xcb2+-0x1041)&&(_0x48ef33['data']['addressv']=_0x48ef33['resource']['__data']['addressv']),_0x48ef33['resource']['__data']['mipmaps']!==void(-0x1888+-0x62*0x35+0x2cd2)&&(_0x48ef33['data']['mipmaps']=_0x48ef33['resource']['__data']['mipmaps']),_0x48ef33['resource']['__data']['anisotropy']!==void(0x1618+0x2288+-0x38a0)&&(_0x48ef33['data']['anisotropy']=_0x48ef33['resource']['__data']['anisotropy']),_0x48ef33['resource']['__data']['rgbm']!==void(0x10d*0x1a+0x214c+-0x1*0x3c9e)&&(_0x48ef33['data']['rgbm']=!!_0x48ef33['resource']['__data']['rgbm']),_0x48ef33['data']['frames']=_0x48ef33['resource']['__data']['frames'],delete _0x48ef33['resource']['__data']);const _0x58787b=_0x48ef33['resource']['texture'];if(_0x58787b&&(_0x58787b['name']=_0x48ef33['name'],_0x48ef33['data']['hasOwnProp'+'erty']('minfilter')&&_0x58787b['minFilter']!==Sc[_0x48ef33['data']['minfilter']]&&(_0x58787b['minFilter']=Sc[_0x48ef33['data']['minfilter']]),_0x48ef33['data']['hasOwnProp'+'erty']('magfilter')&&_0x58787b['magFilter']!==Sc[_0x48ef33['data']['magfilter']]&&(_0x58787b['magFilter']=Sc[_0x48ef33['data']['magfilter']]),_0x48ef33['data']['hasOwnProp'+'erty']('addressu')&&_0x58787b['addressU']!==gc[_0x48ef33['data']['addressu']]&&(_0x58787b['addressU']=gc[_0x48ef33['data']['addressu']]),_0x48ef33['data']['hasOwnProp'+'erty']('addressv')&&_0x58787b['addressV']!==gc[_0x48ef33['data']['addressv']]&&(_0x58787b['addressV']=gc[_0x48ef33['data']['addressv']]),_0x48ef33['data']['hasOwnProp'+'erty']('mipmaps')&&_0x58787b['mipmaps']!==_0x48ef33['data']['mipmaps']&&(_0x58787b['mipmaps']=_0x48ef33['data']['mipmaps']),_0x48ef33['data']['hasOwnProp'+'erty']('anisotropy')&&_0x58787b['anisotropy']!==_0x48ef33['data']['anisotropy']&&(_0x58787b['anisotropy']=_0x48ef33['data']['anisotropy']),_0x48ef33['data']['hasOwnProp'+'erty']('rgbm'))){const _0x524bc5=_0x48ef33['data']['rgbm']?Ki:Ms;_0x58787b['type']!==_0x524bc5&&(_0x58787b['type']=_0x524bc5);}_0x48ef33['resource']['texture']=_0x58787b;const _0x377eaa={};for(const _0x1916ce in _0x48ef33['data']['frames']){const _0x371cc5=_0x48ef33['data']['frames'][_0x1916ce];_0x377eaa[_0x1916ce]={'rect':new re(_0x371cc5['rect']),'pivot':new J(_0x371cc5['pivot']),'border':new re(_0x371cc5['border'])};}_0x48ef33['resource']['frames']=_0x377eaa,_0x48ef33['off']('change',this['_onAssetCh'+'ange'],this),_0x48ef33['on']('change',this['_onAssetCh'+'ange'],this);}['_onAssetCh'+'ange'](_0xc8ec5d,_0x283019,_0x458b3f){let _0x3cdd6b;if(_0x283019==='data'||_0x283019==='data.frame'+'s'){const _0x392f3f={};for(const _0x2ae022 in _0x458b3f['frames'])_0x3cdd6b=_0x458b3f['frames'][_0x2ae022],_0x392f3f[_0x2ae022]={'rect':new re(_0x3cdd6b['rect']),'pivot':new J(_0x3cdd6b['pivot']),'border':new re(_0x3cdd6b['border'])};_0xc8ec5d['resource']['frames']=_0x392f3f;}else{const _0x50fc20=_0x283019['match'](JN);if(_0x50fc20){const _0x3502f5=_0x50fc20[0x526*-0x3+-0x87a+0x17ed];_0x458b3f?(_0xc8ec5d['resource']['frames'][_0x3502f5]?(_0x3cdd6b=_0xc8ec5d['resource']['frames'][_0x3502f5],_0x3cdd6b['rect']['set'](_0x458b3f['rect'][-0x6aa+-0x3*-0x5cb+-0xab7],_0x458b3f['rect'][0x2*0x635+-0x1357+0x377*0x2],_0x458b3f['rect'][-0x4a*0xa+-0x1*-0x767+0x481*-0x1],_0x458b3f['rect'][0x163+-0x5c5+-0x3*-0x177]),_0x3cdd6b['pivot']['set'](_0x458b3f['pivot'][0xc2d*-0x1+0x199b+-0xd6e],_0x458b3f['pivot'][-0x1ab+0x1*-0xc23+0xdcf]),_0x3cdd6b['border']['set'](_0x458b3f['border'][-0x420+0x2701+-0x22e1],_0x458b3f['border'][0x88d+0xed5*0x1+-0x1761],_0x458b3f['border'][-0x156d+-0x2045+0x7*0x7ac],_0x458b3f['border'][0x5*-0x653+0x11*-0x1b4+0x40a*0xf])):_0xc8ec5d['resource']['frames'][_0x3502f5]={'rect':new re(_0x458b3f['rect']),'pivot':new J(_0x458b3f['pivot']),'border':new re(_0x458b3f['border'])},_0xc8ec5d['resource']['fire']('set:frame',_0x3502f5,_0xc8ec5d['resource']['frames'][_0x3502f5])):_0xc8ec5d['resource']['frames'][_0x3502f5]&&(delete _0xc8ec5d['resource']['frames'][_0x3502f5],_0xc8ec5d['resource']['fire']('remove:fra'+'me',_0x3502f5));}}}}function tk(){const _0xaa22ee={'cTFETC1':0x0,'cTFETC2':0x1,'cTFBC1':0x2,'cTFBC3':0x3,'cTFPVRTC1_4_RGB':0x8,'cTFPVRTC1_4_RGBA':0x9,'cTFASTC_4x4':0xa,'cTFATC_RGB':0xb,'cTFATC_RGBA_INTERPOLATED_ALPHA':0xc,'cTFRGBA32':0xd,'cTFRGB565':0xe,'cTFRGBA4444':0x10},_0x150dfe={'astc':_0xaa22ee['cTFASTC_4x'+'4'],'dxt':_0xaa22ee['cTFBC1'],'etc1':_0xaa22ee['cTFETC1'],'etc2':_0xaa22ee['cTFETC1'],'pvr':_0xaa22ee['cTFPVRTC1_'+'4_RGB'],'atc':_0xaa22ee['cTFATC_RGB'],'none':_0xaa22ee['cTFRGB565']},_0x475168={'astc':_0xaa22ee['cTFASTC_4x'+'4'],'dxt':_0xaa22ee['cTFBC3'],'etc1':_0xaa22ee['cTFRGBA444'+'4'],'etc2':_0xaa22ee['cTFETC2'],'pvr':_0xaa22ee['cTFPVRTC1_'+'4_RGBA'],'atc':_0xaa22ee['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA'],'none':_0xaa22ee['cTFRGBA444'+'4']},_0x584c17={'ETC1':0x15,'ETC2_RGB':0x16,'ETC2_RGBA':0x17,'DXT1':0x8,'DXT5':0xa,'PVRTC_4BPP_RGB_1':0x1a,'PVRTC_4BPP_RGBA_1':0x1b,'ASTC_4x4':0x1c,'ATC_RGB':0x1d,'ATC_RGBA':0x1e,'R8_G8_B8_A8':0x7,'R5_G6_B5':0x3,'R4_G4_B4_A4':0x5},_0x490f3f=(_0x2f6143,_0x3731b3)=>{switch(_0x2f6143){case _0xaa22ee['cTFETC1']:return _0x3731b3['formats']['etc2']?_0x584c17['ETC2_RGB']:_0x584c17['ETC1'];case _0xaa22ee['cTFETC2']:return _0x584c17['ETC2_RGBA'];case _0xaa22ee['cTFBC1']:return _0x584c17['DXT1'];case _0xaa22ee['cTFBC3']:return _0x584c17['DXT5'];case _0xaa22ee['cTFPVRTC1_'+'4_RGB']:return _0x584c17['PVRTC_4BPP'+'_RGB_1'];case _0xaa22ee['cTFPVRTC1_'+'4_RGBA']:return _0x584c17['PVRTC_4BPP'+'_RGBA_1'];case _0xaa22ee['cTFASTC_4x'+'4']:return _0x584c17['ASTC_4x4'];case _0xaa22ee['cTFATC_RGB']:return _0x584c17['ATC_RGB'];case _0xaa22ee['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return _0x584c17['ATC_RGBA'];case _0xaa22ee['cTFRGBA32']:return _0x584c17['R8_G8_B8_A'+'8'];case _0xaa22ee['cTFRGB565']:return _0x584c17['R5_G6_B5'];case _0xaa22ee['cTFRGBA444'+'4']:return _0x584c17['R4_G4_B4_A'+'4'];}},_0x2c5889=_0x33735d=>{const _0x11f4f9=function(_0x45cbec,_0x559636){const _0x52bcaf=_0x45cbec*(0xa3f*0x3+-0x1151+0x6b6*-0x2+0.00784313725490196)-(-0x1*0xab2+0x704+0x3af*0x1),_0xaf6282=_0x559636*((0x431+0x26a0+0xd*-0x34b)/(-0x11eb+-0xfee+0x1*0x22d8))-(0x141b*0x1+0x8a0+-0x1cba),_0x1014eb=Math['sqrt'](0x1*0x5ec+0x1189+-0x1774-Math['min'](0xf*-0x2f+0x8c2+0x8*-0xc0,_0x52bcaf*_0x52bcaf+_0xaf6282*_0xaf6282));return Math['max'](-0xbd9+0x2153+0x2*-0xabd,Math['min'](0x2571+-0x6*-0x314+-0x36ea,Math['floor']((_0x1014eb+(0x148f+0x7cf+-0x1*0x1c5d))*(0x26e1+-0x1*-0x1c7c+-0x435d*0x1+0.5)*(-0xee9+0x1*-0x1a5f+-0x2a47*-0x1))));};for(let _0x2f3108=-0x1*-0x1523+0x32*0x5+-0x161d;_0x2f3108<_0x33735d['length'];_0x2f3108+=0x1*0x1655+0x26c*0x7+-0x2745){const _0x2cc8e2=_0x33735d[_0x2f3108+(0x2*-0xfad+-0x3*-0xbe1+-0x446)],_0x164a7f=_0x33735d[_0x2f3108+(0x7c1*0x4+-0x1*-0x1f9f+-0x3ea2)];_0x33735d[_0x2f3108+(0x35*-0x5b+0xf1*-0x19+0x2a60)]=_0x2cc8e2,_0x33735d[_0x2f3108+(0x1a11+-0xc*-0x2dd+-0x3c6b)]=_0x11f4f9(_0x2cc8e2,_0x164a7f),_0x33735d[_0x2f3108+(0x2b6+0xa1+-0x354)]=0x2578+0x7da+-0x2c53;}return _0x33735d;},_0x127d4a=_0x1fde5b=>{const _0x46f9b7=new Uint16Array(_0x1fde5b['length']/(-0x1f8f+0x4*0x22b+-0xd*-0x1c3));for(let _0x478180=0x231b+-0xc09+0x1712*-0x1;_0x478180<_0x1fde5b['length'];_0x478180+=-0x912+0x2*0x975+-0x25*0x44){const _0x1f1d51=_0x1fde5b[_0x478180+(-0x32*0xbf+0x1d48+-0x2*-0x403)],_0xc630d3=_0x1fde5b[_0x478180+(-0xe7*-0x11+0x1ec5+-0x25*0x13f)],_0x5c1507=_0x1fde5b[_0x478180+(0x1fe2+-0x26b5*0x1+0x6d5)];_0x46f9b7[_0x478180/(-0x1257+-0x4*-0x78d+-0xbd9*0x1)]=(_0x1f1d51&-0x2579+0x83*0x2b+0x1070)<<0x983+0x2068*-0x1+-0x1*-0x16ed|(_0xc630d3&0x21*-0x1+-0x17d*0x1+0x29a)<<-0x2*-0xf5+0x1e45+-0x202c|_0x5c1507>>-0x19cd*-0x1+0xd9e+-0x2768;}return _0x46f9b7;},_0x4717da=(_0x467e7e,_0x51b802)=>(_0x467e7e&_0x467e7e-(-0x3de+0x10f*-0x5+0x92a))===0xd53+0xca9+-0x19fc&&(_0x51b802&_0x51b802-(0x1*-0x179f+0x4*-0x8f4+0x3b70))===0x26f6*0x1+-0x1464+-0x2*0x949,_0x4990c4=()=>typeof performance<'u'?performance['now']():-0x1*0x1ad5+-0x25fd+0x40d2;let _0x1a521e,_0x4ed5e5,_0xacab2c;const _0x1ffbb7=(_0x50c90a,_0x15045d,_0x13d849)=>{if(_0x13d849){if(_0x50c90a['formats']['astc'])return'astc';}else{if(_0x15045d){if(_0x50c90a['formats']['etc2'])return'etc2';}else{if(_0x50c90a['formats']['etc2'])return'etc2';if(_0x50c90a['formats']['etc1'])return'etc1';}}return(_0x6d8fa=>{for(let _0x40c41f=0x3a3+-0x1327+0xf84;_0x40c41f<_0x6d8fa['length'];++_0x40c41f){const _0x5b51a0=_0x6d8fa[_0x40c41f];if(_0x50c90a['formats'][_0x5b51a0])return _0x5b51a0;}return'none';})(_0x15045d?_0xacab2c:_0x4ed5e5);},_0x5c788e=(_0x9feedc,_0x3a476b,_0x22285d)=>{switch(_0x22285d){case _0xaa22ee['cTFETC1']:case _0xaa22ee['cTFETC2']:return!(0xd*0x47+0x9d7+-0xd72);case _0xaa22ee['cTFBC1']:case _0xaa22ee['cTFBC3']:return(_0x9feedc&-0x300+-0x25*0x6f+-0x1*-0x130e)===0x1*0x2290+-0xc49+-0x1647&&(_0x3a476b&0x96*-0x2b+0x15*0xd1+0x810)===0x22c7+-0x7*-0x30b+0x4*-0xe05;case _0xaa22ee['cTFPVRTC1_'+'4_RGB']:case _0xaa22ee['cTFPVRTC1_'+'4_RGBA']:return _0x4717da(_0x9feedc,_0x3a476b);case _0xaa22ee['cTFASTC_4x'+'4']:return!(-0x2295+0xa74+-0x47*-0x57);case _0xaa22ee['cTFATC_RGB']:case _0xaa22ee['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return!(0x1af1+0x15b*-0x17+0x43c);}return!(0x6*0x3d7+0x1a83*0x1+-0x318c);},_0x140ca5=(_0x2be975,_0x2aae9c,_0xba66e1)=>{if(!_0x1a521e['KTX2File'])throw new Error('Basis\x20tran'+'scoder\x20mod'+'ule\x20does\x20n'+'ot\x20include'+'\x20support\x20f'+'or\x20KTX2.');const _0x183f8d=_0x4990c4(),_0x264089=new _0x1a521e['KTX2File'](new Uint8Array(_0x2aae9c)),_0x2facd2=_0x264089['getWidth'](),_0x1f51e9=_0x264089['getHeight'](),_0x3eb614=_0x264089['getLevels'](),_0x4f0695=!!_0x264089['getHasAlph'+'a'](),_0x197f80=_0x264089['isUASTC']&&_0x264089['isUASTC']();if(!_0x2facd2||!_0x1f51e9||!_0x3eb614)throw _0x264089['close'](),_0x264089['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x2be975+'\x20width='+_0x2facd2+'\x20height='+_0x1f51e9+'\x20levels='+_0x3eb614);const _0x20fe89=_0x1ffbb7(_0xba66e1['deviceDeta'+'ils'],_0x4f0695,_0x197f80),_0x558b6c=!!_0xba66e1['isGGGR']&&_0x20fe89==='pvr';let _0x2891d7;if(_0x558b6c?_0x2891d7=_0xaa22ee['cTFRGBA32']:(_0x2891d7=_0x4f0695?_0x475168[_0x20fe89]:_0x150dfe[_0x20fe89],_0x5c788e(_0x2facd2,_0x1f51e9,_0x2891d7)||(_0x2891d7=_0x4f0695?_0xaa22ee['cTFRGBA32']:_0xaa22ee['cTFRGB565'])),!_0x264089['startTrans'+'coding']())throw _0x264089['close'](),_0x264089['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x2be975);let _0x26f9e7;const _0x29bd76=[];for(let _0x278964=0x1*-0xcb+-0x237+0x302;_0x278964<_0x3eb614;++_0x278964){const _0x196aa5=_0x264089['getImageTr'+'anscodedSi'+'zeInBytes'](_0x278964,0x8*0x182+-0x69b+-0x575,0x1d2a*-0x1+0x8ec*-0x1+0x96*0x41,_0x2891d7),_0x902a43=new Uint8Array(_0x196aa5);if(!_0x264089['transcodeI'+'mage'](_0x902a43,_0x278964,0x2353+0x1*0x17cb+0x292*-0x17,-0x2*0x116c+0x11a5*-0x1+-0x1*-0x347d,_0x2891d7,-0x17f6+-0x3c*-0x26+0xf0e,-(-0x117d+-0x1ac2+0x2c40),-(0x11*-0x121+0x1741+-0x40f)))throw _0x264089['close'](),_0x264089['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x2be975);const _0x33829b=_0x2891d7===_0xaa22ee['cTFRGB565']||_0x2891d7===_0xaa22ee['cTFRGBA444'+'4'];_0x29bd76['push'](_0x33829b?new Uint16Array(_0x902a43['buffer']):_0x902a43);}if(_0x264089['close'](),_0x264089['delete'](),_0x558b6c){for(_0x2891d7=_0xaa22ee['cTFRGB565'],_0x26f9e7=-0x2f*0x92+0x17bb+0x313;_0x26f9e7<_0x29bd76['length'];++_0x26f9e7)_0x29bd76[_0x26f9e7]=_0x127d4a(_0x2c5889(_0x29bd76[_0x26f9e7]));}return{'format':_0x490f3f(_0x2891d7,_0xba66e1['deviceDeta'+'ils']),'width':_0x2facd2,'height':_0x1f51e9,'levels':_0x29bd76,'cubemap':!(-0xe*-0x232+-0x16df+-0x7dc),'transcodeTime':_0x4990c4()-_0x183f8d,'url':_0x2be975,'unswizzledGGGR':_0x558b6c};},_0x535ebf=(_0x57ec56,_0x4ff1c4,_0x5b24e5)=>{const _0x8ae3c7=_0x4990c4(),_0x34dd3c=new _0x1a521e['BasisFile'](new Uint8Array(_0x4ff1c4)),_0x554ce1=_0x34dd3c['getImageWi'+'dth'](0x2290+-0xf6c+0x15e*-0xe,-0x1975+-0x279*0xb+-0x544*-0xa),_0x4b7a32=_0x34dd3c['getImageHe'+'ight'](-0xbf1+0xfe3+-0x5*0xca,-0x305*-0x9+0x4dc+-0x2009),_0x3e5197=_0x34dd3c['getNumImag'+'es'](),_0x5491f9=_0x34dd3c['getNumLeve'+'ls'](0xa08+0x1*-0xbed+0x61*0x5),_0x542031=!!_0x34dd3c['getHasAlph'+'a'](),_0x4bee74=_0x34dd3c['isUASTC']&&_0x34dd3c['isUASTC']();if(!_0x554ce1||!_0x4b7a32||!_0x3e5197||!_0x5491f9)throw _0x34dd3c['close'](),_0x34dd3c['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x57ec56+'\x20width='+_0x554ce1+'\x20height='+_0x4b7a32+'\x20images='+_0x3e5197+'\x20levels='+_0x5491f9);const _0x1362b0=_0x1ffbb7(_0x5b24e5['deviceDeta'+'ils'],_0x542031,_0x4bee74),_0x267154=!!_0x5b24e5['isGGGR']&&_0x1362b0==='pvr';let _0x1091d6;if(_0x267154?_0x1091d6=_0xaa22ee['cTFRGBA32']:(_0x1091d6=_0x542031?_0x475168[_0x1362b0]:_0x150dfe[_0x1362b0],_0x5c788e(_0x554ce1,_0x4b7a32,_0x1091d6)||(_0x1091d6=_0x542031?_0xaa22ee['cTFRGBA32']:_0xaa22ee['cTFRGB565'])),!_0x34dd3c['startTrans'+'coding']())throw _0x34dd3c['close'](),_0x34dd3c['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x57ec56);let _0x56cc5c;const _0x4fa78f=[];for(let _0xd4e938=0x1a8d+0x1f7a+-0x3a07;_0xd4e938<_0x5491f9;++_0xd4e938){const _0x2f4abe=_0x34dd3c['getImageTr'+'anscodedSi'+'zeInBytes'](-0x9*0x4d+0x4b2*0x7+-0x1e29,_0xd4e938,_0x1091d6),_0x4ef239=new Uint8Array(_0x2f4abe);if(!_0x34dd3c['transcodeI'+'mage'](_0x4ef239,-0x1*-0x1d02+-0x1*0x1079+-0xc89,_0xd4e938,_0x1091d6,0x168a+0x133*-0x4+-0x2*0x8df,0x1*-0x198f+-0x1*0xa9c+-0x242b*-0x1)){if(_0xd4e938===_0x5491f9-(-0x1*0xe7d+-0x2573+0x33f1)&&_0x2f4abe===_0x4fa78f[_0xd4e938-(0x1562+-0x26a1+0x1140)]['buffer']['byteLength'])_0x4ef239['set'](new Uint8Array(_0x4fa78f[_0xd4e938-(-0x1e29*0x1+0x265*0x4+0x1496)]['buffer'])),console['warn']('Failed\x20to\x20'+'transcode\x20'+'last\x20mipma'+'p\x20level,\x20u'+'sing\x20previ'+'ous\x20level\x20'+'instead\x20ur'+'l='+_0x57ec56);else throw _0x34dd3c['close'](),_0x34dd3c['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x57ec56);}const _0x20959c=_0x1091d6===_0xaa22ee['cTFRGB565']||_0x1091d6===_0xaa22ee['cTFRGBA444'+'4'];_0x4fa78f['push'](_0x20959c?new Uint16Array(_0x4ef239['buffer']):_0x4ef239);}if(_0x34dd3c['close'](),_0x34dd3c['delete'](),_0x267154){for(_0x1091d6=_0xaa22ee['cTFRGB565'],_0x56cc5c=-0x14f1*0x1+-0x44*0x8b+-0x1*-0x39dd;_0x56cc5c<_0x4fa78f['length'];++_0x56cc5c)_0x4fa78f[_0x56cc5c]=_0x127d4a(_0x2c5889(_0x4fa78f[_0x56cc5c]));}return{'format':_0x490f3f(_0x1091d6,_0x5b24e5['deviceDeta'+'ils']),'width':_0x554ce1,'height':_0x4b7a32,'levels':_0x4fa78f,'cubemap':!(-0x2286+-0x287*-0x1+-0x200*-0x10),'transcodeTime':_0x4990c4()-_0x8ae3c7,'url':_0x57ec56,'unswizzledGGGR':_0x267154};},_0x46d0d6=(_0x185202,_0x4a7741,_0x1b55e6)=>_0x1b55e6['isKTX2']?_0x140ca5(_0x185202,_0x4a7741,_0x1b55e6):_0x535ebf(_0x185202,_0x4a7741,_0x1b55e6),_0x8cbdcc=(_0x313acc,_0x16d8c2,_0x283b6c)=>{try{const _0x47013a=_0x46d0d6(_0x313acc,_0x16d8c2,_0x283b6c);_0x47013a['levels']=_0x47013a['levels']['map'](_0x4af487=>_0x4af487['buffer']),self['postMessag'+'e']({'url':_0x313acc,'data':_0x47013a},_0x47013a['levels']);}catch(_0x157011){self['postMessag'+'e']({'url':_0x313acc,'err':_0x157011},null);}},_0x43b7cd=(_0x500a38,_0x2be25e)=>{const _0x303fb3=(_0x4138d9,_0x5c6c53)=>(WebAssembly['instantiat'+'e'](_0x500a38['module'],_0x4138d9)['then'](_0x18fe00=>{_0x5c6c53(_0x18fe00);})['catch'](_0x25ab9e=>{console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x25ab9e);}),{});self['BASIS'](_0x500a38['module']?{'instantiateWasm':_0x303fb3}:null)['then'](_0x1085e4=>{_0x1085e4['initialize'+'Basis'](),_0x1a521e=_0x1085e4,_0x4ed5e5=_0x500a38['rgbPriorit'+'y'],_0xacab2c=_0x500a38['rgbaPriori'+'ty'],_0x2be25e(null);});},_0x16b0ea=[];self['onmessage']=_0x3a497a=>{const _0x4e3991=_0x3a497a['data'];switch(_0x4e3991['type']){case'init':_0x43b7cd(_0x4e3991['config'],()=>{for(let _0x34dd2e=0x4b1+-0x184d*-0x1+-0x1cfe;_0x34dd2e<_0x16b0ea['length'];++_0x34dd2e)_0x8cbdcc(_0x16b0ea[_0x34dd2e]['url'],_0x16b0ea[_0x34dd2e]['data'],_0x16b0ea[_0x34dd2e]['options']);_0x16b0ea['length']=0x198d+0xabf+0x2e*-0xca;});break;case'transcode':_0x1a521e?_0x8cbdcc(_0x4e3991['url'],_0x4e3991['data'],_0x4e3991['options']):_0x16b0ea['push'](_0x4e3991);break;}};}const sk=_0xfdf267=>({'astc':!!_0xfdf267['extCompres'+'sedTexture'+'ASTC'],'atc':!!_0xfdf267['extCompres'+'sedTexture'+'ATC'],'dxt':!!_0xfdf267['extCompres'+'sedTexture'+'S3TC'],'etc1':!!_0xfdf267['extCompres'+'sedTexture'+'ETC1'],'etc2':!!_0xfdf267['extCompres'+'sedTexture'+'ETC'],'pvr':!!_0xfdf267['extCompres'+'sedTexture'+'PVRTC']}),ik=(_0x4c32d7,_0x4c6674)=>{const _0x10c985=_0x3b7991=>{const _0x2d8899=['/*\x20basis\x20*'+'/',_0x3b7991,'','('+tk['toString']()+')()\x0a\x0a']['join']('\x0a');return new Blob([_0x2d8899],{'type':'applicatio'+'n/javascri'+'pt'});},_0x4e41d6=()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x29dbab=new WebAssembly['Module'](Uint8Array['of'](0x6*0x2c9+0xeb0+-0x1f66,-0x80a+0x22b7+-0xcc*0x21,0x738+0x4b1+0xa3*-0x12,-0x3cb*0x1+-0xb0*-0x20+0x8e4*-0x2,0x1c0a+0x5*-0x315+-0xca0,-0x1*-0x1781+-0x1*-0x2271+-0x1cf9*0x2,-0x3d4+0x1423+-0x104f,-0x477+0x827+0x4*-0xec));if(_0x29dbab instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x29dbab)instanceof WebAssembly['Instance'];}}catch{}return!(0x1632+0x29*-0x7b+-0x27e);},_0x8c3491=(_0x34dd13,_0x4f48d9)=>{_0x4c6674(null,{'workerUrl':URL['createObje'+'ctURL'](_0x10c985(_0x34dd13)),'module':_0x4f48d9,'rgbPriority':_0x4c32d7['rgbPriorit'+'y'],'rgbaPriority':_0x4c32d7['rgbaPriori'+'ty']});},_0x1284f4={'cache':!(0x32b*-0xc+0x259a+0x35*0x2),'responseType':'text','retry':_0x4c32d7['maxRetries']>-0x9cc+-0x1d6+0xba2,'maxRetries':_0x4c32d7['maxRetries']};if(_0x4c32d7['glueUrl']&&_0x4c32d7['wasmUrl']&&_0x4e41d6()){let _0x56e3c6=null,_0x2ddc80=null;ot['get'](_0x4c32d7['glueUrl'],_0x1284f4,(_0x532a2c,_0x13019e)=>{_0x532a2c?_0x4c6674(_0x532a2c):_0x2ddc80?_0x8c3491(_0x13019e,_0x2ddc80):_0x56e3c6=_0x13019e;});const _0x20b08d=fetch(_0x4c32d7['wasmUrl']),_0x526d82=()=>{_0x20b08d['then'](_0x4207bc=>_0x4207bc['arrayBuffe'+'r']())['then'](_0x4e8668=>WebAssembly['compile'](_0x4e8668))['then'](_0x11df1e=>{_0x56e3c6?_0x8c3491(_0x56e3c6,_0x11df1e):_0x2ddc80=_0x11df1e;})['catch'](_0x17b46f=>{_0x4c6674(_0x17b46f,null);});};WebAssembly['compileStr'+'eaming']?WebAssembly['compileStr'+'eaming'](_0x20b08d)['then'](_0x9b4b28=>{_0x56e3c6?_0x8c3491(_0x56e3c6,_0x9b4b28):_0x2ddc80=_0x9b4b28;})['catch'](_0x9098e9=>{w['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x4c32d7['wasmUrl']+'\x20('+_0x9098e9+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x526d82();}):_0x526d82();}else ot['get'](_0x4c32d7['fallbackUr'+'l'],_0x1284f4,(_0x5cbd4c,_0x35cc8c)=>{_0x5cbd4c?_0x4c6674(_0x5cbd4c,null):_0x8c3491(_0x35cc8c,null);});};class rk{constructor(){this['callbacks']={},this['queue']=[],this['clients']=[];}['enqueueJob'](_0x4c1e20,_0x17528e,_0x464499,_0x84b749){if(this['callbacks']['hasOwnProp'+'erty'](_0x4c1e20))this['callbacks'][_0x4c1e20]['push'](_0x464499);else{this['callbacks'][_0x4c1e20]=[_0x464499];const _0x5082d5={'url':_0x4c1e20,'data':_0x17528e,'options':_0x84b749};this['clients']['length']>-0x207e+-0x71c+0x89*0x4a?this['clients']['shift']()['run'](_0x5082d5):this['queue']['push'](_0x5082d5);}}['enqueueCli'+'ent'](_0x2d00a8){this['queue']['length']>-0x199+-0xb3*-0x4+0x1*-0x133?_0x2d00a8['run'](this['queue']['shift']()):this['clients']['push'](_0x2d00a8);}['handleResp'+'onse'](_0x445bfb,_0x104064,_0x2566a5){const _0x1848cf=this['callbacks'][_0x445bfb];if(_0x104064){for(let _0x1b8bfe=-0x6da+-0x53*0x3d+0x1aa1*0x1;_0x1b8bfe<_0x1848cf['length'];++_0x1b8bfe)_0x1848cf[_0x1b8bfe](_0x104064);}else{_0x2566a5['format']===Ih||_0x2566a5['format']===Lh?_0x2566a5['levels']=_0x2566a5['levels']['map'](_0x1e0930=>new Uint16Array(_0x1e0930)):_0x2566a5['levels']=_0x2566a5['levels']['map'](_0x12bc0d=>new Uint8Array(_0x12bc0d));for(let _0x574190=-0x11e7*-0x1+-0x316+-0x1*0xed1;_0x574190<_0x1848cf['length'];++_0x574190)_0x1848cf[_0x574190](null,_0x2566a5);}delete this['callbacks'][_0x445bfb];}}class ak{constructor(_0xe5a325,_0x392b66,_0x5e2fe8){this['queue']=_0xe5a325,this['worker']=new Worker(_0x392b66['workerUrl']),this['worker']['addEventLi'+'stener']('message',_0x41d695=>{const _0x31ced4=_0x41d695['data'];this['queue']['handleResp'+'onse'](_0x31ced4['url'],_0x31ced4['err'],_0x31ced4['data']),this['eager']||this['queue']['enqueueCli'+'ent'](this);}),this['worker']['postMessag'+'e']({'type':'init','config':_0x392b66}),this['eager']=_0x5e2fe8;}['run'](_0x3dfac0){const _0x34abbe=[];_0x3dfac0['data']instanceof ArrayBuffer&&_0x34abbe['push'](_0x3dfac0['data']),this['worker']['postMessag'+'e']({'type':'transcode','url':_0x3dfac0['url'],'format':_0x3dfac0['format'],'data':_0x3dfac0['data'],'options':_0x3dfac0['options']},_0x34abbe),this['eager']&&this['queue']['enqueueCli'+'ent'](this);}}const nk=-0x158c+0x1964+-0x3d7,ok=['etc2','etc1','astc','dxt','pvr','atc'],lk=['astc','dxt','etc2','pvr','atc'],ck=0x231c+-0x13ef+-0x14*0xc2,vu=new rk();let Xg=null,xu=!(-0xf37+-0x273*-0xf+-0x1585);function hk(_0x3fcd4c){if(!xu){if(!_0x3fcd4c)_0x3fcd4c=Xg||{};else{if(_0x3fcd4c['lazyInit']){Xg=_0x3fcd4c;return;}}if(!_0x3fcd4c['glueUrl']||!_0x3fcd4c['wasmUrl']||!_0x3fcd4c['fallbackUr'+'l']){const _0x5a7fd0=uS['getConfig']('BASIS');_0x5a7fd0&&(_0x3fcd4c={'glueUrl':_0x5a7fd0['glueUrl'],'wasmUrl':_0x5a7fd0['wasmUrl'],'fallbackUrl':_0x5a7fd0['fallbackUr'+'l'],'numWorkers':_0x5a7fd0['numWorkers']});}if(_0x3fcd4c['glueUrl']||_0x3fcd4c['wasmUrl']||_0x3fcd4c['fallbackUr'+'l']){xu=!(-0x27d*0x1+0xfc2+-0xd45);const _0x1fe247=Math['max'](0x1*0xe43+0x22e0+-0x3122,Math['min'](0x18e3+-0x267+-0x166c,_0x3fcd4c['numWorkers']||nk)),_0x578357=_0x3fcd4c['numWorkers']===-0x2c4*-0xd+-0x2a*-0x2f+-0x2ba9||(_0x3fcd4c['hasOwnProp'+'erty']('eagerWorke'+'rs')?_0x3fcd4c['eagerWorke'+'rs']:!(-0x7a*0x1+0x7f*-0x44+-0x1*-0x2236));_0x3fcd4c['rgbPriorit'+'y']=_0x3fcd4c['rgbPriorit'+'y']||ok,_0x3fcd4c['rgbaPriori'+'ty']=_0x3fcd4c['rgbaPriori'+'ty']||lk,_0x3fcd4c['maxRetries']=_0x3fcd4c['hasOwnProp'+'erty']('maxRetries')?_0x3fcd4c['maxRetries']:ck,ik(_0x3fcd4c,(_0x3939b2,_0x9cd453)=>{if(_0x3939b2)console['error']('failed\x20to\x20'+'initialize'+'\x20basis\x20wor'+'ker:\x20'+_0x3939b2);else{for(let _0x2de062=0x11f0+-0x1f64+0xd74;_0x2de062<_0x1fe247;++_0x2de062)vu['enqueueCli'+'ent'](new ak(vu,_0x9cd453,_0x578357));}});}}}let lf=null;function Hv(_0x1026c8,_0x42b160,_0x2b2813,_0x3e444c,_0x3a49a){return hk(),lf||(lf={'formats':sk(_0x1026c8)}),vu['enqueueJob'](_0x42b160,_0x2b2813,_0x3e444c,{'deviceDetails':lf,'isGGGR':!!(_0x3a49a!=null&&_0x3a49a['isGGGR']),'isKTX2':!!(_0x3a49a!=null&&_0x3a49a['isKTX2'])}),xu;}class qn{['load'](_0x3591e7,_0x77486e,_0x168f7a){throw new Error('not\x20implem'+'ented');}['open'](_0xe7e98a,_0x1b0713,_0xedd5fc){throw new Error('not\x20implem'+'ented');}}class dk extends qn{constructor(_0x2566da,_0xf07192){super(),this['device']=_0xf07192,this['maxRetries']=0x17f*-0x13+0x1272+0x9fb;}['load'](_0x1a7a53,_0x5e2dc4,_0x29348f){const _0x4bf451=this['device'],_0x4b0e41=_0xfd9a5=>{var _0x20f587,_0x10141d,_0x3b1c39;Hv(_0x4bf451,_0x1a7a53['load'],_0xfd9a5,_0x5e2dc4,{'isGGGR':(((_0x3b1c39=(_0x10141d=(_0x20f587=_0x29348f==null?void(0x3ec*-0x3+0xdf1+-0x22d):_0x29348f['file'])==null?void(-0xa05+0x1*0x15e9+0x5f2*-0x2):_0x20f587['variants'])==null?void(-0x2603+-0x1aea+0xb*0x5e7):_0x10141d['basis'])==null?void(0x2ff+-0x547+0x4*0x92):_0x3b1c39['opt'])&0x1b6c+0x78f+0x185*-0x17)!==0xbd4+0x2456*-0x1+0x1882})||_0x5e2dc4('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x29348f['name']+']('+_0x29348f['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.'));};pe['fetchArray'+'Buffer'](_0x1a7a53['load'],(_0xca0a19,_0x1f9ca9)=>{_0xca0a19?_0x5e2dc4(_0xca0a19):_0x4b0e41(_0x1f9ca9);},_0x29348f,this['maxRetries']);}['open'](_0x5b4006,_0x1a9c46,_0x4e146e,_0x6952c4={}){const _0x5e7ee6=_0x6952c4['srgb']?zh(_0x1a9c46['format']):_0x1a9c46['format'],_0x44c8dc=new _e(_0x4e146e,{'name':_0x5b4006,'profilerHint':Er,'addressU':_0x1a9c46['cubemap']?ue:yt,'addressV':_0x1a9c46['cubemap']?ue:yt,'width':_0x1a9c46['width'],'height':_0x1a9c46['height'],'format':_0x5e7ee6,'cubemap':_0x1a9c46['cubemap'],'levels':_0x1a9c46['levels'],..._0x6952c4});return _0x44c8dc['upload'](),_0x44c8dc;}}const Wv=new Uint8Array([-0x26d2+0xc*-0x1bc+0x3c2b,-0x177c+-0x1a4a+0x3216,0x2146+-0xa15+0x345*-0x7,-0x57*-0x2d+0x1518+0x1*-0x241c,0x2b2*-0x3+-0x1*0x23bf+0x112*0x29,-0x1af4+0x1902+-0x1fc*-0x1,-0x5*0x134+-0x1853+-0x1*-0x1e71,-0x6*-0x24e+0x7f1+-0x15bb*0x1,0x23cc+0x137b*-0x2+0x32a,-0x27*-0xd7+-0x1a6*-0x10+-0x3b21*0x1,0x6e8+0xd3*-0xa+0x156,-0x2bb+0x1d43+-0x1a7b,0x1302+-0x26*-0xbb+-0x2e7b,0x77a+-0x2*0xf7f+0x17cc,-0x1*0xf7b+-0x1acf*0x1+0x2a8e,0xeb1*-0x1+-0x26d1+0x35d4,-0x152c+-0x25e*0x6+-0x2*-0x11b0,0x214f*-0x1+-0x227f*-0x1+-0x26*0x8,-0x16e4+0x8fb+-0xde9*-0x1,0xdb3+0xd1a+0x157*-0x14,-0x1335*-0x2+0xae4+-0x314e,-0x76a*-0x1+0x1523+-0x1c8d,-0x1baa*0x1+-0x6a1*0x3+0x2f*0x103,-0xc15*-0x1+0x316*0x4+-0x186c,-0x1*-0x1df5+-0x7c4+-0xb7*0x1f,0x8*-0x26f+-0x958*-0x2+0x2*0x67,-0x2623*0x1+0x1f*-0x25+0x2a9e,0x1c3a+0xeb1*0x1+0x2aeb*-0x1,-0xe54+-0x2*0x11c3+-0x18ed*-0x2,0x1*0x261a+-0x11c*-0x6+-0x3*0xee1,0x16a*0x17+0x1d89*-0x1+-0x4*0xba,0x2018+0x165*-0x12+0x2*-0x31d,-0x2*0x4dc+0x14*-0x19c+-0x29*-0x109,0xe*-0x119+0x3*0x4ef+0x91,0x23b*-0x7+-0x8b3+0x1850,0x854+0x8*0x461+-0x2b5c,0x2*-0xda4+0x114f+-0x503*-0x2,-0x1*0xa34+0x2629*0x1+-0x1bac,-0x1260+0x24cc+0x245*-0x8,-0x210c+-0x24c5+0x4612,-0x53c+-0x1fee+0x257e,-0x9f7*0x2+-0x4*0x52+0x15ae,0x31*0x7f+-0x1795*-0x1+-0x12*0x29d,0x3*-0x87+-0x1439+0xf7*0x17,0xec3*0x1+0x5a8+-0x1*0x1407,-0x11f+-0x1*-0x1c5+-0x42,-0x6b9*-0x3+-0xd*0x2c7+0x1052,-0x65e+0x3f0+0x324,-0x118c+0x5*0xe+-0x2b*-0x67,-0x4*-0x89e+-0x129*0xf+-0x1111,0x21d+-0x18*-0xdc+-0x16bd,0x3b8+0x2002+0x1*-0x2361,-0x65+-0x3a1*0x8+0x5d*0x51,0x17a8+0x2290+-0x39f1,-0x48*-0x1f+0x1c6a+-0x24df*0x1,0x43b*0x7+-0xb5a+-0x11be,0x24b8+0x1071+0x783*-0x7,-0x7*0x71+-0x3*0x50d+0x132b*0x1,-0x26+-0x11*0xbe+0x331*0x4,0x212b+0x1*0x2ed+-0x1a4*0x16,0x227+-0x251*-0x3+0x91a*-0x1,0x1*-0xfbf+0x214+-0xdab*-0x1,-0x20fb+0x1b11+0x633,-0xe25*0x1+0x95*0x3d+-0x1517,0x2ba*0xd+-0x1294+-0x109*0x10,-0x2e8*0x6+-0xf4a+-0x1*-0x20fe,-0xf34+0x2338+-0xe1*0x16,-0xe32+-0x15*-0x1b+0xc3d,-0xb9c+-0x632+0x122e,-0x2647+0x1944+-0x1*-0xd85]),$v=(_0x44453b,_0x546592)=>{const _0x1d21da=new _e(_0x44453b,{'width':0x1,'height':0x1,'format':Ne,'mipmaps':!(0x1*-0xa21+0xee0*-0x1+0xc2*0x21),'levels':[_0x546592]}),_0xf24088=new gt({'colorBuffer':_0x1d21da,'depth':!(-0x3*0x5b+-0x111b+0x60f*0x3)});_0x44453b['setFramebu'+'ffer'](_0xf24088['impl']['_glFrameBu'+'ffer']),_0x44453b['initRender'+'Target'](_0xf24088);const _0x456f13=new Uint8ClampedArray(0xe0f+-0x1d29*0x1+-0x2d*-0x56);return _0x44453b['gl']['readPixels'](-0x2*-0x10d2+-0x203c+-0xf*0x18,0x242b*-0x1+-0x1*0xd9c+0x31c7,0x3a3+0x1*-0xff3+-0xc51*-0x1,-0x144e+-0x1*-0x1dcd+-0x97e,_0x44453b['gl']['RGBA'],_0x44453b['gl']['UNSIGNED_B'+'YTE'],_0x456f13),_0xf24088['destroy'](),_0x1d21da['destroy'](),_0x456f13[-0x1e9c+-0x1fa5+0x3e41]===0x12a6+0x1*-0x170a+0x5*0xe1&&_0x456f13[-0x36*0x77+0x1744+0x1d7]===-0x149*-0xd+-0x3fd*-0x8+-0x309b&&_0x456f13[-0x6b*-0x53+0xa59+0x1*-0x2d08]===-0xebb+0x22d7+-0x1419&&_0x456f13[0x45*-0x67+0xf3e+0xc88]===-0x12df*0x1+-0xe45+-0x4d*-0x6f;},fk=_0x1dcc27=>createImageBitmap(new Blob([Wv],{'type':'image/png'}),{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0x2b7d64=>$v(_0x1dcc27,_0x2b7d64))['catch'](_0x79a490=>!(-0xa17+0x1*0x16d3+-0xcbb)),uk=_0x4c71ad=>new Promise((_0x39b81b,_0x7d5e5e)=>{const _0x3dc621=new Image();_0x3dc621['src']=URL['createObje'+'ctURL'](new Blob([Wv])),_0x3dc621['onload']=()=>{_0x39b81b($v(_0x4c71ad,_0x3dc621));};});class pk{static['run'](_0x3d1ba){fk(_0x3d1ba)['then'](_0x3afe83=>{console['log']('imageBitma'+'pIsCorrect'+'='+_0x3afe83);}),uk(_0x3d1ba)['then'](_0x33ca12=>{console['log']('imgElement'+'IsCorrect='+_0x33ca12);});}}class mk extends qn{constructor(_0x175bde,_0x1561ba){super(),this['crossOrigi'+'n']=_0x175bde['prefix']?'anonymous':null,this['maxRetries']=-0xe5*-0xb+-0xcd1+-0x17d*-0x2,this['device']=_0x1561ba,mi['get']('IMG_ALPHA_'+'TEST')&&pk['run'](this['device']);}['load'](_0x3f277a,_0x1a01e1,_0x1aa6b7){var _0x3a0005;const _0x42b87e=!!((_0x3a0005=_0x1aa6b7==null?void(-0x1f36+0xeae+0x1088):_0x1aa6b7['file'])!=null&&_0x3a0005['contents']);if(_0x42b87e){if(this['device']['supportsIm'+'ageBitmap']){this['_loadImage'+'BitmapFrom'+'Blob'](new Blob([_0x1aa6b7['file']['contents']]),_0x1a01e1);return;}_0x3f277a={'load':URL['createObje'+'ctURL'](new Blob([_0x1aa6b7['file']['contents']])),'original':_0x3f277a['original']};}const _0x5bd82c=(_0x223019,_0x1ecd34)=>{_0x42b87e&&URL['revokeObje'+'ctURL'](_0x3f277a['load']),_0x1a01e1(_0x223019,_0x1ecd34);};let _0x9ec124;_0x1aa6b7&&_0x1aa6b7['options']&&_0x1aa6b7['options']['hasOwnProp'+'erty']('crossOrigi'+'n')?_0x9ec124=_0x1aa6b7['options']['crossOrigi'+'n']:Vn['test'](_0x3f277a['load'])&&(_0x9ec124=this['crossOrigi'+'n']),this['device']['supportsIm'+'ageBitmap']?this['_loadImage'+'Bitmap'](_0x3f277a['load'],_0x3f277a['original'],_0x9ec124,_0x5bd82c,_0x1aa6b7):this['_loadImage'](_0x3f277a['load'],_0x3f277a['original'],_0x9ec124,_0x5bd82c);}['open'](_0x4ee49f,_0x129b77,_0x4c1d23,_0x48f857={}){const _0xf7abe1=new _e(_0x4c1d23,{'name':_0x4ee49f,'profilerHint':Er,'width':_0x129b77['width'],'height':_0x129b77['height'],'format':_0x48f857['srgb']?_s:Ne,..._0x48f857});return _0xf7abe1['setSource'](_0x129b77),_0xf7abe1;}['_loadImage'](_0x7fe15,_0xd12b97,_0x310d0c,_0x4cbe8b){const _0x2aac0b=new Image();_0x310d0c&&(_0x2aac0b['crossOrigi'+'n']=_0x310d0c);let _0x3732ae=0xd63+0x179e*-0x1+0x1*0xa3b;const _0x324dbe=this['maxRetries'];let _0x4fedfc;_0x2aac0b['onload']=function(){_0x4cbe8b(null,_0x2aac0b);},_0x2aac0b['onerror']=function(){if(!_0x4fedfc){if(_0x324dbe>0x93f+-0x61d+0x322*-0x1&&++_0x3732ae<=_0x324dbe){const _0x1afc6d=Math['pow'](0x7*0x185+0x1514+-0x1fb5,_0x3732ae)*(-0x147*0x19+0x2*0x3dc+0x1*0x189b);console['log']('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0xd12b97+('\x27\x20-\x20Retryi'+'ng\x20in\x20')+_0x1afc6d+'ms...');const _0x24ef3e=_0x7fe15['indexOf']('?')>=0x1827+-0x8*0x1d5+-0x97f?'&':'?';_0x4fedfc=setTimeout(()=>{_0x2aac0b['src']=_0x7fe15+_0x24ef3e+'retry='+Date['now'](),_0x4fedfc=null;},_0x1afc6d);}else _0x4cbe8b('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0xd12b97+'\x27');}},_0x2aac0b['src']=_0x7fe15;}['_loadImage'+'Bitmap'](_0x3c0ff0,_0x439ca8,_0x6eae6e,_0x18e09a,_0x367242){const _0xaea297={'cache':!(-0x4*0x275+-0x121c+0x1bf0),'responseType':'blob','retry':this['maxRetries']>0x48c+-0x170a+0x127e,'maxRetries':this['maxRetries'],'progress':_0x367242};ot['get'](_0x3c0ff0,_0xaea297,(_0x13bf56,_0x27a8e0)=>{_0x13bf56?_0x18e09a(_0x13bf56):this['_loadImage'+'BitmapFrom'+'Blob'](_0x27a8e0,_0x18e09a);});}['_loadImage'+'BitmapFrom'+'Blob'](_0x18bd0d,_0x36e359){createImageBitmap(_0x18bd0d,{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0xa47596=>_0x36e359(null,_0xa47596))['catch'](_0x419ede=>_0x36e359(_0x419ede));}}const cf=[-0x56d2ea09+0x12ead6c*-0x61+0x243add74*0x8,-0x4fdf*0x14459+0x5805866d+0xcf*0xf7cba6,0x1*-0x176f87f+0x4c2d166+-0xa6*-0xa7ec1],_k={0x83f0:Rh,0x83f2:Ou,0x83f3:ol,0x8d64:Fh,0x9274:Nu,0x9278:ku,0x8c00:Nh,0x8c01:ll,0x8c02:kh,0x8c03:cl,0x8051:wr,0x8058:Ne,0x8c41:Fu,0x8c43:_s,0x8c3a:En,0x881b:ui,0x881a:nt};function gk(_0x415146,_0x500a60,_0x120cb7,_0x2f2839){return _0x415146===En?new Uint32Array(_0x500a60,_0x120cb7,_0x2f2839/(0x4c9+-0x7*0x57a+0x2191)):new Uint8Array(_0x500a60,_0x120cb7,_0x2f2839);}class Sk extends qn{constructor(_0x2c7048){super(),this['maxRetries']=-0x231b+0xb*0x145+0x1524;}['load'](_0x2d0b27,_0x395ec5,_0x4e8831){pe['fetchArray'+'Buffer'](_0x2d0b27['load'],_0x395ec5,_0x4e8831,this['maxRetries']);}['open'](_0xfd67b3,_0x2c06d7,_0x1b4649,_0x1a2a85={}){const _0x1dceaf=this['parse'](_0x2c06d7);if(!_0x1dceaf)return null;const _0x5e793c=_0x1a2a85['srgb']?zh(_0x1dceaf['format']):_0x1dceaf['format'],_0x2707f6=new _e(_0x1b4649,{'name':_0xfd67b3,'profilerHint':Er,'addressU':_0x1dceaf['cubemap']?ue:yt,'addressV':_0x1dceaf['cubemap']?ue:yt,'width':_0x1dceaf['width'],'height':_0x1dceaf['height'],'format':_0x5e793c,'cubemap':_0x1dceaf['cubemap'],'levels':_0x1dceaf['levels'],..._0x1a2a85});return _0x2707f6['upload'](),_0x2707f6;}['parse'](_0x1e1748){const _0x4e178d=new Uint32Array(_0x1e1748);if(cf[0x6ce*0x2+0x1*0x12dd+-0x2079]!==_0x4e178d[-0x6fb*-0x1+0x5*-0x58+0x543*-0x1]||cf[0x12e5+0x1952+-0x2c36]!==_0x4e178d[-0x1*-0xe95+-0x251*0x7+0x1a3*0x1]||cf[-0x2*-0xeba+0x1e02+-0x1dba*0x2]!==_0x4e178d[0x489+-0x21*0xd1+0x166a])return w['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX\x20f'+'ile.\x20Expec'+'ted\x200xAB4B'+'5458,\x200x20'+'3131BB,\x200x'+'0D0A1A0A'),null;const _0x4c7565={'endianness':_0x4e178d[-0x1211+0x1*0xafb+0x1*0x719],'glType':_0x4e178d[0x7*0x44f+-0xd7c+-0x5*0x355],'glTypeSize':_0x4e178d[-0x1069+0x1*0x6d+0x1001],'glFormat':_0x4e178d[-0x304+-0xd*-0x94+-0x3*0x17e],'glInternalFormat':_0x4e178d[-0x1084+-0x1*-0x42a+-0xc61*-0x1],'glBaseInternalFormat':_0x4e178d[-0x10df*0x1+-0xc59+0xd*0x240],'pixelWidth':_0x4e178d[-0x1530+0x165f+-0x6*0x31],'pixelHeight':_0x4e178d[-0x1ca5+-0xe7d+0x12*0x266],'pixelDepth':_0x4e178d[-0x2a*-0xd6+0x273+-0x55c*0x7],'numberOfArrayElements':_0x4e178d[-0x99*-0xa+-0x1*0x1b6e+0x1580],'numberOfFaces':_0x4e178d[0x1*0x19c5+0xe*0x27a+0x14*-0x305],'numberOfMipmapLevels':_0x4e178d[-0x1c58+-0xb9*-0x3+0x1a3b],'bytesOfKeyValueData':_0x4e178d[-0x268f+-0x406+0x2aa4]};if(_0x4c7565['pixelDepth']>-0x5b*0x19+0x1440+-0x2*0x5ae)return w['warn']('More\x20than\x20'+'1\x20pixel\x20de'+'pth\x20not\x20su'+'pported!'),null;if(_0x4c7565['numberOfAr'+'rayElement'+'s']!==-0x8d*0x31+0x22dd+-0x7e0)return w['warn']('Array\x20text'+'ure\x20not\x20su'+'pported!'),null;const _0x5b5ade=_k[_0x4c7565['glInternal'+'Format']];if(_0x5b5ade===void(0x2570+-0x7*0x42b+0x2d*-0x2f))return w['warn']('Unknown\x20gl'+'InternalFo'+'rmat:\x20'+_0x4c7565['glInternal'+'Format']),null;let _0x526ade=-0x1d11+-0x135a+0xc5*0x3f+_0x4c7565['bytesOfKey'+'ValueData']/(-0xb*0x33+-0x456+0x68b);const _0x299939=_0x4c7565['numberOfFa'+'ces']>-0x1765+-0x2701+0x3e67,_0x2d415d=[];for(let _0x1bddb6=-0x21dc+-0x43*0x2d+0x2da3;_0x1bddb6<(_0x4c7565['numberOfMi'+'pmapLevels']||-0x1d18+-0x1*0xc21+0x293a*0x1);_0x1bddb6++){const _0x2e04f4=_0x4e178d[_0x526ade++];_0x299939&&_0x2d415d['push']([]);const _0x19609c=_0x299939?_0x2d415d[_0x1bddb6]:_0x2d415d;for(let _0x8a6786=-0xf7a*0x1+0x1167+0x11*-0x1d;_0x8a6786<(_0x299939?-0x1221+0x86*0x47+-0x1303:-0x13c4+0x536+-0x1*-0xe8f);++_0x8a6786)_0x19609c['push'](gk(_0x5b5ade,_0x1e1748,_0x526ade*(-0x97*-0x22+-0xa7*0x15+-0x657),_0x2e04f4)),_0x526ade+=_0x2e04f4+(0x276*-0x7+-0x1f95+0x30d2)>>-0x148f+0x12bf+0x1d2;}return{'format':_0x5b5ade,'width':_0x4c7565['pixelWidth'],'height':_0x4c7565['pixelHeigh'+'t'],'levels':_0x2d415d,'cubemap':_0x299939};}}const yk={'KHR_DF_MODEL_UASTC':0xa6};class vk extends qn{constructor(_0xc3e66e,_0x188f52){super(),this['maxRetries']=-0x1*0x1077+0x67d+0x4fd*0x2,this['device']=_0x188f52;}['load'](_0x3331c2,_0x447237,_0x34c464){pe['fetchArray'+'Buffer'](_0x3331c2['load'],(_0x3454f1,_0xab0d99)=>{_0x3454f1?_0x447237(_0x3454f1,_0xab0d99):this['parse'](_0xab0d99,_0x3331c2,_0x447237,_0x34c464);},_0x34c464,this['maxRetries']);}['open'](_0x1802cb,_0x1807b9,_0xffdde6,_0x165473={}){const _0x5e8039=_0x165473['srgb']?zh(_0x1807b9['format']):_0x1807b9['format'],_0x3e9470=new _e(_0xffdde6,{'name':_0x1802cb,'profilerHint':Er,'addressU':_0x1807b9['cubemap']?ue:yt,'addressV':_0x1807b9['cubemap']?ue:yt,'width':_0x1807b9['width'],'height':_0x1807b9['height'],'format':_0x5e8039,'cubemap':_0x1807b9['cubemap'],'levels':_0x1807b9['levels'],..._0x165473});return _0x3e9470['upload'](),_0x3e9470;}['parse'](_0x4350c8,_0x5c8d8e,_0x4f629d,_0x4e0181){var _0x3f8a3a,_0x24c96d,_0x3b31d8;const _0x2db550=new pS(_0x4350c8),_0x2e60f3=[_0x2db550['readU32be'](),_0x2db550['readU32be'](),_0x2db550['readU32be']()];if(_0x2e60f3[0x1328+0x1*-0xd8d+0x29*-0x23]!==-0xa7a703*0x128+0xa7614e79+0xc5c32157||_0x2e60f3[-0xe9b*0x1+-0x4e9+-0x13*-0x107]!==-0x1*0x2ac40244+0x2*-0xc4e0e5e+0x90d4d11*0xb||_0x2e60f3[0x26e8+-0x3f*0x3f+-0x1765*0x1]!==0x9fc065+-0x7*0x14fd277+0x15991ae6)return w['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX2\x20'+'file.\x20Expe'+'cted\x200xAB4'+'B5458,\x200x2'+'03131BB,\x200'+'x0D0A1A0A'),null;const _0x205e18={'vkFormat':_0x2db550['readU32'](),'typeSize':_0x2db550['readU32'](),'pixelWidth':_0x2db550['readU32'](),'pixelHeight':_0x2db550['readU32'](),'pixelDepth':_0x2db550['readU32'](),'layerCount':_0x2db550['readU32'](),'faceCount':_0x2db550['readU32'](),'levelCount':_0x2db550['readU32'](),'supercompressionScheme':_0x2db550['readU32']()},_0x12e3f8={'dfdByteOffset':_0x2db550['readU32'](),'dfdByteLength':_0x2db550['readU32'](),'kvdByteOffset':_0x2db550['readU32'](),'kvdByteLength':_0x2db550['readU32'](),'sgdByteOffset':_0x2db550['readU64'](),'sgdByteLength':_0x2db550['readU64']()},_0x1276ca=[];for(let _0x33139d=-0x2336+-0x12f3+0x127*0x2f;_0x33139d<Math['max'](-0x2621+0x22c0+0x362,_0x205e18['levelCount']);++_0x33139d)_0x1276ca['push']({'byteOffset':_0x2db550['readU64'](),'byteLength':_0x2db550['readU64'](),'uncompressedByteLength':_0x2db550['readU64']()});if(_0x2db550['readU32']()!==_0x12e3f8['kvdByteOff'+'set']-_0x12e3f8['dfdByteOff'+'set'])return w['warn']('Invalid\x20fi'+'le\x20data\x20en'+'countered.'),null;_0x2db550['skip'](-0x1*0x1c3f+0x1bce+-0x79*-0x1);const _0x1680ea=_0x2db550['readU8']();_0x2db550['skip'](_0x12e3f8['dfdByteLen'+'gth']-(-0xca4+-0xff*0x1d+0x2990)),_0x2db550['skip'](_0x12e3f8['kvdByteLen'+'gth']),_0x205e18['supercompr'+'essionSche'+'me']===0x16*0x79+-0x198+-0x1*0x8cd||_0x1680ea===yk['KHR_DF_MOD'+'EL_UASTC']?Hv(this['device'],_0x5c8d8e['load'],_0x4350c8,_0x4f629d,{'isGGGR':(((_0x3b31d8=(_0x24c96d=(_0x3f8a3a=_0x4e0181==null?void(-0x1d3c+0x3e7+0x511*0x5):_0x4e0181['file'])==null?void(-0x2356*-0x1+-0x2d*-0xf+0x25f9*-0x1):_0x3f8a3a['variants'])==null?void(0x2425+0x1*-0x14ed+-0xf38):_0x24c96d['basis'])==null?void(-0x10c*-0x25+-0xbe0+0x6b7*-0x4):_0x3b31d8['opt'])&0x26ff+0x6fd*0x4+-0x1*0x42eb)!==0x2*0xd70+-0x227d+0x79d,'isKTX2':!(-0x1e18+-0x3*-0x3d7+0x3b7*0x5)})||_0x4f629d('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x4e0181['name']+']('+_0x4e0181['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.')):_0x4f629d('unsupporte'+'d\x20KTX2\x20pix'+'el\x20format');}}class xk extends qn{constructor(_0xd73475){super(),this['maxRetries']=-0x1462+-0x1755+0x2bb7;}['load'](_0x2a2b8e,_0x46da08,_0x5150a9){pe['fetchArray'+'Buffer'](_0x2a2b8e['load'],_0x46da08,_0x5150a9,this['maxRetries']);}['open'](_0x59b850,_0x15e08b,_0x233e84,_0x2d2e76={}){const _0x31b0b7=new Uint32Array(_0x15e08b,-0x1454*0x1+0xb59+0x79*0x13,-0x91e+0x1407*0x1+-0xac9),_0x251b0b=_0x31b0b7[-0x8d0+0x1076+0x2*-0x3d1],_0x1b6f7e=_0x31b0b7[-0x2347+-0xf4a+0x3294],_0x1c047c=Math['max'](_0x31b0b7[-0x6*-0x525+0x6d3+0x1*-0x25aa],0x56*-0x5f+-0x104a+0x3035),_0x72dc65=_0x31b0b7[0x3*0x89f+-0x4*0x542+-0x4c1]===-0x8*0x6d+0x2b*-0x9+0x4ef*0x1,_0x32be7e=_0x31b0b7[-0x16e0+0xb2c+0xbc9],_0x1db66e=_0x31b0b7[-0x9cd+0x4a0+0x543],_0x5d8c54=_0x31b0b7[0x3*-0x4ef+0x176e+-0x1*0x885]===-0x1f9a7+0x1*-0x1335d+0x42b04,_0x24dd8d=0x386af*0x1105+0x22f43057*-0x1+0x205c604*0xc,_0x854a8f=-0x1547aa*-0x3e7+0x38684791+-0x561e97b3,_0x540824=0x82*-0x3a+0x1659+0x78c,_0x3ab9d6=0x595+0xf19*-0x2+0x1911,_0x46f736=0x19e3d309*-0x2+-0x107d9d*-0x55e+0x3c8b0d*0x35,_0x5550f1=-0xaeeefc3*-0x7+-0x14b*0x2b100d+0x1c5864ca,_0x58958b=0x1f9*-0xca031+-0x7f*-0x60a11e+0x3bd2e71*0x7,_0x54071a=-0x13d05a4e+-0x1*-0x4a47f2d5+0x1*-0x5446437,_0x2bab4f=-0x2a200fe8*0x2+-0x124c7e6d*-0x3+0x4e8ed8d9;let _0x5d393d=!(0x9*0x13c+-0x15d*-0x2+-0xdd5),_0x540e8e=!(-0x2609+-0x2*-0xf91+0x6e8),_0x403e8e=!(0x2f0*0x1+-0x2c+-0x2c3),_0x3f8a16=!(0xadd+0x113e*-0x2+0x17a0),_0x80e419=null,_0x5b55f9=-0x68b+-0x1*-0x283+0x409,_0x2c0d73;if(_0x72dc65?_0x32be7e===_0x24dd8d?(_0x80e419=Rh,_0x5d393d=!(0xc68+-0x21e9+-0x44d*-0x5)):_0x32be7e===_0x854a8f?(_0x80e419=ol,_0x5d393d=!(-0xf9e+0xb*0x15d+-0x1*-0x9f)):_0x32be7e===_0x540824?(_0x80e419=nt,_0x5b55f9=-0x23f0+-0x1a3e+0x3e30):_0x32be7e===_0x3ab9d6?(_0x80e419=Xt,_0x5b55f9=-0x23f*0x1+-0xb70+-0x7*-0x1f5):_0x32be7e===_0x46f736?(_0x80e419=Fh,_0x5d393d=!(-0x1a8e+0xe52+0xc3c),_0x540e8e=!(-0x1825+-0x3*-0x20e+0x1*0x11fb)):_0x32be7e===_0x5550f1||_0x32be7e===_0x58958b?(_0x80e419=_0x32be7e===_0x5550f1?ll:cl,_0x5d393d=!(-0x602+0xf6*0xb+-0x1*0x490),_0x403e8e=!(-0x1*-0x11a7+-0x3*-0x31+-0x123a)):(_0x32be7e===_0x54071a||_0x32be7e===_0x2bab4f)&&(_0x80e419=_0x32be7e===_0x54071a?Nh:kh,_0x5d393d=!(0x1a7f+-0x11b7+-0x8c8),_0x3f8a16=!(-0xeb3+-0xbed*-0x1+-0x47*-0xa)):_0x1db66e===-0xbe7+0xb5*-0x27+0x2*0x13cd&&(_0x80e419=Ne),!_0x80e419)return w['error']('This\x20DDS\x20p'+'ixel\x20forma'+'t\x20is\x20curre'+'ntly\x20unsup'+'ported.\x20Em'+'pty\x20textur'+'e\x20will\x20be\x20'+'created\x20in'+'stead\x20of\x20'+_0x59b850+'.'),_0x2c0d73=new _e(_0x233e84,{'width':0x4,'height':0x4,'format':wr,'name':'dds-legacy'+'-empty'}),_0x2c0d73;_0x2c0d73=new _e(_0x233e84,{'name':_0x59b850,'profilerHint':Er,'addressU':_0x5d8c54?ue:yt,'addressV':_0x5d8c54?ue:yt,'width':_0x251b0b,'height':_0x1b6f7e,'format':_0x80e419,'cubemap':_0x5d8c54,'mipmaps':_0x1c047c>-0x1*0x232f+0xb29*0x1+0x1807,..._0x2d2e76});let _0x2d7c8c=0x17fd+0xae1*0x3+-0x3820;const _0x1cd4b1=_0x5d8c54?0x18df*-0x1+-0x2567+0x3e4c:0x1*0xd79+-0x5*0x2e2+-0xb*-0x16;let _0x1a711c;const _0x5b32a5=-0xac0+-0x18a3*0x1+0x2367,_0x438998=0x79b+0x1121+-0x18b8,_0x1a9177=_0x32be7e===_0x24dd8d?0x1*0x1764+0x1b2*0x1+-0x190e:-0x14c8+0xb94*-0x3+0x3794;let _0x41887c,_0xa84368,_0x4c2ae0;for(let _0x5e96bb=-0x557*0x6+0x1eb8+-0x152*-0x1;_0x5e96bb<_0x1cd4b1;_0x5e96bb++){let _0x3db61b=_0x251b0b,_0x59a7d6=_0x1b6f7e;for(let _0x69323c=-0x21da+0x9*0x382+-0x124*-0x2;_0x69323c<_0x1c047c;_0x69323c++){_0x5d393d?_0x540e8e?_0x1a711c=Math['floor']((_0x3db61b+(-0x9*-0x39+-0x1*-0xc73+-0xe71))/(0xcff+0xd5f+-0x1a5a))*Math['floor']((_0x59a7d6+(-0x2d*-0x19+0xf03+-0x1365))/(0x1e9f+-0x1426+0x1*-0xa75))*(0x267b+0x1a00+-0x4073):_0x403e8e?_0x1a711c=Math['max'](_0x3db61b,0x1fee*-0x1+0x1b8d*0x1+0x471*0x1)*Math['max'](_0x59a7d6,-0x4fd*-0x1+-0x17*-0x1a9+-0x2b24)/(0x18ca*-0x1+0x443*-0x1+-0x1*-0x1d11):_0x3f8a16?_0x1a711c=Math['max'](_0x3db61b,0x10f6+-0x716*-0x3+-0x1*0x2630)*Math['max'](_0x59a7d6,0x71+-0x1ac6+0x18d*0x11)/(-0xc2*-0x26+0xcb4+-0x297e):(_0x41887c=Math['floor']((_0x3db61b+_0x5b32a5-(-0x1786+0x876+0xf11*0x1))/_0x5b32a5),_0xa84368=Math['floor']((_0x59a7d6+_0x438998-(0x147e+0x1*-0x1ce4+0x867))/_0x438998),_0x4c2ae0=_0x41887c*_0xa84368,_0x1a711c=_0x4c2ae0*_0x1a9177):_0x1a711c=_0x3db61b*_0x59a7d6*(0x245*0x1+0x12e+-0x36f);const _0x2bc908=_0x80e419===Xt?new Float32Array(_0x15e08b,_0x2d7c8c,_0x1a711c):_0x80e419===nt?new Uint16Array(_0x15e08b,_0x2d7c8c,_0x1a711c):new Uint8Array(_0x15e08b,_0x2d7c8c,_0x1a711c);_0x5d8c54?(_0x2c0d73['_levels'][_0x69323c]||(_0x2c0d73['_levels'][_0x69323c]=[]),_0x2c0d73['_levels'][_0x69323c][_0x5e96bb]=_0x2bc908):_0x2c0d73['_levels'][_0x69323c]=_0x2bc908,_0x2d7c8c+=_0x1a711c*_0x5b55f9,_0x3db61b=Math['max'](_0x3db61b*(-0x25*0x5d+-0x1843*0x1+0x25b4+0.5),0x7ab*-0x1+0x10a0+0x47a*-0x2),_0x59a7d6=Math['max'](_0x59a7d6*(-0x1de5+-0x3b0*-0x2+-0x1*-0x1685+0.5),-0x96+-0x245d+0x56*0x6e);}}return _0x2c0d73['upload'](),_0x2c0d73;}}class Tk extends qn{constructor(_0x247ef2){super(),this['maxRetries']=0xc56+-0x220f*-0x1+-0x6b*0x6f;}['load'](_0x14d6c7,_0x240036,_0x5c2f8a){pe['fetchArray'+'Buffer'](_0x14d6c7['load'],_0x240036,_0x5c2f8a,this['maxRetries']),_0x5c2f8a['data']&&!_0x5c2f8a['data']['type']&&(_0x5c2f8a['data']['type']=qc);}['open'](_0x3f4035,_0x4fe734,_0x25f597,_0x96913b={}){const _0x4a8a48=this['parse'](_0x4fe734);if(!_0x4a8a48)return null;const _0x4f8ed9=new _e(_0x25f597,{'name':_0x3f4035,'profilerHint':Er,'addressU':yt,'addressV':ue,'minFilter':Te,'magFilter':Te,'width':_0x4a8a48['width'],'height':_0x4a8a48['height'],'levels':_0x4a8a48['levels'],'format':Ne,'type':qc,'mipmaps':!(0x32d*0x7+-0x19be+0x384),..._0x96913b});return _0x4f8ed9['upload'](),_0x4f8ed9;}['parse'](_0x437c21){const _0x474aab=new pS(_0x437c21);if(!_0x474aab['readLine']()['startsWith']('#?RADIANCE'))return w['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20ma'+'gic'),null;const _0x56cf59={};for(;;){const _0x3591e1=_0x474aab['readLine']();if(_0x3591e1['length']===0x1031*0x1+-0x92f*-0x4+-0x34ed)break;{const _0x3e6d17=_0x3591e1['split']('=');_0x3e6d17['length']===0x971+-0x7a*0x33+0x2f*0x51&&(_0x56cf59[_0x3e6d17[-0x2007+-0x879+-0x120*-0x24]]=_0x3e6d17[0x2ef+0x1bae+-0x1e9c]);}}if(!_0x56cf59['hasOwnProp'+'erty']('FORMAT'))return w['error']('radiance\x20h'+'eader\x20miss'+'ing\x20FORMAT'+'\x20variable'),null;const _0x456f8f=_0x474aab['readLine']()['split']('\x20');if(_0x456f8f['length']!==-0x5*-0x427+0xd72+-0x1*0x2231)return w['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20re'+'solution'),null;const _0x3f36a8=parseInt(_0x456f8f[0x93a+-0x1b*-0x45+-0x2*0x840],-0x1632+-0x1e92+0x34ce),_0x2d1476=parseInt(_0x456f8f[0x247d*-0x1+-0x2fb*-0xb+0x3b7],0x48d+-0xd4*0x22+0x17a5),_0x228ea4=this['_readPixel'+'s'](_0x474aab,_0x2d1476,_0x3f36a8,_0x456f8f[0x3b*0x39+0x25d8+-0x1a5*0x1f]==='-Y');return _0x228ea4?{'width':_0x2d1476,'height':_0x3f36a8,'levels':[_0x228ea4]}:null;}['_readPixel'+'s'](_0x4f4409,_0x923dee,_0x31c207,_0x1a031f){if(_0x923dee<-0x17*0x2f+-0x20c5+0x1283*0x2||_0x923dee>-0x409+0x22cc+0x613c)return this['_readPixel'+'sFlat'](_0x4f4409,_0x923dee,_0x31c207);const _0x1ce6af=[0x1*-0x14db+-0xbe8+0x20c3*0x1,0xd89+0xe09+0x2*-0xdc9,-0x18a0+0x90d+0xf93,0x2b*0x76+-0xa*-0x349+-0x34ac];if(_0x4f4409['readArray'](_0x1ce6af),_0x1ce6af[0xe10+0xc94+-0x1aa4]!==-0x21b0+-0x1879+0x3a2b*0x1||_0x1ce6af[-0x15ef+0x1dcd+-0x7dd]!==-0xb*-0x1e7+-0x5*-0x2ef+0x2396*-0x1||(_0x1ce6af[-0xb*-0x7+-0x49f*-0x1+0x275*-0x2]&-0x1fc4+-0x99b+0x29df)!==-0x3fb*0x9+0x258d+-0x1ba)return _0x4f4409['skip'](-(-0xcf2*0x1+-0xe*0x64+-0x151*-0xe)),this['_readPixel'+'sFlat'](_0x4f4409,_0x923dee,_0x31c207);const _0xf3d632=new ArrayBuffer(_0x923dee*_0x31c207*(-0x889+-0x624*0x1+0x1*0xeb1)),_0x303a06=new Uint8Array(_0xf3d632);let _0x1fa591=_0x1a031f?-0x9*-0x233+0x1651+0x436*-0xa:_0x923dee*(-0x147b+-0x27+0x14a6)*(_0x31c207-(0x11a5+0x1e0a+0x1*-0x2fae)),_0x3c474d,_0x41829d,_0x435b4b,_0x4b6b66,_0x57077c,_0x3bcc33;for(_0x41829d=0x835+-0xfb5*-0x2+0x17*-0x1b9;_0x41829d<_0x31c207;++_0x41829d){if(_0x41829d&&_0x4f4409['readArray'](_0x1ce6af),(_0x1ce6af[0xb5+-0x11*-0x51+-0x614]<<-0x1*-0x10f+-0x24ac+0x23a5)+_0x1ce6af[0x25*-0x1f+-0x1d7*-0x11+0x1*-0x1ac9]!==_0x923dee)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'width'),null;for(_0x4b6b66=-0x1*0x25f3+-0xda+-0x3*-0xcef;_0x4b6b66<-0x506*-0x7+0x114e+-0x45f*0xc;++_0x4b6b66)for(_0x3c474d=-0x1320+0x1e6*0x7+0x5d6;_0x3c474d<_0x923dee;)if(_0x57077c=_0x4f4409['readU8'](),_0x57077c>0x1854+0xc1c+-0x398*0xa){if(_0x57077c-=0x41*-0x1a+0x1003*-0x1+0x171d,_0x3c474d+_0x57077c>_0x923dee)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x3bcc33=_0x4f4409['readU8'](),_0x435b4b=-0x1c2b*0x1+0x1*-0x1345+-0x2f7*-0x10;_0x435b4b<_0x57077c;++_0x435b4b)_0x303a06[_0x1fa591+_0x4b6b66+(0x1*0x4cf+0x58c+-0xa57)*_0x3c474d++]=_0x3bcc33;}else{if(_0x57077c===0x1e58+-0x15da*-0x1+-0x3432||_0x3c474d+_0x57077c>_0x923dee)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x435b4b=-0xdd6*-0x1+-0x2*0xd69+0xcfc;_0x435b4b<_0x57077c;++_0x435b4b)_0x303a06[_0x1fa591+_0x4b6b66+(-0x1*-0x175+-0x1*-0x126a+-0xd*0x187)*_0x3c474d++]=_0x4f4409['readU8']();}_0x1fa591+=_0x923dee*(0x674+-0xa*-0x301+0x2e*-0xcb)*(_0x1a031f?0x2ef+-0x354+0x66:-(-0xc35+-0x862+0x1498));}return _0x303a06;}['_readPixel'+'sFlat'](_0x51ad67,_0x25600c,_0x59924d){return _0x51ad67['remainingB'+'ytes']===_0x25600c*_0x59924d*(0x1f4b+0x4*-0x881+0x2bd)?new Uint8Array(_0x51ad67['arraybuffe'+'r'],_0x51ad67['offset']):null;}}const qg={'repeat':yt,'clamp':ue,'mirror':Du},jg={'nearest':Te,'linear':vt,'nearest_mip_nearest':Ph,'linear_mip_nearest':Dh,'nearest_mip_linear':Mh,'linear_mip_linear':ha},wk={'default':Ms,'rgbm':Ki,'rgbe':qc,'rgbp':Bo,'swizzleGGGR':zo},Ek=function(_0x2ef582){const _0x2743ec=$i['calcMipLev'+'elsCount'](_0x2ef582['_width'],_0x2ef582['_height']),_0x1a9569=function(_0x1ae3a9){return _0x1ae3a9 instanceof HTMLCanvasElement||_0x1ae3a9 instanceof HTMLImageElement||_0x1ae3a9 instanceof HTMLVideoElement;};if(!(_0x2ef582['_format']===Ne||_0x2ef582['_format']===Xt)||_0x2ef582['_volume']||_0x2ef582['_compresse'+'d']||_0x2ef582['_levels']['length']===-0x3*-0xb61+0x1453+-0x1*0x3675||_0x2ef582['_levels']['length']===_0x2743ec||_0x1a9569(_0x2ef582['_cubemap']?_0x2ef582['_levels'][0x2078+-0xa47+-0x1631][-0x16d*-0xb+-0xcb4+-0x2fb*0x1]:_0x2ef582['_levels'][0x1cb4+0x1b11+-0x37c5]))return;const _0x2832e0=function(_0x4ad552,_0x1656ed,_0x44e63e){const _0x3f1174=Math['max'](-0x1eb4+0x1f*0xb3+0x44*0x22,_0x4ad552>>0x5*0x6df+-0x1*-0x62b+-0x1*0x2885),_0x173cc5=Math['max'](0x86d+0x1c*0x10f+-0x2610,_0x1656ed>>-0x1ce7*0x1+0x1772+0x576),_0x4461af=new _0x44e63e['constructo'+'r'](_0x3f1174*_0x173cc5*(-0x1e33+0x5d1+0x1866)),_0x5e0b1a=Math['floor'](_0x4ad552/_0x3f1174),_0x42b17b=Math['floor'](_0x1656ed/_0x173cc5),_0xe24f1a=_0x5e0b1a*_0x42b17b;for(let _0x394370=0x254e+0x25dc+-0x42d*0x12;_0x394370<_0x173cc5;++_0x394370)for(let _0xa21db7=0x249d+0x21fa+-0x4697;_0xa21db7<_0x3f1174;++_0xa21db7)for(let _0x71cc83=-0x16b8*0x1+0x171f+-0x67;_0x71cc83<0x71f+-0x6d*0x3b+-0x481*-0x4;++_0x71cc83){let _0x3ec340=-0x16f8+-0x197+0x188f;for(let _0x5b0919=-0x1e21+0xf2*0x21+-0x1*0x111;_0x5b0919<_0x42b17b;++_0x5b0919)for(let _0xebcce0=0x1197+0x4c*0x2+-0x122f;_0xebcce0<_0x5e0b1a;++_0xebcce0)_0x3ec340+=_0x44e63e[(_0xa21db7*_0x5e0b1a+_0xebcce0+(_0x394370*_0x42b17b+_0x5b0919)*_0x4ad552)*(0x220*0x5+0x1dc5+-0x2861)+_0x71cc83];_0x4461af[(_0xa21db7+_0x394370*_0x3f1174)*(-0x23dc+0x33*-0x4d+0x3337)+_0x71cc83]=_0x3ec340/_0xe24f1a;}return _0x4461af;};for(let _0xb5c533=_0x2ef582['_levels']['length'];_0xb5c533<_0x2743ec;++_0xb5c533){const _0x6ea785=Math['max'](0x248f+0x351*0x7+-0x3bc5,_0x2ef582['_width']>>_0xb5c533-(0x4*-0x49+-0x1ba5+-0x86*-0x37)),_0x237388=Math['max'](-0x2505+0x206c+0x49a,_0x2ef582['_height']>>_0xb5c533-(-0xf7b+-0xa6f+-0x5*-0x52f));if(_0x2ef582['_cubemap']){const _0x3c7437=[];for(let _0x2dc018=-0x196a+0x1954+0x16;_0x2dc018<-0xe3a*-0x2+-0x1*-0x236b+0x23*-0x1d3;++_0x2dc018)_0x3c7437['push'](_0x2832e0(_0x6ea785,_0x237388,_0x2ef582['_levels'][_0xb5c533-(0x1*-0x36d+-0x2589+-0x1*-0x28f7)][_0x2dc018]));_0x2ef582['_levels']['push'](_0x3c7437);}else _0x2ef582['_levels']['push'](_0x2832e0(_0x6ea785,_0x237388,_0x2ef582['_levels'][_0xb5c533-(0xba6+-0xbbb+-0x2*-0xb)]));}_0x2ef582['_levelsUpd'+'ated']=_0x2ef582['_cubemap']?[[!(0x1*-0x1b77+-0x145b+0x2fd2),!(0x1dc*-0x2+0x161a*-0x1+0x295*0xa),!(-0x149b+-0x1*-0x11cf+-0x4*-0xb3),!(-0x10b*0x13+0x243e+-0x106d),!(0x535+0x1e*-0x63+0x665),!(0x417+-0x49d*-0x3+-0x11ee)]]:[!(0x8a5*0x1+0x2*-0x1073+0x1841)];};class bk extends Qe{constructor(_0x1b3fad){super(_0x1b3fad,'texture');const _0x255b85=_0x1b3fad['assets'],_0x3efea1=_0x1b3fad['graphicsDe'+'vice'];this['_device']=_0x3efea1,this['_assets']=_0x255b85,this['imgParser']=new mk(_0x255b85,_0x3efea1),this['parsers']={'dds':new xk(_0x255b85),'ktx':new Sk(_0x255b85),'ktx2':new vk(_0x255b85,_0x3efea1),'basis':new dk(_0x255b85,_0x3efea1),'hdr':new Tk(_0x255b85)};}set['crossOrigi'+'n'](_0x5c88fb){this['imgParser']['crossOrigi'+'n']=_0x5c88fb;}get['crossOrigi'+'n'](){return this['imgParser']['crossOrigi'+'n'];}set['maxRetries'](_0x4e2f52){this['imgParser']['maxRetries']=_0x4e2f52;for(const _0x361793 in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x361793)&&(this['parsers'][_0x361793]['maxRetries']=_0x4e2f52);}get['maxRetries'](){return this['imgParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x477a8f){return _0x477a8f['indexOf']('?')>=-0x5d5+0x44e+0x11*0x17?_0x477a8f['split']('?')[0x745*-0x2+-0xb5a+-0x4*-0x679]:_0x477a8f;}['_getParser'](_0xd99a7e){const _0xb22a8c=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0xd99a7e))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0xb22a8c]||this['imgParser'];}['_getTextur'+'eOptions'](_0x19b976){var _0x3090c2;const _0x2e15c0={'profilerHint':Er};if(_0x19b976){((_0x3090c2=_0x19b976['name'])==null?void(0xe9*0x1b+-0x127c+-0x617):_0x3090c2['length'])>0x4da+-0xa6f*-0x3+-0xc0d*0x3&&(_0x2e15c0['name']=_0x19b976['name']);const _0x18af4f=_0x19b976['data'];_0x18af4f['hasOwnProp'+'erty']('minfilter')&&(_0x2e15c0['minFilter']=jg[_0x18af4f['minfilter']]),_0x18af4f['hasOwnProp'+'erty']('magfilter')&&(_0x2e15c0['magFilter']=jg[_0x18af4f['magfilter']]),_0x18af4f['hasOwnProp'+'erty']('addressu')&&(_0x2e15c0['addressU']=qg[_0x18af4f['addressu']]),_0x18af4f['hasOwnProp'+'erty']('addressv')&&(_0x2e15c0['addressV']=qg[_0x18af4f['addressv']]),_0x18af4f['hasOwnProp'+'erty']('mipmaps')&&(_0x2e15c0['mipmaps']=_0x18af4f['mipmaps']),_0x18af4f['hasOwnProp'+'erty']('anisotropy')&&(_0x2e15c0['anisotropy']=_0x18af4f['anisotropy']),_0x18af4f['hasOwnProp'+'erty']('flipY')&&(_0x2e15c0['flipY']=!!_0x18af4f['flipY']),_0x18af4f['hasOwnProp'+'erty']('srgb')&&(_0x2e15c0['srgb']=!!_0x18af4f['srgb']),_0x2e15c0['type']=Ms,_0x18af4f['hasOwnProp'+'erty']('type')?_0x2e15c0['type']=wk[_0x18af4f['type']]:_0x18af4f['hasOwnProp'+'erty']('rgbm')&&_0x18af4f['rgbm']?_0x2e15c0['type']=Ki:_0x19b976['file']&&(_0x19b976['file']['opt']&-0x3*0x94f+-0x4*-0x3c3+-0x295*-0x5)!==0xc33+0x801+-0xa1a*0x2&&(_0x2e15c0['type']=zo);}return _0x2e15c0;}['load'](_0x4c41af,_0x17fc4f,_0x1a27fc){typeof _0x4c41af=='string'&&(_0x4c41af={'load':_0x4c41af,'original':_0x4c41af}),this['_getParser'](_0x4c41af['original'])['load'](_0x4c41af,_0x17fc4f,_0x1a27fc);}['open'](_0x2a72cf,_0x221b11,_0x2dae1e){if(!_0x2a72cf)return;const _0x372069=this['_getTextur'+'eOptions'](_0x2dae1e);let _0x49551d=this['_getParser'](_0x2a72cf)['open'](_0x2a72cf,_0x221b11,this['_device'],_0x372069);return _0x49551d===null?_0x49551d=new _e(this['_device'],{'width':0x4,'height':0x4,'format':wr}):(Ek(_0x49551d),_0x221b11['unswizzled'+'GGGR']&&(_0x2dae1e['file']['variants']['basis']['opt']&=-(-0x407*0x1+0x1a55+-0x1645))),_0x49551d;}['patch'](_0x3d2dcc,_0x52c715){const _0x4c4cfd=_0x3d2dcc['resource'];if(!_0x4c4cfd)return;const _0x33782c=this['_getTextur'+'eOptions'](_0x3d2dcc);for(const _0x20fe6c of Object['keys'](_0x33782c))_0x4c4cfd[_0x20fe6c]=_0x33782c[_0x20fe6c];}}const Ak='inline',Ck='immersive-'+'vr',Ro='immersive-'+'ar',Yg='viewer',Pk='left',Mk='cpu-optimi'+'zed',Xv='gpu-optimi'+'zed',qv='luminance-'+'alpha',jv='unsigned-s'+'hort',Yv='float32';class Dk{constructor(_0x5482ce){h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRDOMOverl'+'ayState']),h(this,'_root',null),this['_manager']=_0x5482ce;}get['supported'](){return this['_supported'];}get['available'](){return this['_supported']&&this['_manager']['active']&&this['_manager']['_session']['domOverlay'+'State']!==null;}get['state'](){return!this['_supported']||!this['_manager']['active']||!this['_manager']['_session']['domOverlay'+'State']?null:this['_manager']['_session']['domOverlay'+'State']['type'];}set['root'](_0x4855e6){!this['_supported']||this['_manager']['active']||(this['_root']=_0x4855e6);}get['root'](){return this['_root'];}}const yc=[],Kg=[];class Tu extends me{constructor(_0x31a520,_0x323694,_0x446114,_0x2908f4=null){super(),h(this,'manager'),h(this,'_xrHitTest'+'Source'),h(this,'_transient'),h(this,'_inputSour'+'ce'),(this['manager']=_0x31a520,this['_xrHitTest'+'Source']=_0x323694,this['_transient']=_0x446114,this['_inputSour'+'ce']=_0x2908f4);}['remove'](){if(!this['_xrHitTest'+'Source'])return;const _0x4786fd=this['manager']['hitTest']['sources'],_0x453c04=_0x4786fd['indexOf'](this);_0x453c04!==-(-0x12a2+0x897+0x283*0x4)&&_0x4786fd['splice'](_0x453c04,-0x2202+0x125a+-0xfa9*-0x1),this['onStop']();}['onStop'](){this['_xrHitTest'+'Source']['cancel'](),this['_xrHitTest'+'Source']=null,this['fire']('remove'),this['manager']['hitTest']['fire']('remove',this);}['update'](_0x454758){if(this['_transient']){const _0x1bc56b=_0x454758['getHitTest'+'ResultsFor'+'TransientI'+'nput'](this['_xrHitTest'+'Source']);for(let _0x4f448a=-0x2149+-0x1*0x2533+0x2*0x233e;_0x4f448a<_0x1bc56b['length'];_0x4f448a++){const _0x3c3595=_0x1bc56b[_0x4f448a];if(!_0x3c3595['results']['length'])continue;let _0x783eec;_0x3c3595['inputSourc'+'e']&&(_0x783eec=this['manager']['input']['_getByInpu'+'tSource'](_0x3c3595['inputSourc'+'e'])),this['updateHitR'+'esults'](_0x3c3595['results'],_0x783eec);}}else{const _0x3df507=_0x454758['getHitTest'+'Results'](this['_xrHitTest'+'Source']);if(!_0x3df507['length'])return;this['updateHitR'+'esults'](_0x3df507);}}['updateHitR'+'esults'](_0x4efe34,_0xd03004){if(this['_inputSour'+'ce']&&this['_inputSour'+'ce']!==_0xd03004)return;const _0x4363e7=yc['pop']()??new D();_0xd03004?_0x4363e7['copy'](_0xd03004['getOrigin']()):_0x4363e7['copy'](this['manager']['camera']['getPositio'+'n']());let _0x534179=(0x1*0x1775+0x1*-0x875+-0xeff*0x1)/(-0x1577+0x1412+-0x3*-0x77),_0x3cf3ce=null;const _0x101088=yc['pop']()??new D(),_0x53de9f=Kg['pop']()??new le();for(let _0x3d9eb6=-0x1bc1+-0x3*0xa7b+0x3b32;_0x3d9eb6<_0x4efe34['length'];_0x3d9eb6++){const _0x320609=_0x4efe34[_0x3d9eb6]['getPose'](this['manager']['_reference'+'Space']),_0x117b63=_0x4363e7['distance'](_0x320609['transform']['position']);_0x117b63>=_0x534179||(_0x534179=_0x117b63,_0x3cf3ce=_0x4efe34[_0x3d9eb6],_0x101088['copy'](_0x320609['transform']['position']),_0x53de9f['copy'](_0x320609['transform']['orientatio'+'n']));}this['fire']('result',_0x101088,_0x53de9f,_0xd03004||this['_inputSour'+'ce'],_0x3cf3ce),this['manager']['hitTest']['fire']('result',this,_0x101088,_0x53de9f,_0xd03004||this['_inputSour'+'ce'],_0x3cf3ce),yc['push'](_0x4363e7),yc['push'](_0x101088),Kg['push'](_0x53de9f);}}h(Tu,'EVENT_REMO'+'VE','remove'),h(Tu,'EVENT_RESU'+'LT','result');class Wr extends me{constructor(_0x517a4c){super(),h(this,'manager'),h(this,'_supported',Me['browser']&&!!(window['XRSession']&&window['XRSession']['prototype']['requestHit'+'TestSource'])),h(this,'_available',!(-0x2*0x36+-0x745+-0x1*-0x7b2)),h(this,'_checkingA'+'vailabilit'+'y',!(0xbc7*0x1+-0x1a97+0xed1)),h(this,'sources',[]),(this['manager']=_0x517a4c,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){if(this['manager']['session']['enabledFea'+'tures']){const _0x2a4e71=this['manager']['session']['enabledFea'+'tures']['indexOf']('hit-test')!==-(-0x22cb*0x1+-0x2612+0x48de);if(!_0x2a4e71)return;this['_available']=_0x2a4e71,this['fire']('available');}else this['_checkingA'+'vailabilit'+'y']||(this['_checkingA'+'vailabilit'+'y']=!(0xf97+0x684+-0x161b),this['manager']['session']['requestRef'+'erenceSpac'+'e'](Yg)['then'](_0x190663=>{this['manager']['session']['requestHit'+'TestSource']({'space':_0x190663})['then'](_0x3b19c9=>{_0x3b19c9['cancel'](),this['manager']['active']&&(this['_available']=!(0x15bb+-0x89*0x2c+0x1d1),this['fire']('available'));})['catch'](()=>{});})['catch'](()=>{}));}['_onSession'+'End'](){if(this['_available']){this['_available']=!(0x6b1*-0x4+-0x6c5+0x218a);for(let _0x36d50b=-0x15*-0x7d+-0x70f*-0x1+-0x1*0x1150;_0x36d50b<this['sources']['length'];_0x36d50b++)this['sources'][_0x36d50b]['onStop']();this['sources']=[],this['fire']('unavailabl'+'e');}}['start'](_0x383cc1={}){var _0xd49c5d,_0x1d05aa;if(!this['_supported']){(_0xd49c5d=_0x383cc1['callback'])==null||_0xd49c5d['call'](_0x383cc1,new Error('XR\x20HitTest'+'\x20is\x20not\x20su'+'pported'),null);return;}if(!this['_available']){(_0x1d05aa=_0x383cc1['callback'])==null||_0x1d05aa['call'](_0x383cc1,new Error('XR\x20HitTest'+'\x20is\x20not\x20av'+'ailable'),null);return;}!_0x383cc1['profile']&&!_0x383cc1['spaceType']&&(_0x383cc1['spaceType']=Yg);let _0x13e8dd;const _0x51e3b8=_0x383cc1['offsetRay'];if(_0x51e3b8){const _0x36868d=new DOMPoint(_0x51e3b8['origin']['x'],_0x51e3b8['origin']['y'],_0x51e3b8['origin']['z'],0x2651*-0x1+-0x21*-0x6b+0x1887*0x1),_0x24dcec=new DOMPoint(_0x51e3b8['direction']['x'],_0x51e3b8['direction']['y'],_0x51e3b8['direction']['z'],-0x2120+0x2*-0x2e5+0x26ea);_0x13e8dd=new XRRay(_0x36868d,_0x24dcec);}const _0x402abf=_0x383cc1['callback'];_0x383cc1['spaceType']?this['manager']['session']['requestRef'+'erenceSpac'+'e'](_0x383cc1['spaceType'])['then'](_0x2bb027=>{if(!this['manager']['session']){const _0x4b992b=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(2)');_0x402abf&&_0x402abf(_0x4b992b),this['fire']('error',_0x4b992b);return;}this['manager']['session']['requestHit'+'TestSource']({'space':_0x2bb027,'entityTypes':_0x383cc1['entityType'+'s']||void(-0x2*-0x3e3+0x19dc+-0x11f*0x1e),'offsetRay':_0x13e8dd})['then'](_0x50bbdc=>{this['_onHitTest'+'Source'](_0x50bbdc,!(-0x6*-0x2b6+-0x1334+0x2f1),_0x383cc1['inputSourc'+'e'],_0x402abf);})['catch'](_0x3ea336=>{_0x402abf&&_0x402abf(_0x3ea336),this['fire']('error',_0x3ea336);});})['catch'](_0x454073=>{_0x402abf&&_0x402abf(_0x454073),this['fire']('error',_0x454073);}):this['manager']['session']['requestHit'+'TestSource'+'ForTransie'+'ntInput']({'profile':_0x383cc1['profile'],'entityTypes':_0x383cc1['entityType'+'s']||void(-0x9fc+-0x1142+0x13d*0x16),'offsetRay':_0x13e8dd})['then'](_0x213767=>{this['_onHitTest'+'Source'](_0x213767,!(0x13*-0x6e+-0x1619*0x1+0x1e43),_0x383cc1['inputSourc'+'e'],_0x402abf);})['catch'](_0x14e17a=>{_0x402abf&&_0x402abf(_0x14e17a),this['fire']('error',_0x14e17a);});}['_onHitTest'+'Source'](_0x58f80f,_0x61236d,_0x2026c1,_0x1fbc84){if(!this['manager']['session']){_0x58f80f['cancel']();const _0x17c68c=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(3)');_0x1fbc84&&_0x1fbc84(_0x17c68c),this['fire']('error',_0x17c68c);return;}const _0x596381=new Tu(this['manager'],_0x58f80f,_0x61236d,_0x2026c1??null);this['sources']['push'](_0x596381),_0x1fbc84&&_0x1fbc84(null,_0x596381),this['fire']('add',_0x596381);}['update'](_0x403ab1){if(this['_available']){for(let _0x4c6947=-0x1a4e*-0x1+-0x1*-0xd9b+-0x27e9;_0x4c6947<this['sources']['length'];_0x4c6947++)this['sources'][_0x4c6947]['update'](_0x403ab1);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}}h(Wr,'EVENT_AVAI'+'LABLE','available'),h(Wr,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Wr,'EVENT_ADD','add'),h(Wr,'EVENT_REMO'+'VE','remove'),h(Wr,'EVENT_RESU'+'LT','result'),h(Wr,'EVENT_ERRO'+'R','error');class wu extends me{constructor(_0xd0fbd,_0x1184a3){super(),h(this,'_image'),h(this,'_width'),h(this,'_bitmap',null),h(this,'_measuredW'+'idth',-0x225e+-0x246a+0x46c8),h(this,'_trackable',!(0x2151+0x2057*-0x1+-0xf9)),h(this,'_tracking',!(-0x7f8*0x1+0x2617+-0x1e1e)),h(this,'_emulated',!(0x38*-0x69+-0x16cc+0x2dc5*0x1)),h(this,'_pose',null),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_image']=_0xd0fbd,this['_width']=_0x1184a3);}get['image'](){return this['_image'];}set['width'](_0xdebd5b){this['_width']=_0xdebd5b;}get['width'](){return this['_width'];}get['trackable'](){return this['_trackable'];}get['tracking'](){return this['_tracking'];}get['emulated'](){return this['_emulated'];}['prepare'](){return this['_bitmap']?{'image':this['_bitmap'],'widthInMeters':this['_width']}:createImageBitmap(this['_image'])['then'](_0x198a14=>(this['_bitmap']=_0x198a14,{'image':this['_bitmap'],'widthInMeters':this['_width']}));}['destroy'](){this['_image']=null,this['_pose']=null,this['_bitmap']&&(this['_bitmap']['close'](),this['_bitmap']=null);}['getPositio'+'n'](){return this['_pose']&&this['_position']['copy'](this['_pose']['transform']['position']),this['_position'];}['getRotatio'+'n'](){return this['_pose']&&this['_rotation']['copy'](this['_pose']['transform']['orientatio'+'n']),this['_rotation'];}}h(wu,'EVENT_TRAC'+'KED','tracked'),h(wu,'EVENT_UNTR'+'ACKED','untracked');class Kv extends me{constructor(_0x1c3d27){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRImageTra'+'ckingResul'+'t']),h(this,'_available',!(0x446*0x9+-0x1e*-0x134+-0x4a8d)),h(this,'_images',[]),(this['_manager']=_0x1c3d27,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['add'](_0x582c39,_0x48a68b){if(!this['_supported']||this['_manager']['active'])return null;const _0x210b3f=new wu(_0x582c39,_0x48a68b);return this['_images']['push'](_0x210b3f),_0x210b3f;}['remove'](_0x1bdbe1){if(this['_manager']['active'])return;const _0x46d1bc=this['_images']['indexOf'](_0x1bdbe1);_0x46d1bc!==-(-0xe18+-0x2446+0x325f)&&(_0x1bdbe1['destroy'](),this['_images']['splice'](_0x46d1bc,0x44*0x38+0xb5*-0x11+0x49*-0xa));}['_onSession'+'Start'](){this['_manager']['session']['getTracked'+'ImageScore'+'s']()['then'](_0x3b6c86=>{this['_available']=!(0x6d3*0x1+-0x12a+-0x5a9);for(let _0x204f45=-0x96f+-0x16ec+0x205b;_0x204f45<_0x3b6c86['length'];_0x204f45++)this['_images'][_0x204f45]['_trackable']=_0x3b6c86[_0x204f45]==='trackable';})['catch'](_0xc6347a=>{this['_available']=!(-0x1ad*0x15+-0x158*-0x10+0x1*0xdb2),this['fire']('error',_0xc6347a);});}['_onSession'+'End'](){this['_available']=!(0x13f7+-0xdf*-0x2a+-0x388c);for(let _0x28d8b9=-0x256d+-0x16db*-0x1+0xe92;_0x28d8b9<this['_images']['length'];_0x28d8b9++){const _0x528eb9=this['_images'][_0x28d8b9];_0x528eb9['_pose']=null,_0x528eb9['_measuredW'+'idth']=0x167*0x15+0x3ee+0x2161*-0x1,_0x528eb9['_tracking']&&(_0x528eb9['_tracking']=!(-0x22de*0x1+-0x3*-0x8ff+-0x1*-0x7e2),_0x528eb9['fire']('untracked'));}}['prepareIma'+'ges'](_0x40a4c5){this['_images']['length']?Promise['all'](this['_images']['map'](_0x11d0b0=>_0x11d0b0['prepare']()))['then'](_0x56fdd3=>{_0x40a4c5(null,_0x56fdd3);})['catch'](_0x523f06=>{_0x40a4c5(_0x523f06,null);}):_0x40a4c5(null,null);}['update'](_0x22b343){if(!this['_available'])return;const _0x546629=_0x22b343['getImageTr'+'ackingResu'+'lts'](),_0x415f3c={};for(let _0x13a19d=0x22*-0x62+0x51b+0x7e9;_0x13a19d<_0x546629['length'];_0x13a19d++){_0x415f3c[_0x546629[_0x13a19d]['index']]=_0x546629[_0x13a19d];const _0x39febb=this['_images'][_0x546629[_0x13a19d]['index']];_0x39febb['_emulated']=_0x546629[_0x13a19d]['trackingSt'+'ate']==='emulated',_0x39febb['_measuredW'+'idth']=_0x546629[_0x13a19d]['measuredWi'+'dthInMeter'+'s'],_0x39febb['_pose']=_0x22b343['getPose'](_0x546629[_0x13a19d]['imageSpace'],this['_manager']['_reference'+'Space']);}for(let _0x54f03e=0x1343+-0x1604+0xf*0x2f;_0x54f03e<this['_images']['length'];_0x54f03e++)this['_images'][_0x54f03e]['_tracking']&&!_0x415f3c[_0x54f03e]?(this['_images'][_0x54f03e]['_tracking']=!(-0x244f+-0x139f+0x37ef),this['_images'][_0x54f03e]['fire']('untracked')):!this['_images'][_0x54f03e]['_tracking']&&_0x415f3c[_0x54f03e]&&(this['_images'][_0x54f03e]['_tracking']=!(-0x1716+0x8b*0x41+0x19*-0x7d),this['_images'][_0x54f03e]['fire']('tracked'));}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['images'](){return this['_images'];}}h(Kv,'EVENT_ERRO'+'R','error');class Ik{constructor(_0x5515c7,_0x3cff42){h(this,'_index'),h(this,'_hand'),h(this,'_joints',[]),h(this,'_tip',null),(this['_index']=_0x5515c7,this['_hand']=_0x3cff42,this['_hand']['_fingers']['push'](this));}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['joints'](){return this['_joints'];}get['tip'](){return this['_tip'];}}const Zg=Me['browser']&&window['XRHand']?['thumb-tip','index-fing'+'er-tip','middle-fin'+'ger-tip','ring-finge'+'r-tip','pinky-fing'+'er-tip']:[],Zv={};for(let l=0xa0*-0x12+-0x390+-0x13c*-0xc;l<Zg['length'];l++)Zv[Zg[l]]=!(-0x1*-0xb6e+0x17f0+-0x235e);class Qg{constructor(_0x12a433,_0x1f852c,_0x40ad20,_0x145faf=null){h(this,'_index'),h(this,'_id'),h(this,'_hand'),h(this,'_finger'),h(this,'_wrist'),h(this,'_tip'),h(this,'_radius',null),h(this,'_localTran'+'sform',new te()),h(this,'_worldTran'+'sform',new te()),h(this,'_localPosi'+'tion',new D()),h(this,'_localRota'+'tion',new le()),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_dirtyLoca'+'l',!(0x1f97+0x1bd6+-0x3b6d)),(this['_index']=_0x12a433,this['_id']=_0x1f852c,this['_hand']=_0x40ad20,this['_finger']=_0x145faf,this['_wrist']=_0x1f852c==='wrist',this['_tip']=this['_finger']&&!!Zv[_0x1f852c]);}['update'](_0xd5e5ea){this['_dirtyLoca'+'l']=!(-0x1463+-0x79f+-0x1c02*-0x1),this['_radius']=_0xd5e5ea['radius'],this['_localPosi'+'tion']['copy'](_0xd5e5ea['transform']['position']),this['_localRota'+'tion']['copy'](_0xd5e5ea['transform']['orientatio'+'n']);}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(0xf*-0x119+0x12a9+0x1*-0x231),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],D['ONE']));const _0x1c364f=this['_hand']['_manager']['camera']['parent'];_0x1c364f?this['_worldTran'+'sform']['mul2'](_0x1c364f['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['getPositio'+'n'](){return this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position'];}['getRotatio'+'n'](){return this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation'];}get['id'](){return this['_id'];}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['finger'](){return this['_finger'];}get['wrist'](){return this['_wrist'];}get['tip'](){return this['_tip'];}get['radius'](){return this['_radius']||-0xcb8+-0x1c1*0xb+0x1*0x2003+0.005;}}let Nc=[];const zr=new D(),vc=new D(),Jg=new D();Me['browser']&&window['XRHand']&&(Nc=[['thumb-meta'+'carpal','thumb-phal'+'anx-proxim'+'al','thumb-phal'+'anx-distal','thumb-tip'],['index-fing'+'er-metacar'+'pal','index-fing'+'er-phalanx'+'-proximal','index-fing'+'er-phalanx'+'-intermedi'+'ate','index-fing'+'er-phalanx'+'-distal','index-fing'+'er-tip'],['middle-fin'+'ger-metaca'+'rpal','middle-fin'+'ger-phalan'+'x-proximal','middle-fin'+'ger-phalan'+'x-intermed'+'iate','middle-fin'+'ger-phalan'+'x-distal','middle-fin'+'ger-tip'],['ring-finge'+'r-metacarp'+'al','ring-finge'+'r-phalanx-'+'proximal','ring-finge'+'r-phalanx-'+'intermedia'+'te','ring-finge'+'r-phalanx-'+'distal','ring-finge'+'r-tip'],['pinky-fing'+'er-metacar'+'pal','pinky-fing'+'er-phalanx'+'-proximal','pinky-fing'+'er-phalanx'+'-intermedi'+'ate','pinky-fing'+'er-phalanx'+'-distal','pinky-fing'+'er-tip']]);class Eu extends me{constructor(_0x42586e){super(),h(this,'_manager'),h(this,'_inputSour'+'ce'),h(this,'_tracking',!(-0x908*-0x2+-0x1*-0x1bb3+0x2dc2*-0x1)),h(this,'_fingers',[]),h(this,'_joints',[]),h(this,'_jointsByI'+'d',{}),h(this,'_tips',[]),h(this,'_wrist',null);const _0x3c8d01=_0x42586e['_xrInputSo'+'urce']['hand'];if(this['_manager']=_0x42586e['_manager'],this['_inputSour'+'ce']=_0x42586e,_0x3c8d01['get']('wrist')){const _0x4a9b26=new Qg(0x50c+0x5*-0x1a1+0x3d*0xd,'wrist',this,null);this['_wrist']=_0x4a9b26,this['_joints']['push'](_0x4a9b26),this['_jointsByI'+'d']['wrist']=_0x4a9b26;}for(let _0x38883e=-0x15c6+-0xf3a+0x2500;_0x38883e<Nc['length'];_0x38883e++){const _0x20f0fa=new Ik(_0x38883e,this);for(let _0x5d1aa5=-0x454+0x6*0x563+0x1bfe*-0x1;_0x5d1aa5<Nc[_0x38883e]['length'];_0x5d1aa5++){const _0x2d5ee3=Nc[_0x38883e][_0x5d1aa5];if(!_0x3c8d01['get'](_0x2d5ee3))continue;const _0x1d7aa2=new Qg(_0x5d1aa5,_0x2d5ee3,this,_0x20f0fa);this['_joints']['push'](_0x1d7aa2),this['_jointsByI'+'d'][_0x2d5ee3]=_0x1d7aa2,_0x1d7aa2['tip']&&(this['_tips']['push'](_0x1d7aa2),_0x20f0fa['_tip']=_0x1d7aa2),_0x20f0fa['_joints']['push'](_0x1d7aa2);}}}['update'](_0x46d6b7){const _0x58fe4e=this['_inputSour'+'ce']['_xrInputSo'+'urce'];for(let _0x5f27f3=-0x196f*-0x1+0x1370+-0x2cdf;_0x5f27f3<this['_joints']['length'];_0x5f27f3++){const _0x460080=this['_joints'][_0x5f27f3],_0x15cfe2=_0x58fe4e['hand']['get'](_0x460080['_id']);if(_0x15cfe2){let _0x4dff72;if(_0x46d6b7['session']['visibility'+'State']!=='hidden'&&(_0x4dff72=_0x46d6b7['getJointPo'+'se'](_0x15cfe2,this['_manager']['_reference'+'Space'])),_0x4dff72)_0x460080['update'](_0x4dff72),_0x460080['wrist']&&!this['_tracking']&&(this['_tracking']=!(-0x7c+0x2103+-0x2087),this['fire']('tracking'));else{if(_0x460080['wrist']){this['_tracking']&&(this['_tracking']=!(-0x2*0xd7d+-0x1*-0x1c2e+-0x133),this['fire']('trackinglo'+'st'));break;}}}}const _0x4342af=this['_jointsByI'+'d']['thumb-meta'+'carpal'],_0x6f1069=this['_jointsByI'+'d']['thumb-tip'],_0x4c6570=this['_jointsByI'+'d']['index-fing'+'er-phalanx'+'-proximal'],_0x98043e=this['_jointsByI'+'d']['index-fing'+'er-tip'],_0xd15f3e=this['_jointsByI'+'d']['ring-finge'+'r-phalanx-'+'proximal'],_0x5a0fde=this['_jointsByI'+'d']['pinky-fing'+'er-phalanx'+'-proximal'];if(_0x4342af&&_0x6f1069&&_0x4c6570&&_0x98043e&&_0xd15f3e&&_0x5a0fde){this['_inputSour'+'ce']['_dirtyRay']=!(-0x112c+0x1*0xf47+0x1*0x1e5),this['_inputSour'+'ce']['_rayLocal']['origin']['lerp'](_0x6f1069['_localPosi'+'tion'],_0x98043e['_localPosi'+'tion'],-0x9*0x353+-0x8d7+0x26c2+0.5);let _0x933379=_0x4342af,_0x1c2fb2=_0x5a0fde;if(this['_inputSour'+'ce']['handedness']===Pk){const _0x38ec25=_0x933379;_0x933379=_0x1c2fb2,_0x1c2fb2=_0x38ec25;}zr['sub2'](_0x933379['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),vc['sub2'](_0x1c2fb2['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),Jg['cross'](zr,vc)['normalize'](),zr['lerp'](_0x4c6570['_localPosi'+'tion'],_0xd15f3e['_localPosi'+'tion'],0x1*-0x48a+0x1c9a+0x58*-0x46+0.5),zr['sub'](this['_wrist']['_localPosi'+'tion'])['normalize'](),this['_inputSour'+'ce']['_rayLocal']['direction']['lerp'](Jg,zr,-0x5*0x1ca+-0x2*0x12c1+-0x173a*-0x2+0.5)['normalize']();}this['_fingerIsC'+'losed'](0xda3*0x1+0x67f*-0x1+0x1d*-0x3f)&&this['_fingerIsC'+'losed'](0x137a*0x2+0x4*0x25f+-0x306e)&&this['_fingerIsC'+'losed'](0xb*0x1a3+0x22a8+0x1*-0x34a6)&&this['_fingerIsC'+'losed'](0x54f*-0x3+-0x2531+-0x11b6*-0x3)?this['_inputSour'+'ce']['_squeezing']||(this['_inputSour'+'ce']['_squeezing']=!(0x1*0x10c9+0xe30*0x1+-0x1ef9),this['_inputSour'+'ce']['fire']('squeezesta'+'rt'),this['_manager']['input']['fire']('squeezesta'+'rt',this['_inputSour'+'ce'])):this['_inputSour'+'ce']['_squeezing']&&(this['_inputSour'+'ce']['_squeezing']=!(-0x54c+-0x1df*0x2+0x1*0x90b),this['_inputSour'+'ce']['fire']('squeeze'),this['_manager']['input']['fire']('squeeze',this['_inputSour'+'ce']),this['_inputSour'+'ce']['fire']('squeezeend'),this['_manager']['input']['fire']('squeezeend',this['_inputSour'+'ce']));}['_fingerIsC'+'losed'](_0xba81ac){const _0x4241bd=this['_fingers'][_0xba81ac];return zr['sub2'](_0x4241bd['joints'][-0x1656+0x5*-0x4f9+0x2f33*0x1]['_localPosi'+'tion'],_0x4241bd['joints'][-0xd69+-0x2696+-0x1a00*-0x2]['_localPosi'+'tion'])['normalize'](),vc['sub2'](_0x4241bd['joints'][-0x242e+-0x2574+-0x6*-0xc46]['_localPosi'+'tion'],_0x4241bd['joints'][-0x121c+0x1033+-0xa4*-0x3]['_localPosi'+'tion'])['normalize'](),zr['dot'](vc)<-(-0x662*-0x2+0x9*-0x39d+0x1*0x13c1+0.8);}['getJointBy'+'Id'](_0x5ec7cf){return this['_jointsByI'+'d'][_0x5ec7cf]||null;}get['fingers'](){return this['_fingers'];}get['joints'](){return this['_joints'];}get['tips'](){return this['_tips'];}get['wrist'](){return this['_wrist'];}get['tracking'](){return this['_tracking'];}}h(Eu,'EVENT_TRAC'+'KING','tracking'),h(Eu,'EVENT_TRAC'+'KINGLOST','trackinglo'+'st');const eS=new D(),tS=new le();let Lk=0x17bf*0x1+-0xa75*-0x2+0x67*-0x6f;class Qt extends me{constructor(_0x49774e,_0x1d1d50){super(),h(this,'_id'),h(this,'_manager'),h(this,'_xrInputSo'+'urce'),h(this,'_ray',new wn()),h(this,'_rayLocal',new wn()),h(this,'_grip',!(0xf6d+-0x2100+0x1194)),h(this,'_hand',null),h(this,'_velocitie'+'sAvailable',!(-0x128+0x201b+-0x1*0x1ef2)),h(this,'_velocitie'+'sTimestamp',de()),h(this,'_localTran'+'sform',null),h(this,'_worldTran'+'sform',null),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_localPosi'+'tion',null),h(this,'_localPosi'+'tionLast',null),h(this,'_localRota'+'tion',null),h(this,'_linearVel'+'ocity',null),h(this,'_dirtyLoca'+'l',!(0x2665*0x1+0x542+-0x2ba7)),h(this,'_dirtyRay',!(0xc74+-0x1619+0x1a*0x5f)),h(this,'_selecting',!(0x1*-0x259f+-0x22f1*0x1+0x4891*0x1)),h(this,'_squeezing',!(-0x83*-0x41+0xf7d+0x1*-0x30bf)),h(this,'_elementIn'+'put',!(0x1e95+-0x1066+0x1*-0xe2f)),h(this,'_elementEn'+'tity',null),h(this,'_hitTestSo'+'urces',[]),(this['_id']=++Lk,this['_manager']=_0x49774e,this['_xrInputSo'+'urce']=_0x1d1d50,_0x1d1d50['hand']&&(this['_hand']=new Eu(this)));}get['id'](){return this['_id'];}get['inputSourc'+'e'](){return this['_xrInputSo'+'urce'];}get['targetRayM'+'ode'](){return this['_xrInputSo'+'urce']['targetRayM'+'ode'];}get['handedness'](){return this['_xrInputSo'+'urce']['handedness'];}get['profiles'](){return this['_xrInputSo'+'urce']['profiles'];}get['grip'](){return this['_grip'];}get['hand'](){return this['_hand'];}get['gamepad'](){return this['_xrInputSo'+'urce']['gamepad']||null;}get['selecting'](){return this['_selecting'];}get['squeezing'](){return this['_squeezing'];}set['elementInp'+'ut'](_0x162c6a){this['_elementIn'+'put']!==_0x162c6a&&(this['_elementIn'+'put']=_0x162c6a,this['_elementIn'+'put']||(this['_elementEn'+'tity']=null));}get['elementInp'+'ut'](){return this['_elementIn'+'put'];}get['elementEnt'+'ity'](){return this['_elementEn'+'tity'];}get['hitTestSou'+'rces'](){return this['_hitTestSo'+'urces'];}['update'](_0x3c5cf7){if(this['_hand'])this['_hand']['update'](_0x3c5cf7);else{const _0x40ac92=this['_xrInputSo'+'urce']['gripSpace'];if(_0x40ac92){const _0x110069=_0x3c5cf7['getPose'](_0x40ac92,this['_manager']['_reference'+'Space']);if(_0x110069){this['_grip']||(this['_grip']=!(0x1450+0x16b9+-0x2b09),this['_localTran'+'sform']=new te(),this['_worldTran'+'sform']=new te(),this['_localPosi'+'tionLast']=new D(),this['_localPosi'+'tion']=new D(),this['_localRota'+'tion']=new le(),this['_linearVel'+'ocity']=new D());const _0x21d07f=de(),_0x2d890a=(_0x21d07f-this['_velocitie'+'sTimestamp'])/(0x1559+-0x1*-0x118a+-0xf*0x255);this['_velocitie'+'sTimestamp']=_0x21d07f,this['_dirtyLoca'+'l']=!(-0x29*0xf2+-0x2b*0xc7+-0x11*-0x43f),this['_localPosi'+'tionLast']['copy'](this['_localPosi'+'tion']),this['_localPosi'+'tion']['copy'](_0x110069['transform']['position']),this['_localRota'+'tion']['copy'](_0x110069['transform']['orientatio'+'n']),this['_velocitie'+'sAvailable']=!(-0x1c8+0x3dc+-0x214),this['_manager']['input']['velocities'+'Supported']&&_0x110069['linearVelo'+'city']?this['_linearVel'+'ocity']['copy'](_0x110069['linearVelo'+'city']):_0x2d890a>-0xb5*-0x22+0x1d*0xb3+-0x2c51&&(eS['sub2'](this['_localPosi'+'tion'],this['_localPosi'+'tionLast'])['divScalar'](_0x2d890a),this['_linearVel'+'ocity']['lerp'](this['_linearVel'+'ocity'],eS,0x193*-0x8+0xd28+-0x1*0x90+0.15));}else this['_velocitie'+'sAvailable']=!(-0x18ba+-0x1a81+-0x199e*-0x2);}const _0x358ca4=_0x3c5cf7['getPose'](this['_xrInputSo'+'urce']['targetRayS'+'pace'],this['_manager']['_reference'+'Space']);_0x358ca4&&(this['_dirtyRay']=!(-0x2fd+0x830+-0x533),this['_rayLocal']['origin']['copy'](_0x358ca4['transform']['position']),this['_rayLocal']['direction']['set'](-0x1*0x1df3+-0x3*0x7d9+0x14e*0x29,-0x217a+0x1*-0x227c+0x2*0x21fb,-(-0x2*0x6c5+0x23cb+-0x1640)),tS['copy'](_0x358ca4['transform']['orientatio'+'n']),tS['transformV'+'ector'](this['_rayLocal']['direction'],this['_rayLocal']['direction']));}}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(0x1*-0x5b9+0xdd8+-0x81e),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],D['ONE']));const _0x108de9=this['_manager']['camera']['parent'];_0x108de9?this['_worldTran'+'sform']['mul2'](_0x108de9['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['_updateRay'+'Transforms'](){const _0x3326b6=this['_dirtyRay'];if(this['_dirtyRay']=!(0xd30+-0xf97+-0x16*-0x1c),this['_manager']['camera']['parent']){const _0x14f53e=this['_manager']['camera']['parent']['getWorldTr'+'ansform']();_0x14f53e['getTransla'+'tion'](this['_position']),this['_rotation']['setFromMat'+'4'](_0x14f53e),this['_rotation']['transformV'+'ector'](this['_rayLocal']['origin'],this['_ray']['origin']),this['_ray']['origin']['add'](this['_position']),this['_rotation']['transformV'+'ector'](this['_rayLocal']['direction'],this['_ray']['direction']);}else _0x3326b6&&(this['_ray']['origin']['copy'](this['_rayLocal']['origin']),this['_ray']['direction']['copy'](this['_rayLocal']['direction']));}['getPositio'+'n'](){return this['_position']?(this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position']):null;}['getLocalPo'+'sition'](){return this['_localPosi'+'tion'];}['getRotatio'+'n'](){return this['_rotation']?(this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation']):null;}['getLocalRo'+'tation'](){return this['_localRota'+'tion'];}['getLinearV'+'elocity'](){return this['_velocitie'+'sAvailable']?this['_linearVel'+'ocity']:null;}['getOrigin'](){return this['_updateRay'+'Transforms'](),this['_ray']['origin'];}['getDirecti'+'on'](){return this['_updateRay'+'Transforms'](),this['_ray']['direction'];}['hitTestSta'+'rt'](_0x135bd0={}){_0x135bd0['inputSourc'+'e']=this,_0x135bd0['profile']=this['_xrInputSo'+'urce']['profiles'][0xe4d+-0x1b63+0x43*0x32];const _0x2e8362=_0x135bd0['callback'];_0x135bd0['callback']=(_0x1346ac,_0x42ad80)=>{_0x42ad80&&this['onHitTestS'+'ourceAdd'](_0x42ad80),_0x2e8362&&_0x2e8362(_0x1346ac,_0x42ad80);},this['_manager']['hitTest']['start'](_0x135bd0);}['onHitTestS'+'ourceAdd'](_0x1d81de){this['_hitTestSo'+'urces']['push'](_0x1d81de),this['fire']('hittest:ad'+'d',_0x1d81de),_0x1d81de['on']('result',(_0x55176c,_0x3fd871,_0x580e6c,_0x4ee6ab)=>{_0x580e6c===this&&this['fire']('hittest:re'+'sult',_0x1d81de,_0x55176c,_0x3fd871,_0x4ee6ab);}),_0x1d81de['once']('remove',()=>{this['onHitTestS'+'ourceRemov'+'e'](_0x1d81de),this['fire']('hittest:re'+'move',_0x1d81de);});}['onHitTestS'+'ourceRemov'+'e'](_0x34725e){const _0x329ccf=this['_hitTestSo'+'urces']['indexOf'](_0x34725e);_0x329ccf!==-(-0x1ce+-0x245+0x15c*0x3)&&this['_hitTestSo'+'urces']['splice'](_0x329ccf,-0x1e18+0x66*-0x1b+0x28db);}}h(Qt,'EVENT_REMO'+'VE','remove'),h(Qt,'EVENT_SELE'+'CT','select'),h(Qt,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Qt,'EVENT_SELE'+'CTEND','selectend'),h(Qt,'EVENT_SQUE'+'EZE','squeeze'),h(Qt,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Qt,'EVENT_SQUE'+'EZEEND','squeezeend'),h(Qt,'EVENT_HITT'+'ESTADD','hittest:ad'+'d'),h(Qt,'EVENT_HITT'+'ESTREMOVE','hittest:re'+'move'),h(Qt,'EVENT_HITT'+'ESTRESULT','hittest:re'+'sult');class Li extends me{constructor(_0x364c0a){var _0x2ac87a,_0xa85202;super(),h(this,'manager'),h(this,'_inputSour'+'ces',[]),h(this,'_onInputSo'+'urcesChang'+'eEvt'),h(this,'velocities'+'Supported',!(0x784+0x2*0xbc3+0x5*-0x635)),(this['manager']=_0x364c0a,this['velocities'+'Supported']=!!(Me['browser']&&((_0xa85202=(_0x2ac87a=window['XRPose'])==null?void(0x2092+0x17e*-0xe+0x41*-0x2e):_0x2ac87a['prototype'])!=null&&_0xa85202['hasOwnProp'+'erty']('linearVelo'+'city'))),this['_onInputSo'+'urcesChang'+'eEvt']=_0x731238=>{this['_onInputSo'+'urcesChang'+'e'](_0x731238);},this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){const _0x4ba3fa=this['manager']['session'];_0x4ba3fa['addEventLi'+'stener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']),_0x4ba3fa['addEventLi'+'stener']('select',_0x354ba7=>{const _0xb1fbe9=this['_getByInpu'+'tSource'](_0x354ba7['inputSourc'+'e']);_0xb1fbe9['update'](_0x354ba7['frame']),_0xb1fbe9['fire']('select',_0x354ba7),this['fire']('select',_0xb1fbe9,_0x354ba7);}),_0x4ba3fa['addEventLi'+'stener']('selectstar'+'t',_0x2abed8=>{const _0x3e3b8b=this['_getByInpu'+'tSource'](_0x2abed8['inputSourc'+'e']);_0x3e3b8b['_selecting']||(_0x3e3b8b['update'](_0x2abed8['frame']),_0x3e3b8b['_selecting']=!(0x23cd*0x1+-0x37*-0x63+-0x3*0x1306),_0x3e3b8b['fire']('selectstar'+'t',_0x2abed8),this['fire']('selectstar'+'t',_0x3e3b8b,_0x2abed8));}),_0x4ba3fa['addEventLi'+'stener']('selectend',_0x5cb6a7=>{const _0x10f8d2=this['_getByInpu'+'tSource'](_0x5cb6a7['inputSourc'+'e']);_0x10f8d2['update'](_0x5cb6a7['frame']),_0x10f8d2['_selecting']=!(-0x19*-0x8e+0x329*-0xb+0x1*0x14e6),_0x10f8d2['fire']('selectend',_0x5cb6a7),this['fire']('selectend',_0x10f8d2,_0x5cb6a7);}),_0x4ba3fa['addEventLi'+'stener']('squeeze',_0x4f2de5=>{const _0x5a2dcf=this['_getByInpu'+'tSource'](_0x4f2de5['inputSourc'+'e']);_0x5a2dcf['update'](_0x4f2de5['frame']),_0x5a2dcf['fire']('squeeze',_0x4f2de5),this['fire']('squeeze',_0x5a2dcf,_0x4f2de5);}),_0x4ba3fa['addEventLi'+'stener']('squeezesta'+'rt',_0x2c0f7e=>{const _0x364e88=this['_getByInpu'+'tSource'](_0x2c0f7e['inputSourc'+'e']);_0x364e88['update'](_0x2c0f7e['frame']),_0x364e88['_squeezing']=!(0xbd0+-0xd*-0xe9+-0x17a5),_0x364e88['fire']('squeezesta'+'rt',_0x2c0f7e),this['fire']('squeezesta'+'rt',_0x364e88,_0x2c0f7e);}),_0x4ba3fa['addEventLi'+'stener']('squeezeend',_0x337cf8=>{const _0x56e3d0=this['_getByInpu'+'tSource'](_0x337cf8['inputSourc'+'e']);_0x56e3d0['update'](_0x337cf8['frame']),_0x56e3d0['_squeezing']=!(-0x1b34+0x9eb*0x2+0x3*0x275),_0x56e3d0['fire']('squeezeend',_0x337cf8),this['fire']('squeezeend',_0x56e3d0,_0x337cf8);});const _0x535013=_0x4ba3fa['inputSourc'+'es'];for(let _0x482b9d=0x187*-0x3+-0x1*0xada+0xf6f;_0x482b9d<_0x535013['length'];_0x482b9d++)this['_addInputS'+'ource'](_0x535013[_0x482b9d]);}['_onSession'+'End'](){let _0x3c2a87=this['_inputSour'+'ces']['length'];for(;_0x3c2a87--;){const _0x40652f=this['_inputSour'+'ces'][_0x3c2a87];this['_inputSour'+'ces']['splice'](_0x3c2a87,0x77f+0x84*-0xa+-0x1a*0x17),_0x40652f['fire']('remove'),this['fire']('remove',_0x40652f);}this['fire']('removeall'),this['manager']['session']['removeEven'+'tListener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']);}['_onInputSo'+'urcesChang'+'e'](_0x34ad70){for(let _0x1a8e62=-0x1d3c+0x1*0x107f+0x3*0x43f;_0x1a8e62<_0x34ad70['removed']['length'];_0x1a8e62++)this['_removeInp'+'utSource'](_0x34ad70['removed'][_0x1a8e62]);for(let _0x273127=-0x2*0xcce+0xa26*0x3+-0x1*0x4d6;_0x273127<_0x34ad70['added']['length'];_0x273127++)this['_addInputS'+'ource'](_0x34ad70['added'][_0x273127]);}['_getByInpu'+'tSource'](_0x51dcb6){for(let _0x4d0a1b=0xb7f+0x22d4+-0x2e53;_0x4d0a1b<this['_inputSour'+'ces']['length'];_0x4d0a1b++)if(this['_inputSour'+'ces'][_0x4d0a1b]['inputSourc'+'e']===_0x51dcb6)return this['_inputSour'+'ces'][_0x4d0a1b];return null;}['_removeApp'+'Entity'](_0x503bf7){const _0x28e789=this['manager']['app']['root']['findByName']('Armature_'+_0x503bf7);_0x28e789&&this['manager']['app']['root']['removeChil'+'d'](_0x28e789);}['_addInputS'+'ource'](_0x1e30cd){if(this['_removeApp'+'Entity'](_0x1e30cd['handedness']),this['_getByInpu'+'tSource'](_0x1e30cd))return;const _0x123040=new Qt(this['manager'],_0x1e30cd);this['_inputSour'+'ces']['push'](_0x123040),this['fire']('add',_0x123040);}['_removeInp'+'utSource'](_0x4e456f){for(let _0xf15a87=-0x175c+0x4*0x40f+0x720;_0xf15a87<this['_inputSour'+'ces']['length'];_0xf15a87++){if(this['_inputSour'+'ces'][_0xf15a87]['inputSourc'+'e']!==_0x4e456f)continue;const _0x190c59=this['_inputSour'+'ces'][_0xf15a87];this['_inputSour'+'ces']['splice'](_0xf15a87,0x86b*-0x1+-0x1*0xf4d+0x17b9);let _0x20ee3b=_0x190c59['hitTestSou'+'rces']['length'];for(;_0x20ee3b--;)_0x190c59['hitTestSou'+'rces'][_0x20ee3b]['remove']();this['_removeApp'+'Entity'](_0x190c59['handedness']),_0x190c59['fire']('remove'),this['fire']('remove',_0x190c59);return;}}['update'](_0x82b43f){for(let _0x48c6a7=-0xe*0x73+-0x1437+0x1a81;_0x48c6a7<this['_inputSour'+'ces']['length'];_0x48c6a7++)this['_inputSour'+'ces'][_0x48c6a7]['update'](_0x82b43f);}get['inputSourc'+'es'](){return this['_inputSour'+'ces'];}}h(Li,'EVENT_ADD','add'),h(Li,'EVENT_REMO'+'VE','remove'),h(Li,'EVENT_SELE'+'CT','select'),h(Li,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Li,'EVENT_SELE'+'CTEND','selectend'),h(Li,'EVENT_SQUE'+'EZE','squeeze'),h(Li,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Li,'EVENT_SQUE'+'EZEEND','squeezeend');const ja=new D(),sS=new D(),hf=new te(),iS=new te();class bu extends me{constructor(_0x597310){super(),h(this,'_manager'),h(this,'_supported',!(0x1f80+-0x2*-0x98f+-0x329d)),h(this,'_available',!(0x2*-0x70e+-0x1221+0x101f*0x2)),h(this,'_lightProb'+'eRequested',!(-0x15e8+-0x318+0x1901)),h(this,'_lightProb'+'e',null),h(this,'_intensity',-0x23a6+-0x1d38+0x40de),h(this,'_rotation',new le()),h(this,'_color',new ie()),h(this,'_spherical'+'Harmonics',new Float32Array(-0x17b2+0x5f7*0x3+-0x7*-0xd8)),(this['_manager']=_0x597310,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){this['_manager']['session']['requestLig'+'htProbe']&&(this['_supported']=!(-0x157*-0xd+-0x2e8+-0xe83*0x1));}['_onSession'+'End'](){this['_supported']=!(0x1d31+-0x1bab+-0x185),this['_available']=!(-0x1e6f+0x2594+0x2*-0x392),this['_lightProb'+'eRequested']=!(0x5ba*0x3+0x377+-0x14a4),this['_lightProb'+'e']=null;}['start'](){let _0x5a9c93;if(this['_manager']['session']||(_0x5a9c93=new Error('XR\x20session'+'\x20is\x20not\x20ru'+'nning')),!_0x5a9c93&&this['_manager']['type']!==Ro&&(_0x5a9c93=new Error('XR\x20session'+'\x20type\x20is\x20n'+'ot\x20AR')),!_0x5a9c93&&!this['_supported']&&(_0x5a9c93=new Error('light-esti'+'mation\x20is\x20'+'not\x20suppor'+'ted')),(!_0x5a9c93&&this['_lightProb'+'e']||this['_lightProb'+'eRequested'])&&(_0x5a9c93=new Error('light\x20esti'+'mation\x20is\x20'+'already\x20re'+'quested')),_0x5a9c93){this['fire']('error',_0x5a9c93);return;}this['_lightProb'+'eRequested']=!(-0x2689+-0xa1f*0x1+0x30a8),this['_manager']['session']['requestLig'+'htProbe']()['then'](_0x3804d5=>{const _0x3372fa=this['_lightProb'+'eRequested'];this['_lightProb'+'eRequested']=!(0xb5*0x5+-0x191a+-0xac9*-0x2),this['_manager']['active']?_0x3372fa&&(this['_lightProb'+'e']=_0x3804d5):this['fire']('error',new Error('XR\x20session'+'\x20is\x20not\x20ac'+'tive'));})['catch'](_0x271f4d=>{this['_lightProb'+'eRequested']=!(0x2176+0x6bd*-0x1+-0x13*0x168),this['fire']('error',_0x271f4d);});}['end'](){this['_lightProb'+'eRequested']=!(0x77*-0x11+-0x26+-0x407*-0x2),this['_lightProb'+'e']=null,this['_available']=!(-0x3*-0x235+-0xc41*-0x3+0x5*-0x8ad);}['update'](_0xbf12e){if(!this['_lightProb'+'e'])return;const _0x4da33c=_0xbf12e['getLightEs'+'timate'](this['_lightProb'+'e']);if(!_0x4da33c)return;this['_available']||(this['_available']=!(-0x267d*-0x1+-0x139*-0x1d+-0x765*0xa),this['fire']('available'));const _0x4b38f2=_0x4da33c['primaryLig'+'htIntensit'+'y'];this['_intensity']=Math['max'](0x695*0x2+0x6*0x3e6+-0x3*0xc2f,Math['max'](_0x4b38f2['x'],Math['max'](_0x4b38f2['y'],_0x4b38f2['z']))),ja['copy'](_0x4b38f2)['mulScalar']((0x13*0x149+-0x1ebc+0x652)/this['_intensity']),this['_color']['set'](ja['x'],ja['y'],ja['z']),ja['set'](-0x1*0xb1a+-0x1ef4+0x2a0e,0x2503+0x6d*0x4f+-0x2*0x2353,0x1b2+-0x95d+0x7ab),sS['copy'](_0x4da33c['primaryLig'+'htDirectio'+'n']),hf['setLookAt'](sS,ja,D['UP']),iS['setFromAxi'+'sAngle'](D['RIGHT'],0x6*0x633+-0x11f+-0x23b9),hf['mul'](iS),this['_rotation']['setFromMat'+'4'](hf),this['_spherical'+'Harmonics']['set'](_0x4da33c['sphericalH'+'armonicsCo'+'efficients']);}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['intensity'](){return this['_available']?this['_intensity']:null;}get['color'](){return this['_available']?this['_color']:null;}get['rotation'](){return this['_available']?this['_rotation']:null;}get['sphericalH'+'armonics'](){return this['_available']?this['_spherical'+'Harmonics']:null;}}h(bu,'EVENT_AVAI'+'LABLE','available'),h(bu,'EVENT_ERRO'+'R','error');let Rk=-0x216b+0xa28+0x1743;class Au extends me{constructor(_0x3ab9e5,_0x376cfe){super(),h(this,'_id'),h(this,'_planeDete'+'ction'),h(this,'_xrPlane'),h(this,'_lastChang'+'edTime'),h(this,'_orientati'+'on'),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_id']=++Rk,this['_planeDete'+'ction']=_0x3ab9e5,this['_xrPlane']=_0x376cfe,this['_lastChang'+'edTime']=_0x376cfe['lastChange'+'dTime'],this['_orientati'+'on']=_0x376cfe['orientatio'+'n']);}['destroy'](){this['_xrPlane']&&(this['_xrPlane']=null,this['fire']('remove'));}['update'](_0x1cb9a0){const _0x1c6119=this['_planeDete'+'ction']['_manager'],_0x336563=_0x1cb9a0['getPose'](this['_xrPlane']['planeSpace'],_0x1c6119['_reference'+'Space']);_0x336563&&(this['_position']['copy'](_0x336563['transform']['position']),this['_rotation']['copy'](_0x336563['transform']['orientatio'+'n'])),this['_lastChang'+'edTime']!==this['_xrPlane']['lastChange'+'dTime']&&(this['_lastChang'+'edTime']=this['_xrPlane']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}get['id'](){return this['_id'];}get['orientatio'+'n'](){return this['_orientati'+'on'];}get['points'](){return this['_xrPlane']['polygon'];}get['label'](){return this['_xrPlane']['semanticLa'+'bel']||'';}}h(Au,'EVENT_REMO'+'VE','remove'),h(Au,'EVENT_CHAN'+'GE','change');class yo extends me{constructor(_0x296159){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRPlane']),h(this,'_available',!(0x1*-0x259f+-0xa1d*-0x1+0x1*0x1b83)),h(this,'_planesInd'+'ex',new Map()),h(this,'_planes',[]),(this['_manager']=_0x296159,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){this['_manager']['session']['enabledFea'+'tures']&&this['_manager']['session']['enabledFea'+'tures']['indexOf']('plane-dete'+'ction')!==-(-0x1*0x2623+-0xd8*-0x2e+-0xac)&&(this['_available']=!(0x1*0xfeb+0xd*-0x1d4+0x1*0x7d9),this['fire']('available'));}['_onSession'+'End'](){for(let _0x4cccfb=0x1d6c+-0x1*-0x2556+-0x42c2;_0x4cccfb<this['_planes']['length'];_0x4cccfb++)this['_planes'][_0x4cccfb]['destroy'](),this['fire']('remove',this['_planes'][_0x4cccfb]);this['_planesInd'+'ex']['clear'](),this['_planes']['length']=0x1ece+-0x5*0x773+0x671,this['_available']&&(this['_available']=!(-0x72*0x22+0x180f+0xe*-0xa3),this['fire']('unavailabl'+'e'));}['update'](_0x542e1f){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x542e1f['detectedPl'+'anes']['size'])this['_available']=!(0x157f+-0x3*-0x479+-0x22ea),this['fire']('available');else return;}const _0x5dde60=_0x542e1f['detectedPl'+'anes'];for(const [_0x4b2475,_0x2b6546]of this['_planesInd'+'ex'])_0x5dde60['has'](_0x4b2475)||(this['_planesInd'+'ex']['delete'](_0x4b2475),this['_planes']['splice'](this['_planes']['indexOf'](_0x2b6546),0x1*-0x1852+-0x2*0x45d+0x210d),_0x2b6546['destroy'](),this['fire']('remove',_0x2b6546));for(const _0x55679e of _0x5dde60){let _0x1212d7=this['_planesInd'+'ex']['get'](_0x55679e);_0x1212d7?_0x1212d7['update'](_0x542e1f):(_0x1212d7=new Au(this,_0x55679e),this['_planesInd'+'ex']['set'](_0x55679e,_0x1212d7),this['_planes']['push'](_0x1212d7),_0x1212d7['update'](_0x542e1f),this['fire']('add',_0x1212d7));}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['planes'](){return this['_planes'];}}h(yo,'EVENT_AVAI'+'LABLE','available'),h(yo,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(yo,'EVENT_ADD','add'),h(yo,'EVENT_REMO'+'VE','remove');class vo extends me{constructor(_0x4fb2c1,_0x2e1488,_0x176e70=null){super(),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_uuid',null),h(this,'_uuidReque'+'sts',null),(this['_anchors']=_0x4fb2c1,this['_xrAnchor']=_0x2e1488,this['_uuid']=_0x176e70);}['destroy'](){if(!this['_xrAnchor'])return;const _0x82101a=this['_xrAnchor'];this['_xrAnchor']['delete'](),this['_xrAnchor']=null,this['fire']('destroy',_0x82101a,this);}['update'](_0x304152){if(!this['_xrAnchor'])return;const _0xace1ee=_0x304152['getPose'](this['_xrAnchor']['anchorSpac'+'e'],this['_anchors']['manager']['_reference'+'Space']);if(_0xace1ee){if(this['_position']['equals'](_0xace1ee['transform']['position'])&&this['_rotation']['equals'](_0xace1ee['transform']['orientatio'+'n']))return;this['_position']['copy'](_0xace1ee['transform']['position']),this['_rotation']['copy'](_0xace1ee['transform']['orientatio'+'n']),this['fire']('change');}}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}['persist'](_0x2f53e3){if(!this['_anchors']['persistenc'+'e']){_0x2f53e3==null||_0x2f53e3(new Error('Persistent'+'\x20Anchors\x20a'+'re\x20not\x20sup'+'ported'),null);return;}if(this['_uuid']){_0x2f53e3==null||_0x2f53e3(null,this['_uuid']);return;}if(this['_uuidReque'+'sts']){_0x2f53e3&&this['_uuidReque'+'sts']['push'](_0x2f53e3);return;}this['_uuidReque'+'sts']=[],this['_xrAnchor']['requestPer'+'sistentHan'+'dle']()['then'](_0x49a79b=>{this['_uuid']=_0x49a79b,this['_anchors']['_indexByUu'+'id']['set'](this['_uuid'],this),_0x2f53e3==null||_0x2f53e3(null,_0x49a79b);for(const _0x29bed1 of this['_uuidReque'+'sts'])_0x29bed1(null,_0x49a79b);this['_uuidReque'+'sts']=null,this['fire']('persist',_0x49a79b);})['catch'](_0x27a1b4=>{_0x2f53e3==null||_0x2f53e3(_0x27a1b4,null);for(const _0x16296a of this['_uuidReque'+'sts'])_0x16296a(_0x27a1b4,null);this['_uuidReque'+'sts']=null;});}['forget'](_0x101304){if(!this['_uuid']){_0x101304==null||_0x101304(new Error('Anchor\x20is\x20'+'not\x20persis'+'tent'));return;}this['_anchors']['forget'](this['_uuid'],_0x450ffa=>{this['_uuid']=null,_0x101304==null||_0x101304(_0x450ffa),this['fire']('forget');});}get['uuid'](){return this['_uuid'];}get['persistent'](){return!!this['_uuid'];}}h(vo,'EVENT_DEST'+'ROY','destroy'),h(vo,'EVENT_CHAN'+'GE','change'),h(vo,'EVENT_PERS'+'IST','persist'),h(vo,'EVENT_FORG'+'ET','forget');var aS;class Ja extends me{constructor(_0x2e60ad){super(),h(this,'manager'),h(this,'_supported',Me['browser']&&!!window['XRAnchor']),h(this,'_available',!(-0x3*0xb95+-0x312*0x1+0x25d2*0x1)),h(this,'_checkingA'+'vailabilit'+'y',!(-0x2441+0x1c17+0x82b)),h(this,'_persisten'+'ce',Me['browser']&&!!((aS=window==null?void(0x1b8+0x2f3*0xc+-0x251c):window['XRSession'])!=null&&aS['prototype']['restorePer'+'sistentAnc'+'hor'])),h(this,'_creationQ'+'ueue',[]),h(this,'_index',new Map()),h(this,'_indexByUu'+'id',new Map()),h(this,'_list',[]),h(this,'_callbacks'+'Anchors',new Map()),(this['manager']=_0x2e60ad,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){var _0x42f12c;const _0x25c579=((_0x42f12c=this['manager']['session']['enabledFea'+'tures'])==null?void(0x5e5*-0x2+0x156a+-0x9a0):_0x42f12c['indexOf']('anchors'))>=-0xce8+0x1c4e*-0x1+0x2936;_0x25c579&&(this['_available']=_0x25c579,this['fire']('available'));}['_onSession'+'End'](){if(!this['_available'])return;this['_available']=!(-0x53*-0x59+-0x166*0x12+0x9d*-0x6);for(let _0x263f57=-0x21be+-0x49*-0x25+0x1731*0x1;_0x263f57<this['_creationQ'+'ueue']['length'];_0x263f57++)this['_creationQ'+'ueue'][_0x263f57]['callback']&&this['_creationQ'+'ueue'][_0x263f57]['callback'](new Error('session\x20en'+'ded'),null);this['_creationQ'+'ueue']['length']=-0x6a1*-0x1+0x20b5+-0x2756,this['_index']['clear'](),this['_indexByUu'+'id']['clear']();let _0x2e6e26=this['_list']['length'];for(;_0x2e6e26--;)this['_list'][_0x2e6e26]['destroy']();this['_list']['length']=-0x1884+0x1d07+-0xb*0x69,this['fire']('unavailabl'+'e');}['_createAnc'+'hor'](_0x3237bf,_0x481474=null){const _0x1a754f=new vo(this,_0x3237bf,_0x481474);return this['_index']['set'](_0x3237bf,_0x1a754f),_0x481474&&this['_indexByUu'+'id']['set'](_0x481474,_0x1a754f),this['_list']['push'](_0x1a754f),_0x1a754f['once']('destroy',this['_onAnchorD'+'estroy'],this),_0x1a754f;}['_onAnchorD'+'estroy'](_0x44ebee,_0x4e8d3f){this['_index']['delete'](_0x44ebee),_0x4e8d3f['uuid']&&this['_indexByUu'+'id']['delete'](_0x4e8d3f['uuid']);const _0x1ac546=this['_list']['indexOf'](_0x4e8d3f);_0x1ac546!==-(0x2*-0x309+0xfe0+-0x9cd)&&this['_list']['splice'](_0x1ac546,-0x15f2+-0x21ca+0x37bd),this['fire']('destroy',_0x4e8d3f);}['create'](_0x5930ce,_0x335210,_0x2bec2c){if(!this['_available']){_0x2bec2c==null||_0x2bec2c(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(window['XRHitTestR'+'esult']&&_0x5930ce instanceof XRHitTestResult){const _0x482796=_0x5930ce;if(_0x2bec2c=_0x335210,!this['_supported']){_0x2bec2c==null||_0x2bec2c(new Error('Anchors\x20AP'+'I\x20is\x20not\x20s'+'upported'),null);return;}if(!_0x482796['createAnch'+'or']){_0x2bec2c==null||_0x2bec2c(new Error('Creating\x20A'+'nchor\x20from'+'\x20Hit\x20Test\x20'+'is\x20not\x20sup'+'ported'),null);return;}_0x482796['createAnch'+'or']()['then'](_0x9c8492=>{const _0xb30bdb=this['_createAnc'+'hor'](_0x9c8492);_0x2bec2c==null||_0x2bec2c(null,_0xb30bdb),this['fire']('add',_0xb30bdb);})['catch'](_0x2f30f7=>{_0x2bec2c==null||_0x2bec2c(_0x2f30f7,null),this['fire']('error',_0x2f30f7);});}else this['_creationQ'+'ueue']['push']({'transform':new XRRigidTransform(_0x5930ce,_0x335210),'callback':_0x2bec2c});}['restore'](_0xc8bef1,_0xe2d531){if(!this['_available']){_0xe2d531==null||_0xe2d531(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(!this['_persisten'+'ce']){_0xe2d531==null||_0xe2d531(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'),null);return;}if(!this['manager']['active']){_0xe2d531==null||_0xe2d531(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'),null);return;}this['manager']['session']['restorePer'+'sistentAnc'+'hor'](_0xc8bef1)['then'](_0x50751b=>{const _0x30f858=this['_createAnc'+'hor'](_0x50751b,_0xc8bef1);_0xe2d531==null||_0xe2d531(null,_0x30f858),this['fire']('add',_0x30f858);})['catch'](_0x46309a=>{_0xe2d531==null||_0xe2d531(_0x46309a,null),this['fire']('error',_0x46309a);});}['forget'](_0x544f29,_0xb1a2c2){if(!this['_available']){_0xb1a2c2==null||_0xb1a2c2(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'));return;}if(!this['_persisten'+'ce']){_0xb1a2c2==null||_0xb1a2c2(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'));return;}if(!this['manager']['active']){_0xb1a2c2==null||_0xb1a2c2(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'));return;}this['manager']['session']['deletePers'+'istentAnch'+'or'](_0x544f29)['then'](()=>{_0xb1a2c2==null||_0xb1a2c2(null);})['catch'](_0x5df7da=>{_0xb1a2c2==null||_0xb1a2c2(_0x5df7da),this['fire']('error',_0x5df7da);});}['update'](_0x174b4b){if(!this['_available']){!this['manager']['session']['enabledFea'+'tures']&&!this['_checkingA'+'vailabilit'+'y']&&(this['_checkingA'+'vailabilit'+'y']=!(0x1896*0x1+-0x1*-0x369+-0x1bff),_0x174b4b['createAnch'+'or'](new XRRigidTransform(),this['manager']['_reference'+'Space'])['then'](_0x4ed302=>{_0x4ed302['delete'](),this['manager']['active']&&(this['_available']=!(0x164a+0x1877*-0x1+0x22d),this['fire']('available'));})['catch'](()=>{}));return;}if(this['_creationQ'+'ueue']['length']){for(let _0x2128a2=-0x2*0x1fa+0xd95+-0x9a1;_0x2128a2<this['_creationQ'+'ueue']['length'];_0x2128a2++){const _0x328dba=this['_creationQ'+'ueue'][_0x2128a2];_0x174b4b['createAnch'+'or'](_0x328dba['transform'],this['manager']['_reference'+'Space'])['then'](_0x17f0cf=>{_0x328dba['callback']&&this['_callbacks'+'Anchors']['set'](_0x17f0cf,_0x328dba['callback']);})['catch'](_0x2c4ca3=>{_0x328dba['callback']&&_0x328dba['callback'](_0x2c4ca3,null),this['fire']('error',_0x2c4ca3);});}this['_creationQ'+'ueue']['length']=-0xb07*-0x1+-0x305*0x2+0x1*-0x4fd;}for(const [_0x379098,_0x22c530]of this['_index'])_0x174b4b['trackedAnc'+'hors']['has'](_0x379098)||(this['_index']['delete'](_0x379098),_0x22c530['destroy']());for(let _0x36080d=0x1acb+-0x16fc*0x1+-0x3cf;_0x36080d<this['_list']['length'];_0x36080d++)this['_list'][_0x36080d]['update'](_0x174b4b);for(const _0x2d6d08 of _0x174b4b['trackedAnc'+'hors']){if(this['_index']['has'](_0x2d6d08))continue;try{const _0x23c365=_0x2d6d08['anchorSpac'+'e'];}catch{continue;}const _0x155d59=this['_createAnc'+'hor'](_0x2d6d08);_0x155d59['update'](_0x174b4b);const _0x4daf6c=this['_callbacks'+'Anchors']['get'](_0x2d6d08);_0x4daf6c&&(this['_callbacks'+'Anchors']['delete'](_0x2d6d08),_0x4daf6c(null,_0x155d59)),this['fire']('add',_0x155d59);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['persistenc'+'e'](){return this['_persisten'+'ce'];}get['uuids'](){return!this['_available']||!this['_persisten'+'ce']||!this['manager']['active']?null:this['manager']['session']['persistent'+'Anchors'];}get['list'](){return this['_list'];}}h(Ja,'EVENT_AVAI'+'LABLE','available'),h(Ja,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Ja,'EVENT_ERRO'+'R','error'),h(Ja,'EVENT_ADD','add'),h(Ja,'EVENT_DEST'+'ROY','destroy');class Cu extends me{constructor(_0x45fc64,_0x3b18f8){super(),h(this,'_meshDetec'+'tion'),h(this,'_xrMesh'),h(this,'_lastChang'+'ed',0x1*0x97+-0x221+0x18a),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_meshDetec'+'tion']=_0x45fc64,this['_xrMesh']=_0x3b18f8,this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime']);}get['xrMesh'](){return this['_xrMesh'];}get['label'](){return this['_xrMesh']['semanticLa'+'bel']||'';}get['vertices'](){return this['_xrMesh']['vertices'];}get['indices'](){return this['_xrMesh']['indices'];}['destroy'](){this['_xrMesh']&&(this['_xrMesh']=null,this['fire']('remove'));}['update'](_0x495a19){const _0x40db81=this['_meshDetec'+'tion']['_manager'],_0x28da89=_0x495a19['getPose'](this['_xrMesh']['meshSpace'],_0x40db81['_reference'+'Space']);_0x28da89&&(this['_position']['copy'](_0x28da89['transform']['position']),this['_rotation']['copy'](_0x28da89['transform']['orientatio'+'n'])),this['_lastChang'+'ed']!==this['_xrMesh']['lastChange'+'dTime']&&(this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}}h(Cu,'EVENT_REMO'+'VE','remove'),h(Cu,'EVENT_CHAN'+'GE','change');class xo extends me{constructor(_0x536ba1){super(),h(this,'_manager'),h(this,'_supported',Me['browser']&&!!window['XRMesh']),h(this,'_available',!(0x2287+0x8c8*-0x4+0x2*0x4d)),h(this,'_index',new Map()),h(this,'_list',[]),(this['_manager']=_0x536ba1,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['update'](_0x37a454){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x37a454['detectedMe'+'shes']['size'])this['_available']=!(-0xa5d*-0x3+-0x1f61+0x4a),this['fire']('available');else return;}for(const _0x2da953 of _0x37a454['detectedMe'+'shes']){let _0x15bea3=this['_index']['get'](_0x2da953);_0x15bea3?_0x15bea3['update'](_0x37a454):(_0x15bea3=new Cu(this,_0x2da953),this['_index']['set'](_0x2da953,_0x15bea3),this['_list']['push'](_0x15bea3),_0x15bea3['update'](_0x37a454),this['fire']('add',_0x15bea3));}for(const _0x1be38b of this['_index']['values']())_0x37a454['detectedMe'+'shes']['has'](_0x1be38b['xrMesh'])||this['_removeMes'+'h'](_0x1be38b);}['_removeMes'+'h'](_0x2556ba){this['_index']['delete'](_0x2556ba['xrMesh']),this['_list']['splice'](this['_list']['indexOf'](_0x2556ba),-0x89d+0x46d+0x25*0x1d),_0x2556ba['destroy'](),this['fire']('remove',_0x2556ba);}['_onSession'+'Start'](){if(this['_manager']['session']['enabledFea'+'tures']){const _0x1cd911=this['_manager']['session']['enabledFea'+'tures']['indexOf']('mesh-detec'+'tion')!==-(-0x7b2+-0xf1c+-0x16cf*-0x1);if(!_0x1cd911)return;this['_available']=_0x1cd911,this['fire']('available');}}['_onSession'+'End'](){if(this['_available']){this['_available']=!(-0x2278+-0xbf8+0x2e71);for(const _0x12dc6f of this['_index']['values']())this['_removeMes'+'h'](_0x12dc6f);this['fire']('unavailabl'+'e');}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['meshes'](){return this['_list'];}}h(xo,'EVENT_AVAI'+'LABLE','available'),h(xo,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(xo,'EVENT_ADD','add'),h(xo,'EVENT_REMO'+'VE','remove');class Qv extends me{constructor(_0x46a092,_0x3b6841,_0x3de203){super(),h(this,'_manager'),h(this,'_xrView'),h(this,'_positionD'+'ata',new Float32Array(-0xed0+-0x1faf+0x1741*0x2)),h(this,'_viewport',new re()),h(this,'_projMat',new te()),h(this,'_projViewO'+'ffMat',new te()),h(this,'_viewMat',new te()),h(this,'_viewOffMa'+'t',new te()),h(this,'_viewMat3',new _i()),h(this,'_viewInvMa'+'t',new te()),h(this,'_viewInvOf'+'fMat',new te()),h(this,'_xrCamera',null),h(this,'_textureCo'+'lor',null),h(this,'_textureDe'+'pth',null),h(this,'_depthInfo',null),h(this,'_emptyDept'+'hBuffer',new Uint8Array(0xe47+0x128c+-0x2f9*0xb)),h(this,'_depthMatr'+'ix',new te()),(this['_manager']=_0x46a092,this['_xrView']=_0x3b6841);const _0x2ea335=this['_manager']['app']['graphicsDe'+'vice'];if(this['_manager']['views']['supportedC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera'],this['_manager']['views']['availableC'+'olor']&&this['_xrCamera']&&(this['_textureCo'+'lor']=new _e(_0x2ea335,{'format':wr,'mipmaps':!(-0x1139+0x4c*-0x69+0x3066),'addressU':ue,'addressV':ue,'minFilter':vt,'magFilter':vt,'width':this['_xrCamera']['width'],'height':this['_xrCamera']['height'],'name':'XrView-'+this['_xrView']['eye']+'-Color'}))),this['_manager']['views']['supportedD'+'epth']&&this['_manager']['views']['availableD'+'epth']){const _0xcd5d0c=this['_manager']['views']['depthGpuOp'+'timized']?Te:vt;this['_textureDe'+'pth']=new _e(_0x2ea335,{'format':this['_manager']['views']['depthPixel'+'Format'],'arrayLength':_0x3de203===0x2329+-0x67e*0x3+-0xfae?0x1*0x853+-0x145e+0xc0b*0x1:_0x3de203,'mipmaps':!(0xe79+0x13*-0x89+-0x44d),'addressU':ue,'addressV':ue,'minFilter':_0xcd5d0c,'magFilter':_0xcd5d0c,'width':0x4,'height':0x4,'name':'XrView-'+this['_xrView']['eye']+'-Depth'});for(let _0x198d98=-0xd5a*0x1+-0x1b4*-0x6+0x322;_0x198d98<this['_textureDe'+'pth']['_levels']['length'];_0x198d98++)this['_textureDe'+'pth']['_levels'][_0x198d98]=this['_emptyDept'+'hBuffer'];this['_textureDe'+'pth']['upload']();}(this['_textureCo'+'lor']||this['_textureDe'+'pth'])&&_0x2ea335['on']('devicelost',this['_onDeviceL'+'ost'],this);}get['textureCol'+'or'](){return this['_textureCo'+'lor'];}get['textureDep'+'th'](){return this['_textureDe'+'pth'];}get['depthUvMat'+'rix'](){return this['_depthMatr'+'ix'];}get['depthValue'+'ToMeters'](){var _0x254a0f;return((_0x254a0f=this['_depthInfo'])==null?void(0xab7*0x1+-0x7f*0x16+-0x11*-0x3):_0x254a0f['rawValueTo'+'Meters'])||0x1a7a*0x1+0xd86+0x100*-0x28;}get['eye'](){return this['_xrView']['eye'];}get['viewport'](){return this['_viewport'];}get['projMat'](){return this['_projMat'];}get['projViewOf'+'fMat'](){return this['_projViewO'+'ffMat'];}get['viewOffMat'](){return this['_viewOffMa'+'t'];}get['viewInvOff'+'Mat'](){return this['_viewInvOf'+'fMat'];}get['viewMat3'](){return this['_viewMat3'];}get['positionDa'+'ta'](){return this['_positionD'+'ata'];}['update'](_0x58bdf3,_0x49b910){this['_xrView']=_0x49b910,this['_manager']['views']['availableC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera']);const _0x108903=_0x58bdf3['session']['renderStat'+'e']['baseLayer']['getViewpor'+'t'](this['_xrView']);this['_viewport']['x']=_0x108903['x'],this['_viewport']['y']=_0x108903['y'],this['_viewport']['z']=_0x108903['width'],this['_viewport']['w']=_0x108903['height'],this['_projMat']['set'](this['_xrView']['projection'+'Matrix']),this['_viewMat']['set'](this['_xrView']['transform']['inverse']['matrix']),this['_viewInvMa'+'t']['set'](this['_xrView']['transform']['matrix']),this['_updateTex'+'tureColor'](),this['_updateDep'+'th'](_0x58bdf3);}['_updateTex'+'tureColor'](){if(!this['_manager']['views']['availableC'+'olor']||!this['_xrCamera']||!this['_textureCo'+'lor'])return;const _0x164818=this['_manager']['webglBindi'+'ng'];if(!_0x164818)return;const _0x5f5a92=_0x164818['getCameraI'+'mage'](this['_xrCamera']);if(!_0x5f5a92)return;const _0x2e7aa5=this['_manager']['app']['graphicsDe'+'vice'],_0xe41c9a=_0x2e7aa5['gl'];if(!this['_frameBuff'+'erSource'])this['_frameBuff'+'erSource']=_0xe41c9a['createFram'+'ebuffer'](),this['_frameBuff'+'er']=_0xe41c9a['createFram'+'ebuffer']();else{const _0x33da21=_0xe41c9a['COLOR_ATTA'+'CHMENT0'],_0x3f9bdf=this['_xrCamera']['width'],_0x3a47ca=this['_xrCamera']['height'];_0x2e7aa5['setFramebu'+'ffer'](this['_frameBuff'+'erSource']),_0xe41c9a['framebuffe'+'rTexture2D'](_0xe41c9a['FRAMEBUFFE'+'R'],_0x33da21,_0xe41c9a['TEXTURE_2D'],_0x5f5a92,-0xa27+-0x260c+0x3033),_0x2e7aa5['setFramebu'+'ffer'](this['_frameBuff'+'er']),_0xe41c9a['framebuffe'+'rTexture2D'](_0xe41c9a['FRAMEBUFFE'+'R'],_0x33da21,_0xe41c9a['TEXTURE_2D'],this['_textureCo'+'lor']['impl']['_glTexture'],0x75d*-0x4+-0x169*-0xb+0xdf1*0x1),_0xe41c9a['bindFrameb'+'uffer'](_0xe41c9a['READ_FRAME'+'BUFFER'],this['_frameBuff'+'erSource']),_0xe41c9a['bindFrameb'+'uffer'](_0xe41c9a['DRAW_FRAME'+'BUFFER'],this['_frameBuff'+'er']),_0xe41c9a['blitFrameb'+'uffer'](0x368+0x434*0x8+0x18b*-0x18,_0x3a47ca,_0x3f9bdf,-0xaf6+-0x2018+0xb*0x3ea,0x7*0x103+-0x11*-0x123+-0x1a68,0x2022+-0x104+0x1*-0x1f1e,_0x3f9bdf,_0x3a47ca,_0xe41c9a['COLOR_BUFF'+'ER_BIT'],_0xe41c9a['NEAREST']);}}['_updateDep'+'th'](_0x2656d2){var _0x42ed5f,_0x39c290;if(!this['_manager']['views']['availableD'+'epth']||!this['_textureDe'+'pth'])return;const _0x58baad=this['_manager']['views']['depthGpuOp'+'timized'],_0x5a6d6a=_0x58baad?this['_manager']['webglBindi'+'ng']:_0x2656d2;if(!_0x5a6d6a){this['_depthInfo']=null;return;}const _0x11e9dc=_0x5a6d6a['getDepthIn'+'formation'](this['_xrView']);if(!_0x11e9dc){this['_depthInfo']=null;return;}let _0x11d5e2=!this['_depthInfo']!=!_0x11e9dc;this['_depthInfo']=_0x11e9dc;const _0x43e0f0=((_0x42ed5f=this['_depthInfo'])==null?void(0x1fc*-0xd+-0x96*0x11+-0x11e1*-0x2):_0x42ed5f['width'])||0x1d5b+-0x1213+-0x5a2*0x2,_0x1e3836=((_0x39c290=this['_depthInfo'])==null?void(-0x1*0x2669+0xe34+0x1835):_0x39c290['height'])||-0x1b4*0x3+-0x32*-0x3e+0x3*-0x254;let _0x4a6704=!(0x2db*0xa+-0x154+-0x17*0x12f);if((this['_textureDe'+'pth']['width']!==_0x43e0f0||this['_textureDe'+'pth']['height']!==_0x1e3836)&&(this['_textureDe'+'pth']['_width']=_0x43e0f0,this['_textureDe'+'pth']['_height']=_0x1e3836,_0x11d5e2=!(0x1*-0x2552+-0x1f17+0x53*0xd3),_0x4a6704=!(0x78e*0x2+0x960+-0x2*0xc3e)),_0x11d5e2&&(this['_depthInfo']?this['_depthMatr'+'ix']['data']['set'](this['_depthInfo']['normDepthB'+'ufferFromN'+'ormView']['matrix']):this['_depthMatr'+'ix']['setIdentit'+'y']()),this['_depthInfo']){if(_0x58baad){if(this['_depthInfo']['texture']){const _0x4fef3c=this['_manager']['app']['graphicsDe'+'vice']['gl'];switch(this['_textureDe'+'pth']['impl']['_glTexture']=this['_depthInfo']['texture'],this['_depthInfo']['textureTyp'+'e']==='texture-ar'+'ray'?this['_textureDe'+'pth']['impl']['_glTarget']=_0x4fef3c['TEXTURE_2D'+'_ARRAY']:this['_textureDe'+'pth']['impl']['_glTarget']=_0x4fef3c['TEXTURE_2D'],this['_manager']['views']['depthPixel'+'Format']){case Qi:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x4fef3c['R32F'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x4fef3c['FLOAT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x4fef3c['RED'];break;case Wi:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x4fef3c['DEPTH_COMP'+'ONENT16'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x4fef3c['UNSIGNED_S'+'HORT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x4fef3c['DEPTH_COMP'+'ONENT'];break;}this['_textureDe'+'pth']['impl']['_glCreated']=!(0x1f72+0x1a*0xb+-0x2*0x1048);}}else this['_textureDe'+'pth']['_levels'][-0x1*0x137d+-0xe39+0x21b6]=new Uint8Array(this['_depthInfo']['data']),this['_textureDe'+'pth']['upload']();}else this['_textureDe'+'pth']['_levels'][-0x5*-0x156+0x232c+-0x29da]=this['_emptyDept'+'hBuffer'],this['_textureDe'+'pth']['upload']();_0x4a6704&&this['fire']('depth:resi'+'ze',_0x43e0f0,_0x1e3836);}['updateTran'+'sforms'](_0x130df6){_0x130df6?(this['_viewInvOf'+'fMat']['mul2'](_0x130df6,this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewInvOf'+'fMat'])['invert']()):(this['_viewInvOf'+'fMat']['copy'](this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewMat'])),this['_viewMat3']['setFromMat'+'4'](this['_viewOffMa'+'t']),this['_projViewO'+'ffMat']['mul2'](this['_projMat'],this['_viewOffMa'+'t']),this['_positionD'+'ata'][-0x1*0x267d+-0xd4c+0x33c9]=this['_viewInvOf'+'fMat']['data'][0x5*0x71e+0x20d4*0x1+-0x445e],this['_positionD'+'ata'][-0x1093+0x14d*-0x9+-0x1*-0x1c49]=this['_viewInvOf'+'fMat']['data'][-0xdd1+0x341+-0xb*-0xf7],this['_positionD'+'ata'][0x15d7+0x28*-0x43+-0xb5d*0x1]=this['_viewInvOf'+'fMat']['data'][-0x249f+0x9c8*0x2+0x111d];}['_onDeviceL'+'ost'](){this['_frameBuff'+'erSource']=null,this['_frameBuff'+'er']=null,this['_depthInfo']=null;}['getDepth'](_0x8cb662,_0x112573){var _0x40bfb1;return this['_manager']['views']['depthGpuOp'+'timized']?null:((_0x40bfb1=this['_depthInfo'])==null?void(0x2*-0x5d2+-0x9e*0x4+0xe1c):_0x40bfb1['getDepthIn'+'Meters'](_0x8cb662,_0x112573))??null;}['destroy'](){if(this['_depthInfo']=null,this['_textureCo'+'lor']&&(this['_textureCo'+'lor']['destroy'](),this['_textureCo'+'lor']=null),this['_textureDe'+'pth']&&(this['_textureDe'+'pth']['destroy'](),this['_textureDe'+'pth']=null),this['_frameBuff'+'erSource']){const _0x9a98e4=this['_manager']['app']['graphicsDe'+'vice']['gl'];_0x9a98e4['deleteFram'+'ebuffer'](this['_frameBuff'+'erSource']),this['_frameBuff'+'erSource']=null,_0x9a98e4['deleteFram'+'ebuffer'](this['_frameBuff'+'er']),this['_frameBuff'+'er']=null;}}}h(Qv,'EVENT_DEPT'+'HRESIZE','depth:resi'+'ze');class gh extends me{constructor(_0x1b87fe){super(),h(this,'_manager'),h(this,'_index',new Map()),h(this,'_indexTmp',new Map()),h(this,'_list',[]),h(this,'_supported'+'Color',Me['browser']&&!!window['XRCamera']&&!!window['XRWebGLBin'+'ding']),h(this,'_supported'+'Depth',Me['browser']&&!!window['XRDepthInf'+'ormation']),h(this,'_available'+'Color',!(0x2707+0x434*0x6+-0x403e)),h(this,'_available'+'Depth',!(-0x264c+0x23ab+0x2*0x151)),h(this,'_depthUsag'+'e',''),h(this,'_depthForm'+'at',''),h(this,'_depthForm'+'ats',{[qv]:Lu,[jv]:Wi,[Yv]:Qi}),(this['_manager']=_0x1b87fe,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}get['list'](){return this['_list'];}get['supportedC'+'olor'](){return this['_supported'+'Color'];}get['supportedD'+'epth'](){return this['_supported'+'Depth'];}get['availableC'+'olor'](){return this['_available'+'Color'];}get['availableD'+'epth'](){return this['_available'+'Depth'];}get['depthUsage'](){return this['_depthUsag'+'e'];}get['depthGpuOp'+'timized'](){return this['_depthUsag'+'e']===Xv;}get['depthForma'+'t'](){return this['_depthForm'+'at'];}get['depthPixel'+'Format'](){return this['_depthForm'+'ats'][this['_depthForm'+'at']]??null;}['update'](_0x478aae,_0x579d0f){for(let _0x304ea4=0x965+0x20b6+0xe09*-0x3;_0x304ea4<_0x579d0f['length'];_0x304ea4++)this['_indexTmp']['set'](_0x579d0f[_0x304ea4]['eye'],_0x579d0f[_0x304ea4]);for(const [_0x248243,_0x1f9e01]of this['_indexTmp']){let _0x4b42ae=this['_index']['get'](_0x248243);_0x4b42ae?_0x4b42ae['update'](_0x478aae,_0x1f9e01):(_0x4b42ae=new Qv(this['_manager'],_0x1f9e01,_0x579d0f['length']),this['_index']['set'](_0x248243,_0x4b42ae),this['_list']['push'](_0x4b42ae),_0x4b42ae['update'](_0x478aae,_0x1f9e01),this['fire']('add',_0x4b42ae));}for(const [_0x1e13a3,_0x1e4fb7]of this['_index']){if(this['_indexTmp']['has'](_0x1e13a3))continue;_0x1e4fb7['destroy'](),this['_index']['delete'](_0x1e13a3);const _0x3b980f=this['_list']['indexOf'](_0x1e4fb7);_0x3b980f!==-(0x33*-0x97+0x2651+0x2b*-0x31)&&this['_list']['splice'](_0x3b980f,-0x97*-0x3e+0x83*-0x2f+-0x9*0x164),this['fire']('remove',_0x1e4fb7);}this['_indexTmp']['clear']();}['get'](_0x95618c){return this['_index']['get'](_0x95618c)||null;}['_onSession'+'Start'](){if(this['_manager']['type']===Ro&&this['_manager']['session']['enabledFea'+'tures']&&(this['_available'+'Color']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('camera-acc'+'ess')!==-(0x3d*-0x10+-0x25e2+0x5f5*0x7),this['_available'+'Depth']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('depth-sens'+'ing')!==-(0x1*-0x542+-0x1732+0x1c75),this['_available'+'Depth'])){const _0x3e59c9=this['_manager']['session'];this['_depthUsag'+'e']=_0x3e59c9['depthUsage'],this['_depthForm'+'at']=_0x3e59c9['depthDataF'+'ormat'];}}['_onSession'+'End'](){for(const _0x17707b of this['_index']['values']())_0x17707b['destroy']();this['_index']['clear'](),this['_available'+'Color']=!(-0x9a3*-0x1+-0x1*-0x127f+0x1c21*-0x1),this['_available'+'Depth']=!(0x190d+0x517*-0x2+0xb*-0x15a),this['_depthUsag'+'e']='',this['_depthForm'+'at']='',this['_list']['length']=-0x2129+-0xf0d*0x1+0x3036;}}h(gh,'EVENT_ADD','add'),h(gh,'EVENT_REMO'+'VE','remove');class en extends me{constructor(_0x4d9398){super(),h(this,'app'),h(this,'_supported',Me['browser']&&!!navigator['xr']),h(this,'_available',{}),h(this,'_type',null),h(this,'_spaceType',null),h(this,'_session',null),h(this,'_baseLayer',null),h(this,'webglBindi'+'ng',null),h(this,'_reference'+'Space',null),h(this,'domOverlay'),h(this,'hitTest'),h(this,'imageTrack'+'ing'),h(this,'planeDetec'+'tion'),h(this,'meshDetect'+'ion'),h(this,'input'),h(this,'lightEstim'+'ation'),h(this,'views'),h(this,'anchors'),h(this,'_camera',null),h(this,'_localPosi'+'tion',new D()),h(this,'_localRota'+'tion',new le()),h(this,'_depthNear',-0x3b0+0x598*-0x2+0x44*0x38+0.1),h(this,'_depthFar',0x1*0xceb+-0x20f3+0x17f0),h(this,'_supported'+'FrameRates',null),h(this,'_width',-0xe9c+0x9b0+0x4ec),h(this,'_height',-0x18f1*0x1+-0xc87+0x1b4*0x16),h(this,'_framebuff'+'erScaleFac'+'tor',-0x179c+-0x1ca4+0x3441),(this['app']=_0x4d9398,this['_available'][Ak]=!(0x1950+-0x3a*0x64+-0x2a7),this['_available'][Ck]=!(-0x229+0x1862+0xed*-0x18),this['_available'][Ro]=!(0x12cb*-0x2+0x48*0x1+-0x1*-0x254f),this['views']=new gh(this),this['domOverlay']=new Dk(this),this['hitTest']=new Wr(this),this['imageTrack'+'ing']=new Kv(this),this['planeDetec'+'tion']=new yo(this),this['meshDetect'+'ion']=new xo(this),this['input']=new Li(this),this['lightEstim'+'ation']=new bu(this),this['anchors']=new Ja(this),this['views']=new gh(this),this['_supported']&&(navigator['xr']['addEventLi'+'stener']('devicechan'+'ge',()=>{this['_deviceAva'+'ilabilityC'+'heck']();}),this['_deviceAva'+'ilabilityC'+'heck'](),this['app']['graphicsDe'+'vice']['on']('devicelost',this['_onDeviceL'+'ost'],this),this['app']['graphicsDe'+'vice']['on']('devicerest'+'ored',this['_onDeviceR'+'estored'],this)),this['isPC']=r0());}['destroy'](){}['start'](_0x51a1af,_0x48fd7b,_0x36c020,_0x86b3b5){let _0x2239c1=_0x86b3b5;if(typeof _0x86b3b5=='object'&&(_0x2239c1=_0x86b3b5['callback']),!this['_available'][_0x48fd7b]){_0x2239c1&&_0x2239c1(new Error('XR\x20is\x20not\x20'+'available'));return;}if(this['_session']){_0x2239c1&&_0x2239c1(new Error('XR\x20session'+'\x20is\x20alread'+'y\x20started'));return;}this['_camera']=_0x51a1af,this['_camera']['camera']['xr']=this,this['_type']=_0x48fd7b,this['_spaceType']=_0x36c020,this['_framebuff'+'erScaleFac'+'tor']=(_0x86b3b5==null?void(-0x16a8+-0x16c9+-0x1*-0x2d71):_0x86b3b5['framebuffe'+'rScaleFact'+'or'])??-0x2e6+0x274*-0xc+0x2057,this['_setClipPl'+'anes'](_0x51a1af['nearClip'],_0x51a1af['farClip']);const _0x3c3082={'requiredFeatures':[_0x36c020],'optionalFeatures':[]},_0x1ea334=this['app']['graphicsDe'+'vice'];_0x1ea334!=null&&_0x1ea334['isWebGPU']&&_0x3c3082['requiredFe'+'atures']['push']('webgpu');const _0x888b52=_0x1ea334==null?void(0x14d5+0x1c6*0xf+-0x2f6f*0x1):_0x1ea334['isWebGL2'];if(_0x48fd7b===Ro){if(_0x3c3082['optionalFe'+'atures']['push']('light-esti'+'mation'),_0x3c3082['optionalFe'+'atures']['push']('hit-test'),_0x86b3b5&&(_0x86b3b5['imageTrack'+'ing']&&this['imageTrack'+'ing']['supported']&&_0x3c3082['optionalFe'+'atures']['push']('image-trac'+'king'),_0x86b3b5['planeDetec'+'tion']&&_0x3c3082['optionalFe'+'atures']['push']('plane-dete'+'ction'),_0x86b3b5['meshDetect'+'ion']&&_0x3c3082['optionalFe'+'atures']['push']('mesh-detec'+'tion')),this['domOverlay']['supported']&&this['domOverlay']['root']&&(_0x3c3082['optionalFe'+'atures']['push']('dom-overla'+'y'),_0x3c3082['domOverlay']={'root':this['domOverlay']['root']}),_0x86b3b5&&_0x86b3b5['anchors']&&this['anchors']['supported']&&_0x3c3082['optionalFe'+'atures']['push']('anchors'),_0x86b3b5&&_0x86b3b5['depthSensi'+'ng']&&this['views']['supportedD'+'epth']){_0x3c3082['optionalFe'+'atures']['push']('depth-sens'+'ing');const _0x27d7e0=[],_0x367083=[];if(_0x27d7e0['push'](Xv,Mk),_0x367083['push'](Yv,qv,jv),_0x86b3b5['depthSensi'+'ng']['usagePrefe'+'rence']){const _0x3e6dfd=_0x27d7e0['indexOf'](_0x86b3b5['depthSensi'+'ng']['usagePrefe'+'rence']);_0x3e6dfd!==-(-0x21e+0x1d*0x9+0x11a)&&_0x27d7e0['splice'](_0x3e6dfd,-0x123*-0x21+0x1*0x1fe2+-0x4564),_0x27d7e0['unshift'](_0x86b3b5['depthSensi'+'ng']['usagePrefe'+'rence']);}if(_0x86b3b5['depthSensi'+'ng']['dataFormat'+'Preference']){const _0x3cf242=_0x367083['indexOf'](_0x86b3b5['depthSensi'+'ng']['dataFormat'+'Preference']);_0x3cf242!==-(-0x2c5*-0x2+0x55f+-0xae8)&&_0x367083['splice'](_0x3cf242,-0xc0b*-0x1+-0x13ba+-0x8*-0xf6),_0x367083['unshift'](_0x86b3b5['depthSensi'+'ng']['dataFormat'+'Preference']);}_0x3c3082['depthSensi'+'ng']={'usagePreference':_0x27d7e0,'dataFormatPreference':_0x367083};}_0x888b52&&_0x86b3b5&&_0x86b3b5['cameraColo'+'r']&&this['views']['supportedC'+'olor']&&_0x3c3082['optionalFe'+'atures']['push']('camera-acc'+'ess');}_0x3c3082['optionalFe'+'atures']['push']('hand-track'+'ing'),_0x86b3b5&&_0x86b3b5['optionalFe'+'atures']&&(_0x3c3082['optionalFe'+'atures']=_0x3c3082['optionalFe'+'atures']['concat'](_0x86b3b5['optionalFe'+'atures'])),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['images']['length']?this['imageTrack'+'ing']['prepareIma'+'ges']((_0x275357,_0x38ee74)=>{if(_0x275357){_0x2239c1&&_0x2239c1(_0x275357),this['fire']('error',_0x275357);return;}_0x38ee74!==null&&(_0x3c3082['trackedIma'+'ges']=_0x38ee74),this['_onStartOp'+'tionsReady'](_0x48fd7b,_0x36c020,_0x3c3082,_0x2239c1);}):this['_onStartOp'+'tionsReady'](_0x48fd7b,_0x36c020,_0x3c3082,_0x2239c1);}['_onStartOp'+'tionsReady'](_0x3bb71d,_0x5249c5,_0x3d722a,_0x58dcb8){const _0x2b5ada=this['isPC']?{'requiredFeatures':['local-floo'+'r']}:_0x3d722a;navigator['xr']['requestSes'+'sion'](_0x3bb71d,_0x2b5ada)['then'](_0x5a2228=>{this['_onSession'+'Start'](_0x5a2228,_0x5249c5,_0x58dcb8);})['catch'](_0x35da87=>{this['_camera']['camera']['xr']=null,this['_camera']=null,this['_type']=null,this['_spaceType']=null,_0x58dcb8&&_0x58dcb8(_0x35da87),this['fire']('error',_0x35da87);});}['end'](_0x2f7a82){if(!this['_session']){_0x2f7a82&&_0x2f7a82(new Error('XR\x20Session'+'\x20is\x20not\x20in'+'itialized'));return;}this['webglBindi'+'ng']=null,_0x2f7a82&&this['once']('end',_0x2f7a82),this['_session']['end']();}['isAvailabl'+'e'](_0x15e8c7){return this['_available'][_0x15e8c7];}['_deviceAva'+'ilabilityC'+'heck'](){for(const _0x486208 in this['_available'])this['_sessionSu'+'pportCheck'](_0x486208);}['initiateRo'+'omCapture'](_0x499273){if(!this['_session']){_0x499273(new Error('Session\x20is'+'\x20not\x20activ'+'e'));return;}if(!this['_session']['initiateRo'+'omCapture']){_0x499273(new Error('Session\x20do'+'es\x20not\x20sup'+'port\x20manua'+'l\x20room\x20cap'+'ture'));return;}this['_session']['initiateRo'+'omCapture']()['then'](()=>{_0x499273&&_0x499273(null);})['catch'](_0x4b3ae7=>{_0x499273&&_0x499273(_0x4b3ae7);});}['updateTarg'+'etFrameRat'+'e'](_0x13860e,_0x1bdcb0){var _0x2d9707;if(!((_0x2d9707=this['_session'])!=null&&_0x2d9707['updateTarg'+'etFrameRat'+'e'])){_0x1bdcb0==null||_0x1bdcb0(new Error('unable\x20to\x20'+'update\x20fra'+'meRate'));return;}this['_session']['updateTarg'+'etFrameRat'+'e'](_0x13860e)['then'](()=>{_0x1bdcb0==null||_0x1bdcb0();})['catch'](_0x12cc1e=>{_0x1bdcb0==null||_0x1bdcb0(_0x12cc1e);});}['_sessionSu'+'pportCheck'](_0x36ae65){navigator['xr']['isSessionS'+'upported'](_0x36ae65)['then'](_0x4fd8a6=>{this['_available'][_0x36ae65]!==_0x4fd8a6&&(this['_available'][_0x36ae65]=_0x4fd8a6,this['fire']('available',_0x36ae65,_0x4fd8a6),this['fire']('available:'+_0x36ae65,_0x4fd8a6));})['catch'](_0x39b2c0=>{this['fire']('error',_0x39b2c0);});}['_onSession'+'Start'](_0x5b05d0,_0x3dfbc4,_0x1dd22e){let _0x24db41=!(0x2131+-0xc43+-0x14ed);this['_session']=_0x5b05d0;const _0x21849e=()=>{this['fire']('visibility'+':change',_0x5b05d0['visibility'+'State']);},_0x479757=()=>{this['_setClipPl'+'anes'](this['_camera']['nearClip'],this['_camera']['farClip']);},_0x5a9d10=()=>{this['_camera']&&(this['_camera']['off']('set_nearCl'+'ip',_0x479757),this['_camera']['off']('set_farCli'+'p',_0x479757),this['_camera']['camera']['xr']=null,this['_camera']=null),_0x5b05d0['removeEven'+'tListener']('end',_0x5a9d10),_0x5b05d0['removeEven'+'tListener']('visibility'+'change',_0x21849e),_0x24db41||this['fire']('end'),this['_session']=null,this['_reference'+'Space']=null,this['_width']=-0x1*0x11c9+-0x78b*-0x4+-0xc63,this['_height']=0x317+-0x129e*-0x1+0x1*-0x15b5,this['_type']=null,this['_spaceType']=null,this['app']['systems']&&this['app']['tick']();};_0x5b05d0['addEventLi'+'stener']('end',_0x5a9d10),_0x5b05d0['addEventLi'+'stener']('visibility'+'change',_0x21849e),this['_camera']['on']('set_nearCl'+'ip',_0x479757),this['_camera']['on']('set_farCli'+'p',_0x479757),w['assert'](window,'window\x20is\x20'+'needed\x20to\x20'+'scale\x20the\x20'+'XR\x20framebu'+'ffer.\x20Are\x20'+'you\x20runnin'+'g\x20XR\x20headl'+'ess?'),this['_createBas'+'eLayer'](),this['session']['supportedF'+'rameRates']?this['_supported'+'FrameRates']=Array['from'](this['session']['supportedF'+'rameRates']):this['_supported'+'FrameRates']=null,this['_session']['addEventLi'+'stener']('frameratec'+'hange',()=>{var _0x24f9c0;this['fire']('frameratec'+'hange',(_0x24f9c0=this['_session'])==null?void(0xbce*-0x2+-0x1d82+-0xd*-0x416):_0x24f9c0['frameRate']);}),_0x5b05d0['requestRef'+'erenceSpac'+'e'](_0x3dfbc4)['then'](_0x3b9947=>{this['_reference'+'Space']=_0x3b9947,this['app']['tick'](),_0x1dd22e&&_0x1dd22e(null),this['fire']('start');})['catch'](_0x1828fc=>{_0x24db41=!(-0x551*-0x3+0x47f+-0x1472),_0x5b05d0['end'](),_0x1dd22e&&_0x1dd22e(_0x1828fc),this['fire']('error',_0x1828fc);});}['_setClipPl'+'anes'](_0x4c65f3,_0x3429dc){this['_depthNear']===_0x4c65f3&&this['_depthFar']===_0x3429dc||(this['_depthNear']=_0x4c65f3,this['_depthFar']=_0x3429dc,this['_session']&&this['_session']['updateRend'+'erState']({'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_createBas'+'eLayer'](){const _0x22c352=this['app']['graphicsDe'+'vice'],_0x10662e=_0x22c352['maxPixelRa'+'tio']/window['devicePixe'+'lRatio']*this['_framebuff'+'erScaleFac'+'tor'];if(this['_baseLayer']=new XRWebGLLayer(this['_session'],_0x22c352['gl'],{'alpha':!(0x15*0xf1+-0x1042*-0x1+-0x2407),'depth':!(-0x281*-0x1+-0xc4c+-0x6d*-0x17),'stencil':!(-0x1*0x42b+-0x32b*-0x7+-0x2*0x901),'framebufferScaleFactor':_0x10662e,'antialias':!(-0xd17+-0x35*-0x8b+0xb*-0x16d)}),_0x22c352!=null&&_0x22c352['isWebGL2']&&window['XRWebGLBin'+'ding'])try{this['webglBindi'+'ng']=new XRWebGLBinding(this['_session'],_0x22c352['gl']);}catch(_0x27d9de){this['fire']('error',_0x27d9de);}this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']});}['_onDeviceL'+'ost'](){this['_session']&&(this['webglBindi'+'ng']&&(this['webglBindi'+'ng']=null),this['_baseLayer']=null,this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_onDeviceR'+'estored'](){this['_session']&&setTimeout(()=>{this['app']['graphicsDe'+'vice']['gl']['makeXRComp'+'atible']()['then'](()=>{this['_createBas'+'eLayer']();})['catch'](_0x1c0b67=>{this['fire']('error',_0x1c0b67);});},-0x938+-0x2432+0x2d6a);}['update'](_0x25b1c8){if(!this['_session'])return!(-0x1*-0x1a3f+0x1f*-0x57+-0x1*0xfb5);const _0x489899=_0x25b1c8['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rWidth'],_0x394b7f=_0x25b1c8['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rHeight'];(this['_width']!==_0x489899||this['_height']!==_0x394b7f)&&(this['_width']=_0x489899,this['_height']=_0x394b7f,this['app']['graphicsDe'+'vice']['setResolut'+'ion'](_0x489899,_0x394b7f));const _0x156706=_0x25b1c8['getViewerP'+'ose'](this['_reference'+'Space']);if(!_0x156706)return!(0x16*0xe6+-0x62a+0x3b*-0x3b);const _0x2c9103=this['views']['list']['length'];this['views']['update'](_0x25b1c8,_0x156706['views']);const _0x55a635=_0x156706['transform']['position'],_0x802982=_0x156706['transform']['orientatio'+'n'];if(this['_localPosi'+'tion']['set'](_0x55a635['x'],_0x55a635['y'],_0x55a635['z']),this['_localRota'+'tion']['set'](_0x802982['x'],_0x802982['y'],_0x802982['z'],_0x802982['w']),_0x2c9103===-0x1*-0x874+-0x242b+0x1bb7&&this['views']['list']['length']>-0x1c5e+-0x14f2*-0x1+0x76c){const _0x5ce704=new te(),_0x4cfa0d=this['views']['list'][0xffd*0x2+0x2455*-0x1+0x45b];_0x5ce704['copy'](_0x4cfa0d['projMat']);const _0x30f231=_0x5ce704['data'],_0x8fe603=(0x1*0x218b+-0x26b7+0x1a*0x33)*Math['atan']((-0x2287+-0x79b+-0x1*-0x2a23)/_0x30f231[0x10fb+0xb*-0x14e+-0xa7*0x4])*(-0x25e4+0x124c+0x144c)/Math['PI'],_0x1aec68=_0x30f231[0xa3d*0x1+-0x114b+-0x1*-0x713]/_0x30f231[-0x2*0x87e+0x3*-0x6fb+-0x13*-0x1ff],_0xc3330a=_0x30f231[-0xb5d*-0x1+0x74f+-0x129e]/(_0x30f231[-0x129d+-0x1c3b+-0x2*-0x1771]+(-0x2c9+0x15a+-0x4*-0x5c)),_0x533996=_0x30f231[0x1e18+-0x2156+-0x4*-0xd3]/(_0x30f231[0x1*0x4bf+0xfe6+0x5*-0x41f]-(-0x4f*0xb+0x1*-0x45d+0x7c3));this['_camera']['camera']['setXrPrope'+'rties']({'aspectRatio':_0x1aec68,'farClip':_0xc3330a,'fov':_0x8fe603,'horizontalFov':!(0x1*-0x605+-0x22da+0x28e0),'nearClip':_0x533996});}return this['_camera']['camera']['_node']['setLocalPo'+'sition'](this['_localPosi'+'tion']),this['_camera']['camera']['_node']['setLocalRo'+'tation'](this['_localRota'+'tion']),this['input']['update'](_0x25b1c8),this['_type']===Ro&&(this['hitTest']['supported']&&this['hitTest']['update'](_0x25b1c8),this['lightEstim'+'ation']['supported']&&this['lightEstim'+'ation']['update'](_0x25b1c8),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['update'](_0x25b1c8),this['anchors']['supported']&&this['anchors']['update'](_0x25b1c8),this['planeDetec'+'tion']['supported']&&this['planeDetec'+'tion']['update'](_0x25b1c8),this['meshDetect'+'ion']['supported']&&this['meshDetect'+'ion']['update'](_0x25b1c8)),this['fire']('update',_0x25b1c8),!(0x1*-0x2047+-0x1abb+-0x437*-0xe);}get['supported'](){return this['_supported'];}get['active'](){return!!this['_session'];}get['type'](){return this['_type'];}get['spaceType'](){return this['_spaceType'];}get['session'](){return this['_session'];}get['frameRate'](){var _0x483d71;return((_0x483d71=this['_session'])==null?void(0x49*-0x79+0x1c0*-0x13+0x43c1):_0x483d71['frameRate'])??null;}get['supportedF'+'rameRates'](){return this['_supported'+'FrameRates'];}get['framebuffe'+'rScaleFact'+'or'](){return this['_framebuff'+'erScaleFac'+'tor'];}set['fixedFovea'+'tion'](_0x48f9bd){var _0x2fa8ff;(((_0x2fa8ff=this['_baseLayer'])==null?void(-0x215d+0x1ff1+0xd*0x1c):_0x2fa8ff['fixedFovea'+'tion'])??null)!==null&&(this['app']['graphicsDe'+'vice']['samples']>-0x792+0x22f0+-0x1b5d&&w['warn']('Fixed\x20Fove'+'ation\x20is\x20i'+'gnored.\x20Di'+'sable\x20anti'+'-aliasing\x20'+'for\x20it\x20to\x20'+'be\x20effecti'+'ve.'),this['_baseLayer']['fixedFovea'+'tion']=_0x48f9bd);}get['fixedFovea'+'tion'](){var _0x13a993;return((_0x13a993=this['_baseLayer'])==null?void(0x6*0x56f+0x24cb+-0x4565):_0x13a993['fixedFovea'+'tion'])??null;}get['camera'](){return this['_camera']?this['_camera']['entity']:null;}get['visibility'+'State'](){return this['_session']?this['_session']['visibility'+'State']:null;}}h(en,'EVENT_AVAI'+'LABLE','available'),h(en,'EVENT_STAR'+'T','start'),h(en,'EVENT_END','end'),h(en,'EVENT_UPDA'+'TE','update'),h(en,'EVENT_ERRO'+'R','error');class cU extends Ks{constructor(_0x462321,_0x50d74e={}){super(_0x462321),h(this,'rotateArou'+'ndEl');const _0x12d0ac=new yI();_0x12d0ac['graphicsDe'+'vice']=_0x50d74e['graphicsDe'+'vice']??this['createDevi'+'ce'](_0x462321,_0x50d74e),this['addCompone'+'ntSystems'](_0x12d0ac),this['addResourc'+'eHandles'](_0x12d0ac),_0x12d0ac['elementInp'+'ut']=_0x50d74e['elementInp'+'ut'],_0x12d0ac['keyboard']=_0x50d74e['keyboard'],_0x12d0ac['mouse']=_0x50d74e['mouse'],_0x12d0ac['touch']=_0x50d74e['touch'],_0x12d0ac['gamepads']=_0x50d74e['gamepads'],_0x12d0ac['scriptPref'+'ix']=_0x50d74e['scriptPref'+'ix'],_0x12d0ac['assetPrefi'+'x']=_0x50d74e['assetPrefi'+'x'],_0x12d0ac['scriptsOrd'+'er']=_0x50d74e['scriptsOrd'+'er'],_0x12d0ac['soundManag'+'er']=new XT(),_0x12d0ac['lightmappe'+'r']=LI,_0x12d0ac['batchManag'+'er']=Yw,_0x12d0ac['xr']=en,this['init'](_0x12d0ac);}['createDevi'+'ce'](_0x3a4065,_0x560b6c){return _0x560b6c['graphicsDe'+'viceOption'+'s']||(_0x560b6c['graphicsDe'+'viceOption'+'s']={}),Me['browser']&&navigator['xr']&&(_0x560b6c['graphicsDe'+'viceOption'+'s']['xrCompatib'+'le']=!(-0x2f*-0x4f+-0x2097+0x1216)),_0x560b6c['graphicsDe'+'viceOption'+'s']['alpha']=_0x560b6c['graphicsDe'+'viceOption'+'s']['alpha']||!(-0x2*-0xeb4+0x16c*-0x19+0x625*0x1),new wT(_0x3a4065,_0x560b6c['graphicsDe'+'viceOption'+'s']);}['addCompone'+'ntSystems'](_0x5c0af9){_0x5c0af9['componentS'+'ystems']=[Kp,EL,eR,ZI,iL,pR,rO,BO,VO,tF,PO,aL,tO,uO,KL,cL,wO,bO,RO,hR,sR,FO,iF];}['addResourc'+'eHandles'](_0x54189b){_0x54189b['resourceHa'+'ndlers']=[rF,lN,cN,hN,GN,kN,bk,QN,RN,fN,jN,HN,gN,LN,_N,YN,IN,SN,yN,uN,ek,KN,ZN,mN,DN];}}class hU extends me{constructor(_0x5def63,_0xa47639){super(),h(this,'_assets',new Set()),h(this,'_loadingAs'+'sets',new Set()),h(this,'_waitingAs'+'sets',new Set()),h(this,'_loading',!(0x11f4+0xc63+0xf2b*-0x2)),h(this,'_loaded',!(0x2f5*-0x1+-0x1fd5+0x22cb)),h(this,'_failed',[]),(this['_registry']=_0xa47639,_0x5def63['forEach'](_0x46e23e=>{if(_0x46e23e instanceof pe)_0x46e23e['registry']||(_0x46e23e['registry']=_0xa47639),this['_assets']['add'](_0x46e23e);else{const _0x269080=_0xa47639['get'](_0x46e23e);_0x269080?this['_assets']['add'](_0x269080):this['_waitForAs'+'set'](_0x46e23e);}}));}['destroy'](){this['_registry']['off']('load',this['_onLoad']),this['_registry']['off']('error',this['_onError']),this['_waitingAs'+'sets']['forEach'](_0x55adf5=>{this['_registry']['off']('add:'+_0x55adf5,this['_onAddAsse'+'t']);}),this['off']('progress'),this['off']('load');}['_assetHasD'+'ependencie'+'s'](_0x281f71){var _0x2190f9;return _0x281f71['type']==='model'&&((_0x2190f9=_0x281f71['file'])==null?void(-0xe3e+-0x5af*0x3+-0x1f4b*-0x1):_0x2190f9['url'])&&_0x281f71['file']['url']&&_0x281f71['file']['url']['match'](/.json$/g);}['load'](_0x40cf03,_0xa7e4bb){if(this['_loading']){console['debug']('AssetListL'+'oader:\x20Loa'+'d\x20function'+'\x20called\x20mu'+'ltiple\x20tim'+'es.');return;}this['_loading']=!(-0x2*0xa91+0x2*0x119+-0x25e*-0x8),this['_callback']=_0x40cf03,this['_scope']=_0xa7e4bb,this['_registry']['on']('load',this['_onLoad'],this),this['_registry']['on']('error',this['_onError'],this);let _0x4bdc77=!(0x1167+-0x17f*-0xf+-0x27d7);this['_assets']['forEach'](_0x2b82e9=>{_0x2b82e9['loaded']||(_0x4bdc77=!(-0xe19+-0x3*0x227+0x148e),this['_assetHasD'+'ependencie'+'s'](_0x2b82e9)&&this['_registry']['loadFromUr'+'l'](_0x2b82e9['file']['url'],_0x2b82e9['type'],(_0x2ce6d5,_0x2e1d8e)=>{if(_0x2ce6d5){this['_onError'](_0x2ce6d5,_0x2b82e9);return;}this['_onLoad'](_0x2b82e9);}),this['_loadingAs'+'sets']['add'](_0x2b82e9),this['_registry']['add'](_0x2b82e9));}),this['_loadingAs'+'sets']['forEach'](_0x39f49e=>{this['_assetHasD'+'ependencie'+'s'](_0x39f49e)||this['_registry']['load'](_0x39f49e);}),!_0x4bdc77&&this['_waitingAs'+'sets']['size']===-0x1d6f+-0x2617+0x2*0x21c3&&this['_loadingCo'+'mplete']();}['ready'](_0xe71a65,_0x3aa4fd=this){this['_loaded']?_0xe71a65['call'](_0x3aa4fd,Array['from'](this['_assets'])):this['once']('load',_0x117139=>{_0xe71a65['call'](_0x3aa4fd,_0x117139);});}['_loadingCo'+'mplete'](){this['_loaded']||(this['_loaded']=!(0x1*0x1980+0x1a6e+-0x33ee),this['_registry']['off']('load',this['_onLoad'],this),this['_registry']['off']('error',this['_onError'],this),this['_failed']['length']?(this['_callback']&&this['_callback']['call'](this['_scope'],'Failed\x20to\x20'+'load\x20some\x20'+'assets',this['_failed']),this['fire']('error',this['_failed'])):(this['_callback']&&this['_callback']['call'](this['_scope']),this['fire']('load',Array['from'](this['_assets']))));}['_onLoad'](_0x5a5e53){this['_loadingAs'+'sets']['has'](_0x5a5e53)&&(this['fire']('progress',_0x5a5e53),this['_loadingAs'+'sets']['delete'](_0x5a5e53)),this['_loadingAs'+'sets']['size']===0xba4+-0x1040+-0x5*-0xec&&setTimeout(()=>{this['_loadingCo'+'mplete']();},0x1*-0x2287+-0x2404+0x1*0x468b);}['_onError'](_0x39173b,_0x4d31a4){this['_loadingAs'+'sets']['has'](_0x4d31a4)&&(this['_failed']['push'](_0x4d31a4),this['_loadingAs'+'sets']['delete'](_0x4d31a4)),this['_loadingAs'+'sets']['size']===-0x1ba6+-0x1*0x1c9+0x5*0x5e3&&setTimeout(()=>{this['_loadingCo'+'mplete']();},-0xd09+-0x1*-0x15ec+-0x8e3);}['_onAddAsse'+'t'](_0x44d8cb){this['_waitingAs'+'sets']['delete'](_0x44d8cb),this['_assets']['add'](_0x44d8cb),_0x44d8cb['loaded']||(this['_loadingAs'+'sets']['add'](_0x44d8cb),this['_registry']['load'](_0x44d8cb));}['_waitForAs'+'set'](_0x2b2351){this['_waitingAs'+'sets']['add'](_0x2b2351),this['_registry']['once']('add:'+_0x2b2351,this['_onAddAsse'+'t'],this);}}const xc=[],Ok=[[],[],[]];class Fk extends ys{constructor(_0x35206f,_0x2f7cb5){super(_0x35206f),h(this,'viewBindGr'+'oups',[]),this['renderer']=_0x2f7cb5;}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x1d6dbb=>{_0x1d6dbb['defaultUni'+'formBuffer']['destroy'](),_0x1d6dbb['destroy']();}),this['viewBindGr'+'oups']['length']=0x19ee*-0x1+0x4*0x12b+0x6*0x38b;}['update'](_0x2769e9,_0x5cda7d,_0x1c9556,_0x12f643){this['camera']=_0x2769e9,this['scene']=_0x5cda7d,this['layers']=_0x1c9556,this['mapping']=_0x12f643;}['execute'](){const _0x2d1d4d=this['device'],{renderer:_0x2f092c,camera:_0x2134cd,scene:_0x1a0d0f,layers:_0x1b9340,mapping:_0x2a829f,renderTarget:_0x4586fd}=this,_0x1f5cdd=_0x1a0d0f['layers']['layerList'],_0x39b1d3=_0x1a0d0f['layers']['subLayerEn'+'abled'],_0x5812f5=_0x1a0d0f['layers']['subLayerLi'+'st'];for(let _0x616b8f=0xe3c*0x2+-0x167*-0x1b+0x4255*-0x1;_0x616b8f<_0x1f5cdd['length'];_0x616b8f++){const _0x592302=_0x1f5cdd[_0x616b8f];if(!(_0x1b9340&&_0x1b9340['indexOf'](_0x592302)<0x258d*0x1+0x12*-0x10b+-0x12c7)&&_0x592302['enabled']&&_0x39b1d3[_0x616b8f]&&_0x592302['camerasSet']['has'](_0x2134cd['camera'])){const _0x21706b=_0x5812f5[_0x616b8f];Q['pushGpuMar'+'ker'](_0x2d1d4d,_0x592302['name']+'('+(_0x21706b?'TRANSP':'OPAQUE')+')'),_0x592302['_clearDept'+'hBuffer']&&_0x2f092c['clear'](_0x2134cd['camera'],!(-0x1024+-0xb01+0x19*0x116),!(-0x20e*-0x1+-0x2*-0x99a+-0x1542),!(0xe31+-0x1c42+0xe12));const _0x248482=_0x592302['meshInstan'+'ces'];for(let _0x1f32da=0xd*0x14e+-0xff*-0x3+-0x13f3;_0x1f32da<_0x248482['length'];_0x1f32da++){const _0x136d1e=_0x248482[_0x1f32da];_0x136d1e['pick']&&_0x136d1e['transparen'+'t']===_0x21706b&&(xc['push'](_0x136d1e),_0x2a829f['set'](_0x136d1e['id'],_0x136d1e));}xc['length']>-0x17b*-0x1a+-0x250a+-0x174&&(_0x1a0d0f['clusteredL'+'ightingEna'+'bled']&&_0x2f092c['worldClust'+'ersAllocat'+'or']['empty']['activate'](),_0x2f092c['setCameraU'+'niforms'](_0x2134cd['camera'],_0x4586fd),_0x2d1d4d['supportsUn'+'iformBuffe'+'rs']&&_0x2f092c['setupViewU'+'niformBuff'+'ers'](this['viewBindGr'+'oups'],_0x2f092c['viewUnifor'+'mFormat'],_0x2f092c['viewBindGr'+'oupFormat'],null),_0x2f092c['renderForw'+'ard'](_0x2134cd['camera'],_0x4586fd,xc,Ok,Wn,_0x25b655=>{_0x2d1d4d['setBlendSt'+'ate'](pt['NOBLEND']);}),xc['length']=-0x97*-0x3a+0x63*0x51+-0x4189),Q['popGpuMark'+'er'](_0x2d1d4d);}}}}const df=new Set(),Nk=new re();let dU=class{constructor(_0x292c58,_0x16aca7,_0xdd9bb4){h(this,'renderTarg'+'et',null),h(this,'mapping',new Map()),h(this,'deviceVali'+'d',!(-0x1585+-0xe5c+-0x23e1*-0x1)),(w['assert'](_0x292c58),this['renderer']=_0x292c58['renderer'],this['device']=_0x292c58['graphicsDe'+'vice'],this['renderPass']=new Fk(this['device'],_0x292c58['renderer']),this['width']=-0x13e*-0xe+-0x1a*0xfc+0x834,this['height']=0xcd5+-0x14d1*0x1+0x7fc,this['resize'](_0x16aca7,_0xdd9bb4),this['device']['on']('destroy',()=>{this['deviceVali'+'d']=!(0x1*0x1acd+0x2a0*0x6+0x2a8c*-0x1);}));}['getSelecti'+'on'](_0x217b52,_0x813dd3,_0x2a0288=0x1*0x2434+0x6fd+0x2b3*-0x10,_0x1c67ea=0x1*-0x18d1+0x2495+-0xbc3){const _0xaa7474=this['device'];if(_0xaa7474['isWebGPU'])return w['errorOnce']('pc.Picker#'+'getSelecti'+'on\x20is\x20not\x20'+'supported\x20'+'on\x20WebGPU,'+'\x20use\x20pc.Pi'+'cker#getSe'+'lectionAsy'+'nc\x20instead'+'.'),[];w['assert'](typeof _0x217b52!='object','Picker.get'+'Selection:'+'param\x20\x27rec'+'t\x27\x20is\x20depr'+'ecated,\x20us'+'e\x20\x27x,\x20y,\x20w'+'idth,\x20heig'+'ht\x27\x20instea'+'d.'),_0x813dd3=this['renderTarg'+'et']['height']-(_0x813dd3+_0x1c67ea);const _0x57f360=this['sanitizeRe'+'ct'](_0x217b52,_0x813dd3,_0x2a0288,_0x1c67ea);_0xaa7474['setRenderT'+'arget'](this['renderTarg'+'et']),_0xaa7474['updateBegi'+'n']();const _0x34ad53=new Uint8Array((-0x12fb+0x25*0xab+0x3*-0x1e8)*_0x57f360['z']*_0x57f360['w']);return _0xaa7474['readPixels'](_0x57f360['x'],_0x57f360['y'],_0x57f360['z'],_0x57f360['w'],_0x34ad53),_0xaa7474['updateEnd'](),this['decodePixe'+'ls'](_0x34ad53,this['mapping']);}['getSelecti'+'onAsync'](_0x4d8d15,_0x1a89e7,_0x71a3dd=-0x40d*0x7+-0x247a+-0x40d6*-0x1,_0x3ea2aa=0x149a+-0xa2b*-0x3+0x198d*-0x2){var _0x66d7c0;(_0x66d7c0=this['device'])!=null&&_0x66d7c0['isWebGL2']&&(_0x1a89e7=this['renderTarg'+'et']['height']-(_0x1a89e7+_0x3ea2aa));const _0x28d656=this['sanitizeRe'+'ct'](_0x4d8d15,_0x1a89e7,_0x71a3dd,_0x3ea2aa);return this['renderTarg'+'et']['colorBuffe'+'r']['read'](_0x28d656['x'],_0x28d656['y'],_0x28d656['z'],_0x28d656['w'],{'renderTarget':this['renderTarg'+'et'],'immediate':!(-0x1feb+-0x165*-0x6+0x178d)})['then'](_0x2fa042=>this['decodePixe'+'ls'](_0x2fa042,this['mapping']));}['sanitizeRe'+'ct'](_0x1c02b4,_0x3119f8,_0x4a4b1b,_0x4776d5){const _0x3bff97=this['renderTarg'+'et']['width'],_0x30c157=this['renderTarg'+'et']['height'];return _0x1c02b4=Y['clamp'](Math['floor'](_0x1c02b4),0x96f+0x1e17+-0x2786,_0x3bff97-(-0x4*-0x54d+-0x14e4+-0x4f)),_0x3119f8=Y['clamp'](Math['floor'](_0x3119f8),0x1aae+-0x1*-0x1be3+0x1*-0x3691,_0x30c157-(-0x14a6+-0x1*-0xb15+0x992)),_0x4a4b1b=Math['floor'](Math['max'](_0x4a4b1b,-0x216+0x18cb+0xb5a*-0x2)),_0x4a4b1b=Math['min'](_0x4a4b1b,_0x3bff97-_0x1c02b4),_0x4776d5=Math['floor'](Math['max'](_0x4776d5,0x23fa+0x1a92+-0x6f3*0x9)),_0x4776d5=Math['min'](_0x4776d5,_0x30c157-_0x3119f8),Nk['set'](_0x1c02b4,_0x3119f8,_0x4a4b1b,_0x4776d5);}['decodePixe'+'ls'](_0x8b2dbd,_0x10d0bb){const _0x541d9f=[];if(this['deviceVali'+'d']){const _0x3ea779=_0x8b2dbd['length'];for(let _0x4d6450=0x34*0xb1+-0x2431+0x3d;_0x4d6450<_0x3ea779;_0x4d6450+=0x96f+0xa5*0x9+0x2*-0x79c){const _0x4f2711=_0x8b2dbd[_0x4d6450+(-0x2141+0x1*-0x1afb+0x3c*0x101)],_0x399479=_0x8b2dbd[_0x4d6450+(0x1652+-0xd*-0x28d+-0x3*0x127e)],_0xdcf53d=_0x8b2dbd[_0x4d6450+(-0x5e3+-0xc30+0x1215)],_0x7b7ad4=(_0x8b2dbd[_0x4d6450+(0x8f5+-0x25d*0x5+-0xf5*-0x3)]<<0xd*0x2d8+-0x8f9*-0x1+-0x2dd9|_0x4f2711<<-0x1feb*0x1+-0x15a*0x17+0x3f11|_0x399479<<-0xcf3+-0x227d+0x2f78|_0xdcf53d)>>>0x24f5+0x22*0x7f+-0x35d3;_0x7b7ad4!==0xae525f1*0x17+-0x196e54953+0x117*0x17a518d&&df['add'](_0x10d0bb['get'](_0x7b7ad4));}df['forEach'](_0x391560=>{_0x391560&&_0x541d9f['push'](_0x391560);}),df['clear']();}return _0x541d9f;}['allocateRe'+'nderTarget'](){const _0x4bb46f=new _e(this['device'],{'format':Ne,'width':this['width'],'height':this['height'],'mipmaps':!(-0x13*-0xe1+-0x1177*0x2+0x185*0xc),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':'pick'});this['renderTarg'+'et']=new gt({'colorBuffer':_0x4bb46f,'depth':!(0x3d7+-0x23a5+-0x162*-0x17)});}['releaseRen'+'derTarget'](){this['renderTarg'+'et']&&(this['renderTarg'+'et']['destroyTex'+'tureBuffer'+'s'](),this['renderTarg'+'et']['destroy'](),this['renderTarg'+'et']=null);}['prepare'](_0x56657b,_0x1c3461,_0x30153e){_0x30153e instanceof Ot&&(_0x30153e=[_0x30153e]),(!this['renderTarg'+'et']||this['width']!==this['renderTarg'+'et']['width']||this['height']!==this['renderTarg'+'et']['height'])&&(this['releaseRen'+'derTarget'](),this['allocateRe'+'nderTarget']()),this['mapping']['clear']();const _0x24ddce=this['renderPass'];_0x24ddce['init'](this['renderTarg'+'et']),_0x24ddce['colorOps']['clearValue']=ie['WHITE'],_0x24ddce['colorOps']['clear']=!(0x1*0xd36+-0x755+-0x5e1),_0x24ddce['depthStenc'+'ilOps']['clearDepth']=!(0x12*-0x200+0x1540+-0x3b0*-0x4),_0x24ddce['update'](_0x56657b,_0x1c3461,_0x30153e,this['mapping']),_0x24ddce['render']();}['resize'](_0x355873,_0x171ca3){this['width']=Math['floor'](_0x355873),this['height']=Math['floor'](_0x171ca3);}};new D(),new D();const kk=new wn(),Uk=new wn(),Bk=new wn();kk['end']=new D(),Uk['end']=new D(),Bk['end']=new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D(),new re(),J['prototype']['scale']=J['prototype']['mulScalar'],D['prototype']['scale']=D['prototype']['mulScalar'],re['prototype']['scale']=re['prototype']['mulScalar'],new re();function uU(_0x52f8ef,_0x36aff1){return w['deprecated']('pc.createS'+'phere\x20is\x20d'+'eprecated.'+'\x20Use\x20\x27pc.M'+'esh.fromGe'+'ometry(dev'+'ice,\x20new\x20S'+'phereGeome'+'try(option'+'s);\x27\x20forma'+'t\x20instead.'),Ge['fromGeomet'+'ry'](_0x52f8ef,new Hp(_0x36aff1));}Object['defineProp'+'erties'](gt['prototype'],{'_glFrameBuffer':{'get':function(){return w['deprecated']('pc.RenderT'+'arget#_glF'+'rameBuffer'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RenderT'+'arget.impl'+'#_glFrameB'+'uffer\x20inst'+'ead.'),this['impl']['_glFrameBu'+'ffer'];},'set':function(_0x2aa36a){w['deprecated']('pc.RenderT'+'arget#_glF'+'rameBuffer'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RenderT'+'arget.impl'+'#_glFrameB'+'uffer\x20inst'+'ead.');}}}),Object['defineProp'+'erty'](kt,'defaultIns'+'tancingFor'+'mat',{'get':function(){return w['assert']('pc.VertexF'+'ormat.defa'+'ultInstanc'+'ingFormat\x20'+'is\x20depreca'+'ted,\x20use\x20p'+'c.VertexFo'+'rmat.getDe'+'faultInsta'+'ncingForma'+'t(graphics'+'Device).'),null;}}),Object['defineProp'+'erties'](_e['prototype'],{'rgbm':{'get':function(){return w['deprecated']('pc.Texture'+'#rgbm\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Te'+'xture#type'+'\x20instead.'),this['type']===Ki;},'set':function(_0x5f0127){w['deprecated']('pc.Texture'+'#rgbm\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Te'+'xture#type'+'\x20instead.'),this['type']=_0x5f0127?Ki:Ms;}},'swizzleGGGR':{'get':function(){return w['deprecated']('pc.Texture'+'#swizzleGG'+'GR\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Textu'+'re#type\x20in'+'stead.'),this['type']===zo;},'set':function(_0x9ae8f5){w['deprecated']('pc.Texture'+'#swizzleGG'+'GR\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Textu'+'re#type\x20in'+'stead.'),this['type']=_0x9ae8f5?zo:Ms;}},'_glTexture':{'get':function(){return w['deprecated']('pc.Texture'+'#_glTextur'+'e\x20is\x20no\x20lo'+'nger\x20avail'+'able,\x20use\x20'+'Use\x20pc.Tex'+'ture.impl.'+'_glTexture'+'\x20instead.'),this['impl']['_glTexture'];}}}),Object['defineProp'+'erty']($e['prototype'],'boneLimit',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#bo'+'neLimit\x20is'+'\x20deprecate'+'d\x20and\x20the\x20'+'limit\x20has\x20'+'been\x20remov'+'ed.'),0x1b1b+-0x1*-0x1f2+-0x190d;}}),Object['defineProp'+'erty']($e['prototype'],'webgl2',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#we'+'bgl2\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e#isWebGL2'+'\x20instead.'),this['isWebGL2'];}}),Object['defineProp'+'erty']($e['prototype'],'textureFlo'+'atHighPrec'+'ision',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureFloat'+'HighPrecis'+'ion\x20is\x20dep'+'recated\x20an'+'d\x20always\x20r'+'eturns\x20tru'+'e.'),!(0x16f7+0x149*-0x1c+0x457*0x3);}}),Object['defineProp'+'erty']($e['prototype'],'extBlendMi'+'nmax',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tBlendMinm'+'ax\x20is\x20depr'+'ecated\x20as\x20'+'it\x20is\x20alwa'+'ys\x20true.'),!(-0x3*-0xcc9+0x1123+-0x2*0x1bbf);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'HalfFloat',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureHa'+'lfFloat\x20is'+'\x20deprecate'+'d\x20as\x20it\x20is'+'\x20always\x20tr'+'ue.'),!(-0x7*0x1bc+-0x151*-0x1c+-0x18b8);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'Lod',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureLo'+'d\x20is\x20depre'+'cated\x20as\x20i'+'t\x20is\x20alway'+'s\x20true.'),!(-0x18e+0x17b4+-0xbd*0x1e);}}),Object['defineProp'+'erty']($e['prototype'],'textureHal'+'fFloatFilt'+'erable',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureHalfF'+'loatFilter'+'able\x20is\x20de'+'precated\x20a'+'s\x20it\x20is\x20al'+'ways\x20true.'),!(0x159f+0x74c*0x5+-0x3a1b);}}),Object['defineProp'+'erty']($e['prototype'],'supportsMr'+'t',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsMrt\x20'+'is\x20depreca'+'ted\x20as\x20it\x20'+'is\x20always\x20'+'true.'),!(-0x3*0xc57+0x2c*0x5f+0x14b1*0x1);}}),Object['defineProp'+'erty']($e['prototype'],'supportsVo'+'lumeTextur'+'es',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsVolu'+'meTextures'+'\x20is\x20deprec'+'ated\x20as\x20it'+'\x20is\x20always'+'\x20true.'),!(0x1d77+-0xe31*0x1+-0xf46);}}),Object['defineProp'+'erty']($e['prototype'],'supportsIn'+'stancing',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsInst'+'ancing\x20is\x20'+'deprecated'+'\x20as\x20it\x20is\x20'+'always\x20tru'+'e.'),!(-0x9*-0x34f+0x10*-0x24+-0x30f*0x9);}}),Object['defineProp'+'erty']($e['prototype'],'textureHal'+'fFloatUpda'+'table',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureHalfF'+'loatUpdata'+'ble\x20is\x20dep'+'recated\x20as'+'\x20it\x20is\x20alw'+'ays\x20true.'),!(0x5dc+0x1*-0x235d+0x1d81);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'Float',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureFl'+'oat\x20is\x20dep'+'recated\x20as'+'\x20it\x20is\x20alw'+'ays\x20true'),!(0xac9+0x198d+-0x2*0x122b);}}),Object['defineProp'+'erty']($e['prototype'],'extStandar'+'dDerivativ'+'es',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tStandardD'+'erivatives'+'\x20is\x20deprec'+'ated\x20as\x20it'+'\x20is\x20always'+'\x20true.'),!(0xd*-0x12b+0xbc9+0x366*0x1);}}),pt['DEFAULT']=Object['freeze'](new pt());const ut=new pt(),qi=new Yt();$e['prototype']['setBlendFu'+'nction']=function(_0x46c03f,_0x405c58){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendFunc'+'tion\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e.setBlend'+'State\x20inst'+'ead.');const _0x4c9f1d=this['blendState'];ut['copy'](_0x4c9f1d),ut['setColorBl'+'end'](_0x4c9f1d['colorOp'],_0x46c03f,_0x405c58),ut['setAlphaBl'+'end'](_0x4c9f1d['alphaOp'],_0x46c03f,_0x405c58),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendFu'+'nctionSepa'+'rate']=function(_0x367a16,_0x4c7919,_0x30e553,_0x4eb84c){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendFunc'+'tionSepara'+'te\x20is\x20depr'+'ecated,\x20us'+'e\x20pc.Graph'+'icsDevice.'+'setBlendSt'+'ate\x20instea'+'d.');const _0x43f587=this['blendState'];ut['copy'](_0x43f587),ut['setColorBl'+'end'](_0x43f587['colorOp'],_0x367a16,_0x4c7919),ut['setAlphaBl'+'end'](_0x43f587['alphaOp'],_0x30e553,_0x4eb84c),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendEq'+'uation']=function(_0x2182ab){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendEqua'+'tion\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e.setBlend'+'State\x20inst'+'ead.');const _0x5cb147=this['blendState'];ut['copy'](_0x5cb147),ut['setColorBl'+'end'](_0x2182ab,_0x5cb147['colorSrcFa'+'ctor'],_0x5cb147['colorDstFa'+'ctor']),ut['setAlphaBl'+'end'](_0x2182ab,_0x5cb147['alphaSrcFa'+'ctor'],_0x5cb147['alphaDstFa'+'ctor']),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendEq'+'uationSepa'+'rate']=function(_0x4e273d,_0x33f9b2){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendEqua'+'tionSepara'+'te\x20is\x20depr'+'ecated,\x20us'+'e\x20pc.Graph'+'icsDevice.'+'setBlendSt'+'ate\x20instea'+'d.');const _0x3a924d=this['blendState'];ut['copy'](_0x3a924d),ut['setColorBl'+'end'](_0x4e273d,_0x3a924d['colorSrcFa'+'ctor'],_0x3a924d['colorDstFa'+'ctor']),ut['setAlphaBl'+'end'](_0x33f9b2,_0x3a924d['alphaSrcFa'+'ctor'],_0x3a924d['alphaDstFa'+'ctor']),this['setBlendSt'+'ate'](ut);},$e['prototype']['setColorWr'+'ite']=function(_0x121a2e,_0x458dfa,_0x39c267,_0x1f1e7f){w['deprecated']('pc.Graphic'+'sDevice#se'+'tColorWrit'+'e\x20is\x20depre'+'cated,\x20use'+'\x20pc.Graphi'+'csDevice.s'+'etBlendSta'+'te\x20instead'+'.');const _0x43106f=this['blendState'];ut['copy'](_0x43106f),ut['setColorWr'+'ite'](_0x121a2e,_0x458dfa,_0x39c267,_0x1f1e7f),this['setBlendSt'+'ate'](ut);},$e['prototype']['getBlendin'+'g']=function(){return this['blendState']['blend'];},$e['prototype']['setBlendin'+'g']=function(_0x2d85df){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlending\x20'+'is\x20depreca'+'ted,\x20use\x20p'+'c.Graphics'+'Device.set'+'BlendState'+'\x20instead.'),ut['copy'](this['blendState']),ut['blend']=_0x2d85df,this['setBlendSt'+'ate'](ut);},$e['prototype']['setDepthWr'+'ite']=function(_0x5a2b47){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthWrit'+'e\x20is\x20depre'+'cated,\x20use'+'\x20pc.Graphi'+'csDevice.s'+'etDepthSta'+'te\x20instead'+'.'),qi['copy'](this['depthState']),qi['write']=_0x5a2b47,this['setDepthSt'+'ate'](qi);},$e['prototype']['setDepthFu'+'nc']=function(_0x2b0815){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthFunc'+'\x20is\x20deprec'+'ated,\x20use\x20'+'pc.Graphic'+'sDevice.se'+'tDepthStat'+'e\x20instead.'),qi['copy'](this['depthState']),qi['func']=_0x2b0815,this['setDepthSt'+'ate'](qi);},$e['prototype']['setDepthTe'+'st']=function(_0xb1e345){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthTest'+'\x20is\x20deprec'+'ated,\x20use\x20'+'pc.Graphic'+'sDevice.se'+'tDepthStat'+'e\x20instead.'),qi['copy'](this['depthState']),qi['test']=_0xb1e345,this['setDepthSt'+'ate'](qi);},$e['prototype']['getCullMod'+'e']=function(){return this['cullMode'];},new Proxy({},{'get'(_0x28a10,_0x15cb21){return w['deprecated']('Using\x20pc.s'+'haderChunk'+'s\x20to\x20acces'+'s\x20global\x20s'+'hader\x20chun'+'ks\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Shade'+'rChunks.ge'+'t\x20instead,'+'\x20for\x20examp'+'le:\x20pc.Sha'+'derChunks.'+'get(this.a'+'pp.graphic'+'sDevice,\x20p'+'c.SHADERLA'+'NGUAGE_GLS'+'L).get(\x27'+_0x15cb21+'\x27);'),Ce['get'](Ys()['graphicsDe'+'vice'],Fe)['get'](_0x15cb21);},'set'(_0x34e9f1,_0xb24e4e,_0xe73939){return w['deprecated']('Using\x20pc.s'+'haderChunk'+'s\x20to\x20overr'+'ide\x20global'+'\x20shader\x20ch'+'unks\x20is\x20de'+'precated.\x20'+'Use\x20pc.Sha'+'derChunks.'+'get\x20instea'+'d,\x20for\x20exa'+'mple:\x20pc.S'+'haderChunk'+'s.get(this'+'.app.graph'+'icsDevice,'+'\x20pc.SHADER'+'LANGUAGE_G'+'LSL).set(\x27'+_0xb24e4e+'\x27);'),Ce['get'](Ys()['graphicsDe'+'vice'],Fe)['set'](_0xb24e4e,_0xe73939),!(-0x18e0+-0x12c6+-0x4a*-0x97);}}),Object['defineProp'+'erty'](Et['prototype'],'defaultMat'+'erial',{'get':function(){return w['deprecated']('pc.Scene#d'+'efaultMate'+'rial\x20is\x20de'+'precated.'),$n(Ys()['graphicsDe'+'vice']);}}),Object['defineProp'+'erty'](Et['prototype'],'fogColor',{'set':function(_0x3f06b3){w['deprecated']('Scene#fogC'+'olor\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.color\x20'+'instead.'),this['fog']['color']=_0x3f06b3;},'get':function(){return w['deprecated']('Scene#fogC'+'olor\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.color\x20'+'instead.'),this['fog']['color'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogEnd',{'set':function(_0x273a34){w['deprecated']('Scene#fogE'+'nd\x20is\x20depr'+'ecated.\x20Us'+'e\x20Scene#fo'+'g.end\x20inst'+'ead.'),this['fog']['end']=_0x273a34;},'get':function(){return w['deprecated']('Scene#fogE'+'nd\x20is\x20depr'+'ecated.\x20Us'+'e\x20Scene#fo'+'g.end\x20inst'+'ead.'),this['fog']['end'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogStart',{'set':function(_0x39663c){w['deprecated']('Scene#fogS'+'tart\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.start\x20'+'instead.'),this['fog']['start']=_0x39663c;},'get':function(){return w['deprecated']('Scene#fogS'+'tart\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.start\x20'+'instead.'),this['fog']['start'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogDensity',{'set':function(_0x524d0c){w['deprecated']('Scene#fogD'+'ensity\x20is\x20'+'deprecated'+'.\x20Use\x20Scen'+'e#fog.dens'+'ity\x20instea'+'d.'),this['fog']['density']=_0x524d0c;},'get':function(){return w['deprecated']('Scene#fogD'+'ensity\x20is\x20'+'deprecated'+'.\x20Use\x20Scen'+'e#fog.dens'+'ity\x20instea'+'d.'),this['fog']['density'];}}),Object['defineProp'+'erty'](Et['prototype'],'toneMappin'+'g',{'set':function(_0x329ddf){w['removed']('Scene#tone'+'Mapping\x20is'+'\x20removed.\x20'+'Use\x20Camera'+'Component#'+'toneMappin'+'g\x20instead.');},'get':function(){w['removed']('Scene#tone'+'Mapping\x20is'+'\x20removed.\x20'+'Use\x20Camera'+'Component#'+'toneMappin'+'g\x20instead.');}}),Object['defineProp'+'erty'](Et['prototype'],'gammaCorre'+'ction',{'set':function(_0x187a8a){w['removed']('Scene#gamm'+'aCorrectio'+'n\x20is\x20remov'+'ed.\x20Use\x20Ca'+'meraCompon'+'ent#gammaC'+'orrection\x20'+'instead.');},'get':function(){w['removed']('Scene#gamm'+'aCorrectio'+'n\x20is\x20remov'+'ed.\x20Use\x20Ca'+'meraCompon'+'ent#gammaC'+'orrection\x20'+'instead.');}}),Object['defineProp'+'erty'](Et['prototype'],'rendering',{'set':function(_0x53f589){w['removed']('Scene#rend'+'ering\x20is\x20r'+'emoved.\x20Us'+'e\x20Scene#fo'+'g\x20or\x20Camer'+'aComponent'+'#gammaCorr'+'ection\x20or\x20'+'CameraComp'+'onent#tone'+'Mapping\x20in'+'stead.');},'get':function(){w['removed']('Scene#rend'+'ering\x20is\x20r'+'emoved.\x20Us'+'e\x20Scene#fo'+'g\x20or\x20Camer'+'aComponent'+'#gammaCorr'+'ection\x20or\x20'+'CameraComp'+'onent#tone'+'Mapping\x20in'+'stead.');}}),Object['defineProp'+'erty'](Bf['prototype'],'_meshInsta'+'nces',{'get':function(){return w['deprecated']('pc.LayerCo'+'mposition#'+'_meshInsta'+'nces\x20is\x20de'+'precated.'),null;}}),Object['defineProp'+'erty'](Et['prototype'],'drawCalls',{'get':function(){return w['deprecated']('pc.Scene#d'+'rawCalls\x20i'+'s\x20deprecat'+'ed\x20and\x20no\x20'+'longer\x20pro'+'vides\x20mesh'+'\x20instances'+'.'),null;}}),['128','64','32','16','8','4']['forEach']((_0x15e4a8,_0x25a939)=>{Object['defineProp'+'erty'](Et['prototype'],'skyboxPref'+'iltered'+_0x15e4a8,{'get':function(){return w['deprecated']('pc.Scene#s'+'kyboxPrefi'+'ltered'+_0x15e4a8+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Scene#p'+'refiltered'+'Cubemaps\x20i'+'nstead.')),this['_prefilter'+'edCubemaps'][_0x25a939];},'set':function(_0x4489c7){w['deprecated']('pc.Scene#s'+'kyboxPrefi'+'ltered'+_0x15e4a8+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Scene#p'+'refiltered'+'Cubemaps\x20i'+'nstead.')),this['_prefilter'+'edCubemaps'][_0x25a939]=_0x4489c7,this['updateShad'+'ers']=!(-0x2bd*0x2+-0x95+0x60f);}});}),Object['defineProp'+'erty'](Et['prototype'],'models',{'get':function(){return this['_models']||(this['_models']=[]),this['_models'];}});function Bt(_0x25d2b1,_0x3b6c80,_0x51ee75=''){Object['defineProp'+'erty'](_0x25d2b1['prototype'],_0x3b6c80,{'set':function(_0x1bed7e){w['errorOnce'](_0x25d2b1['name']+'#'+_0x3b6c80+('\x20has\x20been\x20'+'removed.\x20')+_0x51ee75);},'get':function(){w['errorOnce'](_0x25d2b1['name']+'#'+_0x3b6c80+('\x20has\x20been\x20'+'removed.\x20')+_0x51ee75);}});}Bt(Ot,'renderTarg'+'et'),Bt(Ot,'onPreCull'),Bt(Ot,'onPreRende'+'r'),Bt(Ot,'onPreRende'+'rOpaque'),Bt(Ot,'onPreRende'+'rTranspare'+'nt'),Bt(Ot,'onPostCull'),Bt(Ot,'onPostRend'+'er'),Bt(Ot,'onPostRend'+'erOpaque'),Bt(Ot,'onPostRend'+'erTranspar'+'ent'),Bt(Ot,'onDrawCall'),Bt(Ot,'layerRefer'+'ence'),Bt(Cr,'onPreCull','Use\x20Scene#'+'EVENT_PREC'+'ULL\x20event\x20'+'instead.'),Bt(Cr,'onPostCull','Use\x20Scene#'+'EVENT_POST'+'CULL\x20event'+'\x20instead.'),Bt(Cr,'onPreRende'+'r','Use\x20Scene#'+'EVENT_PRER'+'ENDER\x20even'+'t\x20instead.'),Bt(Cr,'onPostRend'+'er','Use\x20Scene#'+'EVENT_POST'+'RENDER\x20eve'+'nt\x20instead'+'.'),Bt(Cr,'onPreRende'+'rLayer','Use\x20Scene#'+'EVENT_PRER'+'ENDER_LAYE'+'R\x20event\x20in'+'stead.'),Bt(Cr,'onPostRend'+'erLayer','Use\x20Scene#'+'EVENT_POST'+'RENDER_LAY'+'ER\x20event\x20i'+'nstead.'),Jo['prototype']['renderComp'+'osition']=function(_0x96935){w['deprecated']('pc.Forward'+'Renderer#r'+'enderCompo'+'sition\x20is\x20'+'deprecated'+'.\x20Use\x20pc.A'+'ppBase.ren'+'derComposi'+'tion\x20inste'+'ad.'),Ys()['renderComp'+'osition'](_0x96935);},He['prototype']['syncAabb']=function(){w['deprecated']('pc.MeshIns'+'tance#sync'+'Aabb\x20is\x20de'+'precated.');},Gp['prototype']['getTarget']=function(_0x36861e){return w['deprecated']('pc.Morph#g'+'etTarget\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.Morph#tar'+'gets\x20inste'+'ad.'),this['targets'][_0x36861e];},Ie['prototype']['getChildre'+'n']=function(){return w['deprecated']('pc.GraphNo'+'de#getChil'+'dren\x20is\x20de'+'precated.\x20'+'Use\x20pc.Gra'+'phNode#chi'+'ldren\x20inst'+'ead.'),this['children'];},Ie['prototype']['getName']=function(){return w['deprecated']('pc.GraphNo'+'de#getName'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#name\x20in'+'stead.'),this['name'];},Ie['prototype']['getPath']=function(){return w['deprecated']('pc.GraphNo'+'de#getPath'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#path\x20in'+'stead.'),this['path'];},Ie['prototype']['getRoot']=function(){return w['deprecated']('pc.GraphNo'+'de#getRoot'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#root\x20in'+'stead.'),this['root'];},Ie['prototype']['getParent']=function(){return w['deprecated']('pc.GraphNo'+'de#getPare'+'nt\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Graph'+'Node#paren'+'t\x20instead.'),this['parent'];},Ie['prototype']['setName']=function(_0x2b3b09){w['deprecated']('pc.GraphNo'+'de#setName'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#name\x20in'+'stead.'),this['name']=_0x2b3b09;},Object['defineProp'+'erty'](er['prototype'],'shader',{'set':function(_0x370e72){w['deprecated']('pc.Materia'+'l#shader\x20i'+'s\x20deprecat'+'ed,\x20use\x20pc'+'.ShaderMat'+'erial\x20inst'+'ead.');},'get':function(){return w['deprecated']('pc.Materia'+'l#shader\x20i'+'s\x20deprecat'+'ed,\x20use\x20pc'+'.ShaderMat'+'erial\x20inst'+'ead.'),null;}}),Object['defineProp'+'erty'](er['prototype'],'blend',{'set':function(_0x33fcba){w['deprecated']('pc.Materia'+'l#blend\x20is'+'\x20deprecate'+'d,\x20use\x20pc.'+'Material.b'+'lendState.'),this['blendState']['blend']=_0x33fcba;},'get':function(){return this['blendState']['blend'];}}),Object['defineProp'+'erty'](Ut['prototype'],'shininess',{'get':function(){return this['gloss']*(0x1dd4+0x12b*-0x1+-0x1c45);},'set':function(_0x5ec10e){this['gloss']=_0x5ec10e*(-0x188+-0xb97*-0x1+-0xa0f+0.01);}}),Object['defineProp'+'erty'](Ut['prototype'],'useGammaTo'+'nemap',{'get':function(){return this['useTonemap'];},'set':function(_0xb0f376){this['useTonemap']=_0xb0f376;}}),Object['defineProp'+'erty'](Ut['prototype'],'anisotropy',{'get':function(){w['deprecated']('pc.Standar'+'dMaterial#'+'anisotropy'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#'+'anisotropy'+'Intensity\x20'+'and\x20pc.Sta'+'ndardMater'+'ial#anisot'+'ropyRotati'+'on\x20instead'+'.');const _0x149817=Math['sign'](Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']*(0x25*-0x91+-0x37*0x56+0x2771)));return this['anisotropy'+'Intensity']*_0x149817;},'set':function(_0x2817dd){w['deprecated']('pc.Standar'+'dMaterial#'+'anisotropy'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#'+'anisotropy'+'Intensity\x20'+'and\x20pc.Sta'+'ndardMater'+'ial#anisot'+'ropyRotati'+'on\x20instead'+'.'),this['anisotropy'+'Intensity']=Math['abs'](_0x2817dd),_0x2817dd>=-0x21f5+-0x7*0x1f9+-0x3fb*-0xc?this['anisotropy'+'Rotation']=-0xe0c+-0x1e1c+0x2c28:this['anisotropy'+'Rotation']=0x1d72*0x1+0x971*0x1+-0x1*0x2689;}});function Qs(_0x3a4c5f,_0xbbaafb){Object['defineProp'+'erty'](Ut['prototype'],_0xbbaafb,{'get':function(){return w['deprecated']('pc.Standar'+'dMaterial#'+_0xbbaafb+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#')+_0x3a4c5f+'\x20instead.'),this[_0x3a4c5f];},'set':function(_0x51be2f){w['deprecated']('pc.Standar'+'dMaterial#'+_0xbbaafb+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#')+_0x3a4c5f+'\x20instead.'),this[_0x3a4c5f]=_0x51be2f;}});}function cd(_0x1f78fd){Object['defineProp'+'erty'](Ut['prototype'],_0x1f78fd,{'get':function(){return w['deprecated']('pc.Standar'+'dMaterial#'+_0x1f78fd+('\x20is\x20deprec'+'ated,\x20and\x20'+'the\x20behavi'+'our\x20is\x20as\x20'+'if\x20')+_0x1f78fd+('\x20was\x20alway'+'s\x20true')),!(-0x1a*0x13f+-0x142d+0x3493);},'set':function(_0x12f0e7){w['deprecated']('pc.Standar'+'dMaterial#'+_0x1f78fd+('\x20is\x20deprec'+'ated,\x20and\x20'+'the\x20behavi'+'our\x20is\x20as\x20'+'if\x20')+_0x1f78fd+('\x20was\x20alway'+'s\x20true'));}});}cd('sheenTint'),cd('diffuseTin'+'t'),cd('emissiveTi'+'nt'),cd('ambientTin'+'t'),Qs('specularTi'+'nt','specularMa'+'pTint'),Qs('aoVertexCo'+'lor','aoMapVerte'+'xColor'),Qs('diffuseVer'+'texColor','diffuseMap'+'VertexColo'+'r'),Qs('specularVe'+'rtexColor','specularMa'+'pVertexCol'+'or'),Qs('emissiveVe'+'rtexColor','emissiveMa'+'pVertexCol'+'or'),Qs('metalnessV'+'ertexColor','metalnessM'+'apVertexCo'+'lor'),Qs('glossVerte'+'xColor','glossMapVe'+'rtexColor'),Qs('opacityVer'+'texColor','opacityMap'+'VertexColo'+'r'),Qs('lightVerte'+'xColor','lightMapVe'+'rtexColor'),Qs('sheenGloss','sheenGloss'+'iess'),Qs('clearCoatG'+'loss','clearCostG'+'lossiness');function Jv(_0x304179,_0x2c7e0e){_0x304179!=='pass'&&Object['defineProp'+'erty'](Qo['prototype'],_0x304179,{'get':function(){return w['deprecated']('Getting\x20pc'+'.Options#'+_0x304179+('\x20has\x20been\x20'+'deprecated'+'\x20as\x20the\x20pr'+'operty\x20has'+'\x20been\x20move'+'d\x20to\x20pc.Op'+'tions.LitS'+'haderOptio'+'ns#')+(_0x2c7e0e||_0x304179)+'.'),this['litOptions'][_0x2c7e0e||_0x304179];},'set':function(_0x4215f3){w['deprecated']('Setting\x20pc'+'.Options#'+_0x304179+('\x20has\x20been\x20'+'deprecated'+'\x20as\x20the\x20pr'+'operty\x20has'+'\x20been\x20move'+'d\x20to\x20pc.Op'+'tions.LitS'+'haderOptio'+'ns#')+(_0x2c7e0e||_0x304179)+'.'),this['litOptions'][_0x2c7e0e||_0x304179]=_0x4215f3;}});}Jv('refraction','useRefract'+'ion');const zk=new Vy(),rS=Object['getOwnProp'+'ertyNames'](zk);for(const l in rS)Jv(rS[l]);ln['prototype']['getAssetBy'+'Id']=function(_0x24e708){return w['deprecated']('pc.AssetRe'+'gistry#get'+'AssetById\x20'+'is\x20depreca'+'ted.\x20Use\x20p'+'c.AssetReg'+'istry#get\x20'+'instead.'),this['get'](_0x24e708);},Object['defineProp'+'erty'](Qt['prototype'],'ray',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#ray'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.XrInput'+'Source#get'+'Origin\x20and'+'\x20pc.XrInpu'+'tSource#ge'+'tDirection'+'\x20instead.'),this['_rayLocal'];}}),Object['defineProp'+'erty'](Qt['prototype'],'position',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#pos'+'ition\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Xr'+'InputSourc'+'e#getLocal'+'Position\x20i'+'nstead.'),this['_localPosi'+'tion'];}}),Object['defineProp'+'erty'](Qt['prototype'],'rotation',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#rot'+'ation\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Xr'+'InputSourc'+'e#getLocal'+'Rotation\x20i'+'nstead.'),this['_localRota'+'tion'];}}),Object['defineProp'+'erty'](Zr['prototype'],'wheel',{'get':function(){return this['wheelDelta']*-(-0x1*-0x24f0+0xaac+-0x2f9a);}}),Ks['prototype']['isFullscre'+'en']=function(){return w['deprecated']('pc.AppBase'+'#isFullscr'+'een\x20is\x20dep'+'recated.\x20U'+'se\x20the\x20Ful'+'lscreen\x20AP'+'I\x20directly'+'.'),!!document['fullscreen'+'Element'];},Ks['prototype']['enableFull'+'screen']=function(_0x6a99b2,_0xbcae73,_0x169228){w['deprecated']('pc.AppBase'+'#enableFul'+'lscreen\x20is'+'\x20deprecate'+'d.\x20Use\x20the'+'\x20Fullscree'+'n\x20API\x20dire'+'ctly.'),_0x6a99b2=_0x6a99b2||this['graphicsDe'+'vice']['canvas'];const _0x1b7d66=function(){_0xbcae73(),document['removeEven'+'tListener']('fullscreen'+'change',_0x1b7d66);},_0x28bed0=function(){_0x169228(),document['removeEven'+'tListener']('fullscreen'+'error',_0x28bed0);};_0xbcae73&&document['addEventLi'+'stener']('fullscreen'+'change',_0x1b7d66,!(0x1*-0x265f+-0xbad+0x320d*0x1)),_0x169228&&document['addEventLi'+'stener']('fullscreen'+'error',_0x28bed0,!(-0x1d*-0x79+0x18c3*-0x1+0xb0f)),_0x6a99b2['requestFul'+'lscreen']?_0x6a99b2['requestFul'+'lscreen'](Element['ALLOW_KEYB'+'OARD_INPUT']):_0x169228();},Ks['prototype']['disableFul'+'lscreen']=function(_0x1928db){w['deprecated']('pc.AppBase'+'#disableFu'+'llscreen\x20i'+'s\x20deprecat'+'ed.\x20Use\x20th'+'e\x20Fullscre'+'en\x20API\x20dir'+'ectly.');const _0xef655b=function(){_0x1928db(),document['removeEven'+'tListener']('fullscreen'+'change',_0xef655b);};_0x1928db&&document['addEventLi'+'stener']('fullscreen'+'change',_0xef655b,!(-0x1*0x91a+-0x1f08+0x2823)),document['exitFullsc'+'reen']();},Ks['prototype']['getSceneUr'+'l']=function(_0x3510b0){w['deprecated']('pc.AppBase'+'#getSceneU'+'rl\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.AppBa'+'se#scenes\x20'+'and\x20pc.Sce'+'neRegistry'+'#find\x20inst'+'ead.');const _0x297afc=this['scenes']['find'](_0x3510b0);return _0x297afc?_0x297afc['url']:null;},Ks['prototype']['loadScene']=function(_0x6688a8,_0xdc553){w['deprecated']('pc.AppBase'+'#loadScene'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.AppBase'+'#scenes\x20an'+'d\x20pc.Scene'+'Registry#l'+'oadScene\x20i'+'nstead.'),this['scenes']['loadScene'](_0x6688a8,_0xdc553);},Ks['prototype']['loadSceneH'+'ierarchy']=function(_0x50a776,_0x3c9e70){w['deprecated']('pc.AppBase'+'#loadScene'+'Hierarchy\x20'+'is\x20depreca'+'ted.\x20Use\x20p'+'c.AppBase#'+'scenes\x20and'+'\x20pc.SceneR'+'egistry#lo'+'adSceneHie'+'rarchy\x20ins'+'tead.'),this['scenes']['loadSceneH'+'ierarchy'](_0x50a776,_0x3c9e70);},Ks['prototype']['loadSceneS'+'ettings']=function(_0x8c5b59,_0x317913){w['deprecated']('pc.AppBase'+'#loadScene'+'Settings\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.AppBase#s'+'cenes\x20and\x20'+'pc.SceneRe'+'gistry#loa'+'dSceneSett'+'ings\x20inste'+'ad.'),this['scenes']['loadSceneS'+'ettings'](_0x8c5b59,_0x317913);},Yp['prototype']['setVisible']=function(_0x54eb39){w['deprecated']('pc.ModelCo'+'mponent#se'+'tVisible\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.ModelComp'+'onent#enab'+'led\x20instea'+'d.'),this['enabled']=_0x54eb39;},Object['defineProp'+'erty'](bs['prototype'],'bodyType',{'get':function(){return w['deprecated']('pc.RigidBo'+'dyComponen'+'t#bodyType'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RigidBo'+'dyComponen'+'t#type\x20ins'+'tead.'),this['type'];},'set':function(_0x37837d){w['deprecated']('pc.RigidBo'+'dyComponen'+'t#bodyType'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RigidBo'+'dyComponen'+'t#type\x20ins'+'tead.'),this['type']=_0x37837d;}}),bs['prototype']['syncBodyTo'+'Entity']=function(){w['deprecated']('pc.RigidBo'+'dyComponen'+'t#syncBody'+'ToEntity\x20i'+'s\x20not\x20publ'+'ic\x20API\x20and'+'\x20should\x20no'+'t\x20be\x20used.'),this['_updateDyn'+'amic']();},Kp['prototype']['setGravity']=function(){w['deprecated']('pc.RigidBo'+'dyComponen'+'tSystem#se'+'tGravity\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.RigidBody'+'ComponentS'+'ystem#grav'+'ity\x20instea'+'d.'),arguments['length']===0x1d98+-0x25*-0x13+0x1*-0x2056?this['gravity']['copy'](arguments[0xd3d*0x1+0x16a*0xd+0x1*-0x1f9f]):this['gravity']['set'](arguments[-0x3fd*-0x3+-0x2124+0x152d],arguments[0x14ff*-0x1+-0x11c8+0x4d9*0x8],arguments[-0xb5e+0x137c*-0x1+0x7b7*0x4]);};class Vk{constructor(_0x1c1856){this['_frameInde'+'x']=0x1*-0xf6b+0x1ab*0xe+-0x7ef,this['_frameTimi'+'ngs']=[],this['_timings']=[],this['_prevTimin'+'gs']=[],this['unitsName']='ms',this['decimalPla'+'ces']=-0x9bc*0x4+-0x2033*0x1+0x4724,this['enabled']=!(-0xf72+-0x1d97+-0x3d*-0xbd),_0x1c1856['on']('frameupdat'+'e',this['begin']['bind'](this,'update')),_0x1c1856['on']('framerende'+'r',this['mark']['bind'](this,'render')),_0x1c1856['on']('frameend',this['mark']['bind'](this,'other'));}['begin'](_0x559dc4){if(!this['enabled'])return;this['_frameInde'+'x']<this['_frameTimi'+'ngs']['length']&&this['_frameTimi'+'ngs']['splice'](this['_frameInde'+'x']);const _0x893a84=this['_prevTimin'+'gs'];this['_prevTimin'+'gs']=this['_timings'],this['_timings']=this['_frameTimi'+'ngs'],this['_frameTimi'+'ngs']=_0x893a84,this['_frameInde'+'x']=-0x2*0x727+-0x115*0x1f+0x2fd9,this['mark'](_0x559dc4);}['mark'](_0xc94673){if(!this['enabled'])return;const _0x64046=de();if(this['_frameInde'+'x']>-0xa*-0x272+0x2f6*-0x1+-0x157e){const _0x580066=this['_frameTimi'+'ngs'][this['_frameInde'+'x']-(-0x473+0xf5c+0xae8*-0x1)];_0x580066[0x6*-0x56f+0x17d2+-0xd*-0xad]=_0x64046-_0x580066[0xe34+0xd6c+-0x1b9f];}else{if(this['_timings']['length']>0x4*0x2b+-0x3a*0x4f+-0x5a*-0x31){const _0x45789b=this['_timings'][this['_timings']['length']-(0x7*0x559+0x15*0x6c+-0x2e4a)];_0x45789b[0x2*-0x40e+-0xe59+0x1676]=_0x64046-_0x45789b[0x3*-0x4b2+-0x2f*0x6f+0x2278];}}if(this['_frameInde'+'x']>=this['_frameTimi'+'ngs']['length'])this['_frameTimi'+'ngs']['push']([_0xc94673,_0x64046]);else{const _0x42851f=this['_frameTimi'+'ngs'][this['_frameInde'+'x']];_0x42851f[0x1*0x2379+-0x1*0x111e+-0x125b]=_0xc94673,_0x42851f[-0x37a+-0x1be4+-0xa75*-0x3]=_0x64046;}this['_frameInde'+'x']++;}get['timings'](){return this['_timings']['slice'](0x1b74*0x1+0x64e+0x1d*-0x12a,-(-0x34*0x1c+-0x242f+0x10c*0x28))['map'](_0x1e5553=>_0x1e5553[-0x6e*-0x7+0x1b68+-0x1e69]);}}class Gk{constructor(_0x360b3c){this['device']=_0x360b3c,_0x360b3c['gpuProfile'+'r']['enabled']=!(-0x1*0x145b+0xdad+0x6ae),this['enabled']=!(0x1d55+-0x244b+0x6f6),this['unitsName']='ms',this['decimalPla'+'ces']=-0x5f8*0x2+-0x92b+0x151c*0x1,this['_timings']=[];}get['timings'](){return this['_timings'][-0x1e10+-0x15*-0x148+0x328*0x1]=this['device']['gpuProfile'+'r']['_frameTime'],this['_timings'];}}class Hk{constructor(_0x542ef6,_0x2001f1,_0x3d706e,_0x27ad17,_0x5552e9){this['app']=_0x542ef6,this['values']=[],this['statNames']=_0x2001f1,this['statNames']['length']>-0xc14*-0x2+-0x1*0x1f2b+0x706&&(this['statNames']['length']=0xe8*-0x1f+-0x19da+0x35f5),this['unitsName']=_0x27ad17,this['decimalPla'+'ces']=_0x3d706e,this['multiplier']=_0x5552e9||-0x259a+0x1de9+-0x5*-0x18a;const _0x21b4e8=(_0x2a528c,_0x499c44)=>_0x2a528c['split']('.')['reduce']((_0x3cdb14,_0x4178e7)=>_0x3cdb14?_0x3cdb14[_0x4178e7]:null,_0x499c44||this);_0x542ef6['on']('frameupdat'+'e',_0x550a89=>{for(let _0xd71fd0=0x2*-0xabe+-0x1073*-0x1+0x509;_0xd71fd0<this['statNames']['length'];_0xd71fd0++)this['values'][_0xd71fd0]=_0x21b4e8(this['statNames'][_0xd71fd0],this['app']['stats'])*this['multiplier'];});}get['timings'](){return this['values'];}}class ff{constructor(_0x38a4b0,_0x227382,_0x104676,_0x16c9ba,_0x55bdf9){this['app']=_0x227382,this['name']=_0x38a4b0,this['device']=_0x227382['graphicsDe'+'vice'],this['timer']=_0x55bdf9,this['watermark']=_0x104676,this['enabled']=!(0x208c+0x23c2+-0x444d),this['textRefres'+'hRate']=_0x16c9ba,this['avgTotal']=0xc15*-0x3+-0xe5*-0xa+0x1b4d,this['avgTimer']=0x250c+-0x2*-0x1272+-0x49f0,this['avgCount']=-0x6*0x3c5+-0x4*-0x685+-0x376,this['timingText']='',this['texture']=null,this['yOffset']=0xb*0x5+0x5*0x70e+-0x4f*0x73,this['cursor']=0xfb+-0x163+0x4*0x1a,this['sample']=new Uint8ClampedArray(-0x704+-0x948+0x1050),this['sample']['set']([-0x13fb+0x14b9+-0xbe,0x20af+0x14d1+-0x3580,0x17*0xec+0x25f9+-0x3b2d,-0x9aa*0x4+0x294*0xc+-0x8b7*-0x1]),this['counter']=0x123*0x17+0x84*0x36+-0x35fd,this['app']['on']('frameupdat'+'e',this['update'],this);}['destroy'](){this['app']['off']('frameupdat'+'e',this['update'],this);}['loseContex'+'t'](){this['timer']&&typeof this['timer']['loseContex'+'t']=='function'&&this['timer']['loseContex'+'t']();}['update'](_0x5a2d08){const _0x23ffbd=this['timer']['timings'],_0x30caf4=_0x23ffbd['reduce']((_0x44d4bd,_0x24e02f)=>_0x44d4bd+_0x24e02f,0x2256+0x14f*0x13+0xbd7*-0x5);if(this['avgTotal']+=_0x30caf4,this['avgTimer']+=_0x5a2d08,this['avgCount']++,this['avgTimer']>this['textRefres'+'hRate']&&(this['timingText']=(this['avgTotal']/this['avgCount'])['toFixed'](this['timer']['decimalPla'+'ces']),this['avgTimer']=0xa44+0x270+0x21e*-0x6,this['avgTotal']=-0x1058*-0x1+-0xe*0xb2+-0x69c,this['avgCount']=0x289+0x1317+0x1*-0x15a0),this['enabled']){let _0x196f78=-0x21ff+0x2300+0x101*-0x1;const _0x566eda=(-0x1*-0xd2d+0xd*0x1aa+0x3de*-0x9+0.5)*this['watermark'];for(let _0xa55b7a=0xaed*0x1+0x2332+-0x2e1f;_0xa55b7a<_0x23ffbd['length'];++_0xa55b7a)_0x196f78+=Math['floor'](_0x23ffbd[_0xa55b7a]/_0x566eda*(0xcb9+-0xaf+-0xb*0x101)),this['sample'][_0xa55b7a]=_0x196f78;this['sample'][-0xb08*-0x1+-0x1c89+0x461*0x4]=this['watermark']/_0x566eda*(-0x228e+-0x7ab*-0x1+0x1be2),this['texture']['lock']()['set'](this['sample'],(this['cursor']+this['yOffset']*this['texture']['width'])*(-0xaa*0x4+-0x17*0x4b+0x969)),this['texture']['unlock'](),this['cursor']++,this['cursor']===this['texture']['width']&&(this['cursor']=0x3*-0x781+-0x1d7d*0x1+0x1a0*0x20);}}['render'](_0xd8b89c,_0x523494,_0x5d90c7,_0x87e010,_0x5d8b5e){_0xd8b89c['quad'](_0x523494+_0x87e010,_0x5d90c7,-_0x87e010,_0x5d8b5e,this['enabled']?this['cursor']:-0x35*0x29+-0x1*0x235a+0x3*0xe9d,this['enabled']?-0x1dc2+-0x1*-0x74d+0x1675+0.5+this['yOffset']:this['texture']['height']-(-0x9de+0x15da+-0xbfb),-_0x87e010,0x2*0xcb6+0x2679+-0x3fe5,this['texture'],0x7af+0x1*-0x22f5+0x1b46);}}class Wk{constructor(_0x2d4251,_0x2a1dc8){const _0x3b5fb1=_0x153b69=>{_0x153b69['font']='10px\x20\x22Luci'+'da\x20Console'+'\x22,\x20Monaco,'+'\x20monospace',_0x153b69['textAlign']='left',_0x153b69['textBaseli'+'ne']='alphabetic';},_0x2dcf71=_0x276d16=>_0x276d16==='.'||_0x276d16['length']===-0x5ad+0x58e+0x10*0x2&&_0x276d16['charCodeAt'](0x1*0x1394+0x4d9*0x7+-0x3583)>=-0xbc6+0x10*0xb7+0x43*0x2&&_0x276d16['charCodeAt'](0x80f+0x2213+-0x2a22)<=-0x1*-0x361+-0x2*0x14c+-0x90,_0x1a7c69=document['createElem'+'ent']('canvas'),_0x7e346b=_0x1a7c69['getContext']('2d',{'alpha':!(0x121a+0x12a1*0x1+-0x24bb)});_0x3b5fb1(_0x7e346b);const _0x2b3dbd=new Map(),_0x95b540=0x1*0x75a+0x3*-0x419+0x4f6,_0x584ffb=-0x9*0x7f+0xa2c+-0xd*0x49;let _0x35b98c=_0x95b540,_0x111407=_0x95b540;_0x2a1dc8['forEach'](_0x2e98c7=>{const _0xf3d878=_0x7e346b['measureTex'+'t'](_0x2e98c7),_0x4a2e5e=Math['ceil'](-_0xf3d878['actualBoun'+'dingBoxLef'+'t']),_0x6d08a5=Math['ceil'](_0xf3d878['actualBoun'+'dingBoxRig'+'ht']),_0x59341c=Math['ceil'](_0xf3d878['actualBoun'+'dingBoxAsc'+'ent']),_0x5a8f2a=Math['ceil'](_0xf3d878['actualBoun'+'dingBoxDes'+'cent']),_0x2ca76f=_0x4a2e5e+_0x6d08a5,_0x16ec18=_0x59341c+_0x5a8f2a;_0x35b98c+_0x2ca76f+_0x95b540>=_0x584ffb&&(_0x35b98c=_0x95b540,_0x111407+=0x1*0x8ef+-0x65a+-0x285),_0x2b3dbd['set'](_0x2e98c7,{'l':_0x4a2e5e,'r':_0x6d08a5,'a':_0x59341c,'d':_0x5a8f2a,'w':_0x2ca76f,'h':_0x16ec18,'x':_0x35b98c,'y':_0x111407}),_0x35b98c+=_0x2ca76f+_0x95b540;}),_0x1a7c69['width']=0x11*0xa2+0x175*0x2+-0xbac,_0x1a7c69['height']=Y['nextPowerO'+'fTwo'](_0x111407+(0x89+0x1629+0x1*-0x16a2)+_0x95b540),_0x3b5fb1(_0x7e346b),_0x7e346b['fillStyle']='rgb(0,\x200,\x20'+'0)',_0x7e346b['fillRect'](-0x1d21+0x503*0x1+0x181e,-0x1305+0x2424+-0x1e7*0x9,_0x1a7c69['width'],_0x1a7c69['height']),_0x2b3dbd['forEach']((_0x16cc29,_0x37634c)=>{_0x7e346b['fillStyle']=_0x2dcf71(_0x37634c)?'rgb(255,\x202'+'55,\x20255)':'rgb(170,\x201'+'70,\x20170)',_0x7e346b['fillText'](_0x37634c,_0x16cc29['x']-_0x16cc29['l'],_0x16cc29['y']+_0x16cc29['a']);}),this['placements']=_0x2b3dbd;const _0x204e8b=_0x7e346b['getImageDa'+'ta'](-0x22ed+0xdb6+0x1537,0x2368+0x1890*-0x1+0x15b*-0x8,_0x1a7c69['width'],_0x1a7c69['height'])['data'];for(let _0x1b3e75=-0x1de*-0xd+-0x2026+0x4*0x1f8;_0x1b3e75<_0x204e8b['length'];_0x1b3e75+=0x13a6+-0x11*0x1a5+0x853)_0x204e8b[_0x1b3e75+(-0xf76+-0x135e+0xb9d*0x3)]=_0x204e8b[_0x1b3e75+(0x2617+0x1c1d+-0x4234)],_0x204e8b[_0x1b3e75+(-0x9*-0x1ce+0xb3f*0x1+-0x1b7d)]=-0x1416+-0x1f07+0x3a*0xe6,_0x204e8b[_0x1b3e75+(0x983+-0x4*0x3e6+-0x13*-0x52)]=0x526+-0x6*-0x56b+0x24a9*-0x1,_0x204e8b[_0x1b3e75+(0x17e9+-0xce4+-0xb03)]=-0x10*0xb2+0x15d3+-0x9b4;this['texture']=new _e(_0x2d4251,{'name':'mini-stats'+'-word-atla'+'s','width':_0x1a7c69['width'],'height':_0x1a7c69['height'],'mipmaps':!(-0x1c8c+-0x1d26+0x1*0x39b3),'minFilter':Te,'magFilter':Te,'levels':[_0x204e8b]});}['destroy'](){this['texture']['destroy'](),this['texture']=null;}['render'](_0x3419a2,_0x3120b8,_0x47f818,_0x5ab2ce){const _0x2c66ba=this['placements']['get'](_0x3120b8);return _0x2c66ba?(_0x3419a2['quad'](_0x47f818+_0x2c66ba['l']-(0x105d+0x2*-0x611+0x2*-0x21d),_0x5ab2ce-_0x2c66ba['d']+(0x1dd3+-0x19e9+-0x3e9),_0x2c66ba['w']+(-0x1d4d+-0x18e1+0x3630),_0x2c66ba['h']+(-0x8b3+-0x1202+0x1ab7*0x1),_0x2c66ba['x']-(-0x160+0xfae+-0x20b*0x7),this['texture']['height']-_0x2c66ba['y']-_0x2c66ba['h']-(0xf*-0x272+-0x5*0x218+-0x2f27*-0x1),void(-0x18bc+-0x2426+-0x1e71*-0x2),void(-0xc2d+-0x23a+0xe67),this['texture'],0x1*0x79f+-0x174a+0xfac),_0x2c66ba['w']):-0x3*0x45+0x26*0x2f+0x1*-0x62b;}}const $k='\x0a\x20\x20\x20\x20attri'+'bute\x20vec3\x20'+'vertex_pos'+'ition;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20un'+'normalized'+'\x20xy,\x20word\x20'+'flag\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_texCoord0'+';\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20unnormal'+'ized\x20textu'+'re\x20space\x20u'+'v,\x20normali'+'zed\x20uv\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec4\x20uv0;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20float\x20wo'+'rdFlag;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion.xy\x20*\x202'+'.0\x20-\x201.0,\x20'+'0.5,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20verte'+'x_texCoord'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20wordFlag\x20'+'=\x20vertex_p'+'osition.z;'+'\x0a\x20\x20\x20\x20}\x0a',Xk='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec3f;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'unnormaliz'+'ed\x20xy,\x20wor'+'d\x20flag\x0a\x20\x20\x20'+'\x20attribute'+'\x20vertex_te'+'xCoord0:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20unno'+'rmalized\x20t'+'exture\x20spa'+'ce\x20uv,\x20nor'+'malized\x20uv'+'\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'varying\x20wo'+'rdFlag:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x20fn\x20v'+'ertexMain('+'input\x20:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output\x20:\x20'+'VertexOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4(input'+'.vertex_po'+'sition.xy\x20'+'*\x202.0\x20-\x201.'+'0,\x200.5,\x201.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.u'+'v0\x20=\x20input'+'.vertex_te'+'xCoord0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.wordFl'+'ag\x20=\x20input'+'.vertex_po'+'sition.z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',qk='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20uv'+'0;\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20wordFlag;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'lr;\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20grap'+'hTex;\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20wo'+'rdsTex;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in\x20(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20graph'+'Sample\x20=\x20t'+'exture2D(g'+'raphTex,\x20u'+'v0.xy);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20graph;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv0.w\x20<\x20g'+'raphSample'+'.r)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20grap'+'h\x20=\x20vec4(0'+'.7,\x200.2,\x200'+'.2,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20graph\x20=\x20'+'vec4(0.2,\x20'+'0.7,\x200.2,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20else\x20i'+'f\x20(uv0.w\x20<'+'\x20graphSamp'+'le.b)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gr'+'aph\x20=\x20vec4'+'(0.2,\x200.2,'+'\x200.7,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20gra'+'ph\x20=\x20vec4('+'0.0,\x200.0,\x20'+'0.0,\x201.0\x20-'+'\x200.25\x20*\x20si'+'n(uv0.w\x20*\x20'+'3.14159));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20words'+'\x20=\x20texture'+'2D(wordsTe'+'x,\x20vec2(uv'+'0.x,\x201.0\x20-'+'\x20uv0.y));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20mix(gr'+'aph,\x20words'+',\x20wordFlag'+')\x20*\x20clr;\x0a\x20'+'\x20\x20\x20}\x0a',jk='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c4f;\x0a\x20\x20\x20\x20v'+'arying\x20wor'+'dFlag:\x20f32'+';\x0a\x0a\x20\x20\x20\x20uni'+'form\x20clr:\x20'+'vec4f;\x0a\x0a\x20\x20'+'\x20\x20var\x20grap'+'hTex\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20graphTex'+'_sampler\x20:'+'\x20sampler;\x0a'+'\x0a\x20\x20\x20\x20var\x20w'+'ordsTex\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20words'+'Tex_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20u'+'v0:\x20vec4f\x20'+'=\x20input.uv'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20graph'+'Sample:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'graphTex,\x20'+'graphTex_s'+'ampler,\x20uv'+'0.xy);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'graph:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(uv0.'+'w\x20<\x20graphS'+'ample.r)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20graph\x20='+'\x20vec4f(0.7'+',\x200.2,\x200.2'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20graph\x20'+'=\x20vec4f(0.'+'2,\x200.7,\x200.'+'2,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(uv'+'0.w\x20<\x20grap'+'hSample.b)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20graph'+'\x20=\x20vec4f(0'+'.2,\x200.2,\x200'+'.7,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'raph\x20=\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x201.'+'0\x20-\x200.25\x20*'+'\x20sin(uv0.w'+'\x20*\x203.14159'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20wor'+'ds:\x20vec4f\x20'+'=\x20textureS'+'ample(word'+'sTex,\x20word'+'sTex_sampl'+'er,\x20vec2f('+'uv0.x,\x201.0'+'\x20-\x20uv0.y))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20mix(grap'+'h,\x20words,\x20'+'input.word'+('Flag)\x20*\x20un'+'iform.clr;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a');class Yk{constructor(_0x3ec04d,_0xbdc94f=-0xf51*0x1+0x147*0x11+-0x466){const _0x47cdd6=new kt(_0x3ec04d,[{'semantic':Pe,'components':0x3,'type':Ve},{'semantic':is,'components':0x4,'type':Ve}]),_0x28c8f5=new Uint16Array(_0xbdc94f*(-0x13e1*0x1+0x1a68+-0x681));for(let _0x46055c=-0x1d2a+0x1e59+-0x12f*0x1;_0x46055c<_0xbdc94f;++_0x46055c)_0x28c8f5[_0x46055c*(0x985+0x1ee9+0xd78*-0x3)+(-0x14d1*0x1+0x17ec+-0x31b*0x1)]=_0x46055c*(0xd5*-0x7+-0x442*0x8+0x27e7),_0x28c8f5[_0x46055c*(-0x158*-0x5+0x1fd3*0x1+-0x2685)+(-0x2676+-0x2430+0x4aa7)]=_0x46055c*(-0x6*0x3cb+0x28*0x53+0xa*0xfb)+(0x1238+-0x156*0xc+0x22f*-0x1),_0x28c8f5[_0x46055c*(0x1078+0x959+-0x19cb)+(0xc9d+0x1509+-0x4*0x869)]=_0x46055c*(-0x11*0x1a7+0xd91*-0x2+0x373d)+(0x313*0xa+-0x22f*-0x11+-0x43db),_0x28c8f5[_0x46055c*(-0x4a*0x6f+-0x1cee+0x3d0a*0x1)+(0xb20+-0x51*-0x45+-0x20f2)]=_0x46055c*(0x1*0x2113+-0x1fd6+0x139*-0x1),_0x28c8f5[_0x46055c*(-0x22fb+0x69b+0x1c66)+(0x181f+0x2687*0x1+-0x3ea2)]=_0x46055c*(0x1ff7+0x135b+0x4aa*-0xb)+(-0xb3d+0xb*0xd6+0x3*0xaf),_0x28c8f5[_0x46055c*(-0x16*0x104+-0x748+0x1da6)+(0x1772+0x15e9+0x2*-0x16ab)]=_0x46055c*(0x81*-0x41+-0x7cf*-0x4+-0x3*-0x83)+(-0x1826+-0x1*-0x1a7b+0x1*-0x252);this['device']=_0x3ec04d,this['buffer']=new Ds(_0x3ec04d,_0x47cdd6,_0xbdc94f*(0x199b+-0x2b*0x32+-0x1131*0x1),{'usage':SS}),this['data']=new Float32Array(this['buffer']['numBytes']/(-0x5*-0x1f+0x4*0x963+0x2ef*-0xd)),this['indexBuffe'+'r']=new xr(_0x3ec04d,ji,_0xbdc94f*(-0xf31+0x112*0x23+-0x43*0x55),ms,_0x28c8f5),this['prim']={'type':qs,'indexed':!(-0x1231+0x2185+-0xf54),'base':0x0,'baseVertex':0x0,'count':0x0},this['quads']=0x12f6+-0x1c28+0x932,this['mesh']=new Ge(_0x3ec04d),this['mesh']['vertexBuff'+'er']=this['buffer'],this['mesh']['indexBuffe'+'r'][0xb17+0x1f*-0x107+0x14c2]=this['indexBuffe'+'r'],this['mesh']['primitive']=[this['prim']];const _0x5169de=new Bn({'uniqueName':'MiniStats','vertexGLSL':$k,'fragmentGLSL':qk,'vertexWGSL':Xk,'fragmentWGSL':jk,'attributes':{'vertex_position':Pe,'vertex_texCoord0':is}});this['material']=_0x5169de,_0x5169de['cull']=bt,_0x5169de['depthState']=Yt['NODEPTH'],_0x5169de['blendState']=new pt(!(-0x1*-0x2481+-0x18c8+-0xbb9),fs,Ah,Ch,fs,Ft,Ft),_0x5169de['update'](),this['meshInstan'+'ce']=new He(this['mesh'],_0x5169de,new Ie('MiniStatsM'+'esh')),this['uniforms']={'clr':new Float32Array(0x26*-0x13+0x3b+0x29b)},this['targetSize']={'width':_0x3ec04d['width'],'height':_0x3ec04d['height']};}['quad'](_0x4251e6,_0x1a72e2,_0x5ecf5e,_0x3cf177,_0x5f356f,_0xa30c79,_0x4476ed,_0x114fe3,_0x517a66,_0x415acc=-0xac*-0x8+-0x6*-0x1b6+-0xfa4){const _0x422b41=this['targetSize']['width'],_0x3a3e00=this['targetSize']['height'],_0x1d891f=_0x4251e6/_0x422b41,_0x39857c=_0x1a72e2/_0x3a3e00,_0x55e1ed=(_0x4251e6+_0x5ecf5e)/_0x422b41,_0x38b278=(_0x1a72e2+_0x3cf177)/_0x3a3e00,_0x3eca47=_0x517a66['width'],_0x35473b=_0x517a66['height'],_0x12b117=_0x5f356f/_0x3eca47,_0x3c53cd=_0xa30c79/_0x35473b,_0x383098=(_0x5f356f+(_0x4476ed??_0x5ecf5e))/_0x3eca47,_0x477c84=(_0xa30c79+(_0x114fe3??_0x3cf177))/_0x35473b;this['data']['set']([_0x1d891f,_0x39857c,_0x415acc,_0x12b117,_0x3c53cd,0x1*-0xcc7+-0x23df+-0x2*-0x1853,-0x81+0x1*0x25a5+0x4*-0x949,_0x55e1ed,_0x39857c,_0x415acc,_0x383098,_0x3c53cd,-0x1a41+0x204d+-0x60b,-0x1299+0x13a2+-0x109,_0x55e1ed,_0x38b278,_0x415acc,_0x383098,_0x477c84,-0xf*-0x61+0x5b*-0x38+-0x2*-0x71d,0xb*0xe1+-0x356*-0x9+-0x13d8*0x2,_0x1d891f,_0x38b278,_0x415acc,_0x12b117,_0x477c84,-0x1215+-0x1f*0xe+0x13c7,-0xdc0+-0x695+0x112*0x13],(0xb16+-0x7ff*-0x2+0x6be*-0x4)*this['quads']),this['quads']++,this['prim']['count']+=-0x1*-0x259+-0x10f6*0x2+-0x1*-0x1f99;}['startFrame'](){this['quads']=-0x898+-0xe0*0x5+0xcf8,this['prim']['count']=-0x25fd+-0x1*-0x524+-0x3*-0xaf3,this['targetSize']['width']=this['device']['canvas']['scrollWidt'+'h'],this['targetSize']['height']=this['device']['canvas']['scrollHeig'+'ht'];}['render'](_0x143407,_0x21e941,_0x279243,_0x851737,_0x4e737f,_0x3c3678){this['buffer']['setData'](this['data']['buffer']),this['uniforms']['clr']['set'](_0x4e737f,0x16f9*-0x1+-0x1d1b+0x3414),this['material']['setParamet'+'er']('clr',this['uniforms']['clr']),this['material']['setParamet'+'er']('graphTex',_0x279243),this['material']['setParamet'+'er']('wordsTex',_0x851737),_0x143407['drawMeshIn'+'stance'](this['meshInstan'+'ce'],_0x21e941);}}class e0{constructor(_0x1dd620,_0x1db814){const _0x3a7ff=_0x1dd620['graphicsDe'+'vice'];this['deviceHeig'+'ht']=_0x3a7ff['height']/_0x3a7ff['maxPixelRa'+'tio'],_0x1db814={...e0['getDefault'+'Options'](),..._0x1db814},this['options']=_0x1db814,this['initGraphs'](_0x1dd620,_0x3a7ff,_0x1db814);const _0x1273d1=new Set(['','ms','0','1','2','3','4','5','6','7','8','9','.']['concat'](this['graphs']['map'](_0x388b06=>_0x388b06['name']))['concat'](_0x1db814['stats']?_0x1db814['stats']['map'](_0x5cc5f8=>_0x5cc5f8['unitsName']):[])['filter'](_0x463ec0=>!!_0x463ec0));this['wordAtlas']=new Wk(_0x3a7ff,_0x1273d1),this['sizes']=_0x1db814['sizes'],this['_activeSiz'+'eIndex']=_0x1db814['startSizeI'+'ndex'];const _0x34ba4f=document['createElem'+'ent']('div');_0x34ba4f['setAttribu'+'te']('id','mini-stats'),_0x1db814['position']==='top'?_0x34ba4f['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';':_0x34ba4f['style']['cssText']='position:f'+'ixed;botto'+'m:0;left:0'+';backgroun'+'d:transpar'+'ent;',_0x34ba4f['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';',document['body']['appendChil'+'d'](_0x34ba4f),_0x34ba4f['addEventLi'+'stener']('mouseenter',_0x57cb04=>{this['opacity']=0x1d0*0x8+-0x4*0x860+-0x7*-0x2b7;}),_0x34ba4f['addEventLi'+'stener']('mouseleave',_0x1e39a7=>{this['opacity']=0x11f0*0x1+-0x5ea*0x3+0x5*-0xa+0.7;}),_0x34ba4f['addEventLi'+'stener']('click',_0x34827a=>{_0x34827a['preventDef'+'ault'](),this['_enabled']&&(this['activeSize'+'Index']=(this['activeSize'+'Index']+(-0x2d*-0x8e+0xa*-0x353+0x849))%this['sizes']['length'],this['resize'](this['sizes'][this['activeSize'+'Index']]['width'],this['sizes'][this['activeSize'+'Index']]['height'],this['sizes'][this['activeSize'+'Index']]['graphs']));}),_0x3a7ff['on']('resizecanv'+'as',this['updateDiv'],this),_0x3a7ff['on']('losecontex'+'t',this['loseContex'+'t'],this),_0x1dd620['on']('postrender',this['postRender'],this),this['app']=_0x1dd620,this['drawLayer']=_0x1dd620['scene']['layers']['getLayerBy'+'Id'](Sl),this['device']=_0x3a7ff,this['render2d']=new Yk(_0x3a7ff),this['div']=_0x34ba4f,this['width']=-0x7a3+-0x1*-0x397+0x206*0x2,this['height']=-0x878+0x909+-0x91,this['gspacing']=-0x231b+0xc*-0x48+0x1*0x267d,this['clr']=[-0x2c7+0x2404+-0x213c,0x21a2+-0xa6*-0x1f+-0x15*0x28f,-0x1*0x13b2+0x2*0x10ff+-0xe4b,0x1130*-0x1+0x2*0x10d9+-0x1*0x1082+0.5],this['_enabled']=!(0x1db9+0xbe5+-0x299e*0x1),this['activeSize'+'Index']=this['_activeSiz'+'eIndex'];}['destroy'](){this['device']['off']('resizecanv'+'as',this['updateDiv'],this),this['device']['off']('losecontex'+'t',this['loseContex'+'t'],this),this['app']['off']('postrender',this['postRender'],this),this['graphs']['forEach'](_0x59bff2=>_0x59bff2['destroy']()),this['wordAtlas']['destroy'](),this['texture']['destroy']();}static['getDefault'+'Options'](){return{'position':'top','sizes':[{'width':0x64,'height':0x10,'spacing':0x0,'graphs':!(0x17b6+0x1a4b+-0x500*0xa)},{'width':0x80,'height':0x20,'spacing':0x2,'graphs':!(-0x1f53+0x1ab4+0x49f)},{'width':0x100,'height':0x40,'spacing':0x2,'graphs':!(0xa2b+0x804+-0x122f)}],'startSizeIndex':0x0,'textRefreshRate':0x1f4,'cpu':{'enabled':!(0x11ed+-0x11df*-0x2+-0x35ab),'watermark':0x21},'gpu':{'enabled':!(0x15eb*0x1+-0xdca+0x1*-0x821),'watermark':0x21},'stats':[{'name':'Frame','stats':['frame.ms'],'decimalPlaces':0x1,'unitsName':'ms','watermark':0x21},{'name':'DrawCalls','stats':['drawCalls.'+'total'],'watermark':0x3e8}]};}set['activeSize'+'Index'](_0x3c2478){this['_activeSiz'+'eIndex']=_0x3c2478,this['gspacing']=this['sizes'][_0x3c2478]['spacing'],this['resize'](this['sizes'][_0x3c2478]['width'],this['sizes'][_0x3c2478]['height'],this['sizes'][_0x3c2478]['graphs']);}get['activeSize'+'Index'](){return this['_activeSiz'+'eIndex'];}set['opacity'](_0xae019a){this['clr'][0x7*-0x1d+0xd6e*0x1+0xca0*-0x1]=_0xae019a;}get['opacity'](){return this['clr'][-0x1dda*0x1+0xb44+0x1299];}get['overallHei'+'ght'](){const _0x20d763=this['graphs'],_0x409fc0=this['gspacing'];return this['height']*_0x20d763['length']+_0x409fc0*(_0x20d763['length']-(0x1d2b+0x3*-0x69b+-0x959));}set['enabled'](_0x43634e){if(_0x43634e!==this['_enabled']){this['_enabled']=_0x43634e;for(let _0x3cf831=0x15b*0xd+-0x1*-0x39f+-0x153e*0x1;_0x3cf831<this['graphs']['length'];++_0x3cf831)this['graphs'][_0x3cf831]['enabled']=_0x43634e,this['graphs'][_0x3cf831]['timer']['enabled']=_0x43634e;}}get['enabled'](){return this['_enabled'];}['initGraphs'](_0x14b4ea,_0x38a55b,_0x457024){if(this['graphs']=[],_0x457024['cpu']['enabled']){const _0x4d31e0=new Vk(_0x14b4ea),_0x37d845=new ff('CPU',_0x14b4ea,_0x457024['cpu']['watermark'],_0x457024['textRefres'+'hRate'],_0x4d31e0);this['graphs']['push'](_0x37d845);}if(_0x457024['gpu']['enabled']){const _0x27eac4=new Gk(_0x38a55b),_0x5415ea=new ff('GPU',_0x14b4ea,_0x457024['gpu']['watermark'],_0x457024['textRefres'+'hRate'],_0x27eac4);this['graphs']['push'](_0x5415ea);}_0x457024['stats']&&_0x457024['stats']['forEach'](_0x55107e=>{const _0x3c6132=new Hk(_0x14b4ea,_0x55107e['stats'],_0x55107e['decimalPla'+'ces'],_0x55107e['unitsName'],_0x55107e['multiplier']),_0x12a1a4=new ff(_0x55107e['name'],_0x14b4ea,_0x55107e['watermark'],_0x457024['textRefres'+'hRate'],_0x3c6132);this['graphs']['push'](_0x12a1a4);});const _0x2d9e90=_0x457024['sizes']['reduce']((_0x52f2ef,_0x57cc5e)=>_0x57cc5e['width']>_0x52f2ef?_0x57cc5e['width']:_0x52f2ef,0x1*0x13de+0xb1+0x148f*-0x1);this['texture']=new _e(_0x38a55b,{'name':'mini-stats'+'-graph-tex'+'ture','width':Y['nextPowerO'+'fTwo'](_0x2d9e90),'height':Y['nextPowerO'+'fTwo'](this['graphs']['length']),'mipmaps':!(-0x49*0x26+-0x1725+0x21fc),'minFilter':Te,'magFilter':Te,'addressU':yt,'addressV':yt}),this['graphs']['forEach']((_0x1865d4,_0x4d61bc)=>{_0x1865d4['texture']=this['texture'],_0x1865d4['yOffset']=_0x4d61bc;});}['render'](){const _0x2f8393=this['graphs'],_0x321f44=this['wordAtlas'],_0x2863bb=this['render2d'],_0x13a557=this['width'],_0x11e90a=this['height'],_0xb71c34=this['gspacing'];_0x2863bb['startFrame']();for(let _0x26381d=-0xaff+0x2*0xec3+-0x11*0x117;_0x26381d<_0x2f8393['length'];++_0x26381d){const _0x8298d8=_0x2f8393[_0x26381d];let _0x55763f=this['options']['position']==='top'?this['deviceHeig'+'ht']-(_0x26381d+(-0x671+0x459+-0x3*-0xb3))*(_0x11e90a+_0xb71c34):_0x26381d*(_0x11e90a+_0xb71c34);_0x8298d8['render'](_0x2863bb,0x29f+-0x1dc6+0x1b27*0x1,_0x55763f,_0x13a557,_0x11e90a);let _0x296716=0xc50+-0x1207*0x2+-0x1*-0x17bf;_0x55763f+=_0x11e90a-(0x1ef8+-0x255e+0x673),_0x296716+=_0x321f44['render'](_0x2863bb,_0x8298d8['name'],_0x296716,_0x55763f)+(-0x1*-0x1d6b+0x8b*0x33+-0x1c89*0x2);const _0x3fe932=_0x8298d8['timingText'];for(let _0x52ad5e=-0xd*0xbf+0x41*-0x37+0x17aa;_0x52ad5e<_0x3fe932['length'];++_0x52ad5e)_0x296716+=_0x321f44['render'](_0x2863bb,_0x3fe932[_0x52ad5e],_0x296716,_0x55763f);_0x8298d8['timer']['unitsName']&&(_0x296716+=0x574+0x1dfd*-0x1+-0x1*-0x188c,_0x321f44['render'](_0x2863bb,_0x8298d8['timer']['unitsName'],_0x296716,_0x55763f));}_0x2863bb['render'](this['app'],this['drawLayer'],this['texture'],this['wordAtlas']['texture'],this['clr'],_0x11e90a);}['resize'](_0x1a3e32,_0x3d91d8,_0x501a32){const _0x43da7b=this['graphs'];for(let _0x11dc27=-0x210d+-0x323*0x5+0x30bc;_0x11dc27<_0x43da7b['length'];++_0x11dc27)_0x43da7b[_0x11dc27]['enabled']=_0x501a32;this['width']=_0x1a3e32,this['height']=_0x3d91d8,this['updateDiv']();}['updateDiv'](){const _0xf8174b=this['device']['canvas']['getBoundin'+'gClientRec'+'t']();this['div']['style']['left']=_0xf8174b['left']+'px',this['div']['style']['bottom']=window['innerHeigh'+'t']-_0xf8174b['bottom']+'px',this['div']['style']['width']=this['width']+'px',this['div']['style']['height']=this['overallHei'+'ght']+'px',this['deviceHeig'+'ht']=this['device']['height']/this['device']['maxPixelRa'+'tio'];}['loseContex'+'t'](){this['graphs']['forEach'](_0x3784f4=>_0x3784f4['loseContex'+'t']());}['postRender'](){this['_enabled']&&this['render']();}}o0();class Kk extends ts{constructor(){super(...arguments),h(this,'basePath','https://cd'+'n.jsdelivr'+'.net/npm/@'+'webxr-inpu'+'t-profiles'+'/assets/di'+'st/profile'+'s'),h(this,'controller'+'s',new Map()),h(this,'preEntitie'+'s',new Map()),h(this,'eventsList',[]),h(this,'addEvents',(_0x24a450,_0x3e6a24,_0x34d2c2)=>{_0x24a450['on'](_0x3e6a24,_0x34d2c2),this['eventsList']=this['eventsList']['concat']({'e':_0x24a450,'ty':_0x3e6a24,'fn':_0x34d2c2});}),h(this,'removeEven'+'ts',()=>{this['eventsList']['forEach'](({e:_0x3fe6c2,ty:_0x5bd8df,fn:_0x56cf37})=>{_0x3fe6c2['off'](_0x5bd8df,_0x56cf37);}),this['eventsList']=[];}),h(this,'initialize',()=>{if(!this['app']['xr']){console['error']('XrControll'+'ers\x20script'+'\x20requires\x20'+'XR\x20to\x20be\x20e'+'nabled\x20on\x20'+'the\x20applic'+'ation');return;}this['addEvents'](this['app']['xr']['input'],'add',async _0x5468dc=>{var _0x450627;if(console['log']('add\x20xr\x20inp'+'ut',_0x5468dc['handedness']),!((_0x450627=_0x5468dc['profiles'])!=null&&_0x450627['length'])){console['warn']('No\x20profile'+'s\x20availabl'+'e\x20for\x20inpu'+'t\x20source');return;}const _0x2ed0b9=_0x5468dc['profiles']['map'](async _0x222c67=>{var _0x220755;const _0x1872cd=this['basePath']+'/'+_0x222c67+('/profile.j'+'son');try{const _0x1db435=await fetch(_0x1872cd);if(!_0x1db435['ok'])return null;const _0x45bbf8=await _0x1db435['json'](),_0x547760=((_0x220755=_0x45bbf8['layouts'][_0x5468dc['handedness']])==null?void(-0x209+0x1c01+-0x19f8):_0x220755['assetPath'])||'',_0x11bffc=this['basePath']+'/'+_0x45bbf8['profileId']+'/'+_0x5468dc['handedness']+_0x547760['replace'](/^\/?(left|right)/,''),_0x354a3b=await new Promise((_0xda129b,_0xd5e57e)=>{this['app']['assets']['loadFromUr'+'l'](_0x11bffc,'container',(_0x59a07d,_0x55a2de)=>{_0x59a07d?_0xd5e57e(_0x59a07d):_0xda129b(_0x55a2de);});});return{'profileId':_0x222c67,'asset':_0x354a3b};}catch{return console['warn']('Failed\x20to\x20'+'process\x20pr'+'ofile\x20'+_0x222c67),null;}}),_0x14ada3=(await Promise['all'](_0x2ed0b9))['find'](_0x41192a=>_0x41192a!==null);if(_0x14ada3){const {asset:_0x1e0060}=_0x14ada3,_0x23367f=_0x1e0060['resource']['instantiat'+'eRenderEnt'+'ity']();_0x23367f['name']='Armature_'+_0x5468dc['handedness'],this['app']['root']['addChild'](_0x23367f),this['preEntitie'+'s']['set'](_0x5468dc,_0x23367f);const _0x32290f=new Map();if(_0x5468dc['hand'])for(const _0x329dc9 of _0x5468dc['hand']['joints']){const _0x5e0864=_0x23367f['findByName'](_0x329dc9['id']);_0x5e0864&&_0x32290f['set'](_0x329dc9,_0x5e0864);}this['controller'+'s']['set'](_0x5468dc,{'entity':_0x23367f,'jointMap':_0x32290f});}else console['warn']('No\x20compati'+'ble\x20profil'+'es\x20found');}),this['addEvents'](this['app']['xr']['input'],'remove',_0x4a86e3=>{var _0x54f4fc;const _0xfd8176=this['controller'+'s']['get'](_0x4a86e3);_0xfd8176&&((_0x54f4fc=_0xfd8176['entity'])==null||_0x54f4fc['destroy'](),this['app']['root']['removeChil'+'d'](_0xfd8176==null?void(0x2b9*-0x7+0x2e5*-0xa+0x3001):_0xfd8176['entity']),this['controller'+'s']['delete'](_0x4a86e3));}),this['addEvents'](this['app']['xr']['input'],'removeall',this['destroy']),this['on']('destroy',this['removeEven'+'ts']);}),h(this,'destroy',()=>{var _0x265661,_0x5934f1,_0x2a060d;const _0x482669=this['app'];(_0x265661=this['controller'+'s'])==null||_0x265661['forEach'](_0x3ff5c2=>{var _0x49171a;_0x482669['root']['removeChil'+'d'](_0x3ff5c2==null?void(0x10f*-0x11+0x1f1b+-0xd1c):_0x3ff5c2['entity']),(_0x49171a=_0x3ff5c2['entity'])==null||_0x49171a['destroy']();}),(_0x5934f1=this['controller'+'s'])==null||_0x5934f1['clear'](),(_0x2a060d=this['preEntitie'+'s'])==null||_0x2a060d['forEach'](_0x529e40=>{_0x482669['root']['removeChil'+'d'](_0x529e40),_0x529e40==null||_0x529e40['destroy']();});const _0x526454=()=>{const _0x29961c=_0x482669['root']['findByName']('Armature_l'+'eft'),_0x3214ae=_0x482669['root']['findByName']('Armature_r'+'ight');for(_0x29961c&&_0x482669['root']['removeChil'+'d'](_0x29961c),_0x3214ae&&_0x482669['root']['removeChil'+'d'](_0x3214ae);_0x482669['root']['findByName']('Armature_l'+'eft')||_0x482669['root']['findByName']('Armature_r'+'ight');)_0x526454();};_0x526454();});}['update'](_0x1d2864){var _0x1a4a88;if((_0x1a4a88=this['app']['xr'])!=null&&_0x1a4a88['active']){for(const [_0x2569d1,{entity:_0x654ab7,jointMap:_0x4d07bc}]of this['controller'+'s'])if(_0x2569d1['hand']){for(const [_0x451b1c,_0x35ca18]of _0x4d07bc)_0x35ca18['setPositio'+'n'](_0x451b1c['getPositio'+'n']()),_0x35ca18['setRotatio'+'n'](_0x451b1c['getRotatio'+'n']());}else _0x654ab7['setPositio'+'n'](_0x2569d1['getPositio'+'n']()),_0x654ab7['setRotatio'+'n'](_0x2569d1['getRotatio'+'n']());}}}h(Kk,'scriptName','xrControll'+'ers');class Zk extends ts{constructor(){super(...arguments),h(this,'inputSourc'+'es',new Set()),h(this,'activePoin'+'ters',new Map()),h(this,'validColor',new ie(0x70*-0x43+-0xac7+-0x1*-0x2817,-0x1f7+0x7f6+-0x5fe,-0x1f67+-0x17a1+0x3708)),h(this,'invalidCol'+'or',new ie(0x1ca*0xe+-0x3*0x640+-0x64b,0x2*-0x1069+0xa57+-0x1*-0x167b,-0x31*-0x7+-0xd*-0x3+-0x17e*0x1)),h(this,'inputHandl'+'ers',new Map()),h(this,'teleportOp'+'enStatus',!(-0x95*-0xb+-0xc1b+0x5b5)),h(this,'teleportLe'+'ftOpenStat'+'us',!(0x21ef+-0x5a6*-0x1+-0x9e5*0x4));}['initialize'](){if(!this['app']['xr']){console['error']('XrNavigati'+'on\x20script\x20'+'requires\x20X'+'R\x20to\x20be\x20en'+'abled\x20on\x20t'+'he\x20applica'+'tion');return;}this['app']['xr']['input']['on']('add',_0x167c87=>{const _0x7721b=()=>{this['activePoin'+'ters']['set'](_0x167c87,!(0xc5*0x18+0x26*-0xbf+0x9e2));},_0x41b50b=()=>{this['activePoin'+'ters']['set'](_0x167c87,!(-0x26e9+0xa3d+0x1cad)),this['tryTelepor'+'t'](_0x167c87);};_0x167c87['on']('selectstar'+'t',_0x7721b),_0x167c87['on']('selectend',_0x41b50b),this['inputHandl'+'ers']['set'](_0x167c87,{'handleSelectStart':_0x7721b,'handleSelectEnd':_0x41b50b}),this['inputSourc'+'es']['add'](_0x167c87);}),this['app']['xr']['input']['on']('remove',_0xf920bb=>{const _0x3b9e2d=this['inputHandl'+'ers']['get'](_0xf920bb);_0x3b9e2d&&(_0xf920bb['off']('selectstar'+'t',_0x3b9e2d['handleSele'+'ctStart']),_0xf920bb['off']('selectend',_0x3b9e2d['handleSele'+'ctEnd']),this['inputHandl'+'ers']['delete'](_0xf920bb)),this['activePoin'+'ters']['delete'](_0xf920bb),this['inputSourc'+'es']['delete'](_0xf920bb);});}['findPlaneI'+'ntersectio'+'n'](_0x52df24,_0x312e62){if(Math['abs'](_0x312e62['y'])<0xd62+-0x409*0x1+-0x959+0.00001)return null;const _0x347902=-_0x52df24['y']/_0x312e62['y'];return _0x347902<-0x1f0c+0x3*-0x4e7+0x2dc1?null:new D(_0x52df24['x']+_0x312e62['x']*_0x347902,-0x1cf*-0x5+-0xcd*0x13+0x62c,_0x52df24['z']+_0x312e62['z']*_0x347902);}['tryTelepor'+'t'](_0x46007a){if(this['teleportOp'+'enStatus']||this['teleportLe'+'ftOpenStat'+'us']){const _0x124fdc=_0x46007a['getOrigin'](),_0xcbe165=_0x46007a['getDirecti'+'on'](),_0x5dfdb4=this['findPlaneI'+'ntersectio'+'n'](_0x124fdc,_0xcbe165);if(_0x5dfdb4){const _0x484cba=this['entity']['getPositio'+'n']()['y'];_0x5dfdb4['y']=_0x484cba,this['entity']['setPositio'+'n'](_0x5dfdb4);}}}['update'](){for(const _0x474ec4 of this['inputSourc'+'es']){if(_0x474ec4['gamepad']&&!_0x474ec4['hand']){const _0x320952=_0x474ec4['gamepad'];for(let _0x4269e6=-0x1d82*-0x1+-0x4*0x748+-0x62;_0x4269e6<_0x320952['buttons']['length'];++_0x4269e6)_0x474ec4['handedness']==='right'&&_0x4269e6===0x610+-0x1*0x244b+-0x1e*-0x102&&(this['teleportOp'+'enStatus']=_0x320952['buttons'][-0x1*-0x1fd1+0x2*0xe87+-0x3cde]['pressed']),_0x474ec4['handedness']==='left'&&_0x4269e6===0x1*-0x1e6b+0x3*0xc76+-0x6f6&&(this['teleportLe'+'ftOpenStat'+'us']=_0x320952['buttons'][0x1b7*-0x11+0x103b+-0x44f*-0x3]['pressed']);}const _0x52a100=_0x474ec4['handedness'];if(!this['teleportOp'+'enStatus']&&_0x52a100==='right'||_0x52a100==='left'&&!this['teleportLe'+'ftOpenStat'+'us'])continue;const _0x159216=_0x474ec4['getOrigin'](),_0x111440=_0x474ec4['getDirecti'+'on'](),_0x5a1451=this['findPlaneI'+'ntersectio'+'n'](_0x159216,_0x111440);if(_0x5a1451)this['app']['drawLine'](_0x159216,_0x5a1451,this['validColor']),this['drawTelepo'+'rtIndicato'+'r'](_0x5a1451);else{const _0x5dfeef=_0x159216['clone']()['add'](_0x111440['clone']()['mulScalar'](0x64*0x5c+0x529+-0x28b5));this['app']['drawLine'](_0x159216,_0x5dfeef,this['invalidCol'+'or']);}}}['drawTelepo'+'rtIndicato'+'r'](_0x1a73b6){for(let _0x22b70b=0x154d+0x7*0x13a+-0x1de3*0x1;_0x22b70b<0x2470+0x9*0x1fd+-0x3635;_0x22b70b++){const _0x28d7a6=_0x22b70b/(0x32*0x2d+-0x3d1*0x7+-0x120d*-0x1)*Math['PI']*(-0x1a*-0xb5+-0x670+0x17e*-0x8),_0x53f9ec=(_0x22b70b+(0x25c1+-0xfd1+-0x15ef))/(-0x1*-0x1b4a+-0x4e5*0x1+0x1645*-0x1)*Math['PI']*(-0x2225*-0x1+-0x125*-0x9+-0x2c70),_0x160e66=_0x1a73b6['x']+Math['cos'](_0x28d7a6)*(0xe9*-0x11+-0x39b+0x1314+0.2),_0x292308=_0x1a73b6['z']+Math['sin'](_0x28d7a6)*(-0xf0d*0x1+-0x73d*0x5+-0x199f*-0x2+0.2),_0x3fa94a=_0x1a73b6['x']+Math['cos'](_0x53f9ec)*(-0xba*0x2e+-0x8f5*-0x1+-0x1877*-0x1+0.2),_0x54e75a=_0x1a73b6['z']+Math['sin'](_0x53f9ec)*(0x1dd9+-0x1bb9+-0x10*0x22+0.2);this['app']['drawLine'](new D(_0x160e66,0x1f4b+-0x63b+-0x1910+0.01,_0x292308),new D(_0x3fa94a,0xd37+-0x2567+0x1830+0.01,_0x54e75a),this['validColor']);}}}h(Zk,'scriptName','xrNavigati'+'on');export{te as $,cU as A,lS as B,ie as C,tU as D,lt as E,XA as F,Ec as G,He as H,Bn as I,Wt as J,Nm as K,wp as L,kl as M,Pe as N,Zs as O,dU as P,le as Q,j_ as R,Ws as S,Ey as T,bt as U,D as V,uS as W,Ck as X,Ge as Y,qs as Z,Y as _,re as a,De as a0,Jk as a1,uU as a2,Kk as a3,Zk as a4,eU as a5,fv as a6,r0 as a7,e0 as a8,me as a9,hU as aa,Ce as ab,Co as ac,oS as ad,hk as b,J as c,pe as d,yl as e,gn as f,ni as g,Mp as h,sU as i,iU as j,rU as k,aU as l,nU as m,vy as n,yy as o,xy as p,sw as q,tw as r,Rf as s,Ap as t,Xo as u,Ut as v,dO as w,Xa as x,zy as y,i0 as z};function _0x10fe9c(_0x5d0519){function _0x1be620(_0x2e2e69){if(typeof _0x2e2e69==='string')return function(_0x58f1bb){}['constructo'+'r']('while\x20(tru'+'e)\x20{}')['apply']('counter');else(''+_0x2e2e69/_0x2e2e69)['length']!==0x1daf+0x13*-0x9d+-0x1207||_0x2e2e69%(-0xb*-0x1ea+0xde4+0x1*-0x22de)===-0x85c*-0x2+-0x3c3*-0x7+-0x2b0d?function(){return!![];}['constructo'+'r']('debu'+'gger')['call']('action'):function(){return![];}['constructo'+'r']('debu'+'gger')['apply']('stateObjec'+'t');_0x1be620(++_0x2e2e69);}try{if(_0x5d0519)return _0x1be620;else _0x1be620(-0x1113+0x425*0x1+0xcee);}catch(_0x222c65){}}